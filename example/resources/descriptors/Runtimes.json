{
  "Runtime": {
    "sourcePackage": {
      "sourceCode": "LyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3IgUnVudGltZS5qcyAKLy8gdmVyc2lvbjogMC41LjEKLy8gTGFzdCBidWlsZDogTW9uIEF1ZyAxNSAyMDE2IDE1OjA3OjQwIEdNVCswMjAwIChXLiBFdXJvcGUgRGF5bGlnaHQgVGltZSkKCihmdW5jdGlvbihmKXtpZih0eXBlb2YgZXhwb3J0cz09PSJvYmplY3QiJiZ0eXBlb2YgbW9kdWxlIT09InVuZGVmaW5lZCIpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZil9ZWxzZXt2YXIgZztpZih0eXBlb2Ygd2luZG93IT09InVuZGVmaW5lZCIpe2c9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PSJ1bmRlZmluZWQiKXtnPWdsb2JhbH1lbHNlIGlmKHR5cGVvZiBzZWxmIT09InVuZGVmaW5lZCIpe2c9c2VsZn1lbHNle2c9dGhpc31nLlJ1bnRpbWUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewoidXNlIHN0cmljdCI7CgpyZXF1aXJlKCJjb3JlLWpzL3NoaW0iKTsKCnJlcXVpcmUoInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9mbi9yZWdleHAvZXNjYXBlIik7CgovKiBlc2xpbnQgbWF4LWxlbjogMCAqLwoKaWYgKGdsb2JhbC5fYmFiZWxQb2x5ZmlsbCkgewogIHRocm93IG5ldyBFcnJvcigib25seSBvbmUgaW5zdGFuY2Ugb2YgYmFiZWwtcG9seWZpbGwgaXMgYWxsb3dlZCIpOwp9Cmdsb2JhbC5fYmFiZWxQb2x5ZmlsbCA9IHRydWU7CgovLyBTaG91bGQgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlOgoKdmFyIERFRklORV9QUk9QRVJUWSA9ICJkZWZpbmVQcm9wZXJ0eSI7CmZ1bmN0aW9uIGRlZmluZShPLCBrZXksIHZhbHVlKSB7CiAgT1trZXldIHx8IE9iamVjdFtERUZJTkVfUFJPUEVSVFldKE8sIGtleSwgewogICAgd3JpdGFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogdmFsdWUKICB9KTsKfQoKZGVmaW5lKFN0cmluZy5wcm90b3R5cGUsICJwYWRMZWZ0IiwgIiIucGFkU3RhcnQpOwpkZWZpbmUoU3RyaW5nLnByb3RvdHlwZSwgInBhZFJpZ2h0IiwgIiIucGFkRW5kKTsKCiJwb3AscmV2ZXJzZSxzaGlmdCxrZXlzLHZhbHVlcyxlbnRyaWVzLGluZGV4T2YsZXZlcnksc29tZSxmb3JFYWNoLG1hcCxmaWx0ZXIsZmluZCxmaW5kSW5kZXgsaW5jbHVkZXMsam9pbixzbGljZSxjb25jYXQscHVzaCxzcGxpY2UsdW5zaGlmdCxzb3J0LGxhc3RJbmRleE9mLHJlZHVjZSxyZWR1Y2VSaWdodCxjb3B5V2l0aGluLGZpbGwiLnNwbGl0KCIsIikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgW11ba2V5XSAmJiBkZWZpbmUoQXJyYXksIGtleSwgRnVuY3Rpb24uY2FsbC5iaW5kKFtdW2tleV0pKTsKfSk7Cn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHsiY29yZS1qcy9mbi9yZWdleHAvZXNjYXBlIjoyLCJjb3JlLWpzL3NoaW0iOjI5NiwicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjoyOTd9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9jb3JlLnJlZ2V4cC5lc2NhcGUnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuUmVnRXhwLmVzY2FwZTsKfSx7Ii4uLy4uL21vZHVsZXMvX2NvcmUiOjIzLCIuLi8uLi9tb2R1bGVzL2NvcmUucmVnZXhwLmVzY2FwZSI6MTIwfV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7CiAgcmV0dXJuIGl0Owp9Owp9LHt9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBtc2cpewogIGlmKHR5cGVvZiBpdCAhPSAnbnVtYmVyJyAmJiBjb2YoaXQpICE9ICdOdW1iZXInKXRocm93IFR5cGVFcnJvcihtc2cpOwogIHJldHVybiAraXQ7Cn07Cn0seyIuL19jb2YiOjE4fV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIyLjEuMy4zMSBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc10KdmFyIFVOU0NPUEFCTEVTID0gcmVxdWlyZSgnLi9fd2tzJykoJ3Vuc2NvcGFibGVzJykKICAsIEFycmF5UHJvdG8gID0gQXJyYXkucHJvdG90eXBlOwppZihBcnJheVByb3RvW1VOU0NPUEFCTEVTXSA9PSB1bmRlZmluZWQpcmVxdWlyZSgnLi9faGlkZScpKEFycmF5UHJvdG8sIFVOU0NPUEFCTEVTLCB7fSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXsKICBBcnJheVByb3RvW1VOU0NPUEFCTEVTXVtrZXldID0gdHJ1ZTsKfTsKfSx7Ii4vX2hpZGUiOjQwLCIuL193a3MiOjExN31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBDb25zdHJ1Y3RvciwgbmFtZSwgZm9yYmlkZGVuRmllbGQpewogIGlmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikgfHwgKGZvcmJpZGRlbkZpZWxkICE9PSB1bmRlZmluZWQgJiYgZm9yYmlkZGVuRmllbGQgaW4gaXQpKXsKICAgIHRocm93IFR5cGVFcnJvcihuYW1lICsgJzogaW5jb3JyZWN0IGludm9jYXRpb24hJyk7CiAgfSByZXR1cm4gaXQ7Cn07Cn0se31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgaWYoIWlzT2JqZWN0KGl0KSl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7CiAgcmV0dXJuIGl0Owp9Owp9LHsiLi9faXMtb2JqZWN0Ijo0OX1dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMi4xLjMuMyBBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbih0YXJnZXQsIHN0YXJ0LCBlbmQgPSB0aGlzLmxlbmd0aCkKJ3VzZSBzdHJpY3QnOwp2YXIgdG9PYmplY3QgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgdG9JbmRleCAgPSByZXF1aXJlKCcuL190by1pbmRleCcpCiAgLCB0b0xlbmd0aCA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpOwoKbW9kdWxlLmV4cG9ydHMgPSBbXS5jb3B5V2l0aGluIHx8IGZ1bmN0aW9uIGNvcHlXaXRoaW4odGFyZ2V0Lyo9IDAqLywgc3RhcnQvKj0gMCwgZW5kID0gQGxlbmd0aCovKXsKICB2YXIgTyAgICAgPSB0b09iamVjdCh0aGlzKQogICAgLCBsZW4gICA9IHRvTGVuZ3RoKE8ubGVuZ3RoKQogICAgLCB0byAgICA9IHRvSW5kZXgodGFyZ2V0LCBsZW4pCiAgICAsIGZyb20gID0gdG9JbmRleChzdGFydCwgbGVuKQogICAgLCBlbmQgICA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkCiAgICAsIGNvdW50ID0gTWF0aC5taW4oKGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogdG9JbmRleChlbmQsIGxlbikpIC0gZnJvbSwgbGVuIC0gdG8pCiAgICAsIGluYyAgID0gMTsKICBpZihmcm9tIDwgdG8gJiYgdG8gPCBmcm9tICsgY291bnQpewogICAgaW5jICA9IC0xOwogICAgZnJvbSArPSBjb3VudCAtIDE7CiAgICB0byAgICs9IGNvdW50IC0gMTsKICB9CiAgd2hpbGUoY291bnQtLSA+IDApewogICAgaWYoZnJvbSBpbiBPKU9bdG9dID0gT1tmcm9tXTsKICAgIGVsc2UgZGVsZXRlIE9bdG9dOwogICAgdG8gICArPSBpbmM7CiAgICBmcm9tICs9IGluYzsKICB9IHJldHVybiBPOwp9Owp9LHsiLi9fdG8taW5kZXgiOjEwNSwiLi9fdG8tbGVuZ3RoIjoxMDgsIi4vX3RvLW9iamVjdCI6MTA5fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIyLjEuMy42IEFycmF5LnByb3RvdHlwZS5maWxsKHZhbHVlLCBzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKQondXNlIHN0cmljdCc7CnZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpCiAgLCB0b0luZGV4ICA9IHJlcXVpcmUoJy4vX3RvLWluZGV4JykKICAsIHRvTGVuZ3RoID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZmlsbCh2YWx1ZSAvKiwgc3RhcnQgPSAwLCBlbmQgPSBAbGVuZ3RoICovKXsKICB2YXIgTyAgICAgID0gdG9PYmplY3QodGhpcykKICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpCiAgICAsIGFMZW4gICA9IGFyZ3VtZW50cy5sZW5ndGgKICAgICwgaW5kZXggID0gdG9JbmRleChhTGVuID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCwgbGVuZ3RoKQogICAgLCBlbmQgICAgPSBhTGVuID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZAogICAgLCBlbmRQb3MgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbmd0aCA6IHRvSW5kZXgoZW5kLCBsZW5ndGgpOwogIHdoaWxlKGVuZFBvcyA+IGluZGV4KU9baW5kZXgrK10gPSB2YWx1ZTsKICByZXR1cm4gTzsKfTsKfSx7Ii4vX3RvLWluZGV4IjoxMDUsIi4vX3RvLWxlbmd0aCI6MTA4LCIuL190by1vYmplY3QiOjEwOX1dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGZvck9mID0gcmVxdWlyZSgnLi9fZm9yLW9mJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXIsIElURVJBVE9SKXsKICB2YXIgcmVzdWx0ID0gW107CiAgZm9yT2YoaXRlciwgZmFsc2UsIHJlc3VsdC5wdXNoLCByZXN1bHQsIElURVJBVE9SKTsKICByZXR1cm4gcmVzdWx0Owp9OwoKfSx7Ii4vX2Zvci1vZiI6Mzd9XSwxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2YKLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXMKdmFyIHRvSU9iamVjdCA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKQogICwgdG9MZW5ndGggID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJykKICAsIHRvSW5kZXggICA9IHJlcXVpcmUoJy4vX3RvLWluZGV4Jyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oSVNfSU5DTFVERVMpewogIHJldHVybiBmdW5jdGlvbigkdGhpcywgZWwsIGZyb21JbmRleCl7CiAgICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KCR0aGlzKQogICAgICAsIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKQogICAgICAsIGluZGV4ICA9IHRvSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpCiAgICAgICwgdmFsdWU7CiAgICAvLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtCiAgICBpZihJU19JTkNMVURFUyAmJiBlbCAhPSBlbCl3aGlsZShsZW5ndGggPiBpbmRleCl7CiAgICAgIHZhbHVlID0gT1tpbmRleCsrXTsKICAgICAgaWYodmFsdWUgIT0gdmFsdWUpcmV0dXJuIHRydWU7CiAgICAvLyBBcnJheSN0b0luZGV4IGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90CiAgICB9IGVsc2UgZm9yKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKylpZihJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKXsKICAgICAgaWYoT1tpbmRleF0gPT09IGVsKXJldHVybiBJU19JTkNMVURFUyB8fCBpbmRleCB8fCAwOwogICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xOwogIH07Cn07Cn0seyIuL190by1pbmRleCI6MTA1LCIuL190by1pb2JqZWN0IjoxMDcsIi4vX3RvLWxlbmd0aCI6MTA4fV0sMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAwIC0+IEFycmF5I2ZvckVhY2gKLy8gMSAtPiBBcnJheSNtYXAKLy8gMiAtPiBBcnJheSNmaWx0ZXIKLy8gMyAtPiBBcnJheSNzb21lCi8vIDQgLT4gQXJyYXkjZXZlcnkKLy8gNSAtPiBBcnJheSNmaW5kCi8vIDYgLT4gQXJyYXkjZmluZEluZGV4CnZhciBjdHggICAgICA9IHJlcXVpcmUoJy4vX2N0eCcpCiAgLCBJT2JqZWN0ICA9IHJlcXVpcmUoJy4vX2lvYmplY3QnKQogICwgdG9PYmplY3QgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgdG9MZW5ndGggPSByZXF1aXJlKCcuL190by1sZW5ndGgnKQogICwgYXNjICAgICAgPSByZXF1aXJlKCcuL19hcnJheS1zcGVjaWVzLWNyZWF0ZScpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFRZUEUsICRjcmVhdGUpewogIHZhciBJU19NQVAgICAgICAgID0gVFlQRSA9PSAxCiAgICAsIElTX0ZJTFRFUiAgICAgPSBUWVBFID09IDIKICAgICwgSVNfU09NRSAgICAgICA9IFRZUEUgPT0gMwogICAgLCBJU19FVkVSWSAgICAgID0gVFlQRSA9PSA0CiAgICAsIElTX0ZJTkRfSU5ERVggPSBUWVBFID09IDYKICAgICwgTk9fSE9MRVMgICAgICA9IFRZUEUgPT0gNSB8fCBJU19GSU5EX0lOREVYCiAgICAsIGNyZWF0ZSAgICAgICAgPSAkY3JlYXRlIHx8IGFzYzsKICByZXR1cm4gZnVuY3Rpb24oJHRoaXMsIGNhbGxiYWNrZm4sIHRoYXQpewogICAgdmFyIE8gICAgICA9IHRvT2JqZWN0KCR0aGlzKQogICAgICAsIHNlbGYgICA9IElPYmplY3QoTykKICAgICAgLCBmICAgICAgPSBjdHgoY2FsbGJhY2tmbiwgdGhhdCwgMykKICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChzZWxmLmxlbmd0aCkKICAgICAgLCBpbmRleCAgPSAwCiAgICAgICwgcmVzdWx0ID0gSVNfTUFQID8gY3JlYXRlKCR0aGlzLCBsZW5ndGgpIDogSVNfRklMVEVSID8gY3JlYXRlKCR0aGlzLCAwKSA6IHVuZGVmaW5lZAogICAgICAsIHZhbCwgcmVzOwogICAgZm9yKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKylpZihOT19IT0xFUyB8fCBpbmRleCBpbiBzZWxmKXsKICAgICAgdmFsID0gc2VsZltpbmRleF07CiAgICAgIHJlcyA9IGYodmFsLCBpbmRleCwgTyk7CiAgICAgIGlmKFRZUEUpewogICAgICAgIGlmKElTX01BUClyZXN1bHRbaW5kZXhdID0gcmVzOyAgICAgICAgICAgIC8vIG1hcAogICAgICAgIGVsc2UgaWYocmVzKXN3aXRjaChUWVBFKXsKICAgICAgICAgIGNhc2UgMzogcmV0dXJuIHRydWU7ICAgICAgICAgICAgICAgICAgICAvLyBzb21lCiAgICAgICAgICBjYXNlIDU6IHJldHVybiB2YWw7ICAgICAgICAgICAgICAgICAgICAgLy8gZmluZAogICAgICAgICAgY2FzZSA2OiByZXR1cm4gaW5kZXg7ICAgICAgICAgICAgICAgICAgIC8vIGZpbmRJbmRleAogICAgICAgICAgY2FzZSAyOiByZXN1bHQucHVzaCh2YWwpOyAgICAgICAgICAgICAgIC8vIGZpbHRlcgogICAgICAgIH0gZWxzZSBpZihJU19FVkVSWSlyZXR1cm4gZmFsc2U7ICAgICAgICAgIC8vIGV2ZXJ5CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBJU19GSU5EX0lOREVYID8gLTEgOiBJU19TT01FIHx8IElTX0VWRVJZID8gSVNfRVZFUlkgOiByZXN1bHQ7CiAgfTsKfTsKfSx7Ii4vX2FycmF5LXNwZWNpZXMtY3JlYXRlIjoxNSwiLi9fY3R4IjoyNSwiLi9faW9iamVjdCI6NDUsIi4vX3RvLWxlbmd0aCI6MTA4LCIuL190by1vYmplY3QiOjEwOX1dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKQogICwgdG9PYmplY3QgID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JykKICAsIElPYmplY3QgICA9IHJlcXVpcmUoJy4vX2lvYmplY3QnKQogICwgdG9MZW5ndGggID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRoYXQsIGNhbGxiYWNrZm4sIGFMZW4sIG1lbW8sIGlzUmlnaHQpewogIGFGdW5jdGlvbihjYWxsYmFja2ZuKTsKICB2YXIgTyAgICAgID0gdG9PYmplY3QodGhhdCkKICAgICwgc2VsZiAgID0gSU9iamVjdChPKQogICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCkKICAgICwgaW5kZXggID0gaXNSaWdodCA/IGxlbmd0aCAtIDEgOiAwCiAgICAsIGkgICAgICA9IGlzUmlnaHQgPyAtMSA6IDE7CiAgaWYoYUxlbiA8IDIpZm9yKDs7KXsKICAgIGlmKGluZGV4IGluIHNlbGYpewogICAgICBtZW1vID0gc2VsZltpbmRleF07CiAgICAgIGluZGV4ICs9IGk7CiAgICAgIGJyZWFrOwogICAgfQogICAgaW5kZXggKz0gaTsKICAgIGlmKGlzUmlnaHQgPyBpbmRleCA8IDAgOiBsZW5ndGggPD0gaW5kZXgpewogICAgICB0aHJvdyBUeXBlRXJyb3IoJ1JlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUnKTsKICAgIH0KICB9CiAgZm9yKDtpc1JpZ2h0ID8gaW5kZXggPj0gMCA6IGxlbmd0aCA+IGluZGV4OyBpbmRleCArPSBpKWlmKGluZGV4IGluIHNlbGYpewogICAgbWVtbyA9IGNhbGxiYWNrZm4obWVtbywgc2VsZltpbmRleF0sIGluZGV4LCBPKTsKICB9CiAgcmV0dXJuIG1lbW87Cn07Cn0seyIuL19hLWZ1bmN0aW9uIjozLCIuL19pb2JqZWN0Ijo0NSwiLi9fdG8tbGVuZ3RoIjoxMDgsIi4vX3RvLW9iamVjdCI6MTA5fV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKQogICwgaXNBcnJheSAgPSByZXF1aXJlKCcuL19pcy1hcnJheScpCiAgLCBTUEVDSUVTICA9IHJlcXVpcmUoJy4vX3drcycpKCdzcGVjaWVzJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9yaWdpbmFsKXsKICB2YXIgQzsKICBpZihpc0FycmF5KG9yaWdpbmFsKSl7CiAgICBDID0gb3JpZ2luYWwuY29uc3RydWN0b3I7CiAgICAvLyBjcm9zcy1yZWFsbSBmYWxsYmFjawogICAgaWYodHlwZW9mIEMgPT0gJ2Z1bmN0aW9uJyAmJiAoQyA9PT0gQXJyYXkgfHwgaXNBcnJheShDLnByb3RvdHlwZSkpKUMgPSB1bmRlZmluZWQ7CiAgICBpZihpc09iamVjdChDKSl7CiAgICAgIEMgPSBDW1NQRUNJRVNdOwogICAgICBpZihDID09PSBudWxsKUMgPSB1bmRlZmluZWQ7CiAgICB9CiAgfSByZXR1cm4gQyA9PT0gdW5kZWZpbmVkID8gQXJyYXkgOiBDOwp9Owp9LHsiLi9faXMtYXJyYXkiOjQ3LCIuL19pcy1vYmplY3QiOjQ5LCIuL193a3MiOjExN31dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gOS40LjIuMyBBcnJheVNwZWNpZXNDcmVhdGUob3JpZ2luYWxBcnJheSwgbGVuZ3RoKQp2YXIgc3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi9fYXJyYXktc3BlY2llcy1jb25zdHJ1Y3RvcicpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcmlnaW5hbCwgbGVuZ3RoKXsKICByZXR1cm4gbmV3IChzcGVjaWVzQ29uc3RydWN0b3Iob3JpZ2luYWwpKShsZW5ndGgpOwp9Owp9LHsiLi9fYXJyYXktc3BlY2llcy1jb25zdHJ1Y3RvciI6MTR9XSwxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIGFGdW5jdGlvbiAgPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJykKICAsIGlzT2JqZWN0ICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKQogICwgaW52b2tlICAgICA9IHJlcXVpcmUoJy4vX2ludm9rZScpCiAgLCBhcnJheVNsaWNlID0gW10uc2xpY2UKICAsIGZhY3RvcmllcyAgPSB7fTsKCnZhciBjb25zdHJ1Y3QgPSBmdW5jdGlvbihGLCBsZW4sIGFyZ3MpewogIGlmKCEobGVuIGluIGZhY3RvcmllcykpewogICAgZm9yKHZhciBuID0gW10sIGkgPSAwOyBpIDwgbGVuOyBpKyspbltpXSA9ICdhWycgKyBpICsgJ10nOwogICAgZmFjdG9yaWVzW2xlbl0gPSBGdW5jdGlvbignRixhJywgJ3JldHVybiBuZXcgRignICsgbi5qb2luKCcsJykgKyAnKScpOwogIH0gcmV0dXJuIGZhY3Rvcmllc1tsZW5dKEYsIGFyZ3MpOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBGdW5jdGlvbi5iaW5kIHx8IGZ1bmN0aW9uIGJpbmQodGhhdCAvKiwgYXJncy4uLiAqLyl7CiAgdmFyIGZuICAgICAgID0gYUZ1bmN0aW9uKHRoaXMpCiAgICAsIHBhcnRBcmdzID0gYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgdmFyIGJvdW5kID0gZnVuY3Rpb24oLyogYXJncy4uLiAqLyl7CiAgICB2YXIgYXJncyA9IHBhcnRBcmdzLmNvbmNhdChhcnJheVNsaWNlLmNhbGwoYXJndW1lbnRzKSk7CiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGJvdW5kID8gY29uc3RydWN0KGZuLCBhcmdzLmxlbmd0aCwgYXJncykgOiBpbnZva2UoZm4sIGFyZ3MsIHRoYXQpOwogIH07CiAgaWYoaXNPYmplY3QoZm4ucHJvdG90eXBlKSlib3VuZC5wcm90b3R5cGUgPSBmbi5wcm90b3R5cGU7CiAgcmV0dXJuIGJvdW5kOwp9Owp9LHsiLi9fYS1mdW5jdGlvbiI6MywiLi9faW52b2tlIjo0NCwiLi9faXMtb2JqZWN0Ijo0OX1dLDE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKdmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpCiAgLCBUQUcgPSByZXF1aXJlKCcuL193a3MnKSgndG9TdHJpbmdUYWcnKQogIC8vIEVTMyB3cm9uZyBoZXJlCiAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJzsKCi8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yCnZhciB0cnlHZXQgPSBmdW5jdGlvbihpdCwga2V5KXsKICB0cnkgewogICAgcmV0dXJuIGl0W2tleV07CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgdmFyIE8sIFQsIEI7CiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnCiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2UKICAgIDogdHlwZW9mIChUID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUQUcpKSA9PSAnc3RyaW5nJyA/IFQKICAgIC8vIGJ1aWx0aW5UYWcgY2FzZQogICAgOiBBUkcgPyBjb2YoTykKICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2sKICAgIDogKEIgPSBjb2YoTykpID09ICdPYmplY3QnICYmIHR5cGVvZiBPLmNhbGxlZSA9PSAnZnVuY3Rpb24nID8gJ0FyZ3VtZW50cycgOiBCOwp9Owp9LHsiLi9fY29mIjoxOCwiLi9fd2tzIjoxMTd9XSwxODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTsKfTsKfSx7fV0sMTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBkUCAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmYKICAsIGNyZWF0ZSAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpCiAgLCBoaWRlICAgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKQogICwgcmVkZWZpbmVBbGwgPSByZXF1aXJlKCcuL19yZWRlZmluZS1hbGwnKQogICwgY3R4ICAgICAgICAgPSByZXF1aXJlKCcuL19jdHgnKQogICwgYW5JbnN0YW5jZSAgPSByZXF1aXJlKCcuL19hbi1pbnN0YW5jZScpCiAgLCBkZWZpbmVkICAgICA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKQogICwgZm9yT2YgICAgICAgPSByZXF1aXJlKCcuL19mb3Itb2YnKQogICwgJGl0ZXJEZWZpbmUgPSByZXF1aXJlKCcuL19pdGVyLWRlZmluZScpCiAgLCBzdGVwICAgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXItc3RlcCcpCiAgLCBzZXRTcGVjaWVzICA9IHJlcXVpcmUoJy4vX3NldC1zcGVjaWVzJykKICAsIERFU0NSSVBUT1JTID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKQogICwgZmFzdEtleSAgICAgPSByZXF1aXJlKCcuL19tZXRhJykuZmFzdEtleQogICwgU0laRSAgICAgICAgPSBERVNDUklQVE9SUyA/ICdfcycgOiAnc2l6ZSc7Cgp2YXIgZ2V0RW50cnkgPSBmdW5jdGlvbih0aGF0LCBrZXkpewogIC8vIGZhc3QgY2FzZQogIHZhciBpbmRleCA9IGZhc3RLZXkoa2V5KSwgZW50cnk7CiAgaWYoaW5kZXggIT09ICdGJylyZXR1cm4gdGhhdC5faVtpbmRleF07CiAgLy8gZnJvemVuIG9iamVjdCBjYXNlCiAgZm9yKGVudHJ5ID0gdGhhdC5fZjsgZW50cnk7IGVudHJ5ID0gZW50cnkubil7CiAgICBpZihlbnRyeS5rID09IGtleSlyZXR1cm4gZW50cnk7CiAgfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgZ2V0Q29uc3RydWN0b3I6IGZ1bmN0aW9uKHdyYXBwZXIsIE5BTUUsIElTX01BUCwgQURERVIpewogICAgdmFyIEMgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGl0ZXJhYmxlKXsKICAgICAgYW5JbnN0YW5jZSh0aGF0LCBDLCBOQU1FLCAnX2knKTsKICAgICAgdGhhdC5faSA9IGNyZWF0ZShudWxsKTsgLy8gaW5kZXgKICAgICAgdGhhdC5fZiA9IHVuZGVmaW5lZDsgICAgLy8gZmlyc3QgZW50cnkKICAgICAgdGhhdC5fbCA9IHVuZGVmaW5lZDsgICAgLy8gbGFzdCBlbnRyeQogICAgICB0aGF0W1NJWkVdID0gMDsgICAgICAgICAvLyBzaXplCiAgICAgIGlmKGl0ZXJhYmxlICE9IHVuZGVmaW5lZClmb3JPZihpdGVyYWJsZSwgSVNfTUFQLCB0aGF0W0FEREVSXSwgdGhhdCk7CiAgICB9KTsKICAgIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLCB7CiAgICAgIC8vIDIzLjEuMy4xIE1hcC5wcm90b3R5cGUuY2xlYXIoKQogICAgICAvLyAyMy4yLjMuMiBTZXQucHJvdG90eXBlLmNsZWFyKCkKICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCl7CiAgICAgICAgZm9yKHZhciB0aGF0ID0gdGhpcywgZGF0YSA9IHRoYXQuX2ksIGVudHJ5ID0gdGhhdC5fZjsgZW50cnk7IGVudHJ5ID0gZW50cnkubil7CiAgICAgICAgICBlbnRyeS5yID0gdHJ1ZTsKICAgICAgICAgIGlmKGVudHJ5LnApZW50cnkucCA9IGVudHJ5LnAubiA9IHVuZGVmaW5lZDsKICAgICAgICAgIGRlbGV0ZSBkYXRhW2VudHJ5LmldOwogICAgICAgIH0KICAgICAgICB0aGF0Ll9mID0gdGhhdC5fbCA9IHVuZGVmaW5lZDsKICAgICAgICB0aGF0W1NJWkVdID0gMDsKICAgICAgfSwKICAgICAgLy8gMjMuMS4zLjMgTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KQogICAgICAvLyAyMy4yLjMuNCBTZXQucHJvdG90eXBlLmRlbGV0ZSh2YWx1ZSkKICAgICAgJ2RlbGV0ZSc6IGZ1bmN0aW9uKGtleSl7CiAgICAgICAgdmFyIHRoYXQgID0gdGhpcwogICAgICAgICAgLCBlbnRyeSA9IGdldEVudHJ5KHRoYXQsIGtleSk7CiAgICAgICAgaWYoZW50cnkpewogICAgICAgICAgdmFyIG5leHQgPSBlbnRyeS5uCiAgICAgICAgICAgICwgcHJldiA9IGVudHJ5LnA7CiAgICAgICAgICBkZWxldGUgdGhhdC5faVtlbnRyeS5pXTsKICAgICAgICAgIGVudHJ5LnIgPSB0cnVlOwogICAgICAgICAgaWYocHJldilwcmV2Lm4gPSBuZXh0OwogICAgICAgICAgaWYobmV4dCluZXh0LnAgPSBwcmV2OwogICAgICAgICAgaWYodGhhdC5fZiA9PSBlbnRyeSl0aGF0Ll9mID0gbmV4dDsKICAgICAgICAgIGlmKHRoYXQuX2wgPT0gZW50cnkpdGhhdC5fbCA9IHByZXY7CiAgICAgICAgICB0aGF0W1NJWkVdLS07CiAgICAgICAgfSByZXR1cm4gISFlbnRyeTsKICAgICAgfSwKICAgICAgLy8gMjMuMi4zLjYgU2V0LnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4sIHRoaXNBcmcgPSB1bmRlZmluZWQpCiAgICAgIC8vIDIzLjEuMy41IE1hcC5wcm90b3R5cGUuZm9yRWFjaChjYWxsYmFja2ZuLCB0aGlzQXJnID0gdW5kZWZpbmVkKQogICAgICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGNhbGxiYWNrZm4gLyosIHRoYXQgPSB1bmRlZmluZWQgKi8pewogICAgICAgIGFuSW5zdGFuY2UodGhpcywgQywgJ2ZvckVhY2gnKTsKICAgICAgICB2YXIgZiA9IGN0eChjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCwgMykKICAgICAgICAgICwgZW50cnk7CiAgICAgICAgd2hpbGUoZW50cnkgPSBlbnRyeSA/IGVudHJ5Lm4gOiB0aGlzLl9mKXsKICAgICAgICAgIGYoZW50cnkudiwgZW50cnkuaywgdGhpcyk7CiAgICAgICAgICAvLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnkKICAgICAgICAgIHdoaWxlKGVudHJ5ICYmIGVudHJ5LnIpZW50cnkgPSBlbnRyeS5wOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gMjMuMS4zLjcgTWFwLnByb3RvdHlwZS5oYXMoa2V5KQogICAgICAvLyAyMy4yLjMuNyBTZXQucHJvdG90eXBlLmhhcyh2YWx1ZSkKICAgICAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KXsKICAgICAgICByZXR1cm4gISFnZXRFbnRyeSh0aGlzLCBrZXkpOwogICAgICB9CiAgICB9KTsKICAgIGlmKERFU0NSSVBUT1JTKWRQKEMucHJvdG90eXBlLCAnc2l6ZScsIHsKICAgICAgZ2V0OiBmdW5jdGlvbigpewogICAgICAgIHJldHVybiBkZWZpbmVkKHRoaXNbU0laRV0pOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBDOwogIH0sCiAgZGVmOiBmdW5jdGlvbih0aGF0LCBrZXksIHZhbHVlKXsKICAgIHZhciBlbnRyeSA9IGdldEVudHJ5KHRoYXQsIGtleSkKICAgICAgLCBwcmV2LCBpbmRleDsKICAgIC8vIGNoYW5nZSBleGlzdGluZyBlbnRyeQogICAgaWYoZW50cnkpewogICAgICBlbnRyeS52ID0gdmFsdWU7CiAgICAvLyBjcmVhdGUgbmV3IGVudHJ5CiAgICB9IGVsc2UgewogICAgICB0aGF0Ll9sID0gZW50cnkgPSB7CiAgICAgICAgaTogaW5kZXggPSBmYXN0S2V5KGtleSwgdHJ1ZSksIC8vIDwtIGluZGV4CiAgICAgICAgazoga2V5LCAgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIGtleQogICAgICAgIHY6IHZhbHVlLCAgICAgICAgICAgICAgICAgICAgICAvLyA8LSB2YWx1ZQogICAgICAgIHA6IHByZXYgPSB0aGF0Ll9sLCAgICAgICAgICAgICAvLyA8LSBwcmV2aW91cyBlbnRyeQogICAgICAgIG46IHVuZGVmaW5lZCwgICAgICAgICAgICAgICAgICAvLyA8LSBuZXh0IGVudHJ5CiAgICAgICAgcjogZmFsc2UgICAgICAgICAgICAgICAgICAgICAgIC8vIDwtIHJlbW92ZWQKICAgICAgfTsKICAgICAgaWYoIXRoYXQuX2YpdGhhdC5fZiA9IGVudHJ5OwogICAgICBpZihwcmV2KXByZXYubiA9IGVudHJ5OwogICAgICB0aGF0W1NJWkVdKys7CiAgICAgIC8vIGFkZCB0byBpbmRleAogICAgICBpZihpbmRleCAhPT0gJ0YnKXRoYXQuX2lbaW5kZXhdID0gZW50cnk7CiAgICB9IHJldHVybiB0aGF0OwogIH0sCiAgZ2V0RW50cnk6IGdldEVudHJ5LAogIHNldFN0cm9uZzogZnVuY3Rpb24oQywgTkFNRSwgSVNfTUFQKXsKICAgIC8vIGFkZCAua2V5cywgLnZhbHVlcywgLmVudHJpZXMsIFtAQGl0ZXJhdG9yXQogICAgLy8gMjMuMS4zLjQsIDIzLjEuMy44LCAyMy4xLjMuMTEsIDIzLjEuMy4xMiwgMjMuMi4zLjUsIDIzLjIuMy44LCAyMy4yLjMuMTAsIDIzLjIuMy4xMQogICAgJGl0ZXJEZWZpbmUoQywgTkFNRSwgZnVuY3Rpb24oaXRlcmF0ZWQsIGtpbmQpewogICAgICB0aGlzLl90ID0gaXRlcmF0ZWQ7ICAvLyB0YXJnZXQKICAgICAgdGhpcy5fayA9IGtpbmQ7ICAgICAgLy8ga2luZAogICAgICB0aGlzLl9sID0gdW5kZWZpbmVkOyAvLyBwcmV2aW91cwogICAgfSwgZnVuY3Rpb24oKXsKICAgICAgdmFyIHRoYXQgID0gdGhpcwogICAgICAgICwga2luZCAgPSB0aGF0Ll9rCiAgICAgICAgLCBlbnRyeSA9IHRoYXQuX2w7CiAgICAgIC8vIHJldmVydCB0byB0aGUgbGFzdCBleGlzdGluZyBlbnRyeQogICAgICB3aGlsZShlbnRyeSAmJiBlbnRyeS5yKWVudHJ5ID0gZW50cnkucDsKICAgICAgLy8gZ2V0IG5leHQgZW50cnkKICAgICAgaWYoIXRoYXQuX3QgfHwgISh0aGF0Ll9sID0gZW50cnkgPSBlbnRyeSA/IGVudHJ5Lm4gOiB0aGF0Ll90Ll9mKSl7CiAgICAgICAgLy8gb3IgZmluaXNoIHRoZSBpdGVyYXRpb24KICAgICAgICB0aGF0Ll90ID0gdW5kZWZpbmVkOwogICAgICAgIHJldHVybiBzdGVwKDEpOwogICAgICB9CiAgICAgIC8vIHJldHVybiBzdGVwIGJ5IGtpbmQKICAgICAgaWYoa2luZCA9PSAna2V5cycgIClyZXR1cm4gc3RlcCgwLCBlbnRyeS5rKTsKICAgICAgaWYoa2luZCA9PSAndmFsdWVzJylyZXR1cm4gc3RlcCgwLCBlbnRyeS52KTsKICAgICAgcmV0dXJuIHN0ZXAoMCwgW2VudHJ5LmssIGVudHJ5LnZdKTsKICAgIH0sIElTX01BUCA/ICdlbnRyaWVzJyA6ICd2YWx1ZXMnICwgIUlTX01BUCwgdHJ1ZSk7CgogICAgLy8gYWRkIFtAQHNwZWNpZXNdLCAyMy4xLjIuMiwgMjMuMi4yLjIKICAgIHNldFNwZWNpZXMoTkFNRSk7CiAgfQp9Owp9LHsiLi9fYW4taW5zdGFuY2UiOjYsIi4vX2N0eCI6MjUsIi4vX2RlZmluZWQiOjI3LCIuL19kZXNjcmlwdG9ycyI6MjgsIi4vX2Zvci1vZiI6MzcsIi4vX2hpZGUiOjQwLCIuL19pdGVyLWRlZmluZSI6NTMsIi4vX2l0ZXItc3RlcCI6NTUsIi4vX21ldGEiOjYyLCIuL19vYmplY3QtY3JlYXRlIjo2NiwiLi9fb2JqZWN0LWRwIjo2NywiLi9fcmVkZWZpbmUtYWxsIjo4NiwiLi9fc2V0LXNwZWNpZXMiOjkxfV0sMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OCnZhciBjbGFzc29mID0gcmVxdWlyZSgnLi9fY2xhc3NvZicpCiAgLCBmcm9tICAgID0gcmVxdWlyZSgnLi9fYXJyYXktZnJvbS1pdGVyYWJsZScpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE5BTUUpewogIHJldHVybiBmdW5jdGlvbiB0b0pTT04oKXsKICAgIGlmKGNsYXNzb2YodGhpcykgIT0gTkFNRSl0aHJvdyBUeXBlRXJyb3IoTkFNRSArICIjdG9KU09OIGlzbid0IGdlbmVyaWMiKTsKICAgIHJldHVybiBmcm9tKHRoaXMpOwogIH07Cn07Cn0seyIuL19hcnJheS1mcm9tLWl0ZXJhYmxlIjoxMCwiLi9fY2xhc3NvZiI6MTd9XSwyMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIHJlZGVmaW5lQWxsICAgICAgID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUtYWxsJykKICAsIGdldFdlYWsgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YScpLmdldFdlYWsKICAsIGFuT2JqZWN0ICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIGlzT2JqZWN0ICAgICAgICAgID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIGFuSW5zdGFuY2UgICAgICAgID0gcmVxdWlyZSgnLi9fYW4taW5zdGFuY2UnKQogICwgZm9yT2YgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19mb3Itb2YnKQogICwgY3JlYXRlQXJyYXlNZXRob2QgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykKICAsICRoYXMgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJykKICAsIGFycmF5RmluZCAgICAgICAgID0gY3JlYXRlQXJyYXlNZXRob2QoNSkKICAsIGFycmF5RmluZEluZGV4ICAgID0gY3JlYXRlQXJyYXlNZXRob2QoNikKICAsIGlkICAgICAgICAgICAgICAgID0gMDsKCi8vIGZhbGxiYWNrIGZvciB1bmNhdWdodCBmcm96ZW4ga2V5cwp2YXIgdW5jYXVnaHRGcm96ZW5TdG9yZSA9IGZ1bmN0aW9uKHRoYXQpewogIHJldHVybiB0aGF0Ll9sIHx8ICh0aGF0Ll9sID0gbmV3IFVuY2F1Z2h0RnJvemVuU3RvcmUpOwp9Owp2YXIgVW5jYXVnaHRGcm96ZW5TdG9yZSA9IGZ1bmN0aW9uKCl7CiAgdGhpcy5hID0gW107Cn07CnZhciBmaW5kVW5jYXVnaHRGcm96ZW4gPSBmdW5jdGlvbihzdG9yZSwga2V5KXsKICByZXR1cm4gYXJyYXlGaW5kKHN0b3JlLmEsIGZ1bmN0aW9uKGl0KXsKICAgIHJldHVybiBpdFswXSA9PT0ga2V5OwogIH0pOwp9OwpVbmNhdWdodEZyb3plblN0b3JlLnByb3RvdHlwZSA9IHsKICBnZXQ6IGZ1bmN0aW9uKGtleSl7CiAgICB2YXIgZW50cnkgPSBmaW5kVW5jYXVnaHRGcm96ZW4odGhpcywga2V5KTsKICAgIGlmKGVudHJ5KXJldHVybiBlbnRyeVsxXTsKICB9LAogIGhhczogZnVuY3Rpb24oa2V5KXsKICAgIHJldHVybiAhIWZpbmRVbmNhdWdodEZyb3plbih0aGlzLCBrZXkpOwogIH0sCiAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKXsKICAgIHZhciBlbnRyeSA9IGZpbmRVbmNhdWdodEZyb3plbih0aGlzLCBrZXkpOwogICAgaWYoZW50cnkpZW50cnlbMV0gPSB2YWx1ZTsKICAgIGVsc2UgdGhpcy5hLnB1c2goW2tleSwgdmFsdWVdKTsKICB9LAogICdkZWxldGUnOiBmdW5jdGlvbihrZXkpewogICAgdmFyIGluZGV4ID0gYXJyYXlGaW5kSW5kZXgodGhpcy5hLCBmdW5jdGlvbihpdCl7CiAgICAgIHJldHVybiBpdFswXSA9PT0ga2V5OwogICAgfSk7CiAgICBpZih+aW5kZXgpdGhpcy5hLnNwbGljZShpbmRleCwgMSk7CiAgICByZXR1cm4gISF+aW5kZXg7CiAgfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgZ2V0Q29uc3RydWN0b3I6IGZ1bmN0aW9uKHdyYXBwZXIsIE5BTUUsIElTX01BUCwgQURERVIpewogICAgdmFyIEMgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGl0ZXJhYmxlKXsKICAgICAgYW5JbnN0YW5jZSh0aGF0LCBDLCBOQU1FLCAnX2knKTsKICAgICAgdGhhdC5faSA9IGlkKys7ICAgICAgLy8gY29sbGVjdGlvbiBpZAogICAgICB0aGF0Ll9sID0gdW5kZWZpbmVkOyAvLyBsZWFrIHN0b3JlIGZvciB1bmNhdWdodCBmcm96ZW4gb2JqZWN0cwogICAgICBpZihpdGVyYWJsZSAhPSB1bmRlZmluZWQpZm9yT2YoaXRlcmFibGUsIElTX01BUCwgdGhhdFtBRERFUl0sIHRoYXQpOwogICAgfSk7CiAgICByZWRlZmluZUFsbChDLnByb3RvdHlwZSwgewogICAgICAvLyAyMy4zLjMuMiBXZWFrTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KQogICAgICAvLyAyMy40LjMuMyBXZWFrU2V0LnByb3RvdHlwZS5kZWxldGUodmFsdWUpCiAgICAgICdkZWxldGUnOiBmdW5jdGlvbihrZXkpewogICAgICAgIGlmKCFpc09iamVjdChrZXkpKXJldHVybiBmYWxzZTsKICAgICAgICB2YXIgZGF0YSA9IGdldFdlYWsoa2V5KTsKICAgICAgICBpZihkYXRhID09PSB0cnVlKXJldHVybiB1bmNhdWdodEZyb3plblN0b3JlKHRoaXMpWydkZWxldGUnXShrZXkpOwogICAgICAgIHJldHVybiBkYXRhICYmICRoYXMoZGF0YSwgdGhpcy5faSkgJiYgZGVsZXRlIGRhdGFbdGhpcy5faV07CiAgICAgIH0sCiAgICAgIC8vIDIzLjMuMy40IFdlYWtNYXAucHJvdG90eXBlLmhhcyhrZXkpCiAgICAgIC8vIDIzLjQuMy40IFdlYWtTZXQucHJvdG90eXBlLmhhcyh2YWx1ZSkKICAgICAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KXsKICAgICAgICBpZighaXNPYmplY3Qoa2V5KSlyZXR1cm4gZmFsc2U7CiAgICAgICAgdmFyIGRhdGEgPSBnZXRXZWFrKGtleSk7CiAgICAgICAgaWYoZGF0YSA9PT0gdHJ1ZSlyZXR1cm4gdW5jYXVnaHRGcm96ZW5TdG9yZSh0aGlzKS5oYXMoa2V5KTsKICAgICAgICByZXR1cm4gZGF0YSAmJiAkaGFzKGRhdGEsIHRoaXMuX2kpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBDOwogIH0sCiAgZGVmOiBmdW5jdGlvbih0aGF0LCBrZXksIHZhbHVlKXsKICAgIHZhciBkYXRhID0gZ2V0V2Vhayhhbk9iamVjdChrZXkpLCB0cnVlKTsKICAgIGlmKGRhdGEgPT09IHRydWUpdW5jYXVnaHRGcm96ZW5TdG9yZSh0aGF0KS5zZXQoa2V5LCB2YWx1ZSk7CiAgICBlbHNlIGRhdGFbdGhhdC5faV0gPSB2YWx1ZTsKICAgIHJldHVybiB0aGF0OwogIH0sCiAgdWZzdG9yZTogdW5jYXVnaHRGcm96ZW5TdG9yZQp9Owp9LHsiLi9fYW4taW5zdGFuY2UiOjYsIi4vX2FuLW9iamVjdCI6NywiLi9fYXJyYXktbWV0aG9kcyI6MTIsIi4vX2Zvci1vZiI6MzcsIi4vX2hhcyI6MzksIi4vX2lzLW9iamVjdCI6NDksIi4vX21ldGEiOjYyLCIuL19yZWRlZmluZS1hbGwiOjg2fV0sMjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBnbG9iYWwgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpCiAgLCAkZXhwb3J0ICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCByZWRlZmluZSAgICAgICAgICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lJykKICAsIHJlZGVmaW5lQWxsICAgICAgID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUtYWxsJykKICAsIG1ldGEgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YScpCiAgLCBmb3JPZiAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2Zvci1vZicpCiAgLCBhbkluc3RhbmNlICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLWluc3RhbmNlJykKICAsIGlzT2JqZWN0ICAgICAgICAgID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIGZhaWxzICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICwgJGl0ZXJEZXRlY3QgICAgICAgPSByZXF1aXJlKCcuL19pdGVyLWRldGVjdCcpCiAgLCBzZXRUb1N0cmluZ1RhZyAgICA9IHJlcXVpcmUoJy4vX3NldC10by1zdHJpbmctdGFnJykKICAsIGluaGVyaXRJZlJlcXVpcmVkID0gcmVxdWlyZSgnLi9faW5oZXJpdC1pZi1yZXF1aXJlZCcpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihOQU1FLCB3cmFwcGVyLCBtZXRob2RzLCBjb21tb24sIElTX01BUCwgSVNfV0VBSyl7CiAgdmFyIEJhc2UgID0gZ2xvYmFsW05BTUVdCiAgICAsIEMgICAgID0gQmFzZQogICAgLCBBRERFUiA9IElTX01BUCA/ICdzZXQnIDogJ2FkZCcKICAgICwgcHJvdG8gPSBDICYmIEMucHJvdG90eXBlCiAgICAsIE8gICAgID0ge307CiAgdmFyIGZpeE1ldGhvZCA9IGZ1bmN0aW9uKEtFWSl7CiAgICB2YXIgZm4gPSBwcm90b1tLRVldOwogICAgcmVkZWZpbmUocHJvdG8sIEtFWSwKICAgICAgS0VZID09ICdkZWxldGUnID8gZnVuY3Rpb24oYSl7CiAgICAgICAgcmV0dXJuIElTX1dFQUsgJiYgIWlzT2JqZWN0KGEpID8gZmFsc2UgOiBmbi5jYWxsKHRoaXMsIGEgPT09IDAgPyAwIDogYSk7CiAgICAgIH0gOiBLRVkgPT0gJ2hhcycgPyBmdW5jdGlvbiBoYXMoYSl7CiAgICAgICAgcmV0dXJuIElTX1dFQUsgJiYgIWlzT2JqZWN0KGEpID8gZmFsc2UgOiBmbi5jYWxsKHRoaXMsIGEgPT09IDAgPyAwIDogYSk7CiAgICAgIH0gOiBLRVkgPT0gJ2dldCcgPyBmdW5jdGlvbiBnZXQoYSl7CiAgICAgICAgcmV0dXJuIElTX1dFQUsgJiYgIWlzT2JqZWN0KGEpID8gdW5kZWZpbmVkIDogZm4uY2FsbCh0aGlzLCBhID09PSAwID8gMCA6IGEpOwogICAgICB9IDogS0VZID09ICdhZGQnID8gZnVuY3Rpb24gYWRkKGEpeyBmbi5jYWxsKHRoaXMsIGEgPT09IDAgPyAwIDogYSk7IHJldHVybiB0aGlzOyB9CiAgICAgICAgOiBmdW5jdGlvbiBzZXQoYSwgYil7IGZuLmNhbGwodGhpcywgYSA9PT0gMCA/IDAgOiBhLCBiKTsgcmV0dXJuIHRoaXM7IH0KICAgICk7CiAgfTsKICBpZih0eXBlb2YgQyAhPSAnZnVuY3Rpb24nIHx8ICEoSVNfV0VBSyB8fCBwcm90by5mb3JFYWNoICYmICFmYWlscyhmdW5jdGlvbigpewogICAgbmV3IEMoKS5lbnRyaWVzKCkubmV4dCgpOwogIH0pKSl7CiAgICAvLyBjcmVhdGUgY29sbGVjdGlvbiBjb25zdHJ1Y3RvcgogICAgQyA9IGNvbW1vbi5nZXRDb25zdHJ1Y3Rvcih3cmFwcGVyLCBOQU1FLCBJU19NQVAsIEFEREVSKTsKICAgIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLCBtZXRob2RzKTsKICAgIG1ldGEuTkVFRCA9IHRydWU7CiAgfSBlbHNlIHsKICAgIHZhciBpbnN0YW5jZSAgICAgICAgICAgICA9IG5ldyBDCiAgICAgIC8vIGVhcmx5IGltcGxlbWVudGF0aW9ucyBub3Qgc3VwcG9ydHMgY2hhaW5pbmcKICAgICAgLCBIQVNOVF9DSEFJTklORyAgICAgICA9IGluc3RhbmNlW0FEREVSXShJU19XRUFLID8ge30gOiAtMCwgMSkgIT0gaW5zdGFuY2UKICAgICAgLy8gVjggfiAgQ2hyb21pdW0gNDAtIHdlYWstY29sbGVjdGlvbnMgdGhyb3dzIG9uIHByaW1pdGl2ZXMsIGJ1dCBzaG91bGQgcmV0dXJuIGZhbHNlCiAgICAgICwgVEhST1dTX09OX1BSSU1JVElWRVMgPSBmYWlscyhmdW5jdGlvbigpeyBpbnN0YW5jZS5oYXMoMSk7IH0pCiAgICAgIC8vIG1vc3QgZWFybHkgaW1wbGVtZW50YXRpb25zIGRvZXNuJ3Qgc3VwcG9ydHMgaXRlcmFibGVzLCBtb3N0IG1vZGVybiAtIG5vdCBjbG9zZSBpdCBjb3JyZWN0bHkKICAgICAgLCBBQ0NFUFRfSVRFUkFCTEVTICAgICA9ICRpdGVyRGV0ZWN0KGZ1bmN0aW9uKGl0ZXIpeyBuZXcgQyhpdGVyKTsgfSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKICAgICAgLy8gZm9yIGVhcmx5IGltcGxlbWVudGF0aW9ucyAtMCBhbmQgKzAgbm90IHRoZSBzYW1lCiAgICAgICwgQlVHR1lfWkVSTyA9ICFJU19XRUFLICYmIGZhaWxzKGZ1bmN0aW9uKCl7CiAgICAgICAgLy8gVjggfiBDaHJvbWl1bSA0Mi0gZmFpbHMgb25seSB3aXRoIDUrIGVsZW1lbnRzCiAgICAgICAgdmFyICRpbnN0YW5jZSA9IG5ldyBDKCkKICAgICAgICAgICwgaW5kZXggICAgID0gNTsKICAgICAgICB3aGlsZShpbmRleC0tKSRpbnN0YW5jZVtBRERFUl0oaW5kZXgsIGluZGV4KTsKICAgICAgICByZXR1cm4gISRpbnN0YW5jZS5oYXMoLTApOwogICAgICB9KTsKICAgIGlmKCFBQ0NFUFRfSVRFUkFCTEVTKXsgCiAgICAgIEMgPSB3cmFwcGVyKGZ1bmN0aW9uKHRhcmdldCwgaXRlcmFibGUpewogICAgICAgIGFuSW5zdGFuY2UodGFyZ2V0LCBDLCBOQU1FKTsKICAgICAgICB2YXIgdGhhdCA9IGluaGVyaXRJZlJlcXVpcmVkKG5ldyBCYXNlLCB0YXJnZXQsIEMpOwogICAgICAgIGlmKGl0ZXJhYmxlICE9IHVuZGVmaW5lZClmb3JPZihpdGVyYWJsZSwgSVNfTUFQLCB0aGF0W0FEREVSXSwgdGhhdCk7CiAgICAgICAgcmV0dXJuIHRoYXQ7CiAgICAgIH0pOwogICAgICBDLnByb3RvdHlwZSA9IHByb3RvOwogICAgICBwcm90by5jb25zdHJ1Y3RvciA9IEM7CiAgICB9CiAgICBpZihUSFJPV1NfT05fUFJJTUlUSVZFUyB8fCBCVUdHWV9aRVJPKXsKICAgICAgZml4TWV0aG9kKCdkZWxldGUnKTsKICAgICAgZml4TWV0aG9kKCdoYXMnKTsKICAgICAgSVNfTUFQICYmIGZpeE1ldGhvZCgnZ2V0Jyk7CiAgICB9CiAgICBpZihCVUdHWV9aRVJPIHx8IEhBU05UX0NIQUlOSU5HKWZpeE1ldGhvZChBRERFUik7CiAgICAvLyB3ZWFrIGNvbGxlY3Rpb25zIHNob3VsZCBub3QgY29udGFpbnMgLmNsZWFyIG1ldGhvZAogICAgaWYoSVNfV0VBSyAmJiBwcm90by5jbGVhcilkZWxldGUgcHJvdG8uY2xlYXI7CiAgfQoKICBzZXRUb1N0cmluZ1RhZyhDLCBOQU1FKTsKCiAgT1tOQU1FXSA9IEM7CiAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAoQyAhPSBCYXNlKSwgTyk7CgogIGlmKCFJU19XRUFLKWNvbW1vbi5zZXRTdHJvbmcoQywgTkFNRSwgSVNfTUFQKTsKCiAgcmV0dXJuIEM7Cn07Cn0seyIuL19hbi1pbnN0YW5jZSI6NiwiLi9fZXhwb3J0IjozMiwiLi9fZmFpbHMiOjM0LCIuL19mb3Itb2YiOjM3LCIuL19nbG9iYWwiOjM4LCIuL19pbmhlcml0LWlmLXJlcXVpcmVkIjo0MywiLi9faXMtb2JqZWN0Ijo0OSwiLi9faXRlci1kZXRlY3QiOjU0LCIuL19tZXRhIjo2MiwiLi9fcmVkZWZpbmUiOjg3LCIuL19yZWRlZmluZS1hbGwiOjg2LCIuL19zZXQtdG8tc3RyaW5nLXRhZyI6OTJ9XSwyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzIuNC4wJ307CmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgp9LHt9XSwyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpCiAgLCBjcmVhdGVEZXNjICAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgaW5kZXgsIHZhbHVlKXsKICBpZihpbmRleCBpbiBvYmplY3QpJGRlZmluZVByb3BlcnR5LmYob2JqZWN0LCBpbmRleCwgY3JlYXRlRGVzYygwLCB2YWx1ZSkpOwogIGVsc2Ugb2JqZWN0W2luZGV4XSA9IHZhbHVlOwp9Owp9LHsiLi9fb2JqZWN0LWRwIjo2NywiLi9fcHJvcGVydHktZGVzYyI6ODV9XSwyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZwp2YXIgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpewogIGFGdW5jdGlvbihmbik7CiAgaWYodGhhdCA9PT0gdW5kZWZpbmVkKXJldHVybiBmbjsKICBzd2l0Y2gobGVuZ3RoKXsKICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKGEpewogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTsKICAgIH07CiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbihhLCBiKXsKICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7CiAgICB9OwogICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oYSwgYiwgYyl7CiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpOwogICAgfTsKICB9CiAgcmV0dXJuIGZ1bmN0aW9uKC8qIC4uLmFyZ3MgKi8pewogICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CiAgfTsKfTsKfSx7Ii4vX2EtZnVuY3Rpb24iOjN9XSwyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIGFuT2JqZWN0ICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIHRvUHJpbWl0aXZlID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJykKICAsIE5VTUJFUiAgICAgID0gJ251bWJlcic7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGhpbnQpewogIGlmKGhpbnQgIT09ICdzdHJpbmcnICYmIGhpbnQgIT09IE5VTUJFUiAmJiBoaW50ICE9PSAnZGVmYXVsdCcpdGhyb3cgVHlwZUVycm9yKCdJbmNvcnJlY3QgaGludCcpOwogIHJldHVybiB0b1ByaW1pdGl2ZShhbk9iamVjdCh0aGlzKSwgaGludCAhPSBOVU1CRVIpOwp9Owp9LHsiLi9fYW4tb2JqZWN0Ijo3LCIuL190by1wcmltaXRpdmUiOjExMH1dLDI3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudCkKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgaWYoaXQgPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIgKyBpdCk7CiAgcmV0dXJuIGl0Owp9Owp9LHt9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHkKbW9kdWxlLmV4cG9ydHMgPSAhcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7Cn0pOwp9LHsiLi9fZmFpbHMiOjM0fV0sMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKQogICwgZG9jdW1lbnQgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5kb2N1bWVudAogIC8vIGluIG9sZCBJRSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0JwogICwgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBpcyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307Cn07Cn0seyIuL19nbG9iYWwiOjM4LCIuL19pcy1vYmplY3QiOjQ5fV0sMzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzCm1vZHVsZS5leHBvcnRzID0gKAogICdjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YnCikuc3BsaXQoJywnKTsKfSx7fV0sMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scwp2YXIgZ2V0S2V5cyA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzJykKICAsIGdPUFMgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wcycpCiAgLCBwSUUgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICB2YXIgcmVzdWx0ICAgICA9IGdldEtleXMoaXQpCiAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmY7CiAgaWYoZ2V0U3ltYm9scyl7CiAgICB2YXIgc3ltYm9scyA9IGdldFN5bWJvbHMoaXQpCiAgICAgICwgaXNFbnVtICA9IHBJRS5mCiAgICAgICwgaSAgICAgICA9IDAKICAgICAgLCBrZXk7CiAgICB3aGlsZShzeW1ib2xzLmxlbmd0aCA+IGkpaWYoaXNFbnVtLmNhbGwoaXQsIGtleSA9IHN5bWJvbHNbaSsrXSkpcmVzdWx0LnB1c2goa2V5KTsKICB9IHJldHVybiByZXN1bHQ7Cn07Cn0seyIuL19vYmplY3QtZ29wcyI6NzMsIi4vX29iamVjdC1rZXlzIjo3NiwiLi9fb2JqZWN0LXBpZSI6Nzd9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKQogICwgY29yZSAgICAgID0gcmVxdWlyZSgnLi9fY29yZScpCiAgLCBoaWRlICAgICAgPSByZXF1aXJlKCcuL19oaWRlJykKICAsIHJlZGVmaW5lICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lJykKICAsIGN0eCAgICAgICA9IHJlcXVpcmUoJy4vX2N0eCcpCiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXsKICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRgogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HCiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlMKICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUAogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CCiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSB8fCAoZ2xvYmFsW25hbWVdID0ge30pIDogKGdsb2JhbFtuYW1lXSB8fCB7fSlbUFJPVE9UWVBFXQogICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KQogICAgLCBleHBQcm90byAgPSBleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KQogICAgLCBrZXksIG93biwgb3V0LCBleHA7CiAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7CiAgZm9yKGtleSBpbiBzb3VyY2UpewogICAgLy8gY29udGFpbnMgaW4gbmF0aXZlCiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkOwogICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWQKICAgIG91dCA9IChvd24gPyB0YXJnZXQgOiBzb3VyY2UpW2tleV07CiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dAogICAgZXhwID0gSVNfQklORCAmJiBvd24gPyBjdHgob3V0LCBnbG9iYWwpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7CiAgICAvLyBleHRlbmQgZ2xvYmFsCiAgICBpZih0YXJnZXQpcmVkZWZpbmUodGFyZ2V0LCBrZXksIG91dCwgdHlwZSAmICRleHBvcnQuVSk7CiAgICAvLyBleHBvcnQKICAgIGlmKGV4cG9ydHNba2V5XSAhPSBvdXQpaGlkZShleHBvcnRzLCBrZXksIGV4cCk7CiAgICBpZihJU19QUk9UTyAmJiBleHBQcm90b1trZXldICE9IG91dClleHBQcm90b1trZXldID0gb3V0OwogIH0KfTsKZ2xvYmFsLmNvcmUgPSBjb3JlOwovLyB0eXBlIGJpdG1hcAokZXhwb3J0LkYgPSAxOyAgIC8vIGZvcmNlZAokZXhwb3J0LkcgPSAyOyAgIC8vIGdsb2JhbAokZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpYwokZXhwb3J0LlAgPSA4OyAgIC8vIHByb3RvCiRleHBvcnQuQiA9IDE2OyAgLy8gYmluZAokZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXAKJGV4cG9ydC5VID0gNjQ7ICAvLyBzYWZlCiRleHBvcnQuUiA9IDEyODsgLy8gcmVhbCBwcm90byBtZXRob2QgZm9yIGBsaWJyYXJ5YCAKbW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0Owp9LHsiLi9fY29yZSI6MjMsIi4vX2N0eCI6MjUsIi4vX2dsb2JhbCI6MzgsIi4vX2hpZGUiOjQwLCIuL19yZWRlZmluZSI6ODd9XSwzMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBNQVRDSCA9IHJlcXVpcmUoJy4vX3drcycpKCdtYXRjaCcpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSl7CiAgdmFyIHJlID0gLy4vOwogIHRyeSB7CiAgICAnLy4vJ1tLRVldKHJlKTsKICB9IGNhdGNoKGUpewogICAgdHJ5IHsKICAgICAgcmVbTUFUQ0hdID0gZmFsc2U7CiAgICAgIHJldHVybiAhJy8uLydbS0VZXShyZSk7CiAgICB9IGNhdGNoKGYpeyAvKiBlbXB0eSAqLyB9CiAgfSByZXR1cm4gdHJ1ZTsKfTsKfSx7Ii4vX3drcyI6MTE3fV0sMzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpewogIHRyeSB7CiAgICByZXR1cm4gISFleGVjKCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB0cnVlOwogIH0KfTsKfSx7fV0sMzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBoaWRlICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKQogICwgcmVkZWZpbmUgPSByZXF1aXJlKCcuL19yZWRlZmluZScpCiAgLCBmYWlscyAgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJykKICAsIGRlZmluZWQgID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpCiAgLCB3a3MgICAgICA9IHJlcXVpcmUoJy4vX3drcycpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGxlbmd0aCwgZXhlYyl7CiAgdmFyIFNZTUJPTCAgID0gd2tzKEtFWSkKICAgICwgZm5zICAgICAgPSBleGVjKGRlZmluZWQsIFNZTUJPTCwgJydbS0VZXSkKICAgICwgc3RyZm4gICAgPSBmbnNbMF0KICAgICwgcnhmbiAgICAgPSBmbnNbMV07CiAgaWYoZmFpbHMoZnVuY3Rpb24oKXsKICAgIHZhciBPID0ge307CiAgICBPW1NZTUJPTF0gPSBmdW5jdGlvbigpeyByZXR1cm4gNzsgfTsKICAgIHJldHVybiAnJ1tLRVldKE8pICE9IDc7CiAgfSkpewogICAgcmVkZWZpbmUoU3RyaW5nLnByb3RvdHlwZSwgS0VZLCBzdHJmbik7CiAgICBoaWRlKFJlZ0V4cC5wcm90b3R5cGUsIFNZTUJPTCwgbGVuZ3RoID09IDIKICAgICAgLy8gMjEuMi41LjggUmVnRXhwLnByb3RvdHlwZVtAQHJlcGxhY2VdKHN0cmluZywgcmVwbGFjZVZhbHVlKQogICAgICAvLyAyMS4yLjUuMTEgUmVnRXhwLnByb3RvdHlwZVtAQHNwbGl0XShzdHJpbmcsIGxpbWl0KQogICAgICA/IGZ1bmN0aW9uKHN0cmluZywgYXJnKXsgcmV0dXJuIHJ4Zm4uY2FsbChzdHJpbmcsIHRoaXMsIGFyZyk7IH0KICAgICAgLy8gMjEuMi41LjYgUmVnRXhwLnByb3RvdHlwZVtAQG1hdGNoXShzdHJpbmcpCiAgICAgIC8vIDIxLjIuNS45IFJlZ0V4cC5wcm90b3R5cGVbQEBzZWFyY2hdKHN0cmluZykKICAgICAgOiBmdW5jdGlvbihzdHJpbmcpeyByZXR1cm4gcnhmbi5jYWxsKHN0cmluZywgdGhpcyk7IH0KICAgICk7CiAgfQp9Owp9LHsiLi9fZGVmaW5lZCI6MjcsIi4vX2ZhaWxzIjozNCwiLi9faGlkZSI6NDAsIi4vX3JlZGVmaW5lIjo4NywiLi9fd2tzIjoxMTd9XSwzNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gMjEuMi41LjMgZ2V0IFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3MKdmFyIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXsKICB2YXIgdGhhdCAgID0gYW5PYmplY3QodGhpcykKICAgICwgcmVzdWx0ID0gJyc7CiAgaWYodGhhdC5nbG9iYWwpICAgICByZXN1bHQgKz0gJ2cnOwogIGlmKHRoYXQuaWdub3JlQ2FzZSkgcmVzdWx0ICs9ICdpJzsKICBpZih0aGF0Lm11bHRpbGluZSkgIHJlc3VsdCArPSAnbSc7CiAgaWYodGhhdC51bmljb2RlKSAgICByZXN1bHQgKz0gJ3UnOwogIGlmKHRoYXQuc3RpY2t5KSAgICAgcmVzdWx0ICs9ICd5JzsKICByZXR1cm4gcmVzdWx0Owp9Owp9LHsiLi9fYW4tb2JqZWN0Ijo3fV0sMzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY3R4ICAgICAgICAgPSByZXF1aXJlKCcuL19jdHgnKQogICwgY2FsbCAgICAgICAgPSByZXF1aXJlKCcuL19pdGVyLWNhbGwnKQogICwgaXNBcnJheUl0ZXIgPSByZXF1aXJlKCcuL19pcy1hcnJheS1pdGVyJykKICAsIGFuT2JqZWN0ICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIHRvTGVuZ3RoICAgID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJykKICAsIGdldEl0ZXJGbiAgID0gcmVxdWlyZSgnLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QnKQogICwgQlJFQUsgICAgICAgPSB7fQogICwgUkVUVVJOICAgICAgPSB7fTsKdmFyIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhYmxlLCBlbnRyaWVzLCBmbiwgdGhhdCwgSVRFUkFUT1IpewogIHZhciBpdGVyRm4gPSBJVEVSQVRPUiA/IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyYWJsZTsgfSA6IGdldEl0ZXJGbihpdGVyYWJsZSkKICAgICwgZiAgICAgID0gY3R4KGZuLCB0aGF0LCBlbnRyaWVzID8gMiA6IDEpCiAgICAsIGluZGV4ICA9IDAKICAgICwgbGVuZ3RoLCBzdGVwLCBpdGVyYXRvciwgcmVzdWx0OwogIGlmKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXRlcmFibGUgKyAnIGlzIG5vdCBpdGVyYWJsZSEnKTsKICAvLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3IKICBpZihpc0FycmF5SXRlcihpdGVyRm4pKWZvcihsZW5ndGggPSB0b0xlbmd0aChpdGVyYWJsZS5sZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKyl7CiAgICByZXN1bHQgPSBlbnRyaWVzID8gZihhbk9iamVjdChzdGVwID0gaXRlcmFibGVbaW5kZXhdKVswXSwgc3RlcFsxXSkgOiBmKGl0ZXJhYmxlW2luZGV4XSk7CiAgICBpZihyZXN1bHQgPT09IEJSRUFLIHx8IHJlc3VsdCA9PT0gUkVUVVJOKXJldHVybiByZXN1bHQ7CiAgfSBlbHNlIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKGl0ZXJhYmxlKTsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyApewogICAgcmVzdWx0ID0gY2FsbChpdGVyYXRvciwgZiwgc3RlcC52YWx1ZSwgZW50cmllcyk7CiAgICBpZihyZXN1bHQgPT09IEJSRUFLIHx8IHJlc3VsdCA9PT0gUkVUVVJOKXJldHVybiByZXN1bHQ7CiAgfQp9OwpleHBvcnRzLkJSRUFLICA9IEJSRUFLOwpleHBvcnRzLlJFVFVSTiA9IFJFVFVSTjsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fY3R4IjoyNSwiLi9faXMtYXJyYXktaXRlciI6NDYsIi4vX2l0ZXItY2FsbCI6NTEsIi4vX3RvLWxlbmd0aCI6MTA4LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6MTE4fV0sMzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOAp2YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGgKICA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZiA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7CmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmCn0se31dLDM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIGtleSl7CiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7Cn07Cn0se31dLDQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGRQICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKQogICwgY3JlYXRlRGVzYyA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwp9IDogZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICBvYmplY3Rba2V5XSA9IHZhbHVlOwogIHJldHVybiBvYmplY3Q7Cn07Cn0seyIuL19kZXNjcmlwdG9ycyI6MjgsIi4vX29iamVjdC1kcCI6NjcsIi4vX3Byb3BlcnR5LWRlc2MiOjg1fV0sNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLmRvY3VtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKfSx7Ii4vX2dsb2JhbCI6Mzh9XSw0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXsKICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVpcmUoJy4vX2RvbS1jcmVhdGUnKSgnZGl2JyksICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7Cn0pOwp9LHsiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19kb20tY3JlYXRlIjoyOSwiLi9fZmFpbHMiOjM0fV0sNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaXNPYmplY3QgICAgICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKQogICwgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuL19zZXQtcHJvdG8nKS5zZXQ7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGhhdCwgdGFyZ2V0LCBDKXsKICB2YXIgUCwgUyA9IHRhcmdldC5jb25zdHJ1Y3RvcjsKICBpZihTICE9PSBDICYmIHR5cGVvZiBTID09ICdmdW5jdGlvbicgJiYgKFAgPSBTLnByb3RvdHlwZSkgIT09IEMucHJvdG90eXBlICYmIGlzT2JqZWN0KFApICYmIHNldFByb3RvdHlwZU9mKXsKICAgIHNldFByb3RvdHlwZU9mKHRoYXQsIFApOwogIH0gcmV0dXJuIHRoYXQ7Cn07Cn0seyIuL19pcy1vYmplY3QiOjQ5LCIuL19zZXQtcHJvdG8iOjkwfV0sNDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBmYXN0IGFwcGx5LCBodHRwOi8vanNwZXJmLmxua2l0LmNvbS9mYXN0LWFwcGx5LzUKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgYXJncywgdGhhdCl7CiAgdmFyIHVuID0gdGhhdCA9PT0gdW5kZWZpbmVkOwogIHN3aXRjaChhcmdzLmxlbmd0aCl7CiAgICBjYXNlIDA6IHJldHVybiB1biA/IGZuKCkKICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0KTsKICAgIGNhc2UgMTogcmV0dXJuIHVuID8gZm4oYXJnc1swXSkKICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdKTsKICAgIGNhc2UgMjogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSkKICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdKTsKICAgIGNhc2UgMzogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSkKICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsKICAgIGNhc2UgNDogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSkKICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKTsKICB9IHJldHVybiAgICAgICAgICAgICAgZm4uYXBwbHkodGhhdCwgYXJncyk7Cn07Cn0se31dLDQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3MKdmFyIGNvZiA9IHJlcXVpcmUoJy4vX2NvZicpOwptb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpewogIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTsKfTsKfSx7Ii4vX2NvZiI6MTh9XSw0NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3IKdmFyIEl0ZXJhdG9ycyAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKQogICwgSVRFUkFUT1IgICA9IHJlcXVpcmUoJy4vX3drcycpKCdpdGVyYXRvcicpCiAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTsKfTsKfSx7Ii4vX2l0ZXJhdG9ycyI6NTYsIi4vX3drcyI6MTE3fV0sNDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KQp2YXIgY29mID0gcmVxdWlyZSgnLi9fY29mJyk7Cm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZyl7CiAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7Cn07Cn0seyIuL19jb2YiOjE4fV0sNDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMC4xLjIuMyBOdW1iZXIuaXNJbnRlZ2VyKG51bWJlcikKdmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIGZsb29yICAgID0gTWF0aC5mbG9vcjsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0ludGVnZXIoaXQpewogIHJldHVybiAhaXNPYmplY3QoaXQpICYmIGlzRmluaXRlKGl0KSAmJiBmbG9vcihpdCkgPT09IGl0Owp9Owp9LHsiLi9faXMtb2JqZWN0Ijo0OX1dLDQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJzsKfTsKfSx7fV0sNTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyA3LjIuOCBJc1JlZ0V4cChhcmd1bWVudCkKdmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIGNvZiAgICAgID0gcmVxdWlyZSgnLi9fY29mJykKICAsIE1BVENIICAgID0gcmVxdWlyZSgnLi9fd2tzJykoJ21hdGNoJyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHZhciBpc1JlZ0V4cDsKICByZXR1cm4gaXNPYmplY3QoaXQpICYmICgoaXNSZWdFeHAgPSBpdFtNQVRDSF0pICE9PSB1bmRlZmluZWQgPyAhIWlzUmVnRXhwIDogY29mKGl0KSA9PSAnUmVnRXhwJyk7Cn07Cn0seyIuL19jb2YiOjE4LCIuL19pcy1vYmplY3QiOjQ5LCIuL193a3MiOjExN31dLDUxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvcgp2YXIgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYXRvciwgZm4sIHZhbHVlLCBlbnRyaWVzKXsKICB0cnkgewogICAgcmV0dXJuIGVudHJpZXMgPyBmbihhbk9iamVjdCh2YWx1ZSlbMF0sIHZhbHVlWzFdKSA6IGZuKHZhbHVlKTsKICAvLyA3LjQuNiBJdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCBjb21wbGV0aW9uKQogIH0gY2F0Y2goZSl7CiAgICB2YXIgcmV0ID0gaXRlcmF0b3JbJ3JldHVybiddOwogICAgaWYocmV0ICE9PSB1bmRlZmluZWQpYW5PYmplY3QocmV0LmNhbGwoaXRlcmF0b3IpKTsKICAgIHRocm93IGU7CiAgfQp9Owp9LHsiLi9fYW4tb2JqZWN0Ijo3fV0sNTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBjcmVhdGUgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKQogICwgZGVzY3JpcHRvciAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJykKICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKQogICwgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTsKCi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpCnJlcXVpcmUoJy4vX2hpZGUnKShJdGVyYXRvclByb3RvdHlwZSwgcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJyksIGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9KTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpewogIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSwge25leHQ6IGRlc2NyaXB0b3IoMSwgbmV4dCl9KTsKICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTsKfTsKfSx7Ii4vX2hpZGUiOjQwLCIuL19vYmplY3QtY3JlYXRlIjo2NiwiLi9fcHJvcGVydHktZGVzYyI6ODUsIi4vX3NldC10by1zdHJpbmctdGFnIjo5MiwiLi9fd2tzIjoxMTd9XSw1MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIExJQlJBUlkgICAgICAgID0gcmVxdWlyZSgnLi9fbGlicmFyeScpCiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCByZWRlZmluZSAgICAgICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lJykKICAsIGhpZGUgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGlkZScpCiAgLCBoYXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpCiAgLCBJdGVyYXRvcnMgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXJhdG9ycycpCiAgLCAkaXRlckNyZWF0ZSAgICA9IHJlcXVpcmUoJy4vX2l0ZXItY3JlYXRlJykKICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKQogICwgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuL19vYmplY3QtZ3BvJykKICAsIElURVJBVE9SICAgICAgID0gcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJykKICAsIEJVR0dZICAgICAgICAgID0gIShbXS5rZXlzICYmICduZXh0JyBpbiBbXS5rZXlzKCkpIC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGAKICAsIEZGX0lURVJBVE9SICAgID0gJ0BAaXRlcmF0b3InCiAgLCBLRVlTICAgICAgICAgICA9ICdrZXlzJwogICwgVkFMVUVTICAgICAgICAgPSAndmFsdWVzJzsKCnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEJhc2UsIE5BTUUsIENvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRCl7CiAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpOwogIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihraW5kKXsKICAgIGlmKCFCVUdHWSAmJiBraW5kIGluIHByb3RvKXJldHVybiBwcm90b1traW5kXTsKICAgIHN3aXRjaChraW5kKXsKICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogICAgICBjYXNlIFZBTFVFUzogcmV0dXJuIGZ1bmN0aW9uIHZhbHVlcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogIH07CiAgdmFyIFRBRyAgICAgICAgPSBOQU1FICsgJyBJdGVyYXRvcicKICAgICwgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTCiAgICAsIFZBTFVFU19CVUcgPSBmYWxzZQogICAgLCBwcm90byAgICAgID0gQmFzZS5wcm90b3R5cGUKICAgICwgJG5hdGl2ZSAgICA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXQogICAgLCAkZGVmYXVsdCAgID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVCkKICAgICwgJGVudHJpZXMgICA9IERFRkFVTFQgPyAhREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKCdlbnRyaWVzJykgOiB1bmRlZmluZWQKICAgICwgJGFueU5hdGl2ZSA9IE5BTUUgPT0gJ0FycmF5JyA/IHByb3RvLmVudHJpZXMgfHwgJG5hdGl2ZSA6ICRuYXRpdmUKICAgICwgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTsKICAvLyBGaXggbmF0aXZlCiAgaWYoJGFueU5hdGl2ZSl7CiAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSkpOwogICAgaWYoSXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUpewogICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzCiAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpOwogICAgICAvLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKICAgICAgaWYoIUxJQlJBUlkgJiYgIWhhcyhJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IpKWhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTsKICAgIH0KICB9CiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgogIGlmKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUyl7CiAgICBWQUxVRVNfQlVHID0gdHJ1ZTsKICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07CiAgfQogIC8vIERlZmluZSBpdGVyYXRvcgogIGlmKCghTElCUkFSWSB8fCBGT1JDRUQpICYmIChCVUdHWSB8fCBWQUxVRVNfQlVHIHx8ICFwcm90b1tJVEVSQVRPUl0pKXsKICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7CiAgfQogIC8vIFBsdWcgZm9yIGxpYnJhcnkKICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDsKICBJdGVyYXRvcnNbVEFHXSAgPSByZXR1cm5UaGlzOwogIGlmKERFRkFVTFQpewogICAgbWV0aG9kcyA9IHsKICAgICAgdmFsdWVzOiAgREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKFZBTFVFUyksCiAgICAgIGtleXM6ICAgIElTX1NFVCAgICAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSwKICAgICAgZW50cmllczogJGVudHJpZXMKICAgIH07CiAgICBpZihGT1JDRUQpZm9yKGtleSBpbiBtZXRob2RzKXsKICAgICAgaWYoIShrZXkgaW4gcHJvdG8pKXJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7CiAgICB9IGVsc2UgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoQlVHR1kgfHwgVkFMVUVTX0JVRyksIE5BTUUsIG1ldGhvZHMpOwogIH0KICByZXR1cm4gbWV0aG9kczsKfTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX2hhcyI6MzksIi4vX2hpZGUiOjQwLCIuL19pdGVyLWNyZWF0ZSI6NTIsIi4vX2l0ZXJhdG9ycyI6NTYsIi4vX2xpYnJhcnkiOjU4LCIuL19vYmplY3QtZ3BvIjo3NCwiLi9fcmVkZWZpbmUiOjg3LCIuL19zZXQtdG8tc3RyaW5nLXRhZyI6OTIsIi4vX3drcyI6MTE3fV0sNTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgSVRFUkFUT1IgICAgID0gcmVxdWlyZSgnLi9fd2tzJykoJ2l0ZXJhdG9yJykKICAsIFNBRkVfQ0xPU0lORyA9IGZhbHNlOwoKdHJ5IHsKICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7CiAgcml0ZXJbJ3JldHVybiddID0gZnVuY3Rpb24oKXsgU0FGRV9DTE9TSU5HID0gdHJ1ZTsgfTsKICBBcnJheS5mcm9tKHJpdGVyLCBmdW5jdGlvbigpeyB0aHJvdyAyOyB9KTsKfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjLCBza2lwQ2xvc2luZyl7CiAgaWYoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpcmV0dXJuIGZhbHNlOwogIHZhciBzYWZlID0gZmFsc2U7CiAgdHJ5IHsKICAgIHZhciBhcnIgID0gWzddCiAgICAgICwgaXRlciA9IGFycltJVEVSQVRPUl0oKTsKICAgIGl0ZXIubmV4dCA9IGZ1bmN0aW9uKCl7IHJldHVybiB7ZG9uZTogc2FmZSA9IHRydWV9OyB9OwogICAgYXJyW0lURVJBVE9SXSA9IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyOyB9OwogICAgZXhlYyhhcnIpOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICByZXR1cm4gc2FmZTsKfTsKfSx7Ii4vX3drcyI6MTE3fV0sNTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXsKICByZXR1cm4ge3ZhbHVlOiB2YWx1ZSwgZG9uZTogISFkb25lfTsKfTsKfSx7fV0sNTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHt9Owp9LHt9XSw1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBnZXRLZXlzICAgPSByZXF1aXJlKCcuL19vYmplY3Qta2V5cycpCiAgLCB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0Jyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBlbCl7CiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpCiAgICAsIGtleXMgICA9IGdldEtleXMoTykKICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGgKICAgICwgaW5kZXggID0gMAogICAgLCBrZXk7CiAgd2hpbGUobGVuZ3RoID4gaW5kZXgpaWYoT1trZXkgPSBrZXlzW2luZGV4KytdXSA9PT0gZWwpcmV0dXJuIGtleTsKfTsKfSx7Ii4vX29iamVjdC1rZXlzIjo3NiwiLi9fdG8taW9iamVjdCI6MTA3fV0sNTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZhbHNlOwp9LHt9XSw1OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi4xNCBNYXRoLmV4cG0xKHgpCnZhciAkZXhwbTEgPSBNYXRoLmV4cG0xOwptb2R1bGUuZXhwb3J0cyA9ICghJGV4cG0xCiAgLy8gT2xkIEZGIGJ1ZwogIHx8ICRleHBtMSgxMCkgPiAyMjAyNS40NjU3OTQ4MDY3MTkgfHwgJGV4cG0xKDEwKSA8IDIyMDI1LjQ2NTc5NDgwNjcxNjUxNjgKICAvLyBUb3IgQnJvd3NlciBidWcKICB8fCAkZXhwbTEoLTJlLTE3KSAhPSAtMmUtMTcKKSA/IGZ1bmN0aW9uIGV4cG0xKHgpewogIHJldHVybiAoeCA9ICt4KSA9PSAwID8geCA6IHggPiAtMWUtNiAmJiB4IDwgMWUtNiA/IHggKyB4ICogeCAvIDIgOiBNYXRoLmV4cCh4KSAtIDE7Cn0gOiAkZXhwbTE7Cn0se31dLDYwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjAuMi4yLjIwIE1hdGgubG9nMXAoeCkKbW9kdWxlLmV4cG9ydHMgPSBNYXRoLmxvZzFwIHx8IGZ1bmN0aW9uIGxvZzFwKHgpewogIHJldHVybiAoeCA9ICt4KSA+IC0xZS04ICYmIHggPCAxZS04ID8geCAtIHggKiB4IC8gMiA6IE1hdGgubG9nKDEgKyB4KTsKfTsKfSx7fV0sNjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMC4yLjIuMjggTWF0aC5zaWduKHgpCm1vZHVsZS5leHBvcnRzID0gTWF0aC5zaWduIHx8IGZ1bmN0aW9uIHNpZ24oeCl7CiAgcmV0dXJuICh4ID0gK3gpID09IDAgfHwgeCAhPSB4ID8geCA6IHggPCAwID8gLTEgOiAxOwp9Owp9LHt9XSw2MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBNRVRBICAgICA9IHJlcXVpcmUoJy4vX3VpZCcpKCdtZXRhJykKICAsIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIGhhcyAgICAgID0gcmVxdWlyZSgnLi9faGFzJykKICAsIHNldERlc2MgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZgogICwgaWQgICAgICAgPSAwOwp2YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbigpewogIHJldHVybiB0cnVlOwp9Owp2YXIgRlJFRVpFID0gIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXsKICByZXR1cm4gaXNFeHRlbnNpYmxlKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpOwp9KTsKdmFyIHNldE1ldGEgPSBmdW5jdGlvbihpdCl7CiAgc2V0RGVzYyhpdCwgTUVUQSwge3ZhbHVlOiB7CiAgICBpOiAnTycgKyArK2lkLCAvLyBvYmplY3QgSUQKICAgIHc6IHt9ICAgICAgICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgSURzCiAgfX0pOwp9Owp2YXIgZmFzdEtleSA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpewogIC8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXgKICBpZighaXNPYmplY3QoaXQpKXJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCcgPyBpdCA6ICh0eXBlb2YgaXQgPT0gJ3N0cmluZycgPyAnUycgOiAnUCcpICsgaXQ7CiAgaWYoIWhhcyhpdCwgTUVUQSkpewogICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiAnRic7CiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQogICAgaWYoIWNyZWF0ZSlyZXR1cm4gJ0UnOwogICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKICAgIHNldE1ldGEoaXQpOwogIC8vIHJldHVybiBvYmplY3QgSUQKICB9IHJldHVybiBpdFtNRVRBXS5pOwp9Owp2YXIgZ2V0V2VhayA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpewogIGlmKCFoYXMoaXQsIE1FVEEpKXsKICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gdHJ1ZTsKICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCiAgICBpZighY3JlYXRlKXJldHVybiBmYWxzZTsKICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCiAgICBzZXRNZXRhKGl0KTsKICAvLyByZXR1cm4gaGFzaCB3ZWFrIGNvbGxlY3Rpb25zIElEcwogIH0gcmV0dXJuIGl0W01FVEFdLnc7Cn07Ci8vIGFkZCBtZXRhZGF0YSBvbiBmcmVlemUtZmFtaWx5IG1ldGhvZHMgY2FsbGluZwp2YXIgb25GcmVlemUgPSBmdW5jdGlvbihpdCl7CiAgaWYoRlJFRVpFICYmIG1ldGEuTkVFRCAmJiBpc0V4dGVuc2libGUoaXQpICYmICFoYXMoaXQsIE1FVEEpKXNldE1ldGEoaXQpOwogIHJldHVybiBpdDsKfTsKdmFyIG1ldGEgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICBLRVk6ICAgICAgTUVUQSwKICBORUVEOiAgICAgZmFsc2UsCiAgZmFzdEtleTogIGZhc3RLZXksCiAgZ2V0V2VhazogIGdldFdlYWssCiAgb25GcmVlemU6IG9uRnJlZXplCn07Cn0seyIuL19mYWlscyI6MzQsIi4vX2hhcyI6MzksIi4vX2lzLW9iamVjdCI6NDksIi4vX29iamVjdC1kcCI6NjcsIi4vX3VpZCI6MTE0fV0sNjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgTWFwICAgICA9IHJlcXVpcmUoJy4vZXM2Lm1hcCcpCiAgLCAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIHNoYXJlZCAgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgnbWV0YWRhdGEnKQogICwgc3RvcmUgICA9IHNoYXJlZC5zdG9yZSB8fCAoc2hhcmVkLnN0b3JlID0gbmV3IChyZXF1aXJlKCcuL2VzNi53ZWFrLW1hcCcpKSk7Cgp2YXIgZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcCA9IGZ1bmN0aW9uKHRhcmdldCwgdGFyZ2V0S2V5LCBjcmVhdGUpewogIHZhciB0YXJnZXRNZXRhZGF0YSA9IHN0b3JlLmdldCh0YXJnZXQpOwogIGlmKCF0YXJnZXRNZXRhZGF0YSl7CiAgICBpZighY3JlYXRlKXJldHVybiB1bmRlZmluZWQ7CiAgICBzdG9yZS5zZXQodGFyZ2V0LCB0YXJnZXRNZXRhZGF0YSA9IG5ldyBNYXApOwogIH0KICB2YXIga2V5TWV0YWRhdGEgPSB0YXJnZXRNZXRhZGF0YS5nZXQodGFyZ2V0S2V5KTsKICBpZigha2V5TWV0YWRhdGEpewogICAgaWYoIWNyZWF0ZSlyZXR1cm4gdW5kZWZpbmVkOwogICAgdGFyZ2V0TWV0YWRhdGEuc2V0KHRhcmdldEtleSwga2V5TWV0YWRhdGEgPSBuZXcgTWFwKTsKICB9IHJldHVybiBrZXlNZXRhZGF0YTsKfTsKdmFyIG9yZGluYXJ5SGFzT3duTWV0YWRhdGEgPSBmdW5jdGlvbihNZXRhZGF0YUtleSwgTywgUCl7CiAgdmFyIG1ldGFkYXRhTWFwID0gZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCBmYWxzZSk7CiAgcmV0dXJuIG1ldGFkYXRhTWFwID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IG1ldGFkYXRhTWFwLmhhcyhNZXRhZGF0YUtleSk7Cn07CnZhciBvcmRpbmFyeUdldE93bk1ldGFkYXRhID0gZnVuY3Rpb24oTWV0YWRhdGFLZXksIE8sIFApewogIHZhciBtZXRhZGF0YU1hcCA9IGdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgZmFsc2UpOwogIHJldHVybiBtZXRhZGF0YU1hcCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogbWV0YWRhdGFNYXAuZ2V0KE1ldGFkYXRhS2V5KTsKfTsKdmFyIG9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEgPSBmdW5jdGlvbihNZXRhZGF0YUtleSwgTWV0YWRhdGFWYWx1ZSwgTywgUCl7CiAgZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCB0cnVlKS5zZXQoTWV0YWRhdGFLZXksIE1ldGFkYXRhVmFsdWUpOwp9Owp2YXIgb3JkaW5hcnlPd25NZXRhZGF0YUtleXMgPSBmdW5jdGlvbih0YXJnZXQsIHRhcmdldEtleSl7CiAgdmFyIG1ldGFkYXRhTWFwID0gZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0YXJnZXQsIHRhcmdldEtleSwgZmFsc2UpCiAgICAsIGtleXMgICAgICAgID0gW107CiAgaWYobWV0YWRhdGFNYXApbWV0YWRhdGFNYXAuZm9yRWFjaChmdW5jdGlvbihfLCBrZXkpeyBrZXlzLnB1c2goa2V5KTsgfSk7CiAgcmV0dXJuIGtleXM7Cn07CnZhciB0b01ldGFLZXkgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIGl0ID09ICdzeW1ib2wnID8gaXQgOiBTdHJpbmcoaXQpOwp9Owp2YXIgZXhwID0gZnVuY3Rpb24oTyl7CiAgJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0JywgTyk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBzdG9yZTogc3RvcmUsCiAgbWFwOiBnZXRPckNyZWF0ZU1ldGFkYXRhTWFwLAogIGhhczogb3JkaW5hcnlIYXNPd25NZXRhZGF0YSwKICBnZXQ6IG9yZGluYXJ5R2V0T3duTWV0YWRhdGEsCiAgc2V0OiBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhLAogIGtleXM6IG9yZGluYXJ5T3duTWV0YWRhdGFLZXlzLAogIGtleTogdG9NZXRhS2V5LAogIGV4cDogZXhwCn07Cn0seyIuL19leHBvcnQiOjMyLCIuL19zaGFyZWQiOjk0LCIuL2VzNi5tYXAiOjE1MCwiLi9lczYud2Vhay1tYXAiOjI1Nn1dLDY0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGdsb2JhbCAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpCiAgLCBtYWNyb3Rhc2sgPSByZXF1aXJlKCcuL190YXNrJykuc2V0CiAgLCBPYnNlcnZlciAgPSBnbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcgogICwgcHJvY2VzcyAgID0gZ2xvYmFsLnByb2Nlc3MKICAsIFByb21pc2UgICA9IGdsb2JhbC5Qcm9taXNlCiAgLCBpc05vZGUgICAgPSByZXF1aXJlKCcuL19jb2YnKShwcm9jZXNzKSA9PSAncHJvY2Vzcyc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7CiAgdmFyIGhlYWQsIGxhc3QsIG5vdGlmeTsKCiAgdmFyIGZsdXNoID0gZnVuY3Rpb24oKXsKICAgIHZhciBwYXJlbnQsIGZuOwogICAgaWYoaXNOb2RlICYmIChwYXJlbnQgPSBwcm9jZXNzLmRvbWFpbikpcGFyZW50LmV4aXQoKTsKICAgIHdoaWxlKGhlYWQpewogICAgICBmbiAgID0gaGVhZC5mbjsKICAgICAgaGVhZCA9IGhlYWQubmV4dDsKICAgICAgdHJ5IHsKICAgICAgICBmbigpOwogICAgICB9IGNhdGNoKGUpewogICAgICAgIGlmKGhlYWQpbm90aWZ5KCk7CiAgICAgICAgZWxzZSBsYXN0ID0gdW5kZWZpbmVkOwogICAgICAgIHRocm93IGU7CiAgICAgIH0KICAgIH0gbGFzdCA9IHVuZGVmaW5lZDsKICAgIGlmKHBhcmVudClwYXJlbnQuZW50ZXIoKTsKICB9OwoKICAvLyBOb2RlLmpzCiAgaWYoaXNOb2RlKXsKICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7CiAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOwogICAgfTsKICAvLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXIKICB9IGVsc2UgaWYoT2JzZXJ2ZXIpewogICAgdmFyIHRvZ2dsZSA9IHRydWUKICAgICAgLCBub2RlICAgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7CiAgICBuZXcgT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7CiAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZSA9ICF0b2dnbGU7CiAgICB9OwogIC8vIGVudmlyb25tZW50cyB3aXRoIG1heWJlIG5vbi1jb21wbGV0ZWx5IGNvcnJlY3QsIGJ1dCBleGlzdGVudCBQcm9taXNlCiAgfSBlbHNlIGlmKFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKXsKICAgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICBwcm9taXNlLnRoZW4oZmx1c2gpOwogICAgfTsKICAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOgogIC8vIC0gc2V0SW1tZWRpYXRlCiAgLy8gLSBNZXNzYWdlQ2hhbm5lbAogIC8vIC0gd2luZG93LnBvc3RNZXNzYWcKICAvLyAtIG9ucmVhZHlzdGF0ZWNoYW5nZQogIC8vIC0gc2V0VGltZW91dAogIH0gZWxzZSB7CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpCiAgICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCwgZmx1c2gpOwogICAgfTsKICB9CgogIHJldHVybiBmdW5jdGlvbihmbil7CiAgICB2YXIgdGFzayA9IHtmbjogZm4sIG5leHQ6IHVuZGVmaW5lZH07CiAgICBpZihsYXN0KWxhc3QubmV4dCA9IHRhc2s7CiAgICBpZighaGVhZCl7CiAgICAgIGhlYWQgPSB0YXNrOwogICAgICBub3RpZnkoKTsKICAgIH0gbGFzdCA9IHRhc2s7CiAgfTsKfTsKfSx7Ii4vX2NvZiI6MTgsIi4vX2dsb2JhbCI6MzgsIi4vX3Rhc2siOjEwNH1dLDY1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pCnZhciBnZXRLZXlzICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzJykKICAsIGdPUFMgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcHMnKQogICwgcElFICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtcGllJykKICAsIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JykKICAsIElPYmplY3QgID0gcmVxdWlyZSgnLi9faW9iamVjdCcpCiAgLCAkYXNzaWduICA9IE9iamVjdC5hc3NpZ247CgovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKbW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7CiAgdmFyIEEgPSB7fQogICAgLCBCID0ge30KICAgICwgUyA9IFN5bWJvbCgpCiAgICAsIEsgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3QnOwogIEFbU10gPSA3OwogIEsuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24oayl7IEJba10gPSBrOyB9KTsKICByZXR1cm4gJGFzc2lnbih7fSwgQSlbU10gIT0gNyB8fCBPYmplY3Qua2V5cygkYXNzaWduKHt9LCBCKSkuam9pbignJykgIT0gSzsKfSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgdmFyIFQgICAgID0gdG9PYmplY3QodGFyZ2V0KQogICAgLCBhTGVuICA9IGFyZ3VtZW50cy5sZW5ndGgKICAgICwgaW5kZXggPSAxCiAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmYKICAgICwgaXNFbnVtICAgICA9IHBJRS5mOwogIHdoaWxlKGFMZW4gPiBpbmRleCl7CiAgICB2YXIgUyAgICAgID0gSU9iamVjdChhcmd1bWVudHNbaW5kZXgrK10pCiAgICAgICwga2V5cyAgID0gZ2V0U3ltYm9scyA/IGdldEtleXMoUykuY29uY2F0KGdldFN5bWJvbHMoUykpIDogZ2V0S2V5cyhTKQogICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoCiAgICAgICwgaiAgICAgID0gMAogICAgICAsIGtleTsKICAgIHdoaWxlKGxlbmd0aCA+IGopaWYoaXNFbnVtLmNhbGwoUywga2V5ID0ga2V5c1tqKytdKSlUW2tleV0gPSBTW2tleV07CiAgfSByZXR1cm4gVDsKfSA6ICRhc3NpZ247Cn0seyIuL19mYWlscyI6MzQsIi4vX2lvYmplY3QiOjQ1LCIuL19vYmplY3QtZ29wcyI6NzMsIi4vX29iamVjdC1rZXlzIjo3NiwiLi9fb2JqZWN0LXBpZSI6NzcsIi4vX3RvLW9iamVjdCI6MTA5fV0sNjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKdmFyIGFuT2JqZWN0ICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIGRQcyAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwcycpCiAgLCBlbnVtQnVnS2V5cyA9IHJlcXVpcmUoJy4vX2VudW0tYnVnLWtleXMnKQogICwgSUVfUFJPVE8gICAgPSByZXF1aXJlKCcuL19zaGFyZWQta2V5JykoJ0lFX1BST1RPJykKICAsIEVtcHR5ICAgICAgID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfQogICwgUFJPVE9UWVBFICAgPSAncHJvdG90eXBlJzsKCi8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBpZnJhbWUgT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGUKdmFyIGNyZWF0ZURpY3QgPSBmdW5jdGlvbigpewogIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnCiAgdmFyIGlmcmFtZSA9IHJlcXVpcmUoJy4vX2RvbS1jcmVhdGUnKSgnaWZyYW1lJykKICAgICwgaSAgICAgID0gZW51bUJ1Z0tleXMubGVuZ3RoCiAgICAsIGd0ICAgICA9ICc+JwogICAgLCBpZnJhbWVEb2N1bWVudDsKICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICByZXF1aXJlKCcuL19odG1sJykuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsCiAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsKICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7CiAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7CiAgaWZyYW1lRG9jdW1lbnQud3JpdGUoJzxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8L3NjcmlwdCcgKyBndCk7CiAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTsKICBjcmVhdGVEaWN0ID0gaWZyYW1lRG9jdW1lbnQuRjsKICB3aGlsZShpLS0pZGVsZXRlIGNyZWF0ZURpY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tpXV07CiAgcmV0dXJuIGNyZWF0ZURpY3QoKTsKfTsKCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcyl7CiAgdmFyIHJlc3VsdDsKICBpZihPICE9PSBudWxsKXsKICAgIEVtcHR5W1BST1RPVFlQRV0gPSBhbk9iamVjdChPKTsKICAgIHJlc3VsdCA9IG5ldyBFbXB0eTsKICAgIEVtcHR5W1BST1RPVFlQRV0gPSBudWxsOwogICAgLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwKICAgIHJlc3VsdFtJRV9QUk9UT10gPSBPOwogIH0gZWxzZSByZXN1bHQgPSBjcmVhdGVEaWN0KCk7CiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpOwp9Owp9LHsiLi9fYW4tb2JqZWN0Ijo3LCIuL19kb20tY3JlYXRlIjoyOSwiLi9fZW51bS1idWcta2V5cyI6MzAsIi4vX2h0bWwiOjQxLCIuL19vYmplY3QtZHBzIjo2OCwiLi9fc2hhcmVkLWtleSI6OTN9XSw2NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCBJRThfRE9NX0RFRklORSA9IHJlcXVpcmUoJy4vX2llOC1kb20tZGVmaW5lJykKICAsIHRvUHJpbWl0aXZlICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJykKICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5OwoKZXhwb3J0cy5mID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpewogIGFuT2JqZWN0KE8pOwogIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsKICBhbk9iamVjdChBdHRyaWJ1dGVzKTsKICBpZihJRThfRE9NX0RFRklORSl0cnkgewogICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsKICBpZigndmFsdWUnIGluIEF0dHJpYnV0ZXMpT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7CiAgcmV0dXJuIE87Cn07Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2Rlc2NyaXB0b3JzIjoyOCwiLi9faWU4LWRvbS1kZWZpbmUiOjQyLCIuL190by1wcmltaXRpdmUiOjExMH1dLDY4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGRQICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykKICAsIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIGdldEtleXMgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKTsKCm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzIDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKXsKICBhbk9iamVjdChPKTsKICB2YXIga2V5cyAgID0gZ2V0S2V5cyhQcm9wZXJ0aWVzKQogICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aAogICAgLCBpID0gMAogICAgLCBQOwogIHdoaWxlKGxlbmd0aCA+IGkpZFAuZihPLCBQID0ga2V5c1tpKytdLCBQcm9wZXJ0aWVzW1BdKTsKICByZXR1cm4gTzsKfTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19vYmplY3QtZHAiOjY3LCIuL19vYmplY3Qta2V5cyI6NzZ9XSw2OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEZvcmNlZCByZXBsYWNlbWVudCBwcm90b3R5cGUgYWNjZXNzb3JzIG1ldGhvZHMKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19saWJyYXJ5Jyl8fCAhcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpewogIHZhciBLID0gTWF0aC5yYW5kb20oKTsKICAvLyBJbiBGRiB0aHJvd3Mgb25seSBkZWZpbmUgbWV0aG9kcwogIF9fZGVmaW5lU2V0dGVyX18uY2FsbChudWxsLCBLLCBmdW5jdGlvbigpeyAvKiBlbXB0eSAqL30pOwogIGRlbGV0ZSByZXF1aXJlKCcuL19nbG9iYWwnKVtLXTsKfSk7Cn0seyIuL19mYWlscyI6MzQsIi4vX2dsb2JhbCI6MzgsIi4vX2xpYnJhcnkiOjU4fV0sNzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgcElFICAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtcGllJykKICAsIGNyZWF0ZURlc2MgICAgID0gcmVxdWlyZSgnLi9fcHJvcGVydHktZGVzYycpCiAgLCB0b0lPYmplY3QgICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKQogICwgdG9QcmltaXRpdmUgICAgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKQogICwgaGFzICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKQogICwgSUU4X0RPTV9ERUZJTkUgPSByZXF1aXJlKCcuL19pZTgtZG9tLWRlZmluZScpCiAgLCBnT1BEICAgICAgICAgICA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CgpleHBvcnRzLmYgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpID8gZ09QRCA6IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKXsKICBPID0gdG9JT2JqZWN0KE8pOwogIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsKICBpZihJRThfRE9NX0RFRklORSl0cnkgewogICAgcmV0dXJuIGdPUEQoTywgUCk7CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQogIGlmKGhhcyhPLCBQKSlyZXR1cm4gY3JlYXRlRGVzYyghcElFLmYuY2FsbChPLCBQKSwgT1tQXSk7Cn07Cn0seyIuL19kZXNjcmlwdG9ycyI6MjgsIi4vX2hhcyI6MzksIi4vX2llOC1kb20tZGVmaW5lIjo0MiwiLi9fb2JqZWN0LXBpZSI6NzcsIi4vX3Byb3BlcnR5LWRlc2MiOjg1LCIuL190by1pb2JqZWN0IjoxMDcsIi4vX3RvLXByaW1pdGl2ZSI6MTEwfV0sNzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93CnZhciB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JykKICAsIGdPUE4gICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BuJykuZgogICwgdG9TdHJpbmcgID0ge30udG9TdHJpbmc7Cgp2YXIgd2luZG93TmFtZXMgPSB0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcwogID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KSA6IFtdOwoKdmFyIGdldFdpbmRvd05hbWVzID0gZnVuY3Rpb24oaXQpewogIHRyeSB7CiAgICByZXR1cm4gZ09QTihpdCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpOwogIH0KfTsKCm1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXsKICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpOwp9OwoKfSx7Ii4vX29iamVjdC1nb3BuIjo3MiwiLi9fdG8taW9iamVjdCI6MTA3fV0sNzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCnZhciAka2V5cyAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMtaW50ZXJuYWwnKQogICwgaGlkZGVuS2V5cyA9IHJlcXVpcmUoJy4vX2VudW0tYnVnLWtleXMnKS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTsKCmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTyl7CiAgcmV0dXJuICRrZXlzKE8sIGhpZGRlbktleXMpOwp9Owp9LHsiLi9fZW51bS1idWcta2V5cyI6MzAsIi4vX29iamVjdC1rZXlzLWludGVybmFsIjo3NX1dLDczOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczsKfSx7fV0sNzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgaGFzICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKQogICwgdG9PYmplY3QgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgSUVfUFJPVE8gICAgPSByZXF1aXJlKCcuL19zaGFyZWQta2V5JykoJ0lFX1BST1RPJykKICAsIE9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTsKCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKE8pewogIE8gPSB0b09iamVjdChPKTsKICBpZihoYXMoTywgSUVfUFJPVE8pKXJldHVybiBPW0lFX1BST1RPXTsKICBpZih0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKXsKICAgIHJldHVybiBPLmNvbnN0cnVjdG9yLnByb3RvdHlwZTsKICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsOwp9Owp9LHsiLi9faGFzIjozOSwiLi9fc2hhcmVkLWtleSI6OTMsIi4vX3RvLW9iamVjdCI6MTA5fV0sNzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaGFzICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJykKICAsIHRvSU9iamVjdCAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKQogICwgYXJyYXlJbmRleE9mID0gcmVxdWlyZSgnLi9fYXJyYXktaW5jbHVkZXMnKShmYWxzZSkKICAsIElFX1BST1RPICAgICA9IHJlcXVpcmUoJy4vX3NoYXJlZC1rZXknKSgnSUVfUFJPVE8nKTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBuYW1lcyl7CiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpCiAgICAsIGkgICAgICA9IDAKICAgICwgcmVzdWx0ID0gW10KICAgICwga2V5OwogIGZvcihrZXkgaW4gTylpZihrZXkgIT0gSUVfUFJPVE8paGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTsKICAvLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzCiAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSlpZihoYXMoTywga2V5ID0gbmFtZXNbaSsrXSkpewogICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfTsKfSx7Ii4vX2FycmF5LWluY2x1ZGVzIjoxMSwiLi9faGFzIjozOSwiLi9fc2hhcmVkLWtleSI6OTMsIi4vX3RvLWlvYmplY3QiOjEwN31dLDc2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pCnZhciAka2V5cyAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzLWludGVybmFsJykKICAsIGVudW1CdWdLZXlzID0gcmVxdWlyZSgnLi9fZW51bS1idWcta2V5cycpOwoKbW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pewogIHJldHVybiAka2V5cyhPLCBlbnVtQnVnS2V5cyk7Cn07Cn0seyIuL19lbnVtLWJ1Zy1rZXlzIjozMCwiLi9fb2JqZWN0LWtleXMtaW50ZXJuYWwiOjc1fV0sNzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLmYgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKfSx7fV0sNzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXMKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgY29yZSAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKQogICwgZmFpbHMgICA9IHJlcXVpcmUoJy4vX2ZhaWxzJyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBleGVjKXsKICB2YXIgZm4gID0gKGNvcmUuT2JqZWN0IHx8IHt9KVtLRVldIHx8IE9iamVjdFtLRVldCiAgICAsIGV4cCA9IHt9OwogIGV4cFtLRVldID0gZXhlYyhmbik7CiAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBmYWlscyhmdW5jdGlvbigpeyBmbigxKTsgfSksICdPYmplY3QnLCBleHApOwp9Owp9LHsiLi9fY29yZSI6MjMsIi4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzIjozNH1dLDc5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGdldEtleXMgICA9IHJlcXVpcmUoJy4vX29iamVjdC1rZXlzJykKICAsIHRvSU9iamVjdCA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKQogICwgaXNFbnVtICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpLmY7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXNFbnRyaWVzKXsKICByZXR1cm4gZnVuY3Rpb24oaXQpewogICAgdmFyIE8gICAgICA9IHRvSU9iamVjdChpdCkKICAgICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pCiAgICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGgKICAgICAgLCBpICAgICAgPSAwCiAgICAgICwgcmVzdWx0ID0gW10KICAgICAgLCBrZXk7CiAgICB3aGlsZShsZW5ndGggPiBpKWlmKGlzRW51bS5jYWxsKE8sIGtleSA9IGtleXNbaSsrXSkpewogICAgICByZXN1bHQucHVzaChpc0VudHJpZXMgPyBba2V5LCBPW2tleV1dIDogT1trZXldKTsKICAgIH0gcmV0dXJuIHJlc3VsdDsKICB9Owp9Owp9LHsiLi9fb2JqZWN0LWtleXMiOjc2LCIuL19vYmplY3QtcGllIjo3NywiLi9fdG8taW9iamVjdCI6MTA3fV0sODA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzCnZhciBnT1BOICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BuJykKICAsIGdPUFMgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcHMnKQogICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKQogICwgUmVmbGVjdCAgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5SZWZsZWN0Owptb2R1bGUuZXhwb3J0cyA9IFJlZmxlY3QgJiYgUmVmbGVjdC5vd25LZXlzIHx8IGZ1bmN0aW9uIG93bktleXMoaXQpewogIHZhciBrZXlzICAgICAgID0gZ09QTi5mKGFuT2JqZWN0KGl0KSkKICAgICwgZ2V0U3ltYm9scyA9IGdPUFMuZjsKICByZXR1cm4gZ2V0U3ltYm9scyA/IGtleXMuY29uY2F0KGdldFN5bWJvbHMoaXQpKSA6IGtleXM7Cn07Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2dsb2JhbCI6MzgsIi4vX29iamVjdC1nb3BuIjo3MiwiLi9fb2JqZWN0LWdvcHMiOjczfV0sODE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgJHBhcnNlRmxvYXQgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5wYXJzZUZsb2F0CiAgLCAkdHJpbSAgICAgICA9IHJlcXVpcmUoJy4vX3N0cmluZy10cmltJykudHJpbTsKCm1vZHVsZS5leHBvcnRzID0gMSAvICRwYXJzZUZsb2F0KHJlcXVpcmUoJy4vX3N0cmluZy13cycpICsgJy0wJykgIT09IC1JbmZpbml0eSA/IGZ1bmN0aW9uIHBhcnNlRmxvYXQoc3RyKXsKICB2YXIgc3RyaW5nID0gJHRyaW0oU3RyaW5nKHN0ciksIDMpCiAgICAsIHJlc3VsdCA9ICRwYXJzZUZsb2F0KHN0cmluZyk7CiAgcmV0dXJuIHJlc3VsdCA9PT0gMCAmJiBzdHJpbmcuY2hhckF0KDApID09ICctJyA/IC0wIDogcmVzdWx0Owp9IDogJHBhcnNlRmxvYXQ7Cn0seyIuL19nbG9iYWwiOjM4LCIuL19zdHJpbmctdHJpbSI6MTAyLCIuL19zdHJpbmctd3MiOjEwM31dLDgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyICRwYXJzZUludCA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpLnBhcnNlSW50CiAgLCAkdHJpbSAgICAgPSByZXF1aXJlKCcuL19zdHJpbmctdHJpbScpLnRyaW0KICAsIHdzICAgICAgICA9IHJlcXVpcmUoJy4vX3N0cmluZy13cycpCiAgLCBoZXggICAgICAgPSAvXltcLStdPzBbeFhdLzsKCm1vZHVsZS5leHBvcnRzID0gJHBhcnNlSW50KHdzICsgJzA4JykgIT09IDggfHwgJHBhcnNlSW50KHdzICsgJzB4MTYnKSAhPT0gMjIgPyBmdW5jdGlvbiBwYXJzZUludChzdHIsIHJhZGl4KXsKICB2YXIgc3RyaW5nID0gJHRyaW0oU3RyaW5nKHN0ciksIDMpOwogIHJldHVybiAkcGFyc2VJbnQoc3RyaW5nLCAocmFkaXggPj4+IDApIHx8IChoZXgudGVzdChzdHJpbmcpID8gMTYgOiAxMCkpOwp9IDogJHBhcnNlSW50Owp9LHsiLi9fZ2xvYmFsIjozOCwiLi9fc3RyaW5nLXRyaW0iOjEwMiwiLi9fc3RyaW5nLXdzIjoxMDN9XSw4MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIHBhdGggICAgICA9IHJlcXVpcmUoJy4vX3BhdGgnKQogICwgaW52b2tlICAgID0gcmVxdWlyZSgnLi9faW52b2tlJykKICAsIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigvKiAuLi5wYXJncyAqLyl7CiAgdmFyIGZuICAgICA9IGFGdW5jdGlvbih0aGlzKQogICAgLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoCiAgICAsIHBhcmdzICA9IEFycmF5KGxlbmd0aCkKICAgICwgaSAgICAgID0gMAogICAgLCBfICAgICAgPSBwYXRoLl8KICAgICwgaG9sZGVyID0gZmFsc2U7CiAgd2hpbGUobGVuZ3RoID4gaSlpZigocGFyZ3NbaV0gPSBhcmd1bWVudHNbaSsrXSkgPT09IF8paG9sZGVyID0gdHJ1ZTsKICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7CiAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgLCBhTGVuID0gYXJndW1lbnRzLmxlbmd0aAogICAgICAsIGogPSAwLCBrID0gMCwgYXJnczsKICAgIGlmKCFob2xkZXIgJiYgIWFMZW4pcmV0dXJuIGludm9rZShmbiwgcGFyZ3MsIHRoYXQpOwogICAgYXJncyA9IHBhcmdzLnNsaWNlKCk7CiAgICBpZihob2xkZXIpZm9yKDtsZW5ndGggPiBqOyBqKyspaWYoYXJnc1tqXSA9PT0gXylhcmdzW2pdID0gYXJndW1lbnRzW2srK107CiAgICB3aGlsZShhTGVuID4gaylhcmdzLnB1c2goYXJndW1lbnRzW2srK10pOwogICAgcmV0dXJuIGludm9rZShmbiwgYXJncywgdGhhdCk7CiAgfTsKfTsKfSx7Ii4vX2EtZnVuY3Rpb24iOjMsIi4vX2ludm9rZSI6NDQsIi4vX3BhdGgiOjg0fV0sODQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpOwp9LHsiLi9fZ2xvYmFsIjozOH1dLDg1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXsKICByZXR1cm4gewogICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLAogICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLAogICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLAogICAgdmFsdWUgICAgICAgOiB2YWx1ZQogIH07Cn07Cn0se31dLDg2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHJlZGVmaW5lID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0YXJnZXQsIHNyYywgc2FmZSl7CiAgZm9yKHZhciBrZXkgaW4gc3JjKXJlZGVmaW5lKHRhcmdldCwga2V5LCBzcmNba2V5XSwgc2FmZSk7CiAgcmV0dXJuIHRhcmdldDsKfTsKfSx7Ii4vX3JlZGVmaW5lIjo4N31dLDg3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGdsb2JhbCAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpCiAgLCBoaWRlICAgICAgPSByZXF1aXJlKCcuL19oaWRlJykKICAsIGhhcyAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpCiAgLCBTUkMgICAgICAgPSByZXF1aXJlKCcuL191aWQnKSgnc3JjJykKICAsIFRPX1NUUklORyA9ICd0b1N0cmluZycKICAsICR0b1N0cmluZyA9IEZ1bmN0aW9uW1RPX1NUUklOR10KICAsIFRQTCAgICAgICA9ICgnJyArICR0b1N0cmluZykuc3BsaXQoVE9fU1RSSU5HKTsKCnJlcXVpcmUoJy4vX2NvcmUnKS5pbnNwZWN0U291cmNlID0gZnVuY3Rpb24oaXQpewogIHJldHVybiAkdG9TdHJpbmcuY2FsbChpdCk7Cn07CgoobW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihPLCBrZXksIHZhbCwgc2FmZSl7CiAgdmFyIGlzRnVuY3Rpb24gPSB0eXBlb2YgdmFsID09ICdmdW5jdGlvbic7CiAgaWYoaXNGdW5jdGlvbiloYXModmFsLCAnbmFtZScpIHx8IGhpZGUodmFsLCAnbmFtZScsIGtleSk7CiAgaWYoT1trZXldID09PSB2YWwpcmV0dXJuOwogIGlmKGlzRnVuY3Rpb24paGFzKHZhbCwgU1JDKSB8fCBoaWRlKHZhbCwgU1JDLCBPW2tleV0gPyAnJyArIE9ba2V5XSA6IFRQTC5qb2luKFN0cmluZyhrZXkpKSk7CiAgaWYoTyA9PT0gZ2xvYmFsKXsKICAgIE9ba2V5XSA9IHZhbDsKICB9IGVsc2UgewogICAgaWYoIXNhZmUpewogICAgICBkZWxldGUgT1trZXldOwogICAgICBoaWRlKE8sIGtleSwgdmFsKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKE9ba2V5XSlPW2tleV0gPSB2YWw7CiAgICAgIGVsc2UgaGlkZShPLCBrZXksIHZhbCk7CiAgICB9CiAgfQovLyBhZGQgZmFrZSBGdW5jdGlvbiN0b1N0cmluZyBmb3IgY29ycmVjdCB3b3JrIHdyYXBwZWQgbWV0aG9kcyAvIGNvbnN0cnVjdG9ycyB3aXRoIG1ldGhvZHMgbGlrZSBMb0Rhc2ggaXNOYXRpdmUKfSkoRnVuY3Rpb24ucHJvdG90eXBlLCBUT19TVFJJTkcsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7CiAgcmV0dXJuIHR5cGVvZiB0aGlzID09ICdmdW5jdGlvbicgJiYgdGhpc1tTUkNdIHx8ICR0b1N0cmluZy5jYWxsKHRoaXMpOwp9KTsKfSx7Ii4vX2NvcmUiOjIzLCIuL19nbG9iYWwiOjM4LCIuL19oYXMiOjM5LCIuL19oaWRlIjo0MCwiLi9fdWlkIjoxMTR9XSw4ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocmVnRXhwLCByZXBsYWNlKXsKICB2YXIgcmVwbGFjZXIgPSByZXBsYWNlID09PSBPYmplY3QocmVwbGFjZSkgPyBmdW5jdGlvbihwYXJ0KXsKICAgIHJldHVybiByZXBsYWNlW3BhcnRdOwogIH0gOiByZXBsYWNlOwogIHJldHVybiBmdW5jdGlvbihpdCl7CiAgICByZXR1cm4gU3RyaW5nKGl0KS5yZXBsYWNlKHJlZ0V4cCwgcmVwbGFjZXIpOwogIH07Cn07Cn0se31dLDg5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gNy4yLjkgU2FtZVZhbHVlKHgsIHkpCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmlzIHx8IGZ1bmN0aW9uIGlzKHgsIHkpewogIHJldHVybiB4ID09PSB5ID8geCAhPT0gMCB8fCAxIC8geCA9PT0gMSAvIHkgOiB4ICE9IHggJiYgeSAhPSB5Owp9Owp9LHt9XSw5MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLgovKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqLwp2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKQogICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTsKdmFyIGNoZWNrID0gZnVuY3Rpb24oTywgcHJvdG8pewogIGFuT2JqZWN0KE8pOwogIGlmKCFpc09iamVjdChwcm90bykgJiYgcHJvdG8gIT09IG51bGwpdGhyb3cgVHlwZUVycm9yKHByb3RvICsgIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKTsKfTsKbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2V0OiBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgZnVuY3Rpb24odGVzdCwgYnVnZ3ksIHNldCl7CiAgICAgIHRyeSB7CiAgICAgICAgc2V0ID0gcmVxdWlyZSgnLi9fY3R4JykoRnVuY3Rpb24uY2FsbCwgcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKS5mKE9iamVjdC5wcm90b3R5cGUsICdfX3Byb3RvX18nKS5zZXQsIDIpOwogICAgICAgIHNldCh0ZXN0LCBbXSk7CiAgICAgICAgYnVnZ3kgPSAhKHRlc3QgaW5zdGFuY2VvZiBBcnJheSk7CiAgICAgIH0gY2F0Y2goZSl7IGJ1Z2d5ID0gdHJ1ZTsgfQogICAgICByZXR1cm4gZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pewogICAgICAgIGNoZWNrKE8sIHByb3RvKTsKICAgICAgICBpZihidWdneSlPLl9fcHJvdG9fXyA9IHByb3RvOwogICAgICAgIGVsc2Ugc2V0KE8sIHByb3RvKTsKICAgICAgICByZXR1cm4gTzsKICAgICAgfTsKICAgIH0oe30sIGZhbHNlKSA6IHVuZGVmaW5lZCksCiAgY2hlY2s6IGNoZWNrCn07Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2N0eCI6MjUsIi4vX2lzLW9iamVjdCI6NDksIi4vX29iamVjdC1nb3BkIjo3MH1dLDkxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgZ2xvYmFsICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKQogICwgZFAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKQogICwgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpCiAgLCBTUEVDSUVTICAgICA9IHJlcXVpcmUoJy4vX3drcycpKCdzcGVjaWVzJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSl7CiAgdmFyIEMgPSBnbG9iYWxbS0VZXTsKICBpZihERVNDUklQVE9SUyAmJiBDICYmICFDW1NQRUNJRVNdKWRQLmYoQywgU1BFQ0lFUywgewogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfQogIH0pOwp9Owp9LHsiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19nbG9iYWwiOjM4LCIuL19vYmplY3QtZHAiOjY3LCIuL193a3MiOjExN31dLDkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGRlZiA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmYKICAsIGhhcyA9IHJlcXVpcmUoJy4vX2hhcycpCiAgLCBUQUcgPSByZXF1aXJlKCcuL193a3MnKSgndG9TdHJpbmdUYWcnKTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIHRhZywgc3RhdCl7CiAgaWYoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSlkZWYoaXQsIFRBRywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHRhZ30pOwp9Owp9LHsiLi9faGFzIjozOSwiLi9fb2JqZWN0LWRwIjo2NywiLi9fd2tzIjoxMTd9XSw5MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBzaGFyZWQgPSByZXF1aXJlKCcuL19zaGFyZWQnKSgna2V5cycpCiAgLCB1aWQgICAgPSByZXF1aXJlKCcuL191aWQnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpewogIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7Cn07Cn0seyIuL19zaGFyZWQiOjk0LCIuL191aWQiOjExNH1dLDk0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGdsb2JhbCA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpCiAgLCBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJwogICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CiAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB7fSk7Cn07Cn0seyIuL19nbG9iYWwiOjM4fV0sOTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyA3LjMuMjAgU3BlY2llc0NvbnN0cnVjdG9yKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcikKdmFyIGFuT2JqZWN0ICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCBhRnVuY3Rpb24gPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJykKICAsIFNQRUNJRVMgICA9IHJlcXVpcmUoJy4vX3drcycpKCdzcGVjaWVzJyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTywgRCl7CiAgdmFyIEMgPSBhbk9iamVjdChPKS5jb25zdHJ1Y3RvciwgUzsKICByZXR1cm4gQyA9PT0gdW5kZWZpbmVkIHx8IChTID0gYW5PYmplY3QoQylbU1BFQ0lFU10pID09IHVuZGVmaW5lZCA/IEQgOiBhRnVuY3Rpb24oUyk7Cn07Cn0seyIuL19hLWZ1bmN0aW9uIjozLCIuL19hbi1vYmplY3QiOjcsIi4vX3drcyI6MTE3fV0sOTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZmFpbHMgPSByZXF1aXJlKCcuL19mYWlscycpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtZXRob2QsIGFyZyl7CiAgcmV0dXJuICEhbWV0aG9kICYmIGZhaWxzKGZ1bmN0aW9uKCl7CiAgICBhcmcgPyBtZXRob2QuY2FsbChudWxsLCBmdW5jdGlvbigpe30sIDEpIDogbWV0aG9kLmNhbGwobnVsbCk7CiAgfSk7Cn07Cn0seyIuL19mYWlscyI6MzR9XSw5NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB0b0ludGVnZXIgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJykKICAsIGRlZmluZWQgICA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKTsKLy8gdHJ1ZSAgLT4gU3RyaW5nI2F0Ci8vIGZhbHNlIC0+IFN0cmluZyNjb2RlUG9pbnRBdAptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFRPX1NUUklORyl7CiAgcmV0dXJuIGZ1bmN0aW9uKHRoYXQsIHBvcyl7CiAgICB2YXIgcyA9IFN0cmluZyhkZWZpbmVkKHRoYXQpKQogICAgICAsIGkgPSB0b0ludGVnZXIocG9zKQogICAgICAsIGwgPSBzLmxlbmd0aAogICAgICAsIGEsIGI7CiAgICBpZihpIDwgMCB8fCBpID49IGwpcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkOwogICAgYSA9IHMuY2hhckNvZGVBdChpKTsKICAgIHJldHVybiBhIDwgMHhkODAwIHx8IGEgPiAweGRiZmYgfHwgaSArIDEgPT09IGwgfHwgKGIgPSBzLmNoYXJDb2RlQXQoaSArIDEpKSA8IDB4ZGMwMCB8fCBiID4gMHhkZmZmCiAgICAgID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhCiAgICAgIDogVE9fU1RSSU5HID8gcy5zbGljZShpLCBpICsgMikgOiAoYSAtIDB4ZDgwMCA8PCAxMCkgKyAoYiAtIDB4ZGMwMCkgKyAweDEwMDAwOwogIH07Cn07Cn0seyIuL19kZWZpbmVkIjoyNywiLi9fdG8taW50ZWdlciI6MTA2fV0sOTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBoZWxwZXIgZm9yIFN0cmluZyN7c3RhcnRzV2l0aCwgZW5kc1dpdGgsIGluY2x1ZGVzfQp2YXIgaXNSZWdFeHAgPSByZXF1aXJlKCcuL19pcy1yZWdleHAnKQogICwgZGVmaW5lZCAgPSByZXF1aXJlKCcuL19kZWZpbmVkJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRoYXQsIHNlYXJjaFN0cmluZywgTkFNRSl7CiAgaWYoaXNSZWdFeHAoc2VhcmNoU3RyaW5nKSl0aHJvdyBUeXBlRXJyb3IoJ1N0cmluZyMnICsgTkFNRSArICIgZG9lc24ndCBhY2NlcHQgcmVnZXghIik7CiAgcmV0dXJuIFN0cmluZyhkZWZpbmVkKHRoYXQpKTsKfTsKfSx7Ii4vX2RlZmluZWQiOjI3LCIuL19pcy1yZWdleHAiOjUwfV0sOTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBmYWlscyAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICwgZGVmaW5lZCA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKQogICwgcXVvdCAgICA9IC8iL2c7Ci8vIEIuMi4zLjIuMSBDcmVhdGVIVE1MKHN0cmluZywgdGFnLCBhdHRyaWJ1dGUsIHZhbHVlKQp2YXIgY3JlYXRlSFRNTCA9IGZ1bmN0aW9uKHN0cmluZywgdGFnLCBhdHRyaWJ1dGUsIHZhbHVlKSB7CiAgdmFyIFMgID0gU3RyaW5nKGRlZmluZWQoc3RyaW5nKSkKICAgICwgcDEgPSAnPCcgKyB0YWc7CiAgaWYoYXR0cmlidXRlICE9PSAnJylwMSArPSAnICcgKyBhdHRyaWJ1dGUgKyAnPSInICsgU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHF1b3QsICcmcXVvdDsnKSArICciJzsKICByZXR1cm4gcDEgKyAnPicgKyBTICsgJzwvJyArIHRhZyArICc+JzsKfTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihOQU1FLCBleGVjKXsKICB2YXIgTyA9IHt9OwogIE9bTkFNRV0gPSBleGVjKGNyZWF0ZUhUTUwpOwogICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24oKXsKICAgIHZhciB0ZXN0ID0gJydbTkFNRV0oJyInKTsKICAgIHJldHVybiB0ZXN0ICE9PSB0ZXN0LnRvTG93ZXJDYXNlKCkgfHwgdGVzdC5zcGxpdCgnIicpLmxlbmd0aCA+IDM7CiAgfSksICdTdHJpbmcnLCBPKTsKfTsKfSx7Ii4vX2RlZmluZWQiOjI3LCIuL19leHBvcnQiOjMyLCIuL19mYWlscyI6MzR9XSwxMDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZAp2YXIgdG9MZW5ndGggPSByZXF1aXJlKCcuL190by1sZW5ndGgnKQogICwgcmVwZWF0ICAgPSByZXF1aXJlKCcuL19zdHJpbmctcmVwZWF0JykKICAsIGRlZmluZWQgID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0aGF0LCBtYXhMZW5ndGgsIGZpbGxTdHJpbmcsIGxlZnQpewogIHZhciBTICAgICAgICAgICAgPSBTdHJpbmcoZGVmaW5lZCh0aGF0KSkKICAgICwgc3RyaW5nTGVuZ3RoID0gUy5sZW5ndGgKICAgICwgZmlsbFN0ciAgICAgID0gZmlsbFN0cmluZyA9PT0gdW5kZWZpbmVkID8gJyAnIDogU3RyaW5nKGZpbGxTdHJpbmcpCiAgICAsIGludE1heExlbmd0aCA9IHRvTGVuZ3RoKG1heExlbmd0aCk7CiAgaWYoaW50TWF4TGVuZ3RoIDw9IHN0cmluZ0xlbmd0aCB8fCBmaWxsU3RyID09ICcnKXJldHVybiBTOwogIHZhciBmaWxsTGVuID0gaW50TWF4TGVuZ3RoIC0gc3RyaW5nTGVuZ3RoCiAgICAsIHN0cmluZ0ZpbGxlciA9IHJlcGVhdC5jYWxsKGZpbGxTdHIsIE1hdGguY2VpbChmaWxsTGVuIC8gZmlsbFN0ci5sZW5ndGgpKTsKICBpZihzdHJpbmdGaWxsZXIubGVuZ3RoID4gZmlsbExlbilzdHJpbmdGaWxsZXIgPSBzdHJpbmdGaWxsZXIuc2xpY2UoMCwgZmlsbExlbik7CiAgcmV0dXJuIGxlZnQgPyBzdHJpbmdGaWxsZXIgKyBTIDogUyArIHN0cmluZ0ZpbGxlcjsKfTsKCn0seyIuL19kZWZpbmVkIjoyNywiLi9fc3RyaW5nLXJlcGVhdCI6MTAxLCIuL190by1sZW5ndGgiOjEwOH1dLDEwMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKQogICwgZGVmaW5lZCAgID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXBlYXQoY291bnQpewogIHZhciBzdHIgPSBTdHJpbmcoZGVmaW5lZCh0aGlzKSkKICAgICwgcmVzID0gJycKICAgICwgbiAgID0gdG9JbnRlZ2VyKGNvdW50KTsKICBpZihuIDwgMCB8fCBuID09IEluZmluaXR5KXRocm93IFJhbmdlRXJyb3IoIkNvdW50IGNhbid0IGJlIG5lZ2F0aXZlIik7CiAgZm9yKDtuID4gMDsgKG4gPj4+PSAxKSAmJiAoc3RyICs9IHN0cikpaWYobiAmIDEpcmVzICs9IHN0cjsKICByZXR1cm4gcmVzOwp9Owp9LHsiLi9fZGVmaW5lZCI6MjcsIi4vX3RvLWludGVnZXIiOjEwNn1dLDEwMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGRlZmluZWQgPSByZXF1aXJlKCcuL19kZWZpbmVkJykKICAsIGZhaWxzICAgPSByZXF1aXJlKCcuL19mYWlscycpCiAgLCBzcGFjZXMgID0gcmVxdWlyZSgnLi9fc3RyaW5nLXdzJykKICAsIHNwYWNlICAgPSAnWycgKyBzcGFjZXMgKyAnXScKICAsIG5vbiAgICAgPSAnXHUyMDBiXHUwMDg1JwogICwgbHRyaW0gICA9IFJlZ0V4cCgnXicgKyBzcGFjZSArIHNwYWNlICsgJyonKQogICwgcnRyaW0gICA9IFJlZ0V4cChzcGFjZSArIHNwYWNlICsgJyokJyk7Cgp2YXIgZXhwb3J0ZXIgPSBmdW5jdGlvbihLRVksIGV4ZWMsIEFMSUFTKXsKICB2YXIgZXhwICAgPSB7fTsKICB2YXIgRk9SQ0UgPSBmYWlscyhmdW5jdGlvbigpewogICAgcmV0dXJuICEhc3BhY2VzW0tFWV0oKSB8fCBub25bS0VZXSgpICE9IG5vbjsKICB9KTsKICB2YXIgZm4gPSBleHBbS0VZXSA9IEZPUkNFID8gZXhlYyh0cmltKSA6IHNwYWNlc1tLRVldOwogIGlmKEFMSUFTKWV4cFtBTElBU10gPSBmbjsKICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIEZPUkNFLCAnU3RyaW5nJywgZXhwKTsKfTsKCi8vIDEgLT4gU3RyaW5nI3RyaW1MZWZ0Ci8vIDIgLT4gU3RyaW5nI3RyaW1SaWdodAovLyAzIC0+IFN0cmluZyN0cmltCnZhciB0cmltID0gZXhwb3J0ZXIudHJpbSA9IGZ1bmN0aW9uKHN0cmluZywgVFlQRSl7CiAgc3RyaW5nID0gU3RyaW5nKGRlZmluZWQoc3RyaW5nKSk7CiAgaWYoVFlQRSAmIDEpc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UobHRyaW0sICcnKTsKICBpZihUWVBFICYgMilzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShydHJpbSwgJycpOwogIHJldHVybiBzdHJpbmc7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydGVyOwp9LHsiLi9fZGVmaW5lZCI6MjcsIi4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzIjozNCwiLi9fc3RyaW5nLXdzIjoxMDN9XSwxMDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9ICdceDA5XHgwQVx4MEJceDBDXHgwRFx4MjBceEEwXHUxNjgwXHUxODBFXHUyMDAwXHUyMDAxXHUyMDAyXHUyMDAzJyArCiAgJ1x1MjAwNFx1MjAwNVx1MjAwNlx1MjAwN1x1MjAwOFx1MjAwOVx1MjAwQVx1MjAyRlx1MjA1Rlx1MzAwMFx1MjAyOFx1MjAyOVx1RkVGRic7Cn0se31dLDEwNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBjdHggICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jdHgnKQogICwgaW52b2tlICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faW52b2tlJykKICAsIGh0bWwgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2h0bWwnKQogICwgY2VsICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZG9tLWNyZWF0ZScpCiAgLCBnbG9iYWwgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKQogICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3MKICAsIHNldFRhc2sgICAgICAgICAgICA9IGdsb2JhbC5zZXRJbW1lZGlhdGUKICAsIGNsZWFyVGFzayAgICAgICAgICA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZQogICwgTWVzc2FnZUNoYW5uZWwgICAgID0gZ2xvYmFsLk1lc3NhZ2VDaGFubmVsCiAgLCBjb3VudGVyICAgICAgICAgICAgPSAwCiAgLCBxdWV1ZSAgICAgICAgICAgICAgPSB7fQogICwgT05SRUFEWVNUQVRFQ0hBTkdFID0gJ29ucmVhZHlzdGF0ZWNoYW5nZScKICAsIGRlZmVyLCBjaGFubmVsLCBwb3J0Owp2YXIgcnVuID0gZnVuY3Rpb24oKXsKICB2YXIgaWQgPSArdGhpczsKICBpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpewogICAgdmFyIGZuID0gcXVldWVbaWRdOwogICAgZGVsZXRlIHF1ZXVlW2lkXTsKICAgIGZuKCk7CiAgfQp9Owp2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCl7CiAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7Cn07Ci8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZToKaWYoIXNldFRhc2sgfHwgIWNsZWFyVGFzayl7CiAgc2V0VGFzayA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbil7CiAgICB2YXIgYXJncyA9IFtdLCBpID0gMTsKICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7CiAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24oKXsKICAgICAgaW52b2tlKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4gOiBGdW5jdGlvbihmbiksIGFyZ3MpOwogICAgfTsKICAgIGRlZmVyKGNvdW50ZXIpOwogICAgcmV0dXJuIGNvdW50ZXI7CiAgfTsKICBjbGVhclRhc2sgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShpZCl7CiAgICBkZWxldGUgcXVldWVbaWRdOwogIH07CiAgLy8gTm9kZS5qcyAwLjgtCiAgaWYocmVxdWlyZSgnLi9fY29mJykocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKXsKICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewogICAgICBwcm9jZXNzLm5leHRUaWNrKGN0eChydW4sIGlkLCAxKSk7CiAgICB9OwogIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnMKICB9IGVsc2UgaWYoTWVzc2FnZUNoYW5uZWwpewogICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbDsKICAgIHBvcnQgICAgPSBjaGFubmVsLnBvcnQyOwogICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaXN0ZW5lcjsKICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpOwogIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2VycwogIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnCiAgfSBlbHNlIGlmKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cyl7CiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsICcqJyk7CiAgICB9OwogICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpOwogIC8vIElFOC0KICB9IGVsc2UgaWYoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0JykpewogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7CiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2VsKCdzY3JpcHQnKSlbT05SRUFEWVNUQVRFQ0hBTkdFXSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTsKICAgICAgICBydW4uY2FsbChpZCk7CiAgICAgIH07CiAgICB9OwogIC8vIFJlc3Qgb2xkIGJyb3dzZXJzCiAgfSBlbHNlIHsKICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewogICAgICBzZXRUaW1lb3V0KGN0eChydW4sIGlkLCAxKSwgMCk7CiAgICB9OwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IHsKICBzZXQ6ICAgc2V0VGFzaywKICBjbGVhcjogY2xlYXJUYXNrCn07Cn0seyIuL19jb2YiOjE4LCIuL19jdHgiOjI1LCIuL19kb20tY3JlYXRlIjoyOSwiLi9fZ2xvYmFsIjozOCwiLi9faHRtbCI6NDEsIi4vX2ludm9rZSI6NDR9XSwxMDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi9fdG8taW50ZWdlcicpCiAgLCBtYXggICAgICAgPSBNYXRoLm1heAogICwgbWluICAgICAgID0gTWF0aC5taW47Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW5kZXgsIGxlbmd0aCl7CiAgaW5kZXggPSB0b0ludGVnZXIoaW5kZXgpOwogIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpOwp9Owp9LHsiLi9fdG8taW50ZWdlciI6MTA2fV0sMTA2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gNy4xLjQgVG9JbnRlZ2VyCnZhciBjZWlsICA9IE1hdGguY2VpbAogICwgZmxvb3IgPSBNYXRoLmZsb29yOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTsKfTsKfSx7fV0sMTA3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzCnZhciBJT2JqZWN0ID0gcmVxdWlyZSgnLi9faW9iamVjdCcpCiAgLCBkZWZpbmVkID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gSU9iamVjdChkZWZpbmVkKGl0KSk7Cn07Cn0seyIuL19kZWZpbmVkIjoyNywiLi9faW9iamVjdCI6NDV9XSwxMDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKQogICwgbWluICAgICAgID0gTWF0aC5taW47Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxCn07Cn0seyIuL190by1pbnRlZ2VyIjoxMDZ9XSwxMDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpCnZhciBkZWZpbmVkID0gcmVxdWlyZSgnLi9fZGVmaW5lZCcpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTsKfTsKfSx7Ii4vX2RlZmluZWQiOjI3fV0sMTEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gNy4xLjEgVG9QcmltaXRpdmUoaW5wdXQgWywgUHJlZmVycmVkVHlwZV0pCnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpOwovLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQovLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBTKXsKICBpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDsKICB2YXIgZm4sIHZhbDsKICBpZihTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7CiAgaWYodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIGlmKCFTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7CiAgdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKTsKfTsKfSx7Ii4vX2lzLW9iamVjdCI6NDl9XSwxMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CmlmKHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykpewogIHZhciBMSUJSQVJZICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbGlicmFyeScpCiAgICAsIGdsb2JhbCAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKQogICAgLCBmYWlscyAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICAgLCAkZXhwb3J0ICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAgICwgJHR5cGVkICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3R5cGVkJykKICAgICwgJGJ1ZmZlciAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3R5cGVkLWJ1ZmZlcicpCiAgICAsIGN0eCAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jdHgnKQogICAgLCBhbkluc3RhbmNlICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4taW5zdGFuY2UnKQogICAgLCBwcm9wZXJ0eURlc2MgICAgICAgID0gcmVxdWlyZSgnLi9fcHJvcGVydHktZGVzYycpCiAgICAsIGhpZGUgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJykKICAgICwgcmVkZWZpbmVBbGwgICAgICAgICA9IHJlcXVpcmUoJy4vX3JlZGVmaW5lLWFsbCcpCiAgICAsIGlzSW50ZWdlciAgICAgICAgICAgPSByZXF1aXJlKCcuL19pcy1pbnRlZ2VyJykKICAgICwgdG9JbnRlZ2VyICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKQogICAgLCB0b0xlbmd0aCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJykKICAgICwgdG9JbmRleCAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWluZGV4JykKICAgICwgdG9QcmltaXRpdmUgICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLXByaW1pdGl2ZScpCiAgICAsIGhhcyAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKQogICAgLCBzYW1lICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fc2FtZS12YWx1ZScpCiAgICAsIGNsYXNzb2YgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jbGFzc29mJykKICAgICwgaXNPYmplY3QgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpCiAgICAsIHRvT2JqZWN0ICAgICAgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICAgLCBpc0FycmF5SXRlciAgICAgICAgID0gcmVxdWlyZSgnLi9faXMtYXJyYXktaXRlcicpCiAgICAsIGNyZWF0ZSAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtY3JlYXRlJykKICAgICwgZ2V0UHJvdG90eXBlT2YgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKQogICAgLCBnT1BOICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4nKS5mCiAgICAsIGlzSXRlcmFibGUgICAgICAgICAgPSByZXF1aXJlKCcuL2NvcmUuaXMtaXRlcmFibGUnKQogICAgLCBnZXRJdGVyRm4gICAgICAgICAgID0gcmVxdWlyZSgnLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QnKQogICAgLCB1aWQgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdWlkJykKICAgICwgd2tzICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcycpCiAgICAsIGNyZWF0ZUFycmF5TWV0aG9kICAgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykKICAgICwgY3JlYXRlQXJyYXlJbmNsdWRlcyA9IHJlcXVpcmUoJy4vX2FycmF5LWluY2x1ZGVzJykKICAgICwgc3BlY2llc0NvbnN0cnVjdG9yICA9IHJlcXVpcmUoJy4vX3NwZWNpZXMtY29uc3RydWN0b3InKQogICAgLCBBcnJheUl0ZXJhdG9ycyAgICAgID0gcmVxdWlyZSgnLi9lczYuYXJyYXkuaXRlcmF0b3InKQogICAgLCBJdGVyYXRvcnMgICAgICAgICAgID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJykKICAgICwgJGl0ZXJEZXRlY3QgICAgICAgICA9IHJlcXVpcmUoJy4vX2l0ZXItZGV0ZWN0JykKICAgICwgc2V0U3BlY2llcyAgICAgICAgICA9IHJlcXVpcmUoJy4vX3NldC1zcGVjaWVzJykKICAgICwgYXJyYXlGaWxsICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2FycmF5LWZpbGwnKQogICAgLCBhcnJheUNvcHlXaXRoaW4gICAgID0gcmVxdWlyZSgnLi9fYXJyYXktY29weS13aXRoaW4nKQogICAgLCAkRFAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykKICAgICwgJEdPUEQgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJykKICAgICwgZFAgICAgICAgICAgICAgICAgICA9ICREUC5mCiAgICAsIGdPUEQgICAgICAgICAgICAgICAgPSAkR09QRC5mCiAgICAsIFJhbmdlRXJyb3IgICAgICAgICAgPSBnbG9iYWwuUmFuZ2VFcnJvcgogICAgLCBUeXBlRXJyb3IgICAgICAgICAgID0gZ2xvYmFsLlR5cGVFcnJvcgogICAgLCBVaW50OEFycmF5ICAgICAgICAgID0gZ2xvYmFsLlVpbnQ4QXJyYXkKICAgICwgQVJSQVlfQlVGRkVSICAgICAgICA9ICdBcnJheUJ1ZmZlcicKICAgICwgU0hBUkVEX0JVRkZFUiAgICAgICA9ICdTaGFyZWQnICsgQVJSQVlfQlVGRkVSCiAgICAsIEJZVEVTX1BFUl9FTEVNRU5UICAgPSAnQllURVNfUEVSX0VMRU1FTlQnCiAgICAsIFBST1RPVFlQRSAgICAgICAgICAgPSAncHJvdG90eXBlJwogICAgLCBBcnJheVByb3RvICAgICAgICAgID0gQXJyYXlbUFJPVE9UWVBFXQogICAgLCAkQXJyYXlCdWZmZXIgICAgICAgID0gJGJ1ZmZlci5BcnJheUJ1ZmZlcgogICAgLCAkRGF0YVZpZXcgICAgICAgICAgID0gJGJ1ZmZlci5EYXRhVmlldwogICAgLCBhcnJheUZvckVhY2ggICAgICAgID0gY3JlYXRlQXJyYXlNZXRob2QoMCkKICAgICwgYXJyYXlGaWx0ZXIgICAgICAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDIpCiAgICAsIGFycmF5U29tZSAgICAgICAgICAgPSBjcmVhdGVBcnJheU1ldGhvZCgzKQogICAgLCBhcnJheUV2ZXJ5ICAgICAgICAgID0gY3JlYXRlQXJyYXlNZXRob2QoNCkKICAgICwgYXJyYXlGaW5kICAgICAgICAgICA9IGNyZWF0ZUFycmF5TWV0aG9kKDUpCiAgICAsIGFycmF5RmluZEluZGV4ICAgICAgPSBjcmVhdGVBcnJheU1ldGhvZCg2KQogICAgLCBhcnJheUluY2x1ZGVzICAgICAgID0gY3JlYXRlQXJyYXlJbmNsdWRlcyh0cnVlKQogICAgLCBhcnJheUluZGV4T2YgICAgICAgID0gY3JlYXRlQXJyYXlJbmNsdWRlcyhmYWxzZSkKICAgICwgYXJyYXlWYWx1ZXMgICAgICAgICA9IEFycmF5SXRlcmF0b3JzLnZhbHVlcwogICAgLCBhcnJheUtleXMgICAgICAgICAgID0gQXJyYXlJdGVyYXRvcnMua2V5cwogICAgLCBhcnJheUVudHJpZXMgICAgICAgID0gQXJyYXlJdGVyYXRvcnMuZW50cmllcwogICAgLCBhcnJheUxhc3RJbmRleE9mICAgID0gQXJyYXlQcm90by5sYXN0SW5kZXhPZgogICAgLCBhcnJheVJlZHVjZSAgICAgICAgID0gQXJyYXlQcm90by5yZWR1Y2UKICAgICwgYXJyYXlSZWR1Y2VSaWdodCAgICA9IEFycmF5UHJvdG8ucmVkdWNlUmlnaHQKICAgICwgYXJyYXlKb2luICAgICAgICAgICA9IEFycmF5UHJvdG8uam9pbgogICAgLCBhcnJheVNvcnQgICAgICAgICAgID0gQXJyYXlQcm90by5zb3J0CiAgICAsIGFycmF5U2xpY2UgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlCiAgICAsIGFycmF5VG9TdHJpbmcgICAgICAgPSBBcnJheVByb3RvLnRvU3RyaW5nCiAgICAsIGFycmF5VG9Mb2NhbGVTdHJpbmcgPSBBcnJheVByb3RvLnRvTG9jYWxlU3RyaW5nCiAgICAsIElURVJBVE9SICAgICAgICAgICAgPSB3a3MoJ2l0ZXJhdG9yJykKICAgICwgVEFHICAgICAgICAgICAgICAgICA9IHdrcygndG9TdHJpbmdUYWcnKQogICAgLCBUWVBFRF9DT05TVFJVQ1RPUiAgID0gdWlkKCd0eXBlZF9jb25zdHJ1Y3RvcicpCiAgICAsIERFRl9DT05TVFJVQ1RPUiAgICAgPSB1aWQoJ2RlZl9jb25zdHJ1Y3RvcicpCiAgICAsIEFMTF9DT05TVFJVQ1RPUlMgICAgPSAkdHlwZWQuQ09OU1RSCiAgICAsIFRZUEVEX0FSUkFZICAgICAgICAgPSAkdHlwZWQuVFlQRUQKICAgICwgVklFVyAgICAgICAgICAgICAgICA9ICR0eXBlZC5WSUVXCiAgICAsIFdST05HX0xFTkdUSCAgICAgICAgPSAnV3JvbmcgbGVuZ3RoISc7CgogIHZhciAkbWFwID0gY3JlYXRlQXJyYXlNZXRob2QoMSwgZnVuY3Rpb24oTywgbGVuZ3RoKXsKICAgIHJldHVybiBhbGxvY2F0ZShzcGVjaWVzQ29uc3RydWN0b3IoTywgT1tERUZfQ09OU1RSVUNUT1JdKSwgbGVuZ3RoKTsKICB9KTsKCiAgdmFyIExJVFRMRV9FTkRJQU4gPSBmYWlscyhmdW5jdGlvbigpewogICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KG5ldyBVaW50MTZBcnJheShbMV0pLmJ1ZmZlcilbMF0gPT09IDE7CiAgfSk7CgogIHZhciBGT1JDRURfU0VUID0gISFVaW50OEFycmF5ICYmICEhVWludDhBcnJheVtQUk9UT1RZUEVdLnNldCAmJiBmYWlscyhmdW5jdGlvbigpewogICAgbmV3IFVpbnQ4QXJyYXkoMSkuc2V0KHt9KTsKICB9KTsKCiAgdmFyIHN0cmljdFRvTGVuZ3RoID0gZnVuY3Rpb24oaXQsIFNBTUUpewogICAgaWYoaXQgPT09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoV1JPTkdfTEVOR1RIKTsKICAgIHZhciBudW1iZXIgPSAraXQKICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChpdCk7CiAgICBpZihTQU1FICYmICFzYW1lKG51bWJlciwgbGVuZ3RoKSl0aHJvdyBSYW5nZUVycm9yKFdST05HX0xFTkdUSCk7CiAgICByZXR1cm4gbGVuZ3RoOwogIH07CgogIHZhciB0b09mZnNldCA9IGZ1bmN0aW9uKGl0LCBCWVRFUyl7CiAgICB2YXIgb2Zmc2V0ID0gdG9JbnRlZ2VyKGl0KTsKICAgIGlmKG9mZnNldCA8IDAgfHwgb2Zmc2V0ICUgQllURVMpdGhyb3cgUmFuZ2VFcnJvcignV3Jvbmcgb2Zmc2V0IScpOwogICAgcmV0dXJuIG9mZnNldDsKICB9OwoKICB2YXIgdmFsaWRhdGUgPSBmdW5jdGlvbihpdCl7CiAgICBpZihpc09iamVjdChpdCkgJiYgVFlQRURfQVJSQVkgaW4gaXQpcmV0dXJuIGl0OwogICAgdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSB0eXBlZCBhcnJheSEnKTsKICB9OwoKICB2YXIgYWxsb2NhdGUgPSBmdW5jdGlvbihDLCBsZW5ndGgpewogICAgaWYoIShpc09iamVjdChDKSAmJiBUWVBFRF9DT05TVFJVQ1RPUiBpbiBDKSl7CiAgICAgIHRocm93IFR5cGVFcnJvcignSXQgaXMgbm90IGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IhJyk7CiAgICB9IHJldHVybiBuZXcgQyhsZW5ndGgpOwogIH07CgogIHZhciBzcGVjaWVzRnJvbUxpc3QgPSBmdW5jdGlvbihPLCBsaXN0KXsKICAgIHJldHVybiBmcm9tTGlzdChzcGVjaWVzQ29uc3RydWN0b3IoTywgT1tERUZfQ09OU1RSVUNUT1JdKSwgbGlzdCk7CiAgfTsKCiAgdmFyIGZyb21MaXN0ID0gZnVuY3Rpb24oQywgbGlzdCl7CiAgICB2YXIgaW5kZXggID0gMAogICAgICAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoCiAgICAgICwgcmVzdWx0ID0gYWxsb2NhdGUoQywgbGVuZ3RoKTsKICAgIHdoaWxlKGxlbmd0aCA+IGluZGV4KXJlc3VsdFtpbmRleF0gPSBsaXN0W2luZGV4KytdOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICB2YXIgYWRkR2V0dGVyID0gZnVuY3Rpb24oaXQsIGtleSwgaW50ZXJuYWwpewogICAgZFAoaXQsIGtleSwge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuX2RbaW50ZXJuYWxdOyB9fSk7CiAgfTsKCiAgdmFyICRmcm9tID0gZnVuY3Rpb24gZnJvbShzb3VyY2UgLyosIG1hcGZuLCB0aGlzQXJnICovKXsKICAgIHZhciBPICAgICAgID0gdG9PYmplY3Qoc291cmNlKQogICAgICAsIGFMZW4gICAgPSBhcmd1bWVudHMubGVuZ3RoCiAgICAgICwgbWFwZm4gICA9IGFMZW4gPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkCiAgICAgICwgbWFwcGluZyA9IG1hcGZuICE9PSB1bmRlZmluZWQKICAgICAgLCBpdGVyRm4gID0gZ2V0SXRlckZuKE8pCiAgICAgICwgaSwgbGVuZ3RoLCB2YWx1ZXMsIHJlc3VsdCwgc3RlcCwgaXRlcmF0b3I7CiAgICBpZihpdGVyRm4gIT0gdW5kZWZpbmVkICYmICFpc0FycmF5SXRlcihpdGVyRm4pKXsKICAgICAgZm9yKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoTyksIHZhbHVlcyA9IFtdLCBpID0gMDsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyBpKyspewogICAgICAgIHZhbHVlcy5wdXNoKHN0ZXAudmFsdWUpOwogICAgICB9IE8gPSB2YWx1ZXM7CiAgICB9CiAgICBpZihtYXBwaW5nICYmIGFMZW4gPiAyKW1hcGZuID0gY3R4KG1hcGZuLCBhcmd1bWVudHNbMl0sIDIpOwogICAgZm9yKGkgPSAwLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCksIHJlc3VsdCA9IGFsbG9jYXRlKHRoaXMsIGxlbmd0aCk7IGxlbmd0aCA+IGk7IGkrKyl7CiAgICAgIHJlc3VsdFtpXSA9IG1hcHBpbmcgPyBtYXBmbihPW2ldLCBpKSA6IE9baV07CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIHZhciAkb2YgPSBmdW5jdGlvbiBvZigvKi4uLml0ZW1zKi8pewogICAgdmFyIGluZGV4ICA9IDAKICAgICAgLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoCiAgICAgICwgcmVzdWx0ID0gYWxsb2NhdGUodGhpcywgbGVuZ3RoKTsKICAgIHdoaWxlKGxlbmd0aCA+IGluZGV4KXJlc3VsdFtpbmRleF0gPSBhcmd1bWVudHNbaW5kZXgrK107CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIC8vIGlPUyBTYWZhcmkgNi54IGZhaWxzIGhlcmUKICB2YXIgVE9fTE9DQUxFX0JVRyA9ICEhVWludDhBcnJheSAmJiBmYWlscyhmdW5jdGlvbigpeyBhcnJheVRvTG9jYWxlU3RyaW5nLmNhbGwobmV3IFVpbnQ4QXJyYXkoMSkpOyB9KTsKCiAgdmFyICR0b0xvY2FsZVN0cmluZyA9IGZ1bmN0aW9uIHRvTG9jYWxlU3RyaW5nKCl7CiAgICByZXR1cm4gYXJyYXlUb0xvY2FsZVN0cmluZy5hcHBseShUT19MT0NBTEVfQlVHID8gYXJyYXlTbGljZS5jYWxsKHZhbGlkYXRlKHRoaXMpKSA6IHZhbGlkYXRlKHRoaXMpLCBhcmd1bWVudHMpOwogIH07CgogIHZhciBwcm90byA9IHsKICAgIGNvcHlXaXRoaW46IGZ1bmN0aW9uIGNvcHlXaXRoaW4odGFyZ2V0LCBzdGFydCAvKiwgZW5kICovKXsKICAgICAgcmV0dXJuIGFycmF5Q29weVdpdGhpbi5jYWxsKHZhbGlkYXRlKHRoaXMpLCB0YXJnZXQsIHN0YXJ0LCBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZCk7CiAgICB9LAogICAgZXZlcnk6IGZ1bmN0aW9uIGV2ZXJ5KGNhbGxiYWNrZm4gLyosIHRoaXNBcmcgKi8pewogICAgICByZXR1cm4gYXJyYXlFdmVyeSh2YWxpZGF0ZSh0aGlzKSwgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpOwogICAgfSwKICAgIGZpbGw6IGZ1bmN0aW9uIGZpbGwodmFsdWUgLyosIHN0YXJ0LCBlbmQgKi8peyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgIHJldHVybiBhcnJheUZpbGwuYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7CiAgICB9LAogICAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIoY2FsbGJhY2tmbiAvKiwgdGhpc0FyZyAqLyl7CiAgICAgIHJldHVybiBzcGVjaWVzRnJvbUxpc3QodGhpcywgYXJyYXlGaWx0ZXIodmFsaWRhdGUodGhpcyksIGNhbGxiYWNrZm4sCiAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpKTsKICAgIH0sCiAgICBmaW5kOiBmdW5jdGlvbiBmaW5kKHByZWRpY2F0ZSAvKiwgdGhpc0FyZyAqLyl7CiAgICAgIHJldHVybiBhcnJheUZpbmQodmFsaWRhdGUodGhpcyksIHByZWRpY2F0ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpOwogICAgfSwKICAgIGZpbmRJbmRleDogZnVuY3Rpb24gZmluZEluZGV4KHByZWRpY2F0ZSAvKiwgdGhpc0FyZyAqLyl7CiAgICAgIHJldHVybiBhcnJheUZpbmRJbmRleCh2YWxpZGF0ZSh0aGlzKSwgcHJlZGljYXRlLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7CiAgICB9LAogICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFja2ZuIC8qLCB0aGlzQXJnICovKXsKICAgICAgYXJyYXlGb3JFYWNoKHZhbGlkYXRlKHRoaXMpLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7CiAgICB9LAogICAgaW5kZXhPZjogZnVuY3Rpb24gaW5kZXhPZihzZWFyY2hFbGVtZW50IC8qLCBmcm9tSW5kZXggKi8pewogICAgICByZXR1cm4gYXJyYXlJbmRleE9mKHZhbGlkYXRlKHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7CiAgICB9LAogICAgaW5jbHVkZXM6IGZ1bmN0aW9uIGluY2x1ZGVzKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCAqLyl7CiAgICAgIHJldHVybiBhcnJheUluY2x1ZGVzKHZhbGlkYXRlKHRoaXMpLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7CiAgICB9LAogICAgam9pbjogZnVuY3Rpb24gam9pbihzZXBhcmF0b3IpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgIHJldHVybiBhcnJheUpvaW4uYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7CiAgICB9LAogICAgbGFzdEluZGV4T2Y6IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQgLyosIGZyb21JbmRleCAqLyl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgcmV0dXJuIGFycmF5TGFzdEluZGV4T2YuYXBwbHkodmFsaWRhdGUodGhpcyksIGFyZ3VtZW50cyk7CiAgICB9LAogICAgbWFwOiBmdW5jdGlvbiBtYXAobWFwZm4gLyosIHRoaXNBcmcgKi8pewogICAgICByZXR1cm4gJG1hcCh2YWxpZGF0ZSh0aGlzKSwgbWFwZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkKTsKICAgIH0sCiAgICByZWR1Y2U6IGZ1bmN0aW9uIHJlZHVjZShjYWxsYmFja2ZuIC8qLCBpbml0aWFsVmFsdWUgKi8peyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgIHJldHVybiBhcnJheVJlZHVjZS5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTsKICAgIH0sCiAgICByZWR1Y2VSaWdodDogZnVuY3Rpb24gcmVkdWNlUmlnaHQoY2FsbGJhY2tmbiAvKiwgaW5pdGlhbFZhbHVlICovKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogICAgICByZXR1cm4gYXJyYXlSZWR1Y2VSaWdodC5hcHBseSh2YWxpZGF0ZSh0aGlzKSwgYXJndW1lbnRzKTsKICAgIH0sCiAgICByZXZlcnNlOiBmdW5jdGlvbiByZXZlcnNlKCl7CiAgICAgIHZhciB0aGF0ICAgPSB0aGlzCiAgICAgICAgLCBsZW5ndGggPSB2YWxpZGF0ZSh0aGF0KS5sZW5ndGgKICAgICAgICAsIG1pZGRsZSA9IE1hdGguZmxvb3IobGVuZ3RoIC8gMikKICAgICAgICAsIGluZGV4ICA9IDAKICAgICAgICAsIHZhbHVlOwogICAgICB3aGlsZShpbmRleCA8IG1pZGRsZSl7CiAgICAgICAgdmFsdWUgICAgICAgICA9IHRoYXRbaW5kZXhdOwogICAgICAgIHRoYXRbaW5kZXgrK10gPSB0aGF0Wy0tbGVuZ3RoXTsKICAgICAgICB0aGF0W2xlbmd0aF0gID0gdmFsdWU7CiAgICAgIH0gcmV0dXJuIHRoYXQ7CiAgICB9LAogICAgc29tZTogZnVuY3Rpb24gc29tZShjYWxsYmFja2ZuIC8qLCB0aGlzQXJnICovKXsKICAgICAgcmV0dXJuIGFycmF5U29tZSh2YWxpZGF0ZSh0aGlzKSwgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpOwogICAgfSwKICAgIHNvcnQ6IGZ1bmN0aW9uIHNvcnQoY29tcGFyZWZuKXsKICAgICAgcmV0dXJuIGFycmF5U29ydC5jYWxsKHZhbGlkYXRlKHRoaXMpLCBjb21wYXJlZm4pOwogICAgfSwKICAgIHN1YmFycmF5OiBmdW5jdGlvbiBzdWJhcnJheShiZWdpbiwgZW5kKXsKICAgICAgdmFyIE8gICAgICA9IHZhbGlkYXRlKHRoaXMpCiAgICAgICAgLCBsZW5ndGggPSBPLmxlbmd0aAogICAgICAgICwgJGJlZ2luID0gdG9JbmRleChiZWdpbiwgbGVuZ3RoKTsKICAgICAgcmV0dXJuIG5ldyAoc3BlY2llc0NvbnN0cnVjdG9yKE8sIE9bREVGX0NPTlNUUlVDVE9SXSkpKAogICAgICAgIE8uYnVmZmVyLAogICAgICAgIE8uYnl0ZU9mZnNldCArICRiZWdpbiAqIE8uQllURVNfUEVSX0VMRU1FTlQsCiAgICAgICAgdG9MZW5ndGgoKGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuZ3RoIDogdG9JbmRleChlbmQsIGxlbmd0aCkpIC0gJGJlZ2luKQogICAgICApOwogICAgfQogIH07CgogIHZhciAkc2xpY2UgPSBmdW5jdGlvbiBzbGljZShzdGFydCwgZW5kKXsKICAgIHJldHVybiBzcGVjaWVzRnJvbUxpc3QodGhpcywgYXJyYXlTbGljZS5jYWxsKHZhbGlkYXRlKHRoaXMpLCBzdGFydCwgZW5kKSk7CiAgfTsKCiAgdmFyICRzZXQgPSBmdW5jdGlvbiBzZXQoYXJyYXlMaWtlIC8qLCBvZmZzZXQgKi8pewogICAgdmFsaWRhdGUodGhpcyk7CiAgICB2YXIgb2Zmc2V0ID0gdG9PZmZzZXQoYXJndW1lbnRzWzFdLCAxKQogICAgICAsIGxlbmd0aCA9IHRoaXMubGVuZ3RoCiAgICAgICwgc3JjICAgID0gdG9PYmplY3QoYXJyYXlMaWtlKQogICAgICAsIGxlbiAgICA9IHRvTGVuZ3RoKHNyYy5sZW5ndGgpCiAgICAgICwgaW5kZXggID0gMDsKICAgIGlmKGxlbiArIG9mZnNldCA+IGxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFdST05HX0xFTkdUSCk7CiAgICB3aGlsZShpbmRleCA8IGxlbil0aGlzW29mZnNldCArIGluZGV4XSA9IHNyY1tpbmRleCsrXTsKICB9OwoKICB2YXIgJGl0ZXJhdG9ycyA9IHsKICAgIGVudHJpZXM6IGZ1bmN0aW9uIGVudHJpZXMoKXsKICAgICAgcmV0dXJuIGFycmF5RW50cmllcy5jYWxsKHZhbGlkYXRlKHRoaXMpKTsKICAgIH0sCiAgICBrZXlzOiBmdW5jdGlvbiBrZXlzKCl7CiAgICAgIHJldHVybiBhcnJheUtleXMuY2FsbCh2YWxpZGF0ZSh0aGlzKSk7CiAgICB9LAogICAgdmFsdWVzOiBmdW5jdGlvbiB2YWx1ZXMoKXsKICAgICAgcmV0dXJuIGFycmF5VmFsdWVzLmNhbGwodmFsaWRhdGUodGhpcykpOwogICAgfQogIH07CgogIHZhciBpc1RBSW5kZXggPSBmdW5jdGlvbih0YXJnZXQsIGtleSl7CiAgICByZXR1cm4gaXNPYmplY3QodGFyZ2V0KQogICAgICAmJiB0YXJnZXRbVFlQRURfQVJSQVldCiAgICAgICYmIHR5cGVvZiBrZXkgIT0gJ3N5bWJvbCcKICAgICAgJiYga2V5IGluIHRhcmdldAogICAgICAmJiBTdHJpbmcoK2tleSkgPT0gU3RyaW5nKGtleSk7CiAgfTsKICB2YXIgJGdldERlc2MgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpewogICAgcmV0dXJuIGlzVEFJbmRleCh0YXJnZXQsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpCiAgICAgID8gcHJvcGVydHlEZXNjKDIsIHRhcmdldFtrZXldKQogICAgICA6IGdPUEQodGFyZ2V0LCBrZXkpOwogIH07CiAgdmFyICRzZXREZXNjID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2MpewogICAgaWYoaXNUQUluZGV4KHRhcmdldCwga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSkKICAgICAgJiYgaXNPYmplY3QoZGVzYykKICAgICAgJiYgaGFzKGRlc2MsICd2YWx1ZScpCiAgICAgICYmICFoYXMoZGVzYywgJ2dldCcpCiAgICAgICYmICFoYXMoZGVzYywgJ3NldCcpCiAgICAgIC8vIFRPRE86IGFkZCB2YWxpZGF0aW9uIGRlc2NyaXB0b3Igdy9vIGNhbGxpbmcgYWNjZXNzb3JzCiAgICAgICYmICFkZXNjLmNvbmZpZ3VyYWJsZQogICAgICAmJiAoIWhhcyhkZXNjLCAnd3JpdGFibGUnKSB8fCBkZXNjLndyaXRhYmxlKQogICAgICAmJiAoIWhhcyhkZXNjLCAnZW51bWVyYWJsZScpIHx8IGRlc2MuZW51bWVyYWJsZSkKICAgICl7CiAgICAgIHRhcmdldFtrZXldID0gZGVzYy52YWx1ZTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0gZWxzZSByZXR1cm4gZFAodGFyZ2V0LCBrZXksIGRlc2MpOwogIH07CgogIGlmKCFBTExfQ09OU1RSVUNUT1JTKXsKICAgICRHT1BELmYgPSAkZ2V0RGVzYzsKICAgICREUC5mICAgPSAkc2V0RGVzYzsKICB9CgogICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIUFMTF9DT05TVFJVQ1RPUlMsICdPYmplY3QnLCB7CiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXREZXNjLAogICAgZGVmaW5lUHJvcGVydHk6ICAgICAgICAgICAkc2V0RGVzYwogIH0pOwoKICBpZihmYWlscyhmdW5jdGlvbigpeyBhcnJheVRvU3RyaW5nLmNhbGwoe30pOyB9KSl7CiAgICBhcnJheVRvU3RyaW5nID0gYXJyYXlUb0xvY2FsZVN0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCl7CiAgICAgIHJldHVybiBhcnJheUpvaW4uY2FsbCh0aGlzKTsKICAgIH0KICB9CgogIHZhciAkVHlwZWRBcnJheVByb3RvdHlwZSQgPSByZWRlZmluZUFsbCh7fSwgcHJvdG8pOwogIHJlZGVmaW5lQWxsKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJGl0ZXJhdG9ycyk7CiAgaGlkZSgkVHlwZWRBcnJheVByb3RvdHlwZSQsIElURVJBVE9SLCAkaXRlcmF0b3JzLnZhbHVlcyk7CiAgcmVkZWZpbmVBbGwoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCB7CiAgICBzbGljZTogICAgICAgICAgJHNsaWNlLAogICAgc2V0OiAgICAgICAgICAgICRzZXQsCiAgICBjb25zdHJ1Y3RvcjogICAgZnVuY3Rpb24oKXsgLyogbm9vcCAqLyB9LAogICAgdG9TdHJpbmc6ICAgICAgIGFycmF5VG9TdHJpbmcsCiAgICB0b0xvY2FsZVN0cmluZzogJHRvTG9jYWxlU3RyaW5nCiAgfSk7CiAgYWRkR2V0dGVyKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJ2J1ZmZlcicsICdiJyk7CiAgYWRkR2V0dGVyKCRUeXBlZEFycmF5UHJvdG90eXBlJCwgJ2J5dGVPZmZzZXQnLCAnbycpOwogIGFkZEdldHRlcigkVHlwZWRBcnJheVByb3RvdHlwZSQsICdieXRlTGVuZ3RoJywgJ2wnKTsKICBhZGRHZXR0ZXIoJFR5cGVkQXJyYXlQcm90b3R5cGUkLCAnbGVuZ3RoJywgJ2UnKTsKICBkUCgkVHlwZWRBcnJheVByb3RvdHlwZSQsIFRBRywgewogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpc1tUWVBFRF9BUlJBWV07IH0KICB9KTsKCiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIEJZVEVTLCB3cmFwcGVyLCBDTEFNUEVEKXsKICAgIENMQU1QRUQgPSAhIUNMQU1QRUQ7CiAgICB2YXIgTkFNRSAgICAgICA9IEtFWSArIChDTEFNUEVEID8gJ0NsYW1wZWQnIDogJycpICsgJ0FycmF5JwogICAgICAsIElTTlRfVUlOVDggPSBOQU1FICE9ICdVaW50OEFycmF5JwogICAgICAsIEdFVFRFUiAgICAgPSAnZ2V0JyArIEtFWQogICAgICAsIFNFVFRFUiAgICAgPSAnc2V0JyArIEtFWQogICAgICAsIFR5cGVkQXJyYXkgPSBnbG9iYWxbTkFNRV0KICAgICAgLCBCYXNlICAgICAgID0gVHlwZWRBcnJheSB8fCB7fQogICAgICAsIFRBQyAgICAgICAgPSBUeXBlZEFycmF5ICYmIGdldFByb3RvdHlwZU9mKFR5cGVkQXJyYXkpCiAgICAgICwgRk9SQ0VEICAgICA9ICFUeXBlZEFycmF5IHx8ICEkdHlwZWQuQUJWCiAgICAgICwgTyAgICAgICAgICA9IHt9CiAgICAgICwgVHlwZWRBcnJheVByb3RvdHlwZSA9IFR5cGVkQXJyYXkgJiYgVHlwZWRBcnJheVtQUk9UT1RZUEVdOwogICAgdmFyIGdldHRlciA9IGZ1bmN0aW9uKHRoYXQsIGluZGV4KXsKICAgICAgdmFyIGRhdGEgPSB0aGF0Ll9kOwogICAgICByZXR1cm4gZGF0YS52W0dFVFRFUl0oaW5kZXggKiBCWVRFUyArIGRhdGEubywgTElUVExFX0VORElBTik7CiAgICB9OwogICAgdmFyIHNldHRlciA9IGZ1bmN0aW9uKHRoYXQsIGluZGV4LCB2YWx1ZSl7CiAgICAgIHZhciBkYXRhID0gdGhhdC5fZDsKICAgICAgaWYoQ0xBTVBFRCl2YWx1ZSA9ICh2YWx1ZSA9IE1hdGgucm91bmQodmFsdWUpKSA8IDAgPyAwIDogdmFsdWUgPiAweGZmID8gMHhmZiA6IHZhbHVlICYgMHhmZjsKICAgICAgZGF0YS52W1NFVFRFUl0oaW5kZXggKiBCWVRFUyArIGRhdGEubywgdmFsdWUsIExJVFRMRV9FTkRJQU4pOwogICAgfTsKICAgIHZhciBhZGRFbGVtZW50ID0gZnVuY3Rpb24odGhhdCwgaW5kZXgpewogICAgICBkUCh0aGF0LCBpbmRleCwgewogICAgICAgIGdldDogZnVuY3Rpb24oKXsKICAgICAgICAgIHJldHVybiBnZXR0ZXIodGhpcywgaW5kZXgpOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICByZXR1cm4gc2V0dGVyKHRoaXMsIGluZGV4LCB2YWx1ZSk7CiAgICAgICAgfSwKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfTsKICAgIGlmKEZPUkNFRCl7CiAgICAgIFR5cGVkQXJyYXkgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGRhdGEsICRvZmZzZXQsICRsZW5ndGgpewogICAgICAgIGFuSW5zdGFuY2UodGhhdCwgVHlwZWRBcnJheSwgTkFNRSwgJ19kJyk7CiAgICAgICAgdmFyIGluZGV4ICA9IDAKICAgICAgICAgICwgb2Zmc2V0ID0gMAogICAgICAgICAgLCBidWZmZXIsIGJ5dGVMZW5ndGgsIGxlbmd0aCwga2xhc3M7CiAgICAgICAgaWYoIWlzT2JqZWN0KGRhdGEpKXsKICAgICAgICAgIGxlbmd0aCAgICAgPSBzdHJpY3RUb0xlbmd0aChkYXRhLCB0cnVlKQogICAgICAgICAgYnl0ZUxlbmd0aCA9IGxlbmd0aCAqIEJZVEVTOwogICAgICAgICAgYnVmZmVyICAgICA9IG5ldyAkQXJyYXlCdWZmZXIoYnl0ZUxlbmd0aCk7CiAgICAgICAgfSBlbHNlIGlmKGRhdGEgaW5zdGFuY2VvZiAkQXJyYXlCdWZmZXIgfHwgKGtsYXNzID0gY2xhc3NvZihkYXRhKSkgPT0gQVJSQVlfQlVGRkVSIHx8IGtsYXNzID09IFNIQVJFRF9CVUZGRVIpewogICAgICAgICAgYnVmZmVyID0gZGF0YTsKICAgICAgICAgIG9mZnNldCA9IHRvT2Zmc2V0KCRvZmZzZXQsIEJZVEVTKTsKICAgICAgICAgIHZhciAkbGVuID0gZGF0YS5ieXRlTGVuZ3RoOwogICAgICAgICAgaWYoJGxlbmd0aCA9PT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgaWYoJGxlbiAlIEJZVEVTKXRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTsKICAgICAgICAgICAgYnl0ZUxlbmd0aCA9ICRsZW4gLSBvZmZzZXQ7CiAgICAgICAgICAgIGlmKGJ5dGVMZW5ndGggPCAwKXRocm93IFJhbmdlRXJyb3IoV1JPTkdfTEVOR1RIKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJ5dGVMZW5ndGggPSB0b0xlbmd0aCgkbGVuZ3RoKSAqIEJZVEVTOwogICAgICAgICAgICBpZihieXRlTGVuZ3RoICsgb2Zmc2V0ID4gJGxlbil0aHJvdyBSYW5nZUVycm9yKFdST05HX0xFTkdUSCk7CiAgICAgICAgICB9CiAgICAgICAgICBsZW5ndGggPSBieXRlTGVuZ3RoIC8gQllURVM7CiAgICAgICAgfSBlbHNlIGlmKFRZUEVEX0FSUkFZIGluIGRhdGEpewogICAgICAgICAgcmV0dXJuIGZyb21MaXN0KFR5cGVkQXJyYXksIGRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJGZyb20uY2FsbChUeXBlZEFycmF5LCBkYXRhKTsKICAgICAgICB9CiAgICAgICAgaGlkZSh0aGF0LCAnX2QnLCB7CiAgICAgICAgICBiOiBidWZmZXIsCiAgICAgICAgICBvOiBvZmZzZXQsCiAgICAgICAgICBsOiBieXRlTGVuZ3RoLAogICAgICAgICAgZTogbGVuZ3RoLAogICAgICAgICAgdjogbmV3ICREYXRhVmlldyhidWZmZXIpCiAgICAgICAgfSk7CiAgICAgICAgd2hpbGUoaW5kZXggPCBsZW5ndGgpYWRkRWxlbWVudCh0aGF0LCBpbmRleCsrKTsKICAgICAgfSk7CiAgICAgIFR5cGVkQXJyYXlQcm90b3R5cGUgPSBUeXBlZEFycmF5W1BST1RPVFlQRV0gPSBjcmVhdGUoJFR5cGVkQXJyYXlQcm90b3R5cGUkKTsKICAgICAgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCAnY29uc3RydWN0b3InLCBUeXBlZEFycmF5KTsKICAgIH0gZWxzZSBpZighJGl0ZXJEZXRlY3QoZnVuY3Rpb24oaXRlcil7CiAgICAgIC8vIFY4IHdvcmtzIHdpdGggaXRlcmF0b3JzLCBidXQgZmFpbHMgaW4gbWFueSBvdGhlciBjYXNlcwogICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDU1MgogICAgICBuZXcgVHlwZWRBcnJheShudWxsKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKICAgICAgbmV3IFR5cGVkQXJyYXkoaXRlcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3CiAgICB9LCB0cnVlKSl7CiAgICAgIFR5cGVkQXJyYXkgPSB3cmFwcGVyKGZ1bmN0aW9uKHRoYXQsIGRhdGEsICRvZmZzZXQsICRsZW5ndGgpewogICAgICAgIGFuSW5zdGFuY2UodGhhdCwgVHlwZWRBcnJheSwgTkFNRSk7CiAgICAgICAgdmFyIGtsYXNzOwogICAgICAgIC8vIGB3c2AgbW9kdWxlIGJ1ZywgdGVtcG9yYXJpbHkgcmVtb3ZlIHZhbGlkYXRpb24gbGVuZ3RoIGZvciBVaW50OEFycmF5CiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnNvY2tldHMvd3MvcHVsbC82NDUKICAgICAgICBpZighaXNPYmplY3QoZGF0YSkpcmV0dXJuIG5ldyBCYXNlKHN0cmljdFRvTGVuZ3RoKGRhdGEsIElTTlRfVUlOVDgpKTsKICAgICAgICBpZihkYXRhIGluc3RhbmNlb2YgJEFycmF5QnVmZmVyIHx8IChrbGFzcyA9IGNsYXNzb2YoZGF0YSkpID09IEFSUkFZX0JVRkZFUiB8fCBrbGFzcyA9PSBTSEFSRURfQlVGRkVSKXsKICAgICAgICAgIHJldHVybiAkbGVuZ3RoICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgPyBuZXcgQmFzZShkYXRhLCB0b09mZnNldCgkb2Zmc2V0LCBCWVRFUyksICRsZW5ndGgpCiAgICAgICAgICAgIDogJG9mZnNldCAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgPyBuZXcgQmFzZShkYXRhLCB0b09mZnNldCgkb2Zmc2V0LCBCWVRFUykpCiAgICAgICAgICAgICAgOiBuZXcgQmFzZShkYXRhKTsKICAgICAgICB9CiAgICAgICAgaWYoVFlQRURfQVJSQVkgaW4gZGF0YSlyZXR1cm4gZnJvbUxpc3QoVHlwZWRBcnJheSwgZGF0YSk7CiAgICAgICAgcmV0dXJuICRmcm9tLmNhbGwoVHlwZWRBcnJheSwgZGF0YSk7CiAgICAgIH0pOwogICAgICBhcnJheUZvckVhY2goVEFDICE9PSBGdW5jdGlvbi5wcm90b3R5cGUgPyBnT1BOKEJhc2UpLmNvbmNhdChnT1BOKFRBQykpIDogZ09QTihCYXNlKSwgZnVuY3Rpb24oa2V5KXsKICAgICAgICBpZighKGtleSBpbiBUeXBlZEFycmF5KSloaWRlKFR5cGVkQXJyYXksIGtleSwgQmFzZVtrZXldKTsKICAgICAgfSk7CiAgICAgIFR5cGVkQXJyYXlbUFJPVE9UWVBFXSA9IFR5cGVkQXJyYXlQcm90b3R5cGU7CiAgICAgIGlmKCFMSUJSQVJZKVR5cGVkQXJyYXlQcm90b3R5cGUuY29uc3RydWN0b3IgPSBUeXBlZEFycmF5OwogICAgfQogICAgdmFyICRuYXRpdmVJdGVyYXRvciAgID0gVHlwZWRBcnJheVByb3RvdHlwZVtJVEVSQVRPUl0KICAgICAgLCBDT1JSRUNUX0lURVJfTkFNRSA9ICEhJG5hdGl2ZUl0ZXJhdG9yICYmICgkbmF0aXZlSXRlcmF0b3IubmFtZSA9PSAndmFsdWVzJyB8fCAkbmF0aXZlSXRlcmF0b3IubmFtZSA9PSB1bmRlZmluZWQpCiAgICAgICwgJGl0ZXJhdG9yICAgICAgICAgPSAkaXRlcmF0b3JzLnZhbHVlczsKICAgIGhpZGUoVHlwZWRBcnJheSwgVFlQRURfQ09OU1RSVUNUT1IsIHRydWUpOwogICAgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBUWVBFRF9BUlJBWSwgTkFNRSk7CiAgICBoaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIFZJRVcsIHRydWUpOwogICAgaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBERUZfQ09OU1RSVUNUT1IsIFR5cGVkQXJyYXkpOwoKICAgIGlmKENMQU1QRUQgPyBuZXcgVHlwZWRBcnJheSgxKVtUQUddICE9IE5BTUUgOiAhKFRBRyBpbiBUeXBlZEFycmF5UHJvdG90eXBlKSl7CiAgICAgIGRQKFR5cGVkQXJyYXlQcm90b3R5cGUsIFRBRywgewogICAgICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIE5BTUU7IH0KICAgICAgfSk7CiAgICB9CgogICAgT1tOQU1FXSA9IFR5cGVkQXJyYXk7CgogICAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAoVHlwZWRBcnJheSAhPSBCYXNlKSwgTyk7CgogICAgJGV4cG9ydCgkZXhwb3J0LlMsIE5BTUUsIHsKICAgICAgQllURVNfUEVSX0VMRU1FTlQ6IEJZVEVTLAogICAgICBmcm9tOiAkZnJvbSwKICAgICAgb2Y6ICRvZgogICAgfSk7CgogICAgaWYoIShCWVRFU19QRVJfRUxFTUVOVCBpbiBUeXBlZEFycmF5UHJvdG90eXBlKSloaWRlKFR5cGVkQXJyYXlQcm90b3R5cGUsIEJZVEVTX1BFUl9FTEVNRU5ULCBCWVRFUyk7CgogICAgJGV4cG9ydCgkZXhwb3J0LlAsIE5BTUUsIHByb3RvKTsKCiAgICBzZXRTcGVjaWVzKE5BTUUpOwoKICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogRk9SQ0VEX1NFVCwgTkFNRSwge3NldDogJHNldH0pOwoKICAgICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogIUNPUlJFQ1RfSVRFUl9OQU1FLCBOQU1FLCAkaXRlcmF0b3JzKTsKCiAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChUeXBlZEFycmF5UHJvdG90eXBlLnRvU3RyaW5nICE9IGFycmF5VG9TdHJpbmcpLCBOQU1FLCB7dG9TdHJpbmc6IGFycmF5VG9TdHJpbmd9KTsKCiAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7CiAgICAgIG5ldyBUeXBlZEFycmF5KDEpLnNsaWNlKCk7CiAgICB9KSwgTkFNRSwge3NsaWNlOiAkc2xpY2V9KTsKCiAgICAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChmYWlscyhmdW5jdGlvbigpewogICAgICByZXR1cm4gWzEsIDJdLnRvTG9jYWxlU3RyaW5nKCkgIT0gbmV3IFR5cGVkQXJyYXkoWzEsIDJdKS50b0xvY2FsZVN0cmluZygpCiAgICB9KSB8fCAhZmFpbHMoZnVuY3Rpb24oKXsKICAgICAgVHlwZWRBcnJheVByb3RvdHlwZS50b0xvY2FsZVN0cmluZy5jYWxsKFsxLCAyXSk7CiAgICB9KSksIE5BTUUsIHt0b0xvY2FsZVN0cmluZzogJHRvTG9jYWxlU3RyaW5nfSk7CgogICAgSXRlcmF0b3JzW05BTUVdID0gQ09SUkVDVF9JVEVSX05BTUUgPyAkbmF0aXZlSXRlcmF0b3IgOiAkaXRlcmF0b3I7CiAgICBpZighTElCUkFSWSAmJiAhQ09SUkVDVF9JVEVSX05BTUUpaGlkZShUeXBlZEFycmF5UHJvdG90eXBlLCBJVEVSQVRPUiwgJGl0ZXJhdG9yKTsKICB9Owp9IGVsc2UgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9Owp9LHsiLi9fYW4taW5zdGFuY2UiOjYsIi4vX2FycmF5LWNvcHktd2l0aGluIjo4LCIuL19hcnJheS1maWxsIjo5LCIuL19hcnJheS1pbmNsdWRlcyI6MTEsIi4vX2FycmF5LW1ldGhvZHMiOjEyLCIuL19jbGFzc29mIjoxNywiLi9fY3R4IjoyNSwiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19leHBvcnQiOjMyLCIuL19mYWlscyI6MzQsIi4vX2dsb2JhbCI6MzgsIi4vX2hhcyI6MzksIi4vX2hpZGUiOjQwLCIuL19pcy1hcnJheS1pdGVyIjo0NiwiLi9faXMtaW50ZWdlciI6NDgsIi4vX2lzLW9iamVjdCI6NDksIi4vX2l0ZXItZGV0ZWN0Ijo1NCwiLi9faXRlcmF0b3JzIjo1NiwiLi9fbGlicmFyeSI6NTgsIi4vX29iamVjdC1jcmVhdGUiOjY2LCIuL19vYmplY3QtZHAiOjY3LCIuL19vYmplY3QtZ29wZCI6NzAsIi4vX29iamVjdC1nb3BuIjo3MiwiLi9fb2JqZWN0LWdwbyI6NzQsIi4vX3Byb3BlcnR5LWRlc2MiOjg1LCIuL19yZWRlZmluZS1hbGwiOjg2LCIuL19zYW1lLXZhbHVlIjo4OSwiLi9fc2V0LXNwZWNpZXMiOjkxLCIuL19zcGVjaWVzLWNvbnN0cnVjdG9yIjo5NSwiLi9fdG8taW5kZXgiOjEwNSwiLi9fdG8taW50ZWdlciI6MTA2LCIuL190by1sZW5ndGgiOjEwOCwiLi9fdG8tb2JqZWN0IjoxMDksIi4vX3RvLXByaW1pdGl2ZSI6MTEwLCIuL190eXBlZCI6MTEzLCIuL190eXBlZC1idWZmZXIiOjExMiwiLi9fdWlkIjoxMTQsIi4vX3drcyI6MTE3LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6MTE4LCIuL2NvcmUuaXMtaXRlcmFibGUiOjExOSwiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjEzMX1dLDExMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIGdsb2JhbCAgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykKICAsIERFU0NSSVBUT1JTICAgID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKQogICwgTElCUkFSWSAgICAgICAgPSByZXF1aXJlKCcuL19saWJyYXJ5JykKICAsICR0eXBlZCAgICAgICAgID0gcmVxdWlyZSgnLi9fdHlwZWQnKQogICwgaGlkZSAgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJykKICAsIHJlZGVmaW5lQWxsICAgID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUtYWxsJykKICAsIGZhaWxzICAgICAgICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICwgYW5JbnN0YW5jZSAgICAgPSByZXF1aXJlKCcuL19hbi1pbnN0YW5jZScpCiAgLCB0b0ludGVnZXIgICAgICA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKQogICwgdG9MZW5ndGggICAgICAgPSByZXF1aXJlKCcuL190by1sZW5ndGgnKQogICwgZ09QTiAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpLmYKICAsIGRQICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZgogICwgYXJyYXlGaWxsICAgICAgPSByZXF1aXJlKCcuL19hcnJheS1maWxsJykKICAsIHNldFRvU3RyaW5nVGFnID0gcmVxdWlyZSgnLi9fc2V0LXRvLXN0cmluZy10YWcnKQogICwgQVJSQVlfQlVGRkVSICAgPSAnQXJyYXlCdWZmZXInCiAgLCBEQVRBX1ZJRVcgICAgICA9ICdEYXRhVmlldycKICAsIFBST1RPVFlQRSAgICAgID0gJ3Byb3RvdHlwZScKICAsIFdST05HX0xFTkdUSCAgID0gJ1dyb25nIGxlbmd0aCEnCiAgLCBXUk9OR19JTkRFWCAgICA9ICdXcm9uZyBpbmRleCEnCiAgLCAkQXJyYXlCdWZmZXIgICA9IGdsb2JhbFtBUlJBWV9CVUZGRVJdCiAgLCAkRGF0YVZpZXcgICAgICA9IGdsb2JhbFtEQVRBX1ZJRVddCiAgLCBNYXRoICAgICAgICAgICA9IGdsb2JhbC5NYXRoCiAgLCBwYXJzZUludCAgICAgICA9IGdsb2JhbC5wYXJzZUludAogICwgUmFuZ2VFcnJvciAgICAgPSBnbG9iYWwuUmFuZ2VFcnJvcgogICwgSW5maW5pdHkgICAgICAgPSBnbG9iYWwuSW5maW5pdHkKICAsIEJhc2VCdWZmZXIgICAgID0gJEFycmF5QnVmZmVyCiAgLCBhYnMgICAgICAgICAgICA9IE1hdGguYWJzCiAgLCBwb3cgICAgICAgICAgICA9IE1hdGgucG93CiAgLCBtaW4gICAgICAgICAgICA9IE1hdGgubWluCiAgLCBmbG9vciAgICAgICAgICA9IE1hdGguZmxvb3IKICAsIGxvZyAgICAgICAgICAgID0gTWF0aC5sb2cKICAsIExOMiAgICAgICAgICAgID0gTWF0aC5MTjIKICAsIEJVRkZFUiAgICAgICAgID0gJ2J1ZmZlcicKICAsIEJZVEVfTEVOR1RIICAgID0gJ2J5dGVMZW5ndGgnCiAgLCBCWVRFX09GRlNFVCAgICA9ICdieXRlT2Zmc2V0JwogICwgJEJVRkZFUiAgICAgICAgPSBERVNDUklQVE9SUyA/ICdfYicgOiBCVUZGRVIKICAsICRMRU5HVEggICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX2wnIDogQllURV9MRU5HVEgKICAsICRPRkZTRVQgICAgICAgID0gREVTQ1JJUFRPUlMgPyAnX28nIDogQllURV9PRkZTRVQ7CgovLyBJRUVFNzU0IGNvbnZlcnNpb25zIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvaWVlZTc1NAp2YXIgcGFja0lFRUU3NTQgPSBmdW5jdGlvbih2YWx1ZSwgbUxlbiwgbkJ5dGVzKXsKICB2YXIgYnVmZmVyID0gQXJyYXkobkJ5dGVzKQogICAgLCBlTGVuICAgPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEKICAgICwgZU1heCAgID0gKDEgPDwgZUxlbikgLSAxCiAgICAsIGVCaWFzICA9IGVNYXggPj4gMQogICAgLCBydCAgICAgPSBtTGVuID09PSAyMyA/IHBvdygyLCAtMjQpIC0gcG93KDIsIC03NykgOiAwCiAgICAsIGkgICAgICA9IDAKICAgICwgcyAgICAgID0gdmFsdWUgPCAwIHx8IHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDAgPyAxIDogMAogICAgLCBlLCBtLCBjOwogIHZhbHVlID0gYWJzKHZhbHVlKQogIGlmKHZhbHVlICE9IHZhbHVlIHx8IHZhbHVlID09PSBJbmZpbml0eSl7CiAgICBtID0gdmFsdWUgIT0gdmFsdWUgPyAxIDogMDsKICAgIGUgPSBlTWF4OwogIH0gZWxzZSB7CiAgICBlID0gZmxvb3IobG9nKHZhbHVlKSAvIExOMik7CiAgICBpZih2YWx1ZSAqIChjID0gcG93KDIsIC1lKSkgPCAxKXsKICAgICAgZS0tOwogICAgICBjICo9IDI7CiAgICB9CiAgICBpZihlICsgZUJpYXMgPj0gMSl7CiAgICAgIHZhbHVlICs9IHJ0IC8gYzsKICAgIH0gZWxzZSB7CiAgICAgIHZhbHVlICs9IHJ0ICogcG93KDIsIDEgLSBlQmlhcyk7CiAgICB9CiAgICBpZih2YWx1ZSAqIGMgPj0gMil7CiAgICAgIGUrKzsKICAgICAgYyAvPSAyOwogICAgfQogICAgaWYoZSArIGVCaWFzID49IGVNYXgpewogICAgICBtID0gMDsKICAgICAgZSA9IGVNYXg7CiAgICB9IGVsc2UgaWYoZSArIGVCaWFzID49IDEpewogICAgICBtID0gKHZhbHVlICogYyAtIDEpICogcG93KDIsIG1MZW4pOwogICAgICBlID0gZSArIGVCaWFzOwogICAgfSBlbHNlIHsKICAgICAgbSA9IHZhbHVlICogcG93KDIsIGVCaWFzIC0gMSkgKiBwb3coMiwgbUxlbik7CiAgICAgIGUgPSAwOwogICAgfQogIH0KICBmb3IoOyBtTGVuID49IDg7IGJ1ZmZlcltpKytdID0gbSAmIDI1NSwgbSAvPSAyNTYsIG1MZW4gLT0gOCk7CiAgZSA9IGUgPDwgbUxlbiB8IG07CiAgZUxlbiArPSBtTGVuOwogIGZvcig7IGVMZW4gPiAwOyBidWZmZXJbaSsrXSA9IGUgJiAyNTUsIGUgLz0gMjU2LCBlTGVuIC09IDgpOwogIGJ1ZmZlclstLWldIHw9IHMgKiAxMjg7CiAgcmV0dXJuIGJ1ZmZlcjsKfTsKdmFyIHVucGFja0lFRUU3NTQgPSBmdW5jdGlvbihidWZmZXIsIG1MZW4sIG5CeXRlcyl7CiAgdmFyIGVMZW4gID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxCiAgICAsIGVNYXggID0gKDEgPDwgZUxlbikgLSAxCiAgICAsIGVCaWFzID0gZU1heCA+PiAxCiAgICAsIG5CaXRzID0gZUxlbiAtIDcKICAgICwgaSAgICAgPSBuQnl0ZXMgLSAxCiAgICAsIHMgICAgID0gYnVmZmVyW2ktLV0KICAgICwgZSAgICAgPSBzICYgMTI3CiAgICAsIG07CiAgcyA+Pj0gNzsKICBmb3IoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW2ldLCBpLS0sIG5CaXRzIC09IDgpOwogIG0gPSBlICYgKDEgPDwgLW5CaXRzKSAtIDE7CiAgZSA+Pj0gLW5CaXRzOwogIG5CaXRzICs9IG1MZW47CiAgZm9yKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltpXSwgaS0tLCBuQml0cyAtPSA4KTsKICBpZihlID09PSAwKXsKICAgIGUgPSAxIC0gZUJpYXM7CiAgfSBlbHNlIGlmKGUgPT09IGVNYXgpewogICAgcmV0dXJuIG0gPyBOYU4gOiBzID8gLUluZmluaXR5IDogSW5maW5pdHk7CiAgfSBlbHNlIHsKICAgIG0gPSBtICsgcG93KDIsIG1MZW4pOwogICAgZSA9IGUgLSBlQmlhczsKICB9IHJldHVybiAocyA/IC0xIDogMSkgKiBtICogcG93KDIsIGUgLSBtTGVuKTsKfTsKCnZhciB1bnBhY2tJMzIgPSBmdW5jdGlvbihieXRlcyl7CiAgcmV0dXJuIGJ5dGVzWzNdIDw8IDI0IHwgYnl0ZXNbMl0gPDwgMTYgfCBieXRlc1sxXSA8PCA4IHwgYnl0ZXNbMF07Cn07CnZhciBwYWNrSTggPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIFtpdCAmIDB4ZmZdOwp9Owp2YXIgcGFja0kxNiA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gW2l0ICYgMHhmZiwgaXQgPj4gOCAmIDB4ZmZdOwp9Owp2YXIgcGFja0kzMiA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gW2l0ICYgMHhmZiwgaXQgPj4gOCAmIDB4ZmYsIGl0ID4+IDE2ICYgMHhmZiwgaXQgPj4gMjQgJiAweGZmXTsKfTsKdmFyIHBhY2tGNjQgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIHBhY2tJRUVFNzU0KGl0LCA1MiwgOCk7Cn07CnZhciBwYWNrRjMyID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBwYWNrSUVFRTc1NChpdCwgMjMsIDQpOwp9OwoKdmFyIGFkZEdldHRlciA9IGZ1bmN0aW9uKEMsIGtleSwgaW50ZXJuYWwpewogIGRQKENbUFJPVE9UWVBFXSwga2V5LCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpc1tpbnRlcm5hbF07IH19KTsKfTsKCnZhciBnZXQgPSBmdW5jdGlvbih2aWV3LCBieXRlcywgaW5kZXgsIGlzTGl0dGxlRW5kaWFuKXsKICB2YXIgbnVtSW5kZXggPSAraW5kZXgKICAgICwgaW50SW5kZXggPSB0b0ludGVnZXIobnVtSW5kZXgpOwogIGlmKG51bUluZGV4ICE9IGludEluZGV4IHx8IGludEluZGV4IDwgMCB8fCBpbnRJbmRleCArIGJ5dGVzID4gdmlld1skTEVOR1RIXSl0aHJvdyBSYW5nZUVycm9yKFdST05HX0lOREVYKTsKICB2YXIgc3RvcmUgPSB2aWV3WyRCVUZGRVJdLl9iCiAgICAsIHN0YXJ0ID0gaW50SW5kZXggKyB2aWV3WyRPRkZTRVRdCiAgICAsIHBhY2sgID0gc3RvcmUuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgYnl0ZXMpOwogIHJldHVybiBpc0xpdHRsZUVuZGlhbiA/IHBhY2sgOiBwYWNrLnJldmVyc2UoKTsKfTsKdmFyIHNldCA9IGZ1bmN0aW9uKHZpZXcsIGJ5dGVzLCBpbmRleCwgY29udmVyc2lvbiwgdmFsdWUsIGlzTGl0dGxlRW5kaWFuKXsKICB2YXIgbnVtSW5kZXggPSAraW5kZXgKICAgICwgaW50SW5kZXggPSB0b0ludGVnZXIobnVtSW5kZXgpOwogIGlmKG51bUluZGV4ICE9IGludEluZGV4IHx8IGludEluZGV4IDwgMCB8fCBpbnRJbmRleCArIGJ5dGVzID4gdmlld1skTEVOR1RIXSl0aHJvdyBSYW5nZUVycm9yKFdST05HX0lOREVYKTsKICB2YXIgc3RvcmUgPSB2aWV3WyRCVUZGRVJdLl9iCiAgICAsIHN0YXJ0ID0gaW50SW5kZXggKyB2aWV3WyRPRkZTRVRdCiAgICAsIHBhY2sgID0gY29udmVyc2lvbigrdmFsdWUpOwogIGZvcih2YXIgaSA9IDA7IGkgPCBieXRlczsgaSsrKXN0b3JlW3N0YXJ0ICsgaV0gPSBwYWNrW2lzTGl0dGxlRW5kaWFuID8gaSA6IGJ5dGVzIC0gaSAtIDFdOwp9OwoKdmFyIHZhbGlkYXRlQXJyYXlCdWZmZXJBcmd1bWVudHMgPSBmdW5jdGlvbih0aGF0LCBsZW5ndGgpewogIGFuSW5zdGFuY2UodGhhdCwgJEFycmF5QnVmZmVyLCBBUlJBWV9CVUZGRVIpOwogIHZhciBudW1iZXJMZW5ndGggPSArbGVuZ3RoCiAgICAsIGJ5dGVMZW5ndGggICA9IHRvTGVuZ3RoKG51bWJlckxlbmd0aCk7CiAgaWYobnVtYmVyTGVuZ3RoICE9IGJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpOwogIHJldHVybiBieXRlTGVuZ3RoOwp9OwoKaWYoISR0eXBlZC5BQlYpewogICRBcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIEFycmF5QnVmZmVyKGxlbmd0aCl7CiAgICB2YXIgYnl0ZUxlbmd0aCA9IHZhbGlkYXRlQXJyYXlCdWZmZXJBcmd1bWVudHModGhpcywgbGVuZ3RoKTsKICAgIHRoaXMuX2IgICAgICAgPSBhcnJheUZpbGwuY2FsbChBcnJheShieXRlTGVuZ3RoKSwgMCk7CiAgICB0aGlzWyRMRU5HVEhdID0gYnl0ZUxlbmd0aDsKICB9OwoKICAkRGF0YVZpZXcgPSBmdW5jdGlvbiBEYXRhVmlldyhidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpewogICAgYW5JbnN0YW5jZSh0aGlzLCAkRGF0YVZpZXcsIERBVEFfVklFVyk7CiAgICBhbkluc3RhbmNlKGJ1ZmZlciwgJEFycmF5QnVmZmVyLCBEQVRBX1ZJRVcpOwogICAgdmFyIGJ1ZmZlckxlbmd0aCA9IGJ1ZmZlclskTEVOR1RIXQogICAgICAsIG9mZnNldCAgICAgICA9IHRvSW50ZWdlcihieXRlT2Zmc2V0KTsKICAgIGlmKG9mZnNldCA8IDAgfHwgb2Zmc2V0ID4gYnVmZmVyTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoJ1dyb25nIG9mZnNldCEnKTsKICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID09PSB1bmRlZmluZWQgPyBidWZmZXJMZW5ndGggLSBvZmZzZXQgOiB0b0xlbmd0aChieXRlTGVuZ3RoKTsKICAgIGlmKG9mZnNldCArIGJ5dGVMZW5ndGggPiBidWZmZXJMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihXUk9OR19MRU5HVEgpOwogICAgdGhpc1skQlVGRkVSXSA9IGJ1ZmZlcjsKICAgIHRoaXNbJE9GRlNFVF0gPSBvZmZzZXQ7CiAgICB0aGlzWyRMRU5HVEhdID0gYnl0ZUxlbmd0aDsKICB9OwoKICBpZihERVNDUklQVE9SUyl7CiAgICBhZGRHZXR0ZXIoJEFycmF5QnVmZmVyLCBCWVRFX0xFTkdUSCwgJ19sJyk7CiAgICBhZGRHZXR0ZXIoJERhdGFWaWV3LCBCVUZGRVIsICdfYicpOwogICAgYWRkR2V0dGVyKCREYXRhVmlldywgQllURV9MRU5HVEgsICdfbCcpOwogICAgYWRkR2V0dGVyKCREYXRhVmlldywgQllURV9PRkZTRVQsICdfbycpOwogIH0KCiAgcmVkZWZpbmVBbGwoJERhdGFWaWV3W1BST1RPVFlQRV0sIHsKICAgIGdldEludDg6IGZ1bmN0aW9uIGdldEludDgoYnl0ZU9mZnNldCl7CiAgICAgIHJldHVybiBnZXQodGhpcywgMSwgYnl0ZU9mZnNldClbMF0gPDwgMjQgPj4gMjQ7CiAgICB9LAogICAgZ2V0VWludDg6IGZ1bmN0aW9uIGdldFVpbnQ4KGJ5dGVPZmZzZXQpewogICAgICByZXR1cm4gZ2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQpWzBdOwogICAgfSwKICAgIGdldEludDE2OiBmdW5jdGlvbiBnZXRJbnQxNihieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pewogICAgICB2YXIgYnl0ZXMgPSBnZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgYXJndW1lbnRzWzFdKTsKICAgICAgcmV0dXJuIChieXRlc1sxXSA8PCA4IHwgYnl0ZXNbMF0pIDw8IDE2ID4+IDE2OwogICAgfSwKICAgIGdldFVpbnQxNjogZnVuY3Rpb24gZ2V0VWludDE2KGJ5dGVPZmZzZXQgLyosIGxpdHRsZUVuZGlhbiAqLyl7CiAgICAgIHZhciBieXRlcyA9IGdldCh0aGlzLCAyLCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pOwogICAgICByZXR1cm4gYnl0ZXNbMV0gPDwgOCB8IGJ5dGVzWzBdOwogICAgfSwKICAgIGdldEludDMyOiBmdW5jdGlvbiBnZXRJbnQzMihieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pewogICAgICByZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pKTsKICAgIH0sCiAgICBnZXRVaW50MzI6IGZ1bmN0aW9uIGdldFVpbnQzMihieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pewogICAgICByZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pKSA+Pj4gMDsKICAgIH0sCiAgICBnZXRGbG9hdDMyOiBmdW5jdGlvbiBnZXRGbG9hdDMyKGJ5dGVPZmZzZXQgLyosIGxpdHRsZUVuZGlhbiAqLyl7CiAgICAgIHJldHVybiB1bnBhY2tJRUVFNzU0KGdldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBhcmd1bWVudHNbMV0pLCAyMywgNCk7CiAgICB9LAogICAgZ2V0RmxvYXQ2NDogZnVuY3Rpb24gZ2V0RmxvYXQ2NChieXRlT2Zmc2V0IC8qLCBsaXR0bGVFbmRpYW4gKi8pewogICAgICByZXR1cm4gdW5wYWNrSUVFRTc1NChnZXQodGhpcywgOCwgYnl0ZU9mZnNldCwgYXJndW1lbnRzWzFdKSwgNTIsIDgpOwogICAgfSwKICAgIHNldEludDg6IGZ1bmN0aW9uIHNldEludDgoYnl0ZU9mZnNldCwgdmFsdWUpewogICAgICBzZXQodGhpcywgMSwgYnl0ZU9mZnNldCwgcGFja0k4LCB2YWx1ZSk7CiAgICB9LAogICAgc2V0VWludDg6IGZ1bmN0aW9uIHNldFVpbnQ4KGJ5dGVPZmZzZXQsIHZhbHVlKXsKICAgICAgc2V0KHRoaXMsIDEsIGJ5dGVPZmZzZXQsIHBhY2tJOCwgdmFsdWUpOwogICAgfSwKICAgIHNldEludDE2OiBmdW5jdGlvbiBzZXRJbnQxNihieXRlT2Zmc2V0LCB2YWx1ZSAvKiwgbGl0dGxlRW5kaWFuICovKXsKICAgICAgc2V0KHRoaXMsIDIsIGJ5dGVPZmZzZXQsIHBhY2tJMTYsIHZhbHVlLCBhcmd1bWVudHNbMl0pOwogICAgfSwKICAgIHNldFVpbnQxNjogZnVuY3Rpb24gc2V0VWludDE2KGJ5dGVPZmZzZXQsIHZhbHVlIC8qLCBsaXR0bGVFbmRpYW4gKi8pewogICAgICBzZXQodGhpcywgMiwgYnl0ZU9mZnNldCwgcGFja0kxNiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7CiAgICB9LAogICAgc2V0SW50MzI6IGZ1bmN0aW9uIHNldEludDMyKGJ5dGVPZmZzZXQsIHZhbHVlIC8qLCBsaXR0bGVFbmRpYW4gKi8pewogICAgICBzZXQodGhpcywgNCwgYnl0ZU9mZnNldCwgcGFja0kzMiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7CiAgICB9LAogICAgc2V0VWludDMyOiBmdW5jdGlvbiBzZXRVaW50MzIoYnl0ZU9mZnNldCwgdmFsdWUgLyosIGxpdHRsZUVuZGlhbiAqLyl7CiAgICAgIHNldCh0aGlzLCA0LCBieXRlT2Zmc2V0LCBwYWNrSTMyLCB2YWx1ZSwgYXJndW1lbnRzWzJdKTsKICAgIH0sCiAgICBzZXRGbG9hdDMyOiBmdW5jdGlvbiBzZXRGbG9hdDMyKGJ5dGVPZmZzZXQsIHZhbHVlIC8qLCBsaXR0bGVFbmRpYW4gKi8pewogICAgICBzZXQodGhpcywgNCwgYnl0ZU9mZnNldCwgcGFja0YzMiwgdmFsdWUsIGFyZ3VtZW50c1syXSk7CiAgICB9LAogICAgc2V0RmxvYXQ2NDogZnVuY3Rpb24gc2V0RmxvYXQ2NChieXRlT2Zmc2V0LCB2YWx1ZSAvKiwgbGl0dGxlRW5kaWFuICovKXsKICAgICAgc2V0KHRoaXMsIDgsIGJ5dGVPZmZzZXQsIHBhY2tGNjQsIHZhbHVlLCBhcmd1bWVudHNbMl0pOwogICAgfQogIH0pOwp9IGVsc2UgewogIGlmKCFmYWlscyhmdW5jdGlvbigpewogICAgbmV3ICRBcnJheUJ1ZmZlcjsgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3CiAgfSkgfHwgIWZhaWxzKGZ1bmN0aW9uKCl7CiAgICBuZXcgJEFycmF5QnVmZmVyKC41KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKICB9KSl7CiAgICAkQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiBBcnJheUJ1ZmZlcihsZW5ndGgpewogICAgICByZXR1cm4gbmV3IEJhc2VCdWZmZXIodmFsaWRhdGVBcnJheUJ1ZmZlckFyZ3VtZW50cyh0aGlzLCBsZW5ndGgpKTsKICAgIH07CiAgICB2YXIgQXJyYXlCdWZmZXJQcm90byA9ICRBcnJheUJ1ZmZlcltQUk9UT1RZUEVdID0gQmFzZUJ1ZmZlcltQUk9UT1RZUEVdOwogICAgZm9yKHZhciBrZXlzID0gZ09QTihCYXNlQnVmZmVyKSwgaiA9IDAsIGtleTsga2V5cy5sZW5ndGggPiBqOyApewogICAgICBpZighKChrZXkgPSBrZXlzW2orK10pIGluICRBcnJheUJ1ZmZlcikpaGlkZSgkQXJyYXlCdWZmZXIsIGtleSwgQmFzZUJ1ZmZlcltrZXldKTsKICAgIH07CiAgICBpZighTElCUkFSWSlBcnJheUJ1ZmZlclByb3RvLmNvbnN0cnVjdG9yID0gJEFycmF5QnVmZmVyOwogIH0KICAvLyBpT1MgU2FmYXJpIDcueCBidWcKICB2YXIgdmlldyA9IG5ldyAkRGF0YVZpZXcobmV3ICRBcnJheUJ1ZmZlcigyKSkKICAgICwgJHNldEludDggPSAkRGF0YVZpZXdbUFJPVE9UWVBFXS5zZXRJbnQ4OwogIHZpZXcuc2V0SW50OCgwLCAyMTQ3NDgzNjQ4KTsKICB2aWV3LnNldEludDgoMSwgMjE0NzQ4MzY0OSk7CiAgaWYodmlldy5nZXRJbnQ4KDApIHx8ICF2aWV3LmdldEludDgoMSkpcmVkZWZpbmVBbGwoJERhdGFWaWV3W1BST1RPVFlQRV0sIHsKICAgIHNldEludDg6IGZ1bmN0aW9uIHNldEludDgoYnl0ZU9mZnNldCwgdmFsdWUpewogICAgICAkc2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTsKICAgIH0sCiAgICBzZXRVaW50ODogZnVuY3Rpb24gc2V0VWludDgoYnl0ZU9mZnNldCwgdmFsdWUpewogICAgICAkc2V0SW50OC5jYWxsKHRoaXMsIGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDI0ID4+IDI0KTsKICAgIH0KICB9LCB0cnVlKTsKfQpzZXRUb1N0cmluZ1RhZygkQXJyYXlCdWZmZXIsIEFSUkFZX0JVRkZFUik7CnNldFRvU3RyaW5nVGFnKCREYXRhVmlldywgREFUQV9WSUVXKTsKaGlkZSgkRGF0YVZpZXdbUFJPVE9UWVBFXSwgJHR5cGVkLlZJRVcsIHRydWUpOwpleHBvcnRzW0FSUkFZX0JVRkZFUl0gPSAkQXJyYXlCdWZmZXI7CmV4cG9ydHNbREFUQV9WSUVXXSA9ICREYXRhVmlldzsKfSx7Ii4vX2FuLWluc3RhbmNlIjo2LCIuL19hcnJheS1maWxsIjo5LCIuL19kZXNjcmlwdG9ycyI6MjgsIi4vX2ZhaWxzIjozNCwiLi9fZ2xvYmFsIjozOCwiLi9faGlkZSI6NDAsIi4vX2xpYnJhcnkiOjU4LCIuL19vYmplY3QtZHAiOjY3LCIuL19vYmplY3QtZ29wbiI6NzIsIi4vX3JlZGVmaW5lLWFsbCI6ODYsIi4vX3NldC10by1zdHJpbmctdGFnIjo5MiwiLi9fdG8taW50ZWdlciI6MTA2LCIuL190by1sZW5ndGgiOjEwOCwiLi9fdHlwZWQiOjExM31dLDExMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBnbG9iYWwgPSByZXF1aXJlKCcuL19nbG9iYWwnKQogICwgaGlkZSAgID0gcmVxdWlyZSgnLi9faGlkZScpCiAgLCB1aWQgICAgPSByZXF1aXJlKCcuL191aWQnKQogICwgVFlQRUQgID0gdWlkKCd0eXBlZF9hcnJheScpCiAgLCBWSUVXICAgPSB1aWQoJ3ZpZXcnKQogICwgQUJWICAgID0gISEoZ2xvYmFsLkFycmF5QnVmZmVyICYmIGdsb2JhbC5EYXRhVmlldykKICAsIENPTlNUUiA9IEFCVgogICwgaSA9IDAsIGwgPSA5LCBUeXBlZDsKCnZhciBUeXBlZEFycmF5Q29uc3RydWN0b3JzID0gKAogICdJbnQ4QXJyYXksVWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheSxJbnQxNkFycmF5LFVpbnQxNkFycmF5LEludDMyQXJyYXksVWludDMyQXJyYXksRmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheScKKS5zcGxpdCgnLCcpOwoKd2hpbGUoaSA8IGwpewogIGlmKFR5cGVkID0gZ2xvYmFsW1R5cGVkQXJyYXlDb25zdHJ1Y3RvcnNbaSsrXV0pewogICAgaGlkZShUeXBlZC5wcm90b3R5cGUsIFRZUEVELCB0cnVlKTsKICAgIGhpZGUoVHlwZWQucHJvdG90eXBlLCBWSUVXLCB0cnVlKTsKICB9IGVsc2UgQ09OU1RSID0gZmFsc2U7Cn0KCm1vZHVsZS5leHBvcnRzID0gewogIEFCVjogICAgQUJWLAogIENPTlNUUjogQ09OU1RSLAogIFRZUEVEOiAgVFlQRUQsCiAgVklFVzogICBWSUVXCn07Cn0seyIuL19nbG9iYWwiOjM4LCIuL19oaWRlIjo0MCwiLi9fdWlkIjoxMTR9XSwxMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaWQgPSAwCiAgLCBweCA9IE1hdGgucmFuZG9tKCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXsKICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpOwp9Owp9LHt9XSwxMTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZ2xvYmFsICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKQogICwgY29yZSAgICAgICAgICAgPSByZXF1aXJlKCcuL19jb3JlJykKICAsIExJQlJBUlkgICAgICAgID0gcmVxdWlyZSgnLi9fbGlicmFyeScpCiAgLCB3a3NFeHQgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcy1leHQnKQogICwgZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKS5mOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpewogIHZhciAkU3ltYm9sID0gY29yZS5TeW1ib2wgfHwgKGNvcmUuU3ltYm9sID0gTElCUkFSWSA/IHt9IDogZ2xvYmFsLlN5bWJvbCB8fCB7fSk7CiAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7Cn07Cn0seyIuL19jb3JlIjoyMywiLi9fZ2xvYmFsIjozOCwiLi9fbGlicmFyeSI6NTgsIi4vX29iamVjdC1kcCI6NjcsIi4vX3drcy1leHQiOjExNn1dLDExNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmV4cG9ydHMuZiA9IHJlcXVpcmUoJy4vX3drcycpOwp9LHsiLi9fd2tzIjoxMTd9XSwxMTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgc3RvcmUgICAgICA9IHJlcXVpcmUoJy4vX3NoYXJlZCcpKCd3a3MnKQogICwgdWlkICAgICAgICA9IHJlcXVpcmUoJy4vX3VpZCcpCiAgLCBTeW1ib2wgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuU3ltYm9sCiAgLCBVU0VfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PSAnZnVuY3Rpb24nOwoKdmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXsKICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID0KICAgIFVTRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7Cn07CgokZXhwb3J0cy5zdG9yZSA9IHN0b3JlOwp9LHsiLi9fZ2xvYmFsIjozOCwiLi9fc2hhcmVkIjo5NCwiLi9fdWlkIjoxMTR9XSwxMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY2xhc3NvZiAgID0gcmVxdWlyZSgnLi9fY2xhc3NvZicpCiAgLCBJVEVSQVRPUiAgPSByZXF1aXJlKCcuL193a3MnKSgnaXRlcmF0b3InKQogICwgSXRlcmF0b3JzID0gcmVxdWlyZSgnLi9faXRlcmF0b3JzJyk7Cm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fY29yZScpLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpewogIGlmKGl0ICE9IHVuZGVmaW5lZClyZXR1cm4gaXRbSVRFUkFUT1JdCiAgICB8fCBpdFsnQEBpdGVyYXRvciddCiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldOwp9Owp9LHsiLi9fY2xhc3NvZiI6MTcsIi4vX2NvcmUiOjIzLCIuL19pdGVyYXRvcnMiOjU2LCIuL193a3MiOjExN31dLDExOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBjbGFzc29mICAgPSByZXF1aXJlKCcuL19jbGFzc29mJykKICAsIElURVJBVE9SICA9IHJlcXVpcmUoJy4vX3drcycpKCdpdGVyYXRvcicpCiAgLCBJdGVyYXRvcnMgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19jb3JlJykuaXNJdGVyYWJsZSA9IGZ1bmN0aW9uKGl0KXsKICB2YXIgTyA9IE9iamVjdChpdCk7CiAgcmV0dXJuIE9bSVRFUkFUT1JdICE9PSB1bmRlZmluZWQKICAgIHx8ICdAQGl0ZXJhdG9yJyBpbiBPCiAgICB8fCBJdGVyYXRvcnMuaGFzT3duUHJvcGVydHkoY2xhc3NvZihPKSk7Cn07Cn0seyIuL19jbGFzc29mIjoxNywiLi9fY29yZSI6MjMsIi4vX2l0ZXJhdG9ycyI6NTYsIi4vX3drcyI6MTE3fV0sMTIwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbWluZ3IvUmV4RXhwLmVzY2FwZQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCAkcmUgICAgID0gcmVxdWlyZSgnLi9fcmVwbGFjZXInKSgvW1xcXiQqKz8uKCl8W1xde31dL2csICdcXCQmJyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ1JlZ0V4cCcsIHtlc2NhcGU6IGZ1bmN0aW9uIGVzY2FwZShpdCl7IHJldHVybiAkcmUoaXQpOyB9fSk7Cgp9LHsiLi9fZXhwb3J0IjozMiwiLi9fcmVwbGFjZXIiOjg4fV0sMTIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjIuMS4zLjMgQXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4odGFyZ2V0LCBzdGFydCwgZW5kID0gdGhpcy5sZW5ndGgpCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUCwgJ0FycmF5Jywge2NvcHlXaXRoaW46IHJlcXVpcmUoJy4vX2FycmF5LWNvcHktd2l0aGluJyl9KTsKCnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKCdjb3B5V2l0aGluJyk7Cn0seyIuL19hZGQtdG8tdW5zY29wYWJsZXMiOjUsIi4vX2FycmF5LWNvcHktd2l0aGluIjo4LCIuL19leHBvcnQiOjMyfV0sMTIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCAkZXZlcnkgID0gcmVxdWlyZSgnLi9fYXJyYXktbWV0aG9kcycpKDQpOwoKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9fc3RyaWN0LW1ldGhvZCcpKFtdLmV2ZXJ5LCB0cnVlKSwgJ0FycmF5JywgewogIC8vIDIyLjEuMy41IC8gMTUuNC40LjE2IEFycmF5LnByb3RvdHlwZS5ldmVyeShjYWxsYmFja2ZuIFssIHRoaXNBcmddKQogIGV2ZXJ5OiBmdW5jdGlvbiBldmVyeShjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLyl7CiAgICByZXR1cm4gJGV2ZXJ5KHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50c1sxXSk7CiAgfQp9KTsKfSx7Ii4vX2FycmF5LW1ldGhvZHMiOjEyLCIuL19leHBvcnQiOjMyLCIuL19zdHJpY3QtbWV0aG9kIjo5Nn1dLDEyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIyLjEuMy42IEFycmF5LnByb3RvdHlwZS5maWxsKHZhbHVlLCBzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpOwoKJGV4cG9ydCgkZXhwb3J0LlAsICdBcnJheScsIHtmaWxsOiByZXF1aXJlKCcuL19hcnJheS1maWxsJyl9KTsKCnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKCdmaWxsJyk7Cn0seyIuL19hZGQtdG8tdW5zY29wYWJsZXMiOjUsIi4vX2FycmF5LWZpbGwiOjksIi4vX2V4cG9ydCI6MzJ9XSwxMjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsICRmaWx0ZXIgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoMik7CgokZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoW10uZmlsdGVyLCB0cnVlKSwgJ0FycmF5JywgewogIC8vIDIyLjEuMy43IC8gMTUuNC40LjIwIEFycmF5LnByb3RvdHlwZS5maWx0ZXIoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKICBmaWx0ZXI6IGZ1bmN0aW9uIGZpbHRlcihjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLyl7CiAgICByZXR1cm4gJGZpbHRlcih0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHNbMV0pOwogIH0KfSk7Cn0seyIuL19hcnJheS1tZXRob2RzIjoxMiwiLi9fZXhwb3J0IjozMiwiLi9fc3RyaWN0LW1ldGhvZCI6OTZ9XSwxMjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIDIyLjEuMy45IEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXgocHJlZGljYXRlLCB0aGlzQXJnID0gdW5kZWZpbmVkKQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCAkZmluZCAgID0gcmVxdWlyZSgnLi9fYXJyYXktbWV0aG9kcycpKDYpCiAgLCBLRVkgICAgID0gJ2ZpbmRJbmRleCcKICAsIGZvcmNlZCAgPSB0cnVlOwovLyBTaG91bGRuJ3Qgc2tpcCBob2xlcwppZihLRVkgaW4gW10pQXJyYXkoMSlbS0VZXShmdW5jdGlvbigpeyBmb3JjZWQgPSBmYWxzZTsgfSk7CiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogZm9yY2VkLCAnQXJyYXknLCB7CiAgZmluZEluZGV4OiBmdW5jdGlvbiBmaW5kSW5kZXgoY2FsbGJhY2tmbi8qLCB0aGF0ID0gdW5kZWZpbmVkICovKXsKICAgIHJldHVybiAkZmluZCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7CiAgfQp9KTsKcmVxdWlyZSgnLi9fYWRkLXRvLXVuc2NvcGFibGVzJykoS0VZKTsKfSx7Ii4vX2FkZC10by11bnNjb3BhYmxlcyI6NSwiLi9fYXJyYXktbWV0aG9kcyI6MTIsIi4vX2V4cG9ydCI6MzJ9XSwxMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIDIyLjEuMy44IEFycmF5LnByb3RvdHlwZS5maW5kKHByZWRpY2F0ZSwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJGZpbmQgICA9IHJlcXVpcmUoJy4vX2FycmF5LW1ldGhvZHMnKSg1KQogICwgS0VZICAgICA9ICdmaW5kJwogICwgZm9yY2VkICA9IHRydWU7Ci8vIFNob3VsZG4ndCBza2lwIGhvbGVzCmlmKEtFWSBpbiBbXSlBcnJheSgxKVtLRVldKGZ1bmN0aW9uKCl7IGZvcmNlZCA9IGZhbHNlOyB9KTsKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiBmb3JjZWQsICdBcnJheScsIHsKICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNhbGxiYWNrZm4vKiwgdGhhdCA9IHVuZGVmaW5lZCAqLyl7CiAgICByZXR1cm4gJGZpbmQodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpOwogIH0KfSk7CnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKEtFWSk7Cn0seyIuL19hZGQtdG8tdW5zY29wYWJsZXMiOjUsIi4vX2FycmF5LW1ldGhvZHMiOjEyLCIuL19leHBvcnQiOjMyfV0sMTI3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgJGV4cG9ydCAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJGZvckVhY2ggPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoMCkKICAsIFNUUklDVCAgID0gcmVxdWlyZSgnLi9fc3RyaWN0LW1ldGhvZCcpKFtdLmZvckVhY2gsIHRydWUpOwoKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAhU1RSSUNULCAnQXJyYXknLCB7CiAgLy8gMjIuMS4zLjEwIC8gMTUuNC40LjE4IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCiAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChjYWxsYmFja2ZuIC8qICwgdGhpc0FyZyAqLyl7CiAgICByZXR1cm4gJGZvckVhY2godGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTsKICB9Cn0pOwp9LHsiLi9fYXJyYXktbWV0aG9kcyI6MTIsIi4vX2V4cG9ydCI6MzIsIi4vX3N0cmljdC1tZXRob2QiOjk2fV0sMTI4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgY3R4ICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jdHgnKQogICwgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgdG9PYmplY3QgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgY2FsbCAgICAgICAgICAgPSByZXF1aXJlKCcuL19pdGVyLWNhbGwnKQogICwgaXNBcnJheUl0ZXIgICAgPSByZXF1aXJlKCcuL19pcy1hcnJheS1pdGVyJykKICAsIHRvTGVuZ3RoICAgICAgID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJykKICAsIGNyZWF0ZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9fY3JlYXRlLXByb3BlcnR5JykKICAsIGdldEl0ZXJGbiAgICAgID0gcmVxdWlyZSgnLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QnKTsKCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIXJlcXVpcmUoJy4vX2l0ZXItZGV0ZWN0JykoZnVuY3Rpb24oaXRlcil7IEFycmF5LmZyb20oaXRlcik7IH0pLCAnQXJyYXknLCB7CiAgLy8gMjIuMS4yLjEgQXJyYXkuZnJvbShhcnJheUxpa2UsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKQogIGZyb206IGZ1bmN0aW9uIGZyb20oYXJyYXlMaWtlLyosIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKi8pewogICAgdmFyIE8gICAgICAgPSB0b09iamVjdChhcnJheUxpa2UpCiAgICAgICwgQyAgICAgICA9IHR5cGVvZiB0aGlzID09ICdmdW5jdGlvbicgPyB0aGlzIDogQXJyYXkKICAgICAgLCBhTGVuICAgID0gYXJndW1lbnRzLmxlbmd0aAogICAgICAsIG1hcGZuICAgPSBhTGVuID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZAogICAgICAsIG1hcHBpbmcgPSBtYXBmbiAhPT0gdW5kZWZpbmVkCiAgICAgICwgaW5kZXggICA9IDAKICAgICAgLCBpdGVyRm4gID0gZ2V0SXRlckZuKE8pCiAgICAgICwgbGVuZ3RoLCByZXN1bHQsIHN0ZXAsIGl0ZXJhdG9yOwogICAgaWYobWFwcGluZyltYXBmbiA9IGN0eChtYXBmbiwgYUxlbiA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQsIDIpOwogICAgLy8gaWYgb2JqZWN0IGlzbid0IGl0ZXJhYmxlIG9yIGl0J3MgYXJyYXkgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yIC0gdXNlIHNpbXBsZSBjYXNlCiAgICBpZihpdGVyRm4gIT0gdW5kZWZpbmVkICYmICEoQyA9PSBBcnJheSAmJiBpc0FycmF5SXRlcihpdGVyRm4pKSl7CiAgICAgIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKE8pLCByZXN1bHQgPSBuZXcgQzsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyBpbmRleCsrKXsKICAgICAgICBjcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGluZGV4LCBtYXBwaW5nID8gY2FsbChpdGVyYXRvciwgbWFwZm4sIFtzdGVwLnZhbHVlLCBpbmRleF0sIHRydWUpIDogc3RlcC52YWx1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKTsKICAgICAgZm9yKHJlc3VsdCA9IG5ldyBDKGxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKXsKICAgICAgICBjcmVhdGVQcm9wZXJ0eShyZXN1bHQsIGluZGV4LCBtYXBwaW5nID8gbWFwZm4oT1tpbmRleF0sIGluZGV4KSA6IE9baW5kZXhdKTsKICAgICAgfQogICAgfQogICAgcmVzdWx0Lmxlbmd0aCA9IGluZGV4OwogICAgcmV0dXJuIHJlc3VsdDsKICB9Cn0pOwoKfSx7Ii4vX2NyZWF0ZS1wcm9wZXJ0eSI6MjQsIi4vX2N0eCI6MjUsIi4vX2V4cG9ydCI6MzIsIi4vX2lzLWFycmF5LWl0ZXIiOjQ2LCIuL19pdGVyLWNhbGwiOjUxLCIuL19pdGVyLWRldGVjdCI6NTQsIi4vX3RvLWxlbmd0aCI6MTA4LCIuL190by1vYmplY3QiOjEwOSwiLi9jb3JlLmdldC1pdGVyYXRvci1tZXRob2QiOjExOH1dLDEyOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJGluZGV4T2YgICAgICA9IHJlcXVpcmUoJy4vX2FycmF5LWluY2x1ZGVzJykoZmFsc2UpCiAgLCAkbmF0aXZlICAgICAgID0gW10uaW5kZXhPZgogICwgTkVHQVRJVkVfWkVSTyA9ICEhJG5hdGl2ZSAmJiAxIC8gWzFdLmluZGV4T2YoMSwgLTApIDwgMDsKCiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKE5FR0FUSVZFX1pFUk8gfHwgIXJlcXVpcmUoJy4vX3N0cmljdC1tZXRob2QnKSgkbmF0aXZlKSksICdBcnJheScsIHsKICAvLyAyMi4xLjMuMTEgLyAxNS40LjQuMTQgQXJyYXkucHJvdG90eXBlLmluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKQogIGluZGV4T2Y6IGZ1bmN0aW9uIGluZGV4T2Yoc2VhcmNoRWxlbWVudCAvKiwgZnJvbUluZGV4ID0gMCAqLyl7CiAgICByZXR1cm4gTkVHQVRJVkVfWkVSTwogICAgICAvLyBjb252ZXJ0IC0wIHRvICswCiAgICAgID8gJG5hdGl2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IDAKICAgICAgOiAkaW5kZXhPZih0aGlzLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHNbMV0pOwogIH0KfSk7Cn0seyIuL19hcnJheS1pbmNsdWRlcyI6MTEsIi4vX2V4cG9ydCI6MzIsIi4vX3N0cmljdC1tZXRob2QiOjk2fV0sMTMwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjIuMS4yLjIgLyAxNS40LjMuMiBBcnJheS5pc0FycmF5KGFyZykKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnQXJyYXknLCB7aXNBcnJheTogcmVxdWlyZSgnLi9faXMtYXJyYXknKX0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9faXMtYXJyYXkiOjQ3fV0sMTMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgYWRkVG9VbnNjb3BhYmxlcyA9IHJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpCiAgLCBzdGVwICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faXRlci1zdGVwJykKICAsIEl0ZXJhdG9ycyAgICAgICAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKQogICwgdG9JT2JqZWN0ICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKTsKCi8vIDIyLjEuMy40IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzKCkKLy8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5rZXlzKCkKLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKQovLyAyMi4xLjMuMzAgQXJyYXkucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19pdGVyLWRlZmluZScpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7CiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldAogIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4CiAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgIC8vIGtpbmQKLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpCn0sIGZ1bmN0aW9uKCl7CiAgdmFyIE8gICAgID0gdGhpcy5fdAogICAgLCBraW5kICA9IHRoaXMuX2sKICAgICwgaW5kZXggPSB0aGlzLl9pKys7CiAgaWYoIU8gfHwgaW5kZXggPj0gTy5sZW5ndGgpewogICAgdGhpcy5fdCA9IHVuZGVmaW5lZDsKICAgIHJldHVybiBzdGVwKDEpOwogIH0KICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGluZGV4KTsKICBpZihraW5kID09ICd2YWx1ZXMnKXJldHVybiBzdGVwKDAsIE9baW5kZXhdKTsKICByZXR1cm4gc3RlcCgwLCBbaW5kZXgsIE9baW5kZXhdXSk7Cn0sICd2YWx1ZXMnKTsKCi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNykKSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTsKCmFkZFRvVW5zY29wYWJsZXMoJ2tleXMnKTsKYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7CmFkZFRvVW5zY29wYWJsZXMoJ2VudHJpZXMnKTsKfSx7Ii4vX2FkZC10by11bnNjb3BhYmxlcyI6NSwiLi9faXRlci1kZWZpbmUiOjUzLCIuL19pdGVyLXN0ZXAiOjU1LCIuL19pdGVyYXRvcnMiOjU2LCIuL190by1pb2JqZWN0IjoxMDd9XSwxMzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUuam9pbihzZXBhcmF0b3IpCnZhciAkZXhwb3J0ICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgdG9JT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpCiAgLCBhcnJheUpvaW4gPSBbXS5qb2luOwoKLy8gZmFsbGJhY2sgZm9yIG5vdCBhcnJheS1saWtlIHN0cmluZ3MKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAocmVxdWlyZSgnLi9faW9iamVjdCcpICE9IE9iamVjdCB8fCAhcmVxdWlyZSgnLi9fc3RyaWN0LW1ldGhvZCcpKGFycmF5Sm9pbikpLCAnQXJyYXknLCB7CiAgam9pbjogZnVuY3Rpb24gam9pbihzZXBhcmF0b3IpewogICAgcmV0dXJuIGFycmF5Sm9pbi5jYWxsKHRvSU9iamVjdCh0aGlzKSwgc2VwYXJhdG9yID09PSB1bmRlZmluZWQgPyAnLCcgOiBzZXBhcmF0b3IpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19pb2JqZWN0Ijo0NSwiLi9fc3RyaWN0LW1ldGhvZCI6OTYsIi4vX3RvLWlvYmplY3QiOjEwN31dLDEzMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgdG9JT2JqZWN0ICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKQogICwgdG9JbnRlZ2VyICAgICA9IHJlcXVpcmUoJy4vX3RvLWludGVnZXInKQogICwgdG9MZW5ndGggICAgICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpCiAgLCAkbmF0aXZlICAgICAgID0gW10ubGFzdEluZGV4T2YKICAsIE5FR0FUSVZFX1pFUk8gPSAhISRuYXRpdmUgJiYgMSAvIFsxXS5sYXN0SW5kZXhPZigxLCAtMCkgPCAwOwoKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoTkVHQVRJVkVfWkVSTyB8fCAhcmVxdWlyZSgnLi9fc3RyaWN0LW1ldGhvZCcpKCRuYXRpdmUpKSwgJ0FycmF5JywgewogIC8vIDIyLjEuMy4xNCAvIDE1LjQuNC4xNSBBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKQogIGxhc3RJbmRleE9mOiBmdW5jdGlvbiBsYXN0SW5kZXhPZihzZWFyY2hFbGVtZW50IC8qLCBmcm9tSW5kZXggPSBAWyotMV0gKi8pewogICAgLy8gY29udmVydCAtMCB0byArMAogICAgaWYoTkVHQVRJVkVfWkVSTylyZXR1cm4gJG5hdGl2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IDA7CiAgICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KHRoaXMpCiAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpCiAgICAgICwgaW5kZXggID0gbGVuZ3RoIC0gMTsKICAgIGlmKGFyZ3VtZW50cy5sZW5ndGggPiAxKWluZGV4ID0gTWF0aC5taW4oaW5kZXgsIHRvSW50ZWdlcihhcmd1bWVudHNbMV0pKTsKICAgIGlmKGluZGV4IDwgMClpbmRleCA9IGxlbmd0aCArIGluZGV4OwogICAgZm9yKDtpbmRleCA+PSAwOyBpbmRleC0tKWlmKGluZGV4IGluIE8paWYoT1tpbmRleF0gPT09IHNlYXJjaEVsZW1lbnQpcmV0dXJuIGluZGV4IHx8IDA7CiAgICByZXR1cm4gLTE7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX3N0cmljdC1tZXRob2QiOjk2LCIuL190by1pbnRlZ2VyIjoxMDYsIi4vX3RvLWlvYmplY3QiOjEwNywiLi9fdG8tbGVuZ3RoIjoxMDh9XSwxMzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsICRtYXAgICAgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoMSk7CgokZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoW10ubWFwLCB0cnVlKSwgJ0FycmF5JywgewogIC8vIDIyLjEuMy4xNSAvIDE1LjQuNC4xOSBBcnJheS5wcm90b3R5cGUubWFwKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCiAgbWFwOiBmdW5jdGlvbiBtYXAoY2FsbGJhY2tmbiAvKiAsIHRoaXNBcmcgKi8pewogICAgcmV0dXJuICRtYXAodGhpcywgY2FsbGJhY2tmbiwgYXJndW1lbnRzWzFdKTsKICB9Cn0pOwp9LHsiLi9fYXJyYXktbWV0aG9kcyI6MTIsIi4vX2V4cG9ydCI6MzIsIi4vX3N0cmljdC1tZXRob2QiOjk2fV0sMTM1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgY3JlYXRlUHJvcGVydHkgPSByZXF1aXJlKCcuL19jcmVhdGUtcHJvcGVydHknKTsKCi8vIFdlYktpdCBBcnJheS5vZiBpc24ndCBnZW5lcmljCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpewogIGZ1bmN0aW9uIEYoKXt9CiAgcmV0dXJuICEoQXJyYXkub2YuY2FsbChGKSBpbnN0YW5jZW9mIEYpOwp9KSwgJ0FycmF5JywgewogIC8vIDIyLjEuMi4zIEFycmF5Lm9mKCAuLi5pdGVtcykKICBvZjogZnVuY3Rpb24gb2YoLyogLi4uYXJncyAqLyl7CiAgICB2YXIgaW5kZXggID0gMAogICAgICAsIGFMZW4gICA9IGFyZ3VtZW50cy5sZW5ndGgKICAgICAgLCByZXN1bHQgPSBuZXcgKHR5cGVvZiB0aGlzID09ICdmdW5jdGlvbicgPyB0aGlzIDogQXJyYXkpKGFMZW4pOwogICAgd2hpbGUoYUxlbiA+IGluZGV4KWNyZWF0ZVByb3BlcnR5KHJlc3VsdCwgaW5kZXgsIGFyZ3VtZW50c1tpbmRleCsrXSk7CiAgICByZXN1bHQubGVuZ3RoID0gYUxlbjsKICAgIHJldHVybiByZXN1bHQ7CiAgfQp9KTsKfSx7Ii4vX2NyZWF0ZS1wcm9wZXJ0eSI6MjQsIi4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzIjozNH1dLDEzNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJHJlZHVjZSA9IHJlcXVpcmUoJy4vX2FycmF5LXJlZHVjZScpOwoKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9fc3RyaWN0LW1ldGhvZCcpKFtdLnJlZHVjZVJpZ2h0LCB0cnVlKSwgJ0FycmF5JywgewogIC8vIDIyLjEuMy4xOSAvIDE1LjQuNC4yMiBBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHQoY2FsbGJhY2tmbiBbLCBpbml0aWFsVmFsdWVdKQogIHJlZHVjZVJpZ2h0OiBmdW5jdGlvbiByZWR1Y2VSaWdodChjYWxsYmFja2ZuIC8qICwgaW5pdGlhbFZhbHVlICovKXsKICAgIHJldHVybiAkcmVkdWNlKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50c1sxXSwgdHJ1ZSk7CiAgfQp9KTsKfSx7Ii4vX2FycmF5LXJlZHVjZSI6MTMsIi4vX2V4cG9ydCI6MzIsIi4vX3N0cmljdC1tZXRob2QiOjk2fV0sMTM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCAkcmVkdWNlID0gcmVxdWlyZSgnLi9fYXJyYXktcmVkdWNlJyk7CgokZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoW10ucmVkdWNlLCB0cnVlKSwgJ0FycmF5JywgewogIC8vIDIyLjEuMy4xOCAvIDE1LjQuNC4yMSBBcnJheS5wcm90b3R5cGUucmVkdWNlKGNhbGxiYWNrZm4gWywgaW5pdGlhbFZhbHVlXSkKICByZWR1Y2U6IGZ1bmN0aW9uIHJlZHVjZShjYWxsYmFja2ZuIC8qICwgaW5pdGlhbFZhbHVlICovKXsKICAgIHJldHVybiAkcmVkdWNlKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50c1sxXSwgZmFsc2UpOwogIH0KfSk7Cn0seyIuL19hcnJheS1yZWR1Y2UiOjEzLCIuL19leHBvcnQiOjMyLCIuL19zdHJpY3QtbWV0aG9kIjo5Nn1dLDEzODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgaHRtbCAgICAgICA9IHJlcXVpcmUoJy4vX2h0bWwnKQogICwgY29mICAgICAgICA9IHJlcXVpcmUoJy4vX2NvZicpCiAgLCB0b0luZGV4ICAgID0gcmVxdWlyZSgnLi9fdG8taW5kZXgnKQogICwgdG9MZW5ndGggICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpCiAgLCBhcnJheVNsaWNlID0gW10uc2xpY2U7CgovLyBmYWxsYmFjayBmb3Igbm90IGFycmF5LWxpa2UgRVMzIHN0cmluZ3MgYW5kIERPTSBvYmplY3RzCiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpewogIGlmKGh0bWwpYXJyYXlTbGljZS5jYWxsKGh0bWwpOwp9KSwgJ0FycmF5JywgewogIHNsaWNlOiBmdW5jdGlvbiBzbGljZShiZWdpbiwgZW5kKXsKICAgIHZhciBsZW4gICA9IHRvTGVuZ3RoKHRoaXMubGVuZ3RoKQogICAgICAsIGtsYXNzID0gY29mKHRoaXMpOwogICAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiBlbmQ7CiAgICBpZihrbGFzcyA9PSAnQXJyYXknKXJldHVybiBhcnJheVNsaWNlLmNhbGwodGhpcywgYmVnaW4sIGVuZCk7CiAgICB2YXIgc3RhcnQgID0gdG9JbmRleChiZWdpbiwgbGVuKQogICAgICAsIHVwVG8gICA9IHRvSW5kZXgoZW5kLCBsZW4pCiAgICAgICwgc2l6ZSAgID0gdG9MZW5ndGgodXBUbyAtIHN0YXJ0KQogICAgICAsIGNsb25lZCA9IEFycmF5KHNpemUpCiAgICAgICwgaSAgICAgID0gMDsKICAgIGZvcig7IGkgPCBzaXplOyBpKyspY2xvbmVkW2ldID0ga2xhc3MgPT0gJ1N0cmluZycKICAgICAgPyB0aGlzLmNoYXJBdChzdGFydCArIGkpCiAgICAgIDogdGhpc1tzdGFydCArIGldOwogICAgcmV0dXJuIGNsb25lZDsKICB9Cn0pOwp9LHsiLi9fY29mIjoxOCwiLi9fZXhwb3J0IjozMiwiLi9fZmFpbHMiOjM0LCIuL19odG1sIjo0MSwiLi9fdG8taW5kZXgiOjEwNSwiLi9fdG8tbGVuZ3RoIjoxMDh9XSwxMzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsICRzb21lICAgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoMyk7CgokZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoW10uc29tZSwgdHJ1ZSksICdBcnJheScsIHsKICAvLyAyMi4xLjMuMjMgLyAxNS40LjQuMTcgQXJyYXkucHJvdG90eXBlLnNvbWUoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKICBzb21lOiBmdW5jdGlvbiBzb21lKGNhbGxiYWNrZm4gLyogLCB0aGlzQXJnICovKXsKICAgIHJldHVybiAkc29tZSh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHNbMV0pOwogIH0KfSk7Cn0seyIuL19hcnJheS1tZXRob2RzIjoxMiwiLi9fZXhwb3J0IjozMiwiLi9fc3RyaWN0LW1ldGhvZCI6OTZ9XSwxNDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciAkZXhwb3J0ICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpCiAgLCB0b09iamVjdCAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgZmFpbHMgICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICwgJHNvcnQgICAgID0gW10uc29ydAogICwgdGVzdCAgICAgID0gWzEsIDIsIDNdOwoKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoZmFpbHMoZnVuY3Rpb24oKXsKICAvLyBJRTgtCiAgdGVzdC5zb3J0KHVuZGVmaW5lZCk7Cn0pIHx8ICFmYWlscyhmdW5jdGlvbigpewogIC8vIFY4IGJ1ZwogIHRlc3Quc29ydChudWxsKTsKICAvLyBPbGQgV2ViS2l0Cn0pIHx8ICFyZXF1aXJlKCcuL19zdHJpY3QtbWV0aG9kJykoJHNvcnQpKSwgJ0FycmF5JywgewogIC8vIDIyLjEuMy4yNSBBcnJheS5wcm90b3R5cGUuc29ydChjb21wYXJlZm4pCiAgc29ydDogZnVuY3Rpb24gc29ydChjb21wYXJlZm4pewogICAgcmV0dXJuIGNvbXBhcmVmbiA9PT0gdW5kZWZpbmVkCiAgICAgID8gJHNvcnQuY2FsbCh0b09iamVjdCh0aGlzKSkKICAgICAgOiAkc29ydC5jYWxsKHRvT2JqZWN0KHRoaXMpLCBhRnVuY3Rpb24oY29tcGFyZWZuKSk7CiAgfQp9KTsKfSx7Ii4vX2EtZnVuY3Rpb24iOjMsIi4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzIjozNCwiLi9fc3RyaWN0LW1ldGhvZCI6OTYsIi4vX3RvLW9iamVjdCI6MTA5fV0sMTQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi9fc2V0LXNwZWNpZXMnKSgnQXJyYXknKTsKfSx7Ii4vX3NldC1zcGVjaWVzIjo5MX1dLDE0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjMuMy4xIC8gMTUuOS40LjQgRGF0ZS5ub3coKQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdEYXRlJywge25vdzogZnVuY3Rpb24oKXsgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOyB9fSk7Cn0seyIuL19leHBvcnQiOjMyfV0sMTQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyAyMC4zLjQuMzYgLyAxNS45LjUuNDMgRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcoKQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBmYWlscyAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICwgZ2V0VGltZSA9IERhdGUucHJvdG90eXBlLmdldFRpbWU7Cgp2YXIgbHogPSBmdW5jdGlvbihudW0pewogIHJldHVybiBudW0gPiA5ID8gbnVtIDogJzAnICsgbnVtOwp9OwoKLy8gUGhhbnRvbUpTIC8gb2xkIFdlYktpdCBoYXMgYSBicm9rZW4gaW1wbGVtZW50YXRpb25zCiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKGZhaWxzKGZ1bmN0aW9uKCl7CiAgcmV0dXJuIG5ldyBEYXRlKC01ZTEzIC0gMSkudG9JU09TdHJpbmcoKSAhPSAnMDM4NS0wNy0yNVQwNzowNjozOS45OTlaJzsKfSkgfHwgIWZhaWxzKGZ1bmN0aW9uKCl7CiAgbmV3IERhdGUoTmFOKS50b0lTT1N0cmluZygpOwp9KSksICdEYXRlJywgewogIHRvSVNPU3RyaW5nOiBmdW5jdGlvbiB0b0lTT1N0cmluZygpewogICAgaWYoIWlzRmluaXRlKGdldFRpbWUuY2FsbCh0aGlzKSkpdGhyb3cgUmFuZ2VFcnJvcignSW52YWxpZCB0aW1lIHZhbHVlJyk7CiAgICB2YXIgZCA9IHRoaXMKICAgICAgLCB5ID0gZC5nZXRVVENGdWxsWWVhcigpCiAgICAgICwgbSA9IGQuZ2V0VVRDTWlsbGlzZWNvbmRzKCkKICAgICAgLCBzID0geSA8IDAgPyAnLScgOiB5ID4gOTk5OSA/ICcrJyA6ICcnOwogICAgcmV0dXJuIHMgKyAoJzAwMDAwJyArIE1hdGguYWJzKHkpKS5zbGljZShzID8gLTYgOiAtNCkgKwogICAgICAnLScgKyBseihkLmdldFVUQ01vbnRoKCkgKyAxKSArICctJyArIGx6KGQuZ2V0VVRDRGF0ZSgpKSArCiAgICAgICdUJyArIGx6KGQuZ2V0VVRDSG91cnMoKSkgKyAnOicgKyBseihkLmdldFVUQ01pbnV0ZXMoKSkgKwogICAgICAnOicgKyBseihkLmdldFVUQ1NlY29uZHMoKSkgKyAnLicgKyAobSA+IDk5ID8gbSA6ICcwJyArIGx6KG0pKSArICdaJzsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9fZmFpbHMiOjM0fV0sMTQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgJGV4cG9ydCAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgdG9PYmplY3QgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgdG9QcmltaXRpdmUgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKTsKCiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpewogIHJldHVybiBuZXcgRGF0ZShOYU4pLnRvSlNPTigpICE9PSBudWxsIHx8IERhdGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHt0b0lTT1N0cmluZzogZnVuY3Rpb24oKXsgcmV0dXJuIDE7IH19KSAhPT0gMTsKfSksICdEYXRlJywgewogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKGtleSl7CiAgICB2YXIgTyAgPSB0b09iamVjdCh0aGlzKQogICAgICAsIHB2ID0gdG9QcmltaXRpdmUoTyk7CiAgICByZXR1cm4gdHlwZW9mIHB2ID09ICdudW1iZXInICYmICFpc0Zpbml0ZShwdikgPyBudWxsIDogTy50b0lTT1N0cmluZygpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19mYWlscyI6MzQsIi4vX3RvLW9iamVjdCI6MTA5LCIuL190by1wcmltaXRpdmUiOjExMH1dLDE0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBUT19QUklNSVRJVkUgPSByZXF1aXJlKCcuL193a3MnKSgndG9QcmltaXRpdmUnKQogICwgcHJvdG8gICAgICAgID0gRGF0ZS5wcm90b3R5cGU7CgppZighKFRPX1BSSU1JVElWRSBpbiBwcm90bykpcmVxdWlyZSgnLi9faGlkZScpKHByb3RvLCBUT19QUklNSVRJVkUsIHJlcXVpcmUoJy4vX2RhdGUtdG8tcHJpbWl0aXZlJykpOwp9LHsiLi9fZGF0ZS10by1wcmltaXRpdmUiOjI2LCIuL19oaWRlIjo0MCwiLi9fd2tzIjoxMTd9XSwxNDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgRGF0ZVByb3RvICAgID0gRGF0ZS5wcm90b3R5cGUKICAsIElOVkFMSURfREFURSA9ICdJbnZhbGlkIERhdGUnCiAgLCBUT19TVFJJTkcgICAgPSAndG9TdHJpbmcnCiAgLCAkdG9TdHJpbmcgICAgPSBEYXRlUHJvdG9bVE9fU1RSSU5HXQogICwgZ2V0VGltZSAgICAgID0gRGF0ZVByb3RvLmdldFRpbWU7CmlmKG5ldyBEYXRlKE5hTikgKyAnJyAhPSBJTlZBTElEX0RBVEUpewogIHJlcXVpcmUoJy4vX3JlZGVmaW5lJykoRGF0ZVByb3RvLCBUT19TVFJJTkcsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7CiAgICB2YXIgdmFsdWUgPSBnZXRUaW1lLmNhbGwodGhpcyk7CiAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gJHRvU3RyaW5nLmNhbGwodGhpcykgOiBJTlZBTElEX0RBVEU7CiAgfSk7Cn0KfSx7Ii4vX3JlZGVmaW5lIjo4N31dLDE0NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDE5LjIuMy4yIC8gMTUuMy40LjUgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQodGhpc0FyZywgYXJncy4uLikKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5QLCAnRnVuY3Rpb24nLCB7YmluZDogcmVxdWlyZSgnLi9fYmluZCcpfSk7Cn0seyIuL19iaW5kIjoxNiwiLi9fZXhwb3J0IjozMn1dLDE0ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIGlzT2JqZWN0ICAgICAgID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIGdldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpCiAgLCBIQVNfSU5TVEFOQ0UgICA9IHJlcXVpcmUoJy4vX3drcycpKCdoYXNJbnN0YW5jZScpCiAgLCBGdW5jdGlvblByb3RvICA9IEZ1bmN0aW9uLnByb3RvdHlwZTsKLy8gMTkuMi4zLjYgRnVuY3Rpb24ucHJvdG90eXBlW0BAaGFzSW5zdGFuY2VdKFYpCmlmKCEoSEFTX0lOU1RBTkNFIGluIEZ1bmN0aW9uUHJvdG8pKXJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmYoRnVuY3Rpb25Qcm90bywgSEFTX0lOU1RBTkNFLCB7dmFsdWU6IGZ1bmN0aW9uKE8pewogIGlmKHR5cGVvZiB0aGlzICE9ICdmdW5jdGlvbicgfHwgIWlzT2JqZWN0KE8pKXJldHVybiBmYWxzZTsKICBpZighaXNPYmplY3QodGhpcy5wcm90b3R5cGUpKXJldHVybiBPIGluc3RhbmNlb2YgdGhpczsKICAvLyBmb3IgZW52aXJvbm1lbnQgdy9vIG5hdGl2ZSBgQEBoYXNJbnN0YW5jZWAgbG9naWMgZW5vdWdoIGBpbnN0YW5jZW9mYCwgYnV0IGFkZCB0aGlzOgogIHdoaWxlKE8gPSBnZXRQcm90b3R5cGVPZihPKSlpZih0aGlzLnByb3RvdHlwZSA9PT0gTylyZXR1cm4gdHJ1ZTsKICByZXR1cm4gZmFsc2U7Cn19KTsKfSx7Ii4vX2lzLW9iamVjdCI6NDksIi4vX29iamVjdC1kcCI6NjcsIi4vX29iamVjdC1ncG8iOjc0LCIuL193a3MiOjExN31dLDE0OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBkUCAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZgogICwgY3JlYXRlRGVzYyA9IHJlcXVpcmUoJy4vX3Byb3BlcnR5LWRlc2MnKQogICwgaGFzICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpCiAgLCBGUHJvdG8gICAgID0gRnVuY3Rpb24ucHJvdG90eXBlCiAgLCBuYW1lUkUgICAgID0gL15ccypmdW5jdGlvbiAoW14gKF0qKS8KICAsIE5BTUUgICAgICAgPSAnbmFtZSc7Cgp2YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbigpewogIHJldHVybiB0cnVlOwp9OwoKLy8gMTkuMi40LjIgbmFtZQpOQU1FIGluIEZQcm90byB8fCByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpICYmIGRQKEZQcm90bywgTkFNRSwgewogIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICBnZXQ6IGZ1bmN0aW9uKCl7CiAgICB0cnkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgICAsIG5hbWUgPSAoJycgKyB0aGF0KS5tYXRjaChuYW1lUkUpWzFdOwogICAgICBoYXModGhhdCwgTkFNRSkgfHwgIWlzRXh0ZW5zaWJsZSh0aGF0KSB8fCBkUCh0aGF0LCBOQU1FLCBjcmVhdGVEZXNjKDUsIG5hbWUpKTsKICAgICAgcmV0dXJuIG5hbWU7CiAgICB9IGNhdGNoKGUpewogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfQp9KTsKfSx7Ii4vX2Rlc2NyaXB0b3JzIjoyOCwiLi9faGFzIjozOSwiLi9fb2JqZWN0LWRwIjo2NywiLi9fcHJvcGVydHktZGVzYyI6ODV9XSwxNTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBzdHJvbmcgPSByZXF1aXJlKCcuL19jb2xsZWN0aW9uLXN0cm9uZycpOwoKLy8gMjMuMSBNYXAgT2JqZWN0cwptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vX2NvbGxlY3Rpb24nKSgnTWFwJywgZnVuY3Rpb24oZ2V0KXsKICByZXR1cm4gZnVuY3Rpb24gTWFwKCl7IHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOyB9Owp9LCB7CiAgLy8gMjMuMS4zLjYgTWFwLnByb3RvdHlwZS5nZXQoa2V5KQogIGdldDogZnVuY3Rpb24gZ2V0KGtleSl7CiAgICB2YXIgZW50cnkgPSBzdHJvbmcuZ2V0RW50cnkodGhpcywga2V5KTsKICAgIHJldHVybiBlbnRyeSAmJiBlbnRyeS52OwogIH0sCiAgLy8gMjMuMS4zLjkgTWFwLnByb3RvdHlwZS5zZXQoa2V5LCB2YWx1ZSkKICBzZXQ6IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKXsKICAgIHJldHVybiBzdHJvbmcuZGVmKHRoaXMsIGtleSA9PT0gMCA/IDAgOiBrZXksIHZhbHVlKTsKICB9Cn0sIHN0cm9uZywgdHJ1ZSk7Cn0seyIuL19jb2xsZWN0aW9uIjoyMiwiLi9fY29sbGVjdGlvbi1zdHJvbmciOjE5fV0sMTUxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjAuMi4yLjMgTWF0aC5hY29zaCh4KQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBsb2cxcCAgID0gcmVxdWlyZSgnLi9fbWF0aC1sb2cxcCcpCiAgLCBzcXJ0ICAgID0gTWF0aC5zcXJ0CiAgLCAkYWNvc2ggID0gTWF0aC5hY29zaDsKCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogISgkYWNvc2gKICAvLyBWOCBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zNTA5CiAgJiYgTWF0aC5mbG9vcigkYWNvc2goTnVtYmVyLk1BWF9WQUxVRSkpID09IDcxMAogIC8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hY29zaChJbmZpbml0eSkgLT4gTmFOIAogICYmICRhY29zaChJbmZpbml0eSkgPT0gSW5maW5pdHkKKSwgJ01hdGgnLCB7CiAgYWNvc2g6IGZ1bmN0aW9uIGFjb3NoKHgpewogICAgcmV0dXJuICh4ID0gK3gpIDwgMSA/IE5hTiA6IHggPiA5NDkwNjI2NS42MjQyNTE1NgogICAgICA/IE1hdGgubG9nKHgpICsgTWF0aC5MTjIKICAgICAgOiBsb2cxcCh4IC0gMSArIHNxcnQoeCAtIDEpICogc3FydCh4ICsgMSkpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19tYXRoLWxvZzFwIjo2MH1dLDE1MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi41IE1hdGguYXNpbmgoeCkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJGFzaW5oICA9IE1hdGguYXNpbmg7CgpmdW5jdGlvbiBhc2luaCh4KXsKICByZXR1cm4gIWlzRmluaXRlKHggPSAreCkgfHwgeCA9PSAwID8geCA6IHggPCAwID8gLWFzaW5oKC14KSA6IE1hdGgubG9nKHggKyBNYXRoLnNxcnQoeCAqIHggKyAxKSk7Cn0KCi8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hc2luaCgwKSAtPiAtMCAKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKCRhc2luaCAmJiAxIC8gJGFzaW5oKDApID4gMCksICdNYXRoJywge2FzaW5oOiBhc2luaH0pOwp9LHsiLi9fZXhwb3J0IjozMn1dLDE1MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi43IE1hdGguYXRhbmgoeCkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJGF0YW5oICA9IE1hdGguYXRhbmg7CgovLyBUb3IgQnJvd3NlciBidWc6IE1hdGguYXRhbmgoLTApIC0+IDAgCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogISgkYXRhbmggJiYgMSAvICRhdGFuaCgtMCkgPCAwKSwgJ01hdGgnLCB7CiAgYXRhbmg6IGZ1bmN0aW9uIGF0YW5oKHgpewogICAgcmV0dXJuICh4ID0gK3gpID09IDAgPyB4IDogTWF0aC5sb2coKDEgKyB4KSAvICgxIC0geCkpIC8gMjsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMn1dLDE1NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi45IE1hdGguY2JydCh4KQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBzaWduICAgID0gcmVxdWlyZSgnLi9fbWF0aC1zaWduJyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7CiAgY2JydDogZnVuY3Rpb24gY2JydCh4KXsKICAgIHJldHVybiBzaWduKHggPSAreCkgKiBNYXRoLnBvdyhNYXRoLmFicyh4KSwgMSAvIDMpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19tYXRoLXNpZ24iOjYxfV0sMTU1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjAuMi4yLjExIE1hdGguY2x6MzIoeCkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHsKICBjbHozMjogZnVuY3Rpb24gY2x6MzIoeCl7CiAgICByZXR1cm4gKHggPj4+PSAwKSA/IDMxIC0gTWF0aC5mbG9vcihNYXRoLmxvZyh4ICsgMC41KSAqIE1hdGguTE9HMkUpIDogMzI7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzJ9XSwxNTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMC4yLjIuMTIgTWF0aC5jb3NoKHgpCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGV4cCAgICAgPSBNYXRoLmV4cDsKCiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHsKICBjb3NoOiBmdW5jdGlvbiBjb3NoKHgpewogICAgcmV0dXJuIChleHAoeCA9ICt4KSArIGV4cCgteCkpIC8gMjsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMn1dLDE1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi4xNCBNYXRoLmV4cG0xKHgpCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsICRleHBtMSAgPSByZXF1aXJlKCcuL19tYXRoLWV4cG0xJyk7CgokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICgkZXhwbTEgIT0gTWF0aC5leHBtMSksICdNYXRoJywge2V4cG0xOiAkZXhwbTF9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX21hdGgtZXhwbTEiOjU5fV0sMTU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjAuMi4yLjE2IE1hdGguZnJvdW5kKHgpCnZhciAkZXhwb3J0ICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgc2lnbiAgICAgID0gcmVxdWlyZSgnLi9fbWF0aC1zaWduJykKICAsIHBvdyAgICAgICA9IE1hdGgucG93CiAgLCBFUFNJTE9OICAgPSBwb3coMiwgLTUyKQogICwgRVBTSUxPTjMyID0gcG93KDIsIC0yMykKICAsIE1BWDMyICAgICA9IHBvdygyLCAxMjcpICogKDIgLSBFUFNJTE9OMzIpCiAgLCBNSU4zMiAgICAgPSBwb3coMiwgLTEyNik7Cgp2YXIgcm91bmRUaWVzVG9FdmVuID0gZnVuY3Rpb24obil7CiAgcmV0dXJuIG4gKyAxIC8gRVBTSUxPTiAtIDEgLyBFUFNJTE9OOwp9OwoKCiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHsKICBmcm91bmQ6IGZ1bmN0aW9uIGZyb3VuZCh4KXsKICAgIHZhciAkYWJzICA9IE1hdGguYWJzKHgpCiAgICAgICwgJHNpZ24gPSBzaWduKHgpCiAgICAgICwgYSwgcmVzdWx0OwogICAgaWYoJGFicyA8IE1JTjMyKXJldHVybiAkc2lnbiAqIHJvdW5kVGllc1RvRXZlbigkYWJzIC8gTUlOMzIgLyBFUFNJTE9OMzIpICogTUlOMzIgKiBFUFNJTE9OMzI7CiAgICBhID0gKDEgKyBFUFNJTE9OMzIgLyBFUFNJTE9OKSAqICRhYnM7CiAgICByZXN1bHQgPSBhIC0gKGEgLSAkYWJzKTsKICAgIGlmKHJlc3VsdCA+IE1BWDMyIHx8IHJlc3VsdCAhPSByZXN1bHQpcmV0dXJuICRzaWduICogSW5maW5pdHk7CiAgICByZXR1cm4gJHNpZ24gKiByZXN1bHQ7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX21hdGgtc2lnbiI6NjF9XSwxNTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMC4yLjIuMTcgTWF0aC5oeXBvdChbdmFsdWUxWywgdmFsdWUyWywg4oCmIF1dXSkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgYWJzICAgICA9IE1hdGguYWJzOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywgewogIGh5cG90OiBmdW5jdGlvbiBoeXBvdCh2YWx1ZTEsIHZhbHVlMil7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICAgIHZhciBzdW0gID0gMAogICAgICAsIGkgICAgPSAwCiAgICAgICwgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGgKICAgICAgLCBsYXJnID0gMAogICAgICAsIGFyZywgZGl2OwogICAgd2hpbGUoaSA8IGFMZW4pewogICAgICBhcmcgPSBhYnMoYXJndW1lbnRzW2krK10pOwogICAgICBpZihsYXJnIDwgYXJnKXsKICAgICAgICBkaXYgID0gbGFyZyAvIGFyZzsKICAgICAgICBzdW0gID0gc3VtICogZGl2ICogZGl2ICsgMTsKICAgICAgICBsYXJnID0gYXJnOwogICAgICB9IGVsc2UgaWYoYXJnID4gMCl7CiAgICAgICAgZGl2ICA9IGFyZyAvIGxhcmc7CiAgICAgICAgc3VtICs9IGRpdiAqIGRpdjsKICAgICAgfSBlbHNlIHN1bSArPSBhcmc7CiAgICB9CiAgICByZXR1cm4gbGFyZyA9PT0gSW5maW5pdHkgPyBJbmZpbml0eSA6IGxhcmcgKiBNYXRoLnNxcnQoc3VtKTsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMn1dLDE2MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi4xOCBNYXRoLmltdWwoeCwgeSkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJGltdWwgICA9IE1hdGguaW11bDsKCi8vIHNvbWUgV2ViS2l0IHZlcnNpb25zIGZhaWxzIHdpdGggYmlnIG51bWJlcnMsIHNvbWUgaGFzIHdyb25nIGFyaXR5CiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpewogIHJldHVybiAkaW11bCgweGZmZmZmZmZmLCA1KSAhPSAtNSB8fCAkaW11bC5sZW5ndGggIT0gMjsKfSksICdNYXRoJywgewogIGltdWw6IGZ1bmN0aW9uIGltdWwoeCwgeSl7CiAgICB2YXIgVUlOVDE2ID0gMHhmZmZmCiAgICAgICwgeG4gPSAreAogICAgICAsIHluID0gK3kKICAgICAgLCB4bCA9IFVJTlQxNiAmIHhuCiAgICAgICwgeWwgPSBVSU5UMTYgJiB5bjsKICAgIHJldHVybiAwIHwgeGwgKiB5bCArICgoVUlOVDE2ICYgeG4gPj4+IDE2KSAqIHlsICsgeGwgKiAoVUlOVDE2ICYgeW4gPj4+IDE2KSA8PCAxNiA+Pj4gMCk7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzIjozNH1dLDE2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi4yMSBNYXRoLmxvZzEwKHgpCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7CiAgbG9nMTA6IGZ1bmN0aW9uIGxvZzEwKHgpewogICAgcmV0dXJuIE1hdGgubG9nKHgpIC8gTWF0aC5MTjEwOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyfV0sMTYyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjAuMi4yLjIwIE1hdGgubG9nMXAoeCkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHtsb2cxcDogcmVxdWlyZSgnLi9fbWF0aC1sb2cxcCcpfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19tYXRoLWxvZzFwIjo2MH1dLDE2MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi4yMiBNYXRoLmxvZzIoeCkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHsKICBsb2cyOiBmdW5jdGlvbiBsb2cyKHgpewogICAgcmV0dXJuIE1hdGgubG9nKHgpIC8gTWF0aC5MTjI7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzJ9XSwxNjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMC4yLjIuMjggTWF0aC5zaWduKHgpCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7c2lnbjogcmVxdWlyZSgnLi9fbWF0aC1zaWduJyl9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX21hdGgtc2lnbiI6NjF9XSwxNjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMC4yLjIuMzAgTWF0aC5zaW5oKHgpCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGV4cG0xICAgPSByZXF1aXJlKCcuL19tYXRoLWV4cG0xJykKICAsIGV4cCAgICAgPSBNYXRoLmV4cDsKCi8vIFY4IG5lYXIgQ2hyb21pdW0gMzggaGFzIGEgcHJvYmxlbSB3aXRoIHZlcnkgc21hbGwgbnVtYmVycwokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIHJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXsKICByZXR1cm4gIU1hdGguc2luaCgtMmUtMTcpICE9IC0yZS0xNzsKfSksICdNYXRoJywgewogIHNpbmg6IGZ1bmN0aW9uIHNpbmgoeCl7CiAgICByZXR1cm4gTWF0aC5hYnMoeCA9ICt4KSA8IDEKICAgICAgPyAoZXhwbTEoeCkgLSBleHBtMSgteCkpIC8gMgogICAgICA6IChleHAoeCAtIDEpIC0gZXhwKC14IC0gMSkpICogKE1hdGguRSAvIDIpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19mYWlscyI6MzQsIi4vX21hdGgtZXhwbTEiOjU5fV0sMTY2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjAuMi4yLjMzIE1hdGgudGFuaCh4KQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBleHBtMSAgID0gcmVxdWlyZSgnLi9fbWF0aC1leHBtMScpCiAgLCBleHAgICAgID0gTWF0aC5leHA7CgokZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7CiAgdGFuaDogZnVuY3Rpb24gdGFuaCh4KXsKICAgIHZhciBhID0gZXhwbTEoeCA9ICt4KQogICAgICAsIGIgPSBleHBtMSgteCk7CiAgICByZXR1cm4gYSA9PSBJbmZpbml0eSA/IDEgOiBiID09IEluZmluaXR5ID8gLTEgOiAoYSAtIGIpIC8gKGV4cCh4KSArIGV4cCgteCkpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19tYXRoLWV4cG0xIjo1OX1dLDE2NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjIuMi4zNCBNYXRoLnRydW5jKHgpCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7CiAgdHJ1bmM6IGZ1bmN0aW9uIHRydW5jKGl0KXsKICAgIHJldHVybiAoaXQgPiAwID8gTWF0aC5mbG9vciA6IE1hdGguY2VpbCkoaXQpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyfV0sMTY4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgZ2xvYmFsICAgICAgICAgICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKQogICwgaGFzICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKQogICwgY29mICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jb2YnKQogICwgaW5oZXJpdElmUmVxdWlyZWQgPSByZXF1aXJlKCcuL19pbmhlcml0LWlmLXJlcXVpcmVkJykKICAsIHRvUHJpbWl0aXZlICAgICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJykKICAsIGZhaWxzICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICwgZ09QTiAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wbicpLmYKICAsIGdPUEQgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKS5mCiAgLCBkUCAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmYKICAsICR0cmltICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fc3RyaW5nLXRyaW0nKS50cmltCiAgLCBOVU1CRVIgICAgICAgICAgICA9ICdOdW1iZXInCiAgLCAkTnVtYmVyICAgICAgICAgICA9IGdsb2JhbFtOVU1CRVJdCiAgLCBCYXNlICAgICAgICAgICAgICA9ICROdW1iZXIKICAsIHByb3RvICAgICAgICAgICAgID0gJE51bWJlci5wcm90b3R5cGUKICAvLyBPcGVyYSB+MTIgaGFzIGJyb2tlbiBPYmplY3QjdG9TdHJpbmcKICAsIEJST0tFTl9DT0YgICAgICAgID0gY29mKHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKShwcm90bykpID09IE5VTUJFUgogICwgVFJJTSAgICAgICAgICAgICAgPSAndHJpbScgaW4gU3RyaW5nLnByb3RvdHlwZTsKCi8vIDcuMS4zIFRvTnVtYmVyKGFyZ3VtZW50KQp2YXIgdG9OdW1iZXIgPSBmdW5jdGlvbihhcmd1bWVudCl7CiAgdmFyIGl0ID0gdG9QcmltaXRpdmUoYXJndW1lbnQsIGZhbHNlKTsKICBpZih0eXBlb2YgaXQgPT0gJ3N0cmluZycgJiYgaXQubGVuZ3RoID4gMil7CiAgICBpdCA9IFRSSU0gPyBpdC50cmltKCkgOiAkdHJpbShpdCwgMyk7CiAgICB2YXIgZmlyc3QgPSBpdC5jaGFyQ29kZUF0KDApCiAgICAgICwgdGhpcmQsIHJhZGl4LCBtYXhDb2RlOwogICAgaWYoZmlyc3QgPT09IDQzIHx8IGZpcnN0ID09PSA0NSl7CiAgICAgIHRoaXJkID0gaXQuY2hhckNvZGVBdCgyKTsKICAgICAgaWYodGhpcmQgPT09IDg4IHx8IHRoaXJkID09PSAxMjApcmV0dXJuIE5hTjsgLy8gTnVtYmVyKCcrMHgxJykgc2hvdWxkIGJlIE5hTiwgb2xkIFY4IGZpeAogICAgfSBlbHNlIGlmKGZpcnN0ID09PSA0OCl7CiAgICAgIHN3aXRjaChpdC5jaGFyQ29kZUF0KDEpKXsKICAgICAgICBjYXNlIDY2IDogY2FzZSA5OCAgOiByYWRpeCA9IDI7IG1heENvZGUgPSA0OTsgYnJlYWs7IC8vIGZhc3QgZXF1YWwgL14wYlswMV0rJC9pCiAgICAgICAgY2FzZSA3OSA6IGNhc2UgMTExIDogcmFkaXggPSA4OyBtYXhDb2RlID0gNTU7IGJyZWFrOyAvLyBmYXN0IGVxdWFsIC9eMG9bMC03XSskL2kKICAgICAgICBkZWZhdWx0IDogcmV0dXJuICtpdDsKICAgICAgfQogICAgICBmb3IodmFyIGRpZ2l0cyA9IGl0LnNsaWNlKDIpLCBpID0gMCwgbCA9IGRpZ2l0cy5sZW5ndGgsIGNvZGU7IGkgPCBsOyBpKyspewogICAgICAgIGNvZGUgPSBkaWdpdHMuY2hhckNvZGVBdChpKTsKICAgICAgICAvLyBwYXJzZUludCBwYXJzZXMgYSBzdHJpbmcgdG8gYSBmaXJzdCB1bmF2YWlsYWJsZSBzeW1ib2wKICAgICAgICAvLyBidXQgVG9OdW1iZXIgc2hvdWxkIHJldHVybiBOYU4gaWYgYSBzdHJpbmcgY29udGFpbnMgdW5hdmFpbGFibGUgc3ltYm9scwogICAgICAgIGlmKGNvZGUgPCA0OCB8fCBjb2RlID4gbWF4Q29kZSlyZXR1cm4gTmFOOwogICAgICB9IHJldHVybiBwYXJzZUludChkaWdpdHMsIHJhZGl4KTsKICAgIH0KICB9IHJldHVybiAraXQ7Cn07CgppZighJE51bWJlcignIDBvMScpIHx8ICEkTnVtYmVyKCcwYjEnKSB8fCAkTnVtYmVyKCcrMHgxJykpewogICROdW1iZXIgPSBmdW5jdGlvbiBOdW1iZXIodmFsdWUpewogICAgdmFyIGl0ID0gYXJndW1lbnRzLmxlbmd0aCA8IDEgPyAwIDogdmFsdWUKICAgICAgLCB0aGF0ID0gdGhpczsKICAgIHJldHVybiB0aGF0IGluc3RhbmNlb2YgJE51bWJlcgogICAgICAvLyBjaGVjayBvbiAxLi5jb25zdHJ1Y3Rvcihmb28pIGNhc2UKICAgICAgJiYgKEJST0tFTl9DT0YgPyBmYWlscyhmdW5jdGlvbigpeyBwcm90by52YWx1ZU9mLmNhbGwodGhhdCk7IH0pIDogY29mKHRoYXQpICE9IE5VTUJFUikKICAgICAgICA/IGluaGVyaXRJZlJlcXVpcmVkKG5ldyBCYXNlKHRvTnVtYmVyKGl0KSksIHRoYXQsICROdW1iZXIpIDogdG9OdW1iZXIoaXQpOwogIH07CiAgZm9yKHZhciBrZXlzID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSA/IGdPUE4oQmFzZSkgOiAoCiAgICAvLyBFUzM6CiAgICAnTUFYX1ZBTFVFLE1JTl9WQUxVRSxOYU4sTkVHQVRJVkVfSU5GSU5JVFksUE9TSVRJVkVfSU5GSU5JVFksJyArCiAgICAvLyBFUzYgKGluIGNhc2UsIGlmIG1vZHVsZXMgd2l0aCBFUzYgTnVtYmVyIHN0YXRpY3MgcmVxdWlyZWQgYmVmb3JlKToKICAgICdFUFNJTE9OLGlzRmluaXRlLGlzSW50ZWdlcixpc05hTixpc1NhZmVJbnRlZ2VyLE1BWF9TQUZFX0lOVEVHRVIsJyArCiAgICAnTUlOX1NBRkVfSU5URUdFUixwYXJzZUZsb2F0LHBhcnNlSW50LGlzSW50ZWdlcicKICApLnNwbGl0KCcsJyksIGogPSAwLCBrZXk7IGtleXMubGVuZ3RoID4gajsgaisrKXsKICAgIGlmKGhhcyhCYXNlLCBrZXkgPSBrZXlzW2pdKSAmJiAhaGFzKCROdW1iZXIsIGtleSkpewogICAgICBkUCgkTnVtYmVyLCBrZXksIGdPUEQoQmFzZSwga2V5KSk7CiAgICB9CiAgfQogICROdW1iZXIucHJvdG90eXBlID0gcHJvdG87CiAgcHJvdG8uY29uc3RydWN0b3IgPSAkTnVtYmVyOwogIHJlcXVpcmUoJy4vX3JlZGVmaW5lJykoZ2xvYmFsLCBOVU1CRVIsICROdW1iZXIpOwp9Cn0seyIuL19jb2YiOjE4LCIuL19kZXNjcmlwdG9ycyI6MjgsIi4vX2ZhaWxzIjozNCwiLi9fZ2xvYmFsIjozOCwiLi9faGFzIjozOSwiLi9faW5oZXJpdC1pZi1yZXF1aXJlZCI6NDMsIi4vX29iamVjdC1jcmVhdGUiOjY2LCIuL19vYmplY3QtZHAiOjY3LCIuL19vYmplY3QtZ29wZCI6NzAsIi4vX29iamVjdC1nb3BuIjo3MiwiLi9fcmVkZWZpbmUiOjg3LCIuL19zdHJpbmctdHJpbSI6MTAyLCIuL190by1wcmltaXRpdmUiOjExMH1dLDE2OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjEuMi4xIE51bWJlci5FUFNJTE9OCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHtFUFNJTE9OOiBNYXRoLnBvdygyLCAtNTIpfSk7Cn0seyIuL19leHBvcnQiOjMyfV0sMTcwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjAuMS4yLjIgTnVtYmVyLmlzRmluaXRlKG51bWJlcikKdmFyICRleHBvcnQgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBfaXNGaW5pdGUgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5pc0Zpbml0ZTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnTnVtYmVyJywgewogIGlzRmluaXRlOiBmdW5jdGlvbiBpc0Zpbml0ZShpdCl7CiAgICByZXR1cm4gdHlwZW9mIGl0ID09ICdudW1iZXInICYmIF9pc0Zpbml0ZShpdCk7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX2dsb2JhbCI6Mzh9XSwxNzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMC4xLjIuMyBOdW1iZXIuaXNJbnRlZ2VyKG51bWJlcikKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnTnVtYmVyJywge2lzSW50ZWdlcjogcmVxdWlyZSgnLi9faXMtaW50ZWdlcicpfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19pcy1pbnRlZ2VyIjo0OH1dLDE3MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjEuMi40IE51bWJlci5pc05hTihudW1iZXIpCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHsKICBpc05hTjogZnVuY3Rpb24gaXNOYU4obnVtYmVyKXsKICAgIHJldHVybiBudW1iZXIgIT0gbnVtYmVyOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyfV0sMTczOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjAuMS4yLjUgTnVtYmVyLmlzU2FmZUludGVnZXIobnVtYmVyKQp2YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGlzSW50ZWdlciA9IHJlcXVpcmUoJy4vX2lzLWludGVnZXInKQogICwgYWJzICAgICAgID0gTWF0aC5hYnM7CgokZXhwb3J0KCRleHBvcnQuUywgJ051bWJlcicsIHsKICBpc1NhZmVJbnRlZ2VyOiBmdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKG51bWJlcil7CiAgICByZXR1cm4gaXNJbnRlZ2VyKG51bWJlcikgJiYgYWJzKG51bWJlcikgPD0gMHgxZmZmZmZmZmZmZmZmZjsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9faXMtaW50ZWdlciI6NDh9XSwxNzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMC4xLjIuNiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUgp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7TUFYX1NBRkVfSU5URUdFUjogMHgxZmZmZmZmZmZmZmZmZn0pOwp9LHsiLi9fZXhwb3J0IjozMn1dLDE3NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIwLjEuMi4xMCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUgp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdOdW1iZXInLCB7TUlOX1NBRkVfSU5URUdFUjogLTB4MWZmZmZmZmZmZmZmZmZ9KTsKfSx7Ii4vX2V4cG9ydCI6MzJ9XSwxNzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgJGV4cG9ydCAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJHBhcnNlRmxvYXQgPSByZXF1aXJlKCcuL19wYXJzZS1mbG9hdCcpOwovLyAyMC4xLjIuMTIgTnVtYmVyLnBhcnNlRmxvYXQoc3RyaW5nKQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIChOdW1iZXIucGFyc2VGbG9hdCAhPSAkcGFyc2VGbG9hdCksICdOdW1iZXInLCB7cGFyc2VGbG9hdDogJHBhcnNlRmxvYXR9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX3BhcnNlLWZsb2F0Ijo4MX1dLDE3NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciAkZXhwb3J0ICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJHBhcnNlSW50ID0gcmVxdWlyZSgnLi9fcGFyc2UtaW50Jyk7Ci8vIDIwLjEuMi4xMyBOdW1iZXIucGFyc2VJbnQoc3RyaW5nLCByYWRpeCkKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoTnVtYmVyLnBhcnNlSW50ICE9ICRwYXJzZUludCksICdOdW1iZXInLCB7cGFyc2VJbnQ6ICRwYXJzZUludH0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9fcGFyc2UtaW50Ijo4Mn1dLDE3ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBhbkluc3RhbmNlICAgPSByZXF1aXJlKCcuL19hbi1pbnN0YW5jZScpCiAgLCB0b0ludGVnZXIgICAgPSByZXF1aXJlKCcuL190by1pbnRlZ2VyJykKICAsIGFOdW1iZXJWYWx1ZSA9IHJlcXVpcmUoJy4vX2EtbnVtYmVyLXZhbHVlJykKICAsIHJlcGVhdCAgICAgICA9IHJlcXVpcmUoJy4vX3N0cmluZy1yZXBlYXQnKQogICwgJHRvRml4ZWQgICAgID0gMS4udG9GaXhlZAogICwgZmxvb3IgICAgICAgID0gTWF0aC5mbG9vcgogICwgZGF0YSAgICAgICAgID0gWzAsIDAsIDAsIDAsIDAsIDBdCiAgLCBFUlJPUiAgICAgICAgPSAnTnVtYmVyLnRvRml4ZWQ6IGluY29ycmVjdCBpbnZvY2F0aW9uIScKICAsIFpFUk8gICAgICAgICA9ICcwJzsKCnZhciBtdWx0aXBseSA9IGZ1bmN0aW9uKG4sIGMpewogIHZhciBpICA9IC0xCiAgICAsIGMyID0gYzsKICB3aGlsZSgrK2kgPCA2KXsKICAgIGMyICs9IG4gKiBkYXRhW2ldOwogICAgZGF0YVtpXSA9IGMyICUgMWU3OwogICAgYzIgPSBmbG9vcihjMiAvIDFlNyk7CiAgfQp9Owp2YXIgZGl2aWRlID0gZnVuY3Rpb24obil7CiAgdmFyIGkgPSA2CiAgICAsIGMgPSAwOwogIHdoaWxlKC0taSA+PSAwKXsKICAgIGMgKz0gZGF0YVtpXTsKICAgIGRhdGFbaV0gPSBmbG9vcihjIC8gbik7CiAgICBjID0gKGMgJSBuKSAqIDFlNzsKICB9Cn07CnZhciBudW1Ub1N0cmluZyA9IGZ1bmN0aW9uKCl7CiAgdmFyIGkgPSA2CiAgICAsIHMgPSAnJzsKICB3aGlsZSgtLWkgPj0gMCl7CiAgICBpZihzICE9PSAnJyB8fCBpID09PSAwIHx8IGRhdGFbaV0gIT09IDApewogICAgICB2YXIgdCA9IFN0cmluZyhkYXRhW2ldKTsKICAgICAgcyA9IHMgPT09ICcnID8gdCA6IHMgKyByZXBlYXQuY2FsbChaRVJPLCA3IC0gdC5sZW5ndGgpICsgdDsKICAgIH0KICB9IHJldHVybiBzOwp9Owp2YXIgcG93ID0gZnVuY3Rpb24oeCwgbiwgYWNjKXsKICByZXR1cm4gbiA9PT0gMCA/IGFjYyA6IG4gJSAyID09PSAxID8gcG93KHgsIG4gLSAxLCBhY2MgKiB4KSA6IHBvdyh4ICogeCwgbiAvIDIsIGFjYyk7Cn07CnZhciBsb2cgPSBmdW5jdGlvbih4KXsKICB2YXIgbiAgPSAwCiAgICAsIHgyID0geDsKICB3aGlsZSh4MiA+PSA0MDk2KXsKICAgIG4gKz0gMTI7CiAgICB4MiAvPSA0MDk2OwogIH0KICB3aGlsZSh4MiA+PSAyKXsKICAgIG4gICs9IDE7CiAgICB4MiAvPSAyOwogIH0gcmV0dXJuIG47Cn07CgokZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICghISR0b0ZpeGVkICYmICgKICAwLjAwMDA4LnRvRml4ZWQoMykgIT09ICcwLjAwMCcgfHwKICAwLjkudG9GaXhlZCgwKSAhPT0gJzEnIHx8CiAgMS4yNTUudG9GaXhlZCgyKSAhPT0gJzEuMjUnIHx8CiAgMTAwMDAwMDAwMDAwMDAwMDEyOC4udG9GaXhlZCgwKSAhPT0gJzEwMDAwMDAwMDAwMDAwMDAxMjgnCikgfHwgIXJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXsKICAvLyBWOCB+IEFuZHJvaWQgNC4zLQogICR0b0ZpeGVkLmNhbGwoe30pOwp9KSksICdOdW1iZXInLCB7CiAgdG9GaXhlZDogZnVuY3Rpb24gdG9GaXhlZChmcmFjdGlvbkRpZ2l0cyl7CiAgICB2YXIgeCA9IGFOdW1iZXJWYWx1ZSh0aGlzLCBFUlJPUikKICAgICAgLCBmID0gdG9JbnRlZ2VyKGZyYWN0aW9uRGlnaXRzKQogICAgICAsIHMgPSAnJwogICAgICAsIG0gPSBaRVJPCiAgICAgICwgZSwgeiwgaiwgazsKICAgIGlmKGYgPCAwIHx8IGYgPiAyMCl0aHJvdyBSYW5nZUVycm9yKEVSUk9SKTsKICAgIGlmKHggIT0geClyZXR1cm4gJ05hTic7CiAgICBpZih4IDw9IC0xZTIxIHx8IHggPj0gMWUyMSlyZXR1cm4gU3RyaW5nKHgpOwogICAgaWYoeCA8IDApewogICAgICBzID0gJy0nOwogICAgICB4ID0gLXg7CiAgICB9CiAgICBpZih4ID4gMWUtMjEpewogICAgICBlID0gbG9nKHggKiBwb3coMiwgNjksIDEpKSAtIDY5OwogICAgICB6ID0gZSA8IDAgPyB4ICogcG93KDIsIC1lLCAxKSA6IHggLyBwb3coMiwgZSwgMSk7CiAgICAgIHogKj0gMHgxMDAwMDAwMDAwMDAwMDsKICAgICAgZSA9IDUyIC0gZTsKICAgICAgaWYoZSA+IDApewogICAgICAgIG11bHRpcGx5KDAsIHopOwogICAgICAgIGogPSBmOwogICAgICAgIHdoaWxlKGogPj0gNyl7CiAgICAgICAgICBtdWx0aXBseSgxZTcsIDApOwogICAgICAgICAgaiAtPSA3OwogICAgICAgIH0KICAgICAgICBtdWx0aXBseShwb3coMTAsIGosIDEpLCAwKTsKICAgICAgICBqID0gZSAtIDE7CiAgICAgICAgd2hpbGUoaiA+PSAyMyl7CiAgICAgICAgICBkaXZpZGUoMSA8PCAyMyk7CiAgICAgICAgICBqIC09IDIzOwogICAgICAgIH0KICAgICAgICBkaXZpZGUoMSA8PCBqKTsKICAgICAgICBtdWx0aXBseSgxLCAxKTsKICAgICAgICBkaXZpZGUoMik7CiAgICAgICAgbSA9IG51bVRvU3RyaW5nKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXVsdGlwbHkoMCwgeik7CiAgICAgICAgbXVsdGlwbHkoMSA8PCAtZSwgMCk7CiAgICAgICAgbSA9IG51bVRvU3RyaW5nKCkgKyByZXBlYXQuY2FsbChaRVJPLCBmKTsKICAgICAgfQogICAgfQogICAgaWYoZiA+IDApewogICAgICBrID0gbS5sZW5ndGg7CiAgICAgIG0gPSBzICsgKGsgPD0gZiA/ICcwLicgKyByZXBlYXQuY2FsbChaRVJPLCBmIC0gaykgKyBtIDogbS5zbGljZSgwLCBrIC0gZikgKyAnLicgKyBtLnNsaWNlKGsgLSBmKSk7CiAgICB9IGVsc2UgewogICAgICBtID0gcyArIG07CiAgICB9IHJldHVybiBtOwogIH0KfSk7Cn0seyIuL19hLW51bWJlci12YWx1ZSI6NCwiLi9fYW4taW5zdGFuY2UiOjYsIi4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzIjozNCwiLi9fc3RyaW5nLXJlcGVhdCI6MTAxLCIuL190by1pbnRlZ2VyIjoxMDZ9XSwxNzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciAkZXhwb3J0ICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJGZhaWxzICAgICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICwgYU51bWJlclZhbHVlID0gcmVxdWlyZSgnLi9fYS1udW1iZXItdmFsdWUnKQogICwgJHRvUHJlY2lzaW9uID0gMS4udG9QcmVjaXNpb247CgokZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqICgkZmFpbHMoZnVuY3Rpb24oKXsKICAvLyBJRTctCiAgcmV0dXJuICR0b1ByZWNpc2lvbi5jYWxsKDEsIHVuZGVmaW5lZCkgIT09ICcxJzsKfSkgfHwgISRmYWlscyhmdW5jdGlvbigpewogIC8vIFY4IH4gQW5kcm9pZCA0LjMtCiAgJHRvUHJlY2lzaW9uLmNhbGwoe30pOwp9KSksICdOdW1iZXInLCB7CiAgdG9QcmVjaXNpb246IGZ1bmN0aW9uIHRvUHJlY2lzaW9uKHByZWNpc2lvbil7CiAgICB2YXIgdGhhdCA9IGFOdW1iZXJWYWx1ZSh0aGlzLCAnTnVtYmVyI3RvUHJlY2lzaW9uOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEnKTsKICAgIHJldHVybiBwcmVjaXNpb24gPT09IHVuZGVmaW5lZCA/ICR0b1ByZWNpc2lvbi5jYWxsKHRoYXQpIDogJHRvUHJlY2lzaW9uLmNhbGwodGhhdCwgcHJlY2lzaW9uKTsgCiAgfQp9KTsKfSx7Ii4vX2EtbnVtYmVyLXZhbHVlIjo0LCIuL19leHBvcnQiOjMyLCIuL19mYWlscyI6MzR9XSwxODA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAxOS4xLjMuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpOwoKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiByZXF1aXJlKCcuL19vYmplY3QtYXNzaWduJyl9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX29iamVjdC1hc3NpZ24iOjY1fV0sMTgxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7Y3JlYXRlOiByZXF1aXJlKCcuL19vYmplY3QtY3JlYXRlJyl9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX29iamVjdC1jcmVhdGUiOjY2fV0sMTgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKLy8gMTkuMS4yLjMgLyAxNS4yLjMuNyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFyZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpLCAnT2JqZWN0Jywge2RlZmluZVByb3BlcnRpZXM6IHJlcXVpcmUoJy4vX29iamVjdC1kcHMnKX0pOwp9LHsiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19leHBvcnQiOjMyLCIuL19vYmplY3QtZHBzIjo2OH1dLDE4MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7Ci8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIXJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJyksICdPYmplY3QnLCB7ZGVmaW5lUHJvcGVydHk6IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmZ9KTsKfSx7Ii4vX2Rlc2NyaXB0b3JzIjoyOCwiLi9fZXhwb3J0IjozMiwiLi9fb2JqZWN0LWRwIjo2N31dLDE4NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDE5LjEuMi41IE9iamVjdC5mcmVlemUoTykKdmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIG1ldGEgICAgID0gcmVxdWlyZSgnLi9fbWV0YScpLm9uRnJlZXplOwoKcmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdmcmVlemUnLCBmdW5jdGlvbigkZnJlZXplKXsKICByZXR1cm4gZnVuY3Rpb24gZnJlZXplKGl0KXsKICAgIHJldHVybiAkZnJlZXplICYmIGlzT2JqZWN0KGl0KSA/ICRmcmVlemUobWV0YShpdCkpIDogaXQ7CiAgfTsKfSk7Cn0seyIuL19pcy1vYmplY3QiOjQ5LCIuL19tZXRhIjo2MiwiLi9fb2JqZWN0LXNhcCI6Nzh9XSwxODU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCnZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdG8taW9iamVjdCcpCiAgLCAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKS5mOwoKcmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3InLCBmdW5jdGlvbigpewogIHJldHVybiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7CiAgICByZXR1cm4gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0b0lPYmplY3QoaXQpLCBrZXkpOwogIH07Cn0pOwp9LHsiLi9fb2JqZWN0LWdvcGQiOjcwLCIuL19vYmplY3Qtc2FwIjo3OCwiLi9fdG8taW9iamVjdCI6MTA3fV0sMTg2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKcmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdnZXRPd25Qcm9wZXJ0eU5hbWVzJywgZnVuY3Rpb24oKXsKICByZXR1cm4gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4tZXh0JykuZjsKfSk7Cn0seyIuL19vYmplY3QtZ29wbi1leHQiOjcxLCIuL19vYmplY3Qtc2FwIjo3OH1dLDE4NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDE5LjEuMi45IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgdG9PYmplY3QgICAgICAgID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JykKICAsICRnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKTsKCnJlcXVpcmUoJy4vX29iamVjdC1zYXAnKSgnZ2V0UHJvdG90eXBlT2YnLCBmdW5jdGlvbigpewogIHJldHVybiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihpdCl7CiAgICByZXR1cm4gJGdldFByb3RvdHlwZU9mKHRvT2JqZWN0KGl0KSk7CiAgfTsKfSk7Cn0seyIuL19vYmplY3QtZ3BvIjo3NCwiLi9fb2JqZWN0LXNhcCI6NzgsIi4vX3RvLW9iamVjdCI6MTA5fV0sMTg4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMTkuMS4yLjExIE9iamVjdC5pc0V4dGVuc2libGUoTykKdmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0Jyk7CgpyZXF1aXJlKCcuL19vYmplY3Qtc2FwJykoJ2lzRXh0ZW5zaWJsZScsIGZ1bmN0aW9uKCRpc0V4dGVuc2libGUpewogIHJldHVybiBmdW5jdGlvbiBpc0V4dGVuc2libGUoaXQpewogICAgcmV0dXJuIGlzT2JqZWN0KGl0KSA/ICRpc0V4dGVuc2libGUgPyAkaXNFeHRlbnNpYmxlKGl0KSA6IHRydWUgOiBmYWxzZTsKICB9Owp9KTsKfSx7Ii4vX2lzLW9iamVjdCI6NDksIi4vX29iamVjdC1zYXAiOjc4fV0sMTg5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMTkuMS4yLjEyIE9iamVjdC5pc0Zyb3plbihPKQp2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTsKCnJlcXVpcmUoJy4vX29iamVjdC1zYXAnKSgnaXNGcm96ZW4nLCBmdW5jdGlvbigkaXNGcm96ZW4pewogIHJldHVybiBmdW5jdGlvbiBpc0Zyb3plbihpdCl7CiAgICByZXR1cm4gaXNPYmplY3QoaXQpID8gJGlzRnJvemVuID8gJGlzRnJvemVuKGl0KSA6IGZhbHNlIDogdHJ1ZTsKICB9Owp9KTsKfSx7Ii4vX2lzLW9iamVjdCI6NDksIi4vX29iamVjdC1zYXAiOjc4fV0sMTkwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMTkuMS4yLjEzIE9iamVjdC5pc1NlYWxlZChPKQp2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKTsKCnJlcXVpcmUoJy4vX29iamVjdC1zYXAnKSgnaXNTZWFsZWQnLCBmdW5jdGlvbigkaXNTZWFsZWQpewogIHJldHVybiBmdW5jdGlvbiBpc1NlYWxlZChpdCl7CiAgICByZXR1cm4gaXNPYmplY3QoaXQpID8gJGlzU2VhbGVkID8gJGlzU2VhbGVkKGl0KSA6IGZhbHNlIDogdHJ1ZTsKICB9Owp9KTsKfSx7Ii4vX2lzLW9iamVjdCI6NDksIi4vX29iamVjdC1zYXAiOjc4fV0sMTkxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMTkuMS4zLjEwIE9iamVjdC5pcyh2YWx1ZTEsIHZhbHVlMikKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7aXM6IHJlcXVpcmUoJy4vX3NhbWUtdmFsdWUnKX0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9fc2FtZS12YWx1ZSI6ODl9XSwxOTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTykKdmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi9fdG8tb2JqZWN0JykKICAsICRrZXlzICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKTsKCnJlcXVpcmUoJy4vX29iamVjdC1zYXAnKSgna2V5cycsIGZ1bmN0aW9uKCl7CiAgcmV0dXJuIGZ1bmN0aW9uIGtleXMoaXQpewogICAgcmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSk7CiAgfTsKfSk7Cn0seyIuL19vYmplY3Qta2V5cyI6NzYsIi4vX29iamVjdC1zYXAiOjc4LCIuL190by1vYmplY3QiOjEwOX1dLDE5MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDE5LjEuMi4xNSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoTykKdmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIG1ldGEgICAgID0gcmVxdWlyZSgnLi9fbWV0YScpLm9uRnJlZXplOwoKcmVxdWlyZSgnLi9fb2JqZWN0LXNhcCcpKCdwcmV2ZW50RXh0ZW5zaW9ucycsIGZ1bmN0aW9uKCRwcmV2ZW50RXh0ZW5zaW9ucyl7CiAgcmV0dXJuIGZ1bmN0aW9uIHByZXZlbnRFeHRlbnNpb25zKGl0KXsKICAgIHJldHVybiAkcHJldmVudEV4dGVuc2lvbnMgJiYgaXNPYmplY3QoaXQpID8gJHByZXZlbnRFeHRlbnNpb25zKG1ldGEoaXQpKSA6IGl0OwogIH07Cn0pOwp9LHsiLi9faXMtb2JqZWN0Ijo0OSwiLi9fbWV0YSI6NjIsIi4vX29iamVjdC1zYXAiOjc4fV0sMTk0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMTkuMS4yLjE3IE9iamVjdC5zZWFsKE8pCnZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpCiAgLCBtZXRhICAgICA9IHJlcXVpcmUoJy4vX21ldGEnKS5vbkZyZWV6ZTsKCnJlcXVpcmUoJy4vX29iamVjdC1zYXAnKSgnc2VhbCcsIGZ1bmN0aW9uKCRzZWFsKXsKICByZXR1cm4gZnVuY3Rpb24gc2VhbChpdCl7CiAgICByZXR1cm4gJHNlYWwgJiYgaXNPYmplY3QoaXQpID8gJHNlYWwobWV0YShpdCkpIDogaXQ7CiAgfTsKfSk7Cn0seyIuL19pcy1vYmplY3QiOjQ5LCIuL19tZXRhIjo2MiwiLi9fb2JqZWN0LXNhcCI6Nzh9XSwxOTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpOwokZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogcmVxdWlyZSgnLi9fc2V0LXByb3RvJykuc2V0fSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19zZXQtcHJvdG8iOjkwfV0sMTk2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKdmFyIGNsYXNzb2YgPSByZXF1aXJlKCcuL19jbGFzc29mJykKICAsIHRlc3QgICAgPSB7fTsKdGVzdFtyZXF1aXJlKCcuL193a3MnKSgndG9TdHJpbmdUYWcnKV0gPSAneic7CmlmKHRlc3QgKyAnJyAhPSAnW29iamVjdCB6XScpewogIHJlcXVpcmUoJy4vX3JlZGVmaW5lJykoT2JqZWN0LnByb3RvdHlwZSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKXsKICAgIHJldHVybiAnW29iamVjdCAnICsgY2xhc3NvZih0aGlzKSArICddJzsKICB9LCB0cnVlKTsKfQp9LHsiLi9fY2xhc3NvZiI6MTcsIi4vX3JlZGVmaW5lIjo4NywiLi9fd2tzIjoxMTd9XSwxOTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgJGV4cG9ydCAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJHBhcnNlRmxvYXQgPSByZXF1aXJlKCcuL19wYXJzZS1mbG9hdCcpOwovLyAxOC4yLjQgcGFyc2VGbG9hdChzdHJpbmcpCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5GICogKHBhcnNlRmxvYXQgIT0gJHBhcnNlRmxvYXQpLCB7cGFyc2VGbG9hdDogJHBhcnNlRmxvYXR9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX3BhcnNlLWZsb2F0Ijo4MX1dLDE5ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciAkZXhwb3J0ICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJHBhcnNlSW50ID0gcmVxdWlyZSgnLi9fcGFyc2UtaW50Jyk7Ci8vIDE4LjIuNSBwYXJzZUludChzdHJpbmcsIHJhZGl4KQokZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuRiAqIChwYXJzZUludCAhPSAkcGFyc2VJbnQpLCB7cGFyc2VJbnQ6ICRwYXJzZUludH0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9fcGFyc2UtaW50Ijo4Mn1dLDE5OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyIExJQlJBUlkgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2xpYnJhcnknKQogICwgZ2xvYmFsICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykKICAsIGN0eCAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2N0eCcpCiAgLCBjbGFzc29mICAgICAgICAgICAgPSByZXF1aXJlKCcuL19jbGFzc29mJykKICAsICRleHBvcnQgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBpc09iamVjdCAgICAgICAgICAgPSByZXF1aXJlKCcuL19pcy1vYmplY3QnKQogICwgYW5PYmplY3QgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIGFGdW5jdGlvbiAgICAgICAgICA9IHJlcXVpcmUoJy4vX2EtZnVuY3Rpb24nKQogICwgYW5JbnN0YW5jZSAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4taW5zdGFuY2UnKQogICwgZm9yT2YgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZm9yLW9mJykKICAsIHNldFByb3RvICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3NldC1wcm90bycpLnNldAogICwgc3BlY2llc0NvbnN0cnVjdG9yID0gcmVxdWlyZSgnLi9fc3BlY2llcy1jb25zdHJ1Y3RvcicpCiAgLCB0YXNrICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL190YXNrJykuc2V0CiAgLCBtaWNyb3Rhc2sgICAgICAgICAgPSByZXF1aXJlKCcuL19taWNyb3Rhc2snKSgpCiAgLCBQUk9NSVNFICAgICAgICAgICAgPSAnUHJvbWlzZScKICAsIFR5cGVFcnJvciAgICAgICAgICA9IGdsb2JhbC5UeXBlRXJyb3IKICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCAkUHJvbWlzZSAgICAgICAgICAgPSBnbG9iYWxbUFJPTUlTRV0KICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCBpc05vZGUgICAgICAgICAgICAgPSBjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJwogICwgZW1wdHkgICAgICAgICAgICAgID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfQogICwgSW50ZXJuYWwsIEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSwgV3JhcHBlcjsKCnZhciBVU0VfTkFUSVZFID0gISFmdW5jdGlvbigpewogIHRyeSB7CiAgICAvLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnQKICAgIHZhciBwcm9taXNlICAgICA9ICRQcm9taXNlLnJlc29sdmUoMSkKICAgICAgLCBGYWtlUHJvbWlzZSA9IChwcm9taXNlLmNvbnN0cnVjdG9yID0ge30pW3JlcXVpcmUoJy4vX3drcycpKCdzcGVjaWVzJyldID0gZnVuY3Rpb24oZXhlYyl7IGV4ZWMoZW1wdHksIGVtcHR5KTsgfTsKICAgIC8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3QKICAgIHJldHVybiAoaXNOb2RlIHx8IHR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQgPT0gJ2Z1bmN0aW9uJykgJiYgcHJvbWlzZS50aGVuKGVtcHR5KSBpbnN0YW5jZW9mIEZha2VQcm9taXNlOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KfSgpOwoKLy8gaGVscGVycwp2YXIgc2FtZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24oYSwgYil7CiAgLy8gd2l0aCBsaWJyYXJ5IHdyYXBwZXIgc3BlY2lhbCBjYXNlCiAgcmV0dXJuIGEgPT09IGIgfHwgYSA9PT0gJFByb21pc2UgJiYgYiA9PT0gV3JhcHBlcjsKfTsKdmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbihpdCl7CiAgdmFyIHRoZW47CiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiB0eXBlb2YgKHRoZW4gPSBpdC50aGVuKSA9PSAnZnVuY3Rpb24nID8gdGhlbiA6IGZhbHNlOwp9Owp2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbihDKXsKICByZXR1cm4gc2FtZUNvbnN0cnVjdG9yKCRQcm9taXNlLCBDKQogICAgPyBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoQykKICAgIDogbmV3IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eShDKTsKfTsKdmFyIFByb21pc2VDYXBhYmlsaXR5ID0gR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7CiAgdmFyIHJlc29sdmUsIHJlamVjdDsKICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbigkJHJlc29sdmUsICQkcmVqZWN0KXsKICAgIGlmKHJlc29sdmUgIT09IHVuZGVmaW5lZCB8fCByZWplY3QgIT09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoJ0JhZCBQcm9taXNlIGNvbnN0cnVjdG9yJyk7CiAgICByZXNvbHZlID0gJCRyZXNvbHZlOwogICAgcmVqZWN0ICA9ICQkcmVqZWN0OwogIH0pOwogIHRoaXMucmVzb2x2ZSA9IGFGdW5jdGlvbihyZXNvbHZlKTsKICB0aGlzLnJlamVjdCAgPSBhRnVuY3Rpb24ocmVqZWN0KTsKfTsKdmFyIHBlcmZvcm0gPSBmdW5jdGlvbihleGVjKXsKICB0cnkgewogICAgZXhlYygpOwogIH0gY2F0Y2goZSl7CiAgICByZXR1cm4ge2Vycm9yOiBlfTsKICB9Cn07CnZhciBub3RpZnkgPSBmdW5jdGlvbihwcm9taXNlLCBpc1JlamVjdCl7CiAgaWYocHJvbWlzZS5fbilyZXR1cm47CiAgcHJvbWlzZS5fbiA9IHRydWU7CiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYzsKICBtaWNyb3Rhc2soZnVuY3Rpb24oKXsKICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3YKICAgICAgLCBvayAgICA9IHByb21pc2UuX3MgPT0gMQogICAgICAsIGkgICAgID0gMDsKICAgIHZhciBydW4gPSBmdW5jdGlvbihyZWFjdGlvbil7CiAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWwKICAgICAgICAsIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlCiAgICAgICAgLCByZWplY3QgID0gcmVhY3Rpb24ucmVqZWN0CiAgICAgICAgLCBkb21haW4gID0gcmVhY3Rpb24uZG9tYWluCiAgICAgICAgLCByZXN1bHQsIHRoZW47CiAgICAgIHRyeSB7CiAgICAgICAgaWYoaGFuZGxlcil7CiAgICAgICAgICBpZighb2spewogICAgICAgICAgICBpZihwcm9taXNlLl9oID09IDIpb25IYW5kbGVVbmhhbmRsZWQocHJvbWlzZSk7CiAgICAgICAgICAgIHByb21pc2UuX2ggPSAxOwogICAgICAgICAgfQogICAgICAgICAgaWYoaGFuZGxlciA9PT0gdHJ1ZSlyZXN1bHQgPSB2YWx1ZTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmVudGVyKCk7CiAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIodmFsdWUpOwogICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmV4aXQoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSl7CiAgICAgICAgICAgIHJlamVjdChUeXBlRXJyb3IoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7CiAgICAgICAgICB9IGVsc2UgaWYodGhlbiA9IGlzVGhlbmFibGUocmVzdWx0KSl7CiAgICAgICAgICAgIHRoZW4uY2FsbChyZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICB9IGVsc2UgcmVzb2x2ZShyZXN1bHQpOwogICAgICAgIH0gZWxzZSByZWplY3QodmFsdWUpOwogICAgICB9IGNhdGNoKGUpewogICAgICAgIHJlamVjdChlKTsKICAgICAgfQogICAgfTsKICAgIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpcnVuKGNoYWluW2krK10pOyAvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaAogICAgcHJvbWlzZS5fYyA9IFtdOwogICAgcHJvbWlzZS5fbiA9IGZhbHNlOwogICAgaWYoaXNSZWplY3QgJiYgIXByb21pc2UuX2gpb25VbmhhbmRsZWQocHJvbWlzZSk7CiAgfSk7Cn07CnZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2UpewogIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uKCl7CiAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92CiAgICAgICwgYWJydXB0LCBoYW5kbGVyLCBjb25zb2xlOwogICAgaWYoaXNVbmhhbmRsZWQocHJvbWlzZSkpewogICAgICBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7CiAgICAgICAgaWYoaXNOb2RlKXsKICAgICAgICAgIHByb2Nlc3MuZW1pdCgndW5oYW5kbGVkUmVqZWN0aW9uJywgdmFsdWUsIHByb21pc2UpOwogICAgICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9udW5oYW5kbGVkcmVqZWN0aW9uKXsKICAgICAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogdmFsdWV9KTsKICAgICAgICB9IGVsc2UgaWYoKGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZSkgJiYgY29uc29sZS5lcnJvcil7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gQnJvd3NlcnMgc2hvdWxkIG5vdCB0cmlnZ2VyIGByZWplY3Rpb25IYW5kbGVkYCBldmVudCBpZiBpdCB3YXMgaGFuZGxlZCBoZXJlLCBOb2RlSlMgLSBzaG91bGQKICAgICAgcHJvbWlzZS5faCA9IGlzTm9kZSB8fCBpc1VuaGFuZGxlZChwcm9taXNlKSA/IDIgOiAxOwogICAgfSBwcm9taXNlLl9hID0gdW5kZWZpbmVkOwogICAgaWYoYWJydXB0KXRocm93IGFicnVwdC5lcnJvcjsKICB9KTsKfTsKdmFyIGlzVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7CiAgaWYocHJvbWlzZS5faCA9PSAxKXJldHVybiBmYWxzZTsKICB2YXIgY2hhaW4gPSBwcm9taXNlLl9hIHx8IHByb21pc2UuX2MKICAgICwgaSAgICAgPSAwCiAgICAsIHJlYWN0aW9uOwogIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpewogICAgcmVhY3Rpb24gPSBjaGFpbltpKytdOwogICAgaWYocmVhY3Rpb24uZmFpbCB8fCAhaXNVbmhhbmRsZWQocmVhY3Rpb24ucHJvbWlzZSkpcmV0dXJuIGZhbHNlOwogIH0gcmV0dXJuIHRydWU7Cn07CnZhciBvbkhhbmRsZVVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2UpewogIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uKCl7CiAgICB2YXIgaGFuZGxlcjsKICAgIGlmKGlzTm9kZSl7CiAgICAgIHByb2Nlc3MuZW1pdCgncmVqZWN0aW9uSGFuZGxlZCcsIHByb21pc2UpOwogICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub25yZWplY3Rpb25oYW5kbGVkKXsKICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiBwcm9taXNlLl92fSk7CiAgICB9CiAgfSk7Cn07CnZhciAkcmVqZWN0ID0gZnVuY3Rpb24odmFsdWUpewogIHZhciBwcm9taXNlID0gdGhpczsKICBpZihwcm9taXNlLl9kKXJldHVybjsKICBwcm9taXNlLl9kID0gdHJ1ZTsKICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXAKICBwcm9taXNlLl92ID0gdmFsdWU7CiAgcHJvbWlzZS5fcyA9IDI7CiAgaWYoIXByb21pc2UuX2EpcHJvbWlzZS5fYSA9IHByb21pc2UuX2Muc2xpY2UoKTsKICBub3RpZnkocHJvbWlzZSwgdHJ1ZSk7Cn07CnZhciAkcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKXsKICB2YXIgcHJvbWlzZSA9IHRoaXMKICAgICwgdGhlbjsKICBpZihwcm9taXNlLl9kKXJldHVybjsKICBwcm9taXNlLl9kID0gdHJ1ZTsKICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXAKICB0cnkgewogICAgaWYocHJvbWlzZSA9PT0gdmFsdWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOwogICAgaWYodGhlbiA9IGlzVGhlbmFibGUodmFsdWUpKXsKICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIHdyYXBwZXIgPSB7X3c6IHByb21pc2UsIF9kOiBmYWxzZX07IC8vIHdyYXAKICAgICAgICB0cnkgewogICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBjdHgoJHJlc29sdmUsIHdyYXBwZXIsIDEpLCBjdHgoJHJlamVjdCwgd3JhcHBlciwgMSkpOwogICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAkcmVqZWN0LmNhbGwod3JhcHBlciwgZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHByb21pc2UuX3YgPSB2YWx1ZTsKICAgICAgcHJvbWlzZS5fcyA9IDE7CiAgICAgIG5vdGlmeShwcm9taXNlLCBmYWxzZSk7CiAgICB9CiAgfSBjYXRjaChlKXsKICAgICRyZWplY3QuY2FsbCh7X3c6IHByb21pc2UsIF9kOiBmYWxzZX0sIGUpOyAvLyB3cmFwCiAgfQp9OwoKLy8gY29uc3RydWN0b3IgcG9seWZpbGwKaWYoIVVTRV9OQVRJVkUpewogIC8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpCiAgJFByb21pc2UgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXsKICAgIGFuSW5zdGFuY2UodGhpcywgJFByb21pc2UsIFBST01JU0UsICdfaCcpOwogICAgYUZ1bmN0aW9uKGV4ZWN1dG9yKTsKICAgIEludGVybmFsLmNhbGwodGhpcyk7CiAgICB0cnkgewogICAgICBleGVjdXRvcihjdHgoJHJlc29sdmUsIHRoaXMsIDEpLCBjdHgoJHJlamVjdCwgdGhpcywgMSkpOwogICAgfSBjYXRjaChlcnIpewogICAgICAkcmVqZWN0LmNhbGwodGhpcywgZXJyKTsKICAgIH0KICB9OwogIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7CiAgICB0aGlzLl9jID0gW107ICAgICAgICAgICAgIC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9ucwogICAgdGhpcy5fYSA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSBjaGVja2VkIGluIGlzVW5oYW5kbGVkIHJlYWN0aW9ucwogICAgdGhpcy5fcyA9IDA7ICAgICAgICAgICAgICAvLyA8LSBzdGF0ZQogICAgdGhpcy5fZCA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBkb25lCiAgICB0aGlzLl92ID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIHZhbHVlCiAgICB0aGlzLl9oID0gMDsgICAgICAgICAgICAgIC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkCiAgICB0aGlzLl9uID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIG5vdGlmeQogIH07CiAgSW50ZXJuYWwucHJvdG90eXBlID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUtYWxsJykoJFByb21pc2UucHJvdG90eXBlLCB7CiAgICAvLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKQogICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCl7CiAgICAgIHZhciByZWFjdGlvbiAgICA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCAkUHJvbWlzZSkpOwogICAgICByZWFjdGlvbi5vayAgICAgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdHJ1ZTsKICAgICAgcmVhY3Rpb24uZmFpbCAgID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT0gJ2Z1bmN0aW9uJyAmJiBvblJlamVjdGVkOwogICAgICByZWFjdGlvbi5kb21haW4gPSBpc05vZGUgPyBwcm9jZXNzLmRvbWFpbiA6IHVuZGVmaW5lZDsKICAgICAgdGhpcy5fYy5wdXNoKHJlYWN0aW9uKTsKICAgICAgaWYodGhpcy5fYSl0aGlzLl9hLnB1c2gocmVhY3Rpb24pOwogICAgICBpZih0aGlzLl9zKW5vdGlmeSh0aGlzLCBmYWxzZSk7CiAgICAgIHJldHVybiByZWFjdGlvbi5wcm9taXNlOwogICAgfSwKICAgIC8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpCiAgICAnY2F0Y2gnOiBmdW5jdGlvbihvblJlamVjdGVkKXsKICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpOwogICAgfQogIH0pOwogIFByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oKXsKICAgIHZhciBwcm9taXNlICA9IG5ldyBJbnRlcm5hbDsKICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7CiAgICB0aGlzLnJlc29sdmUgPSBjdHgoJHJlc29sdmUsIHByb21pc2UsIDEpOwogICAgdGhpcy5yZWplY3QgID0gY3R4KCRyZWplY3QsIHByb21pc2UsIDEpOwogIH07Cn0KCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtQcm9taXNlOiAkUHJvbWlzZX0pOwpyZXF1aXJlKCcuL19zZXQtdG8tc3RyaW5nLXRhZycpKCRQcm9taXNlLCBQUk9NSVNFKTsKcmVxdWlyZSgnLi9fc2V0LXNwZWNpZXMnKShQUk9NSVNFKTsKV3JhcHBlciA9IHJlcXVpcmUoJy4vX2NvcmUnKVtQUk9NSVNFXTsKCi8vIHN0YXRpY3MKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgUFJPTUlTRSwgewogIC8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpCiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocil7CiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpCiAgICAgICwgJCRyZWplY3QgICA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgJCRyZWplY3Qocik7CiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwogIH0KfSk7CiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKExJQlJBUlkgfHwgIVVTRV9OQVRJVkUpLCBQUk9NSVNFLCB7CiAgLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpCiAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh4KXsKICAgIC8vIGluc3RhbmNlb2YgaW5zdGVhZCBvZiBpbnRlcm5hbCBzbG90IGNoZWNrIGJlY2F1c2Ugd2Ugc2hvdWxkIGZpeCBpdCB3aXRob3V0IHJlcGxhY2VtZW50IG5hdGl2ZSBQcm9taXNlIGNvcmUKICAgIGlmKHggaW5zdGFuY2VvZiAkUHJvbWlzZSAmJiBzYW1lQ29uc3RydWN0b3IoeC5jb25zdHJ1Y3RvciwgdGhpcykpcmV0dXJuIHg7CiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpCiAgICAgICwgJCRyZXNvbHZlICA9IGNhcGFiaWxpdHkucmVzb2x2ZTsKICAgICQkcmVzb2x2ZSh4KTsKICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgfQp9KTsKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKFVTRV9OQVRJVkUgJiYgcmVxdWlyZSgnLi9faXRlci1kZXRlY3QnKShmdW5jdGlvbihpdGVyKXsKICAkUHJvbWlzZS5hbGwoaXRlcilbJ2NhdGNoJ10oZW1wdHkpOwp9KSksIFBST01JU0UsIHsKICAvLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSkKICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSl7CiAgICB2YXIgQyAgICAgICAgICA9IHRoaXMKICAgICAgLCBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQykKICAgICAgLCByZXNvbHZlICAgID0gY2FwYWJpbGl0eS5yZXNvbHZlCiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsKICAgICAgdmFyIHZhbHVlcyAgICA9IFtdCiAgICAgICAgLCBpbmRleCAgICAgPSAwCiAgICAgICAgLCByZW1haW5pbmcgPSAxOwogICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2UpewogICAgICAgIHZhciAkaW5kZXggICAgICAgID0gaW5kZXgrKwogICAgICAgICAgLCBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7CiAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTsKICAgICAgICByZW1haW5pbmcrKzsKICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICBpZihhbHJlYWR5Q2FsbGVkKXJldHVybjsKICAgICAgICAgIGFscmVhZHlDYWxsZWQgID0gdHJ1ZTsKICAgICAgICAgIHZhbHVlc1skaW5kZXhdID0gdmFsdWU7CiAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfSk7CiAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsKICAgIH0pOwogICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9LAogIC8vIDI1LjQuNC40IFByb21pc2UucmFjZShpdGVyYWJsZSkKICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKXsKICAgIHZhciBDICAgICAgICAgID0gdGhpcwogICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKQogICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDsKICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7CiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7CiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpOwogICAgICB9KTsKICAgIH0pOwogICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9Cn0pOwp9LHsiLi9fYS1mdW5jdGlvbiI6MywiLi9fYW4taW5zdGFuY2UiOjYsIi4vX2FuLW9iamVjdCI6NywiLi9fY2xhc3NvZiI6MTcsIi4vX2NvcmUiOjIzLCIuL19jdHgiOjI1LCIuL19leHBvcnQiOjMyLCIuL19mb3Itb2YiOjM3LCIuL19nbG9iYWwiOjM4LCIuL19pcy1vYmplY3QiOjQ5LCIuL19pdGVyLWRldGVjdCI6NTQsIi4vX2xpYnJhcnkiOjU4LCIuL19taWNyb3Rhc2siOjY0LCIuL19yZWRlZmluZS1hbGwiOjg2LCIuL19zZXQtcHJvdG8iOjkwLCIuL19zZXQtc3BlY2llcyI6OTEsIi4vX3NldC10by1zdHJpbmctdGFnIjo5MiwiLi9fc3BlY2llcy1jb25zdHJ1Y3RvciI6OTUsIi4vX3Rhc2siOjEwNCwiLi9fd2tzIjoxMTd9XSwyMDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyNi4xLjEgUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmd1bWVudCwgYXJndW1lbnRzTGlzdCkKdmFyICRleHBvcnQgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBhRnVuY3Rpb24gPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJykKICAsIGFuT2JqZWN0ICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCBfYXBwbHkgICAgPSBGdW5jdGlvbi5hcHBseTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHsKICBhcHBseTogZnVuY3Rpb24gYXBwbHkodGFyZ2V0LCB0aGlzQXJndW1lbnQsIGFyZ3VtZW50c0xpc3QpewogICAgcmV0dXJuIF9hcHBseS5jYWxsKGFGdW5jdGlvbih0YXJnZXQpLCB0aGlzQXJndW1lbnQsIGFuT2JqZWN0KGFyZ3VtZW50c0xpc3QpKTsKICB9Cn0pOwp9LHsiLi9fYS1mdW5jdGlvbiI6MywiLi9fYW4tb2JqZWN0Ijo3LCIuL19leHBvcnQiOjMyfV0sMjAxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjYuMS4yIFJlZmxlY3QuY29uc3RydWN0KHRhcmdldCwgYXJndW1lbnRzTGlzdCBbLCBuZXdUYXJnZXRdKQp2YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGNyZWF0ZSAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1jcmVhdGUnKQogICwgYUZ1bmN0aW9uID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpCiAgLCBhbk9iamVjdCAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKQogICwgaXNPYmplY3QgID0gcmVxdWlyZSgnLi9faXMtb2JqZWN0JykKICAsIGJpbmQgICAgICA9IHJlcXVpcmUoJy4vX2JpbmQnKTsKCi8vIE1TIEVkZ2Ugc3VwcG9ydHMgb25seSAyIGFyZ3VtZW50cwovLyBGRiBOaWdodGx5IHNldHMgdGhpcmQgYXJndW1lbnQgYXMgYG5ldy50YXJnZXRgLCBidXQgZG9lcyBub3QgY3JlYXRlIGB0aGlzYCBmcm9tIGl0CiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpewogIGZ1bmN0aW9uIEYoKXt9CiAgcmV0dXJuICEoUmVmbGVjdC5jb25zdHJ1Y3QoZnVuY3Rpb24oKXt9LCBbXSwgRikgaW5zdGFuY2VvZiBGKTsKfSksICdSZWZsZWN0JywgewogIGNvbnN0cnVjdDogZnVuY3Rpb24gY29uc3RydWN0KFRhcmdldCwgYXJncyAvKiwgbmV3VGFyZ2V0Ki8pewogICAgYUZ1bmN0aW9uKFRhcmdldCk7CiAgICBhbk9iamVjdChhcmdzKTsKICAgIHZhciBuZXdUYXJnZXQgPSBhcmd1bWVudHMubGVuZ3RoIDwgMyA/IFRhcmdldCA6IGFGdW5jdGlvbihhcmd1bWVudHNbMl0pOwogICAgaWYoVGFyZ2V0ID09IG5ld1RhcmdldCl7CiAgICAgIC8vIHcvbyBhbHRlcmVkIG5ld1RhcmdldCwgb3B0aW1pemF0aW9uIGZvciAwLTQgYXJndW1lbnRzCiAgICAgIHN3aXRjaChhcmdzLmxlbmd0aCl7CiAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IFRhcmdldDsKICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0pOwogICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBUYXJnZXQoYXJnc1swXSwgYXJnc1sxXSk7CiAgICAgICAgY2FzZSAzOiByZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsKICAgICAgICBjYXNlIDQ6IHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pOwogICAgICB9CiAgICAgIC8vIHcvbyBhbHRlcmVkIG5ld1RhcmdldCwgbG90IG9mIGFyZ3VtZW50cyBjYXNlCiAgICAgIHZhciAkYXJncyA9IFtudWxsXTsKICAgICAgJGFyZ3MucHVzaC5hcHBseSgkYXJncywgYXJncyk7CiAgICAgIHJldHVybiBuZXcgKGJpbmQuYXBwbHkoVGFyZ2V0LCAkYXJncykpOwogICAgfQogICAgLy8gd2l0aCBhbHRlcmVkIG5ld1RhcmdldCwgbm90IHN1cHBvcnQgYnVpbHQtaW4gY29uc3RydWN0b3JzCiAgICB2YXIgcHJvdG8gICAgPSBuZXdUYXJnZXQucHJvdG90eXBlCiAgICAgICwgaW5zdGFuY2UgPSBjcmVhdGUoaXNPYmplY3QocHJvdG8pID8gcHJvdG8gOiBPYmplY3QucHJvdG90eXBlKQogICAgICAsIHJlc3VsdCAgID0gRnVuY3Rpb24uYXBwbHkuY2FsbChUYXJnZXQsIGluc3RhbmNlLCBhcmdzKTsKICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogaW5zdGFuY2U7CiAgfQp9KTsKfSx7Ii4vX2EtZnVuY3Rpb24iOjMsIi4vX2FuLW9iamVjdCI6NywiLi9fYmluZCI6MTYsIi4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzIjozNCwiLi9faXMtb2JqZWN0Ijo0OSwiLi9fb2JqZWN0LWNyZWF0ZSI6NjZ9XSwyMDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyNi4xLjMgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5LCBhdHRyaWJ1dGVzKQp2YXIgZFAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKQogICwgJGV4cG9ydCAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgYW5PYmplY3QgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKQogICwgdG9QcmltaXRpdmUgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKTsKCi8vIE1TIEVkZ2UgaGFzIGJyb2tlbiBSZWZsZWN0LmRlZmluZVByb3BlcnR5IC0gdGhyb3dpbmcgaW5zdGVhZCBvZiByZXR1cm5pbmcgZmFsc2UKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7CiAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShkUC5mKHt9LCAxLCB7dmFsdWU6IDF9KSwgMSwge3ZhbHVlOiAyfSk7Cn0pLCAnUmVmbGVjdCcsIHsKICBkZWZpbmVQcm9wZXJ0eTogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleSwgYXR0cmlidXRlcyl7CiAgICBhbk9iamVjdCh0YXJnZXQpOwogICAgcHJvcGVydHlLZXkgPSB0b1ByaW1pdGl2ZShwcm9wZXJ0eUtleSwgdHJ1ZSk7CiAgICBhbk9iamVjdChhdHRyaWJ1dGVzKTsKICAgIHRyeSB7CiAgICAgIGRQLmYodGFyZ2V0LCBwcm9wZXJ0eUtleSwgYXR0cmlidXRlcyk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaChlKXsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfSk7Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzIjozNCwiLi9fb2JqZWN0LWRwIjo2NywiLi9fdG8tcHJpbWl0aXZlIjoxMTB9XSwyMDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyNi4xLjQgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5KQp2YXIgJGV4cG9ydCAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgZ09QRCAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wZCcpLmYKICAsIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7CiAgZGVsZXRlUHJvcGVydHk6IGZ1bmN0aW9uIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXkpewogICAgdmFyIGRlc2MgPSBnT1BEKGFuT2JqZWN0KHRhcmdldCksIHByb3BlcnR5S2V5KTsKICAgIHJldHVybiBkZXNjICYmICFkZXNjLmNvbmZpZ3VyYWJsZSA/IGZhbHNlIDogZGVsZXRlIHRhcmdldFtwcm9wZXJ0eUtleV07CiAgfQp9KTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fZXhwb3J0IjozMiwiLi9fb2JqZWN0LWdvcGQiOjcwfV0sMjA0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyAyNi4xLjUgUmVmbGVjdC5lbnVtZXJhdGUodGFyZ2V0KQp2YXIgJGV4cG9ydCAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgYW5PYmplY3QgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKTsKdmFyIEVudW1lcmF0ZSA9IGZ1bmN0aW9uKGl0ZXJhdGVkKXsKICB0aGlzLl90ID0gYW5PYmplY3QoaXRlcmF0ZWQpOyAvLyB0YXJnZXQKICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4CiAgdmFyIGtleXMgPSB0aGlzLl9rID0gW10gICAgICAgLy8ga2V5cwogICAgLCBrZXk7CiAgZm9yKGtleSBpbiBpdGVyYXRlZClrZXlzLnB1c2goa2V5KTsKfTsKcmVxdWlyZSgnLi9faXRlci1jcmVhdGUnKShFbnVtZXJhdGUsICdPYmplY3QnLCBmdW5jdGlvbigpewogIHZhciB0aGF0ID0gdGhpcwogICAgLCBrZXlzID0gdGhhdC5fawogICAgLCBrZXk7CiAgZG8gewogICAgaWYodGhhdC5faSA+PSBrZXlzLmxlbmd0aClyZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9OwogIH0gd2hpbGUoISgoa2V5ID0ga2V5c1t0aGF0Ll9pKytdKSBpbiB0aGF0Ll90KSk7CiAgcmV0dXJuIHt2YWx1ZToga2V5LCBkb25lOiBmYWxzZX07Cn0pOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0JywgewogIGVudW1lcmF0ZTogZnVuY3Rpb24gZW51bWVyYXRlKHRhcmdldCl7CiAgICByZXR1cm4gbmV3IEVudW1lcmF0ZSh0YXJnZXQpOwogIH0KfSk7Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2V4cG9ydCI6MzIsIi4vX2l0ZXItY3JlYXRlIjo1Mn1dLDIwNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDI2LjEuNyBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5S2V5KQp2YXIgZ09QRCAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wZCcpCiAgLCAkZXhwb3J0ICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBhbk9iamVjdCA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0JywgewogIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHlLZXkpewogICAgcmV0dXJuIGdPUEQuZihhbk9iamVjdCh0YXJnZXQpLCBwcm9wZXJ0eUtleSk7CiAgfQp9KTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fZXhwb3J0IjozMiwiLi9fb2JqZWN0LWdvcGQiOjcwfV0sMjA2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjYuMS44IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KQp2YXIgJGV4cG9ydCAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgZ2V0UHJvdG8gPSByZXF1aXJlKCcuL19vYmplY3QtZ3BvJykKICAsIGFuT2JqZWN0ID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7CiAgZ2V0UHJvdG90eXBlT2Y6IGZ1bmN0aW9uIGdldFByb3RvdHlwZU9mKHRhcmdldCl7CiAgICByZXR1cm4gZ2V0UHJvdG8oYW5PYmplY3QodGFyZ2V0KSk7CiAgfQp9KTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fZXhwb3J0IjozMiwiLi9fb2JqZWN0LWdwbyI6NzR9XSwyMDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyNi4xLjYgUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wZXJ0eUtleSBbLCByZWNlaXZlcl0pCnZhciBnT1BEICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJykKICAsIGdldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpCiAgLCBoYXMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hhcycpCiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBpc09iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpCiAgLCBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpOwoKZnVuY3Rpb24gZ2V0KHRhcmdldCwgcHJvcGVydHlLZXkvKiwgcmVjZWl2ZXIqLyl7CiAgdmFyIHJlY2VpdmVyID0gYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB0YXJnZXQgOiBhcmd1bWVudHNbMl0KICAgICwgZGVzYywgcHJvdG87CiAgaWYoYW5PYmplY3QodGFyZ2V0KSA9PT0gcmVjZWl2ZXIpcmV0dXJuIHRhcmdldFtwcm9wZXJ0eUtleV07CiAgaWYoZGVzYyA9IGdPUEQuZih0YXJnZXQsIHByb3BlcnR5S2V5KSlyZXR1cm4gaGFzKGRlc2MsICd2YWx1ZScpCiAgICA/IGRlc2MudmFsdWUKICAgIDogZGVzYy5nZXQgIT09IHVuZGVmaW5lZAogICAgICA/IGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpCiAgICAgIDogdW5kZWZpbmVkOwogIGlmKGlzT2JqZWN0KHByb3RvID0gZ2V0UHJvdG90eXBlT2YodGFyZ2V0KSkpcmV0dXJuIGdldChwcm90bywgcHJvcGVydHlLZXksIHJlY2VpdmVyKTsKfQoKJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge2dldDogZ2V0fSk7Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2V4cG9ydCI6MzIsIi4vX2hhcyI6MzksIi4vX2lzLW9iamVjdCI6NDksIi4vX29iamVjdC1nb3BkIjo3MCwiLi9fb2JqZWN0LWdwbyI6NzR9XSwyMDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyNi4xLjkgUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wZXJ0eUtleSkKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHsKICBoYXM6IGZ1bmN0aW9uIGhhcyh0YXJnZXQsIHByb3BlcnR5S2V5KXsKICAgIHJldHVybiBwcm9wZXJ0eUtleSBpbiB0YXJnZXQ7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzJ9XSwyMDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyNi4xLjEwIFJlZmxlY3QuaXNFeHRlbnNpYmxlKHRhcmdldCkKdmFyICRleHBvcnQgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgYW5PYmplY3QgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCAkaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHsKICBpc0V4dGVuc2libGU6IGZ1bmN0aW9uIGlzRXh0ZW5zaWJsZSh0YXJnZXQpewogICAgYW5PYmplY3QodGFyZ2V0KTsKICAgIHJldHVybiAkaXNFeHRlbnNpYmxlID8gJGlzRXh0ZW5zaWJsZSh0YXJnZXQpIDogdHJ1ZTsKICB9Cn0pOwp9LHsiLi9fYW4tb2JqZWN0Ijo3LCIuL19leHBvcnQiOjMyfV0sMjEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjYuMS4xMSBSZWZsZWN0Lm93bktleXModGFyZ2V0KQp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge293bktleXM6IHJlcXVpcmUoJy4vX293bi1rZXlzJyl9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX293bi1rZXlzIjo4MH1dLDIxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDI2LjEuMTIgUmVmbGVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpCnZhciAkZXhwb3J0ICAgICAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgYW5PYmplY3QgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsICRwcmV2ZW50RXh0ZW5zaW9ucyA9IE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9uczsKCiRleHBvcnQoJGV4cG9ydC5TLCAnUmVmbGVjdCcsIHsKICBwcmV2ZW50RXh0ZW5zaW9uczogZnVuY3Rpb24gcHJldmVudEV4dGVuc2lvbnModGFyZ2V0KXsKICAgIGFuT2JqZWN0KHRhcmdldCk7CiAgICB0cnkgewogICAgICBpZigkcHJldmVudEV4dGVuc2lvbnMpJHByZXZlbnRFeHRlbnNpb25zKHRhcmdldCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaChlKXsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfSk7Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2V4cG9ydCI6MzJ9XSwyMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyNi4xLjE0IFJlZmxlY3Quc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90bykKdmFyICRleHBvcnQgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIHNldFByb3RvID0gcmVxdWlyZSgnLi9fc2V0LXByb3RvJyk7CgppZihzZXRQcm90bykkZXhwb3J0KCRleHBvcnQuUywgJ1JlZmxlY3QnLCB7CiAgc2V0UHJvdG90eXBlT2Y6IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKHRhcmdldCwgcHJvdG8pewogICAgc2V0UHJvdG8uY2hlY2sodGFyZ2V0LCBwcm90byk7CiAgICB0cnkgewogICAgICBzZXRQcm90by5zZXQodGFyZ2V0LCBwcm90byk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaChlKXsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19zZXQtcHJvdG8iOjkwfV0sMjEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gMjYuMS4xMyBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3BlcnR5S2V5LCBWIFssIHJlY2VpdmVyXSkKdmFyIGRQICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykKICAsIGdPUEQgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKQogICwgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCcuL19vYmplY3QtZ3BvJykKICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJykKICAsICRleHBvcnQgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGNyZWF0ZURlc2MgICAgID0gcmVxdWlyZSgnLi9fcHJvcGVydHktZGVzYycpCiAgLCBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCBpc09iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpOwoKZnVuY3Rpb24gc2V0KHRhcmdldCwgcHJvcGVydHlLZXksIFYvKiwgcmVjZWl2ZXIqLyl7CiAgdmFyIHJlY2VpdmVyID0gYXJndW1lbnRzLmxlbmd0aCA8IDQgPyB0YXJnZXQgOiBhcmd1bWVudHNbM10KICAgICwgb3duRGVzYyAgPSBnT1BELmYoYW5PYmplY3QodGFyZ2V0KSwgcHJvcGVydHlLZXkpCiAgICAsIGV4aXN0aW5nRGVzY3JpcHRvciwgcHJvdG87CiAgaWYoIW93bkRlc2MpewogICAgaWYoaXNPYmplY3QocHJvdG8gPSBnZXRQcm90b3R5cGVPZih0YXJnZXQpKSl7CiAgICAgIHJldHVybiBzZXQocHJvdG8sIHByb3BlcnR5S2V5LCBWLCByZWNlaXZlcik7CiAgICB9CiAgICBvd25EZXNjID0gY3JlYXRlRGVzYygwKTsKICB9CiAgaWYoaGFzKG93bkRlc2MsICd2YWx1ZScpKXsKICAgIGlmKG93bkRlc2Mud3JpdGFibGUgPT09IGZhbHNlIHx8ICFpc09iamVjdChyZWNlaXZlcikpcmV0dXJuIGZhbHNlOwogICAgZXhpc3RpbmdEZXNjcmlwdG9yID0gZ09QRC5mKHJlY2VpdmVyLCBwcm9wZXJ0eUtleSkgfHwgY3JlYXRlRGVzYygwKTsKICAgIGV4aXN0aW5nRGVzY3JpcHRvci52YWx1ZSA9IFY7CiAgICBkUC5mKHJlY2VpdmVyLCBwcm9wZXJ0eUtleSwgZXhpc3RpbmdEZXNjcmlwdG9yKTsKICAgIHJldHVybiB0cnVlOwogIH0KICByZXR1cm4gb3duRGVzYy5zZXQgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogKG93bkRlc2Muc2V0LmNhbGwocmVjZWl2ZXIsIFYpLCB0cnVlKTsKfQoKJGV4cG9ydCgkZXhwb3J0LlMsICdSZWZsZWN0Jywge3NldDogc2V0fSk7Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2V4cG9ydCI6MzIsIi4vX2hhcyI6MzksIi4vX2lzLW9iamVjdCI6NDksIi4vX29iamVjdC1kcCI6NjcsIi4vX29iamVjdC1nb3BkIjo3MCwiLi9fb2JqZWN0LWdwbyI6NzQsIi4vX3Byb3BlcnR5LWRlc2MiOjg1fV0sMjE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGdsb2JhbCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykKICAsIGluaGVyaXRJZlJlcXVpcmVkID0gcmVxdWlyZSgnLi9faW5oZXJpdC1pZi1yZXF1aXJlZCcpCiAgLCBkUCAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpLmYKICAsIGdPUE4gICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4nKS5mCiAgLCBpc1JlZ0V4cCAgICAgICAgICA9IHJlcXVpcmUoJy4vX2lzLXJlZ2V4cCcpCiAgLCAkZmxhZ3MgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2ZsYWdzJykKICAsICRSZWdFeHAgICAgICAgICAgID0gZ2xvYmFsLlJlZ0V4cAogICwgQmFzZSAgICAgICAgICAgICAgPSAkUmVnRXhwCiAgLCBwcm90byAgICAgICAgICAgICA9ICRSZWdFeHAucHJvdG90eXBlCiAgLCByZTEgICAgICAgICAgICAgICA9IC9hL2cKICAsIHJlMiAgICAgICAgICAgICAgID0gL2EvZwogIC8vICJuZXciIGNyZWF0ZXMgYSBuZXcgb2JqZWN0LCBvbGQgd2Via2l0IGJ1Z2d5IGhlcmUKICAsIENPUlJFQ1RfTkVXICAgICAgID0gbmV3ICRSZWdFeHAocmUxKSAhPT0gcmUxOwoKaWYocmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSAmJiAoIUNPUlJFQ1RfTkVXIHx8IHJlcXVpcmUoJy4vX2ZhaWxzJykoZnVuY3Rpb24oKXsKICByZTJbcmVxdWlyZSgnLi9fd2tzJykoJ21hdGNoJyldID0gZmFsc2U7CiAgLy8gUmVnRXhwIGNvbnN0cnVjdG9yIGNhbiBhbHRlciBmbGFncyBhbmQgSXNSZWdFeHAgd29ya3MgY29ycmVjdCB3aXRoIEBAbWF0Y2gKICByZXR1cm4gJFJlZ0V4cChyZTEpICE9IHJlMSB8fCAkUmVnRXhwKHJlMikgPT0gcmUyIHx8ICRSZWdFeHAocmUxLCAnaScpICE9ICcvYS9pJzsKfSkpKXsKICAkUmVnRXhwID0gZnVuY3Rpb24gUmVnRXhwKHAsIGYpewogICAgdmFyIHRpUkUgPSB0aGlzIGluc3RhbmNlb2YgJFJlZ0V4cAogICAgICAsIHBpUkUgPSBpc1JlZ0V4cChwKQogICAgICAsIGZpVSAgPSBmID09PSB1bmRlZmluZWQ7CiAgICByZXR1cm4gIXRpUkUgJiYgcGlSRSAmJiBwLmNvbnN0cnVjdG9yID09PSAkUmVnRXhwICYmIGZpVSA/IHAKICAgICAgOiBpbmhlcml0SWZSZXF1aXJlZChDT1JSRUNUX05FVwogICAgICAgID8gbmV3IEJhc2UocGlSRSAmJiAhZmlVID8gcC5zb3VyY2UgOiBwLCBmKQogICAgICAgIDogQmFzZSgocGlSRSA9IHAgaW5zdGFuY2VvZiAkUmVnRXhwKSA/IHAuc291cmNlIDogcCwgcGlSRSAmJiBmaVUgPyAkZmxhZ3MuY2FsbChwKSA6IGYpCiAgICAgICwgdGlSRSA/IHRoaXMgOiBwcm90bywgJFJlZ0V4cCk7CiAgfTsKICB2YXIgcHJveHkgPSBmdW5jdGlvbihrZXkpewogICAga2V5IGluICRSZWdFeHAgfHwgZFAoJFJlZ0V4cCwga2V5LCB7CiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gQmFzZVtrZXldOyB9LAogICAgICBzZXQ6IGZ1bmN0aW9uKGl0KXsgQmFzZVtrZXldID0gaXQ7IH0KICAgIH0pOwogIH07CiAgZm9yKHZhciBrZXlzID0gZ09QTihCYXNlKSwgaSA9IDA7IGtleXMubGVuZ3RoID4gaTsgKXByb3h5KGtleXNbaSsrXSk7CiAgcHJvdG8uY29uc3RydWN0b3IgPSAkUmVnRXhwOwogICRSZWdFeHAucHJvdG90eXBlID0gcHJvdG87CiAgcmVxdWlyZSgnLi9fcmVkZWZpbmUnKShnbG9iYWwsICdSZWdFeHAnLCAkUmVnRXhwKTsKfQoKcmVxdWlyZSgnLi9fc2V0LXNwZWNpZXMnKSgnUmVnRXhwJyk7Cn0seyIuL19kZXNjcmlwdG9ycyI6MjgsIi4vX2ZhaWxzIjozNCwiLi9fZmxhZ3MiOjM2LCIuL19nbG9iYWwiOjM4LCIuL19pbmhlcml0LWlmLXJlcXVpcmVkIjo0MywiLi9faXMtcmVnZXhwIjo1MCwiLi9fb2JqZWN0LWRwIjo2NywiLi9fb2JqZWN0LWdvcG4iOjcyLCIuL19yZWRlZmluZSI6ODcsIi4vX3NldC1zcGVjaWVzIjo5MSwiLi9fd2tzIjoxMTd9XSwyMTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMS4yLjUuMyBnZXQgUmVnRXhwLnByb3RvdHlwZS5mbGFncygpCmlmKHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykgJiYgLy4vZy5mbGFncyAhPSAnZycpcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZihSZWdFeHAucHJvdG90eXBlLCAnZmxhZ3MnLCB7CiAgY29uZmlndXJhYmxlOiB0cnVlLAogIGdldDogcmVxdWlyZSgnLi9fZmxhZ3MnKQp9KTsKfSx7Ii4vX2Rlc2NyaXB0b3JzIjoyOCwiLi9fZmxhZ3MiOjM2LCIuL19vYmplY3QtZHAiOjY3fV0sMjE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQEBtYXRjaCBsb2dpYwpyZXF1aXJlKCcuL19maXgtcmUtd2tzJykoJ21hdGNoJywgMSwgZnVuY3Rpb24oZGVmaW5lZCwgTUFUQ0gsICRtYXRjaCl7CiAgLy8gMjEuMS4zLjExIFN0cmluZy5wcm90b3R5cGUubWF0Y2gocmVnZXhwKQogIHJldHVybiBbZnVuY3Rpb24gbWF0Y2gocmVnZXhwKXsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHZhciBPICA9IGRlZmluZWQodGhpcykKICAgICAgLCBmbiA9IHJlZ2V4cCA9PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiByZWdleHBbTUFUQ0hdOwogICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQgPyBmbi5jYWxsKHJlZ2V4cCwgTykgOiBuZXcgUmVnRXhwKHJlZ2V4cClbTUFUQ0hdKFN0cmluZyhPKSk7CiAgfSwgJG1hdGNoXTsKfSk7Cn0seyIuL19maXgtcmUtd2tzIjozNX1dLDIxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEBAcmVwbGFjZSBsb2dpYwpyZXF1aXJlKCcuL19maXgtcmUtd2tzJykoJ3JlcGxhY2UnLCAyLCBmdW5jdGlvbihkZWZpbmVkLCBSRVBMQUNFLCAkcmVwbGFjZSl7CiAgLy8gMjEuMS4zLjE0IFN0cmluZy5wcm90b3R5cGUucmVwbGFjZShzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKQogIHJldHVybiBbZnVuY3Rpb24gcmVwbGFjZShzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKXsKICAgICd1c2Ugc3RyaWN0JzsKICAgIHZhciBPICA9IGRlZmluZWQodGhpcykKICAgICAgLCBmbiA9IHNlYXJjaFZhbHVlID09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHNlYXJjaFZhbHVlW1JFUExBQ0VdOwogICAgcmV0dXJuIGZuICE9PSB1bmRlZmluZWQKICAgICAgPyBmbi5jYWxsKHNlYXJjaFZhbHVlLCBPLCByZXBsYWNlVmFsdWUpCiAgICAgIDogJHJlcGxhY2UuY2FsbChTdHJpbmcoTyksIHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpOwogIH0sICRyZXBsYWNlXTsKfSk7Cn0seyIuL19maXgtcmUtd2tzIjozNX1dLDIxODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEBAc2VhcmNoIGxvZ2ljCnJlcXVpcmUoJy4vX2ZpeC1yZS13a3MnKSgnc2VhcmNoJywgMSwgZnVuY3Rpb24oZGVmaW5lZCwgU0VBUkNILCAkc2VhcmNoKXsKICAvLyAyMS4xLjMuMTUgU3RyaW5nLnByb3RvdHlwZS5zZWFyY2gocmVnZXhwKQogIHJldHVybiBbZnVuY3Rpb24gc2VhcmNoKHJlZ2V4cCl7CiAgICAndXNlIHN0cmljdCc7CiAgICB2YXIgTyAgPSBkZWZpbmVkKHRoaXMpCiAgICAgICwgZm4gPSByZWdleHAgPT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcmVnZXhwW1NFQVJDSF07CiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZCA/IGZuLmNhbGwocmVnZXhwLCBPKSA6IG5ldyBSZWdFeHAocmVnZXhwKVtTRUFSQ0hdKFN0cmluZyhPKSk7CiAgfSwgJHNlYXJjaF07Cn0pOwp9LHsiLi9fZml4LXJlLXdrcyI6MzV9XSwyMTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBAQHNwbGl0IGxvZ2ljCnJlcXVpcmUoJy4vX2ZpeC1yZS13a3MnKSgnc3BsaXQnLCAyLCBmdW5jdGlvbihkZWZpbmVkLCBTUExJVCwgJHNwbGl0KXsKICAndXNlIHN0cmljdCc7CiAgdmFyIGlzUmVnRXhwICAgPSByZXF1aXJlKCcuL19pcy1yZWdleHAnKQogICAgLCBfc3BsaXQgICAgID0gJHNwbGl0CiAgICAsICRwdXNoICAgICAgPSBbXS5wdXNoCiAgICAsICRTUExJVCAgICAgPSAnc3BsaXQnCiAgICAsIExFTkdUSCAgICAgPSAnbGVuZ3RoJwogICAgLCBMQVNUX0lOREVYID0gJ2xhc3RJbmRleCc7CiAgaWYoCiAgICAnYWJiYydbJFNQTElUXSgvKGIpKi8pWzFdID09ICdjJyB8fAogICAgJ3Rlc3QnWyRTUExJVF0oLyg/OikvLCAtMSlbTEVOR1RIXSAhPSA0IHx8CiAgICAnYWInWyRTUExJVF0oLyg/OmFiKSovKVtMRU5HVEhdICE9IDIgfHwKICAgICcuJ1skU1BMSVRdKC8oLj8pKC4/KS8pW0xFTkdUSF0gIT0gNCB8fAogICAgJy4nWyRTUExJVF0oLygpKCkvKVtMRU5HVEhdID4gMSB8fAogICAgJydbJFNQTElUXSgvLj8vKVtMRU5HVEhdCiAgKXsKICAgIHZhciBOUENHID0gLygpPz8vLmV4ZWMoJycpWzFdID09PSB1bmRlZmluZWQ7IC8vIG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3VwCiAgICAvLyBiYXNlZCBvbiBlczUtc2hpbSBpbXBsZW1lbnRhdGlvbiwgbmVlZCB0byByZXdvcmsgaXQKICAgICRzcGxpdCA9IGZ1bmN0aW9uKHNlcGFyYXRvciwgbGltaXQpewogICAgICB2YXIgc3RyaW5nID0gU3RyaW5nKHRoaXMpOwogICAgICBpZihzZXBhcmF0b3IgPT09IHVuZGVmaW5lZCAmJiBsaW1pdCA9PT0gMClyZXR1cm4gW107CiAgICAgIC8vIElmIGBzZXBhcmF0b3JgIGlzIG5vdCBhIHJlZ2V4LCB1c2UgbmF0aXZlIHNwbGl0CiAgICAgIGlmKCFpc1JlZ0V4cChzZXBhcmF0b3IpKXJldHVybiBfc3BsaXQuY2FsbChzdHJpbmcsIHNlcGFyYXRvciwgbGltaXQpOwogICAgICB2YXIgb3V0cHV0ID0gW107CiAgICAgIHZhciBmbGFncyA9IChzZXBhcmF0b3IuaWdub3JlQ2FzZSA/ICdpJyA6ICcnKSArCiAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3IubXVsdGlsaW5lID8gJ20nIDogJycpICsKICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci51bmljb2RlID8gJ3UnIDogJycpICsKICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5zdGlja3kgPyAneScgOiAnJyk7CiAgICAgIHZhciBsYXN0TGFzdEluZGV4ID0gMDsKICAgICAgdmFyIHNwbGl0TGltaXQgPSBsaW1pdCA9PT0gdW5kZWZpbmVkID8gNDI5NDk2NzI5NSA6IGxpbWl0ID4+PiAwOwogICAgICAvLyBNYWtlIGBnbG9iYWxgIGFuZCBhdm9pZCBgbGFzdEluZGV4YCBpc3N1ZXMgYnkgd29ya2luZyB3aXRoIGEgY29weQogICAgICB2YXIgc2VwYXJhdG9yQ29weSA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yLnNvdXJjZSwgZmxhZ3MgKyAnZycpOwogICAgICB2YXIgc2VwYXJhdG9yMiwgbWF0Y2gsIGxhc3RJbmRleCwgbGFzdExlbmd0aCwgaTsKICAgICAgLy8gRG9lc24ndCBuZWVkIGZsYWdzIGd5LCBidXQgdGhleSBkb24ndCBodXJ0CiAgICAgIGlmKCFOUENHKXNlcGFyYXRvcjIgPSBuZXcgUmVnRXhwKCdeJyArIHNlcGFyYXRvckNvcHkuc291cmNlICsgJyQoPyFcXHMpJywgZmxhZ3MpOwogICAgICB3aGlsZShtYXRjaCA9IHNlcGFyYXRvckNvcHkuZXhlYyhzdHJpbmcpKXsKICAgICAgICAvLyBgc2VwYXJhdG9yQ29weS5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyCiAgICAgICAgbGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXVtMRU5HVEhdOwogICAgICAgIGlmKGxhc3RJbmRleCA+IGxhc3RMYXN0SW5kZXgpewogICAgICAgICAgb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7CiAgICAgICAgICAvLyBGaXggYnJvd3NlcnMgd2hvc2UgYGV4ZWNgIG1ldGhvZHMgZG9uJ3QgY29uc2lzdGVudGx5IHJldHVybiBgdW5kZWZpbmVkYCBmb3IgTlBDRwogICAgICAgICAgaWYoIU5QQ0cgJiYgbWF0Y2hbTEVOR1RIXSA+IDEpbWF0Y2hbMF0ucmVwbGFjZShzZXBhcmF0b3IyLCBmdW5jdGlvbigpewogICAgICAgICAgICBmb3IoaSA9IDE7IGkgPCBhcmd1bWVudHNbTEVOR1RIXSAtIDI7IGkrKylpZihhcmd1bWVudHNbaV0gPT09IHVuZGVmaW5lZCltYXRjaFtpXSA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYobWF0Y2hbTEVOR1RIXSA+IDEgJiYgbWF0Y2guaW5kZXggPCBzdHJpbmdbTEVOR1RIXSkkcHVzaC5hcHBseShvdXRwdXQsIG1hdGNoLnNsaWNlKDEpKTsKICAgICAgICAgIGxhc3RMZW5ndGggPSBtYXRjaFswXVtMRU5HVEhdOwogICAgICAgICAgbGFzdExhc3RJbmRleCA9IGxhc3RJbmRleDsKICAgICAgICAgIGlmKG91dHB1dFtMRU5HVEhdID49IHNwbGl0TGltaXQpYnJlYWs7CiAgICAgICAgfQogICAgICAgIGlmKHNlcGFyYXRvckNvcHlbTEFTVF9JTkRFWF0gPT09IG1hdGNoLmluZGV4KXNlcGFyYXRvckNvcHlbTEFTVF9JTkRFWF0rKzsgLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcAogICAgICB9CiAgICAgIGlmKGxhc3RMYXN0SW5kZXggPT09IHN0cmluZ1tMRU5HVEhdKXsKICAgICAgICBpZihsYXN0TGVuZ3RoIHx8ICFzZXBhcmF0b3JDb3B5LnRlc3QoJycpKW91dHB1dC5wdXNoKCcnKTsKICAgICAgfSBlbHNlIG91dHB1dC5wdXNoKHN0cmluZy5zbGljZShsYXN0TGFzdEluZGV4KSk7CiAgICAgIHJldHVybiBvdXRwdXRbTEVOR1RIXSA+IHNwbGl0TGltaXQgPyBvdXRwdXQuc2xpY2UoMCwgc3BsaXRMaW1pdCkgOiBvdXRwdXQ7CiAgICB9OwogIC8vIENoYWtyYSwgVjgKICB9IGVsc2UgaWYoJzAnWyRTUExJVF0odW5kZWZpbmVkLCAwKVtMRU5HVEhdKXsKICAgICRzcGxpdCA9IGZ1bmN0aW9uKHNlcGFyYXRvciwgbGltaXQpewogICAgICByZXR1cm4gc2VwYXJhdG9yID09PSB1bmRlZmluZWQgJiYgbGltaXQgPT09IDAgPyBbXSA6IF9zcGxpdC5jYWxsKHRoaXMsIHNlcGFyYXRvciwgbGltaXQpOwogICAgfTsKICB9CiAgLy8gMjEuMS4zLjE3IFN0cmluZy5wcm90b3R5cGUuc3BsaXQoc2VwYXJhdG9yLCBsaW1pdCkKICByZXR1cm4gW2Z1bmN0aW9uIHNwbGl0KHNlcGFyYXRvciwgbGltaXQpewogICAgdmFyIE8gID0gZGVmaW5lZCh0aGlzKQogICAgICAsIGZuID0gc2VwYXJhdG9yID09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHNlcGFyYXRvcltTUExJVF07CiAgICByZXR1cm4gZm4gIT09IHVuZGVmaW5lZCA/IGZuLmNhbGwoc2VwYXJhdG9yLCBPLCBsaW1pdCkgOiAkc3BsaXQuY2FsbChTdHJpbmcoTyksIHNlcGFyYXRvciwgbGltaXQpOwogIH0sICRzcGxpdF07Cn0pOwp9LHsiLi9fZml4LXJlLXdrcyI6MzUsIi4vX2lzLXJlZ2V4cCI6NTB9XSwyMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnJlcXVpcmUoJy4vZXM2LnJlZ2V4cC5mbGFncycpOwp2YXIgYW5PYmplY3QgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKQogICwgJGZsYWdzICAgICAgPSByZXF1aXJlKCcuL19mbGFncycpCiAgLCBERVNDUklQVE9SUyA9IHJlcXVpcmUoJy4vX2Rlc2NyaXB0b3JzJykKICAsIFRPX1NUUklORyAgID0gJ3RvU3RyaW5nJwogICwgJHRvU3RyaW5nICAgPSAvLi9bVE9fU1RSSU5HXTsKCnZhciBkZWZpbmUgPSBmdW5jdGlvbihmbil7CiAgcmVxdWlyZSgnLi9fcmVkZWZpbmUnKShSZWdFeHAucHJvdG90eXBlLCBUT19TVFJJTkcsIGZuLCB0cnVlKTsKfTsKCi8vIDIxLjIuNS4xNCBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nKCkKaWYocmVxdWlyZSgnLi9fZmFpbHMnKShmdW5jdGlvbigpeyByZXR1cm4gJHRvU3RyaW5nLmNhbGwoe3NvdXJjZTogJ2EnLCBmbGFnczogJ2InfSkgIT0gJy9hL2InOyB9KSl7CiAgZGVmaW5lKGZ1bmN0aW9uIHRvU3RyaW5nKCl7CiAgICB2YXIgUiA9IGFuT2JqZWN0KHRoaXMpOwogICAgcmV0dXJuICcvJy5jb25jYXQoUi5zb3VyY2UsICcvJywKICAgICAgJ2ZsYWdzJyBpbiBSID8gUi5mbGFncyA6ICFERVNDUklQVE9SUyAmJiBSIGluc3RhbmNlb2YgUmVnRXhwID8gJGZsYWdzLmNhbGwoUikgOiB1bmRlZmluZWQpOwogIH0pOwovLyBGRjQ0LSBSZWdFeHAjdG9TdHJpbmcgaGFzIGEgd3JvbmcgbmFtZQp9IGVsc2UgaWYoJHRvU3RyaW5nLm5hbWUgIT0gVE9fU1RSSU5HKXsKICBkZWZpbmUoZnVuY3Rpb24gdG9TdHJpbmcoKXsKICAgIHJldHVybiAkdG9TdHJpbmcuY2FsbCh0aGlzKTsKICB9KTsKfQp9LHsiLi9fYW4tb2JqZWN0Ijo3LCIuL19kZXNjcmlwdG9ycyI6MjgsIi4vX2ZhaWxzIjozNCwiLi9fZmxhZ3MiOjM2LCIuL19yZWRlZmluZSI6ODcsIi4vZXM2LnJlZ2V4cC5mbGFncyI6MjE1fV0sMjIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgc3Ryb25nID0gcmVxdWlyZSgnLi9fY29sbGVjdGlvbi1zdHJvbmcnKTsKCi8vIDIzLjIgU2V0IE9iamVjdHMKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL19jb2xsZWN0aW9uJykoJ1NldCcsIGZ1bmN0aW9uKGdldCl7CiAgcmV0dXJuIGZ1bmN0aW9uIFNldCgpeyByZXR1cm4gZ2V0KHRoaXMsIGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTsgfTsKfSwgewogIC8vIDIzLjIuMy4xIFNldC5wcm90b3R5cGUuYWRkKHZhbHVlKQogIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKXsKICAgIHJldHVybiBzdHJvbmcuZGVmKHRoaXMsIHZhbHVlID0gdmFsdWUgPT09IDAgPyAwIDogdmFsdWUsIHZhbHVlKTsKICB9Cn0sIHN0cm9uZyk7Cn0seyIuL19jb2xsZWN0aW9uIjoyMiwiLi9fY29sbGVjdGlvbi1zdHJvbmciOjE5fV0sMjIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyBCLjIuMy4yIFN0cmluZy5wcm90b3R5cGUuYW5jaG9yKG5hbWUpCnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2FuY2hvcicsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpewogIHJldHVybiBmdW5jdGlvbiBhbmNob3IobmFtZSl7CiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYScsICduYW1lJywgbmFtZSk7CiAgfQp9KTsKfSx7Ii4vX3N0cmluZy1odG1sIjo5OX1dLDIyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gQi4yLjMuMyBTdHJpbmcucHJvdG90eXBlLmJpZygpCnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2JpZycsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpewogIHJldHVybiBmdW5jdGlvbiBiaWcoKXsKICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdiaWcnLCAnJywgJycpOwogIH0KfSk7Cn0seyIuL19zdHJpbmctaHRtbCI6OTl9XSwyMjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIEIuMi4zLjQgU3RyaW5nLnByb3RvdHlwZS5ibGluaygpCnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2JsaW5rJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7CiAgcmV0dXJuIGZ1bmN0aW9uIGJsaW5rKCl7CiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYmxpbmsnLCAnJywgJycpOwogIH0KfSk7Cn0seyIuL19zdHJpbmctaHRtbCI6OTl9XSwyMjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIEIuMi4zLjUgU3RyaW5nLnByb3RvdHlwZS5ib2xkKCkKcmVxdWlyZSgnLi9fc3RyaW5nLWh0bWwnKSgnYm9sZCcsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpewogIHJldHVybiBmdW5jdGlvbiBib2xkKCl7CiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYicsICcnLCAnJyk7CiAgfQp9KTsKfSx7Ii4vX3N0cmluZy1odG1sIjo5OX1dLDIyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJGF0ICAgICA9IHJlcXVpcmUoJy4vX3N0cmluZy1hdCcpKGZhbHNlKTsKJGV4cG9ydCgkZXhwb3J0LlAsICdTdHJpbmcnLCB7CiAgLy8gMjEuMS4zLjMgU3RyaW5nLnByb3RvdHlwZS5jb2RlUG9pbnRBdChwb3MpCiAgY29kZVBvaW50QXQ6IGZ1bmN0aW9uIGNvZGVQb2ludEF0KHBvcyl7CiAgICByZXR1cm4gJGF0KHRoaXMsIHBvcyk7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX3N0cmluZy1hdCI6OTd9XSwyMjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMS4xLjMuNiBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoKHNlYXJjaFN0cmluZyBbLCBlbmRQb3NpdGlvbl0pCid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCB0b0xlbmd0aCAgPSByZXF1aXJlKCcuL190by1sZW5ndGgnKQogICwgY29udGV4dCAgID0gcmVxdWlyZSgnLi9fc3RyaW5nLWNvbnRleHQnKQogICwgRU5EU19XSVRIID0gJ2VuZHNXaXRoJwogICwgJGVuZHNXaXRoID0gJydbRU5EU19XSVRIXTsKCiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMtaXMtcmVnZXhwJykoRU5EU19XSVRIKSwgJ1N0cmluZycsIHsKICBlbmRzV2l0aDogZnVuY3Rpb24gZW5kc1dpdGgoc2VhcmNoU3RyaW5nIC8qLCBlbmRQb3NpdGlvbiA9IEBsZW5ndGggKi8pewogICAgdmFyIHRoYXQgPSBjb250ZXh0KHRoaXMsIHNlYXJjaFN0cmluZywgRU5EU19XSVRIKQogICAgICAsIGVuZFBvc2l0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQKICAgICAgLCBsZW4gICAgPSB0b0xlbmd0aCh0aGF0Lmxlbmd0aCkKICAgICAgLCBlbmQgICAgPSBlbmRQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gbGVuIDogTWF0aC5taW4odG9MZW5ndGgoZW5kUG9zaXRpb24pLCBsZW4pCiAgICAgICwgc2VhcmNoID0gU3RyaW5nKHNlYXJjaFN0cmluZyk7CiAgICByZXR1cm4gJGVuZHNXaXRoCiAgICAgID8gJGVuZHNXaXRoLmNhbGwodGhhdCwgc2VhcmNoLCBlbmQpCiAgICAgIDogdGhhdC5zbGljZShlbmQgLSBzZWFyY2gubGVuZ3RoLCBlbmQpID09PSBzZWFyY2g7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX2ZhaWxzLWlzLXJlZ2V4cCI6MzMsIi4vX3N0cmluZy1jb250ZXh0Ijo5OCwiLi9fdG8tbGVuZ3RoIjoxMDh9XSwyMjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIEIuMi4zLjYgU3RyaW5nLnByb3RvdHlwZS5maXhlZCgpCnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2ZpeGVkJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7CiAgcmV0dXJuIGZ1bmN0aW9uIGZpeGVkKCl7CiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAndHQnLCAnJywgJycpOwogIH0KfSk7Cn0seyIuL19zdHJpbmctaHRtbCI6OTl9XSwyMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIEIuMi4zLjcgU3RyaW5nLnByb3RvdHlwZS5mb250Y29sb3IoY29sb3IpCnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2ZvbnRjb2xvcicsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpewogIHJldHVybiBmdW5jdGlvbiBmb250Y29sb3IoY29sb3IpewogICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2ZvbnQnLCAnY29sb3InLCBjb2xvcik7CiAgfQp9KTsKfSx7Ii4vX3N0cmluZy1odG1sIjo5OX1dLDIzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gQi4yLjMuOCBTdHJpbmcucHJvdG90eXBlLmZvbnRzaXplKHNpemUpCnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ2ZvbnRzaXplJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7CiAgcmV0dXJuIGZ1bmN0aW9uIGZvbnRzaXplKHNpemUpewogICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ2ZvbnQnLCAnc2l6ZScsIHNpemUpOwogIH0KfSk7Cn0seyIuL19zdHJpbmctaHRtbCI6OTl9XSwyMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgdG9JbmRleCAgICAgICAgPSByZXF1aXJlKCcuL190by1pbmRleCcpCiAgLCBmcm9tQ2hhckNvZGUgICA9IFN0cmluZy5mcm9tQ2hhckNvZGUKICAsICRmcm9tQ29kZVBvaW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQ7CgovLyBsZW5ndGggc2hvdWxkIGJlIDEsIG9sZCBGRiBwcm9ibGVtCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKCEhJGZyb21Db2RlUG9pbnQgJiYgJGZyb21Db2RlUG9pbnQubGVuZ3RoICE9IDEpLCAnU3RyaW5nJywgewogIC8vIDIxLjEuMi4yIFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHMpCiAgZnJvbUNvZGVQb2ludDogZnVuY3Rpb24gZnJvbUNvZGVQb2ludCh4KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogICAgdmFyIHJlcyAgPSBbXQogICAgICAsIGFMZW4gPSBhcmd1bWVudHMubGVuZ3RoCiAgICAgICwgaSAgICA9IDAKICAgICAgLCBjb2RlOwogICAgd2hpbGUoYUxlbiA+IGkpewogICAgICBjb2RlID0gK2FyZ3VtZW50c1tpKytdOwogICAgICBpZih0b0luZGV4KGNvZGUsIDB4MTBmZmZmKSAhPT0gY29kZSl0aHJvdyBSYW5nZUVycm9yKGNvZGUgKyAnIGlzIG5vdCBhIHZhbGlkIGNvZGUgcG9pbnQnKTsKICAgICAgcmVzLnB1c2goY29kZSA8IDB4MTAwMDAKICAgICAgICA/IGZyb21DaGFyQ29kZShjb2RlKQogICAgICAgIDogZnJvbUNoYXJDb2RlKCgoY29kZSAtPSAweDEwMDAwKSA+PiAxMCkgKyAweGQ4MDAsIGNvZGUgJSAweDQwMCArIDB4ZGMwMCkKICAgICAgKTsKICAgIH0gcmV0dXJuIHJlcy5qb2luKCcnKTsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9fdG8taW5kZXgiOjEwNX1dLDIzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIDIxLjEuMy43IFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbiA9IDApCid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGNvbnRleHQgID0gcmVxdWlyZSgnLi9fc3RyaW5nLWNvbnRleHQnKQogICwgSU5DTFVERVMgPSAnaW5jbHVkZXMnOwoKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiByZXF1aXJlKCcuL19mYWlscy1pcy1yZWdleHAnKShJTkNMVURFUyksICdTdHJpbmcnLCB7CiAgaW5jbHVkZXM6IGZ1bmN0aW9uIGluY2x1ZGVzKHNlYXJjaFN0cmluZyAvKiwgcG9zaXRpb24gPSAwICovKXsKICAgIHJldHVybiAhIX5jb250ZXh0KHRoaXMsIHNlYXJjaFN0cmluZywgSU5DTFVERVMpCiAgICAgIC5pbmRleE9mKHNlYXJjaFN0cmluZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19mYWlscy1pcy1yZWdleHAiOjMzLCIuL19zdHJpbmctY29udGV4dCI6OTh9XSwyMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIEIuMi4zLjkgU3RyaW5nLnByb3RvdHlwZS5pdGFsaWNzKCkKcmVxdWlyZSgnLi9fc3RyaW5nLWh0bWwnKSgnaXRhbGljcycsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpewogIHJldHVybiBmdW5jdGlvbiBpdGFsaWNzKCl7CiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnaScsICcnLCAnJyk7CiAgfQp9KTsKfSx7Ii4vX3N0cmluZy1odG1sIjo5OX1dLDIzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRhdCAgPSByZXF1aXJlKCcuL19zdHJpbmctYXQnKSh0cnVlKTsKCi8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKcmVxdWlyZSgnLi9faXRlci1kZWZpbmUnKShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbihpdGVyYXRlZCl7CiAgdGhpcy5fdCA9IFN0cmluZyhpdGVyYXRlZCk7IC8vIHRhcmdldAogIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4Ci8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkKfSwgZnVuY3Rpb24oKXsKICB2YXIgTyAgICAgPSB0aGlzLl90CiAgICAsIGluZGV4ID0gdGhpcy5faQogICAgLCBwb2ludDsKICBpZihpbmRleCA+PSBPLmxlbmd0aClyZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9OwogIHBvaW50ID0gJGF0KE8sIGluZGV4KTsKICB0aGlzLl9pICs9IHBvaW50Lmxlbmd0aDsKICByZXR1cm4ge3ZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2V9Owp9KTsKfSx7Ii4vX2l0ZXItZGVmaW5lIjo1MywiLi9fc3RyaW5nLWF0Ijo5N31dLDIzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gQi4yLjMuMTAgU3RyaW5nLnByb3RvdHlwZS5saW5rKHVybCkKcmVxdWlyZSgnLi9fc3RyaW5nLWh0bWwnKSgnbGluaycsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpewogIHJldHVybiBmdW5jdGlvbiBsaW5rKHVybCl7CiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnYScsICdocmVmJywgdXJsKTsKICB9Cn0pOwp9LHsiLi9fc3RyaW5nLWh0bWwiOjk5fV0sMjM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyICRleHBvcnQgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCB0b0lPYmplY3QgPSByZXF1aXJlKCcuL190by1pb2JqZWN0JykKICAsIHRvTGVuZ3RoICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdTdHJpbmcnLCB7CiAgLy8gMjEuMS4yLjQgU3RyaW5nLnJhdyhjYWxsU2l0ZSwgLi4uc3Vic3RpdHV0aW9ucykKICByYXc6IGZ1bmN0aW9uIHJhdyhjYWxsU2l0ZSl7CiAgICB2YXIgdHBsICA9IHRvSU9iamVjdChjYWxsU2l0ZS5yYXcpCiAgICAgICwgbGVuICA9IHRvTGVuZ3RoKHRwbC5sZW5ndGgpCiAgICAgICwgYUxlbiA9IGFyZ3VtZW50cy5sZW5ndGgKICAgICAgLCByZXMgID0gW10KICAgICAgLCBpICAgID0gMDsKICAgIHdoaWxlKGxlbiA+IGkpewogICAgICByZXMucHVzaChTdHJpbmcodHBsW2krK10pKTsKICAgICAgaWYoaSA8IGFMZW4pcmVzLnB1c2goU3RyaW5nKGFyZ3VtZW50c1tpXSkpOwogICAgfSByZXR1cm4gcmVzLmpvaW4oJycpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL190by1pb2JqZWN0IjoxMDcsIi4vX3RvLWxlbmd0aCI6MTA4fV0sMjM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywgewogIC8vIDIxLjEuMy4xMyBTdHJpbmcucHJvdG90eXBlLnJlcGVhdChjb3VudCkKICByZXBlYXQ6IHJlcXVpcmUoJy4vX3N0cmluZy1yZXBlYXQnKQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX3N0cmluZy1yZXBlYXQiOjEwMX1dLDIzODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gQi4yLjMuMTEgU3RyaW5nLnByb3RvdHlwZS5zbWFsbCgpCnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ3NtYWxsJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7CiAgcmV0dXJuIGZ1bmN0aW9uIHNtYWxsKCl7CiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnc21hbGwnLCAnJywgJycpOwogIH0KfSk7Cn0seyIuL19zdHJpbmctaHRtbCI6OTl9XSwyMzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyAyMS4xLjMuMTggU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoKHNlYXJjaFN0cmluZyBbLCBwb3NpdGlvbiBdKQondXNlIHN0cmljdCc7CnZhciAkZXhwb3J0ICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCB0b0xlbmd0aCAgICA9IHJlcXVpcmUoJy4vX3RvLWxlbmd0aCcpCiAgLCBjb250ZXh0ICAgICA9IHJlcXVpcmUoJy4vX3N0cmluZy1jb250ZXh0JykKICAsIFNUQVJUU19XSVRIID0gJ3N0YXJ0c1dpdGgnCiAgLCAkc3RhcnRzV2l0aCA9ICcnW1NUQVJUU19XSVRIXTsKCiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogcmVxdWlyZSgnLi9fZmFpbHMtaXMtcmVnZXhwJykoU1RBUlRTX1dJVEgpLCAnU3RyaW5nJywgewogIHN0YXJ0c1dpdGg6IGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc2VhcmNoU3RyaW5nIC8qLCBwb3NpdGlvbiA9IDAgKi8pewogICAgdmFyIHRoYXQgICA9IGNvbnRleHQodGhpcywgc2VhcmNoU3RyaW5nLCBTVEFSVFNfV0lUSCkKICAgICAgLCBpbmRleCAgPSB0b0xlbmd0aChNYXRoLm1pbihhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCwgdGhhdC5sZW5ndGgpKQogICAgICAsIHNlYXJjaCA9IFN0cmluZyhzZWFyY2hTdHJpbmcpOwogICAgcmV0dXJuICRzdGFydHNXaXRoCiAgICAgID8gJHN0YXJ0c1dpdGguY2FsbCh0aGF0LCBzZWFyY2gsIGluZGV4KQogICAgICA6IHRoYXQuc2xpY2UoaW5kZXgsIGluZGV4ICsgc2VhcmNoLmxlbmd0aCkgPT09IHNlYXJjaDsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9fZmFpbHMtaXMtcmVnZXhwIjozMywiLi9fc3RyaW5nLWNvbnRleHQiOjk4LCIuL190by1sZW5ndGgiOjEwOH1dLDI0MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gQi4yLjMuMTIgU3RyaW5nLnByb3RvdHlwZS5zdHJpa2UoKQpyZXF1aXJlKCcuL19zdHJpbmctaHRtbCcpKCdzdHJpa2UnLCBmdW5jdGlvbihjcmVhdGVIVE1MKXsKICByZXR1cm4gZnVuY3Rpb24gc3RyaWtlKCl7CiAgICByZXR1cm4gY3JlYXRlSFRNTCh0aGlzLCAnc3RyaWtlJywgJycsICcnKTsKICB9Cn0pOwp9LHsiLi9fc3RyaW5nLWh0bWwiOjk5fV0sMjQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyBCLjIuMy4xMyBTdHJpbmcucHJvdG90eXBlLnN1YigpCnJlcXVpcmUoJy4vX3N0cmluZy1odG1sJykoJ3N1YicsIGZ1bmN0aW9uKGNyZWF0ZUhUTUwpewogIHJldHVybiBmdW5jdGlvbiBzdWIoKXsKICAgIHJldHVybiBjcmVhdGVIVE1MKHRoaXMsICdzdWInLCAnJywgJycpOwogIH0KfSk7Cn0seyIuL19zdHJpbmctaHRtbCI6OTl9XSwyNDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIEIuMi4zLjE0IFN0cmluZy5wcm90b3R5cGUuc3VwKCkKcmVxdWlyZSgnLi9fc3RyaW5nLWh0bWwnKSgnc3VwJywgZnVuY3Rpb24oY3JlYXRlSFRNTCl7CiAgcmV0dXJuIGZ1bmN0aW9uIHN1cCgpewogICAgcmV0dXJuIGNyZWF0ZUhUTUwodGhpcywgJ3N1cCcsICcnLCAnJyk7CiAgfQp9KTsKfSx7Ii4vX3N0cmluZy1odG1sIjo5OX1dLDI0MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gMjEuMS4zLjI1IFN0cmluZy5wcm90b3R5cGUudHJpbSgpCnJlcXVpcmUoJy4vX3N0cmluZy10cmltJykoJ3RyaW0nLCBmdW5jdGlvbigkdHJpbSl7CiAgcmV0dXJuIGZ1bmN0aW9uIHRyaW0oKXsKICAgIHJldHVybiAkdHJpbSh0aGlzLCAzKTsKICB9Owp9KTsKfSx7Ii4vX3N0cmluZy10cmltIjoxMDJ9XSwyNDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW0KdmFyIGdsb2JhbCAgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykKICAsIGhhcyAgICAgICAgICAgID0gcmVxdWlyZSgnLi9faGFzJykKICAsIERFU0NSSVBUT1JTICAgID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKQogICwgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgcmVkZWZpbmUgICAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpCiAgLCBNRVRBICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGEnKS5LRVkKICAsICRmYWlscyAgICAgICAgID0gcmVxdWlyZSgnLi9fZmFpbHMnKQogICwgc2hhcmVkICAgICAgICAgPSByZXF1aXJlKCcuL19zaGFyZWQnKQogICwgc2V0VG9TdHJpbmdUYWcgPSByZXF1aXJlKCcuL19zZXQtdG8tc3RyaW5nLXRhZycpCiAgLCB1aWQgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3VpZCcpCiAgLCB3a3MgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcycpCiAgLCB3a3NFeHQgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcy1leHQnKQogICwgd2tzRGVmaW5lICAgICAgPSByZXF1aXJlKCcuL193a3MtZGVmaW5lJykKICAsIGtleU9mICAgICAgICAgID0gcmVxdWlyZSgnLi9fa2V5b2YnKQogICwgZW51bUtleXMgICAgICAgPSByZXF1aXJlKCcuL19lbnVtLWtleXMnKQogICwgaXNBcnJheSAgICAgICAgPSByZXF1aXJlKCcuL19pcy1hcnJheScpCiAgLCBhbk9iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCB0b0lPYmplY3QgICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKQogICwgdG9QcmltaXRpdmUgICAgPSByZXF1aXJlKCcuL190by1wcmltaXRpdmUnKQogICwgY3JlYXRlRGVzYyAgICAgPSByZXF1aXJlKCcuL19wcm9wZXJ0eS1kZXNjJykKICAsIF9jcmVhdGUgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWNyZWF0ZScpCiAgLCBnT1BORXh0ICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BuLWV4dCcpCiAgLCAkR09QRCAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1nb3BkJykKICAsICREUCAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykKICAsICRrZXlzICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWtleXMnKQogICwgZ09QRCAgICAgICAgICAgPSAkR09QRC5mCiAgLCBkUCAgICAgICAgICAgICA9ICREUC5mCiAgLCBnT1BOICAgICAgICAgICA9IGdPUE5FeHQuZgogICwgJFN5bWJvbCAgICAgICAgPSBnbG9iYWwuU3ltYm9sCiAgLCAkSlNPTiAgICAgICAgICA9IGdsb2JhbC5KU09OCiAgLCBfc3RyaW5naWZ5ICAgICA9ICRKU09OICYmICRKU09OLnN0cmluZ2lmeQogICwgUFJPVE9UWVBFICAgICAgPSAncHJvdG90eXBlJwogICwgSElEREVOICAgICAgICAgPSB3a3MoJ19oaWRkZW4nKQogICwgVE9fUFJJTUlUSVZFICAgPSB3a3MoJ3RvUHJpbWl0aXZlJykKICAsIGlzRW51bSAgICAgICAgID0ge30ucHJvcGVydHlJc0VudW1lcmFibGUKICAsIFN5bWJvbFJlZ2lzdHJ5ID0gc2hhcmVkKCdzeW1ib2wtcmVnaXN0cnknKQogICwgQWxsU3ltYm9scyAgICAgPSBzaGFyZWQoJ3N5bWJvbHMnKQogICwgT1BTeW1ib2xzICAgICAgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKQogICwgT2JqZWN0UHJvdG8gICAgPSBPYmplY3RbUFJPVE9UWVBFXQogICwgVVNFX05BVElWRSAgICAgPSB0eXBlb2YgJFN5bWJvbCA9PSAnZnVuY3Rpb24nCiAgLCBRT2JqZWN0ICAgICAgICA9IGdsb2JhbC5RT2JqZWN0OwovLyBEb24ndCB1c2Ugc2V0dGVycyBpbiBRdCBTY3JpcHQsIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xNzMKdmFyIHNldHRlciA9ICFRT2JqZWN0IHx8ICFRT2JqZWN0W1BST1RPVFlQRV0gfHwgIVFPYmplY3RbUFJPVE9UWVBFXS5maW5kQ2hpbGQ7CgovLyBmYWxsYmFjayBmb3Igb2xkIEFuZHJvaWQsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD02ODcKdmFyIHNldFN5bWJvbERlc2MgPSBERVNDUklQVE9SUyAmJiAkZmFpbHMoZnVuY3Rpb24oKXsKICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiBkUCh0aGlzLCAnYScsIHt2YWx1ZTogN30pLmE7IH0KICB9KSkuYSAhPSA3Owp9KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpewogIHZhciBwcm90b0Rlc2MgPSBnT1BEKE9iamVjdFByb3RvLCBrZXkpOwogIGlmKHByb3RvRGVzYylkZWxldGUgT2JqZWN0UHJvdG9ba2V5XTsKICBkUChpdCwga2V5LCBEKTsKICBpZihwcm90b0Rlc2MgJiYgaXQgIT09IE9iamVjdFByb3RvKWRQKE9iamVjdFByb3RvLCBrZXksIHByb3RvRGVzYyk7Cn0gOiBkUDsKCnZhciB3cmFwID0gZnVuY3Rpb24odGFnKXsKICB2YXIgc3ltID0gQWxsU3ltYm9sc1t0YWddID0gX2NyZWF0ZSgkU3ltYm9sW1BST1RPVFlQRV0pOwogIHN5bS5fayA9IHRhZzsKICByZXR1cm4gc3ltOwp9OwoKdmFyIGlzU3ltYm9sID0gVVNFX05BVElWRSAmJiB0eXBlb2YgJFN5bWJvbC5pdGVyYXRvciA9PSAnc3ltYm9sJyA/IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnOwp9IDogZnVuY3Rpb24oaXQpewogIHJldHVybiBpdCBpbnN0YW5jZW9mICRTeW1ib2w7Cn07Cgp2YXIgJGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgRCl7CiAgaWYoaXQgPT09IE9iamVjdFByb3RvKSRkZWZpbmVQcm9wZXJ0eShPUFN5bWJvbHMsIGtleSwgRCk7CiAgYW5PYmplY3QoaXQpOwogIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7CiAgYW5PYmplY3QoRCk7CiAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpewogICAgaWYoIUQuZW51bWVyYWJsZSl7CiAgICAgIGlmKCFoYXMoaXQsIEhJRERFTikpZFAoaXQsIEhJRERFTiwgY3JlYXRlRGVzYygxLCB7fSkpOwogICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgaWYoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSlpdFtISURERU5dW2tleV0gPSBmYWxzZTsKICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7CiAgICB9IHJldHVybiBzZXRTeW1ib2xEZXNjKGl0LCBrZXksIEQpOwogIH0gcmV0dXJuIGRQKGl0LCBrZXksIEQpOwp9Owp2YXIgJGRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKGl0LCBQKXsKICBhbk9iamVjdChpdCk7CiAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKQogICAgLCBpICAgID0gMAogICAgLCBsID0ga2V5cy5sZW5ndGgKICAgICwga2V5OwogIHdoaWxlKGwgPiBpKSRkZWZpbmVQcm9wZXJ0eShpdCwga2V5ID0ga2V5c1tpKytdLCBQW2tleV0pOwogIHJldHVybiBpdDsKfTsKdmFyICRjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaXQsIFApewogIHJldHVybiBQID09PSB1bmRlZmluZWQgPyBfY3JlYXRlKGl0KSA6ICRkZWZpbmVQcm9wZXJ0aWVzKF9jcmVhdGUoaXQpLCBQKTsKfTsKdmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uIHByb3BlcnR5SXNFbnVtZXJhYmxlKGtleSl7CiAgdmFyIEUgPSBpc0VudW0uY2FsbCh0aGlzLCBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpKTsKICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7CiAgcmV0dXJuIEUgfHwgIWhhcyh0aGlzLCBrZXkpIHx8ICFoYXMoQWxsU3ltYm9scywga2V5KSB8fCBoYXModGhpcywgSElEREVOKSAmJiB0aGlzW0hJRERFTl1ba2V5XSA/IEUgOiB0cnVlOwp9Owp2YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKICBpdCAgPSB0b0lPYmplY3QoaXQpOwogIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7CiAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjsKICB2YXIgRCA9IGdPUEQoaXQsIGtleSk7CiAgaWYoRCAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0pKUQuZW51bWVyYWJsZSA9IHRydWU7CiAgcmV0dXJuIEQ7Cn07CnZhciAkZ2V0T3duUHJvcGVydHlOYW1lcyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpewogIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpCiAgICAsIHJlc3VsdCA9IFtdCiAgICAsIGkgICAgICA9IDAKICAgICwga2V5OwogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpewogICAgaWYoIWhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiBrZXkgIT0gSElEREVOICYmIGtleSAhPSBNRVRBKXJlc3VsdC5wdXNoKGtleSk7CiAgfSByZXR1cm4gcmVzdWx0Owp9Owp2YXIgJGdldE93blByb3BlcnR5U3ltYm9scyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5U3ltYm9scyhpdCl7CiAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90bwogICAgLCBuYW1lcyAgPSBnT1BOKElTX09QID8gT1BTeW1ib2xzIDogdG9JT2JqZWN0KGl0KSkKICAgICwgcmVzdWx0ID0gW10KICAgICwgaSAgICAgID0gMAogICAgLCBrZXk7CiAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSl7CiAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTsKICB9IHJldHVybiByZXN1bHQ7Cn07CgovLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkKaWYoIVVTRV9OQVRJVkUpewogICRTeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woKXsKICAgIGlmKHRoaXMgaW5zdGFuY2VvZiAkU3ltYm9sKXRocm93IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIScpOwogICAgdmFyIHRhZyA9IHVpZChhcmd1bWVudHMubGVuZ3RoID4gMCA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZCk7CiAgICB2YXIgJHNldCA9IGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgaWYodGhpcyA9PT0gT2JqZWN0UHJvdG8pJHNldC5jYWxsKE9QU3ltYm9scywgdmFsdWUpOwogICAgICBpZihoYXModGhpcywgSElEREVOKSAmJiBoYXModGhpc1tISURERU5dLCB0YWcpKXRoaXNbSElEREVOXVt0YWddID0gZmFsc2U7CiAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7CiAgICB9OwogICAgaWYoREVTQ1JJUFRPUlMgJiYgc2V0dGVyKXNldFN5bWJvbERlc2MoT2JqZWN0UHJvdG8sIHRhZywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgc2V0OiAkc2V0fSk7CiAgICByZXR1cm4gd3JhcCh0YWcpOwogIH07CiAgcmVkZWZpbmUoJFN5bWJvbFtQUk9UT1RZUEVdLCAndG9TdHJpbmcnLCBmdW5jdGlvbiB0b1N0cmluZygpewogICAgcmV0dXJuIHRoaXMuX2s7CiAgfSk7CgogICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogICREUC5mICAgPSAkZGVmaW5lUHJvcGVydHk7CiAgcmVxdWlyZSgnLi9fb2JqZWN0LWdvcG4nKS5mID0gZ09QTkV4dC5mID0gJGdldE93blByb3BlcnR5TmFtZXM7CiAgcmVxdWlyZSgnLi9fb2JqZWN0LXBpZScpLmYgID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlOwogIHJlcXVpcmUoJy4vX29iamVjdC1nb3BzJykuZiA9ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CgogIGlmKERFU0NSSVBUT1JTICYmICFyZXF1aXJlKCcuL19saWJyYXJ5JykpewogICAgcmVkZWZpbmUoT2JqZWN0UHJvdG8sICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICRwcm9wZXJ0eUlzRW51bWVyYWJsZSwgdHJ1ZSk7CiAgfQoKICB3a3NFeHQuZiA9IGZ1bmN0aW9uKG5hbWUpewogICAgcmV0dXJuIHdyYXAod2tzKG5hbWUpKTsKICB9Cn0KCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtTeW1ib2w6ICRTeW1ib2x9KTsKCmZvcih2YXIgc3ltYm9scyA9ICgKICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNAogICdoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcycKKS5zcGxpdCgnLCcpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzKHN5bWJvbHNbaSsrXSk7Cgpmb3IodmFyIHN5bWJvbHMgPSAka2V5cyh3a3Muc3RvcmUpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzRGVmaW5lKHN5bWJvbHNbaSsrXSk7CgokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywgewogIC8vIDE5LjQuMi4xIFN5bWJvbC5mb3Ioa2V5KQogICdmb3InOiBmdW5jdGlvbihrZXkpewogICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKQogICAgICA/IFN5bWJvbFJlZ2lzdHJ5W2tleV0KICAgICAgOiBTeW1ib2xSZWdpc3RyeVtrZXldID0gJFN5bWJvbChrZXkpOwogIH0sCiAgLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pCiAga2V5Rm9yOiBmdW5jdGlvbiBrZXlGb3Ioa2V5KXsKICAgIGlmKGlzU3ltYm9sKGtleSkpcmV0dXJuIGtleU9mKFN5bWJvbFJlZ2lzdHJ5LCBrZXkpOwogICAgdGhyb3cgVHlwZUVycm9yKGtleSArICcgaXMgbm90IGEgc3ltYm9sIScpOwogIH0sCiAgdXNlU2V0dGVyOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSB0cnVlOyB9LAogIHVzZVNpbXBsZTogZnVuY3Rpb24oKXsgc2V0dGVyID0gZmFsc2U7IH0KfSk7CgokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnT2JqZWN0JywgewogIC8vIDE5LjEuMi4yIE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKICBjcmVhdGU6ICRjcmVhdGUsCiAgLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCiAgZGVmaW5lUHJvcGVydHk6ICRkZWZpbmVQcm9wZXJ0eSwKICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQogIGRlZmluZVByb3BlcnRpZXM6ICRkZWZpbmVQcm9wZXJ0aWVzLAogIC8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsCiAgLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKICBnZXRPd25Qcm9wZXJ0eU5hbWVzOiAkZ2V0T3duUHJvcGVydHlOYW1lcywKICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCiAgZ2V0T3duUHJvcGVydHlTeW1ib2xzOiAkZ2V0T3duUHJvcGVydHlTeW1ib2xzCn0pOwoKLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pCiRKU09OICYmICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKCFVU0VfTkFUSVZFIHx8ICRmYWlscyhmdW5jdGlvbigpewogIHZhciBTID0gJFN5bWJvbCgpOwogIC8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9CiAgLy8gV2ViS2l0IGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyBudWxsCiAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMKICByZXR1cm4gX3N0cmluZ2lmeShbU10pICE9ICdbbnVsbF0nIHx8IF9zdHJpbmdpZnkoe2E6IFN9KSAhPSAne30nIHx8IF9zdHJpbmdpZnkoT2JqZWN0KFMpKSAhPSAne30nOwp9KSksICdKU09OJywgewogIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsKICAgIGlmKGl0ID09PSB1bmRlZmluZWQgfHwgaXNTeW1ib2woaXQpKXJldHVybjsgLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZAogICAgdmFyIGFyZ3MgPSBbaXRdCiAgICAgICwgaSAgICA9IDEKICAgICAgLCByZXBsYWNlciwgJHJlcGxhY2VyOwogICAgd2hpbGUoYXJndW1lbnRzLmxlbmd0aCA+IGkpYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTsKICAgIHJlcGxhY2VyID0gYXJnc1sxXTsKICAgIGlmKHR5cGVvZiByZXBsYWNlciA9PSAnZnVuY3Rpb24nKSRyZXBsYWNlciA9IHJlcGxhY2VyOwogICAgaWYoJHJlcGxhY2VyIHx8ICFpc0FycmF5KHJlcGxhY2VyKSlyZXBsYWNlciA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpewogICAgICBpZigkcmVwbGFjZXIpdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTsKICAgICAgaWYoIWlzU3ltYm9sKHZhbHVlKSlyZXR1cm4gdmFsdWU7CiAgICB9OwogICAgYXJnc1sxXSA9IHJlcGxhY2VyOwogICAgcmV0dXJuIF9zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3MpOwogIH0KfSk7CgovLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpCiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IHJlcXVpcmUoJy4vX2hpZGUnKSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpOwovLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddCnNldFRvU3RyaW5nVGFnKCRTeW1ib2wsICdTeW1ib2wnKTsKLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXQpzZXRUb1N0cmluZ1RhZyhNYXRoLCAnTWF0aCcsIHRydWUpOwovLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQpzZXRUb1N0cmluZ1RhZyhnbG9iYWwuSlNPTiwgJ0pTT04nLCB0cnVlKTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19lbnVtLWtleXMiOjMxLCIuL19leHBvcnQiOjMyLCIuL19mYWlscyI6MzQsIi4vX2dsb2JhbCI6MzgsIi4vX2hhcyI6MzksIi4vX2hpZGUiOjQwLCIuL19pcy1hcnJheSI6NDcsIi4vX2tleW9mIjo1NywiLi9fbGlicmFyeSI6NTgsIi4vX21ldGEiOjYyLCIuL19vYmplY3QtY3JlYXRlIjo2NiwiLi9fb2JqZWN0LWRwIjo2NywiLi9fb2JqZWN0LWdvcGQiOjcwLCIuL19vYmplY3QtZ29wbiI6NzIsIi4vX29iamVjdC1nb3BuLWV4dCI6NzEsIi4vX29iamVjdC1nb3BzIjo3MywiLi9fb2JqZWN0LWtleXMiOjc2LCIuL19vYmplY3QtcGllIjo3NywiLi9fcHJvcGVydHktZGVzYyI6ODUsIi4vX3JlZGVmaW5lIjo4NywiLi9fc2V0LXRvLXN0cmluZy10YWciOjkyLCIuL19zaGFyZWQiOjk0LCIuL190by1pb2JqZWN0IjoxMDcsIi4vX3RvLXByaW1pdGl2ZSI6MTEwLCIuL191aWQiOjExNCwiLi9fd2tzIjoxMTcsIi4vX3drcy1kZWZpbmUiOjExNSwiLi9fd2tzLWV4dCI6MTE2fV0sMjQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgJGV4cG9ydCAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsICR0eXBlZCAgICAgICA9IHJlcXVpcmUoJy4vX3R5cGVkJykKICAsIGJ1ZmZlciAgICAgICA9IHJlcXVpcmUoJy4vX3R5cGVkLWJ1ZmZlcicpCiAgLCBhbk9iamVjdCAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKQogICwgdG9JbmRleCAgICAgID0gcmVxdWlyZSgnLi9fdG8taW5kZXgnKQogICwgdG9MZW5ndGggICAgID0gcmVxdWlyZSgnLi9fdG8tbGVuZ3RoJykKICAsIGlzT2JqZWN0ICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpCiAgLCBUWVBFRF9BUlJBWSAgPSByZXF1aXJlKCcuL193a3MnKSgndHlwZWRfYXJyYXknKQogICwgQXJyYXlCdWZmZXIgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykuQXJyYXlCdWZmZXIKICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IHJlcXVpcmUoJy4vX3NwZWNpZXMtY29uc3RydWN0b3InKQogICwgJEFycmF5QnVmZmVyID0gYnVmZmVyLkFycmF5QnVmZmVyCiAgLCAkRGF0YVZpZXcgICAgPSBidWZmZXIuRGF0YVZpZXcKICAsICRpc1ZpZXcgICAgICA9ICR0eXBlZC5BQlYgJiYgQXJyYXlCdWZmZXIuaXNWaWV3CiAgLCAkc2xpY2UgICAgICAgPSAkQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlCiAgLCBWSUVXICAgICAgICAgPSAkdHlwZWQuVklFVwogICwgQVJSQVlfQlVGRkVSID0gJ0FycmF5QnVmZmVyJzsKCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogKEFycmF5QnVmZmVyICE9PSAkQXJyYXlCdWZmZXIpLCB7QXJyYXlCdWZmZXI6ICRBcnJheUJ1ZmZlcn0pOwoKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhJHR5cGVkLkNPTlNUUiwgQVJSQVlfQlVGRkVSLCB7CiAgLy8gMjQuMS4zLjEgQXJyYXlCdWZmZXIuaXNWaWV3KGFyZykKICBpc1ZpZXc6IGZ1bmN0aW9uIGlzVmlldyhpdCl7CiAgICByZXR1cm4gJGlzVmlldyAmJiAkaXNWaWV3KGl0KSB8fCBpc09iamVjdChpdCkgJiYgVklFVyBpbiBpdDsKICB9Cn0pOwoKJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LlUgKyAkZXhwb3J0LkYgKiByZXF1aXJlKCcuL19mYWlscycpKGZ1bmN0aW9uKCl7CiAgcmV0dXJuICFuZXcgJEFycmF5QnVmZmVyKDIpLnNsaWNlKDEsIHVuZGVmaW5lZCkuYnl0ZUxlbmd0aDsKfSksIEFSUkFZX0JVRkZFUiwgewogIC8vIDI0LjEuNC4zIEFycmF5QnVmZmVyLnByb3RvdHlwZS5zbGljZShzdGFydCwgZW5kKQogIHNsaWNlOiBmdW5jdGlvbiBzbGljZShzdGFydCwgZW5kKXsKICAgIGlmKCRzbGljZSAhPT0gdW5kZWZpbmVkICYmIGVuZCA9PT0gdW5kZWZpbmVkKXJldHVybiAkc2xpY2UuY2FsbChhbk9iamVjdCh0aGlzKSwgc3RhcnQpOyAvLyBGRiBmaXgKICAgIHZhciBsZW4gICAgPSBhbk9iamVjdCh0aGlzKS5ieXRlTGVuZ3RoCiAgICAgICwgZmlyc3QgID0gdG9JbmRleChzdGFydCwgbGVuKQogICAgICAsIGZpbmFsICA9IHRvSW5kZXgoZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiBlbmQsIGxlbikKICAgICAgLCByZXN1bHQgPSBuZXcgKHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCAkQXJyYXlCdWZmZXIpKSh0b0xlbmd0aChmaW5hbCAtIGZpcnN0KSkKICAgICAgLCB2aWV3UyAgPSBuZXcgJERhdGFWaWV3KHRoaXMpCiAgICAgICwgdmlld1QgID0gbmV3ICREYXRhVmlldyhyZXN1bHQpCiAgICAgICwgaW5kZXggID0gMDsKICAgIHdoaWxlKGZpcnN0IDwgZmluYWwpewogICAgICB2aWV3VC5zZXRVaW50OChpbmRleCsrLCB2aWV3Uy5nZXRVaW50OChmaXJzdCsrKSk7CiAgICB9IHJldHVybiByZXN1bHQ7CiAgfQp9KTsKCnJlcXVpcmUoJy4vX3NldC1zcGVjaWVzJykoQVJSQVlfQlVGRkVSKTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fZXhwb3J0IjozMiwiLi9fZmFpbHMiOjM0LCIuL19nbG9iYWwiOjM4LCIuL19pcy1vYmplY3QiOjQ5LCIuL19zZXQtc3BlY2llcyI6OTEsIi4vX3NwZWNpZXMtY29uc3RydWN0b3IiOjk1LCIuL190by1pbmRleCI6MTA1LCIuL190by1sZW5ndGgiOjEwOCwiLi9fdHlwZWQiOjExMywiLi9fdHlwZWQtYnVmZmVyIjoxMTIsIi4vX3drcyI6MTE3fV0sMjQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhcmVxdWlyZSgnLi9fdHlwZWQnKS5BQlYsIHsKICBEYXRhVmlldzogcmVxdWlyZSgnLi9fdHlwZWQtYnVmZmVyJykuRGF0YVZpZXcKfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL190eXBlZCI6MTEzLCIuL190eXBlZC1idWZmZXIiOjExMn1dLDI0NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4vX3R5cGVkLWFycmF5JykoJ0Zsb2F0MzInLCA0LCBmdW5jdGlvbihpbml0KXsKICByZXR1cm4gZnVuY3Rpb24gRmxvYXQzMkFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCl7CiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpOwogIH07Cn0pOwp9LHsiLi9fdHlwZWQtYXJyYXkiOjExMX1dLDI0ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4vX3R5cGVkLWFycmF5JykoJ0Zsb2F0NjQnLCA4LCBmdW5jdGlvbihpbml0KXsKICByZXR1cm4gZnVuY3Rpb24gRmxvYXQ2NEFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCl7CiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpOwogIH07Cn0pOwp9LHsiLi9fdHlwZWQtYXJyYXkiOjExMX1dLDI0OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4vX3R5cGVkLWFycmF5JykoJ0ludDE2JywgMiwgZnVuY3Rpb24oaW5pdCl7CiAgcmV0dXJuIGZ1bmN0aW9uIEludDE2QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXsKICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7CiAgfTsKfSk7Cn0seyIuL190eXBlZC1hcnJheSI6MTExfV0sMjUwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnSW50MzInLCA0LCBmdW5jdGlvbihpbml0KXsKICByZXR1cm4gZnVuY3Rpb24gSW50MzJBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpewogICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTsKICB9Owp9KTsKfSx7Ii4vX3R5cGVkLWFycmF5IjoxMTF9XSwyNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpyZXF1aXJlKCcuL190eXBlZC1hcnJheScpKCdJbnQ4JywgMSwgZnVuY3Rpb24oaW5pdCl7CiAgcmV0dXJuIGZ1bmN0aW9uIEludDhBcnJheShkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpewogICAgcmV0dXJuIGluaXQodGhpcywgZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTsKICB9Owp9KTsKfSx7Ii4vX3R5cGVkLWFycmF5IjoxMTF9XSwyNTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpyZXF1aXJlKCcuL190eXBlZC1hcnJheScpKCdVaW50MTYnLCAyLCBmdW5jdGlvbihpbml0KXsKICByZXR1cm4gZnVuY3Rpb24gVWludDE2QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXsKICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7CiAgfTsKfSk7Cn0seyIuL190eXBlZC1hcnJheSI6MTExfV0sMjUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnVWludDMyJywgNCwgZnVuY3Rpb24oaW5pdCl7CiAgcmV0dXJuIGZ1bmN0aW9uIFVpbnQzMkFycmF5KGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCl7CiAgICByZXR1cm4gaW5pdCh0aGlzLCBkYXRhLCBieXRlT2Zmc2V0LCBsZW5ndGgpOwogIH07Cn0pOwp9LHsiLi9fdHlwZWQtYXJyYXkiOjExMX1dLDI1NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4vX3R5cGVkLWFycmF5JykoJ1VpbnQ4JywgMSwgZnVuY3Rpb24oaW5pdCl7CiAgcmV0dXJuIGZ1bmN0aW9uIFVpbnQ4QXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXsKICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7CiAgfTsKfSk7Cn0seyIuL190eXBlZC1hcnJheSI6MTExfV0sMjU1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi9fdHlwZWQtYXJyYXknKSgnVWludDgnLCAxLCBmdW5jdGlvbihpbml0KXsKICByZXR1cm4gZnVuY3Rpb24gVWludDhDbGFtcGVkQXJyYXkoZGF0YSwgYnl0ZU9mZnNldCwgbGVuZ3RoKXsKICAgIHJldHVybiBpbml0KHRoaXMsIGRhdGEsIGJ5dGVPZmZzZXQsIGxlbmd0aCk7CiAgfTsKfSwgdHJ1ZSk7Cn0seyIuL190eXBlZC1hcnJheSI6MTExfV0sMjU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgZWFjaCAgICAgICAgID0gcmVxdWlyZSgnLi9fYXJyYXktbWV0aG9kcycpKDApCiAgLCByZWRlZmluZSAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpCiAgLCBtZXRhICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhJykKICAsIGFzc2lnbiAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1hc3NpZ24nKQogICwgd2VhayAgICAgICAgID0gcmVxdWlyZSgnLi9fY29sbGVjdGlvbi13ZWFrJykKICAsIGlzT2JqZWN0ICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpCiAgLCBoYXMgICAgICAgICAgPSByZXF1aXJlKCcuL19oYXMnKQogICwgZ2V0V2VhayAgICAgID0gbWV0YS5nZXRXZWFrCiAgLCBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlCiAgLCB1bmNhdWdodEZyb3plblN0b3JlID0gd2Vhay51ZnN0b3JlCiAgLCB0bXAgICAgICAgICAgPSB7fQogICwgSW50ZXJuYWxNYXA7Cgp2YXIgd3JhcHBlciA9IGZ1bmN0aW9uKGdldCl7CiAgcmV0dXJuIGZ1bmN0aW9uIFdlYWtNYXAoKXsKICAgIHJldHVybiBnZXQodGhpcywgYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOwogIH07Cn07Cgp2YXIgbWV0aG9kcyA9IHsKICAvLyAyMy4zLjMuMyBXZWFrTWFwLnByb3RvdHlwZS5nZXQoa2V5KQogIGdldDogZnVuY3Rpb24gZ2V0KGtleSl7CiAgICBpZihpc09iamVjdChrZXkpKXsKICAgICAgdmFyIGRhdGEgPSBnZXRXZWFrKGtleSk7CiAgICAgIGlmKGRhdGEgPT09IHRydWUpcmV0dXJuIHVuY2F1Z2h0RnJvemVuU3RvcmUodGhpcykuZ2V0KGtleSk7CiAgICAgIHJldHVybiBkYXRhID8gZGF0YVt0aGlzLl9pXSA6IHVuZGVmaW5lZDsKICAgIH0KICB9LAogIC8vIDIzLjMuMy41IFdlYWtNYXAucHJvdG90eXBlLnNldChrZXksIHZhbHVlKQogIHNldDogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpewogICAgcmV0dXJuIHdlYWsuZGVmKHRoaXMsIGtleSwgdmFsdWUpOwogIH0KfTsKCi8vIDIzLjMgV2Vha01hcCBPYmplY3RzCnZhciAkV2Vha01hcCA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9fY29sbGVjdGlvbicpKCdXZWFrTWFwJywgd3JhcHBlciwgbWV0aG9kcywgd2VhaywgdHJ1ZSwgdHJ1ZSk7CgovLyBJRTExIFdlYWtNYXAgZnJvemVuIGtleXMgZml4CmlmKG5ldyAkV2Vha01hcCgpLnNldCgoT2JqZWN0LmZyZWV6ZSB8fCBPYmplY3QpKHRtcCksIDcpLmdldCh0bXApICE9IDcpewogIEludGVybmFsTWFwID0gd2Vhay5nZXRDb25zdHJ1Y3Rvcih3cmFwcGVyKTsKICBhc3NpZ24oSW50ZXJuYWxNYXAucHJvdG90eXBlLCBtZXRob2RzKTsKICBtZXRhLk5FRUQgPSB0cnVlOwogIGVhY2goWydkZWxldGUnLCAnaGFzJywgJ2dldCcsICdzZXQnXSwgZnVuY3Rpb24oa2V5KXsKICAgIHZhciBwcm90byAgPSAkV2Vha01hcC5wcm90b3R5cGUKICAgICAgLCBtZXRob2QgPSBwcm90b1trZXldOwogICAgcmVkZWZpbmUocHJvdG8sIGtleSwgZnVuY3Rpb24oYSwgYil7CiAgICAgIC8vIHN0b3JlIGZyb3plbiBvYmplY3RzIG9uIGludGVybmFsIHdlYWttYXAgc2hpbQogICAgICBpZihpc09iamVjdChhKSAmJiAhaXNFeHRlbnNpYmxlKGEpKXsKICAgICAgICBpZighdGhpcy5fZil0aGlzLl9mID0gbmV3IEludGVybmFsTWFwOwogICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9mW2tleV0oYSwgYik7CiAgICAgICAgcmV0dXJuIGtleSA9PSAnc2V0JyA/IHRoaXMgOiByZXN1bHQ7CiAgICAgIC8vIHN0b3JlIGFsbCB0aGUgcmVzdCBvbiBuYXRpdmUgd2Vha21hcAogICAgICB9IHJldHVybiBtZXRob2QuY2FsbCh0aGlzLCBhLCBiKTsKICAgIH0pOwogIH0pOwp9Cn0seyIuL19hcnJheS1tZXRob2RzIjoxMiwiLi9fY29sbGVjdGlvbiI6MjIsIi4vX2NvbGxlY3Rpb24td2VhayI6MjEsIi4vX2hhcyI6MzksIi4vX2lzLW9iamVjdCI6NDksIi4vX21ldGEiOjYyLCIuL19vYmplY3QtYXNzaWduIjo2NSwiLi9fcmVkZWZpbmUiOjg3fV0sMjU3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgd2VhayA9IHJlcXVpcmUoJy4vX2NvbGxlY3Rpb24td2VhaycpOwoKLy8gMjMuNCBXZWFrU2V0IE9iamVjdHMKcmVxdWlyZSgnLi9fY29sbGVjdGlvbicpKCdXZWFrU2V0JywgZnVuY3Rpb24oZ2V0KXsKICByZXR1cm4gZnVuY3Rpb24gV2Vha1NldCgpeyByZXR1cm4gZ2V0KHRoaXMsIGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTsgfTsKfSwgewogIC8vIDIzLjQuMy4xIFdlYWtTZXQucHJvdG90eXBlLmFkZCh2YWx1ZSkKICBhZGQ6IGZ1bmN0aW9uIGFkZCh2YWx1ZSl7CiAgICByZXR1cm4gd2Vhay5kZWYodGhpcywgdmFsdWUsIHRydWUpOwogIH0KfSwgd2VhaywgZmFsc2UsIHRydWUpOwp9LHsiLi9fY29sbGVjdGlvbiI6MjIsIi4vX2NvbGxlY3Rpb24td2VhayI6MjF9XSwyNTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L0FycmF5LnByb3RvdHlwZS5pbmNsdWRlcwp2YXIgJGV4cG9ydCAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsICRpbmNsdWRlcyA9IHJlcXVpcmUoJy4vX2FycmF5LWluY2x1ZGVzJykodHJ1ZSk7CgokZXhwb3J0KCRleHBvcnQuUCwgJ0FycmF5JywgewogIGluY2x1ZGVzOiBmdW5jdGlvbiBpbmNsdWRlcyhlbCAvKiwgZnJvbUluZGV4ID0gMCAqLyl7CiAgICByZXR1cm4gJGluY2x1ZGVzKHRoaXMsIGVsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCk7CiAgfQp9KTsKCnJlcXVpcmUoJy4vX2FkZC10by11bnNjb3BhYmxlcycpKCdpbmNsdWRlcycpOwp9LHsiLi9fYWRkLXRvLXVuc2NvcGFibGVzIjo1LCIuL19hcnJheS1pbmNsdWRlcyI6MTEsIi4vX2V4cG9ydCI6MzJ9XSwyNTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2dpdGh1Yi5jb20vcndhbGRyb24vdGMzOS1ub3Rlcy9ibG9iL21hc3Rlci9lczYvMjAxNC0wOS9zZXB0LTI1Lm1kIzUxMC1nbG9iYWxhc2FwLWZvci1lbnF1ZXVpbmctYS1taWNyb3Rhc2sKdmFyICRleHBvcnQgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBtaWNyb3Rhc2sgPSByZXF1aXJlKCcuL19taWNyb3Rhc2snKSgpCiAgLCBwcm9jZXNzICAgPSByZXF1aXJlKCcuL19nbG9iYWwnKS5wcm9jZXNzCiAgLCBpc05vZGUgICAgPSByZXF1aXJlKCcuL19jb2YnKShwcm9jZXNzKSA9PSAncHJvY2Vzcyc7CgokZXhwb3J0KCRleHBvcnQuRywgewogIGFzYXA6IGZ1bmN0aW9uIGFzYXAoZm4pewogICAgdmFyIGRvbWFpbiA9IGlzTm9kZSAmJiBwcm9jZXNzLmRvbWFpbjsKICAgIG1pY3JvdGFzayhkb21haW4gPyBkb21haW4uYmluZChmbikgOiBmbik7CiAgfQp9KTsKfSx7Ii4vX2NvZiI6MTgsIi4vX2V4cG9ydCI6MzIsIi4vX2dsb2JhbCI6MzgsIi4vX21pY3JvdGFzayI6NjR9XSwyNjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL3Byb3Bvc2FsLWlzLWVycm9yCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGNvZiAgICAgPSByZXF1aXJlKCcuL19jb2YnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnRXJyb3InLCB7CiAgaXNFcnJvcjogZnVuY3Rpb24gaXNFcnJvcihpdCl7CiAgICByZXR1cm4gY29mKGl0KSA9PT0gJ0Vycm9yJzsKICB9Cn0pOwp9LHsiLi9fY29mIjoxOCwiLi9fZXhwb3J0IjozMn1dLDI2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EYXZpZEJydWFudC9NYXAtU2V0LnByb3RvdHlwZS50b0pTT04KdmFyICRleHBvcnQgID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuUiwgJ01hcCcsIHt0b0pTT046IHJlcXVpcmUoJy4vX2NvbGxlY3Rpb24tdG8tanNvbicpKCdNYXAnKX0pOwp9LHsiLi9fY29sbGVjdGlvbi10by1qc29uIjoyMCwiLi9fZXhwb3J0IjozMn1dLDI2MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7CiAgaWFkZGg6IGZ1bmN0aW9uIGlhZGRoKHgwLCB4MSwgeTAsIHkxKXsKICAgIHZhciAkeDAgPSB4MCA+Pj4gMAogICAgICAsICR4MSA9IHgxID4+PiAwCiAgICAgICwgJHkwID0geTAgPj4+IDA7CiAgICByZXR1cm4gJHgxICsgKHkxID4+PiAwKSArICgoJHgwICYgJHkwIHwgKCR4MCB8ICR5MCkgJiB+KCR4MCArICR5MCA+Pj4gMCkpID4+PiAzMSkgfCAwOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyfV0sMjYzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDMKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnTWF0aCcsIHsKICBpbXVsaDogZnVuY3Rpb24gaW11bGgodSwgdil7CiAgICB2YXIgVUlOVDE2ID0gMHhmZmZmCiAgICAgICwgJHUgPSArdQogICAgICAsICR2ID0gK3YKICAgICAgLCB1MCA9ICR1ICYgVUlOVDE2CiAgICAgICwgdjAgPSAkdiAmIFVJTlQxNgogICAgICAsIHUxID0gJHUgPj4gMTYKICAgICAgLCB2MSA9ICR2ID4+IDE2CiAgICAgICwgdCAgPSAodTEgKiB2MCA+Pj4gMCkgKyAodTAgKiB2MCA+Pj4gMTYpOwogICAgcmV0dXJuIHUxICogdjEgKyAodCA+PiAxNikgKyAoKHUwICogdjEgPj4+IDApICsgKHQgJiBVSU5UMTYpID4+IDE2KTsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMn1dLDI2NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzCnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0Jyk7CgokZXhwb3J0KCRleHBvcnQuUywgJ01hdGgnLCB7CiAgaXN1Ymg6IGZ1bmN0aW9uIGlzdWJoKHgwLCB4MSwgeTAsIHkxKXsKICAgIHZhciAkeDAgPSB4MCA+Pj4gMAogICAgICAsICR4MSA9IHgxID4+PiAwCiAgICAgICwgJHkwID0geTAgPj4+IDA7CiAgICByZXR1cm4gJHgxIC0gKHkxID4+PiAwKSAtICgofiR4MCAmICR5MCB8IH4oJHgwIF4gJHkwKSAmICR4MCAtICR5MCA+Pj4gMCkgPj4+IDMxKSB8IDA7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzJ9XSwyNjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwMwp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdNYXRoJywgewogIHVtdWxoOiBmdW5jdGlvbiB1bXVsaCh1LCB2KXsKICAgIHZhciBVSU5UMTYgPSAweGZmZmYKICAgICAgLCAkdSA9ICt1CiAgICAgICwgJHYgPSArdgogICAgICAsIHUwID0gJHUgJiBVSU5UMTYKICAgICAgLCB2MCA9ICR2ICYgVUlOVDE2CiAgICAgICwgdTEgPSAkdSA+Pj4gMTYKICAgICAgLCB2MSA9ICR2ID4+PiAxNgogICAgICAsIHQgID0gKHUxICogdjAgPj4+IDApICsgKHUwICogdjAgPj4+IDE2KTsKICAgIHJldHVybiB1MSAqIHYxICsgKHQgPj4+IDE2KSArICgodTAgKiB2MSA+Pj4gMCkgKyAodCAmIFVJTlQxNikgPj4+IDE2KTsKICB9Cn0pOwp9LHsiLi9fZXhwb3J0IjozMn1dLDI2NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCB0b09iamVjdCAgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgYUZ1bmN0aW9uICAgICAgID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpCiAgLCAkZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKTsKCi8vIEIuMi4yLjIgT2JqZWN0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKFAsIGdldHRlcikKcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSAmJiAkZXhwb3J0KCRleHBvcnQuUCArIHJlcXVpcmUoJy4vX29iamVjdC1mb3JjZWQtcGFtJyksICdPYmplY3QnLCB7CiAgX19kZWZpbmVHZXR0ZXJfXzogZnVuY3Rpb24gX19kZWZpbmVHZXR0ZXJfXyhQLCBnZXR0ZXIpewogICAgJGRlZmluZVByb3BlcnR5LmYodG9PYmplY3QodGhpcyksIFAsIHtnZXQ6IGFGdW5jdGlvbihnZXR0ZXIpLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWV9KTsKICB9Cn0pOwp9LHsiLi9fYS1mdW5jdGlvbiI6MywiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19leHBvcnQiOjMyLCIuL19vYmplY3QtZHAiOjY3LCIuL19vYmplY3QtZm9yY2VkLXBhbSI6NjksIi4vX3RvLW9iamVjdCI6MTA5fV0sMjY3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwp2YXIgJGV4cG9ydCAgICAgICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIHRvT2JqZWN0ICAgICAgICA9IHJlcXVpcmUoJy4vX3RvLW9iamVjdCcpCiAgLCBhRnVuY3Rpb24gICAgICAgPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJykKICAsICRkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX29iamVjdC1kcCcpOwoKLy8gQi4yLjIuMyBPYmplY3QucHJvdG90eXBlLl9fZGVmaW5lU2V0dGVyX18oUCwgc2V0dGVyKQpyZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpICYmICRleHBvcnQoJGV4cG9ydC5QICsgcmVxdWlyZSgnLi9fb2JqZWN0LWZvcmNlZC1wYW0nKSwgJ09iamVjdCcsIHsKICBfX2RlZmluZVNldHRlcl9fOiBmdW5jdGlvbiBfX2RlZmluZVNldHRlcl9fKFAsIHNldHRlcil7CiAgICAkZGVmaW5lUHJvcGVydHkuZih0b09iamVjdCh0aGlzKSwgUCwge3NldDogYUZ1bmN0aW9uKHNldHRlciksIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZX0pOwogIH0KfSk7Cn0seyIuL19hLWZ1bmN0aW9uIjozLCIuL19kZXNjcmlwdG9ycyI6MjgsIi4vX2V4cG9ydCI6MzIsIi4vX29iamVjdC1kcCI6NjcsIi4vX29iamVjdC1mb3JjZWQtcGFtIjo2OSwiLi9fdG8tb2JqZWN0IjoxMDl9XSwyNjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtdmFsdWVzLWVudHJpZXMKdmFyICRleHBvcnQgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsICRlbnRyaWVzID0gcmVxdWlyZSgnLi9fb2JqZWN0LXRvLWFycmF5JykodHJ1ZSk7CgokZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHsKICBlbnRyaWVzOiBmdW5jdGlvbiBlbnRyaWVzKGl0KXsKICAgIHJldHVybiAkZW50cmllcyhpdCk7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX29iamVjdC10by1hcnJheSI6Nzl9XSwyNjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9ycwp2YXIgJGV4cG9ydCAgICAgICAgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgb3duS2V5cyAgICAgICAgPSByZXF1aXJlKCcuL19vd24ta2V5cycpCiAgLCB0b0lPYmplY3QgICAgICA9IHJlcXVpcmUoJy4vX3RvLWlvYmplY3QnKQogICwgZ09QRCAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZ29wZCcpCiAgLCBjcmVhdGVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX2NyZWF0ZS1wcm9wZXJ0eScpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7CiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yczogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvYmplY3QpewogICAgdmFyIE8gICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KQogICAgICAsIGdldERlc2MgPSBnT1BELmYKICAgICAgLCBrZXlzICAgID0gb3duS2V5cyhPKQogICAgICAsIHJlc3VsdCAgPSB7fQogICAgICAsIGkgICAgICAgPSAwCiAgICAgICwga2V5LCBEOwogICAgd2hpbGUoa2V5cy5sZW5ndGggPiBpKWNyZWF0ZVByb3BlcnR5KHJlc3VsdCwga2V5ID0ga2V5c1tpKytdLCBnZXREZXNjKE8sIGtleSkpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9Cn0pOwp9LHsiLi9fY3JlYXRlLXByb3BlcnR5IjoyNCwiLi9fZXhwb3J0IjozMiwiLi9fb2JqZWN0LWdvcGQiOjcwLCIuL19vd24ta2V5cyI6ODAsIi4vX3RvLWlvYmplY3QiOjEwN31dLDI3MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCB0b09iamVjdCAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgdG9QcmltaXRpdmUgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJykKICAsIGdldFByb3RvdHlwZU9mICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKQogICwgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKS5mOwoKLy8gQi4yLjIuNCBPYmplY3QucHJvdG90eXBlLl9fbG9va3VwR2V0dGVyX18oUCkKcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSAmJiAkZXhwb3J0KCRleHBvcnQuUCArIHJlcXVpcmUoJy4vX29iamVjdC1mb3JjZWQtcGFtJyksICdPYmplY3QnLCB7CiAgX19sb29rdXBHZXR0ZXJfXzogZnVuY3Rpb24gX19sb29rdXBHZXR0ZXJfXyhQKXsKICAgIHZhciBPID0gdG9PYmplY3QodGhpcykKICAgICAgLCBLID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSkKICAgICAgLCBEOwogICAgZG8gewogICAgICBpZihEID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIEspKXJldHVybiBELmdldDsKICAgIH0gd2hpbGUoTyA9IGdldFByb3RvdHlwZU9mKE8pKTsKICB9Cn0pOwp9LHsiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19leHBvcnQiOjMyLCIuL19vYmplY3QtZm9yY2VkLXBhbSI6NjksIi4vX29iamVjdC1nb3BkIjo3MCwiLi9fb2JqZWN0LWdwbyI6NzQsIi4vX3RvLW9iamVjdCI6MTA5LCIuL190by1wcmltaXRpdmUiOjExMH1dLDI3MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKdmFyICRleHBvcnQgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCB0b09iamVjdCAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL190by1vYmplY3QnKQogICwgdG9QcmltaXRpdmUgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fdG8tcHJpbWl0aXZlJykKICAsIGdldFByb3RvdHlwZU9mICAgICAgICAgICA9IHJlcXVpcmUoJy4vX29iamVjdC1ncG8nKQogICwgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdvcGQnKS5mOwoKLy8gQi4yLjIuNSBPYmplY3QucHJvdG90eXBlLl9fbG9va3VwU2V0dGVyX18oUCkKcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKSAmJiAkZXhwb3J0KCRleHBvcnQuUCArIHJlcXVpcmUoJy4vX29iamVjdC1mb3JjZWQtcGFtJyksICdPYmplY3QnLCB7CiAgX19sb29rdXBTZXR0ZXJfXzogZnVuY3Rpb24gX19sb29rdXBTZXR0ZXJfXyhQKXsKICAgIHZhciBPID0gdG9PYmplY3QodGhpcykKICAgICAgLCBLID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSkKICAgICAgLCBEOwogICAgZG8gewogICAgICBpZihEID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIEspKXJldHVybiBELnNldDsKICAgIH0gd2hpbGUoTyA9IGdldFByb3RvdHlwZU9mKE8pKTsKICB9Cn0pOwp9LHsiLi9fZGVzY3JpcHRvcnMiOjI4LCIuL19leHBvcnQiOjMyLCIuL19vYmplY3QtZm9yY2VkLXBhbSI6NjksIi4vX29iamVjdC1nb3BkIjo3MCwiLi9fb2JqZWN0LWdwbyI6NzQsIi4vX3RvLW9iamVjdCI6MTA5LCIuL190by1wcmltaXRpdmUiOjExMH1dLDI3MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC12YWx1ZXMtZW50cmllcwp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCAkdmFsdWVzID0gcmVxdWlyZSgnLi9fb2JqZWN0LXRvLWFycmF5JykoZmFsc2UpOwoKJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7CiAgdmFsdWVzOiBmdW5jdGlvbiB2YWx1ZXMoaXQpewogICAgcmV0dXJuICR2YWx1ZXMoaXQpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19vYmplY3QtdG8tYXJyYXkiOjc5fV0sMjczOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlCnZhciAkZXhwb3J0ICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBnbG9iYWwgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpCiAgLCBjb3JlICAgICAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKQogICwgbWljcm90YXNrICAgPSByZXF1aXJlKCcuL19taWNyb3Rhc2snKSgpCiAgLCBPQlNFUlZBQkxFICA9IHJlcXVpcmUoJy4vX3drcycpKCdvYnNlcnZhYmxlJykKICAsIGFGdW5jdGlvbiAgID0gcmVxdWlyZSgnLi9fYS1mdW5jdGlvbicpCiAgLCBhbk9iamVjdCAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCBhbkluc3RhbmNlICA9IHJlcXVpcmUoJy4vX2FuLWluc3RhbmNlJykKICAsIHJlZGVmaW5lQWxsID0gcmVxdWlyZSgnLi9fcmVkZWZpbmUtYWxsJykKICAsIGhpZGUgICAgICAgID0gcmVxdWlyZSgnLi9faGlkZScpCiAgLCBmb3JPZiAgICAgICA9IHJlcXVpcmUoJy4vX2Zvci1vZicpCiAgLCBSRVRVUk4gICAgICA9IGZvck9mLlJFVFVSTjsKCnZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihmbil7CiAgcmV0dXJuIGZuID09IG51bGwgPyB1bmRlZmluZWQgOiBhRnVuY3Rpb24oZm4pOwp9OwoKdmFyIGNsZWFudXBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbihzdWJzY3JpcHRpb24pewogIHZhciBjbGVhbnVwID0gc3Vic2NyaXB0aW9uLl9jOwogIGlmKGNsZWFudXApewogICAgc3Vic2NyaXB0aW9uLl9jID0gdW5kZWZpbmVkOwogICAgY2xlYW51cCgpOwogIH0KfTsKCnZhciBzdWJzY3JpcHRpb25DbG9zZWQgPSBmdW5jdGlvbihzdWJzY3JpcHRpb24pewogIHJldHVybiBzdWJzY3JpcHRpb24uX28gPT09IHVuZGVmaW5lZDsKfTsKCnZhciBjbG9zZVN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbil7CiAgaWYoIXN1YnNjcmlwdGlvbkNsb3NlZChzdWJzY3JpcHRpb24pKXsKICAgIHN1YnNjcmlwdGlvbi5fbyA9IHVuZGVmaW5lZDsKICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTsKICB9Cn07Cgp2YXIgU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24ob2JzZXJ2ZXIsIHN1YnNjcmliZXIpewogIGFuT2JqZWN0KG9ic2VydmVyKTsKICB0aGlzLl9jID0gdW5kZWZpbmVkOwogIHRoaXMuX28gPSBvYnNlcnZlcjsKICBvYnNlcnZlciA9IG5ldyBTdWJzY3JpcHRpb25PYnNlcnZlcih0aGlzKTsKICB0cnkgewogICAgdmFyIGNsZWFudXAgICAgICA9IHN1YnNjcmliZXIob2JzZXJ2ZXIpCiAgICAgICwgc3Vic2NyaXB0aW9uID0gY2xlYW51cDsKICAgIGlmKGNsZWFudXAgIT0gbnVsbCl7CiAgICAgIGlmKHR5cGVvZiBjbGVhbnVwLnVuc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nKWNsZWFudXAgPSBmdW5jdGlvbigpeyBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsgfTsKICAgICAgZWxzZSBhRnVuY3Rpb24oY2xlYW51cCk7CiAgICAgIHRoaXMuX2MgPSBjbGVhbnVwOwogICAgfQogIH0gY2F0Y2goZSl7CiAgICBvYnNlcnZlci5lcnJvcihlKTsKICAgIHJldHVybjsKICB9IGlmKHN1YnNjcmlwdGlvbkNsb3NlZCh0aGlzKSljbGVhbnVwU3Vic2NyaXB0aW9uKHRoaXMpOwp9OwoKU3Vic2NyaXB0aW9uLnByb3RvdHlwZSA9IHJlZGVmaW5lQWxsKHt9LCB7CiAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCl7IGNsb3NlU3Vic2NyaXB0aW9uKHRoaXMpOyB9Cn0pOwoKdmFyIFN1YnNjcmlwdGlvbk9ic2VydmVyID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKXsKICB0aGlzLl9zID0gc3Vic2NyaXB0aW9uOwp9OwoKU3Vic2NyaXB0aW9uT2JzZXJ2ZXIucHJvdG90eXBlID0gcmVkZWZpbmVBbGwoe30sIHsKICBuZXh0OiBmdW5jdGlvbiBuZXh0KHZhbHVlKXsKICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zOwogICAgaWYoIXN1YnNjcmlwdGlvbkNsb3NlZChzdWJzY3JpcHRpb24pKXsKICAgICAgdmFyIG9ic2VydmVyID0gc3Vic2NyaXB0aW9uLl9vOwogICAgICB0cnkgewogICAgICAgIHZhciBtID0gZ2V0TWV0aG9kKG9ic2VydmVyLm5leHQpOwogICAgICAgIGlmKG0pcmV0dXJuIG0uY2FsbChvYnNlcnZlciwgdmFsdWUpOwogICAgICB9IGNhdGNoKGUpewogICAgICAgIHRyeSB7CiAgICAgICAgICBjbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKHZhbHVlKXsKICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zOwogICAgaWYoc3Vic2NyaXB0aW9uQ2xvc2VkKHN1YnNjcmlwdGlvbikpdGhyb3cgdmFsdWU7CiAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX287CiAgICBzdWJzY3JpcHRpb24uX28gPSB1bmRlZmluZWQ7CiAgICB0cnkgewogICAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlci5lcnJvcik7CiAgICAgIGlmKCFtKXRocm93IHZhbHVlOwogICAgICB2YWx1ZSA9IG0uY2FsbChvYnNlcnZlciwgdmFsdWUpOwogICAgfSBjYXRjaChlKXsKICAgICAgdHJ5IHsKICAgICAgICBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQogICAgfSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7CiAgICByZXR1cm4gdmFsdWU7CiAgfSwKICBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUodmFsdWUpewogICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuX3M7CiAgICBpZighc3Vic2NyaXB0aW9uQ2xvc2VkKHN1YnNjcmlwdGlvbikpewogICAgICB2YXIgb2JzZXJ2ZXIgPSBzdWJzY3JpcHRpb24uX287CiAgICAgIHN1YnNjcmlwdGlvbi5fbyA9IHVuZGVmaW5lZDsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlci5jb21wbGV0ZSk7CiAgICAgICAgdmFsdWUgPSBtID8gbS5jYWxsKG9ic2VydmVyLCB2YWx1ZSkgOiB1bmRlZmluZWQ7CiAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgIH0gY2xlYW51cFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgfQp9KTsKCnZhciAkT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlcil7CiAgYW5JbnN0YW5jZSh0aGlzLCAkT2JzZXJ2YWJsZSwgJ09ic2VydmFibGUnLCAnX2YnKS5fZiA9IGFGdW5jdGlvbihzdWJzY3JpYmVyKTsKfTsKCnJlZGVmaW5lQWxsKCRPYnNlcnZhYmxlLnByb3RvdHlwZSwgewogIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKG9ic2VydmVyKXsKICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKG9ic2VydmVyLCB0aGlzLl9mKTsKICB9LAogIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goZm4pewogICAgdmFyIHRoYXQgPSB0aGlzOwogICAgcmV0dXJuIG5ldyAoY29yZS5Qcm9taXNlIHx8IGdsb2JhbC5Qcm9taXNlKShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpewogICAgICBhRnVuY3Rpb24oZm4pOwogICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhhdC5zdWJzY3JpYmUoewogICAgICAgIG5leHQgOiBmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gZm4odmFsdWUpOwogICAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGVycm9yOiByZWplY3QsCiAgICAgICAgY29tcGxldGU6IHJlc29sdmUKICAgICAgfSk7CiAgICB9KTsKICB9Cn0pOwoKcmVkZWZpbmVBbGwoJE9ic2VydmFibGUsIHsKICBmcm9tOiBmdW5jdGlvbiBmcm9tKHgpewogICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiAkT2JzZXJ2YWJsZTsKICAgIHZhciBtZXRob2QgPSBnZXRNZXRob2QoYW5PYmplY3QoeClbT0JTRVJWQUJMRV0pOwogICAgaWYobWV0aG9kKXsKICAgICAgdmFyIG9ic2VydmFibGUgPSBhbk9iamVjdChtZXRob2QuY2FsbCh4KSk7CiAgICAgIHJldHVybiBvYnNlcnZhYmxlLmNvbnN0cnVjdG9yID09PSBDID8gb2JzZXJ2YWJsZSA6IG5ldyBDKGZ1bmN0aW9uKG9ic2VydmVyKXsKICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZS5zdWJzY3JpYmUob2JzZXJ2ZXIpOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbihvYnNlcnZlcil7CiAgICAgIHZhciBkb25lID0gZmFsc2U7CiAgICAgIG1pY3JvdGFzayhmdW5jdGlvbigpewogICAgICAgIGlmKCFkb25lKXsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmKGZvck9mKHgsIGZhbHNlLCBmdW5jdGlvbihpdCl7CiAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChpdCk7CiAgICAgICAgICAgICAgaWYoZG9uZSlyZXR1cm4gUkVUVVJOOwogICAgICAgICAgICB9KSA9PT0gUkVUVVJOKXJldHVybjsKICAgICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgIGlmKGRvbmUpdGhyb3cgZTsKICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gb2JzZXJ2ZXIuY29tcGxldGUoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gZnVuY3Rpb24oKXsgZG9uZSA9IHRydWU7IH07CiAgICB9KTsKICB9LAogIG9mOiBmdW5jdGlvbiBvZigpewogICAgZm9yKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGgsIGl0ZW1zID0gQXJyYXkobCk7IGkgPCBsOylpdGVtc1tpXSA9IGFyZ3VtZW50c1tpKytdOwogICAgcmV0dXJuIG5ldyAodHlwZW9mIHRoaXMgPT09ICdmdW5jdGlvbicgPyB0aGlzIDogJE9ic2VydmFibGUpKGZ1bmN0aW9uKG9ic2VydmVyKXsKICAgICAgdmFyIGRvbmUgPSBmYWxzZTsKICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7CiAgICAgICAgaWYoIWRvbmUpewogICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKXsKICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChpdGVtc1tpXSk7CiAgICAgICAgICAgIGlmKGRvbmUpcmV0dXJuOwogICAgICAgICAgfSBvYnNlcnZlci5jb21wbGV0ZSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBmdW5jdGlvbigpeyBkb25lID0gdHJ1ZTsgfTsKICAgIH0pOwogIH0KfSk7CgpoaWRlKCRPYnNlcnZhYmxlLnByb3RvdHlwZSwgT0JTRVJWQUJMRSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pOwoKJGV4cG9ydCgkZXhwb3J0LkcsIHtPYnNlcnZhYmxlOiAkT2JzZXJ2YWJsZX0pOwoKcmVxdWlyZSgnLi9fc2V0LXNwZWNpZXMnKSgnT2JzZXJ2YWJsZScpOwp9LHsiLi9fYS1mdW5jdGlvbiI6MywiLi9fYW4taW5zdGFuY2UiOjYsIi4vX2FuLW9iamVjdCI6NywiLi9fY29yZSI6MjMsIi4vX2V4cG9ydCI6MzIsIi4vX2Zvci1vZiI6MzcsIi4vX2dsb2JhbCI6MzgsIi4vX2hpZGUiOjQwLCIuL19taWNyb3Rhc2siOjY0LCIuL19yZWRlZmluZS1hbGwiOjg2LCIuL19zZXQtc3BlY2llcyI6OTEsIi4vX3drcyI6MTE3fV0sMjc0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIG1ldGFkYXRhICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhZGF0YScpCiAgLCBhbk9iamVjdCAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXkKICAsIG9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEgPSBtZXRhZGF0YS5zZXQ7CgptZXRhZGF0YS5leHAoe2RlZmluZU1ldGFkYXRhOiBmdW5jdGlvbiBkZWZpbmVNZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCB0YXJnZXRLZXkpewogIG9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUsIGFuT2JqZWN0KHRhcmdldCksIHRvTWV0YUtleSh0YXJnZXRLZXkpKTsKfX0pOwp9LHsiLi9fYW4tb2JqZWN0Ijo3LCIuL19tZXRhZGF0YSI6NjN9XSwyNzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgbWV0YWRhdGEgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGFkYXRhJykKICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKQogICwgdG9NZXRhS2V5ICAgICAgICAgICAgICA9IG1ldGFkYXRhLmtleQogICwgZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcCA9IG1ldGFkYXRhLm1hcAogICwgc3RvcmUgICAgICAgICAgICAgICAgICA9IG1ldGFkYXRhLnN0b3JlOwoKbWV0YWRhdGEuZXhwKHtkZWxldGVNZXRhZGF0YTogZnVuY3Rpb24gZGVsZXRlTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCAvKiwgdGFyZ2V0S2V5ICovKXsKICB2YXIgdGFyZ2V0S2V5ICAgPSBhcmd1bWVudHMubGVuZ3RoIDwgMyA/IHVuZGVmaW5lZCA6IHRvTWV0YUtleShhcmd1bWVudHNbMl0pCiAgICAsIG1ldGFkYXRhTWFwID0gZ2V0T3JDcmVhdGVNZXRhZGF0YU1hcChhbk9iamVjdCh0YXJnZXQpLCB0YXJnZXRLZXksIGZhbHNlKTsKICBpZihtZXRhZGF0YU1hcCA9PT0gdW5kZWZpbmVkIHx8ICFtZXRhZGF0YU1hcFsnZGVsZXRlJ10obWV0YWRhdGFLZXkpKXJldHVybiBmYWxzZTsKICBpZihtZXRhZGF0YU1hcC5zaXplKXJldHVybiB0cnVlOwogIHZhciB0YXJnZXRNZXRhZGF0YSA9IHN0b3JlLmdldCh0YXJnZXQpOwogIHRhcmdldE1ldGFkYXRhWydkZWxldGUnXSh0YXJnZXRLZXkpOwogIHJldHVybiAhIXRhcmdldE1ldGFkYXRhLnNpemUgfHwgc3RvcmVbJ2RlbGV0ZSddKHRhcmdldCk7Cn19KTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fbWV0YWRhdGEiOjYzfV0sMjc2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIFNldCAgICAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9lczYuc2V0JykKICAsIGZyb20gICAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYXJyYXktZnJvbS1pdGVyYWJsZScpCiAgLCBtZXRhZGF0YSAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGFkYXRhJykKICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIGdldFByb3RvdHlwZU9mICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpCiAgLCBvcmRpbmFyeU93bk1ldGFkYXRhS2V5cyA9IG1ldGFkYXRhLmtleXMKICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5OwoKdmFyIG9yZGluYXJ5TWV0YWRhdGFLZXlzID0gZnVuY3Rpb24oTywgUCl7CiAgdmFyIG9LZXlzICA9IG9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKE8sIFApCiAgICAsIHBhcmVudCA9IGdldFByb3RvdHlwZU9mKE8pOwogIGlmKHBhcmVudCA9PT0gbnVsbClyZXR1cm4gb0tleXM7CiAgdmFyIHBLZXlzICA9IG9yZGluYXJ5TWV0YWRhdGFLZXlzKHBhcmVudCwgUCk7CiAgcmV0dXJuIHBLZXlzLmxlbmd0aCA/IG9LZXlzLmxlbmd0aCA/IGZyb20obmV3IFNldChvS2V5cy5jb25jYXQocEtleXMpKSkgOiBwS2V5cyA6IG9LZXlzOwp9OwoKbWV0YWRhdGEuZXhwKHtnZXRNZXRhZGF0YUtleXM6IGZ1bmN0aW9uIGdldE1ldGFkYXRhS2V5cyh0YXJnZXQgLyosIHRhcmdldEtleSAqLyl7CiAgcmV0dXJuIG9yZGluYXJ5TWV0YWRhdGFLZXlzKGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1sxXSkpOwp9fSk7Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX2FycmF5LWZyb20taXRlcmFibGUiOjEwLCIuL19tZXRhZGF0YSI6NjMsIi4vX29iamVjdC1ncG8iOjc0LCIuL2VzNi5zZXQiOjIyMX1dLDI3NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBtZXRhZGF0YSAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YWRhdGEnKQogICwgYW5PYmplY3QgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCBnZXRQcm90b3R5cGVPZiAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpCiAgLCBvcmRpbmFyeUhhc093bk1ldGFkYXRhID0gbWV0YWRhdGEuaGFzCiAgLCBvcmRpbmFyeUdldE93bk1ldGFkYXRhID0gbWV0YWRhdGEuZ2V0CiAgLCB0b01ldGFLZXkgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5OwoKdmFyIG9yZGluYXJ5R2V0TWV0YWRhdGEgPSBmdW5jdGlvbihNZXRhZGF0YUtleSwgTywgUCl7CiAgdmFyIGhhc093biA9IG9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApOwogIGlmKGhhc093bilyZXR1cm4gb3JkaW5hcnlHZXRPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCk7CiAgdmFyIHBhcmVudCA9IGdldFByb3RvdHlwZU9mKE8pOwogIHJldHVybiBwYXJlbnQgIT09IG51bGwgPyBvcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LCBwYXJlbnQsIFApIDogdW5kZWZpbmVkOwp9OwoKbWV0YWRhdGEuZXhwKHtnZXRNZXRhZGF0YTogZnVuY3Rpb24gZ2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCAvKiwgdGFyZ2V0S2V5ICovKXsKICByZXR1cm4gb3JkaW5hcnlHZXRNZXRhZGF0YShtZXRhZGF0YUtleSwgYW5PYmplY3QodGFyZ2V0KSwgYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiB0b01ldGFLZXkoYXJndW1lbnRzWzJdKSk7Cn19KTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fbWV0YWRhdGEiOjYzLCIuL19vYmplY3QtZ3BvIjo3NH1dLDI3ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBtZXRhZGF0YSAgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGFkYXRhJykKICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIG9yZGluYXJ5T3duTWV0YWRhdGFLZXlzID0gbWV0YWRhdGEua2V5cwogICwgdG9NZXRhS2V5ICAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXk7CgptZXRhZGF0YS5leHAoe2dldE93bk1ldGFkYXRhS2V5czogZnVuY3Rpb24gZ2V0T3duTWV0YWRhdGFLZXlzKHRhcmdldCAvKiwgdGFyZ2V0S2V5ICovKXsKICByZXR1cm4gb3JkaW5hcnlPd25NZXRhZGF0YUtleXMoYW5PYmplY3QodGFyZ2V0KSwgYXJndW1lbnRzLmxlbmd0aCA8IDIgPyB1bmRlZmluZWQgOiB0b01ldGFLZXkoYXJndW1lbnRzWzFdKSk7Cn19KTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fbWV0YWRhdGEiOjYzfV0sMjc5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIG1ldGFkYXRhICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhZGF0YScpCiAgLCBhbk9iamVjdCAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIG9yZGluYXJ5R2V0T3duTWV0YWRhdGEgPSBtZXRhZGF0YS5nZXQKICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXk7CgptZXRhZGF0YS5leHAoe2dldE93bk1ldGFkYXRhOiBmdW5jdGlvbiBnZXRPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0IC8qLCB0YXJnZXRLZXkgKi8pewogIHJldHVybiBvcmRpbmFyeUdldE93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBhbk9iamVjdCh0YXJnZXQpCiAgICAsIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpOwp9fSk7Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX21ldGFkYXRhIjo2M31dLDI4MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBtZXRhZGF0YSAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fbWV0YWRhdGEnKQogICwgYW5PYmplY3QgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2FuLW9iamVjdCcpCiAgLCBnZXRQcm90b3R5cGVPZiAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWdwbycpCiAgLCBvcmRpbmFyeUhhc093bk1ldGFkYXRhID0gbWV0YWRhdGEuaGFzCiAgLCB0b01ldGFLZXkgICAgICAgICAgICAgID0gbWV0YWRhdGEua2V5OwoKdmFyIG9yZGluYXJ5SGFzTWV0YWRhdGEgPSBmdW5jdGlvbihNZXRhZGF0YUtleSwgTywgUCl7CiAgdmFyIGhhc093biA9IG9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApOwogIGlmKGhhc093bilyZXR1cm4gdHJ1ZTsKICB2YXIgcGFyZW50ID0gZ2V0UHJvdG90eXBlT2YoTyk7CiAgcmV0dXJuIHBhcmVudCAhPT0gbnVsbCA/IG9yZGluYXJ5SGFzTWV0YWRhdGEoTWV0YWRhdGFLZXksIHBhcmVudCwgUCkgOiBmYWxzZTsKfTsKCm1ldGFkYXRhLmV4cCh7aGFzTWV0YWRhdGE6IGZ1bmN0aW9uIGhhc01ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyosIHRhcmdldEtleSAqLyl7CiAgcmV0dXJuIG9yZGluYXJ5SGFzTWV0YWRhdGEobWV0YWRhdGFLZXksIGFuT2JqZWN0KHRhcmdldCksIGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdW5kZWZpbmVkIDogdG9NZXRhS2V5KGFyZ3VtZW50c1syXSkpOwp9fSk7Cn0seyIuL19hbi1vYmplY3QiOjcsIi4vX21ldGFkYXRhIjo2MywiLi9fb2JqZWN0LWdwbyI6NzR9XSwyODE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgbWV0YWRhdGEgICAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGFkYXRhJykKICAsIGFuT2JqZWN0ICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19hbi1vYmplY3QnKQogICwgb3JkaW5hcnlIYXNPd25NZXRhZGF0YSA9IG1ldGFkYXRhLmhhcwogICwgdG9NZXRhS2V5ICAgICAgICAgICAgICA9IG1ldGFkYXRhLmtleTsKCm1ldGFkYXRhLmV4cCh7aGFzT3duTWV0YWRhdGE6IGZ1bmN0aW9uIGhhc093bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQgLyosIHRhcmdldEtleSAqLyl7CiAgcmV0dXJuIG9yZGluYXJ5SGFzT3duTWV0YWRhdGEobWV0YWRhdGFLZXksIGFuT2JqZWN0KHRhcmdldCkKICAgICwgYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiB0b01ldGFLZXkoYXJndW1lbnRzWzJdKSk7Cn19KTsKfSx7Ii4vX2FuLW9iamVjdCI6NywiLi9fbWV0YWRhdGEiOjYzfV0sMjgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIG1ldGFkYXRhICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19tZXRhZGF0YScpCiAgLCBhbk9iamVjdCAgICAgICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fYW4tb2JqZWN0JykKICAsIGFGdW5jdGlvbiAgICAgICAgICAgICAgICAgPSByZXF1aXJlKCcuL19hLWZ1bmN0aW9uJykKICAsIHRvTWV0YUtleSAgICAgICAgICAgICAgICAgPSBtZXRhZGF0YS5rZXkKICAsIG9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEgPSBtZXRhZGF0YS5zZXQ7CgptZXRhZGF0YS5leHAoe21ldGFkYXRhOiBmdW5jdGlvbiBtZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSl7CiAgcmV0dXJuIGZ1bmN0aW9uIGRlY29yYXRvcih0YXJnZXQsIHRhcmdldEtleSl7CiAgICBvcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKAogICAgICBtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwKICAgICAgKHRhcmdldEtleSAhPT0gdW5kZWZpbmVkID8gYW5PYmplY3QgOiBhRnVuY3Rpb24pKHRhcmdldCksCiAgICAgIHRvTWV0YUtleSh0YXJnZXRLZXkpCiAgICApOwogIH07Cn19KTsKfSx7Ii4vX2EtZnVuY3Rpb24iOjMsIi4vX2FuLW9iamVjdCI6NywiLi9fbWV0YWRhdGEiOjYzfV0sMjgzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTgp2YXIgJGV4cG9ydCAgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5SLCAnU2V0Jywge3RvSlNPTjogcmVxdWlyZSgnLi9fY29sbGVjdGlvbi10by1qc29uJykoJ1NldCcpfSk7Cn0seyIuL19jb2xsZWN0aW9uLXRvLWpzb24iOjIwLCIuL19leHBvcnQiOjMyfV0sMjg0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyBodHRwczovL2dpdGh1Yi5jb20vbWF0aGlhc2J5bmVucy9TdHJpbmcucHJvdG90eXBlLmF0CnZhciAkZXhwb3J0ID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsICRhdCAgICAgPSByZXF1aXJlKCcuL19zdHJpbmctYXQnKSh0cnVlKTsKCiRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywgewogIGF0OiBmdW5jdGlvbiBhdChwb3MpewogICAgcmV0dXJuICRhdCh0aGlzLCBwb3MpOwogIH0KfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19zdHJpbmctYXQiOjk3fV0sMjg1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL1N0cmluZy5wcm90b3R5cGUubWF0Y2hBbGwvCnZhciAkZXhwb3J0ICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBkZWZpbmVkICAgICA9IHJlcXVpcmUoJy4vX2RlZmluZWQnKQogICwgdG9MZW5ndGggICAgPSByZXF1aXJlKCcuL190by1sZW5ndGgnKQogICwgaXNSZWdFeHAgICAgPSByZXF1aXJlKCcuL19pcy1yZWdleHAnKQogICwgZ2V0RmxhZ3MgICAgPSByZXF1aXJlKCcuL19mbGFncycpCiAgLCBSZWdFeHBQcm90byA9IFJlZ0V4cC5wcm90b3R5cGU7Cgp2YXIgJFJlZ0V4cFN0cmluZ0l0ZXJhdG9yID0gZnVuY3Rpb24ocmVnZXhwLCBzdHJpbmcpewogIHRoaXMuX3IgPSByZWdleHA7CiAgdGhpcy5fcyA9IHN0cmluZzsKfTsKCnJlcXVpcmUoJy4vX2l0ZXItY3JlYXRlJykoJFJlZ0V4cFN0cmluZ0l0ZXJhdG9yLCAnUmVnRXhwIFN0cmluZycsIGZ1bmN0aW9uIG5leHQoKXsKICB2YXIgbWF0Y2ggPSB0aGlzLl9yLmV4ZWModGhpcy5fcyk7CiAgcmV0dXJuIHt2YWx1ZTogbWF0Y2gsIGRvbmU6IG1hdGNoID09PSBudWxsfTsKfSk7CgokZXhwb3J0KCRleHBvcnQuUCwgJ1N0cmluZycsIHsKICBtYXRjaEFsbDogZnVuY3Rpb24gbWF0Y2hBbGwocmVnZXhwKXsKICAgIGRlZmluZWQodGhpcyk7CiAgICBpZighaXNSZWdFeHAocmVnZXhwKSl0aHJvdyBUeXBlRXJyb3IocmVnZXhwICsgJyBpcyBub3QgYSByZWdleHAhJyk7CiAgICB2YXIgUyAgICAgPSBTdHJpbmcodGhpcykKICAgICAgLCBmbGFncyA9ICdmbGFncycgaW4gUmVnRXhwUHJvdG8gPyBTdHJpbmcocmVnZXhwLmZsYWdzKSA6IGdldEZsYWdzLmNhbGwocmVnZXhwKQogICAgICAsIHJ4ICAgID0gbmV3IFJlZ0V4cChyZWdleHAuc291cmNlLCB+ZmxhZ3MuaW5kZXhPZignZycpID8gZmxhZ3MgOiAnZycgKyBmbGFncyk7CiAgICByeC5sYXN0SW5kZXggPSB0b0xlbmd0aChyZWdleHAubGFzdEluZGV4KTsKICAgIHJldHVybiBuZXcgJFJlZ0V4cFN0cmluZ0l0ZXJhdG9yKHJ4LCBTKTsKICB9Cn0pOwp9LHsiLi9fZGVmaW5lZCI6MjcsIi4vX2V4cG9ydCI6MzIsIi4vX2ZsYWdzIjozNiwiLi9faXMtcmVnZXhwIjo1MCwiLi9faXRlci1jcmVhdGUiOjUyLCIuL190by1sZW5ndGgiOjEwOH1dLDI4NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmQKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJHBhZCAgICA9IHJlcXVpcmUoJy4vX3N0cmluZy1wYWQnKTsKCiRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywgewogIHBhZEVuZDogZnVuY3Rpb24gcGFkRW5kKG1heExlbmd0aCAvKiwgZmlsbFN0cmluZyA9ICcgJyAqLyl7CiAgICByZXR1cm4gJHBhZCh0aGlzLCBtYXhMZW5ndGgsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkLCBmYWxzZSk7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX3N0cmluZy1wYWQiOjEwMH1dLDI4NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmQKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKQogICwgJHBhZCAgICA9IHJlcXVpcmUoJy4vX3N0cmluZy1wYWQnKTsKCiRleHBvcnQoJGV4cG9ydC5QLCAnU3RyaW5nJywgewogIHBhZFN0YXJ0OiBmdW5jdGlvbiBwYWRTdGFydChtYXhMZW5ndGggLyosIGZpbGxTdHJpbmcgPSAnICcgKi8pewogICAgcmV0dXJuICRwYWQodGhpcywgbWF4TGVuZ3RoLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZCwgdHJ1ZSk7CiAgfQp9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX3N0cmluZy1wYWQiOjEwMH1dLDI4ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlYm1hcmtiYWdlL2VjbWFzY3JpcHQtc3RyaW5nLWxlZnQtcmlnaHQtdHJpbQpyZXF1aXJlKCcuL19zdHJpbmctdHJpbScpKCd0cmltTGVmdCcsIGZ1bmN0aW9uKCR0cmltKXsKICByZXR1cm4gZnVuY3Rpb24gdHJpbUxlZnQoKXsKICAgIHJldHVybiAkdHJpbSh0aGlzLCAxKTsKICB9Owp9LCAndHJpbVN0YXJ0Jyk7Cn0seyIuL19zdHJpbmctdHJpbSI6MTAyfV0sMjg5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovLyBodHRwczovL2dpdGh1Yi5jb20vc2VibWFya2JhZ2UvZWNtYXNjcmlwdC1zdHJpbmctbGVmdC1yaWdodC10cmltCnJlcXVpcmUoJy4vX3N0cmluZy10cmltJykoJ3RyaW1SaWdodCcsIGZ1bmN0aW9uKCR0cmltKXsKICByZXR1cm4gZnVuY3Rpb24gdHJpbVJpZ2h0KCl7CiAgICByZXR1cm4gJHRyaW0odGhpcywgMik7CiAgfTsKfSwgJ3RyaW1FbmQnKTsKfSx7Ii4vX3N0cmluZy10cmltIjoxMDJ9XSwyOTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpyZXF1aXJlKCcuL193a3MtZGVmaW5lJykoJ2FzeW5jSXRlcmF0b3InKTsKfSx7Ii4vX3drcy1kZWZpbmUiOjExNX1dLDI5MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4vX3drcy1kZWZpbmUnKSgnb2JzZXJ2YWJsZScpOwp9LHsiLi9fd2tzLWRlZmluZSI6MTE1fV0sMjkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL2xqaGFyYi9wcm9wb3NhbC1nbG9iYWwKdmFyICRleHBvcnQgPSByZXF1aXJlKCcuL19leHBvcnQnKTsKCiRleHBvcnQoJGV4cG9ydC5TLCAnU3lzdGVtJywge2dsb2JhbDogcmVxdWlyZSgnLi9fZ2xvYmFsJyl9KTsKfSx7Ii4vX2V4cG9ydCI6MzIsIi4vX2dsb2JhbCI6Mzh9XSwyOTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgJGl0ZXJhdG9ycyAgICA9IHJlcXVpcmUoJy4vZXM2LmFycmF5Lml0ZXJhdG9yJykKICAsIHJlZGVmaW5lICAgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZScpCiAgLCBnbG9iYWwgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykKICAsIGhpZGUgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJykKICAsIEl0ZXJhdG9ycyAgICAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKQogICwgd2tzICAgICAgICAgICA9IHJlcXVpcmUoJy4vX3drcycpCiAgLCBJVEVSQVRPUiAgICAgID0gd2tzKCdpdGVyYXRvcicpCiAgLCBUT19TVFJJTkdfVEFHID0gd2tzKCd0b1N0cmluZ1RhZycpCiAgLCBBcnJheVZhbHVlcyAgID0gSXRlcmF0b3JzLkFycmF5OwoKZm9yKHZhciBjb2xsZWN0aW9ucyA9IFsnTm9kZUxpc3QnLCAnRE9NVG9rZW5MaXN0JywgJ01lZGlhTGlzdCcsICdTdHlsZVNoZWV0TGlzdCcsICdDU1NSdWxlTGlzdCddLCBpID0gMDsgaSA8IDU7IGkrKyl7CiAgdmFyIE5BTUUgICAgICAgPSBjb2xsZWN0aW9uc1tpXQogICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdCiAgICAsIHByb3RvICAgICAgPSBDb2xsZWN0aW9uICYmIENvbGxlY3Rpb24ucHJvdG90eXBlCiAgICAsIGtleTsKICBpZihwcm90byl7CiAgICBpZighcHJvdG9bSVRFUkFUT1JdKWhpZGUocHJvdG8sIElURVJBVE9SLCBBcnJheVZhbHVlcyk7CiAgICBpZighcHJvdG9bVE9fU1RSSU5HX1RBR10paGlkZShwcm90bywgVE9fU1RSSU5HX1RBRywgTkFNRSk7CiAgICBJdGVyYXRvcnNbTkFNRV0gPSBBcnJheVZhbHVlczsKICAgIGZvcihrZXkgaW4gJGl0ZXJhdG9ycylpZighcHJvdG9ba2V5XSlyZWRlZmluZShwcm90bywga2V5LCAkaXRlcmF0b3JzW2tleV0sIHRydWUpOwogIH0KfQp9LHsiLi9fZ2xvYmFsIjozOCwiLi9faGlkZSI6NDAsIi4vX2l0ZXJhdG9ycyI6NTYsIi4vX3JlZGVmaW5lIjo4NywiLi9fd2tzIjoxMTcsIi4vZXM2LmFycmF5Lml0ZXJhdG9yIjoxMzF9XSwyOTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgJGV4cG9ydCA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCAkdGFzayAgID0gcmVxdWlyZSgnLi9fdGFzaycpOwokZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuQiwgewogIHNldEltbWVkaWF0ZTogICAkdGFzay5zZXQsCiAgY2xlYXJJbW1lZGlhdGU6ICR0YXNrLmNsZWFyCn0pOwp9LHsiLi9fZXhwb3J0IjozMiwiLi9fdGFzayI6MTA0fV0sMjk1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gaWU5LSBzZXRUaW1lb3V0ICYgc2V0SW50ZXJ2YWwgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIGZpeAp2YXIgZ2xvYmFsICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpCiAgLCAkZXhwb3J0ICAgID0gcmVxdWlyZSgnLi9fZXhwb3J0JykKICAsIGludm9rZSAgICAgPSByZXF1aXJlKCcuL19pbnZva2UnKQogICwgcGFydGlhbCAgICA9IHJlcXVpcmUoJy4vX3BhcnRpYWwnKQogICwgbmF2aWdhdG9yICA9IGdsb2JhbC5uYXZpZ2F0b3IKICAsIE1TSUUgICAgICAgPSAhIW5hdmlnYXRvciAmJiAvTVNJRSAuXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7IC8vIDwtIGRpcnR5IGllOS0gY2hlY2sKdmFyIHdyYXAgPSBmdW5jdGlvbihzZXQpewogIHJldHVybiBNU0lFID8gZnVuY3Rpb24oZm4sIHRpbWUgLyosIC4uLmFyZ3MgKi8pewogICAgcmV0dXJuIHNldChpbnZva2UoCiAgICAgIHBhcnRpYWwsCiAgICAgIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSwKICAgICAgdHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKQogICAgKSwgdGltZSk7CiAgfSA6IHNldDsKfTsKJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LkIgKyAkZXhwb3J0LkYgKiBNU0lFLCB7CiAgc2V0VGltZW91dDogIHdyYXAoZ2xvYmFsLnNldFRpbWVvdXQpLAogIHNldEludGVydmFsOiB3cmFwKGdsb2JhbC5zZXRJbnRlcnZhbCkKfSk7Cn0seyIuL19leHBvcnQiOjMyLCIuL19nbG9iYWwiOjM4LCIuL19pbnZva2UiOjQ0LCIuL19wYXJ0aWFsIjo4M31dLDI5NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3ltYm9sJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmNyZWF0ZScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHknKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cycpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LW5hbWVzJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmZyZWV6ZScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm9iamVjdC5zZWFsJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LnByZXZlbnQtZXh0ZW5zaW9ucycpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm9iamVjdC5pcy1mcm96ZW4nKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QuaXMtc2VhbGVkJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmlzLWV4dGVuc2libGUnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LmlzJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuZnVuY3Rpb24uYmluZCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5mdW5jdGlvbi5oYXMtaW5zdGFuY2UnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5wYXJzZS1pbnQnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5wYXJzZS1mbG9hdCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci5jb25zdHJ1Y3RvcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci50by1maXhlZCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci50by1wcmVjaXNpb24nKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIuZXBzaWxvbicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci5pcy1maW5pdGUnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIuaXMtaW50ZWdlcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci5pcy1uYW4nKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIuaXMtc2FmZS1pbnRlZ2VyJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubnVtYmVyLm1heC1zYWZlLWludGVnZXInKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5udW1iZXIubWluLXNhZmUtaW50ZWdlcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci5wYXJzZS1mbG9hdCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm51bWJlci5wYXJzZS1pbnQnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmFjb3NoJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5hc2luaCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGguYXRhbmgnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmNicnQnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmNsejMyJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5jb3NoJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5leHBtMScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGguZnJvdW5kJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5oeXBvdCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGguaW11bCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2Lm1hdGgubG9nMTAnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5tYXRoLmxvZzFwJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5sb2cyJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5zaWduJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC5zaW5oJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC50YW5oJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWF0aC50cnVuYycpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5mcm9tLWNvZGUtcG9pbnQnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcucmF3Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3RyaW5nLnRyaW0nKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3InKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuY29kZS1wb2ludC1hdCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5lbmRzLXdpdGgnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuaW5jbHVkZXMnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcucmVwZWF0Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3RyaW5nLnN0YXJ0cy13aXRoJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3RyaW5nLmFuY2hvcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5iaWcnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuYmxpbmsnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuYm9sZCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5maXhlZCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5mb250Y29sb3InKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuZm9udHNpemUnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRhbGljcycpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5saW5rJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3RyaW5nLnNtYWxsJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc3RyaW5nLnN0cmlrZScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnN0cmluZy5zdWInKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5zdHJpbmcuc3VwJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuZGF0ZS5ub3cnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5kYXRlLnRvLWpzb24nKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5kYXRlLnRvLWlzby1zdHJpbmcnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5kYXRlLnRvLXN0cmluZycpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LmRhdGUudG8tcHJpbWl0aXZlJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuaXMtYXJyYXknKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5mcm9tJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkub2YnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5qb2luJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuc2xpY2UnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5zb3J0Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuZm9yLWVhY2gnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5tYXAnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5maWx0ZXInKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5zb21lJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuZXZlcnknKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5yZWR1Y2UnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5yZWR1Y2UtcmlnaHQnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5pbmRleC1vZicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5Lmxhc3QtaW5kZXgtb2YnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5jb3B5LXdpdGhpbicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5LmZpbGwnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5maW5kJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuYXJyYXkuZmluZC1pbmRleCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LmFycmF5LnNwZWNpZXMnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5hcnJheS5pdGVyYXRvcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZ2V4cC5jb25zdHJ1Y3RvcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZ2V4cC50by1zdHJpbmcnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWdleHAuZmxhZ3MnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWdleHAubWF0Y2gnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWdleHAucmVwbGFjZScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZ2V4cC5zZWFyY2gnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWdleHAuc3BsaXQnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5wcm9taXNlJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYubWFwJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYuc2V0Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYud2Vhay1tYXAnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi53ZWFrLXNldCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLmFycmF5LWJ1ZmZlcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLmRhdGEtdmlldycpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLmludDgtYXJyYXknKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi50eXBlZC51aW50OC1hcnJheScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLnVpbnQ4LWNsYW1wZWQtYXJyYXknKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi50eXBlZC5pbnQxNi1hcnJheScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLnVpbnQxNi1hcnJheScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLmludDMyLWFycmF5Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYudHlwZWQudWludDMyLWFycmF5Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYudHlwZWQuZmxvYXQzMi1hcnJheScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnR5cGVkLmZsb2F0NjQtYXJyYXknKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmFwcGx5Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5jb25zdHJ1Y3QnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmRlZmluZS1wcm9wZXJ0eScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZmxlY3QuZGVsZXRlLXByb3BlcnR5Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5lbnVtZXJhdGUnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmdldCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZmxlY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5nZXQtcHJvdG90eXBlLW9mJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5oYXMnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmlzLWV4dGVuc2libGUnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0Lm93bi1rZXlzJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczYucmVmbGVjdC5wcmV2ZW50LWV4dGVuc2lvbnMnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNi5yZWZsZWN0LnNldCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM2LnJlZmxlY3Quc2V0LXByb3RvdHlwZS1vZicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuc3RyaW5nLmF0Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuc3RyaW5nLnBhZC1zdGFydCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3LnN0cmluZy5wYWQtZW5kJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuc3RyaW5nLnRyaW0tbGVmdCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3LnN0cmluZy50cmltLXJpZ2h0Jyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuc3RyaW5nLm1hdGNoLWFsbCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3LnN5bWJvbC5hc3luYy1pdGVyYXRvcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3LnN5bWJvbC5vYnNlcnZhYmxlJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYmplY3QudmFsdWVzJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcub2JqZWN0LmVudHJpZXMnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYmplY3QuZGVmaW5lLWdldHRlcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3Lm9iamVjdC5kZWZpbmUtc2V0dGVyJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcub2JqZWN0Lmxvb2t1cC1nZXR0ZXInKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5vYmplY3QubG9va3VwLXNldHRlcicpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3Lm1hcC50by1qc29uJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuc2V0LnRvLWpzb24nKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5zeXN0ZW0uZ2xvYmFsJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuZXJyb3IuaXMtZXJyb3InKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5tYXRoLmlhZGRoJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcubWF0aC5pc3ViaCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3Lm1hdGguaW11bGgnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5tYXRoLnVtdWxoJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5kZWZpbmUtbWV0YWRhdGEnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5yZWZsZWN0LmRlbGV0ZS1tZXRhZGF0YScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3LnJlZmxlY3QuZ2V0LW1ldGFkYXRhJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtbWV0YWRhdGEta2V5cycpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3LnJlZmxlY3QuZ2V0LW93bi1tZXRhZGF0YScpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3LnJlZmxlY3QuZ2V0LW93bi1tZXRhZGF0YS1rZXlzJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcucmVmbGVjdC5oYXMtbWV0YWRhdGEnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5yZWZsZWN0Lmhhcy1vd24tbWV0YWRhdGEnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL2VzNy5yZWZsZWN0Lm1ldGFkYXRhJyk7CnJlcXVpcmUoJy4vbW9kdWxlcy9lczcuYXNhcCcpOwpyZXF1aXJlKCcuL21vZHVsZXMvZXM3Lm9ic2VydmFibGUnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL3dlYi50aW1lcnMnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL3dlYi5pbW1lZGlhdGUnKTsKcmVxdWlyZSgnLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL21vZHVsZXMvX2NvcmUnKTsKfSx7Ii4vbW9kdWxlcy9fY29yZSI6MjMsIi4vbW9kdWxlcy9lczYuYXJyYXkuY29weS13aXRoaW4iOjEyMSwiLi9tb2R1bGVzL2VzNi5hcnJheS5ldmVyeSI6MTIyLCIuL21vZHVsZXMvZXM2LmFycmF5LmZpbGwiOjEyMywiLi9tb2R1bGVzL2VzNi5hcnJheS5maWx0ZXIiOjEyNCwiLi9tb2R1bGVzL2VzNi5hcnJheS5maW5kIjoxMjYsIi4vbW9kdWxlcy9lczYuYXJyYXkuZmluZC1pbmRleCI6MTI1LCIuL21vZHVsZXMvZXM2LmFycmF5LmZvci1lYWNoIjoxMjcsIi4vbW9kdWxlcy9lczYuYXJyYXkuZnJvbSI6MTI4LCIuL21vZHVsZXMvZXM2LmFycmF5LmluZGV4LW9mIjoxMjksIi4vbW9kdWxlcy9lczYuYXJyYXkuaXMtYXJyYXkiOjEzMCwiLi9tb2R1bGVzL2VzNi5hcnJheS5pdGVyYXRvciI6MTMxLCIuL21vZHVsZXMvZXM2LmFycmF5LmpvaW4iOjEzMiwiLi9tb2R1bGVzL2VzNi5hcnJheS5sYXN0LWluZGV4LW9mIjoxMzMsIi4vbW9kdWxlcy9lczYuYXJyYXkubWFwIjoxMzQsIi4vbW9kdWxlcy9lczYuYXJyYXkub2YiOjEzNSwiLi9tb2R1bGVzL2VzNi5hcnJheS5yZWR1Y2UiOjEzNywiLi9tb2R1bGVzL2VzNi5hcnJheS5yZWR1Y2UtcmlnaHQiOjEzNiwiLi9tb2R1bGVzL2VzNi5hcnJheS5zbGljZSI6MTM4LCIuL21vZHVsZXMvZXM2LmFycmF5LnNvbWUiOjEzOSwiLi9tb2R1bGVzL2VzNi5hcnJheS5zb3J0IjoxNDAsIi4vbW9kdWxlcy9lczYuYXJyYXkuc3BlY2llcyI6MTQxLCIuL21vZHVsZXMvZXM2LmRhdGUubm93IjoxNDIsIi4vbW9kdWxlcy9lczYuZGF0ZS50by1pc28tc3RyaW5nIjoxNDMsIi4vbW9kdWxlcy9lczYuZGF0ZS50by1qc29uIjoxNDQsIi4vbW9kdWxlcy9lczYuZGF0ZS50by1wcmltaXRpdmUiOjE0NSwiLi9tb2R1bGVzL2VzNi5kYXRlLnRvLXN0cmluZyI6MTQ2LCIuL21vZHVsZXMvZXM2LmZ1bmN0aW9uLmJpbmQiOjE0NywiLi9tb2R1bGVzL2VzNi5mdW5jdGlvbi5oYXMtaW5zdGFuY2UiOjE0OCwiLi9tb2R1bGVzL2VzNi5mdW5jdGlvbi5uYW1lIjoxNDksIi4vbW9kdWxlcy9lczYubWFwIjoxNTAsIi4vbW9kdWxlcy9lczYubWF0aC5hY29zaCI6MTUxLCIuL21vZHVsZXMvZXM2Lm1hdGguYXNpbmgiOjE1MiwiLi9tb2R1bGVzL2VzNi5tYXRoLmF0YW5oIjoxNTMsIi4vbW9kdWxlcy9lczYubWF0aC5jYnJ0IjoxNTQsIi4vbW9kdWxlcy9lczYubWF0aC5jbHozMiI6MTU1LCIuL21vZHVsZXMvZXM2Lm1hdGguY29zaCI6MTU2LCIuL21vZHVsZXMvZXM2Lm1hdGguZXhwbTEiOjE1NywiLi9tb2R1bGVzL2VzNi5tYXRoLmZyb3VuZCI6MTU4LCIuL21vZHVsZXMvZXM2Lm1hdGguaHlwb3QiOjE1OSwiLi9tb2R1bGVzL2VzNi5tYXRoLmltdWwiOjE2MCwiLi9tb2R1bGVzL2VzNi5tYXRoLmxvZzEwIjoxNjEsIi4vbW9kdWxlcy9lczYubWF0aC5sb2cxcCI6MTYyLCIuL21vZHVsZXMvZXM2Lm1hdGgubG9nMiI6MTYzLCIuL21vZHVsZXMvZXM2Lm1hdGguc2lnbiI6MTY0LCIuL21vZHVsZXMvZXM2Lm1hdGguc2luaCI6MTY1LCIuL21vZHVsZXMvZXM2Lm1hdGgudGFuaCI6MTY2LCIuL21vZHVsZXMvZXM2Lm1hdGgudHJ1bmMiOjE2NywiLi9tb2R1bGVzL2VzNi5udW1iZXIuY29uc3RydWN0b3IiOjE2OCwiLi9tb2R1bGVzL2VzNi5udW1iZXIuZXBzaWxvbiI6MTY5LCIuL21vZHVsZXMvZXM2Lm51bWJlci5pcy1maW5pdGUiOjE3MCwiLi9tb2R1bGVzL2VzNi5udW1iZXIuaXMtaW50ZWdlciI6MTcxLCIuL21vZHVsZXMvZXM2Lm51bWJlci5pcy1uYW4iOjE3MiwiLi9tb2R1bGVzL2VzNi5udW1iZXIuaXMtc2FmZS1pbnRlZ2VyIjoxNzMsIi4vbW9kdWxlcy9lczYubnVtYmVyLm1heC1zYWZlLWludGVnZXIiOjE3NCwiLi9tb2R1bGVzL2VzNi5udW1iZXIubWluLXNhZmUtaW50ZWdlciI6MTc1LCIuL21vZHVsZXMvZXM2Lm51bWJlci5wYXJzZS1mbG9hdCI6MTc2LCIuL21vZHVsZXMvZXM2Lm51bWJlci5wYXJzZS1pbnQiOjE3NywiLi9tb2R1bGVzL2VzNi5udW1iZXIudG8tZml4ZWQiOjE3OCwiLi9tb2R1bGVzL2VzNi5udW1iZXIudG8tcHJlY2lzaW9uIjoxNzksIi4vbW9kdWxlcy9lczYub2JqZWN0LmFzc2lnbiI6MTgwLCIuL21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUiOjE4MSwiLi9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMiOjE4MiwiLi9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5IjoxODMsIi4vbW9kdWxlcy9lczYub2JqZWN0LmZyZWV6ZSI6MTg0LCIuL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjE4NSwiLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcyI6MTg2LCIuL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjoxODcsIi4vbW9kdWxlcy9lczYub2JqZWN0LmlzIjoxOTEsIi4vbW9kdWxlcy9lczYub2JqZWN0LmlzLWV4dGVuc2libGUiOjE4OCwiLi9tb2R1bGVzL2VzNi5vYmplY3QuaXMtZnJvemVuIjoxODksIi4vbW9kdWxlcy9lczYub2JqZWN0LmlzLXNlYWxlZCI6MTkwLCIuL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjoxOTIsIi4vbW9kdWxlcy9lczYub2JqZWN0LnByZXZlbnQtZXh0ZW5zaW9ucyI6MTkzLCIuL21vZHVsZXMvZXM2Lm9iamVjdC5zZWFsIjoxOTQsIi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiOjE5NSwiLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjoxOTYsIi4vbW9kdWxlcy9lczYucGFyc2UtZmxvYXQiOjE5NywiLi9tb2R1bGVzL2VzNi5wYXJzZS1pbnQiOjE5OCwiLi9tb2R1bGVzL2VzNi5wcm9taXNlIjoxOTksIi4vbW9kdWxlcy9lczYucmVmbGVjdC5hcHBseSI6MjAwLCIuL21vZHVsZXMvZXM2LnJlZmxlY3QuY29uc3RydWN0IjoyMDEsIi4vbW9kdWxlcy9lczYucmVmbGVjdC5kZWZpbmUtcHJvcGVydHkiOjIwMiwiLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmRlbGV0ZS1wcm9wZXJ0eSI6MjAzLCIuL21vZHVsZXMvZXM2LnJlZmxlY3QuZW51bWVyYXRlIjoyMDQsIi4vbW9kdWxlcy9lczYucmVmbGVjdC5nZXQiOjIwNywiLi9tb2R1bGVzL2VzNi5yZWZsZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6MjA1LCIuL21vZHVsZXMvZXM2LnJlZmxlY3QuZ2V0LXByb3RvdHlwZS1vZiI6MjA2LCIuL21vZHVsZXMvZXM2LnJlZmxlY3QuaGFzIjoyMDgsIi4vbW9kdWxlcy9lczYucmVmbGVjdC5pcy1leHRlbnNpYmxlIjoyMDksIi4vbW9kdWxlcy9lczYucmVmbGVjdC5vd24ta2V5cyI6MjEwLCIuL21vZHVsZXMvZXM2LnJlZmxlY3QucHJldmVudC1leHRlbnNpb25zIjoyMTEsIi4vbW9kdWxlcy9lczYucmVmbGVjdC5zZXQiOjIxMywiLi9tb2R1bGVzL2VzNi5yZWZsZWN0LnNldC1wcm90b3R5cGUtb2YiOjIxMiwiLi9tb2R1bGVzL2VzNi5yZWdleHAuY29uc3RydWN0b3IiOjIxNCwiLi9tb2R1bGVzL2VzNi5yZWdleHAuZmxhZ3MiOjIxNSwiLi9tb2R1bGVzL2VzNi5yZWdleHAubWF0Y2giOjIxNiwiLi9tb2R1bGVzL2VzNi5yZWdleHAucmVwbGFjZSI6MjE3LCIuL21vZHVsZXMvZXM2LnJlZ2V4cC5zZWFyY2giOjIxOCwiLi9tb2R1bGVzL2VzNi5yZWdleHAuc3BsaXQiOjIxOSwiLi9tb2R1bGVzL2VzNi5yZWdleHAudG8tc3RyaW5nIjoyMjAsIi4vbW9kdWxlcy9lczYuc2V0IjoyMjEsIi4vbW9kdWxlcy9lczYuc3RyaW5nLmFuY2hvciI6MjIyLCIuL21vZHVsZXMvZXM2LnN0cmluZy5iaWciOjIyMywiLi9tb2R1bGVzL2VzNi5zdHJpbmcuYmxpbmsiOjIyNCwiLi9tb2R1bGVzL2VzNi5zdHJpbmcuYm9sZCI6MjI1LCIuL21vZHVsZXMvZXM2LnN0cmluZy5jb2RlLXBvaW50LWF0IjoyMjYsIi4vbW9kdWxlcy9lczYuc3RyaW5nLmVuZHMtd2l0aCI6MjI3LCIuL21vZHVsZXMvZXM2LnN0cmluZy5maXhlZCI6MjI4LCIuL21vZHVsZXMvZXM2LnN0cmluZy5mb250Y29sb3IiOjIyOSwiLi9tb2R1bGVzL2VzNi5zdHJpbmcuZm9udHNpemUiOjIzMCwiLi9tb2R1bGVzL2VzNi5zdHJpbmcuZnJvbS1jb2RlLXBvaW50IjoyMzEsIi4vbW9kdWxlcy9lczYuc3RyaW5nLmluY2x1ZGVzIjoyMzIsIi4vbW9kdWxlcy9lczYuc3RyaW5nLml0YWxpY3MiOjIzMywiLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjIzNCwiLi9tb2R1bGVzL2VzNi5zdHJpbmcubGluayI6MjM1LCIuL21vZHVsZXMvZXM2LnN0cmluZy5yYXciOjIzNiwiLi9tb2R1bGVzL2VzNi5zdHJpbmcucmVwZWF0IjoyMzcsIi4vbW9kdWxlcy9lczYuc3RyaW5nLnNtYWxsIjoyMzgsIi4vbW9kdWxlcy9lczYuc3RyaW5nLnN0YXJ0cy13aXRoIjoyMzksIi4vbW9kdWxlcy9lczYuc3RyaW5nLnN0cmlrZSI6MjQwLCIuL21vZHVsZXMvZXM2LnN0cmluZy5zdWIiOjI0MSwiLi9tb2R1bGVzL2VzNi5zdHJpbmcuc3VwIjoyNDIsIi4vbW9kdWxlcy9lczYuc3RyaW5nLnRyaW0iOjI0MywiLi9tb2R1bGVzL2VzNi5zeW1ib2wiOjI0NCwiLi9tb2R1bGVzL2VzNi50eXBlZC5hcnJheS1idWZmZXIiOjI0NSwiLi9tb2R1bGVzL2VzNi50eXBlZC5kYXRhLXZpZXciOjI0NiwiLi9tb2R1bGVzL2VzNi50eXBlZC5mbG9hdDMyLWFycmF5IjoyNDcsIi4vbW9kdWxlcy9lczYudHlwZWQuZmxvYXQ2NC1hcnJheSI6MjQ4LCIuL21vZHVsZXMvZXM2LnR5cGVkLmludDE2LWFycmF5IjoyNDksIi4vbW9kdWxlcy9lczYudHlwZWQuaW50MzItYXJyYXkiOjI1MCwiLi9tb2R1bGVzL2VzNi50eXBlZC5pbnQ4LWFycmF5IjoyNTEsIi4vbW9kdWxlcy9lczYudHlwZWQudWludDE2LWFycmF5IjoyNTIsIi4vbW9kdWxlcy9lczYudHlwZWQudWludDMyLWFycmF5IjoyNTMsIi4vbW9kdWxlcy9lczYudHlwZWQudWludDgtYXJyYXkiOjI1NCwiLi9tb2R1bGVzL2VzNi50eXBlZC51aW50OC1jbGFtcGVkLWFycmF5IjoyNTUsIi4vbW9kdWxlcy9lczYud2Vhay1tYXAiOjI1NiwiLi9tb2R1bGVzL2VzNi53ZWFrLXNldCI6MjU3LCIuL21vZHVsZXMvZXM3LmFycmF5LmluY2x1ZGVzIjoyNTgsIi4vbW9kdWxlcy9lczcuYXNhcCI6MjU5LCIuL21vZHVsZXMvZXM3LmVycm9yLmlzLWVycm9yIjoyNjAsIi4vbW9kdWxlcy9lczcubWFwLnRvLWpzb24iOjI2MSwiLi9tb2R1bGVzL2VzNy5tYXRoLmlhZGRoIjoyNjIsIi4vbW9kdWxlcy9lczcubWF0aC5pbXVsaCI6MjYzLCIuL21vZHVsZXMvZXM3Lm1hdGguaXN1YmgiOjI2NCwiLi9tb2R1bGVzL2VzNy5tYXRoLnVtdWxoIjoyNjUsIi4vbW9kdWxlcy9lczcub2JqZWN0LmRlZmluZS1nZXR0ZXIiOjI2NiwiLi9tb2R1bGVzL2VzNy5vYmplY3QuZGVmaW5lLXNldHRlciI6MjY3LCIuL21vZHVsZXMvZXM3Lm9iamVjdC5lbnRyaWVzIjoyNjgsIi4vbW9kdWxlcy9lczcub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOjI2OSwiLi9tb2R1bGVzL2VzNy5vYmplY3QubG9va3VwLWdldHRlciI6MjcwLCIuL21vZHVsZXMvZXM3Lm9iamVjdC5sb29rdXAtc2V0dGVyIjoyNzEsIi4vbW9kdWxlcy9lczcub2JqZWN0LnZhbHVlcyI6MjcyLCIuL21vZHVsZXMvZXM3Lm9ic2VydmFibGUiOjI3MywiLi9tb2R1bGVzL2VzNy5yZWZsZWN0LmRlZmluZS1tZXRhZGF0YSI6Mjc0LCIuL21vZHVsZXMvZXM3LnJlZmxlY3QuZGVsZXRlLW1ldGFkYXRhIjoyNzUsIi4vbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtbWV0YWRhdGEiOjI3NywiLi9tb2R1bGVzL2VzNy5yZWZsZWN0LmdldC1tZXRhZGF0YS1rZXlzIjoyNzYsIi4vbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtb3duLW1ldGFkYXRhIjoyNzksIi4vbW9kdWxlcy9lczcucmVmbGVjdC5nZXQtb3duLW1ldGFkYXRhLWtleXMiOjI3OCwiLi9tb2R1bGVzL2VzNy5yZWZsZWN0Lmhhcy1tZXRhZGF0YSI6MjgwLCIuL21vZHVsZXMvZXM3LnJlZmxlY3QuaGFzLW93bi1tZXRhZGF0YSI6MjgxLCIuL21vZHVsZXMvZXM3LnJlZmxlY3QubWV0YWRhdGEiOjI4MiwiLi9tb2R1bGVzL2VzNy5zZXQudG8tanNvbiI6MjgzLCIuL21vZHVsZXMvZXM3LnN0cmluZy5hdCI6Mjg0LCIuL21vZHVsZXMvZXM3LnN0cmluZy5tYXRjaC1hbGwiOjI4NSwiLi9tb2R1bGVzL2VzNy5zdHJpbmcucGFkLWVuZCI6Mjg2LCIuL21vZHVsZXMvZXM3LnN0cmluZy5wYWQtc3RhcnQiOjI4NywiLi9tb2R1bGVzL2VzNy5zdHJpbmcudHJpbS1sZWZ0IjoyODgsIi4vbW9kdWxlcy9lczcuc3RyaW5nLnRyaW0tcmlnaHQiOjI4OSwiLi9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IiOjI5MCwiLi9tb2R1bGVzL2VzNy5zeW1ib2wub2JzZXJ2YWJsZSI6MjkxLCIuL21vZHVsZXMvZXM3LnN5c3RlbS5nbG9iYWwiOjI5MiwiLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjI5MywiLi9tb2R1bGVzL3dlYi5pbW1lZGlhdGUiOjI5NCwiLi9tb2R1bGVzL3dlYi50aW1lcnMiOjI5NX1dLDI5NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwpewovKioKICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLgogKiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGUKICogaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9tYXN0ZXIvTElDRU5TRSBmaWxlLiBBbgogKiBhZGRpdGlvbmFsIGdyYW50IG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4KICogdGhlIHNhbWUgZGlyZWN0b3J5LgogKi8KCiEoZnVuY3Rpb24oZ2xvYmFsKSB7CiAgInVzZSBzdHJpY3QiOwoKICB2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsKICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC4KICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgPyBTeW1ib2wgOiB7fTsKICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8ICJAQGl0ZXJhdG9yIjsKICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8ICJAQHRvU3RyaW5nVGFnIjsKCiAgdmFyIGluTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PT0gIm9iamVjdCI7CiAgdmFyIHJ1bnRpbWUgPSBnbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lOwogIGlmIChydW50aW1lKSB7CiAgICBpZiAoaW5Nb2R1bGUpIHsKICAgICAgLy8gSWYgcmVnZW5lcmF0b3JSdW50aW1lIGlzIGRlZmluZWQgZ2xvYmFsbHkgYW5kIHdlJ3JlIGluIGEgbW9kdWxlLAogICAgICAvLyBtYWtlIHRoZSBleHBvcnRzIG9iamVjdCBpZGVudGljYWwgdG8gcmVnZW5lcmF0b3JSdW50aW1lLgogICAgICBtb2R1bGUuZXhwb3J0cyA9IHJ1bnRpbWU7CiAgICB9CiAgICAvLyBEb24ndCBib3RoZXIgZXZhbHVhdGluZyB0aGUgcmVzdCBvZiB0aGlzIGZpbGUgaWYgdGhlIHJ1bnRpbWUgd2FzCiAgICAvLyBhbHJlYWR5IGRlZmluZWQgZ2xvYmFsbHkuCiAgICByZXR1cm47CiAgfQoKICAvLyBEZWZpbmUgdGhlIHJ1bnRpbWUgZ2xvYmFsbHkgKGFzIGV4cGVjdGVkIGJ5IGdlbmVyYXRlZCBjb2RlKSBhcyBlaXRoZXIKICAvLyBtb2R1bGUuZXhwb3J0cyAoaWYgd2UncmUgaW4gYSBtb2R1bGUpIG9yIGEgbmV3LCBlbXB0eSBvYmplY3QuCiAgcnVudGltZSA9IGdsb2JhbC5yZWdlbmVyYXRvclJ1bnRpbWUgPSBpbk1vZHVsZSA/IG1vZHVsZS5leHBvcnRzIDoge307CgogIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHsKICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuCiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZSgob3V0ZXJGbiB8fCBHZW5lcmF0b3IpLnByb3RvdHlwZSk7CiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTsKCiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsCiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuCiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7CgogICAgcmV0dXJuIGdlbmVyYXRvcjsKICB9CiAgcnVudGltZS53cmFwID0gd3JhcDsKCiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uCiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkCiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlCiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZQogIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWQKICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nCiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWUKICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGUKICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoCiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLgogIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIHsgdHlwZTogIm5vcm1hbCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICByZXR1cm4geyB0eXBlOiAidGhyb3ciLCBhcmc6IGVyciB9OwogICAgfQogIH0KCiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSAic3VzcGVuZGVkU3RhcnQiOwogIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gInN1c3BlbmRlZFlpZWxkIjsKICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSAiZXhlY3V0aW5nIjsKICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSAiY29tcGxldGVkIjsKCiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhcwogIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC4KICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9OwoKICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmQKICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3IKICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91cgogIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuCiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge30KICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9CiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fQoKICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlOwogIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdwLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7CiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvbjsKICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9ICJHZW5lcmF0b3JGdW5jdGlvbiI7CgogIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlCiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC4KICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7CiAgICBbIm5leHQiLCAidGhyb3ciLCAicmV0dXJuIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgcHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbihhcmcpIHsKICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTsKICAgICAgfTsKICAgIH0pOwogIH0KCiAgcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7CiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09ICJmdW5jdGlvbiIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yOwogICAgcmV0dXJuIGN0b3IKICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fAogICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW4KICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuCiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gIkdlbmVyYXRvckZ1bmN0aW9uIgogICAgICA6IGZhbHNlOwogIH07CgogIHJ1bnRpbWUubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikgewogICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikgewogICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7CiAgICB9IGVsc2UgewogICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7CiAgICAgIGlmICghKHRvU3RyaW5nVGFnU3ltYm9sIGluIGdlbkZ1bikpIHsKICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gIkdlbmVyYXRvckZ1bmN0aW9uIjsKICAgICAgfQogICAgfQogICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApOwogICAgcmV0dXJuIGdlbkZ1bjsKICB9OwoKICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG8KICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdAogIC8vIGB2YWx1ZSBpbnN0YW5jZW9mIEF3YWl0QXJndW1lbnRgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpcwogIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuIFNvbWUgbWF5IGNvbnNpZGVyIHRoZSBuYW1lIG9mIHRoaXMgbWV0aG9kIHRvbwogIC8vIGN1dGVzeSwgYnV0IHRoZXkgYXJlIGN1cm11ZGdlb25zLgogIHJ1bnRpbWUuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHsKICAgIHJldHVybiBuZXcgQXdhaXRBcmd1bWVudChhcmcpOwogIH07CgogIGZ1bmN0aW9uIEF3YWl0QXJndW1lbnQoYXJnKSB7CiAgICB0aGlzLmFyZyA9IGFyZzsKICB9CgogIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yKSB7CiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTsKICAgICAgaWYgKHJlY29yZC50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnOwogICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTsKICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBd2FpdEFyZ3VtZW50KSB7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlLmFyZykudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICBpbnZva2UoIm5leHQiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICBpbnZva2UoInRocm93IiwgZXJyLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkgewogICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXMKICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZQogICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uIElmIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLCBob3dldmVyLCB0aGUKICAgICAgICAgIC8vIHJlc3VsdCBmb3IgdGhpcyBpdGVyYXRpb24gd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBzYW1lCiAgICAgICAgICAvLyByZWFzb24uIE5vdGUgdGhhdCByZWplY3Rpb25zIG9mIHlpZWxkZWQgUHJvbWlzZXMgYXJlIG5vdAogICAgICAgICAgLy8gdGhyb3duIGJhY2sgaW50byB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBhcyBpcyB0aGUgY2FzZQogICAgICAgICAgLy8gd2hlbiBhbiBhd2FpdGVkIFByb21pc2UgaXMgcmVqZWN0ZWQuIFRoaXMgZGlmZmVyZW5jZSBpbgogICAgICAgICAgLy8gYmVoYXZpb3IgYmV0d2VlbiB5aWVsZCBhbmQgYXdhaXQgaXMgaW1wb3J0YW50LCBiZWNhdXNlIGl0CiAgICAgICAgICAvLyBhbGxvd3MgdGhlIGNvbnN1bWVyIHRvIGRlY2lkZSB3aGF0IHRvIGRvIHdpdGggdGhlIHlpZWxkZWQKICAgICAgICAgIC8vIHJlamVjdGlvbiAoc3dhbGxvdyBpdCBhbmQgY29udGludWUsIG1hbnVhbGx5IC50aHJvdyBpdCBiYWNrCiAgICAgICAgICAvLyBpbnRvIHRoZSBnZW5lcmF0b3IsIGFiYW5kb24gaXRlcmF0aW9uLCB3aGF0ZXZlcikuIFdpdGgKICAgICAgICAgIC8vIGF3YWl0LCBieSBjb250cmFzdCwgdGhlcmUgaXMgbm8gb3Bwb3J0dW5pdHkgdG8gZXhhbWluZSB0aGUKICAgICAgICAgIC8vIHJlamVjdGlvbiByZWFzb24gb3V0c2lkZSB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBzbyB0aGUKICAgICAgICAgIC8vIG9ubHkgb3B0aW9uIGlzIHRvIHRocm93IGl0IGZyb20gdGhlIGF3YWl0IGV4cHJlc3Npb24sIGFuZAogICAgICAgICAgLy8gbGV0IHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24gaGFuZGxlIHRoZSBleGNlcHRpb24uCiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7CiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfQogICAgfQoKICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gIm9iamVjdCIgJiYgcHJvY2Vzcy5kb21haW4pIHsKICAgICAgaW52b2tlID0gcHJvY2Vzcy5kb21haW4uYmluZChpbnZva2UpOwogICAgfQoKICAgIHZhciBwcmV2aW91c1Byb21pc2U7CgogICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykgewogICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPQogICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWwKICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSwKICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmCiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG8KICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSwKICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkbwogICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHkKICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0cwogICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5CiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGUKICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseQogICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS4KICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbigKICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLAogICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXIKICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci4KICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnCiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7CiAgICB9CgogICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCwKICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLgogICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTsKICB9CgogIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7CgogIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2YKICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2YKICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci4KICBydW50aW1lLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHsKICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoCiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpCiAgICApOwoKICAgIHJldHVybiBydW50aW1lLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbikKICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci4KICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7CiAgICAgICAgfSk7CiAgfTsKCiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7CiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0OwoKICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHsKICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpOwogICAgICB9CgogICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7CiAgICAgICAgaWYgKG1ldGhvZCA9PT0gInRocm93IikgewogICAgICAgICAgdGhyb3cgYXJnOwogICAgICAgIH0KCiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzoKICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lCiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTsKICAgICAgfQoKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlOwogICAgICAgIGlmIChkZWxlZ2F0ZSkgewogICAgICAgICAgaWYgKG1ldGhvZCA9PT0gInJldHVybiIgfHwKICAgICAgICAgICAgICAobWV0aG9kID09PSAidGhyb3ciICYmIGRlbGVnYXRlLml0ZXJhdG9yW21ldGhvZF0gPT09IHVuZGVmaW5lZCkpIHsKICAgICAgICAgICAgLy8gQSByZXR1cm4gb3IgdGhyb3cgKHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyB0aHJvdwogICAgICAgICAgICAvLyBtZXRob2QpIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC4KICAgICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7CgogICAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhCiAgICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC4KICAgICAgICAgICAgdmFyIHJldHVybk1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yWyJyZXR1cm4iXTsKICAgICAgICAgICAgaWYgKHJldHVybk1ldGhvZCkgewogICAgICAgICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChyZXR1cm5NZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBhcmcpOwogICAgICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gInRocm93IikgewogICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJldHVybiBtZXRob2QgdGhyZXcgYW4gZXhjZXB0aW9uLCBsZXQgdGhhdAogICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIHByZXZhaWwgb3ZlciB0aGUgb3JpZ2luYWwgcmV0dXJuIG9yIHRocm93LgogICAgICAgICAgICAgICAgbWV0aG9kID0gInRocm93IjsKICAgICAgICAgICAgICAgIGFyZyA9IHJlY29yZC5hcmc7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICJyZXR1cm4iKSB7CiAgICAgICAgICAgICAgLy8gQ29udGludWUgd2l0aCB0aGUgb3V0ZXIgcmV0dXJuLCBub3cgdGhhdCB0aGUgZGVsZWdhdGUKICAgICAgICAgICAgICAvLyBpdGVyYXRvciBoYXMgYmVlbiB0ZXJtaW5hdGVkLgogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKAogICAgICAgICAgICBkZWxlZ2F0ZS5pdGVyYXRvclttZXRob2RdLAogICAgICAgICAgICBkZWxlZ2F0ZS5pdGVyYXRvciwKICAgICAgICAgICAgYXJnCiAgICAgICAgICApOwoKICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gInRocm93IikgewogICAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDsKCiAgICAgICAgICAgIC8vIExpa2UgcmV0dXJuaW5nIGdlbmVyYXRvci50aHJvdyh1bmNhdWdodCksIGJ1dCB3aXRob3V0IHRoZQogICAgICAgICAgICAvLyBvdmVyaGVhZCBvZiBhbiBleHRyYSBmdW5jdGlvbiBjYWxsLgogICAgICAgICAgICBtZXRob2QgPSAidGhyb3ciOwogICAgICAgICAgICBhcmcgPSByZWNvcmQuYXJnOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBEZWxlZ2F0ZSBnZW5lcmF0b3IgcmFuIGFuZCBoYW5kbGVkIGl0cyBvd24gZXhjZXB0aW9ucyBzbwogICAgICAgICAgLy8gcmVnYXJkbGVzcyBvZiB3aGF0IHRoZSBtZXRob2Qgd2FzLCB3ZSBjb250aW51ZSBhcyBpZiBpdCBpcwogICAgICAgICAgLy8gIm5leHQiIHdpdGggYW4gdW5kZWZpbmVkIGFyZy4KICAgICAgICAgIG1ldGhvZCA9ICJuZXh0IjsKICAgICAgICAgIGFyZyA9IHVuZGVmaW5lZDsKCiAgICAgICAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7CiAgICAgICAgICBpZiAoaW5mby5kb25lKSB7CiAgICAgICAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlOwogICAgICAgICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkOwogICAgICAgICAgICByZXR1cm4gaW5mbzsKICAgICAgICAgIH0KCiAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIGlmIChtZXRob2QgPT09ICJuZXh0IikgewogICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzCiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLgogICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGFyZzsKCiAgICAgICAgfSBlbHNlIGlmIChtZXRob2QgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkgewogICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkOwogICAgICAgICAgICB0aHJvdyBhcmc7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oYXJnKSkgewogICAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLAogICAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LgogICAgICAgICAgICBtZXRob2QgPSAibmV4dCI7CiAgICAgICAgICAgIGFyZyA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlIGlmIChtZXRob2QgPT09ICJyZXR1cm4iKSB7CiAgICAgICAgICBjb250ZXh0LmFicnVwdCgicmV0dXJuIiwgYXJnKTsKICAgICAgICB9CgogICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7CgogICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTsKICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJub3JtYWwiKSB7CiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09CiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uCiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZQogICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkCiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDsKCiAgICAgICAgICB2YXIgaW5mbyA9IHsKICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsCiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZQogICAgICAgICAgfTsKCiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkgewogICAgICAgICAgICBpZiAoY29udGV4dC5kZWxlZ2F0ZSAmJiBtZXRob2QgPT09ICJuZXh0IikgewogICAgICAgICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0CiAgICAgICAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLgogICAgICAgICAgICAgIGFyZyA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGluZm87CiAgICAgICAgICB9CgogICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7CiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlCiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGFyZykgY2FsbCBhYm92ZS4KICAgICAgICAgIG1ldGhvZCA9ICJ0aHJvdyI7CiAgICAgICAgICBhcmcgPSByZWNvcmQuYXJnOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9CgogIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlCiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLgogIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7CgogIEdwW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgR3BbdG9TdHJpbmdUYWdTeW1ib2xdID0gIkdlbmVyYXRvciI7CgogIEdwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gIltvYmplY3QgR2VuZXJhdG9yXSI7CiAgfTsKCiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHsKICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07CgogICAgaWYgKDEgaW4gbG9jcykgewogICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07CiAgICB9CgogICAgaWYgKDIgaW4gbG9jcykgewogICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTsKICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdOwogICAgfQoKICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTsKICB9CgogIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHsKICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9OwogICAgcmVjb3JkLnR5cGUgPSAibm9ybWFsIjsKICAgIGRlbGV0ZSByZWNvcmQuYXJnOwogICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDsKICB9CgogIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHsKICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaAogICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbQogICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LgogICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiAicm9vdCIgfV07CiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7CiAgICB0aGlzLnJlc2V0KHRydWUpOwogIH0KCiAgcnVudGltZS5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7CiAgICB2YXIga2V5cyA9IFtdOwogICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkgewogICAgICBrZXlzLnB1c2goa2V5KTsKICAgIH0KICAgIGtleXMucmV2ZXJzZSgpOwoKICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwCiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLgogICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkgewogICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpOwogICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7CiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5OwogICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7CiAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZQogICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpcwogICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi4KICAgICAgbmV4dC5kb25lID0gdHJ1ZTsKICAgICAgcmV0dXJuIG5leHQ7CiAgICB9OwogIH07CgogIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkgewogICAgaWYgKGl0ZXJhYmxlKSB7CiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTsKICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7CiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICByZXR1cm4gaXRlcmFibGU7CiAgICAgIH0KCiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkgewogICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkgewogICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7CiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldOwogICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlOwogICAgICAgICAgICAgIHJldHVybiBuZXh0OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDsKICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7CgogICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7CiAgICAgIH0KICAgIH0KCiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuCiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07CiAgfQogIHJ1bnRpbWUudmFsdWVzID0gdmFsdWVzOwoKICBmdW5jdGlvbiBkb25lUmVzdWx0KCkgewogICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9OwogIH0KCiAgQ29udGV4dC5wcm90b3R5cGUgPSB7CiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCwKCiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkgewogICAgICB0aGlzLnByZXYgPSAwOwogICAgICB0aGlzLm5leHQgPSAwOwogICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwncwogICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLgogICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkOwogICAgICB0aGlzLmRvbmUgPSBmYWxzZTsKICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7CgogICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTsKCiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkgewogICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykgewogICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczoKICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gInQiICYmCiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiYKICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7CiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIHN0b3A6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLmRvbmUgPSB0cnVlOwoKICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTsKICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjsKICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gInRocm93IikgewogICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5ydmFsOwogICAgfSwKCiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7CiAgICAgIGlmICh0aGlzLmRvbmUpIHsKICAgICAgICB0aHJvdyBleGNlcHRpb247CiAgICAgIH0KCiAgICAgIHZhciBjb250ZXh0ID0gdGhpczsKICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7CiAgICAgICAgcmVjb3JkLnR5cGUgPSAidGhyb3ciOwogICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247CiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jOwogICAgICAgIHJldHVybiAhIWNhdWdodDsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjsKCiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gInJvb3QiKSB7CiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZQogICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvCiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLgogICAgICAgICAgcmV0dXJuIGhhbmRsZSgiZW5kIik7CiAgICAgICAgfQoKICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikgewogICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksICJjYXRjaExvYyIpOwogICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgImZpbmFsbHlMb2MiKTsKCiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkgewogICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHsKICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHsKICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHsKICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpOwogICAgICAgICAgICB9CgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykgewogICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldOwogICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmCiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCAiZmluYWxseUxvYyIpICYmCiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHsKICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJgogICAgICAgICAgKHR5cGUgPT09ICJicmVhayIgfHwKICAgICAgICAgICB0eXBlID09PSAiY29udGludWUiKSAmJgogICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiYKICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykgewogICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGEKICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suCiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDsKICAgICAgfQoKICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307CiAgICAgIHJlY29yZC50eXBlID0gdHlwZTsKICAgICAgcmVjb3JkLmFyZyA9IGFyZzsKCiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHsKICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbXBsZXRlKHJlY29yZCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgfSwKCiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykgewogICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICB0aHJvdyByZWNvcmQuYXJnOwogICAgICB9CgogICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJicmVhayIgfHwKICAgICAgICAgIHJlY29yZC50eXBlID09PSAiY29udGludWUiKSB7CiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZzsKICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gInJldHVybiIpIHsKICAgICAgICB0aGlzLnJ2YWwgPSByZWNvcmQuYXJnOwogICAgICAgIHRoaXMubmV4dCA9ICJlbmQiOwogICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSAibm9ybWFsIiAmJiBhZnRlckxvYykgewogICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jOwogICAgICB9CiAgICB9LAoKICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykgewogICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldOwogICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7CiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTsKICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpOwogICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgICJjYXRjaCI6IGZ1bmN0aW9uKHRyeUxvYykgewogICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldOwogICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykgewogICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247CiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7CiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRocm93bjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvbgogICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suCiAgICAgIHRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBjYXRjaCBhdHRlbXB0Iik7CiAgICB9LAoKICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7CiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7CiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksCiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSwKICAgICAgICBuZXh0TG9jOiBuZXh0TG9jCiAgICAgIH07CgogICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgIH0KICB9Owp9KSgKICAvLyBBbW9uZyB0aGUgdmFyaW91cyB0cmlja3MgZm9yIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsCiAgLy8gb2JqZWN0LCB0aGlzIHNlZW1zIHRvIGJlIHRoZSBtb3N0IHJlbGlhYmxlIHRlY2huaXF1ZSB0aGF0IGRvZXMgbm90CiAgLy8gdXNlIGluZGlyZWN0IGV2YWwgKHdoaWNoIHZpb2xhdGVzIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5KS4KICB0eXBlb2YgZ2xvYmFsID09PSAib2JqZWN0IiA/IGdsb2JhbCA6CiAgdHlwZW9mIHdpbmRvdyA9PT0gIm9iamVjdCIgPyB3aW5kb3cgOgogIHR5cGVvZiBzZWxmID09PSAib2JqZWN0IiA/IHNlbGYgOiB0aGlzCik7Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHsiX3Byb2Nlc3MiOjcwM31dLDI5ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IHJlcXVpcmUoImNvcmUtanMvbGlicmFyeS9mbi9hcnJheS9mcm9tIiksIF9fZXNNb2R1bGU6IHRydWUgfTsKfSx7ImNvcmUtanMvbGlicmFyeS9mbi9hcnJheS9mcm9tIjozMTZ9XSwyOTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiByZXF1aXJlKCJjb3JlLWpzL2xpYnJhcnkvZm4vanNvbi9zdHJpbmdpZnkiKSwgX19lc01vZHVsZTogdHJ1ZSB9Owp9LHsiY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5IjozMTd9XSwzMDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiByZXF1aXJlKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2Fzc2lnbiIpLCBfX2VzTW9kdWxlOiB0cnVlIH07Cn0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2Fzc2lnbiI6MzE4fV0sMzAxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogcmVxdWlyZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiKSwgX19lc01vZHVsZTogdHJ1ZSB9Owp9LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjMxOX1dLDMwMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IHJlcXVpcmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksIF9fZXNNb2R1bGU6IHRydWUgfTsKfSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjozMjB9XSwzMDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiByZXF1aXJlKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSwgX19lc01vZHVsZTogdHJ1ZSB9Owp9LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjozMjF9XSwzMDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiByZXF1aXJlKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2lzLWZyb3plbiIpLCBfX2VzTW9kdWxlOiB0cnVlIH07Cn0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2lzLWZyb3plbiI6MzIyfV0sMzA1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogcmVxdWlyZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksIF9fZXNNb2R1bGU6IHRydWUgfTsKfSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qva2V5cyI6MzIzfV0sMzA2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogcmVxdWlyZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksIF9fZXNNb2R1bGU6IHRydWUgfTsKfSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6MzI0fV0sMzA3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogcmVxdWlyZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiKSwgX19lc01vZHVsZTogdHJ1ZSB9Owp9LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiOjMyNX1dLDMwODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IHJlcXVpcmUoImNvcmUtanMvbGlicmFyeS9mbi9zZXQiKSwgX19lc01vZHVsZTogdHJ1ZSB9Owp9LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3NldCI6MzI2fV0sMzA5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogcmVxdWlyZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07Cn0seyJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIjozMjd9XSwzMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiByZXF1aXJlKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sL2l0ZXJhdG9yIiksIF9fZXNNb2R1bGU6IHRydWUgfTsKfSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wvaXRlcmF0b3IiOjMyOH1dLDMxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfTsKfSx7fV0sMzEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCnZhciBfZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCIuLi9jb3JlLWpzL29iamVjdC9kZWZpbmUtcHJvcGVydHkiKTsKCnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICAgIH0KICB9CgogIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgfTsKfSgpOwp9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjozMDJ9XSwzMTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKdmFyIF9zZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKTsKCnZhciBfc2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0UHJvdG90eXBlT2YpOwoKdmFyIF9jcmVhdGUgPSByZXF1aXJlKCIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiKTsKCnZhciBfY3JlYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZSk7Cgp2YXIgX3R5cGVvZjIgPSByZXF1aXJlKCIuLi9oZWxwZXJzL3R5cGVvZiIpOwoKdmFyIF90eXBlb2YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZW9mMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShzdXBlckNsYXNzKSkpOwogIH0KCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gKDAsIF9jcmVhdGUyLmRlZmF1bHQpKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgIHZhbHVlOiBzdWJDbGFzcywKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0KICB9KTsKICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mMi5kZWZhdWx0ID8gKDAsIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsKfTsKfSx7Ii4uL2NvcmUtanMvb2JqZWN0L2NyZWF0ZSI6MzAxLCIuLi9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjozMDYsIi4uL2hlbHBlcnMvdHlwZW9mIjozMTV9XSwzMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKdmFyIF90eXBlb2YyID0gcmVxdWlyZSgiLi4vaGVscGVycy90eXBlb2YiKTsKCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7CiAgaWYgKCFzZWxmKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShjYWxsKSkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOwp9Owp9LHsiLi4vaGVscGVycy90eXBlb2YiOjMxNX1dLDMxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX2l0ZXJhdG9yID0gcmVxdWlyZSgiLi4vY29yZS1qcy9zeW1ib2wvaXRlcmF0b3IiKTsKCnZhciBfaXRlcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXRlcmF0b3IpOwoKdmFyIF9zeW1ib2wgPSByZXF1aXJlKCIuLi9jb3JlLWpzL3N5bWJvbCIpOwoKdmFyIF9zeW1ib2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sKTsKCnZhciBfdHlwZW9mID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIF9pdGVyYXRvcjIuZGVmYXVsdCA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDIuZGVmYXVsdCA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mKF9pdGVyYXRvcjIuZGVmYXVsdCkgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgewogIHJldHVybiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOwp9IDogZnVuY3Rpb24gKG9iaikgewogIHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOwp9Owp9LHsiLi4vY29yZS1qcy9zeW1ib2wiOjMwOSwiLi4vY29yZS1qcy9zeW1ib2wvaXRlcmF0b3IiOjMxMH1dLDMxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpOwpyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5hcnJheS5mcm9tJyk7Cm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLkFycmF5LmZyb207Cn0seyIuLi8uLi9tb2R1bGVzL19jb3JlIjozNDMsIi4uLy4uL21vZHVsZXMvZXM2LmFycmF5LmZyb20iOjQwOSwiLi4vLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo0MjF9XSwzMTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY29yZSAgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykKICAsICRKU09OID0gY29yZS5KU09OIHx8IChjb3JlLkpTT04gPSB7c3RyaW5naWZ5OiBKU09OLnN0cmluZ2lmeX0pOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICByZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmd1bWVudHMpOwp9Owp9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzQzfV0sMzE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmFzc2lnbicpOwptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3QuYXNzaWduOwp9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzQzLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuYXNzaWduIjo0MTF9XSwzMTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuY3JlYXRlJyk7CnZhciAkT2JqZWN0ID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGUoUCwgRCl7CiAgcmV0dXJuICRPYmplY3QuY3JlYXRlKFAsIEQpOwp9Owp9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzQzLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuY3JlYXRlIjo0MTJ9XSwzMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5Jyk7CnZhciAkT2JqZWN0ID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXsKICByZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKTsKfTsKfSx7Ii4uLy4uL21vZHVsZXMvX2NvcmUiOjM0MywiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI6NDEzfV0sMzIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuT2JqZWN0LmdldFByb3RvdHlwZU9mOwp9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzQzLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LXByb3RvdHlwZS1vZiI6NDE0fV0sMzIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmlzLWZyb3plbicpOwptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvX2NvcmUnKS5PYmplY3QuaXNGcm96ZW47Cn0seyIuLi8uLi9tb2R1bGVzL19jb3JlIjozNDMsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5pcy1mcm96ZW4iOjQxNX1dLDMyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzJyk7Cm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9fY29yZScpLk9iamVjdC5rZXlzOwp9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzQzLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI6NDE2fV0sMzI0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuT2JqZWN0LnNldFByb3RvdHlwZU9mOwp9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzQzLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiI6NDE3fV0sMzI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKcmVxdWlyZSgnLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZycpOwpyZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3InKTsKcmVxdWlyZSgnLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlJyk7CnJlcXVpcmUoJy4uL21vZHVsZXMvZXM2LnByb21pc2UnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi9tb2R1bGVzL19jb3JlJykuUHJvbWlzZTsKfSx7Ii4uL21vZHVsZXMvX2NvcmUiOjM0MywiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6NDE4LCIuLi9tb2R1bGVzL2VzNi5wcm9taXNlIjo0MTksIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6NDIxLCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjQyNn1dLDMyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4uL21vZHVsZXMvZXM2Lm9iamVjdC50by1zdHJpbmcnKTsKcmVxdWlyZSgnLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yJyk7CnJlcXVpcmUoJy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZScpOwpyZXF1aXJlKCcuLi9tb2R1bGVzL2VzNi5zZXQnKTsKcmVxdWlyZSgnLi4vbW9kdWxlcy9lczcuc2V0LnRvLWpzb24nKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi9tb2R1bGVzL19jb3JlJykuU2V0Owp9LHsiLi4vbW9kdWxlcy9fY29yZSI6MzQzLCIuLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo0MTgsIi4uL21vZHVsZXMvZXM2LnNldCI6NDIwLCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjQyMSwiLi4vbW9kdWxlcy9lczcuc2V0LnRvLWpzb24iOjQyMywiLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjo0MjZ9XSwzMjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wnKTsKcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZycpOwpyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3InKTsKcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy9lczcuc3ltYm9sLm9ic2VydmFibGUnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL19jb3JlJykuU3ltYm9sOwp9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzQzLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIjo0MTgsIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCI6NDIyLCIuLi8uLi9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IiOjQyNCwiLi4vLi4vbW9kdWxlcy9lczcuc3ltYm9sLm9ic2VydmFibGUiOjQyNX1dLDMyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvcicpOwpyZXF1aXJlKCcuLi8uLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUnKTsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuLi8uLi9tb2R1bGVzL193a3MtZXh0JykuZignaXRlcmF0b3InKTsKfSx7Ii4uLy4uL21vZHVsZXMvX3drcy1leHQiOjQwNiwiLi4vLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjo0MjEsIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6NDI2fV0sMzI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjozfV0sMzMwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9Owp9LHt9XSwzMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjZ9XSwzMzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bN11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19pcy1vYmplY3QiOjM2MywiZHVwIjo3fV0sMzMzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzEwXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2Zvci1vZiI6MzUzLCJkdXAiOjEwfV0sMzM0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzExXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX3RvLWluZGV4IjozOTgsIi4vX3RvLWlvYmplY3QiOjQwMCwiLi9fdG8tbGVuZ3RoIjo0MDEsImR1cCI6MTF9XSwzMzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMTJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fYXJyYXktc3BlY2llcy1jcmVhdGUiOjMzNywiLi9fY3R4IjozNDUsIi4vX2lvYmplY3QiOjM2MCwiLi9fdG8tbGVuZ3RoIjo0MDEsIi4vX3RvLW9iamVjdCI6NDAyLCJkdXAiOjEyfV0sMzM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzE0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2lzLWFycmF5IjozNjIsIi4vX2lzLW9iamVjdCI6MzYzLCIuL193a3MiOjQwNywiZHVwIjoxNH1dLDMzNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsxNV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19hcnJheS1zcGVjaWVzLWNvbnN0cnVjdG9yIjozMzYsImR1cCI6MTV9XSwzMzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMTddWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fY29mIjozMzksIi4vX3drcyI6NDA3LCJkdXAiOjE3fV0sMzM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzE4XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6MTh9XSwzNDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMTldWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fYW4taW5zdGFuY2UiOjMzMSwiLi9fY3R4IjozNDUsIi4vX2RlZmluZWQiOjM0NiwiLi9fZGVzY3JpcHRvcnMiOjM0NywiLi9fZm9yLW9mIjozNTMsIi4vX2hpZGUiOjM1NiwiLi9faXRlci1kZWZpbmUiOjM2NiwiLi9faXRlci1zdGVwIjozNjgsIi4vX21ldGEiOjM3MiwiLi9fb2JqZWN0LWNyZWF0ZSI6Mzc1LCIuL19vYmplY3QtZHAiOjM3NiwiLi9fcmVkZWZpbmUtYWxsIjozODgsIi4vX3NldC1zcGVjaWVzIjozOTEsImR1cCI6MTl9XSwzNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMjBdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fYXJyYXktZnJvbS1pdGVyYWJsZSI6MzMzLCIuL19jbGFzc29mIjozMzgsImR1cCI6MjB9XSwzNDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBnbG9iYWwgICAgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpCiAgLCAkZXhwb3J0ICAgICAgICA9IHJlcXVpcmUoJy4vX2V4cG9ydCcpCiAgLCBtZXRhICAgICAgICAgICA9IHJlcXVpcmUoJy4vX21ldGEnKQogICwgZmFpbHMgICAgICAgICAgPSByZXF1aXJlKCcuL19mYWlscycpCiAgLCBoaWRlICAgICAgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKQogICwgcmVkZWZpbmVBbGwgICAgPSByZXF1aXJlKCcuL19yZWRlZmluZS1hbGwnKQogICwgZm9yT2YgICAgICAgICAgPSByZXF1aXJlKCcuL19mb3Itb2YnKQogICwgYW5JbnN0YW5jZSAgICAgPSByZXF1aXJlKCcuL19hbi1pbnN0YW5jZScpCiAgLCBpc09iamVjdCAgICAgICA9IHJlcXVpcmUoJy4vX2lzLW9iamVjdCcpCiAgLCBzZXRUb1N0cmluZ1RhZyA9IHJlcXVpcmUoJy4vX3NldC10by1zdHJpbmctdGFnJykKICAsIGRQICAgICAgICAgICAgID0gcmVxdWlyZSgnLi9fb2JqZWN0LWRwJykuZgogICwgZWFjaCAgICAgICAgICAgPSByZXF1aXJlKCcuL19hcnJheS1tZXRob2RzJykoMCkKICAsIERFU0NSSVBUT1JTICAgID0gcmVxdWlyZSgnLi9fZGVzY3JpcHRvcnMnKTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTkFNRSwgd3JhcHBlciwgbWV0aG9kcywgY29tbW9uLCBJU19NQVAsIElTX1dFQUspewogIHZhciBCYXNlICA9IGdsb2JhbFtOQU1FXQogICAgLCBDICAgICA9IEJhc2UKICAgICwgQURERVIgPSBJU19NQVAgPyAnc2V0JyA6ICdhZGQnCiAgICAsIHByb3RvID0gQyAmJiBDLnByb3RvdHlwZQogICAgLCBPICAgICA9IHt9OwogIGlmKCFERVNDUklQVE9SUyB8fCB0eXBlb2YgQyAhPSAnZnVuY3Rpb24nIHx8ICEoSVNfV0VBSyB8fCBwcm90by5mb3JFYWNoICYmICFmYWlscyhmdW5jdGlvbigpewogICAgbmV3IEMoKS5lbnRyaWVzKCkubmV4dCgpOwogIH0pKSl7CiAgICAvLyBjcmVhdGUgY29sbGVjdGlvbiBjb25zdHJ1Y3RvcgogICAgQyA9IGNvbW1vbi5nZXRDb25zdHJ1Y3Rvcih3cmFwcGVyLCBOQU1FLCBJU19NQVAsIEFEREVSKTsKICAgIHJlZGVmaW5lQWxsKEMucHJvdG90eXBlLCBtZXRob2RzKTsKICAgIG1ldGEuTkVFRCA9IHRydWU7CiAgfSBlbHNlIHsKICAgIEMgPSB3cmFwcGVyKGZ1bmN0aW9uKHRhcmdldCwgaXRlcmFibGUpewogICAgICBhbkluc3RhbmNlKHRhcmdldCwgQywgTkFNRSwgJ19jJyk7CiAgICAgIHRhcmdldC5fYyA9IG5ldyBCYXNlOwogICAgICBpZihpdGVyYWJsZSAhPSB1bmRlZmluZWQpZm9yT2YoaXRlcmFibGUsIElTX01BUCwgdGFyZ2V0W0FEREVSXSwgdGFyZ2V0KTsKICAgIH0pOwogICAgZWFjaCgnYWRkLGNsZWFyLGRlbGV0ZSxmb3JFYWNoLGdldCxoYXMsc2V0LGtleXMsdmFsdWVzLGVudHJpZXMsdG9KU09OJy5zcGxpdCgnLCcpLGZ1bmN0aW9uKEtFWSl7CiAgICAgIHZhciBJU19BRERFUiA9IEtFWSA9PSAnYWRkJyB8fCBLRVkgPT0gJ3NldCc7CiAgICAgIGlmKEtFWSBpbiBwcm90byAmJiAhKElTX1dFQUsgJiYgS0VZID09ICdjbGVhcicpKWhpZGUoQy5wcm90b3R5cGUsIEtFWSwgZnVuY3Rpb24oYSwgYil7CiAgICAgICAgYW5JbnN0YW5jZSh0aGlzLCBDLCBLRVkpOwogICAgICAgIGlmKCFJU19BRERFUiAmJiBJU19XRUFLICYmICFpc09iamVjdChhKSlyZXR1cm4gS0VZID09ICdnZXQnID8gdW5kZWZpbmVkIDogZmFsc2U7CiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2NbS0VZXShhID09PSAwID8gMCA6IGEsIGIpOwogICAgICAgIHJldHVybiBJU19BRERFUiA/IHRoaXMgOiByZXN1bHQ7CiAgICAgIH0pOwogICAgfSk7CiAgICBpZignc2l6ZScgaW4gcHJvdG8pZFAoQy5wcm90b3R5cGUsICdzaXplJywgewogICAgICBnZXQ6IGZ1bmN0aW9uKCl7CiAgICAgICAgcmV0dXJuIHRoaXMuX2Muc2l6ZTsKICAgICAgfQogICAgfSk7CiAgfQoKICBzZXRUb1N0cmluZ1RhZyhDLCBOQU1FKTsKCiAgT1tOQU1FXSA9IEM7CiAgJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYsIE8pOwoKICBpZighSVNfV0VBSyljb21tb24uc2V0U3Ryb25nKEMsIE5BTUUsIElTX01BUCk7CgogIHJldHVybiBDOwp9Owp9LHsiLi9fYW4taW5zdGFuY2UiOjMzMSwiLi9fYXJyYXktbWV0aG9kcyI6MzM1LCIuL19kZXNjcmlwdG9ycyI6MzQ3LCIuL19leHBvcnQiOjM1MSwiLi9fZmFpbHMiOjM1MiwiLi9fZm9yLW9mIjozNTMsIi4vX2dsb2JhbCI6MzU0LCIuL19oaWRlIjozNTYsIi4vX2lzLW9iamVjdCI6MzYzLCIuL19tZXRhIjozNzIsIi4vX29iamVjdC1kcCI6Mzc2LCIuL19yZWRlZmluZS1hbGwiOjM4OCwiLi9fc2V0LXRvLXN0cmluZy10YWciOjM5Mn1dLDM0MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsyM11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjIzfV0sMzQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzI0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX29iamVjdC1kcCI6Mzc2LCIuL19wcm9wZXJ0eS1kZXNjIjozODcsImR1cCI6MjR9XSwzNDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMjVdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fYS1mdW5jdGlvbiI6MzI5LCJkdXAiOjI1fV0sMzQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzI3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6Mjd9XSwzNDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMjhdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fZmFpbHMiOjM1MiwiZHVwIjoyOH1dLDM0ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsyOV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19nbG9iYWwiOjM1NCwiLi9faXMtb2JqZWN0IjozNjMsImR1cCI6Mjl9XSwzNDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMzBdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjozMH1dLDM1MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVszMV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19vYmplY3QtZ29wcyI6MzgxLCIuL19vYmplY3Qta2V5cyI6Mzg0LCIuL19vYmplY3QtcGllIjozODUsImR1cCI6MzF9XSwzNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZ2xvYmFsICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykKICAsIGNvcmUgICAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKQogICwgY3R4ICAgICAgID0gcmVxdWlyZSgnLi9fY3R4JykKICAsIGhpZGUgICAgICA9IHJlcXVpcmUoJy4vX2hpZGUnKQogICwgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7Cgp2YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7CiAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkYKICAgICwgSVNfR0xPQkFMID0gdHlwZSAmICRleHBvcnQuRwogICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TCiAgICAsIElTX1BST1RPICA9IHR5cGUgJiAkZXhwb3J0LlAKICAgICwgSVNfQklORCAgID0gdHlwZSAmICRleHBvcnQuQgogICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XCiAgICAsIGV4cG9ydHMgICA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pCiAgICAsIGV4cFByb3RvICA9IGV4cG9ydHNbUFJPVE9UWVBFXQogICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdCiAgICAsIGtleSwgb3duLCBvdXQ7CiAgaWYoSVNfR0xPQkFMKXNvdXJjZSA9IG5hbWU7CiAgZm9yKGtleSBpbiBzb3VyY2UpewogICAgLy8gY29udGFpbnMgaW4gbmF0aXZlCiAgICBvd24gPSAhSVNfRk9SQ0VEICYmIHRhcmdldCAmJiB0YXJnZXRba2V5XSAhPT0gdW5kZWZpbmVkOwogICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlOwogICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWQKICAgIG91dCA9IG93biA/IHRhcmdldFtrZXldIDogc291cmNlW2tleV07CiAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMKICAgIGV4cG9ydHNba2V5XSA9IElTX0dMT0JBTCAmJiB0eXBlb2YgdGFyZ2V0W2tleV0gIT0gJ2Z1bmN0aW9uJyA/IHNvdXJjZVtrZXldCiAgICAvLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dAogICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbCkKICAgIC8vIHdyYXAgZ2xvYmFsIGNvbnN0cnVjdG9ycyBmb3IgcHJldmVudCBjaGFuZ2UgdGhlbSBpbiBsaWJyYXJ5CiAgICA6IElTX1dSQVAgJiYgdGFyZ2V0W2tleV0gPT0gb3V0ID8gKGZ1bmN0aW9uKEMpewogICAgICB2YXIgRiA9IGZ1bmN0aW9uKGEsIGIsIGMpewogICAgICAgIGlmKHRoaXMgaW5zdGFuY2VvZiBDKXsKICAgICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKXsKICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IEM7CiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIG5ldyBDKGEpOwogICAgICAgICAgICBjYXNlIDI6IHJldHVybiBuZXcgQyhhLCBiKTsKICAgICAgICAgIH0gcmV0dXJuIG5ldyBDKGEsIGIsIGMpOwogICAgICAgIH0gcmV0dXJuIEMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdOwogICAgICByZXR1cm4gRjsKICAgIC8vIG1ha2Ugc3RhdGljIHZlcnNpb25zIGZvciBwcm90b3R5cGUgbWV0aG9kcwogICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0OwogICAgLy8gZXhwb3J0IHByb3RvIG1ldGhvZHMgdG8gY29yZS4lQ09OU1RSVUNUT1IlLm1ldGhvZHMuJU5BTUUlCiAgICBpZihJU19QUk9UTyl7CiAgICAgIChleHBvcnRzLnZpcnR1YWwgfHwgKGV4cG9ydHMudmlydHVhbCA9IHt9KSlba2V5XSA9IG91dDsKICAgICAgLy8gZXhwb3J0IHByb3RvIG1ldGhvZHMgdG8gY29yZS4lQ09OU1RSVUNUT1IlLnByb3RvdHlwZS4lTkFNRSUKICAgICAgaWYodHlwZSAmICRleHBvcnQuUiAmJiBleHBQcm90byAmJiAhZXhwUHJvdG9ba2V5XSloaWRlKGV4cFByb3RvLCBrZXksIG91dCk7CiAgICB9CiAgfQp9OwovLyB0eXBlIGJpdG1hcAokZXhwb3J0LkYgPSAxOyAgIC8vIGZvcmNlZAokZXhwb3J0LkcgPSAyOyAgIC8vIGdsb2JhbAokZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpYwokZXhwb3J0LlAgPSA4OyAgIC8vIHByb3RvCiRleHBvcnQuQiA9IDE2OyAgLy8gYmluZAokZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXAKJGV4cG9ydC5VID0gNjQ7ICAvLyBzYWZlCiRleHBvcnQuUiA9IDEyODsgLy8gcmVhbCBwcm90byBtZXRob2QgZm9yIGBsaWJyYXJ5YCAKbW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0Owp9LHsiLi9fY29yZSI6MzQzLCIuL19jdHgiOjM0NSwiLi9fZ2xvYmFsIjozNTQsIi4vX2hpZGUiOjM1Nn1dLDM1MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVszNF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjM0fV0sMzUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzM3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2FuLW9iamVjdCI6MzMyLCIuL19jdHgiOjM0NSwiLi9faXMtYXJyYXktaXRlciI6MzYxLCIuL19pdGVyLWNhbGwiOjM2NCwiLi9fdG8tbGVuZ3RoIjo0MDEsIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIjo0MDgsImR1cCI6Mzd9XSwzNTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMzhdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjozOH1dLDM1NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVszOV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjM5fV0sMzU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQwXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2Rlc2NyaXB0b3JzIjozNDcsIi4vX29iamVjdC1kcCI6Mzc2LCIuL19wcm9wZXJ0eS1kZXNjIjozODcsImR1cCI6NDB9XSwzNTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fZ2xvYmFsIjozNTQsImR1cCI6NDF9XSwzNTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fZGVzY3JpcHRvcnMiOjM0NywiLi9fZG9tLWNyZWF0ZSI6MzQ4LCIuL19mYWlscyI6MzUyLCJkdXAiOjQyfV0sMzU5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQ0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NDR9XSwzNjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDVdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fY29mIjozMzksImR1cCI6NDV9XSwzNjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDZdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9faXRlcmF0b3JzIjozNjksIi4vX3drcyI6NDA3LCJkdXAiOjQ2fV0sMzYyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQ3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2NvZiI6MzM5LCJkdXAiOjQ3fV0sMzYzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQ5XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NDl9XSwzNjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fYW4tb2JqZWN0IjozMzIsImR1cCI6NTF9XSwzNjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9faGlkZSI6MzU2LCIuL19vYmplY3QtY3JlYXRlIjozNzUsIi4vX3Byb3BlcnR5LWRlc2MiOjM4NywiLi9fc2V0LXRvLXN0cmluZy10YWciOjM5MiwiLi9fd2tzIjo0MDcsImR1cCI6NTJ9XSwzNjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fZXhwb3J0IjozNTEsIi4vX2hhcyI6MzU1LCIuL19oaWRlIjozNTYsIi4vX2l0ZXItY3JlYXRlIjozNjUsIi4vX2l0ZXJhdG9ycyI6MzY5LCIuL19saWJyYXJ5IjozNzEsIi4vX29iamVjdC1ncG8iOjM4MiwiLi9fcmVkZWZpbmUiOjM4OSwiLi9fc2V0LXRvLXN0cmluZy10YWciOjM5MiwiLi9fd2tzIjo0MDcsImR1cCI6NTN9XSwzNjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTRdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fd2tzIjo0MDcsImR1cCI6NTR9XSwzNjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTVdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo1NX1dLDM2OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1Nl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjU2fV0sMzcwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX29iamVjdC1rZXlzIjozODQsIi4vX3RvLWlvYmplY3QiOjQwMCwiZHVwIjo1N31dLDM3MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gdHJ1ZTsKfSx7fV0sMzcyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzYyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2ZhaWxzIjozNTIsIi4vX2hhcyI6MzU1LCIuL19pcy1vYmplY3QiOjM2MywiLi9fb2JqZWN0LWRwIjozNzYsIi4vX3VpZCI6NDA0LCJkdXAiOjYyfV0sMzczOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzY0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2NvZiI6MzM5LCIuL19nbG9iYWwiOjM1NCwiLi9fdGFzayI6Mzk3LCJkdXAiOjY0fV0sMzc0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzY1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2ZhaWxzIjozNTIsIi4vX2lvYmplY3QiOjM2MCwiLi9fb2JqZWN0LWdvcHMiOjM4MSwiLi9fb2JqZWN0LWtleXMiOjM4NCwiLi9fb2JqZWN0LXBpZSI6Mzg1LCIuL190by1vYmplY3QiOjQwMiwiZHVwIjo2NX1dLDM3NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs2Nl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19hbi1vYmplY3QiOjMzMiwiLi9fZG9tLWNyZWF0ZSI6MzQ4LCIuL19lbnVtLWJ1Zy1rZXlzIjozNDksIi4vX2h0bWwiOjM1NywiLi9fb2JqZWN0LWRwcyI6Mzc3LCIuL19zaGFyZWQta2V5IjozOTMsImR1cCI6NjZ9XSwzNzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNjddWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fYW4tb2JqZWN0IjozMzIsIi4vX2Rlc2NyaXB0b3JzIjozNDcsIi4vX2llOC1kb20tZGVmaW5lIjozNTgsIi4vX3RvLXByaW1pdGl2ZSI6NDAzLCJkdXAiOjY3fV0sMzc3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzY4XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2FuLW9iamVjdCI6MzMyLCIuL19kZXNjcmlwdG9ycyI6MzQ3LCIuL19vYmplY3QtZHAiOjM3NiwiLi9fb2JqZWN0LWtleXMiOjM4NCwiZHVwIjo2OH1dLDM3ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs3MF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19kZXNjcmlwdG9ycyI6MzQ3LCIuL19oYXMiOjM1NSwiLi9faWU4LWRvbS1kZWZpbmUiOjM1OCwiLi9fb2JqZWN0LXBpZSI6Mzg1LCIuL19wcm9wZXJ0eS1kZXNjIjozODcsIi4vX3RvLWlvYmplY3QiOjQwMCwiLi9fdG8tcHJpbWl0aXZlIjo0MDMsImR1cCI6NzB9XSwzNzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNzFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fb2JqZWN0LWdvcG4iOjM4MCwiLi9fdG8taW9iamVjdCI6NDAwLCJkdXAiOjcxfV0sMzgwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzcyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2VudW0tYnVnLWtleXMiOjM0OSwiLi9fb2JqZWN0LWtleXMtaW50ZXJuYWwiOjM4MywiZHVwIjo3Mn1dLDM4MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs3M11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjczfV0sMzgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzc0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2hhcyI6MzU1LCIuL19zaGFyZWQta2V5IjozOTMsIi4vX3RvLW9iamVjdCI6NDAyLCJkdXAiOjc0fV0sMzgzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzc1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2FycmF5LWluY2x1ZGVzIjozMzQsIi4vX2hhcyI6MzU1LCIuL19zaGFyZWQta2V5IjozOTMsIi4vX3RvLWlvYmplY3QiOjQwMCwiZHVwIjo3NX1dLDM4NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs3Nl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19lbnVtLWJ1Zy1rZXlzIjozNDksIi4vX29iamVjdC1rZXlzLWludGVybmFsIjozODMsImR1cCI6NzZ9XSwzODU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNzddWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo3N31dLDM4NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs3OF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19jb3JlIjozNDMsIi4vX2V4cG9ydCI6MzUxLCIuL19mYWlscyI6MzUyLCJkdXAiOjc4fV0sMzg3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzg1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6ODV9XSwzODg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaGlkZSA9IHJlcXVpcmUoJy4vX2hpZGUnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0YXJnZXQsIHNyYywgc2FmZSl7CiAgZm9yKHZhciBrZXkgaW4gc3JjKXsKICAgIGlmKHNhZmUgJiYgdGFyZ2V0W2tleV0pdGFyZ2V0W2tleV0gPSBzcmNba2V5XTsKICAgIGVsc2UgaGlkZSh0YXJnZXQsIGtleSwgc3JjW2tleV0pOwogIH0gcmV0dXJuIHRhcmdldDsKfTsKfSx7Ii4vX2hpZGUiOjM1Nn1dLDM4OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9faGlkZScpOwp9LHsiLi9faGlkZSI6MzU2fV0sMzkwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzkwXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2FuLW9iamVjdCI6MzMyLCIuL19jdHgiOjM0NSwiLi9faXMtb2JqZWN0IjozNjMsIi4vX29iamVjdC1nb3BkIjozNzgsImR1cCI6OTB9XSwzOTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CnZhciBnbG9iYWwgICAgICA9IHJlcXVpcmUoJy4vX2dsb2JhbCcpCiAgLCBjb3JlICAgICAgICA9IHJlcXVpcmUoJy4vX2NvcmUnKQogICwgZFAgICAgICAgICAgPSByZXF1aXJlKCcuL19vYmplY3QtZHAnKQogICwgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuL19kZXNjcmlwdG9ycycpCiAgLCBTUEVDSUVTICAgICA9IHJlcXVpcmUoJy4vX3drcycpKCdzcGVjaWVzJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSl7CiAgdmFyIEMgPSB0eXBlb2YgY29yZVtLRVldID09ICdmdW5jdGlvbicgPyBjb3JlW0tFWV0gOiBnbG9iYWxbS0VZXTsKICBpZihERVNDUklQVE9SUyAmJiBDICYmICFDW1NQRUNJRVNdKWRQLmYoQywgU1BFQ0lFUywgewogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfQogIH0pOwp9Owp9LHsiLi9fY29yZSI6MzQzLCIuL19kZXNjcmlwdG9ycyI6MzQ3LCIuL19nbG9iYWwiOjM1NCwiLi9fb2JqZWN0LWRwIjozNzYsIi4vX3drcyI6NDA3fV0sMzkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzkyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2hhcyI6MzU1LCIuL19vYmplY3QtZHAiOjM3NiwiLi9fd2tzIjo0MDcsImR1cCI6OTJ9XSwzOTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bOTNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fc2hhcmVkIjozOTQsIi4vX3VpZCI6NDA0LCJkdXAiOjkzfV0sMzk0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzk0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2dsb2JhbCI6MzU0LCJkdXAiOjk0fV0sMzk1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzk1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2EtZnVuY3Rpb24iOjMyOSwiLi9fYW4tb2JqZWN0IjozMzIsIi4vX3drcyI6NDA3LCJkdXAiOjk1fV0sMzk2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzk3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2RlZmluZWQiOjM0NiwiLi9fdG8taW50ZWdlciI6Mzk5LCJkdXAiOjk3fV0sMzk3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzEwNF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19jb2YiOjMzOSwiLi9fY3R4IjozNDUsIi4vX2RvbS1jcmVhdGUiOjM0OCwiLi9fZ2xvYmFsIjozNTQsIi4vX2h0bWwiOjM1NywiLi9faW52b2tlIjozNTksImR1cCI6MTA0fV0sMzk4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzEwNV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL190by1pbnRlZ2VyIjozOTksImR1cCI6MTA1fV0sMzk5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzEwNl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjEwNn1dLDQwMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsxMDddWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fZGVmaW5lZCI6MzQ2LCIuL19pb2JqZWN0IjozNjAsImR1cCI6MTA3fV0sNDAxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzEwOF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL190by1pbnRlZ2VyIjozOTksImR1cCI6MTA4fV0sNDAyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzEwOV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19kZWZpbmVkIjozNDYsImR1cCI6MTA5fV0sNDAzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzExMF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19pcy1vYmplY3QiOjM2MywiZHVwIjoxMTB9XSw0MDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMTE0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6MTE0fV0sNDA1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzExNV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19jb3JlIjozNDMsIi4vX2dsb2JhbCI6MzU0LCIuL19saWJyYXJ5IjozNzEsIi4vX29iamVjdC1kcCI6Mzc2LCIuL193a3MtZXh0Ijo0MDYsImR1cCI6MTE1fV0sNDA2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzExNl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL193a3MiOjQwNywiZHVwIjoxMTZ9XSw0MDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMTE3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2dsb2JhbCI6MzU0LCIuL19zaGFyZWQiOjM5NCwiLi9fdWlkIjo0MDQsImR1cCI6MTE3fV0sNDA4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzExOF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19jbGFzc29mIjozMzgsIi4vX2NvcmUiOjM0MywiLi9faXRlcmF0b3JzIjozNjksIi4vX3drcyI6NDA3LCJkdXAiOjExOH1dLDQwOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsxMjhdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fY3JlYXRlLXByb3BlcnR5IjozNDQsIi4vX2N0eCI6MzQ1LCIuL19leHBvcnQiOjM1MSwiLi9faXMtYXJyYXktaXRlciI6MzYxLCIuL19pdGVyLWNhbGwiOjM2NCwiLi9faXRlci1kZXRlY3QiOjM2NywiLi9fdG8tbGVuZ3RoIjo0MDEsIi4vX3RvLW9iamVjdCI6NDAyLCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6NDA4LCJkdXAiOjEyOH1dLDQxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsxMzFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fYWRkLXRvLXVuc2NvcGFibGVzIjozMzAsIi4vX2l0ZXItZGVmaW5lIjozNjYsIi4vX2l0ZXItc3RlcCI6MzY4LCIuL19pdGVyYXRvcnMiOjM2OSwiLi9fdG8taW9iamVjdCI6NDAwLCJkdXAiOjEzMX1dLDQxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsxODBdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fZXhwb3J0IjozNTEsIi4vX29iamVjdC1hc3NpZ24iOjM3NCwiZHVwIjoxODB9XSw0MTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMTgxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2V4cG9ydCI6MzUxLCIuL19vYmplY3QtY3JlYXRlIjozNzUsImR1cCI6MTgxfV0sNDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzE4M11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19kZXNjcmlwdG9ycyI6MzQ3LCIuL19leHBvcnQiOjM1MSwiLi9fb2JqZWN0LWRwIjozNzYsImR1cCI6MTgzfV0sNDE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzE4N11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19vYmplY3QtZ3BvIjozODIsIi4vX29iamVjdC1zYXAiOjM4NiwiLi9fdG8tb2JqZWN0Ijo0MDIsImR1cCI6MTg3fV0sNDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzE4OV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19pcy1vYmplY3QiOjM2MywiLi9fb2JqZWN0LXNhcCI6Mzg2LCJkdXAiOjE4OX1dLDQxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsxOTJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fb2JqZWN0LWtleXMiOjM4NCwiLi9fb2JqZWN0LXNhcCI6Mzg2LCIuL190by1vYmplY3QiOjQwMiwiZHVwIjoxOTJ9XSw0MTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMTk1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2V4cG9ydCI6MzUxLCIuL19zZXQtcHJvdG8iOjM5MCwiZHVwIjoxOTV9XSw0MTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoKfSx7fV0sNDE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzE5OV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL19hLWZ1bmN0aW9uIjozMjksIi4vX2FuLWluc3RhbmNlIjozMzEsIi4vX2FuLW9iamVjdCI6MzMyLCIuL19jbGFzc29mIjozMzgsIi4vX2NvcmUiOjM0MywiLi9fY3R4IjozNDUsIi4vX2V4cG9ydCI6MzUxLCIuL19mb3Itb2YiOjM1MywiLi9fZ2xvYmFsIjozNTQsIi4vX2lzLW9iamVjdCI6MzYzLCIuL19pdGVyLWRldGVjdCI6MzY3LCIuL19saWJyYXJ5IjozNzEsIi4vX21pY3JvdGFzayI6MzczLCIuL19yZWRlZmluZS1hbGwiOjM4OCwiLi9fc2V0LXByb3RvIjozOTAsIi4vX3NldC1zcGVjaWVzIjozOTEsIi4vX3NldC10by1zdHJpbmctdGFnIjozOTIsIi4vX3NwZWNpZXMtY29uc3RydWN0b3IiOjM5NSwiLi9fdGFzayI6Mzk3LCIuL193a3MiOjQwNywiZHVwIjoxOTl9XSw0MjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMjIxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2NvbGxlY3Rpb24iOjM0MiwiLi9fY29sbGVjdGlvbi1zdHJvbmciOjM0MCwiZHVwIjoyMjF9XSw0MjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bMjM0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vX2l0ZXItZGVmaW5lIjozNjYsIi4vX3N0cmluZy1hdCI6Mzk2LCJkdXAiOjIzNH1dLDQyMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsyNDRdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fYW4tb2JqZWN0IjozMzIsIi4vX2Rlc2NyaXB0b3JzIjozNDcsIi4vX2VudW0ta2V5cyI6MzUwLCIuL19leHBvcnQiOjM1MSwiLi9fZmFpbHMiOjM1MiwiLi9fZ2xvYmFsIjozNTQsIi4vX2hhcyI6MzU1LCIuL19oaWRlIjozNTYsIi4vX2lzLWFycmF5IjozNjIsIi4vX2tleW9mIjozNzAsIi4vX2xpYnJhcnkiOjM3MSwiLi9fbWV0YSI6MzcyLCIuL19vYmplY3QtY3JlYXRlIjozNzUsIi4vX29iamVjdC1kcCI6Mzc2LCIuL19vYmplY3QtZ29wZCI6Mzc4LCIuL19vYmplY3QtZ29wbiI6MzgwLCIuL19vYmplY3QtZ29wbi1leHQiOjM3OSwiLi9fb2JqZWN0LWdvcHMiOjM4MSwiLi9fb2JqZWN0LWtleXMiOjM4NCwiLi9fb2JqZWN0LXBpZSI6Mzg1LCIuL19wcm9wZXJ0eS1kZXNjIjozODcsIi4vX3JlZGVmaW5lIjozODksIi4vX3NldC10by1zdHJpbmctdGFnIjozOTIsIi4vX3NoYXJlZCI6Mzk0LCIuL190by1pb2JqZWN0Ijo0MDAsIi4vX3RvLXByaW1pdGl2ZSI6NDAzLCIuL191aWQiOjQwNCwiLi9fd2tzIjo0MDcsIi4vX3drcy1kZWZpbmUiOjQwNSwiLi9fd2tzLWV4dCI6NDA2LCJkdXAiOjI0NH1dLDQyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsyODNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fY29sbGVjdGlvbi10by1qc29uIjozNDEsIi4vX2V4cG9ydCI6MzUxLCJkdXAiOjI4M31dLDQyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsyOTBdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fd2tzLWRlZmluZSI6NDA1LCJkdXAiOjI5MH1dLDQyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVsyOTFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9fd2tzLWRlZmluZSI6NDA1LCJkdXAiOjI5MX1dLDQyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnJlcXVpcmUoJy4vZXM2LmFycmF5Lml0ZXJhdG9yJyk7CnZhciBnbG9iYWwgICAgICAgID0gcmVxdWlyZSgnLi9fZ2xvYmFsJykKICAsIGhpZGUgICAgICAgICAgPSByZXF1aXJlKCcuL19oaWRlJykKICAsIEl0ZXJhdG9ycyAgICAgPSByZXF1aXJlKCcuL19pdGVyYXRvcnMnKQogICwgVE9fU1RSSU5HX1RBRyA9IHJlcXVpcmUoJy4vX3drcycpKCd0b1N0cmluZ1RhZycpOwoKZm9yKHZhciBjb2xsZWN0aW9ucyA9IFsnTm9kZUxpc3QnLCAnRE9NVG9rZW5MaXN0JywgJ01lZGlhTGlzdCcsICdTdHlsZVNoZWV0TGlzdCcsICdDU1NSdWxlTGlzdCddLCBpID0gMDsgaSA8IDU7IGkrKyl7CiAgdmFyIE5BTUUgICAgICAgPSBjb2xsZWN0aW9uc1tpXQogICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdCiAgICAsIHByb3RvICAgICAgPSBDb2xsZWN0aW9uICYmIENvbGxlY3Rpb24ucHJvdG90eXBlOwogIGlmKHByb3RvICYmICFwcm90b1tUT19TVFJJTkdfVEFHXSloaWRlKHByb3RvLCBUT19TVFJJTkdfVEFHLCBOQU1FKTsKICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7Cn0KfSx7Ii4vX2dsb2JhbCI6MzU0LCIuL19oaWRlIjozNTYsIi4vX2l0ZXJhdG9ycyI6MzY5LCIuL193a3MiOjQwNywiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjQxMH1dLDQyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGJhc2U2NHVybCA9IG1vZHVsZS5leHBvcnRzOwoKYmFzZTY0dXJsLnVuZXNjYXBlID0gZnVuY3Rpb24gdW5lc2NhcGUgKHN0cikgewogIHJldHVybiAoc3RyICsgQXJyYXkoNSAtIHN0ci5sZW5ndGggJSA0KQogICAgLmpvaW4oJz0nKSkKICAgIC5yZXBsYWNlKC9cLS9nLCAnKycpCiAgICAucmVwbGFjZSgvXy9nLCAnLycpOwp9OwoKYmFzZTY0dXJsLmVzY2FwZSA9IGZ1bmN0aW9uIGVzY2FwZSAoc3RyKSB7CiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cKy9nLCAnLScpCiAgICAucmVwbGFjZSgvXC8vZywgJ18nKQogICAgLnJlcGxhY2UoLz0vZywgJycpOwp9OwoKYmFzZTY0dXJsLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZSAoc3RyKSB7CiAgcmV0dXJuIHRoaXMuZXNjYXBlKG5ldyBCdWZmZXIoc3RyKS50b1N0cmluZygnYmFzZTY0JykpOwp9OwoKYmFzZTY0dXJsLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZSAoc3RyKSB7CiAgcmV0dXJuIG5ldyBCdWZmZXIodGhpcy51bmVzY2FwZShzdHIpLCAnYmFzZTY0JykudG9TdHJpbmcoKTsKfTsKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjUwNH1dLDQyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpCnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKQp2YXIgcGJrZGYyID0gcmVxdWlyZSgncGJrZGYyJykucGJrZGYyU3luYwp2YXIgcmFuZG9tQnl0ZXMgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpCnZhciB1bm9ybSA9IHJlcXVpcmUoJ3Vub3JtJykKCnZhciBERUZBVUxUX1dPUkRMSVNUID0gcmVxdWlyZSgnLi93b3JkbGlzdHMvZW4uanNvbicpCgpmdW5jdGlvbiBtbmVtb25pY1RvU2VlZChtbmVtb25pYywgcGFzc3dvcmQpIHsKICB2YXIgbW5lbW9uaWNCdWZmZXIgPSBuZXcgQnVmZmVyKG1uZW1vbmljLCAndXRmOCcpCiAgdmFyIHNhbHRCdWZmZXIgPSBuZXcgQnVmZmVyKHNhbHQocGFzc3dvcmQpLCAndXRmOCcpCgogIHJldHVybiBwYmtkZjIobW5lbW9uaWNCdWZmZXIsIHNhbHRCdWZmZXIsIDIwNDgsIDY0LCAnc2hhNTEyJykKfQoKZnVuY3Rpb24gbW5lbW9uaWNUb1NlZWRIZXgobW5lbW9uaWMsIHBhc3N3b3JkKSB7CiAgcmV0dXJuIG1uZW1vbmljVG9TZWVkKG1uZW1vbmljLCBwYXNzd29yZCkudG9TdHJpbmcoJ2hleCcpCn0KCmZ1bmN0aW9uIG1uZW1vbmljVG9FbnRyb3B5KG1uZW1vbmljLCB3b3JkbGlzdCkgewogIHdvcmRsaXN0ID0gd29yZGxpc3QgfHwgREVGQVVMVF9XT1JETElTVAoKICB2YXIgd29yZHMgPSBtbmVtb25pYy5zcGxpdCgnICcpCiAgYXNzZXJ0KHdvcmRzLmxlbmd0aCAlIDMgPT09IDAsICdJbnZhbGlkIG1uZW1vbmljJykKCiAgdmFyIGJlbG9uZ1RvTGlzdCA9IHdvcmRzLmV2ZXJ5KGZ1bmN0aW9uKHdvcmQpIHsKICAgIHJldHVybiB3b3JkbGlzdC5pbmRleE9mKHdvcmQpID4gLTEKICB9KQoKICBhc3NlcnQoYmVsb25nVG9MaXN0LCAnSW52YWxpZCBtbmVtb25pYycpCgogIC8vIGNvbnZlcnQgd29yZCBpbmRpY2VzIHRvIDExIGJpdCBiaW5hcnkgc3RyaW5ncwogIHZhciBiaXRzID0gd29yZHMubWFwKGZ1bmN0aW9uKHdvcmQpIHsKICAgIHZhciBpbmRleCA9IHdvcmRsaXN0LmluZGV4T2Yod29yZCkKICAgIHJldHVybiBscGFkKGluZGV4LnRvU3RyaW5nKDIpLCAnMCcsIDExKQogIH0pLmpvaW4oJycpCgogIC8vIHNwbGl0IHRoZSBiaW5hcnkgc3RyaW5nIGludG8gRU5UL0NTCiAgdmFyIGRpdmlkZXJJbmRleCA9IE1hdGguZmxvb3IoYml0cy5sZW5ndGggLyAzMykgKiAzMgogIHZhciBlbnRyb3B5ID0gYml0cy5zbGljZSgwLCBkaXZpZGVySW5kZXgpCiAgdmFyIGNoZWNrc3VtID0gYml0cy5zbGljZShkaXZpZGVySW5kZXgpCgogIC8vIGNhbGN1bGF0ZSB0aGUgY2hlY2tzdW0gYW5kIGNvbXBhcmUKICB2YXIgZW50cm9weUJ5dGVzID0gZW50cm9weS5tYXRjaCgvKC57MSw4fSkvZykubWFwKGZ1bmN0aW9uKGJpbikgewogICAgcmV0dXJuIHBhcnNlSW50KGJpbiwgMikKICB9KQogIHZhciBlbnRyb3B5QnVmZmVyID0gbmV3IEJ1ZmZlcihlbnRyb3B5Qnl0ZXMpCiAgdmFyIG5ld0NoZWNrc3VtID0gY2hlY2tzdW1CaXRzKGVudHJvcHlCdWZmZXIpCgogIGFzc2VydChuZXdDaGVja3N1bSA9PT0gY2hlY2tzdW0sICdJbnZhbGlkIG1uZW1vbmljIGNoZWNrc3VtJykKCiAgcmV0dXJuIGVudHJvcHlCdWZmZXIudG9TdHJpbmcoJ2hleCcpCn0KCmZ1bmN0aW9uIGVudHJvcHlUb01uZW1vbmljKGVudHJvcHksIHdvcmRsaXN0KSB7CiAgd29yZGxpc3QgPSB3b3JkbGlzdCB8fCBERUZBVUxUX1dPUkRMSVNUCgogIHZhciBlbnRyb3B5QnVmZmVyID0gbmV3IEJ1ZmZlcihlbnRyb3B5LCAnaGV4JykKICB2YXIgZW50cm9weUJpdHMgPSBieXRlc1RvQmluYXJ5KFtdLnNsaWNlLmNhbGwoZW50cm9weUJ1ZmZlcikpCiAgdmFyIGNoZWNrc3VtID0gY2hlY2tzdW1CaXRzKGVudHJvcHlCdWZmZXIpCgogIHZhciBiaXRzID0gZW50cm9weUJpdHMgKyBjaGVja3N1bQogIHZhciBjaHVua3MgPSBiaXRzLm1hdGNoKC8oLnsxLDExfSkvZykKCiAgdmFyIHdvcmRzID0gY2h1bmtzLm1hcChmdW5jdGlvbihiaW5hcnkpIHsKICAgIHZhciBpbmRleCA9IHBhcnNlSW50KGJpbmFyeSwgMikKCiAgICByZXR1cm4gd29yZGxpc3RbaW5kZXhdCiAgfSkKCiAgcmV0dXJuIHdvcmRzLmpvaW4oJyAnKQp9CgpmdW5jdGlvbiBnZW5lcmF0ZU1uZW1vbmljKHN0cmVuZ3RoLCBybmcsIHdvcmRsaXN0KSB7CiAgc3RyZW5ndGggPSBzdHJlbmd0aCB8fCAxMjgKICBybmcgPSBybmcgfHwgcmFuZG9tQnl0ZXMKCiAgdmFyIGhleCA9IHJuZyhzdHJlbmd0aCAvIDgpLnRvU3RyaW5nKCdoZXgnKQogIHJldHVybiBlbnRyb3B5VG9NbmVtb25pYyhoZXgsIHdvcmRsaXN0KQp9CgpmdW5jdGlvbiB2YWxpZGF0ZU1uZW1vbmljKG1uZW1vbmljLCB3b3JkbGlzdCkgewogIHRyeSB7CiAgICBtbmVtb25pY1RvRW50cm9weShtbmVtb25pYywgd29yZGxpc3QpCiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIGZhbHNlCiAgfQoKICByZXR1cm4gdHJ1ZQp9CgpmdW5jdGlvbiBjaGVja3N1bUJpdHMoZW50cm9weUJ1ZmZlcikgewogIHZhciBoYXNoID0gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGVudHJvcHlCdWZmZXIpLmRpZ2VzdCgpCgogIC8vIENhbGN1bGF0ZWQgY29uc3RhbnRzIGZyb20gQklQMzkKICB2YXIgRU5UID0gZW50cm9weUJ1ZmZlci5sZW5ndGggKiA4CiAgdmFyIENTID0gRU5UIC8gMzIKCiAgcmV0dXJuIGJ5dGVzVG9CaW5hcnkoW10uc2xpY2UuY2FsbChoYXNoKSkuc2xpY2UoMCwgQ1MpCn0KCmZ1bmN0aW9uIHNhbHQocGFzc3dvcmQpIHsKICByZXR1cm4gJ21uZW1vbmljJyArICh1bm9ybS5uZmtkKHBhc3N3b3JkKSB8fCAnJykgLy8gVXNlIHVub3JtIHVudGlsIFN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplIGdldHMgYmV0dGVyIGJyb3dzZXIgc3VwcG9ydAp9CgovLz09PT09PT09PT09IGhlbHBlciBtZXRob2RzIGZyb20gYml0Y29pbmpzLWxpYiA9PT09PT09PQoKZnVuY3Rpb24gYnl0ZXNUb0JpbmFyeShieXRlcykgewogIHJldHVybiBieXRlcy5tYXAoZnVuY3Rpb24oeCkgewogICAgcmV0dXJuIGxwYWQoeC50b1N0cmluZygyKSwgJzAnLCA4KQogIH0pLmpvaW4oJycpOwp9CgpmdW5jdGlvbiBscGFkKHN0ciwgcGFkU3RyaW5nLCBsZW5ndGgpIHsKICB3aGlsZSAoc3RyLmxlbmd0aCA8IGxlbmd0aCkgc3RyID0gcGFkU3RyaW5nICsgc3RyOwogIHJldHVybiBzdHI7Cn0KCm1vZHVsZS5leHBvcnRzID0gewogIG1uZW1vbmljVG9TZWVkOiBtbmVtb25pY1RvU2VlZCwKICBtbmVtb25pY1RvU2VlZEhleDogbW5lbW9uaWNUb1NlZWRIZXgsCiAgbW5lbW9uaWNUb0VudHJvcHk6IG1uZW1vbmljVG9FbnRyb3B5LAogIGVudHJvcHlUb01uZW1vbmljOiBlbnRyb3B5VG9NbmVtb25pYywKICBnZW5lcmF0ZU1uZW1vbmljOiBnZW5lcmF0ZU1uZW1vbmljLAogIHZhbGlkYXRlTW5lbW9uaWM6IHZhbGlkYXRlTW5lbW9uaWMsCiAgd29yZGxpc3RzOiB7CiAgICBFTjogREVGQVVMVF9XT1JETElTVAogIH0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vd29yZGxpc3RzL2VuLmpzb24iOjQ0OCwiYXNzZXJ0Ijo1MDIsImJ1ZmZlciI6NTA0LCJjcmVhdGUtaGFzaCI6NDI5LCJwYmtkZjIiOjQ0MywicmFuZG9tYnl0ZXMiOjQ0NiwidW5vcm0iOjQ0N31dLDQyOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBtZDUgPSByZXF1aXJlKCcuL21kNScpCnZhciBybWQxNjAgPSByZXF1aXJlKCdyaXBlbWQxNjAnKQp2YXIgc2hhID0gcmVxdWlyZSgnc2hhLmpzJykKCnZhciBCYXNlID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQoKZnVuY3Rpb24gSGFzaE5vQ29uc3RydWN0b3IoaGFzaCkgewogIEJhc2UuY2FsbCh0aGlzLCAnZGlnZXN0JykKCiAgdGhpcy5faGFzaCA9IGhhc2gKICB0aGlzLmJ1ZmZlcnMgPSBbXQp9Cgppbmhlcml0cyhIYXNoTm9Db25zdHJ1Y3RvciwgQmFzZSkKCkhhc2hOb0NvbnN0cnVjdG9yLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLmJ1ZmZlcnMucHVzaChkYXRhKQp9CgpIYXNoTm9Db25zdHJ1Y3Rvci5wcm90b3R5cGUuX2ZpbmFsID0gZnVuY3Rpb24gKCkgewogIHZhciBidWYgPSBCdWZmZXIuY29uY2F0KHRoaXMuYnVmZmVycykKICB2YXIgciA9IHRoaXMuX2hhc2goYnVmKQogIHRoaXMuYnVmZmVycyA9IG51bGwKCiAgcmV0dXJuIHIKfQoKZnVuY3Rpb24gSGFzaChoYXNoKSB7CiAgQmFzZS5jYWxsKHRoaXMsICdkaWdlc3QnKQoKICB0aGlzLl9oYXNoID0gaGFzaAp9Cgppbmhlcml0cyhIYXNoLCBCYXNlKQoKSGFzaC5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdGhpcy5faGFzaC51cGRhdGUoZGF0YSkKfQoKSGFzaC5wcm90b3R5cGUuX2ZpbmFsID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl9oYXNoLmRpZ2VzdCgpCn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlSGFzaCAoYWxnKSB7CiAgYWxnID0gYWxnLnRvTG93ZXJDYXNlKCkKICBpZiAoJ21kNScgPT09IGFsZykgcmV0dXJuIG5ldyBIYXNoTm9Db25zdHJ1Y3RvcihtZDUpCiAgaWYgKCdybWQxNjAnID09PSBhbGcgfHwgJ3JpcGVtZDE2MCcgPT09IGFsZykgcmV0dXJuIG5ldyBIYXNoTm9Db25zdHJ1Y3RvcihybWQxNjApCgogIHJldHVybiBuZXcgSGFzaChzaGEoYWxnKSkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vbWQ1Ijo0MzEsImJ1ZmZlciI6NTA0LCJjaXBoZXItYmFzZSI6NDMyLCJpbmhlcml0cyI6NDMzLCJyaXBlbWQxNjAiOjQzNCwic2hhLmpzIjo0MzZ9XSw0MzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKdmFyIGludFNpemUgPSA0Owp2YXIgemVyb0J1ZmZlciA9IG5ldyBCdWZmZXIoaW50U2l6ZSk7IHplcm9CdWZmZXIuZmlsbCgwKTsKdmFyIGNocnN6ID0gODsKCmZ1bmN0aW9uIHRvQXJyYXkoYnVmLCBiaWdFbmRpYW4pIHsKICBpZiAoKGJ1Zi5sZW5ndGggJSBpbnRTaXplKSAhPT0gMCkgewogICAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGggKyAoaW50U2l6ZSAtIChidWYubGVuZ3RoICUgaW50U2l6ZSkpOwogICAgYnVmID0gQnVmZmVyLmNvbmNhdChbYnVmLCB6ZXJvQnVmZmVyXSwgbGVuKTsKICB9CgogIHZhciBhcnIgPSBbXTsKICB2YXIgZm4gPSBiaWdFbmRpYW4gPyBidWYucmVhZEludDMyQkUgOiBidWYucmVhZEludDMyTEU7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWYubGVuZ3RoOyBpICs9IGludFNpemUpIHsKICAgIGFyci5wdXNoKGZuLmNhbGwoYnVmLCBpKSk7CiAgfQogIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIHRvQnVmZmVyKGFyciwgc2l6ZSwgYmlnRW5kaWFuKSB7CiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc2l6ZSk7CiAgdmFyIGZuID0gYmlnRW5kaWFuID8gYnVmLndyaXRlSW50MzJCRSA6IGJ1Zi53cml0ZUludDMyTEU7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgIGZuLmNhbGwoYnVmLCBhcnJbaV0sIGkgKiA0LCB0cnVlKTsKICB9CiAgcmV0dXJuIGJ1ZjsKfQoKZnVuY3Rpb24gaGFzaChidWYsIGZuLCBoYXNoU2l6ZSwgYmlnRW5kaWFuKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgYnVmID0gbmV3IEJ1ZmZlcihidWYpOwogIHZhciBhcnIgPSBmbih0b0FycmF5KGJ1ZiwgYmlnRW5kaWFuKSwgYnVmLmxlbmd0aCAqIGNocnN6KTsKICByZXR1cm4gdG9CdWZmZXIoYXJyLCBoYXNoU2l6ZSwgYmlnRW5kaWFuKTsKfQpleHBvcnRzLmhhc2ggPSBoYXNoOwp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDR9XSw0MzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Ci8qCiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgUlNBIERhdGEgU2VjdXJpdHksIEluYy4gTUQ1IE1lc3NhZ2UKICogRGlnZXN0IEFsZ29yaXRobSwgYXMgZGVmaW5lZCBpbiBSRkMgMTMyMS4KICogVmVyc2lvbiAyLjEgQ29weXJpZ2h0IChDKSBQYXVsIEpvaG5zdG9uIDE5OTkgLSAyMDAyLgogKiBPdGhlciBjb250cmlidXRvcnM6IEdyZWcgSG9sdCwgQW5kcmV3IEtlcGVydCwgWWRuYXIsIExvc3RpbmV0CiAqIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBCU0QgTGljZW5zZQogKiBTZWUgaHR0cDovL3BhamhvbWUub3JnLnVrL2NyeXB0L21kNSBmb3IgbW9yZSBpbmZvLgogKi8KCnZhciBoZWxwZXJzID0gcmVxdWlyZSgnLi9oZWxwZXJzJyk7CgovKgogKiBDYWxjdWxhdGUgdGhlIE1ENSBvZiBhbiBhcnJheSBvZiBsaXR0bGUtZW5kaWFuIHdvcmRzLCBhbmQgYSBiaXQgbGVuZ3RoCiAqLwpmdW5jdGlvbiBjb3JlX21kNSh4LCBsZW4pCnsKICAvKiBhcHBlbmQgcGFkZGluZyAqLwogIHhbbGVuID4+IDVdIHw9IDB4ODAgPDwgKChsZW4pICUgMzIpOwogIHhbKCgobGVuICsgNjQpID4+PiA5KSA8PCA0KSArIDE0XSA9IGxlbjsKCiAgdmFyIGEgPSAgMTczMjU4NDE5MzsKICB2YXIgYiA9IC0yNzE3MzM4Nzk7CiAgdmFyIGMgPSAtMTczMjU4NDE5NDsKICB2YXIgZCA9ICAyNzE3MzM4Nzg7CgogIGZvcih2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSArPSAxNikKICB7CiAgICB2YXIgb2xkYSA9IGE7CiAgICB2YXIgb2xkYiA9IGI7CiAgICB2YXIgb2xkYyA9IGM7CiAgICB2YXIgb2xkZCA9IGQ7CgogICAgYSA9IG1kNV9mZihhLCBiLCBjLCBkLCB4W2krIDBdLCA3ICwgLTY4MDg3NjkzNik7CiAgICBkID0gbWQ1X2ZmKGQsIGEsIGIsIGMsIHhbaSsgMV0sIDEyLCAtMzg5NTY0NTg2KTsKICAgIGMgPSBtZDVfZmYoYywgZCwgYSwgYiwgeFtpKyAyXSwgMTcsICA2MDYxMDU4MTkpOwogICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2krIDNdLCAyMiwgLTEwNDQ1MjUzMzApOwogICAgYSA9IG1kNV9mZihhLCBiLCBjLCBkLCB4W2krIDRdLCA3ICwgLTE3NjQxODg5Nyk7CiAgICBkID0gbWQ1X2ZmKGQsIGEsIGIsIGMsIHhbaSsgNV0sIDEyLCAgMTIwMDA4MDQyNik7CiAgICBjID0gbWQ1X2ZmKGMsIGQsIGEsIGIsIHhbaSsgNl0sIDE3LCAtMTQ3MzIzMTM0MSk7CiAgICBiID0gbWQ1X2ZmKGIsIGMsIGQsIGEsIHhbaSsgN10sIDIyLCAtNDU3MDU5ODMpOwogICAgYSA9IG1kNV9mZihhLCBiLCBjLCBkLCB4W2krIDhdLCA3ICwgIDE3NzAwMzU0MTYpOwogICAgZCA9IG1kNV9mZihkLCBhLCBiLCBjLCB4W2krIDldLCAxMiwgLTE5NTg0MTQ0MTcpOwogICAgYyA9IG1kNV9mZihjLCBkLCBhLCBiLCB4W2krMTBdLCAxNywgLTQyMDYzKTsKICAgIGIgPSBtZDVfZmYoYiwgYywgZCwgYSwgeFtpKzExXSwgMjIsIC0xOTkwNDA0MTYyKTsKICAgIGEgPSBtZDVfZmYoYSwgYiwgYywgZCwgeFtpKzEyXSwgNyAsICAxODA0NjAzNjgyKTsKICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpKzEzXSwgMTIsIC00MDM0MTEwMSk7CiAgICBjID0gbWQ1X2ZmKGMsIGQsIGEsIGIsIHhbaSsxNF0sIDE3LCAtMTUwMjAwMjI5MCk7CiAgICBiID0gbWQ1X2ZmKGIsIGMsIGQsIGEsIHhbaSsxNV0sIDIyLCAgMTIzNjUzNTMyOSk7CgogICAgYSA9IG1kNV9nZyhhLCBiLCBjLCBkLCB4W2krIDFdLCA1ICwgLTE2NTc5NjUxMCk7CiAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSsgNl0sIDkgLCAtMTA2OTUwMTYzMik7CiAgICBjID0gbWQ1X2dnKGMsIGQsIGEsIGIsIHhbaSsxMV0sIDE0LCAgNjQzNzE3NzEzKTsKICAgIGIgPSBtZDVfZ2coYiwgYywgZCwgYSwgeFtpKyAwXSwgMjAsIC0zNzM4OTczMDIpOwogICAgYSA9IG1kNV9nZyhhLCBiLCBjLCBkLCB4W2krIDVdLCA1ICwgLTcwMTU1ODY5MSk7CiAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSsxMF0sIDkgLCAgMzgwMTYwODMpOwogICAgYyA9IG1kNV9nZyhjLCBkLCBhLCBiLCB4W2krMTVdLCAxNCwgLTY2MDQ3ODMzNSk7CiAgICBiID0gbWQ1X2dnKGIsIGMsIGQsIGEsIHhbaSsgNF0sIDIwLCAtNDA1NTM3ODQ4KTsKICAgIGEgPSBtZDVfZ2coYSwgYiwgYywgZCwgeFtpKyA5XSwgNSAsICA1Njg0NDY0MzgpOwogICAgZCA9IG1kNV9nZyhkLCBhLCBiLCBjLCB4W2krMTRdLCA5ICwgLTEwMTk4MDM2OTApOwogICAgYyA9IG1kNV9nZyhjLCBkLCBhLCBiLCB4W2krIDNdLCAxNCwgLTE4NzM2Mzk2MSk7CiAgICBiID0gbWQ1X2dnKGIsIGMsIGQsIGEsIHhbaSsgOF0sIDIwLCAgMTE2MzUzMTUwMSk7CiAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSsxM10sIDUgLCAtMTQ0NDY4MTQ2Nyk7CiAgICBkID0gbWQ1X2dnKGQsIGEsIGIsIGMsIHhbaSsgMl0sIDkgLCAtNTE0MDM3ODQpOwogICAgYyA9IG1kNV9nZyhjLCBkLCBhLCBiLCB4W2krIDddLCAxNCwgIDE3MzUzMjg0NzMpOwogICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2krMTJdLCAyMCwgLTE5MjY2MDc3MzQpOwoKICAgIGEgPSBtZDVfaGgoYSwgYiwgYywgZCwgeFtpKyA1XSwgNCAsIC0zNzg1NTgpOwogICAgZCA9IG1kNV9oaChkLCBhLCBiLCBjLCB4W2krIDhdLCAxMSwgLTIwMjI1NzQ0NjMpOwogICAgYyA9IG1kNV9oaChjLCBkLCBhLCBiLCB4W2krMTFdLCAxNiwgIDE4MzkwMzA1NjIpOwogICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2krMTRdLCAyMywgLTM1MzA5NTU2KTsKICAgIGEgPSBtZDVfaGgoYSwgYiwgYywgZCwgeFtpKyAxXSwgNCAsIC0xNTMwOTkyMDYwKTsKICAgIGQgPSBtZDVfaGgoZCwgYSwgYiwgYywgeFtpKyA0XSwgMTEsICAxMjcyODkzMzUzKTsKICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpKyA3XSwgMTYsIC0xNTU0OTc2MzIpOwogICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2krMTBdLCAyMywgLTEwOTQ3MzA2NDApOwogICAgYSA9IG1kNV9oaChhLCBiLCBjLCBkLCB4W2krMTNdLCA0ICwgIDY4MTI3OTE3NCk7CiAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSsgMF0sIDExLCAtMzU4NTM3MjIyKTsKICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpKyAzXSwgMTYsIC03MjI1MjE5NzkpOwogICAgYiA9IG1kNV9oaChiLCBjLCBkLCBhLCB4W2krIDZdLCAyMywgIDc2MDI5MTg5KTsKICAgIGEgPSBtZDVfaGgoYSwgYiwgYywgZCwgeFtpKyA5XSwgNCAsIC02NDAzNjQ0ODcpOwogICAgZCA9IG1kNV9oaChkLCBhLCBiLCBjLCB4W2krMTJdLCAxMSwgLTQyMTgxNTgzNSk7CiAgICBjID0gbWQ1X2hoKGMsIGQsIGEsIGIsIHhbaSsxNV0sIDE2LCAgNTMwNzQyNTIwKTsKICAgIGIgPSBtZDVfaGgoYiwgYywgZCwgYSwgeFtpKyAyXSwgMjMsIC05OTUzMzg2NTEpOwoKICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpKyAwXSwgNiAsIC0xOTg2MzA4NDQpOwogICAgZCA9IG1kNV9paShkLCBhLCBiLCBjLCB4W2krIDddLCAxMCwgIDExMjY4OTE0MTUpOwogICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2krMTRdLCAxNSwgLTE0MTYzNTQ5MDUpOwogICAgYiA9IG1kNV9paShiLCBjLCBkLCBhLCB4W2krIDVdLCAyMSwgLTU3NDM0MDU1KTsKICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpKzEyXSwgNiAsICAxNzAwNDg1NTcxKTsKICAgIGQgPSBtZDVfaWkoZCwgYSwgYiwgYywgeFtpKyAzXSwgMTAsIC0xODk0OTg2NjA2KTsKICAgIGMgPSBtZDVfaWkoYywgZCwgYSwgYiwgeFtpKzEwXSwgMTUsIC0xMDUxNTIzKTsKICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpKyAxXSwgMjEsIC0yMDU0OTIyNzk5KTsKICAgIGEgPSBtZDVfaWkoYSwgYiwgYywgZCwgeFtpKyA4XSwgNiAsICAxODczMzEzMzU5KTsKICAgIGQgPSBtZDVfaWkoZCwgYSwgYiwgYywgeFtpKzE1XSwgMTAsIC0zMDYxMTc0NCk7CiAgICBjID0gbWQ1X2lpKGMsIGQsIGEsIGIsIHhbaSsgNl0sIDE1LCAtMTU2MDE5ODM4MCk7CiAgICBiID0gbWQ1X2lpKGIsIGMsIGQsIGEsIHhbaSsxM10sIDIxLCAgMTMwOTE1MTY0OSk7CiAgICBhID0gbWQ1X2lpKGEsIGIsIGMsIGQsIHhbaSsgNF0sIDYgLCAtMTQ1NTIzMDcwKTsKICAgIGQgPSBtZDVfaWkoZCwgYSwgYiwgYywgeFtpKzExXSwgMTAsIC0xMTIwMjEwMzc5KTsKICAgIGMgPSBtZDVfaWkoYywgZCwgYSwgYiwgeFtpKyAyXSwgMTUsICA3MTg3ODcyNTkpOwogICAgYiA9IG1kNV9paShiLCBjLCBkLCBhLCB4W2krIDldLCAyMSwgLTM0MzQ4NTU1MSk7CgogICAgYSA9IHNhZmVfYWRkKGEsIG9sZGEpOwogICAgYiA9IHNhZmVfYWRkKGIsIG9sZGIpOwogICAgYyA9IHNhZmVfYWRkKGMsIG9sZGMpOwogICAgZCA9IHNhZmVfYWRkKGQsIG9sZGQpOwogIH0KICByZXR1cm4gQXJyYXkoYSwgYiwgYywgZCk7Cgp9CgovKgogKiBUaGVzZSBmdW5jdGlvbnMgaW1wbGVtZW50IHRoZSBmb3VyIGJhc2ljIG9wZXJhdGlvbnMgdGhlIGFsZ29yaXRobSB1c2VzLgogKi8KZnVuY3Rpb24gbWQ1X2NtbihxLCBhLCBiLCB4LCBzLCB0KQp7CiAgcmV0dXJuIHNhZmVfYWRkKGJpdF9yb2woc2FmZV9hZGQoc2FmZV9hZGQoYSwgcSksIHNhZmVfYWRkKHgsIHQpKSwgcyksYik7Cn0KZnVuY3Rpb24gbWQ1X2ZmKGEsIGIsIGMsIGQsIHgsIHMsIHQpCnsKICByZXR1cm4gbWQ1X2NtbigoYiAmIGMpIHwgKCh+YikgJiBkKSwgYSwgYiwgeCwgcywgdCk7Cn0KZnVuY3Rpb24gbWQ1X2dnKGEsIGIsIGMsIGQsIHgsIHMsIHQpCnsKICByZXR1cm4gbWQ1X2NtbigoYiAmIGQpIHwgKGMgJiAofmQpKSwgYSwgYiwgeCwgcywgdCk7Cn0KZnVuY3Rpb24gbWQ1X2hoKGEsIGIsIGMsIGQsIHgsIHMsIHQpCnsKICByZXR1cm4gbWQ1X2NtbihiIF4gYyBeIGQsIGEsIGIsIHgsIHMsIHQpOwp9CmZ1bmN0aW9uIG1kNV9paShhLCBiLCBjLCBkLCB4LCBzLCB0KQp7CiAgcmV0dXJuIG1kNV9jbW4oYyBeIChiIHwgKH5kKSksIGEsIGIsIHgsIHMsIHQpOwp9CgovKgogKiBBZGQgaW50ZWdlcnMsIHdyYXBwaW5nIGF0IDJeMzIuIFRoaXMgdXNlcyAxNi1iaXQgb3BlcmF0aW9ucyBpbnRlcm5hbGx5CiAqIHRvIHdvcmsgYXJvdW5kIGJ1Z3MgaW4gc29tZSBKUyBpbnRlcnByZXRlcnMuCiAqLwpmdW5jdGlvbiBzYWZlX2FkZCh4LCB5KQp7CiAgdmFyIGxzdyA9ICh4ICYgMHhGRkZGKSArICh5ICYgMHhGRkZGKTsKICB2YXIgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7CiAgcmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7Cn0KCi8qCiAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdC4KICovCmZ1bmN0aW9uIGJpdF9yb2wobnVtLCBjbnQpCnsKICByZXR1cm4gKG51bSA8PCBjbnQpIHwgKG51bSA+Pj4gKDMyIC0gY250KSk7Cn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWQ1KGJ1ZikgewogIHJldHVybiBoZWxwZXJzLmhhc2goYnVmLCBjb3JlX21kNSwgMTYpOwp9Owp9LHsiLi9oZWxwZXJzIjo0MzB9XSw0MzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdzdHJlYW0nKS5UcmFuc2Zvcm0KdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyJykuU3RyaW5nRGVjb2Rlcgptb2R1bGUuZXhwb3J0cyA9IENpcGhlckJhc2UKaW5oZXJpdHMoQ2lwaGVyQmFzZSwgVHJhbnNmb3JtKQpmdW5jdGlvbiBDaXBoZXJCYXNlIChoYXNoTW9kZSkgewogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5oYXNoTW9kZSA9IHR5cGVvZiBoYXNoTW9kZSA9PT0gJ3N0cmluZycKICBpZiAodGhpcy5oYXNoTW9kZSkgewogICAgdGhpc1toYXNoTW9kZV0gPSB0aGlzLl9maW5hbE9yRGlnZXN0CiAgfSBlbHNlIHsKICAgIHRoaXMuZmluYWwgPSB0aGlzLl9maW5hbE9yRGlnZXN0CiAgfQogIHRoaXMuX2RlY29kZXIgPSBudWxsCiAgdGhpcy5fZW5jb2RpbmcgPSBudWxsCn0KQ2lwaGVyQmFzZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRhdGEsIGlucHV0RW5jLCBvdXRwdXRFbmMpIHsKICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICBkYXRhID0gbmV3IEJ1ZmZlcihkYXRhLCBpbnB1dEVuYykKICB9CiAgdmFyIG91dERhdGEgPSB0aGlzLl91cGRhdGUoZGF0YSkKICBpZiAodGhpcy5oYXNoTW9kZSkgewogICAgcmV0dXJuIHRoaXMKICB9CiAgaWYgKG91dHB1dEVuYykgewogICAgb3V0RGF0YSA9IHRoaXMuX3RvU3RyaW5nKG91dERhdGEsIG91dHB1dEVuYykKICB9CiAgcmV0dXJuIG91dERhdGEKfQoKQ2lwaGVyQmFzZS5wcm90b3R5cGUuc2V0QXV0b1BhZGRpbmcgPSBmdW5jdGlvbiAoKSB7fQoKQ2lwaGVyQmFzZS5wcm90b3R5cGUuZ2V0QXV0aFRhZyA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ3RyeWluZyB0byBnZXQgYXV0aCB0YWcgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQp9CgpDaXBoZXJCYXNlLnByb3RvdHlwZS5zZXRBdXRoVGFnID0gZnVuY3Rpb24gKCkgewogIHRocm93IG5ldyBFcnJvcigndHJ5aW5nIHRvIHNldCBhdXRoIHRhZyBpbiB1bnN1cHBvcnRlZCBzdGF0ZScpCn0KCkNpcGhlckJhc2UucHJvdG90eXBlLnNldEFBRCA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ3RyeWluZyB0byBzZXQgYWFkIGluIHVuc3VwcG9ydGVkIHN0YXRlJykKfQoKQ2lwaGVyQmFzZS5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uIChkYXRhLCBfLCBuZXh0KSB7CiAgdmFyIGVycgogIHRyeSB7CiAgICBpZiAodGhpcy5oYXNoTW9kZSkgewogICAgICB0aGlzLl91cGRhdGUoZGF0YSkKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucHVzaCh0aGlzLl91cGRhdGUoZGF0YSkpCiAgICB9CiAgfSBjYXRjaCAoZSkgewogICAgZXJyID0gZQogIH0gZmluYWxseSB7CiAgICBuZXh0KGVycikKICB9Cn0KQ2lwaGVyQmFzZS5wcm90b3R5cGUuX2ZsdXNoID0gZnVuY3Rpb24gKGRvbmUpIHsKICB2YXIgZXJyCiAgdHJ5IHsKICAgIHRoaXMucHVzaCh0aGlzLl9maW5hbCgpKQogIH0gY2F0Y2ggKGUpIHsKICAgIGVyciA9IGUKICB9IGZpbmFsbHkgewogICAgZG9uZShlcnIpCiAgfQp9CkNpcGhlckJhc2UucHJvdG90eXBlLl9maW5hbE9yRGlnZXN0ID0gZnVuY3Rpb24gKG91dHB1dEVuYykgewogIHZhciBvdXREYXRhID0gdGhpcy5fZmluYWwoKSB8fCBuZXcgQnVmZmVyKCcnKQogIGlmIChvdXRwdXRFbmMpIHsKICAgIG91dERhdGEgPSB0aGlzLl90b1N0cmluZyhvdXREYXRhLCBvdXRwdXRFbmMsIHRydWUpCiAgfQogIHJldHVybiBvdXREYXRhCn0KCkNpcGhlckJhc2UucHJvdG90eXBlLl90b1N0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jLCBmaW5hbCkgewogIGlmICghdGhpcy5fZGVjb2RlcikgewogICAgdGhpcy5fZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYykKICAgIHRoaXMuX2VuY29kaW5nID0gZW5jCiAgfQogIGlmICh0aGlzLl9lbmNvZGluZyAhPT0gZW5jKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhblwndCBzd2l0Y2ggZW5jb2RpbmdzJykKICB9CiAgdmFyIG91dCA9IHRoaXMuX2RlY29kZXIud3JpdGUodmFsdWUpCiAgaWYgKGZpbmFsKSB7CiAgICBvdXQgKz0gdGhpcy5fZGVjb2Rlci5lbmQoKQogIH0KICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjUwNCwiaW5oZXJpdHMiOjQzMywic3RyZWFtIjo3MTksInN0cmluZ19kZWNvZGVyIjo3MjB9XSw0MzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewppZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHsKICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZQogIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7CiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvcgogICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHsKICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICB2YWx1ZTogY3RvciwKICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfQogICAgfSk7CiAgfTsKfSBlbHNlIHsKICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2VycwogIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7CiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvcgogICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge30KICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGUKICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKCkKICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvcgogIH0KfQoKfSx7fV0sNDM0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKgpDcnlwdG9KUyB2My4xLjIKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCi8qKiBAcHJlc2VydmUKKGMpIDIwMTIgYnkgQ8OpZHJpYyBNZXNuaWwuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCgpSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6CgogICAgLSBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAgICAtIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KClRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiovCgovLyBjb25zdGFudHMgdGFibGUKdmFyIHpsID0gWwogIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsCiAgNywgNCwgMTMsIDEsIDEwLCA2LCAxNSwgMywgMTIsIDAsIDksIDUsIDIsIDE0LCAxMSwgOCwKICAzLCAxMCwgMTQsIDQsIDksIDE1LCA4LCAxLCAyLCA3LCAwLCA2LCAxMywgMTEsIDUsIDEyLAogIDEsIDksIDExLCAxMCwgMCwgOCwgMTIsIDQsIDEzLCAzLCA3LCAxNSwgMTQsIDUsIDYsIDIsCiAgNCwgMCwgNSwgOSwgNywgMTIsIDIsIDEwLCAxNCwgMSwgMywgOCwgMTEsIDYsIDE1LCAxMwpdCgp2YXIgenIgPSBbCiAgNSwgMTQsIDcsIDAsIDksIDIsIDExLCA0LCAxMywgNiwgMTUsIDgsIDEsIDEwLCAzLCAxMiwKICA2LCAxMSwgMywgNywgMCwgMTMsIDUsIDEwLCAxNCwgMTUsIDgsIDEyLCA0LCA5LCAxLCAyLAogIDE1LCA1LCAxLCAzLCA3LCAxNCwgNiwgOSwgMTEsIDgsIDEyLCAyLCAxMCwgMCwgNCwgMTMsCiAgOCwgNiwgNCwgMSwgMywgMTEsIDE1LCAwLCA1LCAxMiwgMiwgMTMsIDksIDcsIDEwLCAxNCwKICAxMiwgMTUsIDEwLCA0LCAxLCA1LCA4LCA3LCA2LCAyLCAxMywgMTQsIDAsIDMsIDksIDExCl0KCnZhciBzbCA9IFsKICAxMSwgMTQsIDE1LCAxMiwgNSwgOCwgNywgOSwgMTEsIDEzLCAxNCwgMTUsIDYsIDcsIDksIDgsCiAgNywgNiwgOCwgMTMsIDExLCA5LCA3LCAxNSwgNywgMTIsIDE1LCA5LCAxMSwgNywgMTMsIDEyLAogIDExLCAxMywgNiwgNywgMTQsIDksIDEzLCAxNSwgMTQsIDgsIDEzLCA2LCA1LCAxMiwgNywgNSwKICAxMSwgMTIsIDE0LCAxNSwgMTQsIDE1LCA5LCA4LCA5LCAxNCwgNSwgNiwgOCwgNiwgNSwgMTIsCiAgOSwgMTUsIDUsIDExLCA2LCA4LCAxMywgMTIsIDUsIDEyLCAxMywgMTQsIDExLCA4LCA1LCA2Cl0KCnZhciBzciA9IFsKICA4LCA5LCA5LCAxMSwgMTMsIDE1LCAxNSwgNSwgNywgNywgOCwgMTEsIDE0LCAxNCwgMTIsIDYsCiAgOSwgMTMsIDE1LCA3LCAxMiwgOCwgOSwgMTEsIDcsIDcsIDEyLCA3LCA2LCAxNSwgMTMsIDExLAogIDksIDcsIDE1LCAxMSwgOCwgNiwgNiwgMTQsIDEyLCAxMywgNSwgMTQsIDEzLCAxMywgNywgNSwKICAxNSwgNSwgOCwgMTEsIDE0LCAxNCwgNiwgMTQsIDYsIDksIDEyLCA5LCAxMiwgNSwgMTUsIDgsCiAgOCwgNSwgMTIsIDksIDEyLCA1LCAxNCwgNiwgOCwgMTMsIDYsIDUsIDE1LCAxMywgMTEsIDExCl0KCnZhciBobCA9IFsweDAwMDAwMDAwLCAweDVBODI3OTk5LCAweDZFRDlFQkExLCAweDhGMUJCQ0RDLCAweEE5NTNGRDRFXQp2YXIgaHIgPSBbMHg1MEEyOEJFNiwgMHg1QzRERDEyNCwgMHg2RDcwM0VGMywgMHg3QTZENzZFOSwgMHgwMDAwMDAwMF0KCmZ1bmN0aW9uIGJ5dGVzVG9Xb3JkcyAoYnl0ZXMpIHsKICB2YXIgd29yZHMgPSBbXQogIGZvciAodmFyIGkgPSAwLCBiID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrLCBiICs9IDgpIHsKICAgIHdvcmRzW2IgPj4+IDVdIHw9IGJ5dGVzW2ldIDw8ICgyNCAtIGIgJSAzMikKICB9CiAgcmV0dXJuIHdvcmRzCn0KCmZ1bmN0aW9uIHdvcmRzVG9CeXRlcyAod29yZHMpIHsKICB2YXIgYnl0ZXMgPSBbXQogIGZvciAodmFyIGIgPSAwOyBiIDwgd29yZHMubGVuZ3RoICogMzI7IGIgKz0gOCkgewogICAgYnl0ZXMucHVzaCgod29yZHNbYiA+Pj4gNV0gPj4+ICgyNCAtIGIgJSAzMikpICYgMHhGRikKICB9CiAgcmV0dXJuIGJ5dGVzCn0KCmZ1bmN0aW9uIHByb2Nlc3NCbG9jayAoSCwgTSwgb2Zmc2V0KSB7CiAgLy8gc3dhcCBlbmRpYW4KICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHsKICAgIHZhciBvZmZzZXRfaSA9IG9mZnNldCArIGkKICAgIHZhciBNX29mZnNldF9pID0gTVtvZmZzZXRfaV0KCiAgICAvLyBTd2FwCiAgICBNW29mZnNldF9pXSA9ICgKICAgICAgKCgoTV9vZmZzZXRfaSA8PCA4KSB8IChNX29mZnNldF9pID4+PiAyNCkpICYgMHgwMGZmMDBmZikgfAogICAgICAoKChNX29mZnNldF9pIDw8IDI0KSB8IChNX29mZnNldF9pID4+PiA4KSkgJiAweGZmMDBmZjAwKQogICAgKQogIH0KCiAgLy8gV29ya2luZyB2YXJpYWJsZXMKICB2YXIgYWwsIGJsLCBjbCwgZGwsIGVsCiAgdmFyIGFyLCBiciwgY3IsIGRyLCBlcgoKICBhciA9IGFsID0gSFswXQogIGJyID0gYmwgPSBIWzFdCiAgY3IgPSBjbCA9IEhbMl0KICBkciA9IGRsID0gSFszXQogIGVyID0gZWwgPSBIWzRdCgogIC8vIGNvbXB1dGF0aW9uCiAgdmFyIHQKICBmb3IgKGkgPSAwOyBpIDwgODA7IGkgKz0gMSkgewogICAgdCA9IChhbCArIE1bb2Zmc2V0ICsgemxbaV1dKSB8IDAKICAgIGlmIChpIDwgMTYpIHsKICAgICAgdCArPSBmMShibCwgY2wsIGRsKSArIGhsWzBdCiAgICB9IGVsc2UgaWYgKGkgPCAzMikgewogICAgICB0ICs9IGYyKGJsLCBjbCwgZGwpICsgaGxbMV0KICAgIH0gZWxzZSBpZiAoaSA8IDQ4KSB7CiAgICAgIHQgKz0gZjMoYmwsIGNsLCBkbCkgKyBobFsyXQogICAgfSBlbHNlIGlmIChpIDwgNjQpIHsKICAgICAgdCArPSBmNChibCwgY2wsIGRsKSArIGhsWzNdCiAgICB9IGVsc2Ugey8vIGlmIChpPDgwKSB7CiAgICAgIHQgKz0gZjUoYmwsIGNsLCBkbCkgKyBobFs0XQogICAgfQogICAgdCA9IHQgfCAwCiAgICB0ID0gcm90bCh0LCBzbFtpXSkKICAgIHQgPSAodCArIGVsKSB8IDAKICAgIGFsID0gZWwKICAgIGVsID0gZGwKICAgIGRsID0gcm90bChjbCwgMTApCiAgICBjbCA9IGJsCiAgICBibCA9IHQKCiAgICB0ID0gKGFyICsgTVtvZmZzZXQgKyB6cltpXV0pIHwgMAogICAgaWYgKGkgPCAxNikgewogICAgICB0ICs9IGY1KGJyLCBjciwgZHIpICsgaHJbMF0KICAgIH0gZWxzZSBpZiAoaSA8IDMyKSB7CiAgICAgIHQgKz0gZjQoYnIsIGNyLCBkcikgKyBoclsxXQogICAgfSBlbHNlIGlmIChpIDwgNDgpIHsKICAgICAgdCArPSBmMyhiciwgY3IsIGRyKSArIGhyWzJdCiAgICB9IGVsc2UgaWYgKGkgPCA2NCkgewogICAgICB0ICs9IGYyKGJyLCBjciwgZHIpICsgaHJbM10KICAgIH0gZWxzZSB7Ly8gaWYgKGk8ODApIHsKICAgICAgdCArPSBmMShiciwgY3IsIGRyKSArIGhyWzRdCiAgICB9CgogICAgdCA9IHQgfCAwCiAgICB0ID0gcm90bCh0LCBzcltpXSkKICAgIHQgPSAodCArIGVyKSB8IDAKICAgIGFyID0gZXIKICAgIGVyID0gZHIKICAgIGRyID0gcm90bChjciwgMTApCiAgICBjciA9IGJyCiAgICBiciA9IHQKICB9CgogIC8vIGludGVybWVkaWF0ZSBoYXNoIHZhbHVlCiAgdCA9IChIWzFdICsgY2wgKyBkcikgfCAwCiAgSFsxXSA9IChIWzJdICsgZGwgKyBlcikgfCAwCiAgSFsyXSA9IChIWzNdICsgZWwgKyBhcikgfCAwCiAgSFszXSA9IChIWzRdICsgYWwgKyBicikgfCAwCiAgSFs0XSA9IChIWzBdICsgYmwgKyBjcikgfCAwCiAgSFswXSA9IHQKfQoKZnVuY3Rpb24gZjEgKHgsIHksIHopIHsKICByZXR1cm4gKCh4KSBeICh5KSBeICh6KSkKfQoKZnVuY3Rpb24gZjIgKHgsIHksIHopIHsKICByZXR1cm4gKCgoeCkgJiAoeSkpIHwgKCh+eCkgJiAoeikpKQp9CgpmdW5jdGlvbiBmMyAoeCwgeSwgeikgewogIHJldHVybiAoKCh4KSB8ICh+KHkpKSkgXiAoeikpCn0KCmZ1bmN0aW9uIGY0ICh4LCB5LCB6KSB7CiAgcmV0dXJuICgoKHgpICYgKHopKSB8ICgoeSkgJiAofih6KSkpKQp9CgpmdW5jdGlvbiBmNSAoeCwgeSwgeikgewogIHJldHVybiAoKHgpIF4gKCh5KSB8ICh+KHopKSkpCn0KCmZ1bmN0aW9uIHJvdGwgKHgsIG4pIHsKICByZXR1cm4gKHggPDwgbikgfCAoeCA+Pj4gKDMyIC0gbikpCn0KCmZ1bmN0aW9uIHJpcGVtZDE2MCAobWVzc2FnZSkgewogIHZhciBIID0gWzB4Njc0NTIzMDEsIDB4RUZDREFCODksIDB4OThCQURDRkUsIDB4MTAzMjU0NzYsIDB4QzNEMkUxRjBdCgogIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZycpIHsKICAgIG1lc3NhZ2UgPSBuZXcgQnVmZmVyKG1lc3NhZ2UsICd1dGY4JykKICB9CgogIHZhciBtID0gYnl0ZXNUb1dvcmRzKG1lc3NhZ2UpCgogIHZhciBuQml0c0xlZnQgPSBtZXNzYWdlLmxlbmd0aCAqIDgKICB2YXIgbkJpdHNUb3RhbCA9IG1lc3NhZ2UubGVuZ3RoICogOAoKICAvLyBBZGQgcGFkZGluZwogIG1bbkJpdHNMZWZ0ID4+PiA1XSB8PSAweDgwIDw8ICgyNCAtIG5CaXRzTGVmdCAlIDMyKQogIG1bKCgobkJpdHNMZWZ0ICsgNjQpID4+PiA5KSA8PCA0KSArIDE0XSA9ICgKICAgICgoKG5CaXRzVG90YWwgPDwgOCkgfCAobkJpdHNUb3RhbCA+Pj4gMjQpKSAmIDB4MDBmZjAwZmYpIHwKICAgICgoKG5CaXRzVG90YWwgPDwgMjQpIHwgKG5CaXRzVG90YWwgPj4+IDgpKSAmIDB4ZmYwMGZmMDApCiAgKQoKICBmb3IgKHZhciBpID0gMDsgaSA8IG0ubGVuZ3RoOyBpICs9IDE2KSB7CiAgICBwcm9jZXNzQmxvY2soSCwgbSwgaSkKICB9CgogIC8vIHN3YXAgZW5kaWFuCiAgZm9yIChpID0gMDsgaSA8IDU7IGkrKykgewogICAgLy8gc2hvcnRjdXQKICAgIHZhciBIX2kgPSBIW2ldCgogICAgLy8gU3dhcAogICAgSFtpXSA9ICgoKEhfaSA8PCA4KSB8IChIX2kgPj4+IDI0KSkgJiAweDAwZmYwMGZmKSB8CiAgICAgICgoKEhfaSA8PCAyNCkgfCAoSF9pID4+PiA4KSkgJiAweGZmMDBmZjAwKQogIH0KCiAgdmFyIGRpZ2VzdGJ5dGVzID0gd29yZHNUb0J5dGVzKEgpCiAgcmV0dXJuIG5ldyBCdWZmZXIoZGlnZXN0Ynl0ZXMpCn0KCm1vZHVsZS5leHBvcnRzID0gcmlwZW1kMTYwCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDR9XSw0MzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8vIHByb3RvdHlwZSBjbGFzcyBmb3IgaGFzaCBmdW5jdGlvbnMKZnVuY3Rpb24gSGFzaCAoYmxvY2tTaXplLCBmaW5hbFNpemUpIHsKICB0aGlzLl9ibG9jayA9IG5ldyBCdWZmZXIoYmxvY2tTaXplKQogIHRoaXMuX2ZpbmFsU2l6ZSA9IGZpbmFsU2l6ZQogIHRoaXMuX2Jsb2NrU2l6ZSA9IGJsb2NrU2l6ZQogIHRoaXMuX2xlbiA9IDAKICB0aGlzLl9zID0gMAp9CgpIYXNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSwgZW5jKSB7CiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykgewogICAgZW5jID0gZW5jIHx8ICd1dGY4JwogICAgZGF0YSA9IG5ldyBCdWZmZXIoZGF0YSwgZW5jKQogIH0KCiAgdmFyIGwgPSB0aGlzLl9sZW4gKz0gZGF0YS5sZW5ndGgKICB2YXIgcyA9IHRoaXMuX3MgfHwgMAogIHZhciBmID0gMAogIHZhciBidWZmZXIgPSB0aGlzLl9ibG9jawoKICB3aGlsZSAocyA8IGwpIHsKICAgIHZhciB0ID0gTWF0aC5taW4oZGF0YS5sZW5ndGgsIGYgKyB0aGlzLl9ibG9ja1NpemUgLSAocyAlIHRoaXMuX2Jsb2NrU2l6ZSkpCiAgICB2YXIgY2ggPSAodCAtIGYpCgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaDsgaSsrKSB7CiAgICAgIGJ1ZmZlclsocyAlIHRoaXMuX2Jsb2NrU2l6ZSkgKyBpXSA9IGRhdGFbaSArIGZdCiAgICB9CgogICAgcyArPSBjaAogICAgZiArPSBjaAoKICAgIGlmICgocyAlIHRoaXMuX2Jsb2NrU2l6ZSkgPT09IDApIHsKICAgICAgdGhpcy5fdXBkYXRlKGJ1ZmZlcikKICAgIH0KICB9CiAgdGhpcy5fcyA9IHMKCiAgcmV0dXJuIHRoaXMKfQoKSGFzaC5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKGVuYykgewogIC8vIFN1cHBvc2UgdGhlIGxlbmd0aCBvZiB0aGUgbWVzc2FnZSBNLCBpbiBiaXRzLCBpcyBsCiAgdmFyIGwgPSB0aGlzLl9sZW4gKiA4CgogIC8vIEFwcGVuZCB0aGUgYml0IDEgdG8gdGhlIGVuZCBvZiB0aGUgbWVzc2FnZQogIHRoaXMuX2Jsb2NrW3RoaXMuX2xlbiAlIHRoaXMuX2Jsb2NrU2l6ZV0gPSAweDgwCgogIC8vIGFuZCB0aGVuIGsgemVybyBiaXRzLCB3aGVyZSBrIGlzIHRoZSBzbWFsbGVzdCBub24tbmVnYXRpdmUgc29sdXRpb24gdG8gdGhlIGVxdWF0aW9uIChsICsgMSArIGspID09PSBmaW5hbFNpemUgbW9kIGJsb2NrU2l6ZQogIHRoaXMuX2Jsb2NrLmZpbGwoMCwgdGhpcy5fbGVuICUgdGhpcy5fYmxvY2tTaXplICsgMSkKCiAgaWYgKGwgJSAodGhpcy5fYmxvY2tTaXplICogOCkgPj0gdGhpcy5fZmluYWxTaXplICogOCkgewogICAgdGhpcy5fdXBkYXRlKHRoaXMuX2Jsb2NrKQogICAgdGhpcy5fYmxvY2suZmlsbCgwKQogIH0KCiAgLy8gdG8gdGhpcyBhcHBlbmQgdGhlIGJsb2NrIHdoaWNoIGlzIGVxdWFsIHRvIHRoZSBudW1iZXIgbCB3cml0dGVuIGluIGJpbmFyeQogIC8vIFRPRE86IGhhbmRsZSBjYXNlIHdoZXJlIGwgaXMgPiBNYXRoLnBvdygyLCAyOSkKICB0aGlzLl9ibG9jay53cml0ZUludDMyQkUobCwgdGhpcy5fYmxvY2tTaXplIC0gNCkKCiAgdmFyIGhhc2ggPSB0aGlzLl91cGRhdGUodGhpcy5fYmxvY2spIHx8IHRoaXMuX2hhc2goKQoKICByZXR1cm4gZW5jID8gaGFzaC50b1N0cmluZyhlbmMpIDogaGFzaAp9CgpIYXNoLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKCkgewogIHRocm93IG5ldyBFcnJvcignX3VwZGF0ZSBtdXN0IGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzJykKfQoKbW9kdWxlLmV4cG9ydHMgPSBIYXNoCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDR9XSw0MzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gU0hBIChhbGdvcml0aG0pIHsKICBhbGdvcml0aG0gPSBhbGdvcml0aG0udG9Mb3dlckNhc2UoKQoKICB2YXIgQWxnb3JpdGhtID0gZXhwb3J0c1thbGdvcml0aG1dCiAgaWYgKCFBbGdvcml0aG0pIHRocm93IG5ldyBFcnJvcihhbGdvcml0aG0gKyAnIGlzIG5vdCBzdXBwb3J0ZWQgKHdlIGFjY2VwdCBwdWxsIHJlcXVlc3RzKScpCgogIHJldHVybiBuZXcgQWxnb3JpdGhtKCkKfQoKZXhwb3J0cy5zaGEgPSByZXF1aXJlKCcuL3NoYScpCmV4cG9ydHMuc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpCmV4cG9ydHMuc2hhMjI0ID0gcmVxdWlyZSgnLi9zaGEyMjQnKQpleHBvcnRzLnNoYTI1NiA9IHJlcXVpcmUoJy4vc2hhMjU2JykKZXhwb3J0cy5zaGEzODQgPSByZXF1aXJlKCcuL3NoYTM4NCcpCmV4cG9ydHMuc2hhNTEyID0gcmVxdWlyZSgnLi9zaGE1MTInKQoKfSx7Ii4vc2hhIjo0MzcsIi4vc2hhMSI6NDM4LCIuL3NoYTIyNCI6NDM5LCIuL3NoYTI1NiI6NDQwLCIuL3NoYTM4NCI6NDQxLCIuL3NoYTUxMiI6NDQyfV0sNDM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKgogKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTAsIGFzIGRlZmluZWQKICogaW4gRklQUyBQVUIgMTgwLTEKICogVGhpcyBzb3VyY2UgY29kZSBpcyBkZXJpdmVkIGZyb20gc2hhMS5qcyBvZiB0aGUgc2FtZSByZXBvc2l0b3J5LgogKiBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIFNIQS0wIGFuZCBTSEEtMSBpcyBqdXN0IGEgYml0d2lzZSByb3RhdGUgbGVmdAogKiBvcGVyYXRpb24gd2FzIGFkZGVkLgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg1YTgyNzk5OSwgMHg2ZWQ5ZWJhMSwgMHg4ZjFiYmNkYyB8IDAsIDB4Y2E2MmMxZDYgfCAwCl0KCnZhciBXID0gbmV3IEFycmF5KDgwKQoKZnVuY3Rpb24gU2hhICgpIHsKICB0aGlzLmluaXQoKQogIHRoaXMuX3cgPSBXCgogIEhhc2guY2FsbCh0aGlzLCA2NCwgNTYpCn0KCmluaGVyaXRzKFNoYSwgSGFzaCkKClNoYS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9hID0gMHg2NzQ1MjMwMQogIHRoaXMuX2IgPSAweGVmY2RhYjg5CiAgdGhpcy5fYyA9IDB4OThiYWRjZmUKICB0aGlzLl9kID0gMHgxMDMyNTQ3NgogIHRoaXMuX2UgPSAweGMzZDJlMWYwCgogIHJldHVybiB0aGlzCn0KCmZ1bmN0aW9uIHJvdGw1IChudW0pIHsKICByZXR1cm4gKG51bSA8PCA1KSB8IChudW0gPj4+IDI3KQp9CgpmdW5jdGlvbiByb3RsMzAgKG51bSkgewogIHJldHVybiAobnVtIDw8IDMwKSB8IChudW0gPj4+IDIpCn0KCmZ1bmN0aW9uIGZ0IChzLCBiLCBjLCBkKSB7CiAgaWYgKHMgPT09IDApIHJldHVybiAoYiAmIGMpIHwgKCh+YikgJiBkKQogIGlmIChzID09PSAyKSByZXR1cm4gKGIgJiBjKSB8IChiICYgZCkgfCAoYyAmIGQpCiAgcmV0dXJuIGIgXiBjIF4gZAp9CgpTaGEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYSA9IHRoaXMuX2EgfCAwCiAgdmFyIGIgPSB0aGlzLl9iIHwgMAogIHZhciBjID0gdGhpcy5fYyB8IDAKICB2YXIgZCA9IHRoaXMuX2QgfCAwCiAgdmFyIGUgPSB0aGlzLl9lIHwgMAoKICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIFdbaV0gPSBNLnJlYWRJbnQzMkJFKGkgKiA0KQogIGZvciAoOyBpIDwgODA7ICsraSkgV1tpXSA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl0KCiAgZm9yICh2YXIgaiA9IDA7IGogPCA4MDsgKytqKSB7CiAgICB2YXIgcyA9IH5+KGogLyAyMCkKICAgIHZhciB0ID0gKHJvdGw1KGEpICsgZnQocywgYiwgYywgZCkgKyBlICsgV1tqXSArIEtbc10pIHwgMAoKICAgIGUgPSBkCiAgICBkID0gYwogICAgYyA9IHJvdGwzMChiKQogICAgYiA9IGEKICAgIGEgPSB0CiAgfQoKICB0aGlzLl9hID0gKGEgKyB0aGlzLl9hKSB8IDAKICB0aGlzLl9iID0gKGIgKyB0aGlzLl9iKSB8IDAKICB0aGlzLl9jID0gKGMgKyB0aGlzLl9jKSB8IDAKICB0aGlzLl9kID0gKGQgKyB0aGlzLl9kKSB8IDAKICB0aGlzLl9lID0gKGUgKyB0aGlzLl9lKSB8IDAKfQoKU2hhLnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoMjApCgogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2EgfCAwLCAwKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2IgfCAwLCA0KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2MgfCAwLCA4KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2QgfCAwLCAxMikKICBILndyaXRlSW50MzJCRSh0aGlzLl9lIHwgMCwgMTYpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjo0MzUsImJ1ZmZlciI6NTA0LCJpbmhlcml0cyI6NDMzfV0sNDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKgogKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTEsIGFzIGRlZmluZWQKICogaW4gRklQUyBQVUIgMTgwLTEKICogVmVyc2lvbiAyLjFhIENvcHlyaWdodCBQYXVsIEpvaG5zdG9uIDIwMDAgLSAyMDAyLgogKiBPdGhlciBjb250cmlidXRvcnM6IEdyZWcgSG9sdCwgQW5kcmV3IEtlcGVydCwgWWRuYXIsIExvc3RpbmV0CiAqIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBCU0QgTGljZW5zZQogKiBTZWUgaHR0cDovL3BhamhvbWUub3JnLnVrL2NyeXB0L21kNSBmb3IgZGV0YWlscy4KICovCgp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBIYXNoID0gcmVxdWlyZSgnLi9oYXNoJykKCnZhciBLID0gWwogIDB4NWE4Mjc5OTksIDB4NmVkOWViYTEsIDB4OGYxYmJjZGMgfCAwLCAweGNhNjJjMWQ2IHwgMApdCgp2YXIgVyA9IG5ldyBBcnJheSg4MCkKCmZ1bmN0aW9uIFNoYTEgKCkgewogIHRoaXMuaW5pdCgpCiAgdGhpcy5fdyA9IFcKCiAgSGFzaC5jYWxsKHRoaXMsIDY0LCA1NikKfQoKaW5oZXJpdHMoU2hhMSwgSGFzaCkKClNoYTEucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYSA9IDB4Njc0NTIzMDEKICB0aGlzLl9iID0gMHhlZmNkYWI4OQogIHRoaXMuX2MgPSAweDk4YmFkY2ZlCiAgdGhpcy5fZCA9IDB4MTAzMjU0NzYKICB0aGlzLl9lID0gMHhjM2QyZTFmMAoKICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiByb3RsMSAobnVtKSB7CiAgcmV0dXJuIChudW0gPDwgMSkgfCAobnVtID4+PiAzMSkKfQoKZnVuY3Rpb24gcm90bDUgKG51bSkgewogIHJldHVybiAobnVtIDw8IDUpIHwgKG51bSA+Pj4gMjcpCn0KCmZ1bmN0aW9uIHJvdGwzMCAobnVtKSB7CiAgcmV0dXJuIChudW0gPDwgMzApIHwgKG51bSA+Pj4gMikKfQoKZnVuY3Rpb24gZnQgKHMsIGIsIGMsIGQpIHsKICBpZiAocyA9PT0gMCkgcmV0dXJuIChiICYgYykgfCAoKH5iKSAmIGQpCiAgaWYgKHMgPT09IDIpIHJldHVybiAoYiAmIGMpIHwgKGIgJiBkKSB8IChjICYgZCkKICByZXR1cm4gYiBeIGMgXiBkCn0KClNoYTEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYSA9IHRoaXMuX2EgfCAwCiAgdmFyIGIgPSB0aGlzLl9iIHwgMAogIHZhciBjID0gdGhpcy5fYyB8IDAKICB2YXIgZCA9IHRoaXMuX2QgfCAwCiAgdmFyIGUgPSB0aGlzLl9lIHwgMAoKICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIFdbaV0gPSBNLnJlYWRJbnQzMkJFKGkgKiA0KQogIGZvciAoOyBpIDwgODA7ICsraSkgV1tpXSA9IHJvdGwxKFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl0pCgogIGZvciAodmFyIGogPSAwOyBqIDwgODA7ICsraikgewogICAgdmFyIHMgPSB+fihqIC8gMjApCiAgICB2YXIgdCA9IChyb3RsNShhKSArIGZ0KHMsIGIsIGMsIGQpICsgZSArIFdbal0gKyBLW3NdKSB8IDAKCiAgICBlID0gZAogICAgZCA9IGMKICAgIGMgPSByb3RsMzAoYikKICAgIGIgPSBhCiAgICBhID0gdAogIH0KCiAgdGhpcy5fYSA9IChhICsgdGhpcy5fYSkgfCAwCiAgdGhpcy5fYiA9IChiICsgdGhpcy5fYikgfCAwCiAgdGhpcy5fYyA9IChjICsgdGhpcy5fYykgfCAwCiAgdGhpcy5fZCA9IChkICsgdGhpcy5fZCkgfCAwCiAgdGhpcy5fZSA9IChlICsgdGhpcy5fZSkgfCAwCn0KClNoYTEucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcigyMCkKCiAgSC53cml0ZUludDMyQkUodGhpcy5fYSB8IDAsIDApCiAgSC53cml0ZUludDMyQkUodGhpcy5fYiB8IDAsIDQpCiAgSC53cml0ZUludDMyQkUodGhpcy5fYyB8IDAsIDgpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZCB8IDAsIDEyKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2UgfCAwLCAxNikKCiAgcmV0dXJuIEgKfQoKbW9kdWxlLmV4cG9ydHMgPSBTaGExCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjo0MzUsImJ1ZmZlciI6NTA0LCJpbmhlcml0cyI6NDMzfV0sNDM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKioKICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBTZWN1cmUgSGFzaCBBbGdvcml0aG0sIFNIQS0yNTYsIGFzIGRlZmluZWQKICogaW4gRklQUyAxODAtMgogKiBWZXJzaW9uIDIuMi1iZXRhIENvcHlyaWdodCBBbmdlbCBNYXJpbiwgUGF1bCBKb2huc3RvbiAyMDAwIC0gMjAwOS4KICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldAogKgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIFNoYTI1NiA9IHJlcXVpcmUoJy4vc2hhMjU2JykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIFcgPSBuZXcgQXJyYXkoNjQpCgpmdW5jdGlvbiBTaGEyMjQgKCkgewogIHRoaXMuaW5pdCgpCgogIHRoaXMuX3cgPSBXIC8vIG5ldyBBcnJheSg2NCkKCiAgSGFzaC5jYWxsKHRoaXMsIDY0LCA1NikKfQoKaW5oZXJpdHMoU2hhMjI0LCBTaGEyNTYpCgpTaGEyMjQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYSA9IDB4YzEwNTllZDgKICB0aGlzLl9iID0gMHgzNjdjZDUwNwogIHRoaXMuX2MgPSAweDMwNzBkZDE3CiAgdGhpcy5fZCA9IDB4ZjcwZTU5MzkKICB0aGlzLl9lID0gMHhmZmMwMGIzMQogIHRoaXMuX2YgPSAweDY4NTgxNTExCiAgdGhpcy5fZyA9IDB4NjRmOThmYTcKICB0aGlzLl9oID0gMHhiZWZhNGZhNAoKICByZXR1cm4gdGhpcwp9CgpTaGEyMjQucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcigyOCkKCiAgSC53cml0ZUludDMyQkUodGhpcy5fYSwgMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9iLCA0KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2MsIDgpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZCwgMTIpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZSwgMTYpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZiwgMjApCiAgSC53cml0ZUludDMyQkUodGhpcy5fZywgMjQpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhMjI0Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjo0MzUsIi4vc2hhMjU2Ijo0NDAsImJ1ZmZlciI6NTA0LCJpbmhlcml0cyI6NDMzfV0sNDQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKioKICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBTZWN1cmUgSGFzaCBBbGdvcml0aG0sIFNIQS0yNTYsIGFzIGRlZmluZWQKICogaW4gRklQUyAxODAtMgogKiBWZXJzaW9uIDIuMi1iZXRhIENvcHlyaWdodCBBbmdlbCBNYXJpbiwgUGF1bCBKb2huc3RvbiAyMDAwIC0gMjAwOS4KICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldAogKgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIEsgPSBbCiAgMHg0MjhBMkY5OCwgMHg3MTM3NDQ5MSwgMHhCNUMwRkJDRiwgMHhFOUI1REJBNSwKICAweDM5NTZDMjVCLCAweDU5RjExMUYxLCAweDkyM0Y4MkE0LCAweEFCMUM1RUQ1LAogIDB4RDgwN0FBOTgsIDB4MTI4MzVCMDEsIDB4MjQzMTg1QkUsIDB4NTUwQzdEQzMsCiAgMHg3MkJFNUQ3NCwgMHg4MERFQjFGRSwgMHg5QkRDMDZBNywgMHhDMTlCRjE3NCwKICAweEU0OUI2OUMxLCAweEVGQkU0Nzg2LCAweDBGQzE5REM2LCAweDI0MENBMUNDLAogIDB4MkRFOTJDNkYsIDB4NEE3NDg0QUEsIDB4NUNCMEE5REMsIDB4NzZGOTg4REEsCiAgMHg5ODNFNTE1MiwgMHhBODMxQzY2RCwgMHhCMDAzMjdDOCwgMHhCRjU5N0ZDNywKICAweEM2RTAwQkYzLCAweEQ1QTc5MTQ3LCAweDA2Q0E2MzUxLCAweDE0MjkyOTY3LAogIDB4MjdCNzBBODUsIDB4MkUxQjIxMzgsIDB4NEQyQzZERkMsIDB4NTMzODBEMTMsCiAgMHg2NTBBNzM1NCwgMHg3NjZBMEFCQiwgMHg4MUMyQzkyRSwgMHg5MjcyMkM4NSwKICAweEEyQkZFOEExLCAweEE4MUE2NjRCLCAweEMyNEI4QjcwLCAweEM3NkM1MUEzLAogIDB4RDE5MkU4MTksIDB4RDY5OTA2MjQsIDB4RjQwRTM1ODUsIDB4MTA2QUEwNzAsCiAgMHgxOUE0QzExNiwgMHgxRTM3NkMwOCwgMHgyNzQ4Nzc0QywgMHgzNEIwQkNCNSwKICAweDM5MUMwQ0IzLCAweDRFRDhBQTRBLCAweDVCOUNDQTRGLCAweDY4MkU2RkYzLAogIDB4NzQ4RjgyRUUsIDB4NzhBNTYzNkYsIDB4ODRDODc4MTQsIDB4OENDNzAyMDgsCiAgMHg5MEJFRkZGQSwgMHhBNDUwNkNFQiwgMHhCRUY5QTNGNywgMHhDNjcxNzhGMgpdCgp2YXIgVyA9IG5ldyBBcnJheSg2NCkKCmZ1bmN0aW9uIFNoYTI1NiAoKSB7CiAgdGhpcy5pbml0KCkKCiAgdGhpcy5fdyA9IFcgLy8gbmV3IEFycmF5KDY0KQoKICBIYXNoLmNhbGwodGhpcywgNjQsIDU2KQp9Cgppbmhlcml0cyhTaGEyNTYsIEhhc2gpCgpTaGEyNTYucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5fYSA9IDB4NmEwOWU2NjcKICB0aGlzLl9iID0gMHhiYjY3YWU4NQogIHRoaXMuX2MgPSAweDNjNmVmMzcyCiAgdGhpcy5fZCA9IDB4YTU0ZmY1M2EKICB0aGlzLl9lID0gMHg1MTBlNTI3ZgogIHRoaXMuX2YgPSAweDliMDU2ODhjCiAgdGhpcy5fZyA9IDB4MWY4M2Q5YWIKICB0aGlzLl9oID0gMHg1YmUwY2QxOQoKICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiBjaCAoeCwgeSwgeikgewogIHJldHVybiB6IF4gKHggJiAoeSBeIHopKQp9CgpmdW5jdGlvbiBtYWogKHgsIHksIHopIHsKICByZXR1cm4gKHggJiB5KSB8ICh6ICYgKHggfCB5KSkKfQoKZnVuY3Rpb24gc2lnbWEwICh4KSB7CiAgcmV0dXJuICh4ID4+PiAyIHwgeCA8PCAzMCkgXiAoeCA+Pj4gMTMgfCB4IDw8IDE5KSBeICh4ID4+PiAyMiB8IHggPDwgMTApCn0KCmZ1bmN0aW9uIHNpZ21hMSAoeCkgewogIHJldHVybiAoeCA+Pj4gNiB8IHggPDwgMjYpIF4gKHggPj4+IDExIHwgeCA8PCAyMSkgXiAoeCA+Pj4gMjUgfCB4IDw8IDcpCn0KCmZ1bmN0aW9uIGdhbW1hMCAoeCkgewogIHJldHVybiAoeCA+Pj4gNyB8IHggPDwgMjUpIF4gKHggPj4+IDE4IHwgeCA8PCAxNCkgXiAoeCA+Pj4gMykKfQoKZnVuY3Rpb24gZ2FtbWExICh4KSB7CiAgcmV0dXJuICh4ID4+PiAxNyB8IHggPDwgMTUpIF4gKHggPj4+IDE5IHwgeCA8PCAxMykgXiAoeCA+Pj4gMTApCn0KClNoYTI1Ni5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChNKSB7CiAgdmFyIFcgPSB0aGlzLl93CgogIHZhciBhID0gdGhpcy5fYSB8IDAKICB2YXIgYiA9IHRoaXMuX2IgfCAwCiAgdmFyIGMgPSB0aGlzLl9jIHwgMAogIHZhciBkID0gdGhpcy5fZCB8IDAKICB2YXIgZSA9IHRoaXMuX2UgfCAwCiAgdmFyIGYgPSB0aGlzLl9mIHwgMAogIHZhciBnID0gdGhpcy5fZyB8IDAKICB2YXIgaCA9IHRoaXMuX2ggfCAwCgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkgV1tpXSA9IE0ucmVhZEludDMyQkUoaSAqIDQpCiAgZm9yICg7IGkgPCA2NDsgKytpKSBXW2ldID0gKGdhbW1hMShXW2kgLSAyXSkgKyBXW2kgLSA3XSArIGdhbW1hMChXW2kgLSAxNV0pICsgV1tpIC0gMTZdKSB8IDAKCiAgZm9yICh2YXIgaiA9IDA7IGogPCA2NDsgKytqKSB7CiAgICB2YXIgVDEgPSAoaCArIHNpZ21hMShlKSArIGNoKGUsIGYsIGcpICsgS1tqXSArIFdbal0pIHwgMAogICAgdmFyIFQyID0gKHNpZ21hMChhKSArIG1haihhLCBiLCBjKSkgfCAwCgogICAgaCA9IGcKICAgIGcgPSBmCiAgICBmID0gZQogICAgZSA9IChkICsgVDEpIHwgMAogICAgZCA9IGMKICAgIGMgPSBiCiAgICBiID0gYQogICAgYSA9IChUMSArIFQyKSB8IDAKICB9CgogIHRoaXMuX2EgPSAoYSArIHRoaXMuX2EpIHwgMAogIHRoaXMuX2IgPSAoYiArIHRoaXMuX2IpIHwgMAogIHRoaXMuX2MgPSAoYyArIHRoaXMuX2MpIHwgMAogIHRoaXMuX2QgPSAoZCArIHRoaXMuX2QpIHwgMAogIHRoaXMuX2UgPSAoZSArIHRoaXMuX2UpIHwgMAogIHRoaXMuX2YgPSAoZiArIHRoaXMuX2YpIHwgMAogIHRoaXMuX2cgPSAoZyArIHRoaXMuX2cpIHwgMAogIHRoaXMuX2ggPSAoaCArIHRoaXMuX2gpIHwgMAp9CgpTaGEyNTYucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcigzMikKCiAgSC53cml0ZUludDMyQkUodGhpcy5fYSwgMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9iLCA0KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2MsIDgpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZCwgMTIpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZSwgMTYpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZiwgMjApCiAgSC53cml0ZUludDMyQkUodGhpcy5fZywgMjQpCiAgSC53cml0ZUludDMyQkUodGhpcy5faCwgMjgpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhMjU2Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjo0MzUsImJ1ZmZlciI6NTA0LCJpbmhlcml0cyI6NDMzfV0sNDQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBTSEE1MTIgPSByZXF1aXJlKCcuL3NoYTUxMicpCnZhciBIYXNoID0gcmVxdWlyZSgnLi9oYXNoJykKCnZhciBXID0gbmV3IEFycmF5KDE2MCkKCmZ1bmN0aW9uIFNoYTM4NCAoKSB7CiAgdGhpcy5pbml0KCkKICB0aGlzLl93ID0gVwoKICBIYXNoLmNhbGwodGhpcywgMTI4LCAxMTIpCn0KCmluaGVyaXRzKFNoYTM4NCwgU0hBNTEyKQoKU2hhMzg0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2FoID0gMHhjYmJiOWQ1ZAogIHRoaXMuX2JoID0gMHg2MjlhMjkyYQogIHRoaXMuX2NoID0gMHg5MTU5MDE1YQogIHRoaXMuX2RoID0gMHgxNTJmZWNkOAogIHRoaXMuX2VoID0gMHg2NzMzMjY2NwogIHRoaXMuX2ZoID0gMHg4ZWI0NGE4NwogIHRoaXMuX2doID0gMHhkYjBjMmUwZAogIHRoaXMuX2hoID0gMHg0N2I1NDgxZAoKICB0aGlzLl9hbCA9IDB4YzEwNTllZDgKICB0aGlzLl9ibCA9IDB4MzY3Y2Q1MDcKICB0aGlzLl9jbCA9IDB4MzA3MGRkMTcKICB0aGlzLl9kbCA9IDB4ZjcwZTU5MzkKICB0aGlzLl9lbCA9IDB4ZmZjMDBiMzEKICB0aGlzLl9mbCA9IDB4Njg1ODE1MTEKICB0aGlzLl9nbCA9IDB4NjRmOThmYTcKICB0aGlzLl9obCA9IDB4YmVmYTRmYTQKCiAgcmV0dXJuIHRoaXMKfQoKU2hhMzg0LnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoNDgpCgogIGZ1bmN0aW9uIHdyaXRlSW50NjRCRSAoaCwgbCwgb2Zmc2V0KSB7CiAgICBILndyaXRlSW50MzJCRShoLCBvZmZzZXQpCiAgICBILndyaXRlSW50MzJCRShsLCBvZmZzZXQgKyA0KQogIH0KCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2FoLCB0aGlzLl9hbCwgMCkKICB3cml0ZUludDY0QkUodGhpcy5fYmgsIHRoaXMuX2JsLCA4KQogIHdyaXRlSW50NjRCRSh0aGlzLl9jaCwgdGhpcy5fY2wsIDE2KQogIHdyaXRlSW50NjRCRSh0aGlzLl9kaCwgdGhpcy5fZGwsIDI0KQogIHdyaXRlSW50NjRCRSh0aGlzLl9laCwgdGhpcy5fZWwsIDMyKQogIHdyaXRlSW50NjRCRSh0aGlzLl9maCwgdGhpcy5fZmwsIDQwKQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTM4NAoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vaGFzaCI6NDM1LCIuL3NoYTUxMiI6NDQyLCJidWZmZXIiOjUwNCwiaW5oZXJpdHMiOjQzM31dLDQ0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgSGFzaCA9IHJlcXVpcmUoJy4vaGFzaCcpCgp2YXIgSyA9IFsKICAweDQyOGEyZjk4LCAweGQ3MjhhZTIyLCAweDcxMzc0NDkxLCAweDIzZWY2NWNkLAogIDB4YjVjMGZiY2YsIDB4ZWM0ZDNiMmYsIDB4ZTliNWRiYTUsIDB4ODE4OWRiYmMsCiAgMHgzOTU2YzI1YiwgMHhmMzQ4YjUzOCwgMHg1OWYxMTFmMSwgMHhiNjA1ZDAxOSwKICAweDkyM2Y4MmE0LCAweGFmMTk0ZjliLCAweGFiMWM1ZWQ1LCAweGRhNmQ4MTE4LAogIDB4ZDgwN2FhOTgsIDB4YTMwMzAyNDIsIDB4MTI4MzViMDEsIDB4NDU3MDZmYmUsCiAgMHgyNDMxODViZSwgMHg0ZWU0YjI4YywgMHg1NTBjN2RjMywgMHhkNWZmYjRlMiwKICAweDcyYmU1ZDc0LCAweGYyN2I4OTZmLCAweDgwZGViMWZlLCAweDNiMTY5NmIxLAogIDB4OWJkYzA2YTcsIDB4MjVjNzEyMzUsIDB4YzE5YmYxNzQsIDB4Y2Y2OTI2OTQsCiAgMHhlNDliNjljMSwgMHg5ZWYxNGFkMiwgMHhlZmJlNDc4NiwgMHgzODRmMjVlMywKICAweDBmYzE5ZGM2LCAweDhiOGNkNWI1LCAweDI0MGNhMWNjLCAweDc3YWM5YzY1LAogIDB4MmRlOTJjNmYsIDB4NTkyYjAyNzUsIDB4NGE3NDg0YWEsIDB4NmVhNmU0ODMsCiAgMHg1Y2IwYTlkYywgMHhiZDQxZmJkNCwgMHg3NmY5ODhkYSwgMHg4MzExNTNiNSwKICAweDk4M2U1MTUyLCAweGVlNjZkZmFiLCAweGE4MzFjNjZkLCAweDJkYjQzMjEwLAogIDB4YjAwMzI3YzgsIDB4OThmYjIxM2YsIDB4YmY1OTdmYzcsIDB4YmVlZjBlZTQsCiAgMHhjNmUwMGJmMywgMHgzZGE4OGZjMiwgMHhkNWE3OTE0NywgMHg5MzBhYTcyNSwKICAweDA2Y2E2MzUxLCAweGUwMDM4MjZmLCAweDE0MjkyOTY3LCAweDBhMGU2ZTcwLAogIDB4MjdiNzBhODUsIDB4NDZkMjJmZmMsIDB4MmUxYjIxMzgsIDB4NWMyNmM5MjYsCiAgMHg0ZDJjNmRmYywgMHg1YWM0MmFlZCwgMHg1MzM4MGQxMywgMHg5ZDk1YjNkZiwKICAweDY1MGE3MzU0LCAweDhiYWY2M2RlLCAweDc2NmEwYWJiLCAweDNjNzdiMmE4LAogIDB4ODFjMmM5MmUsIDB4NDdlZGFlZTYsIDB4OTI3MjJjODUsIDB4MTQ4MjM1M2IsCiAgMHhhMmJmZThhMSwgMHg0Y2YxMDM2NCwgMHhhODFhNjY0YiwgMHhiYzQyMzAwMSwKICAweGMyNGI4YjcwLCAweGQwZjg5NzkxLCAweGM3NmM1MWEzLCAweDA2NTRiZTMwLAogIDB4ZDE5MmU4MTksIDB4ZDZlZjUyMTgsIDB4ZDY5OTA2MjQsIDB4NTU2NWE5MTAsCiAgMHhmNDBlMzU4NSwgMHg1NzcxMjAyYSwgMHgxMDZhYTA3MCwgMHgzMmJiZDFiOCwKICAweDE5YTRjMTE2LCAweGI4ZDJkMGM4LCAweDFlMzc2YzA4LCAweDUxNDFhYjUzLAogIDB4Mjc0ODc3NGMsIDB4ZGY4ZWViOTksIDB4MzRiMGJjYjUsIDB4ZTE5YjQ4YTgsCiAgMHgzOTFjMGNiMywgMHhjNWM5NWE2MywgMHg0ZWQ4YWE0YSwgMHhlMzQxOGFjYiwKICAweDViOWNjYTRmLCAweDc3NjNlMzczLCAweDY4MmU2ZmYzLCAweGQ2YjJiOGEzLAogIDB4NzQ4ZjgyZWUsIDB4NWRlZmIyZmMsIDB4NzhhNTYzNmYsIDB4NDMxNzJmNjAsCiAgMHg4NGM4NzgxNCwgMHhhMWYwYWI3MiwgMHg4Y2M3MDIwOCwgMHgxYTY0MzllYywKICAweDkwYmVmZmZhLCAweDIzNjMxZTI4LCAweGE0NTA2Y2ViLCAweGRlODJiZGU5LAogIDB4YmVmOWEzZjcsIDB4YjJjNjc5MTUsIDB4YzY3MTc4ZjIsIDB4ZTM3MjUzMmIsCiAgMHhjYTI3M2VjZSwgMHhlYTI2NjE5YywgMHhkMTg2YjhjNywgMHgyMWMwYzIwNywKICAweGVhZGE3ZGQ2LCAweGNkZTBlYjFlLCAweGY1N2Q0ZjdmLCAweGVlNmVkMTc4LAogIDB4MDZmMDY3YWEsIDB4NzIxNzZmYmEsIDB4MGE2MzdkYzUsIDB4YTJjODk4YTYsCiAgMHgxMTNmOTgwNCwgMHhiZWY5MGRhZSwgMHgxYjcxMGIzNSwgMHgxMzFjNDcxYiwKICAweDI4ZGI3N2Y1LCAweDIzMDQ3ZDg0LCAweDMyY2FhYjdiLCAweDQwYzcyNDkzLAogIDB4M2M5ZWJlMGEsIDB4MTVjOWJlYmMsIDB4NDMxZDY3YzQsIDB4OWMxMDBkNGMsCiAgMHg0Y2M1ZDRiZSwgMHhjYjNlNDJiNiwgMHg1OTdmMjk5YywgMHhmYzY1N2UyYSwKICAweDVmY2I2ZmFiLCAweDNhZDZmYWVjLCAweDZjNDQxOThjLCAweDRhNDc1ODE3Cl0KCnZhciBXID0gbmV3IEFycmF5KDE2MCkKCmZ1bmN0aW9uIFNoYTUxMiAoKSB7CiAgdGhpcy5pbml0KCkKICB0aGlzLl93ID0gVwoKICBIYXNoLmNhbGwodGhpcywgMTI4LCAxMTIpCn0KCmluaGVyaXRzKFNoYTUxMiwgSGFzaCkKClNoYTUxMi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9haCA9IDB4NmEwOWU2NjcKICB0aGlzLl9iaCA9IDB4YmI2N2FlODUKICB0aGlzLl9jaCA9IDB4M2M2ZWYzNzIKICB0aGlzLl9kaCA9IDB4YTU0ZmY1M2EKICB0aGlzLl9laCA9IDB4NTEwZTUyN2YKICB0aGlzLl9maCA9IDB4OWIwNTY4OGMKICB0aGlzLl9naCA9IDB4MWY4M2Q5YWIKICB0aGlzLl9oaCA9IDB4NWJlMGNkMTkKCiAgdGhpcy5fYWwgPSAweGYzYmNjOTA4CiAgdGhpcy5fYmwgPSAweDg0Y2FhNzNiCiAgdGhpcy5fY2wgPSAweGZlOTRmODJiCiAgdGhpcy5fZGwgPSAweDVmMWQzNmYxCiAgdGhpcy5fZWwgPSAweGFkZTY4MmQxCiAgdGhpcy5fZmwgPSAweDJiM2U2YzFmCiAgdGhpcy5fZ2wgPSAweGZiNDFiZDZiCiAgdGhpcy5faGwgPSAweDEzN2UyMTc5CgogIHJldHVybiB0aGlzCn0KCmZ1bmN0aW9uIENoICh4LCB5LCB6KSB7CiAgcmV0dXJuIHogXiAoeCAmICh5IF4geikpCn0KCmZ1bmN0aW9uIG1haiAoeCwgeSwgeikgewogIHJldHVybiAoeCAmIHkpIHwgKHogJiAoeCB8IHkpKQp9CgpmdW5jdGlvbiBzaWdtYTAgKHgsIHhsKSB7CiAgcmV0dXJuICh4ID4+PiAyOCB8IHhsIDw8IDQpIF4gKHhsID4+PiAyIHwgeCA8PCAzMCkgXiAoeGwgPj4+IDcgfCB4IDw8IDI1KQp9CgpmdW5jdGlvbiBzaWdtYTEgKHgsIHhsKSB7CiAgcmV0dXJuICh4ID4+PiAxNCB8IHhsIDw8IDE4KSBeICh4ID4+PiAxOCB8IHhsIDw8IDE0KSBeICh4bCA+Pj4gOSB8IHggPDwgMjMpCn0KCmZ1bmN0aW9uIEdhbW1hMCAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDEgfCB4bCA8PCAzMSkgXiAoeCA+Pj4gOCB8IHhsIDw8IDI0KSBeICh4ID4+PiA3KQp9CgpmdW5jdGlvbiBHYW1tYTBsICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMSB8IHhsIDw8IDMxKSBeICh4ID4+PiA4IHwgeGwgPDwgMjQpIF4gKHggPj4+IDcgfCB4bCA8PCAyNSkKfQoKZnVuY3Rpb24gR2FtbWExICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMTkgfCB4bCA8PCAxMykgXiAoeGwgPj4+IDI5IHwgeCA8PCAzKSBeICh4ID4+PiA2KQp9CgpmdW5jdGlvbiBHYW1tYTFsICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMTkgfCB4bCA8PCAxMykgXiAoeGwgPj4+IDI5IHwgeCA8PCAzKSBeICh4ID4+PiA2IHwgeGwgPDwgMjYpCn0KCmZ1bmN0aW9uIGdldENhcnJ5IChhLCBiKSB7CiAgcmV0dXJuIChhID4+PiAwKSA8IChiID4+PiAwKSA/IDEgOiAwCn0KClNoYTUxMi5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChNKSB7CiAgdmFyIFcgPSB0aGlzLl93CgogIHZhciBhaCA9IHRoaXMuX2FoIHwgMAogIHZhciBiaCA9IHRoaXMuX2JoIHwgMAogIHZhciBjaCA9IHRoaXMuX2NoIHwgMAogIHZhciBkaCA9IHRoaXMuX2RoIHwgMAogIHZhciBlaCA9IHRoaXMuX2VoIHwgMAogIHZhciBmaCA9IHRoaXMuX2ZoIHwgMAogIHZhciBnaCA9IHRoaXMuX2doIHwgMAogIHZhciBoaCA9IHRoaXMuX2hoIHwgMAoKICB2YXIgYWwgPSB0aGlzLl9hbCB8IDAKICB2YXIgYmwgPSB0aGlzLl9ibCB8IDAKICB2YXIgY2wgPSB0aGlzLl9jbCB8IDAKICB2YXIgZGwgPSB0aGlzLl9kbCB8IDAKICB2YXIgZWwgPSB0aGlzLl9lbCB8IDAKICB2YXIgZmwgPSB0aGlzLl9mbCB8IDAKICB2YXIgZ2wgPSB0aGlzLl9nbCB8IDAKICB2YXIgaGwgPSB0aGlzLl9obCB8IDAKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgaSArPSAyKSB7CiAgICBXW2ldID0gTS5yZWFkSW50MzJCRShpICogNCkKICAgIFdbaSArIDFdID0gTS5yZWFkSW50MzJCRShpICogNCArIDQpCiAgfQogIGZvciAoOyBpIDwgMTYwOyBpICs9IDIpIHsKICAgIHZhciB4aCA9IFdbaSAtIDE1ICogMl0KICAgIHZhciB4bCA9IFdbaSAtIDE1ICogMiArIDFdCiAgICB2YXIgZ2FtbWEwID0gR2FtbWEwKHhoLCB4bCkKICAgIHZhciBnYW1tYTBsID0gR2FtbWEwbCh4bCwgeGgpCgogICAgeGggPSBXW2kgLSAyICogMl0KICAgIHhsID0gV1tpIC0gMiAqIDIgKyAxXQogICAgdmFyIGdhbW1hMSA9IEdhbW1hMSh4aCwgeGwpCiAgICB2YXIgZ2FtbWExbCA9IEdhbW1hMWwoeGwsIHhoKQoKICAgIC8vIFdbaV0gPSBnYW1tYTAgKyBXW2kgLSA3XSArIGdhbW1hMSArIFdbaSAtIDE2XQogICAgdmFyIFdpN2ggPSBXW2kgLSA3ICogMl0KICAgIHZhciBXaTdsID0gV1tpIC0gNyAqIDIgKyAxXQoKICAgIHZhciBXaTE2aCA9IFdbaSAtIDE2ICogMl0KICAgIHZhciBXaTE2bCA9IFdbaSAtIDE2ICogMiArIDFdCgogICAgdmFyIFdpbCA9IChnYW1tYTBsICsgV2k3bCkgfCAwCiAgICB2YXIgV2loID0gKGdhbW1hMCArIFdpN2ggKyBnZXRDYXJyeShXaWwsIGdhbW1hMGwpKSB8IDAKICAgIFdpbCA9IChXaWwgKyBnYW1tYTFsKSB8IDAKICAgIFdpaCA9IChXaWggKyBnYW1tYTEgKyBnZXRDYXJyeShXaWwsIGdhbW1hMWwpKSB8IDAKICAgIFdpbCA9IChXaWwgKyBXaTE2bCkgfCAwCiAgICBXaWggPSAoV2loICsgV2kxNmggKyBnZXRDYXJyeShXaWwsIFdpMTZsKSkgfCAwCgogICAgV1tpXSA9IFdpaAogICAgV1tpICsgMV0gPSBXaWwKICB9CgogIGZvciAodmFyIGogPSAwOyBqIDwgMTYwOyBqICs9IDIpIHsKICAgIFdpaCA9IFdbal0KICAgIFdpbCA9IFdbaiArIDFdCgogICAgdmFyIG1hamggPSBtYWooYWgsIGJoLCBjaCkKICAgIHZhciBtYWpsID0gbWFqKGFsLCBibCwgY2wpCgogICAgdmFyIHNpZ21hMGggPSBzaWdtYTAoYWgsIGFsKQogICAgdmFyIHNpZ21hMGwgPSBzaWdtYTAoYWwsIGFoKQogICAgdmFyIHNpZ21hMWggPSBzaWdtYTEoZWgsIGVsKQogICAgdmFyIHNpZ21hMWwgPSBzaWdtYTEoZWwsIGVoKQoKICAgIC8vIHQxID0gaCArIHNpZ21hMSArIGNoICsgS1tqXSArIFdbal0KICAgIHZhciBLaWggPSBLW2pdCiAgICB2YXIgS2lsID0gS1tqICsgMV0KCiAgICB2YXIgY2hoID0gQ2goZWgsIGZoLCBnaCkKICAgIHZhciBjaGwgPSBDaChlbCwgZmwsIGdsKQoKICAgIHZhciB0MWwgPSAoaGwgKyBzaWdtYTFsKSB8IDAKICAgIHZhciB0MWggPSAoaGggKyBzaWdtYTFoICsgZ2V0Q2FycnkodDFsLCBobCkpIHwgMAogICAgdDFsID0gKHQxbCArIGNobCkgfCAwCiAgICB0MWggPSAodDFoICsgY2hoICsgZ2V0Q2FycnkodDFsLCBjaGwpKSB8IDAKICAgIHQxbCA9ICh0MWwgKyBLaWwpIHwgMAogICAgdDFoID0gKHQxaCArIEtpaCArIGdldENhcnJ5KHQxbCwgS2lsKSkgfCAwCiAgICB0MWwgPSAodDFsICsgV2lsKSB8IDAKICAgIHQxaCA9ICh0MWggKyBXaWggKyBnZXRDYXJyeSh0MWwsIFdpbCkpIHwgMAoKICAgIC8vIHQyID0gc2lnbWEwICsgbWFqCiAgICB2YXIgdDJsID0gKHNpZ21hMGwgKyBtYWpsKSB8IDAKICAgIHZhciB0MmggPSAoc2lnbWEwaCArIG1hamggKyBnZXRDYXJyeSh0MmwsIHNpZ21hMGwpKSB8IDAKCiAgICBoaCA9IGdoCiAgICBobCA9IGdsCiAgICBnaCA9IGZoCiAgICBnbCA9IGZsCiAgICBmaCA9IGVoCiAgICBmbCA9IGVsCiAgICBlbCA9IChkbCArIHQxbCkgfCAwCiAgICBlaCA9IChkaCArIHQxaCArIGdldENhcnJ5KGVsLCBkbCkpIHwgMAogICAgZGggPSBjaAogICAgZGwgPSBjbAogICAgY2ggPSBiaAogICAgY2wgPSBibAogICAgYmggPSBhaAogICAgYmwgPSBhbAogICAgYWwgPSAodDFsICsgdDJsKSB8IDAKICAgIGFoID0gKHQxaCArIHQyaCArIGdldENhcnJ5KGFsLCB0MWwpKSB8IDAKICB9CgogIHRoaXMuX2FsID0gKHRoaXMuX2FsICsgYWwpIHwgMAogIHRoaXMuX2JsID0gKHRoaXMuX2JsICsgYmwpIHwgMAogIHRoaXMuX2NsID0gKHRoaXMuX2NsICsgY2wpIHwgMAogIHRoaXMuX2RsID0gKHRoaXMuX2RsICsgZGwpIHwgMAogIHRoaXMuX2VsID0gKHRoaXMuX2VsICsgZWwpIHwgMAogIHRoaXMuX2ZsID0gKHRoaXMuX2ZsICsgZmwpIHwgMAogIHRoaXMuX2dsID0gKHRoaXMuX2dsICsgZ2wpIHwgMAogIHRoaXMuX2hsID0gKHRoaXMuX2hsICsgaGwpIHwgMAoKICB0aGlzLl9haCA9ICh0aGlzLl9haCArIGFoICsgZ2V0Q2FycnkodGhpcy5fYWwsIGFsKSkgfCAwCiAgdGhpcy5fYmggPSAodGhpcy5fYmggKyBiaCArIGdldENhcnJ5KHRoaXMuX2JsLCBibCkpIHwgMAogIHRoaXMuX2NoID0gKHRoaXMuX2NoICsgY2ggKyBnZXRDYXJyeSh0aGlzLl9jbCwgY2wpKSB8IDAKICB0aGlzLl9kaCA9ICh0aGlzLl9kaCArIGRoICsgZ2V0Q2FycnkodGhpcy5fZGwsIGRsKSkgfCAwCiAgdGhpcy5fZWggPSAodGhpcy5fZWggKyBlaCArIGdldENhcnJ5KHRoaXMuX2VsLCBlbCkpIHwgMAogIHRoaXMuX2ZoID0gKHRoaXMuX2ZoICsgZmggKyBnZXRDYXJyeSh0aGlzLl9mbCwgZmwpKSB8IDAKICB0aGlzLl9naCA9ICh0aGlzLl9naCArIGdoICsgZ2V0Q2FycnkodGhpcy5fZ2wsIGdsKSkgfCAwCiAgdGhpcy5faGggPSAodGhpcy5faGggKyBoaCArIGdldENhcnJ5KHRoaXMuX2hsLCBobCkpIHwgMAp9CgpTaGE1MTIucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcig2NCkKCiAgZnVuY3Rpb24gd3JpdGVJbnQ2NEJFIChoLCBsLCBvZmZzZXQpIHsKICAgIEgud3JpdGVJbnQzMkJFKGgsIG9mZnNldCkKICAgIEgud3JpdGVJbnQzMkJFKGwsIG9mZnNldCArIDQpCiAgfQoKICB3cml0ZUludDY0QkUodGhpcy5fYWgsIHRoaXMuX2FsLCAwKQogIHdyaXRlSW50NjRCRSh0aGlzLl9iaCwgdGhpcy5fYmwsIDgpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2NoLCB0aGlzLl9jbCwgMTYpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2RoLCB0aGlzLl9kbCwgMjQpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2VoLCB0aGlzLl9lbCwgMzIpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2ZoLCB0aGlzLl9mbCwgNDApCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2doLCB0aGlzLl9nbCwgNDgpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2hoLCB0aGlzLl9obCwgNTYpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhNTEyCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjo0MzUsImJ1ZmZlciI6NTA0LCJpbmhlcml0cyI6NDMzfV0sNDQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgY3JlYXRlSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKdmFyIE1BWF9BTExPQyA9IE1hdGgucG93KDIsIDMwKSAtIDEgLy8gZGVmYXVsdCBpbiBpb2pzCgpleHBvcnRzLnBia2RmMiA9IHBia2RmMgpmdW5jdGlvbiBwYmtkZjIgKHBhc3N3b3JkLCBzYWx0LCBpdGVyYXRpb25zLCBrZXlsZW4sIGRpZ2VzdCwgY2FsbGJhY2spIHsKICBpZiAodHlwZW9mIGRpZ2VzdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgY2FsbGJhY2sgPSBkaWdlc3QKICAgIGRpZ2VzdCA9IHVuZGVmaW5lZAogIH0KCiAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgewogICAgdGhyb3cgbmV3IEVycm9yKCdObyBjYWxsYmFjayBwcm92aWRlZCB0byBwYmtkZjInKQogIH0KCiAgdmFyIHJlc3VsdCA9IHBia2RmMlN5bmMocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0KQogIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgY2FsbGJhY2sodW5kZWZpbmVkLCByZXN1bHQpCiAgfSkKfQoKZXhwb3J0cy5wYmtkZjJTeW5jID0gcGJrZGYyU3luYwpmdW5jdGlvbiBwYmtkZjJTeW5jIChwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywga2V5bGVuLCBkaWdlc3QpIHsKICBpZiAodHlwZW9mIGl0ZXJhdGlvbnMgIT09ICdudW1iZXInKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJdGVyYXRpb25zIG5vdCBhIG51bWJlcicpCiAgfQoKICBpZiAoaXRlcmF0aW9ucyA8IDApIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JhZCBpdGVyYXRpb25zJykKICB9CgogIGlmICh0eXBlb2Yga2V5bGVuICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignS2V5IGxlbmd0aCBub3QgYSBudW1iZXInKQogIH0KCiAgaWYgKGtleWxlbiA8IDAgfHwga2V5bGVuID4gTUFYX0FMTE9DKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCYWQga2V5IGxlbmd0aCcpCiAgfQoKICBkaWdlc3QgPSBkaWdlc3QgfHwgJ3NoYTEnCgogIGlmICghQnVmZmVyLmlzQnVmZmVyKHBhc3N3b3JkKSkgcGFzc3dvcmQgPSBuZXcgQnVmZmVyKHBhc3N3b3JkLCAnYmluYXJ5JykKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihzYWx0KSkgc2FsdCA9IG5ldyBCdWZmZXIoc2FsdCwgJ2JpbmFyeScpCgogIHZhciBoTGVuCiAgdmFyIGwgPSAxCiAgdmFyIERLID0gbmV3IEJ1ZmZlcihrZXlsZW4pCiAgdmFyIGJsb2NrMSA9IG5ldyBCdWZmZXIoc2FsdC5sZW5ndGggKyA0KQogIHNhbHQuY29weShibG9jazEsIDAsIDAsIHNhbHQubGVuZ3RoKQoKICB2YXIgcgogIHZhciBUCgogIGZvciAodmFyIGkgPSAxOyBpIDw9IGw7IGkrKykgewogICAgYmxvY2sxLndyaXRlVUludDMyQkUoaSwgc2FsdC5sZW5ndGgpCiAgICB2YXIgVSA9IGNyZWF0ZUhtYWMoZGlnZXN0LCBwYXNzd29yZCkudXBkYXRlKGJsb2NrMSkuZGlnZXN0KCkKCiAgICBpZiAoIWhMZW4pIHsKICAgICAgaExlbiA9IFUubGVuZ3RoCiAgICAgIFQgPSBuZXcgQnVmZmVyKGhMZW4pCiAgICAgIGwgPSBNYXRoLmNlaWwoa2V5bGVuIC8gaExlbikKICAgICAgciA9IGtleWxlbiAtIChsIC0gMSkgKiBoTGVuCiAgICB9CgogICAgVS5jb3B5KFQsIDAsIDAsIGhMZW4pCgogICAgZm9yICh2YXIgaiA9IDE7IGogPCBpdGVyYXRpb25zOyBqKyspIHsKICAgICAgVSA9IGNyZWF0ZUhtYWMoZGlnZXN0LCBwYXNzd29yZCkudXBkYXRlKFUpLmRpZ2VzdCgpCgogICAgICBmb3IgKHZhciBrID0gMDsgayA8IGhMZW47IGsrKykgewogICAgICAgIFRba10gXj0gVVtrXQogICAgICB9CiAgICB9CgogICAgdmFyIGRlc3RQb3MgPSAoaSAtIDEpICogaExlbgogICAgdmFyIGxlbiA9IChpID09PSBsID8gciA6IGhMZW4pCiAgICBULmNvcHkoREssIGRlc3RQb3MsIDAsIGxlbikKICB9CgogIHJldHVybiBESwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDQsImNyZWF0ZS1obWFjIjo0NDR9XSw0NDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaC9icm93c2VyJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKCnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdzdHJlYW0nKS5UcmFuc2Zvcm0KCnZhciBaRVJPUyA9IG5ldyBCdWZmZXIoMTI4KQpaRVJPUy5maWxsKDApCgpmdW5jdGlvbiBIbWFjKGFsZywga2V5KSB7CiAgVHJhbnNmb3JtLmNhbGwodGhpcykKICBhbGcgPSBhbGcudG9Mb3dlckNhc2UoKQogIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykgewogICAga2V5ID0gbmV3IEJ1ZmZlcihrZXkpCiAgfQoKICB2YXIgYmxvY2tzaXplID0gKGFsZyA9PT0gJ3NoYTUxMicgfHwgYWxnID09PSAnc2hhMzg0JykgPyAxMjggOiA2NAoKICB0aGlzLl9hbGcgPSBhbGcKICB0aGlzLl9rZXkgPSBrZXkKCiAgaWYgKGtleS5sZW5ndGggPiBibG9ja3NpemUpIHsKICAgIGtleSA9IGNyZWF0ZUhhc2goYWxnKS51cGRhdGUoa2V5KS5kaWdlc3QoKQoKICB9IGVsc2UgaWYgKGtleS5sZW5ndGggPCBibG9ja3NpemUpIHsKICAgIGtleSA9IEJ1ZmZlci5jb25jYXQoW2tleSwgWkVST1NdLCBibG9ja3NpemUpCiAgfQoKICB2YXIgaXBhZCA9IHRoaXMuX2lwYWQgPSBuZXcgQnVmZmVyKGJsb2Nrc2l6ZSkKICB2YXIgb3BhZCA9IHRoaXMuX29wYWQgPSBuZXcgQnVmZmVyKGJsb2Nrc2l6ZSkKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9ja3NpemU7IGkrKykgewogICAgaXBhZFtpXSA9IGtleVtpXSBeIDB4MzYKICAgIG9wYWRbaV0gPSBrZXlbaV0gXiAweDVDCiAgfQoKICB0aGlzLl9oYXNoID0gY3JlYXRlSGFzaChhbGcpLnVwZGF0ZShpcGFkKQp9Cgppbmhlcml0cyhIbWFjLCBUcmFuc2Zvcm0pCgpIbWFjLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSwgZW5jKSB7CiAgdGhpcy5faGFzaC51cGRhdGUoZGF0YSwgZW5jKQoKICByZXR1cm4gdGhpcwp9CgpIbWFjLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGRhdGEsIF8sIG5leHQpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQoKICBuZXh0KCkKfQoKSG1hYy5wcm90b3R5cGUuX2ZsdXNoID0gZnVuY3Rpb24gKG5leHQpIHsKICB0aGlzLnB1c2godGhpcy5kaWdlc3QoKSkKCiAgbmV4dCgpCn0KCkhtYWMucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIChlbmMpIHsKICB2YXIgaCA9IHRoaXMuX2hhc2guZGlnZXN0KCkKCiAgcmV0dXJuIGNyZWF0ZUhhc2godGhpcy5fYWxnKS51cGRhdGUodGhpcy5fb3BhZCkudXBkYXRlKGgpLmRpZ2VzdChlbmMpCn0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlSG1hYyhhbGcsIGtleSkgewogIHJldHVybiBuZXcgSG1hYyhhbGcsIGtleSkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NTA0LCJjcmVhdGUtaGFzaC9icm93c2VyIjo0MjksImluaGVyaXRzIjo0NDUsInN0cmVhbSI6NzE5fV0sNDQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzM11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjQzM31dLDQ0NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwsQnVmZmVyKXsKJ3VzZSBzdHJpY3QnCgpmdW5jdGlvbiBvbGRCcm93c2VyICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ3NlY3VyZSByYW5kb20gbnVtYmVyIGdlbmVyYXRpb24gbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXJcbnVzZSBjaHJvbWUsIEZpcmVGb3ggb3IgSW50ZXJuZXQgRXhwbG9yZXIgMTEnKQp9Cgp2YXIgY3J5cHRvID0gZ2xvYmFsLmNyeXB0byB8fCBnbG9iYWwubXNDcnlwdG8KCmlmIChjcnlwdG8gJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykgewogIG1vZHVsZS5leHBvcnRzID0gcmFuZG9tQnl0ZXMKfSBlbHNlIHsKICBtb2R1bGUuZXhwb3J0cyA9IG9sZEJyb3dzZXIKfQoKZnVuY3Rpb24gcmFuZG9tQnl0ZXMgKHNpemUsIGNiKSB7CiAgLy8gcGhhbnRvbWpzIG5lZWRzIHRvIHRocm93CiAgaWYgKHNpemUgPiA2NTUzNikgdGhyb3cgbmV3IEVycm9yKCdyZXF1ZXN0ZWQgdG9vIG1hbnkgcmFuZG9tIGJ5dGVzJykKICAvLyBpbiBjYXNlIGJyb3dzZXJpZnkgIGlzbid0IHVzaW5nIHRoZSBVaW50OEFycmF5IHZlcnNpb24KICB2YXIgcmF3Qnl0ZXMgPSBuZXcgZ2xvYmFsLlVpbnQ4QXJyYXkoc2l6ZSkKCiAgLy8gVGhpcyB3aWxsIG5vdCB3b3JrIGluIG9sZGVyIGJyb3dzZXJzLgogIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMKICBpZiAoc2l6ZSA+IDApIHsgIC8vIGdldFJhbmRvbVZhbHVlcyBmYWlscyBvbiBJRSBpZiBzaXplID09IDAKICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMocmF3Qnl0ZXMpCiAgfQogIC8vIHBoYW50b21qcyBkb2Vzbid0IGxpa2UgYSBidWZmZXIgYmVpbmcgcGFzc2VkIGhlcmUKICB2YXIgYnl0ZXMgPSBuZXcgQnVmZmVyKHJhd0J5dGVzLmJ1ZmZlcikKCiAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBjYihudWxsLCBieXRlcykKICAgIH0pCiAgfQoKICByZXR1cm4gYnl0ZXMKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJyksdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJfcHJvY2VzcyI6NzAzLCJidWZmZXIiOjUwNH1dLDQ0NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocm9vdCkgewogICAidXNlIHN0cmljdCI7CgovKioqKiogdW5vcm0uanMgKioqKiovCgovKgogKiBVbmljb2RlTm9ybWFsaXplciAxLjAuMAogKiBDb3B5cmlnaHQgKGMpIDIwMDggTWF0c3V6YQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkgYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICogJERhdGU6IDIwMDgtMDYtMDUgMTY6NDQ6MTcgKzAyMDAgKFRodSwgMDUgSnVuIDIwMDgpICQKICogJFJldjogMTMzMDkgJAogKi8KCiAgIHZhciBERUZBVUxUX0ZFQVRVUkUgPSBbbnVsbCwgMCwge31dOwogICB2YXIgQ0FDSEVfVEhSRVNIT0xEID0gMTA7CiAgIHZhciBTQmFzZSA9IDB4QUMwMCwgTEJhc2UgPSAweDExMDAsIFZCYXNlID0gMHgxMTYxLCBUQmFzZSA9IDB4MTFBNywgTENvdW50ID0gMTksIFZDb3VudCA9IDIxLCBUQ291bnQgPSAyODsKICAgdmFyIE5Db3VudCA9IFZDb3VudCAqIFRDb3VudDsgLy8gNTg4CiAgIHZhciBTQ291bnQgPSBMQ291bnQgKiBOQ291bnQ7IC8vIDExMTcyCgogICB2YXIgVUNoYXIgPSBmdW5jdGlvbihjcCwgZmVhdHVyZSl7CiAgICAgIHRoaXMuY29kZXBvaW50ID0gY3A7CiAgICAgIHRoaXMuZmVhdHVyZSA9IGZlYXR1cmU7CiAgIH07CgogICAvLyBTdHJhdGVnaWVzCiAgIHZhciBjYWNoZSA9IHt9OwogICB2YXIgY2FjaGVDb3VudGVyID0gW107CiAgIGZvciAodmFyIGkgPSAwOyBpIDw9IDB4RkY7ICsraSl7CiAgICAgIGNhY2hlQ291bnRlcltpXSA9IDA7CiAgIH0KCiAgIGZ1bmN0aW9uIGZyb21DYWNoZShuZXh0LCBjcCwgbmVlZEZlYXR1cmUpewogICAgICB2YXIgcmV0ID0gY2FjaGVbY3BdOwogICAgICBpZighcmV0KXsKICAgICAgICAgcmV0ID0gbmV4dChjcCwgbmVlZEZlYXR1cmUpOwogICAgICAgICBpZighIXJldC5mZWF0dXJlICYmICsrY2FjaGVDb3VudGVyWyhjcCA+PiA4KSAmIDB4RkZdID4gQ0FDSEVfVEhSRVNIT0xEKXsKICAgICAgICAgICAgY2FjaGVbY3BdID0gcmV0OwogICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgfQoKICAgZnVuY3Rpb24gZnJvbURhdGEobmV4dCwgY3AsIG5lZWRGZWF0dXJlKXsKICAgICAgdmFyIGhhc2ggPSBjcCAmIDB4RkYwMDsKICAgICAgdmFyIGR1bml0ID0gVUNoYXIudWRhdGFbaGFzaF0gfHwge307CiAgICAgIHZhciBmID0gZHVuaXRbY3BdOwogICAgICByZXR1cm4gZiA/IG5ldyBVQ2hhcihjcCwgZikgOiBuZXcgVUNoYXIoY3AsIERFRkFVTFRfRkVBVFVSRSk7CiAgIH0KICAgZnVuY3Rpb24gZnJvbUNwT25seShuZXh0LCBjcCwgbmVlZEZlYXR1cmUpewogICAgICByZXR1cm4gISFuZWVkRmVhdHVyZSA/IG5leHQoY3AsIG5lZWRGZWF0dXJlKSA6IG5ldyBVQ2hhcihjcCwgbnVsbCk7CiAgIH0KICAgZnVuY3Rpb24gZnJvbVJ1bGVCYXNlZEphbW8obmV4dCwgY3AsIG5lZWRGZWF0dXJlKXsKICAgICAgdmFyIGo7CiAgICAgIGlmKGNwIDwgTEJhc2UgfHwgKExCYXNlICsgTENvdW50IDw9IGNwICYmIGNwIDwgU0Jhc2UpIHx8IChTQmFzZSArIFNDb3VudCA8IGNwKSl7CiAgICAgICAgIHJldHVybiBuZXh0KGNwLCBuZWVkRmVhdHVyZSk7CiAgICAgIH0KICAgICAgaWYoTEJhc2UgPD0gY3AgJiYgY3AgPCBMQmFzZSArIExDb3VudCl7CiAgICAgICAgIHZhciBjID0ge307CiAgICAgICAgIHZhciBiYXNlID0gKGNwIC0gTEJhc2UpICogVkNvdW50OwogICAgICAgICBmb3IgKGogPSAwOyBqIDwgVkNvdW50OyArK2opewogICAgICAgICAgICBjW1ZCYXNlICsgal0gPSBTQmFzZSArIFRDb3VudCAqIChqICsgYmFzZSk7CiAgICAgICAgIH0KICAgICAgICAgcmV0dXJuIG5ldyBVQ2hhcihjcCwgWywsY10pOwogICAgICB9CgogICAgICB2YXIgU0luZGV4ID0gY3AgLSBTQmFzZTsKICAgICAgdmFyIFRJbmRleCA9IFNJbmRleCAlIFRDb3VudDsKICAgICAgdmFyIGZlYXR1cmUgPSBbXTsKICAgICAgaWYoVEluZGV4ICE9PSAwKXsKICAgICAgICAgZmVhdHVyZVswXSA9IFtTQmFzZSArIFNJbmRleCAtIFRJbmRleCwgVEJhc2UgKyBUSW5kZXhdOwogICAgICB9IGVsc2UgewogICAgICAgICBmZWF0dXJlWzBdID0gW0xCYXNlICsgTWF0aC5mbG9vcihTSW5kZXggLyBOQ291bnQpLCBWQmFzZSArIE1hdGguZmxvb3IoKFNJbmRleCAlIE5Db3VudCkgLyBUQ291bnQpXTsKICAgICAgICAgZmVhdHVyZVsyXSA9IHt9OwogICAgICAgICBmb3IgKGogPSAxOyBqIDwgVENvdW50OyArK2opewogICAgICAgICAgICBmZWF0dXJlWzJdW1RCYXNlICsgal0gPSBjcCArIGo7CiAgICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbmV3IFVDaGFyKGNwLCBmZWF0dXJlKTsKICAgfQogICBmdW5jdGlvbiBmcm9tQ3BGaWx0ZXIobmV4dCwgY3AsIG5lZWRGZWF0dXJlKXsKICAgICAgcmV0dXJuIGNwIDwgNjAgfHwgMTMzMTEgPCBjcCAmJiBjcCA8IDQyNjA3ID8gbmV3IFVDaGFyKGNwLCBERUZBVUxUX0ZFQVRVUkUpIDogbmV4dChjcCwgbmVlZEZlYXR1cmUpOwogICB9CgogICB2YXIgc3RyYXRlZ2llcyA9IFtmcm9tQ3BGaWx0ZXIsIGZyb21DYWNoZSwgZnJvbUNwT25seSwgZnJvbVJ1bGVCYXNlZEphbW8sIGZyb21EYXRhXTsKCiAgIFVDaGFyLmZyb21DaGFyQ29kZSA9IHN0cmF0ZWdpZXMucmVkdWNlUmlnaHQoZnVuY3Rpb24gKG5leHQsIHN0cmF0ZWd5KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoY3AsIG5lZWRGZWF0dXJlKSB7CiAgICAgICAgIHJldHVybiBzdHJhdGVneShuZXh0LCBjcCwgbmVlZEZlYXR1cmUpOwogICAgICB9OwogICB9LCBudWxsKTsKCiAgIFVDaGFyLmlzSGlnaFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uKGNwKXsKICAgICAgcmV0dXJuIGNwID49IDB4RDgwMCAmJiBjcCA8PSAweERCRkY7CiAgIH07CiAgIFVDaGFyLmlzTG93U3Vycm9nYXRlID0gZnVuY3Rpb24oY3ApewogICAgICByZXR1cm4gY3AgPj0gMHhEQzAwICYmIGNwIDw9IDB4REZGRjsKICAgfTsKCiAgIFVDaGFyLnByb3RvdHlwZS5wcmVwRmVhdHVyZSA9IGZ1bmN0aW9uKCl7CiAgICAgIGlmKCF0aGlzLmZlYXR1cmUpewogICAgICAgICB0aGlzLmZlYXR1cmUgPSBVQ2hhci5mcm9tQ2hhckNvZGUodGhpcy5jb2RlcG9pbnQsIHRydWUpLmZlYXR1cmU7CiAgICAgIH0KICAgfTsKCiAgIFVDaGFyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCl7CiAgICAgIGlmKHRoaXMuY29kZXBvaW50IDwgMHgxMDAwMCl7CiAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuY29kZXBvaW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAgdmFyIHggPSB0aGlzLmNvZGVwb2ludCAtIDB4MTAwMDA7CiAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKE1hdGguZmxvb3IoeCAvIDB4NDAwKSArIDB4RDgwMCwgeCAlIDB4NDAwICsgMHhEQzAwKTsKICAgICAgfQogICB9OwoKICAgVUNoYXIucHJvdG90eXBlLmdldERlY29tcCA9IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMucHJlcEZlYXR1cmUoKTsKICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZVswXSB8fCBudWxsOwogICB9OwoKICAgVUNoYXIucHJvdG90eXBlLmlzQ29tcGF0aWJpbGl0eSA9IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMucHJlcEZlYXR1cmUoKTsKICAgICAgcmV0dXJuICEhdGhpcy5mZWF0dXJlWzFdICYmICh0aGlzLmZlYXR1cmVbMV0gJiAoMSA8PCA4KSk7CiAgIH07CiAgIFVDaGFyLnByb3RvdHlwZS5pc0V4Y2x1ZGUgPSBmdW5jdGlvbigpewogICAgICB0aGlzLnByZXBGZWF0dXJlKCk7CiAgICAgIHJldHVybiAhIXRoaXMuZmVhdHVyZVsxXSAmJiAodGhpcy5mZWF0dXJlWzFdICYgKDEgPDwgOSkpOwogICB9OwogICBVQ2hhci5wcm90b3R5cGUuZ2V0Q2Fub25pY2FsQ2xhc3MgPSBmdW5jdGlvbigpewogICAgICB0aGlzLnByZXBGZWF0dXJlKCk7CiAgICAgIHJldHVybiAhIXRoaXMuZmVhdHVyZVsxXSA/ICh0aGlzLmZlYXR1cmVbMV0gJiAweGZmKSA6IDA7CiAgIH07CiAgIFVDaGFyLnByb3RvdHlwZS5nZXRDb21wb3NpdGUgPSBmdW5jdGlvbihmb2xsb3dpbmcpewogICAgICB0aGlzLnByZXBGZWF0dXJlKCk7CiAgICAgIGlmKCF0aGlzLmZlYXR1cmVbMl0pewogICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB2YXIgY3AgPSB0aGlzLmZlYXR1cmVbMl1bZm9sbG93aW5nLmNvZGVwb2ludF07CiAgICAgIHJldHVybiBjcCA/IFVDaGFyLmZyb21DaGFyQ29kZShjcCkgOiBudWxsOwogICB9OwoKICAgdmFyIFVDaGFySXRlcmF0b3IgPSBmdW5jdGlvbihzdHIpewogICAgICB0aGlzLnN0ciA9IHN0cjsKICAgICAgdGhpcy5jdXJzb3IgPSAwOwogICB9OwogICBVQ2hhckl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKXsKICAgICAgaWYoISF0aGlzLnN0ciAmJiB0aGlzLmN1cnNvciA8IHRoaXMuc3RyLmxlbmd0aCl7CiAgICAgICAgIHZhciBjcCA9IHRoaXMuc3RyLmNoYXJDb2RlQXQodGhpcy5jdXJzb3IrKyk7CiAgICAgICAgIHZhciBkOwogICAgICAgICBpZihVQ2hhci5pc0hpZ2hTdXJyb2dhdGUoY3ApICYmIHRoaXMuY3Vyc29yIDwgdGhpcy5zdHIubGVuZ3RoICYmIFVDaGFyLmlzTG93U3Vycm9nYXRlKChkID0gdGhpcy5zdHIuY2hhckNvZGVBdCh0aGlzLmN1cnNvcikpKSl7CiAgICAgICAgICAgIGNwID0gKGNwIC0gMHhEODAwKSAqIDB4NDAwICsgKGQgLTB4REMwMCkgKyAweDEwMDAwOwogICAgICAgICAgICArK3RoaXMuY3Vyc29yOwogICAgICAgICB9CiAgICAgICAgIHJldHVybiBVQ2hhci5mcm9tQ2hhckNvZGUoY3ApOwogICAgICB9IGVsc2UgewogICAgICAgICB0aGlzLnN0ciA9IG51bGw7CiAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgIH07CgogICB2YXIgUmVjdXJzRGVjb21wSXRlcmF0b3IgPSBmdW5jdGlvbihpdCwgY2Fubyl7CiAgICAgIHRoaXMuaXQgPSBpdDsKICAgICAgdGhpcy5jYW5vbmljYWwgPSBjYW5vOwogICAgICB0aGlzLnJlc0J1ZiA9IFtdOwogICB9OwoKICAgUmVjdXJzRGVjb21wSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpewogICAgICBmdW5jdGlvbiByZWN1cnNpdmVEZWNvbXAoY2FubywgdWNoYXIpewogICAgICAgICB2YXIgZGVjb21wID0gdWNoYXIuZ2V0RGVjb21wKCk7CiAgICAgICAgIGlmKCEhZGVjb21wICYmICEoY2FubyAmJiB1Y2hhci5pc0NvbXBhdGliaWxpdHkoKSkpewogICAgICAgICAgICB2YXIgcmV0ID0gW107CiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkZWNvbXAubGVuZ3RoOyArK2kpewogICAgICAgICAgICAgICB2YXIgYSA9IHJlY3Vyc2l2ZURlY29tcChjYW5vLCBVQ2hhci5mcm9tQ2hhckNvZGUoZGVjb21wW2ldKSk7CiAgICAgICAgICAgICAgICByZXQgPSByZXQuY29uY2F0KGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBbdWNoYXJdOwogICAgICAgICB9CiAgICAgIH0KICAgICAgaWYodGhpcy5yZXNCdWYubGVuZ3RoID09PSAwKXsKICAgICAgICAgdmFyIHVjaGFyID0gdGhpcy5pdC5uZXh0KCk7CiAgICAgICAgIGlmKCF1Y2hhcil7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICB9CiAgICAgICAgIHRoaXMucmVzQnVmID0gcmVjdXJzaXZlRGVjb21wKHRoaXMuY2Fub25pY2FsLCB1Y2hhcik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucmVzQnVmLnNoaWZ0KCk7CiAgIH07CgogICB2YXIgRGVjb21wSXRlcmF0b3IgPSBmdW5jdGlvbihpdCl7CiAgICAgIHRoaXMuaXQgPSBpdDsKICAgICAgdGhpcy5yZXNCdWYgPSBbXTsKICAgfTsKCiAgIERlY29tcEl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKXsKICAgICAgdmFyIGNjOwogICAgICBpZih0aGlzLnJlc0J1Zi5sZW5ndGggPT09IDApewogICAgICAgICBkb3sKICAgICAgICAgICAgdmFyIHVjaGFyID0gdGhpcy5pdC5uZXh0KCk7CiAgICAgICAgICAgIGlmKCF1Y2hhcil7CiAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNjID0gdWNoYXIuZ2V0Q2Fub25pY2FsQ2xhc3MoKTsKICAgICAgICAgICAgdmFyIGluc3B0ID0gdGhpcy5yZXNCdWYubGVuZ3RoOwogICAgICAgICAgICBpZihjYyAhPT0gMCl7CiAgICAgICAgICAgICAgIGZvcig7IGluc3B0ID4gMDsgLS1pbnNwdCl7CiAgICAgICAgICAgICAgICAgIHZhciB1Y2hhcjIgPSB0aGlzLnJlc0J1ZltpbnNwdCAtIDFdOwogICAgICAgICAgICAgICAgICB2YXIgY2MyID0gdWNoYXIyLmdldENhbm9uaWNhbENsYXNzKCk7CiAgICAgICAgICAgICAgICAgIGlmKGNjMiA8PSBjYyl7CiAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnJlc0J1Zi5zcGxpY2UoaW5zcHQsIDAsIHVjaGFyKTsKICAgICAgICAgfSB3aGlsZShjYyAhPT0gMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucmVzQnVmLnNoaWZ0KCk7CiAgIH07CgogICB2YXIgQ29tcEl0ZXJhdG9yID0gZnVuY3Rpb24oaXQpewogICAgICB0aGlzLml0ID0gaXQ7CiAgICAgIHRoaXMucHJvY0J1ZiA9IFtdOwogICAgICB0aGlzLnJlc0J1ZiA9IFtdOwogICAgICB0aGlzLmxhc3RDbGFzcyA9IG51bGw7CiAgIH07CgogICBDb21wSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpewogICAgICB3aGlsZSh0aGlzLnJlc0J1Zi5sZW5ndGggPT09IDApewogICAgICAgICB2YXIgdWNoYXIgPSB0aGlzLml0Lm5leHQoKTsKICAgICAgICAgaWYoIXVjaGFyKXsKICAgICAgICAgICAgdGhpcy5yZXNCdWYgPSB0aGlzLnByb2NCdWY7CiAgICAgICAgICAgIHRoaXMucHJvY0J1ZiA9IFtdOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgfQogICAgICAgICBpZih0aGlzLnByb2NCdWYubGVuZ3RoID09PSAwKXsKICAgICAgICAgICAgdGhpcy5sYXN0Q2xhc3MgPSB1Y2hhci5nZXRDYW5vbmljYWxDbGFzcygpOwogICAgICAgICAgICB0aGlzLnByb2NCdWYucHVzaCh1Y2hhcik7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBzdGFydGVyID0gdGhpcy5wcm9jQnVmWzBdOwogICAgICAgICAgICB2YXIgY29tcG9zaXRlID0gc3RhcnRlci5nZXRDb21wb3NpdGUodWNoYXIpOwogICAgICAgICAgICB2YXIgY2MgPSB1Y2hhci5nZXRDYW5vbmljYWxDbGFzcygpOwogICAgICAgICAgICBpZighIWNvbXBvc2l0ZSAmJiAodGhpcy5sYXN0Q2xhc3MgPCBjYyB8fCB0aGlzLmxhc3RDbGFzcyA9PT0gMCkpewogICAgICAgICAgICAgICB0aGlzLnByb2NCdWZbMF0gPSBjb21wb3NpdGU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgIGlmKGNjID09PSAwKXsKICAgICAgICAgICAgICAgICAgdGhpcy5yZXNCdWYgPSB0aGlzLnByb2NCdWY7CiAgICAgICAgICAgICAgICAgIHRoaXMucHJvY0J1ZiA9IFtdOwogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIHRoaXMubGFzdENsYXNzID0gY2M7CiAgICAgICAgICAgICAgIHRoaXMucHJvY0J1Zi5wdXNoKHVjaGFyKTsKICAgICAgICAgICAgfQogICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucmVzQnVmLnNoaWZ0KCk7CiAgIH07CgogICB2YXIgY3JlYXRlSXRlcmF0b3IgPSBmdW5jdGlvbihtb2RlLCBzdHIpewogICAgICBzd2l0Y2gobW9kZSl7CiAgICAgICAgIGNhc2UgIk5GRCI6CiAgICAgICAgICAgIHJldHVybiBuZXcgRGVjb21wSXRlcmF0b3IobmV3IFJlY3Vyc0RlY29tcEl0ZXJhdG9yKG5ldyBVQ2hhckl0ZXJhdG9yKHN0ciksIHRydWUpKTsKICAgICAgICAgY2FzZSAiTkZLRCI6CiAgICAgICAgICAgIHJldHVybiBuZXcgRGVjb21wSXRlcmF0b3IobmV3IFJlY3Vyc0RlY29tcEl0ZXJhdG9yKG5ldyBVQ2hhckl0ZXJhdG9yKHN0ciksIGZhbHNlKSk7CiAgICAgICAgIGNhc2UgIk5GQyI6CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcEl0ZXJhdG9yKG5ldyBEZWNvbXBJdGVyYXRvcihuZXcgUmVjdXJzRGVjb21wSXRlcmF0b3IobmV3IFVDaGFySXRlcmF0b3Ioc3RyKSwgdHJ1ZSkpKTsKICAgICAgICAgY2FzZSAiTkZLQyI6CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcEl0ZXJhdG9yKG5ldyBEZWNvbXBJdGVyYXRvcihuZXcgUmVjdXJzRGVjb21wSXRlcmF0b3IobmV3IFVDaGFySXRlcmF0b3Ioc3RyKSwgZmFsc2UpKSk7CiAgICAgIH0KICAgICAgdGhyb3cgbW9kZSArICIgaXMgaW52YWxpZCI7CiAgIH07CiAgIHZhciBub3JtYWxpemUgPSBmdW5jdGlvbihtb2RlLCBzdHIpewogICAgICB2YXIgaXQgPSBjcmVhdGVJdGVyYXRvcihtb2RlLCBzdHIpOwogICAgICB2YXIgcmV0ID0gIiI7CiAgICAgIHZhciB1Y2hhcjsKICAgICAgd2hpbGUoISEodWNoYXIgPSBpdC5uZXh0KCkpKXsKICAgICAgICAgcmV0ICs9IHVjaGFyLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgfTsKCiAgIC8qIEFQSSBmdW5jdGlvbnMgKi8KICAgZnVuY3Rpb24gbmZkKHN0cil7CiAgICAgIHJldHVybiBub3JtYWxpemUoIk5GRCIsIHN0cik7CiAgIH0KCiAgIGZ1bmN0aW9uIG5ma2Qoc3RyKXsKICAgICAgcmV0dXJuIG5vcm1hbGl6ZSgiTkZLRCIsIHN0cik7CiAgIH0KCiAgIGZ1bmN0aW9uIG5mYyhzdHIpewogICAgICByZXR1cm4gbm9ybWFsaXplKCJORkMiLCBzdHIpOwogICB9CgogICBmdW5jdGlvbiBuZmtjKHN0cil7CiAgICAgIHJldHVybiBub3JtYWxpemUoIk5GS0MiLCBzdHIpOwogICB9CgovKiBVbmljb2RlIGRhdGEgKi8KVUNoYXIudWRhdGE9ewowOns2MDpbLCx7ODI0Ojg4MTR9XSw2MTpbLCx7ODI0Ojg4MDB9XSw2MjpbLCx7ODI0Ojg4MTV9XSw2NTpbLCx7NzY4OjE5Miw3Njk6MTkzLDc3MDoxOTQsNzcxOjE5NSw3NzI6MjU2LDc3NDoyNTgsNzc1OjU1MCw3NzY6MTk2LDc3Nzo3ODQyLDc3ODoxOTcsNzgwOjQ2MSw3ODM6NTEyLDc4NTo1MTQsODAzOjc4NDAsODA1Ojc2ODAsODA4OjI2MH1dLDY2OlssLHs3NzU6NzY4Miw4MDM6NzY4NCw4MTc6NzY4Nn1dLDY3OlssLHs3Njk6MjYyLDc3MDoyNjQsNzc1OjI2Niw3ODA6MjY4LDgwNzoxOTl9XSw2ODpbLCx7Nzc1Ojc2OTAsNzgwOjI3MCw4MDM6NzY5Miw4MDc6NzY5Niw4MTM6NzY5OCw4MTc6NzY5NH1dLDY5OlssLHs3Njg6MjAwLDc2OToyMDEsNzcwOjIwMiw3NzE6Nzg2OCw3NzI6Mjc0LDc3NDoyNzYsNzc1OjI3OCw3NzY6MjAzLDc3Nzo3ODY2LDc4MDoyODIsNzgzOjUxNiw3ODU6NTE4LDgwMzo3ODY0LDgwNzo1NTIsODA4OjI4MCw4MTM6NzcwNCw4MTY6NzcwNn1dLDcwOlssLHs3NzU6NzcxMH1dLDcxOlssLHs3Njk6NTAwLDc3MDoyODQsNzcyOjc3MTIsNzc0OjI4Niw3NzU6Mjg4LDc4MDo0ODYsODA3OjI5MH1dLDcyOlssLHs3NzA6MjkyLDc3NTo3NzE0LDc3Njo3NzE4LDc4MDo1NDIsODAzOjc3MTYsODA3Ojc3MjAsODE0Ojc3MjJ9XSw3MzpbLCx7NzY4OjIwNCw3Njk6MjA1LDc3MDoyMDYsNzcxOjI5Niw3NzI6Mjk4LDc3NDozMDAsNzc1OjMwNCw3NzY6MjA3LDc3Nzo3ODgwLDc4MDo0NjMsNzgzOjUyMCw3ODU6NTIyLDgwMzo3ODgyLDgwODozMDIsODE2Ojc3MjR9XSw3NDpbLCx7NzcwOjMwOH1dLDc1OlssLHs3Njk6NzcyOCw3ODA6NDg4LDgwMzo3NzMwLDgwNzozMTAsODE3Ojc3MzJ9XSw3NjpbLCx7NzY5OjMxMyw3ODA6MzE3LDgwMzo3NzM0LDgwNzozMTUsODEzOjc3NDAsODE3Ojc3Mzh9XSw3NzpbLCx7NzY5Ojc3NDIsNzc1Ojc3NDQsODAzOjc3NDZ9XSw3ODpbLCx7NzY4OjUwNCw3Njk6MzIzLDc3MToyMDksNzc1Ojc3NDgsNzgwOjMyNyw4MDM6Nzc1MCw4MDc6MzI1LDgxMzo3NzU0LDgxNzo3NzUyfV0sNzk6Wywsezc2ODoyMTAsNzY5OjIxMSw3NzA6MjEyLDc3MToyMTMsNzcyOjMzMiw3NzQ6MzM0LDc3NTo1NTgsNzc2OjIxNCw3Nzc6Nzg4Niw3Nzk6MzM2LDc4MDo0NjUsNzgzOjUyNCw3ODU6NTI2LDc5NTo0MTYsODAzOjc4ODQsODA4OjQ5MH1dLDgwOlssLHs3Njk6Nzc2NCw3NzU6Nzc2Nn1dLDgyOlssLHs3Njk6MzQwLDc3NTo3NzY4LDc4MDozNDQsNzgzOjUyOCw3ODU6NTMwLDgwMzo3NzcwLDgwNzozNDIsODE3Ojc3NzR9XSw4MzpbLCx7NzY5OjM0Niw3NzA6MzQ4LDc3NTo3Nzc2LDc4MDozNTIsODAzOjc3NzgsODA2OjUzNiw4MDc6MzUwfV0sODQ6Wywsezc3NTo3Nzg2LDc4MDozNTYsODAzOjc3ODgsODA2OjUzOCw4MDc6MzU0LDgxMzo3NzkyLDgxNzo3NzkwfV0sODU6Wywsezc2ODoyMTcsNzY5OjIxOCw3NzA6MjE5LDc3MTozNjAsNzcyOjM2Miw3NzQ6MzY0LDc3NjoyMjAsNzc3Ojc5MTAsNzc4OjM2Niw3Nzk6MzY4LDc4MDo0NjcsNzgzOjUzMiw3ODU6NTM0LDc5NTo0MzEsODAzOjc5MDgsODA0Ojc3OTQsODA4OjM3MCw4MTM6Nzc5OCw4MTY6Nzc5Nn1dLDg2OlssLHs3NzE6NzgwNCw4MDM6NzgwNn1dLDg3OlssLHs3Njg6NzgwOCw3Njk6NzgxMCw3NzA6MzcyLDc3NTo3ODE0LDc3Njo3ODEyLDgwMzo3ODE2fV0sODg6Wywsezc3NTo3ODE4LDc3Njo3ODIwfV0sODk6Wywsezc2ODo3OTIyLDc2OToyMjEsNzcwOjM3NCw3NzE6NzkyOCw3NzI6NTYyLDc3NTo3ODIyLDc3NjozNzYsNzc3Ojc5MjYsODAzOjc5MjR9XSw5MDpbLCx7NzY5OjM3Nyw3NzA6NzgyNCw3NzU6Mzc5LDc4MDozODEsODAzOjc4MjYsODE3Ojc4Mjh9XSw5NzpbLCx7NzY4OjIyNCw3Njk6MjI1LDc3MDoyMjYsNzcxOjIyNyw3NzI6MjU3LDc3NDoyNTksNzc1OjU1MSw3NzY6MjI4LDc3Nzo3ODQzLDc3ODoyMjksNzgwOjQ2Miw3ODM6NTEzLDc4NTo1MTUsODAzOjc4NDEsODA1Ojc2ODEsODA4OjI2MX1dLDk4OlssLHs3NzU6NzY4Myw4MDM6NzY4NSw4MTc6NzY4N31dLDk5OlssLHs3Njk6MjYzLDc3MDoyNjUsNzc1OjI2Nyw3ODA6MjY5LDgwNzoyMzF9XSwxMDA6Wywsezc3NTo3NjkxLDc4MDoyNzEsODAzOjc2OTMsODA3Ojc2OTcsODEzOjc2OTksODE3Ojc2OTV9XSwxMDE6Wywsezc2ODoyMzIsNzY5OjIzMyw3NzA6MjM0LDc3MTo3ODY5LDc3MjoyNzUsNzc0OjI3Nyw3NzU6Mjc5LDc3NjoyMzUsNzc3Ojc4NjcsNzgwOjI4Myw3ODM6NTE3LDc4NTo1MTksODAzOjc4NjUsODA3OjU1Myw4MDg6MjgxLDgxMzo3NzA1LDgxNjo3NzA3fV0sMTAyOlssLHs3NzU6NzcxMX1dLDEwMzpbLCx7NzY5OjUwMSw3NzA6Mjg1LDc3Mjo3NzEzLDc3NDoyODcsNzc1OjI4OSw3ODA6NDg3LDgwNzoyOTF9XSwxMDQ6Wywsezc3MDoyOTMsNzc1Ojc3MTUsNzc2Ojc3MTksNzgwOjU0Myw4MDM6NzcxNyw4MDc6NzcyMSw4MTQ6NzcyMyw4MTc6NzgzMH1dLDEwNTpbLCx7NzY4OjIzNiw3Njk6MjM3LDc3MDoyMzgsNzcxOjI5Nyw3NzI6Mjk5LDc3NDozMDEsNzc2OjIzOSw3Nzc6Nzg4MSw3ODA6NDY0LDc4Mzo1MjEsNzg1OjUyMyw4MDM6Nzg4Myw4MDg6MzAzLDgxNjo3NzI1fV0sMTA2OlssLHs3NzA6MzA5LDc4MDo0OTZ9XSwxMDc6Wywsezc2OTo3NzI5LDc4MDo0ODksODAzOjc3MzEsODA3OjMxMSw4MTc6NzczM31dLDEwODpbLCx7NzY5OjMxNCw3ODA6MzE4LDgwMzo3NzM1LDgwNzozMTYsODEzOjc3NDEsODE3Ojc3Mzl9XSwxMDk6Wywsezc2OTo3NzQzLDc3NTo3NzQ1LDgwMzo3NzQ3fV0sMTEwOlssLHs3Njg6NTA1LDc2OTozMjQsNzcxOjI0MSw3NzU6Nzc0OSw3ODA6MzI4LDgwMzo3NzUxLDgwNzozMjYsODEzOjc3NTUsODE3Ojc3NTN9XSwxMTE6Wywsezc2ODoyNDIsNzY5OjI0Myw3NzA6MjQ0LDc3MToyNDUsNzcyOjMzMyw3NzQ6MzM1LDc3NTo1NTksNzc2OjI0Niw3Nzc6Nzg4Nyw3Nzk6MzM3LDc4MDo0NjYsNzgzOjUyNSw3ODU6NTI3LDc5NTo0MTcsODAzOjc4ODUsODA4OjQ5MX1dLDExMjpbLCx7NzY5Ojc3NjUsNzc1Ojc3Njd9XSwxMTQ6Wywsezc2OTozNDEsNzc1Ojc3NjksNzgwOjM0NSw3ODM6NTI5LDc4NTo1MzEsODAzOjc3NzEsODA3OjM0Myw4MTc6Nzc3NX1dLDExNTpbLCx7NzY5OjM0Nyw3NzA6MzQ5LDc3NTo3Nzc3LDc4MDozNTMsODAzOjc3NzksODA2OjUzNyw4MDc6MzUxfV0sMTE2OlssLHs3NzU6Nzc4Nyw3NzY6NzgzMSw3ODA6MzU3LDgwMzo3Nzg5LDgwNjo1MzksODA3OjM1NSw4MTM6Nzc5Myw4MTc6Nzc5MX1dLDExNzpbLCx7NzY4OjI0OSw3Njk6MjUwLDc3MDoyNTEsNzcxOjM2MSw3NzI6MzYzLDc3NDozNjUsNzc2OjI1Miw3Nzc6NzkxMSw3Nzg6MzY3LDc3OTozNjksNzgwOjQ2OCw3ODM6NTMzLDc4NTo1MzUsNzk1OjQzMiw4MDM6NzkwOSw4MDQ6Nzc5NSw4MDg6MzcxLDgxMzo3Nzk5LDgxNjo3Nzk3fV0sMTE4OlssLHs3NzE6NzgwNSw4MDM6NzgwN31dLDExOTpbLCx7NzY4Ojc4MDksNzY5Ojc4MTEsNzcwOjM3Myw3NzU6NzgxNSw3NzY6NzgxMyw3Nzg6NzgzMiw4MDM6NzgxN31dLDEyMDpbLCx7Nzc1Ojc4MTksNzc2Ojc4MjF9XSwxMjE6Wywsezc2ODo3OTIzLDc2OToyNTMsNzcwOjM3NSw3NzE6NzkyOSw3NzI6NTYzLDc3NTo3ODIzLDc3NjoyNTUsNzc3Ojc5MjcsNzc4Ojc4MzMsODAzOjc5MjV9XSwxMjI6Wywsezc2OTozNzgsNzcwOjc4MjUsNzc1OjM4MCw3ODA6MzgyLDgwMzo3ODI3LDgxNzo3ODI5fV0sMTYwOltbMzJdLDI1Nl0sMTY4OltbMzIsNzc2XSwyNTYsezc2ODo4MTczLDc2OTo5MDEsODM0OjgxMjl9XSwxNzA6W1s5N10sMjU2XSwxNzU6W1szMiw3NzJdLDI1Nl0sMTc4OltbNTBdLDI1Nl0sMTc5OltbNTFdLDI1Nl0sMTgwOltbMzIsNzY5XSwyNTZdLDE4MTpbWzk1Nl0sMjU2XSwxODQ6W1szMiw4MDddLDI1Nl0sMTg1OltbNDldLDI1Nl0sMTg2OltbMTExXSwyNTZdLDE4ODpbWzQ5LDgyNjAsNTJdLDI1Nl0sMTg5OltbNDksODI2MCw1MF0sMjU2XSwxOTA6W1s1MSw4MjYwLDUyXSwyNTZdLDE5MjpbWzY1LDc2OF1dLDE5MzpbWzY1LDc2OV1dLDE5NDpbWzY1LDc3MF0sLHs3Njg6Nzg0Niw3Njk6Nzg0NCw3NzE6Nzg1MCw3Nzc6Nzg0OH1dLDE5NTpbWzY1LDc3MV1dLDE5NjpbWzY1LDc3Nl0sLHs3NzI6NDc4fV0sMTk3OltbNjUsNzc4XSwsezc2OTo1MDZ9XSwxOTg6Wywsezc2OTo1MDgsNzcyOjQ4Mn1dLDE5OTpbWzY3LDgwN10sLHs3Njk6NzY4OH1dLDIwMDpbWzY5LDc2OF1dLDIwMTpbWzY5LDc2OV1dLDIwMjpbWzY5LDc3MF0sLHs3Njg6Nzg3Miw3Njk6Nzg3MCw3NzE6Nzg3Niw3Nzc6Nzg3NH1dLDIwMzpbWzY5LDc3Nl1dLDIwNDpbWzczLDc2OF1dLDIwNTpbWzczLDc2OV1dLDIwNjpbWzczLDc3MF1dLDIwNzpbWzczLDc3Nl0sLHs3Njk6NzcyNn1dLDIwOTpbWzc4LDc3MV1dLDIxMDpbWzc5LDc2OF1dLDIxMTpbWzc5LDc2OV1dLDIxMjpbWzc5LDc3MF0sLHs3Njg6Nzg5MCw3Njk6Nzg4OCw3NzE6Nzg5NCw3Nzc6Nzg5Mn1dLDIxMzpbWzc5LDc3MV0sLHs3Njk6Nzc1Niw3NzI6NTU2LDc3Njo3NzU4fV0sMjE0OltbNzksNzc2XSwsezc3Mjo1NTR9XSwyMTY6Wywsezc2OTo1MTB9XSwyMTc6W1s4NSw3NjhdXSwyMTg6W1s4NSw3NjldXSwyMTk6W1s4NSw3NzBdXSwyMjA6W1s4NSw3NzZdLCx7NzY4OjQ3NSw3Njk6NDcxLDc3Mjo0NjksNzgwOjQ3M31dLDIyMTpbWzg5LDc2OV1dLDIyNDpbWzk3LDc2OF1dLDIyNTpbWzk3LDc2OV1dLDIyNjpbWzk3LDc3MF0sLHs3Njg6Nzg0Nyw3Njk6Nzg0NSw3NzE6Nzg1MSw3Nzc6Nzg0OX1dLDIyNzpbWzk3LDc3MV1dLDIyODpbWzk3LDc3Nl0sLHs3NzI6NDc5fV0sMjI5OltbOTcsNzc4XSwsezc2OTo1MDd9XSwyMzA6Wywsezc2OTo1MDksNzcyOjQ4M31dLDIzMTpbWzk5LDgwN10sLHs3Njk6NzY4OX1dLDIzMjpbWzEwMSw3NjhdXSwyMzM6W1sxMDEsNzY5XV0sMjM0OltbMTAxLDc3MF0sLHs3Njg6Nzg3Myw3Njk6Nzg3MSw3NzE6Nzg3Nyw3Nzc6Nzg3NX1dLDIzNTpbWzEwMSw3NzZdXSwyMzY6W1sxMDUsNzY4XV0sMjM3OltbMTA1LDc2OV1dLDIzODpbWzEwNSw3NzBdXSwyMzk6W1sxMDUsNzc2XSwsezc2OTo3NzI3fV0sMjQxOltbMTEwLDc3MV1dLDI0MjpbWzExMSw3NjhdXSwyNDM6W1sxMTEsNzY5XV0sMjQ0OltbMTExLDc3MF0sLHs3Njg6Nzg5MSw3Njk6Nzg4OSw3NzE6Nzg5NSw3Nzc6Nzg5M31dLDI0NTpbWzExMSw3NzFdLCx7NzY5Ojc3NTcsNzcyOjU1Nyw3NzY6Nzc1OX1dLDI0NjpbWzExMSw3NzZdLCx7NzcyOjU1NX1dLDI0ODpbLCx7NzY5OjUxMX1dLDI0OTpbWzExNyw3NjhdXSwyNTA6W1sxMTcsNzY5XV0sMjUxOltbMTE3LDc3MF1dLDI1MjpbWzExNyw3NzZdLCx7NzY4OjQ3Niw3Njk6NDcyLDc3Mjo0NzAsNzgwOjQ3NH1dLDI1MzpbWzEyMSw3NjldXSwyNTU6W1sxMjEsNzc2XV19LAoyNTY6ezI1NjpbWzY1LDc3Ml1dLDI1NzpbWzk3LDc3Ml1dLDI1ODpbWzY1LDc3NF0sLHs3Njg6Nzg1Niw3Njk6Nzg1NCw3NzE6Nzg2MCw3Nzc6Nzg1OH1dLDI1OTpbWzk3LDc3NF0sLHs3Njg6Nzg1Nyw3Njk6Nzg1NSw3NzE6Nzg2MSw3Nzc6Nzg1OX1dLDI2MDpbWzY1LDgwOF1dLDI2MTpbWzk3LDgwOF1dLDI2MjpbWzY3LDc2OV1dLDI2MzpbWzk5LDc2OV1dLDI2NDpbWzY3LDc3MF1dLDI2NTpbWzk5LDc3MF1dLDI2NjpbWzY3LDc3NV1dLDI2NzpbWzk5LDc3NV1dLDI2ODpbWzY3LDc4MF1dLDI2OTpbWzk5LDc4MF1dLDI3MDpbWzY4LDc4MF1dLDI3MTpbWzEwMCw3ODBdXSwyNzQ6W1s2OSw3NzJdLCx7NzY4Ojc3MDAsNzY5Ojc3MDJ9XSwyNzU6W1sxMDEsNzcyXSwsezc2ODo3NzAxLDc2OTo3NzAzfV0sMjc2OltbNjksNzc0XV0sMjc3OltbMTAxLDc3NF1dLDI3ODpbWzY5LDc3NV1dLDI3OTpbWzEwMSw3NzVdXSwyODA6W1s2OSw4MDhdXSwyODE6W1sxMDEsODA4XV0sMjgyOltbNjksNzgwXV0sMjgzOltbMTAxLDc4MF1dLDI4NDpbWzcxLDc3MF1dLDI4NTpbWzEwMyw3NzBdXSwyODY6W1s3MSw3NzRdXSwyODc6W1sxMDMsNzc0XV0sMjg4OltbNzEsNzc1XV0sMjg5OltbMTAzLDc3NV1dLDI5MDpbWzcxLDgwN11dLDI5MTpbWzEwMyw4MDddXSwyOTI6W1s3Miw3NzBdXSwyOTM6W1sxMDQsNzcwXV0sMjk2OltbNzMsNzcxXV0sMjk3OltbMTA1LDc3MV1dLDI5ODpbWzczLDc3Ml1dLDI5OTpbWzEwNSw3NzJdXSwzMDA6W1s3Myw3NzRdXSwzMDE6W1sxMDUsNzc0XV0sMzAyOltbNzMsODA4XV0sMzAzOltbMTA1LDgwOF1dLDMwNDpbWzczLDc3NV1dLDMwNjpbWzczLDc0XSwyNTZdLDMwNzpbWzEwNSwxMDZdLDI1Nl0sMzA4OltbNzQsNzcwXV0sMzA5OltbMTA2LDc3MF1dLDMxMDpbWzc1LDgwN11dLDMxMTpbWzEwNyw4MDddXSwzMTM6W1s3Niw3NjldXSwzMTQ6W1sxMDgsNzY5XV0sMzE1OltbNzYsODA3XV0sMzE2OltbMTA4LDgwN11dLDMxNzpbWzc2LDc4MF1dLDMxODpbWzEwOCw3ODBdXSwzMTk6W1s3NiwxODNdLDI1Nl0sMzIwOltbMTA4LDE4M10sMjU2XSwzMjM6W1s3OCw3NjldXSwzMjQ6W1sxMTAsNzY5XV0sMzI1OltbNzgsODA3XV0sMzI2OltbMTEwLDgwN11dLDMyNzpbWzc4LDc4MF1dLDMyODpbWzExMCw3ODBdXSwzMjk6W1s3MDAsMTEwXSwyNTZdLDMzMjpbWzc5LDc3Ml0sLHs3Njg6Nzc2MCw3Njk6Nzc2Mn1dLDMzMzpbWzExMSw3NzJdLCx7NzY4Ojc3NjEsNzY5Ojc3NjN9XSwzMzQ6W1s3OSw3NzRdXSwzMzU6W1sxMTEsNzc0XV0sMzM2OltbNzksNzc5XV0sMzM3OltbMTExLDc3OV1dLDM0MDpbWzgyLDc2OV1dLDM0MTpbWzExNCw3NjldXSwzNDI6W1s4Miw4MDddXSwzNDM6W1sxMTQsODA3XV0sMzQ0OltbODIsNzgwXV0sMzQ1OltbMTE0LDc4MF1dLDM0NjpbWzgzLDc2OV0sLHs3NzU6Nzc4MH1dLDM0NzpbWzExNSw3NjldLCx7Nzc1Ojc3ODF9XSwzNDg6W1s4Myw3NzBdXSwzNDk6W1sxMTUsNzcwXV0sMzUwOltbODMsODA3XV0sMzUxOltbMTE1LDgwN11dLDM1MjpbWzgzLDc4MF0sLHs3NzU6Nzc4Mn1dLDM1MzpbWzExNSw3ODBdLCx7Nzc1Ojc3ODN9XSwzNTQ6W1s4NCw4MDddXSwzNTU6W1sxMTYsODA3XV0sMzU2OltbODQsNzgwXV0sMzU3OltbMTE2LDc4MF1dLDM2MDpbWzg1LDc3MV0sLHs3Njk6NzgwMH1dLDM2MTpbWzExNyw3NzFdLCx7NzY5Ojc4MDF9XSwzNjI6W1s4NSw3NzJdLCx7Nzc2Ojc4MDJ9XSwzNjM6W1sxMTcsNzcyXSwsezc3Njo3ODAzfV0sMzY0OltbODUsNzc0XV0sMzY1OltbMTE3LDc3NF1dLDM2NjpbWzg1LDc3OF1dLDM2NzpbWzExNyw3NzhdXSwzNjg6W1s4NSw3NzldXSwzNjk6W1sxMTcsNzc5XV0sMzcwOltbODUsODA4XV0sMzcxOltbMTE3LDgwOF1dLDM3MjpbWzg3LDc3MF1dLDM3MzpbWzExOSw3NzBdXSwzNzQ6W1s4OSw3NzBdXSwzNzU6W1sxMjEsNzcwXV0sMzc2OltbODksNzc2XV0sMzc3OltbOTAsNzY5XV0sMzc4OltbMTIyLDc2OV1dLDM3OTpbWzkwLDc3NV1dLDM4MDpbWzEyMiw3NzVdXSwzODE6W1s5MCw3ODBdXSwzODI6W1sxMjIsNzgwXV0sMzgzOltbMTE1XSwyNTYsezc3NTo3ODM1fV0sNDE2OltbNzksNzk1XSwsezc2ODo3OTAwLDc2OTo3ODk4LDc3MTo3OTA0LDc3Nzo3OTAyLDgwMzo3OTA2fV0sNDE3OltbMTExLDc5NV0sLHs3Njg6NzkwMSw3Njk6Nzg5OSw3NzE6NzkwNSw3Nzc6NzkwMyw4MDM6NzkwN31dLDQzMTpbWzg1LDc5NV0sLHs3Njg6NzkxNCw3Njk6NzkxMiw3NzE6NzkxOCw3Nzc6NzkxNiw4MDM6NzkyMH1dLDQzMjpbWzExNyw3OTVdLCx7NzY4Ojc5MTUsNzY5Ojc5MTMsNzcxOjc5MTksNzc3Ojc5MTcsODAzOjc5MjF9XSw0Mzk6Wywsezc4MDo0OTR9XSw0NTI6W1s2OCwzODFdLDI1Nl0sNDUzOltbNjgsMzgyXSwyNTZdLDQ1NDpbWzEwMCwzODJdLDI1Nl0sNDU1OltbNzYsNzRdLDI1Nl0sNDU2OltbNzYsMTA2XSwyNTZdLDQ1NzpbWzEwOCwxMDZdLDI1Nl0sNDU4OltbNzgsNzRdLDI1Nl0sNDU5OltbNzgsMTA2XSwyNTZdLDQ2MDpbWzExMCwxMDZdLDI1Nl0sNDYxOltbNjUsNzgwXV0sNDYyOltbOTcsNzgwXV0sNDYzOltbNzMsNzgwXV0sNDY0OltbMTA1LDc4MF1dLDQ2NTpbWzc5LDc4MF1dLDQ2NjpbWzExMSw3ODBdXSw0Njc6W1s4NSw3ODBdXSw0Njg6W1sxMTcsNzgwXV0sNDY5OltbMjIwLDc3Ml1dLDQ3MDpbWzI1Miw3NzJdXSw0NzE6W1syMjAsNzY5XV0sNDcyOltbMjUyLDc2OV1dLDQ3MzpbWzIyMCw3ODBdXSw0NzQ6W1syNTIsNzgwXV0sNDc1OltbMjIwLDc2OF1dLDQ3NjpbWzI1Miw3NjhdXSw0Nzg6W1sxOTYsNzcyXV0sNDc5OltbMjI4LDc3Ml1dLDQ4MDpbWzU1MCw3NzJdXSw0ODE6W1s1NTEsNzcyXV0sNDgyOltbMTk4LDc3Ml1dLDQ4MzpbWzIzMCw3NzJdXSw0ODY6W1s3MSw3ODBdXSw0ODc6W1sxMDMsNzgwXV0sNDg4OltbNzUsNzgwXV0sNDg5OltbMTA3LDc4MF1dLDQ5MDpbWzc5LDgwOF0sLHs3NzI6NDkyfV0sNDkxOltbMTExLDgwOF0sLHs3NzI6NDkzfV0sNDkyOltbNDkwLDc3Ml1dLDQ5MzpbWzQ5MSw3NzJdXSw0OTQ6W1s0MzksNzgwXV0sNDk1OltbNjU4LDc4MF1dLDQ5NjpbWzEwNiw3ODBdXSw0OTc6W1s2OCw5MF0sMjU2XSw0OTg6W1s2OCwxMjJdLDI1Nl0sNDk5OltbMTAwLDEyMl0sMjU2XSw1MDA6W1s3MSw3NjldXSw1MDE6W1sxMDMsNzY5XV0sNTA0OltbNzgsNzY4XV0sNTA1OltbMTEwLDc2OF1dLDUwNjpbWzE5Nyw3NjldXSw1MDc6W1syMjksNzY5XV0sNTA4OltbMTk4LDc2OV1dLDUwOTpbWzIzMCw3NjldXSw1MTA6W1syMTYsNzY5XV0sNTExOltbMjQ4LDc2OV1dLDY2MDQ1OlssMjIwXX0sCjUxMjp7NTEyOltbNjUsNzgzXV0sNTEzOltbOTcsNzgzXV0sNTE0OltbNjUsNzg1XV0sNTE1OltbOTcsNzg1XV0sNTE2OltbNjksNzgzXV0sNTE3OltbMTAxLDc4M11dLDUxODpbWzY5LDc4NV1dLDUxOTpbWzEwMSw3ODVdXSw1MjA6W1s3Myw3ODNdXSw1MjE6W1sxMDUsNzgzXV0sNTIyOltbNzMsNzg1XV0sNTIzOltbMTA1LDc4NV1dLDUyNDpbWzc5LDc4M11dLDUyNTpbWzExMSw3ODNdXSw1MjY6W1s3OSw3ODVdXSw1Mjc6W1sxMTEsNzg1XV0sNTI4OltbODIsNzgzXV0sNTI5OltbMTE0LDc4M11dLDUzMDpbWzgyLDc4NV1dLDUzMTpbWzExNCw3ODVdXSw1MzI6W1s4NSw3ODNdXSw1MzM6W1sxMTcsNzgzXV0sNTM0OltbODUsNzg1XV0sNTM1OltbMTE3LDc4NV1dLDUzNjpbWzgzLDgwNl1dLDUzNzpbWzExNSw4MDZdXSw1Mzg6W1s4NCw4MDZdXSw1Mzk6W1sxMTYsODA2XV0sNTQyOltbNzIsNzgwXV0sNTQzOltbMTA0LDc4MF1dLDU1MDpbWzY1LDc3NV0sLHs3NzI6NDgwfV0sNTUxOltbOTcsNzc1XSwsezc3Mjo0ODF9XSw1NTI6W1s2OSw4MDddLCx7Nzc0Ojc3MDh9XSw1NTM6W1sxMDEsODA3XSwsezc3NDo3NzA5fV0sNTU0OltbMjE0LDc3Ml1dLDU1NTpbWzI0Niw3NzJdXSw1NTY6W1syMTMsNzcyXV0sNTU3OltbMjQ1LDc3Ml1dLDU1ODpbWzc5LDc3NV0sLHs3NzI6NTYwfV0sNTU5OltbMTExLDc3NV0sLHs3NzI6NTYxfV0sNTYwOltbNTU4LDc3Ml1dLDU2MTpbWzU1OSw3NzJdXSw1NjI6W1s4OSw3NzJdXSw1NjM6W1sxMjEsNzcyXV0sNjU4OlssLHs3ODA6NDk1fV0sNjg4OltbMTA0XSwyNTZdLDY4OTpbWzYxNF0sMjU2XSw2OTA6W1sxMDZdLDI1Nl0sNjkxOltbMTE0XSwyNTZdLDY5MjpbWzYzM10sMjU2XSw2OTM6W1s2MzVdLDI1Nl0sNjk0OltbNjQxXSwyNTZdLDY5NTpbWzExOV0sMjU2XSw2OTY6W1sxMjFdLDI1Nl0sNzI4OltbMzIsNzc0XSwyNTZdLDcyOTpbWzMyLDc3NV0sMjU2XSw3MzA6W1szMiw3NzhdLDI1Nl0sNzMxOltbMzIsODA4XSwyNTZdLDczMjpbWzMyLDc3MV0sMjU2XSw3MzM6W1szMiw3NzldLDI1Nl0sNzM2OltbNjExXSwyNTZdLDczNzpbWzEwOF0sMjU2XSw3Mzg6W1sxMTVdLDI1Nl0sNzM5OltbMTIwXSwyNTZdLDc0MDpbWzY2MV0sMjU2XSw2NjI3MjpbLDIyMF19LAo3Njg6ezc2ODpbLDIzMF0sNzY5OlssMjMwXSw3NzA6WywyMzBdLDc3MTpbLDIzMF0sNzcyOlssMjMwXSw3NzM6WywyMzBdLDc3NDpbLDIzMF0sNzc1OlssMjMwXSw3NzY6WywyMzAsezc2OTo4MzZ9XSw3Nzc6WywyMzBdLDc3ODpbLDIzMF0sNzc5OlssMjMwXSw3ODA6WywyMzBdLDc4MTpbLDIzMF0sNzgyOlssMjMwXSw3ODM6WywyMzBdLDc4NDpbLDIzMF0sNzg1OlssMjMwXSw3ODY6WywyMzBdLDc4NzpbLDIzMF0sNzg4OlssMjMwXSw3ODk6WywyMzJdLDc5MDpbLDIyMF0sNzkxOlssMjIwXSw3OTI6WywyMjBdLDc5MzpbLDIyMF0sNzk0OlssMjMyXSw3OTU6WywyMTZdLDc5NjpbLDIyMF0sNzk3OlssMjIwXSw3OTg6WywyMjBdLDc5OTpbLDIyMF0sODAwOlssMjIwXSw4MDE6WywyMDJdLDgwMjpbLDIwMl0sODAzOlssMjIwXSw4MDQ6WywyMjBdLDgwNTpbLDIyMF0sODA2OlssMjIwXSw4MDc6WywyMDJdLDgwODpbLDIwMl0sODA5OlssMjIwXSw4MTA6WywyMjBdLDgxMTpbLDIyMF0sODEyOlssMjIwXSw4MTM6WywyMjBdLDgxNDpbLDIyMF0sODE1OlssMjIwXSw4MTY6WywyMjBdLDgxNzpbLDIyMF0sODE4OlssMjIwXSw4MTk6WywyMjBdLDgyMDpbLDFdLDgyMTpbLDFdLDgyMjpbLDFdLDgyMzpbLDFdLDgyNDpbLDFdLDgyNTpbLDIyMF0sODI2OlssMjIwXSw4Mjc6WywyMjBdLDgyODpbLDIyMF0sODI5OlssMjMwXSw4MzA6WywyMzBdLDgzMTpbLDIzMF0sODMyOltbNzY4XSwyMzBdLDgzMzpbWzc2OV0sMjMwXSw4MzQ6WywyMzBdLDgzNTpbWzc4N10sMjMwXSw4MzY6W1s3NzYsNzY5XSwyMzBdLDgzNzpbLDI0MF0sODM4OlssMjMwXSw4Mzk6WywyMjBdLDg0MDpbLDIyMF0sODQxOlssMjIwXSw4NDI6WywyMzBdLDg0MzpbLDIzMF0sODQ0OlssMjMwXSw4NDU6WywyMjBdLDg0NjpbLDIyMF0sODQ4OlssMjMwXSw4NDk6WywyMzBdLDg1MDpbLDIzMF0sODUxOlssMjIwXSw4NTI6WywyMjBdLDg1MzpbLDIyMF0sODU0OlssMjIwXSw4NTU6WywyMzBdLDg1NjpbLDIzMl0sODU3OlssMjIwXSw4NTg6WywyMjBdLDg1OTpbLDIzMF0sODYwOlssMjMzXSw4NjE6WywyMzRdLDg2MjpbLDIzNF0sODYzOlssMjMzXSw4NjQ6WywyMzRdLDg2NTpbLDIzNF0sODY2OlssMjMzXSw4Njc6WywyMzBdLDg2ODpbLDIzMF0sODY5OlssMjMwXSw4NzA6WywyMzBdLDg3MTpbLDIzMF0sODcyOlssMjMwXSw4NzM6WywyMzBdLDg3NDpbLDIzMF0sODc1OlssMjMwXSw4NzY6WywyMzBdLDg3NzpbLDIzMF0sODc4OlssMjMwXSw4Nzk6WywyMzBdLDg4NDpbWzY5N11dLDg5MDpbWzMyLDgzN10sMjU2XSw4OTQ6W1s1OV1dLDkwMDpbWzMyLDc2OV0sMjU2XSw5MDE6W1sxNjgsNzY5XV0sOTAyOltbOTEzLDc2OV1dLDkwMzpbWzE4M11dLDkwNDpbWzkxNyw3NjldXSw5MDU6W1s5MTksNzY5XV0sOTA2OltbOTIxLDc2OV1dLDkwODpbWzkyNyw3NjldXSw5MTA6W1s5MzMsNzY5XV0sOTExOltbOTM3LDc2OV1dLDkxMjpbWzk3MCw3NjldXSw5MTM6Wywsezc2ODo4MTIyLDc2OTo5MDIsNzcyOjgxMjEsNzc0OjgxMjAsNzg3Ojc5NDQsNzg4Ojc5NDUsODM3OjgxMjR9XSw5MTc6Wywsezc2ODo4MTM2LDc2OTo5MDQsNzg3Ojc5NjAsNzg4Ojc5NjF9XSw5MTk6Wywsezc2ODo4MTM4LDc2OTo5MDUsNzg3Ojc5NzYsNzg4Ojc5NzcsODM3OjgxNDB9XSw5MjE6Wywsezc2ODo4MTU0LDc2OTo5MDYsNzcyOjgxNTMsNzc0OjgxNTIsNzc2OjkzOCw3ODc6Nzk5Miw3ODg6Nzk5M31dLDkyNzpbLCx7NzY4OjgxODQsNzY5OjkwOCw3ODc6ODAwOCw3ODg6ODAwOX1dLDkyOTpbLCx7Nzg4OjgxNzJ9XSw5MzM6Wywsezc2ODo4MTcwLDc2OTo5MTAsNzcyOjgxNjksNzc0OjgxNjgsNzc2OjkzOSw3ODg6ODAyNX1dLDkzNzpbLCx7NzY4OjgxODYsNzY5OjkxMSw3ODc6ODA0MCw3ODg6ODA0MSw4Mzc6ODE4OH1dLDkzODpbWzkyMSw3NzZdXSw5Mzk6W1s5MzMsNzc2XV0sOTQwOltbOTQ1LDc2OV0sLHs4Mzc6ODExNn1dLDk0MTpbWzk0OSw3NjldXSw5NDI6W1s5NTEsNzY5XSwsezgzNzo4MTMyfV0sOTQzOltbOTUzLDc2OV1dLDk0NDpbWzk3MSw3NjldXSw5NDU6Wywsezc2ODo4MDQ4LDc2OTo5NDAsNzcyOjgxMTMsNzc0OjgxMTIsNzg3Ojc5MzYsNzg4Ojc5MzcsODM0OjgxMTgsODM3OjgxMTV9XSw5NDk6Wywsezc2ODo4MDUwLDc2OTo5NDEsNzg3Ojc5NTIsNzg4Ojc5NTN9XSw5NTE6Wywsezc2ODo4MDUyLDc2OTo5NDIsNzg3Ojc5NjgsNzg4Ojc5NjksODM0OjgxMzQsODM3OjgxMzF9XSw5NTM6Wywsezc2ODo4MDU0LDc2OTo5NDMsNzcyOjgxNDUsNzc0OjgxNDQsNzc2Ojk3MCw3ODc6Nzk4NCw3ODg6Nzk4NSw4MzQ6ODE1MH1dLDk1OTpbLCx7NzY4OjgwNTYsNzY5Ojk3Miw3ODc6ODAwMCw3ODg6ODAwMX1dLDk2MTpbLCx7Nzg3OjgxNjQsNzg4OjgxNjV9XSw5NjU6Wywsezc2ODo4MDU4LDc2OTo5NzMsNzcyOjgxNjEsNzc0OjgxNjAsNzc2Ojk3MSw3ODc6ODAxNiw3ODg6ODAxNyw4MzQ6ODE2Nn1dLDk2OTpbLCx7NzY4OjgwNjAsNzY5Ojk3NCw3ODc6ODAzMiw3ODg6ODAzMyw4MzQ6ODE4Miw4Mzc6ODE3OX1dLDk3MDpbWzk1Myw3NzZdLCx7NzY4OjgxNDYsNzY5OjkxMiw4MzQ6ODE1MX1dLDk3MTpbWzk2NSw3NzZdLCx7NzY4OjgxNjIsNzY5Ojk0NCw4MzQ6ODE2N31dLDk3MjpbWzk1OSw3NjldXSw5NzM6W1s5NjUsNzY5XV0sOTc0OltbOTY5LDc2OV0sLHs4Mzc6ODE4MH1dLDk3NjpbWzk0Nl0sMjU2XSw5Nzc6W1s5NTJdLDI1Nl0sOTc4OltbOTMzXSwyNTYsezc2OTo5NzksNzc2Ojk4MH1dLDk3OTpbWzk3OCw3NjldXSw5ODA6W1s5NzgsNzc2XV0sOTgxOltbOTY2XSwyNTZdLDk4MjpbWzk2MF0sMjU2XSwxMDA4OltbOTU0XSwyNTZdLDEwMDk6W1s5NjFdLDI1Nl0sMTAxMDpbWzk2Ml0sMjU2XSwxMDEyOltbOTIwXSwyNTZdLDEwMTM6W1s5NDldLDI1Nl0sMTAxNzpbWzkzMV0sMjU2XSw2NjQyMjpbLDIzMF0sNjY0MjM6WywyMzBdLDY2NDI0OlssMjMwXSw2NjQyNTpbLDIzMF0sNjY0MjY6WywyMzBdfSwKMTAyNDp7MTAyNDpbWzEwNDUsNzY4XV0sMTAyNTpbWzEwNDUsNzc2XV0sMTAyNzpbWzEwNDMsNzY5XV0sMTAzMDpbLCx7Nzc2OjEwMzF9XSwxMDMxOltbMTAzMCw3NzZdXSwxMDM2OltbMTA1MCw3NjldXSwxMDM3OltbMTA0OCw3NjhdXSwxMDM4OltbMTA1OSw3NzRdXSwxMDQwOlssLHs3NzQ6MTIzMiw3NzY6MTIzNH1dLDEwNDM6Wywsezc2OToxMDI3fV0sMTA0NTpbLCx7NzY4OjEwMjQsNzc0OjEyMzgsNzc2OjEwMjV9XSwxMDQ2OlssLHs3NzQ6MTIxNyw3NzY6MTI0NH1dLDEwNDc6Wywsezc3NjoxMjQ2fV0sMTA0ODpbLCx7NzY4OjEwMzcsNzcyOjEyNTAsNzc0OjEwNDksNzc2OjEyNTJ9XSwxMDQ5OltbMTA0OCw3NzRdXSwxMDUwOlssLHs3Njk6MTAzNn1dLDEwNTQ6Wywsezc3NjoxMjU0fV0sMTA1OTpbLCx7NzcyOjEyNjIsNzc0OjEwMzgsNzc2OjEyNjQsNzc5OjEyNjZ9XSwxMDYzOlssLHs3NzY6MTI2OH1dLDEwNjc6Wywsezc3NjoxMjcyfV0sMTA2OTpbLCx7Nzc2OjEyNjB9XSwxMDcyOlssLHs3NzQ6MTIzMyw3NzY6MTIzNX1dLDEwNzU6Wywsezc2OToxMTA3fV0sMTA3NzpbLCx7NzY4OjExMDQsNzc0OjEyMzksNzc2OjExMDV9XSwxMDc4OlssLHs3NzQ6MTIxOCw3NzY6MTI0NX1dLDEwNzk6Wywsezc3NjoxMjQ3fV0sMTA4MDpbLCx7NzY4OjExMTcsNzcyOjEyNTEsNzc0OjEwODEsNzc2OjEyNTN9XSwxMDgxOltbMTA4MCw3NzRdXSwxMDgyOlssLHs3Njk6MTExNn1dLDEwODY6Wywsezc3NjoxMjU1fV0sMTA5MTpbLCx7NzcyOjEyNjMsNzc0OjExMTgsNzc2OjEyNjUsNzc5OjEyNjd9XSwxMDk1OlssLHs3NzY6MTI2OX1dLDEwOTk6Wywsezc3NjoxMjczfV0sMTEwMTpbLCx7Nzc2OjEyNjF9XSwxMTA0OltbMTA3Nyw3NjhdXSwxMTA1OltbMTA3Nyw3NzZdXSwxMTA3OltbMTA3NSw3NjldXSwxMTEwOlssLHs3NzY6MTExMX1dLDExMTE6W1sxMTEwLDc3Nl1dLDExMTY6W1sxMDgyLDc2OV1dLDExMTc6W1sxMDgwLDc2OF1dLDExMTg6W1sxMDkxLDc3NF1dLDExNDA6Wywsezc4MzoxMTQyfV0sMTE0MTpbLCx7NzgzOjExNDN9XSwxMTQyOltbMTE0MCw3ODNdXSwxMTQzOltbMTE0MSw3ODNdXSwxMTU1OlssMjMwXSwxMTU2OlssMjMwXSwxMTU3OlssMjMwXSwxMTU4OlssMjMwXSwxMTU5OlssMjMwXSwxMjE3OltbMTA0Niw3NzRdXSwxMjE4OltbMTA3OCw3NzRdXSwxMjMyOltbMTA0MCw3NzRdXSwxMjMzOltbMTA3Miw3NzRdXSwxMjM0OltbMTA0MCw3NzZdXSwxMjM1OltbMTA3Miw3NzZdXSwxMjM4OltbMTA0NSw3NzRdXSwxMjM5OltbMTA3Nyw3NzRdXSwxMjQwOlssLHs3NzY6MTI0Mn1dLDEyNDE6Wywsezc3NjoxMjQzfV0sMTI0MjpbWzEyNDAsNzc2XV0sMTI0MzpbWzEyNDEsNzc2XV0sMTI0NDpbWzEwNDYsNzc2XV0sMTI0NTpbWzEwNzgsNzc2XV0sMTI0NjpbWzEwNDcsNzc2XV0sMTI0NzpbWzEwNzksNzc2XV0sMTI1MDpbWzEwNDgsNzcyXV0sMTI1MTpbWzEwODAsNzcyXV0sMTI1MjpbWzEwNDgsNzc2XV0sMTI1MzpbWzEwODAsNzc2XV0sMTI1NDpbWzEwNTQsNzc2XV0sMTI1NTpbWzEwODYsNzc2XV0sMTI1NjpbLCx7Nzc2OjEyNTh9XSwxMjU3OlssLHs3NzY6MTI1OX1dLDEyNTg6W1sxMjU2LDc3Nl1dLDEyNTk6W1sxMjU3LDc3Nl1dLDEyNjA6W1sxMDY5LDc3Nl1dLDEyNjE6W1sxMTAxLDc3Nl1dLDEyNjI6W1sxMDU5LDc3Ml1dLDEyNjM6W1sxMDkxLDc3Ml1dLDEyNjQ6W1sxMDU5LDc3Nl1dLDEyNjU6W1sxMDkxLDc3Nl1dLDEyNjY6W1sxMDU5LDc3OV1dLDEyNjc6W1sxMDkxLDc3OV1dLDEyNjg6W1sxMDYzLDc3Nl1dLDEyNjk6W1sxMDk1LDc3Nl1dLDEyNzI6W1sxMDY3LDc3Nl1dLDEyNzM6W1sxMDk5LDc3Nl1dfSwKMTI4MDp7MTQxNTpbWzEzODEsMTQxMF0sMjU2XSwxNDI1OlssMjIwXSwxNDI2OlssMjMwXSwxNDI3OlssMjMwXSwxNDI4OlssMjMwXSwxNDI5OlssMjMwXSwxNDMwOlssMjIwXSwxNDMxOlssMjMwXSwxNDMyOlssMjMwXSwxNDMzOlssMjMwXSwxNDM0OlssMjIyXSwxNDM1OlssMjIwXSwxNDM2OlssMjMwXSwxNDM3OlssMjMwXSwxNDM4OlssMjMwXSwxNDM5OlssMjMwXSwxNDQwOlssMjMwXSwxNDQxOlssMjMwXSwxNDQyOlssMjIwXSwxNDQzOlssMjIwXSwxNDQ0OlssMjIwXSwxNDQ1OlssMjIwXSwxNDQ2OlssMjIwXSwxNDQ3OlssMjIwXSwxNDQ4OlssMjMwXSwxNDQ5OlssMjMwXSwxNDUwOlssMjIwXSwxNDUxOlssMjMwXSwxNDUyOlssMjMwXSwxNDUzOlssMjIyXSwxNDU0OlssMjI4XSwxNDU1OlssMjMwXSwxNDU2OlssMTBdLDE0NTc6WywxMV0sMTQ1ODpbLDEyXSwxNDU5OlssMTNdLDE0NjA6WywxNF0sMTQ2MTpbLDE1XSwxNDYyOlssMTZdLDE0NjM6WywxN10sMTQ2NDpbLDE4XSwxNDY1OlssMTldLDE0NjY6WywxOV0sMTQ2NzpbLDIwXSwxNDY4OlssMjFdLDE0Njk6WywyMl0sMTQ3MTpbLDIzXSwxNDczOlssMjRdLDE0NzQ6WywyNV0sMTQ3NjpbLDIzMF0sMTQ3NzpbLDIyMF0sMTQ3OTpbLDE4XX0sCjE1MzY6ezE1NTI6WywyMzBdLDE1NTM6WywyMzBdLDE1NTQ6WywyMzBdLDE1NTU6WywyMzBdLDE1NTY6WywyMzBdLDE1NTc6WywyMzBdLDE1NTg6WywyMzBdLDE1NTk6WywyMzBdLDE1NjA6WywzMF0sMTU2MTpbLDMxXSwxNTYyOlssMzJdLDE1NzA6W1sxNTc1LDE2MTldXSwxNTcxOltbMTU3NSwxNjIwXV0sMTU3MjpbWzE2MDgsMTYyMF1dLDE1NzM6W1sxNTc1LDE2MjFdXSwxNTc0OltbMTYxMCwxNjIwXV0sMTU3NTpbLCx7MTYxOToxNTcwLDE2MjA6MTU3MSwxNjIxOjE1NzN9XSwxNjA4OlssLHsxNjIwOjE1NzJ9XSwxNjEwOlssLHsxNjIwOjE1NzR9XSwxNjExOlssMjddLDE2MTI6WywyOF0sMTYxMzpbLDI5XSwxNjE0OlssMzBdLDE2MTU6WywzMV0sMTYxNjpbLDMyXSwxNjE3OlssMzNdLDE2MTg6WywzNF0sMTYxOTpbLDIzMF0sMTYyMDpbLDIzMF0sMTYyMTpbLDIyMF0sMTYyMjpbLDIyMF0sMTYyMzpbLDIzMF0sMTYyNDpbLDIzMF0sMTYyNTpbLDIzMF0sMTYyNjpbLDIzMF0sMTYyNzpbLDIzMF0sMTYyODpbLDIyMF0sMTYyOTpbLDIzMF0sMTYzMDpbLDIzMF0sMTYzMTpbLDIyMF0sMTY0ODpbLDM1XSwxNjUzOltbMTU3NSwxNjUyXSwyNTZdLDE2NTQ6W1sxNjA4LDE2NTJdLDI1Nl0sMTY1NTpbWzE3MzUsMTY1Ml0sMjU2XSwxNjU2OltbMTYxMCwxNjUyXSwyNTZdLDE3Mjg6W1sxNzQ5LDE2MjBdXSwxNzI5OlssLHsxNjIwOjE3MzB9XSwxNzMwOltbMTcyOSwxNjIwXV0sMTc0NjpbLCx7MTYyMDoxNzQ3fV0sMTc0NzpbWzE3NDYsMTYyMF1dLDE3NDk6WywsezE2MjA6MTcyOH1dLDE3NTA6WywyMzBdLDE3NTE6WywyMzBdLDE3NTI6WywyMzBdLDE3NTM6WywyMzBdLDE3NTQ6WywyMzBdLDE3NTU6WywyMzBdLDE3NTY6WywyMzBdLDE3NTk6WywyMzBdLDE3NjA6WywyMzBdLDE3NjE6WywyMzBdLDE3NjI6WywyMzBdLDE3NjM6WywyMjBdLDE3NjQ6WywyMzBdLDE3Njc6WywyMzBdLDE3Njg6WywyMzBdLDE3NzA6WywyMjBdLDE3NzE6WywyMzBdLDE3NzI6WywyMzBdLDE3NzM6WywyMjBdfSwKMTc5Mjp7MTgwOTpbLDM2XSwxODQwOlssMjMwXSwxODQxOlssMjIwXSwxODQyOlssMjMwXSwxODQzOlssMjMwXSwxODQ0OlssMjIwXSwxODQ1OlssMjMwXSwxODQ2OlssMjMwXSwxODQ3OlssMjIwXSwxODQ4OlssMjIwXSwxODQ5OlssMjIwXSwxODUwOlssMjMwXSwxODUxOlssMjIwXSwxODUyOlssMjIwXSwxODUzOlssMjMwXSwxODU0OlssMjIwXSwxODU1OlssMjMwXSwxODU2OlssMjMwXSwxODU3OlssMjMwXSwxODU4OlssMjIwXSwxODU5OlssMjMwXSwxODYwOlssMjIwXSwxODYxOlssMjMwXSwxODYyOlssMjIwXSwxODYzOlssMjMwXSwxODY0OlssMjIwXSwxODY1OlssMjMwXSwxODY2OlssMjMwXSwyMDI3OlssMjMwXSwyMDI4OlssMjMwXSwyMDI5OlssMjMwXSwyMDMwOlssMjMwXSwyMDMxOlssMjMwXSwyMDMyOlssMjMwXSwyMDMzOlssMjMwXSwyMDM0OlssMjIwXSwyMDM1OlssMjMwXX0sCjIwNDg6ezIwNzA6WywyMzBdLDIwNzE6WywyMzBdLDIwNzI6WywyMzBdLDIwNzM6WywyMzBdLDIwNzU6WywyMzBdLDIwNzY6WywyMzBdLDIwNzc6WywyMzBdLDIwNzg6WywyMzBdLDIwNzk6WywyMzBdLDIwODA6WywyMzBdLDIwODE6WywyMzBdLDIwODI6WywyMzBdLDIwODM6WywyMzBdLDIwODU6WywyMzBdLDIwODY6WywyMzBdLDIwODc6WywyMzBdLDIwODk6WywyMzBdLDIwOTA6WywyMzBdLDIwOTE6WywyMzBdLDIwOTI6WywyMzBdLDIwOTM6WywyMzBdLDIxMzc6WywyMjBdLDIxMzg6WywyMjBdLDIxMzk6WywyMjBdLDIyNzY6WywyMzBdLDIyNzc6WywyMzBdLDIyNzg6WywyMjBdLDIyNzk6WywyMzBdLDIyODA6WywyMzBdLDIyODE6WywyMjBdLDIyODI6WywyMzBdLDIyODM6WywyMzBdLDIyODQ6WywyMzBdLDIyODU6WywyMjBdLDIyODY6WywyMjBdLDIyODc6WywyMjBdLDIyODg6WywyN10sMjI4OTpbLDI4XSwyMjkwOlssMjldLDIyOTE6WywyMzBdLDIyOTI6WywyMzBdLDIyOTM6WywyMzBdLDIyOTQ6WywyMjBdLDIyOTU6WywyMzBdLDIyOTY6WywyMzBdLDIyOTc6WywyMjBdLDIyOTg6WywyMjBdLDIyOTk6WywyMzBdLDIzMDA6WywyMzBdLDIzMDE6WywyMzBdLDIzMDI6WywyMzBdLDIzMDM6WywyMzBdfSwKMjMwNDp7MjM0NDpbLCx7MjM2NDoyMzQ1fV0sMjM0NTpbWzIzNDQsMjM2NF1dLDIzNTI6WywsezIzNjQ6MjM1M31dLDIzNTM6W1syMzUyLDIzNjRdXSwyMzU1OlssLHsyMzY0OjIzNTZ9XSwyMzU2OltbMjM1NSwyMzY0XV0sMjM2NDpbLDddLDIzODE6Wyw5XSwyMzg1OlssMjMwXSwyMzg2OlssMjIwXSwyMzg3OlssMjMwXSwyMzg4OlssMjMwXSwyMzkyOltbMjMyNSwyMzY0XSw1MTJdLDIzOTM6W1syMzI2LDIzNjRdLDUxMl0sMjM5NDpbWzIzMjcsMjM2NF0sNTEyXSwyMzk1OltbMjMzMiwyMzY0XSw1MTJdLDIzOTY6W1syMzM3LDIzNjRdLDUxMl0sMjM5NzpbWzIzMzgsMjM2NF0sNTEyXSwyMzk4OltbMjM0NywyMzY0XSw1MTJdLDIzOTk6W1syMzUxLDIzNjRdLDUxMl0sMjQ5MjpbLDddLDI1MDM6WywsezI0OTQ6MjUwNywyNTE5OjI1MDh9XSwyNTA3OltbMjUwMywyNDk0XV0sMjUwODpbWzI1MDMsMjUxOV1dLDI1MDk6Wyw5XSwyNTI0OltbMjQ2NSwyNDkyXSw1MTJdLDI1MjU6W1syNDY2LDI0OTJdLDUxMl0sMjUyNzpbWzI0NzksMjQ5Ml0sNTEyXX0sCjI1NjA6ezI2MTE6W1syNjEwLDI2MjBdLDUxMl0sMjYxNDpbWzI2MTYsMjYyMF0sNTEyXSwyNjIwOlssN10sMjYzNzpbLDldLDI2NDk6W1syNTgyLDI2MjBdLDUxMl0sMjY1MDpbWzI1ODMsMjYyMF0sNTEyXSwyNjUxOltbMjU4OCwyNjIwXSw1MTJdLDI2NTQ6W1syNjAzLDI2MjBdLDUxMl0sMjc0ODpbLDddLDI3NjU6Wyw5XSw2ODEwOTpbLDIyMF0sNjgxMTE6WywyMzBdLDY4MTUyOlssMjMwXSw2ODE1MzpbLDFdLDY4MTU0OlssMjIwXSw2ODE1OTpbLDldLDY4MzI1OlssMjMwXSw2ODMyNjpbLDIyMF19LAoyODE2OnsyODc2OlssN10sMjg4NzpbLCx7Mjg3ODoyODkxLDI5MDI6Mjg4OCwyOTAzOjI4OTJ9XSwyODg4OltbMjg4NywyOTAyXV0sMjg5MTpbWzI4ODcsMjg3OF1dLDI4OTI6W1syODg3LDI5MDNdXSwyODkzOlssOV0sMjkwODpbWzI4NDksMjg3Nl0sNTEyXSwyOTA5OltbMjg1MCwyODc2XSw1MTJdLDI5NjI6WywsezMwMzE6Mjk2NH1dLDI5NjQ6W1syOTYyLDMwMzFdXSwzMDE0OlssLHszMDA2OjMwMTgsMzAzMTozMDIwfV0sMzAxNTpbLCx7MzAwNjozMDE5fV0sMzAxODpbWzMwMTQsMzAwNl1dLDMwMTk6W1szMDE1LDMwMDZdXSwzMDIwOltbMzAxNCwzMDMxXV0sMzAyMTpbLDldfSwKMzA3Mjp7MzE0MjpbLCx7MzE1ODozMTQ0fV0sMzE0NDpbWzMxNDIsMzE1OF1dLDMxNDk6Wyw5XSwzMTU3OlssODRdLDMxNTg6Wyw5MV0sMzI2MDpbLDddLDMyNjM6WywsezMyODU6MzI2NH1dLDMyNjQ6W1szMjYzLDMyODVdXSwzMjcwOlssLHszMjY2OjMyNzQsMzI4NTozMjcxLDMyODY6MzI3Mn1dLDMyNzE6W1szMjcwLDMyODVdXSwzMjcyOltbMzI3MCwzMjg2XV0sMzI3NDpbWzMyNzAsMzI2Nl0sLHszMjg1OjMyNzV9XSwzMjc1OltbMzI3NCwzMjg1XV0sMzI3NzpbLDldfSwKMzMyODp7MzM5ODpbLCx7MzM5MDozNDAyLDM0MTU6MzQwNH1dLDMzOTk6WywsezMzOTA6MzQwM31dLDM0MDI6W1szMzk4LDMzOTBdXSwzNDAzOltbMzM5OSwzMzkwXV0sMzQwNDpbWzMzOTgsMzQxNV1dLDM0MDU6Wyw5XSwzNTMwOlssOV0sMzU0NTpbLCx7MzUzMDozNTQ2LDM1MzU6MzU0OCwzNTUxOjM1NTB9XSwzNTQ2OltbMzU0NSwzNTMwXV0sMzU0ODpbWzM1NDUsMzUzNV0sLHszNTMwOjM1NDl9XSwzNTQ5OltbMzU0OCwzNTMwXV0sMzU1MDpbWzM1NDUsMzU1MV1dfSwKMzU4NDp7MzYzNTpbWzM2NjEsMzYzNF0sMjU2XSwzNjQwOlssMTAzXSwzNjQxOlssMTAzXSwzNjQyOlssOV0sMzY1NjpbLDEwN10sMzY1NzpbLDEwN10sMzY1ODpbLDEwN10sMzY1OTpbLDEwN10sMzc2MzpbWzM3ODksMzc2Ml0sMjU2XSwzNzY4OlssMTE4XSwzNzY5OlssMTE4XSwzNzg0OlssMTIyXSwzNzg1OlssMTIyXSwzNzg2OlssMTIyXSwzNzg3OlssMTIyXSwzODA0OltbMzc1NSwzNzM3XSwyNTZdLDM4MDU6W1szNzU1LDM3NDVdLDI1Nl19LAozODQwOnszODUyOltbMzg1MV0sMjU2XSwzODY0OlssMjIwXSwzODY1OlssMjIwXSwzODkzOlssMjIwXSwzODk1OlssMjIwXSwzODk3OlssMjE2XSwzOTA3OltbMzkwNiw0MDIzXSw1MTJdLDM5MTc6W1szOTE2LDQwMjNdLDUxMl0sMzkyMjpbWzM5MjEsNDAyM10sNTEyXSwzOTI3OltbMzkyNiw0MDIzXSw1MTJdLDM5MzI6W1szOTMxLDQwMjNdLDUxMl0sMzk0NTpbWzM5MDQsNDAyMV0sNTEyXSwzOTUzOlssMTI5XSwzOTU0OlssMTMwXSwzOTU1OltbMzk1MywzOTU0XSw1MTJdLDM5NTY6WywxMzJdLDM5NTc6W1szOTUzLDM5NTZdLDUxMl0sMzk1ODpbWzQwMTgsMzk2OF0sNTEyXSwzOTU5OltbNDAxOCwzOTY5XSwyNTZdLDM5NjA6W1s0MDE5LDM5NjhdLDUxMl0sMzk2MTpbWzQwMTksMzk2OV0sMjU2XSwzOTYyOlssMTMwXSwzOTYzOlssMTMwXSwzOTY0OlssMTMwXSwzOTY1OlssMTMwXSwzOTY4OlssMTMwXSwzOTY5OltbMzk1MywzOTY4XSw1MTJdLDM5NzA6WywyMzBdLDM5NzE6WywyMzBdLDM5NzI6Wyw5XSwzOTc0OlssMjMwXSwzOTc1OlssMjMwXSwzOTg3OltbMzk4Niw0MDIzXSw1MTJdLDM5OTc6W1szOTk2LDQwMjNdLDUxMl0sNDAwMjpbWzQwMDEsNDAyM10sNTEyXSw0MDA3OltbNDAwNiw0MDIzXSw1MTJdLDQwMTI6W1s0MDExLDQwMjNdLDUxMl0sNDAyNTpbWzM5ODQsNDAyMV0sNTEyXSw0MDM4OlssMjIwXX0sCjQwOTY6ezQxMzM6WywsezQxNDI6NDEzNH1dLDQxMzQ6W1s0MTMzLDQxNDJdXSw0MTUxOlssN10sNDE1MzpbLDldLDQxNTQ6Wyw5XSw0MjM3OlssMjIwXSw0MzQ4OltbNDMxNl0sMjU2XSw2OTcwMjpbLDldLDY5NzU5OlssOV0sNjk3ODU6WywsezY5ODE4OjY5Nzg2fV0sNjk3ODY6W1s2OTc4NSw2OTgxOF1dLDY5Nzg3OlssLHs2OTgxODo2OTc4OH1dLDY5Nzg4OltbNjk3ODcsNjk4MThdXSw2OTc5NzpbLCx7Njk4MTg6Njk4MDN9XSw2OTgwMzpbWzY5Nzk3LDY5ODE4XV0sNjk4MTc6Wyw5XSw2OTgxODpbLDddfSwKNDM1Mjp7Njk4ODg6WywyMzBdLDY5ODg5OlssMjMwXSw2OTg5MDpbLDIzMF0sNjk5MzQ6W1s2OTkzNyw2OTkyN11dLDY5OTM1OltbNjk5MzgsNjk5MjddXSw2OTkzNzpbLCx7Njk5Mjc6Njk5MzR9XSw2OTkzODpbLCx7Njk5Mjc6Njk5MzV9XSw2OTkzOTpbLDldLDY5OTQwOlssOV0sNzAwMDM6Wyw3XSw3MDA4MDpbLDldfSwKNDYwODp7NzAxOTc6Wyw5XSw3MDE5ODpbLDddLDcwMzc3OlssN10sNzAzNzg6Wyw5XX0sCjQ4NjQ6ezQ5NTc6WywyMzBdLDQ5NTg6WywyMzBdLDQ5NTk6WywyMzBdLDcwNDYwOlssN10sNzA0NzE6WywsezcwNDYyOjcwNDc1LDcwNDg3OjcwNDc2fV0sNzA0NzU6W1s3MDQ3MSw3MDQ2Ml1dLDcwNDc2OltbNzA0NzEsNzA0ODddXSw3MDQ3NzpbLDldLDcwNTAyOlssMjMwXSw3MDUwMzpbLDIzMF0sNzA1MDQ6WywyMzBdLDcwNTA1OlssMjMwXSw3MDUwNjpbLDIzMF0sNzA1MDc6WywyMzBdLDcwNTA4OlssMjMwXSw3MDUxMjpbLDIzMF0sNzA1MTM6WywyMzBdLDcwNTE0OlssMjMwXSw3MDUxNTpbLDIzMF0sNzA1MTY6WywyMzBdfSwKNTEyMDp7NzA4NDE6WywsezcwODMyOjcwODQ0LDcwODQyOjcwODQzLDcwODQ1OjcwODQ2fV0sNzA4NDM6W1s3MDg0MSw3MDg0Ml1dLDcwODQ0OltbNzA4NDEsNzA4MzJdXSw3MDg0NjpbWzcwODQxLDcwODQ1XV0sNzA4NTA6Wyw5XSw3MDg1MTpbLDddfSwKNTM3Njp7NzEwOTY6WywsezcxMDg3OjcxMDk4fV0sNzEwOTc6WywsezcxMDg3OjcxMDk5fV0sNzEwOTg6W1s3MTA5Niw3MTA4N11dLDcxMDk5OltbNzEwOTcsNzEwODddXSw3MTEwMzpbLDldLDcxMTA0OlssN119LAo1NjMyOns3MTIzMTpbLDldLDcxMzUwOlssOV0sNzEzNTE6Wyw3XX0sCjU4ODg6ezU5MDg6Wyw5XSw1OTQwOlssOV0sNjA5ODpbLDldLDYxMDk6WywyMzBdfSwKNjE0NDp7NjMxMzpbLDIyOF19LAo2NDAwOns2NDU3OlssMjIyXSw2NDU4OlssMjMwXSw2NDU5OlssMjIwXX0sCjY2NTY6ezY2Nzk6WywyMzBdLDY2ODA6WywyMjBdLDY3NTI6Wyw5XSw2NzczOlssMjMwXSw2Nzc0OlssMjMwXSw2Nzc1OlssMjMwXSw2Nzc2OlssMjMwXSw2Nzc3OlssMjMwXSw2Nzc4OlssMjMwXSw2Nzc5OlssMjMwXSw2NzgwOlssMjMwXSw2NzgzOlssMjIwXSw2ODMyOlssMjMwXSw2ODMzOlssMjMwXSw2ODM0OlssMjMwXSw2ODM1OlssMjMwXSw2ODM2OlssMjMwXSw2ODM3OlssMjIwXSw2ODM4OlssMjIwXSw2ODM5OlssMjIwXSw2ODQwOlssMjIwXSw2ODQxOlssMjIwXSw2ODQyOlssMjIwXSw2ODQzOlssMjMwXSw2ODQ0OlssMjMwXSw2ODQ1OlssMjIwXX0sCjY5MTI6ezY5MTc6WywsezY5NjU6NjkxOH1dLDY5MTg6W1s2OTE3LDY5NjVdXSw2OTE5OlssLHs2OTY1OjY5MjB9XSw2OTIwOltbNjkxOSw2OTY1XV0sNjkyMTpbLCx7Njk2NTo2OTIyfV0sNjkyMjpbWzY5MjEsNjk2NV1dLDY5MjM6WywsezY5NjU6NjkyNH1dLDY5MjQ6W1s2OTIzLDY5NjVdXSw2OTI1OlssLHs2OTY1OjY5MjZ9XSw2OTI2OltbNjkyNSw2OTY1XV0sNjkyOTpbLCx7Njk2NTo2OTMwfV0sNjkzMDpbWzY5MjksNjk2NV1dLDY5NjQ6Wyw3XSw2OTcwOlssLHs2OTY1OjY5NzF9XSw2OTcxOltbNjk3MCw2OTY1XV0sNjk3MjpbLCx7Njk2NTo2OTczfV0sNjk3MzpbWzY5NzIsNjk2NV1dLDY5NzQ6WywsezY5NjU6Njk3Nn1dLDY5NzU6WywsezY5NjU6Njk3N31dLDY5NzY6W1s2OTc0LDY5NjVdXSw2OTc3OltbNjk3NSw2OTY1XV0sNjk3ODpbLCx7Njk2NTo2OTc5fV0sNjk3OTpbWzY5NzgsNjk2NV1dLDY5ODA6Wyw5XSw3MDE5OlssMjMwXSw3MDIwOlssMjIwXSw3MDIxOlssMjMwXSw3MDIyOlssMjMwXSw3MDIzOlssMjMwXSw3MDI0OlssMjMwXSw3MDI1OlssMjMwXSw3MDI2OlssMjMwXSw3MDI3OlssMjMwXSw3MDgyOlssOV0sNzA4MzpbLDldLDcxNDI6Wyw3XSw3MTU0OlssOV0sNzE1NTpbLDldfSwKNzE2ODp7NzIyMzpbLDddLDczNzY6WywyMzBdLDczNzc6WywyMzBdLDczNzg6WywyMzBdLDczODA6WywxXSw3MzgxOlssMjIwXSw3MzgyOlssMjIwXSw3MzgzOlssMjIwXSw3Mzg0OlssMjIwXSw3Mzg1OlssMjIwXSw3Mzg2OlssMjMwXSw3Mzg3OlssMjMwXSw3Mzg4OlssMjIwXSw3Mzg5OlssMjIwXSw3MzkwOlssMjIwXSw3MzkxOlssMjIwXSw3MzkyOlssMjMwXSw3Mzk0OlssMV0sNzM5NTpbLDFdLDczOTY6WywxXSw3Mzk3OlssMV0sNzM5ODpbLDFdLDczOTk6WywxXSw3NDAwOlssMV0sNzQwNTpbLDIyMF0sNzQxMjpbLDIzMF0sNzQxNjpbLDIzMF0sNzQxNzpbLDIzMF19LAo3NDI0Ons3NDY4OltbNjVdLDI1Nl0sNzQ2OTpbWzE5OF0sMjU2XSw3NDcwOltbNjZdLDI1Nl0sNzQ3MjpbWzY4XSwyNTZdLDc0NzM6W1s2OV0sMjU2XSw3NDc0OltbMzk4XSwyNTZdLDc0NzU6W1s3MV0sMjU2XSw3NDc2OltbNzJdLDI1Nl0sNzQ3NzpbWzczXSwyNTZdLDc0Nzg6W1s3NF0sMjU2XSw3NDc5OltbNzVdLDI1Nl0sNzQ4MDpbWzc2XSwyNTZdLDc0ODE6W1s3N10sMjU2XSw3NDgyOltbNzhdLDI1Nl0sNzQ4NDpbWzc5XSwyNTZdLDc0ODU6W1s1NDZdLDI1Nl0sNzQ4NjpbWzgwXSwyNTZdLDc0ODc6W1s4Ml0sMjU2XSw3NDg4OltbODRdLDI1Nl0sNzQ4OTpbWzg1XSwyNTZdLDc0OTA6W1s4N10sMjU2XSw3NDkxOltbOTddLDI1Nl0sNzQ5MjpbWzU5Ml0sMjU2XSw3NDkzOltbNTkzXSwyNTZdLDc0OTQ6W1s3NDI2XSwyNTZdLDc0OTU6W1s5OF0sMjU2XSw3NDk2OltbMTAwXSwyNTZdLDc0OTc6W1sxMDFdLDI1Nl0sNzQ5ODpbWzYwMV0sMjU2XSw3NDk5OltbNjAzXSwyNTZdLDc1MDA6W1s2MDRdLDI1Nl0sNzUwMTpbWzEwM10sMjU2XSw3NTAzOltbMTA3XSwyNTZdLDc1MDQ6W1sxMDldLDI1Nl0sNzUwNTpbWzMzMV0sMjU2XSw3NTA2OltbMTExXSwyNTZdLDc1MDc6W1s1OTZdLDI1Nl0sNzUwODpbWzc0NDZdLDI1Nl0sNzUwOTpbWzc0NDddLDI1Nl0sNzUxMDpbWzExMl0sMjU2XSw3NTExOltbMTE2XSwyNTZdLDc1MTI6W1sxMTddLDI1Nl0sNzUxMzpbWzc0NTNdLDI1Nl0sNzUxNDpbWzYyM10sMjU2XSw3NTE1OltbMTE4XSwyNTZdLDc1MTY6W1s3NDYxXSwyNTZdLDc1MTc6W1s5NDZdLDI1Nl0sNzUxODpbWzk0N10sMjU2XSw3NTE5OltbOTQ4XSwyNTZdLDc1MjA6W1s5NjZdLDI1Nl0sNzUyMTpbWzk2N10sMjU2XSw3NTIyOltbMTA1XSwyNTZdLDc1MjM6W1sxMTRdLDI1Nl0sNzUyNDpbWzExN10sMjU2XSw3NTI1OltbMTE4XSwyNTZdLDc1MjY6W1s5NDZdLDI1Nl0sNzUyNzpbWzk0N10sMjU2XSw3NTI4OltbOTYxXSwyNTZdLDc1Mjk6W1s5NjZdLDI1Nl0sNzUzMDpbWzk2N10sMjU2XSw3NTQ0OltbMTA4NV0sMjU2XSw3NTc5OltbNTk0XSwyNTZdLDc1ODA6W1s5OV0sMjU2XSw3NTgxOltbNTk3XSwyNTZdLDc1ODI6W1syNDBdLDI1Nl0sNzU4MzpbWzYwNF0sMjU2XSw3NTg0OltbMTAyXSwyNTZdLDc1ODU6W1s2MDddLDI1Nl0sNzU4NjpbWzYwOV0sMjU2XSw3NTg3OltbNjEzXSwyNTZdLDc1ODg6W1s2MTZdLDI1Nl0sNzU4OTpbWzYxN10sMjU2XSw3NTkwOltbNjE4XSwyNTZdLDc1OTE6W1s3NTQ3XSwyNTZdLDc1OTI6W1s2NjldLDI1Nl0sNzU5MzpbWzYyMV0sMjU2XSw3NTk0OltbNzU1N10sMjU2XSw3NTk1OltbNjcxXSwyNTZdLDc1OTY6W1s2MjVdLDI1Nl0sNzU5NzpbWzYyNF0sMjU2XSw3NTk4OltbNjI2XSwyNTZdLDc1OTk6W1s2MjddLDI1Nl0sNzYwMDpbWzYyOF0sMjU2XSw3NjAxOltbNjI5XSwyNTZdLDc2MDI6W1s2MzJdLDI1Nl0sNzYwMzpbWzY0Ml0sMjU2XSw3NjA0OltbNjQzXSwyNTZdLDc2MDU6W1s0MjddLDI1Nl0sNzYwNjpbWzY0OV0sMjU2XSw3NjA3OltbNjUwXSwyNTZdLDc2MDg6W1s3NDUyXSwyNTZdLDc2MDk6W1s2NTFdLDI1Nl0sNzYxMDpbWzY1Ml0sMjU2XSw3NjExOltbMTIyXSwyNTZdLDc2MTI6W1s2NTZdLDI1Nl0sNzYxMzpbWzY1N10sMjU2XSw3NjE0OltbNjU4XSwyNTZdLDc2MTU6W1s5NTJdLDI1Nl0sNzYxNjpbLDIzMF0sNzYxNzpbLDIzMF0sNzYxODpbLDIyMF0sNzYxOTpbLDIzMF0sNzYyMDpbLDIzMF0sNzYyMTpbLDIzMF0sNzYyMjpbLDIzMF0sNzYyMzpbLDIzMF0sNzYyNDpbLDIzMF0sNzYyNTpbLDIzMF0sNzYyNjpbLDIyMF0sNzYyNzpbLDIzMF0sNzYyODpbLDIzMF0sNzYyOTpbLDIzNF0sNzYzMDpbLDIxNF0sNzYzMTpbLDIyMF0sNzYzMjpbLDIwMl0sNzYzMzpbLDIzMF0sNzYzNDpbLDIzMF0sNzYzNTpbLDIzMF0sNzYzNjpbLDIzMF0sNzYzNzpbLDIzMF0sNzYzODpbLDIzMF0sNzYzOTpbLDIzMF0sNzY0MDpbLDIzMF0sNzY0MTpbLDIzMF0sNzY0MjpbLDIzMF0sNzY0MzpbLDIzMF0sNzY0NDpbLDIzMF0sNzY0NTpbLDIzMF0sNzY0NjpbLDIzMF0sNzY0NzpbLDIzMF0sNzY0ODpbLDIzMF0sNzY0OTpbLDIzMF0sNzY1MDpbLDIzMF0sNzY1MTpbLDIzMF0sNzY1MjpbLDIzMF0sNzY1MzpbLDIzMF0sNzY1NDpbLDIzMF0sNzY1NTpbLDIzMF0sNzY1NjpbLDIzMF0sNzY1NzpbLDIzMF0sNzY1ODpbLDIzMF0sNzY1OTpbLDIzMF0sNzY2MDpbLDIzMF0sNzY2MTpbLDIzMF0sNzY2MjpbLDIzMF0sNzY2MzpbLDIzMF0sNzY2NDpbLDIzMF0sNzY2NTpbLDIzMF0sNzY2NjpbLDIzMF0sNzY2NzpbLDIzMF0sNzY2ODpbLDIzMF0sNzY2OTpbLDIzMF0sNzY3NjpbLDIzM10sNzY3NzpbLDIyMF0sNzY3ODpbLDIzMF0sNzY3OTpbLDIyMF19LAo3NjgwOns3NjgwOltbNjUsODA1XV0sNzY4MTpbWzk3LDgwNV1dLDc2ODI6W1s2Niw3NzVdXSw3NjgzOltbOTgsNzc1XV0sNzY4NDpbWzY2LDgwM11dLDc2ODU6W1s5OCw4MDNdXSw3Njg2OltbNjYsODE3XV0sNzY4NzpbWzk4LDgxN11dLDc2ODg6W1sxOTksNzY5XV0sNzY4OTpbWzIzMSw3NjldXSw3NjkwOltbNjgsNzc1XV0sNzY5MTpbWzEwMCw3NzVdXSw3NjkyOltbNjgsODAzXV0sNzY5MzpbWzEwMCw4MDNdXSw3Njk0OltbNjgsODE3XV0sNzY5NTpbWzEwMCw4MTddXSw3Njk2OltbNjgsODA3XV0sNzY5NzpbWzEwMCw4MDddXSw3Njk4OltbNjgsODEzXV0sNzY5OTpbWzEwMCw4MTNdXSw3NzAwOltbMjc0LDc2OF1dLDc3MDE6W1syNzUsNzY4XV0sNzcwMjpbWzI3NCw3NjldXSw3NzAzOltbMjc1LDc2OV1dLDc3MDQ6W1s2OSw4MTNdXSw3NzA1OltbMTAxLDgxM11dLDc3MDY6W1s2OSw4MTZdXSw3NzA3OltbMTAxLDgxNl1dLDc3MDg6W1s1NTIsNzc0XV0sNzcwOTpbWzU1Myw3NzRdXSw3NzEwOltbNzAsNzc1XV0sNzcxMTpbWzEwMiw3NzVdXSw3NzEyOltbNzEsNzcyXV0sNzcxMzpbWzEwMyw3NzJdXSw3NzE0OltbNzIsNzc1XV0sNzcxNTpbWzEwNCw3NzVdXSw3NzE2OltbNzIsODAzXV0sNzcxNzpbWzEwNCw4MDNdXSw3NzE4OltbNzIsNzc2XV0sNzcxOTpbWzEwNCw3NzZdXSw3NzIwOltbNzIsODA3XV0sNzcyMTpbWzEwNCw4MDddXSw3NzIyOltbNzIsODE0XV0sNzcyMzpbWzEwNCw4MTRdXSw3NzI0OltbNzMsODE2XV0sNzcyNTpbWzEwNSw4MTZdXSw3NzI2OltbMjA3LDc2OV1dLDc3Mjc6W1syMzksNzY5XV0sNzcyODpbWzc1LDc2OV1dLDc3Mjk6W1sxMDcsNzY5XV0sNzczMDpbWzc1LDgwM11dLDc3MzE6W1sxMDcsODAzXV0sNzczMjpbWzc1LDgxN11dLDc3MzM6W1sxMDcsODE3XV0sNzczNDpbWzc2LDgwM10sLHs3NzI6NzczNn1dLDc3MzU6W1sxMDgsODAzXSwsezc3Mjo3NzM3fV0sNzczNjpbWzc3MzQsNzcyXV0sNzczNzpbWzc3MzUsNzcyXV0sNzczODpbWzc2LDgxN11dLDc3Mzk6W1sxMDgsODE3XV0sNzc0MDpbWzc2LDgxM11dLDc3NDE6W1sxMDgsODEzXV0sNzc0MjpbWzc3LDc2OV1dLDc3NDM6W1sxMDksNzY5XV0sNzc0NDpbWzc3LDc3NV1dLDc3NDU6W1sxMDksNzc1XV0sNzc0NjpbWzc3LDgwM11dLDc3NDc6W1sxMDksODAzXV0sNzc0ODpbWzc4LDc3NV1dLDc3NDk6W1sxMTAsNzc1XV0sNzc1MDpbWzc4LDgwM11dLDc3NTE6W1sxMTAsODAzXV0sNzc1MjpbWzc4LDgxN11dLDc3NTM6W1sxMTAsODE3XV0sNzc1NDpbWzc4LDgxM11dLDc3NTU6W1sxMTAsODEzXV0sNzc1NjpbWzIxMyw3NjldXSw3NzU3OltbMjQ1LDc2OV1dLDc3NTg6W1syMTMsNzc2XV0sNzc1OTpbWzI0NSw3NzZdXSw3NzYwOltbMzMyLDc2OF1dLDc3NjE6W1szMzMsNzY4XV0sNzc2MjpbWzMzMiw3NjldXSw3NzYzOltbMzMzLDc2OV1dLDc3NjQ6W1s4MCw3NjldXSw3NzY1OltbMTEyLDc2OV1dLDc3NjY6W1s4MCw3NzVdXSw3NzY3OltbMTEyLDc3NV1dLDc3Njg6W1s4Miw3NzVdXSw3NzY5OltbMTE0LDc3NV1dLDc3NzA6W1s4Miw4MDNdLCx7NzcyOjc3NzJ9XSw3NzcxOltbMTE0LDgwM10sLHs3NzI6Nzc3M31dLDc3NzI6W1s3NzcwLDc3Ml1dLDc3NzM6W1s3NzcxLDc3Ml1dLDc3NzQ6W1s4Miw4MTddXSw3Nzc1OltbMTE0LDgxN11dLDc3NzY6W1s4Myw3NzVdXSw3Nzc3OltbMTE1LDc3NV1dLDc3Nzg6W1s4Myw4MDNdLCx7Nzc1Ojc3ODR9XSw3Nzc5OltbMTE1LDgwM10sLHs3NzU6Nzc4NX1dLDc3ODA6W1szNDYsNzc1XV0sNzc4MTpbWzM0Nyw3NzVdXSw3NzgyOltbMzUyLDc3NV1dLDc3ODM6W1szNTMsNzc1XV0sNzc4NDpbWzc3NzgsNzc1XV0sNzc4NTpbWzc3NzksNzc1XV0sNzc4NjpbWzg0LDc3NV1dLDc3ODc6W1sxMTYsNzc1XV0sNzc4ODpbWzg0LDgwM11dLDc3ODk6W1sxMTYsODAzXV0sNzc5MDpbWzg0LDgxN11dLDc3OTE6W1sxMTYsODE3XV0sNzc5MjpbWzg0LDgxM11dLDc3OTM6W1sxMTYsODEzXV0sNzc5NDpbWzg1LDgwNF1dLDc3OTU6W1sxMTcsODA0XV0sNzc5NjpbWzg1LDgxNl1dLDc3OTc6W1sxMTcsODE2XV0sNzc5ODpbWzg1LDgxM11dLDc3OTk6W1sxMTcsODEzXV0sNzgwMDpbWzM2MCw3NjldXSw3ODAxOltbMzYxLDc2OV1dLDc4MDI6W1szNjIsNzc2XV0sNzgwMzpbWzM2Myw3NzZdXSw3ODA0OltbODYsNzcxXV0sNzgwNTpbWzExOCw3NzFdXSw3ODA2OltbODYsODAzXV0sNzgwNzpbWzExOCw4MDNdXSw3ODA4OltbODcsNzY4XV0sNzgwOTpbWzExOSw3NjhdXSw3ODEwOltbODcsNzY5XV0sNzgxMTpbWzExOSw3NjldXSw3ODEyOltbODcsNzc2XV0sNzgxMzpbWzExOSw3NzZdXSw3ODE0OltbODcsNzc1XV0sNzgxNTpbWzExOSw3NzVdXSw3ODE2OltbODcsODAzXV0sNzgxNzpbWzExOSw4MDNdXSw3ODE4OltbODgsNzc1XV0sNzgxOTpbWzEyMCw3NzVdXSw3ODIwOltbODgsNzc2XV0sNzgyMTpbWzEyMCw3NzZdXSw3ODIyOltbODksNzc1XV0sNzgyMzpbWzEyMSw3NzVdXSw3ODI0OltbOTAsNzcwXV0sNzgyNTpbWzEyMiw3NzBdXSw3ODI2OltbOTAsODAzXV0sNzgyNzpbWzEyMiw4MDNdXSw3ODI4OltbOTAsODE3XV0sNzgyOTpbWzEyMiw4MTddXSw3ODMwOltbMTA0LDgxN11dLDc4MzE6W1sxMTYsNzc2XV0sNzgzMjpbWzExOSw3NzhdXSw3ODMzOltbMTIxLDc3OF1dLDc4MzQ6W1s5Nyw3MDJdLDI1Nl0sNzgzNTpbWzM4Myw3NzVdXSw3ODQwOltbNjUsODAzXSwsezc3MDo3ODUyLDc3NDo3ODYyfV0sNzg0MTpbWzk3LDgwM10sLHs3NzA6Nzg1Myw3NzQ6Nzg2M31dLDc4NDI6W1s2NSw3NzddXSw3ODQzOltbOTcsNzc3XV0sNzg0NDpbWzE5NCw3NjldXSw3ODQ1OltbMjI2LDc2OV1dLDc4NDY6W1sxOTQsNzY4XV0sNzg0NzpbWzIyNiw3NjhdXSw3ODQ4OltbMTk0LDc3N11dLDc4NDk6W1syMjYsNzc3XV0sNzg1MDpbWzE5NCw3NzFdXSw3ODUxOltbMjI2LDc3MV1dLDc4NTI6W1s3ODQwLDc3MF1dLDc4NTM6W1s3ODQxLDc3MF1dLDc4NTQ6W1syNTgsNzY5XV0sNzg1NTpbWzI1OSw3NjldXSw3ODU2OltbMjU4LDc2OF1dLDc4NTc6W1syNTksNzY4XV0sNzg1ODpbWzI1OCw3NzddXSw3ODU5OltbMjU5LDc3N11dLDc4NjA6W1syNTgsNzcxXV0sNzg2MTpbWzI1OSw3NzFdXSw3ODYyOltbNzg0MCw3NzRdXSw3ODYzOltbNzg0MSw3NzRdXSw3ODY0OltbNjksODAzXSwsezc3MDo3ODc4fV0sNzg2NTpbWzEwMSw4MDNdLCx7NzcwOjc4Nzl9XSw3ODY2OltbNjksNzc3XV0sNzg2NzpbWzEwMSw3NzddXSw3ODY4OltbNjksNzcxXV0sNzg2OTpbWzEwMSw3NzFdXSw3ODcwOltbMjAyLDc2OV1dLDc4NzE6W1syMzQsNzY5XV0sNzg3MjpbWzIwMiw3NjhdXSw3ODczOltbMjM0LDc2OF1dLDc4NzQ6W1syMDIsNzc3XV0sNzg3NTpbWzIzNCw3NzddXSw3ODc2OltbMjAyLDc3MV1dLDc4Nzc6W1syMzQsNzcxXV0sNzg3ODpbWzc4NjQsNzcwXV0sNzg3OTpbWzc4NjUsNzcwXV0sNzg4MDpbWzczLDc3N11dLDc4ODE6W1sxMDUsNzc3XV0sNzg4MjpbWzczLDgwM11dLDc4ODM6W1sxMDUsODAzXV0sNzg4NDpbWzc5LDgwM10sLHs3NzA6Nzg5Nn1dLDc4ODU6W1sxMTEsODAzXSwsezc3MDo3ODk3fV0sNzg4NjpbWzc5LDc3N11dLDc4ODc6W1sxMTEsNzc3XV0sNzg4ODpbWzIxMiw3NjldXSw3ODg5OltbMjQ0LDc2OV1dLDc4OTA6W1syMTIsNzY4XV0sNzg5MTpbWzI0NCw3NjhdXSw3ODkyOltbMjEyLDc3N11dLDc4OTM6W1syNDQsNzc3XV0sNzg5NDpbWzIxMiw3NzFdXSw3ODk1OltbMjQ0LDc3MV1dLDc4OTY6W1s3ODg0LDc3MF1dLDc4OTc6W1s3ODg1LDc3MF1dLDc4OTg6W1s0MTYsNzY5XV0sNzg5OTpbWzQxNyw3NjldXSw3OTAwOltbNDE2LDc2OF1dLDc5MDE6W1s0MTcsNzY4XV0sNzkwMjpbWzQxNiw3NzddXSw3OTAzOltbNDE3LDc3N11dLDc5MDQ6W1s0MTYsNzcxXV0sNzkwNTpbWzQxNyw3NzFdXSw3OTA2OltbNDE2LDgwM11dLDc5MDc6W1s0MTcsODAzXV0sNzkwODpbWzg1LDgwM11dLDc5MDk6W1sxMTcsODAzXV0sNzkxMDpbWzg1LDc3N11dLDc5MTE6W1sxMTcsNzc3XV0sNzkxMjpbWzQzMSw3NjldXSw3OTEzOltbNDMyLDc2OV1dLDc5MTQ6W1s0MzEsNzY4XV0sNzkxNTpbWzQzMiw3NjhdXSw3OTE2OltbNDMxLDc3N11dLDc5MTc6W1s0MzIsNzc3XV0sNzkxODpbWzQzMSw3NzFdXSw3OTE5OltbNDMyLDc3MV1dLDc5MjA6W1s0MzEsODAzXV0sNzkyMTpbWzQzMiw4MDNdXSw3OTIyOltbODksNzY4XV0sNzkyMzpbWzEyMSw3NjhdXSw3OTI0OltbODksODAzXV0sNzkyNTpbWzEyMSw4MDNdXSw3OTI2OltbODksNzc3XV0sNzkyNzpbWzEyMSw3NzddXSw3OTI4OltbODksNzcxXV0sNzkyOTpbWzEyMSw3NzFdXX0sCjc5MzY6ezc5MzY6W1s5NDUsNzg3XSwsezc2ODo3OTM4LDc2OTo3OTQwLDgzNDo3OTQyLDgzNzo4MDY0fV0sNzkzNzpbWzk0NSw3ODhdLCx7NzY4Ojc5MzksNzY5Ojc5NDEsODM0Ojc5NDMsODM3OjgwNjV9XSw3OTM4OltbNzkzNiw3NjhdLCx7ODM3OjgwNjZ9XSw3OTM5OltbNzkzNyw3NjhdLCx7ODM3OjgwNjd9XSw3OTQwOltbNzkzNiw3NjldLCx7ODM3OjgwNjh9XSw3OTQxOltbNzkzNyw3NjldLCx7ODM3OjgwNjl9XSw3OTQyOltbNzkzNiw4MzRdLCx7ODM3OjgwNzB9XSw3OTQzOltbNzkzNyw4MzRdLCx7ODM3OjgwNzF9XSw3OTQ0OltbOTEzLDc4N10sLHs3Njg6Nzk0Niw3Njk6Nzk0OCw4MzQ6Nzk1MCw4Mzc6ODA3Mn1dLDc5NDU6W1s5MTMsNzg4XSwsezc2ODo3OTQ3LDc2OTo3OTQ5LDgzNDo3OTUxLDgzNzo4MDczfV0sNzk0NjpbWzc5NDQsNzY4XSwsezgzNzo4MDc0fV0sNzk0NzpbWzc5NDUsNzY4XSwsezgzNzo4MDc1fV0sNzk0ODpbWzc5NDQsNzY5XSwsezgzNzo4MDc2fV0sNzk0OTpbWzc5NDUsNzY5XSwsezgzNzo4MDc3fV0sNzk1MDpbWzc5NDQsODM0XSwsezgzNzo4MDc4fV0sNzk1MTpbWzc5NDUsODM0XSwsezgzNzo4MDc5fV0sNzk1MjpbWzk0OSw3ODddLCx7NzY4Ojc5NTQsNzY5Ojc5NTZ9XSw3OTUzOltbOTQ5LDc4OF0sLHs3Njg6Nzk1NSw3Njk6Nzk1N31dLDc5NTQ6W1s3OTUyLDc2OF1dLDc5NTU6W1s3OTUzLDc2OF1dLDc5NTY6W1s3OTUyLDc2OV1dLDc5NTc6W1s3OTUzLDc2OV1dLDc5NjA6W1s5MTcsNzg3XSwsezc2ODo3OTYyLDc2OTo3OTY0fV0sNzk2MTpbWzkxNyw3ODhdLCx7NzY4Ojc5NjMsNzY5Ojc5NjV9XSw3OTYyOltbNzk2MCw3NjhdXSw3OTYzOltbNzk2MSw3NjhdXSw3OTY0OltbNzk2MCw3NjldXSw3OTY1OltbNzk2MSw3NjldXSw3OTY4OltbOTUxLDc4N10sLHs3Njg6Nzk3MCw3Njk6Nzk3Miw4MzQ6Nzk3NCw4Mzc6ODA4MH1dLDc5Njk6W1s5NTEsNzg4XSwsezc2ODo3OTcxLDc2OTo3OTczLDgzNDo3OTc1LDgzNzo4MDgxfV0sNzk3MDpbWzc5NjgsNzY4XSwsezgzNzo4MDgyfV0sNzk3MTpbWzc5NjksNzY4XSwsezgzNzo4MDgzfV0sNzk3MjpbWzc5NjgsNzY5XSwsezgzNzo4MDg0fV0sNzk3MzpbWzc5NjksNzY5XSwsezgzNzo4MDg1fV0sNzk3NDpbWzc5NjgsODM0XSwsezgzNzo4MDg2fV0sNzk3NTpbWzc5NjksODM0XSwsezgzNzo4MDg3fV0sNzk3NjpbWzkxOSw3ODddLCx7NzY4Ojc5NzgsNzY5Ojc5ODAsODM0Ojc5ODIsODM3OjgwODh9XSw3OTc3OltbOTE5LDc4OF0sLHs3Njg6Nzk3OSw3Njk6Nzk4MSw4MzQ6Nzk4Myw4Mzc6ODA4OX1dLDc5Nzg6W1s3OTc2LDc2OF0sLHs4Mzc6ODA5MH1dLDc5Nzk6W1s3OTc3LDc2OF0sLHs4Mzc6ODA5MX1dLDc5ODA6W1s3OTc2LDc2OV0sLHs4Mzc6ODA5Mn1dLDc5ODE6W1s3OTc3LDc2OV0sLHs4Mzc6ODA5M31dLDc5ODI6W1s3OTc2LDgzNF0sLHs4Mzc6ODA5NH1dLDc5ODM6W1s3OTc3LDgzNF0sLHs4Mzc6ODA5NX1dLDc5ODQ6W1s5NTMsNzg3XSwsezc2ODo3OTg2LDc2OTo3OTg4LDgzNDo3OTkwfV0sNzk4NTpbWzk1Myw3ODhdLCx7NzY4Ojc5ODcsNzY5Ojc5ODksODM0Ojc5OTF9XSw3OTg2OltbNzk4NCw3NjhdXSw3OTg3OltbNzk4NSw3NjhdXSw3OTg4OltbNzk4NCw3NjldXSw3OTg5OltbNzk4NSw3NjldXSw3OTkwOltbNzk4NCw4MzRdXSw3OTkxOltbNzk4NSw4MzRdXSw3OTkyOltbOTIxLDc4N10sLHs3Njg6Nzk5NCw3Njk6Nzk5Niw4MzQ6Nzk5OH1dLDc5OTM6W1s5MjEsNzg4XSwsezc2ODo3OTk1LDc2OTo3OTk3LDgzNDo3OTk5fV0sNzk5NDpbWzc5OTIsNzY4XV0sNzk5NTpbWzc5OTMsNzY4XV0sNzk5NjpbWzc5OTIsNzY5XV0sNzk5NzpbWzc5OTMsNzY5XV0sNzk5ODpbWzc5OTIsODM0XV0sNzk5OTpbWzc5OTMsODM0XV0sODAwMDpbWzk1OSw3ODddLCx7NzY4OjgwMDIsNzY5OjgwMDR9XSw4MDAxOltbOTU5LDc4OF0sLHs3Njg6ODAwMyw3Njk6ODAwNX1dLDgwMDI6W1s4MDAwLDc2OF1dLDgwMDM6W1s4MDAxLDc2OF1dLDgwMDQ6W1s4MDAwLDc2OV1dLDgwMDU6W1s4MDAxLDc2OV1dLDgwMDg6W1s5MjcsNzg3XSwsezc2ODo4MDEwLDc2OTo4MDEyfV0sODAwOTpbWzkyNyw3ODhdLCx7NzY4OjgwMTEsNzY5OjgwMTN9XSw4MDEwOltbODAwOCw3NjhdXSw4MDExOltbODAwOSw3NjhdXSw4MDEyOltbODAwOCw3NjldXSw4MDEzOltbODAwOSw3NjldXSw4MDE2OltbOTY1LDc4N10sLHs3Njg6ODAxOCw3Njk6ODAyMCw4MzQ6ODAyMn1dLDgwMTc6W1s5NjUsNzg4XSwsezc2ODo4MDE5LDc2OTo4MDIxLDgzNDo4MDIzfV0sODAxODpbWzgwMTYsNzY4XV0sODAxOTpbWzgwMTcsNzY4XV0sODAyMDpbWzgwMTYsNzY5XV0sODAyMTpbWzgwMTcsNzY5XV0sODAyMjpbWzgwMTYsODM0XV0sODAyMzpbWzgwMTcsODM0XV0sODAyNTpbWzkzMyw3ODhdLCx7NzY4OjgwMjcsNzY5OjgwMjksODM0OjgwMzF9XSw4MDI3OltbODAyNSw3NjhdXSw4MDI5OltbODAyNSw3NjldXSw4MDMxOltbODAyNSw4MzRdXSw4MDMyOltbOTY5LDc4N10sLHs3Njg6ODAzNCw3Njk6ODAzNiw4MzQ6ODAzOCw4Mzc6ODA5Nn1dLDgwMzM6W1s5NjksNzg4XSwsezc2ODo4MDM1LDc2OTo4MDM3LDgzNDo4MDM5LDgzNzo4MDk3fV0sODAzNDpbWzgwMzIsNzY4XSwsezgzNzo4MDk4fV0sODAzNTpbWzgwMzMsNzY4XSwsezgzNzo4MDk5fV0sODAzNjpbWzgwMzIsNzY5XSwsezgzNzo4MTAwfV0sODAzNzpbWzgwMzMsNzY5XSwsezgzNzo4MTAxfV0sODAzODpbWzgwMzIsODM0XSwsezgzNzo4MTAyfV0sODAzOTpbWzgwMzMsODM0XSwsezgzNzo4MTAzfV0sODA0MDpbWzkzNyw3ODddLCx7NzY4OjgwNDIsNzY5OjgwNDQsODM0OjgwNDYsODM3OjgxMDR9XSw4MDQxOltbOTM3LDc4OF0sLHs3Njg6ODA0Myw3Njk6ODA0NSw4MzQ6ODA0Nyw4Mzc6ODEwNX1dLDgwNDI6W1s4MDQwLDc2OF0sLHs4Mzc6ODEwNn1dLDgwNDM6W1s4MDQxLDc2OF0sLHs4Mzc6ODEwN31dLDgwNDQ6W1s4MDQwLDc2OV0sLHs4Mzc6ODEwOH1dLDgwNDU6W1s4MDQxLDc2OV0sLHs4Mzc6ODEwOX1dLDgwNDY6W1s4MDQwLDgzNF0sLHs4Mzc6ODExMH1dLDgwNDc6W1s4MDQxLDgzNF0sLHs4Mzc6ODExMX1dLDgwNDg6W1s5NDUsNzY4XSwsezgzNzo4MTE0fV0sODA0OTpbWzk0MF1dLDgwNTA6W1s5NDksNzY4XV0sODA1MTpbWzk0MV1dLDgwNTI6W1s5NTEsNzY4XSwsezgzNzo4MTMwfV0sODA1MzpbWzk0Ml1dLDgwNTQ6W1s5NTMsNzY4XV0sODA1NTpbWzk0M11dLDgwNTY6W1s5NTksNzY4XV0sODA1NzpbWzk3Ml1dLDgwNTg6W1s5NjUsNzY4XV0sODA1OTpbWzk3M11dLDgwNjA6W1s5NjksNzY4XSwsezgzNzo4MTc4fV0sODA2MTpbWzk3NF1dLDgwNjQ6W1s3OTM2LDgzN11dLDgwNjU6W1s3OTM3LDgzN11dLDgwNjY6W1s3OTM4LDgzN11dLDgwNjc6W1s3OTM5LDgzN11dLDgwNjg6W1s3OTQwLDgzN11dLDgwNjk6W1s3OTQxLDgzN11dLDgwNzA6W1s3OTQyLDgzN11dLDgwNzE6W1s3OTQzLDgzN11dLDgwNzI6W1s3OTQ0LDgzN11dLDgwNzM6W1s3OTQ1LDgzN11dLDgwNzQ6W1s3OTQ2LDgzN11dLDgwNzU6W1s3OTQ3LDgzN11dLDgwNzY6W1s3OTQ4LDgzN11dLDgwNzc6W1s3OTQ5LDgzN11dLDgwNzg6W1s3OTUwLDgzN11dLDgwNzk6W1s3OTUxLDgzN11dLDgwODA6W1s3OTY4LDgzN11dLDgwODE6W1s3OTY5LDgzN11dLDgwODI6W1s3OTcwLDgzN11dLDgwODM6W1s3OTcxLDgzN11dLDgwODQ6W1s3OTcyLDgzN11dLDgwODU6W1s3OTczLDgzN11dLDgwODY6W1s3OTc0LDgzN11dLDgwODc6W1s3OTc1LDgzN11dLDgwODg6W1s3OTc2LDgzN11dLDgwODk6W1s3OTc3LDgzN11dLDgwOTA6W1s3OTc4LDgzN11dLDgwOTE6W1s3OTc5LDgzN11dLDgwOTI6W1s3OTgwLDgzN11dLDgwOTM6W1s3OTgxLDgzN11dLDgwOTQ6W1s3OTgyLDgzN11dLDgwOTU6W1s3OTgzLDgzN11dLDgwOTY6W1s4MDMyLDgzN11dLDgwOTc6W1s4MDMzLDgzN11dLDgwOTg6W1s4MDM0LDgzN11dLDgwOTk6W1s4MDM1LDgzN11dLDgxMDA6W1s4MDM2LDgzN11dLDgxMDE6W1s4MDM3LDgzN11dLDgxMDI6W1s4MDM4LDgzN11dLDgxMDM6W1s4MDM5LDgzN11dLDgxMDQ6W1s4MDQwLDgzN11dLDgxMDU6W1s4MDQxLDgzN11dLDgxMDY6W1s4MDQyLDgzN11dLDgxMDc6W1s4MDQzLDgzN11dLDgxMDg6W1s4MDQ0LDgzN11dLDgxMDk6W1s4MDQ1LDgzN11dLDgxMTA6W1s4MDQ2LDgzN11dLDgxMTE6W1s4MDQ3LDgzN11dLDgxMTI6W1s5NDUsNzc0XV0sODExMzpbWzk0NSw3NzJdXSw4MTE0OltbODA0OCw4MzddXSw4MTE1OltbOTQ1LDgzN11dLDgxMTY6W1s5NDAsODM3XV0sODExODpbWzk0NSw4MzRdLCx7ODM3OjgxMTl9XSw4MTE5OltbODExOCw4MzddXSw4MTIwOltbOTEzLDc3NF1dLDgxMjE6W1s5MTMsNzcyXV0sODEyMjpbWzkxMyw3NjhdXSw4MTIzOltbOTAyXV0sODEyNDpbWzkxMyw4MzddXSw4MTI1OltbMzIsNzg3XSwyNTZdLDgxMjY6W1s5NTNdXSw4MTI3OltbMzIsNzg3XSwyNTYsezc2ODo4MTQxLDc2OTo4MTQyLDgzNDo4MTQzfV0sODEyODpbWzMyLDgzNF0sMjU2XSw4MTI5OltbMTY4LDgzNF1dLDgxMzA6W1s4MDUyLDgzN11dLDgxMzE6W1s5NTEsODM3XV0sODEzMjpbWzk0Miw4MzddXSw4MTM0OltbOTUxLDgzNF0sLHs4Mzc6ODEzNX1dLDgxMzU6W1s4MTM0LDgzN11dLDgxMzY6W1s5MTcsNzY4XV0sODEzNzpbWzkwNF1dLDgxMzg6W1s5MTksNzY4XV0sODEzOTpbWzkwNV1dLDgxNDA6W1s5MTksODM3XV0sODE0MTpbWzgxMjcsNzY4XV0sODE0MjpbWzgxMjcsNzY5XV0sODE0MzpbWzgxMjcsODM0XV0sODE0NDpbWzk1Myw3NzRdXSw4MTQ1OltbOTUzLDc3Ml1dLDgxNDY6W1s5NzAsNzY4XV0sODE0NzpbWzkxMl1dLDgxNTA6W1s5NTMsODM0XV0sODE1MTpbWzk3MCw4MzRdXSw4MTUyOltbOTIxLDc3NF1dLDgxNTM6W1s5MjEsNzcyXV0sODE1NDpbWzkyMSw3NjhdXSw4MTU1OltbOTA2XV0sODE1NzpbWzgxOTAsNzY4XV0sODE1ODpbWzgxOTAsNzY5XV0sODE1OTpbWzgxOTAsODM0XV0sODE2MDpbWzk2NSw3NzRdXSw4MTYxOltbOTY1LDc3Ml1dLDgxNjI6W1s5NzEsNzY4XV0sODE2MzpbWzk0NF1dLDgxNjQ6W1s5NjEsNzg3XV0sODE2NTpbWzk2MSw3ODhdXSw4MTY2OltbOTY1LDgzNF1dLDgxNjc6W1s5NzEsODM0XV0sODE2ODpbWzkzMyw3NzRdXSw4MTY5OltbOTMzLDc3Ml1dLDgxNzA6W1s5MzMsNzY4XV0sODE3MTpbWzkxMF1dLDgxNzI6W1s5MjksNzg4XV0sODE3MzpbWzE2OCw3NjhdXSw4MTc0OltbOTAxXV0sODE3NTpbWzk2XV0sODE3ODpbWzgwNjAsODM3XV0sODE3OTpbWzk2OSw4MzddXSw4MTgwOltbOTc0LDgzN11dLDgxODI6W1s5NjksODM0XSwsezgzNzo4MTgzfV0sODE4MzpbWzgxODIsODM3XV0sODE4NDpbWzkyNyw3NjhdXSw4MTg1OltbOTA4XV0sODE4NjpbWzkzNyw3NjhdXSw4MTg3OltbOTExXV0sODE4ODpbWzkzNyw4MzddXSw4MTg5OltbMTgwXV0sODE5MDpbWzMyLDc4OF0sMjU2LHs3Njg6ODE1Nyw3Njk6ODE1OCw4MzQ6ODE1OX1dfSwKODE5Mjp7ODE5MjpbWzgxOTRdXSw4MTkzOltbODE5NV1dLDgxOTQ6W1szMl0sMjU2XSw4MTk1OltbMzJdLDI1Nl0sODE5NjpbWzMyXSwyNTZdLDgxOTc6W1szMl0sMjU2XSw4MTk4OltbMzJdLDI1Nl0sODE5OTpbWzMyXSwyNTZdLDgyMDA6W1szMl0sMjU2XSw4MjAxOltbMzJdLDI1Nl0sODIwMjpbWzMyXSwyNTZdLDgyMDk6W1s4MjA4XSwyNTZdLDgyMTU6W1szMiw4MTldLDI1Nl0sODIyODpbWzQ2XSwyNTZdLDgyMjk6W1s0Niw0Nl0sMjU2XSw4MjMwOltbNDYsNDYsNDZdLDI1Nl0sODIzOTpbWzMyXSwyNTZdLDgyNDM6W1s4MjQyLDgyNDJdLDI1Nl0sODI0NDpbWzgyNDIsODI0Miw4MjQyXSwyNTZdLDgyNDY6W1s4MjQ1LDgyNDVdLDI1Nl0sODI0NzpbWzgyNDUsODI0NSw4MjQ1XSwyNTZdLDgyNTI6W1szMywzM10sMjU2XSw4MjU0OltbMzIsNzczXSwyNTZdLDgyNjM6W1s2Myw2M10sMjU2XSw4MjY0OltbNjMsMzNdLDI1Nl0sODI2NTpbWzMzLDYzXSwyNTZdLDgyNzk6W1s4MjQyLDgyNDIsODI0Miw4MjQyXSwyNTZdLDgyODc6W1szMl0sMjU2XSw4MzA0OltbNDhdLDI1Nl0sODMwNTpbWzEwNV0sMjU2XSw4MzA4OltbNTJdLDI1Nl0sODMwOTpbWzUzXSwyNTZdLDgzMTA6W1s1NF0sMjU2XSw4MzExOltbNTVdLDI1Nl0sODMxMjpbWzU2XSwyNTZdLDgzMTM6W1s1N10sMjU2XSw4MzE0OltbNDNdLDI1Nl0sODMxNTpbWzg3MjJdLDI1Nl0sODMxNjpbWzYxXSwyNTZdLDgzMTc6W1s0MF0sMjU2XSw4MzE4OltbNDFdLDI1Nl0sODMxOTpbWzExMF0sMjU2XSw4MzIwOltbNDhdLDI1Nl0sODMyMTpbWzQ5XSwyNTZdLDgzMjI6W1s1MF0sMjU2XSw4MzIzOltbNTFdLDI1Nl0sODMyNDpbWzUyXSwyNTZdLDgzMjU6W1s1M10sMjU2XSw4MzI2OltbNTRdLDI1Nl0sODMyNzpbWzU1XSwyNTZdLDgzMjg6W1s1Nl0sMjU2XSw4MzI5OltbNTddLDI1Nl0sODMzMDpbWzQzXSwyNTZdLDgzMzE6W1s4NzIyXSwyNTZdLDgzMzI6W1s2MV0sMjU2XSw4MzMzOltbNDBdLDI1Nl0sODMzNDpbWzQxXSwyNTZdLDgzMzY6W1s5N10sMjU2XSw4MzM3OltbMTAxXSwyNTZdLDgzMzg6W1sxMTFdLDI1Nl0sODMzOTpbWzEyMF0sMjU2XSw4MzQwOltbNjAxXSwyNTZdLDgzNDE6W1sxMDRdLDI1Nl0sODM0MjpbWzEwN10sMjU2XSw4MzQzOltbMTA4XSwyNTZdLDgzNDQ6W1sxMDldLDI1Nl0sODM0NTpbWzExMF0sMjU2XSw4MzQ2OltbMTEyXSwyNTZdLDgzNDc6W1sxMTVdLDI1Nl0sODM0ODpbWzExNl0sMjU2XSw4MzYwOltbODIsMTE1XSwyNTZdLDg0MDA6WywyMzBdLDg0MDE6WywyMzBdLDg0MDI6WywxXSw4NDAzOlssMV0sODQwNDpbLDIzMF0sODQwNTpbLDIzMF0sODQwNjpbLDIzMF0sODQwNzpbLDIzMF0sODQwODpbLDFdLDg0MDk6WywxXSw4NDEwOlssMV0sODQxMTpbLDIzMF0sODQxMjpbLDIzMF0sODQxNzpbLDIzMF0sODQyMTpbLDFdLDg0MjI6WywxXSw4NDIzOlssMjMwXSw4NDI0OlssMjIwXSw4NDI1OlssMjMwXSw4NDI2OlssMV0sODQyNzpbLDFdLDg0Mjg6WywyMjBdLDg0Mjk6WywyMjBdLDg0MzA6WywyMjBdLDg0MzE6WywyMjBdLDg0MzI6WywyMzBdfSwKODQ0ODp7ODQ0ODpbWzk3LDQ3LDk5XSwyNTZdLDg0NDk6W1s5Nyw0NywxMTVdLDI1Nl0sODQ1MDpbWzY3XSwyNTZdLDg0NTE6W1sxNzYsNjddLDI1Nl0sODQ1MzpbWzk5LDQ3LDExMV0sMjU2XSw4NDU0OltbOTksNDcsMTE3XSwyNTZdLDg0NTU6W1s0MDBdLDI1Nl0sODQ1NzpbWzE3Niw3MF0sMjU2XSw4NDU4OltbMTAzXSwyNTZdLDg0NTk6W1s3Ml0sMjU2XSw4NDYwOltbNzJdLDI1Nl0sODQ2MTpbWzcyXSwyNTZdLDg0NjI6W1sxMDRdLDI1Nl0sODQ2MzpbWzI5NV0sMjU2XSw4NDY0OltbNzNdLDI1Nl0sODQ2NTpbWzczXSwyNTZdLDg0NjY6W1s3Nl0sMjU2XSw4NDY3OltbMTA4XSwyNTZdLDg0Njk6W1s3OF0sMjU2XSw4NDcwOltbNzgsMTExXSwyNTZdLDg0NzM6W1s4MF0sMjU2XSw4NDc0OltbODFdLDI1Nl0sODQ3NTpbWzgyXSwyNTZdLDg0NzY6W1s4Ml0sMjU2XSw4NDc3OltbODJdLDI1Nl0sODQ4MDpbWzgzLDc3XSwyNTZdLDg0ODE6W1s4NCw2OSw3Nl0sMjU2XSw4NDgyOltbODQsNzddLDI1Nl0sODQ4NDpbWzkwXSwyNTZdLDg0ODY6W1s5MzddXSw4NDg4OltbOTBdLDI1Nl0sODQ5MDpbWzc1XV0sODQ5MTpbWzE5N11dLDg0OTI6W1s2Nl0sMjU2XSw4NDkzOltbNjddLDI1Nl0sODQ5NTpbWzEwMV0sMjU2XSw4NDk2OltbNjldLDI1Nl0sODQ5NzpbWzcwXSwyNTZdLDg0OTk6W1s3N10sMjU2XSw4NTAwOltbMTExXSwyNTZdLDg1MDE6W1sxNDg4XSwyNTZdLDg1MDI6W1sxNDg5XSwyNTZdLDg1MDM6W1sxNDkwXSwyNTZdLDg1MDQ6W1sxNDkxXSwyNTZdLDg1MDU6W1sxMDVdLDI1Nl0sODUwNzpbWzcwLDY1LDg4XSwyNTZdLDg1MDg6W1s5NjBdLDI1Nl0sODUwOTpbWzk0N10sMjU2XSw4NTEwOltbOTE1XSwyNTZdLDg1MTE6W1s5MjhdLDI1Nl0sODUxMjpbWzg3MjFdLDI1Nl0sODUxNzpbWzY4XSwyNTZdLDg1MTg6W1sxMDBdLDI1Nl0sODUxOTpbWzEwMV0sMjU2XSw4NTIwOltbMTA1XSwyNTZdLDg1MjE6W1sxMDZdLDI1Nl0sODUyODpbWzQ5LDgyNjAsNTVdLDI1Nl0sODUyOTpbWzQ5LDgyNjAsNTddLDI1Nl0sODUzMDpbWzQ5LDgyNjAsNDksNDhdLDI1Nl0sODUzMTpbWzQ5LDgyNjAsNTFdLDI1Nl0sODUzMjpbWzUwLDgyNjAsNTFdLDI1Nl0sODUzMzpbWzQ5LDgyNjAsNTNdLDI1Nl0sODUzNDpbWzUwLDgyNjAsNTNdLDI1Nl0sODUzNTpbWzUxLDgyNjAsNTNdLDI1Nl0sODUzNjpbWzUyLDgyNjAsNTNdLDI1Nl0sODUzNzpbWzQ5LDgyNjAsNTRdLDI1Nl0sODUzODpbWzUzLDgyNjAsNTRdLDI1Nl0sODUzOTpbWzQ5LDgyNjAsNTZdLDI1Nl0sODU0MDpbWzUxLDgyNjAsNTZdLDI1Nl0sODU0MTpbWzUzLDgyNjAsNTZdLDI1Nl0sODU0MjpbWzU1LDgyNjAsNTZdLDI1Nl0sODU0MzpbWzQ5LDgyNjBdLDI1Nl0sODU0NDpbWzczXSwyNTZdLDg1NDU6W1s3Myw3M10sMjU2XSw4NTQ2OltbNzMsNzMsNzNdLDI1Nl0sODU0NzpbWzczLDg2XSwyNTZdLDg1NDg6W1s4Nl0sMjU2XSw4NTQ5OltbODYsNzNdLDI1Nl0sODU1MDpbWzg2LDczLDczXSwyNTZdLDg1NTE6W1s4Niw3Myw3Myw3M10sMjU2XSw4NTUyOltbNzMsODhdLDI1Nl0sODU1MzpbWzg4XSwyNTZdLDg1NTQ6W1s4OCw3M10sMjU2XSw4NTU1OltbODgsNzMsNzNdLDI1Nl0sODU1NjpbWzc2XSwyNTZdLDg1NTc6W1s2N10sMjU2XSw4NTU4OltbNjhdLDI1Nl0sODU1OTpbWzc3XSwyNTZdLDg1NjA6W1sxMDVdLDI1Nl0sODU2MTpbWzEwNSwxMDVdLDI1Nl0sODU2MjpbWzEwNSwxMDUsMTA1XSwyNTZdLDg1NjM6W1sxMDUsMTE4XSwyNTZdLDg1NjQ6W1sxMThdLDI1Nl0sODU2NTpbWzExOCwxMDVdLDI1Nl0sODU2NjpbWzExOCwxMDUsMTA1XSwyNTZdLDg1Njc6W1sxMTgsMTA1LDEwNSwxMDVdLDI1Nl0sODU2ODpbWzEwNSwxMjBdLDI1Nl0sODU2OTpbWzEyMF0sMjU2XSw4NTcwOltbMTIwLDEwNV0sMjU2XSw4NTcxOltbMTIwLDEwNSwxMDVdLDI1Nl0sODU3MjpbWzEwOF0sMjU2XSw4NTczOltbOTldLDI1Nl0sODU3NDpbWzEwMF0sMjU2XSw4NTc1OltbMTA5XSwyNTZdLDg1ODU6W1s0OCw4MjYwLDUxXSwyNTZdLDg1OTI6WywsezgyNDo4NjAyfV0sODU5NDpbLCx7ODI0Ojg2MDN9XSw4NTk2OlssLHs4MjQ6ODYyMn1dLDg2MDI6W1s4NTkyLDgyNF1dLDg2MDM6W1s4NTk0LDgyNF1dLDg2MjI6W1s4NTk2LDgyNF1dLDg2NTM6W1s4NjU2LDgyNF1dLDg2NTQ6W1s4NjYwLDgyNF1dLDg2NTU6W1s4NjU4LDgyNF1dLDg2NTY6WywsezgyNDo4NjUzfV0sODY1ODpbLCx7ODI0Ojg2NTV9XSw4NjYwOlssLHs4MjQ6ODY1NH1dfSwKODcwNDp7ODcwNzpbLCx7ODI0Ojg3MDh9XSw4NzA4OltbODcwNyw4MjRdXSw4NzEyOlssLHs4MjQ6ODcxM31dLDg3MTM6W1s4NzEyLDgyNF1dLDg3MTU6WywsezgyNDo4NzE2fV0sODcxNjpbWzg3MTUsODI0XV0sODczOTpbLCx7ODI0Ojg3NDB9XSw4NzQwOltbODczOSw4MjRdXSw4NzQxOlssLHs4MjQ6ODc0Mn1dLDg3NDI6W1s4NzQxLDgyNF1dLDg3NDg6W1s4NzQ3LDg3NDddLDI1Nl0sODc0OTpbWzg3NDcsODc0Nyw4NzQ3XSwyNTZdLDg3NTE6W1s4NzUwLDg3NTBdLDI1Nl0sODc1MjpbWzg3NTAsODc1MCw4NzUwXSwyNTZdLDg3NjQ6WywsezgyNDo4NzY5fV0sODc2OTpbWzg3NjQsODI0XV0sODc3MTpbLCx7ODI0Ojg3NzJ9XSw4NzcyOltbODc3MSw4MjRdXSw4NzczOlssLHs4MjQ6ODc3NX1dLDg3NzU6W1s4NzczLDgyNF1dLDg3NzY6WywsezgyNDo4Nzc3fV0sODc3NzpbWzg3NzYsODI0XV0sODc4MTpbLCx7ODI0Ojg4MTN9XSw4ODAwOltbNjEsODI0XV0sODgwMTpbLCx7ODI0Ojg4MDJ9XSw4ODAyOltbODgwMSw4MjRdXSw4ODA0OlssLHs4MjQ6ODgxNn1dLDg4MDU6WywsezgyNDo4ODE3fV0sODgxMzpbWzg3ODEsODI0XV0sODgxNDpbWzYwLDgyNF1dLDg4MTU6W1s2Miw4MjRdXSw4ODE2OltbODgwNCw4MjRdXSw4ODE3OltbODgwNSw4MjRdXSw4ODE4OlssLHs4MjQ6ODgyMH1dLDg4MTk6WywsezgyNDo4ODIxfV0sODgyMDpbWzg4MTgsODI0XV0sODgyMTpbWzg4MTksODI0XV0sODgyMjpbLCx7ODI0Ojg4MjR9XSw4ODIzOlssLHs4MjQ6ODgyNX1dLDg4MjQ6W1s4ODIyLDgyNF1dLDg4MjU6W1s4ODIzLDgyNF1dLDg4MjY6WywsezgyNDo4ODMyfV0sODgyNzpbLCx7ODI0Ojg4MzN9XSw4ODI4OlssLHs4MjQ6ODkyOH1dLDg4Mjk6WywsezgyNDo4OTI5fV0sODgzMjpbWzg4MjYsODI0XV0sODgzMzpbWzg4MjcsODI0XV0sODgzNDpbLCx7ODI0Ojg4MzZ9XSw4ODM1OlssLHs4MjQ6ODgzN31dLDg4MzY6W1s4ODM0LDgyNF1dLDg4Mzc6W1s4ODM1LDgyNF1dLDg4Mzg6WywsezgyNDo4ODQwfV0sODgzOTpbLCx7ODI0Ojg4NDF9XSw4ODQwOltbODgzOCw4MjRdXSw4ODQxOltbODgzOSw4MjRdXSw4ODQ5OlssLHs4MjQ6ODkzMH1dLDg4NTA6WywsezgyNDo4OTMxfV0sODg2NjpbLCx7ODI0Ojg4NzZ9XSw4ODcyOlssLHs4MjQ6ODg3N31dLDg4NzM6WywsezgyNDo4ODc4fV0sODg3NTpbLCx7ODI0Ojg4Nzl9XSw4ODc2OltbODg2Niw4MjRdXSw4ODc3OltbODg3Miw4MjRdXSw4ODc4OltbODg3Myw4MjRdXSw4ODc5OltbODg3NSw4MjRdXSw4ODgyOlssLHs4MjQ6ODkzOH1dLDg4ODM6WywsezgyNDo4OTM5fV0sODg4NDpbLCx7ODI0Ojg5NDB9XSw4ODg1OlssLHs4MjQ6ODk0MX1dLDg5Mjg6W1s4ODI4LDgyNF1dLDg5Mjk6W1s4ODI5LDgyNF1dLDg5MzA6W1s4ODQ5LDgyNF1dLDg5MzE6W1s4ODUwLDgyNF1dLDg5Mzg6W1s4ODgyLDgyNF1dLDg5Mzk6W1s4ODgzLDgyNF1dLDg5NDA6W1s4ODg0LDgyNF1dLDg5NDE6W1s4ODg1LDgyNF1dfSwKODk2MDp7OTAwMTpbWzEyMjk2XV0sOTAwMjpbWzEyMjk3XV19LAo5MjE2Ons5MzEyOltbNDldLDI1Nl0sOTMxMzpbWzUwXSwyNTZdLDkzMTQ6W1s1MV0sMjU2XSw5MzE1OltbNTJdLDI1Nl0sOTMxNjpbWzUzXSwyNTZdLDkzMTc6W1s1NF0sMjU2XSw5MzE4OltbNTVdLDI1Nl0sOTMxOTpbWzU2XSwyNTZdLDkzMjA6W1s1N10sMjU2XSw5MzIxOltbNDksNDhdLDI1Nl0sOTMyMjpbWzQ5LDQ5XSwyNTZdLDkzMjM6W1s0OSw1MF0sMjU2XSw5MzI0OltbNDksNTFdLDI1Nl0sOTMyNTpbWzQ5LDUyXSwyNTZdLDkzMjY6W1s0OSw1M10sMjU2XSw5MzI3OltbNDksNTRdLDI1Nl0sOTMyODpbWzQ5LDU1XSwyNTZdLDkzMjk6W1s0OSw1Nl0sMjU2XSw5MzMwOltbNDksNTddLDI1Nl0sOTMzMTpbWzUwLDQ4XSwyNTZdLDkzMzI6W1s0MCw0OSw0MV0sMjU2XSw5MzMzOltbNDAsNTAsNDFdLDI1Nl0sOTMzNDpbWzQwLDUxLDQxXSwyNTZdLDkzMzU6W1s0MCw1Miw0MV0sMjU2XSw5MzM2OltbNDAsNTMsNDFdLDI1Nl0sOTMzNzpbWzQwLDU0LDQxXSwyNTZdLDkzMzg6W1s0MCw1NSw0MV0sMjU2XSw5MzM5OltbNDAsNTYsNDFdLDI1Nl0sOTM0MDpbWzQwLDU3LDQxXSwyNTZdLDkzNDE6W1s0MCw0OSw0OCw0MV0sMjU2XSw5MzQyOltbNDAsNDksNDksNDFdLDI1Nl0sOTM0MzpbWzQwLDQ5LDUwLDQxXSwyNTZdLDkzNDQ6W1s0MCw0OSw1MSw0MV0sMjU2XSw5MzQ1OltbNDAsNDksNTIsNDFdLDI1Nl0sOTM0NjpbWzQwLDQ5LDUzLDQxXSwyNTZdLDkzNDc6W1s0MCw0OSw1NCw0MV0sMjU2XSw5MzQ4OltbNDAsNDksNTUsNDFdLDI1Nl0sOTM0OTpbWzQwLDQ5LDU2LDQxXSwyNTZdLDkzNTA6W1s0MCw0OSw1Nyw0MV0sMjU2XSw5MzUxOltbNDAsNTAsNDgsNDFdLDI1Nl0sOTM1MjpbWzQ5LDQ2XSwyNTZdLDkzNTM6W1s1MCw0Nl0sMjU2XSw5MzU0OltbNTEsNDZdLDI1Nl0sOTM1NTpbWzUyLDQ2XSwyNTZdLDkzNTY6W1s1Myw0Nl0sMjU2XSw5MzU3OltbNTQsNDZdLDI1Nl0sOTM1ODpbWzU1LDQ2XSwyNTZdLDkzNTk6W1s1Niw0Nl0sMjU2XSw5MzYwOltbNTcsNDZdLDI1Nl0sOTM2MTpbWzQ5LDQ4LDQ2XSwyNTZdLDkzNjI6W1s0OSw0OSw0Nl0sMjU2XSw5MzYzOltbNDksNTAsNDZdLDI1Nl0sOTM2NDpbWzQ5LDUxLDQ2XSwyNTZdLDkzNjU6W1s0OSw1Miw0Nl0sMjU2XSw5MzY2OltbNDksNTMsNDZdLDI1Nl0sOTM2NzpbWzQ5LDU0LDQ2XSwyNTZdLDkzNjg6W1s0OSw1NSw0Nl0sMjU2XSw5MzY5OltbNDksNTYsNDZdLDI1Nl0sOTM3MDpbWzQ5LDU3LDQ2XSwyNTZdLDkzNzE6W1s1MCw0OCw0Nl0sMjU2XSw5MzcyOltbNDAsOTcsNDFdLDI1Nl0sOTM3MzpbWzQwLDk4LDQxXSwyNTZdLDkzNzQ6W1s0MCw5OSw0MV0sMjU2XSw5Mzc1OltbNDAsMTAwLDQxXSwyNTZdLDkzNzY6W1s0MCwxMDEsNDFdLDI1Nl0sOTM3NzpbWzQwLDEwMiw0MV0sMjU2XSw5Mzc4OltbNDAsMTAzLDQxXSwyNTZdLDkzNzk6W1s0MCwxMDQsNDFdLDI1Nl0sOTM4MDpbWzQwLDEwNSw0MV0sMjU2XSw5MzgxOltbNDAsMTA2LDQxXSwyNTZdLDkzODI6W1s0MCwxMDcsNDFdLDI1Nl0sOTM4MzpbWzQwLDEwOCw0MV0sMjU2XSw5Mzg0OltbNDAsMTA5LDQxXSwyNTZdLDkzODU6W1s0MCwxMTAsNDFdLDI1Nl0sOTM4NjpbWzQwLDExMSw0MV0sMjU2XSw5Mzg3OltbNDAsMTEyLDQxXSwyNTZdLDkzODg6W1s0MCwxMTMsNDFdLDI1Nl0sOTM4OTpbWzQwLDExNCw0MV0sMjU2XSw5MzkwOltbNDAsMTE1LDQxXSwyNTZdLDkzOTE6W1s0MCwxMTYsNDFdLDI1Nl0sOTM5MjpbWzQwLDExNyw0MV0sMjU2XSw5MzkzOltbNDAsMTE4LDQxXSwyNTZdLDkzOTQ6W1s0MCwxMTksNDFdLDI1Nl0sOTM5NTpbWzQwLDEyMCw0MV0sMjU2XSw5Mzk2OltbNDAsMTIxLDQxXSwyNTZdLDkzOTc6W1s0MCwxMjIsNDFdLDI1Nl0sOTM5ODpbWzY1XSwyNTZdLDkzOTk6W1s2Nl0sMjU2XSw5NDAwOltbNjddLDI1Nl0sOTQwMTpbWzY4XSwyNTZdLDk0MDI6W1s2OV0sMjU2XSw5NDAzOltbNzBdLDI1Nl0sOTQwNDpbWzcxXSwyNTZdLDk0MDU6W1s3Ml0sMjU2XSw5NDA2OltbNzNdLDI1Nl0sOTQwNzpbWzc0XSwyNTZdLDk0MDg6W1s3NV0sMjU2XSw5NDA5OltbNzZdLDI1Nl0sOTQxMDpbWzc3XSwyNTZdLDk0MTE6W1s3OF0sMjU2XSw5NDEyOltbNzldLDI1Nl0sOTQxMzpbWzgwXSwyNTZdLDk0MTQ6W1s4MV0sMjU2XSw5NDE1OltbODJdLDI1Nl0sOTQxNjpbWzgzXSwyNTZdLDk0MTc6W1s4NF0sMjU2XSw5NDE4OltbODVdLDI1Nl0sOTQxOTpbWzg2XSwyNTZdLDk0MjA6W1s4N10sMjU2XSw5NDIxOltbODhdLDI1Nl0sOTQyMjpbWzg5XSwyNTZdLDk0MjM6W1s5MF0sMjU2XSw5NDI0OltbOTddLDI1Nl0sOTQyNTpbWzk4XSwyNTZdLDk0MjY6W1s5OV0sMjU2XSw5NDI3OltbMTAwXSwyNTZdLDk0Mjg6W1sxMDFdLDI1Nl0sOTQyOTpbWzEwMl0sMjU2XSw5NDMwOltbMTAzXSwyNTZdLDk0MzE6W1sxMDRdLDI1Nl0sOTQzMjpbWzEwNV0sMjU2XSw5NDMzOltbMTA2XSwyNTZdLDk0MzQ6W1sxMDddLDI1Nl0sOTQzNTpbWzEwOF0sMjU2XSw5NDM2OltbMTA5XSwyNTZdLDk0Mzc6W1sxMTBdLDI1Nl0sOTQzODpbWzExMV0sMjU2XSw5NDM5OltbMTEyXSwyNTZdLDk0NDA6W1sxMTNdLDI1Nl0sOTQ0MTpbWzExNF0sMjU2XSw5NDQyOltbMTE1XSwyNTZdLDk0NDM6W1sxMTZdLDI1Nl0sOTQ0NDpbWzExN10sMjU2XSw5NDQ1OltbMTE4XSwyNTZdLDk0NDY6W1sxMTldLDI1Nl0sOTQ0NzpbWzEyMF0sMjU2XSw5NDQ4OltbMTIxXSwyNTZdLDk0NDk6W1sxMjJdLDI1Nl0sOTQ1MDpbWzQ4XSwyNTZdfSwKMTA3NTI6ezEwNzY0OltbODc0Nyw4NzQ3LDg3NDcsODc0N10sMjU2XSwxMDg2ODpbWzU4LDU4LDYxXSwyNTZdLDEwODY5OltbNjEsNjFdLDI1Nl0sMTA4NzA6W1s2MSw2MSw2MV0sMjU2XSwxMDk3MjpbWzEwOTczLDgyNF0sNTEyXX0sCjExMjY0OnsxMTM4ODpbWzEwNl0sMjU2XSwxMTM4OTpbWzg2XSwyNTZdLDExNTAzOlssMjMwXSwxMTUwNDpbLDIzMF0sMTE1MDU6WywyMzBdfSwKMTE1MjA6ezExNjMxOltbMTE2MTddLDI1Nl0sMTE2NDc6Wyw5XSwxMTc0NDpbLDIzMF0sMTE3NDU6WywyMzBdLDExNzQ2OlssMjMwXSwxMTc0NzpbLDIzMF0sMTE3NDg6WywyMzBdLDExNzQ5OlssMjMwXSwxMTc1MDpbLDIzMF0sMTE3NTE6WywyMzBdLDExNzUyOlssMjMwXSwxMTc1MzpbLDIzMF0sMTE3NTQ6WywyMzBdLDExNzU1OlssMjMwXSwxMTc1NjpbLDIzMF0sMTE3NTc6WywyMzBdLDExNzU4OlssMjMwXSwxMTc1OTpbLDIzMF0sMTE3NjA6WywyMzBdLDExNzYxOlssMjMwXSwxMTc2MjpbLDIzMF0sMTE3NjM6WywyMzBdLDExNzY0OlssMjMwXSwxMTc2NTpbLDIzMF0sMTE3NjY6WywyMzBdLDExNzY3OlssMjMwXSwxMTc2ODpbLDIzMF0sMTE3Njk6WywyMzBdLDExNzcwOlssMjMwXSwxMTc3MTpbLDIzMF0sMTE3NzI6WywyMzBdLDExNzczOlssMjMwXSwxMTc3NDpbLDIzMF0sMTE3NzU6WywyMzBdfSwKMTE3NzY6ezExOTM1OltbMjc1OTddLDI1Nl0sMTIwMTk6W1s0MDg2M10sMjU2XX0sCjEyMDMyOnsxMjAzMjpbWzE5OTY4XSwyNTZdLDEyMDMzOltbMjAwMDhdLDI1Nl0sMTIwMzQ6W1syMDAyMl0sMjU2XSwxMjAzNTpbWzIwMDMxXSwyNTZdLDEyMDM2OltbMjAwNTddLDI1Nl0sMTIwMzc6W1syMDEwMV0sMjU2XSwxMjAzODpbWzIwMTA4XSwyNTZdLDEyMDM5OltbMjAxMjhdLDI1Nl0sMTIwNDA6W1syMDE1NF0sMjU2XSwxMjA0MTpbWzIwNzk5XSwyNTZdLDEyMDQyOltbMjA4MzddLDI1Nl0sMTIwNDM6W1syMDg0M10sMjU2XSwxMjA0NDpbWzIwODY2XSwyNTZdLDEyMDQ1OltbMjA4ODZdLDI1Nl0sMTIwNDY6W1syMDkwN10sMjU2XSwxMjA0NzpbWzIwOTYwXSwyNTZdLDEyMDQ4OltbMjA5ODFdLDI1Nl0sMTIwNDk6W1syMDk5Ml0sMjU2XSwxMjA1MDpbWzIxMTQ3XSwyNTZdLDEyMDUxOltbMjEyNDFdLDI1Nl0sMTIwNTI6W1syMTI2OV0sMjU2XSwxMjA1MzpbWzIxMjc0XSwyNTZdLDEyMDU0OltbMjEzMDRdLDI1Nl0sMTIwNTU6W1syMTMxM10sMjU2XSwxMjA1NjpbWzIxMzQwXSwyNTZdLDEyMDU3OltbMjEzNTNdLDI1Nl0sMTIwNTg6W1syMTM3OF0sMjU2XSwxMjA1OTpbWzIxNDMwXSwyNTZdLDEyMDYwOltbMjE0NDhdLDI1Nl0sMTIwNjE6W1syMTQ3NV0sMjU2XSwxMjA2MjpbWzIyMjMxXSwyNTZdLDEyMDYzOltbMjIzMDNdLDI1Nl0sMTIwNjQ6W1syMjc2M10sMjU2XSwxMjA2NTpbWzIyNzg2XSwyNTZdLDEyMDY2OltbMjI3OTRdLDI1Nl0sMTIwNjc6W1syMjgwNV0sMjU2XSwxMjA2ODpbWzIyODIzXSwyNTZdLDEyMDY5OltbMjI4OTldLDI1Nl0sMTIwNzA6W1syMzM3Nl0sMjU2XSwxMjA3MTpbWzIzNDI0XSwyNTZdLDEyMDcyOltbMjM1NDRdLDI1Nl0sMTIwNzM6W1syMzU2N10sMjU2XSwxMjA3NDpbWzIzNTg2XSwyNTZdLDEyMDc1OltbMjM2MDhdLDI1Nl0sMTIwNzY6W1syMzY2Ml0sMjU2XSwxMjA3NzpbWzIzNjY1XSwyNTZdLDEyMDc4OltbMjQwMjddLDI1Nl0sMTIwNzk6W1syNDAzN10sMjU2XSwxMjA4MDpbWzI0MDQ5XSwyNTZdLDEyMDgxOltbMjQwNjJdLDI1Nl0sMTIwODI6W1syNDE3OF0sMjU2XSwxMjA4MzpbWzI0MTg2XSwyNTZdLDEyMDg0OltbMjQxOTFdLDI1Nl0sMTIwODU6W1syNDMwOF0sMjU2XSwxMjA4NjpbWzI0MzE4XSwyNTZdLDEyMDg3OltbMjQzMzFdLDI1Nl0sMTIwODg6W1syNDMzOV0sMjU2XSwxMjA4OTpbWzI0NDAwXSwyNTZdLDEyMDkwOltbMjQ0MTddLDI1Nl0sMTIwOTE6W1syNDQzNV0sMjU2XSwxMjA5MjpbWzI0NTE1XSwyNTZdLDEyMDkzOltbMjUwOTZdLDI1Nl0sMTIwOTQ6W1syNTE0Ml0sMjU2XSwxMjA5NTpbWzI1MTYzXSwyNTZdLDEyMDk2OltbMjU5MDNdLDI1Nl0sMTIwOTc6W1syNTkwOF0sMjU2XSwxMjA5ODpbWzI1OTkxXSwyNTZdLDEyMDk5OltbMjYwMDddLDI1Nl0sMTIxMDA6W1syNjAyMF0sMjU2XSwxMjEwMTpbWzI2MDQxXSwyNTZdLDEyMTAyOltbMjYwODBdLDI1Nl0sMTIxMDM6W1syNjA4NV0sMjU2XSwxMjEwNDpbWzI2MzUyXSwyNTZdLDEyMTA1OltbMjYzNzZdLDI1Nl0sMTIxMDY6W1syNjQwOF0sMjU2XSwxMjEwNzpbWzI3NDI0XSwyNTZdLDEyMTA4OltbMjc0OTBdLDI1Nl0sMTIxMDk6W1syNzUxM10sMjU2XSwxMjExMDpbWzI3NTcxXSwyNTZdLDEyMTExOltbMjc1OTVdLDI1Nl0sMTIxMTI6W1syNzYwNF0sMjU2XSwxMjExMzpbWzI3NjExXSwyNTZdLDEyMTE0OltbMjc2NjNdLDI1Nl0sMTIxMTU6W1syNzY2OF0sMjU2XSwxMjExNjpbWzI3NzAwXSwyNTZdLDEyMTE3OltbMjg3NzldLDI1Nl0sMTIxMTg6W1syOTIyNl0sMjU2XSwxMjExOTpbWzI5MjM4XSwyNTZdLDEyMTIwOltbMjkyNDNdLDI1Nl0sMTIxMjE6W1syOTI0N10sMjU2XSwxMjEyMjpbWzI5MjU1XSwyNTZdLDEyMTIzOltbMjkyNzNdLDI1Nl0sMTIxMjQ6W1syOTI3NV0sMjU2XSwxMjEyNTpbWzI5MzU2XSwyNTZdLDEyMTI2OltbMjk1NzJdLDI1Nl0sMTIxMjc6W1syOTU3N10sMjU2XSwxMjEyODpbWzI5OTE2XSwyNTZdLDEyMTI5OltbMjk5MjZdLDI1Nl0sMTIxMzA6W1syOTk3Nl0sMjU2XSwxMjEzMTpbWzI5OTgzXSwyNTZdLDEyMTMyOltbMjk5OTJdLDI1Nl0sMTIxMzM6W1szMDAwMF0sMjU2XSwxMjEzNDpbWzMwMDkxXSwyNTZdLDEyMTM1OltbMzAwOThdLDI1Nl0sMTIxMzY6W1szMDMyNl0sMjU2XSwxMjEzNzpbWzMwMzMzXSwyNTZdLDEyMTM4OltbMzAzODJdLDI1Nl0sMTIxMzk6W1szMDM5OV0sMjU2XSwxMjE0MDpbWzMwNDQ2XSwyNTZdLDEyMTQxOltbMzA2ODNdLDI1Nl0sMTIxNDI6W1szMDY5MF0sMjU2XSwxMjE0MzpbWzMwNzA3XSwyNTZdLDEyMTQ0OltbMzEwMzRdLDI1Nl0sMTIxNDU6W1szMTE2MF0sMjU2XSwxMjE0NjpbWzMxMTY2XSwyNTZdLDEyMTQ3OltbMzEzNDhdLDI1Nl0sMTIxNDg6W1szMTQzNV0sMjU2XSwxMjE0OTpbWzMxNDgxXSwyNTZdLDEyMTUwOltbMzE4NTldLDI1Nl0sMTIxNTE6W1szMTk5Ml0sMjU2XSwxMjE1MjpbWzMyNTY2XSwyNTZdLDEyMTUzOltbMzI1OTNdLDI1Nl0sMTIxNTQ6W1szMjY1MF0sMjU2XSwxMjE1NTpbWzMyNzAxXSwyNTZdLDEyMTU2OltbMzI3NjldLDI1Nl0sMTIxNTc6W1szMjc4MF0sMjU2XSwxMjE1ODpbWzMyNzg2XSwyNTZdLDEyMTU5OltbMzI4MTldLDI1Nl0sMTIxNjA6W1szMjg5NV0sMjU2XSwxMjE2MTpbWzMyOTA1XSwyNTZdLDEyMTYyOltbMzMyNTFdLDI1Nl0sMTIxNjM6W1szMzI1OF0sMjU2XSwxMjE2NDpbWzMzMjY3XSwyNTZdLDEyMTY1OltbMzMyNzZdLDI1Nl0sMTIxNjY6W1szMzI5Ml0sMjU2XSwxMjE2NzpbWzMzMzA3XSwyNTZdLDEyMTY4OltbMzMzMTFdLDI1Nl0sMTIxNjk6W1szMzM5MF0sMjU2XSwxMjE3MDpbWzMzMzk0XSwyNTZdLDEyMTcxOltbMzM0MDBdLDI1Nl0sMTIxNzI6W1szNDM4MV0sMjU2XSwxMjE3MzpbWzM0NDExXSwyNTZdLDEyMTc0OltbMzQ4ODBdLDI1Nl0sMTIxNzU6W1szNDg5Ml0sMjU2XSwxMjE3NjpbWzM0OTE1XSwyNTZdLDEyMTc3OltbMzUxOThdLDI1Nl0sMTIxNzg6W1szNTIxMV0sMjU2XSwxMjE3OTpbWzM1MjgyXSwyNTZdLDEyMTgwOltbMzUzMjhdLDI1Nl0sMTIxODE6W1szNTg5NV0sMjU2XSwxMjE4MjpbWzM1OTEwXSwyNTZdLDEyMTgzOltbMzU5MjVdLDI1Nl0sMTIxODQ6W1szNTk2MF0sMjU2XSwxMjE4NTpbWzM1OTk3XSwyNTZdLDEyMTg2OltbMzYxOTZdLDI1Nl0sMTIxODc6W1szNjIwOF0sMjU2XSwxMjE4ODpbWzM2Mjc1XSwyNTZdLDEyMTg5OltbMzY1MjNdLDI1Nl0sMTIxOTA6W1szNjU1NF0sMjU2XSwxMjE5MTpbWzM2NzYzXSwyNTZdLDEyMTkyOltbMzY3ODRdLDI1Nl0sMTIxOTM6W1szNjc4OV0sMjU2XSwxMjE5NDpbWzM3MDA5XSwyNTZdLDEyMTk1OltbMzcxOTNdLDI1Nl0sMTIxOTY6W1szNzMxOF0sMjU2XSwxMjE5NzpbWzM3MzI0XSwyNTZdLDEyMTk4OltbMzczMjldLDI1Nl0sMTIxOTk6W1szODI2M10sMjU2XSwxMjIwMDpbWzM4MjcyXSwyNTZdLDEyMjAxOltbMzg0MjhdLDI1Nl0sMTIyMDI6W1szODU4Ml0sMjU2XSwxMjIwMzpbWzM4NTg1XSwyNTZdLDEyMjA0OltbMzg2MzJdLDI1Nl0sMTIyMDU6W1szODczN10sMjU2XSwxMjIwNjpbWzM4NzUwXSwyNTZdLDEyMjA3OltbMzg3NTRdLDI1Nl0sMTIyMDg6W1szODc2MV0sMjU2XSwxMjIwOTpbWzM4ODU5XSwyNTZdLDEyMjEwOltbMzg4OTNdLDI1Nl0sMTIyMTE6W1szODg5OV0sMjU2XSwxMjIxMjpbWzM4OTEzXSwyNTZdLDEyMjEzOltbMzkwODBdLDI1Nl0sMTIyMTQ6W1szOTEzMV0sMjU2XSwxMjIxNTpbWzM5MTM1XSwyNTZdLDEyMjE2OltbMzkzMThdLDI1Nl0sMTIyMTc6W1szOTMyMV0sMjU2XSwxMjIxODpbWzM5MzQwXSwyNTZdLDEyMjE5OltbMzk1OTJdLDI1Nl0sMTIyMjA6W1szOTY0MF0sMjU2XSwxMjIyMTpbWzM5NjQ3XSwyNTZdLDEyMjIyOltbMzk3MTddLDI1Nl0sMTIyMjM6W1szOTcyN10sMjU2XSwxMjIyNDpbWzM5NzMwXSwyNTZdLDEyMjI1OltbMzk3NDBdLDI1Nl0sMTIyMjY6W1szOTc3MF0sMjU2XSwxMjIyNzpbWzQwMTY1XSwyNTZdLDEyMjI4OltbNDA1NjVdLDI1Nl0sMTIyMjk6W1s0MDU3NV0sMjU2XSwxMjIzMDpbWzQwNjEzXSwyNTZdLDEyMjMxOltbNDA2MzVdLDI1Nl0sMTIyMzI6W1s0MDY0M10sMjU2XSwxMjIzMzpbWzQwNjUzXSwyNTZdLDEyMjM0OltbNDA2NTddLDI1Nl0sMTIyMzU6W1s0MDY5N10sMjU2XSwxMjIzNjpbWzQwNzAxXSwyNTZdLDEyMjM3OltbNDA3MThdLDI1Nl0sMTIyMzg6W1s0MDcyM10sMjU2XSwxMjIzOTpbWzQwNzM2XSwyNTZdLDEyMjQwOltbNDA3NjNdLDI1Nl0sMTIyNDE6W1s0MDc3OF0sMjU2XSwxMjI0MjpbWzQwNzg2XSwyNTZdLDEyMjQzOltbNDA4NDVdLDI1Nl0sMTIyNDQ6W1s0MDg2MF0sMjU2XSwxMjI0NTpbWzQwODY0XSwyNTZdfSwKMTIyODg6ezEyMjg4OltbMzJdLDI1Nl0sMTIzMzA6WywyMThdLDEyMzMxOlssMjI4XSwxMjMzMjpbLDIzMl0sMTIzMzM6WywyMjJdLDEyMzM0OlssMjI0XSwxMjMzNTpbLDIyNF0sMTIzNDI6W1sxMjMwNl0sMjU2XSwxMjM0NDpbWzIxMzEzXSwyNTZdLDEyMzQ1OltbMjEzMTZdLDI1Nl0sMTIzNDY6W1syMTMxN10sMjU2XSwxMjM1ODpbLCx7MTI0NDE6MTI0MzZ9XSwxMjM2MzpbLCx7MTI0NDE6MTIzNjR9XSwxMjM2NDpbWzEyMzYzLDEyNDQxXV0sMTIzNjU6WywsezEyNDQxOjEyMzY2fV0sMTIzNjY6W1sxMjM2NSwxMjQ0MV1dLDEyMzY3OlssLHsxMjQ0MToxMjM2OH1dLDEyMzY4OltbMTIzNjcsMTI0NDFdXSwxMjM2OTpbLCx7MTI0NDE6MTIzNzB9XSwxMjM3MDpbWzEyMzY5LDEyNDQxXV0sMTIzNzE6WywsezEyNDQxOjEyMzcyfV0sMTIzNzI6W1sxMjM3MSwxMjQ0MV1dLDEyMzczOlssLHsxMjQ0MToxMjM3NH1dLDEyMzc0OltbMTIzNzMsMTI0NDFdXSwxMjM3NTpbLCx7MTI0NDE6MTIzNzZ9XSwxMjM3NjpbWzEyMzc1LDEyNDQxXV0sMTIzNzc6WywsezEyNDQxOjEyMzc4fV0sMTIzNzg6W1sxMjM3NywxMjQ0MV1dLDEyMzc5OlssLHsxMjQ0MToxMjM4MH1dLDEyMzgwOltbMTIzNzksMTI0NDFdXSwxMjM4MTpbLCx7MTI0NDE6MTIzODJ9XSwxMjM4MjpbWzEyMzgxLDEyNDQxXV0sMTIzODM6WywsezEyNDQxOjEyMzg0fV0sMTIzODQ6W1sxMjM4MywxMjQ0MV1dLDEyMzg1OlssLHsxMjQ0MToxMjM4Nn1dLDEyMzg2OltbMTIzODUsMTI0NDFdXSwxMjM4ODpbLCx7MTI0NDE6MTIzODl9XSwxMjM4OTpbWzEyMzg4LDEyNDQxXV0sMTIzOTA6WywsezEyNDQxOjEyMzkxfV0sMTIzOTE6W1sxMjM5MCwxMjQ0MV1dLDEyMzkyOlssLHsxMjQ0MToxMjM5M31dLDEyMzkzOltbMTIzOTIsMTI0NDFdXSwxMjM5OTpbLCx7MTI0NDE6MTI0MDAsMTI0NDI6MTI0MDF9XSwxMjQwMDpbWzEyMzk5LDEyNDQxXV0sMTI0MDE6W1sxMjM5OSwxMjQ0Ml1dLDEyNDAyOlssLHsxMjQ0MToxMjQwMywxMjQ0MjoxMjQwNH1dLDEyNDAzOltbMTI0MDIsMTI0NDFdXSwxMjQwNDpbWzEyNDAyLDEyNDQyXV0sMTI0MDU6WywsezEyNDQxOjEyNDA2LDEyNDQyOjEyNDA3fV0sMTI0MDY6W1sxMjQwNSwxMjQ0MV1dLDEyNDA3OltbMTI0MDUsMTI0NDJdXSwxMjQwODpbLCx7MTI0NDE6MTI0MDksMTI0NDI6MTI0MTB9XSwxMjQwOTpbWzEyNDA4LDEyNDQxXV0sMTI0MTA6W1sxMjQwOCwxMjQ0Ml1dLDEyNDExOlssLHsxMjQ0MToxMjQxMiwxMjQ0MjoxMjQxM31dLDEyNDEyOltbMTI0MTEsMTI0NDFdXSwxMjQxMzpbWzEyNDExLDEyNDQyXV0sMTI0MzY6W1sxMjM1OCwxMjQ0MV1dLDEyNDQxOlssOF0sMTI0NDI6Wyw4XSwxMjQ0MzpbWzMyLDEyNDQxXSwyNTZdLDEyNDQ0OltbMzIsMTI0NDJdLDI1Nl0sMTI0NDU6WywsezEyNDQxOjEyNDQ2fV0sMTI0NDY6W1sxMjQ0NSwxMjQ0MV1dLDEyNDQ3OltbMTI0MjQsMTI0MjZdLDI1Nl0sMTI0NTQ6WywsezEyNDQxOjEyNTMyfV0sMTI0NTk6WywsezEyNDQxOjEyNDYwfV0sMTI0NjA6W1sxMjQ1OSwxMjQ0MV1dLDEyNDYxOlssLHsxMjQ0MToxMjQ2Mn1dLDEyNDYyOltbMTI0NjEsMTI0NDFdXSwxMjQ2MzpbLCx7MTI0NDE6MTI0NjR9XSwxMjQ2NDpbWzEyNDYzLDEyNDQxXV0sMTI0NjU6WywsezEyNDQxOjEyNDY2fV0sMTI0NjY6W1sxMjQ2NSwxMjQ0MV1dLDEyNDY3OlssLHsxMjQ0MToxMjQ2OH1dLDEyNDY4OltbMTI0NjcsMTI0NDFdXSwxMjQ2OTpbLCx7MTI0NDE6MTI0NzB9XSwxMjQ3MDpbWzEyNDY5LDEyNDQxXV0sMTI0NzE6WywsezEyNDQxOjEyNDcyfV0sMTI0NzI6W1sxMjQ3MSwxMjQ0MV1dLDEyNDczOlssLHsxMjQ0MToxMjQ3NH1dLDEyNDc0OltbMTI0NzMsMTI0NDFdXSwxMjQ3NTpbLCx7MTI0NDE6MTI0NzZ9XSwxMjQ3NjpbWzEyNDc1LDEyNDQxXV0sMTI0Nzc6WywsezEyNDQxOjEyNDc4fV0sMTI0Nzg6W1sxMjQ3NywxMjQ0MV1dLDEyNDc5OlssLHsxMjQ0MToxMjQ4MH1dLDEyNDgwOltbMTI0NzksMTI0NDFdXSwxMjQ4MTpbLCx7MTI0NDE6MTI0ODJ9XSwxMjQ4MjpbWzEyNDgxLDEyNDQxXV0sMTI0ODQ6WywsezEyNDQxOjEyNDg1fV0sMTI0ODU6W1sxMjQ4NCwxMjQ0MV1dLDEyNDg2OlssLHsxMjQ0MToxMjQ4N31dLDEyNDg3OltbMTI0ODYsMTI0NDFdXSwxMjQ4ODpbLCx7MTI0NDE6MTI0ODl9XSwxMjQ4OTpbWzEyNDg4LDEyNDQxXV0sMTI0OTU6WywsezEyNDQxOjEyNDk2LDEyNDQyOjEyNDk3fV0sMTI0OTY6W1sxMjQ5NSwxMjQ0MV1dLDEyNDk3OltbMTI0OTUsMTI0NDJdXSwxMjQ5ODpbLCx7MTI0NDE6MTI0OTksMTI0NDI6MTI1MDB9XSwxMjQ5OTpbWzEyNDk4LDEyNDQxXV0sMTI1MDA6W1sxMjQ5OCwxMjQ0Ml1dLDEyNTAxOlssLHsxMjQ0MToxMjUwMiwxMjQ0MjoxMjUwM31dLDEyNTAyOltbMTI1MDEsMTI0NDFdXSwxMjUwMzpbWzEyNTAxLDEyNDQyXV0sMTI1MDQ6WywsezEyNDQxOjEyNTA1LDEyNDQyOjEyNTA2fV0sMTI1MDU6W1sxMjUwNCwxMjQ0MV1dLDEyNTA2OltbMTI1MDQsMTI0NDJdXSwxMjUwNzpbLCx7MTI0NDE6MTI1MDgsMTI0NDI6MTI1MDl9XSwxMjUwODpbWzEyNTA3LDEyNDQxXV0sMTI1MDk6W1sxMjUwNywxMjQ0Ml1dLDEyNTI3OlssLHsxMjQ0MToxMjUzNX1dLDEyNTI4OlssLHsxMjQ0MToxMjUzNn1dLDEyNTI5OlssLHsxMjQ0MToxMjUzN31dLDEyNTMwOlssLHsxMjQ0MToxMjUzOH1dLDEyNTMyOltbMTI0NTQsMTI0NDFdXSwxMjUzNTpbWzEyNTI3LDEyNDQxXV0sMTI1MzY6W1sxMjUyOCwxMjQ0MV1dLDEyNTM3OltbMTI1MjksMTI0NDFdXSwxMjUzODpbWzEyNTMwLDEyNDQxXV0sMTI1NDE6WywsezEyNDQxOjEyNTQyfV0sMTI1NDI6W1sxMjU0MSwxMjQ0MV1dLDEyNTQzOltbMTI0NjcsMTI0ODhdLDI1Nl19LAoxMjU0NDp7MTI1OTM6W1s0MzUyXSwyNTZdLDEyNTk0OltbNDM1M10sMjU2XSwxMjU5NTpbWzQ1MjJdLDI1Nl0sMTI1OTY6W1s0MzU0XSwyNTZdLDEyNTk3OltbNDUyNF0sMjU2XSwxMjU5ODpbWzQ1MjVdLDI1Nl0sMTI1OTk6W1s0MzU1XSwyNTZdLDEyNjAwOltbNDM1Nl0sMjU2XSwxMjYwMTpbWzQzNTddLDI1Nl0sMTI2MDI6W1s0NTI4XSwyNTZdLDEyNjAzOltbNDUyOV0sMjU2XSwxMjYwNDpbWzQ1MzBdLDI1Nl0sMTI2MDU6W1s0NTMxXSwyNTZdLDEyNjA2OltbNDUzMl0sMjU2XSwxMjYwNzpbWzQ1MzNdLDI1Nl0sMTI2MDg6W1s0Mzc4XSwyNTZdLDEyNjA5OltbNDM1OF0sMjU2XSwxMjYxMDpbWzQzNTldLDI1Nl0sMTI2MTE6W1s0MzYwXSwyNTZdLDEyNjEyOltbNDM4NV0sMjU2XSwxMjYxMzpbWzQzNjFdLDI1Nl0sMTI2MTQ6W1s0MzYyXSwyNTZdLDEyNjE1OltbNDM2M10sMjU2XSwxMjYxNjpbWzQzNjRdLDI1Nl0sMTI2MTc6W1s0MzY1XSwyNTZdLDEyNjE4OltbNDM2Nl0sMjU2XSwxMjYxOTpbWzQzNjddLDI1Nl0sMTI2MjA6W1s0MzY4XSwyNTZdLDEyNjIxOltbNDM2OV0sMjU2XSwxMjYyMjpbWzQzNzBdLDI1Nl0sMTI2MjM6W1s0NDQ5XSwyNTZdLDEyNjI0OltbNDQ1MF0sMjU2XSwxMjYyNTpbWzQ0NTFdLDI1Nl0sMTI2MjY6W1s0NDUyXSwyNTZdLDEyNjI3OltbNDQ1M10sMjU2XSwxMjYyODpbWzQ0NTRdLDI1Nl0sMTI2Mjk6W1s0NDU1XSwyNTZdLDEyNjMwOltbNDQ1Nl0sMjU2XSwxMjYzMTpbWzQ0NTddLDI1Nl0sMTI2MzI6W1s0NDU4XSwyNTZdLDEyNjMzOltbNDQ1OV0sMjU2XSwxMjYzNDpbWzQ0NjBdLDI1Nl0sMTI2MzU6W1s0NDYxXSwyNTZdLDEyNjM2OltbNDQ2Ml0sMjU2XSwxMjYzNzpbWzQ0NjNdLDI1Nl0sMTI2Mzg6W1s0NDY0XSwyNTZdLDEyNjM5OltbNDQ2NV0sMjU2XSwxMjY0MDpbWzQ0NjZdLDI1Nl0sMTI2NDE6W1s0NDY3XSwyNTZdLDEyNjQyOltbNDQ2OF0sMjU2XSwxMjY0MzpbWzQ0NjldLDI1Nl0sMTI2NDQ6W1s0NDQ4XSwyNTZdLDEyNjQ1OltbNDM3Ml0sMjU2XSwxMjY0NjpbWzQzNzNdLDI1Nl0sMTI2NDc6W1s0NTUxXSwyNTZdLDEyNjQ4OltbNDU1Ml0sMjU2XSwxMjY0OTpbWzQ1NTZdLDI1Nl0sMTI2NTA6W1s0NTU4XSwyNTZdLDEyNjUxOltbNDU2M10sMjU2XSwxMjY1MjpbWzQ1NjddLDI1Nl0sMTI2NTM6W1s0NTY5XSwyNTZdLDEyNjU0OltbNDM4MF0sMjU2XSwxMjY1NTpbWzQ1NzNdLDI1Nl0sMTI2NTY6W1s0NTc1XSwyNTZdLDEyNjU3OltbNDM4MV0sMjU2XSwxMjY1ODpbWzQzODJdLDI1Nl0sMTI2NTk6W1s0Mzg0XSwyNTZdLDEyNjYwOltbNDM4Nl0sMjU2XSwxMjY2MTpbWzQzODddLDI1Nl0sMTI2NjI6W1s0MzkxXSwyNTZdLDEyNjYzOltbNDM5M10sMjU2XSwxMjY2NDpbWzQzOTVdLDI1Nl0sMTI2NjU6W1s0Mzk2XSwyNTZdLDEyNjY2OltbNDM5N10sMjU2XSwxMjY2NzpbWzQzOThdLDI1Nl0sMTI2Njg6W1s0Mzk5XSwyNTZdLDEyNjY5OltbNDQwMl0sMjU2XSwxMjY3MDpbWzQ0MDZdLDI1Nl0sMTI2NzE6W1s0NDE2XSwyNTZdLDEyNjcyOltbNDQyM10sMjU2XSwxMjY3MzpbWzQ0MjhdLDI1Nl0sMTI2NzQ6W1s0NTkzXSwyNTZdLDEyNjc1OltbNDU5NF0sMjU2XSwxMjY3NjpbWzQ0MzldLDI1Nl0sMTI2Nzc6W1s0NDQwXSwyNTZdLDEyNjc4OltbNDQ0MV0sMjU2XSwxMjY3OTpbWzQ0ODRdLDI1Nl0sMTI2ODA6W1s0NDg1XSwyNTZdLDEyNjgxOltbNDQ4OF0sMjU2XSwxMjY4MjpbWzQ0OTddLDI1Nl0sMTI2ODM6W1s0NDk4XSwyNTZdLDEyNjg0OltbNDUwMF0sMjU2XSwxMjY4NTpbWzQ1MTBdLDI1Nl0sMTI2ODY6W1s0NTEzXSwyNTZdLDEyNjkwOltbMTk5NjhdLDI1Nl0sMTI2OTE6W1syMDEwOF0sMjU2XSwxMjY5MjpbWzE5OTc3XSwyNTZdLDEyNjkzOltbMjIyMzVdLDI1Nl0sMTI2OTQ6W1sxOTk3OF0sMjU2XSwxMjY5NTpbWzIwMDEzXSwyNTZdLDEyNjk2OltbMTk5NzldLDI1Nl0sMTI2OTc6W1szMDAwMl0sMjU2XSwxMjY5ODpbWzIwMDU3XSwyNTZdLDEyNjk5OltbMTk5OTNdLDI1Nl0sMTI3MDA6W1sxOTk2OV0sMjU2XSwxMjcwMTpbWzIyODI1XSwyNTZdLDEyNzAyOltbMjIzMjBdLDI1Nl0sMTI3MDM6W1syMDE1NF0sMjU2XX0sCjEyODAwOnsxMjgwMDpbWzQwLDQzNTIsNDFdLDI1Nl0sMTI4MDE6W1s0MCw0MzU0LDQxXSwyNTZdLDEyODAyOltbNDAsNDM1NSw0MV0sMjU2XSwxMjgwMzpbWzQwLDQzNTcsNDFdLDI1Nl0sMTI4MDQ6W1s0MCw0MzU4LDQxXSwyNTZdLDEyODA1OltbNDAsNDM1OSw0MV0sMjU2XSwxMjgwNjpbWzQwLDQzNjEsNDFdLDI1Nl0sMTI4MDc6W1s0MCw0MzYzLDQxXSwyNTZdLDEyODA4OltbNDAsNDM2NCw0MV0sMjU2XSwxMjgwOTpbWzQwLDQzNjYsNDFdLDI1Nl0sMTI4MTA6W1s0MCw0MzY3LDQxXSwyNTZdLDEyODExOltbNDAsNDM2OCw0MV0sMjU2XSwxMjgxMjpbWzQwLDQzNjksNDFdLDI1Nl0sMTI4MTM6W1s0MCw0MzcwLDQxXSwyNTZdLDEyODE0OltbNDAsNDM1Miw0NDQ5LDQxXSwyNTZdLDEyODE1OltbNDAsNDM1NCw0NDQ5LDQxXSwyNTZdLDEyODE2OltbNDAsNDM1NSw0NDQ5LDQxXSwyNTZdLDEyODE3OltbNDAsNDM1Nyw0NDQ5LDQxXSwyNTZdLDEyODE4OltbNDAsNDM1OCw0NDQ5LDQxXSwyNTZdLDEyODE5OltbNDAsNDM1OSw0NDQ5LDQxXSwyNTZdLDEyODIwOltbNDAsNDM2MSw0NDQ5LDQxXSwyNTZdLDEyODIxOltbNDAsNDM2Myw0NDQ5LDQxXSwyNTZdLDEyODIyOltbNDAsNDM2NCw0NDQ5LDQxXSwyNTZdLDEyODIzOltbNDAsNDM2Niw0NDQ5LDQxXSwyNTZdLDEyODI0OltbNDAsNDM2Nyw0NDQ5LDQxXSwyNTZdLDEyODI1OltbNDAsNDM2OCw0NDQ5LDQxXSwyNTZdLDEyODI2OltbNDAsNDM2OSw0NDQ5LDQxXSwyNTZdLDEyODI3OltbNDAsNDM3MCw0NDQ5LDQxXSwyNTZdLDEyODI4OltbNDAsNDM2NCw0NDYyLDQxXSwyNTZdLDEyODI5OltbNDAsNDM2Myw0NDU3LDQzNjQsNDQ1Myw0NTIzLDQxXSwyNTZdLDEyODMwOltbNDAsNDM2Myw0NDU3LDQzNzAsNDQ2Miw0MV0sMjU2XSwxMjgzMjpbWzQwLDE5OTY4LDQxXSwyNTZdLDEyODMzOltbNDAsMjAxMDgsNDFdLDI1Nl0sMTI4MzQ6W1s0MCwxOTk3Nyw0MV0sMjU2XSwxMjgzNTpbWzQwLDIyMjM1LDQxXSwyNTZdLDEyODM2OltbNDAsMjAxMTYsNDFdLDI1Nl0sMTI4Mzc6W1s0MCwyMDg0NSw0MV0sMjU2XSwxMjgzODpbWzQwLDE5OTcxLDQxXSwyNTZdLDEyODM5OltbNDAsMjA4NDMsNDFdLDI1Nl0sMTI4NDA6W1s0MCwyMDA2MSw0MV0sMjU2XSwxMjg0MTpbWzQwLDIxMzEzLDQxXSwyNTZdLDEyODQyOltbNDAsMjYzNzYsNDFdLDI1Nl0sMTI4NDM6W1s0MCwyODc3OSw0MV0sMjU2XSwxMjg0NDpbWzQwLDI3NzAwLDQxXSwyNTZdLDEyODQ1OltbNDAsMjY0MDgsNDFdLDI1Nl0sMTI4NDY6W1s0MCwzNzMyOSw0MV0sMjU2XSwxMjg0NzpbWzQwLDIyMzAzLDQxXSwyNTZdLDEyODQ4OltbNDAsMjYwODUsNDFdLDI1Nl0sMTI4NDk6W1s0MCwyNjY2Niw0MV0sMjU2XSwxMjg1MDpbWzQwLDI2Mzc3LDQxXSwyNTZdLDEyODUxOltbNDAsMzEwMzgsNDFdLDI1Nl0sMTI4NTI6W1s0MCwyMTUxNyw0MV0sMjU2XSwxMjg1MzpbWzQwLDI5MzA1LDQxXSwyNTZdLDEyODU0OltbNDAsMzYwMDEsNDFdLDI1Nl0sMTI4NTU6W1s0MCwzMTA2OSw0MV0sMjU2XSwxMjg1NjpbWzQwLDIxMTcyLDQxXSwyNTZdLDEyODU3OltbNDAsMjAxOTUsNDFdLDI1Nl0sMTI4NTg6W1s0MCwyMTYyOCw0MV0sMjU2XSwxMjg1OTpbWzQwLDIzMzk4LDQxXSwyNTZdLDEyODYwOltbNDAsMzA0MzUsNDFdLDI1Nl0sMTI4NjE6W1s0MCwyMDIyNSw0MV0sMjU2XSwxMjg2MjpbWzQwLDM2MDM5LDQxXSwyNTZdLDEyODYzOltbNDAsMjEzMzIsNDFdLDI1Nl0sMTI4NjQ6W1s0MCwzMTA4NSw0MV0sMjU2XSwxMjg2NTpbWzQwLDIwMjQxLDQxXSwyNTZdLDEyODY2OltbNDAsMzMyNTgsNDFdLDI1Nl0sMTI4Njc6W1s0MCwzMzI2Nyw0MV0sMjU2XSwxMjg2ODpbWzIxODM5XSwyNTZdLDEyODY5OltbMjQxODhdLDI1Nl0sMTI4NzA6W1syNTk5MV0sMjU2XSwxMjg3MTpbWzMxNjMxXSwyNTZdLDEyODgwOltbODAsODQsNjldLDI1Nl0sMTI4ODE6W1s1MCw0OV0sMjU2XSwxMjg4MjpbWzUwLDUwXSwyNTZdLDEyODgzOltbNTAsNTFdLDI1Nl0sMTI4ODQ6W1s1MCw1Ml0sMjU2XSwxMjg4NTpbWzUwLDUzXSwyNTZdLDEyODg2OltbNTAsNTRdLDI1Nl0sMTI4ODc6W1s1MCw1NV0sMjU2XSwxMjg4ODpbWzUwLDU2XSwyNTZdLDEyODg5OltbNTAsNTddLDI1Nl0sMTI4OTA6W1s1MSw0OF0sMjU2XSwxMjg5MTpbWzUxLDQ5XSwyNTZdLDEyODkyOltbNTEsNTBdLDI1Nl0sMTI4OTM6W1s1MSw1MV0sMjU2XSwxMjg5NDpbWzUxLDUyXSwyNTZdLDEyODk1OltbNTEsNTNdLDI1Nl0sMTI4OTY6W1s0MzUyXSwyNTZdLDEyODk3OltbNDM1NF0sMjU2XSwxMjg5ODpbWzQzNTVdLDI1Nl0sMTI4OTk6W1s0MzU3XSwyNTZdLDEyOTAwOltbNDM1OF0sMjU2XSwxMjkwMTpbWzQzNTldLDI1Nl0sMTI5MDI6W1s0MzYxXSwyNTZdLDEyOTAzOltbNDM2M10sMjU2XSwxMjkwNDpbWzQzNjRdLDI1Nl0sMTI5MDU6W1s0MzY2XSwyNTZdLDEyOTA2OltbNDM2N10sMjU2XSwxMjkwNzpbWzQzNjhdLDI1Nl0sMTI5MDg6W1s0MzY5XSwyNTZdLDEyOTA5OltbNDM3MF0sMjU2XSwxMjkxMDpbWzQzNTIsNDQ0OV0sMjU2XSwxMjkxMTpbWzQzNTQsNDQ0OV0sMjU2XSwxMjkxMjpbWzQzNTUsNDQ0OV0sMjU2XSwxMjkxMzpbWzQzNTcsNDQ0OV0sMjU2XSwxMjkxNDpbWzQzNTgsNDQ0OV0sMjU2XSwxMjkxNTpbWzQzNTksNDQ0OV0sMjU2XSwxMjkxNjpbWzQzNjEsNDQ0OV0sMjU2XSwxMjkxNzpbWzQzNjMsNDQ0OV0sMjU2XSwxMjkxODpbWzQzNjQsNDQ0OV0sMjU2XSwxMjkxOTpbWzQzNjYsNDQ0OV0sMjU2XSwxMjkyMDpbWzQzNjcsNDQ0OV0sMjU2XSwxMjkyMTpbWzQzNjgsNDQ0OV0sMjU2XSwxMjkyMjpbWzQzNjksNDQ0OV0sMjU2XSwxMjkyMzpbWzQzNzAsNDQ0OV0sMjU2XSwxMjkyNDpbWzQzNjYsNDQ0OSw0NTM1LDQzNTIsNDQ1N10sMjU2XSwxMjkyNTpbWzQzNjQsNDQ2Miw0MzYzLDQ0NjhdLDI1Nl0sMTI5MjY6W1s0MzYzLDQ0NjJdLDI1Nl0sMTI5Mjg6W1sxOTk2OF0sMjU2XSwxMjkyOTpbWzIwMTA4XSwyNTZdLDEyOTMwOltbMTk5NzddLDI1Nl0sMTI5MzE6W1syMjIzNV0sMjU2XSwxMjkzMjpbWzIwMTE2XSwyNTZdLDEyOTMzOltbMjA4NDVdLDI1Nl0sMTI5MzQ6W1sxOTk3MV0sMjU2XSwxMjkzNTpbWzIwODQzXSwyNTZdLDEyOTM2OltbMjAwNjFdLDI1Nl0sMTI5Mzc6W1syMTMxM10sMjU2XSwxMjkzODpbWzI2Mzc2XSwyNTZdLDEyOTM5OltbMjg3NzldLDI1Nl0sMTI5NDA6W1syNzcwMF0sMjU2XSwxMjk0MTpbWzI2NDA4XSwyNTZdLDEyOTQyOltbMzczMjldLDI1Nl0sMTI5NDM6W1syMjMwM10sMjU2XSwxMjk0NDpbWzI2MDg1XSwyNTZdLDEyOTQ1OltbMjY2NjZdLDI1Nl0sMTI5NDY6W1syNjM3N10sMjU2XSwxMjk0NzpbWzMxMDM4XSwyNTZdLDEyOTQ4OltbMjE1MTddLDI1Nl0sMTI5NDk6W1syOTMwNV0sMjU2XSwxMjk1MDpbWzM2MDAxXSwyNTZdLDEyOTUxOltbMzEwNjldLDI1Nl0sMTI5NTI6W1syMTE3Ml0sMjU2XSwxMjk1MzpbWzMxMTkyXSwyNTZdLDEyOTU0OltbMzAwMDddLDI1Nl0sMTI5NTU6W1syMjg5OV0sMjU2XSwxMjk1NjpbWzM2OTY5XSwyNTZdLDEyOTU3OltbMjA3NzhdLDI1Nl0sMTI5NTg6W1syMTM2MF0sMjU2XSwxMjk1OTpbWzI3ODgwXSwyNTZdLDEyOTYwOltbMzg5MTddLDI1Nl0sMTI5NjE6W1syMDI0MV0sMjU2XSwxMjk2MjpbWzIwODg5XSwyNTZdLDEyOTYzOltbMjc0OTFdLDI1Nl0sMTI5NjQ6W1sxOTk3OF0sMjU2XSwxMjk2NTpbWzIwMDEzXSwyNTZdLDEyOTY2OltbMTk5NzldLDI1Nl0sMTI5Njc6W1syNDAzOF0sMjU2XSwxMjk2ODpbWzIxNDkxXSwyNTZdLDEyOTY5OltbMjEzMDddLDI1Nl0sMTI5NzA6W1syMzQ0N10sMjU2XSwxMjk3MTpbWzIzMzk4XSwyNTZdLDEyOTcyOltbMzA0MzVdLDI1Nl0sMTI5NzM6W1syMDIyNV0sMjU2XSwxMjk3NDpbWzM2MDM5XSwyNTZdLDEyOTc1OltbMjEzMzJdLDI1Nl0sMTI5NzY6W1syMjgxMl0sMjU2XSwxMjk3NzpbWzUxLDU0XSwyNTZdLDEyOTc4OltbNTEsNTVdLDI1Nl0sMTI5Nzk6W1s1MSw1Nl0sMjU2XSwxMjk4MDpbWzUxLDU3XSwyNTZdLDEyOTgxOltbNTIsNDhdLDI1Nl0sMTI5ODI6W1s1Miw0OV0sMjU2XSwxMjk4MzpbWzUyLDUwXSwyNTZdLDEyOTg0OltbNTIsNTFdLDI1Nl0sMTI5ODU6W1s1Miw1Ml0sMjU2XSwxMjk4NjpbWzUyLDUzXSwyNTZdLDEyOTg3OltbNTIsNTRdLDI1Nl0sMTI5ODg6W1s1Miw1NV0sMjU2XSwxMjk4OTpbWzUyLDU2XSwyNTZdLDEyOTkwOltbNTIsNTddLDI1Nl0sMTI5OTE6W1s1Myw0OF0sMjU2XSwxMjk5MjpbWzQ5LDI2Mzc2XSwyNTZdLDEyOTkzOltbNTAsMjYzNzZdLDI1Nl0sMTI5OTQ6W1s1MSwyNjM3Nl0sMjU2XSwxMjk5NTpbWzUyLDI2Mzc2XSwyNTZdLDEyOTk2OltbNTMsMjYzNzZdLDI1Nl0sMTI5OTc6W1s1NCwyNjM3Nl0sMjU2XSwxMjk5ODpbWzU1LDI2Mzc2XSwyNTZdLDEyOTk5OltbNTYsMjYzNzZdLDI1Nl0sMTMwMDA6W1s1NywyNjM3Nl0sMjU2XSwxMzAwMTpbWzQ5LDQ4LDI2Mzc2XSwyNTZdLDEzMDAyOltbNDksNDksMjYzNzZdLDI1Nl0sMTMwMDM6W1s0OSw1MCwyNjM3Nl0sMjU2XSwxMzAwNDpbWzcyLDEwM10sMjU2XSwxMzAwNTpbWzEwMSwxMTQsMTAzXSwyNTZdLDEzMDA2OltbMTAxLDg2XSwyNTZdLDEzMDA3OltbNzYsODQsNjhdLDI1Nl0sMTMwMDg6W1sxMjQ1MF0sMjU2XSwxMzAwOTpbWzEyNDUyXSwyNTZdLDEzMDEwOltbMTI0NTRdLDI1Nl0sMTMwMTE6W1sxMjQ1Nl0sMjU2XSwxMzAxMjpbWzEyNDU4XSwyNTZdLDEzMDEzOltbMTI0NTldLDI1Nl0sMTMwMTQ6W1sxMjQ2MV0sMjU2XSwxMzAxNTpbWzEyNDYzXSwyNTZdLDEzMDE2OltbMTI0NjVdLDI1Nl0sMTMwMTc6W1sxMjQ2N10sMjU2XSwxMzAxODpbWzEyNDY5XSwyNTZdLDEzMDE5OltbMTI0NzFdLDI1Nl0sMTMwMjA6W1sxMjQ3M10sMjU2XSwxMzAyMTpbWzEyNDc1XSwyNTZdLDEzMDIyOltbMTI0NzddLDI1Nl0sMTMwMjM6W1sxMjQ3OV0sMjU2XSwxMzAyNDpbWzEyNDgxXSwyNTZdLDEzMDI1OltbMTI0ODRdLDI1Nl0sMTMwMjY6W1sxMjQ4Nl0sMjU2XSwxMzAyNzpbWzEyNDg4XSwyNTZdLDEzMDI4OltbMTI0OTBdLDI1Nl0sMTMwMjk6W1sxMjQ5MV0sMjU2XSwxMzAzMDpbWzEyNDkyXSwyNTZdLDEzMDMxOltbMTI0OTNdLDI1Nl0sMTMwMzI6W1sxMjQ5NF0sMjU2XSwxMzAzMzpbWzEyNDk1XSwyNTZdLDEzMDM0OltbMTI0OThdLDI1Nl0sMTMwMzU6W1sxMjUwMV0sMjU2XSwxMzAzNjpbWzEyNTA0XSwyNTZdLDEzMDM3OltbMTI1MDddLDI1Nl0sMTMwMzg6W1sxMjUxMF0sMjU2XSwxMzAzOTpbWzEyNTExXSwyNTZdLDEzMDQwOltbMTI1MTJdLDI1Nl0sMTMwNDE6W1sxMjUxM10sMjU2XSwxMzA0MjpbWzEyNTE0XSwyNTZdLDEzMDQzOltbMTI1MTZdLDI1Nl0sMTMwNDQ6W1sxMjUxOF0sMjU2XSwxMzA0NTpbWzEyNTIwXSwyNTZdLDEzMDQ2OltbMTI1MjFdLDI1Nl0sMTMwNDc6W1sxMjUyMl0sMjU2XSwxMzA0ODpbWzEyNTIzXSwyNTZdLDEzMDQ5OltbMTI1MjRdLDI1Nl0sMTMwNTA6W1sxMjUyNV0sMjU2XSwxMzA1MTpbWzEyNTI3XSwyNTZdLDEzMDUyOltbMTI1MjhdLDI1Nl0sMTMwNTM6W1sxMjUyOV0sMjU2XSwxMzA1NDpbWzEyNTMwXSwyNTZdfSwKMTMwNTY6ezEzMDU2OltbMTI0NTAsMTI0OTcsMTI1NDAsMTI0ODhdLDI1Nl0sMTMwNTc6W1sxMjQ1MCwxMjUyMywxMjUwMSwxMjQ0OV0sMjU2XSwxMzA1ODpbWzEyNDUwLDEyNTMxLDEyNTA2LDEyNDUwXSwyNTZdLDEzMDU5OltbMTI0NTAsMTI1NDAsMTI1MjNdLDI1Nl0sMTMwNjA6W1sxMjQ1MiwxMjQ5MSwxMjUzMSwxMjQ2NF0sMjU2XSwxMzA2MTpbWzEyNDUyLDEyNTMxLDEyNDgxXSwyNTZdLDEzMDYyOltbMTI0NTQsMTI0NTcsMTI1MzFdLDI1Nl0sMTMwNjM6W1sxMjQ1NiwxMjQ3MywxMjQ2MywxMjU0MCwxMjQ4OV0sMjU2XSwxMzA2NDpbWzEyNDU2LDEyNTQwLDEyNDU5LDEyNTQwXSwyNTZdLDEzMDY1OltbMTI0NTgsMTI1MzEsMTI0NzNdLDI1Nl0sMTMwNjY6W1sxMjQ1OCwxMjU0MCwxMjUxMl0sMjU2XSwxMzA2NzpbWzEyNDU5LDEyNDUyLDEyNTIyXSwyNTZdLDEzMDY4OltbMTI0NTksMTI1MjEsMTI0ODMsMTI0ODhdLDI1Nl0sMTMwNjk6W1sxMjQ1OSwxMjUyNSwxMjUyMiwxMjU0MF0sMjU2XSwxMzA3MDpbWzEyNDYwLDEyNTI1LDEyNTMxXSwyNTZdLDEzMDcxOltbMTI0NjAsMTI1MzEsMTI1MTBdLDI1Nl0sMTMwNzI6W1sxMjQ2MiwxMjQ2MF0sMjU2XSwxMzA3MzpbWzEyNDYyLDEyNDkxLDEyNTQwXSwyNTZdLDEzMDc0OltbMTI0NjEsMTI1MTcsMTI1MjIsMTI1NDBdLDI1Nl0sMTMwNzU6W1sxMjQ2MiwxMjUyMywxMjQ4MCwxMjU0MF0sMjU2XSwxMzA3NjpbWzEyNDYxLDEyNTI1XSwyNTZdLDEzMDc3OltbMTI0NjEsMTI1MjUsMTI0NjQsMTI1MjEsMTI1MTJdLDI1Nl0sMTMwNzg6W1sxMjQ2MSwxMjUyNSwxMjUxMywxMjU0MCwxMjQ4OCwxMjUyM10sMjU2XSwxMzA3OTpbWzEyNDYxLDEyNTI1LDEyNTI3LDEyNDgzLDEyNDg4XSwyNTZdLDEzMDgwOltbMTI0NjQsMTI1MjEsMTI1MTJdLDI1Nl0sMTMwODE6W1sxMjQ2NCwxMjUyMSwxMjUxMiwxMjQ4OCwxMjUzMV0sMjU2XSwxMzA4MjpbWzEyNDYzLDEyNTIzLDEyNDc2LDEyNDUyLDEyNTI1XSwyNTZdLDEzMDgzOltbMTI0NjMsMTI1MjUsMTI1NDAsMTI0OTNdLDI1Nl0sMTMwODQ6W1sxMjQ2NSwxMjU0MCwxMjQ3M10sMjU2XSwxMzA4NTpbWzEyNDY3LDEyNTIzLDEyNDkwXSwyNTZdLDEzMDg2OltbMTI0NjcsMTI1NDAsMTI1MDldLDI1Nl0sMTMwODc6W1sxMjQ2OSwxMjQ1MiwxMjQ2MywxMjUyM10sMjU2XSwxMzA4ODpbWzEyNDY5LDEyNTMxLDEyNDgxLDEyNTQwLDEyNTEyXSwyNTZdLDEzMDg5OltbMTI0NzEsMTI1MjIsMTI1MzEsMTI0NjRdLDI1Nl0sMTMwOTA6W1sxMjQ3NSwxMjUzMSwxMjQ4MV0sMjU2XSwxMzA5MTpbWzEyNDc1LDEyNTMxLDEyNDg4XSwyNTZdLDEzMDkyOltbMTI0ODAsMTI1NDAsMTI0NzNdLDI1Nl0sMTMwOTM6W1sxMjQ4NywxMjQ3MV0sMjU2XSwxMzA5NDpbWzEyNDg5LDEyNTIzXSwyNTZdLDEzMDk1OltbMTI0ODgsMTI1MzFdLDI1Nl0sMTMwOTY6W1sxMjQ5MCwxMjQ5NF0sMjU2XSwxMzA5NzpbWzEyNDk0LDEyNDgzLDEyNDg4XSwyNTZdLDEzMDk4OltbMTI0OTUsMTI0NTIsMTI0ODRdLDI1Nl0sMTMwOTk6W1sxMjQ5NywxMjU0MCwxMjQ3NSwxMjUzMSwxMjQ4OF0sMjU2XSwxMzEwMDpbWzEyNDk3LDEyNTQwLDEyNDg0XSwyNTZdLDEzMTAxOltbMTI0OTYsMTI1NDAsMTI1MjQsMTI1MjNdLDI1Nl0sMTMxMDI6W1sxMjUwMCwxMjQ1MCwxMjQ3MywxMjQ4OCwxMjUyM10sMjU2XSwxMzEwMzpbWzEyNTAwLDEyNDYzLDEyNTIzXSwyNTZdLDEzMTA0OltbMTI1MDAsMTI0NjddLDI1Nl0sMTMxMDU6W1sxMjQ5OSwxMjUyM10sMjU2XSwxMzEwNjpbWzEyNTAxLDEyNDQ5LDEyNTIxLDEyNDgzLDEyNDg5XSwyNTZdLDEzMTA3OltbMTI1MDEsMTI0NTEsMTI1NDAsMTI0ODhdLDI1Nl0sMTMxMDg6W1sxMjUwMiwxMjQ4MywxMjQ3MSwxMjQ1NSwxMjUyM10sMjU2XSwxMzEwOTpbWzEyNTAxLDEyNTIxLDEyNTMxXSwyNTZdLDEzMTEwOltbMTI1MDQsMTI0NjMsMTI0NzksMTI1NDAsMTI1MjNdLDI1Nl0sMTMxMTE6W1sxMjUwNiwxMjQ3N10sMjU2XSwxMzExMjpbWzEyNTA2LDEyNDkxLDEyNDk4XSwyNTZdLDEzMTEzOltbMTI1MDQsMTI1MjMsMTI0ODRdLDI1Nl0sMTMxMTQ6W1sxMjUwNiwxMjUzMSwxMjQ3M10sMjU2XSwxMzExNTpbWzEyNTA2LDEyNTQwLDEyNDcyXSwyNTZdLDEzMTE2OltbMTI1MDUsMTI1NDAsMTI0NzldLDI1Nl0sMTMxMTc6W1sxMjUwOSwxMjQ1MiwxMjUzMSwxMjQ4OF0sMjU2XSwxMzExODpbWzEyNTA4LDEyNTIzLDEyNDg4XSwyNTZdLDEzMTE5OltbMTI1MDcsMTI1MzFdLDI1Nl0sMTMxMjA6W1sxMjUwOSwxMjUzMSwxMjQ4OV0sMjU2XSwxMzEyMTpbWzEyNTA3LDEyNTQwLDEyNTIzXSwyNTZdLDEzMTIyOltbMTI1MDcsMTI1NDAsMTI1MzFdLDI1Nl0sMTMxMjM6W1sxMjUxMCwxMjQ1MiwxMjQ2MywxMjUyNV0sMjU2XSwxMzEyNDpbWzEyNTEwLDEyNDUyLDEyNTIzXSwyNTZdLDEzMTI1OltbMTI1MTAsMTI0ODMsMTI0OTVdLDI1Nl0sMTMxMjY6W1sxMjUxMCwxMjUyMywxMjQ2M10sMjU2XSwxMzEyNzpbWzEyNTEwLDEyNTMxLDEyNDcxLDEyNTE5LDEyNTMxXSwyNTZdLDEzMTI4OltbMTI1MTEsMTI0NjMsMTI1MjUsMTI1MzFdLDI1Nl0sMTMxMjk6W1sxMjUxMSwxMjUyMl0sMjU2XSwxMzEzMDpbWzEyNTExLDEyNTIyLDEyNDk2LDEyNTQwLDEyNTIzXSwyNTZdLDEzMTMxOltbMTI1MTMsMTI0NjBdLDI1Nl0sMTMxMzI6W1sxMjUxMywxMjQ2MCwxMjQ4OCwxMjUzMV0sMjU2XSwxMzEzMzpbWzEyNTEzLDEyNTQwLDEyNDg4LDEyNTIzXSwyNTZdLDEzMTM0OltbMTI1MTYsMTI1NDAsMTI0ODldLDI1Nl0sMTMxMzU6W1sxMjUxNiwxMjU0MCwxMjUyM10sMjU2XSwxMzEzNjpbWzEyNTE4LDEyNDUwLDEyNTMxXSwyNTZdLDEzMTM3OltbMTI1MjIsMTI0ODMsMTI0ODgsMTI1MjNdLDI1Nl0sMTMxMzg6W1sxMjUyMiwxMjUyMV0sMjU2XSwxMzEzOTpbWzEyNTIzLDEyNTAwLDEyNTQwXSwyNTZdLDEzMTQwOltbMTI1MjMsMTI1NDAsMTI1MDIsMTI1MjNdLDI1Nl0sMTMxNDE6W1sxMjUyNCwxMjUxMl0sMjU2XSwxMzE0MjpbWzEyNTI0LDEyNTMxLDEyNDg4LDEyNDY2LDEyNTMxXSwyNTZdLDEzMTQzOltbMTI1MjcsMTI0ODMsMTI0ODhdLDI1Nl0sMTMxNDQ6W1s0OCwyODg1N10sMjU2XSwxMzE0NTpbWzQ5LDI4ODU3XSwyNTZdLDEzMTQ2OltbNTAsMjg4NTddLDI1Nl0sMTMxNDc6W1s1MSwyODg1N10sMjU2XSwxMzE0ODpbWzUyLDI4ODU3XSwyNTZdLDEzMTQ5OltbNTMsMjg4NTddLDI1Nl0sMTMxNTA6W1s1NCwyODg1N10sMjU2XSwxMzE1MTpbWzU1LDI4ODU3XSwyNTZdLDEzMTUyOltbNTYsMjg4NTddLDI1Nl0sMTMxNTM6W1s1NywyODg1N10sMjU2XSwxMzE1NDpbWzQ5LDQ4LDI4ODU3XSwyNTZdLDEzMTU1OltbNDksNDksMjg4NTddLDI1Nl0sMTMxNTY6W1s0OSw1MCwyODg1N10sMjU2XSwxMzE1NzpbWzQ5LDUxLDI4ODU3XSwyNTZdLDEzMTU4OltbNDksNTIsMjg4NTddLDI1Nl0sMTMxNTk6W1s0OSw1MywyODg1N10sMjU2XSwxMzE2MDpbWzQ5LDU0LDI4ODU3XSwyNTZdLDEzMTYxOltbNDksNTUsMjg4NTddLDI1Nl0sMTMxNjI6W1s0OSw1NiwyODg1N10sMjU2XSwxMzE2MzpbWzQ5LDU3LDI4ODU3XSwyNTZdLDEzMTY0OltbNTAsNDgsMjg4NTddLDI1Nl0sMTMxNjU6W1s1MCw0OSwyODg1N10sMjU2XSwxMzE2NjpbWzUwLDUwLDI4ODU3XSwyNTZdLDEzMTY3OltbNTAsNTEsMjg4NTddLDI1Nl0sMTMxNjg6W1s1MCw1MiwyODg1N10sMjU2XSwxMzE2OTpbWzEwNCw4MCw5N10sMjU2XSwxMzE3MDpbWzEwMCw5N10sMjU2XSwxMzE3MTpbWzY1LDg1XSwyNTZdLDEzMTcyOltbOTgsOTcsMTE0XSwyNTZdLDEzMTczOltbMTExLDg2XSwyNTZdLDEzMTc0OltbMTEyLDk5XSwyNTZdLDEzMTc1OltbMTAwLDEwOV0sMjU2XSwxMzE3NjpbWzEwMCwxMDksMTc4XSwyNTZdLDEzMTc3OltbMTAwLDEwOSwxNzldLDI1Nl0sMTMxNzg6W1s3Myw4NV0sMjU2XSwxMzE3OTpbWzI0MTc5LDI1MTA0XSwyNTZdLDEzMTgwOltbMjYxNTcsMjE2NDRdLDI1Nl0sMTMxODE6W1syMjgyMywyNzQ5MV0sMjU2XSwxMzE4MjpbWzI2MTI2LDI3ODM1XSwyNTZdLDEzMTgzOltbMjY2NjYsMjQzMzUsMjAyNTAsMzEwMzhdLDI1Nl0sMTMxODQ6W1sxMTIsNjVdLDI1Nl0sMTMxODU6W1sxMTAsNjVdLDI1Nl0sMTMxODY6W1s5NTYsNjVdLDI1Nl0sMTMxODc6W1sxMDksNjVdLDI1Nl0sMTMxODg6W1sxMDcsNjVdLDI1Nl0sMTMxODk6W1s3NSw2Nl0sMjU2XSwxMzE5MDpbWzc3LDY2XSwyNTZdLDEzMTkxOltbNzEsNjZdLDI1Nl0sMTMxOTI6W1s5OSw5NywxMDhdLDI1Nl0sMTMxOTM6W1sxMDcsOTksOTcsMTA4XSwyNTZdLDEzMTk0OltbMTEyLDcwXSwyNTZdLDEzMTk1OltbMTEwLDcwXSwyNTZdLDEzMTk2OltbOTU2LDcwXSwyNTZdLDEzMTk3OltbOTU2LDEwM10sMjU2XSwxMzE5ODpbWzEwOSwxMDNdLDI1Nl0sMTMxOTk6W1sxMDcsMTAzXSwyNTZdLDEzMjAwOltbNzIsMTIyXSwyNTZdLDEzMjAxOltbMTA3LDcyLDEyMl0sMjU2XSwxMzIwMjpbWzc3LDcyLDEyMl0sMjU2XSwxMzIwMzpbWzcxLDcyLDEyMl0sMjU2XSwxMzIwNDpbWzg0LDcyLDEyMl0sMjU2XSwxMzIwNTpbWzk1Niw4NDY3XSwyNTZdLDEzMjA2OltbMTA5LDg0NjddLDI1Nl0sMTMyMDc6W1sxMDAsODQ2N10sMjU2XSwxMzIwODpbWzEwNyw4NDY3XSwyNTZdLDEzMjA5OltbMTAyLDEwOV0sMjU2XSwxMzIxMDpbWzExMCwxMDldLDI1Nl0sMTMyMTE6W1s5NTYsMTA5XSwyNTZdLDEzMjEyOltbMTA5LDEwOV0sMjU2XSwxMzIxMzpbWzk5LDEwOV0sMjU2XSwxMzIxNDpbWzEwNywxMDldLDI1Nl0sMTMyMTU6W1sxMDksMTA5LDE3OF0sMjU2XSwxMzIxNjpbWzk5LDEwOSwxNzhdLDI1Nl0sMTMyMTc6W1sxMDksMTc4XSwyNTZdLDEzMjE4OltbMTA3LDEwOSwxNzhdLDI1Nl0sMTMyMTk6W1sxMDksMTA5LDE3OV0sMjU2XSwxMzIyMDpbWzk5LDEwOSwxNzldLDI1Nl0sMTMyMjE6W1sxMDksMTc5XSwyNTZdLDEzMjIyOltbMTA3LDEwOSwxNzldLDI1Nl0sMTMyMjM6W1sxMDksODcyNSwxMTVdLDI1Nl0sMTMyMjQ6W1sxMDksODcyNSwxMTUsMTc4XSwyNTZdLDEzMjI1OltbODAsOTddLDI1Nl0sMTMyMjY6W1sxMDcsODAsOTddLDI1Nl0sMTMyMjc6W1s3Nyw4MCw5N10sMjU2XSwxMzIyODpbWzcxLDgwLDk3XSwyNTZdLDEzMjI5OltbMTE0LDk3LDEwMF0sMjU2XSwxMzIzMDpbWzExNCw5NywxMDAsODcyNSwxMTVdLDI1Nl0sMTMyMzE6W1sxMTQsOTcsMTAwLDg3MjUsMTE1LDE3OF0sMjU2XSwxMzIzMjpbWzExMiwxMTVdLDI1Nl0sMTMyMzM6W1sxMTAsMTE1XSwyNTZdLDEzMjM0OltbOTU2LDExNV0sMjU2XSwxMzIzNTpbWzEwOSwxMTVdLDI1Nl0sMTMyMzY6W1sxMTIsODZdLDI1Nl0sMTMyMzc6W1sxMTAsODZdLDI1Nl0sMTMyMzg6W1s5NTYsODZdLDI1Nl0sMTMyMzk6W1sxMDksODZdLDI1Nl0sMTMyNDA6W1sxMDcsODZdLDI1Nl0sMTMyNDE6W1s3Nyw4Nl0sMjU2XSwxMzI0MjpbWzExMiw4N10sMjU2XSwxMzI0MzpbWzExMCw4N10sMjU2XSwxMzI0NDpbWzk1Niw4N10sMjU2XSwxMzI0NTpbWzEwOSw4N10sMjU2XSwxMzI0NjpbWzEwNyw4N10sMjU2XSwxMzI0NzpbWzc3LDg3XSwyNTZdLDEzMjQ4OltbMTA3LDkzN10sMjU2XSwxMzI0OTpbWzc3LDkzN10sMjU2XSwxMzI1MDpbWzk3LDQ2LDEwOSw0Nl0sMjU2XSwxMzI1MTpbWzY2LDExM10sMjU2XSwxMzI1MjpbWzk5LDk5XSwyNTZdLDEzMjUzOltbOTksMTAwXSwyNTZdLDEzMjU0OltbNjcsODcyNSwxMDcsMTAzXSwyNTZdLDEzMjU1OltbNjcsMTExLDQ2XSwyNTZdLDEzMjU2OltbMTAwLDY2XSwyNTZdLDEzMjU3OltbNzEsMTIxXSwyNTZdLDEzMjU4OltbMTA0LDk3XSwyNTZdLDEzMjU5OltbNzIsODBdLDI1Nl0sMTMyNjA6W1sxMDUsMTEwXSwyNTZdLDEzMjYxOltbNzUsNzVdLDI1Nl0sMTMyNjI6W1s3NSw3N10sMjU2XSwxMzI2MzpbWzEwNywxMTZdLDI1Nl0sMTMyNjQ6W1sxMDgsMTA5XSwyNTZdLDEzMjY1OltbMTA4LDExMF0sMjU2XSwxMzI2NjpbWzEwOCwxMTEsMTAzXSwyNTZdLDEzMjY3OltbMTA4LDEyMF0sMjU2XSwxMzI2ODpbWzEwOSw5OF0sMjU2XSwxMzI2OTpbWzEwOSwxMDUsMTA4XSwyNTZdLDEzMjcwOltbMTA5LDExMSwxMDhdLDI1Nl0sMTMyNzE6W1s4MCw3Ml0sMjU2XSwxMzI3MjpbWzExMiw0NiwxMDksNDZdLDI1Nl0sMTMyNzM6W1s4MCw4MCw3N10sMjU2XSwxMzI3NDpbWzgwLDgyXSwyNTZdLDEzMjc1OltbMTE1LDExNF0sMjU2XSwxMzI3NjpbWzgzLDExOF0sMjU2XSwxMzI3NzpbWzg3LDk4XSwyNTZdLDEzMjc4OltbODYsODcyNSwxMDldLDI1Nl0sMTMyNzk6W1s2NSw4NzI1LDEwOV0sMjU2XSwxMzI4MDpbWzQ5LDI2MDg1XSwyNTZdLDEzMjgxOltbNTAsMjYwODVdLDI1Nl0sMTMyODI6W1s1MSwyNjA4NV0sMjU2XSwxMzI4MzpbWzUyLDI2MDg1XSwyNTZdLDEzMjg0OltbNTMsMjYwODVdLDI1Nl0sMTMyODU6W1s1NCwyNjA4NV0sMjU2XSwxMzI4NjpbWzU1LDI2MDg1XSwyNTZdLDEzMjg3OltbNTYsMjYwODVdLDI1Nl0sMTMyODg6W1s1NywyNjA4NV0sMjU2XSwxMzI4OTpbWzQ5LDQ4LDI2MDg1XSwyNTZdLDEzMjkwOltbNDksNDksMjYwODVdLDI1Nl0sMTMyOTE6W1s0OSw1MCwyNjA4NV0sMjU2XSwxMzI5MjpbWzQ5LDUxLDI2MDg1XSwyNTZdLDEzMjkzOltbNDksNTIsMjYwODVdLDI1Nl0sMTMyOTQ6W1s0OSw1MywyNjA4NV0sMjU2XSwxMzI5NTpbWzQ5LDU0LDI2MDg1XSwyNTZdLDEzMjk2OltbNDksNTUsMjYwODVdLDI1Nl0sMTMyOTc6W1s0OSw1NiwyNjA4NV0sMjU2XSwxMzI5ODpbWzQ5LDU3LDI2MDg1XSwyNTZdLDEzMjk5OltbNTAsNDgsMjYwODVdLDI1Nl0sMTMzMDA6W1s1MCw0OSwyNjA4NV0sMjU2XSwxMzMwMTpbWzUwLDUwLDI2MDg1XSwyNTZdLDEzMzAyOltbNTAsNTEsMjYwODVdLDI1Nl0sMTMzMDM6W1s1MCw1MiwyNjA4NV0sMjU2XSwxMzMwNDpbWzUwLDUzLDI2MDg1XSwyNTZdLDEzMzA1OltbNTAsNTQsMjYwODVdLDI1Nl0sMTMzMDY6W1s1MCw1NSwyNjA4NV0sMjU2XSwxMzMwNzpbWzUwLDU2LDI2MDg1XSwyNTZdLDEzMzA4OltbNTAsNTcsMjYwODVdLDI1Nl0sMTMzMDk6W1s1MSw0OCwyNjA4NV0sMjU2XSwxMzMxMDpbWzUxLDQ5LDI2MDg1XSwyNTZdLDEzMzExOltbMTAzLDk3LDEwOF0sMjU2XX0sCjI3MTM2Ons5MjkxMjpbLDFdLDkyOTEzOlssMV0sOTI5MTQ6WywxXSw5MjkxNTpbLDFdLDkyOTE2OlssMV19LAoyNzM5Mjp7OTI5NzY6WywyMzBdLDkyOTc3OlssMjMwXSw5Mjk3ODpbLDIzMF0sOTI5Nzk6WywyMzBdLDkyOTgwOlssMjMwXSw5Mjk4MTpbLDIzMF0sOTI5ODI6WywyMzBdfSwKNDI0OTY6ezQyNjA3OlssMjMwXSw0MjYxMjpbLDIzMF0sNDI2MTM6WywyMzBdLDQyNjE0OlssMjMwXSw0MjYxNTpbLDIzMF0sNDI2MTY6WywyMzBdLDQyNjE3OlssMjMwXSw0MjYxODpbLDIzMF0sNDI2MTk6WywyMzBdLDQyNjIwOlssMjMwXSw0MjYyMTpbLDIzMF0sNDI2NTI6W1sxMDk4XSwyNTZdLDQyNjUzOltbMTEwMF0sMjU2XSw0MjY1NTpbLDIzMF0sNDI3MzY6WywyMzBdLDQyNzM3OlssMjMwXX0sCjQyNzUyOns0Mjg2NDpbWzQyODYzXSwyNTZdLDQzMDAwOltbMjk0XSwyNTZdLDQzMDAxOltbMzM5XSwyNTZdfSwKNDMwMDg6ezQzMDE0OlssOV0sNDMyMDQ6Wyw5XSw0MzIzMjpbLDIzMF0sNDMyMzM6WywyMzBdLDQzMjM0OlssMjMwXSw0MzIzNTpbLDIzMF0sNDMyMzY6WywyMzBdLDQzMjM3OlssMjMwXSw0MzIzODpbLDIzMF0sNDMyMzk6WywyMzBdLDQzMjQwOlssMjMwXSw0MzI0MTpbLDIzMF0sNDMyNDI6WywyMzBdLDQzMjQzOlssMjMwXSw0MzI0NDpbLDIzMF0sNDMyNDU6WywyMzBdLDQzMjQ2OlssMjMwXSw0MzI0NzpbLDIzMF0sNDMyNDg6WywyMzBdLDQzMjQ5OlssMjMwXX0sCjQzMjY0Ons0MzMwNzpbLDIyMF0sNDMzMDg6WywyMjBdLDQzMzA5OlssMjIwXSw0MzM0NzpbLDldLDQzNDQzOlssN10sNDM0NTY6Wyw5XX0sCjQzNTIwOns0MzY5NjpbLDIzMF0sNDM2OTg6WywyMzBdLDQzNjk5OlssMjMwXSw0MzcwMDpbLDIyMF0sNDM3MDM6WywyMzBdLDQzNzA0OlssMjMwXSw0MzcxMDpbLDIzMF0sNDM3MTE6WywyMzBdLDQzNzEzOlssMjMwXSw0Mzc2NjpbLDldfSwKNDM3NzY6ezQzODY4OltbNDI3OTFdLDI1Nl0sNDM4Njk6W1s0MzgzMV0sMjU2XSw0Mzg3MDpbWzYxOV0sMjU2XSw0Mzg3MTpbWzQzODU4XSwyNTZdLDQ0MDEzOlssOV19LAo0ODEyODp7MTEzODIyOlssMV19LAo1MzUwNDp7MTE5MTM0OltbMTE5MTI3LDExOTE0MV0sNTEyXSwxMTkxMzU6W1sxMTkxMjgsMTE5MTQxXSw1MTJdLDExOTEzNjpbWzExOTEzNSwxMTkxNTBdLDUxMl0sMTE5MTM3OltbMTE5MTM1LDExOTE1MV0sNTEyXSwxMTkxMzg6W1sxMTkxMzUsMTE5MTUyXSw1MTJdLDExOTEzOTpbWzExOTEzNSwxMTkxNTNdLDUxMl0sMTE5MTQwOltbMTE5MTM1LDExOTE1NF0sNTEyXSwxMTkxNDE6WywyMTZdLDExOTE0MjpbLDIxNl0sMTE5MTQzOlssMV0sMTE5MTQ0OlssMV0sMTE5MTQ1OlssMV0sMTE5MTQ5OlssMjI2XSwxMTkxNTA6WywyMTZdLDExOTE1MTpbLDIxNl0sMTE5MTUyOlssMjE2XSwxMTkxNTM6WywyMTZdLDExOTE1NDpbLDIxNl0sMTE5MTYzOlssMjIwXSwxMTkxNjQ6WywyMjBdLDExOTE2NTpbLDIyMF0sMTE5MTY2OlssMjIwXSwxMTkxNjc6WywyMjBdLDExOTE2ODpbLDIyMF0sMTE5MTY5OlssMjIwXSwxMTkxNzA6WywyMjBdLDExOTE3MzpbLDIzMF0sMTE5MTc0OlssMjMwXSwxMTkxNzU6WywyMzBdLDExOTE3NjpbLDIzMF0sMTE5MTc3OlssMjMwXSwxMTkxNzg6WywyMjBdLDExOTE3OTpbLDIyMF0sMTE5MjEwOlssMjMwXSwxMTkyMTE6WywyMzBdLDExOTIxMjpbLDIzMF0sMTE5MjEzOlssMjMwXSwxMTkyMjc6W1sxMTkyMjUsMTE5MTQxXSw1MTJdLDExOTIyODpbWzExOTIyNiwxMTkxNDFdLDUxMl0sMTE5MjI5OltbMTE5MjI3LDExOTE1MF0sNTEyXSwxMTkyMzA6W1sxMTkyMjgsMTE5MTUwXSw1MTJdLDExOTIzMTpbWzExOTIyNywxMTkxNTFdLDUxMl0sMTE5MjMyOltbMTE5MjI4LDExOTE1MV0sNTEyXX0sCjUzNzYwOnsxMTkzNjI6WywyMzBdLDExOTM2MzpbLDIzMF0sMTE5MzY0OlssMjMwXX0sCjU0MjcyOnsxMTk4MDg6W1s2NV0sMjU2XSwxMTk4MDk6W1s2Nl0sMjU2XSwxMTk4MTA6W1s2N10sMjU2XSwxMTk4MTE6W1s2OF0sMjU2XSwxMTk4MTI6W1s2OV0sMjU2XSwxMTk4MTM6W1s3MF0sMjU2XSwxMTk4MTQ6W1s3MV0sMjU2XSwxMTk4MTU6W1s3Ml0sMjU2XSwxMTk4MTY6W1s3M10sMjU2XSwxMTk4MTc6W1s3NF0sMjU2XSwxMTk4MTg6W1s3NV0sMjU2XSwxMTk4MTk6W1s3Nl0sMjU2XSwxMTk4MjA6W1s3N10sMjU2XSwxMTk4MjE6W1s3OF0sMjU2XSwxMTk4MjI6W1s3OV0sMjU2XSwxMTk4MjM6W1s4MF0sMjU2XSwxMTk4MjQ6W1s4MV0sMjU2XSwxMTk4MjU6W1s4Ml0sMjU2XSwxMTk4MjY6W1s4M10sMjU2XSwxMTk4Mjc6W1s4NF0sMjU2XSwxMTk4Mjg6W1s4NV0sMjU2XSwxMTk4Mjk6W1s4Nl0sMjU2XSwxMTk4MzA6W1s4N10sMjU2XSwxMTk4MzE6W1s4OF0sMjU2XSwxMTk4MzI6W1s4OV0sMjU2XSwxMTk4MzM6W1s5MF0sMjU2XSwxMTk4MzQ6W1s5N10sMjU2XSwxMTk4MzU6W1s5OF0sMjU2XSwxMTk4MzY6W1s5OV0sMjU2XSwxMTk4Mzc6W1sxMDBdLDI1Nl0sMTE5ODM4OltbMTAxXSwyNTZdLDExOTgzOTpbWzEwMl0sMjU2XSwxMTk4NDA6W1sxMDNdLDI1Nl0sMTE5ODQxOltbMTA0XSwyNTZdLDExOTg0MjpbWzEwNV0sMjU2XSwxMTk4NDM6W1sxMDZdLDI1Nl0sMTE5ODQ0OltbMTA3XSwyNTZdLDExOTg0NTpbWzEwOF0sMjU2XSwxMTk4NDY6W1sxMDldLDI1Nl0sMTE5ODQ3OltbMTEwXSwyNTZdLDExOTg0ODpbWzExMV0sMjU2XSwxMTk4NDk6W1sxMTJdLDI1Nl0sMTE5ODUwOltbMTEzXSwyNTZdLDExOTg1MTpbWzExNF0sMjU2XSwxMTk4NTI6W1sxMTVdLDI1Nl0sMTE5ODUzOltbMTE2XSwyNTZdLDExOTg1NDpbWzExN10sMjU2XSwxMTk4NTU6W1sxMThdLDI1Nl0sMTE5ODU2OltbMTE5XSwyNTZdLDExOTg1NzpbWzEyMF0sMjU2XSwxMTk4NTg6W1sxMjFdLDI1Nl0sMTE5ODU5OltbMTIyXSwyNTZdLDExOTg2MDpbWzY1XSwyNTZdLDExOTg2MTpbWzY2XSwyNTZdLDExOTg2MjpbWzY3XSwyNTZdLDExOTg2MzpbWzY4XSwyNTZdLDExOTg2NDpbWzY5XSwyNTZdLDExOTg2NTpbWzcwXSwyNTZdLDExOTg2NjpbWzcxXSwyNTZdLDExOTg2NzpbWzcyXSwyNTZdLDExOTg2ODpbWzczXSwyNTZdLDExOTg2OTpbWzc0XSwyNTZdLDExOTg3MDpbWzc1XSwyNTZdLDExOTg3MTpbWzc2XSwyNTZdLDExOTg3MjpbWzc3XSwyNTZdLDExOTg3MzpbWzc4XSwyNTZdLDExOTg3NDpbWzc5XSwyNTZdLDExOTg3NTpbWzgwXSwyNTZdLDExOTg3NjpbWzgxXSwyNTZdLDExOTg3NzpbWzgyXSwyNTZdLDExOTg3ODpbWzgzXSwyNTZdLDExOTg3OTpbWzg0XSwyNTZdLDExOTg4MDpbWzg1XSwyNTZdLDExOTg4MTpbWzg2XSwyNTZdLDExOTg4MjpbWzg3XSwyNTZdLDExOTg4MzpbWzg4XSwyNTZdLDExOTg4NDpbWzg5XSwyNTZdLDExOTg4NTpbWzkwXSwyNTZdLDExOTg4NjpbWzk3XSwyNTZdLDExOTg4NzpbWzk4XSwyNTZdLDExOTg4ODpbWzk5XSwyNTZdLDExOTg4OTpbWzEwMF0sMjU2XSwxMTk4OTA6W1sxMDFdLDI1Nl0sMTE5ODkxOltbMTAyXSwyNTZdLDExOTg5MjpbWzEwM10sMjU2XSwxMTk4OTQ6W1sxMDVdLDI1Nl0sMTE5ODk1OltbMTA2XSwyNTZdLDExOTg5NjpbWzEwN10sMjU2XSwxMTk4OTc6W1sxMDhdLDI1Nl0sMTE5ODk4OltbMTA5XSwyNTZdLDExOTg5OTpbWzExMF0sMjU2XSwxMTk5MDA6W1sxMTFdLDI1Nl0sMTE5OTAxOltbMTEyXSwyNTZdLDExOTkwMjpbWzExM10sMjU2XSwxMTk5MDM6W1sxMTRdLDI1Nl0sMTE5OTA0OltbMTE1XSwyNTZdLDExOTkwNTpbWzExNl0sMjU2XSwxMTk5MDY6W1sxMTddLDI1Nl0sMTE5OTA3OltbMTE4XSwyNTZdLDExOTkwODpbWzExOV0sMjU2XSwxMTk5MDk6W1sxMjBdLDI1Nl0sMTE5OTEwOltbMTIxXSwyNTZdLDExOTkxMTpbWzEyMl0sMjU2XSwxMTk5MTI6W1s2NV0sMjU2XSwxMTk5MTM6W1s2Nl0sMjU2XSwxMTk5MTQ6W1s2N10sMjU2XSwxMTk5MTU6W1s2OF0sMjU2XSwxMTk5MTY6W1s2OV0sMjU2XSwxMTk5MTc6W1s3MF0sMjU2XSwxMTk5MTg6W1s3MV0sMjU2XSwxMTk5MTk6W1s3Ml0sMjU2XSwxMTk5MjA6W1s3M10sMjU2XSwxMTk5MjE6W1s3NF0sMjU2XSwxMTk5MjI6W1s3NV0sMjU2XSwxMTk5MjM6W1s3Nl0sMjU2XSwxMTk5MjQ6W1s3N10sMjU2XSwxMTk5MjU6W1s3OF0sMjU2XSwxMTk5MjY6W1s3OV0sMjU2XSwxMTk5Mjc6W1s4MF0sMjU2XSwxMTk5Mjg6W1s4MV0sMjU2XSwxMTk5Mjk6W1s4Ml0sMjU2XSwxMTk5MzA6W1s4M10sMjU2XSwxMTk5MzE6W1s4NF0sMjU2XSwxMTk5MzI6W1s4NV0sMjU2XSwxMTk5MzM6W1s4Nl0sMjU2XSwxMTk5MzQ6W1s4N10sMjU2XSwxMTk5MzU6W1s4OF0sMjU2XSwxMTk5MzY6W1s4OV0sMjU2XSwxMTk5Mzc6W1s5MF0sMjU2XSwxMTk5Mzg6W1s5N10sMjU2XSwxMTk5Mzk6W1s5OF0sMjU2XSwxMTk5NDA6W1s5OV0sMjU2XSwxMTk5NDE6W1sxMDBdLDI1Nl0sMTE5OTQyOltbMTAxXSwyNTZdLDExOTk0MzpbWzEwMl0sMjU2XSwxMTk5NDQ6W1sxMDNdLDI1Nl0sMTE5OTQ1OltbMTA0XSwyNTZdLDExOTk0NjpbWzEwNV0sMjU2XSwxMTk5NDc6W1sxMDZdLDI1Nl0sMTE5OTQ4OltbMTA3XSwyNTZdLDExOTk0OTpbWzEwOF0sMjU2XSwxMTk5NTA6W1sxMDldLDI1Nl0sMTE5OTUxOltbMTEwXSwyNTZdLDExOTk1MjpbWzExMV0sMjU2XSwxMTk5NTM6W1sxMTJdLDI1Nl0sMTE5OTU0OltbMTEzXSwyNTZdLDExOTk1NTpbWzExNF0sMjU2XSwxMTk5NTY6W1sxMTVdLDI1Nl0sMTE5OTU3OltbMTE2XSwyNTZdLDExOTk1ODpbWzExN10sMjU2XSwxMTk5NTk6W1sxMThdLDI1Nl0sMTE5OTYwOltbMTE5XSwyNTZdLDExOTk2MTpbWzEyMF0sMjU2XSwxMTk5NjI6W1sxMjFdLDI1Nl0sMTE5OTYzOltbMTIyXSwyNTZdLDExOTk2NDpbWzY1XSwyNTZdLDExOTk2NjpbWzY3XSwyNTZdLDExOTk2NzpbWzY4XSwyNTZdLDExOTk3MDpbWzcxXSwyNTZdLDExOTk3MzpbWzc0XSwyNTZdLDExOTk3NDpbWzc1XSwyNTZdLDExOTk3NzpbWzc4XSwyNTZdLDExOTk3ODpbWzc5XSwyNTZdLDExOTk3OTpbWzgwXSwyNTZdLDExOTk4MDpbWzgxXSwyNTZdLDExOTk4MjpbWzgzXSwyNTZdLDExOTk4MzpbWzg0XSwyNTZdLDExOTk4NDpbWzg1XSwyNTZdLDExOTk4NTpbWzg2XSwyNTZdLDExOTk4NjpbWzg3XSwyNTZdLDExOTk4NzpbWzg4XSwyNTZdLDExOTk4ODpbWzg5XSwyNTZdLDExOTk4OTpbWzkwXSwyNTZdLDExOTk5MDpbWzk3XSwyNTZdLDExOTk5MTpbWzk4XSwyNTZdLDExOTk5MjpbWzk5XSwyNTZdLDExOTk5MzpbWzEwMF0sMjU2XSwxMTk5OTU6W1sxMDJdLDI1Nl0sMTE5OTk3OltbMTA0XSwyNTZdLDExOTk5ODpbWzEwNV0sMjU2XSwxMTk5OTk6W1sxMDZdLDI1Nl0sMTIwMDAwOltbMTA3XSwyNTZdLDEyMDAwMTpbWzEwOF0sMjU2XSwxMjAwMDI6W1sxMDldLDI1Nl0sMTIwMDAzOltbMTEwXSwyNTZdLDEyMDAwNTpbWzExMl0sMjU2XSwxMjAwMDY6W1sxMTNdLDI1Nl0sMTIwMDA3OltbMTE0XSwyNTZdLDEyMDAwODpbWzExNV0sMjU2XSwxMjAwMDk6W1sxMTZdLDI1Nl0sMTIwMDEwOltbMTE3XSwyNTZdLDEyMDAxMTpbWzExOF0sMjU2XSwxMjAwMTI6W1sxMTldLDI1Nl0sMTIwMDEzOltbMTIwXSwyNTZdLDEyMDAxNDpbWzEyMV0sMjU2XSwxMjAwMTU6W1sxMjJdLDI1Nl0sMTIwMDE2OltbNjVdLDI1Nl0sMTIwMDE3OltbNjZdLDI1Nl0sMTIwMDE4OltbNjddLDI1Nl0sMTIwMDE5OltbNjhdLDI1Nl0sMTIwMDIwOltbNjldLDI1Nl0sMTIwMDIxOltbNzBdLDI1Nl0sMTIwMDIyOltbNzFdLDI1Nl0sMTIwMDIzOltbNzJdLDI1Nl0sMTIwMDI0OltbNzNdLDI1Nl0sMTIwMDI1OltbNzRdLDI1Nl0sMTIwMDI2OltbNzVdLDI1Nl0sMTIwMDI3OltbNzZdLDI1Nl0sMTIwMDI4OltbNzddLDI1Nl0sMTIwMDI5OltbNzhdLDI1Nl0sMTIwMDMwOltbNzldLDI1Nl0sMTIwMDMxOltbODBdLDI1Nl0sMTIwMDMyOltbODFdLDI1Nl0sMTIwMDMzOltbODJdLDI1Nl0sMTIwMDM0OltbODNdLDI1Nl0sMTIwMDM1OltbODRdLDI1Nl0sMTIwMDM2OltbODVdLDI1Nl0sMTIwMDM3OltbODZdLDI1Nl0sMTIwMDM4OltbODddLDI1Nl0sMTIwMDM5OltbODhdLDI1Nl0sMTIwMDQwOltbODldLDI1Nl0sMTIwMDQxOltbOTBdLDI1Nl0sMTIwMDQyOltbOTddLDI1Nl0sMTIwMDQzOltbOThdLDI1Nl0sMTIwMDQ0OltbOTldLDI1Nl0sMTIwMDQ1OltbMTAwXSwyNTZdLDEyMDA0NjpbWzEwMV0sMjU2XSwxMjAwNDc6W1sxMDJdLDI1Nl0sMTIwMDQ4OltbMTAzXSwyNTZdLDEyMDA0OTpbWzEwNF0sMjU2XSwxMjAwNTA6W1sxMDVdLDI1Nl0sMTIwMDUxOltbMTA2XSwyNTZdLDEyMDA1MjpbWzEwN10sMjU2XSwxMjAwNTM6W1sxMDhdLDI1Nl0sMTIwMDU0OltbMTA5XSwyNTZdLDEyMDA1NTpbWzExMF0sMjU2XSwxMjAwNTY6W1sxMTFdLDI1Nl0sMTIwMDU3OltbMTEyXSwyNTZdLDEyMDA1ODpbWzExM10sMjU2XSwxMjAwNTk6W1sxMTRdLDI1Nl0sMTIwMDYwOltbMTE1XSwyNTZdLDEyMDA2MTpbWzExNl0sMjU2XSwxMjAwNjI6W1sxMTddLDI1Nl0sMTIwMDYzOltbMTE4XSwyNTZdfSwKNTQ1Mjg6ezEyMDA2NDpbWzExOV0sMjU2XSwxMjAwNjU6W1sxMjBdLDI1Nl0sMTIwMDY2OltbMTIxXSwyNTZdLDEyMDA2NzpbWzEyMl0sMjU2XSwxMjAwNjg6W1s2NV0sMjU2XSwxMjAwNjk6W1s2Nl0sMjU2XSwxMjAwNzE6W1s2OF0sMjU2XSwxMjAwNzI6W1s2OV0sMjU2XSwxMjAwNzM6W1s3MF0sMjU2XSwxMjAwNzQ6W1s3MV0sMjU2XSwxMjAwNzc6W1s3NF0sMjU2XSwxMjAwNzg6W1s3NV0sMjU2XSwxMjAwNzk6W1s3Nl0sMjU2XSwxMjAwODA6W1s3N10sMjU2XSwxMjAwODE6W1s3OF0sMjU2XSwxMjAwODI6W1s3OV0sMjU2XSwxMjAwODM6W1s4MF0sMjU2XSwxMjAwODQ6W1s4MV0sMjU2XSwxMjAwODY6W1s4M10sMjU2XSwxMjAwODc6W1s4NF0sMjU2XSwxMjAwODg6W1s4NV0sMjU2XSwxMjAwODk6W1s4Nl0sMjU2XSwxMjAwOTA6W1s4N10sMjU2XSwxMjAwOTE6W1s4OF0sMjU2XSwxMjAwOTI6W1s4OV0sMjU2XSwxMjAwOTQ6W1s5N10sMjU2XSwxMjAwOTU6W1s5OF0sMjU2XSwxMjAwOTY6W1s5OV0sMjU2XSwxMjAwOTc6W1sxMDBdLDI1Nl0sMTIwMDk4OltbMTAxXSwyNTZdLDEyMDA5OTpbWzEwMl0sMjU2XSwxMjAxMDA6W1sxMDNdLDI1Nl0sMTIwMTAxOltbMTA0XSwyNTZdLDEyMDEwMjpbWzEwNV0sMjU2XSwxMjAxMDM6W1sxMDZdLDI1Nl0sMTIwMTA0OltbMTA3XSwyNTZdLDEyMDEwNTpbWzEwOF0sMjU2XSwxMjAxMDY6W1sxMDldLDI1Nl0sMTIwMTA3OltbMTEwXSwyNTZdLDEyMDEwODpbWzExMV0sMjU2XSwxMjAxMDk6W1sxMTJdLDI1Nl0sMTIwMTEwOltbMTEzXSwyNTZdLDEyMDExMTpbWzExNF0sMjU2XSwxMjAxMTI6W1sxMTVdLDI1Nl0sMTIwMTEzOltbMTE2XSwyNTZdLDEyMDExNDpbWzExN10sMjU2XSwxMjAxMTU6W1sxMThdLDI1Nl0sMTIwMTE2OltbMTE5XSwyNTZdLDEyMDExNzpbWzEyMF0sMjU2XSwxMjAxMTg6W1sxMjFdLDI1Nl0sMTIwMTE5OltbMTIyXSwyNTZdLDEyMDEyMDpbWzY1XSwyNTZdLDEyMDEyMTpbWzY2XSwyNTZdLDEyMDEyMzpbWzY4XSwyNTZdLDEyMDEyNDpbWzY5XSwyNTZdLDEyMDEyNTpbWzcwXSwyNTZdLDEyMDEyNjpbWzcxXSwyNTZdLDEyMDEyODpbWzczXSwyNTZdLDEyMDEyOTpbWzc0XSwyNTZdLDEyMDEzMDpbWzc1XSwyNTZdLDEyMDEzMTpbWzc2XSwyNTZdLDEyMDEzMjpbWzc3XSwyNTZdLDEyMDEzNDpbWzc5XSwyNTZdLDEyMDEzODpbWzgzXSwyNTZdLDEyMDEzOTpbWzg0XSwyNTZdLDEyMDE0MDpbWzg1XSwyNTZdLDEyMDE0MTpbWzg2XSwyNTZdLDEyMDE0MjpbWzg3XSwyNTZdLDEyMDE0MzpbWzg4XSwyNTZdLDEyMDE0NDpbWzg5XSwyNTZdLDEyMDE0NjpbWzk3XSwyNTZdLDEyMDE0NzpbWzk4XSwyNTZdLDEyMDE0ODpbWzk5XSwyNTZdLDEyMDE0OTpbWzEwMF0sMjU2XSwxMjAxNTA6W1sxMDFdLDI1Nl0sMTIwMTUxOltbMTAyXSwyNTZdLDEyMDE1MjpbWzEwM10sMjU2XSwxMjAxNTM6W1sxMDRdLDI1Nl0sMTIwMTU0OltbMTA1XSwyNTZdLDEyMDE1NTpbWzEwNl0sMjU2XSwxMjAxNTY6W1sxMDddLDI1Nl0sMTIwMTU3OltbMTA4XSwyNTZdLDEyMDE1ODpbWzEwOV0sMjU2XSwxMjAxNTk6W1sxMTBdLDI1Nl0sMTIwMTYwOltbMTExXSwyNTZdLDEyMDE2MTpbWzExMl0sMjU2XSwxMjAxNjI6W1sxMTNdLDI1Nl0sMTIwMTYzOltbMTE0XSwyNTZdLDEyMDE2NDpbWzExNV0sMjU2XSwxMjAxNjU6W1sxMTZdLDI1Nl0sMTIwMTY2OltbMTE3XSwyNTZdLDEyMDE2NzpbWzExOF0sMjU2XSwxMjAxNjg6W1sxMTldLDI1Nl0sMTIwMTY5OltbMTIwXSwyNTZdLDEyMDE3MDpbWzEyMV0sMjU2XSwxMjAxNzE6W1sxMjJdLDI1Nl0sMTIwMTcyOltbNjVdLDI1Nl0sMTIwMTczOltbNjZdLDI1Nl0sMTIwMTc0OltbNjddLDI1Nl0sMTIwMTc1OltbNjhdLDI1Nl0sMTIwMTc2OltbNjldLDI1Nl0sMTIwMTc3OltbNzBdLDI1Nl0sMTIwMTc4OltbNzFdLDI1Nl0sMTIwMTc5OltbNzJdLDI1Nl0sMTIwMTgwOltbNzNdLDI1Nl0sMTIwMTgxOltbNzRdLDI1Nl0sMTIwMTgyOltbNzVdLDI1Nl0sMTIwMTgzOltbNzZdLDI1Nl0sMTIwMTg0OltbNzddLDI1Nl0sMTIwMTg1OltbNzhdLDI1Nl0sMTIwMTg2OltbNzldLDI1Nl0sMTIwMTg3OltbODBdLDI1Nl0sMTIwMTg4OltbODFdLDI1Nl0sMTIwMTg5OltbODJdLDI1Nl0sMTIwMTkwOltbODNdLDI1Nl0sMTIwMTkxOltbODRdLDI1Nl0sMTIwMTkyOltbODVdLDI1Nl0sMTIwMTkzOltbODZdLDI1Nl0sMTIwMTk0OltbODddLDI1Nl0sMTIwMTk1OltbODhdLDI1Nl0sMTIwMTk2OltbODldLDI1Nl0sMTIwMTk3OltbOTBdLDI1Nl0sMTIwMTk4OltbOTddLDI1Nl0sMTIwMTk5OltbOThdLDI1Nl0sMTIwMjAwOltbOTldLDI1Nl0sMTIwMjAxOltbMTAwXSwyNTZdLDEyMDIwMjpbWzEwMV0sMjU2XSwxMjAyMDM6W1sxMDJdLDI1Nl0sMTIwMjA0OltbMTAzXSwyNTZdLDEyMDIwNTpbWzEwNF0sMjU2XSwxMjAyMDY6W1sxMDVdLDI1Nl0sMTIwMjA3OltbMTA2XSwyNTZdLDEyMDIwODpbWzEwN10sMjU2XSwxMjAyMDk6W1sxMDhdLDI1Nl0sMTIwMjEwOltbMTA5XSwyNTZdLDEyMDIxMTpbWzExMF0sMjU2XSwxMjAyMTI6W1sxMTFdLDI1Nl0sMTIwMjEzOltbMTEyXSwyNTZdLDEyMDIxNDpbWzExM10sMjU2XSwxMjAyMTU6W1sxMTRdLDI1Nl0sMTIwMjE2OltbMTE1XSwyNTZdLDEyMDIxNzpbWzExNl0sMjU2XSwxMjAyMTg6W1sxMTddLDI1Nl0sMTIwMjE5OltbMTE4XSwyNTZdLDEyMDIyMDpbWzExOV0sMjU2XSwxMjAyMjE6W1sxMjBdLDI1Nl0sMTIwMjIyOltbMTIxXSwyNTZdLDEyMDIyMzpbWzEyMl0sMjU2XSwxMjAyMjQ6W1s2NV0sMjU2XSwxMjAyMjU6W1s2Nl0sMjU2XSwxMjAyMjY6W1s2N10sMjU2XSwxMjAyMjc6W1s2OF0sMjU2XSwxMjAyMjg6W1s2OV0sMjU2XSwxMjAyMjk6W1s3MF0sMjU2XSwxMjAyMzA6W1s3MV0sMjU2XSwxMjAyMzE6W1s3Ml0sMjU2XSwxMjAyMzI6W1s3M10sMjU2XSwxMjAyMzM6W1s3NF0sMjU2XSwxMjAyMzQ6W1s3NV0sMjU2XSwxMjAyMzU6W1s3Nl0sMjU2XSwxMjAyMzY6W1s3N10sMjU2XSwxMjAyMzc6W1s3OF0sMjU2XSwxMjAyMzg6W1s3OV0sMjU2XSwxMjAyMzk6W1s4MF0sMjU2XSwxMjAyNDA6W1s4MV0sMjU2XSwxMjAyNDE6W1s4Ml0sMjU2XSwxMjAyNDI6W1s4M10sMjU2XSwxMjAyNDM6W1s4NF0sMjU2XSwxMjAyNDQ6W1s4NV0sMjU2XSwxMjAyNDU6W1s4Nl0sMjU2XSwxMjAyNDY6W1s4N10sMjU2XSwxMjAyNDc6W1s4OF0sMjU2XSwxMjAyNDg6W1s4OV0sMjU2XSwxMjAyNDk6W1s5MF0sMjU2XSwxMjAyNTA6W1s5N10sMjU2XSwxMjAyNTE6W1s5OF0sMjU2XSwxMjAyNTI6W1s5OV0sMjU2XSwxMjAyNTM6W1sxMDBdLDI1Nl0sMTIwMjU0OltbMTAxXSwyNTZdLDEyMDI1NTpbWzEwMl0sMjU2XSwxMjAyNTY6W1sxMDNdLDI1Nl0sMTIwMjU3OltbMTA0XSwyNTZdLDEyMDI1ODpbWzEwNV0sMjU2XSwxMjAyNTk6W1sxMDZdLDI1Nl0sMTIwMjYwOltbMTA3XSwyNTZdLDEyMDI2MTpbWzEwOF0sMjU2XSwxMjAyNjI6W1sxMDldLDI1Nl0sMTIwMjYzOltbMTEwXSwyNTZdLDEyMDI2NDpbWzExMV0sMjU2XSwxMjAyNjU6W1sxMTJdLDI1Nl0sMTIwMjY2OltbMTEzXSwyNTZdLDEyMDI2NzpbWzExNF0sMjU2XSwxMjAyNjg6W1sxMTVdLDI1Nl0sMTIwMjY5OltbMTE2XSwyNTZdLDEyMDI3MDpbWzExN10sMjU2XSwxMjAyNzE6W1sxMThdLDI1Nl0sMTIwMjcyOltbMTE5XSwyNTZdLDEyMDI3MzpbWzEyMF0sMjU2XSwxMjAyNzQ6W1sxMjFdLDI1Nl0sMTIwMjc1OltbMTIyXSwyNTZdLDEyMDI3NjpbWzY1XSwyNTZdLDEyMDI3NzpbWzY2XSwyNTZdLDEyMDI3ODpbWzY3XSwyNTZdLDEyMDI3OTpbWzY4XSwyNTZdLDEyMDI4MDpbWzY5XSwyNTZdLDEyMDI4MTpbWzcwXSwyNTZdLDEyMDI4MjpbWzcxXSwyNTZdLDEyMDI4MzpbWzcyXSwyNTZdLDEyMDI4NDpbWzczXSwyNTZdLDEyMDI4NTpbWzc0XSwyNTZdLDEyMDI4NjpbWzc1XSwyNTZdLDEyMDI4NzpbWzc2XSwyNTZdLDEyMDI4ODpbWzc3XSwyNTZdLDEyMDI4OTpbWzc4XSwyNTZdLDEyMDI5MDpbWzc5XSwyNTZdLDEyMDI5MTpbWzgwXSwyNTZdLDEyMDI5MjpbWzgxXSwyNTZdLDEyMDI5MzpbWzgyXSwyNTZdLDEyMDI5NDpbWzgzXSwyNTZdLDEyMDI5NTpbWzg0XSwyNTZdLDEyMDI5NjpbWzg1XSwyNTZdLDEyMDI5NzpbWzg2XSwyNTZdLDEyMDI5ODpbWzg3XSwyNTZdLDEyMDI5OTpbWzg4XSwyNTZdLDEyMDMwMDpbWzg5XSwyNTZdLDEyMDMwMTpbWzkwXSwyNTZdLDEyMDMwMjpbWzk3XSwyNTZdLDEyMDMwMzpbWzk4XSwyNTZdLDEyMDMwNDpbWzk5XSwyNTZdLDEyMDMwNTpbWzEwMF0sMjU2XSwxMjAzMDY6W1sxMDFdLDI1Nl0sMTIwMzA3OltbMTAyXSwyNTZdLDEyMDMwODpbWzEwM10sMjU2XSwxMjAzMDk6W1sxMDRdLDI1Nl0sMTIwMzEwOltbMTA1XSwyNTZdLDEyMDMxMTpbWzEwNl0sMjU2XSwxMjAzMTI6W1sxMDddLDI1Nl0sMTIwMzEzOltbMTA4XSwyNTZdLDEyMDMxNDpbWzEwOV0sMjU2XSwxMjAzMTU6W1sxMTBdLDI1Nl0sMTIwMzE2OltbMTExXSwyNTZdLDEyMDMxNzpbWzExMl0sMjU2XSwxMjAzMTg6W1sxMTNdLDI1Nl0sMTIwMzE5OltbMTE0XSwyNTZdfSwKNTQ3ODQ6ezEyMDMyMDpbWzExNV0sMjU2XSwxMjAzMjE6W1sxMTZdLDI1Nl0sMTIwMzIyOltbMTE3XSwyNTZdLDEyMDMyMzpbWzExOF0sMjU2XSwxMjAzMjQ6W1sxMTldLDI1Nl0sMTIwMzI1OltbMTIwXSwyNTZdLDEyMDMyNjpbWzEyMV0sMjU2XSwxMjAzMjc6W1sxMjJdLDI1Nl0sMTIwMzI4OltbNjVdLDI1Nl0sMTIwMzI5OltbNjZdLDI1Nl0sMTIwMzMwOltbNjddLDI1Nl0sMTIwMzMxOltbNjhdLDI1Nl0sMTIwMzMyOltbNjldLDI1Nl0sMTIwMzMzOltbNzBdLDI1Nl0sMTIwMzM0OltbNzFdLDI1Nl0sMTIwMzM1OltbNzJdLDI1Nl0sMTIwMzM2OltbNzNdLDI1Nl0sMTIwMzM3OltbNzRdLDI1Nl0sMTIwMzM4OltbNzVdLDI1Nl0sMTIwMzM5OltbNzZdLDI1Nl0sMTIwMzQwOltbNzddLDI1Nl0sMTIwMzQxOltbNzhdLDI1Nl0sMTIwMzQyOltbNzldLDI1Nl0sMTIwMzQzOltbODBdLDI1Nl0sMTIwMzQ0OltbODFdLDI1Nl0sMTIwMzQ1OltbODJdLDI1Nl0sMTIwMzQ2OltbODNdLDI1Nl0sMTIwMzQ3OltbODRdLDI1Nl0sMTIwMzQ4OltbODVdLDI1Nl0sMTIwMzQ5OltbODZdLDI1Nl0sMTIwMzUwOltbODddLDI1Nl0sMTIwMzUxOltbODhdLDI1Nl0sMTIwMzUyOltbODldLDI1Nl0sMTIwMzUzOltbOTBdLDI1Nl0sMTIwMzU0OltbOTddLDI1Nl0sMTIwMzU1OltbOThdLDI1Nl0sMTIwMzU2OltbOTldLDI1Nl0sMTIwMzU3OltbMTAwXSwyNTZdLDEyMDM1ODpbWzEwMV0sMjU2XSwxMjAzNTk6W1sxMDJdLDI1Nl0sMTIwMzYwOltbMTAzXSwyNTZdLDEyMDM2MTpbWzEwNF0sMjU2XSwxMjAzNjI6W1sxMDVdLDI1Nl0sMTIwMzYzOltbMTA2XSwyNTZdLDEyMDM2NDpbWzEwN10sMjU2XSwxMjAzNjU6W1sxMDhdLDI1Nl0sMTIwMzY2OltbMTA5XSwyNTZdLDEyMDM2NzpbWzExMF0sMjU2XSwxMjAzNjg6W1sxMTFdLDI1Nl0sMTIwMzY5OltbMTEyXSwyNTZdLDEyMDM3MDpbWzExM10sMjU2XSwxMjAzNzE6W1sxMTRdLDI1Nl0sMTIwMzcyOltbMTE1XSwyNTZdLDEyMDM3MzpbWzExNl0sMjU2XSwxMjAzNzQ6W1sxMTddLDI1Nl0sMTIwMzc1OltbMTE4XSwyNTZdLDEyMDM3NjpbWzExOV0sMjU2XSwxMjAzNzc6W1sxMjBdLDI1Nl0sMTIwMzc4OltbMTIxXSwyNTZdLDEyMDM3OTpbWzEyMl0sMjU2XSwxMjAzODA6W1s2NV0sMjU2XSwxMjAzODE6W1s2Nl0sMjU2XSwxMjAzODI6W1s2N10sMjU2XSwxMjAzODM6W1s2OF0sMjU2XSwxMjAzODQ6W1s2OV0sMjU2XSwxMjAzODU6W1s3MF0sMjU2XSwxMjAzODY6W1s3MV0sMjU2XSwxMjAzODc6W1s3Ml0sMjU2XSwxMjAzODg6W1s3M10sMjU2XSwxMjAzODk6W1s3NF0sMjU2XSwxMjAzOTA6W1s3NV0sMjU2XSwxMjAzOTE6W1s3Nl0sMjU2XSwxMjAzOTI6W1s3N10sMjU2XSwxMjAzOTM6W1s3OF0sMjU2XSwxMjAzOTQ6W1s3OV0sMjU2XSwxMjAzOTU6W1s4MF0sMjU2XSwxMjAzOTY6W1s4MV0sMjU2XSwxMjAzOTc6W1s4Ml0sMjU2XSwxMjAzOTg6W1s4M10sMjU2XSwxMjAzOTk6W1s4NF0sMjU2XSwxMjA0MDA6W1s4NV0sMjU2XSwxMjA0MDE6W1s4Nl0sMjU2XSwxMjA0MDI6W1s4N10sMjU2XSwxMjA0MDM6W1s4OF0sMjU2XSwxMjA0MDQ6W1s4OV0sMjU2XSwxMjA0MDU6W1s5MF0sMjU2XSwxMjA0MDY6W1s5N10sMjU2XSwxMjA0MDc6W1s5OF0sMjU2XSwxMjA0MDg6W1s5OV0sMjU2XSwxMjA0MDk6W1sxMDBdLDI1Nl0sMTIwNDEwOltbMTAxXSwyNTZdLDEyMDQxMTpbWzEwMl0sMjU2XSwxMjA0MTI6W1sxMDNdLDI1Nl0sMTIwNDEzOltbMTA0XSwyNTZdLDEyMDQxNDpbWzEwNV0sMjU2XSwxMjA0MTU6W1sxMDZdLDI1Nl0sMTIwNDE2OltbMTA3XSwyNTZdLDEyMDQxNzpbWzEwOF0sMjU2XSwxMjA0MTg6W1sxMDldLDI1Nl0sMTIwNDE5OltbMTEwXSwyNTZdLDEyMDQyMDpbWzExMV0sMjU2XSwxMjA0MjE6W1sxMTJdLDI1Nl0sMTIwNDIyOltbMTEzXSwyNTZdLDEyMDQyMzpbWzExNF0sMjU2XSwxMjA0MjQ6W1sxMTVdLDI1Nl0sMTIwNDI1OltbMTE2XSwyNTZdLDEyMDQyNjpbWzExN10sMjU2XSwxMjA0Mjc6W1sxMThdLDI1Nl0sMTIwNDI4OltbMTE5XSwyNTZdLDEyMDQyOTpbWzEyMF0sMjU2XSwxMjA0MzA6W1sxMjFdLDI1Nl0sMTIwNDMxOltbMTIyXSwyNTZdLDEyMDQzMjpbWzY1XSwyNTZdLDEyMDQzMzpbWzY2XSwyNTZdLDEyMDQzNDpbWzY3XSwyNTZdLDEyMDQzNTpbWzY4XSwyNTZdLDEyMDQzNjpbWzY5XSwyNTZdLDEyMDQzNzpbWzcwXSwyNTZdLDEyMDQzODpbWzcxXSwyNTZdLDEyMDQzOTpbWzcyXSwyNTZdLDEyMDQ0MDpbWzczXSwyNTZdLDEyMDQ0MTpbWzc0XSwyNTZdLDEyMDQ0MjpbWzc1XSwyNTZdLDEyMDQ0MzpbWzc2XSwyNTZdLDEyMDQ0NDpbWzc3XSwyNTZdLDEyMDQ0NTpbWzc4XSwyNTZdLDEyMDQ0NjpbWzc5XSwyNTZdLDEyMDQ0NzpbWzgwXSwyNTZdLDEyMDQ0ODpbWzgxXSwyNTZdLDEyMDQ0OTpbWzgyXSwyNTZdLDEyMDQ1MDpbWzgzXSwyNTZdLDEyMDQ1MTpbWzg0XSwyNTZdLDEyMDQ1MjpbWzg1XSwyNTZdLDEyMDQ1MzpbWzg2XSwyNTZdLDEyMDQ1NDpbWzg3XSwyNTZdLDEyMDQ1NTpbWzg4XSwyNTZdLDEyMDQ1NjpbWzg5XSwyNTZdLDEyMDQ1NzpbWzkwXSwyNTZdLDEyMDQ1ODpbWzk3XSwyNTZdLDEyMDQ1OTpbWzk4XSwyNTZdLDEyMDQ2MDpbWzk5XSwyNTZdLDEyMDQ2MTpbWzEwMF0sMjU2XSwxMjA0NjI6W1sxMDFdLDI1Nl0sMTIwNDYzOltbMTAyXSwyNTZdLDEyMDQ2NDpbWzEwM10sMjU2XSwxMjA0NjU6W1sxMDRdLDI1Nl0sMTIwNDY2OltbMTA1XSwyNTZdLDEyMDQ2NzpbWzEwNl0sMjU2XSwxMjA0Njg6W1sxMDddLDI1Nl0sMTIwNDY5OltbMTA4XSwyNTZdLDEyMDQ3MDpbWzEwOV0sMjU2XSwxMjA0NzE6W1sxMTBdLDI1Nl0sMTIwNDcyOltbMTExXSwyNTZdLDEyMDQ3MzpbWzExMl0sMjU2XSwxMjA0NzQ6W1sxMTNdLDI1Nl0sMTIwNDc1OltbMTE0XSwyNTZdLDEyMDQ3NjpbWzExNV0sMjU2XSwxMjA0Nzc6W1sxMTZdLDI1Nl0sMTIwNDc4OltbMTE3XSwyNTZdLDEyMDQ3OTpbWzExOF0sMjU2XSwxMjA0ODA6W1sxMTldLDI1Nl0sMTIwNDgxOltbMTIwXSwyNTZdLDEyMDQ4MjpbWzEyMV0sMjU2XSwxMjA0ODM6W1sxMjJdLDI1Nl0sMTIwNDg0OltbMzA1XSwyNTZdLDEyMDQ4NTpbWzU2N10sMjU2XSwxMjA0ODg6W1s5MTNdLDI1Nl0sMTIwNDg5OltbOTE0XSwyNTZdLDEyMDQ5MDpbWzkxNV0sMjU2XSwxMjA0OTE6W1s5MTZdLDI1Nl0sMTIwNDkyOltbOTE3XSwyNTZdLDEyMDQ5MzpbWzkxOF0sMjU2XSwxMjA0OTQ6W1s5MTldLDI1Nl0sMTIwNDk1OltbOTIwXSwyNTZdLDEyMDQ5NjpbWzkyMV0sMjU2XSwxMjA0OTc6W1s5MjJdLDI1Nl0sMTIwNDk4OltbOTIzXSwyNTZdLDEyMDQ5OTpbWzkyNF0sMjU2XSwxMjA1MDA6W1s5MjVdLDI1Nl0sMTIwNTAxOltbOTI2XSwyNTZdLDEyMDUwMjpbWzkyN10sMjU2XSwxMjA1MDM6W1s5MjhdLDI1Nl0sMTIwNTA0OltbOTI5XSwyNTZdLDEyMDUwNTpbWzEwMTJdLDI1Nl0sMTIwNTA2OltbOTMxXSwyNTZdLDEyMDUwNzpbWzkzMl0sMjU2XSwxMjA1MDg6W1s5MzNdLDI1Nl0sMTIwNTA5OltbOTM0XSwyNTZdLDEyMDUxMDpbWzkzNV0sMjU2XSwxMjA1MTE6W1s5MzZdLDI1Nl0sMTIwNTEyOltbOTM3XSwyNTZdLDEyMDUxMzpbWzg3MTFdLDI1Nl0sMTIwNTE0OltbOTQ1XSwyNTZdLDEyMDUxNTpbWzk0Nl0sMjU2XSwxMjA1MTY6W1s5NDddLDI1Nl0sMTIwNTE3OltbOTQ4XSwyNTZdLDEyMDUxODpbWzk0OV0sMjU2XSwxMjA1MTk6W1s5NTBdLDI1Nl0sMTIwNTIwOltbOTUxXSwyNTZdLDEyMDUyMTpbWzk1Ml0sMjU2XSwxMjA1MjI6W1s5NTNdLDI1Nl0sMTIwNTIzOltbOTU0XSwyNTZdLDEyMDUyNDpbWzk1NV0sMjU2XSwxMjA1MjU6W1s5NTZdLDI1Nl0sMTIwNTI2OltbOTU3XSwyNTZdLDEyMDUyNzpbWzk1OF0sMjU2XSwxMjA1Mjg6W1s5NTldLDI1Nl0sMTIwNTI5OltbOTYwXSwyNTZdLDEyMDUzMDpbWzk2MV0sMjU2XSwxMjA1MzE6W1s5NjJdLDI1Nl0sMTIwNTMyOltbOTYzXSwyNTZdLDEyMDUzMzpbWzk2NF0sMjU2XSwxMjA1MzQ6W1s5NjVdLDI1Nl0sMTIwNTM1OltbOTY2XSwyNTZdLDEyMDUzNjpbWzk2N10sMjU2XSwxMjA1Mzc6W1s5NjhdLDI1Nl0sMTIwNTM4OltbOTY5XSwyNTZdLDEyMDUzOTpbWzg3MDZdLDI1Nl0sMTIwNTQwOltbMTAxM10sMjU2XSwxMjA1NDE6W1s5NzddLDI1Nl0sMTIwNTQyOltbMTAwOF0sMjU2XSwxMjA1NDM6W1s5ODFdLDI1Nl0sMTIwNTQ0OltbMTAwOV0sMjU2XSwxMjA1NDU6W1s5ODJdLDI1Nl0sMTIwNTQ2OltbOTEzXSwyNTZdLDEyMDU0NzpbWzkxNF0sMjU2XSwxMjA1NDg6W1s5MTVdLDI1Nl0sMTIwNTQ5OltbOTE2XSwyNTZdLDEyMDU1MDpbWzkxN10sMjU2XSwxMjA1NTE6W1s5MThdLDI1Nl0sMTIwNTUyOltbOTE5XSwyNTZdLDEyMDU1MzpbWzkyMF0sMjU2XSwxMjA1NTQ6W1s5MjFdLDI1Nl0sMTIwNTU1OltbOTIyXSwyNTZdLDEyMDU1NjpbWzkyM10sMjU2XSwxMjA1NTc6W1s5MjRdLDI1Nl0sMTIwNTU4OltbOTI1XSwyNTZdLDEyMDU1OTpbWzkyNl0sMjU2XSwxMjA1NjA6W1s5MjddLDI1Nl0sMTIwNTYxOltbOTI4XSwyNTZdLDEyMDU2MjpbWzkyOV0sMjU2XSwxMjA1NjM6W1sxMDEyXSwyNTZdLDEyMDU2NDpbWzkzMV0sMjU2XSwxMjA1NjU6W1s5MzJdLDI1Nl0sMTIwNTY2OltbOTMzXSwyNTZdLDEyMDU2NzpbWzkzNF0sMjU2XSwxMjA1Njg6W1s5MzVdLDI1Nl0sMTIwNTY5OltbOTM2XSwyNTZdLDEyMDU3MDpbWzkzN10sMjU2XSwxMjA1NzE6W1s4NzExXSwyNTZdLDEyMDU3MjpbWzk0NV0sMjU2XSwxMjA1NzM6W1s5NDZdLDI1Nl0sMTIwNTc0OltbOTQ3XSwyNTZdLDEyMDU3NTpbWzk0OF0sMjU2XX0sCjU1MDQwOnsxMjA1NzY6W1s5NDldLDI1Nl0sMTIwNTc3OltbOTUwXSwyNTZdLDEyMDU3ODpbWzk1MV0sMjU2XSwxMjA1Nzk6W1s5NTJdLDI1Nl0sMTIwNTgwOltbOTUzXSwyNTZdLDEyMDU4MTpbWzk1NF0sMjU2XSwxMjA1ODI6W1s5NTVdLDI1Nl0sMTIwNTgzOltbOTU2XSwyNTZdLDEyMDU4NDpbWzk1N10sMjU2XSwxMjA1ODU6W1s5NThdLDI1Nl0sMTIwNTg2OltbOTU5XSwyNTZdLDEyMDU4NzpbWzk2MF0sMjU2XSwxMjA1ODg6W1s5NjFdLDI1Nl0sMTIwNTg5OltbOTYyXSwyNTZdLDEyMDU5MDpbWzk2M10sMjU2XSwxMjA1OTE6W1s5NjRdLDI1Nl0sMTIwNTkyOltbOTY1XSwyNTZdLDEyMDU5MzpbWzk2Nl0sMjU2XSwxMjA1OTQ6W1s5NjddLDI1Nl0sMTIwNTk1OltbOTY4XSwyNTZdLDEyMDU5NjpbWzk2OV0sMjU2XSwxMjA1OTc6W1s4NzA2XSwyNTZdLDEyMDU5ODpbWzEwMTNdLDI1Nl0sMTIwNTk5OltbOTc3XSwyNTZdLDEyMDYwMDpbWzEwMDhdLDI1Nl0sMTIwNjAxOltbOTgxXSwyNTZdLDEyMDYwMjpbWzEwMDldLDI1Nl0sMTIwNjAzOltbOTgyXSwyNTZdLDEyMDYwNDpbWzkxM10sMjU2XSwxMjA2MDU6W1s5MTRdLDI1Nl0sMTIwNjA2OltbOTE1XSwyNTZdLDEyMDYwNzpbWzkxNl0sMjU2XSwxMjA2MDg6W1s5MTddLDI1Nl0sMTIwNjA5OltbOTE4XSwyNTZdLDEyMDYxMDpbWzkxOV0sMjU2XSwxMjA2MTE6W1s5MjBdLDI1Nl0sMTIwNjEyOltbOTIxXSwyNTZdLDEyMDYxMzpbWzkyMl0sMjU2XSwxMjA2MTQ6W1s5MjNdLDI1Nl0sMTIwNjE1OltbOTI0XSwyNTZdLDEyMDYxNjpbWzkyNV0sMjU2XSwxMjA2MTc6W1s5MjZdLDI1Nl0sMTIwNjE4OltbOTI3XSwyNTZdLDEyMDYxOTpbWzkyOF0sMjU2XSwxMjA2MjA6W1s5MjldLDI1Nl0sMTIwNjIxOltbMTAxMl0sMjU2XSwxMjA2MjI6W1s5MzFdLDI1Nl0sMTIwNjIzOltbOTMyXSwyNTZdLDEyMDYyNDpbWzkzM10sMjU2XSwxMjA2MjU6W1s5MzRdLDI1Nl0sMTIwNjI2OltbOTM1XSwyNTZdLDEyMDYyNzpbWzkzNl0sMjU2XSwxMjA2Mjg6W1s5MzddLDI1Nl0sMTIwNjI5OltbODcxMV0sMjU2XSwxMjA2MzA6W1s5NDVdLDI1Nl0sMTIwNjMxOltbOTQ2XSwyNTZdLDEyMDYzMjpbWzk0N10sMjU2XSwxMjA2MzM6W1s5NDhdLDI1Nl0sMTIwNjM0OltbOTQ5XSwyNTZdLDEyMDYzNTpbWzk1MF0sMjU2XSwxMjA2MzY6W1s5NTFdLDI1Nl0sMTIwNjM3OltbOTUyXSwyNTZdLDEyMDYzODpbWzk1M10sMjU2XSwxMjA2Mzk6W1s5NTRdLDI1Nl0sMTIwNjQwOltbOTU1XSwyNTZdLDEyMDY0MTpbWzk1Nl0sMjU2XSwxMjA2NDI6W1s5NTddLDI1Nl0sMTIwNjQzOltbOTU4XSwyNTZdLDEyMDY0NDpbWzk1OV0sMjU2XSwxMjA2NDU6W1s5NjBdLDI1Nl0sMTIwNjQ2OltbOTYxXSwyNTZdLDEyMDY0NzpbWzk2Ml0sMjU2XSwxMjA2NDg6W1s5NjNdLDI1Nl0sMTIwNjQ5OltbOTY0XSwyNTZdLDEyMDY1MDpbWzk2NV0sMjU2XSwxMjA2NTE6W1s5NjZdLDI1Nl0sMTIwNjUyOltbOTY3XSwyNTZdLDEyMDY1MzpbWzk2OF0sMjU2XSwxMjA2NTQ6W1s5NjldLDI1Nl0sMTIwNjU1OltbODcwNl0sMjU2XSwxMjA2NTY6W1sxMDEzXSwyNTZdLDEyMDY1NzpbWzk3N10sMjU2XSwxMjA2NTg6W1sxMDA4XSwyNTZdLDEyMDY1OTpbWzk4MV0sMjU2XSwxMjA2NjA6W1sxMDA5XSwyNTZdLDEyMDY2MTpbWzk4Ml0sMjU2XSwxMjA2NjI6W1s5MTNdLDI1Nl0sMTIwNjYzOltbOTE0XSwyNTZdLDEyMDY2NDpbWzkxNV0sMjU2XSwxMjA2NjU6W1s5MTZdLDI1Nl0sMTIwNjY2OltbOTE3XSwyNTZdLDEyMDY2NzpbWzkxOF0sMjU2XSwxMjA2Njg6W1s5MTldLDI1Nl0sMTIwNjY5OltbOTIwXSwyNTZdLDEyMDY3MDpbWzkyMV0sMjU2XSwxMjA2NzE6W1s5MjJdLDI1Nl0sMTIwNjcyOltbOTIzXSwyNTZdLDEyMDY3MzpbWzkyNF0sMjU2XSwxMjA2NzQ6W1s5MjVdLDI1Nl0sMTIwNjc1OltbOTI2XSwyNTZdLDEyMDY3NjpbWzkyN10sMjU2XSwxMjA2Nzc6W1s5MjhdLDI1Nl0sMTIwNjc4OltbOTI5XSwyNTZdLDEyMDY3OTpbWzEwMTJdLDI1Nl0sMTIwNjgwOltbOTMxXSwyNTZdLDEyMDY4MTpbWzkzMl0sMjU2XSwxMjA2ODI6W1s5MzNdLDI1Nl0sMTIwNjgzOltbOTM0XSwyNTZdLDEyMDY4NDpbWzkzNV0sMjU2XSwxMjA2ODU6W1s5MzZdLDI1Nl0sMTIwNjg2OltbOTM3XSwyNTZdLDEyMDY4NzpbWzg3MTFdLDI1Nl0sMTIwNjg4OltbOTQ1XSwyNTZdLDEyMDY4OTpbWzk0Nl0sMjU2XSwxMjA2OTA6W1s5NDddLDI1Nl0sMTIwNjkxOltbOTQ4XSwyNTZdLDEyMDY5MjpbWzk0OV0sMjU2XSwxMjA2OTM6W1s5NTBdLDI1Nl0sMTIwNjk0OltbOTUxXSwyNTZdLDEyMDY5NTpbWzk1Ml0sMjU2XSwxMjA2OTY6W1s5NTNdLDI1Nl0sMTIwNjk3OltbOTU0XSwyNTZdLDEyMDY5ODpbWzk1NV0sMjU2XSwxMjA2OTk6W1s5NTZdLDI1Nl0sMTIwNzAwOltbOTU3XSwyNTZdLDEyMDcwMTpbWzk1OF0sMjU2XSwxMjA3MDI6W1s5NTldLDI1Nl0sMTIwNzAzOltbOTYwXSwyNTZdLDEyMDcwNDpbWzk2MV0sMjU2XSwxMjA3MDU6W1s5NjJdLDI1Nl0sMTIwNzA2OltbOTYzXSwyNTZdLDEyMDcwNzpbWzk2NF0sMjU2XSwxMjA3MDg6W1s5NjVdLDI1Nl0sMTIwNzA5OltbOTY2XSwyNTZdLDEyMDcxMDpbWzk2N10sMjU2XSwxMjA3MTE6W1s5NjhdLDI1Nl0sMTIwNzEyOltbOTY5XSwyNTZdLDEyMDcxMzpbWzg3MDZdLDI1Nl0sMTIwNzE0OltbMTAxM10sMjU2XSwxMjA3MTU6W1s5NzddLDI1Nl0sMTIwNzE2OltbMTAwOF0sMjU2XSwxMjA3MTc6W1s5ODFdLDI1Nl0sMTIwNzE4OltbMTAwOV0sMjU2XSwxMjA3MTk6W1s5ODJdLDI1Nl0sMTIwNzIwOltbOTEzXSwyNTZdLDEyMDcyMTpbWzkxNF0sMjU2XSwxMjA3MjI6W1s5MTVdLDI1Nl0sMTIwNzIzOltbOTE2XSwyNTZdLDEyMDcyNDpbWzkxN10sMjU2XSwxMjA3MjU6W1s5MThdLDI1Nl0sMTIwNzI2OltbOTE5XSwyNTZdLDEyMDcyNzpbWzkyMF0sMjU2XSwxMjA3Mjg6W1s5MjFdLDI1Nl0sMTIwNzI5OltbOTIyXSwyNTZdLDEyMDczMDpbWzkyM10sMjU2XSwxMjA3MzE6W1s5MjRdLDI1Nl0sMTIwNzMyOltbOTI1XSwyNTZdLDEyMDczMzpbWzkyNl0sMjU2XSwxMjA3MzQ6W1s5MjddLDI1Nl0sMTIwNzM1OltbOTI4XSwyNTZdLDEyMDczNjpbWzkyOV0sMjU2XSwxMjA3Mzc6W1sxMDEyXSwyNTZdLDEyMDczODpbWzkzMV0sMjU2XSwxMjA3Mzk6W1s5MzJdLDI1Nl0sMTIwNzQwOltbOTMzXSwyNTZdLDEyMDc0MTpbWzkzNF0sMjU2XSwxMjA3NDI6W1s5MzVdLDI1Nl0sMTIwNzQzOltbOTM2XSwyNTZdLDEyMDc0NDpbWzkzN10sMjU2XSwxMjA3NDU6W1s4NzExXSwyNTZdLDEyMDc0NjpbWzk0NV0sMjU2XSwxMjA3NDc6W1s5NDZdLDI1Nl0sMTIwNzQ4OltbOTQ3XSwyNTZdLDEyMDc0OTpbWzk0OF0sMjU2XSwxMjA3NTA6W1s5NDldLDI1Nl0sMTIwNzUxOltbOTUwXSwyNTZdLDEyMDc1MjpbWzk1MV0sMjU2XSwxMjA3NTM6W1s5NTJdLDI1Nl0sMTIwNzU0OltbOTUzXSwyNTZdLDEyMDc1NTpbWzk1NF0sMjU2XSwxMjA3NTY6W1s5NTVdLDI1Nl0sMTIwNzU3OltbOTU2XSwyNTZdLDEyMDc1ODpbWzk1N10sMjU2XSwxMjA3NTk6W1s5NThdLDI1Nl0sMTIwNzYwOltbOTU5XSwyNTZdLDEyMDc2MTpbWzk2MF0sMjU2XSwxMjA3NjI6W1s5NjFdLDI1Nl0sMTIwNzYzOltbOTYyXSwyNTZdLDEyMDc2NDpbWzk2M10sMjU2XSwxMjA3NjU6W1s5NjRdLDI1Nl0sMTIwNzY2OltbOTY1XSwyNTZdLDEyMDc2NzpbWzk2Nl0sMjU2XSwxMjA3Njg6W1s5NjddLDI1Nl0sMTIwNzY5OltbOTY4XSwyNTZdLDEyMDc3MDpbWzk2OV0sMjU2XSwxMjA3NzE6W1s4NzA2XSwyNTZdLDEyMDc3MjpbWzEwMTNdLDI1Nl0sMTIwNzczOltbOTc3XSwyNTZdLDEyMDc3NDpbWzEwMDhdLDI1Nl0sMTIwNzc1OltbOTgxXSwyNTZdLDEyMDc3NjpbWzEwMDldLDI1Nl0sMTIwNzc3OltbOTgyXSwyNTZdLDEyMDc3ODpbWzk4OF0sMjU2XSwxMjA3Nzk6W1s5ODldLDI1Nl0sMTIwNzgyOltbNDhdLDI1Nl0sMTIwNzgzOltbNDldLDI1Nl0sMTIwNzg0OltbNTBdLDI1Nl0sMTIwNzg1OltbNTFdLDI1Nl0sMTIwNzg2OltbNTJdLDI1Nl0sMTIwNzg3OltbNTNdLDI1Nl0sMTIwNzg4OltbNTRdLDI1Nl0sMTIwNzg5OltbNTVdLDI1Nl0sMTIwNzkwOltbNTZdLDI1Nl0sMTIwNzkxOltbNTddLDI1Nl0sMTIwNzkyOltbNDhdLDI1Nl0sMTIwNzkzOltbNDldLDI1Nl0sMTIwNzk0OltbNTBdLDI1Nl0sMTIwNzk1OltbNTFdLDI1Nl0sMTIwNzk2OltbNTJdLDI1Nl0sMTIwNzk3OltbNTNdLDI1Nl0sMTIwNzk4OltbNTRdLDI1Nl0sMTIwNzk5OltbNTVdLDI1Nl0sMTIwODAwOltbNTZdLDI1Nl0sMTIwODAxOltbNTddLDI1Nl0sMTIwODAyOltbNDhdLDI1Nl0sMTIwODAzOltbNDldLDI1Nl0sMTIwODA0OltbNTBdLDI1Nl0sMTIwODA1OltbNTFdLDI1Nl0sMTIwODA2OltbNTJdLDI1Nl0sMTIwODA3OltbNTNdLDI1Nl0sMTIwODA4OltbNTRdLDI1Nl0sMTIwODA5OltbNTVdLDI1Nl0sMTIwODEwOltbNTZdLDI1Nl0sMTIwODExOltbNTddLDI1Nl0sMTIwODEyOltbNDhdLDI1Nl0sMTIwODEzOltbNDldLDI1Nl0sMTIwODE0OltbNTBdLDI1Nl0sMTIwODE1OltbNTFdLDI1Nl0sMTIwODE2OltbNTJdLDI1Nl0sMTIwODE3OltbNTNdLDI1Nl0sMTIwODE4OltbNTRdLDI1Nl0sMTIwODE5OltbNTVdLDI1Nl0sMTIwODIwOltbNTZdLDI1Nl0sMTIwODIxOltbNTddLDI1Nl0sMTIwODIyOltbNDhdLDI1Nl0sMTIwODIzOltbNDldLDI1Nl0sMTIwODI0OltbNTBdLDI1Nl0sMTIwODI1OltbNTFdLDI1Nl0sMTIwODI2OltbNTJdLDI1Nl0sMTIwODI3OltbNTNdLDI1Nl0sMTIwODI4OltbNTRdLDI1Nl0sMTIwODI5OltbNTVdLDI1Nl0sMTIwODMwOltbNTZdLDI1Nl0sMTIwODMxOltbNTddLDI1Nl19LAo1OTM5Mjp7MTI1MTM2OlssMjIwXSwxMjUxMzc6WywyMjBdLDEyNTEzODpbLDIyMF0sMTI1MTM5OlssMjIwXSwxMjUxNDA6WywyMjBdLDEyNTE0MTpbLDIyMF0sMTI1MTQyOlssMjIwXX0sCjYwOTI4OnsxMjY0NjQ6W1sxNTc1XSwyNTZdLDEyNjQ2NTpbWzE1NzZdLDI1Nl0sMTI2NDY2OltbMTU4MF0sMjU2XSwxMjY0Njc6W1sxNTgzXSwyNTZdLDEyNjQ2OTpbWzE2MDhdLDI1Nl0sMTI2NDcwOltbMTU4Nl0sMjU2XSwxMjY0NzE6W1sxNTgxXSwyNTZdLDEyNjQ3MjpbWzE1OTFdLDI1Nl0sMTI2NDczOltbMTYxMF0sMjU2XSwxMjY0NzQ6W1sxNjAzXSwyNTZdLDEyNjQ3NTpbWzE2MDRdLDI1Nl0sMTI2NDc2OltbMTYwNV0sMjU2XSwxMjY0Nzc6W1sxNjA2XSwyNTZdLDEyNjQ3ODpbWzE1ODddLDI1Nl0sMTI2NDc5OltbMTU5M10sMjU2XSwxMjY0ODA6W1sxNjAxXSwyNTZdLDEyNjQ4MTpbWzE1ODldLDI1Nl0sMTI2NDgyOltbMTYwMl0sMjU2XSwxMjY0ODM6W1sxNTg1XSwyNTZdLDEyNjQ4NDpbWzE1ODhdLDI1Nl0sMTI2NDg1OltbMTU3OF0sMjU2XSwxMjY0ODY6W1sxNTc5XSwyNTZdLDEyNjQ4NzpbWzE1ODJdLDI1Nl0sMTI2NDg4OltbMTU4NF0sMjU2XSwxMjY0ODk6W1sxNTkwXSwyNTZdLDEyNjQ5MDpbWzE1OTJdLDI1Nl0sMTI2NDkxOltbMTU5NF0sMjU2XSwxMjY0OTI6W1sxNjQ2XSwyNTZdLDEyNjQ5MzpbWzE3MjJdLDI1Nl0sMTI2NDk0OltbMTY5N10sMjU2XSwxMjY0OTU6W1sxNjQ3XSwyNTZdLDEyNjQ5NzpbWzE1NzZdLDI1Nl0sMTI2NDk4OltbMTU4MF0sMjU2XSwxMjY1MDA6W1sxNjA3XSwyNTZdLDEyNjUwMzpbWzE1ODFdLDI1Nl0sMTI2NTA1OltbMTYxMF0sMjU2XSwxMjY1MDY6W1sxNjAzXSwyNTZdLDEyNjUwNzpbWzE2MDRdLDI1Nl0sMTI2NTA4OltbMTYwNV0sMjU2XSwxMjY1MDk6W1sxNjA2XSwyNTZdLDEyNjUxMDpbWzE1ODddLDI1Nl0sMTI2NTExOltbMTU5M10sMjU2XSwxMjY1MTI6W1sxNjAxXSwyNTZdLDEyNjUxMzpbWzE1ODldLDI1Nl0sMTI2NTE0OltbMTYwMl0sMjU2XSwxMjY1MTY6W1sxNTg4XSwyNTZdLDEyNjUxNzpbWzE1NzhdLDI1Nl0sMTI2NTE4OltbMTU3OV0sMjU2XSwxMjY1MTk6W1sxNTgyXSwyNTZdLDEyNjUyMTpbWzE1OTBdLDI1Nl0sMTI2NTIzOltbMTU5NF0sMjU2XSwxMjY1MzA6W1sxNTgwXSwyNTZdLDEyNjUzNTpbWzE1ODFdLDI1Nl0sMTI2NTM3OltbMTYxMF0sMjU2XSwxMjY1Mzk6W1sxNjA0XSwyNTZdLDEyNjU0MTpbWzE2MDZdLDI1Nl0sMTI2NTQyOltbMTU4N10sMjU2XSwxMjY1NDM6W1sxNTkzXSwyNTZdLDEyNjU0NTpbWzE1ODldLDI1Nl0sMTI2NTQ2OltbMTYwMl0sMjU2XSwxMjY1NDg6W1sxNTg4XSwyNTZdLDEyNjU1MTpbWzE1ODJdLDI1Nl0sMTI2NTUzOltbMTU5MF0sMjU2XSwxMjY1NTU6W1sxNTk0XSwyNTZdLDEyNjU1NzpbWzE3MjJdLDI1Nl0sMTI2NTU5OltbMTY0N10sMjU2XSwxMjY1NjE6W1sxNTc2XSwyNTZdLDEyNjU2MjpbWzE1ODBdLDI1Nl0sMTI2NTY0OltbMTYwN10sMjU2XSwxMjY1Njc6W1sxNTgxXSwyNTZdLDEyNjU2ODpbWzE1OTFdLDI1Nl0sMTI2NTY5OltbMTYxMF0sMjU2XSwxMjY1NzA6W1sxNjAzXSwyNTZdLDEyNjU3MjpbWzE2MDVdLDI1Nl0sMTI2NTczOltbMTYwNl0sMjU2XSwxMjY1NzQ6W1sxNTg3XSwyNTZdLDEyNjU3NTpbWzE1OTNdLDI1Nl0sMTI2NTc2OltbMTYwMV0sMjU2XSwxMjY1Nzc6W1sxNTg5XSwyNTZdLDEyNjU3ODpbWzE2MDJdLDI1Nl0sMTI2NTgwOltbMTU4OF0sMjU2XSwxMjY1ODE6W1sxNTc4XSwyNTZdLDEyNjU4MjpbWzE1NzldLDI1Nl0sMTI2NTgzOltbMTU4Ml0sMjU2XSwxMjY1ODU6W1sxNTkwXSwyNTZdLDEyNjU4NjpbWzE1OTJdLDI1Nl0sMTI2NTg3OltbMTU5NF0sMjU2XSwxMjY1ODg6W1sxNjQ2XSwyNTZdLDEyNjU5MDpbWzE2OTddLDI1Nl0sMTI2NTkyOltbMTU3NV0sMjU2XSwxMjY1OTM6W1sxNTc2XSwyNTZdLDEyNjU5NDpbWzE1ODBdLDI1Nl0sMTI2NTk1OltbMTU4M10sMjU2XSwxMjY1OTY6W1sxNjA3XSwyNTZdLDEyNjU5NzpbWzE2MDhdLDI1Nl0sMTI2NTk4OltbMTU4Nl0sMjU2XSwxMjY1OTk6W1sxNTgxXSwyNTZdLDEyNjYwMDpbWzE1OTFdLDI1Nl0sMTI2NjAxOltbMTYxMF0sMjU2XSwxMjY2MDM6W1sxNjA0XSwyNTZdLDEyNjYwNDpbWzE2MDVdLDI1Nl0sMTI2NjA1OltbMTYwNl0sMjU2XSwxMjY2MDY6W1sxNTg3XSwyNTZdLDEyNjYwNzpbWzE1OTNdLDI1Nl0sMTI2NjA4OltbMTYwMV0sMjU2XSwxMjY2MDk6W1sxNTg5XSwyNTZdLDEyNjYxMDpbWzE2MDJdLDI1Nl0sMTI2NjExOltbMTU4NV0sMjU2XSwxMjY2MTI6W1sxNTg4XSwyNTZdLDEyNjYxMzpbWzE1NzhdLDI1Nl0sMTI2NjE0OltbMTU3OV0sMjU2XSwxMjY2MTU6W1sxNTgyXSwyNTZdLDEyNjYxNjpbWzE1ODRdLDI1Nl0sMTI2NjE3OltbMTU5MF0sMjU2XSwxMjY2MTg6W1sxNTkyXSwyNTZdLDEyNjYxOTpbWzE1OTRdLDI1Nl0sMTI2NjI1OltbMTU3Nl0sMjU2XSwxMjY2MjY6W1sxNTgwXSwyNTZdLDEyNjYyNzpbWzE1ODNdLDI1Nl0sMTI2NjI5OltbMTYwOF0sMjU2XSwxMjY2MzA6W1sxNTg2XSwyNTZdLDEyNjYzMTpbWzE1ODFdLDI1Nl0sMTI2NjMyOltbMTU5MV0sMjU2XSwxMjY2MzM6W1sxNjEwXSwyNTZdLDEyNjYzNTpbWzE2MDRdLDI1Nl0sMTI2NjM2OltbMTYwNV0sMjU2XSwxMjY2Mzc6W1sxNjA2XSwyNTZdLDEyNjYzODpbWzE1ODddLDI1Nl0sMTI2NjM5OltbMTU5M10sMjU2XSwxMjY2NDA6W1sxNjAxXSwyNTZdLDEyNjY0MTpbWzE1ODldLDI1Nl0sMTI2NjQyOltbMTYwMl0sMjU2XSwxMjY2NDM6W1sxNTg1XSwyNTZdLDEyNjY0NDpbWzE1ODhdLDI1Nl0sMTI2NjQ1OltbMTU3OF0sMjU2XSwxMjY2NDY6W1sxNTc5XSwyNTZdLDEyNjY0NzpbWzE1ODJdLDI1Nl0sMTI2NjQ4OltbMTU4NF0sMjU2XSwxMjY2NDk6W1sxNTkwXSwyNTZdLDEyNjY1MDpbWzE1OTJdLDI1Nl0sMTI2NjUxOltbMTU5NF0sMjU2XX0sCjYxNjk2OnsxMjcyMzI6W1s0OCw0Nl0sMjU2XSwxMjcyMzM6W1s0OCw0NF0sMjU2XSwxMjcyMzQ6W1s0OSw0NF0sMjU2XSwxMjcyMzU6W1s1MCw0NF0sMjU2XSwxMjcyMzY6W1s1MSw0NF0sMjU2XSwxMjcyMzc6W1s1Miw0NF0sMjU2XSwxMjcyMzg6W1s1Myw0NF0sMjU2XSwxMjcyMzk6W1s1NCw0NF0sMjU2XSwxMjcyNDA6W1s1NSw0NF0sMjU2XSwxMjcyNDE6W1s1Niw0NF0sMjU2XSwxMjcyNDI6W1s1Nyw0NF0sMjU2XSwxMjcyNDg6W1s0MCw2NSw0MV0sMjU2XSwxMjcyNDk6W1s0MCw2Niw0MV0sMjU2XSwxMjcyNTA6W1s0MCw2Nyw0MV0sMjU2XSwxMjcyNTE6W1s0MCw2OCw0MV0sMjU2XSwxMjcyNTI6W1s0MCw2OSw0MV0sMjU2XSwxMjcyNTM6W1s0MCw3MCw0MV0sMjU2XSwxMjcyNTQ6W1s0MCw3MSw0MV0sMjU2XSwxMjcyNTU6W1s0MCw3Miw0MV0sMjU2XSwxMjcyNTY6W1s0MCw3Myw0MV0sMjU2XSwxMjcyNTc6W1s0MCw3NCw0MV0sMjU2XSwxMjcyNTg6W1s0MCw3NSw0MV0sMjU2XSwxMjcyNTk6W1s0MCw3Niw0MV0sMjU2XSwxMjcyNjA6W1s0MCw3Nyw0MV0sMjU2XSwxMjcyNjE6W1s0MCw3OCw0MV0sMjU2XSwxMjcyNjI6W1s0MCw3OSw0MV0sMjU2XSwxMjcyNjM6W1s0MCw4MCw0MV0sMjU2XSwxMjcyNjQ6W1s0MCw4MSw0MV0sMjU2XSwxMjcyNjU6W1s0MCw4Miw0MV0sMjU2XSwxMjcyNjY6W1s0MCw4Myw0MV0sMjU2XSwxMjcyNjc6W1s0MCw4NCw0MV0sMjU2XSwxMjcyNjg6W1s0MCw4NSw0MV0sMjU2XSwxMjcyNjk6W1s0MCw4Niw0MV0sMjU2XSwxMjcyNzA6W1s0MCw4Nyw0MV0sMjU2XSwxMjcyNzE6W1s0MCw4OCw0MV0sMjU2XSwxMjcyNzI6W1s0MCw4OSw0MV0sMjU2XSwxMjcyNzM6W1s0MCw5MCw0MV0sMjU2XSwxMjcyNzQ6W1sxMjMwOCw4MywxMjMwOV0sMjU2XSwxMjcyNzU6W1s2N10sMjU2XSwxMjcyNzY6W1s4Ml0sMjU2XSwxMjcyNzc6W1s2Nyw2OF0sMjU2XSwxMjcyNzg6W1s4Nyw5MF0sMjU2XSwxMjcyODA6W1s2NV0sMjU2XSwxMjcyODE6W1s2Nl0sMjU2XSwxMjcyODI6W1s2N10sMjU2XSwxMjcyODM6W1s2OF0sMjU2XSwxMjcyODQ6W1s2OV0sMjU2XSwxMjcyODU6W1s3MF0sMjU2XSwxMjcyODY6W1s3MV0sMjU2XSwxMjcyODc6W1s3Ml0sMjU2XSwxMjcyODg6W1s3M10sMjU2XSwxMjcyODk6W1s3NF0sMjU2XSwxMjcyOTA6W1s3NV0sMjU2XSwxMjcyOTE6W1s3Nl0sMjU2XSwxMjcyOTI6W1s3N10sMjU2XSwxMjcyOTM6W1s3OF0sMjU2XSwxMjcyOTQ6W1s3OV0sMjU2XSwxMjcyOTU6W1s4MF0sMjU2XSwxMjcyOTY6W1s4MV0sMjU2XSwxMjcyOTc6W1s4Ml0sMjU2XSwxMjcyOTg6W1s4M10sMjU2XSwxMjcyOTk6W1s4NF0sMjU2XSwxMjczMDA6W1s4NV0sMjU2XSwxMjczMDE6W1s4Nl0sMjU2XSwxMjczMDI6W1s4N10sMjU2XSwxMjczMDM6W1s4OF0sMjU2XSwxMjczMDQ6W1s4OV0sMjU2XSwxMjczMDU6W1s5MF0sMjU2XSwxMjczMDY6W1s3Miw4Nl0sMjU2XSwxMjczMDc6W1s3Nyw4Nl0sMjU2XSwxMjczMDg6W1s4Myw2OF0sMjU2XSwxMjczMDk6W1s4Myw4M10sMjU2XSwxMjczMTA6W1s4MCw4MCw4Nl0sMjU2XSwxMjczMTE6W1s4Nyw2N10sMjU2XSwxMjczMzg6W1s3Nyw2N10sMjU2XSwxMjczMzk6W1s3Nyw2OF0sMjU2XSwxMjczNzY6W1s2OCw3NF0sMjU2XX0sCjYxOTUyOnsxMjc0ODg6W1sxMjQxMSwxMjM2M10sMjU2XSwxMjc0ODk6W1sxMjQ2NywxMjQ2N10sMjU2XSwxMjc0OTA6W1sxMjQ2OV0sMjU2XSwxMjc1MDQ6W1syNTE2M10sMjU2XSwxMjc1MDU6W1syMzM4M10sMjU2XSwxMjc1MDY6W1syMTQ1Ml0sMjU2XSwxMjc1MDc6W1sxMjQ4N10sMjU2XSwxMjc1MDg6W1syMDEwOF0sMjU2XSwxMjc1MDk6W1syMjgxMF0sMjU2XSwxMjc1MTA6W1szNTI5OV0sMjU2XSwxMjc1MTE6W1syMjgyNV0sMjU2XSwxMjc1MTI6W1syMDEzMl0sMjU2XSwxMjc1MTM6W1syNjE0NF0sMjU2XSwxMjc1MTQ6W1syODk2MV0sMjU2XSwxMjc1MTU6W1syNjAwOV0sMjU2XSwxMjc1MTY6W1syMTA2OV0sMjU2XSwxMjc1MTc6W1syNDQ2MF0sMjU2XSwxMjc1MTg6W1syMDg3N10sMjU2XSwxMjc1MTk6W1syNjAzMl0sMjU2XSwxMjc1MjA6W1syMTAyMV0sMjU2XSwxMjc1MjE6W1szMjA2Nl0sMjU2XSwxMjc1MjI6W1syOTk4M10sMjU2XSwxMjc1MjM6W1szNjAwOV0sMjU2XSwxMjc1MjQ6W1syMjc2OF0sMjU2XSwxMjc1MjU6W1syMTU2MV0sMjU2XSwxMjc1MjY6W1syODQzNl0sMjU2XSwxMjc1Mjc6W1syNTIzN10sMjU2XSwxMjc1Mjg6W1syNTQyOV0sMjU2XSwxMjc1Mjk6W1sxOTk2OF0sMjU2XSwxMjc1MzA6W1sxOTk3N10sMjU2XSwxMjc1MzE6W1szNjkzOF0sMjU2XSwxMjc1MzI6W1syNDAzOF0sMjU2XSwxMjc1MzM6W1syMDAxM10sMjU2XSwxMjc1MzQ6W1syMTQ5MV0sMjU2XSwxMjc1MzU6W1syNTM1MV0sMjU2XSwxMjc1MzY6W1szNjIwOF0sMjU2XSwxMjc1Mzc6W1syNTE3MV0sMjU2XSwxMjc1Mzg6W1szMTEwNV0sMjU2XSwxMjc1Mzk6W1szMTM1NF0sMjU2XSwxMjc1NDA6W1syMTUxMl0sMjU2XSwxMjc1NDE6W1syODI4OF0sMjU2XSwxMjc1NDI6W1syNjM3N10sMjU2XSwxMjc1NDM6W1syNjM3Nl0sMjU2XSwxMjc1NDQ6W1szMDAwM10sMjU2XSwxMjc1NDU6W1syMTEwNl0sMjU2XSwxMjc1NDY6W1syMTk0Ml0sMjU2XSwxMjc1NTI6W1sxMjMwOCwyNjQxMiwxMjMwOV0sMjU2XSwxMjc1NTM6W1sxMjMwOCwxOTk3NywxMjMwOV0sMjU2XSwxMjc1NTQ6W1sxMjMwOCwyMDEwOCwxMjMwOV0sMjU2XSwxMjc1NTU6W1sxMjMwOCwyMzQzMywxMjMwOV0sMjU2XSwxMjc1NTY6W1sxMjMwOCwyODg1NywxMjMwOV0sMjU2XSwxMjc1NTc6W1sxMjMwOCwyNTE3MSwxMjMwOV0sMjU2XSwxMjc1NTg6W1sxMjMwOCwzMDQyMywxMjMwOV0sMjU2XSwxMjc1NTk6W1sxMjMwOCwyMTIxMywxMjMwOV0sMjU2XSwxMjc1NjA6W1sxMjMwOCwyNTk0MywxMjMwOV0sMjU2XSwxMjc1Njg6W1syNDQ3MV0sMjU2XSwxMjc1Njk6W1syMTQ4N10sMjU2XX0sCjYzNDg4OnsxOTQ1NjA6W1syMDAyOV1dLDE5NDU2MTpbWzIwMDI0XV0sMTk0NTYyOltbMjAwMzNdXSwxOTQ1NjM6W1sxMzEzNjJdXSwxOTQ1NjQ6W1syMDMyMF1dLDE5NDU2NTpbWzIwMzk4XV0sMTk0NTY2OltbMjA0MTFdXSwxOTQ1Njc6W1syMDQ4Ml1dLDE5NDU2ODpbWzIwNjAyXV0sMTk0NTY5OltbMjA2MzNdXSwxOTQ1NzA6W1syMDcxMV1dLDE5NDU3MTpbWzIwNjg3XV0sMTk0NTcyOltbMTM0NzBdXSwxOTQ1NzM6W1sxMzI2NjZdXSwxOTQ1NzQ6W1syMDgxM11dLDE5NDU3NTpbWzIwODIwXV0sMTk0NTc2OltbMjA4MzZdXSwxOTQ1Nzc6W1syMDg1NV1dLDE5NDU3ODpbWzEzMjM4MF1dLDE5NDU3OTpbWzEzNDk3XV0sMTk0NTgwOltbMjA4MzldXSwxOTQ1ODE6W1syMDg3N11dLDE5NDU4MjpbWzEzMjQyN11dLDE5NDU4MzpbWzIwODg3XV0sMTk0NTg0OltbMjA5MDBdXSwxOTQ1ODU6W1syMDE3Ml1dLDE5NDU4NjpbWzIwOTA4XV0sMTk0NTg3OltbMjA5MTddXSwxOTQ1ODg6W1sxNjg0MTVdXSwxOTQ1ODk6W1syMDk4MV1dLDE5NDU5MDpbWzIwOTk1XV0sMTk0NTkxOltbMTM1MzVdXSwxOTQ1OTI6W1syMTA1MV1dLDE5NDU5MzpbWzIxMDYyXV0sMTk0NTk0OltbMjExMDZdXSwxOTQ1OTU6W1syMTExMV1dLDE5NDU5NjpbWzEzNTg5XV0sMTk0NTk3OltbMjExOTFdXSwxOTQ1OTg6W1syMTE5M11dLDE5NDU5OTpbWzIxMjIwXV0sMTk0NjAwOltbMjEyNDJdXSwxOTQ2MDE6W1syMTI1M11dLDE5NDYwMjpbWzIxMjU0XV0sMTk0NjAzOltbMjEyNzFdXSwxOTQ2MDQ6W1syMTMyMV1dLDE5NDYwNTpbWzIxMzI5XV0sMTk0NjA2OltbMjEzMzhdXSwxOTQ2MDc6W1syMTM2M11dLDE5NDYwODpbWzIxMzczXV0sMTk0NjA5OltbMjEzNzVdXSwxOTQ2MTA6W1syMTM3NV1dLDE5NDYxMTpbWzIxMzc1XV0sMTk0NjEyOltbMTMzNjc2XV0sMTk0NjEzOltbMjg3ODRdXSwxOTQ2MTQ6W1syMTQ1MF1dLDE5NDYxNTpbWzIxNDcxXV0sMTk0NjE2OltbMTMzOTg3XV0sMTk0NjE3OltbMjE0ODNdXSwxOTQ2MTg6W1syMTQ4OV1dLDE5NDYxOTpbWzIxNTEwXV0sMTk0NjIwOltbMjE2NjJdXSwxOTQ2MjE6W1syMTU2MF1dLDE5NDYyMjpbWzIxNTc2XV0sMTk0NjIzOltbMjE2MDhdXSwxOTQ2MjQ6W1syMTY2Nl1dLDE5NDYyNTpbWzIxNzUwXV0sMTk0NjI2OltbMjE3NzZdXSwxOTQ2Mjc6W1syMTg0M11dLDE5NDYyODpbWzIxODU5XV0sMTk0NjI5OltbMjE4OTJdXSwxOTQ2MzA6W1syMTg5Ml1dLDE5NDYzMTpbWzIxOTEzXV0sMTk0NjMyOltbMjE5MzFdXSwxOTQ2MzM6W1syMTkzOV1dLDE5NDYzNDpbWzIxOTU0XV0sMTk0NjM1OltbMjIyOTRdXSwxOTQ2MzY6W1syMjAyMl1dLDE5NDYzNzpbWzIyMjk1XV0sMTk0NjM4OltbMjIwOTddXSwxOTQ2Mzk6W1syMjEzMl1dLDE5NDY0MDpbWzIwOTk5XV0sMTk0NjQxOltbMjI3NjZdXSwxOTQ2NDI6W1syMjQ3OF1dLDE5NDY0MzpbWzIyNTE2XV0sMTk0NjQ0OltbMjI1NDFdXSwxOTQ2NDU6W1syMjQxMV1dLDE5NDY0NjpbWzIyNTc4XV0sMTk0NjQ3OltbMjI1NzddXSwxOTQ2NDg6W1syMjcwMF1dLDE5NDY0OTpbWzEzNjQyMF1dLDE5NDY1MDpbWzIyNzcwXV0sMTk0NjUxOltbMjI3NzVdXSwxOTQ2NTI6W1syMjc5MF1dLDE5NDY1MzpbWzIyODEwXV0sMTk0NjU0OltbMjI4MThdXSwxOTQ2NTU6W1syMjg4Ml1dLDE5NDY1NjpbWzEzNjg3Ml1dLDE5NDY1NzpbWzEzNjkzOF1dLDE5NDY1ODpbWzIzMDIwXV0sMTk0NjU5OltbMjMwNjddXSwxOTQ2NjA6W1syMzA3OV1dLDE5NDY2MTpbWzIzMDAwXV0sMTk0NjYyOltbMjMxNDJdXSwxOTQ2NjM6W1sxNDA2Ml1dLDE5NDY2NDpbWzE0MDc2XV0sMTk0NjY1OltbMjMzMDRdXSwxOTQ2NjY6W1syMzM1OF1dLDE5NDY2NzpbWzIzMzU4XV0sMTk0NjY4OltbMTM3NjcyXV0sMTk0NjY5OltbMjM0OTFdXSwxOTQ2NzA6W1syMzUxMl1dLDE5NDY3MTpbWzIzNTI3XV0sMTk0NjcyOltbMjM1MzldXSwxOTQ2NzM6W1sxMzgwMDhdXSwxOTQ2NzQ6W1syMzU1MV1dLDE5NDY3NTpbWzIzNTU4XV0sMTk0Njc2OltbMjQ0MDNdXSwxOTQ2Nzc6W1syMzU4Nl1dLDE5NDY3ODpbWzE0MjA5XV0sMTk0Njc5OltbMjM2NDhdXSwxOTQ2ODA6W1syMzY2Ml1dLDE5NDY4MTpbWzIzNzQ0XV0sMTk0NjgyOltbMjM2OTNdXSwxOTQ2ODM6W1sxMzg3MjRdXSwxOTQ2ODQ6W1syMzg3NV1dLDE5NDY4NTpbWzEzODcyNl1dLDE5NDY4NjpbWzIzOTE4XV0sMTk0Njg3OltbMjM5MTVdXSwxOTQ2ODg6W1syMzkzMl1dLDE5NDY4OTpbWzI0MDMzXV0sMTk0NjkwOltbMjQwMzRdXSwxOTQ2OTE6W1sxNDM4M11dLDE5NDY5MjpbWzI0MDYxXV0sMTk0NjkzOltbMjQxMDRdXSwxOTQ2OTQ6W1syNDEyNV1dLDE5NDY5NTpbWzI0MTY5XV0sMTk0Njk2OltbMTQ0MzRdXSwxOTQ2OTc6W1sxMzk2NTFdXSwxOTQ2OTg6W1sxNDQ2MF1dLDE5NDY5OTpbWzI0MjQwXV0sMTk0NzAwOltbMjQyNDNdXSwxOTQ3MDE6W1syNDI0Nl1dLDE5NDcwMjpbWzI0MjY2XV0sMTk0NzAzOltbMTcyOTQ2XV0sMTk0NzA0OltbMjQzMThdXSwxOTQ3MDU6W1sxNDAwODFdXSwxOTQ3MDY6W1sxNDAwODFdXSwxOTQ3MDc6W1szMzI4MV1dLDE5NDcwODpbWzI0MzU0XV0sMTk0NzA5OltbMjQzNTRdXSwxOTQ3MTA6W1sxNDUzNV1dLDE5NDcxMTpbWzE0NDA1Nl1dLDE5NDcxMjpbWzE1NjEyMl1dLDE5NDcxMzpbWzI0NDE4XV0sMTk0NzE0OltbMjQ0MjddXSwxOTQ3MTU6W1sxNDU2M11dLDE5NDcxNjpbWzI0NDc0XV0sMTk0NzE3OltbMjQ1MjVdXSwxOTQ3MTg6W1syNDUzNV1dLDE5NDcxOTpbWzI0NTY5XV0sMTk0NzIwOltbMjQ3MDVdXSwxOTQ3MjE6W1sxNDY1MF1dLDE5NDcyMjpbWzE0NjIwXV0sMTk0NzIzOltbMjQ3MjRdXSwxOTQ3MjQ6W1sxNDEwMTJdXSwxOTQ3MjU6W1syNDc3NV1dLDE5NDcyNjpbWzI0OTA0XV0sMTk0NzI3OltbMjQ5MDhdXSwxOTQ3Mjg6W1syNDkxMF1dLDE5NDcyOTpbWzI0OTA4XV0sMTk0NzMwOltbMjQ5NTRdXSwxOTQ3MzE6W1syNDk3NF1dLDE5NDczMjpbWzI1MDEwXV0sMTk0NzMzOltbMjQ5OTZdXSwxOTQ3MzQ6W1syNTAwN11dLDE5NDczNTpbWzI1MDU0XV0sMTk0NzM2OltbMjUwNzRdXSwxOTQ3Mzc6W1syNTA3OF1dLDE5NDczODpbWzI1MTA0XV0sMTk0NzM5OltbMjUxMTVdXSwxOTQ3NDA6W1syNTE4MV1dLDE5NDc0MTpbWzI1MjY1XV0sMTk0NzQyOltbMjUzMDBdXSwxOTQ3NDM6W1syNTQyNF1dLDE5NDc0NDpbWzE0MjA5Ml1dLDE5NDc0NTpbWzI1NDA1XV0sMTk0NzQ2OltbMjUzNDBdXSwxOTQ3NDc6W1syNTQ0OF1dLDE5NDc0ODpbWzI1NDc1XV0sMTk0NzQ5OltbMjU1NzJdXSwxOTQ3NTA6W1sxNDIzMjFdXSwxOTQ3NTE6W1syNTYzNF1dLDE5NDc1MjpbWzI1NTQxXV0sMTk0NzUzOltbMjU1MTNdXSwxOTQ3NTQ6W1sxNDg5NF1dLDE5NDc1NTpbWzI1NzA1XV0sMTk0NzU2OltbMjU3MjZdXSwxOTQ3NTc6W1syNTc1N11dLDE5NDc1ODpbWzI1NzE5XV0sMTk0NzU5OltbMTQ5NTZdXSwxOTQ3NjA6W1syNTkzNV1dLDE5NDc2MTpbWzI1OTY0XV0sMTk0NzYyOltbMTQzMzcwXV0sMTk0NzYzOltbMjYwODNdXSwxOTQ3NjQ6W1syNjM2MF1dLDE5NDc2NTpbWzI2MTg1XV0sMTk0NzY2OltbMTUxMjldXSwxOTQ3Njc6W1syNjI1N11dLDE5NDc2ODpbWzE1MTEyXV0sMTk0NzY5OltbMTUwNzZdXSwxOTQ3NzA6W1syMDg4Ml1dLDE5NDc3MTpbWzIwODg1XV0sMTk0NzcyOltbMjYzNjhdXSwxOTQ3NzM6W1syNjI2OF1dLDE5NDc3NDpbWzMyOTQxXV0sMTk0Nzc1OltbMTczNjldXSwxOTQ3NzY6W1syNjM5MV1dLDE5NDc3NzpbWzI2Mzk1XV0sMTk0Nzc4OltbMjY0MDFdXSwxOTQ3Nzk6W1syNjQ2Ml1dLDE5NDc4MDpbWzI2NDUxXV0sMTk0NzgxOltbMTQ0MzIzXV0sMTk0NzgyOltbMTUxNzddXSwxOTQ3ODM6W1syNjYxOF1dLDE5NDc4NDpbWzI2NTAxXV0sMTk0Nzg1OltbMjY3MDZdXSwxOTQ3ODY6W1syNjc1N11dLDE5NDc4NzpbWzE0NDQ5M11dLDE5NDc4ODpbWzI2NzY2XV0sMTk0Nzg5OltbMjY2NTVdXSwxOTQ3OTA6W1syNjkwMF1dLDE5NDc5MTpbWzE1MjYxXV0sMTk0NzkyOltbMjY5NDZdXSwxOTQ3OTM6W1syNzA0M11dLDE5NDc5NDpbWzI3MTE0XV0sMTk0Nzk1OltbMjczMDRdXSwxOTQ3OTY6W1sxNDUwNTldXSwxOTQ3OTc6W1syNzM1NV1dLDE5NDc5ODpbWzE1Mzg0XV0sMTk0Nzk5OltbMjc0MjVdXSwxOTQ4MDA6W1sxNDU1NzVdXSwxOTQ4MDE6W1syNzQ3Nl1dLDE5NDgwMjpbWzE1NDM4XV0sMTk0ODAzOltbMjc1MDZdXSwxOTQ4MDQ6W1syNzU1MV1dLDE5NDgwNTpbWzI3NTc4XV0sMTk0ODA2OltbMjc1NzldXSwxOTQ4MDc6W1sxNDYwNjFdXSwxOTQ4MDg6W1sxMzg1MDddXSwxOTQ4MDk6W1sxNDYxNzBdXSwxOTQ4MTA6W1syNzcyNl1dLDE5NDgxMTpbWzE0NjYyMF1dLDE5NDgxMjpbWzI3ODM5XV0sMTk0ODEzOltbMjc4NTNdXSwxOTQ4MTQ6W1syNzc1MV1dLDE5NDgxNTpbWzI3OTI2XV19LAo2Mzc0NDp7NjM3NDQ6W1szNTkxMl1dLDYzNzQ1OltbMjYzNTZdXSw2Mzc0NjpbWzM2NTU0XV0sNjM3NDc6W1szNjA0MF1dLDYzNzQ4OltbMjgzNjldXSw2Mzc0OTpbWzIwMDE4XV0sNjM3NTA6W1syMTQ3N11dLDYzNzUxOltbNDA4NjBdXSw2Mzc1MjpbWzQwODYwXV0sNjM3NTM6W1syMjg2NV1dLDYzNzU0OltbMzczMjldXSw2Mzc1NTpbWzIxODk1XV0sNjM3NTY6W1syMjg1Nl1dLDYzNzU3OltbMjUwNzhdXSw2Mzc1ODpbWzMwMzEzXV0sNjM3NTk6W1szMjY0NV1dLDYzNzYwOltbMzQzNjddXSw2Mzc2MTpbWzM0NzQ2XV0sNjM3NjI6W1szNTA2NF1dLDYzNzYzOltbMzcwMDddXSw2Mzc2NDpbWzI3MTM4XV0sNjM3NjU6W1syNzkzMV1dLDYzNzY2OltbMjg4ODldXSw2Mzc2NzpbWzI5NjYyXV0sNjM3Njg6W1szMzg1M11dLDYzNzY5OltbMzcyMjZdXSw2Mzc3MDpbWzM5NDA5XV0sNjM3NzE6W1syMDA5OF1dLDYzNzcyOltbMjEzNjVdXSw2Mzc3MzpbWzI3Mzk2XV0sNjM3NzQ6W1syOTIxMV1dLDYzNzc1OltbMzQzNDldXSw2Mzc3NjpbWzQwNDc4XV0sNjM3Nzc6W1syMzg4OF1dLDYzNzc4OltbMjg2NTFdXSw2Mzc3OTpbWzM0MjUzXV0sNjM3ODA6W1szNTE3Ml1dLDYzNzgxOltbMjUyODldXSw2Mzc4MjpbWzMzMjQwXV0sNjM3ODM6W1szNDg0N11dLDYzNzg0OltbMjQyNjZdXSw2Mzc4NTpbWzI2MzkxXV0sNjM3ODY6W1syODAxMF1dLDYzNzg3OltbMjk0MzZdXSw2Mzc4ODpbWzM3MDcwXV0sNjM3ODk6W1syMDM1OF1dLDYzNzkwOltbMjA5MTldXSw2Mzc5MTpbWzIxMjE0XV0sNjM3OTI6W1syNTc5Nl1dLDYzNzkzOltbMjczNDddXSw2Mzc5NDpbWzI5MjAwXV0sNjM3OTU6W1szMDQzOV1dLDYzNzk2OltbMzI3NjldXSw2Mzc5NzpbWzM0MzEwXV0sNjM3OTg6W1szNDM5Nl1dLDYzNzk5OltbMzYzMzVdXSw2MzgwMDpbWzM4NzA2XV0sNjM4MDE6W1szOTc5MV1dLDYzODAyOltbNDA0NDJdXSw2MzgwMzpbWzMwODYwXV0sNjM4MDQ6W1szMTEwM11dLDYzODA1OltbMzIxNjBdXSw2MzgwNjpbWzMzNzM3XV0sNjM4MDc6W1szNzYzNl1dLDYzODA4OltbNDA1NzVdXSw2MzgwOTpbWzM1NTQyXV0sNjM4MTA6W1syMjc1MV1dLDYzODExOltbMjQzMjRdXSw2MzgxMjpbWzMxODQwXV0sNjM4MTM6W1szMjg5NF1dLDYzODE0OltbMjkyODJdXSw2MzgxNTpbWzMwOTIyXV0sNjM4MTY6W1szNjAzNF1dLDYzODE3OltbMzg2NDddXSw2MzgxODpbWzIyNzQ0XV0sNjM4MTk6W1syMzY1MF1dLDYzODIwOltbMjcxNTVdXSw2MzgyMTpbWzI4MTIyXV0sNjM4MjI6W1syODQzMV1dLDYzODIzOltbMzIwNDddXSw2MzgyNDpbWzMyMzExXV0sNjM4MjU6W1szODQ3NV1dLDYzODI2OltbMjEyMDJdXSw2MzgyNzpbWzMyOTA3XV0sNjM4Mjg6W1syMDk1Nl1dLDYzODI5OltbMjA5NDBdXSw2MzgzMDpbWzMxMjYwXV0sNjM4MzE6W1szMjE5MF1dLDYzODMyOltbMzM3NzddXSw2MzgzMzpbWzM4NTE3XV0sNjM4MzQ6W1szNTcxMl1dLDYzODM1OltbMjUyOTVdXSw2MzgzNjpbWzI3MTM4XV0sNjM4Mzc6W1szNTU4Ml1dLDYzODM4OltbMjAwMjVdXSw2MzgzOTpbWzIzNTI3XV0sNjM4NDA6W1syNDU5NF1dLDYzODQxOltbMjk1NzVdXSw2Mzg0MjpbWzMwMDY0XV0sNjM4NDM6W1syMTI3MV1dLDYzODQ0OltbMzA5NzFdXSw2Mzg0NTpbWzIwNDE1XV0sNjM4NDY6W1syNDQ4OV1dLDYzODQ3OltbMTk5ODFdXSw2Mzg0ODpbWzI3ODUyXV0sNjM4NDk6W1syNTk3Nl1dLDYzODUwOltbMzIwMzRdXSw2Mzg1MTpbWzIxNDQzXV0sNjM4NTI6W1syMjYyMl1dLDYzODUzOltbMzA0NjVdXSw2Mzg1NDpbWzMzODY1XV0sNjM4NTU6W1szNTQ5OF1dLDYzODU2OltbMjc1NzhdXSw2Mzg1NzpbWzM2Nzg0XV0sNjM4NTg6W1syNzc4NF1dLDYzODU5OltbMjUzNDJdXSw2Mzg2MDpbWzMzNTA5XV0sNjM4NjE6W1syNTUwNF1dLDYzODYyOltbMzAwNTNdXSw2Mzg2MzpbWzIwMTQyXV0sNjM4NjQ6W1syMDg0MV1dLDYzODY1OltbMjA5MzddXSw2Mzg2NjpbWzI2NzUzXV0sNjM4Njc6W1szMTk3NV1dLDYzODY4OltbMzMzOTFdXSw2Mzg2OTpbWzM1NTM4XV0sNjM4NzA6W1szNzMyN11dLDYzODcxOltbMjEyMzddXSw2Mzg3MjpbWzIxNTcwXV0sNjM4NzM6W1syMjg5OV1dLDYzODc0OltbMjQzMDBdXSw2Mzg3NTpbWzI2MDUzXV0sNjM4NzY6W1syODY3MF1dLDYzODc3OltbMzEwMThdXSw2Mzg3ODpbWzM4MzE3XV0sNjM4Nzk6W1szOTUzMF1dLDYzODgwOltbNDA1OTldXSw2Mzg4MTpbWzQwNjU0XV0sNjM4ODI6W1syMTE0N11dLDYzODgzOltbMjYzMTBdXSw2Mzg4NDpbWzI3NTExXV0sNjM4ODU6W1szNjcwNl1dLDYzODg2OltbMjQxODBdXSw2Mzg4NzpbWzI0OTc2XV0sNjM4ODg6W1syNTA4OF1dLDYzODg5OltbMjU3NTRdXSw2Mzg5MDpbWzI4NDUxXV0sNjM4OTE6W1syOTAwMV1dLDYzODkyOltbMjk4MzNdXSw2Mzg5MzpbWzMxMTc4XV0sNjM4OTQ6W1szMjI0NF1dLDYzODk1OltbMzI4NzldXSw2Mzg5NjpbWzM2NjQ2XV0sNjM4OTc6W1szNDAzMF1dLDYzODk4OltbMzY4OTldXSw2Mzg5OTpbWzM3NzA2XV0sNjM5MDA6W1syMTAxNV1dLDYzOTAxOltbMjExNTVdXSw2MzkwMjpbWzIxNjkzXV0sNjM5MDM6W1syODg3Ml1dLDYzOTA0OltbMzUwMTBdXSw2MzkwNTpbWzM1NDk4XV0sNjM5MDY6W1syNDI2NV1dLDYzOTA3OltbMjQ1NjVdXSw2MzkwODpbWzI1NDY3XV0sNjM5MDk6W1syNzU2Nl1dLDYzOTEwOltbMzE4MDZdXSw2MzkxMTpbWzI5NTU3XV0sNjM5MTI6W1syMDE5Nl1dLDYzOTEzOltbMjIyNjVdXSw2MzkxNDpbWzIzNTI3XV0sNjM5MTU6W1syMzk5NF1dLDYzOTE2OltbMjQ2MDRdXSw2MzkxNzpbWzI5NjE4XV0sNjM5MTg6W1syOTgwMV1dLDYzOTE5OltbMzI2NjZdXSw2MzkyMDpbWzMyODM4XV0sNjM5MjE6W1szNzQyOF1dLDYzOTIyOltbMzg2NDZdXSw2MzkyMzpbWzM4NzI4XV0sNjM5MjQ6W1szODkzNl1dLDYzOTI1OltbMjAzNjNdXSw2MzkyNjpbWzMxMTUwXV0sNjM5Mjc6W1szNzMwMF1dLDYzOTI4OltbMzg1ODRdXSw2MzkyOTpbWzI0ODAxXV0sNjM5MzA6W1syMDEwMl1dLDYzOTMxOltbMjA2OThdXSw2MzkzMjpbWzIzNTM0XV0sNjM5MzM6W1syMzYxNV1dLDYzOTM0OltbMjYwMDldXSw2MzkzNTpbWzI3MTM4XV0sNjM5MzY6W1syOTEzNF1dLDYzOTM3OltbMzAyNzRdXSw2MzkzODpbWzM0MDQ0XV0sNjM5Mzk6W1szNjk4OF1dLDYzOTQwOltbNDA4NDVdXSw2Mzk0MTpbWzI2MjQ4XV0sNjM5NDI6W1szODQ0Nl1dLDYzOTQzOltbMjExMjldXSw2Mzk0NDpbWzI2NDkxXV0sNjM5NDU6W1syNjYxMV1dLDYzOTQ2OltbMjc5NjldXSw2Mzk0NzpbWzI4MzE2XV0sNjM5NDg6W1syOTcwNV1dLDYzOTQ5OltbMzAwNDFdXSw2Mzk1MDpbWzMwODI3XV0sNjM5NTE6W1szMjAxNl1dLDYzOTUyOltbMzkwMDZdXSw2Mzk1MzpbWzIwODQ1XV0sNjM5NTQ6W1syNTEzNF1dLDYzOTU1OltbMzg1MjBdXSw2Mzk1NjpbWzIwNTIzXV0sNjM5NTc6W1syMzgzM11dLDYzOTU4OltbMjgxMzhdXSw2Mzk1OTpbWzM2NjUwXV0sNjM5NjA6W1syNDQ1OV1dLDYzOTYxOltbMjQ5MDBdXSw2Mzk2MjpbWzI2NjQ3XV0sNjM5NjM6W1syOTU3NV1dLDYzOTY0OltbMzg1MzRdXSw2Mzk2NTpbWzIxMDMzXV0sNjM5NjY6W1syMTUxOV1dLDYzOTY3OltbMjM2NTNdXSw2Mzk2ODpbWzI2MTMxXV0sNjM5Njk6W1syNjQ0Nl1dLDYzOTcwOltbMjY3OTJdXSw2Mzk3MTpbWzI3ODc3XV0sNjM5NzI6W1syOTcwMl1dLDYzOTczOltbMzAxNzhdXSw2Mzk3NDpbWzMyNjMzXV0sNjM5NzU6W1szNTAyM11dLDYzOTc2OltbMzUwNDFdXSw2Mzk3NzpbWzM3MzI0XV0sNjM5Nzg6W1szODYyNl1dLDYzOTc5OltbMjEzMTFdXSw2Mzk4MDpbWzI4MzQ2XV0sNjM5ODE6W1syMTUzM11dLDYzOTgyOltbMjkxMzZdXSw2Mzk4MzpbWzI5ODQ4XV0sNjM5ODQ6W1szNDI5OF1dLDYzOTg1OltbMzg1NjNdXSw2Mzk4NjpbWzQwMDIzXV0sNjM5ODc6W1s0MDYwN11dLDYzOTg4OltbMjY1MTldXSw2Mzk4OTpbWzI4MTA3XV0sNjM5OTA6W1szMzI1Nl1dLDYzOTkxOltbMzE0MzVdXSw2Mzk5MjpbWzMxNTIwXV0sNjM5OTM6W1szMTg5MF1dLDYzOTk0OltbMjkzNzZdXSw2Mzk5NTpbWzI4ODI1XV0sNjM5OTY6W1szNTY3Ml1dLDYzOTk3OltbMjAxNjBdXSw2Mzk5ODpbWzMzNTkwXV0sNjM5OTk6W1syMTA1MF1dLDE5NDgxNjpbWzI3OTY2XV0sMTk0ODE3OltbMjgwMjNdXSwxOTQ4MTg6W1syNzk2OV1dLDE5NDgxOTpbWzI4MDA5XV0sMTk0ODIwOltbMjgwMjRdXSwxOTQ4MjE6W1syODAzN11dLDE5NDgyMjpbWzE0NjcxOF1dLDE5NDgyMzpbWzI3OTU2XV0sMTk0ODI0OltbMjgyMDddXSwxOTQ4MjU6W1syODI3MF1dLDE5NDgyNjpbWzE1NjY3XV0sMTk0ODI3OltbMjgzNjNdXSwxOTQ4Mjg6W1syODM1OV1dLDE5NDgyOTpbWzE0NzE1M11dLDE5NDgzMDpbWzI4MTUzXV0sMTk0ODMxOltbMjg1MjZdXSwxOTQ4MzI6W1sxNDcyOTRdXSwxOTQ4MzM6W1sxNDczNDJdXSwxOTQ4MzQ6W1syODYxNF1dLDE5NDgzNTpbWzI4NzI5XV0sMTk0ODM2OltbMjg3MDJdXSwxOTQ4Mzc6W1syODY5OV1dLDE5NDgzODpbWzE1NzY2XV0sMTk0ODM5OltbMjg3NDZdXSwxOTQ4NDA6W1syODc5N11dLDE5NDg0MTpbWzI4NzkxXV0sMTk0ODQyOltbMjg4NDVdXSwxOTQ4NDM6W1sxMzIzODldXSwxOTQ4NDQ6W1syODk5N11dLDE5NDg0NTpbWzE0ODA2N11dLDE5NDg0NjpbWzI5MDg0XV0sMTk0ODQ3OltbMTQ4Mzk1XV0sMTk0ODQ4OltbMjkyMjRdXSwxOTQ4NDk6W1syOTIzN11dLDE5NDg1MDpbWzI5MjY0XV0sMTk0ODUxOltbMTQ5MDAwXV0sMTk0ODUyOltbMjkzMTJdXSwxOTQ4NTM6W1syOTMzM11dLDE5NDg1NDpbWzE0OTMwMV1dLDE5NDg1NTpbWzE0OTUyNF1dLDE5NDg1NjpbWzI5NTYyXV0sMTk0ODU3OltbMjk1NzldXSwxOTQ4NTg6W1sxNjA0NF1dLDE5NDg1OTpbWzI5NjA1XV0sMTk0ODYwOltbMTYwNTZdXSwxOTQ4NjE6W1sxNjA1Nl1dLDE5NDg2MjpbWzI5NzY3XV0sMTk0ODYzOltbMjk3ODhdXSwxOTQ4NjQ6W1syOTgwOV1dLDE5NDg2NTpbWzI5ODI5XV0sMTk0ODY2OltbMjk4OThdXSwxOTQ4Njc6W1sxNjE1NV1dLDE5NDg2ODpbWzI5OTg4XV0sMTk0ODY5OltbMTUwNTgyXV0sMTk0ODcwOltbMzAwMTRdXSwxOTQ4NzE6W1sxNTA2NzRdXSwxOTQ4NzI6W1szMDA2NF1dLDE5NDg3MzpbWzEzOTY3OV1dLDE5NDg3NDpbWzMwMjI0XV0sMTk0ODc1OltbMTUxNDU3XV0sMTk0ODc2OltbMTUxNDgwXV0sMTk0ODc3OltbMTUxNjIwXV0sMTk0ODc4OltbMTYzODBdXSwxOTQ4Nzk6W1sxNjM5Ml1dLDE5NDg4MDpbWzMwNDUyXV0sMTk0ODgxOltbMTUxNzk1XV0sMTk0ODgyOltbMTUxNzk0XV0sMTk0ODgzOltbMTUxODMzXV0sMTk0ODg0OltbMTUxODU5XV0sMTk0ODg1OltbMzA0OTRdXSwxOTQ4ODY6W1szMDQ5NV1dLDE5NDg4NzpbWzMwNDk1XV0sMTk0ODg4OltbMzA1MzhdXSwxOTQ4ODk6W1sxNjQ0MV1dLDE5NDg5MDpbWzMwNjAzXV0sMTk0ODkxOltbMTY0NTRdXSwxOTQ4OTI6W1sxNjUzNF1dLDE5NDg5MzpbWzE1MjYwNV1dLDE5NDg5NDpbWzMwNzk4XV0sMTk0ODk1OltbMzA4NjBdXSwxOTQ4OTY6W1szMDkyNF1dLDE5NDg5NzpbWzE2NjExXV0sMTk0ODk4OltbMTUzMTI2XV0sMTk0ODk5OltbMzEwNjJdXSwxOTQ5MDA6W1sxNTMyNDJdXSwxOTQ5MDE6W1sxNTMyODVdXSwxOTQ5MDI6W1szMTExOV1dLDE5NDkwMzpbWzMxMjExXV0sMTk0OTA0OltbMTY2ODddXSwxOTQ5MDU6W1szMTI5Nl1dLDE5NDkwNjpbWzMxMzA2XV0sMTk0OTA3OltbMzEzMTFdXSwxOTQ5MDg6W1sxNTM5ODBdXSwxOTQ5MDk6W1sxNTQyNzldXSwxOTQ5MTA6W1sxNTQyNzldXSwxOTQ5MTE6W1szMTQ3MF1dLDE5NDkxMjpbWzE2ODk4XV0sMTk0OTEzOltbMTU0NTM5XV0sMTk0OTE0OltbMzE2ODZdXSwxOTQ5MTU6W1szMTY4OV1dLDE5NDkxNjpbWzE2OTM1XV0sMTk0OTE3OltbMTU0NzUyXV0sMTk0OTE4OltbMzE5NTRdXSwxOTQ5MTk6W1sxNzA1Nl1dLDE5NDkyMDpbWzMxOTc2XV0sMTk0OTIxOltbMzE5NzFdXSwxOTQ5MjI6W1szMjAwMF1dLDE5NDkyMzpbWzE1NTUyNl1dLDE5NDkyNDpbWzMyMDk5XV0sMTk0OTI1OltbMTcxNTNdXSwxOTQ5MjY6W1szMjE5OV1dLDE5NDkyNzpbWzMyMjU4XV0sMTk0OTI4OltbMzIzMjVdXSwxOTQ5Mjk6W1sxNzIwNF1dLDE5NDkzMDpbWzE1NjIwMF1dLDE5NDkzMTpbWzE1NjIzMV1dLDE5NDkzMjpbWzE3MjQxXV0sMTk0OTMzOltbMTU2Mzc3XV0sMTk0OTM0OltbMzI2MzRdXSwxOTQ5MzU6W1sxNTY0NzhdXSwxOTQ5MzY6W1szMjY2MV1dLDE5NDkzNzpbWzMyNzYyXV0sMTk0OTM4OltbMzI3NzNdXSwxOTQ5Mzk6W1sxNTY4OTBdXSwxOTQ5NDA6W1sxNTY5NjNdXSwxOTQ5NDE6W1szMjg2NF1dLDE5NDk0MjpbWzE1NzA5Nl1dLDE5NDk0MzpbWzMyODgwXV0sMTk0OTQ0OltbMTQ0MjIzXV0sMTk0OTQ1OltbMTczNjVdXSwxOTQ5NDY6W1szMjk0Nl1dLDE5NDk0NzpbWzMzMDI3XV0sMTk0OTQ4OltbMTc0MTldXSwxOTQ5NDk6W1szMzA4Nl1dLDE5NDk1MDpbWzIzMjIxXV0sMTk0OTUxOltbMTU3NjA3XV0sMTk0OTUyOltbMTU3NjIxXV0sMTk0OTUzOltbMTQ0Mjc1XV0sMTk0OTU0OltbMTQ0Mjg0XV0sMTk0OTU1OltbMzMyODFdXSwxOTQ5NTY6W1szMzI4NF1dLDE5NDk1NzpbWzM2NzY2XV0sMTk0OTU4OltbMTc1MTVdXSwxOTQ5NTk6W1szMzQyNV1dLDE5NDk2MDpbWzMzNDE5XV0sMTk0OTYxOltbMzM0MzddXSwxOTQ5NjI6W1syMTE3MV1dLDE5NDk2MzpbWzMzNDU3XV0sMTk0OTY0OltbMzM0NTldXSwxOTQ5NjU6W1szMzQ2OV1dLDE5NDk2NjpbWzMzNTEwXV0sMTk0OTY3OltbMTU4NTI0XV0sMTk0OTY4OltbMzM1MDldXSwxOTQ5Njk6W1szMzU2NV1dLDE5NDk3MDpbWzMzNjM1XV0sMTk0OTcxOltbMzM3MDldXSwxOTQ5NzI6W1szMzU3MV1dLDE5NDk3MzpbWzMzNzI1XV0sMTk0OTc0OltbMzM3NjddXSwxOTQ5NzU6W1szMzg3OV1dLDE5NDk3NjpbWzMzNjE5XV0sMTk0OTc3OltbMzM3MzhdXSwxOTQ5Nzg6W1szMzc0MF1dLDE5NDk3OTpbWzMzNzU2XV0sMTk0OTgwOltbMTU4Nzc0XV0sMTk0OTgxOltbMTU5MDgzXV0sMTk0OTgyOltbMTU4OTMzXV0sMTk0OTgzOltbMTc3MDddXSwxOTQ5ODQ6W1szNDAzM11dLDE5NDk4NTpbWzM0MDM1XV0sMTk0OTg2OltbMzQwNzBdXSwxOTQ5ODc6W1sxNjA3MTRdXSwxOTQ5ODg6W1szNDE0OF1dLDE5NDk4OTpbWzE1OTUzMl1dLDE5NDk5MDpbWzE3NzU3XV0sMTk0OTkxOltbMTc3NjFdXSwxOTQ5OTI6W1sxNTk2NjVdXSwxOTQ5OTM6W1sxNTk5NTRdXSwxOTQ5OTQ6W1sxNzc3MV1dLDE5NDk5NTpbWzM0Mzg0XV0sMTk0OTk2OltbMzQzOTZdXSwxOTQ5OTc6W1szNDQwN11dLDE5NDk5ODpbWzM0NDA5XV0sMTk0OTk5OltbMzQ0NzNdXSwxOTUwMDA6W1szNDQ0MF1dLDE5NTAwMTpbWzM0NTc0XV0sMTk1MDAyOltbMzQ1MzBdXSwxOTUwMDM6W1szNDY4MV1dLDE5NTAwNDpbWzM0NjAwXV0sMTk1MDA1OltbMzQ2NjddXSwxOTUwMDY6W1szNDY5NF1dLDE5NTAwNzpbWzE3ODc5XV0sMTk1MDA4OltbMzQ3ODVdXSwxOTUwMDk6W1szNDgxN11dLDE5NTAxMDpbWzE3OTEzXV0sMTk1MDExOltbMzQ5MTJdXSwxOTUwMTI6W1szNDkxNV1dLDE5NTAxMzpbWzE2MTM4M11dLDE5NTAxNDpbWzM1MDMxXV0sMTk1MDE1OltbMzUwMzhdXSwxOTUwMTY6W1sxNzk3M11dLDE5NTAxNzpbWzM1MDY2XV0sMTk1MDE4OltbMTM0OTldXSwxOTUwMTk6W1sxNjE5NjZdXSwxOTUwMjA6W1sxNjIxNTBdXSwxOTUwMjE6W1sxODExMF1dLDE5NTAyMjpbWzE4MTE5XV0sMTk1MDIzOltbMzU0ODhdXSwxOTUwMjQ6W1szNTU2NV1dLDE5NTAyNTpbWzM1NzIyXV0sMTk1MDI2OltbMzU5MjVdXSwxOTUwMjc6W1sxNjI5ODRdXSwxOTUwMjg6W1szNjAxMV1dLDE5NTAyOTpbWzM2MDMzXV0sMTk1MDMwOltbMzYxMjNdXSwxOTUwMzE6W1szNjIxNV1dLDE5NTAzMjpbWzE2MzYzMV1dLDE5NTAzMzpbWzEzMzEyNF1dLDE5NTAzNDpbWzM2Mjk5XV0sMTk1MDM1OltbMzYyODRdXSwxOTUwMzY6W1szNjMzNl1dLDE5NTAzNzpbWzEzMzM0Ml1dLDE5NTAzODpbWzM2NTY0XV0sMTk1MDM5OltbMzY2NjRdXSwxOTUwNDA6W1sxNjUzMzBdXSwxOTUwNDE6W1sxNjUzNTddXSwxOTUwNDI6W1szNzAxMl1dLDE5NTA0MzpbWzM3MTA1XV0sMTk1MDQ0OltbMzcxMzddXSwxOTUwNDU6W1sxNjU2NzhdXSwxOTUwNDY6W1szNzE0N11dLDE5NTA0NzpbWzM3NDMyXV0sMTk1MDQ4OltbMzc1OTFdXSwxOTUwNDk6W1szNzU5Ml1dLDE5NTA1MDpbWzM3NTAwXV0sMTk1MDUxOltbMzc4ODFdXSwxOTUwNTI6W1szNzkwOV1dLDE5NTA1MzpbWzE2NjkwNl1dLDE5NTA1NDpbWzM4MjgzXV0sMTk1MDU1OltbMTg4MzddXSwxOTUwNTY6W1szODMyN11dLDE5NTA1NzpbWzE2NzI4N11dLDE5NTA1ODpbWzE4OTE4XV0sMTk1MDU5OltbMzg1OTVdXSwxOTUwNjA6W1syMzk4Nl1dLDE5NTA2MTpbWzM4NjkxXV0sMTk1MDYyOltbMTY4MjYxXV0sMTk1MDYzOltbMTY4NDc0XV0sMTk1MDY0OltbMTkwNTRdXSwxOTUwNjU6W1sxOTA2Ml1dLDE5NTA2NjpbWzM4ODgwXV0sMTk1MDY3OltbMTY4OTcwXV0sMTk1MDY4OltbMTkxMjJdXSwxOTUwNjk6W1sxNjkxMTBdXSwxOTUwNzA6W1szODkyM11dLDE5NTA3MTpbWzM4OTIzXV19LAo2NDAwMDp7NjQwMDA6W1syMDk5OV1dLDY0MDAxOltbMjQyMzBdXSw2NDAwMjpbWzI1Mjk5XV0sNjQwMDM6W1szMTk1OF1dLDY0MDA0OltbMjM0MjldXSw2NDAwNTpbWzI3OTM0XV0sNjQwMDY6W1syNjI5Ml1dLDY0MDA3OltbMzY2NjddXSw2NDAwODpbWzM0ODkyXV0sNjQwMDk6W1szODQ3N11dLDY0MDEwOltbMzUyMTFdXSw2NDAxMTpbWzI0Mjc1XV0sNjQwMTI6W1syMDgwMF1dLDY0MDEzOltbMjE5NTJdXSw2NDAxNjpbWzIyNjE4XV0sNjQwMTg6W1syNjIyOF1dLDY0MDIxOltbMjA5NThdXSw2NDAyMjpbWzI5NDgyXV0sNjQwMjM6W1szMDQxMF1dLDY0MDI0OltbMzEwMzZdXSw2NDAyNTpbWzMxMDcwXV0sNjQwMjY6W1szMTA3N11dLDY0MDI3OltbMzExMTldXSw2NDAyODpbWzM4NzQyXV0sNjQwMjk6W1szMTkzNF1dLDY0MDMwOltbMzI3MDFdXSw2NDAzMjpbWzM0MzIyXV0sNjQwMzQ6W1szNTU3Nl1dLDY0MDM3OltbMzY5MjBdXSw2NDAzODpbWzM3MTE3XV0sNjQwNDI6W1szOTE1MV1dLDY0MDQzOltbMzkxNjRdXSw2NDA0NDpbWzM5MjA4XV0sNjQwNDU6W1s0MDM3Ml1dLDY0MDQ2OltbMzcwODZdXSw2NDA0NzpbWzM4NTgzXV0sNjQwNDg6W1syMDM5OF1dLDY0MDQ5OltbMjA3MTFdXSw2NDA1MDpbWzIwODEzXV0sNjQwNTE6W1syMTE5M11dLDY0MDUyOltbMjEyMjBdXSw2NDA1MzpbWzIxMzI5XV0sNjQwNTQ6W1syMTkxN11dLDY0MDU1OltbMjIwMjJdXSw2NDA1NjpbWzIyMTIwXV0sNjQwNTc6W1syMjU5Ml1dLDY0MDU4OltbMjI2OTZdXSw2NDA1OTpbWzIzNjUyXV0sNjQwNjA6W1syMzY2Ml1dLDY0MDYxOltbMjQ3MjRdXSw2NDA2MjpbWzI0OTM2XV0sNjQwNjM6W1syNDk3NF1dLDY0MDY0OltbMjUwNzRdXSw2NDA2NTpbWzI1OTM1XV0sNjQwNjY6W1syNjA4Ml1dLDY0MDY3OltbMjYyNTddXSw2NDA2ODpbWzI2NzU3XV0sNjQwNjk6W1syODAyM11dLDY0MDcwOltbMjgxODZdXSw2NDA3MTpbWzI4NDUwXV0sNjQwNzI6W1syOTAzOF1dLDY0MDczOltbMjkyMjddXSw2NDA3NDpbWzI5NzMwXV0sNjQwNzU6W1szMDg2NV1dLDY0MDc2OltbMzEwMzhdXSw2NDA3NzpbWzMxMDQ5XV0sNjQwNzg6W1szMTA0OF1dLDY0MDc5OltbMzEwNTZdXSw2NDA4MDpbWzMxMDYyXV0sNjQwODE6W1szMTA2OV1dLDY0MDgyOltbMzExMTddXSw2NDA4MzpbWzMxMTE4XV0sNjQwODQ6W1szMTI5Nl1dLDY0MDg1OltbMzEzNjFdXSw2NDA4NjpbWzMxNjgwXV0sNjQwODc6W1szMjI0NF1dLDY0MDg4OltbMzIyNjVdXSw2NDA4OTpbWzMyMzIxXV0sNjQwOTA6W1szMjYyNl1dLDY0MDkxOltbMzI3NzNdXSw2NDA5MjpbWzMzMjYxXV0sNjQwOTM6W1szMzQwMV1dLDY0MDk0OltbMzM0MDFdXSw2NDA5NTpbWzMzODc5XV0sNjQwOTY6W1szNTA4OF1dLDY0MDk3OltbMzUyMjJdXSw2NDA5ODpbWzM1NTg1XV0sNjQwOTk6W1szNTY0MV1dLDY0MTAwOltbMzYwNTFdXSw2NDEwMTpbWzM2MTA0XV0sNjQxMDI6W1szNjc5MF1dLDY0MTAzOltbMzY5MjBdXSw2NDEwNDpbWzM4NjI3XV0sNjQxMDU6W1szODkxMV1dLDY0MTA2OltbMzg5NzFdXSw2NDEwNzpbWzI0NjkzXV0sNjQxMDg6W1sxNDgyMDZdXSw2NDEwOTpbWzMzMzA0XV0sNjQxMTI6W1syMDAwNl1dLDY0MTEzOltbMjA5MTddXSw2NDExNDpbWzIwODQwXV0sNjQxMTU6W1syMDM1Ml1dLDY0MTE2OltbMjA4MDVdXSw2NDExNzpbWzIwODY0XV0sNjQxMTg6W1syMTE5MV1dLDY0MTE5OltbMjEyNDJdXSw2NDEyMDpbWzIxOTE3XV0sNjQxMjE6W1syMTg0NV1dLDY0MTIyOltbMjE5MTNdXSw2NDEyMzpbWzIxOTg2XV0sNjQxMjQ6W1syMjYxOF1dLDY0MTI1OltbMjI3MDddXSw2NDEyNjpbWzIyODUyXV0sNjQxMjc6W1syMjg2OF1dLDY0MTI4OltbMjMxMzhdXSw2NDEyOTpbWzIzMzM2XV0sNjQxMzA6W1syNDI3NF1dLDY0MTMxOltbMjQyODFdXSw2NDEzMjpbWzI0NDI1XV0sNjQxMzM6W1syNDQ5M11dLDY0MTM0OltbMjQ3OTJdXSw2NDEzNTpbWzI0OTEwXV0sNjQxMzY6W1syNDg0MF1dLDY0MTM3OltbMjQ5NzRdXSw2NDEzODpbWzI0OTI4XV0sNjQxMzk6W1syNTA3NF1dLDY0MTQwOltbMjUxNDBdXSw2NDE0MTpbWzI1NTQwXV0sNjQxNDI6W1syNTYyOF1dLDY0MTQzOltbMjU2ODJdXSw2NDE0NDpbWzI1OTQyXV0sNjQxNDU6W1syNjIyOF1dLDY0MTQ2OltbMjYzOTFdXSw2NDE0NzpbWzI2Mzk1XV0sNjQxNDg6W1syNjQ1NF1dLDY0MTQ5OltbMjc1MTNdXSw2NDE1MDpbWzI3NTc4XV0sNjQxNTE6W1syNzk2OV1dLDY0MTUyOltbMjgzNzldXSw2NDE1MzpbWzI4MzYzXV0sNjQxNTQ6W1syODQ1MF1dLDY0MTU1OltbMjg3MDJdXSw2NDE1NjpbWzI5MDM4XV0sNjQxNTc6W1szMDYzMV1dLDY0MTU4OltbMjkyMzddXSw2NDE1OTpbWzI5MzU5XV0sNjQxNjA6W1syOTQ4Ml1dLDY0MTYxOltbMjk4MDldXSw2NDE2MjpbWzI5OTU4XV0sNjQxNjM6W1szMDAxMV1dLDY0MTY0OltbMzAyMzddXSw2NDE2NTpbWzMwMjM5XV0sNjQxNjY6W1szMDQxMF1dLDY0MTY3OltbMzA0MjddXSw2NDE2ODpbWzMwNDUyXV0sNjQxNjk6W1szMDUzOF1dLDY0MTcwOltbMzA1MjhdXSw2NDE3MTpbWzMwOTI0XV0sNjQxNzI6W1szMTQwOV1dLDY0MTczOltbMzE2ODBdXSw2NDE3NDpbWzMxODY3XV0sNjQxNzU6W1szMjA5MV1dLDY0MTc2OltbMzIyNDRdXSw2NDE3NzpbWzMyNTc0XV0sNjQxNzg6W1szMjc3M11dLDY0MTc5OltbMzM2MThdXSw2NDE4MDpbWzMzNzc1XV0sNjQxODE6W1szNDY4MV1dLDY0MTgyOltbMzUxMzddXSw2NDE4MzpbWzM1MjA2XV0sNjQxODQ6W1szNTIyMl1dLDY0MTg1OltbMzU1MTldXSw2NDE4NjpbWzM1NTc2XV0sNjQxODc6W1szNTUzMV1dLDY0MTg4OltbMzU1ODVdXSw2NDE4OTpbWzM1NTgyXV0sNjQxOTA6W1szNTU2NV1dLDY0MTkxOltbMzU2NDFdXSw2NDE5MjpbWzM1NzIyXV0sNjQxOTM6W1szNjEwNF1dLDY0MTk0OltbMzY2NjRdXSw2NDE5NTpbWzM2OTc4XV0sNjQxOTY6W1szNzI3M11dLDY0MTk3OltbMzc0OTRdXSw2NDE5ODpbWzM4NTI0XV0sNjQxOTk6W1szODYyN11dLDY0MjAwOltbMzg3NDJdXSw2NDIwMTpbWzM4ODc1XV0sNjQyMDI6W1szODkxMV1dLDY0MjAzOltbMzg5MjNdXSw2NDIwNDpbWzM4OTcxXV0sNjQyMDU6W1szOTY5OF1dLDY0MjA2OltbNDA4NjBdXSw2NDIwNzpbWzE0MTM4Nl1dLDY0MjA4OltbMTQxMzgwXV0sNjQyMDk6W1sxNDQzNDFdXSw2NDIxMDpbWzE1MjYxXV0sNjQyMTE6W1sxNjQwOF1dLDY0MjEyOltbMTY0NDFdXSw2NDIxMzpbWzE1MjEzN11dLDY0MjE0OltbMTU0ODMyXV0sNjQyMTU6W1sxNjM1MzldXSw2NDIxNjpbWzQwNzcxXV0sNjQyMTc6W1s0MDg0Nl1dLDE5NTA3MjpbWzM4OTUzXV0sMTk1MDczOltbMTY5Mzk4XV0sMTk1MDc0OltbMzkxMzhdXSwxOTUwNzU6W1sxOTI1MV1dLDE5NTA3NjpbWzM5MjA5XV0sMTk1MDc3OltbMzkzMzVdXSwxOTUwNzg6W1szOTM2Ml1dLDE5NTA3OTpbWzM5NDIyXV0sMTk1MDgwOltbMTk0MDZdXSwxOTUwODE6W1sxNzA4MDBdXSwxOTUwODI6W1szOTY5OF1dLDE5NTA4MzpbWzQwMDAwXV0sMTk1MDg0OltbNDAxODldXSwxOTUwODU6W1sxOTY2Ml1dLDE5NTA4NjpbWzE5NjkzXV0sMTk1MDg3OltbNDAyOTVdXSwxOTUwODg6W1sxNzIyMzhdXSwxOTUwODk6W1sxOTcwNF1dLDE5NTA5MDpbWzE3MjI5M11dLDE5NTA5MTpbWzE3MjU1OF1dLDE5NTA5MjpbWzE3MjY4OV1dLDE5NTA5MzpbWzQwNjM1XV0sMTk1MDk0OltbMTk3OThdXSwxOTUwOTU6W1s0MDY5N11dLDE5NTA5NjpbWzQwNzAyXV0sMTk1MDk3OltbNDA3MDldXSwxOTUwOTg6W1s0MDcxOV1dLDE5NTA5OTpbWzQwNzI2XV0sMTk1MTAwOltbNDA3NjNdXSwxOTUxMDE6W1sxNzM1NjhdXX0sCjY0MjU2Ons2NDI1NjpbWzEwMiwxMDJdLDI1Nl0sNjQyNTc6W1sxMDIsMTA1XSwyNTZdLDY0MjU4OltbMTAyLDEwOF0sMjU2XSw2NDI1OTpbWzEwMiwxMDIsMTA1XSwyNTZdLDY0MjYwOltbMTAyLDEwMiwxMDhdLDI1Nl0sNjQyNjE6W1szODMsMTE2XSwyNTZdLDY0MjYyOltbMTE1LDExNl0sMjU2XSw2NDI3NTpbWzEzOTYsMTM5OF0sMjU2XSw2NDI3NjpbWzEzOTYsMTM4MV0sMjU2XSw2NDI3NzpbWzEzOTYsMTM4N10sMjU2XSw2NDI3ODpbWzE0MDYsMTM5OF0sMjU2XSw2NDI3OTpbWzEzOTYsMTM4OV0sMjU2XSw2NDI4NTpbWzE0OTcsMTQ2MF0sNTEyXSw2NDI4NjpbLDI2XSw2NDI4NzpbWzE1MjIsMTQ2M10sNTEyXSw2NDI4ODpbWzE1MDZdLDI1Nl0sNjQyODk6W1sxNDg4XSwyNTZdLDY0MjkwOltbMTQ5MV0sMjU2XSw2NDI5MTpbWzE0OTJdLDI1Nl0sNjQyOTI6W1sxNDk5XSwyNTZdLDY0MjkzOltbMTUwMF0sMjU2XSw2NDI5NDpbWzE1MDFdLDI1Nl0sNjQyOTU6W1sxNTEyXSwyNTZdLDY0Mjk2OltbMTUxNF0sMjU2XSw2NDI5NzpbWzQzXSwyNTZdLDY0Mjk4OltbMTUxMywxNDczXSw1MTJdLDY0Mjk5OltbMTUxMywxNDc0XSw1MTJdLDY0MzAwOltbNjQzMjksMTQ3M10sNTEyXSw2NDMwMTpbWzY0MzI5LDE0NzRdLDUxMl0sNjQzMDI6W1sxNDg4LDE0NjNdLDUxMl0sNjQzMDM6W1sxNDg4LDE0NjRdLDUxMl0sNjQzMDQ6W1sxNDg4LDE0NjhdLDUxMl0sNjQzMDU6W1sxNDg5LDE0NjhdLDUxMl0sNjQzMDY6W1sxNDkwLDE0NjhdLDUxMl0sNjQzMDc6W1sxNDkxLDE0NjhdLDUxMl0sNjQzMDg6W1sxNDkyLDE0NjhdLDUxMl0sNjQzMDk6W1sxNDkzLDE0NjhdLDUxMl0sNjQzMTA6W1sxNDk0LDE0NjhdLDUxMl0sNjQzMTI6W1sxNDk2LDE0NjhdLDUxMl0sNjQzMTM6W1sxNDk3LDE0NjhdLDUxMl0sNjQzMTQ6W1sxNDk4LDE0NjhdLDUxMl0sNjQzMTU6W1sxNDk5LDE0NjhdLDUxMl0sNjQzMTY6W1sxNTAwLDE0NjhdLDUxMl0sNjQzMTg6W1sxNTAyLDE0NjhdLDUxMl0sNjQzMjA6W1sxNTA0LDE0NjhdLDUxMl0sNjQzMjE6W1sxNTA1LDE0NjhdLDUxMl0sNjQzMjM6W1sxNTA3LDE0NjhdLDUxMl0sNjQzMjQ6W1sxNTA4LDE0NjhdLDUxMl0sNjQzMjY6W1sxNTEwLDE0NjhdLDUxMl0sNjQzMjc6W1sxNTExLDE0NjhdLDUxMl0sNjQzMjg6W1sxNTEyLDE0NjhdLDUxMl0sNjQzMjk6W1sxNTEzLDE0NjhdLDUxMl0sNjQzMzA6W1sxNTE0LDE0NjhdLDUxMl0sNjQzMzE6W1sxNDkzLDE0NjVdLDUxMl0sNjQzMzI6W1sxNDg5LDE0NzFdLDUxMl0sNjQzMzM6W1sxNDk5LDE0NzFdLDUxMl0sNjQzMzQ6W1sxNTA4LDE0NzFdLDUxMl0sNjQzMzU6W1sxNDg4LDE1MDBdLDI1Nl0sNjQzMzY6W1sxNjQ5XSwyNTZdLDY0MzM3OltbMTY0OV0sMjU2XSw2NDMzODpbWzE2NTldLDI1Nl0sNjQzMzk6W1sxNjU5XSwyNTZdLDY0MzQwOltbMTY1OV0sMjU2XSw2NDM0MTpbWzE2NTldLDI1Nl0sNjQzNDI6W1sxNjYyXSwyNTZdLDY0MzQzOltbMTY2Ml0sMjU2XSw2NDM0NDpbWzE2NjJdLDI1Nl0sNjQzNDU6W1sxNjYyXSwyNTZdLDY0MzQ2OltbMTY2NF0sMjU2XSw2NDM0NzpbWzE2NjRdLDI1Nl0sNjQzNDg6W1sxNjY0XSwyNTZdLDY0MzQ5OltbMTY2NF0sMjU2XSw2NDM1MDpbWzE2NThdLDI1Nl0sNjQzNTE6W1sxNjU4XSwyNTZdLDY0MzUyOltbMTY1OF0sMjU2XSw2NDM1MzpbWzE2NThdLDI1Nl0sNjQzNTQ6W1sxNjYzXSwyNTZdLDY0MzU1OltbMTY2M10sMjU2XSw2NDM1NjpbWzE2NjNdLDI1Nl0sNjQzNTc6W1sxNjYzXSwyNTZdLDY0MzU4OltbMTY1N10sMjU2XSw2NDM1OTpbWzE2NTddLDI1Nl0sNjQzNjA6W1sxNjU3XSwyNTZdLDY0MzYxOltbMTY1N10sMjU2XSw2NDM2MjpbWzE3MDBdLDI1Nl0sNjQzNjM6W1sxNzAwXSwyNTZdLDY0MzY0OltbMTcwMF0sMjU2XSw2NDM2NTpbWzE3MDBdLDI1Nl0sNjQzNjY6W1sxNzAyXSwyNTZdLDY0MzY3OltbMTcwMl0sMjU2XSw2NDM2ODpbWzE3MDJdLDI1Nl0sNjQzNjk6W1sxNzAyXSwyNTZdLDY0MzcwOltbMTY2OF0sMjU2XSw2NDM3MTpbWzE2NjhdLDI1Nl0sNjQzNzI6W1sxNjY4XSwyNTZdLDY0MzczOltbMTY2OF0sMjU2XSw2NDM3NDpbWzE2NjddLDI1Nl0sNjQzNzU6W1sxNjY3XSwyNTZdLDY0Mzc2OltbMTY2N10sMjU2XSw2NDM3NzpbWzE2NjddLDI1Nl0sNjQzNzg6W1sxNjcwXSwyNTZdLDY0Mzc5OltbMTY3MF0sMjU2XSw2NDM4MDpbWzE2NzBdLDI1Nl0sNjQzODE6W1sxNjcwXSwyNTZdLDY0MzgyOltbMTY3MV0sMjU2XSw2NDM4MzpbWzE2NzFdLDI1Nl0sNjQzODQ6W1sxNjcxXSwyNTZdLDY0Mzg1OltbMTY3MV0sMjU2XSw2NDM4NjpbWzE2NzddLDI1Nl0sNjQzODc6W1sxNjc3XSwyNTZdLDY0Mzg4OltbMTY3Nl0sMjU2XSw2NDM4OTpbWzE2NzZdLDI1Nl0sNjQzOTA6W1sxNjc4XSwyNTZdLDY0MzkxOltbMTY3OF0sMjU2XSw2NDM5MjpbWzE2NzJdLDI1Nl0sNjQzOTM6W1sxNjcyXSwyNTZdLDY0Mzk0OltbMTY4OF0sMjU2XSw2NDM5NTpbWzE2ODhdLDI1Nl0sNjQzOTY6W1sxNjgxXSwyNTZdLDY0Mzk3OltbMTY4MV0sMjU2XSw2NDM5ODpbWzE3MDVdLDI1Nl0sNjQzOTk6W1sxNzA1XSwyNTZdLDY0NDAwOltbMTcwNV0sMjU2XSw2NDQwMTpbWzE3MDVdLDI1Nl0sNjQ0MDI6W1sxNzExXSwyNTZdLDY0NDAzOltbMTcxMV0sMjU2XSw2NDQwNDpbWzE3MTFdLDI1Nl0sNjQ0MDU6W1sxNzExXSwyNTZdLDY0NDA2OltbMTcxNV0sMjU2XSw2NDQwNzpbWzE3MTVdLDI1Nl0sNjQ0MDg6W1sxNzE1XSwyNTZdLDY0NDA5OltbMTcxNV0sMjU2XSw2NDQxMDpbWzE3MTNdLDI1Nl0sNjQ0MTE6W1sxNzEzXSwyNTZdLDY0NDEyOltbMTcxM10sMjU2XSw2NDQxMzpbWzE3MTNdLDI1Nl0sNjQ0MTQ6W1sxNzIyXSwyNTZdLDY0NDE1OltbMTcyMl0sMjU2XSw2NDQxNjpbWzE3MjNdLDI1Nl0sNjQ0MTc6W1sxNzIzXSwyNTZdLDY0NDE4OltbMTcyM10sMjU2XSw2NDQxOTpbWzE3MjNdLDI1Nl0sNjQ0MjA6W1sxNzI4XSwyNTZdLDY0NDIxOltbMTcyOF0sMjU2XSw2NDQyMjpbWzE3MjldLDI1Nl0sNjQ0MjM6W1sxNzI5XSwyNTZdLDY0NDI0OltbMTcyOV0sMjU2XSw2NDQyNTpbWzE3MjldLDI1Nl0sNjQ0MjY6W1sxNzI2XSwyNTZdLDY0NDI3OltbMTcyNl0sMjU2XSw2NDQyODpbWzE3MjZdLDI1Nl0sNjQ0Mjk6W1sxNzI2XSwyNTZdLDY0NDMwOltbMTc0Nl0sMjU2XSw2NDQzMTpbWzE3NDZdLDI1Nl0sNjQ0MzI6W1sxNzQ3XSwyNTZdLDY0NDMzOltbMTc0N10sMjU2XSw2NDQ2NzpbWzE3MDldLDI1Nl0sNjQ0Njg6W1sxNzA5XSwyNTZdLDY0NDY5OltbMTcwOV0sMjU2XSw2NDQ3MDpbWzE3MDldLDI1Nl0sNjQ0NzE6W1sxNzM1XSwyNTZdLDY0NDcyOltbMTczNV0sMjU2XSw2NDQ3MzpbWzE3MzRdLDI1Nl0sNjQ0NzQ6W1sxNzM0XSwyNTZdLDY0NDc1OltbMTczNl0sMjU2XSw2NDQ3NjpbWzE3MzZdLDI1Nl0sNjQ0Nzc6W1sxNjU1XSwyNTZdLDY0NDc4OltbMTczOV0sMjU2XSw2NDQ3OTpbWzE3MzldLDI1Nl0sNjQ0ODA6W1sxNzMzXSwyNTZdLDY0NDgxOltbMTczM10sMjU2XSw2NDQ4MjpbWzE3MzddLDI1Nl0sNjQ0ODM6W1sxNzM3XSwyNTZdLDY0NDg0OltbMTc0NF0sMjU2XSw2NDQ4NTpbWzE3NDRdLDI1Nl0sNjQ0ODY6W1sxNzQ0XSwyNTZdLDY0NDg3OltbMTc0NF0sMjU2XSw2NDQ4ODpbWzE2MDldLDI1Nl0sNjQ0ODk6W1sxNjA5XSwyNTZdLDY0NDkwOltbMTU3NCwxNTc1XSwyNTZdLDY0NDkxOltbMTU3NCwxNTc1XSwyNTZdLDY0NDkyOltbMTU3NCwxNzQ5XSwyNTZdLDY0NDkzOltbMTU3NCwxNzQ5XSwyNTZdLDY0NDk0OltbMTU3NCwxNjA4XSwyNTZdLDY0NDk1OltbMTU3NCwxNjA4XSwyNTZdLDY0NDk2OltbMTU3NCwxNzM1XSwyNTZdLDY0NDk3OltbMTU3NCwxNzM1XSwyNTZdLDY0NDk4OltbMTU3NCwxNzM0XSwyNTZdLDY0NDk5OltbMTU3NCwxNzM0XSwyNTZdLDY0NTAwOltbMTU3NCwxNzM2XSwyNTZdLDY0NTAxOltbMTU3NCwxNzM2XSwyNTZdLDY0NTAyOltbMTU3NCwxNzQ0XSwyNTZdLDY0NTAzOltbMTU3NCwxNzQ0XSwyNTZdLDY0NTA0OltbMTU3NCwxNzQ0XSwyNTZdLDY0NTA1OltbMTU3NCwxNjA5XSwyNTZdLDY0NTA2OltbMTU3NCwxNjA5XSwyNTZdLDY0NTA3OltbMTU3NCwxNjA5XSwyNTZdLDY0NTA4OltbMTc0MF0sMjU2XSw2NDUwOTpbWzE3NDBdLDI1Nl0sNjQ1MTA6W1sxNzQwXSwyNTZdLDY0NTExOltbMTc0MF0sMjU2XX0sCjY0NTEyOns2NDUxMjpbWzE1NzQsMTU4MF0sMjU2XSw2NDUxMzpbWzE1NzQsMTU4MV0sMjU2XSw2NDUxNDpbWzE1NzQsMTYwNV0sMjU2XSw2NDUxNTpbWzE1NzQsMTYwOV0sMjU2XSw2NDUxNjpbWzE1NzQsMTYxMF0sMjU2XSw2NDUxNzpbWzE1NzYsMTU4MF0sMjU2XSw2NDUxODpbWzE1NzYsMTU4MV0sMjU2XSw2NDUxOTpbWzE1NzYsMTU4Ml0sMjU2XSw2NDUyMDpbWzE1NzYsMTYwNV0sMjU2XSw2NDUyMTpbWzE1NzYsMTYwOV0sMjU2XSw2NDUyMjpbWzE1NzYsMTYxMF0sMjU2XSw2NDUyMzpbWzE1NzgsMTU4MF0sMjU2XSw2NDUyNDpbWzE1NzgsMTU4MV0sMjU2XSw2NDUyNTpbWzE1NzgsMTU4Ml0sMjU2XSw2NDUyNjpbWzE1NzgsMTYwNV0sMjU2XSw2NDUyNzpbWzE1NzgsMTYwOV0sMjU2XSw2NDUyODpbWzE1NzgsMTYxMF0sMjU2XSw2NDUyOTpbWzE1NzksMTU4MF0sMjU2XSw2NDUzMDpbWzE1NzksMTYwNV0sMjU2XSw2NDUzMTpbWzE1NzksMTYwOV0sMjU2XSw2NDUzMjpbWzE1NzksMTYxMF0sMjU2XSw2NDUzMzpbWzE1ODAsMTU4MV0sMjU2XSw2NDUzNDpbWzE1ODAsMTYwNV0sMjU2XSw2NDUzNTpbWzE1ODEsMTU4MF0sMjU2XSw2NDUzNjpbWzE1ODEsMTYwNV0sMjU2XSw2NDUzNzpbWzE1ODIsMTU4MF0sMjU2XSw2NDUzODpbWzE1ODIsMTU4MV0sMjU2XSw2NDUzOTpbWzE1ODIsMTYwNV0sMjU2XSw2NDU0MDpbWzE1ODcsMTU4MF0sMjU2XSw2NDU0MTpbWzE1ODcsMTU4MV0sMjU2XSw2NDU0MjpbWzE1ODcsMTU4Ml0sMjU2XSw2NDU0MzpbWzE1ODcsMTYwNV0sMjU2XSw2NDU0NDpbWzE1ODksMTU4MV0sMjU2XSw2NDU0NTpbWzE1ODksMTYwNV0sMjU2XSw2NDU0NjpbWzE1OTAsMTU4MF0sMjU2XSw2NDU0NzpbWzE1OTAsMTU4MV0sMjU2XSw2NDU0ODpbWzE1OTAsMTU4Ml0sMjU2XSw2NDU0OTpbWzE1OTAsMTYwNV0sMjU2XSw2NDU1MDpbWzE1OTEsMTU4MV0sMjU2XSw2NDU1MTpbWzE1OTEsMTYwNV0sMjU2XSw2NDU1MjpbWzE1OTIsMTYwNV0sMjU2XSw2NDU1MzpbWzE1OTMsMTU4MF0sMjU2XSw2NDU1NDpbWzE1OTMsMTYwNV0sMjU2XSw2NDU1NTpbWzE1OTQsMTU4MF0sMjU2XSw2NDU1NjpbWzE1OTQsMTYwNV0sMjU2XSw2NDU1NzpbWzE2MDEsMTU4MF0sMjU2XSw2NDU1ODpbWzE2MDEsMTU4MV0sMjU2XSw2NDU1OTpbWzE2MDEsMTU4Ml0sMjU2XSw2NDU2MDpbWzE2MDEsMTYwNV0sMjU2XSw2NDU2MTpbWzE2MDEsMTYwOV0sMjU2XSw2NDU2MjpbWzE2MDEsMTYxMF0sMjU2XSw2NDU2MzpbWzE2MDIsMTU4MV0sMjU2XSw2NDU2NDpbWzE2MDIsMTYwNV0sMjU2XSw2NDU2NTpbWzE2MDIsMTYwOV0sMjU2XSw2NDU2NjpbWzE2MDIsMTYxMF0sMjU2XSw2NDU2NzpbWzE2MDMsMTU3NV0sMjU2XSw2NDU2ODpbWzE2MDMsMTU4MF0sMjU2XSw2NDU2OTpbWzE2MDMsMTU4MV0sMjU2XSw2NDU3MDpbWzE2MDMsMTU4Ml0sMjU2XSw2NDU3MTpbWzE2MDMsMTYwNF0sMjU2XSw2NDU3MjpbWzE2MDMsMTYwNV0sMjU2XSw2NDU3MzpbWzE2MDMsMTYwOV0sMjU2XSw2NDU3NDpbWzE2MDMsMTYxMF0sMjU2XSw2NDU3NTpbWzE2MDQsMTU4MF0sMjU2XSw2NDU3NjpbWzE2MDQsMTU4MV0sMjU2XSw2NDU3NzpbWzE2MDQsMTU4Ml0sMjU2XSw2NDU3ODpbWzE2MDQsMTYwNV0sMjU2XSw2NDU3OTpbWzE2MDQsMTYwOV0sMjU2XSw2NDU4MDpbWzE2MDQsMTYxMF0sMjU2XSw2NDU4MTpbWzE2MDUsMTU4MF0sMjU2XSw2NDU4MjpbWzE2MDUsMTU4MV0sMjU2XSw2NDU4MzpbWzE2MDUsMTU4Ml0sMjU2XSw2NDU4NDpbWzE2MDUsMTYwNV0sMjU2XSw2NDU4NTpbWzE2MDUsMTYwOV0sMjU2XSw2NDU4NjpbWzE2MDUsMTYxMF0sMjU2XSw2NDU4NzpbWzE2MDYsMTU4MF0sMjU2XSw2NDU4ODpbWzE2MDYsMTU4MV0sMjU2XSw2NDU4OTpbWzE2MDYsMTU4Ml0sMjU2XSw2NDU5MDpbWzE2MDYsMTYwNV0sMjU2XSw2NDU5MTpbWzE2MDYsMTYwOV0sMjU2XSw2NDU5MjpbWzE2MDYsMTYxMF0sMjU2XSw2NDU5MzpbWzE2MDcsMTU4MF0sMjU2XSw2NDU5NDpbWzE2MDcsMTYwNV0sMjU2XSw2NDU5NTpbWzE2MDcsMTYwOV0sMjU2XSw2NDU5NjpbWzE2MDcsMTYxMF0sMjU2XSw2NDU5NzpbWzE2MTAsMTU4MF0sMjU2XSw2NDU5ODpbWzE2MTAsMTU4MV0sMjU2XSw2NDU5OTpbWzE2MTAsMTU4Ml0sMjU2XSw2NDYwMDpbWzE2MTAsMTYwNV0sMjU2XSw2NDYwMTpbWzE2MTAsMTYwOV0sMjU2XSw2NDYwMjpbWzE2MTAsMTYxMF0sMjU2XSw2NDYwMzpbWzE1ODQsMTY0OF0sMjU2XSw2NDYwNDpbWzE1ODUsMTY0OF0sMjU2XSw2NDYwNTpbWzE2MDksMTY0OF0sMjU2XSw2NDYwNjpbWzMyLDE2MTIsMTYxN10sMjU2XSw2NDYwNzpbWzMyLDE2MTMsMTYxN10sMjU2XSw2NDYwODpbWzMyLDE2MTQsMTYxN10sMjU2XSw2NDYwOTpbWzMyLDE2MTUsMTYxN10sMjU2XSw2NDYxMDpbWzMyLDE2MTYsMTYxN10sMjU2XSw2NDYxMTpbWzMyLDE2MTcsMTY0OF0sMjU2XSw2NDYxMjpbWzE1NzQsMTU4NV0sMjU2XSw2NDYxMzpbWzE1NzQsMTU4Nl0sMjU2XSw2NDYxNDpbWzE1NzQsMTYwNV0sMjU2XSw2NDYxNTpbWzE1NzQsMTYwNl0sMjU2XSw2NDYxNjpbWzE1NzQsMTYwOV0sMjU2XSw2NDYxNzpbWzE1NzQsMTYxMF0sMjU2XSw2NDYxODpbWzE1NzYsMTU4NV0sMjU2XSw2NDYxOTpbWzE1NzYsMTU4Nl0sMjU2XSw2NDYyMDpbWzE1NzYsMTYwNV0sMjU2XSw2NDYyMTpbWzE1NzYsMTYwNl0sMjU2XSw2NDYyMjpbWzE1NzYsMTYwOV0sMjU2XSw2NDYyMzpbWzE1NzYsMTYxMF0sMjU2XSw2NDYyNDpbWzE1NzgsMTU4NV0sMjU2XSw2NDYyNTpbWzE1NzgsMTU4Nl0sMjU2XSw2NDYyNjpbWzE1NzgsMTYwNV0sMjU2XSw2NDYyNzpbWzE1NzgsMTYwNl0sMjU2XSw2NDYyODpbWzE1NzgsMTYwOV0sMjU2XSw2NDYyOTpbWzE1NzgsMTYxMF0sMjU2XSw2NDYzMDpbWzE1NzksMTU4NV0sMjU2XSw2NDYzMTpbWzE1NzksMTU4Nl0sMjU2XSw2NDYzMjpbWzE1NzksMTYwNV0sMjU2XSw2NDYzMzpbWzE1NzksMTYwNl0sMjU2XSw2NDYzNDpbWzE1NzksMTYwOV0sMjU2XSw2NDYzNTpbWzE1NzksMTYxMF0sMjU2XSw2NDYzNjpbWzE2MDEsMTYwOV0sMjU2XSw2NDYzNzpbWzE2MDEsMTYxMF0sMjU2XSw2NDYzODpbWzE2MDIsMTYwOV0sMjU2XSw2NDYzOTpbWzE2MDIsMTYxMF0sMjU2XSw2NDY0MDpbWzE2MDMsMTU3NV0sMjU2XSw2NDY0MTpbWzE2MDMsMTYwNF0sMjU2XSw2NDY0MjpbWzE2MDMsMTYwNV0sMjU2XSw2NDY0MzpbWzE2MDMsMTYwOV0sMjU2XSw2NDY0NDpbWzE2MDMsMTYxMF0sMjU2XSw2NDY0NTpbWzE2MDQsMTYwNV0sMjU2XSw2NDY0NjpbWzE2MDQsMTYwOV0sMjU2XSw2NDY0NzpbWzE2MDQsMTYxMF0sMjU2XSw2NDY0ODpbWzE2MDUsMTU3NV0sMjU2XSw2NDY0OTpbWzE2MDUsMTYwNV0sMjU2XSw2NDY1MDpbWzE2MDYsMTU4NV0sMjU2XSw2NDY1MTpbWzE2MDYsMTU4Nl0sMjU2XSw2NDY1MjpbWzE2MDYsMTYwNV0sMjU2XSw2NDY1MzpbWzE2MDYsMTYwNl0sMjU2XSw2NDY1NDpbWzE2MDYsMTYwOV0sMjU2XSw2NDY1NTpbWzE2MDYsMTYxMF0sMjU2XSw2NDY1NjpbWzE2MDksMTY0OF0sMjU2XSw2NDY1NzpbWzE2MTAsMTU4NV0sMjU2XSw2NDY1ODpbWzE2MTAsMTU4Nl0sMjU2XSw2NDY1OTpbWzE2MTAsMTYwNV0sMjU2XSw2NDY2MDpbWzE2MTAsMTYwNl0sMjU2XSw2NDY2MTpbWzE2MTAsMTYwOV0sMjU2XSw2NDY2MjpbWzE2MTAsMTYxMF0sMjU2XSw2NDY2MzpbWzE1NzQsMTU4MF0sMjU2XSw2NDY2NDpbWzE1NzQsMTU4MV0sMjU2XSw2NDY2NTpbWzE1NzQsMTU4Ml0sMjU2XSw2NDY2NjpbWzE1NzQsMTYwNV0sMjU2XSw2NDY2NzpbWzE1NzQsMTYwN10sMjU2XSw2NDY2ODpbWzE1NzYsMTU4MF0sMjU2XSw2NDY2OTpbWzE1NzYsMTU4MV0sMjU2XSw2NDY3MDpbWzE1NzYsMTU4Ml0sMjU2XSw2NDY3MTpbWzE1NzYsMTYwNV0sMjU2XSw2NDY3MjpbWzE1NzYsMTYwN10sMjU2XSw2NDY3MzpbWzE1NzgsMTU4MF0sMjU2XSw2NDY3NDpbWzE1NzgsMTU4MV0sMjU2XSw2NDY3NTpbWzE1NzgsMTU4Ml0sMjU2XSw2NDY3NjpbWzE1NzgsMTYwNV0sMjU2XSw2NDY3NzpbWzE1NzgsMTYwN10sMjU2XSw2NDY3ODpbWzE1NzksMTYwNV0sMjU2XSw2NDY3OTpbWzE1ODAsMTU4MV0sMjU2XSw2NDY4MDpbWzE1ODAsMTYwNV0sMjU2XSw2NDY4MTpbWzE1ODEsMTU4MF0sMjU2XSw2NDY4MjpbWzE1ODEsMTYwNV0sMjU2XSw2NDY4MzpbWzE1ODIsMTU4MF0sMjU2XSw2NDY4NDpbWzE1ODIsMTYwNV0sMjU2XSw2NDY4NTpbWzE1ODcsMTU4MF0sMjU2XSw2NDY4NjpbWzE1ODcsMTU4MV0sMjU2XSw2NDY4NzpbWzE1ODcsMTU4Ml0sMjU2XSw2NDY4ODpbWzE1ODcsMTYwNV0sMjU2XSw2NDY4OTpbWzE1ODksMTU4MV0sMjU2XSw2NDY5MDpbWzE1ODksMTU4Ml0sMjU2XSw2NDY5MTpbWzE1ODksMTYwNV0sMjU2XSw2NDY5MjpbWzE1OTAsMTU4MF0sMjU2XSw2NDY5MzpbWzE1OTAsMTU4MV0sMjU2XSw2NDY5NDpbWzE1OTAsMTU4Ml0sMjU2XSw2NDY5NTpbWzE1OTAsMTYwNV0sMjU2XSw2NDY5NjpbWzE1OTEsMTU4MV0sMjU2XSw2NDY5NzpbWzE1OTIsMTYwNV0sMjU2XSw2NDY5ODpbWzE1OTMsMTU4MF0sMjU2XSw2NDY5OTpbWzE1OTMsMTYwNV0sMjU2XSw2NDcwMDpbWzE1OTQsMTU4MF0sMjU2XSw2NDcwMTpbWzE1OTQsMTYwNV0sMjU2XSw2NDcwMjpbWzE2MDEsMTU4MF0sMjU2XSw2NDcwMzpbWzE2MDEsMTU4MV0sMjU2XSw2NDcwNDpbWzE2MDEsMTU4Ml0sMjU2XSw2NDcwNTpbWzE2MDEsMTYwNV0sMjU2XSw2NDcwNjpbWzE2MDIsMTU4MV0sMjU2XSw2NDcwNzpbWzE2MDIsMTYwNV0sMjU2XSw2NDcwODpbWzE2MDMsMTU4MF0sMjU2XSw2NDcwOTpbWzE2MDMsMTU4MV0sMjU2XSw2NDcxMDpbWzE2MDMsMTU4Ml0sMjU2XSw2NDcxMTpbWzE2MDMsMTYwNF0sMjU2XSw2NDcxMjpbWzE2MDMsMTYwNV0sMjU2XSw2NDcxMzpbWzE2MDQsMTU4MF0sMjU2XSw2NDcxNDpbWzE2MDQsMTU4MV0sMjU2XSw2NDcxNTpbWzE2MDQsMTU4Ml0sMjU2XSw2NDcxNjpbWzE2MDQsMTYwNV0sMjU2XSw2NDcxNzpbWzE2MDQsMTYwN10sMjU2XSw2NDcxODpbWzE2MDUsMTU4MF0sMjU2XSw2NDcxOTpbWzE2MDUsMTU4MV0sMjU2XSw2NDcyMDpbWzE2MDUsMTU4Ml0sMjU2XSw2NDcyMTpbWzE2MDUsMTYwNV0sMjU2XSw2NDcyMjpbWzE2MDYsMTU4MF0sMjU2XSw2NDcyMzpbWzE2MDYsMTU4MV0sMjU2XSw2NDcyNDpbWzE2MDYsMTU4Ml0sMjU2XSw2NDcyNTpbWzE2MDYsMTYwNV0sMjU2XSw2NDcyNjpbWzE2MDYsMTYwN10sMjU2XSw2NDcyNzpbWzE2MDcsMTU4MF0sMjU2XSw2NDcyODpbWzE2MDcsMTYwNV0sMjU2XSw2NDcyOTpbWzE2MDcsMTY0OF0sMjU2XSw2NDczMDpbWzE2MTAsMTU4MF0sMjU2XSw2NDczMTpbWzE2MTAsMTU4MV0sMjU2XSw2NDczMjpbWzE2MTAsMTU4Ml0sMjU2XSw2NDczMzpbWzE2MTAsMTYwNV0sMjU2XSw2NDczNDpbWzE2MTAsMTYwN10sMjU2XSw2NDczNTpbWzE1NzQsMTYwNV0sMjU2XSw2NDczNjpbWzE1NzQsMTYwN10sMjU2XSw2NDczNzpbWzE1NzYsMTYwNV0sMjU2XSw2NDczODpbWzE1NzYsMTYwN10sMjU2XSw2NDczOTpbWzE1NzgsMTYwNV0sMjU2XSw2NDc0MDpbWzE1NzgsMTYwN10sMjU2XSw2NDc0MTpbWzE1NzksMTYwNV0sMjU2XSw2NDc0MjpbWzE1NzksMTYwN10sMjU2XSw2NDc0MzpbWzE1ODcsMTYwNV0sMjU2XSw2NDc0NDpbWzE1ODcsMTYwN10sMjU2XSw2NDc0NTpbWzE1ODgsMTYwNV0sMjU2XSw2NDc0NjpbWzE1ODgsMTYwN10sMjU2XSw2NDc0NzpbWzE2MDMsMTYwNF0sMjU2XSw2NDc0ODpbWzE2MDMsMTYwNV0sMjU2XSw2NDc0OTpbWzE2MDQsMTYwNV0sMjU2XSw2NDc1MDpbWzE2MDYsMTYwNV0sMjU2XSw2NDc1MTpbWzE2MDYsMTYwN10sMjU2XSw2NDc1MjpbWzE2MTAsMTYwNV0sMjU2XSw2NDc1MzpbWzE2MTAsMTYwN10sMjU2XSw2NDc1NDpbWzE2MDAsMTYxNCwxNjE3XSwyNTZdLDY0NzU1OltbMTYwMCwxNjE1LDE2MTddLDI1Nl0sNjQ3NTY6W1sxNjAwLDE2MTYsMTYxN10sMjU2XSw2NDc1NzpbWzE1OTEsMTYwOV0sMjU2XSw2NDc1ODpbWzE1OTEsMTYxMF0sMjU2XSw2NDc1OTpbWzE1OTMsMTYwOV0sMjU2XSw2NDc2MDpbWzE1OTMsMTYxMF0sMjU2XSw2NDc2MTpbWzE1OTQsMTYwOV0sMjU2XSw2NDc2MjpbWzE1OTQsMTYxMF0sMjU2XSw2NDc2MzpbWzE1ODcsMTYwOV0sMjU2XSw2NDc2NDpbWzE1ODcsMTYxMF0sMjU2XSw2NDc2NTpbWzE1ODgsMTYwOV0sMjU2XSw2NDc2NjpbWzE1ODgsMTYxMF0sMjU2XSw2NDc2NzpbWzE1ODEsMTYwOV0sMjU2XX0sCjY0NzY4Ons2NDc2ODpbWzE1ODEsMTYxMF0sMjU2XSw2NDc2OTpbWzE1ODAsMTYwOV0sMjU2XSw2NDc3MDpbWzE1ODAsMTYxMF0sMjU2XSw2NDc3MTpbWzE1ODIsMTYwOV0sMjU2XSw2NDc3MjpbWzE1ODIsMTYxMF0sMjU2XSw2NDc3MzpbWzE1ODksMTYwOV0sMjU2XSw2NDc3NDpbWzE1ODksMTYxMF0sMjU2XSw2NDc3NTpbWzE1OTAsMTYwOV0sMjU2XSw2NDc3NjpbWzE1OTAsMTYxMF0sMjU2XSw2NDc3NzpbWzE1ODgsMTU4MF0sMjU2XSw2NDc3ODpbWzE1ODgsMTU4MV0sMjU2XSw2NDc3OTpbWzE1ODgsMTU4Ml0sMjU2XSw2NDc4MDpbWzE1ODgsMTYwNV0sMjU2XSw2NDc4MTpbWzE1ODgsMTU4NV0sMjU2XSw2NDc4MjpbWzE1ODcsMTU4NV0sMjU2XSw2NDc4MzpbWzE1ODksMTU4NV0sMjU2XSw2NDc4NDpbWzE1OTAsMTU4NV0sMjU2XSw2NDc4NTpbWzE1OTEsMTYwOV0sMjU2XSw2NDc4NjpbWzE1OTEsMTYxMF0sMjU2XSw2NDc4NzpbWzE1OTMsMTYwOV0sMjU2XSw2NDc4ODpbWzE1OTMsMTYxMF0sMjU2XSw2NDc4OTpbWzE1OTQsMTYwOV0sMjU2XSw2NDc5MDpbWzE1OTQsMTYxMF0sMjU2XSw2NDc5MTpbWzE1ODcsMTYwOV0sMjU2XSw2NDc5MjpbWzE1ODcsMTYxMF0sMjU2XSw2NDc5MzpbWzE1ODgsMTYwOV0sMjU2XSw2NDc5NDpbWzE1ODgsMTYxMF0sMjU2XSw2NDc5NTpbWzE1ODEsMTYwOV0sMjU2XSw2NDc5NjpbWzE1ODEsMTYxMF0sMjU2XSw2NDc5NzpbWzE1ODAsMTYwOV0sMjU2XSw2NDc5ODpbWzE1ODAsMTYxMF0sMjU2XSw2NDc5OTpbWzE1ODIsMTYwOV0sMjU2XSw2NDgwMDpbWzE1ODIsMTYxMF0sMjU2XSw2NDgwMTpbWzE1ODksMTYwOV0sMjU2XSw2NDgwMjpbWzE1ODksMTYxMF0sMjU2XSw2NDgwMzpbWzE1OTAsMTYwOV0sMjU2XSw2NDgwNDpbWzE1OTAsMTYxMF0sMjU2XSw2NDgwNTpbWzE1ODgsMTU4MF0sMjU2XSw2NDgwNjpbWzE1ODgsMTU4MV0sMjU2XSw2NDgwNzpbWzE1ODgsMTU4Ml0sMjU2XSw2NDgwODpbWzE1ODgsMTYwNV0sMjU2XSw2NDgwOTpbWzE1ODgsMTU4NV0sMjU2XSw2NDgxMDpbWzE1ODcsMTU4NV0sMjU2XSw2NDgxMTpbWzE1ODksMTU4NV0sMjU2XSw2NDgxMjpbWzE1OTAsMTU4NV0sMjU2XSw2NDgxMzpbWzE1ODgsMTU4MF0sMjU2XSw2NDgxNDpbWzE1ODgsMTU4MV0sMjU2XSw2NDgxNTpbWzE1ODgsMTU4Ml0sMjU2XSw2NDgxNjpbWzE1ODgsMTYwNV0sMjU2XSw2NDgxNzpbWzE1ODcsMTYwN10sMjU2XSw2NDgxODpbWzE1ODgsMTYwN10sMjU2XSw2NDgxOTpbWzE1OTEsMTYwNV0sMjU2XSw2NDgyMDpbWzE1ODcsMTU4MF0sMjU2XSw2NDgyMTpbWzE1ODcsMTU4MV0sMjU2XSw2NDgyMjpbWzE1ODcsMTU4Ml0sMjU2XSw2NDgyMzpbWzE1ODgsMTU4MF0sMjU2XSw2NDgyNDpbWzE1ODgsMTU4MV0sMjU2XSw2NDgyNTpbWzE1ODgsMTU4Ml0sMjU2XSw2NDgyNjpbWzE1OTEsMTYwNV0sMjU2XSw2NDgyNzpbWzE1OTIsMTYwNV0sMjU2XSw2NDgyODpbWzE1NzUsMTYxMV0sMjU2XSw2NDgyOTpbWzE1NzUsMTYxMV0sMjU2XSw2NDg0ODpbWzE1NzgsMTU4MCwxNjA1XSwyNTZdLDY0ODQ5OltbMTU3OCwxNTgxLDE1ODBdLDI1Nl0sNjQ4NTA6W1sxNTc4LDE1ODEsMTU4MF0sMjU2XSw2NDg1MTpbWzE1NzgsMTU4MSwxNjA1XSwyNTZdLDY0ODUyOltbMTU3OCwxNTgyLDE2MDVdLDI1Nl0sNjQ4NTM6W1sxNTc4LDE2MDUsMTU4MF0sMjU2XSw2NDg1NDpbWzE1NzgsMTYwNSwxNTgxXSwyNTZdLDY0ODU1OltbMTU3OCwxNjA1LDE1ODJdLDI1Nl0sNjQ4NTY6W1sxNTgwLDE2MDUsMTU4MV0sMjU2XSw2NDg1NzpbWzE1ODAsMTYwNSwxNTgxXSwyNTZdLDY0ODU4OltbMTU4MSwxNjA1LDE2MTBdLDI1Nl0sNjQ4NTk6W1sxNTgxLDE2MDUsMTYwOV0sMjU2XSw2NDg2MDpbWzE1ODcsMTU4MSwxNTgwXSwyNTZdLDY0ODYxOltbMTU4NywxNTgwLDE1ODFdLDI1Nl0sNjQ4NjI6W1sxNTg3LDE1ODAsMTYwOV0sMjU2XSw2NDg2MzpbWzE1ODcsMTYwNSwxNTgxXSwyNTZdLDY0ODY0OltbMTU4NywxNjA1LDE1ODFdLDI1Nl0sNjQ4NjU6W1sxNTg3LDE2MDUsMTU4MF0sMjU2XSw2NDg2NjpbWzE1ODcsMTYwNSwxNjA1XSwyNTZdLDY0ODY3OltbMTU4NywxNjA1LDE2MDVdLDI1Nl0sNjQ4Njg6W1sxNTg5LDE1ODEsMTU4MV0sMjU2XSw2NDg2OTpbWzE1ODksMTU4MSwxNTgxXSwyNTZdLDY0ODcwOltbMTU4OSwxNjA1LDE2MDVdLDI1Nl0sNjQ4NzE6W1sxNTg4LDE1ODEsMTYwNV0sMjU2XSw2NDg3MjpbWzE1ODgsMTU4MSwxNjA1XSwyNTZdLDY0ODczOltbMTU4OCwxNTgwLDE2MTBdLDI1Nl0sNjQ4NzQ6W1sxNTg4LDE2MDUsMTU4Ml0sMjU2XSw2NDg3NTpbWzE1ODgsMTYwNSwxNTgyXSwyNTZdLDY0ODc2OltbMTU4OCwxNjA1LDE2MDVdLDI1Nl0sNjQ4Nzc6W1sxNTg4LDE2MDUsMTYwNV0sMjU2XSw2NDg3ODpbWzE1OTAsMTU4MSwxNjA5XSwyNTZdLDY0ODc5OltbMTU5MCwxNTgyLDE2MDVdLDI1Nl0sNjQ4ODA6W1sxNTkwLDE1ODIsMTYwNV0sMjU2XSw2NDg4MTpbWzE1OTEsMTYwNSwxNTgxXSwyNTZdLDY0ODgyOltbMTU5MSwxNjA1LDE1ODFdLDI1Nl0sNjQ4ODM6W1sxNTkxLDE2MDUsMTYwNV0sMjU2XSw2NDg4NDpbWzE1OTEsMTYwNSwxNjEwXSwyNTZdLDY0ODg1OltbMTU5MywxNTgwLDE2MDVdLDI1Nl0sNjQ4ODY6W1sxNTkzLDE2MDUsMTYwNV0sMjU2XSw2NDg4NzpbWzE1OTMsMTYwNSwxNjA1XSwyNTZdLDY0ODg4OltbMTU5MywxNjA1LDE2MDldLDI1Nl0sNjQ4ODk6W1sxNTk0LDE2MDUsMTYwNV0sMjU2XSw2NDg5MDpbWzE1OTQsMTYwNSwxNjEwXSwyNTZdLDY0ODkxOltbMTU5NCwxNjA1LDE2MDldLDI1Nl0sNjQ4OTI6W1sxNjAxLDE1ODIsMTYwNV0sMjU2XSw2NDg5MzpbWzE2MDEsMTU4MiwxNjA1XSwyNTZdLDY0ODk0OltbMTYwMiwxNjA1LDE1ODFdLDI1Nl0sNjQ4OTU6W1sxNjAyLDE2MDUsMTYwNV0sMjU2XSw2NDg5NjpbWzE2MDQsMTU4MSwxNjA1XSwyNTZdLDY0ODk3OltbMTYwNCwxNTgxLDE2MTBdLDI1Nl0sNjQ4OTg6W1sxNjA0LDE1ODEsMTYwOV0sMjU2XSw2NDg5OTpbWzE2MDQsMTU4MCwxNTgwXSwyNTZdLDY0OTAwOltbMTYwNCwxNTgwLDE1ODBdLDI1Nl0sNjQ5MDE6W1sxNjA0LDE1ODIsMTYwNV0sMjU2XSw2NDkwMjpbWzE2MDQsMTU4MiwxNjA1XSwyNTZdLDY0OTAzOltbMTYwNCwxNjA1LDE1ODFdLDI1Nl0sNjQ5MDQ6W1sxNjA0LDE2MDUsMTU4MV0sMjU2XSw2NDkwNTpbWzE2MDUsMTU4MSwxNTgwXSwyNTZdLDY0OTA2OltbMTYwNSwxNTgxLDE2MDVdLDI1Nl0sNjQ5MDc6W1sxNjA1LDE1ODEsMTYxMF0sMjU2XSw2NDkwODpbWzE2MDUsMTU4MCwxNTgxXSwyNTZdLDY0OTA5OltbMTYwNSwxNTgwLDE2MDVdLDI1Nl0sNjQ5MTA6W1sxNjA1LDE1ODIsMTU4MF0sMjU2XSw2NDkxMTpbWzE2MDUsMTU4MiwxNjA1XSwyNTZdLDY0OTE0OltbMTYwNSwxNTgwLDE1ODJdLDI1Nl0sNjQ5MTU6W1sxNjA3LDE2MDUsMTU4MF0sMjU2XSw2NDkxNjpbWzE2MDcsMTYwNSwxNjA1XSwyNTZdLDY0OTE3OltbMTYwNiwxNTgxLDE2MDVdLDI1Nl0sNjQ5MTg6W1sxNjA2LDE1ODEsMTYwOV0sMjU2XSw2NDkxOTpbWzE2MDYsMTU4MCwxNjA1XSwyNTZdLDY0OTIwOltbMTYwNiwxNTgwLDE2MDVdLDI1Nl0sNjQ5MjE6W1sxNjA2LDE1ODAsMTYwOV0sMjU2XSw2NDkyMjpbWzE2MDYsMTYwNSwxNjEwXSwyNTZdLDY0OTIzOltbMTYwNiwxNjA1LDE2MDldLDI1Nl0sNjQ5MjQ6W1sxNjEwLDE2MDUsMTYwNV0sMjU2XSw2NDkyNTpbWzE2MTAsMTYwNSwxNjA1XSwyNTZdLDY0OTI2OltbMTU3NiwxNTgyLDE2MTBdLDI1Nl0sNjQ5Mjc6W1sxNTc4LDE1ODAsMTYxMF0sMjU2XSw2NDkyODpbWzE1NzgsMTU4MCwxNjA5XSwyNTZdLDY0OTI5OltbMTU3OCwxNTgyLDE2MTBdLDI1Nl0sNjQ5MzA6W1sxNTc4LDE1ODIsMTYwOV0sMjU2XSw2NDkzMTpbWzE1NzgsMTYwNSwxNjEwXSwyNTZdLDY0OTMyOltbMTU3OCwxNjA1LDE2MDldLDI1Nl0sNjQ5MzM6W1sxNTgwLDE2MDUsMTYxMF0sMjU2XSw2NDkzNDpbWzE1ODAsMTU4MSwxNjA5XSwyNTZdLDY0OTM1OltbMTU4MCwxNjA1LDE2MDldLDI1Nl0sNjQ5MzY6W1sxNTg3LDE1ODIsMTYwOV0sMjU2XSw2NDkzNzpbWzE1ODksMTU4MSwxNjEwXSwyNTZdLDY0OTM4OltbMTU4OCwxNTgxLDE2MTBdLDI1Nl0sNjQ5Mzk6W1sxNTkwLDE1ODEsMTYxMF0sMjU2XSw2NDk0MDpbWzE2MDQsMTU4MCwxNjEwXSwyNTZdLDY0OTQxOltbMTYwNCwxNjA1LDE2MTBdLDI1Nl0sNjQ5NDI6W1sxNjEwLDE1ODEsMTYxMF0sMjU2XSw2NDk0MzpbWzE2MTAsMTU4MCwxNjEwXSwyNTZdLDY0OTQ0OltbMTYxMCwxNjA1LDE2MTBdLDI1Nl0sNjQ5NDU6W1sxNjA1LDE2MDUsMTYxMF0sMjU2XSw2NDk0NjpbWzE2MDIsMTYwNSwxNjEwXSwyNTZdLDY0OTQ3OltbMTYwNiwxNTgxLDE2MTBdLDI1Nl0sNjQ5NDg6W1sxNjAyLDE2MDUsMTU4MV0sMjU2XSw2NDk0OTpbWzE2MDQsMTU4MSwxNjA1XSwyNTZdLDY0OTUwOltbMTU5MywxNjA1LDE2MTBdLDI1Nl0sNjQ5NTE6W1sxNjAzLDE2MDUsMTYxMF0sMjU2XSw2NDk1MjpbWzE2MDYsMTU4MCwxNTgxXSwyNTZdLDY0OTUzOltbMTYwNSwxNTgyLDE2MTBdLDI1Nl0sNjQ5NTQ6W1sxNjA0LDE1ODAsMTYwNV0sMjU2XSw2NDk1NTpbWzE2MDMsMTYwNSwxNjA1XSwyNTZdLDY0OTU2OltbMTYwNCwxNTgwLDE2MDVdLDI1Nl0sNjQ5NTc6W1sxNjA2LDE1ODAsMTU4MV0sMjU2XSw2NDk1ODpbWzE1ODAsMTU4MSwxNjEwXSwyNTZdLDY0OTU5OltbMTU4MSwxNTgwLDE2MTBdLDI1Nl0sNjQ5NjA6W1sxNjA1LDE1ODAsMTYxMF0sMjU2XSw2NDk2MTpbWzE2MDEsMTYwNSwxNjEwXSwyNTZdLDY0OTYyOltbMTU3NiwxNTgxLDE2MTBdLDI1Nl0sNjQ5NjM6W1sxNjAzLDE2MDUsMTYwNV0sMjU2XSw2NDk2NDpbWzE1OTMsMTU4MCwxNjA1XSwyNTZdLDY0OTY1OltbMTU4OSwxNjA1LDE2MDVdLDI1Nl0sNjQ5NjY6W1sxNTg3LDE1ODIsMTYxMF0sMjU2XSw2NDk2NzpbWzE2MDYsMTU4MCwxNjEwXSwyNTZdLDY1MDA4OltbMTU4OSwxNjA0LDE3NDZdLDI1Nl0sNjUwMDk6W1sxNjAyLDE2MDQsMTc0Nl0sMjU2XSw2NTAxMDpbWzE1NzUsMTYwNCwxNjA0LDE2MDddLDI1Nl0sNjUwMTE6W1sxNTc1LDE2MDMsMTU3NiwxNTg1XSwyNTZdLDY1MDEyOltbMTYwNSwxNTgxLDE2MDUsMTU4M10sMjU2XSw2NTAxMzpbWzE1ODksMTYwNCwxNTkzLDE2MDVdLDI1Nl0sNjUwMTQ6W1sxNTg1LDE1ODcsMTYwOCwxNjA0XSwyNTZdLDY1MDE1OltbMTU5MywxNjA0LDE2MTAsMTYwN10sMjU2XSw2NTAxNjpbWzE2MDgsMTU4NywxNjA0LDE2MDVdLDI1Nl0sNjUwMTc6W1sxNTg5LDE2MDQsMTYwOV0sMjU2XSw2NTAxODpbWzE1ODksMTYwNCwxNjA5LDMyLDE1NzUsMTYwNCwxNjA0LDE2MDcsMzIsMTU5MywxNjA0LDE2MTAsMTYwNywzMiwxNjA4LDE1ODcsMTYwNCwxNjA1XSwyNTZdLDY1MDE5OltbMTU4MCwxNjA0LDMyLDE1ODAsMTYwNCwxNTc1LDE2MDQsMTYwN10sMjU2XSw2NTAyMDpbWzE1ODUsMTc0MCwxNTc1LDE2MDRdLDI1Nl19LAo2NTAyNDp7NjUwNDA6W1s0NF0sMjU2XSw2NTA0MTpbWzEyMjg5XSwyNTZdLDY1MDQyOltbMTIyOTBdLDI1Nl0sNjUwNDM6W1s1OF0sMjU2XSw2NTA0NDpbWzU5XSwyNTZdLDY1MDQ1OltbMzNdLDI1Nl0sNjUwNDY6W1s2M10sMjU2XSw2NTA0NzpbWzEyMzEwXSwyNTZdLDY1MDQ4OltbMTIzMTFdLDI1Nl0sNjUwNDk6W1s4MjMwXSwyNTZdLDY1MDU2OlssMjMwXSw2NTA1NzpbLDIzMF0sNjUwNTg6WywyMzBdLDY1MDU5OlssMjMwXSw2NTA2MDpbLDIzMF0sNjUwNjE6WywyMzBdLDY1MDYyOlssMjMwXSw2NTA2MzpbLDIyMF0sNjUwNjQ6WywyMjBdLDY1MDY1OlssMjIwXSw2NTA2NjpbLDIyMF0sNjUwNjc6WywyMjBdLDY1MDY4OlssMjIwXSw2NTA2OTpbLDIyMF0sNjUwNzI6W1s4MjI5XSwyNTZdLDY1MDczOltbODIxMl0sMjU2XSw2NTA3NDpbWzgyMTFdLDI1Nl0sNjUwNzU6W1s5NV0sMjU2XSw2NTA3NjpbWzk1XSwyNTZdLDY1MDc3OltbNDBdLDI1Nl0sNjUwNzg6W1s0MV0sMjU2XSw2NTA3OTpbWzEyM10sMjU2XSw2NTA4MDpbWzEyNV0sMjU2XSw2NTA4MTpbWzEyMzA4XSwyNTZdLDY1MDgyOltbMTIzMDldLDI1Nl0sNjUwODM6W1sxMjMwNF0sMjU2XSw2NTA4NDpbWzEyMzA1XSwyNTZdLDY1MDg1OltbMTIyOThdLDI1Nl0sNjUwODY6W1sxMjI5OV0sMjU2XSw2NTA4NzpbWzEyMjk2XSwyNTZdLDY1MDg4OltbMTIyOTddLDI1Nl0sNjUwODk6W1sxMjMwMF0sMjU2XSw2NTA5MDpbWzEyMzAxXSwyNTZdLDY1MDkxOltbMTIzMDJdLDI1Nl0sNjUwOTI6W1sxMjMwM10sMjU2XSw2NTA5NTpbWzkxXSwyNTZdLDY1MDk2OltbOTNdLDI1Nl0sNjUwOTc6W1s4MjU0XSwyNTZdLDY1MDk4OltbODI1NF0sMjU2XSw2NTA5OTpbWzgyNTRdLDI1Nl0sNjUxMDA6W1s4MjU0XSwyNTZdLDY1MTAxOltbOTVdLDI1Nl0sNjUxMDI6W1s5NV0sMjU2XSw2NTEwMzpbWzk1XSwyNTZdLDY1MTA0OltbNDRdLDI1Nl0sNjUxMDU6W1sxMjI4OV0sMjU2XSw2NTEwNjpbWzQ2XSwyNTZdLDY1MTA4OltbNTldLDI1Nl0sNjUxMDk6W1s1OF0sMjU2XSw2NTExMDpbWzYzXSwyNTZdLDY1MTExOltbMzNdLDI1Nl0sNjUxMTI6W1s4MjEyXSwyNTZdLDY1MTEzOltbNDBdLDI1Nl0sNjUxMTQ6W1s0MV0sMjU2XSw2NTExNTpbWzEyM10sMjU2XSw2NTExNjpbWzEyNV0sMjU2XSw2NTExNzpbWzEyMzA4XSwyNTZdLDY1MTE4OltbMTIzMDldLDI1Nl0sNjUxMTk6W1szNV0sMjU2XSw2NTEyMDpbWzM4XSwyNTZdLDY1MTIxOltbNDJdLDI1Nl0sNjUxMjI6W1s0M10sMjU2XSw2NTEyMzpbWzQ1XSwyNTZdLDY1MTI0OltbNjBdLDI1Nl0sNjUxMjU6W1s2Ml0sMjU2XSw2NTEyNjpbWzYxXSwyNTZdLDY1MTI4OltbOTJdLDI1Nl0sNjUxMjk6W1szNl0sMjU2XSw2NTEzMDpbWzM3XSwyNTZdLDY1MTMxOltbNjRdLDI1Nl0sNjUxMzY6W1szMiwxNjExXSwyNTZdLDY1MTM3OltbMTYwMCwxNjExXSwyNTZdLDY1MTM4OltbMzIsMTYxMl0sMjU2XSw2NTE0MDpbWzMyLDE2MTNdLDI1Nl0sNjUxNDI6W1szMiwxNjE0XSwyNTZdLDY1MTQzOltbMTYwMCwxNjE0XSwyNTZdLDY1MTQ0OltbMzIsMTYxNV0sMjU2XSw2NTE0NTpbWzE2MDAsMTYxNV0sMjU2XSw2NTE0NjpbWzMyLDE2MTZdLDI1Nl0sNjUxNDc6W1sxNjAwLDE2MTZdLDI1Nl0sNjUxNDg6W1szMiwxNjE3XSwyNTZdLDY1MTQ5OltbMTYwMCwxNjE3XSwyNTZdLDY1MTUwOltbMzIsMTYxOF0sMjU2XSw2NTE1MTpbWzE2MDAsMTYxOF0sMjU2XSw2NTE1MjpbWzE1NjldLDI1Nl0sNjUxNTM6W1sxNTcwXSwyNTZdLDY1MTU0OltbMTU3MF0sMjU2XSw2NTE1NTpbWzE1NzFdLDI1Nl0sNjUxNTY6W1sxNTcxXSwyNTZdLDY1MTU3OltbMTU3Ml0sMjU2XSw2NTE1ODpbWzE1NzJdLDI1Nl0sNjUxNTk6W1sxNTczXSwyNTZdLDY1MTYwOltbMTU3M10sMjU2XSw2NTE2MTpbWzE1NzRdLDI1Nl0sNjUxNjI6W1sxNTc0XSwyNTZdLDY1MTYzOltbMTU3NF0sMjU2XSw2NTE2NDpbWzE1NzRdLDI1Nl0sNjUxNjU6W1sxNTc1XSwyNTZdLDY1MTY2OltbMTU3NV0sMjU2XSw2NTE2NzpbWzE1NzZdLDI1Nl0sNjUxNjg6W1sxNTc2XSwyNTZdLDY1MTY5OltbMTU3Nl0sMjU2XSw2NTE3MDpbWzE1NzZdLDI1Nl0sNjUxNzE6W1sxNTc3XSwyNTZdLDY1MTcyOltbMTU3N10sMjU2XSw2NTE3MzpbWzE1NzhdLDI1Nl0sNjUxNzQ6W1sxNTc4XSwyNTZdLDY1MTc1OltbMTU3OF0sMjU2XSw2NTE3NjpbWzE1NzhdLDI1Nl0sNjUxNzc6W1sxNTc5XSwyNTZdLDY1MTc4OltbMTU3OV0sMjU2XSw2NTE3OTpbWzE1NzldLDI1Nl0sNjUxODA6W1sxNTc5XSwyNTZdLDY1MTgxOltbMTU4MF0sMjU2XSw2NTE4MjpbWzE1ODBdLDI1Nl0sNjUxODM6W1sxNTgwXSwyNTZdLDY1MTg0OltbMTU4MF0sMjU2XSw2NTE4NTpbWzE1ODFdLDI1Nl0sNjUxODY6W1sxNTgxXSwyNTZdLDY1MTg3OltbMTU4MV0sMjU2XSw2NTE4ODpbWzE1ODFdLDI1Nl0sNjUxODk6W1sxNTgyXSwyNTZdLDY1MTkwOltbMTU4Ml0sMjU2XSw2NTE5MTpbWzE1ODJdLDI1Nl0sNjUxOTI6W1sxNTgyXSwyNTZdLDY1MTkzOltbMTU4M10sMjU2XSw2NTE5NDpbWzE1ODNdLDI1Nl0sNjUxOTU6W1sxNTg0XSwyNTZdLDY1MTk2OltbMTU4NF0sMjU2XSw2NTE5NzpbWzE1ODVdLDI1Nl0sNjUxOTg6W1sxNTg1XSwyNTZdLDY1MTk5OltbMTU4Nl0sMjU2XSw2NTIwMDpbWzE1ODZdLDI1Nl0sNjUyMDE6W1sxNTg3XSwyNTZdLDY1MjAyOltbMTU4N10sMjU2XSw2NTIwMzpbWzE1ODddLDI1Nl0sNjUyMDQ6W1sxNTg3XSwyNTZdLDY1MjA1OltbMTU4OF0sMjU2XSw2NTIwNjpbWzE1ODhdLDI1Nl0sNjUyMDc6W1sxNTg4XSwyNTZdLDY1MjA4OltbMTU4OF0sMjU2XSw2NTIwOTpbWzE1ODldLDI1Nl0sNjUyMTA6W1sxNTg5XSwyNTZdLDY1MjExOltbMTU4OV0sMjU2XSw2NTIxMjpbWzE1ODldLDI1Nl0sNjUyMTM6W1sxNTkwXSwyNTZdLDY1MjE0OltbMTU5MF0sMjU2XSw2NTIxNTpbWzE1OTBdLDI1Nl0sNjUyMTY6W1sxNTkwXSwyNTZdLDY1MjE3OltbMTU5MV0sMjU2XSw2NTIxODpbWzE1OTFdLDI1Nl0sNjUyMTk6W1sxNTkxXSwyNTZdLDY1MjIwOltbMTU5MV0sMjU2XSw2NTIyMTpbWzE1OTJdLDI1Nl0sNjUyMjI6W1sxNTkyXSwyNTZdLDY1MjIzOltbMTU5Ml0sMjU2XSw2NTIyNDpbWzE1OTJdLDI1Nl0sNjUyMjU6W1sxNTkzXSwyNTZdLDY1MjI2OltbMTU5M10sMjU2XSw2NTIyNzpbWzE1OTNdLDI1Nl0sNjUyMjg6W1sxNTkzXSwyNTZdLDY1MjI5OltbMTU5NF0sMjU2XSw2NTIzMDpbWzE1OTRdLDI1Nl0sNjUyMzE6W1sxNTk0XSwyNTZdLDY1MjMyOltbMTU5NF0sMjU2XSw2NTIzMzpbWzE2MDFdLDI1Nl0sNjUyMzQ6W1sxNjAxXSwyNTZdLDY1MjM1OltbMTYwMV0sMjU2XSw2NTIzNjpbWzE2MDFdLDI1Nl0sNjUyMzc6W1sxNjAyXSwyNTZdLDY1MjM4OltbMTYwMl0sMjU2XSw2NTIzOTpbWzE2MDJdLDI1Nl0sNjUyNDA6W1sxNjAyXSwyNTZdLDY1MjQxOltbMTYwM10sMjU2XSw2NTI0MjpbWzE2MDNdLDI1Nl0sNjUyNDM6W1sxNjAzXSwyNTZdLDY1MjQ0OltbMTYwM10sMjU2XSw2NTI0NTpbWzE2MDRdLDI1Nl0sNjUyNDY6W1sxNjA0XSwyNTZdLDY1MjQ3OltbMTYwNF0sMjU2XSw2NTI0ODpbWzE2MDRdLDI1Nl0sNjUyNDk6W1sxNjA1XSwyNTZdLDY1MjUwOltbMTYwNV0sMjU2XSw2NTI1MTpbWzE2MDVdLDI1Nl0sNjUyNTI6W1sxNjA1XSwyNTZdLDY1MjUzOltbMTYwNl0sMjU2XSw2NTI1NDpbWzE2MDZdLDI1Nl0sNjUyNTU6W1sxNjA2XSwyNTZdLDY1MjU2OltbMTYwNl0sMjU2XSw2NTI1NzpbWzE2MDddLDI1Nl0sNjUyNTg6W1sxNjA3XSwyNTZdLDY1MjU5OltbMTYwN10sMjU2XSw2NTI2MDpbWzE2MDddLDI1Nl0sNjUyNjE6W1sxNjA4XSwyNTZdLDY1MjYyOltbMTYwOF0sMjU2XSw2NTI2MzpbWzE2MDldLDI1Nl0sNjUyNjQ6W1sxNjA5XSwyNTZdLDY1MjY1OltbMTYxMF0sMjU2XSw2NTI2NjpbWzE2MTBdLDI1Nl0sNjUyNjc6W1sxNjEwXSwyNTZdLDY1MjY4OltbMTYxMF0sMjU2XSw2NTI2OTpbWzE2MDQsMTU3MF0sMjU2XSw2NTI3MDpbWzE2MDQsMTU3MF0sMjU2XSw2NTI3MTpbWzE2MDQsMTU3MV0sMjU2XSw2NTI3MjpbWzE2MDQsMTU3MV0sMjU2XSw2NTI3MzpbWzE2MDQsMTU3M10sMjU2XSw2NTI3NDpbWzE2MDQsMTU3M10sMjU2XSw2NTI3NTpbWzE2MDQsMTU3NV0sMjU2XSw2NTI3NjpbWzE2MDQsMTU3NV0sMjU2XX0sCjY1MjgwOns2NTI4MTpbWzMzXSwyNTZdLDY1MjgyOltbMzRdLDI1Nl0sNjUyODM6W1szNV0sMjU2XSw2NTI4NDpbWzM2XSwyNTZdLDY1Mjg1OltbMzddLDI1Nl0sNjUyODY6W1szOF0sMjU2XSw2NTI4NzpbWzM5XSwyNTZdLDY1Mjg4OltbNDBdLDI1Nl0sNjUyODk6W1s0MV0sMjU2XSw2NTI5MDpbWzQyXSwyNTZdLDY1MjkxOltbNDNdLDI1Nl0sNjUyOTI6W1s0NF0sMjU2XSw2NTI5MzpbWzQ1XSwyNTZdLDY1Mjk0OltbNDZdLDI1Nl0sNjUyOTU6W1s0N10sMjU2XSw2NTI5NjpbWzQ4XSwyNTZdLDY1Mjk3OltbNDldLDI1Nl0sNjUyOTg6W1s1MF0sMjU2XSw2NTI5OTpbWzUxXSwyNTZdLDY1MzAwOltbNTJdLDI1Nl0sNjUzMDE6W1s1M10sMjU2XSw2NTMwMjpbWzU0XSwyNTZdLDY1MzAzOltbNTVdLDI1Nl0sNjUzMDQ6W1s1Nl0sMjU2XSw2NTMwNTpbWzU3XSwyNTZdLDY1MzA2OltbNThdLDI1Nl0sNjUzMDc6W1s1OV0sMjU2XSw2NTMwODpbWzYwXSwyNTZdLDY1MzA5OltbNjFdLDI1Nl0sNjUzMTA6W1s2Ml0sMjU2XSw2NTMxMTpbWzYzXSwyNTZdLDY1MzEyOltbNjRdLDI1Nl0sNjUzMTM6W1s2NV0sMjU2XSw2NTMxNDpbWzY2XSwyNTZdLDY1MzE1OltbNjddLDI1Nl0sNjUzMTY6W1s2OF0sMjU2XSw2NTMxNzpbWzY5XSwyNTZdLDY1MzE4OltbNzBdLDI1Nl0sNjUzMTk6W1s3MV0sMjU2XSw2NTMyMDpbWzcyXSwyNTZdLDY1MzIxOltbNzNdLDI1Nl0sNjUzMjI6W1s3NF0sMjU2XSw2NTMyMzpbWzc1XSwyNTZdLDY1MzI0OltbNzZdLDI1Nl0sNjUzMjU6W1s3N10sMjU2XSw2NTMyNjpbWzc4XSwyNTZdLDY1MzI3OltbNzldLDI1Nl0sNjUzMjg6W1s4MF0sMjU2XSw2NTMyOTpbWzgxXSwyNTZdLDY1MzMwOltbODJdLDI1Nl0sNjUzMzE6W1s4M10sMjU2XSw2NTMzMjpbWzg0XSwyNTZdLDY1MzMzOltbODVdLDI1Nl0sNjUzMzQ6W1s4Nl0sMjU2XSw2NTMzNTpbWzg3XSwyNTZdLDY1MzM2OltbODhdLDI1Nl0sNjUzMzc6W1s4OV0sMjU2XSw2NTMzODpbWzkwXSwyNTZdLDY1MzM5OltbOTFdLDI1Nl0sNjUzNDA6W1s5Ml0sMjU2XSw2NTM0MTpbWzkzXSwyNTZdLDY1MzQyOltbOTRdLDI1Nl0sNjUzNDM6W1s5NV0sMjU2XSw2NTM0NDpbWzk2XSwyNTZdLDY1MzQ1OltbOTddLDI1Nl0sNjUzNDY6W1s5OF0sMjU2XSw2NTM0NzpbWzk5XSwyNTZdLDY1MzQ4OltbMTAwXSwyNTZdLDY1MzQ5OltbMTAxXSwyNTZdLDY1MzUwOltbMTAyXSwyNTZdLDY1MzUxOltbMTAzXSwyNTZdLDY1MzUyOltbMTA0XSwyNTZdLDY1MzUzOltbMTA1XSwyNTZdLDY1MzU0OltbMTA2XSwyNTZdLDY1MzU1OltbMTA3XSwyNTZdLDY1MzU2OltbMTA4XSwyNTZdLDY1MzU3OltbMTA5XSwyNTZdLDY1MzU4OltbMTEwXSwyNTZdLDY1MzU5OltbMTExXSwyNTZdLDY1MzYwOltbMTEyXSwyNTZdLDY1MzYxOltbMTEzXSwyNTZdLDY1MzYyOltbMTE0XSwyNTZdLDY1MzYzOltbMTE1XSwyNTZdLDY1MzY0OltbMTE2XSwyNTZdLDY1MzY1OltbMTE3XSwyNTZdLDY1MzY2OltbMTE4XSwyNTZdLDY1MzY3OltbMTE5XSwyNTZdLDY1MzY4OltbMTIwXSwyNTZdLDY1MzY5OltbMTIxXSwyNTZdLDY1MzcwOltbMTIyXSwyNTZdLDY1MzcxOltbMTIzXSwyNTZdLDY1MzcyOltbMTI0XSwyNTZdLDY1MzczOltbMTI1XSwyNTZdLDY1Mzc0OltbMTI2XSwyNTZdLDY1Mzc1OltbMTA2MjldLDI1Nl0sNjUzNzY6W1sxMDYzMF0sMjU2XSw2NTM3NzpbWzEyMjkwXSwyNTZdLDY1Mzc4OltbMTIzMDBdLDI1Nl0sNjUzNzk6W1sxMjMwMV0sMjU2XSw2NTM4MDpbWzEyMjg5XSwyNTZdLDY1MzgxOltbMTI1MzldLDI1Nl0sNjUzODI6W1sxMjUzMF0sMjU2XSw2NTM4MzpbWzEyNDQ5XSwyNTZdLDY1Mzg0OltbMTI0NTFdLDI1Nl0sNjUzODU6W1sxMjQ1M10sMjU2XSw2NTM4NjpbWzEyNDU1XSwyNTZdLDY1Mzg3OltbMTI0NTddLDI1Nl0sNjUzODg6W1sxMjUxNV0sMjU2XSw2NTM4OTpbWzEyNTE3XSwyNTZdLDY1MzkwOltbMTI1MTldLDI1Nl0sNjUzOTE6W1sxMjQ4M10sMjU2XSw2NTM5MjpbWzEyNTQwXSwyNTZdLDY1MzkzOltbMTI0NTBdLDI1Nl0sNjUzOTQ6W1sxMjQ1Ml0sMjU2XSw2NTM5NTpbWzEyNDU0XSwyNTZdLDY1Mzk2OltbMTI0NTZdLDI1Nl0sNjUzOTc6W1sxMjQ1OF0sMjU2XSw2NTM5ODpbWzEyNDU5XSwyNTZdLDY1Mzk5OltbMTI0NjFdLDI1Nl0sNjU0MDA6W1sxMjQ2M10sMjU2XSw2NTQwMTpbWzEyNDY1XSwyNTZdLDY1NDAyOltbMTI0NjddLDI1Nl0sNjU0MDM6W1sxMjQ2OV0sMjU2XSw2NTQwNDpbWzEyNDcxXSwyNTZdLDY1NDA1OltbMTI0NzNdLDI1Nl0sNjU0MDY6W1sxMjQ3NV0sMjU2XSw2NTQwNzpbWzEyNDc3XSwyNTZdLDY1NDA4OltbMTI0NzldLDI1Nl0sNjU0MDk6W1sxMjQ4MV0sMjU2XSw2NTQxMDpbWzEyNDg0XSwyNTZdLDY1NDExOltbMTI0ODZdLDI1Nl0sNjU0MTI6W1sxMjQ4OF0sMjU2XSw2NTQxMzpbWzEyNDkwXSwyNTZdLDY1NDE0OltbMTI0OTFdLDI1Nl0sNjU0MTU6W1sxMjQ5Ml0sMjU2XSw2NTQxNjpbWzEyNDkzXSwyNTZdLDY1NDE3OltbMTI0OTRdLDI1Nl0sNjU0MTg6W1sxMjQ5NV0sMjU2XSw2NTQxOTpbWzEyNDk4XSwyNTZdLDY1NDIwOltbMTI1MDFdLDI1Nl0sNjU0MjE6W1sxMjUwNF0sMjU2XSw2NTQyMjpbWzEyNTA3XSwyNTZdLDY1NDIzOltbMTI1MTBdLDI1Nl0sNjU0MjQ6W1sxMjUxMV0sMjU2XSw2NTQyNTpbWzEyNTEyXSwyNTZdLDY1NDI2OltbMTI1MTNdLDI1Nl0sNjU0Mjc6W1sxMjUxNF0sMjU2XSw2NTQyODpbWzEyNTE2XSwyNTZdLDY1NDI5OltbMTI1MThdLDI1Nl0sNjU0MzA6W1sxMjUyMF0sMjU2XSw2NTQzMTpbWzEyNTIxXSwyNTZdLDY1NDMyOltbMTI1MjJdLDI1Nl0sNjU0MzM6W1sxMjUyM10sMjU2XSw2NTQzNDpbWzEyNTI0XSwyNTZdLDY1NDM1OltbMTI1MjVdLDI1Nl0sNjU0MzY6W1sxMjUyN10sMjU2XSw2NTQzNzpbWzEyNTMxXSwyNTZdLDY1NDM4OltbMTI0NDFdLDI1Nl0sNjU0Mzk6W1sxMjQ0Ml0sMjU2XSw2NTQ0MDpbWzEyNjQ0XSwyNTZdLDY1NDQxOltbMTI1OTNdLDI1Nl0sNjU0NDI6W1sxMjU5NF0sMjU2XSw2NTQ0MzpbWzEyNTk1XSwyNTZdLDY1NDQ0OltbMTI1OTZdLDI1Nl0sNjU0NDU6W1sxMjU5N10sMjU2XSw2NTQ0NjpbWzEyNTk4XSwyNTZdLDY1NDQ3OltbMTI1OTldLDI1Nl0sNjU0NDg6W1sxMjYwMF0sMjU2XSw2NTQ0OTpbWzEyNjAxXSwyNTZdLDY1NDUwOltbMTI2MDJdLDI1Nl0sNjU0NTE6W1sxMjYwM10sMjU2XSw2NTQ1MjpbWzEyNjA0XSwyNTZdLDY1NDUzOltbMTI2MDVdLDI1Nl0sNjU0NTQ6W1sxMjYwNl0sMjU2XSw2NTQ1NTpbWzEyNjA3XSwyNTZdLDY1NDU2OltbMTI2MDhdLDI1Nl0sNjU0NTc6W1sxMjYwOV0sMjU2XSw2NTQ1ODpbWzEyNjEwXSwyNTZdLDY1NDU5OltbMTI2MTFdLDI1Nl0sNjU0NjA6W1sxMjYxMl0sMjU2XSw2NTQ2MTpbWzEyNjEzXSwyNTZdLDY1NDYyOltbMTI2MTRdLDI1Nl0sNjU0NjM6W1sxMjYxNV0sMjU2XSw2NTQ2NDpbWzEyNjE2XSwyNTZdLDY1NDY1OltbMTI2MTddLDI1Nl0sNjU0NjY6W1sxMjYxOF0sMjU2XSw2NTQ2NzpbWzEyNjE5XSwyNTZdLDY1NDY4OltbMTI2MjBdLDI1Nl0sNjU0Njk6W1sxMjYyMV0sMjU2XSw2NTQ3MDpbWzEyNjIyXSwyNTZdLDY1NDc0OltbMTI2MjNdLDI1Nl0sNjU0NzU6W1sxMjYyNF0sMjU2XSw2NTQ3NjpbWzEyNjI1XSwyNTZdLDY1NDc3OltbMTI2MjZdLDI1Nl0sNjU0Nzg6W1sxMjYyN10sMjU2XSw2NTQ3OTpbWzEyNjI4XSwyNTZdLDY1NDgyOltbMTI2MjldLDI1Nl0sNjU0ODM6W1sxMjYzMF0sMjU2XSw2NTQ4NDpbWzEyNjMxXSwyNTZdLDY1NDg1OltbMTI2MzJdLDI1Nl0sNjU0ODY6W1sxMjYzM10sMjU2XSw2NTQ4NzpbWzEyNjM0XSwyNTZdLDY1NDkwOltbMTI2MzVdLDI1Nl0sNjU0OTE6W1sxMjYzNl0sMjU2XSw2NTQ5MjpbWzEyNjM3XSwyNTZdLDY1NDkzOltbMTI2MzhdLDI1Nl0sNjU0OTQ6W1sxMjYzOV0sMjU2XSw2NTQ5NTpbWzEyNjQwXSwyNTZdLDY1NDk4OltbMTI2NDFdLDI1Nl0sNjU0OTk6W1sxMjY0Ml0sMjU2XSw2NTUwMDpbWzEyNjQzXSwyNTZdLDY1NTA0OltbMTYyXSwyNTZdLDY1NTA1OltbMTYzXSwyNTZdLDY1NTA2OltbMTcyXSwyNTZdLDY1NTA3OltbMTc1XSwyNTZdLDY1NTA4OltbMTY2XSwyNTZdLDY1NTA5OltbMTY1XSwyNTZdLDY1NTEwOltbODM2MV0sMjU2XSw2NTUxMjpbWzk0NzRdLDI1Nl0sNjU1MTM6W1s4NTkyXSwyNTZdLDY1NTE0OltbODU5M10sMjU2XSw2NTUxNTpbWzg1OTRdLDI1Nl0sNjU1MTY6W1s4NTk1XSwyNTZdLDY1NTE3OltbOTYzMl0sMjU2XSw2NTUxODpbWzk2NzVdLDI1Nl19Cgp9OwoKICAgLyoqKioqIE1vZHVsZSB0byBleHBvcnQgKi8KICAgdmFyIHVub3JtID0gewogICAgICBuZmM6IG5mYywKICAgICAgbmZkOiBuZmQsCiAgICAgIG5ma2M6IG5ma2MsCiAgICAgIG5ma2Q6IG5ma2QKICAgfTsKCiAgIC8qZ2xvYmFscyBtb2R1bGU6dHJ1ZSxkZWZpbmU6dHJ1ZSovCgogICAvLyBDb21tb25KUwogICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gIm9iamVjdCIpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB1bm9ybTsKCiAgIC8vIEFNRAogICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCkgewogICAgICBkZWZpbmUoInVub3JtIiwgZnVuY3Rpb24gKCkgewogICAgICAgICByZXR1cm4gdW5vcm07CiAgICAgIH0pOwoKICAgLy8gR2xvYmFsCiAgIH0gZWxzZSB7CiAgICAgIHJvb3QudW5vcm0gPSB1bm9ybTsKICAgfQoKICAgLyoqKioqIEV4cG9ydCBhcyBzaGltIGZvciBTdHJpbmc6Om5vcm1hbGl6ZSBtZXRob2QgKioqKiovCiAgIC8qCiAgICAgIGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6c3BlY2lmaWNhdGlvbl9kcmFmdHMjbm92ZW1iZXJfOF8yMDEzX2RyYWZ0X3Jldl8yMQoKICAgICAgMjEuMS4zLjEyIFN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplKGZvcm09Ik5GQyIpCiAgICAgIFdoZW4gdGhlIG5vcm1hbGl6ZSBtZXRob2QgaXMgY2FsbGVkIHdpdGggb25lIGFyZ3VtZW50IGZvcm0sIHRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuOgoKICAgICAgMS4gTGV0IE8gYmUgQ2hlY2tPYmplY3RDb2VyY2libGUodGhpcyB2YWx1ZSkuCiAgICAgIDIuIExldCBTIGJlIFRvU3RyaW5nKE8pLgogICAgICAzLiBSZXR1cm5JZkFicnVwdChTKS4KICAgICAgNC4gSWYgZm9ybSBpcyBub3QgcHJvdmlkZWQgb3IgdW5kZWZpbmVkIGxldCBmb3JtIGJlICJORkMiLgogICAgICA1LiBMZXQgZiBiZSBUb1N0cmluZyhmb3JtKS4KICAgICAgNi4gUmV0dXJuSWZBYnJ1cHQoZikuCiAgICAgIDcuIElmIGYgaXMgbm90IG9uZSBvZiAiTkZDIiwgIk5GRCIsICJORktDIiwgb3IgIk5GS0QiLCB0aGVuIHRocm93IGEgUmFuZ2VFcnJvciBFeGNlcHRpb24uCiAgICAgIDguIExldCBucyBiZSB0aGUgU3RyaW5nIHZhbHVlIGlzIHRoZSByZXN1bHQgb2Ygbm9ybWFsaXppbmcgUyBpbnRvIHRoZSBub3JtYWxpemF0aW9uIGZvcm0gbmFtZWQgYnkgZiBhcyBzcGVjaWZpZWQgaW4gVW5pY29kZSBTdGFuZGFyZCBBbm5leCAjMTUsIFVuaWNvZGVOb3JtYWxpemF0b2luIEZvcm1zLgogICAgICA5LiBSZXR1cm4gbnMuCgogICAgICBUaGUgbGVuZ3RoIHByb3BlcnR5IG9mIHRoZSBub3JtYWxpemUgbWV0aG9kIGlzIDAuCgogICAgICAqTk9URSogVGhlIG5vcm1hbGl6ZSBmdW5jdGlvbiBpcyBpbnRlbnRpb25hbGx5IGdlbmVyaWM7IGl0IGRvZXMgbm90IHJlcXVpcmUgdGhhdCBpdHMgdGhpcyB2YWx1ZSBiZSBhIFN0cmluZyBvYmplY3QuIFRoZXJlZm9yZSBpdCBjYW4gYmUgdHJhbnNmZXJyZWQgdG8gb3RoZXIga2luZHMgb2Ygb2JqZWN0cyBmb3IgdXNlIGFzIGEgbWV0aG9kLgogICAqLwogICAgdW5vcm0uc2hpbUFwcGxpZWQgPSBmYWxzZTsKCiAgIGlmICghU3RyaW5nLnByb3RvdHlwZS5ub3JtYWxpemUpIHsKICAgICAgU3RyaW5nLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbihmb3JtKSB7CiAgICAgICAgIHZhciBzdHIgPSAiIiArIHRoaXM7CiAgICAgICAgIGZvcm0gPSAgZm9ybSA9PT0gdW5kZWZpbmVkID8gIk5GQyIgOiBmb3JtOwoKICAgICAgICAgaWYgKGZvcm0gPT09ICJORkMiKSB7CiAgICAgICAgICAgIHJldHVybiB1bm9ybS5uZmMoc3RyKTsKICAgICAgICAgfSBlbHNlIGlmIChmb3JtID09PSAiTkZEIikgewogICAgICAgICAgICByZXR1cm4gdW5vcm0ubmZkKHN0cik7CiAgICAgICAgIH0gZWxzZSBpZiAoZm9ybSA9PT0gIk5GS0MiKSB7CiAgICAgICAgICAgIHJldHVybiB1bm9ybS5uZmtjKHN0cik7CiAgICAgICAgIH0gZWxzZSBpZiAoZm9ybSA9PT0gIk5GS0QiKSB7CiAgICAgICAgICAgIHJldHVybiB1bm9ybS5uZmtkKHN0cik7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vcm1hbGl6YXRpb24gZm9ybTogIiArIGZvcm0pOwogICAgICAgICB9CiAgICAgIH07CgogICAgICB1bm9ybS5zaGltQXBwbGllZCA9IHRydWU7CiAgIH0KfSh0aGlzKSk7Cgp9LHt9XSw0NDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz1bCiAgImFiYW5kb24iLAogICJhYmlsaXR5IiwKICAiYWJsZSIsCiAgImFib3V0IiwKICAiYWJvdmUiLAogICJhYnNlbnQiLAogICJhYnNvcmIiLAogICJhYnN0cmFjdCIsCiAgImFic3VyZCIsCiAgImFidXNlIiwKICAiYWNjZXNzIiwKICAiYWNjaWRlbnQiLAogICJhY2NvdW50IiwKICAiYWNjdXNlIiwKICAiYWNoaWV2ZSIsCiAgImFjaWQiLAogICJhY291c3RpYyIsCiAgImFjcXVpcmUiLAogICJhY3Jvc3MiLAogICJhY3QiLAogICJhY3Rpb24iLAogICJhY3RvciIsCiAgImFjdHJlc3MiLAogICJhY3R1YWwiLAogICJhZGFwdCIsCiAgImFkZCIsCiAgImFkZGljdCIsCiAgImFkZHJlc3MiLAogICJhZGp1c3QiLAogICJhZG1pdCIsCiAgImFkdWx0IiwKICAiYWR2YW5jZSIsCiAgImFkdmljZSIsCiAgImFlcm9iaWMiLAogICJhZmZhaXIiLAogICJhZmZvcmQiLAogICJhZnJhaWQiLAogICJhZ2FpbiIsCiAgImFnZSIsCiAgImFnZW50IiwKICAiYWdyZWUiLAogICJhaGVhZCIsCiAgImFpbSIsCiAgImFpciIsCiAgImFpcnBvcnQiLAogICJhaXNsZSIsCiAgImFsYXJtIiwKICAiYWxidW0iLAogICJhbGNvaG9sIiwKICAiYWxlcnQiLAogICJhbGllbiIsCiAgImFsbCIsCiAgImFsbGV5IiwKICAiYWxsb3ciLAogICJhbG1vc3QiLAogICJhbG9uZSIsCiAgImFscGhhIiwKICAiYWxyZWFkeSIsCiAgImFsc28iLAogICJhbHRlciIsCiAgImFsd2F5cyIsCiAgImFtYXRldXIiLAogICJhbWF6aW5nIiwKICAiYW1vbmciLAogICJhbW91bnQiLAogICJhbXVzZWQiLAogICJhbmFseXN0IiwKICAiYW5jaG9yIiwKICAiYW5jaWVudCIsCiAgImFuZ2VyIiwKICAiYW5nbGUiLAogICJhbmdyeSIsCiAgImFuaW1hbCIsCiAgImFua2xlIiwKICAiYW5ub3VuY2UiLAogICJhbm51YWwiLAogICJhbm90aGVyIiwKICAiYW5zd2VyIiwKICAiYW50ZW5uYSIsCiAgImFudGlxdWUiLAogICJhbnhpZXR5IiwKICAiYW55IiwKICAiYXBhcnQiLAogICJhcG9sb2d5IiwKICAiYXBwZWFyIiwKICAiYXBwbGUiLAogICJhcHByb3ZlIiwKICAiYXByaWwiLAogICJhcmNoIiwKICAiYXJjdGljIiwKICAiYXJlYSIsCiAgImFyZW5hIiwKICAiYXJndWUiLAogICJhcm0iLAogICJhcm1lZCIsCiAgImFybW9yIiwKICAiYXJteSIsCiAgImFyb3VuZCIsCiAgImFycmFuZ2UiLAogICJhcnJlc3QiLAogICJhcnJpdmUiLAogICJhcnJvdyIsCiAgImFydCIsCiAgImFydGVmYWN0IiwKICAiYXJ0aXN0IiwKICAiYXJ0d29yayIsCiAgImFzayIsCiAgImFzcGVjdCIsCiAgImFzc2F1bHQiLAogICJhc3NldCIsCiAgImFzc2lzdCIsCiAgImFzc3VtZSIsCiAgImFzdGhtYSIsCiAgImF0aGxldGUiLAogICJhdG9tIiwKICAiYXR0YWNrIiwKICAiYXR0ZW5kIiwKICAiYXR0aXR1ZGUiLAogICJhdHRyYWN0IiwKICAiYXVjdGlvbiIsCiAgImF1ZGl0IiwKICAiYXVndXN0IiwKICAiYXVudCIsCiAgImF1dGhvciIsCiAgImF1dG8iLAogICJhdXR1bW4iLAogICJhdmVyYWdlIiwKICAiYXZvY2FkbyIsCiAgImF2b2lkIiwKICAiYXdha2UiLAogICJhd2FyZSIsCiAgImF3YXkiLAogICJhd2Vzb21lIiwKICAiYXdmdWwiLAogICJhd2t3YXJkIiwKICAiYXhpcyIsCiAgImJhYnkiLAogICJiYWNoZWxvciIsCiAgImJhY29uIiwKICAiYmFkZ2UiLAogICJiYWciLAogICJiYWxhbmNlIiwKICAiYmFsY29ueSIsCiAgImJhbGwiLAogICJiYW1ib28iLAogICJiYW5hbmEiLAogICJiYW5uZXIiLAogICJiYXIiLAogICJiYXJlbHkiLAogICJiYXJnYWluIiwKICAiYmFycmVsIiwKICAiYmFzZSIsCiAgImJhc2ljIiwKICAiYmFza2V0IiwKICAiYmF0dGxlIiwKICAiYmVhY2giLAogICJiZWFuIiwKICAiYmVhdXR5IiwKICAiYmVjYXVzZSIsCiAgImJlY29tZSIsCiAgImJlZWYiLAogICJiZWZvcmUiLAogICJiZWdpbiIsCiAgImJlaGF2ZSIsCiAgImJlaGluZCIsCiAgImJlbGlldmUiLAogICJiZWxvdyIsCiAgImJlbHQiLAogICJiZW5jaCIsCiAgImJlbmVmaXQiLAogICJiZXN0IiwKICAiYmV0cmF5IiwKICAiYmV0dGVyIiwKICAiYmV0d2VlbiIsCiAgImJleW9uZCIsCiAgImJpY3ljbGUiLAogICJiaWQiLAogICJiaWtlIiwKICAiYmluZCIsCiAgImJpb2xvZ3kiLAogICJiaXJkIiwKICAiYmlydGgiLAogICJiaXR0ZXIiLAogICJibGFjayIsCiAgImJsYWRlIiwKICAiYmxhbWUiLAogICJibGFua2V0IiwKICAiYmxhc3QiLAogICJibGVhayIsCiAgImJsZXNzIiwKICAiYmxpbmQiLAogICJibG9vZCIsCiAgImJsb3Nzb20iLAogICJibG91c2UiLAogICJibHVlIiwKICAiYmx1ciIsCiAgImJsdXNoIiwKICAiYm9hcmQiLAogICJib2F0IiwKICAiYm9keSIsCiAgImJvaWwiLAogICJib21iIiwKICAiYm9uZSIsCiAgImJvbnVzIiwKICAiYm9vayIsCiAgImJvb3N0IiwKICAiYm9yZGVyIiwKICAiYm9yaW5nIiwKICAiYm9ycm93IiwKICAiYm9zcyIsCiAgImJvdHRvbSIsCiAgImJvdW5jZSIsCiAgImJveCIsCiAgImJveSIsCiAgImJyYWNrZXQiLAogICJicmFpbiIsCiAgImJyYW5kIiwKICAiYnJhc3MiLAogICJicmF2ZSIsCiAgImJyZWFkIiwKICAiYnJlZXplIiwKICAiYnJpY2siLAogICJicmlkZ2UiLAogICJicmllZiIsCiAgImJyaWdodCIsCiAgImJyaW5nIiwKICAiYnJpc2siLAogICJicm9jY29saSIsCiAgImJyb2tlbiIsCiAgImJyb256ZSIsCiAgImJyb29tIiwKICAiYnJvdGhlciIsCiAgImJyb3duIiwKICAiYnJ1c2giLAogICJidWJibGUiLAogICJidWRkeSIsCiAgImJ1ZGdldCIsCiAgImJ1ZmZhbG8iLAogICJidWlsZCIsCiAgImJ1bGIiLAogICJidWxrIiwKICAiYnVsbGV0IiwKICAiYnVuZGxlIiwKICAiYnVua2VyIiwKICAiYnVyZGVuIiwKICAiYnVyZ2VyIiwKICAiYnVyc3QiLAogICJidXMiLAogICJidXNpbmVzcyIsCiAgImJ1c3kiLAogICJidXR0ZXIiLAogICJidXllciIsCiAgImJ1enoiLAogICJjYWJiYWdlIiwKICAiY2FiaW4iLAogICJjYWJsZSIsCiAgImNhY3R1cyIsCiAgImNhZ2UiLAogICJjYWtlIiwKICAiY2FsbCIsCiAgImNhbG0iLAogICJjYW1lcmEiLAogICJjYW1wIiwKICAiY2FuIiwKICAiY2FuYWwiLAogICJjYW5jZWwiLAogICJjYW5keSIsCiAgImNhbm5vbiIsCiAgImNhbm9lIiwKICAiY2FudmFzIiwKICAiY2FueW9uIiwKICAiY2FwYWJsZSIsCiAgImNhcGl0YWwiLAogICJjYXB0YWluIiwKICAiY2FyIiwKICAiY2FyYm9uIiwKICAiY2FyZCIsCiAgImNhcmdvIiwKICAiY2FycGV0IiwKICAiY2FycnkiLAogICJjYXJ0IiwKICAiY2FzZSIsCiAgImNhc2giLAogICJjYXNpbm8iLAogICJjYXN0bGUiLAogICJjYXN1YWwiLAogICJjYXQiLAogICJjYXRhbG9nIiwKICAiY2F0Y2giLAogICJjYXRlZ29yeSIsCiAgImNhdHRsZSIsCiAgImNhdWdodCIsCiAgImNhdXNlIiwKICAiY2F1dGlvbiIsCiAgImNhdmUiLAogICJjZWlsaW5nIiwKICAiY2VsZXJ5IiwKICAiY2VtZW50IiwKICAiY2Vuc3VzIiwKICAiY2VudHVyeSIsCiAgImNlcmVhbCIsCiAgImNlcnRhaW4iLAogICJjaGFpciIsCiAgImNoYWxrIiwKICAiY2hhbXBpb24iLAogICJjaGFuZ2UiLAogICJjaGFvcyIsCiAgImNoYXB0ZXIiLAogICJjaGFyZ2UiLAogICJjaGFzZSIsCiAgImNoYXQiLAogICJjaGVhcCIsCiAgImNoZWNrIiwKICAiY2hlZXNlIiwKICAiY2hlZiIsCiAgImNoZXJyeSIsCiAgImNoZXN0IiwKICAiY2hpY2tlbiIsCiAgImNoaWVmIiwKICAiY2hpbGQiLAogICJjaGltbmV5IiwKICAiY2hvaWNlIiwKICAiY2hvb3NlIiwKICAiY2hyb25pYyIsCiAgImNodWNrbGUiLAogICJjaHVuayIsCiAgImNodXJuIiwKICAiY2lnYXIiLAogICJjaW5uYW1vbiIsCiAgImNpcmNsZSIsCiAgImNpdGl6ZW4iLAogICJjaXR5IiwKICAiY2l2aWwiLAogICJjbGFpbSIsCiAgImNsYXAiLAogICJjbGFyaWZ5IiwKICAiY2xhdyIsCiAgImNsYXkiLAogICJjbGVhbiIsCiAgImNsZXJrIiwKICAiY2xldmVyIiwKICAiY2xpY2siLAogICJjbGllbnQiLAogICJjbGlmZiIsCiAgImNsaW1iIiwKICAiY2xpbmljIiwKICAiY2xpcCIsCiAgImNsb2NrIiwKICAiY2xvZyIsCiAgImNsb3NlIiwKICAiY2xvdGgiLAogICJjbG91ZCIsCiAgImNsb3duIiwKICAiY2x1YiIsCiAgImNsdW1wIiwKICAiY2x1c3RlciIsCiAgImNsdXRjaCIsCiAgImNvYWNoIiwKICAiY29hc3QiLAogICJjb2NvbnV0IiwKICAiY29kZSIsCiAgImNvZmZlZSIsCiAgImNvaWwiLAogICJjb2luIiwKICAiY29sbGVjdCIsCiAgImNvbG9yIiwKICAiY29sdW1uIiwKICAiY29tYmluZSIsCiAgImNvbWUiLAogICJjb21mb3J0IiwKICAiY29taWMiLAogICJjb21tb24iLAogICJjb21wYW55IiwKICAiY29uY2VydCIsCiAgImNvbmR1Y3QiLAogICJjb25maXJtIiwKICAiY29uZ3Jlc3MiLAogICJjb25uZWN0IiwKICAiY29uc2lkZXIiLAogICJjb250cm9sIiwKICAiY29udmluY2UiLAogICJjb29rIiwKICAiY29vbCIsCiAgImNvcHBlciIsCiAgImNvcHkiLAogICJjb3JhbCIsCiAgImNvcmUiLAogICJjb3JuIiwKICAiY29ycmVjdCIsCiAgImNvc3QiLAogICJjb3R0b24iLAogICJjb3VjaCIsCiAgImNvdW50cnkiLAogICJjb3VwbGUiLAogICJjb3Vyc2UiLAogICJjb3VzaW4iLAogICJjb3ZlciIsCiAgImNveW90ZSIsCiAgImNyYWNrIiwKICAiY3JhZGxlIiwKICAiY3JhZnQiLAogICJjcmFtIiwKICAiY3JhbmUiLAogICJjcmFzaCIsCiAgImNyYXRlciIsCiAgImNyYXdsIiwKICAiY3JhenkiLAogICJjcmVhbSIsCiAgImNyZWRpdCIsCiAgImNyZWVrIiwKICAiY3JldyIsCiAgImNyaWNrZXQiLAogICJjcmltZSIsCiAgImNyaXNwIiwKICAiY3JpdGljIiwKICAiY3JvcCIsCiAgImNyb3NzIiwKICAiY3JvdWNoIiwKICAiY3Jvd2QiLAogICJjcnVjaWFsIiwKICAiY3J1ZWwiLAogICJjcnVpc2UiLAogICJjcnVtYmxlIiwKICAiY3J1bmNoIiwKICAiY3J1c2giLAogICJjcnkiLAogICJjcnlzdGFsIiwKICAiY3ViZSIsCiAgImN1bHR1cmUiLAogICJjdXAiLAogICJjdXBib2FyZCIsCiAgImN1cmlvdXMiLAogICJjdXJyZW50IiwKICAiY3VydGFpbiIsCiAgImN1cnZlIiwKICAiY3VzaGlvbiIsCiAgImN1c3RvbSIsCiAgImN1dGUiLAogICJjeWNsZSIsCiAgImRhZCIsCiAgImRhbWFnZSIsCiAgImRhbXAiLAogICJkYW5jZSIsCiAgImRhbmdlciIsCiAgImRhcmluZyIsCiAgImRhc2giLAogICJkYXVnaHRlciIsCiAgImRhd24iLAogICJkYXkiLAogICJkZWFsIiwKICAiZGViYXRlIiwKICAiZGVicmlzIiwKICAiZGVjYWRlIiwKICAiZGVjZW1iZXIiLAogICJkZWNpZGUiLAogICJkZWNsaW5lIiwKICAiZGVjb3JhdGUiLAogICJkZWNyZWFzZSIsCiAgImRlZXIiLAogICJkZWZlbnNlIiwKICAiZGVmaW5lIiwKICAiZGVmeSIsCiAgImRlZ3JlZSIsCiAgImRlbGF5IiwKICAiZGVsaXZlciIsCiAgImRlbWFuZCIsCiAgImRlbWlzZSIsCiAgImRlbmlhbCIsCiAgImRlbnRpc3QiLAogICJkZW55IiwKICAiZGVwYXJ0IiwKICAiZGVwZW5kIiwKICAiZGVwb3NpdCIsCiAgImRlcHRoIiwKICAiZGVwdXR5IiwKICAiZGVyaXZlIiwKICAiZGVzY3JpYmUiLAogICJkZXNlcnQiLAogICJkZXNpZ24iLAogICJkZXNrIiwKICAiZGVzcGFpciIsCiAgImRlc3Ryb3kiLAogICJkZXRhaWwiLAogICJkZXRlY3QiLAogICJkZXZlbG9wIiwKICAiZGV2aWNlIiwKICAiZGV2b3RlIiwKICAiZGlhZ3JhbSIsCiAgImRpYWwiLAogICJkaWFtb25kIiwKICAiZGlhcnkiLAogICJkaWNlIiwKICAiZGllc2VsIiwKICAiZGlldCIsCiAgImRpZmZlciIsCiAgImRpZ2l0YWwiLAogICJkaWduaXR5IiwKICAiZGlsZW1tYSIsCiAgImRpbm5lciIsCiAgImRpbm9zYXVyIiwKICAiZGlyZWN0IiwKICAiZGlydCIsCiAgImRpc2FncmVlIiwKICAiZGlzY292ZXIiLAogICJkaXNlYXNlIiwKICAiZGlzaCIsCiAgImRpc21pc3MiLAogICJkaXNvcmRlciIsCiAgImRpc3BsYXkiLAogICJkaXN0YW5jZSIsCiAgImRpdmVydCIsCiAgImRpdmlkZSIsCiAgImRpdm9yY2UiLAogICJkaXp6eSIsCiAgImRvY3RvciIsCiAgImRvY3VtZW50IiwKICAiZG9nIiwKICAiZG9sbCIsCiAgImRvbHBoaW4iLAogICJkb21haW4iLAogICJkb25hdGUiLAogICJkb25rZXkiLAogICJkb25vciIsCiAgImRvb3IiLAogICJkb3NlIiwKICAiZG91YmxlIiwKICAiZG92ZSIsCiAgImRyYWZ0IiwKICAiZHJhZ29uIiwKICAiZHJhbWEiLAogICJkcmFzdGljIiwKICAiZHJhdyIsCiAgImRyZWFtIiwKICAiZHJlc3MiLAogICJkcmlmdCIsCiAgImRyaWxsIiwKICAiZHJpbmsiLAogICJkcmlwIiwKICAiZHJpdmUiLAogICJkcm9wIiwKICAiZHJ1bSIsCiAgImRyeSIsCiAgImR1Y2siLAogICJkdW1iIiwKICAiZHVuZSIsCiAgImR1cmluZyIsCiAgImR1c3QiLAogICJkdXRjaCIsCiAgImR1dHkiLAogICJkd2FyZiIsCiAgImR5bmFtaWMiLAogICJlYWdlciIsCiAgImVhZ2xlIiwKICAiZWFybHkiLAogICJlYXJuIiwKICAiZWFydGgiLAogICJlYXNpbHkiLAogICJlYXN0IiwKICAiZWFzeSIsCiAgImVjaG8iLAogICJlY29sb2d5IiwKICAiZWNvbm9teSIsCiAgImVkZ2UiLAogICJlZGl0IiwKICAiZWR1Y2F0ZSIsCiAgImVmZm9ydCIsCiAgImVnZyIsCiAgImVpZ2h0IiwKICAiZWl0aGVyIiwKICAiZWxib3ciLAogICJlbGRlciIsCiAgImVsZWN0cmljIiwKICAiZWxlZ2FudCIsCiAgImVsZW1lbnQiLAogICJlbGVwaGFudCIsCiAgImVsZXZhdG9yIiwKICAiZWxpdGUiLAogICJlbHNlIiwKICAiZW1iYXJrIiwKICAiZW1ib2R5IiwKICAiZW1icmFjZSIsCiAgImVtZXJnZSIsCiAgImVtb3Rpb24iLAogICJlbXBsb3kiLAogICJlbXBvd2VyIiwKICAiZW1wdHkiLAogICJlbmFibGUiLAogICJlbmFjdCIsCiAgImVuZCIsCiAgImVuZGxlc3MiLAogICJlbmRvcnNlIiwKICAiZW5lbXkiLAogICJlbmVyZ3kiLAogICJlbmZvcmNlIiwKICAiZW5nYWdlIiwKICAiZW5naW5lIiwKICAiZW5oYW5jZSIsCiAgImVuam95IiwKICAiZW5saXN0IiwKICAiZW5vdWdoIiwKICAiZW5yaWNoIiwKICAiZW5yb2xsIiwKICAiZW5zdXJlIiwKICAiZW50ZXIiLAogICJlbnRpcmUiLAogICJlbnRyeSIsCiAgImVudmVsb3BlIiwKICAiZXBpc29kZSIsCiAgImVxdWFsIiwKICAiZXF1aXAiLAogICJlcmEiLAogICJlcmFzZSIsCiAgImVyb2RlIiwKICAiZXJvc2lvbiIsCiAgImVycm9yIiwKICAiZXJ1cHQiLAogICJlc2NhcGUiLAogICJlc3NheSIsCiAgImVzc2VuY2UiLAogICJlc3RhdGUiLAogICJldGVybmFsIiwKICAiZXRoaWNzIiwKICAiZXZpZGVuY2UiLAogICJldmlsIiwKICAiZXZva2UiLAogICJldm9sdmUiLAogICJleGFjdCIsCiAgImV4YW1wbGUiLAogICJleGNlc3MiLAogICJleGNoYW5nZSIsCiAgImV4Y2l0ZSIsCiAgImV4Y2x1ZGUiLAogICJleGN1c2UiLAogICJleGVjdXRlIiwKICAiZXhlcmNpc2UiLAogICJleGhhdXN0IiwKICAiZXhoaWJpdCIsCiAgImV4aWxlIiwKICAiZXhpc3QiLAogICJleGl0IiwKICAiZXhvdGljIiwKICAiZXhwYW5kIiwKICAiZXhwZWN0IiwKICAiZXhwaXJlIiwKICAiZXhwbGFpbiIsCiAgImV4cG9zZSIsCiAgImV4cHJlc3MiLAogICJleHRlbmQiLAogICJleHRyYSIsCiAgImV5ZSIsCiAgImV5ZWJyb3ciLAogICJmYWJyaWMiLAogICJmYWNlIiwKICAiZmFjdWx0eSIsCiAgImZhZGUiLAogICJmYWludCIsCiAgImZhaXRoIiwKICAiZmFsbCIsCiAgImZhbHNlIiwKICAiZmFtZSIsCiAgImZhbWlseSIsCiAgImZhbW91cyIsCiAgImZhbiIsCiAgImZhbmN5IiwKICAiZmFudGFzeSIsCiAgImZhcm0iLAogICJmYXNoaW9uIiwKICAiZmF0IiwKICAiZmF0YWwiLAogICJmYXRoZXIiLAogICJmYXRpZ3VlIiwKICAiZmF1bHQiLAogICJmYXZvcml0ZSIsCiAgImZlYXR1cmUiLAogICJmZWJydWFyeSIsCiAgImZlZGVyYWwiLAogICJmZWUiLAogICJmZWVkIiwKICAiZmVlbCIsCiAgImZlbWFsZSIsCiAgImZlbmNlIiwKICAiZmVzdGl2YWwiLAogICJmZXRjaCIsCiAgImZldmVyIiwKICAiZmV3IiwKICAiZmliZXIiLAogICJmaWN0aW9uIiwKICAiZmllbGQiLAogICJmaWd1cmUiLAogICJmaWxlIiwKICAiZmlsbSIsCiAgImZpbHRlciIsCiAgImZpbmFsIiwKICAiZmluZCIsCiAgImZpbmUiLAogICJmaW5nZXIiLAogICJmaW5pc2giLAogICJmaXJlIiwKICAiZmlybSIsCiAgImZpcnN0IiwKICAiZmlzY2FsIiwKICAiZmlzaCIsCiAgImZpdCIsCiAgImZpdG5lc3MiLAogICJmaXgiLAogICJmbGFnIiwKICAiZmxhbWUiLAogICJmbGFzaCIsCiAgImZsYXQiLAogICJmbGF2b3IiLAogICJmbGVlIiwKICAiZmxpZ2h0IiwKICAiZmxpcCIsCiAgImZsb2F0IiwKICAiZmxvY2siLAogICJmbG9vciIsCiAgImZsb3dlciIsCiAgImZsdWlkIiwKICAiZmx1c2giLAogICJmbHkiLAogICJmb2FtIiwKICAiZm9jdXMiLAogICJmb2ciLAogICJmb2lsIiwKICAiZm9sZCIsCiAgImZvbGxvdyIsCiAgImZvb2QiLAogICJmb290IiwKICAiZm9yY2UiLAogICJmb3Jlc3QiLAogICJmb3JnZXQiLAogICJmb3JrIiwKICAiZm9ydHVuZSIsCiAgImZvcnVtIiwKICAiZm9yd2FyZCIsCiAgImZvc3NpbCIsCiAgImZvc3RlciIsCiAgImZvdW5kIiwKICAiZm94IiwKICAiZnJhZ2lsZSIsCiAgImZyYW1lIiwKICAiZnJlcXVlbnQiLAogICJmcmVzaCIsCiAgImZyaWVuZCIsCiAgImZyaW5nZSIsCiAgImZyb2ciLAogICJmcm9udCIsCiAgImZyb3N0IiwKICAiZnJvd24iLAogICJmcm96ZW4iLAogICJmcnVpdCIsCiAgImZ1ZWwiLAogICJmdW4iLAogICJmdW5ueSIsCiAgImZ1cm5hY2UiLAogICJmdXJ5IiwKICAiZnV0dXJlIiwKICAiZ2FkZ2V0IiwKICAiZ2FpbiIsCiAgImdhbGF4eSIsCiAgImdhbGxlcnkiLAogICJnYW1lIiwKICAiZ2FwIiwKICAiZ2FyYWdlIiwKICAiZ2FyYmFnZSIsCiAgImdhcmRlbiIsCiAgImdhcmxpYyIsCiAgImdhcm1lbnQiLAogICJnYXMiLAogICJnYXNwIiwKICAiZ2F0ZSIsCiAgImdhdGhlciIsCiAgImdhdWdlIiwKICAiZ2F6ZSIsCiAgImdlbmVyYWwiLAogICJnZW5pdXMiLAogICJnZW5yZSIsCiAgImdlbnRsZSIsCiAgImdlbnVpbmUiLAogICJnZXN0dXJlIiwKICAiZ2hvc3QiLAogICJnaWFudCIsCiAgImdpZnQiLAogICJnaWdnbGUiLAogICJnaW5nZXIiLAogICJnaXJhZmZlIiwKICAiZ2lybCIsCiAgImdpdmUiLAogICJnbGFkIiwKICAiZ2xhbmNlIiwKICAiZ2xhcmUiLAogICJnbGFzcyIsCiAgImdsaWRlIiwKICAiZ2xpbXBzZSIsCiAgImdsb2JlIiwKICAiZ2xvb20iLAogICJnbG9yeSIsCiAgImdsb3ZlIiwKICAiZ2xvdyIsCiAgImdsdWUiLAogICJnb2F0IiwKICAiZ29kZGVzcyIsCiAgImdvbGQiLAogICJnb29kIiwKICAiZ29vc2UiLAogICJnb3JpbGxhIiwKICAiZ29zcGVsIiwKICAiZ29zc2lwIiwKICAiZ292ZXJuIiwKICAiZ293biIsCiAgImdyYWIiLAogICJncmFjZSIsCiAgImdyYWluIiwKICAiZ3JhbnQiLAogICJncmFwZSIsCiAgImdyYXNzIiwKICAiZ3Jhdml0eSIsCiAgImdyZWF0IiwKICAiZ3JlZW4iLAogICJncmlkIiwKICAiZ3JpZWYiLAogICJncml0IiwKICAiZ3JvY2VyeSIsCiAgImdyb3VwIiwKICAiZ3JvdyIsCiAgImdydW50IiwKICAiZ3VhcmQiLAogICJndWVzcyIsCiAgImd1aWRlIiwKICAiZ3VpbHQiLAogICJndWl0YXIiLAogICJndW4iLAogICJneW0iLAogICJoYWJpdCIsCiAgImhhaXIiLAogICJoYWxmIiwKICAiaGFtbWVyIiwKICAiaGFtc3RlciIsCiAgImhhbmQiLAogICJoYXBweSIsCiAgImhhcmJvciIsCiAgImhhcmQiLAogICJoYXJzaCIsCiAgImhhcnZlc3QiLAogICJoYXQiLAogICJoYXZlIiwKICAiaGF3ayIsCiAgImhhemFyZCIsCiAgImhlYWQiLAogICJoZWFsdGgiLAogICJoZWFydCIsCiAgImhlYXZ5IiwKICAiaGVkZ2Vob2ciLAogICJoZWlnaHQiLAogICJoZWxsbyIsCiAgImhlbG1ldCIsCiAgImhlbHAiLAogICJoZW4iLAogICJoZXJvIiwKICAiaGlkZGVuIiwKICAiaGlnaCIsCiAgImhpbGwiLAogICJoaW50IiwKICAiaGlwIiwKICAiaGlyZSIsCiAgImhpc3RvcnkiLAogICJob2JieSIsCiAgImhvY2tleSIsCiAgImhvbGQiLAogICJob2xlIiwKICAiaG9saWRheSIsCiAgImhvbGxvdyIsCiAgImhvbWUiLAogICJob25leSIsCiAgImhvb2QiLAogICJob3BlIiwKICAiaG9ybiIsCiAgImhvcnJvciIsCiAgImhvcnNlIiwKICAiaG9zcGl0YWwiLAogICJob3N0IiwKICAiaG90ZWwiLAogICJob3VyIiwKICAiaG92ZXIiLAogICJodWIiLAogICJodWdlIiwKICAiaHVtYW4iLAogICJodW1ibGUiLAogICJodW1vciIsCiAgImh1bmRyZWQiLAogICJodW5ncnkiLAogICJodW50IiwKICAiaHVyZGxlIiwKICAiaHVycnkiLAogICJodXJ0IiwKICAiaHVzYmFuZCIsCiAgImh5YnJpZCIsCiAgImljZSIsCiAgImljb24iLAogICJpZGVhIiwKICAiaWRlbnRpZnkiLAogICJpZGxlIiwKICAiaWdub3JlIiwKICAiaWxsIiwKICAiaWxsZWdhbCIsCiAgImlsbG5lc3MiLAogICJpbWFnZSIsCiAgImltaXRhdGUiLAogICJpbW1lbnNlIiwKICAiaW1tdW5lIiwKICAiaW1wYWN0IiwKICAiaW1wb3NlIiwKICAiaW1wcm92ZSIsCiAgImltcHVsc2UiLAogICJpbmNoIiwKICAiaW5jbHVkZSIsCiAgImluY29tZSIsCiAgImluY3JlYXNlIiwKICAiaW5kZXgiLAogICJpbmRpY2F0ZSIsCiAgImluZG9vciIsCiAgImluZHVzdHJ5IiwKICAiaW5mYW50IiwKICAiaW5mbGljdCIsCiAgImluZm9ybSIsCiAgImluaGFsZSIsCiAgImluaGVyaXQiLAogICJpbml0aWFsIiwKICAiaW5qZWN0IiwKICAiaW5qdXJ5IiwKICAiaW5tYXRlIiwKICAiaW5uZXIiLAogICJpbm5vY2VudCIsCiAgImlucHV0IiwKICAiaW5xdWlyeSIsCiAgImluc2FuZSIsCiAgImluc2VjdCIsCiAgImluc2lkZSIsCiAgImluc3BpcmUiLAogICJpbnN0YWxsIiwKICAiaW50YWN0IiwKICAiaW50ZXJlc3QiLAogICJpbnRvIiwKICAiaW52ZXN0IiwKICAiaW52aXRlIiwKICAiaW52b2x2ZSIsCiAgImlyb24iLAogICJpc2xhbmQiLAogICJpc29sYXRlIiwKICAiaXNzdWUiLAogICJpdGVtIiwKICAiaXZvcnkiLAogICJqYWNrZXQiLAogICJqYWd1YXIiLAogICJqYXIiLAogICJqYXp6IiwKICAiamVhbG91cyIsCiAgImplYW5zIiwKICAiamVsbHkiLAogICJqZXdlbCIsCiAgImpvYiIsCiAgImpvaW4iLAogICJqb2tlIiwKICAiam91cm5leSIsCiAgImpveSIsCiAgImp1ZGdlIiwKICAianVpY2UiLAogICJqdW1wIiwKICAianVuZ2xlIiwKICAianVuaW9yIiwKICAianVuayIsCiAgImp1c3QiLAogICJrYW5nYXJvbyIsCiAgImtlZW4iLAogICJrZWVwIiwKICAia2V0Y2h1cCIsCiAgImtleSIsCiAgImtpY2siLAogICJraWQiLAogICJraWRuZXkiLAogICJraW5kIiwKICAia2luZ2RvbSIsCiAgImtpc3MiLAogICJraXQiLAogICJraXRjaGVuIiwKICAia2l0ZSIsCiAgImtpdHRlbiIsCiAgImtpd2kiLAogICJrbmVlIiwKICAia25pZmUiLAogICJrbm9jayIsCiAgImtub3ciLAogICJsYWIiLAogICJsYWJlbCIsCiAgImxhYm9yIiwKICAibGFkZGVyIiwKICAibGFkeSIsCiAgImxha2UiLAogICJsYW1wIiwKICAibGFuZ3VhZ2UiLAogICJsYXB0b3AiLAogICJsYXJnZSIsCiAgImxhdGVyIiwKICAibGF0aW4iLAogICJsYXVnaCIsCiAgImxhdW5kcnkiLAogICJsYXZhIiwKICAibGF3IiwKICAibGF3biIsCiAgImxhd3N1aXQiLAogICJsYXllciIsCiAgImxhenkiLAogICJsZWFkZXIiLAogICJsZWFmIiwKICAibGVhcm4iLAogICJsZWF2ZSIsCiAgImxlY3R1cmUiLAogICJsZWZ0IiwKICAibGVnIiwKICAibGVnYWwiLAogICJsZWdlbmQiLAogICJsZWlzdXJlIiwKICAibGVtb24iLAogICJsZW5kIiwKICAibGVuZ3RoIiwKICAibGVucyIsCiAgImxlb3BhcmQiLAogICJsZXNzb24iLAogICJsZXR0ZXIiLAogICJsZXZlbCIsCiAgImxpYXIiLAogICJsaWJlcnR5IiwKICAibGlicmFyeSIsCiAgImxpY2Vuc2UiLAogICJsaWZlIiwKICAibGlmdCIsCiAgImxpZ2h0IiwKICAibGlrZSIsCiAgImxpbWIiLAogICJsaW1pdCIsCiAgImxpbmsiLAogICJsaW9uIiwKICAibGlxdWlkIiwKICAibGlzdCIsCiAgImxpdHRsZSIsCiAgImxpdmUiLAogICJsaXphcmQiLAogICJsb2FkIiwKICAibG9hbiIsCiAgImxvYnN0ZXIiLAogICJsb2NhbCIsCiAgImxvY2siLAogICJsb2dpYyIsCiAgImxvbmVseSIsCiAgImxvbmciLAogICJsb29wIiwKICAibG90dGVyeSIsCiAgImxvdWQiLAogICJsb3VuZ2UiLAogICJsb3ZlIiwKICAibG95YWwiLAogICJsdWNreSIsCiAgImx1Z2dhZ2UiLAogICJsdW1iZXIiLAogICJsdW5hciIsCiAgImx1bmNoIiwKICAibHV4dXJ5IiwKICAibHlyaWNzIiwKICAibWFjaGluZSIsCiAgIm1hZCIsCiAgIm1hZ2ljIiwKICAibWFnbmV0IiwKICAibWFpZCIsCiAgIm1haWwiLAogICJtYWluIiwKICAibWFqb3IiLAogICJtYWtlIiwKICAibWFtbWFsIiwKICAibWFuIiwKICAibWFuYWdlIiwKICAibWFuZGF0ZSIsCiAgIm1hbmdvIiwKICAibWFuc2lvbiIsCiAgIm1hbnVhbCIsCiAgIm1hcGxlIiwKICAibWFyYmxlIiwKICAibWFyY2giLAogICJtYXJnaW4iLAogICJtYXJpbmUiLAogICJtYXJrZXQiLAogICJtYXJyaWFnZSIsCiAgIm1hc2siLAogICJtYXNzIiwKICAibWFzdGVyIiwKICAibWF0Y2giLAogICJtYXRlcmlhbCIsCiAgIm1hdGgiLAogICJtYXRyaXgiLAogICJtYXR0ZXIiLAogICJtYXhpbXVtIiwKICAibWF6ZSIsCiAgIm1lYWRvdyIsCiAgIm1lYW4iLAogICJtZWFzdXJlIiwKICAibWVhdCIsCiAgIm1lY2hhbmljIiwKICAibWVkYWwiLAogICJtZWRpYSIsCiAgIm1lbG9keSIsCiAgIm1lbHQiLAogICJtZW1iZXIiLAogICJtZW1vcnkiLAogICJtZW50aW9uIiwKICAibWVudSIsCiAgIm1lcmN5IiwKICAibWVyZ2UiLAogICJtZXJpdCIsCiAgIm1lcnJ5IiwKICAibWVzaCIsCiAgIm1lc3NhZ2UiLAogICJtZXRhbCIsCiAgIm1ldGhvZCIsCiAgIm1pZGRsZSIsCiAgIm1pZG5pZ2h0IiwKICAibWlsayIsCiAgIm1pbGxpb24iLAogICJtaW1pYyIsCiAgIm1pbmQiLAogICJtaW5pbXVtIiwKICAibWlub3IiLAogICJtaW51dGUiLAogICJtaXJhY2xlIiwKICAibWlycm9yIiwKICAibWlzZXJ5IiwKICAibWlzcyIsCiAgIm1pc3Rha2UiLAogICJtaXgiLAogICJtaXhlZCIsCiAgIm1peHR1cmUiLAogICJtb2JpbGUiLAogICJtb2RlbCIsCiAgIm1vZGlmeSIsCiAgIm1vbSIsCiAgIm1vbWVudCIsCiAgIm1vbml0b3IiLAogICJtb25rZXkiLAogICJtb25zdGVyIiwKICAibW9udGgiLAogICJtb29uIiwKICAibW9yYWwiLAogICJtb3JlIiwKICAibW9ybmluZyIsCiAgIm1vc3F1aXRvIiwKICAibW90aGVyIiwKICAibW90aW9uIiwKICAibW90b3IiLAogICJtb3VudGFpbiIsCiAgIm1vdXNlIiwKICAibW92ZSIsCiAgIm1vdmllIiwKICAibXVjaCIsCiAgIm11ZmZpbiIsCiAgIm11bGUiLAogICJtdWx0aXBseSIsCiAgIm11c2NsZSIsCiAgIm11c2V1bSIsCiAgIm11c2hyb29tIiwKICAibXVzaWMiLAogICJtdXN0IiwKICAibXV0dWFsIiwKICAibXlzZWxmIiwKICAibXlzdGVyeSIsCiAgIm15dGgiLAogICJuYWl2ZSIsCiAgIm5hbWUiLAogICJuYXBraW4iLAogICJuYXJyb3ciLAogICJuYXN0eSIsCiAgIm5hdGlvbiIsCiAgIm5hdHVyZSIsCiAgIm5lYXIiLAogICJuZWNrIiwKICAibmVlZCIsCiAgIm5lZ2F0aXZlIiwKICAibmVnbGVjdCIsCiAgIm5laXRoZXIiLAogICJuZXBoZXciLAogICJuZXJ2ZSIsCiAgIm5lc3QiLAogICJuZXQiLAogICJuZXR3b3JrIiwKICAibmV1dHJhbCIsCiAgIm5ldmVyIiwKICAibmV3cyIsCiAgIm5leHQiLAogICJuaWNlIiwKICAibmlnaHQiLAogICJub2JsZSIsCiAgIm5vaXNlIiwKICAibm9taW5lZSIsCiAgIm5vb2RsZSIsCiAgIm5vcm1hbCIsCiAgIm5vcnRoIiwKICAibm9zZSIsCiAgIm5vdGFibGUiLAogICJub3RlIiwKICAibm90aGluZyIsCiAgIm5vdGljZSIsCiAgIm5vdmVsIiwKICAibm93IiwKICAibnVjbGVhciIsCiAgIm51bWJlciIsCiAgIm51cnNlIiwKICAibnV0IiwKICAib2FrIiwKICAib2JleSIsCiAgIm9iamVjdCIsCiAgIm9ibGlnZSIsCiAgIm9ic2N1cmUiLAogICJvYnNlcnZlIiwKICAib2J0YWluIiwKICAib2J2aW91cyIsCiAgIm9jY3VyIiwKICAib2NlYW4iLAogICJvY3RvYmVyIiwKICAib2RvciIsCiAgIm9mZiIsCiAgIm9mZmVyIiwKICAib2ZmaWNlIiwKICAib2Z0ZW4iLAogICJvaWwiLAogICJva2F5IiwKICAib2xkIiwKICAib2xpdmUiLAogICJvbHltcGljIiwKICAib21pdCIsCiAgIm9uY2UiLAogICJvbmUiLAogICJvbmlvbiIsCiAgIm9ubGluZSIsCiAgIm9ubHkiLAogICJvcGVuIiwKICAib3BlcmEiLAogICJvcGluaW9uIiwKICAib3Bwb3NlIiwKICAib3B0aW9uIiwKICAib3JhbmdlIiwKICAib3JiaXQiLAogICJvcmNoYXJkIiwKICAib3JkZXIiLAogICJvcmRpbmFyeSIsCiAgIm9yZ2FuIiwKICAib3JpZW50IiwKICAib3JpZ2luYWwiLAogICJvcnBoYW4iLAogICJvc3RyaWNoIiwKICAib3RoZXIiLAogICJvdXRkb29yIiwKICAib3V0ZXIiLAogICJvdXRwdXQiLAogICJvdXRzaWRlIiwKICAib3ZhbCIsCiAgIm92ZW4iLAogICJvdmVyIiwKICAib3duIiwKICAib3duZXIiLAogICJveHlnZW4iLAogICJveXN0ZXIiLAogICJvem9uZSIsCiAgInBhY3QiLAogICJwYWRkbGUiLAogICJwYWdlIiwKICAicGFpciIsCiAgInBhbGFjZSIsCiAgInBhbG0iLAogICJwYW5kYSIsCiAgInBhbmVsIiwKICAicGFuaWMiLAogICJwYW50aGVyIiwKICAicGFwZXIiLAogICJwYXJhZGUiLAogICJwYXJlbnQiLAogICJwYXJrIiwKICAicGFycm90IiwKICAicGFydHkiLAogICJwYXNzIiwKICAicGF0Y2giLAogICJwYXRoIiwKICAicGF0aWVudCIsCiAgInBhdHJvbCIsCiAgInBhdHRlcm4iLAogICJwYXVzZSIsCiAgInBhdmUiLAogICJwYXltZW50IiwKICAicGVhY2UiLAogICJwZWFudXQiLAogICJwZWFyIiwKICAicGVhc2FudCIsCiAgInBlbGljYW4iLAogICJwZW4iLAogICJwZW5hbHR5IiwKICAicGVuY2lsIiwKICAicGVvcGxlIiwKICAicGVwcGVyIiwKICAicGVyZmVjdCIsCiAgInBlcm1pdCIsCiAgInBlcnNvbiIsCiAgInBldCIsCiAgInBob25lIiwKICAicGhvdG8iLAogICJwaHJhc2UiLAogICJwaHlzaWNhbCIsCiAgInBpYW5vIiwKICAicGljbmljIiwKICAicGljdHVyZSIsCiAgInBpZWNlIiwKICAicGlnIiwKICAicGlnZW9uIiwKICAicGlsbCIsCiAgInBpbG90IiwKICAicGluayIsCiAgInBpb25lZXIiLAogICJwaXBlIiwKICAicGlzdG9sIiwKICAicGl0Y2giLAogICJwaXp6YSIsCiAgInBsYWNlIiwKICAicGxhbmV0IiwKICAicGxhc3RpYyIsCiAgInBsYXRlIiwKICAicGxheSIsCiAgInBsZWFzZSIsCiAgInBsZWRnZSIsCiAgInBsdWNrIiwKICAicGx1ZyIsCiAgInBsdW5nZSIsCiAgInBvZW0iLAogICJwb2V0IiwKICAicG9pbnQiLAogICJwb2xhciIsCiAgInBvbGUiLAogICJwb2xpY2UiLAogICJwb25kIiwKICAicG9ueSIsCiAgInBvb2wiLAogICJwb3B1bGFyIiwKICAicG9ydGlvbiIsCiAgInBvc2l0aW9uIiwKICAicG9zc2libGUiLAogICJwb3N0IiwKICAicG90YXRvIiwKICAicG90dGVyeSIsCiAgInBvdmVydHkiLAogICJwb3dkZXIiLAogICJwb3dlciIsCiAgInByYWN0aWNlIiwKICAicHJhaXNlIiwKICAicHJlZGljdCIsCiAgInByZWZlciIsCiAgInByZXBhcmUiLAogICJwcmVzZW50IiwKICAicHJldHR5IiwKICAicHJldmVudCIsCiAgInByaWNlIiwKICAicHJpZGUiLAogICJwcmltYXJ5IiwKICAicHJpbnQiLAogICJwcmlvcml0eSIsCiAgInByaXNvbiIsCiAgInByaXZhdGUiLAogICJwcml6ZSIsCiAgInByb2JsZW0iLAogICJwcm9jZXNzIiwKICAicHJvZHVjZSIsCiAgInByb2ZpdCIsCiAgInByb2dyYW0iLAogICJwcm9qZWN0IiwKICAicHJvbW90ZSIsCiAgInByb29mIiwKICAicHJvcGVydHkiLAogICJwcm9zcGVyIiwKICAicHJvdGVjdCIsCiAgInByb3VkIiwKICAicHJvdmlkZSIsCiAgInB1YmxpYyIsCiAgInB1ZGRpbmciLAogICJwdWxsIiwKICAicHVscCIsCiAgInB1bHNlIiwKICAicHVtcGtpbiIsCiAgInB1bmNoIiwKICAicHVwaWwiLAogICJwdXBweSIsCiAgInB1cmNoYXNlIiwKICAicHVyaXR5IiwKICAicHVycG9zZSIsCiAgInB1cnNlIiwKICAicHVzaCIsCiAgInB1dCIsCiAgInB1enpsZSIsCiAgInB5cmFtaWQiLAogICJxdWFsaXR5IiwKICAicXVhbnR1bSIsCiAgInF1YXJ0ZXIiLAogICJxdWVzdGlvbiIsCiAgInF1aWNrIiwKICAicXVpdCIsCiAgInF1aXoiLAogICJxdW90ZSIsCiAgInJhYmJpdCIsCiAgInJhY2Nvb24iLAogICJyYWNlIiwKICAicmFjayIsCiAgInJhZGFyIiwKICAicmFkaW8iLAogICJyYWlsIiwKICAicmFpbiIsCiAgInJhaXNlIiwKICAicmFsbHkiLAogICJyYW1wIiwKICAicmFuY2giLAogICJyYW5kb20iLAogICJyYW5nZSIsCiAgInJhcGlkIiwKICAicmFyZSIsCiAgInJhdGUiLAogICJyYXRoZXIiLAogICJyYXZlbiIsCiAgInJhdyIsCiAgInJhem9yIiwKICAicmVhZHkiLAogICJyZWFsIiwKICAicmVhc29uIiwKICAicmViZWwiLAogICJyZWJ1aWxkIiwKICAicmVjYWxsIiwKICAicmVjZWl2ZSIsCiAgInJlY2lwZSIsCiAgInJlY29yZCIsCiAgInJlY3ljbGUiLAogICJyZWR1Y2UiLAogICJyZWZsZWN0IiwKICAicmVmb3JtIiwKICAicmVmdXNlIiwKICAicmVnaW9uIiwKICAicmVncmV0IiwKICAicmVndWxhciIsCiAgInJlamVjdCIsCiAgInJlbGF4IiwKICAicmVsZWFzZSIsCiAgInJlbGllZiIsCiAgInJlbHkiLAogICJyZW1haW4iLAogICJyZW1lbWJlciIsCiAgInJlbWluZCIsCiAgInJlbW92ZSIsCiAgInJlbmRlciIsCiAgInJlbmV3IiwKICAicmVudCIsCiAgInJlb3BlbiIsCiAgInJlcGFpciIsCiAgInJlcGVhdCIsCiAgInJlcGxhY2UiLAogICJyZXBvcnQiLAogICJyZXF1aXJlIiwKICAicmVzY3VlIiwKICAicmVzZW1ibGUiLAogICJyZXNpc3QiLAogICJyZXNvdXJjZSIsCiAgInJlc3BvbnNlIiwKICAicmVzdWx0IiwKICAicmV0aXJlIiwKICAicmV0cmVhdCIsCiAgInJldHVybiIsCiAgInJldW5pb24iLAogICJyZXZlYWwiLAogICJyZXZpZXciLAogICJyZXdhcmQiLAogICJyaHl0aG0iLAogICJyaWIiLAogICJyaWJib24iLAogICJyaWNlIiwKICAicmljaCIsCiAgInJpZGUiLAogICJyaWRnZSIsCiAgInJpZmxlIiwKICAicmlnaHQiLAogICJyaWdpZCIsCiAgInJpbmciLAogICJyaW90IiwKICAicmlwcGxlIiwKICAicmlzayIsCiAgInJpdHVhbCIsCiAgInJpdmFsIiwKICAicml2ZXIiLAogICJyb2FkIiwKICAicm9hc3QiLAogICJyb2JvdCIsCiAgInJvYnVzdCIsCiAgInJvY2tldCIsCiAgInJvbWFuY2UiLAogICJyb29mIiwKICAicm9va2llIiwKICAicm9vbSIsCiAgInJvc2UiLAogICJyb3RhdGUiLAogICJyb3VnaCIsCiAgInJvdW5kIiwKICAicm91dGUiLAogICJyb3lhbCIsCiAgInJ1YmJlciIsCiAgInJ1ZGUiLAogICJydWciLAogICJydWxlIiwKICAicnVuIiwKICAicnVud2F5IiwKICAicnVyYWwiLAogICJzYWQiLAogICJzYWRkbGUiLAogICJzYWRuZXNzIiwKICAic2FmZSIsCiAgInNhaWwiLAogICJzYWxhZCIsCiAgInNhbG1vbiIsCiAgInNhbG9uIiwKICAic2FsdCIsCiAgInNhbHV0ZSIsCiAgInNhbWUiLAogICJzYW1wbGUiLAogICJzYW5kIiwKICAic2F0aXNmeSIsCiAgInNhdG9zaGkiLAogICJzYXVjZSIsCiAgInNhdXNhZ2UiLAogICJzYXZlIiwKICAic2F5IiwKICAic2NhbGUiLAogICJzY2FuIiwKICAic2NhcmUiLAogICJzY2F0dGVyIiwKICAic2NlbmUiLAogICJzY2hlbWUiLAogICJzY2hvb2wiLAogICJzY2llbmNlIiwKICAic2Npc3NvcnMiLAogICJzY29ycGlvbiIsCiAgInNjb3V0IiwKICAic2NyYXAiLAogICJzY3JlZW4iLAogICJzY3JpcHQiLAogICJzY3J1YiIsCiAgInNlYSIsCiAgInNlYXJjaCIsCiAgInNlYXNvbiIsCiAgInNlYXQiLAogICJzZWNvbmQiLAogICJzZWNyZXQiLAogICJzZWN0aW9uIiwKICAic2VjdXJpdHkiLAogICJzZWVkIiwKICAic2VlayIsCiAgInNlZ21lbnQiLAogICJzZWxlY3QiLAogICJzZWxsIiwKICAic2VtaW5hciIsCiAgInNlbmlvciIsCiAgInNlbnNlIiwKICAic2VudGVuY2UiLAogICJzZXJpZXMiLAogICJzZXJ2aWNlIiwKICAic2Vzc2lvbiIsCiAgInNldHRsZSIsCiAgInNldHVwIiwKICAic2V2ZW4iLAogICJzaGFkb3ciLAogICJzaGFmdCIsCiAgInNoYWxsb3ciLAogICJzaGFyZSIsCiAgInNoZWQiLAogICJzaGVsbCIsCiAgInNoZXJpZmYiLAogICJzaGllbGQiLAogICJzaGlmdCIsCiAgInNoaW5lIiwKICAic2hpcCIsCiAgInNoaXZlciIsCiAgInNob2NrIiwKICAic2hvZSIsCiAgInNob290IiwKICAic2hvcCIsCiAgInNob3J0IiwKICAic2hvdWxkZXIiLAogICJzaG92ZSIsCiAgInNocmltcCIsCiAgInNocnVnIiwKICAic2h1ZmZsZSIsCiAgInNoeSIsCiAgInNpYmxpbmciLAogICJzaWNrIiwKICAic2lkZSIsCiAgInNpZWdlIiwKICAic2lnaHQiLAogICJzaWduIiwKICAic2lsZW50IiwKICAic2lsayIsCiAgInNpbGx5IiwKICAic2lsdmVyIiwKICAic2ltaWxhciIsCiAgInNpbXBsZSIsCiAgInNpbmNlIiwKICAic2luZyIsCiAgInNpcmVuIiwKICAic2lzdGVyIiwKICAic2l0dWF0ZSIsCiAgInNpeCIsCiAgInNpemUiLAogICJza2F0ZSIsCiAgInNrZXRjaCIsCiAgInNraSIsCiAgInNraWxsIiwKICAic2tpbiIsCiAgInNraXJ0IiwKICAic2t1bGwiLAogICJzbGFiIiwKICAic2xhbSIsCiAgInNsZWVwIiwKICAic2xlbmRlciIsCiAgInNsaWNlIiwKICAic2xpZGUiLAogICJzbGlnaHQiLAogICJzbGltIiwKICAic2xvZ2FuIiwKICAic2xvdCIsCiAgInNsb3ciLAogICJzbHVzaCIsCiAgInNtYWxsIiwKICAic21hcnQiLAogICJzbWlsZSIsCiAgInNtb2tlIiwKICAic21vb3RoIiwKICAic25hY2siLAogICJzbmFrZSIsCiAgInNuYXAiLAogICJzbmlmZiIsCiAgInNub3ciLAogICJzb2FwIiwKICAic29jY2VyIiwKICAic29jaWFsIiwKICAic29jayIsCiAgInNvZGEiLAogICJzb2Z0IiwKICAic29sYXIiLAogICJzb2xkaWVyIiwKICAic29saWQiLAogICJzb2x1dGlvbiIsCiAgInNvbHZlIiwKICAic29tZW9uZSIsCiAgInNvbmciLAogICJzb29uIiwKICAic29ycnkiLAogICJzb3J0IiwKICAic291bCIsCiAgInNvdW5kIiwKICAic291cCIsCiAgInNvdXJjZSIsCiAgInNvdXRoIiwKICAic3BhY2UiLAogICJzcGFyZSIsCiAgInNwYXRpYWwiLAogICJzcGF3biIsCiAgInNwZWFrIiwKICAic3BlY2lhbCIsCiAgInNwZWVkIiwKICAic3BlbGwiLAogICJzcGVuZCIsCiAgInNwaGVyZSIsCiAgInNwaWNlIiwKICAic3BpZGVyIiwKICAic3Bpa2UiLAogICJzcGluIiwKICAic3Bpcml0IiwKICAic3BsaXQiLAogICJzcG9pbCIsCiAgInNwb25zb3IiLAogICJzcG9vbiIsCiAgInNwb3J0IiwKICAic3BvdCIsCiAgInNwcmF5IiwKICAic3ByZWFkIiwKICAic3ByaW5nIiwKICAic3B5IiwKICAic3F1YXJlIiwKICAic3F1ZWV6ZSIsCiAgInNxdWlycmVsIiwKICAic3RhYmxlIiwKICAic3RhZGl1bSIsCiAgInN0YWZmIiwKICAic3RhZ2UiLAogICJzdGFpcnMiLAogICJzdGFtcCIsCiAgInN0YW5kIiwKICAic3RhcnQiLAogICJzdGF0ZSIsCiAgInN0YXkiLAogICJzdGVhayIsCiAgInN0ZWVsIiwKICAic3RlbSIsCiAgInN0ZXAiLAogICJzdGVyZW8iLAogICJzdGljayIsCiAgInN0aWxsIiwKICAic3RpbmciLAogICJzdG9jayIsCiAgInN0b21hY2giLAogICJzdG9uZSIsCiAgInN0b29sIiwKICAic3RvcnkiLAogICJzdG92ZSIsCiAgInN0cmF0ZWd5IiwKICAic3RyZWV0IiwKICAic3RyaWtlIiwKICAic3Ryb25nIiwKICAic3RydWdnbGUiLAogICJzdHVkZW50IiwKICAic3R1ZmYiLAogICJzdHVtYmxlIiwKICAic3R5bGUiLAogICJzdWJqZWN0IiwKICAic3VibWl0IiwKICAic3Vid2F5IiwKICAic3VjY2VzcyIsCiAgInN1Y2giLAogICJzdWRkZW4iLAogICJzdWZmZXIiLAogICJzdWdhciIsCiAgInN1Z2dlc3QiLAogICJzdWl0IiwKICAic3VtbWVyIiwKICAic3VuIiwKICAic3VubnkiLAogICJzdW5zZXQiLAogICJzdXBlciIsCiAgInN1cHBseSIsCiAgInN1cHJlbWUiLAogICJzdXJlIiwKICAic3VyZmFjZSIsCiAgInN1cmdlIiwKICAic3VycHJpc2UiLAogICJzdXJyb3VuZCIsCiAgInN1cnZleSIsCiAgInN1c3BlY3QiLAogICJzdXN0YWluIiwKICAic3dhbGxvdyIsCiAgInN3YW1wIiwKICAic3dhcCIsCiAgInN3YXJtIiwKICAic3dlYXIiLAogICJzd2VldCIsCiAgInN3aWZ0IiwKICAic3dpbSIsCiAgInN3aW5nIiwKICAic3dpdGNoIiwKICAic3dvcmQiLAogICJzeW1ib2wiLAogICJzeW1wdG9tIiwKICAic3lydXAiLAogICJzeXN0ZW0iLAogICJ0YWJsZSIsCiAgInRhY2tsZSIsCiAgInRhZyIsCiAgInRhaWwiLAogICJ0YWxlbnQiLAogICJ0YWxrIiwKICAidGFuayIsCiAgInRhcGUiLAogICJ0YXJnZXQiLAogICJ0YXNrIiwKICAidGFzdGUiLAogICJ0YXR0b28iLAogICJ0YXhpIiwKICAidGVhY2giLAogICJ0ZWFtIiwKICAidGVsbCIsCiAgInRlbiIsCiAgInRlbmFudCIsCiAgInRlbm5pcyIsCiAgInRlbnQiLAogICJ0ZXJtIiwKICAidGVzdCIsCiAgInRleHQiLAogICJ0aGFuayIsCiAgInRoYXQiLAogICJ0aGVtZSIsCiAgInRoZW4iLAogICJ0aGVvcnkiLAogICJ0aGVyZSIsCiAgInRoZXkiLAogICJ0aGluZyIsCiAgInRoaXMiLAogICJ0aG91Z2h0IiwKICAidGhyZWUiLAogICJ0aHJpdmUiLAogICJ0aHJvdyIsCiAgInRodW1iIiwKICAidGh1bmRlciIsCiAgInRpY2tldCIsCiAgInRpZGUiLAogICJ0aWdlciIsCiAgInRpbHQiLAogICJ0aW1iZXIiLAogICJ0aW1lIiwKICAidGlueSIsCiAgInRpcCIsCiAgInRpcmVkIiwKICAidGlzc3VlIiwKICAidGl0bGUiLAogICJ0b2FzdCIsCiAgInRvYmFjY28iLAogICJ0b2RheSIsCiAgInRvZGRsZXIiLAogICJ0b2UiLAogICJ0b2dldGhlciIsCiAgInRvaWxldCIsCiAgInRva2VuIiwKICAidG9tYXRvIiwKICAidG9tb3Jyb3ciLAogICJ0b25lIiwKICAidG9uZ3VlIiwKICAidG9uaWdodCIsCiAgInRvb2wiLAogICJ0b290aCIsCiAgInRvcCIsCiAgInRvcGljIiwKICAidG9wcGxlIiwKICAidG9yY2giLAogICJ0b3JuYWRvIiwKICAidG9ydG9pc2UiLAogICJ0b3NzIiwKICAidG90YWwiLAogICJ0b3VyaXN0IiwKICAidG93YXJkIiwKICAidG93ZXIiLAogICJ0b3duIiwKICAidG95IiwKICAidHJhY2siLAogICJ0cmFkZSIsCiAgInRyYWZmaWMiLAogICJ0cmFnaWMiLAogICJ0cmFpbiIsCiAgInRyYW5zZmVyIiwKICAidHJhcCIsCiAgInRyYXNoIiwKICAidHJhdmVsIiwKICAidHJheSIsCiAgInRyZWF0IiwKICAidHJlZSIsCiAgInRyZW5kIiwKICAidHJpYWwiLAogICJ0cmliZSIsCiAgInRyaWNrIiwKICAidHJpZ2dlciIsCiAgInRyaW0iLAogICJ0cmlwIiwKICAidHJvcGh5IiwKICAidHJvdWJsZSIsCiAgInRydWNrIiwKICAidHJ1ZSIsCiAgInRydWx5IiwKICAidHJ1bXBldCIsCiAgInRydXN0IiwKICAidHJ1dGgiLAogICJ0cnkiLAogICJ0dWJlIiwKICAidHVpdGlvbiIsCiAgInR1bWJsZSIsCiAgInR1bmEiLAogICJ0dW5uZWwiLAogICJ0dXJrZXkiLAogICJ0dXJuIiwKICAidHVydGxlIiwKICAidHdlbHZlIiwKICAidHdlbnR5IiwKICAidHdpY2UiLAogICJ0d2luIiwKICAidHdpc3QiLAogICJ0d28iLAogICJ0eXBlIiwKICAidHlwaWNhbCIsCiAgInVnbHkiLAogICJ1bWJyZWxsYSIsCiAgInVuYWJsZSIsCiAgInVuYXdhcmUiLAogICJ1bmNsZSIsCiAgInVuY292ZXIiLAogICJ1bmRlciIsCiAgInVuZG8iLAogICJ1bmZhaXIiLAogICJ1bmZvbGQiLAogICJ1bmhhcHB5IiwKICAidW5pZm9ybSIsCiAgInVuaXF1ZSIsCiAgInVuaXQiLAogICJ1bml2ZXJzZSIsCiAgInVua25vd24iLAogICJ1bmxvY2siLAogICJ1bnRpbCIsCiAgInVudXN1YWwiLAogICJ1bnZlaWwiLAogICJ1cGRhdGUiLAogICJ1cGdyYWRlIiwKICAidXBob2xkIiwKICAidXBvbiIsCiAgInVwcGVyIiwKICAidXBzZXQiLAogICJ1cmJhbiIsCiAgInVyZ2UiLAogICJ1c2FnZSIsCiAgInVzZSIsCiAgInVzZWQiLAogICJ1c2VmdWwiLAogICJ1c2VsZXNzIiwKICAidXN1YWwiLAogICJ1dGlsaXR5IiwKICAidmFjYW50IiwKICAidmFjdXVtIiwKICAidmFndWUiLAogICJ2YWxpZCIsCiAgInZhbGxleSIsCiAgInZhbHZlIiwKICAidmFuIiwKICAidmFuaXNoIiwKICAidmFwb3IiLAogICJ2YXJpb3VzIiwKICAidmFzdCIsCiAgInZhdWx0IiwKICAidmVoaWNsZSIsCiAgInZlbHZldCIsCiAgInZlbmRvciIsCiAgInZlbnR1cmUiLAogICJ2ZW51ZSIsCiAgInZlcmIiLAogICJ2ZXJpZnkiLAogICJ2ZXJzaW9uIiwKICAidmVyeSIsCiAgInZlc3NlbCIsCiAgInZldGVyYW4iLAogICJ2aWFibGUiLAogICJ2aWJyYW50IiwKICAidmljaW91cyIsCiAgInZpY3RvcnkiLAogICJ2aWRlbyIsCiAgInZpZXciLAogICJ2aWxsYWdlIiwKICAidmludGFnZSIsCiAgInZpb2xpbiIsCiAgInZpcnR1YWwiLAogICJ2aXJ1cyIsCiAgInZpc2EiLAogICJ2aXNpdCIsCiAgInZpc3VhbCIsCiAgInZpdGFsIiwKICAidml2aWQiLAogICJ2b2NhbCIsCiAgInZvaWNlIiwKICAidm9pZCIsCiAgInZvbGNhbm8iLAogICJ2b2x1bWUiLAogICJ2b3RlIiwKICAidm95YWdlIiwKICAid2FnZSIsCiAgIndhZ29uIiwKICAid2FpdCIsCiAgIndhbGsiLAogICJ3YWxsIiwKICAid2FsbnV0IiwKICAid2FudCIsCiAgIndhcmZhcmUiLAogICJ3YXJtIiwKICAid2FycmlvciIsCiAgIndhc2giLAogICJ3YXNwIiwKICAid2FzdGUiLAogICJ3YXRlciIsCiAgIndhdmUiLAogICJ3YXkiLAogICJ3ZWFsdGgiLAogICJ3ZWFwb24iLAogICJ3ZWFyIiwKICAid2Vhc2VsIiwKICAid2VhdGhlciIsCiAgIndlYiIsCiAgIndlZGRpbmciLAogICJ3ZWVrZW5kIiwKICAid2VpcmQiLAogICJ3ZWxjb21lIiwKICAid2VzdCIsCiAgIndldCIsCiAgIndoYWxlIiwKICAid2hhdCIsCiAgIndoZWF0IiwKICAid2hlZWwiLAogICJ3aGVuIiwKICAid2hlcmUiLAogICJ3aGlwIiwKICAid2hpc3BlciIsCiAgIndpZGUiLAogICJ3aWR0aCIsCiAgIndpZmUiLAogICJ3aWxkIiwKICAid2lsbCIsCiAgIndpbiIsCiAgIndpbmRvdyIsCiAgIndpbmUiLAogICJ3aW5nIiwKICAid2luayIsCiAgIndpbm5lciIsCiAgIndpbnRlciIsCiAgIndpcmUiLAogICJ3aXNkb20iLAogICJ3aXNlIiwKICAid2lzaCIsCiAgIndpdG5lc3MiLAogICJ3b2xmIiwKICAid29tYW4iLAogICJ3b25kZXIiLAogICJ3b29kIiwKICAid29vbCIsCiAgIndvcmQiLAogICJ3b3JrIiwKICAid29ybGQiLAogICJ3b3JyeSIsCiAgIndvcnRoIiwKICAid3JhcCIsCiAgIndyZWNrIiwKICAid3Jlc3RsZSIsCiAgIndyaXN0IiwKICAid3JpdGUiLAogICJ3cm9uZyIsCiAgInlhcmQiLAogICJ5ZWFyIiwKICAieWVsbG93IiwKICAieW91IiwKICAieW91bmciLAogICJ5b3V0aCIsCiAgInplYnJhIiwKICAiemVybyIsCiAgInpvbmUiLAogICJ6b28iCl0KCn0se31dLDQ0OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIChwdWJsaWMpIENvbnN0cnVjdG9yCmZ1bmN0aW9uIEJpZ0ludGVnZXIoYSwgYiwgYykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCaWdJbnRlZ2VyKSkKICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihhLCBiLCBjKQoKICBpZiAoYSAhPSBudWxsKSB7CiAgICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIGEpIHRoaXMuZnJvbU51bWJlcihhLCBiLCBjKQogICAgZWxzZSBpZiAoYiA9PSBudWxsICYmICJzdHJpbmciICE9IHR5cGVvZiBhKSB0aGlzLmZyb21TdHJpbmcoYSwgMjU2KQogICAgZWxzZSB0aGlzLmZyb21TdHJpbmcoYSwgYikKICB9Cn0KCnZhciBwcm90byA9IEJpZ0ludGVnZXIucHJvdG90eXBlCgovLyBkdWNrLXR5cGVkIGlzQmlnSW50ZWdlcgpwcm90by5fX2JpZ2kgPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uCkJpZ0ludGVnZXIuaXNCaWdJbnRlZ2VyID0gZnVuY3Rpb24gKG9iaiwgY2hlY2tfdmVyKSB7CiAgcmV0dXJuIG9iaiAmJiBvYmouX19iaWdpICYmICghY2hlY2tfdmVyIHx8IG9iai5fX2JpZ2kgPT09IHByb3RvLl9fYmlnaSkKfQoKLy8gQml0cyBwZXIgZGlnaXQKdmFyIGRiaXRzCgovLyBhbTogQ29tcHV0ZSB3X2ogKz0gKHgqdGhpc19pKSwgcHJvcGFnYXRlIGNhcnJpZXMsCi8vIGMgaXMgaW5pdGlhbCBjYXJyeSwgcmV0dXJucyBmaW5hbCBjYXJyeS4KLy8gYyA8IDMqZHZhbHVlLCB4IDwgMipkdmFsdWUsIHRoaXNfaSA8IGR2YWx1ZQovLyBXZSBuZWVkIHRvIHNlbGVjdCB0aGUgZmFzdGVzdCBvbmUgdGhhdCB3b3JrcyBpbiB0aGlzIGVudmlyb25tZW50LgoKLy8gYW0xOiB1c2UgYSBzaW5nbGUgbXVsdCBhbmQgZGl2aWRlIHRvIGdldCB0aGUgaGlnaCBiaXRzLAovLyBtYXggZGlnaXQgYml0cyBzaG91bGQgYmUgMjYgYmVjYXVzZQovLyBtYXggaW50ZXJuYWwgdmFsdWUgPSAyKmR2YWx1ZV4yLTIqZHZhbHVlICg8IDJeNTMpCmZ1bmN0aW9uIGFtMShpLCB4LCB3LCBqLCBjLCBuKSB7CiAgd2hpbGUgKC0tbiA+PSAwKSB7CiAgICB2YXIgdiA9IHggKiB0aGlzW2krK10gKyB3W2pdICsgYwogICAgYyA9IE1hdGguZmxvb3IodiAvIDB4NDAwMDAwMCkKICAgIHdbaisrXSA9IHYgJiAweDNmZmZmZmYKICB9CiAgcmV0dXJuIGMKfQovLyBhbTIgYXZvaWRzIGEgYmlnIG11bHQtYW5kLWV4dHJhY3QgY29tcGxldGVseS4KLy8gTWF4IGRpZ2l0IGJpdHMgc2hvdWxkIGJlIDw9IDMwIGJlY2F1c2Ugd2UgZG8gYml0d2lzZSBvcHMKLy8gb24gdmFsdWVzIHVwIHRvIDIqaGR2YWx1ZV4yLWhkdmFsdWUtMSAoPCAyXjMxKQpmdW5jdGlvbiBhbTIoaSwgeCwgdywgaiwgYywgbikgewogIHZhciB4bCA9IHggJiAweDdmZmYsCiAgICB4aCA9IHggPj4gMTUKICB3aGlsZSAoLS1uID49IDApIHsKICAgIHZhciBsID0gdGhpc1tpXSAmIDB4N2ZmZgogICAgdmFyIGggPSB0aGlzW2krK10gPj4gMTUKICAgIHZhciBtID0geGggKiBsICsgaCAqIHhsCiAgICBsID0geGwgKiBsICsgKChtICYgMHg3ZmZmKSA8PCAxNSkgKyB3W2pdICsgKGMgJiAweDNmZmZmZmZmKQogICAgYyA9IChsID4+PiAzMCkgKyAobSA+Pj4gMTUpICsgeGggKiBoICsgKGMgPj4+IDMwKQogICAgd1tqKytdID0gbCAmIDB4M2ZmZmZmZmYKICB9CiAgcmV0dXJuIGMKfQovLyBBbHRlcm5hdGVseSwgc2V0IG1heCBkaWdpdCBiaXRzIHRvIDI4IHNpbmNlIHNvbWUKLy8gYnJvd3NlcnMgc2xvdyBkb3duIHdoZW4gZGVhbGluZyB3aXRoIDMyLWJpdCBudW1iZXJzLgpmdW5jdGlvbiBhbTMoaSwgeCwgdywgaiwgYywgbikgewogIHZhciB4bCA9IHggJiAweDNmZmYsCiAgICB4aCA9IHggPj4gMTQKICB3aGlsZSAoLS1uID49IDApIHsKICAgIHZhciBsID0gdGhpc1tpXSAmIDB4M2ZmZgogICAgdmFyIGggPSB0aGlzW2krK10gPj4gMTQKICAgIHZhciBtID0geGggKiBsICsgaCAqIHhsCiAgICBsID0geGwgKiBsICsgKChtICYgMHgzZmZmKSA8PCAxNCkgKyB3W2pdICsgYwogICAgYyA9IChsID4+IDI4KSArIChtID4+IDE0KSArIHhoICogaAogICAgd1tqKytdID0gbCAmIDB4ZmZmZmZmZgogIH0KICByZXR1cm4gYwp9CgovLyB3dGY/CkJpZ0ludGVnZXIucHJvdG90eXBlLmFtID0gYW0xCmRiaXRzID0gMjYKCkJpZ0ludGVnZXIucHJvdG90eXBlLkRCID0gZGJpdHMKQmlnSW50ZWdlci5wcm90b3R5cGUuRE0gPSAoKDEgPDwgZGJpdHMpIC0gMSkKdmFyIERWID0gQmlnSW50ZWdlci5wcm90b3R5cGUuRFYgPSAoMSA8PCBkYml0cykKCnZhciBCSV9GUCA9IDUyCkJpZ0ludGVnZXIucHJvdG90eXBlLkZWID0gTWF0aC5wb3coMiwgQklfRlApCkJpZ0ludGVnZXIucHJvdG90eXBlLkYxID0gQklfRlAgLSBkYml0cwpCaWdJbnRlZ2VyLnByb3RvdHlwZS5GMiA9IDIgKiBkYml0cyAtIEJJX0ZQCgovLyBEaWdpdCBjb252ZXJzaW9ucwp2YXIgQklfUk0gPSAiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Igp2YXIgQklfUkMgPSBuZXcgQXJyYXkoKQp2YXIgcnIsIHZ2CnJyID0gIjAiLmNoYXJDb2RlQXQoMCkKZm9yICh2diA9IDA7IHZ2IDw9IDk7ICsrdnYpIEJJX1JDW3JyKytdID0gdnYKcnIgPSAiYSIuY2hhckNvZGVBdCgwKQpmb3IgKHZ2ID0gMTA7IHZ2IDwgMzY7ICsrdnYpIEJJX1JDW3JyKytdID0gdnYKcnIgPSAiQSIuY2hhckNvZGVBdCgwKQpmb3IgKHZ2ID0gMTA7IHZ2IDwgMzY7ICsrdnYpIEJJX1JDW3JyKytdID0gdnYKCmZ1bmN0aW9uIGludDJjaGFyKG4pIHsKICByZXR1cm4gQklfUk0uY2hhckF0KG4pCn0KCmZ1bmN0aW9uIGludEF0KHMsIGkpIHsKICB2YXIgYyA9IEJJX1JDW3MuY2hhckNvZGVBdChpKV0KICByZXR1cm4gKGMgPT0gbnVsbCkgPyAtMSA6IGMKfQoKLy8gKHByb3RlY3RlZCkgY29weSB0aGlzIHRvIHIKZnVuY3Rpb24gYm5wQ29weVRvKHIpIHsKICBmb3IgKHZhciBpID0gdGhpcy50IC0gMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSB0aGlzW2ldCiAgci50ID0gdGhpcy50CiAgci5zID0gdGhpcy5zCn0KCi8vIChwcm90ZWN0ZWQpIHNldCBmcm9tIGludGVnZXIgdmFsdWUgeCwgLURWIDw9IHggPCBEVgpmdW5jdGlvbiBibnBGcm9tSW50KHgpIHsKICB0aGlzLnQgPSAxCiAgdGhpcy5zID0gKHggPCAwKSA/IC0xIDogMAogIGlmICh4ID4gMCkgdGhpc1swXSA9IHgKICBlbHNlIGlmICh4IDwgLTEpIHRoaXNbMF0gPSB4ICsgRFYKICBlbHNlIHRoaXMudCA9IDAKfQoKLy8gcmV0dXJuIGJpZ2ludCBpbml0aWFsaXplZCB0byB2YWx1ZQpmdW5jdGlvbiBuYnYoaSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHIuZnJvbUludChpKQogIHJldHVybiByCn0KCi8vIChwcm90ZWN0ZWQpIHNldCBmcm9tIHN0cmluZyBhbmQgcmFkaXgKZnVuY3Rpb24gYm5wRnJvbVN0cmluZyhzLCBiKSB7CiAgdmFyIHNlbGYgPSB0aGlzCgogIHZhciBrCiAgaWYgKGIgPT0gMTYpIGsgPSA0CiAgZWxzZSBpZiAoYiA9PSA4KSBrID0gMwogIGVsc2UgaWYgKGIgPT0gMjU2KSBrID0gODsgLy8gYnl0ZSBhcnJheQogIGVsc2UgaWYgKGIgPT0gMikgayA9IDEKICBlbHNlIGlmIChiID09IDMyKSBrID0gNQogIGVsc2UgaWYgKGIgPT0gNCkgayA9IDIKICBlbHNlIHsKICAgIHNlbGYuZnJvbVJhZGl4KHMsIGIpCiAgICByZXR1cm4KICB9CiAgc2VsZi50ID0gMAogIHNlbGYucyA9IDAKICB2YXIgaSA9IHMubGVuZ3RoLAogICAgbWkgPSBmYWxzZSwKICAgIHNoID0gMAogIHdoaWxlICgtLWkgPj0gMCkgewogICAgdmFyIHggPSAoayA9PSA4KSA/IHNbaV0gJiAweGZmIDogaW50QXQocywgaSkKICAgIGlmICh4IDwgMCkgewogICAgICBpZiAocy5jaGFyQXQoaSkgPT0gIi0iKSBtaSA9IHRydWUKICAgICAgY29udGludWUKICAgIH0KICAgIG1pID0gZmFsc2UKICAgIGlmIChzaCA9PSAwKQogICAgICBzZWxmW3NlbGYudCsrXSA9IHgKICAgIGVsc2UgaWYgKHNoICsgayA+IHNlbGYuREIpIHsKICAgICAgc2VsZltzZWxmLnQgLSAxXSB8PSAoeCAmICgoMSA8PCAoc2VsZi5EQiAtIHNoKSkgLSAxKSkgPDwgc2gKICAgICAgc2VsZltzZWxmLnQrK10gPSAoeCA+PiAoc2VsZi5EQiAtIHNoKSkKICAgIH0gZWxzZQogICAgICBzZWxmW3NlbGYudCAtIDFdIHw9IHggPDwgc2gKICAgIHNoICs9IGsKICAgIGlmIChzaCA+PSBzZWxmLkRCKSBzaCAtPSBzZWxmLkRCCiAgfQogIGlmIChrID09IDggJiYgKHNbMF0gJiAweDgwKSAhPSAwKSB7CiAgICBzZWxmLnMgPSAtMQogICAgaWYgKHNoID4gMCkgc2VsZltzZWxmLnQgLSAxXSB8PSAoKDEgPDwgKHNlbGYuREIgLSBzaCkpIC0gMSkgPDwgc2gKICB9CiAgc2VsZi5jbGFtcCgpCiAgaWYgKG1pKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8oc2VsZiwgc2VsZikKfQoKLy8gKHByb3RlY3RlZCkgY2xhbXAgb2ZmIGV4Y2VzcyBoaWdoIHdvcmRzCmZ1bmN0aW9uIGJucENsYW1wKCkgewogIHZhciBjID0gdGhpcy5zICYgdGhpcy5ETQogIHdoaWxlICh0aGlzLnQgPiAwICYmIHRoaXNbdGhpcy50IC0gMV0gPT0gYyktLXRoaXMudAp9CgovLyAocHVibGljKSByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIGluIGdpdmVuIHJhZGl4CmZ1bmN0aW9uIGJuVG9TdHJpbmcoYikgewogIHZhciBzZWxmID0gdGhpcwogIGlmIChzZWxmLnMgPCAwKSByZXR1cm4gIi0iICsgc2VsZi5uZWdhdGUoKQogICAgLnRvU3RyaW5nKGIpCiAgdmFyIGsKICBpZiAoYiA9PSAxNikgayA9IDQKICBlbHNlIGlmIChiID09IDgpIGsgPSAzCiAgZWxzZSBpZiAoYiA9PSAyKSBrID0gMQogIGVsc2UgaWYgKGIgPT0gMzIpIGsgPSA1CiAgZWxzZSBpZiAoYiA9PSA0KSBrID0gMgogIGVsc2UgcmV0dXJuIHNlbGYudG9SYWRpeChiKQogIHZhciBrbSA9ICgxIDw8IGspIC0gMSwKICAgIGQsIG0gPSBmYWxzZSwKICAgIHIgPSAiIiwKICAgIGkgPSBzZWxmLnQKICB2YXIgcCA9IHNlbGYuREIgLSAoaSAqIHNlbGYuREIpICUgawogIGlmIChpLS0gPiAwKSB7CiAgICBpZiAocCA8IHNlbGYuREIgJiYgKGQgPSBzZWxmW2ldID4+IHApID4gMCkgewogICAgICBtID0gdHJ1ZQogICAgICByID0gaW50MmNoYXIoZCkKICAgIH0KICAgIHdoaWxlIChpID49IDApIHsKICAgICAgaWYgKHAgPCBrKSB7CiAgICAgICAgZCA9IChzZWxmW2ldICYgKCgxIDw8IHApIC0gMSkpIDw8IChrIC0gcCkKICAgICAgICBkIHw9IHNlbGZbLS1pXSA+PiAocCArPSBzZWxmLkRCIC0gaykKICAgICAgfSBlbHNlIHsKICAgICAgICBkID0gKHNlbGZbaV0gPj4gKHAgLT0gaykpICYga20KICAgICAgICBpZiAocCA8PSAwKSB7CiAgICAgICAgICBwICs9IHNlbGYuREIKICAgICAgICAgIC0taQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZCA+IDApIG0gPSB0cnVlCiAgICAgIGlmIChtKSByICs9IGludDJjaGFyKGQpCiAgICB9CiAgfQogIHJldHVybiBtID8gciA6ICIwIgp9CgovLyAocHVibGljKSAtdGhpcwpmdW5jdGlvbiBibk5lZ2F0ZSgpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8odGhpcywgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB8dGhpc3wKZnVuY3Rpb24gYm5BYnMoKSB7CiAgcmV0dXJuICh0aGlzLnMgPCAwKSA/IHRoaXMubmVnYXRlKCkgOiB0aGlzCn0KCi8vIChwdWJsaWMpIHJldHVybiArIGlmIHRoaXMgPiBhLCAtIGlmIHRoaXMgPCBhLCAwIGlmIGVxdWFsCmZ1bmN0aW9uIGJuQ29tcGFyZVRvKGEpIHsKICB2YXIgciA9IHRoaXMucyAtIGEucwogIGlmIChyICE9IDApIHJldHVybiByCiAgdmFyIGkgPSB0aGlzLnQKICByID0gaSAtIGEudAogIGlmIChyICE9IDApIHJldHVybiAodGhpcy5zIDwgMCkgPyAtciA6IHIKICB3aGlsZSAoLS1pID49IDApCiAgICBpZiAoKHIgPSB0aGlzW2ldIC0gYVtpXSkgIT0gMCkgcmV0dXJuIHIKICByZXR1cm4gMAp9CgovLyByZXR1cm5zIGJpdCBsZW5ndGggb2YgdGhlIGludGVnZXIgeApmdW5jdGlvbiBuYml0cyh4KSB7CiAgdmFyIHIgPSAxLAogICAgdAogIGlmICgodCA9IHggPj4+IDE2KSAhPSAwKSB7CiAgICB4ID0gdAogICAgciArPSAxNgogIH0KICBpZiAoKHQgPSB4ID4+IDgpICE9IDApIHsKICAgIHggPSB0CiAgICByICs9IDgKICB9CiAgaWYgKCh0ID0geCA+PiA0KSAhPSAwKSB7CiAgICB4ID0gdAogICAgciArPSA0CiAgfQogIGlmICgodCA9IHggPj4gMikgIT0gMCkgewogICAgeCA9IHQKICAgIHIgKz0gMgogIH0KICBpZiAoKHQgPSB4ID4+IDEpICE9IDApIHsKICAgIHggPSB0CiAgICByICs9IDEKICB9CiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgcmV0dXJuIHRoZSBudW1iZXIgb2YgYml0cyBpbiAidGhpcyIKZnVuY3Rpb24gYm5CaXRMZW5ndGgoKSB7CiAgaWYgKHRoaXMudCA8PSAwKSByZXR1cm4gMAogIHJldHVybiB0aGlzLkRCICogKHRoaXMudCAtIDEpICsgbmJpdHModGhpc1t0aGlzLnQgLSAxXSBeICh0aGlzLnMgJiB0aGlzLkRNKSkKfQoKLy8gKHB1YmxpYykgcmV0dXJuIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gInRoaXMiCmZ1bmN0aW9uIGJuQnl0ZUxlbmd0aCgpIHsKICByZXR1cm4gdGhpcy5iaXRMZW5ndGgoKSA+PiAzCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIDw8IG4qREIKZnVuY3Rpb24gYm5wRExTaGlmdFRvKG4sIHIpIHsKICB2YXIgaQogIGZvciAoaSA9IHRoaXMudCAtIDE7IGkgPj0gMDsgLS1pKSByW2kgKyBuXSA9IHRoaXNbaV0KICBmb3IgKGkgPSBuIC0gMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSAwCiAgci50ID0gdGhpcy50ICsgbgogIHIucyA9IHRoaXMucwp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyA+PiBuKkRCCmZ1bmN0aW9uIGJucERSU2hpZnRUbyhuLCByKSB7CiAgZm9yICh2YXIgaSA9IG47IGkgPCB0aGlzLnQ7ICsraSkgcltpIC0gbl0gPSB0aGlzW2ldCiAgci50ID0gTWF0aC5tYXgodGhpcy50IC0gbiwgMCkKICByLnMgPSB0aGlzLnMKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgPDwgbgpmdW5jdGlvbiBibnBMU2hpZnRUbyhuLCByKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgdmFyIGJzID0gbiAlIHNlbGYuREIKICB2YXIgY2JzID0gc2VsZi5EQiAtIGJzCiAgdmFyIGJtID0gKDEgPDwgY2JzKSAtIDEKICB2YXIgZHMgPSBNYXRoLmZsb29yKG4gLyBzZWxmLkRCKSwKICAgIGMgPSAoc2VsZi5zIDw8IGJzKSAmIHNlbGYuRE0sCiAgICBpCiAgZm9yIChpID0gc2VsZi50IC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgIHJbaSArIGRzICsgMV0gPSAoc2VsZltpXSA+PiBjYnMpIHwgYwogICAgYyA9IChzZWxmW2ldICYgYm0pIDw8IGJzCiAgfQogIGZvciAoaSA9IGRzIC0gMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSAwCiAgcltkc10gPSBjCiAgci50ID0gc2VsZi50ICsgZHMgKyAxCiAgci5zID0gc2VsZi5zCiAgci5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzID4+IG4KZnVuY3Rpb24gYm5wUlNoaWZ0VG8obiwgcikgewogIHZhciBzZWxmID0gdGhpcwogIHIucyA9IHNlbGYucwogIHZhciBkcyA9IE1hdGguZmxvb3IobiAvIHNlbGYuREIpCiAgaWYgKGRzID49IHNlbGYudCkgewogICAgci50ID0gMAogICAgcmV0dXJuCiAgfQogIHZhciBicyA9IG4gJSBzZWxmLkRCCiAgdmFyIGNicyA9IHNlbGYuREIgLSBicwogIHZhciBibSA9ICgxIDw8IGJzKSAtIDEKICByWzBdID0gc2VsZltkc10gPj4gYnMKICBmb3IgKHZhciBpID0gZHMgKyAxOyBpIDwgc2VsZi50OyArK2kpIHsKICAgIHJbaSAtIGRzIC0gMV0gfD0gKHNlbGZbaV0gJiBibSkgPDwgY2JzCiAgICByW2kgLSBkc10gPSBzZWxmW2ldID4+IGJzCiAgfQogIGlmIChicyA+IDApIHJbc2VsZi50IC0gZHMgLSAxXSB8PSAoc2VsZi5zICYgYm0pIDw8IGNicwogIHIudCA9IHNlbGYudCAtIGRzCiAgci5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIC0gYQpmdW5jdGlvbiBibnBTdWJUbyhhLCByKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgdmFyIGkgPSAwLAogICAgYyA9IDAsCiAgICBtID0gTWF0aC5taW4oYS50LCBzZWxmLnQpCiAgd2hpbGUgKGkgPCBtKSB7CiAgICBjICs9IHNlbGZbaV0gLSBhW2ldCiAgICByW2krK10gPSBjICYgc2VsZi5ETQogICAgYyA+Pj0gc2VsZi5EQgogIH0KICBpZiAoYS50IDwgc2VsZi50KSB7CiAgICBjIC09IGEucwogICAgd2hpbGUgKGkgPCBzZWxmLnQpIHsKICAgICAgYyArPSBzZWxmW2ldCiAgICAgIHJbaSsrXSA9IGMgJiBzZWxmLkRNCiAgICAgIGMgPj49IHNlbGYuREIKICAgIH0KICAgIGMgKz0gc2VsZi5zCiAgfSBlbHNlIHsKICAgIGMgKz0gc2VsZi5zCiAgICB3aGlsZSAoaSA8IGEudCkgewogICAgICBjIC09IGFbaV0KICAgICAgcltpKytdID0gYyAmIHNlbGYuRE0KICAgICAgYyA+Pj0gc2VsZi5EQgogICAgfQogICAgYyAtPSBhLnMKICB9CiAgci5zID0gKGMgPCAwKSA/IC0xIDogMAogIGlmIChjIDwgLTEpIHJbaSsrXSA9IHNlbGYuRFYgKyBjCiAgZWxzZSBpZiAoYyA+IDApIHJbaSsrXSA9IGMKICByLnQgPSBpCiAgci5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzICogYSwgciAhPSB0aGlzLGEgKEhBQyAxNC4xMikKLy8gInRoaXMiIHNob3VsZCBiZSB0aGUgbGFyZ2VyIG9uZSBpZiBhcHByb3ByaWF0ZS4KZnVuY3Rpb24gYm5wTXVsdGlwbHlUbyhhLCByKSB7CiAgdmFyIHggPSB0aGlzLmFicygpLAogICAgeSA9IGEuYWJzKCkKICB2YXIgaSA9IHgudAogIHIudCA9IGkgKyB5LnQKICB3aGlsZSAoLS1pID49IDApIHJbaV0gPSAwCiAgZm9yIChpID0gMDsgaSA8IHkudDsgKytpKSByW2kgKyB4LnRdID0geC5hbSgwLCB5W2ldLCByLCBpLCAwLCB4LnQpCiAgci5zID0gMAogIHIuY2xhbXAoKQogIGlmICh0aGlzLnMgIT0gYS5zKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8ociwgcikKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXNeMiwgciAhPSB0aGlzIChIQUMgMTQuMTYpCmZ1bmN0aW9uIGJucFNxdWFyZVRvKHIpIHsKICB2YXIgeCA9IHRoaXMuYWJzKCkKICB2YXIgaSA9IHIudCA9IDIgKiB4LnQKICB3aGlsZSAoLS1pID49IDApIHJbaV0gPSAwCiAgZm9yIChpID0gMDsgaSA8IHgudCAtIDE7ICsraSkgewogICAgdmFyIGMgPSB4LmFtKGksIHhbaV0sIHIsIDIgKiBpLCAwLCAxKQogICAgaWYgKChyW2kgKyB4LnRdICs9IHguYW0oaSArIDEsIDIgKiB4W2ldLCByLCAyICogaSArIDEsIGMsIHgudCAtIGkgLSAxKSkgPj0geC5EVikgewogICAgICByW2kgKyB4LnRdIC09IHguRFYKICAgICAgcltpICsgeC50ICsgMV0gPSAxCiAgICB9CiAgfQogIGlmIChyLnQgPiAwKSByW3IudCAtIDFdICs9IHguYW0oaSwgeFtpXSwgciwgMiAqIGksIDAsIDEpCiAgci5zID0gMAogIHIuY2xhbXAoKQp9CgovLyAocHJvdGVjdGVkKSBkaXZpZGUgdGhpcyBieSBtLCBxdW90aWVudCBhbmQgcmVtYWluZGVyIHRvIHEsIHIgKEhBQyAxNC4yMCkKLy8gciAhPSBxLCB0aGlzICE9IG0uICBxIG9yIHIgbWF5IGJlIG51bGwuCmZ1bmN0aW9uIGJucERpdlJlbVRvKG0sIHEsIHIpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB2YXIgcG0gPSBtLmFicygpCiAgaWYgKHBtLnQgPD0gMCkgcmV0dXJuCiAgdmFyIHB0ID0gc2VsZi5hYnMoKQogIGlmIChwdC50IDwgcG0udCkgewogICAgaWYgKHEgIT0gbnVsbCkgcS5mcm9tSW50KDApCiAgICBpZiAociAhPSBudWxsKSBzZWxmLmNvcHlUbyhyKQogICAgcmV0dXJuCiAgfQogIGlmIChyID09IG51bGwpIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdmFyIHkgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgdHMgPSBzZWxmLnMsCiAgICBtcyA9IG0ucwogIHZhciBuc2ggPSBzZWxmLkRCIC0gbmJpdHMocG1bcG0udCAtIDFdKTsgLy8gbm9ybWFsaXplIG1vZHVsdXMKICBpZiAobnNoID4gMCkgewogICAgcG0ubFNoaWZ0VG8obnNoLCB5KQogICAgcHQubFNoaWZ0VG8obnNoLCByKQogIH0gZWxzZSB7CiAgICBwbS5jb3B5VG8oeSkKICAgIHB0LmNvcHlUbyhyKQogIH0KICB2YXIgeXMgPSB5LnQKICB2YXIgeTAgPSB5W3lzIC0gMV0KICBpZiAoeTAgPT0gMCkgcmV0dXJuCiAgdmFyIHl0ID0geTAgKiAoMSA8PCBzZWxmLkYxKSArICgoeXMgPiAxKSA/IHlbeXMgLSAyXSA+PiBzZWxmLkYyIDogMCkKICB2YXIgZDEgPSBzZWxmLkZWIC8geXQsCiAgICBkMiA9ICgxIDw8IHNlbGYuRjEpIC8geXQsCiAgICBlID0gMSA8PCBzZWxmLkYyCiAgdmFyIGkgPSByLnQsCiAgICBqID0gaSAtIHlzLAogICAgdCA9IChxID09IG51bGwpID8gbmV3IEJpZ0ludGVnZXIoKSA6IHEKICB5LmRsU2hpZnRUbyhqLCB0KQogIGlmIChyLmNvbXBhcmVUbyh0KSA+PSAwKSB7CiAgICByW3IudCsrXSA9IDEKICAgIHIuc3ViVG8odCwgcikKICB9CiAgQmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKHlzLCB0KQogIHQuc3ViVG8oeSwgeSk7IC8vICJuZWdhdGl2ZSIgeSBzbyB3ZSBjYW4gcmVwbGFjZSBzdWIgd2l0aCBhbSBsYXRlcgogIHdoaWxlICh5LnQgPCB5cykgeVt5LnQrK10gPSAwCiAgd2hpbGUgKC0taiA+PSAwKSB7CiAgICAvLyBFc3RpbWF0ZSBxdW90aWVudCBkaWdpdAogICAgdmFyIHFkID0gKHJbLS1pXSA9PSB5MCkgPyBzZWxmLkRNIDogTWF0aC5mbG9vcihyW2ldICogZDEgKyAocltpIC0gMV0gKyBlKSAqIGQyKQogICAgaWYgKChyW2ldICs9IHkuYW0oMCwgcWQsIHIsIGosIDAsIHlzKSkgPCBxZCkgeyAvLyBUcnkgaXQgb3V0CiAgICAgIHkuZGxTaGlmdFRvKGosIHQpCiAgICAgIHIuc3ViVG8odCwgcikKICAgICAgd2hpbGUgKHJbaV0gPCAtLXFkKSByLnN1YlRvKHQsIHIpCiAgICB9CiAgfQogIGlmIChxICE9IG51bGwpIHsKICAgIHIuZHJTaGlmdFRvKHlzLCBxKQogICAgaWYgKHRzICE9IG1zKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8ocSwgcSkKICB9CiAgci50ID0geXMKICByLmNsYW1wKCkKICBpZiAobnNoID4gMCkgci5yU2hpZnRUbyhuc2gsIHIpOyAvLyBEZW5vcm1hbGl6ZSByZW1haW5kZXIKICBpZiAodHMgPCAwKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8ociwgcikKfQoKLy8gKHB1YmxpYykgdGhpcyBtb2QgYQpmdW5jdGlvbiBibk1vZChhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5hYnMoKQogICAgLmRpdlJlbVRvKGEsIG51bGwsIHIpCiAgaWYgKHRoaXMucyA8IDAgJiYgci5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSA+IDApIGEuc3ViVG8ociwgcikKICByZXR1cm4gcgp9CgovLyBNb2R1bGFyIHJlZHVjdGlvbiB1c2luZyAiY2xhc3NpYyIgYWxnb3JpdGhtCmZ1bmN0aW9uIENsYXNzaWMobSkgewogIHRoaXMubSA9IG0KfQoKZnVuY3Rpb24gY0NvbnZlcnQoeCkgewogIGlmICh4LnMgPCAwIHx8IHguY29tcGFyZVRvKHRoaXMubSkgPj0gMCkgcmV0dXJuIHgubW9kKHRoaXMubSkKICBlbHNlIHJldHVybiB4Cn0KCmZ1bmN0aW9uIGNSZXZlcnQoeCkgewogIHJldHVybiB4Cn0KCmZ1bmN0aW9uIGNSZWR1Y2UoeCkgewogIHguZGl2UmVtVG8odGhpcy5tLCBudWxsLCB4KQp9CgpmdW5jdGlvbiBjTXVsVG8oeCwgeSwgcikgewogIHgubXVsdGlwbHlUbyh5LCByKQogIHRoaXMucmVkdWNlKHIpCn0KCmZ1bmN0aW9uIGNTcXJUbyh4LCByKSB7CiAgeC5zcXVhcmVUbyhyKQogIHRoaXMucmVkdWNlKHIpCn0KCkNsYXNzaWMucHJvdG90eXBlLmNvbnZlcnQgPSBjQ29udmVydApDbGFzc2ljLnByb3RvdHlwZS5yZXZlcnQgPSBjUmV2ZXJ0CkNsYXNzaWMucHJvdG90eXBlLnJlZHVjZSA9IGNSZWR1Y2UKQ2xhc3NpYy5wcm90b3R5cGUubXVsVG8gPSBjTXVsVG8KQ2xhc3NpYy5wcm90b3R5cGUuc3FyVG8gPSBjU3FyVG8KCi8vIChwcm90ZWN0ZWQpIHJldHVybiAiLTEvdGhpcyAlIDJeREIiOyB1c2VmdWwgZm9yIE1vbnQuIHJlZHVjdGlvbgovLyBqdXN0aWZpY2F0aW9uOgovLyAgICAgICAgIHh5ID09IDEgKG1vZCBtKQovLyAgICAgICAgIHh5ID0gIDEra20KLy8gICB4eSgyLXh5KSA9ICgxK2ttKSgxLWttKQovLyB4W3koMi14eSldID0gMS1rXjJtXjIKLy8geFt5KDIteHkpXSA9PSAxIChtb2QgbV4yKQovLyBpZiB5IGlzIDEveCBtb2QgbSwgdGhlbiB5KDIteHkpIGlzIDEveCBtb2QgbV4yCi8vIHNob3VsZCByZWR1Y2UgeCBhbmQgeSgyLXh5KSBieSBtXjIgYXQgZWFjaCBzdGVwIHRvIGtlZXAgc2l6ZSBib3VuZGVkLgovLyBKUyBtdWx0aXBseSAib3ZlcmZsb3dzIiBkaWZmZXJlbnRseSBmcm9tIEMvQysrLCBzbyBjYXJlIGlzIG5lZWRlZCBoZXJlLgpmdW5jdGlvbiBibnBJbnZEaWdpdCgpIHsKICBpZiAodGhpcy50IDwgMSkgcmV0dXJuIDAKICB2YXIgeCA9IHRoaXNbMF0KICBpZiAoKHggJiAxKSA9PSAwKSByZXR1cm4gMAogIHZhciB5ID0geCAmIDM7IC8vIHkgPT0gMS94IG1vZCAyXjIKICB5ID0gKHkgKiAoMiAtICh4ICYgMHhmKSAqIHkpKSAmIDB4ZjsgLy8geSA9PSAxL3ggbW9kIDJeNAogIHkgPSAoeSAqICgyIC0gKHggJiAweGZmKSAqIHkpKSAmIDB4ZmY7IC8vIHkgPT0gMS94IG1vZCAyXjgKICB5ID0gKHkgKiAoMiAtICgoKHggJiAweGZmZmYpICogeSkgJiAweGZmZmYpKSkgJiAweGZmZmY7IC8vIHkgPT0gMS94IG1vZCAyXjE2CiAgLy8gbGFzdCBzdGVwIC0gY2FsY3VsYXRlIGludmVyc2UgbW9kIERWIGRpcmVjdGx5CiAgLy8gYXNzdW1lcyAxNiA8IERCIDw9IDMyIGFuZCBhc3N1bWVzIGFiaWxpdHkgdG8gaGFuZGxlIDQ4LWJpdCBpbnRzCiAgeSA9ICh5ICogKDIgLSB4ICogeSAlIHRoaXMuRFYpKSAlIHRoaXMuRFY7IC8vIHkgPT0gMS94IG1vZCAyXmRiaXRzCiAgLy8gd2UgcmVhbGx5IHdhbnQgdGhlIG5lZ2F0aXZlIGludmVyc2UsIGFuZCAtRFYgPCB5IDwgRFYKICByZXR1cm4gKHkgPiAwKSA/IHRoaXMuRFYgLSB5IDogLXkKfQoKLy8gTW9udGdvbWVyeSByZWR1Y3Rpb24KZnVuY3Rpb24gTW9udGdvbWVyeShtKSB7CiAgdGhpcy5tID0gbQogIHRoaXMubXAgPSBtLmludkRpZ2l0KCkKICB0aGlzLm1wbCA9IHRoaXMubXAgJiAweDdmZmYKICB0aGlzLm1waCA9IHRoaXMubXAgPj4gMTUKICB0aGlzLnVtID0gKDEgPDwgKG0uREIgLSAxNSkpIC0gMQogIHRoaXMubXQyID0gMiAqIG0udAp9CgovLyB4UiBtb2QgbQpmdW5jdGlvbiBtb250Q29udmVydCh4KSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgeC5hYnMoKQogICAgLmRsU2hpZnRUbyh0aGlzLm0udCwgcikKICByLmRpdlJlbVRvKHRoaXMubSwgbnVsbCwgcikKICBpZiAoeC5zIDwgMCAmJiByLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLlpFUk8pID4gMCkgdGhpcy5tLnN1YlRvKHIsIHIpCiAgcmV0dXJuIHIKfQoKLy8geC9SIG1vZCBtCmZ1bmN0aW9uIG1vbnRSZXZlcnQoeCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHguY29weVRvKHIpCiAgdGhpcy5yZWR1Y2UocikKICByZXR1cm4gcgp9CgovLyB4ID0geC9SIG1vZCBtIChIQUMgMTQuMzIpCmZ1bmN0aW9uIG1vbnRSZWR1Y2UoeCkgewogIHdoaWxlICh4LnQgPD0gdGhpcy5tdDIpIC8vIHBhZCB4IHNvIGFtIGhhcyBlbm91Z2ggcm9vbSBsYXRlcgogICAgeFt4LnQrK10gPSAwCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm0udDsgKytpKSB7CiAgICAvLyBmYXN0ZXIgd2F5IG9mIGNhbGN1bGF0aW5nIHUwID0geFtpXSptcCBtb2QgRFYKICAgIHZhciBqID0geFtpXSAmIDB4N2ZmZgogICAgdmFyIHUwID0gKGogKiB0aGlzLm1wbCArICgoKGogKiB0aGlzLm1waCArICh4W2ldID4+IDE1KSAqIHRoaXMubXBsKSAmIHRoaXMudW0pIDw8IDE1KSkgJiB4LkRNCiAgICAvLyB1c2UgYW0gdG8gY29tYmluZSB0aGUgbXVsdGlwbHktc2hpZnQtYWRkIGludG8gb25lIGNhbGwKICAgIGogPSBpICsgdGhpcy5tLnQKICAgIHhbal0gKz0gdGhpcy5tLmFtKDAsIHUwLCB4LCBpLCAwLCB0aGlzLm0udCkKICAgIC8vIHByb3BhZ2F0ZSBjYXJyeQogICAgd2hpbGUgKHhbal0gPj0geC5EVikgewogICAgICB4W2pdIC09IHguRFYKICAgICAgeFsrK2pdKysKICAgIH0KICB9CiAgeC5jbGFtcCgpCiAgeC5kclNoaWZ0VG8odGhpcy5tLnQsIHgpCiAgaWYgKHguY29tcGFyZVRvKHRoaXMubSkgPj0gMCkgeC5zdWJUbyh0aGlzLm0sIHgpCn0KCi8vIHIgPSAieF4yL1IgbW9kIG0iOyB4ICE9IHIKZnVuY3Rpb24gbW9udFNxclRvKHgsIHIpIHsKICB4LnNxdWFyZVRvKHIpCiAgdGhpcy5yZWR1Y2UocikKfQoKLy8gciA9ICJ4eS9SIG1vZCBtIjsgeCx5ICE9IHIKZnVuY3Rpb24gbW9udE11bFRvKHgsIHksIHIpIHsKICB4Lm11bHRpcGx5VG8oeSwgcikKICB0aGlzLnJlZHVjZShyKQp9CgpNb250Z29tZXJ5LnByb3RvdHlwZS5jb252ZXJ0ID0gbW9udENvbnZlcnQKTW9udGdvbWVyeS5wcm90b3R5cGUucmV2ZXJ0ID0gbW9udFJldmVydApNb250Z29tZXJ5LnByb3RvdHlwZS5yZWR1Y2UgPSBtb250UmVkdWNlCk1vbnRnb21lcnkucHJvdG90eXBlLm11bFRvID0gbW9udE11bFRvCk1vbnRnb21lcnkucHJvdG90eXBlLnNxclRvID0gbW9udFNxclRvCgovLyAocHJvdGVjdGVkKSB0cnVlIGlmZiB0aGlzIGlzIGV2ZW4KZnVuY3Rpb24gYm5wSXNFdmVuKCkgewogIHJldHVybiAoKHRoaXMudCA+IDApID8gKHRoaXNbMF0gJiAxKSA6IHRoaXMucykgPT0gMAp9CgovLyAocHJvdGVjdGVkKSB0aGlzXmUsIGUgPCAyXjMyLCBkb2luZyBzcXIgYW5kIG11bCB3aXRoICJyIiAoSEFDIDE0Ljc5KQpmdW5jdGlvbiBibnBFeHAoZSwgeikgewogIGlmIChlID4gMHhmZmZmZmZmZiB8fCBlIDwgMSkgcmV0dXJuIEJpZ0ludGVnZXIuT05FCiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgcjIgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgZyA9IHouY29udmVydCh0aGlzKSwKICAgIGkgPSBuYml0cyhlKSAtIDEKICBnLmNvcHlUbyhyKQogIHdoaWxlICgtLWkgPj0gMCkgewogICAgei5zcXJUbyhyLCByMikKICAgIGlmICgoZSAmICgxIDw8IGkpKSA+IDApIHoubXVsVG8ocjIsIGcsIHIpCiAgICBlbHNlIHsKICAgICAgdmFyIHQgPSByCiAgICAgIHIgPSByMgogICAgICByMiA9IHQKICAgIH0KICB9CiAgcmV0dXJuIHoucmV2ZXJ0KHIpCn0KCi8vIChwdWJsaWMpIHRoaXNeZSAlIG0sIDAgPD0gZSA8IDJeMzIKZnVuY3Rpb24gYm5Nb2RQb3dJbnQoZSwgbSkgewogIHZhciB6CiAgaWYgKGUgPCAyNTYgfHwgbS5pc0V2ZW4oKSkgeiA9IG5ldyBDbGFzc2ljKG0pCiAgZWxzZSB6ID0gbmV3IE1vbnRnb21lcnkobSkKICByZXR1cm4gdGhpcy5leHAoZSwgeikKfQoKLy8gcHJvdGVjdGVkCnByb3RvLmNvcHlUbyA9IGJucENvcHlUbwpwcm90by5mcm9tSW50ID0gYm5wRnJvbUludApwcm90by5mcm9tU3RyaW5nID0gYm5wRnJvbVN0cmluZwpwcm90by5jbGFtcCA9IGJucENsYW1wCnByb3RvLmRsU2hpZnRUbyA9IGJucERMU2hpZnRUbwpwcm90by5kclNoaWZ0VG8gPSBibnBEUlNoaWZ0VG8KcHJvdG8ubFNoaWZ0VG8gPSBibnBMU2hpZnRUbwpwcm90by5yU2hpZnRUbyA9IGJucFJTaGlmdFRvCnByb3RvLnN1YlRvID0gYm5wU3ViVG8KcHJvdG8ubXVsdGlwbHlUbyA9IGJucE11bHRpcGx5VG8KcHJvdG8uc3F1YXJlVG8gPSBibnBTcXVhcmVUbwpwcm90by5kaXZSZW1UbyA9IGJucERpdlJlbVRvCnByb3RvLmludkRpZ2l0ID0gYm5wSW52RGlnaXQKcHJvdG8uaXNFdmVuID0gYm5wSXNFdmVuCnByb3RvLmV4cCA9IGJucEV4cAoKLy8gcHVibGljCnByb3RvLnRvU3RyaW5nID0gYm5Ub1N0cmluZwpwcm90by5uZWdhdGUgPSBibk5lZ2F0ZQpwcm90by5hYnMgPSBibkFicwpwcm90by5jb21wYXJlVG8gPSBibkNvbXBhcmVUbwpwcm90by5iaXRMZW5ndGggPSBibkJpdExlbmd0aApwcm90by5ieXRlTGVuZ3RoID0gYm5CeXRlTGVuZ3RoCnByb3RvLm1vZCA9IGJuTW9kCnByb3RvLm1vZFBvd0ludCA9IGJuTW9kUG93SW50CgovLyAocHVibGljKQpmdW5jdGlvbiBibkNsb25lKCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuY29weVRvKHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgcmV0dXJuIHZhbHVlIGFzIGludGVnZXIKZnVuY3Rpb24gYm5JbnRWYWx1ZSgpIHsKICBpZiAodGhpcy5zIDwgMCkgewogICAgaWYgKHRoaXMudCA9PSAxKSByZXR1cm4gdGhpc1swXSAtIHRoaXMuRFYKICAgIGVsc2UgaWYgKHRoaXMudCA9PSAwKSByZXR1cm4gLTEKICB9IGVsc2UgaWYgKHRoaXMudCA9PSAxKSByZXR1cm4gdGhpc1swXQogIGVsc2UgaWYgKHRoaXMudCA9PSAwKSByZXR1cm4gMAogIC8vIGFzc3VtZXMgMTYgPCBEQiA8IDMyCiAgcmV0dXJuICgodGhpc1sxXSAmICgoMSA8PCAoMzIgLSB0aGlzLkRCKSkgLSAxKSkgPDwgdGhpcy5EQikgfCB0aGlzWzBdCn0KCi8vIChwdWJsaWMpIHJldHVybiB2YWx1ZSBhcyBieXRlCmZ1bmN0aW9uIGJuQnl0ZVZhbHVlKCkgewogIHJldHVybiAodGhpcy50ID09IDApID8gdGhpcy5zIDogKHRoaXNbMF0gPDwgMjQpID4+IDI0Cn0KCi8vIChwdWJsaWMpIHJldHVybiB2YWx1ZSBhcyBzaG9ydCAoYXNzdW1lcyBEQj49MTYpCmZ1bmN0aW9uIGJuU2hvcnRWYWx1ZSgpIHsKICByZXR1cm4gKHRoaXMudCA9PSAwKSA/IHRoaXMucyA6ICh0aGlzWzBdIDw8IDE2KSA+PiAxNgp9CgovLyAocHJvdGVjdGVkKSByZXR1cm4geCBzLnQuIHJeeCA8IERWCmZ1bmN0aW9uIGJucENodW5rU2l6ZShyKSB7CiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5MTjIgKiB0aGlzLkRCIC8gTWF0aC5sb2cocikpCn0KCi8vIChwdWJsaWMpIDAgaWYgdGhpcyA9PSAwLCAxIGlmIHRoaXMgPiAwCmZ1bmN0aW9uIGJuU2lnTnVtKCkgewogIGlmICh0aGlzLnMgPCAwKSByZXR1cm4gLTEKICBlbHNlIGlmICh0aGlzLnQgPD0gMCB8fCAodGhpcy50ID09IDEgJiYgdGhpc1swXSA8PSAwKSkgcmV0dXJuIDAKICBlbHNlIHJldHVybiAxCn0KCi8vIChwcm90ZWN0ZWQpIGNvbnZlcnQgdG8gcmFkaXggc3RyaW5nCmZ1bmN0aW9uIGJucFRvUmFkaXgoYikgewogIGlmIChiID09IG51bGwpIGIgPSAxMAogIGlmICh0aGlzLnNpZ251bSgpID09IDAgfHwgYiA8IDIgfHwgYiA+IDM2KSByZXR1cm4gIjAiCiAgdmFyIGNzID0gdGhpcy5jaHVua1NpemUoYikKICB2YXIgYSA9IE1hdGgucG93KGIsIGNzKQogIHZhciBkID0gbmJ2KGEpLAogICAgeSA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICB6ID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIHIgPSAiIgogIHRoaXMuZGl2UmVtVG8oZCwgeSwgeikKICB3aGlsZSAoeS5zaWdudW0oKSA+IDApIHsKICAgIHIgPSAoYSArIHouaW50VmFsdWUoKSkKICAgICAgLnRvU3RyaW5nKGIpCiAgICAgIC5zdWJzdHIoMSkgKyByCiAgICB5LmRpdlJlbVRvKGQsIHksIHopCiAgfQogIHJldHVybiB6LmludFZhbHVlKCkKICAgIC50b1N0cmluZyhiKSArIHIKfQoKLy8gKHByb3RlY3RlZCkgY29udmVydCBmcm9tIHJhZGl4IHN0cmluZwpmdW5jdGlvbiBibnBGcm9tUmFkaXgocywgYikgewogIHZhciBzZWxmID0gdGhpcwogIHNlbGYuZnJvbUludCgwKQogIGlmIChiID09IG51bGwpIGIgPSAxMAogIHZhciBjcyA9IHNlbGYuY2h1bmtTaXplKGIpCiAgdmFyIGQgPSBNYXRoLnBvdyhiLCBjcyksCiAgICBtaSA9IGZhbHNlLAogICAgaiA9IDAsCiAgICB3ID0gMAogIGZvciAodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7ICsraSkgewogICAgdmFyIHggPSBpbnRBdChzLCBpKQogICAgaWYgKHggPCAwKSB7CiAgICAgIGlmIChzLmNoYXJBdChpKSA9PSAiLSIgJiYgc2VsZi5zaWdudW0oKSA9PSAwKSBtaSA9IHRydWUKICAgICAgY29udGludWUKICAgIH0KICAgIHcgPSBiICogdyArIHgKICAgIGlmICgrK2ogPj0gY3MpIHsKICAgICAgc2VsZi5kTXVsdGlwbHkoZCkKICAgICAgc2VsZi5kQWRkT2Zmc2V0KHcsIDApCiAgICAgIGogPSAwCiAgICAgIHcgPSAwCiAgICB9CiAgfQogIGlmIChqID4gMCkgewogICAgc2VsZi5kTXVsdGlwbHkoTWF0aC5wb3coYiwgaikpCiAgICBzZWxmLmRBZGRPZmZzZXQodywgMCkKICB9CiAgaWYgKG1pKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8oc2VsZiwgc2VsZikKfQoKLy8gKHByb3RlY3RlZCkgYWx0ZXJuYXRlIGNvbnN0cnVjdG9yCmZ1bmN0aW9uIGJucEZyb21OdW1iZXIoYSwgYiwgYykgewogIHZhciBzZWxmID0gdGhpcwogIGlmICgibnVtYmVyIiA9PSB0eXBlb2YgYikgewogICAgLy8gbmV3IEJpZ0ludGVnZXIoaW50LGludCxSTkcpCiAgICBpZiAoYSA8IDIpIHNlbGYuZnJvbUludCgxKQogICAgZWxzZSB7CiAgICAgIHNlbGYuZnJvbU51bWJlcihhLCBjKQogICAgICBpZiAoIXNlbGYudGVzdEJpdChhIC0gMSkpIC8vIGZvcmNlIE1TQiBzZXQKICAgICAgICBzZWxmLmJpdHdpc2VUbyhCaWdJbnRlZ2VyLk9ORS5zaGlmdExlZnQoYSAtIDEpLCBvcF9vciwgc2VsZikKICAgICAgaWYgKHNlbGYuaXNFdmVuKCkpIHNlbGYuZEFkZE9mZnNldCgxLCAwKTsgLy8gZm9yY2Ugb2RkCiAgICAgIHdoaWxlICghc2VsZi5pc1Byb2JhYmxlUHJpbWUoYikpIHsKICAgICAgICBzZWxmLmRBZGRPZmZzZXQoMiwgMCkKICAgICAgICBpZiAoc2VsZi5iaXRMZW5ndGgoKSA+IGEpIHNlbGYuc3ViVG8oQmlnSW50ZWdlci5PTkUuc2hpZnRMZWZ0KGEgLSAxKSwgc2VsZikKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICAvLyBuZXcgQmlnSW50ZWdlcihpbnQsUk5HKQogICAgdmFyIHggPSBuZXcgQXJyYXkoKSwKICAgICAgdCA9IGEgJiA3CiAgICB4Lmxlbmd0aCA9IChhID4+IDMpICsgMQogICAgYi5uZXh0Qnl0ZXMoeCkKICAgIGlmICh0ID4gMCkgeFswXSAmPSAoKDEgPDwgdCkgLSAxKQogICAgZWxzZSB4WzBdID0gMAogICAgc2VsZi5mcm9tU3RyaW5nKHgsIDI1NikKICB9Cn0KCi8vIChwdWJsaWMpIGNvbnZlcnQgdG8gYmlnZW5kaWFuIGJ5dGUgYXJyYXkKZnVuY3Rpb24gYm5Ub0J5dGVBcnJheSgpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB2YXIgaSA9IHNlbGYudCwKICAgIHIgPSBuZXcgQXJyYXkoKQogIHJbMF0gPSBzZWxmLnMKICB2YXIgcCA9IHNlbGYuREIgLSAoaSAqIHNlbGYuREIpICUgOCwKICAgIGQsIGsgPSAwCiAgaWYgKGktLSA+IDApIHsKICAgIGlmIChwIDwgc2VsZi5EQiAmJiAoZCA9IHNlbGZbaV0gPj4gcCkgIT0gKHNlbGYucyAmIHNlbGYuRE0pID4+IHApCiAgICAgIHJbaysrXSA9IGQgfCAoc2VsZi5zIDw8IChzZWxmLkRCIC0gcCkpCiAgICB3aGlsZSAoaSA+PSAwKSB7CiAgICAgIGlmIChwIDwgOCkgewogICAgICAgIGQgPSAoc2VsZltpXSAmICgoMSA8PCBwKSAtIDEpKSA8PCAoOCAtIHApCiAgICAgICAgZCB8PSBzZWxmWy0taV0gPj4gKHAgKz0gc2VsZi5EQiAtIDgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZCA9IChzZWxmW2ldID4+IChwIC09IDgpKSAmIDB4ZmYKICAgICAgICBpZiAocCA8PSAwKSB7CiAgICAgICAgICBwICs9IHNlbGYuREIKICAgICAgICAgIC0taQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoKGQgJiAweDgwKSAhPSAwKSBkIHw9IC0yNTYKICAgICAgaWYgKGsgPT09IDAgJiYgKHNlbGYucyAmIDB4ODApICE9IChkICYgMHg4MCkpKytrCiAgICAgIGlmIChrID4gMCB8fCBkICE9IHNlbGYucykgcltrKytdID0gZAogICAgfQogIH0KICByZXR1cm4gcgp9CgpmdW5jdGlvbiBibkVxdWFscyhhKSB7CiAgcmV0dXJuICh0aGlzLmNvbXBhcmVUbyhhKSA9PSAwKQp9CgpmdW5jdGlvbiBibk1pbihhKSB7CiAgcmV0dXJuICh0aGlzLmNvbXBhcmVUbyhhKSA8IDApID8gdGhpcyA6IGEKfQoKZnVuY3Rpb24gYm5NYXgoYSkgewogIHJldHVybiAodGhpcy5jb21wYXJlVG8oYSkgPiAwKSA/IHRoaXMgOiBhCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIG9wIGEgKGJpdHdpc2UpCmZ1bmN0aW9uIGJucEJpdHdpc2VUbyhhLCBvcCwgcikgewogIHZhciBzZWxmID0gdGhpcwogIHZhciBpLCBmLCBtID0gTWF0aC5taW4oYS50LCBzZWxmLnQpCiAgZm9yIChpID0gMDsgaSA8IG07ICsraSkgcltpXSA9IG9wKHNlbGZbaV0sIGFbaV0pCiAgaWYgKGEudCA8IHNlbGYudCkgewogICAgZiA9IGEucyAmIHNlbGYuRE0KICAgIGZvciAoaSA9IG07IGkgPCBzZWxmLnQ7ICsraSkgcltpXSA9IG9wKHNlbGZbaV0sIGYpCiAgICByLnQgPSBzZWxmLnQKICB9IGVsc2UgewogICAgZiA9IHNlbGYucyAmIHNlbGYuRE0KICAgIGZvciAoaSA9IG07IGkgPCBhLnQ7ICsraSkgcltpXSA9IG9wKGYsIGFbaV0pCiAgICByLnQgPSBhLnQKICB9CiAgci5zID0gb3Aoc2VsZi5zLCBhLnMpCiAgci5jbGFtcCgpCn0KCi8vIChwdWJsaWMpIHRoaXMgJiBhCmZ1bmN0aW9uIG9wX2FuZCh4LCB5KSB7CiAgcmV0dXJuIHggJiB5Cn0KCmZ1bmN0aW9uIGJuQW5kKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmJpdHdpc2VUbyhhLCBvcF9hbmQsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyB8IGEKZnVuY3Rpb24gb3Bfb3IoeCwgeSkgewogIHJldHVybiB4IHwgeQp9CgpmdW5jdGlvbiBibk9yKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmJpdHdpc2VUbyhhLCBvcF9vciwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIF4gYQpmdW5jdGlvbiBvcF94b3IoeCwgeSkgewogIHJldHVybiB4IF4geQp9CgpmdW5jdGlvbiBiblhvcihhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5iaXR3aXNlVG8oYSwgb3BfeG9yLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgJiB+YQpmdW5jdGlvbiBvcF9hbmRub3QoeCwgeSkgewogIHJldHVybiB4ICYgfnkKfQoKZnVuY3Rpb24gYm5BbmROb3QoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuYml0d2lzZVRvKGEsIG9wX2FuZG5vdCwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB+dGhpcwpmdW5jdGlvbiBibk5vdCgpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudDsgKytpKSByW2ldID0gdGhpcy5ETSAmIH50aGlzW2ldCiAgci50ID0gdGhpcy50CiAgci5zID0gfnRoaXMucwogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgPDwgbgpmdW5jdGlvbiBiblNoaWZ0TGVmdChuKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgaWYgKG4gPCAwKSB0aGlzLnJTaGlmdFRvKC1uLCByKQogIGVsc2UgdGhpcy5sU2hpZnRUbyhuLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgPj4gbgpmdW5jdGlvbiBiblNoaWZ0UmlnaHQobikgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIGlmIChuIDwgMCkgdGhpcy5sU2hpZnRUbygtbiwgcikKICBlbHNlIHRoaXMuclNoaWZ0VG8obiwgcikKICByZXR1cm4gcgp9CgovLyByZXR1cm4gaW5kZXggb2YgbG93ZXN0IDEtYml0IGluIHgsIHggPCAyXjMxCmZ1bmN0aW9uIGxiaXQoeCkgewogIGlmICh4ID09IDApIHJldHVybiAtMQogIHZhciByID0gMAogIGlmICgoeCAmIDB4ZmZmZikgPT0gMCkgewogICAgeCA+Pj0gMTYKICAgIHIgKz0gMTYKICB9CiAgaWYgKCh4ICYgMHhmZikgPT0gMCkgewogICAgeCA+Pj0gOAogICAgciArPSA4CiAgfQogIGlmICgoeCAmIDB4ZikgPT0gMCkgewogICAgeCA+Pj0gNAogICAgciArPSA0CiAgfQogIGlmICgoeCAmIDMpID09IDApIHsKICAgIHggPj49IDIKICAgIHIgKz0gMgogIH0KICBpZiAoKHggJiAxKSA9PSAwKSsrcgogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHJldHVybnMgaW5kZXggb2YgbG93ZXN0IDEtYml0IChvciAtMSBpZiBub25lKQpmdW5jdGlvbiBibkdldExvd2VzdFNldEJpdCgpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudDsgKytpKQogICAgaWYgKHRoaXNbaV0gIT0gMCkgcmV0dXJuIGkgKiB0aGlzLkRCICsgbGJpdCh0aGlzW2ldKQogIGlmICh0aGlzLnMgPCAwKSByZXR1cm4gdGhpcy50ICogdGhpcy5EQgogIHJldHVybiAtMQp9CgovLyByZXR1cm4gbnVtYmVyIG9mIDEgYml0cyBpbiB4CmZ1bmN0aW9uIGNiaXQoeCkgewogIHZhciByID0gMAogIHdoaWxlICh4ICE9IDApIHsKICAgIHggJj0geCAtIDEKICAgICsrcgogIH0KICByZXR1cm4gcgp9CgovLyAocHVibGljKSByZXR1cm4gbnVtYmVyIG9mIHNldCBiaXRzCmZ1bmN0aW9uIGJuQml0Q291bnQoKSB7CiAgdmFyIHIgPSAwLAogICAgeCA9IHRoaXMucyAmIHRoaXMuRE0KICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudDsgKytpKSByICs9IGNiaXQodGhpc1tpXSBeIHgpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdHJ1ZSBpZmYgbnRoIGJpdCBpcyBzZXQKZnVuY3Rpb24gYm5UZXN0Qml0KG4pIHsKICB2YXIgaiA9IE1hdGguZmxvb3IobiAvIHRoaXMuREIpCiAgaWYgKGogPj0gdGhpcy50KSByZXR1cm4gKHRoaXMucyAhPSAwKQogIHJldHVybiAoKHRoaXNbal0gJiAoMSA8PCAobiAlIHRoaXMuREIpKSkgIT0gMCkKfQoKLy8gKHByb3RlY3RlZCkgdGhpcyBvcCAoMTw8bikKZnVuY3Rpb24gYm5wQ2hhbmdlQml0KG4sIG9wKSB7CiAgdmFyIHIgPSBCaWdJbnRlZ2VyLk9ORS5zaGlmdExlZnQobikKICB0aGlzLmJpdHdpc2VUbyhyLCBvcCwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIHwgKDE8PG4pCmZ1bmN0aW9uIGJuU2V0Qml0KG4pIHsKICByZXR1cm4gdGhpcy5jaGFuZ2VCaXQobiwgb3Bfb3IpCn0KCi8vIChwdWJsaWMpIHRoaXMgJiB+KDE8PG4pCmZ1bmN0aW9uIGJuQ2xlYXJCaXQobikgewogIHJldHVybiB0aGlzLmNoYW5nZUJpdChuLCBvcF9hbmRub3QpCn0KCi8vIChwdWJsaWMpIHRoaXMgXiAoMTw8bikKZnVuY3Rpb24gYm5GbGlwQml0KG4pIHsKICByZXR1cm4gdGhpcy5jaGFuZ2VCaXQobiwgb3BfeG9yKQp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyArIGEKZnVuY3Rpb24gYm5wQWRkVG8oYSwgcikgewogIHZhciBzZWxmID0gdGhpcwoKICB2YXIgaSA9IDAsCiAgICBjID0gMCwKICAgIG0gPSBNYXRoLm1pbihhLnQsIHNlbGYudCkKICB3aGlsZSAoaSA8IG0pIHsKICAgIGMgKz0gc2VsZltpXSArIGFbaV0KICAgIHJbaSsrXSA9IGMgJiBzZWxmLkRNCiAgICBjID4+PSBzZWxmLkRCCiAgfQogIGlmIChhLnQgPCBzZWxmLnQpIHsKICAgIGMgKz0gYS5zCiAgICB3aGlsZSAoaSA8IHNlbGYudCkgewogICAgICBjICs9IHNlbGZbaV0KICAgICAgcltpKytdID0gYyAmIHNlbGYuRE0KICAgICAgYyA+Pj0gc2VsZi5EQgogICAgfQogICAgYyArPSBzZWxmLnMKICB9IGVsc2UgewogICAgYyArPSBzZWxmLnMKICAgIHdoaWxlIChpIDwgYS50KSB7CiAgICAgIGMgKz0gYVtpXQogICAgICByW2krK10gPSBjICYgc2VsZi5ETQogICAgICBjID4+PSBzZWxmLkRCCiAgICB9CiAgICBjICs9IGEucwogIH0KICByLnMgPSAoYyA8IDApID8gLTEgOiAwCiAgaWYgKGMgPiAwKSByW2krK10gPSBjCiAgZWxzZSBpZiAoYyA8IC0xKSByW2krK10gPSBzZWxmLkRWICsgYwogIHIudCA9IGkKICByLmNsYW1wKCkKfQoKLy8gKHB1YmxpYykgdGhpcyArIGEKZnVuY3Rpb24gYm5BZGQoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuYWRkVG8oYSwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIC0gYQpmdW5jdGlvbiBiblN1YnRyYWN0KGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLnN1YlRvKGEsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyAqIGEKZnVuY3Rpb24gYm5NdWx0aXBseShhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5tdWx0aXBseVRvKGEsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpc14yCmZ1bmN0aW9uIGJuU3F1YXJlKCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuc3F1YXJlVG8ocikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIC8gYQpmdW5jdGlvbiBibkRpdmlkZShhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5kaXZSZW1UbyhhLCByLCBudWxsKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgJSBhCmZ1bmN0aW9uIGJuUmVtYWluZGVyKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmRpdlJlbVRvKGEsIG51bGwsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgW3RoaXMvYSx0aGlzJWFdCmZ1bmN0aW9uIGJuRGl2aWRlQW5kUmVtYWluZGVyKGEpIHsKICB2YXIgcSA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuZGl2UmVtVG8oYSwgcSwgcikKICByZXR1cm4gbmV3IEFycmF5KHEsIHIpCn0KCi8vIChwcm90ZWN0ZWQpIHRoaXMgKj0gbiwgdGhpcyA+PSAwLCAxIDwgbiA8IERWCmZ1bmN0aW9uIGJucERNdWx0aXBseShuKSB7CiAgdGhpc1t0aGlzLnRdID0gdGhpcy5hbSgwLCBuIC0gMSwgdGhpcywgMCwgMCwgdGhpcy50KQogICsrdGhpcy50CiAgdGhpcy5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHRoaXMgKz0gbiA8PCB3IHdvcmRzLCB0aGlzID49IDAKZnVuY3Rpb24gYm5wREFkZE9mZnNldChuLCB3KSB7CiAgaWYgKG4gPT0gMCkgcmV0dXJuCiAgd2hpbGUgKHRoaXMudCA8PSB3KSB0aGlzW3RoaXMudCsrXSA9IDAKICB0aGlzW3ddICs9IG4KICB3aGlsZSAodGhpc1t3XSA+PSB0aGlzLkRWKSB7CiAgICB0aGlzW3ddIC09IHRoaXMuRFYKICAgIGlmICgrK3cgPj0gdGhpcy50KSB0aGlzW3RoaXMudCsrXSA9IDAKICAgICsrdGhpc1t3XQogIH0KfQoKLy8gQSAibnVsbCIgcmVkdWNlcgpmdW5jdGlvbiBOdWxsRXhwKCkge30KCmZ1bmN0aW9uIG5Ob3AoeCkgewogIHJldHVybiB4Cn0KCmZ1bmN0aW9uIG5NdWxUbyh4LCB5LCByKSB7CiAgeC5tdWx0aXBseVRvKHksIHIpCn0KCmZ1bmN0aW9uIG5TcXJUbyh4LCByKSB7CiAgeC5zcXVhcmVUbyhyKQp9CgpOdWxsRXhwLnByb3RvdHlwZS5jb252ZXJ0ID0gbk5vcApOdWxsRXhwLnByb3RvdHlwZS5yZXZlcnQgPSBuTm9wCk51bGxFeHAucHJvdG90eXBlLm11bFRvID0gbk11bFRvCk51bGxFeHAucHJvdG90eXBlLnNxclRvID0gblNxclRvCgovLyAocHVibGljKSB0aGlzXmUKZnVuY3Rpb24gYm5Qb3coZSkgewogIHJldHVybiB0aGlzLmV4cChlLCBuZXcgTnVsbEV4cCgpKQp9CgovLyAocHJvdGVjdGVkKSByID0gbG93ZXIgbiB3b3JkcyBvZiAidGhpcyAqIGEiLCBhLnQgPD0gbgovLyAidGhpcyIgc2hvdWxkIGJlIHRoZSBsYXJnZXIgb25lIGlmIGFwcHJvcHJpYXRlLgpmdW5jdGlvbiBibnBNdWx0aXBseUxvd2VyVG8oYSwgbiwgcikgewogIHZhciBpID0gTWF0aC5taW4odGhpcy50ICsgYS50LCBuKQogIHIucyA9IDA7IC8vIGFzc3VtZXMgYSx0aGlzID49IDAKICByLnQgPSBpCiAgd2hpbGUgKGkgPiAwKSByWy0taV0gPSAwCiAgdmFyIGoKICBmb3IgKGogPSByLnQgLSB0aGlzLnQ7IGkgPCBqOyArK2kpIHJbaSArIHRoaXMudF0gPSB0aGlzLmFtKDAsIGFbaV0sIHIsIGksIDAsIHRoaXMudCkKICBmb3IgKGogPSBNYXRoLm1pbihhLnQsIG4pOyBpIDwgajsgKytpKSB0aGlzLmFtKDAsIGFbaV0sIHIsIGksIDAsIG4gLSBpKQogIHIuY2xhbXAoKQp9CgovLyAocHJvdGVjdGVkKSByID0gInRoaXMgKiBhIiB3aXRob3V0IGxvd2VyIG4gd29yZHMsIG4gPiAwCi8vICJ0aGlzIiBzaG91bGQgYmUgdGhlIGxhcmdlciBvbmUgaWYgYXBwcm9wcmlhdGUuCmZ1bmN0aW9uIGJucE11bHRpcGx5VXBwZXJUbyhhLCBuLCByKSB7CiAgLS1uCiAgdmFyIGkgPSByLnQgPSB0aGlzLnQgKyBhLnQgLSBuCiAgci5zID0gMDsgLy8gYXNzdW1lcyBhLHRoaXMgPj0gMAogIHdoaWxlICgtLWkgPj0gMCkgcltpXSA9IDAKICBmb3IgKGkgPSBNYXRoLm1heChuIC0gdGhpcy50LCAwKTsgaSA8IGEudDsgKytpKQogICAgclt0aGlzLnQgKyBpIC0gbl0gPSB0aGlzLmFtKG4gLSBpLCBhW2ldLCByLCAwLCAwLCB0aGlzLnQgKyBpIC0gbikKICByLmNsYW1wKCkKICByLmRyU2hpZnRUbygxLCByKQp9CgovLyBCYXJyZXR0IG1vZHVsYXIgcmVkdWN0aW9uCmZ1bmN0aW9uIEJhcnJldHQobSkgewogIC8vIHNldHVwIEJhcnJldHQKICB0aGlzLnIyID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMucTMgPSBuZXcgQmlnSW50ZWdlcigpCiAgQmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKDIgKiBtLnQsIHRoaXMucjIpCiAgdGhpcy5tdSA9IHRoaXMucjIuZGl2aWRlKG0pCiAgdGhpcy5tID0gbQp9CgpmdW5jdGlvbiBiYXJyZXR0Q29udmVydCh4KSB7CiAgaWYgKHgucyA8IDAgfHwgeC50ID4gMiAqIHRoaXMubS50KSByZXR1cm4geC5tb2QodGhpcy5tKQogIGVsc2UgaWYgKHguY29tcGFyZVRvKHRoaXMubSkgPCAwKSByZXR1cm4geAogIGVsc2UgewogICAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgICB4LmNvcHlUbyhyKQogICAgdGhpcy5yZWR1Y2UocikKICAgIHJldHVybiByCiAgfQp9CgpmdW5jdGlvbiBiYXJyZXR0UmV2ZXJ0KHgpIHsKICByZXR1cm4geAp9CgovLyB4ID0geCBtb2QgbSAoSEFDIDE0LjQyKQpmdW5jdGlvbiBiYXJyZXR0UmVkdWNlKHgpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB4LmRyU2hpZnRUbyhzZWxmLm0udCAtIDEsIHNlbGYucjIpCiAgaWYgKHgudCA+IHNlbGYubS50ICsgMSkgewogICAgeC50ID0gc2VsZi5tLnQgKyAxCiAgICB4LmNsYW1wKCkKICB9CiAgc2VsZi5tdS5tdWx0aXBseVVwcGVyVG8oc2VsZi5yMiwgc2VsZi5tLnQgKyAxLCBzZWxmLnEzKQogIHNlbGYubS5tdWx0aXBseUxvd2VyVG8oc2VsZi5xMywgc2VsZi5tLnQgKyAxLCBzZWxmLnIyKQogIHdoaWxlICh4LmNvbXBhcmVUbyhzZWxmLnIyKSA8IDApIHguZEFkZE9mZnNldCgxLCBzZWxmLm0udCArIDEpCiAgeC5zdWJUbyhzZWxmLnIyLCB4KQogIHdoaWxlICh4LmNvbXBhcmVUbyhzZWxmLm0pID49IDApIHguc3ViVG8oc2VsZi5tLCB4KQp9CgovLyByID0geF4yIG1vZCBtOyB4ICE9IHIKZnVuY3Rpb24gYmFycmV0dFNxclRvKHgsIHIpIHsKICB4LnNxdWFyZVRvKHIpCiAgdGhpcy5yZWR1Y2UocikKfQoKLy8gciA9IHgqeSBtb2QgbTsgeCx5ICE9IHIKZnVuY3Rpb24gYmFycmV0dE11bFRvKHgsIHksIHIpIHsKICB4Lm11bHRpcGx5VG8oeSwgcikKICB0aGlzLnJlZHVjZShyKQp9CgpCYXJyZXR0LnByb3RvdHlwZS5jb252ZXJ0ID0gYmFycmV0dENvbnZlcnQKQmFycmV0dC5wcm90b3R5cGUucmV2ZXJ0ID0gYmFycmV0dFJldmVydApCYXJyZXR0LnByb3RvdHlwZS5yZWR1Y2UgPSBiYXJyZXR0UmVkdWNlCkJhcnJldHQucHJvdG90eXBlLm11bFRvID0gYmFycmV0dE11bFRvCkJhcnJldHQucHJvdG90eXBlLnNxclRvID0gYmFycmV0dFNxclRvCgovLyAocHVibGljKSB0aGlzXmUgJSBtIChIQUMgMTQuODUpCmZ1bmN0aW9uIGJuTW9kUG93KGUsIG0pIHsKICB2YXIgaSA9IGUuYml0TGVuZ3RoKCksCiAgICBrLCByID0gbmJ2KDEpLAogICAgegogIGlmIChpIDw9IDApIHJldHVybiByCiAgZWxzZSBpZiAoaSA8IDE4KSBrID0gMQogIGVsc2UgaWYgKGkgPCA0OCkgayA9IDMKICBlbHNlIGlmIChpIDwgMTQ0KSBrID0gNAogIGVsc2UgaWYgKGkgPCA3NjgpIGsgPSA1CiAgZWxzZSBrID0gNgogIGlmIChpIDwgOCkKICAgIHogPSBuZXcgQ2xhc3NpYyhtKQogIGVsc2UgaWYgKG0uaXNFdmVuKCkpCiAgICB6ID0gbmV3IEJhcnJldHQobSkKICBlbHNlCiAgICB6ID0gbmV3IE1vbnRnb21lcnkobSkKCiAgLy8gcHJlY29tcHV0YXRpb24KICB2YXIgZyA9IG5ldyBBcnJheSgpLAogICAgbiA9IDMsCiAgICBrMSA9IGsgLSAxLAogICAga20gPSAoMSA8PCBrKSAtIDEKICBnWzFdID0gei5jb252ZXJ0KHRoaXMpCiAgaWYgKGsgPiAxKSB7CiAgICB2YXIgZzIgPSBuZXcgQmlnSW50ZWdlcigpCiAgICB6LnNxclRvKGdbMV0sIGcyKQogICAgd2hpbGUgKG4gPD0ga20pIHsKICAgICAgZ1tuXSA9IG5ldyBCaWdJbnRlZ2VyKCkKICAgICAgei5tdWxUbyhnMiwgZ1tuIC0gMl0sIGdbbl0pCiAgICAgIG4gKz0gMgogICAgfQogIH0KCiAgdmFyIGogPSBlLnQgLSAxLAogICAgdywgaXMxID0gdHJ1ZSwKICAgIHIyID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIHQKICBpID0gbmJpdHMoZVtqXSkgLSAxCiAgd2hpbGUgKGogPj0gMCkgewogICAgaWYgKGkgPj0gazEpIHcgPSAoZVtqXSA+PiAoaSAtIGsxKSkgJiBrbQogICAgZWxzZSB7CiAgICAgIHcgPSAoZVtqXSAmICgoMSA8PCAoaSArIDEpKSAtIDEpKSA8PCAoazEgLSBpKQogICAgICBpZiAoaiA+IDApIHcgfD0gZVtqIC0gMV0gPj4gKHRoaXMuREIgKyBpIC0gazEpCiAgICB9CgogICAgbiA9IGsKICAgIHdoaWxlICgodyAmIDEpID09IDApIHsKICAgICAgdyA+Pj0gMQogICAgICAtLW4KICAgIH0KICAgIGlmICgoaSAtPSBuKSA8IDApIHsKICAgICAgaSArPSB0aGlzLkRCCiAgICAgIC0tagogICAgfQogICAgaWYgKGlzMSkgeyAvLyByZXQgPT0gMSwgZG9uJ3QgYm90aGVyIHNxdWFyaW5nIG9yIG11bHRpcGx5aW5nIGl0CiAgICAgIGdbd10uY29weVRvKHIpCiAgICAgIGlzMSA9IGZhbHNlCiAgICB9IGVsc2UgewogICAgICB3aGlsZSAobiA+IDEpIHsKICAgICAgICB6LnNxclRvKHIsIHIyKQogICAgICAgIHouc3FyVG8ocjIsIHIpCiAgICAgICAgbiAtPSAyCiAgICAgIH0KICAgICAgaWYgKG4gPiAwKSB6LnNxclRvKHIsIHIyKQogICAgICBlbHNlIHsKICAgICAgICB0ID0gcgogICAgICAgIHIgPSByMgogICAgICAgIHIyID0gdAogICAgICB9CiAgICAgIHoubXVsVG8ocjIsIGdbd10sIHIpCiAgICB9CgogICAgd2hpbGUgKGogPj0gMCAmJiAoZVtqXSAmICgxIDw8IGkpKSA9PSAwKSB7CiAgICAgIHouc3FyVG8ociwgcjIpCiAgICAgIHQgPSByCiAgICAgIHIgPSByMgogICAgICByMiA9IHQKICAgICAgaWYgKC0taSA8IDApIHsKICAgICAgICBpID0gdGhpcy5EQiAtIDEKICAgICAgICAtLWoKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gei5yZXZlcnQocikKfQoKLy8gKHB1YmxpYykgZ2NkKHRoaXMsYSkgKEhBQyAxNC41NCkKZnVuY3Rpb24gYm5HQ0QoYSkgewogIHZhciB4ID0gKHRoaXMucyA8IDApID8gdGhpcy5uZWdhdGUoKSA6IHRoaXMuY2xvbmUoKQogIHZhciB5ID0gKGEucyA8IDApID8gYS5uZWdhdGUoKSA6IGEuY2xvbmUoKQogIGlmICh4LmNvbXBhcmVUbyh5KSA8IDApIHsKICAgIHZhciB0ID0geAogICAgeCA9IHkKICAgIHkgPSB0CiAgfQogIHZhciBpID0geC5nZXRMb3dlc3RTZXRCaXQoKSwKICAgIGcgPSB5LmdldExvd2VzdFNldEJpdCgpCiAgaWYgKGcgPCAwKSByZXR1cm4geAogIGlmIChpIDwgZykgZyA9IGkKICBpZiAoZyA+IDApIHsKICAgIHguclNoaWZ0VG8oZywgeCkKICAgIHkuclNoaWZ0VG8oZywgeSkKICB9CiAgd2hpbGUgKHguc2lnbnVtKCkgPiAwKSB7CiAgICBpZiAoKGkgPSB4LmdldExvd2VzdFNldEJpdCgpKSA+IDApIHguclNoaWZ0VG8oaSwgeCkKICAgIGlmICgoaSA9IHkuZ2V0TG93ZXN0U2V0Qml0KCkpID4gMCkgeS5yU2hpZnRUbyhpLCB5KQogICAgaWYgKHguY29tcGFyZVRvKHkpID49IDApIHsKICAgICAgeC5zdWJUbyh5LCB4KQogICAgICB4LnJTaGlmdFRvKDEsIHgpCiAgICB9IGVsc2UgewogICAgICB5LnN1YlRvKHgsIHkpCiAgICAgIHkuclNoaWZ0VG8oMSwgeSkKICAgIH0KICB9CiAgaWYgKGcgPiAwKSB5LmxTaGlmdFRvKGcsIHkpCiAgcmV0dXJuIHkKfQoKLy8gKHByb3RlY3RlZCkgdGhpcyAlIG4sIG4gPCAyXjI2CmZ1bmN0aW9uIGJucE1vZEludChuKSB7CiAgaWYgKG4gPD0gMCkgcmV0dXJuIDAKICB2YXIgZCA9IHRoaXMuRFYgJSBuLAogICAgciA9ICh0aGlzLnMgPCAwKSA/IG4gLSAxIDogMAogIGlmICh0aGlzLnQgPiAwKQogICAgaWYgKGQgPT0gMCkgciA9IHRoaXNbMF0gJSBuCiAgICBlbHNlCiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnQgLSAxOyBpID49IDA7IC0taSkgciA9IChkICogciArIHRoaXNbaV0pICUgbgogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIDEvdGhpcyAlIG0gKEhBQyAxNC42MSkKZnVuY3Rpb24gYm5Nb2RJbnZlcnNlKG0pIHsKICB2YXIgYWMgPSBtLmlzRXZlbigpCiAgaWYgKHRoaXMuc2lnbnVtKCkgPT09IDApIHRocm93IG5ldyBFcnJvcignZGl2aXNpb24gYnkgemVybycpCiAgaWYgKCh0aGlzLmlzRXZlbigpICYmIGFjKSB8fCBtLnNpZ251bSgpID09IDApIHJldHVybiBCaWdJbnRlZ2VyLlpFUk8KICB2YXIgdSA9IG0uY2xvbmUoKSwKICAgIHYgPSB0aGlzLmNsb25lKCkKICB2YXIgYSA9IG5idigxKSwKICAgIGIgPSBuYnYoMCksCiAgICBjID0gbmJ2KDApLAogICAgZCA9IG5idigxKQogIHdoaWxlICh1LnNpZ251bSgpICE9IDApIHsKICAgIHdoaWxlICh1LmlzRXZlbigpKSB7CiAgICAgIHUuclNoaWZ0VG8oMSwgdSkKICAgICAgaWYgKGFjKSB7CiAgICAgICAgaWYgKCFhLmlzRXZlbigpIHx8ICFiLmlzRXZlbigpKSB7CiAgICAgICAgICBhLmFkZFRvKHRoaXMsIGEpCiAgICAgICAgICBiLnN1YlRvKG0sIGIpCiAgICAgICAgfQogICAgICAgIGEuclNoaWZ0VG8oMSwgYSkKICAgICAgfSBlbHNlIGlmICghYi5pc0V2ZW4oKSkgYi5zdWJUbyhtLCBiKQogICAgICBiLnJTaGlmdFRvKDEsIGIpCiAgICB9CiAgICB3aGlsZSAodi5pc0V2ZW4oKSkgewogICAgICB2LnJTaGlmdFRvKDEsIHYpCiAgICAgIGlmIChhYykgewogICAgICAgIGlmICghYy5pc0V2ZW4oKSB8fCAhZC5pc0V2ZW4oKSkgewogICAgICAgICAgYy5hZGRUbyh0aGlzLCBjKQogICAgICAgICAgZC5zdWJUbyhtLCBkKQogICAgICAgIH0KICAgICAgICBjLnJTaGlmdFRvKDEsIGMpCiAgICAgIH0gZWxzZSBpZiAoIWQuaXNFdmVuKCkpIGQuc3ViVG8obSwgZCkKICAgICAgZC5yU2hpZnRUbygxLCBkKQogICAgfQogICAgaWYgKHUuY29tcGFyZVRvKHYpID49IDApIHsKICAgICAgdS5zdWJUbyh2LCB1KQogICAgICBpZiAoYWMpIGEuc3ViVG8oYywgYSkKICAgICAgYi5zdWJUbyhkLCBiKQogICAgfSBlbHNlIHsKICAgICAgdi5zdWJUbyh1LCB2KQogICAgICBpZiAoYWMpIGMuc3ViVG8oYSwgYykKICAgICAgZC5zdWJUbyhiLCBkKQogICAgfQogIH0KICBpZiAodi5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpICE9IDApIHJldHVybiBCaWdJbnRlZ2VyLlpFUk8KICBpZiAoZC5jb21wYXJlVG8obSkgPj0gMCkgcmV0dXJuIGQuc3VidHJhY3QobSkKICBpZiAoZC5zaWdudW0oKSA8IDApIGQuYWRkVG8obSwgZCkKICBlbHNlIHJldHVybiBkCiAgaWYgKGQuc2lnbnVtKCkgPCAwKSByZXR1cm4gZC5hZGQobSkKICBlbHNlIHJldHVybiBkCn0KCnZhciBsb3dwcmltZXMgPSBbCiAgMiwgMywgNSwgNywgMTEsIDEzLCAxNywgMTksIDIzLCAyOSwgMzEsIDM3LCA0MSwgNDMsIDQ3LCA1MywgNTksIDYxLCA2NywgNzEsCiAgNzMsIDc5LCA4MywgODksIDk3LCAxMDEsIDEwMywgMTA3LCAxMDksIDExMywgMTI3LCAxMzEsIDEzNywgMTM5LCAxNDksIDE1MSwKICAxNTcsIDE2MywgMTY3LCAxNzMsIDE3OSwgMTgxLCAxOTEsIDE5MywgMTk3LCAxOTksIDIxMSwgMjIzLCAyMjcsIDIyOSwgMjMzLAogIDIzOSwgMjQxLCAyNTEsIDI1NywgMjYzLCAyNjksIDI3MSwgMjc3LCAyODEsIDI4MywgMjkzLCAzMDcsIDMxMSwgMzEzLCAzMTcsCiAgMzMxLCAzMzcsIDM0NywgMzQ5LCAzNTMsIDM1OSwgMzY3LCAzNzMsIDM3OSwgMzgzLCAzODksIDM5NywgNDAxLCA0MDksIDQxOSwKICA0MjEsIDQzMSwgNDMzLCA0MzksIDQ0MywgNDQ5LCA0NTcsIDQ2MSwgNDYzLCA0NjcsIDQ3OSwgNDg3LCA0OTEsIDQ5OSwgNTAzLAogIDUwOSwgNTIxLCA1MjMsIDU0MSwgNTQ3LCA1NTcsIDU2MywgNTY5LCA1NzEsIDU3NywgNTg3LCA1OTMsIDU5OSwgNjAxLCA2MDcsCiAgNjEzLCA2MTcsIDYxOSwgNjMxLCA2NDEsIDY0MywgNjQ3LCA2NTMsIDY1OSwgNjYxLCA2NzMsIDY3NywgNjgzLCA2OTEsIDcwMSwKICA3MDksIDcxOSwgNzI3LCA3MzMsIDczOSwgNzQzLCA3NTEsIDc1NywgNzYxLCA3NjksIDc3MywgNzg3LCA3OTcsIDgwOSwgODExLAogIDgyMSwgODIzLCA4MjcsIDgyOSwgODM5LCA4NTMsIDg1NywgODU5LCA4NjMsIDg3NywgODgxLCA4ODMsIDg4NywgOTA3LCA5MTEsCiAgOTE5LCA5MjksIDkzNywgOTQxLCA5NDcsIDk1MywgOTY3LCA5NzEsIDk3NywgOTgzLCA5OTEsIDk5NwpdCgp2YXIgbHBsaW0gPSAoMSA8PCAyNikgLyBsb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aCAtIDFdCgovLyAocHVibGljKSB0ZXN0IHByaW1hbGl0eSB3aXRoIGNlcnRhaW50eSA+PSAxLS41XnQKZnVuY3Rpb24gYm5Jc1Byb2JhYmxlUHJpbWUodCkgewogIHZhciBpLCB4ID0gdGhpcy5hYnMoKQogIGlmICh4LnQgPT0gMSAmJiB4WzBdIDw9IGxvd3ByaW1lc1tsb3dwcmltZXMubGVuZ3RoIC0gMV0pIHsKICAgIGZvciAoaSA9IDA7IGkgPCBsb3dwcmltZXMubGVuZ3RoOyArK2kpCiAgICAgIGlmICh4WzBdID09IGxvd3ByaW1lc1tpXSkgcmV0dXJuIHRydWUKICAgIHJldHVybiBmYWxzZQogIH0KICBpZiAoeC5pc0V2ZW4oKSkgcmV0dXJuIGZhbHNlCiAgaSA9IDEKICB3aGlsZSAoaSA8IGxvd3ByaW1lcy5sZW5ndGgpIHsKICAgIHZhciBtID0gbG93cHJpbWVzW2ldLAogICAgICBqID0gaSArIDEKICAgIHdoaWxlIChqIDwgbG93cHJpbWVzLmxlbmd0aCAmJiBtIDwgbHBsaW0pIG0gKj0gbG93cHJpbWVzW2orK10KICAgIG0gPSB4Lm1vZEludChtKQogICAgd2hpbGUgKGkgPCBqKSBpZiAobSAlIGxvd3ByaW1lc1tpKytdID09IDApIHJldHVybiBmYWxzZQogIH0KICByZXR1cm4geC5taWxsZXJSYWJpbih0KQp9CgovLyAocHJvdGVjdGVkKSB0cnVlIGlmIHByb2JhYmx5IHByaW1lIChIQUMgNC4yNCwgTWlsbGVyLVJhYmluKQpmdW5jdGlvbiBibnBNaWxsZXJSYWJpbih0KSB7CiAgdmFyIG4xID0gdGhpcy5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSkKICB2YXIgayA9IG4xLmdldExvd2VzdFNldEJpdCgpCiAgaWYgKGsgPD0gMCkgcmV0dXJuIGZhbHNlCiAgdmFyIHIgPSBuMS5zaGlmdFJpZ2h0KGspCiAgdCA9ICh0ICsgMSkgPj4gMQogIGlmICh0ID4gbG93cHJpbWVzLmxlbmd0aCkgdCA9IGxvd3ByaW1lcy5sZW5ndGgKICB2YXIgYSA9IG5ldyBCaWdJbnRlZ2VyKG51bGwpCiAgdmFyIGosIGJhc2VzID0gW10KICBmb3IgKHZhciBpID0gMDsgaSA8IHQ7ICsraSkgewogICAgZm9yICg7OykgewogICAgICBqID0gbG93cHJpbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxvd3ByaW1lcy5sZW5ndGgpXQogICAgICBpZiAoYmFzZXMuaW5kZXhPZihqKSA9PSAtMSkgYnJlYWsKICAgIH0KICAgIGJhc2VzLnB1c2goaikKICAgIGEuZnJvbUludChqKQogICAgdmFyIHkgPSBhLm1vZFBvdyhyLCB0aGlzKQogICAgaWYgKHkuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKSAhPSAwICYmIHkuY29tcGFyZVRvKG4xKSAhPSAwKSB7CiAgICAgIHZhciBqID0gMQogICAgICB3aGlsZSAoaisrIDwgayAmJiB5LmNvbXBhcmVUbyhuMSkgIT0gMCkgewogICAgICAgIHkgPSB5Lm1vZFBvd0ludCgyLCB0aGlzKQogICAgICAgIGlmICh5LmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSkgPT0gMCkgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgaWYgKHkuY29tcGFyZVRvKG4xKSAhPSAwKSByZXR1cm4gZmFsc2UKICAgIH0KICB9CiAgcmV0dXJuIHRydWUKfQoKLy8gcHJvdGVjdGVkCnByb3RvLmNodW5rU2l6ZSA9IGJucENodW5rU2l6ZQpwcm90by50b1JhZGl4ID0gYm5wVG9SYWRpeApwcm90by5mcm9tUmFkaXggPSBibnBGcm9tUmFkaXgKcHJvdG8uZnJvbU51bWJlciA9IGJucEZyb21OdW1iZXIKcHJvdG8uYml0d2lzZVRvID0gYm5wQml0d2lzZVRvCnByb3RvLmNoYW5nZUJpdCA9IGJucENoYW5nZUJpdApwcm90by5hZGRUbyA9IGJucEFkZFRvCnByb3RvLmRNdWx0aXBseSA9IGJucERNdWx0aXBseQpwcm90by5kQWRkT2Zmc2V0ID0gYm5wREFkZE9mZnNldApwcm90by5tdWx0aXBseUxvd2VyVG8gPSBibnBNdWx0aXBseUxvd2VyVG8KcHJvdG8ubXVsdGlwbHlVcHBlclRvID0gYm5wTXVsdGlwbHlVcHBlclRvCnByb3RvLm1vZEludCA9IGJucE1vZEludApwcm90by5taWxsZXJSYWJpbiA9IGJucE1pbGxlclJhYmluCgovLyBwdWJsaWMKcHJvdG8uY2xvbmUgPSBibkNsb25lCnByb3RvLmludFZhbHVlID0gYm5JbnRWYWx1ZQpwcm90by5ieXRlVmFsdWUgPSBibkJ5dGVWYWx1ZQpwcm90by5zaG9ydFZhbHVlID0gYm5TaG9ydFZhbHVlCnByb3RvLnNpZ251bSA9IGJuU2lnTnVtCnByb3RvLnRvQnl0ZUFycmF5ID0gYm5Ub0J5dGVBcnJheQpwcm90by5lcXVhbHMgPSBibkVxdWFscwpwcm90by5taW4gPSBibk1pbgpwcm90by5tYXggPSBibk1heApwcm90by5hbmQgPSBibkFuZApwcm90by5vciA9IGJuT3IKcHJvdG8ueG9yID0gYm5Yb3IKcHJvdG8uYW5kTm90ID0gYm5BbmROb3QKcHJvdG8ubm90ID0gYm5Ob3QKcHJvdG8uc2hpZnRMZWZ0ID0gYm5TaGlmdExlZnQKcHJvdG8uc2hpZnRSaWdodCA9IGJuU2hpZnRSaWdodApwcm90by5nZXRMb3dlc3RTZXRCaXQgPSBibkdldExvd2VzdFNldEJpdApwcm90by5iaXRDb3VudCA9IGJuQml0Q291bnQKcHJvdG8udGVzdEJpdCA9IGJuVGVzdEJpdApwcm90by5zZXRCaXQgPSBiblNldEJpdApwcm90by5jbGVhckJpdCA9IGJuQ2xlYXJCaXQKcHJvdG8uZmxpcEJpdCA9IGJuRmxpcEJpdApwcm90by5hZGQgPSBibkFkZApwcm90by5zdWJ0cmFjdCA9IGJuU3VidHJhY3QKcHJvdG8ubXVsdGlwbHkgPSBibk11bHRpcGx5CnByb3RvLmRpdmlkZSA9IGJuRGl2aWRlCnByb3RvLnJlbWFpbmRlciA9IGJuUmVtYWluZGVyCnByb3RvLmRpdmlkZUFuZFJlbWFpbmRlciA9IGJuRGl2aWRlQW5kUmVtYWluZGVyCnByb3RvLm1vZFBvdyA9IGJuTW9kUG93CnByb3RvLm1vZEludmVyc2UgPSBibk1vZEludmVyc2UKcHJvdG8ucG93ID0gYm5Qb3cKcHJvdG8uZ2NkID0gYm5HQ0QKcHJvdG8uaXNQcm9iYWJsZVByaW1lID0gYm5Jc1Byb2JhYmxlUHJpbWUKCi8vIEpTQk4tc3BlY2lmaWMgZXh0ZW5zaW9uCnByb3RvLnNxdWFyZSA9IGJuU3F1YXJlCgovLyBjb25zdGFudHMKQmlnSW50ZWdlci5aRVJPID0gbmJ2KDApCkJpZ0ludGVnZXIuT05FID0gbmJ2KDEpCkJpZ0ludGVnZXIudmFsdWVPZiA9IG5idgoKbW9kdWxlLmV4cG9ydHMgPSBCaWdJbnRlZ2VyCgp9LHsiLi4vcGFja2FnZS5qc29uIjo0NTJ9XSw0NTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8vIEZJWE1FOiBLaW5kIG9mIGEgd2VpcmQgd2F5IHRvIHRocm93IGV4Y2VwdGlvbnMsIGNvbnNpZGVyIHJlbW92aW5nCnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKQp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJy4vYmlnaScpCgovKioKICogVHVybnMgYSBieXRlIGFycmF5IGludG8gYSBiaWcgaW50ZWdlci4KICoKICogVGhpcyBmdW5jdGlvbiB3aWxsIGludGVycHJldCBhIGJ5dGUgYXJyYXkgYXMgYSBiaWcgaW50ZWdlciBpbiBiaWcKICogZW5kaWFuIG5vdGF0aW9uLgogKi8KQmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQgPSBmdW5jdGlvbihieXRlQXJyYXkpIHsKICAvLyBCaWdJbnRlZ2VyIGV4cGVjdHMgYSBERVIgaW50ZWdlciBjb25mb3JtYW50IGJ5dGUgYXJyYXkKICBpZiAoYnl0ZUFycmF5WzBdICYgMHg4MCkgewogICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKFswXS5jb25jYXQoYnl0ZUFycmF5KSkKICB9CgogIHJldHVybiBuZXcgQmlnSW50ZWdlcihieXRlQXJyYXkpCn0KCi8qKgogKiBSZXR1cm5zIGEgYnl0ZSBhcnJheSByZXByZXNlbnRhdGlvbiBvZiB0aGUgYmlnIGludGVnZXIuCiAqCiAqIFRoaXMgcmV0dXJucyB0aGUgYWJzb2x1dGUgb2YgdGhlIGNvbnRhaW5lZCB2YWx1ZSBpbiBiaWcgZW5kaWFuCiAqIGZvcm0uIEEgdmFsdWUgb2YgemVybyByZXN1bHRzIGluIGFuIGVtcHR5IGFycmF5LgogKi8KQmlnSW50ZWdlci5wcm90b3R5cGUudG9CeXRlQXJyYXlVbnNpZ25lZCA9IGZ1bmN0aW9uKCkgewogIHZhciBieXRlQXJyYXkgPSB0aGlzLnRvQnl0ZUFycmF5KCkKICByZXR1cm4gYnl0ZUFycmF5WzBdID09PSAwID8gYnl0ZUFycmF5LnNsaWNlKDEpIDogYnl0ZUFycmF5Cn0KCkJpZ0ludGVnZXIuZnJvbURFUkludGVnZXIgPSBmdW5jdGlvbihieXRlQXJyYXkpIHsKICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoYnl0ZUFycmF5KQp9CgovKgogKiBDb252ZXJ0cyBCaWdJbnRlZ2VyIHRvIGEgREVSIGludGVnZXIgcmVwcmVzZW50YXRpb24uCiAqCiAqIFRoZSBmb3JtYXQgZm9yIHRoaXMgdmFsdWUgdXNlcyB0aGUgbW9zdCBzaWduaWZpY2FudCBiaXQgYXMgYSBzaWduCiAqIGJpdC4gIElmIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBpcyBhbHJlYWR5IHNldCBhbmQgdGhlIGludGVnZXIgaXMKICogcG9zaXRpdmUsIGEgMHgwMCBpcyBwcmVwZW5kZWQuCiAqCiAqIEV4YW1wbGVzOgogKgogKiAgICAgIDAgPT4gICAgIDB4MDAKICogICAgICAxID0+ICAgICAweDAxCiAqICAgICAtMSA9PiAgICAgMHhmZgogKiAgICAxMjcgPT4gICAgIDB4N2YKICogICAtMTI3ID0+ICAgICAweDgxCiAqICAgIDEyOCA9PiAgIDB4MDA4MAogKiAgIC0xMjggPT4gICAgIDB4ODAKICogICAgMjU1ID0+ICAgMHgwMGZmCiAqICAgLTI1NSA9PiAgIDB4ZmYwMQogKiAgMTYzMDAgPT4gICAweDNmYWMKICogLTE2MzAwID0+ICAgMHhjMDU0CiAqICA2MjMwMCA9PiAweDAwZjM1YwogKiAtNjIzMDAgPT4gMHhmZjBjYTQKKi8KQmlnSW50ZWdlci5wcm90b3R5cGUudG9ERVJJbnRlZ2VyID0gQmlnSW50ZWdlci5wcm90b3R5cGUudG9CeXRlQXJyYXkKCkJpZ0ludGVnZXIuZnJvbUJ1ZmZlciA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogIC8vIEJpZ0ludGVnZXIgZXhwZWN0cyBhIERFUiBpbnRlZ2VyIGNvbmZvcm1hbnQgYnl0ZSBhcnJheQogIGlmIChidWZmZXJbMF0gJiAweDgwKSB7CiAgICB2YXIgYnl0ZUFycmF5ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYnVmZmVyKQoKICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihbMF0uY29uY2F0KGJ5dGVBcnJheSkpCiAgfQoKICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoYnVmZmVyKQp9CgpCaWdJbnRlZ2VyLmZyb21IZXggPSBmdW5jdGlvbihoZXgpIHsKICBpZiAoaGV4ID09PSAnJykgcmV0dXJuIEJpZ0ludGVnZXIuWkVSTwoKICBhc3NlcnQuZXF1YWwoaGV4LCBoZXgubWF0Y2goL15bQS1GYS1mMC05XSsvKSwgJ0ludmFsaWQgaGV4IHN0cmluZycpCiAgYXNzZXJ0LmVxdWFsKGhleC5sZW5ndGggJSAyLCAwLCAnSW5jb21wbGV0ZSBoZXgnKQogIHJldHVybiBuZXcgQmlnSW50ZWdlcihoZXgsIDE2KQp9CgpCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0J1ZmZlciA9IGZ1bmN0aW9uKHNpemUpIHsKICB2YXIgYnl0ZUFycmF5ID0gdGhpcy50b0J5dGVBcnJheVVuc2lnbmVkKCkKICB2YXIgemVyb3MgPSBbXQoKICB2YXIgcGFkZGluZyA9IHNpemUgLSBieXRlQXJyYXkubGVuZ3RoCiAgd2hpbGUgKHplcm9zLmxlbmd0aCA8IHBhZGRpbmcpIHplcm9zLnB1c2goMCkKCiAgcmV0dXJuIG5ldyBCdWZmZXIoemVyb3MuY29uY2F0KGJ5dGVBcnJheSkpCn0KCkJpZ0ludGVnZXIucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24oc2l6ZSkgewogIHJldHVybiB0aGlzLnRvQnVmZmVyKHNpemUpLnRvU3RyaW5nKCdoZXgnKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9iaWdpIjo0NDksImFzc2VydCI6NTAyLCJidWZmZXIiOjUwNH1dLDQ1MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnLi9iaWdpJykKCi8vYWRkb25zCnJlcXVpcmUoJy4vY29udmVydCcpCgptb2R1bGUuZXhwb3J0cyA9IEJpZ0ludGVnZXIKfSx7Ii4vYmlnaSI6NDQ5LCIuL2NvbnZlcnQiOjQ1MH1dLDQ1MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAibmFtZSI6ICJiaWdpIiwKICAidmVyc2lvbiI6ICIxLjQuMSIsCiAgImRlc2NyaXB0aW9uIjogIkJpZyBpbnRlZ2Vycy4iLAogICJrZXl3b3JkcyI6IFsKICAgICJjcnlwdG9ncmFwaHkiLAogICAgIm1hdGgiLAogICAgImJpdGNvaW4iLAogICAgImFyYml0cmFyeSIsCiAgICAicHJlY2lzaW9uIiwKICAgICJhcml0aG1ldGljIiwKICAgICJiaWciLAogICAgImludGVnZXIiLAogICAgImludCIsCiAgICAibnVtYmVyIiwKICAgICJiaWdpbnRlZ2VyIiwKICAgICJiaWdpbnQiLAogICAgImJpZ251bWJlciIsCiAgICAiZGVjaW1hbCIsCiAgICAiZmxvYXQiCiAgXSwKICAiZGV2RGVwZW5kZW5jaWVzIjogewogICAgImNvdmVyYWxscyI6ICJeMi4xMS4yIiwKICAgICJpc3RhbmJ1bCI6ICJeMC4zLjUiLAogICAgImpzaGludCI6ICJeMi41LjEiLAogICAgIm1vY2hhIjogIl4yLjEuMCIsCiAgICAibW9jaGlmeSI6ICJeMi4xLjAiCiAgfSwKICAicmVwb3NpdG9yeSI6IHsKICAgICJ1cmwiOiAiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9jcnlwdG9jb2luanMvYmlnaS5naXQiLAogICAgInR5cGUiOiAiZ2l0IgogIH0sCiAgIm1haW4iOiAiLi9saWIvaW5kZXguanMiLAogICJzY3JpcHRzIjogewogICAgImJyb3dzZXItdGVzdCI6ICJtb2NoaWZ5IC0td2QgLVIgc3BlYyIsCiAgICAidGVzdCI6ICJfbW9jaGEgLS0gdGVzdC8qLmpzIiwKICAgICJqc2hpbnQiOiAianNoaW50IC0tY29uZmlnIGpzaGludC5qc29uIGxpYi8qLmpzIDsgdHJ1ZSIsCiAgICAidW5pdCI6ICJtb2NoYSIsCiAgICAiY292ZXJhZ2UiOiAiaXN0YW5idWwgY292ZXIgLi9ub2RlX21vZHVsZXMvLmJpbi9fbW9jaGEgLS0gLS1yZXBvcnRlciBsaXN0IHRlc3QvKi5qcyIsCiAgICAiY292ZXJhbGxzIjogIm5wbSBydW4tc2NyaXB0IGNvdmVyYWdlICYmIG5vZGUgLi9ub2RlX21vZHVsZXMvLmJpbi9jb3ZlcmFsbHMgPCBjb3ZlcmFnZS9sY292LmluZm8iCiAgfSwKICAiZGVwZW5kZW5jaWVzIjoge30sCiAgInRlc3RsaW5nIjogewogICAgImZpbGVzIjogInRlc3QvKi5qcyIsCiAgICAiaGFybmVzcyI6ICJtb2NoYSIsCiAgICAiYnJvd3NlcnMiOiBbCiAgICAgICJpZS85Li5sYXRlc3QiLAogICAgICAiZmlyZWZveC9sYXRlc3QiLAogICAgICAiY2hyb21lL2xhdGVzdCIsCiAgICAgICJzYWZhcmkvNi4wLi5sYXRlc3QiLAogICAgICAiaXBob25lLzYuMC4ubGF0ZXN0IiwKICAgICAgImFuZHJvaWQtYnJvd3Nlci80LjIuLmxhdGVzdCIKICAgIF0KICB9LAogICJnaXRIZWFkIjogIjdkMDM0YTFiMzhjYTkwZjY4ZGFhOWRlNDcyZGRhMmZiODEzODM2ZjEiLAogICJidWdzIjogewogICAgInVybCI6ICJodHRwczovL2dpdGh1Yi5jb20vY3J5cHRvY29pbmpzL2JpZ2kvaXNzdWVzIgogIH0sCiAgImhvbWVwYWdlIjogImh0dHBzOi8vZ2l0aHViLmNvbS9jcnlwdG9jb2luanMvYmlnaSNyZWFkbWUiLAogICJfaWQiOiAiYmlnaUAxLjQuMSIsCiAgIl9zaGFzdW0iOiAiNzI2ZThhYjA4ZDFmZTFkZmI4YWE2YmI2MzA5YmZmZWNmOTNhMjFiNyIsCiAgIl9mcm9tIjogImJpZ2lAPj0xLjQuMCA8Mi4wLjAiLAogICJfbnBtVmVyc2lvbiI6ICIyLjEwLjEiLAogICJfbm9kZVZlcnNpb24iOiAiMi4xLjAiLAogICJfbnBtVXNlciI6IHsKICAgICJuYW1lIjogImpwcmljaGFyZHNvbiIsCiAgICAiZW1haWwiOiAianByaWNoYXJkc29uQGdtYWlsLmNvbSIKICB9LAogICJtYWludGFpbmVycyI6IFsKICAgIHsKICAgICAgIm5hbWUiOiAibWlkbmlnaHRsaWdodG5pbmciLAogICAgICAiZW1haWwiOiAiYm95ZGJAbWlkbmlnaHRkZXNpZ24ud3MiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJzaWRhemhhbmciLAogICAgICAiZW1haWwiOiAic2lkYXpoYW5nODlAZ21haWwuY29tIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAibmFkYXYiLAogICAgICAiZW1haWwiOiAibnBtQHNoZXNlay5pbmZvIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAianByaWNoYXJkc29uIiwKICAgICAgImVtYWlsIjogImpwcmljaGFyZHNvbkBnbWFpbC5jb20iCiAgICB9CiAgXSwKICAiZGlzdCI6IHsKICAgICJzaGFzdW0iOiAiNzI2ZThhYjA4ZDFmZTFkZmI4YWE2YmI2MzA5YmZmZWNmOTNhMjFiNyIsCiAgICAidGFyYmFsbCI6ICJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9iaWdpLy0vYmlnaS0xLjQuMS50Z3oiCiAgfSwKICAiZGlyZWN0b3JpZXMiOiB7fSwKICAiX3Jlc29sdmVkIjogImh0dHBzOi8vcmVnaXN0cnkubnBtanMub3JnL2JpZ2kvLS9iaWdpLTEuNC4xLnRneiIKfQoKfSx7fV0sNDUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBSZWZlcmVuY2UgaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYmlwcy9ibG9iL21hc3Rlci9iaXAtMDA2Ni5tZWRpYXdpa2kKLy8gRm9ybWF0OiAweDMwIFt0b3RhbC1sZW5ndGhdIDB4MDIgW1ItbGVuZ3RoXSBbUl0gMHgwMiBbUy1sZW5ndGhdIFtTXQovLyBOT1RFOiBTSUdIQVNIIGJ5dGUgaWdub3JlZCBBTkQgcmVzdHJpY3RlZCwgdHJ1bmNhdGUgYmVmb3JlIHVzZQoKZnVuY3Rpb24gY2hlY2sgKGJ1ZmZlcikgewogIGlmIChidWZmZXIubGVuZ3RoIDwgOCkgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlci5sZW5ndGggPiA3MikgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlclswXSAhPT0gMHgzMCkgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlclsxXSAhPT0gYnVmZmVyLmxlbmd0aCAtIDIpIHJldHVybiBmYWxzZQogIGlmIChidWZmZXJbMl0gIT09IDB4MDIpIHJldHVybiBmYWxzZQoKICB2YXIgbGVuUiA9IGJ1ZmZlclszXQogIGlmIChsZW5SID09PSAwKSByZXR1cm4gZmFsc2UKICBpZiAoNSArIGxlblIgPj0gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlcls0ICsgbGVuUl0gIT09IDB4MDIpIHJldHVybiBmYWxzZQoKICB2YXIgbGVuUyA9IGJ1ZmZlcls1ICsgbGVuUl0KICBpZiAobGVuUyA9PT0gMCkgcmV0dXJuIGZhbHNlCiAgaWYgKCg2ICsgbGVuUiArIGxlblMpICE9PSBidWZmZXIubGVuZ3RoKSByZXR1cm4gZmFsc2UKCiAgaWYgKGJ1ZmZlcls0XSAmIDB4ODApIHJldHVybiBmYWxzZQogIGlmIChsZW5SID4gMSAmJiAoYnVmZmVyWzRdID09PSAweDAwKSAmJiAhKGJ1ZmZlcls1XSAmIDB4ODApKSByZXR1cm4gZmFsc2UKCiAgaWYgKGJ1ZmZlcltsZW5SICsgNl0gJiAweDgwKSByZXR1cm4gZmFsc2UKICBpZiAobGVuUyA+IDEgJiYgKGJ1ZmZlcltsZW5SICsgNl0gPT09IDB4MDApICYmICEoYnVmZmVyW2xlblIgKyA3XSAmIDB4ODApKSByZXR1cm4gZmFsc2UKICByZXR1cm4gdHJ1ZQp9CgpmdW5jdGlvbiBkZWNvZGUgKGJ1ZmZlcikgewogIGlmIChidWZmZXIubGVuZ3RoIDwgOCkgdGhyb3cgbmV3IEVycm9yKCdERVIgc2VxdWVuY2UgbGVuZ3RoIGlzIHRvbyBzaG9ydCcpCiAgaWYgKGJ1ZmZlci5sZW5ndGggPiA3MikgdGhyb3cgbmV3IEVycm9yKCdERVIgc2VxdWVuY2UgbGVuZ3RoIGlzIHRvbyBsb25nJykKICBpZiAoYnVmZmVyWzBdICE9PSAweDMwKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIERFUiBzZXF1ZW5jZScpCiAgaWYgKGJ1ZmZlclsxXSAhPT0gYnVmZmVyLmxlbmd0aCAtIDIpIHRocm93IG5ldyBFcnJvcignREVSIHNlcXVlbmNlIGxlbmd0aCBpcyBpbnZhbGlkJykKICBpZiAoYnVmZmVyWzJdICE9PSAweDAyKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIERFUiBpbnRlZ2VyJykKCiAgdmFyIGxlblIgPSBidWZmZXJbM10KICBpZiAobGVuUiA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdSIGxlbmd0aCBpcyB6ZXJvJykKICBpZiAoNSArIGxlblIgPj0gYnVmZmVyLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdSIGxlbmd0aCBpcyB0b28gbG9uZycpCiAgaWYgKGJ1ZmZlcls0ICsgbGVuUl0gIT09IDB4MDIpIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgREVSIGludGVnZXIgKDIpJykKCiAgdmFyIGxlblMgPSBidWZmZXJbNSArIGxlblJdCiAgaWYgKGxlblMgPT09IDApIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgemVybycpCiAgaWYgKCg2ICsgbGVuUiArIGxlblMpICE9PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1MgbGVuZ3RoIGlzIGludmFsaWQnKQoKICBpZiAoYnVmZmVyWzRdICYgMHg4MCkgdGhyb3cgbmV3IEVycm9yKCdSIHZhbHVlIGlzIG5lZ2F0aXZlJykKICBpZiAobGVuUiA+IDEgJiYgKGJ1ZmZlcls0XSA9PT0gMHgwMCkgJiYgIShidWZmZXJbNV0gJiAweDgwKSkgdGhyb3cgbmV3IEVycm9yKCdSIHZhbHVlIGV4Y2Vzc2l2ZWx5IHBhZGRlZCcpCgogIGlmIChidWZmZXJbbGVuUiArIDZdICYgMHg4MCkgdGhyb3cgbmV3IEVycm9yKCdTIHZhbHVlIGlzIG5lZ2F0aXZlJykKICBpZiAobGVuUyA+IDEgJiYgKGJ1ZmZlcltsZW5SICsgNl0gPT09IDB4MDApICYmICEoYnVmZmVyW2xlblIgKyA3XSAmIDB4ODApKSB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJykKCiAgLy8gbm9uLUJJUDY2IC0gZXh0cmFjdCBSLCBTIHZhbHVlcwogIHJldHVybiB7CiAgICByOiBidWZmZXIuc2xpY2UoNCwgNCArIGxlblIpLAogICAgczogYnVmZmVyLnNsaWNlKDYgKyBsZW5SKQogIH0KfQoKLyoKICogRXhwZWN0cyByIGFuZCBzIHRvIGJlIHBvc2l0aXZlIERFUiBpbnRlZ2Vycy4KICoKICogVGhlIERFUiBmb3JtYXQgdXNlcyB0aGUgbW9zdCBzaWduaWZpY2FudCBiaXQgYXMgYSBzaWduIGJpdCAoJiAweDgwKS4KICogSWYgdGhlIHNpZ25pZmljYW50IGJpdCBpcyBzZXQgQU5EIHRoZSBpbnRlZ2VyIGlzIHBvc2l0aXZlLCBhIDB4MDAgaXMgcHJlcGVuZGVkLgogKgogKiBFeGFtcGxlczoKICoKICogICAgICAwID0+ICAgICAweDAwCiAqICAgICAgMSA9PiAgICAgMHgwMQogKiAgICAgLTEgPT4gICAgIDB4ZmYKICogICAgMTI3ID0+ICAgICAweDdmCiAqICAgLTEyNyA9PiAgICAgMHg4MQogKiAgICAxMjggPT4gICAweDAwODAKICogICAtMTI4ID0+ICAgICAweDgwCiAqICAgIDI1NSA9PiAgIDB4MDBmZgogKiAgIC0yNTUgPT4gICAweGZmMDEKICogIDE2MzAwID0+ICAgMHgzZmFjCiAqIC0xNjMwMCA9PiAgIDB4YzA1NAogKiAgNjIzMDAgPT4gMHgwMGYzNWMKICogLTYyMzAwID0+IDB4ZmYwY2E0CiovCmZ1bmN0aW9uIGVuY29kZSAociwgcykgewogIHZhciBsZW5SID0gci5sZW5ndGgKICB2YXIgbGVuUyA9IHMubGVuZ3RoCiAgaWYgKGxlblIgPT09IDApIHRocm93IG5ldyBFcnJvcignUiBsZW5ndGggaXMgemVybycpCiAgaWYgKGxlblMgPT09IDApIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgemVybycpCiAgaWYgKGxlblIgPiAzMykgdGhyb3cgbmV3IEVycm9yKCdSIGxlbmd0aCBpcyB0b28gbG9uZycpCiAgaWYgKGxlblMgPiAzMykgdGhyb3cgbmV3IEVycm9yKCdTIGxlbmd0aCBpcyB0b28gbG9uZycpCiAgaWYgKHJbMF0gJiAweDgwKSB0aHJvdyBuZXcgRXJyb3IoJ1IgdmFsdWUgaXMgbmVnYXRpdmUnKQogIGlmIChzWzBdICYgMHg4MCkgdGhyb3cgbmV3IEVycm9yKCdTIHZhbHVlIGlzIG5lZ2F0aXZlJykKICBpZiAobGVuUiA+IDEgJiYgKHJbMF0gPT09IDB4MDApICYmICEoclsxXSAmIDB4ODApKSB0aHJvdyBuZXcgRXJyb3IoJ1IgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJykKICBpZiAobGVuUyA+IDEgJiYgKHNbMF0gPT09IDB4MDApICYmICEoc1sxXSAmIDB4ODApKSB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJykKCiAgdmFyIHNpZ25hdHVyZSA9IG5ldyBCdWZmZXIoNiArIGxlblIgKyBsZW5TKQoKICAvLyAweDMwIFt0b3RhbC1sZW5ndGhdIDB4MDIgW1ItbGVuZ3RoXSBbUl0gMHgwMiBbUy1sZW5ndGhdIFtTXQogIHNpZ25hdHVyZVswXSA9IDB4MzAKICBzaWduYXR1cmVbMV0gPSBzaWduYXR1cmUubGVuZ3RoIC0gMgogIHNpZ25hdHVyZVsyXSA9IDB4MDIKICBzaWduYXR1cmVbM10gPSByLmxlbmd0aAogIHIuY29weShzaWduYXR1cmUsIDQpCiAgc2lnbmF0dXJlWzQgKyBsZW5SXSA9IDB4MDIKICBzaWduYXR1cmVbNSArIGxlblJdID0gcy5sZW5ndGgKICBzLmNvcHkoc2lnbmF0dXJlLCA2ICsgbGVuUikKCiAgcmV0dXJuIHNpZ25hdHVyZQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBjaGVjazogY2hlY2ssCiAgZGVjb2RlOiBkZWNvZGUsCiAgZW5jb2RlOiBlbmNvZGUKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NTA0fV0sNDU0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCcKCnZhciBiYXNlNTggPSByZXF1aXJlKCdiczU4JykKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCgovLyBTSEEyNTYoU0hBMjU2KGJ1ZmZlcikpCmZ1bmN0aW9uIHNoYTI1NngyIChidWZmZXIpIHsKICB2YXIgdG1wID0gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGJ1ZmZlcikuZGlnZXN0KCkKICByZXR1cm4gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHRtcCkuZGlnZXN0KCkKfQoKLy8gRW5jb2RlIGEgYnVmZmVyIGFzIGEgYmFzZTU4LWNoZWNrIGVuY29kZWQgc3RyaW5nCmZ1bmN0aW9uIGVuY29kZSAocGF5bG9hZCkgewogIHZhciBjaGVja3N1bSA9IHNoYTI1NngyKHBheWxvYWQpCgogIHJldHVybiBiYXNlNTguZW5jb2RlKEJ1ZmZlci5jb25jYXQoWwogICAgcGF5bG9hZCwKICAgIGNoZWNrc3VtCiAgXSwgcGF5bG9hZC5sZW5ndGggKyA0KSkKfQoKLy8gRGVjb2RlIGEgYmFzZTU4LWNoZWNrIGVuY29kZWQgc3RyaW5nIHRvIGEgYnVmZmVyCmZ1bmN0aW9uIGRlY29kZSAoc3RyaW5nKSB7CiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYmFzZTU4LmRlY29kZShzdHJpbmcpKQoKICB2YXIgcGF5bG9hZCA9IGJ1ZmZlci5zbGljZSgwLCAtNCkKICB2YXIgY2hlY2tzdW0gPSBidWZmZXIuc2xpY2UoLTQpCiAgdmFyIG5ld0NoZWNrc3VtID0gc2hhMjU2eDIocGF5bG9hZCkKCiAgaWYgKGNoZWNrc3VtWzBdIF4gbmV3Q2hlY2tzdW1bMF0gfAogICAgICBjaGVja3N1bVsxXSBeIG5ld0NoZWNrc3VtWzFdIHwKICAgICAgY2hlY2tzdW1bMl0gXiBuZXdDaGVja3N1bVsyXSB8CiAgICAgIGNoZWNrc3VtWzNdIF4gbmV3Q2hlY2tzdW1bM10pIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjaGVja3N1bScpCgogIHJldHVybiBwYXlsb2FkCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGVuY29kZTogZW5jb2RlLAogIGRlY29kZTogZGVjb2RlCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJiczU4Ijo0NTUsImJ1ZmZlciI6NTA0LCJjcmVhdGUtaGFzaCI6NDU5fV0sNDU1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQmFzZTU4IGVuY29kaW5nL2RlY29kaW5nCi8vIE9yaWdpbmFsbHkgd3JpdHRlbiBieSBNaWtlIEhlYXJuIGZvciBCaXRjb2luSgovLyBDb3B5cmlnaHQgKGMpIDIwMTEgR29vZ2xlIEluYwovLyBQb3J0ZWQgdG8gSmF2YVNjcmlwdCBieSBTdGVmYW4gVGhvbWFzCi8vIE1lcmdlZCBCdWZmZXIgcmVmYWN0b3JpbmdzIGZyb20gYmFzZTU4LW5hdGl2ZSBieSBTdGVwaGVuIFBhaXIKLy8gQ29weXJpZ2h0IChjKSAyMDEzIEJpdFBheSBJbmMKCnZhciBBTFBIQUJFVCA9ICcxMjM0NTY3ODlBQkNERUZHSEpLTE1OUFFSU1RVVldYWVphYmNkZWZnaGlqa21ub3BxcnN0dXZ3eHl6Jwp2YXIgQUxQSEFCRVRfTUFQID0ge30KZm9yKHZhciBpID0gMDsgaSA8IEFMUEhBQkVULmxlbmd0aDsgaSsrKSB7CiAgQUxQSEFCRVRfTUFQW0FMUEhBQkVULmNoYXJBdChpKV0gPSBpCn0KdmFyIEJBU0UgPSA1OAoKZnVuY3Rpb24gZW5jb2RlKGJ1ZmZlcikgewogIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gJycKCiAgdmFyIGksIGosIGRpZ2l0cyA9IFswXQogIGZvciAoaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHsKICAgIGZvciAoaiA9IDA7IGogPCBkaWdpdHMubGVuZ3RoOyBqKyspIGRpZ2l0c1tqXSA8PD0gOAoKICAgIGRpZ2l0c1swXSArPSBidWZmZXJbaV0KCiAgICB2YXIgY2FycnkgPSAwCiAgICBmb3IgKGogPSAwOyBqIDwgZGlnaXRzLmxlbmd0aDsgKytqKSB7CiAgICAgIGRpZ2l0c1tqXSArPSBjYXJyeQoKICAgICAgY2FycnkgPSAoZGlnaXRzW2pdIC8gQkFTRSkgfCAwCiAgICAgIGRpZ2l0c1tqXSAlPSBCQVNFCiAgICB9CgogICAgd2hpbGUgKGNhcnJ5KSB7CiAgICAgIGRpZ2l0cy5wdXNoKGNhcnJ5ICUgQkFTRSkKCiAgICAgIGNhcnJ5ID0gKGNhcnJ5IC8gQkFTRSkgfCAwCiAgICB9CiAgfQoKICAvLyBkZWFsIHdpdGggbGVhZGluZyB6ZXJvcwogIGZvciAoaSA9IDA7IGJ1ZmZlcltpXSA9PT0gMCAmJiBpIDwgYnVmZmVyLmxlbmd0aCAtIDE7IGkrKykgZGlnaXRzLnB1c2goMCkKCiAgLy8gY29udmVydCBkaWdpdHMgdG8gYSBzdHJpbmcKICB2YXIgc3RyaW5nT3V0cHV0ID0gIiIKICBmb3IgKHZhciBpID0gZGlnaXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICBzdHJpbmdPdXRwdXQgPSBzdHJpbmdPdXRwdXQgKyBBTFBIQUJFVFtkaWdpdHNbaV1dCiAgfQogIHJldHVybiBzdHJpbmdPdXRwdXQKfQoKZnVuY3Rpb24gZGVjb2RlKHN0cmluZykgewogIGlmIChzdHJpbmcubGVuZ3RoID09PSAwKSByZXR1cm4gW10KCiAgdmFyIGksIGosIGJ5dGVzID0gWzBdCiAgZm9yIChpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykgewogICAgdmFyIGMgPSBzdHJpbmdbaV0KICAgIGlmICghKGMgaW4gQUxQSEFCRVRfTUFQKSkgdGhyb3cgbmV3IEVycm9yKCdOb24tYmFzZTU4IGNoYXJhY3RlcicpCgogICAgZm9yIChqID0gMDsgaiA8IGJ5dGVzLmxlbmd0aDsgaisrKSBieXRlc1tqXSAqPSBCQVNFCiAgICBieXRlc1swXSArPSBBTFBIQUJFVF9NQVBbY10KCiAgICB2YXIgY2FycnkgPSAwCiAgICBmb3IgKGogPSAwOyBqIDwgYnl0ZXMubGVuZ3RoOyArK2opIHsKICAgICAgYnl0ZXNbal0gKz0gY2FycnkKCiAgICAgIGNhcnJ5ID0gYnl0ZXNbal0gPj4gOAogICAgICBieXRlc1tqXSAmPSAweGZmCiAgICB9CgogICAgd2hpbGUgKGNhcnJ5KSB7CiAgICAgIGJ5dGVzLnB1c2goY2FycnkgJiAweGZmKQoKICAgICAgY2FycnkgPj49IDgKICAgIH0KICB9CgogIC8vIGRlYWwgd2l0aCBsZWFkaW5nIHplcm9zCiAgZm9yIChpID0gMDsgc3RyaW5nW2ldID09PSAnMScgJiYgaSA8IHN0cmluZy5sZW5ndGggLSAxOyBpKyspIGJ5dGVzLnB1c2goMCkKCiAgcmV0dXJuIGJ5dGVzLnJldmVyc2UoKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBlbmNvZGU6IGVuY29kZSwKICBkZWNvZGU6IGRlY29kZQp9Cgp9LHt9XSw0NTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGEsIGIpIHsKICBpZiAodHlwZW9mIGEuY29tcGFyZSA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGEuY29tcGFyZShiKQogIGlmIChhID09PSBiKSByZXR1cm4gMAoKICB2YXIgeCA9IGEubGVuZ3RoCiAgdmFyIHkgPSBiLmxlbmd0aAoKICB2YXIgaSA9IDAKICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSkKICB3aGlsZSAoaSA8IGxlbikgewogICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrCgogICAgKytpCiAgfQoKICBpZiAoaSAhPT0gbGVuKSB7CiAgICB4ID0gYVtpXQogICAgeSA9IGJbaV0KICB9CgogIGlmICh4IDwgeSkgcmV0dXJuIC0xCiAgaWYgKHkgPCB4KSByZXR1cm4gMQogIHJldHVybiAwCn0KCgp9LHt9XSw0NTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYSwgYikgewoJaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkgewoJCXRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKTsKCX0KCglpZiAoYSA9PT0gYikgewoJCXJldHVybiB0cnVlOwoJfQoKCWlmICh0eXBlb2YgYS5lcXVhbHMgPT09ICdmdW5jdGlvbicpIHsKCQlyZXR1cm4gYS5lcXVhbHMoYik7Cgl9CgoJaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgewoJCXJldHVybiBmYWxzZTsKCX0KCglmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKCQlpZiAoYVtpXSAhPT0gYltpXSkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXJldHVybiB0cnVlOwp9OwoKfSkuY2FsbCh0aGlzLHsiaXNCdWZmZXIiOnJlcXVpcmUoIi4uLy4uLy4uL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2luc2VydC1tb2R1bGUtZ2xvYmFscy9ub2RlX21vZHVsZXMvaXMtYnVmZmVyL2luZGV4LmpzIil9KQp9LHsiLi4vLi4vLi4vYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvaW5zZXJ0LW1vZHVsZS1nbG9iYWxzL25vZGVfbW9kdWxlcy9pcy1idWZmZXIvaW5kZXguanMiOjcwMn1dLDQ1ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXZlcnNlIChzcmMpIHsKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihzcmMubGVuZ3RoKQoKICBmb3IgKHZhciBpID0gMCwgaiA9IHNyYy5sZW5ndGggLSAxOyBpIDw9IGo7ICsraSwgLS1qKSB7CiAgICBidWZmZXJbaV0gPSBzcmNbal0KICAgIGJ1ZmZlcltqXSA9IHNyY1tpXQogIH0KCiAgcmV0dXJuIGJ1ZmZlcgp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDR9XSw0NTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDI5XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vbWQ1Ijo0NjEsImJ1ZmZlciI6NTA0LCJjaXBoZXItYmFzZSI6NDYyLCJkdXAiOjQyOSwiaW5oZXJpdHMiOjQ2MywicmlwZW1kMTYwIjo0NjQsInNoYS5qcyI6NDY2fV0sNDYwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzMF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiZHVwIjo0MzB9XSw0NjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDMxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vaGVscGVycyI6NDYwLCJkdXAiOjQzMX1dLDQ2MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MzJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImR1cCI6NDMyLCJpbmhlcml0cyI6NDYzLCJzdHJlYW0iOjcxOSwic3RyaW5nX2RlY29kZXIiOjcyMH1dLDQ2MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MzNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo0MzN9XSw0NjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDM0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJkdXAiOjQzNH1dLDQ2NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MzVdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImR1cCI6NDM1fV0sNDY2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzNl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL3NoYSI6NDY3LCIuL3NoYTEiOjQ2OCwiLi9zaGEyMjQiOjQ2OSwiLi9zaGEyNTYiOjQ3MCwiLi9zaGEzODQiOjQ3MSwiLi9zaGE1MTIiOjQ3MiwiZHVwIjo0MzZ9XSw0Njc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDM3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vaGFzaCI6NDY1LCJidWZmZXIiOjUwNCwiZHVwIjo0MzcsImluaGVyaXRzIjo0NjN9XSw0Njg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDM4XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vaGFzaCI6NDY1LCJidWZmZXIiOjUwNCwiZHVwIjo0MzgsImluaGVyaXRzIjo0NjN9XSw0Njk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDM5XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vaGFzaCI6NDY1LCIuL3NoYTI1NiI6NDcwLCJidWZmZXIiOjUwNCwiZHVwIjo0MzksImluaGVyaXRzIjo0NjN9XSw0NzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDQwXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vaGFzaCI6NDY1LCJidWZmZXIiOjUwNCwiZHVwIjo0NDAsImluaGVyaXRzIjo0NjN9XSw0NzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDQxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vaGFzaCI6NDY1LCIuL3NoYTUxMiI6NDcyLCJidWZmZXIiOjUwNCwiZHVwIjo0NDEsImluaGVyaXRzIjo0NjN9XSw0NzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDQyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vaGFzaCI6NDY1LCJidWZmZXIiOjUwNCwiZHVwIjo0NDIsImluaGVyaXRzIjo0NjN9XSw0NzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDQ0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJjcmVhdGUtaGFzaC9icm93c2VyIjo0NTksImR1cCI6NDQ0LCJpbmhlcml0cyI6NDc0LCJzdHJlYW0iOjcxOX1dLDQ3NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MzNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo0MzN9XSw0NzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JykKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKCnZhciBQb2ludCA9IHJlcXVpcmUoJy4vcG9pbnQnKQoKZnVuY3Rpb24gQ3VydmUgKHAsIGEsIGIsIEd4LCBHeSwgbiwgaCkgewogIHRoaXMucCA9IHAKICB0aGlzLmEgPSBhCiAgdGhpcy5iID0gYgogIHRoaXMuRyA9IFBvaW50LmZyb21BZmZpbmUodGhpcywgR3gsIEd5KQogIHRoaXMubiA9IG4KICB0aGlzLmggPSBoCgogIHRoaXMuaW5maW5pdHkgPSBuZXcgUG9pbnQodGhpcywgbnVsbCwgbnVsbCwgQmlnSW50ZWdlci5aRVJPKQoKICAvLyByZXN1bHQgY2FjaGluZwogIHRoaXMucE92ZXJGb3VyID0gcC5hZGQoQmlnSW50ZWdlci5PTkUpLnNoaWZ0UmlnaHQoMikKfQoKQ3VydmUucHJvdG90eXBlLnBvaW50RnJvbVggPSBmdW5jdGlvbiAoaXNPZGQsIHgpIHsKICB2YXIgYWxwaGEgPSB4LnBvdygzKS5hZGQodGhpcy5hLm11bHRpcGx5KHgpKS5hZGQodGhpcy5iKS5tb2QodGhpcy5wKQogIHZhciBiZXRhID0gYWxwaGEubW9kUG93KHRoaXMucE92ZXJGb3VyLCB0aGlzLnApIC8vIFhYWDogbm90IGNvbXBhdGlibGUgd2l0aCBhbGwgY3VydmVzCgogIHZhciB5ID0gYmV0YQogIGlmIChiZXRhLmlzRXZlbigpIF4gIWlzT2RkKSB7CiAgICB5ID0gdGhpcy5wLnN1YnRyYWN0KHkpIC8vIC15ICUgcAogIH0KCiAgcmV0dXJuIFBvaW50LmZyb21BZmZpbmUodGhpcywgeCwgeSkKfQoKQ3VydmUucHJvdG90eXBlLmlzSW5maW5pdHkgPSBmdW5jdGlvbiAoUSkgewogIGlmIChRID09PSB0aGlzLmluZmluaXR5KSByZXR1cm4gdHJ1ZQoKICByZXR1cm4gUS56LnNpZ251bSgpID09PSAwICYmIFEueS5zaWdudW0oKSAhPT0gMAp9CgpDdXJ2ZS5wcm90b3R5cGUuaXNPbkN1cnZlID0gZnVuY3Rpb24gKFEpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KFEpKSByZXR1cm4gdHJ1ZQoKICB2YXIgeCA9IFEuYWZmaW5lWAogIHZhciB5ID0gUS5hZmZpbmVZCiAgdmFyIGEgPSB0aGlzLmEKICB2YXIgYiA9IHRoaXMuYgogIHZhciBwID0gdGhpcy5wCgogIC8vIENoZWNrIHRoYXQgeFEgYW5kIHlRIGFyZSBpbnRlZ2VycyBpbiB0aGUgaW50ZXJ2YWwgWzAsIHAgLSAxXQogIGlmICh4LnNpZ251bSgpIDwgMCB8fCB4LmNvbXBhcmVUbyhwKSA+PSAwKSByZXR1cm4gZmFsc2UKICBpZiAoeS5zaWdudW0oKSA8IDAgfHwgeS5jb21wYXJlVG8ocCkgPj0gMCkgcmV0dXJuIGZhbHNlCgogIC8vIGFuZCBjaGVjayB0aGF0IHleMiA9IHheMyArIGF4ICsgYiAobW9kIHApCiAgdmFyIGxocyA9IHkuc3F1YXJlKCkubW9kKHApCiAgdmFyIHJocyA9IHgucG93KDMpLmFkZChhLm11bHRpcGx5KHgpKS5hZGQoYikubW9kKHApCiAgcmV0dXJuIGxocy5lcXVhbHMocmhzKQp9CgovKioKICogVmFsaWRhdGUgYW4gZWxsaXB0aWMgY3VydmUgcG9pbnQuCiAqCiAqIFNlZSBTRUMgMSwgc2VjdGlvbiAzLjIuMi4xOiBFbGxpcHRpYyBDdXJ2ZSBQdWJsaWMgS2V5IFZhbGlkYXRpb24gUHJpbWl0aXZlCiAqLwpDdXJ2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiAoUSkgewogIC8vIENoZWNrIFEgIT0gTwogIGFzc2VydCghdGhpcy5pc0luZmluaXR5KFEpLCAnUG9pbnQgaXMgYXQgaW5maW5pdHknKQogIGFzc2VydCh0aGlzLmlzT25DdXJ2ZShRKSwgJ1BvaW50IGlzIG5vdCBvbiB0aGUgY3VydmUnKQoKICAvLyBDaGVjayBuUSA9IE8gKHdoZXJlIFEgaXMgYSBzY2FsYXIgbXVsdGlwbGUgb2YgRykKICB2YXIgblEgPSBRLm11bHRpcGx5KHRoaXMubikKICBhc3NlcnQodGhpcy5pc0luZmluaXR5KG5RKSwgJ1BvaW50IGlzIG5vdCBhIHNjYWxhciBtdWx0aXBsZSBvZiBHJykKCiAgcmV0dXJuIHRydWUKfQoKbW9kdWxlLmV4cG9ydHMgPSBDdXJ2ZQoKfSx7Ii4vcG9pbnQiOjQ3OSwiYXNzZXJ0Ijo1MDIsImJpZ2kiOjQ1MX1dLDQ3NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAic2VjcDEyOHIxIjogewogICAgInAiOiAiZmZmZmZmZmRmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYiLAogICAgImEiOiAiZmZmZmZmZmRmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmMiLAogICAgImIiOiAiZTg3NTc5YzExMDc5ZjQzZGQ4MjQ5OTNjMmNlZTVlZDMiLAogICAgIm4iOiAiZmZmZmZmZmUwMDAwMDAwMDc1YTMwZDFiOTAzOGExMTUiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjE2MWZmNzUyOGI4OTliMmQwYzI4NjA3Y2E1MmM1Yjg2IiwKICAgICJHeSI6ICJjZjVhYzgzOTViYWZlYjEzYzAyZGEyOTJkZGVkN2E4MyIKICB9LAogICJzZWNwMTYwazEiOiB7CiAgICAicCI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWZmZmZhYzczIiwKICAgICJhIjogIjAwIiwKICAgICJiIjogIjA3IiwKICAgICJuIjogIjAxMDAwMDAwMDAwMDAwMDAwMDAwMDFiOGZhMTZkZmFiOWFjYTE2YjZiMyIsCiAgICAiaCI6ICIwMSIsCiAgICAiR3giOiAiM2I0YzM4MmNlMzdhYTE5MmE0MDE5ZTc2MzAzNmY0ZjVkZDRkN2ViYiIsCiAgICAiR3kiOiAiOTM4Y2Y5MzUzMThmZGNlZDZiYzI4Mjg2NTMxNzMzYzNmMDNjNGZlZSIKICB9LAogICJzZWNwMTYwcjEiOiB7CiAgICAicCI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjdmZmZmZmZmIiwKICAgICJhIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmN2ZmZmZmZmMiLAogICAgImIiOiAiMWM5N2JlZmM1NGJkN2E4YjY1YWNmODlmODFkNGQ0YWRjNTY1ZmE0NSIsCiAgICAibiI6ICIwMTAwMDAwMDAwMDAwMDAwMDAwMDAxZjRjOGY5MjdhZWQzY2E3NTIyNTciLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjRhOTZiNTY4OGVmNTczMjg0NjY0Njk4OTY4YzM4YmI5MTNjYmZjODIiLAogICAgIkd5IjogIjIzYTYyODU1MzE2ODk0N2Q1OWRjYzkxMjA0MjM1MTM3N2FjNWZiMzIiCiAgfSwKICAic2VjcDE5MmsxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWZmZmZlZTM3IiwKICAgICJhIjogIjAwIiwKICAgICJiIjogIjAzIiwKICAgICJuIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZTI2ZjJmYzE3MGY2OTQ2NmE3NGRlZmQ4ZCIsCiAgICAiaCI6ICIwMSIsCiAgICAiR3giOiAiZGI0ZmYxMGVjMDU3ZTlhZTI2YjA3ZDAyODBiN2Y0MzQxZGE1ZDFiMWVhZTA2YzdkIiwKICAgICJHeSI6ICI5YjJmMmY2ZDljNTYyOGE3ODQ0MTYzZDAxNWJlODYzNDQwODJhYTg4ZDk1ZTJmOWQiCiAgfSwKICAic2VjcDE5MnIxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZmZmZmZmZmZmZmZmIiwKICAgICJhIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlZmZmZmZmZmZmZmZmZmZmYyIsCiAgICAiYiI6ICI2NDIxMDUxOWU1OWM4MGU3MGZhN2U5YWI3MjI0MzA0OWZlYjhkZWVjYzE0NmI5YjEiLAogICAgIm4iOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmOTlkZWY4MzYxNDZiYzliMWI0ZDIyODMxIiwKICAgICJoIjogIjAxIiwKICAgICJHeCI6ICIxODhkYTgwZWIwMzA5MGY2N2NiZjIwZWI0M2ExODgwMGY0ZmYwYWZkODJmZjEwMTIiLAogICAgIkd5IjogIjA3MTkyYjk1ZmZjOGRhNzg2MzEwMTFlZDZiMjRjZGQ1NzNmOTc3YTExZTc5NDgxMSIKICB9LAogICJzZWNwMjU2azEiOiB7CiAgICAicCI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWZmZmZmYzJmIiwKICAgICJhIjogIjAwIiwKICAgICJiIjogIjA3IiwKICAgICJuIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlYmFhZWRjZTZhZjQ4YTAzYmJmZDI1ZThjZDAzNjQxNDEiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjc5YmU2NjdlZjlkY2JiYWM1NWEwNjI5NWNlODcwYjA3MDI5YmZjZGIyZGNlMjhkOTU5ZjI4MTViMTZmODE3OTgiLAogICAgIkd5IjogIjQ4M2FkYTc3MjZhM2M0NjU1ZGE0ZmJmYzBlMTEwOGE4ZmQxN2I0NDhhNjg1NTQxOTljNDdkMDhmZmIxMGQ0YjgiCiAgfSwKICAic2VjcDI1NnIxIjogewogICAgInAiOiAiZmZmZmZmZmYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZiIsCiAgICAiYSI6ICJmZmZmZmZmZjAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjIiwKICAgICJiIjogIjVhYzYzNWQ4YWEzYTkzZTdiM2ViYmQ1NTc2OTg4NmJjNjUxZDA2YjBjYzUzYjBmNjNiY2UzYzNlMjdkMjYwNGIiLAogICAgIm4iOiAiZmZmZmZmZmYwMDAwMDAwMGZmZmZmZmZmZmZmZmZmZmZiY2U2ZmFhZGE3MTc5ZTg0ZjNiOWNhYzJmYzYzMjU1MSIsCiAgICAiaCI6ICIwMSIsCiAgICAiR3giOiAiNmIxN2QxZjJlMTJjNDI0N2Y4YmNlNmU1NjNhNDQwZjI3NzAzN2Q4MTJkZWIzM2EwZjRhMTM5NDVkODk4YzI5NiIsCiAgICAiR3kiOiAiNGZlMzQyZTJmZTFhN2Y5YjhlZTdlYjRhN2MwZjllMTYyYmNlMzM1NzZiMzE1ZWNlY2JiNjQwNjgzN2JmNTFmNSIKICB9Cn0KCn0se31dLDQ3NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBQb2ludCA9IHJlcXVpcmUoJy4vcG9pbnQnKQp2YXIgQ3VydmUgPSByZXF1aXJlKCcuL2N1cnZlJykKCnZhciBnZXRDdXJ2ZUJ5TmFtZSA9IHJlcXVpcmUoJy4vbmFtZXMnKQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgQ3VydmU6IEN1cnZlLAogIFBvaW50OiBQb2ludCwKICBnZXRDdXJ2ZUJ5TmFtZTogZ2V0Q3VydmVCeU5hbWUKfQoKfSx7Ii4vY3VydmUiOjQ3NSwiLi9uYW1lcyI6NDc4LCIuL3BvaW50Ijo0Nzl9XSw0Nzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQoKdmFyIGN1cnZlcyA9IHJlcXVpcmUoJy4vY3VydmVzLmpzb24nKQp2YXIgQ3VydmUgPSByZXF1aXJlKCcuL2N1cnZlJykKCmZ1bmN0aW9uIGdldEN1cnZlQnlOYW1lIChuYW1lKSB7CiAgdmFyIGN1cnZlID0gY3VydmVzW25hbWVdCiAgaWYgKCFjdXJ2ZSkgcmV0dXJuIG51bGwKCiAgdmFyIHAgPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5wLCAxNikKICB2YXIgYSA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLmEsIDE2KQogIHZhciBiID0gbmV3IEJpZ0ludGVnZXIoY3VydmUuYiwgMTYpCiAgdmFyIG4gPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5uLCAxNikKICB2YXIgaCA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLmgsIDE2KQogIHZhciBHeCA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLkd4LCAxNikKICB2YXIgR3kgPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5HeSwgMTYpCgogIHJldHVybiBuZXcgQ3VydmUocCwgYSwgYiwgR3gsIEd5LCBuLCBoKQp9Cgptb2R1bGUuZXhwb3J0cyA9IGdldEN1cnZlQnlOYW1lCgp9LHsiLi9jdXJ2ZSI6NDc1LCIuL2N1cnZlcy5qc29uIjo0NzYsImJpZ2kiOjQ1MX1dLDQ3OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ2Fzc2VydCcpCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCgp2YXIgVEhSRUUgPSBCaWdJbnRlZ2VyLnZhbHVlT2YoMykKCmZ1bmN0aW9uIFBvaW50IChjdXJ2ZSwgeCwgeSwgeikgewogIGFzc2VydC5ub3RTdHJpY3RFcXVhbCh6LCB1bmRlZmluZWQsICdNaXNzaW5nIFogY29vcmRpbmF0ZScpCgogIHRoaXMuY3VydmUgPSBjdXJ2ZQogIHRoaXMueCA9IHgKICB0aGlzLnkgPSB5CiAgdGhpcy56ID0gegogIHRoaXMuX3pJbnYgPSBudWxsCgogIHRoaXMuY29tcHJlc3NlZCA9IHRydWUKfQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KFBvaW50LnByb3RvdHlwZSwgJ3pJbnYnLCB7CiAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodGhpcy5fekludiA9PT0gbnVsbCkgewogICAgICB0aGlzLl96SW52ID0gdGhpcy56Lm1vZEludmVyc2UodGhpcy5jdXJ2ZS5wKQogICAgfQoKICAgIHJldHVybiB0aGlzLl96SW52CiAgfQp9KQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KFBvaW50LnByb3RvdHlwZSwgJ2FmZmluZVgnLCB7CiAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy54Lm11bHRpcGx5KHRoaXMuekludikubW9kKHRoaXMuY3VydmUucCkKICB9Cn0pCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoUG9pbnQucHJvdG90eXBlLCAnYWZmaW5lWScsIHsKICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLnkubXVsdGlwbHkodGhpcy56SW52KS5tb2QodGhpcy5jdXJ2ZS5wKQogIH0KfSkKClBvaW50LmZyb21BZmZpbmUgPSBmdW5jdGlvbiAoY3VydmUsIHgsIHkpIHsKICByZXR1cm4gbmV3IFBvaW50KGN1cnZlLCB4LCB5LCBCaWdJbnRlZ2VyLk9ORSkKfQoKUG9pbnQucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikgewogIGlmIChvdGhlciA9PT0gdGhpcykgcmV0dXJuIHRydWUKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gdGhpcy5jdXJ2ZS5pc0luZmluaXR5KG90aGVyKQogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkob3RoZXIpKSByZXR1cm4gdGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpCgogIC8vIHUgPSBZMiAqIFoxIC0gWTEgKiBaMgogIHZhciB1ID0gb3RoZXIueS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueS5tdWx0aXBseShvdGhlci56KSkubW9kKHRoaXMuY3VydmUucCkKCiAgaWYgKHUuc2lnbnVtKCkgIT09IDApIHJldHVybiBmYWxzZQoKICAvLyB2ID0gWDIgKiBaMSAtIFgxICogWjIKICB2YXIgdiA9IG90aGVyLngubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLngubXVsdGlwbHkob3RoZXIueikpLm1vZCh0aGlzLmN1cnZlLnApCgogIHJldHVybiB2LnNpZ251bSgpID09PSAwCn0KClBvaW50LnByb3RvdHlwZS5uZWdhdGUgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHkgPSB0aGlzLmN1cnZlLnAuc3VidHJhY3QodGhpcy55KQoKICByZXR1cm4gbmV3IFBvaW50KHRoaXMuY3VydmUsIHRoaXMueCwgeSwgdGhpcy56KQp9CgpQb2ludC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGIpIHsKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gYgogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkoYikpIHJldHVybiB0aGlzCgogIHZhciB4MSA9IHRoaXMueAogIHZhciB5MSA9IHRoaXMueQogIHZhciB4MiA9IGIueAogIHZhciB5MiA9IGIueQoKICAvLyB1ID0gWTIgKiBaMSAtIFkxICogWjIKICB2YXIgdSA9IHkyLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QoeTEubXVsdGlwbHkoYi56KSkubW9kKHRoaXMuY3VydmUucCkKICAvLyB2ID0gWDIgKiBaMSAtIFgxICogWjIKICB2YXIgdiA9IHgyLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QoeDEubXVsdGlwbHkoYi56KSkubW9kKHRoaXMuY3VydmUucCkKCiAgaWYgKHYuc2lnbnVtKCkgPT09IDApIHsKICAgIGlmICh1LnNpZ251bSgpID09PSAwKSB7CiAgICAgIHJldHVybiB0aGlzLnR3aWNlKCkgLy8gdGhpcyA9PSBiLCBzbyBkb3VibGUKICAgIH0KCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5pbmZpbml0eSAvLyB0aGlzID0gLWIsIHNvIGluZmluaXR5CiAgfQoKICB2YXIgdjIgPSB2LnNxdWFyZSgpCiAgdmFyIHYzID0gdjIubXVsdGlwbHkodikKICB2YXIgeDF2MiA9IHgxLm11bHRpcGx5KHYyKQogIHZhciB6dTIgPSB1LnNxdWFyZSgpLm11bHRpcGx5KHRoaXMueikKCiAgLy8geDMgPSB2ICogKHoyICogKHoxICogdV4yIC0gMiAqIHgxICogdl4yKSAtIHZeMykKICB2YXIgeDMgPSB6dTIuc3VidHJhY3QoeDF2Mi5zaGlmdExlZnQoMSkpLm11bHRpcGx5KGIueikuc3VidHJhY3QodjMpLm11bHRpcGx5KHYpLm1vZCh0aGlzLmN1cnZlLnApCiAgLy8geTMgPSB6MiAqICgzICogeDEgKiB1ICogdl4yIC0geTEgKiB2XjMgLSB6MSAqIHVeMykgKyB1ICogdl4zCiAgdmFyIHkzID0geDF2Mi5tdWx0aXBseShUSFJFRSkubXVsdGlwbHkodSkuc3VidHJhY3QoeTEubXVsdGlwbHkodjMpKS5zdWJ0cmFjdCh6dTIubXVsdGlwbHkodSkpLm11bHRpcGx5KGIueikuYWRkKHUubXVsdGlwbHkodjMpKS5tb2QodGhpcy5jdXJ2ZS5wKQogIC8vIHozID0gdl4zICogejEgKiB6MgogIHZhciB6MyA9IHYzLm11bHRpcGx5KHRoaXMueikubXVsdGlwbHkoYi56KS5tb2QodGhpcy5jdXJ2ZS5wKQoKICByZXR1cm4gbmV3IFBvaW50KHRoaXMuY3VydmUsIHgzLCB5MywgejMpCn0KClBvaW50LnByb3RvdHlwZS50d2ljZSA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gdGhpcwogIGlmICh0aGlzLnkuc2lnbnVtKCkgPT09IDApIHJldHVybiB0aGlzLmN1cnZlLmluZmluaXR5CgogIHZhciB4MSA9IHRoaXMueAogIHZhciB5MSA9IHRoaXMueQoKICB2YXIgeTF6MSA9IHkxLm11bHRpcGx5KHRoaXMueikKICB2YXIgeTFzcXoxID0geTF6MS5tdWx0aXBseSh5MSkubW9kKHRoaXMuY3VydmUucCkKICB2YXIgYSA9IHRoaXMuY3VydmUuYQoKICAvLyB3ID0gMyAqIHgxXjIgKyBhICogejFeMgogIHZhciB3ID0geDEuc3F1YXJlKCkubXVsdGlwbHkoVEhSRUUpCgogIGlmIChhLnNpZ251bSgpICE9PSAwKSB7CiAgICB3ID0gdy5hZGQodGhpcy56LnNxdWFyZSgpLm11bHRpcGx5KGEpKQogIH0KCiAgdyA9IHcubW9kKHRoaXMuY3VydmUucCkKICAvLyB4MyA9IDIgKiB5MSAqIHoxICogKHdeMiAtIDggKiB4MSAqIHkxXjIgKiB6MSkKICB2YXIgeDMgPSB3LnNxdWFyZSgpLnN1YnRyYWN0KHgxLnNoaWZ0TGVmdCgzKS5tdWx0aXBseSh5MXNxejEpKS5zaGlmdExlZnQoMSkubXVsdGlwbHkoeTF6MSkubW9kKHRoaXMuY3VydmUucCkKICAvLyB5MyA9IDQgKiB5MV4yICogejEgKiAoMyAqIHcgKiB4MSAtIDIgKiB5MV4yICogejEpIC0gd14zCiAgdmFyIHkzID0gdy5tdWx0aXBseShUSFJFRSkubXVsdGlwbHkoeDEpLnN1YnRyYWN0KHkxc3F6MS5zaGlmdExlZnQoMSkpLnNoaWZ0TGVmdCgyKS5tdWx0aXBseSh5MXNxejEpLnN1YnRyYWN0KHcucG93KDMpKS5tb2QodGhpcy5jdXJ2ZS5wKQogIC8vIHozID0gOCAqICh5MSAqIHoxKV4zCiAgdmFyIHozID0geTF6MS5wb3coMykuc2hpZnRMZWZ0KDMpLm1vZCh0aGlzLmN1cnZlLnApCgogIHJldHVybiBuZXcgUG9pbnQodGhpcy5jdXJ2ZSwgeDMsIHkzLCB6MykKfQoKLy8gU2ltcGxlIE5BRiAoTm9uLUFkamFjZW50IEZvcm0pIG11bHRpcGxpY2F0aW9uIGFsZ29yaXRobQovLyBUT0RPOiBtb2R1bGFyaXplIHRoZSBtdWx0aXBsaWNhdGlvbiBhbGdvcml0aG0KUG9pbnQucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKGspIHsKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gdGhpcwogIGlmIChrLnNpZ251bSgpID09PSAwKSByZXR1cm4gdGhpcy5jdXJ2ZS5pbmZpbml0eQoKICB2YXIgZSA9IGsKICB2YXIgaCA9IGUubXVsdGlwbHkoVEhSRUUpCgogIHZhciBuZWcgPSB0aGlzLm5lZ2F0ZSgpCiAgdmFyIFIgPSB0aGlzCgogIGZvciAodmFyIGkgPSBoLmJpdExlbmd0aCgpIC0gMjsgaSA+IDA7IC0taSkgewogICAgdmFyIGhCaXQgPSBoLnRlc3RCaXQoaSkKICAgIHZhciBlQml0ID0gZS50ZXN0Qml0KGkpCgogICAgUiA9IFIudHdpY2UoKQoKICAgIGlmIChoQml0ICE9PSBlQml0KSB7CiAgICAgIFIgPSBSLmFkZChoQml0ID8gdGhpcyA6IG5lZykKICAgIH0KICB9CgogIHJldHVybiBSCn0KCi8vIENvbXB1dGUgdGhpcypqICsgeCprIChzaW11bHRhbmVvdXMgbXVsdGlwbGljYXRpb24pClBvaW50LnByb3RvdHlwZS5tdWx0aXBseVR3byA9IGZ1bmN0aW9uIChqLCB4LCBrKSB7CiAgdmFyIGkgPSBNYXRoLm1heChqLmJpdExlbmd0aCgpLCBrLmJpdExlbmd0aCgpKSAtIDEKICB2YXIgUiA9IHRoaXMuY3VydmUuaW5maW5pdHkKICB2YXIgYm90aCA9IHRoaXMuYWRkKHgpCgogIHdoaWxlIChpID49IDApIHsKICAgIHZhciBqQml0ID0gai50ZXN0Qml0KGkpCiAgICB2YXIga0JpdCA9IGsudGVzdEJpdChpKQoKICAgIFIgPSBSLnR3aWNlKCkKCiAgICBpZiAoakJpdCkgewogICAgICBpZiAoa0JpdCkgewogICAgICAgIFIgPSBSLmFkZChib3RoKQogICAgICB9IGVsc2UgewogICAgICAgIFIgPSBSLmFkZCh0aGlzKQogICAgICB9CiAgICB9IGVsc2UgaWYgKGtCaXQpIHsKICAgICAgUiA9IFIuYWRkKHgpCiAgICB9CiAgICAtLWkKICB9CgogIHJldHVybiBSCn0KClBvaW50LnByb3RvdHlwZS5nZXRFbmNvZGVkID0gZnVuY3Rpb24gKGNvbXByZXNzZWQpIHsKICBpZiAoY29tcHJlc3NlZCA9PSBudWxsKSBjb21wcmVzc2VkID0gdGhpcy5jb21wcmVzc2VkCiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKSkgcmV0dXJuIG5ldyBCdWZmZXIoJzAwJywgJ2hleCcpIC8vIEluZmluaXR5IHBvaW50IGVuY29kZWQgaXMgc2ltcGx5ICcwMCcKCiAgdmFyIHggPSB0aGlzLmFmZmluZVgKICB2YXIgeSA9IHRoaXMuYWZmaW5lWQoKICB2YXIgYnVmZmVyCgogIC8vIERldGVybWluZSBzaXplIG9mIHEgaW4gYnl0ZXMKICB2YXIgYnl0ZUxlbmd0aCA9IE1hdGguZmxvb3IoKHRoaXMuY3VydmUucC5iaXRMZW5ndGgoKSArIDcpIC8gOCkKCiAgLy8gMHgwMi8weDAzIHwgWAogIGlmIChjb21wcmVzc2VkKSB7CiAgICBidWZmZXIgPSBuZXcgQnVmZmVyKDEgKyBieXRlTGVuZ3RoKQogICAgYnVmZmVyLndyaXRlVUludDgoeS5pc0V2ZW4oKSA/IDB4MDIgOiAweDAzLCAwKQoKICAvLyAweDA0IHwgWCB8IFkKICB9IGVsc2UgewogICAgYnVmZmVyID0gbmV3IEJ1ZmZlcigxICsgYnl0ZUxlbmd0aCArIGJ5dGVMZW5ndGgpCiAgICBidWZmZXIud3JpdGVVSW50OCgweDA0LCAwKQoKICAgIHkudG9CdWZmZXIoYnl0ZUxlbmd0aCkuY29weShidWZmZXIsIDEgKyBieXRlTGVuZ3RoKQogIH0KCiAgeC50b0J1ZmZlcihieXRlTGVuZ3RoKS5jb3B5KGJ1ZmZlciwgMSkKCiAgcmV0dXJuIGJ1ZmZlcgp9CgpQb2ludC5kZWNvZGVGcm9tID0gZnVuY3Rpb24gKGN1cnZlLCBidWZmZXIpIHsKICB2YXIgdHlwZSA9IGJ1ZmZlci5yZWFkVUludDgoMCkKICB2YXIgY29tcHJlc3NlZCA9ICh0eXBlICE9PSA0KQoKICB2YXIgYnl0ZUxlbmd0aCA9IE1hdGguZmxvb3IoKGN1cnZlLnAuYml0TGVuZ3RoKCkgKyA3KSAvIDgpCiAgdmFyIHggPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoYnVmZmVyLnNsaWNlKDEsIDEgKyBieXRlTGVuZ3RoKSkKCiAgdmFyIFEKICBpZiAoY29tcHJlc3NlZCkgewogICAgYXNzZXJ0LmVxdWFsKGJ1ZmZlci5sZW5ndGgsIGJ5dGVMZW5ndGggKyAxLCAnSW52YWxpZCBzZXF1ZW5jZSBsZW5ndGgnKQogICAgYXNzZXJ0KHR5cGUgPT09IDB4MDIgfHwgdHlwZSA9PT0gMHgwMywgJ0ludmFsaWQgc2VxdWVuY2UgdGFnJykKCiAgICB2YXIgaXNPZGQgPSAodHlwZSA9PT0gMHgwMykKICAgIFEgPSBjdXJ2ZS5wb2ludEZyb21YKGlzT2RkLCB4KQogIH0gZWxzZSB7CiAgICBhc3NlcnQuZXF1YWwoYnVmZmVyLmxlbmd0aCwgMSArIGJ5dGVMZW5ndGggKyBieXRlTGVuZ3RoLCAnSW52YWxpZCBzZXF1ZW5jZSBsZW5ndGgnKQoKICAgIHZhciB5ID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGJ1ZmZlci5zbGljZSgxICsgYnl0ZUxlbmd0aCkpCiAgICBRID0gUG9pbnQuZnJvbUFmZmluZShjdXJ2ZSwgeCwgeSkKICB9CgogIFEuY29tcHJlc3NlZCA9IGNvbXByZXNzZWQKICByZXR1cm4gUQp9CgpQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKSkgcmV0dXJuICcoSU5GSU5JVFkpJwoKICByZXR1cm4gJygnICsgdGhpcy5hZmZpbmVYLnRvU3RyaW5nKCkgKyAnLCcgKyB0aGlzLmFmZmluZVkudG9TdHJpbmcoKSArICcpJwp9Cgptb2R1bGUuZXhwb3J0cyA9IFBvaW50Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYXNzZXJ0Ijo1MDIsImJpZ2kiOjQ1MSwiYnVmZmVyIjo1MDR9XSw0ODA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDQ2XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Il9wcm9jZXNzIjo3MDMsImJ1ZmZlciI6NTA0LCJkdXAiOjQ0Nn1dLDQ4MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQoKZnVuY3Rpb24gVGZUeXBlRXJyb3IgKHR5cGUsIHZhbHVlKSB7CiAgdGhpcy50ZkVycm9yID0gRXJyb3IuY2FsbCh0aGlzKQoKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHsKICAgIHRoaXMubWVzc2FnZSA9IHR5cGUKICB9IGVsc2UgewogICAgdGhpcy50ZlR5cGUgPSB0eXBlCiAgICB0aGlzLnRmVmFsdWUgPSB2YWx1ZQoKICAgIHZhciBtZXNzYWdlCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ21lc3NhZ2UnLCB7CiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChtZXNzYWdlKSByZXR1cm4gbWVzc2FnZQogICAgICAgIG1lc3NhZ2UgPSB0ZkVycm9yU3RyaW5nKHR5cGUsIHZhbHVlKQoKICAgICAgICByZXR1cm4gbWVzc2FnZQogICAgICB9CiAgICB9KQogIH0KfQoKaW5oZXJpdHMoVGZUeXBlRXJyb3IsIEVycm9yKQpPYmplY3QuZGVmaW5lUHJvcGVydHkoVGZUeXBlRXJyb3IsICdzdGFjaycsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnRmRXJyb3Iuc3RhY2sgfSB9KQoKZnVuY3Rpb24gVGZQcm9wZXJ0eVR5cGVFcnJvciAodHlwZSwgcHJvcGVydHksIHZhbHVlLCBlcnJvcikgewogIHRoaXMudGZFcnJvciA9IGVycm9yIHx8IEVycm9yLmNhbGwodGhpcykKICB0aGlzLnRmUHJvcGVydHkgPSBwcm9wZXJ0eQogIHRoaXMudGZUeXBlID0gdHlwZQogIHRoaXMudGZWYWx1ZSA9IHZhbHVlCgogIHZhciBtZXNzYWdlCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdtZXNzYWdlJywgewogICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChtZXNzYWdlKSByZXR1cm4gbWVzc2FnZQogICAgICBpZiAodHlwZSkgewogICAgICAgIG1lc3NhZ2UgPSB0ZlByb3BlcnR5RXJyb3JTdHJpbmcodHlwZSwgcHJvcGVydHksIHZhbHVlKQogICAgICB9IGVsc2UgewogICAgICAgIG1lc3NhZ2UgPSAnVW5leHBlY3RlZCBwcm9wZXJ0eSAiJyArIHByb3BlcnR5ICsgJyInCiAgICAgIH0KCiAgICAgIHJldHVybiBtZXNzYWdlCiAgICB9CiAgfSkKfQoKaW5oZXJpdHMoVGZQcm9wZXJ0eVR5cGVFcnJvciwgRXJyb3IpCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZlByb3BlcnR5VHlwZUVycm9yLCAnc3RhY2snLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50ZkVycm9yLnN0YWNrIH0gfSkKClRmUHJvcGVydHlUeXBlRXJyb3IucHJvdG90eXBlLmFzQ2hpbGRPZiA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkgewogIHJldHVybiBuZXcgVGZQcm9wZXJ0eVR5cGVFcnJvcih0aGlzLnRmVHlwZSwgcHJvcGVydHkgKyAnLicgKyB0aGlzLnRmUHJvcGVydHksIHRoaXMudGZWYWx1ZSwgdGhpcy50ZkVycm9yKQp9CgpmdW5jdGlvbiBnZXRGdW5jdGlvbk5hbWUgKGZuKSB7CiAgcmV0dXJuIGZuLm5hbWUgfHwgZm4udG9TdHJpbmcoKS5tYXRjaCgvZnVuY3Rpb24gKC4qPylccypcKC8pWzFdCn0KCmZ1bmN0aW9uIGdldFZhbHVlVHlwZU5hbWUgKHZhbHVlKSB7CiAgaWYgKG5hdGl2ZVR5cGVzLk51bGwodmFsdWUpKSByZXR1cm4gJycKCiAgcmV0dXJuIGdldEZ1bmN0aW9uTmFtZSh2YWx1ZS5jb25zdHJ1Y3RvcikKfQoKZnVuY3Rpb24gZ2V0VmFsdWUgKHZhbHVlKSB7CiAgaWYgKG5hdGl2ZVR5cGVzLkZ1bmN0aW9uKHZhbHVlKSkgcmV0dXJuICcnCiAgaWYgKG5hdGl2ZVR5cGVzLlN0cmluZyh2YWx1ZSkpIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSkKICBpZiAodmFsdWUgJiYgbmF0aXZlVHlwZXMuT2JqZWN0KHZhbHVlKSkgcmV0dXJuICcnCgogIHJldHVybiB2YWx1ZQp9CgpmdW5jdGlvbiB0ZkpTT04gKHR5cGUpIHsKICBpZiAobmF0aXZlVHlwZXMuRnVuY3Rpb24odHlwZSkpIHJldHVybiB0eXBlLnRvSlNPTiA/IHR5cGUudG9KU09OKCkgOiBnZXRGdW5jdGlvbk5hbWUodHlwZSkKICBpZiAobmF0aXZlVHlwZXMuQXJyYXkodHlwZSkpIHJldHVybiAnQXJyYXknCiAgaWYgKHR5cGUgJiYgbmF0aXZlVHlwZXMuT2JqZWN0KHR5cGUpKSByZXR1cm4gJ09iamVjdCcKCiAgcmV0dXJuIHR5cGUgfHwgJycKfQoKZnVuY3Rpb24gc3RmSlNPTiAodHlwZSkgewogIHR5cGUgPSB0ZkpTT04odHlwZSkKCiAgcmV0dXJuIG5hdGl2ZVR5cGVzLk9iamVjdCh0eXBlKSA/IEpTT04uc3RyaW5naWZ5KHR5cGUpIDogdHlwZQp9CgpmdW5jdGlvbiB0ZkVycm9yU3RyaW5nICh0eXBlLCB2YWx1ZSkgewogIHZhciB2YWx1ZVR5cGVOYW1lID0gZ2V0VmFsdWVUeXBlTmFtZSh2YWx1ZSkKICB2YXIgdmFsdWVWYWx1ZSA9IGdldFZhbHVlKHZhbHVlKQoKICByZXR1cm4gJ0V4cGVjdGVkICcgKyBzdGZKU09OKHR5cGUpICsgJywgZ290JyArICh2YWx1ZVR5cGVOYW1lICE9PSAnJyA/ICcgJyArIHZhbHVlVHlwZU5hbWUgOiAnJykgKyAodmFsdWVWYWx1ZSAhPT0gJycgPyAnICcgKyB2YWx1ZVZhbHVlIDogJycpCn0KCmZ1bmN0aW9uIHRmUHJvcGVydHlFcnJvclN0cmluZyAodHlwZSwgbmFtZSwgdmFsdWUpIHsKICByZXR1cm4gdGZFcnJvclN0cmluZygncHJvcGVydHkgXCInICsgc3RmSlNPTihuYW1lKSArICdcIiBvZiB0eXBlICcgKyBzdGZKU09OKHR5cGUpLCB2YWx1ZSkKfQoKdmFyIG5hdGl2ZVR5cGVzID0gewogIEFycmF5OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5IH0sCiAgQm9vbGVhbjogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJyB9LAogIEJ1ZmZlcjogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBCdWZmZXIuaXNCdWZmZXIodmFsdWUpIH0sCiAgRnVuY3Rpb246IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nIH0sCiAgTnVsbDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsIH0sCiAgTnVtYmVyOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfSwKICBPYmplY3Q6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyB9LAogIFN0cmluZzogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIH0sCiAgJyc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWUgfQp9Cgp2YXIgb3RoZXJUeXBlcyA9IHsKICBhcnJheU9mOiBmdW5jdGlvbiBhcnJheU9mICh0eXBlKSB7CiAgICBmdW5jdGlvbiBhcnJheU9mICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIGlmICghbmF0aXZlVHlwZXMuQXJyYXkodmFsdWUpKSByZXR1cm4gZmFsc2UKCiAgICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB0eXBlZm9yY2UodHlwZSwgeCwgc3RyaWN0LCBhcnJheU9mKQogICAgICB9KQogICAgfQogICAgYXJyYXlPZi50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbdGZKU09OKHR5cGUpXSB9CgogICAgcmV0dXJuIGFycmF5T2YKICB9LAoKICBtYXliZTogZnVuY3Rpb24gbWF5YmUgKHR5cGUpIHsKICAgIGZ1bmN0aW9uIG1heWJlICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIHJldHVybiBuYXRpdmVUeXBlcy5OdWxsKHZhbHVlKSB8fCB0eXBlZm9yY2UodHlwZSwgdmFsdWUsIHN0cmljdCwgbWF5YmUpCiAgICB9CiAgICBtYXliZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnPycgKyBzdGZKU09OKHR5cGUpIH0KCiAgICByZXR1cm4gbWF5YmUKICB9LAoKICBvYmplY3Q6IGZ1bmN0aW9uIG9iamVjdCAodHlwZSkgewogICAgZnVuY3Rpb24gb2JqZWN0ICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIGlmICghbmF0aXZlVHlwZXMuT2JqZWN0KHZhbHVlKSkgcmV0dXJuIGZhbHNlCiAgICAgIGlmIChuYXRpdmVUeXBlcy5OdWxsKHZhbHVlKSkgcmV0dXJuIGZhbHNlCgogICAgICB2YXIgcHJvcGVydHlOYW1lCgogICAgICB0cnkgewogICAgICAgIGZvciAocHJvcGVydHlOYW1lIGluIHR5cGUpIHsKICAgICAgICAgIHZhciBwcm9wZXJ0eVR5cGUgPSB0eXBlW3Byb3BlcnR5TmFtZV0KICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbHVlID0gdmFsdWVbcHJvcGVydHlOYW1lXQoKICAgICAgICAgIHR5cGVmb3JjZShwcm9wZXJ0eVR5cGUsIHByb3BlcnR5VmFsdWUsIHN0cmljdCkKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFRmUHJvcGVydHlUeXBlRXJyb3IpIHsKICAgICAgICAgIHRocm93IGUuYXNDaGlsZE9mKHByb3BlcnR5TmFtZSkKICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBUZlR5cGVFcnJvcikgewogICAgICAgICAgdGhyb3cgbmV3IFRmUHJvcGVydHlUeXBlRXJyb3IoZS50ZlR5cGUsIHByb3BlcnR5TmFtZSwgZS50ZlZhbHVlLCBlLnRmRXJyb3IpCiAgICAgICAgfQoKICAgICAgICB0aHJvdyBlCiAgICAgIH0KCiAgICAgIGlmIChzdHJpY3QpIHsKICAgICAgICBmb3IgKHByb3BlcnR5TmFtZSBpbiB2YWx1ZSkgewogICAgICAgICAgaWYgKHR5cGVbcHJvcGVydHlOYW1lXSkgY29udGludWUKCiAgICAgICAgICB0aHJvdyBuZXcgVGZQcm9wZXJ0eVR5cGVFcnJvcih1bmRlZmluZWQsIHByb3BlcnR5TmFtZSkKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICBvYmplY3QudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGZKU09OKHR5cGUpIH0KCiAgICByZXR1cm4gb2JqZWN0CiAgfSwKCiAgbWFwOiBmdW5jdGlvbiBtYXAgKHByb3BlcnR5VHlwZSwgcHJvcGVydHlLZXlUeXBlKSB7CiAgICBmdW5jdGlvbiBtYXAgKHZhbHVlLCBzdHJpY3QpIHsKICAgICAgdHlwZWZvcmNlKG5hdGl2ZVR5cGVzLk9iamVjdCwgdmFsdWUsIHN0cmljdCkKICAgICAgaWYgKG5hdGl2ZVR5cGVzLk51bGwodmFsdWUpKSByZXR1cm4gZmFsc2UKCiAgICAgIHZhciBwcm9wZXJ0eU5hbWUKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChwcm9wZXJ0eU5hbWUgaW4gdmFsdWUpIHsKICAgICAgICAgIGlmIChwcm9wZXJ0eUtleVR5cGUpIHsKICAgICAgICAgICAgdHlwZWZvcmNlKHByb3BlcnR5S2V5VHlwZSwgcHJvcGVydHlOYW1lLCBzdHJpY3QpCiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHByb3BlcnR5VmFsdWUgPSB2YWx1ZVtwcm9wZXJ0eU5hbWVdCiAgICAgICAgICB0eXBlZm9yY2UocHJvcGVydHlUeXBlLCBwcm9wZXJ0eVZhbHVlLCBzdHJpY3QpCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBUZlByb3BlcnR5VHlwZUVycm9yKSB7CiAgICAgICAgICB0aHJvdyBlLmFzQ2hpbGRPZihwcm9wZXJ0eU5hbWUpCiAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgVGZUeXBlRXJyb3IpIHsKICAgICAgICAgIHRocm93IG5ldyBUZlByb3BlcnR5VHlwZUVycm9yKGUudGZUeXBlLCBwcm9wZXJ0eUtleVR5cGUgfHwgcHJvcGVydHlOYW1lLCBlLnRmVmFsdWUpCiAgICAgICAgfQoKICAgICAgICB0aHJvdyBlCiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgaWYgKHByb3BlcnR5S2V5VHlwZSkgewogICAgICBtYXAudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJ3snICsgc3RmSlNPTihwcm9wZXJ0eUtleVR5cGUpICsgJzogJyArIHN0ZkpTT04ocHJvcGVydHlUeXBlKSArICd9JyB9CiAgICB9IGVsc2UgewogICAgICBtYXAudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJ3snICsgc3RmSlNPTihwcm9wZXJ0eVR5cGUpICsgJ30nIH0KICAgIH0KCiAgICByZXR1cm4gbWFwCiAgfSwKCiAgb25lT2Y6IGZ1bmN0aW9uIG9uZU9mICgpIHsKICAgIHZhciB0eXBlcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKQoKICAgIGZ1bmN0aW9uIG9uZU9mICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIHJldHVybiB0eXBlcy5zb21lKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiB0eXBlZm9yY2UodHlwZSwgdmFsdWUsIHN0cmljdCkKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFRmVHlwZUVycm9yIHx8IGUgaW5zdGFuY2VvZiBUZlByb3BlcnR5VHlwZUVycm9yKSByZXR1cm4gZmFsc2UKCiAgICAgICAgICB0aHJvdyBlCiAgICAgICAgfQogICAgICB9KQogICAgfQogICAgb25lT2YudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHlwZXMubWFwKHN0ZkpTT04pLmpvaW4oJ3wnKSB9CgogICAgcmV0dXJuIG9uZU9mCiAgfSwKCiAgcXVhY2tzTGlrZTogZnVuY3Rpb24gcXVhY2tzTGlrZSAodHlwZSkgewogICAgZnVuY3Rpb24gcXVhY2tzTGlrZSAodmFsdWUpIHsKICAgICAgcmV0dXJuIHR5cGUgPT09IGdldFZhbHVlVHlwZU5hbWUodmFsdWUpCiAgICB9CiAgICBxdWFja3NMaWtlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHR5cGUgfQoKICAgIHJldHVybiBxdWFja3NMaWtlCiAgfSwKCiAgdHVwbGU6IGZ1bmN0aW9uIHR1cGxlICgpIHsKICAgIHZhciB0eXBlcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKQoKICAgIGZ1bmN0aW9uIHR1cGxlICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIHJldHVybiB0eXBlcy5ldmVyeShmdW5jdGlvbiAodHlwZSwgaSkgewogICAgICAgIHJldHVybiB0eXBlZm9yY2UodHlwZSwgdmFsdWVbaV0sIHN0cmljdCkKICAgICAgfSkKICAgIH0KICAgIHR1cGxlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcoJyArIHR5cGVzLm1hcChzdGZKU09OKS5qb2luKCcsICcpICsgJyknIH0KCiAgICByZXR1cm4gdHVwbGUKICB9LAoKICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUgKGV4cGVjdGVkKSB7CiAgICBmdW5jdGlvbiB2YWx1ZSAoYWN0dWFsKSB7CiAgICAgIHJldHVybiBhY3R1YWwgPT09IGV4cGVjdGVkCiAgICB9CiAgICB2YWx1ZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBleHBlY3RlZCB9CgogICAgcmV0dXJuIHZhbHVlCiAgfQp9CgpmdW5jdGlvbiBjb21waWxlICh0eXBlKSB7CiAgaWYgKG5hdGl2ZVR5cGVzLlN0cmluZyh0eXBlKSkgewogICAgaWYgKHR5cGVbMF0gPT09ICc/JykgcmV0dXJuIG90aGVyVHlwZXMubWF5YmUoY29tcGlsZSh0eXBlLnNsaWNlKDEpKSkKCiAgICByZXR1cm4gbmF0aXZlVHlwZXNbdHlwZV0gfHwgb3RoZXJUeXBlcy5xdWFja3NMaWtlKHR5cGUpCiAgfSBlbHNlIGlmICh0eXBlICYmIG5hdGl2ZVR5cGVzLk9iamVjdCh0eXBlKSkgewogICAgaWYgKG5hdGl2ZVR5cGVzLkFycmF5KHR5cGUpKSByZXR1cm4gb3RoZXJUeXBlcy5hcnJheU9mKGNvbXBpbGUodHlwZVswXSkpCgogICAgdmFyIGNvbXBpbGVkID0ge30KCiAgICBmb3IgKHZhciBwcm9wZXJ0eU5hbWUgaW4gdHlwZSkgewogICAgICBjb21waWxlZFtwcm9wZXJ0eU5hbWVdID0gY29tcGlsZSh0eXBlW3Byb3BlcnR5TmFtZV0pCiAgICB9CgogICAgcmV0dXJuIG90aGVyVHlwZXMub2JqZWN0KGNvbXBpbGVkKQogIH0gZWxzZSBpZiAobmF0aXZlVHlwZXMuRnVuY3Rpb24odHlwZSkpIHsKICAgIHJldHVybiB0eXBlCiAgfQoKICByZXR1cm4gb3RoZXJUeXBlcy52YWx1ZSh0eXBlKQp9CgpmdW5jdGlvbiB0eXBlZm9yY2UgKHR5cGUsIHZhbHVlLCBzdHJpY3QsIHN1cnJvZ2F0ZSkgewogIGlmIChuYXRpdmVUeXBlcy5GdW5jdGlvbih0eXBlKSkgewogICAgaWYgKHR5cGUodmFsdWUsIHN0cmljdCkpIHJldHVybiB0cnVlCgogICAgdGhyb3cgbmV3IFRmVHlwZUVycm9yKHN1cnJvZ2F0ZSB8fCB0eXBlLCB2YWx1ZSkKICB9CgogIC8vIEpJVAogIHJldHVybiB0eXBlZm9yY2UoY29tcGlsZSh0eXBlKSwgdmFsdWUsIHN0cmljdCkKfQoKLy8gYXNzaWduIGFsbCB0eXBlcyB0byB0eXBlZm9yY2UgZnVuY3Rpb24KdmFyIHR5cGVOYW1lCk9iamVjdC5rZXlzKG5hdGl2ZVR5cGVzKS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlTmFtZSkgewogIHZhciBuYXRpdmVUeXBlID0gbmF0aXZlVHlwZXNbdHlwZU5hbWVdCiAgbmF0aXZlVHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0eXBlTmFtZSB9CgogIHR5cGVmb3JjZVt0eXBlTmFtZV0gPSBuYXRpdmVUeXBlCn0pCgpmb3IgKHR5cGVOYW1lIGluIG90aGVyVHlwZXMpIHsKICB0eXBlZm9yY2VbdHlwZU5hbWVdID0gb3RoZXJUeXBlc1t0eXBlTmFtZV0KfQoKbW9kdWxlLmV4cG9ydHMgPSB0eXBlZm9yY2UKbW9kdWxlLmV4cG9ydHMuY29tcGlsZSA9IGNvbXBpbGUKCi8vIGV4cG9ydCBFcnJvciBvYmplY3RzCm1vZHVsZS5leHBvcnRzLlRmVHlwZUVycm9yID0gVGZUeXBlRXJyb3IKbW9kdWxlLmV4cG9ydHMuVGZQcm9wZXJ0eVR5cGVFcnJvciA9IFRmUHJvcGVydHlUeXBlRXJyb3IKCn0pLmNhbGwodGhpcyx7ImlzQnVmZmVyIjpyZXF1aXJlKCIuLi8uLi8uLi9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9pbnNlcnQtbW9kdWxlLWdsb2JhbHMvbm9kZV9tb2R1bGVzL2lzLWJ1ZmZlci9pbmRleC5qcyIpfSkKfSx7Ii4uLy4uLy4uL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2luc2VydC1tb2R1bGUtZ2xvYmFscy9ub2RlX21vZHVsZXMvaXMtYnVmZmVyL2luZGV4LmpzIjo3MDIsImluaGVyaXRzIjo0ODJ9XSw0ODI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDMzXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NDMzfV0sNDgzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYnM1OGNoZWNrID0gcmVxdWlyZSgnYnM1OGNoZWNrJykKCmZ1bmN0aW9uIGRlY29kZVJhdyAodmVyc2lvbiwgYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlclswXSAhPT0gdmVyc2lvbikgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG5ldHdvcmsgdmVyc2lvbicpCgogIC8vIGNvbXByZXNzaW9uIGZsYWc/CiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDM0KSB7CiAgICBpZiAoYnVmZmVyWzMzXSAhPT0gMHgwMSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbXByZXNzaW9uIGZsYWcnKQoKICAgIC8vIHRydW5jYXRlIHRoZSB2ZXJzaW9uIGJ5dGUvY29tcHJlc3Npb24gZmxhZwogICAgcmV0dXJuIHsKICAgICAgdmVyc2lvbjogYnVmZmVyWzBdLAogICAgICBkOiBidWZmZXIuc2xpY2UoMSwgLTEpLAogICAgICBjb21wcmVzc2VkOiB0cnVlCiAgICB9CiAgfQoKICAvLyBubyBjb21wcmVzc2lvbiBmbGFnCiAgaWYgKGJ1ZmZlci5sZW5ndGggIT09IDMzKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgV0lGIGxlbmd0aCcpCgogIHJldHVybiB7CiAgICB2ZXJzaW9uOiBidWZmZXJbMF0sCiAgICBkOiBidWZmZXIuc2xpY2UoMSksCiAgICBjb21wcmVzc2VkOiBmYWxzZQogIH0KfQoKZnVuY3Rpb24gZGVjb2RlICh2ZXJzaW9uLCBzdHJpbmcpIHsKICByZXR1cm4gZGVjb2RlUmF3KHZlcnNpb24sIGJzNThjaGVjay5kZWNvZGUoc3RyaW5nKSkKfQoKZnVuY3Rpb24gZW5jb2RlUmF3ICh2ZXJzaW9uLCBkLCBjb21wcmVzc2VkKSB7CiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoY29tcHJlc3NlZCA/IDM0IDogMzMpCgogIGJ1ZmZlci53cml0ZVVJbnQ4KHZlcnNpb24sIDApCiAgZC5jb3B5KGJ1ZmZlciwgMSkKCiAgaWYgKGNvbXByZXNzZWQpIHsKICAgIGJ1ZmZlclszM10gPSAweDAxCiAgfQoKICByZXR1cm4gYnVmZmVyCn0KCmZ1bmN0aW9uIGVuY29kZSAodmVyc2lvbiwgZCwgY29tcHJlc3NlZCkgewogIHJldHVybiBiczU4Y2hlY2suZW5jb2RlKGVuY29kZVJhdyh2ZXJzaW9uLCBkLCBjb21wcmVzc2VkKSkKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgZGVjb2RlOiBkZWNvZGUsCiAgZGVjb2RlUmF3OiBkZWNvZGVSYXcsCiAgZW5jb2RlOiBlbmNvZGUsCiAgZW5jb2RlUmF3OiBlbmNvZGVSYXcKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJzNThjaGVjayI6NDU0LCJidWZmZXIiOjUwNH1dLDQ4NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJzNThjaGVjayA9IHJlcXVpcmUoJ2JzNThjaGVjaycpCnZhciBic2NyaXB0ID0gcmVxdWlyZSgnLi9zY3JpcHQnKQp2YXIgbmV0d29ya3MgPSByZXF1aXJlKCcuL25ldHdvcmtzJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKZnVuY3Rpb24gZnJvbUJhc2U1OENoZWNrIChhZGRyZXNzKSB7CiAgdmFyIHBheWxvYWQgPSBiczU4Y2hlY2suZGVjb2RlKGFkZHJlc3MpCiAgaWYgKHBheWxvYWQubGVuZ3RoIDwgMjEpIHRocm93IG5ldyBUeXBlRXJyb3IoYWRkcmVzcyArICcgaXMgdG9vIHNob3J0JykKICBpZiAocGF5bG9hZC5sZW5ndGggPiAyMSkgdGhyb3cgbmV3IFR5cGVFcnJvcihhZGRyZXNzICsgJyBpcyB0b28gbG9uZycpCgogIHZhciB2ZXJzaW9uID0gcGF5bG9hZFswXQogIHZhciBoYXNoID0gcGF5bG9hZC5zbGljZSgxKQoKICByZXR1cm4geyBoYXNoOiBoYXNoLCB2ZXJzaW9uOiB2ZXJzaW9uIH0KfQoKZnVuY3Rpb24gZnJvbU91dHB1dFNjcmlwdCAoc2NyaXB0UHViS2V5LCBuZXR3b3JrKSB7CiAgbmV0d29yayA9IG5ldHdvcmsgfHwgbmV0d29ya3MuYml0Y29pbgoKICBpZiAoYnNjcmlwdC5pc1B1YktleUhhc2hPdXRwdXQoc2NyaXB0UHViS2V5KSkgcmV0dXJuIHRvQmFzZTU4Q2hlY2soYnNjcmlwdC5jb21waWxlKHNjcmlwdFB1YktleSkuc2xpY2UoMywgMjMpLCBuZXR3b3JrLnB1YktleUhhc2gpCiAgaWYgKGJzY3JpcHQuaXNTY3JpcHRIYXNoT3V0cHV0KHNjcmlwdFB1YktleSkpIHJldHVybiB0b0Jhc2U1OENoZWNrKGJzY3JpcHQuY29tcGlsZShzY3JpcHRQdWJLZXkpLnNsaWNlKDIsIDIyKSwgbmV0d29yay5zY3JpcHRIYXNoKQoKICB0aHJvdyBuZXcgRXJyb3IoYnNjcmlwdC50b0FTTShzY3JpcHRQdWJLZXkpICsgJyBoYXMgbm8gbWF0Y2hpbmcgQWRkcmVzcycpCn0KCmZ1bmN0aW9uIHRvQmFzZTU4Q2hlY2sgKGhhc2gsIHZlcnNpb24pIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuSGFzaDE2MGJpdCwgdHlwZXMuVUludDgpLCBhcmd1bWVudHMpCgogIHZhciBwYXlsb2FkID0gbmV3IEJ1ZmZlcigyMSkKICBwYXlsb2FkLndyaXRlVUludDgodmVyc2lvbiwgMCkKICBoYXNoLmNvcHkocGF5bG9hZCwgMSkKCiAgcmV0dXJuIGJzNThjaGVjay5lbmNvZGUocGF5bG9hZCkKfQoKZnVuY3Rpb24gdG9PdXRwdXRTY3JpcHQgKGFkZHJlc3MsIG5ldHdvcmspIHsKICBuZXR3b3JrID0gbmV0d29yayB8fCBuZXR3b3Jrcy5iaXRjb2luCgogIHZhciBkZWNvZGUgPSBmcm9tQmFzZTU4Q2hlY2soYWRkcmVzcykKICBpZiAoZGVjb2RlLnZlcnNpb24gPT09IG5ldHdvcmsucHViS2V5SGFzaCkgcmV0dXJuIGJzY3JpcHQucHViS2V5SGFzaE91dHB1dChkZWNvZGUuaGFzaCkKICBpZiAoZGVjb2RlLnZlcnNpb24gPT09IG5ldHdvcmsuc2NyaXB0SGFzaCkgcmV0dXJuIGJzY3JpcHQuc2NyaXB0SGFzaE91dHB1dChkZWNvZGUuaGFzaCkKCiAgdGhyb3cgbmV3IEVycm9yKGFkZHJlc3MgKyAnIGhhcyBubyBtYXRjaGluZyBTY3JpcHQnKQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBmcm9tQmFzZTU4Q2hlY2s6IGZyb21CYXNlNThDaGVjaywKICBmcm9tT3V0cHV0U2NyaXB0OiBmcm9tT3V0cHV0U2NyaXB0LAogIHRvQmFzZTU4Q2hlY2s6IHRvQmFzZTU4Q2hlY2ssCiAgdG9PdXRwdXRTY3JpcHQ6IHRvT3V0cHV0U2NyaXB0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL25ldHdvcmtzIjo0OTQsIi4vc2NyaXB0Ijo0OTYsIi4vdHlwZXMiOjUwMCwiYnM1OGNoZWNrIjo0NTQsImJ1ZmZlciI6NTA0LCJ0eXBlZm9yY2UiOjQ4MX1dLDQ4NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJ1ZmZlcnV0aWxzID0gcmVxdWlyZSgnLi9idWZmZXJ1dGlscycpCnZhciBiY3J5cHRvID0gcmVxdWlyZSgnLi9jcnlwdG8nKQp2YXIgY29tcGFyZSA9IHJlcXVpcmUoJ2J1ZmZlci1jb21wYXJlJykKCnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24nKQoKZnVuY3Rpb24gQmxvY2sgKCkgewogIHRoaXMudmVyc2lvbiA9IDEKICB0aGlzLnByZXZIYXNoID0gbnVsbAogIHRoaXMubWVya2xlUm9vdCA9IG51bGwKICB0aGlzLnRpbWVzdGFtcCA9IDAKICB0aGlzLmJpdHMgPSAwCiAgdGhpcy5ub25jZSA9IDAKfQoKQmxvY2suZnJvbUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICBpZiAoYnVmZmVyLmxlbmd0aCA8IDgwKSB0aHJvdyBuZXcgRXJyb3IoJ0J1ZmZlciB0b28gc21hbGwgKDwgODAgYnl0ZXMpJykKCiAgdmFyIG9mZnNldCA9IDAKICBmdW5jdGlvbiByZWFkU2xpY2UgKG4pIHsKICAgIG9mZnNldCArPSBuCiAgICByZXR1cm4gYnVmZmVyLnNsaWNlKG9mZnNldCAtIG4sIG9mZnNldCkKICB9CgogIGZ1bmN0aW9uIHJlYWRVSW50MzIgKCkgewogICAgdmFyIGkgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCkKICAgIG9mZnNldCArPSA0CiAgICByZXR1cm4gaQogIH0KCiAgdmFyIGJsb2NrID0gbmV3IEJsb2NrKCkKICBibG9jay52ZXJzaW9uID0gcmVhZFVJbnQzMigpCiAgYmxvY2sucHJldkhhc2ggPSByZWFkU2xpY2UoMzIpCiAgYmxvY2subWVya2xlUm9vdCA9IHJlYWRTbGljZSgzMikKICBibG9jay50aW1lc3RhbXAgPSByZWFkVUludDMyKCkKICBibG9jay5iaXRzID0gcmVhZFVJbnQzMigpCiAgYmxvY2subm9uY2UgPSByZWFkVUludDMyKCkKCiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDgwKSByZXR1cm4gYmxvY2sKCiAgZnVuY3Rpb24gcmVhZFZhckludCAoKSB7CiAgICB2YXIgdmkgPSBidWZmZXJ1dGlscy5yZWFkVmFySW50KGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IHZpLnNpemUKICAgIHJldHVybiB2aS5udW1iZXIKICB9CgogIGZ1bmN0aW9uIHJlYWRUcmFuc2FjdGlvbiAoKSB7CiAgICB2YXIgdHggPSBUcmFuc2FjdGlvbi5mcm9tQnVmZmVyKGJ1ZmZlci5zbGljZShvZmZzZXQpLCB0cnVlKQoKICAgIG9mZnNldCArPSB0eC5ieXRlTGVuZ3RoKCkKICAgIHJldHVybiB0eAogIH0KCiAgdmFyIG5UcmFuc2FjdGlvbnMgPSByZWFkVmFySW50KCkKICBibG9jay50cmFuc2FjdGlvbnMgPSBbXQoKICBmb3IgKHZhciBpID0gMDsgaSA8IG5UcmFuc2FjdGlvbnM7ICsraSkgewogICAgdmFyIHR4ID0gcmVhZFRyYW5zYWN0aW9uKCkKICAgIGJsb2NrLnRyYW5zYWN0aW9ucy5wdXNoKHR4KQogIH0KCiAgcmV0dXJuIGJsb2NrCn0KCkJsb2NrLmZyb21IZXggPSBmdW5jdGlvbiAoaGV4KSB7CiAgcmV0dXJuIEJsb2NrLmZyb21CdWZmZXIobmV3IEJ1ZmZlcihoZXgsICdoZXgnKSkKfQoKQmxvY2sucHJvdG90eXBlLmdldEhhc2ggPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGJjcnlwdG8uaGFzaDI1Nih0aGlzLnRvQnVmZmVyKHRydWUpKQp9CgpCbG9jay5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIFtdLnJldmVyc2UuY2FsbCh0aGlzLmdldEhhc2goKSkudG9TdHJpbmcoJ2hleCcpCn0KCkJsb2NrLnByb3RvdHlwZS5nZXRVVENEYXRlID0gZnVuY3Rpb24gKCkgewogIHZhciBkYXRlID0gbmV3IERhdGUoMCkgLy8gZXBvY2gKICBkYXRlLnNldFVUQ1NlY29uZHModGhpcy50aW1lc3RhbXApCgogIHJldHVybiBkYXRlCn0KCkJsb2NrLnByb3RvdHlwZS50b0J1ZmZlciA9IGZ1bmN0aW9uIChoZWFkZXJzT25seSkgewogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKDgwKQoKICB2YXIgb2Zmc2V0ID0gMAogIGZ1bmN0aW9uIHdyaXRlU2xpY2UgKHNsaWNlKSB7CiAgICBzbGljZS5jb3B5KGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IHNsaWNlLmxlbmd0aAogIH0KCiAgZnVuY3Rpb24gd3JpdGVVSW50MzIgKGkpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQzMkxFKGksIG9mZnNldCkKICAgIG9mZnNldCArPSA0CiAgfQoKICB3cml0ZVVJbnQzMih0aGlzLnZlcnNpb24pCiAgd3JpdGVTbGljZSh0aGlzLnByZXZIYXNoKQogIHdyaXRlU2xpY2UodGhpcy5tZXJrbGVSb290KQogIHdyaXRlVUludDMyKHRoaXMudGltZXN0YW1wKQogIHdyaXRlVUludDMyKHRoaXMuYml0cykKICB3cml0ZVVJbnQzMih0aGlzLm5vbmNlKQoKICBpZiAoaGVhZGVyc09ubHkgfHwgIXRoaXMudHJhbnNhY3Rpb25zKSByZXR1cm4gYnVmZmVyCgogIHZhciB0eExlbkJ1ZmZlciA9IGJ1ZmZlcnV0aWxzLnZhckludEJ1ZmZlcih0aGlzLnRyYW5zYWN0aW9ucy5sZW5ndGgpCiAgdmFyIHR4QnVmZmVycyA9IHRoaXMudHJhbnNhY3Rpb25zLm1hcChmdW5jdGlvbiAodHgpIHsKICAgIHJldHVybiB0eC50b0J1ZmZlcigpCiAgfSkKCiAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoW2J1ZmZlciwgdHhMZW5CdWZmZXJdLmNvbmNhdCh0eEJ1ZmZlcnMpKQp9CgpCbG9jay5wcm90b3R5cGUudG9IZXggPSBmdW5jdGlvbiAoaGVhZGVyc09ubHkpIHsKICByZXR1cm4gdGhpcy50b0J1ZmZlcihoZWFkZXJzT25seSkudG9TdHJpbmcoJ2hleCcpCn0KCkJsb2NrLmNhbGN1bGF0ZVRhcmdldCA9IGZ1bmN0aW9uIChiaXRzKSB7CiAgdmFyIGV4cG9uZW50ID0gKChiaXRzICYgMHhmZjAwMDAwMCkgPj4gMjQpIC0gMwogIHZhciBtYW50aXNzYSA9IGJpdHMgJiAweDAwN2ZmZmZmCiAgdmFyIGkgPSAzMSAtIGV4cG9uZW50CgogIHZhciB0YXJnZXQgPSBuZXcgQnVmZmVyKDMyKQogIHRhcmdldC5maWxsKDApCgogIHRhcmdldFtpXSA9IG1hbnRpc3NhICYgMHhmZgogIHRhcmdldFtpIC0gMV0gPSBtYW50aXNzYSA+PiA4CiAgdGFyZ2V0W2kgLSAyXSA9IG1hbnRpc3NhID4+IDE2CiAgdGFyZ2V0W2kgLSAzXSA9IG1hbnRpc3NhID4+IDI0CgogIHJldHVybiB0YXJnZXQKfQoKQmxvY2sucHJvdG90eXBlLmNoZWNrUHJvb2ZPZldvcmsgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGhhc2ggPSBbXS5yZXZlcnNlLmNhbGwodGhpcy5nZXRIYXNoKCkpCiAgdmFyIHRhcmdldCA9IEJsb2NrLmNhbGN1bGF0ZVRhcmdldCh0aGlzLmJpdHMpCgogIHJldHVybiBjb21wYXJlKGhhc2gsIHRhcmdldCkgPD0gMAp9Cgptb2R1bGUuZXhwb3J0cyA9IEJsb2NrCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9idWZmZXJ1dGlscyI6NDg2LCIuL2NyeXB0byI6NDg3LCIuL3RyYW5zYWN0aW9uIjo0OTgsImJ1ZmZlciI6NTA0LCJidWZmZXItY29tcGFyZSI6NDU2fV0sNDg2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgb3Bjb2RlcyA9IHJlcXVpcmUoJy4vb3Bjb2RlcycpCgovLyBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9ibG9iL21hc3Rlci9pbmRleC5qcyNMMTEyNwpmdW5jdGlvbiB2ZXJpZnVpbnQgKHZhbHVlLCBtYXgpIHsKICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3Qgd3JpdGUgYSBub24tbnVtYmVyIGFzIGEgbnVtYmVyJykKICBpZiAodmFsdWUgPCAwKSB0aHJvdyBuZXcgRXJyb3IoJ3NwZWNpZmllZCBhIG5lZ2F0aXZlIHZhbHVlIGZvciB3cml0aW5nIGFuIHVuc2lnbmVkIHZhbHVlJykKICBpZiAodmFsdWUgPiBtYXgpIHRocm93IG5ldyBFcnJvcigndmFsdWUgaXMgbGFyZ2VyIHRoYW4gbWF4aW11bSB2YWx1ZSBmb3IgdHlwZScpCiAgaWYgKE1hdGguZmxvb3IodmFsdWUpICE9PSB2YWx1ZSkgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZSBoYXMgYSBmcmFjdGlvbmFsIGNvbXBvbmVudCcpCn0KCmZ1bmN0aW9uIHB1c2hEYXRhU2l6ZSAoaSkgewogIHJldHVybiBpIDwgb3Bjb2Rlcy5PUF9QVVNIREFUQTEgPyAxCiAgOiBpIDwgMHhmZiA/IDIKICA6IGkgPCAweGZmZmYgPyAzCiAgOiA1Cn0KCmZ1bmN0aW9uIHJlYWRQdXNoRGF0YUludCAoYnVmZmVyLCBvZmZzZXQpIHsKICB2YXIgb3Bjb2RlID0gYnVmZmVyLnJlYWRVSW50OChvZmZzZXQpCiAgdmFyIG51bWJlciwgc2l6ZQoKICAvLyB+NiBiaXQKICBpZiAob3Bjb2RlIDwgb3Bjb2Rlcy5PUF9QVVNIREFUQTEpIHsKICAgIG51bWJlciA9IG9wY29kZQogICAgc2l6ZSA9IDEKCiAgLy8gOCBiaXQKICB9IGVsc2UgaWYgKG9wY29kZSA9PT0gb3Bjb2Rlcy5PUF9QVVNIREFUQTEpIHsKICAgIGlmIChvZmZzZXQgKyAyID4gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGwKICAgIG51bWJlciA9IGJ1ZmZlci5yZWFkVUludDgob2Zmc2V0ICsgMSkKICAgIHNpemUgPSAyCgogIC8vIDE2IGJpdAogIH0gZWxzZSBpZiAob3Bjb2RlID09PSBvcGNvZGVzLk9QX1BVU0hEQVRBMikgewogICAgaWYgKG9mZnNldCArIDMgPiBidWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbAogICAgbnVtYmVyID0gYnVmZmVyLnJlYWRVSW50MTZMRShvZmZzZXQgKyAxKQogICAgc2l6ZSA9IDMKCiAgLy8gMzIgYml0CiAgfSBlbHNlIHsKICAgIGlmIChvZmZzZXQgKyA1ID4gYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGwKICAgIGlmIChvcGNvZGUgIT09IG9wY29kZXMuT1BfUFVTSERBVEE0KSB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgb3Bjb2RlJykKCiAgICBudW1iZXIgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCArIDEpCiAgICBzaXplID0gNQogIH0KCiAgcmV0dXJuIHsKICAgIG9wY29kZTogb3Bjb2RlLAogICAgbnVtYmVyOiBudW1iZXIsCiAgICBzaXplOiBzaXplCiAgfQp9CgpmdW5jdGlvbiByZWFkVUludDY0TEUgKGJ1ZmZlciwgb2Zmc2V0KSB7CiAgdmFyIGEgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCkKICB2YXIgYiA9IGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0ICsgNCkKICBiICo9IDB4MTAwMDAwMDAwCgogIHZlcmlmdWludChiICsgYSwgMHgwMDFmZmZmZmZmZmZmZmZmKQoKICByZXR1cm4gYiArIGEKfQoKZnVuY3Rpb24gcmVhZFZhckludCAoYnVmZmVyLCBvZmZzZXQpIHsKICB2YXIgdCA9IGJ1ZmZlci5yZWFkVUludDgob2Zmc2V0KQogIHZhciBudW1iZXIsIHNpemUKCiAgLy8gOCBiaXQKICBpZiAodCA8IDI1MykgewogICAgbnVtYmVyID0gdAogICAgc2l6ZSA9IDEKCiAgLy8gMTYgYml0CiAgfSBlbHNlIGlmICh0IDwgMjU0KSB7CiAgICBudW1iZXIgPSBidWZmZXIucmVhZFVJbnQxNkxFKG9mZnNldCArIDEpCiAgICBzaXplID0gMwoKICAvLyAzMiBiaXQKICB9IGVsc2UgaWYgKHQgPCAyNTUpIHsKICAgIG51bWJlciA9IGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0ICsgMSkKICAgIHNpemUgPSA1CgogIC8vIDY0IGJpdAogIH0gZWxzZSB7CiAgICBudW1iZXIgPSByZWFkVUludDY0TEUoYnVmZmVyLCBvZmZzZXQgKyAxKQogICAgc2l6ZSA9IDkKICB9CgogIHJldHVybiB7CiAgICBudW1iZXI6IG51bWJlciwKICAgIHNpemU6IHNpemUKICB9Cn0KCmZ1bmN0aW9uIHdyaXRlUHVzaERhdGFJbnQgKGJ1ZmZlciwgbnVtYmVyLCBvZmZzZXQpIHsKICB2YXIgc2l6ZSA9IHB1c2hEYXRhU2l6ZShudW1iZXIpCgogIC8vIH42IGJpdAogIGlmIChzaXplID09PSAxKSB7CiAgICBidWZmZXIud3JpdGVVSW50OChudW1iZXIsIG9mZnNldCkKCiAgLy8gOCBiaXQKICB9IGVsc2UgaWYgKHNpemUgPT09IDIpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG9wY29kZXMuT1BfUFVTSERBVEExLCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50OChudW1iZXIsIG9mZnNldCArIDEpCgogIC8vIDE2IGJpdAogIH0gZWxzZSBpZiAoc2l6ZSA9PT0gMykgewogICAgYnVmZmVyLndyaXRlVUludDgob3Bjb2Rlcy5PUF9QVVNIREFUQTIsIG9mZnNldCkKICAgIGJ1ZmZlci53cml0ZVVJbnQxNkxFKG51bWJlciwgb2Zmc2V0ICsgMSkKCiAgLy8gMzIgYml0CiAgfSBlbHNlIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG9wY29kZXMuT1BfUFVTSERBVEE0LCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50MzJMRShudW1iZXIsIG9mZnNldCArIDEpCiAgfQoKICByZXR1cm4gc2l6ZQp9CgpmdW5jdGlvbiB3cml0ZVVJbnQ2NExFIChidWZmZXIsIHZhbHVlLCBvZmZzZXQpIHsKICB2ZXJpZnVpbnQodmFsdWUsIDB4MDAxZmZmZmZmZmZmZmZmZikKCiAgYnVmZmVyLndyaXRlSW50MzJMRSh2YWx1ZSAmIC0xLCBvZmZzZXQpCiAgYnVmZmVyLndyaXRlVUludDMyTEUoTWF0aC5mbG9vcih2YWx1ZSAvIDB4MTAwMDAwMDAwKSwgb2Zmc2V0ICsgNCkKfQoKZnVuY3Rpb24gdmFySW50U2l6ZSAoaSkgewogIHJldHVybiBpIDwgMjUzID8gMQogIDogaSA8IDB4MTAwMDAgPyAzCiAgOiBpIDwgMHgxMDAwMDAwMDAgPyA1CiAgOiA5Cn0KCmZ1bmN0aW9uIHdyaXRlVmFySW50IChidWZmZXIsIG51bWJlciwgb2Zmc2V0KSB7CiAgdmFyIHNpemUgPSB2YXJJbnRTaXplKG51bWJlcikKCiAgLy8gOCBiaXQKICBpZiAoc2l6ZSA9PT0gMSkgewogICAgYnVmZmVyLndyaXRlVUludDgobnVtYmVyLCBvZmZzZXQpCgogIC8vIDE2IGJpdAogIH0gZWxzZSBpZiAoc2l6ZSA9PT0gMykgewogICAgYnVmZmVyLndyaXRlVUludDgoMjUzLCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50MTZMRShudW1iZXIsIG9mZnNldCArIDEpCgogIC8vIDMyIGJpdAogIH0gZWxzZSBpZiAoc2l6ZSA9PT0gNSkgewogICAgYnVmZmVyLndyaXRlVUludDgoMjU0LCBvZmZzZXQpCiAgICBidWZmZXIud3JpdGVVSW50MzJMRShudW1iZXIsIG9mZnNldCArIDEpCgogIC8vIDY0IGJpdAogIH0gZWxzZSB7CiAgICBidWZmZXIud3JpdGVVSW50OCgyNTUsIG9mZnNldCkKICAgIHdyaXRlVUludDY0TEUoYnVmZmVyLCBudW1iZXIsIG9mZnNldCArIDEpCiAgfQoKICByZXR1cm4gc2l6ZQp9CgpmdW5jdGlvbiB2YXJJbnRCdWZmZXIgKGkpIHsKICB2YXIgc2l6ZSA9IHZhckludFNpemUoaSkKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihzaXplKQogIHdyaXRlVmFySW50KGJ1ZmZlciwgaSwgMCkKCiAgcmV0dXJuIGJ1ZmZlcgp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBlcXVhbDogcmVxdWlyZSgnYnVmZmVyLWVxdWFscycpLAogIHB1c2hEYXRhU2l6ZTogcHVzaERhdGFTaXplLAogIHJlYWRQdXNoRGF0YUludDogcmVhZFB1c2hEYXRhSW50LAogIHJlYWRVSW50NjRMRTogcmVhZFVJbnQ2NExFLAogIHJlYWRWYXJJbnQ6IHJlYWRWYXJJbnQsCiAgcmV2ZXJzZTogcmVxdWlyZSgnYnVmZmVyLXJldmVyc2UnKSwKICB2YXJJbnRCdWZmZXI6IHZhckludEJ1ZmZlciwKICB2YXJJbnRTaXplOiB2YXJJbnRTaXplLAogIHdyaXRlUHVzaERhdGFJbnQ6IHdyaXRlUHVzaERhdGFJbnQsCiAgd3JpdGVVSW50NjRMRTogd3JpdGVVSW50NjRMRSwKICB3cml0ZVZhckludDogd3JpdGVWYXJJbnQKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vb3Bjb2RlcyI6NDk1LCJidWZmZXIiOjUwNCwiYnVmZmVyLWVxdWFscyI6NDU3LCJidWZmZXItcmV2ZXJzZSI6NDU4fV0sNDg3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCgpmdW5jdGlvbiBoYXNoMTYwIChidWZmZXIpIHsKICByZXR1cm4gcmlwZW1kMTYwKHNoYTI1NihidWZmZXIpKQp9CgpmdW5jdGlvbiBoYXNoMjU2IChidWZmZXIpIHsKICByZXR1cm4gc2hhMjU2KHNoYTI1NihidWZmZXIpKQp9CgpmdW5jdGlvbiByaXBlbWQxNjAgKGJ1ZmZlcikgewogIHJldHVybiBjcmVhdGVIYXNoKCdybWQxNjAnKS51cGRhdGUoYnVmZmVyKS5kaWdlc3QoKQp9CgpmdW5jdGlvbiBzaGExIChidWZmZXIpIHsKICByZXR1cm4gY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShidWZmZXIpLmRpZ2VzdCgpCn0KCmZ1bmN0aW9uIHNoYTI1NiAoYnVmZmVyKSB7CiAgcmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShidWZmZXIpLmRpZ2VzdCgpCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGhhc2gxNjA6IGhhc2gxNjAsCiAgaGFzaDI1NjogaGFzaDI1NiwKICByaXBlbWQxNjA6IHJpcGVtZDE2MCwKICBzaGExOiBzaGExLAogIHNoYTI1Njogc2hhMjU2Cn0KCn0seyJjcmVhdGUtaGFzaCI6NDU5fV0sNDg4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgY3JlYXRlSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKdmFyIEVDU2lnbmF0dXJlID0gcmVxdWlyZSgnLi9lY3NpZ25hdHVyZScpCgp2YXIgWkVSTyA9IG5ldyBCdWZmZXIoWzBdKQp2YXIgT05FID0gbmV3IEJ1ZmZlcihbMV0pCgp2YXIgZWN1cnZlID0gcmVxdWlyZSgnZWN1cnZlJykKdmFyIHNlY3AyNTZrMSA9IGVjdXJ2ZS5nZXRDdXJ2ZUJ5TmFtZSgnc2VjcDI1NmsxJykKCi8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2OTc5I3NlY3Rpb24tMy4yCmZ1bmN0aW9uIGRldGVybWluaXN0aWNHZW5lcmF0ZUsgKGhhc2gsIHgsIGNoZWNrU2lnKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKAogICAgdHlwZXMuSGFzaDI1NmJpdCwKICAgIHR5cGVzLkJ1ZmZlcjI1NmJpdCwKICAgIHR5cGVzLkZ1bmN0aW9uCiAgKSwgYXJndW1lbnRzKQoKICB2YXIgayA9IG5ldyBCdWZmZXIoMzIpCiAgdmFyIHYgPSBuZXcgQnVmZmVyKDMyKQoKICAvLyBTdGVwIEEsIGlnbm9yZWQgYXMgaGFzaCBhbHJlYWR5IHByb3ZpZGVkCiAgLy8gU3RlcCBCCiAgdi5maWxsKDEpCgogIC8vIFN0ZXAgQwogIGsuZmlsbCgwKQoKICAvLyBTdGVwIEQKICBrID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykKICAgIC51cGRhdGUodikKICAgIC51cGRhdGUoWkVSTykKICAgIC51cGRhdGUoeCkKICAgIC51cGRhdGUoaGFzaCkKICAgIC5kaWdlc3QoKQoKICAvLyBTdGVwIEUKICB2ID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykudXBkYXRlKHYpLmRpZ2VzdCgpCgogIC8vIFN0ZXAgRgogIGsgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLnVwZGF0ZShPTkUpCiAgICAudXBkYXRlKHgpCiAgICAudXBkYXRlKGhhc2gpCiAgICAuZGlnZXN0KCkKCiAgLy8gU3RlcCBHCiAgdiA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspLnVwZGF0ZSh2KS5kaWdlc3QoKQoKICAvLyBTdGVwIEgxL0gyYSwgaWdub3JlZCBhcyB0bGVuID09PSBxbGVuICgyNTYgYml0KQogIC8vIFN0ZXAgSDJiCiAgdiA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspLnVwZGF0ZSh2KS5kaWdlc3QoKQoKICB2YXIgVCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcih2KQoKICAvLyBTdGVwIEgzLCByZXBlYXQgdW50aWwgVCBpcyB3aXRoaW4gdGhlIGludGVydmFsIFsxLCBuIC0gMV0gYW5kIGlzIHN1aXRhYmxlIGZvciBFQ0RTQQogIHdoaWxlIChULnNpZ251bSgpIDw9IDAgfHwgVC5jb21wYXJlVG8oc2VjcDI1NmsxLm4pID49IDAgfHwgIWNoZWNrU2lnKFQpKSB7CiAgICBrID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykKICAgICAgLnVwZGF0ZSh2KQogICAgICAudXBkYXRlKFpFUk8pCiAgICAgIC5kaWdlc3QoKQoKICAgIHYgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKS51cGRhdGUodikuZGlnZXN0KCkKCiAgICAvLyBTdGVwIEgxL0gyYSwgYWdhaW4sIGlnbm9yZWQgYXMgdGxlbiA9PT0gcWxlbiAoMjU2IGJpdCkKICAgIC8vIFN0ZXAgSDJiIGFnYWluCiAgICB2ID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykudXBkYXRlKHYpLmRpZ2VzdCgpCiAgICBUID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKHYpCiAgfQoKICByZXR1cm4gVAp9Cgp2YXIgTl9PVkVSX1RXTyA9IHNlY3AyNTZrMS5uLnNoaWZ0UmlnaHQoMSkKCmZ1bmN0aW9uIHNpZ24gKGhhc2gsIGQpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuSGFzaDI1NmJpdCwgdHlwZXMuQmlnSW50KSwgYXJndW1lbnRzKQoKICB2YXIgeCA9IGQudG9CdWZmZXIoMzIpCiAgdmFyIGUgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoaGFzaCkKICB2YXIgbiA9IHNlY3AyNTZrMS5uCiAgdmFyIEcgPSBzZWNwMjU2azEuRwoKICB2YXIgciwgcwogIGRldGVybWluaXN0aWNHZW5lcmF0ZUsoaGFzaCwgeCwgZnVuY3Rpb24gKGspIHsKICAgIHZhciBRID0gRy5tdWx0aXBseShrKQoKICAgIGlmIChzZWNwMjU2azEuaXNJbmZpbml0eShRKSkgcmV0dXJuIGZhbHNlCgogICAgciA9IFEuYWZmaW5lWC5tb2QobikKICAgIGlmIChyLnNpZ251bSgpID09PSAwKSByZXR1cm4gZmFsc2UKCiAgICBzID0gay5tb2RJbnZlcnNlKG4pLm11bHRpcGx5KGUuYWRkKGQubXVsdGlwbHkocikpKS5tb2QobikKICAgIGlmIChzLnNpZ251bSgpID09PSAwKSByZXR1cm4gZmFsc2UKCiAgICByZXR1cm4gdHJ1ZQogIH0pCgogIC8vIGVuZm9yY2UgbG93IFMgdmFsdWVzLCBzZWUgYmlwNjI6ICdsb3cgcyB2YWx1ZXMgaW4gc2lnbmF0dXJlcycKICBpZiAocy5jb21wYXJlVG8oTl9PVkVSX1RXTykgPiAwKSB7CiAgICBzID0gbi5zdWJ0cmFjdChzKQogIH0KCiAgcmV0dXJuIG5ldyBFQ1NpZ25hdHVyZShyLCBzKQp9CgpmdW5jdGlvbiB2ZXJpZnkgKGhhc2gsIHNpZ25hdHVyZSwgUSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgKICAgIHR5cGVzLkhhc2gyNTZiaXQsCiAgICB0eXBlcy5FQ1NpZ25hdHVyZSwKICAgIHR5cGVzLkVDUG9pbnQKICApLCBhcmd1bWVudHMpCgogIHZhciBuID0gc2VjcDI1NmsxLm4KICB2YXIgRyA9IHNlY3AyNTZrMS5HCgogIHZhciByID0gc2lnbmF0dXJlLnIKICB2YXIgcyA9IHNpZ25hdHVyZS5zCgogIC8vIDEuNC4xIEVuZm9yY2UgciBhbmQgcyBhcmUgYm90aCBpbnRlZ2VycyBpbiB0aGUgaW50ZXJ2YWwgWzEsIG4g4oiSIDFdCiAgaWYgKHIuc2lnbnVtKCkgPD0gMCB8fCByLmNvbXBhcmVUbyhuKSA+PSAwKSByZXR1cm4gZmFsc2UKICBpZiAocy5zaWdudW0oKSA8PSAwIHx8IHMuY29tcGFyZVRvKG4pID49IDApIHJldHVybiBmYWxzZQoKICAvLyAxLjQuMiBIID0gSGFzaChNKSwgYWxyZWFkeSBkb25lIGJ5IHRoZSB1c2VyCiAgLy8gMS40LjMgZSA9IEgKICB2YXIgZSA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihoYXNoKQoKICAvLyBDb21wdXRlIHNeLTEKICB2YXIgc0ludiA9IHMubW9kSW52ZXJzZShuKQoKICAvLyAxLjQuNCBDb21wdXRlIHUxID0gZXNe4oiSMSBtb2QgbgogIC8vICAgICAgICAgICAgICAgdTIgPSByc17iiJIxIG1vZCBuCiAgdmFyIHUxID0gZS5tdWx0aXBseShzSW52KS5tb2QobikKICB2YXIgdTIgPSByLm11bHRpcGx5KHNJbnYpLm1vZChuKQoKICAvLyAxLjQuNSBDb21wdXRlIFIgPSAoeFIsIHlSKQogIC8vICAgICAgICAgICAgICAgUiA9IHUxRyArIHUyUQogIHZhciBSID0gRy5tdWx0aXBseVR3byh1MSwgUSwgdTIpCgogIC8vIDEuNC41IChjb250LikgRW5mb3JjZSBSIGlzIG5vdCBhdCBpbmZpbml0eQogIGlmIChzZWNwMjU2azEuaXNJbmZpbml0eShSKSkgcmV0dXJuIGZhbHNlCgogIC8vIDEuNC42IENvbnZlcnQgdGhlIGZpZWxkIGVsZW1lbnQgUi54IHRvIGFuIGludGVnZXIKICB2YXIgeFIgPSBSLmFmZmluZVgKCiAgLy8gMS40LjcgU2V0IHYgPSB4UiBtb2QgbgogIHZhciB2ID0geFIubW9kKG4pCgogIC8vIDEuNC44IElmIHYgPSByLCBvdXRwdXQgInZhbGlkIiwgYW5kIGlmIHYgIT0gciwgb3V0cHV0ICJpbnZhbGlkIgogIHJldHVybiB2LmVxdWFscyhyKQp9CgovKioKICAqIFJlY292ZXIgYSBwdWJsaWMga2V5IGZyb20gYSBzaWduYXR1cmUuCiAgKgogICogU2VlIFNFQyAxOiBFbGxpcHRpYyBDdXJ2ZSBDcnlwdG9ncmFwaHksIHNlY3Rpb24gNC4xLjYsICJQdWJsaWMKICAqIEtleSBSZWNvdmVyeSBPcGVyYXRpb24iLgogICoKICAqIGh0dHA6Ly93d3cuc2VjZy5vcmcvZG93bmxvYWQvYWlkLTc4MC9zZWMxLXYyLnBkZgogICovCmZ1bmN0aW9uIHJlY292ZXJQdWJLZXkgKGUsIHNpZ25hdHVyZSwgaSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgKICAgIHR5cGVzLkJpZ0ludCwKICAgIHR5cGVzLkVDU2lnbmF0dXJlLAogICAgdHlwZXMuVUludDIKICApLCBhcmd1bWVudHMpCgogIHZhciBuID0gc2VjcDI1NmsxLm4KICB2YXIgRyA9IHNlY3AyNTZrMS5HCiAgdmFyIHIgPSBzaWduYXR1cmUucgogIHZhciBzID0gc2lnbmF0dXJlLnMKCiAgaWYgKHIuc2lnbnVtKCkgPD0gMCB8fCByLmNvbXBhcmVUbyhuKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgciB2YWx1ZScpCiAgaWYgKHMuc2lnbnVtKCkgPD0gMCB8fCBzLmNvbXBhcmVUbyhuKSA+PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcyB2YWx1ZScpCgogIC8vIEEgc2V0IExTQiBzaWduaWZpZXMgdGhhdCB0aGUgeS1jb29yZGluYXRlIGlzIG9kZAogIHZhciBpc1lPZGQgPSBpICYgMQoKICAvLyBUaGUgbW9yZSBzaWduaWZpY2FudCBiaXQgc3BlY2lmaWVzIHdoZXRoZXIgd2Ugc2hvdWxkIHVzZSB0aGUKICAvLyBmaXJzdCBvciBzZWNvbmQgY2FuZGlkYXRlIGtleS4KICB2YXIgaXNTZWNvbmRLZXkgPSBpID4+IDEKCiAgLy8gMS4xIExldCB4ID0gciArIGpuCiAgdmFyIHggPSBpc1NlY29uZEtleSA/IHIuYWRkKG4pIDogcgogIHZhciBSID0gc2VjcDI1NmsxLnBvaW50RnJvbVgoaXNZT2RkLCB4KQoKICAvLyAxLjQgQ2hlY2sgdGhhdCBuUiBpcyBhdCBpbmZpbml0eQogIHZhciBuUiA9IFIubXVsdGlwbHkobikKICBpZiAoIXNlY3AyNTZrMS5pc0luZmluaXR5KG5SKSkgdGhyb3cgbmV3IEVycm9yKCduUiBpcyBub3QgYSB2YWxpZCBjdXJ2ZSBwb2ludCcpCgogIC8vIENvbXB1dGUgcl4tMQogIHZhciBySW52ID0gci5tb2RJbnZlcnNlKG4pCgogIC8vIENvbXB1dGUgLWUgZnJvbSBlCiAgdmFyIGVOZWcgPSBlLm5lZ2F0ZSgpLm1vZChuKQoKICAvLyAxLjYuMSBDb21wdXRlIFEgPSByXi0xIChzUiAtICBlRykKICAvLyAgICAgICAgICAgICAgIFEgPSByXi0xIChzUiArIC1lRykKICB2YXIgUSA9IFIubXVsdGlwbHlUd28ocywgRywgZU5lZykubXVsdGlwbHkockludikKCiAgc2VjcDI1NmsxLnZhbGlkYXRlKFEpCgogIHJldHVybiBRCn0KCi8qKgogICogQ2FsY3VsYXRlIHB1YmtleSBleHRyYWN0aW9uIHBhcmFtZXRlci4KICAqCiAgKiBXaGVuIGV4dHJhY3RpbmcgYSBwdWJrZXkgZnJvbSBhIHNpZ25hdHVyZSwgd2UgaGF2ZSB0bwogICogZGlzdGluZ3Vpc2ggZm91ciBkaWZmZXJlbnQgY2FzZXMuIFJhdGhlciB0aGFuIHB1dHRpbmcgdGhpcwogICogYnVyZGVuIG9uIHRoZSB2ZXJpZmllciwgQml0Y29pbiBpbmNsdWRlcyBhIDItYml0IHZhbHVlIHdpdGggdGhlCiAgKiBzaWduYXR1cmUuCiAgKgogICogVGhpcyBmdW5jdGlvbiBzaW1wbHkgdHJpZXMgYWxsIGZvdXIgY2FzZXMgYW5kIHJldHVybnMgdGhlIHZhbHVlCiAgKiB0aGF0IHJlc3VsdGVkIGluIGEgc3VjY2Vzc2Z1bCBwdWJrZXkgcmVjb3ZlcnkuCiAgKi8KZnVuY3Rpb24gY2FsY1B1YktleVJlY292ZXJ5UGFyYW0gKGUsIHNpZ25hdHVyZSwgUSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgKICAgIHR5cGVzLkJpZ0ludCwKICAgIHR5cGVzLkVDU2lnbmF0dXJlLAogICAgdHlwZXMuRUNQb2ludAogICksIGFyZ3VtZW50cykKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIHZhciBRcHJpbWUgPSByZWNvdmVyUHViS2V5KGUsIHNpZ25hdHVyZSwgaSkKCiAgICAvLyAxLjYuMiBWZXJpZnkgUQogICAgaWYgKFFwcmltZS5lcXVhbHMoUSkpIHsKICAgICAgcmV0dXJuIGkKICAgIH0KICB9CgogIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpbmQgdmFsaWQgcmVjb3ZlcnkgZmFjdG9yJykKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgY2FsY1B1YktleVJlY292ZXJ5UGFyYW06IGNhbGNQdWJLZXlSZWNvdmVyeVBhcmFtLAogIGRldGVybWluaXN0aWNHZW5lcmF0ZUs6IGRldGVybWluaXN0aWNHZW5lcmF0ZUssCiAgcmVjb3ZlclB1YktleTogcmVjb3ZlclB1YktleSwKICBzaWduOiBzaWduLAogIHZlcmlmeTogdmVyaWZ5LAoKICAvLyBUT0RPOiByZW1vdmUKICBfX2N1cnZlOiBzZWNwMjU2azEKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vZWNzaWduYXR1cmUiOjQ5MCwiLi90eXBlcyI6NTAwLCJiaWdpIjo0NTEsImJ1ZmZlciI6NTA0LCJjcmVhdGUtaG1hYyI6NDczLCJlY3VydmUiOjQ3NywidHlwZWZvcmNlIjo0ODF9XSw0ODk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiY3J5cHRvID0gcmVxdWlyZSgnLi9jcnlwdG8nKQp2YXIgYnM1OGNoZWNrID0gcmVxdWlyZSgnYnM1OGNoZWNrJykKdmFyIGVjZHNhID0gcmVxdWlyZSgnLi9lY2RzYScpCnZhciByYW5kb21CeXRlcyA9IHJlcXVpcmUoJ3JhbmRvbWJ5dGVzJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQp2YXIgd2lmID0gcmVxdWlyZSgnd2lmJykKCnZhciBORVRXT1JLUyA9IHJlcXVpcmUoJy4vbmV0d29ya3MnKQp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQoKdmFyIGVjdXJ2ZSA9IHJlcXVpcmUoJ2VjdXJ2ZScpCnZhciBzZWNwMjU2azEgPSBlY2RzYS5fX2N1cnZlCgpmdW5jdGlvbiBFQ1BhaXIgKGQsIFEsIG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucykgewogICAgdHlwZWZvcmNlKHsKICAgICAgY29tcHJlc3NlZDogdHlwZXMubWF5YmUodHlwZXMuQm9vbGVhbiksCiAgICAgIG5ldHdvcms6IHR5cGVzLm1heWJlKHR5cGVzLk5ldHdvcmspCiAgICB9LCBvcHRpb25zKQogIH0KCiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge30KCiAgaWYgKGQpIHsKICAgIGlmIChkLnNpZ251bSgpIDw9IDApIHRocm93IG5ldyBFcnJvcignUHJpdmF0ZSBrZXkgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpCiAgICBpZiAoZC5jb21wYXJlVG8oc2VjcDI1NmsxLm4pID49IDApIHRocm93IG5ldyBFcnJvcignUHJpdmF0ZSBrZXkgbXVzdCBiZSBsZXNzIHRoYW4gdGhlIGN1cnZlIG9yZGVyJykKICAgIGlmIChRKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmV4cGVjdGVkIHB1YmxpY0tleSBwYXJhbWV0ZXInKQoKICAgIHRoaXMuZCA9IGQKICB9IGVsc2UgewogICAgdHlwZWZvcmNlKHR5cGVzLkVDUG9pbnQsIFEpCgogICAgdGhpcy5fX1EgPSBRCiAgfQoKICB0aGlzLmNvbXByZXNzZWQgPSBvcHRpb25zLmNvbXByZXNzZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRpb25zLmNvbXByZXNzZWQKICB0aGlzLm5ldHdvcmsgPSBvcHRpb25zLm5ldHdvcmsgfHwgTkVUV09SS1MuYml0Y29pbgp9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoRUNQYWlyLnByb3RvdHlwZSwgJ1EnLCB7CiAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMuX19RICYmIHRoaXMuZCkgewogICAgICB0aGlzLl9fUSA9IHNlY3AyNTZrMS5HLm11bHRpcGx5KHRoaXMuZCkKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fX1EKICB9Cn0pCgpFQ1BhaXIuZnJvbVB1YmxpY0tleUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIsIG5ldHdvcmspIHsKICB2YXIgUSA9IGVjdXJ2ZS5Qb2ludC5kZWNvZGVGcm9tKHNlY3AyNTZrMSwgYnVmZmVyKQoKICByZXR1cm4gbmV3IEVDUGFpcihudWxsLCBRLCB7CiAgICBjb21wcmVzc2VkOiBRLmNvbXByZXNzZWQsCiAgICBuZXR3b3JrOiBuZXR3b3JrCiAgfSkKfQoKRUNQYWlyLmZyb21XSUYgPSBmdW5jdGlvbiAoc3RyaW5nLCBuZXR3b3JrKSB7CiAgbmV0d29yayA9IG5ldHdvcmsgfHwgTkVUV09SS1MuYml0Y29pbgogIHZhciBidWZmZXIgPSBiczU4Y2hlY2suZGVjb2RlKHN0cmluZykKCiAgaWYgKHR5cGVzLkFycmF5KG5ldHdvcmspKSB7CiAgICB2YXIgdmVyc2lvbiA9IGJ1ZmZlclswXQoKICAgIG5ldHdvcmsgPSBuZXR3b3JrLmZpbHRlcihmdW5jdGlvbiAobmV0d29yaykgewogICAgICByZXR1cm4gdmVyc2lvbiA9PT0gbmV0d29yay53aWYKICAgIH0pLnBvcCgpIHx8IHt9CiAgfQoKICB2YXIgZGVjb2RlZCA9IHdpZi5kZWNvZGVSYXcobmV0d29yay53aWYsIGJ1ZmZlcikKICB2YXIgZCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihkZWNvZGVkLmQpCgogIHJldHVybiBuZXcgRUNQYWlyKGQsIG51bGwsIHsKICAgIGNvbXByZXNzZWQ6IGRlY29kZWQuY29tcHJlc3NlZCwKICAgIG5ldHdvcms6IG5ldHdvcmsKICB9KQp9CgpFQ1BhaXIubWFrZVJhbmRvbSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge30KCiAgdmFyIHJuZyA9IG9wdGlvbnMucm5nIHx8IHJhbmRvbUJ5dGVzCgogIHZhciBkCiAgZG8gewogICAgdmFyIGJ1ZmZlciA9IHJuZygzMikKICAgIHR5cGVmb3JjZSh0eXBlcy5CdWZmZXIyNTZiaXQsIGJ1ZmZlcikKCiAgICBkID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGJ1ZmZlcikKICB9IHdoaWxlIChkLnNpZ251bSgpIDw9IDAgfHwgZC5jb21wYXJlVG8oc2VjcDI1NmsxLm4pID49IDApCgogIHJldHVybiBuZXcgRUNQYWlyKGQsIG51bGwsIG9wdGlvbnMpCn0KCkVDUGFpci5wcm90b3R5cGUuZ2V0QWRkcmVzcyA9IGZ1bmN0aW9uICgpIHsKICB2YXIgcHViS2V5ID0gdGhpcy5nZXRQdWJsaWNLZXlCdWZmZXIoKQogIHZhciBwdWJLZXlIYXNoID0gYmNyeXB0by5oYXNoMTYwKHB1YktleSkKCiAgdmFyIHBheWxvYWQgPSBuZXcgQnVmZmVyKDIxKQogIHBheWxvYWQud3JpdGVVSW50OCh0aGlzLm5ldHdvcmsucHViS2V5SGFzaCwgMCkKICBwdWJLZXlIYXNoLmNvcHkocGF5bG9hZCwgMSkKCiAgcmV0dXJuIGJzNThjaGVjay5lbmNvZGUocGF5bG9hZCkKfQoKRUNQYWlyLnByb3RvdHlwZS5nZXROZXR3b3JrID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLm5ldHdvcmsKfQoKRUNQYWlyLnByb3RvdHlwZS5nZXRQdWJsaWNLZXlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuUS5nZXRFbmNvZGVkKHRoaXMuY29tcHJlc3NlZCkKfQoKRUNQYWlyLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gKGhhc2gpIHsKICBpZiAoIXRoaXMuZCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByaXZhdGUga2V5JykKCiAgcmV0dXJuIGVjZHNhLnNpZ24oaGFzaCwgdGhpcy5kKQp9CgpFQ1BhaXIucHJvdG90eXBlLnRvV0lGID0gZnVuY3Rpb24gKCkgewogIGlmICghdGhpcy5kKSB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJpdmF0ZSBrZXknKQoKICByZXR1cm4gd2lmLmVuY29kZSh0aGlzLm5ldHdvcmsud2lmLCB0aGlzLmQudG9CdWZmZXIoMzIpLCB0aGlzLmNvbXByZXNzZWQpCn0KCkVDUGFpci5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gKGhhc2gsIHNpZ25hdHVyZSkgewogIHJldHVybiBlY2RzYS52ZXJpZnkoaGFzaCwgc2lnbmF0dXJlLCB0aGlzLlEpCn0KCm1vZHVsZS5leHBvcnRzID0gRUNQYWlyCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9jcnlwdG8iOjQ4NywiLi9lY2RzYSI6NDg4LCIuL25ldHdvcmtzIjo0OTQsIi4vdHlwZXMiOjUwMCwiYmlnaSI6NDUxLCJiczU4Y2hlY2siOjQ1NCwiYnVmZmVyIjo1MDQsImVjdXJ2ZSI6NDc3LCJyYW5kb21ieXRlcyI6NDgwLCJ0eXBlZm9yY2UiOjQ4MSwid2lmIjo0ODN9XSw0OTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiaXA2NiA9IHJlcXVpcmUoJ2JpcDY2JykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKCmZ1bmN0aW9uIEVDU2lnbmF0dXJlIChyLCBzKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkJpZ0ludCwgdHlwZXMuQmlnSW50KSwgYXJndW1lbnRzKQoKICB0aGlzLnIgPSByCiAgdGhpcy5zID0gcwp9CgpFQ1NpZ25hdHVyZS5wYXJzZUNvbXBhY3QgPSBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlci5sZW5ndGggIT09IDY1KSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2lnbmF0dXJlIGxlbmd0aCcpCgogIHZhciBmbGFnQnl0ZSA9IGJ1ZmZlci5yZWFkVUludDgoMCkgLSAyNwogIGlmIChmbGFnQnl0ZSAhPT0gKGZsYWdCeXRlICYgNykpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzaWduYXR1cmUgcGFyYW1ldGVyJykKCiAgdmFyIGNvbXByZXNzZWQgPSAhIShmbGFnQnl0ZSAmIDQpCiAgdmFyIHJlY292ZXJ5UGFyYW0gPSBmbGFnQnl0ZSAmIDMKCiAgdmFyIHIgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoYnVmZmVyLnNsaWNlKDEsIDMzKSkKICB2YXIgcyA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihidWZmZXIuc2xpY2UoMzMpKQoKICByZXR1cm4gewogICAgY29tcHJlc3NlZDogY29tcHJlc3NlZCwKICAgIGk6IHJlY292ZXJ5UGFyYW0sCiAgICBzaWduYXR1cmU6IG5ldyBFQ1NpZ25hdHVyZShyLCBzKQogIH0KfQoKRUNTaWduYXR1cmUuZnJvbURFUiA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICB2YXIgZGVjb2RlID0gYmlwNjYuZGVjb2RlKGJ1ZmZlcikKICB2YXIgciA9IEJpZ0ludGVnZXIuZnJvbURFUkludGVnZXIoZGVjb2RlLnIpCiAgdmFyIHMgPSBCaWdJbnRlZ2VyLmZyb21ERVJJbnRlZ2VyKGRlY29kZS5zKQoKICByZXR1cm4gbmV3IEVDU2lnbmF0dXJlKHIsIHMpCn0KCi8vIEJJUDYyOiAxIGJ5dGUgaGFzaFR5cGUgZmxhZyAob25seSAweDAxLCAweDAyLCAweDAzLCAweDgxLCAweDgyIGFuZCAweDgzIGFyZSBhbGxvd2VkKQpFQ1NpZ25hdHVyZS5wYXJzZVNjcmlwdFNpZ25hdHVyZSA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICB2YXIgaGFzaFR5cGUgPSBidWZmZXIucmVhZFVJbnQ4KGJ1ZmZlci5sZW5ndGggLSAxKQogIHZhciBoYXNoVHlwZU1vZCA9IGhhc2hUeXBlICYgfjB4ODAKCiAgaWYgKGhhc2hUeXBlTW9kIDw9IDB4MDAgfHwgaGFzaFR5cGVNb2QgPj0gMHgwNCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhhc2hUeXBlICcgKyBoYXNoVHlwZSkKCiAgcmV0dXJuIHsKICAgIHNpZ25hdHVyZTogRUNTaWduYXR1cmUuZnJvbURFUihidWZmZXIuc2xpY2UoMCwgLTEpKSwKICAgIGhhc2hUeXBlOiBoYXNoVHlwZQogIH0KfQoKRUNTaWduYXR1cmUucHJvdG90eXBlLnRvQ29tcGFjdCA9IGZ1bmN0aW9uIChpLCBjb21wcmVzc2VkKSB7CiAgaWYgKGNvbXByZXNzZWQpIHsKICAgIGkgKz0gNAogIH0KCiAgaSArPSAyNwoKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcig2NSkKICBidWZmZXIud3JpdGVVSW50OChpLCAwKQoKICB0aGlzLnIudG9CdWZmZXIoMzIpLmNvcHkoYnVmZmVyLCAxKQogIHRoaXMucy50b0J1ZmZlcigzMikuY29weShidWZmZXIsIDMzKQoKICByZXR1cm4gYnVmZmVyCn0KCkVDU2lnbmF0dXJlLnByb3RvdHlwZS50b0RFUiA9IGZ1bmN0aW9uICgpIHsKICB2YXIgciA9IG5ldyBCdWZmZXIodGhpcy5yLnRvREVSSW50ZWdlcigpKQogIHZhciBzID0gbmV3IEJ1ZmZlcih0aGlzLnMudG9ERVJJbnRlZ2VyKCkpCgogIHJldHVybiBiaXA2Ni5lbmNvZGUociwgcykKfQoKRUNTaWduYXR1cmUucHJvdG90eXBlLnRvU2NyaXB0U2lnbmF0dXJlID0gZnVuY3Rpb24gKGhhc2hUeXBlKSB7CiAgdmFyIGhhc2hUeXBlTW9kID0gaGFzaFR5cGUgJiB+MHg4MAogIGlmIChoYXNoVHlwZU1vZCA8PSAwIHx8IGhhc2hUeXBlTW9kID49IDQpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoYXNoVHlwZSAnICsgaGFzaFR5cGUpCgogIHZhciBoYXNoVHlwZUJ1ZmZlciA9IG5ldyBCdWZmZXIoMSkKICBoYXNoVHlwZUJ1ZmZlci53cml0ZVVJbnQ4KGhhc2hUeXBlLCAwKQoKICByZXR1cm4gQnVmZmVyLmNvbmNhdChbdGhpcy50b0RFUigpLCBoYXNoVHlwZUJ1ZmZlcl0pCn0KCm1vZHVsZS5leHBvcnRzID0gRUNTaWduYXR1cmUKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL3R5cGVzIjo1MDAsImJpZ2kiOjQ1MSwiYmlwNjYiOjQ1MywiYnVmZmVyIjo1MDQsInR5cGVmb3JjZSI6NDgxfV0sNDkxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYmFzZTU4Y2hlY2sgPSByZXF1aXJlKCdiczU4Y2hlY2snKQp2YXIgYmNyeXB0byA9IHJlcXVpcmUoJy4vY3J5cHRvJykKdmFyIGNyZWF0ZUhtYWMgPSByZXF1aXJlKCdjcmVhdGUtaG1hYycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKdmFyIE5FVFdPUktTID0gcmVxdWlyZSgnLi9uZXR3b3JrcycpCgp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQp2YXIgRUNQYWlyID0gcmVxdWlyZSgnLi9lY3BhaXInKQoKdmFyIGVjdXJ2ZSA9IHJlcXVpcmUoJ2VjdXJ2ZScpCnZhciBjdXJ2ZSA9IGVjdXJ2ZS5nZXRDdXJ2ZUJ5TmFtZSgnc2VjcDI1NmsxJykKCmZ1bmN0aW9uIEhETm9kZSAoa2V5UGFpciwgY2hhaW5Db2RlKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKCdFQ1BhaXInLCB0eXBlcy5CdWZmZXIyNTZiaXQpLCBhcmd1bWVudHMpCgogIGlmICgha2V5UGFpci5jb21wcmVzc2VkKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdCSVAzMiBvbmx5IGFsbG93cyBjb21wcmVzc2VkIGtleVBhaXJzJykKCiAgdGhpcy5rZXlQYWlyID0ga2V5UGFpcgogIHRoaXMuY2hhaW5Db2RlID0gY2hhaW5Db2RlCiAgdGhpcy5kZXB0aCA9IDAKICB0aGlzLmluZGV4ID0gMAogIHRoaXMucGFyZW50RmluZ2VycHJpbnQgPSAweDAwMDAwMDAwCn0KCkhETm9kZS5ISUdIRVNUX0JJVCA9IDB4ODAwMDAwMDAKSEROb2RlLkxFTkdUSCA9IDc4CkhETm9kZS5NQVNURVJfU0VDUkVUID0gbmV3IEJ1ZmZlcignQml0Y29pbiBzZWVkJykKCkhETm9kZS5mcm9tU2VlZEJ1ZmZlciA9IGZ1bmN0aW9uIChzZWVkLCBuZXR3b3JrKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkJ1ZmZlciwgdHlwZXMubWF5YmUodHlwZXMuTmV0d29yaykpLCBhcmd1bWVudHMpCgogIGlmIChzZWVkLmxlbmd0aCA8IDE2KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWVkIHNob3VsZCBiZSBhdCBsZWFzdCAxMjggYml0cycpCiAgaWYgKHNlZWQubGVuZ3RoID4gNjQpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1NlZWQgc2hvdWxkIGJlIGF0IG1vc3QgNTEyIGJpdHMnKQoKICB2YXIgSSA9IGNyZWF0ZUhtYWMoJ3NoYTUxMicsIEhETm9kZS5NQVNURVJfU0VDUkVUKS51cGRhdGUoc2VlZCkuZGlnZXN0KCkKICB2YXIgSUwgPSBJLnNsaWNlKDAsIDMyKQogIHZhciBJUiA9IEkuc2xpY2UoMzIpCgogIC8vIEluIGNhc2UgSUwgaXMgMCBvciA+PSBuLCB0aGUgbWFzdGVyIGtleSBpcyBpbnZhbGlkCiAgLy8gVGhpcyBpcyBoYW5kbGVkIGJ5IHRoZSBFQ1BhaXIgY29uc3RydWN0b3IKICB2YXIgcElMID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKElMKQogIHZhciBrZXlQYWlyID0gbmV3IEVDUGFpcihwSUwsIG51bGwsIHsKICAgIG5ldHdvcms6IG5ldHdvcmsKICB9KQoKICByZXR1cm4gbmV3IEhETm9kZShrZXlQYWlyLCBJUikKfQoKSEROb2RlLmZyb21TZWVkSGV4ID0gZnVuY3Rpb24gKGhleCwgbmV0d29yaykgewogIHJldHVybiBIRE5vZGUuZnJvbVNlZWRCdWZmZXIobmV3IEJ1ZmZlcihoZXgsICdoZXgnKSwgbmV0d29yaykKfQoKSEROb2RlLmZyb21CYXNlNTggPSBmdW5jdGlvbiAoc3RyaW5nLCBuZXR3b3JrcykgewogIHZhciBidWZmZXIgPSBiYXNlNThjaGVjay5kZWNvZGUoc3RyaW5nKQogIGlmIChidWZmZXIubGVuZ3RoICE9PSA3OCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGJ1ZmZlciBsZW5ndGgnKQoKICAvLyA0IGJ5dGVzOiB2ZXJzaW9uIGJ5dGVzCiAgdmFyIHZlcnNpb24gPSBidWZmZXIucmVhZFVJbnQzMkJFKDApCiAgdmFyIG5ldHdvcmsKCiAgLy8gbGlzdCBvZiBuZXR3b3Jrcz8KICBpZiAoQXJyYXkuaXNBcnJheShuZXR3b3JrcykpIHsKICAgIG5ldHdvcmsgPSBuZXR3b3Jrcy5maWx0ZXIoZnVuY3Rpb24gKG5ldHdvcmspIHsKICAgICAgcmV0dXJuIHZlcnNpb24gPT09IG5ldHdvcmsuYmlwMzIucHJpdmF0ZSB8fAogICAgICAgICAgICAgdmVyc2lvbiA9PT0gbmV0d29yay5iaXAzMi5wdWJsaWMKICAgIH0pLnBvcCgpIHx8IHt9CgogIC8vIG90aGVyd2lzZSwgYXNzdW1lIGEgbmV0d29yayBvYmplY3QgKG9yIGRlZmF1bHQgdG8gYml0Y29pbikKICB9IGVsc2UgewogICAgbmV0d29yayA9IG5ldHdvcmtzIHx8IE5FVFdPUktTLmJpdGNvaW4KICB9CgogIGlmICh2ZXJzaW9uICE9PSBuZXR3b3JrLmJpcDMyLnByaXZhdGUgJiYKICAgIHZlcnNpb24gIT09IG5ldHdvcmsuYmlwMzIucHVibGljKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbmV0d29yaycpCgogIC8vIDEgYnl0ZTogZGVwdGg6IDB4MDAgZm9yIG1hc3RlciBub2RlcywgMHgwMSBmb3IgbGV2ZWwtMSBkZXNjZW5kYW50cywgLi4uCiAgdmFyIGRlcHRoID0gYnVmZmVyWzRdCgogIC8vIDQgYnl0ZXM6IHRoZSBmaW5nZXJwcmludCBvZiB0aGUgcGFyZW50J3Mga2V5ICgweDAwMDAwMDAwIGlmIG1hc3RlciBrZXkpCiAgdmFyIHBhcmVudEZpbmdlcnByaW50ID0gYnVmZmVyLnJlYWRVSW50MzJCRSg1KQogIGlmIChkZXB0aCA9PT0gMCkgewogICAgaWYgKHBhcmVudEZpbmdlcnByaW50ICE9PSAweDAwMDAwMDAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFyZW50IGZpbmdlcnByaW50JykKICB9CgogIC8vIDQgYnl0ZXM6IGNoaWxkIG51bWJlci4gVGhpcyBpcyB0aGUgbnVtYmVyIGkgaW4geGkgPSB4cGFyL2ksIHdpdGggeGkgdGhlIGtleSBiZWluZyBzZXJpYWxpemVkLgogIC8vIFRoaXMgaXMgZW5jb2RlZCBpbiBNU0Igb3JkZXIuICgweDAwMDAwMDAwIGlmIG1hc3RlciBrZXkpCiAgdmFyIGluZGV4ID0gYnVmZmVyLnJlYWRVSW50MzJCRSg5KQogIGlmIChkZXB0aCA9PT0gMCAmJiBpbmRleCAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGluZGV4JykKCiAgLy8gMzIgYnl0ZXM6IHRoZSBjaGFpbiBjb2RlCiAgdmFyIGNoYWluQ29kZSA9IGJ1ZmZlci5zbGljZSgxMywgNDUpCiAgdmFyIGtleVBhaXIKCiAgLy8gMzMgYnl0ZXM6IHByaXZhdGUga2V5IGRhdGEgKDB4MDAgKyBrKQogIGlmICh2ZXJzaW9uID09PSBuZXR3b3JrLmJpcDMyLnByaXZhdGUpIHsKICAgIGlmIChidWZmZXIucmVhZFVJbnQ4KDQ1KSAhPT0gMHgwMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByaXZhdGUga2V5JykKCiAgICB2YXIgZCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihidWZmZXIuc2xpY2UoNDYsIDc4KSkKCiAgICBrZXlQYWlyID0gbmV3IEVDUGFpcihkLCBudWxsLCB7CiAgICAgIG5ldHdvcms6IG5ldHdvcmsKICAgIH0pCgogIC8vIDMzIGJ5dGVzOiBwdWJsaWMga2V5IGRhdGEgKDB4MDIgKyBYIG9yIDB4MDMgKyBYKQogIH0gZWxzZSB7CiAgICB2YXIgUSA9IGVjdXJ2ZS5Qb2ludC5kZWNvZGVGcm9tKGN1cnZlLCBidWZmZXIuc2xpY2UoNDUsIDc4KSkKICAgIGlmICghUS5jb21wcmVzc2VkKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHVibGljIGtleScpCgogICAgLy8gVmVyaWZ5IHRoYXQgdGhlIFggY29vcmRpbmF0ZSBpbiB0aGUgcHVibGljIHBvaW50IGNvcnJlc3BvbmRzIHRvIGEgcG9pbnQgb24gdGhlIGN1cnZlLgogICAgLy8gSWYgbm90LCB0aGUgZXh0ZW5kZWQgcHVibGljIGtleSBpcyBpbnZhbGlkLgogICAgY3VydmUudmFsaWRhdGUoUSkKCiAgICBrZXlQYWlyID0gbmV3IEVDUGFpcihudWxsLCBRLCB7CiAgICAgIG5ldHdvcms6IG5ldHdvcmsKICAgIH0pCiAgfQoKICB2YXIgaGQgPSBuZXcgSEROb2RlKGtleVBhaXIsIGNoYWluQ29kZSkKICBoZC5kZXB0aCA9IGRlcHRoCiAgaGQuaW5kZXggPSBpbmRleAogIGhkLnBhcmVudEZpbmdlcnByaW50ID0gcGFyZW50RmluZ2VycHJpbnQKCiAgcmV0dXJuIGhkCn0KCkhETm9kZS5wcm90b3R5cGUuZ2V0QWRkcmVzcyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLmdldEFkZHJlc3MoKQp9CgpIRE5vZGUucHJvdG90eXBlLmdldElkZW50aWZpZXIgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGJjcnlwdG8uaGFzaDE2MCh0aGlzLmtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkpCn0KCkhETm9kZS5wcm90b3R5cGUuZ2V0RmluZ2VycHJpbnQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuZ2V0SWRlbnRpZmllcigpLnNsaWNlKDAsIDQpCn0KCkhETm9kZS5wcm90b3R5cGUuZ2V0TmV0d29yayA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLmdldE5ldHdvcmsoKQp9CgpIRE5vZGUucHJvdG90eXBlLmdldFB1YmxpY0tleUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpCn0KCkhETm9kZS5wcm90b3R5cGUubmV1dGVyZWQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIG5ldXRlcmVkS2V5UGFpciA9IG5ldyBFQ1BhaXIobnVsbCwgdGhpcy5rZXlQYWlyLlEsIHsKICAgIG5ldHdvcms6IHRoaXMua2V5UGFpci5uZXR3b3JrCiAgfSkKCiAgdmFyIG5ldXRlcmVkID0gbmV3IEhETm9kZShuZXV0ZXJlZEtleVBhaXIsIHRoaXMuY2hhaW5Db2RlKQogIG5ldXRlcmVkLmRlcHRoID0gdGhpcy5kZXB0aAogIG5ldXRlcmVkLmluZGV4ID0gdGhpcy5pbmRleAogIG5ldXRlcmVkLnBhcmVudEZpbmdlcnByaW50ID0gdGhpcy5wYXJlbnRGaW5nZXJwcmludAoKICByZXR1cm4gbmV1dGVyZWQKfQoKSEROb2RlLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gKGhhc2gpIHsKICByZXR1cm4gdGhpcy5rZXlQYWlyLnNpZ24oaGFzaCkKfQoKSEROb2RlLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiAoaGFzaCwgc2lnbmF0dXJlKSB7CiAgcmV0dXJuIHRoaXMua2V5UGFpci52ZXJpZnkoaGFzaCwgc2lnbmF0dXJlKQp9CgpIRE5vZGUucHJvdG90eXBlLnRvQmFzZTU4ID0gZnVuY3Rpb24gKF9faXNQcml2YXRlKSB7CiAgaWYgKF9faXNQcml2YXRlICE9PSB1bmRlZmluZWQpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vuc3VwcG9ydGVkIGFyZ3VtZW50IGluIDIuMC4wJykKCiAgLy8gVmVyc2lvbgogIHZhciBuZXR3b3JrID0gdGhpcy5rZXlQYWlyLm5ldHdvcmsKICB2YXIgdmVyc2lvbiA9IHRoaXMua2V5UGFpci5kID8gbmV0d29yay5iaXAzMi5wcml2YXRlIDogbmV0d29yay5iaXAzMi5wdWJsaWMKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcig3OCkKCiAgLy8gNCBieXRlczogdmVyc2lvbiBieXRlcwogIGJ1ZmZlci53cml0ZVVJbnQzMkJFKHZlcnNpb24sIDApCgogIC8vIDEgYnl0ZTogZGVwdGg6IDB4MDAgZm9yIG1hc3RlciBub2RlcywgMHgwMSBmb3IgbGV2ZWwtMSBkZXNjZW5kYW50cywgLi4uLgogIGJ1ZmZlci53cml0ZVVJbnQ4KHRoaXMuZGVwdGgsIDQpCgogIC8vIDQgYnl0ZXM6IHRoZSBmaW5nZXJwcmludCBvZiB0aGUgcGFyZW50J3Mga2V5ICgweDAwMDAwMDAwIGlmIG1hc3RlciBrZXkpCiAgYnVmZmVyLndyaXRlVUludDMyQkUodGhpcy5wYXJlbnRGaW5nZXJwcmludCwgNSkKCiAgLy8gNCBieXRlczogY2hpbGQgbnVtYmVyLiBUaGlzIGlzIHRoZSBudW1iZXIgaSBpbiB4aSA9IHhwYXIvaSwgd2l0aCB4aSB0aGUga2V5IGJlaW5nIHNlcmlhbGl6ZWQuCiAgLy8gVGhpcyBpcyBlbmNvZGVkIGluIGJpZyBlbmRpYW4uICgweDAwMDAwMDAwIGlmIG1hc3RlciBrZXkpCiAgYnVmZmVyLndyaXRlVUludDMyQkUodGhpcy5pbmRleCwgOSkKCiAgLy8gMzIgYnl0ZXM6IHRoZSBjaGFpbiBjb2RlCiAgdGhpcy5jaGFpbkNvZGUuY29weShidWZmZXIsIDEzKQoKICAvLyAzMyBieXRlczogdGhlIHB1YmxpYyBrZXkgb3IgcHJpdmF0ZSBrZXkgZGF0YQogIGlmICh0aGlzLmtleVBhaXIuZCkgewogICAgLy8gMHgwMCArIGsgZm9yIHByaXZhdGUga2V5cwogICAgYnVmZmVyLndyaXRlVUludDgoMCwgNDUpCiAgICB0aGlzLmtleVBhaXIuZC50b0J1ZmZlcigzMikuY29weShidWZmZXIsIDQ2KQoKICAvLyAzMyBieXRlczogdGhlIHB1YmxpYyBrZXkKICB9IGVsc2UgewogICAgLy8gWDkuNjIgZW5jb2RpbmcgZm9yIHB1YmxpYyBrZXlzCiAgICB0aGlzLmtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkuY29weShidWZmZXIsIDQ1KQogIH0KCiAgcmV0dXJuIGJhc2U1OGNoZWNrLmVuY29kZShidWZmZXIpCn0KCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpcHMvYmxvYi9tYXN0ZXIvYmlwLTAwMzIubWVkaWF3aWtpI2NoaWxkLWtleS1kZXJpdmF0aW9uLWNrZC1mdW5jdGlvbnMKSEROb2RlLnByb3RvdHlwZS5kZXJpdmUgPSBmdW5jdGlvbiAoaW5kZXgpIHsKICB2YXIgaXNIYXJkZW5lZCA9IGluZGV4ID49IEhETm9kZS5ISUdIRVNUX0JJVAogIHZhciBkYXRhID0gbmV3IEJ1ZmZlcigzNykKCiAgLy8gSGFyZGVuZWQgY2hpbGQKICBpZiAoaXNIYXJkZW5lZCkgewogICAgaWYgKCF0aGlzLmtleVBhaXIuZCkgdGhyb3cgbmV3IFR5cGVFcnJvcignQ291bGQgbm90IGRlcml2ZSBoYXJkZW5lZCBjaGlsZCBrZXknKQoKICAgIC8vIGRhdGEgPSAweDAwIHx8IHNlcjI1NihrcGFyKSB8fCBzZXIzMihpbmRleCkKICAgIGRhdGFbMF0gPSAweDAwCiAgICB0aGlzLmtleVBhaXIuZC50b0J1ZmZlcigzMikuY29weShkYXRhLCAxKQogICAgZGF0YS53cml0ZVVJbnQzMkJFKGluZGV4LCAzMykKCiAgLy8gTm9ybWFsIGNoaWxkCiAgfSBlbHNlIHsKICAgIC8vIGRhdGEgPSBzZXJQKHBvaW50KGtwYXIpKSB8fCBzZXIzMihpbmRleCkKICAgIC8vICAgICAgPSBzZXJQKEtwYXIpIHx8IHNlcjMyKGluZGV4KQogICAgdGhpcy5rZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpLmNvcHkoZGF0YSwgMCkKICAgIGRhdGEud3JpdGVVSW50MzJCRShpbmRleCwgMzMpCiAgfQoKICB2YXIgSSA9IGNyZWF0ZUhtYWMoJ3NoYTUxMicsIHRoaXMuY2hhaW5Db2RlKS51cGRhdGUoZGF0YSkuZGlnZXN0KCkKICB2YXIgSUwgPSBJLnNsaWNlKDAsIDMyKQogIHZhciBJUiA9IEkuc2xpY2UoMzIpCgogIHZhciBwSUwgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoSUwpCgogIC8vIEluIGNhc2UgcGFyc2UyNTYoSUwpID49IG4sIHByb2NlZWQgd2l0aCB0aGUgbmV4dCB2YWx1ZSBmb3IgaQogIGlmIChwSUwuY29tcGFyZVRvKGN1cnZlLm4pID49IDApIHsKICAgIHJldHVybiB0aGlzLmRlcml2ZShpbmRleCArIDEpCiAgfQoKICAvLyBQcml2YXRlIHBhcmVudCBrZXkgLT4gcHJpdmF0ZSBjaGlsZCBrZXkKICB2YXIgZGVyaXZlZEtleVBhaXIKICBpZiAodGhpcy5rZXlQYWlyLmQpIHsKICAgIC8vIGtpID0gcGFyc2UyNTYoSUwpICsga3BhciAobW9kIG4pCiAgICB2YXIga2kgPSBwSUwuYWRkKHRoaXMua2V5UGFpci5kKS5tb2QoY3VydmUubikKCiAgICAvLyBJbiBjYXNlIGtpID09IDAsIHByb2NlZWQgd2l0aCB0aGUgbmV4dCB2YWx1ZSBmb3IgaQogICAgaWYgKGtpLnNpZ251bSgpID09PSAwKSB7CiAgICAgIHJldHVybiB0aGlzLmRlcml2ZShpbmRleCArIDEpCiAgICB9CgogICAgZGVyaXZlZEtleVBhaXIgPSBuZXcgRUNQYWlyKGtpLCBudWxsLCB7CiAgICAgIG5ldHdvcms6IHRoaXMua2V5UGFpci5uZXR3b3JrCiAgICB9KQoKICAvLyBQdWJsaWMgcGFyZW50IGtleSAtPiBwdWJsaWMgY2hpbGQga2V5CiAgfSBlbHNlIHsKICAgIC8vIEtpID0gcG9pbnQocGFyc2UyNTYoSUwpKSArIEtwYXIKICAgIC8vICAgID0gRypJTCArIEtwYXIKICAgIHZhciBLaSA9IGN1cnZlLkcubXVsdGlwbHkocElMKS5hZGQodGhpcy5rZXlQYWlyLlEpCgogICAgLy8gSW4gY2FzZSBLaSBpcyB0aGUgcG9pbnQgYXQgaW5maW5pdHksIHByb2NlZWQgd2l0aCB0aGUgbmV4dCB2YWx1ZSBmb3IgaQogICAgaWYgKGN1cnZlLmlzSW5maW5pdHkoS2kpKSB7CiAgICAgIHJldHVybiB0aGlzLmRlcml2ZShpbmRleCArIDEpCiAgICB9CgogICAgZGVyaXZlZEtleVBhaXIgPSBuZXcgRUNQYWlyKG51bGwsIEtpLCB7CiAgICAgIG5ldHdvcms6IHRoaXMua2V5UGFpci5uZXR3b3JrCiAgICB9KQogIH0KCiAgdmFyIGhkID0gbmV3IEhETm9kZShkZXJpdmVkS2V5UGFpciwgSVIpCiAgaGQuZGVwdGggPSB0aGlzLmRlcHRoICsgMQogIGhkLmluZGV4ID0gaW5kZXgKICBoZC5wYXJlbnRGaW5nZXJwcmludCA9IHRoaXMuZ2V0RmluZ2VycHJpbnQoKS5yZWFkVUludDMyQkUoMCkKCiAgcmV0dXJuIGhkCn0KCkhETm9kZS5wcm90b3R5cGUuZGVyaXZlSGFyZGVuZWQgPSBmdW5jdGlvbiAoaW5kZXgpIHsKICAvLyBPbmx5IGRlcml2ZXMgaGFyZGVuZWQgcHJpdmF0ZSBrZXlzIGJ5IGRlZmF1bHQKICByZXR1cm4gdGhpcy5kZXJpdmUoaW5kZXggKyBIRE5vZGUuSElHSEVTVF9CSVQpCn0KCkhETm9kZS5wcm90b3R5cGUudG9TdHJpbmcgPSBIRE5vZGUucHJvdG90eXBlLnRvQmFzZTU4Cgptb2R1bGUuZXhwb3J0cyA9IEhETm9kZQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vY3J5cHRvIjo0ODcsIi4vZWNwYWlyIjo0ODksIi4vbmV0d29ya3MiOjQ5NCwiLi90eXBlcyI6NTAwLCJiaWdpIjo0NTEsImJzNThjaGVjayI6NDU0LCJidWZmZXIiOjUwNCwiY3JlYXRlLWhtYWMiOjQ3MywiZWN1cnZlIjo0NzcsInR5cGVmb3JjZSI6NDgxfV0sNDkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSB7CiAgQmxvY2s6IHJlcXVpcmUoJy4vYmxvY2snKSwKICBFQ1BhaXI6IHJlcXVpcmUoJy4vZWNwYWlyJyksCiAgRUNTaWduYXR1cmU6IHJlcXVpcmUoJy4vZWNzaWduYXR1cmUnKSwKICBIRE5vZGU6IHJlcXVpcmUoJy4vaGRub2RlJyksCiAgVHJhbnNhY3Rpb246IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24nKSwKICBUcmFuc2FjdGlvbkJ1aWxkZXI6IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb25fYnVpbGRlcicpLAoKICBhZGRyZXNzOiByZXF1aXJlKCcuL2FkZHJlc3MnKSwKICBidWZmZXJ1dGlsczogcmVxdWlyZSgnLi9idWZmZXJ1dGlscycpLAogIGNyeXB0bzogcmVxdWlyZSgnLi9jcnlwdG8nKSwKICBtZXNzYWdlOiByZXF1aXJlKCcuL21lc3NhZ2UnKSwKICBuZXR3b3JrczogcmVxdWlyZSgnLi9uZXR3b3JrcycpLAogIG9wY29kZXM6IHJlcXVpcmUoJy4vb3Bjb2RlcycpLAogIHNjcmlwdDogcmVxdWlyZSgnLi9zY3JpcHQnKQp9Cgp9LHsiLi9hZGRyZXNzIjo0ODQsIi4vYmxvY2siOjQ4NSwiLi9idWZmZXJ1dGlscyI6NDg2LCIuL2NyeXB0byI6NDg3LCIuL2VjcGFpciI6NDg5LCIuL2Vjc2lnbmF0dXJlIjo0OTAsIi4vaGRub2RlIjo0OTEsIi4vbWVzc2FnZSI6NDkzLCIuL25ldHdvcmtzIjo0OTQsIi4vb3Bjb2RlcyI6NDk1LCIuL3NjcmlwdCI6NDk2LCIuL3RyYW5zYWN0aW9uIjo0OTgsIi4vdHJhbnNhY3Rpb25fYnVpbGRlciI6NDk5fV0sNDkzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYnVmZmVydXRpbHMgPSByZXF1aXJlKCcuL2J1ZmZlcnV0aWxzJykKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBlY2RzYSA9IHJlcXVpcmUoJy4vZWNkc2EnKQp2YXIgbmV0d29ya3MgPSByZXF1aXJlKCcuL25ldHdvcmtzJykKCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCnZhciBFQ1BhaXIgPSByZXF1aXJlKCcuL2VjcGFpcicpCnZhciBFQ1NpZ25hdHVyZSA9IHJlcXVpcmUoJy4vZWNzaWduYXR1cmUnKQoKZnVuY3Rpb24gbWFnaWNIYXNoIChtZXNzYWdlLCBuZXR3b3JrKSB7CiAgdmFyIG1lc3NhZ2VQcmVmaXggPSBuZXcgQnVmZmVyKG5ldHdvcmsubWVzc2FnZVByZWZpeCkKICB2YXIgbWVzc2FnZUJ1ZmZlciA9IG5ldyBCdWZmZXIobWVzc2FnZSkKICB2YXIgbGVuZ3RoQnVmZmVyID0gYnVmZmVydXRpbHMudmFySW50QnVmZmVyKG1lc3NhZ2VCdWZmZXIubGVuZ3RoKQoKICB2YXIgYnVmZmVyID0gQnVmZmVyLmNvbmNhdChbbWVzc2FnZVByZWZpeCwgbGVuZ3RoQnVmZmVyLCBtZXNzYWdlQnVmZmVyXSkKICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KGJ1ZmZlcikKfQoKZnVuY3Rpb24gc2lnbiAoa2V5UGFpciwgbWVzc2FnZSwgbmV0d29yaykgewogIG5ldHdvcmsgPSBuZXR3b3JrIHx8IG5ldHdvcmtzLmJpdGNvaW4KCiAgdmFyIGhhc2ggPSBtYWdpY0hhc2gobWVzc2FnZSwgbmV0d29yaykKICB2YXIgc2lnbmF0dXJlID0ga2V5UGFpci5zaWduKGhhc2gpCiAgdmFyIGUgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoaGFzaCkKICB2YXIgaSA9IGVjZHNhLmNhbGNQdWJLZXlSZWNvdmVyeVBhcmFtKGUsIHNpZ25hdHVyZSwga2V5UGFpci5RKQoKICByZXR1cm4gc2lnbmF0dXJlLnRvQ29tcGFjdChpLCBrZXlQYWlyLmNvbXByZXNzZWQpCn0KCmZ1bmN0aW9uIHZlcmlmeSAoYWRkcmVzcywgc2lnbmF0dXJlLCBtZXNzYWdlLCBuZXR3b3JrKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoc2lnbmF0dXJlKSkgewogICAgc2lnbmF0dXJlID0gbmV3IEJ1ZmZlcihzaWduYXR1cmUsICdiYXNlNjQnKQogIH0KCiAgbmV0d29yayA9IG5ldHdvcmsgfHwgbmV0d29ya3MuYml0Y29pbgoKICB2YXIgaGFzaCA9IG1hZ2ljSGFzaChtZXNzYWdlLCBuZXR3b3JrKQogIHZhciBwYXJzZWQgPSBFQ1NpZ25hdHVyZS5wYXJzZUNvbXBhY3Qoc2lnbmF0dXJlKQogIHZhciBlID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGhhc2gpCiAgdmFyIFEgPSBlY2RzYS5yZWNvdmVyUHViS2V5KGUsIHBhcnNlZC5zaWduYXR1cmUsIHBhcnNlZC5pKQoKICB2YXIga2V5UGFpciA9IG5ldyBFQ1BhaXIobnVsbCwgUSwgewogICAgY29tcHJlc3NlZDogcGFyc2VkLmNvbXByZXNzZWQsCiAgICBuZXR3b3JrOiBuZXR3b3JrCiAgfSkKCiAgcmV0dXJuIGtleVBhaXIuZ2V0QWRkcmVzcygpID09PSBhZGRyZXNzCn0KCm1vZHVsZS5leHBvcnRzID0gewogIG1hZ2ljSGFzaDogbWFnaWNIYXNoLAogIHNpZ246IHNpZ24sCiAgdmVyaWZ5OiB2ZXJpZnkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYnVmZmVydXRpbHMiOjQ4NiwiLi9jcnlwdG8iOjQ4NywiLi9lY2RzYSI6NDg4LCIuL2VjcGFpciI6NDg5LCIuL2Vjc2lnbmF0dXJlIjo0OTAsIi4vbmV0d29ya3MiOjQ5NCwiYmlnaSI6NDUxLCJidWZmZXIiOjUwNH1dLDQ5NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGh0dHBzOi8vZW4uYml0Y29pbi5pdC93aWtpL0xpc3Rfb2ZfYWRkcmVzc19wcmVmaXhlcwovLyBEb2dlY29pbiBCSVAzMiBpcyBhIHByb3Bvc2VkIHN0YW5kYXJkOiBodHRwczovL2JpdGNvaW50YWxrLm9yZy9pbmRleC5waHA/dG9waWM9NDA5NzMxCgptb2R1bGUuZXhwb3J0cyA9IHsKICBiaXRjb2luOiB7CiAgICBtZXNzYWdlUHJlZml4OiAnXHgxOEJpdGNvaW4gU2lnbmVkIE1lc3NhZ2U6XG4nLAogICAgYmlwMzI6IHsKICAgICAgcHVibGljOiAweDA0ODhiMjFlLAogICAgICBwcml2YXRlOiAweDA0ODhhZGU0CiAgICB9LAogICAgcHViS2V5SGFzaDogMHgwMCwKICAgIHNjcmlwdEhhc2g6IDB4MDUsCiAgICB3aWY6IDB4ODAsCiAgICBkdXN0VGhyZXNob2xkOiA1NDYgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYml0Y29pbi9ibG9iL3YwLjkuMi9zcmMvY29yZS5oI0wxNTEtTDE2MgogIH0sCiAgdGVzdG5ldDogewogICAgbWVzc2FnZVByZWZpeDogJ1x4MThCaXRjb2luIFNpZ25lZCBNZXNzYWdlOlxuJywKICAgIGJpcDMyOiB7CiAgICAgIHB1YmxpYzogMHgwNDM1ODdjZiwKICAgICAgcHJpdmF0ZTogMHgwNDM1ODM5NAogICAgfSwKICAgIHB1YktleUhhc2g6IDB4NmYsCiAgICBzY3JpcHRIYXNoOiAweGM0LAogICAgd2lmOiAweGVmLAogICAgZHVzdFRocmVzaG9sZDogNTQ2CiAgfSwKICBsaXRlY29pbjogewogICAgbWVzc2FnZVByZWZpeDogJ1x4MTlMaXRlY29pbiBTaWduZWQgTWVzc2FnZTpcbicsCiAgICBiaXAzMjogewogICAgICBwdWJsaWM6IDB4MDE5ZGE0NjIsCiAgICAgIHByaXZhdGU6IDB4MDE5ZDljZmUKICAgIH0sCiAgICBwdWJLZXlIYXNoOiAweDMwLAogICAgc2NyaXB0SGFzaDogMHgwNSwKICAgIHdpZjogMHhiMCwKICAgIGR1c3RUaHJlc2hvbGQ6IDAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2xpdGVjb2luLXByb2plY3QvbGl0ZWNvaW4vYmxvYi92MC44LjcuMi9zcmMvbWFpbi5jcHAjTDM2MC1MMzY1CiAgfSwKICBkb2dlY29pbjogewogICAgbWVzc2FnZVByZWZpeDogJ1x4MTlEb2dlY29pbiBTaWduZWQgTWVzc2FnZTpcbicsCiAgICBiaXAzMjogewogICAgICBwdWJsaWM6IDB4MDJmYWNhZmQsCiAgICAgIHByaXZhdGU6IDB4MDJmYWMzOTgKICAgIH0sCiAgICBwdWJLZXlIYXNoOiAweDFlLAogICAgc2NyaXB0SGFzaDogMHgxNiwKICAgIHdpZjogMHg5ZSwKICAgIGR1c3RUaHJlc2hvbGQ6IDAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2RvZ2Vjb2luL2RvZ2Vjb2luL2Jsb2IvdjEuNy4xL3NyYy9jb3JlLmgjTDE1NS1MMTYwCiAgfQp9Cgp9LHt9XSw0OTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz17CiAgIk9QX0ZBTFNFIjogMCwKICAiT1BfMCI6IDAsCiAgIk9QX1BVU0hEQVRBMSI6IDc2LAogICJPUF9QVVNIREFUQTIiOiA3NywKICAiT1BfUFVTSERBVEE0IjogNzgsCiAgIk9QXzFORUdBVEUiOiA3OSwKICAiT1BfUkVTRVJWRUQiOiA4MCwKICAiT1BfMSI6IDgxLAogICJPUF9UUlVFIjogODEsCiAgIk9QXzIiOiA4MiwKICAiT1BfMyI6IDgzLAogICJPUF80IjogODQsCiAgIk9QXzUiOiA4NSwKICAiT1BfNiI6IDg2LAogICJPUF83IjogODcsCiAgIk9QXzgiOiA4OCwKICAiT1BfOSI6IDg5LAogICJPUF8xMCI6IDkwLAogICJPUF8xMSI6IDkxLAogICJPUF8xMiI6IDkyLAogICJPUF8xMyI6IDkzLAogICJPUF8xNCI6IDk0LAogICJPUF8xNSI6IDk1LAogICJPUF8xNiI6IDk2LAoKICAiT1BfTk9QIjogOTcsCiAgIk9QX1ZFUiI6IDk4LAogICJPUF9JRiI6IDk5LAogICJPUF9OT1RJRiI6IDEwMCwKICAiT1BfVkVSSUYiOiAxMDEsCiAgIk9QX1ZFUk5PVElGIjogMTAyLAogICJPUF9FTFNFIjogMTAzLAogICJPUF9FTkRJRiI6IDEwNCwKICAiT1BfVkVSSUZZIjogMTA1LAogICJPUF9SRVRVUk4iOiAxMDYsCgogICJPUF9UT0FMVFNUQUNLIjogMTA3LAogICJPUF9GUk9NQUxUU1RBQ0siOiAxMDgsCiAgIk9QXzJEUk9QIjogMTA5LAogICJPUF8yRFVQIjogMTEwLAogICJPUF8zRFVQIjogMTExLAogICJPUF8yT1ZFUiI6IDExMiwKICAiT1BfMlJPVCI6IDExMywKICAiT1BfMlNXQVAiOiAxMTQsCiAgIk9QX0lGRFVQIjogMTE1LAogICJPUF9ERVBUSCI6IDExNiwKICAiT1BfRFJPUCI6IDExNywKICAiT1BfRFVQIjogMTE4LAogICJPUF9OSVAiOiAxMTksCiAgIk9QX09WRVIiOiAxMjAsCiAgIk9QX1BJQ0siOiAxMjEsCiAgIk9QX1JPTEwiOiAxMjIsCiAgIk9QX1JPVCI6IDEyMywKICAiT1BfU1dBUCI6IDEyNCwKICAiT1BfVFVDSyI6IDEyNSwKCiAgIk9QX0NBVCI6IDEyNiwKICAiT1BfU1VCU1RSIjogMTI3LAogICJPUF9MRUZUIjogMTI4LAogICJPUF9SSUdIVCI6IDEyOSwKICAiT1BfU0laRSI6IDEzMCwKCiAgIk9QX0lOVkVSVCI6IDEzMSwKICAiT1BfQU5EIjogMTMyLAogICJPUF9PUiI6IDEzMywKICAiT1BfWE9SIjogMTM0LAogICJPUF9FUVVBTCI6IDEzNSwKICAiT1BfRVFVQUxWRVJJRlkiOiAxMzYsCiAgIk9QX1JFU0VSVkVEMSI6IDEzNywKICAiT1BfUkVTRVJWRUQyIjogMTM4LAoKICAiT1BfMUFERCI6IDEzOSwKICAiT1BfMVNVQiI6IDE0MCwKICAiT1BfMk1VTCI6IDE0MSwKICAiT1BfMkRJViI6IDE0MiwKICAiT1BfTkVHQVRFIjogMTQzLAogICJPUF9BQlMiOiAxNDQsCiAgIk9QX05PVCI6IDE0NSwKICAiT1BfME5PVEVRVUFMIjogMTQ2LAogICJPUF9BREQiOiAxNDcsCiAgIk9QX1NVQiI6IDE0OCwKICAiT1BfTVVMIjogMTQ5LAogICJPUF9ESVYiOiAxNTAsCiAgIk9QX01PRCI6IDE1MSwKICAiT1BfTFNISUZUIjogMTUyLAogICJPUF9SU0hJRlQiOiAxNTMsCgogICJPUF9CT09MQU5EIjogMTU0LAogICJPUF9CT09MT1IiOiAxNTUsCiAgIk9QX05VTUVRVUFMIjogMTU2LAogICJPUF9OVU1FUVVBTFZFUklGWSI6IDE1NywKICAiT1BfTlVNTk9URVFVQUwiOiAxNTgsCiAgIk9QX0xFU1NUSEFOIjogMTU5LAogICJPUF9HUkVBVEVSVEhBTiI6IDE2MCwKICAiT1BfTEVTU1RIQU5PUkVRVUFMIjogMTYxLAogICJPUF9HUkVBVEVSVEhBTk9SRVFVQUwiOiAxNjIsCiAgIk9QX01JTiI6IDE2MywKICAiT1BfTUFYIjogMTY0LAoKICAiT1BfV0lUSElOIjogMTY1LAoKICAiT1BfUklQRU1EMTYwIjogMTY2LAogICJPUF9TSEExIjogMTY3LAogICJPUF9TSEEyNTYiOiAxNjgsCiAgIk9QX0hBU0gxNjAiOiAxNjksCiAgIk9QX0hBU0gyNTYiOiAxNzAsCiAgIk9QX0NPREVTRVBBUkFUT1IiOiAxNzEsCiAgIk9QX0NIRUNLU0lHIjogMTcyLAogICJPUF9DSEVDS1NJR1ZFUklGWSI6IDE3MywKICAiT1BfQ0hFQ0tNVUxUSVNJRyI6IDE3NCwKICAiT1BfQ0hFQ0tNVUxUSVNJR1ZFUklGWSI6IDE3NSwKCiAgIk9QX05PUDEiOiAxNzYsCiAgIk9QX05PUDIiOiAxNzcsCiAgIk9QX0NIRUNLTE9DS1RJTUVWRVJJRlkiOiAxNzcsCgogICJPUF9OT1AzIjogMTc4LAogICJPUF9OT1A0IjogMTc5LAogICJPUF9OT1A1IjogMTgwLAogICJPUF9OT1A2IjogMTgxLAogICJPUF9OT1A3IjogMTgyLAogICJPUF9OT1A4IjogMTgzLAogICJPUF9OT1A5IjogMTg0LAogICJPUF9OT1AxMCI6IDE4NSwKCiAgIk9QX1BVQktFWUhBU0giOiAyNTMsCiAgIk9QX1BVQktFWSI6IDI1NCwKICAiT1BfSU5WQUxJRE9QQ09ERSI6IDI1NQp9Cgp9LHt9XSw0OTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiaXA2NiA9IHJlcXVpcmUoJ2JpcDY2JykKdmFyIGJ1ZmZlcnV0aWxzID0gcmVxdWlyZSgnLi9idWZmZXJ1dGlscycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKCnZhciBPUFMgPSByZXF1aXJlKCcuL29wY29kZXMnKQp2YXIgUkVWRVJTRV9PUFMgPSAoZnVuY3Rpb24gKCkgewogIHZhciByZXN1bHQgPSB7fQogIGZvciAodmFyIG9wIGluIE9QUykgewogICAgdmFyIGNvZGUgPSBPUFNbb3BdCiAgICByZXN1bHRbY29kZV0gPSBvcAogIH0KICByZXR1cm4gcmVzdWx0Cn0pKCkKCnZhciBPUF9JTlRfQkFTRSA9IE9QUy5PUF9SRVNFUlZFRCAvLyBPUF8xIC0gMQoKZnVuY3Rpb24gdG9BU00gKGNodW5rcykgewogIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmtzKSkgewogICAgY2h1bmtzID0gZGVjb21waWxlKGNodW5rcykKICB9CgogIHJldHVybiBjaHVua3MubWFwKGZ1bmN0aW9uIChjaHVuaykgewogICAgLy8gZGF0YT8KICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSByZXR1cm4gY2h1bmsudG9TdHJpbmcoJ2hleCcpCgogICAgLy8gb3Bjb2RlIQogICAgcmV0dXJuIFJFVkVSU0VfT1BTW2NodW5rXQogIH0pLmpvaW4oJyAnKQp9CgpmdW5jdGlvbiBmcm9tQVNNIChhc20pIHsKICB0eXBlZm9yY2UodHlwZXMuU3RyaW5nLCBhc20pCgogIHJldHVybiBjb21waWxlKGFzbS5zcGxpdCgnICcpLm1hcChmdW5jdGlvbiAoY2h1bmtTdHIpIHsKICAgIC8vIG9wY29kZT8KICAgIGlmIChPUFNbY2h1bmtTdHJdICE9PSB1bmRlZmluZWQpIHJldHVybiBPUFNbY2h1bmtTdHJdCgogICAgLy8gZGF0YSEKICAgIHJldHVybiBuZXcgQnVmZmVyKGNodW5rU3RyLCAnaGV4JykKICB9KSkKfQoKZnVuY3Rpb24gY29tcGlsZSAoY2h1bmtzKSB7CiAgLy8gVE9ETzogcmVtb3ZlIG1lCiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVua3MpKSByZXR1cm4gY2h1bmtzCgogIHR5cGVmb3JjZSh0eXBlcy5BcnJheSwgY2h1bmtzKQoKICB2YXIgYnVmZmVyU2l6ZSA9IGNodW5rcy5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtLCBjaHVuaykgewogICAgLy8gZGF0YSBjaHVuawogICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpIHsKICAgICAgcmV0dXJuIGFjY3VtICsgYnVmZmVydXRpbHMucHVzaERhdGFTaXplKGNodW5rLmxlbmd0aCkgKyBjaHVuay5sZW5ndGgKICAgIH0KCiAgICAvLyBvcGNvZGUKICAgIHJldHVybiBhY2N1bSArIDEKICB9LCAwLjApCgogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKGJ1ZmZlclNpemUpCiAgdmFyIG9mZnNldCA9IDAKCiAgY2h1bmtzLmZvckVhY2goZnVuY3Rpb24gKGNodW5rKSB7CiAgICAvLyBkYXRhIGNodW5rCiAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgewogICAgICBvZmZzZXQgKz0gYnVmZmVydXRpbHMud3JpdGVQdXNoRGF0YUludChidWZmZXIsIGNodW5rLmxlbmd0aCwgb2Zmc2V0KQoKICAgICAgY2h1bmsuY29weShidWZmZXIsIG9mZnNldCkKICAgICAgb2Zmc2V0ICs9IGNodW5rLmxlbmd0aAoKICAgIC8vIG9wY29kZQogICAgfSBlbHNlIHsKICAgICAgYnVmZmVyLndyaXRlVUludDgoY2h1bmssIG9mZnNldCkKICAgICAgb2Zmc2V0ICs9IDEKICAgIH0KICB9KQoKICBpZiAob2Zmc2V0ICE9PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBkZWNvZGUgY2h1bmtzJykKICByZXR1cm4gYnVmZmVyCn0KCmZ1bmN0aW9uIGRlY29tcGlsZSAoYnVmZmVyKSB7CiAgLy8gVE9ETzogcmVtb3ZlIG1lCiAgaWYgKHR5cGVzLkFycmF5KGJ1ZmZlcikpIHJldHVybiBidWZmZXIKCiAgdHlwZWZvcmNlKHR5cGVzLkJ1ZmZlciwgYnVmZmVyKQoKICB2YXIgY2h1bmtzID0gW10KICB2YXIgaSA9IDAKCiAgd2hpbGUgKGkgPCBidWZmZXIubGVuZ3RoKSB7CiAgICB2YXIgb3Bjb2RlID0gYnVmZmVyW2ldCgogICAgLy8gZGF0YSBjaHVuawogICAgaWYgKChvcGNvZGUgPiBPUFMuT1BfMCkgJiYgKG9wY29kZSA8PSBPUFMuT1BfUFVTSERBVEE0KSkgewogICAgICB2YXIgZCA9IGJ1ZmZlcnV0aWxzLnJlYWRQdXNoRGF0YUludChidWZmZXIsIGkpCgogICAgICAvLyBkaWQgcmVhZGluZyBhIHB1c2hEYXRhSW50IGZhaWw/IGVtcHR5IHNjcmlwdAogICAgICBpZiAoZCA9PT0gbnVsbCkgcmV0dXJuIFtdCiAgICAgIGkgKz0gZC5zaXplCgogICAgICAvLyBhdHRlbXB0IHRvIHJlYWQgdG9vIG11Y2ggZGF0YT8gZW1wdHkgc2NyaXB0CiAgICAgIGlmIChpICsgZC5udW1iZXIgPiBidWZmZXIubGVuZ3RoKSByZXR1cm4gW10KCiAgICAgIHZhciBkYXRhID0gYnVmZmVyLnNsaWNlKGksIGkgKyBkLm51bWJlcikKICAgICAgaSArPSBkLm51bWJlcgoKICAgICAgY2h1bmtzLnB1c2goZGF0YSkKCiAgICAvLyBvcGNvZGUKICAgIH0gZWxzZSB7CiAgICAgIGNodW5rcy5wdXNoKG9wY29kZSkKCiAgICAgIGkgKz0gMQogICAgfQogIH0KCiAgcmV0dXJuIGNodW5rcwp9CgpmdW5jdGlvbiBpc0Nhbm9uaWNhbFB1YktleSAoYnVmZmVyKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSkgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlci5sZW5ndGggPCAzMykgcmV0dXJuIGZhbHNlCgogIHN3aXRjaCAoYnVmZmVyWzBdKSB7CiAgICBjYXNlIDB4MDI6CiAgICBjYXNlIDB4MDM6CiAgICAgIHJldHVybiBidWZmZXIubGVuZ3RoID09PSAzMwogICAgY2FzZSAweDA0OgogICAgICByZXR1cm4gYnVmZmVyLmxlbmd0aCA9PT0gNjUKICB9CgogIHJldHVybiBmYWxzZQp9CgpmdW5jdGlvbiBpc0Nhbm9uaWNhbFNpZ25hdHVyZSAoYnVmZmVyKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSkgcmV0dXJuIGZhbHNlCiAgaWYgKCFpc0RlZmluZWRIYXNoVHlwZShidWZmZXJbYnVmZmVyLmxlbmd0aCAtIDFdKSkgcmV0dXJuIGZhbHNlCgogIHJldHVybiBiaXA2Ni5jaGVjayhidWZmZXIuc2xpY2UoMCwgLTEpKQp9CgpmdW5jdGlvbiBpc0RlZmluZWRIYXNoVHlwZSAoaGFzaFR5cGUpIHsKICB2YXIgaGFzaFR5cGVNb2QgPSBoYXNoVHlwZSAmIH4weDgwCgovLyByZXR1cm4gaGFzaFR5cGVNb2QgPiBTSUdIQVNIX0FMTCAmJiBoYXNoVHlwZU1vZCA8IFNJR0hBU0hfU0lOR0xFCiAgcmV0dXJuIGhhc2hUeXBlTW9kID4gMHgwMCAmJiBoYXNoVHlwZU1vZCA8IDB4MDQKfQoKZnVuY3Rpb24gaXNQdWJLZXlIYXNoSW5wdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQoKICByZXR1cm4gY2h1bmtzLmxlbmd0aCA9PT0gMiAmJgogICAgaXNDYW5vbmljYWxTaWduYXR1cmUoY2h1bmtzWzBdKSAmJgogICAgaXNDYW5vbmljYWxQdWJLZXkoY2h1bmtzWzFdKQp9CgpmdW5jdGlvbiBpc1B1YktleUhhc2hPdXRwdXQgKHNjcmlwdCkgewogIHZhciBidWZmZXIgPSBjb21waWxlKHNjcmlwdCkKCiAgcmV0dXJuIGJ1ZmZlci5sZW5ndGggPT09IDI1ICYmCiAgICBidWZmZXJbMF0gPT09IE9QUy5PUF9EVVAgJiYKICAgIGJ1ZmZlclsxXSA9PT0gT1BTLk9QX0hBU0gxNjAgJiYKICAgIGJ1ZmZlclsyXSA9PT0gMHgxNCAmJgogICAgYnVmZmVyWzIzXSA9PT0gT1BTLk9QX0VRVUFMVkVSSUZZICYmCiAgICBidWZmZXJbMjRdID09PSBPUFMuT1BfQ0hFQ0tTSUcKfQoKZnVuY3Rpb24gaXNQdWJLZXlJbnB1dCAoc2NyaXB0KSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCgogIHJldHVybiBjaHVua3MubGVuZ3RoID09PSAxICYmCiAgICBpc0Nhbm9uaWNhbFNpZ25hdHVyZShjaHVua3NbMF0pCn0KCmZ1bmN0aW9uIGlzUHViS2V5T3V0cHV0IChzY3JpcHQpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKCiAgcmV0dXJuIGNodW5rcy5sZW5ndGggPT09IDIgJiYKICAgIGlzQ2Fub25pY2FsUHViS2V5KGNodW5rc1swXSkgJiYKICAgIGNodW5rc1sxXSA9PT0gT1BTLk9QX0NIRUNLU0lHCn0KCmZ1bmN0aW9uIGlzU2NyaXB0SGFzaElucHV0IChzY3JpcHQsIGFsbG93SW5jb21wbGV0ZSkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQogIGlmIChjaHVua3MubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlCgogIHZhciBsYXN0Q2h1bmsgPSBjaHVua3NbY2h1bmtzLmxlbmd0aCAtIDFdCiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIobGFzdENodW5rKSkgcmV0dXJuIGZhbHNlCgogIHZhciBzY3JpcHRTaWdDaHVua3MgPSBjaHVua3Muc2xpY2UoMCwgLTEpCiAgdmFyIHJlZGVlbVNjcmlwdENodW5rcyA9IGRlY29tcGlsZShsYXN0Q2h1bmspCgogIC8vIGlzIHJlZGVlbVNjcmlwdCBhIHZhbGlkIHNjcmlwdD8KICBpZiAocmVkZWVtU2NyaXB0Q2h1bmtzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGZhbHNlCgogIHJldHVybiBjbGFzc2lmeUlucHV0KHNjcmlwdFNpZ0NodW5rcywgYWxsb3dJbmNvbXBsZXRlKSA9PT0gY2xhc3NpZnlPdXRwdXQocmVkZWVtU2NyaXB0Q2h1bmtzKQp9CgpmdW5jdGlvbiBpc1NjcmlwdEhhc2hPdXRwdXQgKHNjcmlwdCkgewogIHZhciBidWZmZXIgPSBjb21waWxlKHNjcmlwdCkKCiAgcmV0dXJuIGJ1ZmZlci5sZW5ndGggPT09IDIzICYmCiAgICBidWZmZXJbMF0gPT09IE9QUy5PUF9IQVNIMTYwICYmCiAgICBidWZmZXJbMV0gPT09IDB4MTQgJiYKICAgIGJ1ZmZlclsyMl0gPT09IE9QUy5PUF9FUVVBTAp9CgovLyBhbGxvd0luY29tcGxldGUgaXMgdG8gYWNjb3VudCBmb3IgY29tYmluaW5nIHNpZ25hdHVyZXMKLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpdGNvaW4vYmxvYi9mNDI1MDUwNTQ2NjQ0YTM2YjBiOGUwZWIyZjY5MzRhM2UwZjZmODBmL3NyYy9zY3JpcHQvc2lnbi5jcHAjTDE5NS1MMTk3CmZ1bmN0aW9uIGlzTXVsdGlzaWdJbnB1dCAoc2NyaXB0LCBhbGxvd0luY29tcGxldGUpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKICBpZiAoY2h1bmtzLmxlbmd0aCA8IDIpIHJldHVybiBmYWxzZQogIGlmIChjaHVua3NbMF0gIT09IE9QUy5PUF8wKSByZXR1cm4gZmFsc2UKCiAgaWYgKGFsbG93SW5jb21wbGV0ZSkgewogICAgcmV0dXJuIGNodW5rcy5zbGljZSgxKS5ldmVyeShmdW5jdGlvbiAoY2h1bmspIHsKICAgICAgcmV0dXJuIGNodW5rID09PSBPUFMuT1BfMCB8fCBpc0Nhbm9uaWNhbFNpZ25hdHVyZShjaHVuaykKICAgIH0pCiAgfQoKICByZXR1cm4gY2h1bmtzLnNsaWNlKDEpLmV2ZXJ5KGlzQ2Fub25pY2FsU2lnbmF0dXJlKQp9CgpmdW5jdGlvbiBpc011bHRpc2lnT3V0cHV0IChzY3JpcHQpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKICBpZiAoY2h1bmtzLmxlbmd0aCA8IDQpIHJldHVybiBmYWxzZQogIGlmIChjaHVua3NbY2h1bmtzLmxlbmd0aCAtIDFdICE9PSBPUFMuT1BfQ0hFQ0tNVUxUSVNJRykgcmV0dXJuIGZhbHNlCgogIHZhciBtT3AgPSBjaHVua3NbMF0KICB2YXIgbk9wID0gY2h1bmtzW2NodW5rcy5sZW5ndGggLSAyXQoKICBpZiAoIXR5cGVzLk51bWJlcihtT3ApKSByZXR1cm4gZmFsc2UKICBpZiAoIXR5cGVzLk51bWJlcihuT3ApKSByZXR1cm4gZmFsc2UKCiAgdmFyIG0gPSBtT3AgLSBPUF9JTlRfQkFTRQogIHZhciBuID0gbk9wIC0gT1BfSU5UX0JBU0UKCiAgLy8gMCA8IG0gPD0gbiA8PSAxNgogIGlmIChtIDw9IDApIHJldHVybiBmYWxzZQogIGlmIChtID4gbikgcmV0dXJuIGZhbHNlCiAgaWYgKG4gPiAxNikgcmV0dXJuIGZhbHNlCiAgaWYgKG4gIT09IGNodW5rcy5sZW5ndGggLSAzKSByZXR1cm4gZmFsc2UKCiAgcmV0dXJuIGNodW5rcy5zbGljZSgxLCAtMikuZXZlcnkoaXNDYW5vbmljYWxQdWJLZXkpCn0KCmZ1bmN0aW9uIGlzTnVsbERhdGFPdXRwdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQogIHJldHVybiBjaHVua3NbMF0gPT09IE9QUy5PUF9SRVRVUk4KfQoKZnVuY3Rpb24gY2xhc3NpZnlPdXRwdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQoKICBpZiAoaXNQdWJLZXlIYXNoT3V0cHV0KGNodW5rcykpIHsKICAgIHJldHVybiAncHVia2V5aGFzaCcKICB9IGVsc2UgaWYgKGlzU2NyaXB0SGFzaE91dHB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ3NjcmlwdGhhc2gnCiAgfSBlbHNlIGlmIChpc011bHRpc2lnT3V0cHV0KGNodW5rcykpIHsKICAgIHJldHVybiAnbXVsdGlzaWcnCiAgfSBlbHNlIGlmIChpc1B1YktleU91dHB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ3B1YmtleScKICB9IGVsc2UgaWYgKGlzTnVsbERhdGFPdXRwdXQoY2h1bmtzKSkgewogICAgcmV0dXJuICdudWxsZGF0YScKICB9CgogIHJldHVybiAnbm9uc3RhbmRhcmQnCn0KCmZ1bmN0aW9uIGNsYXNzaWZ5SW5wdXQgKHNjcmlwdCwgYWxsb3dJbmNvbXBsZXRlKSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCgogIGlmIChpc1B1YktleUhhc2hJbnB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ3B1YmtleWhhc2gnCiAgfSBlbHNlIGlmIChpc011bHRpc2lnSW5wdXQoY2h1bmtzLCBhbGxvd0luY29tcGxldGUpKSB7CiAgICByZXR1cm4gJ211bHRpc2lnJwogIH0gZWxzZSBpZiAoaXNTY3JpcHRIYXNoSW5wdXQoY2h1bmtzLCBhbGxvd0luY29tcGxldGUpKSB7CiAgICByZXR1cm4gJ3NjcmlwdGhhc2gnCiAgfSBlbHNlIGlmIChpc1B1YktleUlucHV0KGNodW5rcykpIHsKICAgIHJldHVybiAncHVia2V5JwogIH0KCiAgcmV0dXJuICdub25zdGFuZGFyZCcKfQoKLy8gU3RhbmRhcmQgU2NyaXB0IFRlbXBsYXRlcwovLyB7cHViS2V5fSBPUF9DSEVDS1NJRwpmdW5jdGlvbiBwdWJLZXlPdXRwdXQgKHB1YktleSkgewogIHJldHVybiBjb21waWxlKFtwdWJLZXksIE9QUy5PUF9DSEVDS1NJR10pCn0KCi8vIE9QX0RVUCBPUF9IQVNIMTYwIHtwdWJLZXlIYXNofSBPUF9FUVVBTFZFUklGWSBPUF9DSEVDS1NJRwpmdW5jdGlvbiBwdWJLZXlIYXNoT3V0cHV0IChwdWJLZXlIYXNoKSB7CiAgdHlwZWZvcmNlKHR5cGVzLkhhc2gxNjBiaXQsIHB1YktleUhhc2gpCgogIHJldHVybiBjb21waWxlKFtPUFMuT1BfRFVQLCBPUFMuT1BfSEFTSDE2MCwgcHViS2V5SGFzaCwgT1BTLk9QX0VRVUFMVkVSSUZZLCBPUFMuT1BfQ0hFQ0tTSUddKQp9CgovLyBPUF9IQVNIMTYwIHtzY3JpcHRIYXNofSBPUF9FUVVBTApmdW5jdGlvbiBzY3JpcHRIYXNoT3V0cHV0IChzY3JpcHRIYXNoKSB7CiAgdHlwZWZvcmNlKHR5cGVzLkhhc2gxNjBiaXQsIHNjcmlwdEhhc2gpCgogIHJldHVybiBjb21waWxlKFtPUFMuT1BfSEFTSDE2MCwgc2NyaXB0SGFzaCwgT1BTLk9QX0VRVUFMXSkKfQoKLy8gbSBbcHViS2V5cyAuLi5dIG4gT1BfQ0hFQ0tNVUxUSVNJRwpmdW5jdGlvbiBtdWx0aXNpZ091dHB1dCAobSwgcHViS2V5cykgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5OdW1iZXIsIFt0eXBlcy5CdWZmZXJdKSwgYXJndW1lbnRzKQoKICB2YXIgbiA9IHB1YktleXMubGVuZ3RoCiAgaWYgKG4gPCBtKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBlbm91Z2ggcHViS2V5cyBwcm92aWRlZCcpCgogIHJldHVybiBjb21waWxlKFtdLmNvbmNhdCgKICAgIE9QX0lOVF9CQVNFICsgbSwKICAgIHB1YktleXMsCiAgICBPUF9JTlRfQkFTRSArIG4sCiAgICBPUFMuT1BfQ0hFQ0tNVUxUSVNJRwogICkpCn0KCi8vIHtzaWduYXR1cmV9CmZ1bmN0aW9uIHB1YktleUlucHV0IChzaWduYXR1cmUpIHsKICB0eXBlZm9yY2UodHlwZXMuQnVmZmVyLCBzaWduYXR1cmUpCgogIHJldHVybiBjb21waWxlKFtzaWduYXR1cmVdKQp9CgovLyB7c2lnbmF0dXJlfSB7cHViS2V5fQpmdW5jdGlvbiBwdWJLZXlIYXNoSW5wdXQgKHNpZ25hdHVyZSwgcHViS2V5KSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkJ1ZmZlciwgdHlwZXMuQnVmZmVyKSwgYXJndW1lbnRzKQoKICByZXR1cm4gY29tcGlsZShbc2lnbmF0dXJlLCBwdWJLZXldKQp9CgovLyA8c2NyaXB0U2lnPiB7c2VyaWFsaXplZCBzY3JpcHRQdWJLZXkgc2NyaXB0fQpmdW5jdGlvbiBzY3JpcHRIYXNoSW5wdXQgKHNjcmlwdFNpZywgc2NyaXB0UHViS2V5KSB7CiAgdmFyIHNjcmlwdFNpZ0NodW5rcyA9IGRlY29tcGlsZShzY3JpcHRTaWcpCiAgdmFyIHNlcmlhbGl6ZWRTY3JpcHRQdWJLZXkgPSBjb21waWxlKHNjcmlwdFB1YktleSkKCiAgcmV0dXJuIGNvbXBpbGUoW10uY29uY2F0KAogICAgc2NyaXB0U2lnQ2h1bmtzLAogICAgc2VyaWFsaXplZFNjcmlwdFB1YktleQogICkpCn0KCi8vIE9QXzAgW3NpZ25hdHVyZXMgLi4uXQpmdW5jdGlvbiBtdWx0aXNpZ0lucHV0IChzaWduYXR1cmVzLCBzY3JpcHRQdWJLZXkpIHsKICBpZiAoc2NyaXB0UHViS2V5KSB7CiAgICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdFB1YktleSkKICAgIGlmICghaXNNdWx0aXNpZ091dHB1dChjaHVua3MpKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIG11bHRpc2lnIHNjcmlwdFB1YktleScpCgogICAgdmFyIG1PcCA9IGNodW5rc1swXQogICAgdmFyIG5PcCA9IGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMl0KICAgIHZhciBtID0gbU9wIC0gT1BfSU5UX0JBU0UKICAgIHZhciBuID0gbk9wIC0gT1BfSU5UX0JBU0UKCiAgICBpZiAoc2lnbmF0dXJlcy5sZW5ndGggPCBtKSB0aHJvdyBuZXcgRXJyb3IoJ05vdCBlbm91Z2ggc2lnbmF0dXJlcyBwcm92aWRlZCcpCiAgICBpZiAoc2lnbmF0dXJlcy5sZW5ndGggPiBuKSB0aHJvdyBuZXcgRXJyb3IoJ1RvbyBtYW55IHNpZ25hdHVyZXMgcHJvdmlkZWQnKQogIH0KCiAgcmV0dXJuIGNvbXBpbGUoW10uY29uY2F0KE9QUy5PUF8wLCBzaWduYXR1cmVzKSkKfQoKZnVuY3Rpb24gbnVsbERhdGFPdXRwdXQgKGRhdGEpIHsKICByZXR1cm4gY29tcGlsZShbT1BTLk9QX1JFVFVSTiwgZGF0YV0pCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGNvbXBpbGU6IGNvbXBpbGUsCiAgZGVjb21waWxlOiBkZWNvbXBpbGUsCiAgZnJvbUFTTTogZnJvbUFTTSwKICB0b0FTTTogdG9BU00sCgogIG51bWJlcjogcmVxdWlyZSgnLi9zY3JpcHRfbnVtYmVyJyksCgogIGlzQ2Fub25pY2FsUHViS2V5OiBpc0Nhbm9uaWNhbFB1YktleSwKICBpc0Nhbm9uaWNhbFNpZ25hdHVyZTogaXNDYW5vbmljYWxTaWduYXR1cmUsCiAgaXNEZWZpbmVkSGFzaFR5cGU6IGlzRGVmaW5lZEhhc2hUeXBlLAogIGlzUHViS2V5SGFzaElucHV0OiBpc1B1YktleUhhc2hJbnB1dCwKICBpc1B1YktleUhhc2hPdXRwdXQ6IGlzUHViS2V5SGFzaE91dHB1dCwKICBpc1B1YktleUlucHV0OiBpc1B1YktleUlucHV0LAogIGlzUHViS2V5T3V0cHV0OiBpc1B1YktleU91dHB1dCwKICBpc1NjcmlwdEhhc2hJbnB1dDogaXNTY3JpcHRIYXNoSW5wdXQsCiAgaXNTY3JpcHRIYXNoT3V0cHV0OiBpc1NjcmlwdEhhc2hPdXRwdXQsCiAgaXNNdWx0aXNpZ0lucHV0OiBpc011bHRpc2lnSW5wdXQsCiAgaXNNdWx0aXNpZ091dHB1dDogaXNNdWx0aXNpZ091dHB1dCwKICBpc051bGxEYXRhT3V0cHV0OiBpc051bGxEYXRhT3V0cHV0LAogIGNsYXNzaWZ5T3V0cHV0OiBjbGFzc2lmeU91dHB1dCwKICBjbGFzc2lmeUlucHV0OiBjbGFzc2lmeUlucHV0LAogIHB1YktleU91dHB1dDogcHViS2V5T3V0cHV0LAogIHB1YktleUhhc2hPdXRwdXQ6IHB1YktleUhhc2hPdXRwdXQsCiAgc2NyaXB0SGFzaE91dHB1dDogc2NyaXB0SGFzaE91dHB1dCwKICBtdWx0aXNpZ091dHB1dDogbXVsdGlzaWdPdXRwdXQsCiAgcHViS2V5SW5wdXQ6IHB1YktleUlucHV0LAogIHB1YktleUhhc2hJbnB1dDogcHViS2V5SGFzaElucHV0LAogIHNjcmlwdEhhc2hJbnB1dDogc2NyaXB0SGFzaElucHV0LAogIG11bHRpc2lnSW5wdXQ6IG11bHRpc2lnSW5wdXQsCiAgbnVsbERhdGFPdXRwdXQ6IG51bGxEYXRhT3V0cHV0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2J1ZmZlcnV0aWxzIjo0ODYsIi4vb3Bjb2RlcyI6NDk1LCIuL3NjcmlwdF9udW1iZXIiOjQ5NywiLi90eXBlcyI6NTAwLCJiaXA2NiI6NDUzLCJidWZmZXIiOjUwNCwidHlwZWZvcmNlIjo0ODF9XSw0OTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CmZ1bmN0aW9uIGRlY29kZSAoYnVmZmVyLCBtYXhMZW5ndGgsIG1pbmltYWwpIHsKICBtYXhMZW5ndGggPSBtYXhMZW5ndGggfHwgNAogIG1pbmltYWwgPSBtaW5pbWFsID09PSB1bmRlZmluZWQgPyB0cnVlIDogbWluaW1hbAoKICB2YXIgbGVuZ3RoID0gYnVmZmVyLmxlbmd0aAogIGlmIChsZW5ndGggPT09IDApIHJldHVybiAwCiAgaWYgKGxlbmd0aCA+IG1heExlbmd0aCkgdGhyb3cgbmV3IFR5cGVFcnJvcignU2NyaXB0IG51bWJlciBvdmVyZmxvdycpCiAgaWYgKG1pbmltYWwpIHsKICAgIGlmICgoYnVmZmVyW2xlbmd0aCAtIDFdICYgMHg3ZikgPT09IDApIHsKICAgICAgaWYgKGxlbmd0aCA8PSAxIHx8IChidWZmZXJbbGVuZ3RoIC0gMl0gJiAweDgwKSA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdOb24tbWluaW1hbGx5IGVuY29kZWQgc2NyaXB0IG51bWJlcicpCiAgICB9CiAgfQoKICAvLyA0MC1iaXQKICBpZiAobGVuZ3RoID09PSA1KSB7CiAgICB2YXIgYSA9IGJ1ZmZlci5yZWFkVUludDMyTEUoMCkKICAgIHZhciBiID0gYnVmZmVyLnJlYWRVSW50OCg0KQoKICAgIGlmIChiICYgMHg4MCkgcmV0dXJuIC0oKGIgJiB+MHg4MCkgKiAweDEwMDAwMDAwMCArIGEpCiAgICByZXR1cm4gYiAqIDB4MTAwMDAwMDAwICsgYQogIH0KCiAgdmFyIHJlc3VsdCA9IDAKCiAgLy8gMzItYml0IC8gMjQtYml0IC8gMTYtYml0IC8gOC1iaXQKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CiAgICByZXN1bHQgfD0gYnVmZmVyW2ldIDw8ICg4ICogaSkKICB9CgogIGlmIChidWZmZXJbbGVuZ3RoIC0gMV0gJiAweDgwKSByZXR1cm4gLShyZXN1bHQgJiB+KDB4ODAgPDwgKDggKiAobGVuZ3RoIC0gMSkpKSkKICByZXR1cm4gcmVzdWx0Cn0KCmZ1bmN0aW9uIHNjcmlwdE51bVNpemUgKGkpIHsKICByZXR1cm4gaSA+IDB4N2ZmZmZmZmYgPyA1CiAgOiBpID4gMHg3ZmZmZmYgPyA0CiAgOiBpID4gMHg3ZmZmID8gMwogIDogaSA+IDB4N2YgPyAyCiAgOiBpID4gMHgwMCA/IDEKICA6IDAKfQoKZnVuY3Rpb24gZW5jb2RlIChudW1iZXIpIHsKICB2YXIgdmFsdWUgPSBNYXRoLmFicyhudW1iZXIpCiAgdmFyIHNpemUgPSBzY3JpcHROdW1TaXplKHZhbHVlKQogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKHNpemUpCiAgdmFyIG5lZ2F0aXZlID0gbnVtYmVyIDwgMAoKICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkgewogICAgYnVmZmVyLndyaXRlVUludDgodmFsdWUgJiAweGZmLCBpKQogICAgdmFsdWUgPj49IDgKICB9CgogIGlmIChidWZmZXJbc2l6ZSAtIDFdICYgMHg4MCkgewogICAgYnVmZmVyLndyaXRlVUludDgobmVnYXRpdmUgPyAweDgwIDogMHgwMCwgc2l6ZSAtIDEpCiAgfSBlbHNlIGlmIChuZWdhdGl2ZSkgewogICAgYnVmZmVyW3NpemUgLSAxXSB8PSAweDgwCiAgfQoKICByZXR1cm4gYnVmZmVyCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGRlY29kZTogZGVjb2RlLAogIGVuY29kZTogZW5jb2RlCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjUwNH1dLDQ5ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBic2NyaXB0ID0gcmVxdWlyZSgnLi9zY3JpcHQnKQp2YXIgYnVmZmVydXRpbHMgPSByZXF1aXJlKCcuL2J1ZmZlcnV0aWxzJykKdmFyIG9wY29kZXMgPSByZXF1aXJlKCcuL29wY29kZXMnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCgpmdW5jdGlvbiBUcmFuc2FjdGlvbiAoKSB7CiAgdGhpcy52ZXJzaW9uID0gMQogIHRoaXMubG9ja3RpbWUgPSAwCiAgdGhpcy5pbnMgPSBbXQogIHRoaXMub3V0cyA9IFtdCn0KClRyYW5zYWN0aW9uLkRFRkFVTFRfU0VRVUVOQ0UgPSAweGZmZmZmZmZmClRyYW5zYWN0aW9uLlNJR0hBU0hfQUxMID0gMHgwMQpUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkUgPSAweDAyClRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFID0gMHgwMwpUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWSA9IDB4ODAKClRyYW5zYWN0aW9uLmZyb21CdWZmZXIgPSBmdW5jdGlvbiAoYnVmZmVyLCBfX25vU3RyaWN0KSB7CiAgdmFyIG9mZnNldCA9IDAKICBmdW5jdGlvbiByZWFkU2xpY2UgKG4pIHsKICAgIG9mZnNldCArPSBuCiAgICByZXR1cm4gYnVmZmVyLnNsaWNlKG9mZnNldCAtIG4sIG9mZnNldCkKICB9CgogIGZ1bmN0aW9uIHJlYWRVSW50MzIgKCkgewogICAgdmFyIGkgPSBidWZmZXIucmVhZFVJbnQzMkxFKG9mZnNldCkKICAgIG9mZnNldCArPSA0CiAgICByZXR1cm4gaQogIH0KCiAgZnVuY3Rpb24gcmVhZFVJbnQ2NCAoKSB7CiAgICB2YXIgaSA9IGJ1ZmZlcnV0aWxzLnJlYWRVSW50NjRMRShidWZmZXIsIG9mZnNldCkKICAgIG9mZnNldCArPSA4CiAgICByZXR1cm4gaQogIH0KCiAgZnVuY3Rpb24gcmVhZFZhckludCAoKSB7CiAgICB2YXIgdmkgPSBidWZmZXJ1dGlscy5yZWFkVmFySW50KGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IHZpLnNpemUKICAgIHJldHVybiB2aS5udW1iZXIKICB9CgogIGZ1bmN0aW9uIHJlYWRTY3JpcHQgKCkgewogICAgcmV0dXJuIHJlYWRTbGljZShyZWFkVmFySW50KCkpCiAgfQoKICB2YXIgdHggPSBuZXcgVHJhbnNhY3Rpb24oKQogIHR4LnZlcnNpb24gPSByZWFkVUludDMyKCkKCiAgdmFyIHZpbkxlbiA9IHJlYWRWYXJJbnQoKQogIGZvciAodmFyIGkgPSAwOyBpIDwgdmluTGVuOyArK2kpIHsKICAgIHR4Lmlucy5wdXNoKHsKICAgICAgaGFzaDogcmVhZFNsaWNlKDMyKSwKICAgICAgaW5kZXg6IHJlYWRVSW50MzIoKSwKICAgICAgc2NyaXB0OiByZWFkU2NyaXB0KCksCiAgICAgIHNlcXVlbmNlOiByZWFkVUludDMyKCkKICAgIH0pCiAgfQoKICB2YXIgdm91dExlbiA9IHJlYWRWYXJJbnQoKQogIGZvciAoaSA9IDA7IGkgPCB2b3V0TGVuOyArK2kpIHsKICAgIHR4Lm91dHMucHVzaCh7CiAgICAgIHZhbHVlOiByZWFkVUludDY0KCksCiAgICAgIHNjcmlwdDogcmVhZFNjcmlwdCgpCiAgICB9KQogIH0KCiAgdHgubG9ja3RpbWUgPSByZWFkVUludDMyKCkKCiAgaWYgKF9fbm9TdHJpY3QpIHJldHVybiB0eAogIGlmIChvZmZzZXQgIT09IGJ1ZmZlci5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gaGFzIHVuZXhwZWN0ZWQgZGF0YScpCgogIHJldHVybiB0eAp9CgpUcmFuc2FjdGlvbi5mcm9tSGV4ID0gZnVuY3Rpb24gKGhleCkgewogIHJldHVybiBUcmFuc2FjdGlvbi5mcm9tQnVmZmVyKG5ldyBCdWZmZXIoaGV4LCAnaGV4JykpCn0KClRyYW5zYWN0aW9uLmlzQ29pbmJhc2VIYXNoID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogIHJldHVybiBBcnJheS5wcm90b3R5cGUuZXZlcnkuY2FsbChidWZmZXIsIGZ1bmN0aW9uICh4KSB7CiAgICByZXR1cm4geCA9PT0gMAogIH0pCn0KCnZhciBFTVBUWV9TQ1JJUFQgPSBuZXcgQnVmZmVyKDApCgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuYWRkSW5wdXQgPSBmdW5jdGlvbiAoaGFzaCwgaW5kZXgsIHNlcXVlbmNlLCBzY3JpcHRTaWcpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUoCiAgICB0eXBlcy5IYXNoMjU2Yml0LAogICAgdHlwZXMuVUludDMyLAogICAgdHlwZXMubWF5YmUodHlwZXMuVUludDMyKSwKICAgIHR5cGVzLm1heWJlKHR5cGVzLkJ1ZmZlcikKICApLCBhcmd1bWVudHMpCgogIGlmICh0eXBlcy5OdWxsKHNlcXVlbmNlKSkgewogICAgc2VxdWVuY2UgPSBUcmFuc2FjdGlvbi5ERUZBVUxUX1NFUVVFTkNFCiAgfQoKICAvLyBBZGQgdGhlIGlucHV0IGFuZCByZXR1cm4gdGhlIGlucHV0J3MgaW5kZXgKICByZXR1cm4gKHRoaXMuaW5zLnB1c2goewogICAgaGFzaDogaGFzaCwKICAgIGluZGV4OiBpbmRleCwKICAgIHNjcmlwdDogc2NyaXB0U2lnIHx8IEVNUFRZX1NDUklQVCwKICAgIHNlcXVlbmNlOiBzZXF1ZW5jZQogIH0pIC0gMSkKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLmFkZE91dHB1dCA9IGZ1bmN0aW9uIChzY3JpcHRQdWJLZXksIHZhbHVlKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkJ1ZmZlciwgdHlwZXMuVUludDUzKSwgYXJndW1lbnRzKQoKICAvLyBBZGQgdGhlIG91dHB1dCBhbmQgcmV0dXJuIHRoZSBvdXRwdXQncyBpbmRleAogIHJldHVybiAodGhpcy5vdXRzLnB1c2goewogICAgc2NyaXB0OiBzY3JpcHRQdWJLZXksCiAgICB2YWx1ZTogdmFsdWUKICB9KSAtIDEpCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS5ieXRlTGVuZ3RoID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIHNjcmlwdFNpemUgKHNvbWVTY3JpcHQpIHsKICAgIHZhciBsZW5ndGggPSBzb21lU2NyaXB0Lmxlbmd0aAoKICAgIHJldHVybiBidWZmZXJ1dGlscy52YXJJbnRTaXplKGxlbmd0aCkgKyBsZW5ndGgKICB9CgogIHJldHVybiAoCiAgICA4ICsKICAgIGJ1ZmZlcnV0aWxzLnZhckludFNpemUodGhpcy5pbnMubGVuZ3RoKSArCiAgICBidWZmZXJ1dGlscy52YXJJbnRTaXplKHRoaXMub3V0cy5sZW5ndGgpICsKICAgIHRoaXMuaW5zLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBpbnB1dCkgeyByZXR1cm4gc3VtICsgNDAgKyBzY3JpcHRTaXplKGlucHV0LnNjcmlwdCkgfSwgMCkgKwogICAgdGhpcy5vdXRzLnJlZHVjZShmdW5jdGlvbiAoc3VtLCBvdXRwdXQpIHsgcmV0dXJuIHN1bSArIDggKyBzY3JpcHRTaXplKG91dHB1dC5zY3JpcHQpIH0sIDApCiAgKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIG5ld1R4ID0gbmV3IFRyYW5zYWN0aW9uKCkKICBuZXdUeC52ZXJzaW9uID0gdGhpcy52ZXJzaW9uCiAgbmV3VHgubG9ja3RpbWUgPSB0aGlzLmxvY2t0aW1lCgogIG5ld1R4LmlucyA9IHRoaXMuaW5zLm1hcChmdW5jdGlvbiAodHhJbikgewogICAgcmV0dXJuIHsKICAgICAgaGFzaDogdHhJbi5oYXNoLAogICAgICBpbmRleDogdHhJbi5pbmRleCwKICAgICAgc2NyaXB0OiB0eEluLnNjcmlwdCwKICAgICAgc2VxdWVuY2U6IHR4SW4uc2VxdWVuY2UKICAgIH0KICB9KQoKICBuZXdUeC5vdXRzID0gdGhpcy5vdXRzLm1hcChmdW5jdGlvbiAodHhPdXQpIHsKICAgIHJldHVybiB7CiAgICAgIHNjcmlwdDogdHhPdXQuc2NyaXB0LAogICAgICB2YWx1ZTogdHhPdXQudmFsdWUKICAgIH0KICB9KQoKICByZXR1cm4gbmV3VHgKfQoKdmFyIE9ORSA9IG5ldyBCdWZmZXIoJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEnLCAnaGV4JykKdmFyIFZBTFVFX1VJTlQ2NF9NQVggPSBuZXcgQnVmZmVyKCdmZmZmZmZmZmZmZmZmZmZmJywgJ2hleCcpCgovKioKICogSGFzaCB0cmFuc2FjdGlvbiBmb3Igc2lnbmluZyBhIHNwZWNpZmljIGlucHV0LgogKgogKiBCaXRjb2luIHVzZXMgYSBkaWZmZXJlbnQgaGFzaCBmb3IgZWFjaCBzaWduZWQgdHJhbnNhY3Rpb24gaW5wdXQuCiAqIFRoaXMgbWV0aG9kIGNvcGllcyB0aGUgdHJhbnNhY3Rpb24sIG1ha2VzIHRoZSBuZWNlc3NhcnkgY2hhbmdlcyBiYXNlZCBvbiB0aGUKICogaGFzaFR5cGUsIGFuZCB0aGVuIGhhc2hlcyB0aGUgcmVzdWx0LgogKiBUaGlzIGhhc2ggY2FuIHRoZW4gYmUgdXNlZCB0byBzaWduIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbiBpbnB1dC4KICovClRyYW5zYWN0aW9uLnByb3RvdHlwZS5oYXNoRm9yU2lnbmF0dXJlID0gZnVuY3Rpb24gKGluSW5kZXgsIHByZXZPdXRTY3JpcHQsIGhhc2hUeXBlKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLlVJbnQzMiwgdHlwZXMuQnVmZmVyLCAvKiB0eXBlcy5VSW50OCAqLyB0eXBlcy5OdW1iZXIpLCBhcmd1bWVudHMpCgogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpdGNvaW4vYmxvYi9tYXN0ZXIvc3JjL3Rlc3Qvc2lnaGFzaF90ZXN0cy5jcHAjTDI5CiAgaWYgKGluSW5kZXggPj0gdGhpcy5pbnMubGVuZ3RoKSByZXR1cm4gT05FCgogIHZhciB0eFRtcCA9IHRoaXMuY2xvbmUoKQoKICAvLyBpbiBjYXNlIGNvbmNhdGVuYXRpbmcgdHdvIHNjcmlwdHMgZW5kcyB1cCB3aXRoIHR3byBjb2Rlc2VwYXJhdG9ycywKICAvLyBvciBhbiBleHRyYSBvbmUgYXQgdGhlIGVuZCwgdGhpcyBwcmV2ZW50cyBhbGwgdGhvc2UgcG9zc2libGUgaW5jb21wYXRpYmlsaXRpZXMuCiAgdmFyIGhhc2hTY3JpcHQgPSBic2NyaXB0LmNvbXBpbGUoYnNjcmlwdC5kZWNvbXBpbGUocHJldk91dFNjcmlwdCkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICByZXR1cm4geCAhPT0gb3Bjb2Rlcy5PUF9DT0RFU0VQQVJBVE9SCiAgfSkpCiAgdmFyIGkKCiAgLy8gYmxhbmsgb3V0IG90aGVyIGlucHV0cycgc2lnbmF0dXJlcwogIHR4VG1wLmlucy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCkgeyBpbnB1dC5zY3JpcHQgPSBFTVBUWV9TQ1JJUFQgfSkKICB0eFRtcC5pbnNbaW5JbmRleF0uc2NyaXB0ID0gaGFzaFNjcmlwdAoKICAvLyBibGFuayBvdXQgc29tZSBvZiB0aGUgaW5wdXRzCiAgaWYgKChoYXNoVHlwZSAmIDB4MWYpID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkUpIHsKICAgIC8vIHdpbGRjYXJkIHBheWVlCiAgICB0eFRtcC5vdXRzID0gW10KCiAgICAvLyBsZXQgdGhlIG90aGVycyB1cGRhdGUgYXQgd2lsbAogICAgdHhUbXAuaW5zLmZvckVhY2goZnVuY3Rpb24gKGlucHV0LCBpKSB7CiAgICAgIGlmIChpICE9PSBpbkluZGV4KSB7CiAgICAgICAgaW5wdXQuc2VxdWVuY2UgPSAwCiAgICAgIH0KICAgIH0pCiAgfSBlbHNlIGlmICgoaGFzaFR5cGUgJiAweDFmKSA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUpIHsKICAgIHZhciBuT3V0ID0gaW5JbmRleAoKICAgIC8vIG9ubHkgbG9jay1pbiB0aGUgdHhPdXQgcGF5ZWUgYXQgc2FtZSBpbmRleCBhcyB0eEluCiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXRjb2luL2Jsb2IvbWFzdGVyL3NyYy90ZXN0L3NpZ2hhc2hfdGVzdHMuY3BwI0w2MAogICAgaWYgKG5PdXQgPj0gdGhpcy5vdXRzLmxlbmd0aCkgcmV0dXJuIE9ORQoKICAgIHR4VG1wLm91dHMgPSB0eFRtcC5vdXRzLnNsaWNlKDAsIG5PdXQgKyAxKQoKICAgIC8vIGJsYW5rIGFsbCBvdGhlciBvdXRwdXRzIChjbGVhciBzY3JpcHRQdWJLZXksIHZhbHVlID09PSAtMSkKICAgIHZhciBzdHViT3V0ID0gewogICAgICBzY3JpcHQ6IEVNUFRZX1NDUklQVCwKICAgICAgdmFsdWVCdWZmZXI6IFZBTFVFX1VJTlQ2NF9NQVgKICAgIH0KCiAgICBmb3IgKGkgPSAwOyBpIDwgbk91dDsgaSsrKSB7CiAgICAgIHR4VG1wLm91dHNbaV0gPSBzdHViT3V0CiAgICB9CgogICAgLy8gbGV0IHRoZSBvdGhlcnMgdXBkYXRlIGF0IHdpbGwKICAgIHR4VG1wLmlucy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCwgaSkgewogICAgICBpZiAoaSAhPT0gaW5JbmRleCkgewogICAgICAgIGlucHV0LnNlcXVlbmNlID0gMAogICAgICB9CiAgICB9KQogIH0KCiAgLy8gYmxhbmsgb3V0IG90aGVyIGlucHV0cyBjb21wbGV0ZWx5LCBub3QgcmVjb21tZW5kZWQgZm9yIG9wZW4gdHJhbnNhY3Rpb25zCiAgaWYgKGhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9BTllPTkVDQU5QQVkpIHsKICAgIHR4VG1wLmluc1swXSA9IHR4VG1wLmluc1tpbkluZGV4XQogICAgdHhUbXAuaW5zID0gdHhUbXAuaW5zLnNsaWNlKDAsIDEpCiAgfQoKICAvLyBzZXJpYWxpemUgYW5kIGhhc2gKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcih0eFRtcC5ieXRlTGVuZ3RoKCkgKyA0KQogIGJ1ZmZlci53cml0ZUludDMyTEUoaGFzaFR5cGUsIGJ1ZmZlci5sZW5ndGggLSA0KQogIHR4VG1wLnRvQnVmZmVyKCkuY29weShidWZmZXIsIDApCgogIHJldHVybiBiY3J5cHRvLmhhc2gyNTYoYnVmZmVyKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuZ2V0SGFzaCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KHRoaXMudG9CdWZmZXIoKSkKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLmdldElkID0gZnVuY3Rpb24gKCkgewogIC8vIHRyYW5zYWN0aW9uIGhhc2gncyBhcmUgZGlzcGxheWVkIGluIHJldmVyc2Ugb3JkZXIKICByZXR1cm4gW10ucmV2ZXJzZS5jYWxsKHRoaXMuZ2V0SGFzaCgpKS50b1N0cmluZygnaGV4JykKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRvQnVmZmVyID0gZnVuY3Rpb24gKCkgewogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKHRoaXMuYnl0ZUxlbmd0aCgpKQoKICB2YXIgb2Zmc2V0ID0gMAogIGZ1bmN0aW9uIHdyaXRlU2xpY2UgKHNsaWNlKSB7CiAgICBzbGljZS5jb3B5KGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IHNsaWNlLmxlbmd0aAogIH0KCiAgZnVuY3Rpb24gd3JpdGVVSW50MzIgKGkpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQzMkxFKGksIG9mZnNldCkKICAgIG9mZnNldCArPSA0CiAgfQoKICBmdW5jdGlvbiB3cml0ZVVJbnQ2NCAoaSkgewogICAgYnVmZmVydXRpbHMud3JpdGVVSW50NjRMRShidWZmZXIsIGksIG9mZnNldCkKICAgIG9mZnNldCArPSA4CiAgfQoKICBmdW5jdGlvbiB3cml0ZVZhckludCAoaSkgewogICAgdmFyIG4gPSBidWZmZXJ1dGlscy53cml0ZVZhckludChidWZmZXIsIGksIG9mZnNldCkKICAgIG9mZnNldCArPSBuCiAgfQoKICB3cml0ZVVJbnQzMih0aGlzLnZlcnNpb24pCiAgd3JpdGVWYXJJbnQodGhpcy5pbnMubGVuZ3RoKQoKICB0aGlzLmlucy5mb3JFYWNoKGZ1bmN0aW9uICh0eEluKSB7CiAgICB3cml0ZVNsaWNlKHR4SW4uaGFzaCkKICAgIHdyaXRlVUludDMyKHR4SW4uaW5kZXgpCiAgICB3cml0ZVZhckludCh0eEluLnNjcmlwdC5sZW5ndGgpCiAgICB3cml0ZVNsaWNlKHR4SW4uc2NyaXB0KQogICAgd3JpdGVVSW50MzIodHhJbi5zZXF1ZW5jZSkKICB9KQoKICB3cml0ZVZhckludCh0aGlzLm91dHMubGVuZ3RoKQogIHRoaXMub3V0cy5mb3JFYWNoKGZ1bmN0aW9uICh0eE91dCkgewogICAgaWYgKCF0eE91dC52YWx1ZUJ1ZmZlcikgewogICAgICB3cml0ZVVJbnQ2NCh0eE91dC52YWx1ZSkKICAgIH0gZWxzZSB7CiAgICAgIHdyaXRlU2xpY2UodHhPdXQudmFsdWVCdWZmZXIpCiAgICB9CgogICAgd3JpdGVWYXJJbnQodHhPdXQuc2NyaXB0Lmxlbmd0aCkKICAgIHdyaXRlU2xpY2UodHhPdXQuc2NyaXB0KQogIH0pCgogIHdyaXRlVUludDMyKHRoaXMubG9ja3RpbWUpCgogIHJldHVybiBidWZmZXIKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLnRvQnVmZmVyKCkudG9TdHJpbmcoJ2hleCcpCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZXRJbnB1dFNjcmlwdCA9IGZ1bmN0aW9uIChpbmRleCwgc2NyaXB0U2lnKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLk51bWJlciwgdHlwZXMuQnVmZmVyKSwgYXJndW1lbnRzKQoKICB0aGlzLmluc1tpbmRleF0uc2NyaXB0ID0gc2NyaXB0U2lnCn0KCm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb24KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2J1ZmZlcnV0aWxzIjo0ODYsIi4vY3J5cHRvIjo0ODcsIi4vb3Bjb2RlcyI6NDk1LCIuL3NjcmlwdCI6NDk2LCIuL3R5cGVzIjo1MDAsImJ1ZmZlciI6NTA0LCJ0eXBlZm9yY2UiOjQ4MX1dLDQ5OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJhZGRyZXNzID0gcmVxdWlyZSgnLi9hZGRyZXNzJykKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBic2NyaXB0ID0gcmVxdWlyZSgnLi9zY3JpcHQnKQp2YXIgYnVmZmVyRXF1YWxzID0gcmVxdWlyZSgnYnVmZmVyLWVxdWFscycpCnZhciBuZXR3b3JrcyA9IHJlcXVpcmUoJy4vbmV0d29ya3MnKQp2YXIgb3BzID0gcmVxdWlyZSgnLi9vcGNvZGVzJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKdmFyIEVDUGFpciA9IHJlcXVpcmUoJy4vZWNwYWlyJykKdmFyIEVDU2lnbmF0dXJlID0gcmVxdWlyZSgnLi9lY3NpZ25hdHVyZScpCnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24nKQoKLy8gcmUtb3JkZXJzIHNpZ25hdHVyZXMgdG8gbWF0Y2ggcHViS2V5cywgZmlsbHMgdW5kZWZpbmVkIG90aGVyd2lzZQpmdW5jdGlvbiBmaXhNU1NpZ25hdHVyZXMgKHRyYW5zYWN0aW9uLCB2aW4sIHB1YktleXMsIHNpZ25hdHVyZXMsIHByZXZPdXRTY3JpcHQsIGhhc2hUeXBlLCBza2lwUHViS2V5KSB7CiAgLy8gbWFpbnRhaW4gYSBsb2NhbCBjb3B5IG9mIHVubWF0Y2hlZCBzaWduYXR1cmVzCiAgdmFyIHVubWF0Y2hlZCA9IHNpZ25hdHVyZXMuc2xpY2UoKQogIHZhciBjYWNoZSA9IHt9CgogIHJldHVybiBwdWJLZXlzLm1hcChmdW5jdGlvbiAocHViS2V5KSB7CiAgICAvLyBza2lwIG9wdGlvbmFsbHkgcHJvdmlkZWQgcHViS2V5CiAgICBpZiAoc2tpcFB1YktleSAmJiBidWZmZXJFcXVhbHMoc2tpcFB1YktleSwgcHViS2V5KSkgcmV0dXJuIHVuZGVmaW5lZAoKICAgIHZhciBtYXRjaGVkCiAgICB2YXIga2V5UGFpcjIgPSBFQ1BhaXIuZnJvbVB1YmxpY0tleUJ1ZmZlcihwdWJLZXkpCgogICAgLy8gY2hlY2sgZm9yIGEgbWF0Y2hpbmcgc2lnbmF0dXJlCiAgICB1bm1hdGNoZWQuc29tZShmdW5jdGlvbiAoc2lnbmF0dXJlLCBpKSB7CiAgICAgIC8vIHNraXAgaWYgdW5kZWZpbmVkIHx8IE9QXzAKICAgICAgaWYgKCFzaWduYXR1cmUpIHJldHVybiBmYWxzZQoKICAgICAgdmFyIHNpZ25hdHVyZUhhc2ggPSBjYWNoZVtoYXNoVHlwZV0gPSBjYWNoZVtoYXNoVHlwZV0gfHwgdHJhbnNhY3Rpb24uaGFzaEZvclNpZ25hdHVyZSh2aW4sIHByZXZPdXRTY3JpcHQsIGhhc2hUeXBlKQogICAgICBpZiAoIWtleVBhaXIyLnZlcmlmeShzaWduYXR1cmVIYXNoLCBzaWduYXR1cmUpKSByZXR1cm4gZmFsc2UKCiAgICAgIC8vIHJlbW92ZSBtYXRjaGVkIHNpZ25hdHVyZSBmcm9tIHVubWF0Y2hlZAogICAgICB1bm1hdGNoZWRbaV0gPSB1bmRlZmluZWQKICAgICAgbWF0Y2hlZCA9IHNpZ25hdHVyZQoKICAgICAgcmV0dXJuIHRydWUKICAgIH0pCgogICAgcmV0dXJuIG1hdGNoZWQgfHwgdW5kZWZpbmVkCiAgfSkKfQoKZnVuY3Rpb24gZXh0cmFjdElucHV0ICh0cmFuc2FjdGlvbiwgdHhJbiwgdmluKSB7CiAgdmFyIHJlZGVlbVNjcmlwdAogIHZhciBzY3JpcHRTaWcgPSB0eEluLnNjcmlwdAogIHZhciBzY3JpcHRTaWdDaHVua3MgPSBic2NyaXB0LmRlY29tcGlsZShzY3JpcHRTaWcpCgogIHZhciBwcmV2T3V0U2NyaXB0CiAgdmFyIHByZXZPdXRUeXBlID0gYnNjcmlwdC5jbGFzc2lmeUlucHV0KHNjcmlwdFNpZywgdHJ1ZSkKICB2YXIgc2NyaXB0VHlwZQoKICAvLyBSZS1jbGFzc2lmeSBpZiBzY3JpcHRIYXNoCiAgaWYgKHByZXZPdXRUeXBlID09PSAnc2NyaXB0aGFzaCcpIHsKICAgIHJlZGVlbVNjcmlwdCA9IHNjcmlwdFNpZ0NodW5rcy5zbGljZSgtMSlbMF0KICAgIHByZXZPdXRTY3JpcHQgPSBic2NyaXB0LnNjcmlwdEhhc2hPdXRwdXQoYmNyeXB0by5oYXNoMTYwKHJlZGVlbVNjcmlwdCkpCgogICAgc2NyaXB0U2lnID0gYnNjcmlwdC5jb21waWxlKHNjcmlwdFNpZ0NodW5rcy5zbGljZSgwLCAtMSkpCiAgICBzY3JpcHRTaWdDaHVua3MgPSBzY3JpcHRTaWdDaHVua3Muc2xpY2UoMCwgLTEpCgogICAgc2NyaXB0VHlwZSA9IGJzY3JpcHQuY2xhc3NpZnlJbnB1dChzY3JpcHRTaWcsIHRydWUpCiAgfSBlbHNlIHsKICAgIHNjcmlwdFR5cGUgPSBwcmV2T3V0VHlwZQogIH0KCiAgLy8gcHJlLWVtcHQgcmVkZWVtU2NyaXB0IGRlY29tcGlsYXRpb24KICB2YXIgcmVkZWVtU2NyaXB0Q2h1bmtzCiAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgcmVkZWVtU2NyaXB0Q2h1bmtzID0gYnNjcmlwdC5kZWNvbXBpbGUocmVkZWVtU2NyaXB0KQogIH0KCiAgLy8gRXh0cmFjdCBoYXNoVHlwZSwgcHViS2V5cyBhbmQgc2lnbmF0dXJlcwogIHZhciBoYXNoVHlwZSwgcGFyc2VkLCBwdWJLZXlzLCBzaWduYXR1cmVzCgogIHN3aXRjaCAoc2NyaXB0VHlwZSkgewogICAgY2FzZSAncHVia2V5aGFzaCc6CiAgICAgIHBhcnNlZCA9IEVDU2lnbmF0dXJlLnBhcnNlU2NyaXB0U2lnbmF0dXJlKHNjcmlwdFNpZ0NodW5rc1swXSkKICAgICAgaGFzaFR5cGUgPSBwYXJzZWQuaGFzaFR5cGUKICAgICAgcHViS2V5cyA9IHNjcmlwdFNpZ0NodW5rcy5zbGljZSgxKQogICAgICBzaWduYXR1cmVzID0gW3BhcnNlZC5zaWduYXR1cmVdCiAgICAgIHByZXZPdXRTY3JpcHQgPSBic2NyaXB0LnB1YktleUhhc2hPdXRwdXQoYmNyeXB0by5oYXNoMTYwKHB1YktleXNbMF0pKQoKICAgICAgYnJlYWsKCiAgICBjYXNlICdwdWJrZXknOgogICAgICBwYXJzZWQgPSBFQ1NpZ25hdHVyZS5wYXJzZVNjcmlwdFNpZ25hdHVyZShzY3JpcHRTaWdDaHVua3NbMF0pCiAgICAgIGhhc2hUeXBlID0gcGFyc2VkLmhhc2hUeXBlCiAgICAgIHNpZ25hdHVyZXMgPSBbcGFyc2VkLnNpZ25hdHVyZV0KCiAgICAgIGlmIChyZWRlZW1TY3JpcHQpIHsKICAgICAgICBwdWJLZXlzID0gcmVkZWVtU2NyaXB0Q2h1bmtzLnNsaWNlKDAsIDEpCiAgICAgIH0KCiAgICAgIGJyZWFrCgogICAgY2FzZSAnbXVsdGlzaWcnOgogICAgICBzaWduYXR1cmVzID0gc2NyaXB0U2lnQ2h1bmtzLnNsaWNlKDEpLm1hcChmdW5jdGlvbiAoY2h1bmspIHsKICAgICAgICBpZiAoY2h1bmsgPT09IG9wcy5PUF8wKSByZXR1cm4gdW5kZWZpbmVkCgogICAgICAgIHZhciBwYXJzZWQgPSBFQ1NpZ25hdHVyZS5wYXJzZVNjcmlwdFNpZ25hdHVyZShjaHVuaykKICAgICAgICBoYXNoVHlwZSA9IHBhcnNlZC5oYXNoVHlwZQoKICAgICAgICByZXR1cm4gcGFyc2VkLnNpZ25hdHVyZQogICAgICB9KQoKICAgICAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgICAgIHB1YktleXMgPSByZWRlZW1TY3JpcHRDaHVua3Muc2xpY2UoMSwgLTIpCgogICAgICAgIGlmIChwdWJLZXlzLmxlbmd0aCAhPT0gc2lnbmF0dXJlcy5sZW5ndGgpIHsKICAgICAgICAgIHNpZ25hdHVyZXMgPSBmaXhNU1NpZ25hdHVyZXModHJhbnNhY3Rpb24sIHZpbiwgcHViS2V5cywgc2lnbmF0dXJlcywgcmVkZWVtU2NyaXB0LCBoYXNoVHlwZSwgcmVkZWVtU2NyaXB0KQogICAgICAgIH0KICAgICAgfQoKICAgICAgYnJlYWsKICB9CgogIHJldHVybiB7CiAgICBoYXNoVHlwZTogaGFzaFR5cGUsCiAgICBwcmV2T3V0U2NyaXB0OiBwcmV2T3V0U2NyaXB0LAogICAgcHJldk91dFR5cGU6IHByZXZPdXRUeXBlLAogICAgcHViS2V5czogcHViS2V5cywKICAgIHJlZGVlbVNjcmlwdDogcmVkZWVtU2NyaXB0LAogICAgc2NyaXB0VHlwZTogc2NyaXB0VHlwZSwKICAgIHNpZ25hdHVyZXM6IHNpZ25hdHVyZXMKICB9Cn0KCmZ1bmN0aW9uIFRyYW5zYWN0aW9uQnVpbGRlciAobmV0d29yaykgewogIHRoaXMucHJldlR4TWFwID0ge30KICB0aGlzLnByZXZPdXRTY3JpcHRzID0ge30KICB0aGlzLnByZXZPdXRUeXBlcyA9IHt9CiAgdGhpcy5uZXR3b3JrID0gbmV0d29yayB8fCBuZXR3b3Jrcy5iaXRjb2luCgogIHRoaXMuaW5wdXRzID0gW10KICB0aGlzLnR4ID0gbmV3IFRyYW5zYWN0aW9uKCkKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5zZXRMb2NrVGltZSA9IGZ1bmN0aW9uIChsb2NrdGltZSkgewogIHR5cGVmb3JjZSh0eXBlcy5VSW50MzIsIGxvY2t0aW1lKQoKICAvLyBpZiBhbnkgc2lnbmF0dXJlcyBleGlzdCwgdGhyb3cKICBpZiAodGhpcy5pbnB1dHMuc29tZShmdW5jdGlvbiAoaW5wdXQpIHsKICAgIGlmICghaW5wdXQuc2lnbmF0dXJlcykgcmV0dXJuIGZhbHNlCgogICAgcmV0dXJuIGlucHV0LnNpZ25hdHVyZXMuc29tZShmdW5jdGlvbiAocykgeyByZXR1cm4gcyB9KQogIH0pKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vLCB0aGlzIHdvdWxkIGludmFsaWRhdGUgc2lnbmF0dXJlcycpCiAgfQoKICB0aGlzLnR4LmxvY2t0aW1lID0gbG9ja3RpbWUKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLmZyb21UcmFuc2FjdGlvbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgbmV0d29yaykgewogIHZhciB0eGIgPSBuZXcgVHJhbnNhY3Rpb25CdWlsZGVyKG5ldHdvcmspCgogIC8vIENvcHkgb3RoZXIgdHJhbnNhY3Rpb24gZmllbGRzCiAgdHhiLnR4LnZlcnNpb24gPSB0cmFuc2FjdGlvbi52ZXJzaW9uCiAgdHhiLnR4LmxvY2t0aW1lID0gdHJhbnNhY3Rpb24ubG9ja3RpbWUKCiAgLy8gRXh0cmFjdC9hZGQgaW5wdXRzCiAgdHJhbnNhY3Rpb24uaW5zLmZvckVhY2goZnVuY3Rpb24gKHR4SW4pIHsKICAgIHR4Yi5hZGRJbnB1dCh0eEluLmhhc2gsIHR4SW4uaW5kZXgsIHR4SW4uc2VxdWVuY2UpCiAgfSkKCiAgLy8gRXh0cmFjdC9hZGQgb3V0cHV0cwogIHRyYW5zYWN0aW9uLm91dHMuZm9yRWFjaChmdW5jdGlvbiAodHhPdXQpIHsKICAgIHR4Yi5hZGRPdXRwdXQodHhPdXQuc2NyaXB0LCB0eE91dC52YWx1ZSkKICB9KQoKICAvLyBFeHRyYWN0L2FkZCBzaWduYXR1cmVzCiAgdHhiLmlucHV0cyA9IHRyYW5zYWN0aW9uLmlucy5tYXAoZnVuY3Rpb24gKHR4SW4sIHZpbikgewogICAgLy8gVE9ETzogdmVyaWZ5IHdoZXRoZXIgZXh0cmFjdElucHV0IGlzIHNhbmUgd2l0aCBjb2luYmFzZSBzY3JpcHRzCiAgICBpZiAoVHJhbnNhY3Rpb24uaXNDb2luYmFzZUhhc2godHhJbi5oYXNoKSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvaW5iYXNlIGlucHV0cyBub3Qgc3VwcG9ydGVkJykKICAgIH0KCiAgICAvLyBJZ25vcmUgZW1wdHkgc2NyaXB0cwogICAgaWYgKHR4SW4uc2NyaXB0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIHt9CgogICAgcmV0dXJuIGV4dHJhY3RJbnB1dCh0cmFuc2FjdGlvbiwgdHhJbiwgdmluKQogIH0pCgogIHJldHVybiB0eGIKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5hZGRJbnB1dCA9IGZ1bmN0aW9uICh0eEhhc2gsIHZvdXQsIHNlcXVlbmNlLCBwcmV2T3V0U2NyaXB0KSB7CiAgLy8gaXMgaXQgYSBoZXggc3RyaW5nPwogIGlmICh0eXBlb2YgdHhIYXNoID09PSAnc3RyaW5nJykgewogICAgLy8gdHJhbnNhY3Rpb24gaGFzaHMncyBhcmUgZGlzcGxheWVkIGluIHJldmVyc2Ugb3JkZXIsIHVuLXJldmVyc2UgaXQKICAgIHR4SGFzaCA9IFtdLnJldmVyc2UuY2FsbChuZXcgQnVmZmVyKHR4SGFzaCwgJ2hleCcpKQoKICAvLyBpcyBpdCBhIFRyYW5zYWN0aW9uIG9iamVjdD8KICB9IGVsc2UgaWYgKHR4SGFzaCBpbnN0YW5jZW9mIFRyYW5zYWN0aW9uKSB7CiAgICBwcmV2T3V0U2NyaXB0ID0gdHhIYXNoLm91dHNbdm91dF0uc2NyaXB0CiAgICB0eEhhc2ggPSB0eEhhc2guZ2V0SGFzaCgpCiAgfQoKICB2YXIgaW5wdXQgPSB7fQogIGlmIChwcmV2T3V0U2NyaXB0KSB7CiAgICB2YXIgcHJldk91dFNjcmlwdENodW5rcyA9IGJzY3JpcHQuZGVjb21waWxlKHByZXZPdXRTY3JpcHQpCiAgICB2YXIgcHJldk91dFR5cGUgPSBic2NyaXB0LmNsYXNzaWZ5T3V0cHV0KHByZXZPdXRTY3JpcHRDaHVua3MpCgogICAgLy8gaWYgd2UgY2FuLCBleHRyYWN0IHB1YktleSBpbmZvcm1hdGlvbgogICAgc3dpdGNoIChwcmV2T3V0VHlwZSkgewogICAgICBjYXNlICdtdWx0aXNpZyc6CiAgICAgICAgaW5wdXQucHViS2V5cyA9IHByZXZPdXRTY3JpcHRDaHVua3Muc2xpY2UoMSwgLTIpCiAgICAgICAgaW5wdXQuc2lnbmF0dXJlcyA9IGlucHV0LnB1YktleXMubWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZCB9KQoKICAgICAgICBicmVhawoKICAgICAgY2FzZSAncHVia2V5JzoKICAgICAgICBpbnB1dC5wdWJLZXlzID0gcHJldk91dFNjcmlwdENodW5rcy5zbGljZSgwLCAxKQogICAgICAgIGlucHV0LnNpZ25hdHVyZXMgPSBbdW5kZWZpbmVkXQoKICAgICAgICBicmVhawogICAgfQoKICAgIGlmIChwcmV2T3V0VHlwZSAhPT0gJ3NjcmlwdGhhc2gnKSB7CiAgICAgIGlucHV0LnNjcmlwdFR5cGUgPSBwcmV2T3V0VHlwZQogICAgfQoKICAgIGlucHV0LnByZXZPdXRTY3JpcHQgPSBwcmV2T3V0U2NyaXB0CiAgICBpbnB1dC5wcmV2T3V0VHlwZSA9IHByZXZPdXRUeXBlCiAgfQoKICAvLyBpZiBzaWduYXR1cmVzIGV4aXN0LCBhZGRpbmcgaW5wdXRzIGlzIG9ubHkgYWNjZXB0YWJsZSBpZiBTSUdIQVNIX0FOWU9ORUNBTlBBWSBpcyB1c2VkCiAgLy8gdGhyb3cgaWYgYW55IHNpZ25hdHVyZXMgKmRpZG4ndCogdXNlIFNJR0hBU0hfQU5ZT05FQ0FOUEFZCiAgaWYgKCF0aGlzLmlucHV0cy5ldmVyeShmdW5jdGlvbiAob3RoZXJJbnB1dCkgewogICAgLy8gbm8gc2lnbmF0dXJlCiAgICBpZiAob3RoZXJJbnB1dC5oYXNoVHlwZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZQoKICAgIHJldHVybiBvdGhlcklucHV0Lmhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9BTllPTkVDQU5QQVkKICB9KSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdObywgdGhpcyB3b3VsZCBpbnZhbGlkYXRlIHNpZ25hdHVyZXMnKQogIH0KCiAgdmFyIHByZXZPdXQgPSB0eEhhc2gudG9TdHJpbmcoJ2hleCcpICsgJzonICsgdm91dAogIGlmICh0aGlzLnByZXZUeE1hcFtwcmV2T3V0XSkgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBpcyBhbHJlYWR5IGFuIGlucHV0JykKCiAgdmFyIHZpbiA9IHRoaXMudHguYWRkSW5wdXQodHhIYXNoLCB2b3V0LCBzZXF1ZW5jZSkKICB0aGlzLmlucHV0c1t2aW5dID0gaW5wdXQKICB0aGlzLnByZXZUeE1hcFtwcmV2T3V0XSA9IHZpbgoKICByZXR1cm4gdmluCn0KClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuYWRkT3V0cHV0ID0gZnVuY3Rpb24gKHNjcmlwdFB1YktleSwgdmFsdWUpIHsKICB2YXIgbk91dHB1dHMgPSB0aGlzLnR4Lm91dHMubGVuZ3RoCgogIC8vIGlmIHNpZ25hdHVyZXMgZXhpc3QsIGFkZGluZyBvdXRwdXRzIGlzIG9ubHkgYWNjZXB0YWJsZSBpZiBTSUdIQVNIX05PTkUgb3IgU0lHSEFTSF9TSU5HTEUgaXMgdXNlZAogIC8vIHRocm93cyBpZiBhbnkgc2lnbmF0dXJlcyBkaWRuJ3QgdXNlIFNJR0hBU0hfTk9ORXxTSUdIQVNIX1NJTkdMRQogIGlmICghdGhpcy5pbnB1dHMuZXZlcnkoZnVuY3Rpb24gKGlucHV0LCBpbmRleCkgewogICAgLy8gbm8gc2lnbmF0dXJlCiAgICBpZiAoaW5wdXQuaGFzaFR5cGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWUKCiAgICB2YXIgaGFzaFR5cGVNb2QgPSBpbnB1dC5oYXNoVHlwZSAmIDB4MWYKICAgIGlmIChoYXNoVHlwZU1vZCA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9OT05FKSByZXR1cm4gdHJ1ZQogICAgaWYgKGhhc2hUeXBlTW9kID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX1NJTkdMRSkgewogICAgICAvLyBhY2NvdW50IGZvciBTSUdIQVNIX1NJTkdMRSBzaWduaW5nIG9mIGEgbm9uLWV4aXN0aW5nIG91dHB1dCwgYWthIHRoZSAiU0lHSEFTSF9TSU5HTEUiIGJ1ZwogICAgICByZXR1cm4gaW5kZXggPCBuT3V0cHV0cwogICAgfQoKICAgIHJldHVybiBmYWxzZQogIH0pKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vLCB0aGlzIHdvdWxkIGludmFsaWRhdGUgc2lnbmF0dXJlcycpCiAgfQoKICAvLyBBdHRlbXB0IHRvIGdldCBhIHNjcmlwdCBpZiBpdCdzIGEgYmFzZTU4IGFkZHJlc3Mgc3RyaW5nCiAgaWYgKHR5cGVvZiBzY3JpcHRQdWJLZXkgPT09ICdzdHJpbmcnKSB7CiAgICBzY3JpcHRQdWJLZXkgPSBiYWRkcmVzcy50b091dHB1dFNjcmlwdChzY3JpcHRQdWJLZXksIHRoaXMubmV0d29yaykKICB9CgogIHJldHVybiB0aGlzLnR4LmFkZE91dHB1dChzY3JpcHRQdWJLZXksIHZhbHVlKQp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl9fYnVpbGQoZmFsc2UpCn0KVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5idWlsZEluY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX19idWlsZCh0cnVlKQp9Cgp2YXIgY2FuQnVpbGRUeXBlcyA9IHsKICAnbXVsdGlzaWcnOiB0cnVlLAogICdwdWJrZXknOiB0cnVlLAogICdwdWJrZXloYXNoJzogdHJ1ZQp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLl9fYnVpbGQgPSBmdW5jdGlvbiAoYWxsb3dJbmNvbXBsZXRlKSB7CiAgaWYgKCFhbGxvd0luY29tcGxldGUpIHsKICAgIGlmICghdGhpcy50eC5pbnMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBubyBpbnB1dHMnKQogICAgaWYgKCF0aGlzLnR4Lm91dHMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBubyBvdXRwdXRzJykKICB9CgogIHZhciB0eCA9IHRoaXMudHguY2xvbmUoKQoKICAvLyBDcmVhdGUgc2NyaXB0IHNpZ25hdHVyZXMgZnJvbSBpbnB1dHMKICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCwgaW5kZXgpIHsKICAgIHZhciBzY3JpcHRUeXBlID0gaW5wdXQuc2NyaXB0VHlwZQogICAgdmFyIHNjcmlwdFNpZwoKICAgIGlmICghYWxsb3dJbmNvbXBsZXRlKSB7CiAgICAgIGlmICghc2NyaXB0VHlwZSkgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBpcyBub3QgY29tcGxldGUnKQogICAgICBpZiAoIWNhbkJ1aWxkVHlwZXNbc2NyaXB0VHlwZV0pIHRocm93IG5ldyBFcnJvcihzY3JpcHRUeXBlICsgJyBub3Qgc3VwcG9ydGVkJykKCiAgICAgIC8vIFhYWDogb25seSByZWxldmFudCB0byB0eXBlcyB0aGF0IG5lZWQgc2lnbmF0dXJlcwogICAgICBpZiAoIWlucHV0LnNpZ25hdHVyZXMpIHRocm93IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gaXMgbWlzc2luZyBzaWduYXR1cmVzJykKICAgIH0KCiAgICBpZiAoaW5wdXQuc2lnbmF0dXJlcykgewogICAgICBzd2l0Y2ggKHNjcmlwdFR5cGUpIHsKICAgICAgICBjYXNlICdwdWJrZXloYXNoJzoKICAgICAgICAgIHZhciBwa2hTaWduYXR1cmUgPSBpbnB1dC5zaWduYXR1cmVzWzBdLnRvU2NyaXB0U2lnbmF0dXJlKGlucHV0Lmhhc2hUeXBlKQogICAgICAgICAgc2NyaXB0U2lnID0gYnNjcmlwdC5wdWJLZXlIYXNoSW5wdXQocGtoU2lnbmF0dXJlLCBpbnB1dC5wdWJLZXlzWzBdKQogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAnbXVsdGlzaWcnOgogICAgICAgICAgdmFyIG1zU2lnbmF0dXJlcyA9IGlucHV0LnNpZ25hdHVyZXMubWFwKGZ1bmN0aW9uIChzaWduYXR1cmUpIHsKICAgICAgICAgICAgcmV0dXJuIHNpZ25hdHVyZSAmJiBzaWduYXR1cmUudG9TY3JpcHRTaWduYXR1cmUoaW5wdXQuaGFzaFR5cGUpCiAgICAgICAgICB9KQoKICAgICAgICAgIC8vIGZpbGwgaW4gYmxhbmtzIHdpdGggT1BfMAogICAgICAgICAgaWYgKGFsbG93SW5jb21wbGV0ZSkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zU2lnbmF0dXJlcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgIG1zU2lnbmF0dXJlc1tpXSA9IG1zU2lnbmF0dXJlc1tpXSB8fCBvcHMuT1BfMAogICAgICAgICAgICB9CgogICAgICAgICAgLy8gcmVtb3ZlIGJsYW5rIHNpZ25hdHVyZXMKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1zU2lnbmF0dXJlcyA9IG1zU2lnbmF0dXJlcy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggfSkKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcmVkZWVtU2NyaXB0ID0gYWxsb3dJbmNvbXBsZXRlID8gdW5kZWZpbmVkIDogaW5wdXQucmVkZWVtU2NyaXB0CiAgICAgICAgICBzY3JpcHRTaWcgPSBic2NyaXB0Lm11bHRpc2lnSW5wdXQobXNTaWduYXR1cmVzLCByZWRlZW1TY3JpcHQpCiAgICAgICAgICBicmVhawoKICAgICAgICBjYXNlICdwdWJrZXknOgogICAgICAgICAgdmFyIHBrU2lnbmF0dXJlID0gaW5wdXQuc2lnbmF0dXJlc1swXS50b1NjcmlwdFNpZ25hdHVyZShpbnB1dC5oYXNoVHlwZSkKICAgICAgICAgIHNjcmlwdFNpZyA9IGJzY3JpcHQucHViS2V5SW5wdXQocGtTaWduYXR1cmUpCiAgICAgICAgICBicmVhawogICAgICB9CiAgICB9CgogICAgLy8gZGlkIHdlIGJ1aWxkIGEgc2NyaXB0U2lnPwogICAgaWYgKHNjcmlwdFNpZykgewogICAgICAvLyB3cmFwIGFzIHNjcmlwdEhhc2ggaWYgbmVjZXNzYXJ5CiAgICAgIGlmIChpbnB1dC5wcmV2T3V0VHlwZSA9PT0gJ3NjcmlwdGhhc2gnKSB7CiAgICAgICAgc2NyaXB0U2lnID0gYnNjcmlwdC5zY3JpcHRIYXNoSW5wdXQoc2NyaXB0U2lnLCBpbnB1dC5yZWRlZW1TY3JpcHQpCiAgICAgIH0KCiAgICAgIHR4LnNldElucHV0U2NyaXB0KGluZGV4LCBzY3JpcHRTaWcpCiAgICB9CiAgfSkKCiAgcmV0dXJuIHR4Cn0KClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIChpbmRleCwga2V5UGFpciwgcmVkZWVtU2NyaXB0LCBoYXNoVHlwZSkgewogIGlmIChrZXlQYWlyLm5ldHdvcmsgIT09IHRoaXMubmV0d29yaykgdGhyb3cgbmV3IEVycm9yKCdJbmNvbnNpc3RlbnQgbmV0d29yaycpCiAgaWYgKCF0aGlzLmlucHV0c1tpbmRleF0pIHRocm93IG5ldyBFcnJvcignTm8gaW5wdXQgYXQgaW5kZXg6ICcgKyBpbmRleCkKICBoYXNoVHlwZSA9IGhhc2hUeXBlIHx8IFRyYW5zYWN0aW9uLlNJR0hBU0hfQUxMCgogIHZhciBpbnB1dCA9IHRoaXMuaW5wdXRzW2luZGV4XQogIHZhciBjYW5TaWduID0gaW5wdXQuaGFzaFR5cGUgJiYKICAgIGlucHV0LnByZXZPdXRTY3JpcHQgJiYKICAgIGlucHV0LnByZXZPdXRUeXBlICYmCiAgICBpbnB1dC5wdWJLZXlzICYmCiAgICBpbnB1dC5zY3JpcHRUeXBlICYmCiAgICBpbnB1dC5zaWduYXR1cmVzICYmCiAgICBpbnB1dC5zaWduYXR1cmVzLmxlbmd0aCA9PT0gaW5wdXQucHViS2V5cy5sZW5ndGgKCiAgdmFyIGtwUHViS2V5ID0ga2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKQoKICAvLyBhcmUgd2UgcmVhZHkgdG8gc2lnbj8KICBpZiAoY2FuU2lnbikgewogICAgLy8gaWYgcmVkZWVtU2NyaXB0IHdhcyBwcm92aWRlZCwgZW5mb3JjZSBjb25zaXN0ZW5jeQogICAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgICBpZiAoIWJ1ZmZlckVxdWFscyhpbnB1dC5yZWRlZW1TY3JpcHQsIHJlZGVlbVNjcmlwdCkpIHRocm93IG5ldyBFcnJvcignSW5jb25zaXN0ZW50IHJlZGVlbVNjcmlwdCcpCiAgICB9CgogICAgaWYgKGlucHV0Lmhhc2hUeXBlICE9PSBoYXNoVHlwZSkgdGhyb3cgbmV3IEVycm9yKCdJbmNvbnNpc3RlbnQgaGFzaFR5cGUnKQoKICAvLyBubz8gcHJlcGFyZQogIH0gZWxzZSB7CiAgICAvLyBtdXN0IGJlIHBheS10by1zY3JpcHRIYXNoPwogICAgaWYgKHJlZGVlbVNjcmlwdCkgewogICAgICAvLyBpZiB3ZSBoYXZlIGEgcHJldk91dFNjcmlwdCwgZW5mb3JjZSBzY3JpcHRIYXNoIGVxdWFsaXR5IHRvIHRoZSByZWRlZW1TY3JpcHQKICAgICAgaWYgKGlucHV0LnByZXZPdXRTY3JpcHQpIHsKICAgICAgICBpZiAoaW5wdXQucHJldk91dFR5cGUgIT09ICdzY3JpcHRoYXNoJykgdGhyb3cgbmV3IEVycm9yKCdQcmV2T3V0U2NyaXB0IG11c3QgYmUgUDJTSCcpCgogICAgICAgIHZhciBzY3JpcHRIYXNoID0gYnNjcmlwdC5kZWNvbXBpbGUoaW5wdXQucHJldk91dFNjcmlwdClbMV0KICAgICAgICBpZiAoIWJ1ZmZlckVxdWFscyhzY3JpcHRIYXNoLCBiY3J5cHRvLmhhc2gxNjAocmVkZWVtU2NyaXB0KSkpIHRocm93IG5ldyBFcnJvcignUmVkZWVtU2NyaXB0IGRvZXMgbm90IG1hdGNoICcgKyBzY3JpcHRIYXNoLnRvU3RyaW5nKCdoZXgnKSkKICAgICAgfQoKICAgICAgdmFyIHNjcmlwdFR5cGUgPSBic2NyaXB0LmNsYXNzaWZ5T3V0cHV0KHJlZGVlbVNjcmlwdCkKICAgICAgdmFyIHJlZGVlbVNjcmlwdENodW5rcyA9IGJzY3JpcHQuZGVjb21waWxlKHJlZGVlbVNjcmlwdCkKICAgICAgdmFyIHB1YktleXMKCiAgICAgIHN3aXRjaCAoc2NyaXB0VHlwZSkgewogICAgICAgIGNhc2UgJ211bHRpc2lnJzoKICAgICAgICAgIHB1YktleXMgPSByZWRlZW1TY3JpcHRDaHVua3Muc2xpY2UoMSwgLTIpCgogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAncHVia2V5aGFzaCc6CiAgICAgICAgICB2YXIgcGtoMSA9IHJlZGVlbVNjcmlwdENodW5rc1syXQogICAgICAgICAgdmFyIHBraDIgPSBiY3J5cHRvLmhhc2gxNjAoa2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKSkKCiAgICAgICAgICBpZiAoIWJ1ZmZlckVxdWFscyhwa2gxLCBwa2gyKSkgdGhyb3cgbmV3IEVycm9yKCdwcml2YXRlS2V5IGNhbm5vdCBzaWduIGZvciB0aGlzIGlucHV0JykKICAgICAgICAgIHB1YktleXMgPSBba3BQdWJLZXldCgogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAncHVia2V5JzoKICAgICAgICAgIHB1YktleXMgPSByZWRlZW1TY3JpcHRDaHVua3Muc2xpY2UoMCwgMSkKCiAgICAgICAgICBicmVhawoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWRlZW1TY3JpcHQgbm90IHN1cHBvcnRlZCAoJyArIHNjcmlwdFR5cGUgKyAnKScpCiAgICAgIH0KCiAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBwcmV2T3V0U2NyaXB0LCBnZW5lcmF0ZSBhIFAyU0ggc2NyaXB0CiAgICAgIGlmICghaW5wdXQucHJldk91dFNjcmlwdCkgewogICAgICAgIGlucHV0LnByZXZPdXRTY3JpcHQgPSBic2NyaXB0LnNjcmlwdEhhc2hPdXRwdXQoYmNyeXB0by5oYXNoMTYwKHJlZGVlbVNjcmlwdCkpCiAgICAgICAgaW5wdXQucHJldk91dFR5cGUgPSAnc2NyaXB0aGFzaCcKICAgICAgfQoKICAgICAgaW5wdXQucHViS2V5cyA9IHB1YktleXMKICAgICAgaW5wdXQucmVkZWVtU2NyaXB0ID0gcmVkZWVtU2NyaXB0CiAgICAgIGlucHV0LnNjcmlwdFR5cGUgPSBzY3JpcHRUeXBlCiAgICAgIGlucHV0LnNpZ25hdHVyZXMgPSBwdWJLZXlzLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQgfSkKICAgIH0gZWxzZSB7CiAgICAgIC8vIHBheS10by1zY3JpcHRIYXNoIGlzIG5vdCBwb3NzaWJsZSB3aXRob3V0IGEgcmVkZWVtU2NyaXB0CiAgICAgIGlmIChpbnB1dC5wcmV2T3V0VHlwZSA9PT0gJ3NjcmlwdGhhc2gnKSB0aHJvdyBuZXcgRXJyb3IoJ1ByZXZPdXRTY3JpcHQgaXMgUDJTSCwgbWlzc2luZyByZWRlZW1TY3JpcHQnKQoKICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHNjcmlwdFR5cGUsIGFzc3VtZSBwdWJLZXlIYXNoIG90aGVyd2lzZQogICAgICBpZiAoIWlucHV0LnNjcmlwdFR5cGUpIHsKICAgICAgICBpbnB1dC5wcmV2T3V0U2NyaXB0ID0gYnNjcmlwdC5wdWJLZXlIYXNoT3V0cHV0KGJjcnlwdG8uaGFzaDE2MChrZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpKSkKICAgICAgICBpbnB1dC5wcmV2T3V0VHlwZSA9ICdwdWJrZXloYXNoJwogICAgICAgIGlucHV0LnB1YktleXMgPSBba3BQdWJLZXldCiAgICAgICAgaW5wdXQuc2NyaXB0VHlwZSA9IGlucHV0LnByZXZPdXRUeXBlCiAgICAgICAgaW5wdXQuc2lnbmF0dXJlcyA9IFt1bmRlZmluZWRdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdGhyb3cgaWYgd2UgY2FuJ3Qgc2lnbiB3aXRoIGl0CiAgICAgICAgaWYgKCFpbnB1dC5wdWJLZXlzIHx8ICFpbnB1dC5zaWduYXR1cmVzKSB0aHJvdyBuZXcgRXJyb3IoaW5wdXQuc2NyaXB0VHlwZSArICcgbm90IHN1cHBvcnRlZCcpCiAgICAgIH0KICAgIH0KCiAgICBpbnB1dC5oYXNoVHlwZSA9IGhhc2hUeXBlCiAgfQoKICAvLyByZWFkeSB0byBzaWduPwogIHZhciBzaWduYXR1cmVTY3JpcHQgPSBpbnB1dC5yZWRlZW1TY3JpcHQgfHwgaW5wdXQucHJldk91dFNjcmlwdAogIHZhciBzaWduYXR1cmVIYXNoID0gdGhpcy50eC5oYXNoRm9yU2lnbmF0dXJlKGluZGV4LCBzaWduYXR1cmVTY3JpcHQsIGhhc2hUeXBlKQoKICAvLyBlbmZvcmNlIGluIG9yZGVyIHNpZ25pbmcgb2YgcHVibGljIGtleXMKICB2YXIgdmFsaWQgPSBpbnB1dC5wdWJLZXlzLnNvbWUoZnVuY3Rpb24gKHB1YktleSwgaSkgewogICAgaWYgKCFidWZmZXJFcXVhbHMoa3BQdWJLZXksIHB1YktleSkpIHJldHVybiBmYWxzZQogICAgaWYgKGlucHV0LnNpZ25hdHVyZXNbaV0pIHRocm93IG5ldyBFcnJvcignU2lnbmF0dXJlIGFscmVhZHkgZXhpc3RzJykKCiAgICB2YXIgc2lnbmF0dXJlID0ga2V5UGFpci5zaWduKHNpZ25hdHVyZUhhc2gpCiAgICBpbnB1dC5zaWduYXR1cmVzW2ldID0gc2lnbmF0dXJlCgogICAgcmV0dXJuIHRydWUKICB9KQoKICBpZiAoIXZhbGlkKSB0aHJvdyBuZXcgRXJyb3IoJ0tleSBwYWlyIGNhbm5vdCBzaWduIGZvciB0aGlzIGlucHV0JykKfQoKbW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvbkJ1aWxkZXIKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FkZHJlc3MiOjQ4NCwiLi9jcnlwdG8iOjQ4NywiLi9lY3BhaXIiOjQ4OSwiLi9lY3NpZ25hdHVyZSI6NDkwLCIuL25ldHdvcmtzIjo0OTQsIi4vb3Bjb2RlcyI6NDk1LCIuL3NjcmlwdCI6NDk2LCIuL3RyYW5zYWN0aW9uIjo0OTgsIi4vdHlwZXMiOjUwMCwiYnVmZmVyIjo1MDQsImJ1ZmZlci1lcXVhbHMiOjQ1NywidHlwZWZvcmNlIjo0ODF9XSw1MDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKCmZ1bmN0aW9uIG5CdWZmZXIgKHZhbHVlLCBuKSB7CiAgdHlwZWZvcmNlKHR5cGVzLkJ1ZmZlciwgdmFsdWUpCiAgaWYgKHZhbHVlLmxlbmd0aCAhPT0gbikgdGhyb3cgbmV3IHR5cGVmb3JjZS5UZlR5cGVFcnJvcignRXhwZWN0ZWQgJyArIChuICogOCkgKyAnLWJpdCBCdWZmZXIsIGdvdCAnICsgKHZhbHVlLmxlbmd0aCAqIDgpICsgJy1iaXQgQnVmZmVyJykKCiAgcmV0dXJuIHRydWUKfQoKZnVuY3Rpb24gSGFzaDE2MGJpdCAodmFsdWUpIHsgcmV0dXJuIG5CdWZmZXIodmFsdWUsIDIwKSB9CmZ1bmN0aW9uIEhhc2gyNTZiaXQgKHZhbHVlKSB7IHJldHVybiBuQnVmZmVyKHZhbHVlLCAzMikgfQpmdW5jdGlvbiBCdWZmZXIyNTZiaXQgKHZhbHVlKSB7IHJldHVybiBuQnVmZmVyKHZhbHVlLCAzMikgfQoKdmFyIFVJTlQ1M19NQVggPSBNYXRoLnBvdygyLCA1MykgLSAxCmZ1bmN0aW9uIFVJbnQyICh2YWx1ZSkgeyByZXR1cm4gKHZhbHVlICYgMykgPT09IHZhbHVlIH0KZnVuY3Rpb24gVUludDggKHZhbHVlKSB7IHJldHVybiAodmFsdWUgJiAweGZmKSA9PT0gdmFsdWUgfQpmdW5jdGlvbiBVSW50MzIgKHZhbHVlKSB7IHJldHVybiAodmFsdWUgPj4+IDApID09PSB2YWx1ZSB9CmZ1bmN0aW9uIFVJbnQ1MyAodmFsdWUpIHsKICByZXR1cm4gdHlwZWZvcmNlLk51bWJlcih2YWx1ZSkgJiYKICAgIHZhbHVlID49IDAgJiYKICAgIHZhbHVlIDw9IFVJTlQ1M19NQVggJiYKICAgIE1hdGguZmxvb3IodmFsdWUpID09PSB2YWx1ZQp9CgovLyBleHRlcm5hbCBkZXBlbmRlbnQgdHlwZXMKdmFyIEJpZ0ludCA9IHR5cGVmb3JjZS5xdWFja3NMaWtlKCdCaWdJbnRlZ2VyJykKdmFyIEVDUG9pbnQgPSB0eXBlZm9yY2UucXVhY2tzTGlrZSgnUG9pbnQnKQoKLy8gZXhwb3NlZCwgZXh0ZXJuYWwgQVBJCnZhciBFQ1NpZ25hdHVyZSA9IHR5cGVmb3JjZS5jb21waWxlKHsgcjogQmlnSW50LCBzOiBCaWdJbnQgfSkKdmFyIE5ldHdvcmsgPSB0eXBlZm9yY2UuY29tcGlsZSh7CiAgbWVzc2FnZVByZWZpeDogdHlwZWZvcmNlLm9uZU9mKHR5cGVmb3JjZS5CdWZmZXIsIHR5cGVmb3JjZS5TdHJpbmcpLAogIGJpcDMyOiB7CiAgICBwdWJsaWM6IFVJbnQzMiwKICAgIHByaXZhdGU6IFVJbnQzMgogIH0sCiAgcHViS2V5SGFzaDogVUludDgsCiAgc2NyaXB0SGFzaDogVUludDgsCiAgd2lmOiBVSW50OCwKICBkdXN0VGhyZXNob2xkOiBVSW50NTMKfSkKCi8vIGV4dGVuZCB0eXBlZm9yY2UgdHlwZXMgd2l0aCBvdXJzCnZhciB0eXBlcyA9IHsKICBCaWdJbnQ6IEJpZ0ludCwKICBCdWZmZXIyNTZiaXQ6IEJ1ZmZlcjI1NmJpdCwKICBFQ1BvaW50OiBFQ1BvaW50LAogIEVDU2lnbmF0dXJlOiBFQ1NpZ25hdHVyZSwKICBIYXNoMTYwYml0OiBIYXNoMTYwYml0LAogIEhhc2gyNTZiaXQ6IEhhc2gyNTZiaXQsCiAgTmV0d29yazogTmV0d29yaywKICBVSW50MjogVUludDIsCiAgVUludDg6IFVJbnQ4LAogIFVJbnQzMjogVUludDMyLAogIFVJbnQ1MzogVUludDUzCn0KCmZvciAodmFyIHR5cGVOYW1lIGluIHR5cGVmb3JjZSkgewogIHR5cGVzW3R5cGVOYW1lXSA9IHR5cGVmb3JjZVt0eXBlTmFtZV0KfQoKbW9kdWxlLmV4cG9ydHMgPSB0eXBlcwoKfSx7InR5cGVmb3JjZSI6NDgxfV0sNTAxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQxOF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjQxOH1dLDUwMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1VuaXRfVGVzdGluZy8xLjAKLy8KLy8gVEhJUyBJUyBOT1QgVEVTVEVEIE5PUiBMSUtFTFkgVE8gV09SSyBPVVRTSURFIFY4IQovLwovLyBPcmlnaW5hbGx5IGZyb20gbmFyd2hhbC5qcyAoaHR0cDovL25hcndoYWxqcy5vcmcpCi8vIENvcHlyaWdodCAoYykgMjAwOSBUaG9tYXMgUm9iaW5zb24gPDI4MG5vcnRoLmNvbT4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weQovLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG8KLy8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUKLy8gcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yCi8vIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgovLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCi8vIEFVVEhPUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOCi8vIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04KLy8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgovLyB3aGVuIHVzZWQgaW4gbm9kZSwgdGhpcyB3aWxsIGFjdHVhbGx5IGxvYWQgdGhlIHV0aWwgbW9kdWxlIHdlIGRlcGVuZCBvbgovLyB2ZXJzdXMgbG9hZGluZyB0aGUgYnVpbHRpbiB1dGlsIG1vZHVsZSBhcyBoYXBwZW5zIG90aGVyd2lzZQovLyB0aGlzIGlzIGEgYnVnIGluIG5vZGUgbW9kdWxlIGxvYWRpbmcgYXMgZmFyIGFzIEkgYW0gY29uY2VybmVkCnZhciB1dGlsID0gcmVxdWlyZSgndXRpbC8nKTsKCnZhciBwU2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7CnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKLy8gMS4gVGhlIGFzc2VydCBtb2R1bGUgcHJvdmlkZXMgZnVuY3Rpb25zIHRoYXQgdGhyb3cKLy8gQXNzZXJ0aW9uRXJyb3IncyB3aGVuIHBhcnRpY3VsYXIgY29uZGl0aW9ucyBhcmUgbm90IG1ldC4gVGhlCi8vIGFzc2VydCBtb2R1bGUgbXVzdCBjb25mb3JtIHRvIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlLgoKdmFyIGFzc2VydCA9IG1vZHVsZS5leHBvcnRzID0gb2s7CgovLyAyLiBUaGUgQXNzZXJ0aW9uRXJyb3IgaXMgZGVmaW5lZCBpbiBhc3NlcnQuCi8vIG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IoeyBtZXNzYWdlOiBtZXNzYWdlLAovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiBhY3R1YWwsCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWQgfSkKCmFzc2VydC5Bc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKG9wdGlvbnMpIHsKICB0aGlzLm5hbWUgPSAnQXNzZXJ0aW9uRXJyb3InOwogIHRoaXMuYWN0dWFsID0gb3B0aW9ucy5hY3R1YWw7CiAgdGhpcy5leHBlY3RlZCA9IG9wdGlvbnMuZXhwZWN0ZWQ7CiAgdGhpcy5vcGVyYXRvciA9IG9wdGlvbnMub3BlcmF0b3I7CiAgaWYgKG9wdGlvbnMubWVzc2FnZSkgewogICAgdGhpcy5tZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlOwogICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gZmFsc2U7CiAgfSBlbHNlIHsKICAgIHRoaXMubWVzc2FnZSA9IGdldE1lc3NhZ2UodGhpcyk7CiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSB0cnVlOwogIH0KICB2YXIgc3RhY2tTdGFydEZ1bmN0aW9uID0gb3B0aW9ucy5zdGFja1N0YXJ0RnVuY3Rpb24gfHwgZmFpbDsKCiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7CiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBzdGFja1N0YXJ0RnVuY3Rpb24pOwogIH0KICBlbHNlIHsKICAgIC8vIG5vbiB2OCBicm93c2VycyBzbyB3ZSBjYW4gaGF2ZSBhIHN0YWNrdHJhY2UKICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoKTsKICAgIGlmIChlcnIuc3RhY2spIHsKICAgICAgdmFyIG91dCA9IGVyci5zdGFjazsKCiAgICAgIC8vIHRyeSB0byBzdHJpcCB1c2VsZXNzIGZyYW1lcwogICAgICB2YXIgZm5fbmFtZSA9IHN0YWNrU3RhcnRGdW5jdGlvbi5uYW1lOwogICAgICB2YXIgaWR4ID0gb3V0LmluZGV4T2YoJ1xuJyArIGZuX25hbWUpOwogICAgICBpZiAoaWR4ID49IDApIHsKICAgICAgICAvLyBvbmNlIHdlIGhhdmUgbG9jYXRlZCB0aGUgZnVuY3Rpb24gZnJhbWUKICAgICAgICAvLyB3ZSBuZWVkIHRvIHN0cmlwIG91dCBldmVyeXRoaW5nIGJlZm9yZSBpdCAoYW5kIGl0cyBsaW5lKQogICAgICAgIHZhciBuZXh0X2xpbmUgPSBvdXQuaW5kZXhPZignXG4nLCBpZHggKyAxKTsKICAgICAgICBvdXQgPSBvdXQuc3Vic3RyaW5nKG5leHRfbGluZSArIDEpOwogICAgICB9CgogICAgICB0aGlzLnN0YWNrID0gb3V0OwogICAgfQogIH0KfTsKCi8vIGFzc2VydC5Bc3NlcnRpb25FcnJvciBpbnN0YW5jZW9mIEVycm9yCnV0aWwuaW5oZXJpdHMoYXNzZXJ0LkFzc2VydGlvbkVycm9yLCBFcnJvcik7CgpmdW5jdGlvbiByZXBsYWNlcihrZXksIHZhbHVlKSB7CiAgaWYgKHV0aWwuaXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICByZXR1cm4gJycgKyB2YWx1ZTsKICB9CiAgaWYgKHV0aWwuaXNOdW1iZXIodmFsdWUpICYmICFpc0Zpbml0ZSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpOwogIH0KICBpZiAodXRpbC5pc0Z1bmN0aW9uKHZhbHVlKSB8fCB1dGlsLmlzUmVnRXhwKHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7CiAgfQogIHJldHVybiB2YWx1ZTsKfQoKZnVuY3Rpb24gdHJ1bmNhdGUocywgbikgewogIGlmICh1dGlsLmlzU3RyaW5nKHMpKSB7CiAgICByZXR1cm4gcy5sZW5ndGggPCBuID8gcyA6IHMuc2xpY2UoMCwgbik7CiAgfSBlbHNlIHsKICAgIHJldHVybiBzOwogIH0KfQoKZnVuY3Rpb24gZ2V0TWVzc2FnZShzZWxmKSB7CiAgcmV0dXJuIHRydW5jYXRlKEpTT04uc3RyaW5naWZ5KHNlbGYuYWN0dWFsLCByZXBsYWNlciksIDEyOCkgKyAnICcgKwogICAgICAgICBzZWxmLm9wZXJhdG9yICsgJyAnICsKICAgICAgICAgdHJ1bmNhdGUoSlNPTi5zdHJpbmdpZnkoc2VsZi5leHBlY3RlZCwgcmVwbGFjZXIpLCAxMjgpOwp9CgovLyBBdCBwcmVzZW50IG9ubHkgdGhlIHRocmVlIGtleXMgbWVudGlvbmVkIGFib3ZlIGFyZSB1c2VkIGFuZAovLyB1bmRlcnN0b29kIGJ5IHRoZSBzcGVjLiBJbXBsZW1lbnRhdGlvbnMgb3Igc3ViIG1vZHVsZXMgY2FuIHBhc3MKLy8gb3RoZXIga2V5cyB0byB0aGUgQXNzZXJ0aW9uRXJyb3IncyBjb25zdHJ1Y3RvciAtIHRoZXkgd2lsbCBiZQovLyBpZ25vcmVkLgoKLy8gMy4gQWxsIG9mIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIG11c3QgdGhyb3cgYW4gQXNzZXJ0aW9uRXJyb3IKLy8gd2hlbiBhIGNvcnJlc3BvbmRpbmcgY29uZGl0aW9uIGlzIG5vdCBtZXQsIHdpdGggYSBtZXNzYWdlIHRoYXQKLy8gbWF5IGJlIHVuZGVmaW5lZCBpZiBub3QgcHJvdmlkZWQuICBBbGwgYXNzZXJ0aW9uIG1ldGhvZHMgcHJvdmlkZQovLyBib3RoIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIHZhbHVlcyB0byB0aGUgYXNzZXJ0aW9uIGVycm9yIGZvcgovLyBkaXNwbGF5IHB1cnBvc2VzLgoKZnVuY3Rpb24gZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvciwgc3RhY2tTdGFydEZ1bmN0aW9uKSB7CiAgdGhyb3cgbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7CiAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgYWN0dWFsOiBhY3R1YWwsCiAgICBleHBlY3RlZDogZXhwZWN0ZWQsCiAgICBvcGVyYXRvcjogb3BlcmF0b3IsCiAgICBzdGFja1N0YXJ0RnVuY3Rpb246IHN0YWNrU3RhcnRGdW5jdGlvbgogIH0pOwp9CgovLyBFWFRFTlNJT04hIGFsbG93cyBmb3Igd2VsbCBiZWhhdmVkIGVycm9ycyBkZWZpbmVkIGVsc2V3aGVyZS4KYXNzZXJ0LmZhaWwgPSBmYWlsOwoKLy8gNC4gUHVyZSBhc3NlcnRpb24gdGVzdHMgd2hldGhlciBhIHZhbHVlIGlzIHRydXRoeSwgYXMgZGV0ZXJtaW5lZAovLyBieSAhIWd1YXJkLgovLyBhc3NlcnQub2soZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsKLy8gVGhpcyBzdGF0ZW1lbnQgaXMgZXF1aXZhbGVudCB0byBhc3NlcnQuZXF1YWwodHJ1ZSwgISFndWFyZCwKLy8gbWVzc2FnZV9vcHQpOy4gVG8gdGVzdCBzdHJpY3RseSBmb3IgdGhlIHZhbHVlIHRydWUsIHVzZQovLyBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsuCgpmdW5jdGlvbiBvayh2YWx1ZSwgbWVzc2FnZSkgewogIGlmICghdmFsdWUpIGZhaWwodmFsdWUsIHRydWUsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5vayk7Cn0KYXNzZXJ0Lm9rID0gb2s7CgovLyA1LiBUaGUgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHNoYWxsb3csIGNvZXJjaXZlIGVxdWFsaXR5IHdpdGgKLy8gPT0uCi8vIGFzc2VydC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7Cgphc3NlcnQuZXF1YWwgPSBmdW5jdGlvbiBlcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKGFjdHVhbCAhPSBleHBlY3RlZCkgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQuZXF1YWwpOwp9OwoKLy8gNi4gVGhlIG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHdoZXRoZXIgdHdvIG9iamVjdHMgYXJlIG5vdCBlcXVhbAovLyB3aXRoICE9IGFzc2VydC5ub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7Cgphc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKGFjdHVhbCA9PSBleHBlY3RlZCkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT0nLCBhc3NlcnQubm90RXF1YWwpOwogIH0KfTsKCi8vIDcuIFRoZSBlcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgYSBkZWVwIGVxdWFsaXR5IHJlbGF0aW9uLgovLyBhc3NlcnQuZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5kZWVwRXF1YWwgPSBmdW5jdGlvbiBkZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkgewogIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7CiAgfQp9OwoKZnVuY3Rpb24gX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSB7CiAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uCiAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHsKICAgIHJldHVybiB0cnVlOwoKICB9IGVsc2UgaWYgKHV0aWwuaXNCdWZmZXIoYWN0dWFsKSAmJiB1dGlsLmlzQnVmZmVyKGV4cGVjdGVkKSkgewogICAgaWYgKGFjdHVhbC5sZW5ndGggIT0gZXhwZWN0ZWQubGVuZ3RoKSByZXR1cm4gZmFsc2U7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3R1YWwubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGFjdHVhbFtpXSAhPT0gZXhwZWN0ZWRbaV0pIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKCiAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpcwogIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIERhdGUgb2JqZWN0IHRoYXQgcmVmZXJzIHRvIHRoZSBzYW1lIHRpbWUuCiAgfSBlbHNlIGlmICh1dGlsLmlzRGF0ZShhY3R1YWwpICYmIHV0aWwuaXNEYXRlKGV4cGVjdGVkKSkgewogICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTsKCiAgLy8gNy4zIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIFJlZ0V4cCBvYmplY3QsIHRoZSBhY3R1YWwgdmFsdWUgaXMKICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZAogIC8vIHByb3BlcnRpZXMgKGBnbG9iYWxgLCBgbXVsdGlsaW5lYCwgYGxhc3RJbmRleGAsIGBpZ25vcmVDYXNlYCkuCiAgfSBlbHNlIGlmICh1dGlsLmlzUmVnRXhwKGFjdHVhbCkgJiYgdXRpbC5pc1JlZ0V4cChleHBlY3RlZCkpIHsKICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiYKICAgICAgICAgICBhY3R1YWwuZ2xvYmFsID09PSBleHBlY3RlZC5nbG9iYWwgJiYKICAgICAgICAgICBhY3R1YWwubXVsdGlsaW5lID09PSBleHBlY3RlZC5tdWx0aWxpbmUgJiYKICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiYKICAgICAgICAgICBhY3R1YWwuaWdub3JlQ2FzZSA9PT0gZXhwZWN0ZWQuaWdub3JlQ2FzZTsKCiAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLAogIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uCiAgfSBlbHNlIGlmICghdXRpbC5pc09iamVjdChhY3R1YWwpICYmICF1dGlsLmlzT2JqZWN0KGV4cGVjdGVkKSkgewogICAgcmV0dXJuIGFjdHVhbCA9PSBleHBlY3RlZDsKCiAgLy8gNy41IEZvciBhbGwgb3RoZXIgT2JqZWN0IHBhaXJzLCBpbmNsdWRpbmcgQXJyYXkgb2JqZWN0cywgZXF1aXZhbGVuY2UgaXMKICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWQKICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzCiAgLy8gKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksIGVxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeQogIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzCiAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuCiAgfSBlbHNlIHsKICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkKTsKICB9Cn0KCmZ1bmN0aW9uIGlzQXJndW1lbnRzKG9iamVjdCkgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJzsKfQoKZnVuY3Rpb24gb2JqRXF1aXYoYSwgYikgewogIGlmICh1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGEpIHx8IHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoYikpCiAgICByZXR1cm4gZmFsc2U7CiAgLy8gYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LgogIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTsKICAvLyBpZiBvbmUgaXMgYSBwcmltaXRpdmUsIHRoZSBvdGhlciBtdXN0IGJlIHNhbWUKICBpZiAodXRpbC5pc1ByaW1pdGl2ZShhKSB8fCB1dGlsLmlzUHJpbWl0aXZlKGIpKSB7CiAgICByZXR1cm4gYSA9PT0gYjsKICB9CiAgdmFyIGFJc0FyZ3MgPSBpc0FyZ3VtZW50cyhhKSwKICAgICAgYklzQXJncyA9IGlzQXJndW1lbnRzKGIpOwogIGlmICgoYUlzQXJncyAmJiAhYklzQXJncykgfHwgKCFhSXNBcmdzICYmIGJJc0FyZ3MpKQogICAgcmV0dXJuIGZhbHNlOwogIGlmIChhSXNBcmdzKSB7CiAgICBhID0gcFNsaWNlLmNhbGwoYSk7CiAgICBiID0gcFNsaWNlLmNhbGwoYik7CiAgICByZXR1cm4gX2RlZXBFcXVhbChhLCBiKTsKICB9CiAgdmFyIGthID0gb2JqZWN0S2V5cyhhKSwKICAgICAga2IgPSBvYmplY3RLZXlzKGIpLAogICAgICBrZXksIGk7CiAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlcwogIC8vIGhhc093blByb3BlcnR5KQogIGlmIChrYS5sZW5ndGggIT0ga2IubGVuZ3RoKQogICAgcmV0dXJuIGZhbHNlOwogIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksCiAga2Euc29ydCgpOwogIGtiLnNvcnQoKTsKICAvL35+fmNoZWFwIGtleSB0ZXN0CiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGlmIChrYVtpXSAhPSBrYltpXSkKICAgICAgcmV0dXJuIGZhbHNlOwogIH0KICAvL2VxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeSBjb3JyZXNwb25kaW5nIGtleSwgYW5kCiAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0CiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGtleSA9IGthW2ldOwogICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldKSkgcmV0dXJuIGZhbHNlOwogIH0KICByZXR1cm4gdHJ1ZTsKfQoKLy8gOC4gVGhlIG5vbi1lcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgZm9yIGFueSBkZWVwIGluZXF1YWxpdHkuCi8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpOwoKYXNzZXJ0Lm5vdERlZXBFcXVhbCA9IGZ1bmN0aW9uIG5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCkpIHsKICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBFcXVhbCcsIGFzc2VydC5ub3REZWVwRXF1YWwpOwogIH0KfTsKCi8vIDkuIFRoZSBzdHJpY3QgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHN0cmljdCBlcXVhbGl0eSwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uCi8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7Cgphc3NlcnQuc3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBzdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHsKICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09PScsIGFzc2VydC5zdHJpY3RFcXVhbCk7CiAgfQp9OwoKLy8gMTAuIFRoZSBzdHJpY3Qgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igc3RyaWN0IGluZXF1YWxpdHksIGFzCi8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5ub3RTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIG5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT09JywgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKTsKICB9Cn07CgpmdW5jdGlvbiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSB7CiAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKSA9PSAnW29iamVjdCBSZWdFeHBdJykgewogICAgcmV0dXJuIGV4cGVjdGVkLnRlc3QoYWN0dWFsKTsKICB9IGVsc2UgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIGV4cGVjdGVkKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9IGVsc2UgaWYgKGV4cGVjdGVkLmNhbGwoe30sIGFjdHVhbCkgPT09IHRydWUpIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBfdGhyb3dzKHNob3VsZFRocm93LCBibG9jaywgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICB2YXIgYWN0dWFsOwoKICBpZiAodXRpbC5pc1N0cmluZyhleHBlY3RlZCkpIHsKICAgIG1lc3NhZ2UgPSBleHBlY3RlZDsKICAgIGV4cGVjdGVkID0gbnVsbDsKICB9CgogIHRyeSB7CiAgICBibG9jaygpOwogIH0gY2F0Y2ggKGUpIHsKICAgIGFjdHVhbCA9IGU7CiAgfQoKICBtZXNzYWdlID0gKGV4cGVjdGVkICYmIGV4cGVjdGVkLm5hbWUgPyAnICgnICsgZXhwZWN0ZWQubmFtZSArICcpLicgOiAnLicpICsKICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTsKCiAgaWYgKHNob3VsZFRocm93ICYmICFhY3R1YWwpIHsKICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpOwogIH0KCiAgaWYgKCFzaG91bGRUaHJvdyAmJiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnR290IHVud2FudGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTsKICB9CgogIGlmICgoc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmIGV4cGVjdGVkICYmCiAgICAgICFleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHwgKCFzaG91bGRUaHJvdyAmJiBhY3R1YWwpKSB7CiAgICB0aHJvdyBhY3R1YWw7CiAgfQp9CgovLyAxMS4gRXhwZWN0ZWQgdG8gdGhyb3cgYW4gZXJyb3I6Ci8vIGFzc2VydC50aHJvd3MoYmxvY2ssIEVycm9yX29wdCwgbWVzc2FnZV9vcHQpOwoKYXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkgewogIF90aHJvd3MuYXBwbHkodGhpcywgW3RydWVdLmNvbmNhdChwU2xpY2UuY2FsbChhcmd1bWVudHMpKSk7Cn07CgovLyBFWFRFTlNJT04hIFRoaXMgaXMgYW5ub3lpbmcgdG8gd3JpdGUgb3V0c2lkZSB0aGlzIG1vZHVsZS4KYXNzZXJ0LmRvZXNOb3RUaHJvdyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7CiAgX3Rocm93cy5hcHBseSh0aGlzLCBbZmFsc2VdLmNvbmNhdChwU2xpY2UuY2FsbChhcmd1bWVudHMpKSk7Cn07Cgphc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uKGVycikgeyBpZiAoZXJyKSB7dGhyb3cgZXJyO319OwoKdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7CiAgdmFyIGtleXMgPSBbXTsKICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICBpZiAoaGFzT3duLmNhbGwob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTsKICB9CiAgcmV0dXJuIGtleXM7Cn07Cgp9LHsidXRpbC8iOjcyMn1dLDUwMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MThdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo0MTh9XSw1MDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7Ci8qIQogKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci4KICoKICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+CiAqIEBsaWNlbnNlICBNSVQKICovCi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCgondXNlIHN0cmljdCcKCnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKQp2YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKQp2YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKQoKZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXIKZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlcgpleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTAKCi8qKgogKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOgogKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KQogKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpCiAqCiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKywKICogT3BlcmEgMTEuNissIGlPUyA0LjIrLgogKgogKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuCiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLgogKgogKiBOb3RlOgogKgogKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLAogKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguCiAqCiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLgogKgogKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZgogKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuCgogKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleQogKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS4KICovCkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZAogID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQKICA6IHR5cGVkQXJyYXlTdXBwb3J0KCkKCi8qCiAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC4KICovCmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKQoKZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkgewogIHRyeSB7CiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSkKICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fQogICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWQKICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YAogICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgCiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIGZhbHNlCiAgfQp9CgpmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHsKICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQKICAgID8gMHg3ZmZmZmZmZgogICAgOiAweDNmZmZmZmZmCn0KCmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7CiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJykKICB9CiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2UKICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpCiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKICB9IGVsc2UgewogICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzcwogICAgaWYgKHRoYXQgPT09IG51bGwpIHsKICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKQogICAgfQogICAgdGhhdC5sZW5ndGggPSBsZW5ndGgKICB9CgogIHJldHVybiB0aGF0Cn0KCi8qKgogKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXIKICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZgogKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzCiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0CiAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuCiAqCiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC4KICovCgpmdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7CiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKICB9CgogIC8vIENvbW1vbiBjYXNlLgogIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJwogICAgICApCiAgICB9CiAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKQogIH0KICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKfQoKQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uCgovLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi4KQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikgewogIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCiAgcmV0dXJuIGFycgp9CgpmdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKQogIH0KCiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewogICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQogIH0KCiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgIHJldHVybiBmcm9tU3RyaW5nKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KQogIH0KCiAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpCn0KCi8qKgogKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvcgogKiBpZiB2YWx1ZSBpcyBhIG51bWJlci4KICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKQogKiBCdWZmZXIuZnJvbShhcnJheSkKICogQnVmZmVyLmZyb20oYnVmZmVyKQogKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSkKICoqLwpCdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGZyb20obnVsbCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKfQoKaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZQogIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5CiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmCiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikgewogICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTcKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0pCiAgfQp9CgpmdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignInNpemUiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQogIH0KfQoKZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CiAgYXNzZXJ0U2l6ZShzaXplKQogIGlmIChzaXplIDw9IDApIHsKICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkKICB9CiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkgewogICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXMKICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGQKICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC4KICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnCiAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpCiAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCkKICB9CiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKQp9CgovKioKICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLgogKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pCiAqKi8KQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKQp9CgpmdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkgewogIGFzc2VydFNpemUoc2l6ZSkKICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKQogIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7CiAgICAgIHRoYXRbaV0gPSAwCiAgICB9CiAgfQogIHJldHVybiB0aGF0Cn0KCi8qKgogKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLgogKiAqLwpCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkgewogIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKQp9Ci8qKgogKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS4KICovCkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkgewogIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKQp9CgpmdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7CiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7CiAgICBlbmNvZGluZyA9ICd1dGY4JwogIH0KCiAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJlbmNvZGluZyIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpCiAgfQoKICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDAKICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aCkKCiAgdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKQogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7CiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDAKICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aCkKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7CiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTUKICB9CiAgcmV0dXJuIHRoYXQKfQoKZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7CiAgYXJyYXkuYnl0ZUxlbmd0aCAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyCgogIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wnb2Zmc2V0XCcgaXMgb3V0IG9mIGJvdW5kcycpCiAgfQoKICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCdsZW5ndGhcJyBpcyBvdXQgb2YgYm91bmRzJykKICB9CgogIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewogICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCkKICB9IGVsc2UgewogICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKQogIH0KCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2UKICAgIHRoYXQgPSBhcnJheQogICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCiAgfSBlbHNlIHsKICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3MKICAgIHRoYXQgPSBmcm9tQXJyYXlMaWtlKHRoYXQsIGFycmF5KQogIH0KICByZXR1cm4gdGhhdAp9CgpmdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHsKICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHsKICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMAogICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW4pCgogICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiB0aGF0CiAgICB9CgogICAgb2JqLmNvcHkodGhhdCwgMCwgMCwgbGVuKQogICAgcmV0dXJuIHRoYXQKICB9CgogIGlmIChvYmopIHsKICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgogICAgICAgIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7CiAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHsKICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApCiAgICAgIH0KICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqKQogICAgfQoKICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHsKICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpCiAgICB9CiAgfQoKICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuJykKfQoKZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7CiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlbgogIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKQogIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBrTWF4TGVuZ3RoKCkudG9TdHJpbmcoMTYpICsgJyBieXRlcycpCiAgfQogIHJldHVybiBsZW5ndGggfCAwCn0KCmZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkgewogIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcQogICAgbGVuZ3RoID0gMAogIH0KICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpCn0KCkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7CiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcikKfQoKQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpCiAgfQoKICBpZiAoYSA9PT0gYikgcmV0dXJuIDAKCiAgdmFyIHggPSBhLmxlbmd0aAogIHZhciB5ID0gYi5sZW5ndGgKCiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHsKICAgIGlmIChhW2ldICE9PSBiW2ldKSB7CiAgICAgIHggPSBhW2ldCiAgICAgIHkgPSBiW2ldCiAgICAgIGJyZWFrCiAgICB9CiAgfQoKICBpZiAoeCA8IHkpIHJldHVybiAtMQogIGlmICh5IDwgeCkgcmV0dXJuIDEKICByZXR1cm4gMAp9CgpCdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7CiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHsKICAgIGNhc2UgJ2hleCc6CiAgICBjYXNlICd1dGY4JzoKICAgIGNhc2UgJ3V0Zi04JzoKICAgIGNhc2UgJ2FzY2lpJzoKICAgIGNhc2UgJ2JpbmFyeSc6CiAgICBjYXNlICdiYXNlNjQnOgogICAgY2FzZSAncmF3JzoKICAgIGNhc2UgJ3VjczInOgogICAgY2FzZSAndWNzLTInOgogICAgY2FzZSAndXRmMTZsZSc6CiAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgIHJldHVybiB0cnVlCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gZmFsc2UKICB9Cn0KCkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkgewogIGlmICghaXNBcnJheShsaXN0KSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpCiAgfQoKICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiBCdWZmZXIuYWxsb2MoMCkKICB9CgogIHZhciBpCiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7CiAgICBsZW5ndGggPSAwCiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkgewogICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGgKICAgIH0KICB9CgogIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKQogIHZhciBwb3MgPSAwCiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKICAgIHZhciBidWYgPSBsaXN0W2ldCiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKQogICAgfQogICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpCiAgICBwb3MgKz0gYnVmLmxlbmd0aAogIH0KICByZXR1cm4gYnVmZmVyCn0KCmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHsKICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHsKICAgIHJldHVybiBzdHJpbmcubGVuZ3RoCiAgfQogIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiYKICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkgewogICAgcmV0dXJuIHN0cmluZy5ieXRlTGVuZ3RoCiAgfQogIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgewogICAgc3RyaW5nID0gJycgKyBzdHJpbmcKICB9CgogIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoCiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDAKCiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uCiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2UKICBmb3IgKDs7KSB7CiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CiAgICAgIGNhc2UgJ2FzY2lpJzoKICAgICAgY2FzZSAnYmluYXJ5JzoKICAgICAgY2FzZSAncmF3JzoKICAgICAgY2FzZSAncmF3cyc6CiAgICAgICAgcmV0dXJuIGxlbgogICAgICBjYXNlICd1dGY4JzoKICAgICAgY2FzZSAndXRmLTgnOgogICAgICBjYXNlIHVuZGVmaW5lZDoKICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGgKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gbGVuICogMgogICAgICBjYXNlICdoZXgnOgogICAgICAgIHJldHVybiBsZW4gPj4+IDEKICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aAogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4CiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKQogICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZQogICAgfQogIH0KfQpCdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGgKCmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHsKICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZQoKICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0ICJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5CiAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS4KCiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kCiAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLgogIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sCiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uCiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7CiAgICBzdGFydCA9IDAKICB9CiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzIKICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LgogIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7CiAgICByZXR1cm4gJycKICB9CgogIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgewogICAgZW5kID0gdGhpcy5sZW5ndGgKICB9CgogIGlmIChlbmQgPD0gMCkgewogICAgcmV0dXJuICcnCiAgfQoKICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLgogIGVuZCA+Pj49IDAKICBzdGFydCA+Pj49IDAKCiAgaWYgKGVuZCA8PSBzdGFydCkgewogICAgcmV0dXJuICcnCiAgfQoKICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JwoKICB3aGlsZSAodHJ1ZSkgewogICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICBjYXNlICdoZXgnOgogICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAndXRmOCc6CiAgICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBjYXNlICdhc2NpaSc6CiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgcmV0dXJuIGJpbmFyeVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKQogICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKCkKICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKICAgIH0KICB9Cn0KCi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0Ci8vIEJ1ZmZlciBpbnN0YW5jZXMuCkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZQoKZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkgewogIHZhciBpID0gYltuXQogIGJbbl0gPSBiW21dCiAgYlttXSA9IGkKfQoKQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkgewogIHZhciBsZW4gPSB0aGlzLmxlbmd0aAogIGlmIChsZW4gJSAyICE9PSAwKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKQogIH0KICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7CiAgICBzd2FwKHRoaXMsIGksIGkgKyAxKQogIH0KICByZXR1cm4gdGhpcwp9CgpCdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7CiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoCiAgaWYgKGxlbiAlIDQgIT09IDApIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpCiAgfQogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHsKICAgIHN3YXAodGhpcywgaSwgaSArIDMpCiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMikKICB9CiAgcmV0dXJuIHRoaXMKfQoKQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHsKICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwCiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKQogIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKQp9CgpCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJykKICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWUKICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDAKfQoKQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7CiAgdmFyIHN0ciA9ICcnCiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMKICBpZiAodGhpcy5sZW5ndGggPiAwKSB7CiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKQogICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJwogIH0KICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+Jwp9CgpCdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKQogIH0KCiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHsKICAgIHN0YXJ0ID0gMAogIH0KICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHsKICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwCiAgfQogIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkgewogICAgdGhpc1N0YXJ0ID0gMAogIH0KICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7CiAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGgKICB9CgogIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpCiAgfQoKICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7CiAgICByZXR1cm4gMAogIH0KICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHsKICAgIHJldHVybiAtMQogIH0KICBpZiAoc3RhcnQgPj0gZW5kKSB7CiAgICByZXR1cm4gMQogIH0KCiAgc3RhcnQgPj4+PSAwCiAgZW5kID4+Pj0gMAogIHRoaXNTdGFydCA+Pj49IDAKICB0aGlzRW5kID4+Pj0gMAoKICBpZiAodGhpcyA9PT0gdGFyZ2V0KSByZXR1cm4gMAoKICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnQKICB2YXIgeSA9IGVuZCAtIHN0YXJ0CiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpCgogIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKQogIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpCgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHsKICAgIGlmICh0aGlzQ29weVtpXSAhPT0gdGFyZ2V0Q29weVtpXSkgewogICAgICB4ID0gdGhpc0NvcHlbaV0KICAgICAgeSA9IHRhcmdldENvcHlbaV0KICAgICAgYnJlYWsKICAgIH0KICB9CgogIGlmICh4IDwgeSkgcmV0dXJuIC0xCiAgaWYgKHkgPCB4KSByZXR1cm4gMQogIHJldHVybiAwCn0KCmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgdmFyIGluZGV4U2l6ZSA9IDEKICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aAogIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoCgogIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7CiAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKQogICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHwKICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7CiAgICAgIGlmIChhcnIubGVuZ3RoIDwgMiB8fCB2YWwubGVuZ3RoIDwgMikgewogICAgICAgIHJldHVybiAtMQogICAgICB9CiAgICAgIGluZGV4U2l6ZSA9IDIKICAgICAgYXJyTGVuZ3RoIC89IDIKICAgICAgdmFsTGVuZ3RoIC89IDIKICAgICAgYnl0ZU9mZnNldCAvPSAyCiAgICB9CiAgfQoKICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHsKICAgIGlmIChpbmRleFNpemUgPT09IDEpIHsKICAgICAgcmV0dXJuIGJ1ZltpXQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSkKICAgIH0KICB9CgogIHZhciBmb3VuZEluZGV4ID0gLTEKICBmb3IgKHZhciBpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgKytpKSB7CiAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7CiAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGkKICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZQogICAgfSBlbHNlIHsKICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4CiAgICAgIGZvdW5kSW5kZXggPSAtMQogICAgfQogIH0KCiAgcmV0dXJuIC0xCn0KCkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7CiAgICBlbmNvZGluZyA9IGJ5dGVPZmZzZXQKICAgIGJ5dGVPZmZzZXQgPSAwCiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikgewogICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmYKICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgewogICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwCiAgfQogIGJ5dGVPZmZzZXQgPj49IDAKCiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gLTEKICBpZiAoYnl0ZU9mZnNldCA+PSB0aGlzLmxlbmd0aCkgcmV0dXJuIC0xCgogIC8vIE5lZ2F0aXZlIG9mZnNldHMgc3RhcnQgZnJvbSB0aGUgZW5kIG9mIHRoZSBidWZmZXIKICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBNYXRoLm1heCh0aGlzLmxlbmd0aCArIGJ5dGVPZmZzZXQsIDApCgogIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewogICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZykKICB9CgogIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkgewogICAgLy8gc3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlscwogICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIC0xCiAgICB9CiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpCiAgfQogIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewogICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpCiAgICB9CiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIFsgdmFsIF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nKQogIH0KCiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJykKfQoKQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgcmV0dXJuIHRoaXMuaW5kZXhPZih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSAhPT0gLTEKfQoKZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDAKICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldAogIGlmICghbGVuZ3RoKSB7CiAgICBsZW5ndGggPSByZW1haW5pbmcKICB9IGVsc2UgewogICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aCkKICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHsKICAgICAgbGVuZ3RoID0gcmVtYWluaW5nCiAgICB9CiAgfQoKICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0cwogIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoCiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJykKCiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHsKICAgIGxlbmd0aCA9IHN0ckxlbiAvIDIKICB9CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNikKICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaQogICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkCiAgfQogIHJldHVybiBpCn0KCmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKfQoKZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIGJpbmFyeVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykgewogIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpCiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7CiAgICBlbmNvZGluZyA9ICd1dGY4JwogICAgbGVuZ3RoID0gdGhpcy5sZW5ndGgKICAgIG9mZnNldCA9IDAKICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZykKICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7CiAgICBlbmNvZGluZyA9IG9mZnNldAogICAgbGVuZ3RoID0gdGhpcy5sZW5ndGgKICAgIG9mZnNldCA9IDAKICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKQogIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkgewogICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHsKICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMAogICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCcKICAgIH0gZWxzZSB7CiAgICAgIGVuY29kaW5nID0gbGVuZ3RoCiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZAogICAgfQogIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTMKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnCiAgICApCiAgfQoKICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXQKICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmcKCiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpCiAgfQoKICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JwoKICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZQogIGZvciAoOzspIHsKICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKICAgICAgY2FzZSAnaGV4JzoKICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICBjYXNlICd1dGYtOCc6CiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAnYXNjaWknOgogICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBjYXNlICdiaW5hcnknOgogICAgICAgIHJldHVybiBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZQogICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKQogICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkKICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKICAgIH0KICB9Cn0KCkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKICByZXR1cm4gewogICAgdHlwZTogJ0J1ZmZlcicsCiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMCkKICB9Cn0KCmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7CiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKQogIH0gZWxzZSB7CiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKQogIH0KfQoKZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpCiAgdmFyIHJlcyA9IFtdCgogIHZhciBpID0gc3RhcnQKICB3aGlsZSAoaSA8IGVuZCkgewogICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXQogICAgdmFyIGNvZGVQb2ludCA9IG51bGwKICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNAogICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDMKICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyCiAgICAgIDogMQoKICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHsKICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludAoKICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHsKICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlCiAgICAgICAgICB9CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRikKICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpCiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHsKICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV0KICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl0KICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRikKICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGEKICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZQogICAgICBjb2RlUG9pbnQgPSAweEZGRkQKICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDEKICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7CiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpCiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwCiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCkKICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkYKICAgIH0KCiAgICByZXMucHVzaChjb2RlUG9pbnQpCiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2UKICB9CgogIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKQp9CgovLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGgKLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLgovLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5CnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMAoKZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7CiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoCiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkgewogICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpCiAgfQoKICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkICJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWQiLgogIHZhciByZXMgPSAnJwogIHZhciBpID0gMAogIHdoaWxlIChpIDwgbGVuKSB7CiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSgKICAgICAgU3RyaW5nLAogICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpCiAgICApCiAgfQogIHJldHVybiByZXMKfQoKZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgdmFyIHJldCA9ICcnCiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKQoKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewogICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RikKICB9CiAgcmV0dXJuIHJldAp9CgpmdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgdmFyIHJldCA9ICcnCiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKQoKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewogICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKQogIH0KICByZXR1cm4gcmV0Cn0KCmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICB2YXIgbGVuID0gYnVmLmxlbmd0aAoKICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwCiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlbgoKICB2YXIgb3V0ID0gJycKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewogICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSkKICB9CiAgcmV0dXJuIG91dAp9CgpmdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKQogIHZhciByZXMgPSAnJwogIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KQogIH0KICByZXR1cm4gcmVzCn0KCkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkgewogIHZhciBsZW4gPSB0aGlzLmxlbmd0aAogIHN0YXJ0ID0gfn5zdGFydAogIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmQKCiAgaWYgKHN0YXJ0IDwgMCkgewogICAgc3RhcnQgKz0gbGVuCiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDAKICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7CiAgICBzdGFydCA9IGxlbgogIH0KCiAgaWYgKGVuZCA8IDApIHsKICAgIGVuZCArPSBsZW4KICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwCiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHsKICAgIGVuZCA9IGxlbgogIH0KCiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydAoKICB2YXIgbmV3QnVmCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpCiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZQogIH0gZWxzZSB7CiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydAogICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgKytpKSB7CiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XQogICAgfQogIH0KCiAgcmV0dXJuIG5ld0J1Zgp9CgovKgogKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy4KICovCmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7CiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JykKICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XQogIHZhciBtdWwgPSAxCiAgdmFyIGkgPSAwCiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsCiAgfQoKICByZXR1cm4gdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgewogICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKICB9CgogIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0KICB2YXIgbXVsID0gMQogIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bAogIH0KCiAgcmV0dXJuIHZhbAp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIHRoaXNbb2Zmc2V0XQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCkKICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV0KfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQoKICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfAogICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICsKICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICsKICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAogICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfAogICAgdGhpc1tvZmZzZXQgKyAzXSkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XQogIHZhciBtdWwgPSAxCiAgdmFyIGkgPSAwCiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsCiAgfQogIG11bCAqPSAweDgwCgogIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpCgogIHJldHVybiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKCiAgdmFyIGkgPSBieXRlTGVuZ3RoCiAgdmFyIG11bCA9IDEKICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldCiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsCiAgfQogIG11bCAqPSAweDgwCgogIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpCgogIHJldHVybiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCkKICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pCiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpCiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbAp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQogIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KQogIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHwKICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8CiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNCkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHwKICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8CiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8CiAgICAodGhpc1tvZmZzZXQgKyAzXSkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNCkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKQogIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOCkKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKQogIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpCn0KCmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmZmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJykKICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKQogIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJykKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDEKICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKQogIH0KCiAgdmFyIG11bCA9IDEKICB2YXIgaSA9IDAKICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkYKICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGCiAgfQoKICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgewogICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMQogICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApCiAgfQoKICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxCiAgdmFyIG11bCA9IDEKICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGCiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkYKICB9CgogIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMCkKICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpCiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICByZXR1cm4gb2Zmc2V0ICsgMQp9CgpmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHsKICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMQogIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHsKICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+CiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOAogIH0KfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDIKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCiAgfQogIHJldHVybiBvZmZzZXQgKyAyCn0KCmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikgewogIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMQogIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHsKICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmYKICB9Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KQogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNCkKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSB7CiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpCgogICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpCiAgfQoKICB2YXIgaSA9IDAKICB2YXIgbXVsID0gMQogIHZhciBzdWIgPSAwCiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGCiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7CiAgICAgIHN1YiA9IDEKICAgIH0KICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkYKICB9CgogIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgewogICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKQoKICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KQogIH0KCiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMQogIHZhciBtdWwgPSAxCiAgdmFyIHN1YiA9IDAKICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGCiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkgewogICAgICBzdWIgPSAxCiAgICB9CiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGCiAgfQoKICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MCkKICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpCiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxCiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICByZXR1cm4gb2Zmc2V0ICsgMQp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDIKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgMgp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpCiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNCkKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApCiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpCiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KQogICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgNAp9CgpmdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikgewogIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJykKICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCn0KCmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIHsKICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KQogIH0KICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNCkKICByZXR1cm4gb2Zmc2V0ICsgNAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydCkKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KQp9CgpmdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgewogICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCkKICB9CiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpCiAgcmV0dXJuIG9mZnNldCArIDgKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCkKfQoKLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKQpCdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7CiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwCiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aAogIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGgKICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDAKICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQKCiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lCiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwCiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwCgogIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnMKICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpCiAgfQogIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJykKICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJykKCiAgLy8gQXJlIHdlIG9vYj8KICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoCiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7CiAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydAogIH0KCiAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0CiAgdmFyIGkKCiAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7CiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmQKICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdCiAgICB9CiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgLy8gYXNjZW5kaW5nIGNvcHkgZnJvbSBzdGFydAogICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7CiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdCiAgICB9CiAgfSBlbHNlIHsKICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKAogICAgICB0YXJnZXQsCiAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSwKICAgICAgdGFyZ2V0U3RhcnQKICAgICkKICB9CgogIHJldHVybiBsZW4KfQoKLy8gVXNhZ2U6Ci8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKQovLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSkKLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pCkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHsKICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOgogIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewogICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHsKICAgICAgZW5jb2RpbmcgPSBzdGFydAogICAgICBzdGFydCA9IDAKICAgICAgZW5kID0gdGhpcy5sZW5ndGgKICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHsKICAgICAgZW5jb2RpbmcgPSBlbmQKICAgICAgZW5kID0gdGhpcy5sZW5ndGgKICAgIH0KICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7CiAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMCkKICAgICAgaWYgKGNvZGUgPCAyNTYpIHsKICAgICAgICB2YWwgPSBjb2RlCiAgICAgIH0KICAgIH0KICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpCiAgICB9CiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKICAgIH0KICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICB2YWwgPSB2YWwgJiAyNTUKICB9CgogIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LgogIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ091dCBvZiByYW5nZSBpbmRleCcpCiAgfQoKICBpZiAoZW5kIDw9IHN0YXJ0KSB7CiAgICByZXR1cm4gdGhpcwogIH0KCiAgc3RhcnQgPSBzdGFydCA+Pj4gMAogIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDAKCiAgaWYgKCF2YWwpIHZhbCA9IDAKCiAgdmFyIGkKICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgICAgdGhpc1tpXSA9IHZhbAogICAgfQogIH0gZWxzZSB7CiAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKQogICAgICA/IHZhbAogICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSkKICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGgKICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7CiAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dCiAgICB9CiAgfQoKICByZXR1cm4gdGhpcwp9CgovLyBIRUxQRVIgRlVOQ1RJT05TCi8vID09PT09PT09PT09PT09PT0KCnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcLzAtOUEtWmEtei1fXS9nCgpmdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7CiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxuIGFuZCBcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdAogIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJykKICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnCiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJycKICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3QKICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHsKICAgIHN0ciA9IHN0ciArICc9JwogIH0KICByZXR1cm4gc3RyCn0KCmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikgewogIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKCkKICByZXR1cm4gc3RyLnJlcGxhY2UoL15ccyt8XHMrJC9nLCAnJykKfQoKZnVuY3Rpb24gdG9IZXggKG4pIHsKICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNikKICByZXR1cm4gbi50b1N0cmluZygxNikKfQoKZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHsKICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5CiAgdmFyIGNvZGVQb2ludAogIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoCiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsCiAgdmFyIGJ5dGVzID0gW10KCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSkKCiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50CiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkgewogICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZAogICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHsKICAgICAgICAvLyBubyBsZWFkIHlldAogICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHsKICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWwKICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKQogICAgICAgICAgY29udGludWUKICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHsKICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWQKICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKQogICAgICAgICAgY29udGludWUKICAgICAgICB9CgogICAgICAgIC8vIHZhbGlkIGxlYWQKICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50CgogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KCiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3cKICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkgewogICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKQogICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQKICAgICAgICBjb250aW51ZQogICAgICB9CgogICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpcgogICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwCiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHsKICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZAogICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKICAgIH0KCiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbAoKICAgIC8vIGVuY29kZSB1dGY4CiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkgewogICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWsKICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpCiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7CiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVhawogICAgICBieXRlcy5wdXNoKAogICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLAogICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCiAgICAgICkKICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkgewogICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWsKICAgICAgYnl0ZXMucHVzaCgKICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCwKICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsCiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKICAgICAgKQogICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkgewogICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWsKICAgICAgYnl0ZXMucHVzaCgKICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsCiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLAogICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCwKICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAogICAgICApCiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpCiAgICB9CiAgfQoKICByZXR1cm4gYnl0ZXMKfQoKZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHsKICB2YXIgYnl0ZUFycmF5ID0gW10KICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkgewogICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uCiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpCiAgfQogIHJldHVybiBieXRlQXJyYXkKfQoKZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHsKICB2YXIgYywgaGksIGxvCiAgdmFyIGJ5dGVBcnJheSA9IFtdCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVhawoKICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKQogICAgaGkgPSBjID4+IDgKICAgIGxvID0gYyAlIDI1NgogICAgYnl0ZUFycmF5LnB1c2gobG8pCiAgICBieXRlQXJyYXkucHVzaChoaSkKICB9CgogIHJldHVybiBieXRlQXJyYXkKfQoKZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7CiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKQp9CgpmdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrCiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV0KICB9CiAgcmV0dXJuIGkKfQoKZnVuY3Rpb24gaXNuYW4gKHZhbCkgewogIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZQp9Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7ImJhc2U2NC1qcyI6NTA1LCJpZWVlNzU0Ijo1MDYsImlzYXJyYXkiOjUwN31dLDUwNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JwoKZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5CmV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXkKCnZhciBsb29rdXAgPSBbXQp2YXIgcmV2TG9va3VwID0gW10KdmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheQoKZnVuY3Rpb24gaW5pdCAoKSB7CiAgdmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycKICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgbG9va3VwW2ldID0gY29kZVtpXQogICAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpCiAgfQoKICByZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjIKICByZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjMKfQoKaW5pdCgpCgpmdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7CiAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnIKICB2YXIgbGVuID0gYjY0Lmxlbmd0aAoKICBpZiAobGVuICUgNCA+IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpCiAgfQoKICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKQogIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXQKICAvLyByZXByZXNlbnQgb25lIGJ5dGUKICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXMKICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlCiAgcGxhY2VIb2xkZXJzID0gYjY0W2xlbiAtIDJdID09PSAnPScgPyAyIDogYjY0W2xlbiAtIDFdID09PSAnPScgPyAxIDogMAoKICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKQoKICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzCiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuCgogIHZhciBMID0gMAoKICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7CiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV0KICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGCiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHsKICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkgewogICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpCiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIHJldHVybiBhcnIKfQoKZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHsKICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl0KfQoKZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7CiAgdmFyIHRtcAogIHZhciBvdXRwdXQgPSBbXQogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7CiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pCiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSkKICB9CiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQp9CgpmdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkgewogIHZhciB0bXAKICB2YXIgbGVuID0gdWludDgubGVuZ3RoCiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzCiAgdmFyIG91dHB1dCA9ICcnCiAgdmFyIHBhcnRzID0gW10KICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDMKCiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlcgogIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHsKICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpCiAgfQoKICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzCiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXQogICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl0KICAgIG91dHB1dCArPSAnPT0nCiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7CiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF0KICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdCiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXQogICAgb3V0cHV0ICs9ICc9JwogIH0KCiAgcGFydHMucHVzaChvdXRwdXQpCgogIHJldHVybiBwYXJ0cy5qb2luKCcnKQp9Cgp9LHt9XSw1MDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykgewogIHZhciBlLCBtCiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEKICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMQogIHZhciBlQmlhcyA9IGVNYXggPj4gMQogIHZhciBuQml0cyA9IC03CiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMAogIHZhciBkID0gaXNMRSA/IC0xIDogMQogIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldCgogIGkgKz0gZAoKICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKQogIHMgPj49ICgtbkJpdHMpCiAgbkJpdHMgKz0gZUxlbgogIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgogIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpCiAgZSA+Pj0gKC1uQml0cykKICBuQml0cyArPSBtTGVuCiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge30KCiAgaWYgKGUgPT09IDApIHsKICAgIGUgPSAxIC0gZUJpYXMKICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHsKICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KQogIH0gZWxzZSB7CiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pCiAgICBlID0gZSAtIGVCaWFzCiAgfQogIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pCn0KCmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKICB2YXIgZSwgbSwgYwogIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxCiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDEKICB2YXIgZUJpYXMgPSBlTWF4ID4+IDEKICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApCiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKQogIHZhciBkID0gaXNMRSA/IDEgOiAtMQogIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwCgogIHZhbHVlID0gTWF0aC5hYnModmFsdWUpCgogIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7CiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDAKICAgIGUgPSBlTWF4CiAgfSBlbHNlIHsKICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKQogICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkgewogICAgICBlLS0KICAgICAgYyAqPSAyCiAgICB9CiAgICBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgdmFsdWUgKz0gcnQgLyBjCiAgICB9IGVsc2UgewogICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcykKICAgIH0KICAgIGlmICh2YWx1ZSAqIGMgPj0gMikgewogICAgICBlKysKICAgICAgYyAvPSAyCiAgICB9CgogICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CiAgICAgIG0gPSAwCiAgICAgIGUgPSBlTWF4CiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7CiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKQogICAgICBlID0gZSArIGVCaWFzCiAgICB9IGVsc2UgewogICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbikKICAgICAgZSA9IDAKICAgIH0KICB9CgogIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9CgogIGUgPSAoZSA8PCBtTGVuKSB8IG0KICBlTGVuICs9IG1MZW4KICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9CgogIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOAp9Cgp9LHt9XSw1MDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZzsKCm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7CiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nOwp9OwoKfSx7fV0sNTA4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnCgpleHBvcnRzLnJhbmRvbUJ5dGVzID0gZXhwb3J0cy5ybmcgPSBleHBvcnRzLnBzZXVkb1JhbmRvbUJ5dGVzID0gZXhwb3J0cy5wcm5nID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKQpleHBvcnRzLmNyZWF0ZUhhc2ggPSBleHBvcnRzLkhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCmV4cG9ydHMuY3JlYXRlSG1hYyA9IGV4cG9ydHMuSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKCnZhciBoYXNoZXMgPSBbJ3NoYTEnLCAnc2hhMjI0JywgJ3NoYTI1NicsICdzaGEzODQnLCAnc2hhNTEyJywgJ21kNScsICdybWQxNjAnXS5jb25jYXQoT2JqZWN0LmtleXMocmVxdWlyZSgnYnJvd3NlcmlmeS1zaWduL2FsZ29zJykpKQpleHBvcnRzLmdldEhhc2hlcyA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gaGFzaGVzCn0KCnZhciBwID0gcmVxdWlyZSgncGJrZGYyJykKZXhwb3J0cy5wYmtkZjIgPSBwLnBia2RmMgpleHBvcnRzLnBia2RmMlN5bmMgPSBwLnBia2RmMlN5bmMKCnZhciBhZXMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWNpcGhlcicpCjtbCiAgJ0NpcGhlcicsCiAgJ2NyZWF0ZUNpcGhlcicsCiAgJ0NpcGhlcml2JywKICAnY3JlYXRlQ2lwaGVyaXYnLAogICdEZWNpcGhlcicsCiAgJ2NyZWF0ZURlY2lwaGVyJywKICAnRGVjaXBoZXJpdicsCiAgJ2NyZWF0ZURlY2lwaGVyaXYnLAogICdnZXRDaXBoZXJzJywKICAnbGlzdENpcGhlcnMnCl0uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgZXhwb3J0c1trZXldID0gYWVzW2tleV0KfSkKCnZhciBkaCA9IHJlcXVpcmUoJ2RpZmZpZS1oZWxsbWFuJykKO1sKICAnRGlmZmllSGVsbG1hbkdyb3VwJywKICAnY3JlYXRlRGlmZmllSGVsbG1hbkdyb3VwJywKICAnZ2V0RGlmZmllSGVsbG1hbicsCiAgJ2NyZWF0ZURpZmZpZUhlbGxtYW4nLAogICdEaWZmaWVIZWxsbWFuJwpdLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogIGV4cG9ydHNba2V5XSA9IGRoW2tleV0KfSkKCnZhciBzaWduID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1zaWduJykKO1sKICAnY3JlYXRlU2lnbicsCiAgJ1NpZ24nLAogICdjcmVhdGVWZXJpZnknLAogICdWZXJpZnknCl0uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgZXhwb3J0c1trZXldID0gc2lnbltrZXldCn0pCgpleHBvcnRzLmNyZWF0ZUVDREggPSByZXF1aXJlKCdjcmVhdGUtZWNkaCcpCgp2YXIgcHVibGljRW5jcnlwdCA9IHJlcXVpcmUoJ3B1YmxpYy1lbmNyeXB0JykKCjtbCiAgJ3B1YmxpY0VuY3J5cHQnLAogICdwcml2YXRlRW5jcnlwdCcsCiAgJ3B1YmxpY0RlY3J5cHQnLAogICdwcml2YXRlRGVjcnlwdCcKXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICBleHBvcnRzW2tleV0gPSBwdWJsaWNFbmNyeXB0W2tleV0KfSkKCi8vIHRoZSBsZWFzdCBJIGNhbiBkbyBpcyBtYWtlIGVycm9yIG1lc3NhZ2VzIGZvciB0aGUgcmVzdCBvZiB0aGUgbm9kZS5qcy9jcnlwdG8gYXBpLgo7WwogICdjcmVhdGVDcmVkZW50aWFscycKXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgZXhwb3J0c1tuYW1lXSA9IGZ1bmN0aW9uICgpIHsKICAgIHRocm93IG5ldyBFcnJvcihbCiAgICAgICdzb3JyeSwgJyArIG5hbWUgKyAnIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQnLAogICAgICAnd2UgYWNjZXB0IHB1bGwgcmVxdWVzdHMnLAogICAgICAnaHR0cHM6Ly9naXRodWIuY29tL2NyeXB0by1icm93c2VyaWZ5L2NyeXB0by1icm93c2VyaWZ5JwogICAgXS5qb2luKCdcbicpKQogIH0KfSkKCn0seyJicm93c2VyaWZ5LWNpcGhlciI6NTA5LCJicm93c2VyaWZ5LXNpZ24iOjUzOSwiYnJvd3NlcmlmeS1zaWduL2FsZ29zIjo1MzgsImNyZWF0ZS1lY2RoIjo2MDYsImNyZWF0ZS1oYXNoIjo2MzIsImNyZWF0ZS1obWFjIjo2NDUsImRpZmZpZS1oZWxsbWFuIjo2NDYsInBia2RmMiI6NjUzLCJwdWJsaWMtZW5jcnlwdCI6NjU0LCJyYW5kb21ieXRlcyI6Njk5fV0sNTA5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGVidGsgPSByZXF1aXJlKCdldnBfYnl0ZXN0b2tleScpCnZhciBhZXMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWFlcy9icm93c2VyJykKdmFyIERFUyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktZGVzJykKdmFyIGRlc01vZGVzID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1kZXMvbW9kZXMnKQp2YXIgYWVzTW9kZXMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWFlcy9tb2RlcycpCmZ1bmN0aW9uIGNyZWF0ZUNpcGhlciAoc3VpdGUsIHBhc3N3b3JkKSB7CiAgdmFyIGtleUxlbiwgaXZMZW4KICBzdWl0ZSA9IHN1aXRlLnRvTG93ZXJDYXNlKCkKICBpZiAoYWVzTW9kZXNbc3VpdGVdKSB7CiAgICBrZXlMZW4gPSBhZXNNb2Rlc1tzdWl0ZV0ua2V5CiAgICBpdkxlbiA9IGFlc01vZGVzW3N1aXRlXS5pdgogIH0gZWxzZSBpZiAoZGVzTW9kZXNbc3VpdGVdKSB7CiAgICBrZXlMZW4gPSBkZXNNb2Rlc1tzdWl0ZV0ua2V5ICogOAogICAgaXZMZW4gPSBkZXNNb2Rlc1tzdWl0ZV0uaXYKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgdmFyIGtleXMgPSBlYnRrKHBhc3N3b3JkLCBmYWxzZSwga2V5TGVuLCBpdkxlbikKICByZXR1cm4gY3JlYXRlQ2lwaGVyaXYoc3VpdGUsIGtleXMua2V5LCBrZXlzLml2KQp9CmZ1bmN0aW9uIGNyZWF0ZURlY2lwaGVyIChzdWl0ZSwgcGFzc3dvcmQpIHsKICB2YXIga2V5TGVuLCBpdkxlbgogIHN1aXRlID0gc3VpdGUudG9Mb3dlckNhc2UoKQogIGlmIChhZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIGtleUxlbiA9IGFlc01vZGVzW3N1aXRlXS5rZXkKICAgIGl2TGVuID0gYWVzTW9kZXNbc3VpdGVdLml2CiAgfSBlbHNlIGlmIChkZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIGtleUxlbiA9IGRlc01vZGVzW3N1aXRlXS5rZXkgKiA4CiAgICBpdkxlbiA9IGRlc01vZGVzW3N1aXRlXS5pdgogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KICB2YXIga2V5cyA9IGVidGsocGFzc3dvcmQsIGZhbHNlLCBrZXlMZW4sIGl2TGVuKQogIHJldHVybiBjcmVhdGVEZWNpcGhlcml2KHN1aXRlLCBrZXlzLmtleSwga2V5cy5pdikKfQoKZnVuY3Rpb24gY3JlYXRlQ2lwaGVyaXYgKHN1aXRlLCBrZXksIGl2KSB7CiAgc3VpdGUgPSBzdWl0ZS50b0xvd2VyQ2FzZSgpCiAgaWYgKGFlc01vZGVzW3N1aXRlXSkgewogICAgcmV0dXJuIGFlcy5jcmVhdGVDaXBoZXJpdihzdWl0ZSwga2V5LCBpdikKICB9IGVsc2UgaWYgKGRlc01vZGVzW3N1aXRlXSkgewogICAgcmV0dXJuIG5ldyBERVMoewogICAgICBrZXk6IGtleSwKICAgICAgaXY6IGl2LAogICAgICBtb2RlOiBzdWl0ZQogICAgfSkKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9Cn0KZnVuY3Rpb24gY3JlYXRlRGVjaXBoZXJpdiAoc3VpdGUsIGtleSwgaXYpIHsKICBzdWl0ZSA9IHN1aXRlLnRvTG93ZXJDYXNlKCkKICBpZiAoYWVzTW9kZXNbc3VpdGVdKSB7CiAgICByZXR1cm4gYWVzLmNyZWF0ZURlY2lwaGVyaXYoc3VpdGUsIGtleSwgaXYpCiAgfSBlbHNlIGlmIChkZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIHJldHVybiBuZXcgREVTKHsKICAgICAga2V5OiBrZXksCiAgICAgIGl2OiBpdiwKICAgICAgbW9kZTogc3VpdGUsCiAgICAgIGRlY3J5cHQ6IHRydWUKICAgIH0pCiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQp9CmV4cG9ydHMuY3JlYXRlQ2lwaGVyID0gZXhwb3J0cy5DaXBoZXIgPSBjcmVhdGVDaXBoZXIKZXhwb3J0cy5jcmVhdGVDaXBoZXJpdiA9IGV4cG9ydHMuQ2lwaGVyaXYgPSBjcmVhdGVDaXBoZXJpdgpleHBvcnRzLmNyZWF0ZURlY2lwaGVyID0gZXhwb3J0cy5EZWNpcGhlciA9IGNyZWF0ZURlY2lwaGVyCmV4cG9ydHMuY3JlYXRlRGVjaXBoZXJpdiA9IGV4cG9ydHMuRGVjaXBoZXJpdiA9IGNyZWF0ZURlY2lwaGVyaXYKZnVuY3Rpb24gZ2V0Q2lwaGVycyAoKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKGRlc01vZGVzKS5jb25jYXQoYWVzLmdldENpcGhlcnMoKSkKfQpleHBvcnRzLmxpc3RDaXBoZXJzID0gZXhwb3J0cy5nZXRDaXBoZXJzID0gZ2V0Q2lwaGVycwoKfSx7ImJyb3dzZXJpZnktYWVzL2Jyb3dzZXIiOjUxMiwiYnJvd3NlcmlmeS1hZXMvbW9kZXMiOjUxNiwiYnJvd3NlcmlmeS1kZXMiOjUyNywiYnJvd3NlcmlmeS1kZXMvbW9kZXMiOjUyOCwiZXZwX2J5dGVzdG9rZXkiOjUzN31dLDUxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gYmFzZWQgb24gdGhlIGFlcyBpbXBsaW1lbnRhdGlvbiBpbiB0cmlwbGUgc2VjCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9rZXliYXNlL3RyaXBsZXNlYwoKLy8gd2hpY2ggaXMgaW4gdHVybiBiYXNlZCBvbiB0aGUgb25lIGZyb20gY3J5cHRvLWpzCi8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzLwoKdmFyIHVpbnRfbWF4ID0gTWF0aC5wb3coMiwgMzIpCmZ1bmN0aW9uIGZpeHVwX3VpbnQzMiAoeCkgewogIHZhciByZXQsIHhfcG9zCiAgcmV0ID0geCA+IHVpbnRfbWF4IHx8IHggPCAwID8gKHhfcG9zID0gTWF0aC5hYnMoeCkgJSB1aW50X21heCwgeCA8IDAgPyB1aW50X21heCAtIHhfcG9zIDogeF9wb3MpIDogeAogIHJldHVybiByZXQKfQpmdW5jdGlvbiBzY3J1Yl92ZWMgKHYpIHsKICBmb3IgKHZhciBpID0gMDsgaSA8IHYubGVuZ3RoOyB2KyspIHsKICAgIHZbaV0gPSAwCiAgfQogIHJldHVybiBmYWxzZQp9CgpmdW5jdGlvbiBHbG9iYWwgKCkgewogIHRoaXMuU0JPWCA9IFtdCiAgdGhpcy5JTlZfU0JPWCA9IFtdCiAgdGhpcy5TVUJfTUlYID0gW1tdLCBbXSwgW10sIFtdXQogIHRoaXMuSU5WX1NVQl9NSVggPSBbW10sIFtdLCBbXSwgW11dCiAgdGhpcy5pbml0KCkKICB0aGlzLlJDT04gPSBbMHgwMCwgMHgwMSwgMHgwMiwgMHgwNCwgMHgwOCwgMHgxMCwgMHgyMCwgMHg0MCwgMHg4MCwgMHgxYiwgMHgzNl0KfQoKR2xvYmFsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHZhciBkLCBpLCBzeCwgdCwgeCwgeDIsIHg0LCB4OCwgeGksIF9pCiAgZCA9IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2ksIF9yZXN1bHRzCiAgICBfcmVzdWx0cyA9IFtdCiAgICBmb3IgKGkgPSBfaSA9IDA7IF9pIDwgMjU2OyBpID0gKytfaSkgewogICAgICBpZiAoaSA8IDEyOCkgewogICAgICAgIF9yZXN1bHRzLnB1c2goaSA8PCAxKQogICAgICB9IGVsc2UgewogICAgICAgIF9yZXN1bHRzLnB1c2goKGkgPDwgMSkgXiAweDExYikKICAgICAgfQogICAgfQogICAgcmV0dXJuIF9yZXN1bHRzCiAgfSkoKQogIHggPSAwCiAgeGkgPSAwCiAgZm9yIChpID0gX2kgPSAwOyBfaSA8IDI1NjsgaSA9ICsrX2kpIHsKICAgIHN4ID0geGkgXiAoeGkgPDwgMSkgXiAoeGkgPDwgMikgXiAoeGkgPDwgMykgXiAoeGkgPDwgNCkKICAgIHN4ID0gKHN4ID4+PiA4KSBeIChzeCAmIDB4ZmYpIF4gMHg2MwogICAgdGhpcy5TQk9YW3hdID0gc3gKICAgIHRoaXMuSU5WX1NCT1hbc3hdID0geAogICAgeDIgPSBkW3hdCiAgICB4NCA9IGRbeDJdCiAgICB4OCA9IGRbeDRdCiAgICB0ID0gKGRbc3hdICogMHgxMDEpIF4gKHN4ICogMHgxMDEwMTAwKQogICAgdGhpcy5TVUJfTUlYWzBdW3hdID0gKHQgPDwgMjQpIHwgKHQgPj4+IDgpCiAgICB0aGlzLlNVQl9NSVhbMV1beF0gPSAodCA8PCAxNikgfCAodCA+Pj4gMTYpCiAgICB0aGlzLlNVQl9NSVhbMl1beF0gPSAodCA8PCA4KSB8ICh0ID4+PiAyNCkKICAgIHRoaXMuU1VCX01JWFszXVt4XSA9IHQKICAgIHQgPSAoeDggKiAweDEwMTAxMDEpIF4gKHg0ICogMHgxMDAwMSkgXiAoeDIgKiAweDEwMSkgXiAoeCAqIDB4MTAxMDEwMCkKICAgIHRoaXMuSU5WX1NVQl9NSVhbMF1bc3hdID0gKHQgPDwgMjQpIHwgKHQgPj4+IDgpCiAgICB0aGlzLklOVl9TVUJfTUlYWzFdW3N4XSA9ICh0IDw8IDE2KSB8ICh0ID4+PiAxNikKICAgIHRoaXMuSU5WX1NVQl9NSVhbMl1bc3hdID0gKHQgPDwgOCkgfCAodCA+Pj4gMjQpCiAgICB0aGlzLklOVl9TVUJfTUlYWzNdW3N4XSA9IHQKICAgIGlmICh4ID09PSAwKSB7CiAgICAgIHggPSB4aSA9IDEKICAgIH0gZWxzZSB7CiAgICAgIHggPSB4MiBeIGRbZFtkW3g4IF4geDJdXV0KICAgICAgeGkgXj0gZFtkW3hpXV0KICAgIH0KICB9CiAgcmV0dXJuIHRydWUKfQoKdmFyIEcgPSBuZXcgR2xvYmFsKCkKCkFFUy5ibG9ja1NpemUgPSA0ICogNAoKQUVTLnByb3RvdHlwZS5ibG9ja1NpemUgPSBBRVMuYmxvY2tTaXplCgpBRVMua2V5U2l6ZSA9IDI1NiAvIDgKCkFFUy5wcm90b3R5cGUua2V5U2l6ZSA9IEFFUy5rZXlTaXplCgpmdW5jdGlvbiBidWZmZXJUb0FycmF5IChidWYpIHsKICB2YXIgbGVuID0gYnVmLmxlbmd0aCAvIDQKICB2YXIgb3V0ID0gbmV3IEFycmF5KGxlbikKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgb3V0W2ldID0gYnVmLnJlYWRVSW50MzJCRShpICogNCkKICB9CiAgcmV0dXJuIG91dAp9CmZ1bmN0aW9uIEFFUyAoa2V5KSB7CiAgdGhpcy5fa2V5ID0gYnVmZmVyVG9BcnJheShrZXkpCiAgdGhpcy5fZG9SZXNldCgpCn0KCkFFUy5wcm90b3R5cGUuX2RvUmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGludktzUm93LCBrZXlTaXplLCBrZXlXb3Jkcywga3NSb3csIGtzUm93cywgdAogIGtleVdvcmRzID0gdGhpcy5fa2V5CiAga2V5U2l6ZSA9IGtleVdvcmRzLmxlbmd0aAogIHRoaXMuX25Sb3VuZHMgPSBrZXlTaXplICsgNgogIGtzUm93cyA9ICh0aGlzLl9uUm91bmRzICsgMSkgKiA0CiAgdGhpcy5fa2V5U2NoZWR1bGUgPSBbXQogIGZvciAoa3NSb3cgPSAwOyBrc1JvdyA8IGtzUm93czsga3NSb3crKykgewogICAgdGhpcy5fa2V5U2NoZWR1bGVba3NSb3ddID0ga3NSb3cgPCBrZXlTaXplID8ga2V5V29yZHNba3NSb3ddIDogKHQgPSB0aGlzLl9rZXlTY2hlZHVsZVtrc1JvdyAtIDFdLCAoa3NSb3cgJSBrZXlTaXplKSA9PT0gMCA/ICh0ID0gKHQgPDwgOCkgfCAodCA+Pj4gMjQpLCB0ID0gKEcuU0JPWFt0ID4+PiAyNF0gPDwgMjQpIHwgKEcuU0JPWFsodCA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKEcuU0JPWFsodCA+Pj4gOCkgJiAweGZmXSA8PCA4KSB8IEcuU0JPWFt0ICYgMHhmZl0sIHQgXj0gRy5SQ09OWyhrc1JvdyAvIGtleVNpemUpIHwgMF0gPDwgMjQpIDoga2V5U2l6ZSA+IDYgJiYga3NSb3cgJSBrZXlTaXplID09PSA0ID8gdCA9IChHLlNCT1hbdCA+Pj4gMjRdIDw8IDI0KSB8IChHLlNCT1hbKHQgPj4+IDE2KSAmIDB4ZmZdIDw8IDE2KSB8IChHLlNCT1hbKHQgPj4+IDgpICYgMHhmZl0gPDwgOCkgfCBHLlNCT1hbdCAmIDB4ZmZdIDogdm9pZCAwLCB0aGlzLl9rZXlTY2hlZHVsZVtrc1JvdyAtIGtleVNpemVdIF4gdCkKICB9CiAgdGhpcy5faW52S2V5U2NoZWR1bGUgPSBbXQogIGZvciAoaW52S3NSb3cgPSAwOyBpbnZLc1JvdyA8IGtzUm93czsgaW52S3NSb3crKykgewogICAga3NSb3cgPSBrc1Jvd3MgLSBpbnZLc1JvdwogICAgdCA9IHRoaXMuX2tleVNjaGVkdWxlW2tzUm93IC0gKGludktzUm93ICUgNCA/IDAgOiA0KV0KICAgIHRoaXMuX2ludktleVNjaGVkdWxlW2ludktzUm93XSA9IGludktzUm93IDwgNCB8fCBrc1JvdyA8PSA0ID8gdCA6IEcuSU5WX1NVQl9NSVhbMF1bRy5TQk9YW3QgPj4+IDI0XV0gXiBHLklOVl9TVUJfTUlYWzFdW0cuU0JPWFsodCA+Pj4gMTYpICYgMHhmZl1dIF4gRy5JTlZfU1VCX01JWFsyXVtHLlNCT1hbKHQgPj4+IDgpICYgMHhmZl1dIF4gRy5JTlZfU1VCX01JWFszXVtHLlNCT1hbdCAmIDB4ZmZdXQogIH0KICByZXR1cm4gdHJ1ZQp9CgpBRVMucHJvdG90eXBlLmVuY3J5cHRCbG9jayA9IGZ1bmN0aW9uIChNKSB7CiAgTSA9IGJ1ZmZlclRvQXJyYXkobmV3IEJ1ZmZlcihNKSkKICB2YXIgb3V0ID0gdGhpcy5fZG9DcnlwdEJsb2NrKE0sIHRoaXMuX2tleVNjaGVkdWxlLCBHLlNVQl9NSVgsIEcuU0JPWCkKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcigxNikKICBidWYud3JpdGVVSW50MzJCRShvdXRbMF0sIDApCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzFdLCA0KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsyXSwgOCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbM10sIDEyKQogIHJldHVybiBidWYKfQoKQUVTLnByb3RvdHlwZS5kZWNyeXB0QmxvY2sgPSBmdW5jdGlvbiAoTSkgewogIE0gPSBidWZmZXJUb0FycmF5KG5ldyBCdWZmZXIoTSkpCiAgdmFyIHRlbXAgPSBbTVszXSwgTVsxXV0KICBNWzFdID0gdGVtcFswXQogIE1bM10gPSB0ZW1wWzFdCiAgdmFyIG91dCA9IHRoaXMuX2RvQ3J5cHRCbG9jayhNLCB0aGlzLl9pbnZLZXlTY2hlZHVsZSwgRy5JTlZfU1VCX01JWCwgRy5JTlZfU0JPWCkKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcigxNikKICBidWYud3JpdGVVSW50MzJCRShvdXRbMF0sIDApCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzNdLCA0KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsyXSwgOCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbMV0sIDEyKQogIHJldHVybiBidWYKfQoKQUVTLnByb3RvdHlwZS5zY3J1YiA9IGZ1bmN0aW9uICgpIHsKICBzY3J1Yl92ZWModGhpcy5fa2V5U2NoZWR1bGUpCiAgc2NydWJfdmVjKHRoaXMuX2ludktleVNjaGVkdWxlKQogIHNjcnViX3ZlYyh0aGlzLl9rZXkpCn0KCkFFUy5wcm90b3R5cGUuX2RvQ3J5cHRCbG9jayA9IGZ1bmN0aW9uIChNLCBrZXlTY2hlZHVsZSwgU1VCX01JWCwgU0JPWCkgewogIHZhciBrc1JvdywgczAsIHMxLCBzMiwgczMsIHQwLCB0MSwgdDIsIHQzCgogIHMwID0gTVswXSBeIGtleVNjaGVkdWxlWzBdCiAgczEgPSBNWzFdIF4ga2V5U2NoZWR1bGVbMV0KICBzMiA9IE1bMl0gXiBrZXlTY2hlZHVsZVsyXQogIHMzID0gTVszXSBeIGtleVNjaGVkdWxlWzNdCiAga3NSb3cgPSA0CiAgZm9yICh2YXIgcm91bmQgPSAxOyByb3VuZCA8IHRoaXMuX25Sb3VuZHM7IHJvdW5kKyspIHsKICAgIHQwID0gU1VCX01JWFswXVtzMCA+Pj4gMjRdIF4gU1VCX01JWFsxXVsoczEgPj4+IDE2KSAmIDB4ZmZdIF4gU1VCX01JWFsyXVsoczIgPj4+IDgpICYgMHhmZl0gXiBTVUJfTUlYWzNdW3MzICYgMHhmZl0gXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogICAgdDEgPSBTVUJfTUlYWzBdW3MxID4+PiAyNF0gXiBTVUJfTUlYWzFdWyhzMiA+Pj4gMTYpICYgMHhmZl0gXiBTVUJfTUlYWzJdWyhzMyA+Pj4gOCkgJiAweGZmXSBeIFNVQl9NSVhbM11bczAgJiAweGZmXSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgICB0MiA9IFNVQl9NSVhbMF1bczIgPj4+IDI0XSBeIFNVQl9NSVhbMV1bKHMzID4+PiAxNikgJiAweGZmXSBeIFNVQl9NSVhbMl1bKHMwID4+PiA4KSAmIDB4ZmZdIF4gU1VCX01JWFszXVtzMSAmIDB4ZmZdIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICAgIHQzID0gU1VCX01JWFswXVtzMyA+Pj4gMjRdIF4gU1VCX01JWFsxXVsoczAgPj4+IDE2KSAmIDB4ZmZdIF4gU1VCX01JWFsyXVsoczEgPj4+IDgpICYgMHhmZl0gXiBTVUJfTUlYWzNdW3MyICYgMHhmZl0gXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogICAgczAgPSB0MAogICAgczEgPSB0MQogICAgczIgPSB0MgogICAgczMgPSB0MwogIH0KICB0MCA9ICgoU0JPWFtzMCA+Pj4gMjRdIDw8IDI0KSB8IChTQk9YWyhzMSA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKFNCT1hbKHMyID4+PiA4KSAmIDB4ZmZdIDw8IDgpIHwgU0JPWFtzMyAmIDB4ZmZdKSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgdDEgPSAoKFNCT1hbczEgPj4+IDI0XSA8PCAyNCkgfCAoU0JPWFsoczIgPj4+IDE2KSAmIDB4ZmZdIDw8IDE2KSB8IChTQk9YWyhzMyA+Pj4gOCkgJiAweGZmXSA8PCA4KSB8IFNCT1hbczAgJiAweGZmXSkgXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogIHQyID0gKChTQk9YW3MyID4+PiAyNF0gPDwgMjQpIHwgKFNCT1hbKHMzID4+PiAxNikgJiAweGZmXSA8PCAxNikgfCAoU0JPWFsoczAgPj4+IDgpICYgMHhmZl0gPDwgOCkgfCBTQk9YW3MxICYgMHhmZl0pIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICB0MyA9ICgoU0JPWFtzMyA+Pj4gMjRdIDw8IDI0KSB8IChTQk9YWyhzMCA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKFNCT1hbKHMxID4+PiA4KSAmIDB4ZmZdIDw8IDgpIHwgU0JPWFtzMiAmIDB4ZmZdKSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgcmV0dXJuIFsKICAgIGZpeHVwX3VpbnQzMih0MCksCiAgICBmaXh1cF91aW50MzIodDEpLAogICAgZml4dXBfdWludDMyKHQyKSwKICAgIGZpeHVwX3VpbnQzMih0MykKICBdCn0KCmV4cG9ydHMuQUVTID0gQUVTCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDR9XSw1MTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBhZXMgPSByZXF1aXJlKCcuL2FlcycpCnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdjaXBoZXItYmFzZScpCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEdIQVNIID0gcmVxdWlyZSgnLi9naGFzaCcpCnZhciB4b3IgPSByZXF1aXJlKCdidWZmZXIteG9yJykKaW5oZXJpdHMoU3RyZWFtQ2lwaGVyLCBUcmFuc2Zvcm0pCm1vZHVsZS5leHBvcnRzID0gU3RyZWFtQ2lwaGVyCgpmdW5jdGlvbiBTdHJlYW1DaXBoZXIgKG1vZGUsIGtleSwgaXYsIGRlY3J5cHQpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU3RyZWFtQ2lwaGVyKSkgewogICAgcmV0dXJuIG5ldyBTdHJlYW1DaXBoZXIobW9kZSwga2V5LCBpdikKICB9CiAgVHJhbnNmb3JtLmNhbGwodGhpcykKICB0aGlzLl9maW5JRCA9IEJ1ZmZlci5jb25jYXQoW2l2LCBuZXcgQnVmZmVyKFswLCAwLCAwLCAxXSldKQogIGl2ID0gQnVmZmVyLmNvbmNhdChbaXYsIG5ldyBCdWZmZXIoWzAsIDAsIDAsIDJdKV0pCiAgdGhpcy5fY2lwaGVyID0gbmV3IGFlcy5BRVMoa2V5KQogIHRoaXMuX3ByZXYgPSBuZXcgQnVmZmVyKGl2Lmxlbmd0aCkKICB0aGlzLl9jYWNoZSA9IG5ldyBCdWZmZXIoJycpCiAgdGhpcy5fc2VjQ2FjaGUgPSBuZXcgQnVmZmVyKCcnKQogIHRoaXMuX2RlY3J5cHQgPSBkZWNyeXB0CiAgdGhpcy5fYWxlbiA9IDAKICB0aGlzLl9sZW4gPSAwCiAgaXYuY29weSh0aGlzLl9wcmV2KQogIHRoaXMuX21vZGUgPSBtb2RlCiAgdmFyIGggPSBuZXcgQnVmZmVyKDQpCiAgaC5maWxsKDApCiAgdGhpcy5fZ2hhc2ggPSBuZXcgR0hBU0godGhpcy5fY2lwaGVyLmVuY3J5cHRCbG9jayhoKSkKICB0aGlzLl9hdXRoVGFnID0gbnVsbAogIHRoaXMuX2NhbGxlZCA9IGZhbHNlCn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgaWYgKCF0aGlzLl9jYWxsZWQgJiYgdGhpcy5fYWxlbikgewogICAgdmFyIHJ1bXAgPSAxNiAtICh0aGlzLl9hbGVuICUgMTYpCiAgICBpZiAocnVtcCA8IDE2KSB7CiAgICAgIHJ1bXAgPSBuZXcgQnVmZmVyKHJ1bXApCiAgICAgIHJ1bXAuZmlsbCgwKQogICAgICB0aGlzLl9naGFzaC51cGRhdGUocnVtcCkKICAgIH0KICB9CiAgdGhpcy5fY2FsbGVkID0gdHJ1ZQogIHZhciBvdXQgPSB0aGlzLl9tb2RlLmVuY3J5cHQodGhpcywgY2h1bmspCiAgaWYgKHRoaXMuX2RlY3J5cHQpIHsKICAgIHRoaXMuX2doYXNoLnVwZGF0ZShjaHVuaykKICB9IGVsc2UgewogICAgdGhpcy5fZ2hhc2gudXBkYXRlKG91dCkKICB9CiAgdGhpcy5fbGVuICs9IGNodW5rLmxlbmd0aAogIHJldHVybiBvdXQKfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5fZGVjcnlwdCAmJiAhdGhpcy5fYXV0aFRhZykgewogICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBzdGF0ZSBvciB1bmFibGUgdG8gYXV0aGVudGljYXRlIGRhdGEnKQogIH0KICB2YXIgdGFnID0geG9yKHRoaXMuX2doYXNoLmZpbmFsKHRoaXMuX2FsZW4gKiA4LCB0aGlzLl9sZW4gKiA4KSwgdGhpcy5fY2lwaGVyLmVuY3J5cHRCbG9jayh0aGlzLl9maW5JRCkpCiAgaWYgKHRoaXMuX2RlY3J5cHQpIHsKICAgIGlmICh4b3JUZXN0KHRhZywgdGhpcy5fYXV0aFRhZykpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBzdGF0ZSBvciB1bmFibGUgdG8gYXV0aGVudGljYXRlIGRhdGEnKQogICAgfQogIH0gZWxzZSB7CiAgICB0aGlzLl9hdXRoVGFnID0gdGFnCiAgfQogIHRoaXMuX2NpcGhlci5zY3J1YigpCn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5nZXRBdXRoVGFnID0gZnVuY3Rpb24gZ2V0QXV0aFRhZyAoKSB7CiAgaWYgKCF0aGlzLl9kZWNyeXB0ICYmIEJ1ZmZlci5pc0J1ZmZlcih0aGlzLl9hdXRoVGFnKSkgewogICAgcmV0dXJuIHRoaXMuX2F1dGhUYWcKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0aW5nIHRvIGdldCBhdXRoIHRhZyBpbiB1bnN1cHBvcnRlZCBzdGF0ZScpCiAgfQp9ClN0cmVhbUNpcGhlci5wcm90b3R5cGUuc2V0QXV0aFRhZyA9IGZ1bmN0aW9uIHNldEF1dGhUYWcgKHRhZykgewogIGlmICh0aGlzLl9kZWNyeXB0KSB7CiAgICB0aGlzLl9hdXRoVGFnID0gdGFnCiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcignQXR0ZW1wdGluZyB0byBzZXQgYXV0aCB0YWcgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQogIH0KfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLnNldEFBRCA9IGZ1bmN0aW9uIHNldEFBRCAoYnVmKSB7CiAgaWYgKCF0aGlzLl9jYWxsZWQpIHsKICAgIHRoaXMuX2doYXNoLnVwZGF0ZShidWYpCiAgICB0aGlzLl9hbGVuICs9IGJ1Zi5sZW5ndGgKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0aW5nIHRvIHNldCBBQUQgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQogIH0KfQpmdW5jdGlvbiB4b3JUZXN0IChhLCBiKSB7CiAgdmFyIG91dCA9IDAKICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7CiAgICBvdXQrKwogIH0KICB2YXIgbGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXQgKz0gKGFbaV0gXiBiW2ldKQogIH0KICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FlcyI6NTEwLCIuL2doYXNoIjo1MTUsImJ1ZmZlciI6NTA0LCJidWZmZXIteG9yIjo1MjQsImNpcGhlci1iYXNlIjo1MjUsImluaGVyaXRzIjo3MDF9XSw1MTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY2lwaGVycyA9IHJlcXVpcmUoJy4vZW5jcnlwdGVyJykKZXhwb3J0cy5jcmVhdGVDaXBoZXIgPSBleHBvcnRzLkNpcGhlciA9IGNpcGhlcnMuY3JlYXRlQ2lwaGVyCmV4cG9ydHMuY3JlYXRlQ2lwaGVyaXYgPSBleHBvcnRzLkNpcGhlcml2ID0gY2lwaGVycy5jcmVhdGVDaXBoZXJpdgp2YXIgZGVjaXBoZXJzID0gcmVxdWlyZSgnLi9kZWNyeXB0ZXInKQpleHBvcnRzLmNyZWF0ZURlY2lwaGVyID0gZXhwb3J0cy5EZWNpcGhlciA9IGRlY2lwaGVycy5jcmVhdGVEZWNpcGhlcgpleHBvcnRzLmNyZWF0ZURlY2lwaGVyaXYgPSBleHBvcnRzLkRlY2lwaGVyaXYgPSBkZWNpcGhlcnMuY3JlYXRlRGVjaXBoZXJpdgp2YXIgbW9kZXMgPSByZXF1aXJlKCcuL21vZGVzJykKZnVuY3Rpb24gZ2V0Q2lwaGVycyAoKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKG1vZGVzKQp9CmV4cG9ydHMubGlzdENpcGhlcnMgPSBleHBvcnRzLmdldENpcGhlcnMgPSBnZXRDaXBoZXJzCgp9LHsiLi9kZWNyeXB0ZXIiOjUxMywiLi9lbmNyeXB0ZXIiOjUxNCwiLi9tb2RlcyI6NTE2fV0sNTEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYWVzID0gcmVxdWlyZSgnLi9hZXMnKQp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBtb2RlcyA9IHJlcXVpcmUoJy4vbW9kZXMnKQp2YXIgU3RyZWFtQ2lwaGVyID0gcmVxdWlyZSgnLi9zdHJlYW1DaXBoZXInKQp2YXIgQXV0aENpcGhlciA9IHJlcXVpcmUoJy4vYXV0aENpcGhlcicpCnZhciBlYnRrID0gcmVxdWlyZSgnZXZwX2J5dGVzdG9rZXknKQoKaW5oZXJpdHMoRGVjaXBoZXIsIFRyYW5zZm9ybSkKZnVuY3Rpb24gRGVjaXBoZXIgKG1vZGUsIGtleSwgaXYpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRGVjaXBoZXIpKSB7CiAgICByZXR1cm4gbmV3IERlY2lwaGVyKG1vZGUsIGtleSwgaXYpCiAgfQogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5fY2FjaGUgPSBuZXcgU3BsaXR0ZXIoKQogIHRoaXMuX2xhc3QgPSB2b2lkIDAKICB0aGlzLl9jaXBoZXIgPSBuZXcgYWVzLkFFUyhrZXkpCiAgdGhpcy5fcHJldiA9IG5ldyBCdWZmZXIoaXYubGVuZ3RoKQogIGl2LmNvcHkodGhpcy5fcHJldikKICB0aGlzLl9tb2RlID0gbW9kZQogIHRoaXMuX2F1dG9wYWRkaW5nID0gdHJ1ZQp9CkRlY2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLl9jYWNoZS5hZGQoZGF0YSkKICB2YXIgY2h1bmsKICB2YXIgdGhpbmcKICB2YXIgb3V0ID0gW10KICB3aGlsZSAoKGNodW5rID0gdGhpcy5fY2FjaGUuZ2V0KHRoaXMuX2F1dG9wYWRkaW5nKSkpIHsKICAgIHRoaW5nID0gdGhpcy5fbW9kZS5kZWNyeXB0KHRoaXMsIGNodW5rKQogICAgb3V0LnB1c2godGhpbmcpCiAgfQogIHJldHVybiBCdWZmZXIuY29uY2F0KG91dCkKfQpEZWNpcGhlci5wcm90b3R5cGUuX2ZpbmFsID0gZnVuY3Rpb24gKCkgewogIHZhciBjaHVuayA9IHRoaXMuX2NhY2hlLmZsdXNoKCkKICBpZiAodGhpcy5fYXV0b3BhZGRpbmcpIHsKICAgIHJldHVybiB1bnBhZCh0aGlzLl9tb2RlLmRlY3J5cHQodGhpcywgY2h1bmspKQogIH0gZWxzZSBpZiAoY2h1bmspIHsKICAgIHRocm93IG5ldyBFcnJvcignZGF0YSBub3QgbXVsdGlwbGUgb2YgYmxvY2sgbGVuZ3RoJykKICB9Cn0KRGVjaXBoZXIucHJvdG90eXBlLnNldEF1dG9QYWRkaW5nID0gZnVuY3Rpb24gKHNldFRvKSB7CiAgdGhpcy5fYXV0b3BhZGRpbmcgPSAhIXNldFRvCiAgcmV0dXJuIHRoaXMKfQpmdW5jdGlvbiBTcGxpdHRlciAoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNwbGl0dGVyKSkgewogICAgcmV0dXJuIG5ldyBTcGxpdHRlcigpCiAgfQogIHRoaXMuY2FjaGUgPSBuZXcgQnVmZmVyKCcnKQp9ClNwbGl0dGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuY2FjaGUgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCBkYXRhXSkKfQoKU3BsaXR0ZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChhdXRvUGFkZGluZykgewogIHZhciBvdXQKICBpZiAoYXV0b1BhZGRpbmcpIHsKICAgIGlmICh0aGlzLmNhY2hlLmxlbmd0aCA+IDE2KSB7CiAgICAgIG91dCA9IHRoaXMuY2FjaGUuc2xpY2UoMCwgMTYpCiAgICAgIHRoaXMuY2FjaGUgPSB0aGlzLmNhY2hlLnNsaWNlKDE2KQogICAgICByZXR1cm4gb3V0CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmICh0aGlzLmNhY2hlLmxlbmd0aCA+PSAxNikgewogICAgICBvdXQgPSB0aGlzLmNhY2hlLnNsaWNlKDAsIDE2KQogICAgICB0aGlzLmNhY2hlID0gdGhpcy5jYWNoZS5zbGljZSgxNikKICAgICAgcmV0dXJuIG91dAogICAgfQogIH0KICByZXR1cm4gbnVsbAp9ClNwbGl0dGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5jYWNoZS5sZW5ndGgpIHsKICAgIHJldHVybiB0aGlzLmNhY2hlCiAgfQp9CmZ1bmN0aW9uIHVucGFkIChsYXN0KSB7CiAgdmFyIHBhZGRlZCA9IGxhc3RbMTVdCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBwYWRkZWQpIHsKICAgIGlmIChsYXN0WyhpICsgKDE2IC0gcGFkZGVkKSldICE9PSBwYWRkZWQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmFibGUgdG8gZGVjcnlwdCBkYXRhJykKICAgIH0KICB9CiAgaWYgKHBhZGRlZCA9PT0gMTYpIHsKICAgIHJldHVybgogIH0KICByZXR1cm4gbGFzdC5zbGljZSgwLCAxNiAtIHBhZGRlZCkKfQoKdmFyIG1vZGVsaXN0ID0gewogIEVDQjogcmVxdWlyZSgnLi9tb2Rlcy9lY2InKSwKICBDQkM6IHJlcXVpcmUoJy4vbW9kZXMvY2JjJyksCiAgQ0ZCOiByZXF1aXJlKCcuL21vZGVzL2NmYicpLAogIENGQjg6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiOCcpLAogIENGQjE6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiMScpLAogIE9GQjogcmVxdWlyZSgnLi9tb2Rlcy9vZmInKSwKICBDVFI6IHJlcXVpcmUoJy4vbW9kZXMvY3RyJyksCiAgR0NNOiByZXF1aXJlKCcuL21vZGVzL2N0cicpCn0KCmZ1bmN0aW9uIGNyZWF0ZURlY2lwaGVyaXYgKHN1aXRlLCBwYXNzd29yZCwgaXYpIHsKICB2YXIgY29uZmlnID0gbW9kZXNbc3VpdGUudG9Mb3dlckNhc2UoKV0KICBpZiAoIWNvbmZpZykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgaWYgKHR5cGVvZiBpdiA9PT0gJ3N0cmluZycpIHsKICAgIGl2ID0gbmV3IEJ1ZmZlcihpdikKICB9CiAgaWYgKHR5cGVvZiBwYXNzd29yZCA9PT0gJ3N0cmluZycpIHsKICAgIHBhc3N3b3JkID0gbmV3IEJ1ZmZlcihwYXNzd29yZCkKICB9CiAgaWYgKHBhc3N3b3JkLmxlbmd0aCAhPT0gY29uZmlnLmtleSAvIDgpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQga2V5IGxlbmd0aCAnICsgcGFzc3dvcmQubGVuZ3RoKQogIH0KICBpZiAoaXYubGVuZ3RoICE9PSBjb25maWcuaXYpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgaXYgbGVuZ3RoICcgKyBpdi5sZW5ndGgpCiAgfQogIGlmIChjb25maWcudHlwZSA9PT0gJ3N0cmVhbScpIHsKICAgIHJldHVybiBuZXcgU3RyZWFtQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2LCB0cnVlKQogIH0gZWxzZSBpZiAoY29uZmlnLnR5cGUgPT09ICdhdXRoJykgewogICAgcmV0dXJuIG5ldyBBdXRoQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2LCB0cnVlKQogIH0KICByZXR1cm4gbmV3IERlY2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2KQp9CgpmdW5jdGlvbiBjcmVhdGVEZWNpcGhlciAoc3VpdGUsIHBhc3N3b3JkKSB7CiAgdmFyIGNvbmZpZyA9IG1vZGVzW3N1aXRlLnRvTG93ZXJDYXNlKCldCiAgaWYgKCFjb25maWcpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQogIHZhciBrZXlzID0gZWJ0ayhwYXNzd29yZCwgZmFsc2UsIGNvbmZpZy5rZXksIGNvbmZpZy5pdikKICByZXR1cm4gY3JlYXRlRGVjaXBoZXJpdihzdWl0ZSwga2V5cy5rZXksIGtleXMuaXYpCn0KZXhwb3J0cy5jcmVhdGVEZWNpcGhlciA9IGNyZWF0ZURlY2lwaGVyCmV4cG9ydHMuY3JlYXRlRGVjaXBoZXJpdiA9IGNyZWF0ZURlY2lwaGVyaXYKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FlcyI6NTEwLCIuL2F1dGhDaXBoZXIiOjUxMSwiLi9tb2RlcyI6NTE2LCIuL21vZGVzL2NiYyI6NTE3LCIuL21vZGVzL2NmYiI6NTE4LCIuL21vZGVzL2NmYjEiOjUxOSwiLi9tb2Rlcy9jZmI4Ijo1MjAsIi4vbW9kZXMvY3RyIjo1MjEsIi4vbW9kZXMvZWNiIjo1MjIsIi4vbW9kZXMvb2ZiIjo1MjMsIi4vc3RyZWFtQ2lwaGVyIjo1MjYsImJ1ZmZlciI6NTA0LCJjaXBoZXItYmFzZSI6NTI1LCJldnBfYnl0ZXN0b2tleSI6NTM3LCJpbmhlcml0cyI6NzAxfV0sNTE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYWVzID0gcmVxdWlyZSgnLi9hZXMnKQp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBtb2RlcyA9IHJlcXVpcmUoJy4vbW9kZXMnKQp2YXIgZWJ0ayA9IHJlcXVpcmUoJ2V2cF9ieXRlc3Rva2V5JykKdmFyIFN0cmVhbUNpcGhlciA9IHJlcXVpcmUoJy4vc3RyZWFtQ2lwaGVyJykKdmFyIEF1dGhDaXBoZXIgPSByZXF1aXJlKCcuL2F1dGhDaXBoZXInKQppbmhlcml0cyhDaXBoZXIsIFRyYW5zZm9ybSkKZnVuY3Rpb24gQ2lwaGVyIChtb2RlLCBrZXksIGl2KSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIENpcGhlcikpIHsKICAgIHJldHVybiBuZXcgQ2lwaGVyKG1vZGUsIGtleSwgaXYpCiAgfQogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5fY2FjaGUgPSBuZXcgU3BsaXR0ZXIoKQogIHRoaXMuX2NpcGhlciA9IG5ldyBhZXMuQUVTKGtleSkKICB0aGlzLl9wcmV2ID0gbmV3IEJ1ZmZlcihpdi5sZW5ndGgpCiAgaXYuY29weSh0aGlzLl9wcmV2KQogIHRoaXMuX21vZGUgPSBtb2RlCiAgdGhpcy5fYXV0b3BhZGRpbmcgPSB0cnVlCn0KQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLl9jYWNoZS5hZGQoZGF0YSkKICB2YXIgY2h1bmsKICB2YXIgdGhpbmcKICB2YXIgb3V0ID0gW10KICB3aGlsZSAoKGNodW5rID0gdGhpcy5fY2FjaGUuZ2V0KCkpKSB7CiAgICB0aGluZyA9IHRoaXMuX21vZGUuZW5jcnlwdCh0aGlzLCBjaHVuaykKICAgIG91dC5wdXNoKHRoaW5nKQogIH0KICByZXR1cm4gQnVmZmVyLmNvbmNhdChvdXQpCn0KQ2lwaGVyLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGNodW5rID0gdGhpcy5fY2FjaGUuZmx1c2goKQogIGlmICh0aGlzLl9hdXRvcGFkZGluZykgewogICAgY2h1bmsgPSB0aGlzLl9tb2RlLmVuY3J5cHQodGhpcywgY2h1bmspCiAgICB0aGlzLl9jaXBoZXIuc2NydWIoKQogICAgcmV0dXJuIGNodW5rCiAgfSBlbHNlIGlmIChjaHVuay50b1N0cmluZygnaGV4JykgIT09ICcxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMCcpIHsKICAgIHRoaXMuX2NpcGhlci5zY3J1YigpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgbm90IG11bHRpcGxlIG9mIGJsb2NrIGxlbmd0aCcpCiAgfQp9CkNpcGhlci5wcm90b3R5cGUuc2V0QXV0b1BhZGRpbmcgPSBmdW5jdGlvbiAoc2V0VG8pIHsKICB0aGlzLl9hdXRvcGFkZGluZyA9ICEhc2V0VG8KICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiBTcGxpdHRlciAoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNwbGl0dGVyKSkgewogICAgcmV0dXJuIG5ldyBTcGxpdHRlcigpCiAgfQogIHRoaXMuY2FjaGUgPSBuZXcgQnVmZmVyKCcnKQp9ClNwbGl0dGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuY2FjaGUgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCBkYXRhXSkKfQoKU3BsaXR0ZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5jYWNoZS5sZW5ndGggPiAxNSkgewogICAgdmFyIG91dCA9IHRoaXMuY2FjaGUuc2xpY2UoMCwgMTYpCiAgICB0aGlzLmNhY2hlID0gdGhpcy5jYWNoZS5zbGljZSgxNikKICAgIHJldHVybiBvdXQKICB9CiAgcmV0dXJuIG51bGwKfQpTcGxpdHRlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGxlbiA9IDE2IC0gdGhpcy5jYWNoZS5sZW5ndGgKICB2YXIgcGFkQnVmZiA9IG5ldyBCdWZmZXIobGVuKQoKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgcGFkQnVmZi53cml0ZVVJbnQ4KGxlbiwgaSkKICB9CiAgdmFyIG91dCA9IEJ1ZmZlci5jb25jYXQoW3RoaXMuY2FjaGUsIHBhZEJ1ZmZdKQogIHJldHVybiBvdXQKfQp2YXIgbW9kZWxpc3QgPSB7CiAgRUNCOiByZXF1aXJlKCcuL21vZGVzL2VjYicpLAogIENCQzogcmVxdWlyZSgnLi9tb2Rlcy9jYmMnKSwKICBDRkI6IHJlcXVpcmUoJy4vbW9kZXMvY2ZiJyksCiAgQ0ZCODogcmVxdWlyZSgnLi9tb2Rlcy9jZmI4JyksCiAgQ0ZCMTogcmVxdWlyZSgnLi9tb2Rlcy9jZmIxJyksCiAgT0ZCOiByZXF1aXJlKCcuL21vZGVzL29mYicpLAogIENUUjogcmVxdWlyZSgnLi9tb2Rlcy9jdHInKSwKICBHQ006IHJlcXVpcmUoJy4vbW9kZXMvY3RyJykKfQoKZnVuY3Rpb24gY3JlYXRlQ2lwaGVyaXYgKHN1aXRlLCBwYXNzd29yZCwgaXYpIHsKICB2YXIgY29uZmlnID0gbW9kZXNbc3VpdGUudG9Mb3dlckNhc2UoKV0KICBpZiAoIWNvbmZpZykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgaWYgKHR5cGVvZiBpdiA9PT0gJ3N0cmluZycpIHsKICAgIGl2ID0gbmV3IEJ1ZmZlcihpdikKICB9CiAgaWYgKHR5cGVvZiBwYXNzd29yZCA9PT0gJ3N0cmluZycpIHsKICAgIHBhc3N3b3JkID0gbmV3IEJ1ZmZlcihwYXNzd29yZCkKICB9CiAgaWYgKHBhc3N3b3JkLmxlbmd0aCAhPT0gY29uZmlnLmtleSAvIDgpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQga2V5IGxlbmd0aCAnICsgcGFzc3dvcmQubGVuZ3RoKQogIH0KICBpZiAoaXYubGVuZ3RoICE9PSBjb25maWcuaXYpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgaXYgbGVuZ3RoICcgKyBpdi5sZW5ndGgpCiAgfQogIGlmIChjb25maWcudHlwZSA9PT0gJ3N0cmVhbScpIHsKICAgIHJldHVybiBuZXcgU3RyZWFtQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2KQogIH0gZWxzZSBpZiAoY29uZmlnLnR5cGUgPT09ICdhdXRoJykgewogICAgcmV0dXJuIG5ldyBBdXRoQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2KQogIH0KICByZXR1cm4gbmV3IENpcGhlcihtb2RlbGlzdFtjb25maWcubW9kZV0sIHBhc3N3b3JkLCBpdikKfQpmdW5jdGlvbiBjcmVhdGVDaXBoZXIgKHN1aXRlLCBwYXNzd29yZCkgewogIHZhciBjb25maWcgPSBtb2Rlc1tzdWl0ZS50b0xvd2VyQ2FzZSgpXQogIGlmICghY29uZmlnKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KICB2YXIga2V5cyA9IGVidGsocGFzc3dvcmQsIGZhbHNlLCBjb25maWcua2V5LCBjb25maWcuaXYpCiAgcmV0dXJuIGNyZWF0ZUNpcGhlcml2KHN1aXRlLCBrZXlzLmtleSwga2V5cy5pdikKfQoKZXhwb3J0cy5jcmVhdGVDaXBoZXJpdiA9IGNyZWF0ZUNpcGhlcml2CmV4cG9ydHMuY3JlYXRlQ2lwaGVyID0gY3JlYXRlQ2lwaGVyCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hZXMiOjUxMCwiLi9hdXRoQ2lwaGVyIjo1MTEsIi4vbW9kZXMiOjUxNiwiLi9tb2Rlcy9jYmMiOjUxNywiLi9tb2Rlcy9jZmIiOjUxOCwiLi9tb2Rlcy9jZmIxIjo1MTksIi4vbW9kZXMvY2ZiOCI6NTIwLCIuL21vZGVzL2N0ciI6NTIxLCIuL21vZGVzL2VjYiI6NTIyLCIuL21vZGVzL29mYiI6NTIzLCIuL3N0cmVhbUNpcGhlciI6NTI2LCJidWZmZXIiOjUwNCwiY2lwaGVyLWJhc2UiOjUyNSwiZXZwX2J5dGVzdG9rZXkiOjUzNywiaW5oZXJpdHMiOjcwMX1dLDUxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHplcm9zID0gbmV3IEJ1ZmZlcigxNikKemVyb3MuZmlsbCgwKQptb2R1bGUuZXhwb3J0cyA9IEdIQVNICmZ1bmN0aW9uIEdIQVNIIChrZXkpIHsKICB0aGlzLmggPSBrZXkKICB0aGlzLnN0YXRlID0gbmV3IEJ1ZmZlcigxNikKICB0aGlzLnN0YXRlLmZpbGwoMCkKICB0aGlzLmNhY2hlID0gbmV3IEJ1ZmZlcignJykKfQovLyBmcm9tIGh0dHA6Ly9iaXR3aXNlc2hpZnRsZWZ0LmdpdGh1Yi5pby9zamNsL2RvYy9zeW1ib2xzL3NyYy9jb3JlX2djbS5qcy5odG1sCi8vIGJ5IEp1aG8gVsOkaMOkLUhlcnR0dWEKR0hBU0gucHJvdG90eXBlLmdoYXNoID0gZnVuY3Rpb24gKGJsb2NrKSB7CiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBibG9jay5sZW5ndGgpIHsKICAgIHRoaXMuc3RhdGVbaV0gXj0gYmxvY2tbaV0KICB9CiAgdGhpcy5fbXVsdGlwbHkoKQp9CgpHSEFTSC5wcm90b3R5cGUuX211bHRpcGx5ID0gZnVuY3Rpb24gKCkgewogIHZhciBWaSA9IHRvQXJyYXkodGhpcy5oKQogIHZhciBaaSA9IFswLCAwLCAwLCAwXQogIHZhciBqLCB4aSwgbHNiX1ZpCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCAxMjgpIHsKICAgIHhpID0gKHRoaXMuc3RhdGVbfn4oaSAvIDgpXSAmICgxIDw8ICg3IC0gaSAlIDgpKSkgIT09IDAKICAgIGlmICh4aSkgewogICAgICAvLyBaX2krMSA9IFpfaSBeIFZfaQogICAgICBaaSA9IHhvcihaaSwgVmkpCiAgICB9CgogICAgLy8gU3RvcmUgdGhlIHZhbHVlIG9mIExTQihWX2kpCiAgICBsc2JfVmkgPSAoVmlbM10gJiAxKSAhPT0gMAoKICAgIC8vIFZfaSsxID0gVl9pID4+IDEKICAgIGZvciAoaiA9IDM7IGogPiAwOyBqLS0pIHsKICAgICAgVmlbal0gPSAoVmlbal0gPj4+IDEpIHwgKChWaVtqIC0gMV0gJiAxKSA8PCAzMSkKICAgIH0KICAgIFZpWzBdID0gVmlbMF0gPj4+IDEKCiAgICAvLyBJZiBMU0IoVl9pKSBpcyAxLCBWX2krMSA9IChWX2kgPj4gMSkgXiBSCiAgICBpZiAobHNiX1ZpKSB7CiAgICAgIFZpWzBdID0gVmlbMF0gXiAoMHhlMSA8PCAyNCkKICAgIH0KICB9CiAgdGhpcy5zdGF0ZSA9IGZyb21BcnJheShaaSkKfQpHSEFTSC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGJ1ZikgewogIHRoaXMuY2FjaGUgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCBidWZdKQogIHZhciBjaHVuawogIHdoaWxlICh0aGlzLmNhY2hlLmxlbmd0aCA+PSAxNikgewogICAgY2h1bmsgPSB0aGlzLmNhY2hlLnNsaWNlKDAsIDE2KQogICAgdGhpcy5jYWNoZSA9IHRoaXMuY2FjaGUuc2xpY2UoMTYpCiAgICB0aGlzLmdoYXNoKGNodW5rKQogIH0KfQpHSEFTSC5wcm90b3R5cGUuZmluYWwgPSBmdW5jdGlvbiAoYWJsLCBibCkgewogIGlmICh0aGlzLmNhY2hlLmxlbmd0aCkgewogICAgdGhpcy5naGFzaChCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCB6ZXJvc10sIDE2KSkKICB9CiAgdGhpcy5naGFzaChmcm9tQXJyYXkoWwogICAgMCwgYWJsLAogICAgMCwgYmwKICBdKSkKICByZXR1cm4gdGhpcy5zdGF0ZQp9CgpmdW5jdGlvbiB0b0FycmF5IChidWYpIHsKICByZXR1cm4gWwogICAgYnVmLnJlYWRVSW50MzJCRSgwKSwKICAgIGJ1Zi5yZWFkVUludDMyQkUoNCksCiAgICBidWYucmVhZFVJbnQzMkJFKDgpLAogICAgYnVmLnJlYWRVSW50MzJCRSgxMikKICBdCn0KZnVuY3Rpb24gZnJvbUFycmF5IChvdXQpIHsKICBvdXQgPSBvdXQubWFwKGZpeHVwX3VpbnQzMikKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcigxNikKICBidWYud3JpdGVVSW50MzJCRShvdXRbMF0sIDApCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzFdLCA0KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsyXSwgOCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbM10sIDEyKQogIHJldHVybiBidWYKfQp2YXIgdWludF9tYXggPSBNYXRoLnBvdygyLCAzMikKZnVuY3Rpb24gZml4dXBfdWludDMyICh4KSB7CiAgdmFyIHJldCwgeF9wb3MKICByZXQgPSB4ID4gdWludF9tYXggfHwgeCA8IDAgPyAoeF9wb3MgPSBNYXRoLmFicyh4KSAlIHVpbnRfbWF4LCB4IDwgMCA/IHVpbnRfbWF4IC0geF9wb3MgOiB4X3BvcykgOiB4CiAgcmV0dXJuIHJldAp9CmZ1bmN0aW9uIHhvciAoYSwgYikgewogIHJldHVybiBbCiAgICBhWzBdIF4gYlswXSwKICAgIGFbMV0gXiBiWzFdLAogICAgYVsyXSBeIGJbMl0sCiAgICBhWzNdIF4gYlszXQogIF0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NTA0fV0sNTE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKZXhwb3J0c1snYWVzLTEyOC1lY2InXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAwLAogIG1vZGU6ICdFQ0InLAogIHR5cGU6ICdibG9jaycKfQpleHBvcnRzWydhZXMtMTkyLWVjYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDAsCiAgbW9kZTogJ0VDQicsCiAgdHlwZTogJ2Jsb2NrJwp9CmV4cG9ydHNbJ2Flcy0yNTYtZWNiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMCwKICBtb2RlOiAnRUNCJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzLTEyOC1jYmMnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnQ0JDJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzLTE5Mi1jYmMnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAxNiwKICBtb2RlOiAnQ0JDJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzLTI1Ni1jYmMnXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAxNiwKICBtb2RlOiAnQ0JDJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzMTI4J10gPSBleHBvcnRzWydhZXMtMTI4LWNiYyddCmV4cG9ydHNbJ2FlczE5MiddID0gZXhwb3J0c1snYWVzLTE5Mi1jYmMnXQpleHBvcnRzWydhZXMyNTYnXSA9IGV4cG9ydHNbJ2Flcy0yNTYtY2JjJ10KZXhwb3J0c1snYWVzLTEyOC1jZmInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xOTItY2ZiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMjU2LWNmYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1jZmI4J10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjgnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTE5Mi1jZmI4J10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjgnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTI1Ni1jZmI4J10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjgnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1jZmIxJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjEnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTE5Mi1jZmIxJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjEnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTI1Ni1jZmIxJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTYsCiAgbW9kZTogJ0NGQjEnLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1vZmInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnT0ZCJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xOTItb2ZiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ09GQicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMjU2LW9mYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdPRkInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1jdHInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxNiwKICBtb2RlOiAnQ1RSJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xOTItY3RyJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NUUicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMjU2LWN0ciddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdDVFInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTEyOC1nY20nXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTI4LAogIGl2OiAxMiwKICBtb2RlOiAnR0NNJywKICB0eXBlOiAnYXV0aCcKfQpleHBvcnRzWydhZXMtMTkyLWdjbSddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDEyLAogIG1vZGU6ICdHQ00nLAogIHR5cGU6ICdhdXRoJwp9CmV4cG9ydHNbJ2Flcy0yNTYtZ2NtJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTIsCiAgbW9kZTogJ0dDTScsCiAgdHlwZTogJ2F1dGgnCn0KCn0se31dLDUxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB4b3IgPSByZXF1aXJlKCdidWZmZXIteG9yJykKCmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBibG9jaykgewogIHZhciBkYXRhID0geG9yKGJsb2NrLCBzZWxmLl9wcmV2KQoKICBzZWxmLl9wcmV2ID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhkYXRhKQogIHJldHVybiBzZWxmLl9wcmV2Cn0KCmV4cG9ydHMuZGVjcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBibG9jaykgewogIHZhciBwYWQgPSBzZWxmLl9wcmV2CgogIHNlbGYuX3ByZXYgPSBibG9jawogIHZhciBvdXQgPSBzZWxmLl9jaXBoZXIuZGVjcnlwdEJsb2NrKGJsb2NrKQoKICByZXR1cm4geG9yKG91dCwgcGFkKQp9Cgp9LHsiYnVmZmVyLXhvciI6NTI0fV0sNTE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgeG9yID0gcmVxdWlyZSgnYnVmZmVyLXhvcicpCgpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgZGF0YSwgZGVjcnlwdCkgewogIHZhciBvdXQgPSBuZXcgQnVmZmVyKCcnKQogIHZhciBsZW4KCiAgd2hpbGUgKGRhdGEubGVuZ3RoKSB7CiAgICBpZiAoc2VsZi5fY2FjaGUubGVuZ3RoID09PSAwKSB7CiAgICAgIHNlbGYuX2NhY2hlID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhzZWxmLl9wcmV2KQogICAgICBzZWxmLl9wcmV2ID0gbmV3IEJ1ZmZlcignJykKICAgIH0KCiAgICBpZiAoc2VsZi5fY2FjaGUubGVuZ3RoIDw9IGRhdGEubGVuZ3RoKSB7CiAgICAgIGxlbiA9IHNlbGYuX2NhY2hlLmxlbmd0aAogICAgICBvdXQgPSBCdWZmZXIuY29uY2F0KFtvdXQsIGVuY3J5cHRTdGFydChzZWxmLCBkYXRhLnNsaWNlKDAsIGxlbiksIGRlY3J5cHQpXSkKICAgICAgZGF0YSA9IGRhdGEuc2xpY2UobGVuKQogICAgfSBlbHNlIHsKICAgICAgb3V0ID0gQnVmZmVyLmNvbmNhdChbb3V0LCBlbmNyeXB0U3RhcnQoc2VsZiwgZGF0YSwgZGVjcnlwdCldKQogICAgICBicmVhawogICAgfQogIH0KCiAgcmV0dXJuIG91dAp9CmZ1bmN0aW9uIGVuY3J5cHRTdGFydCAoc2VsZiwgZGF0YSwgZGVjcnlwdCkgewogIHZhciBsZW4gPSBkYXRhLmxlbmd0aAogIHZhciBvdXQgPSB4b3IoZGF0YSwgc2VsZi5fY2FjaGUpCiAgc2VsZi5fY2FjaGUgPSBzZWxmLl9jYWNoZS5zbGljZShsZW4pCiAgc2VsZi5fcHJldiA9IEJ1ZmZlci5jb25jYXQoW3NlbGYuX3ByZXYsIGRlY3J5cHQgPyBkYXRhIDogb3V0XSkKICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjUwNCwiYnVmZmVyLXhvciI6NTI0fV0sNTE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewpmdW5jdGlvbiBlbmNyeXB0Qnl0ZSAoc2VsZiwgYnl0ZVBhcmFtLCBkZWNyeXB0KSB7CiAgdmFyIHBhZAogIHZhciBpID0gLTEKICB2YXIgbGVuID0gOAogIHZhciBvdXQgPSAwCiAgdmFyIGJpdCwgdmFsdWUKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBwYWQgPSBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKHNlbGYuX3ByZXYpCiAgICBiaXQgPSAoYnl0ZVBhcmFtICYgKDEgPDwgKDcgLSBpKSkpID8gMHg4MCA6IDAKICAgIHZhbHVlID0gcGFkWzBdIF4gYml0CiAgICBvdXQgKz0gKCh2YWx1ZSAmIDB4ODApID4+IChpICUgOCkpCiAgICBzZWxmLl9wcmV2ID0gc2hpZnRJbihzZWxmLl9wcmV2LCBkZWNyeXB0ID8gYml0IDogdmFsdWUpCiAgfQogIHJldHVybiBvdXQKfQpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgY2h1bmssIGRlY3J5cHQpIHsKICB2YXIgbGVuID0gY2h1bmsubGVuZ3RoCiAgdmFyIG91dCA9IG5ldyBCdWZmZXIobGVuKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXRbaV0gPSBlbmNyeXB0Qnl0ZShzZWxmLCBjaHVua1tpXSwgZGVjcnlwdCkKICB9CiAgcmV0dXJuIG91dAp9CmZ1bmN0aW9uIHNoaWZ0SW4gKGJ1ZmZlciwgdmFsdWUpIHsKICB2YXIgbGVuID0gYnVmZmVyLmxlbmd0aAogIHZhciBpID0gLTEKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcihidWZmZXIubGVuZ3RoKQogIGJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW2J1ZmZlciwgbmV3IEJ1ZmZlcihbdmFsdWVdKV0pCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgb3V0W2ldID0gYnVmZmVyW2ldIDw8IDEgfCBidWZmZXJbaSArIDFdID4+ICg3KQogIH0KICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjUwNH1dLDUyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKZnVuY3Rpb24gZW5jcnlwdEJ5dGUgKHNlbGYsIGJ5dGVQYXJhbSwgZGVjcnlwdCkgewogIHZhciBwYWQgPSBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKHNlbGYuX3ByZXYpCiAgdmFyIG91dCA9IHBhZFswXSBeIGJ5dGVQYXJhbQogIHNlbGYuX3ByZXYgPSBCdWZmZXIuY29uY2F0KFtzZWxmLl9wcmV2LnNsaWNlKDEpLCBuZXcgQnVmZmVyKFtkZWNyeXB0ID8gYnl0ZVBhcmFtIDogb3V0XSldKQogIHJldHVybiBvdXQKfQpleHBvcnRzLmVuY3J5cHQgPSBmdW5jdGlvbiAoc2VsZiwgY2h1bmssIGRlY3J5cHQpIHsKICB2YXIgbGVuID0gY2h1bmsubGVuZ3RoCiAgdmFyIG91dCA9IG5ldyBCdWZmZXIobGVuKQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXRbaV0gPSBlbmNyeXB0Qnl0ZShzZWxmLCBjaHVua1tpXSwgZGVjcnlwdCkKICB9CiAgcmV0dXJuIG91dAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDR9XSw1MjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciB4b3IgPSByZXF1aXJlKCdidWZmZXIteG9yJykKCmZ1bmN0aW9uIGluY3IzMiAoaXYpIHsKICB2YXIgbGVuID0gaXYubGVuZ3RoCiAgdmFyIGl0ZW0KICB3aGlsZSAobGVuLS0pIHsKICAgIGl0ZW0gPSBpdi5yZWFkVUludDgobGVuKQogICAgaWYgKGl0ZW0gPT09IDI1NSkgewogICAgICBpdi53cml0ZVVJbnQ4KDAsIGxlbikKICAgIH0gZWxzZSB7CiAgICAgIGl0ZW0rKwogICAgICBpdi53cml0ZVVJbnQ4KGl0ZW0sIGxlbikKICAgICAgYnJlYWsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGdldEJsb2NrIChzZWxmKSB7CiAgdmFyIG91dCA9IHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soc2VsZi5fcHJldikKICBpbmNyMzIoc2VsZi5fcHJldikKICByZXR1cm4gb3V0Cn0KCmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBjaHVuaykgewogIHdoaWxlIChzZWxmLl9jYWNoZS5sZW5ndGggPCBjaHVuay5sZW5ndGgpIHsKICAgIHNlbGYuX2NhY2hlID0gQnVmZmVyLmNvbmNhdChbc2VsZi5fY2FjaGUsIGdldEJsb2NrKHNlbGYpXSkKICB9CiAgdmFyIHBhZCA9IHNlbGYuX2NhY2hlLnNsaWNlKDAsIGNodW5rLmxlbmd0aCkKICBzZWxmLl9jYWNoZSA9IHNlbGYuX2NhY2hlLnNsaWNlKGNodW5rLmxlbmd0aCkKICByZXR1cm4geG9yKGNodW5rLCBwYWQpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjUwNCwiYnVmZmVyLXhvciI6NTI0fV0sNTIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKZXhwb3J0cy5lbmNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGJsb2NrKSB7CiAgcmV0dXJuIHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soYmxvY2spCn0KZXhwb3J0cy5kZWNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGJsb2NrKSB7CiAgcmV0dXJuIHNlbGYuX2NpcGhlci5kZWNyeXB0QmxvY2soYmxvY2spCn0KCn0se31dLDUyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHhvciA9IHJlcXVpcmUoJ2J1ZmZlci14b3InKQoKZnVuY3Rpb24gZ2V0QmxvY2sgKHNlbGYpIHsKICBzZWxmLl9wcmV2ID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhzZWxmLl9wcmV2KQogIHJldHVybiBzZWxmLl9wcmV2Cn0KCmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBjaHVuaykgewogIHdoaWxlIChzZWxmLl9jYWNoZS5sZW5ndGggPCBjaHVuay5sZW5ndGgpIHsKICAgIHNlbGYuX2NhY2hlID0gQnVmZmVyLmNvbmNhdChbc2VsZi5fY2FjaGUsIGdldEJsb2NrKHNlbGYpXSkKICB9CgogIHZhciBwYWQgPSBzZWxmLl9jYWNoZS5zbGljZSgwLCBjaHVuay5sZW5ndGgpCiAgc2VsZi5fY2FjaGUgPSBzZWxmLl9jYWNoZS5zbGljZShjaHVuay5sZW5ndGgpCiAgcmV0dXJuIHhvcihjaHVuaywgcGFkKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDQsImJ1ZmZlci14b3IiOjUyNH1dLDUyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB4b3IgKGEsIGIpIHsKICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKQogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKGxlbmd0aCkKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgYnVmZmVyW2ldID0gYVtpXSBeIGJbaV0KICB9CgogIHJldHVybiBidWZmZXIKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NTA0fV0sNTI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzMl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiZHVwIjo0MzIsImluaGVyaXRzIjo3MDEsInN0cmVhbSI6NzE5LCJzdHJpbmdfZGVjb2RlciI6NzIwfV0sNTI2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYWVzID0gcmVxdWlyZSgnLi9hZXMnKQp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCgppbmhlcml0cyhTdHJlYW1DaXBoZXIsIFRyYW5zZm9ybSkKbW9kdWxlLmV4cG9ydHMgPSBTdHJlYW1DaXBoZXIKZnVuY3Rpb24gU3RyZWFtQ2lwaGVyIChtb2RlLCBrZXksIGl2LCBkZWNyeXB0KSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFN0cmVhbUNpcGhlcikpIHsKICAgIHJldHVybiBuZXcgU3RyZWFtQ2lwaGVyKG1vZGUsIGtleSwgaXYpCiAgfQogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5fY2lwaGVyID0gbmV3IGFlcy5BRVMoa2V5KQogIHRoaXMuX3ByZXYgPSBuZXcgQnVmZmVyKGl2Lmxlbmd0aCkKICB0aGlzLl9jYWNoZSA9IG5ldyBCdWZmZXIoJycpCiAgdGhpcy5fc2VjQ2FjaGUgPSBuZXcgQnVmZmVyKCcnKQogIHRoaXMuX2RlY3J5cHQgPSBkZWNyeXB0CiAgaXYuY29weSh0aGlzLl9wcmV2KQogIHRoaXMuX21vZGUgPSBtb2RlCn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgcmV0dXJuIHRoaXMuX21vZGUuZW5jcnlwdCh0aGlzLCBjaHVuaywgdGhpcy5fZGVjcnlwdCkKfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9jaXBoZXIuc2NydWIoKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hZXMiOjUxMCwiYnVmZmVyIjo1MDQsImNpcGhlci1iYXNlIjo1MjUsImluaGVyaXRzIjo3MDF9XSw1Mjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBDaXBoZXJCYXNlID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgZGVzID0gcmVxdWlyZSgnZGVzLmpzJykKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQoKdmFyIG1vZGVzID0gewogICdkZXMtZWRlMy1jYmMnOiBkZXMuQ0JDLmluc3RhbnRpYXRlKGRlcy5FREUpLAogICdkZXMtZWRlMyc6IGRlcy5FREUsCiAgJ2Rlcy1lZGUtY2JjJzogZGVzLkNCQy5pbnN0YW50aWF0ZShkZXMuRURFKSwKICAnZGVzLWVkZSc6IGRlcy5FREUsCiAgJ2Rlcy1jYmMnOiBkZXMuQ0JDLmluc3RhbnRpYXRlKGRlcy5ERVMpLAogICdkZXMtZWNiJzogZGVzLkRFUwp9Cm1vZGVzLmRlcyA9IG1vZGVzWydkZXMtY2JjJ10KbW9kZXMuZGVzMyA9IG1vZGVzWydkZXMtZWRlMy1jYmMnXQptb2R1bGUuZXhwb3J0cyA9IERFUwppbmhlcml0cyhERVMsIENpcGhlckJhc2UpCmZ1bmN0aW9uIERFUyAob3B0cykgewogIENpcGhlckJhc2UuY2FsbCh0aGlzKQogIHZhciBtb2RlTmFtZSA9IG9wdHMubW9kZS50b0xvd2VyQ2FzZSgpCiAgdmFyIG1vZGUgPSBtb2Rlc1ttb2RlTmFtZV0KICB2YXIgdHlwZQogIGlmIChvcHRzLmRlY3J5cHQpIHsKICAgIHR5cGUgPSAnZGVjcnlwdCcKICB9IGVsc2UgewogICAgdHlwZSA9ICdlbmNyeXB0JwogIH0KICB2YXIga2V5ID0gb3B0cy5rZXkKICBpZiAobW9kZU5hbWUgPT09ICdkZXMtZWRlJyB8fCBtb2RlTmFtZSA9PT0gJ2Rlcy1lZGUtY2JjJykgewogICAga2V5ID0gQnVmZmVyLmNvbmNhdChba2V5LCBrZXkuc2xpY2UoMCwgOCldKQogIH0KICB2YXIgaXYgPSBvcHRzLml2CiAgdGhpcy5fZGVzID0gbW9kZS5jcmVhdGUoewogICAga2V5OiBrZXksCiAgICBpdjogaXYsCiAgICB0eXBlOiB0eXBlCiAgfSkKfQpERVMucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHJldHVybiBuZXcgQnVmZmVyKHRoaXMuX2Rlcy51cGRhdGUoZGF0YSkpCn0KREVTLnByb3RvdHlwZS5fZmluYWwgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIG5ldyBCdWZmZXIodGhpcy5fZGVzLmZpbmFsKCkpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjUwNCwiY2lwaGVyLWJhc2UiOjUyOSwiZGVzLmpzIjo1MzAsImluaGVyaXRzIjo3MDF9XSw1Mjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzWydkZXMtZWNiJ10gPSB7CiAga2V5OiA4LAogIGl2OiAwCn0KZXhwb3J0c1snZGVzLWNiYyddID0gZXhwb3J0cy5kZXMgPSB7CiAga2V5OiA4LAogIGl2OiA4Cn0KZXhwb3J0c1snZGVzLWVkZTMtY2JjJ10gPSBleHBvcnRzLmRlczMgPSB7CiAga2V5OiAyNCwKICBpdjogOAp9CmV4cG9ydHNbJ2Rlcy1lZGUzJ10gPSB7CiAga2V5OiAyNCwKICBpdjogMAp9CmV4cG9ydHNbJ2Rlcy1lZGUtY2JjJ10gPSB7CiAga2V5OiAxNiwKICBpdjogOAp9CmV4cG9ydHNbJ2Rlcy1lZGUnXSA9IHsKICBrZXk6IDE2LAogIGl2OiAwCn0KCn0se31dLDUyOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MzJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImR1cCI6NDMyLCJpbmhlcml0cyI6NzAxLCJzdHJlYW0iOjcxOSwic3RyaW5nX2RlY29kZXIiOjcyMH1dLDUzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCmV4cG9ydHMudXRpbHMgPSByZXF1aXJlKCcuL2Rlcy91dGlscycpOwpleHBvcnRzLkNpcGhlciA9IHJlcXVpcmUoJy4vZGVzL2NpcGhlcicpOwpleHBvcnRzLkRFUyA9IHJlcXVpcmUoJy4vZGVzL2RlcycpOwpleHBvcnRzLkNCQyA9IHJlcXVpcmUoJy4vZGVzL2NiYycpOwpleHBvcnRzLkVERSA9IHJlcXVpcmUoJy4vZGVzL2VkZScpOwoKfSx7Ii4vZGVzL2NiYyI6NTMxLCIuL2Rlcy9jaXBoZXIiOjUzMiwiLi9kZXMvZGVzIjo1MzMsIi4vZGVzL2VkZSI6NTM0LCIuL2Rlcy91dGlscyI6NTM1fV0sNTMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ21pbmltYWxpc3RpYy1hc3NlcnQnKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCnZhciBwcm90byA9IHt9OwoKZnVuY3Rpb24gQ0JDU3RhdGUoaXYpIHsKICBhc3NlcnQuZXF1YWwoaXYubGVuZ3RoLCA4LCAnSW52YWxpZCBJViBsZW5ndGgnKTsKCiAgdGhpcy5pdiA9IG5ldyBBcnJheSg4KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXYubGVuZ3RoOyBpKyspCiAgICB0aGlzLml2W2ldID0gaXZbaV07Cn0KCmZ1bmN0aW9uIGluc3RhbnRpYXRlKEJhc2UpIHsKICBmdW5jdGlvbiBDQkMob3B0aW9ucykgewogICAgQmFzZS5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgdGhpcy5fY2JjSW5pdCgpOwogIH0KICBpbmhlcml0cyhDQkMsIEJhc2UpOwoKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3RvKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBrZXkgPSBrZXlzW2ldOwogICAgQ0JDLnByb3RvdHlwZVtrZXldID0gcHJvdG9ba2V5XTsKICB9CgogIENCQy5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUob3B0aW9ucykgewogICAgcmV0dXJuIG5ldyBDQkMob3B0aW9ucyk7CiAgfTsKCiAgcmV0dXJuIENCQzsKfQoKZXhwb3J0cy5pbnN0YW50aWF0ZSA9IGluc3RhbnRpYXRlOwoKcHJvdG8uX2NiY0luaXQgPSBmdW5jdGlvbiBfY2JjSW5pdCgpIHsKICB2YXIgc3RhdGUgPSBuZXcgQ0JDU3RhdGUodGhpcy5vcHRpb25zLml2KTsKICB0aGlzLl9jYmNTdGF0ZSA9IHN0YXRlOwp9OwoKcHJvdG8uX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUoaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9jYmNTdGF0ZTsKICB2YXIgc3VwZXJQcm90byA9IHRoaXMuY29uc3RydWN0b3Iuc3VwZXJfLnByb3RvdHlwZTsKCiAgdmFyIGl2ID0gc3RhdGUuaXY7CiAgaWYgKHRoaXMudHlwZSA9PT0gJ2VuY3J5cHQnKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspCiAgICAgIGl2W2ldIF49IGlucFtpbk9mZiArIGldOwoKICAgIHN1cGVyUHJvdG8uX3VwZGF0ZS5jYWxsKHRoaXMsIGl2LCAwLCBvdXQsIG91dE9mZik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgaSsrKQogICAgICBpdltpXSA9IG91dFtvdXRPZmYgKyBpXTsKICB9IGVsc2UgewogICAgc3VwZXJQcm90by5fdXBkYXRlLmNhbGwodGhpcywgaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja1NpemU7IGkrKykKICAgICAgb3V0W291dE9mZiArIGldIF49IGl2W2ldOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja1NpemU7IGkrKykKICAgICAgaXZbaV0gPSBpbnBbaW5PZmYgKyBpXTsKICB9Cn07Cgp9LHsiaW5oZXJpdHMiOjcwMSwibWluaW1hbGlzdGljLWFzc2VydCI6NTM2fV0sNTMyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ21pbmltYWxpc3RpYy1hc3NlcnQnKTsKCmZ1bmN0aW9uIENpcGhlcihvcHRpb25zKSB7CiAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKCiAgdGhpcy50eXBlID0gdGhpcy5vcHRpb25zLnR5cGU7CiAgdGhpcy5ibG9ja1NpemUgPSA4OwogIHRoaXMuX2luaXQoKTsKCiAgdGhpcy5idWZmZXIgPSBuZXcgQXJyYXkodGhpcy5ibG9ja1NpemUpOwogIHRoaXMuYnVmZmVyT2ZmID0gMDsKfQptb2R1bGUuZXhwb3J0cyA9IENpcGhlcjsKCkNpcGhlci5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBfaW5pdCgpIHsKICAvLyBNaWdodCBiZSBvdmVycmlkZWQKfTsKCkNpcGhlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHsKICBpZiAoZGF0YS5sZW5ndGggPT09IDApCiAgICByZXR1cm4gW107CgogIGlmICh0aGlzLnR5cGUgPT09ICdkZWNyeXB0JykKICAgIHJldHVybiB0aGlzLl91cGRhdGVEZWNyeXB0KGRhdGEpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLl91cGRhdGVFbmNyeXB0KGRhdGEpOwp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fYnVmZmVyID0gZnVuY3Rpb24gX2J1ZmZlcihkYXRhLCBvZmYpIHsKICAvLyBBcHBlbmQgZGF0YSB0byBidWZmZXIKICB2YXIgbWluID0gTWF0aC5taW4odGhpcy5idWZmZXIubGVuZ3RoIC0gdGhpcy5idWZmZXJPZmYsIGRhdGEubGVuZ3RoIC0gb2ZmKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbjsgaSsrKQogICAgdGhpcy5idWZmZXJbdGhpcy5idWZmZXJPZmYgKyBpXSA9IGRhdGFbb2ZmICsgaV07CiAgdGhpcy5idWZmZXJPZmYgKz0gbWluOwoKICAvLyBTaGlmdCBuZXh0CiAgcmV0dXJuIG1pbjsKfTsKCkNpcGhlci5wcm90b3R5cGUuX2ZsdXNoQnVmZmVyID0gZnVuY3Rpb24gX2ZsdXNoQnVmZmVyKG91dCwgb2ZmKSB7CiAgdGhpcy5fdXBkYXRlKHRoaXMuYnVmZmVyLCAwLCBvdXQsIG9mZik7CiAgdGhpcy5idWZmZXJPZmYgPSAwOwogIHJldHVybiB0aGlzLmJsb2NrU2l6ZTsKfTsKCkNpcGhlci5wcm90b3R5cGUuX3VwZGF0ZUVuY3J5cHQgPSBmdW5jdGlvbiBfdXBkYXRlRW5jcnlwdChkYXRhKSB7CiAgdmFyIGlucHV0T2ZmID0gMDsKICB2YXIgb3V0cHV0T2ZmID0gMDsKCiAgdmFyIGNvdW50ID0gKCh0aGlzLmJ1ZmZlck9mZiArIGRhdGEubGVuZ3RoKSAvIHRoaXMuYmxvY2tTaXplKSB8IDA7CiAgdmFyIG91dCA9IG5ldyBBcnJheShjb3VudCAqIHRoaXMuYmxvY2tTaXplKTsKCiAgaWYgKHRoaXMuYnVmZmVyT2ZmICE9PSAwKSB7CiAgICBpbnB1dE9mZiArPSB0aGlzLl9idWZmZXIoZGF0YSwgaW5wdXRPZmYpOwoKICAgIGlmICh0aGlzLmJ1ZmZlck9mZiA9PT0gdGhpcy5idWZmZXIubGVuZ3RoKQogICAgICBvdXRwdXRPZmYgKz0gdGhpcy5fZmx1c2hCdWZmZXIob3V0LCBvdXRwdXRPZmYpOwogIH0KCiAgLy8gV3JpdGUgYmxvY2tzCiAgdmFyIG1heCA9IGRhdGEubGVuZ3RoIC0gKChkYXRhLmxlbmd0aCAtIGlucHV0T2ZmKSAlIHRoaXMuYmxvY2tTaXplKTsKICBmb3IgKDsgaW5wdXRPZmYgPCBtYXg7IGlucHV0T2ZmICs9IHRoaXMuYmxvY2tTaXplKSB7CiAgICB0aGlzLl91cGRhdGUoZGF0YSwgaW5wdXRPZmYsIG91dCwgb3V0cHV0T2ZmKTsKICAgIG91dHB1dE9mZiArPSB0aGlzLmJsb2NrU2l6ZTsKICB9CgogIC8vIFF1ZXVlIHJlc3QKICBmb3IgKDsgaW5wdXRPZmYgPCBkYXRhLmxlbmd0aDsgaW5wdXRPZmYrKywgdGhpcy5idWZmZXJPZmYrKykKICAgIHRoaXMuYnVmZmVyW3RoaXMuYnVmZmVyT2ZmXSA9IGRhdGFbaW5wdXRPZmZdOwoKICByZXR1cm4gb3V0Owp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlRGVjcnlwdCA9IGZ1bmN0aW9uIF91cGRhdGVEZWNyeXB0KGRhdGEpIHsKICB2YXIgaW5wdXRPZmYgPSAwOwogIHZhciBvdXRwdXRPZmYgPSAwOwoKICB2YXIgY291bnQgPSBNYXRoLmNlaWwoKHRoaXMuYnVmZmVyT2ZmICsgZGF0YS5sZW5ndGgpIC8gdGhpcy5ibG9ja1NpemUpIC0gMTsKICB2YXIgb3V0ID0gbmV3IEFycmF5KGNvdW50ICogdGhpcy5ibG9ja1NpemUpOwoKICAvLyBUT0RPKGluZHV0bnkpOiBvcHRpbWl6ZSBpdCwgdGhpcyBpcyBmYXIgZnJvbSBvcHRpbWFsCiAgZm9yICg7IGNvdW50ID4gMDsgY291bnQtLSkgewogICAgaW5wdXRPZmYgKz0gdGhpcy5fYnVmZmVyKGRhdGEsIGlucHV0T2ZmKTsKICAgIG91dHB1dE9mZiArPSB0aGlzLl9mbHVzaEJ1ZmZlcihvdXQsIG91dHB1dE9mZik7CiAgfQoKICAvLyBCdWZmZXIgcmVzdCBvZiB0aGUgaW5wdXQKICBpbnB1dE9mZiArPSB0aGlzLl9idWZmZXIoZGF0YSwgaW5wdXRPZmYpOwoKICByZXR1cm4gb3V0Owp9OwoKQ2lwaGVyLnByb3RvdHlwZS5maW5hbCA9IGZ1bmN0aW9uIGZpbmFsKGJ1ZmZlcikgewogIHZhciBmaXJzdDsKICBpZiAoYnVmZmVyKQogICAgZmlyc3QgPSB0aGlzLnVwZGF0ZShidWZmZXIpOwoKICB2YXIgbGFzdDsKICBpZiAodGhpcy50eXBlID09PSAnZW5jcnlwdCcpCiAgICBsYXN0ID0gdGhpcy5fZmluYWxFbmNyeXB0KCk7CiAgZWxzZQogICAgbGFzdCA9IHRoaXMuX2ZpbmFsRGVjcnlwdCgpOwoKICBpZiAoZmlyc3QpCiAgICByZXR1cm4gZmlyc3QuY29uY2F0KGxhc3QpOwogIGVsc2UKICAgIHJldHVybiBsYXN0Owp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fcGFkID0gZnVuY3Rpb24gX3BhZChidWZmZXIsIG9mZikgewogIGlmIChvZmYgPT09IDApCiAgICByZXR1cm4gZmFsc2U7CgogIHdoaWxlIChvZmYgPCBidWZmZXIubGVuZ3RoKQogICAgYnVmZmVyW29mZisrXSA9IDA7CgogIHJldHVybiB0cnVlOwp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fZmluYWxFbmNyeXB0ID0gZnVuY3Rpb24gX2ZpbmFsRW5jcnlwdCgpIHsKICBpZiAoIXRoaXMuX3BhZCh0aGlzLmJ1ZmZlciwgdGhpcy5idWZmZXJPZmYpKQogICAgcmV0dXJuIFtdOwoKICB2YXIgb3V0ID0gbmV3IEFycmF5KHRoaXMuYmxvY2tTaXplKTsKICB0aGlzLl91cGRhdGUodGhpcy5idWZmZXIsIDAsIG91dCwgMCk7CiAgcmV0dXJuIG91dDsKfTsKCkNpcGhlci5wcm90b3R5cGUuX3VucGFkID0gZnVuY3Rpb24gX3VucGFkKGJ1ZmZlcikgewogIHJldHVybiBidWZmZXI7Cn07CgpDaXBoZXIucHJvdG90eXBlLl9maW5hbERlY3J5cHQgPSBmdW5jdGlvbiBfZmluYWxEZWNyeXB0KCkgewogIGFzc2VydC5lcXVhbCh0aGlzLmJ1ZmZlck9mZiwgdGhpcy5ibG9ja1NpemUsICdOb3QgZW5vdWdoIGRhdGEgdG8gZGVjcnlwdCcpOwogIHZhciBvdXQgPSBuZXcgQXJyYXkodGhpcy5ibG9ja1NpemUpOwogIHRoaXMuX2ZsdXNoQnVmZmVyKG91dCwgMCk7CgogIHJldHVybiB0aGlzLl91bnBhZChvdXQpOwp9OwoKfSx7Im1pbmltYWxpc3RpYy1hc3NlcnQiOjUzNn1dLDUzMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBhc3NlcnQgPSByZXF1aXJlKCdtaW5pbWFsaXN0aWMtYXNzZXJ0Jyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgZGVzID0gcmVxdWlyZSgnLi4vZGVzJyk7CnZhciB1dGlscyA9IGRlcy51dGlsczsKdmFyIENpcGhlciA9IGRlcy5DaXBoZXI7CgpmdW5jdGlvbiBERVNTdGF0ZSgpIHsKICB0aGlzLnRtcCA9IG5ldyBBcnJheSgyKTsKICB0aGlzLmtleXMgPSBudWxsOwp9CgpmdW5jdGlvbiBERVMob3B0aW9ucykgewogIENpcGhlci5jYWxsKHRoaXMsIG9wdGlvbnMpOwoKICB2YXIgc3RhdGUgPSBuZXcgREVTU3RhdGUoKTsKICB0aGlzLl9kZXNTdGF0ZSA9IHN0YXRlOwoKICB0aGlzLmRlcml2ZUtleXMoc3RhdGUsIG9wdGlvbnMua2V5KTsKfQppbmhlcml0cyhERVMsIENpcGhlcik7Cm1vZHVsZS5leHBvcnRzID0gREVTOwoKREVTLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBERVMob3B0aW9ucyk7Cn07Cgp2YXIgc2hpZnRUYWJsZSA9IFsKICAxLCAxLCAyLCAyLCAyLCAyLCAyLCAyLAogIDEsIDIsIDIsIDIsIDIsIDIsIDIsIDEKXTsKCkRFUy5wcm90b3R5cGUuZGVyaXZlS2V5cyA9IGZ1bmN0aW9uIGRlcml2ZUtleXMoc3RhdGUsIGtleSkgewogIHN0YXRlLmtleXMgPSBuZXcgQXJyYXkoMTYgKiAyKTsKCiAgYXNzZXJ0LmVxdWFsKGtleS5sZW5ndGgsIHRoaXMuYmxvY2tTaXplLCAnSW52YWxpZCBrZXkgbGVuZ3RoJyk7CgogIHZhciBrTCA9IHV0aWxzLnJlYWRVSW50MzJCRShrZXksIDApOwogIHZhciBrUiA9IHV0aWxzLnJlYWRVSW50MzJCRShrZXksIDQpOwoKICB1dGlscy5wYzEoa0wsIGtSLCBzdGF0ZS50bXAsIDApOwogIGtMID0gc3RhdGUudG1wWzBdOwogIGtSID0gc3RhdGUudG1wWzFdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUua2V5cy5sZW5ndGg7IGkgKz0gMikgewogICAgdmFyIHNoaWZ0ID0gc2hpZnRUYWJsZVtpID4+PiAxXTsKICAgIGtMID0gdXRpbHMucjI4c2hsKGtMLCBzaGlmdCk7CiAgICBrUiA9IHV0aWxzLnIyOHNobChrUiwgc2hpZnQpOwogICAgdXRpbHMucGMyKGtMLCBrUiwgc3RhdGUua2V5cywgaSk7CiAgfQp9OwoKREVTLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShpbnAsIGluT2ZmLCBvdXQsIG91dE9mZikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Rlc1N0YXRlOwoKICB2YXIgbCA9IHV0aWxzLnJlYWRVSW50MzJCRShpbnAsIGluT2ZmKTsKICB2YXIgciA9IHV0aWxzLnJlYWRVSW50MzJCRShpbnAsIGluT2ZmICsgNCk7CgogIC8vIEluaXRpYWwgUGVybXV0YXRpb24KICB1dGlscy5pcChsLCByLCBzdGF0ZS50bXAsIDApOwogIGwgPSBzdGF0ZS50bXBbMF07CiAgciA9IHN0YXRlLnRtcFsxXTsKCiAgaWYgKHRoaXMudHlwZSA9PT0gJ2VuY3J5cHQnKQogICAgdGhpcy5fZW5jcnlwdChzdGF0ZSwgbCwgciwgc3RhdGUudG1wLCAwKTsKICBlbHNlCiAgICB0aGlzLl9kZWNyeXB0KHN0YXRlLCBsLCByLCBzdGF0ZS50bXAsIDApOwoKICBsID0gc3RhdGUudG1wWzBdOwogIHIgPSBzdGF0ZS50bXBbMV07CgogIHV0aWxzLndyaXRlVUludDMyQkUob3V0LCBsLCBvdXRPZmYpOwogIHV0aWxzLndyaXRlVUludDMyQkUob3V0LCByLCBvdXRPZmYgKyA0KTsKfTsKCkRFUy5wcm90b3R5cGUuX3BhZCA9IGZ1bmN0aW9uIF9wYWQoYnVmZmVyLCBvZmYpIHsKICB2YXIgdmFsdWUgPSBidWZmZXIubGVuZ3RoIC0gb2ZmOwogIGZvciAodmFyIGkgPSBvZmY7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspCiAgICBidWZmZXJbaV0gPSB2YWx1ZTsKCiAgcmV0dXJuIHRydWU7Cn07CgpERVMucHJvdG90eXBlLl91bnBhZCA9IGZ1bmN0aW9uIF91bnBhZChidWZmZXIpIHsKICB2YXIgcGFkID0gYnVmZmVyW2J1ZmZlci5sZW5ndGggLSAxXTsKICBmb3IgKHZhciBpID0gYnVmZmVyLmxlbmd0aCAtIHBhZDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykKICAgIGFzc2VydC5lcXVhbChidWZmZXJbaV0sIHBhZCk7CgogIHJldHVybiBidWZmZXIuc2xpY2UoMCwgYnVmZmVyLmxlbmd0aCAtIHBhZCk7Cn07CgpERVMucHJvdG90eXBlLl9lbmNyeXB0ID0gZnVuY3Rpb24gX2VuY3J5cHQoc3RhdGUsIGxTdGFydCwgclN0YXJ0LCBvdXQsIG9mZikgewogIHZhciBsID0gbFN0YXJ0OwogIHZhciByID0gclN0YXJ0OwoKICAvLyBBcHBseSBmKCkgeDE2IHRpbWVzCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5rZXlzLmxlbmd0aDsgaSArPSAyKSB7CiAgICB2YXIga2V5TCA9IHN0YXRlLmtleXNbaV07CiAgICB2YXIga2V5UiA9IHN0YXRlLmtleXNbaSArIDFdOwoKICAgIC8vIGYociwgaykKICAgIHV0aWxzLmV4cGFuZChyLCBzdGF0ZS50bXAsIDApOwoKICAgIGtleUwgXj0gc3RhdGUudG1wWzBdOwogICAga2V5UiBePSBzdGF0ZS50bXBbMV07CiAgICB2YXIgcyA9IHV0aWxzLnN1YnN0aXR1dGUoa2V5TCwga2V5Uik7CiAgICB2YXIgZiA9IHV0aWxzLnBlcm11dGUocyk7CgogICAgdmFyIHQgPSByOwogICAgciA9IChsIF4gZikgPj4+IDA7CiAgICBsID0gdDsKICB9CgogIC8vIFJldmVyc2UgSW5pdGlhbCBQZXJtdXRhdGlvbgogIHV0aWxzLnJpcChyLCBsLCBvdXQsIG9mZik7Cn07CgpERVMucHJvdG90eXBlLl9kZWNyeXB0ID0gZnVuY3Rpb24gX2RlY3J5cHQoc3RhdGUsIGxTdGFydCwgclN0YXJ0LCBvdXQsIG9mZikgewogIHZhciBsID0gclN0YXJ0OwogIHZhciByID0gbFN0YXJ0OwoKICAvLyBBcHBseSBmKCkgeDE2IHRpbWVzCiAgZm9yICh2YXIgaSA9IHN0YXRlLmtleXMubGVuZ3RoIC0gMjsgaSA+PSAwOyBpIC09IDIpIHsKICAgIHZhciBrZXlMID0gc3RhdGUua2V5c1tpXTsKICAgIHZhciBrZXlSID0gc3RhdGUua2V5c1tpICsgMV07CgogICAgLy8gZihyLCBrKQogICAgdXRpbHMuZXhwYW5kKGwsIHN0YXRlLnRtcCwgMCk7CgogICAga2V5TCBePSBzdGF0ZS50bXBbMF07CiAgICBrZXlSIF49IHN0YXRlLnRtcFsxXTsKICAgIHZhciBzID0gdXRpbHMuc3Vic3RpdHV0ZShrZXlMLCBrZXlSKTsKICAgIHZhciBmID0gdXRpbHMucGVybXV0ZShzKTsKCiAgICB2YXIgdCA9IGw7CiAgICBsID0gKHIgXiBmKSA+Pj4gMDsKICAgIHIgPSB0OwogIH0KCiAgLy8gUmV2ZXJzZSBJbml0aWFsIFBlcm11dGF0aW9uCiAgdXRpbHMucmlwKGwsIHIsIG91dCwgb2ZmKTsKfTsKCn0seyIuLi9kZXMiOjUzMCwiaW5oZXJpdHMiOjcwMSwibWluaW1hbGlzdGljLWFzc2VydCI6NTM2fV0sNTM0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGFzc2VydCA9IHJlcXVpcmUoJ21pbmltYWxpc3RpYy1hc3NlcnQnKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCnZhciBkZXMgPSByZXF1aXJlKCcuLi9kZXMnKTsKdmFyIENpcGhlciA9IGRlcy5DaXBoZXI7CnZhciBERVMgPSBkZXMuREVTOwoKZnVuY3Rpb24gRURFU3RhdGUodHlwZSwga2V5KSB7CiAgYXNzZXJ0LmVxdWFsKGtleS5sZW5ndGgsIDI0LCAnSW52YWxpZCBrZXkgbGVuZ3RoJyk7CgogIHZhciBrMSA9IGtleS5zbGljZSgwLCA4KTsKICB2YXIgazIgPSBrZXkuc2xpY2UoOCwgMTYpOwogIHZhciBrMyA9IGtleS5zbGljZSgxNiwgMjQpOwoKICBpZiAodHlwZSA9PT0gJ2VuY3J5cHQnKSB7CiAgICB0aGlzLmNpcGhlcnMgPSBbCiAgICAgIERFUy5jcmVhdGUoeyB0eXBlOiAnZW5jcnlwdCcsIGtleTogazEgfSksCiAgICAgIERFUy5jcmVhdGUoeyB0eXBlOiAnZGVjcnlwdCcsIGtleTogazIgfSksCiAgICAgIERFUy5jcmVhdGUoeyB0eXBlOiAnZW5jcnlwdCcsIGtleTogazMgfSkKICAgIF07CiAgfSBlbHNlIHsKICAgIHRoaXMuY2lwaGVycyA9IFsKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdkZWNyeXB0Jywga2V5OiBrMyB9KSwKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdlbmNyeXB0Jywga2V5OiBrMiB9KSwKICAgICAgREVTLmNyZWF0ZSh7IHR5cGU6ICdkZWNyeXB0Jywga2V5OiBrMSB9KQogICAgXTsKICB9Cn0KCmZ1bmN0aW9uIEVERShvcHRpb25zKSB7CiAgQ2lwaGVyLmNhbGwodGhpcywgb3B0aW9ucyk7CgogIHZhciBzdGF0ZSA9IG5ldyBFREVTdGF0ZSh0aGlzLnR5cGUsIHRoaXMub3B0aW9ucy5rZXkpOwogIHRoaXMuX2VkZVN0YXRlID0gc3RhdGU7Cn0KaW5oZXJpdHMoRURFLCBDaXBoZXIpOwoKbW9kdWxlLmV4cG9ydHMgPSBFREU7CgpFREUuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKG9wdGlvbnMpIHsKICByZXR1cm4gbmV3IEVERShvcHRpb25zKTsKfTsKCkVERS5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUoaW5wLCBpbk9mZiwgb3V0LCBvdXRPZmYpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9lZGVTdGF0ZTsKCiAgc3RhdGUuY2lwaGVyc1swXS5fdXBkYXRlKGlucCwgaW5PZmYsIG91dCwgb3V0T2ZmKTsKICBzdGF0ZS5jaXBoZXJzWzFdLl91cGRhdGUob3V0LCBvdXRPZmYsIG91dCwgb3V0T2ZmKTsKICBzdGF0ZS5jaXBoZXJzWzJdLl91cGRhdGUob3V0LCBvdXRPZmYsIG91dCwgb3V0T2ZmKTsKfTsKCkVERS5wcm90b3R5cGUuX3BhZCA9IERFUy5wcm90b3R5cGUuX3BhZDsKRURFLnByb3RvdHlwZS5fdW5wYWQgPSBERVMucHJvdG90eXBlLl91bnBhZDsKCn0seyIuLi9kZXMiOjUzMCwiaW5oZXJpdHMiOjcwMSwibWluaW1hbGlzdGljLWFzc2VydCI6NTM2fV0sNTM1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKZXhwb3J0cy5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUoYnl0ZXMsIG9mZikgewogIHZhciByZXMgPSAgKGJ5dGVzWzAgKyBvZmZdIDw8IDI0KSB8CiAgICAgICAgICAgICAoYnl0ZXNbMSArIG9mZl0gPDwgMTYpIHwKICAgICAgICAgICAgIChieXRlc1syICsgb2ZmXSA8PCA4KSB8CiAgICAgICAgICAgICBieXRlc1szICsgb2ZmXTsKICByZXR1cm4gcmVzID4+PiAwOwp9OwoKZXhwb3J0cy53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRShieXRlcywgdmFsdWUsIG9mZikgewogIGJ5dGVzWzAgKyBvZmZdID0gdmFsdWUgPj4+IDI0OwogIGJ5dGVzWzEgKyBvZmZdID0gKHZhbHVlID4+PiAxNikgJiAweGZmOwogIGJ5dGVzWzIgKyBvZmZdID0gKHZhbHVlID4+PiA4KSAmIDB4ZmY7CiAgYnl0ZXNbMyArIG9mZl0gPSB2YWx1ZSAmIDB4ZmY7Cn07CgpleHBvcnRzLmlwID0gZnVuY3Rpb24gaXAoaW5MLCBpblIsIG91dCwgb2ZmKSB7CiAgdmFyIG91dEwgPSAwOwogIHZhciBvdXRSID0gMDsKCiAgZm9yICh2YXIgaSA9IDY7IGkgPj0gMDsgaSAtPSAyKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dEwgPDw9IDE7CiAgICAgIG91dEwgfD0gKGluUiA+Pj4gKGogKyBpKSkgJiAxOwogICAgfQogICAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpbkwgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CgogIGZvciAodmFyIGkgPSA2OyBpID49IDA7IGkgLT0gMikgewogICAgZm9yICh2YXIgaiA9IDE7IGogPD0gMjU7IGogKz0gOCkgewogICAgICBvdXRSIDw8PSAxOwogICAgICBvdXRSIHw9IChpblIgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICAgIGZvciAodmFyIGogPSAxOyBqIDw9IDI1OyBqICs9IDgpIHsKICAgICAgb3V0UiA8PD0gMTsKICAgICAgb3V0UiB8PSAoaW5MID4+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQoKICBvdXRbb2ZmICsgMF0gPSBvdXRMID4+PiAwOwogIG91dFtvZmYgKyAxXSA9IG91dFIgPj4+IDA7Cn07CgpleHBvcnRzLnJpcCA9IGZ1bmN0aW9uIHJpcChpbkwsIGluUiwgb3V0LCBvZmYpIHsKICB2YXIgb3V0TCA9IDA7CiAgdmFyIG91dFIgPSAwOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgZm9yICh2YXIgaiA9IDI0OyBqID49IDA7IGogLT0gOCkgewogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpblIgPj4+IChqICsgaSkpICYgMTsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5MID4+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQogIGZvciAodmFyIGkgPSA0OyBpIDwgODsgaSsrKSB7CiAgICBmb3IgKHZhciBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluUiA+Pj4gKGogKyBpKSkgJiAxOwogICAgICBvdXRSIDw8PSAxOwogICAgICBvdXRSIHw9IChpbkwgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CgogIG91dFtvZmYgKyAwXSA9IG91dEwgPj4+IDA7CiAgb3V0W29mZiArIDFdID0gb3V0UiA+Pj4gMDsKfTsKCmV4cG9ydHMucGMxID0gZnVuY3Rpb24gcGMxKGluTCwgaW5SLCBvdXQsIG9mZikgewogIHZhciBvdXRMID0gMDsKICB2YXIgb3V0UiA9IDA7CgogIC8vIDcsIDE1LCAyMywgMzEsIDM5LCA0NywgNTUsIDYzCiAgLy8gNiwgMTQsIDIyLCAzMCwgMzksIDQ3LCA1NSwgNjMKICAvLyA1LCAxMywgMjEsIDI5LCAzOSwgNDcsIDU1LCA2MwogIC8vIDQsIDEyLCAyMCwgMjgKICBmb3IgKHZhciBpID0gNzsgaSA+PSA1OyBpLS0pIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5SID4+IChqICsgaSkpICYgMTsKICAgIH0KICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5MID4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CiAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgb3V0TCA8PD0gMTsKICAgIG91dEwgfD0gKGluUiA+PiAoaiArIGkpKSAmIDE7CiAgfQoKICAvLyAxLCA5LCAxNywgMjUsIDMzLCA0MSwgNDksIDU3CiAgLy8gMiwgMTAsIDE4LCAyNiwgMzQsIDQyLCA1MCwgNTgKICAvLyAzLCAxMSwgMTksIDI3LCAzNSwgNDMsIDUxLCA1OQogIC8vIDM2LCA0NCwgNTIsIDYwCiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMzsgaSsrKSB7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluUiA+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluTCA+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgfQogIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgIG91dFIgPDw9IDE7CiAgICBvdXRSIHw9IChpbkwgPj4gKGogKyBpKSkgJiAxOwogIH0KCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKZXhwb3J0cy5yMjhzaGwgPSBmdW5jdGlvbiByMjhzaGwobnVtLCBzaGlmdCkgewogIHJldHVybiAoKG51bSA8PCBzaGlmdCkgJiAweGZmZmZmZmYpIHwgKG51bSA+Pj4gKDI4IC0gc2hpZnQpKTsKfTsKCnZhciBwYzJ0YWJsZSA9IFsKICAvLyBpbkwgPT4gb3V0TAogIDE0LCAxMSwgMTcsIDQsIDI3LCAyMywgMjUsIDAsCiAgMTMsIDIyLCA3LCAxOCwgNSwgOSwgMTYsIDI0LAogIDIsIDIwLCAxMiwgMjEsIDEsIDgsIDE1LCAyNiwKCiAgLy8gaW5SID0+IG91dFIKICAxNSwgNCwgMjUsIDE5LCA5LCAxLCAyNiwgMTYsCiAgNSwgMTEsIDIzLCA4LCAxMiwgNywgMTcsIDAsCiAgMjIsIDMsIDEwLCAxNCwgNiwgMjAsIDI3LCAyNApdOwoKZXhwb3J0cy5wYzIgPSBmdW5jdGlvbiBwYzIoaW5MLCBpblIsIG91dCwgb2ZmKSB7CiAgdmFyIG91dEwgPSAwOwogIHZhciBvdXRSID0gMDsKCiAgdmFyIGxlbiA9IHBjMnRhYmxlLmxlbmd0aCA+Pj4gMTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBvdXRMIDw8PSAxOwogICAgb3V0TCB8PSAoaW5MID4+PiBwYzJ0YWJsZVtpXSkgJiAweDE7CiAgfQogIGZvciAodmFyIGkgPSBsZW47IGkgPCBwYzJ0YWJsZS5sZW5ndGg7IGkrKykgewogICAgb3V0UiA8PD0gMTsKICAgIG91dFIgfD0gKGluUiA+Pj4gcGMydGFibGVbaV0pICYgMHgxOwogIH0KCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKZXhwb3J0cy5leHBhbmQgPSBmdW5jdGlvbiBleHBhbmQociwgb3V0LCBvZmYpIHsKICB2YXIgb3V0TCA9IDA7CiAgdmFyIG91dFIgPSAwOwoKICBvdXRMID0gKChyICYgMSkgPDwgNSkgfCAociA+Pj4gMjcpOwogIGZvciAodmFyIGkgPSAyMzsgaSA+PSAxNTsgaSAtPSA0KSB7CiAgICBvdXRMIDw8PSA2OwogICAgb3V0TCB8PSAociA+Pj4gaSkgJiAweDNmOwogIH0KICBmb3IgKHZhciBpID0gMTE7IGkgPj0gMzsgaSAtPSA0KSB7CiAgICBvdXRSIHw9IChyID4+PiBpKSAmIDB4M2Y7CiAgICBvdXRSIDw8PSA2OwogIH0KICBvdXRSIHw9ICgociAmIDB4MWYpIDw8IDEpIHwgKHIgPj4+IDMxKTsKCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKdmFyIHNUYWJsZSA9IFsKICAxNCwgMCwgNCwgMTUsIDEzLCA3LCAxLCA0LCAyLCAxNCwgMTUsIDIsIDExLCAxMywgOCwgMSwKICAzLCAxMCwgMTAsIDYsIDYsIDEyLCAxMiwgMTEsIDUsIDksIDksIDUsIDAsIDMsIDcsIDgsCiAgNCwgMTUsIDEsIDEyLCAxNCwgOCwgOCwgMiwgMTMsIDQsIDYsIDksIDIsIDEsIDExLCA3LAogIDE1LCA1LCAxMiwgMTEsIDksIDMsIDcsIDE0LCAzLCAxMCwgMTAsIDAsIDUsIDYsIDAsIDEzLAoKICAxNSwgMywgMSwgMTMsIDgsIDQsIDE0LCA3LCA2LCAxNSwgMTEsIDIsIDMsIDgsIDQsIDE0LAogIDksIDEyLCA3LCAwLCAyLCAxLCAxMywgMTAsIDEyLCA2LCAwLCA5LCA1LCAxMSwgMTAsIDUsCiAgMCwgMTMsIDE0LCA4LCA3LCAxMCwgMTEsIDEsIDEwLCAzLCA0LCAxNSwgMTMsIDQsIDEsIDIsCiAgNSwgMTEsIDgsIDYsIDEyLCA3LCA2LCAxMiwgOSwgMCwgMywgNSwgMiwgMTQsIDE1LCA5LAoKICAxMCwgMTMsIDAsIDcsIDksIDAsIDE0LCA5LCA2LCAzLCAzLCA0LCAxNSwgNiwgNSwgMTAsCiAgMSwgMiwgMTMsIDgsIDEyLCA1LCA3LCAxNCwgMTEsIDEyLCA0LCAxMSwgMiwgMTUsIDgsIDEsCiAgMTMsIDEsIDYsIDEwLCA0LCAxMywgOSwgMCwgOCwgNiwgMTUsIDksIDMsIDgsIDAsIDcsCiAgMTEsIDQsIDEsIDE1LCAyLCAxNCwgMTIsIDMsIDUsIDExLCAxMCwgNSwgMTQsIDIsIDcsIDEyLAoKICA3LCAxMywgMTMsIDgsIDE0LCAxMSwgMywgNSwgMCwgNiwgNiwgMTUsIDksIDAsIDEwLCAzLAogIDEsIDQsIDIsIDcsIDgsIDIsIDUsIDEyLCAxMSwgMSwgMTIsIDEwLCA0LCAxNCwgMTUsIDksCiAgMTAsIDMsIDYsIDE1LCA5LCAwLCAwLCA2LCAxMiwgMTAsIDExLCAxLCA3LCAxMywgMTMsIDgsCiAgMTUsIDksIDEsIDQsIDMsIDUsIDE0LCAxMSwgNSwgMTIsIDIsIDcsIDgsIDIsIDQsIDE0LAoKICAyLCAxNCwgMTIsIDExLCA0LCAyLCAxLCAxMiwgNywgNCwgMTAsIDcsIDExLCAxMywgNiwgMSwKICA4LCA1LCA1LCAwLCAzLCAxNSwgMTUsIDEwLCAxMywgMywgMCwgOSwgMTQsIDgsIDksIDYsCiAgNCwgMTEsIDIsIDgsIDEsIDEyLCAxMSwgNywgMTAsIDEsIDEzLCAxNCwgNywgMiwgOCwgMTMsCiAgMTUsIDYsIDksIDE1LCAxMiwgMCwgNSwgOSwgNiwgMTAsIDMsIDQsIDAsIDUsIDE0LCAzLAoKICAxMiwgMTAsIDEsIDE1LCAxMCwgNCwgMTUsIDIsIDksIDcsIDIsIDEyLCA2LCA5LCA4LCA1LAogIDAsIDYsIDEzLCAxLCAzLCAxMywgNCwgMTQsIDE0LCAwLCA3LCAxMSwgNSwgMywgMTEsIDgsCiAgOSwgNCwgMTQsIDMsIDE1LCAyLCA1LCAxMiwgMiwgOSwgOCwgNSwgMTIsIDE1LCAzLCAxMCwKICA3LCAxMSwgMCwgMTQsIDQsIDEsIDEwLCA3LCAxLCA2LCAxMywgMCwgMTEsIDgsIDYsIDEzLAoKICA0LCAxMywgMTEsIDAsIDIsIDExLCAxNCwgNywgMTUsIDQsIDAsIDksIDgsIDEsIDEzLCAxMCwKICAzLCAxNCwgMTIsIDMsIDksIDUsIDcsIDEyLCA1LCAyLCAxMCwgMTUsIDYsIDgsIDEsIDYsCiAgMSwgNiwgNCwgMTEsIDExLCAxMywgMTMsIDgsIDEyLCAxLCAzLCA0LCA3LCAxMCwgMTQsIDcsCiAgMTAsIDksIDE1LCA1LCA2LCAwLCA4LCAxNSwgMCwgMTQsIDUsIDIsIDksIDMsIDIsIDEyLAoKICAxMywgMSwgMiwgMTUsIDgsIDEzLCA0LCA4LCA2LCAxMCwgMTUsIDMsIDExLCA3LCAxLCA0LAogIDEwLCAxMiwgOSwgNSwgMywgNiwgMTQsIDExLCA1LCAwLCAwLCAxNCwgMTIsIDksIDcsIDIsCiAgNywgMiwgMTEsIDEsIDQsIDE0LCAxLCA3LCA5LCA0LCAxMiwgMTAsIDE0LCA4LCAyLCAxMywKICAwLCAxNSwgNiwgMTIsIDEwLCA5LCAxMywgMCwgMTUsIDMsIDMsIDUsIDUsIDYsIDgsIDExCl07CgpleHBvcnRzLnN1YnN0aXR1dGUgPSBmdW5jdGlvbiBzdWJzdGl0dXRlKGluTCwgaW5SKSB7CiAgdmFyIG91dCA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIHZhciBiID0gKGluTCA+Pj4gKDE4IC0gaSAqIDYpKSAmIDB4M2Y7CiAgICB2YXIgc2IgPSBzVGFibGVbaSAqIDB4NDAgKyBiXTsKCiAgICBvdXQgPDw9IDQ7CiAgICBvdXQgfD0gc2I7CiAgfQogIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICB2YXIgYiA9IChpblIgPj4+ICgxOCAtIGkgKiA2KSkgJiAweDNmOwogICAgdmFyIHNiID0gc1RhYmxlWzQgKiAweDQwICsgaSAqIDB4NDAgKyBiXTsKCiAgICBvdXQgPDw9IDQ7CiAgICBvdXQgfD0gc2I7CiAgfQogIHJldHVybiBvdXQgPj4+IDA7Cn07Cgp2YXIgcGVybXV0ZVRhYmxlID0gWwogIDE2LCAyNSwgMTIsIDExLCAzLCAyMCwgNCwgMTUsIDMxLCAxNywgOSwgNiwgMjcsIDE0LCAxLCAyMiwKICAzMCwgMjQsIDgsIDE4LCAwLCA1LCAyOSwgMjMsIDEzLCAxOSwgMiwgMjYsIDEwLCAyMSwgMjgsIDcKXTsKCmV4cG9ydHMucGVybXV0ZSA9IGZ1bmN0aW9uIHBlcm11dGUobnVtKSB7CiAgdmFyIG91dCA9IDA7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZXJtdXRlVGFibGUubGVuZ3RoOyBpKyspIHsKICAgIG91dCA8PD0gMTsKICAgIG91dCB8PSAobnVtID4+PiBwZXJtdXRlVGFibGVbaV0pICYgMHgxOwogIH0KICByZXR1cm4gb3V0ID4+PiAwOwp9OwoKZXhwb3J0cy5wYWRTcGxpdCA9IGZ1bmN0aW9uIHBhZFNwbGl0KG51bSwgc2l6ZSwgZ3JvdXApIHsKICB2YXIgc3RyID0gbnVtLnRvU3RyaW5nKDIpOwogIHdoaWxlIChzdHIubGVuZ3RoIDwgc2l6ZSkKICAgIHN0ciA9ICcwJyArIHN0cjsKCiAgdmFyIG91dCA9IFtdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSArPSBncm91cCkKICAgIG91dC5wdXNoKHN0ci5zbGljZShpLCBpICsgZ3JvdXApKTsKICByZXR1cm4gb3V0LmpvaW4oJyAnKTsKfTsKCn0se31dLDUzNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gYXNzZXJ0OwoKZnVuY3Rpb24gYXNzZXJ0KHZhbCwgbXNnKSB7CiAgaWYgKCF2YWwpCiAgICB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICdBc3NlcnRpb24gZmFpbGVkJyk7Cn0KCmFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIGFzc2VydEVxdWFsKGwsIHIsIG1zZykgewogIGlmIChsICE9IHIpCiAgICB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICgnQXNzZXJ0aW9uIGZhaWxlZDogJyArIGwgKyAnICE9ICcgKyByKSk7Cn07Cgp9LHt9XSw1Mzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBtZDUgPSByZXF1aXJlKCdjcmVhdGUtaGFzaC9tZDUnKQptb2R1bGUuZXhwb3J0cyA9IEVWUF9CeXRlc1RvS2V5CmZ1bmN0aW9uIEVWUF9CeXRlc1RvS2V5IChwYXNzd29yZCwgc2FsdCwga2V5TGVuLCBpdkxlbikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKHBhc3N3b3JkKSkgewogICAgcGFzc3dvcmQgPSBuZXcgQnVmZmVyKHBhc3N3b3JkLCAnYmluYXJ5JykKICB9CiAgaWYgKHNhbHQgJiYgIUJ1ZmZlci5pc0J1ZmZlcihzYWx0KSkgewogICAgc2FsdCA9IG5ldyBCdWZmZXIoc2FsdCwgJ2JpbmFyeScpCiAgfQogIGtleUxlbiA9IGtleUxlbiAvIDgKICBpdkxlbiA9IGl2TGVuIHx8IDAKICB2YXIga2kgPSAwCiAgdmFyIGlpID0gMAogIHZhciBrZXkgPSBuZXcgQnVmZmVyKGtleUxlbikKICB2YXIgaXYgPSBuZXcgQnVmZmVyKGl2TGVuKQogIHZhciBhZGRtZCA9IDAKICB2YXIgbWRfYnVmCiAgdmFyIGkKICB2YXIgYnVmcyA9IFtdCiAgd2hpbGUgKHRydWUpIHsKICAgIGlmIChhZGRtZCsrID4gMCkgewogICAgICBidWZzLnB1c2gobWRfYnVmKQogICAgfQogICAgYnVmcy5wdXNoKHBhc3N3b3JkKQogICAgaWYgKHNhbHQpIHsKICAgICAgYnVmcy5wdXNoKHNhbHQpCiAgICB9CiAgICBtZF9idWYgPSBtZDUoQnVmZmVyLmNvbmNhdChidWZzKSkKICAgIGJ1ZnMgPSBbXQogICAgaSA9IDAKICAgIGlmIChrZXlMZW4gPiAwKSB7CiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgaWYgKGtleUxlbiA9PT0gMCkgewogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAgaWYgKGkgPT09IG1kX2J1Zi5sZW5ndGgpIHsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIGtleVtraSsrXSA9IG1kX2J1ZltpXQogICAgICAgIGtleUxlbi0tCiAgICAgICAgaSsrCiAgICAgIH0KICAgIH0KICAgIGlmIChpdkxlbiA+IDAgJiYgaSAhPT0gbWRfYnVmLmxlbmd0aCkgewogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIGlmIChpdkxlbiA9PT0gMCkgewogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgICAgaWYgKGkgPT09IG1kX2J1Zi5sZW5ndGgpIHsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIGl2W2lpKytdID0gbWRfYnVmW2ldCiAgICAgICAgaXZMZW4tLQogICAgICAgIGkrKwogICAgICB9CiAgICB9CiAgICBpZiAoa2V5TGVuID09PSAwICYmIGl2TGVuID09PSAwKSB7CiAgICAgIGJyZWFrCiAgICB9CiAgfQogIGZvciAoaSA9IDA7IGkgPCBtZF9idWYubGVuZ3RoOyBpKyspIHsKICAgIG1kX2J1ZltpXSA9IDAKICB9CiAgcmV0dXJuIHsKICAgIGtleToga2V5LAogICAgaXY6IGl2CiAgfQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDQsImNyZWF0ZS1oYXNoL21kNSI6NjM0fV0sNTM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCcKZXhwb3J0c1snUlNBLVNIQTIyNCddID0gZXhwb3J0cy5zaGEyMjRXaXRoUlNBRW5jcnlwdGlvbiA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAnc2hhMjI0JywKICBpZDogbmV3IEJ1ZmZlcignMzAyZDMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjA0MDUwMDA0MWMnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtU0hBMjU2J10gPSBleHBvcnRzLnNoYTI1NldpdGhSU0FFbmNyeXB0aW9uID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdzaGEyNTYnLAogIGlkOiBuZXcgQnVmZmVyKCczMDMxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDEwNTAwMDQyMCcsICdoZXgnKQp9CmV4cG9ydHNbJ1JTQS1TSEEzODQnXSA9IGV4cG9ydHMuc2hhMzg0V2l0aFJTQUVuY3J5cHRpb24gPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ3NoYTM4NCcsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwNDEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMjA1MDAwNDMwJywgJ2hleCcpCn0KZXhwb3J0c1snUlNBLVNIQTUxMiddID0gZXhwb3J0cy5zaGE1MTJXaXRoUlNBRW5jcnlwdGlvbiA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAnc2hhNTEyJywKICBpZDogbmV3IEJ1ZmZlcignMzA1MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAzMDUwMDA0NDAnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtU0hBMSddID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdzaGExJywKICBpZDogbmV3IEJ1ZmZlcignMzAyMTMwMDkwNjA1MmIwZTAzMDIxYTA1MDAwNDE0JywgJ2hleCcpCn0KZXhwb3J0c1snZWNkc2Etd2l0aC1TSEExJ10gPSB7CiAgc2lnbjogJ2VjZHNhJywKICBoYXNoOiAnc2hhMScsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CgpleHBvcnRzLkRTQSA9IGV4cG9ydHNbJ0RTQS1TSEExJ10gPSBleHBvcnRzWydEU0EtU0hBJ10gPSB7CiAgc2lnbjogJ2RzYScsCiAgaGFzaDogJ3NoYTEnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydEU0EtU0hBMjI0J10gPSBleHBvcnRzWydEU0EtV0lUSC1TSEEyMjQnXSA9IHsKICBzaWduOiAnZHNhJywKICBoYXNoOiAnc2hhMjI0JywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KZXhwb3J0c1snRFNBLVNIQTI1NiddID0gZXhwb3J0c1snRFNBLVdJVEgtU0hBMjU2J10gPSB7CiAgc2lnbjogJ2RzYScsCiAgaGFzaDogJ3NoYTI1NicsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CmV4cG9ydHNbJ0RTQS1TSEEzODQnXSA9IGV4cG9ydHNbJ0RTQS1XSVRILVNIQTM4NCddID0gewogIHNpZ246ICdkc2EnLAogIGhhc2g6ICdzaGEzODQnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydEU0EtU0hBNTEyJ10gPSBleHBvcnRzWydEU0EtV0lUSC1TSEE1MTInXSA9IHsKICBzaWduOiAnZHNhJywKICBoYXNoOiAnc2hhNTEyJywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KZXhwb3J0c1snRFNBLVJJUEVNRDE2MCddID0gewogIHNpZ246ICdkc2EnLAogIGhhc2g6ICdybWQxNjAnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtUklQRU1EMTYwJ10gPSBleHBvcnRzLnJpcGVtZDE2MFdpdGhSU0EgPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ3JtZDE2MCcsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwMjEzMDA5MDYwNTJiMjQwMzAyMDEwNTAwMDQxNCcsICdoZXgnKQp9CmV4cG9ydHNbJ1JTQS1NRDUnXSA9IGV4cG9ydHMubWQ1V2l0aFJTQUVuY3J5cHRpb24gPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ21kNScsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwMjAzMDBjMDYwODJhODY0ODg2ZjcwZDAyMDUwNTAwMDQxMCcsICdoZXgnKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDR9XSw1Mzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBfYWxnb3MgPSByZXF1aXJlKCcuL2FsZ29zJykKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIHNpZ24gPSByZXF1aXJlKCcuL3NpZ24nKQp2YXIgc3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJykKdmFyIHZlcmlmeSA9IHJlcXVpcmUoJy4vdmVyaWZ5JykKCnZhciBhbGdvcyA9IHt9Ck9iamVjdC5rZXlzKF9hbGdvcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgYWxnb3Nba2V5XSA9IGFsZ29zW2tleS50b0xvd2VyQ2FzZSgpXSA9IF9hbGdvc1trZXldCn0pCgpmdW5jdGlvbiBTaWduIChhbGdvcml0aG0pIHsKICBzdHJlYW0uV3JpdGFibGUuY2FsbCh0aGlzKQoKICB2YXIgZGF0YSA9IGFsZ29zW2FsZ29yaXRobV0KICBpZiAoIWRhdGEpIHsKICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBtZXNzYWdlIGRpZ2VzdCcpCiAgfQoKICB0aGlzLl9oYXNoVHlwZSA9IGRhdGEuaGFzaAogIHRoaXMuX2hhc2ggPSBjcmVhdGVIYXNoKGRhdGEuaGFzaCkKICB0aGlzLl90YWcgPSBkYXRhLmlkCiAgdGhpcy5fc2lnblR5cGUgPSBkYXRhLnNpZ24KfQppbmhlcml0cyhTaWduLCBzdHJlYW0uV3JpdGFibGUpCgpTaWduLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiBfd3JpdGUgKGRhdGEsIF8sIGRvbmUpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQogIGRvbmUoKQp9CgpTaWduLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUgKGRhdGEsIGVuYykgewogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgIGRhdGEgPSBuZXcgQnVmZmVyKGRhdGEsIGVuYykKICB9CgogIHRoaXMuX2hhc2gudXBkYXRlKGRhdGEpCiAgcmV0dXJuIHRoaXMKfQoKU2lnbi5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ25NZXRob2QgKGtleSwgZW5jKSB7CiAgdGhpcy5lbmQoKQogIHZhciBoYXNoID0gdGhpcy5faGFzaC5kaWdlc3QoKQogIHZhciBzaWcgPSBzaWduKEJ1ZmZlci5jb25jYXQoW3RoaXMuX3RhZywgaGFzaF0pLCBrZXksIHRoaXMuX2hhc2hUeXBlLCB0aGlzLl9zaWduVHlwZSkKCiAgcmV0dXJuIGVuYyA/IHNpZy50b1N0cmluZyhlbmMpIDogc2lnCn0KCmZ1bmN0aW9uIFZlcmlmeSAoYWxnb3JpdGhtKSB7CiAgc3RyZWFtLldyaXRhYmxlLmNhbGwodGhpcykKCiAgdmFyIGRhdGEgPSBhbGdvc1thbGdvcml0aG1dCiAgaWYgKCFkYXRhKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbWVzc2FnZSBkaWdlc3QnKQogIH0KCiAgdGhpcy5faGFzaCA9IGNyZWF0ZUhhc2goZGF0YS5oYXNoKQogIHRoaXMuX3RhZyA9IGRhdGEuaWQKICB0aGlzLl9zaWduVHlwZSA9IGRhdGEuc2lnbgp9CmluaGVyaXRzKFZlcmlmeSwgc3RyZWFtLldyaXRhYmxlKQoKVmVyaWZ5LnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiBfd3JpdGUgKGRhdGEsIF8sIGRvbmUpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQoKICBkb25lKCkKfQoKVmVyaWZ5LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUgKGRhdGEsIGVuYykgewogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgIGRhdGEgPSBuZXcgQnVmZmVyKGRhdGEsIGVuYykKICB9CgogIHRoaXMuX2hhc2gudXBkYXRlKGRhdGEpCiAgcmV0dXJuIHRoaXMKfQoKVmVyaWZ5LnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnlNZXRob2QgKGtleSwgc2lnLCBlbmMpIHsKICBpZiAodHlwZW9mIHNpZyA9PT0gJ3N0cmluZycpIHsKICAgIHNpZyA9IG5ldyBCdWZmZXIoc2lnLCBlbmMpCiAgfQoKICB0aGlzLmVuZCgpCiAgdmFyIGhhc2ggPSB0aGlzLl9oYXNoLmRpZ2VzdCgpCgogIHJldHVybiB2ZXJpZnkoc2lnLCBCdWZmZXIuY29uY2F0KFt0aGlzLl90YWcsIGhhc2hdKSwga2V5LCB0aGlzLl9zaWduVHlwZSkKfQoKZnVuY3Rpb24gY3JlYXRlU2lnbiAoYWxnb3JpdGhtKSB7CiAgcmV0dXJuIG5ldyBTaWduKGFsZ29yaXRobSkKfQoKZnVuY3Rpb24gY3JlYXRlVmVyaWZ5IChhbGdvcml0aG0pIHsKICByZXR1cm4gbmV3IFZlcmlmeShhbGdvcml0aG0pCn0KCm1vZHVsZS5leHBvcnRzID0gewogIFNpZ246IGNyZWF0ZVNpZ24sCiAgVmVyaWZ5OiBjcmVhdGVWZXJpZnksCiAgY3JlYXRlU2lnbjogY3JlYXRlU2lnbiwKICBjcmVhdGVWZXJpZnk6IGNyZWF0ZVZlcmlmeQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hbGdvcyI6NTM4LCIuL3NpZ24iOjYwNCwiLi92ZXJpZnkiOjYwNSwiYnVmZmVyIjo1MDQsImNyZWF0ZS1oYXNoIjo2MzIsImluaGVyaXRzIjo3MDEsInN0cmVhbSI6NzE5fV0sNTQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnCmV4cG9ydHNbJzEuMy4xMzIuMC4xMCddID0gJ3NlY3AyNTZrMScKCmV4cG9ydHNbJzEuMy4xMzIuMC4zMyddID0gJ3AyMjQnCgpleHBvcnRzWycxLjIuODQwLjEwMDQ1LjMuMS4xJ10gPSAncDE5MicKCmV4cG9ydHNbJzEuMi44NDAuMTAwNDUuMy4xLjcnXSA9ICdwMjU2JwoKZXhwb3J0c1snMS4zLjEzMi4wLjM0J10gPSAncDM4NCcKCmV4cG9ydHNbJzEuMy4xMzIuMC4zNSddID0gJ3A1MjEnCgp9LHt9XSw1NDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogICd1c2Ugc3RyaWN0JzsKCiAgLy8gVXRpbHMKICBmdW5jdGlvbiBhc3NlcnQgKHZhbCwgbXNnKSB7CiAgICBpZiAoIXZhbCkgdGhyb3cgbmV3IEVycm9yKG1zZyB8fCAnQXNzZXJ0aW9uIGZhaWxlZCcpOwogIH0KCiAgLy8gQ291bGQgdXNlIGBpbmhlcml0c2AgbW9kdWxlLCBidXQgZG9uJ3Qgd2FudCB0byBtb3ZlIGZyb20gc2luZ2xlIGZpbGUKICAvLyBhcmNoaXRlY3R1cmUgeWV0LgogIGZ1bmN0aW9uIGluaGVyaXRzIChjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge307CiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlOwogICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKTsKICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvcjsKICB9CgogIC8vIEJOCgogIGZ1bmN0aW9uIEJOIChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgaWYgKEJOLmlzQk4obnVtYmVyKSkgewogICAgICByZXR1cm4gbnVtYmVyOwogICAgfQoKICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgdGhpcy53b3JkcyA9IG51bGw7CiAgICB0aGlzLmxlbmd0aCA9IDA7CgogICAgLy8gUmVkdWN0aW9uIGNvbnRleHQKICAgIHRoaXMucmVkID0gbnVsbDsKCiAgICBpZiAobnVtYmVyICE9PSBudWxsKSB7CiAgICAgIGlmIChiYXNlID09PSAnbGUnIHx8IGJhc2UgPT09ICdiZScpIHsKICAgICAgICBlbmRpYW4gPSBiYXNlOwogICAgICAgIGJhc2UgPSAxMDsKICAgICAgfQoKICAgICAgdGhpcy5faW5pdChudW1iZXIgfHwgMCwgYmFzZSB8fCAxMCwgZW5kaWFuIHx8ICdiZScpOwogICAgfQogIH0KICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gQk47CiAgfSBlbHNlIHsKICAgIGV4cG9ydHMuQk4gPSBCTjsKICB9CgogIEJOLkJOID0gQk47CiAgQk4ud29yZFNpemUgPSAyNjsKCiAgdmFyIEJ1ZmZlcjsKICB0cnkgewogICAgQnVmZmVyID0gcmVxdWlyZSgnYnVmJyArICdmZXInKS5CdWZmZXI7CiAgfSBjYXRjaCAoZSkgewogIH0KCiAgQk4uaXNCTiA9IGZ1bmN0aW9uIGlzQk4gKG51bSkgewogICAgcmV0dXJuIG51bSAhPT0gbnVsbCAmJiB0eXBlb2YgbnVtID09PSAnb2JqZWN0JyAmJgogICAgICBudW0uY29uc3RydWN0b3IubmFtZSA9PT0gJ0JOJyAmJiBBcnJheS5pc0FycmF5KG51bS53b3Jkcyk7CiAgfTsKCiAgQk4ubWF4ID0gZnVuY3Rpb24gbWF4IChsZWZ0LCByaWdodCkgewogICAgaWYgKGxlZnQuY21wKHJpZ2h0KSA+IDApIHJldHVybiBsZWZ0OwogICAgcmV0dXJuIHJpZ2h0OwogIH07CgogIEJOLm1pbiA9IGZ1bmN0aW9uIG1pbiAobGVmdCwgcmlnaHQpIHsKICAgIGlmIChsZWZ0LmNtcChyaWdodCkgPCAwKSByZXR1cm4gbGVmdDsKICAgIHJldHVybiByaWdodDsKICB9OwoKICBCTi5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0IChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgaWYgKHR5cGVvZiBudW1iZXIgPT09ICdudW1iZXInKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbml0TnVtYmVyKG51bWJlciwgYmFzZSwgZW5kaWFuKTsKICAgIH0KCiAgICBpZiAodHlwZW9mIG51bWJlciA9PT0gJ29iamVjdCcpIHsKICAgICAgcmV0dXJuIHRoaXMuX2luaXRBcnJheShudW1iZXIsIGJhc2UsIGVuZGlhbik7CiAgICB9CgogICAgaWYgKGJhc2UgPT09ICdoZXgnKSB7CiAgICAgIGJhc2UgPSAxNjsKICAgIH0KICAgIGFzc2VydChiYXNlID09PSAoYmFzZSB8IDApICYmIGJhc2UgPj0gMiAmJiBiYXNlIDw9IDM2KTsKCiAgICBudW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywgJycpOwogICAgdmFyIHN0YXJ0ID0gMDsKICAgIGlmIChudW1iZXJbMF0gPT09ICctJykgewogICAgICBzdGFydCsrOwogICAgfQoKICAgIGlmIChiYXNlID09PSAxNikgewogICAgICB0aGlzLl9wYXJzZUhleChudW1iZXIsIHN0YXJ0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX3BhcnNlQmFzZShudW1iZXIsIGJhc2UsIHN0YXJ0KTsKICAgIH0KCiAgICBpZiAobnVtYmVyWzBdID09PSAnLScpIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICB9CgogICAgdGhpcy5zdHJpcCgpOwoKICAgIGlmIChlbmRpYW4gIT09ICdsZScpIHJldHVybjsKCiAgICB0aGlzLl9pbml0QXJyYXkodGhpcy50b0FycmF5KCksIGJhc2UsIGVuZGlhbik7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9pbml0TnVtYmVyID0gZnVuY3Rpb24gX2luaXROdW1iZXIgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICBpZiAobnVtYmVyIDwgMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgbnVtYmVyID0gLW51bWJlcjsKICAgIH0KICAgIGlmIChudW1iZXIgPCAweDQwMDAwMDApIHsKICAgICAgdGhpcy53b3JkcyA9IFsgbnVtYmVyICYgMHgzZmZmZmZmIF07CiAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgIH0gZWxzZSBpZiAobnVtYmVyIDwgMHgxMDAwMDAwMDAwMDAwMCkgewogICAgICB0aGlzLndvcmRzID0gWwogICAgICAgIG51bWJlciAmIDB4M2ZmZmZmZiwKICAgICAgICAobnVtYmVyIC8gMHg0MDAwMDAwKSAmIDB4M2ZmZmZmZgogICAgICBdOwogICAgICB0aGlzLmxlbmd0aCA9IDI7CiAgICB9IGVsc2UgewogICAgICBhc3NlcnQobnVtYmVyIDwgMHgyMDAwMDAwMDAwMDAwMCk7IC8vIDIgXiA1MyAodW5zYWZlKQogICAgICB0aGlzLndvcmRzID0gWwogICAgICAgIG51bWJlciAmIDB4M2ZmZmZmZiwKICAgICAgICAobnVtYmVyIC8gMHg0MDAwMDAwKSAmIDB4M2ZmZmZmZiwKICAgICAgICAxCiAgICAgIF07CiAgICAgIHRoaXMubGVuZ3RoID0gMzsKICAgIH0KCiAgICBpZiAoZW5kaWFuICE9PSAnbGUnKSByZXR1cm47CgogICAgLy8gUmV2ZXJzZSB0aGUgYnl0ZXMKICAgIHRoaXMuX2luaXRBcnJheSh0aGlzLnRvQXJyYXkoKSwgYmFzZSwgZW5kaWFuKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX2luaXRBcnJheSA9IGZ1bmN0aW9uIF9pbml0QXJyYXkgKG51bWJlciwgYmFzZSwgZW5kaWFuKSB7CiAgICAvLyBQZXJoYXBzIGEgVWludDhBcnJheQogICAgYXNzZXJ0KHR5cGVvZiBudW1iZXIubGVuZ3RoID09PSAnbnVtYmVyJyk7CiAgICBpZiAobnVtYmVyLmxlbmd0aCA8PSAwKSB7CiAgICAgIHRoaXMud29yZHMgPSBbIDAgXTsKICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICB0aGlzLmxlbmd0aCA9IE1hdGguY2VpbChudW1iZXIubGVuZ3RoIC8gMyk7CiAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gMDsKICAgIH0KCiAgICB2YXIgaiwgdzsKICAgIHZhciBvZmYgPSAwOwogICAgaWYgKGVuZGlhbiA9PT0gJ2JlJykgewogICAgICBmb3IgKGkgPSBudW1iZXIubGVuZ3RoIC0gMSwgaiA9IDA7IGkgPj0gMDsgaSAtPSAzKSB7CiAgICAgICAgdyA9IG51bWJlcltpXSB8IChudW1iZXJbaSAtIDFdIDw8IDgpIHwgKG51bWJlcltpIC0gMl0gPDwgMTYpOwogICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICB0aGlzLndvcmRzW2ogKyAxXSA9ICh3ID4+PiAoMjYgLSBvZmYpKSAmIDB4M2ZmZmZmZjsKICAgICAgICBvZmYgKz0gMjQ7CiAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgaisrOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIGlmIChlbmRpYW4gPT09ICdsZScpIHsKICAgICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBudW1iZXIubGVuZ3RoOyBpICs9IDMpIHsKICAgICAgICB3ID0gbnVtYmVyW2ldIHwgKG51bWJlcltpICsgMV0gPDwgOCkgfCAobnVtYmVyW2kgKyAyXSA8PCAxNik7CiAgICAgICAgdGhpcy53b3Jkc1tqXSB8PSAodyA8PCBvZmYpICYgMHgzZmZmZmZmOwogICAgICAgIHRoaXMud29yZHNbaiArIDFdID0gKHcgPj4+ICgyNiAtIG9mZikpICYgMHgzZmZmZmZmOwogICAgICAgIG9mZiArPSAyNDsKICAgICAgICBpZiAob2ZmID49IDI2KSB7CiAgICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgICBqKys7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIGZ1bmN0aW9uIHBhcnNlSGV4IChzdHIsIHN0YXJ0LCBlbmQpIHsKICAgIHZhciByID0gMDsKICAgIHZhciBsZW4gPSBNYXRoLm1pbihzdHIubGVuZ3RoLCBlbmQpOwogICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgbGVuOyBpKyspIHsKICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKSAtIDQ4OwoKICAgICAgciA8PD0gNDsKCiAgICAgIC8vICdhJyAtICdmJwogICAgICBpZiAoYyA+PSA0OSAmJiBjIDw9IDU0KSB7CiAgICAgICAgciB8PSBjIC0gNDkgKyAweGE7CgogICAgICAvLyAnQScgLSAnRicKICAgICAgfSBlbHNlIGlmIChjID49IDE3ICYmIGMgPD0gMjIpIHsKICAgICAgICByIHw9IGMgLSAxNyArIDB4YTsKCiAgICAgIC8vICcwJyAtICc5JwogICAgICB9IGVsc2UgewogICAgICAgIHIgfD0gYyAmIDB4ZjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHI7CiAgfQoKICBCTi5wcm90b3R5cGUuX3BhcnNlSGV4ID0gZnVuY3Rpb24gX3BhcnNlSGV4IChudW1iZXIsIHN0YXJ0KSB7CiAgICAvLyBDcmVhdGUgcG9zc2libHkgYmlnZ2VyIGFycmF5IHRvIGVuc3VyZSB0aGF0IGl0IGZpdHMgdGhlIG51bWJlcgogICAgdGhpcy5sZW5ndGggPSBNYXRoLmNlaWwoKG51bWJlci5sZW5ndGggLSBzdGFydCkgLyA2KTsKICAgIHRoaXMud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSAwOwogICAgfQoKICAgIHZhciBqLCB3OwogICAgLy8gU2NhbiAyNC1iaXQgY2h1bmtzIGFuZCBhZGQgdGhlbSB0byB0aGUgbnVtYmVyCiAgICB2YXIgb2ZmID0gMDsKICAgIGZvciAoaSA9IG51bWJlci5sZW5ndGggLSA2LCBqID0gMDsgaSA+PSBzdGFydDsgaSAtPSA2KSB7CiAgICAgIHcgPSBwYXJzZUhleChudW1iZXIsIGksIGkgKyA2KTsKICAgICAgdGhpcy53b3Jkc1tqXSB8PSAodyA8PCBvZmYpICYgMHgzZmZmZmZmOwogICAgICAvLyBOT1RFOiBgMHgzZmZmZmZgIGlzIGludGVudGlvbmFsIGhlcmUsIDI2Yml0cyBtYXggc2hpZnQgKyAyNGJpdCBoZXggbGltYgogICAgICB0aGlzLndvcmRzW2ogKyAxXSB8PSB3ID4+PiAoMjYgLSBvZmYpICYgMHgzZmZmZmY7CiAgICAgIG9mZiArPSAyNDsKICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgIG9mZiAtPSAyNjsKICAgICAgICBqKys7CiAgICAgIH0KICAgIH0KICAgIGlmIChpICsgNiAhPT0gc3RhcnQpIHsKICAgICAgdyA9IHBhcnNlSGV4KG51bWJlciwgc3RhcnQsIGkgKyA2KTsKICAgICAgdGhpcy53b3Jkc1tqXSB8PSAodyA8PCBvZmYpICYgMHgzZmZmZmZmOwogICAgICB0aGlzLndvcmRzW2ogKyAxXSB8PSB3ID4+PiAoMjYgLSBvZmYpICYgMHgzZmZmZmY7CiAgICB9CiAgICB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgZnVuY3Rpb24gcGFyc2VCYXNlIChzdHIsIHN0YXJ0LCBlbmQsIG11bCkgewogICAgdmFyIHIgPSAwOwogICAgdmFyIGxlbiA9IE1hdGgubWluKHN0ci5sZW5ndGgsIGVuZCk7CiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBsZW47IGkrKykgewogICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gNDg7CgogICAgICByICo9IG11bDsKCiAgICAgIC8vICdhJwogICAgICBpZiAoYyA+PSA0OSkgewogICAgICAgIHIgKz0gYyAtIDQ5ICsgMHhhOwoKICAgICAgLy8gJ0EnCiAgICAgIH0gZWxzZSBpZiAoYyA+PSAxNykgewogICAgICAgIHIgKz0gYyAtIDE3ICsgMHhhOwoKICAgICAgLy8gJzAnIC0gJzknCiAgICAgIH0gZWxzZSB7CiAgICAgICAgciArPSBjOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcjsKICB9CgogIEJOLnByb3RvdHlwZS5fcGFyc2VCYXNlID0gZnVuY3Rpb24gX3BhcnNlQmFzZSAobnVtYmVyLCBiYXNlLCBzdGFydCkgewogICAgLy8gSW5pdGlhbGl6ZSBhcyB6ZXJvCiAgICB0aGlzLndvcmRzID0gWyAwIF07CiAgICB0aGlzLmxlbmd0aCA9IDE7CgogICAgLy8gRmluZCBsZW5ndGggb2YgbGltYiBpbiBiYXNlCiAgICBmb3IgKHZhciBsaW1iTGVuID0gMCwgbGltYlBvdyA9IDE7IGxpbWJQb3cgPD0gMHgzZmZmZmZmOyBsaW1iUG93ICo9IGJhc2UpIHsKICAgICAgbGltYkxlbisrOwogICAgfQogICAgbGltYkxlbi0tOwogICAgbGltYlBvdyA9IChsaW1iUG93IC8gYmFzZSkgfCAwOwoKICAgIHZhciB0b3RhbCA9IG51bWJlci5sZW5ndGggLSBzdGFydDsKICAgIHZhciBtb2QgPSB0b3RhbCAlIGxpbWJMZW47CiAgICB2YXIgZW5kID0gTWF0aC5taW4odG90YWwsIHRvdGFsIC0gbW9kKSArIHN0YXJ0OwoKICAgIHZhciB3b3JkID0gMDsKICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSBsaW1iTGVuKSB7CiAgICAgIHdvcmQgPSBwYXJzZUJhc2UobnVtYmVyLCBpLCBpICsgbGltYkxlbiwgYmFzZSk7CgogICAgICB0aGlzLmltdWxuKGxpbWJQb3cpOwogICAgICBpZiAodGhpcy53b3Jkc1swXSArIHdvcmQgPCAweDQwMDAwMDApIHsKICAgICAgICB0aGlzLndvcmRzWzBdICs9IHdvcmQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5faWFkZG4od29yZCk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAobW9kICE9PSAwKSB7CiAgICAgIHZhciBwb3cgPSAxOwogICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgbnVtYmVyLmxlbmd0aCwgYmFzZSk7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbW9kOyBpKyspIHsKICAgICAgICBwb3cgKj0gYmFzZTsKICAgICAgfQoKICAgICAgdGhpcy5pbXVsbihwb3cpOwogICAgICBpZiAodGhpcy53b3Jkc1swXSArIHdvcmQgPCAweDQwMDAwMDApIHsKICAgICAgICB0aGlzLndvcmRzWzBdICs9IHdvcmQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5faWFkZG4od29yZCk7CiAgICAgIH0KICAgIH0KICB9OwoKICBCTi5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKGRlc3QpIHsKICAgIGRlc3Qud29yZHMgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGRlc3Qud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldOwogICAgfQogICAgZGVzdC5sZW5ndGggPSB0aGlzLmxlbmd0aDsKICAgIGRlc3QubmVnYXRpdmUgPSB0aGlzLm5lZ2F0aXZlOwogICAgZGVzdC5yZWQgPSB0aGlzLnJlZDsKICB9OwoKICBCTi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7CiAgICB2YXIgciA9IG5ldyBCTihudWxsKTsKICAgIHRoaXMuY29weShyKTsKICAgIHJldHVybiByOwogIH07CgogIEJOLnByb3RvdHlwZS5fZXhwYW5kID0gZnVuY3Rpb24gX2V4cGFuZCAoc2l6ZSkgewogICAgd2hpbGUgKHRoaXMubGVuZ3RoIDwgc2l6ZSkgewogICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIFJlbW92ZSBsZWFkaW5nIGAwYCBmcm9tIGB0aGlzYAogIEJOLnByb3RvdHlwZS5zdHJpcCA9IGZ1bmN0aW9uIHN0cmlwICgpIHsKICAgIHdoaWxlICh0aGlzLmxlbmd0aCA+IDEgJiYgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdID09PSAwKSB7CiAgICAgIHRoaXMubGVuZ3RoLS07CiAgICB9CiAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX25vcm1TaWduID0gZnVuY3Rpb24gX25vcm1TaWduICgpIHsKICAgIC8vIC0wID0gMAogICAgaWYgKHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBCTi5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkgewogICAgcmV0dXJuICh0aGlzLnJlZCA/ICc8Qk4tUjogJyA6ICc8Qk46ICcpICsgdGhpcy50b1N0cmluZygxNikgKyAnPic7CiAgfTsKCiAgLyoKCiAgdmFyIHplcm9zID0gW107CiAgdmFyIGdyb3VwU2l6ZXMgPSBbXTsKICB2YXIgZ3JvdXBCYXNlcyA9IFtdOwoKICB2YXIgcyA9ICcnOwogIHZhciBpID0gLTE7CiAgd2hpbGUgKCsraSA8IEJOLndvcmRTaXplKSB7CiAgICB6ZXJvc1tpXSA9IHM7CiAgICBzICs9ICcwJzsKICB9CiAgZ3JvdXBTaXplc1swXSA9IDA7CiAgZ3JvdXBTaXplc1sxXSA9IDA7CiAgZ3JvdXBCYXNlc1swXSA9IDA7CiAgZ3JvdXBCYXNlc1sxXSA9IDA7CiAgdmFyIGJhc2UgPSAyIC0gMTsKICB3aGlsZSAoKytiYXNlIDwgMzYgKyAxKSB7CiAgICB2YXIgZ3JvdXBTaXplID0gMDsKICAgIHZhciBncm91cEJhc2UgPSAxOwogICAgd2hpbGUgKGdyb3VwQmFzZSA8ICgxIDw8IEJOLndvcmRTaXplKSAvIGJhc2UpIHsKICAgICAgZ3JvdXBCYXNlICo9IGJhc2U7CiAgICAgIGdyb3VwU2l6ZSArPSAxOwogICAgfQogICAgZ3JvdXBTaXplc1tiYXNlXSA9IGdyb3VwU2l6ZTsKICAgIGdyb3VwQmFzZXNbYmFzZV0gPSBncm91cEJhc2U7CiAgfQoKICAqLwoKICB2YXIgemVyb3MgPSBbCiAgICAnJywKICAgICcwJywKICAgICcwMCcsCiAgICAnMDAwJywKICAgICcwMDAwJywKICAgICcwMDAwMCcsCiAgICAnMDAwMDAwJywKICAgICcwMDAwMDAwJywKICAgICcwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywKICAgICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJwogIF07CgogIHZhciBncm91cFNpemVzID0gWwogICAgMCwgMCwKICAgIDI1LCAxNiwgMTIsIDExLCAxMCwgOSwgOCwKICAgIDgsIDcsIDcsIDcsIDcsIDYsIDYsCiAgICA2LCA2LCA2LCA2LCA2LCA1LCA1LAogICAgNSwgNSwgNSwgNSwgNSwgNSwgNSwKICAgIDUsIDUsIDUsIDUsIDUsIDUsIDUKICBdOwoKICB2YXIgZ3JvdXBCYXNlcyA9IFsKICAgIDAsIDAsCiAgICAzMzU1NDQzMiwgNDMwNDY3MjEsIDE2Nzc3MjE2LCA0ODgyODEyNSwgNjA0NjYxNzYsIDQwMzUzNjA3LCAxNjc3NzIxNiwKICAgIDQzMDQ2NzIxLCAxMDAwMDAwMCwgMTk0ODcxNzEsIDM1ODMxODA4LCA2Mjc0ODUxNywgNzUyOTUzNiwgMTEzOTA2MjUsCiAgICAxNjc3NzIxNiwgMjQxMzc1NjksIDM0MDEyMjI0LCA0NzA0NTg4MSwgNjQwMDAwMDAsIDQwODQxMDEsIDUxNTM2MzIsCiAgICA2NDM2MzQzLCA3OTYyNjI0LCA5NzY1NjI1LCAxMTg4MTM3NiwgMTQzNDg5MDcsIDE3MjEwMzY4LCAyMDUxMTE0OSwKICAgIDI0MzAwMDAwLCAyODYyOTE1MSwgMzM1NTQ0MzIsIDM5MTM1MzkzLCA0NTQzNTQyNCwgNTI1MjE4NzUsIDYwNDY2MTc2CiAgXTsKCiAgQk4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKGJhc2UsIHBhZGRpbmcpIHsKICAgIGJhc2UgPSBiYXNlIHx8IDEwOwogICAgcGFkZGluZyA9IHBhZGRpbmcgfCAwIHx8IDE7CgogICAgdmFyIG91dDsKICAgIGlmIChiYXNlID09PSAxNiB8fCBiYXNlID09PSAnaGV4JykgewogICAgICBvdXQgPSAnJzsKICAgICAgdmFyIG9mZiA9IDA7CiAgICAgIHZhciBjYXJyeSA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1tpXTsKICAgICAgICB2YXIgd29yZCA9ICgoKHcgPDwgb2ZmKSB8IGNhcnJ5KSAmIDB4ZmZmZmZmKS50b1N0cmluZygxNik7CiAgICAgICAgY2FycnkgPSAodyA+Pj4gKDI0IC0gb2ZmKSkgJiAweGZmZmZmZjsKICAgICAgICBpZiAoY2FycnkgIT09IDAgfHwgaSAhPT0gdGhpcy5sZW5ndGggLSAxKSB7CiAgICAgICAgICBvdXQgPSB6ZXJvc1s2IC0gd29yZC5sZW5ndGhdICsgd29yZCArIG91dDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3V0ID0gd29yZCArIG91dDsKICAgICAgICB9CiAgICAgICAgb2ZmICs9IDI7CiAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgaS0tOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgICBvdXQgPSBjYXJyeS50b1N0cmluZygxNikgKyBvdXQ7CiAgICAgIH0KICAgICAgd2hpbGUgKG91dC5sZW5ndGggJSBwYWRkaW5nICE9PSAwKSB7CiAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICB9CiAgICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgb3V0ID0gJy0nICsgb3V0OwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CgogICAgaWYgKGJhc2UgPT09IChiYXNlIHwgMCkgJiYgYmFzZSA+PSAyICYmIGJhc2UgPD0gMzYpIHsKICAgICAgLy8gdmFyIGdyb3VwU2l6ZSA9IE1hdGguZmxvb3IoQk4ud29yZFNpemUgKiBNYXRoLkxOMiAvIE1hdGgubG9nKGJhc2UpKTsKICAgICAgdmFyIGdyb3VwU2l6ZSA9IGdyb3VwU2l6ZXNbYmFzZV07CiAgICAgIC8vIHZhciBncm91cEJhc2UgPSBNYXRoLnBvdyhiYXNlLCBncm91cFNpemUpOwogICAgICB2YXIgZ3JvdXBCYXNlID0gZ3JvdXBCYXNlc1tiYXNlXTsKICAgICAgb3V0ID0gJyc7CiAgICAgIHZhciBjID0gdGhpcy5jbG9uZSgpOwogICAgICBjLm5lZ2F0aXZlID0gMDsKICAgICAgd2hpbGUgKCFjLmlzWmVybygpKSB7CiAgICAgICAgdmFyIHIgPSBjLm1vZG4oZ3JvdXBCYXNlKS50b1N0cmluZyhiYXNlKTsKICAgICAgICBjID0gYy5pZGl2bihncm91cEJhc2UpOwoKICAgICAgICBpZiAoIWMuaXNaZXJvKCkpIHsKICAgICAgICAgIG91dCA9IHplcm9zW2dyb3VwU2l6ZSAtIHIubGVuZ3RoXSArIHIgKyBvdXQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG91dCA9IHIgKyBvdXQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmlzWmVybygpKSB7CiAgICAgICAgb3V0ID0gJzAnICsgb3V0OwogICAgICB9CiAgICAgIHdoaWxlIChvdXQubGVuZ3RoICUgcGFkZGluZyAhPT0gMCkgewogICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgfQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIGFzc2VydChmYWxzZSwgJ0Jhc2Ugc2hvdWxkIGJlIGJldHdlZW4gMiBhbmQgMzYnKTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9OdW1iZXIgPSBmdW5jdGlvbiB0b051bWJlciAoKSB7CiAgICB2YXIgcmV0ID0gdGhpcy53b3Jkc1swXTsKICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMikgewogICAgICByZXQgKz0gdGhpcy53b3Jkc1sxXSAqIDB4NDAwMDAwMDsKICAgIH0gZWxzZSBpZiAodGhpcy5sZW5ndGggPT09IDMgJiYgdGhpcy53b3Jkc1syXSA9PT0gMHgwMSkgewogICAgICAvLyBOT1RFOiBhdCB0aGlzIHN0YWdlIGl0IGlzIGtub3duIHRoYXQgdGhlIHRvcCBiaXQgaXMgc2V0CiAgICAgIHJldCArPSAweDEwMDAwMDAwMDAwMDAwICsgKHRoaXMud29yZHNbMV0gKiAweDQwMDAwMDApOwogICAgfSBlbHNlIGlmICh0aGlzLmxlbmd0aCA+IDIpIHsKICAgICAgYXNzZXJ0KGZhbHNlLCAnTnVtYmVyIGNhbiBvbmx5IHNhZmVseSBzdG9yZSB1cCB0byA1MyBiaXRzJyk7CiAgICB9CiAgICByZXR1cm4gKHRoaXMubmVnYXRpdmUgIT09IDApID8gLXJldCA6IHJldDsKICB9OwoKICBCTi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKDE2KTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9CdWZmZXIgPSBmdW5jdGlvbiB0b0J1ZmZlciAoZW5kaWFuLCBsZW5ndGgpIHsKICAgIGFzc2VydCh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyk7CiAgICByZXR1cm4gdGhpcy50b0FycmF5TGlrZShCdWZmZXIsIGVuZGlhbiwgbGVuZ3RoKTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIHRvQXJyYXkgKGVuZGlhbiwgbGVuZ3RoKSB7CiAgICByZXR1cm4gdGhpcy50b0FycmF5TGlrZShBcnJheSwgZW5kaWFuLCBsZW5ndGgpOwogIH07CgogIEJOLnByb3RvdHlwZS50b0FycmF5TGlrZSA9IGZ1bmN0aW9uIHRvQXJyYXlMaWtlIChBcnJheVR5cGUsIGVuZGlhbiwgbGVuZ3RoKSB7CiAgICB2YXIgYnl0ZUxlbmd0aCA9IHRoaXMuYnl0ZUxlbmd0aCgpOwogICAgdmFyIHJlcUxlbmd0aCA9IGxlbmd0aCB8fCBNYXRoLm1heCgxLCBieXRlTGVuZ3RoKTsKICAgIGFzc2VydChieXRlTGVuZ3RoIDw9IHJlcUxlbmd0aCwgJ2J5dGUgYXJyYXkgbG9uZ2VyIHRoYW4gZGVzaXJlZCBsZW5ndGgnKTsKICAgIGFzc2VydChyZXFMZW5ndGggPiAwLCAnUmVxdWVzdGVkIGFycmF5IGxlbmd0aCA8PSAwJyk7CgogICAgdGhpcy5zdHJpcCgpOwogICAgdmFyIGxpdHRsZUVuZGlhbiA9IGVuZGlhbiA9PT0gJ2xlJzsKICAgIHZhciByZXMgPSBuZXcgQXJyYXlUeXBlKHJlcUxlbmd0aCk7CgogICAgdmFyIGIsIGk7CiAgICB2YXIgcSA9IHRoaXMuY2xvbmUoKTsKICAgIGlmICghbGl0dGxlRW5kaWFuKSB7CiAgICAgIC8vIEFzc3VtZSBiaWctZW5kaWFuCiAgICAgIGZvciAoaSA9IDA7IGkgPCByZXFMZW5ndGggLSBieXRlTGVuZ3RoOyBpKyspIHsKICAgICAgICByZXNbaV0gPSAwOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyAhcS5pc1plcm8oKTsgaSsrKSB7CiAgICAgICAgYiA9IHEuYW5kbG4oMHhmZik7CiAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgIHJlc1tyZXFMZW5ndGggLSBpIC0gMV0gPSBiOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBmb3IgKGkgPSAwOyAhcS5pc1plcm8oKTsgaSsrKSB7CiAgICAgICAgYiA9IHEuYW5kbG4oMHhmZik7CiAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgIHJlc1tpXSA9IGI7CiAgICAgIH0KCiAgICAgIGZvciAoOyBpIDwgcmVxTGVuZ3RoOyBpKyspIHsKICAgICAgICByZXNbaV0gPSAwOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJlczsKICB9OwoKICBpZiAoTWF0aC5jbHozMikgewogICAgQk4ucHJvdG90eXBlLl9jb3VudEJpdHMgPSBmdW5jdGlvbiBfY291bnRCaXRzICh3KSB7CiAgICAgIHJldHVybiAzMiAtIE1hdGguY2x6MzIodyk7CiAgICB9OwogIH0gZWxzZSB7CiAgICBCTi5wcm90b3R5cGUuX2NvdW50Qml0cyA9IGZ1bmN0aW9uIF9jb3VudEJpdHMgKHcpIHsKICAgICAgdmFyIHQgPSB3OwogICAgICB2YXIgciA9IDA7CiAgICAgIGlmICh0ID49IDB4MTAwMCkgewogICAgICAgIHIgKz0gMTM7CiAgICAgICAgdCA+Pj49IDEzOwogICAgICB9CiAgICAgIGlmICh0ID49IDB4NDApIHsKICAgICAgICByICs9IDc7CiAgICAgICAgdCA+Pj49IDc7CiAgICAgIH0KICAgICAgaWYgKHQgPj0gMHg4KSB7CiAgICAgICAgciArPSA0OwogICAgICAgIHQgPj4+PSA0OwogICAgICB9CiAgICAgIGlmICh0ID49IDB4MDIpIHsKICAgICAgICByICs9IDI7CiAgICAgICAgdCA+Pj49IDI7CiAgICAgIH0KICAgICAgcmV0dXJuIHIgKyB0OwogICAgfTsKICB9CgogIEJOLnByb3RvdHlwZS5femVyb0JpdHMgPSBmdW5jdGlvbiBfemVyb0JpdHMgKHcpIHsKICAgIC8vIFNob3J0LWN1dAogICAgaWYgKHcgPT09IDApIHJldHVybiAyNjsKCiAgICB2YXIgdCA9IHc7CiAgICB2YXIgciA9IDA7CiAgICBpZiAoKHQgJiAweDFmZmYpID09PSAwKSB7CiAgICAgIHIgKz0gMTM7CiAgICAgIHQgPj4+PSAxMzsKICAgIH0KICAgIGlmICgodCAmIDB4N2YpID09PSAwKSB7CiAgICAgIHIgKz0gNzsKICAgICAgdCA+Pj49IDc7CiAgICB9CiAgICBpZiAoKHQgJiAweGYpID09PSAwKSB7CiAgICAgIHIgKz0gNDsKICAgICAgdCA+Pj49IDQ7CiAgICB9CiAgICBpZiAoKHQgJiAweDMpID09PSAwKSB7CiAgICAgIHIgKz0gMjsKICAgICAgdCA+Pj49IDI7CiAgICB9CiAgICBpZiAoKHQgJiAweDEpID09PSAwKSB7CiAgICAgIHIrKzsKICAgIH0KICAgIHJldHVybiByOwogIH07CgogIC8vIFJldHVybiBudW1iZXIgb2YgdXNlZCBiaXRzIGluIGEgQk4KICBCTi5wcm90b3R5cGUuYml0TGVuZ3RoID0gZnVuY3Rpb24gYml0TGVuZ3RoICgpIHsKICAgIHZhciB3ID0gdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdOwogICAgdmFyIGhpID0gdGhpcy5fY291bnRCaXRzKHcpOwogICAgcmV0dXJuICh0aGlzLmxlbmd0aCAtIDEpICogMjYgKyBoaTsKICB9OwoKICBmdW5jdGlvbiB0b0JpdEFycmF5IChudW0pIHsKICAgIHZhciB3ID0gbmV3IEFycmF5KG51bS5iaXRMZW5ndGgoKSk7CgogICAgZm9yICh2YXIgYml0ID0gMDsgYml0IDwgdy5sZW5ndGg7IGJpdCsrKSB7CiAgICAgIHZhciBvZmYgPSAoYml0IC8gMjYpIHwgMDsKICAgICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICAgIHdbYml0XSA9IChudW0ud29yZHNbb2ZmXSAmICgxIDw8IHdiaXQpKSA+Pj4gd2JpdDsKICAgIH0KCiAgICByZXR1cm4gdzsKICB9CgogIC8vIE51bWJlciBvZiB0cmFpbGluZyB6ZXJvIGJpdHMKICBCTi5wcm90b3R5cGUuemVyb0JpdHMgPSBmdW5jdGlvbiB6ZXJvQml0cyAoKSB7CiAgICBpZiAodGhpcy5pc1plcm8oKSkgcmV0dXJuIDA7CgogICAgdmFyIHIgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBiID0gdGhpcy5femVyb0JpdHModGhpcy53b3Jkc1tpXSk7CiAgICAgIHIgKz0gYjsKICAgICAgaWYgKGIgIT09IDI2KSBicmVhazsKICAgIH0KICAgIHJldHVybiByOwogIH07CgogIEJOLnByb3RvdHlwZS5ieXRlTGVuZ3RoID0gZnVuY3Rpb24gYnl0ZUxlbmd0aCAoKSB7CiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuYml0TGVuZ3RoKCkgLyA4KTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9Ud29zID0gZnVuY3Rpb24gdG9Ud29zICh3aWR0aCkgewogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgcmV0dXJuIHRoaXMuYWJzKCkuaW5vdG4od2lkdGgpLmlhZGRuKDEpOwogICAgfQogICAgcmV0dXJuIHRoaXMuY2xvbmUoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuZnJvbVR3b3MgPSBmdW5jdGlvbiBmcm9tVHdvcyAod2lkdGgpIHsKICAgIGlmICh0aGlzLnRlc3RuKHdpZHRoIC0gMSkpIHsKICAgICAgcmV0dXJuIHRoaXMubm90bih3aWR0aCkuaWFkZG4oMSkuaW5lZygpOwogICAgfQogICAgcmV0dXJuIHRoaXMuY2xvbmUoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNOZWcgPSBmdW5jdGlvbiBpc05lZyAoKSB7CiAgICByZXR1cm4gdGhpcy5uZWdhdGl2ZSAhPT0gMDsKICB9OwoKICAvLyBSZXR1cm4gbmVnYXRpdmUgY2xvbmUgb2YgYHRoaXNgCiAgQk4ucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZyAoKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmluZWcoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaW5lZyA9IGZ1bmN0aW9uIGluZWcgKCkgewogICAgaWYgKCF0aGlzLmlzWmVybygpKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgXj0gMTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvLyBPciBgbnVtYCB3aXRoIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pdW9yID0gZnVuY3Rpb24gaXVvciAobnVtKSB7CiAgICB3aGlsZSAodGhpcy5sZW5ndGggPCBudW0ubGVuZ3RoKSB7CiAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGgrK10gPSAwOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldIHwgbnVtLndvcmRzW2ldOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlvciA9IGZ1bmN0aW9uIGlvciAobnVtKSB7CiAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgIHJldHVybiB0aGlzLml1b3IobnVtKTsKICB9OwoKICAvLyBPciBgbnVtYCB3aXRoIGB0aGlzYAogIEJOLnByb3RvdHlwZS5vciA9IGZ1bmN0aW9uIG9yIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaW9yKG51bSk7CiAgICByZXR1cm4gbnVtLmNsb25lKCkuaW9yKHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS51b3IgPSBmdW5jdGlvbiB1b3IgKG51bSkgewogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdW9yKG51bSk7CiAgICByZXR1cm4gbnVtLmNsb25lKCkuaXVvcih0aGlzKTsKICB9OwoKICAvLyBBbmQgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaXVhbmQgPSBmdW5jdGlvbiBpdWFuZCAobnVtKSB7CiAgICAvLyBiID0gbWluLWxlbmd0aChudW0sIHRoaXMpCiAgICB2YXIgYjsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHsKICAgICAgYiA9IG51bTsKICAgIH0gZWxzZSB7CiAgICAgIGIgPSB0aGlzOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXSAmIG51bS53b3Jkc1tpXTsKICAgIH0KCiAgICB0aGlzLmxlbmd0aCA9IGIubGVuZ3RoOwoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlhbmQgPSBmdW5jdGlvbiBpYW5kIChudW0pIHsKICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgcmV0dXJuIHRoaXMuaXVhbmQobnVtKTsKICB9OwoKICAvLyBBbmQgYG51bWAgd2l0aCBgdGhpc2AKICBCTi5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24gYW5kIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaWFuZChudW0pOwogICAgcmV0dXJuIG51bS5jbG9uZSgpLmlhbmQodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnVhbmQgPSBmdW5jdGlvbiB1YW5kIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXVhbmQobnVtKTsKICAgIHJldHVybiBudW0uY2xvbmUoKS5pdWFuZCh0aGlzKTsKICB9OwoKICAvLyBYb3IgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaXV4b3IgPSBmdW5jdGlvbiBpdXhvciAobnVtKSB7CiAgICAvLyBhLmxlbmd0aCA+IGIubGVuZ3RoCiAgICB2YXIgYTsKICAgIHZhciBiOwogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICBhID0gdGhpczsKICAgICAgYiA9IG51bTsKICAgIH0gZWxzZSB7CiAgICAgIGEgPSBudW07CiAgICAgIGIgPSB0aGlzOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXSBeIGIud29yZHNbaV07CiAgICB9CgogICAgaWYgKHRoaXMgIT09IGEpIHsKICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV07CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmxlbmd0aCA9IGEubGVuZ3RoOwoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLml4b3IgPSBmdW5jdGlvbiBpeG9yIChudW0pIHsKICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgcmV0dXJuIHRoaXMuaXV4b3IobnVtKTsKICB9OwoKICAvLyBYb3IgYG51bWAgd2l0aCBgdGhpc2AKICBCTi5wcm90b3R5cGUueG9yID0gZnVuY3Rpb24geG9yIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXhvcihudW0pOwogICAgcmV0dXJuIG51bS5jbG9uZSgpLml4b3IodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnV4b3IgPSBmdW5jdGlvbiB1eG9yIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXV4b3IobnVtKTsKICAgIHJldHVybiBudW0uY2xvbmUoKS5pdXhvcih0aGlzKTsKICB9OwoKICAvLyBOb3QgYGB0aGlzYGAgd2l0aCBgYHdpZHRoYGAgYml0d2lkdGgKICBCTi5wcm90b3R5cGUuaW5vdG4gPSBmdW5jdGlvbiBpbm90biAod2lkdGgpIHsKICAgIGFzc2VydCh0eXBlb2Ygd2lkdGggPT09ICdudW1iZXInICYmIHdpZHRoID49IDApOwoKICAgIHZhciBieXRlc05lZWRlZCA9IE1hdGguY2VpbCh3aWR0aCAvIDI2KSB8IDA7CiAgICB2YXIgYml0c0xlZnQgPSB3aWR0aCAlIDI2OwoKICAgIC8vIEV4dGVuZCB0aGUgYnVmZmVyIHdpdGggbGVhZGluZyB6ZXJvZXMKICAgIHRoaXMuX2V4cGFuZChieXRlc05lZWRlZCk7CgogICAgaWYgKGJpdHNMZWZ0ID4gMCkgewogICAgICBieXRlc05lZWRlZC0tOwogICAgfQoKICAgIC8vIEhhbmRsZSBjb21wbGV0ZSB3b3JkcwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlc05lZWRlZDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSB+dGhpcy53b3Jkc1tpXSAmIDB4M2ZmZmZmZjsKICAgIH0KCiAgICAvLyBIYW5kbGUgdGhlIHJlc2lkdWUKICAgIGlmIChiaXRzTGVmdCA+IDApIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IH50aGlzLndvcmRzW2ldICYgKDB4M2ZmZmZmZiA+PiAoMjYgLSBiaXRzTGVmdCkpOwogICAgfQoKICAgIC8vIEFuZCByZW1vdmUgbGVhZGluZyB6ZXJvZXMKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLm5vdG4gPSBmdW5jdGlvbiBub3RuICh3aWR0aCkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbm90bih3aWR0aCk7CiAgfTsKCiAgLy8gU2V0IGBiaXRgIG9mIGB0aGlzYAogIEJOLnByb3RvdHlwZS5zZXRuID0gZnVuY3Rpb24gc2V0biAoYml0LCB2YWwpIHsKICAgIGFzc2VydCh0eXBlb2YgYml0ID09PSAnbnVtYmVyJyAmJiBiaXQgPj0gMCk7CgogICAgdmFyIG9mZiA9IChiaXQgLyAyNikgfCAwOwogICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICB0aGlzLl9leHBhbmQob2ZmICsgMSk7CgogICAgaWYgKHZhbCkgewogICAgICB0aGlzLndvcmRzW29mZl0gPSB0aGlzLndvcmRzW29mZl0gfCAoMSA8PCB3Yml0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMud29yZHNbb2ZmXSA9IHRoaXMud29yZHNbb2ZmXSAmIH4oMSA8PCB3Yml0KTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIC8vIEFkZCBgbnVtYCB0byBgdGhpc2AgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaWFkZCA9IGZ1bmN0aW9uIGlhZGQgKG51bSkgewogICAgdmFyIHI7CgogICAgLy8gbmVnYXRpdmUgKyBwb3NpdGl2ZQogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICByID0gdGhpcy5pc3ViKG51bSk7CiAgICAgIHRoaXMubmVnYXRpdmUgXj0gMTsKICAgICAgcmV0dXJuIHRoaXMuX25vcm1TaWduKCk7CgogICAgLy8gcG9zaXRpdmUgKyBuZWdhdGl2ZQogICAgfSBlbHNlIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG51bS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBudW0ubmVnYXRpdmUgPSAwOwogICAgICByID0gdGhpcy5pc3ViKG51bSk7CiAgICAgIG51bS5uZWdhdGl2ZSA9IDE7CiAgICAgIHJldHVybiByLl9ub3JtU2lnbigpOwogICAgfQoKICAgIC8vIGEubGVuZ3RoID4gYi5sZW5ndGgKICAgIHZhciBhLCBiOwogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICBhID0gdGhpczsKICAgICAgYiA9IG51bTsKICAgIH0gZWxzZSB7CiAgICAgIGEgPSBudW07CiAgICAgIGIgPSB0aGlzOwogICAgfQoKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyAoYi53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgICBjYXJyeSA9IHIgPj4+IDI2OwogICAgfQogICAgZm9yICg7IGNhcnJ5ICE9PSAwICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgIHIgPSAoYS53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgICBjYXJyeSA9IHIgPj4+IDI2OwogICAgfQoKICAgIHRoaXMubGVuZ3RoID0gYS5sZW5ndGg7CiAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgdGhpcy53b3Jkc1t0aGlzLmxlbmd0aF0gPSBjYXJyeTsKICAgICAgdGhpcy5sZW5ndGgrKzsKICAgIC8vIENvcHkgdGhlIHJlc3Qgb2YgdGhlIHdvcmRzCiAgICB9IGVsc2UgaWYgKGEgIT09IHRoaXMpIHsKICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV07CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvLyBBZGQgYG51bWAgdG8gYHRoaXNgCiAgQk4ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCAobnVtKSB7CiAgICB2YXIgcmVzOwogICAgaWYgKG51bS5uZWdhdGl2ZSAhPT0gMCAmJiB0aGlzLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgIG51bS5uZWdhdGl2ZSA9IDA7CiAgICAgIHJlcyA9IHRoaXMuc3ViKG51bSk7CiAgICAgIG51bS5uZWdhdGl2ZSBePSAxOwogICAgICByZXR1cm4gcmVzOwogICAgfSBlbHNlIGlmIChudW0ubmVnYXRpdmUgPT09IDAgJiYgdGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgcmVzID0gbnVtLnN1Yih0aGlzKTsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIHJldHVybiByZXM7CiAgICB9CgogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWRkKG51bSk7CgogICAgcmV0dXJuIG51bS5jbG9uZSgpLmlhZGQodGhpcyk7CiAgfTsKCiAgLy8gU3VidHJhY3QgYG51bWAgZnJvbSBgdGhpc2AgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaXN1YiA9IGZ1bmN0aW9uIGlzdWIgKG51bSkgewogICAgLy8gdGhpcyAtICgtbnVtKSA9IHRoaXMgKyBudW0KICAgIGlmIChudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgdmFyIHIgPSB0aGlzLmlhZGQobnVtKTsKICAgICAgbnVtLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHIuX25vcm1TaWduKCk7CgogICAgLy8gLXRoaXMgLSBudW0gPSAtKHRoaXMgKyBudW0pCiAgICB9IGVsc2UgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIHRoaXMuaWFkZChudW0pOwogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHRoaXMuX25vcm1TaWduKCk7CiAgICB9CgogICAgLy8gQXQgdGhpcyBwb2ludCBib3RoIG51bWJlcnMgYXJlIHBvc2l0aXZlCiAgICB2YXIgY21wID0gdGhpcy5jbXAobnVtKTsKCiAgICAvLyBPcHRpbWl6YXRpb24gLSB6ZXJvaWZ5CiAgICBpZiAoY21wID09PSAwKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICAgIHRoaXMud29yZHNbMF0gPSAwOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvLyBhID4gYgogICAgdmFyIGEsIGI7CiAgICBpZiAoY21wID4gMCkgewogICAgICBhID0gdGhpczsKICAgICAgYiA9IG51bTsKICAgIH0gZWxzZSB7CiAgICAgIGEgPSBudW07CiAgICAgIGIgPSB0aGlzOwogICAgfQoKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHsKICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgLSAoYi53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgIGNhcnJ5ID0gciA+PiAyNjsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICB9CiAgICBmb3IgKDsgY2FycnkgIT09IDAgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgY2FycnkgPSByID4+IDI2OwogICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgIH0KCiAgICAvLyBDb3B5IHJlc3Qgb2YgdGhlIHdvcmRzCiAgICBpZiAoY2FycnkgPT09IDAgJiYgaSA8IGEubGVuZ3RoICYmIGEgIT09IHRoaXMpIHsKICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV07CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmxlbmd0aCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoLCBpKTsKCiAgICBpZiAoYSAhPT0gdGhpcykgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIC8vIFN1YnRyYWN0IGBudW1gIGZyb20gYHRoaXNgCiAgQk4ucHJvdG90eXBlLnN1YiA9IGZ1bmN0aW9uIHN1YiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzdWIobnVtKTsKICB9OwoKICBmdW5jdGlvbiBzbWFsbE11bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgb3V0Lm5lZ2F0aXZlID0gbnVtLm5lZ2F0aXZlIF4gc2VsZi5uZWdhdGl2ZTsKICAgIHZhciBsZW4gPSAoc2VsZi5sZW5ndGggKyBudW0ubGVuZ3RoKSB8IDA7CiAgICBvdXQubGVuZ3RoID0gbGVuOwogICAgbGVuID0gKGxlbiAtIDEpIHwgMDsKCiAgICAvLyBQZWVsIG9uZSBpdGVyYXRpb24gKGNvbXBpbGVyIGNhbid0IGRvIGl0LCBiZWNhdXNlIG9mIGNvZGUgY29tcGxleGl0eSkKICAgIHZhciBhID0gc2VsZi53b3Jkc1swXSB8IDA7CiAgICB2YXIgYiA9IG51bS53b3Jkc1swXSB8IDA7CiAgICB2YXIgciA9IGEgKiBiOwoKICAgIHZhciBsbyA9IHIgJiAweDNmZmZmZmY7CiAgICB2YXIgY2FycnkgPSAociAvIDB4NDAwMDAwMCkgfCAwOwogICAgb3V0LndvcmRzWzBdID0gbG87CgogICAgZm9yICh2YXIgayA9IDE7IGsgPCBsZW47IGsrKykgewogICAgICAvLyBTdW0gYWxsIHdvcmRzIHdpdGggdGhlIHNhbWUgYGkgKyBqID0ga2AgYW5kIGFjY3VtdWxhdGUgYG5jYXJyeWAsCiAgICAgIC8vIG5vdGUgdGhhdCBuY2FycnkgY291bGQgYmUgPj0gMHgzZmZmZmZmCiAgICAgIHZhciBuY2FycnkgPSBjYXJyeSA+Pj4gMjY7CiAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICB2YXIgbWF4SiA9IE1hdGgubWluKGssIG51bS5sZW5ndGggLSAxKTsKICAgICAgZm9yICh2YXIgaiA9IE1hdGgubWF4KDAsIGsgLSBzZWxmLmxlbmd0aCArIDEpOyBqIDw9IG1heEo7IGorKykgewogICAgICAgIHZhciBpID0gKGsgLSBqKSB8IDA7CiAgICAgICAgYSA9IHNlbGYud29yZHNbaV0gfCAwOwogICAgICAgIGIgPSBudW0ud29yZHNbal0gfCAwOwogICAgICAgIHIgPSBhICogYiArIHJ3b3JkOwogICAgICAgIG5jYXJyeSArPSAociAvIDB4NDAwMDAwMCkgfCAwOwogICAgICAgIHJ3b3JkID0gciAmIDB4M2ZmZmZmZjsKICAgICAgfQogICAgICBvdXQud29yZHNba10gPSByd29yZCB8IDA7CiAgICAgIGNhcnJ5ID0gbmNhcnJ5IHwgMDsKICAgIH0KICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICBvdXQud29yZHNba10gPSBjYXJyeSB8IDA7CiAgICB9IGVsc2UgewogICAgICBvdXQubGVuZ3RoLS07CiAgICB9CgogICAgcmV0dXJuIG91dC5zdHJpcCgpOwogIH0KCiAgLy8gVE9ETyhpbmR1dG55KTogaXQgbWF5IGJlIHJlYXNvbmFibGUgdG8gb21pdCBpdCBmb3IgdXNlcnMgd2hvIGRvbid0IG5lZWQKICAvLyB0byB3b3JrIHdpdGggMjU2LWJpdCBudW1iZXJzLCBvdGhlcndpc2UgaXQgZ2l2ZXMgMjAlIGltcHJvdmVtZW50IGZvciAyNTYtYml0CiAgLy8gbXVsdGlwbGljYXRpb24gKGxpa2UgZWxsaXB0aWMgc2VjcDI1NmsxKS4KICB2YXIgY29tYjEwTXVsVG8gPSBmdW5jdGlvbiBjb21iMTBNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgIHZhciBhID0gc2VsZi53b3JkczsKICAgIHZhciBiID0gbnVtLndvcmRzOwogICAgdmFyIG8gPSBvdXQud29yZHM7CiAgICB2YXIgYyA9IDA7CiAgICB2YXIgbG87CiAgICB2YXIgbWlkOwogICAgdmFyIGhpOwogICAgdmFyIGEwID0gYVswXSB8IDA7CiAgICB2YXIgYWwwID0gYTAgJiAweDFmZmY7CiAgICB2YXIgYWgwID0gYTAgPj4+IDEzOwogICAgdmFyIGExID0gYVsxXSB8IDA7CiAgICB2YXIgYWwxID0gYTEgJiAweDFmZmY7CiAgICB2YXIgYWgxID0gYTEgPj4+IDEzOwogICAgdmFyIGEyID0gYVsyXSB8IDA7CiAgICB2YXIgYWwyID0gYTIgJiAweDFmZmY7CiAgICB2YXIgYWgyID0gYTIgPj4+IDEzOwogICAgdmFyIGEzID0gYVszXSB8IDA7CiAgICB2YXIgYWwzID0gYTMgJiAweDFmZmY7CiAgICB2YXIgYWgzID0gYTMgPj4+IDEzOwogICAgdmFyIGE0ID0gYVs0XSB8IDA7CiAgICB2YXIgYWw0ID0gYTQgJiAweDFmZmY7CiAgICB2YXIgYWg0ID0gYTQgPj4+IDEzOwogICAgdmFyIGE1ID0gYVs1XSB8IDA7CiAgICB2YXIgYWw1ID0gYTUgJiAweDFmZmY7CiAgICB2YXIgYWg1ID0gYTUgPj4+IDEzOwogICAgdmFyIGE2ID0gYVs2XSB8IDA7CiAgICB2YXIgYWw2ID0gYTYgJiAweDFmZmY7CiAgICB2YXIgYWg2ID0gYTYgPj4+IDEzOwogICAgdmFyIGE3ID0gYVs3XSB8IDA7CiAgICB2YXIgYWw3ID0gYTcgJiAweDFmZmY7CiAgICB2YXIgYWg3ID0gYTcgPj4+IDEzOwogICAgdmFyIGE4ID0gYVs4XSB8IDA7CiAgICB2YXIgYWw4ID0gYTggJiAweDFmZmY7CiAgICB2YXIgYWg4ID0gYTggPj4+IDEzOwogICAgdmFyIGE5ID0gYVs5XSB8IDA7CiAgICB2YXIgYWw5ID0gYTkgJiAweDFmZmY7CiAgICB2YXIgYWg5ID0gYTkgPj4+IDEzOwogICAgdmFyIGIwID0gYlswXSB8IDA7CiAgICB2YXIgYmwwID0gYjAgJiAweDFmZmY7CiAgICB2YXIgYmgwID0gYjAgPj4+IDEzOwogICAgdmFyIGIxID0gYlsxXSB8IDA7CiAgICB2YXIgYmwxID0gYjEgJiAweDFmZmY7CiAgICB2YXIgYmgxID0gYjEgPj4+IDEzOwogICAgdmFyIGIyID0gYlsyXSB8IDA7CiAgICB2YXIgYmwyID0gYjIgJiAweDFmZmY7CiAgICB2YXIgYmgyID0gYjIgPj4+IDEzOwogICAgdmFyIGIzID0gYlszXSB8IDA7CiAgICB2YXIgYmwzID0gYjMgJiAweDFmZmY7CiAgICB2YXIgYmgzID0gYjMgPj4+IDEzOwogICAgdmFyIGI0ID0gYls0XSB8IDA7CiAgICB2YXIgYmw0ID0gYjQgJiAweDFmZmY7CiAgICB2YXIgYmg0ID0gYjQgPj4+IDEzOwogICAgdmFyIGI1ID0gYls1XSB8IDA7CiAgICB2YXIgYmw1ID0gYjUgJiAweDFmZmY7CiAgICB2YXIgYmg1ID0gYjUgPj4+IDEzOwogICAgdmFyIGI2ID0gYls2XSB8IDA7CiAgICB2YXIgYmw2ID0gYjYgJiAweDFmZmY7CiAgICB2YXIgYmg2ID0gYjYgPj4+IDEzOwogICAgdmFyIGI3ID0gYls3XSB8IDA7CiAgICB2YXIgYmw3ID0gYjcgJiAweDFmZmY7CiAgICB2YXIgYmg3ID0gYjcgPj4+IDEzOwogICAgdmFyIGI4ID0gYls4XSB8IDA7CiAgICB2YXIgYmw4ID0gYjggJiAweDFmZmY7CiAgICB2YXIgYmg4ID0gYjggPj4+IDEzOwogICAgdmFyIGI5ID0gYls5XSB8IDA7CiAgICB2YXIgYmw5ID0gYjkgJiAweDFmZmY7CiAgICB2YXIgYmg5ID0gYjkgPj4+IDEzOwoKICAgIG91dC5uZWdhdGl2ZSA9IHNlbGYubmVnYXRpdmUgXiBudW0ubmVnYXRpdmU7CiAgICBvdXQubGVuZ3RoID0gMTk7CiAgICAvKiBrID0gMCAqLwogICAgbG8gPSBNYXRoLmltdWwoYWwwLCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsMCwgYmgwKTsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDApKSB8IDA7CiAgICBoaSA9IE1hdGguaW11bChhaDAsIGJoMCk7CiAgICB2YXIgdzAgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzAgPj4+IDI2KSkgfCAwOwogICAgdzAgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDEgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsMSwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDEsIGJoMCk7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmwwKSkgfCAwOwogICAgaGkgPSBNYXRoLmltdWwoYWgxLCBiaDApOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDEpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmgxKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsMSkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmgxKSkgfCAwOwogICAgdmFyIHcxID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxID4+PiAyNikpIHwgMDsKICAgIHcxICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAyICovCiAgICBsbyA9IE1hdGguaW11bChhbDIsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWwyLCBiaDApOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsMCkpIHwgMDsKICAgIGhpID0gTWF0aC5pbXVsKGFoMiwgYmgwKTsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmwxKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoMSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDEpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoMSkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmwyKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoMikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDIpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoMikpIHwgMDsKICAgIHZhciB3MiA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MiA+Pj4gMjYpKSB8IDA7CiAgICB3MiAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMyAqLwogICAgbG8gPSBNYXRoLmltdWwoYWwzLCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsMywgYmgwKTsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDApKSB8IDA7CiAgICBoaSA9IE1hdGguaW11bChhaDMsIGJoMCk7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsMSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDEpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmwxKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDEpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsMikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDIpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmwyKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDIpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsMykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDMpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmwzKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDMpKSB8IDA7CiAgICB2YXIgdzMgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzMgPj4+IDI2KSkgfCAwOwogICAgdzMgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDQgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsNCwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDQsIGJoMCk7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmwwKSkgfCAwOwogICAgaGkgPSBNYXRoLmltdWwoYWg0LCBiaDApOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDEpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmgxKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsMSkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmgxKSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDIpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmgyKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsMikpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmgyKSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDMpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmgzKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsMykpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmgzKSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDQpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmg0KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNCkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg0KSkgfCAwOwogICAgdmFyIHc0ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc0ID4+PiAyNikpIHwgMDsKICAgIHc0ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSA1ICovCiAgICBsbyA9IE1hdGguaW11bChhbDUsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw1LCBiaDApOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsMCkpIHwgMDsKICAgIGhpID0gTWF0aC5pbXVsKGFoNSwgYmgwKTsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmwxKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoMSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDEpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoMSkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmwyKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoMikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDIpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoMikpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmwzKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoMykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDMpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoMykpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw0KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoNCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDQpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoNCkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmw1KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoNSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDUpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoNSkpIHwgMDsKICAgIHZhciB3NSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3NSA+Pj4gMjYpKSB8IDA7CiAgICB3NSAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gNiAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw2LCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsNiwgYmgwKTsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDApKSB8IDA7CiAgICBoaSA9IE1hdGguaW11bChhaDYsIGJoMCk7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsMSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDEpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmwxKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDEpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsMikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDIpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmwyKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDIpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsMykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDMpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmwzKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDMpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsNCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDQpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw0KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDQpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsNSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDUpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmw1KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDUpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsNikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDYpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmw2KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDYpKSB8IDA7CiAgICB2YXIgdzYgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzYgPj4+IDI2KSkgfCAwOwogICAgdzYgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDcgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsNywgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDcsIGJoMCk7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmwwKSkgfCAwOwogICAgaGkgPSBNYXRoLmltdWwoYWg3LCBiaDApOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDEpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmgxKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsMSkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmgxKSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDIpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmgyKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsMikpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmgyKSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDMpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmgzKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsMykpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmgzKSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDQpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg0KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsNCkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmg0KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDUpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg1KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsNSkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg1KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwxLCBibDYpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMSwgYmg2KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDEsIGJsNikpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMSwgYmg2KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwwLCBibDcpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMCwgYmg3KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDAsIGJsNykpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMCwgYmg3KSkgfCAwOwogICAgdmFyIHc3ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHc3ID4+PiAyNikpIHwgMDsKICAgIHc3ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSA4ICovCiAgICBsbyA9IE1hdGguaW11bChhbDgsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw4LCBiaDApOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsMCkpIHwgMDsKICAgIGhpID0gTWF0aC5pbXVsKGFoOCwgYmgwKTsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmwxKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoMSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDEpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoMSkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmwyKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoMikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDIpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoMikpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmwzKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoMykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDMpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoMykpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmw0KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoNCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDQpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoNCkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw1KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDUpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoNSkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw2KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoNikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDYpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoNikpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw3KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoNykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDcpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoNykpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMCwgYmw4KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDAsIGJoOCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgwLCBibDgpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDAsIGJoOCkpIHwgMDsKICAgIHZhciB3OCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3OCA+Pj4gMjYpKSB8IDA7CiAgICB3OCAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gOSAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmgwKTsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDApKSB8IDA7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMCk7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsMSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDEpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmwxKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDEpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsMikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDIpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmwyKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDIpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsMykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDMpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmwzKSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDMpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsNCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDQpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw0KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDQpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsNSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDUpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmw1KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDUpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsNikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDYpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw2KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDYpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDIsIGJsNykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwyLCBiaDcpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMiwgYmw3KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgyLCBiaDcpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDEsIGJsOCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwxLCBiaDgpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMSwgYmw4KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgxLCBiaDgpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDAsIGJsOSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwwLCBiaDkpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMCwgYmw5KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgwLCBiaDkpKSB8IDA7CiAgICB2YXIgdzkgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzkgPj4+IDI2KSkgfCAwOwogICAgdzkgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDEwICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMSk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDEpOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsMSkpIHwgMDsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgxKTsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmwyKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoMikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDIpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoMikpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmwzKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoMykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDMpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoMykpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw0KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDQpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNCkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw1KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoNSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDUpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoNSkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmw2KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoNikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDYpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoNikpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMywgYmw3KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDMsIGJoNykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgzLCBibDcpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDMsIGJoNykpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMiwgYmw4KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDIsIGJoOCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgyLCBibDgpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDIsIGJoOCkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsMSwgYmw5KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDEsIGJoOSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWgxLCBibDkpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDEsIGJoOSkpIHwgMDsKICAgIHZhciB3MTAgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzEwID4+PiAyNikpIHwgMDsKICAgIHcxMCAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTEgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmwyKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMik7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmwyKSkgfCAwOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDIpOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDMpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmgzKSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsMykpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmgzKSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDQpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNywgYmg0KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsNCkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg0KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDUpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg1KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsNSkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmg1KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDYpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg2KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsNikpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg2KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw0LCBibDcpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNCwgYmg3KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDQsIGJsNykpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNCwgYmg3KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwzLCBibDgpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMywgYmg4KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDMsIGJsOCkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMywgYmg4KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWwyLCBibDkpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsMiwgYmg5KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDIsIGJsOSkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoMiwgYmg5KSkgfCAwOwogICAgdmFyIHcxMSA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTEgPj4+IDI2KSkgfCAwOwogICAgdzExICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxMiAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDMpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmgzKTsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDMpKSB8IDA7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMyk7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsNCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDQpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw0KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDQpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsNSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDUpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmw1KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDUpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsNikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDYpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw2KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDYpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDUsIGJsNykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw1LCBiaDcpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNSwgYmw3KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg1LCBiaDcpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDQsIGJsOCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw0LCBiaDgpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNCwgYmw4KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg0LCBiaDgpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDMsIGJsOSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWwzLCBiaDkpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoMywgYmw5KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWgzLCBiaDkpKSB8IDA7CiAgICB2YXIgdzEyID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxMiA+Pj4gMjYpKSB8IDA7CiAgICB3MTIgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDEzICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDQpOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsNCkpIHwgMDsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg0KTsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw1KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoNSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDUpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoNSkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmw2KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoNikpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDYpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoNikpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNiwgYmw3KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDYsIGJoNykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg2LCBibDcpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDYsIGJoNykpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNSwgYmw4KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDUsIGJoOCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg1LCBibDgpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDUsIGJoOCkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNCwgYmw5KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDQsIGJoOSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg0LCBibDkpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDQsIGJoOSkpIHwgMDsKICAgIHZhciB3MTMgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzEzID4+PiAyNikpIHwgMDsKICAgIHcxMyAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTQgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw1KTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNSk7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw1KSkgfCAwOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDUpOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDYpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg2KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsNikpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg2KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw3LCBibDcpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNywgYmg3KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDcsIGJsNykpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNywgYmg3KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw2LCBibDgpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNiwgYmg4KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDYsIGJsOCkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNiwgYmg4KSkgfCAwOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw1LCBibDkpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsNSwgYmg5KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDUsIGJsOSkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoNSwgYmg5KSkgfCAwOwogICAgdmFyIHcxNCA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTQgPj4+IDI2KSkgfCAwOwogICAgdzE0ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxNSAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDYpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg2KTsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDYpKSB8IDA7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNik7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDgsIGJsNykpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw4LCBiaDcpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOCwgYmw3KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg4LCBiaDcpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDcsIGJsOCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw3LCBiaDgpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNywgYmw4KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg3LCBiaDgpKSB8IDA7CiAgICBsbyA9IChsbyArIE1hdGguaW11bChhbDYsIGJsOSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWw2LCBiaDkpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoNiwgYmw5KSkgfCAwOwogICAgaGkgPSAoaGkgKyBNYXRoLmltdWwoYWg2LCBiaDkpKSB8IDA7CiAgICB2YXIgdzE1ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxNSA+Pj4gMjYpKSB8IDA7CiAgICB3MTUgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDE2ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNyk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDcpOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDksIGJsNykpIHwgMDsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg3KTsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsOCwgYmw4KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDgsIGJoOCkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg4LCBibDgpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDgsIGJoOCkpIHwgMDsKICAgIGxvID0gKGxvICsgTWF0aC5pbXVsKGFsNywgYmw5KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhbDcsIGJoOSkpIHwgMDsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg3LCBibDkpKSB8IDA7CiAgICBoaSA9IChoaSArIE1hdGguaW11bChhaDcsIGJoOSkpIHwgMDsKICAgIHZhciB3MTYgPSAoKChjICsgbG8pIHwgMCkgKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpKSB8IDA7CiAgICBjID0gKCgoaGkgKyAobWlkID4+PiAxMykpIHwgMCkgKyAodzE2ID4+PiAyNikpIHwgMDsKICAgIHcxNiAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTcgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw4KTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoOCk7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFoOSwgYmw4KSkgfCAwOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDgpOwogICAgbG8gPSAobG8gKyBNYXRoLmltdWwoYWw4LCBibDkpKSB8IDA7CiAgICBtaWQgPSAobWlkICsgTWF0aC5pbXVsKGFsOCwgYmg5KSkgfCAwOwogICAgbWlkID0gKG1pZCArIE1hdGguaW11bChhaDgsIGJsOSkpIHwgMDsKICAgIGhpID0gKGhpICsgTWF0aC5pbXVsKGFoOCwgYmg5KSkgfCAwOwogICAgdmFyIHcxNyA9ICgoKGMgKyBsbykgfCAwKSArICgobWlkICYgMHgxZmZmKSA8PCAxMykpIHwgMDsKICAgIGMgPSAoKChoaSArIChtaWQgPj4+IDEzKSkgfCAwKSArICh3MTcgPj4+IDI2KSkgfCAwOwogICAgdzE3ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxOCAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDkpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg5KTsKICAgIG1pZCA9IChtaWQgKyBNYXRoLmltdWwoYWg5LCBibDkpKSB8IDA7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOSk7CiAgICB2YXIgdzE4ID0gKCgoYyArIGxvKSB8IDApICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKSkgfCAwOwogICAgYyA9ICgoKGhpICsgKG1pZCA+Pj4gMTMpKSB8IDApICsgKHcxOCA+Pj4gMjYpKSB8IDA7CiAgICB3MTggJj0gMHgzZmZmZmZmOwogICAgb1swXSA9IHcwOwogICAgb1sxXSA9IHcxOwogICAgb1syXSA9IHcyOwogICAgb1szXSA9IHczOwogICAgb1s0XSA9IHc0OwogICAgb1s1XSA9IHc1OwogICAgb1s2XSA9IHc2OwogICAgb1s3XSA9IHc3OwogICAgb1s4XSA9IHc4OwogICAgb1s5XSA9IHc5OwogICAgb1sxMF0gPSB3MTA7CiAgICBvWzExXSA9IHcxMTsKICAgIG9bMTJdID0gdzEyOwogICAgb1sxM10gPSB3MTM7CiAgICBvWzE0XSA9IHcxNDsKICAgIG9bMTVdID0gdzE1OwogICAgb1sxNl0gPSB3MTY7CiAgICBvWzE3XSA9IHcxNzsKICAgIG9bMThdID0gdzE4OwogICAgaWYgKGMgIT09IDApIHsKICAgICAgb1sxOV0gPSBjOwogICAgICBvdXQubGVuZ3RoKys7CiAgICB9CiAgICByZXR1cm4gb3V0OwogIH07CgogIC8vIFBvbHlmaWxsIGNvbWIKICBpZiAoIU1hdGguaW11bCkgewogICAgY29tYjEwTXVsVG8gPSBzbWFsbE11bFRvOwogIH0KCiAgZnVuY3Rpb24gYmlnTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICBvdXQubmVnYXRpdmUgPSBudW0ubmVnYXRpdmUgXiBzZWxmLm5lZ2F0aXZlOwogICAgb3V0Lmxlbmd0aCA9IHNlbGYubGVuZ3RoICsgbnVtLmxlbmd0aDsKCiAgICB2YXIgY2FycnkgPSAwOwogICAgdmFyIGhuY2FycnkgPSAwOwogICAgZm9yICh2YXIgayA9IDA7IGsgPCBvdXQubGVuZ3RoIC0gMTsgaysrKSB7CiAgICAgIC8vIFN1bSBhbGwgd29yZHMgd2l0aCB0aGUgc2FtZSBgaSArIGogPSBrYCBhbmQgYWNjdW11bGF0ZSBgbmNhcnJ5YCwKICAgICAgLy8gbm90ZSB0aGF0IG5jYXJyeSBjb3VsZCBiZSA+PSAweDNmZmZmZmYKICAgICAgdmFyIG5jYXJyeSA9IGhuY2Fycnk7CiAgICAgIGhuY2FycnkgPSAwOwogICAgICB2YXIgcndvcmQgPSBjYXJyeSAmIDB4M2ZmZmZmZjsKICAgICAgdmFyIG1heEogPSBNYXRoLm1pbihrLCBudW0ubGVuZ3RoIC0gMSk7CiAgICAgIGZvciAodmFyIGogPSBNYXRoLm1heCgwLCBrIC0gc2VsZi5sZW5ndGggKyAxKTsgaiA8PSBtYXhKOyBqKyspIHsKICAgICAgICB2YXIgaSA9IGsgLSBqOwogICAgICAgIHZhciBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgdmFyIGIgPSBudW0ud29yZHNbal0gfCAwOwogICAgICAgIHZhciByID0gYSAqIGI7CgogICAgICAgIHZhciBsbyA9IHIgJiAweDNmZmZmZmY7CiAgICAgICAgbmNhcnJ5ID0gKG5jYXJyeSArICgociAvIDB4NDAwMDAwMCkgfCAwKSkgfCAwOwogICAgICAgIGxvID0gKGxvICsgcndvcmQpIHwgMDsKICAgICAgICByd29yZCA9IGxvICYgMHgzZmZmZmZmOwogICAgICAgIG5jYXJyeSA9IChuY2FycnkgKyAobG8gPj4+IDI2KSkgfCAwOwoKICAgICAgICBobmNhcnJ5ICs9IG5jYXJyeSA+Pj4gMjY7CiAgICAgICAgbmNhcnJ5ICY9IDB4M2ZmZmZmZjsKICAgICAgfQogICAgICBvdXQud29yZHNba10gPSByd29yZDsKICAgICAgY2FycnkgPSBuY2Fycnk7CiAgICAgIG5jYXJyeSA9IGhuY2Fycnk7CiAgICB9CiAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgb3V0LndvcmRzW2tdID0gY2Fycnk7CiAgICB9IGVsc2UgewogICAgICBvdXQubGVuZ3RoLS07CiAgICB9CgogICAgcmV0dXJuIG91dC5zdHJpcCgpOwogIH0KCiAgZnVuY3Rpb24ganVtYm9NdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgIHZhciBmZnRtID0gbmV3IEZGVE0oKTsKICAgIHJldHVybiBmZnRtLm11bHAoc2VsZiwgbnVtLCBvdXQpOwogIH0KCiAgQk4ucHJvdG90eXBlLm11bFRvID0gZnVuY3Rpb24gbXVsVG8gKG51bSwgb3V0KSB7CiAgICB2YXIgcmVzOwogICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aDsKICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMTAgJiYgbnVtLmxlbmd0aCA9PT0gMTApIHsKICAgICAgcmVzID0gY29tYjEwTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfSBlbHNlIGlmIChsZW4gPCA2MykgewogICAgICByZXMgPSBzbWFsbE11bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgIH0gZWxzZSBpZiAobGVuIDwgMTAyNCkgewogICAgICByZXMgPSBiaWdNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICB9IGVsc2UgewogICAgICByZXMgPSBqdW1ib011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgIH0KCiAgICByZXR1cm4gcmVzOwogIH07CgogIC8vIENvb2xleS1UdWtleSBhbGdvcml0aG0gZm9yIEZGVAogIC8vIHNsaWdodGx5IHJldmlzaXRlZCB0byByZWx5IG9uIGxvb3BpbmcgaW5zdGVhZCBvZiByZWN1cnNpb24KCiAgZnVuY3Rpb24gRkZUTSAoeCwgeSkgewogICAgdGhpcy54ID0geDsKICAgIHRoaXMueSA9IHk7CiAgfQoKICBGRlRNLnByb3RvdHlwZS5tYWtlUkJUID0gZnVuY3Rpb24gbWFrZVJCVCAoTikgewogICAgdmFyIHQgPSBuZXcgQXJyYXkoTik7CiAgICB2YXIgbCA9IEJOLnByb3RvdHlwZS5fY291bnRCaXRzKE4pIC0gMTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgIHRbaV0gPSB0aGlzLnJldkJpbihpLCBsLCBOKTsKICAgIH0KCiAgICByZXR1cm4gdDsKICB9OwoKICAvLyBSZXR1cm5zIGJpbmFyeS1yZXZlcnNlZCByZXByZXNlbnRhdGlvbiBvZiBgeGAKICBGRlRNLnByb3RvdHlwZS5yZXZCaW4gPSBmdW5jdGlvbiByZXZCaW4gKHgsIGwsIE4pIHsKICAgIGlmICh4ID09PSAwIHx8IHggPT09IE4gLSAxKSByZXR1cm4geDsKCiAgICB2YXIgcmIgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHsKICAgICAgcmIgfD0gKHggJiAxKSA8PCAobCAtIGkgLSAxKTsKICAgICAgeCA+Pj0gMTsKICAgIH0KCiAgICByZXR1cm4gcmI7CiAgfTsKCiAgLy8gUGVyZm9ybXMgInR3ZWVkbGluZyIgcGhhc2UsIHRoZXJlZm9yZSAnZW11bGF0aW5nJwogIC8vIGJlaGF2aW91ciBvZiB0aGUgcmVjdXJzaXZlIGFsZ29yaXRobQogIEZGVE0ucHJvdG90eXBlLnBlcm11dGUgPSBmdW5jdGlvbiBwZXJtdXRlIChyYnQsIHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICBydHdzW2ldID0gcndzW3JidFtpXV07CiAgICAgIGl0d3NbaV0gPSBpd3NbcmJ0W2ldXTsKICAgIH0KICB9OwoKICBGRlRNLnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbiB0cmFuc2Zvcm0gKHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOLCByYnQpIHsKICAgIHRoaXMucGVybXV0ZShyYnQsIHJ3cywgaXdzLCBydHdzLCBpdHdzLCBOKTsKCiAgICBmb3IgKHZhciBzID0gMTsgcyA8IE47IHMgPDw9IDEpIHsKICAgICAgdmFyIGwgPSBzIDw8IDE7CgogICAgICB2YXIgcnR3ZGYgPSBNYXRoLmNvcygyICogTWF0aC5QSSAvIGwpOwogICAgICB2YXIgaXR3ZGYgPSBNYXRoLnNpbigyICogTWF0aC5QSSAvIGwpOwoKICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBOOyBwICs9IGwpIHsKICAgICAgICB2YXIgcnR3ZGZfID0gcnR3ZGY7CiAgICAgICAgdmFyIGl0d2RmXyA9IGl0d2RmOwoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHM7IGorKykgewogICAgICAgICAgdmFyIHJlID0gcnR3c1twICsgal07CiAgICAgICAgICB2YXIgaWUgPSBpdHdzW3AgKyBqXTsKCiAgICAgICAgICB2YXIgcm8gPSBydHdzW3AgKyBqICsgc107CiAgICAgICAgICB2YXIgaW8gPSBpdHdzW3AgKyBqICsgc107CgogICAgICAgICAgdmFyIHJ4ID0gcnR3ZGZfICogcm8gLSBpdHdkZl8gKiBpbzsKCiAgICAgICAgICBpbyA9IHJ0d2RmXyAqIGlvICsgaXR3ZGZfICogcm87CiAgICAgICAgICBybyA9IHJ4OwoKICAgICAgICAgIHJ0d3NbcCArIGpdID0gcmUgKyBybzsKICAgICAgICAgIGl0d3NbcCArIGpdID0gaWUgKyBpbzsKCiAgICAgICAgICBydHdzW3AgKyBqICsgc10gPSByZSAtIHJvOwogICAgICAgICAgaXR3c1twICsgaiArIHNdID0gaWUgLSBpbzsKCiAgICAgICAgICAvKiBqc2hpbnQgbWF4ZGVwdGggOiBmYWxzZSAqLwogICAgICAgICAgaWYgKGogIT09IGwpIHsKICAgICAgICAgICAgcnggPSBydHdkZiAqIHJ0d2RmXyAtIGl0d2RmICogaXR3ZGZfOwoKICAgICAgICAgICAgaXR3ZGZfID0gcnR3ZGYgKiBpdHdkZl8gKyBpdHdkZiAqIHJ0d2RmXzsKICAgICAgICAgICAgcnR3ZGZfID0gcng7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKCiAgRkZUTS5wcm90b3R5cGUuZ3Vlc3NMZW4xM2IgPSBmdW5jdGlvbiBndWVzc0xlbjEzYiAobiwgbSkgewogICAgdmFyIE4gPSBNYXRoLm1heChtLCBuKSB8IDE7CiAgICB2YXIgb2RkID0gTiAmIDE7CiAgICB2YXIgaSA9IDA7CiAgICBmb3IgKE4gPSBOIC8gMiB8IDA7IE47IE4gPSBOID4+PiAxKSB7CiAgICAgIGkrKzsKICAgIH0KCiAgICByZXR1cm4gMSA8PCBpICsgMSArIG9kZDsKICB9OwoKICBGRlRNLnByb3RvdHlwZS5jb25qdWdhdGUgPSBmdW5jdGlvbiBjb25qdWdhdGUgKHJ3cywgaXdzLCBOKSB7CiAgICBpZiAoTiA8PSAxKSByZXR1cm47CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOIC8gMjsgaSsrKSB7CiAgICAgIHZhciB0ID0gcndzW2ldOwoKICAgICAgcndzW2ldID0gcndzW04gLSBpIC0gMV07CiAgICAgIHJ3c1tOIC0gaSAtIDFdID0gdDsKCiAgICAgIHQgPSBpd3NbaV07CgogICAgICBpd3NbaV0gPSAtaXdzW04gLSBpIC0gMV07CiAgICAgIGl3c1tOIC0gaSAtIDFdID0gLXQ7CiAgICB9CiAgfTsKCiAgRkZUTS5wcm90b3R5cGUubm9ybWFsaXplMTNiID0gZnVuY3Rpb24gbm9ybWFsaXplMTNiICh3cywgTikgewogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTiAvIDI7IGkrKykgewogICAgICB2YXIgdyA9IE1hdGgucm91bmQod3NbMiAqIGkgKyAxXSAvIE4pICogMHgyMDAwICsKICAgICAgICBNYXRoLnJvdW5kKHdzWzIgKiBpXSAvIE4pICsKICAgICAgICBjYXJyeTsKCiAgICAgIHdzW2ldID0gdyAmIDB4M2ZmZmZmZjsKCiAgICAgIGlmICh3IDwgMHg0MDAwMDAwKSB7CiAgICAgICAgY2FycnkgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGNhcnJ5ID0gdyAvIDB4NDAwMDAwMCB8IDA7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gd3M7CiAgfTsKCiAgRkZUTS5wcm90b3R5cGUuY29udmVydDEzYiA9IGZ1bmN0aW9uIGNvbnZlcnQxM2IgKHdzLCBsZW4sIHJ3cywgTikgewogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgY2FycnkgPSBjYXJyeSArICh3c1tpXSB8IDApOwoKICAgICAgcndzWzIgKiBpXSA9IGNhcnJ5ICYgMHgxZmZmOyBjYXJyeSA9IGNhcnJ5ID4+PiAxMzsKICAgICAgcndzWzIgKiBpICsgMV0gPSBjYXJyeSAmIDB4MWZmZjsgY2FycnkgPSBjYXJyeSA+Pj4gMTM7CiAgICB9CgogICAgLy8gUGFkIHdpdGggemVyb2VzCiAgICBmb3IgKGkgPSAyICogbGVuOyBpIDwgTjsgKytpKSB7CiAgICAgIHJ3c1tpXSA9IDA7CiAgICB9CgogICAgYXNzZXJ0KGNhcnJ5ID09PSAwKTsKICAgIGFzc2VydCgoY2FycnkgJiB+MHgxZmZmKSA9PT0gMCk7CiAgfTsKCiAgRkZUTS5wcm90b3R5cGUuc3R1YiA9IGZ1bmN0aW9uIHN0dWIgKE4pIHsKICAgIHZhciBwaCA9IG5ldyBBcnJheShOKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgIHBoW2ldID0gMDsKICAgIH0KCiAgICByZXR1cm4gcGg7CiAgfTsKCiAgRkZUTS5wcm90b3R5cGUubXVscCA9IGZ1bmN0aW9uIG11bHAgKHgsIHksIG91dCkgewogICAgdmFyIE4gPSAyICogdGhpcy5ndWVzc0xlbjEzYih4Lmxlbmd0aCwgeS5sZW5ndGgpOwoKICAgIHZhciByYnQgPSB0aGlzLm1ha2VSQlQoTik7CgogICAgdmFyIF8gPSB0aGlzLnN0dWIoTik7CgogICAgdmFyIHJ3cyA9IG5ldyBBcnJheShOKTsKICAgIHZhciByd3N0ID0gbmV3IEFycmF5KE4pOwogICAgdmFyIGl3c3QgPSBuZXcgQXJyYXkoTik7CgogICAgdmFyIG5yd3MgPSBuZXcgQXJyYXkoTik7CiAgICB2YXIgbnJ3c3QgPSBuZXcgQXJyYXkoTik7CiAgICB2YXIgbml3c3QgPSBuZXcgQXJyYXkoTik7CgogICAgdmFyIHJtd3MgPSBvdXQud29yZHM7CiAgICBybXdzLmxlbmd0aCA9IE47CgogICAgdGhpcy5jb252ZXJ0MTNiKHgud29yZHMsIHgubGVuZ3RoLCByd3MsIE4pOwogICAgdGhpcy5jb252ZXJ0MTNiKHkud29yZHMsIHkubGVuZ3RoLCBucndzLCBOKTsKCiAgICB0aGlzLnRyYW5zZm9ybShyd3MsIF8sIHJ3c3QsIGl3c3QsIE4sIHJidCk7CiAgICB0aGlzLnRyYW5zZm9ybShucndzLCBfLCBucndzdCwgbml3c3QsIE4sIHJidCk7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgdmFyIHJ4ID0gcndzdFtpXSAqIG5yd3N0W2ldIC0gaXdzdFtpXSAqIG5pd3N0W2ldOwogICAgICBpd3N0W2ldID0gcndzdFtpXSAqIG5pd3N0W2ldICsgaXdzdFtpXSAqIG5yd3N0W2ldOwogICAgICByd3N0W2ldID0gcng7CiAgICB9CgogICAgdGhpcy5jb25qdWdhdGUocndzdCwgaXdzdCwgTik7CiAgICB0aGlzLnRyYW5zZm9ybShyd3N0LCBpd3N0LCBybXdzLCBfLCBOLCByYnQpOwogICAgdGhpcy5jb25qdWdhdGUocm13cywgXywgTik7CiAgICB0aGlzLm5vcm1hbGl6ZTEzYihybXdzLCBOKTsKCiAgICBvdXQubmVnYXRpdmUgPSB4Lm5lZ2F0aXZlIF4geS5uZWdhdGl2ZTsKICAgIG91dC5sZW5ndGggPSB4Lmxlbmd0aCArIHkubGVuZ3RoOwogICAgcmV0dXJuIG91dC5zdHJpcCgpOwogIH07CgogIC8vIE11bHRpcGx5IGB0aGlzYCBieSBgbnVtYAogIEJOLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKG51bSkgewogICAgdmFyIG91dCA9IG5ldyBCTihudWxsKTsKICAgIG91dC53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCArIG51bS5sZW5ndGgpOwogICAgcmV0dXJuIHRoaXMubXVsVG8obnVtLCBvdXQpOwogIH07CgogIC8vIE11bHRpcGx5IGVtcGxveWluZyBGRlQKICBCTi5wcm90b3R5cGUubXVsZiA9IGZ1bmN0aW9uIG11bGYgKG51bSkgewogICAgdmFyIG91dCA9IG5ldyBCTihudWxsKTsKICAgIG91dC53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCArIG51bS5sZW5ndGgpOwogICAgcmV0dXJuIGp1bWJvTXVsVG8odGhpcywgbnVtLCBvdXQpOwogIH07CgogIC8vIEluLXBsYWNlIE11bHRpcGxpY2F0aW9uCiAgQk4ucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkubXVsVG8obnVtLCB0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaW11bG4gPSBmdW5jdGlvbiBpbXVsbiAobnVtKSB7CiAgICBhc3NlcnQodHlwZW9mIG51bSA9PT0gJ251bWJlcicpOwogICAgYXNzZXJ0KG51bSA8IDB4NDAwMDAwMCk7CgogICAgLy8gQ2FycnkKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHcgPSAodGhpcy53b3Jkc1tpXSB8IDApICogbnVtOwogICAgICB2YXIgbG8gPSAodyAmIDB4M2ZmZmZmZikgKyAoY2FycnkgJiAweDNmZmZmZmYpOwogICAgICBjYXJyeSA+Pj0gMjY7CiAgICAgIGNhcnJ5ICs9ICh3IC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgIC8vIE5PVEU6IGxvIGlzIDI3Yml0IG1heGltdW0KICAgICAgY2FycnkgKz0gbG8gPj4+IDI2OwogICAgICB0aGlzLndvcmRzW2ldID0gbG8gJiAweDNmZmZmZmY7CiAgICB9CgogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgdGhpcy5sZW5ndGgrKzsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBCTi5wcm90b3R5cGUubXVsbiA9IGZ1bmN0aW9uIG11bG4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pbXVsbihudW0pOwogIH07CgogIC8vIGB0aGlzYCAqIGB0aGlzYAogIEJOLnByb3RvdHlwZS5zcXIgPSBmdW5jdGlvbiBzcXIgKCkgewogICAgcmV0dXJuIHRoaXMubXVsKHRoaXMpOwogIH07CgogIC8vIGB0aGlzYCAqIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pc3FyID0gZnVuY3Rpb24gaXNxciAoKSB7CiAgICByZXR1cm4gdGhpcy5pbXVsKHRoaXMuY2xvbmUoKSk7CiAgfTsKCiAgLy8gTWF0aC5wb3coYHRoaXNgLCBgbnVtYCkKICBCTi5wcm90b3R5cGUucG93ID0gZnVuY3Rpb24gcG93IChudW0pIHsKICAgIHZhciB3ID0gdG9CaXRBcnJheShudW0pOwogICAgaWYgKHcubGVuZ3RoID09PSAwKSByZXR1cm4gbmV3IEJOKDEpOwoKICAgIC8vIFNraXAgbGVhZGluZyB6ZXJvZXMKICAgIHZhciByZXMgPSB0aGlzOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3Lmxlbmd0aDsgaSsrLCByZXMgPSByZXMuc3FyKCkpIHsKICAgICAgaWYgKHdbaV0gIT09IDApIGJyZWFrOwogICAgfQoKICAgIGlmICgrK2kgPCB3Lmxlbmd0aCkgewogICAgICBmb3IgKHZhciBxID0gcmVzLnNxcigpOyBpIDwgdy5sZW5ndGg7IGkrKywgcSA9IHEuc3FyKCkpIHsKICAgICAgICBpZiAod1tpXSA9PT0gMCkgY29udGludWU7CgogICAgICAgIHJlcyA9IHJlcy5tdWwocSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmVzOwogIH07CgogIC8vIFNoaWZ0LWxlZnQgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaXVzaGxuID0gZnVuY3Rpb24gaXVzaGxuIChiaXRzKSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgIHZhciBzID0gKGJpdHMgLSByKSAvIDI2OwogICAgdmFyIGNhcnJ5TWFzayA9ICgweDNmZmZmZmYgPj4+ICgyNiAtIHIpKSA8PCAoMjYgLSByKTsKICAgIHZhciBpOwoKICAgIGlmIChyICE9PSAwKSB7CiAgICAgIHZhciBjYXJyeSA9IDA7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBuZXdDYXJyeSA9IHRoaXMud29yZHNbaV0gJiBjYXJyeU1hc2s7CiAgICAgICAgdmFyIGMgPSAoKHRoaXMud29yZHNbaV0gfCAwKSAtIG5ld0NhcnJ5KSA8PCByOwogICAgICAgIHRoaXMud29yZHNbaV0gPSBjIHwgY2Fycnk7CiAgICAgICAgY2FycnkgPSBuZXdDYXJyeSA+Pj4gKDI2IC0gcik7CiAgICAgIH0KCiAgICAgIGlmIChjYXJyeSkgewogICAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgICB0aGlzLmxlbmd0aCsrOwogICAgICB9CiAgICB9CgogICAgaWYgKHMgIT09IDApIHsKICAgICAgZm9yIChpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHRoaXMud29yZHNbaSArIHNdID0gdGhpcy53b3Jkc1tpXTsKICAgICAgfQoKICAgICAgZm9yIChpID0gMDsgaSA8IHM7IGkrKykgewogICAgICAgIHRoaXMud29yZHNbaV0gPSAwOwogICAgICB9CgogICAgICB0aGlzLmxlbmd0aCArPSBzOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlzaGxuID0gZnVuY3Rpb24gaXNobG4gKGJpdHMpIHsKICAgIC8vIFRPRE8oaW5kdXRueSk6IGltcGxlbWVudCBtZQogICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDApOwogICAgcmV0dXJuIHRoaXMuaXVzaGxuKGJpdHMpOwogIH07CgogIC8vIFNoaWZ0LXJpZ2h0IGluLXBsYWNlCiAgLy8gTk9URTogYGhpbnRgIGlzIGEgbG93ZXN0IGJpdCBiZWZvcmUgdHJhaWxpbmcgemVyb2VzCiAgLy8gTk9URTogaWYgYGV4dGVuZGVkYCBpcyBwcmVzZW50IC0gaXQgd2lsbCBiZSBmaWxsZWQgd2l0aCBkZXN0cm95ZWQgYml0cwogIEJOLnByb3RvdHlwZS5pdXNocm4gPSBmdW5jdGlvbiBpdXNocm4gKGJpdHMsIGhpbnQsIGV4dGVuZGVkKSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICB2YXIgaDsKICAgIGlmIChoaW50KSB7CiAgICAgIGggPSAoaGludCAtIChoaW50ICUgMjYpKSAvIDI2OwogICAgfSBlbHNlIHsKICAgICAgaCA9IDA7CiAgICB9CgogICAgdmFyIHIgPSBiaXRzICUgMjY7CiAgICB2YXIgcyA9IE1hdGgubWluKChiaXRzIC0gcikgLyAyNiwgdGhpcy5sZW5ndGgpOwogICAgdmFyIG1hc2sgPSAweDNmZmZmZmYgXiAoKDB4M2ZmZmZmZiA+Pj4gcikgPDwgcik7CiAgICB2YXIgbWFza2VkV29yZHMgPSBleHRlbmRlZDsKCiAgICBoIC09IHM7CiAgICBoID0gTWF0aC5tYXgoMCwgaCk7CgogICAgLy8gRXh0ZW5kZWQgbW9kZSwgY29weSBtYXNrZWQgcGFydAogICAgaWYgKG1hc2tlZFdvcmRzKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CiAgICAgICAgbWFza2VkV29yZHMud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldOwogICAgICB9CiAgICAgIG1hc2tlZFdvcmRzLmxlbmd0aCA9IHM7CiAgICB9CgogICAgaWYgKHMgPT09IDApIHsKICAgICAgLy8gTm8tb3AsIHdlIHNob3VsZCBub3QgbW92ZSBhbnl0aGluZyBhdCBhbGwKICAgIH0gZWxzZSBpZiAodGhpcy5sZW5ndGggPiBzKSB7CiAgICAgIHRoaXMubGVuZ3RoIC09IHM7CiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaSArIHNdOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgfQoKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMCAmJiAoY2FycnkgIT09IDAgfHwgaSA+PSBoKTsgaS0tKSB7CiAgICAgIHZhciB3b3JkID0gdGhpcy53b3Jkc1tpXSB8IDA7CiAgICAgIHRoaXMud29yZHNbaV0gPSAoY2FycnkgPDwgKDI2IC0gcikpIHwgKHdvcmQgPj4+IHIpOwogICAgICBjYXJyeSA9IHdvcmQgJiBtYXNrOwogICAgfQoKICAgIC8vIFB1c2ggY2FycmllZCBiaXRzIGFzIGEgbWFzawogICAgaWYgKG1hc2tlZFdvcmRzICYmIGNhcnJ5ICE9PSAwKSB7CiAgICAgIG1hc2tlZFdvcmRzLndvcmRzW21hc2tlZFdvcmRzLmxlbmd0aCsrXSA9IGNhcnJ5OwogICAgfQoKICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgewogICAgICB0aGlzLndvcmRzWzBdID0gMDsKICAgICAgdGhpcy5sZW5ndGggPSAxOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlzaHJuID0gZnVuY3Rpb24gaXNocm4gKGJpdHMsIGhpbnQsIGV4dGVuZGVkKSB7CiAgICAvLyBUT0RPKGluZHV0bnkpOiBpbXBsZW1lbnQgbWUKICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwKTsKICAgIHJldHVybiB0aGlzLml1c2hybihiaXRzLCBoaW50LCBleHRlbmRlZCk7CiAgfTsKCiAgLy8gU2hpZnQtbGVmdAogIEJOLnByb3RvdHlwZS5zaGxuID0gZnVuY3Rpb24gc2hsbiAoYml0cykgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc2hsbihiaXRzKTsKICB9OwoKICBCTi5wcm90b3R5cGUudXNobG4gPSBmdW5jdGlvbiB1c2hsbiAoYml0cykgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdXNobG4oYml0cyk7CiAgfTsKCiAgLy8gU2hpZnQtcmlnaHQKICBCTi5wcm90b3R5cGUuc2hybiA9IGZ1bmN0aW9uIHNocm4gKGJpdHMpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXNocm4oYml0cyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnVzaHJuID0gZnVuY3Rpb24gdXNocm4gKGJpdHMpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXVzaHJuKGJpdHMpOwogIH07CgogIC8vIFRlc3QgaWYgbiBiaXQgaXMgc2V0CiAgQk4ucHJvdG90eXBlLnRlc3RuID0gZnVuY3Rpb24gdGVzdG4gKGJpdCkgewogICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInICYmIGJpdCA+PSAwKTsKICAgIHZhciByID0gYml0ICUgMjY7CiAgICB2YXIgcyA9IChiaXQgLSByKSAvIDI2OwogICAgdmFyIHEgPSAxIDw8IHI7CgogICAgLy8gRmFzdCBjYXNlOiBiaXQgaXMgbXVjaCBoaWdoZXIgdGhhbiBhbGwgZXhpc3Rpbmcgd29yZHMKICAgIGlmICh0aGlzLmxlbmd0aCA8PSBzKSByZXR1cm4gZmFsc2U7CgogICAgLy8gQ2hlY2sgYml0IGFuZCByZXR1cm4KICAgIHZhciB3ID0gdGhpcy53b3Jkc1tzXTsKCiAgICByZXR1cm4gISEodyAmIHEpOwogIH07CgogIC8vIFJldHVybiBvbmx5IGxvd2VycyBiaXRzIG9mIG51bWJlciAoaW4tcGxhY2UpCiAgQk4ucHJvdG90eXBlLmltYXNrbiA9IGZ1bmN0aW9uIGltYXNrbiAoYml0cykgewogICAgYXNzZXJ0KHR5cGVvZiBiaXRzID09PSAnbnVtYmVyJyAmJiBiaXRzID49IDApOwogICAgdmFyIHIgPSBiaXRzICUgMjY7CiAgICB2YXIgcyA9IChiaXRzIC0gcikgLyAyNjsKCiAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCwgJ2ltYXNrbiB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmUgbnVtYmVycycpOwoKICAgIGlmIChyICE9PSAwKSB7CiAgICAgIHMrKzsKICAgIH0KICAgIHRoaXMubGVuZ3RoID0gTWF0aC5taW4ocywgdGhpcy5sZW5ndGgpOwoKICAgIGlmIChyICE9PSAwKSB7CiAgICAgIHZhciBtYXNrID0gMHgzZmZmZmZmIF4gKCgweDNmZmZmZmYgPj4+IHIpIDw8IHIpOwogICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoIC0gMV0gJj0gbWFzazsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIC8vIFJldHVybiBvbmx5IGxvd2VycyBiaXRzIG9mIG51bWJlcgogIEJOLnByb3RvdHlwZS5tYXNrbiA9IGZ1bmN0aW9uIG1hc2tuIChiaXRzKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmltYXNrbihiaXRzKTsKICB9OwoKICAvLyBBZGQgcGxhaW4gbnVtYmVyIGBudW1gIHRvIGB0aGlzYAogIEJOLnByb3RvdHlwZS5pYWRkbiA9IGZ1bmN0aW9uIGlhZGRuIChudW0pIHsKICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKICAgIGlmIChudW0gPCAwKSByZXR1cm4gdGhpcy5pc3VibigtbnVtKTsKCiAgICAvLyBQb3NzaWJsZSBzaWduIGNoYW5nZQogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAxICYmICh0aGlzLndvcmRzWzBdIHwgMCkgPCBudW0pIHsKICAgICAgICB0aGlzLndvcmRzWzBdID0gbnVtIC0gKHRoaXMud29yZHNbMF0gfCAwKTsKICAgICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIHRoaXMuaXN1Ym4obnVtKTsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8vIEFkZCB3aXRob3V0IGNoZWNrcwogICAgcmV0dXJuIHRoaXMuX2lhZGRuKG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9pYWRkbiA9IGZ1bmN0aW9uIF9pYWRkbiAobnVtKSB7CiAgICB0aGlzLndvcmRzWzBdICs9IG51bTsKCiAgICAvLyBDYXJyeQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLndvcmRzW2ldID49IDB4NDAwMDAwMDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gLT0gMHg0MDAwMDAwOwogICAgICBpZiAoaSA9PT0gdGhpcy5sZW5ndGggLSAxKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMud29yZHNbaSArIDFdKys7CiAgICAgIH0KICAgIH0KICAgIHRoaXMubGVuZ3RoID0gTWF0aC5tYXgodGhpcy5sZW5ndGgsIGkgKyAxKTsKCiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvLyBTdWJ0cmFjdCBwbGFpbiBudW1iZXIgYG51bWAgZnJvbSBgdGhpc2AKICBCTi5wcm90b3R5cGUuaXN1Ym4gPSBmdW5jdGlvbiBpc3VibiAobnVtKSB7CiAgICBhc3NlcnQodHlwZW9mIG51bSA9PT0gJ251bWJlcicpOwogICAgYXNzZXJ0KG51bSA8IDB4NDAwMDAwMCk7CiAgICBpZiAobnVtIDwgMCkgcmV0dXJuIHRoaXMuaWFkZG4oLW51bSk7CgogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIHRoaXMuaWFkZG4obnVtKTsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHRoaXMud29yZHNbMF0gLT0gbnVtOwoKICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLndvcmRzWzBdIDwgMCkgewogICAgICB0aGlzLndvcmRzWzBdID0gLXRoaXMud29yZHNbMF07CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgfSBlbHNlIHsKICAgICAgLy8gQ2FycnkKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLndvcmRzW2ldIDwgMDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSArPSAweDQwMDAwMDA7CiAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0gLT0gMTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmFkZG4gPSBmdW5jdGlvbiBhZGRuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWFkZG4obnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUuc3VibiA9IGZ1bmN0aW9uIHN1Ym4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc3VibihudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5pYWJzID0gZnVuY3Rpb24gaWFicyAoKSB7CiAgICB0aGlzLm5lZ2F0aXZlID0gMDsKCiAgICByZXR1cm4gdGhpczsKICB9OwoKICBCTi5wcm90b3R5cGUuYWJzID0gZnVuY3Rpb24gYWJzICgpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWFicygpOwogIH07CgogIEJOLnByb3RvdHlwZS5faXNobG5zdWJtdWwgPSBmdW5jdGlvbiBfaXNobG5zdWJtdWwgKG51bSwgbXVsLCBzaGlmdCkgewogICAgdmFyIGxlbiA9IG51bS5sZW5ndGggKyBzaGlmdDsKICAgIHZhciBpOwoKICAgIHRoaXMuX2V4cGFuZChsZW4pOwoKICAgIHZhciB3OwogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAoaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgdyA9ICh0aGlzLndvcmRzW2kgKyBzaGlmdF0gfCAwKSArIGNhcnJ5OwogICAgICB2YXIgcmlnaHQgPSAobnVtLndvcmRzW2ldIHwgMCkgKiBtdWw7CiAgICAgIHcgLT0gcmlnaHQgJiAweDNmZmZmZmY7CiAgICAgIGNhcnJ5ID0gKHcgPj4gMjYpIC0gKChyaWdodCAvIDB4NDAwMDAwMCkgfCAwKTsKICAgICAgdGhpcy53b3Jkc1tpICsgc2hpZnRdID0gdyAmIDB4M2ZmZmZmZjsKICAgIH0KICAgIGZvciAoOyBpIDwgdGhpcy5sZW5ndGggLSBzaGlmdDsgaSsrKSB7CiAgICAgIHcgPSAodGhpcy53b3Jkc1tpICsgc2hpZnRdIHwgMCkgKyBjYXJyeTsKICAgICAgY2FycnkgPSB3ID4+IDI2OwogICAgICB0aGlzLndvcmRzW2kgKyBzaGlmdF0gPSB3ICYgMHgzZmZmZmZmOwogICAgfQoKICAgIGlmIChjYXJyeSA9PT0gMCkgcmV0dXJuIHRoaXMuc3RyaXAoKTsKCiAgICAvLyBTdWJ0cmFjdGlvbiBvdmVyZmxvdwogICAgYXNzZXJ0KGNhcnJ5ID09PSAtMSk7CiAgICBjYXJyeSA9IDA7CiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB3ID0gLSh0aGlzLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgY2FycnkgPSB3ID4+IDI2OwogICAgICB0aGlzLndvcmRzW2ldID0gdyAmIDB4M2ZmZmZmZjsKICAgIH0KICAgIHRoaXMubmVnYXRpdmUgPSAxOwoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl93b3JkRGl2ID0gZnVuY3Rpb24gX3dvcmREaXYgKG51bSwgbW9kZSkgewogICAgdmFyIHNoaWZ0ID0gdGhpcy5sZW5ndGggLSBudW0ubGVuZ3RoOwoKICAgIHZhciBhID0gdGhpcy5jbG9uZSgpOwogICAgdmFyIGIgPSBudW07CgogICAgLy8gTm9ybWFsaXplCiAgICB2YXIgYmhpID0gYi53b3Jkc1tiLmxlbmd0aCAtIDFdIHwgMDsKICAgIHZhciBiaGlCaXRzID0gdGhpcy5fY291bnRCaXRzKGJoaSk7CiAgICBzaGlmdCA9IDI2IC0gYmhpQml0czsKICAgIGlmIChzaGlmdCAhPT0gMCkgewogICAgICBiID0gYi51c2hsbihzaGlmdCk7CiAgICAgIGEuaXVzaGxuKHNoaWZ0KTsKICAgICAgYmhpID0gYi53b3Jkc1tiLmxlbmd0aCAtIDFdIHwgMDsKICAgIH0KCiAgICAvLyBJbml0aWFsaXplIHF1b3RpZW50CiAgICB2YXIgbSA9IGEubGVuZ3RoIC0gYi5sZW5ndGg7CiAgICB2YXIgcTsKCiAgICBpZiAobW9kZSAhPT0gJ21vZCcpIHsKICAgICAgcSA9IG5ldyBCTihudWxsKTsKICAgICAgcS5sZW5ndGggPSBtICsgMTsKICAgICAgcS53b3JkcyA9IG5ldyBBcnJheShxLmxlbmd0aCk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcS5sZW5ndGg7IGkrKykgewogICAgICAgIHEud29yZHNbaV0gPSAwOwogICAgICB9CiAgICB9CgogICAgdmFyIGRpZmYgPSBhLmNsb25lKCkuX2lzaGxuc3VibXVsKGIsIDEsIG0pOwogICAgaWYgKGRpZmYubmVnYXRpdmUgPT09IDApIHsKICAgICAgYSA9IGRpZmY7CiAgICAgIGlmIChxKSB7CiAgICAgICAgcS53b3Jkc1ttXSA9IDE7CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKHZhciBqID0gbSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgIHZhciBxaiA9IChhLndvcmRzW2IubGVuZ3RoICsgal0gfCAwKSAqIDB4NDAwMDAwMCArCiAgICAgICAgKGEud29yZHNbYi5sZW5ndGggKyBqIC0gMV0gfCAwKTsKCiAgICAgIC8vIE5PVEU6IChxaiAvIGJoaSkgaXMgKDB4M2ZmZmZmZiAqIDB4NDAwMDAwMCArIDB4M2ZmZmZmZikgLyAweDIwMDAwMDAgbWF4CiAgICAgIC8vICgweDdmZmZmZmYpCiAgICAgIHFqID0gTWF0aC5taW4oKHFqIC8gYmhpKSB8IDAsIDB4M2ZmZmZmZik7CgogICAgICBhLl9pc2hsbnN1Ym11bChiLCBxaiwgaik7CiAgICAgIHdoaWxlIChhLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgcWotLTsKICAgICAgICBhLm5lZ2F0aXZlID0gMDsKICAgICAgICBhLl9pc2hsbnN1Ym11bChiLCAxLCBqKTsKICAgICAgICBpZiAoIWEuaXNaZXJvKCkpIHsKICAgICAgICAgIGEubmVnYXRpdmUgXj0gMTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHEpIHsKICAgICAgICBxLndvcmRzW2pdID0gcWo7CiAgICAgIH0KICAgIH0KICAgIGlmIChxKSB7CiAgICAgIHEuc3RyaXAoKTsKICAgIH0KICAgIGEuc3RyaXAoKTsKCiAgICAvLyBEZW5vcm1hbGl6ZQogICAgaWYgKG1vZGUgIT09ICdkaXYnICYmIHNoaWZ0ICE9PSAwKSB7CiAgICAgIGEuaXVzaHJuKHNoaWZ0KTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBkaXY6IHEgfHwgbnVsbCwKICAgICAgbW9kOiBhCiAgICB9OwogIH07CgogIC8vIE5PVEU6IDEpIGBtb2RlYCBjYW4gYmUgc2V0IHRvIGBtb2RgIHRvIHJlcXVlc3QgbW9kIG9ubHksCiAgLy8gICAgICAgdG8gYGRpdmAgdG8gcmVxdWVzdCBkaXYgb25seSwgb3IgYmUgYWJzZW50IHRvCiAgLy8gICAgICAgcmVxdWVzdCBib3RoIGRpdiAmIG1vZAogIC8vICAgICAgIDIpIGBwb3NpdGl2ZWAgaXMgdHJ1ZSBpZiB1bnNpZ25lZCBtb2QgaXMgcmVxdWVzdGVkCiAgQk4ucHJvdG90eXBlLmRpdm1vZCA9IGZ1bmN0aW9uIGRpdm1vZCAobnVtLCBtb2RlLCBwb3NpdGl2ZSkgewogICAgYXNzZXJ0KCFudW0uaXNaZXJvKCkpOwoKICAgIGlmICh0aGlzLmlzWmVybygpKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBuZXcgQk4oMCksCiAgICAgICAgbW9kOiBuZXcgQk4oMCkKICAgICAgfTsKICAgIH0KCiAgICB2YXIgZGl2LCBtb2QsIHJlczsKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwICYmIG51bS5uZWdhdGl2ZSA9PT0gMCkgewogICAgICByZXMgPSB0aGlzLm5lZygpLmRpdm1vZChudW0sIG1vZGUpOwoKICAgICAgaWYgKG1vZGUgIT09ICdtb2QnKSB7CiAgICAgICAgZGl2ID0gcmVzLmRpdi5uZWcoKTsKICAgICAgfQoKICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgbW9kID0gcmVzLm1vZC5uZWcoKTsKICAgICAgICBpZiAocG9zaXRpdmUgJiYgbW9kLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgICBtb2QuaWFkZChudW0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IGRpdiwKICAgICAgICBtb2Q6IG1vZAogICAgICB9OwogICAgfQoKICAgIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG51bS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICByZXMgPSB0aGlzLmRpdm1vZChudW0ubmVnKCksIG1vZGUpOwoKICAgICAgaWYgKG1vZGUgIT09ICdtb2QnKSB7CiAgICAgICAgZGl2ID0gcmVzLmRpdi5uZWcoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IGRpdiwKICAgICAgICBtb2Q6IHJlcy5tb2QKICAgICAgfTsKICAgIH0KCiAgICBpZiAoKHRoaXMubmVnYXRpdmUgJiBudW0ubmVnYXRpdmUpICE9PSAwKSB7CiAgICAgIHJlcyA9IHRoaXMubmVnKCkuZGl2bW9kKG51bS5uZWcoKSwgbW9kZSk7CgogICAgICBpZiAobW9kZSAhPT0gJ2RpdicpIHsKICAgICAgICBtb2QgPSByZXMubW9kLm5lZygpOwogICAgICAgIGlmIChwb3NpdGl2ZSAmJiBtb2QubmVnYXRpdmUgIT09IDApIHsKICAgICAgICAgIG1vZC5pc3ViKG51bSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGRpdjogcmVzLmRpdiwKICAgICAgICBtb2Q6IG1vZAogICAgICB9OwogICAgfQoKICAgIC8vIEJvdGggbnVtYmVycyBhcmUgcG9zaXRpdmUgYXQgdGhpcyBwb2ludAoKICAgIC8vIFN0cmlwIGJvdGggbnVtYmVycyB0byBhcHByb3hpbWF0ZSBzaGlmdCB2YWx1ZQogICAgaWYgKG51bS5sZW5ndGggPiB0aGlzLmxlbmd0aCB8fCB0aGlzLmNtcChudW0pIDwgMCkgewogICAgICByZXR1cm4gewogICAgICAgIGRpdjogbmV3IEJOKDApLAogICAgICAgIG1vZDogdGhpcwogICAgICB9OwogICAgfQoKICAgIC8vIFZlcnkgc2hvcnQgcmVkdWN0aW9uCiAgICBpZiAobnVtLmxlbmd0aCA9PT0gMSkgewogICAgICBpZiAobW9kZSA9PT0gJ2RpdicpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiB0aGlzLmRpdm4obnVtLndvcmRzWzBdKSwKICAgICAgICAgIG1vZDogbnVsbAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmIChtb2RlID09PSAnbW9kJykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBkaXY6IG51bGwsCiAgICAgICAgICBtb2Q6IG5ldyBCTih0aGlzLm1vZG4obnVtLndvcmRzWzBdKSkKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGRpdjogdGhpcy5kaXZuKG51bS53b3Jkc1swXSksCiAgICAgICAgbW9kOiBuZXcgQk4odGhpcy5tb2RuKG51bS53b3Jkc1swXSkpCiAgICAgIH07CiAgICB9CgogICAgcmV0dXJuIHRoaXMuX3dvcmREaXYobnVtLCBtb2RlKTsKICB9OwoKICAvLyBGaW5kIGB0aGlzYCAvIGBudW1gCiAgQk4ucHJvdG90eXBlLmRpdiA9IGZ1bmN0aW9uIGRpdiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5kaXZtb2QobnVtLCAnZGl2JywgZmFsc2UpLmRpdjsKICB9OwoKICAvLyBGaW5kIGB0aGlzYCAlIGBudW1gCiAgQk4ucHJvdG90eXBlLm1vZCA9IGZ1bmN0aW9uIG1vZCAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5kaXZtb2QobnVtLCAnbW9kJywgZmFsc2UpLm1vZDsKICB9OwoKICBCTi5wcm90b3R5cGUudW1vZCA9IGZ1bmN0aW9uIHVtb2QgKG51bSkgewogICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ21vZCcsIHRydWUpLm1vZDsKICB9OwoKICAvLyBGaW5kIFJvdW5kKGB0aGlzYCAvIGBudW1gKQogIEJOLnByb3RvdHlwZS5kaXZSb3VuZCA9IGZ1bmN0aW9uIGRpdlJvdW5kIChudW0pIHsKICAgIHZhciBkbSA9IHRoaXMuZGl2bW9kKG51bSk7CgogICAgLy8gRmFzdCBjYXNlIC0gZXhhY3QgZGl2aXNpb24KICAgIGlmIChkbS5tb2QuaXNaZXJvKCkpIHJldHVybiBkbS5kaXY7CgogICAgdmFyIG1vZCA9IGRtLmRpdi5uZWdhdGl2ZSAhPT0gMCA/IGRtLm1vZC5pc3ViKG51bSkgOiBkbS5tb2Q7CgogICAgdmFyIGhhbGYgPSBudW0udXNocm4oMSk7CiAgICB2YXIgcjIgPSBudW0uYW5kbG4oMSk7CiAgICB2YXIgY21wID0gbW9kLmNtcChoYWxmKTsKCiAgICAvLyBSb3VuZCBkb3duCiAgICBpZiAoY21wIDwgMCB8fCByMiA9PT0gMSAmJiBjbXAgPT09IDApIHJldHVybiBkbS5kaXY7CgogICAgLy8gUm91bmQgdXAKICAgIHJldHVybiBkbS5kaXYubmVnYXRpdmUgIT09IDAgPyBkbS5kaXYuaXN1Ym4oMSkgOiBkbS5kaXYuaWFkZG4oMSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLm1vZG4gPSBmdW5jdGlvbiBtb2RuIChudW0pIHsKICAgIGFzc2VydChudW0gPD0gMHgzZmZmZmZmKTsKICAgIHZhciBwID0gKDEgPDwgMjYpICUgbnVtOwoKICAgIHZhciBhY2MgPSAwOwogICAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgYWNjID0gKHAgKiBhY2MgKyAodGhpcy53b3Jkc1tpXSB8IDApKSAlIG51bTsKICAgIH0KCiAgICByZXR1cm4gYWNjOwogIH07CgogIC8vIEluLXBsYWNlIGRpdmlzaW9uIGJ5IG51bWJlcgogIEJOLnByb3RvdHlwZS5pZGl2biA9IGZ1bmN0aW9uIGlkaXZuIChudW0pIHsKICAgIGFzc2VydChudW0gPD0gMHgzZmZmZmZmKTsKCiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgdmFyIHcgPSAodGhpcy53b3Jkc1tpXSB8IDApICsgY2FycnkgKiAweDQwMDAwMDA7CiAgICAgIHRoaXMud29yZHNbaV0gPSAodyAvIG51bSkgfCAwOwogICAgICBjYXJyeSA9IHcgJSBudW07CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuZGl2biA9IGZ1bmN0aW9uIGRpdm4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pZGl2bihudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5lZ2NkID0gZnVuY3Rpb24gZWdjZCAocCkgewogICAgYXNzZXJ0KHAubmVnYXRpdmUgPT09IDApOwogICAgYXNzZXJ0KCFwLmlzWmVybygpKTsKCiAgICB2YXIgeCA9IHRoaXM7CiAgICB2YXIgeSA9IHAuY2xvbmUoKTsKCiAgICBpZiAoeC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICB4ID0geC51bW9kKHApOwogICAgfSBlbHNlIHsKICAgICAgeCA9IHguY2xvbmUoKTsKICAgIH0KCiAgICAvLyBBICogeCArIEIgKiB5ID0geAogICAgdmFyIEEgPSBuZXcgQk4oMSk7CiAgICB2YXIgQiA9IG5ldyBCTigwKTsKCiAgICAvLyBDICogeCArIEQgKiB5ID0geQogICAgdmFyIEMgPSBuZXcgQk4oMCk7CiAgICB2YXIgRCA9IG5ldyBCTigxKTsKCiAgICB2YXIgZyA9IDA7CgogICAgd2hpbGUgKHguaXNFdmVuKCkgJiYgeS5pc0V2ZW4oKSkgewogICAgICB4Lml1c2hybigxKTsKICAgICAgeS5pdXNocm4oMSk7CiAgICAgICsrZzsKICAgIH0KCiAgICB2YXIgeXAgPSB5LmNsb25lKCk7CiAgICB2YXIgeHAgPSB4LmNsb25lKCk7CgogICAgd2hpbGUgKCF4LmlzWmVybygpKSB7CiAgICAgIGZvciAodmFyIGkgPSAwLCBpbSA9IDE7ICh4LndvcmRzWzBdICYgaW0pID09PSAwICYmIGkgPCAyNjsgKytpLCBpbSA8PD0gMSk7CiAgICAgIGlmIChpID4gMCkgewogICAgICAgIHguaXVzaHJuKGkpOwogICAgICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgICAgICBpZiAoQS5pc09kZCgpIHx8IEIuaXNPZGQoKSkgewogICAgICAgICAgICBBLmlhZGQoeXApOwogICAgICAgICAgICBCLmlzdWIoeHApOwogICAgICAgICAgfQoKICAgICAgICAgIEEuaXVzaHJuKDEpOwogICAgICAgICAgQi5pdXNocm4oMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKHZhciBqID0gMCwgam0gPSAxOyAoeS53b3Jkc1swXSAmIGptKSA9PT0gMCAmJiBqIDwgMjY7ICsraiwgam0gPDw9IDEpOwogICAgICBpZiAoaiA+IDApIHsKICAgICAgICB5Lml1c2hybihqKTsKICAgICAgICB3aGlsZSAoai0tID4gMCkgewogICAgICAgICAgaWYgKEMuaXNPZGQoKSB8fCBELmlzT2RkKCkpIHsKICAgICAgICAgICAgQy5pYWRkKHlwKTsKICAgICAgICAgICAgRC5pc3ViKHhwKTsKICAgICAgICAgIH0KCiAgICAgICAgICBDLml1c2hybigxKTsKICAgICAgICAgIEQuaXVzaHJuKDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHguY21wKHkpID49IDApIHsKICAgICAgICB4LmlzdWIoeSk7CiAgICAgICAgQS5pc3ViKEMpOwogICAgICAgIEIuaXN1YihEKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB5LmlzdWIoeCk7CiAgICAgICAgQy5pc3ViKEEpOwogICAgICAgIEQuaXN1YihCKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGE6IEMsCiAgICAgIGI6IEQsCiAgICAgIGdjZDogeS5pdXNobG4oZykKICAgIH07CiAgfTsKCiAgLy8gVGhpcyBpcyByZWR1Y2VkIGluY2FybmF0aW9uIG9mIHRoZSBiaW5hcnkgRUVBCiAgLy8gYWJvdmUsIGRlc2lnbmF0ZWQgdG8gaW52ZXJ0IG1lbWJlcnMgb2YgdGhlCiAgLy8gX3ByaW1lXyBmaWVsZHMgRihwKSBhdCBhIG1heGltYWwgc3BlZWQKICBCTi5wcm90b3R5cGUuX2ludm1wID0gZnVuY3Rpb24gX2ludm1wIChwKSB7CiAgICBhc3NlcnQocC5uZWdhdGl2ZSA9PT0gMCk7CiAgICBhc3NlcnQoIXAuaXNaZXJvKCkpOwoKICAgIHZhciBhID0gdGhpczsKICAgIHZhciBiID0gcC5jbG9uZSgpOwoKICAgIGlmIChhLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIGEgPSBhLnVtb2QocCk7CiAgICB9IGVsc2UgewogICAgICBhID0gYS5jbG9uZSgpOwogICAgfQoKICAgIHZhciB4MSA9IG5ldyBCTigxKTsKICAgIHZhciB4MiA9IG5ldyBCTigwKTsKCiAgICB2YXIgZGVsdGEgPSBiLmNsb25lKCk7CgogICAgd2hpbGUgKGEuY21wbigxKSA+IDAgJiYgYi5jbXBuKDEpID4gMCkgewogICAgICBmb3IgKHZhciBpID0gMCwgaW0gPSAxOyAoYS53b3Jkc1swXSAmIGltKSA9PT0gMCAmJiBpIDwgMjY7ICsraSwgaW0gPDw9IDEpOwogICAgICBpZiAoaSA+IDApIHsKICAgICAgICBhLml1c2hybihpKTsKICAgICAgICB3aGlsZSAoaS0tID4gMCkgewogICAgICAgICAgaWYgKHgxLmlzT2RkKCkpIHsKICAgICAgICAgICAgeDEuaWFkZChkZWx0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgeDEuaXVzaHJuKDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yICh2YXIgaiA9IDAsIGptID0gMTsgKGIud29yZHNbMF0gJiBqbSkgPT09IDAgJiYgaiA8IDI2OyArK2osIGptIDw8PSAxKTsKICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgYi5pdXNocm4oaik7CiAgICAgICAgd2hpbGUgKGotLSA+IDApIHsKICAgICAgICAgIGlmICh4Mi5pc09kZCgpKSB7CiAgICAgICAgICAgIHgyLmlhZGQoZGVsdGEpOwogICAgICAgICAgfQoKICAgICAgICAgIHgyLml1c2hybigxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChhLmNtcChiKSA+PSAwKSB7CiAgICAgICAgYS5pc3ViKGIpOwogICAgICAgIHgxLmlzdWIoeDIpOwogICAgICB9IGVsc2UgewogICAgICAgIGIuaXN1YihhKTsKICAgICAgICB4Mi5pc3ViKHgxKTsKICAgICAgfQogICAgfQoKICAgIHZhciByZXM7CiAgICBpZiAoYS5jbXBuKDEpID09PSAwKSB7CiAgICAgIHJlcyA9IHgxOwogICAgfSBlbHNlIHsKICAgICAgcmVzID0geDI7CiAgICB9CgogICAgaWYgKHJlcy5jbXBuKDApIDwgMCkgewogICAgICByZXMuaWFkZChwKTsKICAgIH0KCiAgICByZXR1cm4gcmVzOwogIH07CgogIEJOLnByb3RvdHlwZS5nY2QgPSBmdW5jdGlvbiBnY2QgKG51bSkgewogICAgaWYgKHRoaXMuaXNaZXJvKCkpIHJldHVybiBudW0uYWJzKCk7CiAgICBpZiAobnVtLmlzWmVybygpKSByZXR1cm4gdGhpcy5hYnMoKTsKCiAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgIHZhciBiID0gbnVtLmNsb25lKCk7CiAgICBhLm5lZ2F0aXZlID0gMDsKICAgIGIubmVnYXRpdmUgPSAwOwoKICAgIC8vIFJlbW92ZSBjb21tb24gZmFjdG9yIG9mIHR3bwogICAgZm9yICh2YXIgc2hpZnQgPSAwOyBhLmlzRXZlbigpICYmIGIuaXNFdmVuKCk7IHNoaWZ0KyspIHsKICAgICAgYS5pdXNocm4oMSk7CiAgICAgIGIuaXVzaHJuKDEpOwogICAgfQoKICAgIGRvIHsKICAgICAgd2hpbGUgKGEuaXNFdmVuKCkpIHsKICAgICAgICBhLml1c2hybigxKTsKICAgICAgfQogICAgICB3aGlsZSAoYi5pc0V2ZW4oKSkgewogICAgICAgIGIuaXVzaHJuKDEpOwogICAgICB9CgogICAgICB2YXIgciA9IGEuY21wKGIpOwogICAgICBpZiAociA8IDApIHsKICAgICAgICAvLyBTd2FwIGBhYCBhbmQgYGJgIHRvIG1ha2UgYGFgIGFsd2F5cyBiaWdnZXIgdGhhbiBgYmAKICAgICAgICB2YXIgdCA9IGE7CiAgICAgICAgYSA9IGI7CiAgICAgICAgYiA9IHQ7CiAgICAgIH0gZWxzZSBpZiAociA9PT0gMCB8fCBiLmNtcG4oMSkgPT09IDApIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgYS5pc3ViKGIpOwogICAgfSB3aGlsZSAodHJ1ZSk7CgogICAgcmV0dXJuIGIuaXVzaGxuKHNoaWZ0KTsKICB9OwoKICAvLyBJbnZlcnQgbnVtYmVyIGluIHRoZSBmaWVsZCBGKG51bSkKICBCTi5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKG51bSkgewogICAgcmV0dXJuIHRoaXMuZWdjZChudW0pLmEudW1vZChudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5pc0V2ZW4gPSBmdW5jdGlvbiBpc0V2ZW4gKCkgewogICAgcmV0dXJuICh0aGlzLndvcmRzWzBdICYgMSkgPT09IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlzT2RkID0gZnVuY3Rpb24gaXNPZGQgKCkgewogICAgcmV0dXJuICh0aGlzLndvcmRzWzBdICYgMSkgPT09IDE7CiAgfTsKCiAgLy8gQW5kIGZpcnN0IHdvcmQgYW5kIG51bQogIEJOLnByb3RvdHlwZS5hbmRsbiA9IGZ1bmN0aW9uIGFuZGxuIChudW0pIHsKICAgIHJldHVybiB0aGlzLndvcmRzWzBdICYgbnVtOwogIH07CgogIC8vIEluY3JlbWVudCBhdCB0aGUgYml0IHBvc2l0aW9uIGluLWxpbmUKICBCTi5wcm90b3R5cGUuYmluY24gPSBmdW5jdGlvbiBiaW5jbiAoYml0KSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicpOwogICAgdmFyIHIgPSBiaXQgJSAyNjsKICAgIHZhciBzID0gKGJpdCAtIHIpIC8gMjY7CiAgICB2YXIgcSA9IDEgPDwgcjsKCiAgICAvLyBGYXN0IGNhc2U6IGJpdCBpcyBtdWNoIGhpZ2hlciB0aGFuIGFsbCBleGlzdGluZyB3b3JkcwogICAgaWYgKHRoaXMubGVuZ3RoIDw9IHMpIHsKICAgICAgdGhpcy5fZXhwYW5kKHMgKyAxKTsKICAgICAgdGhpcy53b3Jkc1tzXSB8PSBxOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvLyBBZGQgYml0IGFuZCBwcm9wYWdhdGUsIGlmIG5lZWRlZAogICAgdmFyIGNhcnJ5ID0gcTsKICAgIGZvciAodmFyIGkgPSBzOyBjYXJyeSAhPT0gMCAmJiBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgdyA9IHRoaXMud29yZHNbaV0gfCAwOwogICAgICB3ICs9IGNhcnJ5OwogICAgICBjYXJyeSA9IHcgPj4+IDI2OwogICAgICB3ICY9IDB4M2ZmZmZmZjsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHc7CiAgICB9CiAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICB0aGlzLmxlbmd0aCsrOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uIGlzWmVybyAoKSB7CiAgICByZXR1cm4gdGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy53b3Jkc1swXSA9PT0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUuY21wbiA9IGZ1bmN0aW9uIGNtcG4gKG51bSkgewogICAgdmFyIG5lZ2F0aXZlID0gbnVtIDwgMDsKCiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiAhbmVnYXRpdmUpIHJldHVybiAtMTsKICAgIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG5lZ2F0aXZlKSByZXR1cm4gMTsKCiAgICB0aGlzLnN0cmlwKCk7CgogICAgdmFyIHJlczsKICAgIGlmICh0aGlzLmxlbmd0aCA+IDEpIHsKICAgICAgcmVzID0gMTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChuZWdhdGl2ZSkgewogICAgICAgIG51bSA9IC1udW07CiAgICAgIH0KCiAgICAgIGFzc2VydChudW0gPD0gMHgzZmZmZmZmLCAnTnVtYmVyIGlzIHRvbyBiaWcnKTsKCiAgICAgIHZhciB3ID0gdGhpcy53b3Jkc1swXSB8IDA7CiAgICAgIHJlcyA9IHcgPT09IG51bSA/IDAgOiB3IDwgbnVtID8gLTEgOiAxOwogICAgfQogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHJldHVybiAtcmVzIHwgMDsKICAgIHJldHVybiByZXM7CiAgfTsKCiAgLy8gQ29tcGFyZSB0d28gbnVtYmVycyBhbmQgcmV0dXJuOgogIC8vIDEgLSBpZiBgdGhpc2AgPiBgbnVtYAogIC8vIDAgLSBpZiBgdGhpc2AgPT0gYG51bWAKICAvLyAtMSAtIGlmIGB0aGlzYCA8IGBudW1gCiAgQk4ucHJvdG90eXBlLmNtcCA9IGZ1bmN0aW9uIGNtcCAobnVtKSB7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHJldHVybiAtMTsKICAgIGlmICh0aGlzLm5lZ2F0aXZlID09PSAwICYmIG51bS5uZWdhdGl2ZSAhPT0gMCkgcmV0dXJuIDE7CgogICAgdmFyIHJlcyA9IHRoaXMudWNtcChudW0pOwogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHJldHVybiAtcmVzIHwgMDsKICAgIHJldHVybiByZXM7CiAgfTsKCiAgLy8gVW5zaWduZWQgY29tcGFyaXNvbgogIEJOLnByb3RvdHlwZS51Y21wID0gZnVuY3Rpb24gdWNtcCAobnVtKSB7CiAgICAvLyBBdCB0aGlzIHBvaW50IGJvdGggbnVtYmVycyBoYXZlIHRoZSBzYW1lIHNpZ24KICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiAxOwogICAgaWYgKHRoaXMubGVuZ3RoIDwgbnVtLmxlbmd0aCkgcmV0dXJuIC0xOwoKICAgIHZhciByZXMgPSAwOwogICAgZm9yICh2YXIgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgdmFyIGEgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgdmFyIGIgPSBudW0ud29yZHNbaV0gfCAwOwoKICAgICAgaWYgKGEgPT09IGIpIGNvbnRpbnVlOwogICAgICBpZiAoYSA8IGIpIHsKICAgICAgICByZXMgPSAtMTsKICAgICAgfSBlbHNlIGlmIChhID4gYikgewogICAgICAgIHJlcyA9IDE7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICB9CiAgICByZXR1cm4gcmVzOwogIH07CgogIEJOLnByb3RvdHlwZS5ndG4gPSBmdW5jdGlvbiBndG4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wbihudW0pID09PSAxOwogIH07CgogIEJOLnByb3RvdHlwZS5ndCA9IGZ1bmN0aW9uIGd0IChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcChudW0pID09PSAxOwogIH07CgogIEJOLnByb3RvdHlwZS5ndGVuID0gZnVuY3Rpb24gZ3RlbiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPj0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUuZ3RlID0gZnVuY3Rpb24gZ3RlIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcChudW0pID49IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmx0biA9IGZ1bmN0aW9uIGx0biAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXBuKG51bSkgPT09IC0xOwogIH07CgogIEJOLnByb3RvdHlwZS5sdCA9IGZ1bmN0aW9uIGx0IChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcChudW0pID09PSAtMTsKICB9OwoKICBCTi5wcm90b3R5cGUubHRlbiA9IGZ1bmN0aW9uIGx0ZW4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wbihudW0pIDw9IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmx0ZSA9IGZ1bmN0aW9uIGx0ZSAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA8PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5lcW4gPSBmdW5jdGlvbiBlcW4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wbihudW0pID09PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcChudW0pID09PSAwOwogIH07CgogIC8vCiAgLy8gQSByZWR1Y2UgY29udGV4dCwgY291bGQgYmUgdXNpbmcgbW9udGdvbWVyeSBvciBzb21ldGhpbmcgYmV0dGVyLCBkZXBlbmRpbmcKICAvLyBvbiB0aGUgYG1gIGl0c2VsZi4KICAvLwogIEJOLnJlZCA9IGZ1bmN0aW9uIHJlZCAobnVtKSB7CiAgICByZXR1cm4gbmV3IFJlZChudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS50b1JlZCA9IGZ1bmN0aW9uIHRvUmVkIChjdHgpIHsKICAgIGFzc2VydCghdGhpcy5yZWQsICdBbHJlYWR5IGEgbnVtYmVyIGluIHJlZHVjdGlvbiBjb250ZXh0Jyk7CiAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICByZXR1cm4gY3R4LmNvbnZlcnRUbyh0aGlzKS5fZm9yY2VSZWQoY3R4KTsKICB9OwoKICBCTi5wcm90b3R5cGUuZnJvbVJlZCA9IGZ1bmN0aW9uIGZyb21SZWQgKCkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAnZnJvbVJlZCB3b3JrcyBvbmx5IHdpdGggbnVtYmVycyBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgcmV0dXJuIHRoaXMucmVkLmNvbnZlcnRGcm9tKHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS5fZm9yY2VSZWQgPSBmdW5jdGlvbiBfZm9yY2VSZWQgKGN0eCkgewogICAgdGhpcy5yZWQgPSBjdHg7CiAgICByZXR1cm4gdGhpczsKICB9OwoKICBCTi5wcm90b3R5cGUuZm9yY2VSZWQgPSBmdW5jdGlvbiBmb3JjZVJlZCAoY3R4KSB7CiAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgcmV0dXJuIHRoaXMuX2ZvcmNlUmVkKGN0eCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZEFkZCA9IGZ1bmN0aW9uIHJlZEFkZCAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRBZGQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICByZXR1cm4gdGhpcy5yZWQuYWRkKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZElBZGQgPSBmdW5jdGlvbiByZWRJQWRkIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZElBZGQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICByZXR1cm4gdGhpcy5yZWQuaWFkZCh0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRTdWIgPSBmdW5jdGlvbiByZWRTdWIgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3ViIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgcmV0dXJuIHRoaXMucmVkLnN1Yih0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRJU3ViID0gZnVuY3Rpb24gcmVkSVN1YiAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJU3ViIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgcmV0dXJuIHRoaXMucmVkLmlzdWIodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkU2hsID0gZnVuY3Rpb24gcmVkU2hsIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFNobCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHJldHVybiB0aGlzLnJlZC5zaGwodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkTXVsID0gZnVuY3Rpb24gcmVkTXVsIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE11bCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkyKHRoaXMsIG51bSk7CiAgICByZXR1cm4gdGhpcy5yZWQubXVsKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZElNdWwgPSBmdW5jdGlvbiByZWRJTXVsIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE11bCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkyKHRoaXMsIG51bSk7CiAgICByZXR1cm4gdGhpcy5yZWQuaW11bCh0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRTcXIgPSBmdW5jdGlvbiByZWRTcXIgKCkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3FyIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICByZXR1cm4gdGhpcy5yZWQuc3FyKHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRJU3FyID0gZnVuY3Rpb24gcmVkSVNxciAoKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJU3FyIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICByZXR1cm4gdGhpcy5yZWQuaXNxcih0aGlzKTsKICB9OwoKICAvLyBTcXVhcmUgcm9vdCBvdmVyIHAKICBCTi5wcm90b3R5cGUucmVkU3FydCA9IGZ1bmN0aW9uIHJlZFNxcnQgKCkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkU3FydCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgcmV0dXJuIHRoaXMucmVkLnNxcnQodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZEludm0gPSBmdW5jdGlvbiByZWRJbnZtICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZEludm0gd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgIHJldHVybiB0aGlzLnJlZC5pbnZtKHRoaXMpOwogIH07CgogIC8vIFJldHVybiBuZWdhdGl2ZSBjbG9uZSBvZiBgdGhpc2AgJSBgcmVkIG1vZHVsb2AKICBCTi5wcm90b3R5cGUucmVkTmVnID0gZnVuY3Rpb24gcmVkTmVnICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZE5lZyB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgcmV0dXJuIHRoaXMucmVkLm5lZyh0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkUG93ID0gZnVuY3Rpb24gcmVkUG93IChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCAmJiAhbnVtLnJlZCwgJ3JlZFBvdyhub3JtYWxOdW0pJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgIHJldHVybiB0aGlzLnJlZC5wb3codGhpcywgbnVtKTsKICB9OwoKICAvLyBQcmltZSBudW1iZXJzIHdpdGggZWZmaWNpZW50IHJlZHVjdGlvbgogIHZhciBwcmltZXMgPSB7CiAgICBrMjU2OiBudWxsLAogICAgcDIyNDogbnVsbCwKICAgIHAxOTI6IG51bGwsCiAgICBwMjU1MTk6IG51bGwKICB9OwoKICAvLyBQc2V1ZG8tTWVyc2VubmUgcHJpbWUKICBmdW5jdGlvbiBNUHJpbWUgKG5hbWUsIHApIHsKICAgIC8vIFAgPSAyIF4gTiAtIEsKICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB0aGlzLnAgPSBuZXcgQk4ocCwgMTYpOwogICAgdGhpcy5uID0gdGhpcy5wLmJpdExlbmd0aCgpOwogICAgdGhpcy5rID0gbmV3IEJOKDEpLml1c2hsbih0aGlzLm4pLmlzdWIodGhpcy5wKTsKCiAgICB0aGlzLnRtcCA9IHRoaXMuX3RtcCgpOwogIH0KCiAgTVByaW1lLnByb3RvdHlwZS5fdG1wID0gZnVuY3Rpb24gX3RtcCAoKSB7CiAgICB2YXIgdG1wID0gbmV3IEJOKG51bGwpOwogICAgdG1wLndvcmRzID0gbmV3IEFycmF5KE1hdGguY2VpbCh0aGlzLm4gLyAxMykpOwogICAgcmV0dXJuIHRtcDsKICB9OwoKICBNUHJpbWUucHJvdG90eXBlLmlyZWR1Y2UgPSBmdW5jdGlvbiBpcmVkdWNlIChudW0pIHsKICAgIC8vIEFzc3VtZXMgdGhhdCBgbnVtYCBpcyBsZXNzIHRoYW4gYFBeMmAKICAgIC8vIG51bSA9IEhJICogKDIgXiBOIC0gSykgKyBISSAqIEsgKyBMTyA9IEhJICogSyArIExPIChtb2QgUCkKICAgIHZhciByID0gbnVtOwogICAgdmFyIHJsZW47CgogICAgZG8gewogICAgICB0aGlzLnNwbGl0KHIsIHRoaXMudG1wKTsKICAgICAgciA9IHRoaXMuaW11bEsocik7CiAgICAgIHIgPSByLmlhZGQodGhpcy50bXApOwogICAgICBybGVuID0gci5iaXRMZW5ndGgoKTsKICAgIH0gd2hpbGUgKHJsZW4gPiB0aGlzLm4pOwoKICAgIHZhciBjbXAgPSBybGVuIDwgdGhpcy5uID8gLTEgOiByLnVjbXAodGhpcy5wKTsKICAgIGlmIChjbXAgPT09IDApIHsKICAgICAgci53b3Jkc1swXSA9IDA7CiAgICAgIHIubGVuZ3RoID0gMTsKICAgIH0gZWxzZSBpZiAoY21wID4gMCkgewogICAgICByLmlzdWIodGhpcy5wKTsKICAgIH0gZWxzZSB7CiAgICAgIHIuc3RyaXAoKTsKICAgIH0KCiAgICByZXR1cm4gcjsKICB9OwoKICBNUHJpbWUucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKGlucHV0LCBvdXQpIHsKICAgIGlucHV0Lml1c2hybih0aGlzLm4sIDAsIG91dCk7CiAgfTsKCiAgTVByaW1lLnByb3RvdHlwZS5pbXVsSyA9IGZ1bmN0aW9uIGltdWxLIChudW0pIHsKICAgIHJldHVybiBudW0uaW11bCh0aGlzLmspOwogIH07CgogIGZ1bmN0aW9uIEsyNTYgKCkgewogICAgTVByaW1lLmNhbGwoCiAgICAgIHRoaXMsCiAgICAgICdrMjU2JywKICAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmYzJmJyk7CiAgfQogIGluaGVyaXRzKEsyNTYsIE1QcmltZSk7CgogIEsyNTYucHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQgKGlucHV0LCBvdXRwdXQpIHsKICAgIC8vIDI1NiA9IDkgKiAyNiArIDIyCiAgICB2YXIgbWFzayA9IDB4M2ZmZmZmOwoKICAgIHZhciBvdXRMZW4gPSBNYXRoLm1pbihpbnB1dC5sZW5ndGgsIDkpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdXRMZW47IGkrKykgewogICAgICBvdXRwdXQud29yZHNbaV0gPSBpbnB1dC53b3Jkc1tpXTsKICAgIH0KICAgIG91dHB1dC5sZW5ndGggPSBvdXRMZW47CgogICAgaWYgKGlucHV0Lmxlbmd0aCA8PSA5KSB7CiAgICAgIGlucHV0LndvcmRzWzBdID0gMDsKICAgICAgaW5wdXQubGVuZ3RoID0gMTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIFNoaWZ0IGJ5IDkgbGltYnMKICAgIHZhciBwcmV2ID0gaW5wdXQud29yZHNbOV07CiAgICBvdXRwdXQud29yZHNbb3V0cHV0Lmxlbmd0aCsrXSA9IHByZXYgJiBtYXNrOwoKICAgIGZvciAoaSA9IDEwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIG5leHQgPSBpbnB1dC53b3Jkc1tpXSB8IDA7CiAgICAgIGlucHV0LndvcmRzW2kgLSAxMF0gPSAoKG5leHQgJiBtYXNrKSA8PCA0KSB8IChwcmV2ID4+PiAyMik7CiAgICAgIHByZXYgPSBuZXh0OwogICAgfQogICAgcHJldiA+Pj49IDIyOwogICAgaW5wdXQud29yZHNbaSAtIDEwXSA9IHByZXY7CiAgICBpZiAocHJldiA9PT0gMCAmJiBpbnB1dC5sZW5ndGggPiAxMCkgewogICAgICBpbnB1dC5sZW5ndGggLT0gMTA7CiAgICB9IGVsc2UgewogICAgICBpbnB1dC5sZW5ndGggLT0gOTsKICAgIH0KICB9OwoKICBLMjU2LnByb3RvdHlwZS5pbXVsSyA9IGZ1bmN0aW9uIGltdWxLIChudW0pIHsKICAgIC8vIEsgPSAweDEwMDAwMDNkMSA9IFsgMHg0MCwgMHgzZDEgXQogICAgbnVtLndvcmRzW251bS5sZW5ndGhdID0gMDsKICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoICsgMV0gPSAwOwogICAgbnVtLmxlbmd0aCArPSAyOwoKICAgIC8vIGJvdW5kZWQgYXQ6IDB4NDAgKiAweDNmZmZmZmYgKyAweDNkMCA9IDB4MTAwMDAwMzkwCiAgICB2YXIgbG8gPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHcgPSBudW0ud29yZHNbaV0gfCAwOwogICAgICBsbyArPSB3ICogMHgzZDE7CiAgICAgIG51bS53b3Jkc1tpXSA9IGxvICYgMHgzZmZmZmZmOwogICAgICBsbyA9IHcgKiAweDQwICsgKChsbyAvIDB4NDAwMDAwMCkgfCAwKTsKICAgIH0KCiAgICAvLyBGYXN0IGxlbmd0aCByZWR1Y3Rpb24KICAgIGlmIChudW0ud29yZHNbbnVtLmxlbmd0aCAtIDFdID09PSAwKSB7CiAgICAgIG51bS5sZW5ndGgtLTsKICAgICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgICBudW0ubGVuZ3RoLS07CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudW07CiAgfTsKCiAgZnVuY3Rpb24gUDIyNCAoKSB7CiAgICBNUHJpbWUuY2FsbCgKICAgICAgdGhpcywKICAgICAgJ3AyMjQnLAogICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDEnKTsKICB9CiAgaW5oZXJpdHMoUDIyNCwgTVByaW1lKTsKCiAgZnVuY3Rpb24gUDE5MiAoKSB7CiAgICBNUHJpbWUuY2FsbCgKICAgICAgdGhpcywKICAgICAgJ3AxOTInLAogICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZmZmYgZmZmZmZmZmYnKTsKICB9CiAgaW5oZXJpdHMoUDE5MiwgTVByaW1lKTsKCiAgZnVuY3Rpb24gUDI1NTE5ICgpIHsKICAgIC8vIDIgXiAyNTUgLSAxOQogICAgTVByaW1lLmNhbGwoCiAgICAgIHRoaXMsCiAgICAgICcyNTUxOScsCiAgICAgICc3ZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmVkJyk7CiAgfQogIGluaGVyaXRzKFAyNTUxOSwgTVByaW1lKTsKCiAgUDI1NTE5LnByb3RvdHlwZS5pbXVsSyA9IGZ1bmN0aW9uIGltdWxLIChudW0pIHsKICAgIC8vIEsgPSAweDEzCiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW0ubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGhpID0gKG51bS53b3Jkc1tpXSB8IDApICogMHgxMyArIGNhcnJ5OwogICAgICB2YXIgbG8gPSBoaSAmIDB4M2ZmZmZmZjsKICAgICAgaGkgPj4+PSAyNjsKCiAgICAgIG51bS53b3Jkc1tpXSA9IGxvOwogICAgICBjYXJyeSA9IGhpOwogICAgfQogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIG51bS53b3Jkc1tudW0ubGVuZ3RoKytdID0gY2Fycnk7CiAgICB9CiAgICByZXR1cm4gbnVtOwogIH07CgogIC8vIEV4cG9ydGVkIG1vc3RseSBmb3IgdGVzdGluZyBwdXJwb3NlcywgdXNlIHBsYWluIG5hbWUgaW5zdGVhZAogIEJOLl9wcmltZSA9IGZ1bmN0aW9uIHByaW1lIChuYW1lKSB7CiAgICAvLyBDYWNoZWQgdmVyc2lvbiBvZiBwcmltZQogICAgaWYgKHByaW1lc1tuYW1lXSkgcmV0dXJuIHByaW1lc1tuYW1lXTsKCiAgICB2YXIgcHJpbWU7CiAgICBpZiAobmFtZSA9PT0gJ2syNTYnKSB7CiAgICAgIHByaW1lID0gbmV3IEsyNTYoKTsKICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AyMjQnKSB7CiAgICAgIHByaW1lID0gbmV3IFAyMjQoKTsKICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AxOTInKSB7CiAgICAgIHByaW1lID0gbmV3IFAxOTIoKTsKICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3AyNTUxOScpIHsKICAgICAgcHJpbWUgPSBuZXcgUDI1NTE5KCk7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcHJpbWUgJyArIG5hbWUpOwogICAgfQogICAgcHJpbWVzW25hbWVdID0gcHJpbWU7CgogICAgcmV0dXJuIHByaW1lOwogIH07CgogIC8vCiAgLy8gQmFzZSByZWR1Y3Rpb24gZW5naW5lCiAgLy8KICBmdW5jdGlvbiBSZWQgKG0pIHsKICAgIGlmICh0eXBlb2YgbSA9PT0gJ3N0cmluZycpIHsKICAgICAgdmFyIHByaW1lID0gQk4uX3ByaW1lKG0pOwogICAgICB0aGlzLm0gPSBwcmltZS5wOwogICAgICB0aGlzLnByaW1lID0gcHJpbWU7CiAgICB9IGVsc2UgewogICAgICBhc3NlcnQobS5ndG4oMSksICdtb2R1bHVzIG11c3QgYmUgZ3JlYXRlciB0aGFuIDEnKTsKICAgICAgdGhpcy5tID0gbTsKICAgICAgdGhpcy5wcmltZSA9IG51bGw7CiAgICB9CiAgfQoKICBSZWQucHJvdG90eXBlLl92ZXJpZnkxID0gZnVuY3Rpb24gX3ZlcmlmeTEgKGEpIHsKICAgIGFzc2VydChhLm5lZ2F0aXZlID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgIGFzc2VydChhLnJlZCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICB9OwoKICBSZWQucHJvdG90eXBlLl92ZXJpZnkyID0gZnVuY3Rpb24gX3ZlcmlmeTIgKGEsIGIpIHsKICAgIGFzc2VydCgoYS5uZWdhdGl2ZSB8IGIubmVnYXRpdmUpID09PSAwLCAncmVkIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZXMnKTsKICAgIGFzc2VydChhLnJlZCAmJiBhLnJlZCA9PT0gYi5yZWQsCiAgICAgICdyZWQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5pbW9kID0gZnVuY3Rpb24gaW1vZCAoYSkgewogICAgaWYgKHRoaXMucHJpbWUpIHJldHVybiB0aGlzLnByaW1lLmlyZWR1Y2UoYSkuX2ZvcmNlUmVkKHRoaXMpOwogICAgcmV0dXJuIGEudW1vZCh0aGlzLm0pLl9mb3JjZVJlZCh0aGlzKTsKICB9OwoKICBSZWQucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZyAoYSkgewogICAgaWYgKGEuaXNaZXJvKCkpIHsKICAgICAgcmV0dXJuIGEuY2xvbmUoKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5tLnN1YihhKS5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgdmFyIHJlcyA9IGEuYWRkKGIpOwogICAgaWYgKHJlcy5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICB9CiAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICB9OwoKICBSZWQucHJvdG90eXBlLmlhZGQgPSBmdW5jdGlvbiBpYWRkIChhLCBiKSB7CiAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwoKICAgIHZhciByZXMgPSBhLmlhZGQoYik7CiAgICBpZiAocmVzLmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgcmVzLmlzdWIodGhpcy5tKTsKICAgIH0KICAgIHJldHVybiByZXM7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5zdWIgPSBmdW5jdGlvbiBzdWIgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgdmFyIHJlcyA9IGEuc3ViKGIpOwogICAgaWYgKHJlcy5jbXBuKDApIDwgMCkgewogICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgfQogICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5pc3ViID0gZnVuY3Rpb24gaXN1YiAoYSwgYikgewogICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICB2YXIgcmVzID0gYS5pc3ViKGIpOwogICAgaWYgKHJlcy5jbXBuKDApIDwgMCkgewogICAgICByZXMuaWFkZCh0aGlzLm0pOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwoKICBSZWQucHJvdG90eXBlLnNobCA9IGZ1bmN0aW9uIHNobCAoYSwgbnVtKSB7CiAgICB0aGlzLl92ZXJpZnkxKGEpOwogICAgcmV0dXJuIHRoaXMuaW1vZChhLnVzaGxuKG51bSkpOwogIH07CgogIFJlZC5wcm90b3R5cGUuaW11bCA9IGZ1bmN0aW9uIGltdWwgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICByZXR1cm4gdGhpcy5pbW9kKGEuaW11bChiKSk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CiAgICByZXR1cm4gdGhpcy5pbW9kKGEubXVsKGIpKTsKICB9OwoKICBSZWQucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyIChhKSB7CiAgICByZXR1cm4gdGhpcy5pbXVsKGEsIGEuY2xvbmUoKSk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5zcXIgPSBmdW5jdGlvbiBzcXIgKGEpIHsKICAgIHJldHVybiB0aGlzLm11bChhLCBhKTsKICB9OwoKICBSZWQucHJvdG90eXBlLnNxcnQgPSBmdW5jdGlvbiBzcXJ0IChhKSB7CiAgICBpZiAoYS5pc1plcm8oKSkgcmV0dXJuIGEuY2xvbmUoKTsKCiAgICB2YXIgbW9kMyA9IHRoaXMubS5hbmRsbigzKTsKICAgIGFzc2VydChtb2QzICUgMiA9PT0gMSk7CgogICAgLy8gRmFzdCBjYXNlCiAgICBpZiAobW9kMyA9PT0gMykgewogICAgICB2YXIgcG93ID0gdGhpcy5tLmFkZChuZXcgQk4oMSkpLml1c2hybigyKTsKICAgICAgcmV0dXJuIHRoaXMucG93KGEsIHBvdyk7CiAgICB9CgogICAgLy8gVG9uZWxsaS1TaGFua3MgYWxnb3JpdGhtIChUb3RhbGx5IHVub3B0aW1pemVkIGFuZCBzbG93KQogICAgLy8KICAgIC8vIEZpbmQgUSBhbmQgUywgdGhhdCBRICogMiBeIFMgPSAoUCAtIDEpCiAgICB2YXIgcSA9IHRoaXMubS5zdWJuKDEpOwogICAgdmFyIHMgPSAwOwogICAgd2hpbGUgKCFxLmlzWmVybygpICYmIHEuYW5kbG4oMSkgPT09IDApIHsKICAgICAgcysrOwogICAgICBxLml1c2hybigxKTsKICAgIH0KICAgIGFzc2VydCghcS5pc1plcm8oKSk7CgogICAgdmFyIG9uZSA9IG5ldyBCTigxKS50b1JlZCh0aGlzKTsKICAgIHZhciBuT25lID0gb25lLnJlZE5lZygpOwoKICAgIC8vIEZpbmQgcXVhZHJhdGljIG5vbi1yZXNpZHVlCiAgICAvLyBOT1RFOiBNYXggaXMgc3VjaCBiZWNhdXNlIG9mIGdlbmVyYWxpemVkIFJpZW1hbm4gaHlwb3RoZXNpcy4KICAgIHZhciBscG93ID0gdGhpcy5tLnN1Ym4oMSkuaXVzaHJuKDEpOwogICAgdmFyIHogPSB0aGlzLm0uYml0TGVuZ3RoKCk7CiAgICB6ID0gbmV3IEJOKDIgKiB6ICogeikudG9SZWQodGhpcyk7CgogICAgd2hpbGUgKHRoaXMucG93KHosIGxwb3cpLmNtcChuT25lKSAhPT0gMCkgewogICAgICB6LnJlZElBZGQobk9uZSk7CiAgICB9CgogICAgdmFyIGMgPSB0aGlzLnBvdyh6LCBxKTsKICAgIHZhciByID0gdGhpcy5wb3coYSwgcS5hZGRuKDEpLml1c2hybigxKSk7CiAgICB2YXIgdCA9IHRoaXMucG93KGEsIHEpOwogICAgdmFyIG0gPSBzOwogICAgd2hpbGUgKHQuY21wKG9uZSkgIT09IDApIHsKICAgICAgdmFyIHRtcCA9IHQ7CiAgICAgIGZvciAodmFyIGkgPSAwOyB0bXAuY21wKG9uZSkgIT09IDA7IGkrKykgewogICAgICAgIHRtcCA9IHRtcC5yZWRTcXIoKTsKICAgICAgfQogICAgICBhc3NlcnQoaSA8IG0pOwogICAgICB2YXIgYiA9IHRoaXMucG93KGMsIG5ldyBCTigxKS5pdXNobG4obSAtIGkgLSAxKSk7CgogICAgICByID0gci5yZWRNdWwoYik7CiAgICAgIGMgPSBiLnJlZFNxcigpOwogICAgICB0ID0gdC5yZWRNdWwoYyk7CiAgICAgIG0gPSBpOwogICAgfQoKICAgIHJldHVybiByOwogIH07CgogIFJlZC5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKGEpIHsKICAgIHZhciBpbnYgPSBhLl9pbnZtcCh0aGlzLm0pOwogICAgaWYgKGludi5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBpbnYubmVnYXRpdmUgPSAwOwogICAgICByZXR1cm4gdGhpcy5pbW9kKGludikucmVkTmVnKCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdGhpcy5pbW9kKGludik7CiAgICB9CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiBwb3cgKGEsIG51bSkgewogICAgaWYgKG51bS5pc1plcm8oKSkgcmV0dXJuIG5ldyBCTigxKTsKICAgIGlmIChudW0uY21wbigxKSA9PT0gMCkgcmV0dXJuIGEuY2xvbmUoKTsKCiAgICB2YXIgd2luZG93U2l6ZSA9IDQ7CiAgICB2YXIgd25kID0gbmV3IEFycmF5KDEgPDwgd2luZG93U2l6ZSk7CiAgICB3bmRbMF0gPSBuZXcgQk4oMSkudG9SZWQodGhpcyk7CiAgICB3bmRbMV0gPSBhOwogICAgZm9yICh2YXIgaSA9IDI7IGkgPCB3bmQubGVuZ3RoOyBpKyspIHsKICAgICAgd25kW2ldID0gdGhpcy5tdWwod25kW2kgLSAxXSwgYSk7CiAgICB9CgogICAgdmFyIHJlcyA9IHduZFswXTsKICAgIHZhciBjdXJyZW50ID0gMDsKICAgIHZhciBjdXJyZW50TGVuID0gMDsKICAgIHZhciBzdGFydCA9IG51bS5iaXRMZW5ndGgoKSAlIDI2OwogICAgaWYgKHN0YXJ0ID09PSAwKSB7CiAgICAgIHN0YXJ0ID0gMjY7CiAgICB9CgogICAgZm9yIChpID0gbnVtLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHZhciB3b3JkID0gbnVtLndvcmRzW2ldOwogICAgICBmb3IgKHZhciBqID0gc3RhcnQgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgIHZhciBiaXQgPSAod29yZCA+PiBqKSAmIDE7CiAgICAgICAgaWYgKHJlcyAhPT0gd25kWzBdKSB7CiAgICAgICAgICByZXMgPSB0aGlzLnNxcihyZXMpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGJpdCA9PT0gMCAmJiBjdXJyZW50ID09PSAwKSB7CiAgICAgICAgICBjdXJyZW50TGVuID0gMDsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgY3VycmVudCA8PD0gMTsKICAgICAgICBjdXJyZW50IHw9IGJpdDsKICAgICAgICBjdXJyZW50TGVuKys7CiAgICAgICAgaWYgKGN1cnJlbnRMZW4gIT09IHdpbmRvd1NpemUgJiYgKGkgIT09IDAgfHwgaiAhPT0gMCkpIGNvbnRpbnVlOwoKICAgICAgICByZXMgPSB0aGlzLm11bChyZXMsIHduZFtjdXJyZW50XSk7CiAgICAgICAgY3VycmVudExlbiA9IDA7CiAgICAgICAgY3VycmVudCA9IDA7CiAgICAgIH0KICAgICAgc3RhcnQgPSAyNjsKICAgIH0KCiAgICByZXR1cm4gcmVzOwogIH07CgogIFJlZC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgIHZhciByID0gbnVtLnVtb2QodGhpcy5tKTsKCiAgICByZXR1cm4gciA9PT0gbnVtID8gci5jbG9uZSgpIDogcjsKICB9OwoKICBSZWQucHJvdG90eXBlLmNvbnZlcnRGcm9tID0gZnVuY3Rpb24gY29udmVydEZyb20gKG51bSkgewogICAgdmFyIHJlcyA9IG51bS5jbG9uZSgpOwogICAgcmVzLnJlZCA9IG51bGw7CiAgICByZXR1cm4gcmVzOwogIH07CgogIC8vCiAgLy8gTW9udGdvbWVyeSBtZXRob2QgZW5naW5lCiAgLy8KCiAgQk4ubW9udCA9IGZ1bmN0aW9uIG1vbnQgKG51bSkgewogICAgcmV0dXJuIG5ldyBNb250KG51bSk7CiAgfTsKCiAgZnVuY3Rpb24gTW9udCAobSkgewogICAgUmVkLmNhbGwodGhpcywgbSk7CgogICAgdGhpcy5zaGlmdCA9IHRoaXMubS5iaXRMZW5ndGgoKTsKICAgIGlmICh0aGlzLnNoaWZ0ICUgMjYgIT09IDApIHsKICAgICAgdGhpcy5zaGlmdCArPSAyNiAtICh0aGlzLnNoaWZ0ICUgMjYpOwogICAgfQoKICAgIHRoaXMuciA9IG5ldyBCTigxKS5pdXNobG4odGhpcy5zaGlmdCk7CiAgICB0aGlzLnIyID0gdGhpcy5pbW9kKHRoaXMuci5zcXIoKSk7CiAgICB0aGlzLnJpbnYgPSB0aGlzLnIuX2ludm1wKHRoaXMubSk7CgogICAgdGhpcy5taW52ID0gdGhpcy5yaW52Lm11bCh0aGlzLnIpLmlzdWJuKDEpLmRpdih0aGlzLm0pOwogICAgdGhpcy5taW52ID0gdGhpcy5taW52LnVtb2QodGhpcy5yKTsKICAgIHRoaXMubWludiA9IHRoaXMuci5zdWIodGhpcy5taW52KTsKICB9CiAgaW5oZXJpdHMoTW9udCwgUmVkKTsKCiAgTW9udC5wcm90b3R5cGUuY29udmVydFRvID0gZnVuY3Rpb24gY29udmVydFRvIChudW0pIHsKICAgIHJldHVybiB0aGlzLmltb2QobnVtLnVzaGxuKHRoaXMuc2hpZnQpKTsKICB9OwoKICBNb250LnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgIHZhciByID0gdGhpcy5pbW9kKG51bS5tdWwodGhpcy5yaW52KSk7CiAgICByLnJlZCA9IG51bGw7CiAgICByZXR1cm4gcjsKICB9OwoKICBNb250LnByb3RvdHlwZS5pbXVsID0gZnVuY3Rpb24gaW11bCAoYSwgYikgewogICAgaWYgKGEuaXNaZXJvKCkgfHwgYi5pc1plcm8oKSkgewogICAgICBhLndvcmRzWzBdID0gMDsKICAgICAgYS5sZW5ndGggPSAxOwogICAgICByZXR1cm4gYTsKICAgIH0KCiAgICB2YXIgdCA9IGEuaW11bChiKTsKICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICB2YXIgdSA9IHQuaXN1YihjKS5pdXNocm4odGhpcy5zaGlmdCk7CiAgICB2YXIgcmVzID0gdTsKCiAgICBpZiAodS5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgIHJlcyA9IHUuaXN1Yih0aGlzLm0pOwogICAgfSBlbHNlIGlmICh1LmNtcG4oMCkgPCAwKSB7CiAgICAgIHJlcyA9IHUuaWFkZCh0aGlzLm0pOwogICAgfQoKICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogIH07CgogIE1vbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bCAoYSwgYikgewogICAgaWYgKGEuaXNaZXJvKCkgfHwgYi5pc1plcm8oKSkgcmV0dXJuIG5ldyBCTigwKS5fZm9yY2VSZWQodGhpcyk7CgogICAgdmFyIHQgPSBhLm11bChiKTsKICAgIHZhciBjID0gdC5tYXNrbih0aGlzLnNoaWZ0KS5tdWwodGhpcy5taW52KS5pbWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubSk7CiAgICB2YXIgdSA9IHQuaXN1YihjKS5pdXNocm4odGhpcy5zaGlmdCk7CiAgICB2YXIgcmVzID0gdTsKICAgIGlmICh1LmNtcCh0aGlzLm0pID49IDApIHsKICAgICAgcmVzID0gdS5pc3ViKHRoaXMubSk7CiAgICB9IGVsc2UgaWYgKHUuY21wbigwKSA8IDApIHsKICAgICAgcmVzID0gdS5pYWRkKHRoaXMubSk7CiAgICB9CgogICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgTW9udC5wcm90b3R5cGUuaW52bSA9IGZ1bmN0aW9uIGludm0gKGEpIHsKICAgIC8vIChBUileLTEgKiBSXjIgPSAoQV4tMSAqIFJeLTEpICogUl4yID0gQV4tMSAqIFIKICAgIHZhciByZXMgPSB0aGlzLmltb2QoYS5faW52bXAodGhpcy5tKS5tdWwodGhpcy5yMikpOwogICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgfTsKfSkodHlwZW9mIG1vZHVsZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbW9kdWxlLCB0aGlzKTsKCn0se31dLDU0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJuID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKTsKbW9kdWxlLmV4cG9ydHMgPSBjcnQ7CmZ1bmN0aW9uIGJsaW5kKHByaXYpIHsKICB2YXIgciA9IGdldHIocHJpdik7CiAgdmFyIGJsaW5kZXIgPSByLnRvUmVkKGJuLm1vbnQocHJpdi5tb2R1bHVzKSkKICAucmVkUG93KG5ldyBibihwcml2LnB1YmxpY0V4cG9uZW50KSkuZnJvbVJlZCgpOwogIHJldHVybiB7CiAgICBibGluZGVyOiBibGluZGVyLAogICAgdW5ibGluZGVyOnIuaW52bShwcml2Lm1vZHVsdXMpCiAgfTsKfQpmdW5jdGlvbiBjcnQobXNnLCBwcml2KSB7CiAgdmFyIGJsaW5kcyA9IGJsaW5kKHByaXYpOwogIHZhciBsZW4gPSBwcml2Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIHZhciBtb2QgPSBibi5tb250KHByaXYubW9kdWx1cyk7CiAgdmFyIGJsaW5kZWQgPSBuZXcgYm4obXNnKS5tdWwoYmxpbmRzLmJsaW5kZXIpLnVtb2QocHJpdi5tb2R1bHVzKTsKICB2YXIgYzEgPSBibGluZGVkLnRvUmVkKGJuLm1vbnQocHJpdi5wcmltZTEpKTsKICB2YXIgYzIgPSBibGluZGVkLnRvUmVkKGJuLm1vbnQocHJpdi5wcmltZTIpKTsKICB2YXIgcWludiA9IHByaXYuY29lZmZpY2llbnQ7CiAgdmFyIHAgPSBwcml2LnByaW1lMTsKICB2YXIgcSA9IHByaXYucHJpbWUyOwogIHZhciBtMSA9IGMxLnJlZFBvdyhwcml2LmV4cG9uZW50MSk7CiAgdmFyIG0yID0gYzIucmVkUG93KHByaXYuZXhwb25lbnQyKTsKICBtMSA9IG0xLmZyb21SZWQoKTsKICBtMiA9IG0yLmZyb21SZWQoKTsKICB2YXIgaCA9IG0xLmlzdWIobTIpLmltdWwocWludikudW1vZChwKTsKICBoLmltdWwocSk7CiAgbTIuaWFkZChoKTsKICByZXR1cm4gbmV3IEJ1ZmZlcihtMi5pbXVsKGJsaW5kcy51bmJsaW5kZXIpLnVtb2QocHJpdi5tb2R1bHVzKS50b0FycmF5KGZhbHNlLCBsZW4pKTsKfQpjcnQuZ2V0ciA9IGdldHI7CmZ1bmN0aW9uIGdldHIocHJpdikgewogIHZhciBsZW4gPSBwcml2Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIHZhciByID0gbmV3IGJuKHJhbmRvbUJ5dGVzKGxlbikpOwogIHdoaWxlIChyLmNtcChwcml2Lm1vZHVsdXMpID49ICAwIHx8ICFyLnVtb2QocHJpdi5wcmltZTEpIHx8ICFyLnVtb2QocHJpdi5wcmltZTIpKSB7CiAgICByID0gbmV3IGJuKHJhbmRvbUJ5dGVzKGxlbikpOwogIH0KICByZXR1cm4gcjsKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJuLmpzIjo1NDEsImJ1ZmZlciI6NTA0LCJyYW5kb21ieXRlcyI6Njk5fV0sNTQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGVsbGlwdGljID0gZXhwb3J0czsKCmVsbGlwdGljLnZlcnNpb24gPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uOwplbGxpcHRpYy51dGlscyA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvdXRpbHMnKTsKZWxsaXB0aWMucmFuZCA9IHJlcXVpcmUoJ2Jyb3JhbmQnKTsKZWxsaXB0aWMuaG1hY0RSQkcgPSByZXF1aXJlKCcuL2VsbGlwdGljL2htYWMtZHJiZycpOwplbGxpcHRpYy5jdXJ2ZSA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvY3VydmUnKTsKZWxsaXB0aWMuY3VydmVzID0gcmVxdWlyZSgnLi9lbGxpcHRpYy9jdXJ2ZXMnKTsKCi8vIFByb3RvY29scwplbGxpcHRpYy5lYyA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvZWMnKTsKZWxsaXB0aWMuZWRkc2EgPSByZXF1aXJlKCcuL2VsbGlwdGljL2VkZHNhJyk7Cgp9LHsiLi4vcGFja2FnZS5qc29uIjo1NjYsIi4vZWxsaXB0aWMvY3VydmUiOjU0NiwiLi9lbGxpcHRpYy9jdXJ2ZXMiOjU0OSwiLi9lbGxpcHRpYy9lYyI6NTUwLCIuL2VsbGlwdGljL2VkZHNhIjo1NTMsIi4vZWxsaXB0aWMvaG1hYy1kcmJnIjo1NTYsIi4vZWxsaXB0aWMvdXRpbHMiOjU1OCwiYnJvcmFuZCI6NTU5fV0sNTQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBnZXROQUYgPSB1dGlscy5nZXROQUY7CnZhciBnZXRKU0YgPSB1dGlscy5nZXRKU0Y7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBCYXNlQ3VydmUodHlwZSwgY29uZikgewogIHRoaXMudHlwZSA9IHR5cGU7CiAgdGhpcy5wID0gbmV3IEJOKGNvbmYucCwgMTYpOwoKICAvLyBVc2UgTW9udGdvbWVyeSwgd2hlbiB0aGVyZSBpcyBubyBmYXN0IHJlZHVjdGlvbiBmb3IgdGhlIHByaW1lCiAgdGhpcy5yZWQgPSBjb25mLnByaW1lID8gQk4ucmVkKGNvbmYucHJpbWUpIDogQk4ubW9udCh0aGlzLnApOwoKICAvLyBVc2VmdWwgZm9yIG1hbnkgY3VydmVzCiAgdGhpcy56ZXJvID0gbmV3IEJOKDApLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLm9uZSA9IG5ldyBCTigxKS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy50d28gPSBuZXcgQk4oMikudG9SZWQodGhpcy5yZWQpOwoKICAvLyBDdXJ2ZSBjb25maWd1cmF0aW9uLCBvcHRpb25hbAogIHRoaXMubiA9IGNvbmYubiAmJiBuZXcgQk4oY29uZi5uLCAxNik7CiAgdGhpcy5nID0gY29uZi5nICYmIHRoaXMucG9pbnRGcm9tSlNPTihjb25mLmcsIGNvbmYuZ1JlZCk7CgogIC8vIFRlbXBvcmFyeSBhcnJheXMKICB0aGlzLl93bmFmVDEgPSBuZXcgQXJyYXkoNCk7CiAgdGhpcy5fd25hZlQyID0gbmV3IEFycmF5KDQpOwogIHRoaXMuX3duYWZUMyA9IG5ldyBBcnJheSg0KTsKICB0aGlzLl93bmFmVDQgPSBuZXcgQXJyYXkoNCk7CgogIC8vIEdlbmVyYWxpemVkIEdyZWcgTWF4d2VsbCdzIHRyaWNrCiAgdmFyIGFkanVzdENvdW50ID0gdGhpcy5uICYmIHRoaXMucC5kaXYodGhpcy5uKTsKICBpZiAoIWFkanVzdENvdW50IHx8IGFkanVzdENvdW50LmNtcG4oMTAwKSA+IDApIHsKICAgIHRoaXMucmVkTiA9IG51bGw7CiAgfSBlbHNlIHsKICAgIHRoaXMuX21heHdlbGxUcmljayA9IHRydWU7CiAgICB0aGlzLnJlZE4gPSB0aGlzLm4udG9SZWQodGhpcy5yZWQpOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IEJhc2VDdXJ2ZTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUucG9pbnQgPSBmdW5jdGlvbiBwb2ludCgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOwp9OwoKQmFzZUN1cnZlLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7Cn07CgpCYXNlQ3VydmUucHJvdG90eXBlLl9maXhlZE5hZk11bCA9IGZ1bmN0aW9uIF9maXhlZE5hZk11bChwLCBrKSB7CiAgYXNzZXJ0KHAucHJlY29tcHV0ZWQpOwogIHZhciBkb3VibGVzID0gcC5fZ2V0RG91YmxlcygpOwoKICB2YXIgbmFmID0gZ2V0TkFGKGssIDEpOwogIHZhciBJID0gKDEgPDwgKGRvdWJsZXMuc3RlcCArIDEpKSAtIChkb3VibGVzLnN0ZXAgJSAyID09PSAwID8gMiA6IDEpOwogIEkgLz0gMzsKCiAgLy8gVHJhbnNsYXRlIGludG8gbW9yZSB3aW5kb3dlZCBmb3JtCiAgdmFyIHJlcHIgPSBbXTsKICBmb3IgKHZhciBqID0gMDsgaiA8IG5hZi5sZW5ndGg7IGogKz0gZG91Ymxlcy5zdGVwKSB7CiAgICB2YXIgbmFmVyA9IDA7CiAgICBmb3IgKHZhciBrID0gaiArIGRvdWJsZXMuc3RlcCAtIDE7IGsgPj0gajsgay0tKQogICAgICBuYWZXID0gKG5hZlcgPDwgMSkgKyBuYWZba107CiAgICByZXByLnB1c2gobmFmVyk7CiAgfQoKICB2YXIgYSA9IHRoaXMuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogIHZhciBiID0gdGhpcy5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgZm9yICh2YXIgaSA9IEk7IGkgPiAwOyBpLS0pIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVwci5sZW5ndGg7IGorKykgewogICAgICB2YXIgbmFmVyA9IHJlcHJbal07CiAgICAgIGlmIChuYWZXID09PSBpKQogICAgICAgIGIgPSBiLm1peGVkQWRkKGRvdWJsZXMucG9pbnRzW2pdKTsKICAgICAgZWxzZSBpZiAobmFmVyA9PT0gLWkpCiAgICAgICAgYiA9IGIubWl4ZWRBZGQoZG91Ymxlcy5wb2ludHNbal0ubmVnKCkpOwogICAgfQogICAgYSA9IGEuYWRkKGIpOwogIH0KICByZXR1cm4gYS50b1AoKTsKfTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUuX3duYWZNdWwgPSBmdW5jdGlvbiBfd25hZk11bChwLCBrKSB7CiAgdmFyIHcgPSA0OwoKICAvLyBQcmVjb21wdXRlIHdpbmRvdwogIHZhciBuYWZQb2ludHMgPSBwLl9nZXROQUZQb2ludHModyk7CiAgdyA9IG5hZlBvaW50cy53bmQ7CiAgdmFyIHduZCA9IG5hZlBvaW50cy5wb2ludHM7CgogIC8vIEdldCBOQUYgZm9ybQogIHZhciBuYWYgPSBnZXROQUYoaywgdyk7CgogIC8vIEFkZCBgdGhpc2AqKE4rMSkgZm9yIGV2ZXJ5IHctTkFGIGluZGV4CiAgdmFyIGFjYyA9IHRoaXMuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwogIGZvciAodmFyIGkgPSBuYWYubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIC8vIENvdW50IHplcm9lcwogICAgZm9yICh2YXIgayA9IDA7IGkgPj0gMCAmJiBuYWZbaV0gPT09IDA7IGktLSkKICAgICAgaysrOwogICAgaWYgKGkgPj0gMCkKICAgICAgaysrOwogICAgYWNjID0gYWNjLmRibHAoayk7CgogICAgaWYgKGkgPCAwKQogICAgICBicmVhazsKICAgIHZhciB6ID0gbmFmW2ldOwogICAgYXNzZXJ0KHogIT09IDApOwogICAgaWYgKHAudHlwZSA9PT0gJ2FmZmluZScpIHsKICAgICAgLy8gSiArLSBQCiAgICAgIGlmICh6ID4gMCkKICAgICAgICBhY2MgPSBhY2MubWl4ZWRBZGQod25kWyh6IC0gMSkgPj4gMV0pOwogICAgICBlbHNlCiAgICAgICAgYWNjID0gYWNjLm1peGVkQWRkKHduZFsoLXogLSAxKSA+PiAxXS5uZWcoKSk7CiAgICB9IGVsc2UgewogICAgICAvLyBKICstIEoKICAgICAgaWYgKHogPiAwKQogICAgICAgIGFjYyA9IGFjYy5hZGQod25kWyh6IC0gMSkgPj4gMV0pOwogICAgICBlbHNlCiAgICAgICAgYWNjID0gYWNjLmFkZCh3bmRbKC16IC0gMSkgPj4gMV0ubmVnKCkpOwogICAgfQogIH0KICByZXR1cm4gcC50eXBlID09PSAnYWZmaW5lJyA/IGFjYy50b1AoKSA6IGFjYzsKfTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUuX3duYWZNdWxBZGQgPSBmdW5jdGlvbiBfd25hZk11bEFkZChkZWZXLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29lZmZzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgamFjb2JpYW5SZXN1bHQpIHsKICB2YXIgd25kV2lkdGggPSB0aGlzLl93bmFmVDE7CiAgdmFyIHduZCA9IHRoaXMuX3duYWZUMjsKICB2YXIgbmFmID0gdGhpcy5fd25hZlQzOwoKICAvLyBGaWxsIGFsbCBhcnJheXMKICB2YXIgbWF4ID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICB2YXIgcCA9IHBvaW50c1tpXTsKICAgIHZhciBuYWZQb2ludHMgPSBwLl9nZXROQUZQb2ludHMoZGVmVyk7CiAgICB3bmRXaWR0aFtpXSA9IG5hZlBvaW50cy53bmQ7CiAgICB3bmRbaV0gPSBuYWZQb2ludHMucG9pbnRzOwogIH0KCiAgLy8gQ29tYiBzbWFsbCB3aW5kb3cgTkFGcwogIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDE7IGkgLT0gMikgewogICAgdmFyIGEgPSBpIC0gMTsKICAgIHZhciBiID0gaTsKICAgIGlmICh3bmRXaWR0aFthXSAhPT0gMSB8fCB3bmRXaWR0aFtiXSAhPT0gMSkgewogICAgICBuYWZbYV0gPSBnZXROQUYoY29lZmZzW2FdLCB3bmRXaWR0aFthXSk7CiAgICAgIG5hZltiXSA9IGdldE5BRihjb2VmZnNbYl0sIHduZFdpZHRoW2JdKTsKICAgICAgbWF4ID0gTWF0aC5tYXgobmFmW2FdLmxlbmd0aCwgbWF4KTsKICAgICAgbWF4ID0gTWF0aC5tYXgobmFmW2JdLmxlbmd0aCwgbWF4KTsKICAgICAgY29udGludWU7CiAgICB9CgogICAgdmFyIGNvbWIgPSBbCiAgICAgIHBvaW50c1thXSwgLyogMSAqLwogICAgICBudWxsLCAvKiAzICovCiAgICAgIG51bGwsIC8qIDUgKi8KICAgICAgcG9pbnRzW2JdIC8qIDcgKi8KICAgIF07CgogICAgLy8gVHJ5IHRvIGF2b2lkIFByb2plY3RpdmUgcG9pbnRzLCBpZiBwb3NzaWJsZQogICAgaWYgKHBvaW50c1thXS55LmNtcChwb2ludHNbYl0ueSkgPT09IDApIHsKICAgICAgY29tYlsxXSA9IHBvaW50c1thXS5hZGQocG9pbnRzW2JdKTsKICAgICAgY29tYlsyXSA9IHBvaW50c1thXS50b0ooKS5taXhlZEFkZChwb2ludHNbYl0ubmVnKCkpOwogICAgfSBlbHNlIGlmIChwb2ludHNbYV0ueS5jbXAocG9pbnRzW2JdLnkucmVkTmVnKCkpID09PSAwKSB7CiAgICAgIGNvbWJbMV0gPSBwb2ludHNbYV0udG9KKCkubWl4ZWRBZGQocG9pbnRzW2JdKTsKICAgICAgY29tYlsyXSA9IHBvaW50c1thXS5hZGQocG9pbnRzW2JdLm5lZygpKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbWJbMV0gPSBwb2ludHNbYV0udG9KKCkubWl4ZWRBZGQocG9pbnRzW2JdKTsKICAgICAgY29tYlsyXSA9IHBvaW50c1thXS50b0ooKS5taXhlZEFkZChwb2ludHNbYl0ubmVnKCkpOwogICAgfQoKICAgIHZhciBpbmRleCA9IFsKICAgICAgLTMsIC8qIC0xIC0xICovCiAgICAgIC0xLCAvKiAtMSAwICovCiAgICAgIC01LCAvKiAtMSAxICovCiAgICAgIC03LCAvKiAwIC0xICovCiAgICAgIDAsIC8qIDAgMCAqLwogICAgICA3LCAvKiAwIDEgKi8KICAgICAgNSwgLyogMSAtMSAqLwogICAgICAxLCAvKiAxIDAgKi8KICAgICAgMyAgLyogMSAxICovCiAgICBdOwoKICAgIHZhciBqc2YgPSBnZXRKU0YoY29lZmZzW2FdLCBjb2VmZnNbYl0pOwogICAgbWF4ID0gTWF0aC5tYXgoanNmWzBdLmxlbmd0aCwgbWF4KTsKICAgIG5hZlthXSA9IG5ldyBBcnJheShtYXgpOwogICAgbmFmW2JdID0gbmV3IEFycmF5KG1heCk7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heDsgaisrKSB7CiAgICAgIHZhciBqYSA9IGpzZlswXVtqXSB8IDA7CiAgICAgIHZhciBqYiA9IGpzZlsxXVtqXSB8IDA7CgogICAgICBuYWZbYV1bal0gPSBpbmRleFsoamEgKyAxKSAqIDMgKyAoamIgKyAxKV07CiAgICAgIG5hZltiXVtqXSA9IDA7CiAgICAgIHduZFthXSA9IGNvbWI7CiAgICB9CiAgfQoKICB2YXIgYWNjID0gdGhpcy5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgdmFyIHRtcCA9IHRoaXMuX3duYWZUNDsKICBmb3IgKHZhciBpID0gbWF4OyBpID49IDA7IGktLSkgewogICAgdmFyIGsgPSAwOwoKICAgIHdoaWxlIChpID49IDApIHsKICAgICAgdmFyIHplcm8gPSB0cnVlOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjsgaisrKSB7CiAgICAgICAgdG1wW2pdID0gbmFmW2pdW2ldIHwgMDsKICAgICAgICBpZiAodG1wW2pdICE9PSAwKQogICAgICAgICAgemVybyA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmICghemVybykKICAgICAgICBicmVhazsKICAgICAgaysrOwogICAgICBpLS07CiAgICB9CiAgICBpZiAoaSA+PSAwKQogICAgICBrKys7CiAgICBhY2MgPSBhY2MuZGJscChrKTsKICAgIGlmIChpIDwgMCkKICAgICAgYnJlYWs7CgogICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW47IGorKykgewogICAgICB2YXIgeiA9IHRtcFtqXTsKICAgICAgdmFyIHA7CiAgICAgIGlmICh6ID09PSAwKQogICAgICAgIGNvbnRpbnVlOwogICAgICBlbHNlIGlmICh6ID4gMCkKICAgICAgICBwID0gd25kW2pdWyh6IC0gMSkgPj4gMV07CiAgICAgIGVsc2UgaWYgKHogPCAwKQogICAgICAgIHAgPSB3bmRbal1bKC16IC0gMSkgPj4gMV0ubmVnKCk7CgogICAgICBpZiAocC50eXBlID09PSAnYWZmaW5lJykKICAgICAgICBhY2MgPSBhY2MubWl4ZWRBZGQocCk7CiAgICAgIGVsc2UKICAgICAgICBhY2MgPSBhY2MuYWRkKHApOwogICAgfQogIH0KICAvLyBaZXJvaWZ5IHJlZmVyZW5jZXMKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgd25kW2ldID0gbnVsbDsKCiAgaWYgKGphY29iaWFuUmVzdWx0KQogICAgcmV0dXJuIGFjYzsKICBlbHNlCiAgICByZXR1cm4gYWNjLnRvUCgpOwp9OwoKZnVuY3Rpb24gQmFzZVBvaW50KGN1cnZlLCB0eXBlKSB7CiAgdGhpcy5jdXJ2ZSA9IGN1cnZlOwogIHRoaXMudHlwZSA9IHR5cGU7CiAgdGhpcy5wcmVjb21wdXRlZCA9IG51bGw7Cn0KQmFzZUN1cnZlLkJhc2VQb2ludCA9IEJhc2VQb2ludDsKCkJhc2VQb2ludC5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcSgvKm90aGVyKi8pIHsKICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogIHJldHVybiB0aGlzLmN1cnZlLnZhbGlkYXRlKHRoaXMpOwp9OwoKQmFzZUN1cnZlLnByb3RvdHlwZS5kZWNvZGVQb2ludCA9IGZ1bmN0aW9uIGRlY29kZVBvaW50KGJ5dGVzLCBlbmMpIHsKICBieXRlcyA9IHV0aWxzLnRvQXJyYXkoYnl0ZXMsIGVuYyk7CgogIHZhciBsZW4gPSB0aGlzLnAuYnl0ZUxlbmd0aCgpOwoKICAvLyB1bmNvbXByZXNzZWQsIGh5YnJpZC1vZGQsIGh5YnJpZC1ldmVuCiAgaWYgKChieXRlc1swXSA9PT0gMHgwNCB8fCBieXRlc1swXSA9PT0gMHgwNiB8fCBieXRlc1swXSA9PT0gMHgwNykgJiYKICAgICAgYnl0ZXMubGVuZ3RoIC0gMSA9PT0gMiAqIGxlbikgewogICAgaWYgKGJ5dGVzWzBdID09PSAweDA2KQogICAgICBhc3NlcnQoYnl0ZXNbYnl0ZXMubGVuZ3RoIC0gMV0gJSAyID09PSAwKTsKICAgIGVsc2UgaWYgKGJ5dGVzWzBdID09PSAweDA3KQogICAgICBhc3NlcnQoYnl0ZXNbYnl0ZXMubGVuZ3RoIC0gMV0gJSAyID09PSAxKTsKCiAgICB2YXIgcmVzID0gIHRoaXMucG9pbnQoYnl0ZXMuc2xpY2UoMSwgMSArIGxlbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXMuc2xpY2UoMSArIGxlbiwgMSArIDIgKiBsZW4pKTsKCiAgICByZXR1cm4gcmVzOwogIH0gZWxzZSBpZiAoKGJ5dGVzWzBdID09PSAweDAyIHx8IGJ5dGVzWzBdID09PSAweDAzKSAmJgogICAgICAgICAgICAgIGJ5dGVzLmxlbmd0aCAtIDEgPT09IGxlbikgewogICAgcmV0dXJuIHRoaXMucG9pbnRGcm9tWChieXRlcy5zbGljZSgxLCAxICsgbGVuKSwgYnl0ZXNbMF0gPT09IDB4MDMpOwogIH0KICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gcG9pbnQgZm9ybWF0Jyk7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLmVuY29kZUNvbXByZXNzZWQgPSBmdW5jdGlvbiBlbmNvZGVDb21wcmVzc2VkKGVuYykgewogIHJldHVybiB0aGlzLmVuY29kZShlbmMsIHRydWUpOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5fZW5jb2RlID0gZnVuY3Rpb24gX2VuY29kZShjb21wYWN0KSB7CiAgdmFyIGxlbiA9IHRoaXMuY3VydmUucC5ieXRlTGVuZ3RoKCk7CiAgdmFyIHggPSB0aGlzLmdldFgoKS50b0FycmF5KCdiZScsIGxlbik7CgogIGlmIChjb21wYWN0KQogICAgcmV0dXJuIFsgdGhpcy5nZXRZKCkuaXNFdmVuKCkgPyAweDAyIDogMHgwMyBdLmNvbmNhdCh4KTsKCiAgcmV0dXJuIFsgMHgwNCBdLmNvbmNhdCh4LCB0aGlzLmdldFkoKS50b0FycmF5KCdiZScsIGxlbikpIDsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGVuYywgY29tcGFjdCkgewogIHJldHVybiB1dGlscy5lbmNvZGUodGhpcy5fZW5jb2RlKGNvbXBhY3QpLCBlbmMpOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5wcmVjb21wdXRlID0gZnVuY3Rpb24gcHJlY29tcHV0ZShwb3dlcikgewogIGlmICh0aGlzLnByZWNvbXB1dGVkKQogICAgcmV0dXJuIHRoaXM7CgogIHZhciBwcmVjb21wdXRlZCA9IHsKICAgIGRvdWJsZXM6IG51bGwsCiAgICBuYWY6IG51bGwsCiAgICBiZXRhOiBudWxsCiAgfTsKICBwcmVjb21wdXRlZC5uYWYgPSB0aGlzLl9nZXROQUZQb2ludHMoOCk7CiAgcHJlY29tcHV0ZWQuZG91YmxlcyA9IHRoaXMuX2dldERvdWJsZXMoNCwgcG93ZXIpOwogIHByZWNvbXB1dGVkLmJldGEgPSB0aGlzLl9nZXRCZXRhKCk7CiAgdGhpcy5wcmVjb21wdXRlZCA9IHByZWNvbXB1dGVkOwoKICByZXR1cm4gdGhpczsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuX2hhc0RvdWJsZXMgPSBmdW5jdGlvbiBfaGFzRG91YmxlcyhrKSB7CiAgaWYgKCF0aGlzLnByZWNvbXB1dGVkKQogICAgcmV0dXJuIGZhbHNlOwoKICB2YXIgZG91YmxlcyA9IHRoaXMucHJlY29tcHV0ZWQuZG91YmxlczsKICBpZiAoIWRvdWJsZXMpCiAgICByZXR1cm4gZmFsc2U7CgogIHJldHVybiBkb3VibGVzLnBvaW50cy5sZW5ndGggPj0gTWF0aC5jZWlsKChrLmJpdExlbmd0aCgpICsgMSkgLyBkb3VibGVzLnN0ZXApOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5fZ2V0RG91YmxlcyA9IGZ1bmN0aW9uIF9nZXREb3VibGVzKHN0ZXAsIHBvd2VyKSB7CiAgaWYgKHRoaXMucHJlY29tcHV0ZWQgJiYgdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzKQogICAgcmV0dXJuIHRoaXMucHJlY29tcHV0ZWQuZG91YmxlczsKCiAgdmFyIGRvdWJsZXMgPSBbIHRoaXMgXTsKICB2YXIgYWNjID0gdGhpczsKICBmb3IgKHZhciBpID0gMDsgaSA8IHBvd2VyOyBpICs9IHN0ZXApIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RlcDsgaisrKQogICAgICBhY2MgPSBhY2MuZGJsKCk7CiAgICBkb3VibGVzLnB1c2goYWNjKTsKICB9CiAgcmV0dXJuIHsKICAgIHN0ZXA6IHN0ZXAsCiAgICBwb2ludHM6IGRvdWJsZXMKICB9Owp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5fZ2V0TkFGUG9pbnRzID0gZnVuY3Rpb24gX2dldE5BRlBvaW50cyh3bmQpIHsKICBpZiAodGhpcy5wcmVjb21wdXRlZCAmJiB0aGlzLnByZWNvbXB1dGVkLm5hZikKICAgIHJldHVybiB0aGlzLnByZWNvbXB1dGVkLm5hZjsKCiAgdmFyIHJlcyA9IFsgdGhpcyBdOwogIHZhciBtYXggPSAoMSA8PCB3bmQpIC0gMTsKICB2YXIgZGJsID0gbWF4ID09PSAxID8gbnVsbCA6IHRoaXMuZGJsKCk7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBtYXg7IGkrKykKICAgIHJlc1tpXSA9IHJlc1tpIC0gMV0uYWRkKGRibCk7CiAgcmV0dXJuIHsKICAgIHduZDogd25kLAogICAgcG9pbnRzOiByZXMKICB9Owp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5fZ2V0QmV0YSA9IGZ1bmN0aW9uIF9nZXRCZXRhKCkgewogIHJldHVybiBudWxsOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5kYmxwID0gZnVuY3Rpb24gZGJscChrKSB7CiAgdmFyIHIgPSB0aGlzOwogIGZvciAodmFyIGkgPSAwOyBpIDwgazsgaSsrKQogICAgciA9IHIuZGJsKCk7CiAgcmV0dXJuIHI7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjU0MywiYm4uanMiOjU0MX1dLDU0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBjdXJ2ZSA9IHJlcXVpcmUoJy4uL2N1cnZlJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBCYXNlID0gY3VydmUuYmFzZTsKCnZhciBhc3NlcnQgPSBlbGxpcHRpYy51dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBFZHdhcmRzQ3VydmUoY29uZikgewogIC8vIE5PVEU6IEltcG9ydGFudCBhcyB3ZSBhcmUgY3JlYXRpbmcgcG9pbnQgaW4gQmFzZS5jYWxsKCkKICB0aGlzLnR3aXN0ZWQgPSAoY29uZi5hIHwgMCkgIT09IDE7CiAgdGhpcy5tT25lQSA9IHRoaXMudHdpc3RlZCAmJiAoY29uZi5hIHwgMCkgPT09IC0xOwogIHRoaXMuZXh0ZW5kZWQgPSB0aGlzLm1PbmVBOwoKICBCYXNlLmNhbGwodGhpcywgJ2Vkd2FyZHMnLCBjb25mKTsKCiAgdGhpcy5hID0gbmV3IEJOKGNvbmYuYSwgMTYpLnVtb2QodGhpcy5yZWQubSk7CiAgdGhpcy5hID0gdGhpcy5hLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmMgPSBuZXcgQk4oY29uZi5jLCAxNikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuYzIgPSB0aGlzLmMucmVkU3FyKCk7CiAgdGhpcy5kID0gbmV3IEJOKGNvbmYuZCwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmRkID0gdGhpcy5kLnJlZEFkZCh0aGlzLmQpOwoKICBhc3NlcnQoIXRoaXMudHdpc3RlZCB8fCB0aGlzLmMuZnJvbVJlZCgpLmNtcG4oMSkgPT09IDApOwogIHRoaXMub25lQyA9IChjb25mLmMgfCAwKSA9PT0gMTsKfQppbmhlcml0cyhFZHdhcmRzQ3VydmUsIEJhc2UpOwptb2R1bGUuZXhwb3J0cyA9IEVkd2FyZHNDdXJ2ZTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUuX211bEEgPSBmdW5jdGlvbiBfbXVsQShudW0pIHsKICBpZiAodGhpcy5tT25lQSkKICAgIHJldHVybiBudW0ucmVkTmVnKCk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuYS5yZWRNdWwobnVtKTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUuX211bEMgPSBmdW5jdGlvbiBfbXVsQyhudW0pIHsKICBpZiAodGhpcy5vbmVDKQogICAgcmV0dXJuIG51bTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5jLnJlZE11bChudW0pOwp9OwoKLy8gSnVzdCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIFNob3J0IGN1cnZlCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUuanBvaW50ID0gZnVuY3Rpb24ganBvaW50KHgsIHksIHosIHQpIHsKICByZXR1cm4gdGhpcy5wb2ludCh4LCB5LCB6LCB0KTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWCA9IGZ1bmN0aW9uIHBvaW50RnJvbVgoeCwgb2RkKSB7CiAgeCA9IG5ldyBCTih4LCAxNik7CiAgaWYgKCF4LnJlZCkKICAgIHggPSB4LnRvUmVkKHRoaXMucmVkKTsKCiAgdmFyIHgyID0geC5yZWRTcXIoKTsKICB2YXIgcmhzID0gdGhpcy5jMi5yZWRTdWIodGhpcy5hLnJlZE11bCh4MikpOwogIHZhciBsaHMgPSB0aGlzLm9uZS5yZWRTdWIodGhpcy5jMi5yZWRNdWwodGhpcy5kKS5yZWRNdWwoeDIpKTsKCiAgdmFyIHkyID0gcmhzLnJlZE11bChsaHMucmVkSW52bSgpKTsKICB2YXIgeSA9IHkyLnJlZFNxcnQoKTsKICBpZiAoeS5yZWRTcXIoKS5yZWRTdWIoeTIpLmNtcCh0aGlzLnplcm8pICE9PSAwKQogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBvaW50Jyk7CgogIHZhciBpc09kZCA9IHkuZnJvbVJlZCgpLmlzT2RkKCk7CiAgaWYgKG9kZCAmJiAhaXNPZGQgfHwgIW9kZCAmJiBpc09kZCkKICAgIHkgPSB5LnJlZE5lZygpOwoKICByZXR1cm4gdGhpcy5wb2ludCh4LCB5KTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWSA9IGZ1bmN0aW9uIHBvaW50RnJvbVkoeSwgb2RkKSB7CiAgeSA9IG5ldyBCTih5LCAxNik7CiAgaWYgKCF5LnJlZCkKICAgIHkgPSB5LnRvUmVkKHRoaXMucmVkKTsKCiAgLy8geF4yID0gKHleMiAtIDEpIC8gKGQgeV4yICsgMSkKICB2YXIgeTIgPSB5LnJlZFNxcigpOwogIHZhciBsaHMgPSB5Mi5yZWRTdWIodGhpcy5vbmUpOwogIHZhciByaHMgPSB5Mi5yZWRNdWwodGhpcy5kKS5yZWRBZGQodGhpcy5vbmUpOwogIHZhciB4MiA9IGxocy5yZWRNdWwocmhzLnJlZEludm0oKSk7CgogIGlmICh4Mi5jbXAodGhpcy56ZXJvKSA9PT0gMCkgewogICAgaWYgKG9kZCkKICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBvaW50Jyk7CiAgICBlbHNlCiAgICAgIHJldHVybiB0aGlzLnBvaW50KHRoaXMuemVybywgeSk7CiAgfQoKICB2YXIgeCA9IHgyLnJlZFNxcnQoKTsKICBpZiAoeC5yZWRTcXIoKS5yZWRTdWIoeDIpLmNtcCh0aGlzLnplcm8pICE9PSAwKQogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBvaW50Jyk7CgogIGlmICh4LmlzT2RkKCkgIT09IG9kZCkKICAgIHggPSB4LnJlZE5lZygpOwoKICByZXR1cm4gdGhpcy5wb2ludCh4LCB5KTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShwb2ludCkgewogIGlmIChwb2ludC5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdHJ1ZTsKCiAgLy8gQ3VydmU6IEEgKiBYXjIgKyBZXjIgPSBDXjIgKiAoMSArIEQgKiBYXjIgKiBZXjIpCiAgcG9pbnQubm9ybWFsaXplKCk7CgogIHZhciB4MiA9IHBvaW50LngucmVkU3FyKCk7CiAgdmFyIHkyID0gcG9pbnQueS5yZWRTcXIoKTsKICB2YXIgbGhzID0geDIucmVkTXVsKHRoaXMuYSkucmVkQWRkKHkyKTsKICB2YXIgcmhzID0gdGhpcy5jMi5yZWRNdWwodGhpcy5vbmUucmVkQWRkKHRoaXMuZC5yZWRNdWwoeDIpLnJlZE11bCh5MikpKTsKCiAgcmV0dXJuIGxocy5jbXAocmhzKSA9PT0gMDsKfTsKCmZ1bmN0aW9uIFBvaW50KGN1cnZlLCB4LCB5LCB6LCB0KSB7CiAgQmFzZS5CYXNlUG9pbnQuY2FsbCh0aGlzLCBjdXJ2ZSwgJ3Byb2plY3RpdmUnKTsKICBpZiAoeCA9PT0gbnVsbCAmJiB5ID09PSBudWxsICYmIHogPT09IG51bGwpIHsKICAgIHRoaXMueCA9IHRoaXMuY3VydmUuemVybzsKICAgIHRoaXMueSA9IHRoaXMuY3VydmUub25lOwogICAgdGhpcy56ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnQgPSB0aGlzLmN1cnZlLnplcm87CiAgICB0aGlzLnpPbmUgPSB0cnVlOwogIH0gZWxzZSB7CiAgICB0aGlzLnggPSBuZXcgQk4oeCwgMTYpOwogICAgdGhpcy55ID0gbmV3IEJOKHksIDE2KTsKICAgIHRoaXMueiA9IHogPyBuZXcgQk4oeiwgMTYpIDogdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnQgPSB0ICYmIG5ldyBCTih0LCAxNik7CiAgICBpZiAoIXRoaXMueC5yZWQpCiAgICAgIHRoaXMueCA9IHRoaXMueC50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICBpZiAoIXRoaXMueS5yZWQpCiAgICAgIHRoaXMueSA9IHRoaXMueS50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICBpZiAoIXRoaXMuei5yZWQpCiAgICAgIHRoaXMueiA9IHRoaXMuei50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICBpZiAodGhpcy50ICYmICF0aGlzLnQucmVkKQogICAgICB0aGlzLnQgPSB0aGlzLnQudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgdGhpcy56T25lID0gdGhpcy56ID09PSB0aGlzLmN1cnZlLm9uZTsKCiAgICAvLyBVc2UgZXh0ZW5kZWQgY29vcmRpbmF0ZXMKICAgIGlmICh0aGlzLmN1cnZlLmV4dGVuZGVkICYmICF0aGlzLnQpIHsKICAgICAgdGhpcy50ID0gdGhpcy54LnJlZE11bCh0aGlzLnkpOwogICAgICBpZiAoIXRoaXMuek9uZSkKICAgICAgICB0aGlzLnQgPSB0aGlzLnQucmVkTXVsKHRoaXMuei5yZWRJbnZtKCkpOwogICAgfQogIH0KfQppbmhlcml0cyhQb2ludCwgQmFzZS5CYXNlUG9pbnQpOwoKRWR3YXJkc0N1cnZlLnByb3RvdHlwZS5wb2ludEZyb21KU09OID0gZnVuY3Rpb24gcG9pbnRGcm9tSlNPTihvYmopIHsKICByZXR1cm4gUG9pbnQuZnJvbUpTT04odGhpcywgb2JqKTsKfTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUucG9pbnQgPSBmdW5jdGlvbiBwb2ludCh4LCB5LCB6LCB0KSB7CiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLCB4LCB5LCB6LCB0KTsKfTsKClBvaW50LmZyb21KU09OID0gZnVuY3Rpb24gZnJvbUpTT04oY3VydmUsIG9iaikgewogIHJldHVybiBuZXcgUG9pbnQoY3VydmUsIG9ialswXSwgb2JqWzFdLCBvYmpbMl0pOwp9OwoKUG9pbnQucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiAnPEVDIFBvaW50IEluZmluaXR5Pic7CiAgcmV0dXJuICc8RUMgUG9pbnQgeDogJyArIHRoaXMueC5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgJyB5OiAnICsgdGhpcy55LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKwogICAgICAnIHo6ICcgKyB0aGlzLnouZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArICc+JzsKfTsKClBvaW50LnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICAvLyBYWFggVGhpcyBjb2RlIGFzc3VtZXMgdGhhdCB6ZXJvIGlzIGFsd2F5cyB6ZXJvIGluIHJlZAogIHJldHVybiB0aGlzLnguY21wbigwKSA9PT0gMCAmJgogICAgICAgICB0aGlzLnkuY21wKHRoaXMueikgPT09IDA7Cn07CgpQb2ludC5wcm90b3R5cGUuX2V4dERibCA9IGZ1bmN0aW9uIF9leHREYmwoKSB7CiAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtZXh0ZW5kZWQtMS5odG1sCiAgLy8gICAgICNkb3VibGluZy1kYmwtMjAwOC1od2NkCiAgLy8gNE0gKyA0UwoKICAvLyBBID0gWDFeMgogIHZhciBhID0gdGhpcy54LnJlZFNxcigpOwogIC8vIEIgPSBZMV4yCiAgdmFyIGIgPSB0aGlzLnkucmVkU3FyKCk7CiAgLy8gQyA9IDIgKiBaMV4yCiAgdmFyIGMgPSB0aGlzLnoucmVkU3FyKCk7CiAgYyA9IGMucmVkSUFkZChjKTsKICAvLyBEID0gYSAqIEEKICB2YXIgZCA9IHRoaXMuY3VydmUuX211bEEoYSk7CiAgLy8gRSA9IChYMSArIFkxKV4yIC0gQSAtIEIKICB2YXIgZSA9IHRoaXMueC5yZWRBZGQodGhpcy55KS5yZWRTcXIoKS5yZWRJU3ViKGEpLnJlZElTdWIoYik7CiAgLy8gRyA9IEQgKyBCCiAgdmFyIGcgPSBkLnJlZEFkZChiKTsKICAvLyBGID0gRyAtIEMKICB2YXIgZiA9IGcucmVkU3ViKGMpOwogIC8vIEggPSBEIC0gQgogIHZhciBoID0gZC5yZWRTdWIoYik7CiAgLy8gWDMgPSBFICogRgogIHZhciBueCA9IGUucmVkTXVsKGYpOwogIC8vIFkzID0gRyAqIEgKICB2YXIgbnkgPSBnLnJlZE11bChoKTsKICAvLyBUMyA9IEUgKiBICiAgdmFyIG50ID0gZS5yZWRNdWwoaCk7CiAgLy8gWjMgPSBGICogRwogIHZhciBueiA9IGYucmVkTXVsKGcpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSwgbnosIG50KTsKfTsKClBvaW50LnByb3RvdHlwZS5fcHJvakRibCA9IGZ1bmN0aW9uIF9wcm9qRGJsKCkgewogIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by10d2lzdGVkLXByb2plY3RpdmUuaHRtbAogIC8vICAgICAjZG91YmxpbmctZGJsLTIwMDgtYmJqbHAKICAvLyAgICAgI2RvdWJsaW5nLWRibC0yMDA3LWJsCiAgLy8gYW5kIG90aGVycwogIC8vIEdlbmVyYWxseSAzTSArIDRTIG9yIDJNICsgNFMKCiAgLy8gQiA9IChYMSArIFkxKV4yCiAgdmFyIGIgPSB0aGlzLngucmVkQWRkKHRoaXMueSkucmVkU3FyKCk7CiAgLy8gQyA9IFgxXjIKICB2YXIgYyA9IHRoaXMueC5yZWRTcXIoKTsKICAvLyBEID0gWTFeMgogIHZhciBkID0gdGhpcy55LnJlZFNxcigpOwoKICB2YXIgbng7CiAgdmFyIG55OwogIHZhciBuejsKICBpZiAodGhpcy5jdXJ2ZS50d2lzdGVkKSB7CiAgICAvLyBFID0gYSAqIEMKICAgIHZhciBlID0gdGhpcy5jdXJ2ZS5fbXVsQShjKTsKICAgIC8vIEYgPSBFICsgRAogICAgdmFyIGYgPSBlLnJlZEFkZChkKTsKICAgIGlmICh0aGlzLnpPbmUpIHsKICAgICAgLy8gWDMgPSAoQiAtIEMgLSBEKSAqIChGIC0gMikKICAgICAgbnggPSBiLnJlZFN1YihjKS5yZWRTdWIoZCkucmVkTXVsKGYucmVkU3ViKHRoaXMuY3VydmUudHdvKSk7CiAgICAgIC8vIFkzID0gRiAqIChFIC0gRCkKICAgICAgbnkgPSBmLnJlZE11bChlLnJlZFN1YihkKSk7CiAgICAgIC8vIFozID0gRl4yIC0gMiAqIEYKICAgICAgbnogPSBmLnJlZFNxcigpLnJlZFN1YihmKS5yZWRTdWIoZik7CiAgICB9IGVsc2UgewogICAgICAvLyBIID0gWjFeMgogICAgICB2YXIgaCA9IHRoaXMuei5yZWRTcXIoKTsKICAgICAgLy8gSiA9IEYgLSAyICogSAogICAgICB2YXIgaiA9IGYucmVkU3ViKGgpLnJlZElTdWIoaCk7CiAgICAgIC8vIFgzID0gKEItQy1EKSpKCiAgICAgIG54ID0gYi5yZWRTdWIoYykucmVkSVN1YihkKS5yZWRNdWwoaik7CiAgICAgIC8vIFkzID0gRiAqIChFIC0gRCkKICAgICAgbnkgPSBmLnJlZE11bChlLnJlZFN1YihkKSk7CiAgICAgIC8vIFozID0gRiAqIEoKICAgICAgbnogPSBmLnJlZE11bChqKTsKICAgIH0KICB9IGVsc2UgewogICAgLy8gRSA9IEMgKyBECiAgICB2YXIgZSA9IGMucmVkQWRkKGQpOwogICAgLy8gSCA9IChjICogWjEpXjIKICAgIHZhciBoID0gdGhpcy5jdXJ2ZS5fbXVsQyh0aGlzLmMucmVkTXVsKHRoaXMueikpLnJlZFNxcigpOwogICAgLy8gSiA9IEUgLSAyICogSAogICAgdmFyIGogPSBlLnJlZFN1YihoKS5yZWRTdWIoaCk7CiAgICAvLyBYMyA9IGMgKiAoQiAtIEUpICogSgogICAgbnggPSB0aGlzLmN1cnZlLl9tdWxDKGIucmVkSVN1YihlKSkucmVkTXVsKGopOwogICAgLy8gWTMgPSBjICogRSAqIChDIC0gRCkKICAgIG55ID0gdGhpcy5jdXJ2ZS5fbXVsQyhlKS5yZWRNdWwoYy5yZWRJU3ViKGQpKTsKICAgIC8vIFozID0gRSAqIEoKICAgIG56ID0gZS5yZWRNdWwoaik7CiAgfQogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSwgbnopOwp9OwoKUG9pbnQucHJvdG90eXBlLmRibCA9IGZ1bmN0aW9uIGRibCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gRG91YmxlIGluIGV4dGVuZGVkIGNvb3JkaW5hdGVzCiAgaWYgKHRoaXMuY3VydmUuZXh0ZW5kZWQpCiAgICByZXR1cm4gdGhpcy5fZXh0RGJsKCk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuX3Byb2pEYmwoKTsKfTsKClBvaW50LnByb3RvdHlwZS5fZXh0QWRkID0gZnVuY3Rpb24gX2V4dEFkZChwKSB7CiAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtZXh0ZW5kZWQtMS5odG1sCiAgLy8gICAgICNhZGRpdGlvbi1hZGQtMjAwOC1od2NkLTMKICAvLyA4TQoKICAvLyBBID0gKFkxIC0gWDEpICogKFkyIC0gWDIpCiAgdmFyIGEgPSB0aGlzLnkucmVkU3ViKHRoaXMueCkucmVkTXVsKHAueS5yZWRTdWIocC54KSk7CiAgLy8gQiA9IChZMSArIFgxKSAqIChZMiArIFgyKQogIHZhciBiID0gdGhpcy55LnJlZEFkZCh0aGlzLngpLnJlZE11bChwLnkucmVkQWRkKHAueCkpOwogIC8vIEMgPSBUMSAqIGsgKiBUMgogIHZhciBjID0gdGhpcy50LnJlZE11bCh0aGlzLmN1cnZlLmRkKS5yZWRNdWwocC50KTsKICAvLyBEID0gWjEgKiAyICogWjIKICB2YXIgZCA9IHRoaXMuei5yZWRNdWwocC56LnJlZEFkZChwLnopKTsKICAvLyBFID0gQiAtIEEKICB2YXIgZSA9IGIucmVkU3ViKGEpOwogIC8vIEYgPSBEIC0gQwogIHZhciBmID0gZC5yZWRTdWIoYyk7CiAgLy8gRyA9IEQgKyBDCiAgdmFyIGcgPSBkLnJlZEFkZChjKTsKICAvLyBIID0gQiArIEEKICB2YXIgaCA9IGIucmVkQWRkKGEpOwogIC8vIFgzID0gRSAqIEYKICB2YXIgbnggPSBlLnJlZE11bChmKTsKICAvLyBZMyA9IEcgKiBICiAgdmFyIG55ID0gZy5yZWRNdWwoaCk7CiAgLy8gVDMgPSBFICogSAogIHZhciBudCA9IGUucmVkTXVsKGgpOwogIC8vIFozID0gRiAqIEcKICB2YXIgbnogPSBmLnJlZE11bChnKTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnksIG56LCBudCk7Cn07CgpQb2ludC5wcm90b3R5cGUuX3Byb2pBZGQgPSBmdW5jdGlvbiBfcHJvakFkZChwKSB7CiAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXR3aXN0ZWQtcHJvamVjdGl2ZS5odG1sCiAgLy8gICAgICNhZGRpdGlvbi1hZGQtMjAwOC1iYmpscAogIC8vICAgICAjYWRkaXRpb24tYWRkLTIwMDctYmwKICAvLyAxME0gKyAxUwoKICAvLyBBID0gWjEgKiBaMgogIHZhciBhID0gdGhpcy56LnJlZE11bChwLnopOwogIC8vIEIgPSBBXjIKICB2YXIgYiA9IGEucmVkU3FyKCk7CiAgLy8gQyA9IFgxICogWDIKICB2YXIgYyA9IHRoaXMueC5yZWRNdWwocC54KTsKICAvLyBEID0gWTEgKiBZMgogIHZhciBkID0gdGhpcy55LnJlZE11bChwLnkpOwogIC8vIEUgPSBkICogQyAqIEQKICB2YXIgZSA9IHRoaXMuY3VydmUuZC5yZWRNdWwoYykucmVkTXVsKGQpOwogIC8vIEYgPSBCIC0gRQogIHZhciBmID0gYi5yZWRTdWIoZSk7CiAgLy8gRyA9IEIgKyBFCiAgdmFyIGcgPSBiLnJlZEFkZChlKTsKICAvLyBYMyA9IEEgKiBGICogKChYMSArIFkxKSAqIChYMiArIFkyKSAtIEMgLSBEKQogIHZhciB0bXAgPSB0aGlzLngucmVkQWRkKHRoaXMueSkucmVkTXVsKHAueC5yZWRBZGQocC55KSkucmVkSVN1YihjKS5yZWRJU3ViKGQpOwogIHZhciBueCA9IGEucmVkTXVsKGYpLnJlZE11bCh0bXApOwogIHZhciBueTsKICB2YXIgbno7CiAgaWYgKHRoaXMuY3VydmUudHdpc3RlZCkgewogICAgLy8gWTMgPSBBICogRyAqIChEIC0gYSAqIEMpCiAgICBueSA9IGEucmVkTXVsKGcpLnJlZE11bChkLnJlZFN1Yih0aGlzLmN1cnZlLl9tdWxBKGMpKSk7CiAgICAvLyBaMyA9IEYgKiBHCiAgICBueiA9IGYucmVkTXVsKGcpOwogIH0gZWxzZSB7CiAgICAvLyBZMyA9IEEgKiBHICogKEQgLSBDKQogICAgbnkgPSBhLnJlZE11bChnKS5yZWRNdWwoZC5yZWRTdWIoYykpOwogICAgLy8gWjMgPSBjICogRiAqIEcKICAgIG56ID0gdGhpcy5jdXJ2ZS5fbXVsQyhmKS5yZWRNdWwoZyk7CiAgfQogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueSwgbnopOwp9OwoKUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChwKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHA7CiAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRoaXM7CgogIGlmICh0aGlzLmN1cnZlLmV4dGVuZGVkKQogICAgcmV0dXJuIHRoaXMuX2V4dEFkZChwKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5fcHJvakFkZChwKTsKfTsKClBvaW50LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwoaykgewogIGlmICh0aGlzLl9oYXNEb3VibGVzKGspKQogICAgcmV0dXJuIHRoaXMuY3VydmUuX2ZpeGVkTmFmTXVsKHRoaXMsIGspOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsKHRoaXMsIGspOwp9OwoKUG9pbnQucHJvdG90eXBlLm11bEFkZCA9IGZ1bmN0aW9uIG11bEFkZChrMSwgcCwgazIpIHsKICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bEFkZCgxLCBbIHRoaXMsIHAgXSwgWyBrMSwgazIgXSwgMiwgZmFsc2UpOwp9OwoKUG9pbnQucHJvdG90eXBlLmptdWxBZGQgPSBmdW5jdGlvbiBqbXVsQWRkKGsxLCBwLCBrMikgewogIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsQWRkKDEsIFsgdGhpcywgcCBdLCBbIGsxLCBrMiBdLCAyLCB0cnVlKTsKfTsKClBvaW50LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiBub3JtYWxpemUoKSB7CiAgaWYgKHRoaXMuek9uZSkKICAgIHJldHVybiB0aGlzOwoKICAvLyBOb3JtYWxpemUgY29vcmRpbmF0ZXMKICB2YXIgemkgPSB0aGlzLnoucmVkSW52bSgpOwogIHRoaXMueCA9IHRoaXMueC5yZWRNdWwoemkpOwogIHRoaXMueSA9IHRoaXMueS5yZWRNdWwoemkpOwogIGlmICh0aGlzLnQpCiAgICB0aGlzLnQgPSB0aGlzLnQucmVkTXVsKHppKTsKICB0aGlzLnogPSB0aGlzLmN1cnZlLm9uZTsKICB0aGlzLnpPbmUgPSB0cnVlOwogIHJldHVybiB0aGlzOwp9OwoKUG9pbnQucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZygpIHsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludCh0aGlzLngucmVkTmVnKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55LAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueiwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnQgJiYgdGhpcy50LnJlZE5lZygpKTsKfTsKClBvaW50LnByb3RvdHlwZS5nZXRYID0gZnVuY3Rpb24gZ2V0WCgpIHsKICB0aGlzLm5vcm1hbGl6ZSgpOwogIHJldHVybiB0aGlzLnguZnJvbVJlZCgpOwp9OwoKUG9pbnQucHJvdG90eXBlLmdldFkgPSBmdW5jdGlvbiBnZXRZKCkgewogIHRoaXMubm9ybWFsaXplKCk7CiAgcmV0dXJuIHRoaXMueS5mcm9tUmVkKCk7Cn07CgpQb2ludC5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcShvdGhlcikgewogIHJldHVybiB0aGlzID09PSBvdGhlciB8fAogICAgICAgICB0aGlzLmdldFgoKS5jbXAob3RoZXIuZ2V0WCgpKSA9PT0gMCAmJgogICAgICAgICB0aGlzLmdldFkoKS5jbXAob3RoZXIuZ2V0WSgpKSA9PT0gMDsKfTsKClBvaW50LnByb3RvdHlwZS5lcVhUb1AgPSBmdW5jdGlvbiBlcVhUb1AoeCkgewogIHZhciByeCA9IHgudG9SZWQodGhpcy5jdXJ2ZS5yZWQpLnJlZE11bCh0aGlzLnopOwogIGlmICh0aGlzLnguY21wKHJ4KSA9PT0gMCkKICAgIHJldHVybiB0cnVlOwoKICB2YXIgeGMgPSB4LmNsb25lKCk7CiAgdmFyIHQgPSB0aGlzLmN1cnZlLnJlZE4ucmVkTXVsKHRoaXMueik7CiAgZm9yICg7OykgewogICAgeGMuaWFkZCh0aGlzLmN1cnZlLm4pOwogICAgaWYgKHhjLmNtcCh0aGlzLmN1cnZlLnApID49IDApCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICByeC5yZWRJQWRkKHQpOwogICAgaWYgKHRoaXMueC5jbXAocngpID09PSAwKQogICAgICByZXR1cm4gdHJ1ZTsKICB9CiAgcmV0dXJuIGZhbHNlOwp9OwoKLy8gQ29tcGF0aWJpbGl0eSB3aXRoIEJhc2VDdXJ2ZQpQb2ludC5wcm90b3R5cGUudG9QID0gUG9pbnQucHJvdG90eXBlLm5vcm1hbGl6ZTsKUG9pbnQucHJvdG90eXBlLm1peGVkQWRkID0gUG9pbnQucHJvdG90eXBlLmFkZDsKCn0seyIuLi8uLi9lbGxpcHRpYyI6NTQzLCIuLi9jdXJ2ZSI6NTQ2LCJibi5qcyI6NTQxLCJpbmhlcml0cyI6NzAxfV0sNTQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGN1cnZlID0gZXhwb3J0czsKCmN1cnZlLmJhc2UgPSByZXF1aXJlKCcuL2Jhc2UnKTsKY3VydmUuc2hvcnQgPSByZXF1aXJlKCcuL3Nob3J0Jyk7CmN1cnZlLm1vbnQgPSByZXF1aXJlKCcuL21vbnQnKTsKY3VydmUuZWR3YXJkcyA9IHJlcXVpcmUoJy4vZWR3YXJkcycpOwoKfSx7Ii4vYmFzZSI6NTQ0LCIuL2Vkd2FyZHMiOjU0NSwiLi9tb250Ijo1NDcsIi4vc2hvcnQiOjU0OH1dLDU0NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBjdXJ2ZSA9IHJlcXVpcmUoJy4uL2N1cnZlJyk7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBCYXNlID0gY3VydmUuYmFzZTsKCnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwoKZnVuY3Rpb24gTW9udEN1cnZlKGNvbmYpIHsKICBCYXNlLmNhbGwodGhpcywgJ21vbnQnLCBjb25mKTsKCiAgdGhpcy5hID0gbmV3IEJOKGNvbmYuYSwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmIgPSBuZXcgQk4oY29uZi5iLCAxNikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuaTQgPSBuZXcgQk4oNCkudG9SZWQodGhpcy5yZWQpLnJlZEludm0oKTsKICB0aGlzLnR3byA9IG5ldyBCTigyKS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5hMjQgPSB0aGlzLmk0LnJlZE11bCh0aGlzLmEucmVkQWRkKHRoaXMudHdvKSk7Cn0KaW5oZXJpdHMoTW9udEN1cnZlLCBCYXNlKTsKbW9kdWxlLmV4cG9ydHMgPSBNb250Q3VydmU7CgpNb250Q3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUocG9pbnQpIHsKICB2YXIgeCA9IHBvaW50Lm5vcm1hbGl6ZSgpLng7CiAgdmFyIHgyID0geC5yZWRTcXIoKTsKICB2YXIgcmhzID0geDIucmVkTXVsKHgpLnJlZEFkZCh4Mi5yZWRNdWwodGhpcy5hKSkucmVkQWRkKHgpOwogIHZhciB5ID0gcmhzLnJlZFNxcnQoKTsKCiAgcmV0dXJuIHkucmVkU3FyKCkuY21wKHJocykgPT09IDA7Cn07CgpmdW5jdGlvbiBQb2ludChjdXJ2ZSwgeCwgeikgewogIEJhc2UuQmFzZVBvaW50LmNhbGwodGhpcywgY3VydmUsICdwcm9qZWN0aXZlJyk7CiAgaWYgKHggPT09IG51bGwgJiYgeiA9PT0gbnVsbCkgewogICAgdGhpcy54ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnogPSB0aGlzLmN1cnZlLnplcm87CiAgfSBlbHNlIHsKICAgIHRoaXMueCA9IG5ldyBCTih4LCAxNik7CiAgICB0aGlzLnogPSBuZXcgQk4oeiwgMTYpOwogICAgaWYgKCF0aGlzLngucmVkKQogICAgICB0aGlzLnggPSB0aGlzLngudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgaWYgKCF0aGlzLnoucmVkKQogICAgICB0aGlzLnogPSB0aGlzLnoudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogIH0KfQppbmhlcml0cyhQb2ludCwgQmFzZS5CYXNlUG9pbnQpOwoKTW9udEN1cnZlLnByb3RvdHlwZS5kZWNvZGVQb2ludCA9IGZ1bmN0aW9uIGRlY29kZVBvaW50KGJ5dGVzLCBlbmMpIHsKICByZXR1cm4gdGhpcy5wb2ludCh1dGlscy50b0FycmF5KGJ5dGVzLCBlbmMpLCAxKTsKfTsKCk1vbnRDdXJ2ZS5wcm90b3R5cGUucG9pbnQgPSBmdW5jdGlvbiBwb2ludCh4LCB6KSB7CiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLCB4LCB6KTsKfTsKCk1vbnRDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tSlNPTiA9IGZ1bmN0aW9uIHBvaW50RnJvbUpTT04ob2JqKSB7CiAgcmV0dXJuIFBvaW50LmZyb21KU09OKHRoaXMsIG9iaik7Cn07CgpQb2ludC5wcm90b3R5cGUucHJlY29tcHV0ZSA9IGZ1bmN0aW9uIHByZWNvbXB1dGUoKSB7CiAgLy8gTm8tb3AKfTsKClBvaW50LnByb3RvdHlwZS5fZW5jb2RlID0gZnVuY3Rpb24gX2VuY29kZSgpIHsKICByZXR1cm4gdGhpcy5nZXRYKCkudG9BcnJheSgnYmUnLCB0aGlzLmN1cnZlLnAuYnl0ZUxlbmd0aCgpKTsKfTsKClBvaW50LmZyb21KU09OID0gZnVuY3Rpb24gZnJvbUpTT04oY3VydmUsIG9iaikgewogIHJldHVybiBuZXcgUG9pbnQoY3VydmUsIG9ialswXSwgb2JqWzFdIHx8IGN1cnZlLm9uZSk7Cn07CgpQb2ludC5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuICc8RUMgUG9pbnQgSW5maW5pdHk+JzsKICByZXR1cm4gJzxFQyBQb2ludCB4OiAnICsgdGhpcy54LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKwogICAgICAnIHo6ICcgKyB0aGlzLnouZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArICc+JzsKfTsKClBvaW50LnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICAvLyBYWFggVGhpcyBjb2RlIGFzc3VtZXMgdGhhdCB6ZXJvIGlzIGFsd2F5cyB6ZXJvIGluIHJlZAogIHJldHVybiB0aGlzLnouY21wbigwKSA9PT0gMDsKfTsKClBvaW50LnByb3RvdHlwZS5kYmwgPSBmdW5jdGlvbiBkYmwoKSB7CiAgLy8gaHR0cDovL2h5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1tb250Z29tLXh6Lmh0bWwjZG91YmxpbmctZGJsLTE5ODctbS0zCiAgLy8gMk0gKyAyUyArIDRBCgogIC8vIEEgPSBYMSArIFoxCiAgdmFyIGEgPSB0aGlzLngucmVkQWRkKHRoaXMueik7CiAgLy8gQUEgPSBBXjIKICB2YXIgYWEgPSBhLnJlZFNxcigpOwogIC8vIEIgPSBYMSAtIFoxCiAgdmFyIGIgPSB0aGlzLngucmVkU3ViKHRoaXMueik7CiAgLy8gQkIgPSBCXjIKICB2YXIgYmIgPSBiLnJlZFNxcigpOwogIC8vIEMgPSBBQSAtIEJCCiAgdmFyIGMgPSBhYS5yZWRTdWIoYmIpOwogIC8vIFgzID0gQUEgKiBCQgogIHZhciBueCA9IGFhLnJlZE11bChiYik7CiAgLy8gWjMgPSBDICogKEJCICsgQTI0ICogQykKICB2YXIgbnogPSBjLnJlZE11bChiYi5yZWRBZGQodGhpcy5jdXJ2ZS5hMjQucmVkTXVsKGMpKSk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG56KTsKfTsKClBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdOb3Qgc3VwcG9ydGVkIG9uIE1vbnRnb21lcnkgY3VydmUnKTsKfTsKClBvaW50LnByb3RvdHlwZS5kaWZmQWRkID0gZnVuY3Rpb24gZGlmZkFkZChwLCBkaWZmKSB7CiAgLy8gaHR0cDovL2h5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1tb250Z29tLXh6Lmh0bWwjZGlmZmFkZC1kYWRkLTE5ODctbS0zCiAgLy8gNE0gKyAyUyArIDZBCgogIC8vIEEgPSBYMiArIFoyCiAgdmFyIGEgPSB0aGlzLngucmVkQWRkKHRoaXMueik7CiAgLy8gQiA9IFgyIC0gWjIKICB2YXIgYiA9IHRoaXMueC5yZWRTdWIodGhpcy56KTsKICAvLyBDID0gWDMgKyBaMwogIHZhciBjID0gcC54LnJlZEFkZChwLnopOwogIC8vIEQgPSBYMyAtIFozCiAgdmFyIGQgPSBwLngucmVkU3ViKHAueik7CiAgLy8gREEgPSBEICogQQogIHZhciBkYSA9IGQucmVkTXVsKGEpOwogIC8vIENCID0gQyAqIEIKICB2YXIgY2IgPSBjLnJlZE11bChiKTsKICAvLyBYNSA9IFoxICogKERBICsgQ0IpXjIKICB2YXIgbnggPSBkaWZmLnoucmVkTXVsKGRhLnJlZEFkZChjYikucmVkU3FyKCkpOwogIC8vIFo1ID0gWDEgKiAoREEgLSBDQileMgogIHZhciBueiA9IGRpZmYueC5yZWRNdWwoZGEucmVkSVN1YihjYikucmVkU3FyKCkpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG54LCBueik7Cn07CgpQb2ludC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsKGspIHsKICB2YXIgdCA9IGsuY2xvbmUoKTsKICB2YXIgYSA9IHRoaXM7IC8vIChOIC8gMikgKiBRICsgUQogIHZhciBiID0gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsgLy8gKE4gLyAyKSAqIFEKICB2YXIgYyA9IHRoaXM7IC8vIFEKCiAgZm9yICh2YXIgYml0cyA9IFtdOyB0LmNtcG4oMCkgIT09IDA7IHQuaXVzaHJuKDEpKQogICAgYml0cy5wdXNoKHQuYW5kbG4oMSkpOwoKICBmb3IgKHZhciBpID0gYml0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgaWYgKGJpdHNbaV0gPT09IDApIHsKICAgICAgLy8gTiAqIFEgKyBRID0gKChOIC8gMikgKiBRICsgUSkpICsgKE4gLyAyKSAqIFEKICAgICAgYSA9IGEuZGlmZkFkZChiLCBjKTsKICAgICAgLy8gTiAqIFEgPSAyICogKChOIC8gMikgKiBRICsgUSkpCiAgICAgIGIgPSBiLmRibCgpOwogICAgfSBlbHNlIHsKICAgICAgLy8gTiAqIFEgPSAoKE4gLyAyKSAqIFEgKyBRKSArICgoTiAvIDIpICogUSkKICAgICAgYiA9IGEuZGlmZkFkZChiLCBjKTsKICAgICAgLy8gTiAqIFEgKyBRID0gMiAqICgoTiAvIDIpICogUSArIFEpCiAgICAgIGEgPSBhLmRibCgpOwogICAgfQogIH0KICByZXR1cm4gYjsKfTsKClBvaW50LnByb3RvdHlwZS5tdWxBZGQgPSBmdW5jdGlvbiBtdWxBZGQoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdOb3Qgc3VwcG9ydGVkIG9uIE1vbnRnb21lcnkgY3VydmUnKTsKfTsKClBvaW50LnByb3RvdHlwZS5qdW1sQWRkID0gZnVuY3Rpb24ganVtbEFkZCgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBzdXBwb3J0ZWQgb24gTW9udGdvbWVyeSBjdXJ2ZScpOwp9OwoKUG9pbnQucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEob3RoZXIpIHsKICByZXR1cm4gdGhpcy5nZXRYKCkuY21wKG90aGVyLmdldFgoKSkgPT09IDA7Cn07CgpQb2ludC5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24gbm9ybWFsaXplKCkgewogIHRoaXMueCA9IHRoaXMueC5yZWRNdWwodGhpcy56LnJlZEludm0oKSk7CiAgdGhpcy56ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uIGdldFgoKSB7CiAgLy8gTm9ybWFsaXplIGNvb3JkaW5hdGVzCiAgdGhpcy5ub3JtYWxpemUoKTsKCiAgcmV0dXJuIHRoaXMueC5mcm9tUmVkKCk7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjU0MywiLi4vY3VydmUiOjU0NiwiYm4uanMiOjU0MSwiaW5oZXJpdHMiOjcwMX1dLDU0ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBjdXJ2ZSA9IHJlcXVpcmUoJy4uL2N1cnZlJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBCYXNlID0gY3VydmUuYmFzZTsKCnZhciBhc3NlcnQgPSBlbGxpcHRpYy51dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBTaG9ydEN1cnZlKGNvbmYpIHsKICBCYXNlLmNhbGwodGhpcywgJ3Nob3J0JywgY29uZik7CgogIHRoaXMuYSA9IG5ldyBCTihjb25mLmEsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5iID0gbmV3IEJOKGNvbmYuYiwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLnRpbnYgPSB0aGlzLnR3by5yZWRJbnZtKCk7CgogIHRoaXMuemVyb0EgPSB0aGlzLmEuZnJvbVJlZCgpLmNtcG4oMCkgPT09IDA7CiAgdGhpcy50aHJlZUEgPSB0aGlzLmEuZnJvbVJlZCgpLnN1Yih0aGlzLnApLmNtcG4oLTMpID09PSAwOwoKICAvLyBJZiB0aGUgY3VydmUgaXMgZW5kb21vcnBoaWMsIHByZWNhbGN1bGF0ZSBiZXRhIGFuZCBsYW1iZGEKICB0aGlzLmVuZG8gPSB0aGlzLl9nZXRFbmRvbW9ycGhpc20oY29uZik7CiAgdGhpcy5fZW5kb1duYWZUMSA9IG5ldyBBcnJheSg0KTsKICB0aGlzLl9lbmRvV25hZlQyID0gbmV3IEFycmF5KDQpOwp9CmluaGVyaXRzKFNob3J0Q3VydmUsIEJhc2UpOwptb2R1bGUuZXhwb3J0cyA9IFNob3J0Q3VydmU7CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5fZ2V0RW5kb21vcnBoaXNtID0gZnVuY3Rpb24gX2dldEVuZG9tb3JwaGlzbShjb25mKSB7CiAgLy8gTm8gZWZmaWNpZW50IGVuZG9tb3JwaGlzbQogIGlmICghdGhpcy56ZXJvQSB8fCAhdGhpcy5nIHx8ICF0aGlzLm4gfHwgdGhpcy5wLm1vZG4oMykgIT09IDEpCiAgICByZXR1cm47CgogIC8vIENvbXB1dGUgYmV0YSBhbmQgbGFtYmRhLCB0aGF0IGxhbWJkYSAqIFAgPSAoYmV0YSAqIFB4OyBQeSkKICB2YXIgYmV0YTsKICB2YXIgbGFtYmRhOwogIGlmIChjb25mLmJldGEpIHsKICAgIGJldGEgPSBuZXcgQk4oY29uZi5iZXRhLCAxNikudG9SZWQodGhpcy5yZWQpOwogIH0gZWxzZSB7CiAgICB2YXIgYmV0YXMgPSB0aGlzLl9nZXRFbmRvUm9vdHModGhpcy5wKTsKICAgIC8vIENob29zZSB0aGUgc21hbGxlc3QgYmV0YQogICAgYmV0YSA9IGJldGFzWzBdLmNtcChiZXRhc1sxXSkgPCAwID8gYmV0YXNbMF0gOiBiZXRhc1sxXTsKICAgIGJldGEgPSBiZXRhLnRvUmVkKHRoaXMucmVkKTsKICB9CiAgaWYgKGNvbmYubGFtYmRhKSB7CiAgICBsYW1iZGEgPSBuZXcgQk4oY29uZi5sYW1iZGEsIDE2KTsKICB9IGVsc2UgewogICAgLy8gQ2hvb3NlIHRoZSBsYW1iZGEgdGhhdCBpcyBtYXRjaGluZyBzZWxlY3RlZCBiZXRhCiAgICB2YXIgbGFtYmRhcyA9IHRoaXMuX2dldEVuZG9Sb290cyh0aGlzLm4pOwogICAgaWYgKHRoaXMuZy5tdWwobGFtYmRhc1swXSkueC5jbXAodGhpcy5nLngucmVkTXVsKGJldGEpKSA9PT0gMCkgewogICAgICBsYW1iZGEgPSBsYW1iZGFzWzBdOwogICAgfSBlbHNlIHsKICAgICAgbGFtYmRhID0gbGFtYmRhc1sxXTsKICAgICAgYXNzZXJ0KHRoaXMuZy5tdWwobGFtYmRhKS54LmNtcCh0aGlzLmcueC5yZWRNdWwoYmV0YSkpID09PSAwKTsKICAgIH0KICB9CgogIC8vIEdldCBiYXNpcyB2ZWN0b3JzLCB1c2VkIGZvciBiYWxhbmNlZCBsZW5ndGgtdHdvIHJlcHJlc2VudGF0aW9uCiAgdmFyIGJhc2lzOwogIGlmIChjb25mLmJhc2lzKSB7CiAgICBiYXNpcyA9IGNvbmYuYmFzaXMubWFwKGZ1bmN0aW9uKHZlYykgewogICAgICByZXR1cm4gewogICAgICAgIGE6IG5ldyBCTih2ZWMuYSwgMTYpLAogICAgICAgIGI6IG5ldyBCTih2ZWMuYiwgMTYpCiAgICAgIH07CiAgICB9KTsKICB9IGVsc2UgewogICAgYmFzaXMgPSB0aGlzLl9nZXRFbmRvQmFzaXMobGFtYmRhKTsKICB9CgogIHJldHVybiB7CiAgICBiZXRhOiBiZXRhLAogICAgbGFtYmRhOiBsYW1iZGEsCiAgICBiYXNpczogYmFzaXMKICB9Owp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuX2dldEVuZG9Sb290cyA9IGZ1bmN0aW9uIF9nZXRFbmRvUm9vdHMobnVtKSB7CiAgLy8gRmluZCByb290cyBvZiBmb3IgeF4yICsgeCArIDEgaW4gRgogIC8vIFJvb3QgPSAoLTEgKy0gU3FydCgtMykpIC8gMgogIC8vCiAgdmFyIHJlZCA9IG51bSA9PT0gdGhpcy5wID8gdGhpcy5yZWQgOiBCTi5tb250KG51bSk7CiAgdmFyIHRpbnYgPSBuZXcgQk4oMikudG9SZWQocmVkKS5yZWRJbnZtKCk7CiAgdmFyIG50aW52ID0gdGludi5yZWROZWcoKTsKCiAgdmFyIHMgPSBuZXcgQk4oMykudG9SZWQocmVkKS5yZWROZWcoKS5yZWRTcXJ0KCkucmVkTXVsKHRpbnYpOwoKICB2YXIgbDEgPSBudGludi5yZWRBZGQocykuZnJvbVJlZCgpOwogIHZhciBsMiA9IG50aW52LnJlZFN1YihzKS5mcm9tUmVkKCk7CiAgcmV0dXJuIFsgbDEsIGwyIF07Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5fZ2V0RW5kb0Jhc2lzID0gZnVuY3Rpb24gX2dldEVuZG9CYXNpcyhsYW1iZGEpIHsKICAvLyBhcHJ4U3FydCA+PSBzcXJ0KHRoaXMubikKICB2YXIgYXByeFNxcnQgPSB0aGlzLm4udXNocm4oTWF0aC5mbG9vcih0aGlzLm4uYml0TGVuZ3RoKCkgLyAyKSk7CgogIC8vIDMuNzQKICAvLyBSdW4gRUdDRCwgdW50aWwgcihMICsgMSkgPCBhcHJ4U3FydAogIHZhciB1ID0gbGFtYmRhOwogIHZhciB2ID0gdGhpcy5uLmNsb25lKCk7CiAgdmFyIHgxID0gbmV3IEJOKDEpOwogIHZhciB5MSA9IG5ldyBCTigwKTsKICB2YXIgeDIgPSBuZXcgQk4oMCk7CiAgdmFyIHkyID0gbmV3IEJOKDEpOwoKICAvLyBOT1RFOiBhbGwgdmVjdG9ycyBhcmUgcm9vdHMgb2Y6IGEgKyBiICogbGFtYmRhID0gMCAobW9kIG4pCiAgdmFyIGEwOwogIHZhciBiMDsKICAvLyBGaXJzdCB2ZWN0b3IKICB2YXIgYTE7CiAgdmFyIGIxOwogIC8vIFNlY29uZCB2ZWN0b3IKICB2YXIgYTI7CiAgdmFyIGIyOwoKICB2YXIgcHJldlI7CiAgdmFyIGkgPSAwOwogIHZhciByOwogIHZhciB4OwogIHdoaWxlICh1LmNtcG4oMCkgIT09IDApIHsKICAgIHZhciBxID0gdi5kaXYodSk7CiAgICByID0gdi5zdWIocS5tdWwodSkpOwogICAgeCA9IHgyLnN1YihxLm11bCh4MSkpOwogICAgdmFyIHkgPSB5Mi5zdWIocS5tdWwoeTEpKTsKCiAgICBpZiAoIWExICYmIHIuY21wKGFwcnhTcXJ0KSA8IDApIHsKICAgICAgYTAgPSBwcmV2Ui5uZWcoKTsKICAgICAgYjAgPSB4MTsKICAgICAgYTEgPSByLm5lZygpOwogICAgICBiMSA9IHg7CiAgICB9IGVsc2UgaWYgKGExICYmICsraSA9PT0gMikgewogICAgICBicmVhazsKICAgIH0KICAgIHByZXZSID0gcjsKCiAgICB2ID0gdTsKICAgIHUgPSByOwogICAgeDIgPSB4MTsKICAgIHgxID0geDsKICAgIHkyID0geTE7CiAgICB5MSA9IHk7CiAgfQogIGEyID0gci5uZWcoKTsKICBiMiA9IHg7CgogIHZhciBsZW4xID0gYTEuc3FyKCkuYWRkKGIxLnNxcigpKTsKICB2YXIgbGVuMiA9IGEyLnNxcigpLmFkZChiMi5zcXIoKSk7CiAgaWYgKGxlbjIuY21wKGxlbjEpID49IDApIHsKICAgIGEyID0gYTA7CiAgICBiMiA9IGIwOwogIH0KCiAgLy8gTm9ybWFsaXplIHNpZ25zCiAgaWYgKGExLm5lZ2F0aXZlKSB7CiAgICBhMSA9IGExLm5lZygpOwogICAgYjEgPSBiMS5uZWcoKTsKICB9CiAgaWYgKGEyLm5lZ2F0aXZlKSB7CiAgICBhMiA9IGEyLm5lZygpOwogICAgYjIgPSBiMi5uZWcoKTsKICB9CgogIHJldHVybiBbCiAgICB7IGE6IGExLCBiOiBiMSB9LAogICAgeyBhOiBhMiwgYjogYjIgfQogIF07Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5fZW5kb1NwbGl0ID0gZnVuY3Rpb24gX2VuZG9TcGxpdChrKSB7CiAgdmFyIGJhc2lzID0gdGhpcy5lbmRvLmJhc2lzOwogIHZhciB2MSA9IGJhc2lzWzBdOwogIHZhciB2MiA9IGJhc2lzWzFdOwoKICB2YXIgYzEgPSB2Mi5iLm11bChrKS5kaXZSb3VuZCh0aGlzLm4pOwogIHZhciBjMiA9IHYxLmIubmVnKCkubXVsKGspLmRpdlJvdW5kKHRoaXMubik7CgogIHZhciBwMSA9IGMxLm11bCh2MS5hKTsKICB2YXIgcDIgPSBjMi5tdWwodjIuYSk7CiAgdmFyIHExID0gYzEubXVsKHYxLmIpOwogIHZhciBxMiA9IGMyLm11bCh2Mi5iKTsKCiAgLy8gQ2FsY3VsYXRlIGFuc3dlcgogIHZhciBrMSA9IGsuc3ViKHAxKS5zdWIocDIpOwogIHZhciBrMiA9IHExLmFkZChxMikubmVnKCk7CiAgcmV0dXJuIHsgazE6IGsxLCBrMjogazIgfTsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLnBvaW50RnJvbVggPSBmdW5jdGlvbiBwb2ludEZyb21YKHgsIG9kZCkgewogIHggPSBuZXcgQk4oeCwgMTYpOwogIGlmICgheC5yZWQpCiAgICB4ID0geC50b1JlZCh0aGlzLnJlZCk7CgogIHZhciB5MiA9IHgucmVkU3FyKCkucmVkTXVsKHgpLnJlZElBZGQoeC5yZWRNdWwodGhpcy5hKSkucmVkSUFkZCh0aGlzLmIpOwogIHZhciB5ID0geTIucmVkU3FydCgpOwogIGlmICh5LnJlZFNxcigpLnJlZFN1Yih5MikuY21wKHRoaXMuemVybykgIT09IDApCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgcG9pbnQnKTsKCiAgLy8gWFhYIElzIHRoZXJlIGFueSB3YXkgdG8gdGVsbCBpZiB0aGUgbnVtYmVyIGlzIG9kZCB3aXRob3V0IGNvbnZlcnRpbmcgaXQKICAvLyB0byBub24tcmVkIGZvcm0/CiAgdmFyIGlzT2RkID0geS5mcm9tUmVkKCkuaXNPZGQoKTsKICBpZiAob2RkICYmICFpc09kZCB8fCAhb2RkICYmIGlzT2RkKQogICAgeSA9IHkucmVkTmVnKCk7CgogIHJldHVybiB0aGlzLnBvaW50KHgsIHkpOwp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShwb2ludCkgewogIGlmIChwb2ludC5pbmYpCiAgICByZXR1cm4gdHJ1ZTsKCiAgdmFyIHggPSBwb2ludC54OwogIHZhciB5ID0gcG9pbnQueTsKCiAgdmFyIGF4ID0gdGhpcy5hLnJlZE11bCh4KTsKICB2YXIgcmhzID0geC5yZWRTcXIoKS5yZWRNdWwoeCkucmVkSUFkZChheCkucmVkSUFkZCh0aGlzLmIpOwogIHJldHVybiB5LnJlZFNxcigpLnJlZElTdWIocmhzKS5jbXBuKDApID09PSAwOwp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuX2VuZG9XbmFmTXVsQWRkID0KICAgIGZ1bmN0aW9uIF9lbmRvV25hZk11bEFkZChwb2ludHMsIGNvZWZmcywgamFjb2JpYW5SZXN1bHQpIHsKICB2YXIgbnBvaW50cyA9IHRoaXMuX2VuZG9XbmFmVDE7CiAgdmFyIG5jb2VmZnMgPSB0aGlzLl9lbmRvV25hZlQyOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc3BsaXQgPSB0aGlzLl9lbmRvU3BsaXQoY29lZmZzW2ldKTsKICAgIHZhciBwID0gcG9pbnRzW2ldOwogICAgdmFyIGJldGEgPSBwLl9nZXRCZXRhKCk7CgogICAgaWYgKHNwbGl0LmsxLm5lZ2F0aXZlKSB7CiAgICAgIHNwbGl0LmsxLmluZWcoKTsKICAgICAgcCA9IHAubmVnKHRydWUpOwogICAgfQogICAgaWYgKHNwbGl0LmsyLm5lZ2F0aXZlKSB7CiAgICAgIHNwbGl0LmsyLmluZWcoKTsKICAgICAgYmV0YSA9IGJldGEubmVnKHRydWUpOwogICAgfQoKICAgIG5wb2ludHNbaSAqIDJdID0gcDsKICAgIG5wb2ludHNbaSAqIDIgKyAxXSA9IGJldGE7CiAgICBuY29lZmZzW2kgKiAyXSA9IHNwbGl0LmsxOwogICAgbmNvZWZmc1tpICogMiArIDFdID0gc3BsaXQuazI7CiAgfQogIHZhciByZXMgPSB0aGlzLl93bmFmTXVsQWRkKDEsIG5wb2ludHMsIG5jb2VmZnMsIGkgKiAyLCBqYWNvYmlhblJlc3VsdCk7CgogIC8vIENsZWFuLXVwIHJlZmVyZW5jZXMgdG8gcG9pbnRzIGFuZCBjb2VmZmljaWVudHMKICBmb3IgKHZhciBqID0gMDsgaiA8IGkgKiAyOyBqKyspIHsKICAgIG5wb2ludHNbal0gPSBudWxsOwogICAgbmNvZWZmc1tqXSA9IG51bGw7CiAgfQogIHJldHVybiByZXM7Cn07CgpmdW5jdGlvbiBQb2ludChjdXJ2ZSwgeCwgeSwgaXNSZWQpIHsKICBCYXNlLkJhc2VQb2ludC5jYWxsKHRoaXMsIGN1cnZlLCAnYWZmaW5lJyk7CiAgaWYgKHggPT09IG51bGwgJiYgeSA9PT0gbnVsbCkgewogICAgdGhpcy54ID0gbnVsbDsKICAgIHRoaXMueSA9IG51bGw7CiAgICB0aGlzLmluZiA9IHRydWU7CiAgfSBlbHNlIHsKICAgIHRoaXMueCA9IG5ldyBCTih4LCAxNik7CiAgICB0aGlzLnkgPSBuZXcgQk4oeSwgMTYpOwogICAgLy8gRm9yY2UgcmVkZ29tZXJ5IHJlcHJlc2VudGF0aW9uIHdoZW4gbG9hZGluZyBmcm9tIEpTT04KICAgIGlmIChpc1JlZCkgewogICAgICB0aGlzLnguZm9yY2VSZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgICB0aGlzLnkuZm9yY2VSZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgfQogICAgaWYgKCF0aGlzLngucmVkKQogICAgICB0aGlzLnggPSB0aGlzLngudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgaWYgKCF0aGlzLnkucmVkKQogICAgICB0aGlzLnkgPSB0aGlzLnkudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgdGhpcy5pbmYgPSBmYWxzZTsKICB9Cn0KaW5oZXJpdHMoUG9pbnQsIEJhc2UuQmFzZVBvaW50KTsKClNob3J0Q3VydmUucHJvdG90eXBlLnBvaW50ID0gZnVuY3Rpb24gcG9pbnQoeCwgeSwgaXNSZWQpIHsKICByZXR1cm4gbmV3IFBvaW50KHRoaXMsIHgsIHksIGlzUmVkKTsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLnBvaW50RnJvbUpTT04gPSBmdW5jdGlvbiBwb2ludEZyb21KU09OKG9iaiwgcmVkKSB7CiAgcmV0dXJuIFBvaW50LmZyb21KU09OKHRoaXMsIG9iaiwgcmVkKTsKfTsKClBvaW50LnByb3RvdHlwZS5fZ2V0QmV0YSA9IGZ1bmN0aW9uIF9nZXRCZXRhKCkgewogIGlmICghdGhpcy5jdXJ2ZS5lbmRvKQogICAgcmV0dXJuOwoKICB2YXIgcHJlID0gdGhpcy5wcmVjb21wdXRlZDsKICBpZiAocHJlICYmIHByZS5iZXRhKQogICAgcmV0dXJuIHByZS5iZXRhOwoKICB2YXIgYmV0YSA9IHRoaXMuY3VydmUucG9pbnQodGhpcy54LnJlZE11bCh0aGlzLmN1cnZlLmVuZG8uYmV0YSksIHRoaXMueSk7CiAgaWYgKHByZSkgewogICAgdmFyIGN1cnZlID0gdGhpcy5jdXJ2ZTsKICAgIHZhciBlbmRvTXVsID0gZnVuY3Rpb24ocCkgewogICAgICByZXR1cm4gY3VydmUucG9pbnQocC54LnJlZE11bChjdXJ2ZS5lbmRvLmJldGEpLCBwLnkpOwogICAgfTsKICAgIHByZS5iZXRhID0gYmV0YTsKICAgIGJldGEucHJlY29tcHV0ZWQgPSB7CiAgICAgIGJldGE6IG51bGwsCiAgICAgIG5hZjogcHJlLm5hZiAmJiB7CiAgICAgICAgd25kOiBwcmUubmFmLnduZCwKICAgICAgICBwb2ludHM6IHByZS5uYWYucG9pbnRzLm1hcChlbmRvTXVsKQogICAgICB9LAogICAgICBkb3VibGVzOiBwcmUuZG91YmxlcyAmJiB7CiAgICAgICAgc3RlcDogcHJlLmRvdWJsZXMuc3RlcCwKICAgICAgICBwb2ludHM6IHByZS5kb3VibGVzLnBvaW50cy5tYXAoZW5kb011bCkKICAgICAgfQogICAgfTsKICB9CiAgcmV0dXJuIGJldGE7Cn07CgpQb2ludC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkgewogIGlmICghdGhpcy5wcmVjb21wdXRlZCkKICAgIHJldHVybiBbIHRoaXMueCwgdGhpcy55IF07CgogIHJldHVybiBbIHRoaXMueCwgdGhpcy55LCB0aGlzLnByZWNvbXB1dGVkICYmIHsKICAgIGRvdWJsZXM6IHRoaXMucHJlY29tcHV0ZWQuZG91YmxlcyAmJiB7CiAgICAgIHN0ZXA6IHRoaXMucHJlY29tcHV0ZWQuZG91Ymxlcy5zdGVwLAogICAgICBwb2ludHM6IHRoaXMucHJlY29tcHV0ZWQuZG91Ymxlcy5wb2ludHMuc2xpY2UoMSkKICAgIH0sCiAgICBuYWY6IHRoaXMucHJlY29tcHV0ZWQubmFmICYmIHsKICAgICAgd25kOiB0aGlzLnByZWNvbXB1dGVkLm5hZi53bmQsCiAgICAgIHBvaW50czogdGhpcy5wcmVjb21wdXRlZC5uYWYucG9pbnRzLnNsaWNlKDEpCiAgICB9CiAgfSBdOwp9OwoKUG9pbnQuZnJvbUpTT04gPSBmdW5jdGlvbiBmcm9tSlNPTihjdXJ2ZSwgb2JqLCByZWQpIHsKICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpCiAgICBvYmogPSBKU09OLnBhcnNlKG9iaik7CiAgdmFyIHJlcyA9IGN1cnZlLnBvaW50KG9ialswXSwgb2JqWzFdLCByZWQpOwogIGlmICghb2JqWzJdKQogICAgcmV0dXJuIHJlczsKCiAgZnVuY3Rpb24gb2JqMnBvaW50KG9iaikgewogICAgcmV0dXJuIGN1cnZlLnBvaW50KG9ialswXSwgb2JqWzFdLCByZWQpOwogIH0KCiAgdmFyIHByZSA9IG9ialsyXTsKICByZXMucHJlY29tcHV0ZWQgPSB7CiAgICBiZXRhOiBudWxsLAogICAgZG91YmxlczogcHJlLmRvdWJsZXMgJiYgewogICAgICBzdGVwOiBwcmUuZG91Ymxlcy5zdGVwLAogICAgICBwb2ludHM6IFsgcmVzIF0uY29uY2F0KHByZS5kb3VibGVzLnBvaW50cy5tYXAob2JqMnBvaW50KSkKICAgIH0sCiAgICBuYWY6IHByZS5uYWYgJiYgewogICAgICB3bmQ6IHByZS5uYWYud25kLAogICAgICBwb2ludHM6IFsgcmVzIF0uY29uY2F0KHByZS5uYWYucG9pbnRzLm1hcChvYmoycG9pbnQpKQogICAgfQogIH07CiAgcmV0dXJuIHJlczsKfTsKClBvaW50LnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gJzxFQyBQb2ludCBJbmZpbml0eT4nOwogIHJldHVybiAnPEVDIFBvaW50IHg6ICcgKyB0aGlzLnguZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICcgeTogJyArIHRoaXMueS5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsgJz4nOwp9OwoKUG9pbnQucHJvdG90eXBlLmlzSW5maW5pdHkgPSBmdW5jdGlvbiBpc0luZmluaXR5KCkgewogIHJldHVybiB0aGlzLmluZjsKfTsKClBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQocCkgewogIC8vIE8gKyBQID0gUAogIGlmICh0aGlzLmluZikKICAgIHJldHVybiBwOwoKICAvLyBQICsgTyA9IFAKICBpZiAocC5pbmYpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gUCArIFAgPSAyUAogIGlmICh0aGlzLmVxKHApKQogICAgcmV0dXJuIHRoaXMuZGJsKCk7CgogIC8vIFAgKyAoLVApID0gTwogIGlmICh0aGlzLm5lZygpLmVxKHApKQogICAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobnVsbCwgbnVsbCk7CgogIC8vIFAgKyBRID0gTwogIGlmICh0aGlzLnguY21wKHAueCkgPT09IDApCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsKCiAgdmFyIGMgPSB0aGlzLnkucmVkU3ViKHAueSk7CiAgaWYgKGMuY21wbigwKSAhPT0gMCkKICAgIGMgPSBjLnJlZE11bCh0aGlzLngucmVkU3ViKHAueCkucmVkSW52bSgpKTsKICB2YXIgbnggPSBjLnJlZFNxcigpLnJlZElTdWIodGhpcy54KS5yZWRJU3ViKHAueCk7CiAgdmFyIG55ID0gYy5yZWRNdWwodGhpcy54LnJlZFN1YihueCkpLnJlZElTdWIodGhpcy55KTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnkpOwp9OwoKUG9pbnQucHJvdG90eXBlLmRibCA9IGZ1bmN0aW9uIGRibCgpIHsKICBpZiAodGhpcy5pbmYpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gMlAgPSBPCiAgdmFyIHlzMSA9IHRoaXMueS5yZWRBZGQodGhpcy55KTsKICBpZiAoeXMxLmNtcG4oMCkgPT09IDApCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsKCiAgdmFyIGEgPSB0aGlzLmN1cnZlLmE7CgogIHZhciB4MiA9IHRoaXMueC5yZWRTcXIoKTsKICB2YXIgZHlpbnYgPSB5czEucmVkSW52bSgpOwogIHZhciBjID0geDIucmVkQWRkKHgyKS5yZWRJQWRkKHgyKS5yZWRJQWRkKGEpLnJlZE11bChkeWludik7CgogIHZhciBueCA9IGMucmVkU3FyKCkucmVkSVN1Yih0aGlzLngucmVkQWRkKHRoaXMueCkpOwogIHZhciBueSA9IGMucmVkTXVsKHRoaXMueC5yZWRTdWIobngpKS5yZWRJU3ViKHRoaXMueSk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG55KTsKfTsKClBvaW50LnByb3RvdHlwZS5nZXRYID0gZnVuY3Rpb24gZ2V0WCgpIHsKICByZXR1cm4gdGhpcy54LmZyb21SZWQoKTsKfTsKClBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gZ2V0WSgpIHsKICByZXR1cm4gdGhpcy55LmZyb21SZWQoKTsKfTsKClBvaW50LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwoaykgewogIGsgPSBuZXcgQk4oaywgMTYpOwoKICBpZiAodGhpcy5faGFzRG91YmxlcyhrKSkKICAgIHJldHVybiB0aGlzLmN1cnZlLl9maXhlZE5hZk11bCh0aGlzLCBrKTsKICBlbHNlIGlmICh0aGlzLmN1cnZlLmVuZG8pCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fZW5kb1duYWZNdWxBZGQoWyB0aGlzIF0sIFsgayBdKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bCh0aGlzLCBrKTsKfTsKClBvaW50LnByb3RvdHlwZS5tdWxBZGQgPSBmdW5jdGlvbiBtdWxBZGQoazEsIHAyLCBrMikgewogIHZhciBwb2ludHMgPSBbIHRoaXMsIHAyIF07CiAgdmFyIGNvZWZmcyA9IFsgazEsIGsyIF07CiAgaWYgKHRoaXMuY3VydmUuZW5kbykKICAgIHJldHVybiB0aGlzLmN1cnZlLl9lbmRvV25hZk11bEFkZChwb2ludHMsIGNvZWZmcyk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWxBZGQoMSwgcG9pbnRzLCBjb2VmZnMsIDIpOwp9OwoKUG9pbnQucHJvdG90eXBlLmptdWxBZGQgPSBmdW5jdGlvbiBqbXVsQWRkKGsxLCBwMiwgazIpIHsKICB2YXIgcG9pbnRzID0gWyB0aGlzLCBwMiBdOwogIHZhciBjb2VmZnMgPSBbIGsxLCBrMiBdOwogIGlmICh0aGlzLmN1cnZlLmVuZG8pCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fZW5kb1duYWZNdWxBZGQocG9pbnRzLCBjb2VmZnMsIHRydWUpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsQWRkKDEsIHBvaW50cywgY29lZmZzLCAyLCB0cnVlKTsKfTsKClBvaW50LnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKHApIHsKICByZXR1cm4gdGhpcyA9PT0gcCB8fAogICAgICAgICB0aGlzLmluZiA9PT0gcC5pbmYgJiYKICAgICAgICAgICAgICh0aGlzLmluZiB8fCB0aGlzLnguY21wKHAueCkgPT09IDAgJiYgdGhpcy55LmNtcChwLnkpID09PSAwKTsKfTsKClBvaW50LnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcoX3ByZWNvbXB1dGUpIHsKICBpZiAodGhpcy5pbmYpCiAgICByZXR1cm4gdGhpczsKCiAgdmFyIHJlcyA9IHRoaXMuY3VydmUucG9pbnQodGhpcy54LCB0aGlzLnkucmVkTmVnKCkpOwogIGlmIChfcHJlY29tcHV0ZSAmJiB0aGlzLnByZWNvbXB1dGVkKSB7CiAgICB2YXIgcHJlID0gdGhpcy5wcmVjb21wdXRlZDsKICAgIHZhciBuZWdhdGUgPSBmdW5jdGlvbihwKSB7CiAgICAgIHJldHVybiBwLm5lZygpOwogICAgfTsKICAgIHJlcy5wcmVjb21wdXRlZCA9IHsKICAgICAgbmFmOiBwcmUubmFmICYmIHsKICAgICAgICB3bmQ6IHByZS5uYWYud25kLAogICAgICAgIHBvaW50czogcHJlLm5hZi5wb2ludHMubWFwKG5lZ2F0ZSkKICAgICAgfSwKICAgICAgZG91YmxlczogcHJlLmRvdWJsZXMgJiYgewogICAgICAgIHN0ZXA6IHByZS5kb3VibGVzLnN0ZXAsCiAgICAgICAgcG9pbnRzOiBwcmUuZG91Ymxlcy5wb2ludHMubWFwKG5lZ2F0ZSkKICAgICAgfQogICAgfTsKICB9CiAgcmV0dXJuIHJlczsKfTsKClBvaW50LnByb3RvdHlwZS50b0ogPSBmdW5jdGlvbiB0b0ooKSB7CiAgaWYgKHRoaXMuaW5mKQogICAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG51bGwsIG51bGwsIG51bGwpOwoKICB2YXIgcmVzID0gdGhpcy5jdXJ2ZS5qcG9pbnQodGhpcy54LCB0aGlzLnksIHRoaXMuY3VydmUub25lKTsKICByZXR1cm4gcmVzOwp9OwoKZnVuY3Rpb24gSlBvaW50KGN1cnZlLCB4LCB5LCB6KSB7CiAgQmFzZS5CYXNlUG9pbnQuY2FsbCh0aGlzLCBjdXJ2ZSwgJ2phY29iaWFuJyk7CiAgaWYgKHggPT09IG51bGwgJiYgeSA9PT0gbnVsbCAmJiB6ID09PSBudWxsKSB7CiAgICB0aGlzLnggPSB0aGlzLmN1cnZlLm9uZTsKICAgIHRoaXMueSA9IHRoaXMuY3VydmUub25lOwogICAgdGhpcy56ID0gbmV3IEJOKDApOwogIH0gZWxzZSB7CiAgICB0aGlzLnggPSBuZXcgQk4oeCwgMTYpOwogICAgdGhpcy55ID0gbmV3IEJOKHksIDE2KTsKICAgIHRoaXMueiA9IG5ldyBCTih6LCAxNik7CiAgfQogIGlmICghdGhpcy54LnJlZCkKICAgIHRoaXMueCA9IHRoaXMueC50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgaWYgKCF0aGlzLnkucmVkKQogICAgdGhpcy55ID0gdGhpcy55LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICBpZiAoIXRoaXMuei5yZWQpCiAgICB0aGlzLnogPSB0aGlzLnoudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwoKICB0aGlzLnpPbmUgPSB0aGlzLnogPT09IHRoaXMuY3VydmUub25lOwp9CmluaGVyaXRzKEpQb2ludCwgQmFzZS5CYXNlUG9pbnQpOwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUuanBvaW50ID0gZnVuY3Rpb24ganBvaW50KHgsIHksIHopIHsKICByZXR1cm4gbmV3IEpQb2ludCh0aGlzLCB4LCB5LCB6KTsKfTsKCkpQb2ludC5wcm90b3R5cGUudG9QID0gZnVuY3Rpb24gdG9QKCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KG51bGwsIG51bGwpOwoKICB2YXIgemludiA9IHRoaXMuei5yZWRJbnZtKCk7CiAgdmFyIHppbnYyID0gemludi5yZWRTcXIoKTsKICB2YXIgYXggPSB0aGlzLngucmVkTXVsKHppbnYyKTsKICB2YXIgYXkgPSB0aGlzLnkucmVkTXVsKHppbnYyKS5yZWRNdWwoemludik7CgogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KGF4LCBheSk7Cn07CgpKUG9pbnQucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZygpIHsKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQodGhpcy54LCB0aGlzLnkucmVkTmVnKCksIHRoaXMueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChwKSB7CiAgLy8gTyArIFAgPSBQCiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHA7CgogIC8vIFAgKyBPID0gUAogIGlmIChwLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwoKICAvLyAxMk0gKyA0UyArIDdBCiAgdmFyIHB6MiA9IHAuei5yZWRTcXIoKTsKICB2YXIgejIgPSB0aGlzLnoucmVkU3FyKCk7CiAgdmFyIHUxID0gdGhpcy54LnJlZE11bChwejIpOwogIHZhciB1MiA9IHAueC5yZWRNdWwoejIpOwogIHZhciBzMSA9IHRoaXMueS5yZWRNdWwocHoyLnJlZE11bChwLnopKTsKICB2YXIgczIgPSBwLnkucmVkTXVsKHoyLnJlZE11bCh0aGlzLnopKTsKCiAgdmFyIGggPSB1MS5yZWRTdWIodTIpOwogIHZhciByID0gczEucmVkU3ViKHMyKTsKICBpZiAoaC5jbXBuKDApID09PSAwKSB7CiAgICBpZiAoci5jbXBuKDApICE9PSAwKQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgICBlbHNlCiAgICAgIHJldHVybiB0aGlzLmRibCgpOwogIH0KCiAgdmFyIGgyID0gaC5yZWRTcXIoKTsKICB2YXIgaDMgPSBoMi5yZWRNdWwoaCk7CiAgdmFyIHYgPSB1MS5yZWRNdWwoaDIpOwoKICB2YXIgbnggPSByLnJlZFNxcigpLnJlZElBZGQoaDMpLnJlZElTdWIodikucmVkSVN1Yih2KTsKICB2YXIgbnkgPSByLnJlZE11bCh2LnJlZElTdWIobngpKS5yZWRJU3ViKHMxLnJlZE11bChoMykpOwogIHZhciBueiA9IHRoaXMuei5yZWRNdWwocC56KS5yZWRNdWwoaCk7CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUubWl4ZWRBZGQgPSBmdW5jdGlvbiBtaXhlZEFkZChwKSB7CiAgLy8gTyArIFAgPSBQCiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHAudG9KKCk7CgogIC8vIFAgKyBPID0gUAogIGlmIChwLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwoKICAvLyA4TSArIDNTICsgN0EKICB2YXIgejIgPSB0aGlzLnoucmVkU3FyKCk7CiAgdmFyIHUxID0gdGhpcy54OwogIHZhciB1MiA9IHAueC5yZWRNdWwoejIpOwogIHZhciBzMSA9IHRoaXMueTsKICB2YXIgczIgPSBwLnkucmVkTXVsKHoyKS5yZWRNdWwodGhpcy56KTsKCiAgdmFyIGggPSB1MS5yZWRTdWIodTIpOwogIHZhciByID0gczEucmVkU3ViKHMyKTsKICBpZiAoaC5jbXBuKDApID09PSAwKSB7CiAgICBpZiAoci5jbXBuKDApICE9PSAwKQogICAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgICBlbHNlCiAgICAgIHJldHVybiB0aGlzLmRibCgpOwogIH0KCiAgdmFyIGgyID0gaC5yZWRTcXIoKTsKICB2YXIgaDMgPSBoMi5yZWRNdWwoaCk7CiAgdmFyIHYgPSB1MS5yZWRNdWwoaDIpOwoKICB2YXIgbnggPSByLnJlZFNxcigpLnJlZElBZGQoaDMpLnJlZElTdWIodikucmVkSVN1Yih2KTsKICB2YXIgbnkgPSByLnJlZE11bCh2LnJlZElTdWIobngpKS5yZWRJU3ViKHMxLnJlZE11bChoMykpOwogIHZhciBueiA9IHRoaXMuei5yZWRNdWwoaCk7CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUuZGJscCA9IGZ1bmN0aW9uIGRibHAocG93KSB7CiAgaWYgKHBvdyA9PT0gMCkKICAgIHJldHVybiB0aGlzOwogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwogIGlmICghcG93KQogICAgcmV0dXJuIHRoaXMuZGJsKCk7CgogIGlmICh0aGlzLmN1cnZlLnplcm9BIHx8IHRoaXMuY3VydmUudGhyZWVBKSB7CiAgICB2YXIgciA9IHRoaXM7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvdzsgaSsrKQogICAgICByID0gci5kYmwoKTsKICAgIHJldHVybiByOwogIH0KCiAgLy8gMU0gKyAyUyArIDFBICsgTiAqICg0UyArIDVNICsgOEEpCiAgLy8gTiA9IDEgPT4gNk0gKyA2UyArIDlBCiAgdmFyIGEgPSB0aGlzLmN1cnZlLmE7CiAgdmFyIHRpbnYgPSB0aGlzLmN1cnZlLnRpbnY7CgogIHZhciBqeCA9IHRoaXMueDsKICB2YXIgankgPSB0aGlzLnk7CiAgdmFyIGp6ID0gdGhpcy56OwogIHZhciBqejQgPSBqei5yZWRTcXIoKS5yZWRTcXIoKTsKCiAgLy8gUmV1c2UgcmVzdWx0cwogIHZhciBqeWQgPSBqeS5yZWRBZGQoankpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcG93OyBpKyspIHsKICAgIHZhciBqeDIgPSBqeC5yZWRTcXIoKTsKICAgIHZhciBqeWQyID0ganlkLnJlZFNxcigpOwogICAgdmFyIGp5ZDQgPSBqeWQyLnJlZFNxcigpOwogICAgdmFyIGMgPSBqeDIucmVkQWRkKGp4MikucmVkSUFkZChqeDIpLnJlZElBZGQoYS5yZWRNdWwoano0KSk7CgogICAgdmFyIHQxID0gangucmVkTXVsKGp5ZDIpOwogICAgdmFyIG54ID0gYy5yZWRTcXIoKS5yZWRJU3ViKHQxLnJlZEFkZCh0MSkpOwogICAgdmFyIHQyID0gdDEucmVkSVN1YihueCk7CiAgICB2YXIgZG55ID0gYy5yZWRNdWwodDIpOwogICAgZG55ID0gZG55LnJlZElBZGQoZG55KS5yZWRJU3ViKGp5ZDQpOwogICAgdmFyIG56ID0ganlkLnJlZE11bChqeik7CiAgICBpZiAoaSArIDEgPCBwb3cpCiAgICAgIGp6NCA9IGp6NC5yZWRNdWwoanlkNCk7CgogICAganggPSBueDsKICAgIGp6ID0gbno7CiAgICBqeWQgPSBkbnk7CiAgfQoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQoangsIGp5ZC5yZWRNdWwodGludiksIGp6KTsKfTsKCkpQb2ludC5wcm90b3R5cGUuZGJsID0gZnVuY3Rpb24gZGJsKCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwoKICBpZiAodGhpcy5jdXJ2ZS56ZXJvQSkKICAgIHJldHVybiB0aGlzLl96ZXJvRGJsKCk7CiAgZWxzZSBpZiAodGhpcy5jdXJ2ZS50aHJlZUEpCiAgICByZXR1cm4gdGhpcy5fdGhyZWVEYmwoKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5fZGJsKCk7Cn07CgpKUG9pbnQucHJvdG90eXBlLl96ZXJvRGJsID0gZnVuY3Rpb24gX3plcm9EYmwoKSB7CiAgdmFyIG54OwogIHZhciBueTsKICB2YXIgbno7CiAgLy8gWiA9IDEKICBpZiAodGhpcy56T25lKSB7CiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTAuaHRtbAogICAgLy8gICAgICNkb3VibGluZy1tZGJsLTIwMDctYmwKICAgIC8vIDFNICsgNVMgKyAxNEEKCiAgICAvLyBYWCA9IFgxXjIKICAgIHZhciB4eCA9IHRoaXMueC5yZWRTcXIoKTsKICAgIC8vIFlZID0gWTFeMgogICAgdmFyIHl5ID0gdGhpcy55LnJlZFNxcigpOwogICAgLy8gWVlZWSA9IFlZXjIKICAgIHZhciB5eXl5ID0geXkucmVkU3FyKCk7CiAgICAvLyBTID0gMiAqICgoWDEgKyBZWSleMiAtIFhYIC0gWVlZWSkKICAgIHZhciBzID0gdGhpcy54LnJlZEFkZCh5eSkucmVkU3FyKCkucmVkSVN1Yih4eCkucmVkSVN1Yih5eXl5KTsKICAgIHMgPSBzLnJlZElBZGQocyk7CiAgICAvLyBNID0gMyAqIFhYICsgYTsgYSA9IDAKICAgIHZhciBtID0geHgucmVkQWRkKHh4KS5yZWRJQWRkKHh4KTsKICAgIC8vIFQgPSBNIF4gMiAtIDIqUwogICAgdmFyIHQgPSBtLnJlZFNxcigpLnJlZElTdWIocykucmVkSVN1YihzKTsKCiAgICAvLyA4ICogWVlZWQogICAgdmFyIHl5eXk4ID0geXl5eS5yZWRJQWRkKHl5eXkpOwogICAgeXl5eTggPSB5eXl5OC5yZWRJQWRkKHl5eXk4KTsKICAgIHl5eXk4ID0geXl5eTgucmVkSUFkZCh5eXl5OCk7CgogICAgLy8gWDMgPSBUCiAgICBueCA9IHQ7CiAgICAvLyBZMyA9IE0gKiAoUyAtIFQpIC0gOCAqIFlZWVkKICAgIG55ID0gbS5yZWRNdWwocy5yZWRJU3ViKHQpKS5yZWRJU3ViKHl5eXk4KTsKICAgIC8vIFozID0gMipZMQogICAgbnogPSB0aGlzLnkucmVkQWRkKHRoaXMueSk7CiAgfSBlbHNlIHsKICAgIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1zaG9ydHctamFjb2JpYW4tMC5odG1sCiAgICAvLyAgICAgI2RvdWJsaW5nLWRibC0yMDA5LWwKICAgIC8vIDJNICsgNVMgKyAxM0EKCiAgICAvLyBBID0gWDFeMgogICAgdmFyIGEgPSB0aGlzLngucmVkU3FyKCk7CiAgICAvLyBCID0gWTFeMgogICAgdmFyIGIgPSB0aGlzLnkucmVkU3FyKCk7CiAgICAvLyBDID0gQl4yCiAgICB2YXIgYyA9IGIucmVkU3FyKCk7CiAgICAvLyBEID0gMiAqICgoWDEgKyBCKV4yIC0gQSAtIEMpCiAgICB2YXIgZCA9IHRoaXMueC5yZWRBZGQoYikucmVkU3FyKCkucmVkSVN1YihhKS5yZWRJU3ViKGMpOwogICAgZCA9IGQucmVkSUFkZChkKTsKICAgIC8vIEUgPSAzICogQQogICAgdmFyIGUgPSBhLnJlZEFkZChhKS5yZWRJQWRkKGEpOwogICAgLy8gRiA9IEVeMgogICAgdmFyIGYgPSBlLnJlZFNxcigpOwoKICAgIC8vIDggKiBDCiAgICB2YXIgYzggPSBjLnJlZElBZGQoYyk7CiAgICBjOCA9IGM4LnJlZElBZGQoYzgpOwogICAgYzggPSBjOC5yZWRJQWRkKGM4KTsKCiAgICAvLyBYMyA9IEYgLSAyICogRAogICAgbnggPSBmLnJlZElTdWIoZCkucmVkSVN1YihkKTsKICAgIC8vIFkzID0gRSAqIChEIC0gWDMpIC0gOCAqIEMKICAgIG55ID0gZS5yZWRNdWwoZC5yZWRJU3ViKG54KSkucmVkSVN1YihjOCk7CiAgICAvLyBaMyA9IDIgKiBZMSAqIFoxCiAgICBueiA9IHRoaXMueS5yZWRNdWwodGhpcy56KTsKICAgIG56ID0gbnoucmVkSUFkZChueik7CiAgfQoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLl90aHJlZURibCA9IGZ1bmN0aW9uIF90aHJlZURibCgpIHsKICB2YXIgbng7CiAgdmFyIG55OwogIHZhciBuejsKICAvLyBaID0gMQogIGlmICh0aGlzLnpPbmUpIHsKICAgIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1zaG9ydHctamFjb2JpYW4tMy5odG1sCiAgICAvLyAgICAgI2RvdWJsaW5nLW1kYmwtMjAwNy1ibAogICAgLy8gMU0gKyA1UyArIDE1QQoKICAgIC8vIFhYID0gWDFeMgogICAgdmFyIHh4ID0gdGhpcy54LnJlZFNxcigpOwogICAgLy8gWVkgPSBZMV4yCiAgICB2YXIgeXkgPSB0aGlzLnkucmVkU3FyKCk7CiAgICAvLyBZWVlZID0gWVleMgogICAgdmFyIHl5eXkgPSB5eS5yZWRTcXIoKTsKICAgIC8vIFMgPSAyICogKChYMSArIFlZKV4yIC0gWFggLSBZWVlZKQogICAgdmFyIHMgPSB0aGlzLngucmVkQWRkKHl5KS5yZWRTcXIoKS5yZWRJU3ViKHh4KS5yZWRJU3ViKHl5eXkpOwogICAgcyA9IHMucmVkSUFkZChzKTsKICAgIC8vIE0gPSAzICogWFggKyBhCiAgICB2YXIgbSA9IHh4LnJlZEFkZCh4eCkucmVkSUFkZCh4eCkucmVkSUFkZCh0aGlzLmN1cnZlLmEpOwogICAgLy8gVCA9IE1eMiAtIDIgKiBTCiAgICB2YXIgdCA9IG0ucmVkU3FyKCkucmVkSVN1YihzKS5yZWRJU3ViKHMpOwogICAgLy8gWDMgPSBUCiAgICBueCA9IHQ7CiAgICAvLyBZMyA9IE0gKiAoUyAtIFQpIC0gOCAqIFlZWVkKICAgIHZhciB5eXl5OCA9IHl5eXkucmVkSUFkZCh5eXl5KTsKICAgIHl5eXk4ID0geXl5eTgucmVkSUFkZCh5eXl5OCk7CiAgICB5eXl5OCA9IHl5eXk4LnJlZElBZGQoeXl5eTgpOwogICAgbnkgPSBtLnJlZE11bChzLnJlZElTdWIodCkpLnJlZElTdWIoeXl5eTgpOwogICAgLy8gWjMgPSAyICogWTEKICAgIG56ID0gdGhpcy55LnJlZEFkZCh0aGlzLnkpOwogIH0gZWxzZSB7CiAgICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTMuaHRtbCNkb3VibGluZy1kYmwtMjAwMS1iCiAgICAvLyAzTSArIDVTCgogICAgLy8gZGVsdGEgPSBaMV4yCiAgICB2YXIgZGVsdGEgPSB0aGlzLnoucmVkU3FyKCk7CiAgICAvLyBnYW1tYSA9IFkxXjIKICAgIHZhciBnYW1tYSA9IHRoaXMueS5yZWRTcXIoKTsKICAgIC8vIGJldGEgPSBYMSAqIGdhbW1hCiAgICB2YXIgYmV0YSA9IHRoaXMueC5yZWRNdWwoZ2FtbWEpOwogICAgLy8gYWxwaGEgPSAzICogKFgxIC0gZGVsdGEpICogKFgxICsgZGVsdGEpCiAgICB2YXIgYWxwaGEgPSB0aGlzLngucmVkU3ViKGRlbHRhKS5yZWRNdWwodGhpcy54LnJlZEFkZChkZWx0YSkpOwogICAgYWxwaGEgPSBhbHBoYS5yZWRBZGQoYWxwaGEpLnJlZElBZGQoYWxwaGEpOwogICAgLy8gWDMgPSBhbHBoYV4yIC0gOCAqIGJldGEKICAgIHZhciBiZXRhNCA9IGJldGEucmVkSUFkZChiZXRhKTsKICAgIGJldGE0ID0gYmV0YTQucmVkSUFkZChiZXRhNCk7CiAgICB2YXIgYmV0YTggPSBiZXRhNC5yZWRBZGQoYmV0YTQpOwogICAgbnggPSBhbHBoYS5yZWRTcXIoKS5yZWRJU3ViKGJldGE4KTsKICAgIC8vIFozID0gKFkxICsgWjEpXjIgLSBnYW1tYSAtIGRlbHRhCiAgICBueiA9IHRoaXMueS5yZWRBZGQodGhpcy56KS5yZWRTcXIoKS5yZWRJU3ViKGdhbW1hKS5yZWRJU3ViKGRlbHRhKTsKICAgIC8vIFkzID0gYWxwaGEgKiAoNCAqIGJldGEgLSBYMykgLSA4ICogZ2FtbWFeMgogICAgdmFyIGdnYW1tYTggPSBnYW1tYS5yZWRTcXIoKTsKICAgIGdnYW1tYTggPSBnZ2FtbWE4LnJlZElBZGQoZ2dhbW1hOCk7CiAgICBnZ2FtbWE4ID0gZ2dhbW1hOC5yZWRJQWRkKGdnYW1tYTgpOwogICAgZ2dhbW1hOCA9IGdnYW1tYTgucmVkSUFkZChnZ2FtbWE4KTsKICAgIG55ID0gYWxwaGEucmVkTXVsKGJldGE0LnJlZElTdWIobngpKS5yZWRJU3ViKGdnYW1tYTgpOwogIH0KCiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG54LCBueSwgbnopOwp9OwoKSlBvaW50LnByb3RvdHlwZS5fZGJsID0gZnVuY3Rpb24gX2RibCgpIHsKICB2YXIgYSA9IHRoaXMuY3VydmUuYTsKCiAgLy8gNE0gKyA2UyArIDEwQQogIHZhciBqeCA9IHRoaXMueDsKICB2YXIgankgPSB0aGlzLnk7CiAgdmFyIGp6ID0gdGhpcy56OwogIHZhciBqejQgPSBqei5yZWRTcXIoKS5yZWRTcXIoKTsKCiAgdmFyIGp4MiA9IGp4LnJlZFNxcigpOwogIHZhciBqeTIgPSBqeS5yZWRTcXIoKTsKCiAgdmFyIGMgPSBqeDIucmVkQWRkKGp4MikucmVkSUFkZChqeDIpLnJlZElBZGQoYS5yZWRNdWwoano0KSk7CgogIHZhciBqeGQ0ID0gangucmVkQWRkKGp4KTsKICBqeGQ0ID0ganhkNC5yZWRJQWRkKGp4ZDQpOwogIHZhciB0MSA9IGp4ZDQucmVkTXVsKGp5Mik7CiAgdmFyIG54ID0gYy5yZWRTcXIoKS5yZWRJU3ViKHQxLnJlZEFkZCh0MSkpOwogIHZhciB0MiA9IHQxLnJlZElTdWIobngpOwoKICB2YXIganlkOCA9IGp5Mi5yZWRTcXIoKTsKICBqeWQ4ID0ganlkOC5yZWRJQWRkKGp5ZDgpOwogIGp5ZDggPSBqeWQ4LnJlZElBZGQoanlkOCk7CiAganlkOCA9IGp5ZDgucmVkSUFkZChqeWQ4KTsKICB2YXIgbnkgPSBjLnJlZE11bCh0MikucmVkSVN1YihqeWQ4KTsKICB2YXIgbnogPSBqeS5yZWRBZGQoankpLnJlZE11bChqeik7CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUudHJwbCA9IGZ1bmN0aW9uIHRycGwoKSB7CiAgaWYgKCF0aGlzLmN1cnZlLnplcm9BKQogICAgcmV0dXJuIHRoaXMuZGJsKCkuYWRkKHRoaXMpOwoKICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tc2hvcnR3LWphY29iaWFuLTAuaHRtbCN0cmlwbGluZy10cGwtMjAwNy1ibAogIC8vIDVNICsgMTBTICsgLi4uCgogIC8vIFhYID0gWDFeMgogIHZhciB4eCA9IHRoaXMueC5yZWRTcXIoKTsKICAvLyBZWSA9IFkxXjIKICB2YXIgeXkgPSB0aGlzLnkucmVkU3FyKCk7CiAgLy8gWlogPSBaMV4yCiAgdmFyIHp6ID0gdGhpcy56LnJlZFNxcigpOwogIC8vIFlZWVkgPSBZWV4yCiAgdmFyIHl5eXkgPSB5eS5yZWRTcXIoKTsKICAvLyBNID0gMyAqIFhYICsgYSAqIFpaMjsgYSA9IDAKICB2YXIgbSA9IHh4LnJlZEFkZCh4eCkucmVkSUFkZCh4eCk7CiAgLy8gTU0gPSBNXjIKICB2YXIgbW0gPSBtLnJlZFNxcigpOwogIC8vIEUgPSA2ICogKChYMSArIFlZKV4yIC0gWFggLSBZWVlZKSAtIE1NCiAgdmFyIGUgPSB0aGlzLngucmVkQWRkKHl5KS5yZWRTcXIoKS5yZWRJU3ViKHh4KS5yZWRJU3ViKHl5eXkpOwogIGUgPSBlLnJlZElBZGQoZSk7CiAgZSA9IGUucmVkQWRkKGUpLnJlZElBZGQoZSk7CiAgZSA9IGUucmVkSVN1YihtbSk7CiAgLy8gRUUgPSBFXjIKICB2YXIgZWUgPSBlLnJlZFNxcigpOwogIC8vIFQgPSAxNipZWVlZCiAgdmFyIHQgPSB5eXl5LnJlZElBZGQoeXl5eSk7CiAgdCA9IHQucmVkSUFkZCh0KTsKICB0ID0gdC5yZWRJQWRkKHQpOwogIHQgPSB0LnJlZElBZGQodCk7CiAgLy8gVSA9IChNICsgRSleMiAtIE1NIC0gRUUgLSBUCiAgdmFyIHUgPSBtLnJlZElBZGQoZSkucmVkU3FyKCkucmVkSVN1YihtbSkucmVkSVN1YihlZSkucmVkSVN1Yih0KTsKICAvLyBYMyA9IDQgKiAoWDEgKiBFRSAtIDQgKiBZWSAqIFUpCiAgdmFyIHl5dTQgPSB5eS5yZWRNdWwodSk7CiAgeXl1NCA9IHl5dTQucmVkSUFkZCh5eXU0KTsKICB5eXU0ID0geXl1NC5yZWRJQWRkKHl5dTQpOwogIHZhciBueCA9IHRoaXMueC5yZWRNdWwoZWUpLnJlZElTdWIoeXl1NCk7CiAgbnggPSBueC5yZWRJQWRkKG54KTsKICBueCA9IG54LnJlZElBZGQobngpOwogIC8vIFkzID0gOCAqIFkxICogKFUgKiAoVCAtIFUpIC0gRSAqIEVFKQogIHZhciBueSA9IHRoaXMueS5yZWRNdWwodS5yZWRNdWwodC5yZWRJU3ViKHUpKS5yZWRJU3ViKGUucmVkTXVsKGVlKSkpOwogIG55ID0gbnkucmVkSUFkZChueSk7CiAgbnkgPSBueS5yZWRJQWRkKG55KTsKICBueSA9IG55LnJlZElBZGQobnkpOwogIC8vIFozID0gKFoxICsgRSleMiAtIFpaIC0gRUUKICB2YXIgbnogPSB0aGlzLnoucmVkQWRkKGUpLnJlZFNxcigpLnJlZElTdWIoenopLnJlZElTdWIoZWUpOwoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bChrLCBrYmFzZSkgewogIGsgPSBuZXcgQk4oaywga2Jhc2UpOwoKICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bCh0aGlzLCBrKTsKfTsKCkpQb2ludC5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcShwKSB7CiAgaWYgKHAudHlwZSA9PT0gJ2FmZmluZScpCiAgICByZXR1cm4gdGhpcy5lcShwLnRvSigpKTsKCiAgaWYgKHRoaXMgPT09IHApCiAgICByZXR1cm4gdHJ1ZTsKCiAgLy8geDEgKiB6Ml4yID09IHgyICogejFeMgogIHZhciB6MiA9IHRoaXMuei5yZWRTcXIoKTsKICB2YXIgcHoyID0gcC56LnJlZFNxcigpOwogIGlmICh0aGlzLngucmVkTXVsKHB6MikucmVkSVN1YihwLngucmVkTXVsKHoyKSkuY21wbigwKSAhPT0gMCkKICAgIHJldHVybiBmYWxzZTsKCiAgLy8geTEgKiB6Ml4zID09IHkyICogejFeMwogIHZhciB6MyA9IHoyLnJlZE11bCh0aGlzLnopOwogIHZhciBwejMgPSBwejIucmVkTXVsKHAueik7CiAgcmV0dXJuIHRoaXMueS5yZWRNdWwocHozKS5yZWRJU3ViKHAueS5yZWRNdWwoejMpKS5jbXBuKDApID09PSAwOwp9OwoKSlBvaW50LnByb3RvdHlwZS5lcVhUb1AgPSBmdW5jdGlvbiBlcVhUb1AoeCkgewogIHZhciB6cyA9IHRoaXMuei5yZWRTcXIoKTsKICB2YXIgcnggPSB4LnRvUmVkKHRoaXMuY3VydmUucmVkKS5yZWRNdWwoenMpOwogIGlmICh0aGlzLnguY21wKHJ4KSA9PT0gMCkKICAgIHJldHVybiB0cnVlOwoKICB2YXIgeGMgPSB4LmNsb25lKCk7CiAgdmFyIHQgPSB0aGlzLmN1cnZlLnJlZE4ucmVkTXVsKHpzKTsKICBmb3IgKDs7KSB7CiAgICB4Yy5pYWRkKHRoaXMuY3VydmUubik7CiAgICBpZiAoeGMuY21wKHRoaXMuY3VydmUucCkgPj0gMCkKICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIHJ4LnJlZElBZGQodCk7CiAgICBpZiAodGhpcy54LmNtcChyeCkgPT09IDApCiAgICAgIHJldHVybiB0cnVlOwogIH0KICByZXR1cm4gZmFsc2U7Cn07CgpKUG9pbnQucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiAnPEVDIEpQb2ludCBJbmZpbml0eT4nOwogIHJldHVybiAnPEVDIEpQb2ludCB4OiAnICsgdGhpcy54LnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICcgeTogJyArIHRoaXMueS50b1N0cmluZygxNiwgMikgKwogICAgICAnIHo6ICcgKyB0aGlzLnoudG9TdHJpbmcoMTYsIDIpICsgJz4nOwp9OwoKSlBvaW50LnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICAvLyBYWFggVGhpcyBjb2RlIGFzc3VtZXMgdGhhdCB6ZXJvIGlzIGFsd2F5cyB6ZXJvIGluIHJlZAogIHJldHVybiB0aGlzLnouY21wbigwKSA9PT0gMDsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6NTQzLCIuLi9jdXJ2ZSI6NTQ2LCJibi5qcyI6NTQxLCJpbmhlcml0cyI6NzAxfV0sNTQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGN1cnZlcyA9IGV4cG9ydHM7Cgp2YXIgaGFzaCA9IHJlcXVpcmUoJ2hhc2guanMnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vZWxsaXB0aWMnKTsKCnZhciBhc3NlcnQgPSBlbGxpcHRpYy51dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBQcmVzZXRDdXJ2ZShvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ3Nob3J0JykKICAgIHRoaXMuY3VydmUgPSBuZXcgZWxsaXB0aWMuY3VydmUuc2hvcnQob3B0aW9ucyk7CiAgZWxzZSBpZiAob3B0aW9ucy50eXBlID09PSAnZWR3YXJkcycpCiAgICB0aGlzLmN1cnZlID0gbmV3IGVsbGlwdGljLmN1cnZlLmVkd2FyZHMob3B0aW9ucyk7CiAgZWxzZQogICAgdGhpcy5jdXJ2ZSA9IG5ldyBlbGxpcHRpYy5jdXJ2ZS5tb250KG9wdGlvbnMpOwogIHRoaXMuZyA9IHRoaXMuY3VydmUuZzsKICB0aGlzLm4gPSB0aGlzLmN1cnZlLm47CiAgdGhpcy5oYXNoID0gb3B0aW9ucy5oYXNoOwoKICBhc3NlcnQodGhpcy5nLnZhbGlkYXRlKCksICdJbnZhbGlkIGN1cnZlJyk7CiAgYXNzZXJ0KHRoaXMuZy5tdWwodGhpcy5uKS5pc0luZmluaXR5KCksICdJbnZhbGlkIGN1cnZlLCBHKk4gIT0gTycpOwp9CmN1cnZlcy5QcmVzZXRDdXJ2ZSA9IFByZXNldEN1cnZlOwoKZnVuY3Rpb24gZGVmaW5lQ3VydmUobmFtZSwgb3B0aW9ucykgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdXJ2ZXMsIG5hbWUsIHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgY3VydmUgPSBuZXcgUHJlc2V0Q3VydmUob3B0aW9ucyk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdXJ2ZXMsIG5hbWUsIHsKICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICB2YWx1ZTogY3VydmUKICAgICAgfSk7CiAgICAgIHJldHVybiBjdXJ2ZTsKICAgIH0KICB9KTsKfQoKZGVmaW5lQ3VydmUoJ3AxOTInLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogJ3AxOTInLAogIHA6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmZmZiBmZmZmZmZmZicsCiAgYTogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZjJywKICBiOiAnNjQyMTA1MTkgZTU5YzgwZTcgMGZhN2U5YWIgNzIyNDMwNDkgZmViOGRlZWMgYzE0NmI5YjEnLAogIG46ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiA5OWRlZjgzNiAxNDZiYzliMSBiNGQyMjgzMScsCiAgaGFzaDogaGFzaC5zaGEyNTYsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJzE4OGRhODBlIGIwMzA5MGY2IDdjYmYyMGViIDQzYTE4ODAwIGY0ZmYwYWZkIDgyZmYxMDEyJywKICAgICcwNzE5MmI5NSBmZmM4ZGE3OCA2MzEwMTFlZCA2YjI0Y2RkNSA3M2Y5NzdhMSAxZTc5NDgxMScKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ3AyMjQnLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogJ3AyMjQnLAogIHA6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMScsCiAgYTogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlJywKICBiOiAnYjQwNTBhODUgMGMwNGIzYWIgZjU0MTMyNTYgNTA0NGIwYjcgZDdiZmQ4YmEgMjcwYjM5NDMgMjM1NWZmYjQnLAogIG46ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmMTZhMiBlMGI4ZjAzZSAxM2RkMjk0NSA1YzVjMmEzZCcsCiAgaGFzaDogaGFzaC5zaGEyNTYsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJ2I3MGUwY2JkIDZiYjRiZjdmIDMyMTM5MGI5IDRhMDNjMWQzIDU2YzIxMTIyIDM0MzI4MGQ2IDExNWMxZDIxJywKICAgICdiZDM3NjM4OCBiNWY3MjNmYiA0YzIyZGZlNiBjZDQzNzVhMCA1YTA3NDc2NCA0NGQ1ODE5OSA4NTAwN2UzNCcKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ3AyNTYnLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogbnVsbCwKICBwOiAnZmZmZmZmZmYgMDAwMDAwMDEgMDAwMDAwMDAgMDAwMDAwMDAgMDAwMDAwMDAgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYnLAogIGE6ICdmZmZmZmZmZiAwMDAwMDAwMSAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmYycsCiAgYjogJzVhYzYzNWQ4IGFhM2E5M2U3IGIzZWJiZDU1IDc2OTg4NmJjIDY1MWQwNmIwIGNjNTNiMGY2IDNiY2UzYzNlIDI3ZDI2MDRiJywKICBuOiAnZmZmZmZmZmYgMDAwMDAwMDAgZmZmZmZmZmYgZmZmZmZmZmYgYmNlNmZhYWQgYTcxNzllODQgZjNiOWNhYzIgZmM2MzI1NTEnLAogIGhhc2g6IGhhc2guc2hhMjU2LAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICc2YjE3ZDFmMiBlMTJjNDI0NyBmOGJjZTZlNSA2M2E0NDBmMiA3NzAzN2Q4MSAyZGViMzNhMCBmNGExMzk0NSBkODk4YzI5NicsCiAgICAnNGZlMzQyZTIgZmUxYTdmOWIgOGVlN2ViNGEgN2MwZjllMTYgMmJjZTMzNTcgNmIzMTVlY2UgY2JiNjQwNjggMzdiZjUxZjUnCiAgXQp9KTsKCmRlZmluZUN1cnZlKCdwMzg0JywgewogIHR5cGU6ICdzaG9ydCcsCiAgcHJpbWU6IG51bGwsCiAgcDogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZSBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmZicsCiAgYTogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZSBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmYycsCiAgYjogJ2IzMzEyZmE3IGUyM2VlN2U0IDk4OGUwNTZiIGUzZjgyZDE5IDE4MWQ5YzZlIGZlODE0MTEyIDAzMTQwODhmICcgKwogICAgICc1MDEzODc1YSBjNjU2Mzk4ZCA4YTJlZDE5ZCAyYTg1YzhlZCBkM2VjMmFlZicsCiAgbjogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGM3NjM0ZDgxICcgKwogICAgICdmNDM3MmRkZiA1ODFhMGRiMiA0OGIwYTc3YSBlY2VjMTk2YSBjY2M1Mjk3MycsCiAgaGFzaDogaGFzaC5zaGEzODQsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJ2FhODdjYTIyIGJlOGIwNTM3IDhlYjFjNzFlIGYzMjBhZDc0IDZlMWQzYjYyIDhiYTc5Yjk4IDU5Zjc0MWUwIDgyNTQyYTM4ICcgKwogICAgJzU1MDJmMjVkIGJmNTUyOTZjIDNhNTQ1ZTM4IDcyNzYwYWI3JywKICAgICczNjE3ZGU0YSA5NjI2MmM2ZiA1ZDllOThiZiA5MjkyZGMyOSBmOGY0MWRiZCAyODlhMTQ3YyBlOWRhMzExMyBiNWYwYjhjMCAnICsKICAgICcwYTYwYjFjZSAxZDdlODE5ZCA3YTQzMWQ3YyA5MGVhMGU1ZicKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ3A1MjEnLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogbnVsbCwKICBwOiAnMDAwMDAxZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZicsCiAgYTogJzAwMDAwMWZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmMnLAogIGI6ICcwMDAwMDA1MSA5NTNlYjk2MSA4ZTFjOWExZiA5MjlhMjFhMCBiNjg1NDBlZSBhMmRhNzI1YiAnICsKICAgICAnOTliMzE1ZjMgYjhiNDg5OTEgOGVmMTA5ZTEgNTYxOTM5NTEgZWM3ZTkzN2IgMTY1MmMwYmQgJyArCiAgICAgJzNiYjFiZjA3IDM1NzNkZjg4IDNkMmMzNGYxIGVmNDUxZmQ0IDZiNTAzZjAwJywKICBuOiAnMDAwMDAxZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZhIDUxODY4NzgzIGJmMmY5NjZiIDdmY2MwMTQ4ICcgKwogICAgICdmNzA5YTVkMCAzYmI1YzliOCA4OTljNDdhZSBiYjZmYjcxZSA5MTM4NjQwOScsCiAgaGFzaDogaGFzaC5zaGE1MTIsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJzAwMDAwMGM2IDg1OGUwNmI3IDA0MDRlOWNkIDllM2VjYjY2IDIzOTViNDQyIDljNjQ4MTM5ICcgKwogICAgJzA1M2ZiNTIxIGY4MjhhZjYwIDZiNGQzZGJhIGExNGI1ZTc3IGVmZTc1OTI4IGZlMWRjMTI3ICcgKwogICAgJ2EyZmZhOGRlIDMzNDhiM2MxIDg1NmE0MjliIGY5N2U3ZTMxIGMyZTViZDY2JywKICAgICcwMDAwMDExOCAzOTI5NmE3OCA5YTNiYzAwNCA1YzhhNWZiNCAyYzdkMWJkOSA5OGY1NDQ0OSAnICsKICAgICc1NzliNDQ2OCAxN2FmYmQxNyAyNzNlNjYyYyA5N2VlNzI5OSA1ZWY0MjY0MCBjNTUwYjkwMSAnICsKICAgICczZmFkMDc2MSAzNTNjNzA4NiBhMjcyYzI0MCA4OGJlOTQ3NiA5ZmQxNjY1MCcKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ2N1cnZlMjU1MTknLCB7CiAgdHlwZTogJ21vbnQnLAogIHByaW1lOiAncDI1NTE5JywKICBwOiAnN2ZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZlZCcsCiAgYTogJzc2ZDA2JywKICBiOiAnMCcsCiAgbjogJzEwMDAwMDAwMDAwMDAwMDAgMDAwMDAwMDAwMDAwMDAwMCAxNGRlZjlkZWEyZjc5Y2Q2IDU4MTI2MzFhNWNmNWQzZWQnLAogIGhhc2g6IGhhc2guc2hhMjU2LAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICc5JwogIF0KfSk7CgpkZWZpbmVDdXJ2ZSgnZWQyNTUxOScsIHsKICB0eXBlOiAnZWR3YXJkcycsCiAgcHJpbWU6ICdwMjU1MTknLAogIHA6ICc3ZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmVkJywKICBhOiAnLTEnLAogIGM6ICcxJywKICAvLyAtMTIxNjY1ICogKDEyMTY2Nl4oLTEpKSAobW9kIFApCiAgZDogJzUyMDM2Y2VlMmI2ZmZlNzMgOGNjNzQwNzk3Nzc5ZTg5OCAwMDcwMGE0ZDQxNDFkOGFiIDc1ZWI0ZGNhMTM1OTc4YTMnLAogIG46ICcxMDAwMDAwMDAwMDAwMDAwIDAwMDAwMDAwMDAwMDAwMDAgMTRkZWY5ZGVhMmY3OWNkNiA1ODEyNjMxYTVjZjVkM2VkJywKICBoYXNoOiBoYXNoLnNoYTI1NiwKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnMjE2OTM2ZDNjZDZlNTNmZWMwYTRlMjMxZmRkNmRjNWM2OTJjYzc2MDk1MjVhN2IyYzk1NjJkNjA4ZjI1ZDUxYScsCgogICAgLy8gNC81CiAgICAnNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY1OCcKICBdCn0pOwoKdmFyIHByZTsKdHJ5IHsKICBwcmUgPSByZXF1aXJlKCcuL3ByZWNvbXB1dGVkL3NlY3AyNTZrMScpOwp9IGNhdGNoIChlKSB7CiAgcHJlID0gdW5kZWZpbmVkOwp9CgpkZWZpbmVDdXJ2ZSgnc2VjcDI1NmsxJywgewogIHR5cGU6ICdzaG9ydCcsCiAgcHJpbWU6ICdrMjU2JywKICBwOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZjMmYnLAogIGE6ICcwJywKICBiOiAnNycsCiAgbjogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGJhYWVkY2U2IGFmNDhhMDNiIGJmZDI1ZThjIGQwMzY0MTQxJywKICBoOiAnMScsCiAgaGFzaDogaGFzaC5zaGEyNTYsCgogIC8vIFByZWNvbXB1dGVkIGVuZG9tb3JwaGlzbQogIGJldGE6ICc3YWU5NmEyYjY1N2MwNzEwNmU2NDQ3OWVhYzM0MzRlOTljZjA0OTc1MTJmNTg5OTVjMTM5NmMyODcxOTUwMWVlJywKICBsYW1iZGE6ICc1MzYzYWQ0Y2MwNWMzMGUwYTUyNjFjMDI4ODEyNjQ1YTEyMmUyMmVhMjA4MTY2NzhkZjAyOTY3YzFiMjNiZDcyJywKICBiYXNpczogWwogICAgewogICAgICBhOiAnMzA4NmQyMjFhN2Q0NmJjZGU4NmM5MGU0OTI4NGViMTUnLAogICAgICBiOiAnLWU0NDM3ZWQ2MDEwZTg4Mjg2ZjU0N2ZhOTBhYmZlNGMzJwogICAgfSwKICAgIHsKICAgICAgYTogJzExNGNhNTBmN2E4ZTJmM2Y2NTdjMTEwOGQ5ZDQ0Y2ZkOCcsCiAgICAgIGI6ICczMDg2ZDIyMWE3ZDQ2YmNkZTg2YzkwZTQ5Mjg0ZWIxNScKICAgIH0KICBdLAoKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnNzliZTY2N2VmOWRjYmJhYzU1YTA2Mjk1Y2U4NzBiMDcwMjliZmNkYjJkY2UyOGQ5NTlmMjgxNWIxNmY4MTc5OCcsCiAgICAnNDgzYWRhNzcyNmEzYzQ2NTVkYTRmYmZjMGUxMTA4YThmZDE3YjQ0OGE2ODU1NDE5OWM0N2QwOGZmYjEwZDRiOCcsCiAgICBwcmUKICBdCn0pOwoKfSx7Ii4uL2VsbGlwdGljIjo1NDMsIi4vcHJlY29tcHV0ZWQvc2VjcDI1NmsxIjo1NTcsImhhc2guanMiOjU2MH1dLDU1MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKdmFyIEtleVBhaXIgPSByZXF1aXJlKCcuL2tleScpOwp2YXIgU2lnbmF0dXJlID0gcmVxdWlyZSgnLi9zaWduYXR1cmUnKTsKCmZ1bmN0aW9uIEVDKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRUMpKQogICAgcmV0dXJuIG5ldyBFQyhvcHRpb25zKTsKCiAgLy8gU2hvcnRjdXQgYGVsbGlwdGljLmVjKGN1cnZlLW5hbWUpYAogIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHsKICAgIGFzc2VydChlbGxpcHRpYy5jdXJ2ZXMuaGFzT3duUHJvcGVydHkob3B0aW9ucyksICdVbmtub3duIGN1cnZlICcgKyBvcHRpb25zKTsKCiAgICBvcHRpb25zID0gZWxsaXB0aWMuY3VydmVzW29wdGlvbnNdOwogIH0KCiAgLy8gU2hvcnRjdXQgZm9yIGBlbGxpcHRpYy5lYyhlbGxpcHRpYy5jdXJ2ZXMuY3VydmVOYW1lKWAKICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIGVsbGlwdGljLmN1cnZlcy5QcmVzZXRDdXJ2ZSkKICAgIG9wdGlvbnMgPSB7IGN1cnZlOiBvcHRpb25zIH07CgogIHRoaXMuY3VydmUgPSBvcHRpb25zLmN1cnZlLmN1cnZlOwogIHRoaXMubiA9IHRoaXMuY3VydmUubjsKICB0aGlzLm5oID0gdGhpcy5uLnVzaHJuKDEpOwogIHRoaXMuZyA9IHRoaXMuY3VydmUuZzsKCiAgLy8gUG9pbnQgb24gY3VydmUKICB0aGlzLmcgPSBvcHRpb25zLmN1cnZlLmc7CiAgdGhpcy5nLnByZWNvbXB1dGUob3B0aW9ucy5jdXJ2ZS5uLmJpdExlbmd0aCgpICsgMSk7CgogIC8vIEhhc2ggZm9yIGZ1bmN0aW9uIGZvciBEUkJHCiAgdGhpcy5oYXNoID0gb3B0aW9ucy5oYXNoIHx8IG9wdGlvbnMuY3VydmUuaGFzaDsKfQptb2R1bGUuZXhwb3J0cyA9IEVDOwoKRUMucHJvdG90eXBlLmtleVBhaXIgPSBmdW5jdGlvbiBrZXlQYWlyKG9wdGlvbnMpIHsKICByZXR1cm4gbmV3IEtleVBhaXIodGhpcywgb3B0aW9ucyk7Cn07CgpFQy5wcm90b3R5cGUua2V5RnJvbVByaXZhdGUgPSBmdW5jdGlvbiBrZXlGcm9tUHJpdmF0ZShwcml2LCBlbmMpIHsKICByZXR1cm4gS2V5UGFpci5mcm9tUHJpdmF0ZSh0aGlzLCBwcml2LCBlbmMpOwp9OwoKRUMucHJvdG90eXBlLmtleUZyb21QdWJsaWMgPSBmdW5jdGlvbiBrZXlGcm9tUHVibGljKHB1YiwgZW5jKSB7CiAgcmV0dXJuIEtleVBhaXIuZnJvbVB1YmxpYyh0aGlzLCBwdWIsIGVuYyk7Cn07CgpFQy5wcm90b3R5cGUuZ2VuS2V5UGFpciA9IGZ1bmN0aW9uIGdlbktleVBhaXIob3B0aW9ucykgewogIGlmICghb3B0aW9ucykKICAgIG9wdGlvbnMgPSB7fTsKCiAgLy8gSW5zdGFudGlhdGUgSG1hY19EUkJHCiAgdmFyIGRyYmcgPSBuZXcgZWxsaXB0aWMuaG1hY0RSQkcoewogICAgaGFzaDogdGhpcy5oYXNoLAogICAgcGVyczogb3B0aW9ucy5wZXJzLAogICAgZW50cm9weTogb3B0aW9ucy5lbnRyb3B5IHx8IGVsbGlwdGljLnJhbmQodGhpcy5oYXNoLmhtYWNTdHJlbmd0aCksCiAgICBub25jZTogdGhpcy5uLnRvQXJyYXkoKQogIH0pOwoKICB2YXIgYnl0ZXMgPSB0aGlzLm4uYnl0ZUxlbmd0aCgpOwogIHZhciBuczIgPSB0aGlzLm4uc3ViKG5ldyBCTigyKSk7CiAgZG8gewogICAgdmFyIHByaXYgPSBuZXcgQk4oZHJiZy5nZW5lcmF0ZShieXRlcykpOwogICAgaWYgKHByaXYuY21wKG5zMikgPiAwKQogICAgICBjb250aW51ZTsKCiAgICBwcml2LmlhZGRuKDEpOwogICAgcmV0dXJuIHRoaXMua2V5RnJvbVByaXZhdGUocHJpdik7CiAgfSB3aGlsZSAodHJ1ZSk7Cn07CgpFQy5wcm90b3R5cGUuX3RydW5jYXRlVG9OID0gZnVuY3Rpb24gdHJ1bmNhdGVUb04obXNnLCB0cnVuY09ubHkpIHsKICB2YXIgZGVsdGEgPSBtc2cuYnl0ZUxlbmd0aCgpICogOCAtIHRoaXMubi5iaXRMZW5ndGgoKTsKICBpZiAoZGVsdGEgPiAwKQogICAgbXNnID0gbXNnLnVzaHJuKGRlbHRhKTsKICBpZiAoIXRydW5jT25seSAmJiBtc2cuY21wKHRoaXMubikgPj0gMCkKICAgIHJldHVybiBtc2cuc3ViKHRoaXMubik7CiAgZWxzZQogICAgcmV0dXJuIG1zZzsKfTsKCkVDLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtc2csIGtleSwgZW5jLCBvcHRpb25zKSB7CiAgaWYgKHR5cGVvZiBlbmMgPT09ICdvYmplY3QnKSB7CiAgICBvcHRpb25zID0gZW5jOwogICAgZW5jID0gbnVsbDsKICB9CiAgaWYgKCFvcHRpb25zKQogICAgb3B0aW9ucyA9IHt9OwoKICBrZXkgPSB0aGlzLmtleUZyb21Qcml2YXRlKGtleSwgZW5jKTsKICBtc2cgPSB0aGlzLl90cnVuY2F0ZVRvTihuZXcgQk4obXNnLCAxNikpOwoKICAvLyBaZXJvLWV4dGVuZCBrZXkgdG8gcHJvdmlkZSBlbm91Z2ggZW50cm9weQogIHZhciBieXRlcyA9IHRoaXMubi5ieXRlTGVuZ3RoKCk7CiAgdmFyIGJrZXkgPSBrZXkuZ2V0UHJpdmF0ZSgpLnRvQXJyYXkoJ2JlJywgYnl0ZXMpOwoKICAvLyBaZXJvLWV4dGVuZCBub25jZSB0byBoYXZlIHRoZSBzYW1lIGJ5dGUgc2l6ZSBhcyBOCiAgdmFyIG5vbmNlID0gbXNnLnRvQXJyYXkoJ2JlJywgYnl0ZXMpOwoKICAvLyBJbnN0YW50aWF0ZSBIbWFjX0RSQkcKICB2YXIgZHJiZyA9IG5ldyBlbGxpcHRpYy5obWFjRFJCRyh7CiAgICBoYXNoOiB0aGlzLmhhc2gsCiAgICBlbnRyb3B5OiBia2V5LAogICAgbm9uY2U6IG5vbmNlLAogICAgcGVyczogb3B0aW9ucy5wZXJzLAogICAgcGVyc0VuYzogb3B0aW9ucy5wZXJzRW5jCiAgfSk7CgogIC8vIE51bWJlciBvZiBieXRlcyB0byBnZW5lcmF0ZQogIHZhciBuczEgPSB0aGlzLm4uc3ViKG5ldyBCTigxKSk7CgogIGZvciAodmFyIGl0ZXIgPSAwOyB0cnVlOyBpdGVyKyspIHsKICAgIHZhciBrID0gb3B0aW9ucy5rID8KICAgICAgICBvcHRpb25zLmsoaXRlcikgOgogICAgICAgIG5ldyBCTihkcmJnLmdlbmVyYXRlKHRoaXMubi5ieXRlTGVuZ3RoKCkpKTsKICAgIGsgPSB0aGlzLl90cnVuY2F0ZVRvTihrLCB0cnVlKTsKICAgIGlmIChrLmNtcG4oMSkgPD0gMCB8fCBrLmNtcChuczEpID49IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIHZhciBrcCA9IHRoaXMuZy5tdWwoayk7CiAgICBpZiAoa3AuaXNJbmZpbml0eSgpKQogICAgICBjb250aW51ZTsKCiAgICB2YXIga3BYID0ga3AuZ2V0WCgpOwogICAgdmFyIHIgPSBrcFgudW1vZCh0aGlzLm4pOwogICAgaWYgKHIuY21wbigwKSA9PT0gMCkKICAgICAgY29udGludWU7CgogICAgdmFyIHMgPSBrLmludm0odGhpcy5uKS5tdWwoci5tdWwoa2V5LmdldFByaXZhdGUoKSkuaWFkZChtc2cpKTsKICAgIHMgPSBzLnVtb2QodGhpcy5uKTsKICAgIGlmIChzLmNtcG4oMCkgPT09IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIHZhciByZWNvdmVyeVBhcmFtID0gKGtwLmdldFkoKS5pc09kZCgpID8gMSA6IDApIHwKICAgICAgICAgICAgICAgICAgICAgICAgKGtwWC5jbXAocikgIT09IDAgPyAyIDogMCk7CgogICAgLy8gVXNlIGNvbXBsZW1lbnQgb2YgYHNgLCBpZiBpdCBpcyA+IGBuIC8gMmAKICAgIGlmIChvcHRpb25zLmNhbm9uaWNhbCAmJiBzLmNtcCh0aGlzLm5oKSA+IDApIHsKICAgICAgcyA9IHRoaXMubi5zdWIocyk7CiAgICAgIHJlY292ZXJ5UGFyYW0gXj0gMTsKICAgIH0KCiAgICByZXR1cm4gbmV3IFNpZ25hdHVyZSh7IHI6IHIsIHM6IHMsIHJlY292ZXJ5UGFyYW06IHJlY292ZXJ5UGFyYW0gfSk7CiAgfQp9OwoKRUMucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtc2csIHNpZ25hdHVyZSwga2V5LCBlbmMpIHsKICBtc2cgPSB0aGlzLl90cnVuY2F0ZVRvTihuZXcgQk4obXNnLCAxNikpOwogIGtleSA9IHRoaXMua2V5RnJvbVB1YmxpYyhrZXksIGVuYyk7CiAgc2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZShzaWduYXR1cmUsICdoZXgnKTsKCiAgLy8gUGVyZm9ybSBwcmltaXRpdmUgdmFsdWVzIHZhbGlkYXRpb24KICB2YXIgciA9IHNpZ25hdHVyZS5yOwogIHZhciBzID0gc2lnbmF0dXJlLnM7CiAgaWYgKHIuY21wbigxKSA8IDAgfHwgci5jbXAodGhpcy5uKSA+PSAwKQogICAgcmV0dXJuIGZhbHNlOwogIGlmIChzLmNtcG4oMSkgPCAwIHx8IHMuY21wKHRoaXMubikgPj0gMCkKICAgIHJldHVybiBmYWxzZTsKCiAgLy8gVmFsaWRhdGUgc2lnbmF0dXJlCiAgdmFyIHNpbnYgPSBzLmludm0odGhpcy5uKTsKICB2YXIgdTEgPSBzaW52Lm11bChtc2cpLnVtb2QodGhpcy5uKTsKICB2YXIgdTIgPSBzaW52Lm11bChyKS51bW9kKHRoaXMubik7CgogIGlmICghdGhpcy5jdXJ2ZS5fbWF4d2VsbFRyaWNrKSB7CiAgICB2YXIgcCA9IHRoaXMuZy5tdWxBZGQodTEsIGtleS5nZXRQdWJsaWMoKSwgdTIpOwogICAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgICByZXR1cm4gZmFsc2U7CgogICAgcmV0dXJuIHAuZ2V0WCgpLnVtb2QodGhpcy5uKS5jbXAocikgPT09IDA7CiAgfQoKICAvLyBOT1RFOiBHcmVnIE1heHdlbGwncyB0cmljaywgaW5zcGlyZWQgYnk6CiAgLy8gaHR0cHM6Ly9naXQuaW8vdmFkM0sKCiAgdmFyIHAgPSB0aGlzLmcuam11bEFkZCh1MSwga2V5LmdldFB1YmxpYygpLCB1Mik7CiAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIGZhbHNlOwoKICAvLyBDb21wYXJlIGBwLnhgIG9mIEphY29iaWFuIHBvaW50IHdpdGggYHJgLAogIC8vIHRoaXMgd2lsbCBkbyBgcC54ID09IHIgKiBwLnpeMmAgaW5zdGVhZCBvZiBtdWx0aXBseWluZyBgcC54YCBieSB0aGUKICAvLyBpbnZlcnNlIG9mIGBwLnpeMmAKICByZXR1cm4gcC5lcVhUb1Aocik7Cn07CgpFQy5wcm90b3R5cGUucmVjb3ZlclB1YktleSA9IGZ1bmN0aW9uKG1zZywgc2lnbmF0dXJlLCBqLCBlbmMpIHsKICBhc3NlcnQoKDMgJiBqKSA9PT0gaiwgJ1RoZSByZWNvdmVyeSBwYXJhbSBpcyBtb3JlIHRoYW4gdHdvIGJpdHMnKTsKICBzaWduYXR1cmUgPSBuZXcgU2lnbmF0dXJlKHNpZ25hdHVyZSwgZW5jKTsKCiAgdmFyIG4gPSB0aGlzLm47CiAgdmFyIGUgPSBuZXcgQk4obXNnKTsKICB2YXIgciA9IHNpZ25hdHVyZS5yOwogIHZhciBzID0gc2lnbmF0dXJlLnM7CgogIC8vIEEgc2V0IExTQiBzaWduaWZpZXMgdGhhdCB0aGUgeS1jb29yZGluYXRlIGlzIG9kZAogIHZhciBpc1lPZGQgPSBqICYgMTsKICB2YXIgaXNTZWNvbmRLZXkgPSBqID4+IDE7CiAgaWYgKHIuY21wKHRoaXMuY3VydmUucC51bW9kKHRoaXMuY3VydmUubikpID49IDAgJiYgaXNTZWNvbmRLZXkpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmaW5kIHNlbmNvbmQga2V5IGNhbmRpbmF0ZScpOwoKICAvLyAxLjEuIExldCB4ID0gciArIGpuLgogIGlmIChpc1NlY29uZEtleSkKICAgIHIgPSB0aGlzLmN1cnZlLnBvaW50RnJvbVgoci5hZGQodGhpcy5jdXJ2ZS5uKSwgaXNZT2RkKTsKICBlbHNlCiAgICByID0gdGhpcy5jdXJ2ZS5wb2ludEZyb21YKHIsIGlzWU9kZCk7CgogIHZhciBlTmVnID0gbi5zdWIoZSk7CgogIC8vIDEuNi4xIENvbXB1dGUgUSA9IHJeLTEgKHNSIC0gIGVHKQogIC8vICAgICAgICAgICAgICAgUSA9IHJeLTEgKHNSICsgLWVHKQogIHZhciBySW52ID0gc2lnbmF0dXJlLnIuaW52bShuKTsKICByZXR1cm4gdGhpcy5nLm11bEFkZChlTmVnLCByLCBzKS5tdWwockludik7Cn07CgpFQy5wcm90b3R5cGUuZ2V0S2V5UmVjb3ZlcnlQYXJhbSA9IGZ1bmN0aW9uKGUsIHNpZ25hdHVyZSwgUSwgZW5jKSB7CiAgc2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZShzaWduYXR1cmUsIGVuYyk7CiAgaWYgKHNpZ25hdHVyZS5yZWNvdmVyeVBhcmFtICE9PSBudWxsKQogICAgcmV0dXJuIHNpZ25hdHVyZS5yZWNvdmVyeVBhcmFtOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgdmFyIFFwcmltZTsKICAgIHRyeSB7CiAgICAgIFFwcmltZSA9IHRoaXMucmVjb3ZlclB1YktleShlLCBzaWduYXR1cmUsIGkpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBpZiAoUXByaW1lLmVxKFEpKQogICAgICByZXR1cm4gaTsKICB9CiAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmluZCB2YWxpZCByZWNvdmVyeSBmYWN0b3InKTsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6NTQzLCIuL2tleSI6NTUxLCIuL3NpZ25hdHVyZSI6NTUyLCJibi5qcyI6NTQxfV0sNTUxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKCmZ1bmN0aW9uIEtleVBhaXIoZWMsIG9wdGlvbnMpIHsKICB0aGlzLmVjID0gZWM7CiAgdGhpcy5wcml2ID0gbnVsbDsKICB0aGlzLnB1YiA9IG51bGw7CgogIC8vIEtleVBhaXIoZWMsIHsgcHJpdjogLi4uLCBwdWI6IC4uLiB9KQogIGlmIChvcHRpb25zLnByaXYpCiAgICB0aGlzLl9pbXBvcnRQcml2YXRlKG9wdGlvbnMucHJpdiwgb3B0aW9ucy5wcml2RW5jKTsKICBpZiAob3B0aW9ucy5wdWIpCiAgICB0aGlzLl9pbXBvcnRQdWJsaWMob3B0aW9ucy5wdWIsIG9wdGlvbnMucHViRW5jKTsKfQptb2R1bGUuZXhwb3J0cyA9IEtleVBhaXI7CgpLZXlQYWlyLmZyb21QdWJsaWMgPSBmdW5jdGlvbiBmcm9tUHVibGljKGVjLCBwdWIsIGVuYykgewogIGlmIChwdWIgaW5zdGFuY2VvZiBLZXlQYWlyKQogICAgcmV0dXJuIHB1YjsKCiAgcmV0dXJuIG5ldyBLZXlQYWlyKGVjLCB7CiAgICBwdWI6IHB1YiwKICAgIHB1YkVuYzogZW5jCiAgfSk7Cn07CgpLZXlQYWlyLmZyb21Qcml2YXRlID0gZnVuY3Rpb24gZnJvbVByaXZhdGUoZWMsIHByaXYsIGVuYykgewogIGlmIChwcml2IGluc3RhbmNlb2YgS2V5UGFpcikKICAgIHJldHVybiBwcml2OwoKICByZXR1cm4gbmV3IEtleVBhaXIoZWMsIHsKICAgIHByaXY6IHByaXYsCiAgICBwcml2RW5jOiBlbmMKICB9KTsKfTsKCktleVBhaXIucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgdmFyIHB1YiA9IHRoaXMuZ2V0UHVibGljKCk7CgogIGlmIChwdWIuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHsgcmVzdWx0OiBmYWxzZSwgcmVhc29uOiAnSW52YWxpZCBwdWJsaWMga2V5JyB9OwogIGlmICghcHViLnZhbGlkYXRlKCkpCiAgICByZXR1cm4geyByZXN1bHQ6IGZhbHNlLCByZWFzb246ICdQdWJsaWMga2V5IGlzIG5vdCBhIHBvaW50JyB9OwogIGlmICghcHViLm11bCh0aGlzLmVjLmN1cnZlLm4pLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB7IHJlc3VsdDogZmFsc2UsIHJlYXNvbjogJ1B1YmxpYyBrZXkgKiBOICE9IE8nIH07CgogIHJldHVybiB7IHJlc3VsdDogdHJ1ZSwgcmVhc29uOiBudWxsIH07Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5nZXRQdWJsaWMgPSBmdW5jdGlvbiBnZXRQdWJsaWMoY29tcGFjdCwgZW5jKSB7CiAgLy8gY29tcGFjdCBpcyBvcHRpb25hbCBhcmd1bWVudAogIGlmICh0eXBlb2YgY29tcGFjdCA9PT0gJ3N0cmluZycpIHsKICAgIGVuYyA9IGNvbXBhY3Q7CiAgICBjb21wYWN0ID0gbnVsbDsKICB9CgogIGlmICghdGhpcy5wdWIpCiAgICB0aGlzLnB1YiA9IHRoaXMuZWMuZy5tdWwodGhpcy5wcml2KTsKCiAgaWYgKCFlbmMpCiAgICByZXR1cm4gdGhpcy5wdWI7CgogIHJldHVybiB0aGlzLnB1Yi5lbmNvZGUoZW5jLCBjb21wYWN0KTsKfTsKCktleVBhaXIucHJvdG90eXBlLmdldFByaXZhdGUgPSBmdW5jdGlvbiBnZXRQcml2YXRlKGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHRoaXMucHJpdi50b1N0cmluZygxNiwgMik7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMucHJpdjsKfTsKCktleVBhaXIucHJvdG90eXBlLl9pbXBvcnRQcml2YXRlID0gZnVuY3Rpb24gX2ltcG9ydFByaXZhdGUoa2V5LCBlbmMpIHsKICB0aGlzLnByaXYgPSBuZXcgQk4oa2V5LCBlbmMgfHwgMTYpOwoKICAvLyBFbnN1cmUgdGhhdCB0aGUgcHJpdiB3b24ndCBiZSBiaWdnZXIgdGhhbiBuLCBvdGhlcndpc2Ugd2UgbWF5IGZhaWwKICAvLyBpbiBmaXhlZCBtdWx0aXBsaWNhdGlvbiBtZXRob2QKICB0aGlzLnByaXYgPSB0aGlzLnByaXYudW1vZCh0aGlzLmVjLmN1cnZlLm4pOwp9OwoKS2V5UGFpci5wcm90b3R5cGUuX2ltcG9ydFB1YmxpYyA9IGZ1bmN0aW9uIF9pbXBvcnRQdWJsaWMoa2V5LCBlbmMpIHsKICBpZiAoa2V5LnggfHwga2V5LnkpIHsKICAgIHRoaXMucHViID0gdGhpcy5lYy5jdXJ2ZS5wb2ludChrZXkueCwga2V5LnkpOwogICAgcmV0dXJuOwogIH0KICB0aGlzLnB1YiA9IHRoaXMuZWMuY3VydmUuZGVjb2RlUG9pbnQoa2V5LCBlbmMpOwp9OwoKLy8gRUNESApLZXlQYWlyLnByb3RvdHlwZS5kZXJpdmUgPSBmdW5jdGlvbiBkZXJpdmUocHViKSB7CiAgcmV0dXJuIHB1Yi5tdWwodGhpcy5wcml2KS5nZXRYKCk7Cn07CgovLyBFQ0RTQQpLZXlQYWlyLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtc2csIGVuYywgb3B0aW9ucykgewogIHJldHVybiB0aGlzLmVjLnNpZ24obXNnLCB0aGlzLCBlbmMsIG9wdGlvbnMpOwp9OwoKS2V5UGFpci5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1zZywgc2lnbmF0dXJlKSB7CiAgcmV0dXJuIHRoaXMuZWMudmVyaWZ5KG1zZywgc2lnbmF0dXJlLCB0aGlzKTsKfTsKCktleVBhaXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogIHJldHVybiAnPEtleSBwcml2OiAnICsgKHRoaXMucHJpdiAmJiB0aGlzLnByaXYudG9TdHJpbmcoMTYsIDIpKSArCiAgICAgICAgICcgcHViOiAnICsgKHRoaXMucHViICYmIHRoaXMucHViLmluc3BlY3QoKSkgKyAnID4nOwp9OwoKfSx7ImJuLmpzIjo1NDF9XSw1NTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwoKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBTaWduYXR1cmUob3B0aW9ucywgZW5jKSB7CiAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBTaWduYXR1cmUpCiAgICByZXR1cm4gb3B0aW9uczsKCiAgaWYgKHRoaXMuX2ltcG9ydERFUihvcHRpb25zLCBlbmMpKQogICAgcmV0dXJuOwoKICBhc3NlcnQob3B0aW9ucy5yICYmIG9wdGlvbnMucywgJ1NpZ25hdHVyZSB3aXRob3V0IHIgb3IgcycpOwogIHRoaXMuciA9IG5ldyBCTihvcHRpb25zLnIsIDE2KTsKICB0aGlzLnMgPSBuZXcgQk4ob3B0aW9ucy5zLCAxNik7CiAgaWYgKG9wdGlvbnMucmVjb3ZlcnlQYXJhbSA9PT0gdW5kZWZpbmVkKQogICAgdGhpcy5yZWNvdmVyeVBhcmFtID0gbnVsbDsKICBlbHNlCiAgICB0aGlzLnJlY292ZXJ5UGFyYW0gPSBvcHRpb25zLnJlY292ZXJ5UGFyYW07Cn0KbW9kdWxlLmV4cG9ydHMgPSBTaWduYXR1cmU7CgpmdW5jdGlvbiBQb3NpdGlvbigpIHsKICB0aGlzLnBsYWNlID0gMDsKfQoKZnVuY3Rpb24gZ2V0TGVuZ3RoKGJ1ZiwgcCkgewogIHZhciBpbml0aWFsID0gYnVmW3AucGxhY2UrK107CiAgaWYgKCEoaW5pdGlhbCAmIDB4ODApKSB7CiAgICByZXR1cm4gaW5pdGlhbDsKICB9CiAgdmFyIG9jdGV0TGVuID0gaW5pdGlhbCAmIDB4ZjsKICB2YXIgdmFsID0gMDsKICBmb3IgKHZhciBpID0gMCwgb2ZmID0gcC5wbGFjZTsgaSA8IG9jdGV0TGVuOyBpKyssIG9mZisrKSB7CiAgICB2YWwgPDw9IDg7CiAgICB2YWwgfD0gYnVmW29mZl07CiAgfQogIHAucGxhY2UgPSBvZmY7CiAgcmV0dXJuIHZhbDsKfQoKZnVuY3Rpb24gcm1QYWRkaW5nKGJ1ZikgewogIHZhciBpID0gMDsKICB2YXIgbGVuID0gYnVmLmxlbmd0aCAtIDE7CiAgd2hpbGUgKCFidWZbaV0gJiYgIShidWZbaSArIDFdICYgMHg4MCkgJiYgaSA8IGxlbikgewogICAgaSsrOwogIH0KICBpZiAoaSA9PT0gMCkgewogICAgcmV0dXJuIGJ1ZjsKICB9CiAgcmV0dXJuIGJ1Zi5zbGljZShpKTsKfQoKU2lnbmF0dXJlLnByb3RvdHlwZS5faW1wb3J0REVSID0gZnVuY3Rpb24gX2ltcG9ydERFUihkYXRhLCBlbmMpIHsKICBkYXRhID0gdXRpbHMudG9BcnJheShkYXRhLCBlbmMpOwogIHZhciBwID0gbmV3IFBvc2l0aW9uKCk7CiAgaWYgKGRhdGFbcC5wbGFjZSsrXSAhPT0gMHgzMCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgbGVuID0gZ2V0TGVuZ3RoKGRhdGEsIHApOwogIGlmICgobGVuICsgcC5wbGFjZSkgIT09IGRhdGEubGVuZ3RoKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmIChkYXRhW3AucGxhY2UrK10gIT09IDB4MDIpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdmFyIHJsZW4gPSBnZXRMZW5ndGgoZGF0YSwgcCk7CiAgdmFyIHIgPSBkYXRhLnNsaWNlKHAucGxhY2UsIHJsZW4gKyBwLnBsYWNlKTsKICBwLnBsYWNlICs9IHJsZW47CiAgaWYgKGRhdGFbcC5wbGFjZSsrXSAhPT0gMHgwMikgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgc2xlbiA9IGdldExlbmd0aChkYXRhLCBwKTsKICBpZiAoZGF0YS5sZW5ndGggIT09IHNsZW4gKyBwLnBsYWNlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHZhciBzID0gZGF0YS5zbGljZShwLnBsYWNlLCBzbGVuICsgcC5wbGFjZSk7CiAgaWYgKHJbMF0gPT09IDAgJiYgKHJbMV0gJiAweDgwKSkgewogICAgciA9IHIuc2xpY2UoMSk7CiAgfQogIGlmIChzWzBdID09PSAwICYmIChzWzFdICYgMHg4MCkpIHsKICAgIHMgPSBzLnNsaWNlKDEpOwogIH0KCiAgdGhpcy5yID0gbmV3IEJOKHIpOwogIHRoaXMucyA9IG5ldyBCTihzKTsKICB0aGlzLnJlY292ZXJ5UGFyYW0gPSBudWxsOwoKICByZXR1cm4gdHJ1ZTsKfTsKCmZ1bmN0aW9uIGNvbnN0cnVjdExlbmd0aChhcnIsIGxlbikgewogIGlmIChsZW4gPCAweDgwKSB7CiAgICBhcnIucHVzaChsZW4pOwogICAgcmV0dXJuOwogIH0KICB2YXIgb2N0ZXRzID0gMSArIChNYXRoLmxvZyhsZW4pIC8gTWF0aC5MTjIgPj4+IDMpOwogIGFyci5wdXNoKG9jdGV0cyB8IDB4ODApOwogIHdoaWxlICgtLW9jdGV0cykgewogICAgYXJyLnB1c2goKGxlbiA+Pj4gKG9jdGV0cyA8PCAzKSkgJiAweGZmKTsKICB9CiAgYXJyLnB1c2gobGVuKTsKfQoKU2lnbmF0dXJlLnByb3RvdHlwZS50b0RFUiA9IGZ1bmN0aW9uIHRvREVSKGVuYykgewogIHZhciByID0gdGhpcy5yLnRvQXJyYXkoKTsKICB2YXIgcyA9IHRoaXMucy50b0FycmF5KCk7CgogIC8vIFBhZCB2YWx1ZXMKICBpZiAoclswXSAmIDB4ODApCiAgICByID0gWyAwIF0uY29uY2F0KHIpOwogIC8vIFBhZCB2YWx1ZXMKICBpZiAoc1swXSAmIDB4ODApCiAgICBzID0gWyAwIF0uY29uY2F0KHMpOwoKICByID0gcm1QYWRkaW5nKHIpOwogIHMgPSBybVBhZGRpbmcocyk7CgogIHdoaWxlICghc1swXSAmJiAhKHNbMV0gJiAweDgwKSkgewogICAgcyA9IHMuc2xpY2UoMSk7CiAgfQogIHZhciBhcnIgPSBbIDB4MDIgXTsKICBjb25zdHJ1Y3RMZW5ndGgoYXJyLCByLmxlbmd0aCk7CiAgYXJyID0gYXJyLmNvbmNhdChyKTsKICBhcnIucHVzaCgweDAyKTsKICBjb25zdHJ1Y3RMZW5ndGgoYXJyLCBzLmxlbmd0aCk7CiAgdmFyIGJhY2tIYWxmID0gYXJyLmNvbmNhdChzKTsKICB2YXIgcmVzID0gWyAweDMwIF07CiAgY29uc3RydWN0TGVuZ3RoKHJlcywgYmFja0hhbGYubGVuZ3RoKTsKICByZXMgPSByZXMuY29uY2F0KGJhY2tIYWxmKTsKICByZXR1cm4gdXRpbHMuZW5jb2RlKHJlcywgZW5jKTsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6NTQzLCJibi5qcyI6NTQxfV0sNTUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGhhc2ggPSByZXF1aXJlKCdoYXNoLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0Owp2YXIgcGFyc2VCeXRlcyA9IHV0aWxzLnBhcnNlQnl0ZXM7CnZhciBLZXlQYWlyID0gcmVxdWlyZSgnLi9rZXknKTsKdmFyIFNpZ25hdHVyZSA9IHJlcXVpcmUoJy4vc2lnbmF0dXJlJyk7CgpmdW5jdGlvbiBFRERTQShjdXJ2ZSkgewogIGFzc2VydChjdXJ2ZSA9PT0gJ2VkMjU1MTknLCAnb25seSB0ZXN0ZWQgd2l0aCBlZDI1NTE5IHNvIGZhcicpOwoKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRUREU0EpKQogICAgcmV0dXJuIG5ldyBFRERTQShjdXJ2ZSk7CgogIHZhciBjdXJ2ZSA9IGVsbGlwdGljLmN1cnZlc1tjdXJ2ZV0uY3VydmU7CiAgdGhpcy5jdXJ2ZSA9IGN1cnZlOwogIHRoaXMuZyA9IGN1cnZlLmc7CiAgdGhpcy5nLnByZWNvbXB1dGUoY3VydmUubi5iaXRMZW5ndGgoKSArIDEpOwoKICB0aGlzLnBvaW50Q2xhc3MgPSBjdXJ2ZS5wb2ludCgpLmNvbnN0cnVjdG9yOwogIHRoaXMuZW5jb2RpbmdMZW5ndGggPSBNYXRoLmNlaWwoY3VydmUubi5iaXRMZW5ndGgoKSAvIDgpOwogIHRoaXMuaGFzaCA9IGhhc2guc2hhNTEyOwp9Cgptb2R1bGUuZXhwb3J0cyA9IEVERFNBOwoKLyoqCiogQHBhcmFtIHtBcnJheXxTdHJpbmd9IG1lc3NhZ2UgLSBtZXNzYWdlIGJ5dGVzCiogQHBhcmFtIHtBcnJheXxTdHJpbmd8S2V5UGFpcn0gc2VjcmV0IC0gc2VjcmV0IGJ5dGVzIG9yIGEga2V5cGFpcgoqIEByZXR1cm5zIHtTaWduYXR1cmV9IC0gc2lnbmF0dXJlCiovCkVERFNBLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtZXNzYWdlLCBzZWNyZXQpIHsKICBtZXNzYWdlID0gcGFyc2VCeXRlcyhtZXNzYWdlKTsKICB2YXIga2V5ID0gdGhpcy5rZXlGcm9tU2VjcmV0KHNlY3JldCk7CiAgdmFyIHIgPSB0aGlzLmhhc2hJbnQoa2V5Lm1lc3NhZ2VQcmVmaXgoKSwgbWVzc2FnZSk7CiAgdmFyIFIgPSB0aGlzLmcubXVsKHIpOwogIHZhciBSZW5jb2RlZCA9IHRoaXMuZW5jb2RlUG9pbnQoUik7CiAgdmFyIHNfID0gdGhpcy5oYXNoSW50KFJlbmNvZGVkLCBrZXkucHViQnl0ZXMoKSwgbWVzc2FnZSkKICAgICAgICAgICAgICAgLm11bChrZXkucHJpdigpKTsKICB2YXIgUyA9IHIuYWRkKHNfKS51bW9kKHRoaXMuY3VydmUubik7CiAgcmV0dXJuIHRoaXMubWFrZVNpZ25hdHVyZSh7IFI6IFIsIFM6IFMsIFJlbmNvZGVkOiBSZW5jb2RlZCB9KTsKfTsKCi8qKgoqIEBwYXJhbSB7QXJyYXl9IG1lc3NhZ2UgLSBtZXNzYWdlIGJ5dGVzCiogQHBhcmFtIHtBcnJheXxTdHJpbmd8U2lnbmF0dXJlfSBzaWcgLSBzaWcgYnl0ZXMKKiBAcGFyYW0ge0FycmF5fFN0cmluZ3xQb2ludHxLZXlQYWlyfSBwdWIgLSBwdWJsaWMga2V5CiogQHJldHVybnMge0Jvb2xlYW59IC0gdHJ1ZSBpZiBwdWJsaWMga2V5IG1hdGNoZXMgc2lnIG9mIG1lc3NhZ2UKKi8KRUREU0EucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlLCBzaWcsIHB1YikgewogIG1lc3NhZ2UgPSBwYXJzZUJ5dGVzKG1lc3NhZ2UpOwogIHNpZyA9IHRoaXMubWFrZVNpZ25hdHVyZShzaWcpOwogIHZhciBrZXkgPSB0aGlzLmtleUZyb21QdWJsaWMocHViKTsKICB2YXIgaCA9IHRoaXMuaGFzaEludChzaWcuUmVuY29kZWQoKSwga2V5LnB1YkJ5dGVzKCksIG1lc3NhZ2UpOwogIHZhciBTRyA9IHRoaXMuZy5tdWwoc2lnLlMoKSk7CiAgdmFyIFJwbHVzQWggPSBzaWcuUigpLmFkZChrZXkucHViKCkubXVsKGgpKTsKICByZXR1cm4gUnBsdXNBaC5lcShTRyk7Cn07CgpFRERTQS5wcm90b3R5cGUuaGFzaEludCA9IGZ1bmN0aW9uIGhhc2hJbnQoKSB7CiAgdmFyIGhhc2ggPSB0aGlzLmhhc2goKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykKICAgIGhhc2gudXBkYXRlKGFyZ3VtZW50c1tpXSk7CiAgcmV0dXJuIHV0aWxzLmludEZyb21MRShoYXNoLmRpZ2VzdCgpKS51bW9kKHRoaXMuY3VydmUubik7Cn07CgpFRERTQS5wcm90b3R5cGUua2V5RnJvbVB1YmxpYyA9IGZ1bmN0aW9uIGtleUZyb21QdWJsaWMocHViKSB7CiAgcmV0dXJuIEtleVBhaXIuZnJvbVB1YmxpYyh0aGlzLCBwdWIpOwp9OwoKRUREU0EucHJvdG90eXBlLmtleUZyb21TZWNyZXQgPSBmdW5jdGlvbiBrZXlGcm9tU2VjcmV0KHNlY3JldCkgewogIHJldHVybiBLZXlQYWlyLmZyb21TZWNyZXQodGhpcywgc2VjcmV0KTsKfTsKCkVERFNBLnByb3RvdHlwZS5tYWtlU2lnbmF0dXJlID0gZnVuY3Rpb24gbWFrZVNpZ25hdHVyZShzaWcpIHsKICBpZiAoc2lnIGluc3RhbmNlb2YgU2lnbmF0dXJlKQogICAgcmV0dXJuIHNpZzsKICByZXR1cm4gbmV3IFNpZ25hdHVyZSh0aGlzLCBzaWcpOwp9OwoKLyoqCiogKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtam9zZWZzc29uLWVkZHNhLWVkMjU1MTktMDMjc2VjdGlvbi01LjIKKgoqIEVERFNBIGRlZmluZXMgbWV0aG9kcyBmb3IgZW5jb2RpbmcgYW5kIGRlY29kaW5nIHBvaW50cyBhbmQgaW50ZWdlcnMuIFRoZXNlIGFyZQoqIGhlbHBlciBjb252ZW5pZW5jZSBtZXRob2RzLCB0aGF0IHBhc3MgYWxvbmcgdG8gdXRpbGl0eSBmdW5jdGlvbnMgaW1wbGllZAoqIHBhcmFtZXRlcnMuCioKKi8KRUREU0EucHJvdG90eXBlLmVuY29kZVBvaW50ID0gZnVuY3Rpb24gZW5jb2RlUG9pbnQocG9pbnQpIHsKICB2YXIgZW5jID0gcG9pbnQuZ2V0WSgpLnRvQXJyYXkoJ2xlJywgdGhpcy5lbmNvZGluZ0xlbmd0aCk7CiAgZW5jW3RoaXMuZW5jb2RpbmdMZW5ndGggLSAxXSB8PSBwb2ludC5nZXRYKCkuaXNPZGQoKSA/IDB4ODAgOiAwOwogIHJldHVybiBlbmM7Cn07CgpFRERTQS5wcm90b3R5cGUuZGVjb2RlUG9pbnQgPSBmdW5jdGlvbiBkZWNvZGVQb2ludChieXRlcykgewogIGJ5dGVzID0gdXRpbHMucGFyc2VCeXRlcyhieXRlcyk7CgogIHZhciBsYXN0SXggPSBieXRlcy5sZW5ndGggLSAxOwogIHZhciBub3JtZWQgPSBieXRlcy5zbGljZSgwLCBsYXN0SXgpLmNvbmNhdChieXRlc1tsYXN0SXhdICYgfjB4ODApOwogIHZhciB4SXNPZGQgPSAoYnl0ZXNbbGFzdEl4XSAmIDB4ODApICE9PSAwOwoKICB2YXIgeSA9IHV0aWxzLmludEZyb21MRShub3JtZWQpOwogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50RnJvbVkoeSwgeElzT2RkKTsKfTsKCkVERFNBLnByb3RvdHlwZS5lbmNvZGVJbnQgPSBmdW5jdGlvbiBlbmNvZGVJbnQobnVtKSB7CiAgcmV0dXJuIG51bS50b0FycmF5KCdsZScsIHRoaXMuZW5jb2RpbmdMZW5ndGgpOwp9OwoKRUREU0EucHJvdG90eXBlLmRlY29kZUludCA9IGZ1bmN0aW9uIGRlY29kZUludChieXRlcykgewogIHJldHVybiB1dGlscy5pbnRGcm9tTEUoYnl0ZXMpOwp9OwoKRUREU0EucHJvdG90eXBlLmlzUG9pbnQgPSBmdW5jdGlvbiBpc1BvaW50KHZhbCkgewogIHJldHVybiB2YWwgaW5zdGFuY2VvZiB0aGlzLnBvaW50Q2xhc3M7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjU0MywiLi9rZXkiOjU1NCwiLi9zaWduYXR1cmUiOjU1NSwiaGFzaC5qcyI6NTYwfV0sNTU0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CnZhciBwYXJzZUJ5dGVzID0gdXRpbHMucGFyc2VCeXRlczsKdmFyIGNhY2hlZFByb3BlcnR5ID0gdXRpbHMuY2FjaGVkUHJvcGVydHk7CgovKioKKiBAcGFyYW0ge0VERFNBfSBlZGRzYSAtIGluc3RhbmNlCiogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIHB1YmxpYy9wcml2YXRlIGtleSBwYXJhbWV0ZXJzCioKKiBAcGFyYW0ge0FycmF5PEJ5dGU+fSBbcGFyYW1zLnNlY3JldF0gLSBzZWNyZXQgc2VlZCBieXRlcwoqIEBwYXJhbSB7UG9pbnR9IFtwYXJhbXMucHViXSAtIHB1YmxpYyBrZXkgcG9pbnQgKGFrYSBgQWAgaW4gZWRkc2EgdGVybXMpCiogQHBhcmFtIHtBcnJheTxCeXRlPn0gW3BhcmFtcy5wdWJdIC0gcHVibGljIGtleSBwb2ludCBlbmNvZGVkIGFzIGJ5dGVzCioKKi8KZnVuY3Rpb24gS2V5UGFpcihlZGRzYSwgcGFyYW1zKSB7CiAgdGhpcy5lZGRzYSA9IGVkZHNhOwogIHRoaXMuX3NlY3JldCA9IHBhcnNlQnl0ZXMocGFyYW1zLnNlY3JldCk7CiAgaWYgKGVkZHNhLmlzUG9pbnQocGFyYW1zLnB1YikpCiAgICB0aGlzLl9wdWIgPSBwYXJhbXMucHViOwogIGVsc2UKICAgIHRoaXMuX3B1YkJ5dGVzID0gcGFyc2VCeXRlcyhwYXJhbXMucHViKTsKfQoKS2V5UGFpci5mcm9tUHVibGljID0gZnVuY3Rpb24gZnJvbVB1YmxpYyhlZGRzYSwgcHViKSB7CiAgaWYgKHB1YiBpbnN0YW5jZW9mIEtleVBhaXIpCiAgICByZXR1cm4gcHViOwogIHJldHVybiBuZXcgS2V5UGFpcihlZGRzYSwgeyBwdWI6IHB1YiB9KTsKfTsKCktleVBhaXIuZnJvbVNlY3JldCA9IGZ1bmN0aW9uIGZyb21TZWNyZXQoZWRkc2EsIHNlY3JldCkgewogIGlmIChzZWNyZXQgaW5zdGFuY2VvZiBLZXlQYWlyKQogICAgcmV0dXJuIHNlY3JldDsKICByZXR1cm4gbmV3IEtleVBhaXIoZWRkc2EsIHsgc2VjcmV0OiBzZWNyZXQgfSk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5zZWNyZXQgPSBmdW5jdGlvbiBzZWNyZXQoKSB7CiAgcmV0dXJuIHRoaXMuX3NlY3JldDsKfTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsICdwdWJCeXRlcycsIGZ1bmN0aW9uIHB1YkJ5dGVzKCkgewogIHJldHVybiB0aGlzLmVkZHNhLmVuY29kZVBvaW50KHRoaXMucHViKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsICdwdWInLCBmdW5jdGlvbiBwdWIoKSB7CiAgaWYgKHRoaXMuX3B1YkJ5dGVzKQogICAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlUG9pbnQodGhpcy5fcHViQnl0ZXMpOwogIHJldHVybiB0aGlzLmVkZHNhLmcubXVsKHRoaXMucHJpdigpKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShLZXlQYWlyLCAncHJpdkJ5dGVzJywgZnVuY3Rpb24gcHJpdkJ5dGVzKCkgewogIHZhciBlZGRzYSA9IHRoaXMuZWRkc2E7CiAgdmFyIGhhc2ggPSB0aGlzLmhhc2goKTsKICB2YXIgbGFzdEl4ID0gZWRkc2EuZW5jb2RpbmdMZW5ndGggLSAxOwoKICB2YXIgYSA9IGhhc2guc2xpY2UoMCwgZWRkc2EuZW5jb2RpbmdMZW5ndGgpOwogIGFbMF0gJj0gMjQ4OwogIGFbbGFzdEl4XSAmPSAxMjc7CiAgYVtsYXN0SXhdIHw9IDY0OwoKICByZXR1cm4gYTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShLZXlQYWlyLCAncHJpdicsIGZ1bmN0aW9uIHByaXYoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlSW50KHRoaXMucHJpdkJ5dGVzKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsICdoYXNoJywgZnVuY3Rpb24gaGFzaCgpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5oYXNoKCkudXBkYXRlKHRoaXMuc2VjcmV0KCkpLmRpZ2VzdCgpOwp9KTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsICdtZXNzYWdlUHJlZml4JywgZnVuY3Rpb24gbWVzc2FnZVByZWZpeCgpIHsKICByZXR1cm4gdGhpcy5oYXNoKCkuc2xpY2UodGhpcy5lZGRzYS5lbmNvZGluZ0xlbmd0aCk7Cn0pOwoKS2V5UGFpci5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ24obWVzc2FnZSkgewogIGFzc2VydCh0aGlzLl9zZWNyZXQsICdLZXlQYWlyIGNhbiBvbmx5IHZlcmlmeScpOwogIHJldHVybiB0aGlzLmVkZHNhLnNpZ24obWVzc2FnZSwgdGhpcyk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSwgc2lnKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EudmVyaWZ5KG1lc3NhZ2UsIHNpZywgdGhpcyk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5nZXRTZWNyZXQgPSBmdW5jdGlvbiBnZXRTZWNyZXQoZW5jKSB7CiAgYXNzZXJ0KHRoaXMuX3NlY3JldCwgJ0tleVBhaXIgaXMgcHVibGljIG9ubHknKTsKICByZXR1cm4gdXRpbHMuZW5jb2RlKHRoaXMuc2VjcmV0KCksIGVuYyk7Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5nZXRQdWJsaWMgPSBmdW5jdGlvbiBnZXRQdWJsaWMoZW5jKSB7CiAgcmV0dXJuIHV0aWxzLmVuY29kZSh0aGlzLnB1YkJ5dGVzKCksIGVuYyk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IEtleVBhaXI7Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjU0M31dLDU1NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0Owp2YXIgY2FjaGVkUHJvcGVydHkgPSB1dGlscy5jYWNoZWRQcm9wZXJ0eTsKdmFyIHBhcnNlQnl0ZXMgPSB1dGlscy5wYXJzZUJ5dGVzOwoKLyoqCiogQHBhcmFtIHtFRERTQX0gZWRkc2EgLSBlZGRzYSBpbnN0YW5jZQoqIEBwYXJhbSB7QXJyYXk8Qnl0ZXM+fE9iamVjdH0gc2lnIC0KKiBAcGFyYW0ge0FycmF5PEJ5dGVzPnxQb2ludH0gW3NpZy5SXSAtIFIgcG9pbnQgYXMgUG9pbnQgb3IgYnl0ZXMKKiBAcGFyYW0ge0FycmF5PEJ5dGVzPnxibn0gW3NpZy5TXSAtIFMgc2NhbGFyIGFzIGJuIG9yIGJ5dGVzCiogQHBhcmFtIHtBcnJheTxCeXRlcz59IFtzaWcuUmVuY29kZWRdIC0gUiBwb2ludCBlbmNvZGVkCiogQHBhcmFtIHtBcnJheTxCeXRlcz59IFtzaWcuU2VuY29kZWRdIC0gUyBzY2FsYXIgZW5jb2RlZAoqLwpmdW5jdGlvbiBTaWduYXR1cmUoZWRkc2EsIHNpZykgewogIHRoaXMuZWRkc2EgPSBlZGRzYTsKCiAgaWYgKHR5cGVvZiBzaWcgIT09ICdvYmplY3QnKQogICAgc2lnID0gcGFyc2VCeXRlcyhzaWcpOwoKICBpZiAoQXJyYXkuaXNBcnJheShzaWcpKSB7CiAgICBzaWcgPSB7CiAgICAgIFI6IHNpZy5zbGljZSgwLCBlZGRzYS5lbmNvZGluZ0xlbmd0aCksCiAgICAgIFM6IHNpZy5zbGljZShlZGRzYS5lbmNvZGluZ0xlbmd0aCkKICAgIH07CiAgfQoKICBhc3NlcnQoc2lnLlIgJiYgc2lnLlMsICdTaWduYXR1cmUgd2l0aG91dCBSIG9yIFMnKTsKCiAgaWYgKGVkZHNhLmlzUG9pbnQoc2lnLlIpKQogICAgdGhpcy5fUiA9IHNpZy5SOwogIGlmIChzaWcuUyBpbnN0YW5jZW9mIEJOKQogICAgdGhpcy5fUyA9IHNpZy5TOwoKICB0aGlzLl9SZW5jb2RlZCA9IEFycmF5LmlzQXJyYXkoc2lnLlIpID8gc2lnLlIgOiBzaWcuUmVuY29kZWQ7CiAgdGhpcy5fU2VuY29kZWQgPSBBcnJheS5pc0FycmF5KHNpZy5TKSA/IHNpZy5TIDogc2lnLlNlbmNvZGVkOwp9CgpjYWNoZWRQcm9wZXJ0eShTaWduYXR1cmUsICdTJywgZnVuY3Rpb24gUygpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5kZWNvZGVJbnQodGhpcy5TZW5jb2RlZCgpKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShTaWduYXR1cmUsICdSJywgZnVuY3Rpb24gUigpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5kZWNvZGVQb2ludCh0aGlzLlJlbmNvZGVkKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KFNpZ25hdHVyZSwgJ1JlbmNvZGVkJywgZnVuY3Rpb24gUmVuY29kZWQoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZW5jb2RlUG9pbnQodGhpcy5SKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KFNpZ25hdHVyZSwgJ1NlbmNvZGVkJywgZnVuY3Rpb24gU2VuY29kZWQoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZW5jb2RlSW50KHRoaXMuUygpKTsKfSk7CgpTaWduYXR1cmUucHJvdG90eXBlLnRvQnl0ZXMgPSBmdW5jdGlvbiB0b0J5dGVzKCkgewogIHJldHVybiB0aGlzLlJlbmNvZGVkKCkuY29uY2F0KHRoaXMuU2VuY29kZWQoKSk7Cn07CgpTaWduYXR1cmUucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24gdG9IZXgoKSB7CiAgcmV0dXJuIHV0aWxzLmVuY29kZSh0aGlzLnRvQnl0ZXMoKSwgJ2hleCcpLnRvVXBwZXJDYXNlKCk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IFNpZ25hdHVyZTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6NTQzLCJibi5qcyI6NTQxfV0sNTU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGhhc2ggPSByZXF1aXJlKCdoYXNoLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gSG1hY0RSQkcob3B0aW9ucykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBIbWFjRFJCRykpCiAgICByZXR1cm4gbmV3IEhtYWNEUkJHKG9wdGlvbnMpOwogIHRoaXMuaGFzaCA9IG9wdGlvbnMuaGFzaDsKICB0aGlzLnByZWRSZXNpc3QgPSAhIW9wdGlvbnMucHJlZFJlc2lzdDsKCiAgdGhpcy5vdXRMZW4gPSB0aGlzLmhhc2gub3V0U2l6ZTsKICB0aGlzLm1pbkVudHJvcHkgPSBvcHRpb25zLm1pbkVudHJvcHkgfHwgdGhpcy5oYXNoLmhtYWNTdHJlbmd0aDsKCiAgdGhpcy5yZXNlZWQgPSBudWxsOwogIHRoaXMucmVzZWVkSW50ZXJ2YWwgPSBudWxsOwogIHRoaXMuSyA9IG51bGw7CiAgdGhpcy5WID0gbnVsbDsKCiAgdmFyIGVudHJvcHkgPSB1dGlscy50b0FycmF5KG9wdGlvbnMuZW50cm9weSwgb3B0aW9ucy5lbnRyb3B5RW5jKTsKICB2YXIgbm9uY2UgPSB1dGlscy50b0FycmF5KG9wdGlvbnMubm9uY2UsIG9wdGlvbnMubm9uY2VFbmMpOwogIHZhciBwZXJzID0gdXRpbHMudG9BcnJheShvcHRpb25zLnBlcnMsIG9wdGlvbnMucGVyc0VuYyk7CiAgYXNzZXJ0KGVudHJvcHkubGVuZ3RoID49ICh0aGlzLm1pbkVudHJvcHkgLyA4KSwKICAgICAgICAgJ05vdCBlbm91Z2ggZW50cm9weS4gTWluaW11bSBpczogJyArIHRoaXMubWluRW50cm9weSArICcgYml0cycpOwogIHRoaXMuX2luaXQoZW50cm9weSwgbm9uY2UsIHBlcnMpOwp9Cm1vZHVsZS5leHBvcnRzID0gSG1hY0RSQkc7CgpIbWFjRFJCRy5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGVudHJvcHksIG5vbmNlLCBwZXJzKSB7CiAgdmFyIHNlZWQgPSBlbnRyb3B5LmNvbmNhdChub25jZSkuY29uY2F0KHBlcnMpOwoKICB0aGlzLksgPSBuZXcgQXJyYXkodGhpcy5vdXRMZW4gLyA4KTsKICB0aGlzLlYgPSBuZXcgQXJyYXkodGhpcy5vdXRMZW4gLyA4KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuVi5sZW5ndGg7IGkrKykgewogICAgdGhpcy5LW2ldID0gMHgwMDsKICAgIHRoaXMuVltpXSA9IDB4MDE7CiAgfQoKICB0aGlzLl91cGRhdGUoc2VlZCk7CiAgdGhpcy5yZXNlZWQgPSAxOwogIHRoaXMucmVzZWVkSW50ZXJ2YWwgPSAweDEwMDAwMDAwMDAwMDA7ICAvLyAyXjQ4Cn07CgpIbWFjRFJCRy5wcm90b3R5cGUuX2htYWMgPSBmdW5jdGlvbiBobWFjKCkgewogIHJldHVybiBuZXcgaGFzaC5obWFjKHRoaXMuaGFzaCwgdGhpcy5LKTsKfTsKCkhtYWNEUkJHLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKHNlZWQpIHsKICB2YXIga21hYyA9IHRoaXMuX2htYWMoKQogICAgICAgICAgICAgICAgIC51cGRhdGUodGhpcy5WKQogICAgICAgICAgICAgICAgIC51cGRhdGUoWyAweDAwIF0pOwogIGlmIChzZWVkKQogICAga21hYyA9IGttYWMudXBkYXRlKHNlZWQpOwogIHRoaXMuSyA9IGttYWMuZGlnZXN0KCk7CiAgdGhpcy5WID0gdGhpcy5faG1hYygpLnVwZGF0ZSh0aGlzLlYpLmRpZ2VzdCgpOwogIGlmICghc2VlZCkKICAgIHJldHVybjsKCiAgdGhpcy5LID0gdGhpcy5faG1hYygpCiAgICAgICAgICAgICAgIC51cGRhdGUodGhpcy5WKQogICAgICAgICAgICAgICAudXBkYXRlKFsgMHgwMSBdKQogICAgICAgICAgICAgICAudXBkYXRlKHNlZWQpCiAgICAgICAgICAgICAgIC5kaWdlc3QoKTsKICB0aGlzLlYgPSB0aGlzLl9obWFjKCkudXBkYXRlKHRoaXMuVikuZGlnZXN0KCk7Cn07CgpIbWFjRFJCRy5wcm90b3R5cGUucmVzZWVkID0gZnVuY3Rpb24gcmVzZWVkKGVudHJvcHksIGVudHJvcHlFbmMsIGFkZCwgYWRkRW5jKSB7CiAgLy8gT3B0aW9uYWwgZW50cm9weSBlbmMKICBpZiAodHlwZW9mIGVudHJvcHlFbmMgIT09ICdzdHJpbmcnKSB7CiAgICBhZGRFbmMgPSBhZGQ7CiAgICBhZGQgPSBlbnRyb3B5RW5jOwogICAgZW50cm9weUVuYyA9IG51bGw7CiAgfQoKICBlbnRyb3B5ID0gdXRpbHMudG9CdWZmZXIoZW50cm9weSwgZW50cm9weUVuYyk7CiAgYWRkID0gdXRpbHMudG9CdWZmZXIoYWRkLCBhZGRFbmMpOwoKICBhc3NlcnQoZW50cm9weS5sZW5ndGggPj0gKHRoaXMubWluRW50cm9weSAvIDgpLAogICAgICAgICAnTm90IGVub3VnaCBlbnRyb3B5LiBNaW5pbXVtIGlzOiAnICsgdGhpcy5taW5FbnRyb3B5ICsgJyBiaXRzJyk7CgogIHRoaXMuX3VwZGF0ZShlbnRyb3B5LmNvbmNhdChhZGQgfHwgW10pKTsKICB0aGlzLnJlc2VlZCA9IDE7Cn07CgpIbWFjRFJCRy5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiBnZW5lcmF0ZShsZW4sIGVuYywgYWRkLCBhZGRFbmMpIHsKICBpZiAodGhpcy5yZXNlZWQgPiB0aGlzLnJlc2VlZEludGVydmFsKQogICAgdGhyb3cgbmV3IEVycm9yKCdSZXNlZWQgaXMgcmVxdWlyZWQnKTsKCiAgLy8gT3B0aW9uYWwgZW5jb2RpbmcKICBpZiAodHlwZW9mIGVuYyAhPT0gJ3N0cmluZycpIHsKICAgIGFkZEVuYyA9IGFkZDsKICAgIGFkZCA9IGVuYzsKICAgIGVuYyA9IG51bGw7CiAgfQoKICAvLyBPcHRpb25hbCBhZGRpdGlvbmFsIGRhdGEKICBpZiAoYWRkKSB7CiAgICBhZGQgPSB1dGlscy50b0FycmF5KGFkZCwgYWRkRW5jKTsKICAgIHRoaXMuX3VwZGF0ZShhZGQpOwogIH0KCiAgdmFyIHRlbXAgPSBbXTsKICB3aGlsZSAodGVtcC5sZW5ndGggPCBsZW4pIHsKICAgIHRoaXMuViA9IHRoaXMuX2htYWMoKS51cGRhdGUodGhpcy5WKS5kaWdlc3QoKTsKICAgIHRlbXAgPSB0ZW1wLmNvbmNhdCh0aGlzLlYpOwogIH0KCiAgdmFyIHJlcyA9IHRlbXAuc2xpY2UoMCwgbGVuKTsKICB0aGlzLl91cGRhdGUoYWRkKTsKICB0aGlzLnJlc2VlZCsrOwogIHJldHVybiB1dGlscy5lbmNvZGUocmVzLCBlbmMpOwp9OwoKfSx7Ii4uL2VsbGlwdGljIjo1NDMsImhhc2guanMiOjU2MH1dLDU1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gewogIGRvdWJsZXM6IHsKICAgIHN0ZXA6IDQsCiAgICBwb2ludHM6IFsKICAgICAgWwogICAgICAgICdlNjBmY2U5M2I1OWU5ZWM1MzAxMWFhYmMyMWMyM2U5N2IyYTMxMzY5Yjg3YTVhZTljNDRlZTg5ZTJhNmRlYzBhJywKICAgICAgICAnZjdlMzUwNzM5OWU1OTU5MjlkYjk5ZjM0ZjU3OTM3MTAxMjk2ODkxZTQ0ZDIzZjBiZTFmMzJjY2U2OTYxNjgyMScKICAgICAgXSwKICAgICAgWwogICAgICAgICc4MjgyMjYzMjEyYzYwOWQ5ZWEyYTZlM2UxNzJkZTIzOGQ4YzM5Y2FiZDVhYzFjYTEwNjQ2ZTIzZmQ1ZjUxNTA4JywKICAgICAgICAnMTFmOGE4MDk4NTU3ZGZlNDVlODI1NmU4MzBiNjBhY2U2MmQ2MTNhYzJmN2IxN2JlZDMxYjZlYWZmNmUyNmNhZicKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNzVlMTU5ZjcyOGI4NjVhNzJmOTljYzZjNmZjODQ2ZGUwYjkzODMzZmQyMjIyZWQ3M2ZjZTViNTUxZTViNzM5JywKICAgICAgICAnZDM1MDZlMGQ5ZTNjNzllYmE0ZWY5N2E1MWZmNzFmNWVhY2I1OTU1YWRkMjQzNDVjNmVmYTZmZmVlOWZlZDY5NScKICAgICAgXSwKICAgICAgWwogICAgICAgICczNjNkOTBkNDQ3YjAwYzljOTljZWFjMDViNjI2MmVlMDUzNDQxYzdlNTU1NTJmZmU1MjZiYWQ4ZjgzZmY0NjQwJywKICAgICAgICAnNGUyNzNhZGZjNzMyMjIxOTUzYjQ0NTM5N2YzMzYzMTQ1YjlhODkwMDgxOTllY2I2MjAwM2M3ZjNiZWU5ZGU5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhiNGI1ZjE2NWRmM2MyYmU4YzYyNDRiNWI3NDU2Mzg4NDNlNGE3ODFhMTViY2QxYjY5Zjc5YTU1ZGZmZGY4MGMnLAogICAgICAgICc0YWFkMGE2ZjY4ZDMwOGI0YjNmYmQ3ODEzYWIwZGEwNGY5ZTMzNjU0NjE2MmVlNTZiM2VmZjBjNjVmZDRmZDM2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzcyM2NiYWE2ZTVkYjk5NmQ2YmY3NzFjMDBiZDU0OGM3YjcwMGRiZmZhNmMwZTc3YmNiNjExNTkyNTIzMmZjZGEnLAogICAgICAgICc5NmU4NjdiNTU5NWNjNDk4YTkyMTEzNzQ4ODgyNGQ2ZTI2NjBhMDY1Mzc3OTQ5NDgwMWRjMDY5ZDllYjM5ZjVmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VlYmZhNGQ0OTNiZWJmOThiYTVmZWVjODEyYzJkM2I1MDk0Nzk2MTIzN2E5MTk4MzlhNTMzZWNhMGU3ZGQ3ZmEnLAogICAgICAgICc1ZDlhOGNhMzk3MGVmMGYyNjllZTdlZGFmMTc4MDg5ZDlhZTRjZGMzYTcxMWY3MTJkZGZkNGZkYWUxZGU4OTk5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzEwMGY0NGRhNjk2ZTcxNjcyNzkxZDBhMDliN2JkZTQ1OWYxMjE1YTI5YjNjMDNiZmVmZDc4MzViMzlhNDhkYjAnLAogICAgICAgICdjZGQ5ZTEzMTkyYTAwYjc3MmVjOGYzMzAwYzA5MDY2NmI3ZmY0YTE4ZmY1MTk1YWMwZmJkNWNkNjJiYzY1YTA5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2UxMDMxYmUyNjJjN2VkMWIxZGM5MjI3YTRhMDRjMDE3YTc3ZjhkNDQ2NGYzYjM4NTJjOGFjZGU2ZTUzNGZkMmQnLAogICAgICAgICc5ZDcwNjE5Mjg5NDA0MDVlNmJiNmE0MTc2NTk3NTM1YWYyOTJkZDQxOWUxY2VkNzlhNDRmMThmMjk0NTZhMDBkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2ZlZWE2Y2FlNDZkNTViNTMwYWMyODM5ZjE0M2JkN2VjNWNmOGIyNjZhNDFkNmFmNTJkNWU2ODhkOTA5NDY5NmQnLAogICAgICAgICdlNTdjNmI2Yzk3ZGNlMWJhYjA2ZTRlMTJiZjNlY2Q1Yzk4MWM4OTU3Y2M0MTQ0MmQzMTU1ZGViZjE4MDkwMDg4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RhNjdhOTFkOTEwNDljZGNiMzY3YmU0YmU2ZmZjYTNjZmVlZDY1N2Q4MDg1ODNkZTMzZmE5NzhiYzFlYzZjYjEnLAogICAgICAgICc5YmFjYWEzNTQ4MTY0MmJjNDFmNDYzZjdlYzk3ODBlNWRlYzdhZGM1MDhmNzQwYTE3ZTllYThlMjdhNjhiZTFkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzUzOTA0ZmFhMGIzMzRjZGRhNmUwMDA5MzVlZjIyMTUxZWMwOGQwZjdiYjExMDY5ZjU3NTQ1Y2NjMWEzN2I3YzAnLAogICAgICAgICc1YmMwODdkMGJjODAxMDZkODhjOWVjY2FjMjBkM2MxYzEzOTk5OTgxZTE0NDM0Njk5ZGNiMDk2YjAyMjc3MWM4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhlN2JjZDBiZDM1OTgzYTc3MTljY2E3NzY0Y2E5MDY3NzliNTNhMDQzYTliOGJjYWVmZjk1OWY0M2FkODYwNDcnLAogICAgICAgICcxMGI3NzcwYjJhM2RhNGIzOTQwMzEwNDIwY2E5NTE0NTc5ZTg4ZTJlNDdmZDY4YjNlYTEwMDQ3ZTg0NjAzNzJhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM4NWVlZDM0YzFjZGZmMjFlNmQwODE4Njg5YjgxYmRlNzFhN2Y0ZjE4Mzk3ZTY2OTBhODQxZTE1OTljNDM4NjInLAogICAgICAgICcyODNiZWJjM2U4ZWEyM2Y1NjcwMWRlMTllOWViZjQ1NzZiMzA0ZWVjMjA4NmRjOGNjMDQ1OGZlNTU0MmU1NDUzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzZmOWQ5YjgwM2VjZjE5MTYzN2M3M2E0NDEzZGZhMTgwZmRkZjg0YTU5NDdmYmM5YzYwNmVkODZjM2ZhYzNhNycsCiAgICAgICAgJzdjODBjNjhlNjAzMDU5YmE2OWI4ZTJhMzBlNDVjNGQ0N2VhNGRkMmY1YzI4MTAwMmQ4Njg5MDYwM2E4NDIxNjAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzMyMmQ0MDEyNDNjNGUyNTgyYTIxNDdjMTA0ZDZlY2JmNzc0ZDE2M2RiMGY1ZTUzMTNiN2UwZTc0MmQwZTZiZCcsCiAgICAgICAgJzU2ZTcwNzk3ZTk2NjRlZjViZmIwMTliYzRkZGFmOWI3MjgwNWY2M2VhMjg3M2FmNjI0ZjNhMmU5NmMyOGIyYTAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODU2NzJjN2QyZGUwYjdkYTJiZDE3NzBkODk2NjU4Njg3NDFiM2Y5YWY3NjQzMzk3NzIxZDc0ZDI4MTM0YWI4MycsCiAgICAgICAgJzdjNDgxYjliNWI0M2IyZWI2Mzc0MDQ5YmZhNjJjMmU1ZTc3ZjE3ZmNjNTI5OGY0NGM4ZTMwOTRmNzkwMzEzYTYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTQ4YmY4MDliMTk4OGE0NmIwNmM5ZjE5MTk0MTNiMTBmOTIyNmM2MGY2Njg4MzJmZmQ5NTlhZjYwYzgyYTBhJywKICAgICAgICAnNTNhNTYyODU2ZGNiNjY0NmRjNmI3NGM1ZDFjMzQxOGM2ZDRkZmYwOGM5N2NkMmJlZDRjYjdmODhkOGM4ZTU4OScKICAgICAgXSwKICAgICAgWwogICAgICAgICc2MjYwY2U3ZjQ2MTgwMWMzNGYwNjdjZTBmMDI4NzNhOGYxYjBlNDRkZmM2OTc1MmFjY2VjZDgxOWYzOGZkOGU4JywKICAgICAgICAnYmMyZGE4MmI2ZmE1YjU3MWE3ZjA5MDQ5Nzc2YTFlZjdlY2QyOTIyMzgwNTFjMTk4YzFhODRlOTViMmI0YWUxNycKICAgICAgXSwKICAgICAgWwogICAgICAgICdlNTAzN2RlMGFmYzFkOGQ0M2Q4MzQ4NDE0YmJmNDEwMzA0M2VjOGY1NzViZmRjNDMyOTUzY2M4ZDIwMzdmYTJkJywKICAgICAgICAnNDU3MTUzNGJhYTk0ZDNiNWY5Zjk4ZDA5ZmI5OTBiZGRiZDVmNWIwM2VjNDgxZjEwZTBlNWRjODQxZDc1NWJkYScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlMDYzNzJiMGY0YTIwN2FkZjVlYTkwNWU4ZjE3NzFiNGU3ZThkYmQxYzZhNmM1YjcyNTg2NmEwYWU0ZmNlNzI1JywKICAgICAgICAnN2E5MDg5NzRiY2UxOGNmZTEyYTI3YmIyYWQ1YTQ4OGNkNzQ4NGE3Nzg3MTA0ODcwYjI3MDM0Zjk0ZWVlMzFkZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICcyMTNjN2E3MTVjZDVkNDUzNThkMGJiZjlkYzBjZTAyMjA0YjEwYmRkZTJhM2Y1ODU0MGFkNjkwOGQwNTU5NzU0JywKICAgICAgICAnNGI2ZGFkMGI1YWU0NjI1MDcwMTNhZDA2MjQ1YmExOTBiYjQ4NTBmNWYzNmE3ZWVkZGZmMmMyNzUzNGI0NThmMicKICAgICAgXSwKICAgICAgWwogICAgICAgICc0ZTdjMjcyYTdhZjRiMzRlOGRiYjkzNTJhNTQxOWE4N2UyODM4YzcwYWRjNjJjZGRmMGNjM2EzYjA4ZmJkNTNjJywKICAgICAgICAnMTc3NDljNzY2YzlkMGIxOGUxNmZkMDlmNmRlZjY4MWI1MzBiOTYxNGJmZjdkZDMzZTBiMzk0MTgxN2RjYWFlNicKICAgICAgXSwKICAgICAgWwogICAgICAgICdmZWE3NGUzZGJlNzc4YjFiMTBmMjM4YWQ2MTY4NmFhNWM3NmUzZGIyYmU0MzA1NzYzMjQyN2UyODQwZmIyN2I2JywKICAgICAgICAnNmUwNTY4ZGI5YjBiMTMyOTdjZjY3NGRlY2NiNmFmOTMxMjZiNTk2Yjk3M2Y3Yjc3NzAxZDNkYjdmMjNjYjk2ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NmU2NDExM2Y2NzdjZjBlMTBhMjU3MGQ1OTk5NjhkMzE1NDRlMTc5Yjc2MDQzMjk1MmMwMmE0NDE3YmRkZTM5JywKICAgICAgICAnYzkwZGRmOGRlZTRlOTVjZjU3NzA2NmQ3MDY4MWYwZDM1ZTJhMzNkMmI1NmQyMDMyYjRiMTc1MmQxOTAxYWMwMScKICAgICAgXSwKICAgICAgWwogICAgICAgICdjNzM4YzU2YjAzYjJhYmUxZTgyODFiYWE3NDNmOGY5YThmN2NjNjQzZGYyNmNiZWUzYWIxNTAyNDJiY2JiODkxJywKICAgICAgICAnODkzZmI1Nzg5NTFhZDI1MzdmNzE4ZjJlYWNiZmJiYmI4MjMxNGVlZjc4ODBjZmU5MTdlNzM1ZDk2OTlhODRjMycKICAgICAgXSwKICAgICAgWwogICAgICAgICdkODk1NjI2NTQ4YjY1YjgxZTI2NGM3NjM3Yzk3Mjg3N2QxZDcyZTVmM2E5MjUwMTQzNzJlOWY2NTg4ZjZjMTRiJywKICAgICAgICAnZmViZmFhMzhmMmJjN2VhZTcyOGVjNjA4MThjMzQwZWIwMzQyOGQ2MzJiYjA2N2UxNzkzNjNlZDc1ZDdkOTkxZicKICAgICAgXSwKICAgICAgWwogICAgICAgICdiOGRhOTQwMzJhOTU3NTE4ZWIwZjY0MzM1NzFlODc2MWNlZmZjNzM2OTNlODRlZGQ0OTE1MGE1NjRmNjc2ZTAzJywKICAgICAgICAnMjgwNGRmYTQ0ODA1YTFlNGQ3Yzk5Y2M5NzYyODA4YjA5MmNjNTg0ZDk1ZmYzYjUxMTQ4OGU0ZTc0ZWZkZjZlNycKICAgICAgXSwKICAgICAgWwogICAgICAgICdlODBmZWExNDQ0MWZiMzNhN2Q4YWRhYjk0NzVkN2ZhYjIwMTllZmZiNTE1NmE3OTJmMWExMTc3OGUzYzBkZjVkJywKICAgICAgICAnZWVkMWRlN2Y2MzhlMDA3NzFlODk3NjhjYTNjYTk0NDcyZDE1NWU4MGFmMzIyZWE5ZmNiNDI5MWI2YWM5ZWM3OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdhMzAxNjk3YmRmY2Q3MDQzMTNiYTQ4ZTUxZDU2NzU0M2YyYTE4MjAzMWVmZDY5MTVkZGMwN2JiY2M0ZTE2MDcwJywKICAgICAgICAnNzM3MGY5MWNmYjY3ZTRmNTA4MTgwOWZhMjVkNDBmOWIxNzM1ZGJmN2MwYTExYTEzMGMwZDFhMDQxZTE3N2VhMScKICAgICAgXSwKICAgICAgWwogICAgICAgICc5MGFkODViMzg5ZDZiOTM2NDYzZjlkMDUxMjY3OGRlMjA4Y2MzMzBiMTEzMDdmZmZhYjdhYzYzZTNmYjA0ZWQ0JywKICAgICAgICAnZTUwN2EzNjIwYTM4MjYxYWZmZGNiZDk0MjcyMjJiODM5YWVmYWJlMTU4Mjg5NGQ5OTFkNGQ0OGNiNmVmMTUwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhmNjhiOWQyZjYzYjVmMzM5MjM5YzFhZDk4MWYxNjJlZTg4YzU2Nzg3MjNlYTMzNTFiN2I0NDRjOWVjNGMwZGEnLAogICAgICAgICc2NjJhOWYyZGJhMDYzOTg2ZGUxZDkwYzJiNmJlMjE1ZGJiZWEyY2ZlOTU1MTBiZmRmMjNjYmY3OTUwMWZmZjgyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U0ZjNmYjAxNzZhZjg1ZDY1ZmY5OWZmOTE5OGMzNjA5MWY0OGU4NjUwMzY4MWUzZTY2ODZmZDUwNTMyMzFlMTEnLAogICAgICAgICcxZTYzNjMzYWQwZWY0ZjFjMTY2MWE2ZDBlYTAyYjcyODZjYzdlNzRlYzk1MWQxYzk4MjJjMzg1NzZmZWI3M2JjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhjMDBmYTliMThlYmYzMzFlYjk2MTUzN2E0NWE0MjY2YzcwMzRmMmYwZDRlMWQwNzE2ZmI2ZWFlMjBlYWUyOWUnLAogICAgICAgICdlZmE0NzI2N2ZlYTUyMWExYTlkYzM0M2EzNzM2Yzk3NGMyZmFkYWZhODFlMzZjNTRlN2QyYTRjNjY3MDI0MTRiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U3YTI2Y2U2OWRkNDgyOWYzZTEwY2VjMGE5ZTk4ZWQzMTQzZDA4NGYzMDhiOTJjMDk5N2ZkZGZjNjBjYjNlNDEnLAogICAgICAgICcyYTc1OGUzMDBmYTc5ODRiNDcxYjAwNmExYWFmYmIxOGQwYTZiMmMwNDIwZTgzZTIwZThhOTQyMWNmMmNmZDUxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2I2NDU5ZTBlZTM2NjJlYzhkMjM1NDBjMjIzYmNiZGM1NzFjYmNiOTY3ZDc5NDI0ZjNjZjI5ZWIzZGU2YjgwZWYnLAogICAgICAgICc2N2M4NzZkMDZmM2UwNmRlMWRhZGYxNmU1NjYxZGIzYzRiM2FlNmQ0OGUzNWIyZmYzMGJmMGI2MWE3MWJhNDUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDY4YTgwYzgyODBiYjg0MDc5MzIzNGFhMTE4ZjA2MjMxZDZmMWZjNjdlNzNjNWE1ZGVkYTBmNWI0OTY5NDNlOCcsCiAgICAgICAgJ2RiOGJhOWZmZjRiNTg2ZDAwYzRiMWY5MTc3YjBlMjhiNWIwZTdiOGY3ODQ1Mjk1YTI5NGM4NDI2NmIxMzMxMjAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzI0YWVkN2RmNjVjODA0MjUyZGMwMjcwOTA3YTMwYjA5NjEyYWViOTczNDQ5Y2VhNDA5NTk4MGZjMjhkM2Q1ZCcsCiAgICAgICAgJzY0OGEzNjU3NzRiNjFmMmZmMTMwYzBjMzVhZWMxZjRmMTkyMTNiMGM3ZTMzMjg0Mzk2NzIyNGFmOTZhYjdjODQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNGRmOWMxNDkxOWNkZTYxZjZkNTFkZmRiZTVmZWU1ZGNlZWM0MTQzYmE4ZDFjYTg4OGU4YmQzNzNmZDA1NGM5NicsCiAgICAgICAgJzM1ZWM1MTA5MmQ4NzI4MDUwOTc0YzIzYTFkODVkNGI1ZDUwNmNkYzI4ODQ5MDE5MmViYWMwNmNhZDEwZDVkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzljMzkxOWE4NGE0NzQ4NzBmYWVkOGE5YzFjYzY2MDIxNTIzNDg5MDU0ZDdmMDMwOGNiZmM5OWM4YWMxZjk4Y2QnLAogICAgICAgICdkZGI4NGYwZjRhNGRkZDU3NTg0ZjA0NGJmMjYwZTY0MTkwNTMyNmY3NmM2NGM4ZTZiZTdlNWUwM2Q0ZmM1OTlkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzYwNTcxNzBiMWRkMTJmZGY4ZGUwNWYyODFkOGUwNmJiOTFlMTQ5M2E4YjkxZDRjYzVhMjEzODIxMjBhOTU5ZTUnLAogICAgICAgICc5YTFhZjBiMjZhNmE0ODA3YWRkOWEyZGFmNzFkZjI2MjQ2NTE1MmJjM2VlMjRjNjVlODk5YmU5MzIzODVhMmE4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2E1NzZkZjhlMjNhMDg0MTE0MjE0MzlhNDUxOGRhMzE4ODBjZWYwZmJhN2Q0ZGYxMmIxYTY5NzNlZWNiOTQyNjYnLAogICAgICAgICc0MGE2YmYyMGU3NjY0MGIyYzkyYjk3YWZlNThjZDgyYzQzMmUxMGE3ZjUxNGQ5ZjNlZThiZTExYWUxYjI4ZWM4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc3NzhhNzhjMjhkZWMzZTMwYTA1ZmU5NjI5ZGU4YzM4YmIzMGQxZjVjZjlhM2EyMDhmNzYzODg5YmU1OGFkNzEnLAogICAgICAgICczNDYyNmQ5YWI1YTViMjJmZjcwOThlMTJmMmZmNTgwMDg3YjM4NDExZmYyNGFjNTYzYjUxM2ZjMWZkOWY0M2FjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzkyODk1NWVlNjM3YTg0NDYzNzI5ZmQzMGU3YWZkMmVkNWY5NjI3NGU1YWQ3ZTVjYjA5ZWRhOWMwNmQ5MDNhYycsCiAgICAgICAgJ2MyNTYyMTAwM2QzZjQyYTgyN2I3OGExMzA5M2E5NWVlYWMzZDI2ZWZhOGE4ZDgzZmM1MTgwZTkzNWJjZDA5MWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODVkMGZlZjNlYzZkYjEwOTM5OTA2NGYzYTBlM2IyODU1NjQ1YjRhOTA3YWQzNTQ1MjdhYWU3NTE2M2Q4Mjc1MScsCiAgICAgICAgJzFmMDM2NDg0MTNhMzhjMGJlMjlkNDk2ZTU4MmNmNTY2M2U4NzUxZTk2ODc3MzMxNTgyYzIzN2EyNGViMWY5NjInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZmYyYjBkY2U5N2VlY2U5N2MxYzliNjA0MTc5OGI4NWRmZGZiNmQ4ODgyZGEyMDMwOGY1NDA0ODI0NTI2MDg3ZScsCiAgICAgICAgJzQ5M2QxM2ZlZjUyNGJhMTg4YWY0YzRkYzU0ZDA3OTM2YzdiN2VkNmZiOTBlMmNlYjJjOTUxZTAxZjBjMjk5MDcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODI3ZmJiZTRiMWU4ODBlYTllZDJiMmU2MzAxYjIxMmI1N2YxZWUxNDhjZDZkZDI4NzgwZTVlMmNmODU2ZTI0MScsCiAgICAgICAgJ2M2MGY5YzkyM2M3MjdiMGI3MWJlZjJjNjdkMWQxMjY4N2ZmN2E2MzE4NjkwMzE2NmQ2MDViNjhiYWVjMjkzZWMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWFhNjQ5ZjIxZjUxYmRiYWU3YmU0YWUzNGNlNmU1MjE3YTU4ZmRjZTdmNDdmOWFhN2YzYjU4ZmEyMTIwZTJiMycsCiAgICAgICAgJ2JlMzI3OWVkNWJiYmIwM2FjNjlhODBmODk4NzlhYTVhMDFhNmI5NjVmMTNmN2U1OWQ0N2E1MzA1YmE1YWQ5M2QnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTRhNDJkNDNjNWNmMTY5ZDkzOTFkZjZkZWNmNDJlZTU0MWI2ZDhmMGM5YTEzNzQwMWUyMzYzMmRkYTM0ZDI0ZicsCiAgICAgICAgJzRkOWY5MmU3MTZkMWM3MzUyNmZjOTljY2ZiOGFkMzRjZTg4NmVlZGZhOGQ4ZTRmMTNhN2Y3MTMxZGViYTk0MTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMWVjODBmZWYzNjBjYmRkOTU0MTYwZmFkYWIzNTJiNmI5MmI1MzU3NmE4OGZlYTQ5NDcxNzNiOWQ0MzAwYmYxOScsCiAgICAgICAgJ2FlZWZlOTM3NTZiNTM0MGQyZjNhNDk1OGE3YWJiZjVlMDE0NmU3N2Y2Mjk1YTA3YjY3MWNkYzFjYzEwN2NlZmQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTQ2YTc3OGMwNDY3MGMyZjkxYjAwYWY0NjgwZGZhOGJjZTM0OTA3MTdkNThiYTg4OWRkYjU5MjgzNjY2NDJiZScsCiAgICAgICAgJ2IzMThlMGVjMzM1NDAyOGFkZDY2OTgyN2Y5ZDRiMjg3MGFhYTk3MWQyZjdlNWVkMWQwYjI5NzQ4M2Q4M2VmZDAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZmE1MGMwZjYxZDIyZTVmMDdlM2FjZWJiMWFhMDdiMTI4ZDAwMTIyMDlhMjhiOTc3NmQ3NmE4NzkzMTgwZWVmOScsCiAgICAgICAgJzZiODRjNjkyMjM5N2ViYTliNzJjZDI4NzIyODFhNjhhNWU2ODMyOTNhNTdhMjEzYjM4Y2Q4ZDdkM2Y0ZjI4MTEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGExZDYxZDBjYTcyMWExMWIxYTViZjZiN2Q4OGU4NDIxYTI4OGFiNWQ1YmJhNTIyMGU1M2QzMmI1ZjA2N2VjMicsCiAgICAgICAgJzgxNTdmNTVhN2M5OTMwNmM3OWMwNzY2MTYxYzkxZTI5NjZhNzM4OTlkMjc5YjQ4YTY1NWZiYTBmMWFkODM2ZjEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYThlMjgyZmYwYzk3MDY5MDcyMTVmZjk4ZThmZDQxNjYxNTMxMWRlMDQ0NmYxZTA2MmE3M2IwNjEwZDA2NGUxMycsCiAgICAgICAgJzdmOTczNTViOGRiODFjMDlhYmZiN2YzYzViMjUxNTg4OGI2NzlhM2U1MGRkNmJkNmNlZjdjNzMxMTFmNGNjMGMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTc0YTUzYjljOWEyODU4NzJkMzllNTZlNjkxM2NhYjE1ZDU5YjFmYTUxMjUwOGMwMjJmMzgyZGU4MzE5NDk3YycsCiAgICAgICAgJ2NjYzlkYzM3YWJmYzljMTY1N2I0MTU1ZjJjNDdmOWU2NjQ2YjNhMWQ4Y2I5ODU0MzgzZGExM2FjMDc5YWZhNzMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTU5Mzk2OTgxOTQzNzg1YzNkM2U1N2VkZjUwMThjZGJlMDM5ZTczMGU0OTE4YjNkODg0ZmRmZjA5NDc1YjdiYScsCiAgICAgICAgJzJlN2U1NTI4ODhjMzMxZGQ4YmEwMzg2YTRiOWNkNjg0OWM2NTNmNjRjODcwOTM4NWU5YjhhYmY4NzUyNGYyZmQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDJhNjNhNTBhZTQwMWU1NmQ2NDVhMTE1M2IxMDlhOGZjY2EwYTQzZDU2MWZiYTJkYmI1MTM0MGM5ZDgyYjE1MScsCiAgICAgICAgJ2U4MmQ4NmZiNjQ0M2ZjYjc1NjVhZWU1OGIyOTQ4MjIwYTcwZjc1MGFmNDg0Y2E1MmQ0MTQyMTc0ZGNmODk0MDUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNjQ1ODdlMjMzNTQ3MWViODkwZWU3ODk2ZDdjZmRjODY2YmFjYmRiZDM4MzkzMTdiMzQzNmY5YjQ1NjE3ZTA3MycsCiAgICAgICAgJ2Q5OWZjZGQ1YmY2OTAyZTJhZTk2ZGQ2NDQ3YzI5OWExODViOTBhMzkxMzNhZWFiMzU4Mjk5ZTVlOWZhZjY1ODknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODQ4MWJkZTBlNGU0ZDg4NWIzYTU0NmQzZTU0OWRlMDQyZjBhYTZjZWEyNTBlN2ZkMzU4ZDZjODZkZDQ1ZTQ1OCcsCiAgICAgICAgJzM4ZWU3YjhjYmE1NDA0ZGQ4NGEyNWJmMzljZWNiMmNhOTAwYTc5YzQyYjI2MmU1NTZkNjRiMWI1OTc3OTA1N2UnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTM0NjRhNTdhNzgxMDJhYTYyYjY5NzlhZTgxN2Y0NjM3ZmZjZmVkM2M0YjFjZTMwYmNkNjMwM2Y2Y2FmNjY2YicsCiAgICAgICAgJzY5YmUxNTkwMDQ2MTQ1ODBlZjdlNDMzNDUzY2NiMGNhNDhmMzAwYTgxZDA5NDJlMTNmNDk1YTkwN2Y2ZWNjMjcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYmM0YTlkZjViNzEzZmUyZTlhZWY0MzBiY2MxZGM5N2EwY2Q5Y2NlZGUyZjI4NTg4Y2FkYTNhMGQyZDgzZjM2NicsCiAgICAgICAgJ2QzYTgxY2E2ZTc4NWMwNjM4MzkzN2FkZjRiNzk4Y2FhNmU4YTlmYmZhNTQ3YjE2ZDc1OGQ2NjY1ODFmMzNjMScKICAgICAgXSwKICAgICAgWwogICAgICAgICc4YzI4YTk3YmY4Mjk4YmMwZDIzZDhjNzQ5NDUyYTMyZTY5NGI2NWUzMGE5NDcyYTM5NTRhYjMwZmU1MzI0Y2FhJywKICAgICAgICAnNDBhMzA0NjNhMzMwNTE5MzM3OGZlZGYzMWY3Y2MwZWI3YWU3ODRmMDQ1MWNiOTQ1OWU3MWRjNzNjYmVmOTQ4MicKICAgICAgXSwKICAgICAgWwogICAgICAgICc4ZWE5NjY2MTM5NTI3YThjMWRkOTRjZTRmMDcxZmQyM2M4YjM1MGM1YTRiYjMzNzQ4YzRiYTExMWZhY2NhZTAnLAogICAgICAgICc2MjBlZmFiYmM4ZWUyNzgyZTI0ZTdjMGNmYjk1YzVkNzM1Yjc4M2JlOWNmMGY4ZTk1NWFmMzRhMzBlNjJiOTQ1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RkMzYyNWZhZWY1YmEwNjA3NDY2OTcxNmJiZDM3ODhkODliZGRlODE1OTU5OTY4MDkyZjc2Y2M0ZWI5YTk3ODcnLAogICAgICAgICc3YTE4OGZhMzUyMGUzMGQ0NjFkYTI1MDEwNDU3MzFjYTk0MTQ2MTk4Mjg4MzM5NTkzN2Y2OGQwMGM2NDRhNTczJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Y3MTBkNzlkOWViOTYyMjk3ZTRmNjIzMmI0MGU4ZjdmZWIyYmM2MzgxNDYxNGQ2OTJjMTJkZTc1MjQwODIyMWUnLAogICAgICAgICdlYTk4ZTY3MjMyZDNiMzI5NWQzYjUzNTUzMjExNWNjYWM4NjEyYzcyMTg1MTYxNzUyNmFlNDdhOWM3N2JmYzgyJwogICAgICBdCiAgICBdCiAgfSwKICBuYWY6IHsKICAgIHduZDogNywKICAgIHBvaW50czogWwogICAgICBbCiAgICAgICAgJ2Y5MzA4YTAxOTI1OGMzMTA0OTM0NGY4NWY4OWQ1MjI5YjUzMWM4NDU4MzZmOTliMDg2MDFmMTEzYmNlMDM2ZjknLAogICAgICAgICczODhmN2IwZjYzMmRlODE0MGZlMzM3ZTYyYTM3ZjM1NjY1MDBhOTk5MzRjMjIzMWI2Y2I5ZmQ3NTg0YjhlNjcyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzJmOGJkZTRkMWEwNzIwOTM1NWI0YTcyNTBhNWM1MTI4ZTg4Yjg0YmRkYzYxOWFiN2NiYThkNTY5YjI0MGVmZTQnLAogICAgICAgICdkOGFjMjIyNjM2ZTVlM2Q2ZDRkYmE5ZGRhNmM5YzQyNmY3ODgyNzFiYWIwZDY4NDBkY2E4N2QzYWE2YWM2MmQ2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzVjYmRmMDY0NmU1ZGI0ZWFhMzk4ZjM2NWYyZWE3YTBlM2Q0MTliN2UwMzMwZTM5Y2U5MmJkZGVkY2FjNGY5YmMnLAogICAgICAgICc2YWViY2E0MGJhMjU1OTYwYTMxNzhkNmQ4NjFhNTRkYmE4MTNkMGI4MTNmZGU3YjVhNTA4MjYyODA4NzI2NGRhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2FjZDQ4NGUyZjBjN2Y2NTMwOWFkMTc4YTlmNTU5YWJkZTA5Nzk2OTc0YzU3ZTcxNGMzNWYxMTBkZmMyN2NjYmUnLAogICAgICAgICdjYzMzODkyMWIwYTdkOWZkNjQzODA5NzE3NjNiNjFlOWFkZDg4OGE0Mzc1ZjhlMGYwNWNjMjYyYWM2NGY5YzM3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc3NGFlN2Y4NThhOTQxMWU1ZWY0MjQ2YjcwYzY1YWFjNTY0OTk4MGJlNWMxNzg5MWJiZWMxNzg5NWRhMDA4Y2InLAogICAgICAgICdkOTg0YTAzMmViNmI1ZTE5MDI0M2RkNTZkN2I3YjM2NTM3MmRiMWUyZGZmOWQ2YTgzMDFkNzRjOWM5NTNjNjFiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2YyODc3M2MyZDk3NTI4OGJjN2QxZDIwNWMzNzQ4NjUxYjA3NWZiYzY2MTBlNThjZGRlZWRkZjhmMTk0MDVhYTgnLAogICAgICAgICdhYjA5MDJlOGQ4ODBhODk3NTgyMTJlYjY1Y2RhZjQ3M2ExYTA2ZGE1MjFmYTkxZjI5YjVjYjUyZGIwM2VkODEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDc5MjRkNGY3ZDQzZWE5NjVhNDY1YWUzMDk1ZmY0MTEzMWU1OTQ2ZjNjODVmNzllNDRhZGJjZjhlMjdlMDgwZScsCiAgICAgICAgJzU4MWUyODcyYTg2YzcyYTY4Mzg0MmVjMjI4Y2M2ZGVmZWE0MGFmMmJkODk2ZDNhNWM1MDRkYzlmZjZhMjZiNTgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGVmZGVhNGNkYjY3Nzc1MGE0MjBmZWU4MDdlYWNmMjFlYjk4OThhZTc5Yjk3Njg3NjZlNGZhYTA0YTJkNGEzNCcsCiAgICAgICAgJzQyMTFhYjA2OTQ2MzUxNjhlOTk3YjBlYWQyYTkzZGFlY2VkMWY0YTA0YTk1YzBmNmNmYjE5OWY2OWU1NmViNzcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMmI0ZWEwYTc5N2E0NDNkMjkzZWY1Y2ZmNDQ0ZjQ5NzlmMDZhY2ZlYmQ3ZTg2ZDI3NzQ3NTY1NjEzODM4NWI2YycsCiAgICAgICAgJzg1ZTg5YmMwMzc5NDVkOTNiMzQzMDgzYjVhMWM4NjEzMWEwMWY2MGM1MDI2OTc2M2I1NzBjODU0ZTVjMDliN2EnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzUyYmJmNGE0Y2RkMTI1NjRmOTNmYTMzMmNlMzMzMzAxZDlhZDQwMjcxZjgxMDcxODEzNDBhZWYyNWJlNTlkNScsCiAgICAgICAgJzMyMWViNDA3NTM0OGY1MzRkNTljMTgyNTlkZGEzZTFmNGExYjNiMmU3MWIxMDM5YzY3YmQzZDhiY2Y4MTk5OGMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMmZhMjEwNGQ2YjM4ZDExYjAyMzAwMTA1NTk4NzkxMjRlNDJhYjhkZmVmZjVmZjI5ZGM5Y2RhZGQ0ZWNhY2MzZicsCiAgICAgICAgJzJkZTEwNjgyOTVkZDg2NWI2NDU2OTMzNWJkNWRkODAxODFkNzBlY2ZjODgyNjQ4NDIzYmE3NmI1MzJiN2Q2NycKICAgICAgXSwKICAgICAgWwogICAgICAgICc5MjQ4Mjc5YjA5YjRkNjhkYWIyMWE5YjA2NmVkZGE4MzI2M2MzZDg0ZTA5NTcyZTI2OWNhMGNkN2Y1NDUzNzE0JywKICAgICAgICAnNzMwMTZmN2JmMjM0YWFkZTVkMWFhNzFiZGVhMmIxZmYzZmMwZGUyYTg4NzkxMmZmZTU0YTMyY2U5N2NiMzQwMicKICAgICAgXSwKICAgICAgWwogICAgICAgICdkYWVkNGYyYmUzYThiZjI3OGU3MDEzMmZiMGJlYjc1MjJmNTcwZTE0NGJmNjE1YzA3ZTk5NmQ0NDNkZWU4NzI5JywKICAgICAgICAnYTY5ZGNlNGE3ZDZjOThlOGQ0YTFhY2E4N2VmOGQ3MDAzZjgzYzIzMGYzYWZhNzI2YWI0MGU1MjI5MGJlMWM1NScKICAgICAgXSwKICAgICAgWwogICAgICAgICdjNDRkMTJjNzA2NWQ4MTJlOGFjZjI4ZDdjYmIxOWY5MDExZWNkOWU5ZmRmMjgxYjBlNmEzYjVlODdkMjJlN2RiJywKICAgICAgICAnMjExOWE0NjBjZTMyNmNkYzc2YzQ1OTI2Yzk4MmZkYWMwZTEwNmU4NjFlZGY2MWM1YTAzOTA2M2YwZTBlNjQ4MicKICAgICAgXSwKICAgICAgWwogICAgICAgICc2YTI0NWJmNmRjNjk4NTA0Yzg5YTIwY2ZkZWQ2MDg1MzE1MmI2OTUzMzZjMjgwNjNiNjFjNjVjYmQyNjllNmI0JywKICAgICAgICAnZTAyMmNmNDJjMmJkNGE3MDhiM2Y1MTI2ZjE2YTI0YWQ4YjMzYmE0OGQwNDIzYjZlZmQ1ZTYzNDgxMDBkOGE4MicKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNjk3ZmZhNmZkOWRlNjI3YzA3N2UzZDJmZTU0MTA4NGNlMTMzMDBiMGJlYzExNDZmOTVhZTU3ZjBkMGJkNmE1JywKICAgICAgICAnYjljMzk4ZjE4NjgwNmY1ZDI3NTYxNTA2ZTQ1NTc0MzNhMmNmMTUwMDllNDk4YWU3YWRlZTlkNjNkMDFiMjM5NicKICAgICAgXSwKICAgICAgWwogICAgICAgICc2MDViZGIwMTk5ODE3MThiOTg2ZDBmMDdlODM0Y2IwZDlkZWI4MzYwZmZiN2Y2MWRmOTgyMzQ1ZWYyN2E3NDc5JywKICAgICAgICAnMjk3MmQyZGU0ZjhkMjA2ODFhNzhkOTNlYzk2ZmUyM2MyNmJmYWU4NGZiMTRkYjQzYjAxZTFlOTA1NmI4YzQ5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzYyZDE0ZGFiNDE1MGJmNDk3NDAyZmRjNDVhMjE1ZTEwZGNiMDFjMzU0OTU5YjEwY2ZlMzFjN2U5ZDg3ZmYzM2QnLAogICAgICAgICc4MGZjMDZiZDhjYzViMDEwOTgwODhhMTk1MGVlZDBkYjAxYWExMzI5NjdhYjQ3MjIzNWY1NjQyNDgzYjI1ZWFmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzgwYzYwYWQwMDQwZjI3ZGFkZTViNGIwNmM0MDhlNTZiMmM1MGU5ZjU2YjliOGI0MjVlNTU1YzJmODYzMDhiNmYnLAogICAgICAgICcxYzM4MzAzZjFjYzVjMzBmMjZlNjZiYWQ3ZmU3MmY3MGE2NWVlZDRjYmU3MDI0ZWIxYWEwMWY1NjQzMGJkNTdhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzdhOTM3NWFkNjE2N2FkNTRhYTc0YzYzNDhjYzU0ZDM0NGNjNWRjOTQ4N2Q4NDcwNDlkNWVhYmIwZmEwM2M4ZmInLAogICAgICAgICdkMGUzZmE5ZWNhODcyNjkwOTU1OWUwZDc5MjY5MDQ2YmRjNTllYTEwYzcwY2UyYjAyZDQ5OWVjMjI0ZGM3ZjcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDUyOGVjZDliNjk2YjU0YzkwN2E5ZWQwNDU0NDdhNzliYjQwOGVjMzliNjhkZjUwNGJiNTFmNDU5YmMzZmZjOScsCiAgICAgICAgJ2VlY2Y0MTI1MzEzNmU1Zjk5OTY2ZjIxODgxZmQ2NTZlYmM0MzQ1NDA1YzUyMGRiYzA2MzQ2NWI1MjE0MDk5MzMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDkzNzBhNGI1ZjQzNDEyZWEyNWY1MTRlOGVjZGFkMDUyNjYxMTVlNGE3ZWNiMTM4NzIzMTgwOGY4YjQ1OTYzJywKICAgICAgICAnNzU4ZjNmNDFhZmQ2ZWQ0MjhiMzA4MWIwNTEyZmQ2MmE1NGMzZjNhZmJiNWI2NzY0YjY1MzA1MmExMjk0OWM5YScKICAgICAgXSwKICAgICAgWwogICAgICAgICc3N2YyMzA5MzZlZTg4Y2JiZDczZGY5MzBkNjQ3MDJlZjg4MWQ4MTFlMGUxNDk4ZTJmMWMxM2ViMWZjMzQ1ZDc0JywKICAgICAgICAnOTU4ZWY0MmE3ODg2YjY0MDBhMDgyNjZlOWJhMWIzNzg5NmM5NTMzMGQ5NzA3N2NiYmU4ZWIzYzc2NzFjNjBkNicKICAgICAgXSwKICAgICAgWwogICAgICAgICdmMmRhYzk5MWNjNGNlNGI5ZWE0NDg4N2U1YzdjMGJjZTU4YzgwMDc0YWI5ZDRkYmFlYjI4NTMxYjc3MzlmNTMwJywKICAgICAgICAnZTBkZWRjOWIzYjJmOGRhZDRkYTFmMzJkZWMyNTMxZGY5ZWI1ZmJlYjA1OThlNGZkMWExMTdkYmE3MDNhM2MzNycKICAgICAgXSwKICAgICAgWwogICAgICAgICc0NjNiM2Q5ZjY2MjYyMWZiMWI0YmU4ZmJiZTI1MjAxMjVhMjE2Y2RmYzlkYWUzZGViY2JhNDg1MGM2OTBkNDViJywKICAgICAgICAnNWVkNDMwZDc4YzI5NmMzNTQzMTE0MzA2ZGQ4NjIyZDdjNjIyZTI3Yzk3MGExZGUzMWNiMzc3YjAxYWY3MzA3ZScKICAgICAgXSwKICAgICAgWwogICAgICAgICdmMTZmODA0MjQ0ZTQ2ZTJhMDkyMzJkNGFmZjNiNTk5NzZiOThmYWMxNDMyOGEyZDFhMzI0OTZiNDk5OThmMjQ3JywKICAgICAgICAnY2VkYWJkOWI4MjIwM2Y3ZTEzZDIwNmZjZGY0ZTMzZDkyYTZjNTNjMjZlNWNjZTI2ZDY1Nzk5NjJjNGUzMWRmNicKICAgICAgXSwKICAgICAgWwogICAgICAgICdjYWY3NTQyNzJkYzg0NTYzYjAzNTJiN2ExNDMxMWFmNTVkMjQ1MzE1YWNlMjdjNjUzNjllMTVmNzE1MWQ0MWQxJywKICAgICAgICAnY2I0NzQ2NjBlZjM1ZjVmMmE0MWI2NDNmYTVlNDYwNTc1ZjRmYTliNzk2MjIzMmE1YzMyZjkwODMxOGEwNDQ3NicKICAgICAgXSwKICAgICAgWwogICAgICAgICcyNjAwY2E0YjI4MmNiOTg2Zjg1ZDBmMTcwOTk3OWQ4YjQ0YTA5YzA3Y2I4NmQ3YzEyNDQ5N2JjODZmMDgyMTIwJywKICAgICAgICAnNDExOWI4ODc1M2MxNWJkNmE2OTNiMDNmY2RkYmI0NWQ1YWM2YmU3NGFiNWYwZWY0NGIwYmU5NDc1YTdlNGI0MCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NjM1Y2E3MmQ3ZTg0MzJjMzM4ZWM1M2NkMTIyMjBiYzAxYzQ4Njg1ZTI0ZjdkYzhjNjAyYTc3NDY5OThlNDM1JywKICAgICAgICAnOTFiNjQ5NjA5NDg5ZDYxM2QxZDVlNTkwZjc4ZTZkNzRlY2ZjMDYxZDU3MDQ4YmFkOWU3NmYzMDJjNWI5YzYxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc1NGUzMjM5ZjMyNTU3MGNkYmJmNGE4N2RlZWU4YTY2YjdmMmIzMzQ3OWQ0NjhmYmMxYTUwNzQzYmY1NmNjMTgnLAogICAgICAgICc2NzNmYjg2ZTViZGEzMGZiM2NkMGVkMzA0ZWE0OWEwMjNlZTMzZDAxOTdhNjk1ZDBjNWQ5ODA5M2M1MzY2ODMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTNlNmJkMTA3MWExZTk2YWZmNTc4NTljODJkNTcwZjAzMzA4MDA2NjFkMWM5NTJmOWZlMjY5NDY5MWQ5YjllOCcsCiAgICAgICAgJzU5YzllMGJiYTM5NGU3NmY0MGMwYWE1ODM3OWEzY2I2YTVhMjI4Mzk5M2U5MGM0MTY3MDAyYWY0OTIwZTM3ZjUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTg2YjQ4M2QwNTZhMDMzODI2YWU3M2Q4OGY3MzI5ODVjNGNjYjFmMzJiYTM1ZjRiNGNjNDdmZGNmMDRhYTZlYicsCiAgICAgICAgJzNiOTUyZDMyYzY3Y2Y3N2UyZTE3NDQ2ZTIwNDE4MGFiMjFmYjgwOTA4OTUxMzhiNGE0YTc5N2Y4NmU4MDg4OGInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGY5ZDcwYTZiOTg3NmNlNTQ0Yzk4NTYxZjRiZTRmNzI1NDQyZTZkMmI3MzdkOWM5MWE4MzIxNzI0Y2UwOTYzZicsCiAgICAgICAgJzU1ZWIyZGFmZDg0ZDZjY2Q1Zjg2MmI3ODVkYzM5ZDRhYjE1NzIyMjcyMGVmOWRhMjE3YjhjNDVjZjJiYTI0MTcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNWVkZDVjYzIzYzUxZTg3YTQ5N2NhODE1ZDVkY2UwZjhhYjUyNTU0Zjg0OWVkODk5NWRlNjRjNWYzNGNlNzE0MycsCiAgICAgICAgJ2VmYWU5YzhkYmMxNDEzMDY2MWU4Y2VjMDMwYzg5YWQwYzEzYzY2YzBkMTdhMjkwNWNkYzcwNmFiNzM5OWE4NjgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMjkwNzk4YzJiNjQ3NjgzMGRhMTJmZTAyMjg3ZTllNzc3YWEzZmJhMWMzNTViMTdhNzIyZDM2MmY4NDYxNGZiYScsCiAgICAgICAgJ2UzOGRhNzZkY2Q0NDA2MjE5ODhkMDBiY2Y3OWFmMjVkNWIyOWMwOTRkYjJhMjMxNDZkMDAzYWZkNDE5NDNlN2EnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYWYzYzQyM2E5NWQ5ZjViMzA1NDc1NGVmYTE1MGFjMzljZDI5NTUyZmUzNjAyNTczNjJkZmRlY2VmNDA1M2I0NScsCiAgICAgICAgJ2Y5OGEzZmQ4MzFlYjJiNzQ5YTkzYjBlNmYzNWNmYjQwYzhjZDVhYTY2N2ExNTU4MWJjMmZlZGVkNDk4ZmQ5YzYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzY2ZGJiMjRkMTM0ZTc0NWNjY2FhMjhjOTliZjI3NDkwNmJiNjZiMjZkY2Y5OGRmOGQyZmVkNTBkODg0MjQ5YScsCiAgICAgICAgJzc0NGIxMTUyZWFjYmU1ZTM4ZGNjODg3OTgwZGEzOGI4OTc1ODRhNjVmYTA2Y2VkZDJjOTI0Zjk3Y2JhYzU5OTYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNTlkYmY0NmY4Yzk0NzU5YmEyMTI3N2MzMzc4NGY0MTY0NWY3YjQ0ZjZjNTk2YTU4Y2U5MmU2NjYxOTFhYmUzZScsCiAgICAgICAgJ2M1MzRhZDQ0MTc1ZmJjMzAwZjRlYTZjZTY0ODMwOWEwNDJjZTczOWE3OTE5Nzk4Y2Q4NWUyMTZjNGEzMDdmNmUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZjEzYWRhOTUxMDNjNDUzNzMwNWU2OTFlNzRlOWE0YThkZDY0N2U3MTFhOTVlNzNjYjYyZGM2MDE4Y2ZkODdiOCcsCiAgICAgICAgJ2UxMzgxN2I0NGVlMTRkZTY2M2JmNGJjODA4MzQxZjMyNjk0OWUyMWE2YTc1YzI1NzA3Nzg0MTliZGFmNTczM2QnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzc1NGI0ZmEwZThhY2VkMDZkNDE2N2EyYzU5Y2NhNGNkYTE4NjljMDZlYmFkZmI2NDg4NTUwMDE1YTg4NTIyYycsCiAgICAgICAgJzMwZTkzZTg2NGU2NjlkODIyMjRiOTY3YzMwMjBiOGZhOGQxZTRlMzUwYjZjYmNjNTM3YTQ4YjU3ODQxMTYzYTInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTQ4ZGNhZGY1OTkwZTA0OGFhMzg3NGQ0NmFiZWY5ZDcwMTg1OGY5NWRlODA0MWQyYTY4MjhjOTllMjI2MjUxOScsCiAgICAgICAgJ2U0OTFhNDI1MzdmNmU1OTdkNWQyOGEzMjI0YjFiYzI1ZGY5MTU0ZWZiZDJlZjFkMmNiYmEyY2FlNTM0N2Q1N2UnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzk2MjQxNDQ1MGM3NmMxNjg5YzdiNDhmODIwMmVjMzdmYjIyNGNmNWFjMGJmYTE1NzAzMjhhOGEzZDdjNzdhYicsCiAgICAgICAgJzEwMGI2MTBlYzRmZmI0NzYwZDVjMWZjMTMzZWY2ZjZiMTI1MDdhMDUxZjA0YWM1NzYwYWZhNWIyOWRiODM0MzcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzUxNDA4NzgzNDk2NGI1NGIxNWIxNjA2NDRkOTE1NDg1YTE2OTc3MjI1Yjg4NDdiYjBkZDA4NTEzN2VjNDdjYScsCiAgICAgICAgJ2VmMGFmYmIyMDU2MjA1NDQ4ZTE2NTJjNDhlODEyN2ZjNjAzOWU3N2MxNWMyMzc4YjdlN2QxNWEwZGUyOTMzMTEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDNjYzMwYWQ2YjQ4M2U0YmM3OWNlMmM5ZGQ4YmM1NDk5M2U5NDdlYjhkZjc4N2I0NDI5NDNkM2Y3YjUyN2VhZicsCiAgICAgICAgJzhiMzc4YTIyZDgyNzI3OGQ4OWM1ZTliZThmOTUwOGFlM2MyYWQ0NjI5MDM1ODYzMGFmYjM0ZGIwNGVlZGUwYTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTYyNGQ4NDc4MDczMjg2MGNlMWM3OGZjYmZlZmUwOGIyYjI5ODIzZGI5MTNmNjQ5Mzk3NWJhMGZmNDg0NzYxMCcsCiAgICAgICAgJzY4NjUxY2Y5YjZkYTkwM2UwOTE0NDQ4YzZjZDlkNGNhODk2ODc4ZjUyODJiZTRjOGNjMDZlMmE0MDQwNzg1NzUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzMzY2U4MGRhOTU1YThhMjY5MDJjOTU2MzNlNjJhOTg1MTkyNDc0YjVhZjIwN2RhNmRmN2I0ZmQ1ZmM2MWNkNCcsCiAgICAgICAgJ2Y1NDM1YTJiZDJiYWRmN2Q0ODVhNGQ4YjhkYjlmY2NlM2UxZWY4ZTAyMDFlNDU3OGM1NDY3M2JjMWRjNWVhMWQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTVkOTQ0MTI1NDk0NTA2NGNmMWExYzMzYmJkM2I0OWY4OTY2YzUwOTIxNzFlNjk5ZWYyNThkZmFiODFjMDQ1YycsCiAgICAgICAgJ2Q1NmViMzBiNjk0NjNlNzIzNGY1MTM3YjczYjg0MTc3NDM0ODAwYmFjZWJmYzY4NWZjMzdiYmU5ZWZlNDA3MGQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTFkMGZjZjJlYzlkZTY3NWI2MTIxMzZlNWNlNzBkMjcxYzIxNDE3YzlkMmI4YWFhYWMxMzg1OTlkMDcxNzk0MCcsCiAgICAgICAgJ2VkZDc3ZjUwYmNiNWEzY2FiMmU5MDczNzMwOTY2N2YyNjQxNDYyYTU0MDcwZjNkNTE5MjEyZDM5YzE5N2E2MjknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTIyZmJlMTVjMGFmOGNjYzU3ODBjMDczNWY4NGRiZTlhNzkwYmFkZWU4MjQ1YzA2YzdjYTM3MzMxY2IzNjk4MCcsCiAgICAgICAgJ2E4NTViYWJhZDVjZDYwYzg4YjQzMGE2OWY1M2ExYTdhMzgyODkxNTQ5NjQ3OTliZTQzZDA2ZDc3ZDMxZGEwNicKICAgICAgXSwKICAgICAgWwogICAgICAgICczMTEwOTFkZDk4NjBlOGUyMGVlMTM0NzNjMTE1NWY1ZjY5NjM1ZTM5NDcwNGVhYTc0MDA5NDUyMjQ2Y2ZhOWIzJywKICAgICAgICAnNjZkYjY1NmY4N2QxZjA0ZmZmZDFmMDQ3ODhjMDY4MzA4NzFlYzVhNjRmZWVlNjg1YmQ4MGYwYjEyODZkODM3NCcKICAgICAgXSwKICAgICAgWwogICAgICAgICczNGMxZmQwNGQzMDFiZTg5YjMxYzA0NDJkM2U2YWMyNDg4MzkyOGI0NWE5MzQwNzgxODY3ZDQyMzJlYzJkYmRmJywKICAgICAgICAnOTQxNDY4NWU5N2IxYjU5NTRiZDQ2ZjczMDE3NDEzNmQ1N2YxY2VlYjQ4NzQ0M2RjNTMyMTg1N2JhNzNhYmVlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2YyMTllYTVkNmI1NDcwMWMxYzE0ZGU1YjU1N2ViNDJhOGQxM2YzYWJiY2QwOGFmZmNjMmE1ZTZiMDQ5YjhkNjMnLAogICAgICAgICc0Y2I5NTk1N2U4M2Q0MGIwZjczYWY0NTQ0Y2NjZjZiMWY0YjA4ZDNjMDdiMjdmYjhkOGMyOTYyYTQwMDc2NmQxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Q3Yjg3NDBmNzRhOGZiYWFiMWY2ODNkYjhmNDVkZTI2NTQzYTU0OTBiY2E2MjcwODcyMzY5MTI0NjlhMGI0NDgnLAogICAgICAgICdmYTc3OTY4MTI4ZDljOTJlZTEwMTBmMzM3YWQ0NzE3ZWZmMTVkYjVlZDNjMDQ5YjM0MTFlMDMxNWVhYTQ1OTNiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMyZDMxYzIyMmY4ZjZmMGVmODZmN2M5OGQzYTMzMzVlYWQ1YmNkMzJhYmRkOTQyODlmZTRkMzA5MWFhODI0YmYnLAogICAgICAgICc1ZjMwMzJmNTg5MjE1NmUzOWNjZDNkNzkxNWI5ZTFkYTJlNmRhYzllNmYyNmU5NjExMThkMTRiODQ2MmUxNjYxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc0NjFmMzcxOTE0YWIzMjY3MTA0NWExNTVkOTgzMWVhODc5M2Q3N2NkNTk1OTJjNDM0MGY4NmNiYzE4MzQ3YjUnLAogICAgICAgICc4ZWMwYmEyMzhiOTZiZWMwY2JkZGRjYWUwYWE0NDI1NDJlZWUxZmY1MGM5ODZlYTZiMzk4NDdiM2NjMDkyZmY2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VlMDc5YWRiMWRmMTg2MDA3NDM1NmEyNWFhMzgyMDZhNmQ3MTZiMmMzZTY3NDUzZDI4NzY5OGJhZDdiMmIyZDYnLAogICAgICAgICc4ZGMyNDEyYWFmZTNiZTVjNGM1ZjM3ZTBlY2M1ZjlmNmE0NDY5ODlhZjA0YzRlMjVlYmFhYzQ3OWVjMWM4YzFlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE2ZWM5M2U0NDdlYzgzZjA0NjdiMTgzMDJlZTYyMGY3ZTY1ZGUzMzE4NzRjOWRjNzJiZmQ4NjE2YmE5ZGE2YjUnLAogICAgICAgICc1ZTQ2MzExNTBlNjJmYjQwZDBlOGMyYTdjYTU4MDRhMzlkNTgxODZhNTBlNDk3MTM5NjI2Nzc4ZTI1YjA2NzRkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VhYTVmOTgwYzI0NWY2ZjAzODk3ODI5MGFmYTcwYjZiZDg4NTU4OTdmOThiNmFhNDg1Yjk2MDY1ZDUzN2JkOTknLAogICAgICAgICdmNjVmNWQzZTI5MmMyZTA4MTlhNTI4MzkxYzk5NDYyNGQ3ODQ4NjlkN2U2ZWE2N2ZiMTgwNDEwMjRlZGMwN2RjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc4Yzk0MDc1NDRhYzEzMjY5MmVlMTkxMGEwMjQzOTk1OGFlMDQ4NzcxNTEzNDJlYTk2YzRiNmIzNWE0OWY1MScsCiAgICAgICAgJ2YzZTAzMTkxNjllYjliODVkNTQwNDc5NTUzOWE1ZTY4ZmExZmJkNTgzYzA2NGQyNDYyYjY3NWYxOTRhM2RkYjQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDk0ZjRiZTIxOWExYTc3MDE2ZGNkODM4NDMxYWVhMDAwMWNkYzhhZTdhNmZjNjg4NzI2NTc4ZDk3MDI4NTdhNScsCiAgICAgICAgJzQyMjQyYTk2OTI4M2E1ZjMzOWJhN2YwNzVlMzZiYTJhZjkyNWNlMzBkNzY3ZWQ2ZTU1ZjRiMDMxODgwZDU2MmMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTU5OGE4MDMwZGE2ZDg2YzZiYzdmMmY1MTQ0ZWE1NDlkMjgyMTFlYTU4ZmFhNzBlYmY0YzFlNjY1YzFmZTliNScsCiAgICAgICAgJzIwNGI1ZDZmODQ4MjJjMzA3ZTRiNGE3MTQwNzM3YWVjMjNmYzYzYjY1YjM1Zjg2YTEwMDI2ZGJkMmQ4NjRlNmInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYzQxOTE2MzY1YWJiMmI1ZDA5MTkyZjVmMmRiZWFmZWMyMDhmMDIwZjEyNTcwYTE4NGRiYWRjM2U1ODU5NTk5NycsCiAgICAgICAgJzRmMTQzNTFkMDA4N2VmYTQ5ZDI0NWIzMjg5ODQ5ODlkNWNhZjk0NTBmMzRiZmMwZWQxNmU5NmI1OGZhOTkxMycKICAgICAgXSwKICAgICAgWwogICAgICAgICc4NDFkNjA2M2E1ODZmYTQ3NWE3MjQ2MDRkYTAzYmM1YjkyYTJlMGQyZTBhMzZhY2ZlNGM3M2E1NTE0NzQyODgxJywKICAgICAgICAnNzM4NjdmNTljMDY1OWU4MTkwNGY5YTFjNzU0MzY5OGU2MjU2MmQ2NzQ0YzE2OWNlN2EzNmRlMDFhOGQ2MTU0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzVlOTViYjM5OWE2OTcxZDM3NjAyNjk0N2Y4OWJkZTJmMjgyYjMzODEwOTI4YmU0ZGVkMTEyYWM0ZDcwZTIwZDUnLAogICAgICAgICczOWYyM2YzNjY4MDkwODViZWViZmM3MTE4MTMxMzc3NWE5OWM5YWVkN2Q4YmEzOGIxNjEzODRjNzQ2MDEyODY1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM2ZTQ2NDFhNTM5NDhmZDQ3NmMzOWY4YTk5ZmQ5NzRlNWVjMDc1NjRiNTMxNWQ4YmY5OTQ3MWJjYTBlZjJmNjYnLAogICAgICAgICdkMjQyNGIxYjFhYmU0ZWI4MTY0MjI3YjA4NWM5YWE5NDU2ZWExMzQ5M2ZkNTYzZTA2ZmQ1MWNmNTY5NGM3OGZjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMzNjU4MWVhN2JmYmJiMjkwYzE5MWEyZjUwN2E0MWNmNTY0Mzg0MjE3MGU5MTRmYWVhYjI3YzJjNTc5ZjcyNicsCiAgICAgICAgJ2VhZDEyMTY4NTk1ZmUxYmU5OTI1MjEyOWI2ZTU2YjMzOTFmN2FiMTQxMGNkMWUwZWYzZGNkY2FiZDJmZGEyMjQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGFiODk4MTZkYWRmZDZiNmExZjI2MzRmY2YwMGVjODQwMzc4MTAyNWVkNjg5MGM0ODQ5NzQyNzA2YmQ0M2VkZScsCiAgICAgICAgJzZmZGNlZjA5ZjJmNmQwYTA0NGU2NTRhZWY2MjQxMzZmNTAzZDQ1OWMzZTg5ODQ1ODU4YTQ3YTkxMjljZGQyNGUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMWUzM2YxYTc0NmM5YzU3NzgxMzMzNDRkOTI5OWZjYWEyMGIwOTM4ZThhY2ZmMjU0NGJiNDAyODRiOGM1ZmI5NCcsCiAgICAgICAgJzYwNjYwMjU3ZGQxMWIzYWE5YzhlZDYxOGQyNGVkZmYyMzA2ZDMyMGYxZDAzMDEwZTMzYTdkMjA1N2YzYjNiNicKICAgICAgXSwKICAgICAgWwogICAgICAgICc4NWI3YzFkY2IzY2VjMWI3ZWU3ZjMwZGVkNzlkZDIwYTBlZDFmNGNjMThjYmNmY2ZhNDEwMzYxZmQ4ZjA4ZjMxJywKICAgICAgICAnM2Q5OGE5Y2RkMDI2ZGQ0M2YzOTA0OGYyNWE4ODQ3ZjRmY2FmYWQxODk1ZDdhNjMzYzZmZWQzYzM1ZTk5OTUxMScKICAgICAgXSwKICAgICAgWwogICAgICAgICcyOWRmOWZiZDhkOWU0NjUwOTI3NWY0YjEyNWQ2ZDQ1ZDdmYmU5YTNiODc4YTdhZjg3MmEyODAwNjYxYWM1ZjUxJywKICAgICAgICAnYjRjNGZlOTljNzc1YTYwNmUyZDg4NjIxNzkxMzlmZmRhNjFkYzg2MWMwMTllNTVjZDI4NzZlYjJhMjdkODRiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2EwYjFjYWUwNmIwYTg0N2EzZmVhNmU2NzFhYWY4YWRmZGZlNThjYTJmNzY4MTA1YzgwODJiMmU0NDlmY2UyNTInLAogICAgICAgICdhZTQzNDEwMmVkZGUwOTU4ZWM0YjE5ZDkxN2E2YTI4ZTZiNzJkYTE4MzRhZmYwZTY1MGYwNDk1MDNhMjk2Y2YyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzRlOGNlYWZiOWIzZTlhMTM2ZGM3ZmY2N2U4NDAyOTViNDk5ZGZiM2IyMTMzZTRiYTExM2YyZTRjMGUxMjFlNScsCiAgICAgICAgJ2NmMjE3NDExOGM4YjZkN2E0YjQ4ZjZkNTM0Y2U1Yzc5NDIyYzA4NmE2MzQ2MDUwMmI4MjdjZTYyYTMyNjY4M2MnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDI0YTQ0ZTA0N2UxOWI2ZjVhZmI4MWM3Y2EyZjY5MDgwYTUwNzY2ODlhMDEwOTE5ZjQyNzI1YzJiNzg5YTMzYicsCiAgICAgICAgJzZmYjhkNTU5MWI0NjZmOGZjNjNkYjUwZjFjMGYxYzY5MDEzZjk5Njg4N2I4MjQ0ZDJjZGVjNDE3YWZlYThmYTMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWEwMTYwNmE3YTZjOWNkZDI0OWZkZmNmYWNiOTk1ODQwMDFlZGQyOGFiYmFiNzdiNTEwNGU5OGU4ZTNiMzVkNCcsCiAgICAgICAgJzMyMmFmNDkwOGM3MzEyYjBjZmJmZTM2OWY3YTdiM2NkYjdkNDQ5NGJjMjgyMzcwMGNmZDY1MjE4OGEzZWE5OGQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYWY4YWRkYmYyYjY2MWM4YTZjNjMyODY1NWViOTY2NTEyNTIwMDdkOGM1ZWEzMWJlNGFkMTk2ZGU4Y2UyMTMxZicsCiAgICAgICAgJzY3NDllNjdjMDI5Yjg1ZjUyYTAzNGVhZmQwOTY4MzZiMjUyMDgxODY4MGUyNmFjOGYzZGZiY2RiNzE3NDk3MDAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTNhZTE5NzQ1NjZjYTA2Y2M1MTZkNDdlMGZiMTY1YTY3NGEzZGFiY2ZjYTE1ZTcyMmYwZTM0NTBmNDU4ODknLAogICAgICAgICcyYWVhYmU3ZTQ1MzE1MTAxMTYyMTdmMDdiZjRkMDczMDBkZTk3ZTQ4NzRmODFmNTMzNDIwYTcyZWViMGJkNmE0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzU5MWVlMzU1MzEzZDk5NzIxY2Y2OTkzZmZlZDFlM2UzMDE5OTNmZjNlZDI1ODgwMjA3NWVhOGNlZDM5N2UyNDYnLAogICAgICAgICdiMGVhNTU4YTExM2MzMGJlYTYwZmM0Nzc1NDYwYzc5MDFmZjBiMDUzZDI1Y2EyYmRlZWU5OGYxYTRiZTVkMTk2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzExMzk2ZDU1ZmRhNTRjNDlmMTlhYTk3MzE4ZDhkYTYxZmE4NTg0ZTQ3YjA4NDk0NTA3N2NmMDMyNTViNTI5ODQnLAogICAgICAgICc5OThjNzRhOGNkNDVhYzAxMjg5ZDU4MzNhN2JlYjQ3NDRmZjUzNmIwMWIyNTdiZTRjNTc2N2JlYTkzZWE1N2E0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzNjNWQyYTFiYTM5YzVhMTc5MDAwMDczOGM5ZTBjNDBiOGRjZGZkNTQ2ODc1NGI2NDA1NTQwMTU3ZTAxN2FhN2EnLAogICAgICAgICdiMjI4NDI3OTk5NWEzNGUyZjlkNGRlNzM5NmZjMThiODBmOWI4YjlmZGQyNzBmNjY2MWY3OWNhNGM4MWJkMjU3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2NjODcwNGI4YTYwYTBkZWZhM2E5OWE3Mjk5ZjJlOWMzZmJjMzk1YWZiMDRhYzA3ODQyNWVmOGExNzkzY2MwMzAnLAogICAgICAgICdiZGQ0NjAzOWZlZWQxNzg4MWQxZTA4NjJkYjM0N2Y4Y2YzOTViNzRmYzRiY2RjNGU5NDBiNzRlM2FjMWYxYjEzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2M1MzNlNGY3ZWE4NTU1YWFjZDk3NzdhYzVjYWQyOWI5N2RkNGRlZmNjYzUzZWU3ZWEyMDQxMTliMjg4OWIxOTcnLAogICAgICAgICc2ZjBhMjU2YmM1ZWZkZjQyOWEyZmI2MjQyZjFhNDNhMmQ5YjkyNWJiNGE0YjNhMjZiYjhlMGY0NWViNTk2MDk2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2MxNGY4ZjJjY2IyN2Q2ZjEwOWY2ZDA4ZDAzY2M5NmE2OWJhOGMzNGVlYzA3YmJjZjU2NmQ0OGUzM2RhNjU5MycsCiAgICAgICAgJ2MzNTlkNjkyM2JiMzk4ZjdmZDQ0NzNlMTZmZTFjMjg0NzViNzQwZGQwOTgwNzVlNmMwZTg2NDkxMTNkYzNhMzgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTZjYmMzMDQ2YmM2YTQ1MGJhYzI0Nzg5ZmExNzExNWE0Yzk3MzllZDc1ZjhmMjFjZTQ0MWY3MmUwYjkwZTZlZicsCiAgICAgICAgJzIxYWU3ZjQ2ODBlODg5YmIxMzA2MTllMmMwZjk1YTM2MGNlYjU3M2M3MDYwMzEzOTg2MmFmZDYxN2ZhOWI5ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICczNDdkNmQ5YTAyYzQ4OTI3ZWJmYjg2YzEzNTliMWNhZjEzMGEzYzAyNjdkMTFjZTYzNDRiMzlmOTlkNDNjYzM4JywKICAgICAgICAnNjBlYTdmNjFhMzUzNTI0ZDFjOTg3ZjZlY2VjOTJmMDg2ZDU2NWFiNjg3ODcwY2IxMjY4OWZmMWUzMWM3NDQ0OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdkYTY1NDVkMjE4MWRiOGQ5ODNmN2RjYjM3NWVmNTg2NmQ0N2M2N2IxYmYzMWM4Y2Y4NTVlZjc0MzdiNzI2NTZhJywKICAgICAgICAnNDliOTY3MTVhYjY4NzhhNzllNzhmMDdjZTU2ODBjNWQ2NjczMDUxYjQ5MzViZDg5N2ZlYTgyNGI3N2RjMjA4YScKICAgICAgXSwKICAgICAgWwogICAgICAgICdjNDA3NDdjYzlkMDEyY2IxYTEzYjgxNDgzMDljNmRlN2VjMjVkNjk0NWQ2NTcxNDZiOWQ1OTk0YjhmZWIxMTExJywKICAgICAgICAnNWNhNTYwNzUzYmUyYTEyZmM2ZGU2Y2FmMmNiNDg5NTY1ZGI5MzYxNTZiOTUxNGUxYmI1ZTgzMDM3ZTBmYTJkNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc0ZTQyYzhlYzgyYzk5Nzk4Y2NmM2E2MTBiZTg3MGU3ODMzOGM3ZjcxMzM0OGJkMzRjODIwM2VmNDAzN2YzNTAyJywKICAgICAgICAnNzU3MWQ3NGVlNWUwZmI5MmE3YThiMzNhMDc3ODMzNDFhNTQ5MjE0NGNjNTRiY2M0MGE5NDQ3MzY5MzYwNjQzNycKICAgICAgXSwKICAgICAgWwogICAgICAgICczNzc1YWI3MDg5YmM2YWY4MjNhYmEyZTFhZjcwYjIzNmQyNTFjYWRiMGM4Njc0MzI4NzUyMmExYjNiMGRlZGVhJywKICAgICAgICAnYmU1MmQxMDdiY2ZhMDlkOGJjYjk3MzZhODI4Y2ZhN2ZhYzhkYjE3YmY3YTc2YTJjNDJhZDk2MTQwOTAxOGNmNycKICAgICAgXSwKICAgICAgWwogICAgICAgICdjZWUzMWNiZjdlMzRlYzM3OWQ5NGZiODE0ZDNkNzc1YWQ5NTQ1OTVkMTMxNGJhODg0Njk1OWUzZTgyZjc0ZTI2JywKICAgICAgICAnOGZkNjRhMTRjMDZiNTg5YzI2Yjk0N2FlMmJjZjZiZmEwMTQ5ZWYwYmUxNGVkNGQ4MGY0NDhhMDFjNDNiMWM2ZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdiNGY5ZWFlYTA5YjY5MTc2MTlmNmVhNmE0ZWI1NDY0ZWZkZGI1OGZkNDViMWViZWZjZGMxYTAxZDA4YjQ3OTg2JywKICAgICAgICAnMzllNWM5OTI1YjVhNTRiMDc0MzNhNGYxOGM2MTcyNmY4YmIxMzFjMDEyY2E1NDJlYjI0YThhYzA3MjAwNjgyYScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkNDI2M2RmYzNkMmRmOTIzYTAxNzlhNDg5NjZkMzBjZTg0ZTI1MTVhZmMzZGNjYzFiNzc5MDc3OTJlYmNjNjBlJywKICAgICAgICAnNjJkZmFmMDdhMGY3OGZlYjMwZTMwZDYyOTU4NTNjZTE4OWUxMjc3NjBhZDZjZjdmYWUxNjRlMTIyYTIwOGQ1NCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc0ODQ1NzUyNDgyMGZhNjVhNGY4ZDM1ZWI2OTMwODU3YzAwMzJhY2MwYTRhMmRlNDIyMjMzZWVkYTg5NzYxMmM0JywKICAgICAgICAnMjVhNzQ4YWIzNjc5NzlkOTg3MzNjMzhhMWZhMWMyZTdkYzZjYzA3ZGIyZDYwYTlhZTdhNzZhYWE0OWJkMGY3NycKICAgICAgXSwKICAgICAgWwogICAgICAgICdkZmVlZWYxODgxMTAxZjJjYjExNjQ0ZjNhMmFmZGZjMjA0NWUxOTkxOTE1MjkyM2YzNjdhMTc2N2MxMWNjZWRhJywKICAgICAgICAnZWNmYjcwNTZjZjFkZTA0MmY5NDIwYmFiMzk2NzkzYzBjMzkwYmRlNzRiNGJiZGZmMTZhODNhZTA5YTlhNzUxNycKICAgICAgXSwKICAgICAgWwogICAgICAgICc2ZDdlZjZiMTc1NDNmODM3M2M1NzNmNDRlMWYzODk4MzVkODliY2JjNjA2MmNlZDM2YzgyZGY4M2I4ZmFlODU5JywKICAgICAgICAnY2Q0NTBlYzMzNTQzODk4NmRmZWZhMTBjNTdmZWE5YmNjNTIxYTA5NTliMmQ4MGJiZjc0YjE5MGRjYTcxMmQxMCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdlNzU2MDVkNTkxMDJhNWEyNjg0NTAwZDNiOTkxZjJlM2YzYzg4YjkzMjI1NTQ3MDM1YWYyNWFmNjZlMDQ1NDFmJywKICAgICAgICAnZjVjNTQ3NTRhOGY3MWVlNTQwYjliNDg3Mjg0NzNlMzE0ZjcyOWFjNTMwOGIwNjkzODM2MDk5MGUyYmZhZDEyNScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlYjk4NjYwZjRjNGRmYWEwNmEyYmU0NTNkNTAyMGJjOTlhMGMyZTYwYWJlMzg4NDU3ZGQ0M2ZlZmIxZWQ2MjBjJywKICAgICAgICAnNmNiOWE4ODc2ZDljYjg1MjA2MDlhZjNhZGQyNmNkMjBhMGE3Y2Q4YTk0MTExMzFjZTg1ZjQ0MTAwMDk5MjIzZScKICAgICAgXSwKICAgICAgWwogICAgICAgICcxM2U4N2IwMjdkODUxNGQzNTkzOWYyZTY4OTJiMTk5MjIxNTQ1OTY5NDE4ODgzMzZkYzM1NjNlM2I4ZGJhOTQyJywKICAgICAgICAnZmVmNWEzYzY4MDU5YTZkZWM1ZDYyNDExNGJmMWU5MWFhYzJiOWRhNTY4ZDZhYmViMjU3MGQ1NTY0NmI4YWRmMScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlZTE2MzAyNmU5ZmQ2ZmUwMTdjMzhmMDZhNWJlNmZjMTI1NDI0YjM3MWNlMjcwOGU3YmY0NDkxNjkxZTU3NjRhJywKICAgICAgICAnMWFjYjI1MGYyNTVkZDYxYzQzZDk0Y2NjNjcwZDBmNThmNDlhZTNmYTE1Yjk2NjIzZTU0MzBkYTBhZDZjNjJiMicKICAgICAgXSwKICAgICAgWwogICAgICAgICdiMjY4ZjVlZjlhZDUxZTRkNzhkZTNhNzUwYzJkYzg5YjFlNjI2ZDQzNTA1ODY3OTk5OTMyZTVkYjMzYWYzZDgwJywKICAgICAgICAnNWYzMTBkNGIzYzk5YjllYmIxOWY3N2Q0MWMxZGVlMDE4Y2YwZDM0ZmQ0MTkxNjE0MDAzZTk0NWExMjE2ZTQyMycKICAgICAgXSwKICAgICAgWwogICAgICAgICdmZjA3ZjMxMThhOWRmMDM1ZTlmYWQ4NWViNmM3YmZlNDJiMDJmMDFjYTk5Y2VlYTNiZjdmZmRiYTkzYzQ3NTBkJywKICAgICAgICAnNDM4MTM2ZDYwM2U4NThhM2E1YzQ0MGMzOGVjY2JhZGRjMWQyOTQyMTE0ZTJlZGRkNDc0MGQwOThjZWQxZjBkOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc4ZDhiOTg1NWM3YzA1MmEzNDE0NmZkMjBmZmI2NThiZWE0YjlmNjllMGQ4MjVlYmVjMTZlOGMzY2UyYjUyNmExJywKICAgICAgICAnY2RiNTU5ZWVkYzJkNzlmOTI2YmFmNDRmYjg0ZWE0ZDQ0YmNmNTBmZWU1MWQ3Y2ViMzBlMmU3ZjQ2MzAzNjc1OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc1MmRiMGI1Mzg0ZGZiZjA1YmZhOWQ0NzJkN2FlMjZkZmU0Yjg1MWNlY2E5MWIxZWJhNTQyNjMxODBkYTMyYjYzJywKICAgICAgICAnYzNiOTk3ZDA1MGVlNWQ0MjNlYmFmNjZhNmRiOWY1N2IzMTgwYzkwMjg3NTY3OWRlOTI0YjY5ZDg0YTdiMzc1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U2MmY5NDkwZDNkNTFkYTYzOTVlZmQyNGU4MDkxOWNjN2QwZjI5YzNmM2ZhNDhjNmZmZjU0M2JlY2JkNDMzNTInLAogICAgICAgICc2ZDg5YWQ3YmE0ODc2YjBiMjJjMmNhMjgwYzY4Mjg2MmYzNDJjODU5MWYxZGFmNTE3MGUwN2JmZDljY2FmYTdkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzdmMzBlYTI0NzZiMzk5YjQ5NTc1MDljODhmNzdkMDE5MWFmYTJmZjVjYjdiMTRmZDZkOGU3ZDY1YWFhYjExOTMnLAogICAgICAgICdjYTVlZjdkNGIyMzFjOTRjM2IxNTM4OWE1ZjYzMTFlOWRhZmY3YmI2N2IxMDNlOTg4MGVmNGJmZjYzN2FjYWVjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzUwOThmZjFlMWQ5ZjE0ZmI0NmEyMTBmYWRhNmM5MDNmZWYwZmI3YjRhMWRkMWQ5YWM2MGEwMzYxODAwYjdhMDAnLAogICAgICAgICc5NzMxMTQxZDgxZmM4ZjgwODRkMzdjNmU3NTQyMDA2YjNlZTFiNDBkNjBkZmU1MzYyYTViMTMyZmQxN2RkYzAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzJiNzhjN2RlOWVlNTEyYTcyODk1YmU2YjljYmVmYTZlMmYzYzRjY2NlNDQ1Yzk2YjlmMmM4MWUyNzc4YWQ1OCcsCiAgICAgICAgJ2VlMTg0OWY1MTNkZjcxZTMyZWZjMzg5NmVlMjgyNjBjNzNiYjgwNTQ3YWUyMjc1YmE0OTcyMzc3OTRjODc1M2MnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTJjYjc0ZmRkYzhlOWZiY2QwNzZlZWYyYTdjNzJiMGNlMzdkNTBmMDgyNjlkZmMwNzRiNTgxNTUwNTQ3YTRmNycsCiAgICAgICAgJ2QzYWEyZWQ3MWM5ZGQyMjQ3YTYyZGYwNjI3MzZlYjBiYWRkZWE5ZTM2MTIyZDJiZTg2NDFhYmNiMDA1Y2M0YTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODQzODQ0NzU2NmQ0ZDdiZWRhZGMyOTk0OTZhYjM1NzQyNjAwOWEzNWYyMzVjYjE0MWJlMGQ5OWNkMTBhZTNhOCcsCiAgICAgICAgJ2M0ZTEwMjA5MTY5ODBhNGRhNWQwMWFjNWU2YWQzMzA3MzRlZjBkNzkwNjYzMWM0ZjIzOTA0MjZiMmVkZDc5MWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDE2MmQ0ODhiODk0MDIwMzliNTg0YzZmYzZjMzA4ODcwNTg3ZDljNDZmNjYwYjg3OGFiNjVjODJjNzExZDY3ZScsCiAgICAgICAgJzY3MTYzZTkwMzIzNjI4OWY3NzZmMjJjMjVmYjhhM2FmYzE3MzJmMmI4NGI0ZTk1ZGJkYTQ3YWU1YTA4NTI2NDknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnM2ZhZDNmYTg0Y2FmMGYzNGYwZjg5YmZkMmRjZjU0ZmMxNzVkNzY3YWVjM2U1MDY4NGYzYmE0YTRiZjVmNjgzZCcsCiAgICAgICAgJ2NkMWJjN2NiNmNjNDA3YmIyZjBjYTY0N2M3MThhNzMwY2Y3MTg3MmU3ZDBkMmE1M2ZhMjBlZmNkZmU2MTgyNicKICAgICAgXSwKICAgICAgWwogICAgICAgICc2NzRmMjYwMGEzMDA3YTAwNTY4YzFhN2NlMDVkMDgxNmMxZmI4NGJmMTM3MDc5OGYxYzY5NTMyZmFlYjFhODZiJywKICAgICAgICAnMjk5ZDIxZjk0MTNmMzNiM2VkZjQzYjI1NzAwNDU4MGI3MGRiNTdkYTBiMTgyMjU5ZTA5ZWVjYzY5ZTBkMzhhNScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkMzJmNGRhNTRhZGU3NGFiYjgxYjgxNWFkMWZiM2IyNjNkODJkNmM2OTI3MTRiY2ZmODdkMjliZDVlZTlmMDhmJywKICAgICAgICAnZjk0MjllNzM4YjhlNTNiOTY4ZTk5MDE2YzA1OTcwNzc4MmUxNGY0NTM1MzU5ZDU4MmZjNDE2OTEwYjNlZWE4NycKICAgICAgXSwKICAgICAgWwogICAgICAgICczMGU0ZTY3MDQzNTM4NTU1NmU1OTM2NTcxMzU4NDVkMzZmYmI2OTMxZjcyYjA4Y2IxZWQ5NTRmMWUzY2UzZmY2JywKICAgICAgICAnNDYyZjliY2U2MTk4OTg2Mzg0OTkzNTAxMTNiYmM5YjEwYTg3OGQzNWRhNzA3NDBkYzY5NWE1NTllYjg4ZGI3YicKICAgICAgXSwKICAgICAgWwogICAgICAgICdiZTIwNjIwMDNjNTFjYzMwMDQ2ODI5MDQzMzBlNGRlZTdmM2RjZDEwYjAxZTU4MGJmMTk3MWIwNGQ0Y2FkMjk3JywKICAgICAgICAnNjIxODhiYzQ5ZDYxZTU0Mjg1NzNkNDhhNzRlMWM2NTViMWM2MTA5MDkwNTY4MmEwZDU1NThlZDcyZGNjYjliYycKICAgICAgXSwKICAgICAgWwogICAgICAgICc5MzE0NDQyM2FjZTM0NTFlZDI5ZTBmYjlhYzJhZjIxMWNiNmU4NGE2MDFkZjU5OTNjNDE5ODU5ZmZmNWRmMDRhJywKICAgICAgICAnN2MxMGRmYjE2NGMzNDI1ZjVjNzFhM2Y5ZDc5OTIwMzhmMTA2NTIyNGY3MmJiOWQxZDkwMmE2ZDEzMDM3YjQ3YycKICAgICAgXSwKICAgICAgWwogICAgICAgICdiMDE1ZjgwNDRmNWZjYmRjZjIxY2EyNmQ2YzM0ZmI4MTk3ODI5MjA1YzdiN2QyYTdjYjY2NDE4YzE1N2IxMTJjJywKICAgICAgICAnYWI4YzFlMDg2ZDA0ZTgxMzc0NGE2NTViMmRmOGQ1ZjgzYjNjZGM2ZmFhMzA4OGMxZDNhZWExNDU0ZTNhMWQ1ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICdkNWU5ZTFkYTY0OWQ5N2Q4OWU0ODY4MTE3YTQ2NWEzYTRmOGExOGRlNTdhMTQwZDM2YjNmMmFmMzQxYTIxYjUyJywKICAgICAgICAnNGNiMDQ0MzdmMzkxZWQ3MzExMWExM2NjMWQ0ZGQwZGIxNjkzNDY1YzIyNDA0ODBkODk1NWU4NTkyZjI3NDQ3YScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkM2FlNDEwNDdkZDdjYTA2NWRiZjhlZDc3Yjk5MjQzOTk4MzAwNWNkNzJlMTZkNmY5OTZhNTMxNmQzNjk2NmJiJywKICAgICAgICAnYmQxYWViMjFhZDIyZWJiMjJhMTBmMDMwMzQxN2M2ZDk2NGY4Y2RkN2RmMGFjYTYxNGIxMGRjMTRkMTI1YWM0NicKICAgICAgXSwKICAgICAgWwogICAgICAgICc0NjNlMjc2M2Q4ODVmOTU4ZmM2NmNkZDIyODAwZjBhNDg3MTk3ZDBhODJlMzc3YjQ5ZjgwYWY4N2M4OTdiMDY1JywKICAgICAgICAnYmZlZmFjZGIwZTVkMGZkN2RmM2EzMTFhOTRkZTA2MmIyNmI4MGM2MWZiYzk3NTA4Yjc5OTkyNjcxZWY3Y2E3ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICc3OTg1ZmRmZDEyN2MwNTY3YzZmNTNlYzFiYjYzZWMzMTU4ZTU5N2M0MGJmZTc0N2M4M2NkZGZjOTEwNjQxOTE3JywKICAgICAgICAnNjAzYzEyZGFmM2Q5ODYyZWYyYjI1ZmUxZGUyODlhZWQyNGVkMjkxZTBlYzY3MDg3MDNhNWJkNTY3ZjMyZWQwMycKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NGExYWQ2YjVmNzZlMzlkYjJkZDI0OTQxMGVhYzdmOTllNzRjNTljYjgzZDJkMGVkNWZmMTU0M2RhNzcwM2U5JywKICAgICAgICAnY2M2MTU3ZWYxOGM5YzYzY2Q2MTkzZDgzNjMxYmJlYTAwOTNlMDk2ODk0MmU4YzMzZDU3MzdmZDc5MGUwZGIwOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICczMDY4MmE1MDcwMzM3NWY2MDJkNDE2NjY0YmExOWI3ZmM5YmFiNDJjNzI3NDc0NjNhNzFkMDg5NmIyMmY2ZGEzJywKICAgICAgICAnNTUzZTA0ZjZiMDE4YjRmYTZjOGYzOWU3ZjMxMWQzMTc2MjkwZDBlMGYxOWNhNzNmMTc3MTRkOTk3N2EyMmZmOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc5ZTIxNThmMGQ3YzBkNWYyNmMzNzkxZWZlZmE3OTU5NzY1NGU3YTJiMjQ2NGY1MmIxZWU2YzEzNDc3NjllZjU3JywKICAgICAgICAnNzEyZmNkZDFiOTA1M2YwOTAwM2EzNDgxZmE3NzYyZTlmZmQ3YzhlZjM1YTM4NTA5ZTJmYmYyNjI5MDA4MzczJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE3NmUyNjk4OWE0M2M5Y2ZlYmE0MDI5YzIwMjUzOGMyODE3MmU1NjZlM2M0ZmNlNzMyMjg1N2YzYmUzMjdkNjYnLAogICAgICAgICdlZDhjYzlkMDRiMjllYjg3N2QyNzBiNDg3OGRjNDNjMTlhZWZkMzFmNGVlZTA5ZWU3YjQ3ODM0YzFmYTRiMWMzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc1ZDQ2ZWZlYTM3NzFlNmU2OGFiYjg5YTEzYWQ3NDdlY2YxODkyMzkzZGZjNGYxYjcwMDQ3ODhjNTAzNzRkYTgnLAogICAgICAgICc5ODUyMzkwYTk5NTA3Njc5ZmQwYjg2ZmQyYjM5YTg2OGQ3ZWZjMjIxNTEzNDZlMWEzY2E0NzI2NTg2YTZiZWQ4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzgwOWEyMGM2N2Q2NDkwMGZmYjY5OGM0YzgyNWY2ZDVmMjMxMGZiMDQ1MWM4NjkzNDViNzMxOWY2NDU2MDU3MjEnLAogICAgICAgICc5ZTk5NDk4MGQ5OTE3ZTIyYjc2YjA2MTkyN2ZhMDQxNDNkMDk2Y2NjNTQ5NjNlNmE1ZWJmYTVmM2Y4ZTI4NmMxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzFiMzg5MDNhNDNmN2YxMTRlZDQ1MDBiNGVhYzcwODNmZGVmZWNlMWNmMjljNjM1MjhkNTYzNDQ2Zjk3MmMxODAnLAogICAgICAgICc0MDM2ZWRjOTMxYTYwYWU4ODkzNTNmNzdmZDUzZGU0YTI3MDhiMjZiNmY1ZGE3MmFkMzM5NDExOWRhZjQwOGY5JwogICAgICBdCiAgICBdCiAgfQp9OwoKfSx7fV0sNTU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIHV0aWxzID0gZXhwb3J0czsKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKCnV0aWxzLmFzc2VydCA9IGZ1bmN0aW9uIGFzc2VydCh2YWwsIG1zZykgewogIGlmICghdmFsKQogICAgdGhyb3cgbmV3IEVycm9yKG1zZyB8fCAnQXNzZXJ0aW9uIGZhaWxlZCcpOwp9OwoKZnVuY3Rpb24gdG9BcnJheShtc2csIGVuYykgewogIGlmIChBcnJheS5pc0FycmF5KG1zZykpCiAgICByZXR1cm4gbXNnLnNsaWNlKCk7CiAgaWYgKCFtc2cpCiAgICByZXR1cm4gW107CiAgdmFyIHJlcyA9IFtdOwogIGlmICh0eXBlb2YgbXNnICE9PSAnc3RyaW5nJykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICAgIHJlc1tpXSA9IG1zZ1tpXSB8IDA7CiAgICByZXR1cm4gcmVzOwogIH0KICBpZiAoIWVuYykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGMgPSBtc2cuY2hhckNvZGVBdChpKTsKICAgICAgdmFyIGhpID0gYyA+PiA4OwogICAgICB2YXIgbG8gPSBjICYgMHhmZjsKICAgICAgaWYgKGhpKQogICAgICAgIHJlcy5wdXNoKGhpLCBsbyk7CiAgICAgIGVsc2UKICAgICAgICByZXMucHVzaChsbyk7CiAgICB9CiAgfSBlbHNlIGlmIChlbmMgPT09ICdoZXgnKSB7CiAgICBtc2cgPSBtc2cucmVwbGFjZSgvW15hLXowLTldKy9pZywgJycpOwogICAgaWYgKG1zZy5sZW5ndGggJSAyICE9PSAwKQogICAgICBtc2cgPSAnMCcgKyBtc2c7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkgKz0gMikKICAgICAgcmVzLnB1c2gocGFyc2VJbnQobXNnW2ldICsgbXNnW2kgKyAxXSwgMTYpKTsKICB9CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0FycmF5ID0gdG9BcnJheTsKCmZ1bmN0aW9uIHplcm8yKHdvcmQpIHsKICBpZiAod29yZC5sZW5ndGggPT09IDEpCiAgICByZXR1cm4gJzAnICsgd29yZDsKICBlbHNlCiAgICByZXR1cm4gd29yZDsKfQp1dGlscy56ZXJvMiA9IHplcm8yOwoKZnVuY3Rpb24gdG9IZXgobXNnKSB7CiAgdmFyIHJlcyA9ICcnOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKQogICAgcmVzICs9IHplcm8yKG1zZ1tpXS50b1N0cmluZygxNikpOwogIHJldHVybiByZXM7Cn0KdXRpbHMudG9IZXggPSB0b0hleDsKCnV0aWxzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShhcnIsIGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHRvSGV4KGFycik7CiAgZWxzZQogICAgcmV0dXJuIGFycjsKfTsKCi8vIFJlcHJlc2VudCBudW0gaW4gYSB3LU5BRiBmb3JtCmZ1bmN0aW9uIGdldE5BRihudW0sIHcpIHsKICB2YXIgbmFmID0gW107CiAgdmFyIHdzID0gMSA8PCAodyArIDEpOwogIHZhciBrID0gbnVtLmNsb25lKCk7CiAgd2hpbGUgKGsuY21wbigxKSA+PSAwKSB7CiAgICB2YXIgejsKICAgIGlmIChrLmlzT2RkKCkpIHsKICAgICAgdmFyIG1vZCA9IGsuYW5kbG4od3MgLSAxKTsKICAgICAgaWYgKG1vZCA+ICh3cyA+PiAxKSAtIDEpCiAgICAgICAgeiA9ICh3cyA+PiAxKSAtIG1vZDsKICAgICAgZWxzZQogICAgICAgIHogPSBtb2Q7CiAgICAgIGsuaXN1Ym4oeik7CiAgICB9IGVsc2UgewogICAgICB6ID0gMDsKICAgIH0KICAgIG5hZi5wdXNoKHopOwoKICAgIC8vIE9wdGltaXphdGlvbiwgc2hpZnQgYnkgd29yZCBpZiBwb3NzaWJsZQogICAgdmFyIHNoaWZ0ID0gKGsuY21wbigwKSAhPT0gMCAmJiBrLmFuZGxuKHdzIC0gMSkgPT09IDApID8gKHcgKyAxKSA6IDE7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHNoaWZ0OyBpKyspCiAgICAgIG5hZi5wdXNoKDApOwogICAgay5pdXNocm4oc2hpZnQpOwogIH0KCiAgcmV0dXJuIG5hZjsKfQp1dGlscy5nZXROQUYgPSBnZXROQUY7CgovLyBSZXByZXNlbnQgazEsIGsyIGluIGEgSm9pbnQgU3BhcnNlIEZvcm0KZnVuY3Rpb24gZ2V0SlNGKGsxLCBrMikgewogIHZhciBqc2YgPSBbCiAgICBbXSwKICAgIFtdCiAgXTsKCiAgazEgPSBrMS5jbG9uZSgpOwogIGsyID0gazIuY2xvbmUoKTsKICB2YXIgZDEgPSAwOwogIHZhciBkMiA9IDA7CiAgd2hpbGUgKGsxLmNtcG4oLWQxKSA+IDAgfHwgazIuY21wbigtZDIpID4gMCkgewoKICAgIC8vIEZpcnN0IHBoYXNlCiAgICB2YXIgbTE0ID0gKGsxLmFuZGxuKDMpICsgZDEpICYgMzsKICAgIHZhciBtMjQgPSAoazIuYW5kbG4oMykgKyBkMikgJiAzOwogICAgaWYgKG0xNCA9PT0gMykKICAgICAgbTE0ID0gLTE7CiAgICBpZiAobTI0ID09PSAzKQogICAgICBtMjQgPSAtMTsKICAgIHZhciB1MTsKICAgIGlmICgobTE0ICYgMSkgPT09IDApIHsKICAgICAgdTEgPSAwOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG04ID0gKGsxLmFuZGxuKDcpICsgZDEpICYgNzsKICAgICAgaWYgKChtOCA9PT0gMyB8fCBtOCA9PT0gNSkgJiYgbTI0ID09PSAyKQogICAgICAgIHUxID0gLW0xNDsKICAgICAgZWxzZQogICAgICAgIHUxID0gbTE0OwogICAgfQogICAganNmWzBdLnB1c2godTEpOwoKICAgIHZhciB1MjsKICAgIGlmICgobTI0ICYgMSkgPT09IDApIHsKICAgICAgdTIgPSAwOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG04ID0gKGsyLmFuZGxuKDcpICsgZDIpICYgNzsKICAgICAgaWYgKChtOCA9PT0gMyB8fCBtOCA9PT0gNSkgJiYgbTE0ID09PSAyKQogICAgICAgIHUyID0gLW0yNDsKICAgICAgZWxzZQogICAgICAgIHUyID0gbTI0OwogICAgfQogICAganNmWzFdLnB1c2godTIpOwoKICAgIC8vIFNlY29uZCBwaGFzZQogICAgaWYgKDIgKiBkMSA9PT0gdTEgKyAxKQogICAgICBkMSA9IDEgLSBkMTsKICAgIGlmICgyICogZDIgPT09IHUyICsgMSkKICAgICAgZDIgPSAxIC0gZDI7CiAgICBrMS5pdXNocm4oMSk7CiAgICBrMi5pdXNocm4oMSk7CiAgfQoKICByZXR1cm4ganNmOwp9CnV0aWxzLmdldEpTRiA9IGdldEpTRjsKCmZ1bmN0aW9uIGNhY2hlZFByb3BlcnR5KG9iaiwgbmFtZSwgY29tcHV0ZXIpIHsKICB2YXIga2V5ID0gJ18nICsgbmFtZTsKICBvYmoucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24gY2FjaGVkUHJvcGVydHkoKSB7CiAgICByZXR1cm4gdGhpc1trZXldICE9PSB1bmRlZmluZWQgPyB0aGlzW2tleV0gOgogICAgICAgICAgIHRoaXNba2V5XSA9IGNvbXB1dGVyLmNhbGwodGhpcyk7CiAgfTsKfQp1dGlscy5jYWNoZWRQcm9wZXJ0eSA9IGNhY2hlZFByb3BlcnR5OwoKZnVuY3Rpb24gcGFyc2VCeXRlcyhieXRlcykgewogIHJldHVybiB0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnID8gdXRpbHMudG9BcnJheShieXRlcywgJ2hleCcpIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzOwp9CnV0aWxzLnBhcnNlQnl0ZXMgPSBwYXJzZUJ5dGVzOwoKZnVuY3Rpb24gaW50RnJvbUxFKGJ5dGVzKSB7CiAgcmV0dXJuIG5ldyBCTihieXRlcywgJ2hleCcsICdsZScpOwp9CnV0aWxzLmludEZyb21MRSA9IGludEZyb21MRTsKCgp9LHsiYm4uanMiOjU0MX1dLDU1OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciByOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByYW5kKGxlbikgewogIGlmICghcikKICAgIHIgPSBuZXcgUmFuZChudWxsKTsKCiAgcmV0dXJuIHIuZ2VuZXJhdGUobGVuKTsKfTsKCmZ1bmN0aW9uIFJhbmQocmFuZCkgewogIHRoaXMucmFuZCA9IHJhbmQ7Cn0KbW9kdWxlLmV4cG9ydHMuUmFuZCA9IFJhbmQ7CgpSYW5kLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIGdlbmVyYXRlKGxlbikgewogIHJldHVybiB0aGlzLl9yYW5kKGxlbik7Cn07CgppZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICBpZiAod2luZG93LmNyeXB0byAmJiB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykgewogICAgLy8gTW9kZXJuIGJyb3dzZXJzCiAgICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uIF9yYW5kKG4pIHsKICAgICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KG4pOwogICAgICB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnIpOwogICAgICByZXR1cm4gYXJyOwogICAgfTsKICB9IGVsc2UgaWYgKHdpbmRvdy5tc0NyeXB0byAmJiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgICAvLyBJRQogICAgUmFuZC5wcm90b3R5cGUuX3JhbmQgPSBmdW5jdGlvbiBfcmFuZChuKSB7CiAgICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShuKTsKICAgICAgd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnIpOwogICAgICByZXR1cm4gYXJyOwogICAgfTsKICB9IGVsc2UgewogICAgLy8gT2xkIGp1bmsKICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24oKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIHlldCcpOwogICAgfTsKICB9Cn0gZWxzZSB7CiAgLy8gTm9kZS5qcyBvciBXZWIgd29ya2VyCiAgdHJ5IHsKICAgIHZhciBjcnlwdG8gPSByZXF1aXJlKCdjcnknICsgJ3B0bycpOwoKICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKG4pOwogICAgfTsKICB9IGNhdGNoIChlKSB7CiAgICAvLyBFbXVsYXRlIGNyeXB0byBBUEkgdXNpbmcgcmFuZHkKICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogICAgICB2YXIgcmVzID0gbmV3IFVpbnQ4QXJyYXkobik7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IHRoaXMucmFuZC5nZXRCeXRlKCk7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwogIH0KfQoKfSx7fV0sNTYwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGhhc2ggPSBleHBvcnRzOwoKaGFzaC51dGlscyA9IHJlcXVpcmUoJy4vaGFzaC91dGlscycpOwpoYXNoLmNvbW1vbiA9IHJlcXVpcmUoJy4vaGFzaC9jb21tb24nKTsKaGFzaC5zaGEgPSByZXF1aXJlKCcuL2hhc2gvc2hhJyk7Cmhhc2gucmlwZW1kID0gcmVxdWlyZSgnLi9oYXNoL3JpcGVtZCcpOwpoYXNoLmhtYWMgPSByZXF1aXJlKCcuL2hhc2gvaG1hYycpOwoKLy8gUHJveHkgaGFzaCBmdW5jdGlvbnMgdG8gdGhlIG1haW4gb2JqZWN0Cmhhc2guc2hhMSA9IGhhc2guc2hhLnNoYTE7Cmhhc2guc2hhMjU2ID0gaGFzaC5zaGEuc2hhMjU2OwpoYXNoLnNoYTIyNCA9IGhhc2guc2hhLnNoYTIyNDsKaGFzaC5zaGEzODQgPSBoYXNoLnNoYS5zaGEzODQ7Cmhhc2guc2hhNTEyID0gaGFzaC5zaGEuc2hhNTEyOwpoYXNoLnJpcGVtZDE2MCA9IGhhc2gucmlwZW1kLnJpcGVtZDE2MDsKCn0seyIuL2hhc2gvY29tbW9uIjo1NjEsIi4vaGFzaC9obWFjIjo1NjIsIi4vaGFzaC9yaXBlbWQiOjU2MywiLi9oYXNoL3NoYSI6NTY0LCIuL2hhc2gvdXRpbHMiOjU2NX1dLDU2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBoYXNoID0gcmVxdWlyZSgnLi4vaGFzaCcpOwp2YXIgdXRpbHMgPSBoYXNoLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gQmxvY2tIYXNoKCkgewogIHRoaXMucGVuZGluZyA9IG51bGw7CiAgdGhpcy5wZW5kaW5nVG90YWwgPSAwOwogIHRoaXMuYmxvY2tTaXplID0gdGhpcy5jb25zdHJ1Y3Rvci5ibG9ja1NpemU7CiAgdGhpcy5vdXRTaXplID0gdGhpcy5jb25zdHJ1Y3Rvci5vdXRTaXplOwogIHRoaXMuaG1hY1N0cmVuZ3RoID0gdGhpcy5jb25zdHJ1Y3Rvci5obWFjU3RyZW5ndGg7CiAgdGhpcy5wYWRMZW5ndGggPSB0aGlzLmNvbnN0cnVjdG9yLnBhZExlbmd0aCAvIDg7CiAgdGhpcy5lbmRpYW4gPSAnYmlnJzsKCiAgdGhpcy5fZGVsdGE4ID0gdGhpcy5ibG9ja1NpemUgLyA4OwogIHRoaXMuX2RlbHRhMzIgPSB0aGlzLmJsb2NrU2l6ZSAvIDMyOwp9CmV4cG9ydHMuQmxvY2tIYXNoID0gQmxvY2tIYXNoOwoKQmxvY2tIYXNoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUobXNnLCBlbmMpIHsKICAvLyBDb252ZXJ0IG1lc3NhZ2UgdG8gYXJyYXksIHBhZCBpdCwgYW5kIGpvaW4gaW50byAzMmJpdCBibG9ja3MKICBtc2cgPSB1dGlscy50b0FycmF5KG1zZywgZW5jKTsKICBpZiAoIXRoaXMucGVuZGluZykKICAgIHRoaXMucGVuZGluZyA9IG1zZzsKICBlbHNlCiAgICB0aGlzLnBlbmRpbmcgPSB0aGlzLnBlbmRpbmcuY29uY2F0KG1zZyk7CiAgdGhpcy5wZW5kaW5nVG90YWwgKz0gbXNnLmxlbmd0aDsKCiAgLy8gRW5vdWdoIGRhdGEsIHRyeSB1cGRhdGluZwogIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID49IHRoaXMuX2RlbHRhOCkgewogICAgbXNnID0gdGhpcy5wZW5kaW5nOwoKICAgIC8vIFByb2Nlc3MgcGVuZGluZyBkYXRhIGluIGJsb2NrcwogICAgdmFyIHIgPSBtc2cubGVuZ3RoICUgdGhpcy5fZGVsdGE4OwogICAgdGhpcy5wZW5kaW5nID0gbXNnLnNsaWNlKG1zZy5sZW5ndGggLSByLCBtc2cubGVuZ3RoKTsKICAgIGlmICh0aGlzLnBlbmRpbmcubGVuZ3RoID09PSAwKQogICAgICB0aGlzLnBlbmRpbmcgPSBudWxsOwoKICAgIG1zZyA9IHV0aWxzLmpvaW4zMihtc2csIDAsIG1zZy5sZW5ndGggLSByLCB0aGlzLmVuZGlhbik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkgKz0gdGhpcy5fZGVsdGEzMikKICAgICAgdGhpcy5fdXBkYXRlKG1zZywgaSwgaSArIHRoaXMuX2RlbHRhMzIpOwogIH0KCiAgcmV0dXJuIHRoaXM7Cn07CgpCbG9ja0hhc2gucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICB0aGlzLnVwZGF0ZSh0aGlzLl9wYWQoKSk7CiAgYXNzZXJ0KHRoaXMucGVuZGluZyA9PT0gbnVsbCk7CgogIHJldHVybiB0aGlzLl9kaWdlc3QoZW5jKTsKfTsKCkJsb2NrSGFzaC5wcm90b3R5cGUuX3BhZCA9IGZ1bmN0aW9uIHBhZCgpIHsKICB2YXIgbGVuID0gdGhpcy5wZW5kaW5nVG90YWw7CiAgdmFyIGJ5dGVzID0gdGhpcy5fZGVsdGE4OwogIHZhciBrID0gYnl0ZXMgLSAoKGxlbiArIHRoaXMucGFkTGVuZ3RoKSAlIGJ5dGVzKTsKICB2YXIgcmVzID0gbmV3IEFycmF5KGsgKyB0aGlzLnBhZExlbmd0aCk7CiAgcmVzWzBdID0gMHg4MDsKICBmb3IgKHZhciBpID0gMTsgaSA8IGs7IGkrKykKICAgIHJlc1tpXSA9IDA7CgogIC8vIEFwcGVuZCBsZW5ndGgKICBsZW4gPDw9IDM7CiAgaWYgKHRoaXMuZW5kaWFuID09PSAnYmlnJykgewogICAgZm9yICh2YXIgdCA9IDg7IHQgPCB0aGlzLnBhZExlbmd0aDsgdCsrKQogICAgICByZXNbaSsrXSA9IDA7CgogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAobGVuID4+PiAyNCkgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAxNikgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiA4KSAmIDB4ZmY7CiAgICByZXNbaSsrXSA9IGxlbiAmIDB4ZmY7CiAgfSBlbHNlIHsKICAgIHJlc1tpKytdID0gbGVuICYgMHhmZjsKICAgIHJlc1tpKytdID0gKGxlbiA+Pj4gOCkgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAxNikgJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiAyNCkgJiAweGZmOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwogICAgcmVzW2krK10gPSAwOwoKICAgIGZvciAodmFyIHQgPSA4OyB0IDwgdGhpcy5wYWRMZW5ndGg7IHQrKykKICAgICAgcmVzW2krK10gPSAwOwogIH0KCiAgcmV0dXJuIHJlczsKfTsKCn0seyIuLi9oYXNoIjo1NjB9XSw1NjI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaG1hYyA9IGV4cG9ydHM7Cgp2YXIgaGFzaCA9IHJlcXVpcmUoJy4uL2hhc2gnKTsKdmFyIHV0aWxzID0gaGFzaC51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIEhtYWMoaGFzaCwga2V5LCBlbmMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSG1hYykpCiAgICByZXR1cm4gbmV3IEhtYWMoaGFzaCwga2V5LCBlbmMpOwogIHRoaXMuSGFzaCA9IGhhc2g7CiAgdGhpcy5ibG9ja1NpemUgPSBoYXNoLmJsb2NrU2l6ZSAvIDg7CiAgdGhpcy5vdXRTaXplID0gaGFzaC5vdXRTaXplIC8gODsKICB0aGlzLmlubmVyID0gbnVsbDsKICB0aGlzLm91dGVyID0gbnVsbDsKCiAgdGhpcy5faW5pdCh1dGlscy50b0FycmF5KGtleSwgZW5jKSk7Cn0KbW9kdWxlLmV4cG9ydHMgPSBIbWFjOwoKSG1hYy5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGtleSkgewogIC8vIFNob3J0ZW4ga2V5LCBpZiBuZWVkZWQKICBpZiAoa2V5Lmxlbmd0aCA+IHRoaXMuYmxvY2tTaXplKQogICAga2V5ID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpLmRpZ2VzdCgpOwogIGFzc2VydChrZXkubGVuZ3RoIDw9IHRoaXMuYmxvY2tTaXplKTsKCiAgLy8gQWRkIHBhZGRpbmcgdG8ga2V5CiAgZm9yICh2YXIgaSA9IGtleS5sZW5ndGg7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgaSsrKQogICAga2V5LnB1c2goMCk7CgogIGZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgaSsrKQogICAga2V5W2ldIF49IDB4MzY7CiAgdGhpcy5pbm5lciA9IG5ldyB0aGlzLkhhc2goKS51cGRhdGUoa2V5KTsKCiAgLy8gMHgzNiBeIDB4NWMgPSAweDZhCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyBpKyspCiAgICBrZXlbaV0gXj0gMHg2YTsKICB0aGlzLm91dGVyID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpOwp9OwoKSG1hYy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKG1zZywgZW5jKSB7CiAgdGhpcy5pbm5lci51cGRhdGUobXNnLCBlbmMpOwogIHJldHVybiB0aGlzOwp9OwoKSG1hYy5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIHRoaXMub3V0ZXIudXBkYXRlKHRoaXMuaW5uZXIuZGlnZXN0KCkpOwogIHJldHVybiB0aGlzLm91dGVyLmRpZ2VzdChlbmMpOwp9OwoKfSx7Ii4uL2hhc2giOjU2MH1dLDU2MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBoYXNoID0gcmVxdWlyZSgnLi4vaGFzaCcpOwp2YXIgdXRpbHMgPSBoYXNoLnV0aWxzOwoKdmFyIHJvdGwzMiA9IHV0aWxzLnJvdGwzMjsKdmFyIHN1bTMyID0gdXRpbHMuc3VtMzI7CnZhciBzdW0zMl8zID0gdXRpbHMuc3VtMzJfMzsKdmFyIHN1bTMyXzQgPSB1dGlscy5zdW0zMl80Owp2YXIgQmxvY2tIYXNoID0gaGFzaC5jb21tb24uQmxvY2tIYXNoOwoKZnVuY3Rpb24gUklQRU1EMTYwKCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSSVBFTUQxNjApKQogICAgcmV0dXJuIG5ldyBSSVBFTUQxNjAoKTsKCiAgQmxvY2tIYXNoLmNhbGwodGhpcyk7CgogIHRoaXMuaCA9IFsgMHg2NzQ1MjMwMSwgMHhlZmNkYWI4OSwgMHg5OGJhZGNmZSwgMHgxMDMyNTQ3NiwgMHhjM2QyZTFmMCBdOwogIHRoaXMuZW5kaWFuID0gJ2xpdHRsZSc7Cn0KdXRpbHMuaW5oZXJpdHMoUklQRU1EMTYwLCBCbG9ja0hhc2gpOwpleHBvcnRzLnJpcGVtZDE2MCA9IFJJUEVNRDE2MDsKClJJUEVNRDE2MC5ibG9ja1NpemUgPSA1MTI7ClJJUEVNRDE2MC5vdXRTaXplID0gMTYwOwpSSVBFTUQxNjAuaG1hY1N0cmVuZ3RoID0gMTkyOwpSSVBFTUQxNjAucGFkTGVuZ3RoID0gNjQ7CgpSSVBFTUQxNjAucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUobXNnLCBzdGFydCkgewogIHZhciBBID0gdGhpcy5oWzBdOwogIHZhciBCID0gdGhpcy5oWzFdOwogIHZhciBDID0gdGhpcy5oWzJdOwogIHZhciBEID0gdGhpcy5oWzNdOwogIHZhciBFID0gdGhpcy5oWzRdOwogIHZhciBBaCA9IEE7CiAgdmFyIEJoID0gQjsKICB2YXIgQ2ggPSBDOwogIHZhciBEaCA9IEQ7CiAgdmFyIEVoID0gRTsKICBmb3IgKHZhciBqID0gMDsgaiA8IDgwOyBqKyspIHsKICAgIHZhciBUID0gc3VtMzIoCiAgICAgIHJvdGwzMigKICAgICAgICBzdW0zMl80KEEsIGYoaiwgQiwgQywgRCksIG1zZ1tyW2pdICsgc3RhcnRdLCBLKGopKSwKICAgICAgICBzW2pdKSwKICAgICAgRSk7CiAgICBBID0gRTsKICAgIEUgPSBEOwogICAgRCA9IHJvdGwzMihDLCAxMCk7CiAgICBDID0gQjsKICAgIEIgPSBUOwogICAgVCA9IHN1bTMyKAogICAgICByb3RsMzIoCiAgICAgICAgc3VtMzJfNChBaCwgZig3OSAtIGosIEJoLCBDaCwgRGgpLCBtc2dbcmhbal0gKyBzdGFydF0sIEtoKGopKSwKICAgICAgICBzaFtqXSksCiAgICAgIEVoKTsKICAgIEFoID0gRWg7CiAgICBFaCA9IERoOwogICAgRGggPSByb3RsMzIoQ2gsIDEwKTsKICAgIENoID0gQmg7CiAgICBCaCA9IFQ7CiAgfQogIFQgPSBzdW0zMl8zKHRoaXMuaFsxXSwgQywgRGgpOwogIHRoaXMuaFsxXSA9IHN1bTMyXzModGhpcy5oWzJdLCBELCBFaCk7CiAgdGhpcy5oWzJdID0gc3VtMzJfMyh0aGlzLmhbM10sIEUsIEFoKTsKICB0aGlzLmhbM10gPSBzdW0zMl8zKHRoaXMuaFs0XSwgQSwgQmgpOwogIHRoaXMuaFs0XSA9IHN1bTMyXzModGhpcy5oWzBdLCBCLCBDaCk7CiAgdGhpcy5oWzBdID0gVDsKfTsKClJJUEVNRDE2MC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB1dGlscy50b0hleDMyKHRoaXMuaCwgJ2xpdHRsZScpOwogIGVsc2UKICAgIHJldHVybiB1dGlscy5zcGxpdDMyKHRoaXMuaCwgJ2xpdHRsZScpOwp9OwoKZnVuY3Rpb24gZihqLCB4LCB5LCB6KSB7CiAgaWYgKGogPD0gMTUpCiAgICByZXR1cm4geCBeIHkgXiB6OwogIGVsc2UgaWYgKGogPD0gMzEpCiAgICByZXR1cm4gKHggJiB5KSB8ICgofngpICYgeik7CiAgZWxzZSBpZiAoaiA8PSA0NykKICAgIHJldHVybiAoeCB8ICh+eSkpIF4gejsKICBlbHNlIGlmIChqIDw9IDYzKQogICAgcmV0dXJuICh4ICYgeikgfCAoeSAmICh+eikpOwogIGVsc2UKICAgIHJldHVybiB4IF4gKHkgfCAofnopKTsKfQoKZnVuY3Rpb24gSyhqKSB7CiAgaWYgKGogPD0gMTUpCiAgICByZXR1cm4gMHgwMDAwMDAwMDsKICBlbHNlIGlmIChqIDw9IDMxKQogICAgcmV0dXJuIDB4NWE4Mjc5OTk7CiAgZWxzZSBpZiAoaiA8PSA0NykKICAgIHJldHVybiAweDZlZDllYmExOwogIGVsc2UgaWYgKGogPD0gNjMpCiAgICByZXR1cm4gMHg4ZjFiYmNkYzsKICBlbHNlCiAgICByZXR1cm4gMHhhOTUzZmQ0ZTsKfQoKZnVuY3Rpb24gS2goaikgewogIGlmIChqIDw9IDE1KQogICAgcmV0dXJuIDB4NTBhMjhiZTY7CiAgZWxzZSBpZiAoaiA8PSAzMSkKICAgIHJldHVybiAweDVjNGRkMTI0OwogIGVsc2UgaWYgKGogPD0gNDcpCiAgICByZXR1cm4gMHg2ZDcwM2VmMzsKICBlbHNlIGlmIChqIDw9IDYzKQogICAgcmV0dXJuIDB4N2E2ZDc2ZTk7CiAgZWxzZQogICAgcmV0dXJuIDB4MDAwMDAwMDA7Cn0KCnZhciByID0gWwogIDAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsCiAgNywgNCwgMTMsIDEsIDEwLCA2LCAxNSwgMywgMTIsIDAsIDksIDUsIDIsIDE0LCAxMSwgOCwKICAzLCAxMCwgMTQsIDQsIDksIDE1LCA4LCAxLCAyLCA3LCAwLCA2LCAxMywgMTEsIDUsIDEyLAogIDEsIDksIDExLCAxMCwgMCwgOCwgMTIsIDQsIDEzLCAzLCA3LCAxNSwgMTQsIDUsIDYsIDIsCiAgNCwgMCwgNSwgOSwgNywgMTIsIDIsIDEwLCAxNCwgMSwgMywgOCwgMTEsIDYsIDE1LCAxMwpdOwoKdmFyIHJoID0gWwogIDUsIDE0LCA3LCAwLCA5LCAyLCAxMSwgNCwgMTMsIDYsIDE1LCA4LCAxLCAxMCwgMywgMTIsCiAgNiwgMTEsIDMsIDcsIDAsIDEzLCA1LCAxMCwgMTQsIDE1LCA4LCAxMiwgNCwgOSwgMSwgMiwKICAxNSwgNSwgMSwgMywgNywgMTQsIDYsIDksIDExLCA4LCAxMiwgMiwgMTAsIDAsIDQsIDEzLAogIDgsIDYsIDQsIDEsIDMsIDExLCAxNSwgMCwgNSwgMTIsIDIsIDEzLCA5LCA3LCAxMCwgMTQsCiAgMTIsIDE1LCAxMCwgNCwgMSwgNSwgOCwgNywgNiwgMiwgMTMsIDE0LCAwLCAzLCA5LCAxMQpdOwoKdmFyIHMgPSBbCiAgMTEsIDE0LCAxNSwgMTIsIDUsIDgsIDcsIDksIDExLCAxMywgMTQsIDE1LCA2LCA3LCA5LCA4LAogIDcsIDYsIDgsIDEzLCAxMSwgOSwgNywgMTUsIDcsIDEyLCAxNSwgOSwgMTEsIDcsIDEzLCAxMiwKICAxMSwgMTMsIDYsIDcsIDE0LCA5LCAxMywgMTUsIDE0LCA4LCAxMywgNiwgNSwgMTIsIDcsIDUsCiAgMTEsIDEyLCAxNCwgMTUsIDE0LCAxNSwgOSwgOCwgOSwgMTQsIDUsIDYsIDgsIDYsIDUsIDEyLAogIDksIDE1LCA1LCAxMSwgNiwgOCwgMTMsIDEyLCA1LCAxMiwgMTMsIDE0LCAxMSwgOCwgNSwgNgpdOwoKdmFyIHNoID0gWwogIDgsIDksIDksIDExLCAxMywgMTUsIDE1LCA1LCA3LCA3LCA4LCAxMSwgMTQsIDE0LCAxMiwgNiwKICA5LCAxMywgMTUsIDcsIDEyLCA4LCA5LCAxMSwgNywgNywgMTIsIDcsIDYsIDE1LCAxMywgMTEsCiAgOSwgNywgMTUsIDExLCA4LCA2LCA2LCAxNCwgMTIsIDEzLCA1LCAxNCwgMTMsIDEzLCA3LCA1LAogIDE1LCA1LCA4LCAxMSwgMTQsIDE0LCA2LCAxNCwgNiwgOSwgMTIsIDksIDEyLCA1LCAxNSwgOCwKICA4LCA1LCAxMiwgOSwgMTIsIDUsIDE0LCA2LCA4LCAxMywgNiwgNSwgMTUsIDEzLCAxMSwgMTEKXTsKCn0seyIuLi9oYXNoIjo1NjB9XSw1NjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaGFzaCA9IHJlcXVpcmUoJy4uL2hhc2gnKTsKdmFyIHV0aWxzID0gaGFzaC51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCnZhciByb3RyMzIgPSB1dGlscy5yb3RyMzI7CnZhciByb3RsMzIgPSB1dGlscy5yb3RsMzI7CnZhciBzdW0zMiA9IHV0aWxzLnN1bTMyOwp2YXIgc3VtMzJfNCA9IHV0aWxzLnN1bTMyXzQ7CnZhciBzdW0zMl81ID0gdXRpbHMuc3VtMzJfNTsKdmFyIHJvdHI2NF9oaSA9IHV0aWxzLnJvdHI2NF9oaTsKdmFyIHJvdHI2NF9sbyA9IHV0aWxzLnJvdHI2NF9sbzsKdmFyIHNocjY0X2hpID0gdXRpbHMuc2hyNjRfaGk7CnZhciBzaHI2NF9sbyA9IHV0aWxzLnNocjY0X2xvOwp2YXIgc3VtNjQgPSB1dGlscy5zdW02NDsKdmFyIHN1bTY0X2hpID0gdXRpbHMuc3VtNjRfaGk7CnZhciBzdW02NF9sbyA9IHV0aWxzLnN1bTY0X2xvOwp2YXIgc3VtNjRfNF9oaSA9IHV0aWxzLnN1bTY0XzRfaGk7CnZhciBzdW02NF80X2xvID0gdXRpbHMuc3VtNjRfNF9sbzsKdmFyIHN1bTY0XzVfaGkgPSB1dGlscy5zdW02NF81X2hpOwp2YXIgc3VtNjRfNV9sbyA9IHV0aWxzLnN1bTY0XzVfbG87CnZhciBCbG9ja0hhc2ggPSBoYXNoLmNvbW1vbi5CbG9ja0hhc2g7Cgp2YXIgc2hhMjU2X0sgPSBbCiAgMHg0MjhhMmY5OCwgMHg3MTM3NDQ5MSwgMHhiNWMwZmJjZiwgMHhlOWI1ZGJhNSwKICAweDM5NTZjMjViLCAweDU5ZjExMWYxLCAweDkyM2Y4MmE0LCAweGFiMWM1ZWQ1LAogIDB4ZDgwN2FhOTgsIDB4MTI4MzViMDEsIDB4MjQzMTg1YmUsIDB4NTUwYzdkYzMsCiAgMHg3MmJlNWQ3NCwgMHg4MGRlYjFmZSwgMHg5YmRjMDZhNywgMHhjMTliZjE3NCwKICAweGU0OWI2OWMxLCAweGVmYmU0Nzg2LCAweDBmYzE5ZGM2LCAweDI0MGNhMWNjLAogIDB4MmRlOTJjNmYsIDB4NGE3NDg0YWEsIDB4NWNiMGE5ZGMsIDB4NzZmOTg4ZGEsCiAgMHg5ODNlNTE1MiwgMHhhODMxYzY2ZCwgMHhiMDAzMjdjOCwgMHhiZjU5N2ZjNywKICAweGM2ZTAwYmYzLCAweGQ1YTc5MTQ3LCAweDA2Y2E2MzUxLCAweDE0MjkyOTY3LAogIDB4MjdiNzBhODUsIDB4MmUxYjIxMzgsIDB4NGQyYzZkZmMsIDB4NTMzODBkMTMsCiAgMHg2NTBhNzM1NCwgMHg3NjZhMGFiYiwgMHg4MWMyYzkyZSwgMHg5MjcyMmM4NSwKICAweGEyYmZlOGExLCAweGE4MWE2NjRiLCAweGMyNGI4YjcwLCAweGM3NmM1MWEzLAogIDB4ZDE5MmU4MTksIDB4ZDY5OTA2MjQsIDB4ZjQwZTM1ODUsIDB4MTA2YWEwNzAsCiAgMHgxOWE0YzExNiwgMHgxZTM3NmMwOCwgMHgyNzQ4Nzc0YywgMHgzNGIwYmNiNSwKICAweDM5MWMwY2IzLCAweDRlZDhhYTRhLCAweDViOWNjYTRmLCAweDY4MmU2ZmYzLAogIDB4NzQ4ZjgyZWUsIDB4NzhhNTYzNmYsIDB4ODRjODc4MTQsIDB4OGNjNzAyMDgsCiAgMHg5MGJlZmZmYSwgMHhhNDUwNmNlYiwgMHhiZWY5YTNmNywgMHhjNjcxNzhmMgpdOwoKdmFyIHNoYTUxMl9LID0gWwogIDB4NDI4YTJmOTgsIDB4ZDcyOGFlMjIsIDB4NzEzNzQ0OTEsIDB4MjNlZjY1Y2QsCiAgMHhiNWMwZmJjZiwgMHhlYzRkM2IyZiwgMHhlOWI1ZGJhNSwgMHg4MTg5ZGJiYywKICAweDM5NTZjMjViLCAweGYzNDhiNTM4LCAweDU5ZjExMWYxLCAweGI2MDVkMDE5LAogIDB4OTIzZjgyYTQsIDB4YWYxOTRmOWIsIDB4YWIxYzVlZDUsIDB4ZGE2ZDgxMTgsCiAgMHhkODA3YWE5OCwgMHhhMzAzMDI0MiwgMHgxMjgzNWIwMSwgMHg0NTcwNmZiZSwKICAweDI0MzE4NWJlLCAweDRlZTRiMjhjLCAweDU1MGM3ZGMzLCAweGQ1ZmZiNGUyLAogIDB4NzJiZTVkNzQsIDB4ZjI3Yjg5NmYsIDB4ODBkZWIxZmUsIDB4M2IxNjk2YjEsCiAgMHg5YmRjMDZhNywgMHgyNWM3MTIzNSwgMHhjMTliZjE3NCwgMHhjZjY5MjY5NCwKICAweGU0OWI2OWMxLCAweDllZjE0YWQyLCAweGVmYmU0Nzg2LCAweDM4NGYyNWUzLAogIDB4MGZjMTlkYzYsIDB4OGI4Y2Q1YjUsIDB4MjQwY2ExY2MsIDB4NzdhYzljNjUsCiAgMHgyZGU5MmM2ZiwgMHg1OTJiMDI3NSwgMHg0YTc0ODRhYSwgMHg2ZWE2ZTQ4MywKICAweDVjYjBhOWRjLCAweGJkNDFmYmQ0LCAweDc2Zjk4OGRhLCAweDgzMTE1M2I1LAogIDB4OTgzZTUxNTIsIDB4ZWU2NmRmYWIsIDB4YTgzMWM2NmQsIDB4MmRiNDMyMTAsCiAgMHhiMDAzMjdjOCwgMHg5OGZiMjEzZiwgMHhiZjU5N2ZjNywgMHhiZWVmMGVlNCwKICAweGM2ZTAwYmYzLCAweDNkYTg4ZmMyLCAweGQ1YTc5MTQ3LCAweDkzMGFhNzI1LAogIDB4MDZjYTYzNTEsIDB4ZTAwMzgyNmYsIDB4MTQyOTI5NjcsIDB4MGEwZTZlNzAsCiAgMHgyN2I3MGE4NSwgMHg0NmQyMmZmYywgMHgyZTFiMjEzOCwgMHg1YzI2YzkyNiwKICAweDRkMmM2ZGZjLCAweDVhYzQyYWVkLCAweDUzMzgwZDEzLCAweDlkOTViM2RmLAogIDB4NjUwYTczNTQsIDB4OGJhZjYzZGUsIDB4NzY2YTBhYmIsIDB4M2M3N2IyYTgsCiAgMHg4MWMyYzkyZSwgMHg0N2VkYWVlNiwgMHg5MjcyMmM4NSwgMHgxNDgyMzUzYiwKICAweGEyYmZlOGExLCAweDRjZjEwMzY0LCAweGE4MWE2NjRiLCAweGJjNDIzMDAxLAogIDB4YzI0YjhiNzAsIDB4ZDBmODk3OTEsIDB4Yzc2YzUxYTMsIDB4MDY1NGJlMzAsCiAgMHhkMTkyZTgxOSwgMHhkNmVmNTIxOCwgMHhkNjk5MDYyNCwgMHg1NTY1YTkxMCwKICAweGY0MGUzNTg1LCAweDU3NzEyMDJhLCAweDEwNmFhMDcwLCAweDMyYmJkMWI4LAogIDB4MTlhNGMxMTYsIDB4YjhkMmQwYzgsIDB4MWUzNzZjMDgsIDB4NTE0MWFiNTMsCiAgMHgyNzQ4Nzc0YywgMHhkZjhlZWI5OSwgMHgzNGIwYmNiNSwgMHhlMTliNDhhOCwKICAweDM5MWMwY2IzLCAweGM1Yzk1YTYzLCAweDRlZDhhYTRhLCAweGUzNDE4YWNiLAogIDB4NWI5Y2NhNGYsIDB4Nzc2M2UzNzMsIDB4NjgyZTZmZjMsIDB4ZDZiMmI4YTMsCiAgMHg3NDhmODJlZSwgMHg1ZGVmYjJmYywgMHg3OGE1NjM2ZiwgMHg0MzE3MmY2MCwKICAweDg0Yzg3ODE0LCAweGExZjBhYjcyLCAweDhjYzcwMjA4LCAweDFhNjQzOWVjLAogIDB4OTBiZWZmZmEsIDB4MjM2MzFlMjgsIDB4YTQ1MDZjZWIsIDB4ZGU4MmJkZTksCiAgMHhiZWY5YTNmNywgMHhiMmM2NzkxNSwgMHhjNjcxNzhmMiwgMHhlMzcyNTMyYiwKICAweGNhMjczZWNlLCAweGVhMjY2MTljLCAweGQxODZiOGM3LCAweDIxYzBjMjA3LAogIDB4ZWFkYTdkZDYsIDB4Y2RlMGViMWUsIDB4ZjU3ZDRmN2YsIDB4ZWU2ZWQxNzgsCiAgMHgwNmYwNjdhYSwgMHg3MjE3NmZiYSwgMHgwYTYzN2RjNSwgMHhhMmM4OThhNiwKICAweDExM2Y5ODA0LCAweGJlZjkwZGFlLCAweDFiNzEwYjM1LCAweDEzMWM0NzFiLAogIDB4MjhkYjc3ZjUsIDB4MjMwNDdkODQsIDB4MzJjYWFiN2IsIDB4NDBjNzI0OTMsCiAgMHgzYzllYmUwYSwgMHgxNWM5YmViYywgMHg0MzFkNjdjNCwgMHg5YzEwMGQ0YywKICAweDRjYzVkNGJlLCAweGNiM2U0MmI2LCAweDU5N2YyOTljLCAweGZjNjU3ZTJhLAogIDB4NWZjYjZmYWIsIDB4M2FkNmZhZWMsIDB4NmM0NDE5OGMsIDB4NGE0NzU4MTcKXTsKCnZhciBzaGExX0sgPSBbCiAgMHg1QTgyNzk5OSwgMHg2RUQ5RUJBMSwKICAweDhGMUJCQ0RDLCAweENBNjJDMUQ2Cl07CgpmdW5jdGlvbiBTSEEyNTYoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTI1NikpCiAgICByZXR1cm4gbmV3IFNIQTI1NigpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4NmEwOWU2NjcsIDB4YmI2N2FlODUsIDB4M2M2ZWYzNzIsIDB4YTU0ZmY1M2EsCiAgICAgICAgICAgICAweDUxMGU1MjdmLCAweDliMDU2ODhjLCAweDFmODNkOWFiLCAweDViZTBjZDE5IF07CiAgdGhpcy5rID0gc2hhMjU2X0s7CiAgdGhpcy5XID0gbmV3IEFycmF5KDY0KTsKfQp1dGlscy5pbmhlcml0cyhTSEEyNTYsIEJsb2NrSGFzaCk7CmV4cG9ydHMuc2hhMjU2ID0gU0hBMjU2OwoKU0hBMjU2LmJsb2NrU2l6ZSA9IDUxMjsKU0hBMjU2Lm91dFNpemUgPSAyNTY7ClNIQTI1Ni5obWFjU3RyZW5ndGggPSAxOTI7ClNIQTI1Ni5wYWRMZW5ndGggPSA2NDsKClNIQTI1Ni5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUobXNnLCBzdGFydCkgewogIHZhciBXID0gdGhpcy5XOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspCiAgICBXW2ldID0gbXNnW3N0YXJ0ICsgaV07CiAgZm9yICg7IGkgPCBXLmxlbmd0aDsgaSsrKQogICAgV1tpXSA9IHN1bTMyXzQoZzFfMjU2KFdbaSAtIDJdKSwgV1tpIC0gN10sIGcwXzI1NihXW2kgLSAxNV0pLCBXW2kgLSAxNl0pOwoKICB2YXIgYSA9IHRoaXMuaFswXTsKICB2YXIgYiA9IHRoaXMuaFsxXTsKICB2YXIgYyA9IHRoaXMuaFsyXTsKICB2YXIgZCA9IHRoaXMuaFszXTsKICB2YXIgZSA9IHRoaXMuaFs0XTsKICB2YXIgZiA9IHRoaXMuaFs1XTsKICB2YXIgZyA9IHRoaXMuaFs2XTsKICB2YXIgaCA9IHRoaXMuaFs3XTsKCiAgYXNzZXJ0KHRoaXMuay5sZW5ndGggPT09IFcubGVuZ3RoKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IFcubGVuZ3RoOyBpKyspIHsKICAgIHZhciBUMSA9IHN1bTMyXzUoaCwgczFfMjU2KGUpLCBjaDMyKGUsIGYsIGcpLCB0aGlzLmtbaV0sIFdbaV0pOwogICAgdmFyIFQyID0gc3VtMzIoczBfMjU2KGEpLCBtYWozMihhLCBiLCBjKSk7CiAgICBoID0gZzsKICAgIGcgPSBmOwogICAgZiA9IGU7CiAgICBlID0gc3VtMzIoZCwgVDEpOwogICAgZCA9IGM7CiAgICBjID0gYjsKICAgIGIgPSBhOwogICAgYSA9IHN1bTMyKFQxLCBUMik7CiAgfQoKICB0aGlzLmhbMF0gPSBzdW0zMih0aGlzLmhbMF0sIGEpOwogIHRoaXMuaFsxXSA9IHN1bTMyKHRoaXMuaFsxXSwgYik7CiAgdGhpcy5oWzJdID0gc3VtMzIodGhpcy5oWzJdLCBjKTsKICB0aGlzLmhbM10gPSBzdW0zMih0aGlzLmhbM10sIGQpOwogIHRoaXMuaFs0XSA9IHN1bTMyKHRoaXMuaFs0XSwgZSk7CiAgdGhpcy5oWzVdID0gc3VtMzIodGhpcy5oWzVdLCBmKTsKICB0aGlzLmhbNl0gPSBzdW0zMih0aGlzLmhbNl0sIGcpOwogIHRoaXMuaFs3XSA9IHN1bTMyKHRoaXMuaFs3XSwgaCk7Cn07CgpTSEEyNTYucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiBkaWdlc3QoZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdXRpbHMudG9IZXgzMih0aGlzLmgsICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmgsICdiaWcnKTsKfTsKCmZ1bmN0aW9uIFNIQTIyNCgpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0hBMjI0KSkKICAgIHJldHVybiBuZXcgU0hBMjI0KCk7CgogIFNIQTI1Ni5jYWxsKHRoaXMpOwogIHRoaXMuaCA9IFsgMHhjMTA1OWVkOCwgMHgzNjdjZDUwNywgMHgzMDcwZGQxNywgMHhmNzBlNTkzOSwKICAgICAgICAgICAgIDB4ZmZjMDBiMzEsIDB4Njg1ODE1MTEsIDB4NjRmOThmYTcsIDB4YmVmYTRmYTQgXTsKfQp1dGlscy5pbmhlcml0cyhTSEEyMjQsIFNIQTI1Nik7CmV4cG9ydHMuc2hhMjI0ID0gU0hBMjI0OwoKU0hBMjI0LmJsb2NrU2l6ZSA9IDUxMjsKU0hBMjI0Lm91dFNpemUgPSAyMjQ7ClNIQTIyNC5obWFjU3RyZW5ndGggPSAxOTI7ClNIQTIyNC5wYWRMZW5ndGggPSA2NDsKClNIQTIyNC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICAvLyBKdXN0IHRydW5jYXRlIG91dHB1dAogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHV0aWxzLnRvSGV4MzIodGhpcy5oLnNsaWNlKDAsIDcpLCAnYmlnJyk7CiAgZWxzZQogICAgcmV0dXJuIHV0aWxzLnNwbGl0MzIodGhpcy5oLnNsaWNlKDAsIDcpLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEE1MTIoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTUxMikpCiAgICByZXR1cm4gbmV3IFNIQTUxMigpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4NmEwOWU2NjcsIDB4ZjNiY2M5MDgsCiAgICAgICAgICAgICAweGJiNjdhZTg1LCAweDg0Y2FhNzNiLAogICAgICAgICAgICAgMHgzYzZlZjM3MiwgMHhmZTk0ZjgyYiwKICAgICAgICAgICAgIDB4YTU0ZmY1M2EsIDB4NWYxZDM2ZjEsCiAgICAgICAgICAgICAweDUxMGU1MjdmLCAweGFkZTY4MmQxLAogICAgICAgICAgICAgMHg5YjA1Njg4YywgMHgyYjNlNmMxZiwKICAgICAgICAgICAgIDB4MWY4M2Q5YWIsIDB4ZmI0MWJkNmIsCiAgICAgICAgICAgICAweDViZTBjZDE5LCAweDEzN2UyMTc5IF07CiAgdGhpcy5rID0gc2hhNTEyX0s7CiAgdGhpcy5XID0gbmV3IEFycmF5KDE2MCk7Cn0KdXRpbHMuaW5oZXJpdHMoU0hBNTEyLCBCbG9ja0hhc2gpOwpleHBvcnRzLnNoYTUxMiA9IFNIQTUxMjsKClNIQTUxMi5ibG9ja1NpemUgPSAxMDI0OwpTSEE1MTIub3V0U2l6ZSA9IDUxMjsKU0hBNTEyLmhtYWNTdHJlbmd0aCA9IDE5MjsKU0hBNTEyLnBhZExlbmd0aCA9IDEyODsKClNIQTUxMi5wcm90b3R5cGUuX3ByZXBhcmVCbG9jayA9IGZ1bmN0aW9uIF9wcmVwYXJlQmxvY2sobXNnLCBzdGFydCkgewogIHZhciBXID0gdGhpcy5XOwoKICAvLyAzMiB4IDMyYml0IHdvcmRzCiAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgaSsrKQogICAgV1tpXSA9IG1zZ1tzdGFydCArIGldOwogIGZvciAoOyBpIDwgVy5sZW5ndGg7IGkgKz0gMikgewogICAgdmFyIGMwX2hpID0gZzFfNTEyX2hpKFdbaSAtIDRdLCBXW2kgLSAzXSk7ICAvLyBpIC0gMgogICAgdmFyIGMwX2xvID0gZzFfNTEyX2xvKFdbaSAtIDRdLCBXW2kgLSAzXSk7CiAgICB2YXIgYzFfaGkgPSBXW2kgLSAxNF07ICAvLyBpIC0gNwogICAgdmFyIGMxX2xvID0gV1tpIC0gMTNdOwogICAgdmFyIGMyX2hpID0gZzBfNTEyX2hpKFdbaSAtIDMwXSwgV1tpIC0gMjldKTsgIC8vIGkgLSAxNQogICAgdmFyIGMyX2xvID0gZzBfNTEyX2xvKFdbaSAtIDMwXSwgV1tpIC0gMjldKTsKICAgIHZhciBjM19oaSA9IFdbaSAtIDMyXTsgIC8vIGkgLSAxNgogICAgdmFyIGMzX2xvID0gV1tpIC0gMzFdOwoKICAgIFdbaV0gPSBzdW02NF80X2hpKGMwX2hpLCBjMF9sbywKICAgICAgICAgICAgICAgICAgICAgIGMxX2hpLCBjMV9sbywKICAgICAgICAgICAgICAgICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICAgICAgICAgICAgICAgIGMzX2hpLCBjM19sbyk7CiAgICBXW2kgKyAxXSA9IHN1bTY0XzRfbG8oYzBfaGksIGMwX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgIGMxX2hpLCBjMV9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICBjMl9oaSwgYzJfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgYzNfaGksIGMzX2xvKTsKICB9Cn07CgpTSEE1MTIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiBfdXBkYXRlKG1zZywgc3RhcnQpIHsKICB0aGlzLl9wcmVwYXJlQmxvY2sobXNnLCBzdGFydCk7CgogIHZhciBXID0gdGhpcy5XOwoKICB2YXIgYWggPSB0aGlzLmhbMF07CiAgdmFyIGFsID0gdGhpcy5oWzFdOwogIHZhciBiaCA9IHRoaXMuaFsyXTsKICB2YXIgYmwgPSB0aGlzLmhbM107CiAgdmFyIGNoID0gdGhpcy5oWzRdOwogIHZhciBjbCA9IHRoaXMuaFs1XTsKICB2YXIgZGggPSB0aGlzLmhbNl07CiAgdmFyIGRsID0gdGhpcy5oWzddOwogIHZhciBlaCA9IHRoaXMuaFs4XTsKICB2YXIgZWwgPSB0aGlzLmhbOV07CiAgdmFyIGZoID0gdGhpcy5oWzEwXTsKICB2YXIgZmwgPSB0aGlzLmhbMTFdOwogIHZhciBnaCA9IHRoaXMuaFsxMl07CiAgdmFyIGdsID0gdGhpcy5oWzEzXTsKICB2YXIgaGggPSB0aGlzLmhbMTRdOwogIHZhciBobCA9IHRoaXMuaFsxNV07CgogIGFzc2VydCh0aGlzLmsubGVuZ3RoID09PSBXLmxlbmd0aCk7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBXLmxlbmd0aDsgaSArPSAyKSB7CiAgICB2YXIgYzBfaGkgPSBoaDsKICAgIHZhciBjMF9sbyA9IGhsOwogICAgdmFyIGMxX2hpID0gczFfNTEyX2hpKGVoLCBlbCk7CiAgICB2YXIgYzFfbG8gPSBzMV81MTJfbG8oZWgsIGVsKTsKICAgIHZhciBjMl9oaSA9IGNoNjRfaGkoZWgsIGVsLCBmaCwgZmwsIGdoLCBnbCk7CiAgICB2YXIgYzJfbG8gPSBjaDY0X2xvKGVoLCBlbCwgZmgsIGZsLCBnaCwgZ2wpOwogICAgdmFyIGMzX2hpID0gdGhpcy5rW2ldOwogICAgdmFyIGMzX2xvID0gdGhpcy5rW2kgKyAxXTsKICAgIHZhciBjNF9oaSA9IFdbaV07CiAgICB2YXIgYzRfbG8gPSBXW2kgKyAxXTsKCiAgICB2YXIgVDFfaGkgPSBzdW02NF81X2hpKGMwX2hpLCBjMF9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzFfaGksIGMxX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjMl9oaSwgYzJfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGMzX2hpLCBjM19sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzRfaGksIGM0X2xvKTsKICAgIHZhciBUMV9sbyA9IHN1bTY0XzVfbG8oYzBfaGksIGMwX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjMV9oaSwgYzFfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzNfaGksIGMzX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjNF9oaSwgYzRfbG8pOwoKICAgIHZhciBjMF9oaSA9IHMwXzUxMl9oaShhaCwgYWwpOwogICAgdmFyIGMwX2xvID0gczBfNTEyX2xvKGFoLCBhbCk7CiAgICB2YXIgYzFfaGkgPSBtYWo2NF9oaShhaCwgYWwsIGJoLCBibCwgY2gsIGNsKTsKICAgIHZhciBjMV9sbyA9IG1hajY0X2xvKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wpOwoKICAgIHZhciBUMl9oaSA9IHN1bTY0X2hpKGMwX2hpLCBjMF9sbywgYzFfaGksIGMxX2xvKTsKICAgIHZhciBUMl9sbyA9IHN1bTY0X2xvKGMwX2hpLCBjMF9sbywgYzFfaGksIGMxX2xvKTsKCiAgICBoaCA9IGdoOwogICAgaGwgPSBnbDsKCiAgICBnaCA9IGZoOwogICAgZ2wgPSBmbDsKCiAgICBmaCA9IGVoOwogICAgZmwgPSBlbDsKCiAgICBlaCA9IHN1bTY0X2hpKGRoLCBkbCwgVDFfaGksIFQxX2xvKTsKICAgIGVsID0gc3VtNjRfbG8oZGwsIGRsLCBUMV9oaSwgVDFfbG8pOwoKICAgIGRoID0gY2g7CiAgICBkbCA9IGNsOwoKICAgIGNoID0gYmg7CiAgICBjbCA9IGJsOwoKICAgIGJoID0gYWg7CiAgICBibCA9IGFsOwoKICAgIGFoID0gc3VtNjRfaGkoVDFfaGksIFQxX2xvLCBUMl9oaSwgVDJfbG8pOwogICAgYWwgPSBzdW02NF9sbyhUMV9oaSwgVDFfbG8sIFQyX2hpLCBUMl9sbyk7CiAgfQoKICBzdW02NCh0aGlzLmgsIDAsIGFoLCBhbCk7CiAgc3VtNjQodGhpcy5oLCAyLCBiaCwgYmwpOwogIHN1bTY0KHRoaXMuaCwgNCwgY2gsIGNsKTsKICBzdW02NCh0aGlzLmgsIDYsIGRoLCBkbCk7CiAgc3VtNjQodGhpcy5oLCA4LCBlaCwgZWwpOwogIHN1bTY0KHRoaXMuaCwgMTAsIGZoLCBmbCk7CiAgc3VtNjQodGhpcy5oLCAxMiwgZ2gsIGdsKTsKICBzdW02NCh0aGlzLmgsIDE0LCBoaCwgaGwpOwp9OwoKU0hBNTEyLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHV0aWxzLnRvSGV4MzIodGhpcy5oLCAnYmlnJyk7CiAgZWxzZQogICAgcmV0dXJuIHV0aWxzLnNwbGl0MzIodGhpcy5oLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEEzODQoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTM4NCkpCiAgICByZXR1cm4gbmV3IFNIQTM4NCgpOwoKICBTSEE1MTIuY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4Y2JiYjlkNWQsIDB4YzEwNTllZDgsCiAgICAgICAgICAgICAweDYyOWEyOTJhLCAweDM2N2NkNTA3LAogICAgICAgICAgICAgMHg5MTU5MDE1YSwgMHgzMDcwZGQxNywKICAgICAgICAgICAgIDB4MTUyZmVjZDgsIDB4ZjcwZTU5MzksCiAgICAgICAgICAgICAweDY3MzMyNjY3LCAweGZmYzAwYjMxLAogICAgICAgICAgICAgMHg4ZWI0NGE4NywgMHg2ODU4MTUxMSwKICAgICAgICAgICAgIDB4ZGIwYzJlMGQsIDB4NjRmOThmYTcsCiAgICAgICAgICAgICAweDQ3YjU0ODFkLCAweGJlZmE0ZmE0IF07Cn0KdXRpbHMuaW5oZXJpdHMoU0hBMzg0LCBTSEE1MTIpOwpleHBvcnRzLnNoYTM4NCA9IFNIQTM4NDsKClNIQTM4NC5ibG9ja1NpemUgPSAxMDI0OwpTSEEzODQub3V0U2l6ZSA9IDM4NDsKU0hBMzg0LmhtYWNTdHJlbmd0aCA9IDE5MjsKU0hBMzg0LnBhZExlbmd0aCA9IDEyODsKClNIQTM4NC5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB1dGlscy50b0hleDMyKHRoaXMuaC5zbGljZSgwLCAxMiksICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmguc2xpY2UoMCwgMTIpLCAnYmlnJyk7Cn07CgpmdW5jdGlvbiBTSEExKCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTSEExKSkKICAgIHJldHVybiBuZXcgU0hBMSgpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKICB0aGlzLmggPSBbIDB4Njc0NTIzMDEsIDB4ZWZjZGFiODksIDB4OThiYWRjZmUsCiAgICAgICAgICAgICAweDEwMzI1NDc2LCAweGMzZDJlMWYwIF07CiAgdGhpcy5XID0gbmV3IEFycmF5KDgwKTsKfQoKdXRpbHMuaW5oZXJpdHMoU0hBMSwgQmxvY2tIYXNoKTsKZXhwb3J0cy5zaGExID0gU0hBMTsKClNIQTEuYmxvY2tTaXplID0gNTEyOwpTSEExLm91dFNpemUgPSAxNjA7ClNIQTEuaG1hY1N0cmVuZ3RoID0gODA7ClNIQTEucGFkTGVuZ3RoID0gNjQ7CgpTSEExLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShtc2csIHN0YXJ0KSB7CiAgdmFyIFcgPSB0aGlzLlc7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykKICAgIFdbaV0gPSBtc2dbc3RhcnQgKyBpXTsKCiAgZm9yKDsgaSA8IFcubGVuZ3RoOyBpKyspCiAgICBXW2ldID0gcm90bDMyKFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl0sIDEpOwoKICB2YXIgYSA9IHRoaXMuaFswXTsKICB2YXIgYiA9IHRoaXMuaFsxXTsKICB2YXIgYyA9IHRoaXMuaFsyXTsKICB2YXIgZCA9IHRoaXMuaFszXTsKICB2YXIgZSA9IHRoaXMuaFs0XTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBXLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgcyA9IH5+KGkgLyAyMCk7CiAgICB2YXIgdCA9IHN1bTMyXzUocm90bDMyKGEsIDUpLCBmdF8xKHMsIGIsIGMsIGQpLCBlLCBXW2ldLCBzaGExX0tbc10pOwogICAgZSA9IGQ7CiAgICBkID0gYzsKICAgIGMgPSByb3RsMzIoYiwgMzApOwogICAgYiA9IGE7CiAgICBhID0gdDsKICB9CgogIHRoaXMuaFswXSA9IHN1bTMyKHRoaXMuaFswXSwgYSk7CiAgdGhpcy5oWzFdID0gc3VtMzIodGhpcy5oWzFdLCBiKTsKICB0aGlzLmhbMl0gPSBzdW0zMih0aGlzLmhbMl0sIGMpOwogIHRoaXMuaFszXSA9IHN1bTMyKHRoaXMuaFszXSwgZCk7CiAgdGhpcy5oWzRdID0gc3VtMzIodGhpcy5oWzRdLCBlKTsKfTsKClNIQTEucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiBkaWdlc3QoZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdXRpbHMudG9IZXgzMih0aGlzLmgsICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmgsICdiaWcnKTsKfTsKCmZ1bmN0aW9uIGNoMzIoeCwgeSwgeikgewogIHJldHVybiAoeCAmIHkpIF4gKCh+eCkgJiB6KTsKfQoKZnVuY3Rpb24gbWFqMzIoeCwgeSwgeikgewogIHJldHVybiAoeCAmIHkpIF4gKHggJiB6KSBeICh5ICYgeik7Cn0KCmZ1bmN0aW9uIHAzMih4LCB5LCB6KSB7CiAgcmV0dXJuIHggXiB5IF4gejsKfQoKZnVuY3Rpb24gczBfMjU2KHgpIHsKICByZXR1cm4gcm90cjMyKHgsIDIpIF4gcm90cjMyKHgsIDEzKSBeIHJvdHIzMih4LCAyMik7Cn0KCmZ1bmN0aW9uIHMxXzI1Nih4KSB7CiAgcmV0dXJuIHJvdHIzMih4LCA2KSBeIHJvdHIzMih4LCAxMSkgXiByb3RyMzIoeCwgMjUpOwp9CgpmdW5jdGlvbiBnMF8yNTYoeCkgewogIHJldHVybiByb3RyMzIoeCwgNykgXiByb3RyMzIoeCwgMTgpIF4gKHggPj4+IDMpOwp9CgpmdW5jdGlvbiBnMV8yNTYoeCkgewogIHJldHVybiByb3RyMzIoeCwgMTcpIF4gcm90cjMyKHgsIDE5KSBeICh4ID4+PiAxMCk7Cn0KCmZ1bmN0aW9uIGZ0XzEocywgeCwgeSwgeikgewogIGlmIChzID09PSAwKQogICAgcmV0dXJuIGNoMzIoeCwgeSwgeik7CiAgaWYgKHMgPT09IDEgfHwgcyA9PT0gMykKICAgIHJldHVybiBwMzIoeCwgeSwgeik7CiAgaWYgKHMgPT09IDIpCiAgICByZXR1cm4gbWFqMzIoeCwgeSwgeik7Cn0KCmZ1bmN0aW9uIGNoNjRfaGkoeGgsIHhsLCB5aCwgeWwsIHpoLCB6bCkgewogIHZhciByID0gKHhoICYgeWgpIF4gKCh+eGgpICYgemgpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIGNoNjRfbG8oeGgsIHhsLCB5aCwgeWwsIHpoLCB6bCkgewogIHZhciByID0gKHhsICYgeWwpIF4gKCh+eGwpICYgemwpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIG1hajY0X2hpKHhoLCB4bCwgeWgsIHlsLCB6aCwgemwpIHsKICB2YXIgciA9ICh4aCAmIHloKSBeICh4aCAmIHpoKSBeICh5aCAmIHpoKTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBtYWo2NF9sbyh4aCwgeGwsIHloLCB5bCwgemgsIHpsKSB7CiAgdmFyIHIgPSAoeGwgJiB5bCkgXiAoeGwgJiB6bCkgXiAoeWwgJiB6bCk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gczBfNTEyX2hpKHhoLCB4bCkgewogIHZhciBjMF9oaSA9IHJvdHI2NF9oaSh4aCwgeGwsIDI4KTsKICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGwsIHhoLCAyKTsgIC8vIDM0CiAgdmFyIGMyX2hpID0gcm90cjY0X2hpKHhsLCB4aCwgNyk7ICAvLyAzOQoKICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBzMF81MTJfbG8oeGgsIHhsKSB7CiAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMjgpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4bCwgeGgsIDIpOyAgLy8gMzQKICB2YXIgYzJfbG8gPSByb3RyNjRfbG8oeGwsIHhoLCA3KTsgIC8vIDM5CgogIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIHMxXzUxMl9oaSh4aCwgeGwpIHsKICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxNCk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgMTgpOwogIHZhciBjMl9oaSA9IHJvdHI2NF9oaSh4bCwgeGgsIDkpOyAgLy8gNDEKCiAgdmFyIHIgPSBjMF9oaSBeIGMxX2hpIF4gYzJfaGk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gczFfNTEyX2xvKHhoLCB4bCkgewogIHZhciBjMF9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDE0KTsKICB2YXIgYzFfbG8gPSByb3RyNjRfbG8oeGgsIHhsLCAxOCk7CiAgdmFyIGMyX2xvID0gcm90cjY0X2xvKHhsLCB4aCwgOSk7ICAvLyA0MQoKICB2YXIgciA9IGMwX2xvIF4gYzFfbG8gXiBjMl9sbzsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBnMF81MTJfaGkoeGgsIHhsKSB7CiAgdmFyIGMwX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgMSk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgOCk7CiAgdmFyIGMyX2hpID0gc2hyNjRfaGkoeGgsIHhsLCA3KTsKCiAgdmFyIHIgPSBjMF9oaSBeIGMxX2hpIF4gYzJfaGk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gZzBfNTEyX2xvKHhoLCB4bCkgewogIHZhciBjMF9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDEpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDgpOwogIHZhciBjMl9sbyA9IHNocjY0X2xvKHhoLCB4bCwgNyk7CgogIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIGcxXzUxMl9oaSh4aCwgeGwpIHsKICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxOSk7CiAgdmFyIGMxX2hpID0gcm90cjY0X2hpKHhsLCB4aCwgMjkpOyAgLy8gNjEKICB2YXIgYzJfaGkgPSBzaHI2NF9oaSh4aCwgeGwsIDYpOwoKICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBnMV81MTJfbG8oeGgsIHhsKSB7CiAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMTkpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4bCwgeGgsIDI5KTsgIC8vIDYxCiAgdmFyIGMyX2xvID0gc2hyNjRfbG8oeGgsIHhsLCA2KTsKCiAgdmFyIHIgPSBjMF9sbyBeIGMxX2xvIF4gYzJfbG87CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKfSx7Ii4uL2hhc2giOjU2MH1dLDU2NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB1dGlscyA9IGV4cG9ydHM7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CgpmdW5jdGlvbiB0b0FycmF5KG1zZywgZW5jKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkobXNnKSkKICAgIHJldHVybiBtc2cuc2xpY2UoKTsKICBpZiAoIW1zZykKICAgIHJldHVybiBbXTsKICB2YXIgcmVzID0gW107CiAgaWYgKHR5cGVvZiBtc2cgPT09ICdzdHJpbmcnKSB7CiAgICBpZiAoIWVuYykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBjID0gbXNnLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgdmFyIGhpID0gYyA+PiA4OwogICAgICAgIHZhciBsbyA9IGMgJiAweGZmOwogICAgICAgIGlmIChoaSkKICAgICAgICAgIHJlcy5wdXNoKGhpLCBsbyk7CiAgICAgICAgZWxzZQogICAgICAgICAgcmVzLnB1c2gobG8pOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGVuYyA9PT0gJ2hleCcpIHsKICAgICAgbXNnID0gbXNnLnJlcGxhY2UoL1teYS16MC05XSsvaWcsICcnKTsKICAgICAgaWYgKG1zZy5sZW5ndGggJSAyICE9PSAwKQogICAgICAgIG1zZyA9ICcwJyArIG1zZzsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzLnB1c2gocGFyc2VJbnQobXNnW2ldICsgbXNnW2kgKyAxXSwgMTYpKTsKICAgIH0KICB9IGVsc2UgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICAgIHJlc1tpXSA9IG1zZ1tpXSB8IDA7CiAgfQogIHJldHVybiByZXM7Cn0KdXRpbHMudG9BcnJheSA9IHRvQXJyYXk7CgpmdW5jdGlvbiB0b0hleChtc2cpIHsKICB2YXIgcmVzID0gJyc7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICByZXMgKz0gemVybzIobXNnW2ldLnRvU3RyaW5nKDE2KSk7CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0hleCA9IHRvSGV4OwoKZnVuY3Rpb24gaHRvbmwodykgewogIHZhciByZXMgPSAodyA+Pj4gMjQpIHwKICAgICAgICAgICAgKCh3ID4+PiA4KSAmIDB4ZmYwMCkgfAogICAgICAgICAgICAoKHcgPDwgOCkgJiAweGZmMDAwMCkgfAogICAgICAgICAgICAoKHcgJiAweGZmKSA8PCAyNCk7CiAgcmV0dXJuIHJlcyA+Pj4gMDsKfQp1dGlscy5odG9ubCA9IGh0b25sOwoKZnVuY3Rpb24gdG9IZXgzMihtc2csIGVuZGlhbikgewogIHZhciByZXMgPSAnJzsKICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykgewogICAgdmFyIHcgPSBtc2dbaV07CiAgICBpZiAoZW5kaWFuID09PSAnbGl0dGxlJykKICAgICAgdyA9IGh0b25sKHcpOwogICAgcmVzICs9IHplcm84KHcudG9TdHJpbmcoMTYpKTsKICB9CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0hleDMyID0gdG9IZXgzMjsKCmZ1bmN0aW9uIHplcm8yKHdvcmQpIHsKICBpZiAod29yZC5sZW5ndGggPT09IDEpCiAgICByZXR1cm4gJzAnICsgd29yZDsKICBlbHNlCiAgICByZXR1cm4gd29yZDsKfQp1dGlscy56ZXJvMiA9IHplcm8yOwoKZnVuY3Rpb24gemVybzgod29yZCkgewogIGlmICh3b3JkLmxlbmd0aCA9PT0gNykKICAgIHJldHVybiAnMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA2KQogICAgcmV0dXJuICcwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA1KQogICAgcmV0dXJuICcwMDAnICsgd29yZDsKICBlbHNlIGlmICh3b3JkLmxlbmd0aCA9PT0gNCkKICAgIHJldHVybiAnMDAwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAzKQogICAgcmV0dXJuICcwMDAwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAyKQogICAgcmV0dXJuICcwMDAwMDAnICsgd29yZDsKICBlbHNlIGlmICh3b3JkLmxlbmd0aCA9PT0gMSkKICAgIHJldHVybiAnMDAwMDAwMCcgKyB3b3JkOwogIGVsc2UKICAgIHJldHVybiB3b3JkOwp9CnV0aWxzLnplcm84ID0gemVybzg7CgpmdW5jdGlvbiBqb2luMzIobXNnLCBzdGFydCwgZW5kLCBlbmRpYW4pIHsKICB2YXIgbGVuID0gZW5kIC0gc3RhcnQ7CiAgYXNzZXJ0KGxlbiAlIDQgPT09IDApOwogIHZhciByZXMgPSBuZXcgQXJyYXkobGVuIC8gNCk7CiAgZm9yICh2YXIgaSA9IDAsIGsgPSBzdGFydDsgaSA8IHJlcy5sZW5ndGg7IGkrKywgayArPSA0KSB7CiAgICB2YXIgdzsKICAgIGlmIChlbmRpYW4gPT09ICdiaWcnKQogICAgICB3ID0gKG1zZ1trXSA8PCAyNCkgfCAobXNnW2sgKyAxXSA8PCAxNikgfCAobXNnW2sgKyAyXSA8PCA4KSB8IG1zZ1trICsgM107CiAgICBlbHNlCiAgICAgIHcgPSAobXNnW2sgKyAzXSA8PCAyNCkgfCAobXNnW2sgKyAyXSA8PCAxNikgfCAobXNnW2sgKyAxXSA8PCA4KSB8IG1zZ1trXTsKICAgIHJlc1tpXSA9IHcgPj4+IDA7CiAgfQogIHJldHVybiByZXM7Cn0KdXRpbHMuam9pbjMyID0gam9pbjMyOwoKZnVuY3Rpb24gc3BsaXQzMihtc2csIGVuZGlhbikgewogIHZhciByZXMgPSBuZXcgQXJyYXkobXNnLmxlbmd0aCAqIDQpOwogIGZvciAodmFyIGkgPSAwLCBrID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKywgayArPSA0KSB7CiAgICB2YXIgbSA9IG1zZ1tpXTsKICAgIGlmIChlbmRpYW4gPT09ICdiaWcnKSB7CiAgICAgIHJlc1trXSA9IG0gPj4+IDI0OwogICAgICByZXNbayArIDFdID0gKG0gPj4+IDE2KSAmIDB4ZmY7CiAgICAgIHJlc1trICsgMl0gPSAobSA+Pj4gOCkgJiAweGZmOwogICAgICByZXNbayArIDNdID0gbSAmIDB4ZmY7CiAgICB9IGVsc2UgewogICAgICByZXNbayArIDNdID0gbSA+Pj4gMjQ7CiAgICAgIHJlc1trICsgMl0gPSAobSA+Pj4gMTYpICYgMHhmZjsKICAgICAgcmVzW2sgKyAxXSA9IChtID4+PiA4KSAmIDB4ZmY7CiAgICAgIHJlc1trXSA9IG0gJiAweGZmOwogICAgfQogIH0KICByZXR1cm4gcmVzOwp9CnV0aWxzLnNwbGl0MzIgPSBzcGxpdDMyOwoKZnVuY3Rpb24gcm90cjMyKHcsIGIpIHsKICByZXR1cm4gKHcgPj4+IGIpIHwgKHcgPDwgKDMyIC0gYikpOwp9CnV0aWxzLnJvdHIzMiA9IHJvdHIzMjsKCmZ1bmN0aW9uIHJvdGwzMih3LCBiKSB7CiAgcmV0dXJuICh3IDw8IGIpIHwgKHcgPj4+ICgzMiAtIGIpKTsKfQp1dGlscy5yb3RsMzIgPSByb3RsMzI7CgpmdW5jdGlvbiBzdW0zMihhLCBiKSB7CiAgcmV0dXJuIChhICsgYikgPj4+IDA7Cn0KdXRpbHMuc3VtMzIgPSBzdW0zMjsKCmZ1bmN0aW9uIHN1bTMyXzMoYSwgYiwgYykgewogIHJldHVybiAoYSArIGIgKyBjKSA+Pj4gMDsKfQp1dGlscy5zdW0zMl8zID0gc3VtMzJfMzsKCmZ1bmN0aW9uIHN1bTMyXzQoYSwgYiwgYywgZCkgewogIHJldHVybiAoYSArIGIgKyBjICsgZCkgPj4+IDA7Cn0KdXRpbHMuc3VtMzJfNCA9IHN1bTMyXzQ7CgpmdW5jdGlvbiBzdW0zMl81KGEsIGIsIGMsIGQsIGUpIHsKICByZXR1cm4gKGEgKyBiICsgYyArIGQgKyBlKSA+Pj4gMDsKfQp1dGlscy5zdW0zMl81ID0gc3VtMzJfNTsKCmZ1bmN0aW9uIGFzc2VydChjb25kLCBtc2cpIHsKICBpZiAoIWNvbmQpCiAgICB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICdBc3NlcnRpb24gZmFpbGVkJyk7Cn0KdXRpbHMuYXNzZXJ0ID0gYXNzZXJ0OwoKdXRpbHMuaW5oZXJpdHMgPSBpbmhlcml0czsKCmZ1bmN0aW9uIHN1bTY0KGJ1ZiwgcG9zLCBhaCwgYWwpIHsKICB2YXIgYmggPSBidWZbcG9zXTsKICB2YXIgYmwgPSBidWZbcG9zICsgMV07CgogIHZhciBsbyA9IChhbCArIGJsKSA+Pj4gMDsKICB2YXIgaGkgPSAobG8gPCBhbCA/IDEgOiAwKSArIGFoICsgYmg7CiAgYnVmW3Bvc10gPSBoaSA+Pj4gMDsKICBidWZbcG9zICsgMV0gPSBsbzsKfQpleHBvcnRzLnN1bTY0ID0gc3VtNjQ7CgpmdW5jdGlvbiBzdW02NF9oaShhaCwgYWwsIGJoLCBibCkgewogIHZhciBsbyA9IChhbCArIGJsKSA+Pj4gMDsKICB2YXIgaGkgPSAobG8gPCBhbCA/IDEgOiAwKSArIGFoICsgYmg7CiAgcmV0dXJuIGhpID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0X2hpID0gc3VtNjRfaGk7CgpmdW5jdGlvbiBzdW02NF9sbyhhaCwgYWwsIGJoLCBibCkgewogIHZhciBsbyA9IGFsICsgYmw7CiAgcmV0dXJuIGxvID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0X2xvID0gc3VtNjRfbG87CgpmdW5jdGlvbiBzdW02NF80X2hpKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCkgewogIHZhciBjYXJyeSA9IDA7CiAgdmFyIGxvID0gYWw7CiAgbG8gPSAobG8gKyBibCkgPj4+IDA7CiAgY2FycnkgKz0gbG8gPCBhbCA/IDEgOiAwOwogIGxvID0gKGxvICsgY2wpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgY2wgPyAxIDogMDsKICBsbyA9IChsbyArIGRsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGRsID8gMSA6IDA7CgogIHZhciBoaSA9IGFoICsgYmggKyBjaCArIGRoICsgY2Fycnk7CiAgcmV0dXJuIGhpID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0XzRfaGkgPSBzdW02NF80X2hpOwoKZnVuY3Rpb24gc3VtNjRfNF9sbyhhaCwgYWwsIGJoLCBibCwgY2gsIGNsLCBkaCwgZGwpIHsKICB2YXIgbG8gPSBhbCArIGJsICsgY2wgKyBkbDsKICByZXR1cm4gbG8gPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfNF9sbyA9IHN1bTY0XzRfbG87CgpmdW5jdGlvbiBzdW02NF81X2hpKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCwgZWgsIGVsKSB7CiAgdmFyIGNhcnJ5ID0gMDsKICB2YXIgbG8gPSBhbDsKICBsbyA9IChsbyArIGJsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGFsID8gMSA6IDA7CiAgbG8gPSAobG8gKyBjbCkgPj4+IDA7CiAgY2FycnkgKz0gbG8gPCBjbCA/IDEgOiAwOwogIGxvID0gKGxvICsgZGwpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgZGwgPyAxIDogMDsKICBsbyA9IChsbyArIGVsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGVsID8gMSA6IDA7CgogIHZhciBoaSA9IGFoICsgYmggKyBjaCArIGRoICsgZWggKyBjYXJyeTsKICByZXR1cm4gaGkgPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfNV9oaSA9IHN1bTY0XzVfaGk7CgpmdW5jdGlvbiBzdW02NF81X2xvKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCwgZWgsIGVsKSB7CiAgdmFyIGxvID0gYWwgKyBibCArIGNsICsgZGwgKyBlbDsKCiAgcmV0dXJuIGxvID4+PiAwOwp9OwpleHBvcnRzLnN1bTY0XzVfbG8gPSBzdW02NF81X2xvOwoKZnVuY3Rpb24gcm90cjY0X2hpKGFoLCBhbCwgbnVtKSB7CiAgdmFyIHIgPSAoYWwgPDwgKDMyIC0gbnVtKSkgfCAoYWggPj4+IG51bSk7CiAgcmV0dXJuIHIgPj4+IDA7Cn07CmV4cG9ydHMucm90cjY0X2hpID0gcm90cjY0X2hpOwoKZnVuY3Rpb24gcm90cjY0X2xvKGFoLCBhbCwgbnVtKSB7CiAgdmFyIHIgPSAoYWggPDwgKDMyIC0gbnVtKSkgfCAoYWwgPj4+IG51bSk7CiAgcmV0dXJuIHIgPj4+IDA7Cn07CmV4cG9ydHMucm90cjY0X2xvID0gcm90cjY0X2xvOwoKZnVuY3Rpb24gc2hyNjRfaGkoYWgsIGFsLCBudW0pIHsKICByZXR1cm4gYWggPj4+IG51bTsKfTsKZXhwb3J0cy5zaHI2NF9oaSA9IHNocjY0X2hpOwoKZnVuY3Rpb24gc2hyNjRfbG8oYWgsIGFsLCBudW0pIHsKICB2YXIgciA9IChhaCA8PCAoMzIgLSBudW0pKSB8IChhbCA+Pj4gbnVtKTsKICByZXR1cm4gciA+Pj4gMDsKfTsKZXhwb3J0cy5zaHI2NF9sbyA9IHNocjY0X2xvOwoKfSx7ImluaGVyaXRzIjo3MDF9XSw1NjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz17CiAgIm5hbWUiOiAiZWxsaXB0aWMiLAogICJ2ZXJzaW9uIjogIjYuMy4xIiwKICAiZGVzY3JpcHRpb24iOiAiRUMgY3J5cHRvZ3JhcGh5IiwKICAibWFpbiI6ICJsaWIvZWxsaXB0aWMuanMiLAogICJmaWxlcyI6IFsKICAgICJsaWIiCiAgXSwKICAic2NyaXB0cyI6IHsKICAgICJqc2NzIjogImpzY3MgYmVuY2htYXJrcy8qLmpzIGxpYi8qLmpzIGxpYi8qKi8qLmpzIGxpYi8qKi8qKi8qLmpzIHRlc3QvaW5kZXguanMiLAogICAgImpzaGludCI6ICJqc2NzIGJlbmNobWFya3MvKi5qcyBsaWIvKi5qcyBsaWIvKiovKi5qcyBsaWIvKiovKiovKi5qcyB0ZXN0L2luZGV4LmpzIiwKICAgICJsaW50IjogIm5wbSBydW4ganNjcyAmJiBucG0gcnVuIGpzaGludCIsCiAgICAidW5pdCI6ICJpc3RhbmJ1bCB0ZXN0IF9tb2NoYSAtLXJlcG9ydGVyPXNwZWMgdGVzdC9pbmRleC5qcyIsCiAgICAidGVzdCI6ICJucG0gcnVuIGxpbnQgJiYgbnBtIHJ1biB1bml0IiwKICAgICJ2ZXJzaW9uIjogImdydW50IGRpc3QgJiYgZ2l0IGFkZCBkaXN0LyIKICB9LAogICJyZXBvc2l0b3J5IjogewogICAgInR5cGUiOiAiZ2l0IiwKICAgICJ1cmwiOiAiZ2l0K3NzaDovL2dpdEBnaXRodWIuY29tL2luZHV0bnkvZWxsaXB0aWMuZ2l0IgogIH0sCiAgImtleXdvcmRzIjogWwogICAgIkVDIiwKICAgICJFbGxpcHRpYyIsCiAgICAiY3VydmUiLAogICAgIkNyeXB0b2dyYXBoeSIKICBdLAogICJhdXRob3IiOiB7CiAgICAibmFtZSI6ICJGZWRvciBJbmR1dG55IiwKICAgICJlbWFpbCI6ICJmZWRvckBpbmR1dG55LmNvbSIKICB9LAogICJsaWNlbnNlIjogIk1JVCIsCiAgImJ1Z3MiOiB7CiAgICAidXJsIjogImh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2VsbGlwdGljL2lzc3VlcyIKICB9LAogICJob21lcGFnZSI6ICJodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9lbGxpcHRpYyIsCiAgImRldkRlcGVuZGVuY2llcyI6IHsKICAgICJicmZzIjogIl4xLjQuMyIsCiAgICAiY292ZXJhbGxzIjogIl4yLjExLjMiLAogICAgImdydW50IjogIl4wLjQuNSIsCiAgICAiZ3J1bnQtYnJvd3NlcmlmeSI6ICJeNS4wLjAiLAogICAgImdydW50LWNvbnRyaWItY29ubmVjdCI6ICJeMS4wLjAiLAogICAgImdydW50LWNvbnRyaWItY29weSI6ICJeMS4wLjAiLAogICAgImdydW50LWNvbnRyaWItdWdsaWZ5IjogIl4xLjAuMSIsCiAgICAiZ3J1bnQtbW9jaGEtaXN0YW5idWwiOiAiXjMuMC4xIiwKICAgICJncnVudC1zYXVjZWxhYnMiOiAiXjguNi4yIiwKICAgICJpc3RhbmJ1bCI6ICJeMC40LjIiLAogICAgImpzY3MiOiAiXjIuOS4wIiwKICAgICJqc2hpbnQiOiAiXjIuNi4wIiwKICAgICJtb2NoYSI6ICJeMi4xLjAiCiAgfSwKICAiZGVwZW5kZW5jaWVzIjogewogICAgImJuLmpzIjogIl40LjQuMCIsCiAgICAiYnJvcmFuZCI6ICJeMS4wLjEiLAogICAgImhhc2guanMiOiAiXjEuMC4wIiwKICAgICJpbmhlcml0cyI6ICJeMi4wLjEiCiAgfSwKICAiZ2l0SGVhZCI6ICJjNTNmNWNmM2Q4MzJjMDA3M2ViNGE0ZWQ0MjNhNDY0Y2JjZTY4ZjNlIiwKICAiX2lkIjogImVsbGlwdGljQDYuMy4xIiwKICAiX3NoYXN1bSI6ICIxNzc4MWYyMTA5YWIwZWM2ODZiMTQ2YmRjZmY1ZDJlOGM2YWVjZWRhIiwKICAiX2Zyb20iOiAiZWxsaXB0aWNAPj02LjAuMCA8Ny4wLjAiLAogICJfbnBtVmVyc2lvbiI6ICIzLjguNiIsCiAgIl9ub2RlVmVyc2lvbiI6ICI2LjAuMCIsCiAgIl9ucG1Vc2VyIjogewogICAgIm5hbWUiOiAiaW5kdXRueSIsCiAgICAiZW1haWwiOiAiZmVkb3JAaW5kdXRueS5jb20iCiAgfSwKICAiZGlzdCI6IHsKICAgICJzaGFzdW0iOiAiMTc3ODFmMjEwOWFiMGVjNjg2YjE0NmJkY2ZmNWQyZThjNmFlY2VkYSIsCiAgICAidGFyYmFsbCI6ICJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9lbGxpcHRpYy8tL2VsbGlwdGljLTYuMy4xLnRneiIKICB9LAogICJtYWludGFpbmVycyI6IFsKICAgIHsKICAgICAgIm5hbWUiOiAiaW5kdXRueSIsCiAgICAgICJlbWFpbCI6ICJmZWRvckBpbmR1dG55LmNvbSIKICAgIH0KICBdLAogICJfbnBtT3BlcmF0aW9uYWxJbnRlcm5hbCI6IHsKICAgICJob3N0IjogInBhY2thZ2VzLTE2LWVhc3QuaW50ZXJuYWwubnBtanMuY29tIiwKICAgICJ0bXAiOiAidG1wL2VsbGlwdGljLTYuMy4xLnRnel8xNDY1OTIxNDEzNDAyXzAuNTIwMjk2NzM4MjUwMTgxMSIKICB9LAogICJkaXJlY3RvcmllcyI6IHt9LAogICJfcmVzb2x2ZWQiOiAiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvZWxsaXB0aWMvLS9lbGxpcHRpYy02LjMuMS50Z3oiLAogICJyZWFkbWUiOiAiRVJST1I6IE5vIFJFQURNRSBkYXRhIGZvdW5kISIKfQoKfSx7fV0sNTY3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHM9eyIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4xIjogImFlcy0xMjgtZWNiIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjIiOiAiYWVzLTEyOC1jYmMiLAoiMi4xNi44NDAuMS4xMDEuMy40LjEuMyI6ICJhZXMtMTI4LW9mYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40IjogImFlcy0xMjgtY2ZiIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjIxIjogImFlcy0xOTItZWNiIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjIyIjogImFlcy0xOTItY2JjIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjIzIjogImFlcy0xOTItb2ZiIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjI0IjogImFlcy0xOTItY2ZiIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQxIjogImFlcy0yNTYtZWNiIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQyIjogImFlcy0yNTYtY2JjIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQzIjogImFlcy0yNTYtb2ZiIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQ0IjogImFlcy0yNTYtY2ZiIgp9Cn0se31dLDU2ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvc2VsZi1zaWduZWQvYmxvYi9naC1wYWdlcy9saWIvYXNuMS5qcwovLyBGZWRvciwgeW91IGFyZSBhbWF6aW5nLgoKdmFyIGFzbjEgPSByZXF1aXJlKCdhc24xLmpzJykKCnZhciBSU0FQcml2YXRlS2V5ID0gYXNuMS5kZWZpbmUoJ1JTQVByaXZhdGVLZXknLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgndmVyc2lvbicpLmludCgpLAogICAgdGhpcy5rZXkoJ21vZHVsdXMnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwdWJsaWNFeHBvbmVudCcpLmludCgpLAogICAgdGhpcy5rZXkoJ3ByaXZhdGVFeHBvbmVudCcpLmludCgpLAogICAgdGhpcy5rZXkoJ3ByaW1lMScpLmludCgpLAogICAgdGhpcy5rZXkoJ3ByaW1lMicpLmludCgpLAogICAgdGhpcy5rZXkoJ2V4cG9uZW50MScpLmludCgpLAogICAgdGhpcy5rZXkoJ2V4cG9uZW50MicpLmludCgpLAogICAgdGhpcy5rZXkoJ2NvZWZmaWNpZW50JykuaW50KCkKICApCn0pCmV4cG9ydHMuUlNBUHJpdmF0ZUtleSA9IFJTQVByaXZhdGVLZXkKCnZhciBSU0FQdWJsaWNLZXkgPSBhc24xLmRlZmluZSgnUlNBUHVibGljS2V5JywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ21vZHVsdXMnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwdWJsaWNFeHBvbmVudCcpLmludCgpCiAgKQp9KQpleHBvcnRzLlJTQVB1YmxpY0tleSA9IFJTQVB1YmxpY0tleQoKdmFyIFB1YmxpY0tleSA9IGFzbjEuZGVmaW5lKCdTdWJqZWN0UHVibGljS2V5SW5mbycsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCdhbGdvcml0aG0nKS51c2UoQWxnb3JpdGhtSWRlbnRpZmllciksCiAgICB0aGlzLmtleSgnc3ViamVjdFB1YmxpY0tleScpLmJpdHN0cigpCiAgKQp9KQpleHBvcnRzLlB1YmxpY0tleSA9IFB1YmxpY0tleQoKdmFyIEFsZ29yaXRobUlkZW50aWZpZXIgPSBhc24xLmRlZmluZSgnQWxnb3JpdGhtSWRlbnRpZmllcicsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCdhbGdvcml0aG0nKS5vYmppZCgpLAogICAgdGhpcy5rZXkoJ25vbmUnKS5udWxsXygpLm9wdGlvbmFsKCksCiAgICB0aGlzLmtleSgnY3VydmUnKS5vYmppZCgpLm9wdGlvbmFsKCksCiAgICB0aGlzLmtleSgncGFyYW1zJykuc2VxKCkub2JqKAogICAgICB0aGlzLmtleSgncCcpLmludCgpLAogICAgICB0aGlzLmtleSgncScpLmludCgpLAogICAgICB0aGlzLmtleSgnZycpLmludCgpCiAgICApLm9wdGlvbmFsKCkKICApCn0pCgp2YXIgUHJpdmF0ZUtleUluZm8gPSBhc24xLmRlZmluZSgnUHJpdmF0ZUtleUluZm8nLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgndmVyc2lvbicpLmludCgpLAogICAgdGhpcy5rZXkoJ2FsZ29yaXRobScpLnVzZShBbGdvcml0aG1JZGVudGlmaWVyKSwKICAgIHRoaXMua2V5KCdzdWJqZWN0UHJpdmF0ZUtleScpLm9jdHN0cigpCiAgKQp9KQpleHBvcnRzLlByaXZhdGVLZXkgPSBQcml2YXRlS2V5SW5mbwp2YXIgRW5jcnlwdGVkUHJpdmF0ZUtleUluZm8gPSBhc24xLmRlZmluZSgnRW5jcnlwdGVkUHJpdmF0ZUtleUluZm8nLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykuc2VxKCkub2JqKAogICAgICB0aGlzLmtleSgnaWQnKS5vYmppZCgpLAogICAgICB0aGlzLmtleSgnZGVjcnlwdCcpLnNlcSgpLm9iaigKICAgICAgICB0aGlzLmtleSgna2RlJykuc2VxKCkub2JqKAogICAgICAgICAgdGhpcy5rZXkoJ2lkJykub2JqaWQoKSwKICAgICAgICAgIHRoaXMua2V5KCdrZGVwYXJhbXMnKS5zZXEoKS5vYmooCiAgICAgICAgICAgIHRoaXMua2V5KCdzYWx0Jykub2N0c3RyKCksCiAgICAgICAgICAgIHRoaXMua2V5KCdpdGVycycpLmludCgpCiAgICAgICAgICApCiAgICAgICAgKSwKICAgICAgICB0aGlzLmtleSgnY2lwaGVyJykuc2VxKCkub2JqKAogICAgICAgICAgdGhpcy5rZXkoJ2FsZ28nKS5vYmppZCgpLAogICAgICAgICAgdGhpcy5rZXkoJ2l2Jykub2N0c3RyKCkKICAgICAgICApCiAgICAgICkKICAgICksCiAgICB0aGlzLmtleSgnc3ViamVjdFByaXZhdGVLZXknKS5vY3RzdHIoKQogICkKfSkKCmV4cG9ydHMuRW5jcnlwdGVkUHJpdmF0ZUtleSA9IEVuY3J5cHRlZFByaXZhdGVLZXlJbmZvCgp2YXIgRFNBUHJpdmF0ZUtleSA9IGFzbjEuZGVmaW5lKCdEU0FQcml2YXRlS2V5JywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwJykuaW50KCksCiAgICB0aGlzLmtleSgncScpLmludCgpLAogICAgdGhpcy5rZXkoJ2cnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwdWJfa2V5JykuaW50KCksCiAgICB0aGlzLmtleSgncHJpdl9rZXknKS5pbnQoKQogICkKfSkKZXhwb3J0cy5EU0FQcml2YXRlS2V5ID0gRFNBUHJpdmF0ZUtleQoKZXhwb3J0cy5EU0FwYXJhbSA9IGFzbjEuZGVmaW5lKCdEU0FwYXJhbScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLmludCgpCn0pCnZhciBFQ1ByaXZhdGVLZXkgPSBhc24xLmRlZmluZSgnRUNQcml2YXRlS2V5JywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcml2YXRlS2V5Jykub2N0c3RyKCksCiAgICB0aGlzLmtleSgncGFyYW1ldGVycycpLm9wdGlvbmFsKCkuZXhwbGljaXQoMCkudXNlKEVDUGFyYW1ldGVycyksCiAgICB0aGlzLmtleSgncHVibGljS2V5Jykub3B0aW9uYWwoKS5leHBsaWNpdCgxKS5iaXRzdHIoKQogICkKfSkKZXhwb3J0cy5FQ1ByaXZhdGVLZXkgPSBFQ1ByaXZhdGVLZXkKdmFyIEVDUGFyYW1ldGVycyA9IGFzbjEuZGVmaW5lKCdFQ1BhcmFtZXRlcnMnLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5jaG9pY2UoewogICAgbmFtZWRDdXJ2ZTogdGhpcy5vYmppZCgpCiAgfSkKfSkKCmV4cG9ydHMuc2lnbmF0dXJlID0gYXNuMS5kZWZpbmUoJ3NpZ25hdHVyZScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCdyJykuaW50KCksCiAgICB0aGlzLmtleSgncycpLmludCgpCiAgKQp9KQoKfSx7ImFzbjEuanMiOjU3MX1dLDU2OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gYWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hcGF0aWwvcGVtc3RyaXAKdmFyIGZpbmRQcm9jID0gL1Byb2MtVHlwZTogNCxFTkNSWVBURURccj9cbkRFSy1JbmZvOiBBRVMtKCg/OjEyOCl8KD86MTkyKXwoPzoyNTYpKS1DQkMsKFswLTlBLUhdKylccj9cblxyP1xuKFswLTlBLXpcblxyXCtcL1w9XSspXHI/XG4vbQp2YXIgc3RhcnRSZWdleCA9IC9eLS0tLS1CRUdJTiAoLiopIEtFWS0tLS0tXHI/XG4vbQp2YXIgZnVsbFJlZ2V4ID0gL14tLS0tLUJFR0lOICguKikgS0VZLS0tLS1ccj9cbihbMC05QS16XG5cclwrXC9cPV0rKVxyP1xuLS0tLS1FTkQgXDEgS0VZLS0tLS0kL20KdmFyIGV2cCA9IHJlcXVpcmUoJ2V2cF9ieXRlc3Rva2V5JykKdmFyIGNpcGhlcnMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWFlcycpCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9rZXksIHBhc3N3b3JkKSB7CiAgdmFyIGtleSA9IG9rZXkudG9TdHJpbmcoKQogIHZhciBtYXRjaCA9IGtleS5tYXRjaChmaW5kUHJvYykKICB2YXIgZGVjcnlwdGVkCiAgaWYgKCFtYXRjaCkgewogICAgdmFyIG1hdGNoMiA9IGtleS5tYXRjaChmdWxsUmVnZXgpCiAgICBkZWNyeXB0ZWQgPSBuZXcgQnVmZmVyKG1hdGNoMlsyXS5yZXBsYWNlKC9ccj9cbi9nLCAnJyksICdiYXNlNjQnKQogIH0gZWxzZSB7CiAgICB2YXIgc3VpdGUgPSAnYWVzJyArIG1hdGNoWzFdCiAgICB2YXIgaXYgPSBuZXcgQnVmZmVyKG1hdGNoWzJdLCAnaGV4JykKICAgIHZhciBjaXBoZXJUZXh0ID0gbmV3IEJ1ZmZlcihtYXRjaFszXS5yZXBsYWNlKC9ccj9cbi9nLCAnJyksICdiYXNlNjQnKQogICAgdmFyIGNpcGhlcktleSA9IGV2cChwYXNzd29yZCwgaXYuc2xpY2UoMCwgOCksIHBhcnNlSW50KG1hdGNoWzFdLCAxMCkpLmtleQogICAgdmFyIG91dCA9IFtdCiAgICB2YXIgY2lwaGVyID0gY2lwaGVycy5jcmVhdGVEZWNpcGhlcml2KHN1aXRlLCBjaXBoZXJLZXksIGl2KQogICAgb3V0LnB1c2goY2lwaGVyLnVwZGF0ZShjaXBoZXJUZXh0KSkKICAgIG91dC5wdXNoKGNpcGhlci5maW5hbCgpKQogICAgZGVjcnlwdGVkID0gQnVmZmVyLmNvbmNhdChvdXQpCiAgfQogIHZhciB0YWcgPSBrZXkubWF0Y2goc3RhcnRSZWdleClbMV0gKyAnIEtFWScKICByZXR1cm4gewogICAgdGFnOiB0YWcsCiAgICBkYXRhOiBkZWNyeXB0ZWQKICB9Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJicm93c2VyaWZ5LWFlcyI6NTg4LCJidWZmZXIiOjUwNCwiZXZwX2J5dGVzdG9rZXkiOjYwM31dLDU3MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFzbjEgPSByZXF1aXJlKCcuL2FzbjEnKQp2YXIgYWVzaWQgPSByZXF1aXJlKCcuL2Flc2lkLmpzb24nKQp2YXIgZml4UHJvYyA9IHJlcXVpcmUoJy4vZml4UHJvYycpCnZhciBjaXBoZXJzID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1hZXMnKQp2YXIgY29tcGF0ID0gcmVxdWlyZSgncGJrZGYyJykKbW9kdWxlLmV4cG9ydHMgPSBwYXJzZUtleXMKCmZ1bmN0aW9uIHBhcnNlS2V5cyAoYnVmZmVyKSB7CiAgdmFyIHBhc3N3b3JkCiAgaWYgKHR5cGVvZiBidWZmZXIgPT09ICdvYmplY3QnICYmICFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSkgewogICAgcGFzc3dvcmQgPSBidWZmZXIucGFzc3BocmFzZQogICAgYnVmZmVyID0gYnVmZmVyLmtleQogIH0KICBpZiAodHlwZW9mIGJ1ZmZlciA9PT0gJ3N0cmluZycpIHsKICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKQogIH0KCiAgdmFyIHN0cmlwcGVkID0gZml4UHJvYyhidWZmZXIsIHBhc3N3b3JkKQoKICB2YXIgdHlwZSA9IHN0cmlwcGVkLnRhZwogIHZhciBkYXRhID0gc3RyaXBwZWQuZGF0YQogIHZhciBzdWJ0eXBlLCBuZGF0YQogIHN3aXRjaCAodHlwZSkgewogICAgY2FzZSAnUFVCTElDIEtFWSc6CiAgICAgIG5kYXRhID0gYXNuMS5QdWJsaWNLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICBzdWJ0eXBlID0gbmRhdGEuYWxnb3JpdGhtLmFsZ29yaXRobS5qb2luKCcuJykKICAgICAgc3dpdGNoIChzdWJ0eXBlKSB7CiAgICAgICAgY2FzZSAnMS4yLjg0MC4xMTM1NDkuMS4xLjEnOgogICAgICAgICAgcmV0dXJuIGFzbjEuUlNBUHVibGljS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDUuMi4xJzoKICAgICAgICAgIG5kYXRhLnN1YmplY3RQcml2YXRlS2V5ID0gbmRhdGEuc3ViamVjdFB1YmxpY0tleQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogJ2VjJywKICAgICAgICAgICAgZGF0YTogbmRhdGEKICAgICAgICAgIH0KICAgICAgICBjYXNlICcxLjIuODQwLjEwMDQwLjQuMSc6CiAgICAgICAgICBuZGF0YS5hbGdvcml0aG0ucGFyYW1zLnB1Yl9rZXkgPSBhc24xLkRTQXBhcmFtLmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgICAgIGRhdGE6IG5kYXRhLmFsZ29yaXRobS5wYXJhbXMKICAgICAgICAgIH0KICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24ga2V5IGlkICcgKyBzdWJ0eXBlKQogICAgICB9CiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBrZXkgdHlwZSAnICsgdHlwZSkKICAgIGNhc2UgJ0VOQ1JZUFRFRCBQUklWQVRFIEtFWSc6CiAgICAgIGRhdGEgPSBhc24xLkVuY3J5cHRlZFByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICBkYXRhID0gZGVjcnlwdChkYXRhLCBwYXNzd29yZCkKICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgY2FzZSAnUFJJVkFURSBLRVknOgogICAgICBuZGF0YSA9IGFzbjEuUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgIHN1YnR5cGUgPSBuZGF0YS5hbGdvcml0aG0uYWxnb3JpdGhtLmpvaW4oJy4nKQogICAgICBzd2l0Y2ggKHN1YnR5cGUpIHsKICAgICAgICBjYXNlICcxLjIuODQwLjExMzU0OS4xLjEuMSc6CiAgICAgICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpCiAgICAgICAgY2FzZSAnMS4yLjg0MC4xMDA0NS4yLjEnOgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY3VydmU6IG5kYXRhLmFsZ29yaXRobS5jdXJ2ZSwKICAgICAgICAgICAgcHJpdmF0ZUtleTogYXNuMS5FQ1ByaXZhdGVLZXkuZGVjb2RlKG5kYXRhLnN1YmplY3RQcml2YXRlS2V5LCAnZGVyJykucHJpdmF0ZUtleQogICAgICAgICAgfQogICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDAuNC4xJzoKICAgICAgICAgIG5kYXRhLmFsZ29yaXRobS5wYXJhbXMucHJpdl9rZXkgPSBhc24xLkRTQXBhcmFtLmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0eXBlOiAnZHNhJywKICAgICAgICAgICAgcGFyYW1zOiBuZGF0YS5hbGdvcml0aG0ucGFyYW1zCiAgICAgICAgICB9CiAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSBpZCAnICsgc3VidHlwZSkKICAgICAgfQogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24ga2V5IHR5cGUgJyArIHR5cGUpCiAgICBjYXNlICdSU0EgUFVCTElDIEtFWSc6CiAgICAgIHJldHVybiBhc24xLlJTQVB1YmxpY0tleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICBjYXNlICdSU0EgUFJJVkFURSBLRVknOgogICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShkYXRhLCAnZGVyJykKICAgIGNhc2UgJ0RTQSBQUklWQVRFIEtFWSc6CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgcGFyYW1zOiBhc24xLkRTQVByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICB9CiAgICBjYXNlICdFQyBQUklWQVRFIEtFWSc6CiAgICAgIGRhdGEgPSBhc24xLkVDUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgIHJldHVybiB7CiAgICAgICAgY3VydmU6IGRhdGEucGFyYW1ldGVycy52YWx1ZSwKICAgICAgICBwcml2YXRlS2V5OiBkYXRhLnByaXZhdGVLZXkKICAgICAgfQogICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSB0eXBlICcgKyB0eXBlKQogIH0KfQpwYXJzZUtleXMuc2lnbmF0dXJlID0gYXNuMS5zaWduYXR1cmUKZnVuY3Rpb24gZGVjcnlwdCAoZGF0YSwgcGFzc3dvcmQpIHsKICB2YXIgc2FsdCA9IGRhdGEuYWxnb3JpdGhtLmRlY3J5cHQua2RlLmtkZXBhcmFtcy5zYWx0CiAgdmFyIGl0ZXJzID0gcGFyc2VJbnQoZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5rZGUua2RlcGFyYW1zLml0ZXJzLnRvU3RyaW5nKCksIDEwKQogIHZhciBhbGdvID0gYWVzaWRbZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5jaXBoZXIuYWxnby5qb2luKCcuJyldCiAgdmFyIGl2ID0gZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5jaXBoZXIuaXYKICB2YXIgY2lwaGVyVGV4dCA9IGRhdGEuc3ViamVjdFByaXZhdGVLZXkKICB2YXIga2V5bGVuID0gcGFyc2VJbnQoYWxnby5zcGxpdCgnLScpWzFdLCAxMCkgLyA4CiAgdmFyIGtleSA9IGNvbXBhdC5wYmtkZjJTeW5jKHBhc3N3b3JkLCBzYWx0LCBpdGVycywga2V5bGVuKQogIHZhciBjaXBoZXIgPSBjaXBoZXJzLmNyZWF0ZURlY2lwaGVyaXYoYWxnbywga2V5LCBpdikKICB2YXIgb3V0ID0gW10KICBvdXQucHVzaChjaXBoZXIudXBkYXRlKGNpcGhlclRleHQpKQogIG91dC5wdXNoKGNpcGhlci5maW5hbCgpKQogIHJldHVybiBCdWZmZXIuY29uY2F0KG91dCkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWVzaWQuanNvbiI6NTY3LCIuL2FzbjEiOjU2OCwiLi9maXhQcm9jIjo1NjksImJyb3dzZXJpZnktYWVzIjo1ODgsImJ1ZmZlciI6NTA0LCJwYmtkZjIiOjY1M31dLDU3MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBhc24xID0gZXhwb3J0czsKCmFzbjEuYmlnbnVtID0gcmVxdWlyZSgnYm4uanMnKTsKCmFzbjEuZGVmaW5lID0gcmVxdWlyZSgnLi9hc24xL2FwaScpLmRlZmluZTsKYXNuMS5iYXNlID0gcmVxdWlyZSgnLi9hc24xL2Jhc2UnKTsKYXNuMS5jb25zdGFudHMgPSByZXF1aXJlKCcuL2FzbjEvY29uc3RhbnRzJyk7CmFzbjEuZGVjb2RlcnMgPSByZXF1aXJlKCcuL2FzbjEvZGVjb2RlcnMnKTsKYXNuMS5lbmNvZGVycyA9IHJlcXVpcmUoJy4vYXNuMS9lbmNvZGVycycpOwoKfSx7Ii4vYXNuMS9hcGkiOjU3MiwiLi9hc24xL2Jhc2UiOjU3NCwiLi9hc24xL2NvbnN0YW50cyI6NTc4LCIuL2FzbjEvZGVjb2RlcnMiOjU4MCwiLi9hc24xL2VuY29kZXJzIjo1ODMsImJuLmpzIjo1NDF9XSw1NzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgYXNuMSA9IHJlcXVpcmUoJy4uL2FzbjEnKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCnZhciBhcGkgPSBleHBvcnRzOwoKYXBpLmRlZmluZSA9IGZ1bmN0aW9uIGRlZmluZShuYW1lLCBib2R5KSB7CiAgcmV0dXJuIG5ldyBFbnRpdHkobmFtZSwgYm9keSk7Cn07CgpmdW5jdGlvbiBFbnRpdHkobmFtZSwgYm9keSkgewogIHRoaXMubmFtZSA9IG5hbWU7CiAgdGhpcy5ib2R5ID0gYm9keTsKCiAgdGhpcy5kZWNvZGVycyA9IHt9OwogIHRoaXMuZW5jb2RlcnMgPSB7fTsKfTsKCkVudGl0eS5wcm90b3R5cGUuX2NyZWF0ZU5hbWVkID0gZnVuY3Rpb24gY3JlYXRlTmFtZWQoYmFzZSkgewogIHZhciBuYW1lZDsKICB0cnkgewogICAgbmFtZWQgPSByZXF1aXJlKCd2bScpLnJ1bkluVGhpc0NvbnRleHQoCiAgICAgICcoZnVuY3Rpb24gJyArIHRoaXMubmFtZSArICcoZW50aXR5KSB7XG4nICsKICAgICAgJyAgdGhpcy5faW5pdE5hbWVkKGVudGl0eSk7XG4nICsKICAgICAgJ30pJwogICAgKTsKICB9IGNhdGNoIChlKSB7CiAgICBuYW1lZCA9IGZ1bmN0aW9uIChlbnRpdHkpIHsKICAgICAgdGhpcy5faW5pdE5hbWVkKGVudGl0eSk7CiAgICB9OwogIH0KICBpbmhlcml0cyhuYW1lZCwgYmFzZSk7CiAgbmFtZWQucHJvdG90eXBlLl9pbml0TmFtZWQgPSBmdW5jdGlvbiBpbml0bmFtZWQoZW50aXR5KSB7CiAgICBiYXNlLmNhbGwodGhpcywgZW50aXR5KTsKICB9OwoKICByZXR1cm4gbmV3IG5hbWVkKHRoaXMpOwp9OwoKRW50aXR5LnByb3RvdHlwZS5fZ2V0RGVjb2RlciA9IGZ1bmN0aW9uIF9nZXREZWNvZGVyKGVuYykgewogIGVuYyA9IGVuYyB8fCAnZGVyJzsKICAvLyBMYXppbHkgY3JlYXRlIGRlY29kZXIKICBpZiAoIXRoaXMuZGVjb2RlcnMuaGFzT3duUHJvcGVydHkoZW5jKSkKICAgIHRoaXMuZGVjb2RlcnNbZW5jXSA9IHRoaXMuX2NyZWF0ZU5hbWVkKGFzbjEuZGVjb2RlcnNbZW5jXSk7CiAgcmV0dXJuIHRoaXMuZGVjb2RlcnNbZW5jXTsKfTsKCkVudGl0eS5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGRhdGEsIGVuYywgb3B0aW9ucykgewogIHJldHVybiB0aGlzLl9nZXREZWNvZGVyKGVuYykuZGVjb2RlKGRhdGEsIG9wdGlvbnMpOwp9OwoKRW50aXR5LnByb3RvdHlwZS5fZ2V0RW5jb2RlciA9IGZ1bmN0aW9uIF9nZXRFbmNvZGVyKGVuYykgewogIGVuYyA9IGVuYyB8fCAnZGVyJzsKICAvLyBMYXppbHkgY3JlYXRlIGVuY29kZXIKICBpZiAoIXRoaXMuZW5jb2RlcnMuaGFzT3duUHJvcGVydHkoZW5jKSkKICAgIHRoaXMuZW5jb2RlcnNbZW5jXSA9IHRoaXMuX2NyZWF0ZU5hbWVkKGFzbjEuZW5jb2RlcnNbZW5jXSk7CiAgcmV0dXJuIHRoaXMuZW5jb2RlcnNbZW5jXTsKfTsKCkVudGl0eS5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGRhdGEsIGVuYywgLyogaW50ZXJuYWwgKi8gcmVwb3J0ZXIpIHsKICByZXR1cm4gdGhpcy5fZ2V0RW5jb2RlcihlbmMpLmVuY29kZShkYXRhLCByZXBvcnRlcik7Cn07Cgp9LHsiLi4vYXNuMSI6NTcxLCJpbmhlcml0cyI6NzAxLCJ2bSI6NzIzfV0sNTczOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKdmFyIFJlcG9ydGVyID0gcmVxdWlyZSgnLi4vYmFzZScpLlJlcG9ydGVyOwp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwoKZnVuY3Rpb24gRGVjb2RlckJ1ZmZlcihiYXNlLCBvcHRpb25zKSB7CiAgUmVwb3J0ZXIuY2FsbCh0aGlzLCBvcHRpb25zKTsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiYXNlKSkgewogICAgdGhpcy5lcnJvcignSW5wdXQgbm90IEJ1ZmZlcicpOwogICAgcmV0dXJuOwogIH0KCiAgdGhpcy5iYXNlID0gYmFzZTsKICB0aGlzLm9mZnNldCA9IDA7CiAgdGhpcy5sZW5ndGggPSBiYXNlLmxlbmd0aDsKfQppbmhlcml0cyhEZWNvZGVyQnVmZmVyLCBSZXBvcnRlcik7CmV4cG9ydHMuRGVjb2RlckJ1ZmZlciA9IERlY29kZXJCdWZmZXI7CgpEZWNvZGVyQnVmZmVyLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHsKICByZXR1cm4geyBvZmZzZXQ6IHRoaXMub2Zmc2V0LCByZXBvcnRlcjogUmVwb3J0ZXIucHJvdG90eXBlLnNhdmUuY2FsbCh0aGlzKSB9Owp9OwoKRGVjb2RlckJ1ZmZlci5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uIHJlc3RvcmUoc2F2ZSkgewogIC8vIFJldHVybiBza2lwcGVkIGRhdGEKICB2YXIgcmVzID0gbmV3IERlY29kZXJCdWZmZXIodGhpcy5iYXNlKTsKICByZXMub2Zmc2V0ID0gc2F2ZS5vZmZzZXQ7CiAgcmVzLmxlbmd0aCA9IHRoaXMub2Zmc2V0OwoKICB0aGlzLm9mZnNldCA9IHNhdmUub2Zmc2V0OwogIFJlcG9ydGVyLnByb3RvdHlwZS5yZXN0b3JlLmNhbGwodGhpcywgc2F2ZS5yZXBvcnRlcik7CgogIHJldHVybiByZXM7Cn07CgpEZWNvZGVyQnVmZmVyLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSgpIHsKICByZXR1cm4gdGhpcy5vZmZzZXQgPT09IHRoaXMubGVuZ3RoOwp9OwoKRGVjb2RlckJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4KGZhaWwpIHsKICBpZiAodGhpcy5vZmZzZXQgKyAxIDw9IHRoaXMubGVuZ3RoKQogICAgcmV0dXJuIHRoaXMuYmFzZS5yZWFkVUludDgodGhpcy5vZmZzZXQrKywgdHJ1ZSk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuZXJyb3IoZmFpbCB8fCAnRGVjb2RlckJ1ZmZlciBvdmVycnVuJyk7Cn0KCkRlY29kZXJCdWZmZXIucHJvdG90eXBlLnNraXAgPSBmdW5jdGlvbiBza2lwKGJ5dGVzLCBmYWlsKSB7CiAgaWYgKCEodGhpcy5vZmZzZXQgKyBieXRlcyA8PSB0aGlzLmxlbmd0aCkpCiAgICByZXR1cm4gdGhpcy5lcnJvcihmYWlsIHx8ICdEZWNvZGVyQnVmZmVyIG92ZXJydW4nKTsKCiAgdmFyIHJlcyA9IG5ldyBEZWNvZGVyQnVmZmVyKHRoaXMuYmFzZSk7CgogIC8vIFNoYXJlIHJlcG9ydGVyIHN0YXRlCiAgcmVzLl9yZXBvcnRlclN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgcmVzLm9mZnNldCA9IHRoaXMub2Zmc2V0OwogIHJlcy5sZW5ndGggPSB0aGlzLm9mZnNldCArIGJ5dGVzOwogIHRoaXMub2Zmc2V0ICs9IGJ5dGVzOwogIHJldHVybiByZXM7Cn0KCkRlY29kZXJCdWZmZXIucHJvdG90eXBlLnJhdyA9IGZ1bmN0aW9uIHJhdyhzYXZlKSB7CiAgcmV0dXJuIHRoaXMuYmFzZS5zbGljZShzYXZlID8gc2F2ZS5vZmZzZXQgOiB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGgpOwp9CgpmdW5jdGlvbiBFbmNvZGVyQnVmZmVyKHZhbHVlLCByZXBvcnRlcikgewogIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgdGhpcy5sZW5ndGggPSAwOwogICAgdGhpcy52YWx1ZSA9IHZhbHVlLm1hcChmdW5jdGlvbihpdGVtKSB7CiAgICAgIGlmICghKGl0ZW0gaW5zdGFuY2VvZiBFbmNvZGVyQnVmZmVyKSkKICAgICAgICBpdGVtID0gbmV3IEVuY29kZXJCdWZmZXIoaXRlbSwgcmVwb3J0ZXIpOwogICAgICB0aGlzLmxlbmd0aCArPSBpdGVtLmxlbmd0aDsKICAgICAgcmV0dXJuIGl0ZW07CiAgICB9LCB0aGlzKTsKICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgIGlmICghKDAgPD0gdmFsdWUgJiYgdmFsdWUgPD0gMHhmZikpCiAgICAgIHJldHVybiByZXBvcnRlci5lcnJvcignbm9uLWJ5dGUgRW5jb2RlckJ1ZmZlciB2YWx1ZScpOwogICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgdGhpcy5sZW5ndGggPSAxOwogIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgdGhpcy5sZW5ndGggPSBCdWZmZXIuYnl0ZUxlbmd0aCh2YWx1ZSk7CiAgfSBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsdWUpKSB7CiAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICB0aGlzLmxlbmd0aCA9IHZhbHVlLmxlbmd0aDsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdVbnN1cHBvcnRlZCB0eXBlOiAnICsgdHlwZW9mIHZhbHVlKTsKICB9Cn0KZXhwb3J0cy5FbmNvZGVyQnVmZmVyID0gRW5jb2RlckJ1ZmZlcjsKCkVuY29kZXJCdWZmZXIucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbiBqb2luKG91dCwgb2Zmc2V0KSB7CiAgaWYgKCFvdXQpCiAgICBvdXQgPSBuZXcgQnVmZmVyKHRoaXMubGVuZ3RoKTsKICBpZiAoIW9mZnNldCkKICAgIG9mZnNldCA9IDA7CgogIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkKICAgIHJldHVybiBvdXQ7CgogIGlmIChBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpKSB7CiAgICB0aGlzLnZhbHVlLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICBpdGVtLmpvaW4ob3V0LCBvZmZzZXQpOwogICAgICBvZmZzZXQgKz0gaXRlbS5sZW5ndGg7CiAgICB9KTsKICB9IGVsc2UgewogICAgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnbnVtYmVyJykKICAgICAgb3V0W29mZnNldF0gPSB0aGlzLnZhbHVlOwogICAgZWxzZSBpZiAodHlwZW9mIHRoaXMudmFsdWUgPT09ICdzdHJpbmcnKQogICAgICBvdXQud3JpdGUodGhpcy52YWx1ZSwgb2Zmc2V0KTsKICAgIGVsc2UgaWYgKEJ1ZmZlci5pc0J1ZmZlcih0aGlzLnZhbHVlKSkKICAgICAgdGhpcy52YWx1ZS5jb3B5KG91dCwgb2Zmc2V0KTsKICAgIG9mZnNldCArPSB0aGlzLmxlbmd0aDsKICB9CgogIHJldHVybiBvdXQ7Cn07Cgp9LHsiLi4vYmFzZSI6NTc0LCJidWZmZXIiOjUwNCwiaW5oZXJpdHMiOjcwMX1dLDU3NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBiYXNlID0gZXhwb3J0czsKCmJhc2UuUmVwb3J0ZXIgPSByZXF1aXJlKCcuL3JlcG9ydGVyJykuUmVwb3J0ZXI7CmJhc2UuRGVjb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4vYnVmZmVyJykuRGVjb2RlckJ1ZmZlcjsKYmFzZS5FbmNvZGVyQnVmZmVyID0gcmVxdWlyZSgnLi9idWZmZXInKS5FbmNvZGVyQnVmZmVyOwpiYXNlLk5vZGUgPSByZXF1aXJlKCcuL25vZGUnKTsKCn0seyIuL2J1ZmZlciI6NTczLCIuL25vZGUiOjU3NSwiLi9yZXBvcnRlciI6NTc2fV0sNTc1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIFJlcG9ydGVyID0gcmVxdWlyZSgnLi4vYmFzZScpLlJlcG9ydGVyOwp2YXIgRW5jb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5FbmNvZGVyQnVmZmVyOwp2YXIgRGVjb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5EZWNvZGVyQnVmZmVyOwp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwoKLy8gU3VwcG9ydGVkIHRhZ3MKdmFyIHRhZ3MgPSBbCiAgJ3NlcScsICdzZXFvZicsICdzZXQnLCAnc2V0b2YnLCAnb2JqaWQnLCAnYm9vbCcsCiAgJ2dlbnRpbWUnLCAndXRjdGltZScsICdudWxsXycsICdlbnVtJywgJ2ludCcsCiAgJ2JpdHN0cicsICdibXBzdHInLCAnY2hhcnN0cicsICdnZW5zdHInLCAnZ3JhcGhzdHInLCAnaWE1c3RyJywgJ2lzbzY0NnN0cicsCiAgJ251bXN0cicsICdvY3RzdHInLCAncHJpbnRzdHInLCAndDYxc3RyJywgJ3VuaXN0cicsICd1dGY4c3RyJywgJ3ZpZGVvc3RyJwpdOwoKLy8gUHVibGljIG1ldGhvZHMgbGlzdAp2YXIgbWV0aG9kcyA9IFsKICAna2V5JywgJ29iaicsICd1c2UnLCAnb3B0aW9uYWwnLCAnZXhwbGljaXQnLCAnaW1wbGljaXQnLCAnZGVmJywgJ2Nob2ljZScsCiAgJ2FueScsICdjb250YWlucycKXS5jb25jYXQodGFncyk7CgovLyBPdmVycmlkZWQgbWV0aG9kcyBsaXN0CnZhciBvdmVycmlkZWQgPSBbCiAgJ19wZWVrVGFnJywgJ19kZWNvZGVUYWcnLCAnX3VzZScsCiAgJ19kZWNvZGVTdHInLCAnX2RlY29kZU9iamlkJywgJ19kZWNvZGVUaW1lJywKICAnX2RlY29kZU51bGwnLCAnX2RlY29kZUludCcsICdfZGVjb2RlQm9vbCcsICdfZGVjb2RlTGlzdCcsCgogICdfZW5jb2RlQ29tcG9zaXRlJywgJ19lbmNvZGVTdHInLCAnX2VuY29kZU9iamlkJywgJ19lbmNvZGVUaW1lJywKICAnX2VuY29kZU51bGwnLCAnX2VuY29kZUludCcsICdfZW5jb2RlQm9vbCcKXTsKCmZ1bmN0aW9uIE5vZGUoZW5jLCBwYXJlbnQpIHsKICB2YXIgc3RhdGUgPSB7fTsKICB0aGlzLl9iYXNlU3RhdGUgPSBzdGF0ZTsKCiAgc3RhdGUuZW5jID0gZW5jOwoKICBzdGF0ZS5wYXJlbnQgPSBwYXJlbnQgfHwgbnVsbDsKICBzdGF0ZS5jaGlsZHJlbiA9IG51bGw7CgogIC8vIFN0YXRlCiAgc3RhdGUudGFnID0gbnVsbDsKICBzdGF0ZS5hcmdzID0gbnVsbDsKICBzdGF0ZS5yZXZlcnNlQXJncyA9IG51bGw7CiAgc3RhdGUuY2hvaWNlID0gbnVsbDsKICBzdGF0ZS5vcHRpb25hbCA9IGZhbHNlOwogIHN0YXRlLmFueSA9IGZhbHNlOwogIHN0YXRlLm9iaiA9IGZhbHNlOwogIHN0YXRlLnVzZSA9IG51bGw7CiAgc3RhdGUudXNlRGVjb2RlciA9IG51bGw7CiAgc3RhdGUua2V5ID0gbnVsbDsKICBzdGF0ZVsnZGVmYXVsdCddID0gbnVsbDsKICBzdGF0ZS5leHBsaWNpdCA9IG51bGw7CiAgc3RhdGUuaW1wbGljaXQgPSBudWxsOwogIHN0YXRlLmNvbnRhaW5zID0gbnVsbDsKCiAgLy8gU2hvdWxkIGNyZWF0ZSBuZXcgaW5zdGFuY2Ugb24gZWFjaCBtZXRob2QKICBpZiAoIXN0YXRlLnBhcmVudCkgewogICAgc3RhdGUuY2hpbGRyZW4gPSBbXTsKICAgIHRoaXMuX3dyYXAoKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBOb2RlOwoKdmFyIHN0YXRlUHJvcHMgPSBbCiAgJ2VuYycsICdwYXJlbnQnLCAnY2hpbGRyZW4nLCAndGFnJywgJ2FyZ3MnLCAncmV2ZXJzZUFyZ3MnLCAnY2hvaWNlJywKICAnb3B0aW9uYWwnLCAnYW55JywgJ29iaicsICd1c2UnLCAnYWx0ZXJlZFVzZScsICdrZXknLCAnZGVmYXVsdCcsICdleHBsaWNpdCcsCiAgJ2ltcGxpY2l0JwpdOwoKTm9kZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgdmFyIGNzdGF0ZSA9IHt9OwogIHN0YXRlUHJvcHMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7CiAgICBjc3RhdGVbcHJvcF0gPSBzdGF0ZVtwcm9wXTsKICB9KTsKICB2YXIgcmVzID0gbmV3IHRoaXMuY29uc3RydWN0b3IoY3N0YXRlLnBhcmVudCk7CiAgcmVzLl9iYXNlU3RhdGUgPSBjc3RhdGU7CiAgcmV0dXJuIHJlczsKfTsKCk5vZGUucHJvdG90eXBlLl93cmFwID0gZnVuY3Rpb24gd3JhcCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgdGhpc1ttZXRob2RdID0gZnVuY3Rpb24gX3dyYXBwZWRNZXRob2QoKSB7CiAgICAgIHZhciBjbG9uZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpOwogICAgICBzdGF0ZS5jaGlsZHJlbi5wdXNoKGNsb25lKTsKICAgICAgcmV0dXJuIGNsb25lW21ldGhvZF0uYXBwbHkoY2xvbmUsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0sIHRoaXMpOwp9OwoKTm9kZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGJvZHkpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5wYXJlbnQgPT09IG51bGwpOwogIGJvZHkuY2FsbCh0aGlzKTsKCiAgLy8gRmlsdGVyIGNoaWxkcmVuCiAgc3RhdGUuY2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24oY2hpbGQpIHsKICAgIHJldHVybiBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9PT0gdGhpczsKICB9LCB0aGlzKTsKICBhc3NlcnQuZXF1YWwoc3RhdGUuY2hpbGRyZW4ubGVuZ3RoLCAxLCAnUm9vdCBub2RlIGNhbiBoYXZlIG9ubHkgb25lIGNoaWxkJyk7Cn07CgpOb2RlLnByb3RvdHlwZS5fdXNlQXJncyA9IGZ1bmN0aW9uIHVzZUFyZ3MoYXJncykgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgLy8gRmlsdGVyIGNoaWxkcmVuIGFuZCBhcmdzCiAgdmFyIGNoaWxkcmVuID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gYXJnIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3RvcjsKICB9LCB0aGlzKTsKICBhcmdzID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gIShhcmcgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKTsKICB9LCB0aGlzKTsKCiAgaWYgKGNoaWxkcmVuLmxlbmd0aCAhPT0gMCkgewogICAgYXNzZXJ0KHN0YXRlLmNoaWxkcmVuID09PSBudWxsKTsKICAgIHN0YXRlLmNoaWxkcmVuID0gY2hpbGRyZW47CgogICAgLy8gUmVwbGFjZSBwYXJlbnQgdG8gbWFpbnRhaW4gYmFja3dhcmQgbGluawogICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgewogICAgICBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9IHRoaXM7CiAgICB9LCB0aGlzKTsKICB9CiAgaWYgKGFyZ3MubGVuZ3RoICE9PSAwKSB7CiAgICBhc3NlcnQoc3RhdGUuYXJncyA9PT0gbnVsbCk7CiAgICBzdGF0ZS5hcmdzID0gYXJnczsKICAgIHN0YXRlLnJldmVyc2VBcmdzID0gYXJncy5tYXAoZnVuY3Rpb24oYXJnKSB7CiAgICAgIGlmICh0eXBlb2YgYXJnICE9PSAnb2JqZWN0JyB8fCBhcmcuY29uc3RydWN0b3IgIT09IE9iamVjdCkKICAgICAgICByZXR1cm4gYXJnOwoKICAgICAgdmFyIHJlcyA9IHt9OwogICAgICBPYmplY3Qua2V5cyhhcmcpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgaWYgKGtleSA9PSAoa2V5IHwgMCkpCiAgICAgICAgICBrZXkgfD0gMDsKICAgICAgICB2YXIgdmFsdWUgPSBhcmdba2V5XTsKICAgICAgICByZXNbdmFsdWVdID0ga2V5OwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0pOwogIH0KfTsKCi8vCi8vIE92ZXJyaWRlZCBtZXRob2RzCi8vCgpvdmVycmlkZWQuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICBOb2RlLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gX292ZXJyaWRlZCgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIHRocm93IG5ldyBFcnJvcihtZXRob2QgKyAnIG5vdCBpbXBsZW1lbnRlZCBmb3IgZW5jb2Rpbmc6ICcgKyBzdGF0ZS5lbmMpOwogIH07Cn0pOwoKLy8KLy8gUHVibGljIG1ldGhvZHMKLy8KCnRhZ3MuZm9yRWFjaChmdW5jdGlvbih0YWcpIHsKICBOb2RlLnByb3RvdHlwZVt0YWddID0gZnVuY3Rpb24gX3RhZ01ldGhvZCgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKCiAgICBhc3NlcnQoc3RhdGUudGFnID09PSBudWxsKTsKICAgIHN0YXRlLnRhZyA9IHRhZzsKCiAgICB0aGlzLl91c2VBcmdzKGFyZ3MpOwoKICAgIHJldHVybiB0aGlzOwogIH07Cn0pOwoKTm9kZS5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGl0ZW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS51c2UgPT09IG51bGwpOwogIHN0YXRlLnVzZSA9IGl0ZW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUub3B0aW9uYWwgPSBmdW5jdGlvbiBvcHRpb25hbCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHN0YXRlLm9wdGlvbmFsID0gdHJ1ZTsKCiAgcmV0dXJuIHRoaXM7Cn07CgpOb2RlLnByb3RvdHlwZS5kZWYgPSBmdW5jdGlvbiBkZWYodmFsKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICBhc3NlcnQoc3RhdGVbJ2RlZmF1bHQnXSA9PT0gbnVsbCk7CiAgc3RhdGVbJ2RlZmF1bHQnXSA9IHZhbDsKICBzdGF0ZS5vcHRpb25hbCA9IHRydWU7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuZXhwbGljaXQgPSBmdW5jdGlvbiBleHBsaWNpdChudW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5leHBsaWNpdCA9PT0gbnVsbCAmJiBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCk7CiAgc3RhdGUuZXhwbGljaXQgPSBudW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuaW1wbGljaXQgPSBmdW5jdGlvbiBpbXBsaWNpdChudW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5leHBsaWNpdCA9PT0gbnVsbCAmJiBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCk7CiAgc3RhdGUuaW1wbGljaXQgPSBudW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUub2JqID0gZnVuY3Rpb24gb2JqKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CgogIHN0YXRlLm9iaiA9IHRydWU7CgogIGlmIChhcmdzLmxlbmd0aCAhPT0gMCkKICAgIHRoaXMuX3VzZUFyZ3MoYXJncyk7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUua2V5ID0gZnVuY3Rpb24ga2V5KG5ld0tleSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLmtleSA9PT0gbnVsbCk7CiAgc3RhdGUua2V5ID0gbmV3S2V5OwoKICByZXR1cm4gdGhpczsKfTsKCk5vZGUucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uIGFueSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHN0YXRlLmFueSA9IHRydWU7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuY2hvaWNlID0gZnVuY3Rpb24gY2hvaWNlKG9iaikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLmNob2ljZSA9PT0gbnVsbCk7CiAgc3RhdGUuY2hvaWNlID0gb2JqOwogIHRoaXMuX3VzZUFyZ3MoT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24oa2V5KSB7CiAgICByZXR1cm4gb2JqW2tleV07CiAgfSkpOwoKICByZXR1cm4gdGhpczsKfTsKCk5vZGUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gY29udGFpbnMoaXRlbSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLnVzZSA9PT0gbnVsbCk7CiAgc3RhdGUuY29udGFpbnMgPSBpdGVtOwoKICByZXR1cm4gdGhpczsKfTsKCi8vCi8vIERlY29kaW5nCi8vCgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAvLyBEZWNvZGUgcm9vdCBub2RlCiAgaWYgKHN0YXRlLnBhcmVudCA9PT0gbnVsbCkKICAgIHJldHVybiBpbnB1dC53cmFwUmVzdWx0KHN0YXRlLmNoaWxkcmVuWzBdLl9kZWNvZGUoaW5wdXQpKTsKCiAgdmFyIHJlc3VsdCA9IHN0YXRlWydkZWZhdWx0J107CiAgdmFyIHByZXNlbnQgPSB0cnVlOwoKICB2YXIgcHJldktleTsKICBpZiAoc3RhdGUua2V5ICE9PSBudWxsKQogICAgcHJldktleSA9IGlucHV0LmVudGVyS2V5KHN0YXRlLmtleSk7CgogIC8vIENoZWNrIGlmIHRhZyBpcyB0aGVyZQogIGlmIChzdGF0ZS5vcHRpb25hbCkgewogICAgdmFyIHRhZyA9IG51bGw7CiAgICBpZiAoc3RhdGUuZXhwbGljaXQgIT09IG51bGwpCiAgICAgIHRhZyA9IHN0YXRlLmV4cGxpY2l0OwogICAgZWxzZSBpZiAoc3RhdGUuaW1wbGljaXQgIT09IG51bGwpCiAgICAgIHRhZyA9IHN0YXRlLmltcGxpY2l0OwogICAgZWxzZSBpZiAoc3RhdGUudGFnICE9PSBudWxsKQogICAgICB0YWcgPSBzdGF0ZS50YWc7CgogICAgaWYgKHRhZyA9PT0gbnVsbCAmJiAhc3RhdGUuYW55KSB7CiAgICAgIC8vIFRyaWFsIGFuZCBFcnJvcgogICAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc3RhdGUuY2hvaWNlID09PSBudWxsKQogICAgICAgICAgdGhpcy5fZGVjb2RlR2VuZXJpYyhzdGF0ZS50YWcsIGlucHV0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB0aGlzLl9kZWNvZGVDaG9pY2UoaW5wdXQpOwogICAgICAgIHByZXNlbnQgPSB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcHJlc2VudCA9IGZhbHNlOwogICAgICB9CiAgICAgIGlucHV0LnJlc3RvcmUoc2F2ZSk7CiAgICB9IGVsc2UgewogICAgICBwcmVzZW50ID0gdGhpcy5fcGVla1RhZyhpbnB1dCwgdGFnLCBzdGF0ZS5hbnkpOwoKICAgICAgaWYgKGlucHV0LmlzRXJyb3IocHJlc2VudCkpCiAgICAgICAgcmV0dXJuIHByZXNlbnQ7CiAgICB9CiAgfQoKICAvLyBQdXNoIG9iamVjdCBvbiBzdGFjawogIHZhciBwcmV2T2JqOwogIGlmIChzdGF0ZS5vYmogJiYgcHJlc2VudCkKICAgIHByZXZPYmogPSBpbnB1dC5lbnRlck9iamVjdCgpOwoKICBpZiAocHJlc2VudCkgewogICAgLy8gVW53cmFwIGV4cGxpY2l0IHZhbHVlcwogICAgaWYgKHN0YXRlLmV4cGxpY2l0ICE9PSBudWxsKSB7CiAgICAgIHZhciBleHBsaWNpdCA9IHRoaXMuX2RlY29kZVRhZyhpbnB1dCwgc3RhdGUuZXhwbGljaXQpOwogICAgICBpZiAoaW5wdXQuaXNFcnJvcihleHBsaWNpdCkpCiAgICAgICAgcmV0dXJuIGV4cGxpY2l0OwogICAgICBpbnB1dCA9IGV4cGxpY2l0OwogICAgfQoKICAgIC8vIFVud3JhcCBpbXBsaWNpdCBhbmQgbm9ybWFsIHZhbHVlcwogICAgaWYgKHN0YXRlLnVzZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgICAgaWYgKHN0YXRlLmFueSkKICAgICAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgdmFyIGJvZHkgPSB0aGlzLl9kZWNvZGVUYWcoCiAgICAgICAgaW5wdXQsCiAgICAgICAgc3RhdGUuaW1wbGljaXQgIT09IG51bGwgPyBzdGF0ZS5pbXBsaWNpdCA6IHN0YXRlLnRhZywKICAgICAgICBzdGF0ZS5hbnkKICAgICAgKTsKICAgICAgaWYgKGlucHV0LmlzRXJyb3IoYm9keSkpCiAgICAgICAgcmV0dXJuIGJvZHk7CgogICAgICBpZiAoc3RhdGUuYW55KQogICAgICAgIHJlc3VsdCA9IGlucHV0LnJhdyhzYXZlKTsKICAgICAgZWxzZQogICAgICAgIGlucHV0ID0gYm9keTsKICAgIH0KCiAgICAvLyBTZWxlY3QgcHJvcGVyIG1ldGhvZCBmb3IgdGFnCiAgICBpZiAoc3RhdGUuYW55KQogICAgICByZXN1bHQgPSByZXN1bHQ7CiAgICBlbHNlIGlmIChzdGF0ZS5jaG9pY2UgPT09IG51bGwpCiAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUdlbmVyaWMoc3RhdGUudGFnLCBpbnB1dCk7CiAgICBlbHNlCiAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUNob2ljZShpbnB1dCk7CgogICAgaWYgKGlucHV0LmlzRXJyb3IocmVzdWx0KSkKICAgICAgcmV0dXJuIHJlc3VsdDsKCiAgICAvLyBEZWNvZGUgY2hpbGRyZW4KICAgIGlmICghc3RhdGUuYW55ICYmIHN0YXRlLmNob2ljZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaGlsZHJlbiAhPT0gbnVsbCkgewogICAgICBzdGF0ZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIGRlY29kZUNoaWxkcmVuKGNoaWxkKSB7CiAgICAgICAgLy8gTk9URTogV2UgYXJlIGlnbm9yaW5nIGVycm9ycyBoZXJlLCB0byBsZXQgcGFyc2VyIGNvbnRpbnVlIHdpdGggb3RoZXIKICAgICAgICAvLyBwYXJ0cyBvZiBlbmNvZGVkIGRhdGEKICAgICAgICBjaGlsZC5fZGVjb2RlKGlucHV0KTsKICAgICAgfSk7CiAgICB9CgogICAgLy8gRGVjb2RlIGNvbnRhaW5lZC9lbmNvZGVkIGJ5IHNjaGVtYSwgb25seSBpbiBiaXQgb3Igb2N0ZXQgc3RyaW5ncwogICAgaWYgKHN0YXRlLmNvbnRhaW5zICYmIChzdGF0ZS50YWcgPT09ICdvY3RzdHInIHx8IHN0YXRlLnRhZyA9PT0gJ2JpdHN0cicpKSB7CiAgICAgIHZhciBkYXRhID0gbmV3IERlY29kZXJCdWZmZXIocmVzdWx0KTsKICAgICAgcmVzdWx0ID0gdGhpcy5fZ2V0VXNlKHN0YXRlLmNvbnRhaW5zLCBpbnB1dC5fcmVwb3J0ZXJTdGF0ZS5vYmopLl9kZWNvZGUoZGF0YSk7CiAgICB9CiAgfQoKICAvLyBQb3Agb2JqZWN0CiAgaWYgKHN0YXRlLm9iaiAmJiBwcmVzZW50KQogICAgcmVzdWx0ID0gaW5wdXQubGVhdmVPYmplY3QocHJldk9iaik7CgogIC8vIFNldCBrZXkKICBpZiAoc3RhdGUua2V5ICE9PSBudWxsICYmIChyZXN1bHQgIT09IG51bGwgfHwgcHJlc2VudCA9PT0gdHJ1ZSkpCiAgICBpbnB1dC5sZWF2ZUtleShwcmV2S2V5LCBzdGF0ZS5rZXksIHJlc3VsdCk7CgogIHJldHVybiByZXN1bHQ7Cn07CgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlR2VuZXJpYyA9IGZ1bmN0aW9uIGRlY29kZUdlbmVyaWModGFnLCBpbnB1dCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgaWYgKHRhZyA9PT0gJ3NlcScgfHwgdGFnID09PSAnc2V0JykKICAgIHJldHVybiBudWxsOwogIGlmICh0YWcgPT09ICdzZXFvZicgfHwgdGFnID09PSAnc2V0b2YnKQogICAgcmV0dXJuIHRoaXMuX2RlY29kZUxpc3QoaW5wdXQsIHRhZywgc3RhdGUuYXJnc1swXSk7CiAgZWxzZSBpZiAoL3N0ciQvLnRlc3QodGFnKSkKICAgIHJldHVybiB0aGlzLl9kZWNvZGVTdHIoaW5wdXQsIHRhZyk7CiAgZWxzZSBpZiAodGFnID09PSAnb2JqaWQnICYmIHN0YXRlLmFyZ3MpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlT2JqaWQoaW5wdXQsIHN0YXRlLmFyZ3NbMF0sIHN0YXRlLmFyZ3NbMV0pOwogIGVsc2UgaWYgKHRhZyA9PT0gJ29iamlkJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVPYmppZChpbnB1dCwgbnVsbCwgbnVsbCk7CiAgZWxzZSBpZiAodGFnID09PSAnZ2VudGltZScgfHwgdGFnID09PSAndXRjdGltZScpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlVGltZShpbnB1dCwgdGFnKTsKICBlbHNlIGlmICh0YWcgPT09ICdudWxsXycpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlTnVsbChpbnB1dCk7CiAgZWxzZSBpZiAodGFnID09PSAnYm9vbCcpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlQm9vbChpbnB1dCk7CiAgZWxzZSBpZiAodGFnID09PSAnaW50JyB8fCB0YWcgPT09ICdlbnVtJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVJbnQoaW5wdXQsIHN0YXRlLmFyZ3MgJiYgc3RhdGUuYXJnc1swXSk7CiAgZWxzZSBpZiAoc3RhdGUudXNlICE9PSBudWxsKQogICAgcmV0dXJuIHRoaXMuX2dldFVzZShzdGF0ZS51c2UsIGlucHV0Ll9yZXBvcnRlclN0YXRlLm9iaikuX2RlY29kZShpbnB1dCk7CiAgZWxzZQogICAgcmV0dXJuIGlucHV0LmVycm9yKCd1bmtub3duIHRhZzogJyArIHRhZyk7Cn07CgpOb2RlLnByb3RvdHlwZS5fZ2V0VXNlID0gZnVuY3Rpb24gX2dldFVzZShlbnRpdHksIG9iaikgewoKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgLy8gQ3JlYXRlIGFsdGVyZWQgdXNlIGRlY29kZXIgaWYgaW1wbGljaXQgaXMgc2V0CiAgc3RhdGUudXNlRGVjb2RlciA9IHRoaXMuX3VzZShlbnRpdHksIG9iaik7CiAgYXNzZXJ0KHN0YXRlLnVzZURlY29kZXIuX2Jhc2VTdGF0ZS5wYXJlbnQgPT09IG51bGwpOwogIHN0YXRlLnVzZURlY29kZXIgPSBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuY2hpbGRyZW5bMF07CiAgaWYgKHN0YXRlLmltcGxpY2l0ICE9PSBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuaW1wbGljaXQpIHsKICAgIHN0YXRlLnVzZURlY29kZXIgPSBzdGF0ZS51c2VEZWNvZGVyLmNsb25lKCk7CiAgICBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuaW1wbGljaXQgPSBzdGF0ZS5pbXBsaWNpdDsKICB9CiAgcmV0dXJuIHN0YXRlLnVzZURlY29kZXI7Cn07CgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlQ2hvaWNlID0gZnVuY3Rpb24gZGVjb2RlQ2hvaWNlKGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwogIHZhciByZXN1bHQgPSBudWxsOwogIHZhciBtYXRjaCA9IGZhbHNlOwoKICBPYmplY3Qua2V5cyhzdGF0ZS5jaG9pY2UpLnNvbWUoZnVuY3Rpb24oa2V5KSB7CiAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgIHZhciBub2RlID0gc3RhdGUuY2hvaWNlW2tleV07CiAgICB0cnkgewogICAgICB2YXIgdmFsdWUgPSBub2RlLl9kZWNvZGUoaW5wdXQpOwogICAgICBpZiAoaW5wdXQuaXNFcnJvcih2YWx1ZSkpCiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgcmVzdWx0ID0geyB0eXBlOiBrZXksIHZhbHVlOiB2YWx1ZSB9OwogICAgICBtYXRjaCA9IHRydWU7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlucHV0LnJlc3RvcmUoc2F2ZSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0sIHRoaXMpOwoKICBpZiAoIW1hdGNoKQogICAgcmV0dXJuIGlucHV0LmVycm9yKCdDaG9pY2Ugbm90IG1hdGNoZWQnKTsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCi8vCi8vIEVuY29kaW5nCi8vCgpOb2RlLnByb3RvdHlwZS5fY3JlYXRlRW5jb2RlckJ1ZmZlciA9IGZ1bmN0aW9uIGNyZWF0ZUVuY29kZXJCdWZmZXIoZGF0YSkgewogIHJldHVybiBuZXcgRW5jb2RlckJ1ZmZlcihkYXRhLCB0aGlzLnJlcG9ydGVyKTsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgcmVwb3J0ZXIsIHBhcmVudCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICBpZiAoc3RhdGVbJ2RlZmF1bHQnXSAhPT0gbnVsbCAmJiBzdGF0ZVsnZGVmYXVsdCddID09PSBkYXRhKQogICAgcmV0dXJuOwoKICB2YXIgcmVzdWx0ID0gdGhpcy5fZW5jb2RlVmFsdWUoZGF0YSwgcmVwb3J0ZXIsIHBhcmVudCk7CiAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKQogICAgcmV0dXJuOwoKICBpZiAodGhpcy5fc2tpcERlZmF1bHQocmVzdWx0LCByZXBvcnRlciwgcGFyZW50KSkKICAgIHJldHVybjsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGVWYWx1ZSA9IGZ1bmN0aW9uIGVuY29kZShkYXRhLCByZXBvcnRlciwgcGFyZW50KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAvLyBEZWNvZGUgcm9vdCBub2RlCiAgaWYgKHN0YXRlLnBhcmVudCA9PT0gbnVsbCkKICAgIHJldHVybiBzdGF0ZS5jaGlsZHJlblswXS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyIHx8IG5ldyBSZXBvcnRlcigpKTsKCiAgdmFyIHJlc3VsdCA9IG51bGw7CgogIC8vIFNldCByZXBvcnRlciB0byBzaGFyZSBpdCB3aXRoIGEgY2hpbGQgY2xhc3MKICB0aGlzLnJlcG9ydGVyID0gcmVwb3J0ZXI7CgogIC8vIENoZWNrIGlmIGRhdGEgaXMgdGhlcmUKICBpZiAoc3RhdGUub3B0aW9uYWwgJiYgZGF0YSA9PT0gdW5kZWZpbmVkKSB7CiAgICBpZiAoc3RhdGVbJ2RlZmF1bHQnXSAhPT0gbnVsbCkKICAgICAgZGF0YSA9IHN0YXRlWydkZWZhdWx0J10KICAgIGVsc2UKICAgICAgcmV0dXJuOwogIH0KCiAgLy8gRW5jb2RlIGNoaWxkcmVuIGZpcnN0CiAgdmFyIGNvbnRlbnQgPSBudWxsOwogIHZhciBwcmltaXRpdmUgPSBmYWxzZTsKICBpZiAoc3RhdGUuYW55KSB7CiAgICAvLyBBbnl0aGluZyB0aGF0IHdhcyBnaXZlbiBpcyB0cmFuc2xhdGVkIHRvIGJ1ZmZlcgogICAgcmVzdWx0ID0gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihkYXRhKTsKICB9IGVsc2UgaWYgKHN0YXRlLmNob2ljZSkgewogICAgcmVzdWx0ID0gdGhpcy5fZW5jb2RlQ2hvaWNlKGRhdGEsIHJlcG9ydGVyKTsKICB9IGVsc2UgaWYgKHN0YXRlLmNvbnRhaW5zKSB7CiAgICBjb250ZW50ID0gdGhpcy5fZ2V0VXNlKHN0YXRlLmNvbnRhaW5zLCBwYXJlbnQpLl9lbmNvZGUoZGF0YSwgcmVwb3J0ZXIpOwogICAgcHJpbWl0aXZlID0gdHJ1ZTsKICB9IGVsc2UgaWYgKHN0YXRlLmNoaWxkcmVuKSB7CiAgICBjb250ZW50ID0gc3RhdGUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGNoaWxkKSB7CiAgICAgIGlmIChjaGlsZC5fYmFzZVN0YXRlLnRhZyA9PT0gJ251bGxfJykKICAgICAgICByZXR1cm4gY2hpbGQuX2VuY29kZShudWxsLCByZXBvcnRlciwgZGF0YSk7CgogICAgICBpZiAoY2hpbGQuX2Jhc2VTdGF0ZS5rZXkgPT09IG51bGwpCiAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdDaGlsZCBzaG91bGQgaGF2ZSBhIGtleScpOwogICAgICB2YXIgcHJldktleSA9IHJlcG9ydGVyLmVudGVyS2V5KGNoaWxkLl9iYXNlU3RhdGUua2V5KTsKCiAgICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpCiAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdDaGlsZCBleHBlY3RlZCwgYnV0IGlucHV0IGlzIG5vdCBvYmplY3QnKTsKCiAgICAgIHZhciByZXMgPSBjaGlsZC5fZW5jb2RlKGRhdGFbY2hpbGQuX2Jhc2VTdGF0ZS5rZXldLCByZXBvcnRlciwgZGF0YSk7CiAgICAgIHJlcG9ydGVyLmxlYXZlS2V5KHByZXZLZXkpOwoKICAgICAgcmV0dXJuIHJlczsKICAgIH0sIHRoaXMpLmZpbHRlcihmdW5jdGlvbihjaGlsZCkgewogICAgICByZXR1cm4gY2hpbGQ7CiAgICB9KTsKICAgIGNvbnRlbnQgPSB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKGNvbnRlbnQpOwogIH0gZWxzZSB7CiAgICBpZiAoc3RhdGUudGFnID09PSAnc2Vxb2YnIHx8IHN0YXRlLnRhZyA9PT0gJ3NldG9mJykgewogICAgICAvLyBUT0RPKGluZHV0bnkpOiB0aGlzIHNob3VsZCBiZSB0aHJvd24gb24gRFNMIGxldmVsCiAgICAgIGlmICghKHN0YXRlLmFyZ3MgJiYgc3RhdGUuYXJncy5sZW5ndGggPT09IDEpKQogICAgICAgIHJldHVybiByZXBvcnRlci5lcnJvcignVG9vIG1hbnkgYXJncyBmb3IgOiAnICsgc3RhdGUudGFnKTsKCiAgICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkKICAgICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ3NlcW9mL3NldG9mLCBidXQgZGF0YSBpcyBub3QgQXJyYXknKTsKCiAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2xvbmUoKTsKICAgICAgY2hpbGQuX2Jhc2VTdGF0ZS5pbXBsaWNpdCA9IG51bGw7CiAgICAgIGNvbnRlbnQgPSB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKGRhdGEubWFwKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogICAgICAgIHJldHVybiB0aGlzLl9nZXRVc2Uoc3RhdGUuYXJnc1swXSwgZGF0YSkuX2VuY29kZShpdGVtLCByZXBvcnRlcik7CiAgICAgIH0sIGNoaWxkKSk7CiAgICB9IGVsc2UgaWYgKHN0YXRlLnVzZSAhPT0gbnVsbCkgewogICAgICByZXN1bHQgPSB0aGlzLl9nZXRVc2Uoc3RhdGUudXNlLCBwYXJlbnQpLl9lbmNvZGUoZGF0YSwgcmVwb3J0ZXIpOwogICAgfSBlbHNlIHsKICAgICAgY29udGVudCA9IHRoaXMuX2VuY29kZVByaW1pdGl2ZShzdGF0ZS50YWcsIGRhdGEpOwogICAgICBwcmltaXRpdmUgPSB0cnVlOwogICAgfQogIH0KCiAgLy8gRW5jb2RlIGRhdGEgaXRzZWxmCiAgdmFyIHJlc3VsdDsKICBpZiAoIXN0YXRlLmFueSAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgIHZhciB0YWcgPSBzdGF0ZS5pbXBsaWNpdCAhPT0gbnVsbCA/IHN0YXRlLmltcGxpY2l0IDogc3RhdGUudGFnOwogICAgdmFyIGNscyA9IHN0YXRlLmltcGxpY2l0ID09PSBudWxsID8gJ3VuaXZlcnNhbCcgOiAnY29udGV4dCc7CgogICAgaWYgKHRhZyA9PT0gbnVsbCkgewogICAgICBpZiAoc3RhdGUudXNlID09PSBudWxsKQogICAgICAgIHJlcG9ydGVyLmVycm9yKCdUYWcgY291bGQgYmUgb21taXRlZCBvbmx5IGZvciAudXNlKCknKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChzdGF0ZS51c2UgPT09IG51bGwpCiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZW5jb2RlQ29tcG9zaXRlKHRhZywgcHJpbWl0aXZlLCBjbHMsIGNvbnRlbnQpOwogICAgfQogIH0KCiAgLy8gV3JhcCBpbiBleHBsaWNpdAogIGlmIChzdGF0ZS5leHBsaWNpdCAhPT0gbnVsbCkKICAgIHJlc3VsdCA9IHRoaXMuX2VuY29kZUNvbXBvc2l0ZShzdGF0ZS5leHBsaWNpdCwgZmFsc2UsICdjb250ZXh0JywgcmVzdWx0KTsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGVDaG9pY2UgPSBmdW5jdGlvbiBlbmNvZGVDaG9pY2UoZGF0YSwgcmVwb3J0ZXIpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHZhciBub2RlID0gc3RhdGUuY2hvaWNlW2RhdGEudHlwZV07CiAgaWYgKCFub2RlKSB7CiAgICBhc3NlcnQoCiAgICAgICAgZmFsc2UsCiAgICAgICAgZGF0YS50eXBlICsgJyBub3QgZm91bmQgaW4gJyArCiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHN0YXRlLmNob2ljZSkpKTsKICB9CiAgcmV0dXJuIG5vZGUuX2VuY29kZShkYXRhLnZhbHVlLCByZXBvcnRlcik7Cn07CgpOb2RlLnByb3RvdHlwZS5fZW5jb2RlUHJpbWl0aXZlID0gZnVuY3Rpb24gZW5jb2RlUHJpbWl0aXZlKHRhZywgZGF0YSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgaWYgKC9zdHIkLy50ZXN0KHRhZykpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlU3RyKGRhdGEsIHRhZyk7CiAgZWxzZSBpZiAodGFnID09PSAnb2JqaWQnICYmIHN0YXRlLmFyZ3MpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlT2JqaWQoZGF0YSwgc3RhdGUucmV2ZXJzZUFyZ3NbMF0sIHN0YXRlLmFyZ3NbMV0pOwogIGVsc2UgaWYgKHRhZyA9PT0gJ29iamlkJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVPYmppZChkYXRhLCBudWxsLCBudWxsKTsKICBlbHNlIGlmICh0YWcgPT09ICdnZW50aW1lJyB8fCB0YWcgPT09ICd1dGN0aW1lJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVUaW1lKGRhdGEsIHRhZyk7CiAgZWxzZSBpZiAodGFnID09PSAnbnVsbF8nKQogICAgcmV0dXJuIHRoaXMuX2VuY29kZU51bGwoKTsKICBlbHNlIGlmICh0YWcgPT09ICdpbnQnIHx8IHRhZyA9PT0gJ2VudW0nKQogICAgcmV0dXJuIHRoaXMuX2VuY29kZUludChkYXRhLCBzdGF0ZS5hcmdzICYmIHN0YXRlLnJldmVyc2VBcmdzWzBdKTsKICBlbHNlIGlmICh0YWcgPT09ICdib29sJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVCb29sKGRhdGEpOwogIGVsc2UKICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgdGFnOiAnICsgdGFnKTsKfTsKCk5vZGUucHJvdG90eXBlLl9pc051bXN0ciA9IGZ1bmN0aW9uIGlzTnVtc3RyKHN0cikgewogIHJldHVybiAvXlswLTkgXSokLy50ZXN0KHN0cik7Cn07CgpOb2RlLnByb3RvdHlwZS5faXNQcmludHN0ciA9IGZ1bmN0aW9uIGlzUHJpbnRzdHIoc3RyKSB7CiAgcmV0dXJuIC9eW0EtWmEtejAtOSAnXChcKVwrLFwtXC5cLzo9XD9dKiQvLnRlc3Qoc3RyKTsKfTsKCn0seyIuLi9iYXNlIjo1NzQsIm1pbmltYWxpc3RpYy1hc3NlcnQiOjU4NX1dLDU3NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CgpmdW5jdGlvbiBSZXBvcnRlcihvcHRpb25zKSB7CiAgdGhpcy5fcmVwb3J0ZXJTdGF0ZSA9IHsKICAgIG9iajogbnVsbCwKICAgIHBhdGg6IFtdLAogICAgb3B0aW9uczogb3B0aW9ucyB8fCB7fSwKICAgIGVycm9yczogW10KICB9Owp9CmV4cG9ydHMuUmVwb3J0ZXIgPSBSZXBvcnRlcjsKClJlcG9ydGVyLnByb3RvdHlwZS5pc0Vycm9yID0gZnVuY3Rpb24gaXNFcnJvcihvYmopIHsKICByZXR1cm4gb2JqIGluc3RhbmNlb2YgUmVwb3J0ZXJFcnJvcjsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICByZXR1cm4geyBvYmo6IHN0YXRlLm9iaiwgcGF0aExlbjogc3RhdGUucGF0aC5sZW5ndGggfTsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gcmVzdG9yZShkYXRhKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgc3RhdGUub2JqID0gZGF0YS5vYmo7CiAgc3RhdGUucGF0aCA9IHN0YXRlLnBhdGguc2xpY2UoMCwgZGF0YS5wYXRoTGVuKTsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5lbnRlcktleSA9IGZ1bmN0aW9uIGVudGVyS2V5KGtleSkgewogIHJldHVybiB0aGlzLl9yZXBvcnRlclN0YXRlLnBhdGgucHVzaChrZXkpOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLmxlYXZlS2V5ID0gZnVuY3Rpb24gbGVhdmVLZXkoaW5kZXgsIGtleSwgdmFsdWUpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICBzdGF0ZS5wYXRoID0gc3RhdGUucGF0aC5zbGljZSgwLCBpbmRleCAtIDEpOwogIGlmIChzdGF0ZS5vYmogIT09IG51bGwpCiAgICBzdGF0ZS5vYmpba2V5XSA9IHZhbHVlOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLmVudGVyT2JqZWN0ID0gZnVuY3Rpb24gZW50ZXJPYmplY3QoKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgdmFyIHByZXYgPSBzdGF0ZS5vYmo7CiAgc3RhdGUub2JqID0ge307CiAgcmV0dXJuIHByZXY7Cn07CgpSZXBvcnRlci5wcm90b3R5cGUubGVhdmVPYmplY3QgPSBmdW5jdGlvbiBsZWF2ZU9iamVjdChwcmV2KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgdmFyIG5vdyA9IHN0YXRlLm9iajsKICBzdGF0ZS5vYmogPSBwcmV2OwogIHJldHVybiBub3c7Cn07CgpSZXBvcnRlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihtc2cpIHsKICB2YXIgZXJyOwogIHZhciBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHZhciBpbmhlcml0ZWQgPSBtc2cgaW5zdGFuY2VvZiBSZXBvcnRlckVycm9yOwogIGlmIChpbmhlcml0ZWQpIHsKICAgIGVyciA9IG1zZzsKICB9IGVsc2UgewogICAgZXJyID0gbmV3IFJlcG9ydGVyRXJyb3Ioc3RhdGUucGF0aC5tYXAoZnVuY3Rpb24oZWxlbSkgewogICAgICByZXR1cm4gJ1snICsgSlNPTi5zdHJpbmdpZnkoZWxlbSkgKyAnXSc7CiAgICB9KS5qb2luKCcnKSwgbXNnLm1lc3NhZ2UgfHwgbXNnLCBtc2cuc3RhY2spOwogIH0KCiAgaWYgKCFzdGF0ZS5vcHRpb25zLnBhcnRpYWwpCiAgICB0aHJvdyBlcnI7CgogIGlmICghaW5oZXJpdGVkKQogICAgc3RhdGUuZXJyb3JzLnB1c2goZXJyKTsKCiAgcmV0dXJuIGVycjsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS53cmFwUmVzdWx0ID0gZnVuY3Rpb24gd3JhcFJlc3VsdChyZXN1bHQpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwogIGlmICghc3RhdGUub3B0aW9ucy5wYXJ0aWFsKQogICAgcmV0dXJuIHJlc3VsdDsKCiAgcmV0dXJuIHsKICAgIHJlc3VsdDogdGhpcy5pc0Vycm9yKHJlc3VsdCkgPyBudWxsIDogcmVzdWx0LAogICAgZXJyb3JzOiBzdGF0ZS5lcnJvcnMKICB9Owp9OwoKZnVuY3Rpb24gUmVwb3J0ZXJFcnJvcihwYXRoLCBtc2cpIHsKICB0aGlzLnBhdGggPSBwYXRoOwogIHRoaXMucmV0aHJvdyhtc2cpOwp9Owppbmhlcml0cyhSZXBvcnRlckVycm9yLCBFcnJvcik7CgpSZXBvcnRlckVycm9yLnByb3RvdHlwZS5yZXRocm93ID0gZnVuY3Rpb24gcmV0aHJvdyhtc2cpIHsKICB0aGlzLm1lc3NhZ2UgPSBtc2cgKyAnIGF0OiAnICsgKHRoaXMucGF0aCB8fCAnKHNoYWxsb3cpJyk7CiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKQogICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgUmVwb3J0ZXJFcnJvcik7CgogIGlmICghdGhpcy5zdGFjaykgewogICAgdHJ5IHsKICAgICAgLy8gSUUgb25seSBhZGRzIHN0YWNrIHdoZW4gdGhyb3duCiAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aGlzLnN0YWNrID0gZS5zdGFjazsKICAgIH0KICB9CiAgcmV0dXJuIHRoaXM7Cn07Cgp9LHsiaW5oZXJpdHMiOjcwMX1dLDU3NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBjb25zdGFudHMgPSByZXF1aXJlKCcuLi9jb25zdGFudHMnKTsKCmV4cG9ydHMudGFnQ2xhc3MgPSB7CiAgMDogJ3VuaXZlcnNhbCcsCiAgMTogJ2FwcGxpY2F0aW9uJywKICAyOiAnY29udGV4dCcsCiAgMzogJ3ByaXZhdGUnCn07CmV4cG9ydHMudGFnQ2xhc3NCeU5hbWUgPSBjb25zdGFudHMuX3JldmVyc2UoZXhwb3J0cy50YWdDbGFzcyk7CgpleHBvcnRzLnRhZyA9IHsKICAweDAwOiAnZW5kJywKICAweDAxOiAnYm9vbCcsCiAgMHgwMjogJ2ludCcsCiAgMHgwMzogJ2JpdHN0cicsCiAgMHgwNDogJ29jdHN0cicsCiAgMHgwNTogJ251bGxfJywKICAweDA2OiAnb2JqaWQnLAogIDB4MDc6ICdvYmpEZXNjJywKICAweDA4OiAnZXh0ZXJuYWwnLAogIDB4MDk6ICdyZWFsJywKICAweDBhOiAnZW51bScsCiAgMHgwYjogJ2VtYmVkJywKICAweDBjOiAndXRmOHN0cicsCiAgMHgwZDogJ3JlbGF0aXZlT2lkJywKICAweDEwOiAnc2VxJywKICAweDExOiAnc2V0JywKICAweDEyOiAnbnVtc3RyJywKICAweDEzOiAncHJpbnRzdHInLAogIDB4MTQ6ICd0NjFzdHInLAogIDB4MTU6ICd2aWRlb3N0cicsCiAgMHgxNjogJ2lhNXN0cicsCiAgMHgxNzogJ3V0Y3RpbWUnLAogIDB4MTg6ICdnZW50aW1lJywKICAweDE5OiAnZ3JhcGhzdHInLAogIDB4MWE6ICdpc282NDZzdHInLAogIDB4MWI6ICdnZW5zdHInLAogIDB4MWM6ICd1bmlzdHInLAogIDB4MWQ6ICdjaGFyc3RyJywKICAweDFlOiAnYm1wc3RyJwp9OwpleHBvcnRzLnRhZ0J5TmFtZSA9IGNvbnN0YW50cy5fcmV2ZXJzZShleHBvcnRzLnRhZyk7Cgp9LHsiLi4vY29uc3RhbnRzIjo1Nzh9XSw1Nzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY29uc3RhbnRzID0gZXhwb3J0czsKCi8vIEhlbHBlcgpjb25zdGFudHMuX3JldmVyc2UgPSBmdW5jdGlvbiByZXZlcnNlKG1hcCkgewogIHZhciByZXMgPSB7fTsKCiAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgLy8gQ29udmVydCBrZXkgdG8gaW50ZWdlciBpZiBpdCBpcyBzdHJpbmdpZmllZAogICAgaWYgKChrZXkgfCAwKSA9PSBrZXkpCiAgICAgIGtleSA9IGtleSB8IDA7CgogICAgdmFyIHZhbHVlID0gbWFwW2tleV07CiAgICByZXNbdmFsdWVdID0ga2V5OwogIH0pOwoKICByZXR1cm4gcmVzOwp9OwoKY29uc3RhbnRzLmRlciA9IHJlcXVpcmUoJy4vZGVyJyk7Cgp9LHsiLi9kZXIiOjU3N31dLDU3OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgYXNuMSA9IHJlcXVpcmUoJy4uLy4uL2FzbjEnKTsKdmFyIGJhc2UgPSBhc24xLmJhc2U7CnZhciBiaWdudW0gPSBhc24xLmJpZ251bTsKCi8vIEltcG9ydCBERVIgY29uc3RhbnRzCnZhciBkZXIgPSBhc24xLmNvbnN0YW50cy5kZXI7CgpmdW5jdGlvbiBERVJEZWNvZGVyKGVudGl0eSkgewogIHRoaXMuZW5jID0gJ2Rlcic7CiAgdGhpcy5uYW1lID0gZW50aXR5Lm5hbWU7CiAgdGhpcy5lbnRpdHkgPSBlbnRpdHk7CgogIC8vIENvbnN0cnVjdCBiYXNlIHRyZWUKICB0aGlzLnRyZWUgPSBuZXcgREVSTm9kZSgpOwogIHRoaXMudHJlZS5faW5pdChlbnRpdHkuYm9keSk7Cn07Cm1vZHVsZS5leHBvcnRzID0gREVSRGVjb2RlcjsKCkRFUkRlY29kZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShkYXRhLCBvcHRpb25zKSB7CiAgaWYgKCEoZGF0YSBpbnN0YW5jZW9mIGJhc2UuRGVjb2RlckJ1ZmZlcikpCiAgICBkYXRhID0gbmV3IGJhc2UuRGVjb2RlckJ1ZmZlcihkYXRhLCBvcHRpb25zKTsKCiAgcmV0dXJuIHRoaXMudHJlZS5fZGVjb2RlKGRhdGEsIG9wdGlvbnMpOwp9OwoKLy8gVHJlZSBtZXRob2RzCgpmdW5jdGlvbiBERVJOb2RlKHBhcmVudCkgewogIGJhc2UuTm9kZS5jYWxsKHRoaXMsICdkZXInLCBwYXJlbnQpOwp9CmluaGVyaXRzKERFUk5vZGUsIGJhc2UuTm9kZSk7CgpERVJOb2RlLnByb3RvdHlwZS5fcGVla1RhZyA9IGZ1bmN0aW9uIHBlZWtUYWcoYnVmZmVyLCB0YWcsIGFueSkgewogIGlmIChidWZmZXIuaXNFbXB0eSgpKQogICAgcmV0dXJuIGZhbHNlOwoKICB2YXIgc3RhdGUgPSBidWZmZXIuc2F2ZSgpOwogIHZhciBkZWNvZGVkVGFnID0gZGVyRGVjb2RlVGFnKGJ1ZmZlciwgJ0ZhaWxlZCB0byBwZWVrIHRhZzogIicgKyB0YWcgKyAnIicpOwogIGlmIChidWZmZXIuaXNFcnJvcihkZWNvZGVkVGFnKSkKICAgIHJldHVybiBkZWNvZGVkVGFnOwoKICBidWZmZXIucmVzdG9yZShzdGF0ZSk7CgogIHJldHVybiBkZWNvZGVkVGFnLnRhZyA9PT0gdGFnIHx8IGRlY29kZWRUYWcudGFnU3RyID09PSB0YWcgfHwKICAgIChkZWNvZGVkVGFnLnRhZ1N0ciArICdvZicpID09PSB0YWcgfHwgYW55Owp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZVRhZyA9IGZ1bmN0aW9uIGRlY29kZVRhZyhidWZmZXIsIHRhZywgYW55KSB7CiAgdmFyIGRlY29kZWRUYWcgPSBkZXJEZWNvZGVUYWcoYnVmZmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGYWlsZWQgdG8gZGVjb2RlIHRhZyBvZiAiJyArIHRhZyArICciJyk7CiAgaWYgKGJ1ZmZlci5pc0Vycm9yKGRlY29kZWRUYWcpKQogICAgcmV0dXJuIGRlY29kZWRUYWc7CgogIHZhciBsZW4gPSBkZXJEZWNvZGVMZW4oYnVmZmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgZGVjb2RlZFRhZy5wcmltaXRpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAnRmFpbGVkIHRvIGdldCBsZW5ndGggb2YgIicgKyB0YWcgKyAnIicpOwoKICAvLyBGYWlsdXJlCiAgaWYgKGJ1ZmZlci5pc0Vycm9yKGxlbikpCiAgICByZXR1cm4gbGVuOwoKICBpZiAoIWFueSAmJgogICAgICBkZWNvZGVkVGFnLnRhZyAhPT0gdGFnICYmCiAgICAgIGRlY29kZWRUYWcudGFnU3RyICE9PSB0YWcgJiYKICAgICAgZGVjb2RlZFRhZy50YWdTdHIgKyAnb2YnICE9PSB0YWcpIHsKICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0ZhaWxlZCB0byBtYXRjaCB0YWc6ICInICsgdGFnICsgJyInKTsKICB9CgogIGlmIChkZWNvZGVkVGFnLnByaW1pdGl2ZSB8fCBsZW4gIT09IG51bGwpCiAgICByZXR1cm4gYnVmZmVyLnNraXAobGVuLCAnRmFpbGVkIHRvIG1hdGNoIGJvZHkgb2Y6ICInICsgdGFnICsgJyInKTsKCiAgLy8gSW5kZWZpbml0ZSBsZW5ndGguLi4gZmluZCBFTkQgdGFnCiAgdmFyIHN0YXRlID0gYnVmZmVyLnNhdmUoKTsKICB2YXIgcmVzID0gdGhpcy5fc2tpcFVudGlsRW5kKAogICAgICBidWZmZXIsCiAgICAgICdGYWlsZWQgdG8gc2tpcCBpbmRlZmluaXRlIGxlbmd0aCBib2R5OiAiJyArIHRoaXMudGFnICsgJyInKTsKICBpZiAoYnVmZmVyLmlzRXJyb3IocmVzKSkKICAgIHJldHVybiByZXM7CgogIGxlbiA9IGJ1ZmZlci5vZmZzZXQgLSBzdGF0ZS5vZmZzZXQ7CiAgYnVmZmVyLnJlc3RvcmUoc3RhdGUpOwogIHJldHVybiBidWZmZXIuc2tpcChsZW4sICdGYWlsZWQgdG8gbWF0Y2ggYm9keSBvZjogIicgKyB0YWcgKyAnIicpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX3NraXBVbnRpbEVuZCA9IGZ1bmN0aW9uIHNraXBVbnRpbEVuZChidWZmZXIsIGZhaWwpIHsKICB3aGlsZSAodHJ1ZSkgewogICAgdmFyIHRhZyA9IGRlckRlY29kZVRhZyhidWZmZXIsIGZhaWwpOwogICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHRhZykpCiAgICAgIHJldHVybiB0YWc7CiAgICB2YXIgbGVuID0gZGVyRGVjb2RlTGVuKGJ1ZmZlciwgdGFnLnByaW1pdGl2ZSwgZmFpbCk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IobGVuKSkKICAgICAgcmV0dXJuIGxlbjsKCiAgICB2YXIgcmVzOwogICAgaWYgKHRhZy5wcmltaXRpdmUgfHwgbGVuICE9PSBudWxsKQogICAgICByZXMgPSBidWZmZXIuc2tpcChsZW4pCiAgICBlbHNlCiAgICAgIHJlcyA9IHRoaXMuX3NraXBVbnRpbEVuZChidWZmZXIsIGZhaWwpOwoKICAgIC8vIEZhaWx1cmUKICAgIGlmIChidWZmZXIuaXNFcnJvcihyZXMpKQogICAgICByZXR1cm4gcmVzOwoKICAgIGlmICh0YWcudGFnU3RyID09PSAnZW5kJykKICAgICAgYnJlYWs7CiAgfQp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZUxpc3QgPSBmdW5jdGlvbiBkZWNvZGVMaXN0KGJ1ZmZlciwgdGFnLCBkZWNvZGVyKSB7CiAgdmFyIHJlc3VsdCA9IFtdOwogIHdoaWxlICghYnVmZmVyLmlzRW1wdHkoKSkgewogICAgdmFyIHBvc3NpYmxlRW5kID0gdGhpcy5fcGVla1RhZyhidWZmZXIsICdlbmQnKTsKICAgIGlmIChidWZmZXIuaXNFcnJvcihwb3NzaWJsZUVuZCkpCiAgICAgIHJldHVybiBwb3NzaWJsZUVuZDsKCiAgICB2YXIgcmVzID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLCAnZGVyJyk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IocmVzKSAmJiBwb3NzaWJsZUVuZCkKICAgICAgYnJlYWs7CiAgICByZXN1bHQucHVzaChyZXMpOwogIH0KICByZXR1cm4gcmVzdWx0Owp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZVN0ciA9IGZ1bmN0aW9uIGRlY29kZVN0cihidWZmZXIsIHRhZykgewogIGlmICh0YWcgPT09ICdiaXRzdHInKSB7CiAgICB2YXIgdW51c2VkID0gYnVmZmVyLnJlYWRVSW50OCgpOwogICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHVudXNlZCkpCiAgICAgIHJldHVybiB1bnVzZWQ7CiAgICByZXR1cm4geyB1bnVzZWQ6IHVudXNlZCwgZGF0YTogYnVmZmVyLnJhdygpIH07CiAgfSBlbHNlIGlmICh0YWcgPT09ICdibXBzdHInKSB7CiAgICB2YXIgcmF3ID0gYnVmZmVyLnJhdygpOwogICAgaWYgKHJhdy5sZW5ndGggJSAyID09PSAxKQogICAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogYm1wc3RyIGxlbmd0aCBtaXNtYXRjaCcpOwoKICAgIHZhciBzdHIgPSAnJzsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3Lmxlbmd0aCAvIDI7IGkrKykgewogICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShyYXcucmVhZFVJbnQxNkJFKGkgKiAyKSk7CiAgICB9CiAgICByZXR1cm4gc3RyOwogIH0gZWxzZSBpZiAodGFnID09PSAnbnVtc3RyJykgewogICAgdmFyIG51bXN0ciA9IGJ1ZmZlci5yYXcoKS50b1N0cmluZygnYXNjaWknKTsKICAgIGlmICghdGhpcy5faXNOdW1zdHIobnVtc3RyKSkgewogICAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ251bXN0ciB1bnN1cHBvcnRlZCBjaGFyYWN0ZXJzJyk7CiAgICB9CiAgICByZXR1cm4gbnVtc3RyOwogIH0gZWxzZSBpZiAodGFnID09PSAnb2N0c3RyJykgewogICAgcmV0dXJuIGJ1ZmZlci5yYXcoKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3ByaW50c3RyJykgewogICAgdmFyIHByaW50c3RyID0gYnVmZmVyLnJhdygpLnRvU3RyaW5nKCdhc2NpaScpOwogICAgaWYgKCF0aGlzLl9pc1ByaW50c3RyKHByaW50c3RyKSkgewogICAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ByaW50c3RyIHVuc3VwcG9ydGVkIGNoYXJhY3RlcnMnKTsKICAgIH0KICAgIHJldHVybiBwcmludHN0cjsKICB9IGVsc2UgaWYgKC9zdHIkLy50ZXN0KHRhZykpIHsKICAgIHJldHVybiBidWZmZXIucmF3KCkudG9TdHJpbmcoKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGJ1ZmZlci5lcnJvcignRGVjb2Rpbmcgb2Ygc3RyaW5nIHR5cGU6ICcgKyB0YWcgKyAnIHVuc3VwcG9ydGVkJyk7CiAgfQp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZU9iamlkID0gZnVuY3Rpb24gZGVjb2RlT2JqaWQoYnVmZmVyLCB2YWx1ZXMsIHJlbGF0aXZlKSB7CiAgdmFyIHJlc3VsdDsKICB2YXIgaWRlbnRpZmllcnMgPSBbXTsKICB2YXIgaWRlbnQgPSAwOwogIHdoaWxlICghYnVmZmVyLmlzRW1wdHkoKSkgewogICAgdmFyIHN1YmlkZW50ID0gYnVmZmVyLnJlYWRVSW50OCgpOwogICAgaWRlbnQgPDw9IDc7CiAgICBpZGVudCB8PSBzdWJpZGVudCAmIDB4N2Y7CiAgICBpZiAoKHN1YmlkZW50ICYgMHg4MCkgPT09IDApIHsKICAgICAgaWRlbnRpZmllcnMucHVzaChpZGVudCk7CiAgICAgIGlkZW50ID0gMDsKICAgIH0KICB9CiAgaWYgKHN1YmlkZW50ICYgMHg4MCkKICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnQpOwoKICB2YXIgZmlyc3QgPSAoaWRlbnRpZmllcnNbMF0gLyA0MCkgfCAwOwogIHZhciBzZWNvbmQgPSBpZGVudGlmaWVyc1swXSAlIDQwOwoKICBpZiAocmVsYXRpdmUpCiAgICByZXN1bHQgPSBpZGVudGlmaWVyczsKICBlbHNlCiAgICByZXN1bHQgPSBbZmlyc3QsIHNlY29uZF0uY29uY2F0KGlkZW50aWZpZXJzLnNsaWNlKDEpKTsKCiAgaWYgKHZhbHVlcykgewogICAgdmFyIHRtcCA9IHZhbHVlc1tyZXN1bHQuam9pbignICcpXTsKICAgIGlmICh0bXAgPT09IHVuZGVmaW5lZCkKICAgICAgdG1wID0gdmFsdWVzW3Jlc3VsdC5qb2luKCcuJyldOwogICAgaWYgKHRtcCAhPT0gdW5kZWZpbmVkKQogICAgICByZXN1bHQgPSB0bXA7CiAgfQoKICByZXR1cm4gcmVzdWx0Owp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZVRpbWUgPSBmdW5jdGlvbiBkZWNvZGVUaW1lKGJ1ZmZlciwgdGFnKSB7CiAgdmFyIHN0ciA9IGJ1ZmZlci5yYXcoKS50b1N0cmluZygpOwogIGlmICh0YWcgPT09ICdnZW50aW1lJykgewogICAgdmFyIHllYXIgPSBzdHIuc2xpY2UoMCwgNCkgfCAwOwogICAgdmFyIG1vbiA9IHN0ci5zbGljZSg0LCA2KSB8IDA7CiAgICB2YXIgZGF5ID0gc3RyLnNsaWNlKDYsIDgpIHwgMDsKICAgIHZhciBob3VyID0gc3RyLnNsaWNlKDgsIDEwKSB8IDA7CiAgICB2YXIgbWluID0gc3RyLnNsaWNlKDEwLCAxMikgfCAwOwogICAgdmFyIHNlYyA9IHN0ci5zbGljZSgxMiwgMTQpIHwgMDsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3V0Y3RpbWUnKSB7CiAgICB2YXIgeWVhciA9IHN0ci5zbGljZSgwLCAyKSB8IDA7CiAgICB2YXIgbW9uID0gc3RyLnNsaWNlKDIsIDQpIHwgMDsKICAgIHZhciBkYXkgPSBzdHIuc2xpY2UoNCwgNikgfCAwOwogICAgdmFyIGhvdXIgPSBzdHIuc2xpY2UoNiwgOCkgfCAwOwogICAgdmFyIG1pbiA9IHN0ci5zbGljZSg4LCAxMCkgfCAwOwogICAgdmFyIHNlYyA9IHN0ci5zbGljZSgxMCwgMTIpIHwgMDsKICAgIGlmICh5ZWFyIDwgNzApCiAgICAgIHllYXIgPSAyMDAwICsgeWVhcjsKICAgIGVsc2UKICAgICAgeWVhciA9IDE5MDAgKyB5ZWFyOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyAnICsgdGFnICsgJyB0aW1lIGlzIG5vdCBzdXBwb3J0ZWQgeWV0Jyk7CiAgfQoKICByZXR1cm4gRGF0ZS5VVEMoeWVhciwgbW9uIC0gMSwgZGF5LCBob3VyLCBtaW4sIHNlYywgMCk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlTnVsbCA9IGZ1bmN0aW9uIGRlY29kZU51bGwoYnVmZmVyKSB7CiAgcmV0dXJuIG51bGw7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlQm9vbCA9IGZ1bmN0aW9uIGRlY29kZUJvb2woYnVmZmVyKSB7CiAgdmFyIHJlcyA9IGJ1ZmZlci5yZWFkVUludDgoKTsKICBpZiAoYnVmZmVyLmlzRXJyb3IocmVzKSkKICAgIHJldHVybiByZXM7CiAgZWxzZQogICAgcmV0dXJuIHJlcyAhPT0gMDsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVJbnQgPSBmdW5jdGlvbiBkZWNvZGVJbnQoYnVmZmVyLCB2YWx1ZXMpIHsKICAvLyBCaWdpbnQsIHJldHVybiBhcyBpdCBpcyAoYXNzdW1lIGJpZyBlbmRpYW4pCiAgdmFyIHJhdyA9IGJ1ZmZlci5yYXcoKTsKICB2YXIgcmVzID0gbmV3IGJpZ251bShyYXcpOwoKICBpZiAodmFsdWVzKQogICAgcmVzID0gdmFsdWVzW3Jlcy50b1N0cmluZygxMCldIHx8IHJlczsKCiAgcmV0dXJuIHJlczsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl91c2UgPSBmdW5jdGlvbiB1c2UoZW50aXR5LCBvYmopIHsKICBpZiAodHlwZW9mIGVudGl0eSA9PT0gJ2Z1bmN0aW9uJykKICAgIGVudGl0eSA9IGVudGl0eShvYmopOwogIHJldHVybiBlbnRpdHkuX2dldERlY29kZXIoJ2RlcicpLnRyZWU7Cn07CgovLyBVdGlsaXR5IG1ldGhvZHMKCmZ1bmN0aW9uIGRlckRlY29kZVRhZyhidWYsIGZhaWwpIHsKICB2YXIgdGFnID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICBpZiAoYnVmLmlzRXJyb3IodGFnKSkKICAgIHJldHVybiB0YWc7CgogIHZhciBjbHMgPSBkZXIudGFnQ2xhc3NbdGFnID4+IDZdOwogIHZhciBwcmltaXRpdmUgPSAodGFnICYgMHgyMCkgPT09IDA7CgogIC8vIE11bHRpLW9jdGV0IHRhZyAtIGxvYWQKICBpZiAoKHRhZyAmIDB4MWYpID09PSAweDFmKSB7CiAgICB2YXIgb2N0ID0gdGFnOwogICAgdGFnID0gMDsKICAgIHdoaWxlICgob2N0ICYgMHg4MCkgPT09IDB4ODApIHsKICAgICAgb2N0ID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICAgICAgaWYgKGJ1Zi5pc0Vycm9yKG9jdCkpCiAgICAgICAgcmV0dXJuIG9jdDsKCiAgICAgIHRhZyA8PD0gNzsKICAgICAgdGFnIHw9IG9jdCAmIDB4N2Y7CiAgICB9CiAgfSBlbHNlIHsKICAgIHRhZyAmPSAweDFmOwogIH0KICB2YXIgdGFnU3RyID0gZGVyLnRhZ1t0YWddOwoKICByZXR1cm4gewogICAgY2xzOiBjbHMsCiAgICBwcmltaXRpdmU6IHByaW1pdGl2ZSwKICAgIHRhZzogdGFnLAogICAgdGFnU3RyOiB0YWdTdHIKICB9Owp9CgpmdW5jdGlvbiBkZXJEZWNvZGVMZW4oYnVmLCBwcmltaXRpdmUsIGZhaWwpIHsKICB2YXIgbGVuID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICBpZiAoYnVmLmlzRXJyb3IobGVuKSkKICAgIHJldHVybiBsZW47CgogIC8vIEluZGVmaW5pdGUgZm9ybQogIGlmICghcHJpbWl0aXZlICYmIGxlbiA9PT0gMHg4MCkKICAgIHJldHVybiBudWxsOwoKICAvLyBEZWZpbml0ZSBmb3JtCiAgaWYgKChsZW4gJiAweDgwKSA9PT0gMCkgewogICAgLy8gU2hvcnQgZm9ybQogICAgcmV0dXJuIGxlbjsKICB9CgogIC8vIExvbmcgZm9ybQogIHZhciBudW0gPSBsZW4gJiAweDdmOwogIGlmIChudW0gPj0gNCkKICAgIHJldHVybiBidWYuZXJyb3IoJ2xlbmd0aCBvY3RlY3QgaXMgdG9vIGxvbmcnKTsKCiAgbGVuID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IG51bTsgaSsrKSB7CiAgICBsZW4gPDw9IDg7CiAgICB2YXIgaiA9IGJ1Zi5yZWFkVUludDgoZmFpbCk7CiAgICBpZiAoYnVmLmlzRXJyb3IoaikpCiAgICAgIHJldHVybiBqOwogICAgbGVuIHw9IGo7CiAgfQoKICByZXR1cm4gbGVuOwp9Cgp9LHsiLi4vLi4vYXNuMSI6NTcxLCJpbmhlcml0cyI6NzAxfV0sNTgwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGRlY29kZXJzID0gZXhwb3J0czsKCmRlY29kZXJzLmRlciA9IHJlcXVpcmUoJy4vZGVyJyk7CmRlY29kZXJzLnBlbSA9IHJlcXVpcmUoJy4vcGVtJyk7Cgp9LHsiLi9kZXIiOjU3OSwiLi9wZW0iOjU4MX1dLDU4MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7Cgp2YXIgREVSRGVjb2RlciA9IHJlcXVpcmUoJy4vZGVyJyk7CgpmdW5jdGlvbiBQRU1EZWNvZGVyKGVudGl0eSkgewogIERFUkRlY29kZXIuY2FsbCh0aGlzLCBlbnRpdHkpOwogIHRoaXMuZW5jID0gJ3BlbSc7Cn07CmluaGVyaXRzKFBFTURlY29kZXIsIERFUkRlY29kZXIpOwptb2R1bGUuZXhwb3J0cyA9IFBFTURlY29kZXI7CgpQRU1EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUoZGF0YSwgb3B0aW9ucykgewogIHZhciBsaW5lcyA9IGRhdGEudG9TdHJpbmcoKS5zcGxpdCgvW1xyXG5dKy9nKTsKCiAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbC50b1VwcGVyQ2FzZSgpOwoKICB2YXIgcmUgPSAvXi0tLS0tKEJFR0lOfEVORCkgKFteLV0rKS0tLS0tJC87CiAgdmFyIHN0YXJ0ID0gLTE7CiAgdmFyIGVuZCA9IC0xOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBtYXRjaCA9IGxpbmVzW2ldLm1hdGNoKHJlKTsKICAgIGlmIChtYXRjaCA9PT0gbnVsbCkKICAgICAgY29udGludWU7CgogICAgaWYgKG1hdGNoWzJdICE9PSBsYWJlbCkKICAgICAgY29udGludWU7CgogICAgaWYgKHN0YXJ0ID09PSAtMSkgewogICAgICBpZiAobWF0Y2hbMV0gIT09ICdCRUdJTicpCiAgICAgICAgYnJlYWs7CiAgICAgIHN0YXJ0ID0gaTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChtYXRjaFsxXSAhPT0gJ0VORCcpCiAgICAgICAgYnJlYWs7CiAgICAgIGVuZCA9IGk7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICBpZiAoc3RhcnQgPT09IC0xIHx8IGVuZCA9PT0gLTEpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BFTSBzZWN0aW9uIG5vdCBmb3VuZCBmb3I6ICcgKyBsYWJlbCk7CgogIHZhciBiYXNlNjQgPSBsaW5lcy5zbGljZShzdGFydCArIDEsIGVuZCkuam9pbignJyk7CiAgLy8gUmVtb3ZlIGV4Y2Vzc2l2ZSBzeW1ib2xzCiAgYmFzZTY0LnJlcGxhY2UoL1teYS16MC05XCtcLz1dKy9naSwgJycpOwoKICB2YXIgaW5wdXQgPSBuZXcgQnVmZmVyKGJhc2U2NCwgJ2Jhc2U2NCcpOwogIHJldHVybiBERVJEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUuY2FsbCh0aGlzLCBpbnB1dCwgb3B0aW9ucyk7Cn07Cgp9LHsiLi9kZXIiOjU3OSwiYnVmZmVyIjo1MDQsImluaGVyaXRzIjo3MDF9XSw1ODI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwoKdmFyIGFzbjEgPSByZXF1aXJlKCcuLi8uLi9hc24xJyk7CnZhciBiYXNlID0gYXNuMS5iYXNlOwoKLy8gSW1wb3J0IERFUiBjb25zdGFudHMKdmFyIGRlciA9IGFzbjEuY29uc3RhbnRzLmRlcjsKCmZ1bmN0aW9uIERFUkVuY29kZXIoZW50aXR5KSB7CiAgdGhpcy5lbmMgPSAnZGVyJzsKICB0aGlzLm5hbWUgPSBlbnRpdHkubmFtZTsKICB0aGlzLmVudGl0eSA9IGVudGl0eTsKCiAgLy8gQ29uc3RydWN0IGJhc2UgdHJlZQogIHRoaXMudHJlZSA9IG5ldyBERVJOb2RlKCk7CiAgdGhpcy50cmVlLl9pbml0KGVudGl0eS5ib2R5KTsKfTsKbW9kdWxlLmV4cG9ydHMgPSBERVJFbmNvZGVyOwoKREVSRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGRhdGEsIHJlcG9ydGVyKSB7CiAgcmV0dXJuIHRoaXMudHJlZS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyKS5qb2luKCk7Cn07CgovLyBUcmVlIG1ldGhvZHMKCmZ1bmN0aW9uIERFUk5vZGUocGFyZW50KSB7CiAgYmFzZS5Ob2RlLmNhbGwodGhpcywgJ2RlcicsIHBhcmVudCk7Cn0KaW5oZXJpdHMoREVSTm9kZSwgYmFzZS5Ob2RlKTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVDb21wb3NpdGUgPSBmdW5jdGlvbiBlbmNvZGVDb21wb3NpdGUodGFnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCkgewogIHZhciBlbmNvZGVkVGFnID0gZW5jb2RlVGFnKHRhZywgcHJpbWl0aXZlLCBjbHMsIHRoaXMucmVwb3J0ZXIpOwoKICAvLyBTaG9ydCBmb3JtCiAgaWYgKGNvbnRlbnQubGVuZ3RoIDwgMHg4MCkgewogICAgdmFyIGhlYWRlciA9IG5ldyBCdWZmZXIoMik7CiAgICBoZWFkZXJbMF0gPSBlbmNvZGVkVGFnOwogICAgaGVhZGVyWzFdID0gY29udGVudC5sZW5ndGg7CiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbIGhlYWRlciwgY29udGVudCBdKTsKICB9CgogIC8vIExvbmcgZm9ybQogIC8vIENvdW50IG9jdGV0cyByZXF1aXJlZCB0byBzdG9yZSBsZW5ndGgKICB2YXIgbGVuT2N0ZXRzID0gMTsKICBmb3IgKHZhciBpID0gY29udGVudC5sZW5ndGg7IGkgPj0gMHgxMDA7IGkgPj49IDgpCiAgICBsZW5PY3RldHMrKzsKCiAgdmFyIGhlYWRlciA9IG5ldyBCdWZmZXIoMSArIDEgKyBsZW5PY3RldHMpOwogIGhlYWRlclswXSA9IGVuY29kZWRUYWc7CiAgaGVhZGVyWzFdID0gMHg4MCB8IGxlbk9jdGV0czsKCiAgZm9yICh2YXIgaSA9IDEgKyBsZW5PY3RldHMsIGogPSBjb250ZW50Lmxlbmd0aDsgaiA+IDA7IGktLSwgaiA+Pj0gOCkKICAgIGhlYWRlcltpXSA9IGogJiAweGZmOwoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbIGhlYWRlciwgY29udGVudCBdKTsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVTdHIgPSBmdW5jdGlvbiBlbmNvZGVTdHIoc3RyLCB0YWcpIHsKICBpZiAodGFnID09PSAnYml0c3RyJykgewogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoWyBzdHIudW51c2VkIHwgMCwgc3RyLmRhdGEgXSk7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdibXBzdHInKSB7CiAgICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdHIubGVuZ3RoICogMik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgICBidWYud3JpdGVVSW50MTZCRShzdHIuY2hhckNvZGVBdChpKSwgaSAqIDIpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoYnVmKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ251bXN0cicpIHsKICAgIGlmICghdGhpcy5faXNOdW1zdHIoc3RyKSkgewogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignRW5jb2Rpbmcgb2Ygc3RyaW5nIHR5cGU6IG51bXN0ciBzdXBwb3J0cyAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29ubHkgZGlnaXRzIGFuZCBzcGFjZScpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoc3RyKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3ByaW50c3RyJykgewogICAgaWYgKCF0aGlzLl9pc1ByaW50c3RyKHN0cikpIHsKICAgICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nIG9mIHN0cmluZyB0eXBlOiBwcmludHN0ciBzdXBwb3J0cyAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29ubHkgbGF0aW4gdXBwZXIgYW5kIGxvd2VyIGNhc2UgbGV0dGVycywgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaWdpdHMsIHNwYWNlLCBhcG9zdHJvcGhlLCBsZWZ0IGFuZCByaWd0aCAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BhcmVudGhlc2lzLCBwbHVzIHNpZ24sIGNvbW1hLCBoeXBoZW4sICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZG90LCBzbGFzaCwgY29sb24sIGVxdWFsIHNpZ24sICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncXVlc3Rpb24gbWFyaycpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoc3RyKTsKICB9IGVsc2UgaWYgKC9zdHIkLy50ZXN0KHRhZykpIHsKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKHN0cik7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdFbmNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArIHRhZyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHVuc3VwcG9ydGVkJyk7CiAgfQp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZU9iamlkID0gZnVuY3Rpb24gZW5jb2RlT2JqaWQoaWQsIHZhbHVlcywgcmVsYXRpdmUpIHsKICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykgewogICAgaWYgKCF2YWx1ZXMpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdzdHJpbmcgb2JqaWQgZ2l2ZW4sIGJ1dCBubyB2YWx1ZXMgbWFwIGZvdW5kJyk7CiAgICBpZiAoIXZhbHVlcy5oYXNPd25Qcm9wZXJ0eShpZCkpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdvYmppZCBub3QgZm91bmQgaW4gdmFsdWVzIG1hcCcpOwogICAgaWQgPSB2YWx1ZXNbaWRdLnNwbGl0KC9bXHNcLl0rL2cpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZC5sZW5ndGg7IGkrKykKICAgICAgaWRbaV0gfD0gMDsKICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaWQpKSB7CiAgICBpZCA9IGlkLnNsaWNlKCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkLmxlbmd0aDsgaSsrKQogICAgICBpZFtpXSB8PSAwOwogIH0KCiAgaWYgKCFBcnJheS5pc0FycmF5KGlkKSkgewogICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ29iamlkKCkgc2hvdWxkIGJlIGVpdGhlciBhcnJheSBvciBzdHJpbmcsICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dvdDogJyArIEpTT04uc3RyaW5naWZ5KGlkKSk7CiAgfQoKICBpZiAoIXJlbGF0aXZlKSB7CiAgICBpZiAoaWRbMV0gPj0gNDApCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdTZWNvbmQgb2JqaWQgaWRlbnRpZmllciBPT0InKTsKICAgIGlkLnNwbGljZSgwLCAyLCBpZFswXSAqIDQwICsgaWRbMV0pOwogIH0KCiAgLy8gQ291bnQgbnVtYmVyIG9mIG9jdGV0cwogIHZhciBzaXplID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IGlkLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgaWRlbnQgPSBpZFtpXTsKICAgIGZvciAoc2l6ZSsrOyBpZGVudCA+PSAweDgwOyBpZGVudCA+Pj0gNykKICAgICAgc2l6ZSsrOwogIH0KCiAgdmFyIG9iamlkID0gbmV3IEJ1ZmZlcihzaXplKTsKICB2YXIgb2Zmc2V0ID0gb2JqaWQubGVuZ3RoIC0gMTsKICBmb3IgKHZhciBpID0gaWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIHZhciBpZGVudCA9IGlkW2ldOwogICAgb2JqaWRbb2Zmc2V0LS1dID0gaWRlbnQgJiAweDdmOwogICAgd2hpbGUgKChpZGVudCA+Pj0gNykgPiAwKQogICAgICBvYmppZFtvZmZzZXQtLV0gPSAweDgwIHwgKGlkZW50ICYgMHg3Zik7CiAgfQoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihvYmppZCk7Cn07CgpmdW5jdGlvbiB0d28obnVtKSB7CiAgaWYgKG51bSA8IDEwKQogICAgcmV0dXJuICcwJyArIG51bTsKICBlbHNlCiAgICByZXR1cm4gbnVtOwp9CgpERVJOb2RlLnByb3RvdHlwZS5fZW5jb2RlVGltZSA9IGZ1bmN0aW9uIGVuY29kZVRpbWUodGltZSwgdGFnKSB7CiAgdmFyIHN0cjsKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpOwoKICBpZiAodGFnID09PSAnZ2VudGltZScpIHsKICAgIHN0ciA9IFsKICAgICAgdHdvKGRhdGUuZ2V0RnVsbFllYXIoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ01vbnRoKCkgKyAxKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDRGF0ZSgpKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDSG91cnMoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ01pbnV0ZXMoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ1NlY29uZHMoKSksCiAgICAgICdaJwogICAgXS5qb2luKCcnKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3V0Y3RpbWUnKSB7CiAgICBzdHIgPSBbCiAgICAgIHR3byhkYXRlLmdldEZ1bGxZZWFyKCkgJSAxMDApLAogICAgICB0d28oZGF0ZS5nZXRVVENNb250aCgpICsgMSksCiAgICAgIHR3byhkYXRlLmdldFVUQ0RhdGUoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ0hvdXJzKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENNaW51dGVzKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENTZWNvbmRzKCkpLAogICAgICAnWicKICAgIF0uam9pbignJyk7CiAgfSBlbHNlIHsKICAgIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nICcgKyB0YWcgKyAnIHRpbWUgaXMgbm90IHN1cHBvcnRlZCB5ZXQnKTsKICB9CgogIHJldHVybiB0aGlzLl9lbmNvZGVTdHIoc3RyLCAnb2N0c3RyJyk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZW5jb2RlTnVsbCA9IGZ1bmN0aW9uIGVuY29kZU51bGwoKSB7CiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoJycpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZUludCA9IGZ1bmN0aW9uIGVuY29kZUludChudW0sIHZhbHVlcykgewogIGlmICh0eXBlb2YgbnVtID09PSAnc3RyaW5nJykgewogICAgaWYgKCF2YWx1ZXMpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdTdHJpbmcgaW50IG9yIGVudW0gZ2l2ZW4sIGJ1dCBubyB2YWx1ZXMgbWFwJyk7CiAgICBpZiAoIXZhbHVlcy5oYXNPd25Qcm9wZXJ0eShudW0pKSB7CiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdWYWx1ZXMgbWFwIGRvZXNuXCd0IGNvbnRhaW46ICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShudW0pKTsKICAgIH0KICAgIG51bSA9IHZhbHVlc1tudW1dOwogIH0KCiAgLy8gQmlnbnVtLCBhc3N1bWUgYmlnIGVuZGlhbgogIGlmICh0eXBlb2YgbnVtICE9PSAnbnVtYmVyJyAmJiAhQnVmZmVyLmlzQnVmZmVyKG51bSkpIHsKICAgIHZhciBudW1BcnJheSA9IG51bS50b0FycmF5KCk7CiAgICBpZiAoIW51bS5zaWduICYmIG51bUFycmF5WzBdICYgMHg4MCkgewogICAgICBudW1BcnJheS51bnNoaWZ0KDApOwogICAgfQogICAgbnVtID0gbmV3IEJ1ZmZlcihudW1BcnJheSk7CiAgfQoKICBpZiAoQnVmZmVyLmlzQnVmZmVyKG51bSkpIHsKICAgIHZhciBzaXplID0gbnVtLmxlbmd0aDsKICAgIGlmIChudW0ubGVuZ3RoID09PSAwKQogICAgICBzaXplKys7CgogICAgdmFyIG91dCA9IG5ldyBCdWZmZXIoc2l6ZSk7CiAgICBudW0uY29weShvdXQpOwogICAgaWYgKG51bS5sZW5ndGggPT09IDApCiAgICAgIG91dFswXSA9IDAKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKG91dCk7CiAgfQoKICBpZiAobnVtIDwgMHg4MCkKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKG51bSk7CgogIGlmIChudW0gPCAweDEwMCkKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKFswLCBudW1dKTsKCiAgdmFyIHNpemUgPSAxOwogIGZvciAodmFyIGkgPSBudW07IGkgPj0gMHgxMDA7IGkgPj49IDgpCiAgICBzaXplKys7CgogIHZhciBvdXQgPSBuZXcgQXJyYXkoc2l6ZSk7CiAgZm9yICh2YXIgaSA9IG91dC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgb3V0W2ldID0gbnVtICYgMHhmZjsKICAgIG51bSA+Pj0gODsKICB9CiAgaWYob3V0WzBdICYgMHg4MCkgewogICAgb3V0LnVuc2hpZnQoMCk7CiAgfQoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihuZXcgQnVmZmVyKG91dCkpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZUJvb2wgPSBmdW5jdGlvbiBlbmNvZGVCb29sKHZhbHVlKSB7CiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIodmFsdWUgPyAweGZmIDogMCk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fdXNlID0gZnVuY3Rpb24gdXNlKGVudGl0eSwgb2JqKSB7CiAgaWYgKHR5cGVvZiBlbnRpdHkgPT09ICdmdW5jdGlvbicpCiAgICBlbnRpdHkgPSBlbnRpdHkob2JqKTsKICByZXR1cm4gZW50aXR5Ll9nZXRFbmNvZGVyKCdkZXInKS50cmVlOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX3NraXBEZWZhdWx0ID0gZnVuY3Rpb24gc2tpcERlZmF1bHQoZGF0YUJ1ZmZlciwgcmVwb3J0ZXIsIHBhcmVudCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICB2YXIgaTsKICBpZiAoc3RhdGVbJ2RlZmF1bHQnXSA9PT0gbnVsbCkKICAgIHJldHVybiBmYWxzZTsKCiAgdmFyIGRhdGEgPSBkYXRhQnVmZmVyLmpvaW4oKTsKICBpZiAoc3RhdGUuZGVmYXVsdEJ1ZmZlciA9PT0gdW5kZWZpbmVkKQogICAgc3RhdGUuZGVmYXVsdEJ1ZmZlciA9IHRoaXMuX2VuY29kZVZhbHVlKHN0YXRlWydkZWZhdWx0J10sIHJlcG9ydGVyLCBwYXJlbnQpLmpvaW4oKTsKCiAgaWYgKGRhdGEubGVuZ3RoICE9PSBzdGF0ZS5kZWZhdWx0QnVmZmVyLmxlbmd0aCkKICAgIHJldHVybiBmYWxzZTsKCiAgZm9yIChpPTA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKQogICAgaWYgKGRhdGFbaV0gIT09IHN0YXRlLmRlZmF1bHRCdWZmZXJbaV0pCiAgICAgIHJldHVybiBmYWxzZTsKCiAgcmV0dXJuIHRydWU7Cn07CgovLyBVdGlsaXR5IG1ldGhvZHMKCmZ1bmN0aW9uIGVuY29kZVRhZyh0YWcsIHByaW1pdGl2ZSwgY2xzLCByZXBvcnRlcikgewogIHZhciByZXM7CgogIGlmICh0YWcgPT09ICdzZXFvZicpCiAgICB0YWcgPSAnc2VxJzsKICBlbHNlIGlmICh0YWcgPT09ICdzZXRvZicpCiAgICB0YWcgPSAnc2V0JzsKCiAgaWYgKGRlci50YWdCeU5hbWUuaGFzT3duUHJvcGVydHkodGFnKSkKICAgIHJlcyA9IGRlci50YWdCeU5hbWVbdGFnXTsKICBlbHNlIGlmICh0eXBlb2YgdGFnID09PSAnbnVtYmVyJyAmJiAodGFnIHwgMCkgPT09IHRhZykKICAgIHJlcyA9IHRhZzsKICBlbHNlCiAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ1Vua25vd24gdGFnOiAnICsgdGFnKTsKCiAgaWYgKHJlcyA+PSAweDFmKQogICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdNdWx0aS1vY3RldCB0YWcgZW5jb2RpbmcgdW5zdXBwb3J0ZWQnKTsKCiAgaWYgKCFwcmltaXRpdmUpCiAgICByZXMgfD0gMHgyMDsKCiAgcmVzIHw9IChkZXIudGFnQ2xhc3NCeU5hbWVbY2xzIHx8ICd1bml2ZXJzYWwnXSA8PCA2KTsKCiAgcmV0dXJuIHJlczsKfQoKfSx7Ii4uLy4uL2FzbjEiOjU3MSwiYnVmZmVyIjo1MDQsImluaGVyaXRzIjo3MDF9XSw1ODM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZW5jb2RlcnMgPSBleHBvcnRzOwoKZW5jb2RlcnMuZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKZW5jb2RlcnMucGVtID0gcmVxdWlyZSgnLi9wZW0nKTsKCn0seyIuL2RlciI6NTgyLCIuL3BlbSI6NTg0fV0sNTg0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCnZhciBERVJFbmNvZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKCmZ1bmN0aW9uIFBFTUVuY29kZXIoZW50aXR5KSB7CiAgREVSRW5jb2Rlci5jYWxsKHRoaXMsIGVudGl0eSk7CiAgdGhpcy5lbmMgPSAncGVtJzsKfTsKaW5oZXJpdHMoUEVNRW5jb2RlciwgREVSRW5jb2Rlcik7Cm1vZHVsZS5leHBvcnRzID0gUEVNRW5jb2RlcjsKClBFTUVuY29kZXIucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShkYXRhLCBvcHRpb25zKSB7CiAgdmFyIGJ1ZiA9IERFUkVuY29kZXIucHJvdG90eXBlLmVuY29kZS5jYWxsKHRoaXMsIGRhdGEpOwoKICB2YXIgcCA9IGJ1Zi50b1N0cmluZygnYmFzZTY0Jyk7CiAgdmFyIG91dCA9IFsgJy0tLS0tQkVHSU4gJyArIG9wdGlvbnMubGFiZWwgKyAnLS0tLS0nIF07CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSArPSA2NCkKICAgIG91dC5wdXNoKHAuc2xpY2UoaSwgaSArIDY0KSk7CiAgb3V0LnB1c2goJy0tLS0tRU5EICcgKyBvcHRpb25zLmxhYmVsICsgJy0tLS0tJyk7CiAgcmV0dXJuIG91dC5qb2luKCdcbicpOwp9OwoKfSx7Ii4vZGVyIjo1ODIsImluaGVyaXRzIjo3MDF9XSw1ODU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTM2XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NTM2fV0sNTg2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUxMF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiZHVwIjo1MTB9XSw1ODc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTExXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vYWVzIjo1ODYsIi4vZ2hhc2giOjU5MSwiYnVmZmVyIjo1MDQsImJ1ZmZlci14b3IiOjYwMCwiY2lwaGVyLWJhc2UiOjYwMSwiZHVwIjo1MTEsImluaGVyaXRzIjo3MDF9XSw1ODg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTEyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vZGVjcnlwdGVyIjo1ODksIi4vZW5jcnlwdGVyIjo1OTAsIi4vbW9kZXMiOjU5MiwiZHVwIjo1MTJ9XSw1ODk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTEzXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vYWVzIjo1ODYsIi4vYXV0aENpcGhlciI6NTg3LCIuL21vZGVzIjo1OTIsIi4vbW9kZXMvY2JjIjo1OTMsIi4vbW9kZXMvY2ZiIjo1OTQsIi4vbW9kZXMvY2ZiMSI6NTk1LCIuL21vZGVzL2NmYjgiOjU5NiwiLi9tb2Rlcy9jdHIiOjU5NywiLi9tb2Rlcy9lY2IiOjU5OCwiLi9tb2Rlcy9vZmIiOjU5OSwiLi9zdHJlYW1DaXBoZXIiOjYwMiwiYnVmZmVyIjo1MDQsImNpcGhlci1iYXNlIjo2MDEsImR1cCI6NTEzLCJldnBfYnl0ZXN0b2tleSI6NjAzLCJpbmhlcml0cyI6NzAxfV0sNTkwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUxNF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2FlcyI6NTg2LCIuL2F1dGhDaXBoZXIiOjU4NywiLi9tb2RlcyI6NTkyLCIuL21vZGVzL2NiYyI6NTkzLCIuL21vZGVzL2NmYiI6NTk0LCIuL21vZGVzL2NmYjEiOjU5NSwiLi9tb2Rlcy9jZmI4Ijo1OTYsIi4vbW9kZXMvY3RyIjo1OTcsIi4vbW9kZXMvZWNiIjo1OTgsIi4vbW9kZXMvb2ZiIjo1OTksIi4vc3RyZWFtQ2lwaGVyIjo2MDIsImJ1ZmZlciI6NTA0LCJjaXBoZXItYmFzZSI6NjAxLCJkdXAiOjUxNCwiZXZwX2J5dGVzdG9rZXkiOjYwMywiaW5oZXJpdHMiOjcwMX1dLDU5MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MTVdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImR1cCI6NTE1fV0sNTkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUxNl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjUxNn1dLDU5MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MTddWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyLXhvciI6NjAwLCJkdXAiOjUxN31dLDU5NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MThdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImJ1ZmZlci14b3IiOjYwMCwiZHVwIjo1MTh9XSw1OTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTE5XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJkdXAiOjUxOX1dLDU5NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MjBdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImR1cCI6NTIwfV0sNTk3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUyMV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiYnVmZmVyLXhvciI6NjAwLCJkdXAiOjUyMX1dLDU5ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MjJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo1MjJ9XSw1OTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTIzXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJidWZmZXIteG9yIjo2MDAsImR1cCI6NTIzfV0sNjAwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUyNF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiZHVwIjo1MjR9XSw2MDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDMyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJkdXAiOjQzMiwiaW5oZXJpdHMiOjcwMSwic3RyZWFtIjo3MTksInN0cmluZ19kZWNvZGVyIjo3MjB9XSw2MDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTI2XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vYWVzIjo1ODYsImJ1ZmZlciI6NTA0LCJjaXBoZXItYmFzZSI6NjAxLCJkdXAiOjUyNiwiaW5oZXJpdHMiOjcwMX1dLDYwMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MzddWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImNyZWF0ZS1oYXNoL21kNSI6NjM0LCJkdXAiOjUzN31dLDYwNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gbXVjaCBvZiB0aGlzIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L3NlbGYtc2lnbmVkL2Jsb2IvZ2gtcGFnZXMvbGliL3JzYS5qcwp2YXIgY3JlYXRlSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKdmFyIGNydCA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktcnNhJykKdmFyIGN1cnZlcyA9IHJlcXVpcmUoJy4vY3VydmVzJykKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnZWxsaXB0aWMnKQp2YXIgcGFyc2VLZXlzID0gcmVxdWlyZSgncGFyc2UtYXNuMScpCgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpCnZhciBFQyA9IGVsbGlwdGljLmVjCgpmdW5jdGlvbiBzaWduIChoYXNoLCBrZXksIGhhc2hUeXBlLCBzaWduVHlwZSkgewogIHZhciBwcml2ID0gcGFyc2VLZXlzKGtleSkKICBpZiAocHJpdi5jdXJ2ZSkgewogICAgaWYgKHNpZ25UeXBlICE9PSAnZWNkc2EnKSB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHByaXZhdGUga2V5IHR5cGUnKQoKICAgIHJldHVybiBlY1NpZ24oaGFzaCwgcHJpdikKICB9IGVsc2UgaWYgKHByaXYudHlwZSA9PT0gJ2RzYScpIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ2RzYScpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBwcml2YXRlIGtleSB0eXBlJykKICAgIH0KICAgIHJldHVybiBkc2FTaWduKGhhc2gsIHByaXYsIGhhc2hUeXBlKQogIH0gZWxzZSB7CiAgICBpZiAoc2lnblR5cGUgIT09ICdyc2EnKSB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHByaXZhdGUga2V5IHR5cGUnKQogIH0KCiAgdmFyIGxlbiA9IHByaXYubW9kdWx1cy5ieXRlTGVuZ3RoKCkKICB2YXIgcGFkID0gWyAwLCAxIF0KICB3aGlsZSAoaGFzaC5sZW5ndGggKyBwYWQubGVuZ3RoICsgMSA8IGxlbikgewogICAgcGFkLnB1c2goMHhmZikKICB9CiAgcGFkLnB1c2goMHgwMCkKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGhhc2gubGVuZ3RoKSB7CiAgICBwYWQucHVzaChoYXNoW2ldKQogIH0KCiAgdmFyIG91dCA9IGNydChwYWQsIHByaXYpCiAgcmV0dXJuIG91dAp9CgpmdW5jdGlvbiBlY1NpZ24gKGhhc2gsIHByaXYpIHsKICB2YXIgY3VydmVJZCA9IGN1cnZlc1twcml2LmN1cnZlLmpvaW4oJy4nKV0KICBpZiAoIWN1cnZlSWQpIHRocm93IG5ldyBFcnJvcigndW5rbm93biBjdXJ2ZSAnICsgcHJpdi5jdXJ2ZS5qb2luKCcuJykpCgogIHZhciBjdXJ2ZSA9IG5ldyBFQyhjdXJ2ZUlkKQogIHZhciBrZXkgPSBjdXJ2ZS5nZW5LZXlQYWlyKCkKCiAga2V5Ll9pbXBvcnRQcml2YXRlKHByaXYucHJpdmF0ZUtleSkKICB2YXIgb3V0ID0ga2V5LnNpZ24oaGFzaCkKCiAgcmV0dXJuIG5ldyBCdWZmZXIob3V0LnRvREVSKCkpCn0KCmZ1bmN0aW9uIGRzYVNpZ24gKGhhc2gsIHByaXYsIGFsZ28pIHsKICB2YXIgeCA9IHByaXYucGFyYW1zLnByaXZfa2V5CiAgdmFyIHAgPSBwcml2LnBhcmFtcy5wCiAgdmFyIHEgPSBwcml2LnBhcmFtcy5xCiAgdmFyIGcgPSBwcml2LnBhcmFtcy5nCiAgdmFyIHIgPSBuZXcgQk4oMCkKICB2YXIgawogIHZhciBIID0gYml0czJpbnQoaGFzaCwgcSkubW9kKHEpCiAgdmFyIHMgPSBmYWxzZQogIHZhciBrdiA9IGdldEtleSh4LCBxLCBoYXNoLCBhbGdvKQogIHdoaWxlIChzID09PSBmYWxzZSkgewogICAgayA9IG1ha2VLZXkocSwga3YsIGFsZ28pCiAgICByID0gbWFrZVIoZywgaywgcCwgcSkKICAgIHMgPSBrLmludm0ocSkuaW11bChILmFkZCh4Lm11bChyKSkpLm1vZChxKQogICAgaWYgKCFzLmNtcG4oMCkpIHsKICAgICAgcyA9IGZhbHNlCiAgICAgIHIgPSBuZXcgQk4oMCkKICAgIH0KICB9CiAgcmV0dXJuIHRvREVSKHIsIHMpCn0KCmZ1bmN0aW9uIHRvREVSIChyLCBzKSB7CiAgciA9IHIudG9BcnJheSgpCiAgcyA9IHMudG9BcnJheSgpCgogIC8vIFBhZCB2YWx1ZXMKICBpZiAoclswXSAmIDB4ODApIHsKICAgIHIgPSBbIDAgXS5jb25jYXQocikKICB9CiAgLy8gUGFkIHZhbHVlcwogIGlmIChzWzBdICYgMHg4MCkgewogICAgcyA9IFswXS5jb25jYXQocykKICB9CgogIHZhciB0b3RhbCA9IHIubGVuZ3RoICsgcy5sZW5ndGggKyA0CiAgdmFyIHJlcyA9IFsgMHgzMCwgdG90YWwsIDB4MDIsIHIubGVuZ3RoIF0KICByZXMgPSByZXMuY29uY2F0KHIsIFsgMHgwMiwgcy5sZW5ndGggXSwgcykKICByZXR1cm4gbmV3IEJ1ZmZlcihyZXMpCn0KCmZ1bmN0aW9uIGdldEtleSAoeCwgcSwgaGFzaCwgYWxnbykgewogIHggPSBuZXcgQnVmZmVyKHgudG9BcnJheSgpKQogIGlmICh4Lmxlbmd0aCA8IHEuYnl0ZUxlbmd0aCgpKSB7CiAgICB2YXIgemVyb3MgPSBuZXcgQnVmZmVyKHEuYnl0ZUxlbmd0aCgpIC0geC5sZW5ndGgpCiAgICB6ZXJvcy5maWxsKDApCiAgICB4ID0gQnVmZmVyLmNvbmNhdChbemVyb3MsIHhdKQogIH0KICB2YXIgaGxlbiA9IGhhc2gubGVuZ3RoCiAgdmFyIGhiaXRzID0gYml0czJvY3RldHMoaGFzaCwgcSkKICB2YXIgdiA9IG5ldyBCdWZmZXIoaGxlbikKICB2LmZpbGwoMSkKICB2YXIgayA9IG5ldyBCdWZmZXIoaGxlbikKICBrLmZpbGwoMCkKICBrID0gY3JlYXRlSG1hYyhhbGdvLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLnVwZGF0ZShuZXcgQnVmZmVyKFswXSkpCiAgICAudXBkYXRlKHgpCiAgICAudXBkYXRlKGhiaXRzKQogICAgLmRpZ2VzdCgpCiAgdiA9IGNyZWF0ZUhtYWMoYWxnbywgaykKICAgIC51cGRhdGUodikKICAgIC5kaWdlc3QoKQogIGsgPSBjcmVhdGVIbWFjKGFsZ28sIGspCiAgICAudXBkYXRlKHYpCiAgICAudXBkYXRlKG5ldyBCdWZmZXIoWzFdKSkKICAgIC51cGRhdGUoeCkKICAgIC51cGRhdGUoaGJpdHMpCiAgICAuZGlnZXN0KCkKICB2ID0gY3JlYXRlSG1hYyhhbGdvLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLmRpZ2VzdCgpCiAgcmV0dXJuIHsKICAgIGs6IGssCiAgICB2OiB2CiAgfQp9CgpmdW5jdGlvbiBiaXRzMmludCAob2JpdHMsIHEpIHsKICB2YXIgYml0cyA9IG5ldyBCTihvYml0cykKICB2YXIgc2hpZnQgPSAob2JpdHMubGVuZ3RoIDw8IDMpIC0gcS5iaXRMZW5ndGgoKQogIGlmIChzaGlmdCA+IDApIHsKICAgIGJpdHMuaXNocm4oc2hpZnQpCiAgfQogIHJldHVybiBiaXRzCn0KCmZ1bmN0aW9uIGJpdHMyb2N0ZXRzIChiaXRzLCBxKSB7CiAgYml0cyA9IGJpdHMyaW50KGJpdHMsIHEpCiAgYml0cyA9IGJpdHMubW9kKHEpCiAgdmFyIG91dCA9IG5ldyBCdWZmZXIoYml0cy50b0FycmF5KCkpCiAgaWYgKG91dC5sZW5ndGggPCBxLmJ5dGVMZW5ndGgoKSkgewogICAgdmFyIHplcm9zID0gbmV3IEJ1ZmZlcihxLmJ5dGVMZW5ndGgoKSAtIG91dC5sZW5ndGgpCiAgICB6ZXJvcy5maWxsKDApCiAgICBvdXQgPSBCdWZmZXIuY29uY2F0KFt6ZXJvcywgb3V0XSkKICB9CiAgcmV0dXJuIG91dAp9CgpmdW5jdGlvbiBtYWtlS2V5IChxLCBrdiwgYWxnbykgewogIHZhciB0LCBrCgogIGRvIHsKICAgIHQgPSBuZXcgQnVmZmVyKCcnKQoKICAgIHdoaWxlICh0Lmxlbmd0aCAqIDggPCBxLmJpdExlbmd0aCgpKSB7CiAgICAgIGt2LnYgPSBjcmVhdGVIbWFjKGFsZ28sIGt2LmspCiAgICAgICAgLnVwZGF0ZShrdi52KQogICAgICAgIC5kaWdlc3QoKQogICAgICB0ID0gQnVmZmVyLmNvbmNhdChbdCwga3Yudl0pCiAgICB9CgogICAgayA9IGJpdHMyaW50KHQsIHEpCiAgICBrdi5rID0gY3JlYXRlSG1hYyhhbGdvLCBrdi5rKQogICAgICAudXBkYXRlKGt2LnYpCiAgICAgIC51cGRhdGUobmV3IEJ1ZmZlcihbMF0pKQogICAgICAuZGlnZXN0KCkKICAgIGt2LnYgPSBjcmVhdGVIbWFjKGFsZ28sIGt2LmspCiAgICAgIC51cGRhdGUoa3YudikKICAgICAgLmRpZ2VzdCgpCiAgfSB3aGlsZSAoay5jbXAocSkgIT09IC0xKQoKICByZXR1cm4gawp9CgpmdW5jdGlvbiBtYWtlUiAoZywgaywgcCwgcSkgewogIHJldHVybiBnLnRvUmVkKEJOLm1vbnQocCkpLnJlZFBvdyhrKS5mcm9tUmVkKCkubW9kKHEpCn0KCm1vZHVsZS5leHBvcnRzID0gc2lnbgptb2R1bGUuZXhwb3J0cy5nZXRLZXkgPSBnZXRLZXkKbW9kdWxlLmV4cG9ydHMubWFrZUtleSA9IG1ha2VLZXkKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2N1cnZlcyI6NTQwLCJibi5qcyI6NTQxLCJicm93c2VyaWZ5LXJzYSI6NTQyLCJidWZmZXIiOjUwNCwiY3JlYXRlLWhtYWMiOjY0NSwiZWxsaXB0aWMiOjU0MywicGFyc2UtYXNuMSI6NTcwfV0sNjA1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBtdWNoIG9mIHRoaXMgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvc2VsZi1zaWduZWQvYmxvYi9naC1wYWdlcy9saWIvcnNhLmpzCnZhciBjdXJ2ZXMgPSByZXF1aXJlKCcuL2N1cnZlcycpCnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJ2VsbGlwdGljJykKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKQoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKQp2YXIgRUMgPSBlbGxpcHRpYy5lYwoKZnVuY3Rpb24gdmVyaWZ5IChzaWcsIGhhc2gsIGtleSwgc2lnblR5cGUpIHsKICB2YXIgcHViID0gcGFyc2VLZXlzKGtleSkKICBpZiAocHViLnR5cGUgPT09ICdlYycpIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ2VjZHNhJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHB1YmxpYyBrZXkgdHlwZScpCiAgICB9CiAgICByZXR1cm4gZWNWZXJpZnkoc2lnLCBoYXNoLCBwdWIpCiAgfSBlbHNlIGlmIChwdWIudHlwZSA9PT0gJ2RzYScpIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ2RzYScpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBwdWJsaWMga2V5IHR5cGUnKQogICAgfQogICAgcmV0dXJuIGRzYVZlcmlmeShzaWcsIGhhc2gsIHB1YikKICB9IGVsc2UgewogICAgaWYgKHNpZ25UeXBlICE9PSAncnNhJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHB1YmxpYyBrZXkgdHlwZScpCiAgICB9CiAgfQogIHZhciBsZW4gPSBwdWIubW9kdWx1cy5ieXRlTGVuZ3RoKCkKICB2YXIgcGFkID0gWyAxIF0KICB2YXIgcGFkTnVtID0gMAogIHdoaWxlIChoYXNoLmxlbmd0aCArIHBhZC5sZW5ndGggKyAyIDwgbGVuKSB7CiAgICBwYWQucHVzaCgweGZmKQogICAgcGFkTnVtKysKICB9CiAgcGFkLnB1c2goMHgwMCkKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGhhc2gubGVuZ3RoKSB7CiAgICBwYWQucHVzaChoYXNoW2ldKQogIH0KICBwYWQgPSBuZXcgQnVmZmVyKHBhZCkKICB2YXIgcmVkID0gQk4ubW9udChwdWIubW9kdWx1cykKICBzaWcgPSBuZXcgQk4oc2lnKS50b1JlZChyZWQpCgogIHNpZyA9IHNpZy5yZWRQb3cobmV3IEJOKHB1Yi5wdWJsaWNFeHBvbmVudCkpCgogIHNpZyA9IG5ldyBCdWZmZXIoc2lnLmZyb21SZWQoKS50b0FycmF5KCkpCiAgdmFyIG91dCA9IDAKICBpZiAocGFkTnVtIDwgOCkgewogICAgb3V0ID0gMQogIH0KICBsZW4gPSBNYXRoLm1pbihzaWcubGVuZ3RoLCBwYWQubGVuZ3RoKQogIGlmIChzaWcubGVuZ3RoICE9PSBwYWQubGVuZ3RoKSB7CiAgICBvdXQgPSAxCiAgfQoKICBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXQgfD0gKHNpZ1tpXSBeIHBhZFtpXSkKICB9CiAgcmV0dXJuIG91dCA9PT0gMAp9CgpmdW5jdGlvbiBlY1ZlcmlmeSAoc2lnLCBoYXNoLCBwdWIpIHsKICB2YXIgY3VydmVJZCA9IGN1cnZlc1twdWIuZGF0YS5hbGdvcml0aG0uY3VydmUuam9pbignLicpXQogIGlmICghY3VydmVJZCkgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGN1cnZlICcgKyBwdWIuZGF0YS5hbGdvcml0aG0uY3VydmUuam9pbignLicpKQoKICB2YXIgY3VydmUgPSBuZXcgRUMoY3VydmVJZCkKICB2YXIgcHVia2V5ID0gcHViLmRhdGEuc3ViamVjdFByaXZhdGVLZXkuZGF0YQoKICByZXR1cm4gY3VydmUudmVyaWZ5KGhhc2gsIHNpZywgcHVia2V5KQp9CgpmdW5jdGlvbiBkc2FWZXJpZnkgKHNpZywgaGFzaCwgcHViKSB7CiAgdmFyIHAgPSBwdWIuZGF0YS5wCiAgdmFyIHEgPSBwdWIuZGF0YS5xCiAgdmFyIGcgPSBwdWIuZGF0YS5nCiAgdmFyIHkgPSBwdWIuZGF0YS5wdWJfa2V5CiAgdmFyIHVucGFja2VkID0gcGFyc2VLZXlzLnNpZ25hdHVyZS5kZWNvZGUoc2lnLCAnZGVyJykKICB2YXIgcyA9IHVucGFja2VkLnMKICB2YXIgciA9IHVucGFja2VkLnIKICBjaGVja1ZhbHVlKHMsIHEpCiAgY2hlY2tWYWx1ZShyLCBxKQogIHZhciBtb250cCA9IEJOLm1vbnQocCkKICB2YXIgdyA9IHMuaW52bShxKQogIHZhciB2ID0gZy50b1JlZChtb250cCkKICAgIC5yZWRQb3cobmV3IEJOKGhhc2gpLm11bCh3KS5tb2QocSkpCiAgICAuZnJvbVJlZCgpCiAgICAubXVsKAogICAgICB5LnRvUmVkKG1vbnRwKQogICAgICAgIC5yZWRQb3coci5tdWwodykubW9kKHEpKQogICAgICAgIC5mcm9tUmVkKCkKICApLm1vZChwKS5tb2QocSkKICByZXR1cm4gIXYuY21wKHIpCn0KCmZ1bmN0aW9uIGNoZWNrVmFsdWUgKGIsIHEpIHsKICBpZiAoYi5jbXBuKDApIDw9IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBzaWcnKQogIH0KICBpZiAoYi5jbXAocSkgPj0gcSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHNpZycpCiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IHZlcmlmeQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vY3VydmVzIjo1NDAsImJuLmpzIjo1NDEsImJ1ZmZlciI6NTA0LCJlbGxpcHRpYyI6NTQzLCJwYXJzZS1hc24xIjo1NzB9XSw2MDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJ2VsbGlwdGljJyk7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVDREgoY3VydmUpIHsKCXJldHVybiBuZXcgRUNESChjdXJ2ZSk7Cn07Cgp2YXIgYWxpYXNlcyA9IHsKCXNlY3AyNTZrMTogewoJCW5hbWU6ICdzZWNwMjU2azEnLAoJCWJ5dGVMZW5ndGg6IDMyCgl9LAoJc2VjcDIyNHIxOiB7CgkJbmFtZTogJ3AyMjQnLAoJCWJ5dGVMZW5ndGg6IDI4Cgl9LAoJcHJpbWUyNTZ2MTogewoJCW5hbWU6ICdwMjU2JywKCQlieXRlTGVuZ3RoOiAzMgoJfSwKCXByaW1lMTkydjE6IHsKCQluYW1lOiAncDE5MicsCgkJYnl0ZUxlbmd0aDogMjQKCX0sCgllZDI1NTE5OiB7CgkJbmFtZTogJ2VkMjU1MTknLAoJCWJ5dGVMZW5ndGg6IDMyCgl9LAoJc2VjcDM4NHIxOiB7CgkJbmFtZTogJ3AzODQnLAoJCWJ5dGVMZW5ndGg6IDQ4Cgl9LAoJc2VjcDUyMXIxOiB7CgkJbmFtZTogJ3A1MjEnLAoJCWJ5dGVMZW5ndGg6IDY2Cgl9Cn07CgphbGlhc2VzLnAyMjQgPSBhbGlhc2VzLnNlY3AyMjRyMTsKYWxpYXNlcy5wMjU2ID0gYWxpYXNlcy5zZWNwMjU2cjEgPSBhbGlhc2VzLnByaW1lMjU2djE7CmFsaWFzZXMucDE5MiA9IGFsaWFzZXMuc2VjcDE5MnIxID0gYWxpYXNlcy5wcmltZTE5MnYxOwphbGlhc2VzLnAzODQgPSBhbGlhc2VzLnNlY3AzODRyMTsKYWxpYXNlcy5wNTIxID0gYWxpYXNlcy5zZWNwNTIxcjE7CgpmdW5jdGlvbiBFQ0RIKGN1cnZlKSB7Cgl0aGlzLmN1cnZlVHlwZSA9IGFsaWFzZXNbY3VydmVdOwoJaWYgKCF0aGlzLmN1cnZlVHlwZSApIHsKCQl0aGlzLmN1cnZlVHlwZSA9IHsKCQkJbmFtZTogY3VydmUKCQl9OwoJfQoJdGhpcy5jdXJ2ZSA9IG5ldyBlbGxpcHRpYy5lYyh0aGlzLmN1cnZlVHlwZS5uYW1lKTsKCXRoaXMua2V5cyA9IHZvaWQgMDsKfQoKRUNESC5wcm90b3R5cGUuZ2VuZXJhdGVLZXlzID0gZnVuY3Rpb24gKGVuYywgZm9ybWF0KSB7Cgl0aGlzLmtleXMgPSB0aGlzLmN1cnZlLmdlbktleVBhaXIoKTsKCXJldHVybiB0aGlzLmdldFB1YmxpY0tleShlbmMsIGZvcm1hdCk7Cn07CgpFQ0RILnByb3RvdHlwZS5jb21wdXRlU2VjcmV0ID0gZnVuY3Rpb24gKG90aGVyLCBpbmVuYywgZW5jKSB7CglpbmVuYyA9IGluZW5jIHx8ICd1dGY4JzsKCWlmICghQnVmZmVyLmlzQnVmZmVyKG90aGVyKSkgewoJCW90aGVyID0gbmV3IEJ1ZmZlcihvdGhlciwgaW5lbmMpOwoJfQoJdmFyIG90aGVyUHViID0gdGhpcy5jdXJ2ZS5rZXlGcm9tUHVibGljKG90aGVyKS5nZXRQdWJsaWMoKTsKCXZhciBvdXQgPSBvdGhlclB1Yi5tdWwodGhpcy5rZXlzLmdldFByaXZhdGUoKSkuZ2V0WCgpOwoJcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKG91dCwgZW5jLCB0aGlzLmN1cnZlVHlwZS5ieXRlTGVuZ3RoKTsKfTsKCkVDREgucHJvdG90eXBlLmdldFB1YmxpY0tleSA9IGZ1bmN0aW9uIChlbmMsIGZvcm1hdCkgewoJdmFyIGtleSA9IHRoaXMua2V5cy5nZXRQdWJsaWMoZm9ybWF0ID09PSAnY29tcHJlc3NlZCcsIHRydWUpOwoJaWYgKGZvcm1hdCA9PT0gJ2h5YnJpZCcpIHsKCQlpZiAoa2V5W2tleS5sZW5ndGggLSAxXSAlIDIpIHsKCQkJa2V5WzBdID0gNzsKCQl9IGVsc2UgewoJCQlrZXkgWzBdID0gNjsKCQl9Cgl9CglyZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUoa2V5LCBlbmMpOwp9OwoKRUNESC5wcm90b3R5cGUuZ2V0UHJpdmF0ZUtleSA9IGZ1bmN0aW9uIChlbmMpIHsKCXJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLmtleXMuZ2V0UHJpdmF0ZSgpLCBlbmMpOwp9OwoKRUNESC5wcm90b3R5cGUuc2V0UHVibGljS2V5ID0gZnVuY3Rpb24gKHB1YiwgZW5jKSB7CgllbmMgPSBlbmMgfHwgJ3V0ZjgnOwoJaWYgKCFCdWZmZXIuaXNCdWZmZXIocHViKSkgewoJCXB1YiA9IG5ldyBCdWZmZXIocHViLCBlbmMpOwoJfQoJdGhpcy5rZXlzLl9pbXBvcnRQdWJsaWMocHViKTsKCXJldHVybiB0aGlzOwp9OwoKRUNESC5wcm90b3R5cGUuc2V0UHJpdmF0ZUtleSA9IGZ1bmN0aW9uIChwcml2LCBlbmMpIHsKCWVuYyA9IGVuYyB8fCAndXRmOCc7CglpZiAoIUJ1ZmZlci5pc0J1ZmZlcihwcml2KSkgewoJCXByaXYgPSBuZXcgQnVmZmVyKHByaXYsIGVuYyk7Cgl9Cgl2YXIgX3ByaXYgPSBuZXcgQk4ocHJpdik7CglfcHJpdiA9IF9wcml2LnRvU3RyaW5nKDE2KTsKCXRoaXMua2V5cy5faW1wb3J0UHJpdmF0ZShfcHJpdik7CglyZXR1cm4gdGhpczsKfTsKCmZ1bmN0aW9uIGZvcm1hdFJldHVyblZhbHVlKGJuLCBlbmMsIGxlbikgewoJaWYgKCFBcnJheS5pc0FycmF5KGJuKSkgewoJCWJuID0gYm4udG9BcnJheSgpOwoJfQoJdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoYm4pOwoJaWYgKGxlbiAmJiBidWYubGVuZ3RoIDwgbGVuKSB7CgkJdmFyIHplcm9zID0gbmV3IEJ1ZmZlcihsZW4gLSBidWYubGVuZ3RoKTsKCQl6ZXJvcy5maWxsKDApOwoJCWJ1ZiA9IEJ1ZmZlci5jb25jYXQoW3plcm9zLCBidWZdKTsKCX0KCWlmICghZW5jKSB7CgkJcmV0dXJuIGJ1ZjsKCX0gZWxzZSB7CgkJcmV0dXJuIGJ1Zi50b1N0cmluZyhlbmMpOwoJfQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYm4uanMiOjYwNywiYnVmZmVyIjo1MDQsImVsbGlwdGljIjo2MDh9XSw2MDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTQxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NTQxfV0sNjA4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU0M11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi9wYWNrYWdlLmpzb24iOjYzMSwiLi9lbGxpcHRpYy9jdXJ2ZSI6NjExLCIuL2VsbGlwdGljL2N1cnZlcyI6NjE0LCIuL2VsbGlwdGljL2VjIjo2MTUsIi4vZWxsaXB0aWMvZWRkc2EiOjYxOCwiLi9lbGxpcHRpYy9obWFjLWRyYmciOjYyMSwiLi9lbGxpcHRpYy91dGlscyI6NjIzLCJicm9yYW5kIjo2MjQsImR1cCI6NTQzfV0sNjA5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU0NF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi8uLi9lbGxpcHRpYyI6NjA4LCJibi5qcyI6NjA3LCJkdXAiOjU0NH1dLDYxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NDVdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi4vLi4vZWxsaXB0aWMiOjYwOCwiLi4vY3VydmUiOjYxMSwiYm4uanMiOjYwNywiZHVwIjo1NDUsImluaGVyaXRzIjo3MDF9XSw2MTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTQ2XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vYmFzZSI6NjA5LCIuL2Vkd2FyZHMiOjYxMCwiLi9tb250Ijo2MTIsIi4vc2hvcnQiOjYxMywiZHVwIjo1NDZ9XSw2MTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTQ3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4uLy4uL2VsbGlwdGljIjo2MDgsIi4uL2N1cnZlIjo2MTEsImJuLmpzIjo2MDcsImR1cCI6NTQ3LCJpbmhlcml0cyI6NzAxfV0sNjEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU0OF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi8uLi9lbGxpcHRpYyI6NjA4LCIuLi9jdXJ2ZSI6NjExLCJibi5qcyI6NjA3LCJkdXAiOjU0OCwiaW5oZXJpdHMiOjcwMX1dLDYxNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NDldWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi4vZWxsaXB0aWMiOjYwOCwiLi9wcmVjb21wdXRlZC9zZWNwMjU2azEiOjYyMiwiZHVwIjo1NDksImhhc2guanMiOjYyNX1dLDYxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NTBdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi4vLi4vZWxsaXB0aWMiOjYwOCwiLi9rZXkiOjYxNiwiLi9zaWduYXR1cmUiOjYxNywiYm4uanMiOjYwNywiZHVwIjo1NTB9XSw2MTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTUxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJuLmpzIjo2MDcsImR1cCI6NTUxfV0sNjE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU1Ml1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi8uLi9lbGxpcHRpYyI6NjA4LCJibi5qcyI6NjA3LCJkdXAiOjU1Mn1dLDYxODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NTNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi4vLi4vZWxsaXB0aWMiOjYwOCwiLi9rZXkiOjYxOSwiLi9zaWduYXR1cmUiOjYyMCwiZHVwIjo1NTMsImhhc2guanMiOjYyNX1dLDYxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NTRdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi4vLi4vZWxsaXB0aWMiOjYwOCwiZHVwIjo1NTR9XSw2MjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTU1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4uLy4uL2VsbGlwdGljIjo2MDgsImJuLmpzIjo2MDcsImR1cCI6NTU1fV0sNjIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU1Nl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi9lbGxpcHRpYyI6NjA4LCJkdXAiOjU1NiwiaGFzaC5qcyI6NjI1fV0sNjIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU1N11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjU1N31dLDYyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NThdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYm4uanMiOjYwNywiZHVwIjo1NTh9XSw2MjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTU5XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NTU5fV0sNjI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU2MF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2hhc2gvY29tbW9uIjo2MjYsIi4vaGFzaC9obWFjIjo2MjcsIi4vaGFzaC9yaXBlbWQiOjYyOCwiLi9oYXNoL3NoYSI6NjI5LCIuL2hhc2gvdXRpbHMiOjYzMCwiZHVwIjo1NjB9XSw2MjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTYxXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4uL2hhc2giOjYyNSwiZHVwIjo1NjF9XSw2Mjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTYyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4uL2hhc2giOjYyNSwiZHVwIjo1NjJ9XSw2Mjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTYzXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4uL2hhc2giOjYyNSwiZHVwIjo1NjN9XSw2Mjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTY0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4uL2hhc2giOjYyNSwiZHVwIjo1NjR9XSw2MzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTY1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NTY1LCJpbmhlcml0cyI6NzAxfV0sNjMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU2Nl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjU2Nn1dLDYzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MjldWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9tZDUiOjYzNCwiYnVmZmVyIjo1MDQsImNpcGhlci1iYXNlIjo2MzUsImR1cCI6NDI5LCJpbmhlcml0cyI6NzAxLCJyaXBlbWQxNjAiOjYzNiwic2hhLmpzIjo2Mzh9XSw2MzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDMwXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJkdXAiOjQzMH1dLDYzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MzFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9oZWxwZXJzIjo2MzMsImR1cCI6NDMxfV0sNjM1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzMl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiZHVwIjo0MzIsImluaGVyaXRzIjo3MDEsInN0cmVhbSI6NzE5LCJzdHJpbmdfZGVjb2RlciI6NzIwfV0sNjM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzNF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiZHVwIjo0MzR9XSw2Mzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDM1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJkdXAiOjQzNX1dLDYzODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0MzZdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9zaGEiOjYzOSwiLi9zaGExIjo2NDAsIi4vc2hhMjI0Ijo2NDEsIi4vc2hhMjU2Ijo2NDIsIi4vc2hhMzg0Ijo2NDMsIi4vc2hhNTEyIjo2NDQsImR1cCI6NDM2fV0sNjM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzN11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2hhc2giOjYzNywiYnVmZmVyIjo1MDQsImR1cCI6NDM3LCJpbmhlcml0cyI6NzAxfV0sNjQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzOF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2hhc2giOjYzNywiYnVmZmVyIjo1MDQsImR1cCI6NDM4LCJpbmhlcml0cyI6NzAxfV0sNjQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzOV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2hhc2giOjYzNywiLi9zaGEyNTYiOjY0MiwiYnVmZmVyIjo1MDQsImR1cCI6NDM5LCJpbmhlcml0cyI6NzAxfV0sNjQyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQ0MF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2hhc2giOjYzNywiYnVmZmVyIjo1MDQsImR1cCI6NDQwLCJpbmhlcml0cyI6NzAxfV0sNjQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQ0MV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2hhc2giOjYzNywiLi9zaGE1MTIiOjY0NCwiYnVmZmVyIjo1MDQsImR1cCI6NDQxLCJpbmhlcml0cyI6NzAxfV0sNjQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQ0Ml1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2hhc2giOjYzNywiYnVmZmVyIjo1MDQsImR1cCI6NDQyLCJpbmhlcml0cyI6NzAxfV0sNjQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQ0NF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiY3JlYXRlLWhhc2gvYnJvd3NlciI6NjMyLCJkdXAiOjQ0NCwiaW5oZXJpdHMiOjcwMSwic3RyZWFtIjo3MTl9XSw2NDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBnZW5lcmF0ZVByaW1lID0gcmVxdWlyZSgnLi9saWIvZ2VuZXJhdGVQcmltZScpCnZhciBwcmltZXMgPSByZXF1aXJlKCcuL2xpYi9wcmltZXMuanNvbicpCgp2YXIgREggPSByZXF1aXJlKCcuL2xpYi9kaCcpCgpmdW5jdGlvbiBnZXREaWZmaWVIZWxsbWFuIChtb2QpIHsKICB2YXIgcHJpbWUgPSBuZXcgQnVmZmVyKHByaW1lc1ttb2RdLnByaW1lLCAnaGV4JykKICB2YXIgZ2VuID0gbmV3IEJ1ZmZlcihwcmltZXNbbW9kXS5nZW4sICdoZXgnKQoKICByZXR1cm4gbmV3IERIKHByaW1lLCBnZW4pCn0KCnZhciBFTkNPRElOR1MgPSB7CiAgJ2JpbmFyeSc6IHRydWUsICdoZXgnOiB0cnVlLCAnYmFzZTY0JzogdHJ1ZQp9CgpmdW5jdGlvbiBjcmVhdGVEaWZmaWVIZWxsbWFuIChwcmltZSwgZW5jLCBnZW5lcmF0b3IsIGdlbmMpIHsKICBpZiAoQnVmZmVyLmlzQnVmZmVyKGVuYykgfHwgRU5DT0RJTkdTW2VuY10gPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIGNyZWF0ZURpZmZpZUhlbGxtYW4ocHJpbWUsICdiaW5hcnknLCBlbmMsIGdlbmVyYXRvcikKICB9CgogIGVuYyA9IGVuYyB8fCAnYmluYXJ5JwogIGdlbmMgPSBnZW5jIHx8ICdiaW5hcnknCiAgZ2VuZXJhdG9yID0gZ2VuZXJhdG9yIHx8IG5ldyBCdWZmZXIoWzJdKQoKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihnZW5lcmF0b3IpKSB7CiAgICBnZW5lcmF0b3IgPSBuZXcgQnVmZmVyKGdlbmVyYXRvciwgZ2VuYykKICB9CgogIGlmICh0eXBlb2YgcHJpbWUgPT09ICdudW1iZXInKSB7CiAgICByZXR1cm4gbmV3IERIKGdlbmVyYXRlUHJpbWUocHJpbWUsIGdlbmVyYXRvciksIGdlbmVyYXRvciwgdHJ1ZSkKICB9CgogIGlmICghQnVmZmVyLmlzQnVmZmVyKHByaW1lKSkgewogICAgcHJpbWUgPSBuZXcgQnVmZmVyKHByaW1lLCBlbmMpCiAgfQoKICByZXR1cm4gbmV3IERIKHByaW1lLCBnZW5lcmF0b3IsIHRydWUpCn0KCmV4cG9ydHMuRGlmZmllSGVsbG1hbkdyb3VwID0gZXhwb3J0cy5jcmVhdGVEaWZmaWVIZWxsbWFuR3JvdXAgPSBleHBvcnRzLmdldERpZmZpZUhlbGxtYW4gPSBnZXREaWZmaWVIZWxsbWFuCmV4cG9ydHMuY3JlYXRlRGlmZmllSGVsbG1hbiA9IGV4cG9ydHMuRGlmZmllSGVsbG1hbiA9IGNyZWF0ZURpZmZpZUhlbGxtYW4KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2xpYi9kaCI6NjQ3LCIuL2xpYi9nZW5lcmF0ZVByaW1lIjo2NDgsIi4vbGliL3ByaW1lcy5qc29uIjo2NDksImJ1ZmZlciI6NTA0fV0sNjQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgTWlsbGVyUmFiaW4gPSByZXF1aXJlKCdtaWxsZXItcmFiaW4nKTsKdmFyIG1pbGxlclJhYmluID0gbmV3IE1pbGxlclJhYmluKCk7CnZhciBUV0VOVFlGT1VSID0gbmV3IEJOKDI0KTsKdmFyIEVMRVZFTiA9IG5ldyBCTigxMSk7CnZhciBURU4gPSBuZXcgQk4oMTApOwp2YXIgVEhSRUUgPSBuZXcgQk4oMyk7CnZhciBTRVZFTiA9IG5ldyBCTig3KTsKdmFyIHByaW1lcyA9IHJlcXVpcmUoJy4vZ2VuZXJhdGVQcmltZScpOwp2YXIgcmFuZG9tQnl0ZXMgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpOwptb2R1bGUuZXhwb3J0cyA9IERIOwoKZnVuY3Rpb24gc2V0UHVibGljS2V5KHB1YiwgZW5jKSB7CiAgZW5jID0gZW5jIHx8ICd1dGY4JzsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihwdWIpKSB7CiAgICBwdWIgPSBuZXcgQnVmZmVyKHB1YiwgZW5jKTsKICB9CiAgdGhpcy5fcHViID0gbmV3IEJOKHB1Yik7CiAgcmV0dXJuIHRoaXM7Cn0KCmZ1bmN0aW9uIHNldFByaXZhdGVLZXkocHJpdiwgZW5jKSB7CiAgZW5jID0gZW5jIHx8ICd1dGY4JzsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihwcml2KSkgewogICAgcHJpdiA9IG5ldyBCdWZmZXIocHJpdiwgZW5jKTsKICB9CiAgdGhpcy5fcHJpdiA9IG5ldyBCTihwcml2KTsKICByZXR1cm4gdGhpczsKfQoKdmFyIHByaW1lQ2FjaGUgPSB7fTsKZnVuY3Rpb24gY2hlY2tQcmltZShwcmltZSwgZ2VuZXJhdG9yKSB7CiAgdmFyIGdlbiA9IGdlbmVyYXRvci50b1N0cmluZygnaGV4Jyk7CiAgdmFyIGhleCA9IFtnZW4sIHByaW1lLnRvU3RyaW5nKDE2KV0uam9pbignXycpOwogIGlmIChoZXggaW4gcHJpbWVDYWNoZSkgewogICAgcmV0dXJuIHByaW1lQ2FjaGVbaGV4XTsKICB9CiAgdmFyIGVycm9yID0gMDsKCiAgaWYgKHByaW1lLmlzRXZlbigpIHx8CiAgICAhcHJpbWVzLnNpbXBsZVNpZXZlIHx8CiAgICAhcHJpbWVzLmZlcm1hdFRlc3QocHJpbWUpIHx8CiAgICAhbWlsbGVyUmFiaW4udGVzdChwcmltZSkpIHsKICAgIC8vbm90IGEgcHJpbWUgc28gKzEKICAgIGVycm9yICs9IDE7CgogICAgaWYgKGdlbiA9PT0gJzAyJyB8fCBnZW4gPT09ICcwNScpIHsKICAgICAgLy8gd2UnZCBiZSBhYmxlIHRvIGNoZWNrIHRoZSBnZW5lcmF0b3IKICAgICAgLy8gaXQgd291bGQgZmFpbCBzbyArOAogICAgICBlcnJvciArPSA4OwogICAgfSBlbHNlIHsKICAgICAgLy93ZSB3b3VsZG4ndCBiZSBhYmxlIHRvIHRlc3QgdGhlIGdlbmVyYXRvcgogICAgICAvLyBzbyArNAogICAgICBlcnJvciArPSA0OwogICAgfQogICAgcHJpbWVDYWNoZVtoZXhdID0gZXJyb3I7CiAgICByZXR1cm4gZXJyb3I7CiAgfQogIGlmICghbWlsbGVyUmFiaW4udGVzdChwcmltZS5zaHJuKDEpKSkgewogICAgLy9ub3QgYSBzYWZlIHByaW1lCiAgICBlcnJvciArPSAyOwogIH0KICB2YXIgcmVtOwogIHN3aXRjaCAoZ2VuKSB7CiAgICBjYXNlICcwMic6CiAgICAgIGlmIChwcmltZS5tb2QoVFdFTlRZRk9VUikuY21wKEVMRVZFTikpIHsKICAgICAgICAvLyB1bnN1aWRhYmxlIGdlbmVyYXRvcgogICAgICAgIGVycm9yICs9IDg7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlICcwNSc6CiAgICAgIHJlbSA9IHByaW1lLm1vZChURU4pOwogICAgICBpZiAocmVtLmNtcChUSFJFRSkgJiYgcmVtLmNtcChTRVZFTikpIHsKICAgICAgICAvLyBwcmltZSBtb2QgMTAgbmVlZHMgdG8gZXF1YWwgMyBvciA3CiAgICAgICAgZXJyb3IgKz0gODsKICAgICAgfQogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIGVycm9yICs9IDQ7CiAgfQogIHByaW1lQ2FjaGVbaGV4XSA9IGVycm9yOwogIHJldHVybiBlcnJvcjsKfQoKZnVuY3Rpb24gREgocHJpbWUsIGdlbmVyYXRvciwgbWFsbGVhYmxlKSB7CiAgdGhpcy5zZXRHZW5lcmF0b3IoZ2VuZXJhdG9yKTsKICB0aGlzLl9fcHJpbWUgPSBuZXcgQk4ocHJpbWUpOwogIHRoaXMuX3ByaW1lID0gQk4ubW9udCh0aGlzLl9fcHJpbWUpOwogIHRoaXMuX3ByaW1lTGVuID0gcHJpbWUubGVuZ3RoOwogIHRoaXMuX3B1YiA9IHVuZGVmaW5lZDsKICB0aGlzLl9wcml2ID0gdW5kZWZpbmVkOwogIHRoaXMuX3ByaW1lQ29kZSA9IHVuZGVmaW5lZDsKICBpZiAobWFsbGVhYmxlKSB7CiAgICB0aGlzLnNldFB1YmxpY0tleSA9IHNldFB1YmxpY0tleTsKICAgIHRoaXMuc2V0UHJpdmF0ZUtleSA9IHNldFByaXZhdGVLZXk7CiAgfSBlbHNlIHsKICAgIHRoaXMuX3ByaW1lQ29kZSA9IDg7CiAgfQp9Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShESC5wcm90b3R5cGUsICd2ZXJpZnlFcnJvcicsIHsKICBlbnVtZXJhYmxlOiB0cnVlLAogIGdldDogZnVuY3Rpb24gKCkgewogICAgaWYgKHR5cGVvZiB0aGlzLl9wcmltZUNvZGUgIT09ICdudW1iZXInKSB7CiAgICAgIHRoaXMuX3ByaW1lQ29kZSA9IGNoZWNrUHJpbWUodGhpcy5fX3ByaW1lLCB0aGlzLl9fZ2VuKTsKICAgIH0KICAgIHJldHVybiB0aGlzLl9wcmltZUNvZGU7CiAgfQp9KTsKREgucHJvdG90eXBlLmdlbmVyYXRlS2V5cyA9IGZ1bmN0aW9uICgpIHsKICBpZiAoIXRoaXMuX3ByaXYpIHsKICAgIHRoaXMuX3ByaXYgPSBuZXcgQk4ocmFuZG9tQnl0ZXModGhpcy5fcHJpbWVMZW4pKTsKICB9CiAgdGhpcy5fcHViID0gdGhpcy5fZ2VuLnRvUmVkKHRoaXMuX3ByaW1lKS5yZWRQb3codGhpcy5fcHJpdikuZnJvbVJlZCgpOwogIHJldHVybiB0aGlzLmdldFB1YmxpY0tleSgpOwp9OwoKREgucHJvdG90eXBlLmNvbXB1dGVTZWNyZXQgPSBmdW5jdGlvbiAob3RoZXIpIHsKICBvdGhlciA9IG5ldyBCTihvdGhlcik7CiAgb3RoZXIgPSBvdGhlci50b1JlZCh0aGlzLl9wcmltZSk7CiAgdmFyIHNlY3JldCA9IG90aGVyLnJlZFBvdyh0aGlzLl9wcml2KS5mcm9tUmVkKCk7CiAgdmFyIG91dCA9IG5ldyBCdWZmZXIoc2VjcmV0LnRvQXJyYXkoKSk7CiAgdmFyIHByaW1lID0gdGhpcy5nZXRQcmltZSgpOwogIGlmIChvdXQubGVuZ3RoIDwgcHJpbWUubGVuZ3RoKSB7CiAgICB2YXIgZnJvbnQgPSBuZXcgQnVmZmVyKHByaW1lLmxlbmd0aCAtIG91dC5sZW5ndGgpOwogICAgZnJvbnQuZmlsbCgwKTsKICAgIG91dCA9IEJ1ZmZlci5jb25jYXQoW2Zyb250LCBvdXRdKTsKICB9CiAgcmV0dXJuIG91dDsKfTsKCkRILnByb3RvdHlwZS5nZXRQdWJsaWNLZXkgPSBmdW5jdGlvbiBnZXRQdWJsaWNLZXkoZW5jKSB7CiAgcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKHRoaXMuX3B1YiwgZW5jKTsKfTsKCkRILnByb3RvdHlwZS5nZXRQcml2YXRlS2V5ID0gZnVuY3Rpb24gZ2V0UHJpdmF0ZUtleShlbmMpIHsKICByZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUodGhpcy5fcHJpdiwgZW5jKTsKfTsKCkRILnByb3RvdHlwZS5nZXRQcmltZSA9IGZ1bmN0aW9uIChlbmMpIHsKICByZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUodGhpcy5fX3ByaW1lLCBlbmMpOwp9OwoKREgucHJvdG90eXBlLmdldEdlbmVyYXRvciA9IGZ1bmN0aW9uIChlbmMpIHsKICByZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUodGhpcy5fZ2VuLCBlbmMpOwp9OwoKREgucHJvdG90eXBlLnNldEdlbmVyYXRvciA9IGZ1bmN0aW9uIChnZW4sIGVuYykgewogIGVuYyA9IGVuYyB8fCAndXRmOCc7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoZ2VuKSkgewogICAgZ2VuID0gbmV3IEJ1ZmZlcihnZW4sIGVuYyk7CiAgfQogIHRoaXMuX19nZW4gPSBnZW47CiAgdGhpcy5fZ2VuID0gbmV3IEJOKGdlbik7CiAgcmV0dXJuIHRoaXM7Cn07CgpmdW5jdGlvbiBmb3JtYXRSZXR1cm5WYWx1ZShibiwgZW5jKSB7CiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoYm4udG9BcnJheSgpKTsKICBpZiAoIWVuYykgewogICAgcmV0dXJuIGJ1ZjsKICB9IGVsc2UgewogICAgcmV0dXJuIGJ1Zi50b1N0cmluZyhlbmMpOwogIH0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vZ2VuZXJhdGVQcmltZSI6NjQ4LCJibi5qcyI6NjUwLCJidWZmZXIiOjUwNCwibWlsbGVyLXJhYmluIjo2NTEsInJhbmRvbWJ5dGVzIjo2OTl9XSw2NDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgcmFuZG9tQnl0ZXMgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpOwptb2R1bGUuZXhwb3J0cyA9IGZpbmRQcmltZTsKZmluZFByaW1lLnNpbXBsZVNpZXZlID0gc2ltcGxlU2lldmU7CmZpbmRQcmltZS5mZXJtYXRUZXN0ID0gZmVybWF0VGVzdDsKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIFRXRU5UWUZPVVIgPSBuZXcgQk4oMjQpOwp2YXIgTWlsbGVyUmFiaW4gPSByZXF1aXJlKCdtaWxsZXItcmFiaW4nKTsKdmFyIG1pbGxlclJhYmluID0gbmV3IE1pbGxlclJhYmluKCk7CnZhciBPTkUgPSBuZXcgQk4oMSk7CnZhciBUV08gPSBuZXcgQk4oMik7CnZhciBGSVZFID0gbmV3IEJOKDUpOwp2YXIgU0lYVEVFTiA9IG5ldyBCTigxNik7CnZhciBFSUdIVCA9IG5ldyBCTig4KTsKdmFyIFRFTiA9IG5ldyBCTigxMCk7CnZhciBUSFJFRSA9IG5ldyBCTigzKTsKdmFyIFNFVkVOID0gbmV3IEJOKDcpOwp2YXIgRUxFVkVOID0gbmV3IEJOKDExKTsKdmFyIEZPVVIgPSBuZXcgQk4oNCk7CnZhciBUV0VMVkUgPSBuZXcgQk4oMTIpOwp2YXIgcHJpbWVzID0gbnVsbDsKCmZ1bmN0aW9uIF9nZXRQcmltZXMoKSB7CiAgaWYgKHByaW1lcyAhPT0gbnVsbCkKICAgIHJldHVybiBwcmltZXM7CgogIHZhciBsaW1pdCA9IDB4MTAwMDAwOwogIHZhciByZXMgPSBbXTsKICByZXNbMF0gPSAyOwogIGZvciAodmFyIGkgPSAxLCBrID0gMzsgayA8IGxpbWl0OyBrICs9IDIpIHsKICAgIHZhciBzcXJ0ID0gTWF0aC5jZWlsKE1hdGguc3FydChrKSk7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGkgJiYgcmVzW2pdIDw9IHNxcnQ7IGorKykKICAgICAgaWYgKGsgJSByZXNbal0gPT09IDApCiAgICAgICAgYnJlYWs7CgogICAgaWYgKGkgIT09IGogJiYgcmVzW2pdIDw9IHNxcnQpCiAgICAgIGNvbnRpbnVlOwoKICAgIHJlc1tpKytdID0gazsKICB9CiAgcHJpbWVzID0gcmVzOwogIHJldHVybiByZXM7Cn0KCmZ1bmN0aW9uIHNpbXBsZVNpZXZlKHApIHsKICB2YXIgcHJpbWVzID0gX2dldFByaW1lcygpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHByaW1lcy5sZW5ndGg7IGkrKykKICAgIGlmIChwLm1vZG4ocHJpbWVzW2ldKSA9PT0gMCkgewogICAgICBpZiAocC5jbXBuKHByaW1lc1tpXSkgPT09IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIGZlcm1hdFRlc3QocCkgewogIHZhciByZWQgPSBCTi5tb250KHApOwogIHJldHVybiBUV08udG9SZWQocmVkKS5yZWRQb3cocC5zdWJuKDEpKS5mcm9tUmVkKCkuY21wbigxKSA9PT0gMDsKfQoKZnVuY3Rpb24gZmluZFByaW1lKGJpdHMsIGdlbikgewogIGlmIChiaXRzIDwgMTYpIHsKICAgIC8vIHRoaXMgaXMgd2hhdCBvcGVuc3NsIGRvZXMKICAgIGlmIChnZW4gPT09IDIgfHwgZ2VuID09PSA1KSB7CiAgICAgIHJldHVybiBuZXcgQk4oWzB4OGMsIDB4N2JdKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXcgQk4oWzB4OGMsIDB4MjddKTsKICAgIH0KICB9CiAgZ2VuID0gbmV3IEJOKGdlbik7CgogIHZhciBudW0sIG4yOwoKICB3aGlsZSAodHJ1ZSkgewogICAgbnVtID0gbmV3IEJOKHJhbmRvbUJ5dGVzKE1hdGguY2VpbChiaXRzIC8gOCkpKTsKICAgIHdoaWxlIChudW0uYml0TGVuZ3RoKCkgPiBiaXRzKSB7CiAgICAgIG51bS5pc2hybigxKTsKICAgIH0KICAgIGlmIChudW0uaXNFdmVuKCkpIHsKICAgICAgbnVtLmlhZGQoT05FKTsKICAgIH0KICAgIGlmICghbnVtLnRlc3RuKDEpKSB7CiAgICAgIG51bS5pYWRkKFRXTyk7CiAgICB9CiAgICBpZiAoIWdlbi5jbXAoVFdPKSkgewogICAgICB3aGlsZSAobnVtLm1vZChUV0VOVFlGT1VSKS5jbXAoRUxFVkVOKSkgewogICAgICAgIG51bS5pYWRkKEZPVVIpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKCFnZW4uY21wKEZJVkUpKSB7CiAgICAgIHdoaWxlIChudW0ubW9kKFRFTikuY21wKFRIUkVFKSkgewogICAgICAgIG51bS5pYWRkKEZPVVIpOwogICAgICB9CiAgICB9CiAgICBuMiA9IG51bS5zaHJuKDEpOwogICAgaWYgKHNpbXBsZVNpZXZlKG4yKSAmJiBzaW1wbGVTaWV2ZShudW0pICYmCiAgICAgIGZlcm1hdFRlc3QobjIpICYmIGZlcm1hdFRlc3QobnVtKSAmJgogICAgICBtaWxsZXJSYWJpbi50ZXN0KG4yKSAmJiBtaWxsZXJSYWJpbi50ZXN0KG51bSkpIHsKICAgICAgcmV0dXJuIG51bTsKICAgIH0KICB9Cgp9Cgp9LHsiYm4uanMiOjY1MCwibWlsbGVyLXJhYmluIjo2NTEsInJhbmRvbWJ5dGVzIjo2OTl9XSw2NDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz17CiAgICAibW9kcDEiOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2M2EzNjIwZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDIiOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2MzdlZDZiMGJmZjVjYjZmNDA2YjdlZGVlMzg2YmZiNWE4OTlmYTVhZTlmMjQxMTdjNGIxZmU2NDkyODY2NTFlY2U2NTM4MWZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHA1IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTIzNzMyN2ZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHAxNCI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTQ1YjNkYzIwMDdjYjhhMTYzYmYwNTk4ZGE0ODM2MWM1NWQzOWE2OTE2M2ZhOGZkMjRjZjVmODM2NTVkMjNkY2EzYWQ5NjFjNjJmMzU2MjA4NTUyYmI5ZWQ1MjkwNzcwOTY5NjZkNjcwYzM1NGU0YWJjOTgwNGYxNzQ2YzA4Y2ExODIxN2MzMjkwNWU0NjJlMzZjZTNiZTM5ZTc3MmMxODBlODYwMzliMjc4M2EyZWMwN2EyOGZiNWM1NWRmMDZmNGM1MmM5ZGUyYmNiZjY5NTU4MTcxODM5OTU0OTdjZWE5NTZhZTUxNWQyMjYxODk4ZmEwNTEwMTU3MjhlNWE4YWFjYWE2OGZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHAxNSI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTQ1YjNkYzIwMDdjYjhhMTYzYmYwNTk4ZGE0ODM2MWM1NWQzOWE2OTE2M2ZhOGZkMjRjZjVmODM2NTVkMjNkY2EzYWQ5NjFjNjJmMzU2MjA4NTUyYmI5ZWQ1MjkwNzcwOTY5NjZkNjcwYzM1NGU0YWJjOTgwNGYxNzQ2YzA4Y2ExODIxN2MzMjkwNWU0NjJlMzZjZTNiZTM5ZTc3MmMxODBlODYwMzliMjc4M2EyZWMwN2EyOGZiNWM1NWRmMDZmNGM1MmM5ZGUyYmNiZjY5NTU4MTcxODM5OTU0OTdjZWE5NTZhZTUxNWQyMjYxODk4ZmEwNTEwMTU3MjhlNWE4YWFhYzQyZGFkMzMxNzBkMDQ1MDdhMzNhODU1MjFhYmRmMWNiYTY0ZWNmYjg1MDQ1OGRiZWYwYThhZWE3MTU3NWQwNjBjN2RiMzk3MGY4NWE2ZTFlNGM3YWJmNWFlOGNkYjA5MzNkNzFlOGM5NGUwNGEyNTYxOWRjZWUzZDIyNjFhZDJlZTZiZjEyZmZhMDZkOThhMDg2NGQ4NzYwMjczM2VjODZhNjQ1MjFmMmIxODE3N2IyMDBjYmJlMTE3NTc3YTYxNWQ2Yzc3MDk4OGMwYmFkOTQ2ZTIwOGUyNGZhMDc0ZTVhYjMxNDNkYjViZmNlMGZkMTA4ZTRiODJkMTIwYTkzYWQyY2FmZmZmZmZmZmZmZmZmZmZmIgogICAgfSwKICAgICJtb2RwMTYiOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2MzdlZDZiMGJmZjVjYjZmNDA2YjdlZGVlMzg2YmZiNWE4OTlmYTVhZTlmMjQxMTdjNGIxZmU2NDkyODY2NTFlY2U0NWIzZGMyMDA3Y2I4YTE2M2JmMDU5OGRhNDgzNjFjNTVkMzlhNjkxNjNmYThmZDI0Y2Y1ZjgzNjU1ZDIzZGNhM2FkOTYxYzYyZjM1NjIwODU1MmJiOWVkNTI5MDc3MDk2OTY2ZDY3MGMzNTRlNGFiYzk4MDRmMTc0NmMwOGNhMTgyMTdjMzI5MDVlNDYyZTM2Y2UzYmUzOWU3NzJjMTgwZTg2MDM5YjI3ODNhMmVjMDdhMjhmYjVjNTVkZjA2ZjRjNTJjOWRlMmJjYmY2OTU1ODE3MTgzOTk1NDk3Y2VhOTU2YWU1MTVkMjI2MTg5OGZhMDUxMDE1NzI4ZTVhOGFhYWM0MmRhZDMzMTcwZDA0NTA3YTMzYTg1NTIxYWJkZjFjYmE2NGVjZmI4NTA0NThkYmVmMGE4YWVhNzE1NzVkMDYwYzdkYjM5NzBmODVhNmUxZTRjN2FiZjVhZThjZGIwOTMzZDcxZThjOTRlMDRhMjU2MTlkY2VlM2QyMjYxYWQyZWU2YmYxMmZmYTA2ZDk4YTA4NjRkODc2MDI3MzNlYzg2YTY0NTIxZjJiMTgxNzdiMjAwY2JiZTExNzU3N2E2MTVkNmM3NzA5ODhjMGJhZDk0NmUyMDhlMjRmYTA3NGU1YWIzMTQzZGI1YmZjZTBmZDEwOGU0YjgyZDEyMGE5MjEwODAxMWE3MjNjMTJhNzg3ZTZkNzg4NzE5YTEwYmRiYTViMjY5OWMzMjcxODZhZjRlMjNjMWE5NDY4MzRiNjE1MGJkYTI1ODNlOWNhMmFkNDRjZThkYmJiYzJkYjA0ZGU4ZWY5MmU4ZWZjMTQxZmJlY2FhNjI4N2M1OTQ3NGU2YmMwNWQ5OWIyOTY0ZmEwOTBjM2EyMjMzYmExODY1MTViZTdlZDFmNjEyOTcwY2VlMmQ3YWZiODFiZGQ3NjIxNzA0ODFjZDAwNjkxMjdkNWIwNWFhOTkzYjRlYTk4OGQ4ZmRkYzE4NmZmYjdkYzkwYTZjMDhmNGRmNDM1YzkzNDA2MzE5OWZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHAxNyI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTQ1YjNkYzIwMDdjYjhhMTYzYmYwNTk4ZGE0ODM2MWM1NWQzOWE2OTE2M2ZhOGZkMjRjZjVmODM2NTVkMjNkY2EzYWQ5NjFjNjJmMzU2MjA4NTUyYmI5ZWQ1MjkwNzcwOTY5NjZkNjcwYzM1NGU0YWJjOTgwNGYxNzQ2YzA4Y2ExODIxN2MzMjkwNWU0NjJlMzZjZTNiZTM5ZTc3MmMxODBlODYwMzliMjc4M2EyZWMwN2EyOGZiNWM1NWRmMDZmNGM1MmM5ZGUyYmNiZjY5NTU4MTcxODM5OTU0OTdjZWE5NTZhZTUxNWQyMjYxODk4ZmEwNTEwMTU3MjhlNWE4YWFhYzQyZGFkMzMxNzBkMDQ1MDdhMzNhODU1MjFhYmRmMWNiYTY0ZWNmYjg1MDQ1OGRiZWYwYThhZWE3MTU3NWQwNjBjN2RiMzk3MGY4NWE2ZTFlNGM3YWJmNWFlOGNkYjA5MzNkNzFlOGM5NGUwNGEyNTYxOWRjZWUzZDIyNjFhZDJlZTZiZjEyZmZhMDZkOThhMDg2NGQ4NzYwMjczM2VjODZhNjQ1MjFmMmIxODE3N2IyMDBjYmJlMTE3NTc3YTYxNWQ2Yzc3MDk4OGMwYmFkOTQ2ZTIwOGUyNGZhMDc0ZTVhYjMxNDNkYjViZmNlMGZkMTA4ZTRiODJkMTIwYTkyMTA4MDExYTcyM2MxMmE3ODdlNmQ3ODg3MTlhMTBiZGJhNWIyNjk5YzMyNzE4NmFmNGUyM2MxYTk0NjgzNGI2MTUwYmRhMjU4M2U5Y2EyYWQ0NGNlOGRiYmJjMmRiMDRkZThlZjkyZThlZmMxNDFmYmVjYWE2Mjg3YzU5NDc0ZTZiYzA1ZDk5YjI5NjRmYTA5MGMzYTIyMzNiYTE4NjUxNWJlN2VkMWY2MTI5NzBjZWUyZDdhZmI4MWJkZDc2MjE3MDQ4MWNkMDA2OTEyN2Q1YjA1YWE5OTNiNGVhOTg4ZDhmZGRjMTg2ZmZiN2RjOTBhNmMwOGY0ZGY0MzVjOTM0MDI4NDkyMzZjM2ZhYjRkMjdjNzAyNmMxZDRkY2IyNjAyNjQ2ZGVjOTc1MWU3NjNkYmEzN2JkZjhmZjk0MDZhZDllNTMwZWU1ZGIzODJmNDEzMDAxYWViMDZhNTNlZDkwMjdkODMxMTc5NzI3YjA4NjVhODkxOGRhM2VkYmViY2Y5YjE0ZWQ0NGNlNmNiYWNlZDRiYjFiZGI3ZjE0NDdlNmNjMjU0YjMzMjA1MTUxMmJkN2FmNDI2ZmI4ZjQwMTM3OGNkMmJmNTk4M2NhMDFjNjRiOTJlY2YwMzJlYTE1ZDE3MjFkMDNmNDgyZDdjZTZlNzRmZWY2ZDU1ZTcwMmY0Njk4MGM4MmI1YTg0MDMxOTAwYjFjOWU1OWU3Yzk3ZmJlYzdlOGYzMjNhOTdhN2UzNmNjODhiZTBmMWQ0NWI3ZmY1ODVhYzU0YmQ0MDdiMjJiNDE1NGFhY2M4ZjZkN2ViZjQ4ZTFkODE0Y2M1ZWQyMGY4MDM3ZTBhNzk3MTVlZWYyOWJlMzI4MDZhMWQ1OGJiN2M1ZGE3NmY1NTBhYTNkOGExZmJmZjBlYjE5Y2NiMWEzMTNkNTVjZGE1NmM5ZWMyZWYyOTYzMjM4N2ZlOGQ3NmUzYzA0NjgwNDNlOGY2NjNmNDg2MGVlMTJiZjJkNWIwYjc0NzRkNmU2OTRmOTFlNmRjYzQwMjRmZmZmZmZmZmZmZmZmZmZmIgogICAgfSwKICAgICJtb2RwMTgiOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2MzdlZDZiMGJmZjVjYjZmNDA2YjdlZGVlMzg2YmZiNWE4OTlmYTVhZTlmMjQxMTdjNGIxZmU2NDkyODY2NTFlY2U0NWIzZGMyMDA3Y2I4YTE2M2JmMDU5OGRhNDgzNjFjNTVkMzlhNjkxNjNmYThmZDI0Y2Y1ZjgzNjU1ZDIzZGNhM2FkOTYxYzYyZjM1NjIwODU1MmJiOWVkNTI5MDc3MDk2OTY2ZDY3MGMzNTRlNGFiYzk4MDRmMTc0NmMwOGNhMTgyMTdjMzI5MDVlNDYyZTM2Y2UzYmUzOWU3NzJjMTgwZTg2MDM5YjI3ODNhMmVjMDdhMjhmYjVjNTVkZjA2ZjRjNTJjOWRlMmJjYmY2OTU1ODE3MTgzOTk1NDk3Y2VhOTU2YWU1MTVkMjI2MTg5OGZhMDUxMDE1NzI4ZTVhOGFhYWM0MmRhZDMzMTcwZDA0NTA3YTMzYTg1NTIxYWJkZjFjYmE2NGVjZmI4NTA0NThkYmVmMGE4YWVhNzE1NzVkMDYwYzdkYjM5NzBmODVhNmUxZTRjN2FiZjVhZThjZGIwOTMzZDcxZThjOTRlMDRhMjU2MTlkY2VlM2QyMjYxYWQyZWU2YmYxMmZmYTA2ZDk4YTA4NjRkODc2MDI3MzNlYzg2YTY0NTIxZjJiMTgxNzdiMjAwY2JiZTExNzU3N2E2MTVkNmM3NzA5ODhjMGJhZDk0NmUyMDhlMjRmYTA3NGU1YWIzMTQzZGI1YmZjZTBmZDEwOGU0YjgyZDEyMGE5MjEwODAxMWE3MjNjMTJhNzg3ZTZkNzg4NzE5YTEwYmRiYTViMjY5OWMzMjcxODZhZjRlMjNjMWE5NDY4MzRiNjE1MGJkYTI1ODNlOWNhMmFkNDRjZThkYmJiYzJkYjA0ZGU4ZWY5MmU4ZWZjMTQxZmJlY2FhNjI4N2M1OTQ3NGU2YmMwNWQ5OWIyOTY0ZmEwOTBjM2EyMjMzYmExODY1MTViZTdlZDFmNjEyOTcwY2VlMmQ3YWZiODFiZGQ3NjIxNzA0ODFjZDAwNjkxMjdkNWIwNWFhOTkzYjRlYTk4OGQ4ZmRkYzE4NmZmYjdkYzkwYTZjMDhmNGRmNDM1YzkzNDAyODQ5MjM2YzNmYWI0ZDI3YzcwMjZjMWQ0ZGNiMjYwMjY0NmRlYzk3NTFlNzYzZGJhMzdiZGY4ZmY5NDA2YWQ5ZTUzMGVlNWRiMzgyZjQxMzAwMWFlYjA2YTUzZWQ5MDI3ZDgzMTE3OTcyN2IwODY1YTg5MThkYTNlZGJlYmNmOWIxNGVkNDRjZTZjYmFjZWQ0YmIxYmRiN2YxNDQ3ZTZjYzI1NGIzMzIwNTE1MTJiZDdhZjQyNmZiOGY0MDEzNzhjZDJiZjU5ODNjYTAxYzY0YjkyZWNmMDMyZWExNWQxNzIxZDAzZjQ4MmQ3Y2U2ZTc0ZmVmNmQ1NWU3MDJmNDY5ODBjODJiNWE4NDAzMTkwMGIxYzllNTllN2M5N2ZiZWM3ZThmMzIzYTk3YTdlMzZjYzg4YmUwZjFkNDViN2ZmNTg1YWM1NGJkNDA3YjIyYjQxNTRhYWNjOGY2ZDdlYmY0OGUxZDgxNGNjNWVkMjBmODAzN2UwYTc5NzE1ZWVmMjliZTMyODA2YTFkNThiYjdjNWRhNzZmNTUwYWEzZDhhMWZiZmYwZWIxOWNjYjFhMzEzZDU1Y2RhNTZjOWVjMmVmMjk2MzIzODdmZThkNzZlM2MwNDY4MDQzZThmNjYzZjQ4NjBlZTEyYmYyZDViMGI3NDc0ZDZlNjk0ZjkxZTZkYmUxMTU5NzRhMzkyNmYxMmZlZTVlNDM4Nzc3Y2I2YTkzMmRmOGNkOGJlYzRkMDczYjkzMWJhM2JjODMyYjY4ZDlkZDMwMDc0MWZhN2JmOGFmYzQ3ZWQyNTc2ZjY5MzZiYTQyNDY2M2FhYjYzOWM1YWU0ZjU2ODM0MjNiNDc0MmJmMWM5NzgyMzhmMTZjYmUzOWQ2NTJkZTNmZGI4YmVmYzg0OGFkOTIyMjIyZTA0YTQwMzdjMDcxM2ViNTdhODFhMjNmMGM3MzQ3M2ZjNjQ2Y2VhMzA2YjRiY2JjODg2MmY4Mzg1ZGRmYTlkNGI3ZmEyYzA4N2U4Nzk2ODMzMDNlZDViZGQzYTA2MmIzY2Y1YjNhMjc4YTY2ZDJhMTNmODNmNDRmODJkZGYzMTBlZTA3NGFiNmEzNjQ1OTdlODk5YTAyNTVkYzE2NGYzMWNjNTA4NDY4NTFkZjlhYjQ4MTk1ZGVkN2VhMWIxZDUxMGJkN2VlNzRkNzNmYWYzNmJjMzFlY2ZhMjY4MzU5MDQ2ZjRlYjg3OWY5MjQwMDk0MzhiNDgxYzZjZDc4ODlhMDAyZWQ1ZWUzODJiYzkxOTBkYTZmYzAyNmU0Nzk1NThlNDQ3NTY3N2U5YWE5ZTMwNTBlMjc2NTY5NGRmYzgxZjU2ZTg4MGI5NmU3MTYwYzk4MGRkOThlZGQzZGZmZmZmZmZmZmZmZmZmZmZmIgogICAgfQp9Cn0se31dLDY1MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NDFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo1NDF9XSw2NTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgYm4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgYnJvcmFuZCA9IHJlcXVpcmUoJ2Jyb3JhbmQnKTsKCmZ1bmN0aW9uIE1pbGxlclJhYmluKHJhbmQpIHsKICB0aGlzLnJhbmQgPSByYW5kIHx8IG5ldyBicm9yYW5kLlJhbmQoKTsKfQptb2R1bGUuZXhwb3J0cyA9IE1pbGxlclJhYmluOwoKTWlsbGVyUmFiaW4uY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHJhbmQpIHsKICByZXR1cm4gbmV3IE1pbGxlclJhYmluKHJhbmQpOwp9OwoKTWlsbGVyUmFiaW4ucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogIHZhciBsZW4gPSBuLmJpdExlbmd0aCgpOwogIHZhciBidWYgPSB0aGlzLnJhbmQuZ2VuZXJhdGUoTWF0aC5jZWlsKGxlbiAvIDgpKTsKCiAgLy8gU2V0IGxvdyBiaXRzCiAgYnVmWzBdIHw9IDM7CgogIC8vIE1hc2sgaGlnaCBiaXRzCiAgdmFyIG1hc2sgPSBsZW4gJiAweDc7CiAgaWYgKG1hc2sgIT09IDApCiAgICBidWZbYnVmLmxlbmd0aCAtIDFdID4+PSA3IC0gbWFzazsKCiAgcmV0dXJuIG5ldyBibihidWYpOwp9CgpNaWxsZXJSYWJpbi5wcm90b3R5cGUudGVzdCA9IGZ1bmN0aW9uIHRlc3QobiwgaywgY2IpIHsKICB2YXIgbGVuID0gbi5iaXRMZW5ndGgoKTsKICB2YXIgcmVkID0gYm4ubW9udChuKTsKICB2YXIgcm9uZSA9IG5ldyBibigxKS50b1JlZChyZWQpOwoKICBpZiAoIWspCiAgICBrID0gTWF0aC5tYXgoMSwgKGxlbiAvIDQ4KSB8IDApOwoKICAvLyBGaW5kIGQgYW5kIHMsIChuIC0gMSkgPSAoMiBeIHMpICogZDsKICB2YXIgbjEgPSBuLnN1Ym4oMSk7CiAgdmFyIG4yID0gbjEuc3VibigxKTsKICBmb3IgKHZhciBzID0gMDsgIW4xLnRlc3RuKHMpOyBzKyspIHt9CiAgdmFyIGQgPSBuLnNocm4ocyk7CgogIHZhciBybjEgPSBuMS50b1JlZChyZWQpOwoKICB2YXIgcHJpbWUgPSB0cnVlOwogIGZvciAoOyBrID4gMDsgay0tKSB7CiAgICB2YXIgYSA9IHRoaXMuX3JhbmQobjIpOwogICAgaWYgKGNiKQogICAgICBjYihhKTsKCiAgICB2YXIgeCA9IGEudG9SZWQocmVkKS5yZWRQb3coZCk7CiAgICBpZiAoeC5jbXAocm9uZSkgPT09IDAgfHwgeC5jbXAocm4xKSA9PT0gMCkKICAgICAgY29udGludWU7CgogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzOyBpKyspIHsKICAgICAgeCA9IHgucmVkU3FyKCk7CgogICAgICBpZiAoeC5jbXAocm9uZSkgPT09IDApCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoeC5jbXAocm4xKSA9PT0gMCkKICAgICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoaSA9PT0gcykKICAgICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHByaW1lOwp9OwoKTWlsbGVyUmFiaW4ucHJvdG90eXBlLmdldERpdmlzb3IgPSBmdW5jdGlvbiBnZXREaXZpc29yKG4sIGspIHsKICB2YXIgbGVuID0gbi5iaXRMZW5ndGgoKTsKICB2YXIgcmVkID0gYm4ubW9udChuKTsKICB2YXIgcm9uZSA9IG5ldyBibigxKS50b1JlZChyZWQpOwoKICBpZiAoIWspCiAgICBrID0gTWF0aC5tYXgoMSwgKGxlbiAvIDQ4KSB8IDApOwoKICAvLyBGaW5kIGQgYW5kIHMsIChuIC0gMSkgPSAoMiBeIHMpICogZDsKICB2YXIgbjEgPSBuLnN1Ym4oMSk7CiAgdmFyIG4yID0gbjEuc3VibigxKTsKICBmb3IgKHZhciBzID0gMDsgIW4xLnRlc3RuKHMpOyBzKyspIHt9CiAgdmFyIGQgPSBuLnNocm4ocyk7CgogIHZhciBybjEgPSBuMS50b1JlZChyZWQpOwoKICBmb3IgKDsgayA+IDA7IGstLSkgewogICAgdmFyIGEgPSB0aGlzLl9yYW5kKG4yKTsKCiAgICB2YXIgZyA9IG4uZ2NkKGEpOwogICAgaWYgKGcuY21wbigxKSAhPT0gMCkKICAgICAgcmV0dXJuIGc7CgogICAgdmFyIHggPSBhLnRvUmVkKHJlZCkucmVkUG93KGQpOwogICAgaWYgKHguY21wKHJvbmUpID09PSAwIHx8IHguY21wKHJuMSkgPT09IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgczsgaSsrKSB7CiAgICAgIHggPSB4LnJlZFNxcigpOwoKICAgICAgaWYgKHguY21wKHJvbmUpID09PSAwKQogICAgICAgIHJldHVybiB4LmZyb21SZWQoKS5zdWJuKDEpLmdjZChuKTsKICAgICAgaWYgKHguY21wKHJuMSkgPT09IDApCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgaWYgKGkgPT09IHMpIHsKICAgICAgeCA9IHgucmVkU3FyKCk7CiAgICAgIHJldHVybiB4LmZyb21SZWQoKS5zdWJuKDEpLmdjZChuKTsKICAgIH0KICB9CgogIHJldHVybiBmYWxzZTsKfTsKCn0seyJibi5qcyI6NjUwLCJicm9yYW5kIjo2NTJ9XSw2NTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTU5XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NTU5fV0sNjUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQ0M11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiY3JlYXRlLWhtYWMiOjY0NSwiZHVwIjo0NDN9XSw2NTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLnB1YmxpY0VuY3J5cHQgPSByZXF1aXJlKCcuL3B1YmxpY0VuY3J5cHQnKTsKZXhwb3J0cy5wcml2YXRlRGVjcnlwdCA9IHJlcXVpcmUoJy4vcHJpdmF0ZURlY3J5cHQnKTsKCmV4cG9ydHMucHJpdmF0ZUVuY3J5cHQgPSBmdW5jdGlvbiBwcml2YXRlRW5jcnlwdChrZXksIGJ1ZikgewogIHJldHVybiBleHBvcnRzLnB1YmxpY0VuY3J5cHQoa2V5LCBidWYsIHRydWUpOwp9OwoKZXhwb3J0cy5wdWJsaWNEZWNyeXB0ID0gZnVuY3Rpb24gcHVibGljRGVjcnlwdChrZXksIGJ1ZikgewogIHJldHVybiBleHBvcnRzLnByaXZhdGVEZWNyeXB0KGtleSwgYnVmLCB0cnVlKTsKfTsKfSx7Ii4vcHJpdmF0ZURlY3J5cHQiOjY5NSwiLi9wdWJsaWNFbmNyeXB0Ijo2OTZ9XSw2NTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VlZCwgbGVuKSB7CiAgdmFyIHQgPSBuZXcgQnVmZmVyKCcnKTsKICB2YXIgIGkgPSAwLCBjOwogIHdoaWxlICh0Lmxlbmd0aCA8IGxlbikgewogICAgYyA9IGkyb3BzKGkrKyk7CiAgICB0ID0gQnVmZmVyLmNvbmNhdChbdCwgY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShzZWVkKS51cGRhdGUoYykuZGlnZXN0KCldKTsKICB9CiAgcmV0dXJuIHQuc2xpY2UoMCwgbGVuKTsKfTsKCmZ1bmN0aW9uIGkyb3BzKGMpIHsKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcig0KTsKICBvdXQud3JpdGVVSW50MzJCRShjLDApOwogIHJldHVybiBvdXQ7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NTA0LCJjcmVhdGUtaGFzaCI6NjMyfV0sNjU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU0MV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjU0MX1dLDY1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NDJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYm4uanMiOjY1NiwiYnVmZmVyIjo1MDQsImR1cCI6NTQyLCJyYW5kb21ieXRlcyI6Njk5fV0sNjU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU2N11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjU2N31dLDY1OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NjhdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYXNuMS5qcyI6NjYyLCJkdXAiOjU2OH1dLDY2MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NjldWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnJvd3NlcmlmeS1hZXMiOjY3OSwiYnVmZmVyIjo1MDQsImR1cCI6NTY5LCJldnBfYnl0ZXN0b2tleSI6Njk0fV0sNjYxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU3MF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2Flc2lkLmpzb24iOjY1OCwiLi9hc24xIjo2NTksIi4vZml4UHJvYyI6NjYwLCJicm93c2VyaWZ5LWFlcyI6Njc5LCJidWZmZXIiOjUwNCwiZHVwIjo1NzAsInBia2RmMiI6NjUzfV0sNjYyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU3MV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2FzbjEvYXBpIjo2NjMsIi4vYXNuMS9iYXNlIjo2NjUsIi4vYXNuMS9jb25zdGFudHMiOjY2OSwiLi9hc24xL2RlY29kZXJzIjo2NzEsIi4vYXNuMS9lbmNvZGVycyI6Njc0LCJibi5qcyI6NjU2LCJkdXAiOjU3MX1dLDY2MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NzJdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi4vYXNuMSI6NjYyLCJkdXAiOjU3MiwiaW5oZXJpdHMiOjcwMSwidm0iOjcyM31dLDY2NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1NzNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi4vYmFzZSI6NjY1LCJidWZmZXIiOjUwNCwiZHVwIjo1NzMsImluaGVyaXRzIjo3MDF9XSw2NjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTc0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vYnVmZmVyIjo2NjQsIi4vbm9kZSI6NjY2LCIuL3JlcG9ydGVyIjo2NjcsImR1cCI6NTc0fV0sNjY2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU3NV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi9iYXNlIjo2NjUsImR1cCI6NTc1LCJtaW5pbWFsaXN0aWMtYXNzZXJ0Ijo2NzZ9XSw2Njc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTc2XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NTc2LCJpbmhlcml0cyI6NzAxfV0sNjY4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU3N11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi9jb25zdGFudHMiOjY2OSwiZHVwIjo1Nzd9XSw2Njk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTc4XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vZGVyIjo2NjgsImR1cCI6NTc4fV0sNjcwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU3OV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi8uLi9hc24xIjo2NjIsImR1cCI6NTc5LCJpbmhlcml0cyI6NzAxfV0sNjcxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU4MF1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2RlciI6NjcwLCIuL3BlbSI6NjcyLCJkdXAiOjU4MH1dLDY3MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1ODFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9kZXIiOjY3MCwiYnVmZmVyIjo1MDQsImR1cCI6NTgxLCJpbmhlcml0cyI6NzAxfV0sNjczOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzU4Ml1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuLi8uLi9hc24xIjo2NjIsImJ1ZmZlciI6NTA0LCJkdXAiOjU4MiwiaW5oZXJpdHMiOjcwMX1dLDY3NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1ODNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9kZXIiOjY3MywiLi9wZW0iOjY3NSwiZHVwIjo1ODN9XSw2NzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTg0XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Ii4vZGVyIjo2NzMsImR1cCI6NTg0LCJpbmhlcml0cyI6NzAxfV0sNjc2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUzNl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjUzNn1dLDY3NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MTBdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImR1cCI6NTEwfV0sNjc4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUxMV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2FlcyI6Njc3LCIuL2doYXNoIjo2ODIsImJ1ZmZlciI6NTA0LCJidWZmZXIteG9yIjo2OTEsImNpcGhlci1iYXNlIjo2OTIsImR1cCI6NTExLCJpbmhlcml0cyI6NzAxfV0sNjc5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUxMl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2RlY3J5cHRlciI6NjgwLCIuL2VuY3J5cHRlciI6NjgxLCIuL21vZGVzIjo2ODMsImR1cCI6NTEyfV0sNjgwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUxM11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2FlcyI6Njc3LCIuL2F1dGhDaXBoZXIiOjY3OCwiLi9tb2RlcyI6NjgzLCIuL21vZGVzL2NiYyI6Njg0LCIuL21vZGVzL2NmYiI6Njg1LCIuL21vZGVzL2NmYjEiOjY4NiwiLi9tb2Rlcy9jZmI4Ijo2ODcsIi4vbW9kZXMvY3RyIjo2ODgsIi4vbW9kZXMvZWNiIjo2ODksIi4vbW9kZXMvb2ZiIjo2OTAsIi4vc3RyZWFtQ2lwaGVyIjo2OTMsImJ1ZmZlciI6NTA0LCJjaXBoZXItYmFzZSI6NjkyLCJkdXAiOjUxMywiZXZwX2J5dGVzdG9rZXkiOjY5NCwiaW5oZXJpdHMiOjcwMX1dLDY4MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MTRdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiLi9hZXMiOjY3NywiLi9hdXRoQ2lwaGVyIjo2NzgsIi4vbW9kZXMiOjY4MywiLi9tb2Rlcy9jYmMiOjY4NCwiLi9tb2Rlcy9jZmIiOjY4NSwiLi9tb2Rlcy9jZmIxIjo2ODYsIi4vbW9kZXMvY2ZiOCI6Njg3LCIuL21vZGVzL2N0ciI6Njg4LCIuL21vZGVzL2VjYiI6Njg5LCIuL21vZGVzL29mYiI6NjkwLCIuL3N0cmVhbUNpcGhlciI6NjkzLCJidWZmZXIiOjUwNCwiY2lwaGVyLWJhc2UiOjY5MiwiZHVwIjo1MTQsImV2cF9ieXRlc3Rva2V5Ijo2OTQsImluaGVyaXRzIjo3MDF9XSw2ODI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTE1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJkdXAiOjUxNX1dLDY4MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MTZdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiZHVwIjo1MTZ9XSw2ODQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTE3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlci14b3IiOjY5MSwiZHVwIjo1MTd9XSw2ODU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTE4XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJidWZmZXIteG9yIjo2OTEsImR1cCI6NTE4fV0sNjg2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUxOV1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiZHVwIjo1MTl9XSw2ODc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTIwXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJkdXAiOjUyMH1dLDY4ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MjFdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImJ1ZmZlci14b3IiOjY5MSwiZHVwIjo1MjF9XSw2ODk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTIyXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NTIyfV0sNjkwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUyM11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiYnVmZmVyLXhvciI6NjkxLCJkdXAiOjUyM31dLDY5MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs1MjRdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKQp9LHsiYnVmZmVyIjo1MDQsImR1cCI6NTI0fV0sNjkyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzQzMl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJidWZmZXIiOjUwNCwiZHVwIjo0MzIsImluaGVyaXRzIjo3MDEsInN0cmVhbSI6NzE5LCJzdHJpbmdfZGVjb2RlciI6NzIwfV0sNjkzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUyNl1bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyIuL2FlcyI6Njc3LCJidWZmZXIiOjUwNCwiY2lwaGVyLWJhc2UiOjY5MiwiZHVwIjo1MjYsImluaGVyaXRzIjo3MDF9XSw2OTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNTM3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImJ1ZmZlciI6NTA0LCJjcmVhdGUtaGFzaC9tZDUiOjYzNCwiZHVwIjo1Mzd9XSw2OTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBwYXJzZUtleXMgPSByZXF1aXJlKCdwYXJzZS1hc24xJyk7CnZhciBtZ2YgPSByZXF1aXJlKCcuL21nZicpOwp2YXIgeG9yID0gcmVxdWlyZSgnLi94b3InKTsKdmFyIGJuID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIGNydCA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktcnNhJyk7CnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKTsKdmFyIHdpdGhQdWJsaWMgPSByZXF1aXJlKCcuL3dpdGhQdWJsaWMnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwcml2YXRlRGVjcnlwdChwcml2YXRlX2tleSwgZW5jLCByZXZlcnNlKSB7CiAgdmFyIHBhZGRpbmc7CiAgaWYgKHByaXZhdGVfa2V5LnBhZGRpbmcpIHsKICAgIHBhZGRpbmcgPSBwcml2YXRlX2tleS5wYWRkaW5nOwogIH0gZWxzZSBpZiAocmV2ZXJzZSkgewogICAgcGFkZGluZyA9IDE7CiAgfSBlbHNlIHsKICAgIHBhZGRpbmcgPSA0OwogIH0KICAKICB2YXIga2V5ID0gcGFyc2VLZXlzKHByaXZhdGVfa2V5KTsKICB2YXIgayA9IGtleS5tb2R1bHVzLmJ5dGVMZW5ndGgoKTsKICBpZiAoZW5jLmxlbmd0aCA+IGsgfHwgbmV3IGJuKGVuYykuY21wKGtleS5tb2R1bHVzKSA+PSAwKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlY3J5cHRpb24gZXJyb3InKTsKICB9CiAgdmFyIG1zZzsKICBpZiAocmV2ZXJzZSkgewogICAgbXNnID0gd2l0aFB1YmxpYyhuZXcgYm4oZW5jKSwga2V5KTsKICB9IGVsc2UgewogICAgbXNnID0gY3J0KGVuYywga2V5KTsKICB9CiAgdmFyIHpCdWZmZXIgPSBuZXcgQnVmZmVyKGsgLSBtc2cubGVuZ3RoKTsKICB6QnVmZmVyLmZpbGwoMCk7CiAgbXNnID0gQnVmZmVyLmNvbmNhdChbekJ1ZmZlciwgbXNnXSwgayk7CiAgaWYgKHBhZGRpbmcgPT09IDQpIHsKICAgIHJldHVybiBvYWVwKGtleSwgbXNnKTsKICB9IGVsc2UgaWYgKHBhZGRpbmcgPT09IDEpIHsKICAgIHJldHVybiBwa2NzMShrZXksIG1zZywgcmV2ZXJzZSk7CiAgfSBlbHNlIGlmIChwYWRkaW5nID09PSAzKSB7CiAgICByZXR1cm4gbXNnOwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gcGFkZGluZycpOwogIH0KfTsKCmZ1bmN0aW9uIG9hZXAoa2V5LCBtc2cpewogIHZhciBuID0ga2V5Lm1vZHVsdXM7CiAgdmFyIGsgPSBrZXkubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogIHZhciBpSGFzaCA9IGNyZWF0ZUhhc2goJ3NoYTEnKS51cGRhdGUobmV3IEJ1ZmZlcignJykpLmRpZ2VzdCgpOwogIHZhciBoTGVuID0gaUhhc2gubGVuZ3RoOwogIHZhciBoTGVuMiA9IDIgKiBoTGVuOwogIGlmIChtc2dbMF0gIT09IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignZGVjcnlwdGlvbiBlcnJvcicpOwogIH0KICB2YXIgbWFza2VkU2VlZCA9IG1zZy5zbGljZSgxLCBoTGVuICsgMSk7CiAgdmFyIG1hc2tlZERiID0gIG1zZy5zbGljZShoTGVuICsgMSk7CiAgdmFyIHNlZWQgPSB4b3IobWFza2VkU2VlZCwgbWdmKG1hc2tlZERiLCBoTGVuKSk7CiAgdmFyIGRiID0geG9yKG1hc2tlZERiLCBtZ2Yoc2VlZCwgayAtIGhMZW4gLSAxKSk7CiAgaWYgKGNvbXBhcmUoaUhhc2gsIGRiLnNsaWNlKDAsIGhMZW4pKSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHZhciBpID0gaExlbjsKICB3aGlsZSAoZGJbaV0gPT09IDApIHsKICAgIGkrKzsKICB9CiAgaWYgKGRiW2krK10gIT09IDEpIHsKICAgIHRocm93IG5ldyBFcnJvcignZGVjcnlwdGlvbiBlcnJvcicpOwogIH0KICByZXR1cm4gZGIuc2xpY2UoaSk7Cn0KCmZ1bmN0aW9uIHBrY3MxKGtleSwgbXNnLCByZXZlcnNlKXsKICB2YXIgcDEgPSBtc2cuc2xpY2UoMCwgMik7CiAgdmFyIGkgPSAyOwogIHZhciBzdGF0dXMgPSAwOwogIHdoaWxlIChtc2dbaSsrXSAhPT0gMCkgewogICAgaWYgKGkgPj0gbXNnLmxlbmd0aCkgewogICAgICBzdGF0dXMrKzsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHZhciBwcyA9IG1zZy5zbGljZSgyLCBpIC0gMSk7CiAgdmFyIHAyID0gbXNnLnNsaWNlKGkgLSAxLCBpKTsKCiAgaWYgKChwMS50b1N0cmluZygnaGV4JykgIT09ICcwMDAyJyAmJiAhcmV2ZXJzZSkgfHwgKHAxLnRvU3RyaW5nKCdoZXgnKSAhPT0gJzAwMDEnICYmIHJldmVyc2UpKXsKICAgIHN0YXR1cysrOwogIH0KICBpZiAocHMubGVuZ3RoIDwgOCkgewogICAgc3RhdHVzKys7CiAgfQogIGlmIChzdGF0dXMpIHsKICAgIHRocm93IG5ldyBFcnJvcignZGVjcnlwdGlvbiBlcnJvcicpOwogIH0KICByZXR1cm4gIG1zZy5zbGljZShpKTsKfQpmdW5jdGlvbiBjb21wYXJlKGEsIGIpewogIGEgPSBuZXcgQnVmZmVyKGEpOwogIGIgPSBuZXcgQnVmZmVyKGIpOwogIHZhciBkaWYgPSAwOwogIHZhciBsZW4gPSBhLmxlbmd0aDsKICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7CiAgICBkaWYrKzsKICAgIGxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7CiAgfQogIHZhciBpID0gLTE7CiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgZGlmICs9IChhW2ldIF4gYltpXSk7CiAgfQogIHJldHVybiBkaWY7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vbWdmIjo2NTUsIi4vd2l0aFB1YmxpYyI6Njk3LCIuL3hvciI6Njk4LCJibi5qcyI6NjU2LCJicm93c2VyaWZ5LXJzYSI6NjU3LCJidWZmZXIiOjUwNCwiY3JlYXRlLWhhc2giOjYzMiwicGFyc2UtYXNuMSI6NjYxfV0sNjk2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgcGFyc2VLZXlzID0gcmVxdWlyZSgncGFyc2UtYXNuMScpOwp2YXIgcmFuZG9tQnl0ZXMgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpOwp2YXIgY3JlYXRlSGFzaCA9IHJlcXVpcmUoJ2NyZWF0ZS1oYXNoJyk7CnZhciBtZ2YgPSByZXF1aXJlKCcuL21nZicpOwp2YXIgeG9yID0gcmVxdWlyZSgnLi94b3InKTsKdmFyIGJuID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIHdpdGhQdWJsaWMgPSByZXF1aXJlKCcuL3dpdGhQdWJsaWMnKTsKdmFyIGNydCA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktcnNhJyk7Cgp2YXIgY29uc3RhbnRzID0gewogIFJTQV9QS0NTMV9PQUVQX1BBRERJTkc6IDQsCiAgUlNBX1BLQ1MxX1BBRERJTjogMSwKICBSU0FfTk9fUEFERElORzogMwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwdWJsaWNFbmNyeXB0KHB1YmxpY19rZXksIG1zZywgcmV2ZXJzZSkgewogIHZhciBwYWRkaW5nOwogIGlmIChwdWJsaWNfa2V5LnBhZGRpbmcpIHsKICAgIHBhZGRpbmcgPSBwdWJsaWNfa2V5LnBhZGRpbmc7CiAgfSBlbHNlIGlmIChyZXZlcnNlKSB7CiAgICBwYWRkaW5nID0gMTsKICB9IGVsc2UgewogICAgcGFkZGluZyA9IDQ7CiAgfQogIHZhciBrZXkgPSBwYXJzZUtleXMocHVibGljX2tleSk7CiAgdmFyIHBhZGRlZE1zZzsKICBpZiAocGFkZGluZyA9PT0gNCkgewogICAgcGFkZGVkTXNnID0gb2FlcChrZXksIG1zZyk7CiAgfSBlbHNlIGlmIChwYWRkaW5nID09PSAxKSB7CiAgICBwYWRkZWRNc2cgPSBwa2NzMShrZXksIG1zZywgcmV2ZXJzZSk7CiAgfSBlbHNlIGlmIChwYWRkaW5nID09PSAzKSB7CiAgICBwYWRkZWRNc2cgPSBuZXcgYm4obXNnKTsKICAgIGlmIChwYWRkZWRNc2cuY21wKGtleS5tb2R1bHVzKSA+PSAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignZGF0YSB0b28gbG9uZyBmb3IgbW9kdWx1cycpOwogICAgfQogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gcGFkZGluZycpOwogIH0KICBpZiAocmV2ZXJzZSkgewogICAgcmV0dXJuIGNydChwYWRkZWRNc2csIGtleSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiB3aXRoUHVibGljKHBhZGRlZE1zZywga2V5KTsKICB9Cn07CgpmdW5jdGlvbiBvYWVwKGtleSwgbXNnKXsKICB2YXIgayA9IGtleS5tb2R1bHVzLmJ5dGVMZW5ndGgoKTsKICB2YXIgbUxlbiA9IG1zZy5sZW5ndGg7CiAgdmFyIGlIYXNoID0gY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShuZXcgQnVmZmVyKCcnKSkuZGlnZXN0KCk7CiAgdmFyIGhMZW4gPSBpSGFzaC5sZW5ndGg7CiAgdmFyIGhMZW4yID0gMiAqIGhMZW47CiAgaWYgKG1MZW4gPiBrIC0gaExlbjIgLSAyKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ21lc3NhZ2UgdG9vIGxvbmcnKTsKICB9CiAgdmFyIHBzID0gbmV3IEJ1ZmZlcihrIC0gbUxlbiAtIGhMZW4yIC0gMik7CiAgcHMuZmlsbCgwKTsKICB2YXIgZGJsZW4gPSBrIC0gaExlbiAtIDE7CiAgdmFyIHNlZWQgPSByYW5kb21CeXRlcyhoTGVuKTsKICB2YXIgbWFza2VkRGIgPSB4b3IoQnVmZmVyLmNvbmNhdChbaUhhc2gsIHBzLCBuZXcgQnVmZmVyKFsxXSksIG1zZ10sIGRibGVuKSwgbWdmKHNlZWQsIGRibGVuKSk7CiAgdmFyIG1hc2tlZFNlZWQgPSB4b3Ioc2VlZCwgbWdmKG1hc2tlZERiLCBoTGVuKSk7CiAgcmV0dXJuIG5ldyBibihCdWZmZXIuY29uY2F0KFtuZXcgQnVmZmVyKFswXSksIG1hc2tlZFNlZWQsIG1hc2tlZERiXSwgaykpOwp9CmZ1bmN0aW9uIHBrY3MxKGtleSwgbXNnLCByZXZlcnNlKXsKICB2YXIgbUxlbiA9IG1zZy5sZW5ndGg7CiAgdmFyIGsgPSBrZXkubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgaWYgKG1MZW4gPiBrIC0gMTEpIHsKICAgIHRocm93IG5ldyBFcnJvcignbWVzc2FnZSB0b28gbG9uZycpOwogIH0KICB2YXIgcHM7CiAgaWYgKHJldmVyc2UpIHsKICAgIHBzID0gbmV3IEJ1ZmZlcihrIC0gbUxlbiAtIDMpOwogICAgcHMuZmlsbCgweGZmKTsKICB9IGVsc2UgewogICAgcHMgPSBub25aZXJvKGsgLSBtTGVuIC0gMyk7CiAgfQogIHJldHVybiBuZXcgYm4oQnVmZmVyLmNvbmNhdChbbmV3IEJ1ZmZlcihbMCwgcmV2ZXJzZT8xOjJdKSwgcHMsIG5ldyBCdWZmZXIoWzBdKSwgbXNnXSwgaykpOwp9CmZ1bmN0aW9uIG5vblplcm8obGVuLCBjcnlwdG8pIHsKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcihsZW4pOwogIHZhciBpID0gMDsKICB2YXIgY2FjaGUgPSByYW5kb21CeXRlcyhsZW4qMik7CiAgdmFyIGN1ciA9IDA7CiAgdmFyIG51bTsKICB3aGlsZSAoaSA8IGxlbikgewogICAgaWYgKGN1ciA9PT0gY2FjaGUubGVuZ3RoKSB7CiAgICAgIGNhY2hlID0gcmFuZG9tQnl0ZXMobGVuKjIpOwogICAgICBjdXIgPSAwOwogICAgfQogICAgbnVtID0gY2FjaGVbY3VyKytdOwogICAgaWYgKG51bSkgewogICAgICBvdXRbaSsrXSA9IG51bTsKICAgIH0KICB9CiAgcmV0dXJuIG91dDsKfQp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9tZ2YiOjY1NSwiLi93aXRoUHVibGljIjo2OTcsIi4veG9yIjo2OTgsImJuLmpzIjo2NTYsImJyb3dzZXJpZnktcnNhIjo2NTcsImJ1ZmZlciI6NTA0LCJjcmVhdGUtaGFzaCI6NjMyLCJwYXJzZS1hc24xIjo2NjEsInJhbmRvbWJ5dGVzIjo2OTl9XSw2OTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBibiA9IHJlcXVpcmUoJ2JuLmpzJyk7CmZ1bmN0aW9uIHdpdGhQdWJsaWMocGFkZGVkTXNnLCBrZXkpIHsKICByZXR1cm4gbmV3IEJ1ZmZlcihwYWRkZWRNc2cKICAgIC50b1JlZChibi5tb250KGtleS5tb2R1bHVzKSkKICAgIC5yZWRQb3cobmV3IGJuKGtleS5wdWJsaWNFeHBvbmVudCkpCiAgICAuZnJvbVJlZCgpCiAgICAudG9BcnJheSgpKTsKfQoKbW9kdWxlLmV4cG9ydHMgPSB3aXRoUHVibGljOwp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYm4uanMiOjY1NiwiYnVmZmVyIjo1MDR9XSw2OTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhvcihhLCBiKSB7CiAgdmFyIGxlbiA9IGEubGVuZ3RoOwogIHZhciBpID0gLTE7CiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgYVtpXSBePSBiW2ldOwogIH0KICByZXR1cm4gYQp9Owp9LHt9XSw2OTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDQ2XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7Il9wcm9jZXNzIjo3MDMsImJ1ZmZlciI6NTA0LCJkdXAiOjQ0Nn1dLDcwMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHsKICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307CiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDsKfQptb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjsKCi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueApFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyOwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkOwpFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7CgovLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmUKLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy4KRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDsKCi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93cwovLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC4KRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7CiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSkKICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7CiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjsKICByZXR1cm4gdGhpczsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwoKICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuCiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHsKICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8CiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7CiAgICAgIGVyID0gYXJndW1lbnRzWzFdOwogICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudAogICAgICB9IGVsc2UgewogICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXIKICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgImVycm9yIiBldmVudC4gKCcgKyBlciArICcpJyk7CiAgICAgICAgZXJyLmNvbnRleHQgPSBlcjsKICAgICAgICB0aHJvdyBlcnI7CiAgICAgIH0KICAgIH0KICB9CgogIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07CgogIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSkKICAgIHJldHVybiBmYWxzZTsKCiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHsKICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAvLyBmYXN0IGNhc2VzCiAgICAgIGNhc2UgMToKICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMjoKICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAzOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIC8vIHNsb3dlcgogICAgICBkZWZhdWx0OgogICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7CiAgICB9CiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkgewogICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7CiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoOwogICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7CiAgfQoKICByZXR1cm4gdHJ1ZTsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewogIHZhciBtOwoKICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKQogICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTsKCiAgaWYgKCF0aGlzLl9ldmVudHMpCiAgICB0aGlzLl9ldmVudHMgPSB7fTsKCiAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gIm5ld0xpc3RlbmVyIiEgQmVmb3JlCiAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgIm5ld0xpc3RlbmVyIi4KICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKQogICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsCiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgPwogICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpOwoKICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSkKICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LgogICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7CiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSkKICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC4KICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICBlbHNlCiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS4KICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTsKCiAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWsKICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkgewogICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7CiAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7CiAgICB9IGVsc2UgewogICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7CiAgICB9CgogICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHsKICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7CiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgKwogICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgKwogICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpOwogICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwCiAgICAgICAgY29uc29sZS50cmFjZSgpOwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gdGhpczsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyOwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKQogICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTsKCiAgdmFyIGZpcmVkID0gZmFsc2U7CgogIGZ1bmN0aW9uIGcoKSB7CiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpOwoKICAgIGlmICghZmlyZWQpIHsKICAgICAgZmlyZWQgPSB0cnVlOwogICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQogIH0KCiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyOwogIHRoaXMub24odHlwZSwgZyk7CgogIHJldHVybiB0aGlzOwp9OwoKLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7CiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7CgogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKQogICAgcmV0dXJuIHRoaXM7CgogIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07CiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7CiAgcG9zaXRpb24gPSAtMTsKCiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8CiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkgewogICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpCiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7CgogIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHsKICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHsKICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8CiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHsKICAgICAgICBwb3NpdGlvbiA9IGk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICBpZiAocG9zaXRpb24gPCAwKQogICAgICByZXR1cm4gdGhpczsKCiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHsKICAgICAgbGlzdC5sZW5ndGggPSAwOwogICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwogICAgfSBlbHNlIHsKICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpOwogICAgfQoKICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpCiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7CiAgfQoKICByZXR1cm4gdGhpczsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkgewogIHZhciBrZXksIGxpc3RlbmVyczsKCiAgaWYgKCF0aGlzLl9ldmVudHMpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdAogIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkKICAgICAgdGhpcy5fZXZlbnRzID0ge307CiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pCiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50cwogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHsKICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7CiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7CiAgICB9CiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTsKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07CgogIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHsKICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTsKICB9IGVsc2UgaWYgKGxpc3RlbmVycykgewogICAgLy8gTElGTyBvcmRlcgogICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpCiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7CiAgfQogIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7CiAgdmFyIHJldDsKICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKQogICAgcmV0ID0gW107CiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKQogICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07CiAgZWxzZQogICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7CiAgcmV0dXJuIHJldDsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHsKICBpZiAodGhpcy5fZXZlbnRzKSB7CiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSkKICAgICAgcmV0dXJuIDE7CiAgICBlbHNlIGlmIChldmxpc3RlbmVyKQogICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7CiAgfQogIHJldHVybiAwOwp9OwoKRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7CiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTsKfTsKCmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7Cn0KCmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJzsKfQoKZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDsKfQoKZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwOwp9Cgp9LHt9XSw3MDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewphcmd1bWVudHNbNF1bNDMzXVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cykKfSx7ImR1cCI6NDMzfV0sNzAyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoqCiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaXMgQnVmZmVyCiAqCiAqIEF1dGhvcjogICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPgogKiBMaWNlbnNlOiAgTUlUCiAqCiAqIGBucG0gaW5zdGFsbCBpcy1idWZmZXJgCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7CiAgcmV0dXJuICEhKG9iaiAhPSBudWxsICYmCiAgICAob2JqLl9pc0J1ZmZlciB8fCAvLyBGb3IgU2FmYXJpIDUtNyAobWlzc2luZyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yKQogICAgICAob2JqLmNvbnN0cnVjdG9yICYmCiAgICAgIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYKICAgICAgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iaikpCiAgICApKQp9Cgp9LHt9XSw3MDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXIKCnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTsKCi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdAovLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXMKLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYQovLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLgoKdmFyIGNhY2hlZFNldFRpbWVvdXQ7CnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7CgooZnVuY3Rpb24gKCkgewogIHRyeSB7CiAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDsKICB9IGNhdGNoIChlKSB7CiAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTsKICAgIH0KICB9CiAgdHJ5IHsKICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDsKICB9IGNhdGNoIChlKSB7CiAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGlzIG5vdCBkZWZpbmVkJyk7CiAgICB9CiAgfQp9ICgpKQp2YXIgcXVldWUgPSBbXTsKdmFyIGRyYWluaW5nID0gZmFsc2U7CnZhciBjdXJyZW50UXVldWU7CnZhciBxdWV1ZUluZGV4ID0gLTE7CgpmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7CiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBkcmFpbmluZyA9IGZhbHNlOwogICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHsKICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpOwogICAgfSBlbHNlIHsKICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CiAgICB9CiAgICBpZiAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgZHJhaW5RdWV1ZSgpOwogICAgfQp9CgpmdW5jdGlvbiBkcmFpblF1ZXVlKCkgewogICAgaWYgKGRyYWluaW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIHRpbWVvdXQgPSBjYWNoZWRTZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7CiAgICBkcmFpbmluZyA9IHRydWU7CgogICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDsKICAgIHdoaWxlKGxlbikgewogICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlOwogICAgICAgIHF1ZXVlID0gW107CiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikgewogICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcXVldWVJbmRleCA9IC0xOwogICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDsKICAgIH0KICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7CiAgICBkcmFpbmluZyA9IGZhbHNlOwogICAgY2FjaGVkQ2xlYXJUaW1lb3V0KHRpbWVvdXQpOwp9Cgpwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikgewogICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07CiAgICAgICAgfQogICAgfQogICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTsKICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7CiAgICAgICAgY2FjaGVkU2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTsKICAgIH0KfTsKCi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHMKZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7CiAgICB0aGlzLmZ1biA9IGZ1bjsKICAgIHRoaXMuYXJyYXkgPSBhcnJheTsKfQpJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTsKfTsKcHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJzsKcHJvY2Vzcy5icm93c2VyID0gdHJ1ZTsKcHJvY2Vzcy5lbnYgPSB7fTsKcHJvY2Vzcy5hcmd2ID0gW107CnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlcwpwcm9jZXNzLnZlcnNpb25zID0ge307CgpmdW5jdGlvbiBub29wKCkge30KCnByb2Nlc3Mub24gPSBub29wOwpwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDsKcHJvY2Vzcy5vbmNlID0gbm9vcDsKcHJvY2Vzcy5vZmYgPSBub29wOwpwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDsKcHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wOwpwcm9jZXNzLmVtaXQgPSBub29wOwoKcHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTsKfTsKCnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07CnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpOwp9Owpwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9OwoKfSx7fV0sNzA0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCIuL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIpCgp9LHsiLi9saWIvX3N0cmVhbV9kdXBsZXguanMiOjcwNX1dLDcwNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGEgZHVwbGV4IHN0cmVhbSBpcyBqdXN0IGEgc3RyZWFtIHRoYXQgaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuCi8vIFNpbmNlIEpTIGRvZXNuJ3QgaGF2ZSBtdWx0aXBsZSBwcm90b3R5cGFsIGluaGVyaXRhbmNlLCB0aGlzIGNsYXNzCi8vIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFJlYWRhYmxlLCBhbmQgdGhlbiBwYXJhc2l0aWNhbGx5IGZyb20KLy8gV3JpdGFibGUuCgondXNlIHN0cmljdCc7CgovKjxyZXBsYWNlbWVudD4qLwoKdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7CiAgdmFyIGtleXMgPSBbXTsKICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICBrZXlzLnB1c2goa2V5KTsKICB9cmV0dXJuIGtleXM7Cn07Ci8qPC9yZXBsYWNlbWVudD4qLwoKbW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTsKLyo8L3JlcGxhY2VtZW50PiovCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpOwp1dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKLyo8L3JlcGxhY2VtZW50PiovCgp2YXIgUmVhZGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fcmVhZGFibGUnKTsKdmFyIFdyaXRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3dyaXRhYmxlJyk7Cgp1dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpOwoKdmFyIGtleXMgPSBvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSk7CmZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykgewogIHZhciBtZXRob2QgPSBrZXlzW3ZdOwogIGlmICghRHVwbGV4LnByb3RvdHlwZVttZXRob2RdKSBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTsKfQoKZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7CgogIFJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWFkYWJsZSA9PT0gZmFsc2UpIHRoaXMucmVhZGFibGUgPSBmYWxzZTsKCiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy53cml0YWJsZSA9PT0gZmFsc2UpIHRoaXMud3JpdGFibGUgPSBmYWxzZTsKCiAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTsKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93SGFsZk9wZW4gPT09IGZhbHNlKSB0aGlzLmFsbG93SGFsZk9wZW4gPSBmYWxzZTsKCiAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7Cn0KCi8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXIKZnVuY3Rpb24gb25lbmQoKSB7CiAgLy8gaWYgd2UgYWxsb3cgaGFsZi1vcGVuIHN0YXRlLCBvciBpZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCwKICAvLyB0aGVuIHdlJ3JlIG9rLgogIGlmICh0aGlzLmFsbG93SGFsZk9wZW4gfHwgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCkgcmV0dXJuOwoKICAvLyBubyBtb3JlIGRhdGEgY2FuIGJlIHdyaXR0ZW4uCiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suCiAgcHJvY2Vzc05leHRUaWNrKG9uRW5kTlQsIHRoaXMpOwp9CgpmdW5jdGlvbiBvbkVuZE5UKHNlbGYpIHsKICBzZWxmLmVuZCgpOwp9CgpmdW5jdGlvbiBmb3JFYWNoKHhzLCBmKSB7CiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGYoeHNbaV0sIGkpOwogIH0KfQp9LHsiLi9fc3RyZWFtX3JlYWRhYmxlIjo3MDcsIi4vX3N0cmVhbV93cml0YWJsZSI6NzA5LCJjb3JlLXV0aWwtaXMiOjcxMSwiaW5oZXJpdHMiOjcwMSwicHJvY2Vzcy1uZXh0aWNrLWFyZ3MiOjcxM31dLDcwNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGEgcGFzc3Rocm91Z2ggc3RyZWFtLgovLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS4KLy8gRXZlcnkgd3JpdHRlbiBjaHVuayBnZXRzIG91dHB1dCBhcy1pcy4KCid1c2Ugc3RyaWN0JzsKCm1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7Cgp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9fc3RyZWFtX3RyYW5zZm9ybScpOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTsKdXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKdXRpbC5pbmhlcml0cyhQYXNzVGhyb3VnaCwgVHJhbnNmb3JtKTsKCmZ1bmN0aW9uIFBhc3NUaHJvdWdoKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGFzc1Rocm91Z2gpKSByZXR1cm4gbmV3IFBhc3NUaHJvdWdoKG9wdGlvbnMpOwoKICBUcmFuc2Zvcm0uY2FsbCh0aGlzLCBvcHRpb25zKTsKfQoKUGFzc1Rocm91Z2gucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogIGNiKG51bGwsIGNodW5rKTsKfTsKfSx7Ii4vX3N0cmVhbV90cmFuc2Zvcm0iOjcwOCwiY29yZS11dGlsLWlzIjo3MTEsImluaGVyaXRzIjo3MDF9XSw3MDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MpewondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHByb2Nlc3NOZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cgp2YXIgRUVsaXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gKGVtaXR0ZXIsIHR5cGUpIHsKICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoOwp9OwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBTdHJlYW07CihmdW5jdGlvbiAoKSB7CiAgdHJ5IHsKICAgIFN0cmVhbSA9IHJlcXVpcmUoJ3N0JyArICdyZWFtJyk7CiAgfSBjYXRjaCAoXykge30gZmluYWxseSB7CiAgICBpZiAoIVN0cmVhbSkgU3RyZWFtID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyOwogIH0KfSkoKTsKLyo8L3JlcGxhY2VtZW50PiovCgp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwovKjxyZXBsYWNlbWVudD4qLwp2YXIgYnVmZmVyU2hpbSA9IHJlcXVpcmUoJ2J1ZmZlci1zaGltcycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBkZWJ1Z1V0aWwgPSByZXF1aXJlKCd1dGlsJyk7CnZhciBkZWJ1ZyA9IHZvaWQgMDsKaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHsKICBkZWJ1ZyA9IGRlYnVnVXRpbC5kZWJ1Z2xvZygnc3RyZWFtJyk7Cn0gZWxzZSB7CiAgZGVidWcgPSBmdW5jdGlvbiAoKSB7fTsKfQovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBTdHJpbmdEZWNvZGVyOwoKdXRpbC5pbmhlcml0cyhSZWFkYWJsZSwgU3RyZWFtKTsKCnZhciBoYXNQcmVwZW5kTGlzdGVuZXIgPSB0eXBlb2YgRUUucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJzsKCmZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4pIHsKICBpZiAoaGFzUHJlcGVuZExpc3RlbmVyKSByZXR1cm4gZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIoZXZlbnQsIGZuKTsKCiAgLy8gVGhpcyBpcyBhIGJydXRhbGx5IHVnbHkgaGFjayB0byBtYWtlIHN1cmUgdGhhdCBvdXIgZXJyb3IgaGFuZGxlcgogIC8vIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnkgdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuIFRoaXMgaXMgaGVyZQogIC8vIG9ubHkgYmVjYXVzZSB0aGlzIGNvZGUgbmVlZHMgdG8gY29udGludWUgdG8gd29yayB3aXRoIG9sZGVyIHZlcnNpb25zCiAgLy8gb2YgTm9kZS5qcyB0aGF0IGRvIG5vdCBpbmNsdWRlIHRoZSBwcmVwZW5kTGlzdGVuZXIoKSBtZXRob2QuIFRoZSBnb2FsCiAgLy8gaXMgdG8gZXZlbnR1YWxseSByZW1vdmUgdGhpcyBoYWNrLgogIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSBlbWl0dGVyLm9uKGV2ZW50LCBmbik7ZWxzZSBpZiAoaXNBcnJheShlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSkgZW1pdHRlci5fZXZlbnRzW2V2ZW50XS51bnNoaWZ0KGZuKTtlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0gPSBbZm4sIGVtaXR0ZXIuX2V2ZW50c1tldmVudF1dOwp9Cgp2YXIgRHVwbGV4OwpmdW5jdGlvbiBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0bwogIC8vIG1ha2UgYWxsIHRoZSBidWZmZXIgbWVyZ2luZyBhbmQgbGVuZ3RoIGNoZWNrcyBnbyBhd2F5CiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7CgogIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlOwoKICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggaXQgc3RvcHMgY2FsbGluZyBfcmVhZCgpIHRvIGZpbGwgdGhlIGJ1ZmZlcgogIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgImRvbid0IGNhbGwgX3JlYWQgcHJlZW1wdGl2ZWx5IGV2ZXIiCiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyazsKICB2YXIgZGVmYXVsdEh3bSA9IHRoaXMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0OwogIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bSB8fCBod20gPT09IDAgPyBod20gOiBkZWZhdWx0SHdtOwoKICAvLyBjYXN0IHRvIGludHMuCiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gfiB+dGhpcy5oaWdoV2F0ZXJNYXJrOwoKICB0aGlzLmJ1ZmZlciA9IFtdOwogIHRoaXMubGVuZ3RoID0gMDsKICB0aGlzLnBpcGVzID0gbnVsbDsKICB0aGlzLnBpcGVzQ291bnQgPSAwOwogIHRoaXMuZmxvd2luZyA9IG51bGw7CiAgdGhpcy5lbmRlZCA9IGZhbHNlOwogIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlOwogIHRoaXMucmVhZGluZyA9IGZhbHNlOwoKICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSwKICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueQogIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsICJsYXRlciIgc2hvdWxkIGdlbmVyYWxseSBhbHNvCiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuCiAgdGhpcy5zeW5jID0gdHJ1ZTsKCiAgLy8gd2hlbmV2ZXIgd2UgcmV0dXJuIG51bGwsIHRoZW4gd2Ugc2V0IGEgZmxhZyB0byBzYXkKICAvLyB0aGF0IHdlJ3JlIGF3YWl0aW5nIGEgJ3JlYWRhYmxlJyBldmVudCBlbWlzc2lvbi4KICB0aGlzLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwogIHRoaXMuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CiAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlOwogIHRoaXMucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7CgogIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmcKICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuCiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLgogIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnOwoKICAvLyB3aGVuIHBpcGluZywgd2Ugb25seSBjYXJlIGFib3V0ICdyZWFkYWJsZScgZXZlbnRzIHRoYXQgaGFwcGVuCiAgLy8gYWZ0ZXIgcmVhZCgpaW5nIGFsbCB0aGUgYnl0ZXMgYW5kIG5vdCBnZXR0aW5nIGFueSBwdXNoYmFjay4KICB0aGlzLnJhbk91dCA9IGZhbHNlOwoKICAvLyB0aGUgbnVtYmVyIG9mIHdyaXRlcnMgdGhhdCBhcmUgYXdhaXRpbmcgYSBkcmFpbiBldmVudCBpbiAucGlwZSgpcwogIHRoaXMuYXdhaXREcmFpbiA9IDA7CgogIC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWQKICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7CgogIHRoaXMuZGVjb2RlciA9IG51bGw7CiAgdGhpcy5lbmNvZGluZyA9IG51bGw7CiAgaWYgKG9wdGlvbnMuZW5jb2RpbmcpIHsKICAgIGlmICghU3RyaW5nRGVjb2RlcikgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7CiAgICB0aGlzLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTsKICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nOwogIH0KfQoKdmFyIER1cGxleDsKZnVuY3Rpb24gUmVhZGFibGUob3B0aW9ucykgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpIHJldHVybiBuZXcgUmVhZGFibGUob3B0aW9ucyk7CgogIHRoaXMuX3JlYWRhYmxlU3RhdGUgPSBuZXcgUmVhZGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTsKCiAgLy8gbGVnYWN5CiAgdGhpcy5yZWFkYWJsZSA9IHRydWU7CgogIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICdmdW5jdGlvbicpIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7CgogIFN0cmVhbS5jYWxsKHRoaXMpOwp9CgovLyBNYW51YWxseSBzaG92ZSBzb21ldGhpbmcgaW50byB0aGUgcmVhZCgpIGJ1ZmZlci4KLy8gVGhpcyByZXR1cm5zIHRydWUgaWYgdGhlIGhpZ2hXYXRlck1hcmsgaGFzIG5vdCBiZWVuIGhpdCB5ZXQsCi8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGQKLy8gd3JpdGUoKSBzb21lIG1vcmUuClJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgogIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7CiAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZzsKICAgIGlmIChlbmNvZGluZyAhPT0gc3RhdGUuZW5jb2RpbmcpIHsKICAgICAgY2h1bmsgPSBidWZmZXJTaGltLmZyb20oY2h1bmssIGVuY29kaW5nKTsKICAgICAgZW5jb2RpbmcgPSAnJzsKICAgIH0KICB9CgogIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlKTsKfTsKCi8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpClJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssICcnLCB0cnVlKTsKfTsKClJlYWRhYmxlLnByb3RvdHlwZS5pc1BhdXNlZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTsKfTsKCmZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250KSB7CiAgdmFyIGVyID0gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuayk7CiAgaWYgKGVyKSB7CiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgfSBlbHNlIGlmIChjaHVuayA9PT0gbnVsbCkgewogICAgc3RhdGUucmVhZGluZyA9IGZhbHNlOwogICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTsKICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkgewogICAgaWYgKHN0YXRlLmVuZGVkICYmICFhZGRUb0Zyb250KSB7CiAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpOwogICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlKTsKICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kRW1pdHRlZCAmJiBhZGRUb0Zyb250KSB7CiAgICAgIHZhciBfZSA9IG5ldyBFcnJvcignc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKTsKICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgX2UpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHNraXBBZGQ7CiAgICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFhZGRUb0Zyb250ICYmICFlbmNvZGluZykgewogICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7CiAgICAgICAgc2tpcEFkZCA9ICFzdGF0ZS5vYmplY3RNb2RlICYmIGNodW5rLmxlbmd0aCA9PT0gMDsKICAgICAgfQoKICAgICAgaWYgKCFhZGRUb0Zyb250KSBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7CgogICAgICAvLyBEb24ndCBhZGQgdG8gdGhlIGJ1ZmZlciBpZiB3ZSd2ZSBkZWNvZGVkIHRvIGFuIGVtcHR5IHN0cmluZyBjaHVuayBhbmQKICAgICAgLy8gd2UncmUgbm90IGluIG9iamVjdCBtb2RlCiAgICAgIGlmICghc2tpcEFkZCkgewogICAgICAgIC8vIGlmIHdlIHdhbnQgdGhlIGRhdGEgbm93LCBqdXN0IGVtaXQgaXQuCiAgICAgICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5zeW5jKSB7CiAgICAgICAgICBzdHJlYW0uZW1pdCgnZGF0YScsIGNodW5rKTsKICAgICAgICAgIHN0cmVhbS5yZWFkKDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyB1cGRhdGUgdGhlIGJ1ZmZlciBpbmZvLgogICAgICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwogICAgICAgICAgaWYgKGFkZFRvRnJvbnQpIHN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTtlbHNlIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTsKCiAgICAgICAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKSBlbWl0UmVhZGFibGUoc3RyZWFtKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7CiAgICB9CiAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkgewogICAgc3RhdGUucmVhZGluZyA9IGZhbHNlOwogIH0KCiAgcmV0dXJuIG5lZWRNb3JlRGF0YShzdGF0ZSk7Cn0KCi8vIGlmIGl0J3MgcGFzdCB0aGUgaGlnaCB3YXRlciBtYXJrLCB3ZSBjYW4gcHVzaCBpbiBzb21lIG1vcmUuCi8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lCi8vIG1vcmUgYnl0ZXMuICBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLAovLyBzdWNoIGFzIHRoZSByZXBsLiAgQWxzbywgaWYgdGhlIHB1c2goKSB0cmlnZ2VyZWQgYQovLyByZWFkYWJsZSBldmVudCwgYW5kIHRoZSB1c2VyIGNhbGxlZCByZWFkKGxhcmdlTnVtYmVyKSBzdWNoIHRoYXQKLy8gbmVlZFJlYWRhYmxlIHdhcyBzZXQsIHRoZW4gd2Ugb3VnaHQgdG8gcHVzaCBtb3JlLCBzbyB0aGF0IGFub3RoZXIKLy8gJ3JlYWRhYmxlJyBldmVudCB3aWxsIGJlIHRyaWdnZXJlZC4KZnVuY3Rpb24gbmVlZE1vcmVEYXRhKHN0YXRlKSB7CiAgcmV0dXJuICFzdGF0ZS5lbmRlZCAmJiAoc3RhdGUubmVlZFJlYWRhYmxlIHx8IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUubGVuZ3RoID09PSAwKTsKfQoKLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuClJlYWRhYmxlLnByb3RvdHlwZS5zZXRFbmNvZGluZyA9IGZ1bmN0aW9uIChlbmMpIHsKICBpZiAoIVN0cmluZ0RlY29kZXIpIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyOwogIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7CiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmNvZGluZyA9IGVuYzsKICByZXR1cm4gdGhpczsKfTsKCi8vIERvbid0IHJhaXNlIHRoZSBod20gPiA4TUIKdmFyIE1BWF9IV00gPSAweDgwMDAwMDsKZnVuY3Rpb24gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobikgewogIGlmIChuID49IE1BWF9IV00pIHsKICAgIG4gPSBNQVhfSFdNOwogIH0gZWxzZSB7CiAgICAvLyBHZXQgdGhlIG5leHQgaGlnaGVzdCBwb3dlciBvZiAyCiAgICBuLS07CiAgICBuIHw9IG4gPj4+IDE7CiAgICBuIHw9IG4gPj4+IDI7CiAgICBuIHw9IG4gPj4+IDQ7CiAgICBuIHw9IG4gPj4+IDg7CiAgICBuIHw9IG4gPj4+IDE2OwogICAgbisrOwogIH0KICByZXR1cm4gbjsKfQoKZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkgewogIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpIHJldHVybiAwOwoKICBpZiAoc3RhdGUub2JqZWN0TW9kZSkgcmV0dXJuIG4gPT09IDAgPyAwIDogMTsKCiAgaWYgKG4gPT09IG51bGwgfHwgaXNOYU4obikpIHsKICAgIC8vIG9ubHkgZmxvdyBvbmUgYnVmZmVyIGF0IGEgdGltZQogICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUuYnVmZmVyLmxlbmd0aCkgcmV0dXJuIHN0YXRlLmJ1ZmZlclswXS5sZW5ndGg7ZWxzZSByZXR1cm4gc3RhdGUubGVuZ3RoOwogIH0KCiAgaWYgKG4gPD0gMCkgcmV0dXJuIDA7CgogIC8vIElmIHdlJ3JlIGFza2luZyBmb3IgbW9yZSB0aGFuIHRoZSB0YXJnZXQgYnVmZmVyIGxldmVsLAogIC8vIHRoZW4gcmFpc2UgdGhlIHdhdGVyIG1hcmsuICBCdW1wIHVwIHRvIHRoZSBuZXh0IGhpZ2hlc3QKICAvLyBwb3dlciBvZiAyLCB0byBwcmV2ZW50IGluY3JlYXNpbmcgaXQgZXhjZXNzaXZlbHkgaW4gdGlueQogIC8vIGFtb3VudHMuCiAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSBzdGF0ZS5oaWdoV2F0ZXJNYXJrID0gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobik7CgogIC8vIGRvbid0IGhhdmUgdGhhdCBtdWNoLiAgcmV0dXJuIG51bGwsIHVubGVzcyB3ZSd2ZSBlbmRlZC4KICBpZiAobiA+IHN0YXRlLmxlbmd0aCkgewogICAgaWYgKCFzdGF0ZS5lbmRlZCkgewogICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgICByZXR1cm4gMDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7CiAgICB9CiAgfQoKICByZXR1cm4gbjsKfQoKLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy4KUmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAobikgewogIGRlYnVnKCdyZWFkJywgbik7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICB2YXIgbk9yaWcgPSBuOwoKICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPiAwKSBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKCiAgLy8gaWYgd2UncmUgZG9pbmcgcmVhZCgwKSB0byB0cmlnZ2VyIGEgcmVhZGFibGUgZXZlbnQsIGJ1dCB3ZQogIC8vIGFscmVhZHkgaGF2ZSBhIGJ1bmNoIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlciwgdGhlbiBqdXN0IHRyaWdnZXIKICAvLyB0aGUgJ3JlYWRhYmxlJyBldmVudCBhbmQgbW92ZSBvbi4KICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5uZWVkUmVhZGFibGUgJiYgKHN0YXRlLmxlbmd0aCA+PSBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmVuZGVkKSkgewogICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpOwogICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7ZWxzZSBlbWl0UmVhZGFibGUodGhpcyk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTsKCiAgLy8gaWYgd2UndmUgZW5kZWQsIGFuZCB3ZSdyZSBub3cgY2xlYXIsIHRoZW4gZmluaXNoIGl0IHVwLgogIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7CiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBlbmRSZWFkYWJsZSh0aGlzKTsKICAgIHJldHVybiBudWxsOwogIH0KCiAgLy8gQWxsIHRoZSBhY3R1YWwgY2h1bmsgZ2VuZXJhdGlvbiBsb2dpYyBuZWVkcyB0byBiZQogIC8vICpiZWxvdyogdGhlIGNhbGwgdG8gX3JlYWQuICBUaGUgcmVhc29uIGlzIHRoYXQgaW4gY2VydGFpbgogIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWQKICAvLyBtYXkgYmUgYSBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aGljaCBtYXkgY2hhbmdlCiAgLy8gdGhlIHN0YXRlIG9mIHRoZSByZWFkIGJ1ZmZlciwgcHJvdmlkaW5nIGVub3VnaCBkYXRhIHdoZW4KICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC4KICAvLwogIC8vIFNvLCB0aGUgc3RlcHMgYXJlOgogIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG8KICAvLyBhIHJlYWQgZnJvbSB0aGUgYnVmZmVyLgogIC8vCiAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC4KICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgYmUgYXN5bmNocm9ub3VzLCBvciBzeW5jaHJvbm91cy4gIFllcywgaXQgaXMKICAvLyBkZWVwbHkgdWdseSB0byB3cml0ZSBBUElzIHRoaXMgd2F5LCBidXQgdGhhdCBzdGlsbCBkb2Vzbid0IG1lYW4KICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlCiAgLy8gZGVzaWduZWQgdG8gYmUgc3luYy9hc3luYyBhZ25vc3RpYy4KICAvLyBUYWtlIG5vdGUgaWYgdGhlIF9yZWFkIGNhbGwgaXMgc3luYyBvciBhc3luYyAoaWUsIGlmIHRoZSByZWFkIGNhbGwKICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0CiAgLy8gJ3JlYWRhYmxlJyBldGMuCiAgLy8KICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uCgogIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy4KICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlOwogIGRlYnVnKCduZWVkIHJlYWRhYmxlJywgZG9SZWFkKTsKCiAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lCiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZS5sZW5ndGggLSBuIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykgewogICAgZG9SZWFkID0gdHJ1ZTsKICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7CiAgfQoKICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeQogIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS4KICBpZiAoc3RhdGUuZW5kZWQgfHwgc3RhdGUucmVhZGluZykgewogICAgZG9SZWFkID0gZmFsc2U7CiAgICBkZWJ1ZygncmVhZGluZyBvciBlbmRlZCcsIGRvUmVhZCk7CiAgfQoKICBpZiAoZG9SZWFkKSB7CiAgICBkZWJ1ZygnZG8gcmVhZCcpOwogICAgc3RhdGUucmVhZGluZyA9IHRydWU7CiAgICBzdGF0ZS5zeW5jID0gdHJ1ZTsKICAgIC8vIGlmIHRoZSBsZW5ndGggaXMgY3VycmVudGx5IHplcm8sIHRoZW4gd2UgKm5lZWQqIGEgcmVhZGFibGUgZXZlbnQuCiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgLy8gY2FsbCBpbnRlcm5hbCByZWFkIG1ldGhvZAogICAgdGhpcy5fcmVhZChzdGF0ZS5oaWdoV2F0ZXJNYXJrKTsKICAgIHN0YXRlLnN5bmMgPSBmYWxzZTsKICB9CgogIC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsCiAgLy8gYW5kIHdlIG5lZWQgdG8gcmUtZXZhbHVhdGUgaG93IG11Y2ggZGF0YSB3ZSBjYW4gcmV0dXJuIHRvIHRoZSB1c2VyLgogIGlmIChkb1JlYWQgJiYgIXN0YXRlLnJlYWRpbmcpIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7CgogIHZhciByZXQ7CiAgaWYgKG4gPiAwKSByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7ZWxzZSByZXQgPSBudWxsOwoKICBpZiAocmV0ID09PSBudWxsKSB7CiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgbiA9IDA7CiAgfQoKICBzdGF0ZS5sZW5ndGggLT0gbjsKCiAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93CiAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLgogIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLmVuZGVkKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwoKICAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suCiAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkgZW5kUmVhZGFibGUodGhpcyk7CgogIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7CgogIHJldHVybiByZXQ7Cn07CgpmdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7CiAgdmFyIGVyID0gbnVsbDsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihjaHVuaykgJiYgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiBjaHVuayAhPT0gbnVsbCAmJiBjaHVuayAhPT0gdW5kZWZpbmVkICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7CiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTsKICB9CiAgcmV0dXJuIGVyOwp9CgpmdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjsKICBpZiAoc3RhdGUuZGVjb2RlcikgewogICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTsKICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHsKICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspOwogICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CiAgICB9CiAgfQogIHN0YXRlLmVuZGVkID0gdHJ1ZTsKCiAgLy8gZW1pdCAncmVhZGFibGUnIG5vdyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBwaWNrZWQgdXAuCiAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7Cn0KCi8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlcgovLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXIKLy8gYSBuZXh0VGljayByZWN1cnNpb24gd2FybmluZywgYnV0IHRoYXQncyBub3Qgc28gYmFkLgpmdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7CiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwogIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7CiAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7CiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSB0cnVlOwogICAgaWYgKHN0YXRlLnN5bmMpIHByb2Nlc3NOZXh0VGljayhlbWl0UmVhZGFibGVfLCBzdHJlYW0pO2Vsc2UgZW1pdFJlYWRhYmxlXyhzdHJlYW0pOwogIH0KfQoKZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHsKICBkZWJ1ZygnZW1pdCByZWFkYWJsZScpOwogIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpOwogIGZsb3coc3RyZWFtKTsKfQoKLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCwKLy8gYW5kIGNhbGxlZCByZWFkKCkgdG8gY29uc3VtZSBzb21lIGRhdGEuICB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZAovLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZgovLyBpdCdzIGluIHByb2dyZXNzLgovLyBIb3dldmVyLCBpZiB3ZSdyZSBub3QgZW5kZWQsIG9yIHJlYWRpbmcsIGFuZCB0aGUgbGVuZ3RoIDwgaHdtLAovLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LgpmdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoIXN0YXRlLnJlYWRpbmdNb3JlKSB7CiAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7CiAgICBwcm9jZXNzTmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpOwogIH0KfQoKZnVuY3Rpb24gbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSkgewogIHZhciBsZW4gPSBzdGF0ZS5sZW5ndGg7CiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7CiAgICBkZWJ1ZygnbWF5YmVSZWFkTW9yZSByZWFkIDAnKTsKICAgIHN0cmVhbS5yZWFkKDApOwogICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKQogICAgICAvLyBkaWRuJ3QgZ2V0IGFueSBkYXRhLCBzdG9wIHNwaW5uaW5nLgogICAgICBicmVhaztlbHNlIGxlbiA9IHN0YXRlLmxlbmd0aDsKICB9CiAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTsKfQoKLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgovLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLgovLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgImxlbmd0aCIgaXMgc29tZXdoYXQKLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLgpSZWFkYWJsZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAobikgewogIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpKTsKfTsKClJlYWRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKGRlc3QsIHBpcGVPcHRzKSB7CiAgdmFyIHNyYyA9IHRoaXM7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCiAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7CiAgICBjYXNlIDA6CiAgICAgIHN0YXRlLnBpcGVzID0gZGVzdDsKICAgICAgYnJlYWs7CiAgICBjYXNlIDE6CiAgICAgIHN0YXRlLnBpcGVzID0gW3N0YXRlLnBpcGVzLCBkZXN0XTsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICBzdGF0ZS5waXBlcy5wdXNoKGRlc3QpOwogICAgICBicmVhazsKICB9CiAgc3RhdGUucGlwZXNDb3VudCArPSAxOwogIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7CgogIHZhciBkb0VuZCA9ICghcGlwZU9wdHMgfHwgcGlwZU9wdHMuZW5kICE9PSBmYWxzZSkgJiYgZGVzdCAhPT0gcHJvY2Vzcy5zdGRvdXQgJiYgZGVzdCAhPT0gcHJvY2Vzcy5zdGRlcnI7CgogIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiBjbGVhbnVwOwogIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBwcm9jZXNzTmV4dFRpY2soZW5kRm4pO2Vsc2Ugc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTsKCiAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpOwogIGZ1bmN0aW9uIG9udW5waXBlKHJlYWRhYmxlKSB7CiAgICBkZWJ1Zygnb251bnBpcGUnKTsKICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7CiAgICAgIGNsZWFudXAoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uZW5kKCkgewogICAgZGVidWcoJ29uZW5kJyk7CiAgICBkZXN0LmVuZCgpOwogIH0KCiAgLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlcgogIC8vIG9uIHRoZSBzb3VyY2UuICBUaGlzIHdvdWxkIGJlIG1vcmUgZWxlZ2FudCB3aXRoIGEgLm9uY2UoKQogIC8vIGhhbmRsZXIgaW4gZmxvdygpLCBidXQgYWRkaW5nIGFuZCByZW1vdmluZyByZXBlYXRlZGx5IGlzCiAgLy8gdG9vIHNsb3cuCiAgdmFyIG9uZHJhaW4gPSBwaXBlT25EcmFpbihzcmMpOwogIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7CgogIHZhciBjbGVhbmVkVXAgPSBmYWxzZTsKICBmdW5jdGlvbiBjbGVhbnVwKCkgewogICAgZGVidWcoJ2NsZWFudXAnKTsKICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW4KICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ3VucGlwZScsIG9udW5waXBlKTsKICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwogICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTsKICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7CgogICAgY2xlYW5lZFVwID0gdHJ1ZTsKCiAgICAvLyBpZiB0aGUgcmVhZGVyIGlzIHdhaXRpbmcgZm9yIGEgZHJhaW4gZXZlbnQgZnJvbSB0aGlzCiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnQKICAgIC8vIGZsb3dpbmcgYWdhaW4uCiAgICAvLyBTbywgaWYgdGhpcyBpcyBhd2FpdGluZyBhIGRyYWluLCB0aGVuIHdlIGp1c3QgY2FsbCBpdCBub3cuCiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuCiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiAmJiAoIWRlc3QuX3dyaXRhYmxlU3RhdGUgfHwgZGVzdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW4pKSBvbmRyYWluKCk7CiAgfQoKICBzcmMub24oJ2RhdGEnLCBvbmRhdGEpOwogIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykgewogICAgZGVidWcoJ29uZGF0YScpOwogICAgdmFyIHJldCA9IGRlc3Qud3JpdGUoY2h1bmspOwogICAgaWYgKGZhbHNlID09PSByZXQpIHsKICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlCiAgICAgIC8vIHRvIGdldCBzdHVjayBpbiBhIHBlcm1hbmVudGx5IHBhdXNlZCBzdGF0ZSBpZiB0aGF0IHdyaXRlCiAgICAgIC8vIGFsc28gcmV0dXJuZWQgZmFsc2UuCiAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLgogICAgICBpZiAoKHN0YXRlLnBpcGVzQ291bnQgPT09IDEgJiYgc3RhdGUucGlwZXMgPT09IGRlc3QgfHwgc3RhdGUucGlwZXNDb3VudCA+IDEgJiYgaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCkgIT09IC0xKSAmJiAhY2xlYW5lZFVwKSB7CiAgICAgICAgZGVidWcoJ2ZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZScsIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKTsKICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrOwogICAgICB9CiAgICAgIHNyYy5wYXVzZSgpOwogICAgfQogIH0KCiAgLy8gaWYgdGhlIGRlc3QgaGFzIGFuIGVycm9yLCB0aGVuIHN0b3AgcGlwaW5nIGludG8gaXQuCiAgLy8gaG93ZXZlciwgZG9uJ3Qgc3VwcHJlc3MgdGhlIHRocm93aW5nIGJlaGF2aW9yIGZvciB0aGlzLgogIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHsKICAgIGRlYnVnKCdvbmVycm9yJywgZXIpOwogICAgdW5waXBlKCk7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwogICAgaWYgKEVFbGlzdGVuZXJDb3VudChkZXN0LCAnZXJyb3InKSA9PT0gMCkgZGVzdC5lbWl0KCdlcnJvcicsIGVyKTsKICB9CgogIC8vIE1ha2Ugc3VyZSBvdXIgZXJyb3IgaGFuZGxlciBpcyBhdHRhY2hlZCBiZWZvcmUgdXNlcmxhbmQgb25lcy4KICBwcmVwZW5kTGlzdGVuZXIoZGVzdCwgJ2Vycm9yJywgb25lcnJvcik7CgogIC8vIEJvdGggY2xvc2UgYW5kIGZpbmlzaCBzaG91bGQgdHJpZ2dlciB1bnBpcGUsIGJ1dCBvbmx5IG9uY2UuCiAgZnVuY3Rpb24gb25jbG9zZSgpIHsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKICAgIHVucGlwZSgpOwogIH0KICBkZXN0Lm9uY2UoJ2Nsb3NlJywgb25jbG9zZSk7CiAgZnVuY3Rpb24gb25maW5pc2goKSB7CiAgICBkZWJ1Zygnb25maW5pc2gnKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CiAgICB1bnBpcGUoKTsKICB9CiAgZGVzdC5vbmNlKCdmaW5pc2gnLCBvbmZpbmlzaCk7CgogIGZ1bmN0aW9uIHVucGlwZSgpIHsKICAgIGRlYnVnKCd1bnBpcGUnKTsKICAgIHNyYy51bnBpcGUoZGVzdCk7CiAgfQoKICAvLyB0ZWxsIHRoZSBkZXN0IHRoYXQgaXQncyBiZWluZyBwaXBlZCB0bwogIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7CgogIC8vIHN0YXJ0IHRoZSBmbG93IGlmIGl0IGhhc24ndCBiZWVuIHN0YXJ0ZWQgYWxyZWFkeS4KICBpZiAoIXN0YXRlLmZsb3dpbmcpIHsKICAgIGRlYnVnKCdwaXBlIHJlc3VtZScpOwogICAgc3JjLnJlc3VtZSgpOwogIH0KCiAgcmV0dXJuIGRlc3Q7Cn07CgpmdW5jdGlvbiBwaXBlT25EcmFpbihzcmMpIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlOwogICAgZGVidWcoJ3BpcGVPbkRyYWluJywgc3RhdGUuYXdhaXREcmFpbik7CiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbikgc3RhdGUuYXdhaXREcmFpbi0tOwogICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gPT09IDAgJiYgRUVsaXN0ZW5lckNvdW50KHNyYywgJ2RhdGEnKSkgewogICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsKICAgICAgZmxvdyhzcmMpOwogICAgfQogIH07Cn0KClJlYWRhYmxlLnByb3RvdHlwZS51bnBpcGUgPSBmdW5jdGlvbiAoZGVzdCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgogIC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy4KICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkgcmV0dXJuIHRoaXM7CgogIC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS4KICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkgewogICAgLy8gcGFzc2VkIGluIG9uZSwgYnV0IGl0J3Mgbm90IHRoZSByaWdodCBvbmUuCiAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcykgcmV0dXJuIHRoaXM7CgogICAgaWYgKCFkZXN0KSBkZXN0ID0gc3RhdGUucGlwZXM7CgogICAgLy8gZ290IGEgbWF0Y2guCiAgICBzdGF0ZS5waXBlcyA9IG51bGw7CiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDsKICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKICAgIGlmIChkZXN0KSBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvLyBzbG93IGNhc2UuIG11bHRpcGxlIHBpcGUgZGVzdGluYXRpb25zLgoKICBpZiAoIWRlc3QpIHsKICAgIC8vIHJlbW92ZSBhbGwuCiAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlczsKICAgIHZhciBsZW4gPSBzdGF0ZS5waXBlc0NvdW50OwogICAgc3RhdGUucGlwZXMgPSBudWxsOwogICAgc3RhdGUucGlwZXNDb3VudCA9IDA7CiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7CgogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxlbjsgX2krKykgewogICAgICBkZXN0c1tfaV0uZW1pdCgndW5waXBlJywgdGhpcyk7CiAgICB9cmV0dXJuIHRoaXM7CiAgfQoKICAvLyB0cnkgdG8gZmluZCB0aGUgcmlnaHQgb25lLgogIHZhciBpID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7CiAgaWYgKGkgPT09IC0xKSByZXR1cm4gdGhpczsKCiAgc3RhdGUucGlwZXMuc3BsaWNlKGksIDEpOwogIHN0YXRlLnBpcGVzQ291bnQgLT0gMTsKICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkgc3RhdGUucGlwZXMgPSBzdGF0ZS5waXBlc1swXTsKCiAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovLyBzZXQgdXAgZGF0YSBldmVudHMgaWYgdGhleSBhcmUgYXNrZWQgZm9yCi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nClJlYWRhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldiwgZm4pIHsKICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7CgogIC8vIElmIGxpc3RlbmluZyB0byBkYXRhLCBhbmQgaXQgaGFzIG5vdCBleHBsaWNpdGx5IGJlZW4gcGF1c2VkLAogIC8vIHRoZW4gY2FsbCByZXN1bWUgdG8gc3RhcnQgdGhlIGZsb3cgb2YgZGF0YSBvbiB0aGUgbmV4dCB0aWNrLgogIGlmIChldiA9PT0gJ2RhdGEnICYmIGZhbHNlICE9PSB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpIHsKICAgIHRoaXMucmVzdW1lKCk7CiAgfQoKICBpZiAoZXYgPT09ICdyZWFkYWJsZScgJiYgIXRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kRW1pdHRlZCkgewogICAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICAgIGlmICghc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHsKICAgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSB0cnVlOwogICAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7CiAgICAgICAgcHJvY2Vzc05leHRUaWNrKG5SZWFkaW5nTmV4dFRpY2ssIHRoaXMpOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLmxlbmd0aCkgewogICAgICAgIGVtaXRSZWFkYWJsZSh0aGlzLCBzdGF0ZSk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiByZXM7Cn07ClJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjsKCmZ1bmN0aW9uIG5SZWFkaW5nTmV4dFRpY2soc2VsZikgewogIGRlYnVnKCdyZWFkYWJsZSBuZXh0dGljayByZWFkIDAnKTsKICBzZWxmLnJlYWQoMCk7Cn0KCi8vIHBhdXNlKCkgYW5kIHJlc3VtZSgpIGFyZSByZW1uYW50cyBvZiB0aGUgbGVnYWN5IHJlYWRhYmxlIHN0cmVhbSBBUEkKLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLgpSZWFkYWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7CiAgICBkZWJ1ZygncmVzdW1lJyk7CiAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsKICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7CiAgfQogIHJldHVybiB0aGlzOwp9OwoKZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkgewogICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTsKICAgIHByb2Nlc3NOZXh0VGljayhyZXN1bWVfLCBzdHJlYW0sIHN0YXRlKTsKICB9Cn0KCmZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkgewogIGlmICghc3RhdGUucmVhZGluZykgewogICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTsKICAgIHN0cmVhbS5yZWFkKDApOwogIH0KCiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7CiAgc3RyZWFtLmVtaXQoJ3Jlc3VtZScpOwogIGZsb3coc3RyZWFtKTsKICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZykgc3RyZWFtLnJlYWQoMCk7Cn0KClJlYWRhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHsKICBkZWJ1ZygnY2FsbCBwYXVzZSBmbG93aW5nPSVqJywgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKTsKICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykgewogICAgZGVidWcoJ3BhdXNlJyk7CiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKICAgIHRoaXMuZW1pdCgncGF1c2UnKTsKICB9CiAgcmV0dXJuIHRoaXM7Cn07CgpmdW5jdGlvbiBmbG93KHN0cmVhbSkgewogIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICBkZWJ1ZygnZmxvdycsIHN0YXRlLmZsb3dpbmcpOwogIGlmIChzdGF0ZS5mbG93aW5nKSB7CiAgICBkbyB7CiAgICAgIHZhciBjaHVuayA9IHN0cmVhbS5yZWFkKCk7CiAgICB9IHdoaWxlIChudWxsICE9PSBjaHVuayAmJiBzdGF0ZS5mbG93aW5nKTsKICB9Cn0KCi8vIHdyYXAgYW4gb2xkLXN0eWxlIHN0cmVhbSBhcyB0aGUgYXN5bmMgZGF0YSBzb3VyY2UuCi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS4KLy8gSXQgaXMgYW4gdWdseSB1bmZvcnR1bmF0ZSBtZXNzIG9mIGhpc3RvcnkuClJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKHN0cmVhbSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgdmFyIHBhdXNlZCA9IGZhbHNlOwoKICB2YXIgc2VsZiA9IHRoaXM7CiAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7CiAgICBkZWJ1Zygnd3JhcHBlZCBlbmQnKTsKICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkgewogICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpOwogICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSBzZWxmLnB1c2goY2h1bmspOwogICAgfQoKICAgIHNlbGYucHVzaChudWxsKTsKICB9KTsKCiAgc3RyZWFtLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7CiAgICBkZWJ1Zygnd3JhcHBlZCBkYXRhJyk7CiAgICBpZiAoc3RhdGUuZGVjb2RlcikgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTsKCiAgICAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGUKICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSkgcmV0dXJuO2Vsc2UgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmICghY2h1bmsgfHwgIWNodW5rLmxlbmd0aCkpIHJldHVybjsKCiAgICB2YXIgcmV0ID0gc2VsZi5wdXNoKGNodW5rKTsKICAgIGlmICghcmV0KSB7CiAgICAgIHBhdXNlZCA9IHRydWU7CiAgICAgIHN0cmVhbS5wYXVzZSgpOwogICAgfQogIH0pOwoKICAvLyBwcm94eSBhbGwgdGhlIG90aGVyIG1ldGhvZHMuCiAgLy8gaW1wb3J0YW50IHdoZW4gd3JhcHBpbmcgZmlsdGVycyBhbmQgZHVwbGV4ZXMuCiAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHsKICAgIGlmICh0aGlzW2ldID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHN0cmVhbVtpXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICB0aGlzW2ldID0gZnVuY3Rpb24gKG1ldGhvZCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gc3RyZWFtW21ldGhvZF0uYXBwbHkoc3RyZWFtLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oaSk7CiAgICB9CiAgfQoKICAvLyBwcm94eSBjZXJ0YWluIGltcG9ydGFudCBldmVudHMuCiAgdmFyIGV2ZW50cyA9IFsnZXJyb3InLCAnY2xvc2UnLCAnZGVzdHJveScsICdwYXVzZScsICdyZXN1bWUnXTsKICBmb3JFYWNoKGV2ZW50cywgZnVuY3Rpb24gKGV2KSB7CiAgICBzdHJlYW0ub24oZXYsIHNlbGYuZW1pdC5iaW5kKHNlbGYsIGV2KSk7CiAgfSk7CgogIC8vIHdoZW4gd2UgdHJ5IHRvIGNvbnN1bWUgc29tZSBtb3JlIGJ5dGVzLCBzaW1wbHkgdW5wYXVzZSB0aGUKICAvLyB1bmRlcmx5aW5nIHN0cmVhbS4KICBzZWxmLl9yZWFkID0gZnVuY3Rpb24gKG4pIHsKICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7CiAgICBpZiAocGF1c2VkKSB7CiAgICAgIHBhdXNlZCA9IGZhbHNlOwogICAgICBzdHJlYW0ucmVzdW1lKCk7CiAgICB9CiAgfTsKCiAgcmV0dXJuIHNlbGY7Cn07CgovLyBleHBvc2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkuClJlYWRhYmxlLl9mcm9tTGlzdCA9IGZyb21MaXN0OwoKLy8gUGx1Y2sgb2ZmIG4gYnl0ZXMgZnJvbSBhbiBhcnJheSBvZiBidWZmZXJzLgovLyBMZW5ndGggaXMgdGhlIGNvbWJpbmVkIGxlbmd0aHMgb2YgYWxsIHRoZSBidWZmZXJzIGluIHRoZSBsaXN0LgpmdW5jdGlvbiBmcm9tTGlzdChuLCBzdGF0ZSkgewogIHZhciBsaXN0ID0gc3RhdGUuYnVmZmVyOwogIHZhciBsZW5ndGggPSBzdGF0ZS5sZW5ndGg7CiAgdmFyIHN0cmluZ01vZGUgPSAhIXN0YXRlLmRlY29kZXI7CiAgdmFyIG9iamVjdE1vZGUgPSAhIXN0YXRlLm9iamVjdE1vZGU7CiAgdmFyIHJldDsKCiAgLy8gbm90aGluZyBpbiB0aGUgbGlzdCwgZGVmaW5pdGVseSBlbXB0eS4KICBpZiAobGlzdC5sZW5ndGggPT09IDApIHJldHVybiBudWxsOwoKICBpZiAobGVuZ3RoID09PSAwKSByZXQgPSBudWxsO2Vsc2UgaWYgKG9iamVjdE1vZGUpIHJldCA9IGxpc3Quc2hpZnQoKTtlbHNlIGlmICghbiB8fCBuID49IGxlbmd0aCkgewogICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBhcnJheS4KICAgIGlmIChzdHJpbmdNb2RlKSByZXQgPSBsaXN0LmpvaW4oJycpO2Vsc2UgaWYgKGxpc3QubGVuZ3RoID09PSAxKSByZXQgPSBsaXN0WzBdO2Vsc2UgcmV0ID0gQnVmZmVyLmNvbmNhdChsaXN0LCBsZW5ndGgpOwogICAgbGlzdC5sZW5ndGggPSAwOwogIH0gZWxzZSB7CiAgICAvLyByZWFkIGp1c3Qgc29tZSBvZiBpdC4KICAgIGlmIChuIDwgbGlzdFswXS5sZW5ndGgpIHsKICAgICAgLy8ganVzdCB0YWtlIGEgcGFydCBvZiB0aGUgZmlyc3QgbGlzdCBpdGVtLgogICAgICAvLyBzbGljZSBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy4KICAgICAgdmFyIGJ1ZiA9IGxpc3RbMF07CiAgICAgIHJldCA9IGJ1Zi5zbGljZSgwLCBuKTsKICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShuKTsKICAgIH0gZWxzZSBpZiAobiA9PT0gbGlzdFswXS5sZW5ndGgpIHsKICAgICAgLy8gZmlyc3QgbGlzdCBpcyBhIHBlcmZlY3QgbWF0Y2gKICAgICAgcmV0ID0gbGlzdC5zaGlmdCgpOwogICAgfSBlbHNlIHsKICAgICAgLy8gY29tcGxleCBjYXNlLgogICAgICAvLyB3ZSBoYXZlIGVub3VnaCB0byBjb3ZlciBpdCwgYnV0IGl0IHNwYW5zIHBhc3QgdGhlIGZpcnN0IGJ1ZmZlci4KICAgICAgaWYgKHN0cmluZ01vZGUpIHJldCA9ICcnO2Vsc2UgcmV0ID0gYnVmZmVyU2hpbS5hbGxvY1Vuc2FmZShuKTsKCiAgICAgIHZhciBjID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGwgJiYgYyA8IG47IGkrKykgewogICAgICAgIHZhciBfYnVmID0gbGlzdFswXTsKICAgICAgICB2YXIgY3B5ID0gTWF0aC5taW4obiAtIGMsIF9idWYubGVuZ3RoKTsKCiAgICAgICAgaWYgKHN0cmluZ01vZGUpIHJldCArPSBfYnVmLnNsaWNlKDAsIGNweSk7ZWxzZSBfYnVmLmNvcHkocmV0LCBjLCAwLCBjcHkpOwoKICAgICAgICBpZiAoY3B5IDwgX2J1Zi5sZW5ndGgpIGxpc3RbMF0gPSBfYnVmLnNsaWNlKGNweSk7ZWxzZSBsaXN0LnNoaWZ0KCk7CgogICAgICAgIGMgKz0gY3B5OwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBlbmRSZWFkYWJsZShzdHJlYW0pIHsKICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgogIC8vIElmIHdlIGdldCBoZXJlIGJlZm9yZSBjb25zdW1pbmcgYWxsIHRoZSBieXRlcywgdGhlbiB0aGF0IGlzIGEKICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uCiAgaWYgKHN0YXRlLmxlbmd0aCA+IDApIHRocm93IG5ldyBFcnJvcignImVuZFJlYWRhYmxlKCkiIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7CgogIGlmICghc3RhdGUuZW5kRW1pdHRlZCkgewogICAgc3RhdGUuZW5kZWQgPSB0cnVlOwogICAgcHJvY2Vzc05leHRUaWNrKGVuZFJlYWRhYmxlTlQsIHN0YXRlLCBzdHJlYW0pOwogIH0KfQoKZnVuY3Rpb24gZW5kUmVhZGFibGVOVChzdGF0ZSwgc3RyZWFtKSB7CiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuCiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkgewogICAgc3RhdGUuZW5kRW1pdHRlZCA9IHRydWU7CiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTsKICAgIHN0cmVhbS5lbWl0KCdlbmQnKTsKICB9Cn0KCmZ1bmN0aW9uIGZvckVhY2goeHMsIGYpIHsKICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgZih4c1tpXSwgaSk7CiAgfQp9CgpmdW5jdGlvbiBpbmRleE9mKHhzLCB4KSB7CiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7CiAgfQogIHJldHVybiAtMTsKfQp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSkKfSx7Ii4vX3N0cmVhbV9kdXBsZXgiOjcwNSwiX3Byb2Nlc3MiOjcwMywiYnVmZmVyIjo1MDQsImJ1ZmZlci1zaGltcyI6NzEwLCJjb3JlLXV0aWwtaXMiOjcxMSwiZXZlbnRzIjo3MDAsImluaGVyaXRzIjo3MDEsImlzYXJyYXkiOjcxMiwicHJvY2Vzcy1uZXh0aWNrLWFyZ3MiOjcxMywic3RyaW5nX2RlY29kZXIvIjo3MjAsInV0aWwiOjUwM31dLDcwODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGEgdHJhbnNmb3JtIHN0cmVhbSBpcyBhIHJlYWRhYmxlL3dyaXRhYmxlIHN0cmVhbSB3aGVyZSB5b3UgZG8KLy8gc29tZXRoaW5nIHdpdGggdGhlIGRhdGEuICBTb21ldGltZXMgaXQncyBjYWxsZWQgYSAiZmlsdGVyIiwKLy8gYnV0IHRoYXQncyBub3QgYSBncmVhdCBuYW1lIGZvciBpdCwgc2luY2UgdGhhdCBpbXBsaWVzIGEgdGhpbmcgd2hlcmUKLy8gc29tZSBiaXRzIHBhc3MgdGhyb3VnaCwgYW5kIG90aGVycyBhcmUgc2ltcGx5IGlnbm9yZWQuICAoVGhhdCB3b3VsZAovLyBiZSBhIHZhbGlkIGV4YW1wbGUgb2YgYSB0cmFuc2Zvcm0sIG9mIGNvdXJzZS4pCi8vCi8vIFdoaWxlIHRoZSBvdXRwdXQgaXMgY2F1c2FsbHkgcmVsYXRlZCB0byB0aGUgaW5wdXQsIGl0J3Mgbm90IGEKLy8gbmVjZXNzYXJpbHkgc3ltbWV0cmljIG9yIHN5bmNocm9ub3VzIHRyYW5zZm9ybWF0aW9uLiAgRm9yIGV4YW1wbGUsCi8vIGEgemxpYiBzdHJlYW0gbWlnaHQgdGFrZSBtdWx0aXBsZSBwbGFpbi10ZXh0IHdyaXRlcygpLCBhbmQgdGhlbgovLyBlbWl0IGEgc2luZ2xlIGNvbXByZXNzZWQgY2h1bmsgc29tZSB0aW1lIGluIHRoZSBmdXR1cmUuCi8vCi8vIEhlcmUncyBob3cgdGhpcyB3b3JrczoKLy8KLy8gVGhlIFRyYW5zZm9ybSBzdHJlYW0gaGFzIGFsbCB0aGUgYXNwZWN0cyBvZiB0aGUgcmVhZGFibGUgYW5kIHdyaXRhYmxlCi8vIHN0cmVhbSBjbGFzc2VzLiAgV2hlbiB5b3Ugd3JpdGUoY2h1bmspLCB0aGF0IGNhbGxzIF93cml0ZShjaHVuayxjYikKLy8gaW50ZXJuYWxseSwgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlcmUncyBhIGxvdCBvZiBwZW5kaW5nIHdyaXRlcwovLyBidWZmZXJlZCB1cC4gIFdoZW4geW91IGNhbGwgcmVhZCgpLCB0aGF0IGNhbGxzIF9yZWFkKG4pIHVudGlsCi8vIHRoZXJlJ3MgZW5vdWdoIHBlbmRpbmcgcmVhZGFibGUgZGF0YSBidWZmZXJlZCB1cC4KLy8KLy8gSW4gYSB0cmFuc2Zvcm0gc3RyZWFtLCB0aGUgd3JpdHRlbiBkYXRhIGlzIHBsYWNlZCBpbiBhIGJ1ZmZlci4gIFdoZW4KLy8gX3JlYWQobikgaXMgY2FsbGVkLCBpdCB0cmFuc2Zvcm1zIHRoZSBxdWV1ZWQgdXAgZGF0YSwgY2FsbGluZyB0aGUKLy8gYnVmZmVyZWQgX3dyaXRlIGNiJ3MgYXMgaXQgY29uc3VtZXMgY2h1bmtzLiAgSWYgY29uc3VtaW5nIGEgc2luZ2xlCi8vIHdyaXR0ZW4gY2h1bmsgd291bGQgcmVzdWx0IGluIG11bHRpcGxlIG91dHB1dCBjaHVua3MsIHRoZW4gdGhlIGZpcnN0Ci8vIG91dHB1dHRlZCBiaXQgY2FsbHMgdGhlIHJlYWRjYiwgYW5kIHN1YnNlcXVlbnQgY2h1bmtzIGp1c3QgZ28gaW50bwovLyB0aGUgcmVhZCBidWZmZXIsIGFuZCB3aWxsIGNhdXNlIGl0IHRvIGVtaXQgJ3JlYWRhYmxlJyBpZiBuZWNlc3NhcnkuCi8vCi8vIFRoaXMgd2F5LCBiYWNrLXByZXNzdXJlIGlzIGFjdHVhbGx5IGRldGVybWluZWQgYnkgdGhlIHJlYWRpbmcgc2lkZSwKLy8gc2luY2UgX3JlYWQgaGFzIHRvIGJlIGNhbGxlZCB0byBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IGNodW5rLiAgSG93ZXZlciwKLy8gYSBwYXRob2xvZ2ljYWwgaW5mbGF0ZSB0eXBlIG9mIHRyYW5zZm9ybSBjYW4gY2F1c2UgZXhjZXNzaXZlIGJ1ZmZlcmluZwovLyBoZXJlLiAgRm9yIGV4YW1wbGUsIGltYWdpbmUgYSBzdHJlYW0gd2hlcmUgZXZlcnkgYnl0ZSBvZiBpbnB1dCBpcwovLyBpbnRlcnByZXRlZCBhcyBhbiBpbnRlZ2VyIGZyb20gMC0yNTUsIGFuZCB0aGVuIHJlc3VsdHMgaW4gdGhhdCBtYW55Ci8vIGJ5dGVzIG9mIG91dHB1dC4gIFdyaXRpbmcgdGhlIDQgYnl0ZXMge2ZmLGZmLGZmLGZmfSB3b3VsZCByZXN1bHQgaW4KLy8gMWtiIG9mIGRhdGEgYmVpbmcgb3V0cHV0LiAgSW4gdGhpcyBjYXNlLCB5b3UgY291bGQgd3JpdGUgYSB2ZXJ5IHNtYWxsCi8vIGFtb3VudCBvZiBpbnB1dCwgYW5kIGVuZCB1cCB3aXRoIGEgdmVyeSBsYXJnZSBhbW91bnQgb2Ygb3V0cHV0LiAgSW4KLy8gc3VjaCBhIHBhdGhvbG9naWNhbCBpbmZsYXRpbmcgbWVjaGFuaXNtLCB0aGVyZSdkIGJlIG5vIHdheSB0byB0ZWxsCi8vIHRoZSBzeXN0ZW0gdG8gc3RvcCBkb2luZyB0aGUgdHJhbnNmb3JtLiAgQSBzaW5nbGUgNE1CIHdyaXRlIGNvdWxkCi8vIGNhdXNlIHRoZSBzeXN0ZW0gdG8gcnVuIG91dCBvZiBtZW1vcnkuCi8vCi8vIEhvd2V2ZXIsIGV2ZW4gaW4gc3VjaCBhIHBhdGhvbG9naWNhbCBjYXNlLCBvbmx5IGEgc2luZ2xlIHdyaXR0ZW4gY2h1bmsKLy8gd291bGQgYmUgY29uc3VtZWQsIGFuZCB0aGVuIHRoZSByZXN0IHdvdWxkIHdhaXQgKHVuLXRyYW5zZm9ybWVkKSB1bnRpbAovLyB0aGUgcmVzdWx0cyBvZiB0aGUgcHJldmlvdXMgdHJhbnNmb3JtZWQgY2h1bmsgd2VyZSBjb25zdW1lZC4KCid1c2Ugc3RyaWN0JzsKCm1vZHVsZS5leHBvcnRzID0gVHJhbnNmb3JtOwoKdmFyIER1cGxleCA9IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnV0aWwuaW5oZXJpdHMoVHJhbnNmb3JtLCBEdXBsZXgpOwoKZnVuY3Rpb24gVHJhbnNmb3JtU3RhdGUoc3RyZWFtKSB7CiAgdGhpcy5hZnRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uIChlciwgZGF0YSkgewogICAgcmV0dXJuIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpOwogIH07CgogIHRoaXMubmVlZFRyYW5zZm9ybSA9IGZhbHNlOwogIHRoaXMudHJhbnNmb3JtaW5nID0gZmFsc2U7CiAgdGhpcy53cml0ZWNiID0gbnVsbDsKICB0aGlzLndyaXRlY2h1bmsgPSBudWxsOwogIHRoaXMud3JpdGVlbmNvZGluZyA9IG51bGw7Cn0KCmZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpIHsKICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlOwogIHRzLnRyYW5zZm9ybWluZyA9IGZhbHNlOwoKICB2YXIgY2IgPSB0cy53cml0ZWNiOwoKICBpZiAoIWNiKSByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdubyB3cml0ZWNiIGluIFRyYW5zZm9ybSBjbGFzcycpKTsKCiAgdHMud3JpdGVjaHVuayA9IG51bGw7CiAgdHMud3JpdGVjYiA9IG51bGw7CgogIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHVuZGVmaW5lZCkgc3RyZWFtLnB1c2goZGF0YSk7CgogIGNiKGVyKTsKCiAgdmFyIHJzID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogIHJzLnJlYWRpbmcgPSBmYWxzZTsKICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHsKICAgIHN0cmVhbS5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTsKICB9Cn0KCmZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFRyYW5zZm9ybSkpIHJldHVybiBuZXcgVHJhbnNmb3JtKG9wdGlvbnMpOwoKICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSBuZXcgVHJhbnNmb3JtU3RhdGUodGhpcyk7CgogIC8vIHdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy4KICB2YXIgc3RyZWFtID0gdGhpczsKCiAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuCiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwoKICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3MKICAvLyB0aGF0IFJlYWRhYmxlIHdhbnRzIGJlZm9yZSB0aGUgZmlyc3QgX3JlYWQgY2FsbCwgc28gdW5zZXQgdGhlCiAgLy8gc3luYyBndWFyZCBmbGFnLgogIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlOwoKICBpZiAob3B0aW9ucykgewogICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07CgogICAgaWYgKHR5cGVvZiBvcHRpb25zLmZsdXNoID09PSAnZnVuY3Rpb24nKSB0aGlzLl9mbHVzaCA9IG9wdGlvbnMuZmx1c2g7CiAgfQoKICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uICgpIHsKICAgIGlmICh0eXBlb2YgdGhpcy5fZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoKGZ1bmN0aW9uIChlcikgewogICAgICBkb25lKHN0cmVhbSwgZXIpOwogICAgfSk7ZWxzZSBkb25lKHN0cmVhbSk7CiAgfSk7Cn0KClRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHsKICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtID0gZmFsc2U7CiAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7Cn07CgovLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiEKLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgovLyAnY2h1bmsnIGlzIGFuIGlucHV0IGNodW5rLgovLwovLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXQKLy8gdG8gdGhlIHJlYWRhYmxlIHNpZGUuICBZb3UgbWF5IGNhbGwgJ3B1c2gnIHplcm8gb3IgbW9yZSB0aW1lcy4KLy8KLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3MKLy8gYW4gZXJyb3IsIHRoZW4gdGhhdCdsbCBwdXQgdGhlIGh1cnQgb24gdGhlIHdob2xlIG9wZXJhdGlvbi4gIElmIHlvdQovLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLgpUcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7Cn07CgpUcmFuc2Zvcm0ucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7CiAgdHMud3JpdGVjYiA9IGNiOwogIHRzLndyaXRlY2h1bmsgPSBjaHVuazsKICB0cy53cml0ZWVuY29kaW5nID0gZW5jb2Rpbmc7CiAgaWYgKCF0cy50cmFuc2Zvcm1pbmcpIHsKICAgIHZhciBycyA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICBpZiAodHMubmVlZFRyYW5zZm9ybSB8fCBycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTsKICB9Cn07CgovLyBEb2Vzbid0IG1hdHRlciB3aGF0IHRoZSBhcmdzIGFyZSBoZXJlLgovLyBfdHJhbnNmb3JtIGRvZXMgYWxsIHRoZSB3b3JrLgovLyBUaGF0IHdlIGdvdCBoZXJlIG1lYW5zIHRoYXQgdGhlIHJlYWRhYmxlIHNpZGUgd2FudHMgbW9yZSBkYXRhLgpUcmFuc2Zvcm0ucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHsKICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTsKCiAgaWYgKHRzLndyaXRlY2h1bmsgIT09IG51bGwgJiYgdHMud3JpdGVjYiAmJiAhdHMudHJhbnNmb3JtaW5nKSB7CiAgICB0cy50cmFuc2Zvcm1pbmcgPSB0cnVlOwogICAgdGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssIHRzLndyaXRlZW5jb2RpbmcsIHRzLmFmdGVyVHJhbnNmb3JtKTsKICB9IGVsc2UgewogICAgLy8gbWFyayB0aGF0IHdlIG5lZWQgYSB0cmFuc2Zvcm0sIHNvIHRoYXQgYW55IGRhdGEgdGhhdCBjb21lcyBpbgogICAgLy8gd2lsbCBnZXQgcHJvY2Vzc2VkLCBub3cgdGhhdCB3ZSd2ZSBhc2tlZCBmb3IgaXQuCiAgICB0cy5uZWVkVHJhbnNmb3JtID0gdHJ1ZTsKICB9Cn07CgpmdW5jdGlvbiBkb25lKHN0cmVhbSwgZXIpIHsKICBpZiAoZXIpIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CgogIC8vIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGVuIHRoYXQgbWVhbnMKICAvLyB0aGF0IG5vdGhpbmcgbW9yZSB3aWxsIGV2ZXIgYmUgcHJvdmlkZWQKICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CiAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTsKCiAgaWYgKHdzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gd3MubGVuZ3RoICE9IDAnKTsKCiAgaWYgKHRzLnRyYW5zZm9ybWluZykgdGhyb3cgbmV3IEVycm9yKCdDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nJyk7CgogIHJldHVybiBzdHJlYW0ucHVzaChudWxsKTsKfQp9LHsiLi9fc3RyZWFtX2R1cGxleCI6NzA1LCJjb3JlLXV0aWwtaXMiOjcxMSwiaW5oZXJpdHMiOjcwMX1dLDcwOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocHJvY2Vzcyl7Ci8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLgovLyBJbXBsZW1lbnQgYW4gYXN5bmMgLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIGNiKSwgYW5kIGl0J2xsIGhhbmRsZSBhbGwKLy8gdGhlIGRyYWluIGV2ZW50IGVtaXNzaW9uIGFuZCBidWZmZXJpbmcuCgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHByb2Nlc3NOZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGFzeW5jV3JpdGUgPSAhcHJvY2Vzcy5icm93c2VyICYmIFsndjAuMTAnLCAndjAuOS4nXS5pbmRleE9mKHByb2Nlc3MudmVyc2lvbi5zbGljZSgwLCA1KSkgPiAtMSA/IHNldEltbWVkaWF0ZSA6IHByb2Nlc3NOZXh0VGljazsKLyo8L3JlcGxhY2VtZW50PiovCgpXcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBpbnRlcm5hbFV0aWwgPSB7CiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpCn07Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIFN0cmVhbTsKKGZ1bmN0aW9uICgpIHsKICB0cnkgewogICAgU3RyZWFtID0gcmVxdWlyZSgnc3QnICsgJ3JlYW0nKTsKICB9IGNhdGNoIChfKSB7fSBmaW5hbGx5IHsKICAgIGlmICghU3RyZWFtKSBTdHJlYW0gPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7CiAgfQp9KSgpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7Ci8qPHJlcGxhY2VtZW50PiovCnZhciBidWZmZXJTaGltID0gcmVxdWlyZSgnYnVmZmVyLXNoaW1zJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKdXRpbC5pbmhlcml0cyhXcml0YWJsZSwgU3RyZWFtKTsKCmZ1bmN0aW9uIG5vcCgpIHt9CgpmdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgdGhpcy5jaHVuayA9IGNodW5rOwogIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZzsKICB0aGlzLmNhbGxiYWNrID0gY2I7CiAgdGhpcy5uZXh0ID0gbnVsbDsKfQoKdmFyIER1cGxleDsKZnVuY3Rpb24gV3JpdGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHsKICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpOwoKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtCiAgLy8gY29udGFpbnMgYnVmZmVycyBvciBvYmplY3RzLgogIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlOwoKICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTsKCiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZQogIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmCiAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKQogIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7CiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBod20gfHwgaHdtID09PSAwID8gaHdtIDogZGVmYXVsdEh3bTsKCiAgLy8gY2FzdCB0byBpbnRzLgogIHRoaXMuaGlnaFdhdGVyTWFyayA9IH4gfnRoaXMuaGlnaFdhdGVyTWFyazsKCiAgdGhpcy5uZWVkRHJhaW4gPSBmYWxzZTsKICAvLyBhdCB0aGUgc3RhcnQgb2YgY2FsbGluZyBlbmQoKQogIHRoaXMuZW5kaW5nID0gZmFsc2U7CiAgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZAogIHRoaXMuZW5kZWQgPSBmYWxzZTsKICAvLyB3aGVuICdmaW5pc2gnIGlzIGVtaXR0ZWQKICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7CgogIC8vIHNob3VsZCB3ZSBkZWNvZGUgc3RyaW5ncyBpbnRvIGJ1ZmZlcnMgYmVmb3JlIHBhc3NpbmcgdG8gX3dyaXRlPwogIC8vIHRoaXMgaXMgaGVyZSBzbyB0aGF0IHNvbWUgbm9kZS1jb3JlIHN0cmVhbXMgY2FuIG9wdGltaXplIHN0cmluZwogIC8vIGhhbmRsaW5nIGF0IGEgbG93ZXIgbGV2ZWwuCiAgdmFyIG5vRGVjb2RlID0gb3B0aW9ucy5kZWNvZGVTdHJpbmdzID09PSBmYWxzZTsKICB0aGlzLmRlY29kZVN0cmluZ3MgPSAhbm9EZWNvZGU7CgogIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmcKICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuCiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLgogIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnOwoKICAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudAogIC8vIG9mIGhvdyBtdWNoIHdlJ3JlIHdhaXRpbmcgdG8gZ2V0IHB1c2hlZCB0byBzb21lIHVuZGVybHlpbmcKICAvLyBzb2NrZXQgb3IgZmlsZS4KICB0aGlzLmxlbmd0aCA9IDA7CgogIC8vIGEgZmxhZyB0byBzZWUgd2hlbiB3ZSdyZSBpbiB0aGUgbWlkZGxlIG9mIGEgd3JpdGUuCiAgdGhpcy53cml0aW5nID0gZmFsc2U7CgogIC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGwKICB0aGlzLmNvcmtlZCA9IDA7CgogIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LAogIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55CiAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgImxhdGVyIiBzaG91bGQgZ2VuZXJhbGx5IGFsc28KICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC4KICB0aGlzLnN5bmMgPSB0cnVlOwoKICAvLyBhIGZsYWcgdG8ga25vdyBpZiB3ZSdyZSBwcm9jZXNzaW5nIHByZXZpb3VzbHkgYnVmZmVyZWQgaXRlbXMsIHdoaWNoCiAgLy8gbWF5IGNhbGwgdGhlIF93cml0ZSgpIGNhbGxiYWNrIGluIHRoZSBzYW1lIHRpY2ssIHNvIHRoYXQgd2UgZG9uJ3QKICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi4KICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTsKCiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgdG8gX3dyaXRlKGNodW5rLGNiKQogIHRoaXMub253cml0ZSA9IGZ1bmN0aW9uIChlcikgewogICAgb253cml0ZShzdHJlYW0sIGVyKTsKICB9OwoKICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYikKICB0aGlzLndyaXRlY2IgPSBudWxsOwoKICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuCiAgdGhpcy53cml0ZWxlbiA9IDA7CgogIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKICB0aGlzLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwoKICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrcwogIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZAogIHRoaXMucGVuZGluZ2NiID0gMDsKCiAgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNicwogIC8vIFRoaXMgaXMgcmVsZXZhbnQgZm9yIHN5bmNocm9ub3VzIFRyYW5zZm9ybSBzdHJlYW1zCiAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlOwoKICAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpbgogIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7CgogIC8vIGNvdW50IGJ1ZmZlcmVkIHJlcXVlc3RzCiAgdGhpcy5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7CgogIC8vIGFsbG9jYXRlIHRoZSBmaXJzdCBDb3JrZWRSZXF1ZXN0LCB0aGVyZSBpcyBhbHdheXMKICAvLyBvbmUgYWxsb2NhdGVkIGFuZCBmcmVlIHRvIHVzZSwgYW5kIHdlIG1haW50YWluIGF0IG1vc3QgdHdvCiAgdGhpcy5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdCh0aGlzKTsKfQoKV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUuZ2V0QnVmZmVyID0gZnVuY3Rpb24gd3JpdGFibGVTdGF0ZUdldEJ1ZmZlcigpIHsKICB2YXIgY3VycmVudCA9IHRoaXMuYnVmZmVyZWRSZXF1ZXN0OwogIHZhciBvdXQgPSBbXTsKICB3aGlsZSAoY3VycmVudCkgewogICAgb3V0LnB1c2goY3VycmVudCk7CiAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OwogIH0KICByZXR1cm4gb3V0Owp9OwoKKGZ1bmN0aW9uICgpIHsKICB0cnkgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLCAnYnVmZmVyJywgewogICAgICBnZXQ6IGludGVybmFsVXRpbC5kZXByZWNhdGUoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldEJ1ZmZlcigpOwogICAgICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArICdpbnN0ZWFkLicpCiAgICB9KTsKICB9IGNhdGNoIChfKSB7fQp9KSgpOwoKdmFyIER1cGxleDsKZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdGhvdWdoIHRoZXkncmUgbm90CiAgLy8gaW5zdGFuY2VvZiBXcml0YWJsZSwgdGhleSdyZSBpbnN0YW5jZW9mIFJlYWRhYmxlLgogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBXcml0YWJsZSkgJiYgISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTsKCiAgdGhpcy5fd3JpdGFibGVTdGF0ZSA9IG5ldyBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpOwoKICAvLyBsZWdhY3kuCiAgdGhpcy53cml0YWJsZSA9IHRydWU7CgogIGlmIChvcHRpb25zKSB7CiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGUgPT09ICdmdW5jdGlvbicpIHRoaXMuX3dyaXRlID0gb3B0aW9ucy53cml0ZTsKCiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjsKICB9CgogIFN0cmVhbS5jYWxsKHRoaXMpOwp9CgovLyBPdGhlcndpc2UgcGVvcGxlIGNhbiBwaXBlIFdyaXRhYmxlIHN0cmVhbXMsIHdoaWNoIGlzIGp1c3Qgd3JvbmcuCldyaXRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkgewogIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLCBub3QgcmVhZGFibGUnKSk7Cn07CgpmdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgY2IpIHsKICB2YXIgZXIgPSBuZXcgRXJyb3IoJ3dyaXRlIGFmdGVyIGVuZCcpOwogIC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiCiAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpOwogIHByb2Nlc3NOZXh0VGljayhjYiwgZXIpOwp9CgovLyBJZiB3ZSBnZXQgc29tZXRoaW5nIHRoYXQgaXMgbm90IGEgYnVmZmVyLCBzdHJpbmcsIG51bGwsIG9yIHVuZGVmaW5lZCwKLy8gYW5kIHdlJ3JlIG5vdCBpbiBvYmplY3RNb2RlLCB0aGVuIHRoYXQncyBhbiBlcnJvci4KLy8gT3RoZXJ3aXNlIHN0cmVhbSBjaHVua3MgYXJlIGFsbCBjb25zaWRlcmVkIHRvIGJlIG9mIGxlbmd0aD0xLCBhbmQgdGhlCi8vIHdhdGVybWFya3MgZGV0ZXJtaW5lIGhvdyBtYW55IG9iamVjdHMgdG8ga2VlcCBpbiB0aGUgYnVmZmVyLCByYXRoZXIgdGhhbgovLyBob3cgbWFueSBieXRlcyBvciBjaGFyYWN0ZXJzLgpmdW5jdGlvbiB2YWxpZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBjYikgewogIHZhciB2YWxpZCA9IHRydWU7CiAgdmFyIGVyID0gZmFsc2U7CiAgLy8gQWx3YXlzIHRocm93IGVycm9yIGlmIGEgbnVsbCBpcyB3cml0dGVuCiAgLy8gaWYgd2UgYXJlIG5vdCBpbiBvYmplY3QgbW9kZSB0aGVuIHRocm93CiAgLy8gaWYgaXQgaXMgbm90IGEgYnVmZmVyLCBzdHJpbmcsIG9yIHVuZGVmaW5lZC4KICBpZiAoY2h1bmsgPT09IG51bGwpIHsKICAgIGVyID0gbmV3IFR5cGVFcnJvcignTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW0nKTsKICB9IGVsc2UgaWYgKCFCdWZmZXIuaXNCdWZmZXIoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkgewogICAgZXIgPSBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rJyk7CiAgfQogIGlmIChlcikgewogICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpOwogICAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7CiAgICB2YWxpZCA9IGZhbHNlOwogIH0KICByZXR1cm4gdmFsaWQ7Cn0KCldyaXRhYmxlLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTsKICB2YXIgcmV0ID0gZmFsc2U7CgogIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gZW5jb2Rpbmc7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfQoKICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgZW5jb2RpbmcgPSAnYnVmZmVyJztlbHNlIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nOwoKICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSBjYiA9IG5vcDsKCiAgaWYgKHN0YXRlLmVuZGVkKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmICh2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7CiAgICBzdGF0ZS5wZW5kaW5nY2IrKzsKICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgY2IpOwogIH0KCiAgcmV0dXJuIHJldDsKfTsKCldyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CgogIHN0YXRlLmNvcmtlZCsrOwp9OwoKV3JpdGFibGUucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uICgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKICBpZiAoc3RhdGUuY29ya2VkKSB7CiAgICBzdGF0ZS5jb3JrZWQtLTsKCiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7CiAgfQp9OwoKV3JpdGFibGUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZyA9IGZ1bmN0aW9uIHNldERlZmF1bHRFbmNvZGluZyhlbmNvZGluZykgewogIC8vIG5vZGU6OlBhcnNlRW5jb2RpbmcoKSByZXF1aXJlcyBsb3dlciBjYXNlLgogIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7CiAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywgJ3VjczInLCAndWNzLTInLCAndXRmMTZsZScsICd1dGYtMTZsZScsICdyYXcnXS5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTsKICB0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZyA9IGVuY29kaW5nOwogIHJldHVybiB0aGlzOwp9OwoKZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykgewogIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiBzdGF0ZS5kZWNvZGVTdHJpbmdzICE9PSBmYWxzZSAmJiB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7CiAgICBjaHVuayA9IGJ1ZmZlclNoaW0uZnJvbShjaHVuaywgZW5jb2RpbmcpOwogIH0KICByZXR1cm4gY2h1bms7Cn0KCi8vIGlmIHdlJ3JlIGFscmVhZHkgd3JpdGluZyBzb21ldGhpbmcsIHRoZW4ganVzdCBwdXQgdGhpcwovLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZQovLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLgpmdW5jdGlvbiB3cml0ZU9yQnVmZmVyKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgY2IpIHsKICBjaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpOwoKICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgZW5jb2RpbmcgPSAnYnVmZmVyJzsKICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CgogIHN0YXRlLmxlbmd0aCArPSBsZW47CgogIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrOwogIC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLgogIGlmICghcmV0KSBzdGF0ZS5uZWVkRHJhaW4gPSB0cnVlOwoKICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHsKICAgIHZhciBsYXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBuZXcgV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYik7CiAgICBpZiAobGFzdCkgewogICAgICBsYXN0Lm5leHQgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0OwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKICAgIH0KICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50ICs9IDE7CiAgfSBlbHNlIHsKICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgc3RhdGUud3JpdGVsZW4gPSBsZW47CiAgc3RhdGUud3JpdGVjYiA9IGNiOwogIHN0YXRlLndyaXRpbmcgPSB0cnVlOwogIHN0YXRlLnN5bmMgPSB0cnVlOwogIGlmICh3cml0ZXYpIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtlbHNlIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTsKICBzdGF0ZS5zeW5jID0gZmFsc2U7Cn0KCmZ1bmN0aW9uIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpIHsKICAtLXN0YXRlLnBlbmRpbmdjYjsKICBpZiAoc3luYykgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7ZWxzZSBjYihlcik7CgogIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlOwogIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTsKfQoKZnVuY3Rpb24gb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKSB7CiAgc3RhdGUud3JpdGluZyA9IGZhbHNlOwogIHN0YXRlLndyaXRlY2IgPSBudWxsOwogIHN0YXRlLmxlbmd0aCAtPSBzdGF0ZS53cml0ZWxlbjsKICBzdGF0ZS53cml0ZWxlbiA9IDA7Cn0KCmZ1bmN0aW9uIG9ud3JpdGUoc3RyZWFtLCBlcikgewogIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKICB2YXIgc3luYyA9IHN0YXRlLnN5bmM7CiAgdmFyIGNiID0gc3RhdGUud3JpdGVjYjsKCiAgb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKTsKCiAgaWYgKGVyKSBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtlbHNlIHsKICAgIC8vIENoZWNrIGlmIHdlJ3JlIGFjdHVhbGx5IHJlYWR5IHRvIGZpbmlzaCwgYnV0IGRvbid0IGVtaXQgeWV0CiAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKTsKCiAgICBpZiAoIWZpbmlzaGVkICYmICFzdGF0ZS5jb3JrZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSB7CiAgICAgIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpOwogICAgfQoKICAgIGlmIChzeW5jKSB7CiAgICAgIC8qPHJlcGxhY2VtZW50PiovCiAgICAgIGFzeW5jV3JpdGUoYWZ0ZXJXcml0ZSwgc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTsKICAgICAgLyo8L3JlcGxhY2VtZW50PiovCiAgICB9IGVsc2UgewogICAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTsKICAgICAgfQogIH0KfQoKZnVuY3Rpb24gYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpIHsKICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7CiAgc3RhdGUucGVuZGluZ2NiLS07CiAgY2IoKTsKICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKfQoKLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3QKLy8gZW1pdCAnZHJhaW4nIGJlZm9yZSB0aGUgd3JpdGUoKSBjb25zdW1lciBnZXRzIHRoZSAnZmFsc2UnIHJldHVybgovLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLgpmdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkgewogIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUubmVlZERyYWluKSB7CiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTsKICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpOwogIH0KfQoKLy8gaWYgdGhlcmUncyBzb21ldGhpbmcgaW4gdGhlIGJ1ZmZlciB3YWl0aW5nLCB0aGVuIHByb2Nlc3MgaXQKZnVuY3Rpb24gY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSkgewogIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlOwogIHZhciBlbnRyeSA9IHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdDsKCiAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIGVudHJ5ICYmIGVudHJ5Lm5leHQpIHsKICAgIC8vIEZhc3QgY2FzZSwgd3JpdGUgZXZlcnl0aGluZyB1c2luZyBfd3JpdGV2KCkKICAgIHZhciBsID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQ7CiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5KGwpOwogICAgdmFyIGhvbGRlciA9IHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZTsKICAgIGhvbGRlci5lbnRyeSA9IGVudHJ5OwoKICAgIHZhciBjb3VudCA9IDA7CiAgICB3aGlsZSAoZW50cnkpIHsKICAgICAgYnVmZmVyW2NvdW50XSA9IGVudHJ5OwogICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7CiAgICAgIGNvdW50ICs9IDE7CiAgICB9CgogICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIGJ1ZmZlciwgJycsIGhvbGRlci5maW5pc2gpOwoKICAgIC8vIGRvV3JpdGUgaXMgYWxtb3N0IGFsd2F5cyBhc3luYywgZGVmZXIgdGhlc2UgdG8gc2F2ZSBhIGJpdCBvZiB0aW1lCiAgICAvLyBhcyB0aGUgaG90IHBhdGggZW5kcyB3aXRoIGRvV3JpdGUKICAgIHN0YXRlLnBlbmRpbmdjYisrOwogICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CiAgICBpZiAoaG9sZGVyLm5leHQpIHsKICAgICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gaG9sZGVyLm5leHQ7CiAgICAgIGhvbGRlci5uZXh0ID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IG5ldyBDb3JrZWRSZXF1ZXN0KHN0YXRlKTsKICAgIH0KICB9IGVsc2UgewogICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZQogICAgd2hpbGUgKGVudHJ5KSB7CiAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rOwogICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZzsKICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7CiAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKCiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDsKICAgICAgLy8gaWYgd2UgZGlkbid0IGNhbGwgdGhlIG9ud3JpdGUgaW1tZWRpYXRlbHksIHRoZW4KICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy4KICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseQogICAgICAvLyBiZWluZyBwcm9jZXNzZWQsIHNvIG1vdmUgdGhlIGJ1ZmZlciBjb3VudGVyIHBhc3QgdGhlbS4KICAgICAgaWYgKHN0YXRlLndyaXRpbmcpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChlbnRyeSA9PT0gbnVsbCkgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CiAgfQoKICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7CiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7CiAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOwp9CgpXcml0YWJsZS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICBjYihuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpKTsKfTsKCldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGV2ID0gbnVsbDsKCldyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CgogIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gY2h1bms7CiAgICBjaHVuayA9IG51bGw7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gZW5jb2Rpbmc7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfQoKICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCkgdGhpcy53cml0ZShjaHVuaywgZW5jb2RpbmcpOwoKICAvLyAuZW5kKCkgZnVsbHkgdW5jb3JrcwogIGlmIChzdGF0ZS5jb3JrZWQpIHsKICAgIHN0YXRlLmNvcmtlZCA9IDE7CiAgICB0aGlzLnVuY29yaygpOwogIH0KCiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLgogIGlmICghc3RhdGUuZW5kaW5nICYmICFzdGF0ZS5maW5pc2hlZCkgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTsKfTsKCmZ1bmN0aW9uIG5lZWRGaW5pc2goc3RhdGUpIHsKICByZXR1cm4gc3RhdGUuZW5kaW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPT09IG51bGwgJiYgIXN0YXRlLmZpbmlzaGVkICYmICFzdGF0ZS53cml0aW5nOwp9CgpmdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkgewogIGlmICghc3RhdGUucHJlZmluaXNoZWQpIHsKICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTsKICB9Cn0KCmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHsKICB2YXIgbmVlZCA9IG5lZWRGaW5pc2goc3RhdGUpOwogIGlmIChuZWVkKSB7CiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7CiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTsKICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlOwogICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7CiAgICB9IGVsc2UgewogICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7CiAgICB9CiAgfQogIHJldHVybiBuZWVkOwp9CgpmdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikgewogIHN0YXRlLmVuZGluZyA9IHRydWU7CiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7CiAgaWYgKGNiKSB7CiAgICBpZiAoc3RhdGUuZmluaXNoZWQpIHByb2Nlc3NOZXh0VGljayhjYik7ZWxzZSBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpOwogIH0KICBzdGF0ZS5lbmRlZCA9IHRydWU7CiAgc3RyZWFtLndyaXRhYmxlID0gZmFsc2U7Cn0KCi8vIEl0IHNlZW1zIGEgbGlua2VkIGxpc3QgYnV0IGl0IGlzIG5vdAovLyB0aGVyZSB3aWxsIGJlIG9ubHkgMiBvZiB0aGVzZSBmb3IgZWFjaCBzdHJlYW0KZnVuY3Rpb24gQ29ya2VkUmVxdWVzdChzdGF0ZSkgewogIHZhciBfdGhpcyA9IHRoaXM7CgogIHRoaXMubmV4dCA9IG51bGw7CiAgdGhpcy5lbnRyeSA9IG51bGw7CgogIHRoaXMuZmluaXNoID0gZnVuY3Rpb24gKGVycikgewogICAgdmFyIGVudHJ5ID0gX3RoaXMuZW50cnk7CiAgICBfdGhpcy5lbnRyeSA9IG51bGw7CiAgICB3aGlsZSAoZW50cnkpIHsKICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7CiAgICAgIHN0YXRlLnBlbmRpbmdjYi0tOwogICAgICBjYihlcnIpOwogICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7CiAgICB9CiAgICBpZiAoc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlKSB7CiAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gX3RoaXM7CiAgICB9IGVsc2UgewogICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBfdGhpczsKICAgIH0KICB9Owp9Cn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKQp9LHsiLi9fc3RyZWFtX2R1cGxleCI6NzA1LCJfcHJvY2VzcyI6NzAzLCJidWZmZXIiOjUwNCwiYnVmZmVyLXNoaW1zIjo3MTAsImNvcmUtdXRpbC1pcyI6NzExLCJldmVudHMiOjcwMCwiaW5oZXJpdHMiOjcwMSwicHJvY2Vzcy1uZXh0aWNrLWFyZ3MiOjcxMywidXRpbC1kZXByZWNhdGUiOjcxNH1dLDcxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpOwp2YXIgQnVmZmVyID0gYnVmZmVyLkJ1ZmZlcjsKdmFyIFNsb3dCdWZmZXIgPSBidWZmZXIuU2xvd0J1ZmZlcjsKdmFyIE1BWF9MRU4gPSBidWZmZXIua01heExlbmd0aCB8fCAyMTQ3NDgzNjQ3OwpleHBvcnRzLmFsbG9jID0gZnVuY3Rpb24gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKICBpZiAodHlwZW9mIEJ1ZmZlci5hbGxvYyA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIEJ1ZmZlci5hbGxvYyhzaXplLCBmaWxsLCBlbmNvZGluZyk7CiAgfQogIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdudW1iZXInKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IG5vdCBiZSBudW1iZXInKTsKICB9CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgfQogIGlmIChzaXplID4gTUFYX0xFTikgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NpemUgaXMgdG9vIGxhcmdlJyk7CiAgfQogIHZhciBlbmMgPSBlbmNvZGluZzsKICB2YXIgX2ZpbGwgPSBmaWxsOwogIGlmIChfZmlsbCA9PT0gdW5kZWZpbmVkKSB7CiAgICBlbmMgPSB1bmRlZmluZWQ7CiAgICBfZmlsbCA9IDA7CiAgfQogIHZhciBidWYgPSBuZXcgQnVmZmVyKHNpemUpOwogIGlmICh0eXBlb2YgX2ZpbGwgPT09ICdzdHJpbmcnKSB7CiAgICB2YXIgZmlsbEJ1ZiA9IG5ldyBCdWZmZXIoX2ZpbGwsIGVuYyk7CiAgICB2YXIgZmxlbiA9IGZpbGxCdWYubGVuZ3RoOwogICAgdmFyIGkgPSAtMTsKICAgIHdoaWxlICgrK2kgPCBzaXplKSB7CiAgICAgIGJ1ZltpXSA9IGZpbGxCdWZbaSAlIGZsZW5dOwogICAgfQogIH0gZWxzZSB7CiAgICBidWYuZmlsbChfZmlsbCk7CiAgfQogIHJldHVybiBidWY7Cn0KZXhwb3J0cy5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIGFsbG9jVW5zYWZlKHNpemUpIHsKICBpZiAodHlwZW9mIEJ1ZmZlci5hbGxvY1Vuc2FmZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIEJ1ZmZlci5hbGxvY1Vuc2FmZShzaXplKTsKICB9CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgfQogIGlmIChzaXplID4gTUFYX0xFTikgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NpemUgaXMgdG9vIGxhcmdlJyk7CiAgfQogIHJldHVybiBuZXcgQnVmZmVyKHNpemUpOwp9CmV4cG9ydHMuZnJvbSA9IGZ1bmN0aW9uIGZyb20odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogIGlmICh0eXBlb2YgQnVmZmVyLmZyb20gPT09ICdmdW5jdGlvbicgJiYgKCFnbG9iYWwuVWludDhBcnJheSB8fCBVaW50OEFycmF5LmZyb20gIT09IEJ1ZmZlci5mcm9tKSkgewogICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogIH0KICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpOwogIH0KICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpOwogIH0KICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICB2YXIgb2Zmc2V0ID0gZW5jb2RpbmdPck9mZnNldDsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7CiAgICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbHVlKTsKICAgIH0KICAgIGlmICh0eXBlb2Ygb2Zmc2V0ID09PSAndW5kZWZpbmVkJykgewogICAgICBvZmZzZXQgPSAwOwogICAgfQogICAgdmFyIGxlbiA9IGxlbmd0aDsKICAgIGlmICh0eXBlb2YgbGVuID09PSAndW5kZWZpbmVkJykgewogICAgICBsZW4gPSB2YWx1ZS5ieXRlTGVuZ3RoIC0gb2Zmc2V0OwogICAgfQogICAgaWYgKG9mZnNldCA+PSB2YWx1ZS5ieXRlTGVuZ3RoKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcJ29mZnNldFwnIGlzIG91dCBvZiBib3VuZHMnKTsKICAgIH0KICAgIGlmIChsZW4gPiB2YWx1ZS5ieXRlTGVuZ3RoIC0gb2Zmc2V0KSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcJ2xlbmd0aFwnIGlzIG91dCBvZiBib3VuZHMnKTsKICAgIH0KICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbHVlLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbGVuKSk7CiAgfQogIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsdWUpKSB7CiAgICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcih2YWx1ZS5sZW5ndGgpOwogICAgdmFsdWUuY29weShvdXQsIDAsIDAsIHZhbHVlLmxlbmd0aCk7CiAgICByZXR1cm4gb3V0OwogIH0KICBpZiAodmFsdWUpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gdmFsdWUpIHsKICAgICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUpOwogICAgfQogICAgaWYgKHZhbHVlLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSkpIHsKICAgICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUuZGF0YSk7CiAgICB9CiAgfQoKICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsICcgKyAnQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKTsKfQpleHBvcnRzLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIGFsbG9jVW5zYWZlU2xvdyhzaXplKSB7CiAgaWYgKHR5cGVvZiBCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyhzaXplKTsKICB9CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgfQogIGlmIChzaXplID49IE1BWF9MRU4pIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdzaXplIGlzIHRvbyBsYXJnZScpOwogIH0KICByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc2l6ZSk7Cn0KCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHsiYnVmZmVyIjo1MDR9XSw3MTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCi8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYAovLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC4KCmZ1bmN0aW9uIGlzQXJyYXkoYXJnKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkpIHsKICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7CiAgfQogIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nOwp9CmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7CgpmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJzsKfQpleHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjsKCmZ1bmN0aW9uIGlzTnVsbChhcmcpIHsKICByZXR1cm4gYXJnID09PSBudWxsOwp9CmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsOwoKZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PSBudWxsOwp9CmV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDsKCmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJzsKfQpleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7CgpmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7Cn0KZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nOwoKZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnOwp9CmV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDsKCmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykgewogIHJldHVybiBhcmcgPT09IHZvaWQgMDsKfQpleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7CgpmdW5jdGlvbiBpc1JlZ0V4cChyZSkgewogIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nOwp9CmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDsKCmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7Cn0KZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0OwoKZnVuY3Rpb24gaXNEYXRlKGQpIHsKICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJzsKfQpleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTsKCmZ1bmN0aW9uIGlzRXJyb3IoZSkgewogIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTsKfQpleHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yOwoKZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKfQpleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uOwoKZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2wKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7Cn0KZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlOwoKZXhwb3J0cy5pc0J1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcjsKCmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pOwp9Cgp9KS5jYWxsKHRoaXMseyJpc0J1ZmZlciI6cmVxdWlyZSgiLi4vLi4vLi4vLi4vaW5zZXJ0LW1vZHVsZS1nbG9iYWxzL25vZGVfbW9kdWxlcy9pcy1idWZmZXIvaW5kZXguanMiKX0pCn0seyIuLi8uLi8uLi8uLi9pbnNlcnQtbW9kdWxlLWdsb2JhbHMvbm9kZV9tb2R1bGVzL2lzLWJ1ZmZlci9pbmRleC5qcyI6NzAyfV0sNzEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKYXJndW1lbnRzWzRdWzUwN11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjUwN31dLDcxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocHJvY2Vzcyl7Cid1c2Ugc3RyaWN0JzsKCmlmICghcHJvY2Vzcy52ZXJzaW9uIHx8CiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjAuJykgPT09IDAgfHwKICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MS4nKSA9PT0gMCAmJiBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuOC4nKSAhPT0gMCkgewogIG1vZHVsZS5leHBvcnRzID0gbmV4dFRpY2s7Cn0gZWxzZSB7CiAgbW9kdWxlLmV4cG9ydHMgPSBwcm9jZXNzLm5leHRUaWNrOwp9CgpmdW5jdGlvbiBuZXh0VGljayhmbiwgYXJnMSwgYXJnMiwgYXJnMykgewogIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJjYWxsYmFjayIgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CiAgfQogIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOwogIHZhciBhcmdzLCBpOwogIHN3aXRjaCAobGVuKSB7CiAgY2FzZSAwOgogIGNhc2UgMToKICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZuKTsKICBjYXNlIDI6CiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tPbmUoKSB7CiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSk7CiAgICB9KTsKICBjYXNlIDM6CiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tUd28oKSB7CiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSwgYXJnMik7CiAgICB9KTsKICBjYXNlIDQ6CiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tUaHJlZSgpIHsKICAgICAgZm4uY2FsbChudWxsLCBhcmcxLCBhcmcyLCBhcmczKTsKICAgIH0pOwogIGRlZmF1bHQ6CiAgICBhcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpOwogICAgaSA9IDA7CiAgICB3aGlsZSAoaSA8IGFyZ3MubGVuZ3RoKSB7CiAgICAgIGFyZ3NbaSsrXSA9IGFyZ3VtZW50c1tpXTsKICAgIH0KICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGljaygpIHsKICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7CiAgICB9KTsKICB9Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpKQp9LHsiX3Byb2Nlc3MiOjcwM31dLDcxNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKCi8qKgogKiBNb2R1bGUgZXhwb3J0cy4KICovCgptb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZTsKCi8qKgogKiBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLgogKiBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LgogKgogKiBJZiBgbG9jYWxTdG9yYWdlLm5vRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC4KICoKICogSWYgYGxvY2FsU3RvcmFnZS50aHJvd0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zCiAqIHdpbGwgdGhyb3cgYW4gRXJyb3Igd2hlbiBpbnZva2VkLgogKgogKiBJZiBgbG9jYWxTdG9yYWdlLnRyYWNlRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnMKICogd2lsbCBpbnZva2UgYGNvbnNvbGUudHJhY2UoKWAgaW5zdGVhZCBvZiBgY29uc29sZS5lcnJvcigpYC4KICoKICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSB0aGUgZnVuY3Rpb24gdG8gZGVwcmVjYXRlCiAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgLSB0aGUgc3RyaW5nIHRvIHByaW50IHRvIHRoZSBjb25zb2xlIHdoZW4gYGZuYCBpcyBpbnZva2VkCiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gYSBuZXcgImRlcHJlY2F0ZWQiIHZlcnNpb24gb2YgYGZuYAogKiBAYXBpIHB1YmxpYwogKi8KCmZ1bmN0aW9uIGRlcHJlY2F0ZSAoZm4sIG1zZykgewogIGlmIChjb25maWcoJ25vRGVwcmVjYXRpb24nKSkgewogICAgcmV0dXJuIGZuOwogIH0KCiAgdmFyIHdhcm5lZCA9IGZhbHNlOwogIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7CiAgICBpZiAoIXdhcm5lZCkgewogICAgICBpZiAoY29uZmlnKCd0aHJvd0RlcHJlY2F0aW9uJykpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTsKICAgICAgfSBlbHNlIGlmIChjb25maWcoJ3RyYWNlRGVwcmVjYXRpb24nKSkgewogICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLndhcm4obXNnKTsKICAgICAgfQogICAgICB3YXJuZWQgPSB0cnVlOwogICAgfQogICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICByZXR1cm4gZGVwcmVjYXRlZDsKfQoKLyoqCiAqIENoZWNrcyBgbG9jYWxTdG9yYWdlYCBmb3IgYm9vbGVhbiB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBgbmFtZWAuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lCiAqIEByZXR1cm5zIHtCb29sZWFufQogKiBAYXBpIHByaXZhdGUKICovCgpmdW5jdGlvbiBjb25maWcgKG5hbWUpIHsKICAvLyBhY2Nlc3NpbmcgZ2xvYmFsLmxvY2FsU3RvcmFnZSBjYW4gdHJpZ2dlciBhIERPTUV4Y2VwdGlvbiBpbiBzYW5kYm94ZWQgaWZyYW1lcwogIHRyeSB7CiAgICBpZiAoIWdsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTsKICB9IGNhdGNoIChfKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHZhciB2YWwgPSBnbG9iYWwubG9jYWxTdG9yYWdlW25hbWVdOwogIGlmIChudWxsID09IHZhbCkgcmV0dXJuIGZhbHNlOwogIHJldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7Cn0KCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSw3MTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoIi4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiKQoKfSx7Ii4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiOjcwNn1dLDcxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocHJvY2Vzcyl7CnZhciBTdHJlYW0gPSAoZnVuY3Rpb24gKCl7CiAgdHJ5IHsKICAgIHJldHVybiByZXF1aXJlKCdzdCcgKyAncmVhbScpOyAvLyBoYWNrIHRvIGZpeCBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgaXNzdWUgd2hlbiB1c2VkIHdpdGggYnJvd3NlcmlmeQogIH0gY2F0Y2goXyl7fQp9KCkpOwpleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzJyk7CmV4cG9ydHMuU3RyZWFtID0gU3RyZWFtIHx8IGV4cG9ydHM7CmV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzOwpleHBvcnRzLldyaXRhYmxlID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcycpOwpleHBvcnRzLkR1cGxleCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fZHVwbGV4LmpzJyk7CmV4cG9ydHMuVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMnKTsKZXhwb3J0cy5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMnKTsKCmlmICghcHJvY2Vzcy5icm93c2VyICYmIHByb2Nlc3MuZW52LlJFQURBQkxFX1NUUkVBTSA9PT0gJ2Rpc2FibGUnICYmIFN0cmVhbSkgewogIG1vZHVsZS5leHBvcnRzID0gU3RyZWFtOwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSkKfSx7Ii4vbGliL19zdHJlYW1fZHVwbGV4LmpzIjo3MDUsIi4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiOjcwNiwiLi9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcyI6NzA3LCIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyI6NzA4LCIuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIjo3MDksIl9wcm9jZXNzIjo3MDN9XSw3MTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoIi4vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzIikKCn0seyIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyI6NzA4fV0sNzE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCIuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIikKCn0seyIuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIjo3MDl9XSw3MTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgptb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTsKCnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCmluaGVyaXRzKFN0cmVhbSwgRUUpOwpTdHJlYW0uUmVhZGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMnKTsKU3RyZWFtLldyaXRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3dyaXRhYmxlLmpzJyk7ClN0cmVhbS5EdXBsZXggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzJyk7ClN0cmVhbS5UcmFuc2Zvcm0gPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzJyk7ClN0cmVhbS5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcycpOwoKLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC40LngKU3RyZWFtLlN0cmVhbSA9IFN0cmVhbTsKCgoKLy8gb2xkLXN0eWxlIHN0cmVhbXMuICBOb3RlIHRoYXQgdGhlIHBpcGUgbWV0aG9kICh0aGUgb25seSByZWxldmFudAovLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLgoKZnVuY3Rpb24gU3RyZWFtKCkgewogIEVFLmNhbGwodGhpcyk7Cn0KClN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHsKICB2YXIgc291cmNlID0gdGhpczsKCiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7CiAgICBpZiAoZGVzdC53cml0YWJsZSkgewogICAgICBpZiAoZmFsc2UgPT09IGRlc3Qud3JpdGUoY2h1bmspICYmIHNvdXJjZS5wYXVzZSkgewogICAgICAgIHNvdXJjZS5wYXVzZSgpOwogICAgICB9CiAgICB9CiAgfQoKICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpOwoKICBmdW5jdGlvbiBvbmRyYWluKCkgewogICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7CiAgICAgIHNvdXJjZS5yZXN1bWUoKTsKICAgIH0KICB9CgogIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7CgogIC8vIElmIHRoZSAnZW5kJyBvcHRpb24gaXMgbm90IHN1cHBsaWVkLCBkZXN0LmVuZCgpIHdpbGwgYmUgY2FsbGVkIHdoZW4KICAvLyBzb3VyY2UgZ2V0cyB0aGUgJ2VuZCcgb3IgJ2Nsb3NlJyBldmVudHMuICBPbmx5IGRlc3QuZW5kKCkgb25jZS4KICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHsKICAgIHNvdXJjZS5vbignZW5kJywgb25lbmQpOwogICAgc291cmNlLm9uKCdjbG9zZScsIG9uY2xvc2UpOwogIH0KCiAgdmFyIGRpZE9uRW5kID0gZmFsc2U7CiAgZnVuY3Rpb24gb25lbmQoKSB7CiAgICBpZiAoZGlkT25FbmQpIHJldHVybjsKICAgIGRpZE9uRW5kID0gdHJ1ZTsKCiAgICBkZXN0LmVuZCgpOwogIH0KCgogIGZ1bmN0aW9uIG9uY2xvc2UoKSB7CiAgICBpZiAoZGlkT25FbmQpIHJldHVybjsKICAgIGRpZE9uRW5kID0gdHJ1ZTsKCiAgICBpZiAodHlwZW9mIGRlc3QuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgZGVzdC5kZXN0cm95KCk7CiAgfQoKICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuCiAgZnVuY3Rpb24gb25lcnJvcihlcikgewogICAgY2xlYW51cCgpOwogICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHsKICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gcGlwZS4KICAgIH0KICB9CgogIHNvdXJjZS5vbignZXJyb3InLCBvbmVycm9yKTsKICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpOwoKICAvLyByZW1vdmUgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGFkZGVkLgogIGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTsKCiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTsKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTsKCiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwoKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7CiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7CgogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTsKICB9CgogIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7CiAgc291cmNlLm9uKCdjbG9zZScsIGNsZWFudXApOwoKICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApOwoKICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpOwoKICAvLyBBbGxvdyBmb3IgdW5peC1saWtlIHVzYWdlOiBBLnBpcGUoQikucGlwZShDKQogIHJldHVybiBkZXN0Owp9OwoKfSx7ImV2ZW50cyI6NzAwLCJpbmhlcml0cyI6NzAxLCJyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzIjo3MDQsInJlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyI6NzE1LCJyZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMiOjcxNiwicmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcyI6NzE3LCJyZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMiOjcxOH1dLDcyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7Cgp2YXIgaXNCdWZmZXJFbmNvZGluZyA9IEJ1ZmZlci5pc0VuY29kaW5nCiAgfHwgZnVuY3Rpb24oZW5jb2RpbmcpIHsKICAgICAgIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkgewogICAgICAgICBjYXNlICdoZXgnOiBjYXNlICd1dGY4JzogY2FzZSAndXRmLTgnOiBjYXNlICdhc2NpaSc6IGNhc2UgJ2JpbmFyeSc6IGNhc2UgJ2Jhc2U2NCc6IGNhc2UgJ3VjczInOiBjYXNlICd1Y3MtMic6IGNhc2UgJ3V0ZjE2bGUnOiBjYXNlICd1dGYtMTZsZSc6IGNhc2UgJ3Jhdyc6IHJldHVybiB0cnVlOwogICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7CiAgICAgICB9CiAgICAgfQoKCmZ1bmN0aW9uIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKSB7CiAgaWYgKGVuY29kaW5nICYmICFpc0J1ZmZlckVuY29kaW5nKGVuY29kaW5nKSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpOwogIH0KfQoKLy8gU3RyaW5nRGVjb2RlciBwcm92aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVmZmljaWVudGx5IHNwbGl0dGluZyBhIHNlcmllcyBvZgovLyBidWZmZXJzIGludG8gYSBzZXJpZXMgb2YgSlMgc3RyaW5ncyB3aXRob3V0IGJyZWFraW5nIGFwYXJ0IG11bHRpLWJ5dGUKLy8gY2hhcmFjdGVycy4gQ0VTVS04IGlzIGhhbmRsZWQgYXMgcGFydCBvZiB0aGUgVVRGLTggZW5jb2RpbmcuCi8vCi8vIEBUT0RPIEhhbmRsaW5nIGFsbCBlbmNvZGluZ3MgaW5zaWRlIGEgc2luZ2xlIG9iamVjdCBtYWtlcyBpdCB2ZXJ5IGRpZmZpY3VsdAovLyB0byByZWFzb24gYWJvdXQgdGhpcyBjb2RlLCBzbyBpdCBzaG91bGQgYmUgc3BsaXQgdXAgaW4gdGhlIGZ1dHVyZS4KLy8gQFRPRE8gVGhlcmUgc2hvdWxkIGJlIGEgdXRmOC1zdHJpY3QgZW5jb2RpbmcgdGhhdCByZWplY3RzIGludmFsaWQgVVRGLTggY29kZQovLyBwb2ludHMgYXMgdXNlZCBieSBDRVNVLTguCnZhciBTdHJpbmdEZWNvZGVyID0gZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gZnVuY3Rpb24oZW5jb2RpbmcpIHsKICB0aGlzLmVuY29kaW5nID0gKGVuY29kaW5nIHx8ICd1dGY4JykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bLV9dLywgJycpOwogIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKTsKICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHsKICAgIGNhc2UgJ3V0ZjgnOgogICAgICAvLyBDRVNVLTggcmVwcmVzZW50cyBlYWNoIG9mIFN1cnJvZ2F0ZSBQYWlyIGJ5IDMtYnl0ZXMKICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMzsKICAgICAgYnJlYWs7CiAgICBjYXNlICd1Y3MyJzoKICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICAvLyBVVEYtMTYgcmVwcmVzZW50cyBlYWNoIG9mIFN1cnJvZ2F0ZSBQYWlyIGJ5IDItYnl0ZXMKICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMjsKICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXI7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnYmFzZTY0JzoKICAgICAgLy8gQmFzZS02NCBzdG9yZXMgMyBieXRlcyBpbiA0IGNoYXJzLCBhbmQgcGFkcyB0aGUgcmVtYWluZGVyLgogICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAzOwogICAgICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyID0gYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXI7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgdGhpcy53cml0ZSA9IHBhc3NUaHJvdWdoV3JpdGU7CiAgICAgIHJldHVybjsKICB9CgogIC8vIEVub3VnaCBzcGFjZSB0byBzdG9yZSBhbGwgYnl0ZXMgb2YgYSBzaW5nbGUgY2hhcmFjdGVyLiBVVEYtOCBuZWVkcyA0CiAgLy8gYnl0ZXMsIGJ1dCBDRVNVLTggbWF5IHJlcXVpcmUgdXAgdG8gNiAoMyBieXRlcyBwZXIgc3Vycm9nYXRlKS4KICB0aGlzLmNoYXJCdWZmZXIgPSBuZXcgQnVmZmVyKDYpOwogIC8vIE51bWJlciBvZiBieXRlcyByZWNlaXZlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci4KICB0aGlzLmNoYXJSZWNlaXZlZCA9IDA7CiAgLy8gTnVtYmVyIG9mIGJ5dGVzIGV4cGVjdGVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLgogIHRoaXMuY2hhckxlbmd0aCA9IDA7Cn07CgoKLy8gd3JpdGUgZGVjb2RlcyB0aGUgZ2l2ZW4gYnVmZmVyIGFuZCByZXR1cm5zIGl0IGFzIEpTIHN0cmluZyB0aGF0IGlzCi8vIGd1YXJhbnRlZWQgdG8gbm90IGNvbnRhaW4gYW55IHBhcnRpYWwgbXVsdGktYnl0ZSBjaGFyYWN0ZXJzLiBBbnkgcGFydGlhbAovLyBjaGFyYWN0ZXIgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGlzIGJ1ZmZlcmVkIHVwLCBhbmQgd2lsbCBiZQovLyByZXR1cm5lZCB3aGVuIGNhbGxpbmcgd3JpdGUgYWdhaW4gd2l0aCB0aGUgcmVtYWluaW5nIGJ5dGVzLgovLwovLyBOb3RlOiBDb252ZXJ0aW5nIGEgQnVmZmVyIGNvbnRhaW5pbmcgYW4gb3JwaGFuIHN1cnJvZ2F0ZSB0byBhIFN0cmluZwovLyBjdXJyZW50bHkgd29ya3MsIGJ1dCBjb252ZXJ0aW5nIGEgU3RyaW5nIHRvIGEgQnVmZmVyICh2aWEgYG5ldyBCdWZmZXJgLCBvcgovLyBCdWZmZXIjd3JpdGUpIHdpbGwgcmVwbGFjZSBpbmNvbXBsZXRlIHN1cnJvZ2F0ZXMgd2l0aCB0aGUgdW5pY29kZQovLyByZXBsYWNlbWVudCBjaGFyYWN0ZXIuIFNlZSBodHRwczovL2NvZGVyZXZpZXcuY2hyb21pdW0ub3JnLzEyMTE3MzAwOS8gLgpTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogIHZhciBjaGFyU3RyID0gJyc7CiAgLy8gaWYgb3VyIGxhc3Qgd3JpdGUgZW5kZWQgd2l0aCBhbiBpbmNvbXBsZXRlIG11bHRpYnl0ZSBjaGFyYWN0ZXIKICB3aGlsZSAodGhpcy5jaGFyTGVuZ3RoKSB7CiAgICAvLyBkZXRlcm1pbmUgaG93IG1hbnkgcmVtYWluaW5nIGJ5dGVzIHRoaXMgYnVmZmVyIGhhcyB0byBvZmZlciBmb3IgdGhpcyBjaGFyCiAgICB2YXIgYXZhaWxhYmxlID0gKGJ1ZmZlci5sZW5ndGggPj0gdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQpID8KICAgICAgICB0aGlzLmNoYXJMZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCA6CiAgICAgICAgYnVmZmVyLmxlbmd0aDsKCiAgICAvLyBhZGQgdGhlIG5ldyBieXRlcyB0byB0aGUgY2hhciBidWZmZXIKICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgdGhpcy5jaGFyUmVjZWl2ZWQsIDAsIGF2YWlsYWJsZSk7CiAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBhdmFpbGFibGU7CgogICAgaWYgKHRoaXMuY2hhclJlY2VpdmVkIDwgdGhpcy5jaGFyTGVuZ3RoKSB7CiAgICAgIC8vIHN0aWxsIG5vdCBlbm91Z2ggY2hhcnMgaW4gdGhpcyBidWZmZXI/IHdhaXQgZm9yIG1vcmUgLi4uCiAgICAgIHJldHVybiAnJzsKICAgIH0KCiAgICAvLyByZW1vdmUgYnl0ZXMgYmVsb25naW5nIHRvIHRoZSBjdXJyZW50IGNoYXJhY3RlciBmcm9tIHRoZSBidWZmZXIKICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShhdmFpbGFibGUsIGJ1ZmZlci5sZW5ndGgpOwoKICAgIC8vIGdldCB0aGUgY2hhcmFjdGVyIHRoYXQgd2FzIHNwbGl0CiAgICBjaGFyU3RyID0gdGhpcy5jaGFyQnVmZmVyLnNsaWNlKDAsIHRoaXMuY2hhckxlbmd0aCkudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7CgogICAgLy8gQ0VTVS04OiBsZWFkIHN1cnJvZ2F0ZSAoRDgwMC1EQkZGKSBpcyBhbHNvIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlcgogICAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGNoYXJTdHIubGVuZ3RoIC0gMSk7CiAgICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikgewogICAgICB0aGlzLmNoYXJMZW5ndGggKz0gdGhpcy5zdXJyb2dhdGVTaXplOwogICAgICBjaGFyU3RyID0gJyc7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgdGhpcy5jaGFyUmVjZWl2ZWQgPSB0aGlzLmNoYXJMZW5ndGggPSAwOwoKICAgIC8vIGlmIHRoZXJlIGFyZSBubyBtb3JlIGJ5dGVzIGluIHRoaXMgYnVmZmVyLCBqdXN0IGVtaXQgb3VyIGNoYXIKICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiBjaGFyU3RyOwogICAgfQogICAgYnJlYWs7CiAgfQoKICAvLyBkZXRlcm1pbmUgYW5kIHNldCBjaGFyTGVuZ3RoIC8gY2hhclJlY2VpdmVkCiAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpOwoKICB2YXIgZW5kID0gYnVmZmVyLmxlbmd0aDsKICBpZiAodGhpcy5jaGFyTGVuZ3RoKSB7CiAgICAvLyBidWZmZXIgdGhlIGluY29tcGxldGUgY2hhcmFjdGVyIGJ5dGVzIHdlIGdvdAogICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCBidWZmZXIubGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQsIGVuZCk7CiAgICBlbmQgLT0gdGhpcy5jaGFyUmVjZWl2ZWQ7CiAgfQoKICBjaGFyU3RyICs9IGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCBlbmQpOwoKICB2YXIgZW5kID0gY2hhclN0ci5sZW5ndGggLSAxOwogIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChlbmQpOwogIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIKICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikgewogICAgdmFyIHNpemUgPSB0aGlzLnN1cnJvZ2F0ZVNpemU7CiAgICB0aGlzLmNoYXJMZW5ndGggKz0gc2l6ZTsKICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IHNpemU7CiAgICB0aGlzLmNoYXJCdWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHNpemUsIDAsIHNpemUpOwogICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCAwLCBzaXplKTsKICAgIHJldHVybiBjaGFyU3RyLnN1YnN0cmluZygwLCBlbmQpOwogIH0KCiAgLy8gb3IganVzdCBlbWl0IHRoZSBjaGFyU3RyCiAgcmV0dXJuIGNoYXJTdHI7Cn07CgovLyBkZXRlY3RJbmNvbXBsZXRlQ2hhciBkZXRlcm1pbmVzIGlmIHRoZXJlIGlzIGFuIGluY29tcGxldGUgVVRGLTggY2hhcmFjdGVyIGF0Ci8vIHRoZSBlbmQgb2YgdGhlIGdpdmVuIGJ1ZmZlci4gSWYgc28sIGl0IHNldHMgdGhpcy5jaGFyTGVuZ3RoIHRvIHRoZSBieXRlCi8vIGxlbmd0aCB0aGF0IGNoYXJhY3RlciwgYW5kIHNldHMgdGhpcy5jaGFyUmVjZWl2ZWQgdG8gdGhlIG51bWJlciBvZiBieXRlcwovLyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoaXMgY2hhcmFjdGVyLgpTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogIC8vIGRldGVybWluZSBob3cgbWFueSBieXRlcyB3ZSBoYXZlIHRvIGNoZWNrIGF0IHRoZSBlbmQgb2YgdGhpcyBidWZmZXIKICB2YXIgaSA9IChidWZmZXIubGVuZ3RoID49IDMpID8gMyA6IGJ1ZmZlci5sZW5ndGg7CgogIC8vIEZpZ3VyZSBvdXQgaWYgb25lIG9mIHRoZSBsYXN0IGkgYnl0ZXMgb2Ygb3VyIGJ1ZmZlciBhbm5vdW5jZXMgYW4KICAvLyBpbmNvbXBsZXRlIGNoYXIuCiAgZm9yICg7IGkgPiAwOyBpLS0pIHsKICAgIHZhciBjID0gYnVmZmVyW2J1ZmZlci5sZW5ndGggLSBpXTsKCiAgICAvLyBTZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VVEYtOCNEZXNjcmlwdGlvbgoKICAgIC8vIDExMFhYWFhYCiAgICBpZiAoaSA9PSAxICYmIGMgPj4gNSA9PSAweDA2KSB7CiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDI7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIDExMTBYWFhYCiAgICBpZiAoaSA8PSAyICYmIGMgPj4gNCA9PSAweDBFKSB7CiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDM7CiAgICAgIGJyZWFrOwogICAgfQoKICAgIC8vIDExMTEwWFhYCiAgICBpZiAoaSA8PSAzICYmIGMgPj4gMyA9PSAweDFFKSB7CiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDQ7CiAgICAgIGJyZWFrOwogICAgfQogIH0KICB0aGlzLmNoYXJSZWNlaXZlZCA9IGk7Cn07CgpTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihidWZmZXIpIHsKICB2YXIgcmVzID0gJyc7CiAgaWYgKGJ1ZmZlciAmJiBidWZmZXIubGVuZ3RoKQogICAgcmVzID0gdGhpcy53cml0ZShidWZmZXIpOwoKICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQpIHsKICAgIHZhciBjciA9IHRoaXMuY2hhclJlY2VpdmVkOwogICAgdmFyIGJ1ZiA9IHRoaXMuY2hhckJ1ZmZlcjsKICAgIHZhciBlbmMgPSB0aGlzLmVuY29kaW5nOwogICAgcmVzICs9IGJ1Zi5zbGljZSgwLCBjcikudG9TdHJpbmcoZW5jKTsKICB9CgogIHJldHVybiByZXM7Cn07CgpmdW5jdGlvbiBwYXNzVGhyb3VnaFdyaXRlKGJ1ZmZlcikgewogIHJldHVybiBidWZmZXIudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7Cn0KCmZ1bmN0aW9uIHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7CiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMjsKICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDIgOiAwOwp9CgpmdW5jdGlvbiBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHsKICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAzOwogIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMyA6IDA7Cn0KCn0seyJidWZmZXIiOjUwNH1dLDcyMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNCdWZmZXIoYXJnKSB7CiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JwogICAgJiYgdHlwZW9mIGFyZy5jb3B5ID09PSAnZnVuY3Rpb24nCiAgICAmJiB0eXBlb2YgYXJnLmZpbGwgPT09ICdmdW5jdGlvbicKICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nOwp9Cn0se31dLDcyMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwpewovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgp2YXIgZm9ybWF0UmVnRXhwID0gLyVbc2RqJV0vZzsKZXhwb3J0cy5mb3JtYXQgPSBmdW5jdGlvbihmKSB7CiAgaWYgKCFpc1N0cmluZyhmKSkgewogICAgdmFyIG9iamVjdHMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpOwogICAgfQogICAgcmV0dXJuIG9iamVjdHMuam9pbignICcpOwogIH0KCiAgdmFyIGkgPSAxOwogIHZhciBhcmdzID0gYXJndW1lbnRzOwogIHZhciBsZW4gPSBhcmdzLmxlbmd0aDsKICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7CiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJzsKICAgIGlmIChpID49IGxlbikgcmV0dXJuIHg7CiAgICBzd2l0Y2ggKHgpIHsKICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7CiAgICAgIGNhc2UgJyVkJzogcmV0dXJuIE51bWJlcihhcmdzW2krK10pOwogICAgICBjYXNlICclaic6CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmdzW2krK10pOwogICAgICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7CiAgICAgICAgfQogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiB4OwogICAgfQogIH0pOwogIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7CiAgICBpZiAoaXNOdWxsKHgpIHx8ICFpc09iamVjdCh4KSkgewogICAgICBzdHIgKz0gJyAnICsgeDsKICAgIH0gZWxzZSB7CiAgICAgIHN0ciArPSAnICcgKyBpbnNwZWN0KHgpOwogICAgfQogIH0KICByZXR1cm4gc3RyOwp9OwoKCi8vIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuCi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuCi8vIElmIC0tbm8tZGVwcmVjYXRpb24gaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuCmV4cG9ydHMuZGVwcmVjYXRlID0gZnVuY3Rpb24oZm4sIG1zZykgewogIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuCiAgaWYgKGlzVW5kZWZpbmVkKGdsb2JhbC5wcm9jZXNzKSkgewogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfQoKICBpZiAocHJvY2Vzcy5ub0RlcHJlY2F0aW9uID09PSB0cnVlKSB7CiAgICByZXR1cm4gZm47CiAgfQoKICB2YXIgd2FybmVkID0gZmFsc2U7CiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHsKICAgIGlmICghd2FybmVkKSB7CiAgICAgIGlmIChwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTsKICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pIHsKICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5lcnJvcihtc2cpOwogICAgICB9CiAgICAgIHdhcm5lZCA9IHRydWU7CiAgICB9CiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIHJldHVybiBkZXByZWNhdGVkOwp9OwoKCnZhciBkZWJ1Z3MgPSB7fTsKdmFyIGRlYnVnRW52aXJvbjsKZXhwb3J0cy5kZWJ1Z2xvZyA9IGZ1bmN0aW9uKHNldCkgewogIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKQogICAgZGVidWdFbnZpcm9uID0gcHJvY2Vzcy5lbnYuTk9ERV9ERUJVRyB8fCAnJzsKICBzZXQgPSBzZXQudG9VcHBlckNhc2UoKTsKICBpZiAoIWRlYnVnc1tzZXRdKSB7CiAgICBpZiAobmV3IFJlZ0V4cCgnXFxiJyArIHNldCArICdcXGInLCAnaScpLnRlc3QoZGVidWdFbnZpcm9uKSkgewogICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7CiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG1zZyA9IGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7CiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307CiAgICB9CiAgfQogIHJldHVybiBkZWJ1Z3Nbc2V0XTsKfTsKCgovKioKICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dAogKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy4KICoKICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC4KICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC4KICovCi8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi8KZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHsKICAvLyBkZWZhdWx0IG9wdGlvbnMKICB2YXIgY3R4ID0gewogICAgc2VlbjogW10sCiAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvcgogIH07CiAgLy8gbGVnYWN5Li4uCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdOwogIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107CiAgaWYgKGlzQm9vbGVhbihvcHRzKSkgewogICAgLy8gbGVnYWN5Li4uCiAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7CiAgfSBlbHNlIGlmIChvcHRzKSB7CiAgICAvLyBnb3QgYW4gIm9wdGlvbnMiIG9iamVjdAogICAgZXhwb3J0cy5fZXh0ZW5kKGN0eCwgb3B0cyk7CiAgfQogIC8vIHNldCBkZWZhdWx0IG9wdGlvbnMKICBpZiAoaXNVbmRlZmluZWQoY3R4LnNob3dIaWRkZW4pKSBjdHguc2hvd0hpZGRlbiA9IGZhbHNlOwogIGlmIChpc1VuZGVmaW5lZChjdHguZGVwdGgpKSBjdHguZGVwdGggPSAyOwogIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlOwogIGlmIChpc1VuZGVmaW5lZChjdHguY3VzdG9tSW5zcGVjdCkpIGN0eC5jdXN0b21JbnNwZWN0ID0gdHJ1ZTsKICBpZiAoY3R4LmNvbG9ycykgY3R4LnN0eWxpemUgPSBzdHlsaXplV2l0aENvbG9yOwogIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTsKfQpleHBvcnRzLmluc3BlY3QgPSBpbnNwZWN0OwoKCi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZSNncmFwaGljcwppbnNwZWN0LmNvbG9ycyA9IHsKICAnYm9sZCcgOiBbMSwgMjJdLAogICdpdGFsaWMnIDogWzMsIDIzXSwKICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sCiAgJ2ludmVyc2UnIDogWzcsIDI3XSwKICAnd2hpdGUnIDogWzM3LCAzOV0sCiAgJ2dyZXknIDogWzkwLCAzOV0sCiAgJ2JsYWNrJyA6IFszMCwgMzldLAogICdibHVlJyA6IFszNCwgMzldLAogICdjeWFuJyA6IFszNiwgMzldLAogICdncmVlbicgOiBbMzIsIDM5XSwKICAnbWFnZW50YScgOiBbMzUsIDM5XSwKICAncmVkJyA6IFszMSwgMzldLAogICd5ZWxsb3cnIDogWzMzLCAzOV0KfTsKCi8vIERvbid0IHVzZSAnYmx1ZScgbm90IHZpc2libGUgb24gY21kLmV4ZQppbnNwZWN0LnN0eWxlcyA9IHsKICAnc3BlY2lhbCc6ICdjeWFuJywKICAnbnVtYmVyJzogJ3llbGxvdycsCiAgJ2Jvb2xlYW4nOiAneWVsbG93JywKICAndW5kZWZpbmVkJzogJ2dyZXknLAogICdudWxsJzogJ2JvbGQnLAogICdzdHJpbmcnOiAnZ3JlZW4nLAogICdkYXRlJzogJ21hZ2VudGEnLAogIC8vICJuYW1lIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZwogICdyZWdleHAnOiAncmVkJwp9OwoKCmZ1bmN0aW9uIHN0eWxpemVXaXRoQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHsKICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdOwoKICBpZiAoc3R5bGUpIHsKICAgIHJldHVybiAnXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMF0gKyAnbScgKyBzdHIgKwogICAgICAgICAgICdcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJzsKICB9IGVsc2UgewogICAgcmV0dXJuIHN0cjsKICB9Cn0KCgpmdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkgewogIHJldHVybiBzdHI7Cn0KCgpmdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkgewogIHZhciBoYXNoID0ge307CgogIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHsKICAgIGhhc2hbdmFsXSA9IHRydWU7CiAgfSk7CgogIHJldHVybiBoYXNoOwp9CgoKZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7CiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLgogIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdAogIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJgogICAgICB2YWx1ZSAmJgogICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmCiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbAogICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiYKICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suCiAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHsKICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTsKICAgIGlmICghaXNTdHJpbmcocmV0KSkgewogICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQoKICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllcwogIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7CiAgaWYgKHByaW1pdGl2ZSkgewogICAgcmV0dXJuIHByaW1pdGl2ZTsKICB9CgogIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC4KICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTsKICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTsKCiAgaWYgKGN0eC5zaG93SGlkZGVuKSB7CiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpOwogIH0KCiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZQogIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4CiAgaWYgKGlzRXJyb3IodmFsdWUpCiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkgewogICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTsKICB9CgogIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC4KICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHsKICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkgewogICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnOwogICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpOwogICAgfQogICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkgewogICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpOwogICAgfQogICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpOwogICAgfQogICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7CiAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7CiAgICB9CiAgfQoKICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddOwoKICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5CiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7CiAgICBhcnJheSA9IHRydWU7CiAgICBicmFjZXMgPSBbJ1snLCAnXSddOwogIH0KCiAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zCiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7CiAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnOwogICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7CiAgfQoKICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwcwogIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHsKICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpOwogIH0KCiAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlCiAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHsKICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTsKICB9CgogIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3IKICBpZiAoaXNFcnJvcih2YWx1ZSkpIHsKICAgIGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7CiAgfQoKICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHsKICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdOwogIH0KCiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHsKICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpOwogICAgfQogIH0KCiAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7CgogIHZhciBvdXRwdXQ7CiAgaWYgKGFycmF5KSB7CiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTsKICB9IGVsc2UgewogICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7CiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTsKICAgIH0pOwogIH0KCiAgY3R4LnNlZW4ucG9wKCk7CgogIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7Cn0KCgpmdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkgewogIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpCiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTsKICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7CiAgICB2YXIgc2ltcGxlID0gJ1wnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eInwiJC9nLCAnJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgIlxcJyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCIvZywgJyInKSArICdcJyc7CiAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7CiAgfQogIGlmIChpc051bWJlcih2YWx1ZSkpCiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpOwogIGlmIChpc0Jvb2xlYW4odmFsdWUpKQogICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7CiAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzICJvYmplY3QiLCBzbyBzcGVjaWFsIGNhc2UgaGVyZS4KICBpZiAoaXNOdWxsKHZhbHVlKSkKICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7Cn0KCgpmdW5jdGlvbiBmb3JtYXRFcnJvcih2YWx1ZSkgewogIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7Cn0KCgpmdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7CiAgdmFyIG91dHB1dCA9IFtdOwogIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7CiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHsKICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywKICAgICAgICAgIFN0cmluZyhpKSwgdHJ1ZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3V0cHV0LnB1c2goJycpOwogICAgfQogIH0KICBrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICBpZiAoIWtleS5tYXRjaCgvXlxkKyQvKSkgewogICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLAogICAgICAgICAga2V5LCB0cnVlKSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIG91dHB1dDsKfQoKCmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHsKICB2YXIgbmFtZSwgc3RyLCBkZXNjOwogIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTsKICBpZiAoZGVzYy5nZXQpIHsKICAgIGlmIChkZXNjLnNldCkgewogICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmIChkZXNjLnNldCkgewogICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpOwogICAgfQogIH0KICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7CiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nOwogIH0KICBpZiAoIXN0cikgewogICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7CiAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkgewogICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTsKICAgICAgfQogICAgICBpZiAoc3RyLmluZGV4T2YoJ1xuJykgPiAtMSkgewogICAgICAgIGlmIChhcnJheSkgewogICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTsKICAgICAgICAgIH0pLmpvaW4oJ1xuJykuc3Vic3RyKDIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdHIgPSAnXG4nICsgc3RyLnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7CiAgICAgICAgICB9KS5qb2luKCdcbicpOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpOwogICAgfQogIH0KICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHsKICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cZCskLykpIHsKICAgICAgcmV0dXJuIHN0cjsKICAgIH0KICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7CiAgICBpZiAobmFtZS5tYXRjaCgvXiIoW2EtekEtWl9dW2EtekEtWl8wLTldKikiJC8pKSB7CiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpOwogICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTsKICAgIH0gZWxzZSB7CiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgIlxcJyIpCiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcIi9nLCAnIicpCiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyheInwiJCkvZywgIiciKTsKICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTsKICAgIH0KICB9CgogIHJldHVybiBuYW1lICsgJzogJyArIHN0cjsKfQoKCmZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7CiAgdmFyIG51bUxpbmVzRXN0ID0gMDsKICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHsKICAgIG51bUxpbmVzRXN0Kys7CiAgICBpZiAoY3VyLmluZGV4T2YoJ1xuJykgPj0gMCkgbnVtTGluZXNFc3QrKzsKICAgIHJldHVybiBwcmV2ICsgY3VyLnJlcGxhY2UoL1x1MDAxYlxbXGRcZD9tL2csICcnKS5sZW5ndGggKyAxOwogIH0sIDApOwoKICBpZiAobGVuZ3RoID4gNjApIHsKICAgIHJldHVybiBicmFjZXNbMF0gKwogICAgICAgICAgIChiYXNlID09PSAnJyA/ICcnIDogYmFzZSArICdcbiAnKSArCiAgICAgICAgICAgJyAnICsKICAgICAgICAgICBvdXRwdXQuam9pbignLFxuICAnKSArCiAgICAgICAgICAgJyAnICsKICAgICAgICAgICBicmFjZXNbMV07CiAgfQoKICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArICcgJyArIG91dHB1dC5qb2luKCcsICcpICsgJyAnICsgYnJhY2VzWzFdOwp9CgoKLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgCi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLgpmdW5jdGlvbiBpc0FycmF5KGFyKSB7CiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpOwp9CmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7CgpmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJzsKfQpleHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjsKCmZ1bmN0aW9uIGlzTnVsbChhcmcpIHsKICByZXR1cm4gYXJnID09PSBudWxsOwp9CmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsOwoKZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PSBudWxsOwp9CmV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDsKCmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJzsKfQpleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7CgpmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7Cn0KZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nOwoKZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnOwp9CmV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDsKCmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykgewogIHJldHVybiBhcmcgPT09IHZvaWQgMDsKfQpleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7CgpmdW5jdGlvbiBpc1JlZ0V4cChyZSkgewogIHJldHVybiBpc09iamVjdChyZSkgJiYgb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJzsKfQpleHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7CgpmdW5jdGlvbiBpc09iamVjdChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwp9CmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDsKCmZ1bmN0aW9uIGlzRGF0ZShkKSB7CiAgcmV0dXJuIGlzT2JqZWN0KGQpICYmIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7Cn0KZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7CgpmdW5jdGlvbiBpc0Vycm9yKGUpIHsKICByZXR1cm4gaXNPYmplY3QoZSkgJiYKICAgICAgKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7Cn0KZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjsKCmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7Cn0KZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjsKCmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykgewogIHJldHVybiBhcmcgPT09IG51bGwgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sCiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnOwp9CmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTsKCmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTsKCmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pOwp9CgoKZnVuY3Rpb24gcGFkKG4pIHsKICByZXR1cm4gbiA8IDEwID8gJzAnICsgbi50b1N0cmluZygxMCkgOiBuLnRvU3RyaW5nKDEwKTsKfQoKCnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywKICAgICAgICAgICAgICAnT2N0JywgJ05vdicsICdEZWMnXTsKCi8vIDI2IEZlYiAxNjoxOTozNApmdW5jdGlvbiB0aW1lc3RhbXAoKSB7CiAgdmFyIGQgPSBuZXcgRGF0ZSgpOwogIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLAogICAgICAgICAgICAgIHBhZChkLmdldE1pbnV0ZXMoKSksCiAgICAgICAgICAgICAgcGFkKGQuZ2V0U2Vjb25kcygpKV0uam9pbignOicpOwogIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7Cn0KCgovLyBsb2cgaXMganVzdCBhIHRoaW4gd3JhcHBlciB0byBjb25zb2xlLmxvZyB0aGF0IHByZXBlbmRzIGEgdGltZXN0YW1wCmV4cG9ydHMubG9nID0gZnVuY3Rpb24oKSB7CiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7Cn07CgoKLyoqCiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci4KICoKICogVGhlIEZ1bmN0aW9uLnByb3RvdHlwZS5pbmhlcml0cyBmcm9tIGxhbmcuanMgcmV3cml0dGVuIGFzIGEgc3RhbmRhbG9uZQogKiBmdW5jdGlvbiAobm90IG9uIEZ1bmN0aW9uLnByb3RvdHlwZSkuIE5PVEU6IElmIHRoaXMgZmlsZSBpcyB0byBiZSBsb2FkZWQKICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmUKICogZnVuY3Rpb25zIGFzIHByb3RvdHlwZSBzZXR1cCB1c2luZyBub3JtYWwgSmF2YVNjcmlwdCBkb2VzIG5vdCB3b3JrIGFzCiAqIGV4cGVjdGVkIGR1cmluZyBib290c3RyYXBwaW5nIChzZWUgbWlycm9yLmpzIGluIHIxMTQ5MDMpLgogKgogKiBAcGFyYW0ge2Z1bmN0aW9ufSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHdoaWNoIG5lZWRzIHRvIGluaGVyaXQgdGhlCiAqICAgICBwcm90b3R5cGUuCiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLgogKi8KZXhwb3J0cy5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CgpleHBvcnRzLl9leHRlbmQgPSBmdW5jdGlvbihvcmlnaW4sIGFkZCkgewogIC8vIERvbid0IGRvIGFueXRoaW5nIGlmIGFkZCBpc24ndCBhbiBvYmplY3QKICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjsKCiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhZGQpOwogIHZhciBpID0ga2V5cy5sZW5ndGg7CiAgd2hpbGUgKGktLSkgewogICAgb3JpZ2luW2tleXNbaV1dID0gYWRkW2tleXNbaV1dOwogIH0KICByZXR1cm4gb3JpZ2luOwp9OwoKZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHsiLi9zdXBwb3J0L2lzQnVmZmVyIjo3MjEsIl9wcm9jZXNzIjo3MDMsImluaGVyaXRzIjo3MDF9XSw3MjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaW5kZXhPZiA9IHJlcXVpcmUoJ2luZGV4b2YnKTsKCnZhciBPYmplY3Rfa2V5cyA9IGZ1bmN0aW9uIChvYmopIHsKICAgIGlmIChPYmplY3Qua2V5cykgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikKICAgIGVsc2UgewogICAgICAgIHZhciByZXMgPSBbXTsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSByZXMucHVzaChrZXkpCiAgICAgICAgcmV0dXJuIHJlczsKICAgIH0KfTsKCnZhciBmb3JFYWNoID0gZnVuY3Rpb24gKHhzLCBmbikgewogICAgaWYgKHhzLmZvckVhY2gpIHJldHVybiB4cy5mb3JFYWNoKGZuKQogICAgZWxzZSBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm4oeHNbaV0sIGksIHhzKTsKICAgIH0KfTsKCnZhciBkZWZpbmVQcm9wID0gKGZ1bmN0aW9uKCkgewogICAgdHJ5IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfJywge30pOwogICAgICAgIHJldHVybiBmdW5jdGlvbihvYmosIG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIG5hbWUsIHsKICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICAgICAgfSkKICAgICAgICB9OwogICAgfSBjYXRjaChlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgbmFtZSwgdmFsdWUpIHsKICAgICAgICAgICAgb2JqW25hbWVdID0gdmFsdWU7CiAgICAgICAgfTsKICAgIH0KfSgpKTsKCnZhciBnbG9iYWxzID0gWydBcnJheScsICdCb29sZWFuJywgJ0RhdGUnLCAnRXJyb3InLCAnRXZhbEVycm9yJywgJ0Z1bmN0aW9uJywKJ0luZmluaXR5JywgJ0pTT04nLCAnTWF0aCcsICdOYU4nLCAnTnVtYmVyJywgJ09iamVjdCcsICdSYW5nZUVycm9yJywKJ1JlZmVyZW5jZUVycm9yJywgJ1JlZ0V4cCcsICdTdHJpbmcnLCAnU3ludGF4RXJyb3InLCAnVHlwZUVycm9yJywgJ1VSSUVycm9yJywKJ2RlY29kZVVSSScsICdkZWNvZGVVUklDb21wb25lbnQnLCAnZW5jb2RlVVJJJywgJ2VuY29kZVVSSUNvbXBvbmVudCcsICdlc2NhcGUnLAonZXZhbCcsICdpc0Zpbml0ZScsICdpc05hTicsICdwYXJzZUZsb2F0JywgJ3BhcnNlSW50JywgJ3VuZGVmaW5lZCcsICd1bmVzY2FwZSddOwoKZnVuY3Rpb24gQ29udGV4dCgpIHt9CkNvbnRleHQucHJvdG90eXBlID0ge307Cgp2YXIgU2NyaXB0ID0gZXhwb3J0cy5TY3JpcHQgPSBmdW5jdGlvbiBOb2RlU2NyaXB0IChjb2RlKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2NyaXB0KSkgcmV0dXJuIG5ldyBTY3JpcHQoY29kZSk7CiAgICB0aGlzLmNvZGUgPSBjb2RlOwp9OwoKU2NyaXB0LnByb3RvdHlwZS5ydW5JbkNvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkgewogICAgaWYgKCEoY29udGV4dCBpbnN0YW5jZW9mIENvbnRleHQpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigibmVlZHMgYSAnY29udGV4dCcgYXJndW1lbnQuIik7CiAgICB9CiAgICAKICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgIGlmICghaWZyYW1lLnN0eWxlKSBpZnJhbWUuc3R5bGUgPSB7fTsKICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7CiAgICAKICAgIHZhciB3aW4gPSBpZnJhbWUuY29udGVudFdpbmRvdzsKICAgIHZhciB3RXZhbCA9IHdpbi5ldmFsLCB3RXhlY1NjcmlwdCA9IHdpbi5leGVjU2NyaXB0OwoKICAgIGlmICghd0V2YWwgJiYgd0V4ZWNTY3JpcHQpIHsKICAgICAgICAvLyB3aW4uZXZhbCgpIG1hZ2ljYWxseSBhcHBlYXJzIHdoZW4gdGhpcyBpcyBjYWxsZWQgaW4gSUU6CiAgICAgICAgd0V4ZWNTY3JpcHQuY2FsbCh3aW4sICdudWxsJyk7CiAgICAgICAgd0V2YWwgPSB3aW4uZXZhbDsKICAgIH0KICAgIAogICAgZm9yRWFjaChPYmplY3Rfa2V5cyhjb250ZXh0KSwgZnVuY3Rpb24gKGtleSkgewogICAgICAgIHdpbltrZXldID0gY29udGV4dFtrZXldOwogICAgfSk7CiAgICBmb3JFYWNoKGdsb2JhbHMsIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoY29udGV4dFtrZXldKSB7CiAgICAgICAgICAgIHdpbltrZXldID0gY29udGV4dFtrZXldOwogICAgICAgIH0KICAgIH0pOwogICAgCiAgICB2YXIgd2luS2V5cyA9IE9iamVjdF9rZXlzKHdpbik7CgogICAgdmFyIHJlcyA9IHdFdmFsLmNhbGwod2luLCB0aGlzLmNvZGUpOwogICAgCiAgICBmb3JFYWNoKE9iamVjdF9rZXlzKHdpbiksIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGNpcmN1bGFyIG9iamVjdHMgbGlrZSBgdG9wYCBhbmQgYHdpbmRvd2AgYnkgb25seQogICAgICAgIC8vIHVwZGF0aW5nIGV4aXN0aW5nIGNvbnRleHQgcHJvcGVydGllcyBvciBuZXcgcHJvcGVydGllcyBpbiB0aGUgYHdpbmAKICAgICAgICAvLyB0aGF0IHdhcyBvbmx5IGludHJvZHVjZWQgYWZ0ZXIgdGhlIGV2YWwuCiAgICAgICAgaWYgKGtleSBpbiBjb250ZXh0IHx8IGluZGV4T2Yod2luS2V5cywga2V5KSA9PT0gLTEpIHsKICAgICAgICAgICAgY29udGV4dFtrZXldID0gd2luW2tleV07CiAgICAgICAgfQogICAgfSk7CgogICAgZm9yRWFjaChnbG9iYWxzLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgaWYgKCEoa2V5IGluIGNvbnRleHQpKSB7CiAgICAgICAgICAgIGRlZmluZVByb3AoY29udGV4dCwga2V5LCB3aW5ba2V5XSk7CiAgICAgICAgfQogICAgfSk7CiAgICAKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTsKICAgIAogICAgcmV0dXJuIHJlczsKfTsKClNjcmlwdC5wcm90b3R5cGUucnVuSW5UaGlzQ29udGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBldmFsKHRoaXMuY29kZSk7IC8vIG1heWJlLi4uCn07CgpTY3JpcHQucHJvdG90eXBlLnJ1bkluTmV3Q29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICB2YXIgY3R4ID0gU2NyaXB0LmNyZWF0ZUNvbnRleHQoY29udGV4dCk7CiAgICB2YXIgcmVzID0gdGhpcy5ydW5JbkNvbnRleHQoY3R4KTsKCiAgICBmb3JFYWNoKE9iamVjdF9rZXlzKGN0eCksIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBjb250ZXh0W2tleV0gPSBjdHhba2V5XTsKICAgIH0pOwoKICAgIHJldHVybiByZXM7Cn07Cgpmb3JFYWNoKE9iamVjdF9rZXlzKFNjcmlwdC5wcm90b3R5cGUpLCBmdW5jdGlvbiAobmFtZSkgewogICAgZXhwb3J0c1tuYW1lXSA9IFNjcmlwdFtuYW1lXSA9IGZ1bmN0aW9uIChjb2RlKSB7CiAgICAgICAgdmFyIHMgPSBTY3JpcHQoY29kZSk7CiAgICAgICAgcmV0dXJuIHNbbmFtZV0uYXBwbHkocywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgIH07Cn0pOwoKZXhwb3J0cy5jcmVhdGVTY3JpcHQgPSBmdW5jdGlvbiAoY29kZSkgewogICAgcmV0dXJuIGV4cG9ydHMuU2NyaXB0KGNvZGUpOwp9OwoKZXhwb3J0cy5jcmVhdGVDb250ZXh0ID0gU2NyaXB0LmNyZWF0ZUNvbnRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkgewogICAgdmFyIGNvcHkgPSBuZXcgQ29udGV4dCgpOwogICAgaWYodHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKSB7CiAgICAgICAgZm9yRWFjaChPYmplY3Rfa2V5cyhjb250ZXh0KSwgZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICBjb3B5W2tleV0gPSBjb250ZXh0W2tleV07CiAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gY29weTsKfTsKCn0seyJpbmRleG9mIjo3MjR9XSw3MjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoKdmFyIGluZGV4T2YgPSBbXS5pbmRleE9mOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcnIsIG9iail7CiAgaWYgKGluZGV4T2YpIHJldHVybiBhcnIuaW5kZXhPZihvYmopOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7CiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpOwogIH0KICByZXR1cm4gLTE7Cn07Cn0se31dLDcyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvaGV4NjQnKTsKCn0seyIuL2xpYi9oZXg2NCI6NzI2fV0sNzI2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewptb2R1bGUuZXhwb3J0cyA9IHsKICBkZWNvZGUgIDogZGVjb2RlLAogIGVuY29kZSAgOiBlbmNvZGUsCiAgaXNIZXggICA6IGlzSGV4LAogIHRvSGV4ICAgOiBkZWNvZGUsCiAgdG9CYXNlNjQ6IGVuY29kZSwKICB0cmFuc2Zvcm06IHRyYW5zZm9ybQp9OwoKdmFyIHBsdXMgICAgICAgPSAvXCsvZzsKdmFyIHNsYXNoICAgICAgPSAvXC8vZzsKdmFyIG1pbnVzICAgICAgPSAvLS9nOwp2YXIgdW5kZXJzY29yZSA9IC9fL2c7CnZhciBoZXggICAgICAgID0gL15bMC05YS1mQS1GXXsxLH0kLzsKCmZ1bmN0aW9uIGlzSGV4IChzdHIpIHsKICByZXR1cm4gc3RyLm1hdGNoKGhleCk7Cn0KCmZ1bmN0aW9uIGVuY29kZSAoc3RyKSB7CiAgdmFyIG91dDsKICBpZiAoIWlzSGV4KHN0cikpIHsKICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpOwogIH0KICB0cnkgewogICAgaWYgKHN0ci5sZW5ndGggJSAyID09PSAxKSB7CiAgICAgIHN0ciA9IHN0ciArICcwJzsgLy8gYnVmZmVyIGV4cGVjdHMgaGV4IHRvIGhhdmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzCiAgICB9CiAgICByZXR1cm4gKG5ldyBCdWZmZXIoc3RyLnRvU3RyaW5nKCksICdoZXgnKSkudG9TdHJpbmcoJ2Jhc2U2NCcpLnJlcGxhY2UocGx1cywgJy0nKS5yZXBsYWNlKHNsYXNoLCAnXycpOwogIH0KICBjYXRjaCAoZXJyKSB7CiAgICByZXR1cm4gZXJyOwogIH0KfQoKZnVuY3Rpb24gZGVjb2RlIChzdHIpIHsKICB2YXIgb3V0OwogIHRyeSB7CiAgICByZXR1cm4gKG5ldyBCdWZmZXIoc3RyLnRvU3RyaW5nKCkucmVwbGFjZShtaW51cywgJysnKS5yZXBsYWNlKHVuZGVyc2NvcmUsICcvJyksICdiYXNlNjQnKSkudG9TdHJpbmcoJ2hleCcpOwogIH0KICBjYXRjaCAoZXJyKSB7CiAgICByZXR1cm4gZXJyOwogIH0KfQoKZnVuY3Rpb24gdHJhbnNmb3JtIChzdHIpIHsKICBpZiAoaXNIZXgoc3RyKSkgewogICAgcmV0dXJuIGVuY29kZShzdHIpOwogIH0KICBlbHNlIHsKICAgIHJldHVybiBkZWNvZGUoc3RyKTsKICB9Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NTA0fV0sNzI3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewoKdmFyIG5hdmlnYXRvciA9IHt9OwpuYXZpZ2F0b3IudXNlckFnZW50ID0gZmFsc2U7Cgp2YXIgd2luZG93ID0ge307Ci8qCiAqIGpzcnNhc2lnbiA1LjAuMTIgKGMpIDIwMTAtMjAxNiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KCi8qCnlhaG9vLW1pbi5qcwpDb3B5cmlnaHQgKGMpIDIwMTEsIFlhaG9vISBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCkNvZGUgbGljZW5zZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlOgpodHRwOi8vZGV2ZWxvcGVyLnlhaG9vLmNvbS95dWkvbGljZW5zZS5odG1sCnZlcnNpb246IDIuOS4wCiovCmlmKHR5cGVvZiBZQUhPTz09InVuZGVmaW5lZCJ8fCFZQUhPTyl7dmFyIFlBSE9PPXt9O31ZQUhPTy5uYW1lc3BhY2U9ZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHMsZz1udWxsLGUsYyxmO2ZvcihlPTA7ZTxiLmxlbmd0aDtlPWUrMSl7Zj0oIiIrYltlXSkuc3BsaXQoIi4iKTtnPVlBSE9PO2ZvcihjPShmWzBdPT0iWUFIT08iKT8xOjA7YzxmLmxlbmd0aDtjPWMrMSl7Z1tmW2NdXT1nW2ZbY11dfHx7fTtnPWdbZltjXV07fX1yZXR1cm4gZzt9O1lBSE9PLmxvZz1mdW5jdGlvbihkLGEsYyl7dmFyIGI9WUFIT08ud2lkZ2V0LkxvZ2dlcjtpZihiJiZiLmxvZyl7cmV0dXJuIGIubG9nKGQsYSxjKTt9ZWxzZXtyZXR1cm4gZmFsc2U7fX07WUFIT08ucmVnaXN0ZXI9ZnVuY3Rpb24oYSxmLGUpe3ZhciBrPVlBSE9PLmVudi5tb2R1bGVzLGMsaixoLGcsZDtpZigha1thXSl7a1thXT17dmVyc2lvbnM6W10sYnVpbGRzOltdfTt9Yz1rW2FdO2o9ZS52ZXJzaW9uO2g9ZS5idWlsZDtnPVlBSE9PLmVudi5saXN0ZW5lcnM7Yy5uYW1lPWE7Yy52ZXJzaW9uPWo7Yy5idWlsZD1oO2MudmVyc2lvbnMucHVzaChqKTtjLmJ1aWxkcy5wdXNoKGgpO2MubWFpbkNsYXNzPWY7Zm9yKGQ9MDtkPGcubGVuZ3RoO2Q9ZCsxKXtnW2RdKGMpO31pZihmKXtmLlZFUlNJT049ajtmLkJVSUxEPWg7fWVsc2V7WUFIT08ubG9nKCJtYWluQ2xhc3MgaXMgdW5kZWZpbmVkIGZvciBtb2R1bGUgIithLCJ3YXJuIik7fX07WUFIT08uZW52PVlBSE9PLmVudnx8e21vZHVsZXM6W10sbGlzdGVuZXJzOltdfTtZQUhPTy5lbnYuZ2V0VmVyc2lvbj1mdW5jdGlvbihhKXtyZXR1cm4gWUFIT08uZW52Lm1vZHVsZXNbYV18fG51bGw7fTtZQUhPTy5lbnYucGFyc2VVQT1mdW5jdGlvbihkKXt2YXIgZT1mdW5jdGlvbihpKXt2YXIgaj0wO3JldHVybiBwYXJzZUZsb2F0KGkucmVwbGFjZSgvXC4vZyxmdW5jdGlvbigpe3JldHVybihqKys9PTEpPyIiOiIuIjt9KSk7fSxoPW5hdmlnYXRvcixnPXtpZTowLG9wZXJhOjAsZ2Vja286MCx3ZWJraXQ6MCxjaHJvbWU6MCxtb2JpbGU6bnVsbCxhaXI6MCxpcGFkOjAsaXBob25lOjAsaXBvZDowLGlvczpudWxsLGFuZHJvaWQ6MCx3ZWJvczowLGNhamE6aCYmaC5jYWphVmVyc2lvbixzZWN1cmU6ZmFsc2Usb3M6bnVsbH0sYz1kfHwobmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50KSxmPXdpbmRvdyYmd2luZG93LmxvY2F0aW9uLGI9ZiYmZi5ocmVmLGE7Zy5zZWN1cmU9YiYmKGIudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJodHRwcyIpPT09MCk7aWYoYyl7aWYoKC93aW5kb3dzfHdpbjMyL2kpLnRlc3QoYykpe2cub3M9IndpbmRvd3MiO31lbHNle2lmKCgvbWFjaW50b3NoL2kpLnRlc3QoYykpe2cub3M9Im1hY2ludG9zaCI7fWVsc2V7aWYoKC9yaGluby9pKS50ZXN0KGMpKXtnLm9zPSJyaGlubyI7fX19aWYoKC9LSFRNTC8pLnRlc3QoYykpe2cud2Via2l0PTE7fWE9Yy5tYXRjaCgvQXBwbGVXZWJLaXRcLyhbXlxzXSopLyk7aWYoYSYmYVsxXSl7Zy53ZWJraXQ9ZShhWzFdKTtpZigvIE1vYmlsZVwvLy50ZXN0KGMpKXtnLm1vYmlsZT0iQXBwbGUiO2E9Yy5tYXRjaCgvT1MgKFteXHNdKikvKTtpZihhJiZhWzFdKXthPWUoYVsxXS5yZXBsYWNlKCJfIiwiLiIpKTt9Zy5pb3M9YTtnLmlwYWQ9Zy5pcG9kPWcuaXBob25lPTA7YT1jLm1hdGNoKC9pUGFkfGlQb2R8aVBob25lLyk7aWYoYSYmYVswXSl7Z1thWzBdLnRvTG93ZXJDYXNlKCldPWcuaW9zO319ZWxzZXthPWMubWF0Y2goL05va2lhTlteXC9dKnxBbmRyb2lkIFxkXC5cZHx3ZWJPU1wvXGRcLlxkLyk7aWYoYSl7Zy5tb2JpbGU9YVswXTt9aWYoL3dlYk9TLy50ZXN0KGMpKXtnLm1vYmlsZT0iV2ViT1MiO2E9Yy5tYXRjaCgvd2ViT1NcLyhbXlxzXSopOy8pO2lmKGEmJmFbMV0pe2cud2Vib3M9ZShhWzFdKTt9fWlmKC8gQW5kcm9pZC8udGVzdChjKSl7Zy5tb2JpbGU9IkFuZHJvaWQiO2E9Yy5tYXRjaCgvQW5kcm9pZCAoW15cc10qKTsvKTtpZihhJiZhWzFdKXtnLmFuZHJvaWQ9ZShhWzFdKTt9fX1hPWMubWF0Y2goL0Nocm9tZVwvKFteXHNdKikvKTtpZihhJiZhWzFdKXtnLmNocm9tZT1lKGFbMV0pO31lbHNle2E9Yy5tYXRjaCgvQWRvYmVBSVJcLyhbXlxzXSopLyk7aWYoYSl7Zy5haXI9YVswXTt9fX1pZighZy53ZWJraXQpe2E9Yy5tYXRjaCgvT3BlcmFbXHNcL10oW15cc10qKS8pO2lmKGEmJmFbMV0pe2cub3BlcmE9ZShhWzFdKTthPWMubWF0Y2goL1ZlcnNpb25cLyhbXlxzXSopLyk7aWYoYSYmYVsxXSl7Zy5vcGVyYT1lKGFbMV0pO31hPWMubWF0Y2goL09wZXJhIE1pbmlbXjtdKi8pO2lmKGEpe2cubW9iaWxlPWFbMF07fX1lbHNle2E9Yy5tYXRjaCgvTVNJRVxzKFteO10qKS8pO2lmKGEmJmFbMV0pe2cuaWU9ZShhWzFdKTt9ZWxzZXthPWMubWF0Y2goL0dlY2tvXC8oW15cc10qKS8pO2lmKGEpe2cuZ2Vja289MTthPWMubWF0Y2goL3J2OihbXlxzXCldKikvKTtpZihhJiZhWzFdKXtnLmdlY2tvPWUoYVsxXSk7fX19fX19cmV0dXJuIGc7fTtZQUhPTy5lbnYudWE9WUFIT08uZW52LnBhcnNlVUEoKTsoZnVuY3Rpb24oKXtZQUhPTy5uYW1lc3BhY2UoInV0aWwiLCJ3aWRnZXQiLCJleGFtcGxlIik7aWYoInVuZGVmaW5lZCIhPT10eXBlb2YgWUFIT09fY29uZmlnKXt2YXIgYj1ZQUhPT19jb25maWcubGlzdGVuZXIsYT1ZQUhPTy5lbnYubGlzdGVuZXJzLGQ9dHJ1ZSxjO2lmKGIpe2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspe2lmKGFbY109PWIpe2Q9ZmFsc2U7YnJlYWs7fX1pZihkKXthLnB1c2goYik7fX19fSkoKTtZQUhPTy5sYW5nPVlBSE9PLmxhbmd8fHt9OyhmdW5jdGlvbigpe3ZhciBmPVlBSE9PLmxhbmcsYT1PYmplY3QucHJvdG90eXBlLGM9IltvYmplY3QgQXJyYXldIixoPSJbb2JqZWN0IEZ1bmN0aW9uXSIsaT0iW29iamVjdCBPYmplY3RdIixiPVtdLGc9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCIvIjoiJiN4MkY7IiwiYCI6IiYjeDYwOyJ9LGQ9WyJ0b1N0cmluZyIsInZhbHVlT2YiXSxlPXtpc0FycmF5OmZ1bmN0aW9uKGope3JldHVybiBhLnRvU3RyaW5nLmFwcGx5KGopPT09Yzt9LGlzQm9vbGVhbjpmdW5jdGlvbihqKXtyZXR1cm4gdHlwZW9mIGo9PT0iYm9vbGVhbiI7fSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGope3JldHVybih0eXBlb2Ygaj09PSJmdW5jdGlvbiIpfHxhLnRvU3RyaW5nLmFwcGx5KGopPT09aDt9LGlzTnVsbDpmdW5jdGlvbihqKXtyZXR1cm4gaj09PW51bGw7fSxpc051bWJlcjpmdW5jdGlvbihqKXtyZXR1cm4gdHlwZW9mIGo9PT0ibnVtYmVyIiYmaXNGaW5pdGUoaik7fSxpc09iamVjdDpmdW5jdGlvbihqKXtyZXR1cm4oaiYmKHR5cGVvZiBqPT09Im9iamVjdCJ8fGYuaXNGdW5jdGlvbihqKSkpfHxmYWxzZTt9LGlzU3RyaW5nOmZ1bmN0aW9uKGope3JldHVybiB0eXBlb2Ygaj09PSJzdHJpbmciO30saXNVbmRlZmluZWQ6ZnVuY3Rpb24oail7cmV0dXJuIHR5cGVvZiBqPT09InVuZGVmaW5lZCI7fSxfSUVFbnVtRml4OihZQUhPTy5lbnYudWEuaWUpP2Z1bmN0aW9uKGwsayl7dmFyIGosbixtO2ZvcihqPTA7ajxkLmxlbmd0aDtqPWorMSl7bj1kW2pdO209a1tuXTtpZihmLmlzRnVuY3Rpb24obSkmJm0hPWFbbl0pe2xbbl09bTt9fX06ZnVuY3Rpb24oKXt9LGVzY2FwZUhUTUw6ZnVuY3Rpb24oail7cmV0dXJuIGoucmVwbGFjZSgvWyY8PiInXC9gXS9nLGZ1bmN0aW9uKGspe3JldHVybiBnW2tdO30pO30sZXh0ZW5kOmZ1bmN0aW9uKG0sbixsKXtpZighbnx8IW0pe3Rocm93IG5ldyBFcnJvcigiZXh0ZW5kIGZhaWxlZCwgcGxlYXNlIGNoZWNrIHRoYXQgIisiYWxsIGRlcGVuZGVuY2llcyBhcmUgaW5jbHVkZWQuIik7fXZhciBrPWZ1bmN0aW9uKCl7fSxqO2sucHJvdG90eXBlPW4ucHJvdG90eXBlO20ucHJvdG90eXBlPW5ldyBrKCk7bS5wcm90b3R5cGUuY29uc3RydWN0b3I9bTttLnN1cGVyY2xhc3M9bi5wcm90b3R5cGU7aWYobi5wcm90b3R5cGUuY29uc3RydWN0b3I9PWEuY29uc3RydWN0b3Ipe24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW47fWlmKGwpe2ZvcihqIGluIGwpe2lmKGYuaGFzT3duUHJvcGVydHkobCxqKSl7bS5wcm90b3R5cGVbal09bFtqXTt9fWYuX0lFRW51bUZpeChtLnByb3RvdHlwZSxsKTt9fSxhdWdtZW50T2JqZWN0OmZ1bmN0aW9uKG4sbSl7aWYoIW18fCFuKXt0aHJvdyBuZXcgRXJyb3IoIkFic29yYiBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuIik7fXZhciBqPWFyZ3VtZW50cyxsLG8saz1qWzJdO2lmKGsmJmshPT10cnVlKXtmb3IobD0yO2w8ai5sZW5ndGg7bD1sKzEpe25baltsXV09bVtqW2xdXTt9fWVsc2V7Zm9yKG8gaW4gbSl7aWYoa3x8IShvIGluIG4pKXtuW29dPW1bb107fX1mLl9JRUVudW1GaXgobixtKTt9cmV0dXJuIG47fSxhdWdtZW50UHJvdG86ZnVuY3Rpb24obSxsKXtpZighbHx8IW0pe3Rocm93IG5ldyBFcnJvcigiQXVnbWVudCBmYWlsZWQsIHZlcmlmeSBkZXBlbmRlbmNpZXMuIik7fXZhciBqPVttLnByb3RvdHlwZSxsLnByb3RvdHlwZV0saztmb3Ioaz0yO2s8YXJndW1lbnRzLmxlbmd0aDtrPWsrMSl7ai5wdXNoKGFyZ3VtZW50c1trXSk7fWYuYXVnbWVudE9iamVjdC5hcHBseSh0aGlzLGopO3JldHVybiBtO30sZHVtcDpmdW5jdGlvbihqLHApe3ZhciBsLG4scj1bXSx0PSJ7Li4ufSIsaz0iZigpey4uLn0iLHE9IiwgIixtPSIgPT4gIjtpZighZi5pc09iamVjdChqKSl7cmV0dXJuIGorIiI7fWVsc2V7aWYoaiBpbnN0YW5jZW9mIERhdGV8fCgibm9kZVR5cGUiIGluIGomJiJ0YWdOYW1lIiBpbiBqKSl7cmV0dXJuIGo7fWVsc2V7aWYoZi5pc0Z1bmN0aW9uKGopKXtyZXR1cm4gazt9fX1wPShmLmlzTnVtYmVyKHApKT9wOjM7aWYoZi5pc0FycmF5KGopKXtyLnB1c2goIlsiKTtmb3IobD0wLG49ai5sZW5ndGg7bDxuO2w9bCsxKXtpZihmLmlzT2JqZWN0KGpbbF0pKXtyLnB1c2goKHA+MCk/Zi5kdW1wKGpbbF0scC0xKTp0KTt9ZWxzZXtyLnB1c2goaltsXSk7fXIucHVzaChxKTt9aWYoci5sZW5ndGg+MSl7ci5wb3AoKTt9ci5wdXNoKCJdIik7fWVsc2V7ci5wdXNoKCJ7Iik7Zm9yKGwgaW4gail7aWYoZi5oYXNPd25Qcm9wZXJ0eShqLGwpKXtyLnB1c2gobCttKTtpZihmLmlzT2JqZWN0KGpbbF0pKXtyLnB1c2goKHA+MCk/Zi5kdW1wKGpbbF0scC0xKTp0KTt9ZWxzZXtyLnB1c2goaltsXSk7fXIucHVzaChxKTt9fWlmKHIubGVuZ3RoPjEpe3IucG9wKCk7fXIucHVzaCgifSIpO31yZXR1cm4gci5qb2luKCIiKTt9LHN1YnN0aXR1dGU6ZnVuY3Rpb24oeCx5LEUsbCl7dmFyIEQsQyxCLEcsdCx1LEY9W10scCx6PXgubGVuZ3RoLEE9ImR1bXAiLHI9IiAiLHE9InsiLG09In0iLG4sdztmb3IoOzspe0Q9eC5sYXN0SW5kZXhPZihxLHopO2lmKEQ8MCl7YnJlYWs7fUM9eC5pbmRleE9mKG0sRCk7aWYoRCsxPkMpe2JyZWFrO31wPXguc3Vic3RyaW5nKEQrMSxDKTtHPXA7dT1udWxsO0I9Ry5pbmRleE9mKHIpO2lmKEI+LTEpe3U9Ry5zdWJzdHJpbmcoQisxKTtHPUcuc3Vic3RyaW5nKDAsQik7fXQ9eVtHXTtpZihFKXt0PUUoRyx0LHUpO31pZihmLmlzT2JqZWN0KHQpKXtpZihmLmlzQXJyYXkodCkpe3Q9Zi5kdW1wKHQscGFyc2VJbnQodSwxMCkpO31lbHNle3U9dXx8IiI7bj11LmluZGV4T2YoQSk7aWYobj4tMSl7dT11LnN1YnN0cmluZyg0KTt9dz10LnRvU3RyaW5nKCk7aWYodz09PWl8fG4+LTEpe3Q9Zi5kdW1wKHQscGFyc2VJbnQodSwxMCkpO31lbHNle3Q9dzt9fX1lbHNle2lmKCFmLmlzU3RyaW5nKHQpJiYhZi5pc051bWJlcih0KSl7dD0ifi0iK0YubGVuZ3RoKyItfiI7RltGLmxlbmd0aF09cDt9fXg9eC5zdWJzdHJpbmcoMCxEKSt0K3guc3Vic3RyaW5nKEMrMSk7aWYobD09PWZhbHNlKXt6PUQtMTt9fWZvcihEPUYubGVuZ3RoLTE7RD49MDtEPUQtMSl7eD14LnJlcGxhY2UobmV3IFJlZ0V4cCgifi0iK0QrIi1+IiksInsiK0ZbRF0rIn0iLCJnIik7fXJldHVybiB4O30sdHJpbTpmdW5jdGlvbihqKXt0cnl7cmV0dXJuIGoucmVwbGFjZSgvXlxzK3xccyskL2csIiIpO31jYXRjaChrKXtyZXR1cm4gajsKfX0sbWVyZ2U6ZnVuY3Rpb24oKXt2YXIgbj17fSxrPWFyZ3VtZW50cyxqPWsubGVuZ3RoLG07Zm9yKG09MDttPGo7bT1tKzEpe2YuYXVnbWVudE9iamVjdChuLGtbbV0sdHJ1ZSk7fXJldHVybiBuO30sbGF0ZXI6ZnVuY3Rpb24odCxrLHUsbixwKXt0PXR8fDA7az1rfHx7fTt2YXIgbD11LHM9bixxLGo7aWYoZi5pc1N0cmluZyh1KSl7bD1rW3VdO31pZighbCl7dGhyb3cgbmV3IFR5cGVFcnJvcigibWV0aG9kIHVuZGVmaW5lZCIpO31pZighZi5pc1VuZGVmaW5lZChuKSYmIWYuaXNBcnJheShzKSl7cz1bbl07fXE9ZnVuY3Rpb24oKXtsLmFwcGx5KGssc3x8Yik7fTtqPShwKT9zZXRJbnRlcnZhbChxLHQpOnNldFRpbWVvdXQocSx0KTtyZXR1cm57aW50ZXJ2YWw6cCxjYW5jZWw6ZnVuY3Rpb24oKXtpZih0aGlzLmludGVydmFsKXtjbGVhckludGVydmFsKGopO31lbHNle2NsZWFyVGltZW91dChqKTt9fX07fSxpc1ZhbHVlOmZ1bmN0aW9uKGope3JldHVybihmLmlzT2JqZWN0KGopfHxmLmlzU3RyaW5nKGopfHxmLmlzTnVtYmVyKGopfHxmLmlzQm9vbGVhbihqKSk7fX07Zi5oYXNPd25Qcm9wZXJ0eT0oYS5oYXNPd25Qcm9wZXJ0eSk/ZnVuY3Rpb24oaixrKXtyZXR1cm4gaiYmai5oYXNPd25Qcm9wZXJ0eSYmai5oYXNPd25Qcm9wZXJ0eShrKTt9OmZ1bmN0aW9uKGosayl7cmV0dXJuICFmLmlzVW5kZWZpbmVkKGpba10pJiZqLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtrXSE9PWpba107fTtlLmF1Z21lbnRPYmplY3QoZixlLHRydWUpO1lBSE9PLnV0aWwuTGFuZz1mO2YuYXVnbWVudD1mLmF1Z21lbnRQcm90bztZQUhPTy5hdWdtZW50PWYuYXVnbWVudFByb3RvO1lBSE9PLmV4dGVuZD1mLmV4dGVuZDt9KSgpO1lBSE9PLnJlZ2lzdGVyKCJ5YWhvbyIsWUFIT08se3ZlcnNpb246IjIuOS4wIixidWlsZDoiMjgwMCJ9KTsKCi8qISBDcnlwdG9KUyB2My4xLjIgY29yZS1maXguanMKICogY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCiAqIChjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiAqIFRISVMgSVMgRklYIG9mICdjb3JlLmpzJyB0byBmaXggSG1hYyBpc3N1ZS4KICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvaXNzdWVzL2RldGFpbD9pZD04NAogKiBodHRwczovL2NyeXB0by1qcy5nb29nbGVjb2RlLmNvbS9zdm4taGlzdG9yeS9yNjY3L2JyYW5jaGVzLzMueC9zcmMvY29yZS5qcwogKi8KdmFyIENyeXB0b0pTPUNyeXB0b0pTfHwoZnVuY3Rpb24oZSxnKXt2YXIgYT17fTt2YXIgYj1hLmxpYj17fTt2YXIgaj1iLkJhc2U9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe31yZXR1cm57ZXh0ZW5kOmZ1bmN0aW9uKHApe24ucHJvdG90eXBlPXRoaXM7dmFyIG89bmV3IG4oKTtpZihwKXtvLm1peEluKHApfWlmKCFvLmhhc093blByb3BlcnR5KCJpbml0Iikpe28uaW5pdD1mdW5jdGlvbigpe28uJHN1cGVyLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1vLmluaXQucHJvdG90eXBlPW87by4kc3VwZXI9dGhpcztyZXR1cm4gb30sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIG89dGhpcy5leHRlbmQoKTtvLmluaXQuYXBwbHkobyxhcmd1bWVudHMpO3JldHVybiBvfSxpbml0OmZ1bmN0aW9uKCl7fSxtaXhJbjpmdW5jdGlvbihwKXtmb3IodmFyIG8gaW4gcCl7aWYocC5oYXNPd25Qcm9wZXJ0eShvKSl7dGhpc1tvXT1wW29dfX1pZihwLmhhc093blByb3BlcnR5KCJ0b1N0cmluZyIpKXt0aGlzLnRvU3RyaW5nPXAudG9TdHJpbmd9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19fSgpKTt2YXIgbD1iLldvcmRBcnJheT1qLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihvLG4pe289dGhpcy53b3Jkcz1vfHxbXTtpZihuIT1nKXt0aGlzLnNpZ0J5dGVzPW59ZWxzZXt0aGlzLnNpZ0J5dGVzPW8ubGVuZ3RoKjR9fSx0b1N0cmluZzpmdW5jdGlvbihuKXtyZXR1cm4obnx8aCkuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24odCl7dmFyIHE9dGhpcy53b3Jkczt2YXIgcD10LndvcmRzO3ZhciBuPXRoaXMuc2lnQnl0ZXM7dmFyIHM9dC5zaWdCeXRlczt0aGlzLmNsYW1wKCk7aWYobiU0KXtmb3IodmFyIHI9MDtyPHM7cisrKXt2YXIgbz0ocFtyPj4+Ml0+Pj4oMjQtKHIlNCkqOCkpJjI1NTtxWyhuK3IpPj4+Ml18PW88PCgyNC0oKG4rciklNCkqOCl9fWVsc2V7Zm9yKHZhciByPTA7cjxzO3IrPTQpe3FbKG4rcik+Pj4yXT1wW3I+Pj4yXX19dGhpcy5zaWdCeXRlcys9cztyZXR1cm4gdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgbz10aGlzLndvcmRzO3ZhciBuPXRoaXMuc2lnQnl0ZXM7b1tuPj4+Ml0mPTQyOTQ5NjcyOTU8PCgzMi0obiU0KSo4KTtvLmxlbmd0aD1lLmNlaWwobi80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgbj1qLmNsb25lLmNhbGwodGhpcyk7bi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApO3JldHVybiBufSxyYW5kb206ZnVuY3Rpb24ocCl7dmFyIG89W107Zm9yKHZhciBuPTA7bjxwO24rPTQpe28ucHVzaCgoZS5yYW5kb20oKSo0Mjk0OTY3Mjk2KXwwKX1yZXR1cm4gbmV3IGwuaW5pdChvLHApfX0pO3ZhciBtPWEuZW5jPXt9O3ZhciBoPW0uSGV4PXtzdHJpbmdpZnk6ZnVuY3Rpb24ocCl7dmFyIHI9cC53b3Jkczt2YXIgbz1wLnNpZ0J5dGVzO3ZhciBxPVtdO2Zvcih2YXIgbj0wO248bztuKyspe3ZhciBzPShyW24+Pj4yXT4+PigyNC0obiU0KSo4KSkmMjU1O3EucHVzaCgocz4+PjQpLnRvU3RyaW5nKDE2KSk7cS5wdXNoKChzJjE1KS50b1N0cmluZygxNikpfXJldHVybiBxLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihwKXt2YXIgbj1wLmxlbmd0aDt2YXIgcT1bXTtmb3IodmFyIG89MDtvPG47bys9Mil7cVtvPj4+M118PXBhcnNlSW50KHAuc3Vic3RyKG8sMiksMTYpPDwoMjQtKG8lOCkqNCl9cmV0dXJuIG5ldyBsLmluaXQocSxuLzIpfX07dmFyIGQ9bS5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbihxKXt2YXIgcj1xLndvcmRzO3ZhciBwPXEuc2lnQnl0ZXM7dmFyIG49W107Zm9yKHZhciBvPTA7bzxwO28rKyl7dmFyIHM9KHJbbz4+PjJdPj4+KDI0LShvJTQpKjgpKSYyNTU7bi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUocykpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbihwKXt2YXIgbj1wLmxlbmd0aDt2YXIgcT1bXTtmb3IodmFyIG89MDtvPG47bysrKXtxW28+Pj4yXXw9KHAuY2hhckNvZGVBdChvKSYyNTUpPDwoMjQtKG8lNCkqOCl9cmV0dXJuIG5ldyBsLmluaXQocSxuKX19O3ZhciBjPW0uVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKG4pe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShkLnN0cmluZ2lmeShuKSkpfWNhdGNoKG8pe3Rocm93IG5ldyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKX19LHBhcnNlOmZ1bmN0aW9uKG4pe3JldHVybiBkLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChuKSkpfX07dmFyIGk9Yi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWouZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IGwuaW5pdCgpO3RoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihuKXtpZih0eXBlb2Ygbj09InN0cmluZyIpe249Yy5wYXJzZShuKX10aGlzLl9kYXRhLmNvbmNhdChuKTt0aGlzLl9uRGF0YUJ5dGVzKz1uLnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbih3KXt2YXIgcT10aGlzLl9kYXRhO3ZhciB4PXEud29yZHM7dmFyIG49cS5zaWdCeXRlczt2YXIgdD10aGlzLmJsb2NrU2l6ZTt2YXIgdj10KjQ7dmFyIHU9bi92O2lmKHcpe3U9ZS5jZWlsKHUpfWVsc2V7dT1lLm1heCgodXwwKS10aGlzLl9taW5CdWZmZXJTaXplLDApfXZhciBzPXUqdDt2YXIgcj1lLm1pbihzKjQsbik7aWYocyl7Zm9yKHZhciBwPTA7cDxzO3ArPXQpe3RoaXMuX2RvUHJvY2Vzc0Jsb2NrKHgscCl9dmFyIG89eC5zcGxpY2UoMCxzKTtxLnNpZ0J5dGVzLT1yfXJldHVybiBuZXcgbC5pbml0KG8scil9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIG49ai5jbG9uZS5jYWxsKHRoaXMpO24uX2RhdGE9dGhpcy5fZGF0YS5jbG9uZSgpO3JldHVybiBufSxfbWluQnVmZmVyU2l6ZTowfSk7dmFyIGY9Yi5IYXNoZXI9aS5leHRlbmQoe2NmZzpqLmV4dGVuZCgpLGluaXQ6ZnVuY3Rpb24obil7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKG4pO3RoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXtpLnJlc2V0LmNhbGwodGhpcyk7dGhpcy5fZG9SZXNldCgpfSx1cGRhdGU6ZnVuY3Rpb24obil7dGhpcy5fYXBwZW5kKG4pO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpc30sZmluYWxpemU6ZnVuY3Rpb24obil7aWYobil7dGhpcy5fYXBwZW5kKG4pfXZhciBvPXRoaXMuX2RvRmluYWxpemUoKTtyZXR1cm4gb30sYmxvY2tTaXplOjUxMi8zMixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbihwLG8pe3JldHVybiBuZXcgbi5pbml0KG8pLmZpbmFsaXplKHApfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKHAsbyl7cmV0dXJuIG5ldyBrLkhNQUMuaW5pdChuLG8pLmZpbmFsaXplKHApfX19KTt2YXIgaz1hLmFsZ289e307cmV0dXJuIGF9KE1hdGgpKTsKLyoKQ3J5cHRvSlMgdjMuMS4yIHg2NC1jb3JlLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KKGZ1bmN0aW9uKGcpe3ZhciBhPUNyeXB0b0pTLGY9YS5saWIsZT1mLkJhc2UsaD1mLldvcmRBcnJheSxhPWEueDY0PXt9O2EuV29yZD1lLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihiLGMpe3RoaXMuaGlnaD1iO3RoaXMubG93PWN9fSk7YS5Xb3JkQXJyYXk9ZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYixjKXtiPXRoaXMud29yZHM9Ynx8W107dGhpcy5zaWdCeXRlcz1jIT1nP2M6OCpiLmxlbmd0aH0sdG9YMzI6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy53b3JkcyxjPWIubGVuZ3RoLGE9W10sZD0wO2Q8YztkKyspe3ZhciBlPWJbZF07YS5wdXNoKGUuaGlnaCk7YS5wdXNoKGUubG93KX1yZXR1cm4gaC5jcmVhdGUoYSx0aGlzLnNpZ0J5dGVzKX0sY2xvbmU6ZnVuY3Rpb24oKXtmb3IodmFyIGI9ZS5jbG9uZS5jYWxsKHRoaXMpLGM9Yi53b3Jkcz10aGlzLndvcmRzLnNsaWNlKDApLGE9Yy5sZW5ndGgsZD0wO2Q8YTtkKyspY1tkXT1jW2RdLmNsb25lKCk7cmV0dXJuIGJ9fSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIGNpcGhlci1jb3JlLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KQ3J5cHRvSlMubGliLkNpcGhlcnx8ZnVuY3Rpb24odSl7dmFyIGc9Q3J5cHRvSlMsZj1nLmxpYixrPWYuQmFzZSxsPWYuV29yZEFycmF5LHE9Zi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtLHI9Zy5lbmMuQmFzZTY0LHY9Zy5hbGdvLkV2cEtERixuPWYuQ2lwaGVyPXEuZXh0ZW5kKHtjZmc6ay5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsYSxiKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGEsYil9LGluaXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChjKTt0aGlzLl94Zm9ybU1vZGU9YTt0aGlzLl9rZXk9Yjt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7cS5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7CnJldHVybiB0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihiLGMsZCl7cmV0dXJuKCJzdHJpbmciPT10eXBlb2YgYz9zOmopLmVuY3J5cHQoYSxiLGMsZCl9LGRlY3J5cHQ6ZnVuY3Rpb24oYixjLGQpe3JldHVybigic3RyaW5nIj09dHlwZW9mIGM/czpqKS5kZWNyeXB0KGEsYixjLGQpfX19fSk7Zi5TdHJlYW1DaXBoZXI9bi5leHRlbmQoe19kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2Nlc3MoITApfSxibG9ja1NpemU6MX0pO3ZhciBtPWcubW9kZT17fSx0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9pdjtkP3RoaXMuX2l2PXU6ZD10aGlzLl9wcmV2QmxvY2s7Zm9yKHZhciBlPQowO2U8YztlKyspYVtiK2VdXj1kW2VdfSxoPShmLkJsb2NrQ2lwaGVyTW9kZT1rLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZShhLGIpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKGEsYil9LGluaXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLl9jaXBoZXI9YTt0aGlzLl9pdj1ifX0pKS5leHRlbmQoKTtoLkVuY3J5cHRvcj1oLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fY2lwaGVyLGQ9Yy5ibG9ja1NpemU7dC5jYWxsKHRoaXMsYSxiLGQpO2MuZW5jcnlwdEJsb2NrKGEsYik7dGhpcy5fcHJldkJsb2NrPWEuc2xpY2UoYixiK2QpfX0pO2guRGVjcnlwdG9yPWguZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9jaXBoZXIsZD1jLmJsb2NrU2l6ZSxlPWEuc2xpY2UoYixiK2QpO2MuZGVjcnlwdEJsb2NrKGEsCmIpO3QuY2FsbCh0aGlzLGEsYixkKTt0aGlzLl9wcmV2QmxvY2s9ZX19KTttPW0uQ0JDPWg7aD0oZy5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9NCpiLGM9Yy1hLnNpZ0J5dGVzJWMsZD1jPDwyNHxjPDwxNnxjPDw4fGMsZT1bXSxmPTA7ZjxjO2YrPTQpZS5wdXNoKGQpO2M9bC5jcmVhdGUoZSxjKTthLmNvbmNhdChjKX0sdW5wYWQ6ZnVuY3Rpb24oYSl7YS5zaWdCeXRlcy09YS53b3Jkc1thLnNpZ0J5dGVzLTE+Pj4yXSYyNTV9fTtmLkJsb2NrQ2lwaGVyPW4uZXh0ZW5kKHtjZmc6bi5jZmcuZXh0ZW5kKHttb2RlOm0scGFkZGluZzpofSkscmVzZXQ6ZnVuY3Rpb24oKXtuLnJlc2V0LmNhbGwodGhpcyk7dmFyIGE9dGhpcy5jZmcsYj1hLml2LGE9YS5tb2RlO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpdmFyIGM9YS5jcmVhdGVFbmNyeXB0b3I7ZWxzZSBjPWEuY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MTsKdGhpcy5fbW9kZT1jLmNhbGwoYSx0aGlzLGImJmIud29yZHMpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayhhLGIpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2ZnLnBhZGRpbmc7aWYodGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERSl7YS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSk7dmFyIGI9dGhpcy5fcHJvY2VzcyghMCl9ZWxzZSBiPXRoaXMuX3Byb2Nlc3MoITApLGEudW5wYWQoYik7cmV0dXJuIGJ9LGJsb2NrU2l6ZTo0fSk7dmFyIHA9Zi5DaXBoZXJQYXJhbXM9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5taXhJbihhKX0sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHRoaXMuZm9ybWF0dGVyKS5zdHJpbmdpZnkodGhpcyl9fSksbT0oZy5mb3JtYXQ9e30pLk9wZW5TU0w9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt2YXIgYj1hLmNpcGhlcnRleHQ7YT1hLnNhbHQ7CnJldHVybihhP2wuY3JlYXRlKFsxMzk4ODkzNjg0LDE3MDEwNzY4MzFdKS5jb25jYXQoYSkuY29uY2F0KGIpOmIpLnRvU3RyaW5nKHIpfSxwYXJzZTpmdW5jdGlvbihhKXthPXIucGFyc2UoYSk7dmFyIGI9YS53b3JkcztpZigxMzk4ODkzNjg0PT1iWzBdJiYxNzAxMDc2ODMxPT1iWzFdKXt2YXIgYz1sLmNyZWF0ZShiLnNsaWNlKDIsNCkpO2Iuc3BsaWNlKDAsNCk7YS5zaWdCeXRlcy09MTZ9cmV0dXJuIHAuY3JlYXRlKHtjaXBoZXJ0ZXh0OmEsc2FsdDpjfSl9fSxqPWYuU2VyaWFsaXphYmxlQ2lwaGVyPWsuZXh0ZW5kKHtjZmc6ay5leHRlbmQoe2Zvcm1hdDptfSksZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTt2YXIgZT1hLmNyZWF0ZUVuY3J5cHRvcihjLGQpO2I9ZS5maW5hbGl6ZShiKTtlPWUuY2ZnO3JldHVybiBwLmNyZWF0ZSh7Y2lwaGVydGV4dDpiLGtleTpjLGl2OmUuaXYsYWxnb3JpdGhtOmEsbW9kZTplLm1vZGUscGFkZGluZzplLnBhZGRpbmcsCmJsb2NrU2l6ZTphLmJsb2NrU2l6ZSxmb3JtYXR0ZXI6ZC5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTtiPXRoaXMuX3BhcnNlKGIsZC5mb3JtYXQpO3JldHVybiBhLmNyZWF0ZURlY3J5cHRvcihjLGQpLmZpbmFsaXplKGIuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbihhLGIpe3JldHVybiJzdHJpbmciPT10eXBlb2YgYT9iLnBhcnNlKGEsdGhpcyk6YX19KSxnPShnLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbihhLGIsYyxkKXtkfHwoZD1sLnJhbmRvbSg4KSk7YT12LmNyZWF0ZSh7a2V5U2l6ZTpiK2N9KS5jb21wdXRlKGEsZCk7Yz1sLmNyZWF0ZShhLndvcmRzLnNsaWNlKGIpLDQqYyk7YS5zaWdCeXRlcz00KmI7cmV0dXJuIHAuY3JlYXRlKHtrZXk6YSxpdjpjLHNhbHQ6ZH0pfX0scz1mLlBhc3N3b3JkQmFzZWRDaXBoZXI9ai5leHRlbmQoe2NmZzpqLmNmZy5leHRlbmQoe2tkZjpnfSksZW5jcnlwdDpmdW5jdGlvbihhLApiLGMsZCl7ZD10aGlzLmNmZy5leHRlbmQoZCk7Yz1kLmtkZi5leGVjdXRlKGMsYS5rZXlTaXplLGEuaXZTaXplKTtkLml2PWMuaXY7YT1qLmVuY3J5cHQuY2FsbCh0aGlzLGEsYixjLmtleSxkKTthLm1peEluKGMpO3JldHVybiBhfSxkZWNyeXB0OmZ1bmN0aW9uKGEsYixjLGQpe2Q9dGhpcy5jZmcuZXh0ZW5kKGQpO2I9dGhpcy5fcGFyc2UoYixkLmZvcm1hdCk7Yz1kLmtkZi5leGVjdXRlKGMsYS5rZXlTaXplLGEuaXZTaXplLGIuc2FsdCk7ZC5pdj1jLml2O3JldHVybiBqLmRlY3J5cHQuY2FsbCh0aGlzLGEsYixjLmtleSxkKX19KX0oKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBhZXMtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmb3IodmFyIHE9Q3J5cHRvSlMseD1xLmxpYi5CbG9ja0NpcGhlcixyPXEuYWxnbyxqPVtdLHk9W10sej1bXSxBPVtdLEI9W10sQz1bXSxzPVtdLHU9W10sdj1bXSx3PVtdLGc9W10saz0wOzI1Nj5rO2srKylnW2tdPTEyOD5rP2s8PDE6azw8MV4yODM7Zm9yKHZhciBuPTAsbD0wLGs9MDsyNTY+aztrKyspe3ZhciBmPWxebDw8MV5sPDwyXmw8PDNebDw8NCxmPWY+Pj44XmYmMjU1Xjk5O2pbbl09Zjt5W2ZdPW47dmFyIHQ9Z1tuXSxEPWdbdF0sRT1nW0RdLGI9MjU3KmdbZl1eMTY4NDMwMDgqZjt6W25dPWI8PDI0fGI+Pj44O0Fbbl09Yjw8MTZ8Yj4+PjE2O0Jbbl09Yjw8OHxiPj4+MjQ7Q1tuXT1iO2I9MTY4NDMwMDkqRV42NTUzNypEXjI1Nyp0XjE2ODQzMDA4Km47c1tmXT1iPDwyNHxiPj4+ODt1W2ZdPWI8PDE2fGI+Pj4xNjt2W2ZdPWI8PDh8Yj4+PjI0O3dbZl09YjtuPyhuPXReZ1tnW2dbRV50XV1dLGxePWdbZ1tsXV0pOm49bD0xfXZhciBGPVswLDEsMiw0LDgsCjE2LDMyLDY0LDEyOCwyNyw1NF0scj1yLkFFUz14LmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGM9dGhpcy5fa2V5LGU9Yy53b3JkcyxhPWMuc2lnQnl0ZXMvNCxjPTQqKCh0aGlzLl9uUm91bmRzPWErNikrMSksYj10aGlzLl9rZXlTY2hlZHVsZT1bXSxoPTA7aDxjO2grKylpZihoPGEpYltoXT1lW2hdO2Vsc2V7dmFyIGQ9YltoLTFdO2glYT82PGEmJjQ9PWglYSYmKGQ9altkPj4+MjRdPDwyNHxqW2Q+Pj4xNiYyNTVdPDwxNnxqW2Q+Pj44JjI1NV08PDh8altkJjI1NV0pOihkPWQ8PDh8ZD4+PjI0LGQ9altkPj4+MjRdPDwyNHxqW2Q+Pj4xNiYyNTVdPDwxNnxqW2Q+Pj44JjI1NV08PDh8altkJjI1NV0sZF49RltoL2F8MF08PDI0KTtiW2hdPWJbaC1hXV5kfWU9dGhpcy5faW52S2V5U2NoZWR1bGU9W107Zm9yKGE9MDthPGM7YSsrKWg9Yy1hLGQ9YSU0P2JbaF06YltoLTRdLGVbYV09ND5hfHw0Pj1oP2Q6c1tqW2Q+Pj4yNF1dXnVbaltkPj4+MTYmMjU1XV1edltqW2Q+Pj4KOCYyNTVdXV53W2pbZCYyNTVdXX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGMsZSl7dGhpcy5fZG9DcnlwdEJsb2NrKGMsZSx0aGlzLl9rZXlTY2hlZHVsZSx6LEEsQixDLGopfSxkZWNyeXB0QmxvY2s6ZnVuY3Rpb24oYyxlKXt2YXIgYT1jW2UrMV07Y1tlKzFdPWNbZSszXTtjW2UrM109YTt0aGlzLl9kb0NyeXB0QmxvY2soYyxlLHRoaXMuX2ludktleVNjaGVkdWxlLHMsdSx2LHcseSk7YT1jW2UrMV07Y1tlKzFdPWNbZSszXTtjW2UrM109YX0sX2RvQ3J5cHRCbG9jazpmdW5jdGlvbihjLGUsYSxiLGgsZCxqLG0pe2Zvcih2YXIgbj10aGlzLl9uUm91bmRzLGY9Y1tlXV5hWzBdLGc9Y1tlKzFdXmFbMV0saz1jW2UrMl1eYVsyXSxwPWNbZSszXV5hWzNdLGw9NCx0PTE7dDxuO3QrKyl2YXIgcT1iW2Y+Pj4yNF1eaFtnPj4+MTYmMjU1XV5kW2s+Pj44JjI1NV1ealtwJjI1NV1eYVtsKytdLHI9YltnPj4+MjRdXmhbaz4+PjE2JjI1NV1eZFtwPj4+OCYyNTVdXmpbZiYyNTVdXmFbbCsrXSxzPQpiW2s+Pj4yNF1eaFtwPj4+MTYmMjU1XV5kW2Y+Pj44JjI1NV1ealtnJjI1NV1eYVtsKytdLHA9YltwPj4+MjRdXmhbZj4+PjE2JjI1NV1eZFtnPj4+OCYyNTVdXmpbayYyNTVdXmFbbCsrXSxmPXEsZz1yLGs9cztxPShtW2Y+Pj4yNF08PDI0fG1bZz4+PjE2JjI1NV08PDE2fG1baz4+PjgmMjU1XTw8OHxtW3AmMjU1XSleYVtsKytdO3I9KG1bZz4+PjI0XTw8MjR8bVtrPj4+MTYmMjU1XTw8MTZ8bVtwPj4+OCYyNTVdPDw4fG1bZiYyNTVdKV5hW2wrK107cz0obVtrPj4+MjRdPDwyNHxtW3A+Pj4xNiYyNTVdPDwxNnxtW2Y+Pj44JjI1NV08PDh8bVtnJjI1NV0pXmFbbCsrXTtwPShtW3A+Pj4yNF08PDI0fG1bZj4+PjE2JjI1NV08PDE2fG1bZz4+PjgmMjU1XTw8OHxtW2smMjU1XSleYVtsKytdO2NbZV09cTtjW2UrMV09cjtjW2UrMl09cztjW2UrM109cH0sa2V5U2l6ZTo4fSk7cS5BRVM9eC5fY3JlYXRlSGVscGVyKHIpfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiB0cmlwbGVkZXMtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBqKGIsYyl7dmFyIGE9KHRoaXMuX2xCbG9jaz4+PmJedGhpcy5fckJsb2NrKSZjO3RoaXMuX3JCbG9ja149YTt0aGlzLl9sQmxvY2tePWE8PGJ9ZnVuY3Rpb24gbChiLGMpe3ZhciBhPSh0aGlzLl9yQmxvY2s+Pj5iXnRoaXMuX2xCbG9jaykmYzt0aGlzLl9sQmxvY2tePWE7dGhpcy5fckJsb2NrXj1hPDxifXZhciBoPUNyeXB0b0pTLGU9aC5saWIsbj1lLldvcmRBcnJheSxlPWUuQmxvY2tDaXBoZXIsZz1oLmFsZ28scT1bNTcsNDksNDEsMzMsMjUsMTcsOSwxLDU4LDUwLDQyLDM0LDI2LDE4LDEwLDIsNTksNTEsNDMsMzUsMjcsMTksMTEsMyw2MCw1Miw0NCwzNiw2Myw1NSw0NywzOSwzMSwyMywxNSw3LDYyLDU0LDQ2LDM4LDMwLDIyLDE0LDYsNjEsNTMsNDUsMzcsMjksMjEsMTMsNSwyOCwyMCwxMiw0XSxwPVsxNCwxNywxMSwyNCwxLDUsMywyOCwxNSw2LDIxLDEwLDIzLDE5LDEyLDQsMjYsOCwxNiw3LDI3LDIwLDEzLDIsNDEsNTIsMzEsMzcsNDcsCjU1LDMwLDQwLDUxLDQ1LDMzLDQ4LDQ0LDQ5LDM5LDU2LDM0LDUzLDQ2LDQyLDUwLDM2LDI5LDMyXSxyPVsxLDIsNCw2LDgsMTAsMTIsMTQsMTUsMTcsMTksMjEsMjMsMjUsMjcsMjhdLHM9W3siMCI6ODQyMTg4OCwyNjg0MzU0NTY6MzI3NjgsNTM2ODcwOTEyOjg0MjEzNzgsODA1MzA2MzY4OjIsMTA3Mzc0MTgyNDo1MTIsMTM0MjE3NzI4MDo4NDIxODkwLDE2MTA2MTI3MzY6ODM4OTEyMiwxODc5MDQ4MTkyOjgzODg2MDgsMjE0NzQ4MzY0ODo1MTQsMjQxNTkxOTEwNDo4Mzg5MTIwLDI2ODQzNTQ1NjA6MzMyODAsMjk1Mjc5MDAxNjo4NDIxMzc2LDMyMjEyMjU0NzI6MzI3NzAsMzQ4OTY2MDkyODo4Mzg4NjEwLDM3NTgwOTYzODQ6MCw0MDI2NTMxODQwOjMzMjgyLDEzNDIxNzcyODowLDQwMjY1MzE4NDo4NDIxODkwLDY3MTA4ODY0MDozMzI4Miw5Mzk1MjQwOTY6MzI3NjgsMTIwNzk1OTU1Mjo4NDIxODg4LDE0NzYzOTUwMDg6NTEyLDE3NDQ4MzA0NjQ6ODQyMTM3OCwyMDEzMjY1OTIwOjIsCjIyODE3MDEzNzY6ODM4OTEyMCwyNTUwMTM2ODMyOjMzMjgwLDI4MTg1NzIyODg6ODQyMTM3NiwzMDg3MDA3NzQ0OjgzODkxMjIsMzM1NTQ0MzIwMDo4Mzg4NjEwLDM2MjM4Nzg2NTY6MzI3NzAsMzg5MjMxNDExMjo1MTQsNDE2MDc0OTU2ODo4Mzg4NjA4LDE6MzI3NjgsMjY4NDM1NDU3OjIsNTM2ODcwOTEzOjg0MjE4ODgsODA1MzA2MzY5OjgzODg2MDgsMTA3Mzc0MTgyNTo4NDIxMzc4LDEzNDIxNzcyODE6MzMyODAsMTYxMDYxMjczNzo1MTIsMTg3OTA0ODE5Mzo4Mzg5MTIyLDIxNDc0ODM2NDk6ODQyMTg5MCwyNDE1OTE5MTA1Ojg0MjEzNzYsMjY4NDM1NDU2MTo4Mzg4NjEwLDI5NTI3OTAwMTc6MzMyODIsMzIyMTIyNTQ3Mzo1MTQsMzQ4OTY2MDkyOTo4Mzg5MTIwLDM3NTgwOTYzODU6MzI3NzAsNDAyNjUzMTg0MTowLDEzNDIxNzcyOTo4NDIxODkwLDQwMjY1MzE4NTo4NDIxMzc2LDY3MTA4ODY0MTo4Mzg4NjA4LDkzOTUyNDA5Nzo1MTIsMTIwNzk1OTU1MzozMjc2OCwxNDc2Mzk1MDA5OjgzODg2MTAsCjE3NDQ4MzA0NjU6MiwyMDEzMjY1OTIxOjMzMjgyLDIyODE3MDEzNzc6MzI3NzAsMjU1MDEzNjgzMzo4Mzg5MTIyLDI4MTg1NzIyODk6NTE0LDMwODcwMDc3NDU6ODQyMTg4OCwzMzU1NDQzMjAxOjgzODkxMjAsMzYyMzg3ODY1NzowLDM4OTIzMTQxMTM6MzMyODAsNDE2MDc0OTU2OTo4NDIxMzc4fSx7IjAiOjEwNzQyODI1MTIsMTY3NzcyMTY6MTYzODQsMzM1NTQ0MzI6NTI0Mjg4LDUwMzMxNjQ4OjEwNzQyNjYxMjgsNjcxMDg4NjQ6MTA3Mzc0MTg0MCw4Mzg4NjA4MDoxMDc0MjgyNDk2LDEwMDY2MzI5NjoxMDczNzU4MjA4LDExNzQ0MDUxMjoxNiwxMzQyMTc3Mjg6NTQwNjcyLDE1MDk5NDk0NDoxMDczNzU4MjI0LDE2Nzc3MjE2MDoxMDczNzQxODI0LDE4NDU0OTM3Njo1NDA2ODgsMjAxMzI2NTkyOjUyNDMwNCwyMTgxMDM4MDg6MCwyMzQ4ODEwMjQ6MTY0MDAsMjUxNjU4MjQwOjEwNzQyNjYxMTIsODM4ODYwODoxMDczNzU4MjA4LDI1MTY1ODI0OjU0MDY4OCw0MTk0MzA0MDoxNiw1ODcyMDI1NjoxMDczNzU4MjI0LAo3NTQ5NzQ3MjoxMDc0MjgyNTEyLDkyMjc0Njg4OjEwNzM3NDE4MjQsMTA5MDUxOTA0OjUyNDI4OCwxMjU4MjkxMjA6MTA3NDI2NjEyOCwxNDI2MDYzMzY6NTI0MzA0LDE1OTM4MzU1MjowLDE3NjE2MDc2ODoxNjM4NCwxOTI5Mzc5ODQ6MTA3NDI2NjExMiwyMDk3MTUyMDA6MTA3Mzc0MTg0MCwyMjY0OTI0MTY6NTQwNjcyLDI0MzI2OTYzMjoxMDc0MjgyNDk2LDI2MDA0Njg0ODoxNjQwMCwyNjg0MzU0NTY6MCwyODUyMTI2NzI6MTA3NDI2NjEyOCwzMDE5ODk4ODg6MTA3Mzc1ODIyNCwzMTg3NjcxMDQ6MTA3NDI4MjQ5NiwzMzU1NDQzMjA6MTA3NDI2NjExMiwzNTIzMjE1MzY6MTYsMzY5MDk4NzUyOjU0MDY4OCwzODU4NzU5Njg6MTYzODQsNDAyNjUzMTg0OjE2NDAwLDQxOTQzMDQwMDo1MjQyODgsNDM2MjA3NjE2OjUyNDMwNCw0NTI5ODQ4MzI6MTA3Mzc0MTg0MCw0Njk3NjIwNDg6NTQwNjcyLDQ4NjUzOTI2NDoxMDczNzU4MjA4LDUwMzMxNjQ4MDoxMDczNzQxODI0LDUyMDA5MzY5NjoxMDc0MjgyNTEyLAoyNzY4MjQwNjQ6NTQwNjg4LDI5MzYwMTI4MDo1MjQyODgsMzEwMzc4NDk2OjEwNzQyNjYxMTIsMzI3MTU1NzEyOjE2Mzg0LDM0MzkzMjkyODoxMDczNzU4MjA4LDM2MDcxMDE0NDoxMDc0MjgyNTEyLDM3NzQ4NzM2MDoxNiwzOTQyNjQ1NzY6MTA3Mzc0MTgyNCw0MTEwNDE3OTI6MTA3NDI4MjQ5Niw0Mjc4MTkwMDg6MTA3Mzc0MTg0MCw0NDQ1OTYyMjQ6MTA3Mzc1ODIyNCw0NjEzNzM0NDA6NTI0MzA0LDQ3ODE1MDY1NjowLDQ5NDkyNzg3MjoxNjQwMCw1MTE3MDUwODg6MTA3NDI2NjEyOCw1Mjg0ODIzMDQ6NTQwNjcyfSx7IjAiOjI2MCwxMDQ4NTc2OjAsMjA5NzE1Mjo2NzEwOTEyMCwzMTQ1NzI4OjY1Nzk2LDQxOTQzMDQ6NjU1NDAsNTI0Mjg4MDo2NzEwODg2OCw2MjkxNDU2OjY3MTc0NjYwLDczNDAwMzI6NjcxNzQ0MDAsODM4ODYwODo2NzEwODg2NCw5NDM3MTg0OjY3MTc0NjU2LDEwNDg1NzYwOjY1NzkyLDExNTM0MzM2OjY3MTc0NDA0LDEyNTgyOTEyOjY3MTA5MTI0LDEzNjMxNDg4OjY1NTM2LAoxNDY4MDA2NDo0LDE1NzI4NjQwOjI1Niw1MjQyODg6NjcxNzQ2NTYsMTU3Mjg2NDo2NzE3NDQwNCwyNjIxNDQwOjAsMzY3MDAxNjo2NzEwOTEyMCw0NzE4NTkyOjY3MTA4ODY4LDU3NjcxNjg6NjU1MzYsNjgxNTc0NDo2NTU0MCw3ODY0MzIwOjI2MCw4OTEyODk2OjQsOTk2MTQ3MjoyNTYsMTEwMTAwNDg6NjcxNzQ0MDAsMTIwNTg2MjQ6NjU3OTYsMTMxMDcyMDA6NjU3OTIsMTQxNTU3NzY6NjcxMDkxMjQsMTUyMDQzNTI6NjcxNzQ2NjAsMTYyNTI5Mjg6NjcxMDg4NjQsMTY3NzcyMTY6NjcxNzQ2NTYsMTc4MjU3OTI6NjU1NDAsMTg4NzQzNjg6NjU1MzYsMTk5MjI5NDQ6NjcxMDkxMjAsMjA5NzE1MjA6MjU2LDIyMDIwMDk2OjY3MTc0NjYwLDIzMDY4NjcyOjY3MTA4ODY4LDI0MTE3MjQ4OjAsMjUxNjU4MjQ6NjcxMDkxMjQsMjYyMTQ0MDA6NjcxMDg4NjQsMjcyNjI5NzY6NCwyODMxMTU1Mjo2NTc5MiwyOTM2MDEyODo2NzE3NDQwMCwzMDQwODcwNDoyNjAsMzE0NTcyODA6NjU3OTYsMzI1MDU4NTY6NjcxNzQ0MDQsCjE3MzAxNTA0OjY3MTA4ODY0LDE4MzUwMDgwOjI2MCwxOTM5ODY1Njo2NzE3NDY1NiwyMDQ0NzIzMjowLDIxNDk1ODA4OjY1NTQwLDIyNTQ0Mzg0OjY3MTA5MTIwLDIzNTkyOTYwOjI1NiwyNDY0MTUzNjo2NzE3NDQwNCwyNTY5MDExMjo2NTUzNiwyNjczODY4ODo2NzE3NDY2MCwyNzc4NzI2NDo2NTc5NiwyODgzNTg0MDo2NzEwODg2OCwyOTg4NDQxNjo2NzEwOTEyNCwzMDkzMjk5Mjo2NzE3NDQwMCwzMTk4MTU2ODo0LDMzMDMwMTQ0OjY1NzkyfSx7IjAiOjIxNTE2ODIwNDgsNjU1MzY6MjE0NzQ4NzgwOCwxMzEwNzI6NDE5ODQ2NCwxOTY2MDg6MjE1MTY3Nzk1MiwyNjIxNDQ6MCwzMjc2ODA6NDE5ODQwMCwzOTMyMTY6MjE0NzQ4MzcxMiw0NTg3NTI6NDE5NDM2OCw1MjQyODg6MjE0NzQ4MzY0OCw1ODk4MjQ6NDE5NDMwNCw2NTUzNjA6NjQsNzIwODk2OjIxNDc0ODc3NDQsNzg2NDMyOjIxNTE2NzgwMTYsODUxOTY4OjQxNjAsOTE3NTA0OjQwOTYsOTgzMDQwOjIxNTE2ODIxMTIsMzI3Njg6MjE0NzQ4NzgwOCwKOTgzMDQ6NjQsMTYzODQwOjIxNTE2NzgwMTYsMjI5Mzc2OjIxNDc0ODc3NDQsMjk0OTEyOjQxOTg0MDAsMzYwNDQ4OjIxNTE2ODIxMTIsNDI1OTg0OjAsNDkxNTIwOjIxNTE2Nzc5NTIsNTU3MDU2OjQwOTYsNjIyNTkyOjIxNTE2ODIwNDgsNjg4MTI4OjQxOTQzMDQsNzUzNjY0OjQxNjAsODE5MjAwOjIxNDc0ODM2NDgsODg0NzM2OjQxOTQzNjgsOTUwMjcyOjQxOTg0NjQsMTAxNTgwODoyMTQ3NDgzNzEyLDEwNDg1NzY6NDE5NDM2OCwxMTE0MTEyOjQxOTg0MDAsMTE3OTY0ODoyMTQ3NDgzNzEyLDEyNDUxODQ6MCwxMzEwNzIwOjQxNjAsMTM3NjI1NjoyMTUxNjc4MDE2LDE0NDE3OTI6MjE1MTY4MjA0OCwxNTA3MzI4OjIxNDc0ODc4MDgsMTU3Mjg2NDoyMTUxNjgyMTEyLDE2Mzg0MDA6MjE0NzQ4MzY0OCwxNzAzOTM2OjIxNTE2Nzc5NTIsMTc2OTQ3Mjo0MTk4NDY0LDE4MzUwMDg6MjE0NzQ4Nzc0NCwxOTAwNTQ0OjQxOTQzMDQsMTk2NjA4MDo2NCwyMDMxNjE2OjQwOTYsMTA4MTM0NDoyMTUxNjc3OTUyLAoxMTQ2ODgwOjIxNTE2ODIxMTIsMTIxMjQxNjowLDEyNzc5NTI6NDE5ODQwMCwxMzQzNDg4OjQxOTQzNjgsMTQwOTAyNDoyMTQ3NDgzNjQ4LDE0NzQ1NjA6MjE0NzQ4NzgwOCwxNTQwMDk2OjY0LDE2MDU2MzI6MjE0NzQ4MzcxMiwxNjcxMTY4OjQwOTYsMTczNjcwNDoyMTQ3NDg3NzQ0LDE4MDIyNDA6MjE1MTY3ODAxNiwxODY3Nzc2OjQxNjAsMTkzMzMxMjoyMTUxNjgyMDQ4LDE5OTg4NDg6NDE5NDMwNCwyMDY0Mzg0OjQxOTg0NjR9LHsiMCI6MTI4LDQwOTY6MTcwMzkzNjAsODE5MjoyNjIxNDQsMTIyODg6NTM2ODcwOTEyLDE2Mzg0OjUzNzEzMzE4NCwyMDQ4MDoxNjc3NzM0NCwyNDU3Njo1NTM2NDgyNTYsMjg2NzI6MjYyMjcyLDMyNzY4OjE2Nzc3MjE2LDM2ODY0OjUzNzEzMzA1Niw0MDk2MDo1MzY4NzEwNDAsNDUwNTY6NTUzOTEwNDAwLDQ5MTUyOjU1MzkxMDI3Miw1MzI0ODowLDU3MzQ0OjE3MDM5NDg4LDYxNDQwOjU1MzY0ODEyOCwyMDQ4OjE3MDM5NDg4LDYxNDQ6NTUzNjQ4MjU2LAoxMDI0MDoxMjgsMTQzMzY6MTcwMzkzNjAsMTg0MzI6MjYyMTQ0LDIyNTI4OjUzNzEzMzE4NCwyNjYyNDo1NTM5MTAyNzIsMzA3MjA6NTM2ODcwOTEyLDM0ODE2OjUzNzEzMzA1NiwzODkxMjowLDQzMDA4OjU1MzkxMDQwMCw0NzEwNDoxNjc3NzM0NCw1MTIwMDo1MzY4NzEwNDAsNTUyOTY6NTUzNjQ4MTI4LDU5MzkyOjE2Nzc3MjE2LDYzNDg4OjI2MjI3Miw2NTUzNjoyNjIxNDQsNjk2MzI6MTI4LDczNzI4OjUzNjg3MDkxMiw3NzgyNDo1NTM2NDgyNTYsODE5MjA6MTY3NzczNDQsODYwMTY6NTUzOTEwMjcyLDkwMTEyOjUzNzEzMzE4NCw5NDIwODoxNjc3NzIxNiw5ODMwNDo1NTM5MTA0MDAsMTAyNDAwOjU1MzY0ODEyOCwxMDY0OTY6MTcwMzkzNjAsMTEwNTkyOjUzNzEzMzA1NiwxMTQ2ODg6MjYyMjcyLDExODc4NDo1MzY4NzEwNDAsMTIyODgwOjAsMTI2OTc2OjE3MDM5NDg4LDY3NTg0OjU1MzY0ODI1Niw3MTY4MDoxNjc3NzIxNiw3NTc3NjoxNzAzOTM2MCw3OTg3Mjo1MzcxMzMxODQsCjgzOTY4OjUzNjg3MDkxMiw4ODA2NDoxNzAzOTQ4OCw5MjE2MDoxMjgsOTYyNTY6NTUzOTEwMjcyLDEwMDM1MjoyNjIyNzIsMTA0NDQ4OjU1MzkxMDQwMCwxMDg1NDQ6MCwxMTI2NDA6NTUzNjQ4MTI4LDExNjczNjoxNjc3NzM0NCwxMjA4MzI6MjYyMTQ0LDEyNDkyODo1MzcxMzMwNTYsMTI5MDI0OjUzNjg3MTA0MH0seyIwIjoyNjg0MzU0NjQsMjU2OjgxOTIsNTEyOjI3MDUzMjYwOCw3Njg6MjcwNTQwODA4LDEwMjQ6MjY4NDQzNjQ4LDEyODA6MjA5NzE1MiwxNTM2OjIwOTcxNjAsMTc5MjoyNjg0MzU0NTYsMjA0ODowLDIzMDQ6MjY4NDQzNjU2LDI1NjA6MjEwNTM0NCwyODE2OjgsMzA3MjoyNzA1MzI2MTYsMzMyODoyMTA1MzUyLDM1ODQ6ODIwMCwzODQwOjI3MDU0MDgwMCwxMjg6MjcwNTMyNjA4LDM4NDoyNzA1NDA4MDgsNjQwOjgsODk2OjIwOTcxNTIsMTE1MjoyMTA1MzUyLDE0MDg6MjY4NDM1NDY0LDE2NjQ6MjY4NDQzNjQ4LDE5MjA6ODIwMCwyMTc2OjIwOTcxNjAsMjQzMjo4MTkyLAoyNjg4OjI2ODQ0MzY1NiwyOTQ0OjI3MDUzMjYxNiwzMjAwOjAsMzQ1NjoyNzA1NDA4MDAsMzcxMjoyMTA1MzQ0LDM5Njg6MjY4NDM1NDU2LDQwOTY6MjY4NDQzNjQ4LDQzNTI6MjcwNTMyNjE2LDQ2MDg6MjcwNTQwODA4LDQ4NjQ6ODIwMCw1MTIwOjIwOTcxNTIsNTM3NjoyNjg0MzU0NTYsNTYzMjoyNjg0MzU0NjQsNTg4ODoyMTA1MzQ0LDYxNDQ6MjEwNTM1Miw2NDAwOjAsNjY1Njo4LDY5MTI6MjcwNTMyNjA4LDcxNjg6ODE5Miw3NDI0OjI2ODQ0MzY1Niw3NjgwOjI3MDU0MDgwMCw3OTM2OjIwOTcxNjAsNDIyNDo4LDQ0ODA6MjEwNTM0NCw0NzM2OjIwOTcxNTIsNDk5MjoyNjg0MzU0NjQsNTI0ODoyNjg0NDM2NDgsNTUwNDo4MjAwLDU3NjA6MjcwNTQwODA4LDYwMTY6MjcwNTMyNjA4LDYyNzI6MjcwNTQwODAwLDY1Mjg6MjcwNTMyNjE2LDY3ODQ6ODE5Miw3MDQwOjIxMDUzNTIsNzI5NjoyMDk3MTYwLDc1NTI6MCw3ODA4OjI2ODQzNTQ1Niw4MDY0OjI2ODQ0MzY1Nn0seyIwIjoxMDQ4NTc2LAoxNjozMzU1NTQ1NywzMjoxMDI0LDQ4OjEwNDk2MDEsNjQ6MzQ2MDQwMzMsODA6MCw5NjoxLDExMjozNDYwMzAwOSwxMjg6MzM1NTU0NTYsMTQ0OjEwNDg1NzcsMTYwOjMzNTU0NDMzLDE3NjozNDYwNDAzMiwxOTI6MzQ2MDMwMDgsMjA4OjEwMjUsMjI0OjEwNDk2MDAsMjQwOjMzNTU0NDMyLDg6MzQ2MDMwMDksMjQ6MCw0MDozMzU1NTQ1Nyw1NjozNDYwNDAzMiw3MjoxMDQ4NTc2LDg4OjMzNTU0NDMzLDEwNDozMzU1NDQzMiwxMjA6MTAyNSwxMzY6MTA0OTYwMSwxNTI6MzM1NTU0NTYsMTY4OjM0NjAzMDA4LDE4NDoxMDQ4NTc3LDIwMDoxMDI0LDIxNjozNDYwNDAzMywyMzI6MSwyNDg6MTA0OTYwMCwyNTY6MzM1NTQ0MzIsMjcyOjEwNDg1NzYsMjg4OjMzNTU1NDU3LDMwNDozNDYwMzAwOSwzMjA6MTA0ODU3NywzMzY6MzM1NTU0NTYsMzUyOjM0NjA0MDMyLDM2ODoxMDQ5NjAxLDM4NDoxMDI1LDQwMDozNDYwNDAzMyw0MTY6MTA0OTYwMCw0MzI6MSw0NDg6MCw0NjQ6MzQ2MDMwMDgsNDgwOjMzNTU0NDMzLAo0OTY6MTAyNCwyNjQ6MTA0OTYwMCwyODA6MzM1NTU0NTcsMjk2OjM0NjAzMDA5LDMxMjoxLDMyODozMzU1NDQzMiwzNDQ6MTA0ODU3NiwzNjA6MTAyNSwzNzY6MzQ2MDQwMzIsMzkyOjMzNTU0NDMzLDQwODozNDYwMzAwOCw0MjQ6MCw0NDA6MzQ2MDQwMzMsNDU2OjEwNDk2MDEsNDcyOjEwMjQsNDg4OjMzNTU1NDU2LDUwNDoxMDQ4NTc3fSx7IjAiOjEzNDIxOTgwOCwxOjEzMTA3MiwyOjEzNDIxNzcyOCwzOjMyLDQ6MTMxMTA0LDU6MTM0MzUwODgwLDY6MTM0MzUwODQ4LDc6MjA0OCw4OjEzNDM0ODgwMCw5OjEzNDIxOTc3NiwxMDoxMzMxMjAsMTE6MTM0MzQ4ODMyLDEyOjIwODAsMTM6MCwxNDoxMzQyMTc3NjAsMTU6MTMzMTUyLDIxNDc0ODM2NDg6MjA0OCwyMTQ3NDgzNjQ5OjEzNDM1MDg4MCwyMTQ3NDgzNjUwOjEzNDIxOTgwOCwyMTQ3NDgzNjUxOjEzNDIxNzcyOCwyMTQ3NDgzNjUyOjEzNDM0ODgwMCwyMTQ3NDgzNjUzOjEzMzEyMCwyMTQ3NDgzNjU0OjEzMzE1MiwyMTQ3NDgzNjU1OjMyLAoyMTQ3NDgzNjU2OjEzNDIxNzc2MCwyMTQ3NDgzNjU3OjIwODAsMjE0NzQ4MzY1ODoxMzExMDQsMjE0NzQ4MzY1OToxMzQzNTA4NDgsMjE0NzQ4MzY2MDowLDIxNDc0ODM2NjE6MTM0MzQ4ODMyLDIxNDc0ODM2NjI6MTM0MjE5Nzc2LDIxNDc0ODM2NjM6MTMxMDcyLDE2OjEzMzE1MiwxNzoxMzQzNTA4NDgsMTg6MzIsMTk6MjA0OCwyMDoxMzQyMTk3NzYsMjE6MTM0MjE3NzYwLDIyOjEzNDM0ODgzMiwyMzoxMzEwNzIsMjQ6MCwyNToxMzExMDQsMjY6MTM0MzQ4ODAwLDI3OjEzNDIxOTgwOCwyODoxMzQzNTA4ODAsMjk6MTMzMTIwLDMwOjIwODAsMzE6MTM0MjE3NzI4LDIxNDc0ODM2NjQ6MTMxMDcyLDIxNDc0ODM2NjU6MjA0OCwyMTQ3NDgzNjY2OjEzNDM0ODgzMiwyMTQ3NDgzNjY3OjEzMzE1MiwyMTQ3NDgzNjY4OjMyLDIxNDc0ODM2Njk6MTM0MzQ4ODAwLDIxNDc0ODM2NzA6MTM0MjE3NzI4LDIxNDc0ODM2NzE6MTM0MjE5ODA4LDIxNDc0ODM2NzI6MTM0MzUwODgwLDIxNDc0ODM2NzM6MTM0MjE3NzYwLAoyMTQ3NDgzNjc0OjEzNDIxOTc3NiwyMTQ3NDgzNjc1OjAsMjE0NzQ4MzY3NjoxMzMxMjAsMjE0NzQ4MzY3NzoyMDgwLDIxNDc0ODM2Nzg6MTMxMTA0LDIxNDc0ODM2Nzk6MTM0MzUwODQ4fV0sdD1bNDE2MDc0OTU2OSw1Mjg0ODIzMDQsMzMwMzAxNDQsMjA2NDM4NCwxMjkwMjQsODA2NCw1MDQsMjE0NzQ4MzY3OV0sbT1nLkRFUz1lLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy5fa2V5LndvcmRzLGM9W10sYT0wOzU2PmE7YSsrKXt2YXIgZj1xW2FdLTE7Y1thXT1iW2Y+Pj41XT4+PjMxLWYlMzImMX1iPXRoaXMuX3N1YktleXM9W107Zm9yKGY9MDsxNj5mO2YrKyl7Zm9yKHZhciBkPWJbZl09W10sZT1yW2ZdLGE9MDsyND5hO2ErKylkW2EvNnwwXXw9Y1socFthXS0xK2UpJTI4XTw8MzEtYSU2LGRbNCsoYS82fDApXXw9Y1syOCsocFthKzI0XS0xK2UpJTI4XTw8MzEtYSU2O2RbMF09ZFswXTw8MXxkWzBdPj4+MzE7Zm9yKGE9MTs3PmE7YSsrKWRbYV0+Pj49CjQqKGEtMSkrMztkWzddPWRbN108PDV8ZFs3XT4+PjI3fWM9dGhpcy5faW52U3ViS2V5cz1bXTtmb3IoYT0wOzE2PmE7YSsrKWNbYV09YlsxNS1hXX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZG9DcnlwdEJsb2NrKGIsYyx0aGlzLl9zdWJLZXlzKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZG9DcnlwdEJsb2NrKGIsYyx0aGlzLl9pbnZTdWJLZXlzKX0sX2RvQ3J5cHRCbG9jazpmdW5jdGlvbihiLGMsYSl7dGhpcy5fbEJsb2NrPWJbY107dGhpcy5fckJsb2NrPWJbYysxXTtqLmNhbGwodGhpcyw0LDI1MjY0NTEzNSk7ai5jYWxsKHRoaXMsMTYsNjU1MzUpO2wuY2FsbCh0aGlzLDIsODU4OTkzNDU5KTtsLmNhbGwodGhpcyw4LDE2NzExOTM1KTtqLmNhbGwodGhpcywxLDE0MzE2NTU3NjUpO2Zvcih2YXIgZj0wOzE2PmY7ZisrKXtmb3IodmFyIGQ9YVtmXSxlPXRoaXMuX2xCbG9jayxoPXRoaXMuX3JCbG9jayxnPTAsaz0wOzg+aztrKyspZ3w9c1trXVsoKGheCmRba10pJnRba10pPj4+MF07dGhpcy5fbEJsb2NrPWg7dGhpcy5fckJsb2NrPWVeZ31hPXRoaXMuX2xCbG9jazt0aGlzLl9sQmxvY2s9dGhpcy5fckJsb2NrO3RoaXMuX3JCbG9jaz1hO2ouY2FsbCh0aGlzLDEsMTQzMTY1NTc2NSk7bC5jYWxsKHRoaXMsOCwxNjcxMTkzNSk7bC5jYWxsKHRoaXMsMiw4NTg5OTM0NTkpO2ouY2FsbCh0aGlzLDE2LDY1NTM1KTtqLmNhbGwodGhpcyw0LDI1MjY0NTEzNSk7YltjXT10aGlzLl9sQmxvY2s7YltjKzFdPXRoaXMuX3JCbG9ja30sa2V5U2l6ZToyLGl2U2l6ZToyLGJsb2NrU2l6ZToyfSk7aC5ERVM9ZS5fY3JlYXRlSGVscGVyKG0pO2c9Zy5UcmlwbGVERVM9ZS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fa2V5LndvcmRzO3RoaXMuX2RlczE9bS5jcmVhdGVFbmNyeXB0b3Iobi5jcmVhdGUoYi5zbGljZSgwLDIpKSk7dGhpcy5fZGVzMj1tLmNyZWF0ZUVuY3J5cHRvcihuLmNyZWF0ZShiLnNsaWNlKDIsNCkpKTt0aGlzLl9kZXMzPQptLmNyZWF0ZUVuY3J5cHRvcihuLmNyZWF0ZShiLnNsaWNlKDQsNikpKX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZGVzMS5lbmNyeXB0QmxvY2soYixjKTt0aGlzLl9kZXMyLmRlY3J5cHRCbG9jayhiLGMpO3RoaXMuX2RlczMuZW5jcnlwdEJsb2NrKGIsYyl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbihiLGMpe3RoaXMuX2RlczMuZGVjcnlwdEJsb2NrKGIsYyk7dGhpcy5fZGVzMi5lbmNyeXB0QmxvY2soYixjKTt0aGlzLl9kZXMxLmRlY3J5cHRCbG9jayhiLGMpfSxrZXlTaXplOjYsaXZTaXplOjIsYmxvY2tTaXplOjJ9KTtoLlRyaXBsZURFUz1lLl9jcmVhdGVIZWxwZXIoZyl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIGVuYy1iYXNlNjQtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgaD1DcnlwdG9KUyxqPWgubGliLldvcmRBcnJheTtoLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbihiKXt2YXIgZT1iLndvcmRzLGY9Yi5zaWdCeXRlcyxjPXRoaXMuX21hcDtiLmNsYW1wKCk7Yj1bXTtmb3IodmFyIGE9MDthPGY7YSs9Mylmb3IodmFyIGQ9KGVbYT4+PjJdPj4+MjQtOCooYSU0KSYyNTUpPDwxNnwoZVthKzE+Pj4yXT4+PjI0LTgqKChhKzEpJTQpJjI1NSk8PDh8ZVthKzI+Pj4yXT4+PjI0LTgqKChhKzIpJTQpJjI1NSxnPTA7ND5nJiZhKzAuNzUqZzxmO2crKyliLnB1c2goYy5jaGFyQXQoZD4+PjYqKDMtZykmNjMpKTtpZihlPWMuY2hhckF0KDY0KSlmb3IoO2IubGVuZ3RoJTQ7KWIucHVzaChlKTtyZXR1cm4gYi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYil7dmFyIGU9Yi5sZW5ndGgsZj10aGlzLl9tYXAsYz1mLmNoYXJBdCg2NCk7YyYmKGM9Yi5pbmRleE9mKGMpLC0xIT1jJiYoZT1jKSk7Zm9yKHZhciBjPVtdLGE9MCxkPTA7ZDwKZTtkKyspaWYoZCU0KXt2YXIgZz1mLmluZGV4T2YoYi5jaGFyQXQoZC0xKSk8PDIqKGQlNCksaD1mLmluZGV4T2YoYi5jaGFyQXQoZCkpPj4+Ni0yKihkJTQpO2NbYT4+PjJdfD0oZ3xoKTw8MjQtOCooYSU0KTthKyt9cmV0dXJuIGouY3JlYXRlKGMsYSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In19KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIG1kNS1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihFKXtmdW5jdGlvbiBoKGEsZixnLGoscCxoLGspe2E9YSsoZiZnfH5mJmopK3AraztyZXR1cm4oYTw8aHxhPj4+MzItaCkrZn1mdW5jdGlvbiBrKGEsZixnLGoscCxoLGspe2E9YSsoZiZqfGcmfmopK3AraztyZXR1cm4oYTw8aHxhPj4+MzItaCkrZn1mdW5jdGlvbiBsKGEsZixnLGosaCxrLGwpe2E9YSsoZl5nXmopK2grbDtyZXR1cm4oYTw8a3xhPj4+MzItaykrZn1mdW5jdGlvbiBuKGEsZixnLGosaCxrLGwpe2E9YSsoZ14oZnx+aikpK2grbDtyZXR1cm4oYTw8a3xhPj4+MzItaykrZn1mb3IodmFyIHI9Q3J5cHRvSlMscT1yLmxpYixGPXEuV29yZEFycmF5LHM9cS5IYXNoZXIscT1yLmFsZ28sYT1bXSx0PTA7NjQ+dDt0KyspYVt0XT00Mjk0OTY3Mjk2KkUuYWJzKEUuc2luKHQrMSkpfDA7cT1xLk1ENT1zLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBGLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSwKX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKG0sZil7Zm9yKHZhciBnPTA7MTY+ZztnKyspe3ZhciBqPWYrZyxwPW1bal07bVtqXT0ocDw8OHxwPj4+MjQpJjE2NzExOTM1fChwPDwyNHxwPj4+OCkmNDI3ODI1NTM2MH12YXIgZz10aGlzLl9oYXNoLndvcmRzLGo9bVtmKzBdLHA9bVtmKzFdLHE9bVtmKzJdLHI9bVtmKzNdLHM9bVtmKzRdLHQ9bVtmKzVdLHU9bVtmKzZdLHY9bVtmKzddLHc9bVtmKzhdLHg9bVtmKzldLHk9bVtmKzEwXSx6PW1bZisxMV0sQT1tW2YrMTJdLEI9bVtmKzEzXSxDPW1bZisxNF0sRD1tW2YrMTVdLGI9Z1swXSxjPWdbMV0sZD1nWzJdLGU9Z1szXSxiPWgoYixjLGQsZSxqLDcsYVswXSksZT1oKGUsYixjLGQscCwxMixhWzFdKSxkPWgoZCxlLGIsYyxxLDE3LGFbMl0pLGM9aChjLGQsZSxiLHIsMjIsYVszXSksYj1oKGIsYyxkLGUscyw3LGFbNF0pLGU9aChlLGIsYyxkLHQsMTIsYVs1XSksZD1oKGQsZSxiLGMsdSwxNyxhWzZdKSxjPWgoYyxkLGUsYix2LDIyLGFbN10pLApiPWgoYixjLGQsZSx3LDcsYVs4XSksZT1oKGUsYixjLGQseCwxMixhWzldKSxkPWgoZCxlLGIsYyx5LDE3LGFbMTBdKSxjPWgoYyxkLGUsYix6LDIyLGFbMTFdKSxiPWgoYixjLGQsZSxBLDcsYVsxMl0pLGU9aChlLGIsYyxkLEIsMTIsYVsxM10pLGQ9aChkLGUsYixjLEMsMTcsYVsxNF0pLGM9aChjLGQsZSxiLEQsMjIsYVsxNV0pLGI9ayhiLGMsZCxlLHAsNSxhWzE2XSksZT1rKGUsYixjLGQsdSw5LGFbMTddKSxkPWsoZCxlLGIsYyx6LDE0LGFbMThdKSxjPWsoYyxkLGUsYixqLDIwLGFbMTldKSxiPWsoYixjLGQsZSx0LDUsYVsyMF0pLGU9ayhlLGIsYyxkLHksOSxhWzIxXSksZD1rKGQsZSxiLGMsRCwxNCxhWzIyXSksYz1rKGMsZCxlLGIscywyMCxhWzIzXSksYj1rKGIsYyxkLGUseCw1LGFbMjRdKSxlPWsoZSxiLGMsZCxDLDksYVsyNV0pLGQ9ayhkLGUsYixjLHIsMTQsYVsyNl0pLGM9ayhjLGQsZSxiLHcsMjAsYVsyN10pLGI9ayhiLGMsZCxlLEIsNSxhWzI4XSksZT1rKGUsYiwKYyxkLHEsOSxhWzI5XSksZD1rKGQsZSxiLGMsdiwxNCxhWzMwXSksYz1rKGMsZCxlLGIsQSwyMCxhWzMxXSksYj1sKGIsYyxkLGUsdCw0LGFbMzJdKSxlPWwoZSxiLGMsZCx3LDExLGFbMzNdKSxkPWwoZCxlLGIsYyx6LDE2LGFbMzRdKSxjPWwoYyxkLGUsYixDLDIzLGFbMzVdKSxiPWwoYixjLGQsZSxwLDQsYVszNl0pLGU9bChlLGIsYyxkLHMsMTEsYVszN10pLGQ9bChkLGUsYixjLHYsMTYsYVszOF0pLGM9bChjLGQsZSxiLHksMjMsYVszOV0pLGI9bChiLGMsZCxlLEIsNCxhWzQwXSksZT1sKGUsYixjLGQsaiwxMSxhWzQxXSksZD1sKGQsZSxiLGMsciwxNixhWzQyXSksYz1sKGMsZCxlLGIsdSwyMyxhWzQzXSksYj1sKGIsYyxkLGUseCw0LGFbNDRdKSxlPWwoZSxiLGMsZCxBLDExLGFbNDVdKSxkPWwoZCxlLGIsYyxELDE2LGFbNDZdKSxjPWwoYyxkLGUsYixxLDIzLGFbNDddKSxiPW4oYixjLGQsZSxqLDYsYVs0OF0pLGU9bihlLGIsYyxkLHYsMTAsYVs0OV0pLGQ9bihkLGUsYixjLApDLDE1LGFbNTBdKSxjPW4oYyxkLGUsYix0LDIxLGFbNTFdKSxiPW4oYixjLGQsZSxBLDYsYVs1Ml0pLGU9bihlLGIsYyxkLHIsMTAsYVs1M10pLGQ9bihkLGUsYixjLHksMTUsYVs1NF0pLGM9bihjLGQsZSxiLHAsMjEsYVs1NV0pLGI9bihiLGMsZCxlLHcsNixhWzU2XSksZT1uKGUsYixjLGQsRCwxMCxhWzU3XSksZD1uKGQsZSxiLGMsdSwxNSxhWzU4XSksYz1uKGMsZCxlLGIsQiwyMSxhWzU5XSksYj1uKGIsYyxkLGUscyw2LGFbNjBdKSxlPW4oZSxiLGMsZCx6LDEwLGFbNjFdKSxkPW4oZCxlLGIsYyxxLDE1LGFbNjJdKSxjPW4oYyxkLGUsYix4LDIxLGFbNjNdKTtnWzBdPWdbMF0rYnwwO2dbMV09Z1sxXStjfDA7Z1syXT1nWzJdK2R8MDtnWzNdPWdbM10rZXwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZj1hLndvcmRzLGc9OCp0aGlzLl9uRGF0YUJ5dGVzLGo9OCphLnNpZ0J5dGVzO2Zbaj4+PjVdfD0xMjg8PDI0LWolMzI7dmFyIGg9RS5mbG9vcihnLwo0Mjk0OTY3Mjk2KTtmWyhqKzY0Pj4+OTw8NCkrMTVdPShoPDw4fGg+Pj4yNCkmMTY3MTE5MzV8KGg8PDI0fGg+Pj44KSY0Mjc4MjU1MzYwO2ZbKGorNjQ+Pj45PDw0KSsxNF09KGc8PDh8Zz4+PjI0KSYxNjcxMTkzNXwoZzw8MjR8Zz4+PjgpJjQyNzgyNTUzNjA7YS5zaWdCeXRlcz00KihmLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7YT10aGlzLl9oYXNoO2Y9YS53b3Jkcztmb3IoZz0wOzQ+ZztnKyspaj1mW2ddLGZbZ109KGo8PDh8aj4+PjI0KSYxNjcxMTkzNXwoajw8MjR8aj4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9cy5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfX0pO3IuTUQ1PXMuX2NyZWF0ZUhlbHBlcihxKTtyLkhtYWNNRDU9cy5fY3JlYXRlSG1hY0hlbHBlcihxKX0pKE1hdGgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTEtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgaz1DcnlwdG9KUyxiPWsubGliLG09Yi5Xb3JkQXJyYXksbD1iLkhhc2hlcixkPVtdLGI9ay5hbGdvLlNIQTE9bC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgbS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24obixwKXtmb3IodmFyIGE9dGhpcy5faGFzaC53b3JkcyxlPWFbMF0sZj1hWzFdLGg9YVsyXSxqPWFbM10sYj1hWzRdLGM9MDs4MD5jO2MrKyl7aWYoMTY+YylkW2NdPW5bcCtjXXwwO2Vsc2V7dmFyIGc9ZFtjLTNdXmRbYy04XV5kW2MtMTRdXmRbYy0xNl07ZFtjXT1nPDwxfGc+Pj4zMX1nPShlPDw1fGU+Pj4yNykrYitkW2NdO2c9MjA+Yz9nKygoZiZofH5mJmopKzE1MTg1MDAyNDkpOjQwPmM/ZysoKGZeaF5qKSsxODU5Nzc1MzkzKTo2MD5jP2crKChmJmh8ZiZqfGgmaiktMTg5NDAwNzU4OCk6ZysoKGZeaF4KaiktODk5NDk3NTE0KTtiPWo7aj1oO2g9Zjw8MzB8Zj4+PjI7Zj1lO2U9Z31hWzBdPWFbMF0rZXwwO2FbMV09YVsxXStmfDA7YVsyXT1hWzJdK2h8MDthWzNdPWFbM10ranwwO2FbNF09YVs0XStifDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZGF0YSxkPWIud29yZHMsYT04KnRoaXMuX25EYXRhQnl0ZXMsZT04KmIuc2lnQnl0ZXM7ZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPU1hdGguZmxvb3IoYS80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWE7Yi5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYj1sLmNsb25lLmNhbGwodGhpcyk7Yi5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGJ9fSk7ay5TSEExPWwuX2NyZWF0ZUhlbHBlcihiKTtrLkhtYWNTSEExPWwuX2NyZWF0ZUhtYWNIZWxwZXIoYil9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTI1Ni1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihrKXtmb3IodmFyIGc9Q3J5cHRvSlMsaD1nLmxpYix2PWguV29yZEFycmF5LGo9aC5IYXNoZXIsaD1nLmFsZ28scz1bXSx0PVtdLHU9ZnVuY3Rpb24ocSl7cmV0dXJuIDQyOTQ5NjcyOTYqKHEtKHF8MCkpfDB9LGw9MixiPTA7NjQ+Yjspe3ZhciBkO2E6e2Q9bDtmb3IodmFyIHc9ay5zcXJ0KGQpLHI9MjtyPD13O3IrKylpZighKGQlcikpe2Q9ITE7YnJlYWsgYX1kPSEwfWQmJig4PmImJihzW2JdPXUoay5wb3cobCwwLjUpKSksdFtiXT11KGsucG93KGwsMS8zKSksYisrKTtsKyt9dmFyIG49W10saD1oLlNIQTI1Nj1qLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyB2LmluaXQocy5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihxLGgpe2Zvcih2YXIgYT10aGlzLl9oYXNoLndvcmRzLGM9YVswXSxkPWFbMV0sYj1hWzJdLGs9YVszXSxmPWFbNF0sZz1hWzVdLGo9YVs2XSxsPWFbN10sZT0wOzY0PmU7ZSsrKXtpZigxNj5lKW5bZV09CnFbaCtlXXwwO2Vsc2V7dmFyIG09bltlLTE1XSxwPW5bZS0yXTtuW2VdPSgobTw8MjV8bT4+PjcpXihtPDwxNHxtPj4+MTgpXm0+Pj4zKStuW2UtN10rKChwPDwxNXxwPj4+MTcpXihwPDwxM3xwPj4+MTkpXnA+Pj4xMCkrbltlLTE2XX1tPWwrKChmPDwyNnxmPj4+NileKGY8PDIxfGY+Pj4xMSleKGY8PDd8Zj4+PjI1KSkrKGYmZ15+ZiZqKSt0W2VdK25bZV07cD0oKGM8PDMwfGM+Pj4yKV4oYzw8MTl8Yz4+PjEzKV4oYzw8MTB8Yz4+PjIyKSkrKGMmZF5jJmJeZCZiKTtsPWo7aj1nO2c9ZjtmPWsrbXwwO2s9YjtiPWQ7ZD1jO2M9bStwfDB9YVswXT1hWzBdK2N8MDthWzFdPWFbMV0rZHwwO2FbMl09YVsyXStifDA7YVszXT1hWzNdK2t8MDthWzRdPWFbNF0rZnwwO2FbNV09YVs1XStnfDA7YVs2XT1hWzZdK2p8MDthWzddPWFbN10rbHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMuX2RhdGEsYj1kLndvcmRzLGE9OCp0aGlzLl9uRGF0YUJ5dGVzLGM9OCpkLnNpZ0J5dGVzOwpiW2M+Pj41XXw9MTI4PDwyNC1jJTMyO2JbKGMrNjQ+Pj45PDw0KSsxNF09ay5mbG9vcihhLzQyOTQ5NjcyOTYpO2JbKGMrNjQ+Pj45PDw0KSsxNV09YTtkLnNpZ0J5dGVzPTQqYi5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBiPWouY2xvbmUuY2FsbCh0aGlzKTtiLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gYn19KTtnLlNIQTI1Nj1qLl9jcmVhdGVIZWxwZXIoaCk7Zy5IbWFjU0hBMjU2PWouX2NyZWF0ZUhtYWNIZWxwZXIoaCl9KShNYXRoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBzaGEyMjQtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgYj1DcnlwdG9KUyxkPWIubGliLldvcmRBcnJheSxhPWIuYWxnbyxjPWEuU0hBMjU2LGE9YS5TSEEyMjQ9Yy5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgZC5pbml0KFszMjM4MzcxMDMyLDkxNDE1MDY2Myw4MTI3MDI5OTksNDE0NDkxMjY5Nyw0MjkwNzc1ODU3LDE3NTA2MDMwMjUsMTY5NDA3NjgzOSwzMjA0MDc1NDI4XSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9Yy5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTQ7cmV0dXJuIGF9fSk7Yi5TSEEyMjQ9Yy5fY3JlYXRlSGVscGVyKGEpO2IuSG1hY1NIQTIyND1jLl9jcmVhdGVIbWFjSGVscGVyKGEpfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBzaGE1MTItbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cmV0dXJuIGQuY3JlYXRlLmFwcGx5KGQsYXJndW1lbnRzKX1mb3IodmFyIG49Q3J5cHRvSlMscj1uLmxpYi5IYXNoZXIsZT1uLng2NCxkPWUuV29yZCxUPWUuV29yZEFycmF5LGU9bi5hbGdvLGVhPVthKDExMTYzNTI0MDgsMzYwOTc2NzQ1OCksYSgxODk5NDQ3NDQxLDYwMjg5MTcyNSksYSgzMDQ5MzIzNDcxLDM5NjQ0ODQzOTkpLGEoMzkyMTAwOTU3MywyMTczMjk1NTQ4KSxhKDk2MTk4NzE2Myw0MDgxNjI4NDcyKSxhKDE1MDg5NzA5OTMsMzA1MzgzNDI2NSksYSgyNDUzNjM1NzQ4LDI5Mzc2NzE1NzkpLGEoMjg3MDc2MzIyMSwzNjY0NjA5NTYwKSxhKDM2MjQzODEwODAsMjczNDg4MzM5NCksYSgzMTA1OTg0MDEsMTE2NDk5NjU0MiksYSg2MDcyMjUyNzgsMTMyMzYxMDc2NCksYSgxNDI2ODgxOTg3LDM1OTAzMDQ5OTQpLGEoMTkyNTA3ODM4OCw0MDY4MTgyMzgzKSxhKDIxNjIwNzgyMDYsOTkxMzM2MTEzKSxhKDI2MTQ4ODgxMDMsNjMzODAzMzE3KSwKYSgzMjQ4MjIyNTgwLDM0Nzk3NzQ4NjgpLGEoMzgzNTM5MDQwMSwyNjY2NjEzNDU4KSxhKDQwMjIyMjQ3NzQsOTQ0NzExMTM5KSxhKDI2NDM0NzA3OCwyMzQxMjYyNzczKSxhKDYwNDgwNzYyOCwyMDA3ODAwOTMzKSxhKDc3MDI1NTk4MywxNDk1OTkwOTAxKSxhKDEyNDkxNTAxMjIsMTg1NjQzMTIzNSksYSgxNTU1MDgxNjkyLDMxNzUyMTgxMzIpLGEoMTk5NjA2NDk4NiwyMTk4OTUwODM3KSxhKDI1NTQyMjA4ODIsMzk5OTcxOTMzOSksYSgyODIxODM0MzQ5LDc2Njc4NDAxNiksYSgyOTUyOTk2ODA4LDI1NjY1OTQ4NzkpLGEoMzIxMDMxMzY3MSwzMjAzMzM3OTU2KSxhKDMzMzY1NzE4OTEsMTAzNDQ1NzAyNiksYSgzNTg0NTI4NzExLDI0NjY5NDg5MDEpLGEoMTEzOTI2OTkzLDM3NTgzMjYzODMpLGEoMzM4MjQxODk1LDE2ODcxNzkzNiksYSg2NjYzMDcyMDUsMTE4ODE3OTk2NCksYSg3NzM1Mjk5MTIsMTU0NjA0NTczNCksYSgxMjk0NzU3MzcyLDE1MjI4MDU0ODUpLGEoMTM5NjE4MjI5MSwKMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSwKYSgxOTU1NTYyMjIyLDE1NzU5OTAwMTIpLGEoMjAyNDEwNDgxNSwxMTI1NTkyOTI4KSxhKDIyMjc3MzA0NTIsMjcxNjkwNDMwNiksYSgyMzYxODUyNDI0LDQ0Mjc3NjA0NCksYSgyNDI4NDM2NDc0LDU5MzY5ODM0NCksYSgyNzU2NzM0MTg3LDM3MzMxMTAyNDkpLGEoMzIwNDAzMTQ3OSwyOTk5MzUxNTczKSxhKDMzMjkzMjUyOTgsMzgxNTkyMDQyNyksYSgzMzkxNTY5NjE0LDM5MjgzODM5MDApLGEoMzUxNTI2NzI3MSw1NjYyODA3MTEpLGEoMzk0MDE4NzYwNiwzNDU0MDY5NTM0KSxhKDQxMTg2MzAyNzEsNDAwMDIzOTk5MiksYSgxMTY0MTg0NzQsMTkxNDEzODU1NCksYSgxNzQyOTI0MjEsMjczMTA1NTI3MCksYSgyODkzODAzNTYsMzIwMzk5MzAwNiksYSg0NjAzOTMyNjksMzIwNjIwMzE1KSxhKDY4NTQ3MTczMyw1ODc0OTY4MzYpLGEoODUyMTQyOTcxLDEwODY3OTI4NTEpLGEoMTAxNzAzNjI5OCwzNjU1NDMxMDApLGEoMTEyNjAwMDU4MCwyNjE4Mjk3Njc2KSxhKDEyODgwMzM0NzAsCjM0MDk4NTUxNTgpLGEoMTUwMTUwNTk0OCw0MjM0NTA5ODY2KSxhKDE2MDcxNjc5MTUsOTg3MTY3NDY4KSxhKDE4MTY0MDIzMTYsMTI0NjE4OTU5MSldLHY9W10sdz0wOzgwPnc7dysrKXZbd109YSgpO2U9ZS5TSEE1MTI9ci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgVC5pbml0KFtuZXcgZC5pbml0KDE3NzkwMzM3MDMsNDA4OTIzNTcyMCksbmV3IGQuaW5pdCgzMTQ0MTM0Mjc3LDIyMjc4NzM1OTUpLG5ldyBkLmluaXQoMTAxMzkwNDI0Miw0MjcxMTc1NzIzKSxuZXcgZC5pbml0KDI3NzM0ODA3NjIsMTU5NTc1MDEyOSksbmV3IGQuaW5pdCgxMzU5ODkzMTE5LDI5MTc1NjUxMzcpLG5ldyBkLmluaXQoMjYwMDgyMjkyNCw3MjU1MTExOTkpLG5ldyBkLmluaXQoNTI4NzM0NjM1LDQyMTUzODk1NDcpLG5ldyBkLmluaXQoMTU0MTQ1OTIyNSwzMjcwMzMyMDkpXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGQpe2Zvcih2YXIgZj10aGlzLl9oYXNoLndvcmRzLApGPWZbMF0sZT1mWzFdLG49ZlsyXSxyPWZbM10sRz1mWzRdLEg9Zls1XSxJPWZbNl0sZj1mWzddLHc9Ri5oaWdoLEo9Ri5sb3csWD1lLmhpZ2gsSz1lLmxvdyxZPW4uaGlnaCxMPW4ubG93LFo9ci5oaWdoLE09ci5sb3csJD1HLmhpZ2gsTj1HLmxvdyxhYT1ILmhpZ2gsTz1ILmxvdyxiYT1JLmhpZ2gsUD1JLmxvdyxjYT1mLmhpZ2gsUT1mLmxvdyxrPXcsZz1KLHo9WCx4PUssQT1ZLHk9TCxVPVosQj1NLGw9JCxoPU4sUj1hYSxDPU8sUz1iYSxEPVAsVj1jYSxFPVEsbT0wOzgwPm07bSsrKXt2YXIgcz12W21dO2lmKDE2Pm0pdmFyIGo9cy5oaWdoPWFbZCsyKm1dfDAsYj1zLmxvdz1hW2QrMiptKzFdfDA7ZWxzZXt2YXIgaj12W20tMTVdLGI9ai5oaWdoLHA9ai5sb3csaj0oYj4+PjF8cDw8MzEpXihiPj4+OHxwPDwyNCleYj4+PjcscD0ocD4+PjF8Yjw8MzEpXihwPj4+OHxiPDwyNCleKHA+Pj43fGI8PDI1KSx1PXZbbS0yXSxiPXUuaGlnaCxjPXUubG93LHU9KGI+Pj4xOXxjPDwxMyleKGI8PAozfGM+Pj4yOSleYj4+PjYsYz0oYz4+PjE5fGI8PDEzKV4oYzw8M3xiPj4+MjkpXihjPj4+NnxiPDwyNiksYj12W20tN10sVz1iLmhpZ2gsdD12W20tMTZdLHE9dC5oaWdoLHQ9dC5sb3csYj1wK2IubG93LGo9aitXKyhiPj4+MDxwPj4+MD8xOjApLGI9YitjLGo9ait1KyhiPj4+MDxjPj4+MD8xOjApLGI9Yit0LGo9aitxKyhiPj4+MDx0Pj4+MD8xOjApO3MuaGlnaD1qO3MubG93PWJ9dmFyIFc9bCZSXn5sJlMsdD1oJkNefmgmRCxzPWsmel5rJkFeeiZBLFQ9ZyZ4XmcmeV54JnkscD0oaz4+PjI4fGc8PDQpXihrPDwzMHxnPj4+MileKGs8PDI1fGc+Pj43KSx1PShnPj4+Mjh8azw8NCleKGc8PDMwfGs+Pj4yKV4oZzw8MjV8az4+PjcpLGM9ZWFbbV0sZmE9Yy5oaWdoLGRhPWMubG93LGM9RSsoKGg+Pj4xNHxsPDwxOCleKGg+Pj4xOHxsPDwxNCleKGg8PDIzfGw+Pj45KSkscT1WKygobD4+PjE0fGg8PDE4KV4obD4+PjE4fGg8PDE0KV4obDw8MjN8aD4+PjkpKSsoYz4+PjA8RT4+PjA/MToKMCksYz1jK3QscT1xK1crKGM+Pj4wPHQ+Pj4wPzE6MCksYz1jK2RhLHE9cStmYSsoYz4+PjA8ZGE+Pj4wPzE6MCksYz1jK2IscT1xK2orKGM+Pj4wPGI+Pj4wPzE6MCksYj11K1Qscz1wK3MrKGI+Pj4wPHU+Pj4wPzE6MCksVj1TLEU9RCxTPVIsRD1DLFI9bCxDPWgsaD1CK2N8MCxsPVUrcSsoaD4+PjA8Qj4+PjA/MTowKXwwLFU9QSxCPXksQT16LHk9eCx6PWsseD1nLGc9YytifDAsaz1xK3MrKGc+Pj4wPGM+Pj4wPzE6MCl8MH1KPUYubG93PUorZztGLmhpZ2g9dytrKyhKPj4+MDxnPj4+MD8xOjApO0s9ZS5sb3c9Syt4O2UuaGlnaD1YK3orKEs+Pj4wPHg+Pj4wPzE6MCk7TD1uLmxvdz1MK3k7bi5oaWdoPVkrQSsoTD4+PjA8eT4+PjA/MTowKTtNPXIubG93PU0rQjtyLmhpZ2g9WitVKyhNPj4+MDxCPj4+MD8xOjApO049Ry5sb3c9TitoO0cuaGlnaD0kK2wrKE4+Pj4wPGg+Pj4wPzE6MCk7Tz1ILmxvdz1PK0M7SC5oaWdoPWFhK1IrKE8+Pj4wPEM+Pj4wPzE6MCk7UD1JLmxvdz1QK0Q7CkkuaGlnaD1iYStTKyhQPj4+MDxEPj4+MD8xOjApO1E9Zi5sb3c9UStFO2YuaGlnaD1jYStWKyhRPj4+MDxFPj4+MD8xOjApfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZD1hLndvcmRzLGY9OCp0aGlzLl9uRGF0YUJ5dGVzLGU9OCphLnNpZ0J5dGVzO2RbZT4+PjVdfD0xMjg8PDI0LWUlMzI7ZFsoZSsxMjg+Pj4xMDw8NSkrMzBdPU1hdGguZmxvb3IoZi80Mjk0OTY3Mjk2KTtkWyhlKzEyOD4+PjEwPDw1KSszMV09ZjthLnNpZ0J5dGVzPTQqZC5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNoLnRvWDMyKCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ci5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfSxibG9ja1NpemU6MzJ9KTtuLlNIQTUxMj1yLl9jcmVhdGVIZWxwZXIoZSk7bi5IbWFjU0hBNTEyPXIuX2NyZWF0ZUhtYWNIZWxwZXIoZSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTM4NC1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbigpe3ZhciBjPUNyeXB0b0pTLGE9Yy54NjQsYj1hLldvcmQsZT1hLldvcmRBcnJheSxhPWMuYWxnbyxkPWEuU0hBNTEyLGE9YS5TSEEzODQ9ZC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgZS5pbml0KFtuZXcgYi5pbml0KDM0MTgwNzAzNjUsMzIzODM3MTAzMiksbmV3IGIuaW5pdCgxNjU0MjcwMjUwLDkxNDE1MDY2MyksbmV3IGIuaW5pdCgyNDM4NTI5MzcwLDgxMjcwMjk5OSksbmV3IGIuaW5pdCgzNTU0NjIzNjAsNDE0NDkxMjY5NyksbmV3IGIuaW5pdCgxNzMxNDA1NDE1LDQyOTA3NzU4NTcpLG5ldyBiLmluaXQoMjM5NDE4MDIzMSwxNzUwNjAzMDI1KSxuZXcgYi5pbml0KDM2NzUwMDg1MjUsMTY5NDA3NjgzOSksbmV3IGIuaW5pdCgxMjAzMDYyODEzLDMyMDQwNzU0MjgpXSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9ZC5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTE2O3JldHVybiBhfX0pO2MuU0hBMzg0PQpkLl9jcmVhdGVIZWxwZXIoYSk7Yy5IbWFjU0hBMzg0PWQuX2NyZWF0ZUhtYWNIZWxwZXIoYSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHJpcGVtZDE2MC1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCi8qCgooYykgMjAxMiBieSBDZWRyaWMgTWVzbmlsLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OgoKICAgIC0gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLgogICAgLSBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgpUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTICJBUyBJUyIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoqLwooZnVuY3Rpb24oKXt2YXIgcT1DcnlwdG9KUyxkPXEubGliLG49ZC5Xb3JkQXJyYXkscD1kLkhhc2hlcixkPXEuYWxnbyx4PW4uY3JlYXRlKFswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDcsNCwxMywxLDEwLDYsMTUsMywxMiwwLDksNSwyLDE0LDExLDgsMywxMCwxNCw0LDksMTUsOCwxLDIsNywwLDYsMTMsMTEsNSwxMiwxLDksMTEsMTAsMCw4LDEyLDQsMTMsMyw3LDE1LDE0LDUsNiwyLDQsMCw1LDksNywxMiwyLDEwLDE0LDEsMyw4LDExLDYsMTUsMTNdKSx5PW4uY3JlYXRlKFs1LDE0LDcsMCw5LDIsMTEsNCwxMyw2LDE1LDgsMSwxMCwzLDEyLDYsMTEsMyw3LDAsMTMsNSwxMCwxNCwxNSw4LDEyLDQsOSwxLDIsMTUsNSwxLDMsNywxNCw2LDksMTEsOCwxMiwyLDEwLDAsNCwxMyw4LDYsNCwxLDMsMTEsMTUsMCw1LDEyLDIsMTMsOSw3LDEwLDE0LDEyLDE1LDEwLDQsMSw1LDgsNyw2LDIsMTMsMTQsMCwzLDksMTFdKSx6PW4uY3JlYXRlKFsxMSwxNCwxNSwxMiwKNSw4LDcsOSwxMSwxMywxNCwxNSw2LDcsOSw4LDcsNiw4LDEzLDExLDksNywxNSw3LDEyLDE1LDksMTEsNywxMywxMiwxMSwxMyw2LDcsMTQsOSwxMywxNSwxNCw4LDEzLDYsNSwxMiw3LDUsMTEsMTIsMTQsMTUsMTQsMTUsOSw4LDksMTQsNSw2LDgsNiw1LDEyLDksMTUsNSwxMSw2LDgsMTMsMTIsNSwxMiwxMywxNCwxMSw4LDUsNl0pLEE9bi5jcmVhdGUoWzgsOSw5LDExLDEzLDE1LDE1LDUsNyw3LDgsMTEsMTQsMTQsMTIsNiw5LDEzLDE1LDcsMTIsOCw5LDExLDcsNywxMiw3LDYsMTUsMTMsMTEsOSw3LDE1LDExLDgsNiw2LDE0LDEyLDEzLDUsMTQsMTMsMTMsNyw1LDE1LDUsOCwxMSwxNCwxNCw2LDE0LDYsOSwxMiw5LDEyLDUsMTUsOCw4LDUsMTIsOSwxMiw1LDE0LDYsOCwxMyw2LDUsMTUsMTMsMTEsMTFdKSxCPW4uY3JlYXRlKFswLDE1MTg1MDAyNDksMTg1OTc3NTM5MywyNDAwOTU5NzA4LDI4NDA4NTM4MzhdKSxDPW4uY3JlYXRlKFsxMzUyODI5OTI2LDE1NDg2MDM2ODQsMTgzNjA3MjY5MSwKMjA1Mzk5NDIxNywwXSksZD1kLlJJUEVNRDE2MD1wLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW4uY3JlYXRlKFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZSx2KXtmb3IodmFyIGI9MDsxNj5iO2IrKyl7dmFyIGM9ditiLGY9ZVtjXTtlW2NdPShmPDw4fGY+Pj4yNCkmMTY3MTE5MzV8KGY8PDI0fGY+Pj44KSY0Mjc4MjU1MzYwfXZhciBjPXRoaXMuX2hhc2gud29yZHMsZj1CLndvcmRzLGQ9Qy53b3JkcyxuPXgud29yZHMscT15LndvcmRzLHA9ei53b3Jkcyx3PUEud29yZHMsdCxnLGgsaixyLHUsayxsLG0sczt1PXQ9Y1swXTtrPWc9Y1sxXTtsPWg9Y1syXTttPWo9Y1szXTtzPXI9Y1s0XTtmb3IodmFyIGEsYj0wOzgwPmI7Yis9MSlhPXQrZVt2K25bYl1dfDAsYT0xNj5iP2ErKChnXmheaikrZlswXSk6MzI+Yj9hKygoZyZofH5nJmopK2ZbMV0pOjQ4PmI/CmErKCgoZ3x+aCleaikrZlsyXSk6NjQ+Yj9hKygoZyZqfGgmfmopK2ZbM10pOmErKChnXihofH5qKSkrZls0XSksYXw9MCxhPWE8PHBbYl18YT4+PjMyLXBbYl0sYT1hK3J8MCx0PXIscj1qLGo9aDw8MTB8aD4+PjIyLGg9ZyxnPWEsYT11K2VbditxW2JdXXwwLGE9MTY+Yj9hKygoa14obHx+bSkpK2RbMF0pOjMyPmI/YSsoKGsmbXxsJn5tKStkWzFdKTo0OD5iP2ErKCgoa3x+bClebSkrZFsyXSk6NjQ+Yj9hKygoayZsfH5rJm0pK2RbM10pOmErKChrXmxebSkrZFs0XSksYXw9MCxhPWE8PHdbYl18YT4+PjMyLXdbYl0sYT1hK3N8MCx1PXMscz1tLG09bDw8MTB8bD4+PjIyLGw9ayxrPWE7YT1jWzFdK2grbXwwO2NbMV09Y1syXStqK3N8MDtjWzJdPWNbM10rcit1fDA7Y1szXT1jWzRdK3Qra3wwO2NbNF09Y1swXStnK2x8MDtjWzBdPWF9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSxkPWUud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsYz04KmUuc2lnQnl0ZXM7CmRbYz4+PjVdfD0xMjg8PDI0LWMlMzI7ZFsoYys2ND4+Pjk8PDQpKzE0XT0oYjw8OHxiPj4+MjQpJjE2NzExOTM1fChiPDwyNHxiPj4+OCkmNDI3ODI1NTM2MDtlLnNpZ0J5dGVzPTQqKGQubGVuZ3RoKzEpO3RoaXMuX3Byb2Nlc3MoKTtlPXRoaXMuX2hhc2g7ZD1lLndvcmRzO2ZvcihiPTA7NT5iO2IrKyljPWRbYl0sZFtiXT0oYzw8OHxjPj4+MjQpJjE2NzExOTM1fChjPDwyNHxjPj4+OCkmNDI3ODI1NTM2MDtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZD1wLmNsb25lLmNhbGwodGhpcyk7ZC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGR9fSk7cS5SSVBFTUQxNjA9cC5fY3JlYXRlSGVscGVyKGQpO3EuSG1hY1JJUEVNRDE2MD1wLl9jcmVhdGVIbWFjSGVscGVyKGQpfSkoTWF0aCk7CgovKgpDcnlwdG9KUyB2My4xLjIgaG1hYy1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbigpe3ZhciBjPUNyeXB0b0pTLGs9Yy5lbmMuVXRmODtjLmFsZ28uSE1BQz1jLmxpYi5CYXNlLmV4dGVuZCh7aW5pdDpmdW5jdGlvbihhLGIpe2E9dGhpcy5faGFzaGVyPW5ldyBhLmluaXQ7InN0cmluZyI9PXR5cGVvZiBiJiYoYj1rLnBhcnNlKGIpKTt2YXIgYz1hLmJsb2NrU2l6ZSxlPTQqYztiLnNpZ0J5dGVzPmUmJihiPWEuZmluYWxpemUoYikpO2IuY2xhbXAoKTtmb3IodmFyIGY9dGhpcy5fb0tleT1iLmNsb25lKCksZz10aGlzLl9pS2V5PWIuY2xvbmUoKSxoPWYud29yZHMsaj1nLndvcmRzLGQ9MDtkPGM7ZCsrKWhbZF1ePTE1NDk1NTY4MjgsaltkXV49OTA5NTIyNDg2O2Yuc2lnQnl0ZXM9Zy5zaWdCeXRlcz1lO3RoaXMucmVzZXQoKX0scmVzZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9oYXNoZXI7YS5yZXNldCgpO2EudXBkYXRlKHRoaXMuX2lLZXkpfSx1cGRhdGU6ZnVuY3Rpb24oYSl7dGhpcy5faGFzaGVyLnVwZGF0ZShhKTtyZXR1cm4gdGhpc30sZmluYWxpemU6ZnVuY3Rpb24oYSl7dmFyIGI9CnRoaXMuX2hhc2hlcjthPWIuZmluYWxpemUoYSk7Yi5yZXNldCgpO3JldHVybiBiLmZpbmFsaXplKHRoaXMuX29LZXkuY2xvbmUoKS5jb25jYXQoYSkpfX0pfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBwYmtkZjItbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgYj1DcnlwdG9KUyxhPWIubGliLGQ9YS5CYXNlLG09YS5Xb3JkQXJyYXksYT1iLmFsZ28scT1hLkhNQUMsbD1hLlBCS0RGMj1kLmV4dGVuZCh7Y2ZnOmQuZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOmEuU0hBMSxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChhKX0sY29tcHV0ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLmNmZyxmPXEuY3JlYXRlKGMuaGFzaGVyLGEpLGc9bS5jcmVhdGUoKSxkPW0uY3JlYXRlKFsxXSksbD1nLndvcmRzLHI9ZC53b3JkcyxuPWMua2V5U2l6ZSxjPWMuaXRlcmF0aW9ucztsLmxlbmd0aDxuOyl7dmFyIGg9Zi51cGRhdGUoYikuZmluYWxpemUoZCk7Zi5yZXNldCgpO2Zvcih2YXIgaj1oLndvcmRzLHM9ai5sZW5ndGgsaz1oLHA9MTtwPGM7cCsrKXtrPWYuZmluYWxpemUoayk7Zi5yZXNldCgpO2Zvcih2YXIgdD1rLndvcmRzLGU9MDtlPHM7ZSsrKWpbZV1ePXRbZV19Zy5jb25jYXQoaCk7CnJbMF0rK31nLnNpZ0J5dGVzPTQqbjtyZXR1cm4gZ319KTtiLlBCS0RGMj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGwuY3JlYXRlKGMpLmNvbXB1dGUoYSxiKX19KSgpOwoKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwp2YXIgYjY0bWFwPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIjt2YXIgYjY0cGFkPSI9IjtmdW5jdGlvbiBoZXgyYjY0KGQpe3ZhciBiO3ZhciBlO3ZhciBhPSIiO2ZvcihiPTA7YiszPD1kLmxlbmd0aDtiKz0zKXtlPXBhcnNlSW50KGQuc3Vic3RyaW5nKGIsYiszKSwxNik7YSs9YjY0bWFwLmNoYXJBdChlPj42KStiNjRtYXAuY2hhckF0KGUmNjMpfWlmKGIrMT09ZC5sZW5ndGgpe2U9cGFyc2VJbnQoZC5zdWJzdHJpbmcoYixiKzEpLDE2KTthKz1iNjRtYXAuY2hhckF0KGU8PDIpfWVsc2V7aWYoYisyPT1kLmxlbmd0aCl7ZT1wYXJzZUludChkLnN1YnN0cmluZyhiLGIrMiksMTYpO2ErPWI2NG1hcC5jaGFyQXQoZT4+MikrYjY0bWFwLmNoYXJBdCgoZSYzKTw8NCl9fWlmKGI2NHBhZCl7d2hpbGUoKGEubGVuZ3RoJjMpPjApe2ErPWI2NHBhZH19cmV0dXJuIGF9ZnVuY3Rpb24gYjY0dG9oZXgoZil7dmFyIGQ9IiI7dmFyIGU7dmFyIGI9MDt2YXIgYzt2YXIgYTtmb3IoZT0wO2U8Zi5sZW5ndGg7KytlKXtpZihmLmNoYXJBdChlKT09YjY0cGFkKXticmVha31hPWI2NG1hcC5pbmRleE9mKGYuY2hhckF0KGUpKTtpZihhPDApe2NvbnRpbnVlfWlmKGI9PTApe2QrPWludDJjaGFyKGE+PjIpO2M9YSYzO2I9MX1lbHNle2lmKGI9PTEpe2QrPWludDJjaGFyKChjPDwyKXwoYT4+NCkpO2M9YSYxNTtiPTJ9ZWxzZXtpZihiPT0yKXtkKz1pbnQyY2hhcihjKTtkKz1pbnQyY2hhcihhPj4yKTtjPWEmMztiPTN9ZWxzZXtkKz1pbnQyY2hhcigoYzw8Mil8KGE+PjQpKTtkKz1pbnQyY2hhcihhJjE1KTtiPTB9fX19aWYoYj09MSl7ZCs9aW50MmNoYXIoYzw8Mil9cmV0dXJuIGR9ZnVuY3Rpb24gYjY0dG9CQShlKXt2YXIgZD1iNjR0b2hleChlKTt2YXIgYzt2YXIgYj1uZXcgQXJyYXkoKTtmb3IoYz0wOzIqYzxkLmxlbmd0aDsrK2Mpe2JbY109cGFyc2VJbnQoZC5zdWJzdHJpbmcoMipjLDIqYysyKSwxNil9cmV0dXJuIGJ9OwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCnZhciBkYml0czt2YXIgY2FuYXJ5PTI0NDgzNzgxNDA5NDU5MDt2YXIgal9sbT0oKGNhbmFyeSYxNjc3NzIxNSk9PTE1NzE1MDcwKTtmdW5jdGlvbiBCaWdJbnRlZ2VyKGUsZCxmKXtpZihlIT1udWxsKXtpZigibnVtYmVyIj09dHlwZW9mIGUpe3RoaXMuZnJvbU51bWJlcihlLGQsZil9ZWxzZXtpZihkPT1udWxsJiYic3RyaW5nIiE9dHlwZW9mIGUpe3RoaXMuZnJvbVN0cmluZyhlLDI1Nil9ZWxzZXt0aGlzLmZyb21TdHJpbmcoZSxkKX19fX1mdW5jdGlvbiBuYmkoKXtyZXR1cm4gbmV3IEJpZ0ludGVnZXIobnVsbCl9ZnVuY3Rpb24gYW0xKGYsYSxiLGUsaCxnKXt3aGlsZSgtLWc+PTApe3ZhciBkPWEqdGhpc1tmKytdK2JbZV0raDtoPU1hdGguZmxvb3IoZC82NzEwODg2NCk7YltlKytdPWQmNjcxMDg4NjN9cmV0dXJuIGh9ZnVuY3Rpb24gYW0yKGYscSxyLGUsbyxhKXt2YXIgaz1xJjMyNzY3LHA9cT4+MTU7d2hpbGUoLS1hPj0wKXt2YXIgZD10aGlzW2ZdJjMyNzY3O3ZhciBnPXRoaXNbZisrXT4+MTU7dmFyIGI9cCpkK2cqaztkPWsqZCsoKGImMzI3NjcpPDwxNSkrcltlXSsobyYxMDczNzQxODIzKTtvPShkPj4+MzApKyhiPj4+MTUpK3AqZysobz4+PjMwKTtyW2UrK109ZCYxMDczNzQxODIzfXJldHVybiBvfWZ1bmN0aW9uIGFtMyhmLHEscixlLG8sYSl7dmFyIGs9cSYxNjM4MyxwPXE+PjE0O3doaWxlKC0tYT49MCl7dmFyIGQ9dGhpc1tmXSYxNjM4Mzt2YXIgZz10aGlzW2YrK10+PjE0O3ZhciBiPXAqZCtnKms7ZD1rKmQrKChiJjE2MzgzKTw8MTQpK3JbZV0rbztvPShkPj4yOCkrKGI+PjE0KStwKmc7cltlKytdPWQmMjY4NDM1NDU1fXJldHVybiBvfWlmKGpfbG0mJihuYXZpZ2F0b3IuYXBwTmFtZT09Ik1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlciIpKXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTI7ZGJpdHM9MzB9ZWxzZXtpZihqX2xtJiYobmF2aWdhdG9yLmFwcE5hbWUhPSJOZXRzY2FwZSIpKXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTE7ZGJpdHM9MjZ9ZWxzZXtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbT1hbTM7ZGJpdHM9Mjh9fUJpZ0ludGVnZXIucHJvdG90eXBlLkRCPWRiaXRzO0JpZ0ludGVnZXIucHJvdG90eXBlLkRNPSgoMTw8ZGJpdHMpLTEpO0JpZ0ludGVnZXIucHJvdG90eXBlLkRWPSgxPDxkYml0cyk7dmFyIEJJX0ZQPTUyO0JpZ0ludGVnZXIucHJvdG90eXBlLkZWPU1hdGgucG93KDIsQklfRlApO0JpZ0ludGVnZXIucHJvdG90eXBlLkYxPUJJX0ZQLWRiaXRzO0JpZ0ludGVnZXIucHJvdG90eXBlLkYyPTIqZGJpdHMtQklfRlA7dmFyIEJJX1JNPSIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiO3ZhciBCSV9SQz1uZXcgQXJyYXkoKTt2YXIgcnIsdnY7cnI9IjAiLmNoYXJDb2RlQXQoMCk7Zm9yKHZ2PTA7dnY8PTk7Kyt2dil7QklfUkNbcnIrK109dnZ9cnI9ImEiLmNoYXJDb2RlQXQoMCk7Zm9yKHZ2PTEwO3Z2PDM2OysrdnYpe0JJX1JDW3JyKytdPXZ2fXJyPSJBIi5jaGFyQ29kZUF0KDApO2Zvcih2dj0xMDt2djwzNjsrK3Z2KXtCSV9SQ1tycisrXT12dn1mdW5jdGlvbiBpbnQyY2hhcihhKXtyZXR1cm4gQklfUk0uY2hhckF0KGEpfWZ1bmN0aW9uIGludEF0KGIsYSl7dmFyIGQ9QklfUkNbYi5jaGFyQ29kZUF0KGEpXTtyZXR1cm4oZD09bnVsbCk/LTE6ZH1mdW5jdGlvbiBibnBDb3B5VG8oYil7Zm9yKHZhciBhPXRoaXMudC0xO2E+PTA7LS1hKXtiW2FdPXRoaXNbYV19Yi50PXRoaXMudDtiLnM9dGhpcy5zfWZ1bmN0aW9uIGJucEZyb21JbnQoYSl7dGhpcy50PTE7dGhpcy5zPShhPDApPy0xOjA7aWYoYT4wKXt0aGlzWzBdPWF9ZWxzZXtpZihhPC0xKXt0aGlzWzBdPWErdGhpcy5EVn1lbHNle3RoaXMudD0wfX19ZnVuY3Rpb24gbmJ2KGEpe3ZhciBiPW5iaSgpO2IuZnJvbUludChhKTtyZXR1cm4gYn1mdW5jdGlvbiBibnBGcm9tU3RyaW5nKGgsYyl7dmFyIGU7aWYoYz09MTYpe2U9NH1lbHNle2lmKGM9PTgpe2U9M31lbHNle2lmKGM9PTI1Nil7ZT04fWVsc2V7aWYoYz09Mil7ZT0xfWVsc2V7aWYoYz09MzIpe2U9NX1lbHNle2lmKGM9PTQpe2U9Mn1lbHNle3RoaXMuZnJvbVJhZGl4KGgsYyk7cmV0dXJufX19fX19dGhpcy50PTA7dGhpcy5zPTA7dmFyIGc9aC5sZW5ndGgsZD1mYWxzZSxmPTA7d2hpbGUoLS1nPj0wKXt2YXIgYT0oZT09OCk/aFtnXSYyNTU6aW50QXQoaCxnKTtpZihhPDApe2lmKGguY2hhckF0KGcpPT0iLSIpe2Q9dHJ1ZX1jb250aW51ZX1kPWZhbHNlO2lmKGY9PTApe3RoaXNbdGhpcy50KytdPWF9ZWxzZXtpZihmK2U+dGhpcy5EQil7dGhpc1t0aGlzLnQtMV18PShhJigoMTw8KHRoaXMuREItZikpLTEpKTw8Zjt0aGlzW3RoaXMudCsrXT0oYT4+KHRoaXMuREItZikpfWVsc2V7dGhpc1t0aGlzLnQtMV18PWE8PGZ9fWYrPWU7aWYoZj49dGhpcy5EQil7Zi09dGhpcy5EQn19aWYoZT09OCYmKGhbMF0mMTI4KSE9MCl7dGhpcy5zPS0xO2lmKGY+MCl7dGhpc1t0aGlzLnQtMV18PSgoMTw8KHRoaXMuREItZikpLTEpPDxmfX10aGlzLmNsYW1wKCk7aWYoZCl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9fWZ1bmN0aW9uIGJucENsYW1wKCl7dmFyIGE9dGhpcy5zJnRoaXMuRE07d2hpbGUodGhpcy50PjAmJnRoaXNbdGhpcy50LTFdPT1hKXstLXRoaXMudH19ZnVuY3Rpb24gYm5Ub1N0cmluZyhjKXtpZih0aGlzLnM8MCl7cmV0dXJuIi0iK3RoaXMubmVnYXRlKCkudG9TdHJpbmcoYyl9dmFyIGU7aWYoYz09MTYpe2U9NH1lbHNle2lmKGM9PTgpe2U9M31lbHNle2lmKGM9PTIpe2U9MX1lbHNle2lmKGM9PTMyKXtlPTV9ZWxzZXtpZihjPT00KXtlPTJ9ZWxzZXtyZXR1cm4gdGhpcy50b1JhZGl4KGMpfX19fX12YXIgZz0oMTw8ZSktMSxsLGE9ZmFsc2UsaD0iIixmPXRoaXMudDt2YXIgaj10aGlzLkRCLShmKnRoaXMuREIpJWU7aWYoZi0tPjApe2lmKGo8dGhpcy5EQiYmKGw9dGhpc1tmXT4+aik+MCl7YT10cnVlO2g9aW50MmNoYXIobCl9d2hpbGUoZj49MCl7aWYoajxlKXtsPSh0aGlzW2ZdJigoMTw8aiktMSkpPDwoZS1qKTtsfD10aGlzWy0tZl0+PihqKz10aGlzLkRCLWUpfWVsc2V7bD0odGhpc1tmXT4+KGotPWUpKSZnO2lmKGo8PTApe2orPXRoaXMuREI7LS1mfX1pZihsPjApe2E9dHJ1ZX1pZihhKXtoKz1pbnQyY2hhcihsKX19fXJldHVybiBhP2g6IjAifWZ1bmN0aW9uIGJuTmVnYXRlKCl7dmFyIGE9bmJpKCk7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsYSk7cmV0dXJuIGF9ZnVuY3Rpb24gYm5BYnMoKXtyZXR1cm4odGhpcy5zPDApP3RoaXMubmVnYXRlKCk6dGhpc31mdW5jdGlvbiBibkNvbXBhcmVUbyhiKXt2YXIgZD10aGlzLnMtYi5zO2lmKGQhPTApe3JldHVybiBkfXZhciBjPXRoaXMudDtkPWMtYi50O2lmKGQhPTApe3JldHVybih0aGlzLnM8MCk/LWQ6ZH13aGlsZSgtLWM+PTApe2lmKChkPXRoaXNbY10tYltjXSkhPTApe3JldHVybiBkfX1yZXR1cm4gMH1mdW5jdGlvbiBuYml0cyhhKXt2YXIgYz0xLGI7aWYoKGI9YT4+PjE2KSE9MCl7YT1iO2MrPTE2fWlmKChiPWE+PjgpIT0wKXthPWI7Yys9OH1pZigoYj1hPj40KSE9MCl7YT1iO2MrPTR9aWYoKGI9YT4+MikhPTApe2E9YjtjKz0yfWlmKChiPWE+PjEpIT0wKXthPWI7Yys9MX1yZXR1cm4gY31mdW5jdGlvbiBibkJpdExlbmd0aCgpe2lmKHRoaXMudDw9MCl7cmV0dXJuIDB9cmV0dXJuIHRoaXMuREIqKHRoaXMudC0xKStuYml0cyh0aGlzW3RoaXMudC0xXV4odGhpcy5zJnRoaXMuRE0pKX1mdW5jdGlvbiBibnBETFNoaWZ0VG8oYyxiKXt2YXIgYTtmb3IoYT10aGlzLnQtMTthPj0wOy0tYSl7YlthK2NdPXRoaXNbYV19Zm9yKGE9Yy0xO2E+PTA7LS1hKXtiW2FdPTB9Yi50PXRoaXMudCtjO2Iucz10aGlzLnN9ZnVuY3Rpb24gYm5wRFJTaGlmdFRvKGMsYil7Zm9yKHZhciBhPWM7YTx0aGlzLnQ7KythKXtiW2EtY109dGhpc1thXX1iLnQ9TWF0aC5tYXgodGhpcy50LWMsMCk7Yi5zPXRoaXMuc31mdW5jdGlvbiBibnBMU2hpZnRUbyhqLGUpe3ZhciBiPWoldGhpcy5EQjt2YXIgYT10aGlzLkRCLWI7dmFyIGc9KDE8PGEpLTE7dmFyIGY9TWF0aC5mbG9vcihqL3RoaXMuREIpLGg9KHRoaXMuczw8YikmdGhpcy5ETSxkO2ZvcihkPXRoaXMudC0xO2Q+PTA7LS1kKXtlW2QrZisxXT0odGhpc1tkXT4+YSl8aDtoPSh0aGlzW2RdJmcpPDxifWZvcihkPWYtMTtkPj0wOy0tZCl7ZVtkXT0wfWVbZl09aDtlLnQ9dGhpcy50K2YrMTtlLnM9dGhpcy5zO2UuY2xhbXAoKX1mdW5jdGlvbiBibnBSU2hpZnRUbyhnLGQpe2Qucz10aGlzLnM7dmFyIGU9TWF0aC5mbG9vcihnL3RoaXMuREIpO2lmKGU+PXRoaXMudCl7ZC50PTA7cmV0dXJufXZhciBiPWcldGhpcy5EQjt2YXIgYT10aGlzLkRCLWI7dmFyIGY9KDE8PGIpLTE7ZFswXT10aGlzW2VdPj5iO2Zvcih2YXIgYz1lKzE7Yzx0aGlzLnQ7KytjKXtkW2MtZS0xXXw9KHRoaXNbY10mZik8PGE7ZFtjLWVdPXRoaXNbY10+PmJ9aWYoYj4wKXtkW3RoaXMudC1lLTFdfD0odGhpcy5zJmYpPDxhfWQudD10aGlzLnQtZTtkLmNsYW1wKCl9ZnVuY3Rpb24gYm5wU3ViVG8oZCxmKXt2YXIgZT0wLGc9MCxiPU1hdGgubWluKGQudCx0aGlzLnQpO3doaWxlKGU8Yil7Zys9dGhpc1tlXS1kW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9aWYoZC50PHRoaXMudCl7Zy09ZC5zO3doaWxlKGU8dGhpcy50KXtnKz10aGlzW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9Zys9dGhpcy5zfWVsc2V7Zys9dGhpcy5zO3doaWxlKGU8ZC50KXtnLT1kW2VdO2ZbZSsrXT1nJnRoaXMuRE07Zz4+PXRoaXMuREJ9Zy09ZC5zfWYucz0oZzwwKT8tMTowO2lmKGc8LTEpe2ZbZSsrXT10aGlzLkRWK2d9ZWxzZXtpZihnPjApe2ZbZSsrXT1nfX1mLnQ9ZTtmLmNsYW1wKCl9ZnVuY3Rpb24gYm5wTXVsdGlwbHlUbyhjLGUpe3ZhciBiPXRoaXMuYWJzKCksZj1jLmFicygpO3ZhciBkPWIudDtlLnQ9ZCtmLnQ7d2hpbGUoLS1kPj0wKXtlW2RdPTB9Zm9yKGQ9MDtkPGYudDsrK2Qpe2VbZCtiLnRdPWIuYW0oMCxmW2RdLGUsZCwwLGIudCl9ZS5zPTA7ZS5jbGFtcCgpO2lmKHRoaXMucyE9Yy5zKXtCaWdJbnRlZ2VyLlpFUk8uc3ViVG8oZSxlKX19ZnVuY3Rpb24gYm5wU3F1YXJlVG8oZCl7dmFyIGE9dGhpcy5hYnMoKTt2YXIgYj1kLnQ9MiphLnQ7d2hpbGUoLS1iPj0wKXtkW2JdPTB9Zm9yKGI9MDtiPGEudC0xOysrYil7dmFyIGU9YS5hbShiLGFbYl0sZCwyKmIsMCwxKTtpZigoZFtiK2EudF0rPWEuYW0oYisxLDIqYVtiXSxkLDIqYisxLGUsYS50LWItMSkpPj1hLkRWKXtkW2IrYS50XS09YS5EVjtkW2IrYS50KzFdPTF9fWlmKGQudD4wKXtkW2QudC0xXSs9YS5hbShiLGFbYl0sZCwyKmIsMCwxKX1kLnM9MDtkLmNsYW1wKCl9ZnVuY3Rpb24gYm5wRGl2UmVtVG8obixoLGcpe3ZhciB3PW4uYWJzKCk7aWYody50PD0wKXtyZXR1cm59dmFyIGs9dGhpcy5hYnMoKTtpZihrLnQ8dy50KXtpZihoIT1udWxsKXtoLmZyb21JbnQoMCl9aWYoZyE9bnVsbCl7dGhpcy5jb3B5VG8oZyl9cmV0dXJufWlmKGc9PW51bGwpe2c9bmJpKCl9dmFyIGQ9bmJpKCksYT10aGlzLnMsbD1uLnM7dmFyIHY9dGhpcy5EQi1uYml0cyh3W3cudC0xXSk7aWYodj4wKXt3LmxTaGlmdFRvKHYsZCk7ay5sU2hpZnRUbyh2LGcpfWVsc2V7dy5jb3B5VG8oZCk7ay5jb3B5VG8oZyl9dmFyIHA9ZC50O3ZhciBiPWRbcC0xXTtpZihiPT0wKXtyZXR1cm59dmFyIG89YiooMTw8dGhpcy5GMSkrKChwPjEpP2RbcC0yXT4+dGhpcy5GMjowKTt2YXIgQT10aGlzLkZWL28sej0oMTw8dGhpcy5GMSkvbyx4PTE8PHRoaXMuRjI7dmFyIHU9Zy50LHM9dS1wLGY9KGg9PW51bGwpP25iaSgpOmg7ZC5kbFNoaWZ0VG8ocyxmKTtpZihnLmNvbXBhcmVUbyhmKT49MCl7Z1tnLnQrK109MTtnLnN1YlRvKGYsZyl9QmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKHAsZik7Zi5zdWJUbyhkLGQpO3doaWxlKGQudDxwKXtkW2QudCsrXT0wfXdoaWxlKC0tcz49MCl7dmFyIGM9KGdbLS11XT09Yik/dGhpcy5ETTpNYXRoLmZsb29yKGdbdV0qQSsoZ1t1LTFdK3gpKnopO2lmKChnW3VdKz1kLmFtKDAsYyxnLHMsMCxwKSk8Yyl7ZC5kbFNoaWZ0VG8ocyxmKTtnLnN1YlRvKGYsZyk7d2hpbGUoZ1t1XTwtLWMpe2cuc3ViVG8oZixnKX19fWlmKGghPW51bGwpe2cuZHJTaGlmdFRvKHAsaCk7aWYoYSE9bCl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKGgsaCl9fWcudD1wO2cuY2xhbXAoKTtpZih2PjApe2cuclNoaWZ0VG8odixnKX1pZihhPDApe0JpZ0ludGVnZXIuWkVSTy5zdWJUbyhnLGcpfX1mdW5jdGlvbiBibk1vZChiKXt2YXIgYz1uYmkoKTt0aGlzLmFicygpLmRpdlJlbVRvKGIsbnVsbCxjKTtpZih0aGlzLnM8MCYmYy5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKT4wKXtiLnN1YlRvKGMsYyl9cmV0dXJuIGN9ZnVuY3Rpb24gQ2xhc3NpYyhhKXt0aGlzLm09YX1mdW5jdGlvbiBjQ29udmVydChhKXtpZihhLnM8MHx8YS5jb21wYXJlVG8odGhpcy5tKT49MCl7cmV0dXJuIGEubW9kKHRoaXMubSl9ZWxzZXtyZXR1cm4gYX19ZnVuY3Rpb24gY1JldmVydChhKXtyZXR1cm4gYX1mdW5jdGlvbiBjUmVkdWNlKGEpe2EuZGl2UmVtVG8odGhpcy5tLG51bGwsYSl9ZnVuY3Rpb24gY011bFRvKGEsYyxiKXthLm11bHRpcGx5VG8oYyxiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBjU3FyVG8oYSxiKXthLnNxdWFyZVRvKGIpO3RoaXMucmVkdWNlKGIpfUNsYXNzaWMucHJvdG90eXBlLmNvbnZlcnQ9Y0NvbnZlcnQ7Q2xhc3NpYy5wcm90b3R5cGUucmV2ZXJ0PWNSZXZlcnQ7Q2xhc3NpYy5wcm90b3R5cGUucmVkdWNlPWNSZWR1Y2U7Q2xhc3NpYy5wcm90b3R5cGUubXVsVG89Y011bFRvO0NsYXNzaWMucHJvdG90eXBlLnNxclRvPWNTcXJUbztmdW5jdGlvbiBibnBJbnZEaWdpdCgpe2lmKHRoaXMudDwxKXtyZXR1cm4gMH12YXIgYT10aGlzWzBdO2lmKChhJjEpPT0wKXtyZXR1cm4gMH12YXIgYj1hJjM7Yj0oYiooMi0oYSYxNSkqYikpJjE1O2I9KGIqKDItKGEmMjU1KSpiKSkmMjU1O2I9KGIqKDItKCgoYSY2NTUzNSkqYikmNjU1MzUpKSkmNjU1MzU7Yj0oYiooMi1hKmIldGhpcy5EVikpJXRoaXMuRFY7cmV0dXJuKGI+MCk/dGhpcy5EVi1iOi1ifWZ1bmN0aW9uIE1vbnRnb21lcnkoYSl7dGhpcy5tPWE7dGhpcy5tcD1hLmludkRpZ2l0KCk7dGhpcy5tcGw9dGhpcy5tcCYzMjc2Nzt0aGlzLm1waD10aGlzLm1wPj4xNTt0aGlzLnVtPSgxPDwoYS5EQi0xNSkpLTE7dGhpcy5tdDI9MiphLnR9ZnVuY3Rpb24gbW9udENvbnZlcnQoYSl7dmFyIGI9bmJpKCk7YS5hYnMoKS5kbFNoaWZ0VG8odGhpcy5tLnQsYik7Yi5kaXZSZW1Ubyh0aGlzLm0sbnVsbCxiKTtpZihhLnM8MCYmYi5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKT4wKXt0aGlzLm0uc3ViVG8oYixiKX1yZXR1cm4gYn1mdW5jdGlvbiBtb250UmV2ZXJ0KGEpe3ZhciBiPW5iaSgpO2EuY29weVRvKGIpO3RoaXMucmVkdWNlKGIpO3JldHVybiBifWZ1bmN0aW9uIG1vbnRSZWR1Y2UoYSl7d2hpbGUoYS50PD10aGlzLm10Mil7YVthLnQrK109MH1mb3IodmFyIGM9MDtjPHRoaXMubS50OysrYyl7dmFyIGI9YVtjXSYzMjc2Nzt2YXIgZD0oYip0aGlzLm1wbCsoKChiKnRoaXMubXBoKyhhW2NdPj4xNSkqdGhpcy5tcGwpJnRoaXMudW0pPDwxNSkpJmEuRE07Yj1jK3RoaXMubS50O2FbYl0rPXRoaXMubS5hbSgwLGQsYSxjLDAsdGhpcy5tLnQpO3doaWxlKGFbYl0+PWEuRFYpe2FbYl0tPWEuRFY7YVsrK2JdKyt9fWEuY2xhbXAoKTthLmRyU2hpZnRUbyh0aGlzLm0udCxhKTtpZihhLmNvbXBhcmVUbyh0aGlzLm0pPj0wKXthLnN1YlRvKHRoaXMubSxhKX19ZnVuY3Rpb24gbW9udFNxclRvKGEsYil7YS5zcXVhcmVUbyhiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBtb250TXVsVG8oYSxjLGIpe2EubXVsdGlwbHlUbyhjLGIpO3RoaXMucmVkdWNlKGIpfU1vbnRnb21lcnkucHJvdG90eXBlLmNvbnZlcnQ9bW9udENvbnZlcnQ7TW9udGdvbWVyeS5wcm90b3R5cGUucmV2ZXJ0PW1vbnRSZXZlcnQ7TW9udGdvbWVyeS5wcm90b3R5cGUucmVkdWNlPW1vbnRSZWR1Y2U7TW9udGdvbWVyeS5wcm90b3R5cGUubXVsVG89bW9udE11bFRvO01vbnRnb21lcnkucHJvdG90eXBlLnNxclRvPW1vbnRTcXJUbztmdW5jdGlvbiBibnBJc0V2ZW4oKXtyZXR1cm4oKHRoaXMudD4wKT8odGhpc1swXSYxKTp0aGlzLnMpPT0wfWZ1bmN0aW9uIGJucEV4cChoLGope2lmKGg+NDI5NDk2NzI5NXx8aDwxKXtyZXR1cm4gQmlnSW50ZWdlci5PTkV9dmFyIGY9bmJpKCksYT1uYmkoKSxkPWouY29udmVydCh0aGlzKSxjPW5iaXRzKGgpLTE7ZC5jb3B5VG8oZik7d2hpbGUoLS1jPj0wKXtqLnNxclRvKGYsYSk7aWYoKGgmKDE8PGMpKT4wKXtqLm11bFRvKGEsZCxmKX1lbHNle3ZhciBiPWY7Zj1hO2E9Yn19cmV0dXJuIGoucmV2ZXJ0KGYpfWZ1bmN0aW9uIGJuTW9kUG93SW50KGIsYSl7dmFyIGM7aWYoYjwyNTZ8fGEuaXNFdmVuKCkpe2M9bmV3IENsYXNzaWMoYSl9ZWxzZXtjPW5ldyBNb250Z29tZXJ5KGEpfXJldHVybiB0aGlzLmV4cChiLGMpfUJpZ0ludGVnZXIucHJvdG90eXBlLmNvcHlUbz1ibnBDb3B5VG87QmlnSW50ZWdlci5wcm90b3R5cGUuZnJvbUludD1ibnBGcm9tSW50O0JpZ0ludGVnZXIucHJvdG90eXBlLmZyb21TdHJpbmc9Ym5wRnJvbVN0cmluZztCaWdJbnRlZ2VyLnByb3RvdHlwZS5jbGFtcD1ibnBDbGFtcDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5kbFNoaWZ0VG89Ym5wRExTaGlmdFRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmRyU2hpZnRUbz1ibnBEUlNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUubFNoaWZ0VG89Ym5wTFNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUuclNoaWZ0VG89Ym5wUlNoaWZ0VG87QmlnSW50ZWdlci5wcm90b3R5cGUuc3ViVG89Ym5wU3ViVG87QmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHlUbz1ibnBNdWx0aXBseVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLnNxdWFyZVRvPWJucFNxdWFyZVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmRpdlJlbVRvPWJucERpdlJlbVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmludkRpZ2l0PWJucEludkRpZ2l0O0JpZ0ludGVnZXIucHJvdG90eXBlLmlzRXZlbj1ibnBJc0V2ZW47QmlnSW50ZWdlci5wcm90b3R5cGUuZXhwPWJucEV4cDtCaWdJbnRlZ2VyLnByb3RvdHlwZS50b1N0cmluZz1iblRvU3RyaW5nO0JpZ0ludGVnZXIucHJvdG90eXBlLm5lZ2F0ZT1ibk5lZ2F0ZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hYnM9Ym5BYnM7QmlnSW50ZWdlci5wcm90b3R5cGUuY29tcGFyZVRvPWJuQ29tcGFyZVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmJpdExlbmd0aD1ibkJpdExlbmd0aDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2Q9Ym5Nb2Q7QmlnSW50ZWdlci5wcm90b3R5cGUubW9kUG93SW50PWJuTW9kUG93SW50O0JpZ0ludGVnZXIuWkVSTz1uYnYoMCk7QmlnSW50ZWdlci5PTkU9bmJ2KDEpOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIGJuQ2xvbmUoKXt2YXIgYT1uYmkoKTt0aGlzLmNvcHlUbyhhKTtyZXR1cm4gYX1mdW5jdGlvbiBibkludFZhbHVlKCl7aWYodGhpcy5zPDApe2lmKHRoaXMudD09MSl7cmV0dXJuIHRoaXNbMF0tdGhpcy5EVn1lbHNle2lmKHRoaXMudD09MCl7cmV0dXJuIC0xfX19ZWxzZXtpZih0aGlzLnQ9PTEpe3JldHVybiB0aGlzWzBdfWVsc2V7aWYodGhpcy50PT0wKXtyZXR1cm4gMH19fXJldHVybigodGhpc1sxXSYoKDE8PCgzMi10aGlzLkRCKSktMSkpPDx0aGlzLkRCKXx0aGlzWzBdfWZ1bmN0aW9uIGJuQnl0ZVZhbHVlKCl7cmV0dXJuKHRoaXMudD09MCk/dGhpcy5zOih0aGlzWzBdPDwyNCk+PjI0fWZ1bmN0aW9uIGJuU2hvcnRWYWx1ZSgpe3JldHVybih0aGlzLnQ9PTApP3RoaXMuczoodGhpc1swXTw8MTYpPj4xNn1mdW5jdGlvbiBibnBDaHVua1NpemUoYSl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5MTjIqdGhpcy5EQi9NYXRoLmxvZyhhKSl9ZnVuY3Rpb24gYm5TaWdOdW0oKXtpZih0aGlzLnM8MCl7cmV0dXJuIC0xfWVsc2V7aWYodGhpcy50PD0wfHwodGhpcy50PT0xJiZ0aGlzWzBdPD0wKSl7cmV0dXJuIDB9ZWxzZXtyZXR1cm4gMX19fWZ1bmN0aW9uIGJucFRvUmFkaXgoYyl7aWYoYz09bnVsbCl7Yz0xMH1pZih0aGlzLnNpZ251bSgpPT0wfHxjPDJ8fGM+MzYpe3JldHVybiIwIn12YXIgZj10aGlzLmNodW5rU2l6ZShjKTt2YXIgZT1NYXRoLnBvdyhjLGYpO3ZhciBpPW5idihlKSxqPW5iaSgpLGg9bmJpKCksZz0iIjt0aGlzLmRpdlJlbVRvKGksaixoKTt3aGlsZShqLnNpZ251bSgpPjApe2c9KGUraC5pbnRWYWx1ZSgpKS50b1N0cmluZyhjKS5zdWJzdHIoMSkrZztqLmRpdlJlbVRvKGksaixoKX1yZXR1cm4gaC5pbnRWYWx1ZSgpLnRvU3RyaW5nKGMpK2d9ZnVuY3Rpb24gYm5wRnJvbVJhZGl4KG0saCl7dGhpcy5mcm9tSW50KDApO2lmKGg9PW51bGwpe2g9MTB9dmFyIGY9dGhpcy5jaHVua1NpemUoaCk7dmFyIGc9TWF0aC5wb3coaCxmKSxlPWZhbHNlLGE9MCxsPTA7Zm9yKHZhciBjPTA7YzxtLmxlbmd0aDsrK2Mpe3ZhciBrPWludEF0KG0sYyk7aWYoazwwKXtpZihtLmNoYXJBdChjKT09Ii0iJiZ0aGlzLnNpZ251bSgpPT0wKXtlPXRydWV9Y29udGludWV9bD1oKmwraztpZigrK2E+PWYpe3RoaXMuZE11bHRpcGx5KGcpO3RoaXMuZEFkZE9mZnNldChsLDApO2E9MDtsPTB9fWlmKGE+MCl7dGhpcy5kTXVsdGlwbHkoTWF0aC5wb3coaCxhKSk7dGhpcy5kQWRkT2Zmc2V0KGwsMCl9aWYoZSl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9fWZ1bmN0aW9uIGJucEZyb21OdW1iZXIoZixlLGgpe2lmKCJudW1iZXIiPT10eXBlb2YgZSl7aWYoZjwyKXt0aGlzLmZyb21JbnQoMSl9ZWxzZXt0aGlzLmZyb21OdW1iZXIoZixoKTtpZighdGhpcy50ZXN0Qml0KGYtMSkpe3RoaXMuYml0d2lzZVRvKEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChmLTEpLG9wX29yLHRoaXMpfWlmKHRoaXMuaXNFdmVuKCkpe3RoaXMuZEFkZE9mZnNldCgxLDApfXdoaWxlKCF0aGlzLmlzUHJvYmFibGVQcmltZShlKSl7dGhpcy5kQWRkT2Zmc2V0KDIsMCk7aWYodGhpcy5iaXRMZW5ndGgoKT5mKXt0aGlzLnN1YlRvKEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChmLTEpLHRoaXMpfX19fWVsc2V7dmFyIGQ9bmV3IEFycmF5KCksZz1mJjc7ZC5sZW5ndGg9KGY+PjMpKzE7ZS5uZXh0Qnl0ZXMoZCk7aWYoZz4wKXtkWzBdJj0oKDE8PGcpLTEpfWVsc2V7ZFswXT0wfXRoaXMuZnJvbVN0cmluZyhkLDI1Nil9fWZ1bmN0aW9uIGJuVG9CeXRlQXJyYXkoKXt2YXIgYj10aGlzLnQsYz1uZXcgQXJyYXkoKTtjWzBdPXRoaXMuczt2YXIgZT10aGlzLkRCLShiKnRoaXMuREIpJTgsZixhPTA7aWYoYi0tPjApe2lmKGU8dGhpcy5EQiYmKGY9dGhpc1tiXT4+ZSkhPSh0aGlzLnMmdGhpcy5ETSk+PmUpe2NbYSsrXT1mfCh0aGlzLnM8PCh0aGlzLkRCLWUpKX13aGlsZShiPj0wKXtpZihlPDgpe2Y9KHRoaXNbYl0mKCgxPDxlKS0xKSk8PCg4LWUpO2Z8PXRoaXNbLS1iXT4+KGUrPXRoaXMuREItOCl9ZWxzZXtmPSh0aGlzW2JdPj4oZS09OCkpJjI1NTtpZihlPD0wKXtlKz10aGlzLkRCOy0tYn19aWYoKGYmMTI4KSE9MCl7Znw9LTI1Nn1pZihhPT0wJiYodGhpcy5zJjEyOCkhPShmJjEyOCkpeysrYX1pZihhPjB8fGYhPXRoaXMucyl7Y1thKytdPWZ9fX1yZXR1cm4gY31mdW5jdGlvbiBibkVxdWFscyhiKXtyZXR1cm4odGhpcy5jb21wYXJlVG8oYik9PTApfWZ1bmN0aW9uIGJuTWluKGIpe3JldHVybih0aGlzLmNvbXBhcmVUbyhiKTwwKT90aGlzOmJ9ZnVuY3Rpb24gYm5NYXgoYil7cmV0dXJuKHRoaXMuY29tcGFyZVRvKGIpPjApP3RoaXM6Yn1mdW5jdGlvbiBibnBCaXR3aXNlVG8oYyxoLGUpe3ZhciBkLGcsYj1NYXRoLm1pbihjLnQsdGhpcy50KTtmb3IoZD0wO2Q8YjsrK2Qpe2VbZF09aCh0aGlzW2RdLGNbZF0pfWlmKGMudDx0aGlzLnQpe2c9Yy5zJnRoaXMuRE07Zm9yKGQ9YjtkPHRoaXMudDsrK2Qpe2VbZF09aCh0aGlzW2RdLGcpfWUudD10aGlzLnR9ZWxzZXtnPXRoaXMucyZ0aGlzLkRNO2ZvcihkPWI7ZDxjLnQ7KytkKXtlW2RdPWgoZyxjW2RdKX1lLnQ9Yy50fWUucz1oKHRoaXMucyxjLnMpO2UuY2xhbXAoKX1mdW5jdGlvbiBvcF9hbmQoYSxiKXtyZXR1cm4gYSZifWZ1bmN0aW9uIGJuQW5kKGIpe3ZhciBjPW5iaSgpO3RoaXMuYml0d2lzZVRvKGIsb3BfYW5kLGMpO3JldHVybiBjfWZ1bmN0aW9uIG9wX29yKGEsYil7cmV0dXJuIGF8Yn1mdW5jdGlvbiBibk9yKGIpe3ZhciBjPW5iaSgpO3RoaXMuYml0d2lzZVRvKGIsb3Bfb3IsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gb3BfeG9yKGEsYil7cmV0dXJuIGFeYn1mdW5jdGlvbiBiblhvcihiKXt2YXIgYz1uYmkoKTt0aGlzLmJpdHdpc2VUbyhiLG9wX3hvcixjKTtyZXR1cm4gY31mdW5jdGlvbiBvcF9hbmRub3QoYSxiKXtyZXR1cm4gYSZ+Yn1mdW5jdGlvbiBibkFuZE5vdChiKXt2YXIgYz1uYmkoKTt0aGlzLmJpdHdpc2VUbyhiLG9wX2FuZG5vdCxjKTtyZXR1cm4gY31mdW5jdGlvbiBibk5vdCgpe3ZhciBiPW5iaSgpO2Zvcih2YXIgYT0wO2E8dGhpcy50OysrYSl7YlthXT10aGlzLkRNJn50aGlzW2FdfWIudD10aGlzLnQ7Yi5zPX50aGlzLnM7cmV0dXJuIGJ9ZnVuY3Rpb24gYm5TaGlmdExlZnQoYil7dmFyIGE9bmJpKCk7aWYoYjwwKXt0aGlzLnJTaGlmdFRvKC1iLGEpfWVsc2V7dGhpcy5sU2hpZnRUbyhiLGEpfXJldHVybiBhfWZ1bmN0aW9uIGJuU2hpZnRSaWdodChiKXt2YXIgYT1uYmkoKTtpZihiPDApe3RoaXMubFNoaWZ0VG8oLWIsYSl9ZWxzZXt0aGlzLnJTaGlmdFRvKGIsYSl9cmV0dXJuIGF9ZnVuY3Rpb24gbGJpdChhKXtpZihhPT0wKXtyZXR1cm4gLTF9dmFyIGI9MDtpZigoYSY2NTUzNSk9PTApe2E+Pj0xNjtiKz0xNn1pZigoYSYyNTUpPT0wKXthPj49ODtiKz04fWlmKChhJjE1KT09MCl7YT4+PTQ7Yis9NH1pZigoYSYzKT09MCl7YT4+PTI7Yis9Mn1pZigoYSYxKT09MCl7KytifXJldHVybiBifWZ1bmN0aW9uIGJuR2V0TG93ZXN0U2V0Qml0KCl7Zm9yKHZhciBhPTA7YTx0aGlzLnQ7KythKXtpZih0aGlzW2FdIT0wKXtyZXR1cm4gYSp0aGlzLkRCK2xiaXQodGhpc1thXSl9fWlmKHRoaXMuczwwKXtyZXR1cm4gdGhpcy50KnRoaXMuREJ9cmV0dXJuIC0xfWZ1bmN0aW9uIGNiaXQoYSl7dmFyIGI9MDt3aGlsZShhIT0wKXthJj1hLTE7KytifXJldHVybiBifWZ1bmN0aW9uIGJuQml0Q291bnQoKXt2YXIgYz0wLGE9dGhpcy5zJnRoaXMuRE07Zm9yKHZhciBiPTA7Yjx0aGlzLnQ7KytiKXtjKz1jYml0KHRoaXNbYl1eYSl9cmV0dXJuIGN9ZnVuY3Rpb24gYm5UZXN0Qml0KGIpe3ZhciBhPU1hdGguZmxvb3IoYi90aGlzLkRCKTtpZihhPj10aGlzLnQpe3JldHVybih0aGlzLnMhPTApfXJldHVybigodGhpc1thXSYoMTw8KGIldGhpcy5EQikpKSE9MCl9ZnVuY3Rpb24gYm5wQ2hhbmdlQml0KGMsYil7dmFyIGE9QmlnSW50ZWdlci5PTkUuc2hpZnRMZWZ0KGMpO3RoaXMuYml0d2lzZVRvKGEsYixhKTtyZXR1cm4gYX1mdW5jdGlvbiBiblNldEJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF9vcil9ZnVuY3Rpb24gYm5DbGVhckJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF9hbmRub3QpfWZ1bmN0aW9uIGJuRmxpcEJpdChhKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoYSxvcF94b3IpfWZ1bmN0aW9uIGJucEFkZFRvKGQsZil7dmFyIGU9MCxnPTAsYj1NYXRoLm1pbihkLnQsdGhpcy50KTt3aGlsZShlPGIpe2crPXRoaXNbZV0rZFtlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWlmKGQudDx0aGlzLnQpe2crPWQuczt3aGlsZShlPHRoaXMudCl7Zys9dGhpc1tlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWcrPXRoaXMuc31lbHNle2crPXRoaXMuczt3aGlsZShlPGQudCl7Zys9ZFtlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWcrPWQuc31mLnM9KGc8MCk/LTE6MDtpZihnPjApe2ZbZSsrXT1nfWVsc2V7aWYoZzwtMSl7ZltlKytdPXRoaXMuRFYrZ319Zi50PWU7Zi5jbGFtcCgpfWZ1bmN0aW9uIGJuQWRkKGIpe3ZhciBjPW5iaSgpO3RoaXMuYWRkVG8oYixjKTtyZXR1cm4gY31mdW5jdGlvbiBiblN1YnRyYWN0KGIpe3ZhciBjPW5iaSgpO3RoaXMuc3ViVG8oYixjKTtyZXR1cm4gY31mdW5jdGlvbiBibk11bHRpcGx5KGIpe3ZhciBjPW5iaSgpO3RoaXMubXVsdGlwbHlUbyhiLGMpO3JldHVybiBjfWZ1bmN0aW9uIGJuU3F1YXJlKCl7dmFyIGE9bmJpKCk7dGhpcy5zcXVhcmVUbyhhKTtyZXR1cm4gYX1mdW5jdGlvbiBibkRpdmlkZShiKXt2YXIgYz1uYmkoKTt0aGlzLmRpdlJlbVRvKGIsYyxudWxsKTtyZXR1cm4gY31mdW5jdGlvbiBiblJlbWFpbmRlcihiKXt2YXIgYz1uYmkoKTt0aGlzLmRpdlJlbVRvKGIsbnVsbCxjKTtyZXR1cm4gY31mdW5jdGlvbiBibkRpdmlkZUFuZFJlbWFpbmRlcihiKXt2YXIgZD1uYmkoKSxjPW5iaSgpO3RoaXMuZGl2UmVtVG8oYixkLGMpO3JldHVybiBuZXcgQXJyYXkoZCxjKX1mdW5jdGlvbiBibnBETXVsdGlwbHkoYSl7dGhpc1t0aGlzLnRdPXRoaXMuYW0oMCxhLTEsdGhpcywwLDAsdGhpcy50KTsrK3RoaXMudDt0aGlzLmNsYW1wKCl9ZnVuY3Rpb24gYm5wREFkZE9mZnNldChiLGEpe2lmKGI9PTApe3JldHVybn13aGlsZSh0aGlzLnQ8PWEpe3RoaXNbdGhpcy50KytdPTB9dGhpc1thXSs9Yjt3aGlsZSh0aGlzW2FdPj10aGlzLkRWKXt0aGlzW2FdLT10aGlzLkRWO2lmKCsrYT49dGhpcy50KXt0aGlzW3RoaXMudCsrXT0wfSsrdGhpc1thXX19ZnVuY3Rpb24gTnVsbEV4cCgpe31mdW5jdGlvbiBuTm9wKGEpe3JldHVybiBhfWZ1bmN0aW9uIG5NdWxUbyhhLGMsYil7YS5tdWx0aXBseVRvKGMsYil9ZnVuY3Rpb24gblNxclRvKGEsYil7YS5zcXVhcmVUbyhiKX1OdWxsRXhwLnByb3RvdHlwZS5jb252ZXJ0PW5Ob3A7TnVsbEV4cC5wcm90b3R5cGUucmV2ZXJ0PW5Ob3A7TnVsbEV4cC5wcm90b3R5cGUubXVsVG89bk11bFRvO051bGxFeHAucHJvdG90eXBlLnNxclRvPW5TcXJUbztmdW5jdGlvbiBiblBvdyhhKXtyZXR1cm4gdGhpcy5leHAoYSxuZXcgTnVsbEV4cCgpKX1mdW5jdGlvbiBibnBNdWx0aXBseUxvd2VyVG8oYixmLGUpe3ZhciBkPU1hdGgubWluKHRoaXMudCtiLnQsZik7ZS5zPTA7ZS50PWQ7d2hpbGUoZD4wKXtlWy0tZF09MH12YXIgYztmb3IoYz1lLnQtdGhpcy50O2Q8YzsrK2Qpe2VbZCt0aGlzLnRdPXRoaXMuYW0oMCxiW2RdLGUsZCwwLHRoaXMudCl9Zm9yKGM9TWF0aC5taW4oYi50LGYpO2Q8YzsrK2Qpe3RoaXMuYW0oMCxiW2RdLGUsZCwwLGYtZCl9ZS5jbGFtcCgpfWZ1bmN0aW9uIGJucE11bHRpcGx5VXBwZXJUbyhiLGUsZCl7LS1lO3ZhciBjPWQudD10aGlzLnQrYi50LWU7ZC5zPTA7d2hpbGUoLS1jPj0wKXtkW2NdPTB9Zm9yKGM9TWF0aC5tYXgoZS10aGlzLnQsMCk7YzxiLnQ7KytjKXtkW3RoaXMudCtjLWVdPXRoaXMuYW0oZS1jLGJbY10sZCwwLDAsdGhpcy50K2MtZSl9ZC5jbGFtcCgpO2QuZHJTaGlmdFRvKDEsZCl9ZnVuY3Rpb24gQmFycmV0dChhKXt0aGlzLnIyPW5iaSgpO3RoaXMucTM9bmJpKCk7QmlnSW50ZWdlci5PTkUuZGxTaGlmdFRvKDIqYS50LHRoaXMucjIpO3RoaXMubXU9dGhpcy5yMi5kaXZpZGUoYSk7dGhpcy5tPWF9ZnVuY3Rpb24gYmFycmV0dENvbnZlcnQoYSl7aWYoYS5zPDB8fGEudD4yKnRoaXMubS50KXtyZXR1cm4gYS5tb2QodGhpcy5tKX1lbHNle2lmKGEuY29tcGFyZVRvKHRoaXMubSk8MCl7cmV0dXJuIGF9ZWxzZXt2YXIgYj1uYmkoKTthLmNvcHlUbyhiKTt0aGlzLnJlZHVjZShiKTtyZXR1cm4gYn19fWZ1bmN0aW9uIGJhcnJldHRSZXZlcnQoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gYmFycmV0dFJlZHVjZShhKXthLmRyU2hpZnRUbyh0aGlzLm0udC0xLHRoaXMucjIpO2lmKGEudD50aGlzLm0udCsxKXthLnQ9dGhpcy5tLnQrMTthLmNsYW1wKCl9dGhpcy5tdS5tdWx0aXBseVVwcGVyVG8odGhpcy5yMix0aGlzLm0udCsxLHRoaXMucTMpO3RoaXMubS5tdWx0aXBseUxvd2VyVG8odGhpcy5xMyx0aGlzLm0udCsxLHRoaXMucjIpO3doaWxlKGEuY29tcGFyZVRvKHRoaXMucjIpPDApe2EuZEFkZE9mZnNldCgxLHRoaXMubS50KzEpfWEuc3ViVG8odGhpcy5yMixhKTt3aGlsZShhLmNvbXBhcmVUbyh0aGlzLm0pPj0wKXthLnN1YlRvKHRoaXMubSxhKX19ZnVuY3Rpb24gYmFycmV0dFNxclRvKGEsYil7YS5zcXVhcmVUbyhiKTt0aGlzLnJlZHVjZShiKX1mdW5jdGlvbiBiYXJyZXR0TXVsVG8oYSxjLGIpe2EubXVsdGlwbHlUbyhjLGIpO3RoaXMucmVkdWNlKGIpfUJhcnJldHQucHJvdG90eXBlLmNvbnZlcnQ9YmFycmV0dENvbnZlcnQ7QmFycmV0dC5wcm90b3R5cGUucmV2ZXJ0PWJhcnJldHRSZXZlcnQ7QmFycmV0dC5wcm90b3R5cGUucmVkdWNlPWJhcnJldHRSZWR1Y2U7QmFycmV0dC5wcm90b3R5cGUubXVsVG89YmFycmV0dE11bFRvO0JhcnJldHQucHJvdG90eXBlLnNxclRvPWJhcnJldHRTcXJUbztmdW5jdGlvbiBibk1vZFBvdyhxLGYpe3ZhciBvPXEuYml0TGVuZ3RoKCksaCxiPW5idigxKSx2O2lmKG88PTApe3JldHVybiBifWVsc2V7aWYobzwxOCl7aD0xfWVsc2V7aWYobzw0OCl7aD0zfWVsc2V7aWYobzwxNDQpe2g9NH1lbHNle2lmKG88NzY4KXtoPTV9ZWxzZXtoPTZ9fX19fWlmKG88OCl7dj1uZXcgQ2xhc3NpYyhmKX1lbHNle2lmKGYuaXNFdmVuKCkpe3Y9bmV3IEJhcnJldHQoZil9ZWxzZXt2PW5ldyBNb250Z29tZXJ5KGYpfX12YXIgcD1uZXcgQXJyYXkoKSxkPTMscz1oLTEsYT0oMTw8aCktMTtwWzFdPXYuY29udmVydCh0aGlzKTtpZihoPjEpe3ZhciBBPW5iaSgpO3Yuc3FyVG8ocFsxXSxBKTt3aGlsZShkPD1hKXtwW2RdPW5iaSgpO3YubXVsVG8oQSxwW2QtMl0scFtkXSk7ZCs9Mn19dmFyIGw9cS50LTEseCx1PXRydWUsYz1uYmkoKSx5O289bmJpdHMocVtsXSktMTt3aGlsZShsPj0wKXtpZihvPj1zKXt4PShxW2xdPj4oby1zKSkmYX1lbHNle3g9KHFbbF0mKCgxPDwobysxKSktMSkpPDwocy1vKTtpZihsPjApe3h8PXFbbC0xXT4+KHRoaXMuREIrby1zKX19ZD1oO3doaWxlKCh4JjEpPT0wKXt4Pj49MTstLWR9aWYoKG8tPWQpPDApe28rPXRoaXMuREI7LS1sfWlmKHUpe3BbeF0uY29weVRvKGIpO3U9ZmFsc2V9ZWxzZXt3aGlsZShkPjEpe3Yuc3FyVG8oYixjKTt2LnNxclRvKGMsYik7ZC09Mn1pZihkPjApe3Yuc3FyVG8oYixjKX1lbHNle3k9YjtiPWM7Yz15fXYubXVsVG8oYyxwW3hdLGIpfXdoaWxlKGw+PTAmJihxW2xdJigxPDxvKSk9PTApe3Yuc3FyVG8oYixjKTt5PWI7Yj1jO2M9eTtpZigtLW88MCl7bz10aGlzLkRCLTE7LS1sfX19cmV0dXJuIHYucmV2ZXJ0KGIpfWZ1bmN0aW9uIGJuR0NEKGMpe3ZhciBiPSh0aGlzLnM8MCk/dGhpcy5uZWdhdGUoKTp0aGlzLmNsb25lKCk7dmFyIGg9KGMuczwwKT9jLm5lZ2F0ZSgpOmMuY2xvbmUoKTtpZihiLmNvbXBhcmVUbyhoKTwwKXt2YXIgZT1iO2I9aDtoPWV9dmFyIGQ9Yi5nZXRMb3dlc3RTZXRCaXQoKSxmPWguZ2V0TG93ZXN0U2V0Qml0KCk7aWYoZjwwKXtyZXR1cm4gYn1pZihkPGYpe2Y9ZH1pZihmPjApe2IuclNoaWZ0VG8oZixiKTtoLnJTaGlmdFRvKGYsaCl9d2hpbGUoYi5zaWdudW0oKT4wKXtpZigoZD1iLmdldExvd2VzdFNldEJpdCgpKT4wKXtiLnJTaGlmdFRvKGQsYil9aWYoKGQ9aC5nZXRMb3dlc3RTZXRCaXQoKSk+MCl7aC5yU2hpZnRUbyhkLGgpfWlmKGIuY29tcGFyZVRvKGgpPj0wKXtiLnN1YlRvKGgsYik7Yi5yU2hpZnRUbygxLGIpfWVsc2V7aC5zdWJUbyhiLGgpO2guclNoaWZ0VG8oMSxoKX19aWYoZj4wKXtoLmxTaGlmdFRvKGYsaCl9cmV0dXJuIGh9ZnVuY3Rpb24gYm5wTW9kSW50KGUpe2lmKGU8PTApe3JldHVybiAwfXZhciBjPXRoaXMuRFYlZSxiPSh0aGlzLnM8MCk/ZS0xOjA7aWYodGhpcy50PjApe2lmKGM9PTApe2I9dGhpc1swXSVlfWVsc2V7Zm9yKHZhciBhPXRoaXMudC0xO2E+PTA7LS1hKXtiPShjKmIrdGhpc1thXSklZX19fXJldHVybiBifWZ1bmN0aW9uIGJuTW9kSW52ZXJzZShmKXt2YXIgaj1mLmlzRXZlbigpO2lmKCh0aGlzLmlzRXZlbigpJiZqKXx8Zi5zaWdudW0oKT09MCl7cmV0dXJuIEJpZ0ludGVnZXIuWkVST312YXIgaT1mLmNsb25lKCksaD10aGlzLmNsb25lKCk7dmFyIGc9bmJ2KDEpLGU9bmJ2KDApLGw9bmJ2KDApLGs9bmJ2KDEpO3doaWxlKGkuc2lnbnVtKCkhPTApe3doaWxlKGkuaXNFdmVuKCkpe2kuclNoaWZ0VG8oMSxpKTtpZihqKXtpZighZy5pc0V2ZW4oKXx8IWUuaXNFdmVuKCkpe2cuYWRkVG8odGhpcyxnKTtlLnN1YlRvKGYsZSl9Zy5yU2hpZnRUbygxLGcpfWVsc2V7aWYoIWUuaXNFdmVuKCkpe2Uuc3ViVG8oZixlKX19ZS5yU2hpZnRUbygxLGUpfXdoaWxlKGguaXNFdmVuKCkpe2guclNoaWZ0VG8oMSxoKTtpZihqKXtpZighbC5pc0V2ZW4oKXx8IWsuaXNFdmVuKCkpe2wuYWRkVG8odGhpcyxsKTtrLnN1YlRvKGYsayl9bC5yU2hpZnRUbygxLGwpfWVsc2V7aWYoIWsuaXNFdmVuKCkpe2suc3ViVG8oZixrKX19ay5yU2hpZnRUbygxLGspfWlmKGkuY29tcGFyZVRvKGgpPj0wKXtpLnN1YlRvKGgsaSk7aWYoail7Zy5zdWJUbyhsLGcpfWUuc3ViVG8oayxlKX1lbHNle2guc3ViVG8oaSxoKTtpZihqKXtsLnN1YlRvKGcsbCl9ay5zdWJUbyhlLGspfX1pZihoLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSkhPTApe3JldHVybiBCaWdJbnRlZ2VyLlpFUk99aWYoay5jb21wYXJlVG8oZik+PTApe3JldHVybiBrLnN1YnRyYWN0KGYpfWlmKGsuc2lnbnVtKCk8MCl7ay5hZGRUbyhmLGspfWVsc2V7cmV0dXJuIGt9aWYoay5zaWdudW0oKTwwKXtyZXR1cm4gay5hZGQoZil9ZWxzZXtyZXR1cm4ga319dmFyIGxvd3ByaW1lcz1bMiwzLDUsNywxMSwxMywxNywxOSwyMywyOSwzMSwzNyw0MSw0Myw0Nyw1Myw1OSw2MSw2Nyw3MSw3Myw3OSw4Myw4OSw5NywxMDEsMTAzLDEwNywxMDksMTEzLDEyNywxMzEsMTM3LDEzOSwxNDksMTUxLDE1NywxNjMsMTY3LDE3MywxNzksMTgxLDE5MSwxOTMsMTk3LDE5OSwyMTEsMjIzLDIyNywyMjksMjMzLDIzOSwyNDEsMjUxLDI1NywyNjMsMjY5LDI3MSwyNzcsMjgxLDI4MywyOTMsMzA3LDMxMSwzMTMsMzE3LDMzMSwzMzcsMzQ3LDM0OSwzNTMsMzU5LDM2NywzNzMsMzc5LDM4MywzODksMzk3LDQwMSw0MDksNDE5LDQyMSw0MzEsNDMzLDQzOSw0NDMsNDQ5LDQ1Nyw0NjEsNDYzLDQ2Nyw0NzksNDg3LDQ5MSw0OTksNTAzLDUwOSw1MjEsNTIzLDU0MSw1NDcsNTU3LDU2Myw1NjksNTcxLDU3Nyw1ODcsNTkzLDU5OSw2MDEsNjA3LDYxMyw2MTcsNjE5LDYzMSw2NDEsNjQzLDY0Nyw2NTMsNjU5LDY2MSw2NzMsNjc3LDY4Myw2OTEsNzAxLDcwOSw3MTksNzI3LDczMyw3MzksNzQzLDc1MSw3NTcsNzYxLDc2OSw3NzMsNzg3LDc5Nyw4MDksODExLDgyMSw4MjMsODI3LDgyOSw4MzksODUzLDg1Nyw4NTksODYzLDg3Nyw4ODEsODgzLDg4Nyw5MDcsOTExLDkxOSw5MjksOTM3LDk0MSw5NDcsOTUzLDk2Nyw5NzEsOTc3LDk4Myw5OTEsOTk3XTt2YXIgbHBsaW09KDE8PDI2KS9sb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aC0xXTtmdW5jdGlvbiBibklzUHJvYmFibGVQcmltZShlKXt2YXIgZCxiPXRoaXMuYWJzKCk7aWYoYi50PT0xJiZiWzBdPD1sb3dwcmltZXNbbG93cHJpbWVzLmxlbmd0aC0xXSl7Zm9yKGQ9MDtkPGxvd3ByaW1lcy5sZW5ndGg7KytkKXtpZihiWzBdPT1sb3dwcmltZXNbZF0pe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9aWYoYi5pc0V2ZW4oKSl7cmV0dXJuIGZhbHNlfWQ9MTt3aGlsZShkPGxvd3ByaW1lcy5sZW5ndGgpe3ZhciBhPWxvd3ByaW1lc1tkXSxjPWQrMTt3aGlsZShjPGxvd3ByaW1lcy5sZW5ndGgmJmE8bHBsaW0pe2EqPWxvd3ByaW1lc1tjKytdfWE9Yi5tb2RJbnQoYSk7d2hpbGUoZDxjKXtpZihhJWxvd3ByaW1lc1tkKytdPT0wKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gYi5taWxsZXJSYWJpbihlKX1mdW5jdGlvbiBibnBNaWxsZXJSYWJpbihmKXt2YXIgZz10aGlzLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKTt2YXIgYz1nLmdldExvd2VzdFNldEJpdCgpO2lmKGM8PTApe3JldHVybiBmYWxzZX12YXIgaD1nLnNoaWZ0UmlnaHQoYyk7Zj0oZisxKT4+MTtpZihmPmxvd3ByaW1lcy5sZW5ndGgpe2Y9bG93cHJpbWVzLmxlbmd0aH12YXIgYj1uYmkoKTtmb3IodmFyIGU9MDtlPGY7KytlKXtiLmZyb21JbnQobG93cHJpbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpsb3dwcmltZXMubGVuZ3RoKV0pO3ZhciBsPWIubW9kUG93KGgsdGhpcyk7aWYobC5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpIT0wJiZsLmNvbXBhcmVUbyhnKSE9MCl7dmFyIGQ9MTt3aGlsZShkKys8YyYmbC5jb21wYXJlVG8oZykhPTApe2w9bC5tb2RQb3dJbnQoMix0aGlzKTtpZihsLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk9PTApe3JldHVybiBmYWxzZX19aWYobC5jb21wYXJlVG8oZykhPTApe3JldHVybiBmYWxzZX19fXJldHVybiB0cnVlfUJpZ0ludGVnZXIucHJvdG90eXBlLmNodW5rU2l6ZT1ibnBDaHVua1NpemU7QmlnSW50ZWdlci5wcm90b3R5cGUudG9SYWRpeD1ibnBUb1JhZGl4O0JpZ0ludGVnZXIucHJvdG90eXBlLmZyb21SYWRpeD1ibnBGcm9tUmFkaXg7QmlnSW50ZWdlci5wcm90b3R5cGUuZnJvbU51bWJlcj1ibnBGcm9tTnVtYmVyO0JpZ0ludGVnZXIucHJvdG90eXBlLmJpdHdpc2VUbz1ibnBCaXR3aXNlVG87QmlnSW50ZWdlci5wcm90b3R5cGUuY2hhbmdlQml0PWJucENoYW5nZUJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGRUbz1ibnBBZGRUbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5kTXVsdGlwbHk9Ym5wRE11bHRpcGx5O0JpZ0ludGVnZXIucHJvdG90eXBlLmRBZGRPZmZzZXQ9Ym5wREFkZE9mZnNldDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseUxvd2VyVG89Ym5wTXVsdGlwbHlMb3dlclRvO0JpZ0ludGVnZXIucHJvdG90eXBlLm11bHRpcGx5VXBwZXJUbz1ibnBNdWx0aXBseVVwcGVyVG87QmlnSW50ZWdlci5wcm90b3R5cGUubW9kSW50PWJucE1vZEludDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5taWxsZXJSYWJpbj1ibnBNaWxsZXJSYWJpbjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5jbG9uZT1ibkNsb25lO0JpZ0ludGVnZXIucHJvdG90eXBlLmludFZhbHVlPWJuSW50VmFsdWU7QmlnSW50ZWdlci5wcm90b3R5cGUuYnl0ZVZhbHVlPWJuQnl0ZVZhbHVlO0JpZ0ludGVnZXIucHJvdG90eXBlLnNob3J0VmFsdWU9Ym5TaG9ydFZhbHVlO0JpZ0ludGVnZXIucHJvdG90eXBlLnNpZ251bT1iblNpZ051bTtCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0J5dGVBcnJheT1iblRvQnl0ZUFycmF5O0JpZ0ludGVnZXIucHJvdG90eXBlLmVxdWFscz1ibkVxdWFscztCaWdJbnRlZ2VyLnByb3RvdHlwZS5taW49Ym5NaW47QmlnSW50ZWdlci5wcm90b3R5cGUubWF4PWJuTWF4O0JpZ0ludGVnZXIucHJvdG90eXBlLmFuZD1ibkFuZDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5vcj1ibk9yO0JpZ0ludGVnZXIucHJvdG90eXBlLnhvcj1iblhvcjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbmROb3Q9Ym5BbmROb3Q7QmlnSW50ZWdlci5wcm90b3R5cGUubm90PWJuTm90O0JpZ0ludGVnZXIucHJvdG90eXBlLnNoaWZ0TGVmdD1iblNoaWZ0TGVmdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zaGlmdFJpZ2h0PWJuU2hpZnRSaWdodDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5nZXRMb3dlc3RTZXRCaXQ9Ym5HZXRMb3dlc3RTZXRCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuYml0Q291bnQ9Ym5CaXRDb3VudDtCaWdJbnRlZ2VyLnByb3RvdHlwZS50ZXN0Qml0PWJuVGVzdEJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zZXRCaXQ9Ym5TZXRCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuY2xlYXJCaXQ9Ym5DbGVhckJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5mbGlwQml0PWJuRmxpcEJpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGQ9Ym5BZGQ7QmlnSW50ZWdlci5wcm90b3R5cGUuc3VidHJhY3Q9Ym5TdWJ0cmFjdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseT1ibk11bHRpcGx5O0JpZ0ludGVnZXIucHJvdG90eXBlLmRpdmlkZT1ibkRpdmlkZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5yZW1haW5kZXI9Ym5SZW1haW5kZXI7QmlnSW50ZWdlci5wcm90b3R5cGUuZGl2aWRlQW5kUmVtYWluZGVyPWJuRGl2aWRlQW5kUmVtYWluZGVyO0JpZ0ludGVnZXIucHJvdG90eXBlLm1vZFBvdz1ibk1vZFBvdztCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2RJbnZlcnNlPWJuTW9kSW52ZXJzZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5wb3c9Ym5Qb3c7QmlnSW50ZWdlci5wcm90b3R5cGUuZ2NkPWJuR0NEO0JpZ0ludGVnZXIucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZT1ibklzUHJvYmFibGVQcmltZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zcXVhcmU9Ym5TcXVhcmU7Ci8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLwogKi8KZnVuY3Rpb24gQXJjZm91cigpe3RoaXMuaT0wO3RoaXMuaj0wO3RoaXMuUz1uZXcgQXJyYXkoKX1mdW5jdGlvbiBBUkM0aW5pdChkKXt2YXIgYyxhLGI7Zm9yKGM9MDtjPDI1NjsrK2Mpe3RoaXMuU1tjXT1jfWE9MDtmb3IoYz0wO2M8MjU2OysrYyl7YT0oYSt0aGlzLlNbY10rZFtjJWQubGVuZ3RoXSkmMjU1O2I9dGhpcy5TW2NdO3RoaXMuU1tjXT10aGlzLlNbYV07dGhpcy5TW2FdPWJ9dGhpcy5pPTA7dGhpcy5qPTB9ZnVuY3Rpb24gQVJDNG5leHQoKXt2YXIgYTt0aGlzLmk9KHRoaXMuaSsxKSYyNTU7dGhpcy5qPSh0aGlzLmordGhpcy5TW3RoaXMuaV0pJjI1NTthPXRoaXMuU1t0aGlzLmldO3RoaXMuU1t0aGlzLmldPXRoaXMuU1t0aGlzLmpdO3RoaXMuU1t0aGlzLmpdPWE7cmV0dXJuIHRoaXMuU1soYSt0aGlzLlNbdGhpcy5pXSkmMjU1XX1BcmNmb3VyLnByb3RvdHlwZS5pbml0PUFSQzRpbml0O0FyY2ZvdXIucHJvdG90eXBlLm5leHQ9QVJDNG5leHQ7ZnVuY3Rpb24gcHJuZ19uZXdzdGF0ZSgpe3JldHVybiBuZXcgQXJjZm91cigpfXZhciBybmdfcHNpemU9MjU2OwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCnZhciBybmdfc3RhdGU7dmFyIHJuZ19wb29sO3ZhciBybmdfcHB0cjtmdW5jdGlvbiBybmdfc2VlZF9pbnQoYSl7cm5nX3Bvb2xbcm5nX3BwdHIrK11ePWEmMjU1O3JuZ19wb29sW3JuZ19wcHRyKytdXj0oYT4+OCkmMjU1O3JuZ19wb29sW3JuZ19wcHRyKytdXj0oYT4+MTYpJjI1NTtybmdfcG9vbFtybmdfcHB0cisrXV49KGE+PjI0KSYyNTU7aWYocm5nX3BwdHI+PXJuZ19wc2l6ZSl7cm5nX3BwdHItPXJuZ19wc2l6ZX19ZnVuY3Rpb24gcm5nX3NlZWRfdGltZSgpe3JuZ19zZWVkX2ludChuZXcgRGF0ZSgpLmdldFRpbWUoKSl9aWYocm5nX3Bvb2w9PW51bGwpe3JuZ19wb29sPW5ldyBBcnJheSgpO3JuZ19wcHRyPTA7dmFyIHQ7aWYod2luZG93LmNyeXB0byYmd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpe3ZhciB1YT1uZXcgVWludDhBcnJheSgzMik7d2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXModWEpO2Zvcih0PTA7dDwzMjsrK3Qpe3JuZ19wb29sW3JuZ19wcHRyKytdPXVhW3RdfX1pZihuYXZpZ2F0b3IuYXBwTmFtZT09Ik5ldHNjYXBlIiYmbmF2aWdhdG9yLmFwcFZlcnNpb248IjUiJiZ3aW5kb3cuY3J5cHRvKXt2YXIgej13aW5kb3cuY3J5cHRvLnJhbmRvbSgzMik7Zm9yKHQ9MDt0PHoubGVuZ3RoOysrdCl7cm5nX3Bvb2xbcm5nX3BwdHIrK109ei5jaGFyQ29kZUF0KHQpJjI1NX19d2hpbGUocm5nX3BwdHI8cm5nX3BzaXplKXt0PU1hdGguZmxvb3IoNjU1MzYqTWF0aC5yYW5kb20oKSk7cm5nX3Bvb2xbcm5nX3BwdHIrK109dD4+Pjg7cm5nX3Bvb2xbcm5nX3BwdHIrK109dCYyNTV9cm5nX3BwdHI9MDtybmdfc2VlZF90aW1lKCl9ZnVuY3Rpb24gcm5nX2dldF9ieXRlKCl7aWYocm5nX3N0YXRlPT1udWxsKXtybmdfc2VlZF90aW1lKCk7cm5nX3N0YXRlPXBybmdfbmV3c3RhdGUoKTtybmdfc3RhdGUuaW5pdChybmdfcG9vbCk7Zm9yKHJuZ19wcHRyPTA7cm5nX3BwdHI8cm5nX3Bvb2wubGVuZ3RoOysrcm5nX3BwdHIpe3JuZ19wb29sW3JuZ19wcHRyXT0wfXJuZ19wcHRyPTB9cmV0dXJuIHJuZ19zdGF0ZS5uZXh0KCl9ZnVuY3Rpb24gcm5nX2dldF9ieXRlcyhiKXt2YXIgYTtmb3IoYT0wO2E8Yi5sZW5ndGg7KythKXtiW2FdPXJuZ19nZXRfYnl0ZSgpfX1mdW5jdGlvbiBTZWN1cmVSYW5kb20oKXt9U2VjdXJlUmFuZG9tLnByb3RvdHlwZS5uZXh0Qnl0ZXM9cm5nX2dldF9ieXRlczsKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwpmdW5jdGlvbiBwYXJzZUJpZ0ludChiLGEpe3JldHVybiBuZXcgQmlnSW50ZWdlcihiLGEpfWZ1bmN0aW9uIGxpbmVicmsoYyxkKXt2YXIgYT0iIjt2YXIgYj0wO3doaWxlKGIrZDxjLmxlbmd0aCl7YSs9Yy5zdWJzdHJpbmcoYixiK2QpKyJcbiI7Yis9ZH1yZXR1cm4gYStjLnN1YnN0cmluZyhiLGMubGVuZ3RoKX1mdW5jdGlvbiBieXRlMkhleChhKXtpZihhPDE2KXtyZXR1cm4iMCIrYS50b1N0cmluZygxNil9ZWxzZXtyZXR1cm4gYS50b1N0cmluZygxNil9fWZ1bmN0aW9uIHBrY3MxcGFkMihlLGgpe2lmKGg8ZS5sZW5ndGgrMTEpe2FsZXJ0KCJNZXNzYWdlIHRvbyBsb25nIGZvciBSU0EiKTtyZXR1cm4gbnVsbH12YXIgZz1uZXcgQXJyYXkoKTt2YXIgZD1lLmxlbmd0aC0xO3doaWxlKGQ+PTAmJmg+MCl7dmFyIGY9ZS5jaGFyQ29kZUF0KGQtLSk7aWYoZjwxMjgpe2dbLS1oXT1mfWVsc2V7aWYoKGY+MTI3KSYmKGY8MjA0OCkpe2dbLS1oXT0oZiY2Myl8MTI4O2dbLS1oXT0oZj4+Nil8MTkyfWVsc2V7Z1stLWhdPShmJjYzKXwxMjg7Z1stLWhdPSgoZj4+NikmNjMpfDEyODtnWy0taF09KGY+PjEyKXwyMjR9fX1nWy0taF09MDt2YXIgYj1uZXcgU2VjdXJlUmFuZG9tKCk7dmFyIGE9bmV3IEFycmF5KCk7d2hpbGUoaD4yKXthWzBdPTA7d2hpbGUoYVswXT09MCl7Yi5uZXh0Qnl0ZXMoYSl9Z1stLWhdPWFbMF19Z1stLWhdPTI7Z1stLWhdPTA7cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGcpfWZ1bmN0aW9uIG9hZXBfbWdmMV9hcnIoYyxhLGUpe3ZhciBiPSIiLGQ9MDt3aGlsZShiLmxlbmd0aDxhKXtiKz1lKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGMuY29uY2F0KFsoZCY0Mjc4MTkwMDgwKT4+MjQsKGQmMTY3MTE2ODApPj4xNiwoZCY2NTI4MCk+PjgsZCYyNTVdKSkpO2QrPTF9cmV0dXJuIGJ9dmFyIFNIQTFfU0laRT0yMDtmdW5jdGlvbiBvYWVwX3BhZChsLGEsYyl7aWYobC5sZW5ndGgrMipTSEExX1NJWkUrMj5hKXt0aHJvdyJNZXNzYWdlIHRvbyBsb25nIGZvciBSU0EifXZhciBoPSIiLGQ7Zm9yKGQ9MDtkPGEtbC5sZW5ndGgtMipTSEExX1NJWkUtMjtkKz0xKXtoKz0iXHgwMCJ9dmFyIGU9cnN0cl9zaGExKCIiKStoKyJceDAxIitsO3ZhciBmPW5ldyBBcnJheShTSEExX1NJWkUpO25ldyBTZWN1cmVSYW5kb20oKS5uZXh0Qnl0ZXMoZik7dmFyIGc9b2FlcF9tZ2YxX2FycihmLGUubGVuZ3RoLGN8fHJzdHJfc2hhMSk7dmFyIGs9W107Zm9yKGQ9MDtkPGUubGVuZ3RoO2QrPTEpe2tbZF09ZS5jaGFyQ29kZUF0KGQpXmcuY2hhckNvZGVBdChkKX12YXIgaj1vYWVwX21nZjFfYXJyKGssZi5sZW5ndGgscnN0cl9zaGExKTt2YXIgYj1bMF07Zm9yKGQ9MDtkPGYubGVuZ3RoO2QrPTEpe2JbZCsxXT1mW2RdXmouY2hhckNvZGVBdChkKX1yZXR1cm4gbmV3IEJpZ0ludGVnZXIoYi5jb25jYXQoaykpfWZ1bmN0aW9uIFJTQUtleSgpe3RoaXMubj1udWxsO3RoaXMuZT0wO3RoaXMuZD1udWxsO3RoaXMucD1udWxsO3RoaXMucT1udWxsO3RoaXMuZG1wMT1udWxsO3RoaXMuZG1xMT1udWxsO3RoaXMuY29lZmY9bnVsbH1mdW5jdGlvbiBSU0FTZXRQdWJsaWMoYixhKXt0aGlzLmlzUHVibGljPXRydWU7aWYodHlwZW9mIGIhPT0ic3RyaW5nIil7dGhpcy5uPWI7dGhpcy5lPWF9ZWxzZXtpZihiIT1udWxsJiZhIT1udWxsJiZiLmxlbmd0aD4wJiZhLmxlbmd0aD4wKXt0aGlzLm49cGFyc2VCaWdJbnQoYiwxNik7dGhpcy5lPXBhcnNlSW50KGEsMTYpfWVsc2V7YWxlcnQoIkludmFsaWQgUlNBIHB1YmxpYyBrZXkiKX19fWZ1bmN0aW9uIFJTQURvUHVibGljKGEpe3JldHVybiBhLm1vZFBvd0ludCh0aGlzLmUsdGhpcy5uKX1mdW5jdGlvbiBSU0FFbmNyeXB0KGQpe3ZhciBhPXBrY3MxcGFkMihkLCh0aGlzLm4uYml0TGVuZ3RoKCkrNyk+PjMpO2lmKGE9PW51bGwpe3JldHVybiBudWxsfXZhciBlPXRoaXMuZG9QdWJsaWMoYSk7aWYoZT09bnVsbCl7cmV0dXJuIG51bGx9dmFyIGI9ZS50b1N0cmluZygxNik7aWYoKGIubGVuZ3RoJjEpPT0wKXtyZXR1cm4gYn1lbHNle3JldHVybiIwIitifX1mdW5jdGlvbiBSU0FFbmNyeXB0T0FFUChlLGQpe3ZhciBhPW9hZXBfcGFkKGUsKHRoaXMubi5iaXRMZW5ndGgoKSs3KT4+MyxkKTtpZihhPT1udWxsKXtyZXR1cm4gbnVsbH12YXIgZj10aGlzLmRvUHVibGljKGEpO2lmKGY9PW51bGwpe3JldHVybiBudWxsfXZhciBiPWYudG9TdHJpbmcoMTYpO2lmKChiLmxlbmd0aCYxKT09MCl7cmV0dXJuIGJ9ZWxzZXtyZXR1cm4iMCIrYn19UlNBS2V5LnByb3RvdHlwZS5kb1B1YmxpYz1SU0FEb1B1YmxpYztSU0FLZXkucHJvdG90eXBlLnNldFB1YmxpYz1SU0FTZXRQdWJsaWM7UlNBS2V5LnByb3RvdHlwZS5lbmNyeXB0PVJTQUVuY3J5cHQ7UlNBS2V5LnByb3RvdHlwZS5lbmNyeXB0T0FFUD1SU0FFbmNyeXB0T0FFUDtSU0FLZXkucHJvdG90eXBlLnR5cGU9IlJTQSI7Ci8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLwogKi8KZnVuY3Rpb24gcGtjczF1bnBhZDIoZyxqKXt2YXIgYT1nLnRvQnl0ZUFycmF5KCk7dmFyIGY9MDt3aGlsZShmPGEubGVuZ3RoJiZhW2ZdPT0wKXsrK2Z9aWYoYS5sZW5ndGgtZiE9ai0xfHxhW2ZdIT0yKXtyZXR1cm4gbnVsbH0rK2Y7d2hpbGUoYVtmXSE9MCl7aWYoKytmPj1hLmxlbmd0aCl7cmV0dXJuIG51bGx9fXZhciBlPSIiO3doaWxlKCsrZjxhLmxlbmd0aCl7dmFyIGg9YVtmXSYyNTU7aWYoaDwxMjgpe2UrPVN0cmluZy5mcm9tQ2hhckNvZGUoaCl9ZWxzZXtpZigoaD4xOTEpJiYoaDwyMjQpKXtlKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgoaCYzMSk8PDYpfChhW2YrMV0mNjMpKTsrK2Z9ZWxzZXtlKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgoaCYxNSk8PDEyKXwoKGFbZisxXSY2Myk8PDYpfChhW2YrMl0mNjMpKTtmKz0yfX19cmV0dXJuIGV9ZnVuY3Rpb24gb2FlcF9tZ2YxX3N0cihjLGEsZSl7dmFyIGI9IiIsZD0wO3doaWxlKGIubGVuZ3RoPGEpe2IrPWUoYytTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxbKGQmNDI3ODE5MDA4MCk+PjI0LChkJjE2NzExNjgwKT4+MTYsKGQmNjUyODApPj44LGQmMjU1XSkpO2QrPTF9cmV0dXJuIGJ9dmFyIFNIQTFfU0laRT0yMDtmdW5jdGlvbiBvYWVwX3VucGFkKGwsYixlKXtsPWwudG9CeXRlQXJyYXkoKTt2YXIgZjtmb3IoZj0wO2Y8bC5sZW5ndGg7Zis9MSl7bFtmXSY9MjU1fXdoaWxlKGwubGVuZ3RoPGIpe2wudW5zaGlmdCgwKX1sPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGwpO2lmKGwubGVuZ3RoPDIqU0hBMV9TSVpFKzIpe3Rocm93IkNpcGhlciB0b28gc2hvcnQifXZhciBjPWwuc3Vic3RyKDEsU0hBMV9TSVpFKTt2YXIgbz1sLnN1YnN0cihTSEExX1NJWkUrMSk7dmFyIG09b2FlcF9tZ2YxX3N0cihvLFNIQTFfU0laRSxlfHxyc3RyX3NoYTEpO3ZhciBoPVtdLGY7Zm9yKGY9MDtmPGMubGVuZ3RoO2YrPTEpe2hbZl09Yy5jaGFyQ29kZUF0KGYpXm0uY2hhckNvZGVBdChmKX12YXIgaj1vYWVwX21nZjFfc3RyKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGgpLGwubGVuZ3RoLVNIQTFfU0laRSxyc3RyX3NoYTEpO3ZhciBnPVtdO2ZvcihmPTA7ZjxvLmxlbmd0aDtmKz0xKXtnW2ZdPW8uY2hhckNvZGVBdChmKV5qLmNoYXJDb2RlQXQoZil9Zz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxnKTtpZihnLnN1YnN0cigwLFNIQTFfU0laRSkhPT1yc3RyX3NoYTEoIiIpKXt0aHJvdyJIYXNoIG1pc21hdGNoIn1nPWcuc3Vic3RyKFNIQTFfU0laRSk7dmFyIGE9Zy5pbmRleE9mKCJceDAxIik7dmFyIGs9KGEhPS0xKT9nLnN1YnN0cigwLGEpLmxhc3RJbmRleE9mKCJceDAwIik6LTE7aWYoaysxIT1hKXt0aHJvdyJNYWxmb3JtZWQgZGF0YSJ9cmV0dXJuIGcuc3Vic3RyKGErMSl9ZnVuY3Rpb24gUlNBU2V0UHJpdmF0ZShjLGEsYil7dGhpcy5pc1ByaXZhdGU9dHJ1ZTtpZih0eXBlb2YgYyE9PSJzdHJpbmciKXt0aGlzLm49Yzt0aGlzLmU9YTt0aGlzLmQ9Yn1lbHNle2lmKGMhPW51bGwmJmEhPW51bGwmJmMubGVuZ3RoPjAmJmEubGVuZ3RoPjApe3RoaXMubj1wYXJzZUJpZ0ludChjLDE2KTt0aGlzLmU9cGFyc2VJbnQoYSwxNik7dGhpcy5kPXBhcnNlQmlnSW50KGIsMTYpfWVsc2V7YWxlcnQoIkludmFsaWQgUlNBIHByaXZhdGUga2V5Iil9fX1mdW5jdGlvbiBSU0FTZXRQcml2YXRlRXgoZyxkLGUsYyxiLGEsaCxmKXt0aGlzLmlzUHJpdmF0ZT10cnVlO2lmKGc9PW51bGwpe3Rocm93IlJTQVNldFByaXZhdGVFeCBOID09IG51bGwifWlmKGQ9PW51bGwpe3Rocm93IlJTQVNldFByaXZhdGVFeCBFID09IG51bGwifWlmKGcubGVuZ3RoPT0wKXt0aHJvdyJSU0FTZXRQcml2YXRlRXggTi5sZW5ndGggPT0gMCJ9aWYoZC5sZW5ndGg9PTApe3Rocm93IlJTQVNldFByaXZhdGVFeCBFLmxlbmd0aCA9PSAwIn1pZihnIT1udWxsJiZkIT1udWxsJiZnLmxlbmd0aD4wJiZkLmxlbmd0aD4wKXt0aGlzLm49cGFyc2VCaWdJbnQoZywxNik7dGhpcy5lPXBhcnNlSW50KGQsMTYpO3RoaXMuZD1wYXJzZUJpZ0ludChlLDE2KTt0aGlzLnA9cGFyc2VCaWdJbnQoYywxNik7dGhpcy5xPXBhcnNlQmlnSW50KGIsMTYpO3RoaXMuZG1wMT1wYXJzZUJpZ0ludChhLDE2KTt0aGlzLmRtcTE9cGFyc2VCaWdJbnQoaCwxNik7dGhpcy5jb2VmZj1wYXJzZUJpZ0ludChmLDE2KX1lbHNle2FsZXJ0KCJJbnZhbGlkIFJTQSBwcml2YXRlIGtleSBpbiBSU0FTZXRQcml2YXRlRXgiKX19ZnVuY3Rpb24gUlNBR2VuZXJhdGUoYixpKXt2YXIgYT1uZXcgU2VjdXJlUmFuZG9tKCk7dmFyIGY9Yj4+MTt0aGlzLmU9cGFyc2VJbnQoaSwxNik7dmFyIGM9bmV3IEJpZ0ludGVnZXIoaSwxNik7Zm9yKDs7KXtmb3IoOzspe3RoaXMucD1uZXcgQmlnSW50ZWdlcihiLWYsMSxhKTtpZih0aGlzLnAuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpLmdjZChjKS5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpPT0wJiZ0aGlzLnAuaXNQcm9iYWJsZVByaW1lKDEwKSl7YnJlYWt9fWZvcig7Oyl7dGhpcy5xPW5ldyBCaWdJbnRlZ2VyKGYsMSxhKTtpZih0aGlzLnEuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpLmdjZChjKS5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpPT0wJiZ0aGlzLnEuaXNQcm9iYWJsZVByaW1lKDEwKSl7YnJlYWt9fWlmKHRoaXMucC5jb21wYXJlVG8odGhpcy5xKTw9MCl7dmFyIGg9dGhpcy5wO3RoaXMucD10aGlzLnE7dGhpcy5xPWh9dmFyIGc9dGhpcy5wLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKTt2YXIgZD10aGlzLnEuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpO3ZhciBlPWcubXVsdGlwbHkoZCk7aWYoZS5nY2QoYykuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKT09MCl7dGhpcy5uPXRoaXMucC5tdWx0aXBseSh0aGlzLnEpO3RoaXMuZD1jLm1vZEludmVyc2UoZSk7dGhpcy5kbXAxPXRoaXMuZC5tb2QoZyk7dGhpcy5kbXExPXRoaXMuZC5tb2QoZCk7dGhpcy5jb2VmZj10aGlzLnEubW9kSW52ZXJzZSh0aGlzLnApO2JyZWFrfX19ZnVuY3Rpb24gUlNBRG9Qcml2YXRlKGEpe2lmKHRoaXMucD09bnVsbHx8dGhpcy5xPT1udWxsKXtyZXR1cm4gYS5tb2RQb3codGhpcy5kLHRoaXMubil9dmFyIGM9YS5tb2QodGhpcy5wKS5tb2RQb3codGhpcy5kbXAxLHRoaXMucCk7dmFyIGI9YS5tb2QodGhpcy5xKS5tb2RQb3codGhpcy5kbXExLHRoaXMucSk7d2hpbGUoYy5jb21wYXJlVG8oYik8MCl7Yz1jLmFkZCh0aGlzLnApfXJldHVybiBjLnN1YnRyYWN0KGIpLm11bHRpcGx5KHRoaXMuY29lZmYpLm1vZCh0aGlzLnApLm11bHRpcGx5KHRoaXMucSkuYWRkKGIpfWZ1bmN0aW9uIFJTQURlY3J5cHQoYil7dmFyIGQ9cGFyc2VCaWdJbnQoYiwxNik7dmFyIGE9dGhpcy5kb1ByaXZhdGUoZCk7aWYoYT09bnVsbCl7cmV0dXJuIG51bGx9cmV0dXJuIHBrY3MxdW5wYWQyKGEsKHRoaXMubi5iaXRMZW5ndGgoKSs3KT4+Myl9ZnVuY3Rpb24gUlNBRGVjcnlwdE9BRVAoZCxiKXt2YXIgZT1wYXJzZUJpZ0ludChkLDE2KTt2YXIgYT10aGlzLmRvUHJpdmF0ZShlKTtpZihhPT1udWxsKXtyZXR1cm4gbnVsbH1yZXR1cm4gb2FlcF91bnBhZChhLCh0aGlzLm4uYml0TGVuZ3RoKCkrNyk+PjMsYil9UlNBS2V5LnByb3RvdHlwZS5kb1ByaXZhdGU9UlNBRG9Qcml2YXRlO1JTQUtleS5wcm90b3R5cGUuc2V0UHJpdmF0ZT1SU0FTZXRQcml2YXRlO1JTQUtleS5wcm90b3R5cGUuc2V0UHJpdmF0ZUV4PVJTQVNldFByaXZhdGVFeDtSU0FLZXkucHJvdG90eXBlLmdlbmVyYXRlPVJTQUdlbmVyYXRlO1JTQUtleS5wcm90b3R5cGUuZGVjcnlwdD1SU0FEZWNyeXB0O1JTQUtleS5wcm90b3R5cGUuZGVjcnlwdE9BRVA9UlNBRGVjcnlwdE9BRVA7Ci8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLwogKi8KZnVuY3Rpb24gRUNGaWVsZEVsZW1lbnRGcChiLGEpe3RoaXMueD1hO3RoaXMucT1ifWZ1bmN0aW9uIGZlRnBFcXVhbHMoYSl7aWYoYT09dGhpcyl7cmV0dXJuIHRydWV9cmV0dXJuKHRoaXMucS5lcXVhbHMoYS5xKSYmdGhpcy54LmVxdWFscyhhLngpKX1mdW5jdGlvbiBmZUZwVG9CaWdJbnRlZ2VyKCl7cmV0dXJuIHRoaXMueH1mdW5jdGlvbiBmZUZwTmVnYXRlKCl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSx0aGlzLngubmVnYXRlKCkubW9kKHRoaXMucSkpfWZ1bmN0aW9uIGZlRnBBZGQoYSl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSx0aGlzLnguYWRkKGEudG9CaWdJbnRlZ2VyKCkpLm1vZCh0aGlzLnEpKX1mdW5jdGlvbiBmZUZwU3VidHJhY3QoYSl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSx0aGlzLnguc3VidHJhY3QoYS50b0JpZ0ludGVnZXIoKSkubW9kKHRoaXMucSkpfWZ1bmN0aW9uIGZlRnBNdWx0aXBseShhKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLHRoaXMueC5tdWx0aXBseShhLnRvQmlnSW50ZWdlcigpKS5tb2QodGhpcy5xKSl9ZnVuY3Rpb24gZmVGcFNxdWFyZSgpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54LnNxdWFyZSgpLm1vZCh0aGlzLnEpKX1mdW5jdGlvbiBmZUZwRGl2aWRlKGEpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54Lm11bHRpcGx5KGEudG9CaWdJbnRlZ2VyKCkubW9kSW52ZXJzZSh0aGlzLnEpKS5tb2QodGhpcy5xKSl9RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUuZXF1YWxzPWZlRnBFcXVhbHM7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUudG9CaWdJbnRlZ2VyPWZlRnBUb0JpZ0ludGVnZXI7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUubmVnYXRlPWZlRnBOZWdhdGU7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUuYWRkPWZlRnBBZGQ7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUuc3VidHJhY3Q9ZmVGcFN1YnRyYWN0O0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLm11bHRpcGx5PWZlRnBNdWx0aXBseTtFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5zcXVhcmU9ZmVGcFNxdWFyZTtFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5kaXZpZGU9ZmVGcERpdmlkZTtmdW5jdGlvbiBFQ1BvaW50RnAoYyxhLGQsYil7dGhpcy5jdXJ2ZT1jO3RoaXMueD1hO3RoaXMueT1kO2lmKGI9PW51bGwpe3RoaXMuej1CaWdJbnRlZ2VyLk9ORX1lbHNle3RoaXMuej1ifXRoaXMuemludj1udWxsfWZ1bmN0aW9uIHBvaW50RnBHZXRYKCl7aWYodGhpcy56aW52PT1udWxsKXt0aGlzLnppbnY9dGhpcy56Lm1vZEludmVyc2UodGhpcy5jdXJ2ZS5xKX1yZXR1cm4gdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcih0aGlzLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56aW52KS5tb2QodGhpcy5jdXJ2ZS5xKSl9ZnVuY3Rpb24gcG9pbnRGcEdldFkoKXtpZih0aGlzLnppbnY9PW51bGwpe3RoaXMuemludj10aGlzLnoubW9kSW52ZXJzZSh0aGlzLmN1cnZlLnEpfXJldHVybiB0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKHRoaXMueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnppbnYpLm1vZCh0aGlzLmN1cnZlLnEpKX1mdW5jdGlvbiBwb2ludEZwRXF1YWxzKGEpe2lmKGE9PXRoaXMpe3JldHVybiB0cnVlfWlmKHRoaXMuaXNJbmZpbml0eSgpKXtyZXR1cm4gYS5pc0luZmluaXR5KCl9aWYoYS5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzLmlzSW5maW5pdHkoKX12YXIgYyxiO2M9YS55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KGEueikpLm1vZCh0aGlzLmN1cnZlLnEpO2lmKCFjLmVxdWFscyhCaWdJbnRlZ2VyLlpFUk8pKXtyZXR1cm4gZmFsc2V9Yj1hLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkoYS56KSkubW9kKHRoaXMuY3VydmUucSk7cmV0dXJuIGIuZXF1YWxzKEJpZ0ludGVnZXIuWkVSTyl9ZnVuY3Rpb24gcG9pbnRGcElzSW5maW5pdHkoKXtpZigodGhpcy54PT1udWxsKSYmKHRoaXMueT09bnVsbCkpe3JldHVybiB0cnVlfXJldHVybiB0aGlzLnouZXF1YWxzKEJpZ0ludGVnZXIuWkVSTykmJiF0aGlzLnkudG9CaWdJbnRlZ2VyKCkuZXF1YWxzKEJpZ0ludGVnZXIuWkVSTyl9ZnVuY3Rpb24gcG9pbnRGcE5lZ2F0ZSgpe3JldHVybiBuZXcgRUNQb2ludEZwKHRoaXMuY3VydmUsdGhpcy54LHRoaXMueS5uZWdhdGUoKSx0aGlzLnopfWZ1bmN0aW9uIHBvaW50RnBBZGQobCl7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiBsfWlmKGwuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpc312YXIgcD1sLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkobC56KSkubW9kKHRoaXMuY3VydmUucSk7dmFyIG89bC54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KGwueikpLm1vZCh0aGlzLmN1cnZlLnEpO2lmKEJpZ0ludGVnZXIuWkVSTy5lcXVhbHMobykpe2lmKEJpZ0ludGVnZXIuWkVSTy5lcXVhbHMocCkpe3JldHVybiB0aGlzLnR3aWNlKCl9cmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKX12YXIgaj1uZXcgQmlnSW50ZWdlcigiMyIpO3ZhciBlPXRoaXMueC50b0JpZ0ludGVnZXIoKTt2YXIgbj10aGlzLnkudG9CaWdJbnRlZ2VyKCk7dmFyIGM9bC54LnRvQmlnSW50ZWdlcigpO3ZhciBrPWwueS50b0JpZ0ludGVnZXIoKTt2YXIgbT1vLnNxdWFyZSgpO3ZhciBpPW0ubXVsdGlwbHkobyk7dmFyIGQ9ZS5tdWx0aXBseShtKTt2YXIgZz1wLnNxdWFyZSgpLm11bHRpcGx5KHRoaXMueik7dmFyIGE9Zy5zdWJ0cmFjdChkLnNoaWZ0TGVmdCgxKSkubXVsdGlwbHkobC56KS5zdWJ0cmFjdChpKS5tdWx0aXBseShvKS5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgaD1kLm11bHRpcGx5KGopLm11bHRpcGx5KHApLnN1YnRyYWN0KG4ubXVsdGlwbHkoaSkpLnN1YnRyYWN0KGcubXVsdGlwbHkocCkpLm11bHRpcGx5KGwueikuYWRkKHAubXVsdGlwbHkoaSkpLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBmPWkubXVsdGlwbHkodGhpcy56KS5tdWx0aXBseShsLnopLm1vZCh0aGlzLmN1cnZlLnEpO3JldHVybiBuZXcgRUNQb2ludEZwKHRoaXMuY3VydmUsdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihhKSx0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKGgpLGYpfWZ1bmN0aW9uIHBvaW50RnBUd2ljZSgpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpc31pZih0aGlzLnkudG9CaWdJbnRlZ2VyKCkuc2lnbnVtKCk9PTApe3JldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCl9dmFyIGc9bmV3IEJpZ0ludGVnZXIoIjMiKTt2YXIgYz10aGlzLngudG9CaWdJbnRlZ2VyKCk7dmFyIGg9dGhpcy55LnRvQmlnSW50ZWdlcigpO3ZhciBlPWgubXVsdGlwbHkodGhpcy56KTt2YXIgaj1lLm11bHRpcGx5KGgpLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBpPXRoaXMuY3VydmUuYS50b0JpZ0ludGVnZXIoKTt2YXIgaz1jLnNxdWFyZSgpLm11bHRpcGx5KGcpO2lmKCFCaWdJbnRlZ2VyLlpFUk8uZXF1YWxzKGkpKXtrPWsuYWRkKHRoaXMuei5zcXVhcmUoKS5tdWx0aXBseShpKSl9az1rLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBiPWsuc3F1YXJlKCkuc3VidHJhY3QoYy5zaGlmdExlZnQoMykubXVsdGlwbHkoaikpLnNoaWZ0TGVmdCgxKS5tdWx0aXBseShlKS5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgZj1rLm11bHRpcGx5KGcpLm11bHRpcGx5KGMpLnN1YnRyYWN0KGouc2hpZnRMZWZ0KDEpKS5zaGlmdExlZnQoMikubXVsdGlwbHkoaikuc3VidHJhY3Qoay5zcXVhcmUoKS5tdWx0aXBseShrKSkubW9kKHRoaXMuY3VydmUucSk7dmFyIGQ9ZS5zcXVhcmUoKS5tdWx0aXBseShlKS5zaGlmdExlZnQoMykubW9kKHRoaXMuY3VydmUucSk7cmV0dXJuIG5ldyBFQ1BvaW50RnAodGhpcy5jdXJ2ZSx0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKGIpLHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoZiksZCl9ZnVuY3Rpb24gcG9pbnRGcE11bHRpcGx5KGIpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpc31pZihiLnNpZ251bSgpPT0wKXtyZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpfXZhciBnPWI7dmFyIGY9Zy5tdWx0aXBseShuZXcgQmlnSW50ZWdlcigiMyIpKTt2YXIgbD10aGlzLm5lZ2F0ZSgpO3ZhciBkPXRoaXM7dmFyIGM7Zm9yKGM9Zi5iaXRMZW5ndGgoKS0yO2M+MDstLWMpe2Q9ZC50d2ljZSgpO3ZhciBhPWYudGVzdEJpdChjKTt2YXIgaj1nLnRlc3RCaXQoYyk7aWYoYSE9ail7ZD1kLmFkZChhP3RoaXM6bCl9fXJldHVybiBkfWZ1bmN0aW9uIHBvaW50RnBNdWx0aXBseVR3byhjLGEsYil7dmFyIGQ7aWYoYy5iaXRMZW5ndGgoKT5iLmJpdExlbmd0aCgpKXtkPWMuYml0TGVuZ3RoKCktMX1lbHNle2Q9Yi5iaXRMZW5ndGgoKS0xfXZhciBmPXRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKTt2YXIgZT10aGlzLmFkZChhKTt3aGlsZShkPj0wKXtmPWYudHdpY2UoKTtpZihjLnRlc3RCaXQoZCkpe2lmKGIudGVzdEJpdChkKSl7Zj1mLmFkZChlKX1lbHNle2Y9Zi5hZGQodGhpcyl9fWVsc2V7aWYoYi50ZXN0Qml0KGQpKXtmPWYuYWRkKGEpfX0tLWR9cmV0dXJuIGZ9RUNQb2ludEZwLnByb3RvdHlwZS5nZXRYPXBvaW50RnBHZXRYO0VDUG9pbnRGcC5wcm90b3R5cGUuZ2V0WT1wb2ludEZwR2V0WTtFQ1BvaW50RnAucHJvdG90eXBlLmVxdWFscz1wb2ludEZwRXF1YWxzO0VDUG9pbnRGcC5wcm90b3R5cGUuaXNJbmZpbml0eT1wb2ludEZwSXNJbmZpbml0eTtFQ1BvaW50RnAucHJvdG90eXBlLm5lZ2F0ZT1wb2ludEZwTmVnYXRlO0VDUG9pbnRGcC5wcm90b3R5cGUuYWRkPXBvaW50RnBBZGQ7RUNQb2ludEZwLnByb3RvdHlwZS50d2ljZT1wb2ludEZwVHdpY2U7RUNQb2ludEZwLnByb3RvdHlwZS5tdWx0aXBseT1wb2ludEZwTXVsdGlwbHk7RUNQb2ludEZwLnByb3RvdHlwZS5tdWx0aXBseVR3bz1wb2ludEZwTXVsdGlwbHlUd287ZnVuY3Rpb24gRUNDdXJ2ZUZwKGUsZCxjKXt0aGlzLnE9ZTt0aGlzLmE9dGhpcy5mcm9tQmlnSW50ZWdlcihkKTt0aGlzLmI9dGhpcy5mcm9tQmlnSW50ZWdlcihjKTt0aGlzLmluZmluaXR5PW5ldyBFQ1BvaW50RnAodGhpcyxudWxsLG51bGwpfWZ1bmN0aW9uIGN1cnZlRnBHZXRRKCl7cmV0dXJuIHRoaXMucX1mdW5jdGlvbiBjdXJ2ZUZwR2V0QSgpe3JldHVybiB0aGlzLmF9ZnVuY3Rpb24gY3VydmVGcEdldEIoKXtyZXR1cm4gdGhpcy5ifWZ1bmN0aW9uIGN1cnZlRnBFcXVhbHMoYSl7aWYoYT09dGhpcyl7cmV0dXJuIHRydWV9cmV0dXJuKHRoaXMucS5lcXVhbHMoYS5xKSYmdGhpcy5hLmVxdWFscyhhLmEpJiZ0aGlzLmIuZXF1YWxzKGEuYikpfWZ1bmN0aW9uIGN1cnZlRnBHZXRJbmZpbml0eSgpe3JldHVybiB0aGlzLmluZmluaXR5fWZ1bmN0aW9uIGN1cnZlRnBGcm9tQmlnSW50ZWdlcihhKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLGEpfWZ1bmN0aW9uIGN1cnZlRnBEZWNvZGVQb2ludEhleChkKXtzd2l0Y2gocGFyc2VJbnQoZC5zdWJzdHIoMCwyKSwxNikpe2Nhc2UgMDpyZXR1cm4gdGhpcy5pbmZpbml0eTtjYXNlIDI6Y2FzZSAzOnJldHVybiBudWxsO2Nhc2UgNDpjYXNlIDY6Y2FzZSA3OnZhciBhPShkLmxlbmd0aC0yKS8yO3ZhciBjPWQuc3Vic3RyKDIsYSk7dmFyIGI9ZC5zdWJzdHIoYSsyLGEpO3JldHVybiBuZXcgRUNQb2ludEZwKHRoaXMsdGhpcy5mcm9tQmlnSW50ZWdlcihuZXcgQmlnSW50ZWdlcihjLDE2KSksdGhpcy5mcm9tQmlnSW50ZWdlcihuZXcgQmlnSW50ZWdlcihiLDE2KSkpO2RlZmF1bHQ6cmV0dXJuIG51bGx9fUVDQ3VydmVGcC5wcm90b3R5cGUuZ2V0UT1jdXJ2ZUZwR2V0UTtFQ0N1cnZlRnAucHJvdG90eXBlLmdldEE9Y3VydmVGcEdldEE7RUNDdXJ2ZUZwLnByb3RvdHlwZS5nZXRCPWN1cnZlRnBHZXRCO0VDQ3VydmVGcC5wcm90b3R5cGUuZXF1YWxzPWN1cnZlRnBFcXVhbHM7RUNDdXJ2ZUZwLnByb3RvdHlwZS5nZXRJbmZpbml0eT1jdXJ2ZUZwR2V0SW5maW5pdHk7RUNDdXJ2ZUZwLnByb3RvdHlwZS5mcm9tQmlnSW50ZWdlcj1jdXJ2ZUZwRnJvbUJpZ0ludGVnZXI7RUNDdXJ2ZUZwLnByb3RvdHlwZS5kZWNvZGVQb2ludEhleD1jdXJ2ZUZwRGVjb2RlUG9pbnRIZXg7Ci8qISAoYykgU3RlZmFuIFRob21hcyB8IGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luanMvYml0Y29pbmpzLWxpYgogKi8KRUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUuZ2V0Qnl0ZUxlbmd0aD1mdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKCh0aGlzLnRvQmlnSW50ZWdlcigpLmJpdExlbmd0aCgpKzcpLzgpfTtFQ1BvaW50RnAucHJvdG90eXBlLmdldEVuY29kZWQ9ZnVuY3Rpb24oYyl7dmFyIGQ9ZnVuY3Rpb24oaCxmKXt2YXIgZz1oLnRvQnl0ZUFycmF5VW5zaWduZWQoKTtpZihmPGcubGVuZ3RoKXtnPWcuc2xpY2UoZy5sZW5ndGgtZil9ZWxzZXt3aGlsZShmPmcubGVuZ3RoKXtnLnVuc2hpZnQoMCl9fXJldHVybiBnfTt2YXIgYT10aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKTt2YXIgZT10aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKTt2YXIgYj1kKGEsMzIpO2lmKGMpe2lmKGUuaXNFdmVuKCkpe2IudW5zaGlmdCgyKX1lbHNle2IudW5zaGlmdCgzKX19ZWxzZXtiLnVuc2hpZnQoNCk7Yj1iLmNvbmNhdChkKGUsMzIpKX1yZXR1cm4gYn07RUNQb2ludEZwLmRlY29kZUZyb209ZnVuY3Rpb24oZyxjKXt2YXIgZj1jWzBdO3ZhciBlPWMubGVuZ3RoLTE7dmFyIGQ9Yy5zbGljZSgxLDErZS8yKTt2YXIgYj1jLnNsaWNlKDErZS8yLDErZSk7ZC51bnNoaWZ0KDApO2IudW5zaGlmdCgwKTt2YXIgYT1uZXcgQmlnSW50ZWdlcihkKTt2YXIgaD1uZXcgQmlnSW50ZWdlcihiKTtyZXR1cm4gbmV3IEVDUG9pbnRGcChnLGcuZnJvbUJpZ0ludGVnZXIoYSksZy5mcm9tQmlnSW50ZWdlcihoKSl9O0VDUG9pbnRGcC5kZWNvZGVGcm9tSGV4PWZ1bmN0aW9uKGcsYyl7dmFyIGY9Yy5zdWJzdHIoMCwyKTt2YXIgZT1jLmxlbmd0aC0yO3ZhciBkPWMuc3Vic3RyKDIsZS8yKTt2YXIgYj1jLnN1YnN0cigyK2UvMixlLzIpO3ZhciBhPW5ldyBCaWdJbnRlZ2VyKGQsMTYpO3ZhciBoPW5ldyBCaWdJbnRlZ2VyKGIsMTYpO3JldHVybiBuZXcgRUNQb2ludEZwKGcsZy5mcm9tQmlnSW50ZWdlcihhKSxnLmZyb21CaWdJbnRlZ2VyKGgpKX07RUNQb2ludEZwLnByb3RvdHlwZS5hZGQyRD1mdW5jdGlvbihjKXtpZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIGN9aWYoYy5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzfWlmKHRoaXMueC5lcXVhbHMoYy54KSl7aWYodGhpcy55LmVxdWFscyhjLnkpKXtyZXR1cm4gdGhpcy50d2ljZSgpfXJldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCl9dmFyIGc9Yy54LnN1YnRyYWN0KHRoaXMueCk7dmFyIGU9Yy55LnN1YnRyYWN0KHRoaXMueSk7dmFyIGE9ZS5kaXZpZGUoZyk7dmFyIGQ9YS5zcXVhcmUoKS5zdWJ0cmFjdCh0aGlzLngpLnN1YnRyYWN0KGMueCk7dmFyIGY9YS5tdWx0aXBseSh0aGlzLnguc3VidHJhY3QoZCkpLnN1YnRyYWN0KHRoaXMueSk7cmV0dXJuIG5ldyBFQ1BvaW50RnAodGhpcy5jdXJ2ZSxkLGYpfTtFQ1BvaW50RnAucHJvdG90eXBlLnR3aWNlMkQ9ZnVuY3Rpb24oKXtpZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9aWYodGhpcy55LnRvQmlnSW50ZWdlcigpLnNpZ251bSgpPT0wKXtyZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpfXZhciBiPXRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoQmlnSW50ZWdlci52YWx1ZU9mKDIpKTt2YXIgZT10aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKEJpZ0ludGVnZXIudmFsdWVPZigzKSk7dmFyIGE9dGhpcy54LnNxdWFyZSgpLm11bHRpcGx5KGUpLmFkZCh0aGlzLmN1cnZlLmEpLmRpdmlkZSh0aGlzLnkubXVsdGlwbHkoYikpO3ZhciBjPWEuc3F1YXJlKCkuc3VidHJhY3QodGhpcy54Lm11bHRpcGx5KGIpKTt2YXIgZD1hLm11bHRpcGx5KHRoaXMueC5zdWJ0cmFjdChjKSkuc3VidHJhY3QodGhpcy55KTtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLmN1cnZlLGMsZCl9O0VDUG9pbnRGcC5wcm90b3R5cGUubXVsdGlwbHkyRD1mdW5jdGlvbihiKXtpZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9aWYoYi5zaWdudW0oKT09MCl7cmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKX12YXIgZz1iO3ZhciBmPWcubXVsdGlwbHkobmV3IEJpZ0ludGVnZXIoIjMiKSk7dmFyIGw9dGhpcy5uZWdhdGUoKTt2YXIgZD10aGlzO3ZhciBjO2ZvcihjPWYuYml0TGVuZ3RoKCktMjtjPjA7LS1jKXtkPWQudHdpY2UoKTt2YXIgYT1mLnRlc3RCaXQoYyk7dmFyIGo9Zy50ZXN0Qml0KGMpO2lmKGEhPWope2Q9ZC5hZGQyRChhP3RoaXM6bCl9fXJldHVybiBkfTtFQ1BvaW50RnAucHJvdG90eXBlLmlzT25DdXJ2ZT1mdW5jdGlvbigpe3ZhciBkPXRoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpO3ZhciBpPXRoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpO3ZhciBmPXRoaXMuY3VydmUuZ2V0QSgpLnRvQmlnSW50ZWdlcigpO3ZhciBjPXRoaXMuY3VydmUuZ2V0QigpLnRvQmlnSW50ZWdlcigpO3ZhciBoPXRoaXMuY3VydmUuZ2V0USgpO3ZhciBlPWkubXVsdGlwbHkoaSkubW9kKGgpO3ZhciBnPWQubXVsdGlwbHkoZCkubXVsdGlwbHkoZCkuYWRkKGYubXVsdGlwbHkoZCkpLmFkZChjKS5tb2QoaCk7cmV0dXJuIGUuZXF1YWxzKGcpfTtFQ1BvaW50RnAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIigiK3RoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLnRvU3RyaW5nKCkrIiwiK3RoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpLnRvU3RyaW5nKCkrIikifTtFQ1BvaW50RnAucHJvdG90eXBlLnZhbGlkYXRlPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5jdXJ2ZS5nZXRRKCk7aWYodGhpcy5pc0luZmluaXR5KCkpe3Rocm93IG5ldyBFcnJvcigiUG9pbnQgaXMgYXQgaW5maW5pdHkuIil9dmFyIGE9dGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGI9dGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCk7aWYoYS5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpPDB8fGEuY29tcGFyZVRvKGMuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpKT4wKXt0aHJvdyBuZXcgRXJyb3IoInggY29vcmRpbmF0ZSBvdXQgb2YgYm91bmRzIil9aWYoYi5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpPDB8fGIuY29tcGFyZVRvKGMuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpKT4wKXt0aHJvdyBuZXcgRXJyb3IoInkgY29vcmRpbmF0ZSBvdXQgb2YgYm91bmRzIil9aWYoIXRoaXMuaXNPbkN1cnZlKCkpe3Rocm93IG5ldyBFcnJvcigiUG9pbnQgaXMgbm90IG9uIHRoZSBjdXJ2ZS4iKX1pZih0aGlzLm11bHRpcGx5KGMpLmlzSW5maW5pdHkoKSl7dGhyb3cgbmV3IEVycm9yKCJQb2ludCBpcyBub3QgYSBzY2FsYXIgbXVsdGlwbGUgb2YgRy4iKX1yZXR1cm4gdHJ1ZX07Ci8qISBNaWtlIFNhbXVlbCAoYykgMjAwOSB8IGNvZGUuZ29vZ2xlLmNvbS9wL2pzb24tc2Fucy1ldmFsCiAqLwp2YXIganNvblBhcnNlPShmdW5jdGlvbigpe3ZhciBlPSIoPzotP1xcYig/OjB8WzEtOV1bMC05XSopKD86XFwuWzAtOV0rKT8oPzpbZUVdWystXT9bMC05XSspP1xcYikiO3ZhciBqPScoPzpbXlxcMC1cXHgwOFxceDBhLVxceDFmIlxcXFxdfFxcXFwoPzpbIi9cXFxcYmZucnRdfHVbMC05QS1GYS1mXXs0fSkpJzt2YXIgaT0nKD86IicraisnKiIpJzt2YXIgZD1uZXcgUmVnRXhwKCIoPzpmYWxzZXx0cnVlfG51bGx8W1xce1xcfVxcW1xcXV18IitlKyJ8IitpKyIpIiwiZyIpO3ZhciBrPW5ldyBSZWdFeHAoIlxcXFwoPzooW151XSl8dSguezR9KSkiLCJnIik7dmFyIGc9eyciJzonIicsIi8iOiIvIiwiXFwiOiJcXCIsYjoiXGIiLGY6IlxmIixuOiJcbiIscjoiXHIiLHQ6Ilx0In07ZnVuY3Rpb24gaChsLG0sbil7cmV0dXJuIG0/Z1ttXTpTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG4sMTYpKX12YXIgYz1uZXcgU3RyaW5nKCIiKTt2YXIgYT0iXFwiO3ZhciBmPXsieyI6T2JqZWN0LCJbIjpBcnJheX07dmFyIGI9T2JqZWN0Lmhhc093blByb3BlcnR5O3JldHVybiBmdW5jdGlvbih1LHEpe3ZhciBwPXUubWF0Y2goZCk7dmFyIHg7dmFyIHY9cFswXTt2YXIgbD1mYWxzZTtpZigieyI9PT12KXt4PXt9fWVsc2V7aWYoIlsiPT09dil7eD1bXX1lbHNle3g9W107bD10cnVlfX12YXIgdDt2YXIgcj1beF07Zm9yKHZhciBvPTEtbCxtPXAubGVuZ3RoO288bTsrK28pe3Y9cFtvXTt2YXIgdztzd2l0Y2godi5jaGFyQ29kZUF0KDApKXtkZWZhdWx0Onc9clswXTt3W3R8fHcubGVuZ3RoXT0rKHYpO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMzQ6dj12LnN1YnN0cmluZygxLHYubGVuZ3RoLTEpO2lmKHYuaW5kZXhPZihhKSE9PS0xKXt2PXYucmVwbGFjZShrLGgpfXc9clswXTtpZighdCl7aWYodyBpbnN0YW5jZW9mIEFycmF5KXt0PXcubGVuZ3RofWVsc2V7dD12fHxjO2JyZWFrfX13W3RdPXY7dD12b2lkIDA7YnJlYWs7Y2FzZSA5MTp3PXJbMF07ci51bnNoaWZ0KHdbdHx8dy5sZW5ndGhdPVtdKTt0PXZvaWQgMDticmVhaztjYXNlIDkzOnIuc2hpZnQoKTticmVhaztjYXNlIDEwMjp3PXJbMF07d1t0fHx3Lmxlbmd0aF09ZmFsc2U7dD12b2lkIDA7YnJlYWs7Y2FzZSAxMTA6dz1yWzBdO3dbdHx8dy5sZW5ndGhdPW51bGw7dD12b2lkIDA7YnJlYWs7Y2FzZSAxMTY6dz1yWzBdO3dbdHx8dy5sZW5ndGhdPXRydWU7dD12b2lkIDA7YnJlYWs7Y2FzZSAxMjM6dz1yWzBdO3IudW5zaGlmdCh3W3R8fHcubGVuZ3RoXT17fSk7dD12b2lkIDA7YnJlYWs7Y2FzZSAxMjU6ci5zaGlmdCgpO2JyZWFrfX1pZihsKXtpZihyLmxlbmd0aCE9PTEpe3Rocm93IG5ldyBFcnJvcigpfXg9eFswXX1lbHNle2lmKHIubGVuZ3RoKXt0aHJvdyBuZXcgRXJyb3IoKX19aWYocSl7dmFyIHM9ZnVuY3Rpb24oQyxCKXt2YXIgRD1DW0JdO2lmKEQmJnR5cGVvZiBEPT09Im9iamVjdCIpe3ZhciBuPW51bGw7Zm9yKHZhciB6IGluIEQpe2lmKGIuY2FsbChELHopJiZEIT09Qyl7dmFyIHk9cyhELHopO2lmKHkhPT12b2lkIDApe0Rbel09eX1lbHNle2lmKCFuKXtuPVtdfW4ucHVzaCh6KX19fWlmKG4pe2Zvcih2YXIgQT1uLmxlbmd0aDstLUE+PTA7KXtkZWxldGUgRFtuW0FdXX19fXJldHVybiBxLmNhbGwoQyxCLEQpfTt4PXMoeyIiOnh9LCIiKX1yZXR1cm4geH19KSgpOwovKiEgYXNuMS0xLjAuOS5qcyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319S0pVUi5hc24xLkFTTjFVdGlsPW5ldyBmdW5jdGlvbigpe3RoaXMuaW50ZWdlclRvQnl0ZUhleD1mdW5jdGlvbihhKXt2YXIgYj1hLnRvU3RyaW5nKDE2KTtpZigoYi5sZW5ndGglMik9PTEpe2I9IjAiK2J9cmV0dXJuIGJ9O3RoaXMuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXg9ZnVuY3Rpb24oail7dmFyIGY9ai50b1N0cmluZygxNik7aWYoZi5zdWJzdHIoMCwxKSE9Ii0iKXtpZihmLmxlbmd0aCUyPT0xKXtmPSIwIitmfWVsc2V7aWYoIWYubWF0Y2goL15bMC03XS8pKXtmPSIwMCIrZn19fWVsc2V7dmFyIGE9Zi5zdWJzdHIoMSk7dmFyIGU9YS5sZW5ndGg7aWYoZSUyPT0xKXtlKz0xfWVsc2V7aWYoIWYubWF0Y2goL15bMC03XS8pKXtlKz0yfX12YXIgZz0iIjtmb3IodmFyIGQ9MDtkPGU7ZCsrKXtnKz0iZiJ9dmFyIGM9bmV3IEJpZ0ludGVnZXIoZywxNik7dmFyIGI9Yy54b3IoaikuYWRkKEJpZ0ludGVnZXIuT05FKTtmPWIudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14tLywiIil9cmV0dXJuIGZ9O3RoaXMuZ2V0UEVNU3RyaW5nRnJvbUhleD1mdW5jdGlvbihhLGIpe3ZhciBjPUtKVVIuYXNuMTt2YXIgZj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGEpO3ZhciBkPUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KGYpO3ZhciBlPWQucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtlPWUucmVwbGFjZSgvXHJcbiQvLCIiKTtyZXR1cm4iLS0tLS1CRUdJTiAiK2IrIi0tLS0tXHJcbiIrZSsiXHJcbi0tLS0tRU5EICIrYisiLS0tLS1cclxuIn07dGhpcy5uZXdPYmplY3Q9ZnVuY3Rpb24oYil7dmFyIGc9S0pVUi5hc24xO3ZhciBrPU9iamVjdC5rZXlzKGIpO2lmKGsubGVuZ3RoIT0xKXt0aHJvdyJrZXkgb2YgcGFyYW0gc2hhbGwgYmUgb25seSBvbmUuIn12YXIgaj1rWzBdO2lmKCI6Ym9vbDppbnQ6Yml0c3RyOm9jdHN0cjpudWxsOm9pZDplbnVtOnV0ZjhzdHI6bnVtc3RyOnBybnN0cjp0ZWxzdHI6aWE1c3RyOnV0Y3RpbWU6Z2VudGltZTpzZXE6c2V0OnRhZzoiLmluZGV4T2YoIjoiK2orIjoiKT09LTEpe3Rocm93InVuZGVmaW5lZCBrZXk6ICIran1pZihqPT0iYm9vbCIpe3JldHVybiBuZXcgZy5ERVJCb29sZWFuKGJbal0pfWlmKGo9PSJpbnQiKXtyZXR1cm4gbmV3IGcuREVSSW50ZWdlcihiW2pdKX1pZihqPT0iYml0c3RyIil7cmV0dXJuIG5ldyBnLkRFUkJpdFN0cmluZyhiW2pdKX1pZihqPT0ib2N0c3RyIil7cmV0dXJuIG5ldyBnLkRFUk9jdGV0U3RyaW5nKGJbal0pfWlmKGo9PSJudWxsIil7cmV0dXJuIG5ldyBnLkRFUk51bGwoYltqXSl9aWYoaj09Im9pZCIpe3JldHVybiBuZXcgZy5ERVJPYmplY3RJZGVudGlmaWVyKGJbal0pfWlmKGo9PSJlbnVtIil7cmV0dXJuIG5ldyBnLkRFUkVudW1lcmF0ZWQoYltqXSl9aWYoaj09InV0ZjhzdHIiKXtyZXR1cm4gbmV3IGcuREVSVVRGOFN0cmluZyhiW2pdKX1pZihqPT0ibnVtc3RyIil7cmV0dXJuIG5ldyBnLkRFUk51bWVyaWNTdHJpbmcoYltqXSl9aWYoaj09InBybnN0ciIpe3JldHVybiBuZXcgZy5ERVJQcmludGFibGVTdHJpbmcoYltqXSl9aWYoaj09InRlbHN0ciIpe3JldHVybiBuZXcgZy5ERVJUZWxldGV4U3RyaW5nKGJbal0pfWlmKGo9PSJpYTVzdHIiKXtyZXR1cm4gbmV3IGcuREVSSUE1U3RyaW5nKGJbal0pfWlmKGo9PSJ1dGN0aW1lIil7cmV0dXJuIG5ldyBnLkRFUlVUQ1RpbWUoYltqXSl9aWYoaj09ImdlbnRpbWUiKXtyZXR1cm4gbmV3IGcuREVSR2VuZXJhbGl6ZWRUaW1lKGJbal0pfWlmKGo9PSJzZXEiKXt2YXIgbT1iW2pdO3ZhciBoPVtdO2Zvcih2YXIgZT0wO2U8bS5sZW5ndGg7ZSsrKXt2YXIgbD1nLkFTTjFVdGlsLm5ld09iamVjdChtW2VdKTtoLnB1c2gobCl9cmV0dXJuIG5ldyBnLkRFUlNlcXVlbmNlKHthcnJheTpofSl9aWYoaj09InNldCIpe3ZhciBtPWJbal07dmFyIGg9W107Zm9yKHZhciBlPTA7ZTxtLmxlbmd0aDtlKyspe3ZhciBsPWcuQVNOMVV0aWwubmV3T2JqZWN0KG1bZV0pO2gucHVzaChsKX1yZXR1cm4gbmV3IGcuREVSU2V0KHthcnJheTpofSl9aWYoaj09InRhZyIpe3ZhciBjPWJbal07aWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGMpPT09IltvYmplY3QgQXJyYXldIiYmYy5sZW5ndGg9PTMpe3ZhciBkPWcuQVNOMVV0aWwubmV3T2JqZWN0KGNbMl0pO3JldHVybiBuZXcgZy5ERVJUYWdnZWRPYmplY3Qoe3RhZzpjWzBdLGV4cGxpY2l0OmNbMV0sb2JqOmR9KX1lbHNle3ZhciBmPXt9O2lmKGMuZXhwbGljaXQhPT11bmRlZmluZWQpe2YuZXhwbGljaXQ9Yy5leHBsaWNpdH1pZihjLnRhZyE9PXVuZGVmaW5lZCl7Zi50YWc9Yy50YWd9aWYoYy5vYmo9PT11bmRlZmluZWQpe3Rocm93Im9iaiBzaGFsbCBiZSBzcGVjaWZpZWQgZm9yICd0YWcnLiJ9Zi5vYmo9Zy5BU04xVXRpbC5uZXdPYmplY3QoYy5vYmopO3JldHVybiBuZXcgZy5ERVJUYWdnZWRPYmplY3QoZil9fX07dGhpcy5qc29uVG9BU04xSEVYPWZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubmV3T2JqZWN0KGIpO3JldHVybiBhLmdldEVuY29kZWRIZXgoKX19O0tKVVIuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludD1mdW5jdGlvbihhKXt2YXIgaj0iIjt2YXIgaz1wYXJzZUludChhLnN1YnN0cigwLDIpLDE2KTt2YXIgZD1NYXRoLmZsb29yKGsvNDApO3ZhciBjPWslNDA7dmFyIGo9ZCsiLiIrYzt2YXIgZT0iIjtmb3IodmFyIGY9MjtmPGEubGVuZ3RoO2YrPTIpe3ZhciBnPXBhcnNlSW50KGEuc3Vic3RyKGYsMiksMTYpO3ZhciBoPSgiMDAwMDAwMDAiK2cudG9TdHJpbmcoMikpLnNsaWNlKC04KTtlPWUraC5zdWJzdHIoMSw3KTtpZihoLnN1YnN0cigwLDEpPT0iMCIpe3ZhciBiPW5ldyBCaWdJbnRlZ2VyKGUsMik7aj1qKyIuIitiLnRvU3RyaW5nKDEwKTtlPSIifX1yZXR1cm4gan07S0pVUi5hc24xLkFTTjFVdGlsLm9pZEludFRvSGV4PWZ1bmN0aW9uKGYpe3ZhciBlPWZ1bmN0aW9uKGEpe3ZhciBrPWEudG9TdHJpbmcoMTYpO2lmKGsubGVuZ3RoPT0xKXtrPSIwIitrfXJldHVybiBrfTt2YXIgZD1mdW5jdGlvbihvKXt2YXIgbj0iIjt2YXIgaz1uZXcgQmlnSW50ZWdlcihvLDEwKTt2YXIgYT1rLnRvU3RyaW5nKDIpO3ZhciBsPTctYS5sZW5ndGglNztpZihsPT03KXtsPTB9dmFyIHE9IiI7Zm9yKHZhciBtPTA7bTxsO20rKyl7cSs9IjAifWE9cSthO2Zvcih2YXIgbT0wO208YS5sZW5ndGgtMTttKz03KXt2YXIgcD1hLnN1YnN0cihtLDcpO2lmKG0hPWEubGVuZ3RoLTcpe3A9IjEiK3B9bis9ZShwYXJzZUludChwLDIpKX1yZXR1cm4gbn07aWYoIWYubWF0Y2goL15bMC05Ll0rJC8pKXt0aHJvdyJtYWxmb3JtZWQgb2lkIHN0cmluZzogIitmfXZhciBnPSIiO3ZhciBiPWYuc3BsaXQoIi4iKTt2YXIgaj1wYXJzZUludChiWzBdKSo0MCtwYXJzZUludChiWzFdKTtnKz1lKGopO2Iuc3BsaWNlKDAsMik7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe2crPWQoYltjXSl9cmV0dXJuIGd9O0tKVVIuYXNuMS5BU04xT2JqZWN0PWZ1bmN0aW9uKCl7dmFyIGM9dHJ1ZTt2YXIgYj1udWxsO3ZhciBkPSIwMCI7dmFyIGU9IjAwIjt2YXIgYT0iIjt0aGlzLmdldExlbmd0aEhleEZyb21WYWx1ZT1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLmhWPT0idW5kZWZpbmVkInx8dGhpcy5oVj09bnVsbCl7dGhyb3cidGhpcy5oViBpcyBudWxsIG9yIHVuZGVmaW5lZC4ifWlmKHRoaXMuaFYubGVuZ3RoJTI9PTEpe3Rocm93InZhbHVlIGhleCBtdXN0IGJlIGV2ZW4gbGVuZ3RoOiBuPSIrYS5sZW5ndGgrIix2PSIrdGhpcy5oVn12YXIgaT10aGlzLmhWLmxlbmd0aC8yO3ZhciBoPWkudG9TdHJpbmcoMTYpO2lmKGgubGVuZ3RoJTI9PTEpe2g9IjAiK2h9aWYoaTwxMjgpe3JldHVybiBofWVsc2V7dmFyIGc9aC5sZW5ndGgvMjtpZihnPjE1KXt0aHJvdyJBU04uMSBsZW5ndGggdG9vIGxvbmcgdG8gcmVwcmVzZW50IGJ5IDh4OiBuID0gIitpLnRvU3RyaW5nKDE2KX12YXIgZj0xMjgrZztyZXR1cm4gZi50b1N0cmluZygxNikraH19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuaFRMVj09bnVsbHx8dGhpcy5pc01vZGlmaWVkKXt0aGlzLmhWPXRoaXMuZ2V0RnJlc2hWYWx1ZUhleCgpO3RoaXMuaEw9dGhpcy5nZXRMZW5ndGhIZXhGcm9tVmFsdWUoKTt0aGlzLmhUTFY9dGhpcy5oVCt0aGlzLmhMK3RoaXMuaFY7dGhpcy5pc01vZGlmaWVkPWZhbHNlfXJldHVybiB0aGlzLmhUTFZ9O3RoaXMuZ2V0VmFsdWVIZXg9ZnVuY3Rpb24oKXt0aGlzLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVn07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIiJ9fTtLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmc9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBhPW51bGw7dGhpcy5nZXRTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfTt0aGlzLnNldFN0cmluZz1mdW5jdGlvbihkKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLnM9ZDt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfTt0aGlzLnNldFN0cmluZ0hleD1mdW5jdGlvbihkKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLnM9bnVsbDt0aGlzLmhWPWR9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ic3RyaW5nIil7dGhpcy5zZXRTdHJpbmcoYyl9ZWxzZXtpZih0eXBlb2YgYy5zdHIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldFN0cmluZyhjLnN0cil9ZWxzZXtpZih0eXBlb2YgYy5oZXghPSJ1bmRlZmluZWQiKXt0aGlzLnNldFN0cmluZ0hleChjLmhleCl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJBYnN0cmFjdFRpbWU9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLkRFUkFic3RyYWN0VGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3RoaXMubG9jYWxEYXRlVG9VVEM9ZnVuY3Rpb24oZil7dXRjPWYuZ2V0VGltZSgpKyhmLmdldFRpbWV6b25lT2Zmc2V0KCkqNjAwMDApO3ZhciBlPW5ldyBEYXRlKHV0Yyk7cmV0dXJuIGV9O3RoaXMuZm9ybWF0RGF0ZT1mdW5jdGlvbihtLG8sZSl7dmFyIGc9dGhpcy56ZXJvUGFkZGluZzt2YXIgbj10aGlzLmxvY2FsRGF0ZVRvVVRDKG0pO3ZhciBwPVN0cmluZyhuLmdldEZ1bGxZZWFyKCkpO2lmKG89PSJ1dGMiKXtwPXAuc3Vic3RyKDIsMil9dmFyIGw9ZyhTdHJpbmcobi5nZXRNb250aCgpKzEpLDIpO3ZhciBxPWcoU3RyaW5nKG4uZ2V0RGF0ZSgpKSwyKTt2YXIgaD1nKFN0cmluZyhuLmdldEhvdXJzKCkpLDIpO3ZhciBpPWcoU3RyaW5nKG4uZ2V0TWludXRlcygpKSwyKTt2YXIgaj1nKFN0cmluZyhuLmdldFNlY29uZHMoKSksMik7dmFyIHI9cCtsK3EraCtpK2o7aWYoZT09PXRydWUpe3ZhciBmPW4uZ2V0TWlsbGlzZWNvbmRzKCk7aWYoZiE9MCl7dmFyIGs9ZyhTdHJpbmcoZiksMyk7az1rLnJlcGxhY2UoL1swXSskLywiIik7cj1yKyIuIitrfX1yZXR1cm4gcisiWiJ9O3RoaXMuemVyb1BhZGRpbmc9ZnVuY3Rpb24oZSxkKXtpZihlLmxlbmd0aD49ZCl7cmV0dXJuIGV9cmV0dXJuIG5ldyBBcnJheShkLWUubGVuZ3RoKzEpLmpvaW4oIjAiKStlfTt0aGlzLmdldFN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN9O3RoaXMuc2V0U3RyaW5nPWZ1bmN0aW9uKGQpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMucz1kO3RoaXMuaFY9c3RvaGV4KGQpfTt0aGlzLnNldEJ5RGF0ZVZhbHVlPWZ1bmN0aW9uKGgsaixlLGQsZixnKXt2YXIgaT1uZXcgRGF0ZShEYXRlLlVUQyhoLGotMSxlLGQsZixnLDApKTt0aGlzLnNldEJ5RGF0ZShpKX07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RUaW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9bnVsbDt0aGlzLnNldEJ5QVNOMU9iamVjdEFycmF5PWZ1bmN0aW9uKGMpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMuYXNuMUFycmF5PWN9O3RoaXMuYXBwZW5kQVNOMU9iamVjdD1mdW5jdGlvbihjKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmFzbjFBcnJheS5wdXNoKGMpfTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmFycmF5IT0idW5kZWZpbmVkIil7dGhpcy5hc24xQXJyYXk9Yi5hcnJheX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuREVSQm9vbGVhbj1mdW5jdGlvbigpe0tKVVIuYXNuMS5ERVJCb29sZWFuLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwMSI7dGhpcy5oVExWPSIwMTAxZmYifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSQm9vbGVhbixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUkludGVnZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUkludGVnZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9IjAyIjt0aGlzLnNldEJ5QmlnSW50ZWdlcj1mdW5jdGlvbihiKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmhWPUtKVVIuYXNuMS5BU04xVXRpbC5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleChiKX07dGhpcy5zZXRCeUludGVnZXI9ZnVuY3Rpb24oYyl7dmFyIGI9bmV3IEJpZ0ludGVnZXIoU3RyaW5nKGMpLDEwKTt0aGlzLnNldEJ5QmlnSW50ZWdlcihiKX07dGhpcy5zZXRWYWx1ZUhleD1mdW5jdGlvbihiKXt0aGlzLmhWPWJ9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLmJpZ2ludCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlCaWdJbnRlZ2VyKGEuYmlnaW50KX1lbHNle2lmKHR5cGVvZiBhWyJpbnQiXSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlJbnRlZ2VyKGFbImludCJdKX1lbHNle2lmKHR5cGVvZiBhPT0ibnVtYmVyIil7dGhpcy5zZXRCeUludGVnZXIoYSl9ZWxzZXtpZih0eXBlb2YgYS5oZXghPSJ1bmRlZmluZWQiKXt0aGlzLnNldFZhbHVlSGV4KGEuaGV4KX19fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSSW50ZWdlcixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUkJpdFN0cmluZz1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSQml0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwMyI7dGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHM9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj1ifTt0aGlzLnNldFVudXNlZEJpdHNBbmRIZXhWYWx1ZT1mdW5jdGlvbihiLGQpe2lmKGI8MHx8NzxiKXt0aHJvdyJ1bnVzZWQgYml0cyBzaGFsbCBiZSBmcm9tIDAgdG8gNzogdSA9ICIrYn12YXIgYz0iMCIrYjt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmhWPWMrZH07dGhpcy5zZXRCeUJpbmFyeVN0cmluZz1mdW5jdGlvbihlKXtlPWUucmVwbGFjZSgvMCskLywiIik7dmFyIGY9OC1lLmxlbmd0aCU4O2lmKGY9PTgpe2Y9MH1mb3IodmFyIGc9MDtnPD1mO2crKyl7ZSs9IjAifXZhciBqPSIiO2Zvcih2YXIgZz0wO2c8ZS5sZW5ndGgtMTtnKz04KXt2YXIgZD1lLnN1YnN0cihnLDgpO3ZhciBjPXBhcnNlSW50KGQsMikudG9TdHJpbmcoMTYpO2lmKGMubGVuZ3RoPT0xKXtjPSIwIitjfWorPWN9dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj0iMCIrZitqfTt0aGlzLnNldEJ5Qm9vbGVhbkFycmF5PWZ1bmN0aW9uKGQpe3ZhciBjPSIiO2Zvcih2YXIgYj0wO2I8ZC5sZW5ndGg7YisrKXtpZihkW2JdPT10cnVlKXtjKz0iMSJ9ZWxzZXtjKz0iMCJ9fXRoaXMuc2V0QnlCaW5hcnlTdHJpbmcoYyl9O3RoaXMubmV3RmFsc2VBcnJheT1mdW5jdGlvbihkKXt2YXIgYj1uZXcgQXJyYXkoZCk7Zm9yKHZhciBjPTA7YzxkO2MrKyl7YltjXT1mYWxzZX1yZXR1cm4gYn07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLnRvTG93ZXJDYXNlKCkubWF0Y2goL15bMC05YS1mXSskLykpe3RoaXMuc2V0SGV4VmFsdWVJbmNsdWRpbmdVbnVzZWRCaXRzKGEpfWVsc2V7aWYodHlwZW9mIGEuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHMoYS5oZXgpfWVsc2V7aWYodHlwZW9mIGEuYmluIT0idW5kZWZpbmVkIil7dGhpcy5zZXRCeUJpbmFyeVN0cmluZyhhLmJpbil9ZWxzZXtpZih0eXBlb2YgYS5hcnJheSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlCb29sZWFuQXJyYXkoYS5hcnJheSl9fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkJpdFN0cmluZyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJPY3RldFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIwNCJ9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJPY3RldFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJOdWxsPWZ1bmN0aW9uKCl7S0pVUi5hc24xLkRFUk51bGwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9IjA1Ijt0aGlzLmhUTFY9IjA1MDAifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSTnVsbCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXI9ZnVuY3Rpb24oYyl7dmFyIGI9ZnVuY3Rpb24oZCl7dmFyIGU9ZC50b1N0cmluZygxNik7aWYoZS5sZW5ndGg9PTEpe2U9IjAiK2V9cmV0dXJuIGV9O3ZhciBhPWZ1bmN0aW9uKGspe3ZhciBqPSIiO3ZhciBlPW5ldyBCaWdJbnRlZ2VyKGssMTApO3ZhciBkPWUudG9TdHJpbmcoMik7dmFyIGY9Ny1kLmxlbmd0aCU3O2lmKGY9PTcpe2Y9MH12YXIgbT0iIjtmb3IodmFyIGc9MDtnPGY7ZysrKXttKz0iMCJ9ZD1tK2Q7Zm9yKHZhciBnPTA7ZzxkLmxlbmd0aC0xO2crPTcpe3ZhciBsPWQuc3Vic3RyKGcsNyk7aWYoZyE9ZC5sZW5ndGgtNyl7bD0iMSIrbH1qKz1iKHBhcnNlSW50KGwsMikpfXJldHVybiBqfTtLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5oVD0iMDYiO3RoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24oZCl7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5zPW51bGw7dGhpcy5oVj1kfTt0aGlzLnNldFZhbHVlT2lkU3RyaW5nPWZ1bmN0aW9uKGYpe2lmKCFmLm1hdGNoKC9eWzAtOS5dKyQvKSl7dGhyb3cibWFsZm9ybWVkIG9pZCBzdHJpbmc6ICIrZn12YXIgZz0iIjt2YXIgZD1mLnNwbGl0KCIuIik7dmFyIGo9cGFyc2VJbnQoZFswXSkqNDArcGFyc2VJbnQoZFsxXSk7Zys9YihqKTtkLnNwbGljZSgwLDIpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXtnKz1hKGRbZV0pfXRoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMucz1udWxsO3RoaXMuaFY9Z307dGhpcy5zZXRWYWx1ZU5hbWU9ZnVuY3Rpb24oZSl7aWYodHlwZW9mIEtKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3RbZV0hPSJ1bmRlZmluZWQiKXt2YXIgZD1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0W2VdO3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcoZCl9ZWxzZXt0aHJvdyJERVJPYmplY3RJZGVudGlmaWVyIG9pZE5hbWUgdW5kZWZpbmVkOiAiK2V9fTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYz09InN0cmluZyImJmMubWF0Y2goL15bMC0yXS5bMC05Ll0rJC8pKXt0aGlzLnNldFZhbHVlT2lkU3RyaW5nKGMpfWVsc2V7aWYoS0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkTGlzdFtjXSE9PXVuZGVmaW5lZCl7dGhpcy5zZXRWYWx1ZU9pZFN0cmluZyhLSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0W2NdKX1lbHNle2lmKHR5cGVvZiBjLm9pZCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcoYy5vaWQpfWVsc2V7aWYodHlwZW9mIGMuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZUhleChjLmhleCl9ZWxzZXtpZih0eXBlb2YgYy5uYW1lIT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZU5hbWUoYy5uYW1lKX19fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJFbnVtZXJhdGVkPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJFbnVtZXJhdGVkLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwYSI7dGhpcy5zZXRCeUJpZ0ludGVnZXI9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj1LSlVSLmFzbjEuQVNOMVV0aWwuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXgoYil9O3RoaXMuc2V0QnlJbnRlZ2VyPWZ1bmN0aW9uKGMpe3ZhciBiPW5ldyBCaWdJbnRlZ2VyKFN0cmluZyhjKSwxMCk7dGhpcy5zZXRCeUJpZ0ludGVnZXIoYil9O3RoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24oYil7dGhpcy5oVj1ifTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYVsiaW50Il0hPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5SW50ZWdlcihhWyJpbnQiXSl9ZWxzZXtpZih0eXBlb2YgYT09Im51bWJlciIpe3RoaXMuc2V0QnlJbnRlZ2VyKGEpfWVsc2V7aWYodHlwZW9mIGEuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZUhleChhLmhleCl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSRW51bWVyYXRlZCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUlVURjhTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlVURjhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMGMifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVVRGOFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJOdW1lcmljU3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJOdW1lcmljU3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjEyIn07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUk51bWVyaWNTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJQcmludGFibGVTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMTMifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nLEtKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7S0pVUi5hc24xLkRFUlRlbGV0ZXhTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlRlbGV0ZXhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMTQifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVGVsZXRleFN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJJQTVTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUklBNVN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIxNiJ9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSVVRDVGltZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSVVRDVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIxNyI7dGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5kYXRlPWI7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsInV0YyIpO3RoaXMuaFY9c3RvaGV4KHRoaXMucyl9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLmRhdGU9PSJ1bmRlZmluZWQiJiZ0eXBlb2YgdGhpcy5zPT0idW5kZWZpbmVkIil7dGhpcy5kYXRlPW5ldyBEYXRlKCk7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsInV0YyIpO3RoaXMuaFY9c3RvaGV4KHRoaXMucyl9cmV0dXJuIHRoaXMuaFZ9O2lmKGEhPT11bmRlZmluZWQpe2lmKGEuc3RyIT09dW5kZWZpbmVkKXt0aGlzLnNldFN0cmluZyhhLnN0cil9ZWxzZXtpZih0eXBlb2YgYT09InN0cmluZyImJmEubWF0Y2goL15bMC05XXsxMn1aJC8pKXt0aGlzLnNldFN0cmluZyhhKX1lbHNle2lmKGEuaGV4IT09dW5kZWZpbmVkKXt0aGlzLnNldFN0cmluZ0hleChhLmhleCl9ZWxzZXtpZihhLmRhdGUhPT11bmRlZmluZWQpe3RoaXMuc2V0QnlEYXRlKGEuZGF0ZSl9fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlVUQ1RpbWUsS0pVUi5hc24xLkRFUkFic3RyYWN0VGltZSk7S0pVUi5hc24xLkRFUkdlbmVyYWxpemVkVGltZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjE4Ijt0aGlzLndpdGhNaWxsaXM9ZmFsc2U7dGhpcy5zZXRCeURhdGU9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5kYXRlPWI7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsImdlbiIsdGhpcy53aXRoTWlsbGlzKTt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmRhdGU9PT11bmRlZmluZWQmJnRoaXMucz09PXVuZGVmaW5lZCl7dGhpcy5kYXRlPW5ldyBEYXRlKCk7dGhpcy5zPXRoaXMuZm9ybWF0RGF0ZSh0aGlzLmRhdGUsImdlbiIsdGhpcy53aXRoTWlsbGlzKTt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfXJldHVybiB0aGlzLmhWfTtpZihhIT09dW5kZWZpbmVkKXtpZihhLnN0ciE9PXVuZGVmaW5lZCl7dGhpcy5zZXRTdHJpbmcoYS5zdHIpfWVsc2V7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLm1hdGNoKC9eWzAtOV17MTR9WiQvKSl7dGhpcy5zZXRTdHJpbmcoYSl9ZWxzZXtpZihhLmhleCE9PXVuZGVmaW5lZCl7dGhpcy5zZXRTdHJpbmdIZXgoYS5oZXgpfWVsc2V7aWYoYS5kYXRlIT09dW5kZWZpbmVkKXt0aGlzLnNldEJ5RGF0ZShhLmRhdGUpfX19fWlmKGEubWlsbGlzPT09dHJ1ZSl7dGhpcy53aXRoTWlsbGlzPXRydWV9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkdlbmVyYWxpemVkVGltZSxLSlVSLmFzbjEuREVSQWJzdHJhY3RUaW1lKTtLSlVSLmFzbjEuREVSU2VxdWVuY2U9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlNlcXVlbmNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjMwIjt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYz0iIjtmb3IodmFyIGI9MDtiPHRoaXMuYXNuMUFycmF5Lmxlbmd0aDtiKyspe3ZhciBkPXRoaXMuYXNuMUFycmF5W2JdO2MrPWQuZ2V0RW5jb2RlZEhleCgpfXRoaXMuaFY9YztyZXR1cm4gdGhpcy5oVn19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKTtLSlVSLmFzbjEuREVSU2V0PWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJTZXQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMzEiO3RoaXMuc29ydEZsYWc9dHJ1ZTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYj1uZXcgQXJyYXkoKTtmb3IodmFyIGM9MDtjPHRoaXMuYXNuMUFycmF5Lmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuYXNuMUFycmF5W2NdO2IucHVzaChkLmdldEVuY29kZWRIZXgoKSl9aWYodGhpcy5zb3J0RmxhZz09dHJ1ZSl7Yi5zb3J0KCl9dGhpcy5oVj1iLmpvaW4oIiIpO3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLnNvcnRmbGFnIT0idW5kZWZpbmVkIiYmYS5zb3J0ZmxhZz09ZmFsc2Upe3RoaXMuc29ydEZsYWc9ZmFsc2V9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlNldCxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKTtLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0PWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9ImEwIjt0aGlzLmhWPSIiO3RoaXMuaXNFeHBsaWNpdD10cnVlO3RoaXMuYXNuMU9iamVjdD1udWxsO3RoaXMuc2V0QVNOMU9iamVjdD1mdW5jdGlvbihiLGMsZCl7dGhpcy5oVD1jO3RoaXMuaXNFeHBsaWNpdD1iO3RoaXMuYXNuMU9iamVjdD1kO2lmKHRoaXMuaXNFeHBsaWNpdCl7dGhpcy5oVj10aGlzLmFzbjFPYmplY3QuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlfWVsc2V7dGhpcy5oVj1udWxsO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTt0aGlzLmhUTFY9dGhpcy5oVExWLnJlcGxhY2UoL14uLi8sYyk7dGhpcy5pc01vZGlmaWVkPWZhbHNlfX07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEudGFnIT0idW5kZWZpbmVkIil7dGhpcy5oVD1hLnRhZ31pZih0eXBlb2YgYS5leHBsaWNpdCE9InVuZGVmaW5lZCIpe3RoaXMuaXNFeHBsaWNpdD1hLmV4cGxpY2l0fWlmKHR5cGVvZiBhLm9iaiE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMU9iamVjdD1hLm9iajt0aGlzLnNldEFTTjFPYmplY3QodGhpcy5pc0V4cGxpY2l0LHRoaXMuaFQsdGhpcy5hc24xT2JqZWN0KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0LEtKVVIuYXNuMS5BU04xT2JqZWN0KTsKLyohIGFzbjFoZXgtMS4xLjYuanMgKGMpIDIwMTItMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KdmFyIEFTTjFIRVg9bmV3IGZ1bmN0aW9uKCl7dGhpcy5nZXRCeXRlTGVuZ3RoT2ZMX0F0T2JqPWZ1bmN0aW9uKGIsYyl7aWYoYi5zdWJzdHJpbmcoYysyLGMrMykhPSI4Iil7cmV0dXJuIDF9dmFyIGE9cGFyc2VJbnQoYi5zdWJzdHJpbmcoYyszLGMrNCkpO2lmKGE9PTApe3JldHVybiAtMX1pZigwPGEmJmE8MTApe3JldHVybiBhKzF9cmV0dXJuIC0yfTt0aGlzLmdldEhleE9mTF9BdE9iaj1mdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuZ2V0Qnl0ZUxlbmd0aE9mTF9BdE9iaihiLGMpO2lmKGE8MSl7cmV0dXJuIiJ9cmV0dXJuIGIuc3Vic3RyaW5nKGMrMixjKzIrYSoyKX07dGhpcy5nZXRJbnRPZkxfQXRPYmo9ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLmdldEhleE9mTF9BdE9iaihjLGQpO2lmKGI9PSIiKXtyZXR1cm4gLTF9dmFyIGE7aWYocGFyc2VJbnQoYi5zdWJzdHJpbmcoMCwxKSk8OCl7YT1uZXcgQmlnSW50ZWdlcihiLDE2KX1lbHNle2E9bmV3IEJpZ0ludGVnZXIoYi5zdWJzdHJpbmcoMiksMTYpfXJldHVybiBhLmludFZhbHVlKCl9O3RoaXMuZ2V0U3RhcnRQb3NPZlZfQXRPYmo9ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzLmdldEJ5dGVMZW5ndGhPZkxfQXRPYmooYixjKTtpZihhPDApe3JldHVybiBhfXJldHVybiBjKyhhKzEpKjJ9O3RoaXMuZ2V0SGV4T2ZWX0F0T2JqPWZ1bmN0aW9uKGMsZCl7dmFyIGI9dGhpcy5nZXRTdGFydFBvc09mVl9BdE9iaihjLGQpO3ZhciBhPXRoaXMuZ2V0SW50T2ZMX0F0T2JqKGMsZCk7cmV0dXJuIGMuc3Vic3RyaW5nKGIsYithKjIpfTt0aGlzLmdldEhleE9mVExWX0F0T2JqPWZ1bmN0aW9uKGMsZSl7dmFyIGI9Yy5zdWJzdHIoZSwyKTt2YXIgZD10aGlzLmdldEhleE9mTF9BdE9iaihjLGUpO3ZhciBhPXRoaXMuZ2V0SGV4T2ZWX0F0T2JqKGMsZSk7cmV0dXJuIGIrZCthfTt0aGlzLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmo9ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKGMsZCk7dmFyIGE9dGhpcy5nZXRJbnRPZkxfQXRPYmooYyxkKTtyZXR1cm4gYithKjJ9O3RoaXMuZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqPWZ1bmN0aW9uKGYsail7dmFyIGM9bmV3IEFycmF5KCk7dmFyIGk9dGhpcy5nZXRTdGFydFBvc09mVl9BdE9iaihmLGopO2MucHVzaChpKTt2YXIgYj10aGlzLmdldEludE9mTF9BdE9iaihmLGopO3ZhciBnPWk7dmFyIGQ9MDt3aGlsZSgxKXt2YXIgZT10aGlzLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZixnKTtpZihlPT1udWxsfHwoZS1pPj0oYioyKSkpe2JyZWFrfWlmKGQ+PTIwMCl7YnJlYWt9Yy5wdXNoKGUpO2c9ZTtkKyt9cmV0dXJuIGN9O3RoaXMuZ2V0TnRoQ2hpbGRJbmRleF9BdE9iaj1mdW5jdGlvbihkLGIsZSl7dmFyIGM9dGhpcy5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxiKTtyZXR1cm4gY1tlXX07dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdD1mdW5jdGlvbihlLGQsYyl7aWYoYy5sZW5ndGg9PTApe3JldHVybiBkfXZhciBmPWMuc2hpZnQoKTt2YXIgYj10aGlzLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLGQpO3JldHVybiB0aGlzLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGUsYltmXSxjKX07dGhpcy5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3Q9ZnVuY3Rpb24oZCxjLGIpe3ZhciBhPXRoaXMuZ2V0RGVjZW5kYW50SW5kZXhCeU50aExpc3QoZCxjLGIpO3JldHVybiB0aGlzLmdldEhleE9mVExWX0F0T2JqKGQsYSl9O3RoaXMuZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdD1mdW5jdGlvbihkLGMsYil7dmFyIGE9dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChkLGMsYik7cmV0dXJuIHRoaXMuZ2V0SGV4T2ZWX0F0T2JqKGQsYSl9fTtBU04xSEVYLmdldFZieUxpc3Q9ZnVuY3Rpb24oZCxjLGIsZSl7dmFyIGE9dGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChkLGMsYik7aWYoYT09PXVuZGVmaW5lZCl7dGhyb3ciY2FuJ3QgZmluZCBudGhMaXN0IG9iamVjdCJ9aWYoZSE9PXVuZGVmaW5lZCl7aWYoZC5zdWJzdHIoYSwyKSE9ZSl7dGhyb3ciY2hlY2tpbmcgdGFnIGRvZXNuJ3QgbWF0Y2g6ICIrZC5zdWJzdHIoYSwyKSsiIT0iK2V9fXJldHVybiB0aGlzLmdldEhleE9mVl9BdE9iaihkLGEpfTtBU04xSEVYLmhleHRvb2lkc3RyPWZ1bmN0aW9uKGUpe3ZhciBoPWZ1bmN0aW9uKGIsYSl7aWYoYi5sZW5ndGg+PWEpe3JldHVybiBifXJldHVybiBuZXcgQXJyYXkoYS1iLmxlbmd0aCsxKS5qb2luKCIwIikrYn07dmFyIGw9W107dmFyIG89ZS5zdWJzdHIoMCwyKTt2YXIgZj1wYXJzZUludChvLDE2KTtsWzBdPW5ldyBTdHJpbmcoTWF0aC5mbG9vcihmLzQwKSk7bFsxXT1uZXcgU3RyaW5nKGYlNDApO3ZhciBtPWUuc3Vic3RyKDIpO3ZhciBrPVtdO2Zvcih2YXIgZz0wO2c8bS5sZW5ndGgvMjtnKyspe2sucHVzaChwYXJzZUludChtLnN1YnN0cihnKjIsMiksMTYpKX12YXIgaj1bXTt2YXIgZD0iIjtmb3IodmFyIGc9MDtnPGsubGVuZ3RoO2crKyl7aWYoa1tnXSYxMjgpe2Q9ZCtoKChrW2ddJjEyNykudG9TdHJpbmcoMiksNyl9ZWxzZXtkPWQraCgoa1tnXSYxMjcpLnRvU3RyaW5nKDIpLDcpO2oucHVzaChuZXcgU3RyaW5nKHBhcnNlSW50KGQsMikpKTtkPSIifX12YXIgbj1sLmpvaW4oIi4iKTtpZihqLmxlbmd0aD4wKXtuPW4rIi4iK2ouam9pbigiLiIpfXJldHVybiBufTtBU04xSEVYLmR1bXA9ZnVuY3Rpb24oZSxjLGssZyl7dmFyIG89ZnVuY3Rpb24odyxpKXtpZih3Lmxlbmd0aDw9aSoyKXtyZXR1cm4gd31lbHNle3ZhciB2PXcuc3Vic3RyKDAsaSkrIi4uKHRvdGFsICIrdy5sZW5ndGgvMisiYnl0ZXMpLi4iK3cuc3Vic3RyKHcubGVuZ3RoLWksaSk7cmV0dXJuIHZ9fTtpZihjPT09dW5kZWZpbmVkKXtjPXtvbW1pdF9sb25nX29jdGV0OjMyfX1pZihrPT09dW5kZWZpbmVkKXtrPTB9aWYoZz09PXVuZGVmaW5lZCl7Zz0iIn12YXIgcj1jLm9tbWl0X2xvbmdfb2N0ZXQ7aWYoZS5zdWJzdHIoaywyKT09IjAxIil7dmFyIGg9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKTtpZihoPT0iMDAiKXtyZXR1cm4gZysiQk9PTEVBTiBGQUxTRVxuIn1lbHNle3JldHVybiBnKyJCT09MRUFOIFRSVUVcbiJ9fWlmKGUuc3Vic3RyKGssMik9PSIwMiIpe3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsayk7cmV0dXJuIGcrIklOVEVHRVIgIitvKGgscikrIlxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDMiKXt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO3JldHVybiBnKyJCSVRTVFJJTkcgIitvKGgscikrIlxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDQiKXt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO2lmKEFTTjFIRVguaXNBU04xSEVYKGgpKXt2YXIgaj1nKyJPQ1RFVFNUUklORywgZW5jYXBzdWxhdGVzXG4iO2o9aitBU04xSEVYLmR1bXAoaCxjLDAsZysiICAiKTtyZXR1cm4gan1lbHNle3JldHVybiBnKyJPQ1RFVFNUUklORyAiK28oaCxyKSsiXG4ifX1pZihlLnN1YnN0cihrLDIpPT0iMDUiKXtyZXR1cm4gZysiTlVMTFxuIn1pZihlLnN1YnN0cihrLDIpPT0iMDYiKXt2YXIgbD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO3ZhciBhPUtKVVIuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludChsKTt2YXIgbj1LSlVSLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoYSk7dmFyIGI9YS5yZXBsYWNlKC9cLi9nLCIgIik7aWYobiE9IiIpe3JldHVybiBnKyJPYmplY3RJZGVudGlmaWVyICIrbisiICgiK2IrIilcbiJ9ZWxzZXtyZXR1cm4gZysiT2JqZWN0SWRlbnRpZmllciAoIitiKyIpXG4ifX1pZihlLnN1YnN0cihrLDIpPT0iMGMiKXtyZXR1cm4gZysiVVRGOFN0cmluZyAnIitoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKSkrIidcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjEzIil7cmV0dXJuIGcrIlByaW50YWJsZVN0cmluZyAnIitoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKSkrIidcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjE0Iil7cmV0dXJuIGcrIlRlbGV0ZXhTdHJpbmcgJyIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyInXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxNiIpe3JldHVybiBnKyJJQTVTdHJpbmcgJyIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyInXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxNyIpe3JldHVybiBnKyJVVENUaW1lICIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyJcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjE4Iil7cmV0dXJuIGcrIkdlbmVyYWxpemVkVGltZSAiK2hleHRvdXRmOChBU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspKSsiXG4ifWlmKGUuc3Vic3RyKGssMik9PSIzMCIpe2lmKGUuc3Vic3RyKGssNCk9PSIzMDAwIil7cmV0dXJuIGcrIlNFUVVFTkNFIHt9XG4ifXZhciBqPWcrIlNFUVVFTkNFXG4iO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGUsayk7dmFyIGY9YztpZigoZC5sZW5ndGg9PTJ8fGQubGVuZ3RoPT0zKSYmZS5zdWJzdHIoZFswXSwyKT09IjA2IiYmZS5zdWJzdHIoZFtkLmxlbmd0aC0xXSwyKT09IjA0Iil7dmFyIHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxkWzBdKTt2YXIgYT1LSlVSLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQodCk7dmFyIG49S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lKGEpO3ZhciBwPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO3AueDUwOUV4dE5hbWU9bjtmPXB9Zm9yKHZhciBxPTA7cTxkLmxlbmd0aDtxKyspe2o9aitBU04xSEVYLmR1bXAoZSxmLGRbcV0sZysiICAiKX1yZXR1cm4gan1pZihlLnN1YnN0cihrLDIpPT0iMzEiKXt2YXIgaj1nKyJTRVRcbiI7dmFyIGQ9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSxrKTtmb3IodmFyIHE9MDtxPGQubGVuZ3RoO3ErKyl7aj1qK0FTTjFIRVguZHVtcChlLGMsZFtxXSxnKyIgICIpfXJldHVybiBqfXZhciB1PXBhcnNlSW50KGUuc3Vic3RyKGssMiksMTYpO2lmKCh1JjEyOCkhPTApe3ZhciBtPXUmMzE7aWYoKHUmMzIpIT0wKXt2YXIgaj1nKyJbIittKyJdXG4iO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGUsayk7Zm9yKHZhciBxPTA7cTxkLmxlbmd0aDtxKyspe2o9aitBU04xSEVYLmR1bXAoZSxjLGRbcV0sZysiICAiKX1yZXR1cm4gan1lbHNle3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsayk7aWYoaC5zdWJzdHIoMCw4KT09IjY4NzQ3NDcwIil7aD1oZXh0b3V0ZjgoaCl9aWYoYy54NTA5RXh0TmFtZT09PSJzdWJqZWN0QWx0TmFtZSImJm09PTIpe2g9aGV4dG91dGY4KGgpfXZhciBqPWcrIlsiK20rIl0gIitoKyJcbiI7cmV0dXJuIGp9fXJldHVybiBnKyJVTktOT1dOKCIrZS5zdWJzdHIoaywyKSsiKSAiK0FTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykrIlxuIn07QVNOMUhFWC5pc0FTTjFIRVg9ZnVuY3Rpb24oZCl7aWYoZC5sZW5ndGglMj09MSl7cmV0dXJuIGZhbHNlfXZhciBjPUFTTjFIRVguZ2V0SW50T2ZMX0F0T2JqKGQsMCk7dmFyIGI9ZC5zdWJzdHIoMCwyKTt2YXIgZT1BU04xSEVYLmdldEhleE9mTF9BdE9iaihkLDApO3ZhciBhPWQubGVuZ3RoLWIubGVuZ3RoLWUubGVuZ3RoO2lmKGE9PWMqMil7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfTsKLyohIGFzbjF4NTA5LTEuMC4xNC5qcyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319aWYodHlwZW9mIEtKVVIuYXNuMS54NTA5PT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMS54NTA5KXtLSlVSLmFzbjEueDUwOT17fX1LSlVSLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZT1mdW5jdGlvbihnKXtLSlVSLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgZD1udWxsO3ZhciBmPW51bGw7dmFyIGM9bnVsbDt2YXIgYT1udWxsO3ZhciBlPW51bGw7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3M9ZnVuY3Rpb24oaSxrKXt2YXIgaD1QS0NTNVBLRVkuZ2V0RGVjcnlwdGVkS2V5SGV4KGksayk7dmFyIGo9bmV3IFJTQUtleSgpO2oucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhoKTt0aGlzLnBydktleT1qfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLmFzbjFTaWduYXR1cmVBbGc9dGhpcy5hc24xVEJTQ2VydC5hc24xU2lnbmF0dXJlQWxnO3NpZz1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6IlNIQTF3aXRoUlNBIn0pO3NpZy5pbml0KHRoaXMucHJ2S2V5KTtzaWcudXBkYXRlSGV4KHRoaXMuYXNuMVRCU0NlcnQuZ2V0RW5jb2RlZEhleCgpKTt0aGlzLmhleFNpZz1zaWcuc2lnbigpO3RoaXMuYXNuMVNpZz1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrdGhpcy5oZXhTaWd9KTt2YXIgaD1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5hc24xVEJTQ2VydCx0aGlzLmFzbjFTaWduYXR1cmVBbGcsdGhpcy5hc24xU2lnXX0pO3RoaXMuaFRMVj1oLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2V9O3RoaXMuc2V0U2lnbmF0dXJlSGV4PWZ1bmN0aW9uKGgpe3RoaXMuYXNuMVNpZ25hdHVyZUFsZz10aGlzLmFzbjFUQlNDZXJ0LmFzbjFTaWduYXR1cmVBbGc7dGhpcy5oZXhTaWc9aDt0aGlzLmFzbjFTaWc9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK3RoaXMuaGV4U2lnfSk7dmFyIGk9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMVRCU0NlcnQsdGhpcy5hc24xU2lnbmF0dXJlQWxnLHRoaXMuYXNuMVNpZ119KTt0aGlzLmhUTFY9aS5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmlzTW9kaWZpZWQ9PWZhbHNlJiZ0aGlzLmhUTFYhPW51bGwpe3JldHVybiB0aGlzLmhUTFZ9dGhyb3cibm90IHNpZ25lZCB5ZXQifTt0aGlzLmdldFBFTVN0cmluZz1mdW5jdGlvbigpe3ZhciBqPXRoaXMuZ2V0RW5jb2RlZEhleCgpO3ZhciBoPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uoaik7dmFyIGk9Q3J5cHRvSlMuZW5jLkJhc2U2NC5zdHJpbmdpZnkoaCk7dmFyIGs9aS5yZXBsYWNlKC8oLns2NH0pL2csIiQxXHJcbiIpO3JldHVybiItLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS1cclxuIitrKyJcclxuLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLVxyXG4ifTtpZih0eXBlb2YgZyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBnLnRic2NlcnRvYmohPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFUQlNDZXJ0PWcudGJzY2VydG9ian1pZih0eXBlb2YgZy5wcnZrZXlvYmohPSJ1bmRlZmluZWQiKXt0aGlzLnBydktleT1nLnBydmtleW9ian1lbHNle2lmKHR5cGVvZiBnLnJzYXBydmtleSE9InVuZGVmaW5lZCIpe3RoaXMucHJ2S2V5PWcucnNhcHJ2a2V5fWVsc2V7aWYoKHR5cGVvZiBnLnJzYXBydnBlbSE9InVuZGVmaW5lZCIpJiYodHlwZW9mIGcucnNhcHJ2cGFzIT0idW5kZWZpbmVkIikpe3RoaXMuc2V0UnNhUHJ2S2V5QnlQRU1hbmRQYXNzKGcucnNhcHJ2cGVtLGcucnNhcHJ2cGFzKX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNlcnRpZmljYXRlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5faW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuYXNuMVZlcnNpb249bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe29iajpuZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOjJ9KX0pO3RoaXMuYXNuMVNlcmlhbE51bWJlcj1udWxsO3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1udWxsO3RoaXMuYXNuMUlzc3Vlcj1udWxsO3RoaXMuYXNuMU5vdEJlZm9yZT1udWxsO3RoaXMuYXNuMU5vdEFmdGVyPW51bGw7dGhpcy5hc24xU3ViamVjdD1udWxsO3RoaXMuYXNuMVN1YmpQS2V5PW51bGw7dGhpcy5leHRlbnNpb25zQXJyYXk9bmV3IEFycmF5KCl9O3RoaXMuc2V0U2VyaWFsTnVtYmVyQnlQYXJhbT1mdW5jdGlvbihiKXt0aGlzLmFzbjFTZXJpYWxOdW1iZXI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKGIpfTt0aGlzLnNldFNpZ25hdHVyZUFsZ0J5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU2lnbmF0dXJlQWxnPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKGIpfTt0aGlzLnNldElzc3VlckJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xSXNzdWVyPW5ldyBLSlVSLmFzbjEueDUwOS5YNTAwTmFtZShiKX07dGhpcy5zZXROb3RCZWZvcmVCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMU5vdEJlZm9yZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShiKX07dGhpcy5zZXROb3RBZnRlckJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xTm90QWZ0ZXI9bmV3IEtKVVIuYXNuMS54NTA5LlRpbWUoYil9O3RoaXMuc2V0U3ViamVjdEJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU3ViamVjdD1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYil9O3RoaXMuc2V0U3ViamVjdFB1YmxpY0tleUJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvKGIpfTt0aGlzLnNldFN1YmplY3RQdWJsaWNLZXlCeUdldEtleT1mdW5jdGlvbihjKXt2YXIgYj1LRVlVVElMLmdldEtleShjKTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8oYil9O3RoaXMuYXBwZW5kRXh0ZW5zaW9uPWZ1bmN0aW9uKGIpe3RoaXMuZXh0ZW5zaW9uc0FycmF5LnB1c2goYil9O3RoaXMuYXBwZW5kRXh0ZW5zaW9uQnlOYW1lPWZ1bmN0aW9uKGQsYil7aWYoZC50b0xvd2VyQ2FzZSgpPT0iYmFzaWNjb25zdHJhaW50cyIpe3ZhciBjPW5ldyBLSlVSLmFzbjEueDUwOS5CYXNpY0NvbnN0cmFpbnRzKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7aWYoZC50b0xvd2VyQ2FzZSgpPT0ia2V5dXNhZ2UiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuS2V5VXNhZ2UoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXtpZihkLnRvTG93ZXJDYXNlKCk9PSJjcmxkaXN0cmlidXRpb25wb2ludHMiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7aWYoZC50b0xvd2VyQ2FzZSgpPT0iZXh0a2V5dXNhZ2UiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuRXh0S2V5VXNhZ2UoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXtpZihkLnRvTG93ZXJDYXNlKCk9PSJhdXRob3JpdHlrZXlpZGVudGlmaWVyIil7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXIoYik7dGhpcy5hcHBlbmRFeHRlbnNpb24oYyl9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBleHRlbnNpb24gbmFtZTogIitkfX19fX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuYXNuMU5vdEJlZm9yZT09bnVsbHx8dGhpcy5hc24xTm90QWZ0ZXI9PW51bGwpe3Rocm93Im5vdEJlZm9yZSBhbmQvb3Igbm90QWZ0ZXIgbm90IHNldCJ9dmFyIGM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMU5vdEJlZm9yZSx0aGlzLmFzbjFOb3RBZnRlcl19KTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVZlcnNpb24pO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xU2VyaWFsTnVtYmVyKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVNpZ25hdHVyZUFsZyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFJc3N1ZXIpO3RoaXMuYXNuMUFycmF5LnB1c2goYyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFTdWJqZWN0KTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVN1YmpQS2V5KTtpZih0aGlzLmV4dGVuc2lvbnNBcnJheS5sZW5ndGg+MCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5leHRlbnNpb25zQXJyYXl9KTt2YXIgYj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6dHJ1ZSx0YWc6ImEzIixvYmo6ZH0pO3RoaXMuYXNuMUFycmF5LnB1c2goYil9dmFyIGU9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuX2luaXRpYWxpemUoKX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuVEJTQ2VydGlmaWNhdGUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkV4dGVuc2lvbj1mdW5jdGlvbihiKXtLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGY9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6dGhpcy5vaWR9KTt2YXIgZT1uZXcgS0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nKHtoZXg6dGhpcy5nZXRFeHRuVmFsdWVIZXgoKX0pO3ZhciBkPW5ldyBBcnJheSgpO2QucHVzaChmKTtpZih0aGlzLmNyaXRpY2FsKXtkLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJCb29sZWFuKCkpfWQucHVzaChlKTt2YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpkfSk7cmV0dXJuIGMuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLmNyaXRpY2FsPWZhbHNlO2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGIuY3JpdGljYWwhPSJ1bmRlZmluZWQiKXt0aGlzLmNyaXRpY2FsPWIuY3JpdGljYWx9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5LZXlVc2FnZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEueDUwOS5LZXlVc2FnZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmdldEV4dG5WYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLm9pZD0iMi41LjI5LjE1IjtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLmJpbiE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyhhKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5LZXlVc2FnZSxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkJhc2ljQ29uc3RyYWludHM9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLng1MDkuQmFzaWNDb25zdHJhaW50cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxjKTt2YXIgYT1mYWxzZTt2YXIgYj0tMTt0aGlzLmdldEV4dG5WYWx1ZUhleD1mdW5jdGlvbigpe3ZhciBlPW5ldyBBcnJheSgpO2lmKHRoaXMuY0Epe2UucHVzaChuZXcgS0pVUi5hc24xLkRFUkJvb2xlYW4oKSl9aWYodGhpcy5wYXRoTGVuPi0xKXtlLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLnBhdGhMZW59KSl9dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZX0pO3RoaXMuYXNuMUV4dG5WYWx1ZT1kO3JldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLm9pZD0iMi41LjI5LjE5Ijt0aGlzLmNBPWZhbHNlO3RoaXMucGF0aExlbj0tMTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLmNBIT0idW5kZWZpbmVkIil7dGhpcy5jQT1jLmNBfWlmKHR5cGVvZiBjLnBhdGhMZW4hPSJ1bmRlZmluZWQiKXt0aGlzLnBhdGhMZW49Yy5wYXRoTGVufX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkJhc2ljQ29uc3RyYWludHMsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5DUkxEaXN0cmlidXRpb25Qb2ludHM9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuZ2V0RXh0blZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS5nZXRFbmNvZGVkSGV4KCl9O3RoaXMuc2V0QnlEUEFycmF5PWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpifSl9O3RoaXMuc2V0QnlPbmVVUkk9ZnVuY3Rpb24oZSl7dmFyIGI9bmV3IEtKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lcyhbe3VyaTplfV0pO3ZhciBkPW5ldyBLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWUoYik7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50KHtkcG9iajpkfSk7dGhpcy5zZXRCeURQQXJyYXkoW2NdKX07dGhpcy5vaWQ9IjIuNS4yOS4zMSI7aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5hcnJheSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlEUEFycmF5KGEuYXJyYXkpfWVsc2V7aWYodHlwZW9mIGEudXJpIT0idW5kZWZpbmVkIil7dGhpcy5zZXRCeU9uZVVSSShhLnVyaSl9fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTERpc3RyaWJ1dGlvblBvaW50cyxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkV4dEtleVVzYWdlPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS54NTA5LkV4dEtleVVzYWdlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuc2V0UHVycG9zZUFycmF5PWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUV4dG5WYWx1ZT1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKCk7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcihiW2NdKTt0aGlzLmFzbjFFeHRuVmFsdWUuYXBwZW5kQVNOMU9iamVjdChkKX19O3RoaXMuZ2V0RXh0blZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS5nZXRFbmNvZGVkSGV4KCl9O3RoaXMub2lkPSIyLjUuMjkuMzciO2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuYXJyYXkhPSJ1bmRlZmluZWQiKXt0aGlzLnNldFB1cnBvc2VBcnJheShhLmFycmF5KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5FeHRLZXlVc2FnZSxLSlVSLmFzbjEueDUwOS5FeHRlbnNpb24pO0tKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLng1MDkuQXV0aG9yaXR5S2V5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmFzbjFLSUQ9bnVsbDt0aGlzLmFzbjFDZXJ0SXNzdWVyPW51bGw7dGhpcy5hc24xQ2VydFNOPW51bGw7dGhpcy5nZXRFeHRuVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgQXJyYXkoKTtpZih0aGlzLmFzbjFLSUQpe2MucHVzaChuZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6ZmFsc2UsdGFnOiI4MCIsb2JqOnRoaXMuYXNuMUtJRH0pKX1pZih0aGlzLmFzbjFDZXJ0SXNzdWVyKXtjLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OmZhbHNlLHRhZzoiYTEiLG9iajp0aGlzLmFzbjFDZXJ0SXNzdWVyfSkpfWlmKHRoaXMuYXNuMUNlcnRTTil7Yy5wdXNoKG5ldyBLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0KHtleHBsaWNpdDpmYWxzZSx0YWc6IjgyIixvYmo6dGhpcy5hc24xQ2VydFNOfSkpfXZhciBiPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OmN9KTt0aGlzLmFzbjFFeHRuVmFsdWU9YjtyZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLmdldEVuY29kZWRIZXgoKX07dGhpcy5zZXRLSURCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUtJRD1uZXcgS0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nKGIpfTt0aGlzLnNldENlcnRJc3N1ZXJCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUNlcnRJc3N1ZXI9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGIpfTt0aGlzLnNldENlcnRTTkJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xQ2VydFNOPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcihiKX07dGhpcy5vaWQ9IjIuNS4yOS4zNSI7aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5raWQhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEtJREJ5UGFyYW0oYS5raWQpfWlmKHR5cGVvZiBhLmlzc3VlciE9InVuZGVmaW5lZCIpe3RoaXMuc2V0Q2VydElzc3VlckJ5UGFyYW0oYS5pc3N1ZXIpfWlmKHR5cGVvZiBhLnNuIT0idW5kZWZpbmVkIil7dGhpcy5zZXRDZXJ0U05CeVBhcmFtKGEuc24pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXIsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5DUkw9ZnVuY3Rpb24oZil7S0pVUi5hc24xLng1MDkuQ1JMLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3ZhciBjPW51bGw7dmFyIGU9bnVsbDt2YXIgYj1udWxsO3ZhciBkPW51bGw7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3M9ZnVuY3Rpb24oaCxqKXt2YXIgZz1QS0NTNVBLRVkuZ2V0RGVjcnlwdGVkS2V5SGV4KGgsaik7dmFyIGk9bmV3IFJTQUtleSgpO2kucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhnKTt0aGlzLnJzYVBydktleT1pfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLmFzbjFTaWduYXR1cmVBbGc9dGhpcy5hc24xVEJTQ2VydExpc3QuYXNuMVNpZ25hdHVyZUFsZztzaWc9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOiJTSEExd2l0aFJTQSIscHJvdjoiY3J5cHRvanMvanNyc2EifSk7c2lnLmluaXRTaWduKHRoaXMucnNhUHJ2S2V5KTtzaWcudXBkYXRlSGV4KHRoaXMuYXNuMVRCU0NlcnRMaXN0LmdldEVuY29kZWRIZXgoKSk7dGhpcy5oZXhTaWc9c2lnLnNpZ24oKTt0aGlzLmFzbjFTaWc9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK3RoaXMuaGV4U2lnfSk7dmFyIGc9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMVRCU0NlcnRMaXN0LHRoaXMuYXNuMVNpZ25hdHVyZUFsZyx0aGlzLmFzbjFTaWddfSk7dGhpcy5oVExWPWcuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5pc01vZGlmaWVkPT1mYWxzZSYmdGhpcy5oVExWIT1udWxsKXtyZXR1cm4gdGhpcy5oVExWfXRocm93Im5vdCBzaWduZWQgeWV0In07dGhpcy5nZXRQRU1TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLmdldEVuY29kZWRIZXgoKTt2YXIgZz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGkpO3ZhciBoPUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KGcpO3ZhciBqPWgucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtyZXR1cm4iLS0tLS1CRUdJTiBYNTA5IENSTC0tLS0tXHJcbiIraisiXHJcbi0tLS0tRU5EIFg1MDkgQ1JMLS0tLS1cclxuIn07aWYodHlwZW9mIGYhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZi50YnNvYmohPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFUQlNDZXJ0TGlzdD1mLnRic29ian1pZih0eXBlb2YgZi5yc2FwcnZrZXkhPSJ1bmRlZmluZWQiKXt0aGlzLnJzYVBydktleT1mLnJzYXBydmtleX1pZigodHlwZW9mIGYucnNhcHJ2cGVtIT0idW5kZWZpbmVkIikmJih0eXBlb2YgZi5yc2FwcnZwYXMhPSJ1bmRlZmluZWQiKSl7dGhpcy5zZXRSc2FQcnZLZXlCeVBFTWFuZFBhc3MoZi5yc2FwcnZwZW0sZi5yc2FwcnZwYXMpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3Q9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dGhpcy5zZXRTaWduYXR1cmVBbGdCeVBhcmFtPWZ1bmN0aW9uKGMpe3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcihjKX07dGhpcy5zZXRJc3N1ZXJCeVBhcmFtPWZ1bmN0aW9uKGMpe3RoaXMuYXNuMUlzc3Vlcj1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYyl9O3RoaXMuc2V0VGhpc1VwZGF0ZUJ5UGFyYW09ZnVuY3Rpb24oYyl7dGhpcy5hc24xVGhpc1VwZGF0ZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShjKX07dGhpcy5zZXROZXh0VXBkYXRlQnlQYXJhbT1mdW5jdGlvbihjKXt0aGlzLmFzbjFOZXh0VXBkYXRlPW5ldyBLSlVSLmFzbjEueDUwOS5UaW1lKGMpfTt0aGlzLmFkZFJldm9rZWRDZXJ0PWZ1bmN0aW9uKGMsZCl7dmFyIGY9e307aWYoYyE9dW5kZWZpbmVkJiZjIT1udWxsKXtmLnNuPWN9aWYoZCE9dW5kZWZpbmVkJiZkIT1udWxsKXtmLnRpbWU9ZH12YXIgZT1uZXcgS0pVUi5hc24xLng1MDkuQ1JMRW50cnkoZik7dGhpcy5hUmV2b2tlZENlcnQucHVzaChlKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7aWYodGhpcy5hc24xVmVyc2lvbiE9bnVsbCl7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFWZXJzaW9uKX10aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVNpZ25hdHVyZUFsZyk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFJc3N1ZXIpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xVGhpc1VwZGF0ZSk7aWYodGhpcy5hc24xTmV4dFVwZGF0ZSE9bnVsbCl7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFOZXh0VXBkYXRlKX1pZih0aGlzLmFSZXZva2VkQ2VydC5sZW5ndGg+MCl7dmFyIGM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hUmV2b2tlZENlcnR9KTt0aGlzLmFzbjFBcnJheS5wdXNoKGMpfXZhciBkPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuYXNuMUFycmF5fSk7dGhpcy5oVExWPWQuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZTtyZXR1cm4gdGhpcy5oVExWfTt0aGlzLl9pbml0aWFsaXplPWZ1bmN0aW9uKCl7dGhpcy5hc24xVmVyc2lvbj1udWxsO3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1udWxsO3RoaXMuYXNuMUlzc3Vlcj1udWxsO3RoaXMuYXNuMVRoaXNVcGRhdGU9bnVsbDt0aGlzLmFzbjFOZXh0VXBkYXRlPW51bGw7dGhpcy5hUmV2b2tlZENlcnQ9bmV3IEFycmF5KCl9O3RoaXMuX2luaXRpYWxpemUoKX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuVEJTQ2VydExpc3QsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkNSTEVudHJ5PWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS54NTA5LkNSTEVudHJ5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBhPW51bGw7dGhpcy5zZXRDZXJ0U2VyaWFsPWZ1bmN0aW9uKGQpe3RoaXMuc249bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKGQpfTt0aGlzLnNldFJldm9jYXRpb25EYXRlPWZ1bmN0aW9uKGQpe3RoaXMudGltZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShkKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuc24sdGhpcy50aW1lXX0pO3RoaXMuVExWPWQuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLlRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy50aW1lIT0idW5kZWZpbmVkIil7dGhpcy5zZXRSZXZvY2F0aW9uRGF0ZShjLnRpbWUpfWlmKHR5cGVvZiBjLnNuIT0idW5kZWZpbmVkIil7dGhpcy5zZXRDZXJ0U2VyaWFsKGMuc24pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkNSTEVudHJ5LEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5YNTAwTmFtZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEueDUwOS5YNTAwTmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5zZXRCeVN0cmluZz1mdW5jdGlvbihjKXt2YXIgZD1jLnNwbGl0KCIvIik7ZC5zaGlmdCgpO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt0aGlzLmFzbjFBcnJheS5wdXNoKG5ldyBLSlVSLmFzbjEueDUwOS5SRE4oe3N0cjpkW2VdfSkpfX07dGhpcy5zZXRCeU9iamVjdD1mdW5jdGlvbihlKXtmb3IodmFyIGMgaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShjKSl7dmFyIGQ9bmV3IEtKVVIuYXNuMS54NTA5LlJETih7c3RyOmMrIj0iK2VbY119KTt0aGlzLmFzbjFBcnJheT90aGlzLmFzbjFBcnJheS5wdXNoKGQpOnRoaXMuYXNuMUFycmF5PVtkXX19fTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn12YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmFzbjFBcnJheX0pO3RoaXMuaFRMVj1jLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLnN0ciE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlTdHJpbmcoYi5zdHIpfWVsc2V7aWYodHlwZW9mIGI9PT0ib2JqZWN0Iil7dGhpcy5zZXRCeU9iamVjdChiKX19aWYodHlwZW9mIGIuY2VydGlzc3VlciE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBYNTA5KCk7YS5oZXg9WDUwOS5wZW1Ub0hleChiLmNlcnRpc3N1ZXIpO3RoaXMuaFRMVj1hLmdldElzc3VlckhleCgpfWlmKHR5cGVvZiBiLmNlcnRzdWJqZWN0IT0idW5kZWZpbmVkIil7dmFyIGE9bmV3IFg1MDkoKTthLmhleD1YNTA5LnBlbVRvSGV4KGIuY2VydHN1YmplY3QpO3RoaXMuaFRMVj1hLmdldFN1YmplY3RIZXgoKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5YNTAwTmFtZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuUkROPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS54NTA5LlJETi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5hZGRCeVN0cmluZz1mdW5jdGlvbihiKXt0aGlzLmFzbjFBcnJheS5wdXNoKG5ldyBLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUoe3N0cjpifSkpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgYj1uZXcgS0pVUi5hc24xLkRFUlNldCh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLlRMVj1iLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5UTFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuc3RyIT0idW5kZWZpbmVkIil7dGhpcy5hZGRCeVN0cmluZyhhLnN0cil9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuUkROLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWU9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuQXR0cmlidXRlVHlwZUFuZFZhbHVlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZD1udWxsO3ZhciBjPW51bGw7dmFyIGE9InV0ZjgiO3RoaXMuc2V0QnlTdHJpbmc9ZnVuY3Rpb24oZSl7aWYoZS5tYXRjaCgvXihbXj1dKyk9KC4rKSQvKSl7dGhpcy5zZXRCeUF0dHJUeXBlQW5kVmFsdWVTdHIoUmVnRXhwLiQxLFJlZ0V4cC4kMil9ZWxzZXt0aHJvdyJtYWxmb3JtZWQgYXR0clR5cGVBbmRWYWx1ZVN0cjogIitlfX07dGhpcy5zZXRCeUF0dHJUeXBlQW5kVmFsdWVTdHI9ZnVuY3Rpb24oZyxmKXt0aGlzLnR5cGVPYmo9S0pVUi5hc24xLng1MDkuT0lELmF0eXBlMm9iaihnKTt2YXIgZT1hO2lmKGc9PSJDIil7ZT0icHJuIn10aGlzLnZhbHVlT2JqPXRoaXMuZ2V0VmFsdWVPYmooZSxmKX07dGhpcy5nZXRWYWx1ZU9iaj1mdW5jdGlvbihmLGUpe2lmKGY9PSJ1dGY4Iil7cmV0dXJuIG5ldyBLSlVSLmFzbjEuREVSVVRGOFN0cmluZyh7c3RyOmV9KX1pZihmPT0icHJuIil7cmV0dXJuIG5ldyBLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nKHtzdHI6ZX0pfWlmKGY9PSJ0ZWwiKXtyZXR1cm4gbmV3IEtKVVIuYXNuMS5ERVJUZWxldGV4U3RyaW5nKHtzdHI6ZX0pfWlmKGY9PSJpYTUiKXtyZXR1cm4gbmV3IEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcoe3N0cjplfSl9dGhyb3cidW5zdXBwb3J0ZWQgZGlyZWN0b3J5IHN0cmluZyB0eXBlOiB0eXBlPSIrZisiIHZhbHVlPSIrZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMudHlwZU9iaix0aGlzLnZhbHVlT2JqXX0pO3RoaXMuVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLlRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5zdHIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5U3RyaW5nKGIuc3RyKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvPWZ1bmN0aW9uKGQpe0tKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYj1udWxsO3ZhciBjPW51bGw7dmFyIGE9bnVsbDt0aGlzLnNldFJTQUtleT1mdW5jdGlvbihlKXtpZighUlNBS2V5LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpKXt0aHJvdyJhcmd1bWVudCBpcyBub3QgUlNBS2V5IGluc3RhbmNlIn10aGlzLnJzYUtleT1lO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmUubn0pO3ZhciBmPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6ZS5lfSk7dmFyIGk9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2csZl19KTt2YXIgaD1pLmdldEVuY29kZWRIZXgoKTt0aGlzLmFzbjFBbGdJZD1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZToicnNhRW5jcnlwdGlvbiJ9KTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIraH0pfTt0aGlzLnNldFJTQVBFTT1mdW5jdGlvbihnKXtpZihnLm1hdGNoKC8tLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tLS8pKXt2YXIgbj1nO249bi5yZXBsYWNlKC9eLS0tLS1bXi1dKy0tLS0tLywiIik7bj1uLnJlcGxhY2UoLy0tLS0tW14tXSstLS0tLVxzKiQvLCIiKTt2YXIgbT1uLnJlcGxhY2UoL1xzKy9nLCIiKTt2YXIgZj1DcnlwdG9KUy5lbmMuQmFzZTY0LnBhcnNlKG0pO3ZhciBpPUNyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KGYpO3ZhciBrPV9yc2FwZW1fZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGkpO3ZhciBoPWtbMV07dmFyIGw9aC5zdWJzdHIoMik7dmFyIGU9X3JzYXBlbV9nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgobCk7dmFyIGo9bmV3IFJTQUtleSgpO2ouc2V0UHVibGljKGVbMF0sZVsxXSk7dGhpcy5zZXRSU0FLZXkoail9ZWxzZXt0aHJvdyJrZXkgbm90IHN1cHBvcnRlZCJ9fTt0aGlzLmdldEFTTjFPYmplY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLmFzbjFBbGdJZD09bnVsbHx8dGhpcy5hc24xU3VialBLZXk9PW51bGwpe3Rocm93ImFsZ0lkIGFuZC9vciBzdWJqUHViS2V5IG5vdCBzZXQifXZhciBlPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmFzbjFBbGdJZCx0aGlzLmFzbjFTdWJqUEtleV19KTtyZXR1cm4gZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRBU04xT2JqZWN0KCk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuX3NldFJTQUtleT1mdW5jdGlvbihlKXt2YXIgZz1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50Ijp7YmlnaW50OmUubn19LHsiaW50Ijp7ImludCI6ZS5lfX1dfSk7dmFyIGY9Zy5nZXRFbmNvZGVkSGV4KCk7dGhpcy5hc24xQWxnSWQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6InJzYUVuY3J5cHRpb24ifSk7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK2Z9KX07dGhpcy5fc2V0RUM9ZnVuY3Rpb24oZSl7dmFyIGY9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtuYW1lOmUuY3VydmVOYW1lfSk7dGhpcy5hc24xQWxnSWQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6ImVjUHVibGljS2V5Iixhc24xcGFyYW1zOmZ9KTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrZS5wdWJLZXlIZXh9KX07dGhpcy5fc2V0RFNBPWZ1bmN0aW9uKGUpe3ZhciBmPW5ldyBLSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50Ijp7YmlnaW50OmUucH19LHsiaW50Ijp7YmlnaW50OmUucX19LHsiaW50Ijp7YmlnaW50OmUuZ319XX0pO3RoaXMuYXNuMUFsZ0lkPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOiJkc2EiLGFzbjFwYXJhbXM6Zn0pO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmUueX0pO3RoaXMuYXNuMVN1YmpQS2V5PW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIitnLmdldEVuY29kZWRIZXgoKX0pfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZkIGluc3RhbmNlb2YgUlNBS2V5KXt0aGlzLl9zZXRSU0FLZXkoZCl9ZWxzZXtpZih0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZkIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0Epe3RoaXMuX3NldEVDKGQpfWVsc2V7aWYodHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmQgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0Epe3RoaXMuX3NldERTQShkKX1lbHNle2lmKHR5cGVvZiBkLnJzYWtleSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0UlNBS2V5KGQucnNha2V5KX1lbHNle2lmKHR5cGVvZiBkLnJzYXBlbSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0UlNBUEVNKGQucnNhcGVtKX19fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LlRpbWU9ZnVuY3Rpb24oYyl7S0pVUi5hc24xLng1MDkuVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3RoaXMuc2V0VGltZVBhcmFtcz1mdW5jdGlvbihkKXt0aGlzLnRpbWVQYXJhbXM9ZH07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGQ9bnVsbDtpZih0aGlzLnRpbWVQYXJhbXMhPW51bGwpe2lmKHRoaXMudHlwZT09InV0YyIpe2Q9bmV3IEtKVVIuYXNuMS5ERVJVVENUaW1lKHRoaXMudGltZVBhcmFtcyl9ZWxzZXtkPW5ldyBLSlVSLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lKHRoaXMudGltZVBhcmFtcyl9fWVsc2V7aWYodGhpcy50eXBlPT0idXRjIil7ZD1uZXcgS0pVUi5hc24xLkRFUlVUQ1RpbWUoKX1lbHNle2Q9bmV3IEtKVVIuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUoKX19dGhpcy5UTFY9ZC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuVExWfTt0aGlzLnR5cGU9InV0YyI7aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy50eXBlIT0idW5kZWZpbmVkIil7dGhpcy50eXBlPWMudHlwZX1lbHNle2lmKHR5cGVvZiBjLnN0ciE9InVuZGVmaW5lZCIpe2lmKGMuc3RyLm1hdGNoKC9eWzAtOV17MTJ9WiQvKSl7dGhpcy50eXBlPSJ1dGMifWlmKGMuc3RyLm1hdGNoKC9eWzAtOV17MTR9WiQvKSl7dGhpcy50eXBlPSJnZW4ifX19dGhpcy50aW1lUGFyYW1zPWN9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5UaW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dmFyIGQ9bnVsbDt2YXIgYj1udWxsO3ZhciBjPWZhbHNlO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMubmFtZUFsZz09bnVsbCYmdGhpcy5hc24xQWxnPT1udWxsKXt0aHJvdyJhbGdvcml0aG0gbm90IHNwZWNpZmllZCJ9aWYodGhpcy5uYW1lQWxnIT1udWxsJiZ0aGlzLmFzbjFBbGc9PW51bGwpe3RoaXMuYXNuMUFsZz1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvYmoodGhpcy5uYW1lQWxnKX12YXIgZj1bdGhpcy5hc24xQWxnXTtpZighdGhpcy5wYXJhbUVtcHR5KXtmLnB1c2godGhpcy5hc24xUGFyYW1zKX12YXIgZz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpmfSk7dGhpcy5oVExWPWcuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUubmFtZSE9InVuZGVmaW5lZCIpe3RoaXMubmFtZUFsZz1lLm5hbWV9aWYodHlwZW9mIGUuYXNuMXBhcmFtcyE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMVBhcmFtcz1lLmFzbjFwYXJhbXN9aWYodHlwZW9mIGUucGFyYW1lbXB0eSE9InVuZGVmaW5lZCIpe3RoaXMucGFyYW1FbXB0eT1lLnBhcmFtZW1wdHl9fWlmKHRoaXMuYXNuMVBhcmFtcz09bnVsbCl7dGhpcy5hc24xUGFyYW1zPW5ldyBLSlVSLmFzbjEuREVSTnVsbCgpfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWU9ZnVuY3Rpb24oZCl7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBjPW51bGw7dmFyIGI9bnVsbDt2YXIgYT17cmZjODIyOiI4MSIsZG5zOiI4MiIsZG46ImE0Iix1cmk6Ijg2In07dGhpcy5leHBsaWNpdD1mYWxzZTt0aGlzLnNldEJ5UGFyYW09ZnVuY3Rpb24oayl7dmFyIGo9bnVsbDt2YXIgZz1udWxsO2lmKHR5cGVvZiBrPT0idW5kZWZpbmVkIil7cmV0dXJufWlmKHR5cGVvZiBrLnJmYzgyMiE9InVuZGVmaW5lZCIpe3RoaXMudHlwZT0icmZjODIyIjtnPW5ldyBLSlVSLmFzbjEuREVSSUE1U3RyaW5nKHtzdHI6a1t0aGlzLnR5cGVdfSl9aWYodHlwZW9mIGsuZG5zIT0idW5kZWZpbmVkIil7dGhpcy50eXBlPSJkbnMiO2c9bmV3IEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcoe3N0cjprW3RoaXMudHlwZV19KX1pZih0eXBlb2Ygay51cmkhPSJ1bmRlZmluZWQiKXt0aGlzLnR5cGU9InVyaSI7Zz1uZXcgS0pVUi5hc24xLkRFUklBNVN0cmluZyh7c3RyOmtbdGhpcy50eXBlXX0pfWlmKHR5cGVvZiBrLmNlcnRpc3N1ZXIhPSJ1bmRlZmluZWQiKXt0aGlzLnR5cGU9ImRuIjt0aGlzLmV4cGxpY2l0PXRydWU7dmFyIGg9ay5jZXJ0aXNzdWVyO3ZhciBmPW51bGw7aWYoaC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7Zj09aH1pZihoLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXtmPVg1MDkucGVtVG9IZXgoaCl9aWYoZj09bnVsbCl7dGhyb3ciY2VydGlzc3VlciBwYXJhbSBub3QgY2VydCJ9dmFyIGU9bmV3IFg1MDkoKTtlLmhleD1mO3ZhciBpPWUuZ2V0SXNzdWVySGV4KCk7Zz1uZXcgS0pVUi5hc24xLkFTTjFPYmplY3QoKTtnLmhUTFY9aX1pZih0eXBlb2Ygay5jZXJ0c3ViaiE9InVuZGVmaW5lZCIpe3RoaXMudHlwZT0iZG4iO3RoaXMuZXhwbGljaXQ9dHJ1ZTt2YXIgaD1rLmNlcnRzdWJqO3ZhciBmPW51bGw7aWYoaC5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7Zj09aH1pZihoLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXtmPVg1MDkucGVtVG9IZXgoaCl9aWYoZj09bnVsbCl7dGhyb3ciY2VydHN1YmogcGFyYW0gbm90IGNlcnQifXZhciBlPW5ldyBYNTA5KCk7ZS5oZXg9Zjt2YXIgaT1lLmdldFN1YmplY3RIZXgoKTtnPW5ldyBLSlVSLmFzbjEuQVNOMU9iamVjdCgpO2cuaFRMVj1pfWlmKHRoaXMudHlwZT09bnVsbCl7dGhyb3cidW5zdXBwb3J0ZWQgdHlwZSBpbiBwYXJhbXM9IitrfXRoaXMuYXNuMU9iaj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6dGhpcy5leHBsaWNpdCx0YWc6YVt0aGlzLnR5cGVdLG9iajpnfSl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzbjFPYmouZ2V0RW5jb2RlZEhleCgpfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlQYXJhbShkKX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5HZW5lcmFsTmFtZXM9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3RoaXMuc2V0QnlQYXJhbUFycmF5PWZ1bmN0aW9uKGUpe2Zvcih2YXIgYz0wO2M8ZS5sZW5ndGg7YysrKXt2YXIgZD1uZXcgS0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWUoZVtjXSk7dGhpcy5hc24xQXJyYXkucHVzaChkKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuYXNuMUFycmF5fSk7cmV0dXJuIGMuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlQYXJhbUFycmF5KGIpfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWVzLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWU9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnROYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZT1udWxsO3ZhciBjPW51bGw7dmFyIGE9bnVsbDt2YXIgZD1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMudHlwZSE9ImZ1bGwiKXt0aHJvdyJjdXJyZW50bHkgdHlwZSBzaGFsbCBiZSAnZnVsbCc6ICIrdGhpcy50eXBlfXRoaXMuYXNuMU9iaj1uZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6ZmFsc2UsdGFnOnRoaXMudGFnLG9iajp0aGlzLmFzbjFWfSk7dGhpcy5oVExWPXRoaXMuYXNuMU9iai5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZihLSlVSLmFzbjEueDUwOS5HZW5lcmFsTmFtZXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYikpe3RoaXMudHlwZT0iZnVsbCI7dGhpcy50YWc9ImEwIjt0aGlzLmFzbjFWPWJ9ZWxzZXt0aHJvdyJUaGlzIGNsYXNzIHN1cHBvcnRzIEdlbmVyYWxOYW1lcyBvbmx5IGFzIGFyZ3VtZW50In19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50PWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2UoKTtpZih0aGlzLmFzbjFEUCE9bnVsbCl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OnRydWUsdGFnOiJhMCIsb2JqOnRoaXMuYXNuMURQfSk7Yy5hcHBlbmRBU04xT2JqZWN0KGQpfXRoaXMuaFRMVj1jLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmRwb2JqIT0idW5kZWZpbmVkIil7dGhpcy5hc24xRFA9Yi5kcG9ian19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuT0lEPW5ldyBmdW5jdGlvbihhKXt0aGlzLmF0eXBlMm9pZExpc3Q9e0M6IjIuNS40LjYiLE86IjIuNS40LjEwIixPVToiMi41LjQuMTEiLFNUOiIyLjUuNC44IixMOiIyLjUuNC43IixDTjoiMi41LjQuMyIsU046IjIuNS40LjQiLEROOiIyLjUuNC40OSIsREM6IjAuOS4yMzQyLjE5MjAwMzAwLjEwMC4xLjI1Iix9O3RoaXMubmFtZTJvaWRMaXN0PXtzaGExOiIxLjMuMTQuMy4yLjI2IixzaGEyNTY6IjIuMTYuODQwLjEuMTAxLjMuNC4yLjEiLHNoYTM4NDoiMi4xNi44NDAuMS4xMDEuMy40LjIuMiIsc2hhNTEyOiIyLjE2Ljg0MC4xLjEwMS4zLjQuMi4zIixzaGEyMjQ6IjIuMTYuODQwLjEuMTAxLjMuNC4yLjQiLG1kNToiMS4yLjg0MC4xMTM1NDkuMi41IixtZDI6IjEuMy4xNC43LjIuMi4xIixyaXBlbWQxNjA6IjEuMy4zNi4zLjIuMSIsTUQyd2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjIiLE1ENHdpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS4zIixNRDV3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuNCIsU0hBMXdpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS41IixTSEEyMjR3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuMTQiLFNIQTI1NndpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS4xMSIsU0hBMzg0d2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjEyIixTSEE1MTJ3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuMTMiLFNIQTF3aXRoRUNEU0E6IjEuMi44NDAuMTAwNDUuNC4xIixTSEEyMjR3aXRoRUNEU0E6IjEuMi44NDAuMTAwNDUuNC4zLjEiLFNIQTI1NndpdGhFQ0RTQToiMS4yLjg0MC4xMDA0NS40LjMuMiIsU0hBMzg0d2l0aEVDRFNBOiIxLjIuODQwLjEwMDQ1LjQuMy4zIixTSEE1MTJ3aXRoRUNEU0E6IjEuMi44NDAuMTAwNDUuNC4zLjQiLGRzYToiMS4yLjg0MC4xMDA0MC40LjEiLFNIQTF3aXRoRFNBOiIxLjIuODQwLjEwMDQwLjQuMyIsU0hBMjI0d2l0aERTQToiMi4xNi44NDAuMS4xMDEuMy40LjMuMSIsU0hBMjU2d2l0aERTQToiMi4xNi44NDAuMS4xMDEuMy40LjMuMiIscnNhRW5jcnlwdGlvbjoiMS4yLjg0MC4xMTM1NDkuMS4xLjEiLGNvdW50cnlOYW1lOiIyLjUuNC42Iixvcmdhbml6YXRpb246IjIuNS40LjEwIixvcmdhbml6YXRpb25hbFVuaXQ6IjIuNS40LjExIixzdGF0ZU9yUHJvdmluY2VOYW1lOiIyLjUuNC44Iixsb2NhbGl0eToiMi41LjQuNyIsY29tbW9uTmFtZToiMi41LjQuMyIsc3ViamVjdEtleUlkZW50aWZpZXI6IjIuNS4yOS4xNCIsa2V5VXNhZ2U6IjIuNS4yOS4xNSIsc3ViamVjdEFsdE5hbWU6IjIuNS4yOS4xNyIsYmFzaWNDb25zdHJhaW50czoiMi41LjI5LjE5IixuYW1lQ29uc3RyYWludHM6IjIuNS4yOS4zMCIsY1JMRGlzdHJpYnV0aW9uUG9pbnRzOiIyLjUuMjkuMzEiLGNlcnRpZmljYXRlUG9saWNpZXM6IjIuNS4yOS4zMiIsYXV0aG9yaXR5S2V5SWRlbnRpZmllcjoiMi41LjI5LjM1Iixwb2xpY3lDb25zdHJhaW50czoiMi41LjI5LjM2IixleHRLZXlVc2FnZToiMi41LjI5LjM3IixhdXRob3JpdHlJbmZvQWNjZXNzOiIxLjMuNi4xLjUuNS43LjEuMSIsYW55RXh0ZW5kZWRLZXlVc2FnZToiMi41LjI5LjM3LjAiLHNlcnZlckF1dGg6IjEuMy42LjEuNS41LjcuMy4xIixjbGllbnRBdXRoOiIxLjMuNi4xLjUuNS43LjMuMiIsY29kZVNpZ25pbmc6IjEuMy42LjEuNS41LjcuMy4zIixlbWFpbFByb3RlY3Rpb246IjEuMy42LjEuNS41LjcuMy40Iix0aW1lU3RhbXBpbmc6IjEuMy42LjEuNS41LjcuMy44IixvY3NwU2lnbmluZzoiMS4zLjYuMS41LjUuNy4zLjkiLGVjUHVibGljS2V5OiIxLjIuODQwLjEwMDQ1LjIuMSIsc2VjcDI1NnIxOiIxLjIuODQwLjEwMDQ1LjMuMS43IixzZWNwMjU2azE6IjEuMy4xMzIuMC4xMCIsc2VjcDM4NHIxOiIxLjMuMTMyLjAuMzQiLHBrY3M1UEJFUzI6IjEuMi44NDAuMTEzNTQ5LjEuNS4xMyIscGtjczVQQktERjI6IjEuMi44NDAuMTEzNTQ5LjEuNS4xMiIsImRlcy1FREUzLUNCQyI6IjEuMi44NDAuMTEzNTQ5LjMuNyIsZGF0YToiMS4yLjg0MC4xMTM1NDkuMS43LjEiLCJzaWduZWQtZGF0YSI6IjEuMi44NDAuMTEzNTQ5LjEuNy4yIiwiZW52ZWxvcGVkLWRhdGEiOiIxLjIuODQwLjExMzU0OS4xLjcuMyIsImRpZ2VzdGVkLWRhdGEiOiIxLjIuODQwLjExMzU0OS4xLjcuNSIsImVuY3J5cHRlZC1kYXRhIjoiMS4yLjg0MC4xMTM1NDkuMS43LjYiLCJhdXRoZW50aWNhdGVkLWRhdGEiOiIxLjIuODQwLjExMzU0OS4xLjkuMTYuMS4yIix0c3RpbmZvOiIxLjIuODQwLjExMzU0OS4xLjkuMTYuMS40Iix9O3RoaXMub2JqQ2FjaGU9e307dGhpcy5uYW1lMm9iaj1mdW5jdGlvbihiKXtpZih0eXBlb2YgdGhpcy5vYmpDYWNoZVtiXSE9InVuZGVmaW5lZCIpe3JldHVybiB0aGlzLm9iakNhY2hlW2JdfWlmKHR5cGVvZiB0aGlzLm5hbWUyb2lkTGlzdFtiXT09InVuZGVmaW5lZCIpe3Rocm93Ik5hbWUgb2YgT2JqZWN0SWRlbnRpZmllciBub3QgZGVmaW5lZDogIitifXZhciBjPXRoaXMubmFtZTJvaWRMaXN0W2JdO3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOmN9KTt0aGlzLm9iakNhY2hlW2JdPWQ7cmV0dXJuIGR9O3RoaXMuYXR5cGUyb2JqPWZ1bmN0aW9uKGIpe2lmKHR5cGVvZiB0aGlzLm9iakNhY2hlW2JdIT0idW5kZWZpbmVkIil7cmV0dXJuIHRoaXMub2JqQ2FjaGVbYl19aWYodHlwZW9mIHRoaXMuYXR5cGUyb2lkTGlzdFtiXT09InVuZGVmaW5lZCIpe3Rocm93IkF0dHJpYnV0ZVR5cGUgbmFtZSB1bmRlZmluZWQ6ICIrYn12YXIgYz10aGlzLmF0eXBlMm9pZExpc3RbYl07dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6Y30pO3RoaXMub2JqQ2FjaGVbYl09ZDtyZXR1cm4gZH19O0tKVVIuYXNuMS54NTA5Lk9JRC5vaWQybmFtZT1mdW5jdGlvbihiKXt2YXIgYz1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0O2Zvcih2YXIgYSBpbiBjKXtpZihjW2FdPT1iKXtyZXR1cm4gYX19cmV0dXJuIiJ9O0tKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZD1mdW5jdGlvbihhKXt2YXIgYj1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0O2lmKGJbYV09PT11bmRlZmluZWQpe3JldHVybiIifXJldHVybiBiW2FdfTtLSlVSLmFzbjEueDUwOS5YNTA5VXRpbD1uZXcgZnVuY3Rpb24oKXt0aGlzLmdldFBLQ1M4UHViS2V5UEVNZnJvbVJTQUtleT1mdW5jdGlvbihpKXt2YXIgaD1udWxsO3ZhciBmPUtKVVIuYXNuMS5BU04xVXRpbC5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleChpLm4pO3ZhciBqPUtKVVIuYXNuMS5BU04xVXRpbC5pbnRlZ2VyVG9CeXRlSGV4KGkuZSk7dmFyIGE9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtoZXg6Zn0pO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7aGV4Omp9KTt2YXIgbD1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbYSxnXX0pO3ZhciBjPWwuZ2V0RW5jb2RlZEhleCgpO3ZhciBkPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOiJyc2FFbmNyeXB0aW9uIn0pO3ZhciBiPW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIitjfSk7dmFyIGs9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2QsYl19KTt2YXIgZT1rLmdldEVuY29kZWRIZXgoKTt2YXIgaD1LSlVSLmFzbjEuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChlLCJQVUJMSUMgS0VZIik7cmV0dXJuIGh9fTtLSlVSLmFzbjEueDUwOS5YNTA5VXRpbC5uZXdDZXJ0UEVNPWZ1bmN0aW9uKGYpe3ZhciBjPUtKVVIuYXNuMS54NTA5O3ZhciBlPW5ldyBjLlRCU0NlcnRpZmljYXRlKCk7aWYoZi5zZXJpYWwhPT11bmRlZmluZWQpe2Uuc2V0U2VyaWFsTnVtYmVyQnlQYXJhbShmLnNlcmlhbCl9ZWxzZXt0aHJvdyJzZXJpYWwgbnVtYmVyIHVuZGVmaW5lZC4ifWlmKHR5cGVvZiBmLnNpZ2FsZy5uYW1lPT0ic3RyaW5nIil7ZS5zZXRTaWduYXR1cmVBbGdCeVBhcmFtKGYuc2lnYWxnKX1lbHNle3Rocm93InVucHJvcGVyIHNpZ25hdHVyZSBhbGdvcml0aG0gbmFtZSJ9aWYoZi5pc3N1ZXIhPT11bmRlZmluZWQpe2Uuc2V0SXNzdWVyQnlQYXJhbShmLmlzc3Vlcil9ZWxzZXt0aHJvdyJpc3N1ZXIgbmFtZSB1bmRlZmluZWQuIn1pZihmLm5vdGJlZm9yZSE9PXVuZGVmaW5lZCl7ZS5zZXROb3RCZWZvcmVCeVBhcmFtKGYubm90YmVmb3JlKX1lbHNle3Rocm93Im5vdGJlZm9yZSB1bmRlZmluZWQuIn1pZihmLm5vdGFmdGVyIT09dW5kZWZpbmVkKXtlLnNldE5vdEFmdGVyQnlQYXJhbShmLm5vdGFmdGVyKX1lbHNle3Rocm93Im5vdGFmdGVyIHVuZGVmaW5lZC4ifWlmKGYuc3ViamVjdCE9PXVuZGVmaW5lZCl7ZS5zZXRTdWJqZWN0QnlQYXJhbShmLnN1YmplY3QpfWVsc2V7dGhyb3cic3ViamVjdCBuYW1lIHVuZGVmaW5lZC4ifWlmKGYuc2JqcHVia2V5IT09dW5kZWZpbmVkKXtlLnNldFN1YmplY3RQdWJsaWNLZXlCeUdldEtleShmLnNianB1YmtleSl9ZWxzZXt0aHJvdyJzdWJqZWN0IHB1YmxpYyBrZXkgdW5kZWZpbmVkLiJ9aWYoZi5leHQhPT11bmRlZmluZWQmJmYuZXh0Lmxlbmd0aCE9PXVuZGVmaW5lZCl7Zm9yKHZhciBiPTA7YjxmLmV4dC5sZW5ndGg7YisrKXtmb3Ioa2V5IGluIGYuZXh0W2JdKXtlLmFwcGVuZEV4dGVuc2lvbkJ5TmFtZShrZXksZi5leHRbYl1ba2V5XSl9fX1pZihmLmNha2V5PT09dW5kZWZpbmVkJiZmLnNpZ2hleD09PXVuZGVmaW5lZCl7dGhyb3cicGFyYW0gY2FrZXkgYW5kIHNpZ2hleCB1bmRlZmluZWQuIn12YXIgZD1udWxsO3ZhciBhPW51bGw7aWYoZi5jYWtleSl7ZD1LRVlVVElMLmdldEtleS5hcHBseShudWxsLGYuY2FrZXkpO2E9bmV3IGMuQ2VydGlmaWNhdGUoe3Ric2NlcnRvYmo6ZSxwcnZrZXlvYmo6ZH0pO2Euc2lnbigpfWlmKGYuc2lnaGV4KXthPW5ldyBjLkNlcnRpZmljYXRlKHt0YnNjZXJ0b2JqOmV9KTthLnNldFNpZ25hdHVyZUhleChmLnNpZ2hleCl9cmV0dXJuIGEuZ2V0UEVNU3RyaW5nKCl9OwovKiEgYXNuMWNtcy0xLjAuMi5qcyAoYykgMjAxMy0yMDE0IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319aWYodHlwZW9mIEtKVVIuYXNuMS5jbXM9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xLmNtcyl7S0pVUi5hc24xLmNtcz17fX1LSlVSLmFzbjEuY21zLkF0dHJpYnV0ZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9W107dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGYsZSxjO2Y9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6dGhpcy5hdHRyVHlwZU9pZH0pO2U9bmV3IEtKVVIuYXNuMS5ERVJTZXQoe2FycmF5OnRoaXMudmFsdWVMaXN0fSk7dHJ5e2UuZ2V0RW5jb2RlZEhleCgpfWNhdGNoKGQpe3Rocm93ImZhaWwgdmFsdWVTZXQuZ2V0RW5jb2RlZEhleCBpbiBBdHRyaWJ1dGUoMSkvIitkfWM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2YsZV19KTt0cnl7dGhpcy5oVExWPWMuZ2V0RW5jb2RlZEhleCgpfWNhdGNoKGQpe3Rocm93ImZhaWxlZCBzZXEuZ2V0RW5jb2RlZEhleCBpbiBBdHRyaWJ1dGUoMikvIitkfXJldHVybiB0aGlzLmhUTFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNtcy5Db250ZW50VHlwZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEuY21zLkNvbnRlbnRUeXBlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuMyI7dmFyIGE9bnVsbDtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcihiKTt0aGlzLnZhbHVlTGlzdD1bYV19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLkNvbnRlbnRUeXBlLEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY21zLk1lc3NhZ2VEaWdlc3Q9ZnVuY3Rpb24oZSl7S0pVUi5hc24xLmNtcy5NZXNzYWdlRGlnZXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuNCI7aWYodHlwZW9mIGUhPSJ1bmRlZmluZWQiKXtpZihlLmVjaU9iaiBpbnN0YW5jZW9mIEtKVVIuYXNuMS5jbXMuRW5jYXBzdWxhdGVkQ29udGVudEluZm8mJnR5cGVvZiBlLmhhc2hBbGc9PSJzdHJpbmciKXt2YXIgYj1lLmVjaU9iai5lQ29udGVudFZhbHVlSGV4O3ZhciBhPWUuaGFzaEFsZzt2YXIgYz1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYixhKTt2YXIgZD1uZXcgS0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nKHtoZXg6Y30pO2QuZ2V0RW5jb2RlZEhleCgpO3RoaXMudmFsdWVMaXN0PVtkXX1lbHNle3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2N0ZXRTdHJpbmcoZSk7ZC5nZXRFbmNvZGVkSGV4KCk7dGhpcy52YWx1ZUxpc3Q9W2RdfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuTWVzc2FnZURpZ2VzdCxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNtcy5TaWduaW5nVGltZT1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY21zLlNpZ25pbmdUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuNSI7aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXt2YXIgYT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShjKTt0cnl7YS5nZXRFbmNvZGVkSGV4KCl9Y2F0Y2goYil7dGhyb3ciU2lnbmluZ1RpbWUuZ2V0RW5jb2RlZEhleCgpIGZhaWxlZC8iK2J9dGhpcy52YWx1ZUxpc3Q9W2FdfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5TaWduaW5nVGltZSxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGU9ZnVuY3Rpb24oZCl7S0pVUi5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjEyIjt2YXIgYT1LSlVSLmFzbjE7dmFyIGM9S0pVUi5hc24xLmNtczt2YXIgYj1LSlVSLmNyeXB0bzt0aGlzLnNldENlcnRzPWZ1bmN0aW9uKGwpe3ZhciBqPVtdO2Zvcih2YXIgaD0wO2g8bC5sZW5ndGg7aCsrKXt2YXIgZj1LRVlVVElMLmdldEhleEZyb21QRU0obFtoXSk7dmFyIGU9Yi5VdGlsLmhhc2hIZXgoZiwic2hhMSIpO3ZhciBtPW5ldyBhLkRFUk9jdGV0U3RyaW5nKHtoZXg6ZX0pO20uZ2V0RW5jb2RlZEhleCgpO3ZhciBrPW5ldyBjLklzc3VlckFuZFNlcmlhbE51bWJlcih7Y2VydDpsW2hdfSk7ay5nZXRFbmNvZGVkSGV4KCk7dmFyIG49bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OlttLGtdfSk7bi5nZXRFbmNvZGVkSGV4KCk7ai5wdXNoKG4pfXZhciBnPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpqfSk7Zy5nZXRFbmNvZGVkSGV4KCk7dGhpcy52YWx1ZUxpc3Q9W2ddfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBkLmFycmF5PT0ib2JqZWN0Iil7dGhpcy5zZXRDZXJ0cyhkLmFycmF5KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZSxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGVWMj1mdW5jdGlvbihlKXtLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi40NyI7dmFyIGI9S0pVUi5hc24xO3ZhciBmPUtKVVIuYXNuMS54NTA5O3ZhciBkPUtKVVIuYXNuMS5jbXM7dmFyIGM9S0pVUi5jcnlwdG87dGhpcy5zZXRDZXJ0cz1mdW5jdGlvbihwLGgpe3ZhciBuPVtdO2Zvcih2YXIgbD0wO2w8cC5sZW5ndGg7bCsrKXt2YXIgaj1LRVlVVElMLmdldEhleEZyb21QRU0ocFtsXSk7dmFyIHI9W107aWYoaCE9InNoYTI1NiIpe3IucHVzaChuZXcgZi5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmh9KSl9dmFyIGc9Yy5VdGlsLmhhc2hIZXgoaixoKTt2YXIgcT1uZXcgYi5ERVJPY3RldFN0cmluZyh7aGV4Omd9KTtxLmdldEVuY29kZWRIZXgoKTtyLnB1c2gocSk7dmFyIG09bmV3IGQuSXNzdWVyQW5kU2VyaWFsTnVtYmVyKHtjZXJ0OnBbbF19KTttLmdldEVuY29kZWRIZXgoKTtyLnB1c2gobSk7dmFyIG89bmV3IGIuREVSU2VxdWVuY2Uoe2FycmF5OnJ9KTtvLmdldEVuY29kZWRIZXgoKTtuLnB1c2gobyl9dmFyIGs9bmV3IGIuREVSU2VxdWVuY2Uoe2FycmF5Om59KTtrLmdldEVuY29kZWRIZXgoKTt0aGlzLnZhbHVlTGlzdD1ba119O2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUuYXJyYXk9PSJvYmplY3QiKXt2YXIgYT0ic2hhMjU2IjtpZih0eXBlb2YgZS5oYXNoQWxnPT0ic3RyaW5nIil7YT1lLmhhc2hBbGd9dGhpcy5zZXRDZXJ0cyhlLmFycmF5LGEpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlVjIsS0pVUi5hc24xLmNtcy5BdHRyaWJ1dGUpO0tKVVIuYXNuMS5jbXMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZT1udWxsO3ZhciBiPW51bGw7dmFyIGE9S0pVUi5hc24xO3ZhciBkPWEueDUwOTt0aGlzLnNldEJ5Q2VydFBFTT1mdW5jdGlvbihpKXt2YXIgZz1LRVlVVElMLmdldEhleEZyb21QRU0oaSk7dmFyIGY9bmV3IFg1MDkoKTtmLmhleD1nO3ZhciBqPWYuZ2V0SXNzdWVySGV4KCk7dGhpcy5kSXNzdWVyPW5ldyBkLlg1MDBOYW1lKCk7dGhpcy5kSXNzdWVyLmhUTFY9ajt2YXIgaD1mLmdldFNlcmlhbE51bWJlckhleCgpO3RoaXMuZFNlcmlhbD1uZXcgYS5ERVJJbnRlZ2VyKHtoZXg6aH0pfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZj1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5kSXNzdWVyLHRoaXMuZFNlcmlhbF19KTt0aGlzLmhUTFY9Zi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYz09InN0cmluZyImJmMuaW5kZXhPZigiLS0tLS1CRUdJTiAiKSE9LTEpe3RoaXMuc2V0QnlDZXJ0UEVNKGMpfWlmKGMuaXNzdWVyJiZjLnNlcmlhbCl7aWYoYy5pc3N1ZXIgaW5zdGFuY2VvZiBLSlVSLmFzbjEueDUwOS5YNTAwTmFtZSl7dGhpcy5kSXNzdWVyPWMuaXNzdWVyfWVsc2V7dGhpcy5kSXNzdWVyPW5ldyBLSlVSLmFzbjEueDUwOS5YNTAwTmFtZShjLmlzc3Vlcil9aWYoYy5zZXJpYWwgaW5zdGFuY2VvZiBLSlVSLmFzbjEuREVSSW50ZWdlcil7dGhpcy5kU2VyaWFsPWMuc2VyaWFsfWVsc2V7dGhpcy5kU2VyaWFsPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcihjLnNlcmlhbCl9fWlmKHR5cGVvZiBjLmNlcnQ9PSJzdHJpbmciKXt0aGlzLnNldEJ5Q2VydFBFTShjLmNlcnQpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3Q9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLmNtcy5BdHRyaWJ1dGVMaXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmxpc3Q9bmV3IEFycmF5KCk7dGhpcy5zb3J0RmxhZz10cnVlO3RoaXMuYWRkPWZ1bmN0aW9uKGIpe2lmKGIgaW5zdGFuY2VvZiBLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSl7dGhpcy5saXN0LnB1c2goYil9fTt0aGlzLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpc3QubGVuZ3RofTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5saXN0PW5ldyBBcnJheSgpO3RoaXMuaFRMVj1udWxsO3RoaXMuaFY9bnVsbH07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMuaFRMVj09InN0cmluZyIpe3JldHVybiB0aGlzLmhUTFZ9dmFyIGI9bmV3IEtKVVIuYXNuMS5ERVJTZXQoe2FycmF5OnRoaXMubGlzdCxzb3J0ZmxhZzp0aGlzLnNvcnRGbGFnfSk7dGhpcy5oVExWPWIuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuc29ydGZsYWchPSJ1bmRlZmluZWQiJiZhLnNvcnRmbGFnPT1mYWxzZSl7dGhpcy5zb3J0RmxhZz1mYWxzZX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3QsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuU2lnbmVySW5mbz1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY21zLlNpZ25lckluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY21zO3ZhciBkPUtKVVIuYXNuMS54NTA5O3RoaXMuZENNU1ZlcnNpb249bmV3IGEuREVSSW50ZWdlcih7ImludCI6MX0pO3RoaXMuZFNpZ25lcklkZW50aWZpZXI9bnVsbDt0aGlzLmREaWdlc3RBbGdvcml0aG09bnVsbDt0aGlzLmRTaWduZWRBdHRycz1uZXcgYi5BdHRyaWJ1dGVMaXN0KCk7dGhpcy5kU2lnQWxnPW51bGw7dGhpcy5kU2lnPW51bGw7dGhpcy5kVW5zaWduZWRBdHRycz1uZXcgYi5BdHRyaWJ1dGVMaXN0KCk7dGhpcy5zZXRTaWduZXJJZGVudGlmaWVyPWZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBmPT0ic3RyaW5nIiYmZi5pbmRleE9mKCJDRVJUSUZJQ0FURSIpIT0tMSYmZi5pbmRleE9mKCJCRUdJTiIpIT0tMSYmZi5pbmRleE9mKCJFTkQiKSE9LTEpe3ZhciBlPWY7dGhpcy5kU2lnbmVySWRlbnRpZmllcj1uZXcgYi5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIoe2NlcnQ6Zn0pfX07dGhpcy5zZXRGb3JDb250ZW50QW5kSGFzaD1mdW5jdGlvbihlKXtpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKGUuZWNpT2JqIGluc3RhbmNlb2YgS0pVUi5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbyl7dGhpcy5kU2lnbmVkQXR0cnMuYWRkKG5ldyBiLkNvbnRlbnRUeXBlKHtvaWQ6IjEuMi44NDAuMTEzNTQ5LjEuNy4xIn0pKTt0aGlzLmRTaWduZWRBdHRycy5hZGQobmV3IGIuTWVzc2FnZURpZ2VzdCh7ZWNpT2JqOmUuZWNpT2JqLGhhc2hBbGc6ZS5oYXNoQWxnfSkpfWlmKHR5cGVvZiBlLnNkT2JqIT0idW5kZWZpbmVkIiYmZS5zZE9iaiBpbnN0YW5jZW9mIEtKVVIuYXNuMS5jbXMuU2lnbmVkRGF0YSl7aWYoZS5zZE9iai5kaWdlc3RBbGdOYW1lTGlzdC5qb2luKCI6IikuaW5kZXhPZihlLmhhc2hBbGcpPT0tMSl7ZS5zZE9iai5kaWdlc3RBbGdOYW1lTGlzdC5wdXNoKGUuaGFzaEFsZyl9fWlmKHR5cGVvZiBlLmhhc2hBbGc9PSJzdHJpbmciKXt0aGlzLmREaWdlc3RBbGdvcml0aG09bmV3IGQuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTplLmhhc2hBbGd9KX19fTt0aGlzLnNpZ249ZnVuY3Rpb24oaixmKXt0aGlzLmRTaWdBbGc9bmV3IGQuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTpmfSk7dmFyIGc9dGhpcy5kU2lnbmVkQXR0cnMuZ2V0RW5jb2RlZEhleCgpO3ZhciBlPUtFWVVUSUwuZ2V0S2V5KGopO3ZhciBpPW5ldyBLSlVSLmNyeXB0by5TaWduYXR1cmUoe2FsZzpmfSk7aS5pbml0KGUpO2kudXBkYXRlSGV4KGcpO3ZhciBoPWkuc2lnbigpO3RoaXMuZFNpZz1uZXcgYS5ERVJPY3RldFN0cmluZyh7aGV4Omh9KX07dGhpcy5hZGRVbnNpZ25lZD1mdW5jdGlvbihlKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmRVbnNpZ25lZEF0dHJzLmhUTFY9bnVsbDt0aGlzLmRVbnNpZ25lZEF0dHJzLmFkZChlKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kU2lnbmVkQXR0cnMgaW5zdGFuY2VvZiBLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3QmJnRoaXMuZFNpZ25lZEF0dHJzLmxlbmd0aCgpPT0wKXt0aHJvdyJTaWduZWRBdHRycyBsZW5ndGggPSAwIChlbXB0eSkifXZhciBlPW5ldyBhLkRFUlRhZ2dlZE9iamVjdCh7b2JqOnRoaXMuZFNpZ25lZEF0dHJzLHRhZzoiYTAiLGV4cGxpY2l0OmZhbHNlfSk7dmFyIGg9bnVsbDtpZih0aGlzLmRVbnNpZ25lZEF0dHJzLmxlbmd0aCgpPjApe2g9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6dGhpcy5kVW5zaWduZWRBdHRycyx0YWc6ImExIixleHBsaWNpdDpmYWxzZX0pfXZhciBnPVt0aGlzLmRDTVNWZXJzaW9uLHRoaXMuZFNpZ25lcklkZW50aWZpZXIsdGhpcy5kRGlnZXN0QWxnb3JpdGhtLGUsdGhpcy5kU2lnQWxnLHRoaXMuZFNpZyxdO2lmKGghPW51bGwpe2cucHVzaChoKX12YXIgZj1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6Z30pO3RoaXMuaFRMVj1mLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5TaWduZXJJbmZvLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuRW5jYXBzdWxhdGVkQ29udGVudEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY21zO3ZhciBkPUtKVVIuYXNuMS54NTA5O3RoaXMuZEVDb250ZW50VHlwZT1uZXcgYS5ERVJPYmplY3RJZGVudGlmaWVyKHtuYW1lOiJkYXRhIn0pO3RoaXMuZEVDb250ZW50PW51bGw7dGhpcy5pc0RldGFjaGVkPWZhbHNlO3RoaXMuZUNvbnRlbnRWYWx1ZUhleD1udWxsO3RoaXMuc2V0Q29udGVudFR5cGU9ZnVuY3Rpb24oZSl7aWYoZS5tYXRjaCgvXlswLTJdWy5dWzAtOS5dKyQvKSl7dGhpcy5kRUNvbnRlbnRUeXBlPW5ldyBhLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDplfSl9ZWxzZXt0aGlzLmRFQ29udGVudFR5cGU9bmV3IGEuREVST2JqZWN0SWRlbnRpZmllcih7bmFtZTplfSl9fTt0aGlzLnNldENvbnRlbnRWYWx1ZT1mdW5jdGlvbihlKXtpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBlLmhleD09InN0cmluZyIpe3RoaXMuZUNvbnRlbnRWYWx1ZUhleD1lLmhleH1lbHNle2lmKHR5cGVvZiBlLnN0cj09InN0cmluZyIpe3RoaXMuZUNvbnRlbnRWYWx1ZUhleD11dGY4dG9oZXgoZS5zdHIpfX19fTt0aGlzLnNldENvbnRlbnRWYWx1ZUhleD1mdW5jdGlvbihlKXt0aGlzLmVDb250ZW50VmFsdWVIZXg9ZX07dGhpcy5zZXRDb250ZW50VmFsdWVTdHI9ZnVuY3Rpb24oZSl7dGhpcy5lQ29udGVudFZhbHVlSGV4PXV0Zjh0b2hleChlKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMuZUNvbnRlbnRWYWx1ZUhleCE9InN0cmluZyIpe3Rocm93ImVDb250ZW50VmFsdWUgbm90IHlldCBzZXQifXZhciBnPW5ldyBhLkRFUk9jdGV0U3RyaW5nKHtoZXg6dGhpcy5lQ29udGVudFZhbHVlSGV4fSk7dGhpcy5kRUNvbnRlbnQ9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6Zyx0YWc6ImEwIixleHBsaWNpdDp0cnVlfSk7dmFyIGU9W3RoaXMuZEVDb250ZW50VHlwZV07aWYoIXRoaXMuaXNEZXRhY2hlZCl7ZS5wdXNoKHRoaXMuZEVDb250ZW50KX12YXIgZj1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZX0pO3RoaXMuaFRMVj1mLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNtcy5Db250ZW50SW5mbz1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY21zLkNvbnRlbnRJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLmNtczt2YXIgZD1LSlVSLmFzbjEueDUwOTt0aGlzLmRDb250ZW50VHlwZT1udWxsO3RoaXMuZENvbnRlbnQ9bnVsbDt0aGlzLnNldENvbnRlbnRUeXBlPWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlPT0ic3RyaW5nIil7dGhpcy5kQ29udGVudFR5cGU9ZC5PSUQubmFtZTJvYmooZSl9fTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZj1uZXcgYS5ERVJUYWdnZWRPYmplY3Qoe29iajp0aGlzLmRDb250ZW50LHRhZzoiYTAiLGV4cGxpY2l0OnRydWV9KTt2YXIgZT1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuZENvbnRlbnRUeXBlLGZdfSk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYoYy50eXBlKXt0aGlzLnNldENvbnRlbnRUeXBlKGMudHlwZSl9aWYoYy5vYmomJmMub2JqIGluc3RhbmNlb2YgYS5BU04xT2JqZWN0KXt0aGlzLmRDb250ZW50PWMub2JqfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuQ29udGVudEluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuU2lnbmVkRGF0YT1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY21zLlNpZ25lZERhdGEuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY21zO3ZhciBkPUtKVVIuYXNuMS54NTA5O3RoaXMuZENNU1ZlcnNpb249bmV3IGEuREVSSW50ZWdlcih7ImludCI6MX0pO3RoaXMuZERpZ2VzdEFsZ3M9bnVsbDt0aGlzLmRpZ2VzdEFsZ05hbWVMaXN0PVtdO3RoaXMuZEVuY2FwQ29udGVudEluZm89bmV3IGIuRW5jYXBzdWxhdGVkQ29udGVudEluZm8oKTt0aGlzLmRDZXJ0cz1udWxsO3RoaXMuY2VydGlmaWNhdGVMaXN0PVtdO3RoaXMuY3JsTGlzdD1bXTt0aGlzLnNpZ25lckluZm9MaXN0PVtuZXcgYi5TaWduZXJJbmZvKCldO3RoaXMuYWRkQ2VydGlmaWNhdGVzQnlQRU09ZnVuY3Rpb24oZSl7dmFyIGY9S0VZVVRJTC5nZXRIZXhGcm9tUEVNKGUpO3ZhciBnPW5ldyBhLkFTTjFPYmplY3QoKTtnLmhUTFY9Zjt0aGlzLmNlcnRpZmljYXRlTGlzdC5wdXNoKGcpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn1pZih0aGlzLmREaWdlc3RBbGdzPT1udWxsKXt2YXIgaz1bXTtmb3IodmFyIGo9MDtqPHRoaXMuZGlnZXN0QWxnTmFtZUxpc3QubGVuZ3RoO2orKyl7dmFyIGg9dGhpcy5kaWdlc3RBbGdOYW1lTGlzdFtqXTt2YXIgbT1uZXcgZC5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmh9KTtrLnB1c2gobSl9dGhpcy5kRGlnZXN0QWxncz1uZXcgYS5ERVJTZXQoe2FycmF5Omt9KX12YXIgZT1bdGhpcy5kQ01TVmVyc2lvbix0aGlzLmREaWdlc3RBbGdzLHRoaXMuZEVuY2FwQ29udGVudEluZm9dO2lmKHRoaXMuZENlcnRzPT1udWxsKXtpZih0aGlzLmNlcnRpZmljYXRlTGlzdC5sZW5ndGg+MCl7dmFyIGw9bmV3IGEuREVSU2V0KHthcnJheTp0aGlzLmNlcnRpZmljYXRlTGlzdH0pO3RoaXMuZENlcnRzPW5ldyBhLkRFUlRhZ2dlZE9iamVjdCh7b2JqOmwsdGFnOiJhMCIsZXhwbGljaXQ6ZmFsc2V9KX19aWYodGhpcy5kQ2VydHMhPW51bGwpe2UucHVzaCh0aGlzLmRDZXJ0cyl9dmFyIGc9bmV3IGEuREVSU2V0KHthcnJheTp0aGlzLnNpZ25lckluZm9MaXN0fSk7ZS5wdXNoKGcpO3ZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTplfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuZ2V0Q29udGVudEluZm89ZnVuY3Rpb24oKXt0aGlzLmdldEVuY29kZWRIZXgoKTt2YXIgZT1uZXcgYi5Db250ZW50SW5mbyh7dHlwZToic2lnbmVkLWRhdGEiLG9iajp0aGlzfSk7cmV0dXJuIGV9O3RoaXMuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRDb250ZW50SW5mbygpO3ZhciBmPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiBmfTt0aGlzLmdldFBFTT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4KCk7dmFyIGY9YS5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGUsIkNNUyIpO3JldHVybiBmfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5TaWduZWREYXRhLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkNNU1V0aWw9bmV3IGZ1bmN0aW9uKCl7fTtLSlVSLmFzbjEuY21zLkNNU1V0aWwubmV3U2lnbmVkRGF0YT1mdW5jdGlvbihhKXt2YXIgaD1LSlVSLmFzbjEuY21zO3ZhciBnPUtKVVIuYXNuMS5jYWRlczt2YXIgZj1uZXcgaC5TaWduZWREYXRhKCk7Zi5kRW5jYXBDb250ZW50SW5mby5zZXRDb250ZW50VmFsdWUoYS5jb250ZW50KTtpZih0eXBlb2YgYS5jZXJ0cz09Im9iamVjdCIpe2Zvcih2YXIgYj0wO2I8YS5jZXJ0cy5sZW5ndGg7YisrKXtmLmFkZENlcnRpZmljYXRlc0J5UEVNKGEuY2VydHNbYl0pfX1mLnNpZ25lckluZm9MaXN0PVtdO2Zvcih2YXIgYj0wO2I8YS5zaWduZXJJbmZvcy5sZW5ndGg7YisrKXt2YXIgZD1hLnNpZ25lckluZm9zW2JdO3ZhciBjPW5ldyBoLlNpZ25lckluZm8oKTtjLnNldFNpZ25lcklkZW50aWZpZXIoZC5zaWduZXJDZXJ0KTtjLnNldEZvckNvbnRlbnRBbmRIYXNoKHtzZE9iajpmLGVjaU9iajpmLmRFbmNhcENvbnRlbnRJbmZvLGhhc2hBbGc6ZC5oYXNoQWxnfSk7Zm9yKGF0dHJOYW1lIGluIGQuc0F0dHIpe3ZhciBqPWQuc0F0dHJbYXR0ck5hbWVdO2lmKGF0dHJOYW1lPT0iU2lnbmluZ1RpbWUiKXt2YXIgZT1uZXcgaC5TaWduaW5nVGltZShqKTtjLmRTaWduZWRBdHRycy5hZGQoZSl9aWYoYXR0ck5hbWU9PSJTaWduaW5nQ2VydGlmaWNhdGUiKXt2YXIgZT1uZXcgaC5TaWduaW5nQ2VydGlmaWNhdGUoaik7Yy5kU2lnbmVkQXR0cnMuYWRkKGUpfWlmKGF0dHJOYW1lPT0iU2lnbmluZ0NlcnRpZmljYXRlVjIiKXt2YXIgZT1uZXcgaC5TaWduaW5nQ2VydGlmaWNhdGVWMihqKTtjLmRTaWduZWRBdHRycy5hZGQoZSl9aWYoYXR0ck5hbWU9PSJTaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyIil7dmFyIGU9bmV3IGcuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcihqKTtjLmRTaWduZWRBdHRycy5hZGQoZSl9fWMuc2lnbihkLnNpZ25lclBydktleSxkLnNpZ0FsZyk7Zi5zaWduZXJJbmZvTGlzdC5wdXNoKGMpfXJldHVybiBmfTsKLyohIGFzbjF0c3AtMS4wLjEuanMgKGMpIDIwMTQgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuYXNuMT09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEpe0tKVVIuYXNuMT17fX1pZih0eXBlb2YgS0pVUi5hc24xLnRzcD09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEudHNwKXtLSlVSLmFzbjEudHNwPXt9fUtKVVIuYXNuMS50c3AuQWNjdXJhY3k9ZnVuY3Rpb24oYil7S0pVUi5hc24xLnRzcC5BY2N1cmFjeS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3RoaXMuc2Vjb25kcz1udWxsO3RoaXMubWlsbGlzPW51bGw7dGhpcy5taWNyb3M9bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZT1udWxsO3ZhciBnPW51bGw7dmFyIGk9bnVsbDt2YXIgYz1bXTtpZih0aGlzLnNlY29uZHMhPW51bGwpe2U9bmV3IGEuREVSSW50ZWdlcih7ImludCI6dGhpcy5zZWNvbmRzfSk7Yy5wdXNoKGUpfWlmKHRoaXMubWlsbGlzIT1udWxsKXt2YXIgaD1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLm1pbGxpc30pO2c9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6aCx0YWc6IjgwIixleHBsaWNpdDpmYWxzZX0pO2MucHVzaChnKX1pZih0aGlzLm1pY3JvcyE9bnVsbCl7dmFyIGY9bmV3IGEuREVSSW50ZWdlcih7ImludCI6dGhpcy5taWNyb3N9KTtpPW5ldyBhLkRFUlRhZ2dlZE9iamVjdCh7b2JqOmYsdGFnOiI4MSIsZXhwbGljaXQ6ZmFsc2V9KTtjLnB1c2goaSl9dmFyIGQ9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmN9KTt0aGlzLmhUTFY9ZC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5zZWNvbmRzPT0ibnVtYmVyIil7dGhpcy5zZWNvbmRzPWIuc2Vjb25kc31pZih0eXBlb2YgYi5taWxsaXM9PSJudW1iZXIiKXt0aGlzLm1pbGxpcz1iLm1pbGxpc31pZih0eXBlb2YgYi5taWNyb3M9PSJudW1iZXIiKXt0aGlzLm1pY3Jvcz1iLm1pY3Jvc319fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLkFjY3VyYWN5LEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEudHNwLk1lc3NhZ2VJbXByaW50PWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS50c3AuTWVzc2FnZUltcHJpbnQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYz1LSlVSLmFzbjEueDUwOTt0aGlzLmRIYXNoQWxnPW51bGw7dGhpcy5kSGFzaFZhbHVlPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMuaFRMVj09InN0cmluZyIpe3JldHVybiB0aGlzLmhUTFZ9dmFyIGQ9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmRIYXNoQWxnLHRoaXMuZEhhc2hWYWx1ZV19KTtyZXR1cm4gZC5nZXRFbmNvZGVkSGV4KCl9O2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGIuaGFzaEFsZz09InN0cmluZyIpe3RoaXMuZEhhc2hBbGc9bmV3IGMuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTpiLmhhc2hBbGd9KX1pZih0eXBlb2YgYi5oYXNoVmFsdWU9PSJzdHJpbmciKXt0aGlzLmRIYXNoVmFsdWU9bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDpiLmhhc2hWYWx1ZX0pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuTWVzc2FnZUltcHJpbnQsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVxPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVxLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLnRzcDt0aGlzLmRWZXJzaW9uPW5ldyBhLkRFUkludGVnZXIoeyJpbnQiOjF9KTt0aGlzLmRNZXNzYWdlSW1wcmludD1udWxsO3RoaXMuZFBvbGljeT1udWxsO3RoaXMuZE5vbmNlPW51bGw7dGhpcy5jZXJ0UmVxPXRydWU7dGhpcy5zZXRNZXNzYWdlSW1wcmludD1mdW5jdGlvbihkKXtpZihkIGluc3RhbmNlb2YgS0pVUi5hc24xLnRzcC5NZXNzYWdlSW1wcmludCl7dGhpcy5kTWVzc2FnZUltcHJpbnQ9ZDtyZXR1cm59aWYodHlwZW9mIGQ9PSJvYmplY3QiKXt0aGlzLmRNZXNzYWdlSW1wcmludD1uZXcgYi5NZXNzYWdlSW1wcmludChkKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuZE1lc3NhZ2VJbXByaW50PT1udWxsKXt0aHJvdyJtZXNzYWdlSW1wcmludCBzaGFsbCBiZSBzcGVjaWZpZWQifXZhciBkPVt0aGlzLmRWZXJzaW9uLHRoaXMuZE1lc3NhZ2VJbXByaW50XTtpZih0aGlzLmRQb2xpY3khPW51bGwpe2QucHVzaCh0aGlzLmRQb2xpY3kpfWlmKHRoaXMuZE5vbmNlIT1udWxsKXtkLnB1c2godGhpcy5kTm9uY2UpfWlmKHRoaXMuY2VydFJlcSl7ZC5wdXNoKG5ldyBhLkRFUkJvb2xlYW4oKSl9dmFyIGU9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmR9KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy5taT09Im9iamVjdCIpe3RoaXMuc2V0TWVzc2FnZUltcHJpbnQoYy5taSl9aWYodHlwZW9mIGMucG9saWN5PT0ib2JqZWN0Iil7dGhpcy5kUG9saWN5PW5ldyBhLkRFUk9iamVjdElkZW50aWZpZXIoYy5wb2xpY3kpfWlmKHR5cGVvZiBjLm5vbmNlPT0ib2JqZWN0Iil7dGhpcy5kTm9uY2U9bmV3IGEuREVSSW50ZWdlcihjLm5vbmNlKX1pZih0eXBlb2YgYy5jZXJ0cmVxPT0iYm9vbGVhbiIpe3RoaXMuY2VydFJlcT1jLmNlcnRyZXF9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5UaW1lU3RhbXBSZXEsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuVFNUSW5mbz1mdW5jdGlvbihjKXtLSlVSLmFzbjEudHNwLlRTVEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgZD1LSlVSLmFzbjEueDUwOTt2YXIgYj1LSlVSLmFzbjEudHNwO3RoaXMuZFZlcnNpb249bmV3IGEuREVSSW50ZWdlcih7ImludCI6MX0pO3RoaXMuZFBvbGljeT1udWxsO3RoaXMuZE1lc3NhZ2VJbXByaW50PW51bGw7dGhpcy5kU2VyaWFsTnVtYmVyPW51bGw7dGhpcy5kR2VuVGltZT1udWxsO3RoaXMuZEFjY3VyYWN5PW51bGw7dGhpcy5kT3JkZXJpbmc9bnVsbDt0aGlzLmROb25jZT1udWxsO3RoaXMuZFRzYT1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBlPVt0aGlzLmRWZXJzaW9uXTtpZih0aGlzLmRQb2xpY3k9PW51bGwpe3Rocm93InBvbGljeSBzaGFsbCBiZSBzcGVjaWZpZWQuIn1lLnB1c2godGhpcy5kUG9saWN5KTtpZih0aGlzLmRNZXNzYWdlSW1wcmludD09bnVsbCl7dGhyb3cibWVzc2FnZUltcHJpbnQgc2hhbGwgYmUgc3BlY2lmaWVkLiJ9ZS5wdXNoKHRoaXMuZE1lc3NhZ2VJbXByaW50KTtpZih0aGlzLmRTZXJpYWxOdW1iZXI9PW51bGwpe3Rocm93InNlcmlhbE51bWJlciBzaGFsbCBiZSBzcGVjaWZpZWQuIn1lLnB1c2godGhpcy5kU2VyaWFsTnVtYmVyKTtpZih0aGlzLmRHZW5UaW1lPT1udWxsKXt0aHJvdyJnZW5UaW1lIHNoYWxsIGJlIHNwZWNpZmllZC4ifWUucHVzaCh0aGlzLmRHZW5UaW1lKTtpZih0aGlzLmRBY2N1cmFjeSE9bnVsbCl7ZS5wdXNoKHRoaXMuZEFjY3VyYWN5KX1pZih0aGlzLmRPcmRlcmluZyE9bnVsbCl7ZS5wdXNoKHRoaXMuZE9yZGVyaW5nKX1pZih0aGlzLmROb25jZSE9bnVsbCl7ZS5wdXNoKHRoaXMuZE5vbmNlKX1pZih0aGlzLmRUc2EhPW51bGwpe2UucHVzaCh0aGlzLmRUc2EpfXZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTplfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMucG9saWN5PT0ic3RyaW5nIil7aWYoIWMucG9saWN5Lm1hdGNoKC9eWzAtOS5dKyQvKSl7dGhyb3cicG9saWN5IHNoYWxsIGJlIG9pZCBsaWtlIDAuMS40LjEzNCJ9dGhpcy5kUG9saWN5PW5ldyBhLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDpjLnBvbGljeX0pfWlmKHR5cGVvZiBjLm1lc3NhZ2VJbXByaW50IT0idW5kZWZpbmVkIil7dGhpcy5kTWVzc2FnZUltcHJpbnQ9bmV3IGIuTWVzc2FnZUltcHJpbnQoYy5tZXNzYWdlSW1wcmludCl9aWYodHlwZW9mIGMuc2VyaWFsTnVtYmVyIT0idW5kZWZpbmVkIil7dGhpcy5kU2VyaWFsTnVtYmVyPW5ldyBhLkRFUkludGVnZXIoYy5zZXJpYWxOdW1iZXIpfWlmKHR5cGVvZiBjLmdlblRpbWUhPSJ1bmRlZmluZWQiKXt0aGlzLmRHZW5UaW1lPW5ldyBhLkRFUkdlbmVyYWxpemVkVGltZShjLmdlblRpbWUpfWlmKHR5cGVvZiBjLmFjY3VyYWN5IT0idW5kZWZpbmQiKXt0aGlzLmRBY2N1cmFjeT1uZXcgYi5BY2N1cmFjeShjLmFjY3VyYWN5KX1pZih0eXBlb2YgYy5vcmRlcmluZyE9InVuZGVmaW5lZCImJmMub3JkZXJpbmc9PXRydWUpe3RoaXMuZE9yZGVyaW5nPW5ldyBhLkRFUkJvb2xlYW4oKX1pZih0eXBlb2YgYy5ub25jZSE9InVuZGVmaW5lZCIpe3RoaXMuZE5vbmNlPW5ldyBhLkRFUkludGVnZXIoYy5ub25jZSl9aWYodHlwZW9mIGMudHNhIT0idW5kZWZpbmVkIil7dGhpcy5kVHNhPW5ldyBkLlg1MDBOYW1lKGMudHNhKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlRTVEluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVzcD1mdW5jdGlvbihjKXtLSlVSLmFzbjEudHNwLlRpbWVTdGFtcFJlc3Auc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEudHNwO3RoaXMuZFN0YXR1cz1udWxsO3RoaXMuZFRTVD1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuZFN0YXR1cz09bnVsbCl7dGhyb3cic3RhdHVzIHNoYWxsIGJlIHNwZWNpZmllZCJ9dmFyIGQ9W3RoaXMuZFN0YXR1c107aWYodGhpcy5kVFNUIT1udWxsKXtkLnB1c2godGhpcy5kVFNUKX12YXIgZT1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZH0pO3RoaXMuaFRMVj1lLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLnN0YXR1cz09Im9iamVjdCIpe3RoaXMuZFN0YXR1cz1uZXcgYi5QS0lTdGF0dXNJbmZvKGMuc3RhdHVzKX1pZih0eXBlb2YgYy50c3QhPSJ1bmRlZmluZWQiJiZjLnRzdCBpbnN0YW5jZW9mIEtKVVIuYXNuMS5BU04xT2JqZWN0KXt0aGlzLmRUU1Q9Yy50c3QuZ2V0Q29udGVudEluZm8oKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlRpbWVTdGFtcFJlc3AsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzSW5mbz1mdW5jdGlvbihjKXtLSlVSLmFzbjEudHNwLlBLSVN0YXR1c0luZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEudHNwO3RoaXMuZFN0YXR1cz1udWxsO3RoaXMuZFN0YXR1c1N0cmluZz1udWxsO3RoaXMuZEZhaWx1cmVJbmZvPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kU3RhdHVzPT1udWxsKXt0aHJvdyJzdGF0dXMgc2hhbGwgYmUgc3BlY2lmaWVkIn12YXIgZD1bdGhpcy5kU3RhdHVzXTtpZih0aGlzLmRTdGF0dXNTdHJpbmchPW51bGwpe2QucHVzaCh0aGlzLmRTdGF0dXNTdHJpbmcpfWlmKHRoaXMuZEZhaWx1cmVJbmZvIT1udWxsKXtkLnB1c2godGhpcy5kRmFpbHVyZUluZm8pfXZhciBlPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpkfSk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMuc3RhdHVzPT0ib2JqZWN0Iil7dGhpcy5kU3RhdHVzPW5ldyBiLlBLSVN0YXR1cyhjLnN0YXR1cyl9aWYodHlwZW9mIGMuc3RhdHN0cj09Im9iamVjdCIpe3RoaXMuZFN0YXR1c1N0cmluZz1uZXcgYi5QS0lGcmVlVGV4dCh7YXJyYXk6Yy5zdGF0c3RyfSl9aWYodHlwZW9mIGMuZmFpbGluZm89PSJvYmplY3QiKXt0aGlzLmRGYWlsdXJlSW5mbz1uZXcgYi5QS0lGYWlsdXJlSW5mbyhjLmZhaWxpbmZvKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlBLSVN0YXR1c0luZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLnRzcDt2YXIgZD1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3RoaXMuaFRMVj10aGlzLmRTdGF0dXMuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUubmFtZSE9InVuZGVmaW5lZCIpe3ZhciBjPWIuUEtJU3RhdHVzLnZhbHVlTGlzdDtpZih0eXBlb2YgY1tlLm5hbWVdPT0idW5kZWZpbmVkIil7dGhyb3cibmFtZSB1bmRlZmluZWQ6ICIrZS5uYW1lfXRoaXMuZFN0YXR1cz1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50IjpjW2UubmFtZV19KX1lbHNle3RoaXMuZFN0YXR1cz1uZXcgYS5ERVJJbnRlZ2VyKGUpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuUEtJU3RhdHVzLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEudHNwLlBLSVN0YXR1cy52YWx1ZUxpc3Q9e2dyYW50ZWQ6MCxncmFudGVkV2l0aE1vZHM6MSxyZWplY3Rpb246Mix3YWl0aW5nOjMscmV2b2NhdGlvbldhcm5pbmc6NCxyZXZvY2F0aW9uTm90aWZpY2F0aW9uOjV9O0tKVVIuYXNuMS50c3AuUEtJRnJlZVRleHQ9ZnVuY3Rpb24oYil7S0pVUi5hc24xLnRzcC5QS0lGcmVlVGV4dC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3RoaXMudGV4dExpc3Q9W107dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGM9W107Zm9yKHZhciBlPTA7ZTx0aGlzLnRleHRMaXN0Lmxlbmd0aDtlKyspe2MucHVzaChuZXcgYS5ERVJVVEY4U3RyaW5nKHtzdHI6dGhpcy50ZXh0TGlzdFtlXX0pKX12YXIgZD1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6Y30pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmFycmF5PT0ib2JqZWN0Iil7dGhpcy50ZXh0TGlzdD1iLmFycmF5fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuUEtJRnJlZVRleHQsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuUEtJRmFpbHVyZUluZm89ZnVuY3Rpb24oZCl7S0pVUi5hc24xLnRzcC5QS0lGYWlsdXJlSW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS50c3A7dGhpcy52YWx1ZT1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMudmFsdWU9PW51bGwpe3Rocm93InZhbHVlIHNoYWxsIGJlIHNwZWNpZmllZCJ9dmFyIGU9bmV3IE51bWJlcih0aGlzLnZhbHVlKS50b1N0cmluZygyKTt2YXIgZj1uZXcgYS5ERVJCaXRTdHJpbmcoKTtmLnNldEJ5QmluYXJ5U3RyaW5nKGUpO3RoaXMuaFRMVj1mLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBkLm5hbWU9PSJzdHJpbmciKXt2YXIgYz1iLlBLSUZhaWx1cmVJbmZvLnZhbHVlTGlzdDtpZih0eXBlb2YgY1tkLm5hbWVdPT0idW5kZWZpbmVkIil7dGhyb3cibmFtZSB1bmRlZmluZWQ6ICIrZC5uYW1lfXRoaXMudmFsdWU9Y1tkLm5hbWVdfWVsc2V7aWYodHlwZW9mIGRbImludCJdPT0ibnVtYmVyIil7dGhpcy52YWx1ZT1kWyJpbnQiXX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5QS0lGYWlsdXJlSW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5QS0lGYWlsdXJlSW5mby52YWx1ZUxpc3Q9e2JhZEFsZzowLGJhZFJlcXVlc3Q6MixiYWREYXRhRm9ybWF0OjUsdGltZU5vdEF2YWlsYWJsZToxNCx1bmFjY2VwdGVkUG9saWN5OjE1LHVuYWNjZXB0ZWRFeHRlbnNpb246MTYsYWRkSW5mb05vdEF2YWlsYWJsZToxNyxzeXN0ZW1GYWlsdXJlOjI1fTtLSlVSLmFzbjEudHNwLkFic3RyYWN0VFNBQWRhcHRlcj1mdW5jdGlvbihhKXt0aGlzLmdldFRTVEhleD1mdW5jdGlvbihjLGIpe3Rocm93Im5vdCBpbXBsZW1lbnRlZCB5ZXQifX07S0pVUi5hc24xLnRzcC5TaW1wbGVUU0FBZGFwdGVyPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS50c3AuU2ltcGxlVFNBQWRhcHRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5wYXJhbXM9bnVsbDt0aGlzLnNlcmlhbD0wO3RoaXMuZ2V0VFNUSGV4PWZ1bmN0aW9uKGMsYil7dmFyIGU9S0pVUi5jcnlwdG8uVXRpbC5oYXNoSGV4KGMsYik7dGhpcy5wYXJhbXMudHN0SW5mby5tZXNzYWdlSW1wcmludD17aGFzaEFsZzpiLGhhc2hWYWx1ZTplfTt0aGlzLnBhcmFtcy50c3RJbmZvLnNlcmlhbE51bWJlcj17ImludCI6dGhpcy5zZXJpYWwrK307dmFyIGQ9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwMDAwMDApO3RoaXMucGFyYW1zLnRzdEluZm8ubm9uY2U9eyJpbnQiOmR9O3ZhciBmPUtKVVIuYXNuMS50c3AuVFNQVXRpbC5uZXdUaW1lU3RhbXBUb2tlbih0aGlzLnBhcmFtcyk7cmV0dXJuIGYuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4KCl9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7dGhpcy5wYXJhbXM9YX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuU2ltcGxlVFNBQWRhcHRlcixLSlVSLmFzbjEudHNwLkFic3RyYWN0VFNBQWRhcHRlcik7S0pVUi5hc24xLnRzcC5GaXhlZFRTQUFkYXB0ZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLnRzcC5GaXhlZFRTQUFkYXB0ZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMucGFyYW1zPW51bGw7dGhpcy5nZXRUU1RIZXg9ZnVuY3Rpb24oYyxiKXt2YXIgZD1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYyxiKTt0aGlzLnBhcmFtcy50c3RJbmZvLm1lc3NhZ2VJbXByaW50PXtoYXNoQWxnOmIsaGFzaFZhbHVlOmR9O3ZhciBlPUtKVVIuYXNuMS50c3AuVFNQVXRpbC5uZXdUaW1lU3RhbXBUb2tlbih0aGlzLnBhcmFtcyk7cmV0dXJuIGUuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4KCl9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7dGhpcy5wYXJhbXM9YX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuRml4ZWRUU0FBZGFwdGVyLEtKVVIuYXNuMS50c3AuQWJzdHJhY3RUU0FBZGFwdGVyKTtLSlVSLmFzbjEudHNwLlRTUFV0aWw9bmV3IGZ1bmN0aW9uKCl7fTtLSlVSLmFzbjEudHNwLlRTUFV0aWwubmV3VGltZVN0YW1wVG9rZW49ZnVuY3Rpb24oYil7dmFyIGo9S0pVUi5hc24xLmNtczt2YXIgYT1LSlVSLmFzbjEudHNwO3ZhciBnPW5ldyBqLlNpZ25lZERhdGEoKTt2YXIgZT1uZXcgYS5UU1RJbmZvKGIudHN0SW5mbyk7dmFyIGY9ZS5nZXRFbmNvZGVkSGV4KCk7Zy5kRW5jYXBDb250ZW50SW5mby5zZXRDb250ZW50VmFsdWUoe2hleDpmfSk7Zy5kRW5jYXBDb250ZW50SW5mby5zZXRDb250ZW50VHlwZSgidHN0aW5mbyIpO2lmKHR5cGVvZiBiLmNlcnRzPT0ib2JqZWN0Iil7Zm9yKHZhciBjPTA7YzxiLmNlcnRzLmxlbmd0aDtjKyspe2cuYWRkQ2VydGlmaWNhdGVzQnlQRU0oYi5jZXJ0c1tjXSl9fXZhciBkPWcuc2lnbmVySW5mb0xpc3RbMF07ZC5zZXRTaWduZXJJZGVudGlmaWVyKGIuc2lnbmVyQ2VydCk7ZC5zZXRGb3JDb250ZW50QW5kSGFzaCh7c2RPYmo6ZyxlY2lPYmo6Zy5kRW5jYXBDb250ZW50SW5mbyxoYXNoQWxnOmIuaGFzaEFsZ30pO3ZhciBoPW5ldyBqLlNpZ25pbmdDZXJ0aWZpY2F0ZSh7YXJyYXk6W2Iuc2lnbmVyQ2VydF19KTtkLmRTaWduZWRBdHRycy5hZGQoaCk7ZC5zaWduKGIuc2lnbmVyUHJ2S2V5LGIuc2lnQWxnKTtyZXR1cm4gZ307S0pVUi5hc24xLnRzcC5UU1BVdGlsLnBhcnNlVGltZVN0YW1wUmVxPWZ1bmN0aW9uKGQpe3ZhciBmPXt9O2YuY2VydHJlcT1mYWxzZTt2YXIgaD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihkLDApO2lmKGgubGVuZ3RoPDIpe3Rocm93IlRpbWVTdGFtcFJlcSBtdXN0IGhhdmUgYXQgbGVhc3QgMiBpdGVtcyJ9dmFyIGM9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGhbMV0pO2YubWk9S0pVUi5hc24xLnRzcC5UU1BVdGlsLnBhcnNlTWVzc2FnZUltcHJpbnQoYyk7Zm9yKHZhciBlPTI7ZTxoLmxlbmd0aDtlKyspe3ZhciBiPWhbZV07dmFyIGE9ZC5zdWJzdHIoYiwyKTtpZihhPT0iMDYiKXt2YXIgZz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihkLGIpO2YucG9saWN5PUFTTjFIRVguaGV4dG9vaWRzdHIoZyl9aWYoYT09IjAyIil7Zi5ub25jZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihkLGIpfWlmKGE9PSIwMSIpe2YuY2VydHJlcT10cnVlfX1yZXR1cm4gZn07S0pVUi5hc24xLnRzcC5UU1BVdGlsLnBhcnNlTWVzc2FnZUltcHJpbnQ9ZnVuY3Rpb24oYyl7dmFyIGg9e307aWYoYy5zdWJzdHIoMCwyKSE9IjMwIil7dGhyb3ciaGVhZCBvZiBtZXNzYWdlSW1wcmludCBoZXggc2hhbGwgYmUgJzMwJyJ9dmFyIGE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooYywwKTt2YXIgaT1BU04xSEVYLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGMsMCxbMCwwXSk7dmFyIGQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYyxpKTt2YXIgZT1BU04xSEVYLmhleHRvb2lkc3RyKGQpO3ZhciBnPUtKVVIuYXNuMS54NTA5Lk9JRC5vaWQybmFtZShlKTtpZihnPT0iIil7dGhyb3ciaGFzaEFsZyBuYW1lIHVuZGVmaW5lZDogIitlfXZhciBiPWc7dmFyIGY9QVNOMUhFWC5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChjLDAsWzFdKTtoLmhhc2hBbGc9YjtoLmhhc2hWYWx1ZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLGYpO3JldHVybiBofTsKLyohIGFzbjFjYWRlcy0xLjAuMC5qcyAoYykgMjAxMy0yMDE0IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319aWYodHlwZW9mIEtKVVIuYXNuMS5jYWRlcz09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEuY2FkZXMpe0tKVVIuYXNuMS5jYWRlcz17fX1LSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcj1mdW5jdGlvbihlKXtLSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hdHRyVHlwZU9pZD0iMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTUiO3ZhciBiPUtKVVIuYXNuMTt2YXIgZD1LSlVSLmFzbjEuY2FkZXM7aWYodHlwZW9mIGUhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZS5vaWQ9PSJzdHJpbmciJiZ0eXBlb2YgZS5oYXNoPT0ib2JqZWN0Iil7dmFyIGY9bmV3IGIuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOmUub2lkfSk7dmFyIGE9bmV3IGQuT3RoZXJIYXNoQWxnQW5kVmFsdWUoZS5oYXNoKTt2YXIgYz1uZXcgYi5ERVJTZXF1ZW5jZSh7YXJyYXk6W2YsYV19KTt0aGlzLnZhbHVlTGlzdD1bY119fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNhZGVzLlNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXIsS0pVUi5hc24xLmNtcy5BdHRyaWJ1dGUpO0tKVVIuYXNuMS5jYWRlcy5PdGhlckhhc2hBbGdBbmRWYWx1ZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoQWxnQW5kVmFsdWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYz1LSlVSLmFzbjEueDUwOTt0aGlzLmRBbGc9bnVsbDt0aGlzLmRIYXNoPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGQ9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmRBbGcsdGhpcy5kSGFzaF19KTt0aGlzLmhUTFY9ZC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5hbGc9PSJzdHJpbmciJiZ0eXBlb2YgYi5oYXNoPT0ic3RyaW5nIil7dGhpcy5kQWxnPW5ldyBjLkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6Yi5hbGd9KTt0aGlzLmRIYXNoPW5ldyBhLkRFUk9jdGV0U3RyaW5nKHtoZXg6Yi5oYXNofSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNhZGVzLk90aGVySGFzaEFsZ0FuZFZhbHVlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlVGltZVN0YW1wPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jYWRlcy5TaWduYXR1cmVUaW1lU3RhbXAuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjE0Ijt0aGlzLnRzdEhleD1udWxsO3ZhciBhPUtKVVIuYXNuMTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLnJlcyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLnJlcz09InN0cmluZyImJmMucmVzLm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXt9ZWxzZXtpZihjLnJlcyBpbnN0YW5jZW9mIEtKVVIuYXNuMS5BU04xT2JqZWN0KXt9ZWxzZXt0aHJvdyJyZXMgcGFyYW0gc2hhbGwgYmUgQVNOMU9iamVjdCBvciBoZXggc3RyaW5nIn19fWlmKHR5cGVvZiBjLnRzdCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLnRzdD09InN0cmluZyImJmMudHN0Lm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXt2YXIgYj1uZXcgYS5BU04xT2JqZWN0KCk7dGhpcy50c3RIZXg9Yy50c3Q7Yi5oVExWPXRoaXMudHN0SGV4O2IuZ2V0RW5jb2RlZEhleCgpO3RoaXMudmFsdWVMaXN0PVtiXX1lbHNle2lmKGMudHN0IGluc3RhbmNlb2YgS0pVUi5hc24xLkFTTjFPYmplY3Qpe31lbHNle3Rocm93InRzdCBwYXJhbSBzaGFsbCBiZSBBU04xT2JqZWN0IG9yIGhleCBzdHJpbmcifX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNhZGVzLlNpZ25hdHVyZVRpbWVTdGFtcCxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNhZGVzLkNvbXBsZXRlQ2VydGlmaWNhdGVSZWZzPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jYWRlcy5Db21wbGV0ZUNlcnRpZmljYXRlUmVmcy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hdHRyVHlwZU9pZD0iMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMjEiO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY2FkZXM7dGhpcy5zZXRCeUFycmF5PWZ1bmN0aW9uKGQpe3RoaXMudmFsdWVMaXN0PVtdO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1uZXcgYi5PdGhlckNlcnRJRChkW2VdKTt0aGlzLnZhbHVlTGlzdC5wdXNoKGYpfX07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYz09Im9iamVjdCImJnR5cGVvZiBjLmxlbmd0aD09Im51bWJlciIpe3RoaXMuc2V0QnlBcnJheShjKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuQ29tcGxldGVDZXJ0aWZpY2F0ZVJlZnMsS0pVUi5hc24xLmNtcy5BdHRyaWJ1dGUpO0tKVVIuYXNuMS5jYWRlcy5PdGhlckNlcnRJRD1mdW5jdGlvbihkKXtLSlVSLmFzbjEuY2FkZXMuT3RoZXJDZXJ0SUQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYz1LSlVSLmFzbjEuY21zO3ZhciBiPUtKVVIuYXNuMS5jYWRlczt0aGlzLmhhc0lzc3VlclNlcmlhbD10cnVlO3RoaXMuZE90aGVyQ2VydEhhc2g9bnVsbDt0aGlzLmRJc3N1ZXJTZXJpYWw9bnVsbDt0aGlzLnNldEJ5Q2VydFBFTT1mdW5jdGlvbihlKXt0aGlzLmRPdGhlckNlcnRIYXNoPW5ldyBiLk90aGVySGFzaChlKTtpZih0aGlzLmhhc0lzc3VlclNlcmlhbCl7dGhpcy5kSXNzdWVyU2VyaWFsPW5ldyBjLklzc3VlckFuZFNlcmlhbE51bWJlcihlKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuaFRMViE9bnVsbCl7cmV0dXJuIHRoaXMuaFRMVn1pZih0aGlzLmRPdGhlckNlcnRIYXNoPT1udWxsKXt0aHJvdyJvdGhlckNlcnRIYXNoIG5vdCBzZXQifXZhciBlPVt0aGlzLmRPdGhlckNlcnRIYXNoXTtpZih0aGlzLmRJc3N1ZXJTZXJpYWwhPW51bGwpe2UucHVzaCh0aGlzLmRJc3N1ZXJTZXJpYWwpfXZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTplfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBkIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGQ9PSJzdHJpbmciJiZkLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXt0aGlzLnNldEJ5Q2VydFBFTShkKX1pZih0eXBlb2YgZD09Im9iamVjdCIpe2lmKGQuaGFzaXM9PT1mYWxzZSl7dGhpcy5oYXNJc3N1ZXJTZXJpYWw9ZmFsc2V9aWYodHlwZW9mIGQuY2VydD09InN0cmluZyIpe3RoaXMuc2V0QnlDZXJ0UEVNKGQuY2VydCl9fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jYWRlcy5PdGhlckNlcnRJRCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNhZGVzLk90aGVySGFzaD1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLmNhZGVzO3RoaXMuYWxnPSJzaGEyNTYiO3RoaXMuZE90aGVySGFzaD1udWxsO3RoaXMuc2V0QnlDZXJ0UEVNPWZ1bmN0aW9uKGQpe2lmKGQuaW5kZXhPZigiLS0tLS1CRUdJTiAiKT09LTEpe3Rocm93ImNlcnRQRU0gbm90IHRvIHNlZW0gUEVNIGZvcm1hdCJ9dmFyIGU9WDUwOS5wZW1Ub0hleChkKTt2YXIgZj1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoZSx0aGlzLmFsZyk7dGhpcy5kT3RoZXJIYXNoPW5ldyBiLk90aGVySGFzaEFsZ0FuZFZhbHVlKHthbGc6dGhpcy5hbGcsaGFzaDpmfSl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuZE90aGVySGFzaD09bnVsbCl7dGhyb3ciT3RoZXJIYXNoIG5vdCBzZXQifXJldHVybiB0aGlzLmRPdGhlckhhc2guZ2V0RW5jb2RlZEhleCgpfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ic3RyaW5nIil7aWYoYy5pbmRleE9mKCItLS0tLUJFR0lOICIpIT0tMSl7dGhpcy5zZXRCeUNlcnRQRU0oYyl9ZWxzZXtpZihjLm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXt0aGlzLmRPdGhlckhhc2g9bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDpjfSl9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBzdHJpbmcgdmFsdWUgZm9yIHBhcmFtcyJ9fX1lbHNle2lmKHR5cGVvZiBjPT0ib2JqZWN0Iil7aWYodHlwZW9mIGMuY2VydD09InN0cmluZyIpe2lmKHR5cGVvZiBjLmFsZz09InN0cmluZyIpe3RoaXMuYWxnPWMuYWxnfXRoaXMuc2V0QnlDZXJ0UEVNKGMuY2VydCl9ZWxzZXt0aGlzLmRPdGhlckhhc2g9bmV3IGIuT3RoZXJIYXNoQWxnQW5kVmFsdWUoYyl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY2FkZXMuQ0FkRVNVdGlsPW5ldyBmdW5jdGlvbigpe307S0pVUi5hc24xLmNhZGVzLkNBZEVTVXRpbC5hZGRTaWdUUz1mdW5jdGlvbihjLGIsYSl7fTtLSlVSLmFzbjEuY2FkZXMuQ0FkRVNVdGlsLnBhcnNlU2lnbmVkRGF0YUZvckFkZGluZ1Vuc2lnbmVkPWZ1bmN0aW9uKGQpe3ZhciBxPUtKVVIuYXNuMTt2YXIgcD1LSlVSLmFzbjEuY21zO3ZhciBjPUtKVVIuYXNuMS5jYWRlcy5DQWRFU1V0aWw7dmFyIGE9e307aWYoQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QoZCwwLFswXSkhPSIwNjA5MmE4NjQ4ODZmNzBkMDEwNzAyIil7dGhyb3ciaGV4IGlzIG5vdCBDTVMgU2lnbmVkRGF0YSJ9dmFyIHM9QVNOMUhFWC5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChkLDAsWzEsMF0pO3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQscyk7aWYoYi5sZW5ndGg8NCl7dGhyb3cibnVtIG9mIFNpZ25lZERhdGEgZWxlbSBzaGFsbCBiZSA0IGF0IGxlYXN0In12YXIgZj1iLnNoaWZ0KCk7YS52ZXJzaW9uPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxmKTt2YXIgbD1iLnNoaWZ0KCk7YS5hbGdzPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxsKTt2YXIgbT1iLnNoaWZ0KCk7YS5lbmNhcGNvbnRlbnQ9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLG0pO2EuY2VydHM9bnVsbDthLnJldnM9bnVsbDthLnNpPVtdO3ZhciBuPWIuc2hpZnQoKTtpZihkLnN1YnN0cihuLDIpPT0iYTAiKXthLmNlcnRzPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxuKTtuPWIuc2hpZnQoKX1pZihkLnN1YnN0cihuLDIpPT0iYTEiKXthLnJldnM9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLG4pO249Yi5zaGlmdCgpfXZhciBrPW47aWYoZC5zdWJzdHIoaywyKSE9IjMxIil7dGhyb3ciQ2FuJ3QgZmluZCBzaWduZXJJbmZvcyJ9dmFyIGo9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxrKTtmb3IodmFyIGg9MDtoPGoubGVuZ3RoO2grKyl7dmFyIG89altoXTt2YXIgZT1jLnBhcnNlU2lnbmVySW5mb0ZvckFkZGluZ1Vuc2lnbmVkKGQsbyxoKTthLnNpW2hdPWV9dmFyIGc9bnVsbDthLm9iaj1uZXcgcC5TaWduZWREYXRhKCk7Zz1uZXcgcS5BU04xT2JqZWN0KCk7Zy5oVExWPWEudmVyc2lvbjthLm9iai5kQ01TVmVyc2lvbj1nO2c9bmV3IHEuQVNOMU9iamVjdCgpO2cuaFRMVj1hLmFsZ3M7YS5vYmouZERpZ2VzdEFsZ3M9ZztnPW5ldyBxLkFTTjFPYmplY3QoKTtnLmhUTFY9YS5lbmNhcGNvbnRlbnQ7YS5vYmouZEVuY2FwQ29udGVudEluZm89ZztnPW5ldyBxLkFTTjFPYmplY3QoKTtnLmhUTFY9YS5jZXJ0czthLm9iai5kQ2VydHM9ZzthLm9iai5zaWduZXJJbmZvTGlzdD1bXTtmb3IodmFyIGg9MDtoPGEuc2kubGVuZ3RoO2grKyl7YS5vYmouc2lnbmVySW5mb0xpc3QucHVzaChhLnNpW2hdLm9iail9cmV0dXJuIGF9O0tKVVIuYXNuMS5jYWRlcy5DQWRFU1V0aWwucGFyc2VTaWduZXJJbmZvRm9yQWRkaW5nVW5zaWduZWQ9ZnVuY3Rpb24oZCxrLGEpe3ZhciBtPUtKVVIuYXNuMTt2YXIgbD1LSlVSLmFzbjEuY21zO3ZhciBiPXt9O3ZhciBlPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQsayk7aWYoZS5sZW5ndGghPTYpe3Rocm93Im5vdCBzdXBwb3J0ZWQgaXRlbXMgZm9yIFNpZ25lckluZm8gKCE9NikifXZhciBmPWUuc2hpZnQoKTtiLnZlcnNpb249QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGYpO3ZhciBuPWUuc2hpZnQoKTtiLnNpPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxuKTt2YXIgaD1lLnNoaWZ0KCk7Yi5kaWdhbGc9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGgpO3ZhciBjPWUuc2hpZnQoKTtiLnNhdHRycz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsYyk7dmFyIGk9ZS5zaGlmdCgpO2Iuc2lnYWxnPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxpKTt2YXIgaj1lLnNoaWZ0KCk7Yi5zaWc9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGopO2Iuc2lndmFsPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGQsaik7dmFyIGc9bnVsbDtiLm9iaj1uZXcgbC5TaWduZXJJbmZvKCk7Zz1uZXcgbS5BU04xT2JqZWN0KCk7Zy5oVExWPWIudmVyc2lvbjtiLm9iai5kQ01TVmVyc2lvbj1nO2c9bmV3IG0uQVNOMU9iamVjdCgpO2cuaFRMVj1iLnNpO2Iub2JqLmRTaWduZXJJZGVudGlmaWVyPWc7Zz1uZXcgbS5BU04xT2JqZWN0KCk7Zy5oVExWPWIuZGlnYWxnO2Iub2JqLmREaWdlc3RBbGdvcml0aG09ZztnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi5zYXR0cnM7Yi5vYmouZFNpZ25lZEF0dHJzPWc7Zz1uZXcgbS5BU04xT2JqZWN0KCk7Zy5oVExWPWIuc2lnYWxnO2Iub2JqLmRTaWdBbGc9ZztnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi5zaWc7Yi5vYmouZFNpZz1nO2Iub2JqLmRVbnNpZ25lZEF0dHJzPW5ldyBsLkF0dHJpYnV0ZUxpc3QoKTtyZXR1cm4gYn07Ci8qISBhc24xY3NyLTEuMC4wLmpzIChjKSAyMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUi5hc24xLmNzcj09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEuY3NyKXtLSlVSLmFzbjEuY3NyPXt9fUtKVVIuYXNuMS5jc3IuQ2VydGlmaWNhdGlvblJlcXVlc3Q9ZnVuY3Rpb24oZil7S0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgZD1udWxsO3ZhciBlPW51bGw7dmFyIGM9bnVsbDt2YXIgYT1udWxsO3RoaXMuc2lnbj1mdW5jdGlvbihpLGgpe2lmKHRoaXMucHJ2S2V5PT1udWxsKXt0aGlzLnBydktleT1ofXRoaXMuYXNuMVNpZ25hdHVyZUFsZz1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTppfSk7c2lnPW5ldyBLSlVSLmNyeXB0by5TaWduYXR1cmUoe2FsZzppfSk7c2lnLmluaXRTaWduKHRoaXMucHJ2S2V5KTtzaWcudXBkYXRlSGV4KHRoaXMuYXNuMUNTUkluZm8uZ2V0RW5jb2RlZEhleCgpKTt0aGlzLmhleFNpZz1zaWcuc2lnbigpO3RoaXMuYXNuMVNpZz1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrdGhpcy5oZXhTaWd9KTt2YXIgZz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5hc24xQ1NSSW5mbyx0aGlzLmFzbjFTaWduYXR1cmVBbGcsdGhpcy5hc24xU2lnXX0pO3RoaXMuaFRMVj1nLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2V9O3RoaXMuZ2V0UEVNU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGc9S0pVUi5hc24xLkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgodGhpcy5nZXRFbmNvZGVkSGV4KCksIkNFUlRJRklDQVRFIFJFUVVFU1QiKTtyZXR1cm4gZ307dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5pc01vZGlmaWVkPT1mYWxzZSYmdGhpcy5oVExWIT1udWxsKXtyZXR1cm4gdGhpcy5oVExWfXRocm93Im5vdCBzaWduZWQgeWV0In07aWYodHlwZW9mIGYhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZi5jc3JpbmZvIT0idW5kZWZpbmVkIil7dGhpcy5hc24xQ1NSSW5mbz1mLmNzcmluZm99fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm89ZnVuY3Rpb24oYSl7S0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuX2luaXRpYWxpemU9ZnVuY3Rpb24oKXt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTt0aGlzLmFzbjFWZXJzaW9uPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6MH0pO3RoaXMuYXNuMVN1YmplY3Q9bnVsbDt0aGlzLmFzbjFTdWJqUEtleT1udWxsO3RoaXMuZXh0ZW5zaW9uc0FycmF5PW5ldyBBcnJheSgpfTt0aGlzLnNldFN1YmplY3RCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMVN1YmplY3Q9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGIpfTt0aGlzLnNldFN1YmplY3RQdWJsaWNLZXlCeUdldEtleT1mdW5jdGlvbihjKXt2YXIgYj1LRVlVVElMLmdldEtleShjKTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8oYil9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xVmVyc2lvbik7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFTdWJqZWN0KTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVN1YmpQS2V5KTt2YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmV4dGVuc2lvbnNBcnJheX0pO3ZhciBiPW5ldyBLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0KHtleHBsaWNpdDpmYWxzZSx0YWc6ImEwIixvYmo6Y30pO3RoaXMuYXNuMUFycmF5LnB1c2goYik7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLmhUTFY9ZC5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuX2luaXRpYWxpemUoKX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jc3IuQ1NSVXRpbD1uZXcgZnVuY3Rpb24oKXt9O0tKVVIuYXNuMS5jc3IuQ1NSVXRpbC5uZXdDU1JQRU09ZnVuY3Rpb24oZil7dmFyIGM9S0pVUi5hc24xLmNzcjtpZihmLnN1YmplY3Q9PT11bmRlZmluZWQpe3Rocm93InBhcmFtZXRlciBzdWJqZWN0IHVuZGVmaW5lZCJ9aWYoZi5zYmpwdWJrZXk9PT11bmRlZmluZWQpe3Rocm93InBhcmFtZXRlciBzYmpwdWJrZXkgdW5kZWZpbmVkIn1pZihmLnNpZ2FsZz09PXVuZGVmaW5lZCl7dGhyb3cicGFyYW1ldGVyIHNpZ2FsZyB1bmRlZmluZWQifWlmKGYuc2JqcHJ2a2V5PT09dW5kZWZpbmVkKXt0aHJvdyJwYXJhbWV0ZXIgc2JqcHVia2V5IHVuZGVmaW5lZCJ9dmFyIGI9bmV3IGMuQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvKCk7Yi5zZXRTdWJqZWN0QnlQYXJhbShmLnN1YmplY3QpO2Iuc2V0U3ViamVjdFB1YmxpY0tleUJ5R2V0S2V5KGYuc2JqcHVia2V5KTt2YXIgZD1uZXcgYy5DZXJ0aWZpY2F0aW9uUmVxdWVzdCh7Y3NyaW5mbzpifSk7dmFyIGE9S0VZVVRJTC5nZXRLZXkoZi5zYmpwcnZrZXkpO2Quc2lnbihmLnNpZ2FsZyxhKTt2YXIgZT1kLmdldFBFTVN0cmluZygpO3JldHVybiBlfTsKLyohIGJhc2U2NHgtMS4xLjYgKGMpIDIwMTItMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KZnVuY3Rpb24gQmFzZTY0eCgpe31mdW5jdGlvbiBzdG9CQShkKXt2YXIgYj1uZXcgQXJyYXkoKTtmb3IodmFyIGM9MDtjPGQubGVuZ3RoO2MrKyl7YltjXT1kLmNoYXJDb2RlQXQoYyl9cmV0dXJuIGJ9ZnVuY3Rpb24gQkF0b3MoYil7dmFyIGQ9IiI7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe2Q9ZCtTdHJpbmcuZnJvbUNoYXJDb2RlKGJbY10pfXJldHVybiBkfWZ1bmN0aW9uIEJBdG9oZXgoYil7dmFyIGU9IiI7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBjPWJbZF0udG9TdHJpbmcoMTYpO2lmKGMubGVuZ3RoPT0xKXtjPSIwIitjfWU9ZStjfXJldHVybiBlfWZ1bmN0aW9uIHN0b2hleChhKXtyZXR1cm4gQkF0b2hleChzdG9CQShhKSl9ZnVuY3Rpb24gc3RvYjY0KGEpe3JldHVybiBoZXgyYjY0KHN0b2hleChhKSl9ZnVuY3Rpb24gc3RvYjY0dShhKXtyZXR1cm4gYjY0dG9iNjR1KGhleDJiNjQoc3RvaGV4KGEpKSl9ZnVuY3Rpb24gYjY0dXRvcyhhKXtyZXR1cm4gQkF0b3MoYjY0dG9CQShiNjR1dG9iNjQoYSkpKX1mdW5jdGlvbiBiNjR0b2I2NHUoYSl7YT1hLnJlcGxhY2UoL1w9L2csIiIpO2E9YS5yZXBsYWNlKC9cKy9nLCItIik7YT1hLnJlcGxhY2UoL1wvL2csIl8iKTtyZXR1cm4gYX1mdW5jdGlvbiBiNjR1dG9iNjQoYSl7aWYoYS5sZW5ndGglND09Mil7YT1hKyI9PSJ9ZWxzZXtpZihhLmxlbmd0aCU0PT0zKXthPWErIj0ifX1hPWEucmVwbGFjZSgvLS9nLCIrIik7YT1hLnJlcGxhY2UoL18vZywiLyIpO3JldHVybiBhfWZ1bmN0aW9uIGhleHRvYjY0dShhKXtpZihhLmxlbmd0aCUyPT0xKXthPSIwIithfXJldHVybiBiNjR0b2I2NHUoaGV4MmI2NChhKSl9ZnVuY3Rpb24gYjY0dXRvaGV4KGEpe3JldHVybiBiNjR0b2hleChiNjR1dG9iNjQoYSkpfXZhciB1dGY4dG9iNjR1LGI2NHV0b3V0Zjg7aWYodHlwZW9mIEJ1ZmZlcj09PSJmdW5jdGlvbiIpe3V0Zjh0b2I2NHU9ZnVuY3Rpb24oYSl7cmV0dXJuIGI2NHRvYjY0dShuZXcgQnVmZmVyKGEsInV0ZjgiKS50b1N0cmluZygiYmFzZTY0IikpfTtiNjR1dG91dGY4PWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQnVmZmVyKGI2NHV0b2I2NChhKSwiYmFzZTY0IikudG9TdHJpbmcoInV0ZjgiKX19ZWxzZXt1dGY4dG9iNjR1PWZ1bmN0aW9uKGEpe3JldHVybiBoZXh0b2I2NHUodXJpY21wdG9oZXgoZW5jb2RlVVJJQ29tcG9uZW50QWxsKGEpKSl9O2I2NHV0b3V0Zjg9ZnVuY3Rpb24oYSl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChoZXh0b3VyaWNtcChiNjR1dG9oZXgoYSkpKX19ZnVuY3Rpb24gdXRmOHRvYjY0KGEpe3JldHVybiBoZXgyYjY0KHVyaWNtcHRvaGV4KGVuY29kZVVSSUNvbXBvbmVudEFsbChhKSkpfWZ1bmN0aW9uIGI2NHRvdXRmOChhKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGhleHRvdXJpY21wKGI2NHRvaGV4KGEpKSl9ZnVuY3Rpb24gdXRmOHRvaGV4KGEpe3JldHVybiB1cmljbXB0b2hleChlbmNvZGVVUklDb21wb25lbnRBbGwoYSkpfWZ1bmN0aW9uIGhleHRvdXRmOChhKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGhleHRvdXJpY21wKGEpKX1mdW5jdGlvbiBoZXh0b3JzdHIoYyl7dmFyIGI9IiI7Zm9yKHZhciBhPTA7YTxjLmxlbmd0aC0xO2ErPTIpe2IrPVN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoYy5zdWJzdHIoYSwyKSwxNikpfXJldHVybiBifWZ1bmN0aW9uIHJzdHJ0b2hleChjKXt2YXIgYT0iIjtmb3IodmFyIGI9MDtiPGMubGVuZ3RoO2IrKyl7YSs9KCIwIitjLmNoYXJDb2RlQXQoYikudG9TdHJpbmcoMTYpKS5zbGljZSgtMil9cmV0dXJuIGF9ZnVuY3Rpb24gaGV4dG9iNjQoYSl7cmV0dXJuIGhleDJiNjQoYSl9ZnVuY3Rpb24gaGV4dG9iNjRubChiKXt2YXIgYT1oZXh0b2I2NChiKTt2YXIgYz1hLnJlcGxhY2UoLyguezY0fSkvZywiJDFcclxuIik7Yz1jLnJlcGxhY2UoL1xyXG4kLywiIik7cmV0dXJuIGN9ZnVuY3Rpb24gYjY0bmx0b2hleChiKXt2YXIgYT1iLnJlcGxhY2UoL1teMC05QS1aYS16XC8rPV0qL2csIiIpO3ZhciBjPWI2NHRvaGV4KGEpO3JldHVybiBjfWZ1bmN0aW9uIHVyaWNtcHRvaGV4KGEpe3JldHVybiBhLnJlcGxhY2UoLyUvZywiIil9ZnVuY3Rpb24gaGV4dG91cmljbXAoYSl7cmV0dXJuIGEucmVwbGFjZSgvKC4uKS9nLCIlJDEiKX1mdW5jdGlvbiBlbmNvZGVVUklDb21wb25lbnRBbGwoYSl7dmFyIGQ9ZW5jb2RlVVJJQ29tcG9uZW50KGEpO3ZhciBiPSIiO2Zvcih2YXIgYz0wO2M8ZC5sZW5ndGg7YysrKXtpZihkW2NdPT0iJSIpe2I9YitkLnN1YnN0cihjLDMpO2M9YysyfWVsc2V7Yj1iKyIlIitzdG9oZXgoZFtjXSl9fXJldHVybiBifWZ1bmN0aW9uIG5ld2xpbmVfdG9Vbml4KGEpe2E9YS5yZXBsYWNlKC9cclxuL21nLCJcbiIpO3JldHVybiBhfWZ1bmN0aW9uIG5ld2xpbmVfdG9Eb3MoYSl7YT1hLnJlcGxhY2UoL1xyXG4vbWcsIlxuIik7YT1hLnJlcGxhY2UoL1xuL21nLCJcclxuIik7cmV0dXJuIGF9ZnVuY3Rpb24gaW50YXJ5c3RydG9oZXgoYil7Yj1iLnJlcGxhY2UoL15ccypcW1xzKi8sIiIpO2I9Yi5yZXBsYWNlKC9ccypcXVxzKiQvLCIiKTtiPWIucmVwbGFjZSgvXHMqL2csIiIpO3RyeXt2YXIgYz1iLnNwbGl0KC8sLykubWFwKGZ1bmN0aW9uKGcsZSxoKXt2YXIgZj1wYXJzZUludChnKTtpZihmPDB8fDI1NTxmKXt0aHJvdyJpbnRlZ2VyIG5vdCBpbiByYW5nZSAwLTI1NSJ9dmFyIGQ9KCIwMCIrZi50b1N0cmluZygxNikpLnNsaWNlKC0yKTtyZXR1cm4gZH0pLmpvaW4oIiIpO3JldHVybiBjfWNhdGNoKGEpe3Rocm93Im1hbGZvcm1lZCBpbnRlZ2VyIGFycmF5IHN0cmluZzogIithfX12YXIgc3RyZGlmZmlkeD1mdW5jdGlvbihjLGEpe3ZhciBkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPmEubGVuZ3RoKXtkPWEubGVuZ3RofWZvcih2YXIgYj0wO2I8ZDtiKyspe2lmKGMuY2hhckNvZGVBdChiKSE9YS5jaGFyQ29kZUF0KGIpKXtyZXR1cm4gYn19aWYoYy5sZW5ndGghPWEubGVuZ3RoKXtyZXR1cm4gZH1yZXR1cm4gLTF9OwovKiEgY3J5cHRvLTEuMS44LmpzIChjKSAyMDEzLTIwMTYgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuY3J5cHRvPT0idW5kZWZpbmVkInx8IUtKVVIuY3J5cHRvKXtLSlVSLmNyeXB0bz17fX1LSlVSLmNyeXB0by5VdGlsPW5ldyBmdW5jdGlvbigpe3RoaXMuRElHRVNUSU5GT0hFQUQ9e3NoYTE6IjMwMjEzMDA5MDYwNTJiMGUwMzAyMWEwNTAwMDQxNCIsc2hhMjI0OiIzMDJkMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDQwNTAwMDQxYyIsc2hhMjU2OiIzMDMxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDEwNTAwMDQyMCIsc2hhMzg0OiIzMDQxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDIwNTAwMDQzMCIsc2hhNTEyOiIzMDUxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDMwNTAwMDQ0MCIsbWQyOiIzMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjAyMDUwMDA0MTAiLG1kNToiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwNTA1MDAwNDEwIixyaXBlbWQxNjA6IjMwMjEzMDA5MDYwNTJiMjQwMzAyMDEwNTAwMDQxNCIsfTt0aGlzLkRFRkFVTFRQUk9WSURFUj17bWQ1OiJjcnlwdG9qcyIsc2hhMToiY3J5cHRvanMiLHNoYTIyNDoiY3J5cHRvanMiLHNoYTI1NjoiY3J5cHRvanMiLHNoYTM4NDoiY3J5cHRvanMiLHNoYTUxMjoiY3J5cHRvanMiLHJpcGVtZDE2MDoiY3J5cHRvanMiLGhtYWNtZDU6ImNyeXB0b2pzIixobWFjc2hhMToiY3J5cHRvanMiLGhtYWNzaGEyMjQ6ImNyeXB0b2pzIixobWFjc2hhMjU2OiJjcnlwdG9qcyIsaG1hY3NoYTM4NDoiY3J5cHRvanMiLGhtYWNzaGE1MTI6ImNyeXB0b2pzIixobWFjcmlwZW1kMTYwOiJjcnlwdG9qcyIsTUQ1d2l0aFJTQToiY3J5cHRvanMvanNyc2EiLFNIQTF3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjI0d2l0aFJTQToiY3J5cHRvanMvanNyc2EiLFNIQTI1NndpdGhSU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEzODR3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBNTEyd2l0aFJTQToiY3J5cHRvanMvanNyc2EiLFJJUEVNRDE2MHdpdGhSU0E6ImNyeXB0b2pzL2pzcnNhIixNRDV3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEExd2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjI0d2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjU2d2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMzg0d2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBNTEyd2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsUklQRU1EMTYwd2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMXdpdGhEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyMjR3aXRoRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjU2d2l0aERTQToiY3J5cHRvanMvanNyc2EiLE1ENXdpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsU0hBMXdpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjI0d2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixTSEEyNTZ3aXRoUlNBYW5kTUdGMToiY3J5cHRvanMvanNyc2EiLFNIQTM4NHdpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsU0hBNTEyd2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixSSVBFTUQxNjB3aXRoUlNBYW5kTUdGMToiY3J5cHRvanMvanNyc2EiLH07dGhpcy5DUllQVE9KU01FU1NBR0VESUdFU1ROQU1FPXttZDU6Q3J5cHRvSlMuYWxnby5NRDUsc2hhMTpDcnlwdG9KUy5hbGdvLlNIQTEsc2hhMjI0OkNyeXB0b0pTLmFsZ28uU0hBMjI0LHNoYTI1NjpDcnlwdG9KUy5hbGdvLlNIQTI1NixzaGEzODQ6Q3J5cHRvSlMuYWxnby5TSEEzODQsc2hhNTEyOkNyeXB0b0pTLmFsZ28uU0hBNTEyLHJpcGVtZDE2MDpDcnlwdG9KUy5hbGdvLlJJUEVNRDE2MH07dGhpcy5nZXREaWdlc3RJbmZvSGV4PWZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIHRoaXMuRElHRVNUSU5GT0hFQURbYl09PSJ1bmRlZmluZWQiKXt0aHJvdyJhbGcgbm90IHN1cHBvcnRlZCBpbiBVdGlsLkRJR0VTVElORk9IRUFEOiAiK2J9cmV0dXJuIHRoaXMuRElHRVNUSU5GT0hFQURbYl0rYX07dGhpcy5nZXRQYWRkZWREaWdlc3RJbmZvSGV4PWZ1bmN0aW9uKGgsYSxqKXt2YXIgYz10aGlzLmdldERpZ2VzdEluZm9IZXgoaCxhKTt2YXIgZD1qLzQ7aWYoYy5sZW5ndGgrMjI+ZCl7dGhyb3cia2V5IGlzIHRvbyBzaG9ydCBmb3IgU2lnQWxnOiBrZXlsZW49IitqKyIsIithfXZhciBiPSIwMDAxIjt2YXIgaz0iMDAiK2M7dmFyIGc9IiI7dmFyIGw9ZC1iLmxlbmd0aC1rLmxlbmd0aDtmb3IodmFyIGY9MDtmPGw7Zis9Mil7Zys9ImZmIn12YXIgZT1iK2craztyZXR1cm4gZX07dGhpcy5oYXNoU3RyaW5nPWZ1bmN0aW9uKGEsYyl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzpjfSk7cmV0dXJuIGIuZGlnZXN0U3RyaW5nKGEpfTt0aGlzLmhhc2hIZXg9ZnVuY3Rpb24oYixjKXt2YXIgYT1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOmN9KTtyZXR1cm4gYS5kaWdlc3RIZXgoYil9O3RoaXMuc2hhMT1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJzaGExIixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuc2hhMjU2PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6InNoYTI1NiIscHJvdjoiY3J5cHRvanMifSk7cmV0dXJuIGIuZGlnZXN0U3RyaW5nKGEpfTt0aGlzLnNoYTI1NkhleD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJzaGEyNTYiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdEhleChhKX07dGhpcy5zaGE1MTI9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzoic2hhNTEyIixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuc2hhNTEySGV4PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6InNoYTUxMiIscHJvdjoiY3J5cHRvanMifSk7cmV0dXJuIGIuZGlnZXN0SGV4KGEpfTt0aGlzLm1kNT1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJtZDUiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5yaXBlbWQxNjA9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzoicmlwZW1kMTYwIixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuZ2V0Q3J5cHRvSlNNREJ5TmFtZT1mdW5jdGlvbihhKXt9fTtLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0PWZ1bmN0aW9uKGMpe3ZhciBiPW51bGw7dmFyIGE9bnVsbDt2YXIgZD1udWxsO3RoaXMuc2V0QWxnQW5kUHJvdmlkZXI9ZnVuY3Rpb24oZyxmKXtpZihnIT1udWxsJiZmPT09dW5kZWZpbmVkKXtmPUtKVVIuY3J5cHRvLlV0aWwuREVGQVVMVFBST1ZJREVSW2ddfWlmKCI6bWQ1OnNoYTE6c2hhMjI0OnNoYTI1NjpzaGEzODQ6c2hhNTEyOnJpcGVtZDE2MDoiLmluZGV4T2YoZykhPS0xJiZmPT0iY3J5cHRvanMiKXt0cnl7dGhpcy5tZD1LSlVSLmNyeXB0by5VdGlsLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUVbZ10uY3JlYXRlKCl9Y2F0Y2goZSl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPSIrZysiLyIrZX10aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbihoKXt0aGlzLm1kLnVwZGF0ZShoKX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oaCl7dmFyIGk9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShoKTt0aGlzLm1kLnVwZGF0ZShpKX07dGhpcy5kaWdlc3Q9ZnVuY3Rpb24oKXt2YXIgaD10aGlzLm1kLmZpbmFsaXplKCk7cmV0dXJuIGgudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLkhleCl9O3RoaXMuZGlnZXN0U3RyaW5nPWZ1bmN0aW9uKGgpe3RoaXMudXBkYXRlU3RyaW5nKGgpO3JldHVybiB0aGlzLmRpZ2VzdCgpfTt0aGlzLmRpZ2VzdEhleD1mdW5jdGlvbihoKXt0aGlzLnVwZGF0ZUhleChoKTtyZXR1cm4gdGhpcy5kaWdlc3QoKX19aWYoIjpzaGEyNTY6Ii5pbmRleE9mKGcpIT0tMSYmZj09InNqY2wiKXt0cnl7dGhpcy5tZD1uZXcgc2pjbC5oYXNoLnNoYTI1NigpfWNhdGNoKGUpe3Rocm93InNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGFsZz0iK2crIi8iK2V9dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24oaCl7dGhpcy5tZC51cGRhdGUoaCl9O3RoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKGkpe3ZhciBoPXNqY2wuY29kZWMuaGV4LnRvQml0cyhpKTt0aGlzLm1kLnVwZGF0ZShoKX07dGhpcy5kaWdlc3Q9ZnVuY3Rpb24oKXt2YXIgaD10aGlzLm1kLmZpbmFsaXplKCk7cmV0dXJuIHNqY2wuY29kZWMuaGV4LmZyb21CaXRzKGgpfTt0aGlzLmRpZ2VzdFN0cmluZz1mdW5jdGlvbihoKXt0aGlzLnVwZGF0ZVN0cmluZyhoKTtyZXR1cm4gdGhpcy5kaWdlc3QoKX07dGhpcy5kaWdlc3RIZXg9ZnVuY3Rpb24oaCl7dGhpcy51cGRhdGVIZXgoaCk7cmV0dXJuIHRoaXMuZGlnZXN0KCl9fX07dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24oZSl7dGhyb3cidXBkYXRlU3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ05hbWUrIi8iK3RoaXMucHJvdk5hbWV9O3RoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKGUpe3Rocm93InVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdOYW1lKyIvIit0aGlzLnByb3ZOYW1lfTt0aGlzLmRpZ2VzdD1mdW5jdGlvbigpe3Rocm93ImRpZ2VzdCgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdOYW1lKyIvIit0aGlzLnByb3ZOYW1lfTt0aGlzLmRpZ2VzdFN0cmluZz1mdW5jdGlvbihlKXt0aHJvdyJkaWdlc3RTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07dGhpcy5kaWdlc3RIZXg9ZnVuY3Rpb24oZSl7dGhyb3ciZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ05hbWUrIi8iK3RoaXMucHJvdk5hbWV9O2lmKGMhPT11bmRlZmluZWQpe2lmKGMuYWxnIT09dW5kZWZpbmVkKXt0aGlzLmFsZ05hbWU9Yy5hbGc7aWYoYy5wcm92PT09dW5kZWZpbmVkKXt0aGlzLnByb3ZOYW1lPUtKVVIuY3J5cHRvLlV0aWwuREVGQVVMVFBST1ZJREVSW3RoaXMuYWxnTmFtZV19dGhpcy5zZXRBbGdBbmRQcm92aWRlcih0aGlzLmFsZ05hbWUsdGhpcy5wcm92TmFtZSl9fX07S0pVUi5jcnlwdG8uTWFjPWZ1bmN0aW9uKGQpe3ZhciBmPW51bGw7dmFyIGM9bnVsbDt2YXIgYT1udWxsO3ZhciBlPW51bGw7dmFyIGI9bnVsbDt0aGlzLnNldEFsZ0FuZFByb3ZpZGVyPWZ1bmN0aW9uKGssaSl7az1rLnRvTG93ZXJDYXNlKCk7aWYoaz09bnVsbCl7az0iaG1hY3NoYTEifWs9ay50b0xvd2VyQ2FzZSgpO2lmKGsuc3Vic3RyKDAsNCkhPSJobWFjIil7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgdW5zdXBwb3J0ZWQgSE1BQyBhbGc6ICIra31pZihpPT09dW5kZWZpbmVkKXtpPUtKVVIuY3J5cHRvLlV0aWwuREVGQVVMVFBST1ZJREVSW2tdfXRoaXMuYWxnUHJvdj1rKyIvIitpO3ZhciBnPWsuc3Vic3RyKDQpO2lmKCI6bWQ1OnNoYTE6c2hhMjI0OnNoYTI1NjpzaGEzODQ6c2hhNTEyOnJpcGVtZDE2MDoiLmluZGV4T2YoZykhPS0xJiZpPT0iY3J5cHRvanMiKXt0cnl7dmFyIGo9S0pVUi5jcnlwdG8uVXRpbC5DUllQVE9KU01FU1NBR0VESUdFU1ROQU1FW2ddO3RoaXMubWFjPUNyeXB0b0pTLmFsZ28uSE1BQy5jcmVhdGUoaix0aGlzLnBhc3MpfWNhdGNoKGgpe3Rocm93InNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGhhc2hBbGc9IitnKyIvIitofXRoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKGwpe3RoaXMubWFjLnVwZGF0ZShsKX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24obCl7dmFyIG09Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShsKTt0aGlzLm1hYy51cGRhdGUobSl9O3RoaXMuZG9GaW5hbD1mdW5jdGlvbigpe3ZhciBsPXRoaXMubWFjLmZpbmFsaXplKCk7cmV0dXJuIGwudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLkhleCl9O3RoaXMuZG9GaW5hbFN0cmluZz1mdW5jdGlvbihsKXt0aGlzLnVwZGF0ZVN0cmluZyhsKTtyZXR1cm4gdGhpcy5kb0ZpbmFsKCl9O3RoaXMuZG9GaW5hbEhleD1mdW5jdGlvbihsKXt0aGlzLnVwZGF0ZUhleChsKTtyZXR1cm4gdGhpcy5kb0ZpbmFsKCl9fX07dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24oZyl7dGhyb3cidXBkYXRlU3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKGcpe3Rocm93InVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdQcm92fTt0aGlzLmRvRmluYWw9ZnVuY3Rpb24oKXt0aHJvdyJkaWdlc3QoKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnUHJvdn07dGhpcy5kb0ZpbmFsU3RyaW5nPWZ1bmN0aW9uKGcpe3Rocm93ImRpZ2VzdFN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdQcm92fTt0aGlzLmRvRmluYWxIZXg9ZnVuY3Rpb24oZyl7dGhyb3ciZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMuc2V0UGFzc3dvcmQ9ZnVuY3Rpb24oaCl7aWYodHlwZW9mIGg9PSJzdHJpbmciKXt2YXIgZz1oO2lmKGgubGVuZ3RoJTI9PTF8fCFoLm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXtnPXJzdHJ0b2hleChoKX10aGlzLnBhc3M9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShnKTtyZXR1cm59aWYodHlwZW9mIGghPSJvYmplY3QiKXt0aHJvdyJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogIitofXZhciBnPW51bGw7aWYoaC5oZXghPT11bmRlZmluZWQpe2lmKGguaGV4Lmxlbmd0aCUyIT0wfHwhaC5oZXgubWF0Y2goL15bMC05QS1GYS1mXSskLykpe3Rocm93Ik1hYzogd3JvbmcgaGV4IHBhc3N3b3JkOiAiK2guaGV4fWc9aC5oZXh9aWYoaC51dGY4IT09dW5kZWZpbmVkKXtnPXV0Zjh0b2hleChoLnV0ZjgpfWlmKGgucnN0ciE9PXVuZGVmaW5lZCl7Zz1yc3RydG9oZXgoaC5yc3RyKX1pZihoLmI2NCE9PXVuZGVmaW5lZCl7Zz1iNjR0b2hleChoLmI2NCl9aWYoaC5iNjR1IT09dW5kZWZpbmVkKXtnPWI2NHV0b2hleChoLmI2NHUpfWlmKGc9PW51bGwpe3Rocm93IktKVVIuY3J5cHRvLk1hYyB1bnN1cHBvcnRlZCBwYXNzd29yZCB0eXBlOiAiK2h9dGhpcy5wYXNzPUNyeXB0b0pTLmVuYy5IZXgucGFyc2UoZyl9O2lmKGQhPT11bmRlZmluZWQpe2lmKGQucGFzcyE9PXVuZGVmaW5lZCl7dGhpcy5zZXRQYXNzd29yZChkLnBhc3MpfWlmKGQuYWxnIT09dW5kZWZpbmVkKXt0aGlzLmFsZ05hbWU9ZC5hbGc7aWYoZC5wcm92PT09dW5kZWZpbmVkKXt0aGlzLnByb3ZOYW1lPUtKVVIuY3J5cHRvLlV0aWwuREVGQVVMVFBST1ZJREVSW3RoaXMuYWxnTmFtZV19dGhpcy5zZXRBbGdBbmRQcm92aWRlcih0aGlzLmFsZ05hbWUsdGhpcy5wcm92TmFtZSl9fX07S0pVUi5jcnlwdG8uU2lnbmF0dXJlPWZ1bmN0aW9uKG8pe3ZhciBxPW51bGw7dmFyIG49bnVsbDt2YXIgcj1udWxsO3ZhciBjPW51bGw7dmFyIGw9bnVsbDt2YXIgZD1udWxsO3ZhciBrPW51bGw7dmFyIGg9bnVsbDt2YXIgcD1udWxsO3ZhciBlPW51bGw7dmFyIGI9LTE7dmFyIGc9bnVsbDt2YXIgaj1udWxsO3ZhciBhPW51bGw7dmFyIGk9bnVsbDt2YXIgZj1udWxsO3RoaXMuX3NldEFsZ05hbWVzPWZ1bmN0aW9uKCl7aWYodGhpcy5hbGdOYW1lLm1hdGNoKC9eKC4rKXdpdGgoLispJC8pKXt0aGlzLm1kQWxnTmFtZT1SZWdFeHAuJDEudG9Mb3dlckNhc2UoKTt0aGlzLnB1YmtleUFsZ05hbWU9UmVnRXhwLiQyLnRvTG93ZXJDYXNlKCl9fTt0aGlzLl96ZXJvUGFkZGluZ09mU2lnbmF0dXJlPWZ1bmN0aW9uKHgsdyl7dmFyIHY9IiI7dmFyIHQ9dy80LXgubGVuZ3RoO2Zvcih2YXIgdT0wO3U8dDt1Kyspe3Y9disiMCJ9cmV0dXJuIHYreH07dGhpcy5zZXRBbGdBbmRQcm92aWRlcj1mdW5jdGlvbih1LHQpe3RoaXMuX3NldEFsZ05hbWVzKCk7aWYodCE9ImNyeXB0b2pzL2pzcnNhIil7dGhyb3cicHJvdmlkZXIgbm90IHN1cHBvcnRlZDogIit0fWlmKCI6bWQ1OnNoYTE6c2hhMjI0OnNoYTI1NjpzaGEzODQ6c2hhNTEyOnJpcGVtZDE2MDoiLmluZGV4T2YodGhpcy5tZEFsZ05hbWUpIT0tMSl7dHJ5e3RoaXMubWQ9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzp0aGlzLm1kQWxnTmFtZX0pfWNhdGNoKHMpe3Rocm93InNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGFsZz0iK3RoaXMubWRBbGdOYW1lKyIvIitzfXRoaXMuaW5pdD1mdW5jdGlvbih3LHgpe3ZhciB5PW51bGw7dHJ5e2lmKHg9PT11bmRlZmluZWQpe3k9S0VZVVRJTC5nZXRLZXkodyl9ZWxzZXt5PUtFWVVUSUwuZ2V0S2V5KHcseCl9fWNhdGNoKHYpe3Rocm93ImluaXQgZmFpbGVkOiIrdn1pZih5LmlzUHJpdmF0ZT09PXRydWUpe3RoaXMucHJ2S2V5PXk7dGhpcy5zdGF0ZT0iU0lHTiJ9ZWxzZXtpZih5LmlzUHVibGljPT09dHJ1ZSl7dGhpcy5wdWJLZXk9eTt0aGlzLnN0YXRlPSJWRVJJRlkifWVsc2V7dGhyb3ciaW5pdCBmYWlsZWQuOiIreX19fTt0aGlzLmluaXRTaWduPWZ1bmN0aW9uKHYpe2lmKHR5cGVvZiB2LmVjcHJ2aGV4PT0ic3RyaW5nIiYmdHlwZW9mIHYuZWNjdXJ2ZW5hbWU9PSJzdHJpbmciKXt0aGlzLmVjcHJ2aGV4PXYuZWNwcnZoZXg7dGhpcy5lY2N1cnZlbmFtZT12LmVjY3VydmVuYW1lfWVsc2V7dGhpcy5wcnZLZXk9dn10aGlzLnN0YXRlPSJTSUdOIn07dGhpcy5pbml0VmVyaWZ5QnlQdWJsaWNLZXk9ZnVuY3Rpb24odil7aWYodHlwZW9mIHYuZWNwdWJoZXg9PSJzdHJpbmciJiZ0eXBlb2Ygdi5lY2N1cnZlbmFtZT09InN0cmluZyIpe3RoaXMuZWNwdWJoZXg9di5lY3B1YmhleDt0aGlzLmVjY3VydmVuYW1lPXYuZWNjdXJ2ZW5hbWV9ZWxzZXtpZih2IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0Epe3RoaXMucHViS2V5PXZ9ZWxzZXtpZih2IGluc3RhbmNlb2YgUlNBS2V5KXt0aGlzLnB1YktleT12fX19dGhpcy5zdGF0ZT0iVkVSSUZZIn07dGhpcy5pbml0VmVyaWZ5QnlDZXJ0aWZpY2F0ZVBFTT1mdW5jdGlvbih2KXt2YXIgdz1uZXcgWDUwOSgpO3cucmVhZENlcnRQRU0odik7dGhpcy5wdWJLZXk9dy5zdWJqZWN0UHVibGljS2V5UlNBO3RoaXMuc3RhdGU9IlZFUklGWSJ9O3RoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKHYpe3RoaXMubWQudXBkYXRlU3RyaW5nKHYpfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbih2KXt0aGlzLm1kLnVwZGF0ZUhleCh2KX07dGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhpcy5zSGFzaEhleD10aGlzLm1kLmRpZ2VzdCgpO2lmKHR5cGVvZiB0aGlzLmVjcHJ2aGV4IT0idW5kZWZpbmVkIiYmdHlwZW9mIHRoaXMuZWNjdXJ2ZW5hbWUhPSJ1bmRlZmluZWQiKXt2YXIgdj1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOnRoaXMuZWNjdXJ2ZW5hbWV9KTt0aGlzLmhTaWduPXYuc2lnbkhleCh0aGlzLnNIYXNoSGV4LHRoaXMuZWNwcnZoZXgpfWVsc2V7aWYodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBSU0FLZXkmJnRoaXMucHVia2V5QWxnTmFtZT09InJzYWFuZG1nZjEiKXt0aGlzLmhTaWduPXRoaXMucHJ2S2V5LnNpZ25XaXRoTWVzc2FnZUhhc2hQU1ModGhpcy5zSGFzaEhleCx0aGlzLm1kQWxnTmFtZSx0aGlzLnBzc1NhbHRMZW4pfWVsc2V7aWYodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBSU0FLZXkmJnRoaXMucHVia2V5QWxnTmFtZT09InJzYSIpe3RoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LHRoaXMubWRBbGdOYW1lKX1lbHNle2lmKHRoaXMucHJ2S2V5IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0Epe3RoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4KX1lbHNle2lmKHRoaXMucHJ2S2V5IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRFNBKXt0aGlzLmhTaWduPXRoaXMucHJ2S2V5LnNpZ25XaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCl9ZWxzZXt0aHJvdyJTaWduYXR1cmU6IHVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnOiAiK3RoaXMucHVia2V5QWxnTmFtZX19fX19cmV0dXJuIHRoaXMuaFNpZ259O3RoaXMuc2lnblN0cmluZz1mdW5jdGlvbih2KXt0aGlzLnVwZGF0ZVN0cmluZyh2KTtyZXR1cm4gdGhpcy5zaWduKCl9O3RoaXMuc2lnbkhleD1mdW5jdGlvbih2KXt0aGlzLnVwZGF0ZUhleCh2KTtyZXR1cm4gdGhpcy5zaWduKCl9O3RoaXMudmVyaWZ5PWZ1bmN0aW9uKHYpe3RoaXMuc0hhc2hIZXg9dGhpcy5tZC5kaWdlc3QoKTtpZih0eXBlb2YgdGhpcy5lY3B1YmhleCE9InVuZGVmaW5lZCImJnR5cGVvZiB0aGlzLmVjY3VydmVuYW1lIT0idW5kZWZpbmVkIil7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTp0aGlzLmVjY3VydmVuYW1lfSk7cmV0dXJuIHcudmVyaWZ5SGV4KHRoaXMuc0hhc2hIZXgsdix0aGlzLmVjcHViaGV4KX1lbHNle2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgUlNBS2V5JiZ0aGlzLnB1YmtleUFsZ05hbWU9PSJyc2FhbmRtZ2YxIil7cmV0dXJuIHRoaXMucHViS2V5LnZlcmlmeVdpdGhNZXNzYWdlSGFzaFBTUyh0aGlzLnNIYXNoSGV4LHYsdGhpcy5tZEFsZ05hbWUsdGhpcy5wc3NTYWx0TGVuKX1lbHNle2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgUlNBS2V5JiZ0aGlzLnB1YmtleUFsZ05hbWU9PSJyc2EiKXtyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdil9ZWxzZXtpZih0aGlzLnB1YktleSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKXtyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdil9ZWxzZXtpZih0aGlzLnB1YktleSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSl7cmV0dXJuIHRoaXMucHViS2V5LnZlcmlmeVdpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LHYpfWVsc2V7dGhyb3ciU2lnbmF0dXJlOiB1bnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZzogIit0aGlzLnB1YmtleUFsZ05hbWV9fX19fX19fTt0aGlzLmluaXQ9ZnVuY3Rpb24ocyx0KXt0aHJvdyJpbml0KGtleSwgcGFzcykgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMuaW5pdFZlcmlmeUJ5UHVibGljS2V5PWZ1bmN0aW9uKHMpe3Rocm93ImluaXRWZXJpZnlCeVB1YmxpY0tleShyc2FQdWJLZXl5KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5pbml0VmVyaWZ5QnlDZXJ0aWZpY2F0ZVBFTT1mdW5jdGlvbihzKXt0aHJvdyJpbml0VmVyaWZ5QnlDZXJ0aWZpY2F0ZVBFTShjZXJ0UEVNKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5pbml0U2lnbj1mdW5jdGlvbihzKXt0aHJvdyJpbml0U2lnbihwcnZLZXkpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLnVwZGF0ZVN0cmluZz1mdW5jdGlvbihzKXt0aHJvdyJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24ocyl7dGhyb3cidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMuc2lnbj1mdW5jdGlvbigpe3Rocm93InNpZ24oKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5zaWduU3RyaW5nPWZ1bmN0aW9uKHMpe3Rocm93ImRpZ2VzdFN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLnNpZ25IZXg9ZnVuY3Rpb24ocyl7dGhyb3ciZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMudmVyaWZ5PWZ1bmN0aW9uKHMpe3Rocm93InZlcmlmeShoU2lnVmFsKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5pbml0UGFyYW1zPW87aWYobyE9PXVuZGVmaW5lZCl7aWYoby5hbGchPT11bmRlZmluZWQpe3RoaXMuYWxnTmFtZT1vLmFsZztpZihvLnByb3Y9PT11bmRlZmluZWQpe3RoaXMucHJvdk5hbWU9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXX1lbHNle3RoaXMucHJvdk5hbWU9by5wcm92fXRoaXMuYWxnUHJvdk5hbWU9dGhpcy5hbGdOYW1lKyI6Iit0aGlzLnByb3ZOYW1lO3RoaXMuc2V0QWxnQW5kUHJvdmlkZXIodGhpcy5hbGdOYW1lLHRoaXMucHJvdk5hbWUpO3RoaXMuX3NldEFsZ05hbWVzKCl9aWYoby5wc3NzYWx0bGVuIT09dW5kZWZpbmVkKXt0aGlzLnBzc1NhbHRMZW49by5wc3NzYWx0bGVufWlmKG8ucHJ2a2V5cGVtIT09dW5kZWZpbmVkKXtpZihvLnBydmtleXBhcyE9PXVuZGVmaW5lZCl7dGhyb3ciYm90aCBwcnZrZXlwZW0gYW5kIHBydmtleXBhcyBwYXJhbWV0ZXJzIG5vdCBzdXBwb3J0ZWQifWVsc2V7dHJ5e3ZhciBxPW5ldyBSU0FLZXkoKTtxLnJlYWRQcml2YXRlS2V5RnJvbVBFTVN0cmluZyhvLnBydmtleXBlbSk7dGhpcy5pbml0U2lnbihxKX1jYXRjaChtKXt0aHJvdyJmYXRhbCBlcnJvciB0byBsb2FkIHBlbSBwcml2YXRlIGtleTogIittfX19fX07S0pVUi5jcnlwdG8uT0lEPW5ldyBmdW5jdGlvbigpe3RoaXMub2lkaGV4Mm5hbWU9eyIyYTg2NDg4NmY3MGQwMTAxMDEiOiJyc2FFbmNyeXB0aW9uIiwiMmE4NjQ4Y2UzZDAyMDEiOiJlY1B1YmxpY0tleSIsIjJhODY0OGNlMzgwNDAxIjoiZHNhIiwiMmE4NjQ4Y2UzZDAzMDEwNyI6InNlY3AyNTZyMSIsIjJiODEwNDAwMWYiOiJzZWNwMTkyazEiLCIyYjgxMDQwMDIxIjoic2VjcDIyNHIxIiwiMmI4MTA0MDAwYSI6InNlY3AyNTZrMSIsIjJiODEwNDAwMjMiOiJzZWNwNTIxcjEiLCIyYjgxMDQwMDIyIjoic2VjcDM4NHIxIiwiMmE4NjQ4Y2UzODA0MDMiOiJTSEExd2l0aERTQSIsIjYwODY0ODAxNjUwMzA0MDMwMSI6IlNIQTIyNHdpdGhEU0EiLCI2MDg2NDgwMTY1MDMwNDAzMDIiOiJTSEEyNTZ3aXRoRFNBIix9fTsKLyohIGVjZHNhLW1vZGlmaWVkLTEuMC40LmpzIChjKSBTdGVwaGFuIFRob21hcywgS2VuamkgVXJ1c2hpbWEgfCBnaXRodWIuY29tL2JpdGNvaW5qcy9iaXRjb2luanMtbGliL2Jsb2IvbWFzdGVyL0xJQ0VOU0UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuY3J5cHRvPT0idW5kZWZpbmVkInx8IUtKVVIuY3J5cHRvKXtLSlVSLmNyeXB0bz17fX1LSlVSLmNyeXB0by5FQ0RTQT1mdW5jdGlvbihoKXt2YXIgZT0ic2VjcDI1NnIxIjt2YXIgZz1udWxsO3ZhciBiPW51bGw7dmFyIGY9bnVsbDt2YXIgYT1uZXcgU2VjdXJlUmFuZG9tKCk7dmFyIGQ9bnVsbDt0aGlzLnR5cGU9IkVDIjtmdW5jdGlvbiBjKHMsbyxyLG4pe3ZhciBqPU1hdGgubWF4KG8uYml0TGVuZ3RoKCksbi5iaXRMZW5ndGgoKSk7dmFyIHQ9cy5hZGQyRChyKTt2YXIgcT1zLmN1cnZlLmdldEluZmluaXR5KCk7Zm9yKHZhciBwPWotMTtwPj0wOy0tcCl7cT1xLnR3aWNlMkQoKTtxLno9QmlnSW50ZWdlci5PTkU7aWYoby50ZXN0Qml0KHApKXtpZihuLnRlc3RCaXQocCkpe3E9cS5hZGQyRCh0KX1lbHNle3E9cS5hZGQyRChzKX19ZWxzZXtpZihuLnRlc3RCaXQocCkpe3E9cS5hZGQyRChyKX19fXJldHVybiBxfXRoaXMuZ2V0QmlnUmFuZG9tPWZ1bmN0aW9uKGkpe3JldHVybiBuZXcgQmlnSW50ZWdlcihpLmJpdExlbmd0aCgpLGEpLm1vZChpLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSkuYWRkKEJpZ0ludGVnZXIuT05FKX07dGhpcy5zZXROYW1lZEN1cnZlPWZ1bmN0aW9uKGkpe3RoaXMuZWNwYXJhbXM9S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5nZXRCeU5hbWUoaSk7dGhpcy5wcnZLZXlIZXg9bnVsbDt0aGlzLnB1YktleUhleD1udWxsO3RoaXMuY3VydmVOYW1lPWl9O3RoaXMuc2V0UHJpdmF0ZUtleUhleD1mdW5jdGlvbihpKXt0aGlzLmlzUHJpdmF0ZT10cnVlO3RoaXMucHJ2S2V5SGV4PWl9O3RoaXMuc2V0UHVibGljS2V5SGV4PWZ1bmN0aW9uKGkpe3RoaXMuaXNQdWJsaWM9dHJ1ZTt0aGlzLnB1YktleUhleD1pfTt0aGlzLmdlbmVyYXRlS2V5UGFpckhleD1mdW5jdGlvbigpe3ZhciBrPXRoaXMuZWNwYXJhbXMubjt2YXIgbj10aGlzLmdldEJpZ1JhbmRvbShrKTt2YXIgbD10aGlzLmVjcGFyYW1zLkcubXVsdGlwbHkobik7dmFyIHE9bC5nZXRYKCkudG9CaWdJbnRlZ2VyKCk7dmFyIG89bC5nZXRZKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGk9dGhpcy5lY3BhcmFtcy5rZXlsZW4vNDt2YXIgbT0oIjAwMDAwMDAwMDAiK24udG9TdHJpbmcoMTYpKS5zbGljZSgtaSk7dmFyIHI9KCIwMDAwMDAwMDAwIitxLnRvU3RyaW5nKDE2KSkuc2xpY2UoLWkpO3ZhciBwPSgiMDAwMDAwMDAwMCIrby50b1N0cmluZygxNikpLnNsaWNlKC1pKTt2YXIgaj0iMDQiK3IrcDt0aGlzLnNldFByaXZhdGVLZXlIZXgobSk7dGhpcy5zZXRQdWJsaWNLZXlIZXgoaik7cmV0dXJue2VjcHJ2aGV4Om0sZWNwdWJoZXg6an19O3RoaXMuc2lnbldpdGhNZXNzYWdlSGFzaD1mdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5zaWduSGV4KGksdGhpcy5wcnZLZXlIZXgpfTt0aGlzLnNpZ25IZXg9ZnVuY3Rpb24obyxqKXt2YXIgdD1uZXcgQmlnSW50ZWdlcihqLDE2KTt2YXIgbD10aGlzLmVjcGFyYW1zLm47dmFyIHE9bmV3IEJpZ0ludGVnZXIobywxNik7ZG97dmFyIG09dGhpcy5nZXRCaWdSYW5kb20obCk7dmFyIHU9dGhpcy5lY3BhcmFtcy5HO3ZhciBwPXUubXVsdGlwbHkobSk7dmFyIGk9cC5nZXRYKCkudG9CaWdJbnRlZ2VyKCkubW9kKGwpfXdoaWxlKGkuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTyk8PTApO3ZhciB2PW0ubW9kSW52ZXJzZShsKS5tdWx0aXBseShxLmFkZCh0Lm11bHRpcGx5KGkpKSkubW9kKGwpO3JldHVybiBLSlVSLmNyeXB0by5FQ0RTQS5iaVJTU2lnVG9BU04xU2lnKGksdil9O3RoaXMuc2lnbj1mdW5jdGlvbihtLHUpe3ZhciBxPXU7dmFyIGo9dGhpcy5lY3BhcmFtcy5uO3ZhciBwPUJpZ0ludGVnZXIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKG0pO2Rve3ZhciBsPXRoaXMuZ2V0QmlnUmFuZG9tKGopO3ZhciB0PXRoaXMuZWNwYXJhbXMuRzt2YXIgbz10Lm11bHRpcGx5KGwpO3ZhciBpPW8uZ2V0WCgpLnRvQmlnSW50ZWdlcigpLm1vZChqKX13aGlsZShpLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLlpFUk8pPD0wKTt2YXIgdj1sLm1vZEludmVyc2UoaikubXVsdGlwbHkocC5hZGQocS5tdWx0aXBseShpKSkpLm1vZChqKTtyZXR1cm4gdGhpcy5zZXJpYWxpemVTaWcoaSx2KX07dGhpcy52ZXJpZnlXaXRoTWVzc2FnZUhhc2g9ZnVuY3Rpb24oaixpKXtyZXR1cm4gdGhpcy52ZXJpZnlIZXgoaixpLHRoaXMucHViS2V5SGV4KX07dGhpcy52ZXJpZnlIZXg9ZnVuY3Rpb24obSxpLHApe3ZhciBsLGo7dmFyIG89S0pVUi5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXgoaSk7bD1vLnI7aj1vLnM7dmFyIGs7az1FQ1BvaW50RnAuZGVjb2RlRnJvbUhleCh0aGlzLmVjcGFyYW1zLmN1cnZlLHApO3ZhciBuPW5ldyBCaWdJbnRlZ2VyKG0sMTYpO3JldHVybiB0aGlzLnZlcmlmeVJhdyhuLGwsaixrKX07dGhpcy52ZXJpZnk9ZnVuY3Rpb24obyxwLGope3ZhciBsLGk7aWYoQml0Y29pbi5VdGlsLmlzQXJyYXkocCkpe3ZhciBuPXRoaXMucGFyc2VTaWcocCk7bD1uLnI7aT1uLnN9ZWxzZXtpZigib2JqZWN0Ij09PXR5cGVvZiBwJiZwLnImJnAucyl7bD1wLnI7aT1wLnN9ZWxzZXt0aHJvdyJJbnZhbGlkIHZhbHVlIGZvciBzaWduYXR1cmUifX12YXIgaztpZihqIGluc3RhbmNlb2YgRUNQb2ludEZwKXtrPWp9ZWxzZXtpZihCaXRjb2luLlV0aWwuaXNBcnJheShqKSl7az1FQ1BvaW50RnAuZGVjb2RlRnJvbSh0aGlzLmVjcGFyYW1zLmN1cnZlLGopfWVsc2V7dGhyb3ciSW52YWxpZCBmb3JtYXQgZm9yIHB1YmtleSB2YWx1ZSwgbXVzdCBiZSBieXRlIGFycmF5IG9yIEVDUG9pbnRGcCJ9fXZhciBtPUJpZ0ludGVnZXIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKG8pO3JldHVybiB0aGlzLnZlcmlmeVJhdyhtLGwsaSxrKX07dGhpcy52ZXJpZnlSYXc9ZnVuY3Rpb24obyxpLHcsbSl7dmFyIGw9dGhpcy5lY3BhcmFtcy5uO3ZhciB1PXRoaXMuZWNwYXJhbXMuRztpZihpLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk8MHx8aS5jb21wYXJlVG8obCk+PTApe3JldHVybiBmYWxzZX1pZih3LmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk8MHx8dy5jb21wYXJlVG8obCk+PTApe3JldHVybiBmYWxzZX12YXIgcD13Lm1vZEludmVyc2UobCk7dmFyIGs9by5tdWx0aXBseShwKS5tb2QobCk7dmFyIGo9aS5tdWx0aXBseShwKS5tb2QobCk7dmFyIHE9dS5tdWx0aXBseShrKS5hZGQobS5tdWx0aXBseShqKSk7dmFyIHQ9cS5nZXRYKCkudG9CaWdJbnRlZ2VyKCkubW9kKGwpO3JldHVybiB0LmVxdWFscyhpKX07dGhpcy5zZXJpYWxpemVTaWc9ZnVuY3Rpb24oayxqKXt2YXIgbD1rLnRvQnl0ZUFycmF5U2lnbmVkKCk7dmFyIGk9ai50b0J5dGVBcnJheVNpZ25lZCgpO3ZhciBtPVtdO20ucHVzaCgyKTttLnB1c2gobC5sZW5ndGgpO209bS5jb25jYXQobCk7bS5wdXNoKDIpO20ucHVzaChpLmxlbmd0aCk7bT1tLmNvbmNhdChpKTttLnVuc2hpZnQobS5sZW5ndGgpO20udW5zaGlmdCg0OCk7cmV0dXJuIG19O3RoaXMucGFyc2VTaWc9ZnVuY3Rpb24obil7dmFyIG07aWYoblswXSE9NDgpe3Rocm93IG5ldyBFcnJvcigiU2lnbmF0dXJlIG5vdCBhIHZhbGlkIERFUlNlcXVlbmNlIil9bT0yO2lmKG5bbV0hPTIpe3Rocm93IG5ldyBFcnJvcigiRmlyc3QgZWxlbWVudCBpbiBzaWduYXR1cmUgbXVzdCBiZSBhIERFUkludGVnZXIiKX12YXIgbD1uLnNsaWNlKG0rMixtKzIrblttKzFdKTttKz0yK25bbSsxXTtpZihuW21dIT0yKXt0aHJvdyBuZXcgRXJyb3IoIlNlY29uZCBlbGVtZW50IGluIHNpZ25hdHVyZSBtdXN0IGJlIGEgREVSSW50ZWdlciIpfXZhciBpPW4uc2xpY2UobSsyLG0rMituW20rMV0pO20rPTIrblttKzFdO3ZhciBrPUJpZ0ludGVnZXIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKGwpO3ZhciBqPUJpZ0ludGVnZXIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKGkpO3JldHVybntyOmssczpqfX07dGhpcy5wYXJzZVNpZ0NvbXBhY3Q9ZnVuY3Rpb24obSl7aWYobS5sZW5ndGghPT02NSl7dGhyb3ciU2lnbmF0dXJlIGhhcyB0aGUgd3JvbmcgbGVuZ3RoIn12YXIgaj1tWzBdLTI3O2lmKGo8MHx8aj43KXt0aHJvdyJJbnZhbGlkIHNpZ25hdHVyZSB0eXBlIn12YXIgbz10aGlzLmVjcGFyYW1zLm47dmFyIGw9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobS5zbGljZSgxLDMzKSkubW9kKG8pO3ZhciBrPUJpZ0ludGVnZXIuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKG0uc2xpY2UoMzMsNjUpKS5tb2Qobyk7cmV0dXJue3I6bCxzOmssaTpqfX07aWYoaCE9PXVuZGVmaW5lZCl7aWYoaC5jdXJ2ZSE9PXVuZGVmaW5lZCl7dGhpcy5jdXJ2ZU5hbWU9aC5jdXJ2ZX19aWYodGhpcy5jdXJ2ZU5hbWU9PT11bmRlZmluZWQpe3RoaXMuY3VydmVOYW1lPWV9dGhpcy5zZXROYW1lZEN1cnZlKHRoaXMuY3VydmVOYW1lKTtpZihoIT09dW5kZWZpbmVkKXtpZihoLnBydiE9PXVuZGVmaW5lZCl7dGhpcy5zZXRQcml2YXRlS2V5SGV4KGgucHJ2KX1pZihoLnB1YiE9PXVuZGVmaW5lZCl7dGhpcy5zZXRQdWJsaWNLZXlIZXgoaC5wdWIpfX19O0tKVVIuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4PWZ1bmN0aW9uKGEpe3ZhciBiPUtKVVIuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUyhhKTt2YXIgZD1uZXcgQmlnSW50ZWdlcihiLnIsMTYpO3ZhciBjPW5ldyBCaWdJbnRlZ2VyKGIucywxNik7cmV0dXJue3I6ZCxzOmN9fTtLSlVSLmNyeXB0by5FQ0RTQS5wYXJzZVNpZ0hleEluSGV4UlM9ZnVuY3Rpb24oYyl7aWYoYy5zdWJzdHIoMCwyKSE9IjMwIil7dGhyb3cic2lnbmF0dXJlIGlzIG5vdCBhIEFTTi4xIHNlcXVlbmNlIn12YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihjLDApO2lmKGIubGVuZ3RoIT0yKXt0aHJvdyJudW1iZXIgb2Ygc2lnbmF0dXJlIEFTTi4xIHNlcXVlbmNlIGVsZW1lbnRzIHNlZW0gd3JvbmcifXZhciBnPWJbMF07dmFyIGY9YlsxXTtpZihjLnN1YnN0cihnLDIpIT0iMDIiKXt0aHJvdyIxc3QgaXRlbSBvZiBzZXF1ZW5lIG9mIHNpZ25hdHVyZSBpcyBub3QgQVNOLjEgaW50ZWdlciJ9aWYoYy5zdWJzdHIoZiwyKSE9IjAyIil7dGhyb3ciMm5kIGl0ZW0gb2Ygc2VxdWVuZSBvZiBzaWduYXR1cmUgaXMgbm90IEFTTi4xIGludGVnZXIifXZhciBlPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGMsZyk7dmFyIGQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYyxmKTtyZXR1cm57cjplLHM6ZH19O0tKVVIuY3J5cHRvLkVDRFNBLmFzbjFTaWdUb0NvbmNhdFNpZz1mdW5jdGlvbihjKXt2YXIgZD1LSlVSLmNyeXB0by5FQ0RTQS5wYXJzZVNpZ0hleEluSGV4UlMoYyk7dmFyIGI9ZC5yO3ZhciBhPWQucztpZihiLnN1YnN0cigwLDIpPT0iMDAiJiYoKChiLmxlbmd0aC8yKSo4KSUoMTYqOCkpPT04KXtiPWIuc3Vic3RyKDIpfWlmKGEuc3Vic3RyKDAsMik9PSIwMCImJigoKGEubGVuZ3RoLzIpKjgpJSgxNio4KSk9PTgpe2E9YS5zdWJzdHIoMil9aWYoKCgoYi5sZW5ndGgvMikqOCklKDE2KjgpKSE9MCl7dGhyb3cidW5rbm93biBFQ0RTQSBzaWcgciBsZW5ndGggZXJyb3IifWlmKCgoKGEubGVuZ3RoLzIpKjgpJSgxNio4KSkhPTApe3Rocm93InVua25vd24gRUNEU0Egc2lnIHMgbGVuZ3RoIGVycm9yIn1yZXR1cm4gYithfTtLSlVSLmNyeXB0by5FQ0RTQS5jb25jYXRTaWdUb0FTTjFTaWc9ZnVuY3Rpb24oYSl7aWYoKCgoYS5sZW5ndGgvMikqOCklKDE2KjgpKSE9MCl7dGhyb3cidW5rbm93biBFQ0RTQSBjb25jYXRpbmF0ZWQgci1zIHNpZyAgbGVuZ3RoIGVycm9yIn12YXIgYz1hLnN1YnN0cigwLGEubGVuZ3RoLzIpO3ZhciBiPWEuc3Vic3RyKGEubGVuZ3RoLzIpO3JldHVybiBLSlVSLmNyeXB0by5FQ0RTQS5oZXhSU1NpZ1RvQVNOMVNpZyhjLGIpfTtLSlVSLmNyeXB0by5FQ0RTQS5oZXhSU1NpZ1RvQVNOMVNpZz1mdW5jdGlvbihiLGEpe3ZhciBkPW5ldyBCaWdJbnRlZ2VyKGIsMTYpO3ZhciBjPW5ldyBCaWdJbnRlZ2VyKGEsMTYpO3JldHVybiBLSlVSLmNyeXB0by5FQ0RTQS5iaVJTU2lnVG9BU04xU2lnKGQsYyl9O0tKVVIuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWc9ZnVuY3Rpb24oZSxjKXt2YXIgYj1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDplfSk7dmFyIGE9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Y30pO3ZhciBkPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OltiLGFdfSk7cmV0dXJuIGQuZ2V0RW5jb2RlZEhleCgpfTsKLyohIGVjcGFyYW0tMS4wLjAuanMgKGMpIDIwMTMgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuY3J5cHRvPT0idW5kZWZpbmVkInx8IUtKVVIuY3J5cHRvKXtLSlVSLmNyeXB0bz17fX1LSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCPW5ldyBmdW5jdGlvbigpe3ZhciBiPXt9O3ZhciBjPXt9O2Z1bmN0aW9uIGEoZCl7cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGQsMTYpfXRoaXMuZ2V0QnlOYW1lPWZ1bmN0aW9uKGUpe3ZhciBkPWU7aWYodHlwZW9mIGNbZF0hPSJ1bmRlZmluZWQiKXtkPWNbZV19aWYodHlwZW9mIGJbZF0hPSJ1bmRlZmluZWQiKXtyZXR1cm4gYltkXX10aHJvdyJ1bnJlZ2lzdGVyZWQgRUMgY3VydmUgbmFtZTogIitkfTt0aGlzLnJlZ2lzdD1mdW5jdGlvbihBLGwsbyxnLG0sZSxqLGYsayx1LGQseCl7YltBXT17fTt2YXIgcz1hKG8pO3ZhciB6PWEoZyk7dmFyIHk9YShtKTt2YXIgdD1hKGUpO3ZhciB3PWEoaik7dmFyIHI9bmV3IEVDQ3VydmVGcChzLHoseSk7dmFyIHE9ci5kZWNvZGVQb2ludEhleCgiMDQiK2Yrayk7YltBXVsibmFtZSJdPUE7YltBXVsia2V5bGVuIl09bDtiW0FdWyJjdXJ2ZSJdPXI7YltBXVsiRyJdPXE7YltBXVsibiJdPXQ7YltBXVsiaCJdPXc7YltBXVsib2lkIl09ZDtiW0FdWyJpbmZvIl09eDtmb3IodmFyIHY9MDt2PHUubGVuZ3RoO3YrKyl7Y1t1W3ZdXT1BfX19O0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTI4cjEiLDEyOCwiRkZGRkZGRkRGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkYiLCJGRkZGRkZGREZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQyIsIkU4NzU3OUMxMTA3OUY0M0REODI0OTkzQzJDRUU1RUQzIiwiRkZGRkZGRkUwMDAwMDAwMDc1QTMwRDFCOTAzOEExMTUiLCIxIiwiMTYxRkY3NTI4Qjg5OUIyRDBDMjg2MDdDQTUyQzVCODYiLCJDRjVBQzgzOTVCQUZFQjEzQzAyREEyOTJEREVEN0E4MyIsW10sIiIsInNlY3AxMjhyMSA6IFNFQ0cgY3VydmUgb3ZlciBhIDEyOCBiaXQgcHJpbWUgZmllbGQiKTtLSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdCgic2VjcDE2MGsxIiwxNjAsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkFDNzMiLCIwIiwiNyIsIjAxMDAwMDAwMDAwMDAwMDAwMDAwMDFCOEZBMTZERkFCOUFDQTE2QjZCMyIsIjEiLCIzQjRDMzgyQ0UzN0FBMTkyQTQwMTlFNzYzMDM2RjRGNURENEQ3RUJCIiwiOTM4Q0Y5MzUzMThGRENFRDZCQzI4Mjg2NTMxNzMzQzNGMDNDNEZFRSIsW10sIiIsInNlY3AxNjBrMSA6IFNFQ0cgY3VydmUgb3ZlciBhIDE2MCBiaXQgcHJpbWUgZmllbGQiKTtLSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdCgic2VjcDE2MHIxIiwxNjAsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGN0ZGRkZGRkYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjdGRkZGRkZDIiwiMUM5N0JFRkM1NEJEN0E4QjY1QUNGODlGODFENEQ0QURDNTY1RkE0NSIsIjAxMDAwMDAwMDAwMDAwMDAwMDAwMDFGNEM4RjkyN0FFRDNDQTc1MjI1NyIsIjEiLCI0QTk2QjU2ODhFRjU3MzI4NDY2NDY5ODk2OEMzOEJCOTEzQ0JGQzgyIiwiMjNBNjI4NTUzMTY4OTQ3RDU5RENDOTEyMDQyMzUxMzc3QUM1RkIzMiIsW10sIiIsInNlY3AxNjByMSA6IFNFQ0cgY3VydmUgb3ZlciBhIDE2MCBiaXQgcHJpbWUgZmllbGQiKTtLSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdCgic2VjcDE5MmsxIiwxOTIsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRUUzNyIsIjAiLCIzIiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFMjZGMkZDMTcwRjY5NDY2QTc0REVGRDhEIiwiMSIsIkRCNEZGMTBFQzA1N0U5QUUyNkIwN0QwMjgwQjdGNDM0MURBNUQxQjFFQUUwNkM3RCIsIjlCMkYyRjZEOUM1NjI4QTc4NDQxNjNEMDE1QkU4NjM0NDA4MkFBODhEOTVFMkY5RCIsW10pO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTkycjEiLDE5MiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkZGRkZGRkZGRkZGIiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkZGRkZGRkZGRkZDIiwiNjQyMTA1MTlFNTlDODBFNzBGQTdFOUFCNzIyNDMwNDlGRUI4REVFQ0MxNDZCOUIxIiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOTlERUY4MzYxNDZCQzlCMUI0RDIyODMxIiwiMSIsIjE4OERBODBFQjAzMDkwRjY3Q0JGMjBFQjQzQTE4ODAwRjRGRjBBRkQ4MkZGMTAxMiIsIjA3MTkyQjk1RkZDOERBNzg2MzEwMTFFRDZCMjRDREQ1NzNGOTc3QTExRTc5NDgxMSIsW10pO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMjI0cjEiLDIyNCwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRSIsIkI0MDUwQTg1MEMwNEIzQUJGNTQxMzI1NjUwNDRCMEI3RDdCRkQ4QkEyNzBCMzk0MzIzNTVGRkI0IiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjE2QTJFMEI4RjAzRTEzREQyOTQ1NUM1QzJBM0QiLCIxIiwiQjcwRTBDQkQ2QkI0QkY3RjMyMTM5MEI5NEEwM0MxRDM1NkMyMTEyMjM0MzI4MEQ2MTE1QzFEMjEiLCJCRDM3NjM4OEI1RjcyM0ZCNEMyMkRGRTZDRDQzNzVBMDVBMDc0NzY0NDRENTgxOTk4NTAwN0UzNCIsW10pO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMjU2azEiLDI1NiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkMyRiIsIjAiLCI3IiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVCQUFFRENFNkFGNDhBMDNCQkZEMjVFOENEMDM2NDE0MSIsIjEiLCI3OUJFNjY3RUY5RENCQkFDNTVBMDYyOTVDRTg3MEIwNzAyOUJGQ0RCMkRDRTI4RDk1OUYyODE1QjE2RjgxNzk4IiwiNDgzQURBNzcyNkEzQzQ2NTVEQTRGQkZDMEUxMTA4QThGRDE3QjQ0OEE2ODU1NDE5OUM0N0QwOEZGQjEwRDRCOCIsW10pO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMjU2cjEiLDI1NiwiRkZGRkZGRkYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRiIsIkZGRkZGRkZGMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkMiLCI1QUM2MzVEOEFBM0E5M0U3QjNFQkJENTU3Njk4ODZCQzY1MUQwNkIwQ0M1M0IwRjYzQkNFM0MzRTI3RDI2MDRCIiwiRkZGRkZGRkYwMDAwMDAwMEZGRkZGRkZGRkZGRkZGRkZCQ0U2RkFBREE3MTc5RTg0RjNCOUNBQzJGQzYzMjU1MSIsIjEiLCI2QjE3RDFGMkUxMkM0MjQ3RjhCQ0U2RTU2M0E0NDBGMjc3MDM3RDgxMkRFQjMzQTBGNEExMzk0NUQ4OThDMjk2IiwiNEZFMzQyRTJGRTFBN0Y5QjhFRTdFQjRBN0MwRjlFMTYyQkNFMzM1NzZCMzE1RUNFQ0JCNjQwNjgzN0JGNTFGNSIsWyJOSVNUIFAtMjU2IiwiUC0yNTYiLCJwcmltZTI1NnYxIl0pO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMzg0cjEiLDM4NCwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZGIiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZDIiwiQjMzMTJGQTdFMjNFRTdFNDk4OEUwNTZCRTNGODJEMTkxODFEOUM2RUZFODE0MTEyMDMxNDA4OEY1MDEzODc1QUM2NTYzOThEOEEyRUQxOUQyQTg1QzhFREQzRUMyQUVGIiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQzc2MzREODFGNDM3MkRERjU4MUEwREIyNDhCMEE3N0FFQ0VDMTk2QUNDQzUyOTczIiwiMSIsIkFBODdDQTIyQkU4QjA1Mzc4RUIxQzcxRUYzMjBBRDc0NkUxRDNCNjI4QkE3OUI5ODU5Rjc0MUUwODI1NDJBMzg1NTAyRjI1REJGNTUyOTZDM0E1NDVFMzg3Mjc2MEFCNyIsIjM2MTdkZTRhOTYyNjJjNmY1ZDllOThiZjkyOTJkYzI5ZjhmNDFkYmQyODlhMTQ3Y2U5ZGEzMTEzYjVmMGI4YzAwYTYwYjFjZTFkN2U4MTlkN2E0MzFkN2M5MGVhMGU1ZiIsWyJOSVNUIFAtMzg0IiwiUC0zODQiXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3A1MjFyMSIsNTIxLCIxRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRiIsIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDIiwiMDUxOTUzRUI5NjE4RTFDOUExRjkyOUEyMUEwQjY4NTQwRUVBMkRBNzI1Qjk5QjMxNUYzQjhCNDg5OTE4RUYxMDlFMTU2MTkzOTUxRUM3RTkzN0IxNjUyQzBCRDNCQjFCRjA3MzU3M0RGODgzRDJDMzRGMUVGNDUxRkQ0NkI1MDNGMDAiLCIxRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZBNTE4Njg3ODNCRjJGOTY2QjdGQ0MwMTQ4RjcwOUE1RDAzQkI1QzlCODg5OUM0N0FFQkI2RkI3MUU5MTM4NjQwOSIsIjEiLCJDNjg1OEUwNkI3MDQwNEU5Q0Q5RTNFQ0I2NjIzOTVCNDQyOUM2NDgxMzkwNTNGQjUyMUY4MjhBRjYwNkI0RDNEQkFBMTRCNUU3N0VGRTc1OTI4RkUxREMxMjdBMkZGQThERTMzNDhCM0MxODU2QTQyOUJGOTdFN0UzMUMyRTVCRDY2IiwiMDExODM5Mjk2YTc4OWEzYmMwMDQ1YzhhNWZiNDJjN2QxYmQ5OThmNTQ0NDk1NzliNDQ2ODE3YWZiZDE3MjczZTY2MmM5N2VlNzI5OTVlZjQyNjQwYzU1MGI5MDEzZmFkMDc2MTM1M2M3MDg2YTI3MmMyNDA4OGJlOTQ3NjlmZDE2NjUwIixbIk5JU1QgUC01MjEiLCJQLTUyMSJdKTsKLyohIGRzYS1tb2RpZmllZC0xLjAuMS5qcyAoYykgUmVjdXJpdHkgTGFicyBHbWJILCBLZW5qaSBVcnVzaGltbWEgfCBnaXRodWIuY29tL29wZW5wZ3Bqcy9vcGVucGdwanMvYmxvYi9tYXN0ZXIvTElDRU5TRQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLkRTQT1mdW5jdGlvbigpe3RoaXMucD1udWxsO3RoaXMucT1udWxsO3RoaXMuZz1udWxsO3RoaXMueT1udWxsO3RoaXMueD1udWxsO3RoaXMudHlwZT0iRFNBIjt0aGlzLnNldFByaXZhdGU9ZnVuY3Rpb24oeix3LHYsQSx1KXt0aGlzLmlzUHJpdmF0ZT10cnVlO3RoaXMucD16O3RoaXMucT13O3RoaXMuZz12O3RoaXMueT1BO3RoaXMueD11fTt0aGlzLnNldFB1YmxpYz1mdW5jdGlvbih3LHYsdSx6KXt0aGlzLmlzUHVibGljPXRydWU7dGhpcy5wPXc7dGhpcy5xPXY7dGhpcy5nPXU7dGhpcy55PXo7dGhpcy54PW51bGx9O3RoaXMuc2lnbldpdGhNZXNzYWdlSGFzaD1mdW5jdGlvbih6KXt2YXIgdj10aGlzLnA7dmFyIHU9dGhpcy5xO3ZhciBDPXRoaXMuZzt2YXIgRD10aGlzLnk7dmFyIEU9dGhpcy54O3ZhciBBPXouc3Vic3RyKDAsdS5iaXRMZW5ndGgoKS80KTt2YXIgQj1uZXcgQmlnSW50ZWdlcih6LDE2KTt2YXIgdz1uKEJpZ0ludGVnZXIuT05FLmFkZChCaWdJbnRlZ2VyLk9ORSksdS5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSkpO3ZhciBHPShDLm1vZFBvdyh3LHYpKS5tb2QodSk7dmFyIEY9KHcubW9kSW52ZXJzZSh1KS5tdWx0aXBseShCLmFkZChFLm11bHRpcGx5KEcpKSkpLm1vZCh1KTt2YXIgSD1LSlVSLmFzbjEuQVNOMVV0aWwuanNvblRvQVNOMUhFWCh7c2VxOlt7ImludCI6e2JpZ2ludDpHfX0seyJpbnQiOntiaWdpbnQ6Rn19XX0pO3JldHVybiBIfTt0aGlzLnZlcmlmeVdpdGhNZXNzYWdlSGFzaD1mdW5jdGlvbihDLEIpe3ZhciB6PXRoaXMucDt2YXIgdT10aGlzLnE7dmFyIEc9dGhpcy5nO3ZhciBIPXRoaXMueTt2YXIgRT10aGlzLnBhcnNlQVNOMVNpZ25hdHVyZShCKTt2YXIgSz1FWzBdO3ZhciBKPUVbMV07dmFyIEM9Qy5zdWJzdHIoMCx1LmJpdExlbmd0aCgpLzQpO3ZhciBEPW5ldyBCaWdJbnRlZ2VyKEMsMTYpO2lmKEJpZ0ludGVnZXIuWkVSTy5jb21wYXJlVG8oSyk+MHx8Sy5jb21wYXJlVG8odSk+MHx8QmlnSW50ZWdlci5aRVJPLmNvbXBhcmVUbyhKKT4wfHxKLmNvbXBhcmVUbyh1KT4wKXt0aHJvdyJpbnZhbGlkIERTQSBzaWduYXR1cmUifXZhciBJPUoubW9kSW52ZXJzZSh1KTt2YXIgQT1ELm11bHRpcGx5KEkpLm1vZCh1KTt2YXIgdj1LLm11bHRpcGx5KEkpLm1vZCh1KTt2YXIgRj1HLm1vZFBvdyhBLHopLm11bHRpcGx5KEgubW9kUG93KHYseikpLm1vZCh6KS5tb2QodSk7cmV0dXJuIEYuY29tcGFyZVRvKEspPT0wfTt0aGlzLnBhcnNlQVNOMVNpZ25hdHVyZT1mdW5jdGlvbih1KXt0cnl7dmFyIHk9bmV3IEJpZ0ludGVnZXIoQVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMF0sIjAyIiksMTYpO3ZhciB2PW5ldyBCaWdJbnRlZ2VyKEFTTjFIRVguZ2V0VmJ5TGlzdCh1LDAsWzFdLCIwMiIpLDE2KTtyZXR1cm5beSx2XX1jYXRjaCh3KXt0aHJvdyJtYWxmb3JtZWQgRFNBIHNpZ25hdHVyZSJ9fTtmdW5jdGlvbiBkKEUsdyxCLHYsdSxDKXt2YXIgej1LSlVSLmNyeXB0by5VdGlsLmhhc2hTdHJpbmcodyxFLnRvTG93ZXJDYXNlKCkpO3ZhciB6PXouc3Vic3RyKDAsdS5iaXRMZW5ndGgoKS80KTt2YXIgQT1uZXcgQmlnSW50ZWdlcih6LDE2KTt2YXIgeT1uKEJpZ0ludGVnZXIuT05FLmFkZChCaWdJbnRlZ2VyLk9ORSksdS5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSkpO3ZhciBGPShCLm1vZFBvdyh5LHYpKS5tb2QodSk7dmFyIEQ9KHkubW9kSW52ZXJzZSh1KS5tdWx0aXBseShBLmFkZChDLm11bHRpcGx5KEYpKSkpLm1vZCh1KTt2YXIgRz1uZXcgQXJyYXkoKTtHWzBdPUY7R1sxXT1EO3JldHVybiBHfWZ1bmN0aW9uIHIodil7dmFyIHU9b3BlbnBncC5jb25maWcuY29uZmlnLnByZWZlcl9oYXNoX2FsZ29yaXRobTtzd2l0Y2goTWF0aC5yb3VuZCh2LmJpdExlbmd0aCgpLzgpKXtjYXNlIDIwOmlmKHUhPTImJnU+MTEmJnUhPTEwJiZ1PDgpe3JldHVybiAyfXJldHVybiB1O2Nhc2UgMjg6aWYodT4xMSYmdTw4KXtyZXR1cm4gMTF9cmV0dXJuIHU7Y2FzZSAzMjppZih1PjEwJiZ1PDgpe3JldHVybiA4fXJldHVybiB1O2RlZmF1bHQ6dXRpbC5wcmludF9kZWJ1ZygiRFNBIHNlbGVjdCBoYXNoIGFsZ29yaXRobTogcmV0dXJuaW5nIG51bGwgZm9yIGFuIHVua25vd24gbGVuZ3RoIG9mIHEiKTtyZXR1cm4gbnVsbH19dGhpcy5zZWxlY3RfaGFzaF9hbGdvcml0aG09cjtmdW5jdGlvbiBtKEksSyxKLEIseix1LEYsRyl7dmFyIEM9S0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKEIsSS50b0xvd2VyQ2FzZSgpKTt2YXIgQz1DLnN1YnN0cigwLHUuYml0TGVuZ3RoKCkvNCk7dmFyIEQ9bmV3IEJpZ0ludGVnZXIoQywxNik7aWYoQmlnSW50ZWdlci5aRVJPLmNvbXBhcmVUbyhLKT4wfHxLLmNvbXBhcmVUbyh1KT4wfHxCaWdJbnRlZ2VyLlpFUk8uY29tcGFyZVRvKEopPjB8fEouY29tcGFyZVRvKHUpPjApe3V0aWwucHJpbnRfZXJyb3IoImludmFsaWQgRFNBIFNpZ25hdHVyZSIpO3JldHVybiBudWxsfXZhciBIPUoubW9kSW52ZXJzZSh1KTt2YXIgQT1ELm11bHRpcGx5KEgpLm1vZCh1KTt2YXIgdj1LLm11bHRpcGx5KEgpLm1vZCh1KTt2YXIgRT1GLm1vZFBvdyhBLHopLm11bHRpcGx5KEcubW9kUG93KHYseikpLm1vZCh6KS5tb2QodSk7cmV0dXJuIEUuY29tcGFyZVRvKEspPT0wfWZ1bmN0aW9uIGEoeil7dmFyIEE9bmV3IEJpZ0ludGVnZXIoeixwcmltZUNlbnRlcmllKTt2YXIgeT1qKHEsNTEyKTt2YXIgdT10KHAscSx6KTt2YXIgdjtkb3t2PW5ldyBCaWdJbnRlZ2VyKHEuYml0Q291bnQoKSxyYW5kKX13aGlsZSh4LmNvbXBhcmVUbyhCaWdJbnRlZ2VyLlpFUk8pIT0xJiZ4LmNvbXBhcmVUbyhxKSE9LTEpO3ZhciB3PWcubW9kUG93KHgscCk7cmV0dXJue3g6dixxOkEscDp5LGc6dSx5Ond9fWZ1bmN0aW9uIGooeSx6LHcpe2lmKHolNjQhPTApe3JldHVybiBmYWxzZX12YXIgdTt2YXIgdjtkb3t1PXcoYml0Y291bnQsdHJ1ZSk7dj11LnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKTt1PXUuc3VidHJhY3Qodi5yZW1haW5kZXIoeSkpfXdoaWxlKCF1LmlzUHJvYmFibGVQcmltZShwcmltZUNlbnRlcmllKXx8dS5iaXRMZW5ndGgoKSE9bCk7cmV0dXJuIHV9ZnVuY3Rpb24gdChCLHosQSx3KXt2YXIgdT1CLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKTt2YXIgeT11LmRpdmlkZSh6KTt2YXIgdjtkb3t2PXcoQSl9d2hpbGUodi5jb21wYXJlVG8odSkhPS0xJiZ2LmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSkhPTEpO3JldHVybiB2Lm1vZFBvdyh5LEIpfWZ1bmN0aW9uIG8odyx5LHUpe3ZhciB2O2Rve3Y9dSh5LGZhbHNlKX13aGlsZSh2LmNvbXBhcmVUbyh3KSE9LTEmJnYuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTykhPTEpO3JldHVybiB2fWZ1bmN0aW9uIGkodix3KXtrPW8odik7dmFyIHU9Zy5tb2RQb3coayx3KS5tb2Qodik7cmV0dXJuIHV9ZnVuY3Rpb24gaChCLHcseSx2LHosdSl7dmFyIEE9Qih2KTtzPSh3Lm1vZEludmVyc2UoeikubXVsdGlwbHkoQS5hZGQodS5tdWx0aXBseSh5KSkpKS5tb2Qoeik7cmV0dXJuIHN9dGhpcy5zaWduPWQ7dGhpcy52ZXJpZnk9bTtmdW5jdGlvbiBuKHcsdSl7aWYodS5jb21wYXJlVG8odyk8PTApe3JldHVybn12YXIgdj11LnN1YnRyYWN0KHcpO3ZhciB5PWUodi5iaXRMZW5ndGgoKSk7d2hpbGUoeT52KXt5PWUodi5iaXRMZW5ndGgoKSl9cmV0dXJuIHcuYWRkKHkpfWZ1bmN0aW9uIGUodyl7aWYodzwwKXtyZXR1cm4gbnVsbH12YXIgdT1NYXRoLmZsb29yKCh3KzcpLzgpO3ZhciB2PWModSk7aWYodyU4PjApe3Y9U3RyaW5nLmZyb21DaGFyQ29kZSgoTWF0aC5wb3coMix3JTgpLTEpJnYuY2hhckNvZGVBdCgwKSkrdi5zdWJzdHJpbmcoMSl9cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGYodiksMTYpfWZ1bmN0aW9uIGModyl7dmFyIHU9IiI7Zm9yKHZhciB2PTA7djx3O3YrKyl7dSs9U3RyaW5nLmZyb21DaGFyQ29kZShiKCkpfXJldHVybiB1fWZ1bmN0aW9uIGIoKXt2YXIgdT1uZXcgVWludDMyQXJyYXkoMSk7d2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXModSk7cmV0dXJuIHVbMF0mMjU1fWZ1bmN0aW9uIGYoeSl7aWYoeT09bnVsbCl7cmV0dXJuIiJ9dmFyIHY9W107dmFyIHc9eS5sZW5ndGg7dmFyIHo9MDt2YXIgdTt3aGlsZSh6PHcpe3U9eVt6KytdLmNoYXJDb2RlQXQoKS50b1N0cmluZygxNik7d2hpbGUodS5sZW5ndGg8Mil7dT0iMCIrdX12LnB1c2goIiIrdSl9cmV0dXJuIHYuam9pbigiIil9dGhpcy5nZXRSYW5kb21CaWdJbnRlZ2VySW5SYW5nZT1uO3RoaXMuZ2V0UmFuZG9tQmlnSW50ZWdlcj1lO3RoaXMuZ2V0UmFuZG9tQnl0ZXM9Y307Ci8qISBwa2NzNXBrZXktMS4wLjYuanMgKGMpIDIwMTMtMjAxNCBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KdmFyIFBLQ1M1UEtFWT1mdW5jdGlvbigpe3ZhciBjPWZ1bmN0aW9uKG4scCxvKXtyZXR1cm4gaShDcnlwdG9KUy5BRVMsbixwLG8pfTt2YXIgZD1mdW5jdGlvbihuLHAsbyl7cmV0dXJuIGkoQ3J5cHRvSlMuVHJpcGxlREVTLG4scCxvKX07dmFyIGk9ZnVuY3Rpb24ocSx2LHMsbyl7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh2KTt2YXIgdT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHMpO3ZhciBuPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uobyk7dmFyIHI9e307ci5rZXk9dTtyLml2PW47ci5jaXBoZXJ0ZXh0PXA7dmFyIHQ9cS5kZWNyeXB0KHIsdSx7aXY6bn0pO3JldHVybiBDcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh0KX07dmFyIGo9ZnVuY3Rpb24obixwLG8pe3JldHVybiBlKENyeXB0b0pTLkFFUyxuLHAsbyl9O3ZhciBtPWZ1bmN0aW9uKG4scCxvKXtyZXR1cm4gZShDcnlwdG9KUy5UcmlwbGVERVMsbixwLG8pfTt2YXIgZT1mdW5jdGlvbihzLHgsdixwKXt2YXIgcj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHgpO3ZhciB3PUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uodik7dmFyIG89Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShwKTt2YXIgbj17fTt2YXIgdT1zLmVuY3J5cHQocix3LHtpdjpvfSk7dmFyIHE9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh1LnRvU3RyaW5nKCkpO3ZhciB0PUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KHEpO3JldHVybiB0fTt2YXIgZz17IkFFUy0yNTYtQ0JDIjp7cHJvYzpjLGVwcm9jOmosa2V5bGVuOjMyLGl2bGVuOjE2fSwiQUVTLTE5Mi1DQkMiOntwcm9jOmMsZXByb2M6aixrZXlsZW46MjQsaXZsZW46MTZ9LCJBRVMtMTI4LUNCQyI6e3Byb2M6YyxlcHJvYzpqLGtleWxlbjoxNixpdmxlbjoxNn0sIkRFUy1FREUzLUNCQyI6e3Byb2M6ZCxlcHJvYzptLGtleWxlbjoyNCxpdmxlbjo4fX07dmFyIGI9ZnVuY3Rpb24obil7cmV0dXJuIGdbbl1bInByb2MiXX07dmFyIGs9ZnVuY3Rpb24obil7dmFyIHA9Q3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20obik7dmFyIG89Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocCk7cmV0dXJuIG99O3ZhciBsPWZ1bmN0aW9uKHEpe3ZhciByPXt9O2lmKHEubWF0Y2gobmV3IFJlZ0V4cCgiREVLLUluZm86IChbXixdKyksKFswLTlBLUZhLWZdKykiLCJtIikpKXtyLmNpcGhlcj1SZWdFeHAuJDE7ci5pdnNhbHQ9UmVnRXhwLiQyfWlmKHEubWF0Y2gobmV3IFJlZ0V4cCgiLS0tLS1CRUdJTiAoW0EtWl0rKSBQUklWQVRFIEtFWS0tLS0tIikpKXtyLnR5cGU9UmVnRXhwLiQxfXZhciBwPS0xO3ZhciB0PTA7aWYocS5pbmRleE9mKCJcclxuXHJcbiIpIT0tMSl7cD1xLmluZGV4T2YoIlxyXG5cclxuIik7dD0yfWlmKHEuaW5kZXhPZigiXG5cbiIpIT0tMSl7cD1xLmluZGV4T2YoIlxuXG4iKTt0PTF9dmFyIG89cS5pbmRleE9mKCItLS0tLUVORCIpO2lmKHAhPS0xJiZvIT0tMSl7dmFyIG49cS5zdWJzdHJpbmcocCt0KjIsby10KTtuPW4ucmVwbGFjZSgvXHMrL2csIiIpO3IuZGF0YT1ufXJldHVybiByfTt2YXIgaD1mdW5jdGlvbihvLHcsbil7dmFyIHQ9bi5zdWJzdHJpbmcoMCwxNik7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh0KTt2YXIgcD1DcnlwdG9KUy5lbmMuVXRmOC5wYXJzZSh3KTt2YXIgcz1nW29dWyJrZXlsZW4iXStnW29dWyJpdmxlbiJdO3ZhciB2PSIiO3ZhciB1PW51bGw7Zm9yKDs7KXt2YXIgcT1DcnlwdG9KUy5hbGdvLk1ENS5jcmVhdGUoKTtpZih1IT1udWxsKXtxLnVwZGF0ZSh1KX1xLnVwZGF0ZShwKTtxLnVwZGF0ZShyKTt1PXEuZmluYWxpemUoKTt2PXYrQ3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkodSk7aWYodi5sZW5ndGg+PXMqMil7YnJlYWt9fXZhciB4PXt9O3gua2V5aGV4PXYuc3Vic3RyKDAsZ1tvXVsia2V5bGVuIl0qMik7eC5pdmhleD12LnN1YnN0cihnW29dWyJrZXlsZW4iXSoyLGdbb11bIml2bGVuIl0qMik7cmV0dXJuIHh9O3ZhciBhPWZ1bmN0aW9uKG4sdCxwLHUpe3ZhciBxPUNyeXB0b0pTLmVuYy5CYXNlNjQucGFyc2Uobik7dmFyIG89Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocSk7dmFyIHM9Z1t0XVsicHJvYyJdO3ZhciByPXMobyxwLHUpO3JldHVybiByfTt2YXIgZj1mdW5jdGlvbihuLHEsbyxzKXt2YXIgcD1nW3FdWyJlcHJvYyJdO3ZhciByPXAobixvLHMpO3JldHVybiByfTtyZXR1cm57dmVyc2lvbjoiMS4wLjUiLGdldEhleEZyb21QRU06ZnVuY3Rpb24obyxyKXt2YXIgcD1vO2lmKHAuaW5kZXhPZigiQkVHSU4gIityKT09LTEpe3Rocm93ImNhbid0IGZpbmQgUEVNIGhlYWRlcjogIityfXA9cC5yZXBsYWNlKCItLS0tLUJFR0lOICIrcisiLS0tLS0iLCIiKTtwPXAucmVwbGFjZSgiLS0tLS1FTkQgIityKyItLS0tLSIsIiIpO3ZhciBxPXAucmVwbGFjZSgvXHMrL2csIiIpO3ZhciBuPWI2NHRvaGV4KHEpO3JldHVybiBufSxnZXREZWNyeXB0ZWRLZXlIZXhCeUtleUlWOmZ1bmN0aW9uKG8scixxLHApe3ZhciBuPWIocik7cmV0dXJuIG4obyxxLHApfSxwYXJzZVBLQ1M1UEVNOmZ1bmN0aW9uKG4pe3JldHVybiBsKG4pfSxnZXRLZXlBbmRVbnVzZWRJdkJ5UGFzc2NvZGVBbmRJdnNhbHQ6ZnVuY3Rpb24obyxuLHApe3JldHVybiBoKG8sbixwKX0sZGVjcnlwdEtleUI2NDpmdW5jdGlvbihuLHAsbyxxKXtyZXR1cm4gYShuLHAsbyxxKX0sZ2V0RGVjcnlwdGVkS2V5SGV4OmZ1bmN0aW9uKHcsdil7dmFyIG89bCh3KTt2YXIgcj1vLnR5cGU7dmFyIHA9by5jaXBoZXI7dmFyIG49by5pdnNhbHQ7dmFyIHE9by5kYXRhO3ZhciB1PWgocCx2LG4pO3ZhciB0PXUua2V5aGV4O3ZhciBzPWEocSxwLHQsbik7cmV0dXJuIHN9LGdldFJTQUtleUZyb21FbmNyeXB0ZWRQS0NTNVBFTTpmdW5jdGlvbihwLG8pe3ZhciBxPXRoaXMuZ2V0RGVjcnlwdGVkS2V5SGV4KHAsbyk7dmFyIG49bmV3IFJTQUtleSgpO24ucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhxKTtyZXR1cm4gbn0sZ2V0RXJ5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleDpmdW5jdGlvbihxLHgscixwKXt2YXIgbj0iIjtpZih0eXBlb2Ygcj09InVuZGVmaW5lZCJ8fHI9PW51bGwpe3I9IkFFUy0yNTYtQ0JDIn1pZih0eXBlb2YgZ1tyXT09InVuZGVmaW5lZCIpe3Rocm93IlBLQ1M1UEtFWSB1bnN1cHBvcnRlZCBhbGdvcml0aG06ICIrcn1pZih0eXBlb2YgcD09InVuZGVmaW5lZCJ8fHA9PW51bGwpe3ZhciB0PWdbcl1bIml2bGVuIl07dmFyIHM9ayh0KTtwPXMudG9VcHBlckNhc2UoKX12YXIgdz1oKHIseCxwKTt2YXIgdj13LmtleWhleDt2YXIgdT1mKHEscix2LHApO3ZhciBvPXUucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTt2YXIgbj0iLS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLVxyXG4iO24rPSJQcm9jLVR5cGU6IDQsRU5DUllQVEVEXHJcbiI7bis9IkRFSy1JbmZvOiAiK3IrIiwiK3ArIlxyXG4iO24rPSJcclxuIjtuKz1vO24rPSJcclxuLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS1cclxuIjtyZXR1cm4gbn0sZ2V0RXJ5cHRlZFBLQ1M1UEVNRnJvbVJTQUtleTpmdW5jdGlvbihDLEQsbyxzKXt2YXIgQT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOjB9KTt2YXIgdj1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpDLm59KTt2YXIgej1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOkMuZX0pO3ZhciBCPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMuZH0pO3ZhciB0PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMucH0pO3ZhciByPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMucX0pO3ZhciB5PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMuZG1wMX0pO3ZhciB1PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMuZG1xMX0pO3ZhciB4PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMuY29lZmZ9KTt2YXIgRT1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbQSx2LHosQix0LHIseSx1LHhdfSk7dmFyIHc9RS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuZ2V0RXJ5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleCh3LEQsbyxzKX0sbmV3RW5jcnlwdGVkUEtDUzVQRU06ZnVuY3Rpb24obixvLHIscyl7aWYodHlwZW9mIG89PSJ1bmRlZmluZWQifHxvPT1udWxsKXtvPTEwMjR9aWYodHlwZW9mIHI9PSJ1bmRlZmluZWQifHxyPT1udWxsKXtyPSIxMDAwMSJ9dmFyIHA9bmV3IFJTQUtleSgpO3AuZ2VuZXJhdGUobyxyKTt2YXIgcT1udWxsO2lmKHR5cGVvZiBzPT0idW5kZWZpbmVkInx8cz09bnVsbCl7cT10aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVJTQUtleShwa2V5LG4pfWVsc2V7cT10aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVJTQUtleShwa2V5LG4scyl9cmV0dXJuIHF9LGdldFJTQUtleUZyb21QbGFpblBLQ1M4UEVNOmZ1bmN0aW9uKHApe2lmKHAubWF0Y2goL0VOQ1JZUFRFRC8pKXt0aHJvdyJwZW0gc2hhbGwgYmUgbm90IEVOQ1JZUFRFRCJ9dmFyIG89dGhpcy5nZXRIZXhGcm9tUEVNKHAsIlBSSVZBVEUgS0VZIik7dmFyIG49dGhpcy5nZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleChvKTtyZXR1cm4gbn0sZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhIZXg6ZnVuY3Rpb24ocSl7dmFyIHA9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocSwwKTtpZihwLmxlbmd0aCE9Myl7dGhyb3cib3V0ZXIgREVSU2VxdWVuY2Ugc2hhbGwgaGF2ZSAzIGVsZW1lbnRzOiAiK3AubGVuZ3RofXZhciBvPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmoocSxwWzFdKTtpZihvIT0iMzAwZDA2MDkyYTg2NDg4NmY3MGQwMTAxMDEwNTAwIil7dGhyb3ciUEtDUzggQWxnb3JpdGhtSWRlbnRpZmllciBpcyBub3QgcnNhRW5jOiAiK299dmFyIG89QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihxLHBbMV0pO3ZhciByPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmoocSxwWzJdKTt2YXIgcz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihyLDApO3ZhciBuPW5ldyBSU0FLZXkoKTtuLnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcocyk7cmV0dXJuIG59LHBhcnNlSGV4T2ZFbmNyeXB0ZWRQS0NTODpmdW5jdGlvbih1KXt2YXIgcT17fTt2YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih1LDApO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwKS5pdGVtcyAhPSAyOiAiK3AubGVuZ3RofXEuY2lwaGVydGV4dD1BU04xSEVYLmdldEhleE9mVl9BdE9iaih1LHBbMV0pO3ZhciB3PUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUscFswXSk7aWYody5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMCkuaXRlbXMgIT0gMjogIit3Lmxlbmd0aH1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaih1LHdbMF0pIT0iMmE4NjQ4ODZmNzBkMDEwNTBkIil7dGhyb3cidGhpcyBvbmx5IHN1cHBvcnRzIHBrY3M1UEJFUzIifXZhciBuPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsd1sxXSk7aWYody5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xKS5pdGVtcyAhPSAyOiAiK24ubGVuZ3RofXZhciBvPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsblsxXSk7aWYoby5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjEpLml0ZW1zICE9IDI6ICIrby5sZW5ndGh9aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSxvWzBdKSE9IjJhODY0ODg2ZjcwZDAzMDciKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgVHJpcGxlREVTIn1xLmVuY3J5cHRpb25TY2hlbWVBbGc9IlRyaXBsZURFUyI7cS5lbmNyeXB0aW9uU2NoZW1lSVY9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSxvWzFdKTt2YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih1LG5bMF0pO2lmKHIubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wKS5pdGVtcyAhPSAyOiAiK3IubGVuZ3RofWlmKEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHUsclswXSkhPSIyYTg2NDg4NmY3MGQwMTA1MGMiKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQktERjIifXZhciB2PUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsclsxXSk7aWYodi5sZW5ndGg8Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMC4xKS5pdGVtcyA8IDI6ICIrdi5sZW5ndGh9cS5wYmtkZjJTYWx0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHUsdlswXSk7dmFyIHM9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSx2WzFdKTt0cnl7cS5wYmtkZjJJdGVyPXBhcnNlSW50KHMsMTYpfWNhdGNoKHQpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQgcGJrZGYySXRlcjogIitzfXJldHVybiBxfSxnZXRQQktERjJLZXlIZXhGcm9tUGFyYW06ZnVuY3Rpb24ocyxuKXt2YXIgcj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHMucGJrZGYyU2FsdCk7dmFyIG89cy5wYmtkZjJJdGVyO3ZhciBxPUNyeXB0b0pTLlBCS0RGMihuLHIse2tleVNpemU6MTkyLzMyLGl0ZXJhdGlvbnM6b30pO3ZhciBwPUNyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHEpO3JldHVybiBwfSxnZXRQbGFpblBLQ1M4SGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOmZ1bmN0aW9uKHYsdyl7dmFyIHA9dGhpcy5nZXRIZXhGcm9tUEVNKHYsIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIpO3ZhciBuPXRoaXMucGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4KHApO3ZhciBzPVBLQ1M1UEtFWS5nZXRQQktERjJLZXlIZXhGcm9tUGFyYW0obix3KTt2YXIgdD17fTt0LmNpcGhlcnRleHQ9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShuLmNpcGhlcnRleHQpO3ZhciByPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uocyk7dmFyIHE9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShuLmVuY3J5cHRpb25TY2hlbWVJVik7dmFyIHU9Q3J5cHRvSlMuVHJpcGxlREVTLmRlY3J5cHQodCxyLHtpdjpxfSk7dmFyIG89Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkodSk7cmV0dXJuIG99LGdldFJTQUtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbihxLHApe3ZhciBvPXRoaXMuZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShxLHApO3ZhciBuPXRoaXMuZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhIZXgobyk7cmV0dXJuIG59LGdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbihxLG8pe3ZhciBuPXRoaXMuZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShxLG8pO3ZhciBwPXRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KG4pO3JldHVybiBwfSxwYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4OmZ1bmN0aW9uKHEpe3ZhciBvPXt9O28uYWxncGFyYW09bnVsbDtpZihxLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihxLDApO2lmKHAubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDIpIn1pZihxLnN1YnN0cihwWzFdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDMpIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihxLHBbMV0pO2lmKG4ubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDQpIn1pZihxLnN1YnN0cihuWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDUpIn1vLmFsZ29pZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLG5bMF0pO2lmKHEuc3Vic3RyKG5bMV0sMik9PSIwNiIpe28uYWxncGFyYW09QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxuWzFdKX1pZihxLnN1YnN0cihwWzJdLDIpIT0iMDQiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDYpIn1vLmtleWlkeD1BU04xSEVYLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKHEscFsyXSk7cmV0dXJuIG99LGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOFBFTTpmdW5jdGlvbihvKXt2YXIgbj10aGlzLmdldEhleEZyb21QRU0obywiUFJJVkFURSBLRVkiKTt2YXIgcD10aGlzLmdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleChuKTtyZXR1cm4gcH0sZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4OmZ1bmN0aW9uKG4pe3ZhciBwPXRoaXMucGFyc2VQbGFpblByaXZhdGVQS0NTOEhleChuKTtpZihwLmFsZ29pZD09IjJhODY0ODg2ZjcwZDAxMDEwMSIpe3RoaXMucGFyc2VQcml2YXRlUmF3UlNBS2V5SGV4QXRPYmoobixwKTt2YXIgbz1wLmtleTt2YXIgcT1uZXcgUlNBS2V5KCk7cS5zZXRQcml2YXRlRXgoby5uLG8uZSxvLmQsby5wLG8ucSxvLmRwLG8uZHEsby5jbyk7cmV0dXJuIHF9ZWxzZXtpZihwLmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7dGhpcy5wYXJzZVByaXZhdGVSYXdFQ0tleUhleEF0T2JqKG4scCk7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3AuYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK3AuYWxncGFyYW19dmFyIHI9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3AuYWxncGFyYW1dO3ZhciBxPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6cixwcnY6cC5rZXl9KTtyZXR1cm4gcX1lbHNle3Rocm93InVuc3VwcG9ydGVkIHByaXZhdGUga2V5IGFsZ29yaXRobSJ9fX0sZ2V0UlNBS2V5RnJvbVB1YmxpY1BLQ1M4UEVNOmZ1bmN0aW9uKG8pe3ZhciBwPXRoaXMuZ2V0SGV4RnJvbVBFTShvLCJQVUJMSUMgS0VZIik7dmFyIG49dGhpcy5nZXRSU0FLZXlGcm9tUHVibGljUEtDUzhIZXgocCk7cmV0dXJuIG59LGdldEtleUZyb21QdWJsaWNQS0NTOFBFTTpmdW5jdGlvbihvKXt2YXIgcD10aGlzLmdldEhleEZyb21QRU0obywiUFVCTElDIEtFWSIpO3ZhciBuPXRoaXMuZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4SGV4KHApO3JldHVybiBufSxnZXRLZXlGcm9tUHVibGljUEtDUzhIZXg6ZnVuY3Rpb24obyl7dmFyIG49dGhpcy5wYXJzZVB1YmxpY1BLQ1M4SGV4KG8pO2lmKG4uYWxnb2lkPT0iMmE4NjQ4ODZmNzBkMDEwMTAxIil7dmFyIHI9dGhpcy5wYXJzZVB1YmxpY1Jhd1JTQUtleUhleChuLmtleSk7dmFyIHA9bmV3IFJTQUtleSgpO3Auc2V0UHVibGljKHIubixyLmUpO3JldHVybiBwfWVsc2V7aWYobi5hbGdvaWQ9PSIyYTg2NDhjZTNkMDIwMSIpe2lmKEtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtuLmFsZ3BhcmFtXT09PXVuZGVmaW5lZCl7dGhyb3ciS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lIHVuZGVmaW5lZDogIituLmFsZ3BhcmFtfXZhciBxPUtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtuLmFsZ3BhcmFtXTt2YXIgcD1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOnEscHViOm4ua2V5fSk7cmV0dXJuIHB9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZ29yaXRobSJ9fX0scGFyc2VQdWJsaWNSYXdSU0FLZXlIZXg6ZnVuY3Rpb24ocCl7dmFyIG49e307aWYocC5zdWJzdHIoMCwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDEpIn12YXIgbz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihwLDApO2lmKG8ubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMikifWlmKHAuc3Vic3RyKG9bMF0sMikhPSIwMiIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAzKSJ9bi5uPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHAsb1swXSk7aWYocC5zdWJzdHIob1sxXSwyKSE9IjAyIil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDQpIn1uLmU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocCxvWzFdKTtyZXR1cm4gbn0scGFyc2VQcml2YXRlUmF3UlNBS2V5SGV4QXRPYmo6ZnVuY3Rpb24obyxxKXt2YXIgcD1xLmtleWlkeDtpZihvLnN1YnN0cihwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIHByaXZhdGUga2V5KGNvZGU6MDAxKSJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoobyxwKTtpZihuLmxlbmd0aCE9OSl7dGhyb3cibWFsZm9ybWVkIFJTQSBwcml2YXRlIGtleShjb2RlOjAwMikifXEua2V5PXt9O3Eua2V5Lm49QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzFdKTtxLmtleS5lPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sblsyXSk7cS5rZXkuZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bM10pO3Eua2V5LnA9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzRdKTtxLmtleS5xPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sbls1XSk7cS5rZXkuZHA9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzZdKTtxLmtleS5kcT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bN10pO3Eua2V5LmNvPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sbls4XSl9LHBhcnNlUHJpdmF0ZVJhd0VDS2V5SGV4QXRPYmo6ZnVuY3Rpb24obyxxKXt2YXIgcD1xLmtleWlkeDtpZihvLnN1YnN0cihwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgRUNDIHByaXZhdGUga2V5KGNvZGU6MDAxKSJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoobyxwKTtpZihuLmxlbmd0aCE9Myl7dGhyb3cibWFsZm9ybWVkIEVDQyBwcml2YXRlIGtleShjb2RlOjAwMikifWlmKG8uc3Vic3RyKG5bMV0sMikhPSIwNCIpe3Rocm93Im1hbGZvcm1lZCBFQ0MgcHJpdmF0ZSBrZXkoY29kZTowMDMpIn1xLmtleT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bMV0pfSxwYXJzZVB1YmxpY1BLQ1M4SGV4OmZ1bmN0aW9uKHEpe3ZhciBvPXt9O28uYWxncGFyYW09bnVsbDt2YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihxLDApO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcC5sZW5ndGh9dmFyIHI9cFswXTtpZihxLnN1YnN0cihyLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMSkifXZhciBuPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEscik7aWYobi5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAyKSJ9aWYocS5zdWJzdHIoblswXSwyKSE9IjA2Iil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDMpIn1vLmFsZ29pZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLG5bMF0pO2lmKHEuc3Vic3RyKG5bMV0sMik9PSIwNiIpe28uYWxncGFyYW09QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxuWzFdKX1pZihxLnN1YnN0cihwWzFdLDIpIT0iMDMiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwNCkifW8ua2V5PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFsxXSkuc3Vic3RyKDIpO3JldHVybiBvfSxnZXRSU0FLZXlGcm9tUHVibGljUEtDUzhIZXg6ZnVuY3Rpb24ocil7dmFyIHE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoociwwKTtpZihxLmxlbmd0aCE9Mil7dGhyb3cib3V0ZXIgREVSU2VxdWVuY2Ugc2hhbGwgaGF2ZSAyIGVsZW1lbnRzOiAiK3EubGVuZ3RofXZhciBwPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmoocixxWzBdKTtpZihwIT0iMzAwZDA2MDkyYTg2NDg4NmY3MGQwMTAxMDEwNTAwIil7dGhyb3ciUEtDUzggQWxnb3JpdGhtSWQgaXMgbm90IHJzYUVuY3J5cHRpb24ifWlmKHIuc3Vic3RyKHFbMV0sMikhPSIwMyIpe3Rocm93IlBLQ1M4IFB1YmxpYyBLZXkgaXMgbm90IEJJVFNUUklORyBlbmNhcHNsYXRlZC4ifXZhciB0PUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmoocixxWzFdKSsyO2lmKHIuc3Vic3RyKHQsMikhPSIzMCIpe3Rocm93IlBLQ1M4IFB1YmxpYyBLZXkgaXMgbm90IFNFUVVFTkNFLiJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocix0KTtpZihuLmxlbmd0aCE9Mil7dGhyb3ciaW5uZXIgREVSU2VxdWVuY2Ugc2hhbGwgaGF2ZSAyIGVsZW1lbnRzOiAiK24ubGVuZ3RofWlmKHIuc3Vic3RyKG5bMF0sMikhPSIwMiIpe3Rocm93Ik4gaXMgbm90IEFTTi4xIElOVEVHRVIifWlmKHIuc3Vic3RyKG5bMV0sMikhPSIwMiIpe3Rocm93IkUgaXMgbm90IEFTTi4xIElOVEVHRVIifXZhciB1PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHIsblswXSk7dmFyIHM9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocixuWzFdKTt2YXIgbz1uZXcgUlNBS2V5KCk7by5zZXRQdWJsaWModSxzKTtyZXR1cm4gb30sfX0oKTsKLyohIGtleXV0aWwtMS4wLjEyLmpzIChjKSAyMDEzLTIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCnZhciBLRVlVVElMPWZ1bmN0aW9uKCl7dmFyIGQ9ZnVuY3Rpb24ocCxyLHEpe3JldHVybiBrKENyeXB0b0pTLkFFUyxwLHIscSl9O3ZhciBlPWZ1bmN0aW9uKHAscixxKXtyZXR1cm4gayhDcnlwdG9KUy5UcmlwbGVERVMscCxyLHEpfTt2YXIgYT1mdW5jdGlvbihwLHIscSl7cmV0dXJuIGsoQ3J5cHRvSlMuREVTLHAscixxKX07dmFyIGs9ZnVuY3Rpb24ocyx4LHUscSl7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh4KTt2YXIgdz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHUpO3ZhciBwPUNyeXB0b0pTLmVuYy5IZXgucGFyc2UocSk7dmFyIHQ9e307dC5rZXk9dzt0Lml2PXA7dC5jaXBoZXJ0ZXh0PXI7dmFyIHY9cy5kZWNyeXB0KHQsdyx7aXY6cH0pO3JldHVybiBDcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh2KX07dmFyIGw9ZnVuY3Rpb24ocCxyLHEpe3JldHVybiBnKENyeXB0b0pTLkFFUyxwLHIscSl9O3ZhciBvPWZ1bmN0aW9uKHAscixxKXtyZXR1cm4gZyhDcnlwdG9KUy5UcmlwbGVERVMscCxyLHEpfTt2YXIgZj1mdW5jdGlvbihwLHIscSl7cmV0dXJuIGcoQ3J5cHRvSlMuREVTLHAscixxKX07dmFyIGc9ZnVuY3Rpb24odCx5LHYscSl7dmFyIHM9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh5KTt2YXIgeD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHYpO3ZhciBwPUNyeXB0b0pTLmVuYy5IZXgucGFyc2UocSk7dmFyIHc9dC5lbmNyeXB0KHMseCx7aXY6cH0pO3ZhciByPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uody50b1N0cmluZygpKTt2YXIgdT1DcnlwdG9KUy5lbmMuQmFzZTY0LnN0cmluZ2lmeShyKTtyZXR1cm4gdX07dmFyIGk9eyJBRVMtMjU2LUNCQyI6e3Byb2M6ZCxlcHJvYzpsLGtleWxlbjozMixpdmxlbjoxNn0sIkFFUy0xOTItQ0JDIjp7cHJvYzpkLGVwcm9jOmwsa2V5bGVuOjI0LGl2bGVuOjE2fSwiQUVTLTEyOC1DQkMiOntwcm9jOmQsZXByb2M6bCxrZXlsZW46MTYsaXZsZW46MTZ9LCJERVMtRURFMy1DQkMiOntwcm9jOmUsZXByb2M6byxrZXlsZW46MjQsaXZsZW46OH0sIkRFUy1DQkMiOntwcm9jOmEsZXByb2M6ZixrZXlsZW46OCxpdmxlbjo4fX07dmFyIGM9ZnVuY3Rpb24ocCl7cmV0dXJuIGlbcF1bInByb2MiXX07dmFyIG09ZnVuY3Rpb24ocCl7dmFyIHI9Q3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20ocCk7dmFyIHE9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocik7cmV0dXJuIHF9O3ZhciBuPWZ1bmN0aW9uKHQpe3ZhciB1PXt9O2lmKHQubWF0Y2gobmV3IFJlZ0V4cCgiREVLLUluZm86IChbXixdKyksKFswLTlBLUZhLWZdKykiLCJtIikpKXt1LmNpcGhlcj1SZWdFeHAuJDE7dS5pdnNhbHQ9UmVnRXhwLiQyfWlmKHQubWF0Y2gobmV3IFJlZ0V4cCgiLS0tLS1CRUdJTiAoW0EtWl0rKSBQUklWQVRFIEtFWS0tLS0tIikpKXt1LnR5cGU9UmVnRXhwLiQxfXZhciByPS0xO3ZhciB2PTA7aWYodC5pbmRleE9mKCJcclxuXHJcbiIpIT0tMSl7cj10LmluZGV4T2YoIlxyXG5cclxuIik7dj0yfWlmKHQuaW5kZXhPZigiXG5cbiIpIT0tMSl7cj10LmluZGV4T2YoIlxuXG4iKTt2PTF9dmFyIHE9dC5pbmRleE9mKCItLS0tLUVORCIpO2lmKHIhPS0xJiZxIT0tMSl7dmFyIHA9dC5zdWJzdHJpbmcocit2KjIscS12KTtwPXAucmVwbGFjZSgvXHMrL2csIiIpO3UuZGF0YT1wfXJldHVybiB1fTt2YXIgaj1mdW5jdGlvbihxLHkscCl7dmFyIHY9cC5zdWJzdHJpbmcoMCwxNik7dmFyIHQ9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh2KTt2YXIgcj1DcnlwdG9KUy5lbmMuVXRmOC5wYXJzZSh5KTt2YXIgdT1pW3FdWyJrZXlsZW4iXStpW3FdWyJpdmxlbiJdO3ZhciB4PSIiO3ZhciB3PW51bGw7Zm9yKDs7KXt2YXIgcz1DcnlwdG9KUy5hbGdvLk1ENS5jcmVhdGUoKTtpZih3IT1udWxsKXtzLnVwZGF0ZSh3KX1zLnVwZGF0ZShyKTtzLnVwZGF0ZSh0KTt3PXMuZmluYWxpemUoKTt4PXgrQ3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkodyk7aWYoeC5sZW5ndGg+PXUqMil7YnJlYWt9fXZhciB6PXt9O3oua2V5aGV4PXguc3Vic3RyKDAsaVtxXVsia2V5bGVuIl0qMik7ei5pdmhleD14LnN1YnN0cihpW3FdWyJrZXlsZW4iXSoyLGlbcV1bIml2bGVuIl0qMik7cmV0dXJuIHp9O3ZhciBiPWZ1bmN0aW9uKHAsdixyLHcpe3ZhciBzPUNyeXB0b0pTLmVuYy5CYXNlNjQucGFyc2UocCk7dmFyIHE9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocyk7dmFyIHU9aVt2XVsicHJvYyJdO3ZhciB0PXUocSxyLHcpO3JldHVybiB0fTt2YXIgaD1mdW5jdGlvbihwLHMscSx1KXt2YXIgcj1pW3NdWyJlcHJvYyJdO3ZhciB0PXIocCxxLHUpO3JldHVybiB0fTtyZXR1cm57dmVyc2lvbjoiMS4wLjAiLGdldEhleEZyb21QRU06ZnVuY3Rpb24ocSx1KXt2YXIgcj1xO2lmKHIuaW5kZXhPZigiLS0tLS1CRUdJTiAiKT09LTEpe3Rocm93ImNhbid0IGZpbmQgUEVNIGhlYWRlcjogIit1fWlmKHR5cGVvZiB1PT0ic3RyaW5nIiYmdSE9IiIpe3I9ci5yZXBsYWNlKCItLS0tLUJFR0lOICIrdSsiLS0tLS0iLCIiKTtyPXIucmVwbGFjZSgiLS0tLS1FTkQgIit1KyItLS0tLSIsIiIpfWVsc2V7cj1yLnJlcGxhY2UoLy0tLS0tQkVHSU4gW14tXSstLS0tLS8sIiIpO3I9ci5yZXBsYWNlKC8tLS0tLUVORCBbXi1dKy0tLS0tLywiIil9dmFyIHQ9ci5yZXBsYWNlKC9ccysvZywiIik7dmFyIHA9YjY0dG9oZXgodCk7cmV0dXJuIHB9LGdldERlY3J5cHRlZEtleUhleEJ5S2V5SVY6ZnVuY3Rpb24ocSx0LHMscil7dmFyIHA9Yyh0KTtyZXR1cm4gcChxLHMscil9LHBhcnNlUEtDUzVQRU06ZnVuY3Rpb24ocCl7cmV0dXJuIG4ocCl9LGdldEtleUFuZFVudXNlZEl2QnlQYXNzY29kZUFuZEl2c2FsdDpmdW5jdGlvbihxLHAscil7cmV0dXJuIGoocSxwLHIpfSxkZWNyeXB0S2V5QjY0OmZ1bmN0aW9uKHAscixxLHMpe3JldHVybiBiKHAscixxLHMpfSxnZXREZWNyeXB0ZWRLZXlIZXg6ZnVuY3Rpb24oeSx4KXt2YXIgcT1uKHkpO3ZhciB0PXEudHlwZTt2YXIgcj1xLmNpcGhlcjt2YXIgcD1xLml2c2FsdDt2YXIgcz1xLmRhdGE7dmFyIHc9aihyLHgscCk7dmFyIHY9dy5rZXloZXg7dmFyIHU9YihzLHIsdixwKTtyZXR1cm4gdX0sZ2V0UlNBS2V5RnJvbUVuY3J5cHRlZFBLQ1M1UEVNOmZ1bmN0aW9uKHIscSl7dmFyIHM9dGhpcy5nZXREZWNyeXB0ZWRLZXlIZXgocixxKTt2YXIgcD1uZXcgUlNBS2V5KCk7cC5yZWFkUHJpdmF0ZUtleUZyb21BU04xSGV4U3RyaW5nKHMpO3JldHVybiBwfSxnZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXg6ZnVuY3Rpb24oeCxzLEEsdCxyKXt2YXIgcD0iIjtpZih0eXBlb2YgdD09InVuZGVmaW5lZCJ8fHQ9PW51bGwpe3Q9IkFFUy0yNTYtQ0JDIn1pZih0eXBlb2YgaVt0XT09InVuZGVmaW5lZCIpe3Rocm93IktFWVVUSUwgdW5zdXBwb3J0ZWQgYWxnb3JpdGhtOiAiK3R9aWYodHlwZW9mIHI9PSJ1bmRlZmluZWQifHxyPT1udWxsKXt2YXIgdj1pW3RdWyJpdmxlbiJdO3ZhciB1PW0odik7cj11LnRvVXBwZXJDYXNlKCl9dmFyIHo9aih0LEEscik7dmFyIHk9ei5rZXloZXg7dmFyIHc9aChzLHQseSxyKTt2YXIgcT13LnJlcGxhY2UoLyguezY0fSkvZywiJDFcclxuIik7dmFyIHA9Ii0tLS0tQkVHSU4gIit4KyIgUFJJVkFURSBLRVktLS0tLVxyXG4iO3ArPSJQcm9jLVR5cGU6IDQsRU5DUllQVEVEXHJcbiI7cCs9IkRFSy1JbmZvOiAiK3QrIiwiK3IrIlxyXG4iO3ArPSJcclxuIjtwKz1xO3ArPSJcclxuLS0tLS1FTkQgIit4KyIgUFJJVkFURSBLRVktLS0tLVxyXG4iO3JldHVybiBwfSxnZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21SU0FLZXk6ZnVuY3Rpb24oRCxFLHIsdCl7dmFyIEI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHsiaW50IjowfSk7dmFyIHc9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6RC5ufSk7dmFyIEE9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHsiaW50IjpELmV9KTt2YXIgQz1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELmR9KTt2YXIgdT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELnB9KTt2YXIgcz1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELnF9KTt2YXIgej1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELmRtcDF9KTt2YXIgdj1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELmRtcTF9KTt2YXIgeT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELmNvZWZmfSk7dmFyIEY9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W0IsdyxBLEMsdSxzLHosdix5XX0pO3ZhciB4PUYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleCgiUlNBIix4LEUscix0KX0sbmV3RW5jcnlwdGVkUEtDUzVQRU06ZnVuY3Rpb24ocCxxLHQsdSl7aWYodHlwZW9mIHE9PSJ1bmRlZmluZWQifHxxPT1udWxsKXtxPTEwMjR9aWYodHlwZW9mIHQ9PSJ1bmRlZmluZWQifHx0PT1udWxsKXt0PSIxMDAwMSJ9dmFyIHI9bmV3IFJTQUtleSgpO3IuZ2VuZXJhdGUocSx0KTt2YXIgcz1udWxsO2lmKHR5cGVvZiB1PT0idW5kZWZpbmVkInx8dT09bnVsbCl7cz10aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVJTQUtleShyLHApfWVsc2V7cz10aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVJTQUtleShyLHAsdSl9cmV0dXJuIHN9LGdldFJTQUtleUZyb21QbGFpblBLQ1M4UEVNOmZ1bmN0aW9uKHIpe2lmKHIubWF0Y2goL0VOQ1JZUFRFRC8pKXt0aHJvdyJwZW0gc2hhbGwgYmUgbm90IEVOQ1JZUFRFRCJ9dmFyIHE9dGhpcy5nZXRIZXhGcm9tUEVNKHIsIlBSSVZBVEUgS0VZIik7dmFyIHA9dGhpcy5nZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleChxKTtyZXR1cm4gcH0sZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhIZXg6ZnVuY3Rpb24ocyl7dmFyIHI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocywwKTtpZihyLmxlbmd0aCE9Myl7dGhyb3cib3V0ZXIgREVSU2VxdWVuY2Ugc2hhbGwgaGF2ZSAzIGVsZW1lbnRzOiAiK3IubGVuZ3RofXZhciBxPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmoocyxyWzFdKTtpZihxIT0iMzAwZDA2MDkyYTg2NDg4NmY3MGQwMTAxMDEwNTAwIil7dGhyb3ciUEtDUzggQWxnb3JpdGhtSWRlbnRpZmllciBpcyBub3QgcnNhRW5jOiAiK3F9dmFyIHE9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihzLHJbMV0pO3ZhciB0PUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmoocyxyWzJdKTt2YXIgdT1BU04xSEVYLmdldEhleE9mVl9BdE9iaih0LDApO3ZhciBwPW5ldyBSU0FLZXkoKTtwLnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcodSk7cmV0dXJuIHB9LHBhcnNlSGV4T2ZFbmNyeXB0ZWRQS0NTODpmdW5jdGlvbih3KXt2YXIgcz17fTt2YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih3LDApO2lmKHIubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwKS5pdGVtcyAhPSAyOiAiK3IubGVuZ3RofXMuY2lwaGVydGV4dD1BU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHJbMV0pO3ZhciB5PUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcsclswXSk7aWYoeS5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMCkuaXRlbXMgIT0gMjogIit5Lmxlbmd0aH1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHlbMF0pIT0iMmE4NjQ4ODZmNzBkMDEwNTBkIil7dGhyb3cidGhpcyBvbmx5IHN1cHBvcnRzIHBrY3M1UEJFUzIifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcseVsxXSk7aWYoeS5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xKS5pdGVtcyAhPSAyOiAiK3AubGVuZ3RofXZhciBxPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcscFsxXSk7aWYocS5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjEpLml0ZW1zICE9IDI6ICIrcS5sZW5ndGh9aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyxxWzBdKSE9IjJhODY0ODg2ZjcwZDAzMDciKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgVHJpcGxlREVTIn1zLmVuY3J5cHRpb25TY2hlbWVBbGc9IlRyaXBsZURFUyI7cy5lbmNyeXB0aW9uU2NoZW1lSVY9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyxxWzFdKTt2YXIgdD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih3LHBbMF0pO2lmKHQubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wKS5pdGVtcyAhPSAyOiAiK3QubGVuZ3RofWlmKEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHcsdFswXSkhPSIyYTg2NDg4NmY3MGQwMTA1MGMiKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQktERjIifXZhciB4PUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcsdFsxXSk7aWYoeC5sZW5ndGg8Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMC4xKS5pdGVtcyA8IDI6ICIreC5sZW5ndGh9cy5wYmtkZjJTYWx0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHcseFswXSk7dmFyIHU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyx4WzFdKTt0cnl7cy5wYmtkZjJJdGVyPXBhcnNlSW50KHUsMTYpfWNhdGNoKHYpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQgcGJrZGYySXRlcjogIit1fXJldHVybiBzfSxnZXRQQktERjJLZXlIZXhGcm9tUGFyYW06ZnVuY3Rpb24odSxwKXt2YXIgdD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHUucGJrZGYyU2FsdCk7dmFyIHE9dS5wYmtkZjJJdGVyO3ZhciBzPUNyeXB0b0pTLlBCS0RGMihwLHQse2tleVNpemU6MTkyLzMyLGl0ZXJhdGlvbnM6cX0pO3ZhciByPUNyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHMpO3JldHVybiByfSxnZXRQbGFpblBLQ1M4SGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOmZ1bmN0aW9uKHgseSl7dmFyIHI9dGhpcy5nZXRIZXhGcm9tUEVNKHgsIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIpO3ZhciBwPXRoaXMucGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4KHIpO3ZhciB1PUtFWVVUSUwuZ2V0UEJLREYyS2V5SGV4RnJvbVBhcmFtKHAseSk7dmFyIHY9e307di5jaXBoZXJ0ZXh0PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UocC5jaXBoZXJ0ZXh0KTt2YXIgdD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHUpO3ZhciBzPUNyeXB0b0pTLmVuYy5IZXgucGFyc2UocC5lbmNyeXB0aW9uU2NoZW1lSVYpO3ZhciB3PUNyeXB0b0pTLlRyaXBsZURFUy5kZWNyeXB0KHYsdCx7aXY6c30pO3ZhciBxPUNyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHcpO3JldHVybiBxfSxnZXRSU0FLZXlGcm9tRW5jcnlwdGVkUEtDUzhQRU06ZnVuY3Rpb24ocyxyKXt2YXIgcT10aGlzLmdldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU0ocyxyKTt2YXIgcD10aGlzLmdldFJTQUtleUZyb21QbGFpblBLQ1M4SGV4KHEpO3JldHVybiBwfSxnZXRLZXlGcm9tRW5jcnlwdGVkUEtDUzhQRU06ZnVuY3Rpb24ocyxxKXt2YXIgcD10aGlzLmdldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU0ocyxxKTt2YXIgcj10aGlzLmdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleChwKTtyZXR1cm4gcn0scGFyc2VQbGFpblByaXZhdGVQS0NTOEhleDpmdW5jdGlvbihzKXt2YXIgcT17fTtxLmFsZ3BhcmFtPW51bGw7aWYocy5zdWJzdHIoMCwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIHBsYWluIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDAxKSJ9dmFyIHI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocywwKTtpZihyLmxlbmd0aCE9Myl7dGhyb3cibWFsZm9ybWVkIHBsYWluIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDAyKSJ9aWYocy5zdWJzdHIoclsxXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDAzKSJ9dmFyIHA9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocyxyWzFdKTtpZihwLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDA0KSJ9aWYocy5zdWJzdHIocFswXSwyKSE9IjA2Iil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDA1KSJ9cS5hbGdvaWQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxwWzBdKTtpZihzLnN1YnN0cihwWzFdLDIpPT0iMDYiKXtxLmFsZ3BhcmFtPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHMscFsxXSl9aWYocy5zdWJzdHIoclsyXSwyKSE9IjA0Iil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDA2KSJ9cS5rZXlpZHg9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihzLHJbMl0pO3JldHVybiBxfSxnZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhQRU06ZnVuY3Rpb24ocSl7dmFyIHA9dGhpcy5nZXRIZXhGcm9tUEVNKHEsIlBSSVZBVEUgS0VZIik7dmFyIHI9dGhpcy5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXgocCk7cmV0dXJuIHJ9LGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleDpmdW5jdGlvbihwKXt2YXIgdz10aGlzLnBhcnNlUGxhaW5Qcml2YXRlUEtDUzhIZXgocCk7aWYody5hbGdvaWQ9PSIyYTg2NDg4NmY3MGQwMTAxMDEiKXt0aGlzLnBhcnNlUHJpdmF0ZVJhd1JTQUtleUhleEF0T2JqKHAsdyk7dmFyIHU9dy5rZXk7dmFyIHo9bmV3IFJTQUtleSgpO3ouc2V0UHJpdmF0ZUV4KHUubix1LmUsdS5kLHUucCx1LnEsdS5kcCx1LmRxLHUuY28pO3JldHVybiB6fWVsc2V7aWYody5hbGdvaWQ9PSIyYTg2NDhjZTNkMDIwMSIpe3RoaXMucGFyc2VQcml2YXRlUmF3RUNLZXlIZXhBdE9iaihwLHcpO2lmKEtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVt3LmFsZ3BhcmFtXT09PXVuZGVmaW5lZCl7dGhyb3ciS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lIHVuZGVmaW5lZDogIit3LmFsZ3BhcmFtfXZhciB2PUtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVt3LmFsZ3BhcmFtXTt2YXIgej1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOnZ9KTt6LnNldFB1YmxpY0tleUhleCh3LnB1YmtleSk7ei5zZXRQcml2YXRlS2V5SGV4KHcua2V5KTt6LmlzUHVibGljPWZhbHNlO3JldHVybiB6fWVsc2V7aWYody5hbGdvaWQ9PSIyYTg2NDhjZTM4MDQwMSIpe3ZhciB0PUFTTjFIRVguZ2V0VmJ5TGlzdChwLDAsWzEsMSwwXSwiMDIiKTt2YXIgcz1BU04xSEVYLmdldFZieUxpc3QocCwwLFsxLDEsMV0sIjAyIik7dmFyIHk9QVNOMUhFWC5nZXRWYnlMaXN0KHAsMCxbMSwxLDJdLCIwMiIpO3ZhciBCPUFTTjFIRVguZ2V0VmJ5TGlzdChwLDAsWzIsMF0sIjAyIik7dmFyIHI9bmV3IEJpZ0ludGVnZXIodCwxNik7dmFyIHE9bmV3IEJpZ0ludGVnZXIocywxNik7dmFyIHg9bmV3IEJpZ0ludGVnZXIoeSwxNik7dmFyIEE9bmV3IEJpZ0ludGVnZXIoQiwxNik7dmFyIHo9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3ouc2V0UHJpdmF0ZShyLHEseCxudWxsLEEpO3JldHVybiB6fWVsc2V7dGhyb3cidW5zdXBwb3J0ZWQgcHJpdmF0ZSBrZXkgYWxnb3JpdGhtIn19fX0sZ2V0UlNBS2V5RnJvbVB1YmxpY1BLQ1M4UEVNOmZ1bmN0aW9uKHEpe3ZhciByPXRoaXMuZ2V0SGV4RnJvbVBFTShxLCJQVUJMSUMgS0VZIik7dmFyIHA9dGhpcy5nZXRSU0FLZXlGcm9tUHVibGljUEtDUzhIZXgocik7cmV0dXJuIHB9LGdldEtleUZyb21QdWJsaWNQS0NTOFBFTTpmdW5jdGlvbihxKXt2YXIgcj10aGlzLmdldEhleEZyb21QRU0ocSwiUFVCTElDIEtFWSIpO3ZhciBwPXRoaXMuZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4SGV4KHIpO3JldHVybiBwfSxnZXRLZXlGcm9tUHVibGljUEtDUzhIZXg6ZnVuY3Rpb24ocSl7dmFyIHA9dGhpcy5wYXJzZVB1YmxpY1BLQ1M4SGV4KHEpO2lmKHAuYWxnb2lkPT0iMmE4NjQ4ODZmNzBkMDEwMTAxIil7dmFyIHU9dGhpcy5wYXJzZVB1YmxpY1Jhd1JTQUtleUhleChwLmtleSk7dmFyIHI9bmV3IFJTQUtleSgpO3Iuc2V0UHVibGljKHUubix1LmUpO3JldHVybiByfWVsc2V7aWYocC5hbGdvaWQ9PSIyYTg2NDhjZTNkMDIwMSIpe2lmKEtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtwLmFsZ3BhcmFtXT09PXVuZGVmaW5lZCl7dGhyb3ciS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lIHVuZGVmaW5lZDogIitwLmFsZ3BhcmFtfXZhciBzPUtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtwLmFsZ3BhcmFtXTt2YXIgcj1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOnMscHViOnAua2V5fSk7cmV0dXJuIHJ9ZWxzZXtpZihwLmFsZ29pZD09IjJhODY0OGNlMzgwNDAxIil7dmFyIHQ9cC5hbGdwYXJhbTt2YXIgdj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihwLmtleSwwKTt2YXIgcj1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7ci5zZXRQdWJsaWMobmV3IEJpZ0ludGVnZXIodC5wLDE2KSxuZXcgQmlnSW50ZWdlcih0LnEsMTYpLG5ldyBCaWdJbnRlZ2VyKHQuZywxNiksbmV3IEJpZ0ludGVnZXIodiwxNikpO3JldHVybiByfWVsc2V7dGhyb3cidW5zdXBwb3J0ZWQgcHVibGljIGtleSBhbGdvcml0aG0ifX19fSxwYXJzZVB1YmxpY1Jhd1JTQUtleUhleDpmdW5jdGlvbihyKXt2YXIgcD17fTtpZihyLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMSkifXZhciBxPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHIsMCk7aWYocS5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAyKSJ9aWYoci5zdWJzdHIocVswXSwyKSE9IjAyIil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDMpIn1wLm49QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocixxWzBdKTtpZihyLnN1YnN0cihxWzFdLDIpIT0iMDIiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwNCkifXAuZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihyLHFbMV0pO3JldHVybiBwfSxwYXJzZVByaXZhdGVSYXdSU0FLZXlIZXhBdE9iajpmdW5jdGlvbihxLHMpe3ZhciByPXMua2V5aWR4O2lmKHEuc3Vic3RyKHIsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBSU0EgcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihxLHIpO2lmKHAubGVuZ3RoIT05KXt0aHJvdyJtYWxmb3JtZWQgUlNBIHByaXZhdGUga2V5KGNvZGU6MDAyKSJ9cy5rZXk9e307cy5rZXkubj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbMV0pO3Mua2V5LmU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzJdKTtzLmtleS5kPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFszXSk7cy5rZXkucD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbNF0pO3Mua2V5LnE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzVdKTtzLmtleS5kcD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbNl0pO3Mua2V5LmRxPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFs3XSk7cy5rZXkuY289QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzhdKX0scGFyc2VQcml2YXRlUmF3RUNLZXlIZXhBdE9iajpmdW5jdGlvbihwLHQpe3ZhciBxPXQua2V5aWR4O3ZhciByPUFTTjFIRVguZ2V0VmJ5TGlzdChwLHEsWzFdLCIwNCIpO3ZhciBzPUFTTjFIRVguZ2V0VmJ5TGlzdChwLHEsWzIsMF0sIjAzIikuc3Vic3RyKDIpO3Qua2V5PXI7dC5wdWJrZXk9c30scGFyc2VQdWJsaWNQS0NTOEhleDpmdW5jdGlvbihzKXt2YXIgcT17fTtxLmFsZ3BhcmFtPW51bGw7dmFyIHI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocywwKTtpZihyLmxlbmd0aCE9Mil7dGhyb3cib3V0ZXIgREVSU2VxdWVuY2Ugc2hhbGwgaGF2ZSAyIGVsZW1lbnRzOiAiK3IubGVuZ3RofXZhciB0PXJbMF07aWYocy5zdWJzdHIodCwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDEpIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLHQpO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMikifWlmKHMuc3Vic3RyKHBbMF0sMikhPSIwNiIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAzKSJ9cS5hbGdvaWQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxwWzBdKTtpZihzLnN1YnN0cihwWzFdLDIpPT0iMDYiKXtxLmFsZ3BhcmFtPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHMscFsxXSl9ZWxzZXtpZihzLnN1YnN0cihwWzFdLDIpPT0iMzAiKXtxLmFsZ3BhcmFtPXt9O3EuYWxncGFyYW0ucD1BU04xSEVYLmdldFZieUxpc3QocyxwWzFdLFswXSwiMDIiKTtxLmFsZ3BhcmFtLnE9QVNOMUhFWC5nZXRWYnlMaXN0KHMscFsxXSxbMV0sIjAyIik7cS5hbGdwYXJhbS5nPUFTTjFIRVguZ2V0VmJ5TGlzdChzLHBbMV0sWzJdLCIwMiIpfX1pZihzLnN1YnN0cihyWzFdLDIpIT0iMDMiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwNCkifXEua2V5PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHMsclsxXSkuc3Vic3RyKDIpO3JldHVybiBxfSxnZXRSU0FLZXlGcm9tUHVibGljUEtDUzhIZXg6ZnVuY3Rpb24odCl7dmFyIHM9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodCwwKTtpZihzLmxlbmd0aCE9Mil7dGhyb3cib3V0ZXIgREVSU2VxdWVuY2Ugc2hhbGwgaGF2ZSAyIGVsZW1lbnRzOiAiK3MubGVuZ3RofXZhciByPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmoodCxzWzBdKTtpZihyIT0iMzAwZDA2MDkyYTg2NDg4NmY3MGQwMTAxMDEwNTAwIil7dGhyb3ciUEtDUzggQWxnb3JpdGhtSWQgaXMgbm90IHJzYUVuY3J5cHRpb24ifWlmKHQuc3Vic3RyKHNbMV0sMikhPSIwMyIpe3Rocm93IlBLQ1M4IFB1YmxpYyBLZXkgaXMgbm90IEJJVFNUUklORyBlbmNhcHNsYXRlZC4ifXZhciB2PUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmoodCxzWzFdKSsyO2lmKHQuc3Vic3RyKHYsMikhPSIzMCIpe3Rocm93IlBLQ1M4IFB1YmxpYyBLZXkgaXMgbm90IFNFUVVFTkNFLiJ9dmFyIHA9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodCx2KTtpZihwLmxlbmd0aCE9Mil7dGhyb3ciaW5uZXIgREVSU2VxdWVuY2Ugc2hhbGwgaGF2ZSAyIGVsZW1lbnRzOiAiK3AubGVuZ3RofWlmKHQuc3Vic3RyKHBbMF0sMikhPSIwMiIpe3Rocm93Ik4gaXMgbm90IEFTTi4xIElOVEVHRVIifWlmKHQuc3Vic3RyKHBbMV0sMikhPSIwMiIpe3Rocm93IkUgaXMgbm90IEFTTi4xIElOVEVHRVIifXZhciB3PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHQscFswXSk7dmFyIHU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodCxwWzFdKTt2YXIgcT1uZXcgUlNBS2V5KCk7cS5zZXRQdWJsaWModyx1KTtyZXR1cm4gcX0sfX0oKTtLRVlVVElMLmdldEtleT1mdW5jdGlvbihmLGUsaCl7aWYodHlwZW9mIFJTQUtleSE9InVuZGVmaW5lZCImJmYgaW5zdGFuY2VvZiBSU0FLZXkpe3JldHVybiBmfWlmKHR5cGVvZiBLSlVSLmNyeXB0by5FQ0RTQSE9InVuZGVmaW5lZCImJmYgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5FQ0RTQSl7cmV0dXJuIGZ9aWYodHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmYgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0Epe3JldHVybiBmfWlmKGYuY3VydmUhPT11bmRlZmluZWQmJmYueHkhPT11bmRlZmluZWQmJmYuZD09PXVuZGVmaW5lZCl7cmV0dXJuIG5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7cHViOmYueHksY3VydmU6Zi5jdXJ2ZX0pfWlmKGYuY3VydmUhPT11bmRlZmluZWQmJmYuZCE9PXVuZGVmaW5lZCl7cmV0dXJuIG5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7cHJ2OmYuZCxjdXJ2ZTpmLmN1cnZlfSl9aWYoZi5rdHk9PT11bmRlZmluZWQmJmYubiE9PXVuZGVmaW5lZCYmZi5lIT09dW5kZWZpbmVkJiZmLmQ9PT11bmRlZmluZWQpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnNldFB1YmxpYyhmLm4sZi5lKTtyZXR1cm4gd31pZihmLmt0eT09PXVuZGVmaW5lZCYmZi5uIT09dW5kZWZpbmVkJiZmLmUhPT11bmRlZmluZWQmJmYuZCE9PXVuZGVmaW5lZCYmZi5wIT09dW5kZWZpbmVkJiZmLnEhPT11bmRlZmluZWQmJmYuZHAhPT11bmRlZmluZWQmJmYuZHEhPT11bmRlZmluZWQmJmYuY28hPT11bmRlZmluZWQmJmYucWk9PT11bmRlZmluZWQpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnNldFByaXZhdGVFeChmLm4sZi5lLGYuZCxmLnAsZi5xLGYuZHAsZi5kcSxmLmNvKTtyZXR1cm4gd31pZihmLmt0eT09PXVuZGVmaW5lZCYmZi5uIT09dW5kZWZpbmVkJiZmLmUhPT11bmRlZmluZWQmJmYuZCE9PXVuZGVmaW5lZCYmZi5wPT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgUlNBS2V5KCk7dy5zZXRQcml2YXRlKGYubixmLmUsZi5kKTtyZXR1cm4gd31pZihmLnAhPT11bmRlZmluZWQmJmYucSE9PXVuZGVmaW5lZCYmZi5nIT09dW5kZWZpbmVkJiZmLnkhPT11bmRlZmluZWQmJmYueD09PXVuZGVmaW5lZCl7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3cuc2V0UHVibGljKGYucCxmLnEsZi5nLGYueSk7cmV0dXJuIHd9aWYoZi5wIT09dW5kZWZpbmVkJiZmLnEhPT11bmRlZmluZWQmJmYuZyE9PXVuZGVmaW5lZCYmZi55IT09dW5kZWZpbmVkJiZmLnghPT11bmRlZmluZWQpe3ZhciB3PW5ldyBLSlVSLmNyeXB0by5EU0EoKTt3LnNldFByaXZhdGUoZi5wLGYucSxmLmcsZi55LGYueCk7cmV0dXJuIHd9aWYoZi5rdHk9PT0iUlNBIiYmZi5uIT09dW5kZWZpbmVkJiZmLmUhPT11bmRlZmluZWQmJmYuZD09PXVuZGVmaW5lZCl7dmFyIHc9bmV3IFJTQUtleSgpO3cuc2V0UHVibGljKGI2NHV0b2hleChmLm4pLGI2NHV0b2hleChmLmUpKTtyZXR1cm4gd31pZihmLmt0eT09PSJSU0EiJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkJiZmLnAhPT11bmRlZmluZWQmJmYucSE9PXVuZGVmaW5lZCYmZi5kcCE9PXVuZGVmaW5lZCYmZi5kcSE9PXVuZGVmaW5lZCYmZi5xaSE9PXVuZGVmaW5lZCl7dmFyIHc9bmV3IFJTQUtleSgpO3cuc2V0UHJpdmF0ZUV4KGI2NHV0b2hleChmLm4pLGI2NHV0b2hleChmLmUpLGI2NHV0b2hleChmLmQpLGI2NHV0b2hleChmLnApLGI2NHV0b2hleChmLnEpLGI2NHV0b2hleChmLmRwKSxiNjR1dG9oZXgoZi5kcSksYjY0dXRvaGV4KGYucWkpKTtyZXR1cm4gd31pZihmLmt0eT09PSJSU0EiJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgUlNBS2V5KCk7dy5zZXRQcml2YXRlKGI2NHV0b2hleChmLm4pLGI2NHV0b2hleChmLmUpLGI2NHV0b2hleChmLmQpKTtyZXR1cm4gd31pZihmLmt0eT09PSJFQyImJmYuY3J2IT09dW5kZWZpbmVkJiZmLnghPT11bmRlZmluZWQmJmYueSE9PXVuZGVmaW5lZCYmZi5kPT09dW5kZWZpbmVkKXt2YXIgZD1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOmYuY3J2fSk7dmFyIGw9ZC5lY3BhcmFtcy5rZXlsZW4vNDt2YXIgcj0oIjAwMDAwMDAwMDAiK2I2NHV0b2hleChmLngpKS5zbGljZSgtbCk7dmFyIG49KCIwMDAwMDAwMDAwIitiNjR1dG9oZXgoZi55KSkuc2xpY2UoLWwpO3ZhciBtPSIwNCIrcituO2Quc2V0UHVibGljS2V5SGV4KG0pO3JldHVybiBkfWlmKGYua3R5PT09IkVDIiYmZi5jcnYhPT11bmRlZmluZWQmJmYueCE9PXVuZGVmaW5lZCYmZi55IT09dW5kZWZpbmVkJiZmLmQhPT11bmRlZmluZWQpe3ZhciBkPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6Zi5jcnZ9KTt2YXIgbD1kLmVjcGFyYW1zLmtleWxlbi80O3ZhciBhPSgiMDAwMDAwMDAwMCIrYjY0dXRvaGV4KGYuZCkpLnNsaWNlKC1sKTtkLnNldFByaXZhdGVLZXlIZXgoYSk7cmV0dXJuIGR9aWYoZi5pbmRleE9mKCItRU5EIENFUlRJRklDQVRFLSIsMCkhPS0xfHxmLmluZGV4T2YoIi1FTkQgWDUwOSBDRVJUSUZJQ0FURS0iLDApIT0tMXx8Zi5pbmRleE9mKCItRU5EIFRSVVNURUQgQ0VSVElGSUNBVEUtIiwwKSE9LTEpe3JldHVybiBYNTA5LmdldFB1YmxpY0tleUZyb21DZXJ0UEVNKGYpfWlmKGg9PT0icGtjczhwdWIiKXtyZXR1cm4gS0VZVVRJTC5nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgoZil9aWYoZi5pbmRleE9mKCItRU5EIFBVQkxJQyBLRVktIikhPS0xKXtyZXR1cm4gS0VZVVRJTC5nZXRLZXlGcm9tUHVibGljUEtDUzhQRU0oZil9aWYoaD09PSJwa2NzNXBydiIpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcoZik7cmV0dXJuIHd9aWYoaD09PSJwa2NzNXBydiIpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcoZik7cmV0dXJuIHd9aWYoZi5pbmRleE9mKCItRU5EIFJTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKT09LTEpe3ZhciBpPUtFWVVUSUwuZ2V0SGV4RnJvbVBFTShmLCJSU0EgUFJJVkFURSBLRVkiKTtyZXR1cm4gS0VZVVRJTC5nZXRLZXkoaSxudWxsLCJwa2NzNXBydiIpfWlmKGYuaW5kZXhPZigiLUVORCBEU0EgUFJJVkFURSBLRVktIikhPS0xJiZmLmluZGV4T2YoIjQsRU5DUllQVEVEIik9PS0xKXt2YXIgdT10aGlzLmdldEhleEZyb21QRU0oZiwiRFNBIFBSSVZBVEUgS0VZIik7dmFyIHQ9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjAyIik7dmFyIHM9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMl0sIjAyIik7dmFyIHY9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbM10sIjAyIik7dmFyIGo9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbNF0sIjAyIik7dmFyIGs9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbNV0sIjAyIik7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3cuc2V0UHJpdmF0ZShuZXcgQmlnSW50ZWdlcih0LDE2KSxuZXcgQmlnSW50ZWdlcihzLDE2KSxuZXcgQmlnSW50ZWdlcih2LDE2KSxuZXcgQmlnSW50ZWdlcihqLDE2KSxuZXcgQmlnSW50ZWdlcihrLDE2KSk7cmV0dXJuIHd9aWYoZi5pbmRleE9mKCItRU5EIFBSSVZBVEUgS0VZLSIpIT0tMSl7cmV0dXJuIEtFWVVUSUwuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4UEVNKGYpfWlmKGYuaW5kZXhPZigiLUVORCBSU0EgUFJJVkFURSBLRVktIikhPS0xJiZmLmluZGV4T2YoIjQsRU5DUllQVEVEIikhPS0xKXtyZXR1cm4gS0VZVVRJTC5nZXRSU0FLZXlGcm9tRW5jcnlwdGVkUEtDUzVQRU0oZixlKX1pZihmLmluZGV4T2YoIi1FTkQgRUMgUFJJVkFURSBLRVktIikhPS0xJiZmLmluZGV4T2YoIjQsRU5DUllQVEVEIikhPS0xKXt2YXIgdT1LRVlVVElMLmdldERlY3J5cHRlZEtleUhleChmLGUpO3ZhciB3PUFTTjFIRVguZ2V0VmJ5TGlzdCh1LDAsWzFdLCIwNCIpO3ZhciBjPUFTTjFIRVguZ2V0VmJ5TGlzdCh1LDAsWzIsMF0sIjA2Iik7dmFyIG89QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMywwXSwiMDMiKS5zdWJzdHIoMik7dmFyIGI9IiI7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW2NdIT09dW5kZWZpbmVkKXtiPUtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtjXX1lbHNle3Rocm93InVuZGVmaW5lZCBPSUQoaGV4KSBpbiBLSlVSLmNyeXB0by5PSUQ6ICIrY312YXIgZD1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe25hbWU6Yn0pO2Quc2V0UHVibGljS2V5SGV4KG8pO2Quc2V0UHJpdmF0ZUtleUhleCh3KTtkLmlzUHVibGljPWZhbHNlO3JldHVybiBkfWlmKGYuaW5kZXhPZigiLUVORCBEU0EgUFJJVkFURSBLRVktIikhPS0xJiZmLmluZGV4T2YoIjQsRU5DUllQVEVEIikhPS0xKXt2YXIgdT1LRVlVVElMLmdldERlY3J5cHRlZEtleUhleChmLGUpO3ZhciB0PUFTTjFIRVguZ2V0VmJ5TGlzdCh1LDAsWzFdLCIwMiIpO3ZhciBzPUFTTjFIRVguZ2V0VmJ5TGlzdCh1LDAsWzJdLCIwMiIpO3ZhciB2PUFTTjFIRVguZ2V0VmJ5TGlzdCh1LDAsWzNdLCIwMiIpO3ZhciBqPUFTTjFIRVguZ2V0VmJ5TGlzdCh1LDAsWzRdLCIwMiIpO3ZhciBrPUFTTjFIRVguZ2V0VmJ5TGlzdCh1LDAsWzVdLCIwMiIpO3ZhciB3PW5ldyBLSlVSLmNyeXB0by5EU0EoKTt3LnNldFByaXZhdGUobmV3IEJpZ0ludGVnZXIodCwxNiksbmV3IEJpZ0ludGVnZXIocywxNiksbmV3IEJpZ0ludGVnZXIodiwxNiksbmV3IEJpZ0ludGVnZXIoaiwxNiksbmV3IEJpZ0ludGVnZXIoaywxNikpO3JldHVybiB3fWlmKGYuaW5kZXhPZigiLUVORCBFTkNSWVBURUQgUFJJVkFURSBLRVktIikhPS0xKXtyZXR1cm4gS0VZVVRJTC5nZXRLZXlGcm9tRW5jcnlwdGVkUEtDUzhQRU0oZixlKX10aHJvdyJub3Qgc3VwcG9ydGVkIGFyZ3VtZW50In07S0VZVVRJTC5nZW5lcmF0ZUtleXBhaXI9ZnVuY3Rpb24oYSxjKXtpZihhPT0iUlNBIil7dmFyIGI9Yzt2YXIgaD1uZXcgUlNBS2V5KCk7aC5nZW5lcmF0ZShiLCIxMDAwMSIpO2guaXNQcml2YXRlPXRydWU7aC5pc1B1YmxpYz10cnVlO3ZhciBmPW5ldyBSU0FLZXkoKTt2YXIgZT1oLm4udG9TdHJpbmcoMTYpO3ZhciBpPWguZS50b1N0cmluZygxNik7Zi5zZXRQdWJsaWMoZSxpKTtmLmlzUHJpdmF0ZT1mYWxzZTtmLmlzUHVibGljPXRydWU7dmFyIGs9e307ay5wcnZLZXlPYmo9aDtrLnB1YktleU9iaj1mO3JldHVybiBrfWVsc2V7aWYoYT09IkVDIil7dmFyIGQ9Yzt2YXIgZz1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOmR9KTt2YXIgaj1nLmdlbmVyYXRlS2V5UGFpckhleCgpO3ZhciBoPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6ZH0pO2guc2V0UHJpdmF0ZUtleUhleChqLmVjcHJ2aGV4KTtoLmlzUHJpdmF0ZT10cnVlO2guaXNQdWJsaWM9ZmFsc2U7dmFyIGY9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpkfSk7Zi5zZXRQdWJsaWNLZXlIZXgoai5lY3B1YmhleCk7Zi5pc1ByaXZhdGU9ZmFsc2U7Zi5pc1B1YmxpYz10cnVlO3ZhciBrPXt9O2sucHJ2S2V5T2JqPWg7ay5wdWJLZXlPYmo9ZjtyZXR1cm4ga31lbHNle3Rocm93InVua25vd24gYWxnb3JpdGhtOiAiK2F9fX07S0VZVVRJTC5nZXRQRU09ZnVuY3Rpb24oYSxyLG8sZyxqKXt2YXIgdj1LSlVSLmFzbjE7dmFyIHU9S0pVUi5jcnlwdG87ZnVuY3Rpb24gcChzKXt2YXIgdz1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjowfSx7ImludCI6e2JpZ2ludDpzLm59fSx7ImludCI6cy5lfSx7ImludCI6e2JpZ2ludDpzLmR9fSx7ImludCI6e2JpZ2ludDpzLnB9fSx7ImludCI6e2JpZ2ludDpzLnF9fSx7ImludCI6e2JpZ2ludDpzLmRtcDF9fSx7ImludCI6e2JpZ2ludDpzLmRtcTF9fSx7ImludCI6e2JpZ2ludDpzLmNvZWZmfX1dfSk7cmV0dXJuIHd9ZnVuY3Rpb24gcSh3KXt2YXIgcz1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjoxfSx7b2N0c3RyOntoZXg6dy5wcnZLZXlIZXh9fSx7dGFnOlsiYTAiLHRydWUse29pZDp7bmFtZTp3LmN1cnZlTmFtZX19XX0se3RhZzpbImExIix0cnVlLHtiaXRzdHI6e2hleDoiMDAiK3cucHViS2V5SGV4fX1dfV19KTtyZXR1cm4gc31mdW5jdGlvbiBuKHMpe3ZhciB3PUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjB9LHsiaW50Ijp7YmlnaW50OnMucH19LHsiaW50Ijp7YmlnaW50OnMucX19LHsiaW50Ijp7YmlnaW50OnMuZ319LHsiaW50Ijp7YmlnaW50OnMueX19LHsiaW50Ijp7YmlnaW50OnMueH19XX0pO3JldHVybiB3fWlmKCgodHlwZW9mIFJTQUtleSE9InVuZGVmaW5lZCImJmEgaW5zdGFuY2VvZiBSU0FLZXkpfHwodHlwZW9mIHUuRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIHUuRFNBKXx8KHR5cGVvZiB1LkVDRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIHUuRUNEU0EpKSYmYS5pc1B1YmxpYz09dHJ1ZSYmKHI9PT11bmRlZmluZWR8fHI9PSJQS0NTOFBVQiIpKXt2YXIgdD1uZXcgS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8oYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChtLCJQVUJMSUMgS0VZIil9aWYocj09IlBLQ1MxUFJWIiYmdHlwZW9mIFJTQUtleSE9InVuZGVmaW5lZCImJmEgaW5zdGFuY2VvZiBSU0FLZXkmJihvPT09dW5kZWZpbmVkfHxvPT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciB0PXAoYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChtLCJSU0EgUFJJVkFURSBLRVkiKX1pZihyPT0iUEtDUzFQUlYiJiZ0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBJiYobz09PXVuZGVmaW5lZHx8bz09bnVsbCkmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgZj1uZXcgS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIoe25hbWU6YS5jdXJ2ZU5hbWV9KTt2YXIgbD1mLmdldEVuY29kZWRIZXgoKTt2YXIgZT1xKGEpO3ZhciBrPWUuZ2V0RW5jb2RlZEhleCgpO3ZhciBpPSIiO2krPXYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChsLCJFQyBQQVJBTUVURVJTIik7aSs9di5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGssIkVDIFBSSVZBVEUgS0VZIik7cmV0dXJuIGl9aWYocj09IlBLQ1MxUFJWIiYmdHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmEgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0EmJihvPT09dW5kZWZpbmVkfHxvPT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciB0PW4oYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChtLCJEU0EgUFJJVkFURSBLRVkiKX1pZihyPT0iUEtDUzVQUlYiJiZ0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIFJTQUtleSYmKG8hPT11bmRlZmluZWQmJm8hPW51bGwpJiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIHQ9cChhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtpZihnPT09dW5kZWZpbmVkKXtnPSJERVMtRURFMy1DQkMifXJldHVybiB0aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleCgiUlNBIixtLG8sZyl9aWYocj09IlBLQ1M1UFJWIiYmdHlwZW9mIEtKVVIuY3J5cHRvLkVDRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBJiYobyE9PXVuZGVmaW5lZCYmbyE9bnVsbCkmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgdD1xKGEpO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKGc9PT11bmRlZmluZWQpe2c9IkRFUy1FREUzLUNCQyJ9cmV0dXJuIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KCJFQyIsbSxvLGcpfWlmKHI9PSJQS0NTNVBSViImJnR5cGVvZiBLSlVSLmNyeXB0by5EU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRFNBJiYobyE9PXVuZGVmaW5lZCYmbyE9bnVsbCkmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgdD1uKGEpO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKGc9PT11bmRlZmluZWQpe2c9IkRFUy1FREUzLUNCQyJ9cmV0dXJuIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KCJEU0EiLG0sbyxnKX12YXIgaD1mdW5jdGlvbih3LHMpe3ZhciB5PWIodyxzKTt2YXIgeD1uZXcgS0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7c2VxOlt7b2lkOntuYW1lOiJwa2NzNVBCRVMyIn19LHtzZXE6W3tzZXE6W3tvaWQ6e25hbWU6InBrY3M1UEJLREYyIn19LHtzZXE6W3tvY3RzdHI6e2hleDp5LnBia2RmMlNhbHR9fSx7ImludCI6eS5wYmtkZjJJdGVyfV19XX0se3NlcTpbe29pZDp7bmFtZToiZGVzLUVERTMtQ0JDIn19LHtvY3RzdHI6e2hleDp5LmVuY3J5cHRpb25TY2hlbWVJVn19XX1dfV19LHtvY3RzdHI6e2hleDp5LmNpcGhlcnRleHR9fV19KTtyZXR1cm4geC5nZXRFbmNvZGVkSGV4KCl9O3ZhciBiPWZ1bmN0aW9uKEQsRSl7dmFyIHg9MTAwO3ZhciBDPUNyeXB0b0pTLmxpYi5Xb3JkQXJyYXkucmFuZG9tKDgpO3ZhciBCPSJERVMtRURFMy1DQkMiO3ZhciBzPUNyeXB0b0pTLmxpYi5Xb3JkQXJyYXkucmFuZG9tKDgpO3ZhciB5PUNyeXB0b0pTLlBCS0RGMihFLEMse2tleVNpemU6MTkyLzMyLGl0ZXJhdGlvbnM6eH0pO3ZhciB6PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UoRCk7dmFyIEE9Q3J5cHRvSlMuVHJpcGxlREVTLmVuY3J5cHQoeix5LHtpdjpzfSkrIiI7dmFyIHc9e307dy5jaXBoZXJ0ZXh0PUE7dy5wYmtkZjJTYWx0PUNyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KEMpO3cucGJrZGYySXRlcj14O3cuZW5jcnlwdGlvblNjaGVtZUFsZz1CO3cuZW5jcnlwdGlvblNjaGVtZUlWPUNyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHMpO3JldHVybiB3fTtpZihyPT0iUEtDUzhQUlYiJiZ0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIFJTQUtleSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciBkPXAoYSk7dmFyIGM9ZC5nZXRFbmNvZGVkSGV4KCk7dmFyIHQ9S0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6MH0se3NlcTpbe29pZDp7bmFtZToicnNhRW5jcnlwdGlvbiJ9fSx7Im51bGwiOnRydWV9XX0se29jdHN0cjp7aGV4OmN9fV19KTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtpZihvPT09dW5kZWZpbmVkfHxvPT1udWxsKXtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlBSSVZBVEUgS0VZIil9ZWxzZXt2YXIgaz1oKG0sbyk7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChrLCJFTkNSWVBURUQgUFJJVkFURSBLRVkiKX19aWYocj09IlBLQ1M4UFJWIiYmdHlwZW9mIEtKVVIuY3J5cHRvLkVDRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBJiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIGQ9bmV3IEtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjF9LHtvY3RzdHI6e2hleDphLnBydktleUhleH19LHt0YWc6WyJhMSIsdHJ1ZSx7Yml0c3RyOntoZXg6IjAwIithLnB1YktleUhleH19XX1dfSk7dmFyIGM9ZC5nZXRFbmNvZGVkSGV4KCk7dmFyIHQ9S0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6MH0se3NlcTpbe29pZDp7bmFtZToiZWNQdWJsaWNLZXkifX0se29pZDp7bmFtZTphLmN1cnZlTmFtZX19XX0se29jdHN0cjp7aGV4OmN9fV19KTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtpZihvPT09dW5kZWZpbmVkfHxvPT1udWxsKXtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlBSSVZBVEUgS0VZIil9ZWxzZXt2YXIgaz1oKG0sbyk7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChrLCJFTkNSWVBURUQgUFJJVkFURSBLRVkiKX19aWYocj09IlBLQ1M4UFJWIiYmdHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmEgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0EmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgZD1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDphLnh9KTt2YXIgYz1kLmdldEVuY29kZWRIZXgoKTt2YXIgdD1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjowfSx7c2VxOlt7b2lkOntuYW1lOiJkc2EifX0se3NlcTpbeyJpbnQiOntiaWdpbnQ6YS5wfX0seyJpbnQiOntiaWdpbnQ6YS5xfX0seyJpbnQiOntiaWdpbnQ6YS5nfX1dfV19LHtvY3RzdHI6e2hleDpjfX1dfSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7aWYobz09PXVuZGVmaW5lZHx8bz09bnVsbCl7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChtLCJQUklWQVRFIEtFWSIpfWVsc2V7dmFyIGs9aChtLG8pO3JldHVybiB2LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgoaywiRU5DUllQVEVEIFBSSVZBVEUgS0VZIil9fXRocm93InVuc3VwcG9ydGVkIG9iamVjdCBub3IgZm9ybWF0In07S0VZVVRJTC5nZXRLZXlGcm9tQ1NSUEVNPWZ1bmN0aW9uKGIpe3ZhciBhPUtFWVVUSUwuZ2V0SGV4RnJvbVBFTShiLCJDRVJUSUZJQ0FURSBSRVFVRVNUIik7dmFyIGM9S0VZVVRJTC5nZXRLZXlGcm9tQ1NSSGV4KGEpO3JldHVybiBjfTtLRVlVVElMLmdldEtleUZyb21DU1JIZXg9ZnVuY3Rpb24oYSl7dmFyIGM9S0VZVVRJTC5wYXJzZUNTUkhleChhKTt2YXIgYj1LRVlVVElMLmdldEtleShjLnA4cHVia2V5aGV4LG51bGwsInBrY3M4cHViIik7cmV0dXJuIGJ9O0tFWVVUSUwucGFyc2VDU1JIZXg9ZnVuY3Rpb24oYyl7dmFyIGI9e307dmFyIGU9YztpZihlLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAxKSJ9dmFyIGQ9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSwwKTtpZihkLmxlbmd0aDwxKXt0aHJvdyJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAyKSJ9aWYoZS5zdWJzdHIoZFswXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIENTUihjb2RlOjAwMykifXZhciBhPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGUsZFswXSk7aWYoYS5sZW5ndGg8Myl7dGhyb3cibWFsZm9ybWVkIENTUihjb2RlOjAwNCkifWIucDhwdWJrZXloZXg9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihlLGFbMl0pO3JldHVybiBifTsKLyohIHJzYXBlbS0xLjEuanMgKGMpIDIwMTIgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmZ1bmN0aW9uIF9yc2FwZW1fcGVtVG9CYXNlNjQoYil7dmFyIGE9YjthPWEucmVwbGFjZSgiLS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLSIsIiIpO2E9YS5yZXBsYWNlKCItLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLSIsIiIpO2E9YS5yZXBsYWNlKC9bIFxuXSsvZywiIik7cmV0dXJuIGF9ZnVuY3Rpb24gX3JzYXBlbV9nZXRQb3NBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGQpe3ZhciBqPW5ldyBBcnJheSgpO3ZhciBrPUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmooZCwwKTt2YXIgZj1BU04xSEVYLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZCxrKTt2YXIgaD1BU04xSEVYLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZCxmKTt2YXIgYj1BU04xSEVYLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZCxoKTt2YXIgbD1BU04xSEVYLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZCxiKTt2YXIgZT1BU04xSEVYLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZCxsKTt2YXIgZz1BU04xSEVYLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZCxlKTt2YXIgYz1BU04xSEVYLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZCxnKTt2YXIgaT1BU04xSEVYLmdldFBvc09mTmV4dFNpYmxpbmdfQXRPYmooZCxjKTtqLnB1c2goayxmLGgsYixsLGUsZyxjLGkpO3JldHVybiBqfWZ1bmN0aW9uIF9yc2FwZW1fZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGkpe3ZhciBvPV9yc2FwZW1fZ2V0UG9zQXJyYXlPZkNoaWxkcmVuRnJvbUhleChpKTt2YXIgcj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bMF0pO3ZhciBmPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1sxXSk7dmFyIGo9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzJdKTt2YXIgaz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bM10pO3ZhciBjPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1s0XSk7dmFyIGI9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzVdKTt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bNl0pO3ZhciBnPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1s3XSk7dmFyIGw9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzhdKTt2YXIgbT1uZXcgQXJyYXkoKTttLnB1c2gocixmLGosayxjLGIsaCxnLGwpO3JldHVybiBtfWZ1bmN0aW9uIF9yc2FwZW1fcmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhjKXt2YXIgYj1fcnNhcGVtX2dldEhleFZhbHVlQXJyYXlPZkNoaWxkcmVuRnJvbUhleChjKTt0aGlzLnNldFByaXZhdGVFeChiWzFdLGJbMl0sYlszXSxiWzRdLGJbNV0sYls2XSxiWzddLGJbOF0pfWZ1bmN0aW9uIF9yc2FwZW1fcmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nKGUpe3ZhciBjPV9yc2FwZW1fcGVtVG9CYXNlNjQoZSk7dmFyIGQ9YjY0dG9oZXgoYyk7dmFyIGI9X3JzYXBlbV9nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgoZCk7dGhpcy5zZXRQcml2YXRlRXgoYlsxXSxiWzJdLGJbM10sYls0XSxiWzVdLGJbNl0sYls3XSxiWzhdKX1SU0FLZXkucHJvdG90eXBlLnJlYWRQcml2YXRlS2V5RnJvbVBFTVN0cmluZz1fcnNhcGVtX3JlYWRQcml2YXRlS2V5RnJvbVBFTVN0cmluZztSU0FLZXkucHJvdG90eXBlLnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmc9X3JzYXBlbV9yZWFkUHJpdmF0ZUtleUZyb21BU04xSGV4U3RyaW5nOwovKiEgcnNhc2lnbi0xLjIuNy5qcyAoYykgMjAxMiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KdmFyIF9SRV9IRVhERUNPTkxZPW5ldyBSZWdFeHAoIiIpO19SRV9IRVhERUNPTkxZLmNvbXBpbGUoIlteMC05YS1mXSIsImdpIik7ZnVuY3Rpb24gX3JzYXNpZ25fZ2V0SGV4UGFkZGVkRGlnZXN0SW5mb0ZvclN0cmluZyhkLGUsYSl7dmFyIGI9ZnVuY3Rpb24oZil7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyhmLGEpfTt2YXIgYz1iKGQpO3JldHVybiBLSlVSLmNyeXB0by5VdGlsLmdldFBhZGRlZERpZ2VzdEluZm9IZXgoYyxhLGUpfWZ1bmN0aW9uIF96ZXJvUGFkZGluZ09mU2lnbmF0dXJlKGUsZCl7dmFyIGM9IiI7dmFyIGE9ZC80LWUubGVuZ3RoO2Zvcih2YXIgYj0wO2I8YTtiKyspe2M9YysiMCJ9cmV0dXJuIGMrZX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduU3RyaW5nKGQsYSl7dmFyIGI9ZnVuY3Rpb24oZSl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyhlLGEpfTt2YXIgYz1iKGQpO3JldHVybiB0aGlzLnNpZ25XaXRoTWVzc2FnZUhhc2goYyxhKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduV2l0aE1lc3NhZ2VIYXNoKGUsYyl7dmFyIGY9S0pVUi5jcnlwdG8uVXRpbC5nZXRQYWRkZWREaWdlc3RJbmZvSGV4KGUsYyx0aGlzLm4uYml0TGVuZ3RoKCkpO3ZhciBiPXBhcnNlQmlnSW50KGYsMTYpO3ZhciBkPXRoaXMuZG9Qcml2YXRlKGIpO3ZhciBhPWQudG9TdHJpbmcoMTYpO3JldHVybiBfemVyb1BhZGRpbmdPZlNpZ25hdHVyZShhLHRoaXMubi5iaXRMZW5ndGgoKSl9ZnVuY3Rpb24gX3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEExKGEpe3JldHVybiBfcnNhc2lnbl9zaWduU3RyaW5nLmNhbGwodGhpcyxhLCJzaGExIil9ZnVuY3Rpb24gX3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEEyNTYoYSl7cmV0dXJuIF9yc2FzaWduX3NpZ25TdHJpbmcuY2FsbCh0aGlzLGEsInNoYTI1NiIpfWZ1bmN0aW9uIHBzc19tZ2YxX3N0cihjLGEsZSl7dmFyIGI9IiIsZD0wO3doaWxlKGIubGVuZ3RoPGEpe2IrPWhleHRvcnN0cihlKHJzdHJ0b2hleChjK1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLFsoZCY0Mjc4MTkwMDgwKT4+MjQsKGQmMTY3MTE2ODApPj4xNiwoZCY2NTI4MCk+PjgsZCYyNTVdKSkpKTtkKz0xfXJldHVybiBifWZ1bmN0aW9uIF9yc2FzaWduX3NpZ25TdHJpbmdQU1MoZSxhLGQpe3ZhciBjPWZ1bmN0aW9uKGYpe3JldHVybiBLSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoZixhKX07dmFyIGI9Yyhyc3RydG9oZXgoZSkpO2lmKGQ9PT11bmRlZmluZWQpe2Q9LTF9cmV0dXJuIHRoaXMuc2lnbldpdGhNZXNzYWdlSGFzaFBTUyhiLGEsZCl9ZnVuY3Rpb24gX3JzYXNpZ25fc2lnbldpdGhNZXNzYWdlSGFzaFBTUyhsLGEsayl7dmFyIGI9aGV4dG9yc3RyKGwpO3ZhciBnPWIubGVuZ3RoO3ZhciBtPXRoaXMubi5iaXRMZW5ndGgoKS0xO3ZhciBjPU1hdGguY2VpbChtLzgpO3ZhciBkO3ZhciBvPWZ1bmN0aW9uKGkpe3JldHVybiBLSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoaSxhKX07aWYoaz09PS0xfHxrPT09dW5kZWZpbmVkKXtrPWd9ZWxzZXtpZihrPT09LTIpe2s9Yy1nLTJ9ZWxzZXtpZihrPC0yKXt0aHJvdyJpbnZhbGlkIHNhbHQgbGVuZ3RoIn19fWlmKGM8KGcraysyKSl7dGhyb3ciZGF0YSB0b28gbG9uZyJ9dmFyIGY9IiI7aWYoaz4wKXtmPW5ldyBBcnJheShrKTtuZXcgU2VjdXJlUmFuZG9tKCkubmV4dEJ5dGVzKGYpO2Y9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZil9dmFyIG49aGV4dG9yc3RyKG8ocnN0cnRvaGV4KCJceDAwXHgwMFx4MDBceDAwXHgwMFx4MDBceDAwXHgwMCIrYitmKSkpO3ZhciBqPVtdO2ZvcihkPTA7ZDxjLWstZy0yO2QrPTEpe2pbZF09MH12YXIgZT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxqKSsiXHgwMSIrZjt2YXIgaD1wc3NfbWdmMV9zdHIobixlLmxlbmd0aCxvKTt2YXIgcT1bXTtmb3IoZD0wO2Q8ZS5sZW5ndGg7ZCs9MSl7cVtkXT1lLmNoYXJDb2RlQXQoZCleaC5jaGFyQ29kZUF0KGQpfXZhciBwPSg2NTI4MD4+KDgqYy1tKSkmMjU1O3FbMF0mPX5wO2ZvcihkPTA7ZDxnO2QrKyl7cS5wdXNoKG4uY2hhckNvZGVBdChkKSl9cS5wdXNoKDE4OCk7cmV0dXJuIF96ZXJvUGFkZGluZ09mU2lnbmF0dXJlKHRoaXMuZG9Qcml2YXRlKG5ldyBCaWdJbnRlZ2VyKHEpKS50b1N0cmluZygxNiksdGhpcy5uLmJpdExlbmd0aCgpKX1mdW5jdGlvbiBfcnNhc2lnbl9nZXREZWNyeXB0U2lnbmF0dXJlQkkoYSxkLGMpe3ZhciBiPW5ldyBSU0FLZXkoKTtiLnNldFB1YmxpYyhkLGMpO3ZhciBlPWIuZG9QdWJsaWMoYSk7cmV0dXJuIGV9ZnVuY3Rpb24gX3JzYXNpZ25fZ2V0SGV4RGlnZXN0SW5mb0Zyb21TaWcoYSxjLGIpe3ZhciBlPV9yc2FzaWduX2dldERlY3J5cHRTaWduYXR1cmVCSShhLGMsYik7dmFyIGQ9ZS50b1N0cmluZygxNikucmVwbGFjZSgvXjFmKzAwLywiIik7cmV0dXJuIGR9ZnVuY3Rpb24gX3JzYXNpZ25fZ2V0QWxnTmFtZUFuZEhhc2hGcm9tSGV4RGlzZ2VzdEluZm8oZil7Zm9yKHZhciBlIGluIEtKVVIuY3J5cHRvLlV0aWwuRElHRVNUSU5GT0hFQUQpe3ZhciBkPUtKVVIuY3J5cHRvLlV0aWwuRElHRVNUSU5GT0hFQURbZV07dmFyIGI9ZC5sZW5ndGg7aWYoZi5zdWJzdHJpbmcoMCxiKT09ZCl7dmFyIGM9W2UsZi5zdWJzdHJpbmcoYildO3JldHVybiBjfX1yZXR1cm5bXX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlTaWduYXR1cmVXaXRoQXJncyhmLGIsZyxqKXt2YXIgZT1fcnNhc2lnbl9nZXRIZXhEaWdlc3RJbmZvRnJvbVNpZyhiLGcsaik7dmFyIGg9X3JzYXNpZ25fZ2V0QWxnTmFtZUFuZEhhc2hGcm9tSGV4RGlzZ2VzdEluZm8oZSk7aWYoaC5sZW5ndGg9PTApe3JldHVybiBmYWxzZX12YXIgZD1oWzBdO3ZhciBpPWhbMV07dmFyIGE9ZnVuY3Rpb24oayl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyhrLGQpfTt2YXIgYz1hKGYpO3JldHVybihpPT1jKX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlIZXhTaWduYXR1cmVGb3JNZXNzYWdlKGMsYil7dmFyIGQ9cGFyc2VCaWdJbnQoYywxNik7dmFyIGE9X3JzYXNpZ25fdmVyaWZ5U2lnbmF0dXJlV2l0aEFyZ3MoYixkLHRoaXMubi50b1N0cmluZygxNiksdGhpcy5lLnRvU3RyaW5nKDE2KSk7cmV0dXJuIGF9ZnVuY3Rpb24gX3JzYXNpZ25fdmVyaWZ5U3RyaW5nKGYsail7aj1qLnJlcGxhY2UoX1JFX0hFWERFQ09OTFksIiIpO2o9ai5yZXBsYWNlKC9bIFxuXSsvZywiIik7dmFyIGI9cGFyc2VCaWdJbnQoaiwxNik7aWYoYi5iaXRMZW5ndGgoKT50aGlzLm4uYml0TGVuZ3RoKCkpe3JldHVybiAwfXZhciBpPXRoaXMuZG9QdWJsaWMoYik7dmFyIGU9aS50b1N0cmluZygxNikucmVwbGFjZSgvXjFmKzAwLywiIik7dmFyIGc9X3JzYXNpZ25fZ2V0QWxnTmFtZUFuZEhhc2hGcm9tSGV4RGlzZ2VzdEluZm8oZSk7aWYoZy5sZW5ndGg9PTApe3JldHVybiBmYWxzZX12YXIgZD1nWzBdO3ZhciBoPWdbMV07dmFyIGE9ZnVuY3Rpb24oayl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyhrLGQpfTt2YXIgYz1hKGYpO3JldHVybihoPT1jKX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlXaXRoTWVzc2FnZUhhc2goZSxhKXthPWEucmVwbGFjZShfUkVfSEVYREVDT05MWSwiIik7YT1hLnJlcGxhY2UoL1sgXG5dKy9nLCIiKTt2YXIgYj1wYXJzZUJpZ0ludChhLDE2KTtpZihiLmJpdExlbmd0aCgpPnRoaXMubi5iaXRMZW5ndGgoKSl7cmV0dXJuIDB9dmFyIGg9dGhpcy5kb1B1YmxpYyhiKTt2YXIgZz1oLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLCIiKTt2YXIgYz1fcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhnKTtpZihjLmxlbmd0aD09MCl7cmV0dXJuIGZhbHNlfXZhciBkPWNbMF07dmFyIGY9Y1sxXTtyZXR1cm4oZj09ZSl9ZnVuY3Rpb24gX3JzYXNpZ25fdmVyaWZ5U3RyaW5nUFNTKGMsYixhLGYpe3ZhciBlPWZ1bmN0aW9uKGcpe3JldHVybiBLSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoZyxhKX07dmFyIGQ9ZShyc3RydG9oZXgoYykpO2lmKGY9PT11bmRlZmluZWQpe2Y9LTF9cmV0dXJuIHRoaXMudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTKGQsYixhLGYpfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeVdpdGhNZXNzYWdlSGFzaFBTUyhmLHMsbCxjKXt2YXIgaz1uZXcgQmlnSW50ZWdlcihzLDE2KTtpZihrLmJpdExlbmd0aCgpPnRoaXMubi5iaXRMZW5ndGgoKSl7cmV0dXJuIGZhbHNlfXZhciByPWZ1bmN0aW9uKGkpe3JldHVybiBLSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoaSxsKX07dmFyIGo9aGV4dG9yc3RyKGYpO3ZhciBoPWoubGVuZ3RoO3ZhciBnPXRoaXMubi5iaXRMZW5ndGgoKS0xO3ZhciBtPU1hdGguY2VpbChnLzgpO3ZhciBxO2lmKGM9PT0tMXx8Yz09PXVuZGVmaW5lZCl7Yz1ofWVsc2V7aWYoYz09PS0yKXtjPW0taC0yfWVsc2V7aWYoYzwtMil7dGhyb3ciaW52YWxpZCBzYWx0IGxlbmd0aCJ9fX1pZihtPChoK2MrMikpe3Rocm93ImRhdGEgdG9vIGxvbmcifXZhciBhPXRoaXMuZG9QdWJsaWMoaykudG9CeXRlQXJyYXkoKTtmb3IocT0wO3E8YS5sZW5ndGg7cSs9MSl7YVtxXSY9MjU1fXdoaWxlKGEubGVuZ3RoPG0pe2EudW5zaGlmdCgwKX1pZihhW20tMV0hPT0xODgpe3Rocm93ImVuY29kZWQgbWVzc2FnZSBkb2VzIG5vdCBlbmQgaW4gMHhiYyJ9YT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxhKTt2YXIgZD1hLnN1YnN0cigwLG0taC0xKTt2YXIgZT1hLnN1YnN0cihkLmxlbmd0aCxoKTt2YXIgcD0oNjUyODA+Pig4Km0tZykpJjI1NTtpZigoZC5jaGFyQ29kZUF0KDApJnApIT09MCl7dGhyb3ciYml0cyBiZXlvbmQga2V5c2l6ZSBub3QgemVybyJ9dmFyIG49cHNzX21nZjFfc3RyKGUsZC5sZW5ndGgscik7dmFyIG89W107Zm9yKHE9MDtxPGQubGVuZ3RoO3ErPTEpe29bcV09ZC5jaGFyQ29kZUF0KHEpXm4uY2hhckNvZGVBdChxKX1vWzBdJj1+cDt2YXIgYj1tLWgtYy0yO2ZvcihxPTA7cTxiO3ErPTEpe2lmKG9bcV0hPT0wKXt0aHJvdyJsZWZ0bW9zdCBvY3RldHMgbm90IHplcm8ifX1pZihvW2JdIT09MSl7dGhyb3ciMHgwMSBtYXJrZXIgbm90IGZvdW5kIn1yZXR1cm4gZT09PWhleHRvcnN0cihyKHJzdHJ0b2hleCgiXHgwMFx4MDBceDAwXHgwMFx4MDBceDAwXHgwMFx4MDAiK2orU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsby5zbGljZSgtYykpKSkpfVJTQUtleS5wcm90b3R5cGUuc2lnbldpdGhNZXNzYWdlSGFzaD1fcnNhc2lnbl9zaWduV2l0aE1lc3NhZ2VIYXNoO1JTQUtleS5wcm90b3R5cGUuc2lnblN0cmluZz1fcnNhc2lnbl9zaWduU3RyaW5nO1JTQUtleS5wcm90b3R5cGUuc2lnblN0cmluZ1dpdGhTSEExPV9yc2FzaWduX3NpZ25TdHJpbmdXaXRoU0hBMTtSU0FLZXkucHJvdG90eXBlLnNpZ25TdHJpbmdXaXRoU0hBMjU2PV9yc2FzaWduX3NpZ25TdHJpbmdXaXRoU0hBMjU2O1JTQUtleS5wcm90b3R5cGUuc2lnbj1fcnNhc2lnbl9zaWduU3RyaW5nO1JTQUtleS5wcm90b3R5cGUuc2lnbldpdGhTSEExPV9yc2FzaWduX3NpZ25TdHJpbmdXaXRoU0hBMTtSU0FLZXkucHJvdG90eXBlLnNpZ25XaXRoU0hBMjU2PV9yc2FzaWduX3NpZ25TdHJpbmdXaXRoU0hBMjU2O1JTQUtleS5wcm90b3R5cGUuc2lnbldpdGhNZXNzYWdlSGFzaFBTUz1fcnNhc2lnbl9zaWduV2l0aE1lc3NhZ2VIYXNoUFNTO1JTQUtleS5wcm90b3R5cGUuc2lnblN0cmluZ1BTUz1fcnNhc2lnbl9zaWduU3RyaW5nUFNTO1JTQUtleS5wcm90b3R5cGUuc2lnblBTUz1fcnNhc2lnbl9zaWduU3RyaW5nUFNTO1JTQUtleS5TQUxUX0xFTl9ITEVOPS0xO1JTQUtleS5TQUxUX0xFTl9NQVg9LTI7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlXaXRoTWVzc2FnZUhhc2g9X3JzYXNpZ25fdmVyaWZ5V2l0aE1lc3NhZ2VIYXNoO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5U3RyaW5nPV9yc2FzaWduX3ZlcmlmeVN0cmluZztSU0FLZXkucHJvdG90eXBlLnZlcmlmeUhleFNpZ25hdHVyZUZvck1lc3NhZ2U9X3JzYXNpZ25fdmVyaWZ5SGV4U2lnbmF0dXJlRm9yTWVzc2FnZTtSU0FLZXkucHJvdG90eXBlLnZlcmlmeT1fcnNhc2lnbl92ZXJpZnlTdHJpbmc7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlIZXhTaWduYXR1cmVGb3JCeXRlQXJyYXlNZXNzYWdlPV9yc2FzaWduX3ZlcmlmeUhleFNpZ25hdHVyZUZvck1lc3NhZ2U7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1M9X3JzYXNpZ25fdmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5U3RyaW5nUFNTPV9yc2FzaWduX3ZlcmlmeVN0cmluZ1BTUztSU0FLZXkucHJvdG90eXBlLnZlcmlmeVBTUz1fcnNhc2lnbl92ZXJpZnlTdHJpbmdQU1M7UlNBS2V5LlNBTFRfTEVOX1JFQ09WRVI9LTI7Ci8qISB4NTA5LTEuMS45LmpzIChjKSAyMDEyLTIwMTYgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmZ1bmN0aW9uIFg1MDkoKXt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0E9bnVsbDt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0FfaE49bnVsbDt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0FfaEU9bnVsbDt0aGlzLmhleD1udWxsO3RoaXMuZ2V0U2VyaWFsTnVtYmVySGV4PWZ1bmN0aW9uKCl7cmV0dXJuIEFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDFdKX07dGhpcy5nZXRTaWduYXR1cmVBbGdvcml0aG1GaWVsZD1mdW5jdGlvbigpe3ZhciBiPUFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDIsMF0pO3ZhciBhPUtKVVIuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludChiKTt2YXIgYz1LSlVSLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoYSk7cmV0dXJuIGN9O3RoaXMuZ2V0SXNzdWVySGV4PWZ1bmN0aW9uKCl7cmV0dXJuIEFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VExWQnlOdGhMaXN0KHRoaXMuaGV4LDAsWzAsM10pfTt0aGlzLmdldElzc3VlclN0cmluZz1mdW5jdGlvbigpe3JldHVybiBYNTA5LmhleDJkbihBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDNdKSl9O3RoaXMuZ2V0U3ViamVjdEhleD1mdW5jdGlvbigpe3JldHVybiBBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDVdKX07dGhpcy5nZXRTdWJqZWN0U3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIFg1MDkuaGV4MmRuKEFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VExWQnlOdGhMaXN0KHRoaXMuaGV4LDAsWzAsNV0pKX07dGhpcy5nZXROb3RCZWZvcmU9ZnVuY3Rpb24oKXt2YXIgYT1BU04xSEVYLmdldERlY2VuZGFudEhleFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCw0LDBdKTthPWEucmVwbGFjZSgvKC4uKS9nLCIlJDEiKTthPWRlY29kZVVSSUNvbXBvbmVudChhKTtyZXR1cm4gYX07dGhpcy5nZXROb3RBZnRlcj1mdW5jdGlvbigpe3ZhciBhPUFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDQsMV0pO2E9YS5yZXBsYWNlKC8oLi4pL2csIiUkMSIpO2E9ZGVjb2RlVVJJQ29tcG9uZW50KGEpO3JldHVybiBhfTt0aGlzLnJlYWRDZXJ0UEVNPWZ1bmN0aW9uKGMpe3ZhciBlPVg1MDkucGVtVG9IZXgoYyk7dmFyIGI9WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0SGV4KGUpO3ZhciBkPW5ldyBSU0FLZXkoKTtkLnNldFB1YmxpYyhiWzBdLGJbMV0pO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQT1kO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oTj1iWzBdO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oRT1iWzFdO3RoaXMuaGV4PWV9O3RoaXMucmVhZENlcnRQRU1XaXRob3V0UlNBSW5pdD1mdW5jdGlvbihjKXt2YXIgZD1YNTA5LnBlbVRvSGV4KGMpO3ZhciBiPVg1MDkuZ2V0UHVibGljS2V5SGV4QXJyYXlGcm9tQ2VydEhleChkKTt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0Euc2V0UHVibGljKGJbMF0sYlsxXSk7dGhpcy5zdWJqZWN0UHVibGljS2V5UlNBX2hOPWJbMF07dGhpcy5zdWJqZWN0UHVibGljS2V5UlNBX2hFPWJbMV07dGhpcy5oZXg9ZH07dGhpcy5nZXRJbmZvPWZ1bmN0aW9uKCl7dmFyIHA9IkJhc2ljIEZpZWxkc1xuIjtwKz0iICBzZXJpYWwgbnVtYmVyOiAiK3RoaXMuZ2V0U2VyaWFsTnVtYmVySGV4KCkrIlxuIjtwKz0iICBzaWduYXR1cmUgYWxnb3JpdGhtOiAiK3RoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtRmllbGQoKSsiXG4iO3ArPSIgIGlzc3VlcjogIit0aGlzLmdldElzc3VlclN0cmluZygpKyJcbiI7cCs9IiAgbm90QmVmb3JlOiAiK3RoaXMuZ2V0Tm90QmVmb3JlKCkrIlxuIjtwKz0iICBub3RBZnRlcjogIit0aGlzLmdldE5vdEFmdGVyKCkrIlxuIjtwKz0iICBzdWJqZWN0OiAiK3RoaXMuZ2V0U3ViamVjdFN0cmluZygpKyJcbiI7cCs9IiAgc3ViamVjdCBwdWJsaWMga2V5IGluZm86IFxuIjt2YXIgaj1YNTA5LmdldFN1YmplY3RQdWJsaWNLZXlJbmZvUG9zRnJvbUNlcnRIZXgodGhpcy5oZXgpO3ZhciBkPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmoodGhpcy5oZXgsaik7dmFyIG49S0VZVVRJTC5nZXRLZXkoZCxudWxsLCJwa2NzOHB1YiIpO2lmKG4gaW5zdGFuY2VvZiBSU0FLZXkpe3ArPSIgICAga2V5IGFsZ29yaXRobTogUlNBXG4iO3ArPSIgICAgbj0iK24ubi50b1N0cmluZygxNikuc3Vic3RyKDAsMTYpKyIuLi5cbiI7cCs9IiAgICBlPSIrbi5lLnRvU3RyaW5nKDE2KSsiXG4ifXArPSJYNTA5djMgRXh0ZW5zaW9uczpcbiI7dmFyIG09WDUwOS5nZXRWM0V4dEluZm9MaXN0T2ZDZXJ0SGV4KHRoaXMuaGV4KTtmb3IodmFyIGU9MDtlPG0ubGVuZ3RoO2UrKyl7dmFyIGI9bVtlXTt2YXIgbz1LSlVSLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoYi5vaWQpO2lmKG89PT0iIil7bz1iLm9pZH12YXIgaz0iIjtpZihiLmNyaXRpY2FsPT09dHJ1ZSl7az0iQ1JJVElDQUwifXArPSIgICIrbysiICIraysiOlxuIjtpZihvPT09ImJhc2ljQ29uc3RyYWludHMiKXt2YXIgZz1YNTA5LmdldEV4dEJhc2ljQ29uc3RyYWludHModGhpcy5oZXgpO2lmKGcuY0E9PT11bmRlZmluZWQpe3ArPSIgICAge31cbiJ9ZWxzZXtwKz0iICAgIGNBPXRydWUiO2lmKGcucGF0aExlbiE9PXVuZGVmaW5lZCl7cCs9IiwgcGF0aExlbj0iK2cucGF0aExlbn1wKz0iXG4ifX1lbHNle2lmKG89PT0ia2V5VXNhZ2UiKXtwKz0iICAgICIrWDUwOS5nZXRFeHRLZXlVc2FnZVN0cmluZyh0aGlzLmhleCkrIlxuIn1lbHNle2lmKG89PT0ic3ViamVjdEtleUlkZW50aWZpZXIiKXtwKz0iICAgICIrWDUwOS5nZXRFeHRTdWJqZWN0S2V5SWRlbnRpZmllcih0aGlzLmhleCkrIlxuIn1lbHNle2lmKG89PT0iYXV0aG9yaXR5S2V5SWRlbnRpZmllciIpe3ZhciBhPVg1MDkuZ2V0RXh0QXV0aG9yaXR5S2V5SWRlbnRpZmllcih0aGlzLmhleCk7aWYoYS5raWQhPT11bmRlZmluZWQpe3ArPSIgICAga2lkPSIrYS5raWQrIlxuIn19ZWxzZXtpZihvPT09ImV4dEtleVVzYWdlIil7dmFyIGg9WDUwOS5nZXRFeHRFeHRLZXlVc2FnZU5hbWUodGhpcy5oZXgpO3ArPSIgICAgIitoLmpvaW4oIiwgIikrIlxuIn1lbHNle2lmKG89PT0ic3ViamVjdEFsdE5hbWUiKXt2YXIgZj1YNTA5LmdldEV4dFN1YmplY3RBbHROYW1lKHRoaXMuaGV4KTtwKz0iICAgICIrZi5qb2luKCIsICIpKyJcbiJ9ZWxzZXtpZihvPT09ImNSTERpc3RyaWJ1dGlvblBvaW50cyIpe3ZhciBsPVg1MDkuZ2V0RXh0Q1JMRGlzdHJpYnV0aW9uUG9pbnRzVVJJKHRoaXMuaGV4KTtwKz0iICAgICIrbCsiXG4ifWVsc2V7aWYobz09PSJhdXRob3JpdHlJbmZvQWNjZXNzIil7dmFyIGM9WDUwOS5nZXRFeHRBSUFJbmZvKHRoaXMuaGV4KTtpZihjLm9jc3AhPT11bmRlZmluZWQpe3ArPSIgICAgb2NzcDogIitjLm9jc3Auam9pbigiLCIpKyJcbiJ9aWYoYy5jYWlzc3VlciE9PXVuZGVmaW5lZCl7cCs9IiAgICBjYWlzc3VlcjogIitjLmNhaXNzdWVyLmpvaW4oIiwiKSsiXG4ifX19fX19fX19fXArPSJzaWduYXR1cmUgYWxnb3JpdGhtOiAiK1g1MDkuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtTmFtZSh0aGlzLmhleCkrIlxuIjtwKz0ic2lnbmF0dXJlOiAiK1g1MDkuZ2V0U2lnbmF0dXJlVmFsdWVIZXgodGhpcy5oZXgpLnN1YnN0cigwLDE2KSsiLi4uXG4iO3JldHVybiBwfX1YNTA5LnBlbVRvQmFzZTY0PWZ1bmN0aW9uKGEpe3ZhciBiPWE7Yj1iLnJlcGxhY2UoIi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLSIsIiIpO2I9Yi5yZXBsYWNlKCItLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tIiwiIik7Yj1iLnJlcGxhY2UoL1sgXG5dKy9nLCIiKTtyZXR1cm4gYn07WDUwOS5wZW1Ub0hleD1mdW5jdGlvbihhKXt2YXIgYz1YNTA5LnBlbVRvQmFzZTY0KGEpO3ZhciBiPWI2NHRvaGV4KGMpO3JldHVybiBifTtYNTA5LmdldFN1YmplY3RQdWJsaWNLZXlQb3NGcm9tQ2VydEhleD1mdW5jdGlvbihmKXt2YXIgZT1YNTA5LmdldFN1YmplY3RQdWJsaWNLZXlJbmZvUG9zRnJvbUNlcnRIZXgoZik7aWYoZT09LTEpe3JldHVybiAtMX12YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihmLGUpO2lmKGIubGVuZ3RoIT0yKXtyZXR1cm4gLTF9dmFyIGQ9YlsxXTtpZihmLnN1YnN0cmluZyhkLGQrMikhPSIwMyIpe3JldHVybiAtMX12YXIgYz1BU04xSEVYLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKGYsZCk7aWYoZi5zdWJzdHJpbmcoYyxjKzIpIT0iMDAiKXtyZXR1cm4gLTF9cmV0dXJuIGMrMn07WDUwOS5nZXRTdWJqZWN0UHVibGljS2V5SW5mb1Bvc0Zyb21DZXJ0SGV4PWZ1bmN0aW9uKGQpe3ZhciBjPUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmooZCwwKTt2YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihkLGMpO2lmKGIubGVuZ3RoPDEpe3JldHVybiAtMX1pZihkLnN1YnN0cmluZyhiWzBdLGJbMF0rMTApPT0iYTAwMzAyMDEwMiIpe2lmKGIubGVuZ3RoPDYpe3JldHVybiAtMX1yZXR1cm4gYls2XX1lbHNle2lmKGIubGVuZ3RoPDUpe3JldHVybiAtMX1yZXR1cm4gYls1XX19O1g1MDkuZ2V0UHVibGljS2V5SGV4QXJyYXlGcm9tQ2VydEhleD1mdW5jdGlvbihmKXt2YXIgZT1YNTA5LmdldFN1YmplY3RQdWJsaWNLZXlQb3NGcm9tQ2VydEhleChmKTt2YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihmLGUpO2lmKGIubGVuZ3RoIT0yKXtyZXR1cm5bXX12YXIgZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihmLGJbMF0pO3ZhciBjPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGYsYlsxXSk7aWYoZCE9bnVsbCYmYyE9bnVsbCl7cmV0dXJuW2QsY119ZWxzZXtyZXR1cm5bXX19O1g1MDkuZ2V0SGV4VGJzQ2VydGlmaWNhdGVGcm9tQ2VydD1mdW5jdGlvbihiKXt2YXIgYT1BU04xSEVYLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKGIsMCk7cmV0dXJuIGF9O1g1MDkuZ2V0UHVibGljS2V5SGV4QXJyYXlGcm9tQ2VydFBFTT1mdW5jdGlvbihjKXt2YXIgZD1YNTA5LnBlbVRvSGV4KGMpO3ZhciBiPVg1MDkuZ2V0UHVibGljS2V5SGV4QXJyYXlGcm9tQ2VydEhleChkKTtyZXR1cm4gYn07WDUwOS5oZXgyZG49ZnVuY3Rpb24oZSl7dmFyIGY9IiI7dmFyIGM9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSwwKTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGI9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihlLGNbZF0pO2Y9ZisiLyIrWDUwOS5oZXgycmRuKGIpfXJldHVybiBmfTtYNTA5LmhleDJyZG49ZnVuY3Rpb24oYSl7dmFyIGY9QVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QoYSwwLFswLDBdKTt2YXIgZT1BU04xSEVYLmdldERlY2VuZGFudEhleFZCeU50aExpc3QoYSwwLFswLDFdKTt2YXIgYz0iIjt0cnl7Yz1YNTA5LkROX0FUVFJIRVhbZl19Y2F0Y2goYil7Yz1mfWU9ZS5yZXBsYWNlKC8oLi4pL2csIiUkMSIpO3ZhciBkPWRlY29kZVVSSUNvbXBvbmVudChlKTtyZXR1cm4gYysiPSIrZH07WDUwOS5ETl9BVFRSSEVYPXsiMDYwMzU1MDQwNiI6IkMiLCIwNjAzNTUwNDBhIjoiTyIsIjA2MDM1NTA0MGIiOiJPVSIsIjA2MDM1NTA0MDMiOiJDTiIsIjA2MDM1NTA0MDUiOiJTTiIsIjA2MDM1NTA0MDgiOiJTVCIsIjA2MDM1NTA0MDciOiJMIiwiMDYwMzU1MDQwOSI6InN0cmVldEFkZHJlc3MiLCIwNjAzNTUwNDBmIjoiYnVzaW5lc3NDYXRlZ29yeSIsIjA2MDM1NTA0MTEiOiJwb3N0YWxDb2RlIiwiMDYwYjJiMDYwMTA0MDE4MjM3M2MwMjAxMDIiOiJqdXJpc2RpY3Rpb25PZkluY29ycG9yYXRpb25TUCIsIjA2MGIyYjA2MDEwNDAxODIzNzNjMDIwMTAzIjoianVyaXNkaWN0aW9uT2ZJbmNvcnBvcmF0aW9uQyIsfTtYNTA5LmdldFB1YmxpY0tleUZyb21DZXJ0UEVNPWZ1bmN0aW9uKGYpe3ZhciBjPVg1MDkuZ2V0UHVibGljS2V5SW5mb1Byb3BPZkNlcnRQRU0oZik7aWYoYy5hbGdvaWQ9PSIyYTg2NDg4NmY3MGQwMTAxMDEiKXt2YXIgaT1LRVlVVElMLnBhcnNlUHVibGljUmF3UlNBS2V5SGV4KGMua2V5aGV4KTt2YXIgaj1uZXcgUlNBS2V5KCk7ai5zZXRQdWJsaWMoaS5uLGkuZSk7cmV0dXJuIGp9ZWxzZXtpZihjLmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7dmFyIGU9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW2MuYWxncGFyYW1dO3ZhciBqPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6ZSxpbmZvOmMua2V5aGV4fSk7ai5zZXRQdWJsaWNLZXlIZXgoYy5rZXloZXgpO3JldHVybiBqfWVsc2V7aWYoYy5hbGdvaWQ9PSIyYTg2NDhjZTM4MDQwMSIpe3ZhciBiPUFTTjFIRVguZ2V0VmJ5TGlzdChjLmFsZ3BhcmFtLDAsWzBdLCIwMiIpO3ZhciBhPUFTTjFIRVguZ2V0VmJ5TGlzdChjLmFsZ3BhcmFtLDAsWzFdLCIwMiIpO3ZhciBkPUFTTjFIRVguZ2V0VmJ5TGlzdChjLmFsZ3BhcmFtLDAsWzJdLCIwMiIpO3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGMua2V5aGV4LDApO2g9aC5zdWJzdHIoMik7dmFyIGo9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO2ouc2V0UHVibGljKG5ldyBCaWdJbnRlZ2VyKGIsMTYpLG5ldyBCaWdJbnRlZ2VyKGEsMTYpLG5ldyBCaWdJbnRlZ2VyKGQsMTYpLG5ldyBCaWdJbnRlZ2VyKGgsMTYpKTtyZXR1cm4gan1lbHNle3Rocm93InVuc3VwcG9ydGVkIGtleSJ9fX19O1g1MDkuZ2V0UHVibGljS2V5SW5mb1Byb3BPZkNlcnRQRU09ZnVuY3Rpb24oZSl7dmFyIGk9e307aS5hbGdwYXJhbT1udWxsO3ZhciBmPVg1MDkucGVtVG9IZXgoZSk7dmFyIGQ9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZiwwKTtpZihkLmxlbmd0aCE9Myl7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDEpIn1pZihmLnN1YnN0cihkWzBdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwMikifXZhciBjPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGYsZFswXSk7dmFyIGc9NjtpZihmLnN1YnN0cihjWzBdLDIpIT09ImEwIil7Zz01fWlmKGMubGVuZ3RoPGcrMSl7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDMpIn12YXIgYT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihmLGNbZ10pO2lmKGEubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwNCkifXZhciBoPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGYsYVswXSk7aWYoaC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDA1KSJ9aS5hbGdvaWQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZixoWzBdKTtpZihmLnN1YnN0cihoWzFdLDIpPT0iMDYiKXtpLmFsZ3BhcmFtPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGYsaFsxXSl9ZWxzZXtpZihmLnN1YnN0cihoWzFdLDIpPT0iMzAiKXtpLmFsZ3BhcmFtPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZixoWzFdKX19aWYoZi5zdWJzdHIoYVsxXSwyKSE9IjAzIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDYpIn12YXIgYj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihmLGFbMV0pO2kua2V5aGV4PWIuc3Vic3RyKDIpO3JldHVybiBpfTtYNTA5LmdldFB1YmxpY0tleUluZm9Qb3NPZkNlcnRIRVg9ZnVuY3Rpb24oYyl7dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooYywwKTtpZihiLmxlbmd0aCE9Myl7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDEpIn1pZihjLnN1YnN0cihiWzBdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwMikifXZhciBhPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGMsYlswXSk7aWYoYS5sZW5ndGg8Nyl7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDMpIn1yZXR1cm4gYVs2XX07WDUwOS5nZXRWM0V4dEluZm9MaXN0T2ZDZXJ0SGV4PWZ1bmN0aW9uKGcpe3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsMCk7aWYoYi5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAxKSJ9aWYoZy5zdWJzdHIoYlswXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDIpIn12YXIgYT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLGJbMF0pO2lmKGEubGVuZ3RoPDgpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAzKSJ9aWYoZy5zdWJzdHIoYVs3XSwyKSE9ImEzIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDQpIn12YXIgaD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLGFbN10pO2lmKGgubGVuZ3RoIT0xKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwNSkifWlmKGcuc3Vic3RyKGhbMF0sMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDA2KSJ9dmFyIGY9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxoWzBdKTt2YXIgZT1mLmxlbmd0aDt2YXIgZD1uZXcgQXJyYXkoZSk7Zm9yKHZhciBjPTA7YzxlO2MrKyl7ZFtjXT1YNTA5LmdldFYzRXh0SXRlbUluZm9fQXRPYmooZyxmW2NdKX1yZXR1cm4gZH07WDUwOS5nZXRWM0V4dEl0ZW1JbmZvX0F0T2JqPWZ1bmN0aW9uKGYsZyl7dmFyIGU9e307ZS5wb3NUTFY9Zzt2YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihmLGcpO2lmKGIubGVuZ3RoIT0yJiZiLmxlbmd0aCE9Myl7dGhyb3cibWFsZm9ybWVkIFguNTA5djMgRXh0IChjb2RlOjAwMSkifWlmKGYuc3Vic3RyKGJbMF0sMikhPSIwNiIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOXYzIEV4dCAoY29kZTowMDIpIn12YXIgZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihmLGJbMF0pO2Uub2lkPUFTTjFIRVguaGV4dG9vaWRzdHIoZCk7ZS5jcml0aWNhbD1mYWxzZTtpZihiLmxlbmd0aD09Myl7ZS5jcml0aWNhbD10cnVlfXZhciBjPWJbYi5sZW5ndGgtMV07aWYoZi5zdWJzdHIoYywyKSE9IjA0Iil7dGhyb3cibWFsZm9ybWVkIFguNTA5djMgRXh0IChjb2RlOjAwMykifWUucG9zVj1BU04xSEVYLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKGYsYyk7cmV0dXJuIGV9O1g1MDkuZ2V0SGV4T2ZUTFZfVjNFeHRWYWx1ZT1mdW5jdGlvbihiLGEpe3ZhciBjPVg1MDkuZ2V0UG9zT2ZUTFZfVjNFeHRWYWx1ZShiLGEpO2lmKGM9PS0xKXtyZXR1cm4gbnVsbH1yZXR1cm4gQVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihiLGMpfTtYNTA5LmdldEhleE9mVl9WM0V4dFZhbHVlPWZ1bmN0aW9uKGIsYSl7dmFyIGM9WDUwOS5nZXRQb3NPZlRMVl9WM0V4dFZhbHVlKGIsYSk7aWYoYz09LTEpe3JldHVybiBudWxsfXJldHVybiBBU04xSEVYLmdldEhleE9mVl9BdE9iaihiLGMpfTtYNTA5LmdldFBvc09mVExWX1YzRXh0VmFsdWU9ZnVuY3Rpb24oZixiKXt2YXIgZD1iO2lmKCFiLm1hdGNoKC9eWzAtOS5dKyQvKSl7ZD1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWQoYil9aWYoZD09IiIpe3JldHVybiAtMX12YXIgYz1YNTA5LmdldFYzRXh0SW5mb0xpc3RPZkNlcnRIZXgoZik7Zm9yKHZhciBhPTA7YTxjLmxlbmd0aDthKyspe3ZhciBlPWNbYV07aWYoZS5vaWQ9PWQpe3JldHVybiBlLnBvc1Z9fXJldHVybiAtMX07WDUwOS5nZXRFeHRCYXNpY0NvbnN0cmFpbnRzPWZ1bmN0aW9uKGQpe3ZhciBhPVg1MDkuZ2V0SGV4T2ZWX1YzRXh0VmFsdWUoZCwiYmFzaWNDb25zdHJhaW50cyIpO2lmKGE9PT1udWxsKXtyZXR1cm4gbnVsbH1pZihhPT09IiIpe3JldHVybnt9fWlmKGE9PT0iMDEwMWZmIil7cmV0dXJue2NBOnRydWV9fWlmKGEuc3Vic3RyKDAsOCk9PT0iMDEwMWZmMDIiKXt2YXIgYz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihhLDYpO3ZhciBiPXBhcnNlSW50KGMsMTYpO3JldHVybntjQTp0cnVlLHBhdGhMZW46Yn19dGhyb3cidW5rbm93biBlcnJvciJ9O1g1MDkuS0VZVVNBR0VfTkFNRT1bImRpZ2l0YWxTaWduYXR1cmUiLCJub25SZXB1ZGlhdGlvbiIsImtleUVuY2lwaGVybWVudCIsImRhdGFFbmNpcGhlcm1lbnQiLCJrZXlBZ3JlZW1lbnQiLCJrZXlDZXJ0U2lnbiIsImNSTFNpZ24iLCJlbmNpcGhlck9ubHkiLCJkZWNpcGhlck9ubHkiXTtYNTA5LmdldEV4dEtleVVzYWdlQmluPWZ1bmN0aW9uKGQpe3ZhciBiPVg1MDkuZ2V0SGV4T2ZWX1YzRXh0VmFsdWUoZCwia2V5VXNhZ2UiKTtpZihiPT0iIil7cmV0dXJuIiJ9aWYoYi5sZW5ndGglMiE9MHx8Yi5sZW5ndGg8PTIpe3Rocm93Im1hbGZvcm1lZCBrZXkgdXNhZ2UgdmFsdWUifXZhciBhPXBhcnNlSW50KGIuc3Vic3RyKDAsMikpO3ZhciBjPXBhcnNlSW50KGIuc3Vic3RyKDIpLDE2KS50b1N0cmluZygyKTtyZXR1cm4gYy5zdWJzdHIoMCxjLmxlbmd0aC1hKX07WDUwOS5nZXRFeHRLZXlVc2FnZVN0cmluZz1mdW5jdGlvbihlKXt2YXIgZD1YNTA5LmdldEV4dEtleVVzYWdlQmluKGUpO3ZhciBiPW5ldyBBcnJheSgpO2Zvcih2YXIgYz0wO2M8ZC5sZW5ndGg7YysrKXtpZihkLnN1YnN0cihjLDEpPT0iMSIpe2IucHVzaChYNTA5LktFWVVTQUdFX05BTUVbY10pfX1yZXR1cm4gYi5qb2luKCIsIil9O1g1MDkuZ2V0RXh0U3ViamVjdEtleUlkZW50aWZpZXI9ZnVuY3Rpb24oYil7dmFyIGE9WDUwOS5nZXRIZXhPZlZfVjNFeHRWYWx1ZShiLCJzdWJqZWN0S2V5SWRlbnRpZmllciIpO3JldHVybiBhfTtYNTA5LmdldEV4dEF1dGhvcml0eUtleUlkZW50aWZpZXI9ZnVuY3Rpb24oZil7dmFyIGI9e307dmFyIGU9WDUwOS5nZXRIZXhPZlRMVl9WM0V4dFZhbHVlKGYsImF1dGhvcml0eUtleUlkZW50aWZpZXIiKTtpZihlPT09bnVsbCl7cmV0dXJuIG51bGx9dmFyIGM9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSwwKTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7aWYoZS5zdWJzdHIoY1tkXSwyKT09PSI4MCIpe2Iua2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsY1tkXSl9fXJldHVybiBifTtYNTA5LmdldEV4dEV4dEtleVVzYWdlTmFtZT1mdW5jdGlvbihrKXt2YXIgYj1uZXcgQXJyYXkoKTt2YXIgZj1YNTA5LmdldEhleE9mVExWX1YzRXh0VmFsdWUoaywiZXh0S2V5VXNhZ2UiKTtpZihmPT09bnVsbCl7cmV0dXJuIG51bGx9dmFyIGM9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZiwwKTtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGo9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZixjW2VdKTt2YXIgZz1LSlVSLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQoaik7dmFyIGQ9S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lKGcpO2IucHVzaChkKX1yZXR1cm4gYn07WDUwOS5nZXRFeHRTdWJqZWN0QWx0TmFtZT1mdW5jdGlvbihnKXt2YXIgYj1uZXcgQXJyYXkoKTt2YXIgZj1YNTA5LmdldEhleE9mVExWX1YzRXh0VmFsdWUoZywic3ViamVjdEFsdE5hbWUiKTt2YXIgYz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihmLDApO2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKXtpZihmLnN1YnN0cihjW2VdLDIpPT09IjgyIil7dmFyIGQ9aGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGYsY1tlXSkpO2IucHVzaChkKX19cmV0dXJuIGJ9O1g1MDkuZ2V0RXh0Q1JMRGlzdHJpYnV0aW9uUG9pbnRzVVJJPWZ1bmN0aW9uKG4pe3ZhciBwPW5ldyBBcnJheSgpO3ZhciBrPVg1MDkuZ2V0SGV4T2ZUTFZfVjNFeHRWYWx1ZShuLCJjUkxEaXN0cmlidXRpb25Qb2ludHMiKTt2YXIgbz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihrLDApO2Zvcih2YXIgZz0wO2c8by5sZW5ndGg7ZysrKXt2YXIgbD1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGssb1tnXSk7dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoobCwwKTtmb3IodmFyIGU9MDtlPGIubGVuZ3RoO2UrKyl7aWYobC5zdWJzdHIoYltlXSwyKT09PSJhMCIpe3ZhciBmPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGwsYltlXSk7aWYoZi5zdWJzdHIoMCwyKT09PSJhMCIpe3ZhciBjPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGYsMCk7aWYoYy5zdWJzdHIoMCwyKT09PSI4NiIpe3ZhciBtPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGMsMCk7dmFyIGQ9aGV4dG91dGY4KG0pO3AucHVzaChkKX19fX19cmV0dXJuIHB9O1g1MDkuZ2V0RXh0QUlBSW5mbz1mdW5jdGlvbihnKXt2YXIgaj17fTtqLm9jc3A9W107ai5jYWlzc3Vlcj1bXTt2YXIgaD1YNTA5LmdldFBvc09mVExWX1YzRXh0VmFsdWUoZywiYXV0aG9yaXR5SW5mb0FjY2VzcyIpO2lmKGg9PS0xKXtyZXR1cm4gbnVsbH1pZihnLnN1YnN0cihoLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgQUlBIEV4dG4gVmFsdWUifXZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsaCk7Zm9yKHZhciBjPTA7YzxkLmxlbmd0aDtjKyspe3ZhciBhPWRbY107dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxhKTtpZihiLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIEFjY2Vzc0Rlc2NyaXB0aW9uIG9mIEFJQSBFeHRuIn12YXIgZT1iWzBdO3ZhciBmPWJbMV07aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxlKT09IjJiMDYwMTA1MDUwNzMwMDEiKXtpZihnLnN1YnN0cihmLDIpPT0iODYiKXtqLm9jc3AucHVzaChoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxmKSkpfX1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaihnLGUpPT0iMmIwNjAxMDUwNTA3MzAwMiIpe2lmKGcuc3Vic3RyKGYsMik9PSI4NiIpe2ouY2Fpc3N1ZXIucHVzaChoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxmKSkpfX19cmV0dXJuIGp9O1g1MDkuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtTmFtZT1mdW5jdGlvbihkKXt2YXIgYj1BU04xSEVYLmdldERlY2VuZGFudEhleFZCeU50aExpc3QoZCwwLFsxLDBdKTt2YXIgYT1LSlVSLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQoYik7dmFyIGM9S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lKGEpO3JldHVybiBjfTtYNTA5LmdldFNpZ25hdHVyZVZhbHVlSGV4PWZ1bmN0aW9uKGIpe3ZhciBhPUFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdChiLDAsWzJdKTtpZihhLnN1YnN0cigwLDIpIT09IjAwIil7dGhyb3ciY2FuJ3QgZ2V0IHNpZ25hdHVyZSB2YWx1ZSJ9cmV0dXJuIGEuc3Vic3RyKDIpfTtYNTA5LmdldFNlcmlhbE51bWJlckhleD1mdW5jdGlvbihhKXtyZXR1cm4gQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhWQnlOdGhMaXN0KGEsMCxbMCwxXSl9OwovKiEgandzLTMuMy40IChjKSAyMDEzLTIwMTYgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuandzPT0idW5kZWZpbmVkInx8IUtKVVIuandzKXtLSlVSLmp3cz17fX1LSlVSLmp3cy5KV1M9ZnVuY3Rpb24oKXt2YXIgYT1LSlVSLmp3cy5KV1M7dGhpcy5wYXJzZUpXUz1mdW5jdGlvbihlLGcpe2lmKCh0aGlzLnBhcnNlZEpXUyE9PXVuZGVmaW5lZCkmJihnfHwodGhpcy5wYXJzZWRKV1Muc2lndmFsSCE9PXVuZGVmaW5lZCkpKXtyZXR1cm59aWYoZS5tYXRjaCgvXihbXi5dKylcLihbXi5dKylcLihbXi5dKykkLyk9PW51bGwpe3Rocm93IkpXUyBzaWduYXR1cmUgaXMgbm90IGEgZm9ybSBvZiAnSGVhZC5QYXlsb2FkLlNpZ1ZhbHVlJy4ifXZhciBoPVJlZ0V4cC4kMTt2YXIgYz1SZWdFeHAuJDI7dmFyIGk9UmVnRXhwLiQzO3ZhciBrPWgrIi4iK2M7dGhpcy5wYXJzZWRKV1M9e307dGhpcy5wYXJzZWRKV1MuaGVhZEI2NFU9aDt0aGlzLnBhcnNlZEpXUy5wYXlsb2FkQjY0VT1jO3RoaXMucGFyc2VkSldTLnNpZ3ZhbEI2NFU9aTt0aGlzLnBhcnNlZEpXUy5zaT1rO2lmKCFnKXt2YXIgZj1iNjR1dG9oZXgoaSk7dmFyIGQ9cGFyc2VCaWdJbnQoZiwxNik7dGhpcy5wYXJzZWRKV1Muc2lndmFsSD1mO3RoaXMucGFyc2VkSldTLnNpZ3ZhbEJJPWR9dmFyIGI9YjY0dXRvdXRmOChoKTt2YXIgaj1iNjR1dG91dGY4KGMpO3RoaXMucGFyc2VkSldTLmhlYWRTPWI7dGhpcy5wYXJzZWRKV1MucGF5bG9hZFM9ajtpZighYS5pc1NhZmVKU09OU3RyaW5nKGIsdGhpcy5wYXJzZWRKV1MsImhlYWRQIikpe3Rocm93Im1hbGZvcm1lZCBKU09OIHN0cmluZyBmb3IgSldTIEhlYWQ6ICIrYn19fTtLSlVSLmp3cy5KV1Muc2lnbj1mdW5jdGlvbihhLGksYyxtLGwpe3ZhciBrPUtKVVIuandzLkpXUzt2YXIgcSxlLGo7aWYodHlwZW9mIGkhPSJzdHJpbmciJiZ0eXBlb2YgaSE9Im9iamVjdCIpe3Rocm93InNwSGVhZGVyIG11c3QgYmUgSlNPTiBzdHJpbmcgb3Igb2JqZWN0OiAiK2l9aWYodHlwZW9mIGk9PSJvYmplY3QiKXtlPWk7cT1KU09OLnN0cmluZ2lmeShlKX1pZih0eXBlb2YgaT09InN0cmluZyIpe3E9aTtpZighay5pc1NhZmVKU09OU3RyaW5nKHEpKXt0aHJvdyJKV1MgSGVhZCBpcyBub3Qgc2FmZSBKU09OIHN0cmluZzogIitxfWU9ay5yZWFkU2FmZUpTT05TdHJpbmcocSl9aj1jO2lmKHR5cGVvZiBjPT0ib2JqZWN0Iil7aj1KU09OLnN0cmluZ2lmeShjKX1pZigoYT09IiJ8fGE9PW51bGwpJiZlLmFsZyE9PXVuZGVmaW5lZCl7YT1lLmFsZ31pZigoYSE9IiImJmEhPW51bGwpJiZlLmFsZz09PXVuZGVmaW5lZCl7ZS5hbGc9YTtxPUpTT04uc3RyaW5naWZ5KGUpfWlmKGEhPT1lLmFsZyl7dGhyb3ciYWxnIGFuZCBzSGVhZGVyLmFsZyBkb2Vzbid0IG1hdGNoOiAiK2ErIiE9IitlLmFsZ312YXIgZD1udWxsO2lmKGsuandzYWxnMnNpZ2FsZ1thXT09PXVuZGVmaW5lZCl7dGhyb3cidW5zdXBwb3J0ZWQgYWxnIG5hbWU6ICIrYX1lbHNle2Q9ay5qd3NhbGcyc2lnYWxnW2FdfXZhciBiPXV0Zjh0b2I2NHUocSk7dmFyIGc9dXRmOHRvYjY0dShqKTt2YXIgbz1iKyIuIitnO3ZhciBuPSIiO2lmKGQuc3Vic3RyKDAsNCk9PSJIbWFjIil7aWYobT09PXVuZGVmaW5lZCl7dGhyb3cibWFjIGtleSBzaGFsbCBiZSBzcGVjaWZpZWQgZm9yIEhTKiBhbGcifXZhciBoPW5ldyBLSlVSLmNyeXB0by5NYWMoe2FsZzpkLHByb3Y6ImNyeXB0b2pzIixwYXNzOm19KTtoLnVwZGF0ZVN0cmluZyhvKTtuPWguZG9GaW5hbCgpfWVsc2V7aWYoZC5pbmRleE9mKCJ3aXRoRUNEU0EiKSE9LTEpe3ZhciBwPW5ldyBLSlVSLmNyeXB0by5TaWduYXR1cmUoe2FsZzpkfSk7cC5pbml0KG0sbCk7cC51cGRhdGVTdHJpbmcobyk7aEFTTjFTaWc9cC5zaWduKCk7bj1LSlVSLmNyeXB0by5FQ0RTQS5hc24xU2lnVG9Db25jYXRTaWcoaEFTTjFTaWcpfWVsc2V7aWYoZCE9Im5vbmUiKXt2YXIgcD1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6ZH0pO3AuaW5pdChtLGwpO3AudXBkYXRlU3RyaW5nKG8pO249cC5zaWduKCl9fX12YXIgZj1oZXh0b2I2NHUobik7cmV0dXJuIG8rIi4iK2Z9O0tKVVIuandzLkpXUy52ZXJpZnk9ZnVuY3Rpb24ocCx0LGope3ZhciBtPUtKVVIuandzLkpXUzt2YXIgcT1wLnNwbGl0KCIuIik7dmFyIGQ9cVswXTt2YXIgbD1xWzFdO3ZhciBiPWQrIi4iK2w7dmFyIHI9YjY0dXRvaGV4KHFbMl0pO3ZhciBpPW0ucmVhZFNhZmVKU09OU3RyaW5nKGI2NHV0b3V0ZjgocVswXSkpO3ZhciBoPW51bGw7dmFyIHM9bnVsbDtpZihpLmFsZz09PXVuZGVmaW5lZCl7dGhyb3ciYWxnb3JpdGhtIG5vdCBzcGVjaWZpZWQgaW4gaGVhZGVyIn1lbHNle2g9aS5hbGc7cz1oLnN1YnN0cigwLDIpfWlmKGohPW51bGwmJk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChqKT09PSJbb2JqZWN0IEFycmF5XSImJmoubGVuZ3RoPjApe3ZhciBjPSI6IitqLmpvaW4oIjoiKSsiOiI7aWYoYy5pbmRleE9mKCI6IitoKyI6Iik9PS0xKXt0aHJvdyJhbGdvcml0aG0gJyIraCsiJyBub3QgYWNjZXB0ZWQgaW4gdGhlIGxpc3QifX1pZihoIT0ibm9uZSImJnQ9PT1udWxsKXt0aHJvdyJrZXkgc2hhbGwgYmUgc3BlY2lmaWVkIHRvIHZlcmlmeS4ifWlmKHR5cGVvZiB0PT0ic3RyaW5nIiYmdC5pbmRleE9mKCItLS0tLUJFR0lOICIpIT0tMSl7dD1LRVlVVElMLmdldEtleSh0KX1pZihzPT0iUlMifHxzPT0iUFMiKXtpZighKHQgaW5zdGFuY2VvZiBSU0FLZXkpKXt0aHJvdyJrZXkgc2hhbGwgYmUgYSBSU0FLZXkgb2JqIGZvciBSUyogYW5kIFBTKiBhbGdzIn19aWYocz09IkVTIil7aWYoISh0IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EpKXt0aHJvdyJrZXkgc2hhbGwgYmUgYSBFQ0RTQSBvYmogZm9yIEVTKiBhbGdzIn19aWYoaD09Im5vbmUiKXt9dmFyIG49bnVsbDtpZihtLmp3c2FsZzJzaWdhbGdbaS5hbGddPT09dW5kZWZpbmVkKXt0aHJvdyJ1bnN1cHBvcnRlZCBhbGcgbmFtZTogIitofWVsc2V7bj1tLmp3c2FsZzJzaWdhbGdbaF19aWYobj09Im5vbmUiKXt0aHJvdyJub3Qgc3VwcG9ydGVkIn1lbHNle2lmKG4uc3Vic3RyKDAsNCk9PSJIbWFjIil7dmFyIGs9bnVsbDtpZih0PT09dW5kZWZpbmVkKXt0aHJvdyJoZXhhZGVjaW1hbCBrZXkgc2hhbGwgYmUgc3BlY2lmaWVkIGZvciBITUFDIn12YXIgZz1uZXcgS0pVUi5jcnlwdG8uTWFjKHthbGc6bixwYXNzOnR9KTtnLnVwZGF0ZVN0cmluZyhiKTtrPWcuZG9GaW5hbCgpO3JldHVybiByPT1rfWVsc2V7aWYobi5pbmRleE9mKCJ3aXRoRUNEU0EiKSE9LTEpe3ZhciBmPW51bGw7dHJ5e2Y9S0pVUi5jcnlwdG8uRUNEU0EuY29uY2F0U2lnVG9BU04xU2lnKHIpfWNhdGNoKG8pe3JldHVybiBmYWxzZX12YXIgZT1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6bn0pO2UuaW5pdCh0KTtlLnVwZGF0ZVN0cmluZyhiKTtyZXR1cm4gZS52ZXJpZnkoZil9ZWxzZXt2YXIgZT1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6bn0pO2UuaW5pdCh0KTtlLnVwZGF0ZVN0cmluZyhiKTtyZXR1cm4gZS52ZXJpZnkocil9fX19O0tKVVIuandzLkpXUy5wYXJzZT1mdW5jdGlvbihnKXt2YXIgYz1nLnNwbGl0KCIuIik7dmFyIGI9e307dmFyIGYsZSxkO2lmKGMubGVuZ3RoIT0yJiZjLmxlbmd0aCE9Myl7dGhyb3cibWFsZm9ybWVkIHNKV1M6IHdyb25nIG51bWJlciBvZiAnLicgc3BsaXR0ZWQgZWxlbWVudHMifWY9Y1swXTtlPWNbMV07aWYoYy5sZW5ndGg9PTMpe2Q9Y1syXX1iLmhlYWRlck9iaj1LSlVSLmp3cy5KV1MucmVhZFNhZmVKU09OU3RyaW5nKGI2NHV0b3V0ZjgoZikpO2IucGF5bG9hZE9iaj1LSlVSLmp3cy5KV1MucmVhZFNhZmVKU09OU3RyaW5nKGI2NHV0b3V0ZjgoZSkpO2IuaGVhZGVyUFA9SlNPTi5zdHJpbmdpZnkoYi5oZWFkZXJPYmosbnVsbCwiICAiKTtpZihiLnBheWxvYWRPYmo9PW51bGwpe2IucGF5bG9hZFBQPWI2NHV0b3V0ZjgoZSl9ZWxzZXtiLnBheWxvYWRQUD1KU09OLnN0cmluZ2lmeShiLnBheWxvYWRPYmosbnVsbCwiICAiKX1pZihkIT09dW5kZWZpbmVkKXtiLnNpZ0hleD1iNjR1dG9oZXgoZCl9cmV0dXJuIGJ9O0tKVVIuandzLkpXUy52ZXJpZnlKV1Q9ZnVuY3Rpb24oZCxqLGwpe3ZhciBoPUtKVVIuandzLkpXUzt2YXIgaT1kLnNwbGl0KCIuIik7dmFyIGM9aVswXTt2YXIgZz1pWzFdO3ZhciBtPWMrIi4iK2c7dmFyIGs9YjY0dXRvaGV4KGlbMl0pO3ZhciBmPWgucmVhZFNhZmVKU09OU3RyaW5nKGI2NHV0b3V0ZjgoYykpO3ZhciBlPWgucmVhZFNhZmVKU09OU3RyaW5nKGI2NHV0b3V0ZjgoZykpO2lmKGYuYWxnPT09dW5kZWZpbmVkKXtyZXR1cm4gZmFsc2V9aWYobC5hbGc9PT11bmRlZmluZWQpe3Rocm93ImFjY2VwdEZpZWxkLmFsZyBzaGFsbCBiZSBzcGVjaWZpZWQifWlmKCFoLmluQXJyYXkoZi5hbGcsbC5hbGcpKXtyZXR1cm4gZmFsc2V9aWYoZS5pc3MhPT11bmRlZmluZWQmJnR5cGVvZiBsLmlzcz09PSJvYmplY3QiKXtpZighaC5pbkFycmF5KGUuaXNzLGwuaXNzKSl7cmV0dXJuIGZhbHNlfX1pZihlLnN1YiE9PXVuZGVmaW5lZCYmdHlwZW9mIGwuc3ViPT09Im9iamVjdCIpe2lmKCFoLmluQXJyYXkoZS5zdWIsbC5zdWIpKXtyZXR1cm4gZmFsc2V9fWlmKGUuYXVkIT09dW5kZWZpbmVkJiZ0eXBlb2YgbC5hdWQ9PT0ib2JqZWN0Iil7aWYodHlwZW9mIGUuYXVkPT0ic3RyaW5nIil7aWYoIWguaW5BcnJheShlLmF1ZCxsLmF1ZCkpe3JldHVybiBmYWxzZX19ZWxzZXtpZih0eXBlb2YgZS5hdWQ9PSJvYmplY3QiKXtpZighaC5pbmNsdWRlZEFycmF5KGUuYXVkLGwuYXVkKSl7cmV0dXJuIGZhbHNlfX19fXZhciBiPUtKVVIuandzLkludERhdGUuZ2V0Tm93KCk7aWYobC52ZXJpZnlBdCE9PXVuZGVmaW5lZCYmdHlwZW9mIGwudmVyaWZ5QXQ9PT0ibnVtYmVyIil7Yj1sLnZlcmlmeUF0fWlmKGwuZ3JhY2VQZXJpb2Q9PT11bmRlZmluZWR8fHR5cGVvZiBsLmdyYWNlUGVyaW9kIT09Im51bWJlciIpe2wuZ3JhY2VQZXJpb2Q9MH1pZihlLmV4cCE9PXVuZGVmaW5lZCYmdHlwZW9mIGUuZXhwPT0ibnVtYmVyIil7aWYoZS5leHArbC5ncmFjZVBlcmlvZDxiKXtyZXR1cm4gZmFsc2V9fWlmKGUubmJmIT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5uYmY9PSJudW1iZXIiKXtpZihiPGUubmJmLWwuZ3JhY2VQZXJpb2Qpe3JldHVybiBmYWxzZX19aWYoZS5pYXQhPT11bmRlZmluZWQmJnR5cGVvZiBlLmlhdD09Im51bWJlciIpe2lmKGI8ZS5pYXQtbC5ncmFjZVBlcmlvZCl7cmV0dXJuIGZhbHNlfX1pZihlLmp0aSE9PXVuZGVmaW5lZCYmbC5qdGkhPT11bmRlZmluZWQpe2lmKGUuanRpIT09bC5qdGkpe3JldHVybiBmYWxzZX19aWYoIUtKVVIuandzLkpXUy52ZXJpZnkoZCxqLGwuYWxnKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfTtLSlVSLmp3cy5KV1MuaW5jbHVkZWRBcnJheT1mdW5jdGlvbihiLGEpe3ZhciBkPUtKVVIuandzLkpXUy5pbkFycmF5O2lmKGI9PT1udWxsKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIGIhPT0ib2JqZWN0Iil7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBiLmxlbmd0aCE9PSJudW1iZXIiKXtyZXR1cm4gZmFsc2V9Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe2lmKCFkKGJbY10sYSkpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9O0tKVVIuandzLkpXUy5pbkFycmF5PWZ1bmN0aW9uKGQsYil7aWYoYj09PW51bGwpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgYiE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIGIubGVuZ3RoIT09Im51bWJlciIpe3JldHVybiBmYWxzZX1mb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7aWYoYltjXT09ZCl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX07S0pVUi5qd3MuSldTLmp3c2FsZzJzaWdhbGc9e0hTMjU2OiJIbWFjU0hBMjU2IixIUzM4NDoiSG1hY1NIQTM4NCIsSFM1MTI6IkhtYWNTSEE1MTIiLFJTMjU2OiJTSEEyNTZ3aXRoUlNBIixSUzM4NDoiU0hBMzg0d2l0aFJTQSIsUlM1MTI6IlNIQTUxMndpdGhSU0EiLEVTMjU2OiJTSEEyNTZ3aXRoRUNEU0EiLEVTMzg0OiJTSEEzODR3aXRoRUNEU0EiLFBTMjU2OiJTSEEyNTZ3aXRoUlNBYW5kTUdGMSIsUFMzODQ6IlNIQTM4NHdpdGhSU0FhbmRNR0YxIixQUzUxMjoiU0hBNTEyd2l0aFJTQWFuZE1HRjEiLG5vbmU6Im5vbmUiLH07S0pVUi5qd3MuSldTLmlzU2FmZUpTT05TdHJpbmc9ZnVuY3Rpb24oYyxiLGQpe3ZhciBlPW51bGw7dHJ5e2U9anNvblBhcnNlKGMpO2lmKHR5cGVvZiBlIT0ib2JqZWN0Iil7cmV0dXJuIDB9aWYoZS5jb25zdHJ1Y3Rvcj09PUFycmF5KXtyZXR1cm4gMH1pZihiKXtiW2RdPWV9cmV0dXJuIDF9Y2F0Y2goYSl7cmV0dXJuIDB9fTtLSlVSLmp3cy5KV1MucmVhZFNhZmVKU09OU3RyaW5nPWZ1bmN0aW9uKGIpe3ZhciBjPW51bGw7dHJ5e2M9anNvblBhcnNlKGIpO2lmKHR5cGVvZiBjIT0ib2JqZWN0Iil7cmV0dXJuIG51bGx9aWYoYy5jb25zdHJ1Y3Rvcj09PUFycmF5KXtyZXR1cm4gbnVsbH1yZXR1cm4gY31jYXRjaChhKXtyZXR1cm4gbnVsbH19O0tKVVIuandzLkpXUy5nZXRFbmNvZGVkU2lnbmF0dXJlVmFsdWVGcm9tSldTPWZ1bmN0aW9uKGEpe2lmKGEubWF0Y2goL15bXi5dK1wuW14uXStcLihbXi5dKykkLyk9PW51bGwpe3Rocm93IkpXUyBzaWduYXR1cmUgaXMgbm90IGEgZm9ybSBvZiAnSGVhZC5QYXlsb2FkLlNpZ1ZhbHVlJy4ifXJldHVybiBSZWdFeHAuJDF9O0tKVVIuandzLkpXUy5nZXRKV0t0aHVtYnByaW50PWZ1bmN0aW9uKGQpe2lmKGQua3R5IT09IlJTQSImJmQua3R5IT09IkVDIiYmZC5rdHkhPT0ib2N0Iil7dGhyb3cidW5zdXBwb3J0ZWQgYWxnb3JpdGhtIGZvciBKV0sgVGh1bXByaW50In12YXIgYT0ieyI7aWYoZC5rdHk9PT0iUlNBIil7aWYodHlwZW9mIGQubiE9InN0cmluZyJ8fHR5cGVvZiBkLmUhPSJzdHJpbmciKXt0aHJvdyJ3cm9uZyBuIGFuZCBlIHZhbHVlIGZvciBSU0Ega2V5In1hKz0nImUiOiInK2QuZSsnIiwnO2ErPScia3R5IjoiJytkLmt0eSsnIiwnO2ErPScibiI6IicrZC5uKycifSd9ZWxzZXtpZihkLmt0eT09PSJFQyIpe2lmKHR5cGVvZiBkLmNydiE9InN0cmluZyJ8fHR5cGVvZiBkLnghPSJzdHJpbmcifHx0eXBlb2YgZC55IT0ic3RyaW5nIil7dGhyb3cid3JvbmcgY3J2LCB4IGFuZCB5IHZhbHVlIGZvciBFQyBrZXkifWErPSciY3J2IjoiJytkLmNydisnIiwnO2ErPScia3R5IjoiJytkLmt0eSsnIiwnO2ErPScieCI6IicrZC54KyciLCc7YSs9JyJ5IjoiJytkLnkrJyJ9J31lbHNle2lmKGQua3R5PT09Im9jdCIpe2lmKHR5cGVvZiBkLmshPSJzdHJpbmciKXt0aHJvdyJ3cm9uZyBrIHZhbHVlIGZvciBvY3Qoc3ltbWV0cmljKSBrZXkifWErPScia3R5IjoiJytkLmt0eSsnIiwnO2ErPSciayI6IicrZC5rKycifSd9fX12YXIgYj1yc3RydG9oZXgoYSk7dmFyIGM9S0pVUi5jcnlwdG8uVXRpbC5oYXNoSGV4KGIsInNoYTI1NiIpO3ZhciBlPWhleHRvYjY0dShjKTtyZXR1cm4gZX07S0pVUi5qd3MuSW50RGF0ZT17fTtLSlVSLmp3cy5JbnREYXRlLmdldD1mdW5jdGlvbihhKXtpZihhPT0ibm93Iil7cmV0dXJuIEtKVVIuandzLkludERhdGUuZ2V0Tm93KCl9ZWxzZXtpZihhPT0ibm93ICsgMWhvdXIiKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKSs2MCo2MH1lbHNle2lmKGE9PSJub3cgKyAxZGF5Iil7cmV0dXJuIEtKVVIuandzLkludERhdGUuZ2V0Tm93KCkrNjAqNjAqMjR9ZWxzZXtpZihhPT0ibm93ICsgMW1vbnRoIil7cmV0dXJuIEtKVVIuandzLkludERhdGUuZ2V0Tm93KCkrNjAqNjAqMjQqMzB9ZWxzZXtpZihhPT0ibm93ICsgMXllYXIiKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKSs2MCo2MCoyNCozNjV9ZWxzZXtpZihhLm1hdGNoKC9aJC8pKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXRadWx1KGEpfWVsc2V7aWYoYS5tYXRjaCgvXlswLTldKyQvKSl7cmV0dXJuIHBhcnNlSW50KGEpfX19fX19fXRocm93InVuc3VwcG9ydGVkIGZvcm1hdDogIithfTtLSlVSLmp3cy5JbnREYXRlLmdldFp1bHU9ZnVuY3Rpb24obCl7dmFyIGs7aWYoaz1sLm1hdGNoKC8oXGQrKShcZFxkKShcZFxkKShcZFxkKShcZFxkKShcZFxkKVovKSl7dmFyIGI9UmVnRXhwLiQxO3ZhciBpPXBhcnNlSW50KGIpO2lmKGIubGVuZ3RoPT00KXt9ZWxzZXtpZihiLmxlbmd0aD09Mil7aWYoNTA8PWkmJmk8MTAwKXtpPTE5MDAraX1lbHNle2lmKDA8PWkmJmk8NTApe2k9MjAwMCtpfWVsc2V7dGhyb3cibWFsZm9ybWVkIHllYXIgc3RyaW5nIGZvciBVVENUaW1lIn19fWVsc2V7dGhyb3cibWFsZm9ybWVkIHllYXIgc3RyaW5nIn19dmFyIGc9cGFyc2VJbnQoUmVnRXhwLiQyKS0xO3ZhciBqPXBhcnNlSW50KFJlZ0V4cC4kMyk7dmFyIGM9cGFyc2VJbnQoUmVnRXhwLiQ0KTt2YXIgZT1wYXJzZUludChSZWdFeHAuJDUpO3ZhciBmPXBhcnNlSW50KFJlZ0V4cC4kNik7dmFyIGg9bmV3IERhdGUoRGF0ZS5VVEMoaSxnLGosYyxlLGYpKTtyZXR1cm4gfn4oaC8xMDAwKX10aHJvdyJ1bnN1cHBvcnRlZCBmb3JtYXQ6ICIrbH07S0pVUi5qd3MuSW50RGF0ZS5nZXROb3c9ZnVuY3Rpb24oKXt2YXIgYT1+fihuZXcgRGF0ZSgpLzEwMDApO3JldHVybiBhfTtLSlVSLmp3cy5JbnREYXRlLmludERhdGUyVVRDU3RyaW5nPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBEYXRlKGEqMTAwMCk7cmV0dXJuIGIudG9VVENTdHJpbmcoKX07S0pVUi5qd3MuSW50RGF0ZS5pbnREYXRlMlp1bHU9ZnVuY3Rpb24oZSl7dmFyIGk9bmV3IERhdGUoZSoxMDAwKTt2YXIgaD0oIjAwMDAiK2kuZ2V0VVRDRnVsbFllYXIoKSkuc2xpY2UoLTQpO3ZhciBnPSgiMDAiKyhpLmdldFVUQ01vbnRoKCkrMSkpLnNsaWNlKC0yKTt2YXIgYj0oIjAwIitpLmdldFVUQ0RhdGUoKSkuc2xpY2UoLTIpO3ZhciBhPSgiMDAiK2kuZ2V0VVRDSG91cnMoKSkuc2xpY2UoLTIpO3ZhciBjPSgiMDAiK2kuZ2V0VVRDTWludXRlcygpKS5zbGljZSgtMik7dmFyIGY9KCIwMCIraS5nZXRVVENTZWNvbmRzKCkpLnNsaWNlKC0yKTtyZXR1cm4gaCtnK2IrYStjK2YrIloifTsKLyohIGp3c2pzLTIuMC4xIChjKSAyMDEwLTIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNqd3MvbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5qd3M9PSJ1bmRlZmluZWQifHwhS0pVUi5qd3Mpe0tKVVIuandzPXt9fUtKVVIuandzLkpXU0pTPWZ1bmN0aW9uKCl7dmFyIGE9S0pVUi5qd3MuSldTO3RoaXMuYUhlYWRlcj1bXTt0aGlzLnNQYXlsb2FkPSIiO3RoaXMuYVNpZ25hdHVyZT1bXTt0aGlzLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmFIZWFkZXI9W107dGhpcy5zUGF5bG9hZD0iIjt0aGlzLmFTaWduYXR1cmU9W119O3RoaXMuaW5pdFdpdGhKV1M9ZnVuY3Rpb24oYyl7dGhpcy5pbml0KCk7dmFyIGI9bmV3IEtKVVIuandzLkpXUygpO2IucGFyc2VKV1MoYyk7dGhpcy5hSGVhZGVyLnB1c2goYi5wYXJzZWRKV1MuaGVhZEI2NFUpO3RoaXMuc1BheWxvYWQ9Yi5wYXJzZWRKV1MucGF5bG9hZEI2NFU7dGhpcy5hU2lnbmF0dXJlLnB1c2goYi5wYXJzZWRKV1Muc2lndmFsQjY0VSl9O3RoaXMuYWRkU2lnbmF0dXJlQnlIZWFkZXJLZXk9ZnVuY3Rpb24oZSxiKXt2YXIgZD1iNjR1dG91dGY4KHRoaXMuc1BheWxvYWQpO3ZhciBjPW5ldyBLSlVSLmp3cy5KV1MoKTt2YXIgZj1jLmdlbmVyYXRlSldTQnlQMVBydktleShlLGQsYik7dGhpcy5hSGVhZGVyLnB1c2goYy5wYXJzZWRKV1MuaGVhZEI2NFUpO3RoaXMuYVNpZ25hdHVyZS5wdXNoKGMucGFyc2VkSldTLnNpZ3ZhbEI2NFUpfTt0aGlzLmFkZFNpZ25hdHVyZUJ5SGVhZGVyUGF5bG9hZEtleT1mdW5jdGlvbihlLGQsYil7dmFyIGM9bmV3IEtKVVIuandzLkpXUygpO3ZhciBmPWMuZ2VuZXJhdGVKV1NCeVAxUHJ2S2V5KGUsZCxiKTt0aGlzLmFIZWFkZXIucHVzaChjLnBhcnNlZEpXUy5oZWFkQjY0VSk7dGhpcy5zUGF5bG9hZD1jLnBhcnNlZEpXUy5wYXlsb2FkQjY0VTt0aGlzLmFTaWduYXR1cmUucHVzaChjLnBhcnNlZEpXUy5zaWd2YWxCNjRVKX07dGhpcy52ZXJpZnlXaXRoQ2VydHM9ZnVuY3Rpb24oYyl7aWYodGhpcy5hSGVhZGVyLmxlbmd0aCE9Yy5sZW5ndGgpe3Rocm93Im51bSBoZWFkZXJzIGRvZXMgbm90IG1hdGNoIHdpdGggbnVtIGNlcnRzIn1pZih0aGlzLmFTaWduYXR1cmUubGVuZ3RoIT1jLmxlbmd0aCl7dGhyb3cibnVtIHNpZ25hdHVyZXMgZG9lcyBub3QgbWF0Y2ggd2l0aCBudW0gY2VydHMifXZhciBrPXRoaXMuc1BheWxvYWQ7dmFyIGc9IiI7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF07dmFyIGY9dGhpcy5hSGVhZGVyW2RdO3ZhciBtPXRoaXMuYVNpZ25hdHVyZVtkXTt2YXIgYj1mKyIuIitrKyIuIittO3ZhciBqPW5ldyBLSlVSLmp3cy5KV1MoKTt0cnl7dmFyIGw9ai52ZXJpZnlKV1NCeVBlbVg1MDlDZXJ0KGIsZSk7aWYobCE9MSl7Zys9KGQrMSkrInRoIHNpZ25hdHVyZSB1bm1hdGNoLiAifX1jYXRjaChoKXtnKz0oZCsxKSsidGggc2lnbmF0dXJlIGZhaWwoIitoKyIpLiAifX1pZihnPT0iIil7cmV0dXJuIDF9ZWxzZXt0aHJvdyBnfX07dGhpcy5yZWFkSldTSlM9ZnVuY3Rpb24oYil7dmFyIGM9YS5yZWFkU2FmZUpTT05TdHJpbmcoYik7aWYoYz09bnVsbCl7dGhyb3ciYXJndW1lbnQgaXMgbm90IEpTT04gc3RyaW5nOiAiK2J9dGhpcy5hSGVhZGVyPWMuaGVhZGVyczt0aGlzLnNQYXlsb2FkPWMucGF5bG9hZDt0aGlzLmFTaWduYXR1cmU9Yy5zaWduYXR1cmVzfTt0aGlzLmdldEpTT049ZnVuY3Rpb24oKXtyZXR1cm57aGVhZGVyczp0aGlzLmFIZWFkZXIscGF5bG9hZDp0aGlzLnNQYXlsb2FkLHNpZ25hdHVyZXM6dGhpcy5hU2lnbmF0dXJlfX07dGhpcy5pc0VtcHR5PWZ1bmN0aW9uKCl7aWYodGhpcy5hSGVhZGVyLmxlbmd0aD09MCl7cmV0dXJuIDF9cmV0dXJuIDB9fTsKLyohIG5vZGV1dGlsLTEuMC4wIChjKSAyMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwpmdW5jdGlvbiByZWFkRmlsZVVURjgoYSl7cmV0dXJuIHJlcXVpcmUoImZzIikucmVhZEZpbGVTeW5jKGEsInV0ZjgiKX1mdW5jdGlvbiByZWFkRmlsZUhleEJ5QmluKGMpe3ZhciBiPXJlcXVpcmUoImpzcnNhc2lnbiIpO3ZhciBhPXJlcXVpcmUoImZzIik7cmV0dXJuIGIucnN0cnRvaGV4KGEucmVhZEZpbGVTeW5jKGMsImJpbmFyeSIpKX1mdW5jdGlvbiByZWFkRmlsZShiKXt2YXIgYT1yZXF1aXJlKCJmcyIpO3JldHVybiBhLnJlYWRGaWxlU3luYyhiLCJiaW5hcnkiKX1mdW5jdGlvbiBzYXZlRmlsZShjLGIpe3ZhciBhPXJlcXVpcmUoImZzIik7YS53cml0ZUZpbGVTeW5jKGMsYiwiYmluYXJ5Iil9ZnVuY3Rpb24gc2F2ZUZpbGVCaW5CeUhleChlLGIpe3ZhciBhPXJlcXVpcmUoImZzIik7dmFyIGM9cmVxdWlyZSgianNyc2FzaWduIik7dmFyIGQ9Yy5oZXh0b3JzdHIoYik7YS53cml0ZUZpbGVTeW5jKGUsZCwiYmluYXJ5Iil9OwpleHBvcnRzLlNlY3VyZVJhbmRvbSA9IFNlY3VyZVJhbmRvbTsKZXhwb3J0cy5ybmdfc2VlZF90aW1lID0gcm5nX3NlZWRfdGltZTsKCmV4cG9ydHMuQmlnSW50ZWdlciA9IEJpZ0ludGVnZXI7CmV4cG9ydHMuUlNBS2V5ID0gUlNBS2V5OwpleHBvcnRzLkVDRFNBID0gS0pVUi5jcnlwdG8uRUNEU0E7CmV4cG9ydHMuRFNBID0gS0pVUi5jcnlwdG8uRFNBOwpleHBvcnRzLlNpZ25hdHVyZSA9IEtKVVIuY3J5cHRvLlNpZ25hdHVyZTsKZXhwb3J0cy5NZXNzYWdlRGlnZXN0ID0gS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdDsKZXhwb3J0cy5NYWMgPSBLSlVSLmNyeXB0by5NYWM7CmV4cG9ydHMuS0VZVVRJTCA9IEtFWVVUSUw7CmV4cG9ydHMuQVNOMUhFWCA9IEFTTjFIRVg7CmV4cG9ydHMuWDUwOSA9IFg1MDk7CmV4cG9ydHMuQ3J5cHRvSlMgPSBDcnlwdG9KUzsKCi8vIGV4dC9iYXNlNjQuanMKZXhwb3J0cy5iNjR0b2hleCA9IGI2NHRvaGV4OwpleHBvcnRzLmI2NHRvQkEgPSBiNjR0b0JBOwoKLy8gYmFzZTY0eC5qcwpleHBvcnRzLnN0b0JBID0gc3RvQkE7CmV4cG9ydHMuQkF0b3MgPSBCQXRvczsKZXhwb3J0cy5CQXRvaGV4ID0gQkF0b2hleDsKZXhwb3J0cy5zdG9oZXggPSBzdG9oZXg7CmV4cG9ydHMuc3RvYjY0ID0gc3RvYjY0OwpleHBvcnRzLnN0b2I2NHUgPSBzdG9iNjR1OwpleHBvcnRzLmI2NHV0b3MgPSBiNjR1dG9zOwpleHBvcnRzLmI2NHRvYjY0dSA9IGI2NHRvYjY0dTsKZXhwb3J0cy5iNjR1dG9iNjQgPSBiNjR1dG9iNjQ7CmV4cG9ydHMuaGV4MmI2NCA9IGhleDJiNjQ7CmV4cG9ydHMuaGV4dG9iNjR1ID0gaGV4dG9iNjR1OwpleHBvcnRzLmI2NHV0b2hleCA9IGI2NHV0b2hleDsKZXhwb3J0cy5iNjR0b2hleCA9IGI2NHRvaGV4OwpleHBvcnRzLnV0Zjh0b2I2NHUgPSB1dGY4dG9iNjR1OwpleHBvcnRzLmI2NHV0b3V0ZjggPSBiNjR1dG91dGY4OwpleHBvcnRzLnV0Zjh0b2I2NCA9IHV0Zjh0b2I2NDsKZXhwb3J0cy5iNjR0b3V0ZjggPSBiNjR0b3V0Zjg7CmV4cG9ydHMudXRmOHRvaGV4ID0gdXRmOHRvaGV4OwpleHBvcnRzLmhleHRvdXRmOCA9IGhleHRvdXRmODsKZXhwb3J0cy5oZXh0b3JzdHIgPSBoZXh0b3JzdHI7CmV4cG9ydHMucnN0cnRvaGV4ID0gcnN0cnRvaGV4OwpleHBvcnRzLm5ld2xpbmVfdG9Vbml4ID0gbmV3bGluZV90b1VuaXg7CmV4cG9ydHMubmV3bGluZV90b0RvcyA9IG5ld2xpbmVfdG9Eb3M7CmV4cG9ydHMuaW50YXJ5c3RydG9oZXggPSBpbnRhcnlzdHJ0b2hleDsKZXhwb3J0cy5zdHJkaWZmaWR4ID0gc3RyZGlmZmlkeDsKCmV4cG9ydHMuY3J5cHRvID0gS0pVUi5jcnlwdG87CmV4cG9ydHMuYXNuMSA9IEtKVVIuYXNuMTsKZXhwb3J0cy5qd3MgPSBLSlVSLmp3czsKCmV4cG9ydHMucmVhZEZpbGVVVEY4ID0gcmVhZEZpbGVVVEY4OwpleHBvcnRzLnJlYWRGaWxlSGV4QnlCaW4gPSByZWFkRmlsZUhleEJ5QmluOwpleHBvcnRzLnJlYWRGaWxlID0gcmVhZEZpbGU7CmV4cG9ydHMuc2F2ZUZpbGUgPSBzYXZlRmlsZTsKZXhwb3J0cy5zYXZlRmlsZUJpbkJ5SGV4ID0gc2F2ZUZpbGVCaW5CeUhleDsKCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo1MDQsImZzIjo1MDEsImpzcnNhc2lnbiI6NzI3fV0sNzI4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7Ci8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKLy8gRGlzdHJpYnV0aW9uIGZpbGUgZm9yIE1lc3NhZ2VGYWN0b3J5LmpzIAovLyB2ZXJzaW9uOiAwLjMuMAovLyBMYXN0IGJ1aWxkOiBXZWQgSnVuIDI5IDIwMTYgMTg6MTg6MzIgR01UKzAxMDAgKFdFU1QpCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuTWVzc2FnZUZhY3Rvcnk9ZSgpfX0oZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gZnVuY3Rpb24gdChlLHIsbil7ZnVuY3Rpb24gbyhhLHMpe2lmKCFyW2FdKXtpZighZVthXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIXMmJnUpcmV0dXJuIHUoYSwhMCk7aWYoaSlyZXR1cm4gaShhLCEwKTt2YXIgbD1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIithKyInIik7dGhyb3cgbC5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixsfXZhciBjPXJbYV09e2V4cG9ydHM6e319O2VbYV1bMF0uY2FsbChjLmV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIHI9ZVthXVsxXVt0XTtyZXR1cm4gbyhyP3I6dCl9LGMsYy5leHBvcnRzLHQsZSxyLG4pfXJldHVybiByW2FdLmV4cG9ydHN9Zm9yKHZhciBpPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGE9MDthPG4ubGVuZ3RoO2ErKylvKG5bYV0pO3JldHVybiBvfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjE3fV0sMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjE4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZnJlZXplIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9mcmVlemUiOjE5fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjIwfV0sNTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjF9XSw2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzIjoyMn1dLDc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjIzfV0sODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIjoyNH1dLDk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sL2l0ZXJhdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvciI6MjV9XSwxMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGk9bihvKSxhPWUoIi4uL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLHM9bihhKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24gdShlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAsc1siZGVmYXVsdCJdKShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBvPSgwLGlbImRlZmF1bHQiXSkoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp1KG8sdCxyKX1pZigidmFsdWUiaW4gbilyZXR1cm4gbi52YWx1ZTt2YXIgYT1uLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwocil9fSx7Ii4uL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NCwiLi4vY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NX1dLDEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxpPW4obyksYT1lKCIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiKSxzPW4oYSksdT1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGw9bih1KTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiKygidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsbFsiZGVmYXVsdCJdKSh0KSkpO2UucHJvdG90eXBlPSgwLHNbImRlZmF1bHQiXSkodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihpWyJkZWZhdWx0Il0/KDAsaVsiZGVmYXVsdCJdKShlLHQpOmUuX19wcm90b19fPXQpfX0seyIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjEsIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjcsIi4uL2hlbHBlcnMvdHlwZW9mIjoxNX1dLDE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2hlbHBlcnMvdHlwZW9mIiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxpWyJkZWZhdWx0Il0pKHQpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fX0seyIuLi9oZWxwZXJzL3R5cGVvZiI6MTV9XSwxNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fXIuX19lc01vZHVsZT0hMDt2YXIgbz1lKCIuLi9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvciIpLGk9bihvKSxhPWUoIi4uL2NvcmUtanMvc3ltYm9sIikscz1uKGEpLHU9ImZ1bmN0aW9uIj09dHlwZW9mIHNbImRlZmF1bHQiXSYmInN5bWJvbCI9PXR5cGVvZiBpWyJkZWZhdWx0Il0/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbImRlZmF1bHQiXSYmZS5jb25zdHJ1Y3Rvcj09PXNbImRlZmF1bHQiXT8ic3ltYm9sIjp0eXBlb2YgZX07clsiZGVmYXVsdCJdPSJmdW5jdGlvbiI9PXR5cGVvZiBzWyJkZWZhdWx0Il0mJiJzeW1ib2wiPT09dShpWyJkZWZhdWx0Il0pP2Z1bmN0aW9uKGUpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjp1KGUpfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbImRlZmF1bHQiXSYmZS5jb25zdHJ1Y3Rvcj09PXNbImRlZmF1bHQiXT8ic3ltYm9sIjoidW5kZWZpbmVkIj09dHlwZW9mIGU/InVuZGVmaW5lZCI6dShlKX19LHsiLi4vY29yZS1qcy9zeW1ib2wiOjgsIi4uL2NvcmUtanMvc3ltYm9sL2l0ZXJhdG9yIjo5fV0sMTY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgicmVnZW5lcmF0b3ItcnVudGltZSIpfSx7InJlZ2VuZXJhdG9yLXJ1bnRpbWUiOjk4fV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuY3JlYXRlIik7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5jcmVhdGUiOjg1fV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZGVmaW5lLXByb3BlcnR5Iik7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOjg2fV0sMTk6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZnJlZXplIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvX2NvcmUiKS5PYmplY3QuZnJlZXplfSx7Ii4uLy4uL21vZHVsZXMvX2NvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZnJlZXplIjo4N31dLDIwOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpO3ZhciBuPWUoIi4uLy4uL21vZHVsZXMvX2NvcmUiKS5PYmplY3Q7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCl9fSx7Ii4uLy4uL21vZHVsZXMvX2NvcmUiOjMxLCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjo4OH1dLDIxOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzL19jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiOjg5fV0sMjI6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzL19jb3JlIikuT2JqZWN0LmtleXN9LHsiLi4vLi4vbW9kdWxlcy9fY29yZSI6MzEsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjo5MH1dLDIzOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLk9iamVjdC5zZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzL19jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnNldC1wcm90b3R5cGUtb2YiOjkxfV0sMjQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiKSxlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksZSgiLi4vLi4vbW9kdWxlcy9lczcuc3ltYm9sLmFzeW5jLWl0ZXJhdG9yIiksZSgiLi4vLi4vbW9kdWxlcy9lczcuc3ltYm9sLm9ic2VydmFibGUiKSx0LmV4cG9ydHM9ZSgiLi4vLi4vbW9kdWxlcy9fY29yZSIpLlN5bWJvbH0seyIuLi8uLi9tb2R1bGVzL19jb3JlIjozMSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6OTIsIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCI6OTQsIi4uLy4uL21vZHVsZXMvZXM3LnN5bWJvbC5hc3luYy1pdGVyYXRvciI6OTUsIi4uLy4uL21vZHVsZXMvZXM3LnN5bWJvbC5vYnNlcnZhYmxlIjo5Nn1dLDI1OltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIiksZSgiLi4vLi4vbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvX3drcy1leHQiKS5mKCJpdGVyYXRvciIpfSx7Ii4uLy4uL21vZHVsZXMvX3drcy1leHQiOjgyLCIuLi8uLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjkzLCIuLi8uLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjk3fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LHt9XSwyNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LHt9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2lzLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGV9fSx7Ii4vX2lzLW9iamVjdCI6NDd9XSwyOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3RvLWlvYmplY3QiKSxvPWUoIi4vX3RvLWxlbmd0aCIpLGk9ZSgiLi9fdG8taW5kZXgiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixhKXt2YXIgcyx1PW4odCksbD1vKHUubGVuZ3RoKSxjPWkoYSxsKTtpZihlJiZyIT1yKXtmb3IoO2w+YzspaWYocz11W2MrK10scyE9cylyZXR1cm4hMH1lbHNlIGZvcig7bD5jO2MrKylpZigoZXx8YyBpbiB1KSYmdVtjXT09PXIpcmV0dXJuIGV8fGN8fDA7cmV0dXJuIWUmJi0xfX19LHsiLi9fdG8taW5kZXgiOjc0LCIuL190by1pb2JqZWN0Ijo3NiwiLi9fdG8tbGVuZ3RoIjo3N31dLDMwOltmdW5jdGlvbihlLHQscil7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjIuNC4wIn07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2EtZnVuY3Rpb24iKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LHsiLi9fYS1mdW5jdGlvbiI6MjZ9XSwzMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PWUpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIitlKTtyZXR1cm4gZX19LHt9XSwzNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hZSgiLi9fZmFpbHMiKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi9fZmFpbHMiOjM5fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19pcy1vYmplY3QiKSxvPWUoIi4vX2dsb2JhbCIpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSx7Ii4vX2dsb2JhbCI6NDAsIi4vX2lzLW9iamVjdCI6NDd9XSwzNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0iY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mIi5zcGxpdCgiLCIpfSx7fV0sMzc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3Qta2V5cyIpLG89ZSgiLi9fb2JqZWN0LWdvcHMiKSxpPWUoIi4vX29iamVjdC1waWUiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bihlKSxyPW8uZjtpZihyKWZvcih2YXIgYSxzPXIoZSksdT1pLmYsbD0wO3MubGVuZ3RoPmw7KXUuY2FsbChlLGE9c1tsKytdKSYmdC5wdXNoKGEpO3JldHVybiB0fX0seyIuL19vYmplY3QtZ29wcyI6NjEsIi4vX29iamVjdC1rZXlzIjo2NCwiLi9fb2JqZWN0LXBpZSI6NjV9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2dsb2JhbCIpLG89ZSgiLi9fY29yZSIpLGk9ZSgiLi9fY3R4IiksYT1lKCIuL19oaWRlIikscz0icHJvdG90eXBlIix1PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbCxjLGYscD1lJnUuRixkPWUmdS5HLGg9ZSZ1LlMseT1lJnUuUCxtPWUmdS5CLHY9ZSZ1LlcsXz1kP286b1t0XXx8KG9bdF09e30pLGI9X1tzXSxnPWQ/bjpoP25bdF06KG5bdF18fHt9KVtzXTtkJiYocj10KTtmb3IobCBpbiByKWM9IXAmJmcmJnZvaWQgMCE9PWdbbF0sYyYmbCBpbiBffHwoZj1jP2dbbF06cltsXSxfW2xdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBnW2xdP3JbbF06bSYmYz9pKGYsbik6diYmZ1tsXT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0LHIsbil7aWYodGhpcyBpbnN0YW5jZW9mIGUpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyBlO2Nhc2UgMTpyZXR1cm4gbmV3IGUodCk7Y2FzZSAyOnJldHVybiBuZXcgZSh0LHIpfXJldHVybiBuZXcgZSh0LHIsbil9cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gdFtzXT1lW3NdLHR9KGYpOnkmJiJmdW5jdGlvbiI9PXR5cGVvZiBmP2koRnVuY3Rpb24uY2FsbCxmKTpmLHkmJigoXy52aXJ0dWFsfHwoXy52aXJ0dWFsPXt9KSlbbF09ZixlJnUuUiYmYiYmIWJbbF0mJmEoYixsLGYpKSl9O3UuRj0xLHUuRz0yLHUuUz00LHUuUD04LHUuQj0xNix1Llc9MzIsdS5VPTY0LHUuUj0xMjgsdC5leHBvcnRzPXV9LHsiLi9fY29yZSI6MzEsIi4vX2N0eCI6MzIsIi4vX2dsb2JhbCI6NDAsIi4vX2hpZGUiOjQyfV0sMzk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKHQpe3JldHVybiEwfX19LHt9XSw0MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDQyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LWRwIiksbz1lKCIuL19wcm9wZXJ0eS1kZXNjIik7dC5leHBvcnRzPWUoIi4vX2Rlc2NyaXB0b3JzIik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmYoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSx7Ii4vX2Rlc2NyaXB0b3JzIjozNCwiLi9fb2JqZWN0LWRwIjo1NiwiLi9fcHJvcGVydHktZGVzYyI6Njd9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuL19nbG9iYWwiKS5kb2N1bWVudCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fSx7Ii4vX2dsb2JhbCI6NDB9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hZSgiLi9fZGVzY3JpcHRvcnMiKSYmIWUoIi4vX2ZhaWxzIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUoIi4vX2RvbS1jcmVhdGUiKSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LHsiLi9fZGVzY3JpcHRvcnMiOjM0LCIuL19kb20tY3JlYXRlIjozNSwiLi9fZmFpbHMiOjM5fV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19jb2YiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LHsiLi9fY29mIjozMH1dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fY29mIik7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSx7Ii4vX2NvZiI6MzB9XSw0NzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/bnVsbCE9PWU6ImZ1bmN0aW9uIj09dHlwZW9mIGV9fSx7fV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi9fb2JqZWN0LWNyZWF0ZSIpLG89ZSgiLi9fcHJvcGVydHktZGVzYyIpLGk9ZSgiLi9fc2V0LXRvLXN0cmluZy10YWciKSxhPXt9O2UoIi4vX2hpZGUiKShhLGUoIi4vX3drcyIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4oYSx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSx7Ii4vX2hpZGUiOjQyLCIuL19vYmplY3QtY3JlYXRlIjo1NSwiLi9fcHJvcGVydHktZGVzYyI6NjcsIi4vX3NldC10by1zdHJpbmctdGFnIjo3MCwiLi9fd2tzIjo4M31dLDQ5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vX2xpYnJhcnkiKSxvPWUoIi4vX2V4cG9ydCIpLGk9ZSgiLi9fcmVkZWZpbmUiKSxhPWUoIi4vX2hpZGUiKSxzPWUoIi4vX2hhcyIpLHU9ZSgiLi9faXRlcmF0b3JzIiksbD1lKCIuL19pdGVyLWNyZWF0ZSIpLGM9ZSgiLi9fc2V0LXRvLXN0cmluZy10YWciKSxmPWUoIi4vX29iamVjdC1ncG8iKSxwPWUoIi4vX3drcyIpKCJpdGVyYXRvciIpLGQ9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSksaD0iQEBpdGVyYXRvciIseT0ia2V5cyIsbT0idmFsdWVzIix2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixfLGIsZyxFKXtsKHIsdCxfKTt2YXIgaix3LE8sTT1mdW5jdGlvbihlKXtpZighZCYmZSBpbiBSKXJldHVybiBSW2VdO3N3aXRjaChlKXtjYXNlIHk6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9O2Nhc2UgbTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSx4PXQrIiBJdGVyYXRvciIsUD1iPT1tLGs9ITEsUj1lLnByb3RvdHlwZSxTPVJbcF18fFJbaF18fGImJlJbYl0sQT1TfHxNKGIpLFQ9Yj9QP00oImVudHJpZXMiKTpBOnZvaWQgMCxOPSJBcnJheSI9PXQ/Ui5lbnRyaWVzfHxTOlM7aWYoTiYmKE89ZihOLmNhbGwobmV3IGUpKSxPIT09T2JqZWN0LnByb3RvdHlwZSYmKGMoTyx4LCEwKSxufHxzKE8scCl8fGEoTyxwLHYpKSksUCYmUyYmUy5uYW1lIT09bSYmKGs9ITAsQT1mdW5jdGlvbigpe3JldHVybiBTLmNhbGwodGhpcyl9KSxuJiYhRXx8IWQmJiFrJiZSW3BdfHxhKFIscCxBKSx1W3RdPUEsdVt4XT12LGIpaWYoaj17dmFsdWVzOlA/QTpNKG0pLGtleXM6Zz9BOk0oeSksZW50cmllczpUfSxFKWZvcih3IGluIGopdyBpbiBSfHxpKFIsdyxqW3ddKTtlbHNlIG8oby5QK28uRiooZHx8ayksdCxqKTtyZXR1cm4gan19LHsiLi9fZXhwb3J0IjozOCwiLi9faGFzIjo0MSwiLi9faGlkZSI6NDIsIi4vX2l0ZXItY3JlYXRlIjo0OCwiLi9faXRlcmF0b3JzIjo1MSwiLi9fbGlicmFyeSI6NTMsIi4vX29iamVjdC1ncG8iOjYyLCIuL19yZWRlZmluZSI6NjgsIi4vX3NldC10by1zdHJpbmctdGFnIjo3MCwiLi9fd2tzIjo4M31dLDUwOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0se31dLDUxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXt9fSx7fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3Qta2V5cyIpLG89ZSgiLi9fdG8taW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixpPW8oZSksYT1uKGkpLHM9YS5sZW5ndGgsdT0wO3M+dTspaWYoaVtyPWFbdSsrXV09PT10KXJldHVybiByfX0seyIuL19vYmplY3Qta2V5cyI6NjQsIi4vX3RvLWlvYmplY3QiOjc2fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ITB9LHt9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3VpZCIpKCJtZXRhIiksbz1lKCIuL19pcy1vYmplY3QiKSxpPWUoIi4vX2hhcyIpLGE9ZSgiLi9fb2JqZWN0LWRwIikuZixzPTAsdT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxsPSFlKCIuL19mYWlscyIpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxjPWZ1bmN0aW9uKGUpe2EoZSxuLHt2YWx1ZTp7aToiTyIrICsrcyx3Ont9fX0pfSxmPWZ1bmN0aW9uKGUsdCl7aWYoIW8oZSkpcmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlP2U6KCJzdHJpbmciPT10eXBlb2YgZT8iUyI6IlAiKStlO2lmKCFpKGUsbikpe2lmKCF1KGUpKXJldHVybiJGIjtpZighdClyZXR1cm4iRSI7YyhlKX1yZXR1cm4gZVtuXS5pfSxwPWZ1bmN0aW9uKGUsdCl7aWYoIWkoZSxuKSl7aWYoIXUoZSkpcmV0dXJuITA7aWYoIXQpcmV0dXJuITE7YyhlKX1yZXR1cm4gZVtuXS53fSxkPWZ1bmN0aW9uKGUpe3JldHVybiBsJiZoLk5FRUQmJnUoZSkmJiFpKGUsbikmJmMoZSksZX0saD10LmV4cG9ydHM9e0tFWTpuLE5FRUQ6ITEsZmFzdEtleTpmLGdldFdlYWs6cCxvbkZyZWV6ZTpkfX0seyIuL19mYWlscyI6MzksIi4vX2hhcyI6NDEsIi4vX2lzLW9iamVjdCI6NDcsIi4vX29iamVjdC1kcCI6NTYsIi4vX3VpZCI6ODB9XSw1NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2FuLW9iamVjdCIpLG89ZSgiLi9fb2JqZWN0LWRwcyIpLGk9ZSgiLi9fZW51bS1idWcta2V5cyIpLGE9ZSgiLi9fc2hhcmVkLWtleSIpKCJJRV9QUk9UTyIpLHM9ZnVuY3Rpb24oKXt9LHU9InByb3RvdHlwZSIsbD1mdW5jdGlvbigpe3ZhciB0LHI9ZSgiLi9fZG9tLWNyZWF0ZSIpKCJpZnJhbWUiKSxuPWkubGVuZ3RoLG89Ij4iO2ZvcihyLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGUoIi4vX2h0bWwiKS5hcHBlbmRDaGlsZChyKSxyLnNyYz0iamF2YXNjcmlwdDoiLHQ9ci5jb250ZW50V2luZG93LmRvY3VtZW50LHQub3BlbigpLHQud3JpdGUoIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8L3NjcmlwdCIrbyksdC5jbG9zZSgpLGw9dC5GO24tLTspZGVsZXRlIGxbdV1baVtuXV07cmV0dXJuIGwoKX07dC5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIG51bGwhPT1lPyhzW3VdPW4oZSkscj1uZXcgcyxzW3VdPW51bGwsclthXT1lKTpyPWwoKSx2b2lkIDA9PT10P3I6byhyLHQpfX0seyIuL19hbi1vYmplY3QiOjI4LCIuL19kb20tY3JlYXRlIjozNSwiLi9fZW51bS1idWcta2V5cyI6MzYsIi4vX2h0bWwiOjQzLCIuL19vYmplY3QtZHBzIjo1NywiLi9fc2hhcmVkLWtleSI6NzF9XSw1NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2FuLW9iamVjdCIpLG89ZSgiLi9faWU4LWRvbS1kZWZpbmUiKSxpPWUoIi4vX3RvLXByaW1pdGl2ZSIpLGE9T2JqZWN0LmRlZmluZVByb3BlcnR5O3IuZj1lKCIuL19kZXNjcmlwdG9ycyIpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7aWYobihlKSx0PWkodCwhMCksbihyKSxvKXRyeXtyZXR1cm4gYShlLHQscil9Y2F0Y2gocyl7fWlmKCJnZXQiaW4gcnx8InNldCJpbiByKXRocm93IFR5cGVFcnJvcigiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhIik7cmV0dXJuInZhbHVlImluIHImJihlW3RdPXIudmFsdWUpLGV9fSx7Ii4vX2FuLW9iamVjdCI6MjgsIi4vX2Rlc2NyaXB0b3JzIjozNCwiLi9faWU4LWRvbS1kZWZpbmUiOjQ0LCIuL190by1wcmltaXRpdmUiOjc5fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3QtZHAiKSxvPWUoIi4vX2FuLW9iamVjdCIpLGk9ZSgiLi9fb2JqZWN0LWtleXMiKTt0LmV4cG9ydHM9ZSgiLi9fZGVzY3JpcHRvcnMiKT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbihlLHQpe28oZSk7Zm9yKHZhciByLGE9aSh0KSxzPWEubGVuZ3RoLHU9MDtzPnU7KW4uZihlLHI9YVt1KytdLHRbcl0pO3JldHVybiBlfX0seyIuL19hbi1vYmplY3QiOjI4LCIuL19kZXNjcmlwdG9ycyI6MzQsIi4vX29iamVjdC1kcCI6NTYsIi4vX29iamVjdC1rZXlzIjo2NH1dLDU4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fb2JqZWN0LXBpZSIpLG89ZSgiLi9fcHJvcGVydHktZGVzYyIpLGk9ZSgiLi9fdG8taW9iamVjdCIpLGE9ZSgiLi9fdG8tcHJpbWl0aXZlIikscz1lKCIuL19oYXMiKSx1PWUoIi4vX2llOC1kb20tZGVmaW5lIiksbD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3IuZj1lKCIuL19kZXNjcmlwdG9ycyIpP2w6ZnVuY3Rpb24oZSx0KXtpZihlPWkoZSksdD1hKHQsITApLHUpdHJ5e3JldHVybiBsKGUsdCl9Y2F0Y2gocil7fWlmKHMoZSx0KSlyZXR1cm4gbyghbi5mLmNhbGwoZSx0KSxlW3RdKX19LHsiLi9fZGVzY3JpcHRvcnMiOjM0LCIuL19oYXMiOjQxLCIuL19pZTgtZG9tLWRlZmluZSI6NDQsIi4vX29iamVjdC1waWUiOjY1LCIuL19wcm9wZXJ0eS1kZXNjIjo2NywiLi9fdG8taW9iamVjdCI6NzYsIi4vX3RvLXByaW1pdGl2ZSI6Nzl9XSw1OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3RvLWlvYmplY3QiKSxvPWUoIi4vX29iamVjdC1nb3BuIikuZixpPXt9LnRvU3RyaW5nLGE9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaCh0KXtyZXR1cm4gYS5zbGljZSgpfX07dC5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIGEmJiJbb2JqZWN0IFdpbmRvd10iPT1pLmNhbGwoZSk/cyhlKTpvKG4oZSkpfX0seyIuL19vYmplY3QtZ29wbiI6NjAsIi4vX3RvLWlvYmplY3QiOjc2fV0sNjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3Qta2V5cy1pbnRlcm5hbCIpLG89ZSgiLi9fZW51bS1idWcta2V5cyIpLmNvbmNhdCgibGVuZ3RoIiwicHJvdG90eXBlIik7ci5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLG8pfX0seyIuL19lbnVtLWJ1Zy1rZXlzIjozNiwiLi9fb2JqZWN0LWtleXMtaW50ZXJuYWwiOjYzfV0sNjE6W2Z1bmN0aW9uKGUsdCxyKXtyLmY9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30se31dLDYyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faGFzIiksbz1lKCIuL190by1vYmplY3QiKSxpPWUoIi4vX3NoYXJlZC1rZXkiKSgiSUVfUFJPVE8iKSxhPU9iamVjdC5wcm90b3R5cGU7dC5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSl7cmV0dXJuIGU9byhlKSxuKGUsaSk/ZVtpXToiZnVuY3Rpb24iPT10eXBlb2YgZS5jb25zdHJ1Y3RvciYmZSBpbnN0YW5jZW9mIGUuY29uc3RydWN0b3I/ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6ZSBpbnN0YW5jZW9mIE9iamVjdD9hOm51bGx9fSx7Ii4vX2hhcyI6NDEsIi4vX3NoYXJlZC1rZXkiOjcxLCIuL190by1vYmplY3QiOjc4fV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19oYXMiKSxvPWUoIi4vX3RvLWlvYmplY3QiKSxpPWUoIi4vX2FycmF5LWluY2x1ZGVzIikoITEpLGE9ZSgiLi9fc2hhcmVkLWtleSIpKCJJRV9QUk9UTyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9byhlKSx1PTAsbD1bXTtmb3IociBpbiBzKXIhPWEmJm4ocyxyKSYmbC5wdXNoKHIpO2Zvcig7dC5sZW5ndGg+dTspbihzLHI9dFt1KytdKSYmKH5pKGwscil8fGwucHVzaChyKSk7cmV0dXJuIGx9fSx7Ii4vX2FycmF5LWluY2x1ZGVzIjoyOSwiLi9faGFzIjo0MSwiLi9fc2hhcmVkLWtleSI6NzEsIi4vX3RvLWlvYmplY3QiOjc2fV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3Qta2V5cy1pbnRlcm5hbCIpLG89ZSgiLi9fZW51bS1idWcta2V5cyIpO3QuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSxvKX19LHsiLi9fZW51bS1idWcta2V5cyI6MzYsIi4vX29iamVjdC1rZXlzLWludGVybmFsIjo2M31dLDY1OltmdW5jdGlvbihlLHQscil7ci5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSx7fV0sNjY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19leHBvcnQiKSxvPWUoIi4vX2NvcmUiKSxpPWUoIi4vX2ZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxhPXt9O2FbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixhKX19LHsiLi9fY29yZSI6MzEsIi4vX2V4cG9ydCI6MzgsIi4vX2ZhaWxzIjozOX1dLDY3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDY4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vX2hpZGUiKX0seyIuL19oaWRlIjo0Mn1dLDY5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9faXMtb2JqZWN0Iiksbz1lKCIuL19hbi1vYmplY3QiKSxpPWZ1bmN0aW9uKGUsdCl7aWYobyhlKSwhbih0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixuKXt0cnl7bj1lKCIuL19jdHgiKShGdW5jdGlvbi5jYWxsLGUoIi4vX29iamVjdC1nb3BkIikuZihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbih0LFtdKSxyPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChvKXtyPSEwfXJldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBpKGUsdCkscj9lLl9fcHJvdG9fXz10Om4oZSx0KSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6aX19LHsiLi9fYW4tb2JqZWN0IjoyOCwiLi9fY3R4IjozMiwiLi9faXMtb2JqZWN0Ijo0NywiLi9fb2JqZWN0LWdvcGQiOjU4fV0sNzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19vYmplY3QtZHAiKS5mLG89ZSgiLi9faGFzIiksaT1lKCIuL193a3MiKSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LHsiLi9faGFzIjo0MSwiLi9fb2JqZWN0LWRwIjo1NiwiLi9fd2tzIjo4M31dLDcxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fc2hhcmVkIikoImtleXMiKSxvPWUoIi4vX3VpZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09byhlKSl9fSx7Ii4vX3NoYXJlZCI6NzIsIi4vX3VpZCI6ODB9XSw3MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2dsb2JhbCIpLG89Il9fY29yZS1qc19zaGFyZWRfXyIsaT1uW29dfHwobltvXT17fSk7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfHwoaVtlXT17fSl9fSx7Ii4vX2dsb2JhbCI6NDB9XSw3MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3RvLWludGVnZXIiKSxvPWUoIi4vX2RlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGksYSxzPVN0cmluZyhvKHQpKSx1PW4ociksbD1zLmxlbmd0aDtyZXR1cm4gdTwwfHx1Pj1sP2U/IiI6dm9pZCAwOihpPXMuY2hhckNvZGVBdCh1KSxpPDU1Mjk2fHxpPjU2MzE5fHx1KzE9PT1sfHwoYT1zLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fGE+NTczNDM/ZT9zLmNoYXJBdCh1KTppOmU/cy5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsoYS01NjMyMCkrNjU1MzYpfX19LHsiLi9fZGVmaW5lZCI6MzMsIi4vX3RvLWludGVnZXIiOjc1fV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1pbnRlZ2VyIiksbz1NYXRoLm1heCxpPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBlPW4oZSksZTwwP28oZSt0LDApOmkoZSx0KX19LHsiLi9fdG8taW50ZWdlciI6NzV9XSw3NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2lvYmplY3QiKSxvPWUoIi4vX2RlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSx7Ii4vX2RlZmluZWQiOjMzLCIuL19pb2JqZWN0Ijo0NX1dLDc3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fdG8taW50ZWdlciIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSx7Ii4vX3RvLWludGVnZXIiOjc1fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19kZWZpbmVkIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSx7Ii4vX2RlZmluZWQiOjMzfV0sNzk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19pcy1vYmplY3QiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighbihlKSlyZXR1cm4gZTt2YXIgcixvO2lmKHQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS52YWx1ZU9mKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO2lmKCF0JiYiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIil9fSx7Ii4vX2lzLW9iamVjdCI6NDd9XSw4MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsbz1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24rbykudG9TdHJpbmcoMzYpKX19LHt9XSw4MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2dsb2JhbCIpLG89ZSgiLi9fY29yZSIpLGk9ZSgiLi9fbGlicmFyeSIpLGE9ZSgiLi9fd2tzLWV4dCIpLHM9ZSgiLi9fb2JqZWN0LWRwIikuZjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9by5TeW1ib2x8fChvLlN5bWJvbD1pP3t9Om4uU3ltYm9sfHx7fSk7Il8iPT1lLmNoYXJBdCgwKXx8ZSBpbiB0fHxzKHQsZSx7dmFsdWU6YS5mKGUpfSl9fSx7Ii4vX2NvcmUiOjMxLCIuL19nbG9iYWwiOjQwLCIuL19saWJyYXJ5Ijo1MywiLi9fb2JqZWN0LWRwIjo1NiwiLi9fd2tzLWV4dCI6ODJ9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe3IuZj1lKCIuL193a3MiKX0seyIuL193a3MiOjgzfV0sODM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19zaGFyZWQiKSgid2tzIiksbz1lKCIuL191aWQiKSxpPWUoIi4vX2dsb2JhbCIpLlN5bWJvbCxhPSJmdW5jdGlvbiI9PXR5cGVvZiBpLHM9dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1hJiZpW2VdfHwoYT9pOm8pKCJTeW1ib2wuIitlKSl9O3Muc3RvcmU9bn0seyIuL19nbG9iYWwiOjQwLCIuL19zaGFyZWQiOjcyLCIuL191aWQiOjgwfV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi9fYWRkLXRvLXVuc2NvcGFibGVzIiksbz1lKCIuL19pdGVyLXN0ZXAiKSxpPWUoIi4vX2l0ZXJhdG9ycyIpLGE9ZSgiLi9fdG8taW9iamVjdCIpO3QuZXhwb3J0cz1lKCIuL19pdGVyLWRlZmluZSIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PWEoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOiJrZXlzIj09dD9vKDAscik6InZhbHVlcyI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LHsiLi9fYWRkLXRvLXVuc2NvcGFibGVzIjoyNywiLi9faXRlci1kZWZpbmUiOjQ5LCIuL19pdGVyLXN0ZXAiOjUwLCIuL19pdGVyYXRvcnMiOjUxLCIuL190by1pb2JqZWN0Ijo3Nn1dLDg1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse2NyZWF0ZTplKCIuL19vYmplY3QtY3JlYXRlIil9KX0seyIuL19leHBvcnQiOjM4LCIuL19vYmplY3QtY3JlYXRlIjo1NX1dLDg2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi9fZXhwb3J0Iik7bihuLlMrbi5GKiFlKCIuL19kZXNjcmlwdG9ycyIpLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0eTplKCIuL19vYmplY3QtZHAiKS5mfSl9LHsiLi9fZGVzY3JpcHRvcnMiOjM0LCIuL19leHBvcnQiOjM4LCIuL19vYmplY3QtZHAiOjU2fV0sODc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL19pcy1vYmplY3QiKSxvPWUoIi4vX21ldGEiKS5vbkZyZWV6ZTtlKCIuL19vYmplY3Qtc2FwIikoImZyZWV6ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlJiZuKHQpP2Uobyh0KSk6dH19KX0seyIuL19pcy1vYmplY3QiOjQ3LCIuL19tZXRhIjo1NCwiLi9fb2JqZWN0LXNhcCI6NjZ9XSw4ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3RvLWlvYmplY3QiKSxvPWUoIi4vX29iamVjdC1nb3BkIikuZjtlKCIuL19vYmplY3Qtc2FwIikoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gbyhuKGUpLHQpfX0pfSx7Ii4vX29iamVjdC1nb3BkIjo1OCwiLi9fb2JqZWN0LXNhcCI6NjYsIi4vX3RvLWlvYmplY3QiOjc2fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuL190by1vYmplY3QiKSxvPWUoIi4vX29iamVjdC1ncG8iKTtlKCIuL19vYmplY3Qtc2FwIikoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0seyIuL19vYmplY3QtZ3BvIjo2MiwiLi9fb2JqZWN0LXNhcCI6NjYsIi4vX3RvLW9iamVjdCI6Nzh9XSw5MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX3RvLW9iamVjdCIpLG89ZSgiLi9fb2JqZWN0LWtleXMiKTtlKCIuL19vYmplY3Qtc2FwIikoImtleXMiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBvKG4oZSkpfX0pfSx7Ii4vX29iamVjdC1rZXlzIjo2NCwiLi9fb2JqZWN0LXNhcCI6NjYsIi4vX3RvLW9iamVjdCI6Nzh9XSw5MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vX2V4cG9ydCIpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjplKCIuL19zZXQtcHJvdG8iKS5zZXR9KX0seyIuL19leHBvcnQiOjM4LCIuL19zZXQtcHJvdG8iOjY5fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSw5MzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCIuL19zdHJpbmctYXQiKSghMCk7ZSgiLi9faXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vX2l0ZXItZGVmaW5lIjo0OSwiLi9fc3RyaW5nLWF0Ijo3M31dLDk0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vX2dsb2JhbCIpLG89ZSgiLi9faGFzIiksaT1lKCIuL19kZXNjcmlwdG9ycyIpLGE9ZSgiLi9fZXhwb3J0Iikscz1lKCIuL19yZWRlZmluZSIpLHU9ZSgiLi9fbWV0YSIpLktFWSxsPWUoIi4vX2ZhaWxzIiksYz1lKCIuL19zaGFyZWQiKSxmPWUoIi4vX3NldC10by1zdHJpbmctdGFnIikscD1lKCIuL191aWQiKSxkPWUoIi4vX3drcyIpLGg9ZSgiLi9fd2tzLWV4dCIpLHk9ZSgiLi9fd2tzLWRlZmluZSIpLG09ZSgiLi9fa2V5b2YiKSx2PWUoIi4vX2VudW0ta2V5cyIpLF89ZSgiLi9faXMtYXJyYXkiKSxiPWUoIi4vX2FuLW9iamVjdCIpLGc9ZSgiLi9fdG8taW9iamVjdCIpLEU9ZSgiLi9fdG8tcHJpbWl0aXZlIiksaj1lKCIuL19wcm9wZXJ0eS1kZXNjIiksdz1lKCIuL19vYmplY3QtY3JlYXRlIiksTz1lKCIuL19vYmplY3QtZ29wbi1leHQiKSxNPWUoIi4vX29iamVjdC1nb3BkIikseD1lKCIuL19vYmplY3QtZHAiKSxQPWUoIi4vX29iamVjdC1rZXlzIiksaz1NLmYsUj14LmYsUz1PLmYsQT1uLlN5bWJvbCxUPW4uSlNPTixOPVQmJlQuc3RyaW5naWZ5LEk9InByb3RvdHlwZSIsVT1kKCJfaGlkZGVuIiksQz1kKCJ0b1ByaW1pdGl2ZSIpLEw9e30ucHJvcGVydHlJc0VudW1lcmFibGUsRj1jKCJzeW1ib2wtcmVnaXN0cnkiKSxCPWMoInN5bWJvbHMiKSxEPWMoIm9wLXN5bWJvbHMiKSxHPU9iamVjdFtJXSxLPSJmdW5jdGlvbiI9PXR5cGVvZiBBLFk9bi5RT2JqZWN0LHE9IVl8fCFZW0ldfHwhWVtJXS5maW5kQ2hpbGQsej1pJiZsKGZ1bmN0aW9uKCl7cmV0dXJuIDchPXcoUih7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiBSKHRoaXMsImEiLHt2YWx1ZTo3fSkuYX19KSkuYX0pP2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1rKEcsdCk7biYmZGVsZXRlIEdbdF0sUihlLHQsciksbiYmZSE9PUcmJlIoRyx0LG4pfTpSLFc9ZnVuY3Rpb24oZSl7dmFyIHQ9QltlXT13KEFbSV0pO3JldHVybiB0Ll9rPWUsdH0sSD1LJiYic3ltYm9sIj09dHlwZW9mIEEuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEF9LFY9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPT09RyYmVihELHQsciksYihlKSx0PUUodCwhMCksYihyKSxvKEIsdCk/KHIuZW51bWVyYWJsZT8obyhlLFUpJiZlW1VdW3RdJiYoZVtVXVt0XT0hMSkscj13KHIse2VudW1lcmFibGU6aigwLCExKX0pKToobyhlLFUpfHxSKGUsVSxqKDEse30pKSxlW1VdW3RdPSEwKSx6KGUsdCxyKSk6UihlLHQscil9LEo9ZnVuY3Rpb24oZSx0KXtiKGUpO2Zvcih2YXIgcixuPXYodD1nKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KVYoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sJD1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3coZSk6Sih3KGUpLHQpfSxYPWZ1bmN0aW9uKGUpe3ZhciB0PUwuY2FsbCh0aGlzLGU9RShlLCEwKSk7cmV0dXJuISh0aGlzPT09RyYmbyhCLGUpJiYhbyhELGUpKSYmKCEodHx8IW8odGhpcyxlKXx8IW8oQixlKXx8byh0aGlzLFUpJiZ0aGlzW1VdW2VdKXx8dCl9LFE9ZnVuY3Rpb24oZSx0KXtpZihlPWcoZSksdD1FKHQsITApLGUhPT1HfHwhbyhCLHQpfHxvKEQsdCkpe3ZhciByPWsoZSx0KTtyZXR1cm4hcnx8IW8oQix0KXx8byhlLFUpJiZlW1VdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfX0sWj1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1TKGcoZSkpLG49W10saT0wO3IubGVuZ3RoPmk7KW8oQix0PXJbaSsrXSl8fHQ9PVV8fHQ9PXV8fG4ucHVzaCh0KTtyZXR1cm4gbn0sZWU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9ZT09PUcsbj1TKHI/RDpnKGUpKSxpPVtdLGE9MDtuLmxlbmd0aD5hOykhbyhCLHQ9blthKytdKXx8ciYmIW8oRyx0KXx8aS5wdXNoKEJbdF0pO3JldHVybiBpfTtLfHwoQT1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBBKXRocm93IFR5cGVFcnJvcigiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yISIpO3ZhciBlPXAoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApLHQ9ZnVuY3Rpb24ocil7dGhpcz09PUcmJnQuY2FsbChELHIpLG8odGhpcyxVKSYmbyh0aGlzW1VdLGUpJiYodGhpc1tVXVtlXT0hMSkseih0aGlzLGUsaigxLHIpKX07cmV0dXJuIGkmJnEmJnooRyxlLHtjb25maWd1cmFibGU6ITAsc2V0OnR9KSxXKGUpfSxzKEFbSV0sInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksTS5mPVEseC5mPVYsZSgiLi9fb2JqZWN0LWdvcG4iKS5mPU8uZj1aLGUoIi4vX29iamVjdC1waWUiKS5mPVgsZSgiLi9fb2JqZWN0LWdvcHMiKS5mPWVlLGkmJiFlKCIuL19saWJyYXJ5IikmJnMoRywicHJvcGVydHlJc0VudW1lcmFibGUiLFgsITApLGguZj1mdW5jdGlvbihlKXtyZXR1cm4gVyhkKGUpKX0pLGEoYS5HK2EuVythLkYqIUsse1N5bWJvbDpBfSk7Zm9yKHZhciB0ZT0iaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMiLnNwbGl0KCIsIikscmU9MDt0ZS5sZW5ndGg+cmU7KWQodGVbcmUrK10pO2Zvcih2YXIgdGU9UChkLnN0b3JlKSxyZT0wO3RlLmxlbmd0aD5yZTspeSh0ZVtyZSsrXSk7YShhLlMrYS5GKiFLLCJTeW1ib2wiLHsiZm9yIjpmdW5jdGlvbihlKXtyZXR1cm4gbyhGLGUrPSIiKT9GW2VdOkZbZV09QShlKX0sa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKEgoZSkpcmV0dXJuIG0oRixlKTt0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIHN5bWJvbCEiKX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7cT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7cT0hMX19KSxhKGEuUythLkYqIUssIk9iamVjdCIse2NyZWF0ZTokLGRlZmluZVByb3BlcnR5OlYsZGVmaW5lUHJvcGVydGllczpKLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpRLGdldE93blByb3BlcnR5TmFtZXM6WixnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ZWV9KSxUJiZhKGEuUythLkYqKCFLfHxsKGZ1bmN0aW9uKCl7dmFyIGU9QSgpO3JldHVybiJbbnVsbF0iIT1OKFtlXSl8fCJ7fSIhPU4oe2E6ZX0pfHwie30iIT1OKE9iamVjdChlKSl9KSksIkpTT04iLHtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIUgoZSkpe2Zvcih2YXIgdCxyLG49W2VdLG89MTthcmd1bWVudHMubGVuZ3RoPm87KW4ucHVzaChhcmd1bWVudHNbbysrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksIXImJl8odCl8fCh0PWZ1bmN0aW9uKGUsdCl7aWYociYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksIUgodCkpcmV0dXJuIHR9KSxuWzFdPXQsTi5hcHBseShULG4pfX19KSxBW0ldW0NdfHxlKCIuL19oaWRlIikoQVtJXSxDLEFbSV0udmFsdWVPZiksZihBLCJTeW1ib2wiKSxmKE1hdGgsIk1hdGgiLCEwKSxmKG4uSlNPTiwiSlNPTiIsITApfSx7Ii4vX2FuLW9iamVjdCI6MjgsIi4vX2Rlc2NyaXB0b3JzIjozNCwiLi9fZW51bS1rZXlzIjozNywiLi9fZXhwb3J0IjozOCwiLi9fZmFpbHMiOjM5LCIuL19nbG9iYWwiOjQwLCIuL19oYXMiOjQxLCIuL19oaWRlIjo0MiwiLi9faXMtYXJyYXkiOjQ2LCIuL19rZXlvZiI6NTIsIi4vX2xpYnJhcnkiOjUzLCIuL19tZXRhIjo1NCwiLi9fb2JqZWN0LWNyZWF0ZSI6NTUsIi4vX29iamVjdC1kcCI6NTYsIi4vX29iamVjdC1nb3BkIjo1OCwiLi9fb2JqZWN0LWdvcG4iOjYwLCIuL19vYmplY3QtZ29wbi1leHQiOjU5LCIuL19vYmplY3QtZ29wcyI6NjEsIi4vX29iamVjdC1rZXlzIjo2NCwiLi9fb2JqZWN0LXBpZSI6NjUsIi4vX3Byb3BlcnR5LWRlc2MiOjY3LCIuL19yZWRlZmluZSI6NjgsIi4vX3NldC10by1zdHJpbmctdGFnIjo3MCwiLi9fc2hhcmVkIjo3MiwiLi9fdG8taW9iamVjdCI6NzYsIi4vX3RvLXByaW1pdGl2ZSI6NzksIi4vX3VpZCI6ODAsIi4vX3drcyI6ODMsIi4vX3drcy1kZWZpbmUiOjgxLCIuL193a3MtZXh0Ijo4Mn1dLDk1OltmdW5jdGlvbihlLHQscil7ZSgiLi9fd2tzLWRlZmluZSIpKCJhc3luY0l0ZXJhdG9yIil9LHsiLi9fd2tzLWRlZmluZSI6ODF9XSw5NjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vX3drcy1kZWZpbmUiKSgib2JzZXJ2YWJsZSIpfSx7Ii4vX3drcy1kZWZpbmUiOjgxfV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO2Zvcih2YXIgbj1lKCIuL19nbG9iYWwiKSxvPWUoIi4vX2hpZGUiKSxpPWUoIi4vX2l0ZXJhdG9ycyIpLGE9ZSgiLi9fd2tzIikoInRvU3RyaW5nVGFnIikscz1bIk5vZGVMaXN0IiwiRE9NVG9rZW5MaXN0IiwiTWVkaWFMaXN0IiwiU3R5bGVTaGVldExpc3QiLCJDU1NSdWxlTGlzdCJdLHU9MDt1PDU7dSsrKXt2YXIgbD1zW3VdLGM9bltsXSxmPWMmJmMucHJvdG90eXBlO2YmJiFmW2FdJiZvKGYsYSxsKSxpW2xdPWkuQXJyYXl9fSx7Ii4vX2dsb2JhbCI6NDAsIi4vX2hpZGUiOjQyLCIuL19pdGVyYXRvcnMiOjUxLCIuL193a3MiOjgzLCIuL2VzNi5hcnJheS5pdGVyYXRvciI6ODR9XSw5ODpbZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbihyKXt2YXIgbj0ib2JqZWN0Ij09dHlwZW9mIHI/cjoib2JqZWN0Ij09dHlwZW9mIHdpbmRvdz93aW5kb3c6Im9iamVjdCI9PXR5cGVvZiBzZWxmP3NlbGY6dGhpcyxvPW4ucmVnZW5lcmF0b3JSdW50aW1lJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhuKS5pbmRleE9mKCJyZWdlbmVyYXRvclJ1bnRpbWUiKT49MCxpPW8mJm4ucmVnZW5lcmF0b3JSdW50aW1lO2lmKG4ucmVnZW5lcmF0b3JSdW50aW1lPXZvaWQgMCx0LmV4cG9ydHM9ZSgiLi9ydW50aW1lIiksbyluLnJlZ2VuZXJhdG9yUnVudGltZT1pO2Vsc2UgdHJ5e2RlbGV0ZSBuLnJlZ2VuZXJhdG9yUnVudGltZX1jYXRjaChhKXtuLnJlZ2VuZXJhdG9yUnVudGltZT12b2lkIDB9fSkuY2FsbCh0aGlzLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7Ii4vcnVudGltZSI6OTl9XSw5OTpbZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbihlKXshZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0LHIsbil7dmFyIGk9T2JqZWN0LmNyZWF0ZSgodHx8bykucHJvdG90eXBlKSxhPW5ldyBkKG58fFtdKTtyZXR1cm4gaS5faW52b2tlPWMoZSxyLGEpLGl9ZnVuY3Rpb24gbihlLHQscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzplLmNhbGwodCxyKX19Y2F0Y2gobil7cmV0dXJue3R5cGU6InRocm93Iixhcmc6bn19fWZ1bmN0aW9uIG8oKXt9ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBhKCl7fWZ1bmN0aW9uIHMoZSl7WyJuZXh0IiwidGhyb3ciLCJyZXR1cm4iXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ludm9rZSh0LGUpfX0pfWZ1bmN0aW9uIHUoZSl7dGhpcy5hcmc9ZX1mdW5jdGlvbiBsKGUpe2Z1bmN0aW9uIHQocixvLGksYSl7dmFyIHM9bihlW3JdLGUsbyk7aWYoInRocm93IiE9PXMudHlwZSl7dmFyIGw9cy5hcmcsYz1sLnZhbHVlO3JldHVybiBjIGluc3RhbmNlb2YgdT9Qcm9taXNlLnJlc29sdmUoYy5hcmcpLnRoZW4oZnVuY3Rpb24oZSl7dCgibmV4dCIsZSxpLGEpfSxmdW5jdGlvbihlKXt0KCJ0aHJvdyIsZSxpLGEpfSk6UHJvbWlzZS5yZXNvbHZlKGMpLnRoZW4oZnVuY3Rpb24oZSl7bC52YWx1ZT1lLGkobCl9LGEpfWEocy5hcmcpfWZ1bmN0aW9uIHIoZSxyKXtmdW5jdGlvbiBuKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4sbyl7dChlLHIsbixvKX0pfXJldHVybiBvPW8/by50aGVuKG4sbik6bigpfSJvYmplY3QiPT10eXBlb2YgcHJvY2VzcyYmcHJvY2Vzcy5kb21haW4mJih0PXByb2Nlc3MuZG9tYWluLmJpbmQodCkpO3ZhciBvO3RoaXMuX2ludm9rZT1yfWZ1bmN0aW9uIGMoZSx0LHIpe3ZhciBvPXc7cmV0dXJuIGZ1bmN0aW9uKGksYSl7aWYobz09PU0pdGhyb3cgbmV3IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7aWYobz09PXgpe2lmKCJ0aHJvdyI9PT1pKXRocm93IGE7cmV0dXJuIHkoKX1mb3IoOzspe3ZhciBzPXIuZGVsZWdhdGU7aWYocyl7aWYoInJldHVybiI9PT1pfHwidGhyb3ciPT09aSYmcy5pdGVyYXRvcltpXT09PW0pe3IuZGVsZWdhdGU9bnVsbDt2YXIgdT1zLml0ZXJhdG9yWyJyZXR1cm4iXTtpZih1KXt2YXIgbD1uKHUscy5pdGVyYXRvcixhKTtpZigidGhyb3ciPT09bC50eXBlKXtpPSJ0aHJvdyIsYT1sLmFyZztjb250aW51ZX19aWYoInJldHVybiI9PT1pKWNvbnRpbnVlfXZhciBsPW4ocy5pdGVyYXRvcltpXSxzLml0ZXJhdG9yLGEpO2lmKCJ0aHJvdyI9PT1sLnR5cGUpe3IuZGVsZWdhdGU9bnVsbCxpPSJ0aHJvdyIsYT1sLmFyZztjb250aW51ZX1pPSJuZXh0IixhPW07dmFyIGM9bC5hcmc7aWYoIWMuZG9uZSlyZXR1cm4gbz1PLGM7cltzLnJlc3VsdE5hbWVdPWMudmFsdWUsci5uZXh0PXMubmV4dExvYyxyLmRlbGVnYXRlPW51bGx9aWYoIm5leHQiPT09aSlyLnNlbnQ9ci5fc2VudD1hO2Vsc2UgaWYoInRocm93Ij09PWkpe2lmKG89PT13KXRocm93IG89eCxhO3IuZGlzcGF0Y2hFeGNlcHRpb24oYSkmJihpPSJuZXh0IixhPW0pfWVsc2UicmV0dXJuIj09PWkmJnIuYWJydXB0KCJyZXR1cm4iLGEpO289TTt2YXIgbD1uKGUsdCxyKTtpZigibm9ybWFsIj09PWwudHlwZSl7bz1yLmRvbmU/eDpPO3ZhciBjPXt2YWx1ZTpsLmFyZyxkb25lOnIuZG9uZX07aWYobC5hcmchPT1QKXJldHVybiBjO3IuZGVsZWdhdGUmJiJuZXh0Ij09PWkmJihhPW0pfWVsc2UidGhyb3ciPT09bC50eXBlJiYobz14LGk9InRocm93IixhPWwuYXJnKX19fWZ1bmN0aW9uIGYoZSl7dmFyIHQ9e3RyeUxvYzplWzBdfTsxIGluIGUmJih0LmNhdGNoTG9jPWVbMV0pLDIgaW4gZSYmKHQuZmluYWxseUxvYz1lWzJdLHQuYWZ0ZXJMb2M9ZVszXSksdGhpcy50cnlFbnRyaWVzLnB1c2godCl9ZnVuY3Rpb24gcChlKXt2YXIgdD1lLmNvbXBsZXRpb258fHt9O3QudHlwZT0ibm9ybWFsIixkZWxldGUgdC5hcmcsZS5jb21wbGV0aW9uPXR9ZnVuY3Rpb24gZChlKXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6InJvb3QifV0sZS5mb3JFYWNoKGYsdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gaChlKXtpZihlKXt2YXIgdD1lW2JdO2lmKHQpcmV0dXJuIHQuY2FsbChlKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgZS5uZXh0KXJldHVybiBlO2lmKCFpc05hTihlLmxlbmd0aCkpe3ZhciByPS0xLG49ZnVuY3Rpb24gbygpe2Zvcig7KytyPGUubGVuZ3RoOylpZih2LmNhbGwoZSxyKSlyZXR1cm4gby52YWx1ZT1lW3JdLG8uZG9uZT0hMSxvO3JldHVybiBvLnZhbHVlPW0sby5kb25lPSEwLG99O3JldHVybiBuLm5leHQ9bn19cmV0dXJue25leHQ6eX19ZnVuY3Rpb24geSgpe3JldHVybnt2YWx1ZTptLGRvbmU6ITB9fXZhciBtLHY9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxfPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LGI9Xy5pdGVyYXRvcnx8IkBAaXRlcmF0b3IiLGc9Xy50b1N0cmluZ1RhZ3x8IkBAdG9TdHJpbmdUYWciLEU9Im9iamVjdCI9PXR5cGVvZiB0LGo9ZS5yZWdlbmVyYXRvclJ1bnRpbWU7aWYoailyZXR1cm4gdm9pZChFJiYodC5leHBvcnRzPWopKTtqPWUucmVnZW5lcmF0b3JSdW50aW1lPUU/dC5leHBvcnRzOnt9LGoud3JhcD1yO3ZhciB3PSJzdXNwZW5kZWRTdGFydCIsTz0ic3VzcGVuZGVkWWllbGQiLE09ImV4ZWN1dGluZyIseD0iY29tcGxldGVkIixQPXt9LGs9YS5wcm90b3R5cGU9by5wcm90b3R5cGU7aS5wcm90b3R5cGU9ay5jb25zdHJ1Y3Rvcj1hLGEuY29uc3RydWN0b3I9aSxhW2ddPWkuZGlzcGxheU5hbWU9IkdlbmVyYXRvckZ1bmN0aW9uIixqLmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUuY29uc3RydWN0b3I7cmV0dXJuISF0JiYodD09PWl8fCJHZW5lcmF0b3JGdW5jdGlvbiI9PT0odC5kaXNwbGF5TmFtZXx8dC5uYW1lKSl9LGoubWFyaz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLGEpOihlLl9fcHJvdG9fXz1hLGcgaW4gZXx8KGVbZ109IkdlbmVyYXRvckZ1bmN0aW9uIikpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoayksZX0sai5hd3JhcD1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHUoZSl9LHMobC5wcm90b3R5cGUpLGouYXN5bmM9ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIGk9bmV3IGwocihlLHQsbixvKSk7cmV0dXJuIGouaXNHZW5lcmF0b3JGdW5jdGlvbih0KT9pOmkubmV4dCgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuZG9uZT9lLnZhbHVlOmkubmV4dCgpfSl9LHMoayksa1tiXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxrW2ddPSJHZW5lcmF0b3IiLGsudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0sai5rZXlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiBlKXQucHVzaChyKTtyZXR1cm4gdC5yZXZlcnNlKCksZnVuY3Rpb24gbigpe2Zvcig7dC5sZW5ndGg7KXt2YXIgcj10LnBvcCgpO2lmKHIgaW4gZSlyZXR1cm4gbi52YWx1ZT1yLG4uZG9uZT0hMSxufXJldHVybiBuLmRvbmU9ITAsbn19LGoudmFsdWVzPWgsZC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmQscmVzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9bSx0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHApLCFlKWZvcih2YXIgdCBpbiB0aGlzKSJ0Ij09PXQuY2hhckF0KDApJiZ2LmNhbGwodGhpcyx0KSYmIWlzTmFOKCt0LnNsaWNlKDEpKSYmKHRoaXNbdF09bSk7Cn0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgZT10aGlzLnRyeUVudHJpZXNbMF0sdD1lLmNvbXBsZXRpb247aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4gdGhpcy5ydmFsfSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7cmV0dXJuIGkudHlwZT0idGhyb3ciLGkuYXJnPWUsci5uZXh0PXQsISFufWlmKHRoaXMuZG9uZSl0aHJvdyBlO2Zvcih2YXIgcj10aGlzLG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbbl0saT1vLmNvbXBsZXRpb247aWYoInJvb3QiPT09by50cnlMb2MpcmV0dXJuIHQoImVuZCIpO2lmKG8udHJ5TG9jPD10aGlzLnByZXYpe3ZhciBhPXYuY2FsbChvLCJjYXRjaExvYyIpLHM9di5jYWxsKG8sImZpbmFsbHlMb2MiKTtpZihhJiZzKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gdChvLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiB0KG8uZmluYWxseUxvYyl9ZWxzZSBpZihhKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gdChvLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFzKXRocm93IG5ldyBFcnJvcigidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHkiKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiB0KG8uZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBuPXRoaXMudHJ5RW50cmllc1tyXTtpZihuLnRyeUxvYzw9dGhpcy5wcmV2JiZ2LmNhbGwobiwiZmluYWxseUxvYyIpJiZ0aGlzLnByZXY8bi5maW5hbGx5TG9jKXt2YXIgbz1uO2JyZWFrfX1vJiYoImJyZWFrIj09PWV8fCJjb250aW51ZSI9PT1lKSYmby50cnlMb2M8PXQmJnQ8PW8uZmluYWxseUxvYyYmKG89bnVsbCk7dmFyIGk9bz9vLmNvbXBsZXRpb246e307cmV0dXJuIGkudHlwZT1lLGkuYXJnPXQsbz90aGlzLm5leHQ9by5maW5hbGx5TG9jOnRoaXMuY29tcGxldGUoaSksUH0sY29tcGxldGU6ZnVuY3Rpb24oZSx0KXtpZigidGhyb3ciPT09ZS50eXBlKXRocm93IGUuYXJnOyJicmVhayI9PT1lLnR5cGV8fCJjb250aW51ZSI9PT1lLnR5cGU/dGhpcy5uZXh0PWUuYXJnOiJyZXR1cm4iPT09ZS50eXBlPyh0aGlzLnJ2YWw9ZS5hcmcsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PWUudHlwZSYmdCYmKHRoaXMubmV4dD10KX0sZmluaXNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLmZpbmFsbHlMb2M9PT1lKXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxwKHIpLFB9fSwiY2F0Y2giOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLnRyeUxvYz09PWUpe3ZhciBuPXIuY29tcGxldGlvbjtpZigidGhyb3ciPT09bi50eXBlKXt2YXIgbz1uLmFyZztwKHIpfXJldHVybiBvfX10aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6aChlKSxyZXN1bHROYW1lOnQsbmV4dExvYzpyfSxQfX19KCJvYmplY3QiPT10eXBlb2YgZT9lOiJvYmplY3QiPT10eXBlb2Ygd2luZG93P3dpbmRvdzoib2JqZWN0Ij09dHlwZW9mIHNlbGY/c2VsZjp0aGlzKX0pLmNhbGwodGhpcywidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se31dLDEwMDpbZnVuY3Rpb24odCxyLG4peyFmdW5jdGlvbih0LG4peyJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFtZD9lKFtdLG4pOiJ1bmRlZmluZWQiIT10eXBlb2YgciYmci5leHBvcnRzP3IuZXhwb3J0cz1uKCk6dC50djQ9bigpfSh0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZW5jb2RlVVJJKGUpLnJlcGxhY2UoLyUyNVswLTldWzAtOV0vZyxmdW5jdGlvbihlKXtyZXR1cm4iJSIrZS5zdWJzdHJpbmcoMyl9KX1mdW5jdGlvbiB0KHQpe3ZhciByPSIiO3BbdC5jaGFyQXQoMCldJiYocj10LmNoYXJBdCgwKSx0PXQuc3Vic3RyaW5nKDEpKTt2YXIgbj0iIixvPSIiLGk9ITAsYT0hMSxzPSExOyIrIj09PXI/aT0hMToiLiI9PT1yPyhvPSIuIixuPSIuIik6Ii8iPT09cj8obz0iLyIsbj0iLyIpOiIjIj09PXI/KG89IiMiLGk9ITEpOiI7Ij09PXI/KG89IjsiLG49IjsiLGE9ITAscz0hMCk6Ij8iPT09cj8obz0iPyIsbj0iJiIsYT0hMCk6IiYiPT09ciYmKG89IiYiLG49IiYiLGE9ITApO2Zvcih2YXIgdT1bXSxsPXQuc3BsaXQoIiwiKSxjPVtdLGY9e30saD0wO2g8bC5sZW5ndGg7aCsrKXt2YXIgeT1sW2hdLG09bnVsbDtpZih5LmluZGV4T2YoIjoiKSE9PS0xKXt2YXIgdj15LnNwbGl0KCI6Iik7eT12WzBdLG09cGFyc2VJbnQodlsxXSwxMCl9Zm9yKHZhciBfPXt9O2RbeS5jaGFyQXQoeS5sZW5ndGgtMSldOylfW3kuY2hhckF0KHkubGVuZ3RoLTEpXT0hMCx5PXkuc3Vic3RyaW5nKDAseS5sZW5ndGgtMSk7dmFyIGI9e3RydW5jYXRlOm0sbmFtZTp5LHN1ZmZpY2VzOl99O2MucHVzaChiKSxmW3ldPWIsdS5wdXNoKHkpfXZhciBnPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0iIix1PTAsbD0wO2w8Yy5sZW5ndGg7bCsrKXt2YXIgZj1jW2xdLHA9dChmLm5hbWUpO2lmKG51bGw9PT1wfHx2b2lkIDA9PT1wfHxBcnJheS5pc0FycmF5KHApJiYwPT09cC5sZW5ndGh8fCJvYmplY3QiPT10eXBlb2YgcCYmMD09PU9iamVjdC5rZXlzKHApLmxlbmd0aCl1Kys7ZWxzZSBpZihyKz1sPT09dT9vOm58fCIsIixBcnJheS5pc0FycmF5KHApKXthJiYocis9Zi5uYW1lKyI9Iik7Zm9yKHZhciBkPTA7ZDxwLmxlbmd0aDtkKyspZD4wJiYocis9Zi5zdWZmaWNlc1siKiJdP258fCIsIjoiLCIsZi5zdWZmaWNlc1siKiJdJiZhJiYocis9Zi5uYW1lKyI9IikpLHIrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KHBbZF0pLnJlcGxhY2UoLyEvZywiJTIxIik6ZShwW2RdKX1lbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgcCl7YSYmIWYuc3VmZmljZXNbIioiXSYmKHIrPWYubmFtZSsiPSIpO3ZhciBoPSEwO2Zvcih2YXIgeSBpbiBwKWh8fChyKz1mLnN1ZmZpY2VzWyIqIl0/bnx8IiwiOiIsIiksaD0hMSxyKz1pP2VuY29kZVVSSUNvbXBvbmVudCh5KS5yZXBsYWNlKC8hL2csIiUyMSIpOmUoeSkscis9Zi5zdWZmaWNlc1siKiJdPyI9IjoiLCIscis9aT9lbmNvZGVVUklDb21wb25lbnQocFt5XSkucmVwbGFjZSgvIS9nLCIlMjEiKTplKHBbeV0pfWVsc2UgYSYmKHIrPWYubmFtZSxzJiYiIj09PXB8fChyKz0iPSIpKSxudWxsIT1mLnRydW5jYXRlJiYocD1wLnN1YnN0cmluZygwLGYudHJ1bmNhdGUpKSxyKz1pP2VuY29kZVVSSUNvbXBvbmVudChwKS5yZXBsYWNlKC8hL2csIiUyMSIpOmUocCl9cmV0dXJuIHJ9O3JldHVybiBnLnZhck5hbWVzPXUse3ByZWZpeDpvLHN1YnN0aXR1dGlvbjpnfX1mdW5jdGlvbiByKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHIpKXJldHVybiBuZXcgcihlKTtmb3IodmFyIG49ZS5zcGxpdCgieyIpLG89W24uc2hpZnQoKV0saT1bXSxhPVtdLHM9W107bi5sZW5ndGg+MDspe3ZhciB1PW4uc2hpZnQoKSxsPXUuc3BsaXQoIn0iKVswXSxjPXUuc3Vic3RyaW5nKGwubGVuZ3RoKzEpLGY9dChsKTthLnB1c2goZi5zdWJzdGl0dXRpb24pLGkucHVzaChmLnByZWZpeCksby5wdXNoKGMpLHM9cy5jb25jYXQoZi5zdWJzdGl0dXRpb24udmFyTmFtZXMpfXRoaXMuZmlsbD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9b1swXSxyPTA7cjxhLmxlbmd0aDtyKyspe3ZhciBuPWFbcl07dCs9bihlKSx0Kz1vW3IrMV19cmV0dXJuIHR9LHRoaXMudmFyTmFtZXM9cyx0aGlzLnRlbXBsYXRlPWV9ZnVuY3Rpb24gbihlLHQpe2lmKGU9PT10KXJldHVybiEwO2lmKGUmJnQmJiJvYmplY3QiPT10eXBlb2YgZSYmIm9iamVjdCI9PXR5cGVvZiB0KXtpZihBcnJheS5pc0FycmF5KGUpIT09QXJyYXkuaXNBcnJheSh0KSlyZXR1cm4hMTtpZihBcnJheS5pc0FycmF5KGUpKXtpZihlLmxlbmd0aCE9PXQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWlmKCFuKGVbcl0sdFtyXSkpcmV0dXJuITF9ZWxzZXt2YXIgbztmb3IobyBpbiBlKWlmKHZvaWQgMD09PXRbb10mJnZvaWQgMCE9PWVbb10pcmV0dXJuITE7Zm9yKG8gaW4gdClpZih2b2lkIDA9PT1lW29dJiZ2b2lkIDAhPT10W29dKXJldHVybiExO2ZvcihvIGluIGUpaWYoIW4oZVtvXSx0W29dKSlyZXR1cm4hMX1yZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBvKGUpe3ZhciB0PVN0cmluZyhlKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIikubWF0Y2goL14oW146XC8/I10rOik/KFwvXC8oPzpbXjpAXSooPzo6W146QF0qKT9AKT8oKFteOlwvPyNdKikoPzo6KFxkKikpPykpPyhbXj8jXSopKFw/W14jXSopPygjW1xzXFNdKik/Lyk7cmV0dXJuIHQ/e2hyZWY6dFswXXx8IiIscHJvdG9jb2w6dFsxXXx8IiIsYXV0aG9yaXR5OnRbMl18fCIiLGhvc3Q6dFszXXx8IiIsaG9zdG5hbWU6dFs0XXx8IiIscG9ydDp0WzVdfHwiIixwYXRobmFtZTp0WzZdfHwiIixzZWFyY2g6dFs3XXx8IiIsaGFzaDp0WzhdfHwiIn06bnVsbH1mdW5jdGlvbiBpKGUsdCl7ZnVuY3Rpb24gcihlKXt2YXIgdD1bXTtyZXR1cm4gZS5yZXBsYWNlKC9eKFwuXC4/KFwvfCQpKSsvLCIiKS5yZXBsYWNlKC9cLyhcLihcL3wkKSkrL2csIi8iKS5yZXBsYWNlKC9cL1wuXC4kLywiLy4uLyIpLnJlcGxhY2UoL1wvP1teXC9dKi9nLGZ1bmN0aW9uKGUpeyIvLi4iPT09ZT90LnBvcCgpOnQucHVzaChlKX0pLHQuam9pbigiIikucmVwbGFjZSgvXlwvLywiLyI9PT1lLmNoYXJBdCgwKT8iLyI6IiIpfXJldHVybiB0PW8odHx8IiIpLGU9byhlfHwiIiksdCYmZT8odC5wcm90b2NvbHx8ZS5wcm90b2NvbCkrKHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5P3QuYXV0aG9yaXR5OmUuYXV0aG9yaXR5KStyKHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5fHwiLyI9PT10LnBhdGhuYW1lLmNoYXJBdCgwKT90LnBhdGhuYW1lOnQucGF0aG5hbWU/KGUuYXV0aG9yaXR5JiYhZS5wYXRobmFtZT8iLyI6IiIpK2UucGF0aG5hbWUuc2xpY2UoMCxlLnBhdGhuYW1lLmxhc3RJbmRleE9mKCIvIikrMSkrdC5wYXRobmFtZTplLnBhdGhuYW1lKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fHQucGF0aG5hbWU/dC5zZWFyY2g6dC5zZWFyY2h8fGUuc2VhcmNoKSt0Lmhhc2g6bnVsbH1mdW5jdGlvbiBhKGUpe3JldHVybiBlLnNwbGl0KCIjIilbMF19ZnVuY3Rpb24gcyhlLHQpe2lmKGUmJiJvYmplY3QiPT10eXBlb2YgZSlpZih2b2lkIDA9PT10P3Q9ZS5pZDoic3RyaW5nIj09dHlwZW9mIGUuaWQmJih0PWkodCxlLmlkKSxlLmlkPXQpLEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspcyhlW3JdLHQpO2Vsc2V7InN0cmluZyI9PXR5cGVvZiBlLiRyZWYmJihlLiRyZWY9aSh0LGUuJHJlZikpO2Zvcih2YXIgbiBpbiBlKSJlbnVtIiE9PW4mJnMoZVtuXSx0KX19ZnVuY3Rpb24gdShlKXtlPWV8fCJlbiI7dmFyIHQ9RVtlXTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dFtlLmNvZGVdfHxnW2UuY29kZV07aWYoInN0cmluZyIhPXR5cGVvZiByKXJldHVybiJVbmtub3duIGVycm9yIGNvZGUgIitlLmNvZGUrIjogIitKU09OLnN0cmluZ2lmeShlLm1lc3NhZ2VQYXJhbXMpO3ZhciBuPWUucGFyYW1zO3JldHVybiByLnJlcGxhY2UoL1x7KFtee31dKilcfS9nLGZ1bmN0aW9uKGUsdCl7dmFyIHI9blt0XTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHJ8fCJudW1iZXIiPT10eXBlb2Ygcj9yOmV9KX19ZnVuY3Rpb24gbChlLHQscixuLG8pe2lmKEVycm9yLmNhbGwodGhpcyksdm9pZCAwPT09ZSl0aHJvdyBuZXcgRXJyb3IoIk5vIGVycm9yIGNvZGUgc3VwcGxpZWQ6ICIrbik7dGhpcy5tZXNzYWdlPSIiLHRoaXMucGFyYW1zPXQsdGhpcy5jb2RlPWUsdGhpcy5kYXRhUGF0aD1yfHwiIix0aGlzLnNjaGVtYVBhdGg9bnx8IiIsdGhpcy5zdWJFcnJvcnM9b3x8bnVsbDt2YXIgaT1uZXcgRXJyb3IodGhpcy5tZXNzYWdlKTtpZih0aGlzLnN0YWNrPWkuc3RhY2t8fGkuc3RhY2t0cmFjZSwhdGhpcy5zdGFjayl0cnl7dGhyb3cgaX1jYXRjaChpKXt0aGlzLnN0YWNrPWkuc3RhY2t8fGkuc3RhY2t0cmFjZX19ZnVuY3Rpb24gYyhlLHQpe2lmKHQuc3Vic3RyaW5nKDAsZS5sZW5ndGgpPT09ZSl7dmFyIHI9dC5zdWJzdHJpbmcoZS5sZW5ndGgpO2lmKHQubGVuZ3RoPjAmJiIvIj09PXQuY2hhckF0KGUubGVuZ3RoLTEpfHwiIyI9PT1yLmNoYXJBdCgwKXx8Ij8iPT09ci5jaGFyQXQoMCkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gZihlKXt2YXIgdCxyLG49bmV3IGgsbz17c2V0RXJyb3JSZXBvcnRlcjpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/dGhpcy5sYW5ndWFnZShlKToocj1lLCEwKX0sYWRkRm9ybWF0OmZ1bmN0aW9uKCl7bi5hZGRGb3JtYXQuYXBwbHkobixhcmd1bWVudHMpfSxsYW5ndWFnZTpmdW5jdGlvbihlKXtyZXR1cm4gZT8oRVtlXXx8KGU9ZS5zcGxpdCgiLSIpWzBdKSwhIUVbZV0mJih0PWUsZSkpOnR9LGFkZExhbmd1YWdlOmZ1bmN0aW9uKGUsdCl7dmFyIHI7Zm9yKHIgaW4gdil0W3JdJiYhdFt2W3JdXSYmKHRbdltyXV09dFtyXSk7dmFyIG49ZS5zcGxpdCgiLSIpWzBdO2lmKEVbbl0pe0VbZV09T2JqZWN0LmNyZWF0ZShFW25dKTtmb3IociBpbiB0KSJ1bmRlZmluZWQiPT10eXBlb2YgRVtuXVtyXSYmKEVbbl1bcl09dFtyXSksRVtlXVtyXT10W3JdfWVsc2UgRVtlXT10LEVbbl09dDtyZXR1cm4gdGhpc30sZnJlc2hBcGk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZigpO3JldHVybiBlJiZ0Lmxhbmd1YWdlKGUpLHR9LHZhbGlkYXRlOmZ1bmN0aW9uKGUsbyxpLGEpe3ZhciBzPXUodCksbD1yP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcihlLHQsbil8fHMoZSx0LG4pfTpzLGM9bmV3IGgobiwoITEpLGwsaSxhKTsic3RyaW5nIj09dHlwZW9mIG8mJihvPXskcmVmOm99KSxjLmFkZFNjaGVtYSgiIixvKTt2YXIgZj1jLnZhbGlkYXRlQWxsKGUsbyxudWxsLG51bGwsIiIpO3JldHVybiFmJiZhJiYoZj1jLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsbykpLHRoaXMuZXJyb3I9Zix0aGlzLm1pc3Npbmc9Yy5taXNzaW5nLHRoaXMudmFsaWQ9bnVsbD09PWYsdGhpcy52YWxpZH0sdmFsaWRhdGVSZXN1bHQ6ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gdGhpcy52YWxpZGF0ZS5hcHBseShlLGFyZ3VtZW50cyksZX0sdmFsaWRhdGVNdWx0aXBsZTpmdW5jdGlvbihlLG8saSxhKXt2YXIgcz11KHQpLGw9cj9mdW5jdGlvbihlLHQsbil7cmV0dXJuIHIoZSx0LG4pfHxzKGUsdCxuKX06cyxjPW5ldyBoKG4sKCEwKSxsLGksYSk7InN0cmluZyI9PXR5cGVvZiBvJiYobz17JHJlZjpvfSksYy5hZGRTY2hlbWEoIiIsbyksYy52YWxpZGF0ZUFsbChlLG8sbnVsbCxudWxsLCIiKSxhJiZjLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsbyk7dmFyIGY9e307cmV0dXJuIGYuZXJyb3JzPWMuZXJyb3JzLGYubWlzc2luZz1jLm1pc3NpbmcsZi52YWxpZD0wPT09Zi5lcnJvcnMubGVuZ3RoLGZ9LGFkZFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiBuLmFkZFNjaGVtYS5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiBuLmdldFNjaGVtYS5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYU1hcDpmdW5jdGlvbigpe3JldHVybiBuLmdldFNjaGVtYU1hcC5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYVVyaXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWFVcmlzLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0TWlzc2luZ1VyaXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRNaXNzaW5nVXJpcy5hcHBseShuLGFyZ3VtZW50cyl9LGRyb3BTY2hlbWFzOmZ1bmN0aW9uKCl7bi5kcm9wU2NoZW1hcy5hcHBseShuLGFyZ3VtZW50cyl9LGRlZmluZUtleXdvcmQ6ZnVuY3Rpb24oKXtuLmRlZmluZUtleXdvcmQuYXBwbHkobixhcmd1bWVudHMpfSxkZWZpbmVFcnJvcjpmdW5jdGlvbihlLHQscil7aWYoInN0cmluZyIhPXR5cGVvZiBlfHwhL15bQS1aXSsoX1tBLVpdKykqJC8udGVzdChlKSl0aHJvdyBuZXcgRXJyb3IoIkNvZGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nIGluIFVQUEVSX0NBU0VfV0lUSF9VTkRFUlNDT1JFUyIpO2lmKCJudW1iZXIiIT10eXBlb2YgdHx8dCUxIT09MHx8dDwxZTQpdGhyb3cgbmV3IEVycm9yKCJDb2RlIG51bWJlciBtdXN0IGJlIGFuIGludGVnZXIgPiAxMDAwMCIpO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdltlXSl0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGFscmVhZHkgZGVmaW5lZDogIitlKyIgYXMgIit2W2VdKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIF9bdF0pdGhyb3cgbmV3IEVycm9yKCJFcnJvciBjb2RlIGFscmVhZHkgdXNlZDogIitfW3RdKyIgYXMgIit0KTt2W2VdPXQsX1t0XT1lLGdbZV09Z1t0XT1yO2Zvcih2YXIgbiBpbiBFKXt2YXIgbz1FW25dO29bZV0mJihvW3RdPW9bdF18fG9bZV0pfX0scmVzZXQ6ZnVuY3Rpb24oKXtuLnJlc2V0KCksdGhpcy5lcnJvcj1udWxsLHRoaXMubWlzc2luZz1bXSx0aGlzLnZhbGlkPSEwfSxtaXNzaW5nOltdLGVycm9yOm51bGwsdmFsaWQ6ITAsbm9ybVNjaGVtYTpzLHJlc29sdmVVcmw6aSxnZXREb2N1bWVudFVyaTphLGVycm9yQ29kZXM6dn07cmV0dXJuIG8ubGFuZ3VhZ2UoZXx8ImVuIiksb31PYmplY3Qua2V5c3x8KE9iamVjdC5rZXlzPWZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx0PSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIikscj1bInRvU3RyaW5nIiwidG9Mb2NhbGVTdHJpbmciLCJ2YWx1ZU9mIiwiaGFzT3duUHJvcGVydHkiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJjb25zdHJ1Y3RvciJdLG49ci5sZW5ndGg7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKCJvYmplY3QiIT10eXBlb2YgbyYmImZ1bmN0aW9uIiE9dHlwZW9mIG98fG51bGw9PT1vKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5rZXlzIGNhbGxlZCBvbiBub24tb2JqZWN0Iik7dmFyIGk9W107Zm9yKHZhciBhIGluIG8pZS5jYWxsKG8sYSkmJmkucHVzaChhKTtpZih0KWZvcih2YXIgcz0wO3M8bjtzKyspZS5jYWxsKG8scltzXSkmJmkucHVzaChyW3NdKTtyZXR1cm4gaX19KCkpLE9iamVjdC5jcmVhdGV8fChPYmplY3QuY3JlYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZnVuY3Rpb24odCl7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJPYmplY3QuY3JlYXRlIGltcGxlbWVudGF0aW9uIG9ubHkgYWNjZXB0cyBvbmUgcGFyYW1ldGVyLiIpO3JldHVybiBlLnByb3RvdHlwZT10LG5ldyBlfX0oKSksQXJyYXkuaXNBcnJheXx8KEFycmF5LmlzQXJyYXk9ZnVuY3Rpb24oZSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0pLEFycmF5LnByb3RvdHlwZS5pbmRleE9mfHwoQXJyYXkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24oZSl7aWYobnVsbD09PXRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgdD1PYmplY3QodGhpcykscj10Lmxlbmd0aD4+PjA7aWYoMD09PXIpcmV0dXJuLTE7dmFyIG49MDtpZihhcmd1bWVudHMubGVuZ3RoPjEmJihuPU51bWJlcihhcmd1bWVudHNbMV0pLG4hPT1uP249MDowIT09biYmbiE9PTEvMCYmbiE9PS0oMS8wKSYmKG49KG4+MHx8LTEpKk1hdGguZmxvb3IoTWF0aC5hYnMobikpKSksbj49cilyZXR1cm4tMTtmb3IodmFyIG89bj49MD9uOk1hdGgubWF4KHItTWF0aC5hYnMobiksMCk7bzxyO28rKylpZihvIGluIHQmJnRbb109PT1lKXJldHVybiBvO3JldHVybi0xfSksT2JqZWN0LmlzRnJvemVufHwoT2JqZWN0LmlzRnJvemVuPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0idHY0X3Rlc3RfZnJvemVuX2tleSI7ZS5oYXNPd25Qcm9wZXJ0eSh0KTspdCs9TWF0aC5yYW5kb20oKTt0cnl7cmV0dXJuIGVbdF09ITAsZGVsZXRlIGVbdF0sITF9Y2F0Y2gocil7cmV0dXJuITB9fSk7dmFyIHA9eyIrIjohMCwiIyI6ITAsIi4iOiEwLCIvIjohMCwiOyI6ITAsIj8iOiEwLCImIjohMH0sZD17IioiOiEwfTtyLnByb3RvdHlwZT17dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZW1wbGF0ZX0sZmlsbEZyb21PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZmlsbChmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfX07dmFyIGg9ZnVuY3Rpb24oZSx0LHIsbixvKXtpZih0aGlzLm1pc3Npbmc9W10sdGhpcy5taXNzaW5nTWFwPXt9LHRoaXMuZm9ybWF0VmFsaWRhdG9ycz1lP09iamVjdC5jcmVhdGUoZS5mb3JtYXRWYWxpZGF0b3JzKTp7fSx0aGlzLnNjaGVtYXM9ZT9PYmplY3QuY3JlYXRlKGUuc2NoZW1hcyk6e30sdGhpcy5jb2xsZWN0TXVsdGlwbGU9dCx0aGlzLmVycm9ycz1bXSx0aGlzLmhhbmRsZUVycm9yPXQ/dGhpcy5jb2xsZWN0RXJyb3I6dGhpcy5yZXR1cm5FcnJvcixuJiYodGhpcy5jaGVja1JlY3Vyc2l2ZT0hMCx0aGlzLnNjYW5uZWQ9W10sdGhpcy5zY2FubmVkRnJvemVuPVtdLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXM9W10sdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9ycz1bXSx0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXk9InR2NF92YWxpZGF0aW9uX2lkIix0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXk9InR2NF92YWxpZGF0aW9uX2Vycm9yc19pZCIpLG8mJih0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXM9ITAsdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSksdGhpcy5lcnJvclJlcG9ydGVyPXJ8fHUoImVuIiksInN0cmluZyI9PXR5cGVvZiB0aGlzLmVycm9yUmVwb3J0ZXIpdGhyb3cgbmV3IEVycm9yKCJkZWJ1ZyIpO2lmKHRoaXMuZGVmaW5lZEtleXdvcmRzPXt9LGUpZm9yKHZhciBpIGluIGUuZGVmaW5lZEtleXdvcmRzKXRoaXMuZGVmaW5lZEtleXdvcmRzW2ldPWUuZGVmaW5lZEtleXdvcmRzW2ldLnNsaWNlKDApfTtoLnByb3RvdHlwZS5kZWZpbmVLZXl3b3JkPWZ1bmN0aW9uKGUsdCl7dGhpcy5kZWZpbmVkS2V5d29yZHNbZV09dGhpcy5kZWZpbmVkS2V5d29yZHNbZV18fFtdLHRoaXMuZGVmaW5lZEtleXdvcmRzW2VdLnB1c2godCl9LGgucHJvdG90eXBlLmNyZWF0ZUVycm9yPWZ1bmN0aW9uKGUsdCxyLG4sbyxpLGEpe3ZhciBzPW5ldyBsKGUsdCxyLG4sbyk7cmV0dXJuIHMubWVzc2FnZT10aGlzLmVycm9yUmVwb3J0ZXIocyxpLGEpLHN9LGgucHJvdG90eXBlLnJldHVybkVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxoLnByb3RvdHlwZS5jb2xsZWN0RXJyb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJnRoaXMuZXJyb3JzLnB1c2goZSksbnVsbH0saC5wcm90b3R5cGUucHJlZml4RXJyb3JzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49ZTtuPHRoaXMuZXJyb3JzLmxlbmd0aDtuKyspdGhpcy5lcnJvcnNbbl09dGhpcy5lcnJvcnNbbl0ucHJlZml4V2l0aCh0LHIpO3JldHVybiB0aGlzfSxoLnByb3RvdHlwZS5iYW5Vbmtub3duUHJvcGVydGllcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKXt2YXIgbj10aGlzLmNyZWF0ZUVycm9yKHYuVU5LTk9XTl9QUk9QRVJUWSx7cGF0aDpyfSxyLCIiLG51bGwsZSx0KSxvPXRoaXMuaGFuZGxlRXJyb3Iobik7aWYobylyZXR1cm4gb31yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUuYWRkRm9ybWF0PWZ1bmN0aW9uKGUsdCl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IodmFyIHIgaW4gZSl0aGlzLmFkZEZvcm1hdChyLGVbcl0pO3JldHVybiB0aGlzfXRoaXMuZm9ybWF0VmFsaWRhdG9yc1tlXT10fSxoLnByb3RvdHlwZS5yZXNvbHZlUmVmcz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PWUuJHJlZil7aWYodD10fHx7fSx0W2UuJHJlZl0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5DSVJDVUxBUl9SRUZFUkVOQ0Use3VybHM6T2JqZWN0LmtleXModCkuam9pbigiLCAiKX0sIiIsIiIsbnVsbCx2b2lkIDAsZSk7dFtlLiRyZWZdPSEwLGU9dGhpcy5nZXRTY2hlbWEoZS4kcmVmLHQpfXJldHVybiBlfSxoLnByb3RvdHlwZS5nZXRTY2hlbWE9ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZih2b2lkIDAhPT10aGlzLnNjaGVtYXNbZV0pcmV0dXJuIHI9dGhpcy5zY2hlbWFzW2VdLHRoaXMucmVzb2x2ZVJlZnMocix0KTt2YXIgbj1lLG89IiI7aWYoZS5pbmRleE9mKCIjIikhPT0tMSYmKG89ZS5zdWJzdHJpbmcoZS5pbmRleE9mKCIjIikrMSksbj1lLnN1YnN0cmluZygwLGUuaW5kZXhPZigiIyIpKSksIm9iamVjdCI9PXR5cGVvZiB0aGlzLnNjaGVtYXNbbl0pe3I9dGhpcy5zY2hlbWFzW25dO3ZhciBpPWRlY29kZVVSSUNvbXBvbmVudChvKTtpZigiIj09PWkpcmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMocix0KTtpZigiLyIhPT1pLmNoYXJBdCgwKSlyZXR1cm47Zm9yKHZhciBhPWkuc3BsaXQoIi8iKS5zbGljZSgxKSxzPTA7czxhLmxlbmd0aDtzKyspe3ZhciB1PWFbc10ucmVwbGFjZSgvfjEvZywiLyIpLnJlcGxhY2UoL34wL2csIn4iKTtpZih2b2lkIDA9PT1yW3VdKXtyPXZvaWQgMDticmVha31yPXJbdV19aWYodm9pZCAwIT09cilyZXR1cm4gdGhpcy5yZXNvbHZlUmVmcyhyLHQpfXZvaWQgMD09PXRoaXMubWlzc2luZ1tuXSYmKHRoaXMubWlzc2luZy5wdXNoKG4pLHRoaXMubWlzc2luZ1tuXT1uLHRoaXMubWlzc2luZ01hcFtuXT1uKX0saC5wcm90b3R5cGUuc2VhcmNoU2NoZW1hcz1mdW5jdGlvbihlLHQpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspdGhpcy5zZWFyY2hTY2hlbWFzKGVbcl0sdCk7ZWxzZSBpZihlJiYib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciPT10eXBlb2YgZS5pZCYmYyh0LGUuaWQpJiZ2b2lkIDA9PT10aGlzLnNjaGVtYXNbZS5pZF0mJih0aGlzLnNjaGVtYXNbZS5pZF09ZSk7Zm9yKHZhciBuIGluIGUpaWYoImVudW0iIT09bilpZigib2JqZWN0Ij09dHlwZW9mIGVbbl0pdGhpcy5zZWFyY2hTY2hlbWFzKGVbbl0sdCk7ZWxzZSBpZigiJHJlZiI9PT1uKXt2YXIgbz1hKGVbbl0pO28mJnZvaWQgMD09PXRoaXMuc2NoZW1hc1tvXSYmdm9pZCAwPT09dGhpcy5taXNzaW5nTWFwW29dJiYodGhpcy5taXNzaW5nTWFwW29dPW8pfX19LGgucHJvdG90eXBlLmFkZFNjaGVtYT1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0KXtpZigib2JqZWN0IiE9dHlwZW9mIGV8fCJzdHJpbmciIT10eXBlb2YgZS5pZClyZXR1cm47dD1lLGU9dC5pZH1lPT09YShlKSsiIyImJihlPWEoZSkpLHRoaXMuc2NoZW1hc1tlXT10LGRlbGV0ZSB0aGlzLm1pc3NpbmdNYXBbZV0scyh0LGUpLHRoaXMuc2VhcmNoU2NoZW1hcyh0LGUpfSxoLnByb3RvdHlwZS5nZXRTY2hlbWFNYXA9ZnVuY3Rpb24oKXt2YXIgZT17fTtmb3IodmFyIHQgaW4gdGhpcy5zY2hlbWFzKWVbdF09dGhpcy5zY2hlbWFzW3RdO3JldHVybiBlfSxoLnByb3RvdHlwZS5nZXRTY2hlbWFVcmlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiB0aGlzLnNjaGVtYXMpZSYmIWUudGVzdChyKXx8dC5wdXNoKHIpO3JldHVybiB0fSxoLnByb3RvdHlwZS5nZXRNaXNzaW5nVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5taXNzaW5nTWFwKWUmJiFlLnRlc3Qocil8fHQucHVzaChyKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuZHJvcFNjaGVtYXM9ZnVuY3Rpb24oKXt0aGlzLnNjaGVtYXM9e30sdGhpcy5yZXNldCgpfSxoLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMubWlzc2luZz1bXSx0aGlzLm1pc3NpbmdNYXA9e30sdGhpcy5lcnJvcnM9W119LGgucHJvdG90eXBlLnZhbGlkYXRlQWxsPWZ1bmN0aW9uKGUsdCxyLG4sbyl7dmFyIGk7aWYodD10aGlzLnJlc29sdmVSZWZzKHQpLCF0KXJldHVybiBudWxsO2lmKHQgaW5zdGFuY2VvZiBsKXJldHVybiB0aGlzLmVycm9ycy5wdXNoKHQpLHQ7dmFyIGEscz10aGlzLmVycm9ycy5sZW5ndGgsdT1udWxsLGM9bnVsbDtpZih0aGlzLmNoZWNrUmVjdXJzaXZlJiZlJiYib2JqZWN0Ij09dHlwZW9mIGUpe2lmKGk9IXRoaXMuc2Nhbm5lZC5sZW5ndGgsZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldKXt2YXIgZj1lW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0uaW5kZXhPZih0KTtpZihmIT09LTEpcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLmNvbmNhdChlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bZl0pLG51bGx9aWYoT2JqZWN0LmlzRnJvemVuKGUpJiYoYT10aGlzLnNjYW5uZWRGcm96ZW4uaW5kZXhPZihlKSxhIT09LTEpKXt2YXIgcD10aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2FdLmluZGV4T2YodCk7aWYocCE9PS0xKXJldHVybiB0aGlzLmVycm9ycz10aGlzLmVycm9ycy5jb25jYXQodGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1thXVtwXSksbnVsbH1pZih0aGlzLnNjYW5uZWQucHVzaChlKSxPYmplY3QuaXNGcm96ZW4oZSkpYT09PS0xJiYoYT10aGlzLnNjYW5uZWRGcm96ZW4ubGVuZ3RoLHRoaXMuc2Nhbm5lZEZyb3plbi5wdXNoKGUpLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXMucHVzaChbXSkpLHU9dGhpcy5zY2FubmVkRnJvemVuU2NoZW1hc1thXS5sZW5ndGgsdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hc1thXVt1XT10LHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbYV1bdV09W107ZWxzZXtpZighZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldKXRyeXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXkse3ZhbHVlOltdLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHRoaXMudmFsaWRhdGlvbkVycm9yc0tleSx7dmFsdWU6W10sY29uZmlndXJhYmxlOiEwfSl9Y2F0Y2goZCl7ZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldPVtdLGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XT1bXX1jPWVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XS5sZW5ndGgsZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldW2NdPXQsZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2NdPVtdfX12YXIgaD10aGlzLmVycm9ycy5sZW5ndGgseT10aGlzLnZhbGlkYXRlQmFzaWMoZSx0LG8pfHx0aGlzLnZhbGlkYXRlTnVtZXJpYyhlLHQsbyl8fHRoaXMudmFsaWRhdGVTdHJpbmcoZSx0LG8pfHx0aGlzLnZhbGlkYXRlQXJyYXkoZSx0LG8pfHx0aGlzLnZhbGlkYXRlT2JqZWN0KGUsdCxvKXx8dGhpcy52YWxpZGF0ZUNvbWJpbmF0aW9ucyhlLHQsbyl8fHRoaXMudmFsaWRhdGVIeXBlcm1lZGlhKGUsdCxvKXx8dGhpcy52YWxpZGF0ZUZvcm1hdChlLHQsbyl8fHRoaXMudmFsaWRhdGVEZWZpbmVkS2V5d29yZHMoZSx0LG8pfHxudWxsO2lmKGkpe2Zvcig7dGhpcy5zY2FubmVkLmxlbmd0aDspe3ZhciBtPXRoaXMuc2Nhbm5lZC5wb3AoKTtkZWxldGUgbVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldfXRoaXMuc2Nhbm5lZEZyb3plbj1bXSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzPVtdfWlmKHl8fGghPT10aGlzLmVycm9ycy5sZW5ndGgpZm9yKDtyJiZyLmxlbmd0aHx8biYmbi5sZW5ndGg7KXt2YXIgdj1yJiZyLmxlbmd0aD8iIityLnBvcCgpOm51bGwsXz1uJiZuLmxlbmd0aD8iIituLnBvcCgpOm51bGw7eSYmKHk9eS5wcmVmaXhXaXRoKHYsXykpLHRoaXMucHJlZml4RXJyb3JzKGgsdixfKX1yZXR1cm4gbnVsbCE9PXU/dGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1thXVt1XT10aGlzLmVycm9ycy5zbGljZShzKTpudWxsIT09YyYmKGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtjXT10aGlzLmVycm9ycy5zbGljZShzKSksdGhpcy5oYW5kbGVFcnJvcih5KX0saC5wcm90b3R5cGUudmFsaWRhdGVGb3JtYXQ9ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIHQuZm9ybWF0fHwhdGhpcy5mb3JtYXRWYWxpZGF0b3JzW3QuZm9ybWF0XSlyZXR1cm4gbnVsbDt2YXIgcj10aGlzLmZvcm1hdFZhbGlkYXRvcnNbdC5mb3JtYXRdLmNhbGwobnVsbCxlLHQpO3JldHVybiJzdHJpbmciPT10eXBlb2Ygcnx8Im51bWJlciI9PXR5cGVvZiByP3RoaXMuY3JlYXRlRXJyb3Iodi5GT1JNQVRfQ1VTVE9NLHttZXNzYWdlOnJ9LCIiLCIvZm9ybWF0IixudWxsLGUsdCk6ciYmIm9iamVjdCI9PXR5cGVvZiByP3RoaXMuY3JlYXRlRXJyb3Iodi5GT1JNQVRfQ1VTVE9NLHttZXNzYWdlOnIubWVzc2FnZXx8Ij8ifSxyLmRhdGFQYXRofHwiIixyLnNjaGVtYVBhdGh8fCIvZm9ybWF0IixudWxsLGUsdCk6bnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVEZWZpbmVkS2V5d29yZHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbiBpbiB0aGlzLmRlZmluZWRLZXl3b3JkcylpZigidW5kZWZpbmVkIiE9dHlwZW9mIHRbbl0pZm9yKHZhciBvPXRoaXMuZGVmaW5lZEtleXdvcmRzW25dLGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIGE9b1tpXSxzPWEoZSx0W25dLHQscik7aWYoInN0cmluZyI9PXR5cGVvZiBzfHwibnVtYmVyIj09dHlwZW9mIHMpcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5LRVlXT1JEX0NVU1RPTSx7a2V5Om4sbWVzc2FnZTpzfSwiIiwiIixudWxsLGUsdCkucHJlZml4V2l0aChudWxsLG4pO2lmKHMmJiJvYmplY3QiPT10eXBlb2Ygcyl7dmFyIHU9cy5jb2RlO2lmKCJzdHJpbmciPT10eXBlb2YgdSl7aWYoIXZbdV0pdGhyb3cgbmV3IEVycm9yKCJVbmRlZmluZWQgZXJyb3IgY29kZSAodXNlIGRlZmluZUVycm9yKTogIit1KTt1PXZbdV19ZWxzZSJudW1iZXIiIT10eXBlb2YgdSYmKHU9di5LRVlXT1JEX0NVU1RPTSk7dmFyIGw9Im9iamVjdCI9PXR5cGVvZiBzLm1lc3NhZ2U/cy5tZXNzYWdlOntrZXk6bixtZXNzYWdlOnMubWVzc2FnZXx8Ij8ifSxjPXMuc2NoZW1hUGF0aHx8Ii8iK24ucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIik7cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IodSxsLHMuZGF0YVBhdGh8fG51bGwsYyxudWxsLGUsdCl9fXJldHVybiBudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZUJhc2ljPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbjtyZXR1cm4obj10aGlzLnZhbGlkYXRlVHlwZShlLHQscikpP24ucHJlZml4V2l0aChudWxsLCJ0eXBlIik6KG49dGhpcy52YWxpZGF0ZUVudW0oZSx0LHIpKT9uLnByZWZpeFdpdGgobnVsbCwidHlwZSIpOm51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlVHlwZT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQudHlwZSlyZXR1cm4gbnVsbDt2YXIgcj10eXBlb2YgZTtudWxsPT09ZT9yPSJudWxsIjpBcnJheS5pc0FycmF5KGUpJiYocj0iYXJyYXkiKTt2YXIgbj10LnR5cGU7QXJyYXkuaXNBcnJheShuKXx8KG49W25dKTtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIGk9bltvXTtpZihpPT09cnx8ImludGVnZXIiPT09aSYmIm51bWJlciI9PT1yJiZlJTE9PT0wKXJldHVybiBudWxsfXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuSU5WQUxJRF9UWVBFLHt0eXBlOnIsZXhwZWN0ZWQ6bi5qb2luKCIvIil9LCIiLCIiLG51bGwsZSx0KX0saC5wcm90b3R5cGUudmFsaWRhdGVFbnVtPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dFsiZW51bSJdKXJldHVybiBudWxsO2Zvcih2YXIgcj0wO3I8dFsiZW51bSJdLmxlbmd0aDtyKyspe3ZhciBvPXRbImVudW0iXVtyXTtpZihuKGUsbykpcmV0dXJuIG51bGx9cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5FTlVNX01JU01BVENILHt2YWx1ZToidW5kZWZpbmVkIiE9dHlwZW9mIEpTT04/SlNPTi5zdHJpbmdpZnkoZSk6ZX0sIiIsIiIsbnVsbCxlLHQpfSxoLnByb3RvdHlwZS52YWxpZGF0ZU51bWVyaWM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnZhbGlkYXRlTXVsdGlwbGVPZihlLHQscil8fHRoaXMudmFsaWRhdGVNaW5NYXgoZSx0LHIpfHx0aGlzLnZhbGlkYXRlTmFOKGUsdCxyKXx8bnVsbH07dmFyIHk9TWF0aC5wb3coMiwtNTEpLG09MS15O2gucHJvdG90eXBlLnZhbGlkYXRlTXVsdGlwbGVPZj1mdW5jdGlvbihlLHQpe3ZhciByPXQubXVsdGlwbGVPZnx8dC5kaXZpc2libGVCeTtpZih2b2lkIDA9PT1yKXJldHVybiBudWxsO2lmKCJudW1iZXIiPT10eXBlb2YgZSl7dmFyIG49ZS9yJTE7aWYobj49eSYmbjxtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuTlVNQkVSX01VTFRJUExFX09GLHt2YWx1ZTplLG11bHRpcGxlT2Y6cn0sIiIsIiIsbnVsbCxlLHQpfXJldHVybiBudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZU1pbk1heD1mdW5jdGlvbihlLHQpe2lmKCJudW1iZXIiIT10eXBlb2YgZSlyZXR1cm4gbnVsbDtpZih2b2lkIDAhPT10Lm1pbmltdW0pe2lmKGU8dC5taW5pbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuTlVNQkVSX01JTklNVU0se3ZhbHVlOmUsbWluaW11bTp0Lm1pbmltdW19LCIiLCIvbWluaW11bSIsbnVsbCxlLHQpO2lmKHQuZXhjbHVzaXZlTWluaW11bSYmZT09PXQubWluaW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih2Lk5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRSx7dmFsdWU6ZSxtaW5pbXVtOnQubWluaW11bX0sIiIsIi9leGNsdXNpdmVNaW5pbXVtIixudWxsLGUsdCl9aWYodm9pZCAwIT09dC5tYXhpbXVtKXtpZihlPnQubWF4aW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih2Lk5VTUJFUl9NQVhJTVVNLHt2YWx1ZTplLG1heGltdW06dC5tYXhpbXVtfSwiIiwiL21heGltdW0iLG51bGwsZSx0KTtpZih0LmV4Y2x1c2l2ZU1heGltdW0mJmU9PT10Lm1heGltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5OVU1CRVJfTUFYSU1VTV9FWENMVVNJVkUse3ZhbHVlOmUsbWF4aW11bTp0Lm1heGltdW19LCIiLCIvZXhjbHVzaXZlTWF4aW11bSIsbnVsbCxlLHQpfXJldHVybiBudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZU5hTj1mdW5jdGlvbihlLHQpe3JldHVybiJudW1iZXIiIT10eXBlb2YgZT9udWxsOmlzTmFOKGUpPT09ITB8fGU9PT0xLzB8fGU9PT0tKDEvMCk/dGhpcy5jcmVhdGVFcnJvcih2Lk5VTUJFUl9OT1RfQV9OVU1CRVIse3ZhbHVlOmV9LCIiLCIvdHlwZSIsbnVsbCxlLHQpOm51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy52YWxpZGF0ZVN0cmluZ0xlbmd0aChlLHQscil8fHRoaXMudmFsaWRhdGVTdHJpbmdQYXR0ZXJuKGUsdCxyKXx8bnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmdMZW5ndGg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGU/bnVsbDp2b2lkIDAhPT10Lm1pbkxlbmd0aCYmZS5sZW5ndGg8dC5taW5MZW5ndGg/dGhpcy5jcmVhdGVFcnJvcih2LlNUUklOR19MRU5HVEhfU0hPUlQse2xlbmd0aDplLmxlbmd0aCxtaW5pbXVtOnQubWluTGVuZ3RofSwiIiwiL21pbkxlbmd0aCIsbnVsbCxlLHQpOnZvaWQgMCE9PXQubWF4TGVuZ3RoJiZlLmxlbmd0aD50Lm1heExlbmd0aD90aGlzLmNyZWF0ZUVycm9yKHYuU1RSSU5HX0xFTkdUSF9MT05HLHtsZW5ndGg6ZS5sZW5ndGgsbWF4aW11bTp0Lm1heExlbmd0aH0sIiIsIi9tYXhMZW5ndGgiLG51bGwsZSx0KTpudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ1BhdHRlcm49ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCJzdHJpbmciIT10eXBlb2YgdC5wYXR0ZXJuJiYhKHQucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCkpcmV0dXJuIG51bGw7dmFyIHI7aWYodC5wYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKXI9dC5wYXR0ZXJuO2Vsc2V7dmFyIG4sbz0iIixpPXQucGF0dGVybi5tYXRjaCgvXlwvKC4rKVwvKFtpbWddKikkLyk7aT8obj1pWzFdLG89aVsyXSk6bj10LnBhdHRlcm4scj1uZXcgUmVnRXhwKG4sbyl9cmV0dXJuIHIudGVzdChlKT9udWxsOnRoaXMuY3JlYXRlRXJyb3Iodi5TVFJJTkdfUEFUVEVSTix7cGF0dGVybjp0LnBhdHRlcm59LCIiLCIvcGF0dGVybiIsbnVsbCxlLHQpfSxoLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT90aGlzLnZhbGlkYXRlQXJyYXlMZW5ndGgoZSx0LHIpfHx0aGlzLnZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcyhlLHQscil8fHRoaXMudmFsaWRhdGVBcnJheUl0ZW1zKGUsdCxyKXx8bnVsbDpudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5TGVuZ3RoPWZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIHZvaWQgMCE9PXQubWluSXRlbXMmJmUubGVuZ3RoPHQubWluSXRlbXMmJihyPXRoaXMuY3JlYXRlRXJyb3Iodi5BUlJBWV9MRU5HVEhfU0hPUlQse2xlbmd0aDplLmxlbmd0aCxtaW5pbXVtOnQubWluSXRlbXN9LCIiLCIvbWluSXRlbXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOnZvaWQgMCE9PXQubWF4SXRlbXMmJmUubGVuZ3RoPnQubWF4SXRlbXMmJihyPXRoaXMuY3JlYXRlRXJyb3Iodi5BUlJBWV9MRU5HVEhfTE9ORyx7bGVuZ3RoOmUubGVuZ3RoLG1heGltdW06dC5tYXhJdGVtc30sIiIsIi9tYXhJdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6bnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVBcnJheVVuaXF1ZUl0ZW1zPWZ1bmN0aW9uKGUsdCl7aWYodC51bmlxdWVJdGVtcylmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKylmb3IodmFyIG89cisxO288ZS5sZW5ndGg7bysrKWlmKG4oZVtyXSxlW29dKSl7dmFyIGk9dGhpcy5jcmVhdGVFcnJvcih2LkFSUkFZX1VOSVFVRSx7bWF0Y2gxOnIsbWF0Y2gyOm99LCIiLCIvdW5pcXVlSXRlbXMiLG51bGwsZSx0KTtpZih0aGlzLmhhbmRsZUVycm9yKGkpKXJldHVybiBpfXJldHVybiBudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5SXRlbXM9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQuaXRlbXMpcmV0dXJuIG51bGw7dmFyIG4sbztpZihBcnJheS5pc0FycmF5KHQuaXRlbXMpKXtmb3Iobz0wO288ZS5sZW5ndGg7bysrKWlmKG88dC5pdGVtcy5sZW5ndGgpe2lmKG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQuaXRlbXNbb10sW29dLFsiaXRlbXMiLG9dLHIrIi8iK28pKXJldHVybiBufWVsc2UgaWYodm9pZCAwIT09dC5hZGRpdGlvbmFsSXRlbXMpaWYoImJvb2xlYW4iPT10eXBlb2YgdC5hZGRpdGlvbmFsSXRlbXMpe2lmKCF0LmFkZGl0aW9uYWxJdGVtcyYmKG49dGhpcy5jcmVhdGVFcnJvcih2LkFSUkFZX0FERElUSU9OQUxfSVRFTVMse30sIi8iK28sIi9hZGRpdGlvbmFsSXRlbXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQuYWRkaXRpb25hbEl0ZW1zLFtvXSxbImFkZGl0aW9uYWxJdGVtcyJdLHIrIi8iK28pKXJldHVybiBufWVsc2UgZm9yKG89MDtvPGUubGVuZ3RoO28rKylpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtvXSx0Lml0ZW1zLFtvXSxbIml0ZW1zIl0scisiLyIrbykpcmV0dXJuIG47cmV0dXJuIG51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4ib2JqZWN0IiE9dHlwZW9mIGV8fG51bGw9PT1lfHxBcnJheS5pc0FycmF5KGUpP251bGw6dGhpcy52YWxpZGF0ZU9iamVjdE1pbk1heFByb3BlcnRpZXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT2JqZWN0UmVxdWlyZWRQcm9wZXJ0aWVzKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT2JqZWN0RGVwZW5kZW5jaWVzKGUsdCxyKXx8bnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3RNaW5NYXhQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbj1PYmplY3Qua2V5cyhlKTtyZXR1cm4gdm9pZCAwIT09dC5taW5Qcm9wZXJ0aWVzJiZuLmxlbmd0aDx0Lm1pblByb3BlcnRpZXMmJihyPXRoaXMuY3JlYXRlRXJyb3Iodi5PQkpFQ1RfUFJPUEVSVElFU19NSU5JTVVNLHtwcm9wZXJ0eUNvdW50Om4ubGVuZ3RoLG1pbmltdW06dC5taW5Qcm9wZXJ0aWVzfSwiIiwiL21pblByb3BlcnRpZXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOnZvaWQgMCE9PXQubWF4UHJvcGVydGllcyYmbi5sZW5ndGg+dC5tYXhQcm9wZXJ0aWVzJiYocj10aGlzLmNyZWF0ZUVycm9yKHYuT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTSx7cHJvcGVydHlDb3VudDpuLmxlbmd0aCxtYXhpbXVtOnQubWF4UHJvcGVydGllc30sIiIsIi9tYXhQcm9wZXJ0aWVzIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjpudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFJlcXVpcmVkUHJvcGVydGllcz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PXQucmVxdWlyZWQpZm9yKHZhciByPTA7cjx0LnJlcXVpcmVkLmxlbmd0aDtyKyspe3ZhciBuPXQucmVxdWlyZWRbcl07aWYodm9pZCAwPT09ZVtuXSl7dmFyIG89dGhpcy5jcmVhdGVFcnJvcih2Lk9CSkVDVF9SRVFVSVJFRCx7a2V5Om59LCIiLCIvcmVxdWlyZWQvIityLG51bGwsZSx0KTtpZih0aGlzLmhhbmRsZUVycm9yKG8pKXJldHVybiBvfX1yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3RQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbjtmb3IodmFyIG8gaW4gZSl7dmFyIGk9cisiLyIrby5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSxhPSExO2lmKHZvaWQgMCE9PXQucHJvcGVydGllcyYmdm9pZCAwIT09dC5wcm9wZXJ0aWVzW29dJiYoYT0hMCxuPXRoaXMudmFsaWRhdGVBbGwoZVtvXSx0LnByb3BlcnRpZXNbb10sW29dLFsicHJvcGVydGllcyIsb10saSkpKXJldHVybiBuO2lmKHZvaWQgMCE9PXQucGF0dGVyblByb3BlcnRpZXMpZm9yKHZhciBzIGluIHQucGF0dGVyblByb3BlcnRpZXMpe3ZhciB1PW5ldyBSZWdFeHAocyk7aWYodS50ZXN0KG8pJiYoYT0hMCxuPXRoaXMudmFsaWRhdGVBbGwoZVtvXSx0LnBhdHRlcm5Qcm9wZXJ0aWVzW3NdLFtvXSxbInBhdHRlcm5Qcm9wZXJ0aWVzIixzXSxpKSkpcmV0dXJuIG59aWYoYSl0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLmtub3duUHJvcGVydHlQYXRoc1tpXT0hMCxkZWxldGUgdGhpcy51bmtub3duUHJvcGVydHlQYXRoc1tpXSk7ZWxzZSBpZih2b2lkIDAhPT10LmFkZGl0aW9uYWxQcm9wZXJ0aWVzKXtpZih0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLmtub3duUHJvcGVydHlQYXRoc1tpXT0hMCxkZWxldGUgdGhpcy51bmtub3duUHJvcGVydHlQYXRoc1tpXSksImJvb2xlYW4iPT10eXBlb2YgdC5hZGRpdGlvbmFsUHJvcGVydGllcyl7aWYoIXQuYWRkaXRpb25hbFByb3BlcnRpZXMmJihuPXRoaXMuY3JlYXRlRXJyb3Iodi5PQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTLHtrZXk6b30sIiIsIi9hZGRpdGlvbmFsUHJvcGVydGllcyIsbnVsbCxlLHQpLnByZWZpeFdpdGgobyxudWxsKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQuYWRkaXRpb25hbFByb3BlcnRpZXMsW29dLFsiYWRkaXRpb25hbFByb3BlcnRpZXMiXSxpKSlyZXR1cm4gbn1lbHNlIHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmIXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2ldJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRoc1tpXT0hMCl9cmV0dXJuIG51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0RGVwZW5kZW5jaWVzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbjtpZih2b2lkIDAhPT10LmRlcGVuZGVuY2llcylmb3IodmFyIG8gaW4gdC5kZXBlbmRlbmNpZXMpaWYodm9pZCAwIT09ZVtvXSl7dmFyIGk9dC5kZXBlbmRlbmNpZXNbb107aWYoInN0cmluZyI9PXR5cGVvZiBpKXtpZih2b2lkIDA9PT1lW2ldJiYobj10aGlzLmNyZWF0ZUVycm9yKHYuT0JKRUNUX0RFUEVOREVOQ1lfS0VZLHtrZXk6byxtaXNzaW5nOml9LCIiLCIiLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbykucHJlZml4V2l0aChudWxsLCJkZXBlbmRlbmNpZXMiKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKEFycmF5LmlzQXJyYXkoaSkpZm9yKHZhciBhPTA7YTxpLmxlbmd0aDthKyspe3ZhciBzPWlbYV07aWYodm9pZCAwPT09ZVtzXSYmKG49dGhpcy5jcmVhdGVFcnJvcih2Lk9CSkVDVF9ERVBFTkRFTkNZX0tFWSx7a2V5Om8sbWlzc2luZzpzfSwiIiwiLyIrYSxudWxsLGUsdCkucHJlZml4V2l0aChudWxsLG8pLnByZWZpeFdpdGgobnVsbCwiZGVwZW5kZW5jaWVzIiksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwoZSxpLFtdLFsiZGVwZW5kZW5jaWVzIixvXSxyKSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVDb21iaW5hdGlvbnM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnZhbGlkYXRlQWxsT2YoZSx0LHIpfHx0aGlzLnZhbGlkYXRlQW55T2YoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT25lT2YoZSx0LHIpfHx0aGlzLnZhbGlkYXRlTm90KGUsdCxyKXx8bnVsbH0saC5wcm90b3R5cGUudmFsaWRhdGVBbGxPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5hbGxPZilyZXR1cm4gbnVsbDtmb3IodmFyIG4sbz0wO288dC5hbGxPZi5sZW5ndGg7bysrKXt2YXIgaT10LmFsbE9mW29dO2lmKG49dGhpcy52YWxpZGF0ZUFsbChlLGksW10sWyJhbGxPZiIsb10scikpcmV0dXJuIG59cmV0dXJuIG51bGx9LGgucHJvdG90eXBlLnZhbGlkYXRlQW55T2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQuYW55T2YpcmV0dXJuIG51bGw7dmFyIG4sbyxpPVtdLGE9dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxvPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzKTtmb3IodmFyIHM9ITAsdT0wO3U8dC5hbnlPZi5sZW5ndGg7dSsrKXt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9KTt2YXIgbD10LmFueU9mW3VdLGM9dGhpcy5lcnJvcnMubGVuZ3RoLGY9dGhpcy52YWxpZGF0ZUFsbChlLGwsW10sWyJhbnlPZiIsdV0scik7aWYobnVsbD09PWYmJmM9PT10aGlzLmVycm9ycy5sZW5ndGgpe2lmKHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIHAgaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpb1twXT0hMCxkZWxldGUgbltwXTtmb3IodmFyIGQgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylvW2RdfHwobltkXT0hMCk7cz0hMTtjb250aW51ZX1yZXR1cm4gbnVsbH1mJiZpLnB1c2goZi5wcmVmaXhXaXRoKG51bGwsIiIrdSkucHJlZml4V2l0aChudWxsLCJhbnlPZiIpKX1yZXR1cm4gdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz1uLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPW8pLHM/KGk9aS5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2UoYSkpLHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy5jcmVhdGVFcnJvcih2LkFOWV9PRl9NSVNTSU5HLHt9LCIiLCIvYW55T2YiLGksZSx0KSk6dm9pZCAwfSxoLnByb3RvdHlwZS52YWxpZGF0ZU9uZU9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lm9uZU9mKXJldHVybiBudWxsO3ZhciBuLG8saT1udWxsLGE9W10scz10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLG89dGhpcy5rbm93blByb3BlcnR5UGF0aHMpO2Zvcih2YXIgdT0wO3U8dC5vbmVPZi5sZW5ndGg7dSsrKXt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9KTt2YXIgbD10Lm9uZU9mW3VdLGM9dGhpcy5lcnJvcnMubGVuZ3RoLGY9dGhpcy52YWxpZGF0ZUFsbChlLGwsW10sWyJvbmVPZiIsdV0scik7aWYobnVsbD09PWYmJmM9PT10aGlzLmVycm9ycy5sZW5ndGgpe2lmKG51bGwhPT1pKXJldHVybiB0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLHMpLHRoaXMuY3JlYXRlRXJyb3Iodi5PTkVfT0ZfTVVMVElQTEUse2luZGV4MTppLGluZGV4Mjp1fSwiIiwiL29uZU9mIixudWxsLGUsdCk7aWYoaT11LHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyl7Zm9yKHZhciBwIGluIHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzKW9bcF09ITAsZGVsZXRlIG5bcF07Zm9yKHZhciBkIGluIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMpb1tkXXx8KG5bZF09ITApfX1lbHNlIGYmJmEucHVzaChmKX1yZXR1cm4gdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz1uLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPW8pLG51bGw9PT1pPyhhPWEuY29uY2F0KHRoaXMuZXJyb3JzLnNsaWNlKHMpKSx0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLHMpLHRoaXMuY3JlYXRlRXJyb3Iodi5PTkVfT0ZfTUlTU0lORyx7fSwiIiwiL29uZU9mIixhLGUsdCkpOih0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLHMpLG51bGwpfSxoLnByb3RvdHlwZS52YWxpZGF0ZU5vdD1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5ub3QpcmV0dXJuIG51bGw7dmFyIG4sbyxpPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsbz10aGlzLmtub3duUHJvcGVydHlQYXRocyx0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9KTt2YXIgYT10aGlzLnZhbGlkYXRlQWxsKGUsdC5ub3QsbnVsbCxudWxsLHIpLHM9dGhpcy5lcnJvcnMuc2xpY2UoaSk7cmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsaSksdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz1uLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPW8pLG51bGw9PT1hJiYwPT09cy5sZW5ndGg/dGhpcy5jcmVhdGVFcnJvcih2Lk5PVF9QQVNTRUQse30sIiIsIi9ub3QiLG51bGwsZSx0KTpudWxsfSxoLnByb3RvdHlwZS52YWxpZGF0ZUh5cGVybWVkaWE9ZnVuY3Rpb24oZSx0LG4pe2lmKCF0LmxpbmtzKXJldHVybiBudWxsO2Zvcih2YXIgbyxpPTA7aTx0LmxpbmtzLmxlbmd0aDtpKyspe3ZhciBhPXQubGlua3NbaV07aWYoImRlc2NyaWJlZGJ5Ij09PWEucmVsKXtmb3IodmFyIHM9bmV3IHIoYS5ocmVmKSx1PSEwLGw9MDtsPHMudmFyTmFtZXMubGVuZ3RoO2wrKylpZighKHMudmFyTmFtZXNbbF1pbiBlKSl7dT0hMTticmVha31pZih1KXt2YXIgYz1zLmZpbGxGcm9tT2JqZWN0KGUpLGY9eyRyZWY6Y307aWYobz10aGlzLnZhbGlkYXRlQWxsKGUsZixbXSxbImxpbmtzIixpXSxuKSlyZXR1cm4gb319fX07dmFyIHY9e0lOVkFMSURfVFlQRTowLEVOVU1fTUlTTUFUQ0g6MSxBTllfT0ZfTUlTU0lORzoxMCxPTkVfT0ZfTUlTU0lORzoxMSxPTkVfT0ZfTVVMVElQTEU6MTIsTk9UX1BBU1NFRDoxMyxOVU1CRVJfTVVMVElQTEVfT0Y6MTAwLE5VTUJFUl9NSU5JTVVNOjEwMSxOVU1CRVJfTUlOSU1VTV9FWENMVVNJVkU6MTAyLE5VTUJFUl9NQVhJTVVNOjEwMyxOVU1CRVJfTUFYSU1VTV9FWENMVVNJVkU6MTA0LE5VTUJFUl9OT1RfQV9OVU1CRVI6MTA1LFNUUklOR19MRU5HVEhfU0hPUlQ6MjAwLFNUUklOR19MRU5HVEhfTE9ORzoyMDEsU1RSSU5HX1BBVFRFUk46MjAyLE9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU06MzAwLE9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU06MzAxLE9CSkVDVF9SRVFVSVJFRDozMDIsT0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUzozMDMsT0JKRUNUX0RFUEVOREVOQ1lfS0VZOjMwNCxBUlJBWV9MRU5HVEhfU0hPUlQ6NDAwLEFSUkFZX0xFTkdUSF9MT05HOjQwMSxBUlJBWV9VTklRVUU6NDAyLEFSUkFZX0FERElUSU9OQUxfSVRFTVM6NDAzLEZPUk1BVF9DVVNUT006NTAwLEtFWVdPUkRfQ1VTVE9NOjUwMSxDSVJDVUxBUl9SRUZFUkVOQ0U6NjAwLFVOS05PV05fUFJPUEVSVFk6MWUzfSxfPXt9O2Zvcih2YXIgYiBpbiB2KV9bdltiXV09Yjt2YXIgZz17SU5WQUxJRF9UWVBFOiJJbnZhbGlkIHR5cGU6IHt0eXBlfSAoZXhwZWN0ZWQge2V4cGVjdGVkfSkiLEVOVU1fTUlTTUFUQ0g6Ik5vIGVudW0gbWF0Y2ggZm9yOiB7dmFsdWV9IixBTllfT0ZfTUlTU0lORzonRGF0YSBkb2VzIG5vdCBtYXRjaCBhbnkgc2NoZW1hcyBmcm9tICJhbnlPZiInLE9ORV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gIm9uZU9mIicsT05FX09GX01VTFRJUExFOidEYXRhIGlzIHZhbGlkIGFnYWluc3QgbW9yZSB0aGFuIG9uZSBzY2hlbWEgZnJvbSAib25lT2YiOiBpbmRpY2VzIHtpbmRleDF9IGFuZCB7aW5kZXgyfScsTk9UX1BBU1NFRDonRGF0YSBtYXRjaGVzIHNjaGVtYSBmcm9tICJub3QiJyxOVU1CRVJfTVVMVElQTEVfT0Y6IlZhbHVlIHt2YWx1ZX0gaXMgbm90IGEgbXVsdGlwbGUgb2Yge211bHRpcGxlT2Z9IixOVU1CRVJfTUlOSU1VTToiVmFsdWUge3ZhbHVlfSBpcyBsZXNzIHRoYW4gbWluaW11bSB7bWluaW11bX0iLE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRToiVmFsdWUge3ZhbHVlfSBpcyBlcXVhbCB0byBleGNsdXNpdmUgbWluaW11bSB7bWluaW11bX0iLE5VTUJFUl9NQVhJTVVNOiJWYWx1ZSB7dmFsdWV9IGlzIGdyZWF0ZXIgdGhhbiBtYXhpbXVtIHttYXhpbXVtfSIsTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFOiJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtYXhpbXVtIHttYXhpbXVtfSIsTlVNQkVSX05PVF9BX05VTUJFUjoiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSB2YWxpZCBudW1iZXIiLFNUUklOR19MRU5HVEhfU0hPUlQ6IlN0cmluZyBpcyB0b28gc2hvcnQgKHtsZW5ndGh9IGNoYXJzKSwgbWluaW11bSB7bWluaW11bX0iLFNUUklOR19MRU5HVEhfTE9ORzoiU3RyaW5nIGlzIHRvbyBsb25nICh7bGVuZ3RofSBjaGFycyksIG1heGltdW0ge21heGltdW19IixTVFJJTkdfUEFUVEVSTjoiU3RyaW5nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm46IHtwYXR0ZXJufSIsT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTToiVG9vIGZldyBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1pbmltdW0ge21pbmltdW19IixPQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNOiJUb28gbWFueSBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1heGltdW0ge21heGltdW19IixPQkpFQ1RfUkVRVUlSRUQ6Ik1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6IHtrZXl9IixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOiJBZGRpdGlvbmFsIHByb3BlcnRpZXMgbm90IGFsbG93ZWQiLE9CSkVDVF9ERVBFTkRFTkNZX0tFWToiRGVwZW5kZW5jeSBmYWlsZWQgLSBrZXkgbXVzdCBleGlzdDoge21pc3Npbmd9IChkdWUgdG8ga2V5OiB7a2V5fSkiLEFSUkFZX0xFTkdUSF9TSE9SVDoiQXJyYXkgaXMgdG9vIHNob3J0ICh7bGVuZ3RofSksIG1pbmltdW0ge21pbmltdW19IixBUlJBWV9MRU5HVEhfTE9ORzoiQXJyYXkgaXMgdG9vIGxvbmcgKHtsZW5ndGh9KSwgbWF4aW11bSB7bWF4aW11bX0iLEFSUkFZX1VOSVFVRToiQXJyYXkgaXRlbXMgYXJlIG5vdCB1bmlxdWUgKGluZGljZXMge21hdGNoMX0gYW5kIHttYXRjaDJ9KSIsQVJSQVlfQURESVRJT05BTF9JVEVNUzoiQWRkaXRpb25hbCBpdGVtcyBub3QgYWxsb3dlZCIsRk9STUFUX0NVU1RPTToiRm9ybWF0IHZhbGlkYXRpb24gZmFpbGVkICh7bWVzc2FnZX0pIixLRVlXT1JEX0NVU1RPTToiS2V5d29yZCBmYWlsZWQ6IHtrZXl9ICh7bWVzc2FnZX0pIixDSVJDVUxBUl9SRUZFUkVOQ0U6IkNpcmN1bGFyICRyZWZzOiB7dXJsc30iLFVOS05PV05fUFJPUEVSVFk6IlVua25vd24gcHJvcGVydHkgKG5vdCBpbiBzY2hlbWEpIn07bC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGwucHJvdG90eXBlLmNvbnN0cnVjdG9yPWwsbC5wcm90b3R5cGUubmFtZT0iVmFsaWRhdGlvbkVycm9yIixsLnByb3RvdHlwZS5wcmVmaXhXaXRoPWZ1bmN0aW9uKGUsdCl7aWYobnVsbCE9PWUmJihlPWUucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIiksdGhpcy5kYXRhUGF0aD0iLyIrZSt0aGlzLmRhdGFQYXRoKSxudWxsIT09dCYmKHQ9dC5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSx0aGlzLnNjaGVtYVBhdGg9Ii8iK3QrdGhpcy5zY2hlbWFQYXRoKSxudWxsIT09dGhpcy5zdWJFcnJvcnMpZm9yKHZhciByPTA7cjx0aGlzLnN1YkVycm9ycy5sZW5ndGg7cisrKXRoaXMuc3ViRXJyb3JzW3JdLnByZWZpeFdpdGgoZSx0KTtyZXR1cm4gdGhpc307dmFyIEU9e30saj1mKCk7cmV0dXJuIGouYWRkTGFuZ3VhZ2UoImVuLWdiIixnKSxqLnR2ND1qLGp9KX0se31dLDEwMTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxyLk1lc3NhZ2VGYWN0b3J5PXZvaWQgMDt2YXIgbz1lKCIuL21lc3NhZ2UtZmFjdG9yeS9NZXNzYWdlRmFjdG9yeSIpLGk9bihvKTtyLk1lc3NhZ2VGYWN0b3J5PWlbImRlZmF1bHQiXX0seyIuL21lc3NhZ2UtZmFjdG9yeS9NZXNzYWdlRmFjdG9yeSI6MTA0fV0sMTAyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuTWVzc2FnZVR5cGU9ci5NZXNzYWdlPXZvaWQgMDt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obyksYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxzPW4oYSksdT1yLk1lc3NhZ2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLG8sYSl7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpLHRoaXMuaWQ9dCx0aGlzLmZyb209cix0aGlzLnRvPW4sdGhpcy50eXBlPW8sdGhpcy5ib2R5PWF9cmV0dXJuKDAsc1siZGVmYXVsdCJdKShlLFt7a2V5OiJhc3NlcnRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZighZXx8IXQpdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlLCB0b2tlbiB0byBiZSByZW1vdmVkLCBhbmQgYXNzZXJ0ZWRJZGVudGl0eSBtdXN0IGJlIHByb3ZpZGVkIik7dmFyIHI9dGhpcy5ib2R5O3JldHVybiByLmlkVG9rZW49bnVsbCxyLmFzc2VydGVkSWRlbnRpdHk9dCx0aGlzLmJvZHk9cix0aGlzfX0se2tleToiYWRkSWRUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlLCB0b2tlbiB0byBiZSBhZGRlZCwgbXVzdCBiZSBwcm92aWRlZCIpO3ZhciB0PXRoaXMuYm9keTtyZXR1cm4gdC5pZFRva2VuPWUsdGhpcy5ib2R5PXQsdGhpc319LHtrZXk6ImFkZEFjY2Vzc1Rva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UsIHRva2VuIHRvIGJlIGFkZGVkLCBtdXN0IGJlIHByb3ZpZGVkIik7dmFyIHQ9dGhpcy5ib2R5O3JldHVybiB0LmFjY2Vzc1Rva2VuPWUsdGhpcy5ib2R5PXQsdGhpc319XSksZX0oKTtyLk1lc3NhZ2VUeXBlPXtDUkVBVEU6ImNyZWF0ZSIsUkVBRDoicmVhZCIsVVBEQVRFOiJ1cGRhdGUiLERFTEVURToiZGVsZXRlIixTVUJTQ1JJQkU6InN1YnNjcmliZSIsClVOU1VCU0NSSUJFOiJ1bnN1YnNjcmliZSIsUkVTUE9OU0U6InJlc3BvbnNlIixGT1JXQVJEOiJmb3J3YXJkIixFWEVDVVRFOiJleGVjdXRlIn07clsiZGVmYXVsdCJdPXV9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMX1dLDEwMzpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSl7dmFyIHQ9KDAsdVsiZGVmYXVsdCJdKShlKS5yZWR1Y2UoZnVuY3Rpb24odCxyKXtyZXR1cm4gdFtlW3JdXT1yLHR9LHt9KTtyZXR1cm4oMCxhWyJkZWZhdWx0Il0pKCgwLHVbImRlZmF1bHQiXSkoZSkucmVkdWNlKGZ1bmN0aW9uKHQscil7cmV0dXJuIHRbcl09ZVtyXSx0fSxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pKX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5VUERBVEVfT1BFUkFUSU9OPXIuQVRUUklCVVRFX1RZUEU9ci5SRUFTT05fUEhSQVNFPXIuUkVTUE9OU0VfQ09ERT1yLkV4ZWN1dGVNZXNzYWdlQm9keT1yLlJlc3BvbnNlTWVzc2FnZUJvZHk9ci5Gb3J3YXJkTWVzc2FnZUJvZHk9ci5VcGRhdGVNZXNzYWdlQm9keT1yLkRlbGV0ZU1lc3NhZ2VCb2R5PXIuUmVhZE1lc3NhZ2VCb2R5PXIuQ3JlYXRlTWVzc2FnZUJvZHk9ci5NZXNzYWdlQm9keT12b2lkIDA7dmFyIGk9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9mcmVlemUiKSxhPW4oaSkscz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiKSx1PW4ocyksbD1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiKSxjPW4obCksZj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIpLHA9bihmKSxkPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLGg9bihkKSx5PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLG09bih5KSx2PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLF89bih2KTtyLkVudW09bzt2YXIgYj1yLk1lc3NhZ2VCb2R5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixvLGkpeygwLG1bImRlZmF1bHQiXSkodGhpcyxlKSx0aGlzLmlkVG9rZW49dCx0aGlzLmFjY2Vzc1Rva2VuPXIsdGhpcy5yZXNvdXJjZT1uLHRoaXMuc2NoZW1hPW8sdGhpcy5hc3NlcnRlZElkZW50aXR5PWl9cmV0dXJuKDAsX1siZGVmYXVsdCJdKShlLFt7a2V5OiJhZGRWaWEiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigidmlhIFVSTCB0byBiZSBhZGRlZCwgbXVzdCBiZSBwcm92aWRlZCIpO3JldHVybiB0aGlzLnZpYT1lLHRoaXN9fV0pLGV9KCksZz0oci5DcmVhdGVNZXNzYWdlQm9keT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSxhLHMpe2lmKCgwLG1bImRlZmF1bHQiXSkodGhpcyx0KSwhZSl0aHJvdyBuZXcgRXJyb3IoIlRoZSB2YWx1ZSBwYXJhbWV0ZXIgaXMgbnVsbCIpO3ZhciB1PSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxjWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxuLG8saSxhLHMsYSxzKSk7cmV0dXJuIHUudmFsdWU9ZSxyJiYodS5wb2xpY3k9ciksdX1yZXR1cm4oMCxoWyJkZWZhdWx0Il0pKHQsZSksdH0oYiksci5SZWFkTWVzc2FnZUJvZHk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixvLGksYSxzLHUpeygwLG1bImRlZmF1bHQiXSkodGhpcyx0KTt2YXIgbD0oMCxwWyJkZWZhdWx0Il0pKHRoaXMsKDAsY1siZGVmYXVsdCJdKSh0KS5jYWxsKHRoaXMsZSxyLG4sbyxpKSk7cmV0dXJuIGEmJihsLmF0dHJpYnV0ZT1hKSxzJiYobC5jcml0ZXJpYVN5bnRheD1zKSx1JiYobC5jcml0ZXJpYT11KSxsfXJldHVybigwLGhbImRlZmF1bHQiXSkodCxlKSx0fShiKSxyLkRlbGV0ZU1lc3NhZ2VCb2R5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4sbyxpLGEpe2lmKCgwLG1bImRlZmF1bHQiXSkodGhpcyx0KSxuIGluc3RhbmNlb2YgQXJyYXkpe3ZhciBzPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxjWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbnVsbCxvLGkpKTtzLmNoaWxkcmVuUmVzb3VyY2VzPW59ZWxzZSB2YXIgcz0oMCxwWyJkZWZhdWx0Il0pKHRoaXMsKDAsY1siZGVmYXVsdCJdKSh0KS5jYWxsKHRoaXMsZSxyLG4sbyxpKSk7cmV0dXJuIGEmJihzLmF0dHJpYnV0ZT1hKSwoMCxwWyJkZWZhdWx0Il0pKHMpfXJldHVybigwLGhbImRlZmF1bHQiXSkodCxlKSx0fShiKSxyLlVwZGF0ZU1lc3NhZ2VCb2R5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4sbyxpLGEscyl7KDAsbVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciB1PSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxjWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbixvLGkpKTtyZXR1cm4gdS5hdHRyaWJ1dGU9YSx1LnZhbHVlPXMsdX1yZXR1cm4oMCxoWyJkZWZhdWx0Il0pKHQsZSksKDAsX1siZGVmYXVsdCJdKSh0LFt7a2V5OiJhZGRBdHRyaWJ1dGVUeXBlIix2YWx1ZTpmdW5jdGlvbihlKXtlJiYodGhpcy5hdHRyaWJ1dGVUeXBlPWUpfX0se2tleToiYWRkT3BlcmF0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXtlJiYodGhpcy5vcGVyYXRpb249ZSl9fV0pLHR9KGIpLHIuRm9yd2FyZE1lc3NhZ2VCb2R5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4sbyxpLGEpeygwLG1bImRlZmF1bHQiXSkodGhpcyx0KTt2YXIgcz0oMCxwWyJkZWZhdWx0Il0pKHRoaXMsKDAsY1siZGVmYXVsdCJdKSh0KS5jYWxsKHRoaXMsZSxyLG4sbyxpKSk7cmV0dXJuIHMubWVzc2FnZT1hLHN9cmV0dXJuKDAsaFsiZGVmYXVsdCJdKSh0LGUpLHR9KGIpLHIuUmVzcG9uc2VNZXNzYWdlQm9keT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSl7KDAsbVsiZGVmYXVsdCJdKSh0aGlzLHQpO3ZhciBhPSgwLHBbImRlZmF1bHQiXSkodGhpcywoMCxjWyJkZWZhdWx0Il0pKHQpLmNhbGwodGhpcyxlLHIsbikpO3JldHVybiBvJiYoYS5jb2RlPW8sYS5kZXNjcmlwdGlvbj1nW29dKSxpJiYoYS52YWx1ZT1pKSxhfXJldHVybigwLGhbImRlZmF1bHQiXSkodCxlKSx0fShiKSxyLkV4ZWN1dGVNZXNzYWdlQm9keT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLG8saSxhLHMpeygwLG1bImRlZmF1bHQiXSkodGhpcyx0KTt2YXIgdT0oMCxwWyJkZWZhdWx0Il0pKHRoaXMsKDAsY1siZGVmYXVsdCJdKSh0KS5jYWxsKHRoaXMsZSxyLG4sbyxpKSk7cmV0dXJuIHUubWV0aG9kPWEscyYmKHMgaW5zdGFuY2VvZiBBcnJheT91LnBhcmFtcz1zOnUucGFyYW1zPVtzXSksdX1yZXR1cm4oMCxoWyJkZWZhdWx0Il0pKHQsZSksdH0oYiksci5SRVNQT05TRV9DT0RFPW8oezEwMDoiMTAwIiwxMDE6IjEwMSIsMjAwOiIyMDAiLDIwMToiMjAxIiwyMDI6IjIwMiIsMjAzOiIyMDMiLDIwNDoiMjA0IiwyMDU6IjIwNSIsMjA2OiIyMDYiLDMwMDoiMzAwIiwzMDE6IjMwMSIsMzAyOiIzMDIiLDMwMzoiMzAzIiwzMDQ6IjMwNCIsMzA1OiIzMDUiLDMwNzoiMzA3Iiw0MDA6IjQwMCIsNDAxOiI0MDEiLDQwMjoiNDAyIiw0MDM6IjQwMyIsNDA0OiI0MDQiLDQwNToiNDA1Iiw0MDY6IjQwNiIsNDA3OiI0MDciLDQwODoiNDA4Iiw0MDk6IjQwOSIsNDEwOiI0MTAiLDQxMToiNDExIiw0MTI6IjQxMiIsNDEzOiI0MTMiLDQxNDoiNDE0Iiw0MTU6IjQxNSIsNDE2OiI0MTYiLDQxNzoiNDE3Iiw0MjY6IjQyNiIsNTAwOiI1MDAiLDUwMToiNTAxIiw1MDI6IjUwMiIsNTAzOiI1MDMiLDUwNDoiNTA0Iiw1MDU6IjUwNSJ9KSxyLlJFQVNPTl9QSFJBU0U9byh7MTAwOiJDb250aW51ZSIsMTAxOiJTd2l0Y2hpbmcgUHJvdG9jb2xzIiwyMDA6Ik9LIiwyMDE6IkNyZWF0ZWQiLDIwMjoiQWNjZXB0ZWQiLDIwMzoiTm9uLUF1dGhvcml0YXRpdmUgSW5mb3JtYXRpb24iLDIwNDoiTm8gQ29udGVudCIsMjA1OiJSZXNldCBDb250ZW50IiwyMDY6IlBhcnRpYWwgQ29udGVudCIsMzAwOiJNdWx0aXBsZSBDaG9pY2VzIiwzMDE6Ik1vdmVkIFBlcm1hbmVudGx5IiwzMDI6IkZvdW5kIiwzMDM6IlNlZSBPdGhlciIsMzA0OiJOb3QgTW9kaWZpZWQiLDMwNToiVXNlIFByb3h5IiwzMDc6IlRlbXBvcmFyeSBSZWRpcmVjdCIsNDAwOiJCYWQgUmVxdWVzdCIsNDAxOiJVbmF1dGhvcml6ZWQiLDQwMjoiUGF5bWVudCBSZXF1aXJlZCIsNDAzOiJGb3JiaWRkZW4iLDQwNDoiTm90IEZvdW5kIiw0MDU6Ik1ldGhvZCBOb3QgQWxsb3dlZCIsNDA2OiJOb3QgQWNjZXB0YWJsZSIsNDA3OiJQcm94eSBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZCIsNDA4OiJSZXF1ZXN0IFRpbWVvdXQiLDQwOToiQ29uZmxpY3QiLDQxMDoiR29uZSIsNDExOiJMZW5ndGggUmVxdWlyZWQiLDQxMjoiUHJlY29uZGl0aW9uIEZhaWxlZCIsNDEzOiJQYXlsb2FkIFRvbyBMYXJnZSIsNDE0OiJSZXF1ZXN0LVVSSSBUb28gTG9uZyIsNDE1OiJVbnN1cHBvcnRlZCBNZWRpYSBUeXBlIiw0MTY6IlJhbmdlIE5vdCBTYXRpc2ZpYWJsZSIsNDE3OiJFeHBlY3RhdGlvbiBGYWlsZWQiLDQyNjoiVXBncmFkZSBSZXF1aXJlZCIsNTAwOiJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLDUwMToiTm90IEltcGxlbWVudGVkIiw1MDI6IkJhZCBHYXRld2F5Iiw1MDM6IlNlcnZpY2UgVW5hdmFpbGFibGUiLDUwNDoiR2F0ZXdheSBUaW1lLW91dCIsNTA1OiJIVFRQIFZlcnNpb24gTm90IFN1cHBvcnRlZCJ9KSk7ci5BVFRSSUJVVEVfVFlQRT1vKHtPQkpFQ1Q6Ik9CSkVDVCIsQVJSQVk6IkFSUkFZIn0pLHIuVVBEQVRFX09QRVJBVElPTj1vKHtBREQ6IkFERCIsUkVNT1ZFOiJSRU1PVkUifSk7clsiZGVmYXVsdCJdPWJ9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9mcmVlemUiOjMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjo2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjEwLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MTR9XSwxMDQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5JZEdlbmVyYXRvcj12b2lkIDA7dmFyIG89ZSgiYmFiZWwtcnVudGltZS9yZWdlbmVyYXRvciIpLGk9bihvKSxhPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLHM9bihhKSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpLGw9bih1KSxjPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyIpLGY9bihjKSxwPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiksZD1uKHApLGg9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpLHk9bihoKSxtPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpLHY9bihtKSxfPWUoIi4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdC5qcyIpLGI9bihfKSxnPWUoIi4vTWVzc2FnZS5qcyIpLEU9bihnKSxqPWUoIi4vTWVzc2FnZUJvZHkuanMiKSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyKXsoMCxsWyJkZWZhdWx0Il0pKHRoaXMsdCk7dmFyIG49KDAsZFsiZGVmYXVsdCJdKSh0aGlzLCgwLHNbImRlZmF1bHQiXSkodCkuY2FsbCh0aGlzLGUscikpO3JldHVybiBuLm15R2VuZXJhdG9yPShuZXcgTykuaWRNYWtlcigpLG59cmV0dXJuKDAsdlsiZGVmYXVsdCJdKSh0LGUpLCgwLGZbImRlZmF1bHQiXSkodCxbe2tleToidmFsaWRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybigwLHlbImRlZmF1bHQiXSkoKDAsc1siZGVmYXVsdCJdKSh0LnByb3RvdHlwZSksInZhbGlkYXRlIix0aGlzKS5jYWxsKHRoaXMsZSl9fSx7a2V5OiJjcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7aWYoIWV8fCF0fHwhcil0aHJvdyBuZXcgRXJyb3IoImZyb20sIHRvLCBhbmQgdmFsdWUgb2Ygb2JqZWN0IHRvIGJlIGNyZWF0ZWQgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBqLkNyZWF0ZU1lc3NhZ2VCb2R5KHIsbixudWxsLG51bGwsbnVsbCxudWxsLG51bGwpLGE9bmV3IEVbImRlZmF1bHQiXShvLGUsdCxnLk1lc3NhZ2VUeXBlLkNSRUFURSxpKTtyZXR1cm4gYX19LHtrZXk6ImNyZWF0ZUZvcndhcmRNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdHx8IXIpdGhyb3cgbmV3IEVycm9yKCJmcm9tLCB0bywgYW5kIG1lc3NhZ2UgdG8gZm9yd2FyZCBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLG89bmV3IGouRm9yd2FyZE1lc3NhZ2VCb2R5KG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxyKSxpPW5ldyBFWyJkZWZhdWx0Il0obixlLHQsZy5NZXNzYWdlVHlwZS5GT1JXQVJELG8pO3JldHVybiBpfX0se2tleToiY3JlYXRlRGVsZXRlTWVzc2FnZVJlcXVlc3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoImZyb20gYW5kIHRvIHBhcmFtZXRlcnMgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBqLkRlbGV0ZU1lc3NhZ2VCb2R5KG51bGwsbnVsbCxyLG4sbnVsbCxudWxsKSxhPW5ldyBFWyJkZWZhdWx0Il0obyxlLHQsZy5NZXNzYWdlVHlwZS5ERUxFVEUsaSk7cmV0dXJuIGF9fSx7a2V5OiJjcmVhdGVVcGRhdGVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgYW5kIHRvIGFuZCB2YWx1ZSBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBpPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLGE9bmV3IGouVXBkYXRlTWVzc2FnZUJvZHkobnVsbCxudWxsLG4sbnVsbCxudWxsLG8scikscz1uZXcgRVsiZGVmYXVsdCJdKGksZSx0LGcuTWVzc2FnZVR5cGUuVVBEQVRFLGEpO3JldHVybiBzfX0se2tleToiY3JlYXRlUmVhZE1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgdG8gYW5kIHRoZSByZXNvdXJjZSB0byByZWFkIGZyb20gTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBqLlJlYWRNZXNzYWdlQm9keShudWxsLG51bGwscixudWxsLG51bGwsbixudWxsLG51bGwpLGE9bmV3IEVbImRlZmF1bHQiXShvLGUsdCxnLk1lc3NhZ2VUeXBlLlJFQUQsaSk7cmV0dXJuIGF9fSx7a2V5OiJjcmVhdGVTdWJzY3JpYmVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdHx8IXIpdGhyb3cgbmV3IEVycm9yKCJmcm9tLCB0byBhbmQgdGhlIHJlc291cmNlIHRvIHN1YnNjcmliZSB0byBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLG89bmV3IGouTWVzc2FnZUJvZHkobnVsbCxudWxsLHIsbnVsbCxudWxsKSxpPW5ldyBFWyJkZWZhdWx0Il0obixlLHQsZy5NZXNzYWdlVHlwZS5TVUJTQ1JJQkUsbyk7cmV0dXJuIGl9fSx7a2V5OiJjcmVhdGVVbnN1YnNjcmliZU1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7aWYoIWV8fCF0fHwhcil0aHJvdyBuZXcgRXJyb3IoImZyb20sIHRvIGFuZCB0aGUgcmVzb3VyY2UgdG8gc3Vic2NyaWJlIHRvIE1VU1QgYmUgc3BlY2lmaWVkIik7dmFyIG49dGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWUsbz1uZXcgai5NZXNzYWdlQm9keShudWxsLG51bGwscixudWxsLG51bGwpLGk9bmV3IEVbImRlZmF1bHQiXShuLGUsdCxnLk1lc3NhZ2VUeXBlLlVOU1VCU0NSSUJFLG8pO3JldHVybiBpfX0se2tleToiY3JlYXRlRXhlY3V0ZU1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgdG8gYW5kIHRoZSBtZXRob2QgdG8gZXhlY3V0ZSBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBvPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLGk9bmV3IGouRXhlY3V0ZU1lc3NhZ2VCb2R5KG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxyLG4pLGE9bmV3IEVbImRlZmF1bHQiXShvLGUsdCxnLk1lc3NhZ2VUeXBlLkVYRUNVVEUsaSk7cmV0dXJuIGF9fSx7a2V5OiJjcmVhdGVNZXNzYWdlUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2lmKCF0KXRocm93IG5ldyBFcnJvcigicmVzcG9uc2UgQ29kZSBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBvPW5ldyBqLlJlc3BvbnNlTWVzc2FnZUJvZHkobnVsbCxudWxsLG51bGwsdCxyLG4pO3JldHVybiBuZXcgRVsiZGVmYXVsdCJdKGUuaWQsZS50byxlLmZyb20sZy5NZXNzYWdlVHlwZS5SRVNQT05TRSxvKX19LHtrZXk6ImdlbmVyYXRlTWVzc2FnZVJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7aWYoIWV8fCF0KXRocm93IG5ldyBFcnJvcigibWVzc2FnZSBhbmQgcmVzcG9uc2UgY29kZSBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPWUuYm9keSxvPW4uaWRUb2tlbixpPW4uYWNjZXNzVG9rZW4sYT1uLnJlc291cmNlLHM9bmV3IGouUmVzcG9uc2VNZXNzYWdlQm9keShvLGksYSx0LHIpLHU9dGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWU7cmV0dXJuIG5ldyBFWyJkZWZhdWx0Il0odSxlLnRvLGUuZnJvbSxnLk1lc3NhZ2VUeXBlLlJFU1BPTlNFLHMpfX1dKSx0fShiWyJkZWZhdWx0Il0pLE89ci5JZEdlbmVyYXRvcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXsoMCxsWyJkZWZhdWx0Il0pKHRoaXMsZSl9cmV0dXJuKDAsZlsiZGVmYXVsdCJdKShlLFt7a2V5OiJpZE1ha2VyIix2YWx1ZTppWyJkZWZhdWx0Il0ubWFyayhmdW5jdGlvbiB0KCl7dmFyIGU7cmV0dXJuIGlbImRlZmF1bHQiXS53cmFwKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmU9MTtjYXNlIDE6aWYoIShlPDFlNikpe3QubmV4dD02O2JyZWFrfXJldHVybiB0Lm5leHQ9NCxlKys7Y2FzZSA0OnQubmV4dD0xO2JyZWFrO2Nhc2UgNjpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0sdCx0aGlzKX0pfV0pLGV9KCk7clsiZGVmYXVsdCJdPXd9LHsiLi4vcmVUSElOS09iamVjdC9SZXRoaW5rT2JqZWN0LmpzIjoxMDUsIi4vTWVzc2FnZS5qcyI6MTAyLCIuL01lc3NhZ2VCb2R5LmpzIjoxMDMsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjoxMCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjoxNCwiYmFiZWwtcnVudGltZS9yZWdlbmVyYXRvciI6MTZ9XSwxMDU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksci5SZXRoaW5rT2JqZWN0PXZvaWQgMDt2YXIgbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKSxpPW4obyksYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKSxzPW4oYSksdT1lKCJ0djQiKSxsPW4odSksYz1yLlJldGhpbmtPYmplY3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7KDAsaVsiZGVmYXVsdCJdKSh0aGlzLGUpO3RoaXMudmFsaWRhdGlvbj10LHRoaXMuc2NoZW1hPXJ9cmV0dXJuKDAsc1siZGVmYXVsdCJdKShlLFt7a2V5OiJ2YWxpZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLnNjaGVtYSYmbFsiZGVmYXVsdCJdLnZhbGlkYXRlKGUsdGhpcy5zY2hlbWEpfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1jfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MTAsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MTEsdHY0OjEwMH1dfSx7fSxbMTAxXSkoMTAxKX0pOwoKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0seyJfcHJvY2VzcyI6NzAzfV0sNzI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiO2Z1bmN0aW9uIHEoYSl7dGhyb3cgYTt9dmFyIHM9dm9pZCAwLHU9ITE7dmFyIHNqY2w9e2NpcGhlcjp7fSxoYXNoOnt9LGtleWV4Y2hhbmdlOnt9LG1vZGU6e30sbWlzYzp7fSxjb2RlYzp7fSxleGNlcHRpb246e2NvcnJ1cHQ6ZnVuY3Rpb24oYSl7dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJDT1JSVVBUOiAiK3RoaXMubWVzc2FnZX07dGhpcy5tZXNzYWdlPWF9LGludmFsaWQ6ZnVuY3Rpb24oYSl7dGhpcy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJJTlZBTElEOiAiK3RoaXMubWVzc2FnZX07dGhpcy5tZXNzYWdlPWF9LGJ1ZzpmdW5jdGlvbihhKXt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkJVRzogIit0aGlzLm1lc3NhZ2V9O3RoaXMubWVzc2FnZT1hfSxub3RSZWFkeTpmdW5jdGlvbihhKXt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIk5PVCBSRUFEWTogIit0aGlzLm1lc3NhZ2V9O3RoaXMubWVzc2FnZT1hfX19OwoidW5kZWZpbmVkIiE9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzJiYobW9kdWxlLmV4cG9ydHM9c2pjbCk7ImZ1bmN0aW9uIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZShbXSxmdW5jdGlvbigpe3JldHVybiBzamNsfSk7CnNqY2wuY2lwaGVyLmFlcz1mdW5jdGlvbihhKXt0aGlzLmtbMF1bMF1bMF18fHRoaXMuRCgpO3ZhciBiLGMsZCxlLGY9dGhpcy5rWzBdWzRdLGc9dGhpcy5rWzFdO2I9YS5sZW5ndGg7dmFyIGg9MTs0IT09YiYmKDYhPT1iJiY4IT09YikmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImludmFsaWQgYWVzIGtleSBzaXplIikpO3RoaXMuYj1bZD1hLnNsaWNlKDApLGU9W11dO2ZvcihhPWI7YTw0KmIrMjg7YSsrKXtjPWRbYS0xXTtpZigwPT09YSVifHw4PT09YiYmND09PWElYiljPWZbYz4+PjI0XTw8MjReZltjPj4xNiYyNTVdPDwxNl5mW2M+PjgmMjU1XTw8OF5mW2MmMjU1XSwwPT09YSViJiYoYz1jPDw4XmM+Pj4yNF5oPDwyNCxoPWg8PDFeMjgzKihoPj43KSk7ZFthXT1kW2EtYl1eY31mb3IoYj0wO2E7YisrLGEtLSljPWRbYiYzP2E6YS00XSxlW2JdPTQ+PWF8fDQ+Yj9jOmdbMF1bZltjPj4+MjRdXV5nWzFdW2ZbYz4+MTYmMjU1XV1eZ1syXVtmW2M+PjgmMjU1XV1eZ1szXVtmW2MmCjI1NV1dfTsKc2pjbC5jaXBoZXIuYWVzLnByb3RvdHlwZT17ZW5jcnlwdDpmdW5jdGlvbihhKXtyZXR1cm4gdyh0aGlzLGEsMCl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHcodGhpcyxhLDEpfSxrOltbW10sW10sW10sW10sW11dLFtbXSxbXSxbXSxbXSxbXV1dLEQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmtbMF0sYj10aGlzLmtbMV0sYz1hWzRdLGQ9Yls0XSxlLGYsZyxoPVtdLGw9W10sayxuLG0scDtmb3IoZT0wOzB4MTAwPmU7ZSsrKWxbKGhbZV09ZTw8MV4yODMqKGU+PjcpKV5lXT1lO2ZvcihmPWc9MDshY1tmXTtmXj1rfHwxLGc9bFtnXXx8MSl7bT1nXmc8PDFeZzw8Ml5nPDwzXmc8PDQ7bT1tPj44Xm0mMjU1Xjk5O2NbZl09bTtkW21dPWY7bj1oW2U9aFtrPWhbZl1dXTtwPTB4MTAxMDEwMSpuXjB4MTAwMDEqZV4weDEwMSprXjB4MTAxMDEwMCpmO249MHgxMDEqaFttXV4weDEwMTAxMDAqbTtmb3IoZT0wOzQ+ZTtlKyspYVtlXVtmXT1uPW48PDI0Xm4+Pj44LGJbZV1bbV09cD1wPDwyNF5wPj4+OH1mb3IoZT0KMDs1PmU7ZSsrKWFbZV09YVtlXS5zbGljZSgwKSxiW2VdPWJbZV0uc2xpY2UoMCl9fTsKZnVuY3Rpb24gdyhhLGIsYyl7NCE9PWIubGVuZ3RoJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJpbnZhbGlkIGFlcyBibG9jayBzaXplIikpO3ZhciBkPWEuYltjXSxlPWJbMF1eZFswXSxmPWJbYz8zOjFdXmRbMV0sZz1iWzJdXmRbMl07Yj1iW2M/MTozXV5kWzNdO3ZhciBoLGwsayxuPWQubGVuZ3RoLzQtMixtLHA9NCx0PVswLDAsMCwwXTtoPWEua1tjXTthPWhbMF07dmFyIHI9aFsxXSx2PWhbMl0seT1oWzNdLHo9aFs0XTtmb3IobT0wO208bjttKyspaD1hW2U+Pj4yNF1ecltmPj4xNiYyNTVdXnZbZz4+OCYyNTVdXnlbYiYyNTVdXmRbcF0sbD1hW2Y+Pj4yNF1ecltnPj4xNiYyNTVdXnZbYj4+OCYyNTVdXnlbZSYyNTVdXmRbcCsxXSxrPWFbZz4+PjI0XV5yW2I+PjE2JjI1NV1edltlPj44JjI1NV1eeVtmJjI1NV1eZFtwKzJdLGI9YVtiPj4+MjRdXnJbZT4+MTYmMjU1XV52W2Y+PjgmMjU1XV55W2cmMjU1XV5kW3ArM10scCs9NCxlPWgsZj1sLGc9aztmb3IobT0wOzQ+Cm07bSsrKXRbYz8zJi1tOm1dPXpbZT4+PjI0XTw8MjReeltmPj4xNiYyNTVdPDwxNl56W2c+PjgmMjU1XTw8OF56W2ImMjU1XV5kW3ArK10saD1lLGU9ZixmPWcsZz1iLGI9aDtyZXR1cm4gdH0Kc2pjbC5iaXRBcnJheT17Yml0U2xpY2U6ZnVuY3Rpb24oYSxiLGMpe2E9c2pjbC5iaXRBcnJheS5QKGEuc2xpY2UoYi8zMiksMzItKGImMzEpKS5zbGljZSgxKTtyZXR1cm4gYz09PXM/YTpzamNsLmJpdEFycmF5LmNsYW1wKGEsYy1iKX0sZXh0cmFjdDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9TWF0aC5mbG9vcigtYi1jJjMxKTtyZXR1cm4oKGIrYy0xXmIpJi0zMj9hW2IvMzJ8MF08PDMyLWReYVtiLzMyKzF8MF0+Pj5kOmFbYi8zMnwwXT4+PmQpJigxPDxjKS0xfSxjb25jYXQ6ZnVuY3Rpb24oYSxiKXtpZigwPT09YS5sZW5ndGh8fDA9PT1iLmxlbmd0aClyZXR1cm4gYS5jb25jYXQoYik7dmFyIGM9YVthLmxlbmd0aC0xXSxkPXNqY2wuYml0QXJyYXkuZ2V0UGFydGlhbChjKTtyZXR1cm4gMzI9PT1kP2EuY29uY2F0KGIpOnNqY2wuYml0QXJyYXkuUChiLGQsY3wwLGEuc2xpY2UoMCxhLmxlbmd0aC0xKSl9LGJpdExlbmd0aDpmdW5jdGlvbihhKXt2YXIgYj1hLmxlbmd0aDtyZXR1cm4gMD09PQpiPzA6MzIqKGItMSkrc2pjbC5iaXRBcnJheS5nZXRQYXJ0aWFsKGFbYi0xXSl9LGNsYW1wOmZ1bmN0aW9uKGEsYil7aWYoMzIqYS5sZW5ndGg8YilyZXR1cm4gYTthPWEuc2xpY2UoMCxNYXRoLmNlaWwoYi8zMikpO3ZhciBjPWEubGVuZ3RoO2ImPTMxOzA8YyYmYiYmKGFbYy0xXT1zamNsLmJpdEFycmF5LnBhcnRpYWwoYixhW2MtMV0mMjE0NzQ4MzY0OD4+Yi0xLDEpKTtyZXR1cm4gYX0scGFydGlhbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDMyPT09YT9iOihjP2J8MDpiPDwzMi1hKSsweDEwMDAwMDAwMDAwKmF9LGdldFBhcnRpYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucm91bmQoYS8weDEwMDAwMDAwMDAwKXx8MzJ9LGVxdWFsOmZ1bmN0aW9uKGEsYil7aWYoc2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYSkhPT1zamNsLmJpdEFycmF5LmJpdExlbmd0aChiKSlyZXR1cm4gdTt2YXIgYz0wLGQ7Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKyljfD1hW2RdXmJbZF07cmV0dXJuIDA9PT0KY30sUDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZTtlPTA7Zm9yKGQ9PT1zJiYoZD1bXSk7MzI8PWI7Yi09MzIpZC5wdXNoKGMpLGM9MDtpZigwPT09YilyZXR1cm4gZC5jb25jYXQoYSk7Zm9yKGU9MDtlPGEubGVuZ3RoO2UrKylkLnB1c2goY3xhW2VdPj4+YiksYz1hW2VdPDwzMi1iO2U9YS5sZW5ndGg/YVthLmxlbmd0aC0xXTowO2E9c2pjbC5iaXRBcnJheS5nZXRQYXJ0aWFsKGUpO2QucHVzaChzamNsLmJpdEFycmF5LnBhcnRpYWwoYithJjMxLDMyPGIrYT9jOmQucG9wKCksMSkpO3JldHVybiBkfSxsOmZ1bmN0aW9uKGEsYil7cmV0dXJuW2FbMF1eYlswXSxhWzFdXmJbMV0sYVsyXV5iWzJdLGFbM11eYlszXV19LGJ5dGVzd2FwTTpmdW5jdGlvbihhKXt2YXIgYixjO2ZvcihiPTA7YjxhLmxlbmd0aDsrK2IpYz1hW2JdLGFbYl09Yz4+PjI0fGM+Pj44JjB4ZmYwMHwoYyYweGZmMDApPDw4fGM8PDI0O3JldHVybiBhfX07CnNqY2wuY29kZWMudXRmOFN0cmluZz17ZnJvbUJpdHM6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYz1zamNsLmJpdEFycmF5LmJpdExlbmd0aChhKSxkLGU7Zm9yKGQ9MDtkPGMvODtkKyspMD09PShkJjMpJiYoZT1hW2QvNF0pLGIrPVN0cmluZy5mcm9tQ2hhckNvZGUoZT4+PjI0KSxlPDw9ODtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShiKSl9LHRvQml0czpmdW5jdGlvbihhKXthPXVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChhKSk7dmFyIGI9W10sYyxkPTA7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKylkPWQ8PDh8YS5jaGFyQ29kZUF0KGMpLDM9PT0oYyYzKSYmKGIucHVzaChkKSxkPTApO2MmMyYmYi5wdXNoKHNqY2wuYml0QXJyYXkucGFydGlhbCg4KihjJjMpLGQpKTtyZXR1cm4gYn19OwpzamNsLmNvZGVjLmhleD17ZnJvbUJpdHM6ZnVuY3Rpb24oYSl7dmFyIGI9IiIsYztmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWIrPSgoYVtjXXwwKSsweGYwMDAwMDAwMDAwMCkudG9TdHJpbmcoMTYpLnN1YnN0cig0KTtyZXR1cm4gYi5zdWJzdHIoMCxzamNsLmJpdEFycmF5LmJpdExlbmd0aChhKS80KX0sdG9CaXRzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9W10sZDthPWEucmVwbGFjZSgvXHN8MHgvZywiIik7ZD1hLmxlbmd0aDthKz0iMDAwMDAwMDAiO2ZvcihiPTA7YjxhLmxlbmd0aDtiKz04KWMucHVzaChwYXJzZUludChhLnN1YnN0cihiLDgpLDE2KV4wKTtyZXR1cm4gc2pjbC5iaXRBcnJheS5jbGFtcChjLDQqZCl9fTsKc2pjbC5jb2RlYy5iYXNlNjQ9e0o6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLGZyb21CaXRzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iIixlPTAsZj1zamNsLmNvZGVjLmJhc2U2NC5KLGc9MCxoPXNqY2wuYml0QXJyYXkuYml0TGVuZ3RoKGEpO2MmJihmPWYuc3Vic3RyKDAsNjIpKyItXyIpO2ZvcihjPTA7NipkLmxlbmd0aDxoOylkKz1mLmNoYXJBdCgoZ15hW2NdPj4+ZSk+Pj4yNiksNj5lPyhnPWFbY108PDYtZSxlKz0yNixjKyspOihnPDw9NixlLT02KTtmb3IoO2QubGVuZ3RoJjMmJiFiOylkKz0iPSI7cmV0dXJuIGR9LHRvQml0czpmdW5jdGlvbihhLGIpe2E9YS5yZXBsYWNlKC9cc3w9L2csIiIpO3ZhciBjPVtdLGQsZT0wLGY9c2pjbC5jb2RlYy5iYXNlNjQuSixnPTAsaDtiJiYoZj1mLnN1YnN0cigwLDYyKSsiLV8iKTtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWg9Zi5pbmRleE9mKGEuY2hhckF0KGQpKSwKMD5oJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJ0aGlzIGlzbid0IGJhc2U2NCEiKSksMjY8ZT8oZS09MjYsYy5wdXNoKGdeaD4+PmUpLGc9aDw8MzItZSk6KGUrPTYsZ149aDw8MzItZSk7ZSY1NiYmYy5wdXNoKHNqY2wuYml0QXJyYXkucGFydGlhbChlJjU2LGcsMSkpO3JldHVybiBjfX07c2pjbC5jb2RlYy5iYXNlNjR1cmw9e2Zyb21CaXRzOmZ1bmN0aW9uKGEpe3JldHVybiBzamNsLmNvZGVjLmJhc2U2NC5mcm9tQml0cyhhLDEsMSl9LHRvQml0czpmdW5jdGlvbihhKXtyZXR1cm4gc2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGEsMSl9fTtzamNsLmhhc2guc2hhMjU2PWZ1bmN0aW9uKGEpe3RoaXMuYlswXXx8dGhpcy5EKCk7YT8odGhpcy5yPWEuci5zbGljZSgwKSx0aGlzLm89YS5vLnNsaWNlKDApLHRoaXMuaD1hLmgpOnRoaXMucmVzZXQoKX07c2pjbC5oYXNoLnNoYTI1Ni5oYXNoPWZ1bmN0aW9uKGEpe3JldHVybihuZXcgc2pjbC5oYXNoLnNoYTI1NikudXBkYXRlKGEpLmZpbmFsaXplKCl9OwpzamNsLmhhc2guc2hhMjU2LnByb3RvdHlwZT17YmxvY2tTaXplOjUxMixyZXNldDpmdW5jdGlvbigpe3RoaXMucj10aGlzLk4uc2xpY2UoMCk7dGhpcy5vPVtdO3RoaXMuaD0wO3JldHVybiB0aGlzfSx1cGRhdGU6ZnVuY3Rpb24oYSl7InN0cmluZyI9PT10eXBlb2YgYSYmKGE9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhhKSk7dmFyIGIsYz10aGlzLm89c2pjbC5iaXRBcnJheS5jb25jYXQodGhpcy5vLGEpO2I9dGhpcy5oO2E9dGhpcy5oPWIrc2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYSk7Zm9yKGI9NTEyK2ImLTUxMjtiPD1hO2IrPTUxMil4KHRoaXMsYy5zcGxpY2UoMCwxNikpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5vLGM9dGhpcy5yLGI9c2pjbC5iaXRBcnJheS5jb25jYXQoYixbc2pjbC5iaXRBcnJheS5wYXJ0aWFsKDEsMSldKTtmb3IoYT1iLmxlbmd0aCsyO2EmMTU7YSsrKWIucHVzaCgwKTtiLnB1c2goTWF0aC5mbG9vcih0aGlzLmgvCjQyOTQ5NjcyOTYpKTtmb3IoYi5wdXNoKHRoaXMuaHwwKTtiLmxlbmd0aDspeCh0aGlzLGIuc3BsaWNlKDAsMTYpKTt0aGlzLnJlc2V0KCk7cmV0dXJuIGN9LE46W10sYjpbXSxEOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gMHgxMDAwMDAwMDAqKGEtTWF0aC5mbG9vcihhKSl8MH12YXIgYj0wLGM9MixkO2E6Zm9yKDs2ND5iO2MrKyl7Zm9yKGQ9MjtkKmQ8PWM7ZCsrKWlmKDA9PT1jJWQpY29udGludWUgYTs4PmImJih0aGlzLk5bYl09YShNYXRoLnBvdyhjLDAuNSkpKTt0aGlzLmJbYl09YShNYXRoLnBvdyhjLDEvMykpO2IrK319fTsKZnVuY3Rpb24geChhLGIpe3ZhciBjLGQsZSxmPWIuc2xpY2UoMCksZz1hLnIsaD1hLmIsbD1nWzBdLGs9Z1sxXSxuPWdbMl0sbT1nWzNdLHA9Z1s0XSx0PWdbNV0scj1nWzZdLHY9Z1s3XTtmb3IoYz0wOzY0PmM7YysrKTE2PmM/ZD1mW2NdOihkPWZbYysxJjE1XSxlPWZbYysxNCYxNV0sZD1mW2MmMTVdPShkPj4+N15kPj4+MTheZD4+PjNeZDw8MjVeZDw8MTQpKyhlPj4+MTdeZT4+PjE5XmU+Pj4xMF5lPDwxNV5lPDwxMykrZltjJjE1XStmW2MrOSYxNV18MCksZD1kK3YrKHA+Pj42XnA+Pj4xMV5wPj4+MjVecDw8MjZecDw8MjFecDw8NykrKHJecCYodF5yKSkraFtjXSx2PXIscj10LHQ9cCxwPW0rZHwwLG09bixuPWssaz1sLGw9ZCsoayZuXm0mKGtebikpKyhrPj4+Ml5rPj4+MTNeaz4+PjIyXms8PDMwXms8PDE5Xms8PDEwKXwwO2dbMF09Z1swXStsfDA7Z1sxXT1nWzFdK2t8MDtnWzJdPWdbMl0rbnwwO2dbM109Z1szXSttfDA7Z1s0XT1nWzRdK3B8MDtnWzVdPWdbNV0rdHwwO2dbNl09CmdbNl0rcnwwO2dbN109Z1s3XSt2fDB9CnNqY2wubW9kZS5jY209e25hbWU6ImNjbSIsZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGc9Yi5zbGljZSgwKSxoPXNqY2wuYml0QXJyYXksbD1oLmJpdExlbmd0aChjKS84LGs9aC5iaXRMZW5ndGgoZykvODtlPWV8fDY0O2Q9ZHx8W107Nz5sJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJjY206IGl2IG11c3QgYmUgYXQgbGVhc3QgNyBieXRlcyIpKTtmb3IoZj0yOzQ+ZiYmaz4+PjgqZjtmKyspO2Y8MTUtbCYmKGY9MTUtbCk7Yz1oLmNsYW1wKGMsOCooMTUtZikpO2I9c2pjbC5tb2RlLmNjbS5MKGEsYixjLGQsZSxmKTtnPXNqY2wubW9kZS5jY20ucChhLGcsYyxiLGUsZik7cmV0dXJuIGguY29uY2F0KGcuZGF0YSxnLnRhZyl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtlPWV8fDY0O2Q9ZHx8W107dmFyIGY9c2pjbC5iaXRBcnJheSxnPWYuYml0TGVuZ3RoKGMpLzgsaD1mLmJpdExlbmd0aChiKSxsPWYuY2xhbXAoYixoLWUpLGs9Zi5iaXRTbGljZShiLApoLWUpLGg9KGgtZSkvODs3PmcmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImNjbTogaXYgbXVzdCBiZSBhdCBsZWFzdCA3IGJ5dGVzIikpO2ZvcihiPTI7ND5iJiZoPj4+OCpiO2IrKyk7YjwxNS1nJiYoYj0xNS1nKTtjPWYuY2xhbXAoYyw4KigxNS1iKSk7bD1zamNsLm1vZGUuY2NtLnAoYSxsLGMsayxlLGIpO2E9c2pjbC5tb2RlLmNjbS5MKGEsbC5kYXRhLGMsZCxlLGIpO2YuZXF1YWwobC50YWcsYSl8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmNvcnJ1cHQoImNjbTogdGFnIGRvZXNuJ3QgbWF0Y2giKSk7cmV0dXJuIGwuZGF0YX0sTDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9W10saD1zamNsLmJpdEFycmF5LGw9aC5sO2UvPTg7KGUlMnx8ND5lfHwxNjxlKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgiY2NtOiBpbnZhbGlkIHRhZyBsZW5ndGgiKSk7KDB4ZmZmZmZmZmY8ZC5sZW5ndGh8fDB4ZmZmZmZmZmY8Yi5sZW5ndGgpJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoImNjbTogY2FuJ3QgZGVhbCB3aXRoIDRHaUIgb3IgbW9yZSBkYXRhIikpOwpmPVtoLnBhcnRpYWwoOCwoZC5sZW5ndGg/NjQ6MCl8ZS0yPDwyfGYtMSldO2Y9aC5jb25jYXQoZixjKTtmWzNdfD1oLmJpdExlbmd0aChiKS84O2Y9YS5lbmNyeXB0KGYpO2lmKGQubGVuZ3RoKXtjPWguYml0TGVuZ3RoKGQpLzg7NjUyNzk+PWM/Zz1baC5wYXJ0aWFsKDE2LGMpXToweGZmZmZmZmZmPj1jJiYoZz1oLmNvbmNhdChbaC5wYXJ0aWFsKDE2LDY1NTM0KV0sW2NdKSk7Zz1oLmNvbmNhdChnLGQpO2ZvcihkPTA7ZDxnLmxlbmd0aDtkKz00KWY9YS5lbmNyeXB0KGwoZixnLnNsaWNlKGQsZCs0KS5jb25jYXQoWzAsMCwwXSkpKX1mb3IoZD0wO2Q8Yi5sZW5ndGg7ZCs9NClmPWEuZW5jcnlwdChsKGYsYi5zbGljZShkLGQrNCkuY29uY2F0KFswLDAsMF0pKSk7cmV0dXJuIGguY2xhbXAoZiw4KmUpfSxwOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZyxoPXNqY2wuYml0QXJyYXk7Zz1oLmw7dmFyIGw9Yi5sZW5ndGgsaz1oLmJpdExlbmd0aChiKTtjPWguY29uY2F0KFtoLnBhcnRpYWwoOCwKZi0xKV0sYykuY29uY2F0KFswLDAsMF0pLnNsaWNlKDAsNCk7ZD1oLmJpdFNsaWNlKGcoZCxhLmVuY3J5cHQoYykpLDAsZSk7aWYoIWwpcmV0dXJue3RhZzpkLGRhdGE6W119O2ZvcihnPTA7ZzxsO2crPTQpY1szXSsrLGU9YS5lbmNyeXB0KGMpLGJbZ11ePWVbMF0sYltnKzFdXj1lWzFdLGJbZysyXV49ZVsyXSxiW2crM11ePWVbM107cmV0dXJue3RhZzpkLGRhdGE6aC5jbGFtcChiLGspfX19OwpzamNsLm1vZGUub2NiMj17bmFtZToib2NiMiIsZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7MTI4IT09c2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYykmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoIm9jYiBpdiBtdXN0IGJlIDEyOCBiaXRzIikpO3ZhciBnLGg9c2pjbC5tb2RlLm9jYjIuSCxsPXNqY2wuYml0QXJyYXksaz1sLmwsbj1bMCwwLDAsMF07Yz1oKGEuZW5jcnlwdChjKSk7dmFyIG0scD1bXTtkPWR8fFtdO2U9ZXx8NjQ7Zm9yKGc9MDtnKzQ8Yi5sZW5ndGg7Zys9NCltPWIuc2xpY2UoZyxnKzQpLG49ayhuLG0pLHA9cC5jb25jYXQoayhjLGEuZW5jcnlwdChrKGMsbSkpKSksYz1oKGMpO209Yi5zbGljZShnKTtiPWwuYml0TGVuZ3RoKG0pO2c9YS5lbmNyeXB0KGsoYyxbMCwwLDAsYl0pKTttPWwuY2xhbXAoayhtLmNvbmNhdChbMCwwLDBdKSxnKSxiKTtuPWsobixrKG0uY29uY2F0KFswLDAsMF0pLGcpKTtuPWEuZW5jcnlwdChrKG4sayhjLGgoYykpKSk7ZC5sZW5ndGgmJgoobj1rKG4sZj9kOnNqY2wubW9kZS5vY2IyLnBtYWMoYSxkKSkpO3JldHVybiBwLmNvbmNhdChsLmNvbmNhdChtLGwuY2xhbXAobixlKSkpfSxkZWNyeXB0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXsxMjghPT1zamNsLmJpdEFycmF5LmJpdExlbmd0aChjKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgib2NiIGl2IG11c3QgYmUgMTI4IGJpdHMiKSk7ZT1lfHw2NDt2YXIgZz1zamNsLm1vZGUub2NiMi5ILGg9c2pjbC5iaXRBcnJheSxsPWgubCxrPVswLDAsMCwwXSxuPWcoYS5lbmNyeXB0KGMpKSxtLHAsdD1zamNsLmJpdEFycmF5LmJpdExlbmd0aChiKS1lLHI9W107ZD1kfHxbXTtmb3IoYz0wO2MrNDx0LzMyO2MrPTQpbT1sKG4sYS5kZWNyeXB0KGwobixiLnNsaWNlKGMsYys0KSkpKSxrPWwoayxtKSxyPXIuY29uY2F0KG0pLG49ZyhuKTtwPXQtMzIqYzttPWEuZW5jcnlwdChsKG4sWzAsMCwwLHBdKSk7bT1sKG0saC5jbGFtcChiLnNsaWNlKGMpLHApLmNvbmNhdChbMCwwLDBdKSk7Cms9bChrLG0pO2s9YS5lbmNyeXB0KGwoayxsKG4sZyhuKSkpKTtkLmxlbmd0aCYmKGs9bChrLGY/ZDpzamNsLm1vZGUub2NiMi5wbWFjKGEsZCkpKTtoLmVxdWFsKGguY2xhbXAoayxlKSxoLmJpdFNsaWNlKGIsdCkpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5jb3JydXB0KCJvY2I6IHRhZyBkb2Vzbid0IG1hdGNoIikpO3JldHVybiByLmNvbmNhdChoLmNsYW1wKG0scCkpfSxwbWFjOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1zamNsLm1vZGUub2NiMi5ILGU9c2pjbC5iaXRBcnJheSxmPWUubCxnPVswLDAsMCwwXSxoPWEuZW5jcnlwdChbMCwwLDAsMF0pLGg9ZihoLGQoZChoKSkpO2ZvcihjPTA7Yys0PGIubGVuZ3RoO2MrPTQpaD1kKGgpLGc9ZihnLGEuZW5jcnlwdChmKGgsYi5zbGljZShjLGMrNCkpKSk7Yz1iLnNsaWNlKGMpOzEyOD5lLmJpdExlbmd0aChjKSYmKGg9ZihoLGQoaCkpLGM9ZS5jb25jYXQoYyxbLTIxNDc0ODM2NDgsMCwwLDBdKSk7Zz1mKGcsYyk7cmV0dXJuIGEuZW5jcnlwdChmKGQoZihoLApkKGgpKSksZykpfSxIOmZ1bmN0aW9uKGEpe3JldHVyblthWzBdPDwxXmFbMV0+Pj4zMSxhWzFdPDwxXmFbMl0+Pj4zMSxhWzJdPDwxXmFbM10+Pj4zMSxhWzNdPDwxXjEzNSooYVswXT4+PjMxKV19fTsKc2pjbC5tb2RlLmdjbT17bmFtZToiZ2NtIixlbmNyeXB0OmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Yi5zbGljZSgwKTtiPXNqY2wuYml0QXJyYXk7ZD1kfHxbXTthPXNqY2wubW9kZS5nY20ucCghMCxhLGYsZCxjLGV8fDEyOCk7cmV0dXJuIGIuY29uY2F0KGEuZGF0YSxhLnRhZyl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1iLnNsaWNlKDApLGc9c2pjbC5iaXRBcnJheSxoPWcuYml0TGVuZ3RoKGYpO2U9ZXx8MTI4O2Q9ZHx8W107ZTw9aD8oYj1nLmJpdFNsaWNlKGYsaC1lKSxmPWcuYml0U2xpY2UoZiwwLGgtZSkpOihiPWYsZj1bXSk7YT1zamNsLm1vZGUuZ2NtLnAodSxhLGYsZCxjLGUpO2cuZXF1YWwoYS50YWcsYil8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmNvcnJ1cHQoImdjbTogdGFnIGRvZXNuJ3QgbWF0Y2giKSk7cmV0dXJuIGEuZGF0YX0sWjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGcsaD1zamNsLmJpdEFycmF5Lmw7ZT1bMCwwLDAsMF07Zj1iLnNsaWNlKDApOwpmb3IoYz0wOzEyOD5jO2MrKyl7KGQ9MCE9PShhW01hdGguZmxvb3IoYy8zMildJjE8PDMxLWMlMzIpKSYmKGU9aChlLGYpKTtnPTAhPT0oZlszXSYxKTtmb3IoZD0zOzA8ZDtkLS0pZltkXT1mW2RdPj4+MXwoZltkLTFdJjEpPDwzMTtmWzBdPj4+PTE7ZyYmKGZbMF1ePS0weDFmMDAwMDAwKX1yZXR1cm4gZX0sZzpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1jLmxlbmd0aDtiPWIuc2xpY2UoMCk7Zm9yKGQ9MDtkPGU7ZCs9NCliWzBdXj0weGZmZmZmZmZmJmNbZF0sYlsxXV49MHhmZmZmZmZmZiZjW2QrMV0sYlsyXV49MHhmZmZmZmZmZiZjW2QrMl0sYlszXV49MHhmZmZmZmZmZiZjW2QrM10sYj1zamNsLm1vZGUuZ2NtLlooYixhKTtyZXR1cm4gYn0scDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGcsaCxsLGssbixtLHAsdCxyPXNqY2wuYml0QXJyYXk7bT1jLmxlbmd0aDtwPXIuYml0TGVuZ3RoKGMpO3Q9ci5iaXRMZW5ndGgoZCk7aD1yLmJpdExlbmd0aChlKTtnPWIuZW5jcnlwdChbMCwKMCwwLDBdKTs5Nj09PWg/KGU9ZS5zbGljZSgwKSxlPXIuY29uY2F0KGUsWzFdKSk6KGU9c2pjbC5tb2RlLmdjbS5nKGcsWzAsMCwwLDBdLGUpLGU9c2pjbC5tb2RlLmdjbS5nKGcsZSxbMCwwLE1hdGguZmxvb3IoaC8weDEwMDAwMDAwMCksaCYweGZmZmZmZmZmXSkpO2g9c2pjbC5tb2RlLmdjbS5nKGcsWzAsMCwwLDBdLGQpO249ZS5zbGljZSgwKTtkPWguc2xpY2UoMCk7YXx8KGQ9c2pjbC5tb2RlLmdjbS5nKGcsaCxjKSk7Zm9yKGs9MDtrPG07ays9NCluWzNdKyssbD1iLmVuY3J5cHQobiksY1trXV49bFswXSxjW2srMV1ePWxbMV0sY1trKzJdXj1sWzJdLGNbayszXV49bFszXTtjPXIuY2xhbXAoYyxwKTthJiYoZD1zamNsLm1vZGUuZ2NtLmcoZyxoLGMpKTthPVtNYXRoLmZsb29yKHQvMHgxMDAwMDAwMDApLHQmMHhmZmZmZmZmZixNYXRoLmZsb29yKHAvMHgxMDAwMDAwMDApLHAmMHhmZmZmZmZmZl07ZD1zamNsLm1vZGUuZ2NtLmcoZyxkLGEpO2w9Yi5lbmNyeXB0KGUpO2RbMF1ePWxbMF07CmRbMV1ePWxbMV07ZFsyXV49bFsyXTtkWzNdXj1sWzNdO3JldHVybnt0YWc6ci5iaXRTbGljZShkLDAsZiksZGF0YTpjfX19O3NqY2wubWlzYy5obWFjPWZ1bmN0aW9uKGEsYil7dGhpcy5NPWI9Ynx8c2pjbC5oYXNoLnNoYTI1Njt2YXIgYz1bW10sW11dLGQsZT1iLnByb3RvdHlwZS5ibG9ja1NpemUvMzI7dGhpcy5uPVtuZXcgYixuZXcgYl07YS5sZW5ndGg+ZSYmKGE9Yi5oYXNoKGEpKTtmb3IoZD0wO2Q8ZTtkKyspY1swXVtkXT1hW2RdXjkwOTUyMjQ4NixjWzFdW2RdPWFbZF1eMTU0OTU1NjgyODt0aGlzLm5bMF0udXBkYXRlKGNbMF0pO3RoaXMublsxXS51cGRhdGUoY1sxXSk7dGhpcy5HPW5ldyBiKHRoaXMublswXSl9OwpzamNsLm1pc2MuaG1hYy5wcm90b3R5cGUuZW5jcnlwdD1zamNsLm1pc2MuaG1hYy5wcm90b3R5cGUubWFjPWZ1bmN0aW9uKGEpe3RoaXMuUSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgiZW5jcnlwdCBvbiBhbHJlYWR5IHVwZGF0ZWQgaG1hYyBjYWxsZWQhIikpO3RoaXMudXBkYXRlKGEpO3JldHVybiB0aGlzLmRpZ2VzdChhKX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5HPW5ldyB0aGlzLk0odGhpcy5uWzBdKTt0aGlzLlE9dX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhKXt0aGlzLlE9ITA7dGhpcy5HLnVwZGF0ZShhKX07c2pjbC5taXNjLmhtYWMucHJvdG90eXBlLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuRy5maW5hbGl6ZSgpLGE9KG5ldyB0aGlzLk0odGhpcy5uWzFdKSkudXBkYXRlKGEpLmZpbmFsaXplKCk7dGhpcy5yZXNldCgpO3JldHVybiBhfTsKc2pjbC5taXNjLnBia2RmMj1mdW5jdGlvbihhLGIsYyxkLGUpe2M9Y3x8MUUzOygwPmR8fDA+YykmJnEoc2pjbC5leGNlcHRpb24uaW52YWxpZCgiaW52YWxpZCBwYXJhbXMgdG8gcGJrZGYyIikpOyJzdHJpbmciPT09dHlwZW9mIGEmJihhPXNqY2wuY29kZWMudXRmOFN0cmluZy50b0JpdHMoYSkpOyJzdHJpbmciPT09dHlwZW9mIGImJihiPXNqY2wuY29kZWMudXRmOFN0cmluZy50b0JpdHMoYikpO2U9ZXx8c2pjbC5taXNjLmhtYWM7YT1uZXcgZShhKTt2YXIgZixnLGgsbCxrPVtdLG49c2pjbC5iaXRBcnJheTtmb3IobD0xOzMyKmsubGVuZ3RoPChkfHwxKTtsKyspe2U9Zj1hLmVuY3J5cHQobi5jb25jYXQoYixbbF0pKTtmb3IoZz0xO2c8YztnKyspe2Y9YS5lbmNyeXB0KGYpO2ZvcihoPTA7aDxmLmxlbmd0aDtoKyspZVtoXV49ZltoXX1rPWsuY29uY2F0KGUpfWQmJihrPW4uY2xhbXAoayxkKSk7cmV0dXJuIGt9OwpzamNsLnBybmc9ZnVuY3Rpb24oYSl7dGhpcy5jPVtuZXcgc2pjbC5oYXNoLnNoYTI1Nl07dGhpcy5pPVswXTt0aGlzLkY9MDt0aGlzLnM9e307dGhpcy5DPTA7dGhpcy5LPXt9O3RoaXMuTz10aGlzLmQ9dGhpcy5qPXRoaXMuVz0wO3RoaXMuYj1bMCwwLDAsMCwwLDAsMCwwXTt0aGlzLmY9WzAsMCwwLDBdO3RoaXMuQT1zO3RoaXMuQj1hO3RoaXMucT11O3RoaXMudz17cHJvZ3Jlc3M6e30sc2VlZGVkOnt9fTt0aGlzLm09dGhpcy5WPTA7dGhpcy50PTE7dGhpcy51PTI7dGhpcy5TPTB4MTAwMDA7dGhpcy5JPVswLDQ4LDY0LDk2LDEyOCwxOTIsMHgxMDAsMzg0LDUxMiw3NjgsMTAyNF07dGhpcy5UPTNFNDt0aGlzLlI9ODB9OwpzamNsLnBybmcucHJvdG90eXBlPXtyYW5kb21Xb3JkczpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ7ZD10aGlzLmlzUmVhZHkoYik7dmFyIGU7ZD09PXRoaXMubSYmcShuZXcgc2pjbC5leGNlcHRpb24ubm90UmVhZHkoImdlbmVyYXRvciBpc24ndCBzZWVkZWQiKSk7aWYoZCZ0aGlzLnUpe2Q9IShkJnRoaXMudCk7ZT1bXTt2YXIgZj0wLGc7dGhpcy5PPWVbMF09KG5ldyBEYXRlKS52YWx1ZU9mKCkrdGhpcy5UO2ZvcihnPTA7MTY+ZztnKyspZS5wdXNoKDB4MTAwMDAwMDAwKk1hdGgucmFuZG9tKCl8MCk7Zm9yKGc9MDtnPHRoaXMuYy5sZW5ndGgmJiEoZT1lLmNvbmNhdCh0aGlzLmNbZ10uZmluYWxpemUoKSksZis9dGhpcy5pW2ddLHRoaXMuaVtnXT0wLCFkJiZ0aGlzLkYmMTw8Zyk7ZysrKTt0aGlzLkY+PTE8PHRoaXMuYy5sZW5ndGgmJih0aGlzLmMucHVzaChuZXcgc2pjbC5oYXNoLnNoYTI1NiksdGhpcy5pLnB1c2goMCkpO3RoaXMuZC09ZjtmPnRoaXMuaiYmKHRoaXMuaj1mKTt0aGlzLkYrKzsKdGhpcy5iPXNqY2wuaGFzaC5zaGEyNTYuaGFzaCh0aGlzLmIuY29uY2F0KGUpKTt0aGlzLkE9bmV3IHNqY2wuY2lwaGVyLmFlcyh0aGlzLmIpO2ZvcihkPTA7ND5kJiYhKHRoaXMuZltkXT10aGlzLmZbZF0rMXwwLHRoaXMuZltkXSk7ZCsrKTt9Zm9yKGQ9MDtkPGE7ZCs9NCkwPT09KGQrMSkldGhpcy5TJiZBKHRoaXMpLGU9Qih0aGlzKSxjLnB1c2goZVswXSxlWzFdLGVbMl0sZVszXSk7QSh0aGlzKTtyZXR1cm4gYy5zbGljZSgwLGEpfSxzZXREZWZhdWx0UGFyYW5vaWE6ZnVuY3Rpb24oYSxiKXswPT09YSYmIlNldHRpbmcgcGFyYW5vaWE9MCB3aWxsIHJ1aW4geW91ciBzZWN1cml0eTsgdXNlIGl0IG9ubHkgZm9yIHRlc3RpbmciIT09YiYmcSgiU2V0dGluZyBwYXJhbm9pYT0wIHdpbGwgcnVpbiB5b3VyIHNlY3VyaXR5OyB1c2UgaXQgb25seSBmb3IgdGVzdGluZyIpO3RoaXMuQj1hfSxhZGRFbnRyb3B5OmZ1bmN0aW9uKGEsYixjKXtjPWN8fCJ1c2VyIjt2YXIgZCxlLGY9KG5ldyBEYXRlKS52YWx1ZU9mKCksCmc9dGhpcy5zW2NdLGg9dGhpcy5pc1JlYWR5KCksbD0wO2Q9dGhpcy5LW2NdO2Q9PT1zJiYoZD10aGlzLktbY109dGhpcy5XKyspO2c9PT1zJiYoZz10aGlzLnNbY109MCk7dGhpcy5zW2NdPSh0aGlzLnNbY10rMSkldGhpcy5jLmxlbmd0aDtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgIm51bWJlciI6Yj09PXMmJihiPTEpO3RoaXMuY1tnXS51cGRhdGUoW2QsdGhpcy5DKyssMSxiLGYsMSxhfDBdKTticmVhaztjYXNlICJvYmplY3QiOmM9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpO2lmKCJbb2JqZWN0IFVpbnQzMkFycmF5XSI9PT1jKXtlPVtdO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspZS5wdXNoKGFbY10pO2E9ZX1lbHNleyJbb2JqZWN0IEFycmF5XSIhPT1jJiYobD0xKTtmb3IoYz0wO2M8YS5sZW5ndGgmJiFsO2MrKykibnVtYmVyIiE9PXR5cGVvZiBhW2NdJiYobD0xKX1pZighbCl7aWYoYj09PXMpZm9yKGM9Yj0wO2M8YS5sZW5ndGg7YysrKWZvcihlPWFbY107MDxlOyliKyssCmU+Pj49MTt0aGlzLmNbZ10udXBkYXRlKFtkLHRoaXMuQysrLDIsYixmLGEubGVuZ3RoXS5jb25jYXQoYSkpfWJyZWFrO2Nhc2UgInN0cmluZyI6Yj09PXMmJihiPWEubGVuZ3RoKTt0aGlzLmNbZ10udXBkYXRlKFtkLHRoaXMuQysrLDMsYixmLGEubGVuZ3RoXSk7dGhpcy5jW2ddLnVwZGF0ZShhKTticmVhaztkZWZhdWx0Omw9MX1sJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoInJhbmRvbTogYWRkRW50cm9weSBvbmx5IHN1cHBvcnRzIG51bWJlciwgYXJyYXkgb2YgbnVtYmVycyBvciBzdHJpbmciKSk7dGhpcy5pW2ddKz1iO3RoaXMuZCs9YjtoPT09dGhpcy5tJiYodGhpcy5pc1JlYWR5KCkhPT10aGlzLm0mJkMoInNlZWRlZCIsTWF0aC5tYXgodGhpcy5qLHRoaXMuZCkpLEMoInByb2dyZXNzIix0aGlzLmdldFByb2dyZXNzKCkpKX0saXNSZWFkeTpmdW5jdGlvbihhKXthPXRoaXMuSVthIT09cz9hOnRoaXMuQl07cmV0dXJuIHRoaXMuaiYmdGhpcy5qPj1hP3RoaXMuaVswXT50aGlzLlImJgoobmV3IERhdGUpLnZhbHVlT2YoKT50aGlzLk8/dGhpcy51fHRoaXMudDp0aGlzLnQ6dGhpcy5kPj1hP3RoaXMudXx0aGlzLm06dGhpcy5tfSxnZXRQcm9ncmVzczpmdW5jdGlvbihhKXthPXRoaXMuSVthP2E6dGhpcy5CXTtyZXR1cm4gdGhpcy5qPj1hPzE6dGhpcy5kPmE/MTp0aGlzLmQvYX0sc3RhcnRDb2xsZWN0b3JzOmZ1bmN0aW9uKCl7dGhpcy5xfHwodGhpcy5hPXtsb2FkVGltZUNvbGxlY3RvcjpEKHRoaXMsdGhpcy5hYSksbW91c2VDb2xsZWN0b3I6RCh0aGlzLHRoaXMuYmEpLGtleWJvYXJkQ29sbGVjdG9yOkQodGhpcyx0aGlzLiQpLGFjY2VsZXJvbWV0ZXJDb2xsZWN0b3I6RCh0aGlzLHRoaXMuVSksdG91Y2hDb2xsZWN0b3I6RCh0aGlzLHRoaXMuZGEpfSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcj8od2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLHRoaXMuYS5sb2FkVGltZUNvbGxlY3Rvcix1KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLmEubW91c2VDb2xsZWN0b3IsCnUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yLHUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJkZXZpY2Vtb3Rpb24iLHRoaXMuYS5hY2NlbGVyb21ldGVyQ29sbGVjdG9yLHUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHRoaXMuYS50b3VjaENvbGxlY3Rvcix1KSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQ/KGRvY3VtZW50LmF0dGFjaEV2ZW50KCJvbmxvYWQiLHRoaXMuYS5sb2FkVGltZUNvbGxlY3RvciksZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ubW91c2Vtb3ZlIix0aGlzLmEubW91c2VDb2xsZWN0b3IpLGRvY3VtZW50LmF0dGFjaEV2ZW50KCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yKSk6cShuZXcgc2pjbC5leGNlcHRpb24uYnVnKCJjYW4ndCBhdHRhY2ggZXZlbnQiKSksdGhpcy5xPSEwKX0sc3RvcENvbGxlY3RvcnM6ZnVuY3Rpb24oKXt0aGlzLnEmJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcj8KKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIix0aGlzLmEubG9hZFRpbWVDb2xsZWN0b3IsdSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5hLm1vdXNlQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlwcmVzcyIsdGhpcy5hLmtleWJvYXJkQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJkZXZpY2Vtb3Rpb24iLHRoaXMuYS5hY2NlbGVyb21ldGVyQ29sbGVjdG9yLHUpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHRoaXMuYS50b3VjaENvbGxlY3Rvcix1KSk6ZG9jdW1lbnQuZGV0YWNoRXZlbnQmJihkb2N1bWVudC5kZXRhY2hFdmVudCgib25sb2FkIix0aGlzLmEubG9hZFRpbWVDb2xsZWN0b3IpLGRvY3VtZW50LmRldGFjaEV2ZW50KCJvbm1vdXNlbW92ZSIsdGhpcy5hLm1vdXNlQ29sbGVjdG9yKSxkb2N1bWVudC5kZXRhY2hFdmVudCgia2V5cHJlc3MiLAp0aGlzLmEua2V5Ym9hcmRDb2xsZWN0b3IpKSx0aGlzLnE9dSl9LGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLndbYV1bdGhpcy5WKytdPWJ9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy53W2FdLGY9W107Zm9yKGQgaW4gZSllLmhhc093blByb3BlcnR5KGQpJiZlW2RdPT09YiYmZi5wdXNoKGQpO2ZvcihjPTA7YzxmLmxlbmd0aDtjKyspZD1mW2NdLGRlbGV0ZSBlW2RdfSwkOmZ1bmN0aW9uKCl7RSgxKX0sYmE6ZnVuY3Rpb24oYSl7dmFyIGIsYzt0cnl7Yj1hLnh8fGEuY2xpZW50WHx8YS5vZmZzZXRYfHwwLGM9YS55fHxhLmNsaWVudFl8fGEub2Zmc2V0WXx8MH1jYXRjaChkKXtjPWI9MH0wIT1iJiYwIT1jJiZzamNsLnJhbmRvbS5hZGRFbnRyb3B5KFtiLGNdLDIsIm1vdXNlIik7RSgwKX0sZGE6ZnVuY3Rpb24oYSl7YT1hLnRvdWNoZXNbMF18fGEuY2hhbmdlZFRvdWNoZXNbMF07c2pjbC5yYW5kb20uYWRkRW50cm9weShbYS5wYWdlWHx8CmEuY2xpZW50WCxhLnBhZ2VZfHxhLmNsaWVudFldLDEsInRvdWNoIik7RSgwKX0sYWE6ZnVuY3Rpb24oKXtFKDIpfSxVOmZ1bmN0aW9uKGEpe2E9YS5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5Lnh8fGEuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eS55fHxhLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHkuejtpZih3aW5kb3cub3JpZW50YXRpb24pe3ZhciBiPXdpbmRvdy5vcmllbnRhdGlvbjsibnVtYmVyIj09PXR5cGVvZiBiJiZzamNsLnJhbmRvbS5hZGRFbnRyb3B5KGIsMSwiYWNjZWxlcm9tZXRlciIpfWEmJnNqY2wucmFuZG9tLmFkZEVudHJvcHkoYSwyLCJhY2NlbGVyb21ldGVyIik7RSgwKX19O2Z1bmN0aW9uIEMoYSxiKXt2YXIgYyxkPXNqY2wucmFuZG9tLndbYV0sZT1bXTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmUucHVzaChkW2NdKTtmb3IoYz0wO2M8ZS5sZW5ndGg7YysrKWVbY10oYil9CmZ1bmN0aW9uIEUoYSl7InVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucGVyZm9ybWFuY2UmJiJmdW5jdGlvbiI9PT10eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlLm5vdz9zamNsLnJhbmRvbS5hZGRFbnRyb3B5KHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSxhLCJsb2FkdGltZSIpOnNqY2wucmFuZG9tLmFkZEVudHJvcHkoKG5ldyBEYXRlKS52YWx1ZU9mKCksYSwibG9hZHRpbWUiKX1mdW5jdGlvbiBBKGEpe2EuYj1CKGEpLmNvbmNhdChCKGEpKTthLkE9bmV3IHNqY2wuY2lwaGVyLmFlcyhhLmIpfWZ1bmN0aW9uIEIoYSl7Zm9yKHZhciBiPTA7ND5iJiYhKGEuZltiXT1hLmZbYl0rMXwwLGEuZltiXSk7YisrKTtyZXR1cm4gYS5BLmVuY3J5cHQoYS5mKX1mdW5jdGlvbiBEKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5hcHBseShhLGFyZ3VtZW50cyl9fXNqY2wucmFuZG9tPW5ldyBzamNsLnBybmcoNik7CmE6dHJ5e3ZhciBGLEcsSCxJO2lmKEk9InVuZGVmaW5lZCIhPT10eXBlb2YgbW9kdWxlKXt2YXIgSjtpZihKPW1vZHVsZS5leHBvcnRzKXt2YXIgSzt0cnl7Sz1yZXF1aXJlKCJjcnlwdG8iKX1jYXRjaChMKXtLPW51bGx9Sj0oRz1LKSYmRy5yYW5kb21CeXRlc31JPUp9aWYoSSlGPUcucmFuZG9tQnl0ZXMoMTI4KSxGPW5ldyBVaW50MzJBcnJheSgobmV3IFVpbnQ4QXJyYXkoRikpLmJ1ZmZlciksc2pjbC5yYW5kb20uYWRkRW50cm9weShGLDEwMjQsImNyeXB0b1sncmFuZG9tQnl0ZXMnXSIpO2Vsc2UgaWYoInVuZGVmaW5lZCIhPT10eXBlb2Ygd2luZG93JiYidW5kZWZpbmVkIiE9PXR5cGVvZiBVaW50MzJBcnJheSl7SD1uZXcgVWludDMyQXJyYXkoMzIpO2lmKHdpbmRvdy5jcnlwdG8mJndpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKXdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKEgpO2Vsc2UgaWYod2luZG93Lm1zQ3J5cHRvJiZ3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKXdpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMoSCk7CmVsc2UgYnJlYWsgYTtzamNsLnJhbmRvbS5hZGRFbnRyb3B5KEgsMTAyNCwiY3J5cHRvWydnZXRSYW5kb21WYWx1ZXMnXSIpfX1jYXRjaChNKXsidW5kZWZpbmVkIiE9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jb25zb2xlJiYoY29uc29sZS5sb2coIlRoZXJlIHdhcyBhbiBlcnJvciBjb2xsZWN0aW5nIGVudHJvcHkgZnJvbSB0aGUgYnJvd3NlcjoiKSxjb25zb2xlLmxvZyhNKSl9CnNqY2wuanNvbj17ZGVmYXVsdHM6e3Y6MSxpdGVyOjFFMyxrczoxMjgsdHM6NjQsbW9kZToiY2NtIixhZGF0YToiIixjaXBoZXI6ImFlcyJ9LFk6ZnVuY3Rpb24oYSxiLGMsZCl7Yz1jfHx7fTtkPWR8fHt9O3ZhciBlPXNqY2wuanNvbixmPWUuZSh7aXY6c2pjbC5yYW5kb20ucmFuZG9tV29yZHMoNCwwKX0sZS5kZWZhdWx0cyksZztlLmUoZixjKTtjPWYuYWRhdGE7InN0cmluZyI9PT10eXBlb2YgZi5zYWx0JiYoZi5zYWx0PXNqY2wuY29kZWMuYmFzZTY0LnRvQml0cyhmLnNhbHQpKTsic3RyaW5nIj09PXR5cGVvZiBmLml2JiYoZi5pdj1zamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoZi5pdikpOyghc2pjbC5tb2RlW2YubW9kZV18fCFzamNsLmNpcGhlcltmLmNpcGhlcl18fCJzdHJpbmciPT09dHlwZW9mIGEmJjEwMD49Zi5pdGVyfHw2NCE9PWYudHMmJjk2IT09Zi50cyYmMTI4IT09Zi50c3x8MTI4IT09Zi5rcyYmMTkyIT09Zi5rcyYmMHgxMDAhPT1mLmtzfHwyPmYuaXYubGVuZ3RofHw0PApmLml2Lmxlbmd0aCkmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImpzb24gZW5jcnlwdDogaW52YWxpZCBwYXJhbWV0ZXJzIikpOyJzdHJpbmciPT09dHlwZW9mIGE/KGc9c2pjbC5taXNjLmNhY2hlZFBia2RmMihhLGYpLGE9Zy5rZXkuc2xpY2UoMCxmLmtzLzMyKSxmLnNhbHQ9Zy5zYWx0KTpzamNsLmVjYyYmYSBpbnN0YW5jZW9mIHNqY2wuZWNjLmVsR2FtYWwucHVibGljS2V5JiYoZz1hLmtlbSgpLGYua2VtdGFnPWcudGFnLGE9Zy5rZXkuc2xpY2UoMCxmLmtzLzMyKSk7InN0cmluZyI9PT10eXBlb2YgYiYmKGI9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhiKSk7InN0cmluZyI9PT10eXBlb2YgYyYmKGYuYWRhdGE9Yz1zamNsLmNvZGVjLnV0ZjhTdHJpbmcudG9CaXRzKGMpKTtnPW5ldyBzamNsLmNpcGhlcltmLmNpcGhlcl0oYSk7ZS5lKGQsZik7ZC5rZXk9YTtmLmN0PXNqY2wubW9kZVtmLm1vZGVdLmVuY3J5cHQoZyxiLGYuaXYsYyxmLnRzKTtyZXR1cm4gZn0sCmVuY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9c2pjbC5qc29uLGY9ZS5ZLmFwcGx5KGUsYXJndW1lbnRzKTtyZXR1cm4gZS5lbmNvZGUoZil9LFg6ZnVuY3Rpb24oYSxiLGMsZCl7Yz1jfHx7fTtkPWR8fHt9O3ZhciBlPXNqY2wuanNvbjtiPWUuZShlLmUoZS5lKHt9LGUuZGVmYXVsdHMpLGIpLGMsITApO3ZhciBmLGc7Zj1iLmFkYXRhOyJzdHJpbmciPT09dHlwZW9mIGIuc2FsdCYmKGIuc2FsdD1zamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoYi5zYWx0KSk7InN0cmluZyI9PT10eXBlb2YgYi5pdiYmKGIuaXY9c2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGIuaXYpKTsoIXNqY2wubW9kZVtiLm1vZGVdfHwhc2pjbC5jaXBoZXJbYi5jaXBoZXJdfHwic3RyaW5nIj09PXR5cGVvZiBhJiYxMDA+PWIuaXRlcnx8NjQhPT1iLnRzJiY5NiE9PWIudHMmJjEyOCE9PWIudHN8fDEyOCE9PWIua3MmJjE5MiE9PWIua3MmJjB4MTAwIT09Yi5rc3x8IWIuaXZ8fDI+Yi5pdi5sZW5ndGh8fDQ8Yi5pdi5sZW5ndGgpJiYKcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgianNvbiBkZWNyeXB0OiBpbnZhbGlkIHBhcmFtZXRlcnMiKSk7InN0cmluZyI9PT10eXBlb2YgYT8oZz1zamNsLm1pc2MuY2FjaGVkUGJrZGYyKGEsYiksYT1nLmtleS5zbGljZSgwLGIua3MvMzIpLGIuc2FsdD1nLnNhbHQpOnNqY2wuZWNjJiZhIGluc3RhbmNlb2Ygc2pjbC5lY2MuZWxHYW1hbC5zZWNyZXRLZXkmJihhPWEudW5rZW0oc2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGIua2VtdGFnKSkuc2xpY2UoMCxiLmtzLzMyKSk7InN0cmluZyI9PT10eXBlb2YgZiYmKGY9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhmKSk7Zz1uZXcgc2pjbC5jaXBoZXJbYi5jaXBoZXJdKGEpO2Y9c2pjbC5tb2RlW2IubW9kZV0uZGVjcnlwdChnLGIuY3QsYi5pdixmLGIudHMpO2UuZShkLGIpO2Qua2V5PWE7cmV0dXJuIDE9PT1jLnJhdz9mOnNqY2wuY29kZWMudXRmOFN0cmluZy5mcm9tQml0cyhmKX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsCmMsZCl7dmFyIGU9c2pjbC5qc29uO3JldHVybiBlLlgoYSxlLmRlY29kZShiKSxjLGQpfSxlbmNvZGU6ZnVuY3Rpb24oYSl7dmFyIGIsYz0ieyIsZD0iIjtmb3IoYiBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYikpc3dpdGNoKGIubWF0Y2goL15bYS16MC05XSskL2kpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJqc29uIGVuY29kZTogaW52YWxpZCBwcm9wZXJ0eSBuYW1lIikpLGMrPWQrJyInK2IrJyI6JyxkPSIsIix0eXBlb2YgYVtiXSl7Y2FzZSAibnVtYmVyIjpjYXNlICJib29sZWFuIjpjKz1hW2JdO2JyZWFrO2Nhc2UgInN0cmluZyI6Yys9JyInK2VzY2FwZShhW2JdKSsnIic7YnJlYWs7Y2FzZSAib2JqZWN0IjpjKz0nIicrc2pjbC5jb2RlYy5iYXNlNjQuZnJvbUJpdHMoYVtiXSwwKSsnIic7YnJlYWs7ZGVmYXVsdDpxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoImpzb24gZW5jb2RlOiB1bnN1cHBvcnRlZCB0eXBlIikpfXJldHVybiBjKyJ9In0sZGVjb2RlOmZ1bmN0aW9uKGEpe2E9CmEucmVwbGFjZSgvXHMvZywiIik7YS5tYXRjaCgvXlx7LipcfSQvKXx8cShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgianNvbiBkZWNvZGU6IHRoaXMgaXNuJ3QganNvbiEiKSk7YT1hLnJlcGxhY2UoL15ce3xcfSQvZywiIikuc3BsaXQoLywvKTt2YXIgYj17fSxjLGQ7Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKykoZD1hW2NdLm1hdGNoKC9eXHMqKD86KFsiJ10/KShbYS16XVthLXowLTldKilcMSlccyo6XHMqKD86KC0/XGQrKXwiKFthLXowLTkrXC8lKl8uQD1cLV0qKSJ8KHRydWV8ZmFsc2UpKSQvaSkpfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJqc29uIGRlY29kZTogdGhpcyBpc24ndCBqc29uISIpKSxkWzNdP2JbZFsyXV09cGFyc2VJbnQoZFszXSwxMCk6ZFs0XT9iW2RbMl1dPWRbMl0ubWF0Y2goL14oY3R8YWRhdGF8c2FsdHxpdikkLyk/c2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGRbNF0pOnVuZXNjYXBlKGRbNF0pOmRbNV0mJihiW2RbMl1dPSJ0cnVlIj09PQpkWzVdKTtyZXR1cm4gYn0sZTpmdW5jdGlvbihhLGIsYyl7YT09PXMmJihhPXt9KTtpZihiPT09cylyZXR1cm4gYTtmb3IodmFyIGQgaW4gYiliLmhhc093blByb3BlcnR5KGQpJiYoYyYmKGFbZF0hPT1zJiZhW2RdIT09YltkXSkmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoInJlcXVpcmVkIHBhcmFtZXRlciBvdmVycmlkZGVuIikpLGFbZF09YltkXSk7cmV0dXJuIGF9LGZhOmZ1bmN0aW9uKGEsYil7dmFyIGM9e30sZDtmb3IoZCBpbiBhKWEuaGFzT3duUHJvcGVydHkoZCkmJmFbZF0hPT1iW2RdJiYoY1tkXT1hW2RdKTtyZXR1cm4gY30sZWE6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fSxkO2ZvcihkPTA7ZDxiLmxlbmd0aDtkKyspYVtiW2RdXSE9PXMmJihjW2JbZF1dPWFbYltkXV0pO3JldHVybiBjfX07c2pjbC5lbmNyeXB0PXNqY2wuanNvbi5lbmNyeXB0O3NqY2wuZGVjcnlwdD1zamNsLmpzb24uZGVjcnlwdDtzamNsLm1pc2MuY2E9e307CnNqY2wubWlzYy5jYWNoZWRQYmtkZjI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1zamNsLm1pc2MuY2EsZDtiPWJ8fHt9O2Q9Yi5pdGVyfHwxRTM7Yz1jW2FdPWNbYV18fHt9O2Q9Y1tkXT1jW2RdfHx7Zmlyc3RTYWx0OmIuc2FsdCYmYi5zYWx0Lmxlbmd0aD9iLnNhbHQuc2xpY2UoMCk6c2pjbC5yYW5kb20ucmFuZG9tV29yZHMoMiwwKX07Yz1iLnNhbHQ9PT1zP2QuZmlyc3RTYWx0OmIuc2FsdDtkW2NdPWRbY118fHNqY2wubWlzYy5wYmtkZjIoYSxjLGIuaXRlcik7cmV0dXJue2tleTpkW2NdLnNsaWNlKDApLHNhbHQ6Yy5zbGljZSgwKX19OwoKfSx7ImNyeXB0byI6NTA4fV0sNzMwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKKiBAYXV0aG9yIG1pY2FlbHBlZHJvc2FAZ21haWwuY29tCiogTWluaW1hbCBpbnRlcmZhY2UgYW5kIGltcGxlbWVudGF0aW9uIHRvIHNlbmQgYW5kIHJlY2VpdmUgbWVzc2FnZXMuIEl0IGNhbiBiZSByZXVzZWQgaW4gbWFueSB0eXBlIG9mIGNvbXBvbmVudHMuCiogQ29tcG9uZW50cyB0aGF0IG5lZWQgYSBtZXNzYWdlIHN5c3RlbSBzaG91bGQgcmVjZWl2ZSB0aGlzIGNsYXNzIGFzIGEgZGVwZW5kZW5jeSBvciBleHRlbmQgaXQuCiogRXh0ZW5zaW9ucyBzaG91bGQgaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgcHJpdmF0ZSBtZXRob2RzOiBfb25Qb3N0TWVzc2FnZSBhbmQgX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcgoqLwoKdmFyIEJ1cyA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX21zZ0lkOiBudW1iZXI7CiAgX3N1YnNjcmlwdGlvbnM6IDx1cmw6IE1zZ0xpc3RlbmVyW10+CiAgICBfcmVzcG9uc2VUaW1lT3V0OiBudW1iZXIKICBfcmVzcG9uc2VDYWxsYmFja3M6IDx1cmwraWQ6IChtc2cpID0+IHZvaWQ+CiAgICAqLwoKICBmdW5jdGlvbiBCdXMoKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBCdXMpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5fbXNnSWQgPSAwOwogICAgX3RoaXMuX3N1YnNjcmlwdGlvbnMgPSB7fTsKCiAgICBfdGhpcy5fcmVzcG9uc2VUaW1lT3V0ID0gNTAwMDsgLy9kZWZhdWx0IHRvIDNzCiAgICBfdGhpcy5fcmVzcG9uc2VDYWxsYmFja3MgPSB7fTsKCiAgICBfdGhpcy5fcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyKCk7CiAgfQoKICAvKioKICAqIFJlZ2lzdGVyIGxpc3RlbmVyIHRvIHJlY2VpdmUgbWVzc2FnZSB3aGVuICJtc2cudG8gPT09IHVybCIuCiAgKiBTcGVjaWFsIHVybCAiKiIgZm9yIGRlZmF1bHQgbGlzdGVuZXIgaXMgYWNjZXB0ZWQgdG8gaW50ZXJjZXB0IGFsbCBtZXNzYWdlcy4KICAqIEBwYXJhbSB7VVJMfSB1cmwgQWRkcmVzcyB0byBpbnRlcmNlcHQsIHRoYSBpcyBpbiB0aGUgbWVzc2FnZSAidG8iCiAgKiBAcGFyYW0ge0xpc3RlbmVyfSBsaXN0ZW5lciBsaXN0ZW5lcgogICogQHJldHVybiB7TXNnTGlzdGVuZXJ9IGluc3RhbmNlIG9mIE1zZ0xpc3RlbmVyCiAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEJ1cywgW3sKICAgIGtleTogJ2FkZExpc3RlbmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRMaXN0ZW5lcih1cmwsIGxpc3RlbmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaXRlbSA9IG5ldyBNc2dMaXN0ZW5lcihfdGhpcy5fc3Vic2NyaXB0aW9ucywgdXJsLCBsaXN0ZW5lcik7CiAgICAgIHZhciBpdGVtTGlzdCA9IF90aGlzLl9zdWJzY3JpcHRpb25zW3VybF07CiAgICAgIGlmICghaXRlbUxpc3QpIHsKICAgICAgICBpdGVtTGlzdCA9IFtdOwogICAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25zW3VybF0gPSBpdGVtTGlzdDsKICAgICAgfQoKICAgICAgaXRlbUxpc3QucHVzaChpdGVtKTsKICAgICAgcmV0dXJuIGl0ZW07CiAgICB9CgogICAgLyoqCiAgICAgKiBNYW51YWxseSBhZGQgYSByZXNwb25zZSBsaXN0ZW5lci4gT25seSBvbmUgbGlzdGVuZXIgcGVyIG1lc3NhZ2UgSUQgc2hvdWxkIGV4aXN0LgogICAgICogQVRFTlRJT04sIHRoZXJlIGlzIG5vIHRpbWVvdXQgZm9yIHRoaXMgbGlzdGVuZXIuCiAgICAgKiBUaGUgbGlzdGVuZXIgc2hvdWxkIGJlIHJlbW92ZWQgd2l0aCBhIHJlbW92ZVJlc3BvbnNlTGlzdGVuZXIsIGZhaWxpbmcgdG8gZG8gdGhpcyB3aWxsIHJlc3VsdCBpbiBhIHVucmVsZWFzZWQgbWVtb3J5IHByb2JsZW0uCiAgICAgKiBAcGFyYW0ge1VSTH0gdXJsIE9yaWdpbiBhZGRyZXNzIG9mIHRoZSBtZXNzYWdlIHNlbnQsICJtc2cuZnJvbSIuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbXNnSWQgTWVzc2FnZSBJRCB0aGF0IGlzIHJldHVybmVkIGZyb20gdGhlIHBvc3RNZXNzYWdlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzcG9uc2VMaXN0ZW5lciBDYWxsYmFjayBmdW5jdGlvbiBmb3IgdGhlIHJlc3BvbnNlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkUmVzcG9uc2VMaXN0ZW5lcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkUmVzcG9uc2VMaXN0ZW5lcih1cmwsIG1zZ0lkLCByZXNwb25zZUxpc3RlbmVyKSB7CiAgICAgIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3VybCArIG1zZ0lkXSA9IHJlc3BvbnNlTGlzdGVuZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHJlc3BvbnNlIGxpc3RlbmVyLgogICAgICogQHBhcmFtIHtVUkx9IHVybCBPcmlnaW4gYWRkcmVzcyBvZiB0aGUgbWVzc2FnZSBzZW50LCAibXNnLmZyb20iLgogICAgICogQHBhcmFtIHtudW1iZXJ9IG1zZ0lkICBNZXNzYWdlIElEIHRoYXQgaXMgcmV0dXJuZWQgZnJvbSB0aGUgcG9zdE1lc3NhZ2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVSZXNwb25zZUxpc3RlbmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVSZXNwb25zZUxpc3RlbmVyKHVybCwgbXNnSWQpIHsKICAgICAgZGVsZXRlIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3VybCArIG1zZ0lkXTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSBhbGwgZXhpc3RlbnQgbGlzdGVuZXJzIGZvciB0aGUgVVJMCiAgICAgKiBAcGFyYW0gIHtVUkx9IHVybCBBZGRyZXNzIHJlZ2lzdGVyZWQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVBbGxMaXN0ZW5lcnNPZicsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzT2YodXJsKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW3VybF07CiAgICB9CgogICAgLyoqCiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIGJpbmQgbGlzdGVuZXJzIChpbiBib3RoIGRpcmVjdGlvbnMpIGludG8gb3RoZXIgTWluaUJ1cyB0YXJnZXQuCiAgICAgKiBAcGFyYW0gIHtVUkx9IG91dFVybCBPdXRib3VuZCBVUkwsIHJlZ2lzdGVyIGxpc3RlbmVyIGZvciB1cmwgaW4gZGlyZWN0aW9uICJ0aGlzIC0+IHRhcmdldCIKICAgICAqIEBwYXJhbSAge1VSTH0gaW5VcmwgSW5ib3VuZCBVUkwsIHJlZ2lzdGVyIGxpc3RlbmVyIGZvciB1cmwgaW4gZGlyZWN0aW9uICJ0YXJnZXQgLT4gdGhpcyIKICAgICAqIEBwYXJhbSAge01pbmlCdXN9IHRhcmdldCBUaGUgb3RoZXIgdGFyZ2V0IE1pbmlCdXMKICAgICAqIEByZXR1cm4ge0JvdW5kfSBhbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgcHJvcGVydGllcyBbdGhpc0xpc3RlbmVyLCB0YXJnZXRMaXN0ZW5lcl0gYW5kIHRoZSB1bmJpbmQgbWV0aG9kLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2JpbmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmQob3V0VXJsLCBpblVybCwgdGFyZ2V0KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB0aGlzTGlzdG4gPSBfdGhpcy5hZGRMaXN0ZW5lcihvdXRVcmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICB0YXJnZXQucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgfSk7CgogICAgICB2YXIgdGFyZ2V0TGlzdG4gPSB0YXJnZXQuYWRkTGlzdGVuZXIoaW5VcmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBfdGhpcy5wb3N0TWVzc2FnZShtc2cpOwogICAgICB9KTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgdGhpc0xpc3RlbmVyOiB0aGlzTGlzdG4sCiAgICAgICAgdGFyZ2V0TGlzdGVuZXI6IHRhcmdldExpc3RuLAogICAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkgewogICAgICAgICAgX3RoaXMyLnRoaXNMaXN0ZW5lci5yZW1vdmUoKTsKICAgICAgICAgIF90aGlzMi50YXJnZXRMaXN0ZW5lci5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CgogICAgLy9wdWJsaXNoIG9uIGRlZmF1bHQgbGlzdGVuZXJzCgogIH0sIHsKICAgIGtleTogJ19wdWJsaXNoT25EZWZhdWx0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHVibGlzaE9uRGVmYXVsdChtc2cpIHsKICAgICAgLy9pcyB0aGVyZSBhbnkgIioiIChkZWZhdWx0KSBsaXN0ZW5lcnM/CiAgICAgIHZhciBpdGVtTGlzdCA9IHRoaXMuX3N1YnNjcmlwdGlvbnNbJyonXTsKICAgICAgaWYgKGl0ZW1MaXN0KSB7CiAgICAgICAgdGhpcy5fcHVibGlzaE9uKGl0ZW1MaXN0LCBtc2cpOwogICAgICB9CiAgICB9CgogICAgLy9wdWJsaXNoIG9uIGEgc3Vic2NyaXB0aW9uIGxpc3QuCgogIH0sIHsKICAgIGtleTogJ19wdWJsaXNoT24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wdWJsaXNoT24oaXRlbUxpc3QsIG1zZykgewogICAgICBpdGVtTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHsKICAgICAgICBzdWIuX2NhbGxiYWNrKG1zZyk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZXNwb25zZUNhbGxiYWNrJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzcG9uc2VDYWxsYmFjayhpbk1zZywgcmVzcG9uc2VDYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9hdXRvbWF0aWMgbWFuYWdlbWVudCBvZiByZXNwb25zZSBoYW5kbGVycwogICAgICBpZiAocmVzcG9uc2VDYWxsYmFjaykgewogICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgcmVzcG9uc2VJZCA9IGluTXNnLmZyb20gKyBpbk1zZy5pZDsKICAgICAgICAgIF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXSA9IHJlc3BvbnNlQ2FsbGJhY2s7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciByZXNwb25zZUZ1biA9IF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXTsKICAgICAgICAgICAgZGVsZXRlIF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXTsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZUZ1bikgewogICAgICAgICAgICAgIHZhciBlcnJvck1zZyA9IHsKICAgICAgICAgICAgICAgIGlkOiBpbk1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywKICAgICAgICAgICAgICAgIGJvZHk6IHsgY29kZTogNDA4LCBkZXNjOiAnUmVzcG9uc2UgdGltZW91dCEnLCB2YWx1ZTogaW5Nc2cgfQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIHJlc3BvbnNlRnVuKGVycm9yTXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgX3RoaXMuX3Jlc3BvbnNlVGltZU91dCk7CiAgICAgICAgfSkoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZXNwb25zZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChtc2cudHlwZSA9PT0gJ3Jlc3BvbnNlJykgewogICAgICAgIHZhciByZXNwb25zZUlkID0gbXNnLnRvICsgbXNnLmlkOwogICAgICAgIHZhciByZXNwb25zZUZ1biA9IF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXTsKCiAgICAgICAgLy9pZiBpdCdzIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2UsIGRvbid0IGRlbGV0ZSByZXNwb25zZSBsaXN0ZW5lcgogICAgICAgIGlmIChtc2cuYm9keS5jb2RlID49IDIwMCkgewogICAgICAgICAgZGVsZXRlIF90aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tyZXNwb25zZUlkXTsKICAgICAgICB9CgogICAgICAgIGlmIChyZXNwb25zZUZ1bikgewogICAgICAgICAgcmVzcG9uc2VGdW4obXNnKTsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vcmVjZWl2ZSBtZXNzYWdlcyBmcm9tIGV4dGVybmFsIGludGVyZmFjZQoKICB9LCB7CiAgICBrZXk6ICdfb25NZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25NZXNzYWdlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFfdGhpcy5fb25SZXNwb25zZShtc2cpKSB7CiAgICAgICAgdmFyIGl0ZW1MaXN0ID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbbXNnLnRvXTsKICAgICAgICBpZiAoaXRlbUxpc3QpIHsKICAgICAgICAgIF90aGlzLl9wdWJsaXNoT24oaXRlbUxpc3QsIG1zZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLl9wdWJsaXNoT25EZWZhdWx0KG1zZyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX2dlbklkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2VuSWQoaW5Nc2cpIHsKICAgICAgLy9UT0RPOiBob3cgZG8gd2UgbWFuYWdlIG1lc3NhZ2UgSUQncz8gU2hvdWxkIGl0IGJlIGEgZ2xvYmFsIHJ1bnRpbWUgY291bnRlciwgb3IgcGVyIFVSTCBhZGRyZXNzPwogICAgICAvL0dsb2JhbCBjb3VudGVyIHdpbGwgbm90IHdvcmssIGJlY2F1c2UgdGhlcmUgd2lsbCBiZSBtdWx0aXBsZSBNaW5pQnVzIGluc3RhbmNlcyEKICAgICAgLy9QZXIgVVJMLCBjYW4gYmUgYSBsb3Qgb2YgZGF0YSB0byBtYWludGFpbiEKICAgICAgLy9NYXliZSBhIGNvdW50ZXIgcGVyIE1pbmlCdXMgaW5zdGFuY2UuIFRoaXMgaXMgdGhlIGFzc3VtZWQgc29sdXRpb24gZm9yIG5vdy4KICAgICAgaWYgKCFpbk1zZy5pZCB8fCBpbk1zZy5pZCA9PT0gMCkgewogICAgICAgIHRoaXMuX21zZ0lkKys7CiAgICAgICAgaW5Nc2cuaWQgPSB0aGlzLl9tc2dJZDsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBTZW5kIG1lc3NhZ2VzIHRvIGxvY2FsIGxpc3RlbmVycywgb3IgaWYgbm90IGV4aXN0cyB0byBleHRlcm5hbCBsaXN0ZW5lcnMuCiAgICAqIEl0J3MgaGFzIGFuIG9wdGlvbmFsIG1lY2hhbmlzbSBmb3IgYXV0b21hdGljIG1hbmFnZW1lbnQgb2YgcmVzcG9uc2UgaGFuZGxlcnMuCiAgICAqIFRoZSByZXNwb25zZSBoYW5kbGVyIHdpbGwgYmUgdW5yZWdpc3RlcmVkIGFmdGVyIHJlY2VpdmluZyB0aGUgcmVzcG9uc2UsIG9yIGFmdGVyIHJlc3BvbnNlIHRpbWVvdXQgKGRlZmF1bHQgdG8gM3MpLgogICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBtc2cgTWVzc2FnZSB0byBzZW5kLiBNZXNzYWdlIElEIGlzIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhlIG1lc3NhZ2UuCiAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSByZXNwb25zZUNhbGxiYWNrIE9wdGlvbmFsIHBhcmFtZXRlciwgaWYgdGhlIGRldmVsb3BlciB3aGF0J3MgYXV0b21hdGljIHJlc3BvbnNlIG1hbmFnZW1lbnQuCiAgICAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJucyB0aGUgbWVzc2FnZSBJRCwgaW4gY2FzZSBpdCBzaG91bGQgYmUgbmVlZGVkIGZvciBtYW51YWwgbWFuYWdlbWVudCBvZiB0aGUgcmVzcG9uc2UgaGFuZGxlci4KICAgICovCgogIH0sIHsKICAgIGtleTogJ3Bvc3RNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBwb3N0TWVzc2FnZShpbk1zZywgcmVzcG9uc2VDYWxsYmFjaykge30KCiAgICAvKioKICAgICAqIE5vdCBwdWJsaWMgYXZhaWxhYmxlLCB1c2VkIGJ5IHRoZSBjbGFzcyBleHRlbnNpb24gaW1wbGVtZW50YXRpb24sIHRvIHByb2Nlc3MgbWVzc2FnZXMgZnJvbSB0aGUgcHVibGljICJwb3N0TWVzc2FnZSIgd2l0aG91dCBhIHJlZ2lzdGVyZWQgbGlzdGVuZXIuCiAgICAgKiBVc2VkIHRvIHNlbmQgdGhlIG1lc3NhZ2UgdG8gYW4gZXh0ZXJuYWwgaW50ZXJmYWNlLCBsaWtlIGEgV2ViV29ya2VyLCBJRnJhbWUsIGV0Yy4KICAgICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gbXNnIE1lc3NhZ2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfb25Qb3N0TWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUG9zdE1lc3NhZ2UobXNnKSB7fSAvKmltcGxlbWVudGF0aW9uIHdpbGwgc2VuZCBtZXNzYWdlIHRvIGV4dGVybmFsIHN5c3RlbSovCgogICAgLyoqCiAgICAgKiBOb3QgcHVibGljIGF2YWlsYWJsZSwgdXNlZCBieSB0aGUgY2xhc3MgZXh0ZW5zaW9uIGltcGxlbWVudGF0aW9uLCB0byBwcm9jZXNzIGFsbCBtZXNzYWdlcyB0aGF0IGVudGVyIHRoZSBNaW5pQnVzIGZyb20gYW4gZXh0ZXJuYWwgaW50ZXJmYWNlLCBsaWtlIGEgV2ViV29ya2VyLCBJRnJhbWUsIGV0Yy4KICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBvbmUgdGltZSBpbiB0aGUgY29uc3RydWN0b3IgdG8gcmVnaXN0ZXIgZXh0ZXJuYWwgbGlzdGVuZXJzLgogICAgICogVGhlIGltcGxlbWVudGF0aW9uIHdpbGwgcHJvYmFibHkgY2FsbCB0aGUgIl9vbk1lc3NhZ2UiIG1ldGhvZCB0byBwdWJsaXNoIGluIHRoZSBsb2NhbCBsaXN0ZW5lcnMuCiAgICAgKiBETyBOT1QgY2FsbCAicG9zdE1lc3NhZ2UiLCB0aGVyZSBpcyBhIGRhbmdlciB0aGF0IHRoZSBtZXNzYWdlIGVudGVycyBpbiBhIGN5Y2xlIQogICAgICovCgogIH0sIHsKICAgIGtleTogJ19yZWdpc3RlckV4dGVybmFsTGlzdGVuZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIoKSB7LyppbXBsZW1lbnRhdGlvbiB3aWxsIHJlZ2lzdGVyIGV4dGVybmFsIGxpc3RlbmVyIGFuZCBjYWxsICJ0aGlzLl9vbk1lc3NhZ2UobXNnKSIgKi99CiAgfV0pOwogIHJldHVybiBCdXM7Cn0oKTsKCnZhciBNc2dMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX3N1YnNjcmlwdGlvbnM6IDxzdHJpbmc6IE1zZ0xpc3RlbmVyW10+OwogIF91cmw6IHN0cmluZzsKICBfY2FsbGJhY2s6IChtc2cpID0+IHZvaWQ7CiAgKi8KCiAgZnVuY3Rpb24gTXNnTGlzdGVuZXIoc3Vic2NyaXB0aW9ucywgdXJsLCBjYWxsYmFjaykgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgTXNnTGlzdGVuZXIpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX3N1YnNjcmlwdGlvbnMgPSBzdWJzY3JpcHRpb25zOwogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoTXNnTGlzdGVuZXIsIFt7CiAgICBrZXk6ICdyZW1vdmUnLAoKCiAgICAvKioKICAgICAqIFJlbW92ZSB0aGlzIGxpc3RlbmVyIGZyb20gdGhlIEJ1cwogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN1YnMgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1tfdGhpcy5fdXJsXTsKICAgICAgaWYgKHN1YnMpIHsKICAgICAgICB2YXIgaW5kZXggPSBzdWJzLmluZGV4T2YoX3RoaXMpOwogICAgICAgIHN1YnMuc3BsaWNlKGluZGV4LCAxKTsKCiAgICAgICAgLy9pZiB0aGVyZSBhcmUgbm8gbGlzdGVuZXJzLCByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBlbnRpcmVseS4KICAgICAgICBpZiAoc3Vicy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc3Vic2NyaXB0aW9uc1tfdGhpcy5fdXJsXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICd1cmwnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl91cmw7CiAgICB9CiAgfV0pOwogIHJldHVybiBNc2dMaXN0ZW5lcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gQnVzOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3MzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeScpOwoKdmFyIF9zdHJpbmdpZnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RyaW5naWZ5KTsKCnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7Cgp2YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpOwoKdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOwoKdmFyIF9CdXMyID0gcmVxdWlyZSgnLi9CdXMnKTsKCnZhciBfQnVzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0J1czIpOwoKdmFyIF9QaXBlbGluZSA9IHJlcXVpcmUoJy4vUGlwZWxpbmUnKTsKCnZhciBfUGlwZWxpbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGlwZWxpbmUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgoqIEBhdXRob3IgbWljYWVscGVkcm9zYUBnbWFpbC5jb20KKiBNZXNzYWdlIEJVUyBJbnRlcmZhY2UgaXMgYW4gZXh0ZW5zaW9uIG9mIHRoZSBCdXMKKiBJdCBkb2Vzbid0IHN1cHBvcnQgdGhlIGRlZmF1bHQgJyonIGxpc3RlbmVyLCBpbnN0ZWFkIGl0IHVzZXMgdGhlIHJlZ2lzdHJ5LnJlc29sdmUoLi4pCiovCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKdmFyIE1lc3NhZ2VCdXMgPSBmdW5jdGlvbiAoX0J1cykgewogICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKE1lc3NhZ2VCdXMsIF9CdXMpOwoKICAvKiBwcml2YXRlCiAgX3JlZ2lzdHJ5OiBSZWdpc3RyeQogIF9mb3J3YXJkczogeyA8ZnJvbS11cmw+OiB7IGZsOiBNc2dMaXN0ZW5lciwgc2FuZGJveFRvVXJsczogTWFwKFNhbmRib3gsIFt0by11cmxdKSwgdXJsVG9TYW5kYm94OiB7IHRvLXVybDogU2FuZGJveCB9IH0gfQogICAgX3BpcGVsaW5lOiBQaXBlbGluZQogICovCgogIC8vVE9ETzogZnV0dXJlIG9wdGltaXphdGlvbgogIC8vMS4gbWVzc2FnZSBiYXRjaCBwcm9jZXNzaW5nIHdpdGggc2V0SW50ZXJ2YWwKICAvLzIuIHJlc29sdmUgZGVmYXVsdCBnYXRld2F5L3Byb3Rvc3R1YiB3aXRoIHJlZ2lzdGVyLnJlc29sdmUKCiAgZnVuY3Rpb24gTWVzc2FnZUJ1cyhyZWdpc3RyeSkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgTWVzc2FnZUJ1cyk7CgogICAgdmFyIF90aGlzMiA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoTWVzc2FnZUJ1cykuY2FsbCh0aGlzKSk7CgogICAgX3RoaXMyLl9yZWdpc3RyeSA9IHJlZ2lzdHJ5OwogICAgX3RoaXMyLl9mb3J3YXJkcyA9IHt9OwoKICAgIF90aGlzMi5fcGlwZWxpbmUgPSBuZXcgX1BpcGVsaW5lMi5kZWZhdWx0KGZ1bmN0aW9uIChlcnJvcikgewogICAgICBjb25zb2xlLmxvZygnUElQRUxJTkUtRVJST1I6ICcsICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShlcnJvcikpOwogICAgfSk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoTWVzc2FnZUJ1cywgW3sKICAgIGtleTogJ3Bvc3RNZXNzYWdlJywKCgogICAgLyoqCiAgICAgKiBQb3N0IGEgbWVzc2FnZSBmb3Igcm91dGluZy4gSXQgd2lsbCBmaXJzdCBzZWFyY2ggZm9yIGEgbGlzdGVuZXIsIGlmIHRoZXJlIGlzIG5vIG9uZSwgaXQgc2VuZHMgdG8gYSBleHRlcm5hbCByb3V0aW5nIHVzaW5nIHRoZSBfb25Qb3N0TWVzc2FnZS4KICAgICAqIEV4dGVybmFsIHJvdXRpbmcgdXNlIHRoZSByZWdpc3RyeS5yZXNvbHZlKC4uKSBtZXRob2QgdG8gZGVjaWRlIHRoZSBkZXN0aW5hdGlvbiBzYW5kYm94LgogICAgICogQHBhcmFtICB7TWVzc2FnZX0gaW5Nc2cgICAgICAgICAgICBKU09OIHdpdGggbWFuZGF0b3J5IE1lc3NhZ2Ugc3RydWN0dXJlIHtpZCwgdHlwZSwgZnJvbSwgdG99CiAgICAgKiBAcGFyYW0gIHtDYWxsYmFja30gcmVzcG9uc2VDYWxsYmFjayBPcHRpb25hbCBjYWxsYmFjayBpZiBhIHJlc3BvbnNlIGlzIGV4cGVjdGVkIGZyb20gdGhlIHJlcXVlc3QuIEEgcmVzcG9uc2Ugd2lsbCBiZSBhbHdheXMgc2VudCwgZXZlbiBpZiBpdCBpcyBhICJUaW1lb3V0Ii4KICAgICAqIEByZXR1cm4ge251bWJlcn0gICAgICAgICAgICAgICAgICB0aGUgTWVzc2FnZSBpZAogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gcG9zdE1lc3NhZ2UoaW5Nc2csIHJlc3BvbnNlQ2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9nZW5JZChpbk1zZyk7CgogICAgICBfdGhpcy5fcGlwZWxpbmUucHJvY2Vzcyhpbk1zZywgZnVuY3Rpb24gKG1zZykgewoKICAgICAgICBfdGhpcy5fcmVzcG9uc2VDYWxsYmFjayhpbk1zZywgcmVzcG9uc2VDYWxsYmFjayk7CgogICAgICAgIGlmICghX3RoaXMuX29uUmVzcG9uc2UobXNnKSkgewogICAgICAgICAgdmFyIGl0ZW1MaXN0ID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbbXNnLnRvXTsKICAgICAgICAgIGlmIChpdGVtTGlzdCkgewogICAgICAgICAgICAvL2RvIG5vdCBwdWJsaXNoIG9uIGRlZmF1bHQgYWRkcmVzcywgYmVjYXVzZSBvZiBsb29wYmFjayBjeWNsZQogICAgICAgICAgICBfdGhpcy5fcHVibGlzaE9uKGl0ZW1MaXN0LCBtc2cpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBubyBsaXN0ZW5lciwgc2VuZCB0byBleHRlcm5hbCBpbnRlcmZhY2UKICAgICAgICAgICAgX3RoaXMuX29uUG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIGluTXNnLmlkOwogICAgfQoKICAgIC8qKgogICAgICogQWRkcyBhbiBleHRlcm5hbCBwdWJsaXNoIGFkZHJlc3MgbGlzdGVuZXIuIEV2ZXJ5IG1lc3NhZ2UgZm9yIHRoZSBhZGRyZXNzIHdpbGwgYmUgZm9yd2FyZGVkIHRvIHRoZSBleHRlcm5hbCByb3V0aW5nIGJ5IF9vblBvc3RNZXNzYWdlLgogICAgICogVGhpcyBtZWFucywgZXZlbiBpZiB0aGVyZSBpcyBhIGxpc3RlbmVyIGZvciB0aGUgYWRkcmVzcywgaXQgd2lsbCBhbHNvIHNlbmQgdGhlIG1lc3NhZ2UgdG8gdGhlIGV4dGVybmFsIHJvdXRpbmcuCiAgICAgKiBAcGFyYW0ge1VSTH0gZnJvbSBQdWJsaXNoIGFkZHJlc3MuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkUHVibGlzaCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkUHVibGlzaChmcm9tKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vdmVyaWZ5IGlmIGZvcndhcmQgZXhpc3QKICAgICAgdmFyIHJlZkNvdW50ID0gX3RoaXMuX2ZvcndhcmRzW2Zyb21dOwogICAgICBpZiAoIXJlZkNvdW50KSB7CiAgICAgICAgdmFyIGZvcndhcmRMaXN0ZW5lciA9IF90aGlzLmFkZExpc3RlbmVyKGZyb20sIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdNQi1QVUJMSVNIOiAoICcgKyBmcm9tICsgJyApJyk7CiAgICAgICAgICBfdGhpcy5fb25Qb3N0TWVzc2FnZShtc2cpOwogICAgICAgIH0pOwoKICAgICAgICByZWZDb3VudCA9IHsKICAgICAgICAgIGNvdW50ZXI6IDAsCiAgICAgICAgICBmbDogZm9yd2FyZExpc3RlbmVyLAogICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgICAgICAgIF90aGlzMy5jb3VudGVyLS07CiAgICAgICAgICAgIGlmIChfdGhpczMuY291bnRlciA9PT0gMCkgewogICAgICAgICAgICAgIF90aGlzMy5mbC5yZW1vdmUoKTsKICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuX2ZvcndhcmRzW2Zyb21dOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX2ZvcndhcmRzW2Zyb21dID0gcmVmQ291bnQ7CiAgICAgIH0KCiAgICAgIHJlZkNvdW50LmNvdW50ZXIrKzsKICAgICAgcmV0dXJuIHJlZkNvdW50OwogICAgfQoKICAgIC8qKgogICAgICogQWRkcyBhIGZvcndhcmQgbGlzdGVuZXIgZm9yIGEgbWVzc2FnZSBkZXN0aW5hdGlvbi4gRXZlcnkgbWVzc2FnZSByZWFjaGluZyBhbiBhZGRyZXNzIHdpbGwgYmUgYWxzbyBzZW50IHRvIHRoZSBmb3J3YXJkIGFkZHJlc3MuCiAgICAgKiBAcGFyYW0ge1VSTH0gZnJvbSBNZXNzYWdlIGRlc3RpbmF0aW9uLCBpdCdzIGFjdHVhbGx5IHRoZSBmaWVsZCAidG8iIG9mIHRoZSBtZXNzYWdlLgogICAgICogQHBhcmFtIHtVUkx9IHRvICAgRm9yd2FyZCBhZGRyZXNzLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZEZvcndhcmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEZvcndhcmQoZnJvbSwgdG8pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfdGhpcy5hZGRMaXN0ZW5lcihmcm9tLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgY29uc29sZS5sb2coJ01CLUZPUldBUkQ6ICggJyArIGZyb20gKyAnIHRvICcgKyB0byArICcgKScpOwogICAgICAgIF90aGlzLmZvcndhcmQodG8sIG1zZyk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogSnVzdCBmb3J3YXJkJ3MgYSBtZXNzYWdlIHRvIHRoZSBmb3J3YXJkIGFkZHJlc3MuIExpc3RlbmVycyBzaG91bGQgYmUgYXZhaWxhYmxlIGZvciB0aGUgZm9yd2FyZCBhZGRyZXNzLgogICAgICogQHBhcmFtICB7VVJMfSB1cmwgRm9yd2FyZCBhZGRyZXNzLgogICAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnIE1lc3NhZ2UgdG8gZm9yd2FyZAogICAgICovCgogIH0sIHsKICAgIGtleTogJ2ZvcndhcmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcndhcmQodXJsLCBtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpdGVtTGlzdCA9IF90aGlzLl9zdWJzY3JpcHRpb25zW3VybF07CiAgICAgIGlmIChpdGVtTGlzdCkgewogICAgICAgIF90aGlzLl9wdWJsaXNoT24oaXRlbUxpc3QsIG1zZyk7CiAgICAgIH0KICAgIH0KCiAgICAvL2RlZmF1bHQgcm91dGUsIGlmIHRoZXJlIGFyZSBubyBsaXN0ZW5lcnMgYXZhaWxhYmxlIGZvciBhIG1lc3NhZ2UgZGVzdGluYXRpb24uCgogIH0sIHsKICAgIGtleTogJ19vblBvc3RNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qb3N0TWVzc2FnZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vcmVzb2x2ZSBleHRlcm5hbCBwcm90b3N0dWIuLi4KICAgICAgX3RoaXMuX3JlZ2lzdHJ5LnJlc29sdmUobXNnLnRvKS50aGVuKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgIF90aGlzLmZvcndhcmQocm91dGUsIG1zZyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1JFU09MVkUtRVJST1I6ICcsIGUpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdwaXBlbGluZScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3BpcGVsaW5lOwogICAgfQogIH1dKTsKICByZXR1cm4gTWVzc2FnZUJ1czsKfShfQnVzMy5kZWZhdWx0KTsKCmV4cG9ydHMuZGVmYXVsdCA9IE1lc3NhZ2VCdXM7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vQnVzIjo3MzAsIi4vUGlwZWxpbmUiOjczMiwiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IjoyOTksImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MzAzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MzEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MzE0fV0sNzMyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIik7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKKiBAYXV0aG9yIG1pY2FlbHBlZHJvc2FAZ21haWwuY29tCiogU2VxdWVuY2lhbCBwcm9jZXNzb3Igb2YgbWV0aG9kcy4gU2ltaWxhciB0byBob3cgU2VxdWVudGlhbCBQcm9taXNlJ3Mgd29yaywgYnV0IGJldHRlciBmaXQgZm9yIG1lc3NhZ2UgcHJvY2Vzc2luZy4KKiBOb3JtYWwgdXNlIGZvciB0aGlzLCBpcyB0byBpbnRlcmNlcHQgYWxsIG1lc3NhZ2VzIHdpdGggY29uZmlndXJlZCBoYW5kbGVycywgYW5kIGFjdCBhY2NvcmRpbmdseS4KKi8KCnZhciBQaXBlbGluZSA9IGZ1bmN0aW9uICgpIHsKICAvKiBwdWJsaWMKICAgIGhhbmRsZXJzOiAoKFBpcGVDb250ZXh0KSA9PiB2b2lkKVtdCiAgICBvbkZhaWw6IChlcnJvcikgPT4gdm9pZAogICovCgogIGZ1bmN0aW9uIFBpcGVsaW5lKF9vbkZhaWwpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFBpcGVsaW5lKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLmhhbmRsZXJzID0gW107CiAgICBfdGhpcy5vbkZhaWwgPSBfb25GYWlsOwogIH0KCiAgLyoqCiAgICogSW5zZXJ0IGEgbWVzc2FnZSBpbiB0aGUgcGlwZWxpbmUgcXVldWUuIEFsbCBtZXNzYWdlcyBhcmUgd3JhcHBlZCB3aXRoIGEgUGlwZUNvbnRleHQuCiAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnICAgICAgIE1lc3NhZ2UgZm9yIHRoZSBxdWV1ZQogICAqIEBwYXJhbSAge0NhbGxiYWNrfSBvbkRlbGl2ZXIgV2hlbiBtZXNzYWdlIGlzIGZpbmlzaGVkIHByb2Nlc3NpbmcgZnJvbSBhbGwgaGFuZGxlcnMsIGl0IHdpbGwgYmUgZGVsaXZlcmVkIGluIHRoaXMgY2FsbGJhY2suCiAgICovCgoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShQaXBlbGluZSwgW3sKICAgIGtleTogInByb2Nlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb2Nlc3MobXNnLCBvbkRlbGl2ZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpcy5oYW5kbGVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGl0ZXIgPSBuZXcgSXRlcmF0b3IoX3RoaXMuaGFuZGxlcnMpOwogICAgICAgIGl0ZXIubmV4dChuZXcgUGlwZUNvbnRleHQoX3RoaXMsIGl0ZXIsIG1zZywgb25EZWxpdmVyKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb25EZWxpdmVyKG1zZyk7CiAgICAgIH0KICAgIH0KICB9XSk7CiAgcmV0dXJuIFBpcGVsaW5lOwp9KCk7CgovKioKKiBAYXV0aG9yIG1pY2FlbHBlZHJvc2FAZ21haWwuY29tCiogV3JhcHBlciBhcm91bmQgYSBtZXNzYWdlIHRoYXQgYWRkcyBhY3Rpb25zIHRoYXQgY2FuIGJlIGZpcmVkIGJ5IGFueSBpbnRlcmNlcHRvciBoYW5kbGVyLgoqIFRoZSBQaXBlbGluZSBpcyBhc3luY2hyb25vdXMsIHNvIGFuIGhhbmRsZXIgc2hvdWxkIGFsd2F5cyBjYWxsIGFuIGFjdGlvbiwgdGhlIGRlZmF1bHQgb25lIGlzICJuZXh0KCkiCiovCgoKdmFyIFBpcGVDb250ZXh0ID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9pblN0b3A6IGJvb2xlYW4KICAgICAgX3BpcGVsaW5lOiBQaXBlbGluZQogICAgX2l0ZXI6IEl0ZXJhdG9yCiAgICBfbXNnOiBNZXNzYWdlCiAgKi8KCiAgZnVuY3Rpb24gUGlwZUNvbnRleHQocGlwZWxpbmUsIGl0ZXIsIG1zZywgb25EZWxpdmVyKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBQaXBlQ29udGV4dCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5faW5TdG9wID0gZmFsc2U7CgogICAgX3RoaXMuX3BpcGVsaW5lID0gcGlwZWxpbmU7CiAgICBfdGhpcy5faXRlciA9IGl0ZXI7CiAgICBfdGhpcy5fbXNnID0gbXNnOwogICAgX3RoaXMuX29uRGVsaXZlciA9IG9uRGVsaXZlcjsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFBpcGVDb250ZXh0LCBbewogICAga2V5OiAibmV4dCIsCgoKICAgIC8qKgogICAgICogUHJvY2VlZCB0byB0aGUgbmV4dCBpbnRlcmNlcHRvciBoYW5kbGVyLCB1bmxlc3MgdGhlcmUgd2FzIGFuIGVycm9yLiBJZiBpdCdzIHRoZSBsYXN0IG9uZSwgcHJvY2VlZCB0byBvbkRlbGl2ZXIgaGFuZGxlci4KICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIV90aGlzLl9pblN0b3ApIHsKICAgICAgICBpZiAoX3RoaXMuX2l0ZXIuaGFzTmV4dCkgewogICAgICAgICAgX3RoaXMuX2l0ZXIubmV4dChfdGhpcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLl9vbkRlbGl2ZXIoX3RoaXMuX21zZyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBQcm9jZWVkIGRpcmVjdGx5IHRvIHRoZSBvbkRlbGl2ZXIgaGFuZGxlciwgdW5sZXNzIHRoZXJlIHdhcyBhbiBlcnJvci4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkZWxpdmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxpdmVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIV90aGlzLl9pblN0b3ApIHsKICAgICAgICBfdGhpcy5faW5TdG9wID0gdHJ1ZTsKICAgICAgICBfdGhpcy5fb25EZWxpdmVyKF90aGlzLl9tc2cpOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBNYXJrIHRoZSBjb250ZXh0IHdpdGggYW4gZXJyb3IgYW5kIHByb2NlZWQgdG8gdGhlIG9uRmFpbCBoYW5kbGVyLgogICAgICogQHBhcmFtICB7W3R5cGVdfSBlcnJvciBbZGVzY3JpcHRpb25dCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZmFpbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmFpbChlcnJvcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFfdGhpcy5faW5TdG9wKSB7CiAgICAgICAgX3RoaXMuX2luU3RvcCA9IHRydWU7CiAgICAgICAgaWYgKF90aGlzLl9waXBlbGluZS5vbkZhaWwpIHsKICAgICAgICAgIF90aGlzLl9waXBlbGluZS5vbkZhaWwoZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInBpcGVsaW5lIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcGlwZWxpbmU7CiAgICB9CiAgfSwgewogICAga2V5OiAibXNnIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fbXNnOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGluTXNnKSB7CiAgICAgIHRoaXMuX21zZyA9IGluTXNnOwogICAgfQogIH1dKTsKICByZXR1cm4gUGlwZUNvbnRleHQ7Cn0oKTsKCnZhciBJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgICBfaW5kZXg6IG51bWJlcgogICAgX2FycmF5OiBbXQogICovCgogIGZ1bmN0aW9uIEl0ZXJhdG9yKGFycmF5KSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBJdGVyYXRvcik7CgogICAgdGhpcy5faW5kZXggPSAtMTsKICAgIHRoaXMuX2FycmF5ID0gYXJyYXk7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShJdGVyYXRvciwgW3sKICAgIGtleTogImhhc05leHQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbmRleCA8IHRoaXMuX2FycmF5Lmxlbmd0aCAtIDE7CiAgICB9CiAgfSwgewogICAga2V5OiAibmV4dCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdGhpcy5faW5kZXgrKzsKICAgICAgcmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2luZGV4XTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEl0ZXJhdG9yOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBQaXBlbGluZTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyfV0sNzMzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCi8qCkFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vamFzb25kYXZpZXMvYmxvb21maWx0ZXIuanMKCk9yaWdpbmFsIExpY2Vuc2U6CgpDb3B5cmlnaHQgKGMpIDIwMTEsIEphc29uIERhdmllcwpBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0Cm1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OgoKICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcwogICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCgogICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLAogICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbgogICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgogICogVGhlIG5hbWUgSmFzb24gRGF2aWVzIG1heSBub3QgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMKICAgIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLgoKVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyAiQVMgSVMiIEFORApBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRApXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFCkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIEpBU09OIERBVklFUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULApJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UCkxJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUgpQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GCkxJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UKT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRgpBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KKi8KCi8qKgoqIEltcGxlbWVudHMgYSBCbG9vbSBmaWx0ZXIuCiogQGF1dGhvciBKYXNvbiBEYXZpZXM7IGFkYXB0ZWQgYW5kIGV4dGVuZGVkIGJ5IGJlaWVybGVAdHUtYmVybGluLmRlCiovCgp2YXIgQmxvb21GaWx0ZXIgPSBmdW5jdGlvbiAoKSB7CgogIC8vdmFyIHR5cGVkQXJyYXlzID0gdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJzsKCiAgLy8gQ3JlYXRlcyBhIG5ldyBibG9vbSBmaWx0ZXIuICBJZiAqbSogaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsIHdpdGggYSBsZW5ndGgKICAvLyBwcm9wZXJ0eSwgdGhlbiB0aGUgYmxvb20gZmlsdGVyIGlzIGxvYWRlZCB3aXRoIGRhdGEgZnJvbSB0aGUgYXJyYXksIHdoZXJlCiAgLy8gZWFjaCBlbGVtZW50IGlzIGEgMzItYml0IGludGVnZXIuICBPdGhlcndpc2UsICptKiBzaG91bGQgc3BlY2lmeSB0aGUKICAvLyBudW1iZXIgb2YgYml0cy4gIE5vdGUgdGhhdCAqbSogaXMgcm91bmRlZCB1cCB0byB0aGUgbmVhcmVzdCBtdWx0aXBsZSBvZgogIC8vIDMyLiAgKmsqIHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIGhhc2hpbmcgZnVuY3Rpb25zLgoKICBmdW5jdGlvbiBCbG9vbUZpbHRlcihtLCBrKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBCbG9vbUZpbHRlcik7CgoKICAgIHZhciB0eXBlZEFycmF5cyA9IHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCc7CgogICAgdmFyIGE7CiAgICBpZiAodHlwZW9mIG0gIT09ICdudW1iZXInKSB7CiAgICAgIGEgPSBtOwogICAgICBtID0gYS5sZW5ndGggKiAzMjsKICAgIH0KCiAgICB2YXIgbiA9IE1hdGguY2VpbChtIC8gMzIpOwogICAgdmFyIGkgPSAtMTsKICAgIHRoaXMubSA9IG0gPSBuICogMzI7CiAgICB0aGlzLmsgPSBrOwoKICAgIGlmICh0eXBlZEFycmF5cykgewogICAgICB2YXIga2J5dGVzID0gMSA8PCBNYXRoLmNlaWwoTWF0aC5sb2coTWF0aC5jZWlsKE1hdGgubG9nKG0pIC8gTWF0aC5MTjIgLyA4KSkgLyBNYXRoLkxOMik7CiAgICAgIHZhciBhcnJheSA9IGtieXRlcyA9PT0gMSA/IFVpbnQ4QXJyYXkgOiBrYnl0ZXMgPT09IDIgPyBVaW50MTZBcnJheSA6IFVpbnQzMkFycmF5OwogICAgICB2YXIga2J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihrYnl0ZXMgKiBrKTsKICAgICAgdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkobik7CiAgICAgIGlmIChhKSB3aGlsZSAoKytpIDwgbikgewogICAgICAgIGJ1Y2tldHNbaV0gPSBhW2ldOwogICAgICB9dGhpcy5fbG9jYXRpb25zID0gbmV3IEFycmF5KGtidWZmZXIpOwogICAgfSBlbHNlIHsKICAgICAgLy92YXIgYnVja2V0cyA9IHRoaXMuYnVja2V0cyA9IFtdOwogICAgICB0aGlzLmJ1Y2tldHMgPSBbXTsKICAgICAgaWYgKGEpIHdoaWxlICgrK2kgPCBuKSB7CiAgICAgICAgYnVja2V0c1tpXSA9IGFbaV07CiAgICAgIH0gZWxzZSB3aGlsZSAoKytpIDwgbikgewogICAgICAgIGJ1Y2tldHNbaV0gPSAwOwogICAgICB9dGhpcy5fbG9jYXRpb25zID0gW107CiAgICB9CiAgfQoKICAvLyBTZWUgaHR0cDovL3dpbGx3aGltLndwZW5naW5lLmNvbS8yMDExLzA5LzAzL3Byb2R1Y2luZy1uLWhhc2gtZnVuY3Rpb25zLWJ5LWhhc2hpbmctb25seS1vbmNlLwoKCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoQmxvb21GaWx0ZXIsIFt7CiAgICBrZXk6ICdsb2NhdGlvbnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvY2F0aW9ucyh2KSB7CiAgICAgIHZhciBrID0gdGhpcy5rOwogICAgICB2YXIgbSA9IHRoaXMubTsKICAgICAgdmFyIHIgPSB0aGlzLl9sb2NhdGlvbnM7CiAgICAgIHZhciBhID0gdGhpcy5mbnYxYSh2KTsKICAgICAgdmFyIGIgPSB0aGlzLmZudjFhYihhKTsKICAgICAgdmFyIHggPSBhICUgbTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrOyArK2kpIHsKICAgICAgICByW2ldID0geCA8IDAgPyB4ICsgbSA6IHg7CiAgICAgICAgeCA9ICh4ICsgYikgJSBtOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfQogIH0sIHsKICAgIGtleTogJ2FkZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkKHYpIHsKICAgICAgdmFyIGwgPSB0aGlzLmxvY2F0aW9ucyh2ICsgJycpOwogICAgICB2YXIgayA9IHRoaXMuazsKICAgICAgdmFyIGJ1Y2tldHMgPSB0aGlzLmJ1Y2tldHM7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgazsgKytpKSB7CiAgICAgICAgYnVja2V0c1tNYXRoLmZsb29yKGxbaV0gLyAzMildIHw9IDEgPDwgbFtpXSAlIDMyOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAndGVzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gdGVzdCh2KSB7CiAgICAgIHZhciBsID0gdGhpcy5sb2NhdGlvbnModiArICcnKTsKICAgICAgdmFyIGsgPSB0aGlzLms7CiAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGs7ICsraSkgewogICAgICAgIHZhciBiID0gbFtpXTsKICAgICAgICBpZiAoKGJ1Y2tldHNbTWF0aC5mbG9vcihiIC8gMzIpXSAmIDEgPDwgYiAlIDMyKSA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBORVc6IE9ScyB0aGUgQmxvb21GaWx0ZXIgZnJvbSB0aGUgcGFyYW1ldGVyCiAgICAvLyBwYXJhbSBoYXMgdG8gYmUgYSBCRjsgQkZzIHNob3VsZCBiZSBzYW1lIGxlbmd0aAoKICB9LCB7CiAgICBrZXk6ICdhZGRCbG9vbUZpbHRlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQmxvb21GaWx0ZXIodikgewogICAgICB2YXIgYnVja2V0cyA9IHRoaXMuYnVja2V0czsKICAgICAgdmFyIGJ1Y2tldHNQYXJhbSA9IHYuYnVja2V0czsKICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBidWNrZXRzLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgIGJ1Y2tldHNbaV0gPSBidWNrZXRzW2ldIHwgYnVja2V0c1BhcmFtW2ldOwogICAgICB9CiAgICB9CgogICAgLy8gRXN0aW1hdGVkIGNhcmRpbmFsaXR5LgoKICB9LCB7CiAgICBrZXk6ICdzaXplJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzaXplKCkgewogICAgICB2YXIgYnVja2V0cyA9IHRoaXMuYnVja2V0czsKICAgICAgdmFyIGJpdHMgPSAwOwogICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGJ1Y2tldHMubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgYml0cyArPSB0aGlzLnBvcGNudChidWNrZXRzW2ldKTsKICAgICAgfXJldHVybiAtdGhpcy5tICogTWF0aC5sb2coMSAtIGJpdHMgLyB0aGlzLm0pIC8gdGhpcy5rOwogICAgfQoKICAgIC8vIGh0dHA6Ly9ncmFwaGljcy5zdGFuZm9yZC5lZHUvfnNlYW5kZXIvYml0aGFja3MuaHRtbCNDb3VudEJpdHNTZXRQYXJhbGxlbAoKICB9LCB7CiAgICBrZXk6ICdwb3BjbnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBvcGNudCh2KSB7CiAgICAgIHYgLT0gdiA+PiAxICYgMHg1NTU1NTU1NTsKICAgICAgdiA9ICh2ICYgMHgzMzMzMzMzMykgKyAodiA+PiAyICYgMHgzMzMzMzMzMyk7CiAgICAgIHJldHVybiAodiArICh2ID4+IDQpICYgMHhmMGYwZjBmKSAqIDB4MTAxMDEwMSA+PiAyNDsKICAgIH0KCiAgICAvLyBGb3dsZXIvTm9sbC9WbyBoYXNoaW5nLgoKICB9LCB7CiAgICBrZXk6ICdmbnYxYScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm52MWEodikgewogICAgICB2YXIgYSA9IDIxNjYxMzYyNjE7CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdi5sZW5ndGg7IGkgPCBuOyArK2kpIHsKICAgICAgICB2YXIgYyA9IHYuY2hhckNvZGVBdChpKTsKICAgICAgICB2YXIgZCA9IGMgJiAweGZmMDA7CiAgICAgICAgaWYgKGQpIGEgPSB0aGlzLmZudm11bHRpcGx5KGEgXiBkID4+IDgpOwogICAgICAgIGEgPSB0aGlzLmZudm11bHRpcGx5KGEgXiBjICYgMHhmZik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZm52bWl4KGEpOwogICAgfQoKICAgIC8vIGEgKiAxNjc3NzYxOSBtb2QgMioqMzIKCiAgfSwgewogICAga2V5OiAnZm52bXVsdGlwbHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZudm11bHRpcGx5KGEpIHsKICAgICAgcmV0dXJuIGEgKyAoYSA8PCAxKSArIChhIDw8IDQpICsgKGEgPDwgNykgKyAoYSA8PCA4KSArIChhIDw8IDI0KTsKICAgIH0KCiAgICAvLyBPbmUgYWRkaXRpb25hbCBpdGVyYXRpb24gb2YgRk5WLCBnaXZlbiBhIGhhc2guCgogIH0sIHsKICAgIGtleTogJ2ZudjFhYicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm52MWFiKGEpIHsKICAgICAgcmV0dXJuIHRoaXMuZm52bWl4KHRoaXMuZm52bXVsdGlwbHkoYSkpOwogICAgfQoKICAgIC8vIFNlZSBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMzEwMTkwMTMyMjUvaHR0cDovL2hvbWUuY29tY2FzdC5uZXQvfmJyZXRtL2hhc2gvNi5odG1sCgogIH0sIHsKICAgIGtleTogJ2Zudm1peCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm52bWl4KGEpIHsKICAgICAgYSArPSBhIDw8IDEzOwogICAgICBhIF49IGEgPj4+IDc7CiAgICAgIGEgKz0gYSA8PCAzOwogICAgICBhIF49IGEgPj4+IDE3OwogICAgICBhICs9IGEgPDwgNTsKICAgICAgcmV0dXJuIGEgJiAweGZmZmZmZmZmOwogICAgfQogIH1dKTsKICByZXR1cm4gQmxvb21GaWx0ZXI7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEJsb29tRmlsdGVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3MzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIik7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCi8qKgoqIFJlcHJlc2VudHMgdGhlIHVzZXIncyBpbmZvcm1hdGlvbiBmb3IgdGhlIGdsb2JhbCByZWdpc3RyeS4KKiBAYXV0aG9yIGJlaWVybGVAdHUtYmVybGluLmRlCiovCgp2YXIgR2xvYmFsUmVnaXN0cnlSZWNvcmQgPSBmdW5jdGlvbiAoKSB7CgogICAgICAvKioKICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBlbXB0eSBvYmplY3QuCiAgICAgICAqLwoKICAgICAgZnVuY3Rpb24gR2xvYmFsUmVnaXN0cnlSZWNvcmQoKSB7CiAgICAgICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIEdsb2JhbFJlZ2lzdHJ5UmVjb3JkKTsKCiAgICAgICAgICAgIHRoaXMuZ3VpZDsKICAgICAgICAgICAgdGhpcy5zYWx0OwogICAgICAgICAgICB0aGlzLnVzZXJJRHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5sYXN0VXBkYXRlOwogICAgICAgICAgICB0aGlzLnRpbWVvdXQ7CiAgICAgICAgICAgIHRoaXMucHVibGljS2V5OwogICAgICAgICAgICB0aGlzLmFjdGl2ZTsKICAgICAgICAgICAgdGhpcy5yZXZva2VkOwogICAgICB9CgogICAgICAvKioKICAgICAgICogQ29uc3RydWN0cyBhIG5ldyBvYmplY3QgcmVwcmVzZW50aW5nIGluZm9ybWF0aW9uIGFib3V0IG9uZSBjb250YWN0LgogICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSAgb2JqZWN0ICBBIEphdmFTY3JpcHQgT2JqZWN0IHdpdGggYWxsIGZpZWxkcyBmb3IgdGhlIEdsb2JhbCBSZWdpc3RyeSBSZWNvcmQuCiAgICAgICAqLwoKCiAgICAgICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEdsb2JhbFJlZ2lzdHJ5UmVjb3JkLCBbewogICAgICAgICAgICBrZXk6ICJnZXRSZWNvcmQiLAogICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVjb3JkKCkgewoKICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZ2l2ZSBlcnJvciBpZiBmaWVsZHMgYXJlIG1pc3NpbmcKCiAgICAgICAgICAgICAgICAgIHZhciByZWNvcmQgPSBuZXcgT2JqZWN0KCk7CiAgICAgICAgICAgICAgICAgIHJlY29yZC5ndWlkID0gdGhpcy5ndWlkOwogICAgICAgICAgICAgICAgICByZWNvcmQuc2FsdCA9IHRoaXMuc2FsdDsKICAgICAgICAgICAgICAgICAgcmVjb3JkLnVzZXJJRHMgPSB0aGlzLnVzZXJJRHM7CiAgICAgICAgICAgICAgICAgIHJlY29yZC5sYXN0VXBkYXRlID0gdGhpcy5sYXN0VXBkYXRlOwogICAgICAgICAgICAgICAgICByZWNvcmQudGltZW91dCA9IHRoaXMudGltZW91dDsKICAgICAgICAgICAgICAgICAgcmVjb3JkLnB1YmxpY0tleSA9IHRoaXMucHVibGljS2V5OwogICAgICAgICAgICAgICAgICByZWNvcmQuYWN0aXZlID0gdGhpcy5hY3RpdmU7CiAgICAgICAgICAgICAgICAgIHJlY29yZC5yZXZva2VkID0gdGhpcy5yZXZva2VkOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZDsKICAgICAgICAgICAgfQogICAgICB9XSk7CiAgICAgIHJldHVybiBHbG9iYWxSZWdpc3RyeVJlY29yZDsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gR2xvYmFsUmVnaXN0cnlSZWNvcmQ7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MzExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjMxMn1dLDczNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfdHlwZW9mMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2YnKTsKCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKdmFyIF9mcm9tID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL2FycmF5L2Zyb20nKTsKCnZhciBfZnJvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mcm9tKTsKCnZhciBfc2V0ID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL3NldCcpOwoKdmFyIF9zZXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0KTsKCnZhciBfc3RyaW5naWZ5ID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5Jyk7Cgp2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOwoKdmFyIF9wcm9taXNlID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UnKTsKCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhID0gcmVxdWlyZSgnLi9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhJyk7Cgp2YXIgX0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSk7Cgp2YXIgX0Jsb29tRmlsdGVyID0gcmVxdWlyZSgnLi9CbG9vbUZpbHRlcicpOwoKdmFyIF9CbG9vbUZpbHRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9CbG9vbUZpbHRlcik7Cgp2YXIgX0dsb2JhbFJlZ2lzdHJ5UmVjb3JkID0gcmVxdWlyZSgnLi9HbG9iYWxSZWdpc3RyeVJlY29yZCcpOwoKdmFyIF9HbG9iYWxSZWdpc3RyeVJlY29yZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9HbG9iYWxSZWdpc3RyeVJlY29yZCk7Cgp2YXIgX2JpdGNvaW5qc0xpYiA9IHJlcXVpcmUoJ2JpdGNvaW5qcy1saWInKTsKCnZhciBfYml0Y29pbmpzTGliMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpdGNvaW5qc0xpYik7Cgp2YXIgX2JpcCA9IHJlcXVpcmUoJ2JpcDM5Jyk7Cgp2YXIgX2JpcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaXApOwoKdmFyIF9zamNsID0gcmVxdWlyZSgnc2pjbCcpOwoKdmFyIF9zamNsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NqY2wpOwoKdmFyIF9qc3JzYXNpZ24gPSByZXF1aXJlKCdqc3JzYXNpZ24nKTsKCnZhciBfanNyc2FzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2pzcnNhc2lnbik7Cgp2YXIgX2Jhc2U2NFVybCA9IHJlcXVpcmUoJ2Jhc2U2NC11cmwnKTsKCnZhciBfYmFzZTY0VXJsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2U2NFVybCk7Cgp2YXIgX2hleCA9IHJlcXVpcmUoJ2hleDY0Jyk7Cgp2YXIgX2hleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZXgpOwoKdmFyIF9idWZmZXIgPSByZXF1aXJlKCdidWZmZXInKTsKCnZhciBfYnVmZmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2J1ZmZlcik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogVGhlIEdyYXBoIENvbm5lY3RvciBjb250YWlucyB0aGUgY29udGFjdCBsaXN0L2FkZHJlc3MgYm9vay4KKiBAYXV0aG9yIGJlaWVybGVAdHUtYmVybGluLmRlCiovCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKdmFyIEdyYXBoQ29ubmVjdG9yID0gZnVuY3Rpb24gKCkgewoKICAvLyBUT0RPOiBpbXBvcnQgLyBleHBvcnQgbWV0aG9kcwoKICAvKioKICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGFuZCBlbXB0eSBHcmFwaCBDb25uZWN0b3IuCiAgICogQHBhcmFtIHtzdHJpbmd9ICAgSHlwZXJ0eVJ1bnRpbWVVUkwgICAgVGhlIEh5cGVydHkgUnVudGltZSBVUkwuCiAgICogQHBhcmFtIHttZXNzYWdlQnVzfSAgICBNZXNzYWdlQnVzICAgICAgVGhlIE1lc3NhZ2UgQnVzLgogICAqLwoKICBmdW5jdGlvbiBHcmFwaENvbm5lY3RvcihoeXBlcnR5UnVudGltZVVSTCwgbWVzc2FnZUJ1cykgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgR3JhcGhDb25uZWN0b3IpOwoKICAgIHRoaXMuY29udGFjdHMgPSBbXTsKICAgIHRoaXMubGFzdENhbGN1bGF0aW9uQmxvb21GaWx0ZXIxSG9wID0gbmV3IERhdGUoMCkudG9JU09TdHJpbmcoKTsKCiAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkID0gbmV3IF9HbG9iYWxSZWdpc3RyeVJlY29yZDIuZGVmYXVsdCgpOwogICAgdGhpcy5fcHJ2S2V5OwogICAgdGhpcy5wcml2YXRlS2V5OwoKICAgIHRoaXMuZ3JvdXBzID0gW107CiAgICB0aGlzLnJlc2lkZW5jZUxvY2F0aW9uOwogICAgdGhpcy5maXJzdE5hbWU7CiAgICB0aGlzLmxhc3ROYW1lOwoKICAgIHRoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwogICAgdGhpcy5faHlwZXJ0eVJ1bnRpbWVVUkwgPSBoeXBlcnR5UnVudGltZVVSTDsKICB9CgogIC8qKgogICogUmV0dXJucyB0aGUgTWVzc2FnZUJ1cy4KICAqIEBwYXJhbSB7TWVzc2FnZUJ1c30gICAgICAgICAgIG1lc3NhZ2VCdXMgICAgVGhlIE1lc3NhZ2UgQnVzLgogICovCgoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShHcmFwaENvbm5lY3RvciwgW3sKICAgIGtleTogJ3NldE93bmVyTmFtZScsCgoKICAgIC8qKgogICAgKiBTZXRzIHRoZSBmaXJzdCBuYW1lIGFuZCBsYXN0IG5hbWUgb2YgdGhlIG93bmVyLgogICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBmbmFtZSAgICAgVGhlIG93bmVyJ3MgZmlyc3QgbmFtZS4KICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgbG5hbWUgICAgIFRoZSBvd25lcidzIGxhc3QgbmFtZS4KICAgICovCgogICAgdmFsdWU6IGZ1bmN0aW9uIHNldE93bmVyTmFtZShmbmFtZSwgbG5hbWUpIHsKICAgICAgdmFyIHN0YXR1cyA9IGZhbHNlOwogICAgICBpZiAodHlwZW9mIGZuYW1lICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIHRoaXMuZmlyc3ROYW1lID0gZm5hbWU7CiAgICAgICAgaWYgKHR5cGVvZiBsbmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHRoaXMubGFzdE5hbWUgPSBsbmFtZTsKICAgICAgICB9CiAgICAgICAgc3RhdHVzID0gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gc3RhdHVzOwogICAgfQoKICAgIC8qKgogICAgICogR2VuZXJhdGVzIGEgR1VJRCBhbmQgcmV0dXJucyBhIG1uZW1vbmljIGZyb20gd2hpY2ggdGhlIEdVSUQgY2FuIGJlIHJlLWNyZWF0ZWQgbGF0ZXIuCiAgICAgKiBAcmV0dXJucyAge3N0cmluZ30gICAgbW5lbW9uaWMgICAgICBBIHN0cmluZyB3aXRoIDE2IHdvcmRzLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2dlbmVyYXRlR1VJRCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVHVUlEKCkgewoKICAgICAgLy8gZ2VuZXJhdGUgbW5lbW9uaWMgYW5kIHNhbHQKICAgICAgX2J1ZmZlcjIuZGVmYXVsdC5UWVBFRF9BUlJBWV9TVVBQT1JUID0gdHJ1ZTsKICAgICAgdmFyIG1uZW1vbmljID0gX2JpcDIuZGVmYXVsdC5nZW5lcmF0ZU1uZW1vbmljKDE2MCk7CgogICAgICB2YXIgc2FsdFdvcmQgPSBfYmlwMi5kZWZhdWx0LmdlbmVyYXRlTW5lbW9uaWMoOCk7CiAgICAgIHRoaXMuX2NyZWF0ZUtleXMobW5lbW9uaWMsIHNhbHRXb3JkKTsKCiAgICAgIC8vIHNldCBsYXNVcGRhdGUgZGF0ZQogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmxhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CgogICAgICAvLyBzZXQgZGVmdWFsdCB0aW1lb3V0CiAgICAgIHZhciB0aW1lb3V0ID0gbmV3IERhdGUoKTsKICAgICAgdGltZW91dC5zZXRNb250aCh0aW1lb3V0LmdldE1vbnRoKCkgKyAxMjApOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnRpbWVvdXQgPSB0aW1lb3V0LnRvSVNPU3RyaW5nKCk7CgogICAgICAvLyBzZXQgZGVmYXVsdCB2YWx1ZXMKICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5hY3RpdmUgPSAxOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnJldm9rZWQgPSAwOwoKICAgICAgLy8gcmV0dXJuIG1uZW1vbmljCiAgICAgIHZhciBydG4gPSBtbmVtb25pYyArICcgJyArIHNhbHRXb3JkOwogICAgICByZXR1cm4gcnRuOwogICAgfQoKICAgIC8qKgogICAgICogR2VuZXJhdGVzIGEgcHVibGljL3ByaXZhdGUga2V5IHBhaXIgZnJvbSBhIGdpdmVuIG1uZW1vbmljICgxNiB3b3JkcykuCiAgICAgKiBFeHBlY3RzIGEgc3RyaW5nIGNvbnRhaW5pbmcgMTYgd29yZHMgc2VwZXJhdGVkIGJ5IHNpbmdsZSBzcGFjZXMuCiAgICAgKiBSZXRyaWV2ZXMgZGF0YSBmcm9tIHRoZSBHbG9iYWwgUmVnaXN0cnkuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBtbmVtb25pY0FuZFNhbHQgICAgIEEgc3RyaW5nIG9mIDE2IHdvcmRzLgogICAgICogQHJldHVybnMgIHtQcm9taXNlfSAgUHJvbWlzZSAgICAgICAgICBHbG9iYWwgUmVnaXN0cnkgUmVjb3JkLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3VzZUdVSUQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVzZUdVSUQobW5lbW9uaWNBbmRTYWx0KSB7CiAgICAgIC8vIFRPRE86IGNoZWNrIGlmIGZvcm1hdCBpcyBjb3JyZWN0IGFuZCBpZiBhbGwgd29yZHMgYXJlIGZyb20gYmlwMzkgZW5nbGlzaCB3b3JkbGlzdAogICAgICB2YXIgbGFzdEluZGV4ID0gbW5lbW9uaWNBbmRTYWx0Lmxhc3RJbmRleE9mKCcgJyk7CiAgICAgIHZhciBtbmVtb25pYyA9IG1uZW1vbmljQW5kU2FsdC5zdWJzdHJpbmcoMCwgbGFzdEluZGV4KTsKICAgICAgdmFyIHNhbHRXb3JkID0gbW5lbW9uaWNBbmRTYWx0LnN1YnN0cmluZyhsYXN0SW5kZXggKyAxLCBtbmVtb25pY0FuZFNhbHQubGVuZ3RoKTsKICAgICAgdGhpcy5fY3JlYXRlS2V5cyhtbmVtb25pYywgc2FsdFdvcmQpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIHJldHJpZXZlIGN1cnJlbnQgaW5mbyBmcm9tIEdsb2JhbCBSZWdpc3RyeSBhbmQgZmlsbCB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ1JFQUQnLAogICAgICAgIGZyb206IHRoaXMuX2h5cGVydHlSdW50aW1lVVJMICsgJy9ncmFwaC1jb25uZWN0b3InLAogICAgICAgIHRvOiAnZ2xvYmFsOi8vcmVnaXN0cnkvJywKICAgICAgICBib2R5OiB7IGd1aWQ6IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ3VpZCB9CiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgaWYgKF90aGlzLm1lc3NhZ2VCdXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiBHcmFwaENvbm5lY3RvcicpOwogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewoKICAgICAgICAgICAgY29uc29sZS5sb2cocmVwbHkpOwoKICAgICAgICAgICAgLy8gcmVwbHkgc2hvdWxkIGJlIHRoZSBKU09OIHJldHVybmVkIGZyb20gdGhlIEdsb2JhbCBSZWdpc3RyeSBSRVNULWludGVyZmFjZQogICAgICAgICAgICB2YXIgand0ID0gcmVwbHkuYm9keS5kYXRhOwogICAgICAgICAgICB2YXIgdW53cmFwcGVkSldUID0gS0pVUi5qd3MuSldTLnBhcnNlKHJlcGx5LmJvZHkuZGF0YSk7CiAgICAgICAgICAgIHZhciBkYXRhRW5jb2RlZCA9IHVud3JhcHBlZEpXVC5wYXlsb2FkT2JqLmRhdGE7CiAgICAgICAgICAgIHZhciBkYXRhRGVjb2RlZCA9IF9iYXNlNjRVcmwyLmRlZmF1bHQuZGVjb2RlKGRhdGFFbmNvZGVkKTsKICAgICAgICAgICAgdmFyIGRhdGFKU09OID0gSlNPTi5wYXJzZShkYXRhRGVjb2RlZCk7CgogICAgICAgICAgICAvLyBwdWJsaWMga2V5IHNob3VsZCBtYXRjaAogICAgICAgICAgICB2YXIgc2FtZUtleSA9IGRhdGFKU09OLnB1YmxpY0tleSA9PSBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5wdWJsaWNLZXk7CiAgICAgICAgICAgIGlmICghc2FtZUtleSkgewogICAgICAgICAgICAgIHJlamVjdCgnUmV0cmlldmVkIGtleSBkb2VzIG5vdCBtYXRjaCEnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgcHVibGljS2V5T2JqZWN0ID0gX2pzcnNhc2lnbjIuZGVmYXVsdC5LRVlVVElMLmdldEtleShkYXRhSlNPTi5wdWJsaWNLZXkpOwogICAgICAgICAgICAgIHZhciBlbmNvZGVkU3RyaW5nID0gand0LnNwbGl0KCcuJykuc2xpY2UoMCwgMikuam9pbignLicpOwogICAgICAgICAgICAgIHZhciBzaWdWYWx1ZUhleCA9IHVud3JhcHBlZEpXVC5zaWdIZXg7CiAgICAgICAgICAgICAgdmFyIHNpZyA9IG5ldyBLSlVSLmNyeXB0by5TaWduYXR1cmUoeyBhbGc6ICdTSEEyNTZ3aXRoRUNEU0EnIH0pOwogICAgICAgICAgICAgIHNpZy5pbml0KHB1YmxpY0tleU9iamVjdCk7CiAgICAgICAgICAgICAgc2lnLnVwZGF0ZVN0cmluZyhlbmNvZGVkU3RyaW5nKTsKICAgICAgICAgICAgICB2YXIgaXNWYWxpZCA9IHNpZy52ZXJpZnkoc2lnVmFsdWVIZXgpOwoKICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnUmV0cmlldmVkIFJlY29yZCBub3QgdmFsaWQhJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YUpTT04udXNlcklEcyAhPSAndW5kZWZpbmVkJyAmJiBkYXRhSlNPTi51c2VySURzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcyA9IGRhdGFKU09OLnVzZXJJRHM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5sYXN0VXBkYXRlID0gZGF0YUpTT04ubGFzdFVwZGF0ZTsKICAgICAgICAgICAgICAgIF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnRpbWVvdXQgPSBkYXRhSlNPTi50aW1lb3V0OwogICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuc2FsdCA9IGRhdGFKU09OLnNhbHQ7CiAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5hY3RpdmUgPSBkYXRhSlNPTi5hY3RpdmU7CiAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5yZXZva2VkID0gZGF0YUpTT04ucmV2b2tlZDsKICAgICAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZXMgdGhlIGtleXMgZnJvbSBtbmVtb25pYyBhbmQgc2FsdC4gQWxzbyBzZXRzIHB1YmxpYyBrZXksIGd1aWQsIGFuZCBzYWx0IGZvciBnbG9iYWxSZWdpc3RyeVJlY29yZC4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIG1uZW1vbmljICAgICBBIHN0cmluZyB3aXRoIDE1IHdvcmRzLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgc2FsdCAgICAgICAgIEEgd29yZC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfY3JlYXRlS2V5cycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUtleXMobW5lbW9uaWMsIHNhbHRXb3JkKSB7CgogICAgICAvLyBnZW5lcmF0ZSBrZXkgcGFpcgogICAgICB2YXIgc2VlZCA9IF9iaXAyLmRlZmF1bHQubW5lbW9uaWNUb1NlZWQobW5lbW9uaWMpOwogICAgICBfYnVmZmVyMi5kZWZhdWx0LlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBmYWxzZTsKICAgICAgdmFyIGhkbm9kZSA9IF9iaXRjb2luanNMaWIyLmRlZmF1bHQuSEROb2RlLmZyb21TZWVkQnVmZmVyKHNlZWQpOwogICAgICB2YXIgZWNwYXJhbXMgPSBLSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLmdldEJ5TmFtZSgnc2VjcDI1NmsxJyk7CiAgICAgIHZhciBiaVBydiA9IGhkbm9kZS5rZXlQYWlyLmQ7IC8vIHByaXZhdGUga2V5IGJpZyBpbnRlZ2VyCiAgICAgIHZhciBlcFB1YiA9IGVjcGFyYW1zLkcubXVsdGlwbHkoYmlQcnYpOyAvLyBkKkcKICAgICAgdmFyIGJpWCA9IGVwUHViLmdldFgoKS50b0JpZ0ludGVnZXIoKTsgLy8geCBmcm9tIFEKICAgICAgdmFyIGJpWSA9IGVwUHViLmdldFkoKS50b0JpZ0ludGVnZXIoKTsgLy8geSBmcm9tIFEKICAgICAgdmFyIGNoYXJsZW4gPSBlY3BhcmFtcy5rZXlsZW4gLyA0OwogICAgICB2YXIgaFBydiA9ICgnMDAwMDAwMDAwMCcgKyBiaVBydi50b1N0cmluZygxNikpLnNsaWNlKC1jaGFybGVuKTsKICAgICAgdmFyIGhYID0gKCcwMDAwMDAwMDAwJyArIGJpWC50b1N0cmluZygxNikpLnNsaWNlKC1jaGFybGVuKTsKICAgICAgdmFyIGhZID0gKCcwMDAwMDAwMDAwJyArIGJpWS50b1N0cmluZygxNikpLnNsaWNlKC1jaGFybGVuKTsKICAgICAgdmFyIGhQdWIgPSAnMDQnICsgaFggKyBoWTsKICAgICAgdGhpcy5fcHJ2S2V5ID0gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHsgY3VydmU6ICdzZWNwMjU2azEnIH0pOwogICAgICB0aGlzLl9wcnZLZXkuc2V0UHJpdmF0ZUtleUhleChoUHJ2KTsKICAgICAgdGhpcy5fcHJ2S2V5LmlzUHJpdmF0ZSA9IHRydWU7CiAgICAgIHRoaXMuX3BydktleS5pc1B1YmxpYyA9IGZhbHNlOwogICAgICB2YXIgcHViS2V5ID0gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHsgY3VydmU6ICdzZWNwMjU2azEnIH0pOwogICAgICB0aGlzLnByaXZhdGVLZXkgPSBfanNyc2FzaWduMi5kZWZhdWx0LktFWVVUSUwuZ2V0UEVNKHRoaXMuX3BydktleSwgJ1BLQ1M4UFJWJyk7CiAgICAgIHB1YktleS5zZXRQdWJsaWNLZXlIZXgoaFB1Yik7CiAgICAgIHB1YktleS5pc1ByaXZhdGUgPSBmYWxzZTsKICAgICAgcHViS2V5LmlzUHVibGljID0gdHJ1ZTsKICAgICAgdmFyIHB1YmxpY0tleSA9IF9qc3JzYXNpZ24yLmRlZmF1bHQuS0VZVVRJTC5nZXRQRU0ocHViS2V5LCAnUEtDUzhQVUInKTsKICAgICAgcHVibGljS2V5ID0gcHVibGljS2V5LnJlcGxhY2UoLyhcclxufFxufFxyKS9nbSwgJycpOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnB1YmxpY0tleSA9IHB1YmxpY0tleTsKCiAgICAgIC8vIGdlbmVyYXRlIHNhbHQKICAgICAgdmFyIHNhbHRIYXNoZWRCaXRBcnJheSA9IF9zamNsMi5kZWZhdWx0Lmhhc2guc2hhMjU2Lmhhc2goc2FsdFdvcmQpOwogICAgICB2YXIgc2FsdCA9IF9zamNsMi5kZWZhdWx0LmNvZGVjLmJhc2U2NC5mcm9tQml0cyhzYWx0SGFzaGVkQml0QXJyYXkpOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnNhbHQgPSBzYWx0OwoKICAgICAgLy8gZ2VuZXJhdGUgR1VJRAogICAgICB2YXIgaXRlcmF0aW9ucyA9IDEwMDAwOwogICAgICB2YXIgZ3VpZEJpdEFycmF5ID0gX3NqY2wyLmRlZmF1bHQubWlzYy5wYmtkZjIodGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5wdWJsaWNLZXksIHNhbHQsIGl0ZXJhdGlvbnMpOwogICAgICB2YXIgZ3VpZCA9IF9zamNsMi5kZWZhdWx0LmNvZGVjLmJhc2U2NHVybC5mcm9tQml0cyhndWlkQml0QXJyYXkpOwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmd1aWQgPSBndWlkOwogICAgfQoKICAgIC8qKgogICAgICogU2lnbkdlbmVyYXRlcyBhIHB1YmxpYy9wcml2YXRlIGtleSBwYWlyIGZyb20gYSBnaXZlbiBtbmVtb25pYy4KICAgICAqIEByZXR1cm5zICB7c3RyaW5nfSAgICAgSldUICAgICBKU09OIFdlYiBUb2tlbiByZWFkeSB0byBjb21taXQgdG8gR2xvYmFsIFJlZ2lzdHJ5LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3NpZ25HbG9iYWxSZWdpc3RyeVJlY29yZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2lnbkdsb2JhbFJlZ2lzdHJ5UmVjb3JkKCkgewoKICAgICAgdmFyIHJlY29yZCA9IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ2V0UmVjb3JkKCk7CiAgICAgIHZhciByZWNvcmRTdHJpbmcgPSAoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkocmVjb3JkKTsKICAgICAgdmFyIHJlY29yZFN0cmluZ0Jhc2U2NCA9IF9iYXNlNjRVcmwyLmRlZmF1bHQuZW5jb2RlKHJlY29yZFN0cmluZyk7CgogICAgICB2YXIgand0VGVtcCA9IEtKVVIuandzLkpXUy5zaWduKG51bGwsIHsgYWxnOiAnRVMyNTYnIH0sIHsgZGF0YTogcmVjb3JkU3RyaW5nQmFzZTY0IH0sIHRoaXMuX3BydktleSk7CiAgICAgIHZhciBlbmNvZGVkU3RyaW5nID0gand0VGVtcC5zcGxpdCgnLicpLnNsaWNlKDAsIDIpLmpvaW4oJy4nKTsKCiAgICAgIHZhciBzaWcgPSBuZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHsgYWxnOiAnU0hBMjU2d2l0aEVDRFNBJyB9KTsKICAgICAgc2lnLmluaXQodGhpcy5wcml2YXRlS2V5KTsKICAgICAgc2lnLnVwZGF0ZVN0cmluZyhlbmNvZGVkU3RyaW5nKTsKCiAgICAgIHZhciBzaWduYXR1cmVIZXggPSBzaWcuc2lnbigpOwogICAgICB2YXIgc2lnbmF0dXJlID0gX2hleDIuZGVmYXVsdC50b0Jhc2U2NChzaWduYXR1cmVIZXgpOwogICAgICB2YXIgand0ID0gZW5jb2RlZFN0cmluZyArICcuJyArIHNpZ25hdHVyZTsKICAgICAgcmV0dXJuIGp3dDsKICAgIH0KCiAgICAvKioKICAgICAqIFRha2VzIHRoZSBHbG9iYWwgUmVnaXN0cnkgUmVjb3JkIGFzIGEgc2lnbmVkIEpXVCBhbmQgc2VuZHMgaXQgdG8gdGhlIEdsb2JhbCBSZWdpc3RyeSB2aWEgdGhlIE1lc3NhZ2VCdXMuCiAgICAgKiBSZXR1cm5zIHRoZSByZXNwb25zZSBjb2RlIG9mIHRoZSBSRVNULWludGVyZmFjZSBvZiB0aGUgR2xvYmFsIFJlZ2lzdHJ5IGFzIGEgUHJvbWlzZS4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIGp3dCAgICAgVGhlIEdsb2JhbCBSZWdpc3RyeSBSZWNvcmQgYXMgYSBzaWduZWQgSldULgogICAgICogQHJldHVybnMge1Byb3BtaXNlfSAgUHJvbWlzZSBSZXNwb25zZSBDb2RlIGZyb20gR2xvYmFsIFJlZ2lzdHJ5LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3NlbmRHbG9iYWxSZWdpc3RyeVJlY29yZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZEdsb2JhbFJlZ2lzdHJ5UmVjb3JkKGp3dCkgewoKICAgICAgdmFyIHBheWxvYWRPYmogPSBLSlVSLmp3cy5KV1MucGFyc2Uoand0KS5wYXlsb2FkT2JqOwogICAgICB2YXIgZ3VpZCA9IHBheWxvYWRPYmouZ3VpZDsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdDUkVBVEUnLAogICAgICAgIGZyb206IHRoaXMuX2h5cGVydHlSdW50aW1lVVJMICsgJy9ncmFwaC1jb25uZWN0b3InLAogICAgICAgIHRvOiAnZ2xvYmFsOi8vcmVnaXN0cnkvJywKICAgICAgICBib2R5OiB7IGd1aWQ6IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ3VpZCwgand0OiBqd3QgfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGlmIChfdGhpcy5tZXNzYWdlQnVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgnTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gR3JhcGhDb25uZWN0b3InKTsKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKCiAgICAgICAgICAgIHZhciByZXNwb25zZUNvZGUgPSByZXBseS5ib2R5LnJlc3BvbnNlQ29kZTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlQ29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICByZXNvbHZlKDIwMCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlQ29kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBFZGl0IHRoZSB2YWx1ZXMgZm9yIGEgc3BlY2lmaWMgY29udGFjdC4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIGd1aWRPbGQgICAgICAgICAgR1VJRCB0byBpZGVudGlmeSB0aGUgY29udGFjdCB0byBlZGl0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgZmlyc3ROYW1lICAgICAgICAgIEZpcnN0IG5hbWUgb2YgdGhlIGNvbnRhY3QuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBsYXN0TmFtZSAgICAgICAgICBMYXN0IG5hbWUgb2YgdGhlIGNvbnRhY3QuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBndWlkTmV3ICAgICAgICAgIE5ldyBndWlkIG9mIHRoZSBjb250YWN0LgogICAgICogQHBhcmFtICB7Ym9vbGVhbn0gICAgIHByaXZTdGF0dXMgICAgICAgICAgQm9vbGVhbiB2YWx1ZSB0byBzZXQgdGhlIHByaXZhdGUgc3RhdHVzIG9mIHRoZSBjb250YWN0LgogICAgICogQHJldHVybnMgIHthcnJheX0gICBSZXR1cm5zIHRoZSBhcnJheSB3aGljaCBjb250YWlucyB0aGUgY29udGFjdCB3aXRoIG5ldyB2YWx1ZXMKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdlZGl0Q29udGFjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZWRpdENvbnRhY3QoZ3VpZE9sZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZ3VpZE5ldywgcHJpdlN0YXR1cykgewoKICAgICAgdmFyIHJ0bkFycmF5ID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jb250YWN0c1tpXS5ndWlkID09IGd1aWRPbGQpIHsKICAgICAgICAgIGlmIChndWlkT2xkID09IGd1aWROZXcpIHsKCiAgICAgICAgICAgIHRoaXMuY29udGFjdHNbaV0uZmlyc3ROYW1lID0gZmlyc3ROYW1lOwogICAgICAgICAgICB0aGlzLmNvbnRhY3RzW2ldLmxhc3ROYW1lID0gbGFzdE5hbWU7CiAgICAgICAgICAgIHRoaXMuY29udGFjdHNbaV0uZ3VpZCA9IGd1aWRPbGQ7CiAgICAgICAgICAgIHRoaXMuY29udGFjdHNbaV0ucHJpdmF0ZUNvbnRhY3QgPSBwcml2U3RhdHVzOwoKICAgICAgICAgICAgcnRuQXJyYXkucHVzaCh0aGlzLmNvbnRhY3RzW2ldKTsKICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICBpZiAoIXRoaXMuZ3VpZEV4aXN0KGd1aWROZXcpKSB7CgogICAgICAgICAgICAgIHRoaXMuY29udGFjdHNbaV0uZmlyc3ROYW1lID0gZmlyc3ROYW1lOwogICAgICAgICAgICAgIHRoaXMuY29udGFjdHNbaV0ubGFzdE5hbWUgPSBsYXN0TmFtZTsKICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RzW2ldLmd1aWQgPSBndWlkTmV3OwogICAgICAgICAgICAgIHRoaXMuY29udGFjdHNbaV0ucHJpdmF0ZUNvbnRhY3QgPSBwcml2U3RhdHVzOwoKICAgICAgICAgICAgICBydG5BcnJheS5wdXNoKHRoaXMuY29udGFjdHNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBydG5BcnJheTsKICAgIH0KCiAgICAvKioKICAgICAqIFRvIGNoZWNrIHdoZXRoZXIgdGhlIEdVSUQgYWxyZWFkeSBleGlzdC4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIGd1aWQgICAgICAgIEdVSUQgd2hpY2ggbmVlZHMgdG8gYmUgY2hlY2tlZC4KICAgICAqIEByZXR1cm5zICB7Ym9vbGVhbn0gICBSZXR1cm5zIHRydWUgaWYgdGhlIEdVSUQgZXhpc3QKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdndWlkRXhpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGd1aWRFeGlzdChndWlkKSB7CgogICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuY29udGFjdHNbaV0uZ3VpZCA9PSBndWlkIHx8IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ3VpZCA9PSBndWlkKSB7CgogICAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBzdWNjZXNzOwogICAgfQoKICAgIC8qKgogICAgICogVG8gcmV0dXJuIHRoZSBvd25lci4KICAgICAqIEByZXR1cm5zICB7R3JhcGhDb25uZWN0b3JDb250YWN0RGF0YX0gICBSZXR1cm5zIHRoZSBvd25lci4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRPd25lcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3duZXIoKSB7CgogICAgICB2YXIgb3duZXIgPSBuZXcgX0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEyLmRlZmF1bHQodGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5ndWlkLCB0aGlzLmZpcnN0TmFtZSwgdGhpcy5sYXN0TmFtZSk7CgogICAgICBvd25lci5ncm91cHMgPSB0aGlzLmdyb3VwczsKICAgICAgb3duZXIubGFzdENhbGN1bGF0aW9uQmxvb21GaWx0ZXIxSG9wID0gdGhpcy5sYXN0Q2FsY3VsYXRpb25CbG9vbUZpbHRlcjFIb3A7CiAgICAgIG93bmVyLnJlc2lkZW5jZUxvY2F0aW9uID0gdGhpcy5yZXNpZGVuY2VMb2NhdGlvbjsKICAgICAgb3duZXIuY29udGFjdHNCbG9vbUZpbHRlcjFIb3AgPSB0aGlzLmNvbnRhY3RzQmxvb21GaWx0ZXIxSG9wOwoKICAgICAgcmV0dXJuIG93bmVyOwogICAgfQoKICAgIC8qKgogICAgICogUXVlcmllcyB0aGUgR2xvYmFsIFJlZ2lzdHJ5IGZvciBhIGdpdmVuIEdVSUQuCiAgICAgKiBBZGRzIHRoZSBVc2VySUQgaW5mb3JtYXRpb24gZnJvbSB0aGUgR2xvYmFsIFJlZ2lzdHJ5IHRvIGEgY29udGFjdCwgaWYgdGhlIGdpdmVuIEdVSUQgbWF0Y2hlcyBhIHVzZXIgaW4gdGhlIGNvbnRhY3RzLgogICAgICogUmV0dXJucyBhIEdyYXBoIENvbm5lY3RvciBDb250YWN0IERhdGEgYXMgYSBQcm9taXNlLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIGd1aWQgIFRoZSBHVUlEIHRvIHF1ZXJ5IHRoZSBHbG9iYWwgUmVnaXN0cnkgZm9yCiAgICAgKiBAcmV0dXJucyAgIHtQcm9taXNlfSAgIFByb21pc2UgICBHcmFwaCBDb25uZWN0b3IgQ29udGFjdCBEYXRhIGNvbnRhaW5pbmcgVXNlcklEcy4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdxdWVyeUdsb2JhbFJlZ2lzdHJ5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBxdWVyeUdsb2JhbFJlZ2lzdHJ5KGd1aWQpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdSRUFEJywKICAgICAgICBmcm9tOiB0aGlzLl9oeXBlcnR5UnVudGltZVVSTCArICcvZ3JhcGgtY29ubmVjdG9yJywKICAgICAgICB0bzogJ2dsb2JhbDovL3JlZ2lzdHJ5LycsCiAgICAgICAgYm9keTogeyBndWlkOiBndWlkIH0KICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBpZiAoX3RoaXMubWVzc2FnZUJ1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ01lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIEdyYXBoQ29ubmVjdG9yJyk7CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CgogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXBseSk7CgogICAgICAgICAgICAvLyByZXBseSBzaG91bGQgYmUgdGhlIEpTT04gcmV0dXJuZWQgZnJvbSB0aGUgR2xvYmFsIFJlZ2lzdHJ5IFJFU1QtaW50ZXJmYWNlCiAgICAgICAgICAgIHZhciBqd3QgPSByZXBseS5ib2R5LmRhdGE7CiAgICAgICAgICAgIHZhciB1bndyYXBwZWRKV1QgPSBLSlVSLmp3cy5KV1MucGFyc2UocmVwbHkuYm9keS5kYXRhKTsKICAgICAgICAgICAgdmFyIGRhdGFFbmNvZGVkID0gdW53cmFwcGVkSldULnBheWxvYWRPYmouZGF0YTsKICAgICAgICAgICAgdmFyIGRhdGFEZWNvZGVkID0gX2Jhc2U2NFVybDIuZGVmYXVsdC5kZWNvZGUoZGF0YUVuY29kZWQpOwogICAgICAgICAgICB2YXIgZGF0YUpTT04gPSBKU09OLnBhcnNlKGRhdGFEZWNvZGVkKTsKCiAgICAgICAgICAgIHZhciBwdWJsaWNLZXlPYmplY3QgPSBfanNyc2FzaWduMi5kZWZhdWx0LktFWVVUSUwuZ2V0S2V5KGRhdGFKU09OLnB1YmxpY0tleSk7CiAgICAgICAgICAgIHZhciBlbmNvZGVkU3RyaW5nID0gand0LnNwbGl0KCcuJykuc2xpY2UoMCwgMikuam9pbignLicpOwogICAgICAgICAgICB2YXIgc2lnVmFsdWVIZXggPSB1bndyYXBwZWRKV1Quc2lnSGV4OwogICAgICAgICAgICB2YXIgc2lnID0gbmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7IGFsZzogJ1NIQTI1NndpdGhFQ0RTQScgfSk7CiAgICAgICAgICAgIHNpZy5pbml0KHB1YmxpY0tleU9iamVjdCk7CiAgICAgICAgICAgIHNpZy51cGRhdGVTdHJpbmcoZW5jb2RlZFN0cmluZyk7CiAgICAgICAgICAgIHZhciBpc1ZhbGlkID0gc2lnLnZlcmlmeShzaWdWYWx1ZUhleCk7CgogICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHsKICAgICAgICAgICAgICByZWplY3QoJ1JldHJpZXZlZCBSZWNvcmQgbm90IHZhbGlkIScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBxdWVyaWVkQ29udGFjdCA9IG5ldyBfR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YTIuZGVmYXVsdChkYXRhSlNPTi5ndWlkLCAnJywgJycpOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YUpTT04udXNlcklEcyAhPSAndW5kZWZpbmVkJyAmJiBkYXRhSlNPTi51c2VySURzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHF1ZXJpZWRDb250YWN0LnVzZXJJRHMgPSBkYXRhSlNPTi51c2VySURzOwoKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRhY3RzW2ldLmd1aWQgPT0gZ3VpZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbnRhY3RzW2ldLnVzZXJJRHMgPSBkYXRhSlNPTi51c2VySURzOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJlc29sdmUocXVlcmllZENvbnRhY3QpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQWRkcyBhIFVzZXJJRCBmb3IgdGhlIHVzZXIuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICB1c2VySUQgICAgICAgICAgVGhlIFVzZXJJRCBmb3IgYSBEb21haW4gUmVnaXN0cnkgdG8gYWRkIGZvciB0aGUgdXNlci4KICAgICAqIEByZXR1cm5zICB7Ym9vbGVhbn0gICByZXR1cm5zIGZhbHNlIGlmIHRoZSB1c2VySUQgZXhpc3RzIGFuZCB0aGUgdXNlciBJRCB3aWxsIG5vdCBiZSBhZGRlZCwgdHJ1ZSBvdGhlcndpc2UuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkVXNlcklEJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRVc2VySUQodXNlcklEKSB7CiAgICAgIC8vIGNoZWNrIGlmIGFscmVhZHkgaW5zaWRlCiAgICAgIHZhciBmb3VuZCA9IHRydWU7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEc1tpXSA9PSB1c2VySUQpIHsKICAgICAgICAgIGZvdW5kID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChmb3VuZCkgewogICAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcy5wdXNoKHVzZXJJRCk7CiAgICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5sYXN0VXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgICB9CiAgICAgIHJldHVybiBmb3VuZDsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBVc2VySUQgZm9yIHRoZSB1c2VyLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgdXNlcklEICAgICAgICAgIFRoZSBVc2VySUQgdG8gcmVtb3ZlLgogICAgICogQHJldHVybnMgIHtib29sZWFufSAgIHRydWUgaWYgdGhlIHVzZXJJRCBleGlzdHMgYW5kIGRlbGV0ZWQsIGZhbHNlIG90aGVyd2lzZS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVVc2VySUQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVVzZXJJRCh1c2VySUQpIHsKICAgICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcyA9PSB1c2VySUQpIHsKICAgICAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmxhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmb3VuZDsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhIGNvbnRhY3QgdG8gdGhlIEdyYXBoIENvbm5lY3Rvci4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICBndWlkICAgICAgICAgIEdVSUQgb2YgdGhlIG5ldyBjb250YWN0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIGZpcnN0TmFtZSAgICAgRmlyc3QgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgbGFzdG5hbWUgICAgICBMYXN0IG5hbWUgb2YgdGhlIG5ldyBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZENvbnRhY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENvbnRhY3QoZ3VpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSkgewoKICAgICAgLy8gVE9ETzogd2hhdCBpZiB0d28gY29udGFjdHMgaGF2ZSB0aGUgc2FtZSBHVUlEPwogICAgICAvLyBUT0RPOiByZWplY3QgaW52YWxpZCBHVUlEcwogICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlOwogICAgICBpZiAoIXRoaXMuZ3VpZEV4aXN0KGd1aWQpKSB7CiAgICAgICAgdmFyIG5ld0NvbnRhY3QgPSBuZXcgX0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEyLmRlZmF1bHQoZ3VpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSk7CiAgICAgICAgdGhpcy5jb250YWN0cy5wdXNoKG5ld0NvbnRhY3QpOwogICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBzdWNjZXNzOwogICAgfQoKICAgIC8qKgogICAgICAqIFJlbW92ZXMgYSBsb2NhdGlvbiBmb3IgYSB1c2VyIGlkZW50aWZpZWQgYnkgYSBnaXZlbiBHVUlELgogICAgICAqIEBwYXJhbSAge3N0cmluZ30gICBndWlkICAgIEdVSUQgb2YgdGhlIGNvbnRhY3QuCiAgICAgICogQHJldHVybnMgIHtib29sZWFufSAgVHJ1ZSBpZiB0aGUgZ3JvdXAgbmFtZSBpcyBzdWNjZXNzZnVsbHkgZGVsZXRlZCwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVMb2NhdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlTG9jYXRpb24oZ3VpZCkgewogICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlOwogICAgICBpZiAodGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5ndWlkID09IGd1aWQpIHsKICAgICAgICB0aGlzLnJlc2lkZW5jZUxvY2F0aW9uID0gJyc7CiAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy5jb250YWN0c1tpXS5ndWlkID09IGd1aWQpIHsKICAgICAgICAgICAgdGhpcy5jb250YWN0c1tpXS5yZXNpZGVuY2VMb2NhdGlvbiA9ICcnOwogICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHN1Y2Nlc3M7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGRzIGEgbG9jYXRpb24gZm9yIGEgdXNlciBpZGVudGlmaWVkIGJ5IGEgZ2l2ZW4gR1VJRC4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICBndWlkICAgICAgICAgIEdVSUQgb2YgdGhlIGNvbnRhY3QuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgbG9jYXRpb25OYW1lICAgIGxvY2F0aW9uICBvZiB0aGUgY29udGFjdAogICAgICogQHJldHVybnMgIHtib29sZWFufSAgU3VjY2VzcyBpZiB0aGUgZ3JvdXAgbmFtZSBpcyBzdWNjZXNzZnVsbHkgYWRkZWQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzZXRMb2NhdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TG9jYXRpb24oZ3VpZCwgbG9jYXRpb25OYW1lKSB7CiAgICAgIHZhciBzdWNjZXNzID0gZmFsc2U7CiAgICAgIGlmICh0eXBlb2YgbG9jYXRpb25OYW1lICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGlmICh0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmd1aWQgPT0gZ3VpZCkgewogICAgICAgICAgdGhpcy5yZXNpZGVuY2VMb2NhdGlvbiA9IGxvY2F0aW9uTmFtZTsKICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29udGFjdHNbaV0uZ3VpZCA9PSBndWlkKSB7CiAgICAgICAgICAgICAgdGhpcy5jb250YWN0c1tpXS5yZXNpZGVuY2VMb2NhdGlvbiA9IGxvY2F0aW9uTmFtZTsKICAgICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3VjY2VzczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHVuaXF1ZSBncm91cCBuYW1lcy4KICAgICAqIEByZXR1cm5zICB7YXJyYXl9ICAgQXJyYXkgY29udGFpbmluZyBhbGwgdW5pcXVlIGdyb3VwIG5hbWVzLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldEdyb3VwTmFtZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEdyb3VwTmFtZXMoKSB7CiAgICAgIHZhciBydG5TZXQgPSBuZXcgX3NldDIuZGVmYXVsdCgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuY29udGFjdHNbaV0uZ3JvdXBzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBydG5TZXQuYWRkKHRoaXMuY29udGFjdHNbaV0uZ3JvdXBzW2pdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLmdyb3Vwcy5sZW5ndGg7IGsrKykgewogICAgICAgIHJ0blNldC5hZGQodGhpcy5ncm91cHNba10pOwogICAgICB9CgogICAgICB2YXIgcnRuQXJyYXkgPSAoMCwgX2Zyb20yLmRlZmF1bHQpKHJ0blNldCk7CiAgICAgIHJldHVybiBydG5BcnJheTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIGNvbnRhY3RzIHdpdGggYSBnaXZlbiBncm91cCBuYW1lLCBpbmNsdWRpbmcgdGhlIG93bmVyIGlmIGFwcGxpY2FibGUuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgZ3JvdXBOYW1lICAgIE5hbWUgb2YgdGhlIGdyb3VwIHRvIHJldHVybi4KICAgICAqIEByZXR1cm5zICB7YXJyYXl9ICAgbWF0Y2hpbmdDb250YWN0cyAgICBDb250YWN0cyBtYXRjaGluZyB0aGUgZ2l2ZW4gZ3JvdXAgbmFtZS4gVGhlIGZvcm1hdCBpczogQ29udGFjdHM8R3JhcGhDb25uZWN0b3JDb250YWN0RGF0YT4uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0R3JvdXAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEdyb3VwKGdyb3VwTmFtZSkgewogICAgICB2YXIgcnRuQXJyYXkgPSBbXTsKICAgICAgdmFyIG93bmVyVG1wID0gdm9pZCAwOwogICAgICBpZiAodHlwZW9mIGdyb3VwTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMuZ3JvdXBzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICBpZiAodGhpcy5ncm91cHNba10gPT0gZ3JvdXBOYW1lKSB7CiAgICAgICAgICAgIG93bmVyVG1wID0gbmV3IF9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhMi5kZWZhdWx0KHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ3VpZCwgdGhpcy5maXJzdE5hbWUsIHRoaXMubGFzdE5hbWUpOwogICAgICAgICAgICB0eXBlb2YgdGhpcy5yZXNpZGVuY2VMb2NhdGlvbiA9PSAndW5kZWZpbmVkJyA/IG93bmVyVG1wLnJlc2lkZW5jZUxvY2F0aW9uID0gJycgOiBvd25lclRtcC5yZXNpZGVuY2VMb2NhdGlvbiA9IHRoaXMucmVzaWRlbmNlTG9jYXRpb247CiAgICAgICAgICAgIG93bmVyVG1wLnVzZXJJRHMgPSB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnVzZXJJRHM7CiAgICAgICAgICAgIG93bmVyVG1wLmdyb3VwcyA9IHRoaXMuZ3JvdXBzOwogICAgICAgICAgICBvd25lclRtcC5jb250YWN0c0Jsb29tRmlsdGVyMUhvcCA9IHRoaXMuY29udGFjdHNCbG9vbUZpbHRlcjFIb3A7CiAgICAgICAgICAgIG93bmVyVG1wLl9sYXN0U3luY0Jsb29tRmlsdGVyMUhvcCA9IHRoaXMubGFzdENhbGN1bGF0aW9uQmxvb21GaWx0ZXIxSG9wOwogICAgICAgICAgICBvd25lclRtcC5fbGFzdFN5bmNEb21haW5Vc2VySURzID0gdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5sYXN0VXBkYXRlOwogICAgICAgICAgICBydG5BcnJheS5wdXNoKG93bmVyVG1wKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuY29udGFjdHNbaV0uZ3JvdXBzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhY3RzW2ldLmdyb3Vwc1tqXSA9PSBncm91cE5hbWUpIHsKICAgICAgICAgICAgICBydG5BcnJheS5wdXNoKHRoaXMuY29udGFjdHNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBydG5BcnJheTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZHMgYSBncm91cCB0byBhIGNvbnRhY3QgaWRlbnRpZmllZCBieSBhIEdVSUQuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgZ3VpZCAgICAgICAgICBHVUlEIG9mIHRoZSBjb250YWN0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIGdyb3VwTmFtZSAgICAgR3JvdXAgTmFtZSB0byBiZSBhZGRlZCB0byB0aGUgY29udGFjdC4KICAgICAqIEByZXR1cm5zICB7Ym9vbGVhbn0gIFN1Y2Nlc3MgaWYgdGhlIGdyb3VwIG5hbWUgaXMgc3VjY2Vzc2Z1bGx5IGFkZGVkLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZEdyb3VwTmFtZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkR3JvdXBOYW1lKGd1aWQsIGdyb3VwTmFtZSkgewogICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlOwogICAgICBpZiAodHlwZW9mIGdyb3VwTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBpZiAoZ3VpZCA9PSB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmd1aWQpIHsKICAgICAgICAgIGlmICghdGhpcy5ncm91cHMuaW5jbHVkZXMoZ3JvdXBOYW1lKSkgewogICAgICAgICAgICB0aGlzLmdyb3Vwcy5wdXNoKGdyb3VwTmFtZSk7CiAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29udGFjdHNbaV0uZ3VpZCA9PSBndWlkKSB7CiAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRhY3RzW2ldLmdyb3Vwcy5pbmNsdWRlcyhncm91cE5hbWUpKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RzW2ldLmdyb3Vwcy5wdXNoKGdyb3VwTmFtZSk7CiAgICAgICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHN1Y2Nlc3M7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmVzIGEgZ3JvdXAgZm9yIGEgY29udGFjdCwgaWRlbnRpZmllZCBieSBhIEdVSUQuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgZ3VpZCAgICAgICAgICBHVUlEIG9mIHRoZSBjb250YWN0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIGdyb3VwTmFtZSAgICAgR3JvdXAgbmFtZSB0byBiZSByZW1vdmVkIGZvciB0aGUgY29udGFjdC4KICAgICAqIEByZXR1cm5zICB7Ym9vbGVhbn0gIFN1Y2Nlc3MgaWYgdGhlIGdyb3VwIG5hbWUgaXMgc3VjY2Vzc2Z1bGx5IHJlbW92ZWQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlR3JvdXBOYW1lJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVHcm91cE5hbWUoZ3VpZCwgZ3JvdXBOYW1lKSB7CiAgICAgIHZhciBzdWNjZXNzID0gZmFsc2U7CiAgICAgIGlmICh0eXBlb2YgZ3JvdXBOYW1lICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGlmIChndWlkID09IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ3VpZCkgewogICAgICAgICAgZm9yICh2YXIgeiA9IDA7IHogPCB0aGlzLmdyb3Vwcy5sZW5ndGg7IHorKykgewogICAgICAgICAgICBpZiAodGhpcy5ncm91cHNbel0gPT0gZ3JvdXBOYW1lKSB7CiAgICAgICAgICAgICAgdGhpcy5ncm91cHMuc3BsaWNlKHosIDEpOwogICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250YWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAodGhpcy5jb250YWN0c1tpXS5ndWlkID09IGd1aWQpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuY29udGFjdHNbaV0uZ3JvdXBzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWN0c1tpXS5ncm91cHNbal0gPT0gZ3JvdXBOYW1lKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFjdHNbaV0uZ3JvdXBzLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3VjY2VzczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBjb250YWN0cywgZXhjbHVkaW5nIHRoZSBvd25lci4KICAgICAqIEByZXR1cm5zICB7YXJyYXl9ICAgQWxsIHRoZSBjb250YWN0cy4gVGhlIGZvcm1hdCBpczogQ29udGFjdHM8R3JhcGhDb25uZWN0b3JDb250YWN0RGF0YT4uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0QWxsQ29udGFjdHMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbENvbnRhY3RzKCkgewogICAgICByZXR1cm4gdGhpcy5jb250YWN0czsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb250YWN0IGZyb20gdGhlIEdyYXBoIENvbm5lY3Rvci4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIGd1aWQgICAgICBHVUlEIG9mIHRoZSB1c2VyIHRvIGJlIHJlbW92ZWQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlQ29udGFjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQ29udGFjdChndWlkKSB7CiAgICAgIC8vIHJlbW92ZSBmcm9tIGNvbnRhY3RzCiAgICAgIHZhciBzdGF0dXMgPSBmYWxzZTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuY29udGFjdHNbaV0uZ3VpZCA9PSBndWlkKSB7CiAgICAgICAgICB0aGlzLmNvbnRhY3RzLnNwbGljZShpLCAxKTsKICAgICAgICAgIHN0YXR1cyA9IHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyByZS1jYWxjdWxhdGUgQkYxaG9wCiAgICAgIHRoaXMuY2FsY3VsYXRlQmxvb21GaWx0ZXIxSG9wKCk7CgogICAgICByZXR1cm4gc3RhdHVzOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgYmxvb21maWx0ZXIgb2YgYSBjb250YWN0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgZ3VpZCAgICAgIEdVSUQgb2YgdGhlIGNvbnRhY3QgdG8gc2V0IHRoZSBibG9vbSBmaWx0ZXIuCiAgICAgKiBAcGFyYW0gIHtCbG9vbUZpbHRlcn0gICAgIGJmICAgICAgQmxvb21GaWx0ZXIgb2JqZWN0LgogICAgICogQHJldHVybnMge2Jvb2xlYW59IHN1Y2Nlc3MgaWYgdGhlIGNvbnRhY3QgZ3VpZCBpcyBmb3VuZCBhbmQgdGhlIGJsb29tIGZpbHRlciBpcyBzZXQKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzZXRCbG9vbUZpbHRlcjFIb3BDb250YWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRCbG9vbUZpbHRlcjFIb3BDb250YWN0KGd1aWQsIGJmKSB7CiAgICAgIHZhciBzdWNjZXNzID0gZmFsc2U7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250YWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmNvbnRhY3RzW2ldLmd1aWQgPT0gZ3VpZCkgewogICAgICAgICAgdGhpcy5jb250YWN0c1tpXS5jb250YWN0c0Jsb29tRmlsdGVyMUhvcCA9IGJmOwogICAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBzdWNjZXNzOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlcyB0aGUgQmxvb20gZmlsdGVyIGNvbnRhaW5pbmcgYWxsIG5vbi1wcml2YXRlIGNvbnRhY3RzLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2NhbGN1bGF0ZUJsb29tRmlsdGVyMUhvcCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlQmxvb21GaWx0ZXIxSG9wKCkgewogICAgICB2YXIgYmYgPSBuZXcgX0Jsb29tRmlsdGVyMi5kZWZhdWx0KDQzMTMyOCwgLy8gbnVtYmVyIG9mIGJpdHMgdG8gYWxsb2NhdGUuIFdpdGggMzAwMDAgZW50cmllcywgd2UgaGF2ZSBhIGZhbHNlIHBvc2l0aXZlIHJhdGUgb2YgMC4xICUuCiAgICAgIDEwIC8vIG51bWJlciBvZiBoYXNoIGZ1bmN0aW9ucy4KICAgICAgKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKCF0aGlzLmNvbnRhY3RzW2ldLnByaXZhdGVDb250YWN0KSB7CiAgICAgICAgICBiZi5hZGQodGhpcy5jb250YWN0c1tpXS5ndWlkKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5jb250YWN0c0Jsb29tRmlsdGVyMUhvcCA9IGJmOwogICAgICB0aGlzLmxhc3RDYWxjdWxhdGlvbkJsb29tRmlsdGVyMUhvcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY29udGFjdHMgd2hpY2ggbWF0Y2hlcyB0aGUgc2VhcmNoIHN0cmluZyAibmFtZSIuIEV4LiAiSm9oIiB3aWxsIHJldHVybiB1c2VycyB3aXRoIGZpcnN0IG9yIGxhc3QgbmFtZSAiSm9obiIgb3IgIkFsam9oYW5hcyIuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgbmFtZSAgICBGaXJzdCBvciBsYXN0IG5hbWUgdG8gbG9vayBmb3IgaW4gdGhlIGNvbnRhY3QgbGlzdC4KICAgICAqIEByZXR1cm5zICB7YXJyYXl9ICAgbWF0Y2hpbmdDb250YWN0cyAgICAgICBDb250YWN0cyBtYXRjaGluZyB0aGUgZ2l2ZW4gbmFtZS4gVGhlIGZvcm1hdCBpczogQ29udGFjdHM8R3JhcGhDb25uZWN0b3JDb250YWN0RGF0YT4uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0Q29udGFjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGFjdChuYW1lKSB7CiAgICAgIC8vIFRPRE86IG9wdGltaXplLCBlLmcuLCBmaW5kIG1pc3NwZWxsZWQgcGVvcGxlCiAgICAgIHZhciBydG5BcnJheSA9IFtdOwogICAgICB2YXIgZm5hbWUgPSB2b2lkIDA7CiAgICAgIHZhciBsbmFtZSA9IHZvaWQgMDsKCiAgICAgIHZhciBwYXR0ID0gbmV3IFJlZ0V4cChuYW1lLCAnaScpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmbmFtZSA9IHRoaXMuY29udGFjdHNbaV0uZmlyc3ROYW1lOwogICAgICAgIGxuYW1lID0gdGhpcy5jb250YWN0c1tpXS5sYXN0TmFtZTsKCiAgICAgICAgaWYgKHBhdHQudGVzdChmbmFtZSkgfHwgcGF0dC50ZXN0KGxuYW1lKSkgewogICAgICAgICAgcnRuQXJyYXkucHVzaCh0aGlzLmNvbnRhY3RzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBydG5BcnJheTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgYWN0aXZlIGF0dHJpYnV0ZSBvZiB0aGUgR2xvYmFsUmVnaXN0cnlSZWNvcmQuCiAgICAgKiBAcGFyYW0gIHtib29sZWFufSAgIGJvb2xlYW4gICAgVmFsdWUgdG8gc2V0IHRoZSBhY3RpdmUgZmxhZyBvZiB0aGUgR2xvYmFsUmVnaXN0cnlSZWNvcmQgdG8uCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBzZXQgc3VjY2VzZnVsbHksIGZhbHNlIG90aGVyd2lzZS4KICAgICovCgogIH0sIHsKICAgIGtleTogJ3NldEFjdGl2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QWN0aXZlKGJvb2xlYW4pIHsKICAgICAgaWYgKHR5cGVvZiBib29sZWFuID09PSAnYm9vbGVhbicpIHsKICAgICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmFjdGl2ZSA9IGJvb2xlYW47CiAgICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5sYXN0VXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgcmV2b2tlZCBhdHRyaWJ1dGUgb2YgdGhlIEdsb2JhbFJlZ2lzdHJ5UmVjb3JkLgogICAgICogQHBhcmFtICB7Ym9vbGVhbn0gICBib29sZWFuICAgIFZhbHVlIHRvIHNldCB0aGUgcmV2b2tlZCBmbGFnIG9mIHRoZSBHbG9iYWxSZWdpc3RyeVJlY29yZCB0by4KICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHNldCBzdWNjZXNmdWxseSwgZmFsc2Ugb3RoZXJ3aXNlLgogICAgKi8KCiAgfSwgewogICAga2V5OiAnc2V0UmV2b2tlZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UmV2b2tlZChib29sZWFuKSB7CiAgICAgIGlmICh0eXBlb2YgYm9vbGVhbiA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5yZXZva2VkID0gYm9vbGVhbjsKICAgICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmxhc3RVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyBUaW1lb3V0IGF0dHJpYnV0ZSBvZiB0aGUgR2xvYmFsUmVnaXN0cnlSZWNvcmQuCiAgICAgKiBAcGFyYW0gIHtEYXRlfSAgIERhdGUgICAgRGF0ZSB0byBzZXQgdGhlIHRpbWVvdXQgb2YgdGhlIEdsb2JhbFJlZ2lzdHJ5UmVjb3JkIHRvLgogICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgc2V0IHN1Y2Nlc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UuCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzZXRUaW1lb3V0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUaW1lb3V0KFRpbWVvdXQpIHsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIGlmICgodHlwZW9mIFRpbWVvdXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoVGltZW91dCkpID09ICdvYmplY3QnICYmIFRpbWVvdXQgaW5zdGFuY2VvZiBEYXRlICYmIFRpbWVvdXQgPiBub3cpIHsKICAgICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnRpbWVvdXQgPSBUaW1lb3V0LnRvSVNPU3RyaW5nKCk7CiAgICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5sYXN0VXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAgIFJldHVybnMgdGhlIGdsb2JhbFJlZ2lzdHJ5UmVjb3JkIGZvciB0aGUgb3duZXIuCiAgICAgICBAcmV0dXJucyB7YXJyYXl9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0R2xvYmFsUmVnaXN0cnlSZWNvcmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEdsb2JhbFJlZ2lzdHJ5UmVjb3JkKCkgewogICAgICByZXR1cm4gdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZDsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrcywgaWYgdGhlIGdpdmVuIEdVSUQgaXMga25vd24gYW5kIHJldHVybnMgYSBsaXN0IG9mIGNvbnRhY3MgdGhhdCBhcmUgZGlyZWN0IGNvbm5lY3Rpb25zIGFzIHdlbGwgYXMgYSBsaXN0IG9mIGNvbnRhY3RzIHRoYXQgKG1vc3QgbGlrZWx5KSBrbm93IHRoZSBnaXZlbiBjb250YWN0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgZ3VpZCAgICAgIEdVSUQgb2YgdGhlIGNvbnRhY3QgdG8gbG9vayBmb3IuCiAgICAgKiBAcmV0dXJucyAge2FycmF5fSAgICByZWxhdGVkQ29udGFjdHMgICAgIExpc3Qgb2YgcmVsYXRlZCBkaXJlY3QgY29udGFjdHMgYW5kIG9mIHJlbGF0ZWQgZnJpZW5kcy1vZi1mcmllbmRzIGNvbnRhY3RzLlRoZSBmb3JtYXQgaXM6IFJlbGF0ZWRDb250YWN0czxEaXJlY3Q8R3JhcGhDb25uZWN0b3JDb250YWN0RGF0YT4sRm9GPEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGE+Pi4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjaGVja0dVSUQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrR1VJRChndWlkKSB7CiAgICAgIHZhciBkaXJlY3RDb250YWN0c0FycmF5ID0gW107CiAgICAgIHZhciBmb2ZDb250YWN0c0FycmF5ID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250YWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmNvbnRhY3RzW2ldLmd1aWQgPT0gZ3VpZCkgewogICAgICAgICAgZGlyZWN0Q29udGFjdHNBcnJheS5wdXNoKHRoaXMuY29udGFjdHNbaV0pOwogICAgICAgIH0KICAgICAgICB2YXIgYmYxaG9wID0gdGhpcy5jb250YWN0c1tpXS5jb250YWN0c0Jsb29tRmlsdGVyMUhvcDsKICAgICAgICBpZiAoYmYxaG9wICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmIChiZjFob3AudGVzdChndWlkKSkgewogICAgICAgICAgICBmb2ZDb250YWN0c0FycmF5LnB1c2godGhpcy5jb250YWN0c1tpXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBydG5BcnJheSA9IFtdOwogICAgICBydG5BcnJheS5wdXNoKGRpcmVjdENvbnRhY3RzQXJyYXksIGZvZkNvbnRhY3RzQXJyYXkpOwogICAgICByZXR1cm4gcnRuQXJyYXk7CiAgICB9CgogICAgLy8gVE9ETzogZXhwb3J0R3JhcGhEYXRhKD8pe30KICAgIC8vIFRPRE86IGltcG9ydEdyYXBoRGF0YSg/KXt9CgogIH0sIHsKICAgIGtleTogJ21lc3NhZ2VCdXMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9tZXNzYWdlQnVzOwogICAgfQoKICAgIC8qKgogICAgKiBTZXRzIHRoZSBNZXNzYWdlQnVzLgogICAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzICAgIFRoZSBNZXNzYWdlIEJ1cy4KICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChtZXNzYWdlQnVzKSB7CiAgICAgIHRoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwogICAgfQogIH1dKTsKICByZXR1cm4gR3JhcGhDb25uZWN0b3I7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEdyYXBoQ29ubmVjdG9yOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL0Jsb29tRmlsdGVyIjo3MzMsIi4vR2xvYmFsUmVnaXN0cnlSZWNvcmQiOjczNCwiLi9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhIjo3MzYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9hcnJheS9mcm9tIjoyOTgsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeSI6Mjk5LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6MzA3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvc2V0IjozMDgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MzExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjMxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3R5cGVvZiI6MzE1LCJiYXNlNjQtdXJsIjo0MjcsImJpcDM5Ijo0MjgsImJpdGNvaW5qcy1saWIiOjQ5MiwiYnVmZmVyIjo1MDQsImhleDY0Ijo3MjUsImpzcnNhc2lnbiI6NzI3LCJzamNsIjo3Mjl9XSw3MzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayIpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KLyoqCiogUmVwcmVzZW50cyBpbmZvcm1hdGlvbiBhYm91dCBhIGNvbnRhY3QuCiogQGF1dGhvciBiZWllcmxlQHR1LWJlcmxpbi5kZQoqLwoKdmFyIEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEgPSBmdW5jdGlvbiAoKSB7CgogIC8qKgogICAqIENvbnN0cnVjdHMgYSBuZXcgb2JqZWN0IHJlcHJlc2VudGluZyBpbmZvcm1hdGlvbiBhYm91dCBvbmUgY29udGFjdC4KICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBndWlkICAgICAgICBUaGUgR1VJRCBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICogQHBhcmFtICB7U3RyaW5nfSAgIGZpcnN0TmFtZSAgIFRoZSBmaXJzdCBuYW1lIG9mIHRoZSBuZXcgY29udGFjdC4KICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgbGFzdE5hbWUgICAgVGhlIGxhc3QgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICovCgogIGZ1bmN0aW9uIEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEoZ3VpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSk7CgogICAgdGhpcy5fZ3VpZCA9IGd1aWQ7CiAgICB0aGlzLl91c2VySURzID0gW107CiAgICB0aGlzLl9maXJzdE5hbWUgPSBmaXJzdE5hbWU7CiAgICB0aGlzLl9sYXN0TmFtZSA9IGxhc3ROYW1lOwogICAgdGhpcy5fcHJpdmF0ZUNvbnRhY3QgPSBmYWxzZTsKICAgIHRoaXMuX2NvbnRhY3RzQmxvb21GaWx0ZXIxSG9wOwogICAgdGhpcy5fbGFzdFN5bmNCbG9vbUZpbHRlcjFIb3AgPSBuZXcgRGF0ZSgwKS50b0lTT1N0cmluZygpOwogICAgdGhpcy5fbGFzdFN5bmNEb21haW5Vc2VySURzID0gbmV3IERhdGUoMCkudG9JU09TdHJpbmcoKTsKICAgIHRoaXMuX3Jlc2lkZW5jZUxvY2F0aW9uOwogICAgdGhpcy5fZ3JvdXBzID0gW107CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBHVUlELgogICAqIEByZXR1cm5zICB7U3RyaW5nfSAgICAgR1VJRCAgICAgICAgR1VJRCBvZiB0aGUgY29udGFjdC4KICAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEsIFt7CiAgICBrZXk6ICJndWlkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZ3VpZDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIEdVSUQuCiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBHVUlEICAgICAgICBHVUlEIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGd1aWQpIHsKICAgICAgdGhpcy5fZ3VpZCA9IGd1aWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB1c2VyIElEcy4KICAgICAqIEByZXR1cm5zICB7TGlzdDxTdHJpbmc+fSAgICAgdXNlcklEcyAgICAgICAgVXNlcklEcyBvZiB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ1c2VySURzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXNlcklEczsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIHVzZXJJRHMuCiAgICAgKiBAcGFyYW0gIHtMaXN0PFN0cmluZz59ICAgICB1c2VySURzICAgICAgICBVc2VySURzIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KHVzZXJJRHMpIHsKICAgICAgdGhpcy5fdXNlcklEcyA9IHVzZXJJRHM7CiAgICAgIHRoaXMuX2xhc3RTeW5jRG9tYWluVXNlcklEcyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGZpcnN0IG5hbWUuCiAgICAgKiBAcmV0dXJucyAge1N0cmluZ30gICAgIGZpcnN0TmFtZSAgICAgICAgRmlyc3QgbmFtZSBvZiB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmaXJzdE5hbWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9maXJzdE5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBmaXJzdCBuYW1lLgogICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgZmlyc3ROYW1lICAgICAgICBGaXJzdCBuYW1lIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGZpcnN0TmFtZSkgewogICAgICB0aGlzLl9maXJzdE5hbWUgPSBmaXJzdE5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IG5hbWUuCiAgICAgKiBAcmV0dXJucyAge1N0cmluZ30gICAgIGxhc3ROYW1lICAgICAgICBMYXN0IG5hbWUgb2YgdGhlIGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAibGFzdE5hbWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9sYXN0TmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGxhc3QgbmFtZS4KICAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgIGxhc3ROYW1lICAgICAgICBMYXN0IG5hbWUgb2YgdGhlIGNvbnRhdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQobGFzdE5hbWUpIHsKICAgICAgdGhpcy5fbGFzdE5hbWUgPSBsYXN0TmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHByaXZhY3kgc3RhdHVzIG9mIHRoZSBjb250YWN0LgogICAgICogQHJldHVybnMgIHtCb29sZWFufSAgICAgcHJpdmF0ZUNvbnRhY3QgICAgICAgIFRydWUvZmFsc2UgdmFsdWUgaW5kaWNhdGluZyB0aGUgcHJpdmFjeSBzdGF0dXMgb2YgdGhlIGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicHJpdmF0ZUNvbnRhY3QiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9wcml2YXRlQ29udGFjdDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIHByaXZhY3kgc3RhdHVzIG9mIHRoZSBjb250YWN0IGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gQm9vbGVhbiB2YWx1ZS4KICAgICAqIEBwYXJhbSAge0Jvb2xlYW59ICAgICBib29sUHJpdmF0ZSAgICAgICAgVHJ1ZS9mYWxzZSB2YWx1ZSBpbmRpY2F0aW5nIHRoZSBwcml2YWN5IHN0YXR1cyBvZiB0aGUgY29udGFjdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoYm9vbFByaXZhdGUpIHsKICAgICAgdGhpcy5fcHJpdmF0ZUNvbnRhY3QgPSBib29sUHJpdmF0ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIEJsb29tIGZpbHRlciBjb250YWluaW5nIHRoZSBoYXNoZWQgR1VJRHMgb2YgdGhlIGNvbnRhY3RzIGZvciB0aGUgY29udGFjdC4KICAgICAqIEByZXR1cm5zICB7Qmxvb21GaWx0ZXJ9ICAgICBiZiAgICAgICAgQmxvb20gZmlsdGVyIGZvciB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjb250YWN0c0Jsb29tRmlsdGVyMUhvcCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhY3RzQmxvb21GaWx0ZXIxSG9wOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgZnJpZW5kcy1vZi1mcmllbmRzIEJsb29tIGZpbHRlciBjb250YWluaW5nIHRoZSBoYXNoZWQgR1VJRHMgb2YgdGhlIGNvbnRhY3RzIGZvciB0aGUgY29udGFjdC4KICAgICAqIEBwYXJhbSAge0Jsb29tRmlsdGVyfSAgICAgYmYgICAgICAgIEJsb29tIGZpbHRlciBmb3IgdGhlIGNvbnRhY3QuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGJmKSB7CiAgICAgIHRoaXMuX2NvbnRhY3RzQmxvb21GaWx0ZXIxSG9wID0gYmY7CiAgICAgIHRoaXMuX2xhc3RTeW5jQmxvb21GaWx0ZXIxSG9wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgbGFzdCBTeW5jIEJsb29tIEZpbHRlciBkYXRlIGZvciB0aGUgY29udGFjdC4KICAgICAqIEByZXR1cm5zICB7U3RyaW5nfSAgIGxhc3RTeW5jQmxvb21GaWx0ZXIxSG9wICAgbGFzdCBTeW5jIEJsb29tIEZpbHRlciBkYXRlIGZvciB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJsYXN0U3luY0Jsb29tRmlsdGVyMUhvcCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2xhc3RTeW5jQmxvb21GaWx0ZXIxSG9wOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZ2VvaGFzaCBvZiB0aGUgcmVzaWRlbmNlIGxvY2F0aW9uLgogICAgICogQHJldHVybnMgIHtTdHJpbmd9ICAgICBnZW9oYXNoICAgICAgICBHZW9oYXNoIG9mIHRoZSByZXNpZGVuY2UgbG9jYXRpb24uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVzaWRlbmNlTG9jYXRpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZXNpZGVuY2VMb2NhdGlvbjsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGdlb2hhc2ggb2YgdGhlIHJlc2lkZW5jZSBsb2NhdGlvbi4KICAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgIGdlb2hhc2ggICAgICAgIEdlb2hhc2ggb2YgdGhlIHJlc2lkZW5jZSBsb2NhdGlvbi4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZ2VvaGFzaCkgewogICAgICB0aGlzLl9yZXNpZGVuY2VMb2NhdGlvbiA9IGdlb2hhc2g7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBncm91cHMuCiAgICAgKiBAcmV0dXJucyAge0xpc3Q8U3RyaW5nPn0gICAgIGdyb3VwcyAgICAgICAgR3JvdXBzIG9mIHRoZSBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogImdyb3VwcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwczsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGdyb3Vwcy4KICAgICAqIEBwYXJhbSAge0xpc3Q8U3RyaW5nPn0gICAgIGdyb3VwcyAgICAgICAgR3JvdXBzIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGdyb3VwcykgewogICAgICB0aGlzLl9ncm91cHMgPSBncm91cHM7CiAgICB9CiAgfV0pOwogIHJldHVybiBHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3Mzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3Byb21pc2UgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZScpOwoKdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ2xhc3Mgd2l0aCB0aGUgY3J5cHRvZ3JhcGhpYyBmdW5jdGlvbnMgZm9yIHRoZSBhdXRoZW50aWNhdGlvbiBwcm90b2NvbAoqCiovCgp2YXIgQ3J5cHRvID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENyeXB0bygpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIENyeXB0byk7CgogICAgdmFyIF90aGlzID0gdGhpczsKICB9CgogIC8qKgogICogZW5jb2RlIGEgYnl0ZUFycmF5IHZhbHVlIGluIGJhc2UgNjQgZW5jb2RlCiAgKiBAcGFyYW0gICB7Ynl0ZUFycmF5fSAgICB2YWx1ZSAgICBieXRlQXJyYXkgdmFsdWUKICAqIEByZXR1cm4gIHtzdHJpbmd9ICAgZW5jb2RlZCB2YWx1ZQogICovCgoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShDcnlwdG8sIFt7CiAgICBrZXk6ICdlbmNvZGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVuY29kZSh2YWx1ZSkgewogICAgICByZXR1cm4gYnRvYSh2YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAqIGRlY29kZSBhIGJhc2U2NCB2YWx1ZSBpbiBhIG5ldyBVaW50OEFycmF5CiAgICAqIEBwYXJhbSAgIHtzdHJpbmd9ICAgIHZhbHVlICAgIHZhbHVlIGVuY29kZWQgaW4gYmFzZSA2NAogICAgKiBAcmV0dXJuICB7Ynl0ZUFycmF5fSBkZWNvZGVkVmFsdWUKICAgICovCgogIH0sIHsKICAgIGtleTogJ2RlY29kZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVjb2RlKHZhbHVlKSB7CiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShKU09OLnBhcnNlKCdbJyArIGF0b2IodmFsdWUpICsgJ10nKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZW5jcnlwdFJTQScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZW5jcnlwdFJTQShwdWJLZXksIGRhdGEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLl9pbXBvcnRSU0FlbmNyeXB0S2V5KG5ldyBVaW50OEFycmF5KHB1YktleSkpLnRoZW4oZnVuY3Rpb24gKHB1YmxpY0tleSkgewoKICAgICAgICAgIGNyeXB0by5zdWJ0bGUuZW5jcnlwdCh7CiAgICAgICAgICAgIG5hbWU6ICdSU0EtT0FFUCcKICAgICAgICAgIH0sIHB1YmxpY0tleSwgLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQogICAgICAgICAgZGF0YSAvL0FycmF5QnVmZmVyIG9mIGRhdGEgeW91IHdhbnQgdG8gZW5jcnlwdAogICAgICAgICAgKS50aGVuKGZ1bmN0aW9uIChlbmNyeXB0ZWQpIHsKICAgICAgICAgICAgLy9yZXR1cm5zIGFuIEFycmF5QnVmZmVyIGNvbnRhaW5pbmcgdGhlIGVuY3J5cHRlZCBkYXRhCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NyeXB0by1lbmNyeXB0UlNBJywgbmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkKSk7CiAgICAgICAgICAgIHJlc29sdmUobmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkKSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcnlwdG8tZW5jcnlwdFJTQScsIGVycik7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2RlY3J5cHRSU0EnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlY3J5cHRSU0EocHJpdktleSwgZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMuX2ltcG9ydFJTQWRlY3J5cHRLZXkocHJpdktleSkudGhlbihmdW5jdGlvbiAocHJpdmF0ZUtleSkgewoKICAgICAgICAgIGNyeXB0by5zdWJ0bGUuZGVjcnlwdCh7CiAgICAgICAgICAgIG5hbWU6ICdSU0EtT0FFUCcKICAgICAgICAgIH0sIHByaXZhdGVLZXksIC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKICAgICAgICAgIGRhdGEgLy9BcnJheUJ1ZmZlciBvZiB0aGUgZGF0YQogICAgICAgICAgKS50aGVuKGZ1bmN0aW9uIChkZWNyeXB0ZWQpIHsKCiAgICAgICAgICAgIHZhciBkZWNyeXB0ZWREYXRhID0gbmV3IFVpbnQ4QXJyYXkoZGVjcnlwdGVkKTsKCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NyeXB0by1kZWNyeXB0UlNBJywgZGVjcnlwdGVkRGF0YSk7CiAgICAgICAgICAgIHJlc29sdmUoZGVjcnlwdGVkRGF0YSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcnlwdG8tZGVjcnlwdFJTQScsIGVycik7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ3NpZ25SU0EnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNpZ25SU0EocHJpdktleSwgZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMuX2ltcG9ydFJTQXNpZ25LZXkocHJpdktleSkudGhlbihmdW5jdGlvbiAocHJpdmF0ZUtleSkgewoKICAgICAgICAgIGNyeXB0by5zdWJ0bGUuc2lnbih7CiAgICAgICAgICAgIG5hbWU6ICdSU0FTU0EtUEtDUzEtdjFfNScKICAgICAgICAgIH0sIHByaXZhdGVLZXksIC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKICAgICAgICAgIF90aGlzLl91dGY4RW5jb2RlKGRhdGEpIC8vQXJyYXlCdWZmZXIgb2YgZGF0YSB5b3Ugd2FudCB0byBzaWduCiAgICAgICAgICApLnRoZW4oZnVuY3Rpb24gKHNpZ25hdHVyZSkgewogICAgICAgICAgICAvL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgc2lnbmF0dXJlCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NyeXB0by1zaWduUlNBJywgbmV3IFVpbnQ4QXJyYXkoc2lnbmF0dXJlKSk7CiAgICAgICAgICAgIHJlc29sdmUobmV3IFVpbnQ4QXJyYXkoc2lnbmF0dXJlKSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcnlwdG8tc2lnblJTQScsIGVycik7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ3ZlcmlmeVJTQScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmVyaWZ5UlNBKHB1YktleSwgZGF0YSwgc2lnbmF0dXJlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpcy5faW1wb3J0UlNBdmVyaWZ5S2V5KHB1YktleSkudGhlbihmdW5jdGlvbiAocHVibGljS2V5KSB7CgogICAgICAgICAgY3J5cHRvLnN1YnRsZS52ZXJpZnkoewogICAgICAgICAgICBuYW1lOiAnUlNBU1NBLVBLQ1MxLXYxXzUnCiAgICAgICAgICB9LCBwdWJsaWNLZXksIC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKICAgICAgICAgIHNpZ25hdHVyZSwgLy9BcnJheUJ1ZmZlciBvZiB0aGUgc2lnbmF0dXJlCiAgICAgICAgICBfdGhpcy5fdXRmOEVuY29kZShkYXRhKSAvL0FycmF5QnVmZmVyIG9mIHRoZSBkYXRhCiAgICAgICAgICApLnRoZW4oZnVuY3Rpb24gKGlzdmFsaWQpIHsKICAgICAgICAgICAgLy9yZXR1cm5zIGEgYm9vbGVhbiBvbiB3aGV0aGVyIHRoZSBzaWduYXR1cmUgaXMgdHJ1ZSBvciBub3QKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY3J5cHRvLXZlcmlmeVJTQScsIGlzdmFsaWQpOwogICAgICAgICAgICByZXNvbHZlKGlzdmFsaWQpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZygnY3J5cHRvLXZlcmlmeVJTQScsIGVycik7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2VuY3J5cHRBRVMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVuY3J5cHRBRVMoa2V5LCBkYXRhLCBpdikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMuX2ltcG9ydEFFU2tleShrZXkpLnRoZW4oZnVuY3Rpb24gKGFlc0tleSkgewoKICAgICAgICAgIGNyeXB0by5zdWJ0bGUuZW5jcnlwdCh7CiAgICAgICAgICAgIG5hbWU6ICdBRVMtQ0JDJywKICAgICAgICAgICAgLy9Eb24ndCByZS11c2UgaW5pdGlhbGl6YXRpb24gdmVjdG9ycyEKICAgICAgICAgICAgLy9BbHdheXMgZ2VuZXJhdGUgYSBuZXcgaXYgZXZlcnkgdGltZSB5b3VyIGVuY3J5cHQhCiAgICAgICAgICAgIGl2OiBpdgogICAgICAgICAgfSwgYWVzS2V5LCAvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCiAgICAgICAgICBfdGhpcy5fdXRmOEVuY29kZShkYXRhKSAvL0FycmF5QnVmZmVyIG9mIGRhdGEgeW91IHdhbnQgdG8gZW5jcnlwdAogICAgICAgICAgKS50aGVuKGZ1bmN0aW9uIChlbmNyeXB0ZWQpIHsKICAgICAgICAgICAgLy9yZXR1cm5zIGFuIEFycmF5QnVmZmVyIGNvbnRhaW5pbmcgdGhlIGVuY3J5cHRlZCBkYXRhCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NyeXB0by1lbmNyeXB0QUVTJywgbmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkKSk7CiAgICAgICAgICAgIHJlc29sdmUobmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkKSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcnlwdG8tZW5jcnlwdEFFUycsIGVycik7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2RlY3J5cHRBRVMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlY3J5cHRBRVMoa2V5LCBkYXRhLCBpdikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMuX2ltcG9ydEFFU2tleShrZXkpLnRoZW4oZnVuY3Rpb24gKGFlc0tleSkgewoKICAgICAgICAgIGNyeXB0by5zdWJ0bGUuZGVjcnlwdCh7CiAgICAgICAgICAgIG5hbWU6ICdBRVMtQ0JDJywKICAgICAgICAgICAgaXY6IGl2CiAgICAgICAgICB9LCBhZXNLZXksIC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKICAgICAgICAgIGRhdGEgLy9BcnJheUJ1ZmZlciBvZiB0aGUgZGF0YQogICAgICAgICAgKS50aGVuKGZ1bmN0aW9uIChkZWNyeXB0ZWQpIHsKCiAgICAgICAgICAgIHZhciBkZWNvZGVkRGF0YSA9IF90aGlzLl91dGY4RGVjb2RlKG5ldyBVaW50OEFycmF5KGRlY3J5cHRlZCkpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjcnlwdG8tZGVjcnlwdEFFUycsIGRlY29kZWREYXRhKTsKICAgICAgICAgICAgcmVzb2x2ZShkZWNvZGVkRGF0YSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcnlwdG8tZGVjcnlwdEFFUycsIGVycik7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBjcmVhdGVzIGEgaGFzaCB1c2luZyB0aGUgSE1BQyBhbGdvcml0aG0KICAgICogQHBhcmFtICB7Ynl0ZUFycmF5fSAgICBrZXkgICAgICAga2V5IHRvIGJlIHVzZWQgaW4gdGhlIGhtYWMKICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgIGRhdGEgICAgICAgaW5mb3JtYXRpb24gdG8gYmUgaGFzaGVkCiAgICAqIEByZXR1cm4gIHtieXRlQXJyYXl9ICAgc2lnbmF0dXJlICByZXN1bHRpbmcgaGFzaAogICAgKi8KCiAgfSwgewogICAga2V5OiAnaGFzaEhNQUMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc2hITUFDKGtleSwgZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzLl9pbXBvcnRITUFDa2V5KGtleSkudGhlbihmdW5jdGlvbiAoaG1hY0tleSkgewoKICAgICAgICAgIGNyeXB0by5zdWJ0bGUuc2lnbih7CiAgICAgICAgICAgIG5hbWU6ICdITUFDJwogICAgICAgICAgfSwgaG1hY0tleSwgLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQogICAgICAgICAgX3RoaXMuX3V0ZjhFbmNvZGUoZGF0YSkgLy9BcnJheUJ1ZmZlciBvZiBkYXRhIHlvdSB3YW50IHRvIHNpZ24KICAgICAgICAgICkudGhlbihmdW5jdGlvbiAoc2lnbmF0dXJlKSB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NyeXB0by1oYXNoSE1BQycsIHNpZ25hdHVyZSk7CgogICAgICAgICAgICAvL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgc2lnbmF0dXJlCiAgICAgICAgICAgIHJlc29sdmUobmV3IFVpbnQ4QXJyYXkoc2lnbmF0dXJlKSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcnlwdG8taGFzaEhNQUMnLCBlcnIpOwogICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogdmVyaWZpZXMgYW4gaGFzaCB1c2luZyB0aGUgSE1BQyBhbGdvcml0aG0KICAgICogQHBhcmFtICB7Ynl0ZUFycmF5fSAgICBrZXkgICAgICAga2V5IHRvIGJlIHVzZWQgaW4gdGhlIGhtYWMKICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgIGRhdGEgICAgICAgaW5mb3JtYXRpb24gdG8gYmUgaGFzaGVkIHRvIGNvbXBhcmUKICAgICogQHBhcmFtICB7Ynl0ZUFycmF5fSAgc2lnbmF0dXJlICAgaGFzaCB0byBjb21wYXJlIHdpdGggdGhlIHJlY2VpdmVkIGRhdGEKICAgICogQHJldHVybiAge2Jvb2xlYW59ICAgaXN2YWxpZCAgICAgYm9vbGVhbiBzYXlpbmcgaWYgdGhlIGRhdGEgY29ycmVzcG9uZHMgdG8gdGhlIGhhc2ggcmVjZWl2ZWQKICAgICovCgogIH0sIHsKICAgIGtleTogJ3ZlcmlmeUhNQUMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZlcmlmeUhNQUMoa2V5LCBkYXRhLCBzaWduYXR1cmUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBfdGhpcy5faW1wb3J0SE1BQ2tleShrZXkpLnRoZW4oZnVuY3Rpb24gKGhtYWNLZXkpIHsKCiAgICAgICAgICBjcnlwdG8uc3VidGxlLnZlcmlmeSh7CiAgICAgICAgICAgIG5hbWU6ICdITUFDJwogICAgICAgICAgfSwgaG1hY0tleSwgLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQogICAgICAgICAgc2lnbmF0dXJlLCAvL0FycmF5QnVmZmVyIG9mIHRoZSBzaWduYXR1cmUKICAgICAgICAgIF90aGlzLl91dGY4RW5jb2RlKGRhdGEpIC8vQXJyYXlCdWZmZXIgb2YgdGhlIGRhdGEKICAgICAgICAgICkudGhlbihmdW5jdGlvbiAoaXN2YWxpZCkgewogICAgICAgICAgICAvL3JldHVybnMgYSBib29sZWFuIG9uIHdoZXRoZXIgdGhlIHNpZ25hdHVyZSBpcyB0cnVlIG9yIG5vdAogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjcnlwdG8tdmVyaWZ5SE1BQycsIGlzdmFsaWQpOwogICAgICAgICAgICBpc3ZhbGlkID8gcmVzb2x2ZShpc3ZhbGlkKSA6IHJlamVjdChpc3ZhbGlkKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignY3J5cHRvLXZlcmlmeUhNQUMnLCBlcnIpOwogICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogZ2VuZXJhdGVzIGEgUlNBIHB1YmxpYy9wcml2YXRlIGtleSBwYWlyIHdpdGggYSBtb2R1bHVzIGxlbmd0aCBvZiAyMDQ4IGJpdHMKICAgICogQHJldHVybiAge0pTT059ICAga2V5UGFpciAgICBqc29uIGNvbnRhaW5pbmcgdGhlIHB1YmxpYyBhbmQgcHJpdmF0ZSBrZXlzCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZW5lcmF0ZVJTQUtleVBhaXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlUlNBS2V5UGFpcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGtleVBhaXIgPSB7fTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoewogICAgICAgICAgbmFtZTogJ1JTQS1QU1MnLAogICAgICAgICAgbW9kdWx1c0xlbmd0aDogMjA0OCwgLy9jYW4gYmUgMTAyNCwgMjA0OCwgb3IgNDA5NgogICAgICAgICAgcHVibGljRXhwb25lbnQ6IG5ldyBVaW50OEFycmF5KFsweDAxLCAweDAwLCAweDAxXSksCiAgICAgICAgICBoYXNoOiB7IG5hbWU6ICdTSEEtMjU2JyB9IC8vY2FuIGJlICdTSEEtMScsICdTSEEtMjU2JywgJ1NIQS0zODQnLCBvciAnU0hBLTUxMicKICAgICAgICB9LCB0cnVlLCAvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpCiAgICAgICAgWydzaWduJywgJ3ZlcmlmeSddIC8vY2FuIGJlIGFueSBjb21iaW5hdGlvbiBvZiAnc2lnbicgYW5kICd2ZXJpZnknCgogICAgICAgICkudGhlbihmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAvL3JldHVybnMgYSBrZXlwYWlyIG9iamVjdAogICAgICAgICAgLy9jb25zb2xlLmxvZyhrZXkpOwoKICAgICAgICAgIGNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KCdzcGtpJywgLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKICAgICAgICAgIGtleS5wdWJsaWNLZXkgLy9jYW4gYmUgYSBwdWJsaWNLZXkgb3IgcHJpdmF0ZUtleSwgYXMgbG9uZyBhcyBleHRyYWN0YWJsZSB3YXMgdHJ1ZQogICAgICAgICAgKS50aGVuKGZ1bmN0aW9uIChwdWJsaWNLZXkpIHsKICAgICAgICAgICAgLy9yZXR1cm5zIHRoZSBleHBvcnRlZCBrZXkgZGF0YQogICAgICAgICAgICBrZXlQYWlyLnB1YmxpYyA9IG5ldyBVaW50OEFycmF5KHB1YmxpY0tleSk7CiAgICAgICAgICAgIHJldHVybiBjcnlwdG8uc3VidGxlLmV4cG9ydEtleSgncGtjczgnLCAvL2NhbiBiZSAnandrJyAocHVibGljIG9yIHByaXZhdGUpLCAnc3BraScgKHB1YmxpYyBvbmx5KSwgb3IgJ3BrY3M4JyAocHJpdmF0ZSBvbmx5KQogICAgICAgICAgICBrZXkucHJpdmF0ZUtleSAvL2NhbiBiZSBhIHB1YmxpY0tleSBvciBwcml2YXRlS2V5LCBhcyBsb25nIGFzIGV4dHJhY3RhYmxlIHdhcyB0cnVlCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChwcml2YXRlS2V5KSB7CiAgICAgICAgICAgIGtleVBhaXIucHJpdmF0ZSA9IG5ldyBVaW50OEFycmF5KHByaXZhdGVLZXkpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVSU0FLZXlQYWlyJywga2V5UGFpcik7CgogICAgICAgICAgICByZXNvbHZlKGtleVBhaXIpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBHZW5lcmF0ZXMgYSAxMjggYml0IHJhbmRvbSB2YWx1ZS4KICAgICogQHJldHVybiB7Ynl0ZUFycmF5fSAgYXJyYXkgICAgcmFuZG9tIHZhbHVlCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZW5lcmF0ZUlWJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUlWKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTYpOwogICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KTsKCiAgICAgIHJldHVybiBhcnJheTsKICAgIH0KCiAgICAvKioKICAgICogR2VuZXJhdGVzIGEgMjU2IGJpdCByYW5kb20gdmFsdWUuIDMyIGJpdHMgYXJlIGV4dHJhdGVkIGZyb20gdGhlIG1hY2hpbmUgdGltZSwKICAgICogdGhlIHJlbWFpbmluZyBhcmUgZ2VuZXJhdGVkIHJhbmRvbWx5CiAgICAqIEByZXR1cm4ge2J5dGVBcnJheX0gIGFycmF5ICAgIHJhbmRvbSB2YWx1ZQogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2VuZXJhdGVSYW5kb20nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMzIpOwogICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KTsKCiAgICAgIHZhciBkYXRlID0gRGF0ZS5ub3coKTsKICAgICAgdmFyIGRhdGVFbmNvZGVkID0gX3RoaXMuX3V0ZjhFbmNvZGUoZGF0ZSk7CgogICAgICAvL2V4dHJhY3QgdGhlIGxlYXN0IHNpZ25pZmljYW50IDQgYnl0ZXMgaW4gdGhlIGRhdGUKICAgICAgdmFyIGZpbmFsRGF0ZSA9IGRhdGVFbmNvZGVkLnNsaWNlKGRhdGVFbmNvZGVkLmxlbmd0aCAtIDQsIGRhdGVFbmNvZGVkLmxlbmd0aCk7CgogICAgICAvLyBhZGQgaW4gdGhlIGZpcnN0IDQgYnl0ZXMgb2YgdGhlIGFycmF5IHRoZSBieXRlcyBleHRyYWN0ZWQgcHJldmlvdXNseTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgICAgICBhcnJheVtpXSA9IGZpbmFsRGF0ZVtpXTsKICAgICAgfQogICAgICByZXR1cm4gYXJyYXk7CiAgICB9CgogICAgLyoqCiAgICAqIGdlbmVyYXRlcyBhIHByZW1hc3RlciBzZWNyZXQgKFBNUykgb2YgNDggYnl0ZXMgKDM4NCBiaXRzKSByYW5kb21seQogICAgKiBAcmV0dXJuIHtieXRlQXJyYXl9ICBhcnJheSAgICBwcmVtYXN0ZXIgc2VjcmV0IGtleQogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2VuZXJhdGVQTVMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlUE1TKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoNDgpOwogICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KTsKICAgICAgcmV0dXJuIGFycmF5OwogICAgfQoKICAgIC8qKgogICAgKiBnZW5lcmF0ZXMgYSBtYXN0ZXJLZXkgc2VjcmV0IChQTVMpIG9mIDQ4IGJ5dGVzICgzODQgYml0cykgdXNpbmcgdGhlIHByZW1hc3RlciBzZWNyZXQgYW5kCiAgICAqIHR3byByYW5kb21zCiAgICAqIEByZXR1cm4ge2J5dGVBcnJheX0gIGFycmF5ICAgIG1hc3RlciBzZWNyZXQga2V5IHdpdGggNDggYnl0ZXMKICAgICovCgogIH0sIHsKICAgIGtleTogJ2dlbmVyYXRlTWFzdGVyU2VjcmV0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZU1hc3RlclNlY3JldChobWFjS2V5LCBkYXRhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIga2V5ID0gbmV3IFVpbnQ4QXJyYXkoNDgpOwogICAgICAgIHZhciBzZWVkID0gZGF0YTsKCiAgICAgICAgX3RoaXMuX2RpZ2VzdChobWFjS2V5KS50aGVuKGZ1bmN0aW9uIChkaWdlc3RlZEtleSkgewoKICAgICAgICAgIF90aGlzLmhhc2hITUFDKGRpZ2VzdGVkS2V5LCBzZWVkKS50aGVuKGZ1bmN0aW9uIChrZXlwYXJ0MCkgewoKICAgICAgICAgICAgLy9jb3B5IHRoZSBmaXJzdCAzMiBieXRlcyBpbnRvIHRoZSBrZXkKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMjsgaSsrKSB7CiAgICAgICAgICAgICAga2V5W2ldID0ga2V5cGFydDBbaV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF90aGlzLmhhc2hITUFDKGRpZ2VzdGVkS2V5LCBzZWVkICsga2V5cGFydDApOwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoa2V5cGFydDEpIHsKCiAgICAgICAgICAgIC8vY29weSB0aGUgZmlyc3QgMTYgYnl0ZXMgdG8gdGhlIGtleSByZW1haW5pbmcgMTYgYnl0ZXMKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7CiAgICAgICAgICAgICAga2V5W2kgKyAzMl0gPSBrZXlwYXJ0MVtpXTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVNYXN0ZXJTZWNyZXQnLCBrZXkpOwogICAgICAgICAgICByZXNvbHZlKGtleSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVNYXN0ZXJTZWNyZXQnLCBlcnIpOwogICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogZ2VuZXJhdGVzIGJvdGggdXNlcnMgTUFDIGFuZCBlbmNyeXB0aW9uIGtleXMuIGdlbmVyYXRlIGFzIG91dHB1dCBhbiBhcnJheQogICAgKiB3aXRoIDQgYnl0ZUFycmF5IGVhY2ggd2l0aCAzMiBieXRlcwogICAgKiBAcGFyYW0gIHtieXRlQXJyYXl9ICAgICAgICBzZWNyZXQgICAgICAgc2VjcmV0IHRvIGJlIHVzZWQgaW4gdGhlIEhNQUMgZnVuY3Rpb24KICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgICAgICAgZGF0YSAgICAgICAgIGluZm9ybWF0aW9uIHRvIGJlIHVzZWQgYXMgc2VlZAogICAgKiBAcmV0dXJuIHtBcnJheTxieXRlQXJyYXk+fSBrZXkgICAgICAgICAgYXJyYXkgd2l0aCB0aGUgaW5mb3JtYXRpb24gdG8gZ2VuZXJhdGUga2V5cwogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2VuZXJhdGVLZXlzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUtleXMoaG1hY0tleSwgZGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBrZXkgPSBbXTsKICAgICAgICB2YXIgc2VlZCA9IGRhdGE7CgogICAgICAgIC8vIGl0ZXJhdGUgNCB0aW1lcyB0byBvYnRhaW4gYSAxMDI0IGtleSBzaXplCiAgICAgICAgX3RoaXMuaGFzaEhNQUMoaG1hY0tleSwgc2VlZCkudGhlbihmdW5jdGlvbiAoa2V5cGFydDApIHsKICAgICAgICAgIGtleS5wdXNoKGtleXBhcnQwKTsKICAgICAgICAgIHJldHVybiBfdGhpcy5oYXNoSE1BQyhobWFjS2V5LCBzZWVkICsga2V5cGFydDApOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGtleXBhcnQxKSB7CiAgICAgICAgICBrZXkucHVzaChrZXlwYXJ0MSk7CiAgICAgICAgICByZXR1cm4gX3RoaXMuaGFzaEhNQUMoaG1hY0tleSwgc2VlZCArIGtleXBhcnQxKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChrZXlwYXJ0MikgewogICAgICAgICAga2V5LnB1c2goa2V5cGFydDIpOwogICAgICAgICAgcmV0dXJuIF90aGlzLmhhc2hITUFDKGhtYWNLZXksIHNlZWQgKyBrZXlwYXJ0Mik7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoa2V5cGFydDMpIHsKICAgICAgICAgIGtleS5wdXNoKGtleXBhcnQzKTsKCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVLZXlzJywga2V5KTsKICAgICAgICAgIHJlc29sdmUoa2V5KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVLZXlzJywgZXJyKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwoKICAgICAgICAvL2NvbnNvbGUubG9nKGhtYWNLZXksIGRhdGEpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfaW1wb3J0UlNBc2lnbktleScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ltcG9ydFJTQXNpZ25LZXkocHJpdktleSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoJ3BrY3M4JywgLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKICAgICAgICBwcml2S2V5LCB7IC8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwogICAgICAgICAgbmFtZTogJ1JTQVNTQS1QS0NTMS12MV81JywKICAgICAgICAgIGhhc2g6IHsgbmFtZTogJ1NIQS0yNTYnIH0gLy9jYW4gYmUgJ1NIQS0xJywgJ1NIQS0yNTYnLCAnU0hBLTM4NCcsIG9yICdTSEEtNTEyJwogICAgICAgIH0sIHRydWUsIC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKICAgICAgICBbJ3NpZ24nXSAvLyd2ZXJpZnknIGZvciBwdWJsaWMga2V5IGltcG9ydCwgJ3NpZ24nIGZvciBwcml2YXRlIGtleSBpbXBvcnRzCiAgICAgICAgKS50aGVuKGZ1bmN0aW9uIChwcml2YXRlS2V5KSB7CiAgICAgICAgICAvL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NyeXB0by1faW1wb3J0UlNBc2lnbktleScsIHByaXZhdGVLZXkpOwogICAgICAgICAgcmVzb2x2ZShwcml2YXRlS2V5KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdjcnlwdG8tX2ltcG9ydFJTQXNpZ25LZXknLCBlcnIpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19pbXBvcnRSU0F2ZXJpZnlLZXknLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9pbXBvcnRSU0F2ZXJpZnlLZXkocHViS2V5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBjcnlwdG8uc3VidGxlLmltcG9ydEtleSgnc3BraScsIC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCiAgICAgICAgcHViS2V5LCB7IC8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwogICAgICAgICAgbmFtZTogJ1JTQVNTQS1QS0NTMS12MV81JywKICAgICAgICAgIGhhc2g6IHsgbmFtZTogJ1NIQS0yNTYnIH0gLy9jYW4gYmUgJ1NIQS0xJywgJ1NIQS0yNTYnLCAnU0hBLTM4NCcsIG9yICdTSEEtNTEyJwogICAgICAgIH0sIHRydWUsIC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKICAgICAgICBbJ3ZlcmlmeSddIC8vJ3ZlcmlmeScgZm9yIHB1YmxpYyBrZXkgaW1wb3J0LCAnc2lnbicgZm9yIHByaXZhdGUga2V5IGltcG9ydHMKICAgICAgICApLnRoZW4oZnVuY3Rpb24gKHB1YmxpY0tleSkgewogICAgICAgICAgLy9yZXR1cm5zIGEgcHVibGljS2V5IChvciBwcml2YXRlS2V5IGlmIHlvdSBhcmUgaW1wb3J0aW5nIGEgcHJpdmF0ZSBrZXkpCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCdjcnlwdG8tX2ltcG9ydFJTQXZlcmlmeUtleScsIHB1YmxpY0tleSk7CiAgICAgICAgICByZXNvbHZlKHB1YmxpY0tleSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcignY3J5cHRvLV9pbXBvcnRSU0F2ZXJpZnlLZXknLCBlcnIpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19pbXBvcnRSU0FlbmNyeXB0S2V5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfaW1wb3J0UlNBZW5jcnlwdEtleShwdWJLZXkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdzcGtpJywgLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKICAgICAgICBwdWJLZXksIHsgLy90aGVzZSBhcmUgdGhlIGFsZ29yaXRobSBvcHRpb25zCiAgICAgICAgICBuYW1lOiAnUlNBLU9BRVAnLAogICAgICAgICAgaGFzaDogeyBuYW1lOiAnU0hBLTI1NicgfSAvL2NhbiBiZSAnU0hBLTEnLCAnU0hBLTI1NicsICdTSEEtMzg0Jywgb3IgJ1NIQS01MTInCiAgICAgICAgfSwgdHJ1ZSwgLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQogICAgICAgIFsnZW5jcnlwdCddIC8vJ2VuY3J5cHQnIG9yICd3cmFwS2V5JyBmb3IgcHVibGljIGtleSBpbXBvcnQgb3IKICAgICAgICAvLydkZWNyeXB0JyBvciAndW53cmFwS2V5JyBmb3IgcHJpdmF0ZSBrZXkgaW1wb3J0cwogICAgICAgICkudGhlbihmdW5jdGlvbiAocHVibGljS2V5KSB7CiAgICAgICAgICAvL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NyeXB0by1faW1wb3J0UlNBZW5jcnlwdEtleScsIHB1YmxpY0tleSk7CiAgICAgICAgICByZXNvbHZlKHB1YmxpY0tleSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcignY3J5cHRvLV9pbXBvcnRSU0FlbmNyeXB0S2V5JywgZXJyKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfaW1wb3J0UlNBZGVjcnlwdEtleScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ltcG9ydFJTQWRlY3J5cHRLZXkocHJpdktleSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoJ3BrY3M4JywgLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKICAgICAgICBwcml2S2V5LCB7IC8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwogICAgICAgICAgbmFtZTogJ1JTQS1PQUVQJywKICAgICAgICAgIGhhc2g6IHsgbmFtZTogJ1NIQS0yNTYnIH0gLy9jYW4gYmUgJ1NIQS0xJywgJ1NIQS0yNTYnLCAnU0hBLTM4NCcsIG9yICdTSEEtNTEyJwogICAgICAgIH0sIHRydWUsIC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKICAgICAgICBbJ2RlY3J5cHQnXSAvLydlbmNyeXB0JyBvciAnd3JhcEtleScgZm9yIHB1YmxpYyBrZXkgaW1wb3J0IG9yCiAgICAgICAgLy8nZGVjcnlwdCcgb3IgJ3Vud3JhcEtleScgZm9yIHByaXZhdGUga2V5IGltcG9ydHMKICAgICAgICApLnRoZW4oZnVuY3Rpb24gKHByaXZhdGVLZXkpIHsKICAgICAgICAgIC8vcmV0dXJucyBhIHB1YmxpY0tleSAob3IgcHJpdmF0ZUtleSBpZiB5b3UgYXJlIGltcG9ydGluZyBhIHByaXZhdGUga2V5KQogICAgICAgICAgLy9jb25zb2xlLmxvZygnY3J5cHRvLV9pbXBvcnRSU0FkZWNyeXB0S2V5JywgcHJpdmF0ZUtleSk7CiAgICAgICAgICByZXNvbHZlKHByaXZhdGVLZXkpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NyeXB0by1faW1wb3J0UlNBZGVjcnlwdEtleScsIGVycik7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnY29uY2F0UE1Td2l0aFJhbmRvbXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmNhdFBNU3dpdGhSYW5kb21zKHBtcywgdG9SYW5kb20sIGZyb21SYW5kb20pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmaW5hbEtleSA9IG5ldyBVaW50OEFycmF5KHBtcy5sZW5ndGggKyB0b1JhbmRvbS5sZW5ndGggKyBmcm9tUmFuZG9tLmxlbmd0aCk7CgogICAgICAvLyBhZGQgUHJlbWFzdGVyS2V5CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZmluYWxLZXlbaV0gPSBwbXNbaV07CiAgICAgIH0KCiAgICAgIC8vYWRkIHRvIHJhbmRvbQogICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgdG9SYW5kb20ubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgZmluYWxLZXlbX2kgKyBwbXMubGVuZ3RoXSA9IHBtc1tfaV07CiAgICAgIH0KCiAgICAgIC8vYWRkIGZyb20gcmFuZG9tCiAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGZyb21SYW5kb20ubGVuZ3RoOyBfaTIrKykgewogICAgICAgIGZpbmFsS2V5W19pMiArIHBtcy5sZW5ndGggKyB0b1JhbmRvbS5sZW5ndGhdID0gcG1zW19pMl07CiAgICAgIH0KCiAgICAgIHJldHVybiBmaW5hbEtleTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZ2VuZXJhdGUyNTZiaXRLZXknLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZW5lcmF0ZTI1NmJpdEtleSgpIHsKICAgICAgdmFyIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMzIpOwogICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KTsKCiAgICAgIHJldHVybiBhcnJheTsKICAgIH0KCiAgICAvKioKICAgICogaW1wb3J0cyB0aGUgc2VjcmV0IHRvIHRoZSBITUFDIGZ1bmN0aW9uCiAgICAqIEBwYXJhbSAge2J5dGVBcnJheX0gICBhcnJheUJ1ZmZlciAgICAgYnl0ZXMgdG8gaW1wb3J0IGFzIGtleQogICAgKiBAcmV0dXJuIHtKU09OfSAgICAgICBrZXkgICAgICAgICAgICAgIGtleSByZWFkeSB0byBiZSB1c2VkIGluIHRoZSBITUFDIGNyeXB0b2dyYXBoaWMgZnVuY3Rpb24KICAgICovCgogIH0sIHsKICAgIGtleTogJ19pbXBvcnRITUFDa2V5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfaW1wb3J0SE1BQ2tleShhcnJheUJ1ZmZlcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzLl9kaWdlc3QoYXJyYXlCdWZmZXIpLnRoZW4oZnVuY3Rpb24gKGtleSkgewoKICAgICAgICAgIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCAvL2NhbiBiZSAnandrJyBvciAncmF3JwogICAgICAgICAga2V5LCB7IC8vdGhpcyBpcyB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKICAgICAgICAgICAgbmFtZTogJ0hNQUMnLAogICAgICAgICAgICBoYXNoOiB7IG5hbWU6ICdTSEEtMjU2JyB9LCAvL2NhbiBiZSAnU0hBLTEnLCAnU0hBLTI1NicsICdTSEEtMzg0Jywgb3IgJ1NIQS01MTInCiAgICAgICAgICAgIGxlbmd0aDogMjU2IC8vb3B0aW9uYWwsIGlmIHlvdSB3YW50IHlvdXIga2V5IGxlbmd0aCB0byBkaWZmZXIgZnJvbSB0aGUgaGFzaCBmdW5jdGlvbidzIGJsb2NrIGxlbmd0aAogICAgICAgICAgfSwgdHJ1ZSwgLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQogICAgICAgICAgWydzaWduJywgJ3ZlcmlmeSddIC8vY2FuIGJlIGFueSBjb21iaW5hdGlvbiBvZiAnc2lnbicgYW5kICd2ZXJpZnknCiAgICAgICAgICApLnRoZW4oZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAvL3JldHVybnMgdGhlIHN5bW1ldHJpYyBrZXkKICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY3J5cHRvLV9pbXBvcnRITUFDa2V5Jywga2V5KTsKICAgICAgICAgICAgcmVzb2x2ZShrZXkpOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZGlnZXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGlnZXN0KHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBjcnlwdG8uc3VidGxlLmRpZ2VzdCh7CiAgICAgICAgICBuYW1lOiAnU0hBLTI1NicKICAgICAgICB9LCB2YWx1ZSAvL1RoZSBkYXRhIHlvdSB3YW50IHRvIGhhc2ggYXMgYW4gQXJyYXlCdWZmZXIKICAgICAgICApLnRoZW4oZnVuY3Rpb24gKGhhc2gpIHsKICAgICAgICAgIC8vcmV0dXJucyB0aGUgaGFzaCBhcyBhbiBBcnJheUJ1ZmZlcgogICAgICAgICAgLy9jb25zb2xlLmxvZygnY3J5cHRvLWRpZ2VzdCcsIG5ldyBVaW50OEFycmF5KGhhc2gpKTsKICAgICAgICAgIHJlc29sdmUobmV3IFVpbnQ4QXJyYXkoaGFzaCkpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfaW1wb3J0QUVTa2V5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfaW1wb3J0QUVTa2V5KGFycmF5QnVmZmVyKSB7CiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCAvL2NhbiBiZSAnandrJyBvciAncmF3JwogICAgICAgIGFycmF5QnVmZmVyLCB7IC8vdGhpcyBpcyB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKICAgICAgICAgIG5hbWU6ICdBRVMtQ0JDJwogICAgICAgIH0sIHRydWUsIC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKICAgICAgICBbJ2VuY3J5cHQnLCAnZGVjcnlwdCddIC8vY2FuIGJlICdlbmNyeXB0JywgJ2RlY3J5cHQnLCAnd3JhcEtleScsIG9yICd1bndyYXBLZXknCiAgICAgICAgKS50aGVuKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIC8vcmV0dXJucyB0aGUgc3ltbWV0cmljIGtleQogICAgICAgICAgLy9jb25zb2xlLmxvZygnY3J5cHRvLWltcG9ydEFFU2tleScsIGtleSk7CiAgICAgICAgICByZXNvbHZlKGtleSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcignY3J5cHRvLWltcG9ydEFFU2tleScsIGVycik7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3V0ZjhFbmNvZGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF91dGY4RW5jb2RlKHMpIHsKICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigndXRmLTgnKS5lbmNvZGUocyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3V0ZjhEZWNvZGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF91dGY4RGVjb2RlKHMpIHsKICAgICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUocyk7CiAgICB9CiAgfV0pOwogIHJldHVybiBDcnlwdG87Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IENyeXB0bzsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjMwNywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyfV0sNzM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogVGhlIElkZW50aXR5IERhdGEgTW9kZWwgaXMgdXNlZCB0byBtb2RlbCB0aGUgcmVUSElOSyBVc2VyIGVudGl0eS4gVGhlIElkZW50aXR5IGRhdGEgbW9kZWwgaXMgaGFuZGxlZCBieSBJZGVudGl0eSBNYW5hZ2VtZW50IGZ1bmN0aW9uYWxpdHkuCioKKi8KCnZhciBJZGVudGl0eSA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBJZGVudGl0eShndWlkLCB0eXBlKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBJZGVudGl0eSk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5ndWlkID0gZ3VpZDsKICAgIF90aGlzLnR5cGUgPSB0eXBlOwogICAgX3RoaXMuaWRlbnRpZmllcnNMaXN0ID0ge307CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShJZGVudGl0eSwgW3sKICAgIGtleTogJ2FkZElkZW50aXR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRJZGVudGl0eShpZGVudGlmaWVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBpZGVudGl0eUluZm9ybWF0aW9uID0gewogICAgICAgIGlkQXNzZXJ0aW9uOiAnJywKICAgICAgICBzZXJ2aWNlQWRkcmVzczogJycsCiAgICAgICAgYXV0aGVudGljYXRpb25EYXRhOiAnJywKICAgICAgICBhdXRob3Jpc2F0aW9uRGF0YTogJycsCiAgICAgICAgdXNlclByb2ZpbGU6ICcnCiAgICAgIH07CiAgICAgIF90aGlzLmlkZW50aWZpZXJzTGlzdFtpZGVudGlmaWVyXSA9IGlkZW50aXR5SW5mb3JtYXRpb247CiAgICB9CiAgfSwgewogICAga2V5OiAnYWRkSWRBc3NlcnRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZElkQXNzZXJ0aW9uKGlkZW50aWZpZXIsIGFzc2VydGlvbiwgaWRwLCBzY29wZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG5ld0lkQXNzZXJ0aW9uID0gbmV3IElkQXNzZXJ0aW9uKGFzc2VydGlvbiwgaWRwLCBzY29wZSk7CgogICAgICBfdGhpcy5pZEFzc2VydGlvbkxpc3QucHVzaChuZXdJZEFzc2VydGlvbik7CiAgICB9CiAgfV0pOwogIHJldHVybiBJZGVudGl0eTsKfSgpOwoKdmFyIElkQXNzZXJ0aW9uID0gZnVuY3Rpb24gSWRBc3NlcnRpb24oYXNzZXJ0aW9uLCBpZHAsIHNjb3BlKSB7CiAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgSWRBc3NlcnRpb24pOwoKICB2YXIgX3RoaXMgPSB0aGlzOwoKICBfdGhpcy5hc3NlcnRpb24gPSBhc3NlcnRpb247CiAgX3RoaXMuaWRwID0gaWRwOwogIF90aGlzLnNjb3BlID0gc2NvcGU7Cn07Cgp2YXIgSWRWYWxpZGF0aW9uID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIElkVmFsaWRhdGlvbihpZGVudGl0eSwgY29udGVudHMpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIElkVmFsaWRhdGlvbik7CgogICAgdmFyIF90aGlzID0gdGhpczsKICAgIF90aGlzLmlkZW50aXR5ID0gaWRlbnRpdHk7CiAgICBfdGhpcy5jb250ZW50cyA9IGNvbnRlbnRzOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoSWRWYWxpZGF0aW9uLCBbewogICAga2V5OiAndmFsaWRhdGVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZXMoaWRlbnRpdHksIGNvbnRlbnRzKSB7CiAgICAgIC8vVE9ETyBpbXBsZW1lbnQgdGhlIGxvZ2ljCgogICAgfQogIH1dKTsKICByZXR1cm4gSWRWYWxpZGF0aW9uOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBJZGVudGl0eTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyfV0sNzM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9zdHJpbmdpZnkgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnknKTsKCnZhciBfc3RyaW5naWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmluZ2lmeSk7Cgp2YXIgX3Byb21pc2UgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZScpOwoKdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMuanMnKTsKCnZhciBfSWRlbnRpdHkgPSByZXF1aXJlKCcuL0lkZW50aXR5Jyk7Cgp2YXIgX0lkZW50aXR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0lkZW50aXR5KTsKCnZhciBfQ3J5cHRvID0gcmVxdWlyZSgnLi9DcnlwdG8nKTsKCnZhciBfQ3J5cHRvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NyeXB0byk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCioKKiBUaGUgSWRlbnRpdHkgTW9kdWxlIChJZCBNb2R1bGUpIGlzIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGhhbmRsaW5nIHRoZQoqIHVzZXIgaWRlbnRpdHkgYW5kIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGlzIGlkZW50aXR5IHdpdGggdGhlIEh5cGVydHkgaW5zdGFuY2VzLAoqIGluIG9yZGVyIHRvIG1ha2UgSHlwZXJ0eSBpbnN0YW5jZXMgaWRlbnRpZmlhYmxlLiBUaGUgaWRlbnRpdHkgaW4gdGhlIHJlVEhJTksgcHJvamVjdAoqIGlzIG5vdCBmaXhlZCB0byBhIHVuaXF1ZSBJZGVudGl0eSBTZXJ2aWNlIFByb3ZpZGVyLCBidXQgb2J0YWluZWQgdGhyb3VnaCBzZXZlcmFsCiogZGlmZmVyZW50IElkZW50aXR5IHNvdXJjZXMuIFdpdGggdGhpcyBhcHByb2FjaCwgdGhlIElkIE1vZHVsZSBwcm92aWRlcyB0byB0aGUgdXNlciB0aGUKKiBvcHRpb24gdG8gY2hvb3NlIHRoZSBwcmVmZXJyZWQgbWV0aG9kIGZvciBhdXRoZW50aWNhdGlvbi4KKiBUaGlzIG1vZHVsZSB3aWxsIHRodXMgYWJsZSB0byBzdXBwb3J0IG11bHRpcGxlIElkZW50aXR5IGFjcXVpc2l0aW9uIG1ldGhvZHMsCiogc3VjaCBhcyBPcGVuSUQgY29ubmVjdCAxLjAsIEtlcmJlcm9zIFN5c3RlbSwgb3IgYXV0aGVudGljYXRpb24gdGhyb3VnaCBzbWFydCBjYXJkcy4KKiBGb3IgZXhhbXBsZSwgYSB1c2VyIHdpdGggYSBHb29nbGUgYWNjb3VudCBjYW4gdXNlIHRoZSBHb29nbGUgYXMgYW4gSWRlbnRpdHkgUHJvdmlkZXIgdG8gcHJvdmlkZSBJZGVudGl0eSBUb2tlbnMsCiogIHdoaWNoIGNhbiBiZSB1c2VkIGJ5IHRoZSBJZGVudGl0eSBNb2R1bGUgdG8gYXNzb2NpYXRlIGl0IHdpdGggYSBIeXBlcnR5IGluc3RhbmNlLgoqCiogVGhlIElkZW50aXR5IE1vZHVsZSB1c2VzIGEgbm9kZSBwYWNrYWdlLCB0aGUgSGVsbG9KUywgd2hpY2ggaXMgYSBjbGllbnQtc2lkZSBKYXZhU2NyaXB0IEFQSSBmb3IgYXV0aGVudGljYXRpb24KKiB0aGF0IGZhY2lsaXRhdGVzIHRoZSByZXF1ZXN0cyBmb3IgdGhlIE9wZW5JRCBjb25uZWN0IHByb3RvY29sLiBUaGlzIG1ldGhvZCBhbGxvd3MgZm9yIHNvbWUgYWJzdHJhY3Rpb24KKiB3aGVuIG1ha2luZyByZXF1ZXN0cyBmb3IgZGlmZmVyZW50IElkZW50aXR5IFByb3ZpZGVycywgc3VjaCBhcyBPcGVuSUQgY29ubmVjdCB1c2VkIGJ5IEdvb2dsZSwgRmFjZWJvb2ssIE1pY3Jvc29mdCwgZm9yIGV4YW1wbGUuCioKKiBXaGVuIGEgcmVxdWVzdCBmb3IgYSB1c2VyIGlkZW50aXR5IGlzIG1hZGUgdXNpbmcgdGhlIG1ldGhvZCBsb2dpbldpdGhSUChpZGVudGlmaWVyLCBzY29wZSksCiogdGhpcyBtZXRob2Qgd2lsbCBhbmFseXNlIHRoZSBJZGVudGl0eSBQcm92aWRlciBjaG9zZW4gdG8gb2J0YWluIGFuIGlkZW50aXR5IGFuZCB3aWxsIHVzZSB0aGUgSGVsbG9KUyBub2RlIHBhY2thZ2UKKiB3aXRoIHRoZSBzZWxlY3RlZCBJZGVudGl0eSBQcm92aWRlciBhbmQgaWRlbnRpdHkgc2NvcGUuIEFmdGVyIHRoZSBIZWxsb0pTIHJlcXVlc3QgZm9yIGFuIEFjY2VzcyBUb2tlbgoqIHRvIHRoZSBJZGVudGl0eSBQcm92aWRlcnMsIHRoZSB1c2VyIHdpbGwgYmUgcHJvbXB0ZWQgdG8gYXV0aGVudGljYXRlIHRvd2FyZHMgdGhlIElkZW50aXR5IFByb3ZpZGVyLgoqIFVwb24gcmVjZWl2aW5nIHRoZSBBY2Nlc3MgVG9rZW4sIHRoaXMgdG9rZW4gaXMgdmFsaWRhdGVkIHdpdGggYSBSRVNUZnVsIHdlYiBzZXJ2aWNlIHJlcXVlc3QgdG8gYW4gZW5kcG9pbnQKKiBvbiB0aGUgSWRlbnRpdHkgUHJvdmlkZXIgQXV0aG9yaXphdGlvbiBTZXJ2ZXIsIGFuZCBhZnRlciB0aGUgdmFsaWRhdGlvbiBpcyBkb25lLAoqIGFuIElEIHRva2VuIGlzIG9idGFpbmVkIHdpdGggdGhlIGluZm9ybWF0aW9uIGFjY29yZGluZyB0byB0aGUgc2NvcGUgcmVxdWlyZWQuCiogVGhpcyBJRCB0b2tlbiBpcyB0aGVuIHByZXNlcnZlZCBpbiB0aGlzIG1vZHVsZSB0aGF0IGNhbiBvYnRhaW5lZCB0aHJvdWdoIHRoZSBnZXRJZGVudGl0aWVzKCkKKiBhbmQgaXMgcGFzc2VkIGFzIHJldHVybiB2YWx1ZSBvZiB0aGUgbG9naW5XaXRoUlAgZnVuY3Rpb24uIFRoZSBtZXRob2RzIGdlbmVyYXRlQXNzZXJ0aW9uIGFuZCB2YWxpZGF0ZUFzc2VydGlvbiBoYXZlIG5vdCB5ZXQgYmVlbiBkZXZlbG9wZWQuCioKKi8KCnZhciBJZGVudGl0eU1vZHVsZSA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgKiBUaGlzIGlzIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXNlIHRoZSBJZGVudGl0eSBNb2R1bGUgaXQgZG9lcyBub3QgcmVxdWlyZSBhbnkgaW5wdXQuCiAgKi8KCiAgZnVuY3Rpb24gSWRlbnRpdHlNb2R1bGUocnVudGltZVVSTCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgSWRlbnRpdHlNb2R1bGUpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKCFydW50aW1lVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ3J1bnRpbWVVUkwgaXMgbWlzc2luZy4nKTsKCiAgICBfdGhpcy5fcnVudGltZVVSTCA9IHJ1bnRpbWVVUkw7CiAgICBfdGhpcy5faWRtVVJMID0gcnVudGltZVVSTCArICcvaWRtJzsKCiAgICBfdGhpcy5fZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKF90aGlzLl9ydW50aW1lVVJMKS5kb21haW47CgogICAgLy90byBzdG9yZSBpdGVtcyB3aXRoIHRoaXMgZm9ybWF0OiB7aWRlbnRpdHk6IGlkZW50aXR5VVJMLCB0b2tlbjogdG9rZW5JRH0KICAgIF90aGlzLmlkZW50aXRpZXMgPSBbXTsKICAgIHZhciBuZXdJZGVudGl0eSA9IG5ldyBfSWRlbnRpdHkyLmRlZmF1bHQoJ2d1aWQnLCAnSFVNQU4nKTsKICAgIF90aGlzLmlkZW50aXR5ID0gbmV3SWRlbnRpdHk7CiAgICBfdGhpcy5jcnlwdG8gPSBuZXcgX0NyeXB0bzIuZGVmYXVsdCgpOwoKICAgIC8vc3RvcmVzIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGUgZGF0YU9iamVjdCBhbmQgdGhlIEh5cGVydHkgcmVnaXN0ZXJlZCB3aXRoaW4KICAgIF90aGlzLmRhdGFPYmplY3RzSWRlbnRpdHkgPSB7fTsKCiAgICAvLyBoYXNoVGFibGUgdG8gc3RvcmUgYWxsIHRoZSBjcnlwdG8gaW5mb3JtYXRpb24gYmV0d2VlbiB0d28gaHlwZXJ0aWVzCiAgICBfdGhpcy5jaGF0S2V5cyA9IHt9OwoKICAgIC8vIGhhc2hUYWJsZSB0byBzdG9yZSB0aGUgc3ltbWV0cmljIGtleXMgdG8gYmUgdXNlZCBpbiB0aGUgY2hhdCBncm91cAogICAgX3RoaXMuZGF0YU9iamVjdFNlc3Npb25LZXlzID0ge307CgogICAgLy9mYWlsc2FmZSB0byBlbmFibGUvZGlzYWJsZSBhbGwgdGhlIGNyaXB0b2dyYXBoaWMgZnVuY3Rpb25zCiAgICBfdGhpcy5pc1RvVXNlRW5jcnlwdGlvbiA9IHRydWU7CgogICAgLy8gdmVyaWZpY2F0aW9uIG9mIG5vZGVKUywgYW5kIGluIGNhc2UgaXQgaXMgbm9kZUpTIHRoZW4gZGlzYWJsZSBlbmNyeXB0aW9uCiAgICAvLyBUT0RPIGltcHJvdmUgbGF0ZXIsIHRoaXMgZXhpc3RzIGJlY2F1c2UgdGhlIGNyeXB0byBsaWIgdXNlcyBicm93c2VyIGNyeXB0b2dyYXBoaWMgbWV0aG9kcwogICAgLy9fdGhpcy5pc1RvVXNlRW5jcnlwdGlvbiA9ICh3aW5kb3cpID8gdHJ1ZSA6IGZhbHNlOwogIH0KCiAgLyoqCiAgKiByZXR1cm4gdGhlIG1lc3NhZ2VCdXMgaW4gdGhpcyBSZWdpc3RyeQogICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICovCgoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShJZGVudGl0eU1vZHVsZSwgW3sKICAgIGtleTogJ2dldElkZW50aXRpZXMnLAoKCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gcmV0dXJuIGFsbCB0aGUgaWRlbnRpdGllcyByZWdpc3RlcmVkIHdpdGhpbiBhIHNlc3Npb24gYnkgYSB1c2VyLgogICAgKiBUaGVzZSBpZGVudGl0aWVzIGFyZSByZXR1cm5lZCBpbiBhbiBhcnJheSBjb250YWluaW5nIGEgSlNPTiBwYWNrYWdlIGZvciBlYWNoIHVzZXIgaWRlbnRpdHkuCiAgICAqIEByZXR1cm4ge0FycmF5PElkZW50aXRpZXM+fSAgICAgICAgIElkZW50aXRpZXMKICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SWRlbnRpdGllcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLmlkZW50aXRpZXM7CiAgICB9CgogICAgLyoqCiAgICAqIGdldHMgYWxsIHRoZSBpbmZvcm1hdGlvbiBmcm9tIGEgZ2l2ZW4gdXNlclVSTAogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICB1c2VyVVJMICAgICB1c2VyIHVybAogICAgKiBAcmV0dXJuIHtKU09OfSAgICBpZGVudGl0eSAgICBpZGVudGl0eSBidW5kbGUgZnJvbSB0aGUgdXNlclVSTAogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0SWRlbnRpdHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldElkZW50aXR5KHVzZXJVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGZvciAodmFyIGluZGV4IGluIF90aGlzLmlkZW50aXRpZXMpIHsKCiAgICAgICAgdmFyIGlkZW50aXR5ID0gX3RoaXMuaWRlbnRpdGllc1tpbmRleF07CiAgICAgICAgaWYgKGlkZW50aXR5LmlkZW50aXR5ID09PSB1c2VyVVJMKSB7CiAgICAgICAgICByZXR1cm4gaWRlbnRpdHk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aHJvdyAnaWRlbnRpdHkgbm90IGZvdW5kJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdnZXRJZGVudGl0eU9mSHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SWRlbnRpdHlPZkh5cGVydHkoaHlwZXJ0eVVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIHNwbGl0VVJMID0gaHlwZXJ0eVVSTC5zcGxpdCgnOi8vJyk7CiAgICAgICAgaWYgKHNwbGl0VVJMWzBdICE9PSAnaHlwZXJ0eScpIHsKICAgICAgICAgIF90aGlzLl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3QoaHlwZXJ0eVVSTCkudGhlbihmdW5jdGlvbiAoaHlwZXJ0eVVSTCkgewogICAgICAgICAgICB2YXIgdXNlclVSTCA9IF90aGlzLnJlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihoeXBlcnR5VVJMKTsKICAgICAgICAgICAgaWYgKHVzZXJVUkwpIHsKCiAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggaW4gX3RoaXMuaWRlbnRpdGllcykgewogICAgICAgICAgICAgICAgdmFyIGlkZW50aXR5ID0gX3RoaXMuaWRlbnRpdGllc1tpbmRleF07CiAgICAgICAgICAgICAgICBpZiAoaWRlbnRpdHkuaWRlbnRpdHkgPT09IHVzZXJVUkwpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoaWRlbnRpdHkubWVzc2FnZUluZm8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCdubyBpZGVudGl0eSB3YXMgZm91bmQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciB1c2VyVVJMID0gX3RoaXMucmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGh5cGVydHlVUkwpOwogICAgICAgICAgaWYgKHVzZXJVUkwpIHsKCiAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIF90aGlzLmlkZW50aXRpZXMpIHsKICAgICAgICAgICAgICB2YXIgaWRlbnRpdHkgPSBfdGhpcy5pZGVudGl0aWVzW2luZGV4XTsKICAgICAgICAgICAgICBpZiAoaWRlbnRpdHkuaWRlbnRpdHkgPT09IHVzZXJVUkwpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGlkZW50aXR5Lm1lc3NhZ2VJbmZvKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiByZWplY3QoJ25vIGlkZW50aXR5IHdhcyBmb3VuZC4nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0byByZXR1cm4gYWxsIHRoZSB1c2VycyBVUkxzIHJlZ2lzdGVyZWQgd2l0aGluIGEgc2Vzc2lvbgogICAgKiBUaGVzZSB1c2VycyBVUkxzIGFyZSByZXR1cm5lZCBpbiBhbiBhcnJheSBvZiBzdHJpbmdzLgogICAgKiBAcGFyYW0gIHtCb29sZWFufSAgZW1haWxGb3JtYXQgKE9wdGlvbmFsKSAgIGJvb2xlYW4gdG8gaW5kaWNhdGUgdG8gcmV0dXJuIGluIGVtYWlsIGZvcm1hdAogICAgKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSAgICAgICAgIHVzZXJzCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRVc2Vyc0lEcycsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNlcnNJRHMoZW1haWxGb3JtYXQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHVzZXJzID0gW107CgogICAgICAvL2lmIHJlcXVlc3QgY29tZXMgd2l0aCB0aGUgZW1haWxGb3JtYXQgb3B0aW9uLCB0aGVuIGNvbnZlcnQgdXJsIHRvIGVtYWlsIGZvcm1hdAogICAgICB2YXIgY29udmVydGVyID0gZW1haWxGb3JtYXQgPyBfdXRpbHMuZ2V0VXNlckVtYWlsRnJvbVVSTCA6IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIGluZGV4IGluIF90aGlzLmlkZW50aXRpZXMpIHsKICAgICAgICB2YXIgaWRlbnRpdHkgPSBfdGhpcy5pZGVudGl0aWVzW2luZGV4XTsKICAgICAgICB1c2Vycy5wdXNoKGNvbnZlcnRlcihpZGVudGl0eS5pZGVudGl0eSkpOwogICAgICB9CiAgICAgIHJldHVybiB1c2VyczsKICAgIH0KCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBzZWxlY3RlZCBJZGVudGl0eSB3aXRoaW4gYSBzZXNzaW9uCiAgICAqIEByZXR1cm4ge0lkZW50aXR5fSAgICAgICAgaWRlbnRpdHkgICAgICAgICBpZGVudGl0eQogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0Q3VycmVudElkZW50aXR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDdXJyZW50SWRlbnRpdHkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5jdXJyZW50SWRlbnRpdHk7CiAgICB9CgogICAgLyoqCiAgICAqIEZ1bmN0aW9uIHRvIHNldCB0aGUgY3VycmVudCBJZGVudGl0eSB3aXRoIGEgZ2l2ZW4gSWRlbnRpdHkKICAgICogQHBhcmFtIHtJZGVudGl0eX0gICAgICAgIGlkZW50aXR5ICAgICAgICAgaWRlbnRpdHkKICAgICovCgogIH0sIHsKICAgIGtleTogJ3NldEN1cnJlbnRJZGVudGl0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q3VycmVudElkZW50aXR5KGlkZW50aXR5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLmN1cnJlbnRJZGVudGl0eSA9IGlkZW50aXR5OwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0byByZW1vdmUgdGhlIGFuIGlkZW50aXR5IGZyb20gdGhlIElkZW50aXRpZXMgYXJyYXkKICAgICogQHBhcmFtIHtTdHJpbmd9ICAgIHVzZXJVUkwgICAgICB1c2VyVVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkZWxldGVJZGVudGl0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlSWRlbnRpdHkodXNlclVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZm9yICh2YXIgaWRlbnRpdHkgaW4gX3RoaXMuaWRlbnRpdGllcykgewogICAgICAgIGlmIChfdGhpcy5pZGVudGl0aWVzW2lkZW50aXR5XS5pZGVudGl0eSA9PT0gdXNlclVSTCkgewogICAgICAgICAgX3RoaXMuaWRlbnRpdGllcy5zcGxpY2UoaWRlbnRpdHksIDEpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0aGF0IHJlc29sdmUgYW5kIGNyZWF0ZSB0aGUgZG9tYWluVVJMIGluIGNhc2UgaXQgaXMgcHJvdmlkZWQgb25lLiBJZiBub3QsIHJlc29sdmUgdGhlIGRlZmF1bHQgZG9tYWluVVJMCiAgICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgaWRwRG9tYWluICAgICBpZHBEb21haW4gKE9wdGlvbmFsKQogICAgKi8KCiAgfSwgewogICAga2V5OiAnX3Jlc29sdmVEb21haW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNvbHZlRG9tYWluKGlkcERvbWFpbikgewogICAgICBpZiAoIWlkcERvbWFpbikgewogICAgICAgIHJldHVybiAnZG9tYWluLWlkcDovL2dvb2dsZS5jb20nOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnZG9tYWluLWlkcDovLycgKyBpZHBEb21haW47CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gbG9naW4gYSB1c2VyIHdpdGhpbiB0aGUgc2Vzc2lvbiwgaXQgd2lsbCBzdGFydCB0aGUgcHJvY2VzcyB0byBvYnRhaW4gYW4gSWRlbnRpdHkgZnJvbSBhIHVzZXIsIGluY2x1ZGluZyB0aGUgcmVxdWVzdCBmb3IgYW4gaWRlbnRpdHkgQXNzZXJ0aW9uLiBUaGUgZnVuY3Rpb24gcmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgdG9rZW4gcmVjZWl2ZWQgYnkgdGhlIGlkcFByb3h5LgogICAgKgogICAgKiBAcGFyYW0gIHtJZGVudGlmaWVyfSAgICAgIGlkZW50aWZpZXIgICAgICBpZGVudGlmaWVyCiAgICAqIEBwYXJhbSAge1Njb3BlfSAgICAgICAgICAgc2NvcGUgICAgICAgICAgIHNjb3BlCiAgICAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgICAgUHJvbWlzZSAgICAgICAgIElEVG9rZW4gY29udGFpbmluZyB0aGUgdXNlciBpbmZvcm1hdGlvbgogICAgKi8KCiAgfSwgewogICAga2V5OiAnbG9naW5XaXRoUlAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ2luV2l0aFJQKGlkZW50aWZpZXIsIHNjb3BlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgLy9UT0RPIHJlbW92ZSB0aGlzIHZlcmlmaWNhdGlvbiBhbmQgcmVmYWN0b3IgdGhpcyBwYXJ0CiAgICAgICAgX3RoaXMuY3VycmVudElkZW50aXR5ID0gdW5kZWZpbmVkOwogICAgICAgIF90aGlzLmdldElkZW50aXR5QXNzZXJ0aW9uKCdpZGVudGlmaWVyJywgJ29yaWdpbicsICdoaW50JywgaWRlbnRpZmllcikudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dpbldpdGhSUCcpOwogICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coJ2xvZ2luV2l0aFJQIGVycicpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0aGF0IGZldGNoIGFuIGlkZW50aXR5QXNzZXJ0aW9uIGZyb20gYSB1c2VyLgogICAgKgogICAgKiBAcmV0dXJuIHtJZEFzc2VydGlvbn0gICAgICAgICAgICAgIElkQXNzZXJ0aW9uCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRJZGVudGl0eUFzc2VydGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SWRlbnRpdHlBc3NlcnRpb24oaWRlbnRpZmllciwgb3JpZ2luLCB1c2VybmFtZUhpbnQsIGlkcERvbWFpbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGlmIChfdGhpcy5jdXJyZW50SWRlbnRpdHkgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgLy9UT0RPIHZlcmlmeSB3aGV0aGVyIHRoZSB0b2tlbiBpcyBzdGlsbCB2YWxpZCBvciBub3QuCiAgICAgICAgICAvLyBzaG91bGQgYmUgbmVlZGVkIHRvIG1ha2UgZnVydGhlciByZXF1ZXN0cywgdG8gb2J0YWluIGEgdmFsaWQgdG9rZW4KICAgICAgICAgIHJldHVybiByZXNvbHZlKF90aGlzLmN1cnJlbnRJZGVudGl0eSk7CiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAvL0NIRUNLIHdoZXRoZXIgaXMgYnJvd3NlciBlbnZpcm9ubWVudCBvciBub2RlanMKICAgICAgICAgIC8vaWYgaXQgaXMgYnJvd3NlciwgdGhlbiBjcmVhdGUgYSBmYWtlIGlkZW50aXR5CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHdpbmRvdykgewogICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgICAgdmFyIHB1YmxpY0tleSA9IHZvaWQgMDsKICAgICAgICAgICAgICAgIHZhciB1c2Vya2V5UGFpciA9IHZvaWQgMDsKCiAgICAgICAgICAgICAgICAvL2dlbmVyYXRlcyB0aGUgUlNBIGtleSBwYWlyCiAgICAgICAgICAgICAgICBfdGhpcy5jcnlwdG8uZ2VuZXJhdGVSU0FLZXlQYWlyKCkudGhlbihmdW5jdGlvbiAoa2V5UGFpcikgewoKICAgICAgICAgICAgICAgICAgcHVibGljS2V5ID0gYnRvYShrZXlQYWlyLnB1YmxpYyk7CiAgICAgICAgICAgICAgICAgIHVzZXJrZXlQYWlyID0ga2V5UGFpcjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdlbmVyYXRlQXNzZXJ0aW9uKHB1YmxpY0tleSwgb3JpZ2luLCAnJywgdXNlcmtleVBhaXIsIGlkcERvbWFpbik7CiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdlbmVyYXRlQXNzZXJ0aW9uKHB1YmxpY0tleSwgb3JpZ2luLCB1cmwsIHVzZXJrZXlQYWlyLCBpZHBEb21haW4pOwogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdFcnJvciBvbiBvYnRhaW5pbmcgSWRlbnRpdHknKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRJZGVudGl0eUFzc2VydGlvbiBmb3Igbm9kZWpzJyk7CiAgICAgICAgICAgIHZhciByYW5kb21OdW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCArIDEpOwogICAgICAgICAgICB2YXIgaWRlbnRpdHlCdW5kbGUgPSB7CiAgICAgICAgICAgICAgYXNzZXJ0aW9uOiAnYXNzZXJ0aW9uJywKICAgICAgICAgICAgICBpZHA6ICdub2RlanMnLAogICAgICAgICAgICAgIHVzZXJQcm9maWxlOiB7CiAgICAgICAgICAgICAgICBhdmF0YXI6ICdodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vLVdhQ3JqVk1NVi1RL0FBQUFBQUFBQUFJL0FBQUFBQUFBQUFzLzhPbFZxQ3BTQjljL3Bob3RvLmpwZycsCiAgICAgICAgICAgICAgICBjbjogJ3Rlc3Qgbm9kZWpzJywKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAnbm9kZWpzLScgKyByYW5kb21OdW1iZXIgKyAnQG5vZGVqcy5jb20nLAogICAgICAgICAgICAgICAgdXNlclVSTDogJ3VzZXI6Ly9ub2RlanMuY29tL25vZGVqcy0nICsgcmFuZG9tTnVtYmVyCiAgICAgICAgICAgICAgfSB9OwogICAgICAgICAgICBfdGhpcy5jdXJyZW50SWRlbnRpdHkgPSBpZGVudGl0eUJ1bmRsZTsKICAgICAgICAgICAgX3RoaXMuaWRlbnRpdGllcy5wdXNoKGlkZW50aXR5QnVuZGxlKTsKICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoaWRlbnRpdHlCdW5kbGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFJlcXVlc3RzIHRoZSBJZHBQcm94eSBmcm9tIGEgZ2l2ZW4gRG9tYWluIGZvciBhbiBpZGVudGl0eUFzc2VydGlvbgogICAgKgogICAgKiBAcGFyYW0gIHtET01TdHJpbmd9IGNvbnRlbnRzICAgICBjb250ZW50cwogICAgKiBAcGFyYW0gIHtET01TdHJpbmd9IG9yaWdpbiAgICAgICBvcmlnaW4KICAgICogQHBhcmFtICB7RE9NU3RyaW5nfSB1c2VybmFtZUhpbnQgdXNlcm5hbWVIaW50CiAgICAqIEBwYXJhbSAge0pTT059ICAgICAga2V5UGFpciAgICAgICB1c2VyIGtleVBhaXIKICAgICogQHJldHVybiB7SWRBc3NlcnRpb259ICAgICAgICAgICAgICBJZEFzc2VydGlvbgogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2VuZXJhdGVBc3NlcnRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlQXNzZXJ0aW9uKGNvbnRlbnRzLCBvcmlnaW4sIHVzZXJuYW1lSGludCwga2V5UGFpciwgaWRwRG9tYWluKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBkb21haW4gPSBfdGhpcy5fcmVzb2x2ZURvbWFpbihpZHBEb21haW4pOwogICAgICB2YXIgbWVzc2FnZSA9IHZvaWQgMDsKCiAgICAgIGNvbnNvbGUubG9nKCdnZW5lcmF0ZUFzc2VydGlvbicpOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIG1lc3NhZ2UgPSB7IHR5cGU6ICdleGVjdXRlJywgdG86IGRvbWFpbiwgZnJvbTogX3RoaXMuX2lkbVVSTCwgYm9keTogeyByZXNvdXJjZTogJ2lkZW50aXR5JywgbWV0aG9kOiAnZ2VuZXJhdGVBc3NlcnRpb24nLCBwYXJhbXM6IHsgY29udGVudHM6IGNvbnRlbnRzLCBvcmlnaW46IG9yaWdpbiwgdXNlcm5hbWVIaW50OiB1c2VybmFtZUhpbnQgfSB9IH07CgogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuYm9keS52YWx1ZTsKCiAgICAgICAgICBpZiAocmVzdWx0LmxvZ2luVXJsKSB7CiAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICAgIHZhciB3aW4gPSB3aW5kb3cub3BlbihyZXN1bHQubG9naW5VcmwsICdvcGVuSURyZXF1ZXN0JywgJ3dpZHRoPTgwMCwgaGVpZ2h0PTYwMCcpOwogICAgICAgICAgICAgIGlmICh3aW5kb3cuY29yZG92YSkgewogICAgICAgICAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRzdGFydCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBlLnVybDsKICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSAvXCZjb2RlPSguKykkLy5leGVjKHVybCk7CiAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IC9cJmVycm9yPSguKykkLy5leGVjKHVybCk7CgogICAgICAgICAgICAgICAgICBpZiAoY29kZSB8fCBlcnJvcikgewogICAgICAgICAgICAgICAgICAgIHdpbi5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUodXJsKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBwb2xsVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW4uY2xvc2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgnU29tZSBlcnJvciBvY2N1cmVkIHdoZW4gdHJ5aW5nIHRvIGdldCBpZGVudGl0eS4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChwb2xsVGltZXIpOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW4uZG9jdW1lbnQuVVJMLmluZGV4T2YoJ2lkX3Rva2VuJykgIT09IC0xIHx8IHdpbi5kb2N1bWVudC5VUkwuaW5kZXhPZihsb2NhdGlvbi5vcmlnaW4pICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChwb2xsVGltZXIpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gd2luLmRvY3VtZW50LlVSTDsKCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbi5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHVybCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkoKTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0KSB7CgogICAgICAgICAgICB2YXIgYXNzZXJ0aW9uUGFyc2VkID0gSlNPTi5wYXJzZShhdG9iKHJlc3VsdC5hc3NlcnRpb24pKTsKICAgICAgICAgICAgdmFyIGlkVG9rZW4gPSB2b2lkIDA7CgogICAgICAgICAgICAvL1RPRE8gcmVtb3ZlIHRoZSB2ZXJpZmljYXRpb24gYW5kIHJlbW92ZSB0aGUgdG9rZW5JREpTT04gZnJvbSB0aGUgZ29vZ2xlIGlkcFByb3h5OwogICAgICAgICAgICBpZiAoYXNzZXJ0aW9uUGFyc2VkLnRva2VuSURKU09OKSB7CiAgICAgICAgICAgICAgaWRUb2tlbiA9IGFzc2VydGlvblBhcnNlZC50b2tlbklESlNPTjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZFRva2VuID0gYXNzZXJ0aW9uUGFyc2VkOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaWRUb2tlbikgewogICAgICAgICAgICAgIHJlc3VsdC5pZGVudGl0eSA9ICgwLCBfdXRpbHMuZ2V0VXNlclVSTEZyb21FbWFpbCkoaWRUb2tlbi5lbWFpbCk7CgogICAgICAgICAgICAgIF90aGlzLmlkZW50aXR5LmFkZElkZW50aXR5KHJlc3VsdCk7CgogICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGV4aXN0cyBhbnkgaW5mb1Rva2VuIGluIHRoZSByZXN1bHQgcmVjZWl2ZWQKICAgICAgICAgICAgICB2YXIgaW5mb1Rva2VuID0gcmVzdWx0LmluZm9Ub2tlbiA/IHJlc3VsdC5pbmZvVG9rZW4gOiB7fTsKICAgICAgICAgICAgICB2YXIgdXNlclByb2ZpbGVCdW5kbGUgPSB7IHVzZXJuYW1lOiBpZFRva2VuLmVtYWlsLCBjbjogaWRUb2tlbi5uYW1lLCBhdmF0YXI6IGluZm9Ub2tlbi5waWN0dXJlLCBsb2NhbGU6IGluZm9Ub2tlbi5sb2NhbGUsIHVzZXJVUkw6ICgwLCBfdXRpbHMuZ2V0VXNlclVSTEZyb21FbWFpbCkoaWRUb2tlbi5lbWFpbCkgfTsKCiAgICAgICAgICAgICAgLy9jcmVhdGlvbiBvZiBhIG5ldyBKU09OIHdpdGggdGhlIGlkZW50aXR5IHRvIHNlbmQgdmlhIG1lc3NhZ2VzCiAgICAgICAgICAgICAgdmFyIG5ld0lkZW50aXR5ID0geyB1c2VyUHJvZmlsZTogdXNlclByb2ZpbGVCdW5kbGUsIGlkcDogcmVzdWx0LmlkcC5kb21haW4sIGFzc2VydGlvbjogcmVzdWx0LmFzc2VydGlvbiB9OwogICAgICAgICAgICAgIHJlc3VsdC5tZXNzYWdlSW5mbyA9IG5ld0lkZW50aXR5OwogICAgICAgICAgICAgIHJlc3VsdC5rZXlQYWlyID0ga2V5UGFpcjsKCiAgICAgICAgICAgICAgX3RoaXMuY3VycmVudElkZW50aXR5ID0gbmV3SWRlbnRpdHk7CiAgICAgICAgICAgICAgX3RoaXMuaWRlbnRpdGllcy5wdXNoKHJlc3VsdCk7CiAgICAgICAgICAgICAgcmVzb2x2ZShuZXdJZGVudGl0eSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgnZXJyb3Igb24gb2J0YWluaW5nIGlkZW50aXR5IGluZm9ybWF0aW9uJyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBPVEhFUiBVU0VSJ1MgSURFTlRJVFkKICAgICovCgogICAgLyoqCiAgICAqIFJlcXVlc3RzIHRoZSBJZHBQcm94eSBmcm9tIGEgZ2l2ZW4gRG9tYWluIHRvIHZhbGlkYXRlIGFuIElkZW50aXR5QXNzZXJ0aW9uCiAgICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIHJlc3VsdCBmcm9tIHRoZSB2YWxpZGF0aW9uLgogICAgKiBAcGFyYW0gIHtET01TdHJpbmd9IGFzc2VydGlvbgogICAgKiBAcGFyYW0gIHtET01TdHJpbmd9IG9yaWdpbiAgICAgICBvcmlnaW4KICAgICogQHJldHVybiB7UHJvbWlzZX0gICAgICAgICBQcm9taXNlICAgICAgICAgcHJvbWlzZSB3aXRoIHRoZSByZXN1bHQgZnJvbSB0aGUgdmFsaWRhdGlvbgogICAgKi8KCiAgfSwgewogICAga2V5OiAndmFsaWRhdGVBc3NlcnRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlQXNzZXJ0aW9uKGFzc2VydGlvbiwgb3JpZ2luLCBpZHBEb21haW4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkb21haW4gPSBfdGhpcy5fcmVzb2x2ZURvbWFpbihpZHBEb21haW4pOwoKICAgICAgdmFyIG1lc3NhZ2UgPSB7IHR5cGU6ICdFWEVDVVRFJywgdG86IGRvbWFpbiwgZnJvbTogX3RoaXMuX2lkbVVSTCwgYm9keTogeyByZXNvdXJjZTogJ2lkZW50aXR5JywgbWV0aG9kOiAndmFsaWRhdGVBc3NlcnRpb24nLAogICAgICAgICAgcGFyYW1zOiB7IGFzc2VydGlvbjogYXNzZXJ0aW9uLCBvcmlnaW46IG9yaWdpbiB9IH0gfTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIGlmIChyZXN1bHQuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQuYm9keS52YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QoJ2Vycm9yJywgcmVzdWx0LmJvZHkuY29kZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2VuY3J5cHRNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBlbmNyeXB0TWVzc2FnZShtZXNzYWdlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZygnZW5jcnlwdCBtZXNzYWdlICcpOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIGlzSGFuZFNoYWtlVHlwZSA9IG1lc3NhZ2UudHlwZSA9PT0gJ2hhbmRzaGFrZSc7CgogICAgICAgIC8vaWYgaXMgbm90IHRvIGFwcGx5IGVuY3J5cHRpb24sIHRoZW4gcmV0dXJucyByZXNvbHZlCiAgICAgICAgaWYgKCFfdGhpcy5pc1RvVXNlRW5jcnlwdGlvbiAmJiAhaXNIYW5kU2hha2VUeXBlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZW5jcnlwdGlvbiBkaXNhYmxlZCcpOwogICAgICAgICAgcmV0dXJuIHJlc29sdmUobWVzc2FnZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgc3BsaXRlZFRvVVJMID0gbWVzc2FnZS50by5zcGxpdCgnLycpOwogICAgICAgIHZhciBkYXRhT2JqZWN0VVJMID0gc3BsaXRlZFRvVVJMWzBdICsgJy8vJyArIHNwbGl0ZWRUb1VSTFsyXSArICcvJyArIHNwbGl0ZWRUb1VSTFszXTsKCiAgICAgICAgdmFyIGlzVG9EYXRhT2JqZWN0ID0gKDAsIF91dGlscy5pc0RhdGFPYmplY3RVUkwpKGRhdGFPYmplY3RVUkwpOwogICAgICAgIHZhciBpc0Zyb21IeXBlcnR5ID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKG1lc3NhZ2UuZnJvbSkudHlwZSA9PT0gJ2h5cGVydHknOwogICAgICAgIHZhciBpc1RvSHlwZXJ0eSA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShtZXNzYWdlLnRvKS50eXBlID09PSAnaHlwZXJ0eSc7CgogICAgICAgIGlmIChpc0Zyb21IeXBlcnR5ICYmIGlzVG9IeXBlcnR5KSB7CiAgICAgICAgICB2YXIgdXNlclVSTCA9IF90aGlzLl9yZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIobWVzc2FnZS5mcm9tKTsKICAgICAgICAgIGlmICh1c2VyVVJMKSB7CgogICAgICAgICAgICAvLyBjaGVjayBpZiBleGlzdHMgYW55IGtleXMgYmV0d2VlbiB0d28gdXNlcnMKICAgICAgICAgICAgdmFyIGNoYXRLZXlzID0gX3RoaXMuY2hhdEtleXNbbWVzc2FnZS5mcm9tICsgJzwtPicgKyBtZXNzYWdlLnRvXTsKICAgICAgICAgICAgaWYgKCFjaGF0S2V5cykgewogICAgICAgICAgICAgIGNoYXRLZXlzID0gX3RoaXMuX25ld0NoYXRDcnlwdG8obWVzc2FnZSwgdXNlclVSTCk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZUNoYXRLZXkgZW5jcnlwdCcsIG1lc3NhZ2UuZnJvbSArIG1lc3NhZ2UudG8pOwogICAgICAgICAgICAgIF90aGlzLmNoYXRLZXlzW21lc3NhZ2UuZnJvbSArICc8LT4nICsgbWVzc2FnZS50b10gPSBjaGF0S2V5czsKICAgICAgICAgICAgICBtZXNzYWdlLmJvZHkuaGFuZHNoYWtlUGhhc2UgPSAnc3RhcnRIYW5kU2hha2UnOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY2hhdEtleXMuYXV0aGVudGljYXRlZCAmJiAhaXNIYW5kU2hha2VUeXBlKSB7CiAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgICAvL1RPRE8gYXBwbHkgdGhlIG1lc3NhZ2UgSEFTSCBqdXN0IGxpa2UgaW4gZG9uZSBpbiB0aGUgaGFuZHNoYWtlIHBoYXNlCiAgICAgICAgICAgICAgICB2YXIgaXYgPSBfdGhpcy5jcnlwdG8uZ2VuZXJhdGVJVigpOwogICAgICAgICAgICAgICAgX3RoaXMuY3J5cHRvLmVuY3J5cHRBRVMoY2hhdEtleXMua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksIG1lc3NhZ2UuYm9keS52YWx1ZSwgaXYpLnRoZW4oZnVuY3Rpb24gKGVuY3J5cHRlZFZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHsgaXY6IF90aGlzLmNyeXB0by5lbmNvZGUoaXYpLCB2YWx1ZTogX3RoaXMuY3J5cHRvLmVuY29kZShlbmNyeXB0ZWRWYWx1ZSkgfTsKICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ib2R5LnZhbHVlID0gYnRvYSgoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkodmFsdWUpKTsKICAgICAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vIGlmIGlzIGEgaGFuZHNoYWtlIG1lc3NhZ2UsIGp1c3QgcmVzb2x2ZSBpdAogICAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNIYW5kU2hha2VUeXBlKSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlKTsKCiAgICAgICAgICAgICAgLy8gZWxzZSwgc3RhcnRzIGEgbmV3IGhhbmRzaGFrZSBwcm90b2NvbAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLl9kb0hhbmRTaGFrZVBoYXNlKG1lc3NhZ2UsIGNoYXRLZXlzKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgX3RoaXMuY2hhdEtleXNbbWVzc2FnZS5mcm9tICsgJzwtPicgKyBtZXNzYWdlLnRvXSA9IHZhbHVlLmNoYXRLZXlzOwoKICAgICAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHZhbHVlLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgcmVqZWN0KCdlbmNyeXB0IGhhbmRzaGFrZSBwcm90b2NvbCBwaGFzZSAnKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vaWYgZnJvbSBoeXBlcnR5IHRvIGEgZGF0YU9iamVjdFVSTAogICAgICAgIH0gZWxzZSBpZiAoaXNGcm9tSHlwZXJ0eSAmJiBpc1RvRGF0YU9iamVjdCkgewogICAgICAgICAgY29uc29sZS5sb2coJ2RhdGFPYmplY3QgdmFsdWUgdG8gZW5jcnlwdDogJywgbWVzc2FnZS5ib2R5LnZhbHVlKTsKCiAgICAgICAgICB2YXIgZGF0YU9iamVjdEtleSA9IF90aGlzLmRhdGFPYmplY3RTZXNzaW9uS2V5c1tkYXRhT2JqZWN0VVJMXTsKCiAgICAgICAgICAvL2lmIG5vIGtleSBleGlzdHMsIGNyZWF0ZSBhIG5ldyBvbmUgaWYgaXMgdGhlIHJlcG9ydGVyIG9mIGRhdGFPYmplY3QKICAgICAgICAgIGlmICghZGF0YU9iamVjdEtleSkgewogICAgICAgICAgICB2YXIgaXNIeXBlcnR5UmVwb3J0ZXIgPSBfdGhpcy5yZWdpc3RyeS5nZXRSZXBvcnRlclVSTFN5bmNob25vdXMoZGF0YU9iamVjdFVSTCk7CgogICAgICAgICAgICAvLyBpZiB0aGUgaHlwZXJ0eSBpcyB0aGUgcmVwb3J0ZXIgb2YgdGhlIGRhdGFPYmplY3QgdGhlbiBnZW5lcmF0ZXMgYSBzZXNzaW9uIGtleQogICAgICAgICAgICBpZiAoaXNIeXBlcnR5UmVwb3J0ZXIgJiYgaXNIeXBlcnR5UmVwb3J0ZXIgPT09IG1lc3NhZ2UuZnJvbSkgewoKICAgICAgICAgICAgICB2YXIgc2Vzc2lvbktleSA9IF90aGlzLmNyeXB0by5nZW5lcmF0ZVJhbmRvbSgpOwogICAgICAgICAgICAgIF90aGlzLmRhdGFPYmplY3RTZXNzaW9uS2V5c1tkYXRhT2JqZWN0VVJMXSA9IHsgc2Vzc2lvbktleTogc2Vzc2lvbktleSwgaXNUb0VuY3J5cHQ6IHRydWUgfTsKCiAgICAgICAgICAgICAgZGF0YU9iamVjdEtleSA9IF90aGlzLmRhdGFPYmplY3RTZXNzaW9uS2V5c1tkYXRhT2JqZWN0VVJMXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vY2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHNlc3Npb24ga2V5IGZvciB0aGUgY2hhdCByb29tCiAgICAgICAgICBpZiAoZGF0YU9iamVjdEtleSkgewoKICAgICAgICAgICAgLy8gYW5kIGlmIGlzIHRvIGFwcGx5IGVuY3J5cHRpb24sIGVuY3J5cHQgdGhlIG1lc3NhZ2VzCiAgICAgICAgICAgIGlmIChkYXRhT2JqZWN0S2V5LmlzVG9FbmNyeXB0KSB7CiAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBpdiA9IF90aGlzLmNyeXB0by5nZW5lcmF0ZUlWKCk7CgogICAgICAgICAgICAgICAgX3RoaXMuY3J5cHRvLmVuY3J5cHRBRVMoZGF0YU9iamVjdEtleS5zZXNzaW9uS2V5LCBfdGhpcy5jcnlwdG8uZW5jb2RlKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShtZXNzYWdlLmJvZHkudmFsdWUpKSwgaXYpLnRoZW4oZnVuY3Rpb24gKGVuY3J5cHRlZFZhbHVlKSB7CgogICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBidG9hKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KSh7IHZhbHVlOiBfdGhpcy5jcnlwdG8uZW5jb2RlKGVuY3J5cHRlZFZhbHVlKSwgaXY6IF90aGlzLmNyeXB0by5lbmNvZGUoaXYpIH0pKTsKCiAgICAgICAgICAgICAgICAgIC8vVE9ETyBhcHBseSB0aGUgbWVzc2FnZSBIQVNIIGp1c3QgbGlrZSBpbiBkb25lIGluIHRoZSBoYW5kc2hha2UgcGhhc2UKICAgICAgICAgICAgICAgICAgbWVzc2FnZS5ib2R5LnZhbHVlID0gbmV3VmFsdWU7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyBpZiBub3QsIGp1c3Qgc2VuZCB0aGUgbWVzc2FnZQogICAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gc3RhcnQgdGhlIGdlbmVyYXRpb24gb2YgYSBuZXcgc2Vzc2lvbiBLZXkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgnd3JvbmcgbWVzc2FnZSB0byBkZWNyeXB0Jyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdkZWNyeXB0TWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVjcnlwdE1lc3NhZ2UobWVzc2FnZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coJ2RlY3J5cHQgbWVzc2FnZSAnKTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBpc0hhbmRTaGFrZVR5cGUgPSBtZXNzYWdlLnR5cGUgPT09ICdoYW5kc2hha2UnOwoKICAgICAgICAvL2lmIGlzIG5vdCB0byBhcHBseSBlbmNyeXB0aW9uLCB0aGVuIHJldHVybnMgcmVzb2x2ZQogICAgICAgIGlmICghX3RoaXMuaXNUb1VzZUVuY3J5cHRpb24gJiYgIWlzSGFuZFNoYWtlVHlwZSkgewogICAgICAgICAgY29uc29sZS5sb2coJ2RlY3J5cHRpb24gZGlzYWJsZWQnKTsKICAgICAgICAgIHJldHVybiByZXNvbHZlKG1lc3NhZ2UpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHNwbGl0ZWRUb1VSTCA9IG1lc3NhZ2UudG8uc3BsaXQoJy8nKTsKICAgICAgICB2YXIgZGF0YU9iamVjdFVSTCA9IHNwbGl0ZWRUb1VSTFswXSArICcvLycgKyBzcGxpdGVkVG9VUkxbMl0gKyAnLycgKyBzcGxpdGVkVG9VUkxbM107CgogICAgICAgIHZhciBpc1RvRGF0YU9iamVjdCA9ICgwLCBfdXRpbHMuaXNEYXRhT2JqZWN0VVJMKShkYXRhT2JqZWN0VVJMKTsKICAgICAgICB2YXIgaXNGcm9tSHlwZXJ0eSA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShtZXNzYWdlLmZyb20pLnR5cGUgPT09ICdoeXBlcnR5JzsKICAgICAgICB2YXIgaXNUb0h5cGVydHkgPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkobWVzc2FnZS50bykudHlwZSA9PT0gJ2h5cGVydHknOwoKICAgICAgICAvL2lzIGlzIGh5cGVydHkgdG8gaHlwZXJ0eSBjb21tdW5pY2F0aW9uCiAgICAgICAgaWYgKGlzRnJvbUh5cGVydHkgJiYgaXNUb0h5cGVydHkpIHsKICAgICAgICAgIC8vY29uc29sZS5sb2coJ2RlY3J5cHQgaHlwZXJ0eSB0byBoeXBlcnR5Jyk7CiAgICAgICAgICB2YXIgdXNlclVSTCA9IF90aGlzLl9yZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIobWVzc2FnZS50byk7CiAgICAgICAgICBpZiAodXNlclVSTCkgewoKICAgICAgICAgICAgdmFyIGNoYXRLZXlzID0gX3RoaXMuY2hhdEtleXNbbWVzc2FnZS50byArICc8LT4nICsgbWVzc2FnZS5mcm9tXTsKICAgICAgICAgICAgaWYgKCFjaGF0S2V5cykgewogICAgICAgICAgICAgIGNoYXRLZXlzID0gX3RoaXMuX25ld0NoYXRDcnlwdG8obWVzc2FnZSwgdXNlclVSTCwgJ2RlY3J5cHQnKTsKICAgICAgICAgICAgICBfdGhpcy5jaGF0S2V5c1ttZXNzYWdlLnRvICsgJzwtPicgKyBtZXNzYWdlLmZyb21dID0gY2hhdEtleXM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjaGF0S2V5cy5hdXRoZW50aWNhdGVkICYmICFpc0hhbmRTaGFrZVR5cGUpIHsKICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBKU09OLnBhcnNlKGF0b2IobWVzc2FnZS5ib2R5LnZhbHVlKSk7CiAgICAgICAgICAgICAgdmFyIGl2ID0gX3RoaXMuY3J5cHRvLmRlY29kZSh2YWx1ZS5pdik7CiAgICAgICAgICAgICAgdmFyIGRhdGEgPSBfdGhpcy5jcnlwdG8uZGVjb2RlKHZhbHVlLnZhbHVlKTsKICAgICAgICAgICAgICBfdGhpcy5jcnlwdG8uZGVjcnlwdEFFUyhjaGF0S2V5cy5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXksIGRhdGEsIGl2KS50aGVuKGZ1bmN0aW9uIChkZWNyeXB0ZWREYXRhKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGVjcnlwdGVkIHZhbHVlICcsIGRlY3J5cHRlZERhdGEpOwogICAgICAgICAgICAgICAgbWVzc2FnZS5ib2R5LnZhbHVlID0gZGVjcnlwdGVkRGF0YTsKICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNIYW5kU2hha2VUeXBlKSB7CiAgICAgICAgICAgICAgX3RoaXMuX2RvSGFuZFNoYWtlUGhhc2UobWVzc2FnZSwgY2hhdEtleXMpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CgogICAgICAgICAgICAgICAgLy9pZiBpdCB3YXMgc3RhcnRlZCBieSBkb011dHVhbEF1dGhlbnRpY2F0aW9uIHRoZW4gZW5kcyB0aGUgcHJvdG9jb2wKICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ2hhbmRTaGFrZUVuZCcpIHsKICAgICAgICAgICAgICAgICAgcmVqZWN0KCdkZWNyeXB0IGhhbmRzaGFrZSBwcm90b2NvbCBwaGFzZSAnKTsKCiAgICAgICAgICAgICAgICAgIC8vIGlmIHdhcyBzdGFydGVkIGJ5IGEgbWVzc2FnZSwgdGhlbiByZXNlbmQgdGhhdCBtZXNzYWdlCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5jaGF0S2V5c1ttZXNzYWdlLnRvICsgJzwtPicgKyBtZXNzYWdlLmZyb21dID0gdmFsdWUuY2hhdEtleXM7CiAgICAgICAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHZhbHVlLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICByZWplY3QoJ2RlY3J5cHQgaGFuZHNoYWtlIHByb3RvY29sIHBoYXNlICcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlamVjdCgnd3JvbmcgbWVzc2FnZSBkbyBkZWNyeXB0Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgnZXJyb3Igb24gZGVjcnlwdCBtZXNzYWdlJyk7CiAgICAgICAgICB9CgogICAgICAgICAgLy9pZiBmcm9tIGh5cGVydHkgdG8gYSBkYXRhT2JqZWN0VVJMCiAgICAgICAgfSBlbHNlIGlmIChpc0Zyb21IeXBlcnR5ICYmIGlzVG9EYXRhT2JqZWN0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZGF0YU9iamVjdCB2YWx1ZSB0byBkZWNyeXB0OiAnLCBtZXNzYWdlLmJvZHkpOwoKICAgICAgICAgIHZhciBkYXRhT2JqZWN0S2V5ID0gX3RoaXMuZGF0YU9iamVjdFNlc3Npb25LZXlzW2RhdGFPYmplY3RVUkxdOwoKICAgICAgICAgIGlmIChkYXRhT2JqZWN0S2V5KSB7CgogICAgICAgICAgICAvL2NoZWNrIGlmIGlzIHRvIGFwcGx5IGVuY3J5cHRpb24KICAgICAgICAgICAgaWYgKGRhdGFPYmplY3RLZXkuaXNUb0VuY3J5cHQpIHsKICAgICAgICAgICAgICB2YXIgcGFyc2VkVmFsdWUgPSBKU09OLnBhcnNlKGF0b2IobWVzc2FnZS5ib2R5LnZhbHVlKSk7CiAgICAgICAgICAgICAgdmFyIF9pdiA9IF90aGlzLmNyeXB0by5kZWNvZGUocGFyc2VkVmFsdWUuaXYpOwogICAgICAgICAgICAgIHZhciBlbmNyeXB0ZWRWYWx1ZSA9IF90aGlzLmNyeXB0by5kZWNvZGUocGFyc2VkVmFsdWUudmFsdWUpOwoKICAgICAgICAgICAgICBfdGhpcy5jcnlwdG8uZGVjcnlwdEFFUyhkYXRhT2JqZWN0S2V5LnNlc3Npb25LZXksIGVuY3J5cHRlZFZhbHVlLCBfaXYpLnRoZW4oZnVuY3Rpb24gKGRlY3J5cHRlZFZhbHVlKSB7CiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkVmFsdWUgPSBKU09OLnBhcnNlKGF0b2IoZGVjcnlwdGVkVmFsdWUpKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWNyeXB0ZWQgVmFsdWUsJywgcGFyc2VkVmFsdWUpOwogICAgICAgICAgICAgICAgbWVzc2FnZS5ib2R5LnZhbHVlID0gcGFyc2VkVmFsdWU7CiAgICAgICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2UpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvL2lmIG5vdCwganVzdCByZXR1cm4gdGhlIG1lc3NhZ2UKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2UpOwoKICAgICAgICAgICAgLy9yZWplY3QoJ25vIHNlc3Npb25LZXkgZm9yIGNoYXQgcm9vbSBmb3VuZCcpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QoJ3dyb25nIG1lc3NhZ2UgdG8gZGVjcnlwdCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZG9NdXR1YWxBdXRoZW50aWNhdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZG9NdXR1YWxBdXRoZW50aWNhdGlvbihzZW5kZXIsIHJlY2VpdmVyKSB7CiAgICAgIGNvbnNvbGUubG9nKCdkb011dHVhbEF1dGhlbnRpY2F0aW9uOiAnLCBzZW5kZXIsIHJlY2VpdmVyKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGRhdGFPYmplY3RVUkwgPSB2b2lkIDA7CgogICAgICAvLyBjaGVjayBpZiB0aGUgc2VuZGVyIGlzIGEgZGF0YU9iamVjdCBhbmQgaWYgc28gc3RvcmVzIHRoYXQgdmFsdWUKICAgICAgdmFyIHJlcG9ydGVyVVJMID0gX3RoaXMucmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKHNlbmRlcik7CiAgICAgIGlmIChyZXBvcnRlclVSTCkgewogICAgICAgIGRhdGFPYmplY3RVUkwgPSBzZW5kZXI7CiAgICAgICAgc2VuZGVyID0gcmVwb3J0ZXJVUkw7CiAgICAgIH0KCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdG86IHJlY2VpdmVyLAogICAgICAgIGZyb206IHNlbmRlciwKICAgICAgICBjYWxsYmFjazogdW5kZWZpbmVkLAogICAgICAgIGJvZHk6IHsgaGFuZHNoYWtlUGhhc2U6ICdzdGFydEhhbmRTaGFrZScsIGlnbm9yZTogJ2lnbm9yZU1lc3NhZ2UnIH0KICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBpZiAoIXNlbmRlciB8fCAhcmVjZWl2ZXIpIHsKICAgICAgICAgIHJldHVybiByZWplY3QoJ3NlbmRlciBvciByZWNlaXZlciBtaXNzaW5nIG9uIGRvTXV0dWFsQXV0aGVudGljYXRpb24nKTsKICAgICAgICB9CgogICAgICAgIHZhciBjaGF0S2V5cyA9IF90aGlzLmNoYXRLZXlzW3NlbmRlciArICc8LT4nICsgcmVjZWl2ZXJdOwogICAgICAgIHZhciB1c2VyVVJMID0gX3RoaXMuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihzZW5kZXIpOwoKICAgICAgICBpZiAodXNlclVSTCkgewoKICAgICAgICAgIGlmICghY2hhdEtleXMpIHsKICAgICAgICAgICAgLy8gY2FsbGJhY2sgdG8gcmVzb2x2ZSB3aGVuIGZpbmlzaCB0aGUgbXV0dWFsIGF1dGhlbnRpY2F0aW9uCiAgICAgICAgICAgIHZhciByZXNvbHZlZCA9IGZ1bmN0aW9uIHJlc29sdmVkKHZhbHVlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbGxiYWNrIHZhbHVlOicsIHZhbHVlKTsKICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgbXNnLmNhbGxiYWNrID0gcmVzb2x2ZWQ7CiAgICAgICAgICAgIG1zZy5kYXRhT2JqZWN0VVJMID0gZGF0YU9iamVjdFVSTDsKCiAgICAgICAgICAgIGNoYXRLZXlzID0gX3RoaXMuX25ld0NoYXRDcnlwdG8obXNnLCB1c2VyVVJMKTsKICAgICAgICAgICAgX3RoaXMuY2hhdEtleXNbc2VuZGVyICsgJzwtPicgKyByZWNlaXZlcl0gPSBjaGF0S2V5czsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY2hhdEtleXMuYXV0aGVudGljYXRlZCkgewoKICAgICAgICAgICAgdmFyIHN0YXJ0U2Vzc2lvbktleUV4Y2hhbmdlID0gewogICAgICAgICAgICAgIHRvOiBzZW5kZXIsCiAgICAgICAgICAgICAgZnJvbTogcmVjZWl2ZXIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY2hhdEtleXMuZGF0YU9iamVjdFVSTCA9IGRhdGFPYmplY3RVUkw7CiAgICAgICAgICAgIF90aGlzLl9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5KHN0YXJ0U2Vzc2lvbktleUV4Y2hhbmdlLCBjaGF0S2V5cykudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKCiAgICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodmFsdWUubWVzc2FnZSk7CiAgICAgICAgICAgICAgcmVzb2x2ZSgnZXhjaGFuZ2Ugb2YgY2hhdCBzZXNzaW9uS2V5IGluaXRpYXRlZCcpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICBfdGhpcy5fZG9IYW5kU2hha2VQaGFzZShtc2csIGNoYXRLZXlzKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqZWN0KCdlcnJvciBvbiBkb011dHVhbEF1dGhlbnRpY2F0aW9uJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZG9IYW5kU2hha2VQaGFzZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RvSGFuZFNoYWtlUGhhc2UobWVzc2FnZSwgY2hhdEtleXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vY29uc29sZS5sb2coJ2hhbmRzaGFrZVR5cGUnKTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgaGFuZHNoYWtlVHlwZSA9IG1lc3NhZ2UuYm9keS5oYW5kc2hha2VQaGFzZTsKICAgICAgICB2YXIgaXYgPSB2b2lkIDA7CiAgICAgICAgdmFyIHZhbHVlID0ge307CgogICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBzd2l0Y2ggKGhhbmRzaGFrZVR5cGUpIHsKCiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0SGFuZFNoYWtlJzoKICAgICAgICAgICAgICBjaGF0S2V5cy5rZXlzLmZyb21SYW5kb20gPSBfdGhpcy5jcnlwdG8uZ2VuZXJhdGVSYW5kb20oKTsKCiAgICAgICAgICAgICAgdmFyIHN0YXJ0SGFuZFNoYWtlTXNnID0gewogICAgICAgICAgICAgICAgdHlwZTogJ2hhbmRzaGFrZScsCiAgICAgICAgICAgICAgICB0bzogbWVzc2FnZS50bywKICAgICAgICAgICAgICAgIGZyb206IG1lc3NhZ2UuZnJvbSwKICAgICAgICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgICAgICAgaGFuZHNoYWtlUGhhc2U6ICdzZW5kZXJIZWxsbycsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdGhpcy5jcnlwdG8uZW5jb2RlKGNoYXRLZXlzLmtleXMuZnJvbVJhbmRvbSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGNoYXRLZXlzLmhhbmRzaGFrZUhpc3Rvcnkuc2VuZGVySGVsbG8gPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChzdGFydEhhbmRTaGFrZU1zZywgdW5kZWZpbmVkLCBjaGF0S2V5cy5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyk7CgogICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdhcyB0aGUgZW5jcnlwdCBmdW5jdGlvbiBvciB0aGUgbXV0dWFsIGF1dGhlbnRpY2F0aW9uIHRoYXQgcmVxdWVzdCB0aGUKICAgICAgICAgICAgICAvLyBzdGFydCBvZiB0aGUgaGFuZFNoYWtlUGhhc2UuCiAgICAgICAgICAgICAgaWYgKGNoYXRLZXlzLmluaXRpYWxNZXNzYWdlKSB7CiAgICAgICAgICAgICAgICByZXNvbHZlKHsgbWVzc2FnZTogc3RhcnRIYW5kU2hha2VNc2csIGNoYXRLZXlzOiBjaGF0S2V5cyB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMuY2hhdEtleXNbbWVzc2FnZS5mcm9tICsgJzwtPicgKyBtZXNzYWdlLnRvXSA9IGNoYXRLZXlzOwogICAgICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uoc3RhcnRIYW5kU2hha2VNc2cpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3NlbmRlckhlbGxvJzoKCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmRlckhlbGxvJyk7CiAgICAgICAgICAgICAgY2hhdEtleXMuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJIZWxsbyA9IF90aGlzLl9maWx0ZXJNZXNzYWdlVG9IYXNoKG1lc3NhZ2UpOwogICAgICAgICAgICAgIGNoYXRLZXlzLmtleXMuZnJvbVJhbmRvbSA9IF90aGlzLmNyeXB0by5kZWNvZGUobWVzc2FnZS5ib2R5LnZhbHVlKTsKICAgICAgICAgICAgICBjaGF0S2V5cy5rZXlzLnRvUmFuZG9tID0gX3RoaXMuY3J5cHRvLmdlbmVyYXRlUmFuZG9tKCk7CgogICAgICAgICAgICAgIHZhciBzZW5kZXJIZWxsb01zZyA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdoYW5kc2hha2UnLAogICAgICAgICAgICAgICAgdG86IG1lc3NhZ2UuZnJvbSwKICAgICAgICAgICAgICAgIGZyb206IG1lc3NhZ2UudG8sCiAgICAgICAgICAgICAgICBib2R5OiB7CiAgICAgICAgICAgICAgICAgIGhhbmRzaGFrZVBoYXNlOiAncmVjZWl2ZXJIZWxsbycsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdGhpcy5jcnlwdG8uZW5jb2RlKGNoYXRLZXlzLmtleXMudG9SYW5kb20pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBjaGF0S2V5cy5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVySGVsbG8gPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChzZW5kZXJIZWxsb01zZywgdW5kZWZpbmVkLCBjaGF0S2V5cy5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyk7CiAgICAgICAgICAgICAgcmVzb2x2ZSh7IG1lc3NhZ2U6IHNlbmRlckhlbGxvTXNnLCBjaGF0S2V5czogY2hhdEtleXMgfSk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyZWNlaXZlckhlbGxvJzoKCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlY2VpdmVySGVsbG8nKTsKICAgICAgICAgICAgICBjaGF0S2V5cy5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVySGVsbG8gPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChtZXNzYWdlKTsKCiAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGVBc3NlcnRpb24obWVzc2FnZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbikudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKCiAgICAgICAgICAgICAgICB2YXIgcmVjZWl2ZXJQdWJsaWNLZXkgPSBfdGhpcy5jcnlwdG8uZGVjb2RlKHZhbHVlLmNvbnRlbnRzLm5vbmNlKTsKICAgICAgICAgICAgICAgIHZhciBwcmVtYXN0ZXJTZWNyZXQgPSBfdGhpcy5jcnlwdG8uZ2VuZXJhdGVQTVMoKTsKICAgICAgICAgICAgICAgIHZhciB0b1JhbmRvbSA9IG1lc3NhZ2UuYm9keS52YWx1ZTsKICAgICAgICAgICAgICAgIGNoYXRLZXlzLmh5cGVydHlUby5hc3NlcnRpb24gPSBtZXNzYWdlLmJvZHkuaWRlbnRpdHkuYXNzZXJ0aW9uOwogICAgICAgICAgICAgICAgY2hhdEtleXMuaHlwZXJ0eVRvLnB1YmxpY0tleSA9IHJlY2VpdmVyUHVibGljS2V5OwogICAgICAgICAgICAgICAgY2hhdEtleXMuaHlwZXJ0eVRvLnVzZXJJRCA9IHZhbHVlLmNvbnRlbnRzLmVtYWlsOwogICAgICAgICAgICAgICAgY2hhdEtleXMua2V5cy50b1JhbmRvbSA9IF90aGlzLmNyeXB0by5kZWNvZGUodG9SYW5kb20pOwogICAgICAgICAgICAgICAgY2hhdEtleXMua2V5cy5wcmVtYXN0ZXJLZXkgPSBwcmVtYXN0ZXJTZWNyZXQ7CgogICAgICAgICAgICAgICAgdmFyIGNvbmNhdEtleSA9IF90aGlzLmNyeXB0by5jb25jYXRQTVN3aXRoUmFuZG9tcyhwcmVtYXN0ZXJTZWNyZXQsIGNoYXRLZXlzLmtleXMudG9SYW5kb20sIGNoYXRLZXlzLmtleXMuZnJvbVJhbmRvbSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyeXB0by5nZW5lcmF0ZU1hc3RlclNlY3JldChjb25jYXRLZXksICdtZXNzYWdlSGlzdG9yaWMnICsgY2hhdEtleXMua2V5cy50b1JhbmRvbSArIGNoYXRLZXlzLmtleXMuZnJvbVJhbmRvbSk7CgogICAgICAgICAgICAgICAgLy9nZW5lcmF0ZSB0aGUgbWFzdGVyIGtleQogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKG1hc3RlcktleSkgewogICAgICAgICAgICAgICAgY2hhdEtleXMua2V5cy5tYXN0ZXJLZXkgPSBtYXN0ZXJLZXk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyeXB0by5nZW5lcmF0ZUtleXMobWFzdGVyS2V5LCAna2V5IGV4cGFuc2lvbicgKyBjaGF0S2V5cy5rZXlzLnRvUmFuZG9tICsgY2hhdEtleXMua2V5cy5mcm9tUmFuZG9tKTsKCiAgICAgICAgICAgICAgICAvL2dlbmVyYXRlIHRoZSBzeW1tZXRyaWMgYW5kIGhhc2gga2V5cwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGtleXMpIHsKCiAgICAgICAgICAgICAgICBjaGF0S2V5cy5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXkgPSBuZXcgVWludDhBcnJheShrZXlzWzBdKTsKICAgICAgICAgICAgICAgIGNoYXRLZXlzLmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5ID0gbmV3IFVpbnQ4QXJyYXkoa2V5c1sxXSk7CiAgICAgICAgICAgICAgICBjaGF0S2V5cy5rZXlzLmh5cGVydHlUb0hhc2hLZXkgPSBuZXcgVWludDhBcnJheShrZXlzWzJdKTsKICAgICAgICAgICAgICAgIGNoYXRLZXlzLmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5ID0gbmV3IFVpbnQ4QXJyYXkoa2V5c1szXSk7CiAgICAgICAgICAgICAgICBpdiA9IF90aGlzLmNyeXB0by5nZW5lcmF0ZUlWKCk7CiAgICAgICAgICAgICAgICB2YWx1ZS5pdiA9IF90aGlzLmNyeXB0by5lbmNvZGUoaXYpOwoKICAgICAgICAgICAgICAgIC8vIGhhc2ggdGhlIHZhbHVlIGFuZCB0aGUgaXYKICAgICAgICAgICAgICAgIC8vIFRPRE8gYWRkIHRoZSBtZXNzYWdlIGZpZWxkcyB0byB0aGUgaGFzaAogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyeXB0by5oYXNoSE1BQyhjaGF0S2V5cy5rZXlzLmh5cGVydHlGcm9tSGFzaEtleSwgJ29rJyArIGl2KTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChoYXNoKSB7CiAgICAgICAgICAgICAgICB2YWx1ZS5oYXNoID0gX3RoaXMuY3J5cHRvLmVuY29kZShoYXNoKTsKCiAgICAgICAgICAgICAgICAvL2VuY3J5cHQgdGhlIGRhdGEKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcnlwdG8uZW5jcnlwdEFFUyhjaGF0S2V5cy5rZXlzLmh5cGVydHlGcm9tU2Vzc2lvbktleSwgJ29rJywgaXYpOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGVuY3J5cHRlZERhdGEpIHsKICAgICAgICAgICAgICAgIHZhbHVlLnN5bWV0cmljRW5jcnlwdGlvbiA9IF90aGlzLmNyeXB0by5lbmNvZGUoZW5jcnlwdGVkRGF0YSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyeXB0by5lbmNyeXB0UlNBKGNoYXRLZXlzLmh5cGVydHlUby5wdWJsaWNLZXksIGNoYXRLZXlzLmtleXMucHJlbWFzdGVyS2V5KTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChlbmNyeXB0ZWRWYWx1ZSkgewoKICAgICAgICAgICAgICAgIHZhbHVlLmFzc3ltZXRyaWNFbmNyeXB0aW9uID0gX3RoaXMuY3J5cHRvLmVuY29kZShlbmNyeXB0ZWRWYWx1ZSk7CgogICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VTdHJ1Y3R1cmUgPSB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdoYW5kc2hha2UnLAogICAgICAgICAgICAgICAgICB0bzogbWVzc2FnZS5mcm9tLAogICAgICAgICAgICAgICAgICBmcm9tOiBtZXNzYWdlLnRvLAogICAgICAgICAgICAgICAgICBib2R5OiB7CiAgICAgICAgICAgICAgICAgICAgaGFuZHNoYWtlUGhhc2U6ICdzZW5kZXJDZXJ0aWZpY2F0ZScKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZVRvSGFzaCA9IF90aGlzLl9maWx0ZXJNZXNzYWdlVG9IYXNoKG1lc3NhZ2VTdHJ1Y3R1cmUsIGNoYXRLZXlzLmtleXMucHJlbWFzdGVyS2V5LCBjaGF0S2V5cy5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyeXB0by5zaWduUlNBKGNoYXRLZXlzLmh5cGVydHlGcm9tLnByaXZhdGVLZXksICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShjaGF0S2V5cy5oYW5kc2hha2VIaXN0b3J5KSArICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShtZXNzYWdlVG9IYXNoKSk7CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc2lnbmF0dXJlKSB7CgogICAgICAgICAgICAgICAgdmFsdWUuc2lnbmF0dXJlID0gX3RoaXMuY3J5cHRvLmVuY29kZShzaWduYXR1cmUpOwoKICAgICAgICAgICAgICAgIHZhciByZWNlaXZlckhlbGxvTXNnID0gewogICAgICAgICAgICAgICAgICB0eXBlOiAnaGFuZHNoYWtlJywKICAgICAgICAgICAgICAgICAgdG86IG1lc3NhZ2UuZnJvbSwKICAgICAgICAgICAgICAgICAgZnJvbTogbWVzc2FnZS50bywKICAgICAgICAgICAgICAgICAgYm9keTogewogICAgICAgICAgICAgICAgICAgIGhhbmRzaGFrZVBoYXNlOiAnc2VuZGVyQ2VydGlmaWNhdGUnLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBidG9hKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KSh2YWx1ZSkpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjaGF0S2V5cy5oYW5kc2hha2VIaXN0b3J5LnNlbmRlckNlcnRpZmljYXRlID0gX3RoaXMuX2ZpbHRlck1lc3NhZ2VUb0hhc2gocmVjZWl2ZXJIZWxsb01zZywgJ29rJyArIGl2LCBjaGF0S2V5cy5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyk7CgogICAgICAgICAgICAgICAgcmVzb2x2ZSh7IG1lc3NhZ2U6IHJlY2VpdmVySGVsbG9Nc2csIGNoYXRLZXlzOiBjaGF0S2V5cyB9KTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnc2VuZGVyQ2VydGlmaWNhdGUnOgoKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VuZGVyQ2VydGlmaWNhdGUnKTsKICAgICAgICAgICAgICB2YXIgcmVjZWl2ZWRWYWx1ZSA9IEpTT04ucGFyc2UoYXRvYihtZXNzYWdlLmJvZHkudmFsdWUpKTsKCiAgICAgICAgICAgICAgX3RoaXMudmFsaWRhdGVBc3NlcnRpb24obWVzc2FnZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbikudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIC8vVE9ETyB2ZXJpZnkgdGhlIHNpZ25hdHVyZQogICAgICAgICAgICAgICAgdmFyIGVuY3J5cHRlZFBNUyA9IF90aGlzLmNyeXB0by5kZWNvZGUocmVjZWl2ZWRWYWx1ZS5hc3N5bWV0cmljRW5jcnlwdGlvbik7CiAgICAgICAgICAgICAgICB2YXIgc2VuZGVyUHVibGljS2V5ID0gX3RoaXMuY3J5cHRvLmRlY29kZSh2YWx1ZS5jb250ZW50cy5ub25jZSk7CiAgICAgICAgICAgICAgICBjaGF0S2V5cy5oeXBlcnR5VG8uYXNzZXJ0aW9uID0gbWVzc2FnZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbjsKICAgICAgICAgICAgICAgIGNoYXRLZXlzLmh5cGVydHlUby5wdWJsaWNLZXkgPSBzZW5kZXJQdWJsaWNLZXk7CiAgICAgICAgICAgICAgICBjaGF0S2V5cy5oeXBlcnR5VG8udXNlcklEID0gdmFsdWUuY29udGVudHMuZW1haWw7CgogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyeXB0by5kZWNyeXB0UlNBKGNoYXRLZXlzLmh5cGVydHlGcm9tLnByaXZhdGVLZXksIGVuY3J5cHRlZFBNUyk7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICByZWplY3QoJ0Vycm9yIGR1cmluZyBhdXRoZW50aWNhdGlvbiBvZiBpZGVudGl0eScpOwoKICAgICAgICAgICAgICAgIC8vb2J0YWluIHRoZSBQcmVtYXN0ZXJLZXkgdXNpbmcgdGhlIHByaXZhdGUga2V5CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocG1zKSB7CgogICAgICAgICAgICAgICAgY2hhdEtleXMua2V5cy5wcmVtYXN0ZXJLZXkgPSBuZXcgVWludDhBcnJheShwbXMpOwoKICAgICAgICAgICAgICAgIHZhciBzaWduYXR1cmUgPSBfdGhpcy5jcnlwdG8uZGVjb2RlKHJlY2VpdmVkVmFsdWUuc2lnbmF0dXJlKTsKCiAgICAgICAgICAgICAgICB2YXIgcmVjZWl2ZWRtc2dUb0hhc2ggPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChtZXNzYWdlLCBjaGF0S2V5cy5rZXlzLnByZW1hc3RlcktleSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyeXB0by52ZXJpZnlSU0EoY2hhdEtleXMuaHlwZXJ0eVRvLnB1YmxpY0tleSwgKDAsIF9zdHJpbmdpZnkyLmRlZmF1bHQpKGNoYXRLZXlzLmhhbmRzaGFrZUhpc3RvcnkpICsgKDAsIF9zdHJpbmdpZnkyLmRlZmF1bHQpKHJlY2VpdmVkbXNnVG9IYXNoKSwgc2lnbmF0dXJlKTsKCiAgICAgICAgICAgICAgICAvLyB2YWxpZGF0ZXMgdGhlIHNpZ25hdHVyZSByZWNlaXZlZAogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNpZ25WYWxpZGF0aW9uUmVzdWx0KSB7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NpZ25hdHVyZSB2YWxpZGF0aW9uIHJlc3VsdCAnLCBzaWduVmFsaWRhdGlvblJlc3VsdCk7CiAgICAgICAgICAgICAgICB2YXIgY29uY2F0S2V5ID0gX3RoaXMuY3J5cHRvLmNvbmNhdFBNU3dpdGhSYW5kb21zKGNoYXRLZXlzLmtleXMucHJlbWFzdGVyS2V5LCBjaGF0S2V5cy5rZXlzLnRvUmFuZG9tLCBjaGF0S2V5cy5rZXlzLmZyb21SYW5kb20pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcnlwdG8uZ2VuZXJhdGVNYXN0ZXJTZWNyZXQoY29uY2F0S2V5LCAnbWVzc2FnZUhpc3RvcmljJyArIGNoYXRLZXlzLmtleXMudG9SYW5kb20gKyBjaGF0S2V5cy5rZXlzLmZyb21SYW5kb20pOwoKICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlcyB0aGUgbWFzdGVyIGtleXMgZnJvbSB0aGUgUHJlbWFzdGVyIGtleSBhbmQgdGhlIHJhbmRvbXMKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChtYXN0ZXJLZXkpIHsKICAgICAgICAgICAgICAgIGNoYXRLZXlzLmtleXMubWFzdGVyS2V5ID0gbWFzdGVyS2V5OwoKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcnlwdG8uZ2VuZXJhdGVLZXlzKG1hc3RlcktleSwgJ2tleSBleHBhbnNpb24nICsgY2hhdEtleXMua2V5cy50b1JhbmRvbSArIGNoYXRLZXlzLmtleXMuZnJvbVJhbmRvbSk7CgogICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGVzIHRoZSBzeW1tZXRyaWMga2V5cyB0byBiZSB1c2VkIGluIHRoZSBzeW1tZXRyaWMgZW5jcnlwdGlvbgogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGtleXMpIHsKICAgICAgICAgICAgICAgIGNoYXRLZXlzLmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5ID0gbmV3IFVpbnQ4QXJyYXkoa2V5c1swXSk7CiAgICAgICAgICAgICAgICBjaGF0S2V5cy5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXkgPSBuZXcgVWludDhBcnJheShrZXlzWzFdKTsKICAgICAgICAgICAgICAgIGNoYXRLZXlzLmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5ID0gbmV3IFVpbnQ4QXJyYXkoa2V5c1syXSk7CiAgICAgICAgICAgICAgICBjaGF0S2V5cy5rZXlzLmh5cGVydHlUb0hhc2hLZXkgPSBuZXcgVWludDhBcnJheShrZXlzWzNdKTsKICAgICAgICAgICAgICAgIGl2ID0gX3RoaXMuY3J5cHRvLmRlY29kZShyZWNlaXZlZFZhbHVlLml2KTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gX3RoaXMuY3J5cHRvLmRlY29kZShyZWNlaXZlZFZhbHVlLnN5bWV0cmljRW5jcnlwdGlvbik7CgogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyeXB0by5kZWNyeXB0QUVTKGNoYXRLZXlzLmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSwgZGF0YSwgaXYpOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRlY3J5cHRlZERhdGEpIHsKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2RlY3J5cHRlZERhdGEnLCBkZWNyeXB0ZWREYXRhKTsKCiAgICAgICAgICAgICAgICBjaGF0S2V5cy5oYW5kc2hha2VIaXN0b3J5LnNlbmRlckNlcnRpZmljYXRlID0gX3RoaXMuX2ZpbHRlck1lc3NhZ2VUb0hhc2gobWVzc2FnZSwgZGVjcnlwdGVkRGF0YSArIGl2KTsKCiAgICAgICAgICAgICAgICB2YXIgaGFzaFJlY2VpdmVkID0gX3RoaXMuY3J5cHRvLmRlY29kZShyZWNlaXZlZFZhbHVlLmhhc2gpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcnlwdG8udmVyaWZ5SE1BQyhjaGF0S2V5cy5rZXlzLmh5cGVydHlUb0hhc2hLZXksIGRlY3J5cHRlZERhdGEgKyBpdiwgaGFzaFJlY2VpdmVkKTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2ZXJpZmllZEhhc2gpIHsKCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdyZXN1bHQgb2YgaGFzaCB2ZXJpZmljYXRpb24gJywgdmVyaWZpZWRIYXNoKTsKCiAgICAgICAgICAgICAgICBpdiA9IF90aGlzLmNyeXB0by5nZW5lcmF0ZUlWKCk7CiAgICAgICAgICAgICAgICB2YWx1ZS5pdiA9IF90aGlzLmNyeXB0by5lbmNvZGUoaXYpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcnlwdG8uZW5jcnlwdEFFUyhjaGF0S2V5cy5rZXlzLmh5cGVydHlGcm9tU2Vzc2lvbktleSwgJ29rIScsIGl2KTsKCiAgICAgICAgICAgICAgICAvLyBUT0RPIGFwcGx5IGhhc2gsIGp1c3QgbGlrZSBpcyBkb25lIGluIHRoZSBwcmV2aW91cyBzdGVwIG1lc3NhZ2UKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChlbmNyeXB0ZWRWYWx1ZSkgewogICAgICAgICAgICAgICAgdmFsdWUudmFsdWUgPSBfdGhpcy5jcnlwdG8uZW5jb2RlKGVuY3J5cHRlZFZhbHVlKTsKICAgICAgICAgICAgICAgIHZhciByZWNlaXZlckZpbmlzaGVkTWVzc2FnZSA9IHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2hhbmRzaGFrZScsCiAgICAgICAgICAgICAgICAgIHRvOiBtZXNzYWdlLmZyb20sCiAgICAgICAgICAgICAgICAgIGZyb206IG1lc3NhZ2UudG8sCiAgICAgICAgICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgICAgICAgICBoYW5kc2hha2VQaGFzZTogJ3JlY2VpdmVyRmluaXNoZWRNZXNzYWdlJywKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnRvYSgoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkodmFsdWUpKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGNoYXRLZXlzLmhhbmRzaGFrZUhpc3RvcnkucmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UgPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChyZWNlaXZlckZpbmlzaGVkTWVzc2FnZSwgJ29rIScgKyBpdiwgY2hhdEtleXMuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pOwogICAgICAgICAgICAgICAgY2hhdEtleXMuYXV0aGVudGljYXRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICByZXNvbHZlKHsgbWVzc2FnZTogcmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UsIGNoYXRLZXlzOiBjaGF0S2V5cyB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3JlY2VpdmVyRmluaXNoZWRNZXNzYWdlJzoKCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlY2VpdmVyRmluaXNoZWRNZXNzYWdlJyk7CiAgICAgICAgICAgICAgY2hhdEtleXMuYXV0aGVudGljYXRlZCA9IHRydWU7CgogICAgICAgICAgICAgIHZhbHVlID0gSlNPTi5wYXJzZShhdG9iKG1lc3NhZ2UuYm9keS52YWx1ZSkpOwoKICAgICAgICAgICAgICBpdiA9IF90aGlzLmNyeXB0by5kZWNvZGUodmFsdWUuaXYpOwogICAgICAgICAgICAgIHZhciBkYXRhID0gX3RoaXMuY3J5cHRvLmRlY29kZSh2YWx1ZS52YWx1ZSk7CgogICAgICAgICAgICAgIF90aGlzLmNyeXB0by5kZWNyeXB0QUVTKGNoYXRLZXlzLmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSwgZGF0YSwgaXYpLnRoZW4oZnVuY3Rpb24gKGRlY3J5cHRlZERhdGEpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWNyeXB0ZWREYXRhJywgZGVjcnlwdGVkRGF0YSk7CiAgICAgICAgICAgICAgICBjaGF0S2V5cy5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVyRmluaXNoZWRNZXNzYWdlID0gX3RoaXMuX2ZpbHRlck1lc3NhZ2VUb0hhc2gobWVzc2FnZSwgZGVjcnlwdGVkRGF0YSArIGl2KTsKCiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSB3YXMgYW4gaW5pdGlhbCBtZXNzYWdlIHRoYXQgd2FzIGJsb2NrZWQgYW5kIHNlbmQgaXQKICAgICAgICAgICAgICAgIGlmIChjaGF0S2V5cy5pbml0aWFsTWVzc2FnZSkgewogICAgICAgICAgICAgICAgICB2YXIgaW5pdGlhbE1lc3NhZ2UgPSB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NyZWF0ZScsCiAgICAgICAgICAgICAgICAgICAgdG86IG1lc3NhZ2UuZnJvbSwKICAgICAgICAgICAgICAgICAgICBmcm9tOiBtZXNzYWdlLnRvLAogICAgICAgICAgICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjaGF0S2V5cy5pbml0aWFsTWVzc2FnZS5ib2R5LnZhbHVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgLy8gVE9ETyBhcHBseSBoYXNoLCBqdXN0IGxpa2UgaXMgZG9uZSBpbiB0aGUgcHJldmlvdXMgc3RlcCBtZXNzYWdlCgogICAgICAgICAgICAgICAgICByZXNvbHZlKHsgbWVzc2FnZTogaW5pdGlhbE1lc3NhZ2UsIGNoYXRLZXlzOiBjaGF0S2V5cyB9KTsKCiAgICAgICAgICAgICAgICAgIC8vc2VuZHMgdGhlIHNlc3Npb25LZXkgdG8gdGhlIHN1YnNjcmliZXIgaHlwZXJ0eQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuX3NlbmRSZXBvcnRlclNlc3Npb25LZXkobWVzc2FnZSwgY2hhdEtleXMpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAncmVwb3J0ZXJTZXNzaW9uS2V5JzoKCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcG9ydGVyU2Vzc2lvbktleScpOwoKICAgICAgICAgICAgICB2YXIgdmFsdWVJVmFuZEhhc2ggPSBKU09OLnBhcnNlKGF0b2IobWVzc2FnZS5ib2R5LnZhbHVlKSk7CiAgICAgICAgICAgICAgdmFyIGhhc2ggPSBfdGhpcy5jcnlwdG8uZGVjb2RlKHZhbHVlSVZhbmRIYXNoLmhhc2gpOwogICAgICAgICAgICAgIGl2ID0gX3RoaXMuY3J5cHRvLmRlY29kZSh2YWx1ZUlWYW5kSGFzaC5pdik7CiAgICAgICAgICAgICAgdmFyIGVuY3J5cHRlZFZhbHVlID0gX3RoaXMuY3J5cHRvLmRlY29kZSh2YWx1ZUlWYW5kSGFzaC52YWx1ZSk7CiAgICAgICAgICAgICAgdmFyIHBhcnNlZFZhbHVlID0gdm9pZCAwOwogICAgICAgICAgICAgIHZhciBzZXNzaW9uS2V5ID0gdm9pZCAwOwogICAgICAgICAgICAgIHZhciBkYXRhT2JqZWN0VVJMID0gdm9pZCAwOwogICAgICAgICAgICAgIHZhciByZWNlaXZlckFja25vd2xlZGdlTXNnID0gdm9pZCAwOwoKICAgICAgICAgICAgICBfdGhpcy5jcnlwdG8uZGVjcnlwdEFFUyhjaGF0S2V5cy5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXksIGVuY3J5cHRlZFZhbHVlLCBpdikudGhlbihmdW5jdGlvbiAoZGVjcnlwdGVkVmFsdWUpIHsKCiAgICAgICAgICAgICAgICBwYXJzZWRWYWx1ZSA9IEpTT04ucGFyc2UoZGVjcnlwdGVkVmFsdWUpOwogICAgICAgICAgICAgICAgc2Vzc2lvbktleSA9IF90aGlzLmNyeXB0by5kZWNvZGUocGFyc2VkVmFsdWUudmFsdWUpOwogICAgICAgICAgICAgICAgZGF0YU9iamVjdFVSTCA9IHBhcnNlZFZhbHVlLmRhdGFPYmplY3RVUkw7CgogICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VUb0hhc2ggPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChtZXNzYWdlLCBkZWNyeXB0ZWRWYWx1ZSArIGl2KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY3J5cHRvLnZlcmlmeUhNQUMoY2hhdEtleXMua2V5cy5oeXBlcnR5VG9IYXNoS2V5LCBtZXNzYWdlVG9IYXNoLCBoYXNoKTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChoYXNoUmVzdWx0KSB7CgogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnaGFzaCBzdWNjZXNzZnVsbHkgdmFsaWRhdGVkICcsIGhhc2hSZXN1bHQpOwoKICAgICAgICAgICAgICAgIF90aGlzLmRhdGFPYmplY3RTZXNzaW9uS2V5c1tkYXRhT2JqZWN0VVJMXSA9IHsgc2Vzc2lvbktleTogc2Vzc2lvbktleSwgaXNUb0VuY3J5cHQ6IHRydWUgfTsKCiAgICAgICAgICAgICAgICBpdiA9IF90aGlzLmNyeXB0by5nZW5lcmF0ZUlWKCk7CiAgICAgICAgICAgICAgICB2YWx1ZS5pdiA9IF90aGlzLmNyeXB0by5lbmNvZGUoaXYpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcnlwdG8uZW5jcnlwdEFFUyhjaGF0S2V5cy5rZXlzLmh5cGVydHlGcm9tU2Vzc2lvbktleSwgJ29rISEnLCBpdik7CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZW5jcnlwdGVkVmFsdWUpIHsKCiAgICAgICAgICAgICAgICByZWNlaXZlckFja25vd2xlZGdlTXNnID0gewogICAgICAgICAgICAgICAgICB0eXBlOiAnaGFuZHNoYWtlJywKICAgICAgICAgICAgICAgICAgdG86IG1lc3NhZ2UuZnJvbSwKICAgICAgICAgICAgICAgICAgZnJvbTogbWVzc2FnZS50bywKICAgICAgICAgICAgICAgICAgYm9keTogewogICAgICAgICAgICAgICAgICAgIGhhbmRzaGFrZVBoYXNlOiAncmVjZWl2ZXJBY2tub3dsZWRnZScKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YWx1ZS52YWx1ZSA9IF90aGlzLmNyeXB0by5lbmNvZGUoZW5jcnlwdGVkVmFsdWUpOwogICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VUb0hhc2ggPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChyZWNlaXZlckFja25vd2xlZGdlTXNnLCAnb2shIScgKyBpdiwgY2hhdEtleXMuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcnlwdG8uaGFzaEhNQUMoY2hhdEtleXMua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksIG1lc3NhZ2VUb0hhc2gpOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGhhc2hlZE1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIHZhciBmaW5hbFZhbHVlID0gYnRvYSgoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkoeyB2YWx1ZTogdmFsdWUudmFsdWUsIGhhc2g6IF90aGlzLmNyeXB0by5lbmNvZGUoaGFzaGVkTWVzc2FnZSksIGl2OiB2YWx1ZS5pdiB9KSk7CgogICAgICAgICAgICAgICAgcmVjZWl2ZXJBY2tub3dsZWRnZU1zZy5ib2R5LnZhbHVlID0gZmluYWxWYWx1ZTsKICAgICAgICAgICAgICAgIHJlc29sdmUoeyBtZXNzYWdlOiByZWNlaXZlckFja25vd2xlZGdlTXNnLCBjaGF0S2V5czogY2hhdEtleXMgfSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyZWNlaXZlckFja25vd2xlZGdlJzoKCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlY2VpdmVyQWNrbm93bGVkZ2UnKTsKCiAgICAgICAgICAgICAgdmFyIHJlY2VpdmVkdmFsdWVJVmFuZEhhc2ggPSBKU09OLnBhcnNlKGF0b2IobWVzc2FnZS5ib2R5LnZhbHVlKSk7CiAgICAgICAgICAgICAgdmFyIHJlY2VpdmVkSGFzaCA9IF90aGlzLmNyeXB0by5kZWNvZGUocmVjZWl2ZWR2YWx1ZUlWYW5kSGFzaC5oYXNoKTsKICAgICAgICAgICAgICBpdiA9IF90aGlzLmNyeXB0by5kZWNvZGUocmVjZWl2ZWR2YWx1ZUlWYW5kSGFzaC5pdik7CiAgICAgICAgICAgICAgdmFyIHJlY2VpdmVkRW5jcnlwdGVkVmFsdWUgPSBfdGhpcy5jcnlwdG8uZGVjb2RlKHJlY2VpdmVkdmFsdWVJVmFuZEhhc2gudmFsdWUpOwoKICAgICAgICAgICAgICBfdGhpcy5jcnlwdG8uZGVjcnlwdEFFUyhjaGF0S2V5cy5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXksIHJlY2VpdmVkRW5jcnlwdGVkVmFsdWUsIGl2KS50aGVuKGZ1bmN0aW9uIChkZWNyeXB0ZWRWYWx1ZSkgewoKICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZE1lc3NhZ2UgPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChtZXNzYWdlLCBkZWNyeXB0ZWRWYWx1ZSArIGl2KTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5jcnlwdG8udmVyaWZ5SE1BQyhjaGF0S2V5cy5rZXlzLmh5cGVydHlUb0hhc2hLZXksIGZpbHRlcmVkTWVzc2FnZSwgcmVjZWl2ZWRIYXNoKTsKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChoYXNoUmVzdWx0KSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGFzaFJlc3VsdCAnLCBoYXNoUmVzdWx0KTsKICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGNoYXRLZXlzLmNhbGxiYWNrOwoKICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgICAgICAgICBjYWxsYmFjaygnaGFuZFNoYWtlRW5kJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXNvbHZlKCdoYW5kU2hha2VFbmQnKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZFJlcG9ydGVyU2Vzc2lvbktleShtZXNzYWdlLCBjaGF0S2V5cykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgc2Vzc2lvbktleUJ1bmRsZSA9IF90aGlzLmRhdGFPYmplY3RTZXNzaW9uS2V5c1tjaGF0S2V5cy5kYXRhT2JqZWN0VVJMXTsKICAgICAgdmFyIHJlcG9ydGVyU2Vzc2lvbktleU1zZyA9IHZvaWQgMDsKICAgICAgdmFyIHZhbHVlVG9FbmNyeXB0ID0gdm9pZCAwOwogICAgICB2YXIgc2Vzc2lvbktleSA9IHZvaWQgMDsKICAgICAgdmFyIGl2ID0gdm9pZCAwOwogICAgICB2YXIgdmFsdWUgPSB7fTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvL2lmIHRoZXJlIGlzIG5vdCB5ZXQgYSBzZXNzaW9uIEtleSwgZ2VuZXJhdGVzIGEgbmV3IG9uZQogICAgICAgIGlmICghc2Vzc2lvbktleUJ1bmRsZSkgewogICAgICAgICAgc2Vzc2lvbktleSA9IF90aGlzLmNyeXB0by5nZW5lcmF0ZVJhbmRvbSgpOwogICAgICAgICAgX3RoaXMuZGF0YU9iamVjdFNlc3Npb25LZXlzW2NoYXRLZXlzLmRhdGFPYmplY3RVUkxdID0geyBzZXNzaW9uS2V5OiBzZXNzaW9uS2V5LCBpc1RvRW5jcnlwdDogdHJ1ZSB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZXNzaW9uS2V5ID0gc2Vzc2lvbktleUJ1bmRsZS5zZXNzaW9uS2V5OwogICAgICAgIH0KCiAgICAgICAgdmFsdWVUb0VuY3J5cHQgPSAoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkoeyB2YWx1ZTogX3RoaXMuY3J5cHRvLmVuY29kZShzZXNzaW9uS2V5KSwgZGF0YU9iamVjdFVSTDogY2hhdEtleXMuZGF0YU9iamVjdFVSTCB9KTsKCiAgICAgICAgaXYgPSBfdGhpcy5jcnlwdG8uZ2VuZXJhdGVJVigpOwogICAgICAgIHZhbHVlLml2ID0gX3RoaXMuY3J5cHRvLmVuY29kZShpdik7CiAgICAgICAgX3RoaXMuY3J5cHRvLmVuY3J5cHRBRVMoY2hhdEtleXMua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksIHZhbHVlVG9FbmNyeXB0LCBpdikudGhlbihmdW5jdGlvbiAoZW5jcnlwdGVkVmFsdWUpIHsKCiAgICAgICAgICByZXBvcnRlclNlc3Npb25LZXlNc2cgPSB7CiAgICAgICAgICAgIHR5cGU6ICdoYW5kc2hha2UnLAogICAgICAgICAgICB0bzogbWVzc2FnZS5mcm9tLAogICAgICAgICAgICBmcm9tOiBtZXNzYWdlLnRvLAogICAgICAgICAgICBib2R5OiB7CiAgICAgICAgICAgICAgaGFuZHNoYWtlUGhhc2U6ICdyZXBvcnRlclNlc3Npb25LZXknLAogICAgICAgICAgICAgIHZhbHVlOiBfdGhpcy5jcnlwdG8uZW5jb2RlKGVuY3J5cHRlZFZhbHVlKQogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciBmaWx0ZXJlZE1lc3NhZ2UgPSBfdGhpcy5fZmlsdGVyTWVzc2FnZVRvSGFzaChyZXBvcnRlclNlc3Npb25LZXlNc2csIHZhbHVlVG9FbmNyeXB0ICsgaXYsIGNoYXRLZXlzLmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKTsKCiAgICAgICAgICByZXR1cm4gX3RoaXMuY3J5cHRvLmhhc2hITUFDKGNoYXRLZXlzLmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5LCBmaWx0ZXJlZE1lc3NhZ2UpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGhhc2hlZE1lc3NhZ2UpIHsKCiAgICAgICAgICB2YXIgdmFsdWVXaXRoSGFzaCA9IGJ0b2EoKDAsIF9zdHJpbmdpZnkyLmRlZmF1bHQpKHsgdmFsdWU6IHJlcG9ydGVyU2Vzc2lvbktleU1zZy5ib2R5LnZhbHVlLCBoYXNoOiBfdGhpcy5jcnlwdG8uZW5jb2RlKGhhc2hlZE1lc3NhZ2UpLCBpdjogdmFsdWUuaXYgfSkpOwoKICAgICAgICAgIHJlcG9ydGVyU2Vzc2lvbktleU1zZy5ib2R5LnZhbHVlID0gdmFsdWVXaXRoSGFzaDsKICAgICAgICAgIHJlc29sdmUoeyBtZXNzYWdlOiByZXBvcnRlclNlc3Npb25LZXlNc2csIGNoYXRLZXlzOiBjaGF0S2V5cyB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIHJldHVybnMgdGhlIHJlcG9ydGVyIGFzc29jaWF0ZWQgdG8gdGhlIGRhdGFPYmplY3QgVVJMCiAgICAqIEBwYXJhbSAgIHtTdHJpbmd9ICAgZGF0YU9iamVjdFVSTCAgICAgICAgIGRhdGFPYmplY3QgdXJsCiAgICAqIEByZXR1cm4gICB7U3RyaW5nfSAgcmVwb3J0ZXIgICAgICAgICAgICAgIGRhdGFPYmplY3QgdXJsIHJlcG9ydGVyCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0KGRhdGFPYmplY3RVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgc3BsaXRlZFVSTCA9IGRhdGFPYmplY3RVUkwuc3BsaXQoJy8nKTsKICAgICAgICB2YXIgZmluYWxVUkwgPSBzcGxpdGVkVVJMWzBdICsgJy8vJyArIHNwbGl0ZWRVUkxbMl0gKyAnLycgKyBzcGxpdGVkVVJMWzNdOwoKICAgICAgICAvLyBjaGVjayBpZiBpcyB0aGUgY3JlYXRvciBvZiB0aGUgaHlwZXJ0eQogICAgICAgIHZhciByZXBvcnRlclVSTCA9IF90aGlzLnJlZ2lzdHJ5LmdldFJlcG9ydGVyVVJMU3luY2hvbm91cyhmaW5hbFVSTCk7CgogICAgICAgIGlmIChyZXBvcnRlclVSTCkgewogICAgICAgICAgcmVzb2x2ZShyZXBvcnRlclVSTCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYW4gYXNzb2NpYXRpb24gZnJvbSBhbiBoeXBlcnR5VVJMIHRvIHRoZSBkYXRhT2JqZWN0CiAgICAgICAgICB2YXIgc3RvcmVkUmVwb3J0ZXJVUkwgPSBfdGhpcy5kYXRhT2JqZWN0c0lkZW50aXR5W2ZpbmFsVVJMXTsKCiAgICAgICAgICBpZiAoc3RvcmVkUmVwb3J0ZXJVUkwpIHsKICAgICAgICAgICAgcmVzb2x2ZShzdG9yZWRSZXBvcnRlclVSTCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBpcyBhbnkgaHlwZXJ0eSB0aGF0IHN1YnNjcmliZWQgdGhlIGRhdGFPYmplY3RVUkwKICAgICAgICAgICAgdmFyIHN1YnNjcmliZXJIeXBlcnR5ID0gX3RoaXMucmVnaXN0cnkuZ2V0RGF0YU9iamVjdFN1YnNjcmliZXJIeXBlcnR5KGRhdGFPYmplY3RVUkwpOwoKICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJIeXBlcnR5KSB7CiAgICAgICAgICAgICAgcmVzb2x2ZShzdWJzY3JpYmVySHlwZXJ0eSk7CiAgICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgIC8vIHNlYXJjaCBpbiBkb21haW4gcmVnaXN0cnkgZm9yIHRoZSBoeXBlcnR5IGFzc29jaWF0ZWQgdG8gdGhlIGRhdGFPYmplY3QKICAgICAgICAgICAgICAvLyBzZWFyY2ggaW4gY2FzZSBpcyBhIHN1YnNjcmliZXIgd2hvIHdhbnRzIHRvIGtub3cgdGhlIHJlcG9ydGVyCiAgICAgICAgICAgICAgX3RoaXMucmVnaXN0cnkuZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMKGZpbmFsVVJMLCBzcGxpdGVkVVJMWzJdKS50aGVuKGZ1bmN0aW9uIChkYXRhT2JqZWN0KSB7CiAgICAgICAgICAgICAgICBfdGhpcy5kYXRhT2JqZWN0c0lkZW50aXR5W2ZpbmFsVVJMXSA9IGRhdGFPYmplY3QucmVwb3J0ZXI7CiAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGFPYmplY3QucmVwb3J0ZXIpOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogZmlsdGVyIHRoZSBtZXNzYWdlcyB0byBoYXNoLCBieSByZW1vdmluZyBzb21lIGZpZWxkcyBub3QgZ2VuZXJhdGVkIGJ5IHRoZSBydW50aW1lIGNvcmUKICAgICogQHBhcmFtIHtNZXNzYWdlfSAgbWVzc2FnZSAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UKICAgICogQHBhcmFtIHtTdHJpbmd9ICBkZWNyeXB0ZWRWYWx1ZSAoT3B0aW9uYWwpICAgIHZhbHVlIGZyb20gYm9keS52YWx1ZSBpbiBjYXNlIGl0IG9yaWdpbmFsbHkgY29tZXMgZW5jcnlwdGVkCiAgICAqIEBwYXJhbSB7SlNPTn0gIGlkZW50aXR5KE9wdGlvbmFsKSAgICBhZGQgdGhlIGh5cGVydHkgaWRlbnRpdHkgYXNzb2NpYXRlZCBpbiBjYXNlIGlzIG5vdCBhZGRlZCB0byB0aGUgaW5pdGlhbCBtZXNzYWdlCiAgICAqIEByZXR1cm4ge01lc3NhZ2V9ICBuZXcgbWVzc2FnZSBmaWx0ZXJlZAogICAgKi8KCiAgfSwgewogICAga2V5OiAnX2ZpbHRlck1lc3NhZ2VUb0hhc2gnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXJNZXNzYWdlVG9IYXNoKG1lc3NhZ2UsIGRlY3J5cHRlZFZhbHVlLCBpZGVudGl0eSkgewoKICAgICAgcmV0dXJuIHsKICAgICAgICB0eXBlOiBtZXNzYWdlLnR5cGUsCiAgICAgICAgZnJvbTogbWVzc2FnZS5mcm9tLAogICAgICAgIHRvOiBtZXNzYWdlLnRvLAogICAgICAgIGJvZHk6IHsKICAgICAgICAgIGlkZW50aXR5OiBpZGVudGl0eSB8fCBtZXNzYWdlLmJvZHkuaWRlbnRpdHksCiAgICAgICAgICB2YWx1ZTogZGVjcnlwdGVkVmFsdWUgfHwgbWVzc2FnZS5ib2R5LnZhbHVlLAogICAgICAgICAgaGFuZHNoYWtlUGhhc2U6IG1lc3NhZ2UuYm9keS5oYW5kc2hha2VQaGFzZQogICAgICAgIH0KICAgICAgfTsKICAgIH0KCiAgICAvKioKICAgICogZ2VuZXJhdGVzIHRoZSBpbml0aWFsIHN0cnVjdHVyZSBmb3IgdGhlIGtleXMgYmV0d2VlbiB0d28gdXNlcnMKICAgICogQHBhcmFtIHtKU09OfSAgICBtZXNzYWdlICAgICAgICAgICAgICBpbml0aWFsIG1lc3NhZ2UgdGhhdCB0cmlnZ2VycyB0aGUgbXV0dWFsIGF1dGhlbnRpY2F0aW9uCiAgICAqIEBwYXJhbSB7U3RyaW5nfSAgdXNlclVSTCAgICAgICAgICAgICAgdXNlclVSTAogICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlY2VpdmVyKE9wdGlvbmFsKSAgaW5kaWNhdGVzIGlmIGlzIHRoZSBzZW5kZXIgb3IgdGhlIHJlY2VpdmVyIHRoYXQgY3JlYXRlcyBhIG5ldyBjaGF0IGNyeXB0bwogICAgKiBAcmV0dXJuIHtKU09OfSBuZXdDaGF0Q3J5cHRvICBuZXcgSlNPTiBzdHJ1Y3R1cmUgZm9yIHRoZSBjaGF0IGNyeXB0bwogICAgKi8KCiAgfSwgewogICAga2V5OiAnX25ld0NoYXRDcnlwdG8nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9uZXdDaGF0Q3J5cHRvKG1lc3NhZ2UsIHVzZXJVUkwsIHJlY2VpdmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2NoZWNrIHdoZXRoZXIgaXMgdGhlIHNlbmRlciBvciB0aGUgcmVjZWl2ZXIgdG8gY3JlYXRlIGEgbmV3IGNoYXRDcnlwdG8KICAgICAgLy90byBtYW50YWluIGNvbnNpc3RlbmN5IG9uIHRoZSBrZXlzIGlmIHRoZSByZWNlaXZlciBjcmVhdGUgYSBuZXcgY2hhdENyeXB0bywKICAgICAgLy90aGVuIGludmVydCB0aGUgZmllbGRzCiAgICAgIHZhciBmcm9tID0gcmVjZWl2ZXIgPyBtZXNzYWdlLnRvIDogbWVzc2FnZS5mcm9tOwogICAgICB2YXIgdG8gPSByZWNlaXZlciA/IG1lc3NhZ2UuZnJvbSA6IG1lc3NhZ2UudG87CgogICAgICB2YXIgdXNlckluZm8gPSBfdGhpcy5nZXRJZGVudGl0eSh1c2VyVVJMKTsKCiAgICAgIHZhciBuZXdDaGF0Q3J5cHRvID0gewogICAgICAgIGh5cGVydHlGcm9tOiB7CiAgICAgICAgICBoeXBlcnR5OiBmcm9tLAogICAgICAgICAgdXNlcklEOiB1c2VySW5mby5tZXNzYWdlSW5mby51c2VyUHJvZmlsZS51c2VybmFtZSwKICAgICAgICAgIHByaXZhdGVLZXk6IHVzZXJJbmZvLmtleVBhaXIucHJpdmF0ZSwKICAgICAgICAgIHB1YmxpY0tleTogdXNlckluZm8ua2V5UGFpci5wdWJsaWMsCiAgICAgICAgICBhc3NlcnRpb246IHVzZXJJbmZvLmFzc2VydGlvbiwKICAgICAgICAgIG1lc3NhZ2VJbmZvOiB1c2VySW5mby5tZXNzYWdlSW5mbwogICAgICAgIH0sCiAgICAgICAgaHlwZXJ0eVRvOiB7CiAgICAgICAgICBoeXBlcnR5OiB0bywKICAgICAgICAgIHVzZXJJRDogdW5kZWZpbmVkLAogICAgICAgICAgcHVibGljS2V5OiB1bmRlZmluZWQsCiAgICAgICAgICBhc3NlcnRpb246IHVuZGVmaW5lZAogICAgICAgIH0sCiAgICAgICAga2V5czogewogICAgICAgICAgaHlwZXJ0eVRvU2Vzc2lvbktleTogdW5kZWZpbmVkLAogICAgICAgICAgaHlwZXJ0eUZyb21TZXNzaW9uS2V5OiB1bmRlZmluZWQsCiAgICAgICAgICBoeXBlcnR5VG9IYXNoS2V5OiB1bmRlZmluZWQsCiAgICAgICAgICBoeXBlcnR5RnJvbUhhc2hLZXk6IHVuZGVmaW5lZCwKICAgICAgICAgIHRvUmFuZG9tOiB1bmRlZmluZWQsCiAgICAgICAgICBmcm9tUmFuZG9tOiB1bmRlZmluZWQsCiAgICAgICAgICBwcmVtYXN0ZXJLZXk6IHVuZGVmaW5lZCwKICAgICAgICAgIG1hc3RlcktleTogdW5kZWZpbmVkCiAgICAgICAgfSwKICAgICAgICBoYW5kc2hha2VIaXN0b3J5OiB7CiAgICAgICAgICBzZW5kZXJIZWxsbzogdW5kZWZpbmVkLAogICAgICAgICAgcmVjZWl2ZXJIZWxsbzogdW5kZWZpbmVkLAogICAgICAgICAgc2VuZGVyQ2VydGlmaWNhdGU6IHVuZGVmaW5lZCwKICAgICAgICAgIHJlY2VpdmVyRmluaXNoZWRNZXNzYWdlOiB1bmRlZmluZWQKICAgICAgICB9LAogICAgICAgIGluaXRpYWxNZXNzYWdlOiBtZXNzYWdlLmJvZHkuaWdub3JlID8gdW5kZWZpbmVkIDogbWVzc2FnZSwKICAgICAgICBjYWxsYmFjazogbWVzc2FnZS5jYWxsYmFjaywKICAgICAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSwKICAgICAgICBkYXRhT2JqZWN0VVJMOiBtZXNzYWdlLmRhdGFPYmplY3RVUkwKICAgICAgfTsKCiAgICAgIHJldHVybiBuZXdDaGF0Q3J5cHRvOwogICAgfQogIH0sIHsKICAgIGtleTogJ21lc3NhZ2VCdXMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fbWVzc2FnZUJ1czsKICAgIH0KCiAgICAvKioKICAgICogU2V0IHRoZSBtZXNzYWdlQnVzIGluIHRoaXMgUmVnaXN0cnkKICAgICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KG1lc3NhZ2VCdXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwogICAgfQoKICAgIC8qKgogICAgKiByZXR1cm4gdGhlIHJlZ2lzdHJ5IGluIHRoaXMgaWRNb2R1bGUKICAgICogQHBhcmFtIHtyZWdpc3RyeX0gICAgICAgICAgIHJlZ2lzdHJ5CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RyeScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9yZWdpc3RyeTsKICAgIH0KCiAgICAvKioKICAgICogU2V0IHRoZSByZWdpc3RyeSBpbiB0aGlzIGlkTW9kdWxlCiAgICAqIEBwYXJhbSB7cmVnaXN0cnl9ICAgICByZWcKICAgICovCiAgICAsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChyZWdpc3RyeSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy5fcmVnaXN0cnkgPSByZWdpc3RyeTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIElkZW50aXR5TW9kdWxlOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBJZGVudGl0eU1vZHVsZTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvdXRpbHMuanMiOjc1OSwiLi9DcnlwdG8iOjczNywiLi9JZGVudGl0eSI6NzM4LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiOjI5OSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjMwNywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyfV0sNzQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKdmFyIENvbnRleHQgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ29udGV4dCgpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIENvbnRleHQpOwoKICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBDb250ZXh0KSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NhbiBub3QgY29uc3RydWN0IGFic3RyYWN0IGNsYXNzLicpOwogICAgfQogICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IENvbnRleHQucHJvdG90eXBlLmNvbnN0cnVjdG9yKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1BsZWFzZSBpbXBsZW1lbnQgYWJzdHJhY3QgbWV0aG9kIGNvbnN0cnVjdG9yLicpOwogICAgfQogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoQ29udGV4dCwgbnVsbCwgW3sKICAgIGtleTogJ2xvYWRQb2xpY2llcycsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZFBvbGljaWVzKCkgewogICAgICBpZiAodGhpcyA9PT0gQ29udGV4dCkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NhbiBub3QgY2FsbCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGxvYWRQb2xpY2llcy4nKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmxvYWRQb2xpY2llcyA9PT0gQ29udGV4dC5sb2FkUG9saWNpZXMpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQbGVhc2UgaW1wbGVtZW50IHN0YXRpYyBhYnN0cmFjdCBtZXRob2QgbG9hZFBvbGljaWVzLicpOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0RvIG5vdCBjYWxsIHN0YXRpYyBhYnN0cmFjdCBtZXRob2QgbG9hZFBvbGljaWVzIGZyb20gY2hpbGQuJyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdhZGRTdWJzY3JpcHRpb25Qb2xpY3knLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFN1YnNjcmlwdGlvblBvbGljeSgpIHsKICAgICAgaWYgKHRoaXMgPT09IENvbnRleHQpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW4gbm90IGNhbGwgc3RhdGljIGFic3RyYWN0IG1ldGhvZCBhZGRTdWJzY3JpcHRpb25Qb2xpY3kuJyk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hZGRTdWJzY3JpcHRpb25Qb2xpY3kgPT09IENvbnRleHQuYWRkU3Vic2NyaXB0aW9uUG9saWN5KSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIGltcGxlbWVudCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGFkZFN1YnNjcmlwdGlvblBvbGljeS4nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdEbyBub3QgY2FsbCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGFkZFN1YnNjcmlwdGlvblBvbGljeSBmcm9tIGNoaWxkLicpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnaXNUb1ZlcmlmeScsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNUb1ZlcmlmeSgpIHsKICAgICAgaWYgKHRoaXMgPT09IENvbnRleHQpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW4gbm90IGNhbGwgc3RhdGljIGFic3RyYWN0IG1ldGhvZCBpc1RvVmVyaWZ5LicpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNUb1ZlcmlmeSA9PT0gQ29udGV4dC5pc1RvVmVyaWZ5KSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIGltcGxlbWVudCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGlzVG9WZXJpZnkuJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRG8gbm90IGNhbGwgc3RhdGljIGFic3RyYWN0IG1ldGhvZCBpc1RvVmVyaWZ5IGZyb20gY2hpbGQuJyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdnZXRBcHBsaWNhYmxlUG9saWNpZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFwcGxpY2FibGVQb2xpY2llcygpIHsKICAgICAgaWYgKHRoaXMgPT09IENvbnRleHQpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW4gbm90IGNhbGwgc3RhdGljIGFic3RyYWN0IG1ldGhvZCBnZXRBcHBsaWNhYmxlUG9saWNpZXMuJyk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXRBcHBsaWNhYmxlUG9saWNpZXMgPT09IENvbnRleHQuZ2V0QXBwbGljYWJsZVBvbGljaWVzKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIGltcGxlbWVudCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGdldEFwcGxpY2FibGVQb2xpY2llcy4nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdEbyBub3QgY2FsbCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGdldEFwcGxpY2FibGVQb2xpY2llcyBmcm9tIGNoaWxkLicpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnYXBwbHlQb2xpY2llcycsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXBwbHlQb2xpY2llcygpIHsKICAgICAgaWYgKHRoaXMgPT09IENvbnRleHQpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW4gbm90IGNhbGwgc3RhdGljIGFic3RyYWN0IG1ldGhvZCBhcHBseVBvbGljaWVzLicpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuYXBwbHlQb2xpY2llcyA9PT0gQ29udGV4dC5hcHBseVBvbGljaWVzKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIGltcGxlbWVudCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGFwcGx5UG9saWNpZXMuJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRG8gbm90IGNhbGwgc3RhdGljIGFic3RyYWN0IG1ldGhvZCBhcHBseVBvbGljaWVzIGZyb20gY2hpbGQuJyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdhdXRob3Jpc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGF1dGhvcmlzZSgpIHsKICAgICAgaWYgKHRoaXMgPT09IENvbnRleHQpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW4gbm90IGNhbGwgc3RhdGljIGFic3RyYWN0IG1ldGhvZCBhdXRob3Jpc2UuJyk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5hdXRob3Jpc2UgPT09IENvbnRleHQuYXV0aG9yaXNlKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUGxlYXNlIGltcGxlbWVudCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGF1dGhvcmlzZS4nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdEbyBub3QgY2FsbCBzdGF0aWMgYWJzdHJhY3QgbWV0aG9kIGF1dGhvcmlzZSBmcm9tIGNoaWxkLicpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBDb250ZXh0Owp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBDb250ZXh0Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3NDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgT3BlcmF0b3JzID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIE9wZXJhdG9ycygpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIE9wZXJhdG9ycyk7CgogICAgdmFyIF90aGlzID0gdGhpczsKICAgIF90aGlzLm9wZXJhdG9ycyA9IF90aGlzLnNldE9wZXJhdG9ycygpOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoT3BlcmF0b3JzLCBbewogICAga2V5OiAnc2V0T3BlcmF0b3JzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRPcGVyYXRvcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBvcGVyYXRvcnMgPSB7CiAgICAgICAgYmV0d2VlbjogZnVuY3Rpb24gYmV0d2VlbihwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5pc0JldHdlZW4ocGFyYW1zWzBdWzBdLCBwYXJhbXNbMF1bMV0sIHBhcmFtc1sxXSk7CiAgICAgICAgfSwKICAgICAgICBpbjogZnVuY3Rpb24gX2luKHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIHBhcmFtc1swXS5pbmRleE9mKHBhcmFtc1sxXSkgPiAtMTsKICAgICAgICB9LAogICAgICAgIGVxdWFsczogZnVuY3Rpb24gZXF1YWxzKHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIHBhcmFtc1swXVswXSA9PT0gJyonIHx8IHBhcmFtc1swXVswXSA9PT0gcGFyYW1zWzFdOwogICAgICAgIH0sCgogICAgICAgIG9yOiBmdW5jdGlvbiBvcihwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiBwYXJhbXNbMF0gfHwgcGFyYW1zWzFdOwogICAgICAgIH0sCiAgICAgICAgYW5kOiBmdW5jdGlvbiBhbmQocGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gcGFyYW1zWzBdICYmIHBhcmFtc1sxXTsKICAgICAgICB9LAogICAgICAgIG5vdDogZnVuY3Rpb24gbm90KHBhcmFtcykgewogICAgICAgICAgcmV0dXJuICFwYXJhbXNbMF07CiAgICAgICAgfQogICAgICB9OwogICAgICByZXR1cm4gb3BlcmF0b3JzOwogICAgfQoKICAgIC8qKgogICAgKiBWZXJpZmllcyBpZiB0aGUgY3VycmVudCB0aW1lIGlzIGJldHdlZW4gdGhlIGdpdmVuIHN0YXJ0IGFuZCBlbmQgdGltZXMuCiAgICAqIEBwYXJhbSB7TnVtYmVyfSAgICAgc3RhcnQKICAgICogQHBhcmFtIHtOdW1iZXJ9ICAgICBlbmQKICAgICogQHJldHVybiB7Qm9vbGVhbn0gICBib29sZWFuCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdpc0JldHdlZW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQmV0d2VlbihzdGFydCwgZW5kLCBub3cpIHsKICAgICAgc3RhcnQgPSBwYXJzZUludChzdGFydCk7CiAgICAgIGVuZCA9IHBhcnNlSW50KGVuZCk7CgogICAgICBpZiAoZW5kIDwgc3RhcnQpIHsKICAgICAgICBub3cgPSBub3cgPCBzdGFydCA/IG5vdyArPSAyNDAwIDogbm93OwogICAgICAgIGVuZCArPSAyNDAwOwogICAgICB9CgogICAgICByZXR1cm4gbm93ID4gc3RhcnQgJiYgbm93IDwgZW5kOwogICAgfQogIH1dKTsKICByZXR1cm4gT3BlcmF0b3JzOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBPcGVyYXRvcnM7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MzExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjMxMn1dLDc0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfdHlwZW9mMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2YnKTsKCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX09wZXJhdG9ycyA9IHJlcXVpcmUoJy4vT3BlcmF0b3JzJyk7Cgp2YXIgX09wZXJhdG9yczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PcGVyYXRvcnMpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgoqIFRoZSBQb2xpY3kgRGVjaXNpb24gUG9pbnQgKFBEUCkgZGVjaWRlcyBpZiBhIG1lc3NhZ2UgaXMgdG8gYmUgYXV0aG9yaXNlZCBieSBjaGVja2luZyBhIHNldCBvZgoqIHBvbGljaWVzLiBUaGUgcmVzb3VyY2UgdG8gYmUgdmVyaWZpZWQgaXMgc3BlY2lmaWVkIGluIHRoZSBmaXJzdCB3b3JkIG9mIHRoZSAnY29uZGl0aW9uJyBmaWVsZCBvZgoqIGEgUG9saWN5IG9iamVjdC4gVGhlIGltcGxlbWVudGF0aW9uIHRoYXQgdmVyaWZpZXMgaWYgdGhlIG1lc3NhZ2UgaXMgY29tcGxpYW50IHdpdGggYSBwb2xpY3kgaXMKKiBzcGVjaWZpZWQgaW4gYSBoYXNodGFibGUgdG8gYWxsb3cgZHluYW1pYyBkZWZpbml0aW9uIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiwgcHJvdmlkaW5nCiogZXh0ZW5zaWJpbGl0eSB0byB0aGUgUG9saWN5IEVuZ2luZSBmdW5jdGlvbmFsaXRpZXMuCiovCgp2YXIgUERQID0gZnVuY3Rpb24gKCkgewoKICAvKioKICAqIFRoaXMgbWV0aG9kIGlzIGludm9rZWQgYnkgdGhlIFBvbGljeSBFbmdpbmUgYW5kIGluc3RhbnRpYXRlcyB0aGUgUG9saWN5IERlY2lzaW9uIFBvaW50LiBJdAogICogaW5pdGlhbGlzZXMgb3IgbG9hZHMgZnJvbSB0aGUgUGVyc2lzdGVuY2UgTWFuYWdlciB0aGUgb2JqZWN0ICdteUdyb3VwcycgdG8gc3RvcmUgdGhlIHVzZXIncwogICogZ3JvdXBzLgogICogQHBhcmFtICB7UmVnaXN0cnl9ICAgIG11Y2hydW50aW1lUmVnaXN0cnkKICAqLwoKICBmdW5jdGlvbiBQRFAoY29udGV4dCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgUERQKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX3RoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICBfdGhpcy5vcGVyYXRvcnMgPSBuZXcgX09wZXJhdG9yczIuZGVmYXVsdChjb250ZXh0KTsKICB9CgogIC8qKgogICogVmVyaWZpZXMgaWYgdGhlIGdpdmVuIG1lc3NhZ2UgaXMgY29tcGxpYW50IHdpdGggdGhlIGdpdmVuIHBvbGljaWVzLiBJZiBvbmUgb2YgdGhlIHBvbGljaWVzCiAgKiBldmFsdWF0ZXMgdG8gJ2ZhbHNlJywgdGhlbiB0aGUgbWVzc2FnZSBpcyBub3QgYXV0aG9yaXNlZC4gUmV0dXJucyB0aGUgZmluYWwgYXV0aG9yaXNhdGlvbgogICogZGVjaXNpb24gYW5kIGEgc2V0IG9mIGFjdGlvbnMgdGhhdCBwb2xpY2llcyBtYXkgcmVxdWlyZS4KICAqIEBwYXJhbSB7TWVzc2FnZX0gIG1lc3NhZ2UKICAqIEBwYXJhbSB7VVJMfSAgICAgIGh5cGVydHlUb1ZlcmlmeQogICogQHBhcmFtIHtBcnJheX0gICAgcG9saWNpZXMKICAqIEByZXR1cm4ge0FycmF5fSAgIFthdXRoRGVjaXNpb24sIGFjdGlvbnNdCiAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFBEUCwgW3sKICAgIGtleTogJ2V2YWx1YXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBldmFsdWF0ZShtZXNzYWdlLCBwb2xpY2llcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcmVzdWx0cyA9IFt0cnVlXTsKICAgICAgdmFyIGFjdGlvbnMgPSBbXTsKICAgICAgZm9yICh2YXIgaSBpbiBwb2xpY2llcykgewogICAgICAgIHZhciBwb2xpY3kgPSBwb2xpY2llc1tpXTsKICAgICAgICB2YXIgY29uZGl0aW9uID0gcG9saWN5LmNvbmRpdGlvbjsKICAgICAgICB2YXIgdmVyaWZpZXNDb25kaXRpb24gPSBmYWxzZTsKICAgICAgICBpZiAoKHR5cGVvZiBjb25kaXRpb24gPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoY29uZGl0aW9uKSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICB2ZXJpZmllc0NvbmRpdGlvbiA9IF90aGlzLnZlcmlmaWVzQWR2YW5jZWRDb25kaXRpb24oY29uZGl0aW9uWzBdLCBjb25kaXRpb25bMV0sIGNvbmRpdGlvblsyXSwgcG9saWN5LnNjb3BlLCBtZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmVyaWZpZXNDb25kaXRpb24gPSBfdGhpcy52ZXJpZmllc1NpbXBsZUNvbmRpdGlvbihjb25kaXRpb24sIHBvbGljeS5zY29wZSwgbWVzc2FnZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodmVyaWZpZXNDb25kaXRpb24pIHsKICAgICAgICAgIHJlc3VsdHMucHVzaChwb2xpY3kuYXV0aG9yaXNlKTsKICAgICAgICB9CiAgICAgICAgaWYgKHBvbGljeS5hY3Rpb25zICE9PSBbXSkgewogICAgICAgICAgZm9yICh2YXIgX2kgaW4gcG9saWN5LmFjdGlvbnMpIHsKICAgICAgICAgICAgdmFyIG5ld0FjdGlvbiA9IHsKICAgICAgICAgICAgICBtZXRob2Q6IHBvbGljeS5hY3Rpb25zW19pXS5tZXRob2QsCiAgICAgICAgICAgICAgcGFyYW1zOiBtZXNzYWdlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGFjdGlvbnMucHVzaChuZXdBY3Rpb24pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGF1dGhEZWNpc2lvbiA9IHJlc3VsdHMuaW5kZXhPZihmYWxzZSkgPT09IC0xOwogICAgICByZXR1cm4gW2F1dGhEZWNpc2lvbiwgYWN0aW9uc107CiAgICB9CiAgfSwgewogICAga2V5OiAndmVyaWZpZXNTaW1wbGVDb25kaXRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZlcmlmaWVzU2ltcGxlQ29uZGl0aW9uKGNvbmRpdGlvbiwgc2NvcGUsIG1lc3NhZ2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHNwbGl0Q29uZGl0aW9uID0gY29uZGl0aW9uLnNwbGl0KCcgJyk7CiAgICAgIHZhciB2YXJpYWJsZSA9IHNwbGl0Q29uZGl0aW9uWzBdOwogICAgICB2YXIgb3BlcmF0b3IgPSBzcGxpdENvbmRpdGlvblsxXTsKCiAgICAgIHZhciBwYXJhbXMgPSB2b2lkIDA7CiAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2luJykgewogICAgICAgIF90aGlzLmNvbnRleHQuZ3JvdXAgPSB7IHNjb3BlOiBzY29wZSwgZ3JvdXA6IHNwbGl0Q29uZGl0aW9uWzJdLCBkZXN0aW5hdGlvbjogbWVzc2FnZS50byB9OwogICAgICAgIHBhcmFtcyA9IF90aGlzLmNvbnRleHQuZ3JvdXA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFyYW1zID0gc3BsaXRDb25kaXRpb24uc2xpY2UoMik7CiAgICAgIH0KICAgICAgX3RoaXMuY29udGV4dFt2YXJpYWJsZV0gPSB7IG1lc3NhZ2U6IG1lc3NhZ2UgfTsKICAgICAgdmFyIHZhbHVlID0gX3RoaXMuY29udGV4dFt2YXJpYWJsZV07CiAgICAgIHJldHVybiBfdGhpcy5vcGVyYXRvcnMub3BlcmF0b3JzW29wZXJhdG9yXShbcGFyYW1zLCB2YWx1ZV0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ3ZlcmlmaWVzQWR2YW5jZWRDb25kaXRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZlcmlmaWVzQWR2YW5jZWRDb25kaXRpb24ob3BlcmF0b3IsIGxlZnQsIHJpZ2h0LCBzY29wZSwgbWVzc2FnZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB3aGlsZSAoKHR5cGVvZiBsZWZ0ID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKGxlZnQpKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBsZWZ0ID0gX3RoaXMudmVyaWZpZXNBZHZhbmNlZENvbmRpdGlvbihsZWZ0WzBdLCBsZWZ0WzFdLCBsZWZ0WzJdLCBzY29wZSwgbWVzc2FnZSk7CiAgICAgIH0KICAgICAgaWYgKHJpZ2h0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB3aGlsZSAoKHR5cGVvZiByaWdodCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShyaWdodCkpID09PSAnb2JqZWN0JykgewogICAgICAgICAgcmlnaHQgPSBfdGhpcy52ZXJpZmllc0FkdmFuY2VkQ29uZGl0aW9uKHJpZ2h0WzBdLCByaWdodFsxXSwgcmlnaHRbMl0sIHNjb3BlLCBtZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciByZXN1bHRMZWZ0ID0gdHlwZW9mIGxlZnQgPT09ICdib29sZWFuJyA/IGxlZnQgOiBfdGhpcy52ZXJpZmllc1NpbXBsZUNvbmRpdGlvbihsZWZ0LCBzY29wZSwgbWVzc2FnZSk7CgogICAgICB2YXIgcmVzdWx0UmlnaHQgPSB2b2lkIDA7CiAgICAgIGlmIChyaWdodCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmVzdWx0UmlnaHQgPSB0eXBlb2YgcmlnaHQgPT09ICdib29sZWFuJyA/IHJpZ2h0IDogX3RoaXMudmVyaWZpZXNTaW1wbGVDb25kaXRpb24ocmlnaHQsIHNjb3BlLCBtZXNzYWdlKTsKICAgICAgfQoKICAgICAgcmV0dXJuIF90aGlzLm9wZXJhdG9ycy5vcGVyYXRvcnNbb3BlcmF0b3JdKFtyZXN1bHRMZWZ0LCByZXN1bHRSaWdodF0pOwogICAgfQogIH1dKTsKICByZXR1cm4gUERQOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBQRFA7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vT3BlcmF0b3JzIjo3NDEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MzExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjMxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3R5cGVvZiI6MzE1fV0sNzQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIik7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKdmFyIFBFUCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBQRVAoY29udGV4dCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgUEVQKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX3RoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShQRVAsIFt7CiAgICBrZXk6ICJlbmZvcmNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBlbmZvcmNlKHJlc3VsdCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgYXV0aERlY2lzaW9uID0gcmVzdWx0WzBdOwogICAgICB2YXIgYWN0aW9ucyA9IHJlc3VsdFsxXTsKCiAgICAgIGZvciAodmFyIGkgaW4gYWN0aW9ucykgewogICAgICAgIF90aGlzLmNvbnRleHRbYWN0aW9uc1tpXS5tZXRob2RdKGFjdGlvbnNbaV0ucGFyYW1zLCBhdXRoRGVjaXNpb24pOwogICAgICB9CiAgICB9CgogICAgLypzZW5kQXV0b21hdGljTWVzc2FnZSgpIHt9CiAgICAgIGZvcndhcmRUb0lEKCkge30KICAgICAgZm9yd2FyZFRvSHlwZXJ0eSgpIHt9Ki8KCiAgfV0pOwogIHJldHVybiBQRVA7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFBFUDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyfV0sNzQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF90eXBlb2YyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3R5cGVvZicpOwoKdmFyIF90eXBlb2YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZW9mMik7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfUEVQID0gcmVxdWlyZSgnLi9QRVAnKTsKCnZhciBfUEVQMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BFUCk7Cgp2YXIgX1BEUCA9IHJlcXVpcmUoJy4vUERQJyk7Cgp2YXIgX1BEUDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QRFApOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgoqIFRoZSBQb2xpY3kgRW5naW5lIGludGVyY2VwdHMgYWxsIHRoZSBtZXNzYWdlcyBzZW50IHRocm91Z2ggdGhlIE1lc3NhZ2UgQnVzIGFuZCBhcHBsaWVzIHRoZQoqIHBvbGljaWVzIGRlZmluZWQgYnkgdGhlIHNlcnZpY2UgcHJvdmlkZXIgYW5kIHRoZSB1c2VyLgoqLwovL2pzaGludCBicm93c2VyOnRydWUsIGpxdWVyeTogdHJ1ZQoKLy9pbXBvcnQgcGVyc2lzdGVuY2VNYW5hZ2VyIGZyb20gJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvUGVyc2lzdGVuY2VNYW5hZ2VyJzsKCnZhciBQb2xpY3lFbmdpbmUgPSBmdW5jdGlvbiAoKSB7CgogIC8qKgogICogVGhpcyBtZXRob2QgaXMgaW52b2tlZCBieSB0aGUgUnVudGltZVVBIGFuZCBpbnN0YW50aWF0ZXMgdGhlIFBvbGljeSBFbmdpbmUuIEEgUG9saWN5IERlY2lzaW9uCiAgKiBQb2ludCAoUERQKSBhbmQgYSBQb2xpY3kgRW5mb3JjZW1lbnQgUG9pbnQgKFBFUCkgYXJlIGluaXRpYWxpc2VkIGZvciB0aGUgZXZhbHVhdGlvbiBvZiBwb2xpY2llcwogICogYW5kIHRoZSBlbmZvcmNlbWVudCBvZiBhZGRpdGlvbmFsIGFjdGlvbnMsIHJlc3BlY3RpdmVseS4KICAqIEBwYXJhbSAge0lkZW50aXR5TW9kdWxlfSAgICBpZGVudGl0eU1vZHVsZQogICogQHBhcmFtICB7UmVnaXN0cnl9ICAgICAgICAgIHJ1bnRpbWVSZWdpc3RyeQogICovCgogIGZ1bmN0aW9uIFBvbGljeUVuZ2luZShjb250ZXh0KSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBQb2xpY3lFbmdpbmUpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5jb250ZXh0ID0gY29udGV4dDsKICAgIF90aGlzLmNvbnRleHQucGRwID0gbmV3IF9QRFAyLmRlZmF1bHQoY29udGV4dCk7CiAgICBfdGhpcy5jb250ZXh0LnBlcCA9IG5ldyBfUEVQMi5kZWZhdWx0KGNvbnRleHQpOwogIH0KCiAgLyoqCiAgKiBBc3NvY2lhdGVzIHRoZSBnaXZlbiBwb2xpY2llcyB3aXRoIGEgc2NvcGUuIFRoZSBwb3NzaWJsZSBzY29wZXMgYXJlICdnbG9iYWwnLCAnaHlwZXJ0eScgYW5kCiAgKiAndXNlcicuCiAgKiBAcGFyYW0gIHtQb2xpY3lbXX0gIHBvbGljaWVzCiAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgIHNjb3BlCiAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFBvbGljeUVuZ2luZSwgW3sKICAgIGtleTogJ2FkZFBvbGljaWVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRQb2xpY2llcyhuZXdQb2xpY2llcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG15UG9saWNpZXMgPSBfdGhpcy5jb250ZXh0LnBvbGljaWVzOwogICAgICBpZiAobXlQb2xpY2llcyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbXlQb2xpY2llcyA9IHt9OwogICAgICB9CgogICAgICBmb3IgKHZhciBpIGluIG5ld1BvbGljaWVzKSB7CiAgICAgICAgdmFyIG5ld1BvbGljeSA9IG5ld1BvbGljaWVzW2ldOwogICAgICAgIHZhciBzY29wZSA9IG5ld1BvbGljeS5zY29wZTsKICAgICAgICBpZiAobXlQb2xpY2llc1tzY29wZV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgbXlQb2xpY2llc1tzY29wZV0gPSBbXTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgaiBpbiBteVBvbGljaWVzW3Njb3BlXSkgewogICAgICAgICAgdmFyIGV4aXN0aW5nUG9saWN5ID0gbXlQb2xpY2llc1tzY29wZV1bal07CiAgICAgICAgICBpZiAoZXhpc3RpbmdQb2xpY3kuY29uZGl0aW9uID09PSBuZXdQb2xpY3kuY29uZGl0aW9uKSB7CiAgICAgICAgICAgIF90aGlzLnJlbW92ZVBvbGljaWVzKG5ld1BvbGljaWVzW2ldLmNvbmRpdGlvbik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBteVBvbGljaWVzW3Njb3BlXS5wdXNoKG5ld1BvbGljaWVzW2ldKTsKICAgICAgfQoKICAgICAgX3RoaXMuY29udGV4dC5wb2xpY2llcyA9IG15UG9saWNpZXM7CiAgICB9CgogICAgLyoqCiAgICAqIFJlbW92ZXMgdGhlIHBvbGljeSB3aXRoIHRoZSBnaXZlbiBJRCBmcm9tIHRoZSBnaXZlbiBzY29wZS4gSWYgcG9saWN5SUQgaXMgJyonLCByZW1vdmVzIGFsbCBwb2xpY2llcyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHNjb3BlLgogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBwb2xpY3lJRAogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBzY29wZQogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlUG9saWNpZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVBvbGljaWVzKHNjb3BlLCBjb25kaXRpb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIG15UG9saWNpZXMgPSBfdGhpcy5jb250ZXh0LnBvbGljaWVzOwoKICAgICAgaWYgKHNjb3BlICE9PSAnKicpIHsKCiAgICAgICAgaWYgKHNjb3BlIGluIG15UG9saWNpZXMpIHsKICAgICAgICAgIGlmIChjb25kaXRpb24gIT09ICcqJykgewogICAgICAgICAgICB2YXIgcG9saWNpZXMgPSBteVBvbGljaWVzW3Njb3BlXTsKICAgICAgICAgICAgdmFyIHR5cGVPZkNvbmRpdGlvbiA9IHR5cGVvZiBjb25kaXRpb24gPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoY29uZGl0aW9uKTsKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBwb2xpY2llcykgewogICAgICAgICAgICAgIHZhciB0eXBlT2ZQb2xpY3lDb25kaXRpb24gPSAoMCwgX3R5cGVvZjMuZGVmYXVsdCkocG9saWNpZXNbaV0uY29uZGl0aW9uKTsKICAgICAgICAgICAgICBpZiAodHlwZU9mQ29uZGl0aW9uID09PSB0eXBlT2ZQb2xpY3lDb25kaXRpb24pIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlT2ZDb25kaXRpb24gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgIGlmIChwb2xpY2llc1tpXS5jb25kaXRpb24gPT09IGNvbmRpdGlvbikgewogICAgICAgICAgICAgICAgICAgIHBvbGljaWVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy90eXBlb2YgY29uZGl0aW9uID0gb2JqZWN0IChhZHZhbmNlZCBwb2xpY3kpCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5hcmVFcXVhbEFycmF5cyhwb2xpY2llc1tpXS5jb25kaXRpb24sIGNvbmRpdGlvbikpIHsKICAgICAgICAgICAgICAgICAgICBwb2xpY2llcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRlbGV0ZSBteVBvbGljaWVzW3Njb3BlXTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy5jb250ZXh0LnBvbGljaWVzID0gbXlQb2xpY2llczsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMuY29udGV4dC5wb2xpY2llcyA9IHt9OwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnYXJlRXF1YWxBcnJheXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFyZUVxdWFsQXJyYXlzKGFycmF5MSwgYXJyYXkyKSB7CiAgICAgIGlmIChhcnJheTEubGVuZ3RoICE9PSBhcnJheTIubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB2YXIgbnVtRWxlbWVudHMgPSBhcnJheTEubGVuZ3RoOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUVsZW1lbnRzOyBpKyspIHsKICAgICAgICBpZiAoYXJyYXkxW2ldIGluc3RhbmNlb2YgQXJyYXkgJiYgYXJyYXkyW2ldIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgIGlmICghYXJyYXkxW2ldLmVxdWFscyhhcnJheTJbaV0pKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGFycmF5MVtpXSAhPT0gYXJyYXkyW2ldKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgKiBUaGlzIG1ldGhvZCBpcyBleGVjdXRlZCB3aGVuIGEgbWVzc2FnZSBpcyBpbnRlcmNlcHRlZCBpbiB0aGUgTWVzc2FnZSBCdXMuIFRoZSBmaXJzdCBzdGVwIGlzIHRoZQogICAgKiBhc3NpZ25tZW50IG9mIHRoZSBpZGVudGl0eSBhc3NvY2lhdGVkIHdpdGggdGhlIG1lc3NhZ2UuIFRoZSBzZWNvbmQgc3RlcCBpcyB0aGUgZXZhbHVhdGlvbiBvZiB0aGUKICAgICogYXBwbGljYWJsZSBwb2xpY2llcyBpbiBvcmRlciB0byBvYnRhaW4gYW4gYXV0aG9yaXNhdGlvbiBkZWNpc2lvbjogaWYgYSBwb2xpY3kgZXZhbHVhdGVzIHRvCiAgICAqIGZhbHNlLCB0aGVuIHRoZSBtZXNzYWdlIGlzIHVuYXV0aG9yaXNlZC4gVGhlIHRoaXJkIHN0ZXAgaXMgdGhlIGVuZm9yY2VtZW50IG9mIHRoZSBhY3Rpb25zIHRoYXQKICAgICogcG9saWNpZXMgbWF5IHJlcXVpcmUuIEZpbmFsbHksIHRoZSBtZXNzYWdlIGlzIHN0YW1wZWQgYXMgYXV0aG9yaXNlZCBvciBub3QgYW5kIGlzIHJldHVybmVkIHRvCiAgICAqIHRoZSBNZXNzYWdlIEJ1cywgd2hlcmUgaXQgd2lsbCBiZSBmb3J3YXJkZWQgb3IgYmxvY2tlZC4KICAgICogQHBhcmFtICB7TWVzc2FnZX0gIG1lc3NhZ2UKICAgICovCgogIH0sIHsKICAgIGtleTogJ2F1dGhvcmlzZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXV0aG9yaXNlKG1lc3NhZ2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLmNvbnRleHQuYXV0aG9yaXNlKG1lc3NhZ2UpOwogICAgfQogIH0sIHsKICAgIGtleTogJ2dldEdyb3Vwc05hbWVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRHcm91cHNOYW1lcyhzY29wZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgbXlHcm91cHMgPSBfdGhpcy5jb250ZXh0Lmdyb3VwczsKICAgICAgdmFyIGdyb3Vwc05hbWVzID0gW107CiAgICAgIGlmIChteUdyb3Vwc1tzY29wZV0gIT09IHt9KSB7CiAgICAgICAgZm9yICh2YXIgZ3JvdXBOYW1lIGluIG15R3JvdXBzW3Njb3BlXSkgewogICAgICAgICAgZ3JvdXBzTmFtZXMucHVzaChncm91cE5hbWUpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZ3JvdXBzTmFtZXM7CiAgICB9CgogICAgLyoqCiAgICAqIFJldHJpZXZlcyB0aGUgZ3JvdXAgd2l0aCB0aGUgZ2l2ZW4gZ3JvdXAgbmFtZSBmcm9tIHRoZSBQRFAuCiAgICAqIEBwYXJhbSAge1N0cmluZ30gIGdyb3VwTmFtZQogICAgKiBAcmV0dXJuIHtBcnJheX0gICBncm91cAogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0TGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGlzdChzY29wZSwgZ3JvdXBOYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBteUdyb3VwcyA9IF90aGlzLmNvbnRleHQuZ3JvdXBzOwogICAgICB2YXIgbWVtYmVycyA9IFtdOwogICAgICBpZiAobXlHcm91cHNbc2NvcGVdICE9PSB1bmRlZmluZWQgJiYgbXlHcm91cHNbc2NvcGVdW2dyb3VwTmFtZV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgIG1lbWJlcnMgPSBteUdyb3Vwc1tzY29wZV1bZ3JvdXBOYW1lXTsKICAgICAgfQogICAgICByZXR1cm4gbWVtYmVyczsKICAgIH0KCiAgICAvKioKICAgICogQ3JlYXRlcyBhIGdyb3VwIHdpdGggdGhlIGdpdmVuIG5hbWUuCiAgICAqIEBwYXJhbSAge1N0cmluZ30gIGdyb3VwTmFtZQogICAgKi8KCiAgfSwgewogICAga2V5OiAnY3JlYXRlTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTGlzdChzY29wZSwgdHlwZSwgZ3JvdXBOYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbXlHcm91cHMgPSBfdGhpcy5jb250ZXh0Lmdyb3VwczsKICAgICAgaWYgKG15R3JvdXBzW3Njb3BlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbXlHcm91cHNbc2NvcGVdID0ge307CiAgICAgIH0KICAgICAgbXlHcm91cHNbc2NvcGVdW2dyb3VwTmFtZV0gPSBbXTsKCiAgICAgIHZhciBwb2xpY3kgPSB7CiAgICAgICAgYXV0aG9yaXNlOiBmYWxzZSwKICAgICAgICBjb25kaXRpb246IHR5cGUgKyAnIGluICcgKyBncm91cE5hbWUsCiAgICAgICAgc2NvcGU6IHNjb3BlLAogICAgICAgIGFjdGlvbnM6IFtdCiAgICAgIH07CiAgICAgIF90aGlzLmFkZFBvbGljaWVzKFtwb2xpY3ldKTsKCiAgICAgIHJldHVybiBteUdyb3VwczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdkZWxldGVHcm91cCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlR3JvdXAoc2NvcGUsIGdyb3VwTmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG15R3JvdXBzID0gX3RoaXMuY29udGV4dC5ncm91cHM7CiAgICAgIGRlbGV0ZSBteUdyb3Vwc1tzY29wZV1bZ3JvdXBOYW1lXTsKCiAgICAgIHZhciBteVBvbGljaWVzID0gX3RoaXMuY29udGV4dC5wb2xpY2llczsKCiAgICAgIHZhciBwb2xpY2llcyA9IG15UG9saWNpZXNbc2NvcGVdOwogICAgICBmb3IgKHZhciBpIGluIHBvbGljaWVzKSB7CiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHBvbGljaWVzW2ldLmNvbmRpdGlvbi5zcGxpdCgnICcpOwogICAgICAgIGNvbmRpdGlvbi5zaGlmdCgpOwogICAgICAgIHZhciBncm91cEluUG9saWN5ID0gY29uZGl0aW9uLmpvaW4oJyAnKTsKICAgICAgICBpZiAoZ3JvdXBJblBvbGljeSA9PT0gZ3JvdXBOYW1lKSB7CiAgICAgICAgICBkZWxldGUgcG9saWNpZXNbaV07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogQWRkcyB0aGUgZ2l2ZW4gdXNlciBlbWFpbCB0byB0aGUgZ3JvdXAgd2l0aCB0aGUgZ2l2ZW4gbmFtZS4KICAgICogQHBhcmFtICB7U3RyaW5nfSAgdXNlckVtYWlsCiAgICAqIEBwYXJhbSAge1N0cmluZ30gIGdyb3VwTmFtZQogICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkVG9MaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRUb0xpc3Qoc2NvcGUsIHR5cGUsIGdyb3VwTmFtZSwgdXNlckVtYWlsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbXlHcm91cHMgPSBfdGhpcy5jb250ZXh0Lmdyb3VwczsKICAgICAgaWYgKG15R3JvdXBzW3Njb3BlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbXlHcm91cHNbc2NvcGVdID0ge307CiAgICAgIH0KICAgICAgaWYgKG15R3JvdXBzW3Njb3BlXVtncm91cE5hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBteUdyb3VwcyA9IF90aGlzLmNyZWF0ZUxpc3Qoc2NvcGUsIHR5cGUsIGdyb3VwTmFtZSk7CiAgICAgIH0KICAgICAgaWYgKG15R3JvdXBzW3Njb3BlXVtncm91cE5hbWVdLmluZGV4T2YodXNlckVtYWlsKSA9PT0gLTEpIHsKICAgICAgICBteUdyb3Vwc1tzY29wZV1bZ3JvdXBOYW1lXS5wdXNoKHVzZXJFbWFpbCk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gdXNlciBlbWFpbCBmcm9tIHRoZSBncm91cCB3aXRoIHRoZSBnaXZlbiBuYW1lLgogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICB1c2VyRW1haWwKICAgICogQHBhcmFtICB7U3RyaW5nfSAgZ3JvdXBOYW1lCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVGcm9tR3JvdXAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21Hcm91cChzY29wZSwgZ3JvdXBOYW1lLCB1c2VyRW1haWwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBteUdyb3VwcyA9IF90aGlzLmNvbnRleHQuZ3JvdXBzOwogICAgICB2YXIgZ3JvdXAgPSBteUdyb3Vwc1tzY29wZV1bZ3JvdXBOYW1lXTsKCiAgICAgIGZvciAodmFyIGkgaW4gZ3JvdXApIHsKICAgICAgICBpZiAoZ3JvdXBbaV0gPT09IHVzZXJFbWFpbCkgewogICAgICAgICAgZ3JvdXAuc3BsaWNlKGksIDEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnZ2V0VGltZXNsb3RzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaW1lc2xvdHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBwb2xpY2llcyA9IF90aGlzLmNvbnRleHQucG9saWNpZXMudXNlcjsKICAgICAgdmFyIHRpbWVSZXN0cmljdGlvbnMgPSBbXTsKICAgICAgZm9yICh2YXIgaSBpbiBwb2xpY2llcykgewogICAgICAgIGlmIChwb2xpY2llc1tpXS5jb25kaXRpb24uc3BsaXQoJyAnKVswXSA9PT0gJ3RpbWUnKSB7CiAgICAgICAgICB0aW1lUmVzdHJpY3Rpb25zLnB1c2gocG9saWNpZXNbaV0uY29uZGl0aW9uKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRpbWVSZXN0cmljdGlvbnM7CiAgICB9CiAgfSwgewogICAga2V5OiAnZ2V0VGltZXNsb3RCeUlkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaW1lc2xvdEJ5SWQoY29uZGl0aW9uKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBwb2xpY2llcyA9IF90aGlzLmNvbnRleHQucG9saWNpZXMudXNlcjsKICAgICAgZm9yICh2YXIgaSBpbiBwb2xpY2llcykgewogICAgICAgIGlmIChwb2xpY2llc1tpXS5jb25kaXRpb24gPT09IGNvbmRpdGlvbikgewogICAgICAgICAgcmV0dXJuIHBvbGljaWVzW2ldOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH1dKTsKICByZXR1cm4gUG9saWN5RW5naW5lOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBQb2xpY3lFbmdpbmU7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vUERQIjo3NDIsIi4vUEVQIjo3NDMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MzExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjMxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL3R5cGVvZiI6MzE1fV0sNzQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsKCnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7Cgp2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7Cgp2YXIgX0NvbnRleHQyID0gcmVxdWlyZSgnLi4vQ29udGV4dCcpOwoKdmFyIF9Db250ZXh0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NvbnRleHQyKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91dGlscycpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vaW1wb3J0IHBlcnNpc3RlbmNlTWFuYWdlciBmcm9tICcuLi8uLi9wZXJzaXN0ZW5jZS9QZXJzaXN0ZW5jZU1hbmFnZXInOwoKdmFyIENvbW1vbkN0eCA9IGZ1bmN0aW9uIChfQ29udGV4dCkgewogICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKENvbW1vbkN0eCwgX0NvbnRleHQpOwoKICBmdW5jdGlvbiBDb21tb25DdHgoKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBDb21tb25DdHgpOwoKICAgIHZhciBfdGhpczIgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKENvbW1vbkN0eCkuY2FsbCh0aGlzKSk7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgX3RoaXMucG9saWNpZXMgPSBfdGhpcy5sb2FkUG9saWNpZXMoKTsKICAgIF90aGlzLmdyb3VwcyA9IHt9OwogICAgcmV0dXJuIF90aGlzMjsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKENvbW1vbkN0eCwgW3sKICAgIGtleTogJ2FwcGx5UG9saWNpZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5UG9saWNpZXMobWVzc2FnZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcG9saWNpZXNSZXN1bHQgPSBbdHJ1ZSwgW11dOwogICAgICB2YXIgYXBwbGljYWJsZVBvbGljaWVzID0gX3RoaXMuZ2V0QXBwbGljYWJsZVBvbGljaWVzKG1lc3NhZ2UpOwogICAgICBwb2xpY2llc1Jlc3VsdCA9IF90aGlzLnBkcC5ldmFsdWF0ZShtZXNzYWdlLCBhcHBsaWNhYmxlUG9saWNpZXMpOwogICAgICBtZXNzYWdlLmJvZHkuYXV0aCA9IGFwcGxpY2FibGVQb2xpY2llcy5sZW5ndGggIT09IDA7CiAgICAgIF90aGlzLnBlcC5lbmZvcmNlKHBvbGljaWVzUmVzdWx0KTsKICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSwgcG9saWNpZXNSZXN1bHQ6IHBvbGljaWVzUmVzdWx0IH07CiAgICB9CiAgfSwgewogICAga2V5OiAnX2dldERhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXREYXRlKCkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpOwogICAgICBpZiAoZGF5Lmxlbmd0aCA9PT0gMSkgewogICAgICAgIGRheSA9ICcwJyArIGRheTsKICAgICAgfQoKICAgICAgdmFyIG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpOwogICAgICBpZiAobW9udGgubGVuZ3RoID09PSAxKSB7CiAgICAgICAgbW9udGggPSAnMCcgKyBtb250aDsKICAgICAgfQoKICAgICAgcmV0dXJuIGRheSArICcvJyArIG1vbnRoICsgJy8nICsgZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19nZXRMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0TGlzdChzY29wZSwgZ3JvdXBOYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBteUdyb3VwcyA9IF90aGlzLmdyb3VwczsKICAgICAgdmFyIG1lbWJlcnMgPSBbXTsKICAgICAgaWYgKG15R3JvdXBzW3Njb3BlXSAhPT0gdW5kZWZpbmVkICYmIG15R3JvdXBzW3Njb3BlXVtncm91cE5hbWVdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBtZW1iZXJzID0gbXlHcm91cHNbc2NvcGVdW2dyb3VwTmFtZV07CiAgICAgIH0KICAgICAgcmV0dXJuIG1lbWJlcnM7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2dldFRpbWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUaW1lKCkgewogICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgdmFyIG1pbnV0ZXMgPSBTdHJpbmcobm93LmdldE1pbnV0ZXMoKSk7CiAgICAgIGlmIChtaW51dGVzLmxlbmd0aCA9PT0gMSkgewogICAgICAgIG1pbnV0ZXMgPSAnMCcgKyBtaW51dGVzOwogICAgICB9CiAgICAgIHJldHVybiBwYXJzZUludChTdHJpbmcobm93LmdldEhvdXJzKCkpICsgbWludXRlcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2dldFdlZWtEYXknLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRXZWVrRGF5KCkgewogICAgICByZXR1cm4gU3RyaW5nKG5ldyBEYXRlKCkuZ2V0RGF5KCkpOwogICAgfQogIH0sIHsKICAgIGtleTogJ2RhdGUnLAogICAgc2V0OiBmdW5jdGlvbiBzZXQobm93KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmICghbm93Lm1lc3NhZ2UpIHsKICAgICAgICBfdGhpcy5fZGF0ZUF0dHJpYnV0ZSA9IHR5cGVvZiBub3cgPT09ICdzdHJpbmcnID8gbm93IDogX3RoaXMuX2dldERhdGUoKTsKICAgICAgfQogICAgfSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2RhdGVBdHRyaWJ1dGU7CiAgICB9CiAgfSwgewogICAga2V5OiAnZG9tYWluJywKICAgIHNldDogZnVuY3Rpb24gc2V0KHBhcmFtcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy5fZG9tYWluQXR0cmlidXRlID0gKDAsIF91dGlscy5kaXZpZGVFbWFpbCkocGFyYW1zLm1lc3NhZ2UuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZS51c2VybmFtZSkuZG9tYWluOwogICAgfSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2RvbWFpbkF0dHJpYnV0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdzb3VyY2UnLAogICAgc2V0OiBmdW5jdGlvbiBzZXQocGFyYW1zKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLl9zb3VyY2VBdHRyaWJ1dGUgPSBwYXJhbXMubWVzc2FnZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJuYW1lOwogICAgfSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX3NvdXJjZUF0dHJpYnV0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICd0aW1lJywKICAgIHNldDogZnVuY3Rpb24gc2V0KG5vdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIW5vdy5tZXNzYWdlKSB7CiAgICAgICAgX3RoaXMuX3RpbWVBdHRyaWJ1dGUgPSBub3cgPyBub3cgOiBfdGhpcy5fZ2V0VGltZSgpOwogICAgICB9CiAgICB9LAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fdGltZUF0dHJpYnV0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICd3ZWVrZGF5JywKICAgIHNldDogZnVuY3Rpb24gc2V0KG5vdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIW5vdy5tZXNzYWdlKSB7CiAgICAgICAgX3RoaXMuX3dlZWtkYXlBdHRyaWJ1dGUgPSBub3cgPyBub3cgOiBfdGhpcy5fZ2V0V2Vla0RheSgpOwogICAgICB9CiAgICB9LAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fd2Vla2RheUF0dHJpYnV0ZTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIENvbW1vbkN0eDsKfShfQ29udGV4dDMuZGVmYXVsdCk7CgpleHBvcnRzLmRlZmF1bHQgPSBDb21tb25DdHg7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uLy4uL3V0aWxzL3V0aWxzIjo3NTksIi4uL0NvbnRleHQiOjc0MCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjozMDMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MzExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjMxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjozMTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjozMTR9XSw3NDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3Byb21pc2UgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZScpOwoKdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKdmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsKCnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7Cgp2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7Cgp2YXIgX0NvbW1vbkN0eDIgPSByZXF1aXJlKCcuL0NvbW1vbkN0eCcpOwoKdmFyIF9Db21tb25DdHgzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29tbW9uQ3R4Mik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXRpbHMnKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgUnVudGltZUNvcmVDdHggPSBmdW5jdGlvbiAoX0NvbW1vbkN0eCkgewogICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKFJ1bnRpbWVDb3JlQ3R4LCBfQ29tbW9uQ3R4KTsKCiAgZnVuY3Rpb24gUnVudGltZUNvcmVDdHgoaWRNb2R1bGUsIHJ1bnRpbWVSZWdpc3RyeSkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgUnVudGltZUNvcmVDdHgpOwoKICAgIHZhciBfdGhpczIgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKFJ1bnRpbWVDb3JlQ3R4KS5jYWxsKHRoaXMpKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CiAgICBfdGhpcy5pZE1vZHVsZSA9IGlkTW9kdWxlOwogICAgX3RoaXMucnVudGltZVJlZ2lzdHJ5ID0gcnVudGltZVJlZ2lzdHJ5OwogICAgcmV0dXJuIF90aGlzMjsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFJ1bnRpbWVDb3JlQ3R4LCBbewogICAga2V5OiAnbG9hZFBvbGljaWVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkUG9saWNpZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIV90aGlzLnN1YnNQb2xpY2llcykgewogICAgICAgIHZhciBwb2xpY3kgPSB7CiAgICAgICAgICBzY29wZTogJ2dsb2JhbCcsCiAgICAgICAgICBjb25kaXRpb246ICdzdWJzY3JpcHRpb24gZXF1YWxzIConLAogICAgICAgICAgYXV0aG9yaXNlOiB0cnVlLAogICAgICAgICAgYWN0aW9uczogW3sgbWV0aG9kOiAncmVnaXN0ZXJTdWJzY3JpYmVyJyB9LCB7IG1ldGhvZDogJ2RvTXV0dWFsQXV0aGVudGljYXRpb24nIH1dCiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdWJzUG9saWNpZXMgPSB7fTsKICAgICAgICBfdGhpcy5zdWJzUG9saWNpZXNbcG9saWN5LnNjb3BlXSA9IHBvbGljeTsKICAgICAgfQoKICAgICAgcmV0dXJuIHt9OwogICAgfQogIH0sIHsKICAgIGtleTogJ19pc0Zyb21SZW1vdGVTTScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2lzRnJvbVJlbW90ZVNNKGZyb20pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHNwbGl0RnJvbSA9IGZyb20uc3BsaXQoJzovLycpOwogICAgICByZXR1cm4gc3BsaXRGcm9tWzBdID09PSAncnVudGltZScgJiYgZnJvbSAhPT0gX3RoaXMucnVudGltZVJlZ2lzdHJ5LnJ1bnRpbWVVUkwgKyAnL3NtJzsKICAgIH0KCiAgICAvKioKICAgICogUmV0dXJucyB0aGUgcG9saWNpZXMgYXNzb2NpYXRlZCB3aXRoIGEgc2NvcGUuCiAgICAqIEBwYXJhbSAgIHtTdHJpbmd9IHNjb3BlCiAgICAqIEByZXR1cm4gIHtBcnJheX0gIHBvbGljaWVzCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRBcHBsaWNhYmxlUG9saWNpZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFwcGxpY2FibGVQb2xpY2llcyhtZXNzYWdlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBteVBvbGljaWVzID0gX3RoaXMucG9saWNpZXM7CiAgICAgIHZhciBwb2xpY2llcyA9IFtdOwoKICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3N1YnNjcmliZScgJiYgX3RoaXMuX2lzRnJvbVJlbW90ZVNNKG1lc3NhZ2UuZnJvbSkpIHsKICAgICAgICB2YXIgZGF0YU9iamVjdCA9IG1lc3NhZ2UuYm9keS5yZXNvdXJjZTsKICAgICAgICBpZiAoX3RoaXMuc3Vic1BvbGljaWVzW2RhdGFPYmplY3RdKSB7CiAgICAgICAgICBwb2xpY2llcy5wdXNoKF90aGlzLnN1YnNQb2xpY2llc1tkYXRhT2JqZWN0XSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBoeXBlcnR5TmFtZSA9IF90aGlzLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZShfdGhpcy5fZ2V0VVJMKG1lc3NhZ2UudG8pKTsKICAgICAgICAgIGlmIChfdGhpcy5zdWJzUG9saWNpZXNbaHlwZXJ0eU5hbWVdKSB7CiAgICAgICAgICAgIHBvbGljaWVzLnB1c2goX3RoaXMuc3Vic1BvbGljaWVzW2h5cGVydHlOYW1lXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL1RPRE86IGNoYW5nZSBuYW1lCiAgICAgICAgICAgIHZhciBoeXBlcnR5ID0gX3RoaXMucnVudGltZVJlZ2lzdHJ5LmdldFJlcG9ydGVyVVJMU3luY2hvbm91cyhfdGhpcy5fZ2V0VVJMKG1lc3NhZ2UudG8pKTsKICAgICAgICAgICAgdmFyIG93bmVyID0gX3RoaXMucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihoeXBlcnR5KTsKICAgICAgICAgICAgaWYgKF90aGlzLnN1YnNQb2xpY2llc1tvd25lcl0pIHsKICAgICAgICAgICAgICBwb2xpY2llcy5wdXNoKF90aGlzLnN1YnNQb2xpY2llc1tvd25lcl0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHBvbGljaWVzLnB1c2goX3RoaXMuc3Vic1BvbGljaWVzLmdsb2JhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgLypsZXQgaWQgPSBtZXNzYWdlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlcm5hbWU7CiAgICAgIGxldCBoeXBlcnR5TmFtZSA9IF90aGlzLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZShtZXNzYWdlLmZyb20pOwogICAgICAgIGlmIChteVBvbGljaWVzW2lkXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcG9saWNpZXMucHVzaC5hcHBseShwb2xpY2llcywgbXlQb2xpY2llc1tpZF0pOwogICAgICB9CiAgICAgICAgaWYgKG15UG9saWNpZXNbaHlwZXJ0eU5hbWVdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBwb2xpY2llcy5wdXNoLmFwcGx5KHBvbGljaWVzLCBteVBvbGljaWVzW2h5cGVydHlOYW1lXSk7CiAgICAgIH0KICAgICAgICBpZiAobXlQb2xpY2llcy5nbG9iYWwgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHBvbGljaWVzLnB1c2guYXBwbHkocG9saWNpZXMsIG15UG9saWNpZXMuZ2xvYmFsKTsKICAgICAgfSovCgogICAgICBmb3IgKHZhciBpIGluIG15UG9saWNpZXMpIHsKICAgICAgICBwb2xpY2llcy5wdXNoLmFwcGx5KHBvbGljaWVzLCBteVBvbGljaWVzW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBvbGljaWVzOwogICAgfQogIH0sIHsKICAgIGtleTogJ2F1dGhvcmlzZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gYXV0aG9yaXNlKG1lc3NhZ2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbnNvbGUubG9nKCctLS0gUG9saWN5IEVuZ2luZSAtLS0nKTsKICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTsKICAgICAgICBtZXNzYWdlLmJvZHkgPSBtZXNzYWdlLmJvZHkgfHwge307CiAgICAgICAgdmFyIHJlc3VsdCA9IHZvaWQgMDsKICAgICAgICB2YXIgaXNUb1ZlcmlmeSA9IF90aGlzLmlzVG9WZXJpZnkobWVzc2FnZSk7CiAgICAgICAgdmFyIGlzSW5jb21pbmdNZXNzYWdlID0gX3RoaXMuX2lzSW5jb21pbmdNZXNzYWdlKG1lc3NhZ2UpOwogICAgICAgIHZhciBpc1RvQ3lwaGVyID0gX3RoaXMuX2lzVG9DeXBoZXJNb2R1bGUobWVzc2FnZSk7CiAgICAgICAgaWYgKGlzVG9WZXJpZnkpIHsKICAgICAgICAgIGlmIChpc0luY29taW5nTWVzc2FnZSkgewogICAgICAgICAgICBpZiAoaXNUb0N5cGhlcikgewogICAgICAgICAgICAgIF90aGlzLmRlY3J5cHQobWVzc2FnZSkudGhlbihmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gX3RoaXMuYXBwbHlQb2xpY2llcyhtZXNzYWdlKTsKICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlQWNjZXB0ZWQgPSByZXN1bHQucG9saWNpZXNSZXN1bHRbMF07CiAgICAgICAgICAgICAgICBtZXNzYWdlID0gcmVzdWx0Lm1lc3NhZ2U7CiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUFjY2VwdGVkKSB7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZWplY3QoJ01lc3NhZ2UgYmxvY2tlZCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXN1bHQgPSBfdGhpcy5hcHBseVBvbGljaWVzKG1lc3NhZ2UpOwogICAgICAgICAgICAgIHZhciBtZXNzYWdlQWNjZXB0ZWQgPSByZXN1bHQucG9saWNpZXNSZXN1bHRbMF07CiAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3VsdC5tZXNzYWdlOwogICAgICAgICAgICAgIGlmIChtZXNzYWdlQWNjZXB0ZWQpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnTWVzc2FnZSBibG9ja2VkJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgaXNUb1NldElEID0gX3RoaXMuX2lzVG9TZXRJRChtZXNzYWdlKTsKICAgICAgICAgICAgaWYgKGlzVG9TZXRJRCkgewogICAgICAgICAgICAgIF90aGlzLmdldElkZW50aXR5KG1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24gKGlkZW50aXR5KSB7CiAgICAgICAgICAgICAgICBtZXNzYWdlLmJvZHkuaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF90aGlzLmFwcGx5UG9saWNpZXMobWVzc2FnZSk7CiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZUFjY2VwdGVkID0gcmVzdWx0LnBvbGljaWVzUmVzdWx0WzBdOwogICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3VsdC5tZXNzYWdlOwogICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VBY2NlcHRlZCkgewogICAgICAgICAgICAgICAgICBpZiAoaXNUb0N5cGhlcikgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmVuY3J5cHQobWVzc2FnZSkudGhlbihmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVqZWN0KCdNZXNzYWdlIGJsb2NrZWQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0ID0gX3RoaXMuYXBwbHlQb2xpY2llcyhtZXNzYWdlKTsKICAgICAgICAgICAgICB2YXIgX21lc3NhZ2VBY2NlcHRlZCA9IHJlc3VsdC5wb2xpY2llc1Jlc3VsdFswXTsKICAgICAgICAgICAgICBtZXNzYWdlID0gcmVzdWx0Lm1lc3NhZ2U7CiAgICAgICAgICAgICAgaWYgKF9tZXNzYWdlQWNjZXB0ZWQpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnTWVzc2FnZSBibG9ja2VkJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc29sdmUobWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfaXNUb1NldElEJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNUb1NldElEKG1lc3NhZ2UpIHsKICAgICAgdmFyIHNjaGVtYXNUb0lnbm9yZSA9IFsnZG9tYWluLWlkcCcsICdydW50aW1lJywgJ2RvbWFpbiddOwogICAgICB2YXIgc3BsaXRGcm9tID0gbWVzc2FnZS5mcm9tLnNwbGl0KCc6Ly8nKTsKICAgICAgdmFyIGZyb21TY2hlbWEgPSBzcGxpdEZyb21bMF07CgogICAgICByZXR1cm4gc2NoZW1hc1RvSWdub3JlLmluZGV4T2YoZnJvbVNjaGVtYSkgPT09IC0xOwogICAgfQogIH0sIHsKICAgIGtleTogJ19pc0luY29taW5nTWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2lzSW5jb21pbmdNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgcmV0dXJuIG1lc3NhZ2UuYm9keS5pZGVudGl0eSA/IHRydWUgOiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZ2V0VVJMJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0VVJMKHVybCkgewogICAgICB2YXIgc3BsaXRVUkwgPSB1cmwuc3BsaXQoJy8nKTsKICAgICAgcmV0dXJuIHNwbGl0VVJMWzBdICsgJy8vJyArIHNwbGl0VVJMWzJdICsgJy8nICsgc3BsaXRVUkxbM107CiAgICB9CgogICAgLy9UT0RPOiB2ZXJpZnkgaWYgaXMgaHlwZXJ0eSBvciBkYXRhIG9iamVjdAoKICB9LCB7CiAgICBrZXk6ICdnZXRJZGVudGl0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SWRlbnRpdHkobWVzc2FnZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3VwZGF0ZScpIHsKICAgICAgICByZXR1cm4gX3RoaXMuaWRNb2R1bGUuZ2V0SWRlbnRpdHlPZkh5cGVydHkobWVzc2FnZS5ib2R5LnNvdXJjZSk7CiAgICAgIH0KCiAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdyZXNwb25zZScgJiYgbWVzc2FnZS5ib2R5LnNvdXJjZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmlkTW9kdWxlLmdldElkZW50aXR5T2ZIeXBlcnR5KG1lc3NhZ2UuYm9keS5zb3VyY2UpOwogICAgICB9CgogICAgICB2YXIgZnJvbSA9IF90aGlzLl9nZXRVUkwobWVzc2FnZS5mcm9tKTsKICAgICAgcmV0dXJuIF90aGlzLmlkTW9kdWxlLmdldElkZW50aXR5T2ZIeXBlcnR5KF90aGlzLl9nZXRVUkwoZnJvbSkpOwogICAgfQogIH0sIHsKICAgIGtleTogJ2lzVG9WZXJpZnknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzVG9WZXJpZnkobWVzc2FnZSkgewogICAgICB2YXIgc2NoZW1hc1RvSWdub3JlID0gWydkb21haW4taWRwJywgJ3J1bnRpbWUnLCAnZG9tYWluJ107CiAgICAgIHZhciBzcGxpdEZyb20gPSBtZXNzYWdlLmZyb20uc3BsaXQoJzovLycpOwogICAgICB2YXIgZnJvbVNjaGVtYSA9IHNwbGl0RnJvbVswXTsKICAgICAgdmFyIHNwbGl0VG8gPSBtZXNzYWdlLnRvLnNwbGl0KCc6Ly8nKTsKICAgICAgdmFyIHRvU2NoZW1hID0gc3BsaXRUb1swXTsKICAgICAgaWYgKGZyb21TY2hlbWEgPT09IG1lc3NhZ2UuZnJvbSB8fCB0b1NjaGVtYSA9PT0gbWVzc2FnZS50bykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gc2NoZW1hc1RvSWdub3JlLmluZGV4T2YoZnJvbVNjaGVtYSkgPT09IC0xIHx8IHNjaGVtYXNUb0lnbm9yZS5pbmRleE9mKHRvU2NoZW1hKSA9PT0gLTE7CiAgICB9CgogICAgLy9UT0RPIHVzZSBzY2hlbWFzVG9JZ25vcmUgaW5zdGVhZAoKICB9LCB7CiAgICBrZXk6ICdfaXNUb0N5cGhlck1vZHVsZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2lzVG9DeXBoZXJNb2R1bGUobWVzc2FnZSkgewogICAgICB2YXIgaXNDcmVhdGUgPSBtZXNzYWdlLnR5cGUgPT09ICdjcmVhdGUnOwogICAgICB2YXIgaXNGcm9tSHlwZXJ0eSA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShtZXNzYWdlLmZyb20pLnR5cGUgPT09ICdoeXBlcnR5JzsKICAgICAgdmFyIGlzVG9IeXBlcnR5ID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKG1lc3NhZ2UudG8pLnR5cGUgPT09ICdoeXBlcnR5JzsKICAgICAgdmFyIGlzVG9EYXRhT2JqZWN0ID0gKDAsIF91dGlscy5pc0RhdGFPYmplY3RVUkwpKG1lc3NhZ2UudG8pOwogICAgICB2YXIgaXNIYW5kc2hha2UgPSBtZXNzYWdlLnR5cGUgPT09ICdoYW5kc2hha2UnOwoKICAgICAgcmV0dXJuIGlzQ3JlYXRlICYmIGlzRnJvbUh5cGVydHkgJiYgaXNUb0h5cGVydHkgfHwgaXNDcmVhdGUgJiYgaXNGcm9tSHlwZXJ0eSAmJiBpc1RvRGF0YU9iamVjdCB8fCBpc0hhbmRzaGFrZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdkZWNyeXB0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWNyeXB0KG1lc3NhZ2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLmlkTW9kdWxlLmRlY3J5cHRNZXNzYWdlKG1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgcmVzb2x2ZShtc2cpOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZW5jcnlwdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZW5jcnlwdChtZXNzYWdlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpcy5pZE1vZHVsZS5lbmNyeXB0TWVzc2FnZShtZXNzYWdlKS50aGVuKGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIHJlc29sdmUobXNnKTsKICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIFRPRE86IGluc3RlYWQgb2YgdmVyaWZ5aW5nIG1lc3NhZ2UgdHlwZSwgbG9hZCBpdCBpbiBQb2xpY3lFbmdpbmUuYXBwbGljYWJsZVBvbGljaWVzKCkgaWYgaXQgaXMgYSBzdWJzY3JpcHRpb24gdG8gYSBkYXRhIG9iamVjdAoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlclN1YnNjcmliZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyU3Vic2NyaWJlcihtZXNzYWdlLCBhdXRoRGVjaXNpb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHRvID0gbWVzc2FnZS50by5zcGxpdCgnLycpOwogICAgICB2YXIgaXNEYXRhT2JqZWN0U3Vic2NyaXB0aW9uID0gdG9bNF0gPT09ICdzdWJzY3JpcHRpb24nOwoKICAgICAgaWYgKGF1dGhEZWNpc2lvbiAmJiBpc0RhdGFPYmplY3RTdWJzY3JpcHRpb24pIHsKICAgICAgICB2YXIgZGF0YU9iamVjdFVSTCA9IG1lc3NhZ2UudG8uc3BsaXQoJy8nKTsKICAgICAgICBkYXRhT2JqZWN0VVJMLnBvcCgpOwogICAgICAgIGRhdGFPYmplY3RVUkwgPSBkYXRhT2JqZWN0VVJMWzBdICsgJy8vJyArIGRhdGFPYmplY3RVUkxbMl0gKyAnLycgKyBkYXRhT2JqZWN0VVJMWzNdOwogICAgICAgIF90aGlzLnJ1bnRpbWVSZWdpc3RyeS5yZWdpc3RlclN1YnNjcmliZXIoZGF0YU9iamVjdFVSTCwgbWVzc2FnZS5ib2R5LnN1YnNjcmliZXIpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnZG9NdXR1YWxBdXRoZW50aWNhdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZG9NdXR1YWxBdXRoZW50aWNhdGlvbihtZXNzYWdlLCBhdXRoRGVjaXNpb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHRvID0gbWVzc2FnZS50by5zcGxpdCgnLycpOwogICAgICB2YXIgaXNEYXRhT2JqZWN0U3Vic2NyaXB0aW9uID0gdG9bNF0gPT09ICdzdWJzY3JpcHRpb24nOwoKICAgICAgaWYgKGF1dGhEZWNpc2lvbiAmJiBpc0RhdGFPYmplY3RTdWJzY3JpcHRpb24pIHsKICAgICAgICB2YXIgZGF0YU9iamVjdFVSTCA9IG1lc3NhZ2UudG8uc3BsaXQoJy8nKTsKICAgICAgICBkYXRhT2JqZWN0VVJMLnBvcCgpOwogICAgICAgIGRhdGFPYmplY3RVUkwgPSBkYXRhT2JqZWN0VVJMWzBdICsgJy8vJyArIGRhdGFPYmplY3RVUkxbMl0gKyAnLycgKyBkYXRhT2JqZWN0VVJMWzNdOwogICAgICAgIF90aGlzLmlkTW9kdWxlLmRvTXV0dWFsQXV0aGVudGljYXRpb24oZGF0YU9iamVjdFVSTCwgbWVzc2FnZS5ib2R5LnN1YnNjcmliZXIpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX2dldExhc3RDb21wb25lbnRPZlVSTCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldExhc3RDb21wb25lbnRPZlVSTCh1cmwpIHsKICAgICAgdmFyIHNwbGl0ID0gdXJsLnNwbGl0KCcvJyk7CiAgICAgIHJldHVybiBzcGxpdFtzcGxpdC5sZW5ndGggLSAxXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdncm91cCcsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHBhcmFtcy5ncm91cCA9PT0gJ3ByZWF1dGhvcmlzZWQnKSB7CiAgICAgICAgdmFyIGRhdGFPYmplY3RVUkwgPSBwYXJhbXMuZGVzdGluYXRpb24uc3BsaXQoJy8nKTsKICAgICAgICBkYXRhT2JqZWN0VVJMLnBvcCgpOwogICAgICAgIGRhdGFPYmplY3RVUkwgPSBkYXRhT2JqZWN0VVJMWzBdICsgJy8vJyArIGRhdGFPYmplY3RVUkxbMl07CiAgICAgICAgX3RoaXMuZ3JvdXBBdHRyaWJ1dGUgPSBfdGhpcy5ydW50aW1lUmVnaXN0cnkuZ2V0UHJlQXV0aFN1YnNjcmliZXJzKGRhdGFPYmplY3RVUkwpOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLmdyb3VwQXR0cmlidXRlID0gX3RoaXMuX2dldExpc3QocGFyYW1zLnNjb3BlLCBwYXJhbXMuZ3JvdXApOwogICAgICB9CiAgICB9LAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5ncm91cEF0dHJpYnV0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdzdWJzY3JpcHRpb24nLAogICAgc2V0OiBmdW5jdGlvbiBzZXQocGFyYW1zKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLnN1YnNjcmlwdGlvbkF0dHJpYnV0ZSA9IHBhcmFtcy5tZXNzYWdlLmJvZHkuc3Vic2NyaWJlcjsKICAgIH0sCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLnN1YnNjcmlwdGlvbkF0dHJpYnV0ZTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFJ1bnRpbWVDb3JlQ3R4Owp9KF9Db21tb25DdHgzLmRlZmF1bHQpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUnVudGltZUNvcmVDdHg7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uLy4uL3V0aWxzL3V0aWxzIjo3NTksIi4vQ29tbW9uQ3R4Ijo3NDUsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MzAzLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6MzA3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MzEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MzE0fV0sNzQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9wcm9taXNlID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UnKTsKCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwovLyBpbXBvcnQgTWVzc2FnZUZhY3RvcnkgZnJvbSAnLi4vLi4vcmVzb3VyY2VzL01lc3NhZ2VGYWN0b3J5JzsKCi8qKgogKiBDbGFzcyB3aWxsIGFzayB0byB0aGUgbWVzc2FnZSBub2RlIGZvciBhZGRyZXNzZXMKICovCgp2YXIgQWRkcmVzc0FsbG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICAqLwoKICAvKioKICAgKiBDcmVhdGUgYW4gQWRkcmVzcyBBbGxvY2F0aW9uCiAgICogQHBhcmFtICB7VVJMLlVSTH0gICAgICB1cmwgLSB1cmwgZnJvbSB3aG8gaXMgc2VuZGluZyB0aGUgbWVzc2FnZQogICAqIEBwYXJhbSAge01pbmlCdXN9ICAgICAgYnVzIC0gTWluaUJ1cyB1c2VkIGZvciBhZGRyZXNzIGFsbG9jYXRpb24KICAgKi8KCiAgZnVuY3Rpb24gQWRkcmVzc0FsbG9jYXRpb24odXJsLCBidXMpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIEFkZHJlc3NBbGxvY2F0aW9uKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8vIGxldCBtZXNzYWdlRmFjdG9yeSA9IG5ldyBNZXNzYWdlRmFjdG9yeSgpOwogICAgLy8KICAgIC8vIF90aGlzLl9tZXNzYWdlRmFjdG9yeSA9IG1lc3NhZ2VGYWN0b3J5OwogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9idXMgPSBidXM7CiAgfQoKICAvKioKICAgKiBnZXQgdGhlIFVSTCB2YWx1ZQogICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVybCB2YWx1ZTsKICAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEFkZHJlc3NBbGxvY2F0aW9uLCBbewogICAga2V5OiAnY3JlYXRlJywKCgogICAgLyoqCiAgICAgKiBBc2sgZm9yIGNyZWF0aW9uIG9mIGEgbnVtYmVyIG9mIEh5cGVydHkgYWRkcmVzc2VzLCB0byB0aGUgZG9tYWluIG1lc3NhZ2Ugbm9kZS4KICAgICAqIEBwYXJhbSAge0RvbWFpbn0gZG9tYWluIC0gRG9tYWluIG9mIHRoZSBtZXNzYWdlIG5vZGUuCiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAtIE51bWJlciBvZiBhZGRyZXNzZXMgdG8gcmVxdWVzdAogICAgICogQHJldHVybnMge1Byb21pc2U8SHlwZXJ0eVVSTD59ICBBIGxpc3Qgb2YgSHlwZXJ0eVVSTCdzCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoZG9tYWluLCBudW1iZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIGxldCBtZXNzYWdlRmFjdG9yeSA9IF90aGlzLl9tZXNzYWdlRmFjdG9yeTsKCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl91cmwsIHRvOiAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvaHlwZXJ0eS1hZGRyZXNzLWFsbG9jYXRpb24nLAogICAgICAgIGJvZHk6IHsgdmFsdWU6IHsgbnVtYmVyOiBudW1iZXIgfSB9CiAgICAgIH07CgogICAgICAvLyBUT0RPOiBBcHBseSB0aGUgbWVzc2FnZSBmYWN0b3J5CiAgICAgIC8vIFRoZSBtc2ctbm9kZS12ZXJ0eCBzaG91bGQgYmUgY2hhbmdlZCB0aGUgYm9keSBmaWVsZCB0byByZWNlaXZlCiAgICAgIC8vIHRoZSBmb2xsb3dpbmcgZm9ybWF0IGJvZHk6IHt2YWx1ZToge251bWJlcjogbnVtYmVyfX0gYmVjYXVzZQogICAgICAvLyB0aGUgbWVzc2FnZSBpcyBnZW5lcmF0ZWQgaW4gdGhhdCB3YXkgYnkgdGhlIG1lc3NhZ2UgZmFjdG9yeTsKICAgICAgLy8gbGV0IG1zZyA9IG1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXF1ZXN0KF90aGlzLl91cmwsICdkb21haW46Ly9tc2ctbm9kZS4nICsgZG9tYWluICsgJy9oeXBlcnR5LWFkZHJlc3MtYWxsb2NhdGlvbicsICcnLCB7bnVtYmVyOiBudW1iZXJ9KTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvLyBUT0RPOiBjaGFuZ2UgdGhpcyByZXNwb25zZSBNZXNzYWdlIHVzaW5nIHRoZSBNZXNzYWdlRmFjdG9yeQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICByZXNvbHZlKHJlcGx5LmJvZHkudmFsdWUuYWxsb2NhdGVkKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogU2VuZCBhIHJlcXVlc3QgdG8gdGhlIGRvbWFpbiBtZXNzYWdlIG5vZGUsIHRvIGRlYWxsb2NhdGUgb25lIG9yIG1vcmUgYWRkcmVzc2VzCiAgICAqIEBwYXJhbSAge0RvbWFpbn0gZG9tYWluIC0gRG9tYWluIG9mIHRoZSBtZXNzYWdlIG5vZGUuCiAgICAqIEBwYXJhbSAge2FkZHJlc3Nlc30gYWRkcmVzc2VzIHRvIHJlcXVlc3QgdGhlIGRlYWxsb2NhdGlvbgogICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gIHRoZSByZXNwb25zZSBieSB0aGUgbWVzc2FnZSBub2RlCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkZWxldGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoZG9tYWluLCBhZGRyZXNzZXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtZXNzYWdlID0gewogICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL2h5cGVydHktYWRkcmVzcy1hbGxvY2F0aW9uJywKICAgICAgICBib2R5OiB7IGNoaWxkcmVuUmVzb3VyY2VzOiBhZGRyZXNzZXMgfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygncmVwbHknLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXBseS5ib2R5LmNvZGUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ3VybCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEFkZHJlc3NBbGxvY2F0aW9uOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBBZGRyZXNzQWxsb2NhdGlvbjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjMwNywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyfV0sNzQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9nZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZicpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsKCnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7Cgp2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7Cgp2YXIgX1JlZ2lzdHJ5RGF0YU1vZGVsMiA9IHJlcXVpcmUoJy4vUmVnaXN0cnlEYXRhTW9kZWwnKTsKCnZhciBfUmVnaXN0cnlEYXRhTW9kZWwzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVnaXN0cnlEYXRhTW9kZWwyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioKKiAgIEBhdXRob3I6IEdpbCBEaWFzIChnaWwuZGlhc0B0ZWNuaWNvLnVsaXNib2EucHQpCiogICBIeXBlcnR5SW5zdGFuY2UgRGF0YSBNb2RlbCB1c2VkIHRvIG1vZGVsIGluc3RhbmNlcyBvZiBIeXBlcnRpZXMgcnVubmluZyBpbiBkZXZpY2VzIGFuZCBzZXJ2ZXJzLgoqLwoKdmFyIEh5cGVydHlJbnN0YW5jZSA9IGZ1bmN0aW9uIChfUmVnaXN0cnlEYXRhTW9kZWwpIHsKICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShIeXBlcnR5SW5zdGFuY2UsIF9SZWdpc3RyeURhdGFNb2RlbCk7CgogIGZ1bmN0aW9uIEh5cGVydHlJbnN0YW5jZShpZCwgdXJsLCBkZXNjcmlwdG9yVVJMLCBkZXNjcmlwdG9yLCBoeXBlcnR5VVJMLCB1c2VyLCBndWlkLCBydW50aW1lLCBjb250ZXh0KSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBIeXBlcnR5SW5zdGFuY2UpOwoKICAgIHZhciBfdGhpczIgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKEh5cGVydHlJbnN0YW5jZSkuY2FsbCh0aGlzLCBpZCwgdXJsLCBkZXNjcmlwdG9yVVJMKSk7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwogICAgX3RoaXMuX2Rlc2NyaXB0b3IgPSBkZXNjcmlwdG9yOwogICAgX3RoaXMuX2h5cGVydHlVUkwgPSBoeXBlcnR5VVJMOwogICAgX3RoaXMuX3VzZXIgPSB1c2VyOwogICAgX3RoaXMuX2d1aWQgPSBndWlkOwogICAgX3RoaXMuX3J1bnRpbWUgPSBydW50aW1lOwogICAgX3RoaXMuX2NvbnRleHQgPSBjb250ZXh0OwogICAgcmV0dXJuIF90aGlzMjsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKEh5cGVydHlJbnN0YW5jZSwgW3sKICAgIGtleTogJ3VzZXInLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoaWRlbnRpdHkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXMudXNlciA9IGlkZW50aXR5OwogICAgfSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX3VzZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAnaHlwZXJ0eVVSTCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9oeXBlcnR5VVJMOwogICAgfQogIH0sIHsKICAgIGtleTogJ2Rlc2NyaXB0b3InLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fZGVzY3JpcHRvcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdvYmplY3ROYW1lJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2Rlc2NyaXB0b3IuX29iamVjdE5hbWU7CiAgICB9CiAgfV0pOwogIHJldHVybiBIeXBlcnR5SW5zdGFuY2U7Cn0oX1JlZ2lzdHJ5RGF0YU1vZGVsMy5kZWZhdWx0KTsgLyoqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiovCgoKZXhwb3J0cy5kZWZhdWx0ID0gSHlwZXJ0eUluc3RhbmNlOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL1JlZ2lzdHJ5RGF0YU1vZGVsIjo3NTAsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MzAzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MzEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI6MzE0fV0sNzQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9wcm9taXNlID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UnKTsKCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YnKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7Cgp2YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpOwoKdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOwoKdmFyIF9FdmVudEVtaXR0ZXIyID0gcmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRFbWl0dGVyJyk7Cgp2YXIgX0V2ZW50RW1pdHRlcjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FdmVudEVtaXR0ZXIyKTsKCnZhciBfQWRkcmVzc0FsbG9jYXRpb24gPSByZXF1aXJlKCcuL0FkZHJlc3NBbGxvY2F0aW9uJyk7Cgp2YXIgX0FkZHJlc3NBbGxvY2F0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FkZHJlc3NBbGxvY2F0aW9uKTsKCnZhciBfT2JqZWN0QWxsb2NhdGlvbiA9IHJlcXVpcmUoJy4uL3N5bmNoZXIvT2JqZWN0QWxsb2NhdGlvbicpOwoKdmFyIF9PYmplY3RBbGxvY2F0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX09iamVjdEFsbG9jYXRpb24pOwoKdmFyIF9IeXBlcnR5SW5zdGFuY2UgPSByZXF1aXJlKCcuL0h5cGVydHlJbnN0YW5jZScpOwoKdmFyIF9IeXBlcnR5SW5zdGFuY2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSHlwZXJ0eUluc3RhbmNlKTsKCnZhciBfTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L01lc3NhZ2VGYWN0b3J5Jyk7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMuanMnKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKmltcG9ydCBJZGVudGl0eU1hbmFnZXIgZnJvbSAnLi9JZGVudGl0eU1hbmFnZXInOwppbXBvcnQgRGlzY292ZXJ5IGZyb20gJy4vRGlzY292ZXJ5JzsqLwoKLyoqCiogUnVudGltZSBSZWdpc3RyeSBJbnRlcmZhY2UKKi8KLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgp2YXIgUmVnaXN0cnkgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikgewogICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKFJlZ2lzdHJ5LCBfRXZlbnRFbWl0dGVyKTsKCgogIC8qKgogICogVG8gaW5pdGlhbGlzZSB0aGUgUnVudGltZSBSZWdpc3RyeSB3aXRoIHRoZSBSdW50aW1lVVJMIHRoYXQgd2lsbCBiZSB0aGUgYmFzaXMgdG8gZGVyaXZlIHRoZSBpbnRlcm5hbCBydW50aW1lIGFkZHJlc3NlcyB3aGVuIGFsbG9jYXRpbmcgYWRkcmVzc2VzIHRvIGludGVybmFsIHJ1bnRpbWUgY29tcG9uZW50LiBJbiBhZGRpdGlvbiwgdGhlIFJlZ2lzdHJ5IGRvbWFpbiBiYWNrLWVuZCB0byBiZSB1c2VkIHRvIHJlbW90ZWx5IHJlZ2lzdGVyIFJ1bnRpbWUgY29tcG9uZW50cywgaXMgYWxzbyBwYXNzZWQgYXMgaW5wdXQgcGFyYW1ldGVyLgogICogQHBhcmFtICB7TWVzc2FnZUJ1c30gICAgICAgICAgbXNnYnVzICAgICAgICAgICAgICAgIG1zZ2J1cwogICogQHBhcmFtICB7SHlwZXJ0eVJ1bnRpbWVVUkx9ICAgcnVudGltZVVSTCAgICAgICAgICAgIHJ1bnRpbWVVUkwKICAqIEBwYXJhbSAge0FwcFNhbmRib3h9ICAgICAgICAgIGFwcFNhbmRib3ggICAgICAgICAgICBhcHBTYW5kYm94CiAgKiBAcGFyYW0gIHtydW50aW1lQ2F0YWxvZ3VlfSAgICBydW50aW1lQ2F0YWxvZ3VlICAgICAgcnVudGltZUNhdGFsb2d1ZQogICogQHBhcmFtICB7RG9tYWluVVJMfSAgICAgICAgICAgcmVtb3RlUmVnaXN0cnkgICAgICAgIHJlbW90ZVJlZ2lzdHJ5CiAgKi8KCiAgZnVuY3Rpb24gUmVnaXN0cnkocnVudGltZVVSTCwgYXBwU2FuZGJveCwgaWRlbnRpdHlNb2R1bGUsIHJ1bnRpbWVDYXRhbG9ndWUsIHJlbW90ZVJlZ2lzdHJ5KSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBSZWdpc3RyeSk7CgoKICAgIC8vIGhvdyBzb21lIGZ1bmN0aW9ucyByZWNlaXZlIHRoZSBwYXJhbWV0ZXJzIGZvciBleGFtcGxlOgogICAgLy8gbmV3IFJlZ2lzdHJ5KCdoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvMTIzJywgYXBwU2FuZGJveCwgaWRNb2R1bGUsIHJlbW90ZVJlZ2lzdHJ5KTsKICAgIC8vIHJlZ2lzdHJ5LnJlZ2lzdGVyU3R1YihzYW5kYm94LCAnc3AxJyk7CiAgICAvLyByZWdpc3RyeS5yZWdpc3Rlckh5cGVydHkoc2FuZEJveCwgJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKICAgIC8vIHJlZ2lzdHJ5LnJlc29sdmUoJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShSZWdpc3RyeSkuY2FsbCh0aGlzKSk7CgogICAgaWYgKCFydW50aW1lVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ3J1bnRpbWVVUkwgaXMgbWlzc2luZy4nKTsKICAgIC8qaWYgKCFyZW1vdGVSZWdpc3RyeSkgdGhyb3cgbmV3IEVycm9yKCdyZW1vdGVSZWdpc3RyeSBpcyBtaXNzaW5nJyk7Ki8KCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CgogICAgX3RoaXMucmVnaXN0cnlVUkwgPSBydW50aW1lVVJMICsgJy9yZWdpc3RyeS8nOwogICAgX3RoaXMuYXBwU2FuZGJveCA9IGFwcFNhbmRib3g7CiAgICBfdGhpcy5ydW50aW1lVVJMID0gcnVudGltZVVSTDsKICAgIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUgPSBydW50aW1lQ2F0YWxvZ3VlOwogICAgX3RoaXMucmVtb3RlUmVnaXN0cnkgPSByZW1vdGVSZWdpc3RyeTsKICAgIF90aGlzLmlkTW9kdWxlID0gaWRlbnRpdHlNb2R1bGU7CiAgICBfdGhpcy5pZGVudGlmaWVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAgKyAxKTsKCiAgICAvLyB0aGUgZXhwaXJlcyBpbiAzNjAwLCByZXByZXNlbnRzIDEgaG91cgogICAgLy90aGUgZXhwaXJlcyBpcyBpbiBzZWNvbmRzLCB1bml0IG9mIG1lYXN1cmUgcmVjZWl2ZWQgYnkgdGhlIGRvbWFpbiByZWdpc3RyeQogICAgX3RoaXMuZXhwaXJlc1RpbWUgPSAzNjAwOwoKICAgIF90aGlzLmh5cGVydGllc0xpc3RUb1JlbW92ZSA9IHt9OwogICAgX3RoaXMuaHlwZXJ0aWVzTGlzdCA9IFtdOwogICAgX3RoaXMucHJvdG9zdHVic0xpc3QgPSB7fTsKICAgIF90aGlzLmlkcFByb3h5TGlzdCA9IHt9OwogICAgX3RoaXMuZGF0YU9iamVjdExpc3QgPSB7fTsKICAgIF90aGlzLnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdCA9IHt9OwogICAgX3RoaXMuc2FuZGJveGVzTGlzdCA9IHsgc2FuZGJveDoge30sIGFwcFNhbmRib3g6IHt9IH07CiAgICBfdGhpcy5wZXBMaXN0ID0ge307CgogICAgX3RoaXMuX2RvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShfdGhpcy5yZWdpc3RyeVVSTCkuZG9tYWluOwogICAgX3RoaXMuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W3J1bnRpbWVVUkxdID0gYXBwU2FuZGJveDsKICAgIHZhciBtc2dGYWN0b3J5ID0gbmV3IF9NZXNzYWdlRmFjdG9yeS5NZXNzYWdlRmFjdG9yeSgnZmFsc2UnLCAne30nKTsKICAgIF90aGlzLm1lc3NhZ2VGYWN0b3J5ID0gbXNnRmFjdG9yeTsKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICAvKioKICAqIHJldHVybiB0aGUgbWVzc2FnZUJ1cyBpbiB0aGlzIFJlZ2lzdHJ5CiAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzCiAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFJlZ2lzdHJ5LCBbewogICAga2V5OiAnX2dldElkZW50aXR5QXNzb2NpYXRlZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2dldElkZW50aXR5QXNzb2NpYXRlZCh0eXBlLCBoeXBlcnR5VVJMKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBmb3IgKHZhciBoeXBlcnR5IGluIF90aGlzLmh5cGVydGllc0xpc3QpIHsKICAgICAgICB2YXIgdmFsdWUgPSBfdGhpcy5oeXBlcnRpZXNMaXN0W2h5cGVydHldOwogICAgICAgIGlmICh2YWx1ZS5faHlwZXJ0eVVSTCA9PT0gaHlwZXJ0eVVSTCkgewogICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ3VzZXJuYW1lJzoKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuX3VzZXIudXNlcm5hbWU7CiAgICAgICAgICAgIGNhc2UgJ2NuJzoKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuX3VzZXIuY247CiAgICAgICAgICAgIGNhc2UgJ2xvY2FsZSc6CiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLl91c2VyLmxvY2FsZTsKICAgICAgICAgICAgY2FzZSAnYXZhdGFyJzoKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuX3VzZXIuYXZhdGFyOwogICAgICAgICAgICBjYXNlICd1c2VyVVJMJzoKICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuX3VzZXIudXNlclVSTDsKICAgICAgICAgICAgY2FzZSAnLic6CiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLl91c2VyOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuICcnOwogICAgfQoKICAgIC8qKgogICAgKiBxdWVyeSB0aGUgZG9tYWluIHJlZ2lzdHJ5IGZvciBpbmZvcm1hdGlvbiBmcm9tIGEgZGF0YU9iamVjdCBVUkwKICAgICogQHBhcmFtICB7U3RyaW5nfSAgIHVybCAgICAgICAgICAgIGRhdGFPYmplY3QgVVJMCiAgICAqIEByZXR1cm4ge0pTT059ICAgICBkYXRhT2JqZWN0ICAgICBkYXRhIG9iamVjdAogICAgKi8KCiAgfSwgewogICAga2V5OiAnZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMJywKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb3ZlckRhdGFPYmplY3RQZXJVUkwodXJsLCBkb21haW4pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGFjdGl2ZURvbWFpbiA9IHZvaWQgMDsKCiAgICAgIGlmICghZG9tYWluKSB7CiAgICAgICAgYWN0aXZlRG9tYWluID0gX3RoaXMuX2RvbWFpbjsKICAgICAgfSBlbHNlIHsKICAgICAgICBhY3RpdmVEb21haW4gPSBkb21haW47CiAgICAgIH0KCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ3JlYWQnLCBmcm9tOiBfdGhpcy5yZWdpc3RyeVVSTCwgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgYWN0aXZlRG9tYWluICsgJy8nLCBib2R5OiB7IHJlc291cmNlOiB1cmwsIHNlYXJjaDogJ2RhdGFPYmplY3RQZXJVUkwnIH0KICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewoKICAgICAgICAgIHZhciBkYXRhT2JqZWN0ID0gcmVwbHkuYm9keS52YWx1ZTsKCiAgICAgICAgICBpZiAoZGF0YU9iamVjdCkgewogICAgICAgICAgICByZXNvbHZlKGRhdGFPYmplY3QpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KCdEYXRhT2JqZWN0IG5vdCBmb3VuZCcpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHJldHVybiB0aGUgc2FuZGJveCBpbnN0YW5jZSB3aGVyZSB0aGUgQXBwbGljYXRpb24gaXMgZXhlY3V0aW5nLiBJdCBpcyBhc3N1bWVkIHRoZXJlIGlzIGp1c3Qgb25lIEFwcCBwZXIgUnVudGltZSBpbnN0YW5jZS4KICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldEFwcFNhbmRib3gnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFwcFNhbmRib3goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5hcHBTYW5kYm94OwogICAgfQoKICAgIC8qKgogICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHVzZXIgYXNzb2NpYXRlZCB0byB0aGUgaHlwZXJ0eSBVUkwKICAgICogQHBhcmFtICAgIHtTdHJpbmd9ICAgIGh5cGVydHlVUkwgICAgICBoeXBlcnR5IFVSTAogICAgKiBAcmV0dXJuICAge1N0cmluZ30gICAgdXNlclVSTCAgICAgICAgIHVzZXIgVVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRIeXBlcnR5T3duZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEh5cGVydHlPd25lcihoeXBlcnR5VVJMKSB7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgdXNlclVSTCA9IHZvaWQgMDsKCiAgICAgIGZvciAodmFyIGluZGV4IGluIF90aGlzLmh5cGVydGllc0xpc3QpIHsKICAgICAgICB2YXIgaHlwZXJ0eSA9IF90aGlzLmh5cGVydGllc0xpc3RbaW5kZXhdOwogICAgICAgIGlmIChoeXBlcnR5Lmh5cGVydHlVUkwgPT09IGh5cGVydHlVUkwpIHsKICAgICAgICAgIHVzZXJVUkwgPSBoeXBlcnR5LnVzZXIudXNlclVSTDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHVzZXJVUkw7CiAgICB9CgogICAgLyoqCiAgICAqIHJldHVybnMgdGhlIGh5cGVydHkgTmFtZSBmcm9tIGEgZ2l2ZW4gdXJsLiBUaGlzIHVybCBjb3VsZCBiZSBmcm9tIGEgZGF0YU9iamVjdCBvciBoeXBlcnR5CiAgICAqIEBwYXJhbSAgICB7U3RyaW5nfSAgICB1cmwgICAgICBoeXBlcnR5IG9yIGRhdGFPYmplY3QgVVJMCiAgICAqIEByZXR1cm4gICB7U3RyaW5nfSAgICBoeXBlcnR5TmFtZSAgICAgaHlwZXJ0eSBOYW1lCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRIeXBlcnR5TmFtZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SHlwZXJ0eU5hbWUodXJsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaXNIeXBlcnR5VVJMID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKHVybCkudHlwZSA9PT0gJ2h5cGVydHknOwoKICAgICAgLy92YWx1ZSB0byBiZSByZXR1cm5lZCBpbiB0aGUgZW5kCiAgICAgIHZhciBoeXBlcnR5TmFtZSA9IHZvaWQgMDsKCiAgICAgIC8vaWYgaXMgbm90IGFuIGh5cGVydHksIGNoZWNrIGlmIGlzIGEgZGF0YU9iamVjdCBhbmQgb2J0YWluIGhpcyByZXBvcnRlcgogICAgICB2YXIgaHlwZXJ0eVVSTCA9IGlzSHlwZXJ0eVVSTCA/IGh5cGVydHlVUkwgPSB1cmwgOiBfdGhpcy5nZXRSZXBvcnRlclVSTFN5bmNob25vdXModXJsKTsKCiAgICAgIGZvciAodmFyIGluZGV4IGluIF90aGlzLmh5cGVydGllc0xpc3QpIHsKICAgICAgICB2YXIgaHlwZXJ0eSA9IF90aGlzLmh5cGVydGllc0xpc3RbaW5kZXhdOwogICAgICAgIGlmIChoeXBlcnR5Lmh5cGVydHlVUkwgPT09IGh5cGVydHlVUkwpIHsKICAgICAgICAgIGh5cGVydHlOYW1lID0gaHlwZXJ0eS5vYmplY3ROYW1lOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBoeXBlcnR5TmFtZTsKICAgIH0KCiAgICAvKioKICAgICogZnVuY3Rpb24gdG8gcmV0dXJuIHRoZSByZXBvcnRlclVSTCBhc3NvY2lhdGVkIHdpdGggdGhlIGRhdGFvYmplY3QgVVJMCiAgICAqIEBwYXJhbSAgICB7U3RyaW5nfSAgICAgZGF0YU9iamVjdFVSTCAgICBkYXRhT2JqZWN0VVJMCiAgICAqIEByZXR1cm4gICB7U3RyaW5nfSAgICAgcmVwb3J0ZXJVUkwgICAgICByZXBvcnRlclVSTAogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0UmVwb3J0ZXJVUkwnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlcG9ydGVyVVJMKGRhdGFPYmplY3RVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkYXRhT2JqZWN0ID0gX3RoaXMuZGF0YU9iamVjdExpc3RbZGF0YU9iamVjdFVSTF07CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoZGF0YU9iamVjdCkgewogICAgICAgICAgcmVzb2x2ZShkYXRhT2JqZWN0LnJlcG9ydGVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqZWN0KCdObyByZXBvcnRlciB3YXMgZm91bmQnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBmdW5jdGlvbiB0byByZXR1cm4gdGhlIHJlcG9ydGVyVVJMIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGF0YW9iamVjdCBVUkwuIG5vIHByb21pc2UgcmV0dXJuZWQKICAgICogQHBhcmFtICAgIHtTdHJpbmd9ICAgICBkYXRhT2JqZWN0VVJMICAgIGRhdGFPYmplY3RVUkwKICAgICogQHJldHVybiAgIHtTdHJpbmd9ICAgICByZXBvcnRlclVSTCAgICAgIHJlcG9ydGVyVVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRSZXBvcnRlclVSTFN5bmNob25vdXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlcG9ydGVyVVJMU3luY2hvbm91cyhkYXRhT2JqZWN0VVJMKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGF0YU9iamVjdCA9IF90aGlzLmRhdGFPYmplY3RMaXN0W2RhdGFPYmplY3RVUkxdOwoKICAgICAgcmV0dXJuIGRhdGFPYmplY3QgPyBkYXRhT2JqZWN0LnJlcG9ydGVyIDogdW5kZWZpbmVkOwogICAgfQoKICAgIC8qKgogICAgKiByZXR1cm5zIHRoZSBoeXBlcnR5IFVSTCB0aGF0IHN1YnNjcmliZWQgdGhlIGRhdGFPYmplY3QKICAgICogQHBhcmFtICAgIHtTdHJpbmd9ICAgICB1cmwgICAgICAgICAgICB1cmwgZm9ybWF0CiAgICAqIEByZXR1cm4gICB7U3RyaW5nfSAgICBIeXBlcnR5IFVSTCBzdWJzY3JpYmVkIHRvIHRoZSBVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldERhdGFPYmplY3RTdWJzY3JpYmVySHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGF0YU9iamVjdFN1YnNjcmliZXJIeXBlcnR5KHVybCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF90aGlzLnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdFt1cmxdOwogICAgfQoKICAgIC8qKgogICAgKiByZWdpc3RlciBhIGRlc2lyZWQgZGF0YU9iamVjdCB0byBzdWJzY3JpYmUKICAgICogQHBhcmFtICAgIHtTdHJpbmd9ICAgIGRhdGFPYmplY3RVUkwgICAgICBkYXRhT2JqZWN0IFVSTAogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVnaXN0ZXJTdWJzY3JpYmVkRGF0YU9iamVjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJTdWJzY3JpYmVkRGF0YU9iamVjdChkYXRhT2JqZWN0VVJMLCBoeXBlcnR5VVJMKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmIChfdGhpcy5zdWJzY3JpYmVkRGF0YU9iamVjdExpc3RbZGF0YU9iamVjdFVSTF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIF90aGlzLnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdFtkYXRhT2JqZWN0VVJMXSA9IGh5cGVydHlVUkw7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBsaXN0IG9mIHByZSBhdXRob3Jpc2VkIHVzZXJzIHJlY2VpdmVkIGluIHRoZSBjcmVhdGlvbiBvZiBhIGRhdGEgb2JqZWN0CiAgICAqIEBwYXJhbSAgICB7U3RyaW5nfSAgICAgICAgICAgIGRhdGFPYmplY3RVUkwgICAgZGF0YU9iamVjdFVSTAogICAgKiBAcmV0dXJuICAge0FycmF5PFN0cmluZz59ICAgICBwcmVBdXRoICAgICAgICAgTGlzdCBvZiBwcmUgYXV0aG9yaXNlZCB1c2VycwogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0UHJlQXV0aFN1YnNjcmliZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcmVBdXRoU3Vic2NyaWJlcnMoZGF0YU9iamVjdFVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgZGF0YU9iamVjdCA9IF90aGlzLmRhdGFPYmplY3RMaXN0W2RhdGFPYmplY3RVUkxdOwogICAgICB2YXIgcHJlQXV0aCA9IFtdOwoKICAgICAgaWYgKGRhdGFPYmplY3QpIHsKICAgICAgICBwcmVBdXRoID0gZGF0YU9iamVjdC5wcmVBdXRoOwogICAgICB9CiAgICAgIHJldHVybiBwcmVBdXRoOwogICAgfQoKICAgIC8qKgogICAgKiBzZW5kIHJlcXVlc3RzIHRvIHVucmVnaXN0ZXIgYWxsIGh5cGVydGllcyByZWdpc3RlcmVkIGluIGRvbWFpbiByZWdpc3RyeQogICAgKiBAcmV0dXJuICAge1Byb21pc2V9ICAgICByZXR1cm4gYSBwcm9taXNlIGlmIHRoZSByZXN1bHQgb2YgdW5yZWdpc3RyYXRpb24gYWxsIGh5cGVydGllcwogICAgKi8KCiAgfSwgewogICAga2V5OiAndW5yZWdpc3RlckFsbEh5cGVydGllcycsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5yZWdpc3RlckFsbEh5cGVydGllcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB1bnJlZ2lzdGVyUmVzdWx0cyA9IFtdOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGZvciAodmFyIGluZGV4IGluIF90aGlzLmh5cGVydGllc0xpc3QpIHsKICAgICAgICAgIHZhciBoeXBlcnR5ID0gX3RoaXMuaHlwZXJ0aWVzTGlzdFtpbmRleF07CiAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMudW5yZWdpc3Rlckh5cGVydHlJbnN0YW5jZShoeXBlcnR5LnVzZXIudXNlclVSTCwgaHlwZXJ0eS5oeXBlcnR5VVJMKTsKICAgICAgICAgIHVucmVnaXN0ZXJSZXN1bHRzLnB1c2gocmVzdWx0KTsKICAgICAgICB9CgogICAgICAgIF9wcm9taXNlMi5kZWZhdWx0LmFsbCh1bnJlZ2lzdGVyUmVzdWx0cykudGhlbihmdW5jdGlvbiAoKSB7CgogICAgICAgICAgcmVzb2x2ZSgnc3VjY2Vzc2Z1bGx5IHVucmVnaXN0ZXJlZCBhbGwgaHlwZXJ0aWVzJyk7CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgYW4gaHlwZXJ0eUluc3RhbmNlIGluIHRoZSBEb21haW4gUmVnaXN0cnkKICAgICogIEBwYXJhbSAgIHtTdHJpbmd9ICAgICAgdXNlciAgICAgICAgdXNlciB1cmwKICAgICogIEBwYXJhbSAgIHtTdHJpbmd9ICAgICAgaHlwZXJ0eUluc3RhbmNlICAgSHlwZXJ0eUluc250YW5jZSB1cmwKICAgICoKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJIeXBlcnR5SW5zdGFuY2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVucmVnaXN0ZXJIeXBlcnR5SW5zdGFuY2UodXNlciwgaHlwZXJ0eUluc3RhbmNlKSB7CiAgICAgIC8vVE9ETyB3b3JraW5nIGJ1dCB0aGUgdXNlcgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1lc3NhZ2UgPSB7IHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5yZWdpc3RyeVVSTCwKICAgICAgICB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5fZG9tYWluICsgJy8nLAogICAgICAgIGJvZHk6IHsgdmFsdWU6IHsgdXNlcjogdXNlciwgaHlwZXJ0eVVSTDogaHlwZXJ0eUluc3RhbmNlIH0gfSB9OwoKICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgY29uc29sZS5sb2coJ3VucmVnaXN0ZXIgaHlwZXJ0eSBSZXBseScsIHJlcGx5KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqICBmdW5jdGlvbiB0byBkZWxldGUgYW4gZGF0YU9iamVjdEluc3RhbmNlIGluIHRoZSBEb21haW4gUmVnaXN0cnkKICAgICogIEBwYXJhbSAgIHtTdHJpbmd9ICAgIG5hbWUgICAgICBEYXRhT2JqZWN0TmFtZQogICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlRGF0YU9iamVjdEluc3RhbmNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVEYXRhT2JqZWN0SW5zdGFuY2UobmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1lc3NhZ2UgPSB7IHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5yZWdpc3RyeVVSTCwKICAgICAgICB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5fZG9tYWluICsgJy8nLAogICAgICAgIGJvZHk6IHsgdmFsdWU6IHsgbmFtZTogbmFtZSB9IH0gfTsKCiAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGNvbnNvbGUubG9nKCd1bnJlZ2lzdGVyIGRhdGFPYmplY3QgUmVwbHknLCByZXBseSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0byB1cGRhdGUgYW4gSHlwZXJ0eQogICAgKi8KCiAgfSwgewogICAga2V5OiAndXBkYXRlSHlwZXJ0eUluc3RhbmNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVIeXBlcnR5SW5zdGFuY2UocmVzb3VyY2UsIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbWVzc2FnZSA9IHsgdHlwZTogJ1VQREFURScsIGZyb206IF90aGlzLnJlZ2lzdHJ5VVJMLAogICAgICAgIHRvOiAnZG9tYWluOi8vcmVnaXN0cnkuJyArIF90aGlzLl9kb21haW4gKyAnLycsCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogcmVzb3VyY2UsIHZhbHVlOiB2YWx1ZSB9IH07CgogICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0LnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVkIGh5cGVydHkgcmVwbHknLCByZXBseSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiByZWdpc3RlciBhIG5ldyBzdWJzY3JpYmVyIGluIHRoZSBkYXRhT2JqZWN0IHJlZ2lzdGVyZWQKICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGRhdGFPYmplY3RVUkwgICAgZGF0YU9iamVjdCBVUkwKICAgICogQHBhcmFtICB7U3RyaW5nfSAgIHN1YnNjcmliZXJVUkwgICAgc3Vic2NyaWJlciBVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVyU3Vic2NyaWJlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJTdWJzY3JpYmVyKGRhdGFPYmplY3RVUkwsIHN1YnNjcmliZXJVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGRhdGFPYmplY3QgPSBfdGhpcy5kYXRhT2JqZWN0TGlzdFtkYXRhT2JqZWN0VVJMXTsKCiAgICAgIGlmIChkYXRhT2JqZWN0KSB7CiAgICAgICAgZGF0YU9iamVjdC5zdWJzY3JpYmVycy5wdXNoKHN1YnNjcmliZXJVUkwpOwogICAgICAgIF90aGlzLmRhdGFPYmplY3RMaXN0W2RhdGFPYmplY3RVUkxdID0gZGF0YU9iamVjdDsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBnZXQgdGhlIHN1YnNjcmliZXJzIHJlZ2lzdGVyZWQgd2l0aGluIGEgZGF0YU9iamVjdAogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgICAgIGRhdGFPYmplY3RVUkwgICAgZGF0YU9iamVjdCBVUkwKICAgICogQHBhcmFtICB7QXJyYXk8U3RyaW5nPn0gICBTdWJzdHJpYmVycyBMaXN0CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXREYXRhT2JqZWN0U3Vic2NyaWJlcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGFPYmplY3RTdWJzY3JpYmVycyhkYXRhT2JqZWN0VVJMKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBkYXRhT2JqZWN0ID0gX3RoaXMuZGF0YU9iamVjdExpc3RbZGF0YU9iamVjdFVSTF07CgogICAgICBpZiAoZGF0YU9iamVjdCkgewogICAgICAgIHJldHVybiBkYXRhT2JqZWN0LnN1YnNjcmliZXJzOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93ICdObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCc7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogVG8gcmVnaXN0ZXIgYSBuZXcgRGF0YSBPYmplY3QgaW4gdGhlIHJ1bnRpbWUgd2hpY2ggcmV0dXJucyB0aGUgZGF0YU9iamVjdFVSTCBhbGxvY2F0ZWQgdG8gdGhlIG5ldyBEYXRhIE9iamVjdC4KICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgIGlkZW50aWZpZXIgICAgICAgICAgICBpZGVudGlmaWVyCiAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgICBkYXRhT2JqZWN0c2NoZW1hICAgICAgICAgICAgZGF0YU9iamVjdHNjaGVtYQogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgZGF0YU9iamVjdFVybCAgICAgICAgZGF0YU9iamVjdFVybAogICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgZGF0YU9iamVjdFJlcG9ydGVyICAgICAgICAgZGF0YU9iamVjdFJlcG9ydGVyCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlckRhdGFPYmplY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyRGF0YU9iamVjdChpZGVudGlmaWVyLCBkYXRhT2JqZWN0c2NoZW1hLCBkYXRhT2JqZWN0VXJsLCBkYXRhT2JqZWN0UmVwb3J0ZXIsIGF1dGhvcmlzZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIC8vbWVzc2FnZSB0byByZWdpc3RlciB0aGUgbmV3IGh5cGVydHksIHdpdGhpbiB0aGUgZG9tYWluIHJlZ2lzdHJ5CiAgICAgICAgdmFyIG1lc3NhZ2VWYWx1ZSA9IHsgbmFtZTogaWRlbnRpZmllciwgc2NoZW1hOiBkYXRhT2JqZWN0c2NoZW1hLCB1cmw6IGRhdGFPYmplY3RVcmwsIGV4cGlyZXM6IF90aGlzLmV4cGlyZXNUaW1lLCByZXBvcnRlcjogZGF0YU9iamVjdFJlcG9ydGVyLCBwcmVBdXRoOiBhdXRob3Jpc2UsIHN1YnNjcmliZXJzOiBbXSB9OwoKICAgICAgICBfdGhpcy5kYXRhT2JqZWN0TGlzdFtkYXRhT2JqZWN0VXJsXSA9IG1lc3NhZ2VWYWx1ZTsKCiAgICAgICAgdmFyIG1lc3NhZ2UgPSBfdGhpcy5tZXNzYWdlRmFjdG9yeS5jcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdChfdGhpcy5yZWdpc3RyeVVSTCwgJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5yZWdpc3RyeURvbWFpbiArICcvJywgbWVzc2FnZVZhbHVlLCAncG9saWN5Jyk7CgogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJz09PT4gcmVnaXN0ZXJEYXRhT2JqZWN0IFJlcGx5OiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZSgnb2snKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgnZXJyb3Igb24gcmVnaXN0ZXIgRGF0YU9iamVjdCcpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gcmVnaXN0ZXIgYSBuZXcgSHlwZXJ0eSBpbiB0aGUgcnVudGltZSB3aGljaCByZXR1cm5zIHRoZSBIeXBlcnR5VVJMIGFsbG9jYXRlZCB0byB0aGUgbmV3IEh5cGVydHkuCiAgICAqIEBwYXJhbSAge1NhbmRib3h9ICAgICAgICAgICAgIHNhbmRib3ggICAgICAgICAgICAgICBzYW5kYm94CiAgICAqIEBwYXJhbSAge0h5cGVydHlDYXRhbG9ndWVVUkx9IEh5cGVydHlDYXRhbG9ndWVVUkwgICBkZXNjcmlwdG9yCiAgICAqIEByZXR1cm4ge0h5cGVydHlVUkx9ICAgICAgICAgIEh5cGVydHlVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVySHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJIeXBlcnR5KHNhbmRib3gsIGRlc2NyaXB0b3JVUkwsIGRlc2NyaXB0b3IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vYXNzdW1pbmcgZGVzY3JpcHRvciBjb21lIGluIHRoaXMgZm9ybWF0LCB0aGUgc2VydmljZS1wcm92aWRlci1kb21haW4gdXJsIGlzIHJldHJpZXZlZCBieSBhIHNwbGl0IGluc3RydWN0aW9uCiAgICAgIC8vaHlwZXJ0eS1jYXRhbG9ndWU6Ly88c2VydmljZS1wcm92aWRlci1kb21haW4+LzxjYXRhbG9ndWUtb2JqZWN0LWlkZW50aWZpZXI+CiAgICAgIHZhciBkb21haW5VcmwgPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoZGVzY3JpcHRvclVSTCkuZG9tYWluOwoKICAgICAgaWYgKGRvbWFpblVybC5pbmNsdWRlcygnY2F0YWxvZ3VlJykpIHsKICAgICAgICBkb21haW5VcmwgPSBkb21haW5VcmwucmVwbGFjZSgnY2F0YWxvZ3VlLicsICcnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzLmlkTW9kdWxlLmdldElkZW50aXR5QXNzZXJ0aW9uKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICB2YXIgdXNlclByb2ZpbGUgPSByZXN1bHQudXNlclByb2ZpbGU7CiAgICAgICAgICB2YXIgaWRlbnRpdHlVUkwgPSB1c2VyUHJvZmlsZS51c2VyVVJMOwoKICAgICAgICAgIGlmIChfdGhpcy5fbWVzc2FnZUJ1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJlamVjdCgnTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gcmVnaXN0ZXJTdHViJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL2NhbGwgY2hlY2sgaWYgdGhlIHByb3Rvc3R1YiBleGlzdAogICAgICAgICAgICBfdGhpcy5yZXNvbHZlKCdoeXBlcnR5LXJ1bnRpbWU6Ly8nICsgZG9tYWluVXJsKS50aGVuKGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgX3RoaXMucmVnaXN0cnlEb21haW4gPSBkb21haW5Vcmw7CgogICAgICAgICAgICAgIC8vIFRPRE86IHNob3VsZCBiZSBpbXBsZW1lbnRlZCB3aXRoIGFkZHJlc3NlcyBwb2xsCiAgICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIHdlIHdpbGwgcmVxdWVzdCBhbmQgcmV0dXJuIG9ubHkgb25lCiAgICAgICAgICAgICAgLy8gYWRkcmVzcwogICAgICAgICAgICAgIHZhciBudW1iZXJPZkFkZHJlc3NlcyA9IDE7CiAgICAgICAgICAgICAgX3RoaXMuYWRkcmVzc0FsbG9jYXRpb24uY3JlYXRlKGRvbWFpblVybCwgbnVtYmVyT2ZBZGRyZXNzZXMpLnRoZW4oZnVuY3Rpb24gKGFkZGVyZXNzTGlzdCkgewoKICAgICAgICAgICAgICAgIGFkZGVyZXNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChhZGRyZXNzKSB7CgogICAgICAgICAgICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihhZGRyZXNzICsgJy9zdGF0dXMnLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2UgYWRkTGlzdGVuZXIgZm9yIDogJywgYWRkcmVzcyArICcvc3RhdHVzIC0+ICcgKyBtc2cpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHZhciBoeXBlcnR5ID0gbmV3IF9IeXBlcnR5SW5zdGFuY2UyLmRlZmF1bHQoX3RoaXMuaWRlbnRpZmllciwgX3RoaXMucmVnaXN0cnlVUkwsIGRlc2NyaXB0b3JVUkwsIGRlc2NyaXB0b3IsIGFkZGVyZXNzTGlzdFswXSwgdXNlclByb2ZpbGUpOwoKICAgICAgICAgICAgICAgIF90aGlzLmh5cGVydGllc0xpc3QucHVzaChoeXBlcnR5KTsKCiAgICAgICAgICAgICAgICAvL2NoZWNrIHdoZXRoZXIgdGhlIHJlY2VpdmVkIHNhbmJveCBlIEFwcGxpY2F0aW9uU2FuZGJveCBvciBhIG5vcm1hbCBzYW5kYm94CiAgICAgICAgICAgICAgICBpZiAoc2FuZGJveC50eXBlID09PSAnYXBwJykgewogICAgICAgICAgICAgICAgICBfdGhpcy5zYW5kYm94ZXNMaXN0LmFwcFNhbmRib3hbYWRkZXJlc3NMaXN0WzBdXSA9IHNhbmRib3g7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNhbmRib3gudHlwZSA9PT0gJ25vcm1hbCcpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W2FkZGVyZXNzTGlzdFswXV0gPSBzYW5kYm94OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXcm9uZyBTYW5kYm94VHlwZScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciByZXNvdXJjZXMgPSB2b2lkIDA7CgogICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGh5cGVydHkgcmVzb3VyY2VzIGlzIGEgdmVjdG9yIG9yIGEgc3RyaW5nCiAgICAgICAgICAgICAgICAvLyBUT0RPIGRlbGV0ZSBsYXRlciB3aGVuIGNhdGFsb2d1ZSBpcyBmaXhlZAogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXNjcmlwdG9yLmh5cGVydHlUeXBlID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICByZXNvdXJjZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnB1c2goZGVzY3JpcHRvci5oeXBlcnR5VHlwZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZXNvdXJjZXMgPSBkZXNjcmlwdG9yLmh5cGVydHlUeXBlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yRGF0YVNjaGVtYSA9IGRlc2NyaXB0b3IuZGF0YU9iamVjdHM7CiAgICAgICAgICAgICAgICB2YXIgZGF0YVNjaGVtYXNBcnJheSA9IFtdOwoKICAgICAgICAgICAgICAgIC8vdGhpcyB3aWxsIGNyZWF0ZSBhIGFycmF5IHdpdGggYSBQcm9taXNlIGluIGVhY2ggcG9zaXRpb24KICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGRlc2NyaXB0b3JEYXRhU2NoZW1hKSB7CiAgICAgICAgICAgICAgICAgIGRhdGFTY2hlbWFzQXJyYXkucHVzaChfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKGRlc2NyaXB0b3JEYXRhU2NoZW1hW2luZGV4XSkpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIGFzIHNvb24gYXMgdGhlIHByZXZpb3VzIGFycmF5IGlzIGNvbXBsZXRlZCwgdGhpcyB3aWxsIHdhaXQgZm9yIHRoZSByZXNvbHZlIG9mIGFsbCBwcm9taXNlcyBpbiB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIF9wcm9taXNlMi5kZWZhdWx0LmFsbChkYXRhU2NoZW1hc0FycmF5KS50aGVuKGZ1bmN0aW9uIChkYXRhU2NoZW1hcykgewoKICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkRGF0YVNjaGVtYXMgPSBbXTsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2luZGV4IGluIGRhdGFTY2hlbWFzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFTY2hlbWEgPSBkYXRhU2NoZW1hc1tfaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkRGF0YVNjaGVtYXMucHVzaChkYXRhU2NoZW1hLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzLnNjaGVtZS5jb25zdGFudCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIC8vbWVzc2FnZSB0byByZWdpc3RlciB0aGUgbmV3IGh5cGVydHksIHdpdGhpbiB0aGUgZG9tYWluIHJlZ2lzdHJ5CiAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlVmFsdWUgPSB7IHVzZXI6IGlkZW50aXR5VVJMLCBoeXBlcnR5RGVzY3JpcHRvclVSTDogZGVzY3JpcHRvclVSTCwgaHlwZXJ0eVVSTDogYWRkZXJlc3NMaXN0WzBdLCBleHBpcmVzOiBfdGhpcy5leHBpcmVzVGltZSwgcmVzb3VyY2VzOiByZXNvdXJjZXMsIGRhdGFTY2hlbWVzOiBmaWx0ZXJlZERhdGFTY2hlbWFzIH07CgogICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IF90aGlzLm1lc3NhZ2VGYWN0b3J5LmNyZWF0ZUNyZWF0ZU1lc3NhZ2VSZXF1ZXN0KF90aGlzLnJlZ2lzdHJ5VVJMLCAnZG9tYWluOi8vcmVnaXN0cnkuJyArIF90aGlzLnJlZ2lzdHJ5RG9tYWluICsgJy8nLCBtZXNzYWdlVmFsdWUsICdwb2xpY3knKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT0+IFJlZ2lzdGVySHlwZXJ0eSBSZXBseTogJywgcmVwbHkpOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIC8vdGltZXIgdG8ga2VlcCB0aGUgcmVnaXN0cmF0aW9uIGFsaXZlCiAgICAgICAgICAgICAgICAgIC8vIHRoZSB0aW1lIGlzIGRlZmluZWQgYnkgYSBsaXR0bGUgbGVzcyB0aGFuIGhhbGYgb2YgdGhlIGV4cGlyZXMgdGltZSBkZWZpbmVkCiAgICAgICAgICAgICAgICAgIHZhciBrZWVwQWxpdmVUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBfdGhpcy5tZXNzYWdlRmFjdG9yeS5jcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdChfdGhpcy5yZWdpc3RyeVVSTCwgJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBfdGhpcy5yZWdpc3RyeURvbWFpbiArICcvJywgbWVzc2FnZVZhbHVlLCAncG9saWN5Jyk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJz09PT4gS2VlcEFsaXZlIFJlcGx5OiAnLCByZXBseSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIF90aGlzLmV4cGlyZXNUaW1lIC8gMS4xIC8gMiAqIDEwMDApOwoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0h5cGVydHkgU2NoZW1hcycsIGZpbHRlcmVkRGF0YVNjaGVtYXMpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSHlwZXJ0eSByZXNvdXJjZXMnLCByZXNvdXJjZXMpOwoKICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhZGRlcmVzc0xpc3RbMF0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FkZHJlc3MgUmVhc29uOiAnLCByZWFzb24pOwogICAgICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJlamVjdCgnRmFpbGVkIHRvIG9idGFpbiBhbiBpZGVudGl0eScpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gdW5yZWdpc3RlciBhIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBIeXBlcnR5CiAgICAqIEBwYXJhbSAge0h5cGVydHlVUkx9ICAgICAgICAgIEh5cGVydHlVUkwgdXJsICAgICAgICB1cmwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1bnJlZ2lzdGVySHlwZXJ0eSh1cmwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKICAgICAgICB2YXIgaW5kZXggPSAwOwoKICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBfdGhpcy5oeXBlcnRpZXNMaXN0Lmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgICAgdmFyIGh5cGVydHkgPSBfdGhpcy5oeXBlcnRpZXNMaXN0W2luZGV4XTsKICAgICAgICAgIGlmIChoeXBlcnR5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgaWYgKGh5cGVydHkuaHlwZXJ0eVVSTCA9PT0gdXJsKSB7CiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZm91bmQgPT09IGZhbHNlKSB7CiAgICAgICAgICByZWplY3QoJ0h5cGVydHkgbm90IGZvdW5kJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5oeXBlcnRpZXNMaXN0W2luZGV4XTsKICAgICAgICAgIHJlc29sdmUoJ0h5cGVydHkgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyBkaXNjb3ZlciBwcm90b2NvbCBzdHVicyBhdmFpbGFibGUgaW4gdGhlIHJ1bnRpbWUgZm9yIGEgY2VydGFpbiBkb21haW4uIElmIGF2YWlsYWJsZSwgaXQgcmV0dXJucyB0aGUgcnVudGltZSB1cmwgZm9yIHRoZSBwcm90b2NvbCBzdHViIHRoYXQgY29ubmVjdHMgdG8gdGhlIHJlcXVlc3RlZCBkb21haW4uIFJlcXVpcmVkIGJ5IHRoZSBydW50aW1lIEJVUyB0byByb3V0ZSBtZXNzYWdlcyB0byByZW1vdGUgc2VydmVycyBvciBwZWVycyAoZG8gd2UgbmVlZCBzb21ldGhpbmcgc2ltaWxhciBmb3IgSHlwZXJ0aWVzPykuCiAgICAqIEBwYXJhbSAge0RvbWFpblVSTH0gICAgICAgICAgIERvbWFpblVSTCAgICAgICAgICAgIHVybAogICAgKiBAcmV0dXJuIHtSdW50aW1lVVJMfSAgICAgICAgICAgUnVudGltZVVSTAogICAgKi8KCiAgfSwgewogICAga2V5OiAnZGlzY292ZXJQcm90b3N0dWInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2NvdmVyUHJvdG9zdHViKHVybCkgewogICAgICBpZiAoIXVybCkgdGhyb3cgbmV3IEVycm9yKCdQYXJhbWV0ZXIgdXJsIG5lZWRlZCcpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciByZXF1ZXN0ID0gX3RoaXMucHJvdG9zdHVic0xpc3RbdXJsXTsKCiAgICAgICAgaWYgKHJlcXVlc3QgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdyZXF1ZXN0VXBkYXRlIGNvdWxkblwndCBnZXQgdGhlIFByb3Rvc3R1YlVSTCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKHJlcXVlc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUbyByZWdpc3RlciBhIG5ldyBQcm90b2NvbCBTdHViIGluIHRoZSBydW50aW1lIGluY2x1ZGluZyBhcyBpbnB1dCBwYXJhbWV0ZXJzIHRoZSBmdW5jdGlvbiB0byBwb3N0TWVzc2FnZSwgdGhlIERvbWFpblVSTCB0aGF0IGlzIGNvbm5lY3RlZCB3aXRoIHRoZSBzdHViLCB3aGljaCByZXR1cm5zIHRoZSBSdW50aW1lVVJMIGFsbG9jYXRlZCB0byB0aGUgbmV3IFByb3RvY29sU3R1Yi4KICAgICAqIEBwYXJhbSB7U2FuZGJveH0gICAgICAgIFNhbmRib3gKICAgICAqIEBwYXJhbSAge0RvbWFpblVSTH0gICAgIERvbWFpblVSTCBzZXJ2aWNlIHByb3ZpZGVyIGRvbWFpbgogICAgICogQHJldHVybiB7UnVudGltZVByb3RvU3R1YlVSTH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlclN0dWInLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyU3R1YihzYW5kYm94LCBkb21haW5VUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHJ1bnRpbWVQcm90b1N0dWJVUkwgPSB2b2lkIDA7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgLy9jaGVjayBpZiBtZXNzYWdlQnVzIGlzIHJlZ2lzdGVyZWQgaW4gcmVnaXN0cnkgb3Igbm90CiAgICAgICAgaWYgKF90aGlzLl9tZXNzYWdlQnVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgnTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gcmVnaXN0ZXJTdHViJyk7CiAgICAgICAgfQoKICAgICAgICAvL1RPRE8gaW1wbGVtZW50IGEgdW5pcXVlIG51bWJlciBmb3IgdGhlIHByb3Rvc3R1YlVSTAogICAgICAgIGlmICghZG9tYWluVVJMLmluZGV4T2YoJ21zZy1ub2RlLicpKSB7CiAgICAgICAgICBkb21haW5VUkwgPSBkb21haW5VUkwuc3Vic3RyaW5nKGRvbWFpblVSTC5pbmRleE9mKCcuJykgKyAxKTsKICAgICAgICB9CgogICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgPSAnbXNnLW5vZGUuJyArIGRvbWFpblVSTCArICcvcHJvdG9zdHViLycgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCArIDEpOwoKICAgICAgICAvLyBUT0RPOiBPcHRpbWl6ZSB0aGlzCiAgICAgICAgX3RoaXMucHJvdG9zdHVic0xpc3RbZG9tYWluVVJMXSA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICAgICAgX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W3J1bnRpbWVQcm90b1N0dWJVUkxdID0gc2FuZGJveDsKCiAgICAgICAgLy8gc2FuZGJveC5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uKG1zZykgewogICAgICAgIC8vICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAvLyB9KTsKCiAgICAgICAgcmVzb2x2ZShydW50aW1lUHJvdG9TdHViVVJMKTsKCiAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIocnVudGltZVByb3RvU3R1YlVSTCArICcvc3RhdHVzJywgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgaWYgKG1zZy5yZXNvdXJjZSA9PT0gbXNnLnRvICsgJy9zdGF0dXMnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSdW50aW1lUHJvdG9zdHViVVJML3N0YXR1cyBtZXNzYWdlOiAnLCBtc2cuYm9keS52YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyB1bnJlZ2lzdGVyIGEgcHJldmlvdXNseSByZWdpc3RlcmVkIHByb3RvY29sIHN0dWIKICAgICogQHBhcmFtICB7SHlwZXJ0eVJ1bnRpbWVVUkx9ICAgSHlwZXJ0eVJ1bnRpbWVVUkwgICAgIGh5cGVydHlSdW50aW1lVVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICd1bnJlZ2lzdGVyU3R1YicsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5yZWdpc3RlclN0dWIoaHlwZXJ0eVJ1bnRpbWVVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHJ1bnRpbWVQcm90b1N0dWJVUkwgPSB2b2lkIDA7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIGRhdGEgPSBfdGhpcy5wcm90b3N0dWJzTGlzdFtoeXBlcnR5UnVudGltZVVSTF07CgogICAgICAgIGlmIChkYXRhID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgnRXJyb3Igb24gdW5yZWdpc3RlclN0dWI6IEh5cGVydHkgbm90IGZvdW5kJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5wcm90b3N0dWJzTGlzdFtoeXBlcnR5UnVudGltZVVSTF07CiAgICAgICAgICByZXNvbHZlKCdQcm90b3N0dWJVUkwgcmVtb3ZlZCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUbyByZWdpc3RlciBhIG5ldyBJZGVudGl0eSBQcm92aWRlciBwcm94eSBpbiB0aGUgcnVudGltZSBpbmNsdWRpbmcgYXMgaW5wdXQgcGFyYW1ldGVycyB0aGUgZnVuY3Rpb24gdG8gcG9zdE1lc3NhZ2UsIHRoZSBEb21haW5VUkwgdGhhdCBpcyBjb25uZWN0ZWQgd2l0aCB0aGUgc3R1Yiwgd2hpY2ggcmV0dXJucyB0aGUgUnVudGltZVVSTCBhbGxvY2F0ZWQgdG8gdGhlIG5ldyBQcm90b2NvbFN0dWIuCiAgICAgKiBAcGFyYW0ge1NhbmRib3h9ICAgICAgICBTYW5kYm94CiAgICAgKiBAcGFyYW0gIHtEb21haW5VUkx9ICAgICBEb21haW5VUkwgc2VydmljZSBwcm92aWRlciBkb21haW4KICAgICAqIEByZXR1cm4ge1J1bnRpbWVJZHBQcm94eVVSTH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlcklkcFByb3h5JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlcklkcFByb3h5KHNhbmRib3gsIGRvbWFpblVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaWRwUHJveHlTdHViVVJMID0gdm9pZCAwOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIC8vY2hlY2sgaWYgbWVzc2FnZUJ1cyBpcyByZWdpc3RlcmVkIGluIHJlZ2lzdHJ5IG9yIG5vdAogICAgICAgIGlmIChfdGhpcy5fbWVzc2FnZUJ1cyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ01lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIHJlZ2lzdGVyU3R1YicpOwogICAgICAgIH0KCiAgICAgICAgaWRwUHJveHlTdHViVVJMID0gJ2RvbWFpbi1pZHA6Ly8nICsgZG9tYWluVVJMICsgJy9zdHViLycgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCArIDEpOwoKICAgICAgICAvLyBUT0RPOiBPcHRpbWl6ZSB0aGlzCiAgICAgICAgX3RoaXMuaWRwUHJveHlMaXN0W2RvbWFpblVSTF0gPSBpZHBQcm94eVN0dWJVUkw7CiAgICAgICAgX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W2lkcFByb3h5U3R1YlVSTF0gPSBzYW5kYm94OwoKICAgICAgICAvLyBzYW5kYm94LmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24obXNnKSB7CiAgICAgICAgLy8gICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgIC8vIH0pOwoKICAgICAgICByZXNvbHZlKGlkcFByb3h5U3R1YlVSTCk7CgogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGlkcFByb3h5U3R1YlVSTCArICcvc3RhdHVzJywgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgaWYgKG1zZy5yZXNvdXJjZSA9PT0gbXNnLnRvICsgJy9zdGF0dXMnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpZHBQcm94eVN0dWJVUkwvc3RhdHVzIG1lc3NhZ2U6ICcsIG1zZy5ib2R5LnZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIGRpc2NvdmVyIGlkcFByb3h5IHN0dWJzIGF2YWlsYWJsZSBpbiB0aGUgcnVudGltZSBmb3IgYSBjZXJ0YWluIGRvbWFpbi4gSWYgYXZhaWxhYmxlLCBpdCByZXR1cm5zIHRoZSBydW50aW1lIHVybCBmb3IgdGhlIGlkcFByb3h5IHN0dWIgdGhhdCBjb25uZWN0cyB0byB0aGUgcmVxdWVzdGVkIGRvbWFpbi4gUmVxdWlyZWQgYnkgdGhlIHJ1bnRpbWUgQlVTIHRvIHJvdXRlIG1lc3NhZ2VzIHRvIHJlbW90ZSBzZXJ2ZXJzIG9yIHBlZXJzCiAgICAqIEBwYXJhbSAge0RvbWFpblVSTH0gICAgICAgICAgIERvbWFpblVSTCAgICAgICAgICAgIHVybAogICAgKiBAcmV0dXJuIHtSdW50aW1lVVJMfSAgICAgICAgICAgUnVudGltZVVSTCAgICAgICAgIGlkcFByb3h5VXJsCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkaXNjb3ZlcklkcFByb3h5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb3ZlcklkcFByb3h5KHVybCkgewogICAgICBpZiAoIXVybCkgdGhyb3cgbmV3IEVycm9yKCdQYXJhbWV0ZXIgdXJsIG5lZWRlZCcpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciByZXF1ZXN0ID0gX3RoaXMuaWRwUHJveHlMaXN0W3VybF07CgogICAgICAgIGlmIChyZXF1ZXN0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgncmVxdWVzdFVwZGF0ZSBjb3VsZG5cJ3QgZ2V0IHRoZSBpZHBQcm94eVVSTCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKHJlcXVlc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHJlZ2lzdGVyIGEgbmV3IFBvbGljeSBFbmZvcmNlciBpbiB0aGUgcnVudGltZSBpbmNsdWRpbmcgYXMgaW5wdXQgcGFyYW1ldGVycyB0aGUgZnVuY3Rpb24gdG8gcG9zdE1lc3NhZ2UsIHRoZSBIeXBlcnR5VVJMIGFzc29jaWF0ZWQgd2l0aCB0aGUgUEVQLCB3aGljaCByZXR1cm5zIHRoZSBSdW50aW1lVVJMIGFsbG9jYXRlZCB0byB0aGUgbmV3IFBvbGljeSBFbmZvcmNlciBjb21wb25lbnQuCiAgICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gcG9zdE1lc3NhZ2UgcG9zdE1lc3NhZ2UKICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTH0gICAgICAgICAgSHlwZXJ0eVVSTCAgICAgICAgICAgIGh5cGVydHkKICAgICogQHJldHVybiB7SHlwZXJ0eVJ1bnRpbWVVUkx9ICAgSHlwZXJ0eVJ1bnRpbWVVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVyUEVQJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlclBFUChwb3N0TWVzc2FnZSwgaHlwZXJ0eSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgLy9UT0RPIGNoZWNrIHdoYXQgcGFyYW1ldGVyIGluIHRoZSBwb3N0TWVzc2FnZSB0aGUgcGVwIGlzLgogICAgICAgIF90aGlzLnBlcExpc3RbaHlwZXJ0eV0gPSBwb3N0TWVzc2FnZTsKICAgICAgICByZXNvbHZlKCdQRVAgcmVnaXN0ZXJlZCB3aXRoIHN1Y2Nlc3MnKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHVucmVnaXN0ZXIgYSBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgcHJvdG9jb2wgc3R1YgogICAgKiBAcGFyYW0gIHtIeXBlcnR5UnVudGltZVVSTH0gICBIeXBlcnR5UnVudGltZVVSTCAgICAgSHlwZXJ0eVJ1bnRpbWVVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJQRVAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVucmVnaXN0ZXJQRVAoSHlwZXJ0eVJ1bnRpbWVVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMucGVwTGlzdFtIeXBlcnR5UnVudGltZVVSTF07CgogICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdQZXAgTm90IGZvdW5kLicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKCdQRVAgc3VjY2Vzc2Z1bGx5IHJlbW92ZWQuJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gcmVjZWl2ZSBzdGF0dXMgZXZlbnRzIGZyb20gY29tcG9uZW50cyByZWdpc3RlcmVkIGluIHRoZSBSZWdpc3RyeS4KICAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgTWVzc2FnZS5NZXNzYWdlICAgICAgIGV2ZW50CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvbkV2ZW50JywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkV2ZW50KGV2ZW50KSB7fQogICAgLy8gVE9ETyBib2R5Li4uCgoKICAgIC8qKgogICAgKiBUbyBkaXNjb3ZlciBzYW5kYm94ZXMgYXZhaWxhYmxlIGluIHRoZSBydW50aW1lIGZvciBhIGNlcnRhaW4gZG9tYWluLiBSZXF1aXJlZCBieSB0aGUgcnVudGltZSBVQSB0byBhdm9pZCBtb3JlIHRoYW4gb25lIHNhbmRib3ggZm9yIHRoZSBzYW1lIGRvbWFpbi4KICAgICogQHBhcmFtICB7RG9tYWluVVJMfSBEb21haW5VUkwgdXJsCiAgICAqIEByZXR1cm4ge1J1bnRpbWVTYW5kYm94fSAgICAgICAgICAgUnVudGltZVNhbmRib3gKICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldFNhbmRib3gnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNhbmRib3godXJsKSB7CiAgICAgIGlmICghdXJsKSB0aHJvdyBuZXcgRXJyb3IoJ1BhcmFtZXRlciB1cmwgbmVlZGVkJyk7CiAgICAgIGNvbnNvbGUubG9nKCdnZXRTYW5kYm94OiAnLCB1cmwpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciByZXF1ZXN0ID0gdm9pZCAwOwoKICAgICAgICAvL2ZpcnN0IHRyeSB0byBmaW5kIHRoZSB1cmwgaW4gdGhlIGFwcFNhbmRib3ggbGlzdAogICAgICAgIHJlcXVlc3QgPSBfdGhpcy5zYW5kYm94ZXNMaXN0LmFwcFNhbmRib3hbdXJsXTsKCiAgICAgICAgLy9pZiBubyBhcHBTYW5kYm94IHdhcyBmb3VuZCwgdHJ5IHRvIHNlYXJjaCBpbiB0aGUgbm9ybWFsIHNhbmRib3hlcyBsaXN0CiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgICAgICByZXF1ZXN0ID0gX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W3VybF07CgogICAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CgogICAgICAgICAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKHVybCkuZG9tYWluOwoKICAgICAgICAgICAgLy8gc2VhcmNoIGluIHRoZSBzYW5kYm94ZXMgbGlzdCBmb3IgYSBlbnRyeSBjb250YWluaW5nIHRoZSBkb21haW4gZ2l2ZW4KICAgICAgICAgICAgZm9yICh2YXIgc2FuZGJveCBpbiBfdGhpcy5zYW5kYm94ZXNMaXN0LnNhbmRib3gpIHsKICAgICAgICAgICAgICBpZiAoc2FuZGJveC5pbmNsdWRlcyhkb21haW4pKSB7CiAgICAgICAgICAgICAgICByZXF1ZXN0ID0gX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W3NhbmRib3hdOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoIXJlcXVlc3QpIHsKICAgICAgICAgIHJlamVjdCgnbm8gc2FuZGJveCBmb3VuZCBmb3I6ICcgKyB1cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKHJlcXVlc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHZlcmlmeSBpZiBzb3VyY2UgaXMgdmFsaWQgYW5kIHRvIHJlc29sdmUgdGFyZ2V0IHJ1bnRpbWUgdXJsIGFkZHJlc3MgaWYgbmVlZGVkIChlZyBwcm90b3N0dWIgcnVudGltZSB1cmwgaW4gY2FzZSB0aGUgbWVzc2FnZSBpcyB0byBiZSBkaXNwYXRjaGVkIHRvIGEgcmVtb3RlIGVuZHBvaW50KS4KICAgICogQHBhcmFtICB7VVJMLlVSTH0gIHVybCAgICAgICB1cmwKICAgICogQHJldHVybiB7UHJvbWlzZTxVUkwuVVJMPn0gICAgICAgICAgICAgICAgIFByb21pc2UgPFVSTC5VUkw+CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZXNvbHZlJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlKHVybCkgewogICAgICBjb25zb2xlLmxvZygncmVzb2x2ZSAnICsgdXJsKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vc3BsaXQgdGhlIHVybCB0byBmaW5kIHRoZSBkb21haW5VUkwuIGRlYWxzIHdpdGggdGhlIHVybCBmb3IgZXhhbXBsZSBhczoKICAgICAgLy8iaHlwZXJ0eS1ydW50aW1lOi8vc3AxL3Byb3Rvc3R1Yi8xMjMiLAogICAgICB2YXIgZGl2aWRlZFVSTCA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKSh1cmwpOwogICAgICB2YXIgZG9tYWluVXJsID0gZGl2aWRlZFVSTC5kb21haW47CiAgICAgIHZhciB0eXBlID0gZGl2aWRlZFVSTC50eXBlOwoKICAgICAgLy8gcmVzb2x2ZSB0aGUgZG9tYWluIHByb3Rvc3R1YiBpbiBjYXNlIG9mIGEgbWVzc2FnZSB0byBnbG9iYWwgcmVnaXN0cnkKICAgICAgaWYgKHVybC5pbmNsdWRlcygnZ2xvYmFsOi8vcmVnaXN0cnknKSkgewogICAgICAgIGRvbWFpblVybCA9IF90aGlzLl9kb21haW47CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBpZiAoIWRvbWFpblVybC5pbmRleE9mKCdtc2ctbm9kZS4nKSB8fCAhZG9tYWluVXJsLmluZGV4T2YoJ3JlZ2lzdHJ5LicpKSB7CiAgICAgICAgICBkb21haW5VcmwgPSBkb21haW5Vcmwuc3Vic3RyaW5nKGRvbWFpblVybC5pbmRleE9mKCcuJykgKyAxKTsKICAgICAgICB9CgogICAgICAgIHZhciByZXF1ZXN0ID0gdm9pZCAwOwogICAgICAgIGlmICh0eXBlID09PSAnZG9tYWluLWlkcCcpIHsKICAgICAgICAgIHJlcXVlc3QgPSBfdGhpcy5pZHBQcm94eUxpc3RbZG9tYWluVXJsXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVxdWVzdCA9IF90aGlzLnByb3Rvc3R1YnNMaXN0W2RvbWFpblVybF07CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKCdydW50aW1lOnN0dWJMb2FkZWQnLCBmdW5jdGlvbiAoZG9tYWluVXJsKSB7CiAgICAgICAgICByZXF1ZXN0ID0gX3RoaXMucHJvdG9zdHVic0xpc3RbZG9tYWluVXJsXTsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnUmVzb2x2ZWQgUHJvdG9zdHViOiAnLCByZXF1ZXN0KTsKICAgICAgICAgIHJlc29sdmUocmVxdWVzdCk7CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3J1bnRpbWU6aWRwUHJveHlMb2FkZWQnLCBmdW5jdGlvbiAoZG9tYWluVXJsKSB7CiAgICAgICAgICByZXF1ZXN0ID0gX3RoaXMuaWRwUHJveHlMaXN0W2RvbWFpblVybF07CiAgICAgICAgICBjb25zb2xlLmluZm8oJ1Jlc29sdmVkIElEUFByb3h5OiAnLCByZXF1ZXN0KTsKICAgICAgICAgIHJlc29sdmUocmVxdWVzdCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChyZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnUmVzb2x2ZWQ6ICcsIHJlcXVlc3QpOwogICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHR5cGUgPT09ICdkb21haW4taWRwJykgewogICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdydW50aW1lOmxvYWRJZHBQcm94eScsIGRvbWFpblVybCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdydW50aW1lOmxvYWRTdHViJywgZG9tYWluVXJsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ21lc3NhZ2VCdXMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fbWVzc2FnZUJ1czsKICAgIH0KCiAgICAvKioKICAgICogU2V0IHRoZSBtZXNzYWdlQnVzIGluIHRoaXMgUmVnaXN0cnkKICAgICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KG1lc3NhZ2VCdXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwoKICAgICAgX3RoaXMuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoX3RoaXMucmVnaXN0cnlVUkwsIGZ1bmN0aW9uIChtc2cpIHsKCiAgICAgICAgdmFyIHVzZXJVcmwgPSBfdGhpcy5fZ2V0SWRlbnRpdHlBc3NvY2lhdGVkKG1zZy5ib2R5LnJlc291cmNlLCBtc2cuYm9keS5jcml0ZXJpYSk7CgogICAgICAgIHZhciByZXBseSA9IHsgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sIGJvZHk6IHsgcmVzb3VyY2U6IHVzZXJVcmwgfSB9OwogICAgICAgIHJlcGx5LmJvZHkuY29kZSA9IHVzZXJVcmwgPyAyMDAgOiA0MDQ7CgogICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHJlcGx5KTsKICAgICAgfSk7CgogICAgICAvLyBhbHNvIHNldCB1cCBtZXNzYWdlQnVzIGluIHRoZSBJZGVudGl0eU1vZHVsZSBjb21wb25lbnQKICAgICAgLy8gVE9ETyByZWRlZmluZSBhIGJldHRlciB3YXkgdG8gYWRkIHRoZSBtZXNzYWdlQnVzIGluIHRoZSBJZE1vZHVsZQogICAgICBfdGhpcy5pZE1vZHVsZS5tZXNzYWdlQnVzID0gbWVzc2FnZUJ1czsKCiAgICAgIC8vIEluc3RhbGwgQWRkcmVzc0FsbG9jYXRpb24KICAgICAgdmFyIGFkZHJlc3NBbGxvY2F0aW9uID0gbmV3IF9BZGRyZXNzQWxsb2NhdGlvbjIuZGVmYXVsdChfdGhpcy5yZWdpc3RyeVVSTCwgbWVzc2FnZUJ1cyk7CiAgICAgIF90aGlzLmFkZHJlc3NBbGxvY2F0aW9uID0gYWRkcmVzc0FsbG9jYXRpb247CgogICAgICAvL0luc3RhbGwgT2JqZWN0QWxsb2NhdGlvbgogICAgICB2YXIgb2JqZWN0QWxsb2NhdGlvbiA9IG5ldyBfT2JqZWN0QWxsb2NhdGlvbjIuZGVmYXVsdChfdGhpcy5yZWdpc3RyeVVSTCArICcvb2JqZWN0LWFsbG9jYXRpb24nLCBtZXNzYWdlQnVzKTsKICAgICAgX3RoaXMub2JqZWN0QWxsb2NhdGlvbiA9IG9iamVjdEFsbG9jYXRpb247CgogICAgICAvKmxldCBkaXNjb3ZlcnkgPSBuZXcgRGlzY292ZXJ5KF90aGlzLnJlZ2lzdHJ5VVJMLCBtZXNzYWdlQnVzKTsKICAgICAgX3RoaXMuZGlzY292ZXJ5ID0gZGlzY292ZXJ5OwogICAgICAgIGxldCBpZGVudGl0eU1hbmFnZXIgPSBuZXcgSWRlbnRpdHlNYW5hZ2VyKCdoeXBlcnR5Oi8vbG9jYWxob3N0LzgzM2E2ZTUyLTUxNWItNDk4Yi1hNTdiLWUzZGFlZWNlNDhkMicsIF90aGlzLnJ1bnRpbWVVUkwsIG1lc3NhZ2VCdXMpOwogICAgICBfdGhpcy5pZGVudGl0eU1hbmFnZXIgPSBpZGVudGl0eU1hbmFnZXI7Ki8KICAgIH0KICB9XSk7CiAgcmV0dXJuIFJlZ2lzdHJ5Owp9KF9FdmVudEVtaXR0ZXIzLmRlZmF1bHQpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUmVnaXN0cnk7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3N5bmNoZXIvT2JqZWN0QWxsb2NhdGlvbiI6NzUyLCIuLi91dGlscy9FdmVudEVtaXR0ZXIiOjc1NywiLi4vdXRpbHMvdXRpbHMuanMiOjc1OSwiLi9BZGRyZXNzQWxsb2NhdGlvbiI6NzQ3LCIuL0h5cGVydHlJbnN0YW5jZSI6NzQ4LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2dldC1wcm90b3R5cGUtb2YiOjMwMywiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjMwNywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjMxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOjMxNCwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9NZXNzYWdlRmFjdG9yeSI6NzI4fV0sNzUwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIik7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCi8qKgoqICAgQGF1dGhvcjogR2lsIERpYXMgKGdpbC5kaWFzQHRlY25pY28udWxpc2JvYS5wdCkKKiAgIFJlZ2lzdHJ5IERhdGEgTW9kZWwgaW5jbHVkZXMgYWxsIE9iamVjdHMgdG8gYmUgaGFuZGxlZCBieSB0aGUgUmVnaXN0cnkgZnVuY3Rpb25hbGl0eSBpbmNsdWRpbmcKKi8KCnZhciBSZWdpc3RyeURhdGFNb2RlbCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBSZWdpc3RyeURhdGFNb2RlbChpZCwgdXJsLCBkZXNjcmlwdG9yVVJMLCBzdGFydGluZ1RpbWUsIGxhc3RNb2RpZmllZCwgc3RhdHVzLCBzdHVicywgc3R1YnNDb25maWd1cmF0aW9uKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBSZWdpc3RyeURhdGFNb2RlbCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5faWQgPSBpZDsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fZGVzY3JpcHRvclVSTCA9IGRlc2NyaXB0b3JVUkw7CiAgICBfdGhpcy5fc3RhcnRpbmdUaW1lID0gc3RhcnRpbmdUaW1lOwogICAgX3RoaXMuX2xhc3RNb2RpZmllZCA9IGxhc3RNb2RpZmllZDsKICAgIF90aGlzLl9zdGF0dXMgPSBzdGF0dXM7CiAgICBfdGhpcy5fc3R1YnMgPSBzdHViczsKICAgIF90aGlzLl9zdHVic0NvbmZpZ3VyYXRpb24gPSBzdHVic0NvbmZpZ3VyYXRpb247CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShSZWdpc3RyeURhdGFNb2RlbCwgW3sKICAgIGtleTogImlkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2lkOwogICAgfQogIH0sIHsKICAgIGtleTogInVybCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl91cmw7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVzY3JpcHRvciIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLl9kZXNjcmlwdG9yVVJMOwogICAgfQogIH1dKTsKICByZXR1cm4gUmVnaXN0cnlEYXRhTW9kZWw7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFJlZ2lzdHJ5RGF0YU1vZGVsOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3NTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2Fzc2lnbiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvYXNzaWduJyk7Cgp2YXIgX2Fzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hc3NpZ24pOwoKdmFyIF9wcm9taXNlID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UnKTsKCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKcmVxdWlyZSgnYmFiZWwtcG9seWZpbGwnKTsKCnZhciBfUmVnaXN0cnkgPSByZXF1aXJlKCcuLi9yZWdpc3RyeS9SZWdpc3RyeScpOwoKdmFyIF9SZWdpc3RyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9SZWdpc3RyeSk7Cgp2YXIgX0lkZW50aXR5TW9kdWxlID0gcmVxdWlyZSgnLi4vaWRlbnRpdHkvSWRlbnRpdHlNb2R1bGUnKTsKCnZhciBfSWRlbnRpdHlNb2R1bGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSWRlbnRpdHlNb2R1bGUpOwoKdmFyIF9Qb2xpY3lFbmdpbmUgPSByZXF1aXJlKCcuLi9wb2xpY3kvUG9saWN5RW5naW5lJyk7Cgp2YXIgX1BvbGljeUVuZ2luZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qb2xpY3lFbmdpbmUpOwoKdmFyIF9NZXNzYWdlQnVzID0gcmVxdWlyZSgnLi4vYnVzL01lc3NhZ2VCdXMnKTsKCnZhciBfTWVzc2FnZUJ1czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZXNzYWdlQnVzKTsKCnZhciBfR3JhcGhDb25uZWN0b3IgPSByZXF1aXJlKCcuLi9ncmFwaGNvbm5lY3Rvci9HcmFwaENvbm5lY3RvcicpOwoKdmFyIF9HcmFwaENvbm5lY3RvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9HcmFwaENvbm5lY3Rvcik7Cgp2YXIgX1N5bmNoZXJNYW5hZ2VyID0gcmVxdWlyZSgnLi4vc3luY2hlci9TeW5jaGVyTWFuYWdlcicpOwoKdmFyIF9TeW5jaGVyTWFuYWdlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TeW5jaGVyTWFuYWdlcik7Cgp2YXIgX1J1bnRpbWVDb3JlQ3R4ID0gcmVxdWlyZSgnLi4vcG9saWN5L2NvbnRleHQvUnVudGltZUNvcmVDdHgnKTsKCnZhciBfUnVudGltZUNvcmVDdHgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUnVudGltZUNvcmVDdHgpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiAqIFJ1bnRpbWUgVXNlciBBZ2VudCBJbnRlcmZhY2Ugd2lsbCBwcm9jZXNzIGFsbCB0aGUgZGVwZW5kZWNpZXMgb2YgdGhlIGNvcmUgcnVudGltZTsKICogQGF1dGhvciBWaXRvciBTaWx2YSBbdml0b3ItdC1zaWx2YUB0ZWxlY29tLnB0XQogKiBAdmVyc2lvbiAwLjQuMAogKgogKiBAcHJvcGVydHkge3J1bnRpbWVGYWN0b3J5fSBydW50aW1lRmFjdG9yeSAtIFNwZWNpZmljIGltcGxlbWVudGF0aW9uIGZvciBhbGwgZW52aXJvbm1lbnRzOwogKiBAcHJvcGVydHkge1J1bnRpbWVDYXRhbG9ndWV9IHJ1bnRpbWVDYXRhbG9ndWUgLSBDYXRhbG9ndWUgb2YgY29tcG9uZW50cyBjYW4gYmUgaW5zdGFsbGVkOwogKiBAcHJvcGVydHkge3J1bnRpbWVVUkx9IHJ1bnRpbWVVUkwgLSBUaGlzIGlkZW50aWZ5IHRoZSBjb3JlIHJ1bnRpbWUsIHNob3VsZCBiZSB1bmlxdWU7CiAqIEBwcm9wZXJ0eSB7SWRlbnRpdHlNb2R1bGV9IGlkZW50aXR5TW9kdWxlIC0gSWRlbnRpdHkgTW9kdWxlOwogKiBAcHJvcGVydHkge1BvbGljeUVuZ2luZX0gcG9saWN5RW5naW5lIC0gUG9saWN5IEVuZ2luZSBNb2R1bGU7CiAqIEBwcm9wZXJ0eSB7UmVnaXN0cnl9IHJlZ2lzdHJ5IC0gUmVnaXN0cnkgTW9kdWxlOwogKiBAcHJvcGVydHkge01lc3NhZ2VCdXN9IG1lc3NhZ2VCdXMgLSBNZXNzYWdlIEJ1cyBpcyB1c2VkIGxpa2UgYSByb3V0ZXIgdG8gcmVkaXJlY3QgdGhlIG1lc3NhZ2VzIGZyb20gb25lIGNvbXBvbmVudCB0byBvdGhlcihzKQogKiBAcHJvcGVydHkge0dyYXBoQ29ubmVjdG9yfSBncmFwaENvbm5lY3RvciAtIEdyYXBoIENvbm5lY3RvciBoYW5kbGluZyBHVUlEIGFuZCBjb250YWN0cwogKi8KCgovL01haW4gZGVwZW5kZWNpZXMKCnZhciBSdW50aW1lVUEgPSBmdW5jdGlvbiAoKSB7CgogIC8qKgogICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBSdW50aW1lIFVzZXIgQWdlbnQKICAgKiBAcGFyYW0ge3J1bnRpbWVGYWN0b3J5fSBydW50aW1lRmFjdG9yeSAtIFNwZWNpZmljIGltcGxlbWVudGF0aW9uIGZvciB0aGUgZW52aXJvbm1lbnQgd2hlcmUgdGhlIGNvcmUgcnVudGltZSB3aWxsIHJ1bjsKICAgKiBAcGFyYW0ge2RvbWFpbn0gZG9tYWluVVJMIC0gc3BlY2lmeSB0aGUgZG9tYWluIGJhc2UgZm9yIHRoZSBydW50aW1lOwogICAqLwoKICBmdW5jdGlvbiBSdW50aW1lVUEocnVudGltZUZhY3RvcnksIGRvbWFpbikgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgUnVudGltZVVBKTsKCgogICAgaWYgKCFydW50aW1lRmFjdG9yeSkgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2FuZGJveCBmYWN0b3J5IGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFkb21haW4pIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdGhlIGRvbWFpbiBvZiBydW50aW1lJyk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5ydW50aW1lRmFjdG9yeSA9IHJ1bnRpbWVGYWN0b3J5OwogICAgX3RoaXMucnVudGltZUNhdGFsb2d1ZSA9IHJ1bnRpbWVGYWN0b3J5LmNyZWF0ZVJ1bnRpbWVDYXRhbG9ndWUoKTsKCiAgICAvLyBUT0RPOiBwb3N0IGFuZCByZXR1cm4gcmVnaXN0cnkvaHlwZXJ0eVJ1bnRpbWVJbnN0YW5jZSB0byBhbmQgZnJvbSBCYWNrLWVuZCBTZXJ2aWNlCiAgICAvLyB0aGUgcmVzcG9uc2UgaXMgbGlrZTogcnVudGltZTovL3NwMS8xMjMKCiAgICB2YXIgcnVudGltZVVSTCA9ICdydW50aW1lOi8vJyArIGRvbWFpbiArICcvJyArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwICsgMSk7CiAgICBfdGhpcy5ydW50aW1lVVJMID0gcnVudGltZVVSTDsKICAgIF90aGlzLmRvbWFpbiA9IGRvbWFpbjsKCiAgICAvLyBUT0RPOiBjaGVjayBpZiBydW50aW1lIGNhdGFsb2d1ZSBuZWVkIHRoZSBydW50aW1lVVJMOwogICAgX3RoaXMucnVudGltZUNhdGFsb2d1ZS5ydW50aW1lVVJMID0gcnVudGltZVVSTDsKCiAgICAvLyBJbnN0YW50aWF0ZSB0aGUgaWRlbnRpdHkgTW9kdWxlCiAgICBfdGhpcy5pZGVudGl0eU1vZHVsZSA9IG5ldyBfSWRlbnRpdHlNb2R1bGUyLmRlZmF1bHQocnVudGltZVVSTCk7CgogICAgLy8gVXNlIHRoZSBzYW5kYm94IGZhY3RvcnkgdG8gY3JlYXRlIGFuIEFwcFNhbmRib3g7CiAgICAvLyBJbiB0aGUgZnV0dXJlIGNhbiBiZSBkZWNpZGVkIGJ5IHBvbGljeUVuZ2luZSBpZiB3ZSBuZWVkCiAgICAvLyBjcmVhdGUgYSBBcHBTYW5kYm94IG9yIG5vdDsKICAgIHZhciBhcHBTYW5kYm94ID0gcnVudGltZUZhY3RvcnkuY3JlYXRlQXBwU2FuZGJveCgpOwoKICAgIC8vIEluc3RhbnRpYXRlIHRoZSBSZWdpc3RyeSBNb2R1bGUKICAgIF90aGlzLnJlZ2lzdHJ5ID0gbmV3IF9SZWdpc3RyeTIuZGVmYXVsdChydW50aW1lVVJMLCBhcHBTYW5kYm94LCBfdGhpcy5pZGVudGl0eU1vZHVsZSwgX3RoaXMucnVudGltZUNhdGFsb2d1ZSk7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIE1lc3NhZ2UgQnVzCiAgICBfdGhpcy5tZXNzYWdlQnVzID0gbmV3IF9NZXNzYWdlQnVzMi5kZWZhdWx0KF90aGlzLnJlZ2lzdHJ5KTsKCiAgICAvLyBJbnN0YW50aWF0ZSB0aGUgUG9saWN5IEVuZ2luZQogICAgX3RoaXMucG9saWN5RW5naW5lID0gbmV3IF9Qb2xpY3lFbmdpbmUyLmRlZmF1bHQobmV3IF9SdW50aW1lQ29yZUN0eDIuZGVmYXVsdChfdGhpcy5pZGVudGl0eU1vZHVsZSwgX3RoaXMucmVnaXN0cnkpKTsKCiAgICBfdGhpcy5tZXNzYWdlQnVzLnBpcGVsaW5lLmhhbmRsZXJzID0gWwoKICAgIC8vIFBvbGljeSBtZXNzYWdlIGF1dGhvcmlzZQogICAgZnVuY3Rpb24gKGN0eCkgewogICAgICBfdGhpcy5wb2xpY3lFbmdpbmUuYXV0aG9yaXNlKGN0eC5tc2cpLnRoZW4oZnVuY3Rpb24gKGNoYW5nZWRNZ3MpIHsKICAgICAgICBjdHgubXNnID0gY2hhbmdlZE1nczsKICAgICAgICBjdHgubmV4dCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pOwogICAgICAgIGN0eC5mYWlsKHJlYXNvbik7CiAgICAgIH0pOwogICAgfV07CgogICAgLy8gQWRkIHRvIEFwcCBTYW5kYm94IHRoZSBsaXN0ZW5lcjsKICAgIGFwcFNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0pOwoKICAgIC8vIFJlZ2lzdGVyIG1lc3NhZ2VCdXMgb24gUmVnaXN0cnkKICAgIF90aGlzLnJlZ2lzdHJ5Lm1lc3NhZ2VCdXMgPSBfdGhpcy5tZXNzYWdlQnVzOwoKICAgIC8vIFJlZ2lzdGVyIHJlZ2lzdHJ5IG9uIElkZW50aXR5TW9kdWxlCiAgICBfdGhpcy5pZGVudGl0eU1vZHVsZS5yZWdpc3RyeSA9IF90aGlzLnJlZ2lzdHJ5OwoKICAgIF90aGlzLnJlZ2lzdHJ5LmFkZEV2ZW50TGlzdGVuZXIoJ3J1bnRpbWU6bG9hZFN0dWInLCBmdW5jdGlvbiAoZG9tYWluVVJMKSB7CiAgICAgIF90aGlzLmxvYWRTdHViKGRvbWFpblVSTCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMucmVnaXN0cnkudHJpZ2dlcigncnVudGltZTpzdHViTG9hZGVkJywgZG9tYWluVVJMKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZXBsb3kgdGhlIFByb3RvY29sU3R1YiBjb21wb25lbnQgJywgcmVhc29uKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfdGhpcy5yZWdpc3RyeS5hZGRFdmVudExpc3RlbmVyKCdydW50aW1lOmxvYWRJZHBQcm94eScsIGZ1bmN0aW9uIChkb21haW5VUkwpIHsKICAgICAgX3RoaXMubG9hZElkcFByb3h5KGRvbWFpblVSTCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMucmVnaXN0cnkudHJpZ2dlcigncnVudGltZTppZHBQcm94eUxvYWRlZCcsIGRvbWFpblVSTCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZGVwbG95IHRoZSBJRFAgUHJveHkgY29tcG9uZW50ICcsIHJlYXNvbik7CiAgICAgIH0pOwogICAgfSk7CgogICAgLy8gVXNlIHNhbmRib3ggZmFjdG9yeSB0byB1c2Ugc3BlY2lmaWMgbWV0aG9kcwogICAgLy8gYW5kIHNldCB0aGUgbWVzc2FnZSBidXMgdG8gdGhlIGZhY3RvcnkKICAgIHJ1bnRpbWVGYWN0b3J5Lm1lc3NhZ2VCdXMgPSBfdGhpcy5tZXNzYWdlQnVzOwoKICAgIC8vIEluc3RhbmNpYXRlIHRoZSBTeW5jaGVyTWFuYWdlcjsKICAgIF90aGlzLnN5bmNoZXJNYW5hZ2VyID0gbmV3IF9TeW5jaGVyTWFuYWdlcjIuZGVmYXVsdChfdGhpcy5ydW50aW1lVVJMLCBfdGhpcy5tZXNzYWdlQnVzLCBfdGhpcy5yZWdpc3RyeSwgX3RoaXMucnVudGltZUNhdGFsb2d1ZSk7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIEdyYXBoIENvbm5lY3RvcgogICAgX3RoaXMuZ3JhcGhDb25uZWN0b3IgPSBuZXcgX0dyYXBoQ29ubmVjdG9yMi5kZWZhdWx0KF90aGlzLnJ1bnRpbWVVUkwsIF90aGlzLm1lc3NhZ2VCdXMpOwogIH0KCiAgLyoqCiAgKiBBY2NvbW9kYXRlIGludGVyb3BlcmFiaWxpdHkgaW4gSDJIIGFuZCBwcm90byBvbiB0aGUgZmx5IGZvciBuZXdseSBkaXNjb3ZlcmVkIGRldmljZXMgaW4gTTJNCiAgKiBAcGFyYW0gIHtDYXRhbG9ndWVEYXRhT2JqZWN0Lkh5cGVydHlEZXNjcmlwdG9yfSAgIGRlc2NyaXB0b3IgICAgZGVzY3JpcHRvcgogICovCgoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShSdW50aW1lVUEsIFt7CiAgICBrZXk6ICdkaXNjb3ZlckhpcGVydHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2NvdmVySGlwZXJ0eShkZXNjcmlwdG9yKSB7fQogICAgLy8gQm9keS4uLgoKCiAgICAvKioKICAgICogUmVnaXN0ZXIgSHlwZXJ0eSBkZXBsb3llZCBieSB0aGUgQXBwIHRoYXQgaXMgcGFzc2VkIGFzIGlucHV0IHBhcmFtZXRlci4gVG8gYmUgdXNlZCB3aGVuIEFwcCBhbmQgSHlwZXJ0aWVzIGFyZSBmcm9tIHRoZSBzYW1lIGRvbWFpbiBvdGhlcndpc2UgdGhlIFJ1bnRpbWVVQSB3aWxsIHJhaXNlIGFuIGV4Y2VwdGlvbiBhbmQgdGhlIEFwcCBoYXMgdG8gdXNlIHRoZSBsb2FkSHlwZXJ0eSguLikgZnVuY3Rpb24uCiAgICAqIEBwYXJhbSAge09iamVjdH0gT2JqZWN0ICAgICAgICAgICAgICAgICAgIGh5cGVydHlJbnN0YW5jZQogICAgKiBAcGFyYW0gIHtVUkwuSHlwZXJ0eUNhdGFsb2d1ZVVSTH0gICAgICAgICBkZXNjcmlwdG9yICAgICAgZGVzY3JpcHRvcgogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVnaXN0ZXJIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3Rlckh5cGVydHkoaHlwZXJ0eUluc3RhbmNlLCBkZXNjcmlwdG9yKSB7fQogICAgLy8gQm9keS4uLgoKCiAgICAvKioKICAgICogRGVwbG95IEh5cGVydHkgZnJvbSBDYXRhbG9ndWUgVVJMCiAgICAqIEBwYXJhbSAge1VSTC5IeXBlcnR5Q2F0YWxvZ3VlVVJMfSAgICBoeXBlcnR5IGh5cGVydHlEZXNjcmlwdG9yIHVybDsKICAgICovCgogIH0sIHsKICAgIGtleTogJ2xvYWRIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkSHlwZXJ0eShoeXBlcnR5RGVzY3JpcHRvclVSTCkgewoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghaHlwZXJ0eURlc2NyaXB0b3JVUkwpIHRocm93IG5ldyBFcnJvcignSHlwZXJ0eSBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkJyk7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIF9oeXBlcnR5VVJMID0gdm9pZCAwOwogICAgICAgIHZhciBfaHlwZXJ0eVNhbmRib3ggPSB2b2lkIDA7CiAgICAgICAgdmFyIF9oeXBlcnR5RGVzY3JpcHRvciA9IHZvaWQgMDsKICAgICAgICB2YXIgX2h5cGVydHlTb3VyY2VQYWNrYWdlID0gdm9pZCAwOwoKICAgICAgICB2YXIgZXJyb3JSZWFzb24gPSBmdW5jdGlvbiBlcnJvclJlYXNvbihyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NvbWV0aGluZyBmYWlsZWQgb24gdGhlIGRlcGxveSBoeXBlcnR5OiAnLCByZWFzb24pOwogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfTsKCiAgICAgICAgLy8gR2V0IEh5cGVydHkgZGVzY3JpcHRvcgogICAgICAgIC8vIFRPRE86IHRoZSByZXF1ZXN0IE1vZHVsZSBzaG91bGQgYmUgY2hhbmdlZCwKICAgICAgICAvLyBiZWNhdXNlIGF0IHRoaXMgbW9tZW50IGl0IGlzIGluY29tcGF0aWJsZSB3aXRoIG5vZGVqczsKICAgICAgICAvLyBQcm9iYWJseSB3ZSBuZWVkIHRvIHBhc3MgYSBmYWN0b3J5IGxpa2Ugd2UgZG8gZm9yIHNhbmRib3hlczsKICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLSBIeXBlcnR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpOwogICAgICAgIGNvbnNvbGUuaW5mbygnR2V0IGh5cGVydHkgZGVzY3JpcHRvciBmb3IgOicsIGh5cGVydHlEZXNjcmlwdG9yVVJMKTsKICAgICAgICByZXR1cm4gX3RoaXMucnVudGltZUNhdGFsb2d1ZS5nZXRIeXBlcnR5RGVzY3JpcHRvcihoeXBlcnR5RGVzY3JpcHRvclVSTCkudGhlbihmdW5jdGlvbiAoaHlwZXJ0eURlc2NyaXB0b3IpIHsKICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDIgYW5kIDMiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMTogcmV0dXJuIGh5cGVydHkgZGVzY3JpcHRvcicpOwoKICAgICAgICAgIC8vIGh5cGVydHkgY29udGFpbnMgdGhlIGZ1bGwgcGF0aCBvZiB0aGUgY2F0YWxvZ3VlIFVSTCwgZS5nLgogICAgICAgICAgLy8gY2F0YWxvZ3VlLnJldGhpbmsuZXUvLndlbGwta25vd24vLi4uLi4uLi4uLgogICAgICAgICAgX2h5cGVydHlEZXNjcmlwdG9yID0gaHlwZXJ0eURlc2NyaXB0b3I7CgogICAgICAgICAgdmFyIHNvdXJjZVBhY2thZ2VVUkwgPSBoeXBlcnR5RGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlVVJMOwoKICAgICAgICAgIGlmIChzb3VyY2VQYWNrYWdlVVJMID09PSAnL3NvdXJjZVBhY2thZ2UnKSB7CiAgICAgICAgICAgIHJldHVybiBoeXBlcnR5RGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIEdldCB0aGUgaHlwZXJ0eSBzb3VyY2UgY29kZQogICAgICAgICAgcmV0dXJuIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUuZ2V0U291cmNlUGFja2FnZUZyb21VUkwoc291cmNlUGFja2FnZVVSTCk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc291cmNlUGFja2FnZSkgewogICAgICAgICAgY29uc29sZS5pbmZvKCcyOiByZXR1cm4gaHlwZXJ0eSBzb3VyY2UgY29kZScpOwoKICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDQgYW5kIDUiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKCiAgICAgICAgICBfaHlwZXJ0eVNvdXJjZVBhY2thZ2UgPSBzb3VyY2VQYWNrYWdlOwoKICAgICAgICAgIC8vCiAgICAgICAgICAvLyBzdGVwcyA2IC0tIDkgYXJlIHNraXBwZWQuCiAgICAgICAgICAvLyBUT0RPOiBvbiByZWxlYXNlIG9mIGNvcmUgMC4yOwogICAgICAgICAgLy8gVE9ETzogUHJvbWlzZSB0byBjaGVjayB0aGUgcG9saWN5IGVuZ2luZQoKICAgICAgICAgIC8vIG1vY2stdXAgY29kZTsKICAgICAgICAgIC8vIHRlbXBvcmFyeSBjb2RlLCBvbmx5CiAgICAgICAgICB2YXIgcG9saWN5ID0gdHJ1ZTsKCiAgICAgICAgICByZXR1cm4gcG9saWN5OwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHBvbGljeVJlc3VsdCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCczOiByZXR1cm4gcG9saWN5IGVuZ2luZSByZXN1bHQ6ICcsIHBvbGljeVJlc3VsdCk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCA2IHRvIDkgb2YgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCiAgICAgICAgICAvLwogICAgICAgICAgLy8gU3RlcHMgNiAtLSA5CiAgICAgICAgICAvLyBBcyBhIHJlc3VsdCBvZiB0aGUgc2lwcGVkIHN0ZXBzLCB3ZSBrbm93IGF0IHRoaXMgcG9pbnQgaWYgd2UgZXhlY3V0ZQogICAgICAgICAgLy8gaW5TYW1lU2FuZGJveCBvciBub3QuCiAgICAgICAgICAvLwoKICAgICAgICAgIC8vIEZvciB0ZXN0aW5nLCBqdXN0IGFzc3VtZSB3ZSBleGVjdXRlIGluIHNhbWUgU2FuZGJveC4KICAgICAgICAgIHZhciBpblNhbWVTYW5kYm94ID0gdHJ1ZTsKICAgICAgICAgIHZhciBzYW5kYm94ID0gdm9pZCAwOwoKICAgICAgICAgIGlmIChpblNhbWVTYW5kYm94KSB7CgogICAgICAgICAgICAvLyB0aGlzIGRvbid0IG5lZWQgYmUgYSBQcm9taXNlOwogICAgICAgICAgICBzYW5kYm94ID0gX3RoaXMucmVnaXN0cnkuZ2V0QXBwU2FuZGJveCgpOwoKICAgICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAxMSBoZXJlLgogICAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoaHlwZXJ0eURlc2NyaXB0b3JVUkwpLmRvbWFpbjsKCiAgICAgICAgICAgIC8vIGdldFNhbmRib3gsIHRoaXMgd2lsbCByZXR1cm4gYSBwcm9taXNlOwogICAgICAgICAgICBzYW5kYm94ID0gX3RoaXMucmVnaXN0cnkuZ2V0U2FuZGJveChkb21haW4pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIHRoaXMgd2lsbCByZXR1cm4gdGhlIHNhbmRib3ggb3Igb25lIHByb21pc2UgdG8gZ2V0U2FuZGJveDsKICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNhbmRib3gpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNDogcmV0dXJuIHRoZSBzYW5kYm94Jywgc2FuZGJveCk7CgogICAgICAgICAgLy8gUmV0dXJuIHRoZSBzYW5kYm94IGluZGVwZW50ZWx5IGlmIGl0IHJ1bm5pbmcgaW4gdGhlIHNhbWUgc2FuZGJveCBvciBub3QKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTQgaGVyZS4KICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJzQuMTogVHJ5IHRvIHJlZ2lzdGVyIGEgbmV3IHNhbmRib3ggJywgcmVhc29uKTsKCiAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2FuZGJveCBpcyByZWdpc3RlZCBmb3IgdGhpcyBoeXBlcnR5IGRlc2NyaXB0b3IgdXJsOwogICAgICAgICAgLy8gTWFrZSBTdGVwcyB4eHggLS0tIHh4eAogICAgICAgICAgLy8gSW5zdGFudGlhdGUgdGhlIFNhbmRib3gKICAgICAgICAgIHZhciBzYW5kYm94ID0gX3RoaXMucnVudGltZUZhY3RvcnkuY3JlYXRlU2FuZGJveCgpOwoKICAgICAgICAgIHNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNhbmRib3gpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNTogcmV0dXJuIHNhbmRib3ggYW5kIHJlZ2lzdGVyJyk7CgogICAgICAgICAgX2h5cGVydHlTYW5kYm94ID0gc2FuZGJveDsKCiAgICAgICAgICAvLyBSZWdpc3RlciBoeXBlcnR5CiAgICAgICAgICByZXR1cm4gX3RoaXMucmVnaXN0cnkucmVnaXN0ZXJIeXBlcnR5KHNhbmRib3gsIGh5cGVydHlEZXNjcmlwdG9yVVJMLCBfaHlwZXJ0eURlc2NyaXB0b3IpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGh5cGVydHlVUkwpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNjogSHlwZXJ0eSB1cmwsIGFmdGVyIHJlZ2lzdGVyIGh5cGVydHknLCBoeXBlcnR5VVJMKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDE2IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgX2h5cGVydHlVUkwgPSBoeXBlcnR5VVJMOwoKICAgICAgICAgIC8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CiAgICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9IHt9OwogICAgICAgICAgaWYgKCEoMCwgX3V0aWxzLmVtcHR5T2JqZWN0KShfaHlwZXJ0eURlc2NyaXB0b3IuY29uZmlndXJhdGlvbikpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0gKDAsIF9hc3NpZ24yLmRlZmF1bHQpKHt9LCBKU09OLnBhcnNlKF9oeXBlcnR5RGVzY3JpcHRvci5jb25maWd1cmF0aW9uKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0gX2h5cGVydHlEZXNjcmlwdG9yLmNvbmZpZ3VyYXRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucnVudGltZVVSTCA9IF90aGlzLnJ1bnRpbWVVUkw7CgogICAgICAgICAgLy8gV2Ugd2lsbCBkZXBsb3kgdGhlIGNvbXBvbmVudCAtIHN0ZXAgMTcgb2YgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCiAgICAgICAgICByZXR1cm4gX2h5cGVydHlTYW5kYm94LmRlcGxveUNvbXBvbmVudChfaHlwZXJ0eVNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZSwgX2h5cGVydHlVUkwsIGNvbmZpZ3VyYXRpb24pOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRlcGxveUNvbXBvbmVudFN0YXR1cykgewogICAgICAgICAgY29uc29sZS5pbmZvKCc3OiBEZXBsb3kgY29tcG9uZW50IHN0YXR1cyBmb3IgaHlwZXJ0eTogJywgZGVwbG95Q29tcG9uZW50U3RhdHVzKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDE5IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgoKICAgICAgICAgIC8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIgdG8gdGhlIGFwcFNhbmRib3ggb3IgaHlwZXJ0U2FuZGJveDsKICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoX2h5cGVydHlVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgX2h5cGVydHlTYW5kYm94LnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIwIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgdmFyIGh5cGVydHkgPSB7CiAgICAgICAgICAgIHJ1bnRpbWVIeXBlcnR5VVJMOiBfaHlwZXJ0eVVSTCwKICAgICAgICAgICAgc3RhdHVzOiBkZXBsb3lDb21wb25lbnRTdGF0dXMKICAgICAgICAgIH07CgogICAgICAgICAgcmVzb2x2ZShoeXBlcnR5KTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIxIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7CiAgICAgICAgfSkuY2F0Y2goZXJyb3JSZWFzb24pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogRGVwbG95IFN0dWIgZnJvbSBDYXRhbG9ndWUgVVJMIG9yIGRvbWFpbiB1cmwKICAgICogQHBhcmFtICB7VVJMLlVSTH0gICAgIGRvbWFpbiAgICAgICAgICBkb21haW4KICAgICovCgogIH0sIHsKICAgIGtleTogJ2xvYWRTdHViJywKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkU3R1Yihwcm90b3N0dWJVUkwpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXByb3Rvc3R1YlVSTCkgdGhyb3cgbmV3IEVycm9yKCdkb21haW4gcGFyYW1ldGVyIGlzIG5lZWRlZCcpOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkocHJvdG9zdHViVVJMKS5kb21haW47CgogICAgICAgIGlmICghZG9tYWluKSB7CiAgICAgICAgICBkb21haW4gPSBwcm90b3N0dWJVUkw7CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0dWJTYW5kYm94ID0gdm9pZCAwOwogICAgICAgIHZhciBfc3R1YkRlc2NyaXB0b3IgPSB2b2lkIDA7CiAgICAgICAgdmFyIF9ydW50aW1lUHJvdG9TdHViVVJMID0gdm9pZCAwOwogICAgICAgIHZhciBfc3R1YlNvdXJjZVBhY2thZ2UgPSB2b2lkIDA7CgogICAgICAgIHZhciBlcnJvclJlYXNvbiA9IGZ1bmN0aW9uIGVycm9yUmVhc29uKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5lcnJvcignU29tZXRoaW5nIGZhaWxlZCBvbiB0aGUgZGVwbG95IG9mIHByb3RvY29sc3R1YjogJywgcmVhc29uKTsKICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH07CgogICAgICAgIC8vIERpc2NvdmVyIFByb3RvY29sIFN0dWIKICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0gUHJvdG9TdHViIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuJyk7CiAgICAgICAgY29uc29sZS5pbmZvKCdEaXNjb3ZlciBvciBDcmVhdGUgYSBuZXcgUHJvdG9TdHViIGZvciBkb21haW46ICcsIGRvbWFpbik7CiAgICAgICAgX3RoaXMucmVnaXN0cnkuZGlzY292ZXJQcm90b3N0dWIoZG9tYWluKS50aGVuKGZ1bmN0aW9uIChydW50aW1lUHJvdG9TdHViVVJMKSB7CiAgICAgICAgICAvLyBJcyByZWdpc3RlZD8KICAgICAgICAgIGNvbnNvbGUuaW5mbygnMS4gUHJvdG8gU3R1YiBEaXNjb3ZlcmVkOiAnLCBydW50aW1lUHJvdG9TdHViVVJMKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgLy8gVE9ETzogQ2hlY2sgaWYgdGhlIHN0YXR1cyBpcyBzYXZlZCBpbiB0aGUgc3RhdHVzIG9mIHNhbmRib3g7CiAgICAgICAgICB2YXIgc3R1YiA9IHsKICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTDogcnVudGltZVByb3RvU3R1YlVSTCwKICAgICAgICAgICAgc3RhdHVzOiAnZGVwbG95ZWQnCiAgICAgICAgICB9OwoKICAgICAgICAgIHJlc29sdmUoc3R1Yik7CiAgICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuJyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewoKICAgICAgICAgIC8vIGlzIG5vdCByZWdpc3RlZD8KICAgICAgICAgIGNvbnNvbGUuaW5mbygnMS4gUHJvdG8gU3R1YiBub3QgZm91bmQ6JywgcmVhc29uKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDMgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgLy8gd2UgbmVlZCB0byBnZXQgUHJvdG9TdHViIGRlc2NyaXB0b3Igc3RlcCA0IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAogICAgICAgICAgX3RoaXMucnVudGltZUNhdGFsb2d1ZS5nZXRTdHViRGVzY3JpcHRvcihwcm90b3N0dWJVUkwpLnRoZW4oZnVuY3Rpb24gKHN0dWJEZXNjcmlwdG9yKSB7CgogICAgICAgICAgICBjb25zb2xlLmluZm8oJzIuIHJldHVybiB0aGUgUHJvdG9TdHViIGRlc2NyaXB0b3I6Jywgc3R1YkRlc2NyaXB0b3IpOwoKICAgICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCA1IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAogICAgICAgICAgICBfc3R1YkRlc2NyaXB0b3IgPSBzdHViRGVzY3JpcHRvcjsKCiAgICAgICAgICAgIHZhciBzb3VyY2VQYWNrYWdlVVJMID0gc3R1YkRlc2NyaXB0b3Iuc291cmNlUGFja2FnZVVSTDsKCiAgICAgICAgICAgIGlmIChzb3VyY2VQYWNrYWdlVVJMID09PSAnL3NvdXJjZVBhY2thZ2UnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHN0dWJEZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZ2V0IFByb3RvU3R1YiBTb3VyY2UgY29kZSBmcm9tIGRlc2NyaXB0b3IgLSBzdGVwIDYgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCiAgICAgICAgICAgIHJldHVybiBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHNvdXJjZVBhY2thZ2VVUkwpOwogICAgICAgICAgfSkuY2F0Y2goZXJyb3JSZWFzb24pLnRoZW4oZnVuY3Rpb24gKHN0dWJTb3VyY2VQYWNrYWdlKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnMy4gcmV0dXJuIHRoZSBQcm90b1N0dWIgU291cmNlIENvZGU6ICcsIHN0dWJTb3VyY2VQYWNrYWdlKTsKCiAgICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgNyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIF9zdHViU291cmNlUGFja2FnZSA9IHN0dWJTb3VyY2VQYWNrYWdlOwoKICAgICAgICAgICAgLy8gVE9ETzogQ2hlY2sgb24gUEVQIChwb2xpY3kgRW5naW5lKSBpZiB3ZSBuZWVkIHRoZSBzYW5kYm94IGFuZCBjaGVjayBpZiB0aGUgU2FuZGJveCBGYWN0b3J5IGhhdmUgdGhlIGNvbnRleHQgc2FuZGJveDsKICAgICAgICAgICAgdmFyIHBvbGljeSA9IHRydWU7CiAgICAgICAgICAgIHJldHVybiBwb2xpY3k7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChwb2xpY3kpIHsKICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHJldHVybiB0aGUgc2FuZGJveCBvciBvbmUgcHJvbWlzZSB0byBnZXRTYW5kYm94OwogICAgICAgICAgICByZXR1cm4gX3RoaXMucmVnaXN0cnkuZ2V0U2FuZGJveChkb21haW4pOwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc3R1YlNhbmRib3gpIHsKCiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnNC4gaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZXJlZCB0aGVuIHJldHVybiB0aGUgc2FuZGJveCAnLCBzdHViU2FuZGJveCk7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIF9zdHViU2FuZGJveCA9IHN0dWJTYW5kYm94OwogICAgICAgICAgICByZXR1cm4gc3R1YlNhbmRib3g7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnNS4gU2FuZGJveCB3YXMgbm90IGZvdW5kLCBjcmVhdGluZyBhIG5ldyBvbmUgJywgcmVhc29uKTsKCiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVkIGZvciB0aGlzIHN0dWIgZGVzY3JpcHRvciB1cmw7CiAgICAgICAgICAgIC8vIE1ha2UgU3RlcHMgeHh4IC0tLSB4eHgKICAgICAgICAgICAgLy8gSW5zdGFudGlhdGUgdGhlIFNhbmRib3gKICAgICAgICAgICAgdmFyIHNhbmRib3ggPSBfdGhpcy5ydW50aW1lRmFjdG9yeS5jcmVhdGVTYW5kYm94KCk7CiAgICAgICAgICAgIHNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc2FuZGJveCkgewogICAgICAgICAgICBjb25zb2xlLmluZm8oJzYuIHJldHVybiB0aGUgc2FuZGJveCBpbnN0YW5jZSBhbmQgcmVnaXN0ZXInLCBzYW5kYm94LCAndG8gZG9tYWluICcsIGRvbWFpbik7CgogICAgICAgICAgICBfc3R1YlNhbmRib3ggPSBzYW5kYm94OwoKICAgICAgICAgICAgLy8gd2UgbmVlZCByZWdpc3RlciBzdHViIG9uIHJlZ2lzdHJ5IC0gc3RlcCB4eHggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWdpc3RyeS5yZWdpc3RlclN0dWIoX3N0dWJTYW5kYm94LCBkb21haW4pOwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocnVudGltZVByb3RvU3R1YlVSTCkgewoKICAgICAgICAgICAgY29uc29sZS5pbmZvKCc3LiByZXR1cm4gdGhlIHJ1bnRpbWUgcHJvdG9zdHViIHVybDogJywgcnVudGltZVByb3RvU3R1YlVSTCk7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIF9ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKCiAgICAgICAgICAgIC8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CiAgICAgICAgICAgIHZhciBjb25maWd1cmF0aW9uID0ge307CiAgICAgICAgICAgIGlmICghKDAsIF91dGlscy5lbXB0eU9iamVjdCkoX3N0dWJEZXNjcmlwdG9yLmNvbmZpZ3VyYXRpb24pKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24gPSAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoe30sIEpTT04ucGFyc2UoX3N0dWJEZXNjcmlwdG9yLmNvbmZpZ3VyYXRpb24pKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0gX3N0dWJEZXNjcmlwdG9yLmNvbmZpZ3VyYXRpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkwgPSBfdGhpcy5ydW50aW1lVVJMOwoKICAgICAgICAgICAgLy8gRGVwbG95IENvbXBvbmVudCBzdGVwIHh4eAogICAgICAgICAgICByZXR1cm4gX3N0dWJTYW5kYm94LmRlcGxveUNvbXBvbmVudChfc3R1YlNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZSwgcnVudGltZVByb3RvU3R1YlVSTCwgY29uZmlndXJhdGlvbik7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkZXBsb3lDb21wb25lbnRTdGF0dXMpIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCc4OiByZXR1cm4gZGVwbG95IGNvbXBvbmVudCBmb3Igc2FuZGJveCBzdGF0dXM6ICcsIGRlcGxveUNvbXBvbmVudFN0YXR1cyk7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIC8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIKICAgICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihfcnVudGltZVByb3RvU3R1YlVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAgIF9zdHViU2FuZGJveC5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgICAgLy8gTG9hZCBTdHViIGZ1bmN0aW9uIHJlc29sdmVkIHdpdGggc3VjY2VzczsKICAgICAgICAgICAgdmFyIHN0dWIgPSB7CiAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTDogX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgICAgICAgc3RhdHVzOiBkZXBsb3lDb21wb25lbnRTdGF0dXMKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJlc29sdmUoc3R1Yik7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4nKTsKICAgICAgICAgIH0pLmNhdGNoKGVycm9yUmVhc29uKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIERlcGxveSBTdHViIGZyb20gQ2F0YWxvZ3VlIFVSTCBvciBkb21haW4gdXJsCiAgICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICBkb21haW4gICAgICAgICAgZG9tYWluCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdsb2FkSWRwUHJveHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRJZHBQcm94eShpZHBQcm94eVVSTCkgewoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghaWRwUHJveHlVUkwpIHRocm93IG5ldyBFcnJvcignVGhlIElEUCBQcm94eSBVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyLCBjb3VsZCBiZSBhIERPTUFJTiBvciBhIFVSTCcpOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoaWRwUHJveHlVUkwpLmRvbWFpbjsKCiAgICAgICAgaWYgKCFkb21haW4pIHsKICAgICAgICAgIGRvbWFpbiA9IGlkcFByb3h5VVJMOwogICAgICAgIH0KCiAgICAgICAgdmFyIF9wcm94eVNhbmRib3ggPSB2b2lkIDA7CiAgICAgICAgdmFyIF9wcm94eURlc2NyaXB0b3IgPSB2b2lkIDA7CiAgICAgICAgdmFyIF9ydW50aW1lSWRwUHJveHlVUkwgPSB2b2lkIDA7CiAgICAgICAgdmFyIF9wcm94eVNvdXJjZVBhY2thZ2UgPSB2b2lkIDA7CgogICAgICAgIHZhciBlcnJvclJlYXNvbiA9IGZ1bmN0aW9uIGVycm9yUmVhc29uKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5lcnJvcignU29tZXRoaW5nIGZhaWxlZCBvbiB0aGUgZGVwbG95IG9mIElkcFByb3h5OiAnLCByZWFzb24pOwogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfTsKCiAgICAgICAgLy8gRGlzY292ZXIgSURQUHJveHkKICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0gSURQIFByb3h5IERlcGxveSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbicpOwogICAgICAgIGNvbnNvbGUuaW5mbygnRGlzY292ZXIgb3IgQ3JlYXRlIGEgbmV3IElkcFByb3h5IGZvciBkb21haW4vVVJMOiAnLCBkb21haW4pOwogICAgICAgIHJldHVybiBfdGhpcy5yZWdpc3RyeS5kaXNjb3ZlcklkcFByb3h5KGRvbWFpbikudGhlbihmdW5jdGlvbiAocnVudGltZUlkcFByb3h5VVJMKSB7CiAgICAgICAgICAvLyBJcyByZWdpc3RlZD8KICAgICAgICAgIGNvbnNvbGUuaW5mbygnMS4gSURQUHJveHkgRGlzY292ZXJlZDogJywgcnVudGltZUlkcFByb3h5VVJMKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgLy8gVE9ETzogQ2hlY2sgaWYgdGhlIHN0YXR1cyBpcyBzYXZlZCBpbiB0aGUgc3RhdHVzIG9mIHNhbmRib3g7CiAgICAgICAgICB2YXIgaWRwUHJveHkgPSB7CiAgICAgICAgICAgIHJ1bnRpbWVJZHBQcm94eVVSTDogcnVudGltZUlkcFByb3h5VVJMLAogICAgICAgICAgICBzdGF0dXM6ICdkZXBsb3llZCcKICAgICAgICAgIH07CgogICAgICAgICAgcmVzb2x2ZShpZHBQcm94eSk7CiAgICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuJyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewoKICAgICAgICAgIC8vIGlzIG5vdCByZWdpc3RlZD8KICAgICAgICAgIGNvbnNvbGUuaW5mbygnMS4gSWRwUHJveHkgbm90IGZvdW5kOicsIHJlYXNvbik7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZ2V0IFByb3RvU3R1YiBkZXNjcmlwdG9yIHN0ZXAgNCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKICAgICAgICAgIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUuZ2V0SWRwUHJveHlEZXNjcmlwdG9yKGlkcFByb3h5VVJMKS50aGVuKGZ1bmN0aW9uIChwcm94eURlc2NyaXB0b3IpIHsKCiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnMi4gUmV0dXJuIHRoZSBJRFBQcm94eSBkZXNjcmlwdG9yOicsIHByb3h5RGVzY3JpcHRvcik7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDUgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCiAgICAgICAgICAgIF9wcm94eURlc2NyaXB0b3IgPSBwcm94eURlc2NyaXB0b3I7CgogICAgICAgICAgICB2YXIgc291cmNlUGFja2FnZVVSTCA9IHByb3h5RGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlVVJMOwoKICAgICAgICAgICAgaWYgKHNvdXJjZVBhY2thZ2VVUkwgPT09ICcvc291cmNlUGFja2FnZScpIHsKICAgICAgICAgICAgICByZXR1cm4gcHJveHlEZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZ2V0IFByb3RvU3R1YiBTb3VyY2UgY29kZSBmcm9tIGRlc2NyaXB0b3IgLSBzdGVwIDYgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCiAgICAgICAgICAgIHJldHVybiBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHNvdXJjZVBhY2thZ2VVUkwpOwogICAgICAgICAgfSkuY2F0Y2goZXJyb3JSZWFzb24pLnRoZW4oZnVuY3Rpb24gKHNvdXJjZVBhY2thZ2UpIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCczLiByZXR1cm4gdGhlIElEUFByb3h5IHNvdXJjZSBwYWNrYWdlOiAnLCBzb3VyY2VQYWNrYWdlKTsKCiAgICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgNyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIF9wcm94eVNvdXJjZVBhY2thZ2UgPSBzb3VyY2VQYWNrYWdlOwoKICAgICAgICAgICAgLy8gVE9ETzogQ2hlY2sgb24gUEVQIChwb2xpY3kgRW5naW5lKSBpZiB3ZSBuZWVkIHRoZSBzYW5kYm94IGFuZCBjaGVjayBpZiB0aGUgU2FuZGJveCBGYWN0b3J5IGhhdmUgdGhlIGNvbnRleHQgc2FuZGJveDsKICAgICAgICAgICAgdmFyIHBvbGljeSA9IHRydWU7CiAgICAgICAgICAgIHJldHVybiBwb2xpY3k7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChwb2xpY3kpIHsKICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHJldHVybiB0aGUgc2FuZGJveCBvciBvbmUgcHJvbWlzZSB0byBnZXRTYW5kYm94OwogICAgICAgICAgICByZXR1cm4gX3RoaXMucmVnaXN0cnkuZ2V0U2FuZGJveChkb21haW4pOwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocHJveHlTYW5kYm94KSB7CgogICAgICAgICAgICBjb25zb2xlLmluZm8oJzQuIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVyZWQgdGhlbiByZXR1cm4gdGhlIHNhbmRib3gnLCBwcm94eVNhbmRib3gpOwoKICAgICAgICAgICAgX3Byb3h5U2FuZGJveCA9IHByb3h5U2FuZGJveDsKICAgICAgICAgICAgcmV0dXJuIHByb3h5U2FuZGJveDsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCc1LiBTYW5kYm94IHdhcyBub3QgZm91bmQsIGNyZWF0aW5nIGEgbmV3IG9uZScsIHJlYXNvbik7CgogICAgICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2FuZGJveCBpcyByZWdpc3RlZCBmb3IgdGhpcyBwcm94eSBkZXNjcmlwdG9yIHVybDsKICAgICAgICAgICAgLy8gTWFrZSBTdGVwcyB4eHggLS0tIHh4eAogICAgICAgICAgICAvLyBJbnN0YW50aWF0ZSB0aGUgU2FuZGJveAogICAgICAgICAgICB2YXIgc2FuZGJveCA9IF90aGlzLnJ1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3goKTsKICAgICAgICAgICAgc2FuZGJveC5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmV0dXJuIHNhbmRib3g7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzYW5kYm94KSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnNi4gcmV0dXJuIHRoZSBzYW5kYm94IGluc3RhbmNlIGFuZCByZWdpc3RlcicsIHNhbmRib3gsICd0byBkb21haW4gJywgZG9tYWluKTsKCiAgICAgICAgICAgIF9wcm94eVNhbmRib3ggPSBzYW5kYm94OwoKICAgICAgICAgICAgLy8gd2UgbmVlZCByZWdpc3RlciBzdHViIG9uIHJlZ2lzdHJ5IC0gc3RlcCB4eHggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWdpc3RyeS5yZWdpc3RlcklkcFByb3h5KHNhbmRib3gsIGRvbWFpbik7CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChydW50aW1lSWRwUHJveHlVUkwpIHsKCiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnNy4gUmV0dXJuIHRoZSBydW50aW1lIElkcCBQcm94eSBVUkw6ICcsIHJ1bnRpbWVJZHBQcm94eVVSTCk7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIF9ydW50aW1lSWRwUHJveHlVUkwgPSBydW50aW1lSWRwUHJveHlVUkw7CgogICAgICAgICAgICAvLyBFeHRlbmQgb3JpZ2luYWwgaHlwZXJ0eSBjb25maWd1cmF0aW9uOwogICAgICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9IHt9OwogICAgICAgICAgICBpZiAoISgwLCBfdXRpbHMuZW1wdHlPYmplY3QpKF9wcm94eURlc2NyaXB0b3IuY29uZmlndXJhdGlvbikpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbiA9ICgwLCBfYXNzaWduMi5kZWZhdWx0KSh7fSwgSlNPTi5wYXJzZShfcHJveHlEZXNjcmlwdG9yLmNvbmZpZ3VyYXRpb24pKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0gX3Byb3h5RGVzY3JpcHRvci5jb25maWd1cmF0aW9uOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkwgPSBfdGhpcy5ydW50aW1lVVJMOwoKICAgICAgICAgICAgLy8gRGVwbG95IENvbXBvbmVudCBzdGVwIHh4eAogICAgICAgICAgICByZXR1cm4gX3Byb3h5U2FuZGJveC5kZXBsb3lDb21wb25lbnQoX3Byb3h5U291cmNlUGFja2FnZS5zb3VyY2VDb2RlLCBydW50aW1lSWRwUHJveHlVUkwsIGNvbmZpZ3VyYXRpb24pOwogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGVwbG95Q29tcG9uZW50U3RhdHVzKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnODogcmV0dXJuIGRlcGxveSBjb21wb25lbnQgZm9yIHNhbmRib3ggc3RhdHVzOiAnLCBkZXBsb3lDb21wb25lbnRTdGF0dXMpOwoKICAgICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCB4eHggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgICAvLyBBZGQgdGhlIG1lc3NhZ2UgYnVzIGxpc3RlbmVyCiAgICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoX3J1bnRpbWVJZHBQcm94eVVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAgIF9wcm94eVNhbmRib3gucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAgIC8vIExvYWQgU3R1YiBmdW5jdGlvbiByZXNvbHZlZCB3aXRoIHN1Y2Nlc3M7CiAgICAgICAgICAgIHZhciBpZHBQcm94eSA9IHsKICAgICAgICAgICAgICBydW50aW1lSWRwUHJveHlVUkw6IF9ydW50aW1lSWRwUHJveHlVUkwsCiAgICAgICAgICAgICAgc3RhdHVzOiBkZXBsb3lDb21wb25lbnRTdGF0dXMKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJlc29sdmUoaWRwUHJveHkpOwogICAgICAgICAgICBjb25zb2xlLmluZm8oJy0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuJyk7CiAgICAgICAgICB9KS5jYXRjaChlcnJvclJlYXNvbik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byBjbG9zZSBhbGwgdGhlIHJ1bnRpbWU7IFVucmVnaXN0ZXIgYWxsIGh5cGVydGllczsKICAgICAqIEByZXR1cm4ge1Byb21pc2U8Qm9vbGVhbj59IHJlc3VsdCBvZiB0aGUgY2xvc2UgbWV0aG9kLCB3aXRoIHRydWUgb3IgZmFsc2UgdG8gdGhlIG9wZXJhdGlvbiBzdWNjZXNzOwogICAgICovCgogIH0sIHsKICAgIGtleTogJ2Nsb3NlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUuaW5mbygnVW5yZWdpc3RlciBhbGwgaHlwZXJ0aWVzJyk7CiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICBfdGhpcy5yZWdpc3RyeS51bnJlZ2lzdGVyQWxsSHlwZXJ0aWVzKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ0FsbCB0aGUgaHlwZXJ0aWVzIGFyZSB1bnJlZ2lzdGVkIHdpdGggU3VjY2VzczonLCByZXN1bHQpOwogICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdW5yZWdpc3RlciB0aGUgaHlwZXJ0aWVzJywgcmVhc29uKTsKICAgICAgICAgIHJlamVjdChmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBVc2VkIHRvIGNoZWNrIGZvciB1cGRhdGVzIGFib3V0IGNvbXBvbmVudHMgaGFuZGxlZCBpbiB0aGUgQ2F0YWxvZ3VlIGluY2x1ZGluZyBwcm90b2NvbCBzdHVicyBhbmQgSHlwZXJ0aWVzLiBjaGVjayByZWxhdGlvbnNoaXAgd2l0aCBsaWZlY3ljbGUgbWFuYWdlbWVudCBwcm92aWRlZCBieSBTZXJ2aWNlIFdvcmtlcnMKICAgICogQHBhcmFtICB7Q2F0YWxvZ3VlVVJMfSAgICAgICB1cmwgdXJsCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjaGVja0ZvclVwZGF0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tGb3JVcGRhdGUodXJsKSB7CiAgICAgIC8vIEJvZHkuLi4KICAgIH0KICB9XSk7CiAgcmV0dXJuIFJ1bnRpbWVVQTsKfSgpOyAvKioKICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICoKICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgKgogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAqCiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAqKi8KCmV4cG9ydHMuZGVmYXVsdCA9IFJ1bnRpbWVVQTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vYnVzL01lc3NhZ2VCdXMiOjczMSwiLi4vZ3JhcGhjb25uZWN0b3IvR3JhcGhDb25uZWN0b3IiOjczNSwiLi4vaWRlbnRpdHkvSWRlbnRpdHlNb2R1bGUiOjczOSwiLi4vcG9saWN5L1BvbGljeUVuZ2luZSI6NzQ0LCIuLi9wb2xpY3kvY29udGV4dC9SdW50aW1lQ29yZUN0eCI6NzQ2LCIuLi9yZWdpc3RyeS9SZWdpc3RyeSI6NzQ5LCIuLi9zeW5jaGVyL1N5bmNoZXJNYW5hZ2VyIjo3NTYsIi4uL3V0aWxzL3V0aWxzIjo3NTksImJhYmVsLXBvbHlmaWxsIjoxLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2Fzc2lnbiI6MzAwLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6MzA3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3NTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3Byb21pc2UgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZScpOwoKdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgp2YXIgT2JqZWN0QWxsb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX3VybDogVVJMCiAgX2J1czogTWluaUJ1cwogICovCgogIC8qKgogICAqIENyZWF0ZSBhbiBPYmplY3QgQWxsb2NhdGlvbgogICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICAgdXJsIC0gdXJsIGZyb20gd2hvIGlzIHNlbmRpbmcgdGhlIG1lc3NhZ2UKICAgKiBAcGFyYW0gIHtNaW5pQnVzfSAgICAgIGJ1cyAtIE1pbmlCdXMgdXNlZCBmb3IgYWRkcmVzcyBhbGxvY2F0aW9uCiAgICovCgogIGZ1bmN0aW9uIE9iamVjdEFsbG9jYXRpb24odXJsLCBidXMpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIE9iamVjdEFsbG9jYXRpb24pOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9idXMgPSBidXM7CiAgfQoKICAvKioKICAgKiBnZXQgdGhlIFVSTCB2YWx1ZQogICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVybCB2YWx1ZTsKICAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKE9iamVjdEFsbG9jYXRpb24sIFt7CiAgICBrZXk6ICdjcmVhdGUnLAoKCiAgICAvKioKICAgICAqIEFzayBmb3IgY3JlYXRpb24gb2YgYSBudW1iZXIgb2YgT2JqZWN0IGFkZHJlc3NlcywgdG8gdGhlIGRvbWFpbiBtZXNzYWdlIG5vZGUuCiAgICAgKiBAcGFyYW0gIHtEb21haW59IGRvbWFpbiAtIERvbWFpbiBvZiB0aGUgbWVzc2FnZSBub2RlLgogICAgICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgLSBOdW1iZXIgb2YgYWRkcmVzc2VzIHRvIHJlcXVlc3QKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdFVSTD59ICBBIGxpc3Qgb2YgT2JqZWN0VVJMJ3MKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShkb21haW4sIHNjaGVtZSwgbnVtYmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gbXNnLW5vZGUgT2JqZWN0QWxsb2NhdGlvbk1hbmFnZXIgY29tcG9uZW50CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl91cmwsIHRvOiAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvb2JqZWN0LWFkZHJlc3MtYWxsb2NhdGlvbicsCiAgICAgICAgYm9keTogeyBzY2hlbWU6IHNjaGVtZSwgdmFsdWU6IHsgbnVtYmVyOiBudW1iZXIgfSB9CiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXBseS5ib2R5LnZhbHVlLmFsbG9jYXRlZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAndXJsJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXJsOwogICAgfQogIH1dKTsKICByZXR1cm4gT2JqZWN0QWxsb2NhdGlvbjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gT2JqZWN0QWxsb2NhdGlvbjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjMwNywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyfV0sNzUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJyk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTsKCnZhciBfU3Vic2NyaXB0aW9uID0gcmVxdWlyZSgnLi9TdWJzY3JpcHRpb24nKTsKCnZhciBfU3Vic2NyaXB0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N1YnNjcmlwdGlvbik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKdmFyIE9ic2VydmVyT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIE9ic2VydmVyT2JqZWN0KHBhcmVudCwgdXJsLCBjaGlsZHJlbnMpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIE9ic2VydmVyT2JqZWN0KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2NoaWxkcmVucyA9IGNoaWxkcmVuczsKCiAgICBfdGhpcy5fYnVzID0gcGFyZW50Ll9idXM7CiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHt9OwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoT2JzZXJ2ZXJPYmplY3QsIFt7CiAgICBrZXk6ICdhZGRTdWJzY3JpcHRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFN1YnNjcmlwdGlvbihoeXBlcnR5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5XSA9IG5ldyBfU3Vic2NyaXB0aW9uMi5kZWZhdWx0KF90aGlzLl9idXMsIGh5cGVydHksIF90aGlzLl91cmwsIF90aGlzLl9jaGlsZHJlbnMsIGZhbHNlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdyZW1vdmVTdWJzY3JpcHRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVN1YnNjcmlwdGlvbihoeXBlcnR5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKGh5cGVydHkpLmRvbWFpbjsKICAgICAgdmFyIG9ialVSTFN1YnNjcmlwdGlvbiA9IF90aGlzLl91cmwgKyAnL3N1YnNjcmlwdGlvbic7CgogICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eV07CiAgICAgIGlmIChzdWJzY3JpcHRpb24pIHsKICAgICAgICAvL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gcmVtb3RlIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVVuU3Vic2NyaWJlCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAndW5zdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fcGFyZW50Ll91cmwsIHRvOiBvYmpVUkxTdWJzY3JpcHRpb24sCiAgICAgICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsIH0KICAgICAgICB9KTsKCiAgICAgICAgLy9UT0RPOiBzaG91bGQgSSB3YWl0IGZvciByZXNwb25zZSBiZWZvcmUgdW5zdWJzY3JpYmUgb24gbXNnLW5vZGUKICAgICAgICAvL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gbXNnLW5vZGUgU3Vic2NyaXB0aW9uTWFuYWdlciBjb21wb25lbnQKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICd1bnN1YnNjcmliZScsIGZyb206IF90aGlzLl9wYXJlbnQuX3VybCwgdG86ICdkb21haW46Ly9tc2ctbm9kZS4nICsgZG9tYWluICsgJy9zbScsCiAgICAgICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsLCBjaGlsZHJlblJlc291cmNlczogX3RoaXMuX2NoaWxkcmVucyB9CiAgICAgICAgfSk7CgogICAgICAgIHN1YnNjcmlwdGlvbi5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICAgIGRlbGV0ZSBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5XTsKICAgICAgfQogICAgfQogIH1dKTsKICByZXR1cm4gT2JzZXJ2ZXJPYmplY3Q7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IE9ic2VydmVyT2JqZWN0Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy91dGlscyI6NzU5LCIuL1N1YnNjcmlwdGlvbiI6NzU1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3NTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3Byb21pc2UgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZScpOwoKdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKdmFyIF9rZXlzID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzJyk7Cgp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91dGlscycpOwoKdmFyIF9TdWJzY3JpcHRpb24gPSByZXF1aXJlKCcuL1N1YnNjcmlwdGlvbicpOwoKdmFyIF9TdWJzY3JpcHRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3Vic2NyaXB0aW9uKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgUmVwb3J0ZXJPYmplY3QgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUmVwb3J0ZXJPYmplY3QocGFyZW50LCBvd25lciwgdXJsKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBSZXBvcnRlck9iamVjdCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fcGFyZW50ID0gcGFyZW50OwogICAgX3RoaXMuX293bmVyID0gb3duZXI7CiAgICBfdGhpcy5fdXJsID0gdXJsOwoKICAgIF90aGlzLl9idXMgPSBwYXJlbnQuX2J1czsKCiAgICBfdGhpcy5fZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKG93bmVyKS5kb21haW47CiAgICBfdGhpcy5fb2JqU3Vic2NyaXB0b3JVUkwgPSBfdGhpcy5fdXJsICsgJy9zdWJzY3JpcHRpb24nOwoKICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0ge307CiAgICBfdGhpcy5fY2hpbGRyZW5zID0gW107CiAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsKCiAgICBfdGhpcy5fZm9yd2FyZHMgPSB7fTsKCiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFJlcG9ydGVyT2JqZWN0LCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2FkZCBzdWJzY3JpcHRpb24gbGlzdGVuZXIuLi4KICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbkxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fb2JqU3Vic2NyaXB0b3JVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5fb2JqU3Vic2NyaXB0b3JVUkwgKyAnLVJDVjogJywgbXNnKTsKICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CiAgICAgICAgICBjYXNlICdzdWJzY3JpYmUnOgogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVTdWJzY3JpYmUobXNnKTticmVhazsKICAgICAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoKICAgICAgICAgICAgX3RoaXMuX29uUmVtb3RlVW5TdWJzY3JpYmUobXNnKTticmVhazsKICAgICAgICAgIGNhc2UgJ3Jlc3BvbnNlJzoKICAgICAgICAgICAgX3RoaXMuX29uUmVtb3RlUmVzcG9uc2UobXNnKTticmVhazsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdmFyIGNoYW5nZVVSTCA9IF90aGlzLl91cmwgKyAnL2NoYW5nZXMnOwogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKGNoYW5nZVVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIC8vVE9ETzogd2hhdCB0b2RvIGhlcmU/IFNhdmUgY2hhbmdlcz8KICAgICAgICBjb25zb2xlLmxvZygnU3luY2hlck1hbmFnZXItJyArIGNoYW5nZVVSTCArICctUkNWOiAnLCBtc2cpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uTGlzdGVuZXIucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCk7CgogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoY2wpIHsKICAgICAgICBjbC5yZW1vdmUoKTsKICAgICAgfSk7CgogICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9mb3J3YXJkcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX3RoaXMuZm9yd2FyZFVuU3Vic2NyaWJlKGtleSk7CiAgICAgIH0pOwoKICAgICAgLy9yZW1vdmUgYWxsIHN1YnNjcmlwdGlvbnMKICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fc3Vic2NyaXB0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNba2V5XS5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlZ2lzdGVyIGEgbGlzdGVuZXIgaW4gdGhlIG1zZy1ub2RlIGFuZCBpbiB0aGUgbG9jYWwgTWVzc2FnZUJ1cywgc28gdGhhdCBtZXNzYWdlcyBvbiB0aGlzIGFkZHJlc3MgYXJlIGZvcndhcmRlZCB0byB0aGUgcmVwb3J0ZXIgb2JqZWN0CiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGFkZHJlc3MgLSBVUkwgdG8gcmVnaXN0ZXIgdGhlIGxpc3RlbmVycwogICAgICogQHJldHVybiB7UHJvbWlzZX0gUmV0dXJuIFByb21pc2UgT0sgb3IgZXJyb3IKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdmb3J3YXJkU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3J3YXJkU3Vic2NyaWJlKGFkZHJlc3NlcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIHRoZSBtc2ctbm9kZSBTdWJzY3JpcHRpb25NYW5hZ2VyIGNvbXBvbmVudAogICAgICB2YXIgbm9kZVN1YnNjcmliZU1zZyA9IHsKICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX3BhcmVudC5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBfdGhpcy5fZG9tYWluICsgJy9zbScsCiAgICAgICAgYm9keTogeyBzdWJzY3JpYmU6IGFkZHJlc3Nlcywgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShub2RlU3Vic2NyaWJlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdmb3J3YXJkLXN1YnNjcmliZS1yZXNwb25zZShyZXBvcnRlcik6ICcsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB2YXIgbmV3Rm9yd2FyZCA9IF90aGlzLl9idXMuYWRkRm9yd2FyZChfdGhpcy5fdXJsLCBfdGhpcy5fb3duZXIpOwogICAgICAgICAgICBfdGhpcy5fZm9yd2FyZHNbYWRkcmVzc2VzWzBdXSA9IG5ld0ZvcndhcmQ7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgnRXJyb3Igb24gbXNnLW5vZGUgc3Vic2NyaXB0aW9uOiAnICsgcmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVblJlZ2lzdGVyIGEgbGlzdGVuZXIgaW4gdGhlIG1zZy1ub2RlIGFuZCBpbiB0aGUgbG9jYWwgTWVzc2FnZUJ1cywgc28gdGhhdCBtZXNzYWdlcyBvbiB0aGlzIGFkZHJlc3MgYXJlIHJlbW92ZWQgZnJvbSBmb3J3YXJkCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGFkZHJlc3MgLSBVUkwgdG8gdW4tcmVnaXN0ZXIgdGhlIGxpc3RlbmVycwogICAgICovCgogIH0sIHsKICAgIGtleTogJ2ZvcndhcmRVblN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yd2FyZFVuU3Vic2NyaWJlKGFkZHJlc3MpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9mb3J3YXJkc1thZGRyZXNzXS5yZW1vdmUoKTsKICAgICAgZGVsZXRlIF90aGlzLl9mb3J3YXJkc1thZGRyZXNzXTsKCiAgICAgIC8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byB0aGUgbXNnLW5vZGUgU3Vic2NyaXB0aW9uTWFuYWdlciBjb21wb25lbnQKICAgICAgdmFyIG5vZGVVblN1YnNjcmliZU1zZyA9IHsKICAgICAgICB0eXBlOiAndW5zdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fcGFyZW50Ll91cmwsIHRvOiAnZG9tYWluOi8vbXNnLW5vZGUuJyArIF90aGlzLl9kb21haW4gKyAnL3NtJywKICAgICAgICBib2R5OiB7IHN1YnNjcmliZTogW2FkZHJlc3NdLCBzb3VyY2U6IF90aGlzLl9vd25lciB9CiAgICAgIH07CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG5vZGVVblN1YnNjcmliZU1zZyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWdpc3RlciBsaXN0ZW5lcnMgZm9yIGEgbGlzdCBvZiBjaGlsZHJlbnMuIFB1YmxpYyBjaGFubmVscyB1c2VkIHRvIHRyYW5zbWl0IG1lc3NhZ2VzLgogICAgICogQHBhcmFtICB7c3RyaW5nW119IGNoaWxkcmVucyAtIGNoYW5uZWxzIHRvIHJlZ2lzdGVyCiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSBSZXR1cm4gUHJvbWlzZSBPSyBvciBlcnJvcgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZENoaWxkcmVucycsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2hpbGRyZW5zKGNoaWxkcmVucykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgaWYgKGNoaWxkcmVucy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBjaGlsZEJhc2VVUkwgPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nOwogICAgICAgIF90aGlzLl9jaGlsZHJlbnMucHVzaChjaGlsZHJlbnMpOwoKICAgICAgICAvKgogICAgICAgIF90aGlzLl9jaGlsZHJlbnMuZm9yRWFjaCgoY2hpbGQpID0+IHsKICAgICAgICAgIGxldCBjaGlsZElkID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7CiAgICAgICAgICAgIGxldCBzZWxmRm9yd2FyZCA9IF90aGlzLl9idXMuYWRkRm9yd2FyZChjaGlsZElkLCBvd25lcik7CiAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChzZWxmRm9yd2FyZCk7CiAgICAgICAgfSk7Ki8KCiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBbXTsKICAgICAgICBjaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb25zLnB1c2goY2hpbGRCYXNlVVJMICsgY2hpbGQpOwogICAgICAgIH0pOwoKICAgICAgICAvL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gdGhlIG1zZy1ub2RlIFN1YnNjcmlwdGlvbk1hbmFnZXIgY29tcG9uZW50CiAgICAgICAgdmFyIG5vZGVTdWJzY3JpYmVNc2cgPSB7CiAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX3BhcmVudC5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBfdGhpcy5fZG9tYWluICsgJy9zbScsCiAgICAgICAgICBib2R5OiB7IHN1YnNjcmliZTogc3Vic2NyaXB0aW9ucywgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uobm9kZVN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnbm9kZS1zdWJzY3JpYmUtcmVzcG9uc2UocmVwb3J0ZXIpOiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKCiAgICAgICAgICAgIC8vYWRkIGNoaWxkcmVuIGxpc3RlbmVycyBvbiBsb2NhbCAuLi4KICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZFVSTCkgewogICAgICAgICAgICAgIHZhciBjaGlsZExpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGlsZFVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAgICAgLy9UT0RPOiB3aGF0IHRvZG8gaGVyZT8gU2F2ZSBjaGlsZHJlbnM/CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3luY2hlck1hbmFnZXItJyArIGNoaWxkVVJMICsgJy1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goY2hpbGRMaXN0ZW5lcik7CgogICAgICAgICAgICAgIHZhciBzZWxmRm9yd2FyZCA9IF90aGlzLl9idXMuYWRkRm9yd2FyZChjaGlsZFVSTCwgX3RoaXMuX293bmVyKTsKICAgICAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChzZWxmRm9yd2FyZCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KCdFcnJvciBvbiBtc2ctbm9kZSBzdWJzY3JpcHRpb246ICcgKyByZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdkZWxldGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoX3RoaXMuX293bmVyKS5kb21haW47CgogICAgICAvL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgZGlyZWN0bHkgdG8gYWxsIHN1YnNjcmliZXJzIG9mIHRoZSByZXBvcnRlcgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAnZGVsZXRlJywgZnJvbTogX3RoaXMuX29ialN1YnNjcmlwdG9yVVJMLCB0bzogX3RoaXMuX3VybCArICcvY2hhbmdlcycKICAgICAgfSk7CgogICAgICAvL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gdGhlIG1zZy1ub2RlIE9iamVjdEFsbG9jYXRpb25NYW5hZ2VyIGNvbXBvbmVudAogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAnZGVsZXRlJywgZnJvbTogX3RoaXMuX3BhcmVudC5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL29iamVjdC1hZGRyZXNzLWFsbG9jYXRpb24nLAogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwsIGNoaWxkcmVuUmVzb3VyY2VzOiBfdGhpcy5fY2hpbGRyZW5zIH0KICAgICAgfSk7CgogICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICBkZWxldGUgX3RoaXMuX3BhcmVudC5fcmVwb3J0ZXJzW190aGlzLl91cmxdOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZVJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVSZXNwb25zZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IF90aGlzLl91cmwsCiAgICAgICAgYm9keTogeyBjb2RlOiBtc2cuYm9keS5jb2RlLCBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHksIHNvdXJjZTogbXNnLmZyb20gfQogICAgICB9KTsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBTeW5jaGVyIC0+IHN1YnNjcmliZQoKICB9LCB7CiAgICBrZXk6ICdfb25SZW1vdGVTdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlbW90ZVN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGh5cGVydHlVUkwgPSBtc2cuYm9keS5zdWJzY3JpYmVyOwoKICAgICAgLy92YWxpZGF0ZSBpZiBzdWJzY3JpcHRpb24gYWxyZWFkeSBleGlzdHM/CiAgICAgIGlmIChfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VVJMXSkgewogICAgICAgIHZhciBlcnJvck1zZyA9IHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IGh5cGVydHlVUkwsCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDUwMCwgZGVzYzogJ1N1YnNjcmlwdGlvbiBmb3IgKCcgKyBfdGhpcy5fdXJsICsgJyA6ICcgKyBoeXBlcnR5VVJMICsgJykgYWxyZWFkeSBleGlzdHMhJyB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShlcnJvck1zZyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvL2FzayB0byBzdWJzY3JpYmUgdG8gU3luY2hlcj8gKGRlcGVuZHMgb24gdGhlIG9wZXJhdGlvbiBtb2RlKQogICAgICAvL1RPRE86IGdldCBtb2RlIGZyb20gb2JqZWN0IQogICAgICB2YXIgbW9kZSA9ICdzdWIvcHViJzsKCiAgICAgIGlmIChtb2RlID09PSAnc3ViL3B1YicpIHsKICAgICAgICAvL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gbG9jYWwgaHlwZXJ0eSBhZGRyZXNzIFN5bmNoZXIgLT4gX29uRm9yd2FyZAogICAgICAgIHZhciBmb3J3YXJkTXNnID0gewogICAgICAgICAgdHlwZTogJ2ZvcndhcmQnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogX3RoaXMuX293bmVyLAogICAgICAgICAgYm9keTogeyB0eXBlOiBtc2cudHlwZSwgZnJvbTogaHlwZXJ0eVVSTCwgdG86IF90aGlzLl91cmwsIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShmb3J3YXJkTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdmb3J3YXJkLXJlcGx5OiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVSTF0gPSBuZXcgX1N1YnNjcmlwdGlvbjIuZGVmYXVsdChfdGhpcy5fYnVzLCBfdGhpcy5fb3duZXIsIF90aGlzLl91cmwsIF90aGlzLl9jaGlsZHJlbnMsIHRydWUpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vRkxPVy1PVVQ6IHN1YnNjcmlwdGlvbiByZXNwb25zZSBzZW50IChmb3J3YXJkIGZyb20gaW50ZXJuYWwgSHlwZXJ0eSkKICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgICAgYm9keTogcmVwbHkuYm9keQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSByZW1vdGUgT2JzZXJ2ZXJPYmplY3QgLT4gcmVtb3ZlU3Vic2NyaXB0aW9uCgogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZVVuU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVVblN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGh5cGVydHlVUkwgPSBtc2cuYm9keS5zdWJzY3JpYmVyOwoKICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVUkxdOwogICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgc3Vic2NyaXB0aW9uLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgICAgZGVsZXRlIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVUkxdOwoKICAgICAgICAvL1RPRE86IHNlbmQgdW4tc3Vic2NyaWJlIG1lc3NhZ2UgdG8gU3luY2hlcj8gKGRlcGVuZHMgb24gdGhlIG9wZXJhdGlvbiBtb2RlKQogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBSZXBvcnRlck9iamVjdDsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUmVwb3J0ZXJPYmplY3Q7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL3V0aWxzIjo3NTksIi4vU3Vic2NyaXB0aW9uIjo3NTUsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6MzA1LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSI6MzA3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3NTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MnKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbihidXMsIG93bmVyLCB1cmwsIGNoaWxkcmVucywgaXNSZXBvcnRlcikgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgU3Vic2NyaXB0aW9uKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdmFyIGNoaWxkQmFzZVVSTCA9IHVybCArICcvY2hpbGRyZW4vJzsKICAgIHZhciBjaGFuZ2VVUkwgPSB1cmwgKyAnL2NoYW5nZXMnOwoKICAgIC8vcHJvY2VzcyBkZWxldGUgbWVzc2FnZQogICAgX3RoaXMuX2RlbGV0ZUxpc3RlbmVyID0gYnVzLmFkZExpc3RlbmVyKGNoYW5nZVVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICBpZiAobXNnLnR5cGUgPT09ICdkZWxldGUnKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmlwdGlvbi1ERUxFVEU6ICcsIG1zZyk7CgogICAgICAgIC8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byBhbGwgc3Vic2NyaWJlcnMKICAgICAgICB2YXIgZGVsZXRlTWVzc2FnZVRvSHlwZXJ0eSA9IHsKICAgICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBtc2cuZnJvbSwgdG86IG93bmVyLAogICAgICAgICAgYm9keTogeyByZXNvdXJjZTogdXJsIH0KICAgICAgICB9OwoKICAgICAgICAvL3NlbmQgZGVsZXRlIHRvIGh5cGVydHkKICAgICAgICBidXMucG9zdE1lc3NhZ2UoZGVsZXRlTWVzc2FnZVRvSHlwZXJ0eSwgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaXB0aW9uLURFTEVURS1SRVBMWTogJywgcmVwbHkpOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vYWRkIGNoYW5nZSBwdWJsaXNoIGFkZHJlc3Mgb3IgZm9yd2FyZAogICAgaWYgKGlzUmVwb3J0ZXIpIHsKICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyID0gYnVzLmFkZFB1Ymxpc2goY2hhbmdlVVJMKTsKICAgIH0gZWxzZSB7CiAgICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lciA9IGJ1cy5hZGRGb3J3YXJkKGNoYW5nZVVSTCwgb3duZXIpOwogICAgfQoKICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOwogICAgY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgIHZhciBjaGlsZElkID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7CgogICAgICAvL2FkZCBjaGlsZHJlbiBwdWJsaXNoIGFkZHJlc3MKICAgICAgdmFyIGNoaWxkcmVuRm9yd2FyZCA9IGJ1cy5hZGRQdWJsaXNoKGNoaWxkSWQpOwogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChjaGlsZHJlbkZvcndhcmQpOwoKICAgICAgLy9hZGQgc2VsZiBmb3J3YXJkIGlmIGFuIG9ic2VydmVyCiAgICAgIGlmICghaXNSZXBvcnRlcikgewogICAgICAgIHZhciBzZWxmRm9yd2FyZCA9IGJ1cy5hZGRGb3J3YXJkKGNoaWxkSWQsIG93bmVyKTsKICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChzZWxmRm9yd2FyZCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoU3Vic2NyaXB0aW9uLCBbewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2RlbGV0ZUxpc3RlbmVyLnJlbW92ZSgpOwoKICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpOwoKICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGZvcndhcmQpIHsKICAgICAgICBmb3J3YXJkLnJlbW92ZSgpOwogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN1YnNjcmlwdGlvbjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gU3Vic2NyaXB0aW9uOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siOjMxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjozMTJ9XSw3NTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeScpOwoKdmFyIF9zdHJpbmdpZnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RyaW5naWZ5KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcycpOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7Cgp2YXIgX09iamVjdEFsbG9jYXRpb24gPSByZXF1aXJlKCcuL09iamVjdEFsbG9jYXRpb24nKTsKCnZhciBfT2JqZWN0QWxsb2NhdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9PYmplY3RBbGxvY2F0aW9uKTsKCnZhciBfUmVwb3J0ZXJPYmplY3QgPSByZXF1aXJlKCcuL1JlcG9ydGVyT2JqZWN0Jyk7Cgp2YXIgX1JlcG9ydGVyT2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JlcG9ydGVyT2JqZWN0KTsKCnZhciBfT2JzZXJ2ZXJPYmplY3QgPSByZXF1aXJlKCcuL09ic2VydmVyT2JqZWN0Jyk7Cgp2YXIgX09ic2VydmVyT2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX09ic2VydmVyT2JqZWN0KTsKCnZhciBfdHYgPSByZXF1aXJlKCcuLi91dGlscy90djQnKTsKCnZhciBfdHYyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHYpOwoKdmFyIF9NZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvTWVzc2FnZUZhY3RvcnknKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioKICogQGF1dGhvciBtaWNhZWxwZWRyb3NhQGdtYWlsLmNvbQogKiBDb3JlIFN5bmNyb25pemF0aW9uIHN5c3RlbS4KICovCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKdmFyIFN5bmNoZXJNYW5hZ2VyID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICBfdXJsOiBVUkwKICBfYnVzOiBNaW5pQnVzCiAgX3JlZ2lzdHJ5OiBSZWdpc3RyeQogIF9hbGxvY2F0b3I6IE9iamVjdEFsbG9jYXRpb24KICAgIF9yZXBvcnRlcnM6IHsgT2JqZWN0VVJMOiBSZXBvcnRlck9iamVjdCB9CiAgX29ic2VydmVyczogeyBPYmplY3RVUkw6IE9ic2VydmVyT2JqZWN0IH0KICAqLwoKICBmdW5jdGlvbiBTeW5jaGVyTWFuYWdlcihydW50aW1lVVJMLCBidXMsIHJlZ2lzdHJ5LCBjYXRhbG9nLCBhbGxvY2F0b3IpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFN5bmNoZXJNYW5hZ2VyKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9idXMgPSBidXM7CiAgICBfdGhpcy5fcmVnaXN0cnkgPSByZWdpc3RyeTsKICAgIF90aGlzLl9jYXRhbG9nID0gY2F0YWxvZzsKCiAgICAvL1RPRE86IHRoZXNlIHNob3VsZCBiZSBzYXZlZCBpbiBwZXJzaXN0ZW5jZSBlbmdpbmU/CiAgICBfdGhpcy5fdXJsID0gcnVudGltZVVSTCArICcvc20nOwogICAgX3RoaXMuX29iamVjdFVSTCA9IHJ1bnRpbWVVUkwgKyAnL29iamVjdC1hbGxvY2F0aW9uJzsKCiAgICBfdGhpcy5fcmVwb3J0ZXJzID0ge307CiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0ge307CgogICAgLy9UT0RPOiB0aGlzIHNob3VsZCBub3QgYmUgaGFyZGNvZGVkIQogICAgX3RoaXMuX2RvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShydW50aW1lVVJMKS5kb21haW47CgogICAgX3RoaXMuX21mID0gbmV3IF9NZXNzYWdlRmFjdG9yeS5NZXNzYWdlRmFjdG9yeShmYWxzZSwge30pOwoKICAgIGlmIChhbGxvY2F0b3IpIHsKICAgICAgX3RoaXMuX2FsbG9jYXRvciA9IGFsbG9jYXRvcjsKICAgIH0gZWxzZSB7CiAgICAgIF90aGlzLl9hbGxvY2F0b3IgPSBuZXcgX09iamVjdEFsbG9jYXRpb24yLmRlZmF1bHQoX3RoaXMuX29iamVjdFVSTCwgYnVzKTsKICAgIH0KCiAgICBidXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgZnVuY3Rpb24gKG1zZykgewogICAgICBjb25zb2xlLmxvZygnU3luY2hlck1hbmFnZXItUkNWOiAnLCBtc2cpOwogICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CiAgICAgICAgY2FzZSAnY3JlYXRlJzoKICAgICAgICAgIF90aGlzLl9vbkNyZWF0ZShtc2cpO2JyZWFrOwogICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICBfdGhpcy5fb25EZWxldGUobXNnKTticmVhazsKICAgICAgICBjYXNlICdzdWJzY3JpYmUnOgogICAgICAgICAgX3RoaXMuX29uTG9jYWxTdWJzY3JpYmUobXNnKTticmVhazsKICAgICAgICBjYXNlICd1bnN1YnNjcmliZSc6CiAgICAgICAgICBfdGhpcy5fb25Mb2NhbFVuU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoU3luY2hlck1hbmFnZXIsIFt7CiAgICBrZXk6ICdfb25DcmVhdGUnLAoKCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBTeW5jaGVyIC0+IGNyZWF0ZQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNyZWF0ZShtc2cpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBvd25lciA9IG1zZy5mcm9tOwogICAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKG1zZy5mcm9tKS5kb21haW47CgogICAgICBpZiAobXNnLmJvZHkucmVzb3VyY2UpIHsKICAgICAgICBfdGhpcy5fYXV0aG9yaXNlKG1zZywgbXNnLmJvZHkucmVzb3VyY2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoc2NoZW1lLCBjaGlsZHJlbikKICAgICAgX3RoaXMuX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IobXNnLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uIChkZXNjcmlwdG9yKSB7CgogICAgICAgIHZhciBwcm9wZXJ0aWVzID0gZGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllczsKICAgICAgICB2YXIgc2NoZW1lID0gcHJvcGVydGllcy5zY2hlbWUgPyBwcm9wZXJ0aWVzLnNjaGVtZS5jb25zdGFudCA6ICdyZXNvdXJjZSc7CiAgICAgICAgdmFyIGNoaWxkcmVucyA9IHByb3BlcnRpZXMuY2hpbGRyZW4gPyBwcm9wZXJ0aWVzLmNoaWxkcmVuLmNvbnN0YW50IDogW107CgogICAgICAgIGNvbnNvbGUubG9nKCdTY2hlbWU6ICcsIHNjaGVtZSk7CgogICAgICAgIC8vIHNjaGVtYSB2YWxpZGF0aW9uCiAgICAgICAgY29uc29sZS5sb2coInJ1bm5pbmcgb2JqZWN0IHZhbGlkYXRpb24uLi4iKTsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIG9iaiA9IG1zZy5ib2R5LnZhbHVlOwogICAgICAgICAgdmFyIHNjaGVtYSA9IGRlc2NyaXB0b3Iuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlOwogICAgICAgICAgdmFyIHJlc3VsdCA9IF90djIuZGVmYXVsdC52YWxpZGF0ZU11bHRpcGxlKG9iaiwgc2NoZW1hKTsKCiAgICAgICAgICAvLyBjaGVjayByZXN1bHQgYW5kIHRocm93IGVycm9yIGlmIGludmFsaWQKICAgICAgICAgIGlmICghcmVzdWx0LnZhbGlkKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2Fybigib2JqZWN0IHZhbGlkYXRpb24gZmFpbGVkISIsICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShyZXN1bHQuZXJyb3JzLCBudWxsLCAyKSk7CiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoIm9iamVjdDoiLCAoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkob2JqLCBudWxsLCAyKSwgIlxyXG5zY2hlbWE6IiwgKDAsIF9zdHJpbmdpZnkyLmRlZmF1bHQpKHNjaGVtYSwgbnVsbCwgMikpOwoKICAgICAgICAgICAgLy8gVE9ETyB0aGlzIHNob3VsZCB0aHJvdyBhbiBlcnJvcgogICAgICAgICAgICAvL3Rocm93IG5ldyBFcnJvcigib2JqZWN0IHZhbGlkYXRpb24gZmFpbGVkOiIsIHJlc3VsdC5lcnJvci5tZXNzYWdlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJvYmplY3QgdmFsaWRhdGlvbiBzdWNjZWVkZWQiLCByZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUud2FybigiRXJyb3IgZHVyaW5nIG9iamVjdCB2YWxpZGF0aW9uOiIsIGUpOwogICAgICAgIH0KCiAgICAgICAgLy9yZXF1ZXN0IGFkZHJlc3MgYWxsb2NhdGlvbiBvZiBhIG5ldyBvYmplY3QgZnJvbSB0aGUgbXNnLW5vZGUKICAgICAgICBfdGhpcy5fYWxsb2NhdG9yLmNyZWF0ZShkb21haW4sIHNjaGVtZSwgMSkudGhlbihmdW5jdGlvbiAoYWxsb2NhdGVkKSB7CiAgICAgICAgICB2YXIgb2JqVVJMID0gYWxsb2NhdGVkWzBdOwoKICAgICAgICAgIGNvbnNvbGUubG9nKCdBTExPQ0FUT1IgQ1JFQVRFOicsIGFsbG9jYXRlZCk7CgogICAgICAgICAgdmFyIHN1YnNjcmlwdGlvblVSTCA9IG9ialVSTCArICcvc3Vic2NyaXB0aW9uJzsKCiAgICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaXB0aW9uIFVSTCcsIHN1YnNjcmlwdGlvblVSTCk7CgogICAgICAgICAgLy9UbyByZWdpc3RlciB0aGUgZGF0YU9iamVjdCBpbiB0aGUgcnVudGltZVJlZ2lzdHJ5CiAgICAgICAgICBfdGhpcy5fcmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0KG1zZy5ib2R5LnZhbHVlLm5hbWUsIG1zZy5ib2R5LnZhbHVlLnNjaGVtYSwgb2JqVVJMLCBtc2cuYm9keS52YWx1ZS5yZXBvcnRlciwgbXNnLmJvZHkuYXV0aG9yaXNlKS50aGVuKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0IHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkJywgcmVzb2x2ZSk7CgogICAgICAgICAgICAvL2FsbCBPSyAtPiBjcmVhdGUgcmVwb3J0ZXIgYW5kIHJlZ2lzdGVyIGxpc3RlbmVycwogICAgICAgICAgICB2YXIgcmVwb3J0ZXIgPSBuZXcgX1JlcG9ydGVyT2JqZWN0Mi5kZWZhdWx0KF90aGlzLCBvd25lciwgb2JqVVJMKTsKICAgICAgICAgICAgcmVwb3J0ZXIuZm9yd2FyZFN1YnNjcmliZShbb2JqVVJMLCBzdWJzY3JpcHRpb25VUkxdKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXBvcnRlci5hZGRDaGlsZHJlbnMoY2hpbGRyZW5zKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLl9yZXBvcnRlcnNbb2JqVVJMXSA9IHJlcG9ydGVyOwoKICAgICAgICAgICAgICAgIC8vRkxPVy1PVVQ6IG1lc3NhZ2UgcmVzcG9uc2UgdG8gU3luY2hlciAtPiBjcmVhdGUKICAgICAgICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBvd25lciwKICAgICAgICAgICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHJlc291cmNlOiBvYmpVUkwsIGNoaWxkcmVuUmVzb3VyY2VzOiBjaGlsZHJlbnMgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy9zZW5kIGNyZWF0ZSB0byBhbGwgb2JzZXJ2ZXJzLCByZXNwb25zZXMgd2lsbCBiZSBkZWxpdmVyIHRvIHRoZSBIeXBlcnR5IG93bmVyPwogICAgICAgICAgICAgICAgLy9zY2hlZHVsZSBmb3IgbmV4dCBjeWNsZSBuZWVkZWQsIGJlY2F1c2UgdGhlIFJlcG9ydGVyIHNob3VsZCBiZSBhdmFpbGFibGUuCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgLy93aWxsIGludml0ZSBvdGhlciBoeXBlcnRpZXMKICAgICAgICAgICAgICAgICAgX3RoaXMuX2F1dGhvcmlzZShtc2csIG9ialVSTCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIC8vRkxPVy1PVVQ6IGVycm9yIG1lc3NhZ2UgcmVzcG9uc2UgdG8gU3luY2hlciAtPiBjcmVhdGUKICAgICAgICB2YXIgcmVzcG9uc2VNc2cgPSB7CiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBvd25lciwKICAgICAgICAgIGJvZHk6IHsgY29kZTogNTAwLCBkZXNjOiByZWFzb24gfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UocmVzcG9uc2VNc2cpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfYXV0aG9yaXNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYXV0aG9yaXNlKG1zZywgb2JqVVJMKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBvYmpTdWJzY3JpcHRvclVSTCA9IG9ialVSTCArICcvc3Vic2NyaXB0aW9uJzsKCiAgICAgIG1zZy5ib2R5LmF1dGhvcmlzZS5mb3JFYWNoKGZ1bmN0aW9uIChoeXBlcnR5VVJMKSB7CiAgICAgICAgLy9GTE9XLU9VVDogc2VuZCBpbnZpdGVzIHRvIGxpc3Qgb2YgcmVtb3RlIFN5bmNoZXIgLT4gX29uUmVtb3RlQ3JlYXRlIC0+IG9uTm90aWZpY2F0aW9uCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogb2JqU3Vic2NyaXB0b3JVUkwsIHRvOiBoeXBlcnR5VVJMLAogICAgICAgICAgYm9keTogeyBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHksIHNvdXJjZTogbXNnLmZyb20sIHZhbHVlOiBtc2cuYm9keS52YWx1ZSwgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gZGVsZXRlCgogIH0sIHsKICAgIGtleTogJ19vbkRlbGV0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRGVsZXRlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG9ialVSTCA9IG1zZy5ib2R5LnJlc291cmNlOwoKICAgICAgdmFyIG9iamVjdCA9IF90aGlzLl9yZXBvcnRlcnNbb2JqVVJMXTsKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIC8vVE9ETzogaXMgdGhlcmUgYW55IHBvbGljeSB2ZXJpZmljYXRpb24gYmVmb3JlIGRlbGV0ZT8KICAgICAgICBvYmplY3QuZGVsZXRlKCk7CgogICAgICAgIC8vVE9ETzogdW5yZWdpc3RlciBvYmplY3Q/CiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGxvY2FsIFN5bmNoZXIgLT4gc3Vic2NyaWJlCgogIH0sIHsKICAgIGtleTogJ19vbkxvY2FsU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Mb2NhbFN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGh5cGVydHlVUkwgPSBtc2cuZnJvbTsKICAgICAgdmFyIG9ialVSTCA9IG1zZy5ib2R5LnJlc291cmNlOwogICAgICB2YXIgb2JqVVJMU3Vic2NyaXB0aW9uID0gb2JqVVJMICsgJy9zdWJzY3JpcHRpb24nOwogICAgICB2YXIgY2hpbGRCYXNlVVJMID0gb2JqVVJMICsgJy9jaGlsZHJlbi8nOwoKICAgICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShvYmpVUkwpLmRvbWFpbjsKCiAgICAgIC8vZ2V0IHNjaGVtYSBmcm9tIGNhdGFsb2d1ZSBhbmQgcGFyc2UgLT4gKGNoaWxkcmVuKQogICAgICBfdGhpcy5fY2F0YWxvZy5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihtc2cuYm9keS5zY2hlbWEpLnRoZW4oZnVuY3Rpb24gKGRlc2NyaXB0b3IpIHsKICAgICAgICB2YXIgcHJvcGVydGllcyA9IGRlc2NyaXB0b3Iuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXM7CiAgICAgICAgdmFyIGNoaWxkcmVucyA9IHByb3BlcnRpZXMuY2hpbGRyZW4gPyBwcm9wZXJ0aWVzLmNoaWxkcmVuLmNvbnN0YW50IDogW107CgogICAgICAgIC8vY2hpbGRyZW4gYWRkcmVzc2VzCiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBbXTsKICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2gob2JqVVJMICsgJy9jaGFuZ2VzJyk7CiAgICAgICAgY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9ucy5wdXNoKGNoaWxkQmFzZVVSTCArIGNoaWxkKTsKICAgICAgICB9KTsKCiAgICAgICAgLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gdGhlIG1zZy1ub2RlLCByZWdpc3RlcmluZyBsaXN0ZW5lcnMgb24gdGhlIGJyb2tlcgogICAgICAgIHZhciBub2RlU3Vic2NyaWJlTXNnID0gewogICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IF90aGlzLl91cmwsIHRvOiAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvc20nLAogICAgICAgICAgYm9keTogeyBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHksIHN1YnNjcmliZTogc3Vic2NyaXB0aW9ucywgc291cmNlOiBoeXBlcnR5VVJMIH0KICAgICAgICB9OwoKICAgICAgICAvL3N1YnNjcmliZSBpbiBtc2ctbm9kZQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uobm9kZVN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnbm9kZS1zdWJzY3JpYmUtcmVzcG9uc2Uob2JzZXJ2ZXIpOiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKCiAgICAgICAgICAgIC8vRkxPVy1PVVQ6IHJlcGx5IHdpdGggcHJvdmlzaW9uYWwgcmVzcG9uc2UKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogaHlwZXJ0eVVSTCwKICAgICAgICAgICAgICBib2R5OiB7IGNvZGU6IDEwMCwgY2hpbGRyZW5SZXNvdXJjZXM6IGNoaWxkcmVucyB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gcmVtb3RlIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVN1YnNjcmliZQogICAgICAgICAgICB2YXIgb2JqU3Vic2NyaWJlTXNnID0gewogICAgICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogb2JqVVJMU3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgIGJvZHk6IHsgaWRlbnRpdHk6IG5vZGVTdWJzY3JpYmVNc2cuYm9keS5pZGVudGl0eSwgc3Vic2NyaWJlcjogaHlwZXJ0eVVSTCB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvL3N1YnNjcmliZSB0byByZXBvcnRlciBTTQogICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG9ialN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcG9ydGVyLXN1YnNjcmliZS1yZXNwb25zZTogJywgcmVwbHkpOwogICAgICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoKICAgICAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXTsKICAgICAgICAgICAgICAgIGlmICghb2JzZXJ2ZXIpIHsKICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXcgX09ic2VydmVyT2JqZWN0Mi5kZWZhdWx0KF90aGlzLCBvYmpVUkwsIGNoaWxkcmVucyk7CiAgICAgICAgICAgICAgICAgIF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXSA9IG9ic2VydmVyOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vcmVnaXN0ZXIgaHlwZXJ0eSBzdWJzY3JpcHRpb24KICAgICAgICAgICAgICAgIG9ic2VydmVyLmFkZFN1YnNjcmlwdGlvbihoeXBlcnR5VVJMKTsKCiAgICAgICAgICAgICAgICAvL2ZvcndhcmQgdG8gaHlwZXJ0eToKICAgICAgICAgICAgICAgIHJlcGx5LmlkID0gbXNnLmlkOwogICAgICAgICAgICAgICAgcmVwbHkuZnJvbSA9IF90aGlzLl91cmw7CiAgICAgICAgICAgICAgICByZXBseS50byA9IGh5cGVydHlVUkw7CiAgICAgICAgICAgICAgICBfdGhpczIuX2J1cy5wb3N0TWVzc2FnZShyZXBseSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vbGlzdGVuZXIgcmVqZWN0ZWQKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogaHlwZXJ0eVVSTCwKICAgICAgICAgICAgICBib2R5OiByZXBseS5ib2R5CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBsb2NhbCBEYXRhT2JqZWN0T2JzZXJ2ZXIgLT4gdW5zdWJzY3JpYmUKCiAgfSwgewogICAga2V5OiAnX29uTG9jYWxVblN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTG9jYWxVblN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBoeXBlcnR5VVJMID0gbXNnLmZyb207CiAgICAgIHZhciBvYmpVUkwgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIHZhciBvYnNlcnZlciA9IF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXTsKICAgICAgaWYgKG9ic2VydmVyKSB7CiAgICAgICAgLy9UT0RPOiBpcyB0aGVyZSBhbnkgcG9saWN5IHZlcmlmaWNhdGlvbiBiZWZvcmUgZGVsZXRlPwogICAgICAgIG9ic2VydmVyLnJlbW92ZVN1YnNjcmlwdGlvbihoeXBlcnR5VVJMKTsKCiAgICAgICAgLy9UT0RPOiBkZXN0cm95IG9iamVjdCBpbiB0aGUgcmVnaXN0cnk/CiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwIH0KICAgICAgICB9KTsKCiAgICAgICAgLy9UT0RPOiByZW1vdmUgT2JqZWN0IGlmIG5vIG1vcmUgc3Vic2NyaXB0aW9uPwogICAgICAgIC8vZGVsZXRlIF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3VybCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN5bmNoZXJNYW5hZ2VyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBTeW5jaGVyTWFuYWdlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi4vdXRpbHMvdHY0Ijo3NTgsIi4uL3V0aWxzL3V0aWxzIjo3NTksIi4vT2JqZWN0QWxsb2NhdGlvbiI6NzUyLCIuL09ic2VydmVyT2JqZWN0Ijo3NTMsIi4vUmVwb3J0ZXJPYmplY3QiOjc1NCwiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IjoyOTksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI6MzExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MiOjMxMiwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9NZXNzYWdlRmFjdG9yeSI6NzI4fV0sNzU3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2siKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gcmVxdWlyZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIik7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCi8qKgogKiBFdmVudEVtaXR0ZXIKICogQWxsIGNsYXNzZXMgd2hpY2ggZXh0ZW5kcyB0aGlzLCBjYW4gaGF2ZSBhZGRFdmVudExpc3RlbmVyIGFuZCB0cmlnZ2VyIGV2ZW50czsKICovCgp2YXIgRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShFdmVudEVtaXR0ZXIsIFt7CiAgICBrZXk6ICJhZGRFdmVudExpc3RlbmVyIiwKCgogICAgLyoqCiAgICAgKiBhZGRFdmVudExpc3RlbmVyIGxpc3RlbiBmb3IgYW4gZXZlbnRUeXBlCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgZXZlbnRUeXBlIC0gbGlzdGVuaW5nIGZvciB0aGlzIHR5cGUgb2YgZXZlbnQKICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgICBjYiAgICAgICAgLSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGV2ZW50IGl0IGlzIGludm9rZWQKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpc1tldmVudFR5cGVdID0gY2I7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnZva2UgdGhlIGV2ZW50VHlwZQogICAgICogQHBhcmFtICB7c3RyaW5nfSBldmVudFR5cGUgLSBldmVudCB3aWxsIGJlIGludm9rZWQKICAgICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zIC0gcGFyYW1ldGVycyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYWRkRXZlbnRMaXN0ZW5lcgogICAgICovCgogIH0sIHsKICAgIGtleTogInRyaWdnZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnRUeXBlLCBwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpc1tldmVudFR5cGVdKSB7CiAgICAgICAgX3RoaXNbZXZlbnRUeXBlXShwYXJhbXMpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBFdmVudEVtaXR0ZXI7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEV2ZW50RW1pdHRlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjozMTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI6MzEyfV0sNzU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeScpOwoKdmFyIF9zdHJpbmdpZnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RyaW5naWZ5KTsKCnZhciBfZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eScpOwoKdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eSk7Cgp2YXIgX2lzRnJvemVuID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9pcy1mcm96ZW4nKTsKCnZhciBfaXNGcm96ZW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNGcm96ZW4pOwoKdmFyIF9jcmVhdGUgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2NyZWF0ZScpOwoKdmFyIF9jcmVhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlKTsKCnZhciBfdHlwZW9mMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy90eXBlb2YnKTsKCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKdmFyIF9rZXlzID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzJyk7Cgp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoKIEF1dGhvcjogR2VyYWludCBMdWZmIGFuZCBvdGhlcnMKIFllYXI6IDIwMTMKCiBUaGlzIGNvZGUgaXMgcmVsZWFzZWQgaW50byB0aGUgInB1YmxpYyBkb21haW4iIGJ5IGl0cyBhdXRob3IocykuICBBbnlib2R5IG1heSB1c2UsIGFsdGVyIGFuZCBkaXN0cmlidXRlIHRoZSBjb2RlIHdpdGhvdXQgcmVzdHJpY3Rpb24uICBUaGUgYXV0aG9yIG1ha2VzIG5vIGd1YXJhbnRlZXMsIGFuZCB0YWtlcyBubyBsaWFiaWxpdHkgb2YgYW55IGtpbmQgZm9yIHVzZSBvZiB0aGlzIGNvZGUuCgogSWYgeW91IGZpbmQgYSBidWcgb3IgbWFrZSBhbiBpbXByb3ZlbWVudCwgaXQgd291bGQgYmUgY291cnRlb3VzIHRvIGxldCB0aGUgYXV0aG9yIGtub3csIGJ1dCBpdCBpcyBub3QgY29tcHVsc29yeS4KICovCi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9rZXlzP3JlZGlyZWN0bG9jYWxlPWVuLVVTJnJlZGlyZWN0c2x1Zz1KYXZhU2NyaXB0JTJGUmVmZXJlbmNlJTJGR2xvYmFsX09iamVjdHMlMkZPYmplY3QlMkZrZXlzCmlmICghX2tleXMyLmRlZmF1bHQpIHsKICAgIE9iamVjdC5rZXlzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksCiAgICAgICAgICAgIGhhc0RvbnRFbnVtQnVnID0gIXsgdG9TdHJpbmc6IG51bGwgfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKSwKICAgICAgICAgICAgZG9udEVudW1zID0gWyd0b1N0cmluZycsICd0b0xvY2FsZVN0cmluZycsICd2YWx1ZU9mJywgJ2hhc093blByb3BlcnR5JywgJ2lzUHJvdG90eXBlT2YnLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAnY29uc3RydWN0b3InXSwKICAgICAgICAgICAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgICAgaWYgKCh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKG9iaikpICE9PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nIHx8IG9iaiA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmtleXMgY2FsbGVkIG9uIG5vbi1vYmplY3QnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOwoKICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHsKICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGhhc0RvbnRFbnVtQnVnKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvbnRFbnVtc0xlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBkb250RW51bXNbaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRvbnRFbnVtc1tpXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfTsKICAgIH0oKTsKfQovLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvY3JlYXRlCmlmICghX2NyZWF0ZTIuZGVmYXVsdCkgewogICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBGKCkge30KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAxKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09iamVjdC5jcmVhdGUgaW1wbGVtZW50YXRpb24gb25seSBhY2NlcHRzIG9uZSBwYXJhbWV0ZXIuJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRi5wcm90b3R5cGUgPSBvOwogICAgICAgICAgICByZXR1cm4gbmV3IEYoKTsKICAgICAgICB9OwogICAgfSgpOwp9Ci8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2lzQXJyYXk/cmVkaXJlY3Rsb2NhbGU9ZW4tVVMmcmVkaXJlY3RzbHVnPUphdmFTY3JpcHQlMkZSZWZlcmVuY2UlMkZHbG9iYWxfT2JqZWN0cyUyRkFycmF5JTJGaXNBcnJheQppZiAoIUFycmF5LmlzQXJyYXkpIHsKICAgIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbiAodkFyZykgewogICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodkFyZykgPT09ICJbb2JqZWN0IEFycmF5XSI7CiAgICB9Owp9Ci8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2luZGV4T2Y/cmVkaXJlY3Rsb2NhbGU9ZW4tVVMmcmVkaXJlY3RzbHVnPUphdmFTY3JpcHQlMkZSZWZlcmVuY2UlMkZHbG9iYWxfT2JqZWN0cyUyRkFycmF5JTJGaW5kZXhPZgppZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7CiAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChzZWFyY2hFbGVtZW50IC8qLCBmcm9tSW5kZXggKi8pIHsKICAgICAgICBpZiAodGhpcyA9PT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CiAgICAgICAgfQogICAgICAgIHZhciB0ID0gT2JqZWN0KHRoaXMpOwogICAgICAgIHZhciBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDsKCiAgICAgICAgaWYgKGxlbiA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQogICAgICAgIHZhciBuID0gMDsKICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgbiA9IE51bWJlcihhcmd1bWVudHNbMV0pOwogICAgICAgICAgICBpZiAobiAhPT0gbikgewogICAgICAgICAgICAgICAgLy8gc2hvcnRjdXQgZm9yIHZlcmlmeWluZyBpZiBpdCdzIE5hTgogICAgICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAhPT0gMCAmJiBuICE9PSBJbmZpbml0eSAmJiBuICE9PSAtSW5maW5pdHkpIHsKICAgICAgICAgICAgICAgIG4gPSAobiA+IDAgfHwgLTEpICogTWF0aC5mbG9vcihNYXRoLmFicyhuKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKG4gPj0gbGVuKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICAgICAgdmFyIGsgPSBuID49IDAgPyBuIDogTWF0aC5tYXgobGVuIC0gTWF0aC5hYnMobiksIDApOwogICAgICAgIGZvciAoOyBrIDwgbGVuOyBrKyspIHsKICAgICAgICAgICAgaWYgKGsgaW4gdCAmJiB0W2tdID09PSBzZWFyY2hFbGVtZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gLTE7CiAgICB9Owp9CgovLyBHcnVuZ2V5IE9iamVjdC5pc0Zyb3plbiBoYWNrCmlmICghX2lzRnJvemVuMi5kZWZhdWx0KSB7CiAgICBPYmplY3QuaXNGcm96ZW4gPSBmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgdmFyIGtleSA9ICJ0djRfdGVzdF9mcm96ZW5fa2V5IjsKICAgICAgICB3aGlsZSAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAga2V5ICs9IE1hdGgucmFuZG9tKCk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG9ialtrZXldID0gdHJ1ZTsKICAgICAgICAgICAgZGVsZXRlIG9ialtrZXldOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9Owp9Ci8vIEJhc2VkIG9uOiBodHRwczovL2dpdGh1Yi5jb20vZ2VyYWludGx1ZmYvdXJpLXRlbXBsYXRlcywgYnV0IHdpdGggYWxsIHRoZSBkZS1zdWJzdGl0dXRpb24gc3R1ZmYgcmVtb3ZlZAoKdmFyIHVyaVRlbXBsYXRlR2xvYmFsTW9kaWZpZXJzID0gewogICAgIisiOiB0cnVlLAogICAgIiMiOiB0cnVlLAogICAgIi4iOiB0cnVlLAogICAgIi8iOiB0cnVlLAogICAgIjsiOiB0cnVlLAogICAgIj8iOiB0cnVlLAogICAgIiYiOiB0cnVlCn07CnZhciB1cmlUZW1wbGF0ZVN1ZmZpY2VzID0gewogICAgIioiOiB0cnVlCn07CgpmdW5jdGlvbiBub3RSZWFsbHlQZXJjZW50RW5jb2RlKHN0cmluZykgewogICAgcmV0dXJuIGVuY29kZVVSSShzdHJpbmcpLnJlcGxhY2UoLyUyNVswLTldWzAtOV0vZywgZnVuY3Rpb24gKGRvdWJsZUVuY29kZWQpIHsKICAgICAgICByZXR1cm4gIiUiICsgZG91YmxlRW5jb2RlZC5zdWJzdHJpbmcoMyk7CiAgICB9KTsKfQoKZnVuY3Rpb24gdXJpVGVtcGxhdGVTdWJzdGl0dXRpb24oc3BlYykgewogICAgdmFyIG1vZGlmaWVyID0gIiI7CiAgICBpZiAodXJpVGVtcGxhdGVHbG9iYWxNb2RpZmllcnNbc3BlYy5jaGFyQXQoMCldKSB7CiAgICAgICAgbW9kaWZpZXIgPSBzcGVjLmNoYXJBdCgwKTsKICAgICAgICBzcGVjID0gc3BlYy5zdWJzdHJpbmcoMSk7CiAgICB9CiAgICB2YXIgc2VwYXJhdG9yID0gIiI7CiAgICB2YXIgcHJlZml4ID0gIiI7CiAgICB2YXIgc2hvdWxkRXNjYXBlID0gdHJ1ZTsKICAgIHZhciBzaG93VmFyaWFibGVzID0gZmFsc2U7CiAgICB2YXIgdHJpbUVtcHR5U3RyaW5nID0gZmFsc2U7CiAgICBpZiAobW9kaWZpZXIgPT09ICcrJykgewogICAgICAgIHNob3VsZEVzY2FwZSA9IGZhbHNlOwogICAgfSBlbHNlIGlmIChtb2RpZmllciA9PT0gIi4iKSB7CiAgICAgICAgcHJlZml4ID0gIi4iOwogICAgICAgIHNlcGFyYXRvciA9ICIuIjsKICAgIH0gZWxzZSBpZiAobW9kaWZpZXIgPT09ICIvIikgewogICAgICAgIHByZWZpeCA9ICIvIjsKICAgICAgICBzZXBhcmF0b3IgPSAiLyI7CiAgICB9IGVsc2UgaWYgKG1vZGlmaWVyID09PSAnIycpIHsKICAgICAgICBwcmVmaXggPSAiIyI7CiAgICAgICAgc2hvdWxkRXNjYXBlID0gZmFsc2U7CiAgICB9IGVsc2UgaWYgKG1vZGlmaWVyID09PSAnOycpIHsKICAgICAgICBwcmVmaXggPSAiOyI7CiAgICAgICAgc2VwYXJhdG9yID0gIjsiOwogICAgICAgIHNob3dWYXJpYWJsZXMgPSB0cnVlOwogICAgICAgIHRyaW1FbXB0eVN0cmluZyA9IHRydWU7CiAgICB9IGVsc2UgaWYgKG1vZGlmaWVyID09PSAnPycpIHsKICAgICAgICBwcmVmaXggPSAiPyI7CiAgICAgICAgc2VwYXJhdG9yID0gIiYiOwogICAgICAgIHNob3dWYXJpYWJsZXMgPSB0cnVlOwogICAgfSBlbHNlIGlmIChtb2RpZmllciA9PT0gJyYnKSB7CiAgICAgICAgcHJlZml4ID0gIiYiOwogICAgICAgIHNlcGFyYXRvciA9ICImIjsKICAgICAgICBzaG93VmFyaWFibGVzID0gdHJ1ZTsKICAgIH0KCiAgICB2YXIgdmFyTmFtZXMgPSBbXTsKICAgIHZhciB2YXJMaXN0ID0gc3BlYy5zcGxpdCgiLCIpOwogICAgdmFyIHZhclNwZWNzID0gW107CiAgICB2YXIgdmFyU3BlY01hcCA9IHt9OwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHZhck5hbWUgPSB2YXJMaXN0W2ldOwogICAgICAgIHZhciB0cnVuY2F0ZSA9IG51bGw7CiAgICAgICAgaWYgKHZhck5hbWUuaW5kZXhPZigiOiIpICE9PSAtMSkgewogICAgICAgICAgICB2YXIgcGFydHMgPSB2YXJOYW1lLnNwbGl0KCI6Iik7CiAgICAgICAgICAgIHZhck5hbWUgPSBwYXJ0c1swXTsKICAgICAgICAgICAgdHJ1bmNhdGUgPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOwogICAgICAgIH0KICAgICAgICB2YXIgc3VmZmljZXMgPSB7fTsKICAgICAgICB3aGlsZSAodXJpVGVtcGxhdGVTdWZmaWNlc1t2YXJOYW1lLmNoYXJBdCh2YXJOYW1lLmxlbmd0aCAtIDEpXSkgewogICAgICAgICAgICBzdWZmaWNlc1t2YXJOYW1lLmNoYXJBdCh2YXJOYW1lLmxlbmd0aCAtIDEpXSA9IHRydWU7CiAgICAgICAgICAgIHZhck5hbWUgPSB2YXJOYW1lLnN1YnN0cmluZygwLCB2YXJOYW1lLmxlbmd0aCAtIDEpOwogICAgICAgIH0KICAgICAgICB2YXIgdmFyU3BlYyA9IHsKICAgICAgICAgICAgdHJ1bmNhdGU6IHRydW5jYXRlLAogICAgICAgICAgICBuYW1lOiB2YXJOYW1lLAogICAgICAgICAgICBzdWZmaWNlczogc3VmZmljZXMKICAgICAgICB9OwogICAgICAgIHZhclNwZWNzLnB1c2godmFyU3BlYyk7CiAgICAgICAgdmFyU3BlY01hcFt2YXJOYW1lXSA9IHZhclNwZWM7CiAgICAgICAgdmFyTmFtZXMucHVzaCh2YXJOYW1lKTsKICAgIH0KICAgIHZhciBzdWJGdW5jdGlvbiA9IGZ1bmN0aW9uIHN1YkZ1bmN0aW9uKHZhbHVlRnVuY3Rpb24pIHsKICAgICAgICB2YXIgcmVzdWx0ID0gIiI7CiAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSAwOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFyU3BlY3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHZhclNwZWMgPSB2YXJTcGVjc1tpXTsKICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVGdW5jdGlvbih2YXJTcGVjLm5hbWUpOwogICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDAgfHwgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KSh2YWx1ZSkpID09PSAnb2JqZWN0JyAmJiAoMCwgX2tleXMyLmRlZmF1bHQpKHZhbHVlKS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXgrKzsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpID09PSBzdGFydEluZGV4KSB7CiAgICAgICAgICAgICAgICByZXN1bHQgKz0gcHJlZml4OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzdWx0ICs9IHNlcGFyYXRvciB8fCAiLCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICAgICAgICAgICAgICBpZiAoc2hvd1ZhcmlhYmxlcykgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB2YXJTcGVjLm5hbWUgKyAiPSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbHVlLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB2YXJTcGVjLnN1ZmZpY2VzWycqJ10gPyBzZXBhcmF0b3IgfHwgIiwiIDogIiwiOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFyU3BlYy5zdWZmaWNlc1snKiddICYmIHNob3dWYXJpYWJsZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB2YXJTcGVjLm5hbWUgKyAiPSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHNob3VsZEVzY2FwZSA/IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZVtqXSkucmVwbGFjZSgvIS9nLCAiJTIxIikgOiBub3RSZWFsbHlQZXJjZW50RW5jb2RlKHZhbHVlW2pdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICgodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKHZhbHVlKSkgPT09ICJvYmplY3QiKSB7CiAgICAgICAgICAgICAgICBpZiAoc2hvd1ZhcmlhYmxlcyAmJiAhdmFyU3BlYy5zdWZmaWNlc1snKiddKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHZhclNwZWMubmFtZSArICI9IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB2YXJTcGVjLnN1ZmZpY2VzWycqJ10gPyBzZXBhcmF0b3IgfHwgIiwiIDogIiwiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzaG91bGRFc2NhcGUgPyBlbmNvZGVVUklDb21wb25lbnQoa2V5KS5yZXBsYWNlKC8hL2csICIlMjEiKSA6IG5vdFJlYWxseVBlcmNlbnRFbmNvZGUoa2V5KTsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdmFyU3BlYy5zdWZmaWNlc1snKiddID8gJz0nIDogIiwiOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzaG91bGRFc2NhcGUgPyBlbmNvZGVVUklDb21wb25lbnQodmFsdWVba2V5XSkucmVwbGFjZSgvIS9nLCAiJTIxIikgOiBub3RSZWFsbHlQZXJjZW50RW5jb2RlKHZhbHVlW2tleV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHNob3dWYXJpYWJsZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdmFyU3BlYy5uYW1lOwogICAgICAgICAgICAgICAgICAgIGlmICghdHJpbUVtcHR5U3RyaW5nIHx8IHZhbHVlICE9PSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gIj0iOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh2YXJTcGVjLnRydW5jYXRlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygwLCB2YXJTcGVjLnRydW5jYXRlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzaG91bGRFc2NhcGUgPyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpLnJlcGxhY2UoLyEvZywgIiUyMSIpIDogbm90UmVhbGx5UGVyY2VudEVuY29kZSh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CiAgICBzdWJGdW5jdGlvbi52YXJOYW1lcyA9IHZhck5hbWVzOwogICAgcmV0dXJuIHsKICAgICAgICBwcmVmaXg6IHByZWZpeCwKICAgICAgICBzdWJzdGl0dXRpb246IHN1YkZ1bmN0aW9uCiAgICB9Owp9CgpmdW5jdGlvbiBVcmlUZW1wbGF0ZSh0ZW1wbGF0ZSkgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVyaVRlbXBsYXRlKSkgewogICAgICAgIHJldHVybiBuZXcgVXJpVGVtcGxhdGUodGVtcGxhdGUpOwogICAgfQogICAgdmFyIHBhcnRzID0gdGVtcGxhdGUuc3BsaXQoInsiKTsKICAgIHZhciB0ZXh0UGFydHMgPSBbcGFydHMuc2hpZnQoKV07CiAgICB2YXIgcHJlZml4ZXMgPSBbXTsKICAgIHZhciBzdWJzdGl0dXRpb25zID0gW107CiAgICB2YXIgdmFyTmFtZXMgPSBbXTsKICAgIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIHBhcnQgPSBwYXJ0cy5zaGlmdCgpOwogICAgICAgIHZhciBzcGVjID0gcGFydC5zcGxpdCgifSIpWzBdOwogICAgICAgIHZhciByZW1haW5kZXIgPSBwYXJ0LnN1YnN0cmluZyhzcGVjLmxlbmd0aCArIDEpOwogICAgICAgIHZhciBmdW5jcyA9IHVyaVRlbXBsYXRlU3Vic3RpdHV0aW9uKHNwZWMpOwogICAgICAgIHN1YnN0aXR1dGlvbnMucHVzaChmdW5jcy5zdWJzdGl0dXRpb24pOwogICAgICAgIHByZWZpeGVzLnB1c2goZnVuY3MucHJlZml4KTsKICAgICAgICB0ZXh0UGFydHMucHVzaChyZW1haW5kZXIpOwogICAgICAgIHZhck5hbWVzID0gdmFyTmFtZXMuY29uY2F0KGZ1bmNzLnN1YnN0aXR1dGlvbi52YXJOYW1lcyk7CiAgICB9CiAgICB0aGlzLmZpbGwgPSBmdW5jdGlvbiAodmFsdWVGdW5jdGlvbikgewogICAgICAgIHZhciByZXN1bHQgPSB0ZXh0UGFydHNbMF07CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzdGl0dXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzdWJzdGl0dXRpb24gPSBzdWJzdGl0dXRpb25zW2ldOwogICAgICAgICAgICByZXN1bHQgKz0gc3Vic3RpdHV0aW9uKHZhbHVlRnVuY3Rpb24pOwogICAgICAgICAgICByZXN1bHQgKz0gdGV4dFBhcnRzW2kgKyAxXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CiAgICB0aGlzLnZhck5hbWVzID0gdmFyTmFtZXM7CiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7Cn0KClVyaVRlbXBsYXRlLnByb3RvdHlwZSA9IHsKICAgIHRvU3RyaW5nOiBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZTsKICAgIH0sCiAgICBmaWxsRnJvbU9iamVjdDogZnVuY3Rpb24gZmlsbEZyb21PYmplY3Qob2JqKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsbChmdW5jdGlvbiAodmFyTmFtZSkgewogICAgICAgICAgICByZXR1cm4gb2JqW3Zhck5hbWVdOwogICAgICAgIH0pOwogICAgfQp9Owp2YXIgVmFsaWRhdG9yQ29udGV4dCA9IGZ1bmN0aW9uIFZhbGlkYXRvckNvbnRleHQocGFyZW50LCBjb2xsZWN0TXVsdGlwbGUsIGVycm9yUmVwb3J0ZXIsIGNoZWNrUmVjdXJzaXZlLCB0cmFja1Vua25vd25Qcm9wZXJ0aWVzKSB7CiAgICB0aGlzLm1pc3NpbmcgPSBbXTsKICAgIHRoaXMubWlzc2luZ01hcCA9IHt9OwogICAgdGhpcy5mb3JtYXRWYWxpZGF0b3JzID0gcGFyZW50ID8gKDAsIF9jcmVhdGUyLmRlZmF1bHQpKHBhcmVudC5mb3JtYXRWYWxpZGF0b3JzKSA6IHt9OwogICAgdGhpcy5zY2hlbWFzID0gcGFyZW50ID8gKDAsIF9jcmVhdGUyLmRlZmF1bHQpKHBhcmVudC5zY2hlbWFzKSA6IHt9OwogICAgdGhpcy5jb2xsZWN0TXVsdGlwbGUgPSBjb2xsZWN0TXVsdGlwbGU7CiAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgdGhpcy5oYW5kbGVFcnJvciA9IGNvbGxlY3RNdWx0aXBsZSA/IHRoaXMuY29sbGVjdEVycm9yIDogdGhpcy5yZXR1cm5FcnJvcjsKICAgIGlmIChjaGVja1JlY3Vyc2l2ZSkgewogICAgICAgIHRoaXMuY2hlY2tSZWN1cnNpdmUgPSB0cnVlOwogICAgICAgIHRoaXMuc2Nhbm5lZCA9IFtdOwogICAgICAgIHRoaXMuc2Nhbm5lZEZyb3plbiA9IFtdOwogICAgICAgIHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXMgPSBbXTsKICAgICAgICB0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzID0gW107CiAgICAgICAgdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5ID0gJ3R2NF92YWxpZGF0aW9uX2lkJzsKICAgICAgICB0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXkgPSAndHY0X3ZhbGlkYXRpb25fZXJyb3JzX2lkJzsKICAgIH0KICAgIGlmICh0cmFja1Vua25vd25Qcm9wZXJ0aWVzKSB7CiAgICAgICAgdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzID0gdHJ1ZTsKICAgICAgICB0aGlzLmtub3duUHJvcGVydHlQYXRocyA9IHt9OwogICAgICAgIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMgPSB7fTsKICAgIH0KICAgIHRoaXMuZXJyb3JSZXBvcnRlciA9IGVycm9yUmVwb3J0ZXIgfHwgZGVmYXVsdEVycm9yUmVwb3J0ZXIoJ2VuJyk7CiAgICBpZiAodHlwZW9mIHRoaXMuZXJyb3JSZXBvcnRlciA9PT0gJ3N0cmluZycpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlYnVnJyk7CiAgICB9CiAgICB0aGlzLmRlZmluZWRLZXl3b3JkcyA9IHt9OwogICAgaWYgKHBhcmVudCkgewogICAgICAgIGZvciAodmFyIGtleSBpbiBwYXJlbnQuZGVmaW5lZEtleXdvcmRzKSB7CiAgICAgICAgICAgIHRoaXMuZGVmaW5lZEtleXdvcmRzW2tleV0gPSBwYXJlbnQuZGVmaW5lZEtleXdvcmRzW2tleV0uc2xpY2UoMCk7CiAgICAgICAgfQogICAgfQp9OwpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5kZWZpbmVLZXl3b3JkID0gZnVuY3Rpb24gKGtleXdvcmQsIGtleXdvcmRGdW5jdGlvbikgewogICAgdGhpcy5kZWZpbmVkS2V5d29yZHNba2V5d29yZF0gPSB0aGlzLmRlZmluZWRLZXl3b3Jkc1trZXl3b3JkXSB8fCBbXTsKICAgIHRoaXMuZGVmaW5lZEtleXdvcmRzW2tleXdvcmRdLnB1c2goa2V5d29yZEZ1bmN0aW9uKTsKfTsKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlRXJyb3IgPSBmdW5jdGlvbiAoY29kZSwgbWVzc2FnZVBhcmFtcywgZGF0YVBhdGgsIHNjaGVtYVBhdGgsIHN1YkVycm9ycywgZGF0YSwgc2NoZW1hKSB7CiAgICB2YXIgZXJyb3IgPSBuZXcgVmFsaWRhdGlvbkVycm9yKGNvZGUsIG1lc3NhZ2VQYXJhbXMsIGRhdGFQYXRoLCBzY2hlbWFQYXRoLCBzdWJFcnJvcnMpOwogICAgZXJyb3IubWVzc2FnZSA9IHRoaXMuZXJyb3JSZXBvcnRlcihlcnJvciwgZGF0YSwgc2NoZW1hKTsKICAgIHJldHVybiBlcnJvcjsKfTsKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUucmV0dXJuRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHsKICAgIHJldHVybiBlcnJvcjsKfTsKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuY29sbGVjdEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICBpZiAoZXJyb3IpIHsKICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGVycm9yKTsKICAgIH0KICAgIHJldHVybiBudWxsOwp9OwpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5wcmVmaXhFcnJvcnMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgZGF0YVBhdGgsIHNjaGVtYVBhdGgpIHsKICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdGhpcy5lcnJvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmVycm9yc1tpXSA9IHRoaXMuZXJyb3JzW2ldLnByZWZpeFdpdGgoZGF0YVBhdGgsIHNjaGVtYVBhdGgpOwogICAgfQogICAgcmV0dXJuIHRoaXM7Cn07ClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLmJhblVua25vd25Qcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGRhdGEsIHNjaGVtYSkgewogICAgZm9yICh2YXIgdW5rbm93blBhdGggaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocykgewogICAgICAgIHZhciBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5VTktOT1dOX1BST1BFUlRZLCB7IHBhdGg6IHVua25vd25QYXRoIH0sIHVua25vd25QYXRoLCAiIiwgbnVsbCwgZGF0YSwgc2NoZW1hKTsKICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7CiAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuYWRkRm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdCwgdmFsaWRhdG9yKSB7CiAgICBpZiAoKHR5cGVvZiBmb3JtYXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoZm9ybWF0KSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgZm9yICh2YXIga2V5IGluIGZvcm1hdCkgewogICAgICAgICAgICB0aGlzLmFkZEZvcm1hdChrZXksIGZvcm1hdFtrZXldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICB0aGlzLmZvcm1hdFZhbGlkYXRvcnNbZm9ybWF0XSA9IHZhbGlkYXRvcjsKfTsKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUucmVzb2x2ZVJlZnMgPSBmdW5jdGlvbiAoc2NoZW1hLCB1cmxIaXN0b3J5KSB7CiAgICBpZiAoc2NoZW1hWyckcmVmJ10gIT09IHVuZGVmaW5lZCkgewogICAgICAgIHVybEhpc3RvcnkgPSB1cmxIaXN0b3J5IHx8IHt9OwogICAgICAgIGlmICh1cmxIaXN0b3J5W3NjaGVtYVsnJHJlZiddXSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLkNJUkNVTEFSX1JFRkVSRU5DRSwgeyB1cmxzOiAoMCwgX2tleXMyLmRlZmF1bHQpKHVybEhpc3RvcnkpLmpvaW4oJywgJykgfSwgJycsICcnLCBudWxsLCB1bmRlZmluZWQsIHNjaGVtYSk7CiAgICAgICAgfQogICAgICAgIHVybEhpc3Rvcnlbc2NoZW1hWyckcmVmJ11dID0gdHJ1ZTsKICAgICAgICBzY2hlbWEgPSB0aGlzLmdldFNjaGVtYShzY2hlbWFbJyRyZWYnXSwgdXJsSGlzdG9yeSk7CiAgICB9CiAgICByZXR1cm4gc2NoZW1hOwp9OwpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5nZXRTY2hlbWEgPSBmdW5jdGlvbiAodXJsLCB1cmxIaXN0b3J5KSB7CiAgICB2YXIgc2NoZW1hOwogICAgaWYgKHRoaXMuc2NoZW1hc1t1cmxdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBzY2hlbWEgPSB0aGlzLnNjaGVtYXNbdXJsXTsKICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlUmVmcyhzY2hlbWEsIHVybEhpc3RvcnkpOwogICAgfQogICAgdmFyIGJhc2VVcmwgPSB1cmw7CiAgICB2YXIgZnJhZ21lbnQgPSAiIjsKICAgIGlmICh1cmwuaW5kZXhPZignIycpICE9PSAtMSkgewogICAgICAgIGZyYWdtZW50ID0gdXJsLnN1YnN0cmluZyh1cmwuaW5kZXhPZigiIyIpICsgMSk7CiAgICAgICAgYmFzZVVybCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmluZGV4T2YoIiMiKSk7CiAgICB9CiAgICBpZiAoKDAsIF90eXBlb2YzLmRlZmF1bHQpKHRoaXMuc2NoZW1hc1tiYXNlVXJsXSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgc2NoZW1hID0gdGhpcy5zY2hlbWFzW2Jhc2VVcmxdOwogICAgICAgIHZhciBwb2ludGVyUGF0aCA9IGRlY29kZVVSSUNvbXBvbmVudChmcmFnbWVudCk7CiAgICAgICAgaWYgKHBvaW50ZXJQYXRoID09PSAiIikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlUmVmcyhzY2hlbWEsIHVybEhpc3RvcnkpOwogICAgICAgIH0gZWxzZSBpZiAocG9pbnRlclBhdGguY2hhckF0KDApICE9PSAiLyIpIHsKICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgdmFyIHBhcnRzID0gcG9pbnRlclBhdGguc3BsaXQoIi8iKS5zbGljZSgxKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBwYXJ0c1tpXS5yZXBsYWNlKC9+MS9nLCAiLyIpLnJlcGxhY2UoL34wL2csICJ+Iik7CiAgICAgICAgICAgIGlmIChzY2hlbWFbY29tcG9uZW50XSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBzY2hlbWEgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBzY2hlbWEgPSBzY2hlbWFbY29tcG9uZW50XTsKICAgICAgICB9CiAgICAgICAgaWYgKHNjaGVtYSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVSZWZzKHNjaGVtYSwgdXJsSGlzdG9yeSk7CiAgICAgICAgfQogICAgfQogICAgaWYgKHRoaXMubWlzc2luZ1tiYXNlVXJsXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5taXNzaW5nLnB1c2goYmFzZVVybCk7CiAgICAgICAgdGhpcy5taXNzaW5nW2Jhc2VVcmxdID0gYmFzZVVybDsKICAgICAgICB0aGlzLm1pc3NpbmdNYXBbYmFzZVVybF0gPSBiYXNlVXJsOwogICAgfQp9OwpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS5zZWFyY2hTY2hlbWFzID0gZnVuY3Rpb24gKHNjaGVtYSwgdXJsKSB7CiAgICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEpKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY2hlbWEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpcy5zZWFyY2hTY2hlbWFzKHNjaGVtYVtpXSwgdXJsKTsKICAgICAgICB9CiAgICB9IGVsc2UgaWYgKHNjaGVtYSAmJiAodHlwZW9mIHNjaGVtYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShzY2hlbWEpKSA9PT0gIm9iamVjdCIpIHsKICAgICAgICBpZiAodHlwZW9mIHNjaGVtYS5pZCA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgaWYgKGlzVHJ1c3RlZFVybCh1cmwsIHNjaGVtYS5pZCkpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjaGVtYXNbc2NoZW1hLmlkXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlbWFzW3NjaGVtYS5pZF0gPSBzY2hlbWE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIga2V5IGluIHNjaGVtYSkgewogICAgICAgICAgICBpZiAoa2V5ICE9PSAiZW51bSIpIHsKICAgICAgICAgICAgICAgIGlmICgoMCwgX3R5cGVvZjMuZGVmYXVsdCkoc2NoZW1hW2tleV0pID09PSAib2JqZWN0IikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoU2NoZW1hcyhzY2hlbWFba2V5XSwgdXJsKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAiJHJlZiIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJpID0gZ2V0RG9jdW1lbnRVcmkoc2NoZW1hW2tleV0pOwogICAgICAgICAgICAgICAgICAgIGlmICh1cmkgJiYgdGhpcy5zY2hlbWFzW3VyaV0gPT09IHVuZGVmaW5lZCAmJiB0aGlzLm1pc3NpbmdNYXBbdXJpXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWlzc2luZ01hcFt1cmldID0gdXJpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfTsKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuYWRkU2NoZW1hID0gZnVuY3Rpb24gKHVybCwgc2NoZW1hKSB7CiAgICAvL292ZXJsb2FkCiAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIHNjaGVtYSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBpZiAoKHR5cGVvZiB1cmwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkodXJsKSkgPT09ICdvYmplY3QnICYmIHR5cGVvZiB1cmwuaWQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHNjaGVtYSA9IHVybDsKICAgICAgICAgICAgdXJsID0gc2NoZW1hLmlkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICB9CiAgICBpZiAodXJsID09PSBnZXREb2N1bWVudFVyaSh1cmwpICsgIiMiKSB7CiAgICAgICAgLy8gUmVtb3ZlIGVtcHR5IGZyYWdtZW50CiAgICAgICAgdXJsID0gZ2V0RG9jdW1lbnRVcmkodXJsKTsKICAgIH0KICAgIHRoaXMuc2NoZW1hc1t1cmxdID0gc2NoZW1hOwogICAgZGVsZXRlIHRoaXMubWlzc2luZ01hcFt1cmxdOwogICAgbm9ybVNjaGVtYShzY2hlbWEsIHVybCk7CiAgICB0aGlzLnNlYXJjaFNjaGVtYXMoc2NoZW1hLCB1cmwpOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuZ2V0U2NoZW1hTWFwID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG1hcCA9IHt9OwogICAgZm9yICh2YXIga2V5IGluIHRoaXMuc2NoZW1hcykgewogICAgICAgIG1hcFtrZXldID0gdGhpcy5zY2hlbWFzW2tleV07CiAgICB9CiAgICByZXR1cm4gbWFwOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuZ2V0U2NoZW1hVXJpcyA9IGZ1bmN0aW9uIChmaWx0ZXJSZWdFeHApIHsKICAgIHZhciBsaXN0ID0gW107CiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5zY2hlbWFzKSB7CiAgICAgICAgaWYgKCFmaWx0ZXJSZWdFeHAgfHwgZmlsdGVyUmVnRXhwLnRlc3Qoa2V5KSkgewogICAgICAgICAgICBsaXN0LnB1c2goa2V5KTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gbGlzdDsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLmdldE1pc3NpbmdVcmlzID0gZnVuY3Rpb24gKGZpbHRlclJlZ0V4cCkgewogICAgdmFyIGxpc3QgPSBbXTsKICAgIGZvciAodmFyIGtleSBpbiB0aGlzLm1pc3NpbmdNYXApIHsKICAgICAgICBpZiAoIWZpbHRlclJlZ0V4cCB8fCBmaWx0ZXJSZWdFeHAudGVzdChrZXkpKSB7CiAgICAgICAgICAgIGxpc3QucHVzaChrZXkpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBsaXN0Owp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUuZHJvcFNjaGVtYXMgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNjaGVtYXMgPSB7fTsKICAgIHRoaXMucmVzZXQoKTsKfTsKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLm1pc3NpbmcgPSBbXTsKICAgIHRoaXMubWlzc2luZ01hcCA9IHt9OwogICAgdGhpcy5lcnJvcnMgPSBbXTsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlQWxsID0gZnVuY3Rpb24gKGRhdGEsIHNjaGVtYSwgZGF0YVBhdGhQYXJ0cywgc2NoZW1hUGF0aFBhcnRzLCBkYXRhUG9pbnRlclBhdGgpIHsKICAgIHZhciB0b3BMZXZlbDsKICAgIHNjaGVtYSA9IHRoaXMucmVzb2x2ZVJlZnMoc2NoZW1hKTsKICAgIGlmICghc2NoZW1hKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9IGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikgewogICAgICAgIHRoaXMuZXJyb3JzLnB1c2goc2NoZW1hKTsKICAgICAgICByZXR1cm4gc2NoZW1hOwogICAgfQoKICAgIHZhciBzdGFydEVycm9yQ291bnQgPSB0aGlzLmVycm9ycy5sZW5ndGg7CiAgICB2YXIgZnJvemVuSW5kZXgsCiAgICAgICAgc2Nhbm5lZEZyb3plblNjaGVtYUluZGV4ID0gbnVsbCwKICAgICAgICBzY2FubmVkU2NoZW1hc0luZGV4ID0gbnVsbDsKICAgIGlmICh0aGlzLmNoZWNrUmVjdXJzaXZlICYmIGRhdGEgJiYgKHR5cGVvZiBkYXRhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKGRhdGEpKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICB0b3BMZXZlbCA9ICF0aGlzLnNjYW5uZWQubGVuZ3RoOwogICAgICAgIGlmIChkYXRhW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pIHsKICAgICAgICAgICAgdmFyIHNjaGVtYUluZGV4ID0gZGF0YVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmluZGV4T2Yoc2NoZW1hKTsKICAgICAgICAgICAgaWYgKHNjaGVtYUluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSB0aGlzLmVycm9ycy5jb25jYXQoZGF0YVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW3NjaGVtYUluZGV4XSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoKDAsIF9pc0Zyb3plbjIuZGVmYXVsdCkoZGF0YSkpIHsKICAgICAgICAgICAgZnJvemVuSW5kZXggPSB0aGlzLnNjYW5uZWRGcm96ZW4uaW5kZXhPZihkYXRhKTsKICAgICAgICAgICAgaWYgKGZyb3plbkluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgdmFyIGZyb3plblNjaGVtYUluZGV4ID0gdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hc1tmcm96ZW5JbmRleF0uaW5kZXhPZihzY2hlbWEpOwogICAgICAgICAgICAgICAgaWYgKGZyb3plblNjaGVtYUluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzID0gdGhpcy5lcnJvcnMuY29uY2F0KHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbZnJvemVuSW5kZXhdW2Zyb3plblNjaGVtYUluZGV4XSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5zY2FubmVkLnB1c2goZGF0YSk7CiAgICAgICAgaWYgKCgwLCBfaXNGcm96ZW4yLmRlZmF1bHQpKGRhdGEpKSB7CiAgICAgICAgICAgIGlmIChmcm96ZW5JbmRleCA9PT0gLTEpIHsKICAgICAgICAgICAgICAgIGZyb3plbkluZGV4ID0gdGhpcy5zY2FubmVkRnJvemVuLmxlbmd0aDsKICAgICAgICAgICAgICAgIHRoaXMuc2Nhbm5lZEZyb3plbi5wdXNoKGRhdGEpOwogICAgICAgICAgICAgICAgdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcy5wdXNoKFtdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzY2FubmVkRnJvemVuU2NoZW1hSW5kZXggPSB0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2Zyb3plbkluZGV4XS5sZW5ndGg7CiAgICAgICAgICAgIHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbZnJvemVuSW5kZXhdW3NjYW5uZWRGcm96ZW5TY2hlbWFJbmRleF0gPSBzY2hlbWE7CiAgICAgICAgICAgIHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbZnJvemVuSW5kZXhdW3NjYW5uZWRGcm96ZW5TY2hlbWFJbmRleF0gPSBbXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIWRhdGFbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShkYXRhLCB0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXksIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShkYXRhLCB0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXksIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAvL0lFIDcvOCB3b3JrYXJvdW5kCiAgICAgICAgICAgICAgICAgICAgZGF0YVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldID0gW107CiAgICAgICAgICAgICAgICAgICAgZGF0YVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldID0gW107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2Nhbm5lZFNjaGVtYXNJbmRleCA9IGRhdGFbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XS5sZW5ndGg7CiAgICAgICAgICAgIGRhdGFbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XVtzY2FubmVkU2NoZW1hc0luZGV4XSA9IHNjaGVtYTsKICAgICAgICAgICAgZGF0YVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW3NjYW5uZWRTY2hlbWFzSW5kZXhdID0gW107CiAgICAgICAgfQogICAgfQoKICAgIHZhciBlcnJvckNvdW50ID0gdGhpcy5lcnJvcnMubGVuZ3RoOwogICAgdmFyIGVycm9yID0gdGhpcy52YWxpZGF0ZUJhc2ljKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCB0aGlzLnZhbGlkYXRlTnVtZXJpYyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZVN0cmluZyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZUFycmF5KGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCB0aGlzLnZhbGlkYXRlT2JqZWN0KGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCB0aGlzLnZhbGlkYXRlQ29tYmluYXRpb25zKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCB0aGlzLnZhbGlkYXRlSHlwZXJtZWRpYShkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZUZvcm1hdChkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZURlZmluZWRLZXl3b3JkcyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgbnVsbDsKCiAgICBpZiAodG9wTGV2ZWwpIHsKICAgICAgICB3aGlsZSAodGhpcy5zY2FubmVkLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuc2Nhbm5lZC5wb3AoKTsKICAgICAgICAgICAgZGVsZXRlIGl0ZW1bdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zY2FubmVkRnJvemVuID0gW107CiAgICAgICAgdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcyA9IFtdOwogICAgfQoKICAgIGlmIChlcnJvciB8fCBlcnJvckNvdW50ICE9PSB0aGlzLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICB3aGlsZSAoZGF0YVBhdGhQYXJ0cyAmJiBkYXRhUGF0aFBhcnRzLmxlbmd0aCB8fCBzY2hlbWFQYXRoUGFydHMgJiYgc2NoZW1hUGF0aFBhcnRzLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgZGF0YVBhcnQgPSBkYXRhUGF0aFBhcnRzICYmIGRhdGFQYXRoUGFydHMubGVuZ3RoID8gIiIgKyBkYXRhUGF0aFBhcnRzLnBvcCgpIDogbnVsbDsKICAgICAgICAgICAgdmFyIHNjaGVtYVBhcnQgPSBzY2hlbWFQYXRoUGFydHMgJiYgc2NoZW1hUGF0aFBhcnRzLmxlbmd0aCA/ICIiICsgc2NoZW1hUGF0aFBhcnRzLnBvcCgpIDogbnVsbDsKICAgICAgICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgICAgICAgICBlcnJvciA9IGVycm9yLnByZWZpeFdpdGgoZGF0YVBhcnQsIHNjaGVtYVBhcnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMucHJlZml4RXJyb3JzKGVycm9yQ291bnQsIGRhdGFQYXJ0LCBzY2hlbWFQYXJ0KTsKICAgICAgICB9CiAgICB9CgogICAgaWYgKHNjYW5uZWRGcm96ZW5TY2hlbWFJbmRleCAhPT0gbnVsbCkgewogICAgICAgIHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbZnJvemVuSW5kZXhdW3NjYW5uZWRGcm96ZW5TY2hlbWFJbmRleF0gPSB0aGlzLmVycm9ycy5zbGljZShzdGFydEVycm9yQ291bnQpOwogICAgfSBlbHNlIGlmIChzY2FubmVkU2NoZW1hc0luZGV4ICE9PSBudWxsKSB7CiAgICAgICAgZGF0YVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW3NjYW5uZWRTY2hlbWFzSW5kZXhdID0gdGhpcy5lcnJvcnMuc2xpY2Uoc3RhcnRFcnJvckNvdW50KTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7Cn07ClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlRm9ybWF0ID0gZnVuY3Rpb24gKGRhdGEsIHNjaGVtYSkgewogICAgaWYgKHR5cGVvZiBzY2hlbWEuZm9ybWF0ICE9PSAnc3RyaW5nJyB8fCAhdGhpcy5mb3JtYXRWYWxpZGF0b3JzW3NjaGVtYS5mb3JtYXRdKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICB2YXIgZXJyb3JNZXNzYWdlID0gdGhpcy5mb3JtYXRWYWxpZGF0b3JzW3NjaGVtYS5mb3JtYXRdLmNhbGwobnVsbCwgZGF0YSwgc2NoZW1hKTsKICAgIGlmICh0eXBlb2YgZXJyb3JNZXNzYWdlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgZXJyb3JNZXNzYWdlID09PSAnbnVtYmVyJykgewogICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuRk9STUFUX0NVU1RPTSwgeyBtZXNzYWdlOiBlcnJvck1lc3NhZ2UgfSwgJycsICcvZm9ybWF0JywgbnVsbCwgZGF0YSwgc2NoZW1hKTsKICAgIH0gZWxzZSBpZiAoZXJyb3JNZXNzYWdlICYmICh0eXBlb2YgZXJyb3JNZXNzYWdlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKGVycm9yTWVzc2FnZSkpID09PSAnb2JqZWN0JykgewogICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuRk9STUFUX0NVU1RPTSwgeyBtZXNzYWdlOiBlcnJvck1lc3NhZ2UubWVzc2FnZSB8fCAiPyIgfSwgZXJyb3JNZXNzYWdlLmRhdGFQYXRoIHx8ICcnLCBlcnJvck1lc3NhZ2Uuc2NoZW1hUGF0aCB8fCAiL2Zvcm1hdCIsIG51bGwsIGRhdGEsIHNjaGVtYSk7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKfTsKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVEZWZpbmVkS2V5d29yZHMgPSBmdW5jdGlvbiAoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHsKICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmRlZmluZWRLZXl3b3JkcykgewogICAgICAgIGlmICh0eXBlb2Ygc2NoZW1hW2tleV0gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICB2YXIgdmFsaWRhdGlvbkZ1bmN0aW9ucyA9IHRoaXMuZGVmaW5lZEtleXdvcmRzW2tleV07CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWxpZGF0aW9uRnVuY3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBmdW5jID0gdmFsaWRhdGlvbkZ1bmN0aW9uc1tpXTsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZ1bmMoZGF0YSwgc2NoZW1hW2tleV0sIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKTsKICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiByZXN1bHQgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLktFWVdPUkRfQ1VTVE9NLCB7CiAgICAgICAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0CiAgICAgICAgICAgICAgICB9LCAnJywgJycsIG51bGwsIGRhdGEsIHNjaGVtYSkucHJlZml4V2l0aChudWxsLCBrZXkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCAmJiAodHlwZW9mIHJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShyZXN1bHQpKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHZhciBjb2RlID0gcmVzdWx0LmNvZGU7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFFcnJvckNvZGVzW2NvZGVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5kZWZpbmVkIGVycm9yIGNvZGUgKHVzZSBkZWZpbmVFcnJvcik6ICcgKyBjb2RlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29kZSA9IEVycm9yQ29kZXNbY29kZV07CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb2RlICE9PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgICAgIGNvZGUgPSBFcnJvckNvZGVzLktFWVdPUkRfQ1VTVE9NOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VQYXJhbXMgPSAoMCwgX3R5cGVvZjMuZGVmYXVsdCkocmVzdWx0Lm1lc3NhZ2UpID09PSAnb2JqZWN0JyA/IHJlc3VsdC5tZXNzYWdlIDogewogICAgICAgICAgICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlIHx8ICI/IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBzY2hlbWFQYXRoID0gcmVzdWx0LnNjaGVtYVBhdGggfHwgIi8iICsga2V5LnJlcGxhY2UoL34vZywgJ34wJykucmVwbGFjZSgvXC8vZywgJ34xJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihjb2RlLCBtZXNzYWdlUGFyYW1zLCByZXN1bHQuZGF0YVBhdGggfHwgbnVsbCwgc2NoZW1hUGF0aCwgbnVsbCwgZGF0YSwgc2NoZW1hKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwp9OwoKZnVuY3Rpb24gcmVjdXJzaXZlQ29tcGFyZShBLCBCKSB7CiAgICBpZiAoQSA9PT0gQikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgaWYgKEEgJiYgQiAmJiAodHlwZW9mIEEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoQSkpID09PSAib2JqZWN0IiAmJiAodHlwZW9mIEIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoQikpID09PSAib2JqZWN0IikgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KEEpICE9PSBBcnJheS5pc0FycmF5KEIpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoQSkpIHsKICAgICAgICAgICAgaWYgKEEubGVuZ3RoICE9PSBCLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKCFyZWN1cnNpdmVDb21wYXJlKEFbaV0sIEJbaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGtleTsKICAgICAgICAgICAgZm9yIChrZXkgaW4gQSkgewogICAgICAgICAgICAgICAgaWYgKEJba2V5XSA9PT0gdW5kZWZpbmVkICYmIEFba2V5XSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAoa2V5IGluIEIpIHsKICAgICAgICAgICAgICAgIGlmIChBW2tleV0gPT09IHVuZGVmaW5lZCAmJiBCW2tleV0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGtleSBpbiBBKSB7CiAgICAgICAgICAgICAgICBpZiAoIXJlY3Vyc2l2ZUNvbXBhcmUoQVtrZXldLCBCW2tleV0pKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwp9CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUJhc2ljID0gZnVuY3Rpb24gdmFsaWRhdGVCYXNpYyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgewogICAgdmFyIGVycm9yOwogICAgaWYgKGVycm9yID0gdGhpcy52YWxpZGF0ZVR5cGUoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpKSB7CiAgICAgICAgcmV0dXJuIGVycm9yLnByZWZpeFdpdGgobnVsbCwgInR5cGUiKTsKICAgIH0KICAgIGlmIChlcnJvciA9IHRoaXMudmFsaWRhdGVFbnVtKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSkgewogICAgICAgIHJldHVybiBlcnJvci5wcmVmaXhXaXRoKG51bGwsICJ0eXBlIik7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlVHlwZSA9IGZ1bmN0aW9uIHZhbGlkYXRlVHlwZShkYXRhLCBzY2hlbWEpIHsKICAgIGlmIChzY2hlbWEudHlwZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICB2YXIgZGF0YVR5cGUgPSB0eXBlb2YgZGF0YSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShkYXRhKTsKICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgZGF0YVR5cGUgPSAibnVsbCI7CiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICBkYXRhVHlwZSA9ICJhcnJheSI7CiAgICB9CiAgICB2YXIgYWxsb3dlZFR5cGVzID0gc2NoZW1hLnR5cGU7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYWxsb3dlZFR5cGVzKSkgewogICAgICAgIGFsbG93ZWRUeXBlcyA9IFthbGxvd2VkVHlwZXNdOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWxsb3dlZFR5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHR5cGUgPSBhbGxvd2VkVHlwZXNbaV07CiAgICAgICAgaWYgKHR5cGUgPT09IGRhdGFUeXBlIHx8IHR5cGUgPT09ICJpbnRlZ2VyIiAmJiBkYXRhVHlwZSA9PT0gIm51bWJlciIgJiYgZGF0YSAlIDEgPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5JTlZBTElEX1RZUEUsIHsKICAgICAgICB0eXBlOiBkYXRhVHlwZSwKICAgICAgICBleHBlY3RlZDogYWxsb3dlZFR5cGVzLmpvaW4oIi8iKQogICAgfSwgJycsICcnLCBudWxsLCBkYXRhLCBzY2hlbWEpOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVFbnVtID0gZnVuY3Rpb24gdmFsaWRhdGVFbnVtKGRhdGEsIHNjaGVtYSkgewogICAgaWYgKHNjaGVtYVsiZW51bSJdID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NoZW1hWyJlbnVtIl0ubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgZW51bVZhbCA9IHNjaGVtYVsiZW51bSJdW2ldOwogICAgICAgIGlmIChyZWN1cnNpdmVDb21wYXJlKGRhdGEsIGVudW1WYWwpKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuRU5VTV9NSVNNQVRDSCwgeyB2YWx1ZTogdHlwZW9mIEpTT04gIT09ICd1bmRlZmluZWQnID8gKDAsIF9zdHJpbmdpZnkyLmRlZmF1bHQpKGRhdGEpIDogZGF0YSB9LCAnJywgJycsIG51bGwsIGRhdGEsIHNjaGVtYSk7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZU51bWVyaWMgPSBmdW5jdGlvbiB2YWxpZGF0ZU51bWVyaWMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHsKICAgIHJldHVybiB0aGlzLnZhbGlkYXRlTXVsdGlwbGVPZihkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZU1pbk1heChkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZU5hTihkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgbnVsbDsKfTsKCnZhciBDTE9TRV9FTk9VR0hfTE9XID0gTWF0aC5wb3coMiwgLTUxKTsKdmFyIENMT1NFX0VOT1VHSF9ISUdIID0gMSAtIENMT1NFX0VOT1VHSF9MT1c7ClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlTXVsdGlwbGVPZiA9IGZ1bmN0aW9uIHZhbGlkYXRlTXVsdGlwbGVPZihkYXRhLCBzY2hlbWEpIHsKICAgIHZhciBtdWx0aXBsZU9mID0gc2NoZW1hLm11bHRpcGxlT2YgfHwgc2NoZW1hLmRpdmlzaWJsZUJ5OwogICAgaWYgKG11bHRpcGxlT2YgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgaWYgKHR5cGVvZiBkYXRhID09PSAibnVtYmVyIikgewogICAgICAgIHZhciByZW1haW5kZXIgPSBkYXRhIC8gbXVsdGlwbGVPZiAlIDE7CiAgICAgICAgaWYgKHJlbWFpbmRlciA+PSBDTE9TRV9FTk9VR0hfTE9XICYmIHJlbWFpbmRlciA8IENMT1NFX0VOT1VHSF9ISUdIKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuTlVNQkVSX01VTFRJUExFX09GLCB7CiAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YSwKICAgICAgICAgICAgICAgIG11bHRpcGxlT2Y6IG11bHRpcGxlT2YKICAgICAgICAgICAgfSwgJycsICcnLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVNaW5NYXggPSBmdW5jdGlvbiB2YWxpZGF0ZU1pbk1heChkYXRhLCBzY2hlbWEpIHsKICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gIm51bWJlciIpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGlmIChzY2hlbWEubWluaW11bSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKGRhdGEgPCBzY2hlbWEubWluaW11bSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk5VTUJFUl9NSU5JTVVNLCB7CiAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YSwKICAgICAgICAgICAgICAgIG1pbmltdW06IHNjaGVtYS5taW5pbXVtCiAgICAgICAgICAgIH0sICcnLCAnL21pbmltdW0nLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgICAgIH0KICAgICAgICBpZiAoc2NoZW1hLmV4Y2x1c2l2ZU1pbmltdW0gJiYgZGF0YSA9PT0gc2NoZW1hLm1pbmltdW0pIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5OVU1CRVJfTUlOSU1VTV9FWENMVVNJVkUsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhLAogICAgICAgICAgICAgICAgbWluaW11bTogc2NoZW1hLm1pbmltdW0KICAgICAgICAgICAgfSwgJycsICcvZXhjbHVzaXZlTWluaW11bScsIG51bGwsIGRhdGEsIHNjaGVtYSk7CiAgICAgICAgfQogICAgfQogICAgaWYgKHNjaGVtYS5tYXhpbXVtICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAoZGF0YSA+IHNjaGVtYS5tYXhpbXVtKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuTlVNQkVSX01BWElNVU0sIHsKICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhLAogICAgICAgICAgICAgICAgbWF4aW11bTogc2NoZW1hLm1heGltdW0KICAgICAgICAgICAgfSwgJycsICcvbWF4aW11bScsIG51bGwsIGRhdGEsIHNjaGVtYSk7CiAgICAgICAgfQogICAgICAgIGlmIChzY2hlbWEuZXhjbHVzaXZlTWF4aW11bSAmJiBkYXRhID09PSBzY2hlbWEubWF4aW11bSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRSwgewogICAgICAgICAgICAgICAgdmFsdWU6IGRhdGEsCiAgICAgICAgICAgICAgICBtYXhpbXVtOiBzY2hlbWEubWF4aW11bQogICAgICAgICAgICB9LCAnJywgJy9leGNsdXNpdmVNYXhpbXVtJywgbnVsbCwgZGF0YSwgc2NoZW1hKTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlTmFOID0gZnVuY3Rpb24gdmFsaWRhdGVOYU4oZGF0YSwgc2NoZW1hKSB7CiAgICBpZiAodHlwZW9mIGRhdGEgIT09ICJudW1iZXIiKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBpZiAoaXNOYU4oZGF0YSkgPT09IHRydWUgfHwgZGF0YSA9PT0gSW5maW5pdHkgfHwgZGF0YSA9PT0gLUluZmluaXR5KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5OVU1CRVJfTk9UX0FfTlVNQkVSLCB7IHZhbHVlOiBkYXRhIH0sICcnLCAnL3R5cGUnLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgfQogICAgcmV0dXJuIG51bGw7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZyA9IGZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7CiAgICByZXR1cm4gdGhpcy52YWxpZGF0ZVN0cmluZ0xlbmd0aChkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZVN0cmluZ1BhdHRlcm4oZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHx8IG51bGw7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIHZhbGlkYXRlU3RyaW5nTGVuZ3RoKGRhdGEsIHNjaGVtYSkgewogICAgaWYgKHR5cGVvZiBkYXRhICE9PSAic3RyaW5nIikgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgaWYgKHNjaGVtYS5taW5MZW5ndGggIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChkYXRhLmxlbmd0aCA8IHNjaGVtYS5taW5MZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5TVFJJTkdfTEVOR1RIX1NIT1JULCB7CiAgICAgICAgICAgICAgICBsZW5ndGg6IGRhdGEubGVuZ3RoLAogICAgICAgICAgICAgICAgbWluaW11bTogc2NoZW1hLm1pbkxlbmd0aAogICAgICAgICAgICB9LCAnJywgJy9taW5MZW5ndGgnLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgICAgIH0KICAgIH0KICAgIGlmIChzY2hlbWEubWF4TGVuZ3RoICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiBzY2hlbWEubWF4TGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuU1RSSU5HX0xFTkdUSF9MT05HLCB7CiAgICAgICAgICAgICAgICBsZW5ndGg6IGRhdGEubGVuZ3RoLAogICAgICAgICAgICAgICAgbWF4aW11bTogc2NoZW1hLm1heExlbmd0aAogICAgICAgICAgICB9LCAnJywgJy9tYXhMZW5ndGgnLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmdQYXR0ZXJuID0gZnVuY3Rpb24gdmFsaWRhdGVTdHJpbmdQYXR0ZXJuKGRhdGEsIHNjaGVtYSkgewogICAgaWYgKHR5cGVvZiBkYXRhICE9PSAic3RyaW5nIiB8fCB0eXBlb2Ygc2NoZW1hLnBhdHRlcm4gIT09ICJzdHJpbmciICYmICEoc2NoZW1hLnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICB2YXIgcmVnZXhwOwogICAgaWYgKHNjaGVtYS5wYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSB7CiAgICAgICAgcmVnZXhwID0gc2NoZW1hLnBhdHRlcm47CiAgICB9IGVsc2UgewogICAgICAgIHZhciBib2R5LAogICAgICAgICAgICBmbGFncyA9ICcnOwogICAgICAgIC8vIENoZWNrIGZvciByZWd1bGFyIGV4cHJlc3Npb24gbGl0ZXJhbHMKICAgICAgICAvLyBAc2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy03LjguNQogICAgICAgIHZhciBsaXRlcmFsID0gc2NoZW1hLnBhdHRlcm4ubWF0Y2goL15cLyguKylcLyhbaW1nXSopJC8pOwogICAgICAgIGlmIChsaXRlcmFsKSB7CiAgICAgICAgICAgIGJvZHkgPSBsaXRlcmFsWzFdOwogICAgICAgICAgICBmbGFncyA9IGxpdGVyYWxbMl07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYm9keSA9IHNjaGVtYS5wYXR0ZXJuOwogICAgICAgIH0KICAgICAgICByZWdleHAgPSBuZXcgUmVnRXhwKGJvZHksIGZsYWdzKTsKICAgIH0KICAgIGlmICghcmVnZXhwLnRlc3QoZGF0YSkpIHsKICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLlNUUklOR19QQVRURVJOLCB7IHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuIH0sICcnLCAnL3BhdHRlcm4nLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgfQogICAgcmV0dXJuIG51bGw7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUFycmF5ID0gZnVuY3Rpb24gdmFsaWRhdGVBcnJheShkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgewogICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICByZXR1cm4gdGhpcy52YWxpZGF0ZUFycmF5TGVuZ3RoKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCB0aGlzLnZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZUFycmF5SXRlbXMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHx8IG51bGw7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUFycmF5TGVuZ3RoID0gZnVuY3Rpb24gdmFsaWRhdGVBcnJheUxlbmd0aChkYXRhLCBzY2hlbWEpIHsKICAgIHZhciBlcnJvcjsKICAgIGlmIChzY2hlbWEubWluSXRlbXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChkYXRhLmxlbmd0aCA8IHNjaGVtYS5taW5JdGVtcykgewogICAgICAgICAgICBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5BUlJBWV9MRU5HVEhfU0hPUlQsIHsKICAgICAgICAgICAgICAgIGxlbmd0aDogZGF0YS5sZW5ndGgsCiAgICAgICAgICAgICAgICBtaW5pbXVtOiBzY2hlbWEubWluSXRlbXMKICAgICAgICAgICAgfSwgJycsICcvbWluSXRlbXMnLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgICAgICAgICBpZiAodGhpcy5oYW5kbGVFcnJvcihlcnJvcikpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGlmIChzY2hlbWEubWF4SXRlbXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IHNjaGVtYS5tYXhJdGVtcykgewogICAgICAgICAgICBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5BUlJBWV9MRU5HVEhfTE9ORywgewogICAgICAgICAgICAgICAgbGVuZ3RoOiBkYXRhLmxlbmd0aCwKICAgICAgICAgICAgICAgIG1heGltdW06IHNjaGVtYS5tYXhJdGVtcwogICAgICAgICAgICB9LCAnJywgJy9tYXhJdGVtcycsIG51bGwsIGRhdGEsIHNjaGVtYSk7CiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXMgPSBmdW5jdGlvbiB2YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXMoZGF0YSwgc2NoZW1hKSB7CiAgICBpZiAoc2NoZW1hLnVuaXF1ZUl0ZW1zKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IGRhdGEubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgIGlmIChyZWN1cnNpdmVDb21wYXJlKGRhdGFbaV0sIGRhdGFbal0pKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLkFSUkFZX1VOSVFVRSwgewogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaDE6IGksCiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoMjogagogICAgICAgICAgICAgICAgICAgIH0sICcnLCAnL3VuaXF1ZUl0ZW1zJywgbnVsbCwgZGF0YSwgc2NoZW1hKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYW5kbGVFcnJvcihlcnJvcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVBcnJheUl0ZW1zID0gZnVuY3Rpb24gdmFsaWRhdGVBcnJheUl0ZW1zKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7CiAgICBpZiAoc2NoZW1hLml0ZW1zID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHZhciBlcnJvciwgaTsKICAgIGlmIChBcnJheS5pc0FycmF5KHNjaGVtYS5pdGVtcykpIHsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaSA8IHNjaGVtYS5pdGVtcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGlmIChlcnJvciA9IHRoaXMudmFsaWRhdGVBbGwoZGF0YVtpXSwgc2NoZW1hLml0ZW1zW2ldLCBbaV0sIFsiaXRlbXMiLCBpXSwgZGF0YVBvaW50ZXJQYXRoICsgIi8iICsgaSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2NoZW1hLmFkZGl0aW9uYWxJdGVtcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNjaGVtYS5hZGRpdGlvbmFsSXRlbXMgPT09ICJib29sZWFuIikgewogICAgICAgICAgICAgICAgICAgIGlmICghc2NoZW1hLmFkZGl0aW9uYWxJdGVtcykgewogICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5BUlJBWV9BRERJVElPTkFMX0lURU1TLCB7fSwgJy8nICsgaSwgJy9hZGRpdGlvbmFsSXRlbXMnLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYW5kbGVFcnJvcihlcnJvcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGFbaV0sIHNjaGVtYS5hZGRpdGlvbmFsSXRlbXMsIFtpXSwgWyJhZGRpdGlvbmFsSXRlbXMiXSwgZGF0YVBvaW50ZXJQYXRoICsgIi8iICsgaSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChlcnJvciA9IHRoaXMudmFsaWRhdGVBbGwoZGF0YVtpXSwgc2NoZW1hLml0ZW1zLCBbaV0sIFsiaXRlbXMiXSwgZGF0YVBvaW50ZXJQYXRoICsgIi8iICsgaSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBudWxsOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3QgPSBmdW5jdGlvbiB2YWxpZGF0ZU9iamVjdChkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgewogICAgaWYgKCh0eXBlb2YgZGF0YSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShkYXRhKSkgIT09ICJvYmplY3QiIHx8IGRhdGEgPT09IG51bGwgfHwgQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgcmV0dXJuIHRoaXMudmFsaWRhdGVPYmplY3RNaW5NYXhQcm9wZXJ0aWVzKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCB0aGlzLnZhbGlkYXRlT2JqZWN0UmVxdWlyZWRQcm9wZXJ0aWVzKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCB0aGlzLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcyhkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgbnVsbDsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcyA9IGZ1bmN0aW9uIHZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcyhkYXRhLCBzY2hlbWEpIHsKICAgIHZhciBrZXlzID0gKDAsIF9rZXlzMi5kZWZhdWx0KShkYXRhKTsKICAgIHZhciBlcnJvcjsKICAgIGlmIChzY2hlbWEubWluUHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgaWYgKGtleXMubGVuZ3RoIDwgc2NoZW1hLm1pblByb3BlcnRpZXMpIHsKICAgICAgICAgICAgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTSwgewogICAgICAgICAgICAgICAgcHJvcGVydHlDb3VudDoga2V5cy5sZW5ndGgsCiAgICAgICAgICAgICAgICBtaW5pbXVtOiBzY2hlbWEubWluUHJvcGVydGllcwogICAgICAgICAgICB9LCAnJywgJy9taW5Qcm9wZXJ0aWVzJywgbnVsbCwgZGF0YSwgc2NoZW1hKTsKICAgICAgICAgICAgaWYgKHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBpZiAoc2NoZW1hLm1heFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IHNjaGVtYS5tYXhQcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgIGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU0sIHsKICAgICAgICAgICAgICAgIHByb3BlcnR5Q291bnQ6IGtleXMubGVuZ3RoLAogICAgICAgICAgICAgICAgbWF4aW11bTogc2NoZW1hLm1heFByb3BlcnRpZXMKICAgICAgICAgICAgfSwgJycsICcvbWF4UHJvcGVydGllcycsIG51bGwsIGRhdGEsIHNjaGVtYSk7CiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFJlcXVpcmVkUHJvcGVydGllcyA9IGZ1bmN0aW9uIHZhbGlkYXRlT2JqZWN0UmVxdWlyZWRQcm9wZXJ0aWVzKGRhdGEsIHNjaGVtYSkgewogICAgaWYgKHNjaGVtYS5yZXF1aXJlZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY2hlbWEucmVxdWlyZWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGtleSA9IHNjaGVtYS5yZXF1aXJlZFtpXTsKICAgICAgICAgICAgaWYgKGRhdGFba2V5XSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuT0JKRUNUX1JFUVVJUkVELCB7IGtleToga2V5IH0sICcnLCAnL3JlcXVpcmVkLycgKyBpLCBudWxsLCBkYXRhLCBzY2hlbWEpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXMgPSBmdW5jdGlvbiB2YWxpZGF0ZU9iamVjdFByb3BlcnRpZXMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHsKICAgIHZhciBlcnJvcjsKICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7CiAgICAgICAgdmFyIGtleVBvaW50ZXJQYXRoID0gZGF0YVBvaW50ZXJQYXRoICsgIi8iICsga2V5LnJlcGxhY2UoL34vZywgJ34wJykucmVwbGFjZSgvXC8vZywgJ34xJyk7CiAgICAgICAgdmFyIGZvdW5kTWF0Y2ggPSBmYWxzZTsKICAgICAgICBpZiAoc2NoZW1hLnByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCAmJiBzY2hlbWEucHJvcGVydGllc1trZXldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgZm91bmRNYXRjaCA9IHRydWU7CiAgICAgICAgICAgIGlmIChlcnJvciA9IHRoaXMudmFsaWRhdGVBbGwoZGF0YVtrZXldLCBzY2hlbWEucHJvcGVydGllc1trZXldLCBba2V5XSwgWyJwcm9wZXJ0aWVzIiwga2V5XSwga2V5UG9pbnRlclBhdGgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGZvciAodmFyIHBhdHRlcm5LZXkgaW4gc2NoZW1hLnBhdHRlcm5Qcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cChwYXR0ZXJuS2V5KTsKICAgICAgICAgICAgICAgIGlmIChyZWdleHAudGVzdChrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgZm91bmRNYXRjaCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yID0gdGhpcy52YWxpZGF0ZUFsbChkYXRhW2tleV0sIHNjaGVtYS5wYXR0ZXJuUHJvcGVydGllc1twYXR0ZXJuS2V5XSwgW2tleV0sIFsicGF0dGVyblByb3BlcnRpZXMiLCBwYXR0ZXJuS2V5XSwga2V5UG9pbnRlclBhdGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFmb3VuZE1hdGNoKSB7CiAgICAgICAgICAgIGlmIChzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykgewogICAgICAgICAgICAgICAgICAgIHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2tleVBvaW50ZXJQYXRoXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNba2V5UG9pbnRlclBhdGhdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09ICJib29sZWFuIikgewogICAgICAgICAgICAgICAgICAgIGlmICghc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVMsIHsga2V5OiBrZXkgfSwgJycsICcvYWRkaXRpb25hbFByb3BlcnRpZXMnLCBudWxsLCBkYXRhLCBzY2hlbWEpLnByZWZpeFdpdGgoa2V5LCBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciA9IHRoaXMudmFsaWRhdGVBbGwoZGF0YVtrZXldLCBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMsIFtrZXldLCBbImFkZGl0aW9uYWxQcm9wZXJ0aWVzIl0sIGtleVBvaW50ZXJQYXRoKSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyAmJiAhdGhpcy5rbm93blByb3BlcnR5UGF0aHNba2V5UG9pbnRlclBhdGhdKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2tleVBvaW50ZXJQYXRoXSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykgewogICAgICAgICAgICB0aGlzLmtub3duUHJvcGVydHlQYXRoc1trZXlQb2ludGVyUGF0aF0gPSB0cnVlOwogICAgICAgICAgICBkZWxldGUgdGhpcy51bmtub3duUHJvcGVydHlQYXRoc1trZXlQb2ludGVyUGF0aF07CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7Cn07CgpWYWxpZGF0b3JDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcyA9IGZ1bmN0aW9uIHZhbGlkYXRlT2JqZWN0RGVwZW5kZW5jaWVzKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7CiAgICB2YXIgZXJyb3I7CiAgICBpZiAoc2NoZW1hLmRlcGVuZGVuY2llcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZm9yICh2YXIgZGVwS2V5IGluIHNjaGVtYS5kZXBlbmRlbmNpZXMpIHsKICAgICAgICAgICAgaWYgKGRhdGFbZGVwS2V5XSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB2YXIgZGVwID0gc2NoZW1hLmRlcGVuZGVuY2llc1tkZXBLZXldOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXAgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbZGVwXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9CSkVDVF9ERVBFTkRFTkNZX0tFWSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBkZXBLZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW5nOiBkZXAKICAgICAgICAgICAgICAgICAgICAgICAgfSwgJycsICcnLCBudWxsLCBkYXRhLCBzY2hlbWEpLnByZWZpeFdpdGgobnVsbCwgZGVwS2V5KS5wcmVmaXhXaXRoKG51bGwsICJkZXBlbmRlbmNpZXMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGVwKSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXF1aXJlZEtleSA9IGRlcFtpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbcmVxdWlyZWRLZXldID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9CSkVDVF9ERVBFTkRFTkNZX0tFWSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZGVwS2V5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pc3Npbmc6IHJlcXVpcmVkS2V5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAnJywgJy8nICsgaSwgbnVsbCwgZGF0YSwgc2NoZW1hKS5wcmVmaXhXaXRoKG51bGwsIGRlcEtleSkucHJlZml4V2l0aChudWxsLCAiZGVwZW5kZW5jaWVzIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5oYW5kbGVFcnJvcihlcnJvcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciA9IHRoaXMudmFsaWRhdGVBbGwoZGF0YSwgZGVwLCBbXSwgWyJkZXBlbmRlbmNpZXMiLCBkZXBLZXldLCBkYXRhUG9pbnRlclBhdGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlQ29tYmluYXRpb25zID0gZnVuY3Rpb24gdmFsaWRhdGVDb21iaW5hdGlvbnMoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHsKICAgIHJldHVybiB0aGlzLnZhbGlkYXRlQWxsT2YoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHx8IHRoaXMudmFsaWRhdGVBbnlPZihkYXRhLCBzY2hlbWEsIGRhdGFQb2ludGVyUGF0aCkgfHwgdGhpcy52YWxpZGF0ZU9uZU9mKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCB0aGlzLnZhbGlkYXRlTm90KGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB8fCBudWxsOwp9OwoKVmFsaWRhdG9yQ29udGV4dC5wcm90b3R5cGUudmFsaWRhdGVBbGxPZiA9IGZ1bmN0aW9uIHZhbGlkYXRlQWxsT2YoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHsKICAgIGlmIChzY2hlbWEuYWxsT2YgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgdmFyIGVycm9yOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY2hlbWEuYWxsT2YubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgc3ViU2NoZW1hID0gc2NoZW1hLmFsbE9mW2ldOwogICAgICAgIGlmIChlcnJvciA9IHRoaXMudmFsaWRhdGVBbGwoZGF0YSwgc3ViU2NoZW1hLCBbXSwgWyJhbGxPZiIsIGldLCBkYXRhUG9pbnRlclBhdGgpKSB7CiAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlQW55T2YgPSBmdW5jdGlvbiB2YWxpZGF0ZUFueU9mKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7CiAgICBpZiAoc2NoZW1hLmFueU9mID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHZhciBlcnJvcnMgPSBbXTsKICAgIHZhciBzdGFydEVycm9yQ291bnQgPSB0aGlzLmVycm9ycy5sZW5ndGg7CiAgICB2YXIgb2xkVW5rbm93blByb3BlcnR5UGF0aHMsIG9sZEtub3duUHJvcGVydHlQYXRoczsKICAgIGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHsKICAgICAgICBvbGRVbmtub3duUHJvcGVydHlQYXRocyA9IHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM7CiAgICAgICAgb2xkS25vd25Qcm9wZXJ0eVBhdGhzID0gdGhpcy5rbm93blByb3BlcnR5UGF0aHM7CiAgICB9CiAgICB2YXIgZXJyb3JBdEVuZCA9IHRydWU7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjaGVtYS5hbnlPZi5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHsKICAgICAgICAgICAgdGhpcy51bmtub3duUHJvcGVydHlQYXRocyA9IHt9OwogICAgICAgICAgICB0aGlzLmtub3duUHJvcGVydHlQYXRocyA9IHt9OwogICAgICAgIH0KICAgICAgICB2YXIgc3ViU2NoZW1hID0gc2NoZW1hLmFueU9mW2ldOwoKICAgICAgICB2YXIgZXJyb3JDb3VudCA9IHRoaXMuZXJyb3JzLmxlbmd0aDsKICAgICAgICB2YXIgZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGEsIHN1YlNjaGVtYSwgW10sIFsiYW55T2YiLCBpXSwgZGF0YVBvaW50ZXJQYXRoKTsKCiAgICAgICAgaWYgKGVycm9yID09PSBudWxsICYmIGVycm9yQ291bnQgPT09IHRoaXMuZXJyb3JzLmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLmVycm9ycyA9IHRoaXMuZXJyb3JzLnNsaWNlKDAsIHN0YXJ0RXJyb3JDb3VudCk7CgogICAgICAgICAgICBpZiAodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrbm93bktleSBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocykgewogICAgICAgICAgICAgICAgICAgIG9sZEtub3duUHJvcGVydHlQYXRoc1trbm93bktleV0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvbGRVbmtub3duUHJvcGVydHlQYXRoc1trbm93bktleV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKHZhciB1bmtub3duS2V5IGluIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIW9sZEtub3duUHJvcGVydHlQYXRoc1t1bmtub3duS2V5XSkgewogICAgICAgICAgICAgICAgICAgICAgICBvbGRVbmtub3duUHJvcGVydHlQYXRoc1t1bmtub3duS2V5XSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBjb250aW51ZSBsb29waW5nIHNvIHdlIGNhdGNoIGFsbCB0aGUgcHJvcGVydHkgZGVmaW5pdGlvbnMsIGJ1dCB3ZSBkb24ndCB3YW50IHRvIHJldHVybiBhbiBlcnJvcgogICAgICAgICAgICAgICAgZXJyb3JBdEVuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3IucHJlZml4V2l0aChudWxsLCAiIiArIGkpLnByZWZpeFdpdGgobnVsbCwgImFueU9mIikpOwogICAgICAgIH0KICAgIH0KICAgIGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHsKICAgICAgICB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzID0gb2xkVW5rbm93blByb3BlcnR5UGF0aHM7CiAgICAgICAgdGhpcy5rbm93blByb3BlcnR5UGF0aHMgPSBvbGRLbm93blByb3BlcnR5UGF0aHM7CiAgICB9CiAgICBpZiAoZXJyb3JBdEVuZCkgewogICAgICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2Uoc3RhcnRFcnJvckNvdW50KSk7CiAgICAgICAgdGhpcy5lcnJvcnMgPSB0aGlzLmVycm9ycy5zbGljZSgwLCBzdGFydEVycm9yQ291bnQpOwogICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuQU5ZX09GX01JU1NJTkcsIHt9LCAiIiwgIi9hbnlPZiIsIGVycm9ycywgZGF0YSwgc2NoZW1hKTsKICAgIH0KfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlT25lT2YgPSBmdW5jdGlvbiB2YWxpZGF0ZU9uZU9mKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7CiAgICBpZiAoc2NoZW1hLm9uZU9mID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHZhciB2YWxpZEluZGV4ID0gbnVsbDsKICAgIHZhciBlcnJvcnMgPSBbXTsKICAgIHZhciBzdGFydEVycm9yQ291bnQgPSB0aGlzLmVycm9ycy5sZW5ndGg7CiAgICB2YXIgb2xkVW5rbm93blByb3BlcnR5UGF0aHMsIG9sZEtub3duUHJvcGVydHlQYXRoczsKICAgIGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHsKICAgICAgICBvbGRVbmtub3duUHJvcGVydHlQYXRocyA9IHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM7CiAgICAgICAgb2xkS25vd25Qcm9wZXJ0eVBhdGhzID0gdGhpcy5rbm93blByb3BlcnR5UGF0aHM7CiAgICB9CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjaGVtYS5vbmVPZi5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHsKICAgICAgICAgICAgdGhpcy51bmtub3duUHJvcGVydHlQYXRocyA9IHt9OwogICAgICAgICAgICB0aGlzLmtub3duUHJvcGVydHlQYXRocyA9IHt9OwogICAgICAgIH0KICAgICAgICB2YXIgc3ViU2NoZW1hID0gc2NoZW1hLm9uZU9mW2ldOwoKICAgICAgICB2YXIgZXJyb3JDb3VudCA9IHRoaXMuZXJyb3JzLmxlbmd0aDsKICAgICAgICB2YXIgZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGEsIHN1YlNjaGVtYSwgW10sIFsib25lT2YiLCBpXSwgZGF0YVBvaW50ZXJQYXRoKTsKCiAgICAgICAgaWYgKGVycm9yID09PSBudWxsICYmIGVycm9yQ291bnQgPT09IHRoaXMuZXJyb3JzLmxlbmd0aCkgewogICAgICAgICAgICBpZiAodmFsaWRJbmRleCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgdmFsaWRJbmRleCA9IGk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9ycyA9IHRoaXMuZXJyb3JzLnNsaWNlKDAsIHN0YXJ0RXJyb3JDb3VudCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihFcnJvckNvZGVzLk9ORV9PRl9NVUxUSVBMRSwgewogICAgICAgICAgICAgICAgICAgIGluZGV4MTogdmFsaWRJbmRleCwKICAgICAgICAgICAgICAgICAgICBpbmRleDI6IGkKICAgICAgICAgICAgICAgIH0sICIiLCAiL29uZU9mIiwgbnVsbCwgZGF0YSwgc2NoZW1hKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrbm93bktleSBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocykgewogICAgICAgICAgICAgICAgICAgIG9sZEtub3duUHJvcGVydHlQYXRoc1trbm93bktleV0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvbGRVbmtub3duUHJvcGVydHlQYXRoc1trbm93bktleV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKHZhciB1bmtub3duS2V5IGluIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIW9sZEtub3duUHJvcGVydHlQYXRoc1t1bmtub3duS2V5XSkgewogICAgICAgICAgICAgICAgICAgICAgICBvbGRVbmtub3duUHJvcGVydHlQYXRoc1t1bmtub3duS2V5XSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChlcnJvcikgewogICAgICAgICAgICBlcnJvcnMucHVzaChlcnJvcik7CiAgICAgICAgfQogICAgfQogICAgaWYgKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcykgewogICAgICAgIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMgPSBvbGRVbmtub3duUHJvcGVydHlQYXRoczsKICAgICAgICB0aGlzLmtub3duUHJvcGVydHlQYXRocyA9IG9sZEtub3duUHJvcGVydHlQYXRoczsKICAgIH0KICAgIGlmICh2YWxpZEluZGV4ID09PSBudWxsKSB7CiAgICAgICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdCh0aGlzLmVycm9ycy5zbGljZShzdGFydEVycm9yQ291bnQpKTsKICAgICAgICB0aGlzLmVycm9ycyA9IHRoaXMuZXJyb3JzLnNsaWNlKDAsIHN0YXJ0RXJyb3JDb3VudCk7CiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoRXJyb3JDb2Rlcy5PTkVfT0ZfTUlTU0lORywge30sICIiLCAiL29uZU9mIiwgZXJyb3JzLCBkYXRhLCBzY2hlbWEpOwogICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVycm9ycyA9IHRoaXMuZXJyb3JzLnNsaWNlKDAsIHN0YXJ0RXJyb3JDb3VudCk7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlTm90ID0gZnVuY3Rpb24gdmFsaWRhdGVOb3QoZGF0YSwgc2NoZW1hLCBkYXRhUG9pbnRlclBhdGgpIHsKICAgIGlmIChzY2hlbWEubm90ID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHZhciBvbGRFcnJvckNvdW50ID0gdGhpcy5lcnJvcnMubGVuZ3RoOwogICAgdmFyIG9sZFVua25vd25Qcm9wZXJ0eVBhdGhzLCBvbGRLbm93blByb3BlcnR5UGF0aHM7CiAgICBpZiAodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKSB7CiAgICAgICAgb2xkVW5rbm93blByb3BlcnR5UGF0aHMgPSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzOwogICAgICAgIG9sZEtub3duUHJvcGVydHlQYXRocyA9IHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzOwogICAgICAgIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMgPSB7fTsKICAgICAgICB0aGlzLmtub3duUHJvcGVydHlQYXRocyA9IHt9OwogICAgfQogICAgdmFyIGVycm9yID0gdGhpcy52YWxpZGF0ZUFsbChkYXRhLCBzY2hlbWEubm90LCBudWxsLCBudWxsLCBkYXRhUG9pbnRlclBhdGgpOwogICAgdmFyIG5vdEVycm9ycyA9IHRoaXMuZXJyb3JzLnNsaWNlKG9sZEVycm9yQ291bnQpOwogICAgdGhpcy5lcnJvcnMgPSB0aGlzLmVycm9ycy5zbGljZSgwLCBvbGRFcnJvckNvdW50KTsKICAgIGlmICh0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpIHsKICAgICAgICB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzID0gb2xkVW5rbm93blByb3BlcnR5UGF0aHM7CiAgICAgICAgdGhpcy5rbm93blByb3BlcnR5UGF0aHMgPSBvbGRLbm93blByb3BlcnR5UGF0aHM7CiAgICB9CiAgICBpZiAoZXJyb3IgPT09IG51bGwgJiYgbm90RXJyb3JzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yKEVycm9yQ29kZXMuTk9UX1BBU1NFRCwge30sICIiLCAiL25vdCIsIG51bGwsIGRhdGEsIHNjaGVtYSk7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKfTsKClZhbGlkYXRvckNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlSHlwZXJtZWRpYSA9IGZ1bmN0aW9uIHZhbGlkYXRlQ29tYmluYXRpb25zKGRhdGEsIHNjaGVtYSwgZGF0YVBvaW50ZXJQYXRoKSB7CiAgICBpZiAoIXNjaGVtYS5saW5rcykgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgdmFyIGVycm9yOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY2hlbWEubGlua3MubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbGRvID0gc2NoZW1hLmxpbmtzW2ldOwogICAgICAgIGlmIChsZG8ucmVsID09PSAiZGVzY3JpYmVkYnkiKSB7CiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IG5ldyBVcmlUZW1wbGF0ZShsZG8uaHJlZik7CiAgICAgICAgICAgIHZhciBhbGxQcmVzZW50ID0gdHJ1ZTsKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0ZW1wbGF0ZS52YXJOYW1lcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgaWYgKCEodGVtcGxhdGUudmFyTmFtZXNbal0gaW4gZGF0YSkpIHsKICAgICAgICAgICAgICAgICAgICBhbGxQcmVzZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGFsbFByZXNlbnQpIHsKICAgICAgICAgICAgICAgIHZhciBzY2hlbWFVcmwgPSB0ZW1wbGF0ZS5maWxsRnJvbU9iamVjdChkYXRhKTsKICAgICAgICAgICAgICAgIHZhciBzdWJTY2hlbWEgPSB7ICIkcmVmIjogc2NoZW1hVXJsIH07CiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgPSB0aGlzLnZhbGlkYXRlQWxsKGRhdGEsIHN1YlNjaGVtYSwgW10sIFsibGlua3MiLCBpXSwgZGF0YVBvaW50ZXJQYXRoKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfTsKCi8vIHBhcnNlVVJJKCkgYW5kIHJlc29sdmVVcmwoKSBhcmUgZnJvbSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xMDg4ODUwCi8vICAgLSAgcmVsZWFzZWQgYXMgcHVibGljIGRvbWFpbiBieSBhdXRob3IgKCJZYWZmbGUiKSAtIHNlZSBjb21tZW50cyBvbiBnaXN0CgpmdW5jdGlvbiBwYXJzZVVSSSh1cmwpIHsKICAgIHZhciBtID0gU3RyaW5nKHVybCkucmVwbGFjZSgvXlxzK3xccyskL2csICcnKS5tYXRjaCgvXihbXjpcLz8jXSs6KT8oXC9cLyg/OlteOkBdKig/OjpbXjpAXSopP0ApPygoW146XC8/I10qKSg/OjooXGQqKSk/KSk/KFtePyNdKikoXD9bXiNdKik/KCNbXHNcU10qKT8vKTsKICAgIC8vIGF1dGhvcml0eSA9ICcvLycgKyB1c2VyICsgJzonICsgcGFzcyAnQCcgKyBob3N0bmFtZSArICc6JyBwb3J0CiAgICByZXR1cm4gbSA/IHsKICAgICAgICBocmVmOiBtWzBdIHx8ICcnLAogICAgICAgIHByb3RvY29sOiBtWzFdIHx8ICcnLAogICAgICAgIGF1dGhvcml0eTogbVsyXSB8fCAnJywKICAgICAgICBob3N0OiBtWzNdIHx8ICcnLAogICAgICAgIGhvc3RuYW1lOiBtWzRdIHx8ICcnLAogICAgICAgIHBvcnQ6IG1bNV0gfHwgJycsCiAgICAgICAgcGF0aG5hbWU6IG1bNl0gfHwgJycsCiAgICAgICAgc2VhcmNoOiBtWzddIHx8ICcnLAogICAgICAgIGhhc2g6IG1bOF0gfHwgJycKICAgIH0gOiBudWxsOwp9CgpmdW5jdGlvbiByZXNvbHZlVXJsKGJhc2UsIGhyZWYpIHsKICAgIC8vIFJGQyAzOTg2CgogICAgZnVuY3Rpb24gcmVtb3ZlRG90U2VnbWVudHMoaW5wdXQpIHsKICAgICAgICB2YXIgb3V0cHV0ID0gW107CiAgICAgICAgaW5wdXQucmVwbGFjZSgvXihcLlwuPyhcL3wkKSkrLywgJycpLnJlcGxhY2UoL1wvKFwuKFwvfCQpKSsvZywgJy8nKS5yZXBsYWNlKC9cL1wuXC4kLywgJy8uLi8nKS5yZXBsYWNlKC9cLz9bXlwvXSovZywgZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgaWYgKHAgPT09ICcvLi4nKSB7CiAgICAgICAgICAgICAgICBvdXRwdXQucG9wKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChwKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBvdXRwdXQuam9pbignJykucmVwbGFjZSgvXlwvLywgaW5wdXQuY2hhckF0KDApID09PSAnLycgPyAnLycgOiAnJyk7CiAgICB9CgogICAgaHJlZiA9IHBhcnNlVVJJKGhyZWYgfHwgJycpOwogICAgYmFzZSA9IHBhcnNlVVJJKGJhc2UgfHwgJycpOwoKICAgIHJldHVybiAhaHJlZiB8fCAhYmFzZSA/IG51bGwgOiAoaHJlZi5wcm90b2NvbCB8fCBiYXNlLnByb3RvY29sKSArIChocmVmLnByb3RvY29sIHx8IGhyZWYuYXV0aG9yaXR5ID8gaHJlZi5hdXRob3JpdHkgOiBiYXNlLmF1dGhvcml0eSkgKyByZW1vdmVEb3RTZWdtZW50cyhocmVmLnByb3RvY29sIHx8IGhyZWYuYXV0aG9yaXR5IHx8IGhyZWYucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycgPyBocmVmLnBhdGhuYW1lIDogaHJlZi5wYXRobmFtZSA/IChiYXNlLmF1dGhvcml0eSAmJiAhYmFzZS5wYXRobmFtZSA/ICcvJyA6ICcnKSArIGJhc2UucGF0aG5hbWUuc2xpY2UoMCwgYmFzZS5wYXRobmFtZS5sYXN0SW5kZXhPZignLycpICsgMSkgKyBocmVmLnBhdGhuYW1lIDogYmFzZS5wYXRobmFtZSkgKyAoaHJlZi5wcm90b2NvbCB8fCBocmVmLmF1dGhvcml0eSB8fCBocmVmLnBhdGhuYW1lID8gaHJlZi5zZWFyY2ggOiBocmVmLnNlYXJjaCB8fCBiYXNlLnNlYXJjaCkgKyBocmVmLmhhc2g7Cn0KCmZ1bmN0aW9uIGdldERvY3VtZW50VXJpKHVyaSkgewogICAgcmV0dXJuIHVyaS5zcGxpdCgnIycpWzBdOwp9CgpmdW5jdGlvbiBub3JtU2NoZW1hKHNjaGVtYSwgYmFzZVVyaSkgewogICAgaWYgKHNjaGVtYSAmJiAodHlwZW9mIHNjaGVtYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShzY2hlbWEpKSA9PT0gIm9iamVjdCIpIHsKICAgICAgICBpZiAoYmFzZVVyaSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGJhc2VVcmkgPSBzY2hlbWEuaWQ7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2NoZW1hLmlkID09PSAic3RyaW5nIikgewogICAgICAgICAgICBiYXNlVXJpID0gcmVzb2x2ZVVybChiYXNlVXJpLCBzY2hlbWEuaWQpOwogICAgICAgICAgICBzY2hlbWEuaWQgPSBiYXNlVXJpOwogICAgICAgIH0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzY2hlbWEpKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NoZW1hLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBub3JtU2NoZW1hKHNjaGVtYVtpXSwgYmFzZVVyaSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodHlwZW9mIHNjaGVtYVsnJHJlZiddID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgICAgc2NoZW1hWyckcmVmJ10gPSByZXNvbHZlVXJsKGJhc2VVcmksIHNjaGVtYVsnJHJlZiddKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc2NoZW1hKSB7CiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAiZW51bSIpIHsKICAgICAgICAgICAgICAgICAgICBub3JtU2NoZW1hKHNjaGVtYVtrZXldLCBiYXNlVXJpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKZnVuY3Rpb24gZGVmYXVsdEVycm9yUmVwb3J0ZXIobGFuZ3VhZ2UpIHsKICAgIGxhbmd1YWdlID0gbGFuZ3VhZ2UgfHwgJ2VuJzsKCiAgICB2YXIgZXJyb3JNZXNzYWdlcyA9IGxhbmd1YWdlc1tsYW5ndWFnZV07CgogICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHZhciBtZXNzYWdlVGVtcGxhdGUgPSBlcnJvck1lc3NhZ2VzW2Vycm9yLmNvZGVdIHx8IEVycm9yTWVzc2FnZXNEZWZhdWx0W2Vycm9yLmNvZGVdOwogICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZVRlbXBsYXRlICE9PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXR1cm4gIlVua25vd24gZXJyb3IgY29kZSAiICsgZXJyb3IuY29kZSArICI6ICIgKyAoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkoZXJyb3IubWVzc2FnZVBhcmFtcyk7CiAgICAgICAgfQogICAgICAgIHZhciBtZXNzYWdlUGFyYW1zID0gZXJyb3IucGFyYW1zOwogICAgICAgIC8vIEFkYXB0ZWQgZnJvbSBDcm9ja2ZvcmQncyBzdXBwbGFudCgpCiAgICAgICAgcmV0dXJuIG1lc3NhZ2VUZW1wbGF0ZS5yZXBsYWNlKC9ceyhbXnt9XSopXH0vZywgZnVuY3Rpb24gKHdob2xlLCB2YXJOYW1lKSB7CiAgICAgICAgICAgIHZhciBzdWJWYWx1ZSA9IG1lc3NhZ2VQYXJhbXNbdmFyTmFtZV07CiAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygc3ViVmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBzdWJWYWx1ZSA9PT0gJ251bWJlcicgPyBzdWJWYWx1ZSA6IHdob2xlOwogICAgICAgIH0pOwogICAgfTsKfQoKdmFyIEVycm9yQ29kZXMgPSB7CiAgICBJTlZBTElEX1RZUEU6IDAsCiAgICBFTlVNX01JU01BVENIOiAxLAogICAgQU5ZX09GX01JU1NJTkc6IDEwLAogICAgT05FX09GX01JU1NJTkc6IDExLAogICAgT05FX09GX01VTFRJUExFOiAxMiwKICAgIE5PVF9QQVNTRUQ6IDEzLAogICAgLy8gTnVtZXJpYyBlcnJvcnMKICAgIE5VTUJFUl9NVUxUSVBMRV9PRjogMTAwLAogICAgTlVNQkVSX01JTklNVU06IDEwMSwKICAgIE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRTogMTAyLAogICAgTlVNQkVSX01BWElNVU06IDEwMywKICAgIE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRTogMTA0LAogICAgTlVNQkVSX05PVF9BX05VTUJFUjogMTA1LAogICAgLy8gU3RyaW5nIGVycm9ycwogICAgU1RSSU5HX0xFTkdUSF9TSE9SVDogMjAwLAogICAgU1RSSU5HX0xFTkdUSF9MT05HOiAyMDEsCiAgICBTVFJJTkdfUEFUVEVSTjogMjAyLAogICAgLy8gT2JqZWN0IGVycm9ycwogICAgT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTTogMzAwLAogICAgT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTogMzAxLAogICAgT0JKRUNUX1JFUVVJUkVEOiAzMDIsCiAgICBPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOiAzMDMsCiAgICBPQkpFQ1RfREVQRU5ERU5DWV9LRVk6IDMwNCwKICAgIC8vIEFycmF5IGVycm9ycwogICAgQVJSQVlfTEVOR1RIX1NIT1JUOiA0MDAsCiAgICBBUlJBWV9MRU5HVEhfTE9ORzogNDAxLAogICAgQVJSQVlfVU5JUVVFOiA0MDIsCiAgICBBUlJBWV9BRERJVElPTkFMX0lURU1TOiA0MDMsCiAgICAvLyBDdXN0b20vdXNlci1kZWZpbmVkIGVycm9ycwogICAgRk9STUFUX0NVU1RPTTogNTAwLAogICAgS0VZV09SRF9DVVNUT006IDUwMSwKICAgIC8vIFNjaGVtYSBzdHJ1Y3R1cmUKICAgIENJUkNVTEFSX1JFRkVSRU5DRTogNjAwLAogICAgLy8gTm9uLXN0YW5kYXJkIHZhbGlkYXRpb24gb3B0aW9ucwogICAgVU5LTk9XTl9QUk9QRVJUWTogMTAwMAp9Owp2YXIgRXJyb3JDb2RlTG9va3VwID0ge307CmZvciAodmFyIGtleSBpbiBFcnJvckNvZGVzKSB7CiAgICBFcnJvckNvZGVMb29rdXBbRXJyb3JDb2Rlc1trZXldXSA9IGtleTsKfQp2YXIgRXJyb3JNZXNzYWdlc0RlZmF1bHQgPSB7CiAgICBJTlZBTElEX1RZUEU6ICJJbnZhbGlkIHR5cGU6IHt0eXBlfSAoZXhwZWN0ZWQge2V4cGVjdGVkfSkiLAogICAgRU5VTV9NSVNNQVRDSDogIk5vIGVudW0gbWF0Y2ggZm9yOiB7dmFsdWV9IiwKICAgIEFOWV9PRl9NSVNTSU5HOiAiRGF0YSBkb2VzIG5vdCBtYXRjaCBhbnkgc2NoZW1hcyBmcm9tIFwiYW55T2ZcIiIsCiAgICBPTkVfT0ZfTUlTU0lORzogIkRhdGEgZG9lcyBub3QgbWF0Y2ggYW55IHNjaGVtYXMgZnJvbSBcIm9uZU9mXCIiLAogICAgT05FX09GX01VTFRJUExFOiAiRGF0YSBpcyB2YWxpZCBhZ2FpbnN0IG1vcmUgdGhhbiBvbmUgc2NoZW1hIGZyb20gXCJvbmVPZlwiOiBpbmRpY2VzIHtpbmRleDF9IGFuZCB7aW5kZXgyfSIsCiAgICBOT1RfUEFTU0VEOiAiRGF0YSBtYXRjaGVzIHNjaGVtYSBmcm9tIFwibm90XCIiLAogICAgLy8gTnVtZXJpYyBlcnJvcnMKICAgIE5VTUJFUl9NVUxUSVBMRV9PRjogIlZhbHVlIHt2YWx1ZX0gaXMgbm90IGEgbXVsdGlwbGUgb2Yge211bHRpcGxlT2Z9IiwKICAgIE5VTUJFUl9NSU5JTVVNOiAiVmFsdWUge3ZhbHVlfSBpcyBsZXNzIHRoYW4gbWluaW11bSB7bWluaW11bX0iLAogICAgTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOiAiVmFsdWUge3ZhbHVlfSBpcyBlcXVhbCB0byBleGNsdXNpdmUgbWluaW11bSB7bWluaW11bX0iLAogICAgTlVNQkVSX01BWElNVU06ICJWYWx1ZSB7dmFsdWV9IGlzIGdyZWF0ZXIgdGhhbiBtYXhpbXVtIHttYXhpbXVtfSIsCiAgICBOVU1CRVJfTUFYSU1VTV9FWENMVVNJVkU6ICJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtYXhpbXVtIHttYXhpbXVtfSIsCiAgICBOVU1CRVJfTk9UX0FfTlVNQkVSOiAiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSB2YWxpZCBudW1iZXIiLAogICAgLy8gU3RyaW5nIGVycm9ycwogICAgU1RSSU5HX0xFTkdUSF9TSE9SVDogIlN0cmluZyBpcyB0b28gc2hvcnQgKHtsZW5ndGh9IGNoYXJzKSwgbWluaW11bSB7bWluaW11bX0iLAogICAgU1RSSU5HX0xFTkdUSF9MT05HOiAiU3RyaW5nIGlzIHRvbyBsb25nICh7bGVuZ3RofSBjaGFycyksIG1heGltdW0ge21heGltdW19IiwKICAgIFNUUklOR19QQVRURVJOOiAiU3RyaW5nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm46IHtwYXR0ZXJufSIsCiAgICAvLyBPYmplY3QgZXJyb3JzCiAgICBPQkpFQ1RfUFJPUEVSVElFU19NSU5JTVVNOiAiVG9vIGZldyBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1pbmltdW0ge21pbmltdW19IiwKICAgIE9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU06ICJUb28gbWFueSBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1heGltdW0ge21heGltdW19IiwKICAgIE9CSkVDVF9SRVFVSVJFRDogIk1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6IHtrZXl9IiwKICAgIE9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVM6ICJBZGRpdGlvbmFsIHByb3BlcnRpZXMgbm90IGFsbG93ZWQiLAogICAgT0JKRUNUX0RFUEVOREVOQ1lfS0VZOiAiRGVwZW5kZW5jeSBmYWlsZWQgLSBrZXkgbXVzdCBleGlzdDoge21pc3Npbmd9IChkdWUgdG8ga2V5OiB7a2V5fSkiLAogICAgLy8gQXJyYXkgZXJyb3JzCiAgICBBUlJBWV9MRU5HVEhfU0hPUlQ6ICJBcnJheSBpcyB0b28gc2hvcnQgKHtsZW5ndGh9KSwgbWluaW11bSB7bWluaW11bX0iLAogICAgQVJSQVlfTEVOR1RIX0xPTkc6ICJBcnJheSBpcyB0b28gbG9uZyAoe2xlbmd0aH0pLCBtYXhpbXVtIHttYXhpbXVtfSIsCiAgICBBUlJBWV9VTklRVUU6ICJBcnJheSBpdGVtcyBhcmUgbm90IHVuaXF1ZSAoaW5kaWNlcyB7bWF0Y2gxfSBhbmQge21hdGNoMn0pIiwKICAgIEFSUkFZX0FERElUSU9OQUxfSVRFTVM6ICJBZGRpdGlvbmFsIGl0ZW1zIG5vdCBhbGxvd2VkIiwKICAgIC8vIEZvcm1hdCBlcnJvcnMKICAgIEZPUk1BVF9DVVNUT006ICJGb3JtYXQgdmFsaWRhdGlvbiBmYWlsZWQgKHttZXNzYWdlfSkiLAogICAgS0VZV09SRF9DVVNUT006ICJLZXl3b3JkIGZhaWxlZDoge2tleX0gKHttZXNzYWdlfSkiLAogICAgLy8gU2NoZW1hIHN0cnVjdHVyZQogICAgQ0lSQ1VMQVJfUkVGRVJFTkNFOiAiQ2lyY3VsYXIgJHJlZnM6IHt1cmxzfSIsCiAgICAvLyBOb24tc3RhbmRhcmQgdmFsaWRhdGlvbiBvcHRpb25zCiAgICBVTktOT1dOX1BST1BFUlRZOiAiVW5rbm93biBwcm9wZXJ0eSAobm90IGluIHNjaGVtYSkiCn07CgpmdW5jdGlvbiBWYWxpZGF0aW9uRXJyb3IoY29kZSwgcGFyYW1zLCBkYXRhUGF0aCwgc2NoZW1hUGF0aCwgc3ViRXJyb3JzKSB7CiAgICBFcnJvci5jYWxsKHRoaXMpOwogICAgaWYgKGNvZGUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiTm8gZXJyb3IgY29kZSBzdXBwbGllZDogIiArIHNjaGVtYVBhdGgpOwogICAgfQogICAgdGhpcy5tZXNzYWdlID0gJyc7CiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtczsKICAgIHRoaXMuY29kZSA9IGNvZGU7CiAgICB0aGlzLmRhdGFQYXRoID0gZGF0YVBhdGggfHwgIiI7CiAgICB0aGlzLnNjaGVtYVBhdGggPSBzY2hlbWFQYXRoIHx8ICIiOwogICAgdGhpcy5zdWJFcnJvcnMgPSBzdWJFcnJvcnMgfHwgbnVsbDsKCiAgICB2YXIgZXJyID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSk7CiAgICB0aGlzLnN0YWNrID0gZXJyLnN0YWNrIHx8IGVyci5zdGFja3RyYWNlOwogICAgaWYgKCF0aGlzLnN0YWNrKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICB0aGlzLnN0YWNrID0gZXJyLnN0YWNrIHx8IGVyci5zdGFja3RyYWNlOwogICAgICAgIH0KICAgIH0KfQoKVmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZSA9ICgwLCBfY3JlYXRlMi5kZWZhdWx0KShFcnJvci5wcm90b3R5cGUpOwpWYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmFsaWRhdGlvbkVycm9yOwpWYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnVmFsaWRhdGlvbkVycm9yJzsKClZhbGlkYXRpb25FcnJvci5wcm90b3R5cGUucHJlZml4V2l0aCA9IGZ1bmN0aW9uIChkYXRhUHJlZml4LCBzY2hlbWFQcmVmaXgpIHsKICAgIGlmIChkYXRhUHJlZml4ICE9PSBudWxsKSB7CiAgICAgICAgZGF0YVByZWZpeCA9IGRhdGFQcmVmaXgucmVwbGFjZSgvfi9nLCAifjAiKS5yZXBsYWNlKC9cLy9nLCAifjEiKTsKICAgICAgICB0aGlzLmRhdGFQYXRoID0gIi8iICsgZGF0YVByZWZpeCArIHRoaXMuZGF0YVBhdGg7CiAgICB9CiAgICBpZiAoc2NoZW1hUHJlZml4ICE9PSBudWxsKSB7CiAgICAgICAgc2NoZW1hUHJlZml4ID0gc2NoZW1hUHJlZml4LnJlcGxhY2UoL34vZywgIn4wIikucmVwbGFjZSgvXC8vZywgIn4xIik7CiAgICAgICAgdGhpcy5zY2hlbWFQYXRoID0gIi8iICsgc2NoZW1hUHJlZml4ICsgdGhpcy5zY2hlbWFQYXRoOwogICAgfQogICAgaWYgKHRoaXMuc3ViRXJyb3JzICE9PSBudWxsKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YkVycm9ycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0aGlzLnN1YkVycm9yc1tpXS5wcmVmaXhXaXRoKGRhdGFQcmVmaXgsIHNjaGVtYVByZWZpeCk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXM7Cn07CgpmdW5jdGlvbiBpc1RydXN0ZWRVcmwoYmFzZVVybCwgdGVzdFVybCkgewogICAgaWYgKHRlc3RVcmwuc3Vic3RyaW5nKDAsIGJhc2VVcmwubGVuZ3RoKSA9PT0gYmFzZVVybCkgewogICAgICAgIHZhciByZW1haW5kZXIgPSB0ZXN0VXJsLnN1YnN0cmluZyhiYXNlVXJsLmxlbmd0aCk7CiAgICAgICAgaWYgKHRlc3RVcmwubGVuZ3RoID4gMCAmJiB0ZXN0VXJsLmNoYXJBdChiYXNlVXJsLmxlbmd0aCAtIDEpID09PSAiLyIgfHwgcmVtYWluZGVyLmNoYXJBdCgwKSA9PT0gIiMiIHx8IHJlbWFpbmRlci5jaGFyQXQoMCkgPT09ICI/IikgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gZmFsc2U7Cn0KCnZhciBsYW5ndWFnZXMgPSB7fTsKCmZ1bmN0aW9uIGNyZWF0ZUFwaShsYW5ndWFnZSkgewogICAgdmFyIGdsb2JhbENvbnRleHQgPSBuZXcgVmFsaWRhdG9yQ29udGV4dCgpOwogICAgdmFyIGN1cnJlbnRMYW5ndWFnZTsKICAgIHZhciBjdXN0b21FcnJvclJlcG9ydGVyOwogICAgdmFyIGFwaSA9IHsKICAgICAgICBzZXRFcnJvclJlcG9ydGVyOiBmdW5jdGlvbiBzZXRFcnJvclJlcG9ydGVyKHJlcG9ydGVyKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVwb3J0ZXIgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sYW5ndWFnZShyZXBvcnRlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY3VzdG9tRXJyb3JSZXBvcnRlciA9IHJlcG9ydGVyOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIGFkZEZvcm1hdDogZnVuY3Rpb24gYWRkRm9ybWF0KCkgewogICAgICAgICAgICBnbG9iYWxDb250ZXh0LmFkZEZvcm1hdC5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpOwogICAgICAgIH0sCiAgICAgICAgbGFuZ3VhZ2U6IGZ1bmN0aW9uIGxhbmd1YWdlKGNvZGUpIHsKICAgICAgICAgICAgaWYgKCFjb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudExhbmd1YWdlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghbGFuZ3VhZ2VzW2NvZGVdKSB7CiAgICAgICAgICAgICAgICBjb2RlID0gY29kZS5zcGxpdCgnLScpWzBdOyAvLyBmYWxsIGJhY2sgdG8gYmFzZSBsYW5ndWFnZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChsYW5ndWFnZXNbY29kZV0pIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRMYW5ndWFnZSA9IGNvZGU7CiAgICAgICAgICAgICAgICByZXR1cm4gY29kZTsgLy8gc28geW91IGNhbiB0ZWxsIGlmIGZhbGwtYmFjayBoYXMgaGFwcGVuZWQKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBhZGRMYW5ndWFnZTogZnVuY3Rpb24gYWRkTGFuZ3VhZ2UoY29kZSwgbWVzc2FnZU1hcCkgewogICAgICAgICAgICB2YXIga2V5OwogICAgICAgICAgICBmb3IgKGtleSBpbiBFcnJvckNvZGVzKSB7CiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZU1hcFtrZXldICYmICFtZXNzYWdlTWFwW0Vycm9yQ29kZXNba2V5XV0pIHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTWFwW0Vycm9yQ29kZXNba2V5XV0gPSBtZXNzYWdlTWFwW2tleV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHJvb3RDb2RlID0gY29kZS5zcGxpdCgnLScpWzBdOwogICAgICAgICAgICBpZiAoIWxhbmd1YWdlc1tyb290Q29kZV0pIHsKICAgICAgICAgICAgICAgIC8vIHVzZSBmb3IgYmFzZSBsYW5ndWFnZSBpZiBub3QgeWV0IGRlZmluZWQKICAgICAgICAgICAgICAgIGxhbmd1YWdlc1tjb2RlXSA9IG1lc3NhZ2VNYXA7CiAgICAgICAgICAgICAgICBsYW5ndWFnZXNbcm9vdENvZGVdID0gbWVzc2FnZU1hcDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxhbmd1YWdlc1tjb2RlXSA9ICgwLCBfY3JlYXRlMi5kZWZhdWx0KShsYW5ndWFnZXNbcm9vdENvZGVdKTsKICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIG1lc3NhZ2VNYXApIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxhbmd1YWdlc1tyb290Q29kZV1ba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VzW3Jvb3RDb2RlXVtrZXldID0gbWVzc2FnZU1hcFtrZXldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZXNbY29kZV1ba2V5XSA9IG1lc3NhZ2VNYXBba2V5XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9LAogICAgICAgIGZyZXNoQXBpOiBmdW5jdGlvbiBmcmVzaEFwaShsYW5ndWFnZSkgewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gY3JlYXRlQXBpKCk7CiAgICAgICAgICAgIGlmIChsYW5ndWFnZSkgewogICAgICAgICAgICAgICAgcmVzdWx0Lmxhbmd1YWdlKGxhbmd1YWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGEsIHNjaGVtYSwgY2hlY2tSZWN1cnNpdmUsIGJhblVua25vd25Qcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgIHZhciBkZWYgPSBkZWZhdWx0RXJyb3JSZXBvcnRlcihjdXJyZW50TGFuZ3VhZ2UpOwogICAgICAgICAgICB2YXIgZXJyb3JSZXBvcnRlciA9IGN1c3RvbUVycm9yUmVwb3J0ZXIgPyBmdW5jdGlvbiAoZXJyb3IsIGRhdGEsIHNjaGVtYSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbUVycm9yUmVwb3J0ZXIoZXJyb3IsIGRhdGEsIHNjaGVtYSkgfHwgZGVmKGVycm9yLCBkYXRhLCBzY2hlbWEpOwogICAgICAgICAgICB9IDogZGVmOwogICAgICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBWYWxpZGF0b3JDb250ZXh0KGdsb2JhbENvbnRleHQsIGZhbHNlLCBlcnJvclJlcG9ydGVyLCBjaGVja1JlY3Vyc2l2ZSwgYmFuVW5rbm93blByb3BlcnRpZXMpOwogICAgICAgICAgICBpZiAodHlwZW9mIHNjaGVtYSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIHNjaGVtYSA9IHsgIiRyZWYiOiBzY2hlbWEgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb250ZXh0LmFkZFNjaGVtYSgiIiwgc2NoZW1hKTsKICAgICAgICAgICAgdmFyIGVycm9yID0gY29udGV4dC52YWxpZGF0ZUFsbChkYXRhLCBzY2hlbWEsIG51bGwsIG51bGwsICIiKTsKICAgICAgICAgICAgaWYgKCFlcnJvciAmJiBiYW5Vbmtub3duUHJvcGVydGllcykgewogICAgICAgICAgICAgICAgZXJyb3IgPSBjb250ZXh0LmJhblVua25vd25Qcm9wZXJ0aWVzKGRhdGEsIHNjaGVtYSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yOwogICAgICAgICAgICB0aGlzLm1pc3NpbmcgPSBjb250ZXh0Lm1pc3Npbmc7CiAgICAgICAgICAgIHRoaXMudmFsaWQgPSBlcnJvciA9PT0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWQ7CiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0ZVJlc3VsdDogZnVuY3Rpb24gdmFsaWRhdGVSZXN1bHQoKSB7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZS5hcHBseShyZXN1bHQsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSwKICAgICAgICB2YWxpZGF0ZU11bHRpcGxlOiBmdW5jdGlvbiB2YWxpZGF0ZU11bHRpcGxlKGRhdGEsIHNjaGVtYSwgY2hlY2tSZWN1cnNpdmUsIGJhblVua25vd25Qcm9wZXJ0aWVzKSB7CiAgICAgICAgICAgIHZhciBkZWYgPSBkZWZhdWx0RXJyb3JSZXBvcnRlcihjdXJyZW50TGFuZ3VhZ2UpOwogICAgICAgICAgICB2YXIgZXJyb3JSZXBvcnRlciA9IGN1c3RvbUVycm9yUmVwb3J0ZXIgPyBmdW5jdGlvbiAoZXJyb3IsIGRhdGEsIHNjaGVtYSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbUVycm9yUmVwb3J0ZXIoZXJyb3IsIGRhdGEsIHNjaGVtYSkgfHwgZGVmKGVycm9yLCBkYXRhLCBzY2hlbWEpOwogICAgICAgICAgICB9IDogZGVmOwogICAgICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBWYWxpZGF0b3JDb250ZXh0KGdsb2JhbENvbnRleHQsIHRydWUsIGVycm9yUmVwb3J0ZXIsIGNoZWNrUmVjdXJzaXZlLCBiYW5Vbmtub3duUHJvcGVydGllcyk7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2NoZW1hID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgICAgc2NoZW1hID0geyAiJHJlZiI6IHNjaGVtYSB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnRleHQuYWRkU2NoZW1hKCIiLCBzY2hlbWEpOwogICAgICAgICAgICBjb250ZXh0LnZhbGlkYXRlQWxsKGRhdGEsIHNjaGVtYSwgbnVsbCwgbnVsbCwgIiIpOwogICAgICAgICAgICBpZiAoYmFuVW5rbm93blByb3BlcnRpZXMpIHsKICAgICAgICAgICAgICAgIGNvbnRleHQuYmFuVW5rbm93blByb3BlcnRpZXMoZGF0YSwgc2NoZW1hKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307CiAgICAgICAgICAgIHJlc3VsdC5lcnJvcnMgPSBjb250ZXh0LmVycm9yczsKICAgICAgICAgICAgcmVzdWx0Lm1pc3NpbmcgPSBjb250ZXh0Lm1pc3Npbmc7CiAgICAgICAgICAgIHJlc3VsdC52YWxpZCA9IHJlc3VsdC5lcnJvcnMubGVuZ3RoID09PSAwOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0sCiAgICAgICAgYWRkU2NoZW1hOiBmdW5jdGlvbiBhZGRTY2hlbWEoKSB7CiAgICAgICAgICAgIHJldHVybiBnbG9iYWxDb250ZXh0LmFkZFNjaGVtYS5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpOwogICAgICAgIH0sCiAgICAgICAgZ2V0U2NoZW1hOiBmdW5jdGlvbiBnZXRTY2hlbWEoKSB7CiAgICAgICAgICAgIHJldHVybiBnbG9iYWxDb250ZXh0LmdldFNjaGVtYS5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpOwogICAgICAgIH0sCiAgICAgICAgZ2V0U2NoZW1hTWFwOiBmdW5jdGlvbiBnZXRTY2hlbWFNYXAoKSB7CiAgICAgICAgICAgIHJldHVybiBnbG9iYWxDb250ZXh0LmdldFNjaGVtYU1hcC5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpOwogICAgICAgIH0sCiAgICAgICAgZ2V0U2NoZW1hVXJpczogZnVuY3Rpb24gZ2V0U2NoZW1hVXJpcygpIHsKICAgICAgICAgICAgcmV0dXJuIGdsb2JhbENvbnRleHQuZ2V0U2NoZW1hVXJpcy5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpOwogICAgICAgIH0sCiAgICAgICAgZ2V0TWlzc2luZ1VyaXM6IGZ1bmN0aW9uIGdldE1pc3NpbmdVcmlzKCkgewogICAgICAgICAgICByZXR1cm4gZ2xvYmFsQ29udGV4dC5nZXRNaXNzaW5nVXJpcy5hcHBseShnbG9iYWxDb250ZXh0LCBhcmd1bWVudHMpOwogICAgICAgIH0sCiAgICAgICAgZHJvcFNjaGVtYXM6IGZ1bmN0aW9uIGRyb3BTY2hlbWFzKCkgewogICAgICAgICAgICBnbG9iYWxDb250ZXh0LmRyb3BTY2hlbWFzLmFwcGx5KGdsb2JhbENvbnRleHQsIGFyZ3VtZW50cyk7CiAgICAgICAgfSwKICAgICAgICBkZWZpbmVLZXl3b3JkOiBmdW5jdGlvbiBkZWZpbmVLZXl3b3JkKCkgewogICAgICAgICAgICBnbG9iYWxDb250ZXh0LmRlZmluZUtleXdvcmQuYXBwbHkoZ2xvYmFsQ29udGV4dCwgYXJndW1lbnRzKTsKICAgICAgICB9LAogICAgICAgIGRlZmluZUVycm9yOiBmdW5jdGlvbiBkZWZpbmVFcnJvcihjb2RlTmFtZSwgY29kZU51bWJlciwgZGVmYXVsdE1lc3NhZ2UpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2RlTmFtZSAhPT0gJ3N0cmluZycgfHwgIS9eW0EtWl0rKF9bQS1aXSspKiQvLnRlc3QoY29kZU5hbWUpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvZGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nIGluIFVQUEVSX0NBU0VfV0lUSF9VTkRFUlNDT1JFUycpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2YgY29kZU51bWJlciAhPT0gJ251bWJlcicgfHwgY29kZU51bWJlciAlIDEgIT09IDAgfHwgY29kZU51bWJlciA8IDEwMDAwKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvZGUgbnVtYmVyIG11c3QgYmUgYW4gaW50ZWdlciA+IDEwMDAwJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiBFcnJvckNvZGVzW2NvZGVOYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgYWxyZWFkeSBkZWZpbmVkOiAnICsgY29kZU5hbWUgKyAnIGFzICcgKyBFcnJvckNvZGVzW2NvZGVOYW1lXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiBFcnJvckNvZGVMb29rdXBbY29kZU51bWJlcl0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGNvZGUgYWxyZWFkeSB1c2VkOiAnICsgRXJyb3JDb2RlTG9va3VwW2NvZGVOdW1iZXJdICsgJyBhcyAnICsgY29kZU51bWJlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRXJyb3JDb2Rlc1tjb2RlTmFtZV0gPSBjb2RlTnVtYmVyOwogICAgICAgICAgICBFcnJvckNvZGVMb29rdXBbY29kZU51bWJlcl0gPSBjb2RlTmFtZTsKICAgICAgICAgICAgRXJyb3JNZXNzYWdlc0RlZmF1bHRbY29kZU5hbWVdID0gRXJyb3JNZXNzYWdlc0RlZmF1bHRbY29kZU51bWJlcl0gPSBkZWZhdWx0TWVzc2FnZTsKICAgICAgICAgICAgZm9yICh2YXIgbGFuZ0NvZGUgaW4gbGFuZ3VhZ2VzKSB7CiAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2UgPSBsYW5ndWFnZXNbbGFuZ0NvZGVdOwogICAgICAgICAgICAgICAgaWYgKGxhbmd1YWdlW2NvZGVOYW1lXSkgewogICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlW2NvZGVOdW1iZXJdID0gbGFuZ3VhZ2VbY29kZU51bWJlcl0gfHwgbGFuZ3VhZ2VbY29kZU5hbWVdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgICAgICAgIGdsb2JhbENvbnRleHQucmVzZXQoKTsKICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7CiAgICAgICAgICAgIHRoaXMubWlzc2luZyA9IFtdOwogICAgICAgICAgICB0aGlzLnZhbGlkID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIG1pc3Npbmc6IFtdLAogICAgICAgIGVycm9yOiBudWxsLAogICAgICAgIHZhbGlkOiB0cnVlLAogICAgICAgIG5vcm1TY2hlbWE6IG5vcm1TY2hlbWEsCiAgICAgICAgcmVzb2x2ZVVybDogcmVzb2x2ZVVybCwKICAgICAgICBnZXREb2N1bWVudFVyaTogZ2V0RG9jdW1lbnRVcmksCiAgICAgICAgZXJyb3JDb2RlczogRXJyb3JDb2RlcwogICAgfTsKICAgIGFwaS5sYW5ndWFnZShsYW5ndWFnZSB8fCAnZW4nKTsKICAgIHJldHVybiBhcGk7Cn0KCi8vZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRvcigpIHsKdmFyIHR2NCA9IGNyZWF0ZUFwaSgpOwp0djQuYWRkTGFuZ3VhZ2UoJ2VuLWdiJywgRXJyb3JNZXNzYWdlc0RlZmF1bHQpOwoKLy9sZWdhY3kgcHJvcGVydHkKdHY0LnR2NCA9IHR2NDsKLy9yZXR1cm4gdHY0OwpleHBvcnRzLmRlZmF1bHQgPSB0djQ7Ci8vfQoKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5IjoyOTksImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvY3JlYXRlIjozMDEsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjozMDIsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvaXMtZnJvemVuIjozMDQsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6MzA1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvdHlwZW9mIjozMTV9XSw3NTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3N0cmluZ2lmeSA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeScpOwoKdmFyIF9zdHJpbmdpZnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RyaW5naWZ5KTsKCnZhciBfa2V5cyA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cycpOwoKdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOwoKZXhwb3J0cy5kaXZpZGVVUkwgPSBkaXZpZGVVUkw7CmV4cG9ydHMuZGl2aWRlRW1haWwgPSBkaXZpZGVFbWFpbDsKZXhwb3J0cy5lbXB0eU9iamVjdCA9IGVtcHR5T2JqZWN0OwpleHBvcnRzLmRlZXBDbG9uZSA9IGRlZXBDbG9uZTsKZXhwb3J0cy5nZXRVc2VyVVJMRnJvbUVtYWlsID0gZ2V0VXNlclVSTEZyb21FbWFpbDsKZXhwb3J0cy5nZXRVc2VyRW1haWxGcm9tVVJMID0gZ2V0VXNlckVtYWlsRnJvbVVSTDsKZXhwb3J0cy5jb252ZXJ0VG9Vc2VyVVJMID0gY29udmVydFRvVXNlclVSTDsKZXhwb3J0cy5pc0RhdGFPYmplY3RVUkwgPSBpc0RhdGFPYmplY3RVUkw7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCi8qKgogKiBTdXBwb3J0IG1vZHVsZSB3aXRoIHNvbWUgZnVuY3Rpb25zIHdpbGwgYmUgdXNlZnVsCiAqIEBtb2R1bGUgdXRpbHMKICovCgovKioKICogQHR5cGVkZWYgZGl2aWRlVVJMCiAqIEB0eXBlIE9iamVjdAogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTAogKi8KCi8qKgogKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkKICogQHBhcmFtICB7VVJMLlVSTH0gdXJsIC0gdXJsIGFkZHJlc3MKICogQHJldHVybiB7ZGl2aWRlVVJMfSB0aGUgcmVzdWx0IG9mIGRpdmlkZVVSTAogKi8KZnVuY3Rpb24gZGl2aWRlVVJMKHVybCkgewoKICBpZiAoIXVybCkgdGhyb3cgRXJyb3IoJ1VSTCBpcyBuZWVkZWQgdG8gc3BsaXQnKTsKCiAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKICB2YXIgcmUgPSAvKFthLXpBLVotXSopOlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsKICB2YXIgc3Vic3QgPSAnJDEsJDIsJDMnOwogIHZhciBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTsKCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gcHJvdG9jb2wsIHRoZSBkZWZhdWx0IHByb3RvY29sIHNldCBpcyBodHRwcwogIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7CiAgICBwYXJ0c1swXSA9ICdodHRwcyc7CiAgICBwYXJ0c1sxXSA9IHVybDsKICB9CgogIHZhciByZXN1bHQgPSB7CiAgICB0eXBlOiBwYXJ0c1swXSwKICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICBpZGVudGl0eTogcGFydHNbMl0KICB9OwoKICByZXR1cm4gcmVzdWx0Owp9CgpmdW5jdGlvbiBkaXZpZGVFbWFpbChlbWFpbCkgewogIHZhciBpbmRleE9mQXQgPSBlbWFpbC5pbmRleE9mKCdAJyk7CgogIHZhciByZXN1bHQgPSB7CiAgICB1c2VybmFtZTogZW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCksCiAgICBkb21haW46IGVtYWlsLnN1YnN0cmluZyhpbmRleE9mQXQgKyAxLCBlbWFpbC5sZW5ndGgpCiAgfTsKCiAgcmV0dXJuIHJlc3VsdDsKfQoKLyoqCiAqIENoZWNrIGlmIGFuIE9iamVjdCBpcyBlbXB0eQogKiBAcGFyYW0gIHtPYmplY3R9IG9iamVjdCBPYmplY3QgdG8gYmUgY2hlY2tlZAogKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICBzdGF0dXMgb2YgT2JqZWN0LCBlbXB0eSBvciBub3QgKHRydWV8ZmFsc2UpOwogKi8KZnVuY3Rpb24gZW1wdHlPYmplY3Qob2JqZWN0KSB7CiAgcmV0dXJuICgwLCBfa2V5czIuZGVmYXVsdCkob2JqZWN0KS5sZW5ndGggPiAwID8gZmFsc2UgOiB0cnVlOwp9CgovKioKICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZAogKiBAcmV0dXJuIHtPYmplY3R9CiAqLwpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7CiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShvYmopKTsKfQoKLyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBlbWFpbAogKiBAcGFyYW0gIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKi8KZnVuY3Rpb24gZ2V0VXNlclVSTEZyb21FbWFpbCh1c2VyRW1haWwpIHsKICB2YXIgaW5kZXhPZkF0ID0gdXNlckVtYWlsLmluZGV4T2YoJ0AnKTsKICByZXR1cm4gJ3VzZXI6Ly8nICsgdXNlckVtYWlsLnN1YnN0cmluZyhpbmRleE9mQXQgKyAxLCB1c2VyRW1haWwubGVuZ3RoKSArICcvJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoMCwgaW5kZXhPZkF0KTsKfQoKLyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgZW1haWwgdGhhdCBjb3JyZXNwb25kcyB0byBhIGdpdmVuIFVSTAogKiBAcGFyYW0gIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKiBAcmV0dXJuIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKi8KZnVuY3Rpb24gZ2V0VXNlckVtYWlsRnJvbVVSTCh1c2VyVVJMKSB7CiAgdmFyIHVybCA9IGRpdmlkZVVSTCh1c2VyVVJMKTsKICByZXR1cm4gdXJsLmlkZW50aXR5LnJlcGxhY2UoJy8nLCAnJykgKyAnQCcgKyB1cmwuZG9tYWluOyAvLyBpZGVudGl0eSBmaWVsZCBoYXMgJy9leGFtcGxlSUQnIGluc3RlYWQgb2YgJ2V4YW1wbGVJRCcKfQoKLyoqCiAqIENoZWNrIGlmIHRoZSB1c2VyIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgVVJMIGZvcm1hdCwgaWYgbm90LCBjb252ZXJ0IHRvIFVSTCBmb3JtYXQKICogQHBhcmFtICB7c3RyaW5nfSAgIGlkZW50aWZpZXIgIHVzZXIgaWRlbnRpZmllcgogKiBAcmV0dXJuIHtzdHJpbmd9ICAgdXNlclVSTCAgICB0aGUgdXNlciBVUkwKICovCmZ1bmN0aW9uIGNvbnZlcnRUb1VzZXJVUkwoaWRlbnRpZmllcikgewoKICAvLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0CiAgaWYgKGlkZW50aWZpZXIuc3Vic3RyaW5nKDAsIDcpID09PSAndXNlcjovLycpIHsKICAgIHZhciBkaXZpZGVkVVJMID0gZGl2aWRlVVJMKGlkZW50aWZpZXIpOwoKICAgIC8vY2hlY2sgaWYgdGhlIHVybCBpcyB3ZWxsIGZvcm1hdGVkCiAgICBpZiAoZGl2aWRlZFVSTC5kb21haW4gJiYgZGl2aWRlZFVSTC5pZGVudGl0eSkgewogICAgICByZXR1cm4gaWRlbnRpZmllcjsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93ICd1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0JzsKICAgIH0KCiAgICAvL2lmIG5vdCwgY29udmVydCB0aGUgdXNlciBlbWFpbCB0byBVUkwgZm9ybWF0CiAgfSBlbHNlIHsKICAgIHJldHVybiBnZXRVc2VyVVJMRnJvbUVtYWlsKGlkZW50aWZpZXIpOwogIH0KfQoKZnVuY3Rpb24gaXNEYXRhT2JqZWN0VVJMKHVybCkgewogIHZhciBzY2hlbWFzVG9JZ25vcmUgPSBbJ2RvbWFpbi1pZHAnLCAncnVudGltZScsICdkb21haW4nLCAnaHlwZXJ0eSddOwogIHZhciBzcGxpdFVSTCA9IHVybC5zcGxpdCgnOi8vJyk7CiAgdmFyIHVybFNjaGVtYSA9IHNwbGl0VVJMWzBdOwoKICByZXR1cm4gc2NoZW1hc1RvSWdub3JlLmluZGV4T2YodXJsU2NoZW1hKSA9PT0gLTE7Cn0KCn0seyJiYWJlbC1ydW50aW1lL2NvcmUtanMvanNvbi9zdHJpbmdpZnkiOjI5OSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIjozMDV9XX0se30sWzc1MV0pKDc1MSkKfSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPVJ1bnRpbWUuanMubWFw",
      "sourceCodeClassname": "Runtime",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 30001,
    "type": "Runtimes",
    "version": "0.1",
    "description": "Description of Runtime",
    "objectName": "Runtime",
    "configuration": {},
    "runtimeType": "browser",
    "hypertyCapabilities": {
      "mic": true,
      "camera": true,
      "sensor": false,
      "webrtc": true,
      "ortc": true
    },
    "protocolCapabilities": {
      "http": true,
      "https": true,
      "ws": true,
      "wss": true,
      "coap": false,
      "datachannel": false
    },
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}
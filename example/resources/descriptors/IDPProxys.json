{
  "IDPProxy": {
    "cguid": 44432065498481200,
    "version": "1.0",
    "type": "IDPProxy",
    "description": "This is a idp-proxy",
    "objectName": "default",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "configuration": {},
    "constraints": "",
    "hypertyCapabilities": "",
    "protocolCapabilities": "",
    "policies": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "sourcePackageURL": "/sourcePackage",
    "sourcePackage": {
      "encoding": "UTF8",
      "sourceCodeClassname": "defaultProxy",
      "sourceCode": "alert('hello world from a proxy!')"
    }
  },
  "IdpProxyStub": {
    "sourcePackage": {
      "sourceCode": "LyoqCiogSWRlbnRpdHkgUHJvdmlkZXIgUHJveHkgUHJvdG9jb2wgU3R1YgoqLwpjbGFzcyBJZHBQcm94eVN0dWIgewoKICAvKioKICAqIENvbnN0cnVjdG9yIG9mIHRoZSBJZHBQcm94eSBTdHViCiAgKiBUaGUgY29uc3RydWN0b3IgYWRkIGEgbGlzdGVuZXIgaW4gdGhlIG1lc3NhZ2VCdXMgcmVjZWl2ZWQgYW5kIHN0YXJ0IGEgd2ViIHdvcmtlciB3aXRoIHRoZSBpZHBQcm94eSByZWNlaXZlZAogICoKICAqIEBwYXJhbSAge21lc3NhZ2VCdXN9ICAgICAgbWVzc2FnZUJ1cwogICogQHBhcmFtICB7ZG9tYWlufSAgICAgICAgICBEb21haW4KICAqIEBwYXJhbSAge2lkcFByb3h5fSAgICBpZGVudGl0eSBQcm92aWRlciBQcm94eSBqYXZhc2NyaXB0IGZpbGUKICAqLwogIGNvbnN0cnVjdG9yKG1lc3NhZ2VCdXMsIGRvbWFpbiwgaWRwUHJveHkpIHsKICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5tZXNzYWdlQnVzID0gbWVzc2FnZUJ1czsKICAgIF90aGlzLmRvbWFpbiA9IGRvbWFpbjsKICAgIF90aGlzLmlkcFByb3h5ID0gaWRwUHJveHk7CgogICAgX3RoaXMubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcignZG9tYWluOi8vJyArIGlkcFByb3h5LCBmdW5jdGlvbihtc2cpIHsKICAgICAgX3RoaXMucmVxdWVzdFRvSWRwKG1zZyk7CiAgICB9KTsKCiAgICAvL3N0YXJ0IHRoZSB3ZWIgd29ya2VyIHdpdGggdGhlIGlkcFByb3h5CiAgICBfdGhpcy5zdGFydChpZHBQcm94eSk7CiAgfQoKICAvKioKICAqIEZ1bmN0aW9uIHRoYXQgc2VlIHRoZSBpbnRlbmRlZCBtZXRob2QgaW4gdGhlIG1lc3NhZ2UgcmVjZWl2ZWQgYW5kIGNhbGwgdGhlIHJlc3BlY3RpdmUgZnVuY3Rpb24KICAqCiAgKiBAcGFyYW0ge21lc3NhZ2V9ICBtZXNzYWdlIHJlY2VpdmVkIGluIHRoZSBtZXNzYWdlQnVzCiAgKi8KICByZXF1ZXN0VG9JZHAobXNnKSB7CiAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgbGV0IHBhcmFtcyA9IG1zZy5ib2R5LnBhcmFtczsKICAgIHN3aXRjaCAobXNnLmJvZHkubWV0aG9kKSB7CiAgICAgIGNhc2UgJ2xvZ2luJzoKICAgICAgICBfdGhpcy5sb2dpbigpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpO30pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdnZW5lcmF0ZUFzc2VydGlvbic6CiAgICAgICAgX3RoaXMuZ2VuZXJhdGUocGFyYW1zKS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7IF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTt9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAndmFsaWRhdGVBc3NlcnRpb24nOgogICAgICAgIF90aGlzLnZhbGlkYXRlKHBhcmFtcykudGhlbihmdW5jdGlvbih2YWx1ZSkgeyBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSk7fSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICAvKioKICAqIFN0YXJ0cyBhIHdlYiB3b3JrZXIgd2l0aCB0aGUgaWRwUHJveHkgamF2YXNjaXB0IGZpbGUKICAqCiAgKiBAcGFyYW0gIHtpZHBQcm94eX0gICAgaWRlbnRpdHkgUHJvdmlkZXIgUHJveHkgamF2YXNjcmlwdCBmaWxlCiAgKi8KICBzdGFydChpZHBQcm94eSkgewogICAgbGV0IF90aGlzID0gdGhpczsKICAgIGlmICh3aW5kb3cuV29ya2VyKSB7IC8vY2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIHdvcmtlciBBUEkKCiAgICAgIGxldCBteVdvcmtlciA9IG5ldyBXb3JrZXIoJy9zcmMvaWRlbnRpdHkvSWRwUHJveHkuanMnKTsKICAgICAgX3RoaXMubXlXb3JrZXIgPSBteVdvcmtlcjsKICAgICAgX3RoaXMubXlXb3JrZXIucG9zdE1lc3NhZ2UoWydjcmVhdGUnLCdJZHBQcm94eSddKTsKCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gJ2Vycm9yJzsKICAgIH0KICB9CgogIC8qKgogICogZnVuY3Rpb24gdGhhdCBtYWtlcyBhIHJlcXVlc3QgZm9yIGFuIGlkZW50aXR5IGFzc2VydGlvbiB0byB0aGUgd2ViIHdvcmtlciBydW5uaW5nIHRoZSBpZHBQcm94eQogICoKICAqIEBwYXJhbSAge3BhcmFtc30gIHBhcmFtZXRlcnMgcmVjZWl2ZWQgaW4gdGhlIG1lc3NhZ2UuIEluIHRoaXMgY2FzZSBjb250YWlucyB0aGUgY29udGVudCwgb3JpZ2luIGFuZCB1c2VybmFtZWhpbnQKICAqIEByZXR1cm4ge1Byb21pc2V9IHJldHVybnMgYSBwcm9taXNlIHdpdGggYW4gaWRlbnRpdHkgYXNzZXJ0aW9uIGdlbmVyYXRlIGJ5IHRoZSBpZHBQcm94eQogICovCiAgZ2VuZXJhdGUocGFyYW1zKSB7CiAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCkgewogICAgICBpZiAod2luZG93LldvcmtlcikgeyAvL2NoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoZSB3b3JrZXIgQVBJCgogICAgICAgIF90aGlzLm15V29ya2VyLnBvc3RNZXNzYWdlKFsnZ2VuZXJhdGUnLCBwYXJhbXNdKTsKCiAgICAgICAgX3RoaXMubXlXb3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgcmVzb2x2ZShlLmRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB3b3JrZXInLCBlLmRhdGEpOwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVqZWN0KCdlcnJvcicpOwogICAgICB9CiAgICB9KTsKICB9CgogIC8qKgogICogZnVuY3Rpb24gdGhhdCBtYWtlcyBhIHJlcXVlc3QgdG8gdmFsaWRhdGUgYW4gaWRlbnRpdHkgYXNzZXJ0aW9uIHRvIHRoZSB3ZWIgd29ya2VyIHJ1bm5pbmcgdGhlIGlkcFByb3h5CiAgKgogICogQHBhcmFtICB7cGFyYW1zfSAgcGFyYW1ldGVycyByZWNlaXZlZCBpbiB0aGUgbWVzc2FnZS4gSW4gdGhpcyBjYXNlIGNvbnRhaW5zIHRoZSBpZGVudGl0eSBhc3NlcnRpb24gYW5kIG9yaWdpbgogICogQHJldHVybiB7UHJvbWlzZX0gcmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgaWRlbnRpdHkgYXNzZXJ0aW9uIHZhbGlkYXRpb24gcmVzdWx0LCByZWNlaXZlZCBieSB0aGUgaWRwUHJveHkKICAqLwogIHZhbGlkYXRlKHBhcmFtcykgewogICAgbGV0IF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3QpIHsKICAgICAgaWYgKHdpbmRvdy5Xb3JrZXIpIHsgLy9jaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGUgd29ya2VyIEFQSQoKICAgICAgICBfdGhpcy5teVdvcmtlci5wb3N0TWVzc2FnZShbJ3ZhbGlkYXRlJyxwYXJhbXNdKTsKCiAgICAgICAgX3RoaXMubXlXb3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgcmVzb2x2ZShlLmRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB3b3JrZXInLCBlLmRhdGEpOwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVqZWN0KCdlcnJvcicpOwogICAgICB9CiAgICB9KTsKICB9CgogIC8qKgogICogZnVuY3Rpb24gdGhhdCBtYWtlcyBhIHJlcXVlc3QgZm9yIGEgdXNlciBpZGVudGl0eSB0byB0aGUgd2ViIHdvcmtlciBydW5uaW5nIHRoZSBpZHBQcm94eQogICoKICAqIEBwYXJhbSAge3BhcmFtc30gIHBhcmFtZXRlcnMgcmVjZWl2ZWQgaW4gdGhlIG1lc3NhZ2UuIEluIHRoaXMgY2FzZSBjb250YWlucyB0aGUgbG9naW4gc2NvcGUKICAqIEByZXR1cm4ge1Byb21pc2V9IHJldHVybnMgYSBwcm9taXNlIGFuIFVSTCBzbyB0aGUgSWRlbnRpdHkgTW9kdWxlIGNhbiB1c2UgdG8gb2J0YWluIGFuIGlkZW50aXR5CiAgKi8KICBsb2dpbihwYXJhbXMpIHsKICAgIGxldCBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KSB7CiAgICAgIGlmICh3aW5kb3cuV29ya2VyKSB7IC8vY2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIHdvcmtlciBBUEkKCiAgICAgICAgX3RoaXMubXlXb3JrZXIucG9zdE1lc3NhZ2UoWydvYnRhaW4nLCBwYXJhbXNdKTsKCiAgICAgICAgX3RoaXMubXlXb3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgcmVzb2x2ZShlLmRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB3b3JrZXInLCBlLmRhdGEpOwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVqZWN0KCdlcnJvcicpOwogICAgICB9CiAgICB9KTsKICB9CgogIC8qKgogICogVGhpcyBmdW5jdGlvbiByZWNlaXZlcyBhIG1lc3NhZ2UgYW5kIGEgdmFsdWUuIEl0IHJlcGxpZXMgdGhlIHZhbHVlIHRvIHRoZSBzZW5kZXIgb2YgdGhlIG1lc3NhZ2UgcmVjZWl2ZWQKICAqCiAgKiBAcGFyYW0gIHttZXNzYWdlfSAgIG1lc3NhZ2UgcmVjZWl2ZWQKICAqIEBwYXJhbSAge3ZhbHVlfSAgICAgdmFsdWUgdG8gaW5jbHVkZSBpbiB0aGUgbmV3IG1lc3NhZ2UgdG8gc2VuZAogICovCiAgcmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpIHsKICAgIGxldCBfdGhpcyA9IHRoaXM7CgogICAgbGV0IG1lc3NhZ2UgPSB7aWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sCiAgICAgICAgICAgICAgICAgICBib2R5OiB7Y29kZTogMjAwLCB2YWx1ZTogdmFsdWV9fTsKCiAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOwogIH0KfQoKZXhwb3J0IGRlZmF1bHQgSWRwUHJveHlTdHViOwo=",
      "sourceCodeClassname": "IdpProxyStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "IDPProxys",
    "version": "0.1",
    "description": "Description of IdpProxyStub",
    "objectName": "IdpProxyStub",
    "configuration": {},
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}
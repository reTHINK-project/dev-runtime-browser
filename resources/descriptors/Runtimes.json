{
  "RuntimeUA": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuUnVudGltZVVBID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrbysiJyIpO3Rocm93IGYuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT0iZnVuY3Rpb24iJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBhc24xID0gZXhwb3J0czsKCmFzbjEuYmlnbnVtID0gcmVxdWlyZSgnYm4uanMnKTsKCmFzbjEuZGVmaW5lID0gcmVxdWlyZSgnLi9hc24xL2FwaScpLmRlZmluZTsKYXNuMS5iYXNlID0gcmVxdWlyZSgnLi9hc24xL2Jhc2UnKTsKYXNuMS5jb25zdGFudHMgPSByZXF1aXJlKCcuL2FzbjEvY29uc3RhbnRzJyk7CmFzbjEuZGVjb2RlcnMgPSByZXF1aXJlKCcuL2FzbjEvZGVjb2RlcnMnKTsKYXNuMS5lbmNvZGVycyA9IHJlcXVpcmUoJy4vYXNuMS9lbmNvZGVycycpOwoKfSx7Ii4vYXNuMS9hcGkiOjIsIi4vYXNuMS9iYXNlIjo0LCIuL2FzbjEvY29uc3RhbnRzIjo4LCIuL2FzbjEvZGVjb2RlcnMiOjEwLCIuL2FzbjEvZW5jb2RlcnMiOjEzLCJibi5qcyI6NDF9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGFzbjEgPSByZXF1aXJlKCcuLi9hc24xJyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgYXBpID0gZXhwb3J0czsKCmFwaS5kZWZpbmUgPSBmdW5jdGlvbiBkZWZpbmUobmFtZSwgYm9keSkgewogIHJldHVybiBuZXcgRW50aXR5KG5hbWUsIGJvZHkpOwp9OwoKZnVuY3Rpb24gRW50aXR5KG5hbWUsIGJvZHkpIHsKICB0aGlzLm5hbWUgPSBuYW1lOwogIHRoaXMuYm9keSA9IGJvZHk7CgogIHRoaXMuZGVjb2RlcnMgPSB7fTsKICB0aGlzLmVuY29kZXJzID0ge307Cn07CgpFbnRpdHkucHJvdG90eXBlLl9jcmVhdGVOYW1lZCA9IGZ1bmN0aW9uIGNyZWF0ZU5hbWVkKGJhc2UpIHsKICB2YXIgbmFtZWQ7CiAgdHJ5IHsKICAgIG5hbWVkID0gcmVxdWlyZSgndm0nKS5ydW5JblRoaXNDb250ZXh0KAogICAgICAnKGZ1bmN0aW9uICcgKyB0aGlzLm5hbWUgKyAnKGVudGl0eSkge1xuJyArCiAgICAgICcgIHRoaXMuX2luaXROYW1lZChlbnRpdHkpO1xuJyArCiAgICAgICd9KScKICAgICk7CiAgfSBjYXRjaCAoZSkgewogICAgbmFtZWQgPSBmdW5jdGlvbiAoZW50aXR5KSB7CiAgICAgIHRoaXMuX2luaXROYW1lZChlbnRpdHkpOwogICAgfTsKICB9CiAgaW5oZXJpdHMobmFtZWQsIGJhc2UpOwogIG5hbWVkLnByb3RvdHlwZS5faW5pdE5hbWVkID0gZnVuY3Rpb24gaW5pdG5hbWVkKGVudGl0eSkgewogICAgYmFzZS5jYWxsKHRoaXMsIGVudGl0eSk7CiAgfTsKCiAgcmV0dXJuIG5ldyBuYW1lZCh0aGlzKTsKfTsKCkVudGl0eS5wcm90b3R5cGUuX2dldERlY29kZXIgPSBmdW5jdGlvbiBfZ2V0RGVjb2RlcihlbmMpIHsKICAvLyBMYXppbHkgY3JlYXRlIGRlY29kZXIKICBpZiAoIXRoaXMuZGVjb2RlcnMuaGFzT3duUHJvcGVydHkoZW5jKSkKICAgIHRoaXMuZGVjb2RlcnNbZW5jXSA9IHRoaXMuX2NyZWF0ZU5hbWVkKGFzbjEuZGVjb2RlcnNbZW5jXSk7CiAgcmV0dXJuIHRoaXMuZGVjb2RlcnNbZW5jXTsKfTsKCkVudGl0eS5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGRhdGEsIGVuYywgb3B0aW9ucykgewogIHJldHVybiB0aGlzLl9nZXREZWNvZGVyKGVuYykuZGVjb2RlKGRhdGEsIG9wdGlvbnMpOwp9OwoKRW50aXR5LnByb3RvdHlwZS5fZ2V0RW5jb2RlciA9IGZ1bmN0aW9uIF9nZXRFbmNvZGVyKGVuYykgewogIC8vIExhemlseSBjcmVhdGUgZW5jb2RlcgogIGlmICghdGhpcy5lbmNvZGVycy5oYXNPd25Qcm9wZXJ0eShlbmMpKQogICAgdGhpcy5lbmNvZGVyc1tlbmNdID0gdGhpcy5fY3JlYXRlTmFtZWQoYXNuMS5lbmNvZGVyc1tlbmNdKTsKICByZXR1cm4gdGhpcy5lbmNvZGVyc1tlbmNdOwp9OwoKRW50aXR5LnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgZW5jLCAvKiBpbnRlcm5hbCAqLyByZXBvcnRlcikgewogIHJldHVybiB0aGlzLl9nZXRFbmNvZGVyKGVuYykuZW5jb2RlKGRhdGEsIHJlcG9ydGVyKTsKfTsKCn0seyIuLi9hc24xIjoxLCJpbmhlcml0cyI6MTI5LCJ2bSI6MTc4fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7CnZhciBSZXBvcnRlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5SZXBvcnRlcjsKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCmZ1bmN0aW9uIERlY29kZXJCdWZmZXIoYmFzZSwgb3B0aW9ucykgewogIFJlcG9ydGVyLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYmFzZSkpIHsKICAgIHRoaXMuZXJyb3IoJ0lucHV0IG5vdCBCdWZmZXInKTsKICAgIHJldHVybjsKICB9CgogIHRoaXMuYmFzZSA9IGJhc2U7CiAgdGhpcy5vZmZzZXQgPSAwOwogIHRoaXMubGVuZ3RoID0gYmFzZS5sZW5ndGg7Cn0KaW5oZXJpdHMoRGVjb2RlckJ1ZmZlciwgUmVwb3J0ZXIpOwpleHBvcnRzLkRlY29kZXJCdWZmZXIgPSBEZWNvZGVyQnVmZmVyOwoKRGVjb2RlckJ1ZmZlci5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIHNhdmUoKSB7CiAgcmV0dXJuIHsgb2Zmc2V0OiB0aGlzLm9mZnNldCwgcmVwb3J0ZXI6IFJlcG9ydGVyLnByb3RvdHlwZS5zYXZlLmNhbGwodGhpcykgfTsKfTsKCkRlY29kZXJCdWZmZXIucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiByZXN0b3JlKHNhdmUpIHsKICAvLyBSZXR1cm4gc2tpcHBlZCBkYXRhCiAgdmFyIHJlcyA9IG5ldyBEZWNvZGVyQnVmZmVyKHRoaXMuYmFzZSk7CiAgcmVzLm9mZnNldCA9IHNhdmUub2Zmc2V0OwogIHJlcy5sZW5ndGggPSB0aGlzLm9mZnNldDsKCiAgdGhpcy5vZmZzZXQgPSBzYXZlLm9mZnNldDsKICBSZXBvcnRlci5wcm90b3R5cGUucmVzdG9yZS5jYWxsKHRoaXMsIHNhdmUucmVwb3J0ZXIpOwoKICByZXR1cm4gcmVzOwp9OwoKRGVjb2RlckJ1ZmZlci5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkoKSB7CiAgcmV0dXJuIHRoaXMub2Zmc2V0ID09PSB0aGlzLmxlbmd0aDsKfTsKCkRlY29kZXJCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OChmYWlsKSB7CiAgaWYgKHRoaXMub2Zmc2V0ICsgMSA8PSB0aGlzLmxlbmd0aCkKICAgIHJldHVybiB0aGlzLmJhc2UucmVhZFVJbnQ4KHRoaXMub2Zmc2V0KyssIHRydWUpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmVycm9yKGZhaWwgfHwgJ0RlY29kZXJCdWZmZXIgb3ZlcnJ1bicpOwp9CgpEZWNvZGVyQnVmZmVyLnByb3RvdHlwZS5za2lwID0gZnVuY3Rpb24gc2tpcChieXRlcywgZmFpbCkgewogIGlmICghKHRoaXMub2Zmc2V0ICsgYnl0ZXMgPD0gdGhpcy5sZW5ndGgpKQogICAgcmV0dXJuIHRoaXMuZXJyb3IoZmFpbCB8fCAnRGVjb2RlckJ1ZmZlciBvdmVycnVuJyk7CgogIHZhciByZXMgPSBuZXcgRGVjb2RlckJ1ZmZlcih0aGlzLmJhc2UpOwoKICAvLyBTaGFyZSByZXBvcnRlciBzdGF0ZQogIHJlcy5fcmVwb3J0ZXJTdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHJlcy5vZmZzZXQgPSB0aGlzLm9mZnNldDsKICByZXMubGVuZ3RoID0gdGhpcy5vZmZzZXQgKyBieXRlczsKICB0aGlzLm9mZnNldCArPSBieXRlczsKICByZXR1cm4gcmVzOwp9CgpEZWNvZGVyQnVmZmVyLnByb3RvdHlwZS5yYXcgPSBmdW5jdGlvbiByYXcoc2F2ZSkgewogIHJldHVybiB0aGlzLmJhc2Uuc2xpY2Uoc2F2ZSA/IHNhdmUub2Zmc2V0IDogdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoKTsKfQoKZnVuY3Rpb24gRW5jb2RlckJ1ZmZlcih2YWx1ZSwgcmVwb3J0ZXIpIHsKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHRoaXMubGVuZ3RoID0gMDsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZS5tYXAoZnVuY3Rpb24oaXRlbSkgewogICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgRW5jb2RlckJ1ZmZlcikpCiAgICAgICAgaXRlbSA9IG5ldyBFbmNvZGVyQnVmZmVyKGl0ZW0sIHJlcG9ydGVyKTsKICAgICAgdGhpcy5sZW5ndGggKz0gaXRlbS5sZW5ndGg7CiAgICAgIHJldHVybiBpdGVtOwogICAgfSwgdGhpcyk7CiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICBpZiAoISgwIDw9IHZhbHVlICYmIHZhbHVlIDw9IDB4ZmYpKQogICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ25vbi1ieXRlIEVuY29kZXJCdWZmZXIgdmFsdWUnKTsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgIHRoaXMubGVuZ3RoID0gMTsKICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgIHRoaXMubGVuZ3RoID0gQnVmZmVyLmJ5dGVMZW5ndGgodmFsdWUpOwogIH0gZWxzZSBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbHVlKSkgewogICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgdGhpcy5sZW5ndGggPSB2YWx1ZS5sZW5ndGg7CiAgfSBlbHNlIHsKICAgIHJldHVybiByZXBvcnRlci5lcnJvcignVW5zdXBwb3J0ZWQgdHlwZTogJyArIHR5cGVvZiB2YWx1ZSk7CiAgfQp9CmV4cG9ydHMuRW5jb2RlckJ1ZmZlciA9IEVuY29kZXJCdWZmZXI7CgpFbmNvZGVyQnVmZmVyLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24gam9pbihvdXQsIG9mZnNldCkgewogIGlmICghb3V0KQogICAgb3V0ID0gbmV3IEJ1ZmZlcih0aGlzLmxlbmd0aCk7CiAgaWYgKCFvZmZzZXQpCiAgICBvZmZzZXQgPSAwOwoKICBpZiAodGhpcy5sZW5ndGggPT09IDApCiAgICByZXR1cm4gb3V0OwoKICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSkgewogICAgdGhpcy52YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgaXRlbS5qb2luKG91dCwgb2Zmc2V0KTsKICAgICAgb2Zmc2V0ICs9IGl0ZW0ubGVuZ3RoOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGlmICh0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ251bWJlcicpCiAgICAgIG91dFtvZmZzZXRdID0gdGhpcy52YWx1ZTsKICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLnZhbHVlID09PSAnc3RyaW5nJykKICAgICAgb3V0LndyaXRlKHRoaXMudmFsdWUsIG9mZnNldCk7CiAgICBlbHNlIGlmIChCdWZmZXIuaXNCdWZmZXIodGhpcy52YWx1ZSkpCiAgICAgIHRoaXMudmFsdWUuY29weShvdXQsIG9mZnNldCk7CiAgICBvZmZzZXQgKz0gdGhpcy5sZW5ndGg7CiAgfQoKICByZXR1cm4gb3V0Owp9OwoKfSx7Ii4uL2Jhc2UiOjQsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjl9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGJhc2UgPSBleHBvcnRzOwoKYmFzZS5SZXBvcnRlciA9IHJlcXVpcmUoJy4vcmVwb3J0ZXInKS5SZXBvcnRlcjsKYmFzZS5EZWNvZGVyQnVmZmVyID0gcmVxdWlyZSgnLi9idWZmZXInKS5EZWNvZGVyQnVmZmVyOwpiYXNlLkVuY29kZXJCdWZmZXIgPSByZXF1aXJlKCcuL2J1ZmZlcicpLkVuY29kZXJCdWZmZXI7CmJhc2UuTm9kZSA9IHJlcXVpcmUoJy4vbm9kZScpOwoKfSx7Ii4vYnVmZmVyIjozLCIuL25vZGUiOjUsIi4vcmVwb3J0ZXIiOjZ9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIFJlcG9ydGVyID0gcmVxdWlyZSgnLi4vYmFzZScpLlJlcG9ydGVyOwp2YXIgRW5jb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5FbmNvZGVyQnVmZmVyOwp2YXIgRGVjb2RlckJ1ZmZlciA9IHJlcXVpcmUoJy4uL2Jhc2UnKS5EZWNvZGVyQnVmZmVyOwp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwoKLy8gU3VwcG9ydGVkIHRhZ3MKdmFyIHRhZ3MgPSBbCiAgJ3NlcScsICdzZXFvZicsICdzZXQnLCAnc2V0b2YnLCAnb2JqaWQnLCAnYm9vbCcsCiAgJ2dlbnRpbWUnLCAndXRjdGltZScsICdudWxsXycsICdlbnVtJywgJ2ludCcsCiAgJ2JpdHN0cicsICdibXBzdHInLCAnY2hhcnN0cicsICdnZW5zdHInLCAnZ3JhcGhzdHInLCAnaWE1c3RyJywgJ2lzbzY0NnN0cicsCiAgJ251bXN0cicsICdvY3RzdHInLCAncHJpbnRzdHInLCAndDYxc3RyJywgJ3VuaXN0cicsICd1dGY4c3RyJywgJ3ZpZGVvc3RyJwpdOwoKLy8gUHVibGljIG1ldGhvZHMgbGlzdAp2YXIgbWV0aG9kcyA9IFsKICAna2V5JywgJ29iaicsICd1c2UnLCAnb3B0aW9uYWwnLCAnZXhwbGljaXQnLCAnaW1wbGljaXQnLCAnZGVmJywgJ2Nob2ljZScsCiAgJ2FueScsICdjb250YWlucycKXS5jb25jYXQodGFncyk7CgovLyBPdmVycmlkZWQgbWV0aG9kcyBsaXN0CnZhciBvdmVycmlkZWQgPSBbCiAgJ19wZWVrVGFnJywgJ19kZWNvZGVUYWcnLCAnX3VzZScsCiAgJ19kZWNvZGVTdHInLCAnX2RlY29kZU9iamlkJywgJ19kZWNvZGVUaW1lJywKICAnX2RlY29kZU51bGwnLCAnX2RlY29kZUludCcsICdfZGVjb2RlQm9vbCcsICdfZGVjb2RlTGlzdCcsCgogICdfZW5jb2RlQ29tcG9zaXRlJywgJ19lbmNvZGVTdHInLCAnX2VuY29kZU9iamlkJywgJ19lbmNvZGVUaW1lJywKICAnX2VuY29kZU51bGwnLCAnX2VuY29kZUludCcsICdfZW5jb2RlQm9vbCcKXTsKCmZ1bmN0aW9uIE5vZGUoZW5jLCBwYXJlbnQpIHsKICB2YXIgc3RhdGUgPSB7fTsKICB0aGlzLl9iYXNlU3RhdGUgPSBzdGF0ZTsKCiAgc3RhdGUuZW5jID0gZW5jOwoKICBzdGF0ZS5wYXJlbnQgPSBwYXJlbnQgfHwgbnVsbDsKICBzdGF0ZS5jaGlsZHJlbiA9IG51bGw7CgogIC8vIFN0YXRlCiAgc3RhdGUudGFnID0gbnVsbDsKICBzdGF0ZS5hcmdzID0gbnVsbDsKICBzdGF0ZS5yZXZlcnNlQXJncyA9IG51bGw7CiAgc3RhdGUuY2hvaWNlID0gbnVsbDsKICBzdGF0ZS5vcHRpb25hbCA9IGZhbHNlOwogIHN0YXRlLmFueSA9IGZhbHNlOwogIHN0YXRlLm9iaiA9IGZhbHNlOwogIHN0YXRlLnVzZSA9IG51bGw7CiAgc3RhdGUudXNlRGVjb2RlciA9IG51bGw7CiAgc3RhdGUua2V5ID0gbnVsbDsKICBzdGF0ZVsnZGVmYXVsdCddID0gbnVsbDsKICBzdGF0ZS5leHBsaWNpdCA9IG51bGw7CiAgc3RhdGUuaW1wbGljaXQgPSBudWxsOwogIHN0YXRlLmNvbnRhaW5zID0gbnVsbDsKCiAgLy8gU2hvdWxkIGNyZWF0ZSBuZXcgaW5zdGFuY2Ugb24gZWFjaCBtZXRob2QKICBpZiAoIXN0YXRlLnBhcmVudCkgewogICAgc3RhdGUuY2hpbGRyZW4gPSBbXTsKICAgIHRoaXMuX3dyYXAoKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBOb2RlOwoKdmFyIHN0YXRlUHJvcHMgPSBbCiAgJ2VuYycsICdwYXJlbnQnLCAnY2hpbGRyZW4nLCAndGFnJywgJ2FyZ3MnLCAncmV2ZXJzZUFyZ3MnLCAnY2hvaWNlJywKICAnb3B0aW9uYWwnLCAnYW55JywgJ29iaicsICd1c2UnLCAnYWx0ZXJlZFVzZScsICdrZXknLCAnZGVmYXVsdCcsICdleHBsaWNpdCcsCiAgJ2ltcGxpY2l0JwpdOwoKTm9kZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgdmFyIGNzdGF0ZSA9IHt9OwogIHN0YXRlUHJvcHMuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7CiAgICBjc3RhdGVbcHJvcF0gPSBzdGF0ZVtwcm9wXTsKICB9KTsKICB2YXIgcmVzID0gbmV3IHRoaXMuY29uc3RydWN0b3IoY3N0YXRlLnBhcmVudCk7CiAgcmVzLl9iYXNlU3RhdGUgPSBjc3RhdGU7CiAgcmV0dXJuIHJlczsKfTsKCk5vZGUucHJvdG90eXBlLl93cmFwID0gZnVuY3Rpb24gd3JhcCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgdGhpc1ttZXRob2RdID0gZnVuY3Rpb24gX3dyYXBwZWRNZXRob2QoKSB7CiAgICAgIHZhciBjbG9uZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpOwogICAgICBzdGF0ZS5jaGlsZHJlbi5wdXNoKGNsb25lKTsKICAgICAgcmV0dXJuIGNsb25lW21ldGhvZF0uYXBwbHkoY2xvbmUsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0sIHRoaXMpOwp9OwoKTm9kZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGJvZHkpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5wYXJlbnQgPT09IG51bGwpOwogIGJvZHkuY2FsbCh0aGlzKTsKCiAgLy8gRmlsdGVyIGNoaWxkcmVuCiAgc3RhdGUuY2hpbGRyZW4gPSBzdGF0ZS5jaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24oY2hpbGQpIHsKICAgIHJldHVybiBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9PT0gdGhpczsKICB9LCB0aGlzKTsKICBhc3NlcnQuZXF1YWwoc3RhdGUuY2hpbGRyZW4ubGVuZ3RoLCAxLCAnUm9vdCBub2RlIGNhbiBoYXZlIG9ubHkgb25lIGNoaWxkJyk7Cn07CgpOb2RlLnByb3RvdHlwZS5fdXNlQXJncyA9IGZ1bmN0aW9uIHVzZUFyZ3MoYXJncykgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgLy8gRmlsdGVyIGNoaWxkcmVuIGFuZCBhcmdzCiAgdmFyIGNoaWxkcmVuID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gYXJnIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3RvcjsKICB9LCB0aGlzKTsKICBhcmdzID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gIShhcmcgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKTsKICB9LCB0aGlzKTsKCiAgaWYgKGNoaWxkcmVuLmxlbmd0aCAhPT0gMCkgewogICAgYXNzZXJ0KHN0YXRlLmNoaWxkcmVuID09PSBudWxsKTsKICAgIHN0YXRlLmNoaWxkcmVuID0gY2hpbGRyZW47CgogICAgLy8gUmVwbGFjZSBwYXJlbnQgdG8gbWFpbnRhaW4gYmFja3dhcmQgbGluawogICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgewogICAgICBjaGlsZC5fYmFzZVN0YXRlLnBhcmVudCA9IHRoaXM7CiAgICB9LCB0aGlzKTsKICB9CiAgaWYgKGFyZ3MubGVuZ3RoICE9PSAwKSB7CiAgICBhc3NlcnQoc3RhdGUuYXJncyA9PT0gbnVsbCk7CiAgICBzdGF0ZS5hcmdzID0gYXJnczsKICAgIHN0YXRlLnJldmVyc2VBcmdzID0gYXJncy5tYXAoZnVuY3Rpb24oYXJnKSB7CiAgICAgIGlmICh0eXBlb2YgYXJnICE9PSAnb2JqZWN0JyB8fCBhcmcuY29uc3RydWN0b3IgIT09IE9iamVjdCkKICAgICAgICByZXR1cm4gYXJnOwoKICAgICAgdmFyIHJlcyA9IHt9OwogICAgICBPYmplY3Qua2V5cyhhcmcpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgaWYgKGtleSA9PSAoa2V5IHwgMCkpCiAgICAgICAgICBrZXkgfD0gMDsKICAgICAgICB2YXIgdmFsdWUgPSBhcmdba2V5XTsKICAgICAgICByZXNbdmFsdWVdID0ga2V5OwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0pOwogIH0KfTsKCi8vCi8vIE92ZXJyaWRlZCBtZXRob2RzCi8vCgpvdmVycmlkZWQuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICBOb2RlLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gX292ZXJyaWRlZCgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIHRocm93IG5ldyBFcnJvcihtZXRob2QgKyAnIG5vdCBpbXBsZW1lbnRlZCBmb3IgZW5jb2Rpbmc6ICcgKyBzdGF0ZS5lbmMpOwogIH07Cn0pOwoKLy8KLy8gUHVibGljIG1ldGhvZHMKLy8KCnRhZ3MuZm9yRWFjaChmdW5jdGlvbih0YWcpIHsKICBOb2RlLnByb3RvdHlwZVt0YWddID0gZnVuY3Rpb24gX3RhZ01ldGhvZCgpIHsKICAgIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKCiAgICBhc3NlcnQoc3RhdGUudGFnID09PSBudWxsKTsKICAgIHN0YXRlLnRhZyA9IHRhZzsKCiAgICB0aGlzLl91c2VBcmdzKGFyZ3MpOwoKICAgIHJldHVybiB0aGlzOwogIH07Cn0pOwoKTm9kZS5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGl0ZW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS51c2UgPT09IG51bGwpOwogIHN0YXRlLnVzZSA9IGl0ZW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUub3B0aW9uYWwgPSBmdW5jdGlvbiBvcHRpb25hbCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHN0YXRlLm9wdGlvbmFsID0gdHJ1ZTsKCiAgcmV0dXJuIHRoaXM7Cn07CgpOb2RlLnByb3RvdHlwZS5kZWYgPSBmdW5jdGlvbiBkZWYodmFsKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICBhc3NlcnQoc3RhdGVbJ2RlZmF1bHQnXSA9PT0gbnVsbCk7CiAgc3RhdGVbJ2RlZmF1bHQnXSA9IHZhbDsKICBzdGF0ZS5vcHRpb25hbCA9IHRydWU7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuZXhwbGljaXQgPSBmdW5jdGlvbiBleHBsaWNpdChudW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5leHBsaWNpdCA9PT0gbnVsbCAmJiBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCk7CiAgc3RhdGUuZXhwbGljaXQgPSBudW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuaW1wbGljaXQgPSBmdW5jdGlvbiBpbXBsaWNpdChudW0pIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIGFzc2VydChzdGF0ZS5leHBsaWNpdCA9PT0gbnVsbCAmJiBzdGF0ZS5pbXBsaWNpdCA9PT0gbnVsbCk7CiAgc3RhdGUuaW1wbGljaXQgPSBudW07CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUub2JqID0gZnVuY3Rpb24gb2JqKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CgogIHN0YXRlLm9iaiA9IHRydWU7CgogIGlmIChhcmdzLmxlbmd0aCAhPT0gMCkKICAgIHRoaXMuX3VzZUFyZ3MoYXJncyk7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUua2V5ID0gZnVuY3Rpb24ga2V5KG5ld0tleSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLmtleSA9PT0gbnVsbCk7CiAgc3RhdGUua2V5ID0gbmV3S2V5OwoKICByZXR1cm4gdGhpczsKfTsKCk5vZGUucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uIGFueSgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHN0YXRlLmFueSA9IHRydWU7CgogIHJldHVybiB0aGlzOwp9OwoKTm9kZS5wcm90b3R5cGUuY2hvaWNlID0gZnVuY3Rpb24gY2hvaWNlKG9iaikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLmNob2ljZSA9PT0gbnVsbCk7CiAgc3RhdGUuY2hvaWNlID0gb2JqOwogIHRoaXMuX3VzZUFyZ3MoT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24oa2V5KSB7CiAgICByZXR1cm4gb2JqW2tleV07CiAgfSkpOwoKICByZXR1cm4gdGhpczsKfTsKCk5vZGUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gY29udGFpbnMoaXRlbSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgYXNzZXJ0KHN0YXRlLnVzZSA9PT0gbnVsbCk7CiAgc3RhdGUuY29udGFpbnMgPSBpdGVtOwoKICByZXR1cm4gdGhpczsKfTsKCi8vCi8vIERlY29kaW5nCi8vCgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAvLyBEZWNvZGUgcm9vdCBub2RlCiAgaWYgKHN0YXRlLnBhcmVudCA9PT0gbnVsbCkKICAgIHJldHVybiBpbnB1dC53cmFwUmVzdWx0KHN0YXRlLmNoaWxkcmVuWzBdLl9kZWNvZGUoaW5wdXQpKTsKCiAgdmFyIHJlc3VsdCA9IHN0YXRlWydkZWZhdWx0J107CiAgdmFyIHByZXNlbnQgPSB0cnVlOwoKICB2YXIgcHJldktleTsKICBpZiAoc3RhdGUua2V5ICE9PSBudWxsKQogICAgcHJldktleSA9IGlucHV0LmVudGVyS2V5KHN0YXRlLmtleSk7CgogIC8vIENoZWNrIGlmIHRhZyBpcyB0aGVyZQogIGlmIChzdGF0ZS5vcHRpb25hbCkgewogICAgdmFyIHRhZyA9IG51bGw7CiAgICBpZiAoc3RhdGUuZXhwbGljaXQgIT09IG51bGwpCiAgICAgIHRhZyA9IHN0YXRlLmV4cGxpY2l0OwogICAgZWxzZSBpZiAoc3RhdGUuaW1wbGljaXQgIT09IG51bGwpCiAgICAgIHRhZyA9IHN0YXRlLmltcGxpY2l0OwogICAgZWxzZSBpZiAoc3RhdGUudGFnICE9PSBudWxsKQogICAgICB0YWcgPSBzdGF0ZS50YWc7CgogICAgaWYgKHRhZyA9PT0gbnVsbCAmJiAhc3RhdGUuYW55KSB7CiAgICAgIC8vIFRyaWFsIGFuZCBFcnJvcgogICAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgdHJ5IHsKICAgICAgICBpZiAoc3RhdGUuY2hvaWNlID09PSBudWxsKQogICAgICAgICAgdGhpcy5fZGVjb2RlR2VuZXJpYyhzdGF0ZS50YWcsIGlucHV0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB0aGlzLl9kZWNvZGVDaG9pY2UoaW5wdXQpOwogICAgICAgIHByZXNlbnQgPSB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcHJlc2VudCA9IGZhbHNlOwogICAgICB9CiAgICAgIGlucHV0LnJlc3RvcmUoc2F2ZSk7CiAgICB9IGVsc2UgewogICAgICBwcmVzZW50ID0gdGhpcy5fcGVla1RhZyhpbnB1dCwgdGFnLCBzdGF0ZS5hbnkpOwoKICAgICAgaWYgKGlucHV0LmlzRXJyb3IocHJlc2VudCkpCiAgICAgICAgcmV0dXJuIHByZXNlbnQ7CiAgICB9CiAgfQoKICAvLyBQdXNoIG9iamVjdCBvbiBzdGFjawogIHZhciBwcmV2T2JqOwogIGlmIChzdGF0ZS5vYmogJiYgcHJlc2VudCkKICAgIHByZXZPYmogPSBpbnB1dC5lbnRlck9iamVjdCgpOwoKICBpZiAocHJlc2VudCkgewogICAgLy8gVW53cmFwIGV4cGxpY2l0IHZhbHVlcwogICAgaWYgKHN0YXRlLmV4cGxpY2l0ICE9PSBudWxsKSB7CiAgICAgIHZhciBleHBsaWNpdCA9IHRoaXMuX2RlY29kZVRhZyhpbnB1dCwgc3RhdGUuZXhwbGljaXQpOwogICAgICBpZiAoaW5wdXQuaXNFcnJvcihleHBsaWNpdCkpCiAgICAgICAgcmV0dXJuIGV4cGxpY2l0OwogICAgICBpbnB1dCA9IGV4cGxpY2l0OwogICAgfQoKICAgIC8vIFVud3JhcCBpbXBsaWNpdCBhbmQgbm9ybWFsIHZhbHVlcwogICAgaWYgKHN0YXRlLnVzZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgICAgaWYgKHN0YXRlLmFueSkKICAgICAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgICAgdmFyIGJvZHkgPSB0aGlzLl9kZWNvZGVUYWcoCiAgICAgICAgaW5wdXQsCiAgICAgICAgc3RhdGUuaW1wbGljaXQgIT09IG51bGwgPyBzdGF0ZS5pbXBsaWNpdCA6IHN0YXRlLnRhZywKICAgICAgICBzdGF0ZS5hbnkKICAgICAgKTsKICAgICAgaWYgKGlucHV0LmlzRXJyb3IoYm9keSkpCiAgICAgICAgcmV0dXJuIGJvZHk7CgogICAgICBpZiAoc3RhdGUuYW55KQogICAgICAgIHJlc3VsdCA9IGlucHV0LnJhdyhzYXZlKTsKICAgICAgZWxzZQogICAgICAgIGlucHV0ID0gYm9keTsKICAgIH0KCiAgICAvLyBTZWxlY3QgcHJvcGVyIG1ldGhvZCBmb3IgdGFnCiAgICBpZiAoc3RhdGUuYW55KQogICAgICByZXN1bHQgPSByZXN1bHQ7CiAgICBlbHNlIGlmIChzdGF0ZS5jaG9pY2UgPT09IG51bGwpCiAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUdlbmVyaWMoc3RhdGUudGFnLCBpbnB1dCk7CiAgICBlbHNlCiAgICAgIHJlc3VsdCA9IHRoaXMuX2RlY29kZUNob2ljZShpbnB1dCk7CgogICAgaWYgKGlucHV0LmlzRXJyb3IocmVzdWx0KSkKICAgICAgcmV0dXJuIHJlc3VsdDsKCiAgICAvLyBEZWNvZGUgY2hpbGRyZW4KICAgIGlmICghc3RhdGUuYW55ICYmIHN0YXRlLmNob2ljZSA9PT0gbnVsbCAmJiBzdGF0ZS5jaGlsZHJlbiAhPT0gbnVsbCkgewogICAgICB2YXIgZmFpbCA9IHN0YXRlLmNoaWxkcmVuLnNvbWUoZnVuY3Rpb24gZGVjb2RlQ2hpbGRyZW4oY2hpbGQpIHsKICAgICAgICAvLyBOT1RFOiBXZSBhcmUgaWdub3JpbmcgZXJyb3JzIGhlcmUsIHRvIGxldCBwYXJzZXIgY29udGludWUgd2l0aCBvdGhlcgogICAgICAgIC8vIHBhcnRzIG9mIGVuY29kZWQgZGF0YQogICAgICAgIGNoaWxkLl9kZWNvZGUoaW5wdXQpOwogICAgICB9KTsKICAgICAgaWYgKGZhaWwpCiAgICAgICAgcmV0dXJuIGVycjsKICAgIH0KCiAgICAvLyBEZWNvZGUgY29udGFpbmVkL2VuY29kZWQgYnkgc2NoZW1hLCBvbmx5IGluIGJpdCBvciBvY3RldCBzdHJpbmdzCiAgICBpZiAoc3RhdGUuY29udGFpbnMgJiYgKHN0YXRlLnRhZyA9PT0gJ29jdHN0cicgfHwgc3RhdGUudGFnID09PSAnYml0c3RyJykpIHsKICAgICAgdmFyIGRhdGEgPSBuZXcgRGVjb2RlckJ1ZmZlcihyZXN1bHQpOwogICAgICByZXN1bHQgPSB0aGlzLl9nZXRVc2Uoc3RhdGUuY29udGFpbnMsIGlucHV0Ll9yZXBvcnRlclN0YXRlLm9iaikuX2RlY29kZShkYXRhKTsKICAgIH0KICB9CgogIC8vIFBvcCBvYmplY3QKICBpZiAoc3RhdGUub2JqICYmIHByZXNlbnQpCiAgICByZXN1bHQgPSBpbnB1dC5sZWF2ZU9iamVjdChwcmV2T2JqKTsKCiAgLy8gU2V0IGtleQogIGlmIChzdGF0ZS5rZXkgIT09IG51bGwgJiYgKHJlc3VsdCAhPT0gbnVsbCB8fCBwcmVzZW50ID09PSB0cnVlKSkKICAgIGlucHV0LmxlYXZlS2V5KHByZXZLZXksIHN0YXRlLmtleSwgcmVzdWx0KTsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCk5vZGUucHJvdG90eXBlLl9kZWNvZGVHZW5lcmljID0gZnVuY3Rpb24gZGVjb2RlR2VuZXJpYyh0YWcsIGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICBpZiAodGFnID09PSAnc2VxJyB8fCB0YWcgPT09ICdzZXQnKQogICAgcmV0dXJuIG51bGw7CiAgaWYgKHRhZyA9PT0gJ3NlcW9mJyB8fCB0YWcgPT09ICdzZXRvZicpCiAgICByZXR1cm4gdGhpcy5fZGVjb2RlTGlzdChpbnB1dCwgdGFnLCBzdGF0ZS5hcmdzWzBdKTsKICBlbHNlIGlmICgvc3RyJC8udGVzdCh0YWcpKQogICAgcmV0dXJuIHRoaXMuX2RlY29kZVN0cihpbnB1dCwgdGFnKTsKICBlbHNlIGlmICh0YWcgPT09ICdvYmppZCcgJiYgc3RhdGUuYXJncykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVPYmppZChpbnB1dCwgc3RhdGUuYXJnc1swXSwgc3RhdGUuYXJnc1sxXSk7CiAgZWxzZSBpZiAodGFnID09PSAnb2JqaWQnKQogICAgcmV0dXJuIHRoaXMuX2RlY29kZU9iamlkKGlucHV0LCBudWxsLCBudWxsKTsKICBlbHNlIGlmICh0YWcgPT09ICdnZW50aW1lJyB8fCB0YWcgPT09ICd1dGN0aW1lJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVUaW1lKGlucHV0LCB0YWcpOwogIGVsc2UgaWYgKHRhZyA9PT0gJ251bGxfJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVOdWxsKGlucHV0KTsKICBlbHNlIGlmICh0YWcgPT09ICdib29sJykKICAgIHJldHVybiB0aGlzLl9kZWNvZGVCb29sKGlucHV0KTsKICBlbHNlIGlmICh0YWcgPT09ICdpbnQnIHx8IHRhZyA9PT0gJ2VudW0nKQogICAgcmV0dXJuIHRoaXMuX2RlY29kZUludChpbnB1dCwgc3RhdGUuYXJncyAmJiBzdGF0ZS5hcmdzWzBdKTsKICBlbHNlIGlmIChzdGF0ZS51c2UgIT09IG51bGwpCiAgICByZXR1cm4gdGhpcy5fZ2V0VXNlKHN0YXRlLnVzZSwgaW5wdXQuX3JlcG9ydGVyU3RhdGUub2JqKS5fZGVjb2RlKGlucHV0KTsKICBlbHNlCiAgICByZXR1cm4gaW5wdXQuZXJyb3IoJ3Vua25vd24gdGFnOiAnICsgdGFnKTsKCiAgcmV0dXJuIG51bGw7Cn07CgpOb2RlLnByb3RvdHlwZS5fZ2V0VXNlID0gZnVuY3Rpb24gX2dldFVzZShlbnRpdHksIG9iaikgewoKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CiAgLy8gQ3JlYXRlIGFsdGVyZWQgdXNlIGRlY29kZXIgaWYgaW1wbGljaXQgaXMgc2V0CiAgc3RhdGUudXNlRGVjb2RlciA9IHRoaXMuX3VzZShlbnRpdHksIG9iaik7CiAgYXNzZXJ0KHN0YXRlLnVzZURlY29kZXIuX2Jhc2VTdGF0ZS5wYXJlbnQgPT09IG51bGwpOwogIHN0YXRlLnVzZURlY29kZXIgPSBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuY2hpbGRyZW5bMF07CiAgaWYgKHN0YXRlLmltcGxpY2l0ICE9PSBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuaW1wbGljaXQpIHsKICAgIHN0YXRlLnVzZURlY29kZXIgPSBzdGF0ZS51c2VEZWNvZGVyLmNsb25lKCk7CiAgICBzdGF0ZS51c2VEZWNvZGVyLl9iYXNlU3RhdGUuaW1wbGljaXQgPSBzdGF0ZS5pbXBsaWNpdDsKICB9CiAgcmV0dXJuIHN0YXRlLnVzZURlY29kZXI7Cn07CgpOb2RlLnByb3RvdHlwZS5fZGVjb2RlQ2hvaWNlID0gZnVuY3Rpb24gZGVjb2RlQ2hvaWNlKGlucHV0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwogIHZhciByZXN1bHQgPSBudWxsOwogIHZhciBtYXRjaCA9IGZhbHNlOwoKICBPYmplY3Qua2V5cyhzdGF0ZS5jaG9pY2UpLnNvbWUoZnVuY3Rpb24oa2V5KSB7CiAgICB2YXIgc2F2ZSA9IGlucHV0LnNhdmUoKTsKICAgIHZhciBub2RlID0gc3RhdGUuY2hvaWNlW2tleV07CiAgICB0cnkgewogICAgICB2YXIgdmFsdWUgPSBub2RlLl9kZWNvZGUoaW5wdXQpOwogICAgICBpZiAoaW5wdXQuaXNFcnJvcih2YWx1ZSkpCiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgcmVzdWx0ID0geyB0eXBlOiBrZXksIHZhbHVlOiB2YWx1ZSB9OwogICAgICBtYXRjaCA9IHRydWU7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlucHV0LnJlc3RvcmUoc2F2ZSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0sIHRoaXMpOwoKICBpZiAoIW1hdGNoKQogICAgcmV0dXJuIGlucHV0LmVycm9yKCdDaG9pY2Ugbm90IG1hdGNoZWQnKTsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCi8vCi8vIEVuY29kaW5nCi8vCgpOb2RlLnByb3RvdHlwZS5fY3JlYXRlRW5jb2RlckJ1ZmZlciA9IGZ1bmN0aW9uIGNyZWF0ZUVuY29kZXJCdWZmZXIoZGF0YSkgewogIHJldHVybiBuZXcgRW5jb2RlckJ1ZmZlcihkYXRhLCB0aGlzLnJlcG9ydGVyKTsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZGF0YSwgcmVwb3J0ZXIsIHBhcmVudCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICBpZiAoc3RhdGVbJ2RlZmF1bHQnXSAhPT0gbnVsbCAmJiBzdGF0ZVsnZGVmYXVsdCddID09PSBkYXRhKQogICAgcmV0dXJuOwoKICB2YXIgcmVzdWx0ID0gdGhpcy5fZW5jb2RlVmFsdWUoZGF0YSwgcmVwb3J0ZXIsIHBhcmVudCk7CiAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKQogICAgcmV0dXJuOwoKICBpZiAodGhpcy5fc2tpcERlZmF1bHQocmVzdWx0LCByZXBvcnRlciwgcGFyZW50KSkKICAgIHJldHVybjsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGVWYWx1ZSA9IGZ1bmN0aW9uIGVuY29kZShkYXRhLCByZXBvcnRlciwgcGFyZW50KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fYmFzZVN0YXRlOwoKICAvLyBEZWNvZGUgcm9vdCBub2RlCiAgaWYgKHN0YXRlLnBhcmVudCA9PT0gbnVsbCkKICAgIHJldHVybiBzdGF0ZS5jaGlsZHJlblswXS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyIHx8IG5ldyBSZXBvcnRlcigpKTsKCiAgdmFyIHJlc3VsdCA9IG51bGw7CiAgdmFyIHByZXNlbnQgPSB0cnVlOwoKICAvLyBTZXQgcmVwb3J0ZXIgdG8gc2hhcmUgaXQgd2l0aCBhIGNoaWxkIGNsYXNzCiAgdGhpcy5yZXBvcnRlciA9IHJlcG9ydGVyOwoKICAvLyBDaGVjayBpZiBkYXRhIGlzIHRoZXJlCiAgaWYgKHN0YXRlLm9wdGlvbmFsICYmIGRhdGEgPT09IHVuZGVmaW5lZCkgewogICAgaWYgKHN0YXRlWydkZWZhdWx0J10gIT09IG51bGwpCiAgICAgIGRhdGEgPSBzdGF0ZVsnZGVmYXVsdCddCiAgICBlbHNlCiAgICAgIHJldHVybjsKICB9CgogIC8vIEZvciBlcnJvciByZXBvcnRpbmcKICB2YXIgcHJldktleTsKCiAgLy8gRW5jb2RlIGNoaWxkcmVuIGZpcnN0CiAgdmFyIGNvbnRlbnQgPSBudWxsOwogIHZhciBwcmltaXRpdmUgPSBmYWxzZTsKICBpZiAoc3RhdGUuYW55KSB7CiAgICAvLyBBbnl0aGluZyB0aGF0IHdhcyBnaXZlbiBpcyB0cmFuc2xhdGVkIHRvIGJ1ZmZlcgogICAgcmVzdWx0ID0gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihkYXRhKTsKICB9IGVsc2UgaWYgKHN0YXRlLmNob2ljZSkgewogICAgcmVzdWx0ID0gdGhpcy5fZW5jb2RlQ2hvaWNlKGRhdGEsIHJlcG9ydGVyKTsKICB9IGVsc2UgaWYgKHN0YXRlLmNvbnRhaW5zKSB7CiAgICBjb250ZW50ID0gdGhpcy5fZ2V0VXNlKHN0YXRlLmNvbnRhaW5zLCBwYXJlbnQpLl9lbmNvZGUoZGF0YSwgcmVwb3J0ZXIpOwogICAgcHJpbWl0aXZlID0gdHJ1ZTsKICB9IGVsc2UgaWYgKHN0YXRlLmNoaWxkcmVuKSB7CiAgICBjb250ZW50ID0gc3RhdGUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGNoaWxkKSB7CiAgICAgIGlmIChjaGlsZC5fYmFzZVN0YXRlLnRhZyA9PT0gJ251bGxfJykKICAgICAgICByZXR1cm4gY2hpbGQuX2VuY29kZShudWxsLCByZXBvcnRlciwgZGF0YSk7CgogICAgICBpZiAoY2hpbGQuX2Jhc2VTdGF0ZS5rZXkgPT09IG51bGwpCiAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdDaGlsZCBzaG91bGQgaGF2ZSBhIGtleScpOwogICAgICB2YXIgcHJldktleSA9IHJlcG9ydGVyLmVudGVyS2V5KGNoaWxkLl9iYXNlU3RhdGUua2V5KTsKCiAgICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpCiAgICAgICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdDaGlsZCBleHBlY3RlZCwgYnV0IGlucHV0IGlzIG5vdCBvYmplY3QnKTsKCiAgICAgIHZhciByZXMgPSBjaGlsZC5fZW5jb2RlKGRhdGFbY2hpbGQuX2Jhc2VTdGF0ZS5rZXldLCByZXBvcnRlciwgZGF0YSk7CiAgICAgIHJlcG9ydGVyLmxlYXZlS2V5KHByZXZLZXkpOwoKICAgICAgcmV0dXJuIHJlczsKICAgIH0sIHRoaXMpLmZpbHRlcihmdW5jdGlvbihjaGlsZCkgewogICAgICByZXR1cm4gY2hpbGQ7CiAgICB9KTsKICAgIGNvbnRlbnQgPSB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKGNvbnRlbnQpOwogIH0gZWxzZSB7CiAgICBpZiAoc3RhdGUudGFnID09PSAnc2Vxb2YnIHx8IHN0YXRlLnRhZyA9PT0gJ3NldG9mJykgewogICAgICAvLyBUT0RPKGluZHV0bnkpOiB0aGlzIHNob3VsZCBiZSB0aHJvd24gb24gRFNMIGxldmVsCiAgICAgIGlmICghKHN0YXRlLmFyZ3MgJiYgc3RhdGUuYXJncy5sZW5ndGggPT09IDEpKQogICAgICAgIHJldHVybiByZXBvcnRlci5lcnJvcignVG9vIG1hbnkgYXJncyBmb3IgOiAnICsgc3RhdGUudGFnKTsKCiAgICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkKICAgICAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ3NlcW9mL3NldG9mLCBidXQgZGF0YSBpcyBub3QgQXJyYXknKTsKCiAgICAgIHZhciBjaGlsZCA9IHRoaXMuY2xvbmUoKTsKICAgICAgY2hpbGQuX2Jhc2VTdGF0ZS5pbXBsaWNpdCA9IG51bGw7CiAgICAgIGNvbnRlbnQgPSB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKGRhdGEubWFwKGZ1bmN0aW9uKGl0ZW0pIHsKICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogICAgICAgIHJldHVybiB0aGlzLl9nZXRVc2Uoc3RhdGUuYXJnc1swXSwgZGF0YSkuX2VuY29kZShpdGVtLCByZXBvcnRlcik7CiAgICAgIH0sIGNoaWxkKSk7CiAgICB9IGVsc2UgaWYgKHN0YXRlLnVzZSAhPT0gbnVsbCkgewogICAgICByZXN1bHQgPSB0aGlzLl9nZXRVc2Uoc3RhdGUudXNlLCBwYXJlbnQpLl9lbmNvZGUoZGF0YSwgcmVwb3J0ZXIpOwogICAgfSBlbHNlIHsKICAgICAgY29udGVudCA9IHRoaXMuX2VuY29kZVByaW1pdGl2ZShzdGF0ZS50YWcsIGRhdGEpOwogICAgICBwcmltaXRpdmUgPSB0cnVlOwogICAgfQogIH0KCiAgLy8gRW5jb2RlIGRhdGEgaXRzZWxmCiAgdmFyIHJlc3VsdDsKICBpZiAoIXN0YXRlLmFueSAmJiBzdGF0ZS5jaG9pY2UgPT09IG51bGwpIHsKICAgIHZhciB0YWcgPSBzdGF0ZS5pbXBsaWNpdCAhPT0gbnVsbCA/IHN0YXRlLmltcGxpY2l0IDogc3RhdGUudGFnOwogICAgdmFyIGNscyA9IHN0YXRlLmltcGxpY2l0ID09PSBudWxsID8gJ3VuaXZlcnNhbCcgOiAnY29udGV4dCc7CgogICAgaWYgKHRhZyA9PT0gbnVsbCkgewogICAgICBpZiAoc3RhdGUudXNlID09PSBudWxsKQogICAgICAgIHJlcG9ydGVyLmVycm9yKCdUYWcgY291bGQgYmUgb21taXRlZCBvbmx5IGZvciAudXNlKCknKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChzdGF0ZS51c2UgPT09IG51bGwpCiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZW5jb2RlQ29tcG9zaXRlKHRhZywgcHJpbWl0aXZlLCBjbHMsIGNvbnRlbnQpOwogICAgfQogIH0KCiAgLy8gV3JhcCBpbiBleHBsaWNpdAogIGlmIChzdGF0ZS5leHBsaWNpdCAhPT0gbnVsbCkKICAgIHJlc3VsdCA9IHRoaXMuX2VuY29kZUNvbXBvc2l0ZShzdGF0ZS5leHBsaWNpdCwgZmFsc2UsICdjb250ZXh0JywgcmVzdWx0KTsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKCk5vZGUucHJvdG90eXBlLl9lbmNvZGVDaG9pY2UgPSBmdW5jdGlvbiBlbmNvZGVDaG9pY2UoZGF0YSwgcmVwb3J0ZXIpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9iYXNlU3RhdGU7CgogIHZhciBub2RlID0gc3RhdGUuY2hvaWNlW2RhdGEudHlwZV07CiAgaWYgKCFub2RlKSB7CiAgICBhc3NlcnQoCiAgICAgICAgZmFsc2UsCiAgICAgICAgZGF0YS50eXBlICsgJyBub3QgZm91bmQgaW4gJyArCiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHN0YXRlLmNob2ljZSkpKTsKICB9CiAgcmV0dXJuIG5vZGUuX2VuY29kZShkYXRhLnZhbHVlLCByZXBvcnRlcik7Cn07CgpOb2RlLnByb3RvdHlwZS5fZW5jb2RlUHJpbWl0aXZlID0gZnVuY3Rpb24gZW5jb2RlUHJpbWl0aXZlKHRhZywgZGF0YSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKCiAgaWYgKC9zdHIkLy50ZXN0KHRhZykpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlU3RyKGRhdGEsIHRhZyk7CiAgZWxzZSBpZiAodGFnID09PSAnb2JqaWQnICYmIHN0YXRlLmFyZ3MpCiAgICByZXR1cm4gdGhpcy5fZW5jb2RlT2JqaWQoZGF0YSwgc3RhdGUucmV2ZXJzZUFyZ3NbMF0sIHN0YXRlLmFyZ3NbMV0pOwogIGVsc2UgaWYgKHRhZyA9PT0gJ29iamlkJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVPYmppZChkYXRhLCBudWxsLCBudWxsKTsKICBlbHNlIGlmICh0YWcgPT09ICdnZW50aW1lJyB8fCB0YWcgPT09ICd1dGN0aW1lJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVUaW1lKGRhdGEsIHRhZyk7CiAgZWxzZSBpZiAodGFnID09PSAnbnVsbF8nKQogICAgcmV0dXJuIHRoaXMuX2VuY29kZU51bGwoKTsKICBlbHNlIGlmICh0YWcgPT09ICdpbnQnIHx8IHRhZyA9PT0gJ2VudW0nKQogICAgcmV0dXJuIHRoaXMuX2VuY29kZUludChkYXRhLCBzdGF0ZS5hcmdzICYmIHN0YXRlLnJldmVyc2VBcmdzWzBdKTsKICBlbHNlIGlmICh0YWcgPT09ICdib29sJykKICAgIHJldHVybiB0aGlzLl9lbmNvZGVCb29sKGRhdGEpOwogIGVsc2UKICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgdGFnOiAnICsgdGFnKTsKfTsKCk5vZGUucHJvdG90eXBlLl9pc051bXN0ciA9IGZ1bmN0aW9uIGlzTnVtc3RyKHN0cikgewogIHJldHVybiAvXlswLTkgXSokLy50ZXN0KHN0cik7Cn07CgpOb2RlLnByb3RvdHlwZS5faXNQcmludHN0ciA9IGZ1bmN0aW9uIGlzUHJpbnRzdHIoc3RyKSB7CiAgcmV0dXJuIC9eW0EtWmEtejAtOSAnXChcKVwrLFwtXC5cLzo9XD9dKiQvLnRlc3Qoc3RyKTsKfTsKCn0seyIuLi9iYXNlIjo0LCJtaW5pbWFsaXN0aWMtYXNzZXJ0IjoxMzR9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCmZ1bmN0aW9uIFJlcG9ydGVyKG9wdGlvbnMpIHsKICB0aGlzLl9yZXBvcnRlclN0YXRlID0gewogICAgb2JqOiBudWxsLAogICAgcGF0aDogW10sCiAgICBvcHRpb25zOiBvcHRpb25zIHx8IHt9LAogICAgZXJyb3JzOiBbXQogIH07Cn0KZXhwb3J0cy5SZXBvcnRlciA9IFJlcG9ydGVyOwoKUmVwb3J0ZXIucHJvdG90eXBlLmlzRXJyb3IgPSBmdW5jdGlvbiBpc0Vycm9yKG9iaikgewogIHJldHVybiBvYmogaW5zdGFuY2VvZiBSZXBvcnRlckVycm9yOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiBzYXZlKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHJldHVybiB7IG9iajogc3RhdGUub2JqLCBwYXRoTGVuOiBzdGF0ZS5wYXRoLmxlbmd0aCB9Owp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbiByZXN0b3JlKGRhdGEpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICBzdGF0ZS5vYmogPSBkYXRhLm9iajsKICBzdGF0ZS5wYXRoID0gc3RhdGUucGF0aC5zbGljZSgwLCBkYXRhLnBhdGhMZW4pOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLmVudGVyS2V5ID0gZnVuY3Rpb24gZW50ZXJLZXkoa2V5KSB7CiAgcmV0dXJuIHRoaXMuX3JlcG9ydGVyU3RhdGUucGF0aC5wdXNoKGtleSk7Cn07CgpSZXBvcnRlci5wcm90b3R5cGUubGVhdmVLZXkgPSBmdW5jdGlvbiBsZWF2ZUtleShpbmRleCwga2V5LCB2YWx1ZSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CgogIHN0YXRlLnBhdGggPSBzdGF0ZS5wYXRoLnNsaWNlKDAsIGluZGV4IC0gMSk7CiAgaWYgKHN0YXRlLm9iaiAhPT0gbnVsbCkKICAgIHN0YXRlLm9ialtrZXldID0gdmFsdWU7Cn07CgpSZXBvcnRlci5wcm90b3R5cGUuZW50ZXJPYmplY3QgPSBmdW5jdGlvbiBlbnRlck9iamVjdCgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICB2YXIgcHJldiA9IHN0YXRlLm9iajsKICBzdGF0ZS5vYmogPSB7fTsKICByZXR1cm4gcHJldjsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5sZWF2ZU9iamVjdCA9IGZ1bmN0aW9uIGxlYXZlT2JqZWN0KHByZXYpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZXBvcnRlclN0YXRlOwoKICB2YXIgbm93ID0gc3RhdGUub2JqOwogIHN0YXRlLm9iaiA9IHByZXY7CiAgcmV0dXJuIG5vdzsKfTsKClJlcG9ydGVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIGVycm9yKG1zZykgewogIHZhciBlcnI7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVwb3J0ZXJTdGF0ZTsKCiAgdmFyIGluaGVyaXRlZCA9IG1zZyBpbnN0YW5jZW9mIFJlcG9ydGVyRXJyb3I7CiAgaWYgKGluaGVyaXRlZCkgewogICAgZXJyID0gbXNnOwogIH0gZWxzZSB7CiAgICBlcnIgPSBuZXcgUmVwb3J0ZXJFcnJvcihzdGF0ZS5wYXRoLm1hcChmdW5jdGlvbihlbGVtKSB7CiAgICAgIHJldHVybiAnWycgKyBKU09OLnN0cmluZ2lmeShlbGVtKSArICddJzsKICAgIH0pLmpvaW4oJycpLCBtc2cubWVzc2FnZSB8fCBtc2csIG1zZy5zdGFjayk7CiAgfQoKICBpZiAoIXN0YXRlLm9wdGlvbnMucGFydGlhbCkKICAgIHRocm93IGVycjsKCiAgaWYgKCFpbmhlcml0ZWQpCiAgICBzdGF0ZS5lcnJvcnMucHVzaChlcnIpOwoKICByZXR1cm4gZXJyOwp9OwoKUmVwb3J0ZXIucHJvdG90eXBlLndyYXBSZXN1bHQgPSBmdW5jdGlvbiB3cmFwUmVzdWx0KHJlc3VsdCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlcG9ydGVyU3RhdGU7CiAgaWYgKCFzdGF0ZS5vcHRpb25zLnBhcnRpYWwpCiAgICByZXR1cm4gcmVzdWx0OwoKICByZXR1cm4gewogICAgcmVzdWx0OiB0aGlzLmlzRXJyb3IocmVzdWx0KSA/IG51bGwgOiByZXN1bHQsCiAgICBlcnJvcnM6IHN0YXRlLmVycm9ycwogIH07Cn07CgpmdW5jdGlvbiBSZXBvcnRlckVycm9yKHBhdGgsIG1zZykgewogIHRoaXMucGF0aCA9IHBhdGg7CiAgdGhpcy5yZXRocm93KG1zZyk7Cn07CmluaGVyaXRzKFJlcG9ydGVyRXJyb3IsIEVycm9yKTsKClJlcG9ydGVyRXJyb3IucHJvdG90eXBlLnJldGhyb3cgPSBmdW5jdGlvbiByZXRocm93KG1zZykgewogIHRoaXMubWVzc2FnZSA9IG1zZyArICcgYXQ6ICcgKyAodGhpcy5wYXRoIHx8ICcoc2hhbGxvdyknKTsKICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBSZXBvcnRlckVycm9yKTsKCiAgcmV0dXJuIHRoaXM7Cn07Cgp9LHsiaW5oZXJpdHMiOjEyOX1dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzJyk7CgpleHBvcnRzLnRhZ0NsYXNzID0gewogIDA6ICd1bml2ZXJzYWwnLAogIDE6ICdhcHBsaWNhdGlvbicsCiAgMjogJ2NvbnRleHQnLAogIDM6ICdwcml2YXRlJwp9OwpleHBvcnRzLnRhZ0NsYXNzQnlOYW1lID0gY29uc3RhbnRzLl9yZXZlcnNlKGV4cG9ydHMudGFnQ2xhc3MpOwoKZXhwb3J0cy50YWcgPSB7CiAgMHgwMDogJ2VuZCcsCiAgMHgwMTogJ2Jvb2wnLAogIDB4MDI6ICdpbnQnLAogIDB4MDM6ICdiaXRzdHInLAogIDB4MDQ6ICdvY3RzdHInLAogIDB4MDU6ICdudWxsXycsCiAgMHgwNjogJ29iamlkJywKICAweDA3OiAnb2JqRGVzYycsCiAgMHgwODogJ2V4dGVybmFsJywKICAweDA5OiAncmVhbCcsCiAgMHgwYTogJ2VudW0nLAogIDB4MGI6ICdlbWJlZCcsCiAgMHgwYzogJ3V0ZjhzdHInLAogIDB4MGQ6ICdyZWxhdGl2ZU9pZCcsCiAgMHgxMDogJ3NlcScsCiAgMHgxMTogJ3NldCcsCiAgMHgxMjogJ251bXN0cicsCiAgMHgxMzogJ3ByaW50c3RyJywKICAweDE0OiAndDYxc3RyJywKICAweDE1OiAndmlkZW9zdHInLAogIDB4MTY6ICdpYTVzdHInLAogIDB4MTc6ICd1dGN0aW1lJywKICAweDE4OiAnZ2VudGltZScsCiAgMHgxOTogJ2dyYXBoc3RyJywKICAweDFhOiAnaXNvNjQ2c3RyJywKICAweDFiOiAnZ2Vuc3RyJywKICAweDFjOiAndW5pc3RyJywKICAweDFkOiAnY2hhcnN0cicsCiAgMHgxZTogJ2JtcHN0cicKfTsKZXhwb3J0cy50YWdCeU5hbWUgPSBjb25zdGFudHMuX3JldmVyc2UoZXhwb3J0cy50YWcpOwoKfSx7Ii4uL2NvbnN0YW50cyI6OH1dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgY29uc3RhbnRzID0gZXhwb3J0czsKCi8vIEhlbHBlcgpjb25zdGFudHMuX3JldmVyc2UgPSBmdW5jdGlvbiByZXZlcnNlKG1hcCkgewogIHZhciByZXMgPSB7fTsKCiAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgLy8gQ29udmVydCBrZXkgdG8gaW50ZWdlciBpZiBpdCBpcyBzdHJpbmdpZmllZAogICAgaWYgKChrZXkgfCAwKSA9PSBrZXkpCiAgICAgIGtleSA9IGtleSB8IDA7CgogICAgdmFyIHZhbHVlID0gbWFwW2tleV07CiAgICByZXNbdmFsdWVdID0ga2V5OwogIH0pOwoKICByZXR1cm4gcmVzOwp9OwoKY29uc3RhbnRzLmRlciA9IHJlcXVpcmUoJy4vZGVyJyk7Cgp9LHsiLi9kZXIiOjd9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCnZhciBhc24xID0gcmVxdWlyZSgnLi4vLi4vYXNuMScpOwp2YXIgYmFzZSA9IGFzbjEuYmFzZTsKdmFyIGJpZ251bSA9IGFzbjEuYmlnbnVtOwoKLy8gSW1wb3J0IERFUiBjb25zdGFudHMKdmFyIGRlciA9IGFzbjEuY29uc3RhbnRzLmRlcjsKCmZ1bmN0aW9uIERFUkRlY29kZXIoZW50aXR5KSB7CiAgdGhpcy5lbmMgPSAnZGVyJzsKICB0aGlzLm5hbWUgPSBlbnRpdHkubmFtZTsKICB0aGlzLmVudGl0eSA9IGVudGl0eTsKCiAgLy8gQ29uc3RydWN0IGJhc2UgdHJlZQogIHRoaXMudHJlZSA9IG5ldyBERVJOb2RlKCk7CiAgdGhpcy50cmVlLl9pbml0KGVudGl0eS5ib2R5KTsKfTsKbW9kdWxlLmV4cG9ydHMgPSBERVJEZWNvZGVyOwoKREVSRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gZGVjb2RlKGRhdGEsIG9wdGlvbnMpIHsKICBpZiAoIShkYXRhIGluc3RhbmNlb2YgYmFzZS5EZWNvZGVyQnVmZmVyKSkKICAgIGRhdGEgPSBuZXcgYmFzZS5EZWNvZGVyQnVmZmVyKGRhdGEsIG9wdGlvbnMpOwoKICByZXR1cm4gdGhpcy50cmVlLl9kZWNvZGUoZGF0YSwgb3B0aW9ucyk7Cn07CgovLyBUcmVlIG1ldGhvZHMKCmZ1bmN0aW9uIERFUk5vZGUocGFyZW50KSB7CiAgYmFzZS5Ob2RlLmNhbGwodGhpcywgJ2RlcicsIHBhcmVudCk7Cn0KaW5oZXJpdHMoREVSTm9kZSwgYmFzZS5Ob2RlKTsKCkRFUk5vZGUucHJvdG90eXBlLl9wZWVrVGFnID0gZnVuY3Rpb24gcGVla1RhZyhidWZmZXIsIHRhZywgYW55KSB7CiAgaWYgKGJ1ZmZlci5pc0VtcHR5KCkpCiAgICByZXR1cm4gZmFsc2U7CgogIHZhciBzdGF0ZSA9IGJ1ZmZlci5zYXZlKCk7CiAgdmFyIGRlY29kZWRUYWcgPSBkZXJEZWNvZGVUYWcoYnVmZmVyLCAnRmFpbGVkIHRvIHBlZWsgdGFnOiAiJyArIHRhZyArICciJyk7CiAgaWYgKGJ1ZmZlci5pc0Vycm9yKGRlY29kZWRUYWcpKQogICAgcmV0dXJuIGRlY29kZWRUYWc7CgogIGJ1ZmZlci5yZXN0b3JlKHN0YXRlKTsKCiAgcmV0dXJuIGRlY29kZWRUYWcudGFnID09PSB0YWcgfHwgZGVjb2RlZFRhZy50YWdTdHIgPT09IHRhZyB8fCBhbnk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlVGFnID0gZnVuY3Rpb24gZGVjb2RlVGFnKGJ1ZmZlciwgdGFnLCBhbnkpIHsKICB2YXIgZGVjb2RlZFRhZyA9IGRlckRlY29kZVRhZyhidWZmZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZhaWxlZCB0byBkZWNvZGUgdGFnIG9mICInICsgdGFnICsgJyInKTsKICBpZiAoYnVmZmVyLmlzRXJyb3IoZGVjb2RlZFRhZykpCiAgICByZXR1cm4gZGVjb2RlZFRhZzsKCiAgdmFyIGxlbiA9IGRlckRlY29kZUxlbihidWZmZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICBkZWNvZGVkVGFnLnByaW1pdGl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICdGYWlsZWQgdG8gZ2V0IGxlbmd0aCBvZiAiJyArIHRhZyArICciJyk7CgogIC8vIEZhaWx1cmUKICBpZiAoYnVmZmVyLmlzRXJyb3IobGVuKSkKICAgIHJldHVybiBsZW47CgogIGlmICghYW55ICYmCiAgICAgIGRlY29kZWRUYWcudGFnICE9PSB0YWcgJiYKICAgICAgZGVjb2RlZFRhZy50YWdTdHIgIT09IHRhZyAmJgogICAgICBkZWNvZGVkVGFnLnRhZ1N0ciArICdvZicgIT09IHRhZykgewogICAgcmV0dXJuIGJ1ZmZlci5lcnJvcignRmFpbGVkIHRvIG1hdGNoIHRhZzogIicgKyB0YWcgKyAnIicpOwogIH0KCiAgaWYgKGRlY29kZWRUYWcucHJpbWl0aXZlIHx8IGxlbiAhPT0gbnVsbCkKICAgIHJldHVybiBidWZmZXIuc2tpcChsZW4sICdGYWlsZWQgdG8gbWF0Y2ggYm9keSBvZjogIicgKyB0YWcgKyAnIicpOwoKICAvLyBJbmRlZmluaXRlIGxlbmd0aC4uLiBmaW5kIEVORCB0YWcKICB2YXIgc3RhdGUgPSBidWZmZXIuc2F2ZSgpOwogIHZhciByZXMgPSB0aGlzLl9za2lwVW50aWxFbmQoCiAgICAgIGJ1ZmZlciwKICAgICAgJ0ZhaWxlZCB0byBza2lwIGluZGVmaW5pdGUgbGVuZ3RoIGJvZHk6ICInICsgdGhpcy50YWcgKyAnIicpOwogIGlmIChidWZmZXIuaXNFcnJvcihyZXMpKQogICAgcmV0dXJuIHJlczsKCiAgbGVuID0gYnVmZmVyLm9mZnNldCAtIHN0YXRlLm9mZnNldDsKICBidWZmZXIucmVzdG9yZShzdGF0ZSk7CiAgcmV0dXJuIGJ1ZmZlci5za2lwKGxlbiwgJ0ZhaWxlZCB0byBtYXRjaCBib2R5IG9mOiAiJyArIHRhZyArICciJyk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fc2tpcFVudGlsRW5kID0gZnVuY3Rpb24gc2tpcFVudGlsRW5kKGJ1ZmZlciwgZmFpbCkgewogIHdoaWxlICh0cnVlKSB7CiAgICB2YXIgdGFnID0gZGVyRGVjb2RlVGFnKGJ1ZmZlciwgZmFpbCk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IodGFnKSkKICAgICAgcmV0dXJuIHRhZzsKICAgIHZhciBsZW4gPSBkZXJEZWNvZGVMZW4oYnVmZmVyLCB0YWcucHJpbWl0aXZlLCBmYWlsKTsKICAgIGlmIChidWZmZXIuaXNFcnJvcihsZW4pKQogICAgICByZXR1cm4gbGVuOwoKICAgIHZhciByZXM7CiAgICBpZiAodGFnLnByaW1pdGl2ZSB8fCBsZW4gIT09IG51bGwpCiAgICAgIHJlcyA9IGJ1ZmZlci5za2lwKGxlbikKICAgIGVsc2UKICAgICAgcmVzID0gdGhpcy5fc2tpcFVudGlsRW5kKGJ1ZmZlciwgZmFpbCk7CgogICAgLy8gRmFpbHVyZQogICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHJlcykpCiAgICAgIHJldHVybiByZXM7CgogICAgaWYgKHRhZy50YWdTdHIgPT09ICdlbmQnKQogICAgICBicmVhazsKICB9Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlTGlzdCA9IGZ1bmN0aW9uIGRlY29kZUxpc3QoYnVmZmVyLCB0YWcsIGRlY29kZXIpIHsKICB2YXIgcmVzdWx0ID0gW107CiAgd2hpbGUgKCFidWZmZXIuaXNFbXB0eSgpKSB7CiAgICB2YXIgcG9zc2libGVFbmQgPSB0aGlzLl9wZWVrVGFnKGJ1ZmZlciwgJ2VuZCcpOwogICAgaWYgKGJ1ZmZlci5pc0Vycm9yKHBvc3NpYmxlRW5kKSkKICAgICAgcmV0dXJuIHBvc3NpYmxlRW5kOwoKICAgIHZhciByZXMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIsICdkZXInKTsKICAgIGlmIChidWZmZXIuaXNFcnJvcihyZXMpICYmIHBvc3NpYmxlRW5kKQogICAgICBicmVhazsKICAgIHJlc3VsdC5wdXNoKHJlcyk7CiAgfQogIHJldHVybiByZXN1bHQ7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlU3RyID0gZnVuY3Rpb24gZGVjb2RlU3RyKGJ1ZmZlciwgdGFnKSB7CiAgaWYgKHRhZyA9PT0gJ2JpdHN0cicpIHsKICAgIHZhciB1bnVzZWQgPSBidWZmZXIucmVhZFVJbnQ4KCk7CiAgICBpZiAoYnVmZmVyLmlzRXJyb3IodW51c2VkKSkKICAgICAgcmV0dXJuIHVudXNlZDsKICAgIHJldHVybiB7IHVudXNlZDogdW51c2VkLCBkYXRhOiBidWZmZXIucmF3KCkgfTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ2JtcHN0cicpIHsKICAgIHZhciByYXcgPSBidWZmZXIucmF3KCk7CiAgICBpZiAocmF3Lmxlbmd0aCAlIDIgPT09IDEpCiAgICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nIG9mIHN0cmluZyB0eXBlOiBibXBzdHIgbGVuZ3RoIG1pc21hdGNoJyk7CgogICAgdmFyIHN0ciA9ICcnOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYXcubGVuZ3RoIC8gMjsgaSsrKSB7CiAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJhdy5yZWFkVUludDE2QkUoaSAqIDIpKTsKICAgIH0KICAgIHJldHVybiBzdHI7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdudW1zdHInKSB7CiAgICB2YXIgbnVtc3RyID0gYnVmZmVyLnJhdygpLnRvU3RyaW5nKCdhc2NpaScpOwogICAgaWYgKCF0aGlzLl9pc051bXN0cihudW1zdHIpKSB7CiAgICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nIG9mIHN0cmluZyB0eXBlOiAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAnbnVtc3RyIHVuc3VwcG9ydGVkIGNoYXJhY3RlcnMnKTsKICAgIH0KICAgIHJldHVybiBudW1zdHI7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdvY3RzdHInKSB7CiAgICByZXR1cm4gYnVmZmVyLnJhdygpOwogIH0gZWxzZSBpZiAodGFnID09PSAncHJpbnRzdHInKSB7CiAgICB2YXIgcHJpbnRzdHIgPSBidWZmZXIucmF3KCkudG9TdHJpbmcoJ2FzY2lpJyk7CiAgICBpZiAoIXRoaXMuX2lzUHJpbnRzdHIocHJpbnRzdHIpKSB7CiAgICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nIG9mIHN0cmluZyB0eXBlOiAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAncHJpbnRzdHIgdW5zdXBwb3J0ZWQgY2hhcmFjdGVycycpOwogICAgfQogICAgcmV0dXJuIHByaW50c3RyOwogIH0gZWxzZSBpZiAoL3N0ciQvLnRlc3QodGFnKSkgewogICAgcmV0dXJuIGJ1ZmZlci5yYXcoKS50b1N0cmluZygpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gYnVmZmVyLmVycm9yKCdEZWNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArIHRhZyArICcgdW5zdXBwb3J0ZWQnKTsKICB9Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlT2JqaWQgPSBmdW5jdGlvbiBkZWNvZGVPYmppZChidWZmZXIsIHZhbHVlcywgcmVsYXRpdmUpIHsKICB2YXIgcmVzdWx0OwogIHZhciBpZGVudGlmaWVycyA9IFtdOwogIHZhciBpZGVudCA9IDA7CiAgd2hpbGUgKCFidWZmZXIuaXNFbXB0eSgpKSB7CiAgICB2YXIgc3ViaWRlbnQgPSBidWZmZXIucmVhZFVJbnQ4KCk7CiAgICBpZGVudCA8PD0gNzsKICAgIGlkZW50IHw9IHN1YmlkZW50ICYgMHg3ZjsKICAgIGlmICgoc3ViaWRlbnQgJiAweDgwKSA9PT0gMCkgewogICAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50KTsKICAgICAgaWRlbnQgPSAwOwogICAgfQogIH0KICBpZiAoc3ViaWRlbnQgJiAweDgwKQogICAgaWRlbnRpZmllcnMucHVzaChpZGVudCk7CgogIHZhciBmaXJzdCA9IChpZGVudGlmaWVyc1swXSAvIDQwKSB8IDA7CiAgdmFyIHNlY29uZCA9IGlkZW50aWZpZXJzWzBdICUgNDA7CgogIGlmIChyZWxhdGl2ZSkKICAgIHJlc3VsdCA9IGlkZW50aWZpZXJzOwogIGVsc2UKICAgIHJlc3VsdCA9IFtmaXJzdCwgc2Vjb25kXS5jb25jYXQoaWRlbnRpZmllcnMuc2xpY2UoMSkpOwoKICBpZiAodmFsdWVzKSB7CiAgICB2YXIgdG1wID0gdmFsdWVzW3Jlc3VsdC5qb2luKCcgJyldOwogICAgaWYgKHRtcCA9PT0gdW5kZWZpbmVkKQogICAgICB0bXAgPSB2YWx1ZXNbcmVzdWx0LmpvaW4oJy4nKV07CiAgICBpZiAodG1wICE9PSB1bmRlZmluZWQpCiAgICAgIHJlc3VsdCA9IHRtcDsKICB9CgogIHJldHVybiByZXN1bHQ7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZGVjb2RlVGltZSA9IGZ1bmN0aW9uIGRlY29kZVRpbWUoYnVmZmVyLCB0YWcpIHsKICB2YXIgc3RyID0gYnVmZmVyLnJhdygpLnRvU3RyaW5nKCk7CiAgaWYgKHRhZyA9PT0gJ2dlbnRpbWUnKSB7CiAgICB2YXIgeWVhciA9IHN0ci5zbGljZSgwLCA0KSB8IDA7CiAgICB2YXIgbW9uID0gc3RyLnNsaWNlKDQsIDYpIHwgMDsKICAgIHZhciBkYXkgPSBzdHIuc2xpY2UoNiwgOCkgfCAwOwogICAgdmFyIGhvdXIgPSBzdHIuc2xpY2UoOCwgMTApIHwgMDsKICAgIHZhciBtaW4gPSBzdHIuc2xpY2UoMTAsIDEyKSB8IDA7CiAgICB2YXIgc2VjID0gc3RyLnNsaWNlKDEyLCAxNCkgfCAwOwogIH0gZWxzZSBpZiAodGFnID09PSAndXRjdGltZScpIHsKICAgIHZhciB5ZWFyID0gc3RyLnNsaWNlKDAsIDIpIHwgMDsKICAgIHZhciBtb24gPSBzdHIuc2xpY2UoMiwgNCkgfCAwOwogICAgdmFyIGRheSA9IHN0ci5zbGljZSg0LCA2KSB8IDA7CiAgICB2YXIgaG91ciA9IHN0ci5zbGljZSg2LCA4KSB8IDA7CiAgICB2YXIgbWluID0gc3RyLnNsaWNlKDgsIDEwKSB8IDA7CiAgICB2YXIgc2VjID0gc3RyLnNsaWNlKDEwLCAxMikgfCAwOwogICAgaWYgKHllYXIgPCA3MCkKICAgICAgeWVhciA9IDIwMDAgKyB5ZWFyOwogICAgZWxzZQogICAgICB5ZWFyID0gMTkwMCArIHllYXI7CiAgfSBlbHNlIHsKICAgIHJldHVybiBidWZmZXIuZXJyb3IoJ0RlY29kaW5nICcgKyB0YWcgKyAnIHRpbWUgaXMgbm90IHN1cHBvcnRlZCB5ZXQnKTsKICB9CgogIHJldHVybiBEYXRlLlVUQyh5ZWFyLCBtb24gLSAxLCBkYXksIGhvdXIsIG1pbiwgc2VjLCAwKTsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVOdWxsID0gZnVuY3Rpb24gZGVjb2RlTnVsbChidWZmZXIpIHsKICByZXR1cm4gbnVsbDsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9kZWNvZGVCb29sID0gZnVuY3Rpb24gZGVjb2RlQm9vbChidWZmZXIpIHsKICB2YXIgcmVzID0gYnVmZmVyLnJlYWRVSW50OCgpOwogIGlmIChidWZmZXIuaXNFcnJvcihyZXMpKQogICAgcmV0dXJuIHJlczsKICBlbHNlCiAgICByZXR1cm4gcmVzICE9PSAwOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2RlY29kZUludCA9IGZ1bmN0aW9uIGRlY29kZUludChidWZmZXIsIHZhbHVlcykgewogIC8vIEJpZ2ludCwgcmV0dXJuIGFzIGl0IGlzIChhc3N1bWUgYmlnIGVuZGlhbikKICB2YXIgcmF3ID0gYnVmZmVyLnJhdygpOwogIHZhciByZXMgPSBuZXcgYmlnbnVtKHJhdyk7CgogIGlmICh2YWx1ZXMpCiAgICByZXMgPSB2YWx1ZXNbcmVzLnRvU3RyaW5nKDEwKV0gfHwgcmVzOwoKICByZXR1cm4gcmVzOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX3VzZSA9IGZ1bmN0aW9uIHVzZShlbnRpdHksIG9iaikgewogIGlmICh0eXBlb2YgZW50aXR5ID09PSAnZnVuY3Rpb24nKQogICAgZW50aXR5ID0gZW50aXR5KG9iaik7CiAgcmV0dXJuIGVudGl0eS5fZ2V0RGVjb2RlcignZGVyJykudHJlZTsKfTsKCi8vIFV0aWxpdHkgbWV0aG9kcwoKZnVuY3Rpb24gZGVyRGVjb2RlVGFnKGJ1ZiwgZmFpbCkgewogIHZhciB0YWcgPSBidWYucmVhZFVJbnQ4KGZhaWwpOwogIGlmIChidWYuaXNFcnJvcih0YWcpKQogICAgcmV0dXJuIHRhZzsKCiAgdmFyIGNscyA9IGRlci50YWdDbGFzc1t0YWcgPj4gNl07CiAgdmFyIHByaW1pdGl2ZSA9ICh0YWcgJiAweDIwKSA9PT0gMDsKCiAgLy8gTXVsdGktb2N0ZXQgdGFnIC0gbG9hZAogIGlmICgodGFnICYgMHgxZikgPT09IDB4MWYpIHsKICAgIHZhciBvY3QgPSB0YWc7CiAgICB0YWcgPSAwOwogICAgd2hpbGUgKChvY3QgJiAweDgwKSA9PT0gMHg4MCkgewogICAgICBvY3QgPSBidWYucmVhZFVJbnQ4KGZhaWwpOwogICAgICBpZiAoYnVmLmlzRXJyb3Iob2N0KSkKICAgICAgICByZXR1cm4gb2N0OwoKICAgICAgdGFnIDw8PSA3OwogICAgICB0YWcgfD0gb2N0ICYgMHg3ZjsKICAgIH0KICB9IGVsc2UgewogICAgdGFnICY9IDB4MWY7CiAgfQogIHZhciB0YWdTdHIgPSBkZXIudGFnW3RhZ107CgogIHJldHVybiB7CiAgICBjbHM6IGNscywKICAgIHByaW1pdGl2ZTogcHJpbWl0aXZlLAogICAgdGFnOiB0YWcsCiAgICB0YWdTdHI6IHRhZ1N0cgogIH07Cn0KCmZ1bmN0aW9uIGRlckRlY29kZUxlbihidWYsIHByaW1pdGl2ZSwgZmFpbCkgewogIHZhciBsZW4gPSBidWYucmVhZFVJbnQ4KGZhaWwpOwogIGlmIChidWYuaXNFcnJvcihsZW4pKQogICAgcmV0dXJuIGxlbjsKCiAgLy8gSW5kZWZpbml0ZSBmb3JtCiAgaWYgKCFwcmltaXRpdmUgJiYgbGVuID09PSAweDgwKQogICAgcmV0dXJuIG51bGw7CgogIC8vIERlZmluaXRlIGZvcm0KICBpZiAoKGxlbiAmIDB4ODApID09PSAwKSB7CiAgICAvLyBTaG9ydCBmb3JtCiAgICByZXR1cm4gbGVuOwogIH0KCiAgLy8gTG9uZyBmb3JtCiAgdmFyIG51bSA9IGxlbiAmIDB4N2Y7CiAgaWYgKG51bSA+PSA0KQogICAgcmV0dXJuIGJ1Zi5lcnJvcignbGVuZ3RoIG9jdGVjdCBpcyB0b28gbG9uZycpOwoKICBsZW4gPSAwOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtOyBpKyspIHsKICAgIGxlbiA8PD0gODsKICAgIHZhciBqID0gYnVmLnJlYWRVSW50OChmYWlsKTsKICAgIGlmIChidWYuaXNFcnJvcihqKSkKICAgICAgcmV0dXJuIGo7CiAgICBsZW4gfD0gajsKICB9CgogIHJldHVybiBsZW47Cn0KCn0seyIuLi8uLi9hc24xIjoxLCJpbmhlcml0cyI6MTI5fV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZGVjb2RlcnMgPSBleHBvcnRzOwoKZGVjb2RlcnMuZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKZGVjb2RlcnMucGVtID0gcmVxdWlyZSgnLi9wZW0nKTsKCn0seyIuL2RlciI6OSwiLi9wZW0iOjExfV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwoKdmFyIGFzbjEgPSByZXF1aXJlKCcuLi8uLi9hc24xJyk7CnZhciBERVJEZWNvZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKCmZ1bmN0aW9uIFBFTURlY29kZXIoZW50aXR5KSB7CiAgREVSRGVjb2Rlci5jYWxsKHRoaXMsIGVudGl0eSk7CiAgdGhpcy5lbmMgPSAncGVtJzsKfTsKaW5oZXJpdHMoUEVNRGVjb2RlciwgREVSRGVjb2Rlcik7Cm1vZHVsZS5leHBvcnRzID0gUEVNRGVjb2RlcjsKClBFTURlY29kZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShkYXRhLCBvcHRpb25zKSB7CiAgdmFyIGxpbmVzID0gZGF0YS50b1N0cmluZygpLnNwbGl0KC9bXHJcbl0rL2cpOwoKICB2YXIgbGFiZWwgPSBvcHRpb25zLmxhYmVsLnRvVXBwZXJDYXNlKCk7CgogIHZhciByZSA9IC9eLS0tLS0oQkVHSU58RU5EKSAoW14tXSspLS0tLS0kLzsKICB2YXIgc3RhcnQgPSAtMTsKICB2YXIgZW5kID0gLTE7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgdmFyIG1hdGNoID0gbGluZXNbaV0ubWF0Y2gocmUpOwogICAgaWYgKG1hdGNoID09PSBudWxsKQogICAgICBjb250aW51ZTsKCiAgICBpZiAobWF0Y2hbMl0gIT09IGxhYmVsKQogICAgICBjb250aW51ZTsKCiAgICBpZiAoc3RhcnQgPT09IC0xKSB7CiAgICAgIGlmIChtYXRjaFsxXSAhPT0gJ0JFR0lOJykKICAgICAgICBicmVhazsKICAgICAgc3RhcnQgPSBpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKG1hdGNoWzFdICE9PSAnRU5EJykKICAgICAgICBicmVhazsKICAgICAgZW5kID0gaTsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIGlmIChzdGFydCA9PT0gLTEgfHwgZW5kID09PSAtMSkKICAgIHRocm93IG5ldyBFcnJvcignUEVNIHNlY3Rpb24gbm90IGZvdW5kIGZvcjogJyArIGxhYmVsKTsKCiAgdmFyIGJhc2U2NCA9IGxpbmVzLnNsaWNlKHN0YXJ0ICsgMSwgZW5kKS5qb2luKCcnKTsKICAvLyBSZW1vdmUgZXhjZXNzaXZlIHN5bWJvbHMKICBiYXNlNjQucmVwbGFjZSgvW15hLXowLTlcK1wvPV0rL2dpLCAnJyk7CgogIHZhciBpbnB1dCA9IG5ldyBCdWZmZXIoYmFzZTY0LCAnYmFzZTY0Jyk7CiAgcmV0dXJuIERFUkRlY29kZXIucHJvdG90eXBlLmRlY29kZS5jYWxsKHRoaXMsIGlucHV0LCBvcHRpb25zKTsKfTsKCn0seyIuLi8uLi9hc24xIjoxLCIuL2RlciI6OSwiYnVmZmVyIjo3MCwiaW5oZXJpdHMiOjEyOX1dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCnZhciBhc24xID0gcmVxdWlyZSgnLi4vLi4vYXNuMScpOwp2YXIgYmFzZSA9IGFzbjEuYmFzZTsKdmFyIGJpZ251bSA9IGFzbjEuYmlnbnVtOwoKLy8gSW1wb3J0IERFUiBjb25zdGFudHMKdmFyIGRlciA9IGFzbjEuY29uc3RhbnRzLmRlcjsKCmZ1bmN0aW9uIERFUkVuY29kZXIoZW50aXR5KSB7CiAgdGhpcy5lbmMgPSAnZGVyJzsKICB0aGlzLm5hbWUgPSBlbnRpdHkubmFtZTsKICB0aGlzLmVudGl0eSA9IGVudGl0eTsKCiAgLy8gQ29uc3RydWN0IGJhc2UgdHJlZQogIHRoaXMudHJlZSA9IG5ldyBERVJOb2RlKCk7CiAgdGhpcy50cmVlLl9pbml0KGVudGl0eS5ib2R5KTsKfTsKbW9kdWxlLmV4cG9ydHMgPSBERVJFbmNvZGVyOwoKREVSRW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKGRhdGEsIHJlcG9ydGVyKSB7CiAgcmV0dXJuIHRoaXMudHJlZS5fZW5jb2RlKGRhdGEsIHJlcG9ydGVyKS5qb2luKCk7Cn07CgovLyBUcmVlIG1ldGhvZHMKCmZ1bmN0aW9uIERFUk5vZGUocGFyZW50KSB7CiAgYmFzZS5Ob2RlLmNhbGwodGhpcywgJ2RlcicsIHBhcmVudCk7Cn0KaW5oZXJpdHMoREVSTm9kZSwgYmFzZS5Ob2RlKTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVDb21wb3NpdGUgPSBmdW5jdGlvbiBlbmNvZGVDb21wb3NpdGUodGFnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCkgewogIHZhciBlbmNvZGVkVGFnID0gZW5jb2RlVGFnKHRhZywgcHJpbWl0aXZlLCBjbHMsIHRoaXMucmVwb3J0ZXIpOwoKICAvLyBTaG9ydCBmb3JtCiAgaWYgKGNvbnRlbnQubGVuZ3RoIDwgMHg4MCkgewogICAgdmFyIGhlYWRlciA9IG5ldyBCdWZmZXIoMik7CiAgICBoZWFkZXJbMF0gPSBlbmNvZGVkVGFnOwogICAgaGVhZGVyWzFdID0gY29udGVudC5sZW5ndGg7CiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbIGhlYWRlciwgY29udGVudCBdKTsKICB9CgogIC8vIExvbmcgZm9ybQogIC8vIENvdW50IG9jdGV0cyByZXF1aXJlZCB0byBzdG9yZSBsZW5ndGgKICB2YXIgbGVuT2N0ZXRzID0gMTsKICBmb3IgKHZhciBpID0gY29udGVudC5sZW5ndGg7IGkgPj0gMHgxMDA7IGkgPj49IDgpCiAgICBsZW5PY3RldHMrKzsKCiAgdmFyIGhlYWRlciA9IG5ldyBCdWZmZXIoMSArIDEgKyBsZW5PY3RldHMpOwogIGhlYWRlclswXSA9IGVuY29kZWRUYWc7CiAgaGVhZGVyWzFdID0gMHg4MCB8IGxlbk9jdGV0czsKCiAgZm9yICh2YXIgaSA9IDEgKyBsZW5PY3RldHMsIGogPSBjb250ZW50Lmxlbmd0aDsgaiA+IDA7IGktLSwgaiA+Pj0gOCkKICAgIGhlYWRlcltpXSA9IGogJiAweGZmOwoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihbIGhlYWRlciwgY29udGVudCBdKTsKfTsKCkRFUk5vZGUucHJvdG90eXBlLl9lbmNvZGVTdHIgPSBmdW5jdGlvbiBlbmNvZGVTdHIoc3RyLCB0YWcpIHsKICBpZiAodGFnID09PSAnYml0c3RyJykgewogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoWyBzdHIudW51c2VkIHwgMCwgc3RyLmRhdGEgXSk7CiAgfSBlbHNlIGlmICh0YWcgPT09ICdibXBzdHInKSB7CiAgICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdHIubGVuZ3RoICogMik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgICBidWYud3JpdGVVSW50MTZCRShzdHIuY2hhckNvZGVBdChpKSwgaSAqIDIpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoYnVmKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ251bXN0cicpIHsKICAgIGlmICghdGhpcy5faXNOdW1zdHIoc3RyKSkgewogICAgICByZXR1cm4gdGhpcy5yZXBvcnRlci5lcnJvcignRW5jb2Rpbmcgb2Ygc3RyaW5nIHR5cGU6IG51bXN0ciBzdXBwb3J0cyAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29ubHkgZGlnaXRzIGFuZCBzcGFjZScpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoc3RyKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3ByaW50c3RyJykgewogICAgaWYgKCF0aGlzLl9pc1ByaW50c3RyKHN0cikpIHsKICAgICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nIG9mIHN0cmluZyB0eXBlOiBwcmludHN0ciBzdXBwb3J0cyAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29ubHkgbGF0aW4gdXBwZXIgYW5kIGxvd2VyIGNhc2UgbGV0dGVycywgJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaWdpdHMsIHNwYWNlLCBhcG9zdHJvcGhlLCBsZWZ0IGFuZCByaWd0aCAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BhcmVudGhlc2lzLCBwbHVzIHNpZ24sIGNvbW1hLCBoeXBoZW4sICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZG90LCBzbGFzaCwgY29sb24sIGVxdWFsIHNpZ24sICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncXVlc3Rpb24gbWFyaycpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoc3RyKTsKICB9IGVsc2UgaWYgKC9zdHIkLy50ZXN0KHRhZykpIHsKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKHN0cik7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdFbmNvZGluZyBvZiBzdHJpbmcgdHlwZTogJyArIHRhZyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHVuc3VwcG9ydGVkJyk7CiAgfQp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZU9iamlkID0gZnVuY3Rpb24gZW5jb2RlT2JqaWQoaWQsIHZhbHVlcywgcmVsYXRpdmUpIHsKICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykgewogICAgaWYgKCF2YWx1ZXMpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdzdHJpbmcgb2JqaWQgZ2l2ZW4sIGJ1dCBubyB2YWx1ZXMgbWFwIGZvdW5kJyk7CiAgICBpZiAoIXZhbHVlcy5oYXNPd25Qcm9wZXJ0eShpZCkpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdvYmppZCBub3QgZm91bmQgaW4gdmFsdWVzIG1hcCcpOwogICAgaWQgPSB2YWx1ZXNbaWRdLnNwbGl0KC9bXHNcLl0rL2cpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZC5sZW5ndGg7IGkrKykKICAgICAgaWRbaV0gfD0gMDsKICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaWQpKSB7CiAgICBpZCA9IGlkLnNsaWNlKCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlkLmxlbmd0aDsgaSsrKQogICAgICBpZFtpXSB8PSAwOwogIH0KCiAgaWYgKCFBcnJheS5pc0FycmF5KGlkKSkgewogICAgcmV0dXJuIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ29iamlkKCkgc2hvdWxkIGJlIGVpdGhlciBhcnJheSBvciBzdHJpbmcsICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dvdDogJyArIEpTT04uc3RyaW5naWZ5KGlkKSk7CiAgfQoKICBpZiAoIXJlbGF0aXZlKSB7CiAgICBpZiAoaWRbMV0gPj0gNDApCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdTZWNvbmQgb2JqaWQgaWRlbnRpZmllciBPT0InKTsKICAgIGlkLnNwbGljZSgwLCAyLCBpZFswXSAqIDQwICsgaWRbMV0pOwogIH0KCiAgLy8gQ291bnQgbnVtYmVyIG9mIG9jdGV0cwogIHZhciBzaXplID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IGlkLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgaWRlbnQgPSBpZFtpXTsKICAgIGZvciAoc2l6ZSsrOyBpZGVudCA+PSAweDgwOyBpZGVudCA+Pj0gNykKICAgICAgc2l6ZSsrOwogIH0KCiAgdmFyIG9iamlkID0gbmV3IEJ1ZmZlcihzaXplKTsKICB2YXIgb2Zmc2V0ID0gb2JqaWQubGVuZ3RoIC0gMTsKICBmb3IgKHZhciBpID0gaWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIHZhciBpZGVudCA9IGlkW2ldOwogICAgb2JqaWRbb2Zmc2V0LS1dID0gaWRlbnQgJiAweDdmOwogICAgd2hpbGUgKChpZGVudCA+Pj0gNykgPiAwKQogICAgICBvYmppZFtvZmZzZXQtLV0gPSAweDgwIHwgKGlkZW50ICYgMHg3Zik7CiAgfQoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihvYmppZCk7Cn07CgpmdW5jdGlvbiB0d28obnVtKSB7CiAgaWYgKG51bSA8IDEwKQogICAgcmV0dXJuICcwJyArIG51bTsKICBlbHNlCiAgICByZXR1cm4gbnVtOwp9CgpERVJOb2RlLnByb3RvdHlwZS5fZW5jb2RlVGltZSA9IGZ1bmN0aW9uIGVuY29kZVRpbWUodGltZSwgdGFnKSB7CiAgdmFyIHN0cjsKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpOwoKICBpZiAodGFnID09PSAnZ2VudGltZScpIHsKICAgIHN0ciA9IFsKICAgICAgdHdvKGRhdGUuZ2V0RnVsbFllYXIoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ01vbnRoKCkgKyAxKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDRGF0ZSgpKSwKICAgICAgdHdvKGRhdGUuZ2V0VVRDSG91cnMoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ01pbnV0ZXMoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ1NlY29uZHMoKSksCiAgICAgICdaJwogICAgXS5qb2luKCcnKTsKICB9IGVsc2UgaWYgKHRhZyA9PT0gJ3V0Y3RpbWUnKSB7CiAgICBzdHIgPSBbCiAgICAgIHR3byhkYXRlLmdldEZ1bGxZZWFyKCkgJSAxMDApLAogICAgICB0d28oZGF0ZS5nZXRVVENNb250aCgpICsgMSksCiAgICAgIHR3byhkYXRlLmdldFVUQ0RhdGUoKSksCiAgICAgIHR3byhkYXRlLmdldFVUQ0hvdXJzKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENNaW51dGVzKCkpLAogICAgICB0d28oZGF0ZS5nZXRVVENTZWNvbmRzKCkpLAogICAgICAnWicKICAgIF0uam9pbignJyk7CiAgfSBlbHNlIHsKICAgIHRoaXMucmVwb3J0ZXIuZXJyb3IoJ0VuY29kaW5nICcgKyB0YWcgKyAnIHRpbWUgaXMgbm90IHN1cHBvcnRlZCB5ZXQnKTsKICB9CgogIHJldHVybiB0aGlzLl9lbmNvZGVTdHIoc3RyLCAnb2N0c3RyJyk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fZW5jb2RlTnVsbCA9IGZ1bmN0aW9uIGVuY29kZU51bGwoKSB7CiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIoJycpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZUludCA9IGZ1bmN0aW9uIGVuY29kZUludChudW0sIHZhbHVlcykgewogIGlmICh0eXBlb2YgbnVtID09PSAnc3RyaW5nJykgewogICAgaWYgKCF2YWx1ZXMpCiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdTdHJpbmcgaW50IG9yIGVudW0gZ2l2ZW4sIGJ1dCBubyB2YWx1ZXMgbWFwJyk7CiAgICBpZiAoIXZhbHVlcy5oYXNPd25Qcm9wZXJ0eShudW0pKSB7CiAgICAgIHJldHVybiB0aGlzLnJlcG9ydGVyLmVycm9yKCdWYWx1ZXMgbWFwIGRvZXNuXCd0IGNvbnRhaW46ICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShudW0pKTsKICAgIH0KICAgIG51bSA9IHZhbHVlc1tudW1dOwogIH0KCiAgLy8gQmlnbnVtLCBhc3N1bWUgYmlnIGVuZGlhbgogIGlmICh0eXBlb2YgbnVtICE9PSAnbnVtYmVyJyAmJiAhQnVmZmVyLmlzQnVmZmVyKG51bSkpIHsKICAgIHZhciBudW1BcnJheSA9IG51bS50b0FycmF5KCk7CiAgICBpZiAoIW51bS5zaWduICYmIG51bUFycmF5WzBdICYgMHg4MCkgewogICAgICBudW1BcnJheS51bnNoaWZ0KDApOwogICAgfQogICAgbnVtID0gbmV3IEJ1ZmZlcihudW1BcnJheSk7CiAgfQoKICBpZiAoQnVmZmVyLmlzQnVmZmVyKG51bSkpIHsKICAgIHZhciBzaXplID0gbnVtLmxlbmd0aDsKICAgIGlmIChudW0ubGVuZ3RoID09PSAwKQogICAgICBzaXplKys7CgogICAgdmFyIG91dCA9IG5ldyBCdWZmZXIoc2l6ZSk7CiAgICBudW0uY29weShvdXQpOwogICAgaWYgKG51bS5sZW5ndGggPT09IDApCiAgICAgIG91dFswXSA9IDAKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKG91dCk7CiAgfQoKICBpZiAobnVtIDwgMHg4MCkKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKG51bSk7CgogIGlmIChudW0gPCAweDEwMCkKICAgIHJldHVybiB0aGlzLl9jcmVhdGVFbmNvZGVyQnVmZmVyKFswLCBudW1dKTsKCiAgdmFyIHNpemUgPSAxOwogIGZvciAodmFyIGkgPSBudW07IGkgPj0gMHgxMDA7IGkgPj49IDgpCiAgICBzaXplKys7CgogIHZhciBvdXQgPSBuZXcgQXJyYXkoc2l6ZSk7CiAgZm9yICh2YXIgaSA9IG91dC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgb3V0W2ldID0gbnVtICYgMHhmZjsKICAgIG51bSA+Pj0gODsKICB9CiAgaWYob3V0WzBdICYgMHg4MCkgewogICAgb3V0LnVuc2hpZnQoMCk7CiAgfQoKICByZXR1cm4gdGhpcy5fY3JlYXRlRW5jb2RlckJ1ZmZlcihuZXcgQnVmZmVyKG91dCkpOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX2VuY29kZUJvb2wgPSBmdW5jdGlvbiBlbmNvZGVCb29sKHZhbHVlKSB7CiAgcmV0dXJuIHRoaXMuX2NyZWF0ZUVuY29kZXJCdWZmZXIodmFsdWUgPyAweGZmIDogMCk7Cn07CgpERVJOb2RlLnByb3RvdHlwZS5fdXNlID0gZnVuY3Rpb24gdXNlKGVudGl0eSwgb2JqKSB7CiAgaWYgKHR5cGVvZiBlbnRpdHkgPT09ICdmdW5jdGlvbicpCiAgICBlbnRpdHkgPSBlbnRpdHkob2JqKTsKICByZXR1cm4gZW50aXR5Ll9nZXRFbmNvZGVyKCdkZXInKS50cmVlOwp9OwoKREVSTm9kZS5wcm90b3R5cGUuX3NraXBEZWZhdWx0ID0gZnVuY3Rpb24gc2tpcERlZmF1bHQoZGF0YUJ1ZmZlciwgcmVwb3J0ZXIsIHBhcmVudCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Jhc2VTdGF0ZTsKICB2YXIgaTsKICBpZiAoc3RhdGVbJ2RlZmF1bHQnXSA9PT0gbnVsbCkKICAgIHJldHVybiBmYWxzZTsKCiAgdmFyIGRhdGEgPSBkYXRhQnVmZmVyLmpvaW4oKTsKICBpZiAoc3RhdGUuZGVmYXVsdEJ1ZmZlciA9PT0gdW5kZWZpbmVkKQogICAgc3RhdGUuZGVmYXVsdEJ1ZmZlciA9IHRoaXMuX2VuY29kZVZhbHVlKHN0YXRlWydkZWZhdWx0J10sIHJlcG9ydGVyLCBwYXJlbnQpLmpvaW4oKTsKCiAgaWYgKGRhdGEubGVuZ3RoICE9PSBzdGF0ZS5kZWZhdWx0QnVmZmVyLmxlbmd0aCkKICAgIHJldHVybiBmYWxzZTsKCiAgZm9yIChpPTA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKQogICAgaWYgKGRhdGFbaV0gIT09IHN0YXRlLmRlZmF1bHRCdWZmZXJbaV0pCiAgICAgIHJldHVybiBmYWxzZTsKCiAgcmV0dXJuIHRydWU7Cn07CgovLyBVdGlsaXR5IG1ldGhvZHMKCmZ1bmN0aW9uIGVuY29kZVRhZyh0YWcsIHByaW1pdGl2ZSwgY2xzLCByZXBvcnRlcikgewogIHZhciByZXM7CgogIGlmICh0YWcgPT09ICdzZXFvZicpCiAgICB0YWcgPSAnc2VxJzsKICBlbHNlIGlmICh0YWcgPT09ICdzZXRvZicpCiAgICB0YWcgPSAnc2V0JzsKCiAgaWYgKGRlci50YWdCeU5hbWUuaGFzT3duUHJvcGVydHkodGFnKSkKICAgIHJlcyA9IGRlci50YWdCeU5hbWVbdGFnXTsKICBlbHNlIGlmICh0eXBlb2YgdGFnID09PSAnbnVtYmVyJyAmJiAodGFnIHwgMCkgPT09IHRhZykKICAgIHJlcyA9IHRhZzsKICBlbHNlCiAgICByZXR1cm4gcmVwb3J0ZXIuZXJyb3IoJ1Vua25vd24gdGFnOiAnICsgdGFnKTsKCiAgaWYgKHJlcyA+PSAweDFmKQogICAgcmV0dXJuIHJlcG9ydGVyLmVycm9yKCdNdWx0aS1vY3RldCB0YWcgZW5jb2RpbmcgdW5zdXBwb3J0ZWQnKTsKCiAgaWYgKCFwcmltaXRpdmUpCiAgICByZXMgfD0gMHgyMDsKCiAgcmVzIHw9IChkZXIudGFnQ2xhc3NCeU5hbWVbY2xzIHx8ICd1bml2ZXJzYWwnXSA8PCA2KTsKCiAgcmV0dXJuIHJlczsKfQoKfSx7Ii4uLy4uL2FzbjEiOjEsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjl9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBlbmNvZGVycyA9IGV4cG9ydHM7CgplbmNvZGVycy5kZXIgPSByZXF1aXJlKCcuL2RlcicpOwplbmNvZGVycy5wZW0gPSByZXF1aXJlKCcuL3BlbScpOwoKfSx7Ii4vZGVyIjoxMiwiLi9wZW0iOjE0fV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwoKdmFyIGFzbjEgPSByZXF1aXJlKCcuLi8uLi9hc24xJyk7CnZhciBERVJFbmNvZGVyID0gcmVxdWlyZSgnLi9kZXInKTsKCmZ1bmN0aW9uIFBFTUVuY29kZXIoZW50aXR5KSB7CiAgREVSRW5jb2Rlci5jYWxsKHRoaXMsIGVudGl0eSk7CiAgdGhpcy5lbmMgPSAncGVtJzsKfTsKaW5oZXJpdHMoUEVNRW5jb2RlciwgREVSRW5jb2Rlcik7Cm1vZHVsZS5leHBvcnRzID0gUEVNRW5jb2RlcjsKClBFTUVuY29kZXIucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShkYXRhLCBvcHRpb25zKSB7CiAgdmFyIGJ1ZiA9IERFUkVuY29kZXIucHJvdG90eXBlLmVuY29kZS5jYWxsKHRoaXMsIGRhdGEpOwoKICB2YXIgcCA9IGJ1Zi50b1N0cmluZygnYmFzZTY0Jyk7CiAgdmFyIG91dCA9IFsgJy0tLS0tQkVHSU4gJyArIG9wdGlvbnMubGFiZWwgKyAnLS0tLS0nIF07CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSArPSA2NCkKICAgIG91dC5wdXNoKHAuc2xpY2UoaSwgaSArIDY0KSk7CiAgb3V0LnB1c2goJy0tLS0tRU5EICcgKyBvcHRpb25zLmxhYmVsICsgJy0tLS0tJyk7CiAgcmV0dXJuIG91dC5qb2luKCdcbicpOwp9OwoKfSx7Ii4uLy4uL2FzbjEiOjEsIi4vZGVyIjoxMiwiYnVmZmVyIjo3MCwiaW5oZXJpdHMiOjEyOX1dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvVW5pdF9UZXN0aW5nLzEuMAovLwovLyBUSElTIElTIE5PVCBURVNURUQgTk9SIExJS0VMWSBUTyBXT1JLIE9VVFNJREUgVjghCi8vCi8vIE9yaWdpbmFsbHkgZnJvbSBuYXJ3aGFsLmpzIChodHRwOi8vbmFyd2hhbGpzLm9yZykKLy8gQ29weXJpZ2h0IChjKSAyMDA5IFRob21hcyBSb2JpbnNvbiA8Mjgwbm9ydGguY29tPgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5Ci8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICdTb2Z0d2FyZScpLCB0bwovLyBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZQovLyByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3IKLy8gc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAnQVMgSVMnLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAovLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKLy8gQVVUSE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4KLy8gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTgovLyBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCi8vIHdoZW4gdXNlZCBpbiBub2RlLCB0aGlzIHdpbGwgYWN0dWFsbHkgbG9hZCB0aGUgdXRpbCBtb2R1bGUgd2UgZGVwZW5kIG9uCi8vIHZlcnN1cyBsb2FkaW5nIHRoZSBidWlsdGluIHV0aWwgbW9kdWxlIGFzIGhhcHBlbnMgb3RoZXJ3aXNlCi8vIHRoaXMgaXMgYSBidWcgaW4gbm9kZSBtb2R1bGUgbG9hZGluZyBhcyBmYXIgYXMgSSBhbSBjb25jZXJuZWQKdmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsLycpOwoKdmFyIHBTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsKdmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CgovLyAxLiBUaGUgYXNzZXJ0IG1vZHVsZSBwcm92aWRlcyBmdW5jdGlvbnMgdGhhdCB0aHJvdwovLyBBc3NlcnRpb25FcnJvcidzIHdoZW4gcGFydGljdWxhciBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBUaGUKLy8gYXNzZXJ0IG1vZHVsZSBtdXN0IGNvbmZvcm0gdG8gdGhlIGZvbGxvd2luZyBpbnRlcmZhY2UuCgp2YXIgYXNzZXJ0ID0gbW9kdWxlLmV4cG9ydHMgPSBvazsKCi8vIDIuIFRoZSBBc3NlcnRpb25FcnJvciBpcyBkZWZpbmVkIGluIGFzc2VydC4KLy8gbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7IG1lc3NhZ2U6IG1lc3NhZ2UsCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IGFjdHVhbCwKLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZCB9KQoKYXNzZXJ0LkFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3Iob3B0aW9ucykgewogIHRoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7CiAgdGhpcy5hY3R1YWwgPSBvcHRpb25zLmFjdHVhbDsKICB0aGlzLmV4cGVjdGVkID0gb3B0aW9ucy5leHBlY3RlZDsKICB0aGlzLm9wZXJhdG9yID0gb3B0aW9ucy5vcGVyYXRvcjsKICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7CiAgICB0aGlzLm1lc3NhZ2UgPSBvcHRpb25zLm1lc3NhZ2U7CiAgICB0aGlzLmdlbmVyYXRlZE1lc3NhZ2UgPSBmYWxzZTsKICB9IGVsc2UgewogICAgdGhpcy5tZXNzYWdlID0gZ2V0TWVzc2FnZSh0aGlzKTsKICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IHRydWU7CiAgfQogIHZhciBzdGFja1N0YXJ0RnVuY3Rpb24gPSBvcHRpb25zLnN0YWNrU3RhcnRGdW5jdGlvbiB8fCBmYWlsOwoKICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHsKICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHN0YWNrU3RhcnRGdW5jdGlvbik7CiAgfQogIGVsc2UgewogICAgLy8gbm9uIHY4IGJyb3dzZXJzIHNvIHdlIGNhbiBoYXZlIGEgc3RhY2t0cmFjZQogICAgdmFyIGVyciA9IG5ldyBFcnJvcigpOwogICAgaWYgKGVyci5zdGFjaykgewogICAgICB2YXIgb3V0ID0gZXJyLnN0YWNrOwoKICAgICAgLy8gdHJ5IHRvIHN0cmlwIHVzZWxlc3MgZnJhbWVzCiAgICAgIHZhciBmbl9uYW1lID0gc3RhY2tTdGFydEZ1bmN0aW9uLm5hbWU7CiAgICAgIHZhciBpZHggPSBvdXQuaW5kZXhPZignXG4nICsgZm5fbmFtZSk7CiAgICAgIGlmIChpZHggPj0gMCkgewogICAgICAgIC8vIG9uY2Ugd2UgaGF2ZSBsb2NhdGVkIHRoZSBmdW5jdGlvbiBmcmFtZQogICAgICAgIC8vIHdlIG5lZWQgdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYmVmb3JlIGl0IChhbmQgaXRzIGxpbmUpCiAgICAgICAgdmFyIG5leHRfbGluZSA9IG91dC5pbmRleE9mKCdcbicsIGlkeCArIDEpOwogICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcobmV4dF9saW5lICsgMSk7CiAgICAgIH0KCiAgICAgIHRoaXMuc3RhY2sgPSBvdXQ7CiAgICB9CiAgfQp9OwoKLy8gYXNzZXJ0LkFzc2VydGlvbkVycm9yIGluc3RhbmNlb2YgRXJyb3IKdXRpbC5pbmhlcml0cyhhc3NlcnQuQXNzZXJ0aW9uRXJyb3IsIEVycm9yKTsKCmZ1bmN0aW9uIHJlcGxhY2VyKGtleSwgdmFsdWUpIHsKICBpZiAodXRpbC5pc1VuZGVmaW5lZCh2YWx1ZSkpIHsKICAgIHJldHVybiAnJyArIHZhbHVlOwogIH0KICBpZiAodXRpbC5pc051bWJlcih2YWx1ZSkgJiYgIWlzRmluaXRlKHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7CiAgfQogIGlmICh1dGlsLmlzRnVuY3Rpb24odmFsdWUpIHx8IHV0aWwuaXNSZWdFeHAodmFsdWUpKSB7CiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTsKICB9CiAgcmV0dXJuIHZhbHVlOwp9CgpmdW5jdGlvbiB0cnVuY2F0ZShzLCBuKSB7CiAgaWYgKHV0aWwuaXNTdHJpbmcocykpIHsKICAgIHJldHVybiBzLmxlbmd0aCA8IG4gPyBzIDogcy5zbGljZSgwLCBuKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHM7CiAgfQp9CgpmdW5jdGlvbiBnZXRNZXNzYWdlKHNlbGYpIHsKICByZXR1cm4gdHJ1bmNhdGUoSlNPTi5zdHJpbmdpZnkoc2VsZi5hY3R1YWwsIHJlcGxhY2VyKSwgMTI4KSArICcgJyArCiAgICAgICAgIHNlbGYub3BlcmF0b3IgKyAnICcgKwogICAgICAgICB0cnVuY2F0ZShKU09OLnN0cmluZ2lmeShzZWxmLmV4cGVjdGVkLCByZXBsYWNlciksIDEyOCk7Cn0KCi8vIEF0IHByZXNlbnQgb25seSB0aGUgdGhyZWUga2V5cyBtZW50aW9uZWQgYWJvdmUgYXJlIHVzZWQgYW5kCi8vIHVuZGVyc3Rvb2QgYnkgdGhlIHNwZWMuIEltcGxlbWVudGF0aW9ucyBvciBzdWIgbW9kdWxlcyBjYW4gcGFzcwovLyBvdGhlciBrZXlzIHRvIHRoZSBBc3NlcnRpb25FcnJvcidzIGNvbnN0cnVjdG9yIC0gdGhleSB3aWxsIGJlCi8vIGlnbm9yZWQuCgovLyAzLiBBbGwgb2YgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgbXVzdCB0aHJvdyBhbiBBc3NlcnRpb25FcnJvcgovLyB3aGVuIGEgY29ycmVzcG9uZGluZyBjb25kaXRpb24gaXMgbm90IG1ldCwgd2l0aCBhIG1lc3NhZ2UgdGhhdAovLyBtYXkgYmUgdW5kZWZpbmVkIGlmIG5vdCBwcm92aWRlZC4gIEFsbCBhc3NlcnRpb24gbWV0aG9kcyBwcm92aWRlCi8vIGJvdGggdGhlIGFjdHVhbCBhbmQgZXhwZWN0ZWQgdmFsdWVzIHRvIHRoZSBhc3NlcnRpb24gZXJyb3IgZm9yCi8vIGRpc3BsYXkgcHVycG9zZXMuCgpmdW5jdGlvbiBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yLCBzdGFja1N0YXJ0RnVuY3Rpb24pIHsKICB0aHJvdyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHsKICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICBhY3R1YWw6IGFjdHVhbCwKICAgIGV4cGVjdGVkOiBleHBlY3RlZCwKICAgIG9wZXJhdG9yOiBvcGVyYXRvciwKICAgIHN0YWNrU3RhcnRGdW5jdGlvbjogc3RhY2tTdGFydEZ1bmN0aW9uCiAgfSk7Cn0KCi8vIEVYVEVOU0lPTiEgYWxsb3dzIGZvciB3ZWxsIGJlaGF2ZWQgZXJyb3JzIGRlZmluZWQgZWxzZXdoZXJlLgphc3NlcnQuZmFpbCA9IGZhaWw7CgovLyA0LiBQdXJlIGFzc2VydGlvbiB0ZXN0cyB3aGV0aGVyIGEgdmFsdWUgaXMgdHJ1dGh5LCBhcyBkZXRlcm1pbmVkCi8vIGJ5ICEhZ3VhcmQuCi8vIGFzc2VydC5vayhndWFyZCwgbWVzc2FnZV9vcHQpOwovLyBUaGlzIHN0YXRlbWVudCBpcyBlcXVpdmFsZW50IHRvIGFzc2VydC5lcXVhbCh0cnVlLCAhIWd1YXJkLAovLyBtZXNzYWdlX29wdCk7LiBUbyB0ZXN0IHN0cmljdGx5IGZvciB0aGUgdmFsdWUgdHJ1ZSwgdXNlCi8vIGFzc2VydC5zdHJpY3RFcXVhbCh0cnVlLCBndWFyZCwgbWVzc2FnZV9vcHQpOy4KCmZ1bmN0aW9uIG9rKHZhbHVlLCBtZXNzYWdlKSB7CiAgaWYgKCF2YWx1ZSkgZmFpbCh2YWx1ZSwgdHJ1ZSwgbWVzc2FnZSwgJz09JywgYXNzZXJ0Lm9rKTsKfQphc3NlcnQub2sgPSBvazsKCi8vIDUuIFRoZSBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc2hhbGxvdywgY29lcmNpdmUgZXF1YWxpdHkgd2l0aAovLyA9PS4KLy8gYXNzZXJ0LmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoYWN0dWFsICE9IGV4cGVjdGVkKSBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5lcXVhbCk7Cn07CgovLyA2LiBUaGUgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igd2hldGhlciB0d28gb2JqZWN0cyBhcmUgbm90IGVxdWFsCi8vIHdpdGggIT0gYXNzZXJ0Lm5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5ub3RFcXVhbCA9IGZ1bmN0aW9uIG5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoYWN0dWFsID09IGV4cGVjdGVkKSB7CiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPScsIGFzc2VydC5ub3RFcXVhbCk7CiAgfQp9OwoKLy8gNy4gVGhlIGVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBhIGRlZXAgZXF1YWxpdHkgcmVsYXRpb24uCi8vIGFzc2VydC5kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpOwoKYXNzZXJ0LmRlZXBFcXVhbCA9IGZ1bmN0aW9uIGRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7CiAgaWYgKCFfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQpKSB7CiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwRXF1YWwnLCBhc3NlcnQuZGVlcEVxdWFsKTsKICB9Cn07CgpmdW5jdGlvbiBfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQpIHsKICAvLyA3LjEuIEFsbCBpZGVudGljYWwgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS4KICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkgewogICAgcmV0dXJuIHRydWU7CgogIH0gZWxzZSBpZiAodXRpbC5pc0J1ZmZlcihhY3R1YWwpICYmIHV0aWwuaXNCdWZmZXIoZXhwZWN0ZWQpKSB7CiAgICBpZiAoYWN0dWFsLmxlbmd0aCAhPSBleHBlY3RlZC5sZW5ndGgpIHJldHVybiBmYWxzZTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjdHVhbC5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYWN0dWFsW2ldICE9PSBleHBlY3RlZFtpXSkgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiB0cnVlOwoKICAvLyA3LjIuIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIERhdGUgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzCiAgLy8gZXF1aXZhbGVudCBpZiBpdCBpcyBhbHNvIGEgRGF0ZSBvYmplY3QgdGhhdCByZWZlcnMgdG8gdGhlIHNhbWUgdGltZS4KICB9IGVsc2UgaWYgKHV0aWwuaXNEYXRlKGFjdHVhbCkgJiYgdXRpbC5pc0RhdGUoZXhwZWN0ZWQpKSB7CiAgICByZXR1cm4gYWN0dWFsLmdldFRpbWUoKSA9PT0gZXhwZWN0ZWQuZ2V0VGltZSgpOwoKICAvLyA3LjMgSWYgdGhlIGV4cGVjdGVkIHZhbHVlIGlzIGEgUmVnRXhwIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpcwogIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIFJlZ0V4cCBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzb3VyY2UgYW5kCiAgLy8gcHJvcGVydGllcyAoYGdsb2JhbGAsIGBtdWx0aWxpbmVgLCBgbGFzdEluZGV4YCwgYGlnbm9yZUNhc2VgKS4KICB9IGVsc2UgaWYgKHV0aWwuaXNSZWdFeHAoYWN0dWFsKSAmJiB1dGlsLmlzUmVnRXhwKGV4cGVjdGVkKSkgewogICAgcmV0dXJuIGFjdHVhbC5zb3VyY2UgPT09IGV4cGVjdGVkLnNvdXJjZSAmJgogICAgICAgICAgIGFjdHVhbC5nbG9iYWwgPT09IGV4cGVjdGVkLmdsb2JhbCAmJgogICAgICAgICAgIGFjdHVhbC5tdWx0aWxpbmUgPT09IGV4cGVjdGVkLm11bHRpbGluZSAmJgogICAgICAgICAgIGFjdHVhbC5sYXN0SW5kZXggPT09IGV4cGVjdGVkLmxhc3RJbmRleCAmJgogICAgICAgICAgIGFjdHVhbC5pZ25vcmVDYXNlID09PSBleHBlY3RlZC5pZ25vcmVDYXNlOwoKICAvLyA3LjQuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsCiAgLy8gZXF1aXZhbGVuY2UgaXMgZGV0ZXJtaW5lZCBieSA9PS4KICB9IGVsc2UgaWYgKCF1dGlsLmlzT2JqZWN0KGFjdHVhbCkgJiYgIXV0aWwuaXNPYmplY3QoZXhwZWN0ZWQpKSB7CiAgICByZXR1cm4gYWN0dWFsID09IGV4cGVjdGVkOwoKICAvLyA3LjUgRm9yIGFsbCBvdGhlciBPYmplY3QgcGFpcnMsIGluY2x1ZGluZyBBcnJheSBvYmplY3RzLCBlcXVpdmFsZW5jZSBpcwogIC8vIGRldGVybWluZWQgYnkgaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChhcyB2ZXJpZmllZAogIC8vIHdpdGggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKSwgdGhlIHNhbWUgc2V0IG9mIGtleXMKICAvLyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwgZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5CiAgLy8gY29ycmVzcG9uZGluZyBrZXksIGFuZCBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuIE5vdGU6IHRoaXMKICAvLyBhY2NvdW50cyBmb3IgYm90aCBuYW1lZCBhbmQgaW5kZXhlZCBwcm9wZXJ0aWVzIG9uIEFycmF5cy4KICB9IGVsc2UgewogICAgcmV0dXJuIG9iakVxdWl2KGFjdHVhbCwgZXhwZWN0ZWQpOwogIH0KfQoKZnVuY3Rpb24gaXNBcmd1bWVudHMob2JqZWN0KSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nOwp9CgpmdW5jdGlvbiBvYmpFcXVpdihhLCBiKSB7CiAgaWYgKHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoYSkgfHwgdXRpbC5pc051bGxPclVuZGVmaW5lZChiKSkKICAgIHJldHVybiBmYWxzZTsKICAvLyBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuCiAgaWYgKGEucHJvdG90eXBlICE9PSBiLnByb3RvdHlwZSkgcmV0dXJuIGZhbHNlOwogIC8vIGlmIG9uZSBpcyBhIHByaW1pdGl2ZSwgdGhlIG90aGVyIG11c3QgYmUgc2FtZQogIGlmICh1dGlsLmlzUHJpbWl0aXZlKGEpIHx8IHV0aWwuaXNQcmltaXRpdmUoYikpIHsKICAgIHJldHVybiBhID09PSBiOwogIH0KICB2YXIgYUlzQXJncyA9IGlzQXJndW1lbnRzKGEpLAogICAgICBiSXNBcmdzID0gaXNBcmd1bWVudHMoYik7CiAgaWYgKChhSXNBcmdzICYmICFiSXNBcmdzKSB8fCAoIWFJc0FyZ3MgJiYgYklzQXJncykpCiAgICByZXR1cm4gZmFsc2U7CiAgaWYgKGFJc0FyZ3MpIHsKICAgIGEgPSBwU2xpY2UuY2FsbChhKTsKICAgIGIgPSBwU2xpY2UuY2FsbChiKTsKICAgIHJldHVybiBfZGVlcEVxdWFsKGEsIGIpOwogIH0KICB2YXIga2EgPSBvYmplY3RLZXlzKGEpLAogICAgICBrYiA9IG9iamVjdEtleXMoYiksCiAgICAgIGtleSwgaTsKICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzCiAgLy8gaGFzT3duUHJvcGVydHkpCiAgaWYgKGthLmxlbmd0aCAhPSBrYi5sZW5ndGgpCiAgICByZXR1cm4gZmFsc2U7CiAgLy90aGUgc2FtZSBzZXQgb2Yga2V5cyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSwKICBrYS5zb3J0KCk7CiAga2Iuc29ydCgpOwogIC8vfn5+Y2hlYXAga2V5IHRlc3QKICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgaWYgKGthW2ldICE9IGtiW2ldKQogICAgICByZXR1cm4gZmFsc2U7CiAgfQogIC8vZXF1aXZhbGVudCB2YWx1ZXMgZm9yIGV2ZXJ5IGNvcnJlc3BvbmRpbmcga2V5LCBhbmQKICAvL35+fnBvc3NpYmx5IGV4cGVuc2l2ZSBkZWVwIHRlc3QKICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAga2V5ID0ga2FbaV07CiAgICBpZiAoIV9kZWVwRXF1YWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiB0cnVlOwp9CgovLyA4LiBUaGUgbm9uLWVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBmb3IgYW55IGRlZXAgaW5lcXVhbGl0eS4KLy8gYXNzZXJ0Lm5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7Cgphc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnbm90RGVlcEVxdWFsJywgYXNzZXJ0Lm5vdERlZXBFcXVhbCk7CiAgfQp9OwoKLy8gOS4gVGhlIHN0cmljdCBlcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgc3RyaWN0IGVxdWFsaXR5LCBhcyBkZXRlcm1pbmVkIGJ5ID09PS4KLy8gYXNzZXJ0LnN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTsKCmFzc2VydC5zdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHsKICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT09JywgYXNzZXJ0LnN0cmljdEVxdWFsKTsKICB9Cn07CgovLyAxMC4gVGhlIHN0cmljdCBub24tZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIGZvciBzdHJpY3QgaW5lcXVhbGl0eSwgYXMKLy8gZGV0ZXJtaW5lZCBieSAhPT0uICBhc3NlcnQubm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpOwoKYXNzZXJ0Lm5vdFN0cmljdEVxdWFsID0gZnVuY3Rpb24gbm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkgewogIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7CiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPT0nLCBhc3NlcnQubm90U3RyaWN0RXF1YWwpOwogIH0KfTsKCmZ1bmN0aW9uIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHsKICBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZXhwZWN0ZWQpID09ICdbb2JqZWN0IFJlZ0V4cF0nKSB7CiAgICByZXR1cm4gZXhwZWN0ZWQudGVzdChhY3R1YWwpOwogIH0gZWxzZSBpZiAoYWN0dWFsIGluc3RhbmNlb2YgZXhwZWN0ZWQpIHsKICAgIHJldHVybiB0cnVlOwogIH0gZWxzZSBpZiAoZXhwZWN0ZWQuY2FsbCh7fSwgYWN0dWFsKSA9PT0gdHJ1ZSkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIF90aHJvd3Moc2hvdWxkVGhyb3csIGJsb2NrLCBleHBlY3RlZCwgbWVzc2FnZSkgewogIHZhciBhY3R1YWw7CgogIGlmICh1dGlsLmlzU3RyaW5nKGV4cGVjdGVkKSkgewogICAgbWVzc2FnZSA9IGV4cGVjdGVkOwogICAgZXhwZWN0ZWQgPSBudWxsOwogIH0KCiAgdHJ5IHsKICAgIGJsb2NrKCk7CiAgfSBjYXRjaCAoZSkgewogICAgYWN0dWFsID0gZTsKICB9CgogIG1lc3NhZ2UgPSAoZXhwZWN0ZWQgJiYgZXhwZWN0ZWQubmFtZSA/ICcgKCcgKyBleHBlY3RlZC5uYW1lICsgJykuJyA6ICcuJykgKwogICAgICAgICAgICAobWVzc2FnZSA/ICcgJyArIG1lc3NhZ2UgOiAnLicpOwoKICBpZiAoc2hvdWxkVGhyb3cgJiYgIWFjdHVhbCkgewogICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7CiAgfQoKICBpZiAoIXNob3VsZFRocm93ICYmIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB7CiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsICdHb3QgdW53YW50ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpOwogIH0KCiAgaWYgKChzaG91bGRUaHJvdyAmJiBhY3R1YWwgJiYgZXhwZWN0ZWQgJiYKICAgICAgIWV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fCAoIXNob3VsZFRocm93ICYmIGFjdHVhbCkpIHsKICAgIHRocm93IGFjdHVhbDsKICB9Cn0KCi8vIDExLiBFeHBlY3RlZCB0byB0aHJvdyBhbiBlcnJvcjoKLy8gYXNzZXJ0LnRocm93cyhibG9jaywgRXJyb3Jfb3B0LCBtZXNzYWdlX29wdCk7Cgphc3NlcnQudGhyb3dzID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL2Vycm9yLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7CiAgX3Rocm93cy5hcHBseSh0aGlzLCBbdHJ1ZV0uY29uY2F0KHBTbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKfTsKCi8vIEVYVEVOU0lPTiEgVGhpcyBpcyBhbm5veWluZyB0byB3cml0ZSBvdXRzaWRlIHRoaXMgbW9kdWxlLgphc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHsKICBfdGhyb3dzLmFwcGx5KHRoaXMsIFtmYWxzZV0uY29uY2F0KHBTbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKfTsKCmFzc2VydC5pZkVycm9yID0gZnVuY3Rpb24oZXJyKSB7IGlmIChlcnIpIHt0aHJvdyBlcnI7fX07Cgp2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHsKICB2YXIga2V5cyA9IFtdOwogIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgIGlmIChoYXNPd24uY2FsbChvYmosIGtleSkpIGtleXMucHVzaChrZXkpOwogIH0KICByZXR1cm4ga2V5czsKfTsKCn0seyJ1dGlsLyI6MTc3fV0sMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKCnZhciBiYXNlNjR1cmwgPSBtb2R1bGUuZXhwb3J0czsKCmJhc2U2NHVybC51bmVzY2FwZSA9IGZ1bmN0aW9uIHVuZXNjYXBlIChzdHIpIHsKICByZXR1cm4gKHN0ciArIEFycmF5KDUgLSBzdHIubGVuZ3RoICUgNCkKICAgIC5qb2luKCc9JykpCiAgICAucmVwbGFjZSgvXC0vZywgJysnKQogICAgLnJlcGxhY2UoL18vZywgJy8nKTsKfTsKCmJhc2U2NHVybC5lc2NhcGUgPSBmdW5jdGlvbiBlc2NhcGUgKHN0cikgewogIHJldHVybiBzdHIucmVwbGFjZSgvXCsvZywgJy0nKQogICAgLnJlcGxhY2UoL1wvL2csICdfJykKICAgIC5yZXBsYWNlKC89L2csICcnKTsKfTsKCmJhc2U2NHVybC5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUgKHN0cikgewogIHJldHVybiB0aGlzLmVzY2FwZShuZXcgQnVmZmVyKHN0cikudG9TdHJpbmcoJ2Jhc2U2NCcpKTsKfTsKCmJhc2U2NHVybC5kZWNvZGUgPSBmdW5jdGlvbiBkZWNvZGUgKHN0cikgewogIHJldHVybiBuZXcgQnVmZmVyKHRoaXMudW5lc2NhcGUoc3RyKSwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCk7Cn07Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gKHB1YmxpYykgQ29uc3RydWN0b3IKZnVuY3Rpb24gQmlnSW50ZWdlcihhLCBiLCBjKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEJpZ0ludGVnZXIpKQogICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGEsIGIsIGMpCgogIGlmIChhICE9IG51bGwpIHsKICAgIGlmICgibnVtYmVyIiA9PSB0eXBlb2YgYSkgdGhpcy5mcm9tTnVtYmVyKGEsIGIsIGMpCiAgICBlbHNlIGlmIChiID09IG51bGwgJiYgInN0cmluZyIgIT0gdHlwZW9mIGEpIHRoaXMuZnJvbVN0cmluZyhhLCAyNTYpCiAgICBlbHNlIHRoaXMuZnJvbVN0cmluZyhhLCBiKQogIH0KfQoKdmFyIHByb3RvID0gQmlnSW50ZWdlci5wcm90b3R5cGUKCi8vIGR1Y2stdHlwZWQgaXNCaWdJbnRlZ2VyCnByb3RvLl9fYmlnaSA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb24KQmlnSW50ZWdlci5pc0JpZ0ludGVnZXIgPSBmdW5jdGlvbiAob2JqLCBjaGVja192ZXIpIHsKICByZXR1cm4gb2JqICYmIG9iai5fX2JpZ2kgJiYgKCFjaGVja192ZXIgfHwgb2JqLl9fYmlnaSA9PT0gcHJvdG8uX19iaWdpKQp9CgovLyBCaXRzIHBlciBkaWdpdAp2YXIgZGJpdHMKCi8vIGFtOiBDb21wdXRlIHdfaiArPSAoeCp0aGlzX2kpLCBwcm9wYWdhdGUgY2FycmllcywKLy8gYyBpcyBpbml0aWFsIGNhcnJ5LCByZXR1cm5zIGZpbmFsIGNhcnJ5LgovLyBjIDwgMypkdmFsdWUsIHggPCAyKmR2YWx1ZSwgdGhpc19pIDwgZHZhbHVlCi8vIFdlIG5lZWQgdG8gc2VsZWN0IHRoZSBmYXN0ZXN0IG9uZSB0aGF0IHdvcmtzIGluIHRoaXMgZW52aXJvbm1lbnQuCgovLyBhbTE6IHVzZSBhIHNpbmdsZSBtdWx0IGFuZCBkaXZpZGUgdG8gZ2V0IHRoZSBoaWdoIGJpdHMsCi8vIG1heCBkaWdpdCBiaXRzIHNob3VsZCBiZSAyNiBiZWNhdXNlCi8vIG1heCBpbnRlcm5hbCB2YWx1ZSA9IDIqZHZhbHVlXjItMipkdmFsdWUgKDwgMl41MykKZnVuY3Rpb24gYW0xKGksIHgsIHcsIGosIGMsIG4pIHsKICB3aGlsZSAoLS1uID49IDApIHsKICAgIHZhciB2ID0geCAqIHRoaXNbaSsrXSArIHdbal0gKyBjCiAgICBjID0gTWF0aC5mbG9vcih2IC8gMHg0MDAwMDAwKQogICAgd1tqKytdID0gdiAmIDB4M2ZmZmZmZgogIH0KICByZXR1cm4gYwp9Ci8vIGFtMiBhdm9pZHMgYSBiaWcgbXVsdC1hbmQtZXh0cmFjdCBjb21wbGV0ZWx5LgovLyBNYXggZGlnaXQgYml0cyBzaG91bGQgYmUgPD0gMzAgYmVjYXVzZSB3ZSBkbyBiaXR3aXNlIG9wcwovLyBvbiB2YWx1ZXMgdXAgdG8gMipoZHZhbHVlXjItaGR2YWx1ZS0xICg8IDJeMzEpCmZ1bmN0aW9uIGFtMihpLCB4LCB3LCBqLCBjLCBuKSB7CiAgdmFyIHhsID0geCAmIDB4N2ZmZiwKICAgIHhoID0geCA+PiAxNQogIHdoaWxlICgtLW4gPj0gMCkgewogICAgdmFyIGwgPSB0aGlzW2ldICYgMHg3ZmZmCiAgICB2YXIgaCA9IHRoaXNbaSsrXSA+PiAxNQogICAgdmFyIG0gPSB4aCAqIGwgKyBoICogeGwKICAgIGwgPSB4bCAqIGwgKyAoKG0gJiAweDdmZmYpIDw8IDE1KSArIHdbal0gKyAoYyAmIDB4M2ZmZmZmZmYpCiAgICBjID0gKGwgPj4+IDMwKSArIChtID4+PiAxNSkgKyB4aCAqIGggKyAoYyA+Pj4gMzApCiAgICB3W2orK10gPSBsICYgMHgzZmZmZmZmZgogIH0KICByZXR1cm4gYwp9Ci8vIEFsdGVybmF0ZWx5LCBzZXQgbWF4IGRpZ2l0IGJpdHMgdG8gMjggc2luY2Ugc29tZQovLyBicm93c2VycyBzbG93IGRvd24gd2hlbiBkZWFsaW5nIHdpdGggMzItYml0IG51bWJlcnMuCmZ1bmN0aW9uIGFtMyhpLCB4LCB3LCBqLCBjLCBuKSB7CiAgdmFyIHhsID0geCAmIDB4M2ZmZiwKICAgIHhoID0geCA+PiAxNAogIHdoaWxlICgtLW4gPj0gMCkgewogICAgdmFyIGwgPSB0aGlzW2ldICYgMHgzZmZmCiAgICB2YXIgaCA9IHRoaXNbaSsrXSA+PiAxNAogICAgdmFyIG0gPSB4aCAqIGwgKyBoICogeGwKICAgIGwgPSB4bCAqIGwgKyAoKG0gJiAweDNmZmYpIDw8IDE0KSArIHdbal0gKyBjCiAgICBjID0gKGwgPj4gMjgpICsgKG0gPj4gMTQpICsgeGggKiBoCiAgICB3W2orK10gPSBsICYgMHhmZmZmZmZmCiAgfQogIHJldHVybiBjCn0KCi8vIHd0Zj8KQmlnSW50ZWdlci5wcm90b3R5cGUuYW0gPSBhbTEKZGJpdHMgPSAyNgoKQmlnSW50ZWdlci5wcm90b3R5cGUuREIgPSBkYml0cwpCaWdJbnRlZ2VyLnByb3RvdHlwZS5ETSA9ICgoMSA8PCBkYml0cykgLSAxKQp2YXIgRFYgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5EViA9ICgxIDw8IGRiaXRzKQoKdmFyIEJJX0ZQID0gNTIKQmlnSW50ZWdlci5wcm90b3R5cGUuRlYgPSBNYXRoLnBvdygyLCBCSV9GUCkKQmlnSW50ZWdlci5wcm90b3R5cGUuRjEgPSBCSV9GUCAtIGRiaXRzCkJpZ0ludGVnZXIucHJvdG90eXBlLkYyID0gMiAqIGRiaXRzIC0gQklfRlAKCi8vIERpZ2l0IGNvbnZlcnNpb25zCnZhciBCSV9STSA9ICIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiCnZhciBCSV9SQyA9IG5ldyBBcnJheSgpCnZhciByciwgdnYKcnIgPSAiMCIuY2hhckNvZGVBdCgwKQpmb3IgKHZ2ID0gMDsgdnYgPD0gOTsgKyt2dikgQklfUkNbcnIrK10gPSB2dgpyciA9ICJhIi5jaGFyQ29kZUF0KDApCmZvciAodnYgPSAxMDsgdnYgPCAzNjsgKyt2dikgQklfUkNbcnIrK10gPSB2dgpyciA9ICJBIi5jaGFyQ29kZUF0KDApCmZvciAodnYgPSAxMDsgdnYgPCAzNjsgKyt2dikgQklfUkNbcnIrK10gPSB2dgoKZnVuY3Rpb24gaW50MmNoYXIobikgewogIHJldHVybiBCSV9STS5jaGFyQXQobikKfQoKZnVuY3Rpb24gaW50QXQocywgaSkgewogIHZhciBjID0gQklfUkNbcy5jaGFyQ29kZUF0KGkpXQogIHJldHVybiAoYyA9PSBudWxsKSA/IC0xIDogYwp9CgovLyAocHJvdGVjdGVkKSBjb3B5IHRoaXMgdG8gcgpmdW5jdGlvbiBibnBDb3B5VG8ocikgewogIGZvciAodmFyIGkgPSB0aGlzLnQgLSAxOyBpID49IDA7IC0taSkgcltpXSA9IHRoaXNbaV0KICByLnQgPSB0aGlzLnQKICByLnMgPSB0aGlzLnMKfQoKLy8gKHByb3RlY3RlZCkgc2V0IGZyb20gaW50ZWdlciB2YWx1ZSB4LCAtRFYgPD0geCA8IERWCmZ1bmN0aW9uIGJucEZyb21JbnQoeCkgewogIHRoaXMudCA9IDEKICB0aGlzLnMgPSAoeCA8IDApID8gLTEgOiAwCiAgaWYgKHggPiAwKSB0aGlzWzBdID0geAogIGVsc2UgaWYgKHggPCAtMSkgdGhpc1swXSA9IHggKyBEVgogIGVsc2UgdGhpcy50ID0gMAp9CgovLyByZXR1cm4gYmlnaW50IGluaXRpYWxpemVkIHRvIHZhbHVlCmZ1bmN0aW9uIG5idihpKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgci5mcm9tSW50KGkpCiAgcmV0dXJuIHIKfQoKLy8gKHByb3RlY3RlZCkgc2V0IGZyb20gc3RyaW5nIGFuZCByYWRpeApmdW5jdGlvbiBibnBGcm9tU3RyaW5nKHMsIGIpIHsKICB2YXIgc2VsZiA9IHRoaXMKCiAgdmFyIGsKICBpZiAoYiA9PSAxNikgayA9IDQKICBlbHNlIGlmIChiID09IDgpIGsgPSAzCiAgZWxzZSBpZiAoYiA9PSAyNTYpIGsgPSA4OyAvLyBieXRlIGFycmF5CiAgZWxzZSBpZiAoYiA9PSAyKSBrID0gMQogIGVsc2UgaWYgKGIgPT0gMzIpIGsgPSA1CiAgZWxzZSBpZiAoYiA9PSA0KSBrID0gMgogIGVsc2UgewogICAgc2VsZi5mcm9tUmFkaXgocywgYikKICAgIHJldHVybgogIH0KICBzZWxmLnQgPSAwCiAgc2VsZi5zID0gMAogIHZhciBpID0gcy5sZW5ndGgsCiAgICBtaSA9IGZhbHNlLAogICAgc2ggPSAwCiAgd2hpbGUgKC0taSA+PSAwKSB7CiAgICB2YXIgeCA9IChrID09IDgpID8gc1tpXSAmIDB4ZmYgOiBpbnRBdChzLCBpKQogICAgaWYgKHggPCAwKSB7CiAgICAgIGlmIChzLmNoYXJBdChpKSA9PSAiLSIpIG1pID0gdHJ1ZQogICAgICBjb250aW51ZQogICAgfQogICAgbWkgPSBmYWxzZQogICAgaWYgKHNoID09IDApCiAgICAgIHNlbGZbc2VsZi50KytdID0geAogICAgZWxzZSBpZiAoc2ggKyBrID4gc2VsZi5EQikgewogICAgICBzZWxmW3NlbGYudCAtIDFdIHw9ICh4ICYgKCgxIDw8IChzZWxmLkRCIC0gc2gpKSAtIDEpKSA8PCBzaAogICAgICBzZWxmW3NlbGYudCsrXSA9ICh4ID4+IChzZWxmLkRCIC0gc2gpKQogICAgfSBlbHNlCiAgICAgIHNlbGZbc2VsZi50IC0gMV0gfD0geCA8PCBzaAogICAgc2ggKz0gawogICAgaWYgKHNoID49IHNlbGYuREIpIHNoIC09IHNlbGYuREIKICB9CiAgaWYgKGsgPT0gOCAmJiAoc1swXSAmIDB4ODApICE9IDApIHsKICAgIHNlbGYucyA9IC0xCiAgICBpZiAoc2ggPiAwKSBzZWxmW3NlbGYudCAtIDFdIHw9ICgoMSA8PCAoc2VsZi5EQiAtIHNoKSkgLSAxKSA8PCBzaAogIH0KICBzZWxmLmNsYW1wKCkKICBpZiAobWkpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhzZWxmLCBzZWxmKQp9CgovLyAocHJvdGVjdGVkKSBjbGFtcCBvZmYgZXhjZXNzIGhpZ2ggd29yZHMKZnVuY3Rpb24gYm5wQ2xhbXAoKSB7CiAgdmFyIGMgPSB0aGlzLnMgJiB0aGlzLkRNCiAgd2hpbGUgKHRoaXMudCA+IDAgJiYgdGhpc1t0aGlzLnQgLSAxXSA9PSBjKS0tdGhpcy50Cn0KCi8vIChwdWJsaWMpIHJldHVybiBzdHJpbmcgcmVwcmVzZW50YXRpb24gaW4gZ2l2ZW4gcmFkaXgKZnVuY3Rpb24gYm5Ub1N0cmluZyhiKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgaWYgKHNlbGYucyA8IDApIHJldHVybiAiLSIgKyBzZWxmLm5lZ2F0ZSgpCiAgICAudG9TdHJpbmcoYikKICB2YXIgawogIGlmIChiID09IDE2KSBrID0gNAogIGVsc2UgaWYgKGIgPT0gOCkgayA9IDMKICBlbHNlIGlmIChiID09IDIpIGsgPSAxCiAgZWxzZSBpZiAoYiA9PSAzMikgayA9IDUKICBlbHNlIGlmIChiID09IDQpIGsgPSAyCiAgZWxzZSByZXR1cm4gc2VsZi50b1JhZGl4KGIpCiAgdmFyIGttID0gKDEgPDwgaykgLSAxLAogICAgZCwgbSA9IGZhbHNlLAogICAgciA9ICIiLAogICAgaSA9IHNlbGYudAogIHZhciBwID0gc2VsZi5EQiAtIChpICogc2VsZi5EQikgJSBrCiAgaWYgKGktLSA+IDApIHsKICAgIGlmIChwIDwgc2VsZi5EQiAmJiAoZCA9IHNlbGZbaV0gPj4gcCkgPiAwKSB7CiAgICAgIG0gPSB0cnVlCiAgICAgIHIgPSBpbnQyY2hhcihkKQogICAgfQogICAgd2hpbGUgKGkgPj0gMCkgewogICAgICBpZiAocCA8IGspIHsKICAgICAgICBkID0gKHNlbGZbaV0gJiAoKDEgPDwgcCkgLSAxKSkgPDwgKGsgLSBwKQogICAgICAgIGQgfD0gc2VsZlstLWldID4+IChwICs9IHNlbGYuREIgLSBrKQogICAgICB9IGVsc2UgewogICAgICAgIGQgPSAoc2VsZltpXSA+PiAocCAtPSBrKSkgJiBrbQogICAgICAgIGlmIChwIDw9IDApIHsKICAgICAgICAgIHAgKz0gc2VsZi5EQgogICAgICAgICAgLS1pCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChkID4gMCkgbSA9IHRydWUKICAgICAgaWYgKG0pIHIgKz0gaW50MmNoYXIoZCkKICAgIH0KICB9CiAgcmV0dXJuIG0gPyByIDogIjAiCn0KCi8vIChwdWJsaWMpIC10aGlzCmZ1bmN0aW9uIGJuTmVnYXRlKCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyh0aGlzLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHx0aGlzfApmdW5jdGlvbiBibkFicygpIHsKICByZXR1cm4gKHRoaXMucyA8IDApID8gdGhpcy5uZWdhdGUoKSA6IHRoaXMKfQoKLy8gKHB1YmxpYykgcmV0dXJuICsgaWYgdGhpcyA+IGEsIC0gaWYgdGhpcyA8IGEsIDAgaWYgZXF1YWwKZnVuY3Rpb24gYm5Db21wYXJlVG8oYSkgewogIHZhciByID0gdGhpcy5zIC0gYS5zCiAgaWYgKHIgIT0gMCkgcmV0dXJuIHIKICB2YXIgaSA9IHRoaXMudAogIHIgPSBpIC0gYS50CiAgaWYgKHIgIT0gMCkgcmV0dXJuICh0aGlzLnMgPCAwKSA/IC1yIDogcgogIHdoaWxlICgtLWkgPj0gMCkKICAgIGlmICgociA9IHRoaXNbaV0gLSBhW2ldKSAhPSAwKSByZXR1cm4gcgogIHJldHVybiAwCn0KCi8vIHJldHVybnMgYml0IGxlbmd0aCBvZiB0aGUgaW50ZWdlciB4CmZ1bmN0aW9uIG5iaXRzKHgpIHsKICB2YXIgciA9IDEsCiAgICB0CiAgaWYgKCh0ID0geCA+Pj4gMTYpICE9IDApIHsKICAgIHggPSB0CiAgICByICs9IDE2CiAgfQogIGlmICgodCA9IHggPj4gOCkgIT0gMCkgewogICAgeCA9IHQKICAgIHIgKz0gOAogIH0KICBpZiAoKHQgPSB4ID4+IDQpICE9IDApIHsKICAgIHggPSB0CiAgICByICs9IDQKICB9CiAgaWYgKCh0ID0geCA+PiAyKSAhPSAwKSB7CiAgICB4ID0gdAogICAgciArPSAyCiAgfQogIGlmICgodCA9IHggPj4gMSkgIT0gMCkgewogICAgeCA9IHQKICAgIHIgKz0gMQogIH0KICByZXR1cm4gcgp9CgovLyAocHVibGljKSByZXR1cm4gdGhlIG51bWJlciBvZiBiaXRzIGluICJ0aGlzIgpmdW5jdGlvbiBibkJpdExlbmd0aCgpIHsKICBpZiAodGhpcy50IDw9IDApIHJldHVybiAwCiAgcmV0dXJuIHRoaXMuREIgKiAodGhpcy50IC0gMSkgKyBuYml0cyh0aGlzW3RoaXMudCAtIDFdIF4gKHRoaXMucyAmIHRoaXMuRE0pKQp9CgovLyAocHVibGljKSByZXR1cm4gdGhlIG51bWJlciBvZiBieXRlcyBpbiAidGhpcyIKZnVuY3Rpb24gYm5CeXRlTGVuZ3RoKCkgewogIHJldHVybiB0aGlzLmJpdExlbmd0aCgpID4+IDMKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgPDwgbipEQgpmdW5jdGlvbiBibnBETFNoaWZ0VG8obiwgcikgewogIHZhciBpCiAgZm9yIChpID0gdGhpcy50IC0gMTsgaSA+PSAwOyAtLWkpIHJbaSArIG5dID0gdGhpc1tpXQogIGZvciAoaSA9IG4gLSAxOyBpID49IDA7IC0taSkgcltpXSA9IDAKICByLnQgPSB0aGlzLnQgKyBuCiAgci5zID0gdGhpcy5zCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzID4+IG4qREIKZnVuY3Rpb24gYm5wRFJTaGlmdFRvKG4sIHIpIHsKICBmb3IgKHZhciBpID0gbjsgaSA8IHRoaXMudDsgKytpKSByW2kgLSBuXSA9IHRoaXNbaV0KICByLnQgPSBNYXRoLm1heCh0aGlzLnQgLSBuLCAwKQogIHIucyA9IHRoaXMucwp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpcyA8PCBuCmZ1bmN0aW9uIGJucExTaGlmdFRvKG4sIHIpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB2YXIgYnMgPSBuICUgc2VsZi5EQgogIHZhciBjYnMgPSBzZWxmLkRCIC0gYnMKICB2YXIgYm0gPSAoMSA8PCBjYnMpIC0gMQogIHZhciBkcyA9IE1hdGguZmxvb3IobiAvIHNlbGYuREIpLAogICAgYyA9IChzZWxmLnMgPDwgYnMpICYgc2VsZi5ETSwKICAgIGkKICBmb3IgKGkgPSBzZWxmLnQgLSAxOyBpID49IDA7IC0taSkgewogICAgcltpICsgZHMgKyAxXSA9IChzZWxmW2ldID4+IGNicykgfCBjCiAgICBjID0gKHNlbGZbaV0gJiBibSkgPDwgYnMKICB9CiAgZm9yIChpID0gZHMgLSAxOyBpID49IDA7IC0taSkgcltpXSA9IDAKICByW2RzXSA9IGMKICByLnQgPSBzZWxmLnQgKyBkcyArIDEKICByLnMgPSBzZWxmLnMKICByLmNsYW1wKCkKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgPj4gbgpmdW5jdGlvbiBibnBSU2hpZnRUbyhuLCByKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgci5zID0gc2VsZi5zCiAgdmFyIGRzID0gTWF0aC5mbG9vcihuIC8gc2VsZi5EQikKICBpZiAoZHMgPj0gc2VsZi50KSB7CiAgICByLnQgPSAwCiAgICByZXR1cm4KICB9CiAgdmFyIGJzID0gbiAlIHNlbGYuREIKICB2YXIgY2JzID0gc2VsZi5EQiAtIGJzCiAgdmFyIGJtID0gKDEgPDwgYnMpIC0gMQogIHJbMF0gPSBzZWxmW2RzXSA+PiBicwogIGZvciAodmFyIGkgPSBkcyArIDE7IGkgPCBzZWxmLnQ7ICsraSkgewogICAgcltpIC0gZHMgLSAxXSB8PSAoc2VsZltpXSAmIGJtKSA8PCBjYnMKICAgIHJbaSAtIGRzXSA9IHNlbGZbaV0gPj4gYnMKICB9CiAgaWYgKGJzID4gMCkgcltzZWxmLnQgLSBkcyAtIDFdIHw9IChzZWxmLnMgJiBibSkgPDwgY2JzCiAgci50ID0gc2VsZi50IC0gZHMKICByLmNsYW1wKCkKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgLSBhCmZ1bmN0aW9uIGJucFN1YlRvKGEsIHIpIHsKICB2YXIgc2VsZiA9IHRoaXMKICB2YXIgaSA9IDAsCiAgICBjID0gMCwKICAgIG0gPSBNYXRoLm1pbihhLnQsIHNlbGYudCkKICB3aGlsZSAoaSA8IG0pIHsKICAgIGMgKz0gc2VsZltpXSAtIGFbaV0KICAgIHJbaSsrXSA9IGMgJiBzZWxmLkRNCiAgICBjID4+PSBzZWxmLkRCCiAgfQogIGlmIChhLnQgPCBzZWxmLnQpIHsKICAgIGMgLT0gYS5zCiAgICB3aGlsZSAoaSA8IHNlbGYudCkgewogICAgICBjICs9IHNlbGZbaV0KICAgICAgcltpKytdID0gYyAmIHNlbGYuRE0KICAgICAgYyA+Pj0gc2VsZi5EQgogICAgfQogICAgYyArPSBzZWxmLnMKICB9IGVsc2UgewogICAgYyArPSBzZWxmLnMKICAgIHdoaWxlIChpIDwgYS50KSB7CiAgICAgIGMgLT0gYVtpXQogICAgICByW2krK10gPSBjICYgc2VsZi5ETQogICAgICBjID4+PSBzZWxmLkRCCiAgICB9CiAgICBjIC09IGEucwogIH0KICByLnMgPSAoYyA8IDApID8gLTEgOiAwCiAgaWYgKGMgPCAtMSkgcltpKytdID0gc2VsZi5EViArIGMKICBlbHNlIGlmIChjID4gMCkgcltpKytdID0gYwogIHIudCA9IGkKICByLmNsYW1wKCkKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgKiBhLCByICE9IHRoaXMsYSAoSEFDIDE0LjEyKQovLyAidGhpcyIgc2hvdWxkIGJlIHRoZSBsYXJnZXIgb25lIGlmIGFwcHJvcHJpYXRlLgpmdW5jdGlvbiBibnBNdWx0aXBseVRvKGEsIHIpIHsKICB2YXIgeCA9IHRoaXMuYWJzKCksCiAgICB5ID0gYS5hYnMoKQogIHZhciBpID0geC50CiAgci50ID0gaSArIHkudAogIHdoaWxlICgtLWkgPj0gMCkgcltpXSA9IDAKICBmb3IgKGkgPSAwOyBpIDwgeS50OyArK2kpIHJbaSArIHgudF0gPSB4LmFtKDAsIHlbaV0sIHIsIGksIDAsIHgudCkKICByLnMgPSAwCiAgci5jbGFtcCgpCiAgaWYgKHRoaXMucyAhPSBhLnMpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhyLCByKQp9CgovLyAocHJvdGVjdGVkKSByID0gdGhpc14yLCByICE9IHRoaXMgKEhBQyAxNC4xNikKZnVuY3Rpb24gYm5wU3F1YXJlVG8ocikgewogIHZhciB4ID0gdGhpcy5hYnMoKQogIHZhciBpID0gci50ID0gMiAqIHgudAogIHdoaWxlICgtLWkgPj0gMCkgcltpXSA9IDAKICBmb3IgKGkgPSAwOyBpIDwgeC50IC0gMTsgKytpKSB7CiAgICB2YXIgYyA9IHguYW0oaSwgeFtpXSwgciwgMiAqIGksIDAsIDEpCiAgICBpZiAoKHJbaSArIHgudF0gKz0geC5hbShpICsgMSwgMiAqIHhbaV0sIHIsIDIgKiBpICsgMSwgYywgeC50IC0gaSAtIDEpKSA+PSB4LkRWKSB7CiAgICAgIHJbaSArIHgudF0gLT0geC5EVgogICAgICByW2kgKyB4LnQgKyAxXSA9IDEKICAgIH0KICB9CiAgaWYgKHIudCA+IDApIHJbci50IC0gMV0gKz0geC5hbShpLCB4W2ldLCByLCAyICogaSwgMCwgMSkKICByLnMgPSAwCiAgci5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIGRpdmlkZSB0aGlzIGJ5IG0sIHF1b3RpZW50IGFuZCByZW1haW5kZXIgdG8gcSwgciAoSEFDIDE0LjIwKQovLyByICE9IHEsIHRoaXMgIT0gbS4gIHEgb3IgciBtYXkgYmUgbnVsbC4KZnVuY3Rpb24gYm5wRGl2UmVtVG8obSwgcSwgcikgewogIHZhciBzZWxmID0gdGhpcwogIHZhciBwbSA9IG0uYWJzKCkKICBpZiAocG0udCA8PSAwKSByZXR1cm4KICB2YXIgcHQgPSBzZWxmLmFicygpCiAgaWYgKHB0LnQgPCBwbS50KSB7CiAgICBpZiAocSAhPSBudWxsKSBxLmZyb21JbnQoMCkKICAgIGlmIChyICE9IG51bGwpIHNlbGYuY29weVRvKHIpCiAgICByZXR1cm4KICB9CiAgaWYgKHIgPT0gbnVsbCkgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB2YXIgeSA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICB0cyA9IHNlbGYucywKICAgIG1zID0gbS5zCiAgdmFyIG5zaCA9IHNlbGYuREIgLSBuYml0cyhwbVtwbS50IC0gMV0pOyAvLyBub3JtYWxpemUgbW9kdWx1cwogIGlmIChuc2ggPiAwKSB7CiAgICBwbS5sU2hpZnRUbyhuc2gsIHkpCiAgICBwdC5sU2hpZnRUbyhuc2gsIHIpCiAgfSBlbHNlIHsKICAgIHBtLmNvcHlUbyh5KQogICAgcHQuY29weVRvKHIpCiAgfQogIHZhciB5cyA9IHkudAogIHZhciB5MCA9IHlbeXMgLSAxXQogIGlmICh5MCA9PSAwKSByZXR1cm4KICB2YXIgeXQgPSB5MCAqICgxIDw8IHNlbGYuRjEpICsgKCh5cyA+IDEpID8geVt5cyAtIDJdID4+IHNlbGYuRjIgOiAwKQogIHZhciBkMSA9IHNlbGYuRlYgLyB5dCwKICAgIGQyID0gKDEgPDwgc2VsZi5GMSkgLyB5dCwKICAgIGUgPSAxIDw8IHNlbGYuRjIKICB2YXIgaSA9IHIudCwKICAgIGogPSBpIC0geXMsCiAgICB0ID0gKHEgPT0gbnVsbCkgPyBuZXcgQmlnSW50ZWdlcigpIDogcQogIHkuZGxTaGlmdFRvKGosIHQpCiAgaWYgKHIuY29tcGFyZVRvKHQpID49IDApIHsKICAgIHJbci50KytdID0gMQogICAgci5zdWJUbyh0LCByKQogIH0KICBCaWdJbnRlZ2VyLk9ORS5kbFNoaWZ0VG8oeXMsIHQpCiAgdC5zdWJUbyh5LCB5KTsgLy8gIm5lZ2F0aXZlIiB5IHNvIHdlIGNhbiByZXBsYWNlIHN1YiB3aXRoIGFtIGxhdGVyCiAgd2hpbGUgKHkudCA8IHlzKSB5W3kudCsrXSA9IDAKICB3aGlsZSAoLS1qID49IDApIHsKICAgIC8vIEVzdGltYXRlIHF1b3RpZW50IGRpZ2l0CiAgICB2YXIgcWQgPSAoclstLWldID09IHkwKSA/IHNlbGYuRE0gOiBNYXRoLmZsb29yKHJbaV0gKiBkMSArIChyW2kgLSAxXSArIGUpICogZDIpCiAgICBpZiAoKHJbaV0gKz0geS5hbSgwLCBxZCwgciwgaiwgMCwgeXMpKSA8IHFkKSB7IC8vIFRyeSBpdCBvdXQKICAgICAgeS5kbFNoaWZ0VG8oaiwgdCkKICAgICAgci5zdWJUbyh0LCByKQogICAgICB3aGlsZSAocltpXSA8IC0tcWQpIHIuc3ViVG8odCwgcikKICAgIH0KICB9CiAgaWYgKHEgIT0gbnVsbCkgewogICAgci5kclNoaWZ0VG8oeXMsIHEpCiAgICBpZiAodHMgIT0gbXMpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhxLCBxKQogIH0KICByLnQgPSB5cwogIHIuY2xhbXAoKQogIGlmIChuc2ggPiAwKSByLnJTaGlmdFRvKG5zaCwgcik7IC8vIERlbm9ybWFsaXplIHJlbWFpbmRlcgogIGlmICh0cyA8IDApIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhyLCByKQp9CgovLyAocHVibGljKSB0aGlzIG1vZCBhCmZ1bmN0aW9uIGJuTW9kKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmFicygpCiAgICAuZGl2UmVtVG8oYSwgbnVsbCwgcikKICBpZiAodGhpcy5zIDwgMCAmJiByLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLlpFUk8pID4gMCkgYS5zdWJUbyhyLCByKQogIHJldHVybiByCn0KCi8vIE1vZHVsYXIgcmVkdWN0aW9uIHVzaW5nICJjbGFzc2ljIiBhbGdvcml0aG0KZnVuY3Rpb24gQ2xhc3NpYyhtKSB7CiAgdGhpcy5tID0gbQp9CgpmdW5jdGlvbiBjQ29udmVydCh4KSB7CiAgaWYgKHgucyA8IDAgfHwgeC5jb21wYXJlVG8odGhpcy5tKSA+PSAwKSByZXR1cm4geC5tb2QodGhpcy5tKQogIGVsc2UgcmV0dXJuIHgKfQoKZnVuY3Rpb24gY1JldmVydCh4KSB7CiAgcmV0dXJuIHgKfQoKZnVuY3Rpb24gY1JlZHVjZSh4KSB7CiAgeC5kaXZSZW1Ubyh0aGlzLm0sIG51bGwsIHgpCn0KCmZ1bmN0aW9uIGNNdWxUbyh4LCB5LCByKSB7CiAgeC5tdWx0aXBseVRvKHksIHIpCiAgdGhpcy5yZWR1Y2UocikKfQoKZnVuY3Rpb24gY1NxclRvKHgsIHIpIHsKICB4LnNxdWFyZVRvKHIpCiAgdGhpcy5yZWR1Y2UocikKfQoKQ2xhc3NpYy5wcm90b3R5cGUuY29udmVydCA9IGNDb252ZXJ0CkNsYXNzaWMucHJvdG90eXBlLnJldmVydCA9IGNSZXZlcnQKQ2xhc3NpYy5wcm90b3R5cGUucmVkdWNlID0gY1JlZHVjZQpDbGFzc2ljLnByb3RvdHlwZS5tdWxUbyA9IGNNdWxUbwpDbGFzc2ljLnByb3RvdHlwZS5zcXJUbyA9IGNTcXJUbwoKLy8gKHByb3RlY3RlZCkgcmV0dXJuICItMS90aGlzICUgMl5EQiI7IHVzZWZ1bCBmb3IgTW9udC4gcmVkdWN0aW9uCi8vIGp1c3RpZmljYXRpb246Ci8vICAgICAgICAgeHkgPT0gMSAobW9kIG0pCi8vICAgICAgICAgeHkgPSAgMStrbQovLyAgIHh5KDIteHkpID0gKDEra20pKDEta20pCi8vIHhbeSgyLXh5KV0gPSAxLWteMm1eMgovLyB4W3koMi14eSldID09IDEgKG1vZCBtXjIpCi8vIGlmIHkgaXMgMS94IG1vZCBtLCB0aGVuIHkoMi14eSkgaXMgMS94IG1vZCBtXjIKLy8gc2hvdWxkIHJlZHVjZSB4IGFuZCB5KDIteHkpIGJ5IG1eMiBhdCBlYWNoIHN0ZXAgdG8ga2VlcCBzaXplIGJvdW5kZWQuCi8vIEpTIG11bHRpcGx5ICJvdmVyZmxvd3MiIGRpZmZlcmVudGx5IGZyb20gQy9DKyssIHNvIGNhcmUgaXMgbmVlZGVkIGhlcmUuCmZ1bmN0aW9uIGJucEludkRpZ2l0KCkgewogIGlmICh0aGlzLnQgPCAxKSByZXR1cm4gMAogIHZhciB4ID0gdGhpc1swXQogIGlmICgoeCAmIDEpID09IDApIHJldHVybiAwCiAgdmFyIHkgPSB4ICYgMzsgLy8geSA9PSAxL3ggbW9kIDJeMgogIHkgPSAoeSAqICgyIC0gKHggJiAweGYpICogeSkpICYgMHhmOyAvLyB5ID09IDEveCBtb2QgMl40CiAgeSA9ICh5ICogKDIgLSAoeCAmIDB4ZmYpICogeSkpICYgMHhmZjsgLy8geSA9PSAxL3ggbW9kIDJeOAogIHkgPSAoeSAqICgyIC0gKCgoeCAmIDB4ZmZmZikgKiB5KSAmIDB4ZmZmZikpKSAmIDB4ZmZmZjsgLy8geSA9PSAxL3ggbW9kIDJeMTYKICAvLyBsYXN0IHN0ZXAgLSBjYWxjdWxhdGUgaW52ZXJzZSBtb2QgRFYgZGlyZWN0bHkKICAvLyBhc3N1bWVzIDE2IDwgREIgPD0gMzIgYW5kIGFzc3VtZXMgYWJpbGl0eSB0byBoYW5kbGUgNDgtYml0IGludHMKICB5ID0gKHkgKiAoMiAtIHggKiB5ICUgdGhpcy5EVikpICUgdGhpcy5EVjsgLy8geSA9PSAxL3ggbW9kIDJeZGJpdHMKICAvLyB3ZSByZWFsbHkgd2FudCB0aGUgbmVnYXRpdmUgaW52ZXJzZSwgYW5kIC1EViA8IHkgPCBEVgogIHJldHVybiAoeSA+IDApID8gdGhpcy5EViAtIHkgOiAteQp9CgovLyBNb250Z29tZXJ5IHJlZHVjdGlvbgpmdW5jdGlvbiBNb250Z29tZXJ5KG0pIHsKICB0aGlzLm0gPSBtCiAgdGhpcy5tcCA9IG0uaW52RGlnaXQoKQogIHRoaXMubXBsID0gdGhpcy5tcCAmIDB4N2ZmZgogIHRoaXMubXBoID0gdGhpcy5tcCA+PiAxNQogIHRoaXMudW0gPSAoMSA8PCAobS5EQiAtIDE1KSkgLSAxCiAgdGhpcy5tdDIgPSAyICogbS50Cn0KCi8vIHhSIG1vZCBtCmZ1bmN0aW9uIG1vbnRDb252ZXJ0KHgpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB4LmFicygpCiAgICAuZGxTaGlmdFRvKHRoaXMubS50LCByKQogIHIuZGl2UmVtVG8odGhpcy5tLCBudWxsLCByKQogIGlmICh4LnMgPCAwICYmIHIuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTykgPiAwKSB0aGlzLm0uc3ViVG8ociwgcikKICByZXR1cm4gcgp9CgovLyB4L1IgbW9kIG0KZnVuY3Rpb24gbW9udFJldmVydCh4KSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgeC5jb3B5VG8ocikKICB0aGlzLnJlZHVjZShyKQogIHJldHVybiByCn0KCi8vIHggPSB4L1IgbW9kIG0gKEhBQyAxNC4zMikKZnVuY3Rpb24gbW9udFJlZHVjZSh4KSB7CiAgd2hpbGUgKHgudCA8PSB0aGlzLm10MikgLy8gcGFkIHggc28gYW0gaGFzIGVub3VnaCByb29tIGxhdGVyCiAgICB4W3gudCsrXSA9IDAKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubS50OyArK2kpIHsKICAgIC8vIGZhc3RlciB3YXkgb2YgY2FsY3VsYXRpbmcgdTAgPSB4W2ldKm1wIG1vZCBEVgogICAgdmFyIGogPSB4W2ldICYgMHg3ZmZmCiAgICB2YXIgdTAgPSAoaiAqIHRoaXMubXBsICsgKCgoaiAqIHRoaXMubXBoICsgKHhbaV0gPj4gMTUpICogdGhpcy5tcGwpICYgdGhpcy51bSkgPDwgMTUpKSAmIHguRE0KICAgIC8vIHVzZSBhbSB0byBjb21iaW5lIHRoZSBtdWx0aXBseS1zaGlmdC1hZGQgaW50byBvbmUgY2FsbAogICAgaiA9IGkgKyB0aGlzLm0udAogICAgeFtqXSArPSB0aGlzLm0uYW0oMCwgdTAsIHgsIGksIDAsIHRoaXMubS50KQogICAgLy8gcHJvcGFnYXRlIGNhcnJ5CiAgICB3aGlsZSAoeFtqXSA+PSB4LkRWKSB7CiAgICAgIHhbal0gLT0geC5EVgogICAgICB4Wysral0rKwogICAgfQogIH0KICB4LmNsYW1wKCkKICB4LmRyU2hpZnRUbyh0aGlzLm0udCwgeCkKICBpZiAoeC5jb21wYXJlVG8odGhpcy5tKSA+PSAwKSB4LnN1YlRvKHRoaXMubSwgeCkKfQoKLy8gciA9ICJ4XjIvUiBtb2QgbSI7IHggIT0gcgpmdW5jdGlvbiBtb250U3FyVG8oeCwgcikgewogIHguc3F1YXJlVG8ocikKICB0aGlzLnJlZHVjZShyKQp9CgovLyByID0gInh5L1IgbW9kIG0iOyB4LHkgIT0gcgpmdW5jdGlvbiBtb250TXVsVG8oeCwgeSwgcikgewogIHgubXVsdGlwbHlUbyh5LCByKQogIHRoaXMucmVkdWNlKHIpCn0KCk1vbnRnb21lcnkucHJvdG90eXBlLmNvbnZlcnQgPSBtb250Q29udmVydApNb250Z29tZXJ5LnByb3RvdHlwZS5yZXZlcnQgPSBtb250UmV2ZXJ0Ck1vbnRnb21lcnkucHJvdG90eXBlLnJlZHVjZSA9IG1vbnRSZWR1Y2UKTW9udGdvbWVyeS5wcm90b3R5cGUubXVsVG8gPSBtb250TXVsVG8KTW9udGdvbWVyeS5wcm90b3R5cGUuc3FyVG8gPSBtb250U3FyVG8KCi8vIChwcm90ZWN0ZWQpIHRydWUgaWZmIHRoaXMgaXMgZXZlbgpmdW5jdGlvbiBibnBJc0V2ZW4oKSB7CiAgcmV0dXJuICgodGhpcy50ID4gMCkgPyAodGhpc1swXSAmIDEpIDogdGhpcy5zKSA9PSAwCn0KCi8vIChwcm90ZWN0ZWQpIHRoaXNeZSwgZSA8IDJeMzIsIGRvaW5nIHNxciBhbmQgbXVsIHdpdGggInIiIChIQUMgMTQuNzkpCmZ1bmN0aW9uIGJucEV4cChlLCB6KSB7CiAgaWYgKGUgPiAweGZmZmZmZmZmIHx8IGUgPCAxKSByZXR1cm4gQmlnSW50ZWdlci5PTkUKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICByMiA9IG5ldyBCaWdJbnRlZ2VyKCksCiAgICBnID0gei5jb252ZXJ0KHRoaXMpLAogICAgaSA9IG5iaXRzKGUpIC0gMQogIGcuY29weVRvKHIpCiAgd2hpbGUgKC0taSA+PSAwKSB7CiAgICB6LnNxclRvKHIsIHIyKQogICAgaWYgKChlICYgKDEgPDwgaSkpID4gMCkgei5tdWxUbyhyMiwgZywgcikKICAgIGVsc2UgewogICAgICB2YXIgdCA9IHIKICAgICAgciA9IHIyCiAgICAgIHIyID0gdAogICAgfQogIH0KICByZXR1cm4gei5yZXZlcnQocikKfQoKLy8gKHB1YmxpYykgdGhpc15lICUgbSwgMCA8PSBlIDwgMl4zMgpmdW5jdGlvbiBibk1vZFBvd0ludChlLCBtKSB7CiAgdmFyIHoKICBpZiAoZSA8IDI1NiB8fCBtLmlzRXZlbigpKSB6ID0gbmV3IENsYXNzaWMobSkKICBlbHNlIHogPSBuZXcgTW9udGdvbWVyeShtKQogIHJldHVybiB0aGlzLmV4cChlLCB6KQp9CgovLyBwcm90ZWN0ZWQKcHJvdG8uY29weVRvID0gYm5wQ29weVRvCnByb3RvLmZyb21JbnQgPSBibnBGcm9tSW50CnByb3RvLmZyb21TdHJpbmcgPSBibnBGcm9tU3RyaW5nCnByb3RvLmNsYW1wID0gYm5wQ2xhbXAKcHJvdG8uZGxTaGlmdFRvID0gYm5wRExTaGlmdFRvCnByb3RvLmRyU2hpZnRUbyA9IGJucERSU2hpZnRUbwpwcm90by5sU2hpZnRUbyA9IGJucExTaGlmdFRvCnByb3RvLnJTaGlmdFRvID0gYm5wUlNoaWZ0VG8KcHJvdG8uc3ViVG8gPSBibnBTdWJUbwpwcm90by5tdWx0aXBseVRvID0gYm5wTXVsdGlwbHlUbwpwcm90by5zcXVhcmVUbyA9IGJucFNxdWFyZVRvCnByb3RvLmRpdlJlbVRvID0gYm5wRGl2UmVtVG8KcHJvdG8uaW52RGlnaXQgPSBibnBJbnZEaWdpdApwcm90by5pc0V2ZW4gPSBibnBJc0V2ZW4KcHJvdG8uZXhwID0gYm5wRXhwCgovLyBwdWJsaWMKcHJvdG8udG9TdHJpbmcgPSBiblRvU3RyaW5nCnByb3RvLm5lZ2F0ZSA9IGJuTmVnYXRlCnByb3RvLmFicyA9IGJuQWJzCnByb3RvLmNvbXBhcmVUbyA9IGJuQ29tcGFyZVRvCnByb3RvLmJpdExlbmd0aCA9IGJuQml0TGVuZ3RoCnByb3RvLmJ5dGVMZW5ndGggPSBibkJ5dGVMZW5ndGgKcHJvdG8ubW9kID0gYm5Nb2QKcHJvdG8ubW9kUG93SW50ID0gYm5Nb2RQb3dJbnQKCi8vIChwdWJsaWMpCmZ1bmN0aW9uIGJuQ2xvbmUoKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5jb3B5VG8ocikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSByZXR1cm4gdmFsdWUgYXMgaW50ZWdlcgpmdW5jdGlvbiBibkludFZhbHVlKCkgewogIGlmICh0aGlzLnMgPCAwKSB7CiAgICBpZiAodGhpcy50ID09IDEpIHJldHVybiB0aGlzWzBdIC0gdGhpcy5EVgogICAgZWxzZSBpZiAodGhpcy50ID09IDApIHJldHVybiAtMQogIH0gZWxzZSBpZiAodGhpcy50ID09IDEpIHJldHVybiB0aGlzWzBdCiAgZWxzZSBpZiAodGhpcy50ID09IDApIHJldHVybiAwCiAgLy8gYXNzdW1lcyAxNiA8IERCIDwgMzIKICByZXR1cm4gKCh0aGlzWzFdICYgKCgxIDw8ICgzMiAtIHRoaXMuREIpKSAtIDEpKSA8PCB0aGlzLkRCKSB8IHRoaXNbMF0KfQoKLy8gKHB1YmxpYykgcmV0dXJuIHZhbHVlIGFzIGJ5dGUKZnVuY3Rpb24gYm5CeXRlVmFsdWUoKSB7CiAgcmV0dXJuICh0aGlzLnQgPT0gMCkgPyB0aGlzLnMgOiAodGhpc1swXSA8PCAyNCkgPj4gMjQKfQoKLy8gKHB1YmxpYykgcmV0dXJuIHZhbHVlIGFzIHNob3J0IChhc3N1bWVzIERCPj0xNikKZnVuY3Rpb24gYm5TaG9ydFZhbHVlKCkgewogIHJldHVybiAodGhpcy50ID09IDApID8gdGhpcy5zIDogKHRoaXNbMF0gPDwgMTYpID4+IDE2Cn0KCi8vIChwcm90ZWN0ZWQpIHJldHVybiB4IHMudC4gcl54IDwgRFYKZnVuY3Rpb24gYm5wQ2h1bmtTaXplKHIpIHsKICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLkxOMiAqIHRoaXMuREIgLyBNYXRoLmxvZyhyKSkKfQoKLy8gKHB1YmxpYykgMCBpZiB0aGlzID09IDAsIDEgaWYgdGhpcyA+IDAKZnVuY3Rpb24gYm5TaWdOdW0oKSB7CiAgaWYgKHRoaXMucyA8IDApIHJldHVybiAtMQogIGVsc2UgaWYgKHRoaXMudCA8PSAwIHx8ICh0aGlzLnQgPT0gMSAmJiB0aGlzWzBdIDw9IDApKSByZXR1cm4gMAogIGVsc2UgcmV0dXJuIDEKfQoKLy8gKHByb3RlY3RlZCkgY29udmVydCB0byByYWRpeCBzdHJpbmcKZnVuY3Rpb24gYm5wVG9SYWRpeChiKSB7CiAgaWYgKGIgPT0gbnVsbCkgYiA9IDEwCiAgaWYgKHRoaXMuc2lnbnVtKCkgPT0gMCB8fCBiIDwgMiB8fCBiID4gMzYpIHJldHVybiAiMCIKICB2YXIgY3MgPSB0aGlzLmNodW5rU2l6ZShiKQogIHZhciBhID0gTWF0aC5wb3coYiwgY3MpCiAgdmFyIGQgPSBuYnYoYSksCiAgICB5ID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIHogPSBuZXcgQmlnSW50ZWdlcigpLAogICAgciA9ICIiCiAgdGhpcy5kaXZSZW1UbyhkLCB5LCB6KQogIHdoaWxlICh5LnNpZ251bSgpID4gMCkgewogICAgciA9IChhICsgei5pbnRWYWx1ZSgpKQogICAgICAudG9TdHJpbmcoYikKICAgICAgLnN1YnN0cigxKSArIHIKICAgIHkuZGl2UmVtVG8oZCwgeSwgeikKICB9CiAgcmV0dXJuIHouaW50VmFsdWUoKQogICAgLnRvU3RyaW5nKGIpICsgcgp9CgovLyAocHJvdGVjdGVkKSBjb252ZXJ0IGZyb20gcmFkaXggc3RyaW5nCmZ1bmN0aW9uIGJucEZyb21SYWRpeChzLCBiKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgc2VsZi5mcm9tSW50KDApCiAgaWYgKGIgPT0gbnVsbCkgYiA9IDEwCiAgdmFyIGNzID0gc2VsZi5jaHVua1NpemUoYikKICB2YXIgZCA9IE1hdGgucG93KGIsIGNzKSwKICAgIG1pID0gZmFsc2UsCiAgICBqID0gMCwKICAgIHcgPSAwCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgKytpKSB7CiAgICB2YXIgeCA9IGludEF0KHMsIGkpCiAgICBpZiAoeCA8IDApIHsKICAgICAgaWYgKHMuY2hhckF0KGkpID09ICItIiAmJiBzZWxmLnNpZ251bSgpID09IDApIG1pID0gdHJ1ZQogICAgICBjb250aW51ZQogICAgfQogICAgdyA9IGIgKiB3ICsgeAogICAgaWYgKCsraiA+PSBjcykgewogICAgICBzZWxmLmRNdWx0aXBseShkKQogICAgICBzZWxmLmRBZGRPZmZzZXQodywgMCkKICAgICAgaiA9IDAKICAgICAgdyA9IDAKICAgIH0KICB9CiAgaWYgKGogPiAwKSB7CiAgICBzZWxmLmRNdWx0aXBseShNYXRoLnBvdyhiLCBqKSkKICAgIHNlbGYuZEFkZE9mZnNldCh3LCAwKQogIH0KICBpZiAobWkpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhzZWxmLCBzZWxmKQp9CgovLyAocHJvdGVjdGVkKSBhbHRlcm5hdGUgY29uc3RydWN0b3IKZnVuY3Rpb24gYm5wRnJvbU51bWJlcihhLCBiLCBjKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgaWYgKCJudW1iZXIiID09IHR5cGVvZiBiKSB7CiAgICAvLyBuZXcgQmlnSW50ZWdlcihpbnQsaW50LFJORykKICAgIGlmIChhIDwgMikgc2VsZi5mcm9tSW50KDEpCiAgICBlbHNlIHsKICAgICAgc2VsZi5mcm9tTnVtYmVyKGEsIGMpCiAgICAgIGlmICghc2VsZi50ZXN0Qml0KGEgLSAxKSkgLy8gZm9yY2UgTVNCIHNldAogICAgICAgIHNlbGYuYml0d2lzZVRvKEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChhIC0gMSksIG9wX29yLCBzZWxmKQogICAgICBpZiAoc2VsZi5pc0V2ZW4oKSkgc2VsZi5kQWRkT2Zmc2V0KDEsIDApOyAvLyBmb3JjZSBvZGQKICAgICAgd2hpbGUgKCFzZWxmLmlzUHJvYmFibGVQcmltZShiKSkgewogICAgICAgIHNlbGYuZEFkZE9mZnNldCgyLCAwKQogICAgICAgIGlmIChzZWxmLmJpdExlbmd0aCgpID4gYSkgc2VsZi5zdWJUbyhCaWdJbnRlZ2VyLk9ORS5zaGlmdExlZnQoYSAtIDEpLCBzZWxmKQogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIC8vIG5ldyBCaWdJbnRlZ2VyKGludCxSTkcpCiAgICB2YXIgeCA9IG5ldyBBcnJheSgpLAogICAgICB0ID0gYSAmIDcKICAgIHgubGVuZ3RoID0gKGEgPj4gMykgKyAxCiAgICBiLm5leHRCeXRlcyh4KQogICAgaWYgKHQgPiAwKSB4WzBdICY9ICgoMSA8PCB0KSAtIDEpCiAgICBlbHNlIHhbMF0gPSAwCiAgICBzZWxmLmZyb21TdHJpbmcoeCwgMjU2KQogIH0KfQoKLy8gKHB1YmxpYykgY29udmVydCB0byBiaWdlbmRpYW4gYnl0ZSBhcnJheQpmdW5jdGlvbiBiblRvQnl0ZUFycmF5KCkgewogIHZhciBzZWxmID0gdGhpcwogIHZhciBpID0gc2VsZi50LAogICAgciA9IG5ldyBBcnJheSgpCiAgclswXSA9IHNlbGYucwogIHZhciBwID0gc2VsZi5EQiAtIChpICogc2VsZi5EQikgJSA4LAogICAgZCwgayA9IDAKICBpZiAoaS0tID4gMCkgewogICAgaWYgKHAgPCBzZWxmLkRCICYmIChkID0gc2VsZltpXSA+PiBwKSAhPSAoc2VsZi5zICYgc2VsZi5ETSkgPj4gcCkKICAgICAgcltrKytdID0gZCB8IChzZWxmLnMgPDwgKHNlbGYuREIgLSBwKSkKICAgIHdoaWxlIChpID49IDApIHsKICAgICAgaWYgKHAgPCA4KSB7CiAgICAgICAgZCA9IChzZWxmW2ldICYgKCgxIDw8IHApIC0gMSkpIDw8ICg4IC0gcCkKICAgICAgICBkIHw9IHNlbGZbLS1pXSA+PiAocCArPSBzZWxmLkRCIC0gOCkKICAgICAgfSBlbHNlIHsKICAgICAgICBkID0gKHNlbGZbaV0gPj4gKHAgLT0gOCkpICYgMHhmZgogICAgICAgIGlmIChwIDw9IDApIHsKICAgICAgICAgIHAgKz0gc2VsZi5EQgogICAgICAgICAgLS1pCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgoZCAmIDB4ODApICE9IDApIGQgfD0gLTI1NgogICAgICBpZiAoayA9PT0gMCAmJiAoc2VsZi5zICYgMHg4MCkgIT0gKGQgJiAweDgwKSkrK2sKICAgICAgaWYgKGsgPiAwIHx8IGQgIT0gc2VsZi5zKSByW2srK10gPSBkCiAgICB9CiAgfQogIHJldHVybiByCn0KCmZ1bmN0aW9uIGJuRXF1YWxzKGEpIHsKICByZXR1cm4gKHRoaXMuY29tcGFyZVRvKGEpID09IDApCn0KCmZ1bmN0aW9uIGJuTWluKGEpIHsKICByZXR1cm4gKHRoaXMuY29tcGFyZVRvKGEpIDwgMCkgPyB0aGlzIDogYQp9CgpmdW5jdGlvbiBibk1heChhKSB7CiAgcmV0dXJuICh0aGlzLmNvbXBhcmVUbyhhKSA+IDApID8gdGhpcyA6IGEKfQoKLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgb3AgYSAoYml0d2lzZSkKZnVuY3Rpb24gYm5wQml0d2lzZVRvKGEsIG9wLCByKSB7CiAgdmFyIHNlbGYgPSB0aGlzCiAgdmFyIGksIGYsIG0gPSBNYXRoLm1pbihhLnQsIHNlbGYudCkKICBmb3IgKGkgPSAwOyBpIDwgbTsgKytpKSByW2ldID0gb3Aoc2VsZltpXSwgYVtpXSkKICBpZiAoYS50IDwgc2VsZi50KSB7CiAgICBmID0gYS5zICYgc2VsZi5ETQogICAgZm9yIChpID0gbTsgaSA8IHNlbGYudDsgKytpKSByW2ldID0gb3Aoc2VsZltpXSwgZikKICAgIHIudCA9IHNlbGYudAogIH0gZWxzZSB7CiAgICBmID0gc2VsZi5zICYgc2VsZi5ETQogICAgZm9yIChpID0gbTsgaSA8IGEudDsgKytpKSByW2ldID0gb3AoZiwgYVtpXSkKICAgIHIudCA9IGEudAogIH0KICByLnMgPSBvcChzZWxmLnMsIGEucykKICByLmNsYW1wKCkKfQoKLy8gKHB1YmxpYykgdGhpcyAmIGEKZnVuY3Rpb24gb3BfYW5kKHgsIHkpIHsKICByZXR1cm4geCAmIHkKfQoKZnVuY3Rpb24gYm5BbmQoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuYml0d2lzZVRvKGEsIG9wX2FuZCwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzIHwgYQpmdW5jdGlvbiBvcF9vcih4LCB5KSB7CiAgcmV0dXJuIHggfCB5Cn0KCmZ1bmN0aW9uIGJuT3IoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuYml0d2lzZVRvKGEsIG9wX29yLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgXiBhCmZ1bmN0aW9uIG9wX3hvcih4LCB5KSB7CiAgcmV0dXJuIHggXiB5Cn0KCmZ1bmN0aW9uIGJuWG9yKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmJpdHdpc2VUbyhhLCBvcF94b3IsIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyAmIH5hCmZ1bmN0aW9uIG9wX2FuZG5vdCh4LCB5KSB7CiAgcmV0dXJuIHggJiB+eQp9CgpmdW5jdGlvbiBibkFuZE5vdChhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5iaXR3aXNlVG8oYSwgb3BfYW5kbm90LCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIH50aGlzCmZ1bmN0aW9uIGJuTm90KCkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50OyArK2kpIHJbaV0gPSB0aGlzLkRNICYgfnRoaXNbaV0KICByLnQgPSB0aGlzLnQKICByLnMgPSB+dGhpcy5zCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyA8PCBuCmZ1bmN0aW9uIGJuU2hpZnRMZWZ0KG4pIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICBpZiAobiA8IDApIHRoaXMuclNoaWZ0VG8oLW4sIHIpCiAgZWxzZSB0aGlzLmxTaGlmdFRvKG4sIHIpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyA+PiBuCmZ1bmN0aW9uIGJuU2hpZnRSaWdodChuKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgaWYgKG4gPCAwKSB0aGlzLmxTaGlmdFRvKC1uLCByKQogIGVsc2UgdGhpcy5yU2hpZnRUbyhuLCByKQogIHJldHVybiByCn0KCi8vIHJldHVybiBpbmRleCBvZiBsb3dlc3QgMS1iaXQgaW4geCwgeCA8IDJeMzEKZnVuY3Rpb24gbGJpdCh4KSB7CiAgaWYgKHggPT0gMCkgcmV0dXJuIC0xCiAgdmFyIHIgPSAwCiAgaWYgKCh4ICYgMHhmZmZmKSA9PSAwKSB7CiAgICB4ID4+PSAxNgogICAgciArPSAxNgogIH0KICBpZiAoKHggJiAweGZmKSA9PSAwKSB7CiAgICB4ID4+PSA4CiAgICByICs9IDgKICB9CiAgaWYgKCh4ICYgMHhmKSA9PSAwKSB7CiAgICB4ID4+PSA0CiAgICByICs9IDQKICB9CiAgaWYgKCh4ICYgMykgPT0gMCkgewogICAgeCA+Pj0gMgogICAgciArPSAyCiAgfQogIGlmICgoeCAmIDEpID09IDApKytyCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgcmV0dXJucyBpbmRleCBvZiBsb3dlc3QgMS1iaXQgKG9yIC0xIGlmIG5vbmUpCmZ1bmN0aW9uIGJuR2V0TG93ZXN0U2V0Qml0KCkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50OyArK2kpCiAgICBpZiAodGhpc1tpXSAhPSAwKSByZXR1cm4gaSAqIHRoaXMuREIgKyBsYml0KHRoaXNbaV0pCiAgaWYgKHRoaXMucyA8IDApIHJldHVybiB0aGlzLnQgKiB0aGlzLkRCCiAgcmV0dXJuIC0xCn0KCi8vIHJldHVybiBudW1iZXIgb2YgMSBiaXRzIGluIHgKZnVuY3Rpb24gY2JpdCh4KSB7CiAgdmFyIHIgPSAwCiAgd2hpbGUgKHggIT0gMCkgewogICAgeCAmPSB4IC0gMQogICAgKytyCiAgfQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHJldHVybiBudW1iZXIgb2Ygc2V0IGJpdHMKZnVuY3Rpb24gYm5CaXRDb3VudCgpIHsKICB2YXIgciA9IDAsCiAgICB4ID0gdGhpcy5zICYgdGhpcy5ETQogIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50OyArK2kpIHIgKz0gY2JpdCh0aGlzW2ldIF4geCkKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0cnVlIGlmZiBudGggYml0IGlzIHNldApmdW5jdGlvbiBiblRlc3RCaXQobikgewogIHZhciBqID0gTWF0aC5mbG9vcihuIC8gdGhpcy5EQikKICBpZiAoaiA+PSB0aGlzLnQpIHJldHVybiAodGhpcy5zICE9IDApCiAgcmV0dXJuICgodGhpc1tqXSAmICgxIDw8IChuICUgdGhpcy5EQikpKSAhPSAwKQp9CgovLyAocHJvdGVjdGVkKSB0aGlzIG9wICgxPDxuKQpmdW5jdGlvbiBibnBDaGFuZ2VCaXQobiwgb3ApIHsKICB2YXIgciA9IEJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChuKQogIHRoaXMuYml0d2lzZVRvKHIsIG9wLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgfCAoMTw8bikKZnVuY3Rpb24gYm5TZXRCaXQobikgewogIHJldHVybiB0aGlzLmNoYW5nZUJpdChuLCBvcF9vcikKfQoKLy8gKHB1YmxpYykgdGhpcyAmIH4oMTw8bikKZnVuY3Rpb24gYm5DbGVhckJpdChuKSB7CiAgcmV0dXJuIHRoaXMuY2hhbmdlQml0KG4sIG9wX2FuZG5vdCkKfQoKLy8gKHB1YmxpYykgdGhpcyBeICgxPDxuKQpmdW5jdGlvbiBibkZsaXBCaXQobikgewogIHJldHVybiB0aGlzLmNoYW5nZUJpdChuLCBvcF94b3IpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzICsgYQpmdW5jdGlvbiBibnBBZGRUbyhhLCByKSB7CiAgdmFyIHNlbGYgPSB0aGlzCgogIHZhciBpID0gMCwKICAgIGMgPSAwLAogICAgbSA9IE1hdGgubWluKGEudCwgc2VsZi50KQogIHdoaWxlIChpIDwgbSkgewogICAgYyArPSBzZWxmW2ldICsgYVtpXQogICAgcltpKytdID0gYyAmIHNlbGYuRE0KICAgIGMgPj49IHNlbGYuREIKICB9CiAgaWYgKGEudCA8IHNlbGYudCkgewogICAgYyArPSBhLnMKICAgIHdoaWxlIChpIDwgc2VsZi50KSB7CiAgICAgIGMgKz0gc2VsZltpXQogICAgICByW2krK10gPSBjICYgc2VsZi5ETQogICAgICBjID4+PSBzZWxmLkRCCiAgICB9CiAgICBjICs9IHNlbGYucwogIH0gZWxzZSB7CiAgICBjICs9IHNlbGYucwogICAgd2hpbGUgKGkgPCBhLnQpIHsKICAgICAgYyArPSBhW2ldCiAgICAgIHJbaSsrXSA9IGMgJiBzZWxmLkRNCiAgICAgIGMgPj49IHNlbGYuREIKICAgIH0KICAgIGMgKz0gYS5zCiAgfQogIHIucyA9IChjIDwgMCkgPyAtMSA6IDAKICBpZiAoYyA+IDApIHJbaSsrXSA9IGMKICBlbHNlIGlmIChjIDwgLTEpIHJbaSsrXSA9IHNlbGYuRFYgKyBjCiAgci50ID0gaQogIHIuY2xhbXAoKQp9CgovLyAocHVibGljKSB0aGlzICsgYQpmdW5jdGlvbiBibkFkZChhKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5hZGRUbyhhLCByKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgLSBhCmZ1bmN0aW9uIGJuU3VidHJhY3QoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuc3ViVG8oYSwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzICogYQpmdW5jdGlvbiBibk11bHRpcGx5KGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLm11bHRpcGx5VG8oYSwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSB0aGlzXjIKZnVuY3Rpb24gYm5TcXVhcmUoKSB7CiAgdmFyIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5zcXVhcmVUbyhyKQogIHJldHVybiByCn0KCi8vIChwdWJsaWMpIHRoaXMgLyBhCmZ1bmN0aW9uIGJuRGl2aWRlKGEpIHsKICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICB0aGlzLmRpdlJlbVRvKGEsIHIsIG51bGwpCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgdGhpcyAlIGEKZnVuY3Rpb24gYm5SZW1haW5kZXIoYSkgewogIHZhciByID0gbmV3IEJpZ0ludGVnZXIoKQogIHRoaXMuZGl2UmVtVG8oYSwgbnVsbCwgcikKICByZXR1cm4gcgp9CgovLyAocHVibGljKSBbdGhpcy9hLHRoaXMlYV0KZnVuY3Rpb24gYm5EaXZpZGVBbmRSZW1haW5kZXIoYSkgewogIHZhciBxID0gbmV3IEJpZ0ludGVnZXIoKSwKICAgIHIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5kaXZSZW1UbyhhLCBxLCByKQogIHJldHVybiBuZXcgQXJyYXkocSwgcikKfQoKLy8gKHByb3RlY3RlZCkgdGhpcyAqPSBuLCB0aGlzID49IDAsIDEgPCBuIDwgRFYKZnVuY3Rpb24gYm5wRE11bHRpcGx5KG4pIHsKICB0aGlzW3RoaXMudF0gPSB0aGlzLmFtKDAsIG4gLSAxLCB0aGlzLCAwLCAwLCB0aGlzLnQpCiAgKyt0aGlzLnQKICB0aGlzLmNsYW1wKCkKfQoKLy8gKHByb3RlY3RlZCkgdGhpcyArPSBuIDw8IHcgd29yZHMsIHRoaXMgPj0gMApmdW5jdGlvbiBibnBEQWRkT2Zmc2V0KG4sIHcpIHsKICBpZiAobiA9PSAwKSByZXR1cm4KICB3aGlsZSAodGhpcy50IDw9IHcpIHRoaXNbdGhpcy50KytdID0gMAogIHRoaXNbd10gKz0gbgogIHdoaWxlICh0aGlzW3ddID49IHRoaXMuRFYpIHsKICAgIHRoaXNbd10gLT0gdGhpcy5EVgogICAgaWYgKCsrdyA+PSB0aGlzLnQpIHRoaXNbdGhpcy50KytdID0gMAogICAgKyt0aGlzW3ddCiAgfQp9CgovLyBBICJudWxsIiByZWR1Y2VyCmZ1bmN0aW9uIE51bGxFeHAoKSB7fQoKZnVuY3Rpb24gbk5vcCh4KSB7CiAgcmV0dXJuIHgKfQoKZnVuY3Rpb24gbk11bFRvKHgsIHksIHIpIHsKICB4Lm11bHRpcGx5VG8oeSwgcikKfQoKZnVuY3Rpb24gblNxclRvKHgsIHIpIHsKICB4LnNxdWFyZVRvKHIpCn0KCk51bGxFeHAucHJvdG90eXBlLmNvbnZlcnQgPSBuTm9wCk51bGxFeHAucHJvdG90eXBlLnJldmVydCA9IG5Ob3AKTnVsbEV4cC5wcm90b3R5cGUubXVsVG8gPSBuTXVsVG8KTnVsbEV4cC5wcm90b3R5cGUuc3FyVG8gPSBuU3FyVG8KCi8vIChwdWJsaWMpIHRoaXNeZQpmdW5jdGlvbiBiblBvdyhlKSB7CiAgcmV0dXJuIHRoaXMuZXhwKGUsIG5ldyBOdWxsRXhwKCkpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSBsb3dlciBuIHdvcmRzIG9mICJ0aGlzICogYSIsIGEudCA8PSBuCi8vICJ0aGlzIiBzaG91bGQgYmUgdGhlIGxhcmdlciBvbmUgaWYgYXBwcm9wcmlhdGUuCmZ1bmN0aW9uIGJucE11bHRpcGx5TG93ZXJUbyhhLCBuLCByKSB7CiAgdmFyIGkgPSBNYXRoLm1pbih0aGlzLnQgKyBhLnQsIG4pCiAgci5zID0gMDsgLy8gYXNzdW1lcyBhLHRoaXMgPj0gMAogIHIudCA9IGkKICB3aGlsZSAoaSA+IDApIHJbLS1pXSA9IDAKICB2YXIgagogIGZvciAoaiA9IHIudCAtIHRoaXMudDsgaSA8IGo7ICsraSkgcltpICsgdGhpcy50XSA9IHRoaXMuYW0oMCwgYVtpXSwgciwgaSwgMCwgdGhpcy50KQogIGZvciAoaiA9IE1hdGgubWluKGEudCwgbik7IGkgPCBqOyArK2kpIHRoaXMuYW0oMCwgYVtpXSwgciwgaSwgMCwgbiAtIGkpCiAgci5jbGFtcCgpCn0KCi8vIChwcm90ZWN0ZWQpIHIgPSAidGhpcyAqIGEiIHdpdGhvdXQgbG93ZXIgbiB3b3JkcywgbiA+IDAKLy8gInRoaXMiIHNob3VsZCBiZSB0aGUgbGFyZ2VyIG9uZSBpZiBhcHByb3ByaWF0ZS4KZnVuY3Rpb24gYm5wTXVsdGlwbHlVcHBlclRvKGEsIG4sIHIpIHsKICAtLW4KICB2YXIgaSA9IHIudCA9IHRoaXMudCArIGEudCAtIG4KICByLnMgPSAwOyAvLyBhc3N1bWVzIGEsdGhpcyA+PSAwCiAgd2hpbGUgKC0taSA+PSAwKSByW2ldID0gMAogIGZvciAoaSA9IE1hdGgubWF4KG4gLSB0aGlzLnQsIDApOyBpIDwgYS50OyArK2kpCiAgICByW3RoaXMudCArIGkgLSBuXSA9IHRoaXMuYW0obiAtIGksIGFbaV0sIHIsIDAsIDAsIHRoaXMudCArIGkgLSBuKQogIHIuY2xhbXAoKQogIHIuZHJTaGlmdFRvKDEsIHIpCn0KCi8vIEJhcnJldHQgbW9kdWxhciByZWR1Y3Rpb24KZnVuY3Rpb24gQmFycmV0dChtKSB7CiAgLy8gc2V0dXAgQmFycmV0dAogIHRoaXMucjIgPSBuZXcgQmlnSW50ZWdlcigpCiAgdGhpcy5xMyA9IG5ldyBCaWdJbnRlZ2VyKCkKICBCaWdJbnRlZ2VyLk9ORS5kbFNoaWZ0VG8oMiAqIG0udCwgdGhpcy5yMikKICB0aGlzLm11ID0gdGhpcy5yMi5kaXZpZGUobSkKICB0aGlzLm0gPSBtCn0KCmZ1bmN0aW9uIGJhcnJldHRDb252ZXJ0KHgpIHsKICBpZiAoeC5zIDwgMCB8fCB4LnQgPiAyICogdGhpcy5tLnQpIHJldHVybiB4Lm1vZCh0aGlzLm0pCiAgZWxzZSBpZiAoeC5jb21wYXJlVG8odGhpcy5tKSA8IDApIHJldHVybiB4CiAgZWxzZSB7CiAgICB2YXIgciA9IG5ldyBCaWdJbnRlZ2VyKCkKICAgIHguY29weVRvKHIpCiAgICB0aGlzLnJlZHVjZShyKQogICAgcmV0dXJuIHIKICB9Cn0KCmZ1bmN0aW9uIGJhcnJldHRSZXZlcnQoeCkgewogIHJldHVybiB4Cn0KCi8vIHggPSB4IG1vZCBtIChIQUMgMTQuNDIpCmZ1bmN0aW9uIGJhcnJldHRSZWR1Y2UoeCkgewogIHZhciBzZWxmID0gdGhpcwogIHguZHJTaGlmdFRvKHNlbGYubS50IC0gMSwgc2VsZi5yMikKICBpZiAoeC50ID4gc2VsZi5tLnQgKyAxKSB7CiAgICB4LnQgPSBzZWxmLm0udCArIDEKICAgIHguY2xhbXAoKQogIH0KICBzZWxmLm11Lm11bHRpcGx5VXBwZXJUbyhzZWxmLnIyLCBzZWxmLm0udCArIDEsIHNlbGYucTMpCiAgc2VsZi5tLm11bHRpcGx5TG93ZXJUbyhzZWxmLnEzLCBzZWxmLm0udCArIDEsIHNlbGYucjIpCiAgd2hpbGUgKHguY29tcGFyZVRvKHNlbGYucjIpIDwgMCkgeC5kQWRkT2Zmc2V0KDEsIHNlbGYubS50ICsgMSkKICB4LnN1YlRvKHNlbGYucjIsIHgpCiAgd2hpbGUgKHguY29tcGFyZVRvKHNlbGYubSkgPj0gMCkgeC5zdWJUbyhzZWxmLm0sIHgpCn0KCi8vIHIgPSB4XjIgbW9kIG07IHggIT0gcgpmdW5jdGlvbiBiYXJyZXR0U3FyVG8oeCwgcikgewogIHguc3F1YXJlVG8ocikKICB0aGlzLnJlZHVjZShyKQp9CgovLyByID0geCp5IG1vZCBtOyB4LHkgIT0gcgpmdW5jdGlvbiBiYXJyZXR0TXVsVG8oeCwgeSwgcikgewogIHgubXVsdGlwbHlUbyh5LCByKQogIHRoaXMucmVkdWNlKHIpCn0KCkJhcnJldHQucHJvdG90eXBlLmNvbnZlcnQgPSBiYXJyZXR0Q29udmVydApCYXJyZXR0LnByb3RvdHlwZS5yZXZlcnQgPSBiYXJyZXR0UmV2ZXJ0CkJhcnJldHQucHJvdG90eXBlLnJlZHVjZSA9IGJhcnJldHRSZWR1Y2UKQmFycmV0dC5wcm90b3R5cGUubXVsVG8gPSBiYXJyZXR0TXVsVG8KQmFycmV0dC5wcm90b3R5cGUuc3FyVG8gPSBiYXJyZXR0U3FyVG8KCi8vIChwdWJsaWMpIHRoaXNeZSAlIG0gKEhBQyAxNC44NSkKZnVuY3Rpb24gYm5Nb2RQb3coZSwgbSkgewogIHZhciBpID0gZS5iaXRMZW5ndGgoKSwKICAgIGssIHIgPSBuYnYoMSksCiAgICB6CiAgaWYgKGkgPD0gMCkgcmV0dXJuIHIKICBlbHNlIGlmIChpIDwgMTgpIGsgPSAxCiAgZWxzZSBpZiAoaSA8IDQ4KSBrID0gMwogIGVsc2UgaWYgKGkgPCAxNDQpIGsgPSA0CiAgZWxzZSBpZiAoaSA8IDc2OCkgayA9IDUKICBlbHNlIGsgPSA2CiAgaWYgKGkgPCA4KQogICAgeiA9IG5ldyBDbGFzc2ljKG0pCiAgZWxzZSBpZiAobS5pc0V2ZW4oKSkKICAgIHogPSBuZXcgQmFycmV0dChtKQogIGVsc2UKICAgIHogPSBuZXcgTW9udGdvbWVyeShtKQoKICAvLyBwcmVjb21wdXRhdGlvbgogIHZhciBnID0gbmV3IEFycmF5KCksCiAgICBuID0gMywKICAgIGsxID0gayAtIDEsCiAgICBrbSA9ICgxIDw8IGspIC0gMQogIGdbMV0gPSB6LmNvbnZlcnQodGhpcykKICBpZiAoayA+IDEpIHsKICAgIHZhciBnMiA9IG5ldyBCaWdJbnRlZ2VyKCkKICAgIHouc3FyVG8oZ1sxXSwgZzIpCiAgICB3aGlsZSAobiA8PSBrbSkgewogICAgICBnW25dID0gbmV3IEJpZ0ludGVnZXIoKQogICAgICB6Lm11bFRvKGcyLCBnW24gLSAyXSwgZ1tuXSkKICAgICAgbiArPSAyCiAgICB9CiAgfQoKICB2YXIgaiA9IGUudCAtIDEsCiAgICB3LCBpczEgPSB0cnVlLAogICAgcjIgPSBuZXcgQmlnSW50ZWdlcigpLAogICAgdAogIGkgPSBuYml0cyhlW2pdKSAtIDEKICB3aGlsZSAoaiA+PSAwKSB7CiAgICBpZiAoaSA+PSBrMSkgdyA9IChlW2pdID4+IChpIC0gazEpKSAmIGttCiAgICBlbHNlIHsKICAgICAgdyA9IChlW2pdICYgKCgxIDw8IChpICsgMSkpIC0gMSkpIDw8IChrMSAtIGkpCiAgICAgIGlmIChqID4gMCkgdyB8PSBlW2ogLSAxXSA+PiAodGhpcy5EQiArIGkgLSBrMSkKICAgIH0KCiAgICBuID0gawogICAgd2hpbGUgKCh3ICYgMSkgPT0gMCkgewogICAgICB3ID4+PSAxCiAgICAgIC0tbgogICAgfQogICAgaWYgKChpIC09IG4pIDwgMCkgewogICAgICBpICs9IHRoaXMuREIKICAgICAgLS1qCiAgICB9CiAgICBpZiAoaXMxKSB7IC8vIHJldCA9PSAxLCBkb24ndCBib3RoZXIgc3F1YXJpbmcgb3IgbXVsdGlwbHlpbmcgaXQKICAgICAgZ1t3XS5jb3B5VG8ocikKICAgICAgaXMxID0gZmFsc2UKICAgIH0gZWxzZSB7CiAgICAgIHdoaWxlIChuID4gMSkgewogICAgICAgIHouc3FyVG8ociwgcjIpCiAgICAgICAgei5zcXJUbyhyMiwgcikKICAgICAgICBuIC09IDIKICAgICAgfQogICAgICBpZiAobiA+IDApIHouc3FyVG8ociwgcjIpCiAgICAgIGVsc2UgewogICAgICAgIHQgPSByCiAgICAgICAgciA9IHIyCiAgICAgICAgcjIgPSB0CiAgICAgIH0KICAgICAgei5tdWxUbyhyMiwgZ1t3XSwgcikKICAgIH0KCiAgICB3aGlsZSAoaiA+PSAwICYmIChlW2pdICYgKDEgPDwgaSkpID09IDApIHsKICAgICAgei5zcXJUbyhyLCByMikKICAgICAgdCA9IHIKICAgICAgciA9IHIyCiAgICAgIHIyID0gdAogICAgICBpZiAoLS1pIDwgMCkgewogICAgICAgIGkgPSB0aGlzLkRCIC0gMQogICAgICAgIC0tagogICAgICB9CiAgICB9CiAgfQogIHJldHVybiB6LnJldmVydChyKQp9CgovLyAocHVibGljKSBnY2QodGhpcyxhKSAoSEFDIDE0LjU0KQpmdW5jdGlvbiBibkdDRChhKSB7CiAgdmFyIHggPSAodGhpcy5zIDwgMCkgPyB0aGlzLm5lZ2F0ZSgpIDogdGhpcy5jbG9uZSgpCiAgdmFyIHkgPSAoYS5zIDwgMCkgPyBhLm5lZ2F0ZSgpIDogYS5jbG9uZSgpCiAgaWYgKHguY29tcGFyZVRvKHkpIDwgMCkgewogICAgdmFyIHQgPSB4CiAgICB4ID0geQogICAgeSA9IHQKICB9CiAgdmFyIGkgPSB4LmdldExvd2VzdFNldEJpdCgpLAogICAgZyA9IHkuZ2V0TG93ZXN0U2V0Qml0KCkKICBpZiAoZyA8IDApIHJldHVybiB4CiAgaWYgKGkgPCBnKSBnID0gaQogIGlmIChnID4gMCkgewogICAgeC5yU2hpZnRUbyhnLCB4KQogICAgeS5yU2hpZnRUbyhnLCB5KQogIH0KICB3aGlsZSAoeC5zaWdudW0oKSA+IDApIHsKICAgIGlmICgoaSA9IHguZ2V0TG93ZXN0U2V0Qml0KCkpID4gMCkgeC5yU2hpZnRUbyhpLCB4KQogICAgaWYgKChpID0geS5nZXRMb3dlc3RTZXRCaXQoKSkgPiAwKSB5LnJTaGlmdFRvKGksIHkpCiAgICBpZiAoeC5jb21wYXJlVG8oeSkgPj0gMCkgewogICAgICB4LnN1YlRvKHksIHgpCiAgICAgIHguclNoaWZ0VG8oMSwgeCkKICAgIH0gZWxzZSB7CiAgICAgIHkuc3ViVG8oeCwgeSkKICAgICAgeS5yU2hpZnRUbygxLCB5KQogICAgfQogIH0KICBpZiAoZyA+IDApIHkubFNoaWZ0VG8oZywgeSkKICByZXR1cm4geQp9CgovLyAocHJvdGVjdGVkKSB0aGlzICUgbiwgbiA8IDJeMjYKZnVuY3Rpb24gYm5wTW9kSW50KG4pIHsKICBpZiAobiA8PSAwKSByZXR1cm4gMAogIHZhciBkID0gdGhpcy5EViAlIG4sCiAgICByID0gKHRoaXMucyA8IDApID8gbiAtIDEgOiAwCiAgaWYgKHRoaXMudCA+IDApCiAgICBpZiAoZCA9PSAwKSByID0gdGhpc1swXSAlIG4KICAgIGVsc2UKICAgICAgZm9yICh2YXIgaSA9IHRoaXMudCAtIDE7IGkgPj0gMDsgLS1pKSByID0gKGQgKiByICsgdGhpc1tpXSkgJSBuCiAgcmV0dXJuIHIKfQoKLy8gKHB1YmxpYykgMS90aGlzICUgbSAoSEFDIDE0LjYxKQpmdW5jdGlvbiBibk1vZEludmVyc2UobSkgewogIHZhciBhYyA9IG0uaXNFdmVuKCkKICBpZiAodGhpcy5zaWdudW0oKSA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdkaXZpc2lvbiBieSB6ZXJvJykKICBpZiAoKHRoaXMuaXNFdmVuKCkgJiYgYWMpIHx8IG0uc2lnbnVtKCkgPT0gMCkgcmV0dXJuIEJpZ0ludGVnZXIuWkVSTwogIHZhciB1ID0gbS5jbG9uZSgpLAogICAgdiA9IHRoaXMuY2xvbmUoKQogIHZhciBhID0gbmJ2KDEpLAogICAgYiA9IG5idigwKSwKICAgIGMgPSBuYnYoMCksCiAgICBkID0gbmJ2KDEpCiAgd2hpbGUgKHUuc2lnbnVtKCkgIT0gMCkgewogICAgd2hpbGUgKHUuaXNFdmVuKCkpIHsKICAgICAgdS5yU2hpZnRUbygxLCB1KQogICAgICBpZiAoYWMpIHsKICAgICAgICBpZiAoIWEuaXNFdmVuKCkgfHwgIWIuaXNFdmVuKCkpIHsKICAgICAgICAgIGEuYWRkVG8odGhpcywgYSkKICAgICAgICAgIGIuc3ViVG8obSwgYikKICAgICAgICB9CiAgICAgICAgYS5yU2hpZnRUbygxLCBhKQogICAgICB9IGVsc2UgaWYgKCFiLmlzRXZlbigpKSBiLnN1YlRvKG0sIGIpCiAgICAgIGIuclNoaWZ0VG8oMSwgYikKICAgIH0KICAgIHdoaWxlICh2LmlzRXZlbigpKSB7CiAgICAgIHYuclNoaWZ0VG8oMSwgdikKICAgICAgaWYgKGFjKSB7CiAgICAgICAgaWYgKCFjLmlzRXZlbigpIHx8ICFkLmlzRXZlbigpKSB7CiAgICAgICAgICBjLmFkZFRvKHRoaXMsIGMpCiAgICAgICAgICBkLnN1YlRvKG0sIGQpCiAgICAgICAgfQogICAgICAgIGMuclNoaWZ0VG8oMSwgYykKICAgICAgfSBlbHNlIGlmICghZC5pc0V2ZW4oKSkgZC5zdWJUbyhtLCBkKQogICAgICBkLnJTaGlmdFRvKDEsIGQpCiAgICB9CiAgICBpZiAodS5jb21wYXJlVG8odikgPj0gMCkgewogICAgICB1LnN1YlRvKHYsIHUpCiAgICAgIGlmIChhYykgYS5zdWJUbyhjLCBhKQogICAgICBiLnN1YlRvKGQsIGIpCiAgICB9IGVsc2UgewogICAgICB2LnN1YlRvKHUsIHYpCiAgICAgIGlmIChhYykgYy5zdWJUbyhhLCBjKQogICAgICBkLnN1YlRvKGIsIGQpCiAgICB9CiAgfQogIGlmICh2LmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSkgIT0gMCkgcmV0dXJuIEJpZ0ludGVnZXIuWkVSTwogIGlmIChkLmNvbXBhcmVUbyhtKSA+PSAwKSByZXR1cm4gZC5zdWJ0cmFjdChtKQogIGlmIChkLnNpZ251bSgpIDwgMCkgZC5hZGRUbyhtLCBkKQogIGVsc2UgcmV0dXJuIGQKICBpZiAoZC5zaWdudW0oKSA8IDApIHJldHVybiBkLmFkZChtKQogIGVsc2UgcmV0dXJuIGQKfQoKdmFyIGxvd3ByaW1lcyA9IFsKICAyLCAzLCA1LCA3LCAxMSwgMTMsIDE3LCAxOSwgMjMsIDI5LCAzMSwgMzcsIDQxLCA0MywgNDcsIDUzLCA1OSwgNjEsIDY3LCA3MSwKICA3MywgNzksIDgzLCA4OSwgOTcsIDEwMSwgMTAzLCAxMDcsIDEwOSwgMTEzLCAxMjcsIDEzMSwgMTM3LCAxMzksIDE0OSwgMTUxLAogIDE1NywgMTYzLCAxNjcsIDE3MywgMTc5LCAxODEsIDE5MSwgMTkzLCAxOTcsIDE5OSwgMjExLCAyMjMsIDIyNywgMjI5LCAyMzMsCiAgMjM5LCAyNDEsIDI1MSwgMjU3LCAyNjMsIDI2OSwgMjcxLCAyNzcsIDI4MSwgMjgzLCAyOTMsIDMwNywgMzExLCAzMTMsIDMxNywKICAzMzEsIDMzNywgMzQ3LCAzNDksIDM1MywgMzU5LCAzNjcsIDM3MywgMzc5LCAzODMsIDM4OSwgMzk3LCA0MDEsIDQwOSwgNDE5LAogIDQyMSwgNDMxLCA0MzMsIDQzOSwgNDQzLCA0NDksIDQ1NywgNDYxLCA0NjMsIDQ2NywgNDc5LCA0ODcsIDQ5MSwgNDk5LCA1MDMsCiAgNTA5LCA1MjEsIDUyMywgNTQxLCA1NDcsIDU1NywgNTYzLCA1NjksIDU3MSwgNTc3LCA1ODcsIDU5MywgNTk5LCA2MDEsIDYwNywKICA2MTMsIDYxNywgNjE5LCA2MzEsIDY0MSwgNjQzLCA2NDcsIDY1MywgNjU5LCA2NjEsIDY3MywgNjc3LCA2ODMsIDY5MSwgNzAxLAogIDcwOSwgNzE5LCA3MjcsIDczMywgNzM5LCA3NDMsIDc1MSwgNzU3LCA3NjEsIDc2OSwgNzczLCA3ODcsIDc5NywgODA5LCA4MTEsCiAgODIxLCA4MjMsIDgyNywgODI5LCA4MzksIDg1MywgODU3LCA4NTksIDg2MywgODc3LCA4ODEsIDg4MywgODg3LCA5MDcsIDkxMSwKICA5MTksIDkyOSwgOTM3LCA5NDEsIDk0NywgOTUzLCA5NjcsIDk3MSwgOTc3LCA5ODMsIDk5MSwgOTk3Cl0KCnZhciBscGxpbSA9ICgxIDw8IDI2KSAvIGxvd3ByaW1lc1tsb3dwcmltZXMubGVuZ3RoIC0gMV0KCi8vIChwdWJsaWMpIHRlc3QgcHJpbWFsaXR5IHdpdGggY2VydGFpbnR5ID49IDEtLjVedApmdW5jdGlvbiBibklzUHJvYmFibGVQcmltZSh0KSB7CiAgdmFyIGksIHggPSB0aGlzLmFicygpCiAgaWYgKHgudCA9PSAxICYmIHhbMF0gPD0gbG93cHJpbWVzW2xvd3ByaW1lcy5sZW5ndGggLSAxXSkgewogICAgZm9yIChpID0gMDsgaSA8IGxvd3ByaW1lcy5sZW5ndGg7ICsraSkKICAgICAgaWYgKHhbMF0gPT0gbG93cHJpbWVzW2ldKSByZXR1cm4gdHJ1ZQogICAgcmV0dXJuIGZhbHNlCiAgfQogIGlmICh4LmlzRXZlbigpKSByZXR1cm4gZmFsc2UKICBpID0gMQogIHdoaWxlIChpIDwgbG93cHJpbWVzLmxlbmd0aCkgewogICAgdmFyIG0gPSBsb3dwcmltZXNbaV0sCiAgICAgIGogPSBpICsgMQogICAgd2hpbGUgKGogPCBsb3dwcmltZXMubGVuZ3RoICYmIG0gPCBscGxpbSkgbSAqPSBsb3dwcmltZXNbaisrXQogICAgbSA9IHgubW9kSW50KG0pCiAgICB3aGlsZSAoaSA8IGopIGlmIChtICUgbG93cHJpbWVzW2krK10gPT0gMCkgcmV0dXJuIGZhbHNlCiAgfQogIHJldHVybiB4Lm1pbGxlclJhYmluKHQpCn0KCi8vIChwcm90ZWN0ZWQpIHRydWUgaWYgcHJvYmFibHkgcHJpbWUgKEhBQyA0LjI0LCBNaWxsZXItUmFiaW4pCmZ1bmN0aW9uIGJucE1pbGxlclJhYmluKHQpIHsKICB2YXIgbjEgPSB0aGlzLnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKQogIHZhciBrID0gbjEuZ2V0TG93ZXN0U2V0Qml0KCkKICBpZiAoayA8PSAwKSByZXR1cm4gZmFsc2UKICB2YXIgciA9IG4xLnNoaWZ0UmlnaHQoaykKICB0ID0gKHQgKyAxKSA+PiAxCiAgaWYgKHQgPiBsb3dwcmltZXMubGVuZ3RoKSB0ID0gbG93cHJpbWVzLmxlbmd0aAogIHZhciBhID0gbmV3IEJpZ0ludGVnZXIobnVsbCkKICB2YXIgaiwgYmFzZXMgPSBbXQogIGZvciAodmFyIGkgPSAwOyBpIDwgdDsgKytpKSB7CiAgICBmb3IgKDs7KSB7CiAgICAgIGogPSBsb3dwcmltZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbG93cHJpbWVzLmxlbmd0aCldCiAgICAgIGlmIChiYXNlcy5pbmRleE9mKGopID09IC0xKSBicmVhawogICAgfQogICAgYmFzZXMucHVzaChqKQogICAgYS5mcm9tSW50KGopCiAgICB2YXIgeSA9IGEubW9kUG93KHIsIHRoaXMpCiAgICBpZiAoeS5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpICE9IDAgJiYgeS5jb21wYXJlVG8objEpICE9IDApIHsKICAgICAgdmFyIGogPSAxCiAgICAgIHdoaWxlIChqKysgPCBrICYmIHkuY29tcGFyZVRvKG4xKSAhPSAwKSB7CiAgICAgICAgeSA9IHkubW9kUG93SW50KDIsIHRoaXMpCiAgICAgICAgaWYgKHkuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKSA9PSAwKSByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICBpZiAoeS5jb21wYXJlVG8objEpICE9IDApIHJldHVybiBmYWxzZQogICAgfQogIH0KICByZXR1cm4gdHJ1ZQp9CgovLyBwcm90ZWN0ZWQKcHJvdG8uY2h1bmtTaXplID0gYm5wQ2h1bmtTaXplCnByb3RvLnRvUmFkaXggPSBibnBUb1JhZGl4CnByb3RvLmZyb21SYWRpeCA9IGJucEZyb21SYWRpeApwcm90by5mcm9tTnVtYmVyID0gYm5wRnJvbU51bWJlcgpwcm90by5iaXR3aXNlVG8gPSBibnBCaXR3aXNlVG8KcHJvdG8uY2hhbmdlQml0ID0gYm5wQ2hhbmdlQml0CnByb3RvLmFkZFRvID0gYm5wQWRkVG8KcHJvdG8uZE11bHRpcGx5ID0gYm5wRE11bHRpcGx5CnByb3RvLmRBZGRPZmZzZXQgPSBibnBEQWRkT2Zmc2V0CnByb3RvLm11bHRpcGx5TG93ZXJUbyA9IGJucE11bHRpcGx5TG93ZXJUbwpwcm90by5tdWx0aXBseVVwcGVyVG8gPSBibnBNdWx0aXBseVVwcGVyVG8KcHJvdG8ubW9kSW50ID0gYm5wTW9kSW50CnByb3RvLm1pbGxlclJhYmluID0gYm5wTWlsbGVyUmFiaW4KCi8vIHB1YmxpYwpwcm90by5jbG9uZSA9IGJuQ2xvbmUKcHJvdG8uaW50VmFsdWUgPSBibkludFZhbHVlCnByb3RvLmJ5dGVWYWx1ZSA9IGJuQnl0ZVZhbHVlCnByb3RvLnNob3J0VmFsdWUgPSBiblNob3J0VmFsdWUKcHJvdG8uc2lnbnVtID0gYm5TaWdOdW0KcHJvdG8udG9CeXRlQXJyYXkgPSBiblRvQnl0ZUFycmF5CnByb3RvLmVxdWFscyA9IGJuRXF1YWxzCnByb3RvLm1pbiA9IGJuTWluCnByb3RvLm1heCA9IGJuTWF4CnByb3RvLmFuZCA9IGJuQW5kCnByb3RvLm9yID0gYm5Pcgpwcm90by54b3IgPSBiblhvcgpwcm90by5hbmROb3QgPSBibkFuZE5vdApwcm90by5ub3QgPSBibk5vdApwcm90by5zaGlmdExlZnQgPSBiblNoaWZ0TGVmdApwcm90by5zaGlmdFJpZ2h0ID0gYm5TaGlmdFJpZ2h0CnByb3RvLmdldExvd2VzdFNldEJpdCA9IGJuR2V0TG93ZXN0U2V0Qml0CnByb3RvLmJpdENvdW50ID0gYm5CaXRDb3VudApwcm90by50ZXN0Qml0ID0gYm5UZXN0Qml0CnByb3RvLnNldEJpdCA9IGJuU2V0Qml0CnByb3RvLmNsZWFyQml0ID0gYm5DbGVhckJpdApwcm90by5mbGlwQml0ID0gYm5GbGlwQml0CnByb3RvLmFkZCA9IGJuQWRkCnByb3RvLnN1YnRyYWN0ID0gYm5TdWJ0cmFjdApwcm90by5tdWx0aXBseSA9IGJuTXVsdGlwbHkKcHJvdG8uZGl2aWRlID0gYm5EaXZpZGUKcHJvdG8ucmVtYWluZGVyID0gYm5SZW1haW5kZXIKcHJvdG8uZGl2aWRlQW5kUmVtYWluZGVyID0gYm5EaXZpZGVBbmRSZW1haW5kZXIKcHJvdG8ubW9kUG93ID0gYm5Nb2RQb3cKcHJvdG8ubW9kSW52ZXJzZSA9IGJuTW9kSW52ZXJzZQpwcm90by5wb3cgPSBiblBvdwpwcm90by5nY2QgPSBibkdDRApwcm90by5pc1Byb2JhYmxlUHJpbWUgPSBibklzUHJvYmFibGVQcmltZQoKLy8gSlNCTi1zcGVjaWZpYyBleHRlbnNpb24KcHJvdG8uc3F1YXJlID0gYm5TcXVhcmUKCi8vIGNvbnN0YW50cwpCaWdJbnRlZ2VyLlpFUk8gPSBuYnYoMCkKQmlnSW50ZWdlci5PTkUgPSBuYnYoMSkKQmlnSW50ZWdlci52YWx1ZU9mID0gbmJ2Cgptb2R1bGUuZXhwb3J0cyA9IEJpZ0ludGVnZXIKCn0seyIuLi9wYWNrYWdlLmpzb24iOjIwfV0sMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8vIEZJWE1FOiBLaW5kIG9mIGEgd2VpcmQgd2F5IHRvIHRocm93IGV4Y2VwdGlvbnMsIGNvbnNpZGVyIHJlbW92aW5nCnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKQp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJy4vYmlnaScpCgovKioKICogVHVybnMgYSBieXRlIGFycmF5IGludG8gYSBiaWcgaW50ZWdlci4KICoKICogVGhpcyBmdW5jdGlvbiB3aWxsIGludGVycHJldCBhIGJ5dGUgYXJyYXkgYXMgYSBiaWcgaW50ZWdlciBpbiBiaWcKICogZW5kaWFuIG5vdGF0aW9uLgogKi8KQmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQgPSBmdW5jdGlvbihieXRlQXJyYXkpIHsKICAvLyBCaWdJbnRlZ2VyIGV4cGVjdHMgYSBERVIgaW50ZWdlciBjb25mb3JtYW50IGJ5dGUgYXJyYXkKICBpZiAoYnl0ZUFycmF5WzBdICYgMHg4MCkgewogICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKFswXS5jb25jYXQoYnl0ZUFycmF5KSkKICB9CgogIHJldHVybiBuZXcgQmlnSW50ZWdlcihieXRlQXJyYXkpCn0KCi8qKgogKiBSZXR1cm5zIGEgYnl0ZSBhcnJheSByZXByZXNlbnRhdGlvbiBvZiB0aGUgYmlnIGludGVnZXIuCiAqCiAqIFRoaXMgcmV0dXJucyB0aGUgYWJzb2x1dGUgb2YgdGhlIGNvbnRhaW5lZCB2YWx1ZSBpbiBiaWcgZW5kaWFuCiAqIGZvcm0uIEEgdmFsdWUgb2YgemVybyByZXN1bHRzIGluIGFuIGVtcHR5IGFycmF5LgogKi8KQmlnSW50ZWdlci5wcm90b3R5cGUudG9CeXRlQXJyYXlVbnNpZ25lZCA9IGZ1bmN0aW9uKCkgewogIHZhciBieXRlQXJyYXkgPSB0aGlzLnRvQnl0ZUFycmF5KCkKICByZXR1cm4gYnl0ZUFycmF5WzBdID09PSAwID8gYnl0ZUFycmF5LnNsaWNlKDEpIDogYnl0ZUFycmF5Cn0KCkJpZ0ludGVnZXIuZnJvbURFUkludGVnZXIgPSBmdW5jdGlvbihieXRlQXJyYXkpIHsKICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoYnl0ZUFycmF5KQp9CgovKgogKiBDb252ZXJ0cyBCaWdJbnRlZ2VyIHRvIGEgREVSIGludGVnZXIgcmVwcmVzZW50YXRpb24uCiAqCiAqIFRoZSBmb3JtYXQgZm9yIHRoaXMgdmFsdWUgdXNlcyB0aGUgbW9zdCBzaWduaWZpY2FudCBiaXQgYXMgYSBzaWduCiAqIGJpdC4gIElmIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBpcyBhbHJlYWR5IHNldCBhbmQgdGhlIGludGVnZXIgaXMKICogcG9zaXRpdmUsIGEgMHgwMCBpcyBwcmVwZW5kZWQuCiAqCiAqIEV4YW1wbGVzOgogKgogKiAgICAgIDAgPT4gICAgIDB4MDAKICogICAgICAxID0+ICAgICAweDAxCiAqICAgICAtMSA9PiAgICAgMHhmZgogKiAgICAxMjcgPT4gICAgIDB4N2YKICogICAtMTI3ID0+ICAgICAweDgxCiAqICAgIDEyOCA9PiAgIDB4MDA4MAogKiAgIC0xMjggPT4gICAgIDB4ODAKICogICAgMjU1ID0+ICAgMHgwMGZmCiAqICAgLTI1NSA9PiAgIDB4ZmYwMQogKiAgMTYzMDAgPT4gICAweDNmYWMKICogLTE2MzAwID0+ICAgMHhjMDU0CiAqICA2MjMwMCA9PiAweDAwZjM1YwogKiAtNjIzMDAgPT4gMHhmZjBjYTQKKi8KQmlnSW50ZWdlci5wcm90b3R5cGUudG9ERVJJbnRlZ2VyID0gQmlnSW50ZWdlci5wcm90b3R5cGUudG9CeXRlQXJyYXkKCkJpZ0ludGVnZXIuZnJvbUJ1ZmZlciA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogIC8vIEJpZ0ludGVnZXIgZXhwZWN0cyBhIERFUiBpbnRlZ2VyIGNvbmZvcm1hbnQgYnl0ZSBhcnJheQogIGlmIChidWZmZXJbMF0gJiAweDgwKSB7CiAgICB2YXIgYnl0ZUFycmF5ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYnVmZmVyKQoKICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihbMF0uY29uY2F0KGJ5dGVBcnJheSkpCiAgfQoKICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoYnVmZmVyKQp9CgpCaWdJbnRlZ2VyLmZyb21IZXggPSBmdW5jdGlvbihoZXgpIHsKICBpZiAoaGV4ID09PSAnJykgcmV0dXJuIEJpZ0ludGVnZXIuWkVSTwoKICBhc3NlcnQuZXF1YWwoaGV4LCBoZXgubWF0Y2goL15bQS1GYS1mMC05XSsvKSwgJ0ludmFsaWQgaGV4IHN0cmluZycpCiAgYXNzZXJ0LmVxdWFsKGhleC5sZW5ndGggJSAyLCAwLCAnSW5jb21wbGV0ZSBoZXgnKQogIHJldHVybiBuZXcgQmlnSW50ZWdlcihoZXgsIDE2KQp9CgpCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0J1ZmZlciA9IGZ1bmN0aW9uKHNpemUpIHsKICB2YXIgYnl0ZUFycmF5ID0gdGhpcy50b0J5dGVBcnJheVVuc2lnbmVkKCkKICB2YXIgemVyb3MgPSBbXQoKICB2YXIgcGFkZGluZyA9IHNpemUgLSBieXRlQXJyYXkubGVuZ3RoCiAgd2hpbGUgKHplcm9zLmxlbmd0aCA8IHBhZGRpbmcpIHplcm9zLnB1c2goMCkKCiAgcmV0dXJuIG5ldyBCdWZmZXIoemVyb3MuY29uY2F0KGJ5dGVBcnJheSkpCn0KCkJpZ0ludGVnZXIucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24oc2l6ZSkgewogIHJldHVybiB0aGlzLnRvQnVmZmVyKHNpemUpLnRvU3RyaW5nKCdoZXgnKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9iaWdpIjoxNywiYXNzZXJ0IjoxNSwiYnVmZmVyIjo3MH1dLDE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCcuL2JpZ2knKQoKLy9hZGRvbnMKcmVxdWlyZSgnLi9jb252ZXJ0JykKCm1vZHVsZS5leHBvcnRzID0gQmlnSW50ZWdlcgp9LHsiLi9iaWdpIjoxNywiLi9jb252ZXJ0IjoxOH1dLDIwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHM9ewogICJfYXJncyI6IFsKICAgIFsKICAgICAgImJpZ2lAXjEuNC4wIiwKICAgICAgIi9ob21lL2dpbC9EZXNrdG9wL3JldGhpbmsvZGV2LXJ1bnRpbWUtY29yZS9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYiIKICAgIF0KICBdLAogICJfZnJvbSI6ICJiaWdpQD49MS40LjAgPDIuMC4wIiwKICAiX2lkIjogImJpZ2lAMS40LjEiLAogICJfaW5DYWNoZSI6IHRydWUsCiAgIl9pbnN0YWxsYWJsZSI6IHRydWUsCiAgIl9sb2NhdGlvbiI6ICIvYmlnaSIsCiAgIl9ub2RlVmVyc2lvbiI6ICIyLjEuMCIsCiAgIl9ucG1Vc2VyIjogewogICAgImVtYWlsIjogImpwcmljaGFyZHNvbkBnbWFpbC5jb20iLAogICAgIm5hbWUiOiAianByaWNoYXJkc29uIgogIH0sCiAgIl9ucG1WZXJzaW9uIjogIjIuMTAuMSIsCiAgIl9waGFudG9tQ2hpbGRyZW4iOiB7fSwKICAiX3JlcXVlc3RlZCI6IHsKICAgICJuYW1lIjogImJpZ2kiLAogICAgInJhdyI6ICJiaWdpQF4xLjQuMCIsCiAgICAicmF3U3BlYyI6ICJeMS40LjAiLAogICAgInNjb3BlIjogbnVsbCwKICAgICJzcGVjIjogIj49MS40LjAgPDIuMC4wIiwKICAgICJ0eXBlIjogInJhbmdlIgogIH0sCiAgIl9yZXF1aXJlZEJ5IjogWwogICAgIi9iaXRjb2luanMtbGliIiwKICAgICIvZWN1cnZlIgogIF0sCiAgIl9yZXNvbHZlZCI6ICJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9iaWdpLy0vYmlnaS0xLjQuMS50Z3oiLAogICJfc2hhc3VtIjogIjcyNmU4YWIwOGQxZmUxZGZiOGFhNmJiNjMwOWJmZmVjZjkzYTIxYjciLAogICJfc2hyaW5rd3JhcCI6IG51bGwsCiAgIl9zcGVjIjogImJpZ2lAXjEuNC4wIiwKICAiX3doZXJlIjogIi9ob21lL2dpbC9EZXNrdG9wL3JldGhpbmsvZGV2LXJ1bnRpbWUtY29yZS9ub2RlX21vZHVsZXMvYml0Y29pbmpzLWxpYiIsCiAgImJ1Z3MiOiB7CiAgICAidXJsIjogImh0dHBzOi8vZ2l0aHViLmNvbS9jcnlwdG9jb2luanMvYmlnaS9pc3N1ZXMiCiAgfSwKICAiZGVwZW5kZW5jaWVzIjoge30sCiAgImRlc2NyaXB0aW9uIjogIkJpZyBpbnRlZ2Vycy4iLAogICJkZXZEZXBlbmRlbmNpZXMiOiB7CiAgICAiY292ZXJhbGxzIjogIl4yLjExLjIiLAogICAgImlzdGFuYnVsIjogIl4wLjMuNSIsCiAgICAianNoaW50IjogIl4yLjUuMSIsCiAgICAibW9jaGEiOiAiXjIuMS4wIiwKICAgICJtb2NoaWZ5IjogIl4yLjEuMCIKICB9LAogICJkaXJlY3RvcmllcyI6IHt9LAogICJkaXN0IjogewogICAgInNoYXN1bSI6ICI3MjZlOGFiMDhkMWZlMWRmYjhhYTZiYjYzMDliZmZlY2Y5M2EyMWI3IiwKICAgICJ0YXJiYWxsIjogImh0dHA6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvYmlnaS8tL2JpZ2ktMS40LjEudGd6IgogIH0sCiAgImdpdEhlYWQiOiAiN2QwMzRhMWIzOGNhOTBmNjhkYWE5ZGU0NzJkZGEyZmI4MTM4MzZmMSIsCiAgImhvbWVwYWdlIjogImh0dHBzOi8vZ2l0aHViLmNvbS9jcnlwdG9jb2luanMvYmlnaSNyZWFkbWUiLAogICJrZXl3b3JkcyI6IFsKICAgICJjcnlwdG9ncmFwaHkiLAogICAgIm1hdGgiLAogICAgImJpdGNvaW4iLAogICAgImFyYml0cmFyeSIsCiAgICAicHJlY2lzaW9uIiwKICAgICJhcml0aG1ldGljIiwKICAgICJiaWciLAogICAgImludGVnZXIiLAogICAgImludCIsCiAgICAibnVtYmVyIiwKICAgICJiaWdpbnRlZ2VyIiwKICAgICJiaWdpbnQiLAogICAgImJpZ251bWJlciIsCiAgICAiZGVjaW1hbCIsCiAgICAiZmxvYXQiCiAgXSwKICAibWFpbiI6ICIuL2xpYi9pbmRleC5qcyIsCiAgIm1haW50YWluZXJzIjogWwogICAgewogICAgICAiZW1haWwiOiAiYm95ZGJAbWlkbmlnaHRkZXNpZ24ud3MiLAogICAgICAibmFtZSI6ICJtaWRuaWdodGxpZ2h0bmluZyIKICAgIH0sCiAgICB7CiAgICAgICJlbWFpbCI6ICJzaWRhemhhbmc4OUBnbWFpbC5jb20iLAogICAgICAibmFtZSI6ICJzaWRhemhhbmciCiAgICB9LAogICAgewogICAgICAiZW1haWwiOiAibnBtQHNoZXNlay5pbmZvIiwKICAgICAgIm5hbWUiOiAibmFkYXYiCiAgICB9LAogICAgewogICAgICAiZW1haWwiOiAianByaWNoYXJkc29uQGdtYWlsLmNvbSIsCiAgICAgICJuYW1lIjogImpwcmljaGFyZHNvbiIKICAgIH0KICBdLAogICJuYW1lIjogImJpZ2kiLAogICJvcHRpb25hbERlcGVuZGVuY2llcyI6IHt9LAogICJyZWFkbWUiOiAiRVJST1I6IE5vIFJFQURNRSBkYXRhIGZvdW5kISIsCiAgInJlcG9zaXRvcnkiOiB7CiAgICAidHlwZSI6ICJnaXQiLAogICAgInVybCI6ICJnaXQraHR0cHM6Ly9naXRodWIuY29tL2NyeXB0b2NvaW5qcy9iaWdpLmdpdCIKICB9LAogICJzY3JpcHRzIjogewogICAgImJyb3dzZXItdGVzdCI6ICJtb2NoaWZ5IC0td2QgLVIgc3BlYyIsCiAgICAiY292ZXJhZ2UiOiAiaXN0YW5idWwgY292ZXIgLi9ub2RlX21vZHVsZXMvLmJpbi9fbW9jaGEgLS0gLS1yZXBvcnRlciBsaXN0IHRlc3QvKi5qcyIsCiAgICAiY292ZXJhbGxzIjogIm5wbSBydW4tc2NyaXB0IGNvdmVyYWdlICYmIG5vZGUgLi9ub2RlX21vZHVsZXMvLmJpbi9jb3ZlcmFsbHMgPCBjb3ZlcmFnZS9sY292LmluZm8iLAogICAgImpzaGludCI6ICJqc2hpbnQgLS1jb25maWcganNoaW50Lmpzb24gbGliLyouanMgOyB0cnVlIiwKICAgICJ0ZXN0IjogIl9tb2NoYSAtLSB0ZXN0LyouanMiLAogICAgInVuaXQiOiAibW9jaGEiCiAgfSwKICAidGVzdGxpbmciOiB7CiAgICAiYnJvd3NlcnMiOiBbCiAgICAgICJpZS85Li5sYXRlc3QiLAogICAgICAiZmlyZWZveC9sYXRlc3QiLAogICAgICAiY2hyb21lL2xhdGVzdCIsCiAgICAgICJzYWZhcmkvNi4wLi5sYXRlc3QiLAogICAgICAiaXBob25lLzYuMC4ubGF0ZXN0IiwKICAgICAgImFuZHJvaWQtYnJvd3Nlci80LjIuLmxhdGVzdCIKICAgIF0sCiAgICAiZmlsZXMiOiAidGVzdC8qLmpzIiwKICAgICJoYXJuZXNzIjogIm1vY2hhIgogIH0sCiAgInZlcnNpb24iOiAiMS40LjEiCn0KCn0se31dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JykKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCnZhciBwYmtkZjIgPSByZXF1aXJlKCdwYmtkZjInKS5wYmtkZjJTeW5jCnZhciByYW5kb21CeXRlcyA9IHJlcXVpcmUoJ3JhbmRvbWJ5dGVzJykKdmFyIHVub3JtID0gcmVxdWlyZSgndW5vcm0nKQoKdmFyIERFRkFVTFRfV09SRExJU1QgPSByZXF1aXJlKCcuL3dvcmRsaXN0cy9lbi5qc29uJykKCmZ1bmN0aW9uIG1uZW1vbmljVG9TZWVkKG1uZW1vbmljLCBwYXNzd29yZCkgewogIHZhciBtbmVtb25pY0J1ZmZlciA9IG5ldyBCdWZmZXIobW5lbW9uaWMsICd1dGY4JykKICB2YXIgc2FsdEJ1ZmZlciA9IG5ldyBCdWZmZXIoc2FsdChwYXNzd29yZCksICd1dGY4JykKCiAgcmV0dXJuIHBia2RmMihtbmVtb25pY0J1ZmZlciwgc2FsdEJ1ZmZlciwgMjA0OCwgNjQsICdzaGE1MTInKQp9CgpmdW5jdGlvbiBtbmVtb25pY1RvU2VlZEhleChtbmVtb25pYywgcGFzc3dvcmQpIHsKICByZXR1cm4gbW5lbW9uaWNUb1NlZWQobW5lbW9uaWMsIHBhc3N3b3JkKS50b1N0cmluZygnaGV4JykKfQoKZnVuY3Rpb24gbW5lbW9uaWNUb0VudHJvcHkobW5lbW9uaWMsIHdvcmRsaXN0KSB7CiAgd29yZGxpc3QgPSB3b3JkbGlzdCB8fCBERUZBVUxUX1dPUkRMSVNUCgogIHZhciB3b3JkcyA9IG1uZW1vbmljLnNwbGl0KCcgJykKICBhc3NlcnQod29yZHMubGVuZ3RoICUgMyA9PT0gMCwgJ0ludmFsaWQgbW5lbW9uaWMnKQoKICB2YXIgYmVsb25nVG9MaXN0ID0gd29yZHMuZXZlcnkoZnVuY3Rpb24od29yZCkgewogICAgcmV0dXJuIHdvcmRsaXN0LmluZGV4T2Yod29yZCkgPiAtMQogIH0pCgogIGFzc2VydChiZWxvbmdUb0xpc3QsICdJbnZhbGlkIG1uZW1vbmljJykKCiAgLy8gY29udmVydCB3b3JkIGluZGljZXMgdG8gMTEgYml0IGJpbmFyeSBzdHJpbmdzCiAgdmFyIGJpdHMgPSB3b3Jkcy5tYXAoZnVuY3Rpb24od29yZCkgewogICAgdmFyIGluZGV4ID0gd29yZGxpc3QuaW5kZXhPZih3b3JkKQogICAgcmV0dXJuIGxwYWQoaW5kZXgudG9TdHJpbmcoMiksICcwJywgMTEpCiAgfSkuam9pbignJykKCiAgLy8gc3BsaXQgdGhlIGJpbmFyeSBzdHJpbmcgaW50byBFTlQvQ1MKICB2YXIgZGl2aWRlckluZGV4ID0gTWF0aC5mbG9vcihiaXRzLmxlbmd0aCAvIDMzKSAqIDMyCiAgdmFyIGVudHJvcHkgPSBiaXRzLnNsaWNlKDAsIGRpdmlkZXJJbmRleCkKICB2YXIgY2hlY2tzdW0gPSBiaXRzLnNsaWNlKGRpdmlkZXJJbmRleCkKCiAgLy8gY2FsY3VsYXRlIHRoZSBjaGVja3N1bSBhbmQgY29tcGFyZQogIHZhciBlbnRyb3B5Qnl0ZXMgPSBlbnRyb3B5Lm1hdGNoKC8oLnsxLDh9KS9nKS5tYXAoZnVuY3Rpb24oYmluKSB7CiAgICByZXR1cm4gcGFyc2VJbnQoYmluLCAyKQogIH0pCiAgdmFyIGVudHJvcHlCdWZmZXIgPSBuZXcgQnVmZmVyKGVudHJvcHlCeXRlcykKICB2YXIgbmV3Q2hlY2tzdW0gPSBjaGVja3N1bUJpdHMoZW50cm9weUJ1ZmZlcikKCiAgYXNzZXJ0KG5ld0NoZWNrc3VtID09PSBjaGVja3N1bSwgJ0ludmFsaWQgbW5lbW9uaWMgY2hlY2tzdW0nKQoKICByZXR1cm4gZW50cm9weUJ1ZmZlci50b1N0cmluZygnaGV4JykKfQoKZnVuY3Rpb24gZW50cm9weVRvTW5lbW9uaWMoZW50cm9weSwgd29yZGxpc3QpIHsKICB3b3JkbGlzdCA9IHdvcmRsaXN0IHx8IERFRkFVTFRfV09SRExJU1QKCiAgdmFyIGVudHJvcHlCdWZmZXIgPSBuZXcgQnVmZmVyKGVudHJvcHksICdoZXgnKQogIHZhciBlbnRyb3B5Qml0cyA9IGJ5dGVzVG9CaW5hcnkoW10uc2xpY2UuY2FsbChlbnRyb3B5QnVmZmVyKSkKICB2YXIgY2hlY2tzdW0gPSBjaGVja3N1bUJpdHMoZW50cm9weUJ1ZmZlcikKCiAgdmFyIGJpdHMgPSBlbnRyb3B5Qml0cyArIGNoZWNrc3VtCiAgdmFyIGNodW5rcyA9IGJpdHMubWF0Y2goLyguezEsMTF9KS9nKQoKICB2YXIgd29yZHMgPSBjaHVua3MubWFwKGZ1bmN0aW9uKGJpbmFyeSkgewogICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoYmluYXJ5LCAyKQoKICAgIHJldHVybiB3b3JkbGlzdFtpbmRleF0KICB9KQoKICByZXR1cm4gd29yZHMuam9pbignICcpCn0KCmZ1bmN0aW9uIGdlbmVyYXRlTW5lbW9uaWMoc3RyZW5ndGgsIHJuZywgd29yZGxpc3QpIHsKICBzdHJlbmd0aCA9IHN0cmVuZ3RoIHx8IDEyOAogIHJuZyA9IHJuZyB8fCByYW5kb21CeXRlcwoKICB2YXIgaGV4ID0gcm5nKHN0cmVuZ3RoIC8gOCkudG9TdHJpbmcoJ2hleCcpCiAgcmV0dXJuIGVudHJvcHlUb01uZW1vbmljKGhleCwgd29yZGxpc3QpCn0KCmZ1bmN0aW9uIHZhbGlkYXRlTW5lbW9uaWMobW5lbW9uaWMsIHdvcmRsaXN0KSB7CiAgdHJ5IHsKICAgIG1uZW1vbmljVG9FbnRyb3B5KG1uZW1vbmljLCB3b3JkbGlzdCkKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gZmFsc2UKICB9CgogIHJldHVybiB0cnVlCn0KCmZ1bmN0aW9uIGNoZWNrc3VtQml0cyhlbnRyb3B5QnVmZmVyKSB7CiAgdmFyIGhhc2ggPSBjcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoZW50cm9weUJ1ZmZlcikuZGlnZXN0KCkKCiAgLy8gQ2FsY3VsYXRlZCBjb25zdGFudHMgZnJvbSBCSVAzOQogIHZhciBFTlQgPSBlbnRyb3B5QnVmZmVyLmxlbmd0aCAqIDgKICB2YXIgQ1MgPSBFTlQgLyAzMgoKICByZXR1cm4gYnl0ZXNUb0JpbmFyeShbXS5zbGljZS5jYWxsKGhhc2gpKS5zbGljZSgwLCBDUykKfQoKZnVuY3Rpb24gc2FsdChwYXNzd29yZCkgewogIHJldHVybiAnbW5lbW9uaWMnICsgKHVub3JtLm5ma2QocGFzc3dvcmQpIHx8ICcnKSAvLyBVc2UgdW5vcm0gdW50aWwgU3RyaW5nLnByb3RvdHlwZS5ub3JtYWxpemUgZ2V0cyBiZXR0ZXIgYnJvd3NlciBzdXBwb3J0Cn0KCi8vPT09PT09PT09PT0gaGVscGVyIG1ldGhvZHMgZnJvbSBiaXRjb2luanMtbGliID09PT09PT09CgpmdW5jdGlvbiBieXRlc1RvQmluYXJ5KGJ5dGVzKSB7CiAgcmV0dXJuIGJ5dGVzLm1hcChmdW5jdGlvbih4KSB7CiAgICByZXR1cm4gbHBhZCh4LnRvU3RyaW5nKDIpLCAnMCcsIDgpCiAgfSkuam9pbignJyk7Cn0KCmZ1bmN0aW9uIGxwYWQoc3RyLCBwYWRTdHJpbmcsIGxlbmd0aCkgewogIHdoaWxlIChzdHIubGVuZ3RoIDwgbGVuZ3RoKSBzdHIgPSBwYWRTdHJpbmcgKyBzdHI7CiAgcmV0dXJuIHN0cjsKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgbW5lbW9uaWNUb1NlZWQ6IG1uZW1vbmljVG9TZWVkLAogIG1uZW1vbmljVG9TZWVkSGV4OiBtbmVtb25pY1RvU2VlZEhleCwKICBtbmVtb25pY1RvRW50cm9weTogbW5lbW9uaWNUb0VudHJvcHksCiAgZW50cm9weVRvTW5lbW9uaWM6IGVudHJvcHlUb01uZW1vbmljLAogIGdlbmVyYXRlTW5lbW9uaWM6IGdlbmVyYXRlTW5lbW9uaWMsCiAgdmFsaWRhdGVNbmVtb25pYzogdmFsaWRhdGVNbmVtb25pYywKICB3b3JkbGlzdHM6IHsKICAgIEVOOiBERUZBVUxUX1dPUkRMSVNUCiAgfQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi93b3JkbGlzdHMvZW4uanNvbiI6MjIsImFzc2VydCI6MTUsImJ1ZmZlciI6NzAsImNyZWF0ZS1oYXNoIjo4MiwicGJrZGYyIjoxMzksInJhbmRvbWJ5dGVzIjoxNDgsInVub3JtIjoxNzR9XSwyMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPVsKICAiYWJhbmRvbiIsCiAgImFiaWxpdHkiLAogICJhYmxlIiwKICAiYWJvdXQiLAogICJhYm92ZSIsCiAgImFic2VudCIsCiAgImFic29yYiIsCiAgImFic3RyYWN0IiwKICAiYWJzdXJkIiwKICAiYWJ1c2UiLAogICJhY2Nlc3MiLAogICJhY2NpZGVudCIsCiAgImFjY291bnQiLAogICJhY2N1c2UiLAogICJhY2hpZXZlIiwKICAiYWNpZCIsCiAgImFjb3VzdGljIiwKICAiYWNxdWlyZSIsCiAgImFjcm9zcyIsCiAgImFjdCIsCiAgImFjdGlvbiIsCiAgImFjdG9yIiwKICAiYWN0cmVzcyIsCiAgImFjdHVhbCIsCiAgImFkYXB0IiwKICAiYWRkIiwKICAiYWRkaWN0IiwKICAiYWRkcmVzcyIsCiAgImFkanVzdCIsCiAgImFkbWl0IiwKICAiYWR1bHQiLAogICJhZHZhbmNlIiwKICAiYWR2aWNlIiwKICAiYWVyb2JpYyIsCiAgImFmZmFpciIsCiAgImFmZm9yZCIsCiAgImFmcmFpZCIsCiAgImFnYWluIiwKICAiYWdlIiwKICAiYWdlbnQiLAogICJhZ3JlZSIsCiAgImFoZWFkIiwKICAiYWltIiwKICAiYWlyIiwKICAiYWlycG9ydCIsCiAgImFpc2xlIiwKICAiYWxhcm0iLAogICJhbGJ1bSIsCiAgImFsY29ob2wiLAogICJhbGVydCIsCiAgImFsaWVuIiwKICAiYWxsIiwKICAiYWxsZXkiLAogICJhbGxvdyIsCiAgImFsbW9zdCIsCiAgImFsb25lIiwKICAiYWxwaGEiLAogICJhbHJlYWR5IiwKICAiYWxzbyIsCiAgImFsdGVyIiwKICAiYWx3YXlzIiwKICAiYW1hdGV1ciIsCiAgImFtYXppbmciLAogICJhbW9uZyIsCiAgImFtb3VudCIsCiAgImFtdXNlZCIsCiAgImFuYWx5c3QiLAogICJhbmNob3IiLAogICJhbmNpZW50IiwKICAiYW5nZXIiLAogICJhbmdsZSIsCiAgImFuZ3J5IiwKICAiYW5pbWFsIiwKICAiYW5rbGUiLAogICJhbm5vdW5jZSIsCiAgImFubnVhbCIsCiAgImFub3RoZXIiLAogICJhbnN3ZXIiLAogICJhbnRlbm5hIiwKICAiYW50aXF1ZSIsCiAgImFueGlldHkiLAogICJhbnkiLAogICJhcGFydCIsCiAgImFwb2xvZ3kiLAogICJhcHBlYXIiLAogICJhcHBsZSIsCiAgImFwcHJvdmUiLAogICJhcHJpbCIsCiAgImFyY2giLAogICJhcmN0aWMiLAogICJhcmVhIiwKICAiYXJlbmEiLAogICJhcmd1ZSIsCiAgImFybSIsCiAgImFybWVkIiwKICAiYXJtb3IiLAogICJhcm15IiwKICAiYXJvdW5kIiwKICAiYXJyYW5nZSIsCiAgImFycmVzdCIsCiAgImFycml2ZSIsCiAgImFycm93IiwKICAiYXJ0IiwKICAiYXJ0ZWZhY3QiLAogICJhcnRpc3QiLAogICJhcnR3b3JrIiwKICAiYXNrIiwKICAiYXNwZWN0IiwKICAiYXNzYXVsdCIsCiAgImFzc2V0IiwKICAiYXNzaXN0IiwKICAiYXNzdW1lIiwKICAiYXN0aG1hIiwKICAiYXRobGV0ZSIsCiAgImF0b20iLAogICJhdHRhY2siLAogICJhdHRlbmQiLAogICJhdHRpdHVkZSIsCiAgImF0dHJhY3QiLAogICJhdWN0aW9uIiwKICAiYXVkaXQiLAogICJhdWd1c3QiLAogICJhdW50IiwKICAiYXV0aG9yIiwKICAiYXV0byIsCiAgImF1dHVtbiIsCiAgImF2ZXJhZ2UiLAogICJhdm9jYWRvIiwKICAiYXZvaWQiLAogICJhd2FrZSIsCiAgImF3YXJlIiwKICAiYXdheSIsCiAgImF3ZXNvbWUiLAogICJhd2Z1bCIsCiAgImF3a3dhcmQiLAogICJheGlzIiwKICAiYmFieSIsCiAgImJhY2hlbG9yIiwKICAiYmFjb24iLAogICJiYWRnZSIsCiAgImJhZyIsCiAgImJhbGFuY2UiLAogICJiYWxjb255IiwKICAiYmFsbCIsCiAgImJhbWJvbyIsCiAgImJhbmFuYSIsCiAgImJhbm5lciIsCiAgImJhciIsCiAgImJhcmVseSIsCiAgImJhcmdhaW4iLAogICJiYXJyZWwiLAogICJiYXNlIiwKICAiYmFzaWMiLAogICJiYXNrZXQiLAogICJiYXR0bGUiLAogICJiZWFjaCIsCiAgImJlYW4iLAogICJiZWF1dHkiLAogICJiZWNhdXNlIiwKICAiYmVjb21lIiwKICAiYmVlZiIsCiAgImJlZm9yZSIsCiAgImJlZ2luIiwKICAiYmVoYXZlIiwKICAiYmVoaW5kIiwKICAiYmVsaWV2ZSIsCiAgImJlbG93IiwKICAiYmVsdCIsCiAgImJlbmNoIiwKICAiYmVuZWZpdCIsCiAgImJlc3QiLAogICJiZXRyYXkiLAogICJiZXR0ZXIiLAogICJiZXR3ZWVuIiwKICAiYmV5b25kIiwKICAiYmljeWNsZSIsCiAgImJpZCIsCiAgImJpa2UiLAogICJiaW5kIiwKICAiYmlvbG9neSIsCiAgImJpcmQiLAogICJiaXJ0aCIsCiAgImJpdHRlciIsCiAgImJsYWNrIiwKICAiYmxhZGUiLAogICJibGFtZSIsCiAgImJsYW5rZXQiLAogICJibGFzdCIsCiAgImJsZWFrIiwKICAiYmxlc3MiLAogICJibGluZCIsCiAgImJsb29kIiwKICAiYmxvc3NvbSIsCiAgImJsb3VzZSIsCiAgImJsdWUiLAogICJibHVyIiwKICAiYmx1c2giLAogICJib2FyZCIsCiAgImJvYXQiLAogICJib2R5IiwKICAiYm9pbCIsCiAgImJvbWIiLAogICJib25lIiwKICAiYm9udXMiLAogICJib29rIiwKICAiYm9vc3QiLAogICJib3JkZXIiLAogICJib3JpbmciLAogICJib3Jyb3ciLAogICJib3NzIiwKICAiYm90dG9tIiwKICAiYm91bmNlIiwKICAiYm94IiwKICAiYm95IiwKICAiYnJhY2tldCIsCiAgImJyYWluIiwKICAiYnJhbmQiLAogICJicmFzcyIsCiAgImJyYXZlIiwKICAiYnJlYWQiLAogICJicmVlemUiLAogICJicmljayIsCiAgImJyaWRnZSIsCiAgImJyaWVmIiwKICAiYnJpZ2h0IiwKICAiYnJpbmciLAogICJicmlzayIsCiAgImJyb2Njb2xpIiwKICAiYnJva2VuIiwKICAiYnJvbnplIiwKICAiYnJvb20iLAogICJicm90aGVyIiwKICAiYnJvd24iLAogICJicnVzaCIsCiAgImJ1YmJsZSIsCiAgImJ1ZGR5IiwKICAiYnVkZ2V0IiwKICAiYnVmZmFsbyIsCiAgImJ1aWxkIiwKICAiYnVsYiIsCiAgImJ1bGsiLAogICJidWxsZXQiLAogICJidW5kbGUiLAogICJidW5rZXIiLAogICJidXJkZW4iLAogICJidXJnZXIiLAogICJidXJzdCIsCiAgImJ1cyIsCiAgImJ1c2luZXNzIiwKICAiYnVzeSIsCiAgImJ1dHRlciIsCiAgImJ1eWVyIiwKICAiYnV6eiIsCiAgImNhYmJhZ2UiLAogICJjYWJpbiIsCiAgImNhYmxlIiwKICAiY2FjdHVzIiwKICAiY2FnZSIsCiAgImNha2UiLAogICJjYWxsIiwKICAiY2FsbSIsCiAgImNhbWVyYSIsCiAgImNhbXAiLAogICJjYW4iLAogICJjYW5hbCIsCiAgImNhbmNlbCIsCiAgImNhbmR5IiwKICAiY2Fubm9uIiwKICAiY2Fub2UiLAogICJjYW52YXMiLAogICJjYW55b24iLAogICJjYXBhYmxlIiwKICAiY2FwaXRhbCIsCiAgImNhcHRhaW4iLAogICJjYXIiLAogICJjYXJib24iLAogICJjYXJkIiwKICAiY2FyZ28iLAogICJjYXJwZXQiLAogICJjYXJyeSIsCiAgImNhcnQiLAogICJjYXNlIiwKICAiY2FzaCIsCiAgImNhc2lubyIsCiAgImNhc3RsZSIsCiAgImNhc3VhbCIsCiAgImNhdCIsCiAgImNhdGFsb2ciLAogICJjYXRjaCIsCiAgImNhdGVnb3J5IiwKICAiY2F0dGxlIiwKICAiY2F1Z2h0IiwKICAiY2F1c2UiLAogICJjYXV0aW9uIiwKICAiY2F2ZSIsCiAgImNlaWxpbmciLAogICJjZWxlcnkiLAogICJjZW1lbnQiLAogICJjZW5zdXMiLAogICJjZW50dXJ5IiwKICAiY2VyZWFsIiwKICAiY2VydGFpbiIsCiAgImNoYWlyIiwKICAiY2hhbGsiLAogICJjaGFtcGlvbiIsCiAgImNoYW5nZSIsCiAgImNoYW9zIiwKICAiY2hhcHRlciIsCiAgImNoYXJnZSIsCiAgImNoYXNlIiwKICAiY2hhdCIsCiAgImNoZWFwIiwKICAiY2hlY2siLAogICJjaGVlc2UiLAogICJjaGVmIiwKICAiY2hlcnJ5IiwKICAiY2hlc3QiLAogICJjaGlja2VuIiwKICAiY2hpZWYiLAogICJjaGlsZCIsCiAgImNoaW1uZXkiLAogICJjaG9pY2UiLAogICJjaG9vc2UiLAogICJjaHJvbmljIiwKICAiY2h1Y2tsZSIsCiAgImNodW5rIiwKICAiY2h1cm4iLAogICJjaWdhciIsCiAgImNpbm5hbW9uIiwKICAiY2lyY2xlIiwKICAiY2l0aXplbiIsCiAgImNpdHkiLAogICJjaXZpbCIsCiAgImNsYWltIiwKICAiY2xhcCIsCiAgImNsYXJpZnkiLAogICJjbGF3IiwKICAiY2xheSIsCiAgImNsZWFuIiwKICAiY2xlcmsiLAogICJjbGV2ZXIiLAogICJjbGljayIsCiAgImNsaWVudCIsCiAgImNsaWZmIiwKICAiY2xpbWIiLAogICJjbGluaWMiLAogICJjbGlwIiwKICAiY2xvY2siLAogICJjbG9nIiwKICAiY2xvc2UiLAogICJjbG90aCIsCiAgImNsb3VkIiwKICAiY2xvd24iLAogICJjbHViIiwKICAiY2x1bXAiLAogICJjbHVzdGVyIiwKICAiY2x1dGNoIiwKICAiY29hY2giLAogICJjb2FzdCIsCiAgImNvY29udXQiLAogICJjb2RlIiwKICAiY29mZmVlIiwKICAiY29pbCIsCiAgImNvaW4iLAogICJjb2xsZWN0IiwKICAiY29sb3IiLAogICJjb2x1bW4iLAogICJjb21iaW5lIiwKICAiY29tZSIsCiAgImNvbWZvcnQiLAogICJjb21pYyIsCiAgImNvbW1vbiIsCiAgImNvbXBhbnkiLAogICJjb25jZXJ0IiwKICAiY29uZHVjdCIsCiAgImNvbmZpcm0iLAogICJjb25ncmVzcyIsCiAgImNvbm5lY3QiLAogICJjb25zaWRlciIsCiAgImNvbnRyb2wiLAogICJjb252aW5jZSIsCiAgImNvb2siLAogICJjb29sIiwKICAiY29wcGVyIiwKICAiY29weSIsCiAgImNvcmFsIiwKICAiY29yZSIsCiAgImNvcm4iLAogICJjb3JyZWN0IiwKICAiY29zdCIsCiAgImNvdHRvbiIsCiAgImNvdWNoIiwKICAiY291bnRyeSIsCiAgImNvdXBsZSIsCiAgImNvdXJzZSIsCiAgImNvdXNpbiIsCiAgImNvdmVyIiwKICAiY295b3RlIiwKICAiY3JhY2siLAogICJjcmFkbGUiLAogICJjcmFmdCIsCiAgImNyYW0iLAogICJjcmFuZSIsCiAgImNyYXNoIiwKICAiY3JhdGVyIiwKICAiY3Jhd2wiLAogICJjcmF6eSIsCiAgImNyZWFtIiwKICAiY3JlZGl0IiwKICAiY3JlZWsiLAogICJjcmV3IiwKICAiY3JpY2tldCIsCiAgImNyaW1lIiwKICAiY3Jpc3AiLAogICJjcml0aWMiLAogICJjcm9wIiwKICAiY3Jvc3MiLAogICJjcm91Y2giLAogICJjcm93ZCIsCiAgImNydWNpYWwiLAogICJjcnVlbCIsCiAgImNydWlzZSIsCiAgImNydW1ibGUiLAogICJjcnVuY2giLAogICJjcnVzaCIsCiAgImNyeSIsCiAgImNyeXN0YWwiLAogICJjdWJlIiwKICAiY3VsdHVyZSIsCiAgImN1cCIsCiAgImN1cGJvYXJkIiwKICAiY3VyaW91cyIsCiAgImN1cnJlbnQiLAogICJjdXJ0YWluIiwKICAiY3VydmUiLAogICJjdXNoaW9uIiwKICAiY3VzdG9tIiwKICAiY3V0ZSIsCiAgImN5Y2xlIiwKICAiZGFkIiwKICAiZGFtYWdlIiwKICAiZGFtcCIsCiAgImRhbmNlIiwKICAiZGFuZ2VyIiwKICAiZGFyaW5nIiwKICAiZGFzaCIsCiAgImRhdWdodGVyIiwKICAiZGF3biIsCiAgImRheSIsCiAgImRlYWwiLAogICJkZWJhdGUiLAogICJkZWJyaXMiLAogICJkZWNhZGUiLAogICJkZWNlbWJlciIsCiAgImRlY2lkZSIsCiAgImRlY2xpbmUiLAogICJkZWNvcmF0ZSIsCiAgImRlY3JlYXNlIiwKICAiZGVlciIsCiAgImRlZmVuc2UiLAogICJkZWZpbmUiLAogICJkZWZ5IiwKICAiZGVncmVlIiwKICAiZGVsYXkiLAogICJkZWxpdmVyIiwKICAiZGVtYW5kIiwKICAiZGVtaXNlIiwKICAiZGVuaWFsIiwKICAiZGVudGlzdCIsCiAgImRlbnkiLAogICJkZXBhcnQiLAogICJkZXBlbmQiLAogICJkZXBvc2l0IiwKICAiZGVwdGgiLAogICJkZXB1dHkiLAogICJkZXJpdmUiLAogICJkZXNjcmliZSIsCiAgImRlc2VydCIsCiAgImRlc2lnbiIsCiAgImRlc2siLAogICJkZXNwYWlyIiwKICAiZGVzdHJveSIsCiAgImRldGFpbCIsCiAgImRldGVjdCIsCiAgImRldmVsb3AiLAogICJkZXZpY2UiLAogICJkZXZvdGUiLAogICJkaWFncmFtIiwKICAiZGlhbCIsCiAgImRpYW1vbmQiLAogICJkaWFyeSIsCiAgImRpY2UiLAogICJkaWVzZWwiLAogICJkaWV0IiwKICAiZGlmZmVyIiwKICAiZGlnaXRhbCIsCiAgImRpZ25pdHkiLAogICJkaWxlbW1hIiwKICAiZGlubmVyIiwKICAiZGlub3NhdXIiLAogICJkaXJlY3QiLAogICJkaXJ0IiwKICAiZGlzYWdyZWUiLAogICJkaXNjb3ZlciIsCiAgImRpc2Vhc2UiLAogICJkaXNoIiwKICAiZGlzbWlzcyIsCiAgImRpc29yZGVyIiwKICAiZGlzcGxheSIsCiAgImRpc3RhbmNlIiwKICAiZGl2ZXJ0IiwKICAiZGl2aWRlIiwKICAiZGl2b3JjZSIsCiAgImRpenp5IiwKICAiZG9jdG9yIiwKICAiZG9jdW1lbnQiLAogICJkb2ciLAogICJkb2xsIiwKICAiZG9scGhpbiIsCiAgImRvbWFpbiIsCiAgImRvbmF0ZSIsCiAgImRvbmtleSIsCiAgImRvbm9yIiwKICAiZG9vciIsCiAgImRvc2UiLAogICJkb3VibGUiLAogICJkb3ZlIiwKICAiZHJhZnQiLAogICJkcmFnb24iLAogICJkcmFtYSIsCiAgImRyYXN0aWMiLAogICJkcmF3IiwKICAiZHJlYW0iLAogICJkcmVzcyIsCiAgImRyaWZ0IiwKICAiZHJpbGwiLAogICJkcmluayIsCiAgImRyaXAiLAogICJkcml2ZSIsCiAgImRyb3AiLAogICJkcnVtIiwKICAiZHJ5IiwKICAiZHVjayIsCiAgImR1bWIiLAogICJkdW5lIiwKICAiZHVyaW5nIiwKICAiZHVzdCIsCiAgImR1dGNoIiwKICAiZHV0eSIsCiAgImR3YXJmIiwKICAiZHluYW1pYyIsCiAgImVhZ2VyIiwKICAiZWFnbGUiLAogICJlYXJseSIsCiAgImVhcm4iLAogICJlYXJ0aCIsCiAgImVhc2lseSIsCiAgImVhc3QiLAogICJlYXN5IiwKICAiZWNobyIsCiAgImVjb2xvZ3kiLAogICJlY29ub215IiwKICAiZWRnZSIsCiAgImVkaXQiLAogICJlZHVjYXRlIiwKICAiZWZmb3J0IiwKICAiZWdnIiwKICAiZWlnaHQiLAogICJlaXRoZXIiLAogICJlbGJvdyIsCiAgImVsZGVyIiwKICAiZWxlY3RyaWMiLAogICJlbGVnYW50IiwKICAiZWxlbWVudCIsCiAgImVsZXBoYW50IiwKICAiZWxldmF0b3IiLAogICJlbGl0ZSIsCiAgImVsc2UiLAogICJlbWJhcmsiLAogICJlbWJvZHkiLAogICJlbWJyYWNlIiwKICAiZW1lcmdlIiwKICAiZW1vdGlvbiIsCiAgImVtcGxveSIsCiAgImVtcG93ZXIiLAogICJlbXB0eSIsCiAgImVuYWJsZSIsCiAgImVuYWN0IiwKICAiZW5kIiwKICAiZW5kbGVzcyIsCiAgImVuZG9yc2UiLAogICJlbmVteSIsCiAgImVuZXJneSIsCiAgImVuZm9yY2UiLAogICJlbmdhZ2UiLAogICJlbmdpbmUiLAogICJlbmhhbmNlIiwKICAiZW5qb3kiLAogICJlbmxpc3QiLAogICJlbm91Z2giLAogICJlbnJpY2giLAogICJlbnJvbGwiLAogICJlbnN1cmUiLAogICJlbnRlciIsCiAgImVudGlyZSIsCiAgImVudHJ5IiwKICAiZW52ZWxvcGUiLAogICJlcGlzb2RlIiwKICAiZXF1YWwiLAogICJlcXVpcCIsCiAgImVyYSIsCiAgImVyYXNlIiwKICAiZXJvZGUiLAogICJlcm9zaW9uIiwKICAiZXJyb3IiLAogICJlcnVwdCIsCiAgImVzY2FwZSIsCiAgImVzc2F5IiwKICAiZXNzZW5jZSIsCiAgImVzdGF0ZSIsCiAgImV0ZXJuYWwiLAogICJldGhpY3MiLAogICJldmlkZW5jZSIsCiAgImV2aWwiLAogICJldm9rZSIsCiAgImV2b2x2ZSIsCiAgImV4YWN0IiwKICAiZXhhbXBsZSIsCiAgImV4Y2VzcyIsCiAgImV4Y2hhbmdlIiwKICAiZXhjaXRlIiwKICAiZXhjbHVkZSIsCiAgImV4Y3VzZSIsCiAgImV4ZWN1dGUiLAogICJleGVyY2lzZSIsCiAgImV4aGF1c3QiLAogICJleGhpYml0IiwKICAiZXhpbGUiLAogICJleGlzdCIsCiAgImV4aXQiLAogICJleG90aWMiLAogICJleHBhbmQiLAogICJleHBlY3QiLAogICJleHBpcmUiLAogICJleHBsYWluIiwKICAiZXhwb3NlIiwKICAiZXhwcmVzcyIsCiAgImV4dGVuZCIsCiAgImV4dHJhIiwKICAiZXllIiwKICAiZXllYnJvdyIsCiAgImZhYnJpYyIsCiAgImZhY2UiLAogICJmYWN1bHR5IiwKICAiZmFkZSIsCiAgImZhaW50IiwKICAiZmFpdGgiLAogICJmYWxsIiwKICAiZmFsc2UiLAogICJmYW1lIiwKICAiZmFtaWx5IiwKICAiZmFtb3VzIiwKICAiZmFuIiwKICAiZmFuY3kiLAogICJmYW50YXN5IiwKICAiZmFybSIsCiAgImZhc2hpb24iLAogICJmYXQiLAogICJmYXRhbCIsCiAgImZhdGhlciIsCiAgImZhdGlndWUiLAogICJmYXVsdCIsCiAgImZhdm9yaXRlIiwKICAiZmVhdHVyZSIsCiAgImZlYnJ1YXJ5IiwKICAiZmVkZXJhbCIsCiAgImZlZSIsCiAgImZlZWQiLAogICJmZWVsIiwKICAiZmVtYWxlIiwKICAiZmVuY2UiLAogICJmZXN0aXZhbCIsCiAgImZldGNoIiwKICAiZmV2ZXIiLAogICJmZXciLAogICJmaWJlciIsCiAgImZpY3Rpb24iLAogICJmaWVsZCIsCiAgImZpZ3VyZSIsCiAgImZpbGUiLAogICJmaWxtIiwKICAiZmlsdGVyIiwKICAiZmluYWwiLAogICJmaW5kIiwKICAiZmluZSIsCiAgImZpbmdlciIsCiAgImZpbmlzaCIsCiAgImZpcmUiLAogICJmaXJtIiwKICAiZmlyc3QiLAogICJmaXNjYWwiLAogICJmaXNoIiwKICAiZml0IiwKICAiZml0bmVzcyIsCiAgImZpeCIsCiAgImZsYWciLAogICJmbGFtZSIsCiAgImZsYXNoIiwKICAiZmxhdCIsCiAgImZsYXZvciIsCiAgImZsZWUiLAogICJmbGlnaHQiLAogICJmbGlwIiwKICAiZmxvYXQiLAogICJmbG9jayIsCiAgImZsb29yIiwKICAiZmxvd2VyIiwKICAiZmx1aWQiLAogICJmbHVzaCIsCiAgImZseSIsCiAgImZvYW0iLAogICJmb2N1cyIsCiAgImZvZyIsCiAgImZvaWwiLAogICJmb2xkIiwKICAiZm9sbG93IiwKICAiZm9vZCIsCiAgImZvb3QiLAogICJmb3JjZSIsCiAgImZvcmVzdCIsCiAgImZvcmdldCIsCiAgImZvcmsiLAogICJmb3J0dW5lIiwKICAiZm9ydW0iLAogICJmb3J3YXJkIiwKICAiZm9zc2lsIiwKICAiZm9zdGVyIiwKICAiZm91bmQiLAogICJmb3giLAogICJmcmFnaWxlIiwKICAiZnJhbWUiLAogICJmcmVxdWVudCIsCiAgImZyZXNoIiwKICAiZnJpZW5kIiwKICAiZnJpbmdlIiwKICAiZnJvZyIsCiAgImZyb250IiwKICAiZnJvc3QiLAogICJmcm93biIsCiAgImZyb3plbiIsCiAgImZydWl0IiwKICAiZnVlbCIsCiAgImZ1biIsCiAgImZ1bm55IiwKICAiZnVybmFjZSIsCiAgImZ1cnkiLAogICJmdXR1cmUiLAogICJnYWRnZXQiLAogICJnYWluIiwKICAiZ2FsYXh5IiwKICAiZ2FsbGVyeSIsCiAgImdhbWUiLAogICJnYXAiLAogICJnYXJhZ2UiLAogICJnYXJiYWdlIiwKICAiZ2FyZGVuIiwKICAiZ2FybGljIiwKICAiZ2FybWVudCIsCiAgImdhcyIsCiAgImdhc3AiLAogICJnYXRlIiwKICAiZ2F0aGVyIiwKICAiZ2F1Z2UiLAogICJnYXplIiwKICAiZ2VuZXJhbCIsCiAgImdlbml1cyIsCiAgImdlbnJlIiwKICAiZ2VudGxlIiwKICAiZ2VudWluZSIsCiAgImdlc3R1cmUiLAogICJnaG9zdCIsCiAgImdpYW50IiwKICAiZ2lmdCIsCiAgImdpZ2dsZSIsCiAgImdpbmdlciIsCiAgImdpcmFmZmUiLAogICJnaXJsIiwKICAiZ2l2ZSIsCiAgImdsYWQiLAogICJnbGFuY2UiLAogICJnbGFyZSIsCiAgImdsYXNzIiwKICAiZ2xpZGUiLAogICJnbGltcHNlIiwKICAiZ2xvYmUiLAogICJnbG9vbSIsCiAgImdsb3J5IiwKICAiZ2xvdmUiLAogICJnbG93IiwKICAiZ2x1ZSIsCiAgImdvYXQiLAogICJnb2RkZXNzIiwKICAiZ29sZCIsCiAgImdvb2QiLAogICJnb29zZSIsCiAgImdvcmlsbGEiLAogICJnb3NwZWwiLAogICJnb3NzaXAiLAogICJnb3Zlcm4iLAogICJnb3duIiwKICAiZ3JhYiIsCiAgImdyYWNlIiwKICAiZ3JhaW4iLAogICJncmFudCIsCiAgImdyYXBlIiwKICAiZ3Jhc3MiLAogICJncmF2aXR5IiwKICAiZ3JlYXQiLAogICJncmVlbiIsCiAgImdyaWQiLAogICJncmllZiIsCiAgImdyaXQiLAogICJncm9jZXJ5IiwKICAiZ3JvdXAiLAogICJncm93IiwKICAiZ3J1bnQiLAogICJndWFyZCIsCiAgImd1ZXNzIiwKICAiZ3VpZGUiLAogICJndWlsdCIsCiAgImd1aXRhciIsCiAgImd1biIsCiAgImd5bSIsCiAgImhhYml0IiwKICAiaGFpciIsCiAgImhhbGYiLAogICJoYW1tZXIiLAogICJoYW1zdGVyIiwKICAiaGFuZCIsCiAgImhhcHB5IiwKICAiaGFyYm9yIiwKICAiaGFyZCIsCiAgImhhcnNoIiwKICAiaGFydmVzdCIsCiAgImhhdCIsCiAgImhhdmUiLAogICJoYXdrIiwKICAiaGF6YXJkIiwKICAiaGVhZCIsCiAgImhlYWx0aCIsCiAgImhlYXJ0IiwKICAiaGVhdnkiLAogICJoZWRnZWhvZyIsCiAgImhlaWdodCIsCiAgImhlbGxvIiwKICAiaGVsbWV0IiwKICAiaGVscCIsCiAgImhlbiIsCiAgImhlcm8iLAogICJoaWRkZW4iLAogICJoaWdoIiwKICAiaGlsbCIsCiAgImhpbnQiLAogICJoaXAiLAogICJoaXJlIiwKICAiaGlzdG9yeSIsCiAgImhvYmJ5IiwKICAiaG9ja2V5IiwKICAiaG9sZCIsCiAgImhvbGUiLAogICJob2xpZGF5IiwKICAiaG9sbG93IiwKICAiaG9tZSIsCiAgImhvbmV5IiwKICAiaG9vZCIsCiAgImhvcGUiLAogICJob3JuIiwKICAiaG9ycm9yIiwKICAiaG9yc2UiLAogICJob3NwaXRhbCIsCiAgImhvc3QiLAogICJob3RlbCIsCiAgImhvdXIiLAogICJob3ZlciIsCiAgImh1YiIsCiAgImh1Z2UiLAogICJodW1hbiIsCiAgImh1bWJsZSIsCiAgImh1bW9yIiwKICAiaHVuZHJlZCIsCiAgImh1bmdyeSIsCiAgImh1bnQiLAogICJodXJkbGUiLAogICJodXJyeSIsCiAgImh1cnQiLAogICJodXNiYW5kIiwKICAiaHlicmlkIiwKICAiaWNlIiwKICAiaWNvbiIsCiAgImlkZWEiLAogICJpZGVudGlmeSIsCiAgImlkbGUiLAogICJpZ25vcmUiLAogICJpbGwiLAogICJpbGxlZ2FsIiwKICAiaWxsbmVzcyIsCiAgImltYWdlIiwKICAiaW1pdGF0ZSIsCiAgImltbWVuc2UiLAogICJpbW11bmUiLAogICJpbXBhY3QiLAogICJpbXBvc2UiLAogICJpbXByb3ZlIiwKICAiaW1wdWxzZSIsCiAgImluY2giLAogICJpbmNsdWRlIiwKICAiaW5jb21lIiwKICAiaW5jcmVhc2UiLAogICJpbmRleCIsCiAgImluZGljYXRlIiwKICAiaW5kb29yIiwKICAiaW5kdXN0cnkiLAogICJpbmZhbnQiLAogICJpbmZsaWN0IiwKICAiaW5mb3JtIiwKICAiaW5oYWxlIiwKICAiaW5oZXJpdCIsCiAgImluaXRpYWwiLAogICJpbmplY3QiLAogICJpbmp1cnkiLAogICJpbm1hdGUiLAogICJpbm5lciIsCiAgImlubm9jZW50IiwKICAiaW5wdXQiLAogICJpbnF1aXJ5IiwKICAiaW5zYW5lIiwKICAiaW5zZWN0IiwKICAiaW5zaWRlIiwKICAiaW5zcGlyZSIsCiAgImluc3RhbGwiLAogICJpbnRhY3QiLAogICJpbnRlcmVzdCIsCiAgImludG8iLAogICJpbnZlc3QiLAogICJpbnZpdGUiLAogICJpbnZvbHZlIiwKICAiaXJvbiIsCiAgImlzbGFuZCIsCiAgImlzb2xhdGUiLAogICJpc3N1ZSIsCiAgIml0ZW0iLAogICJpdm9yeSIsCiAgImphY2tldCIsCiAgImphZ3VhciIsCiAgImphciIsCiAgImphenoiLAogICJqZWFsb3VzIiwKICAiamVhbnMiLAogICJqZWxseSIsCiAgImpld2VsIiwKICAiam9iIiwKICAiam9pbiIsCiAgImpva2UiLAogICJqb3VybmV5IiwKICAiam95IiwKICAianVkZ2UiLAogICJqdWljZSIsCiAgImp1bXAiLAogICJqdW5nbGUiLAogICJqdW5pb3IiLAogICJqdW5rIiwKICAianVzdCIsCiAgImthbmdhcm9vIiwKICAia2VlbiIsCiAgImtlZXAiLAogICJrZXRjaHVwIiwKICAia2V5IiwKICAia2ljayIsCiAgImtpZCIsCiAgImtpZG5leSIsCiAgImtpbmQiLAogICJraW5nZG9tIiwKICAia2lzcyIsCiAgImtpdCIsCiAgImtpdGNoZW4iLAogICJraXRlIiwKICAia2l0dGVuIiwKICAia2l3aSIsCiAgImtuZWUiLAogICJrbmlmZSIsCiAgImtub2NrIiwKICAia25vdyIsCiAgImxhYiIsCiAgImxhYmVsIiwKICAibGFib3IiLAogICJsYWRkZXIiLAogICJsYWR5IiwKICAibGFrZSIsCiAgImxhbXAiLAogICJsYW5ndWFnZSIsCiAgImxhcHRvcCIsCiAgImxhcmdlIiwKICAibGF0ZXIiLAogICJsYXRpbiIsCiAgImxhdWdoIiwKICAibGF1bmRyeSIsCiAgImxhdmEiLAogICJsYXciLAogICJsYXduIiwKICAibGF3c3VpdCIsCiAgImxheWVyIiwKICAibGF6eSIsCiAgImxlYWRlciIsCiAgImxlYWYiLAogICJsZWFybiIsCiAgImxlYXZlIiwKICAibGVjdHVyZSIsCiAgImxlZnQiLAogICJsZWciLAogICJsZWdhbCIsCiAgImxlZ2VuZCIsCiAgImxlaXN1cmUiLAogICJsZW1vbiIsCiAgImxlbmQiLAogICJsZW5ndGgiLAogICJsZW5zIiwKICAibGVvcGFyZCIsCiAgImxlc3NvbiIsCiAgImxldHRlciIsCiAgImxldmVsIiwKICAibGlhciIsCiAgImxpYmVydHkiLAogICJsaWJyYXJ5IiwKICAibGljZW5zZSIsCiAgImxpZmUiLAogICJsaWZ0IiwKICAibGlnaHQiLAogICJsaWtlIiwKICAibGltYiIsCiAgImxpbWl0IiwKICAibGluayIsCiAgImxpb24iLAogICJsaXF1aWQiLAogICJsaXN0IiwKICAibGl0dGxlIiwKICAibGl2ZSIsCiAgImxpemFyZCIsCiAgImxvYWQiLAogICJsb2FuIiwKICAibG9ic3RlciIsCiAgImxvY2FsIiwKICAibG9jayIsCiAgImxvZ2ljIiwKICAibG9uZWx5IiwKICAibG9uZyIsCiAgImxvb3AiLAogICJsb3R0ZXJ5IiwKICAibG91ZCIsCiAgImxvdW5nZSIsCiAgImxvdmUiLAogICJsb3lhbCIsCiAgImx1Y2t5IiwKICAibHVnZ2FnZSIsCiAgImx1bWJlciIsCiAgImx1bmFyIiwKICAibHVuY2giLAogICJsdXh1cnkiLAogICJseXJpY3MiLAogICJtYWNoaW5lIiwKICAibWFkIiwKICAibWFnaWMiLAogICJtYWduZXQiLAogICJtYWlkIiwKICAibWFpbCIsCiAgIm1haW4iLAogICJtYWpvciIsCiAgIm1ha2UiLAogICJtYW1tYWwiLAogICJtYW4iLAogICJtYW5hZ2UiLAogICJtYW5kYXRlIiwKICAibWFuZ28iLAogICJtYW5zaW9uIiwKICAibWFudWFsIiwKICAibWFwbGUiLAogICJtYXJibGUiLAogICJtYXJjaCIsCiAgIm1hcmdpbiIsCiAgIm1hcmluZSIsCiAgIm1hcmtldCIsCiAgIm1hcnJpYWdlIiwKICAibWFzayIsCiAgIm1hc3MiLAogICJtYXN0ZXIiLAogICJtYXRjaCIsCiAgIm1hdGVyaWFsIiwKICAibWF0aCIsCiAgIm1hdHJpeCIsCiAgIm1hdHRlciIsCiAgIm1heGltdW0iLAogICJtYXplIiwKICAibWVhZG93IiwKICAibWVhbiIsCiAgIm1lYXN1cmUiLAogICJtZWF0IiwKICAibWVjaGFuaWMiLAogICJtZWRhbCIsCiAgIm1lZGlhIiwKICAibWVsb2R5IiwKICAibWVsdCIsCiAgIm1lbWJlciIsCiAgIm1lbW9yeSIsCiAgIm1lbnRpb24iLAogICJtZW51IiwKICAibWVyY3kiLAogICJtZXJnZSIsCiAgIm1lcml0IiwKICAibWVycnkiLAogICJtZXNoIiwKICAibWVzc2FnZSIsCiAgIm1ldGFsIiwKICAibWV0aG9kIiwKICAibWlkZGxlIiwKICAibWlkbmlnaHQiLAogICJtaWxrIiwKICAibWlsbGlvbiIsCiAgIm1pbWljIiwKICAibWluZCIsCiAgIm1pbmltdW0iLAogICJtaW5vciIsCiAgIm1pbnV0ZSIsCiAgIm1pcmFjbGUiLAogICJtaXJyb3IiLAogICJtaXNlcnkiLAogICJtaXNzIiwKICAibWlzdGFrZSIsCiAgIm1peCIsCiAgIm1peGVkIiwKICAibWl4dHVyZSIsCiAgIm1vYmlsZSIsCiAgIm1vZGVsIiwKICAibW9kaWZ5IiwKICAibW9tIiwKICAibW9tZW50IiwKICAibW9uaXRvciIsCiAgIm1vbmtleSIsCiAgIm1vbnN0ZXIiLAogICJtb250aCIsCiAgIm1vb24iLAogICJtb3JhbCIsCiAgIm1vcmUiLAogICJtb3JuaW5nIiwKICAibW9zcXVpdG8iLAogICJtb3RoZXIiLAogICJtb3Rpb24iLAogICJtb3RvciIsCiAgIm1vdW50YWluIiwKICAibW91c2UiLAogICJtb3ZlIiwKICAibW92aWUiLAogICJtdWNoIiwKICAibXVmZmluIiwKICAibXVsZSIsCiAgIm11bHRpcGx5IiwKICAibXVzY2xlIiwKICAibXVzZXVtIiwKICAibXVzaHJvb20iLAogICJtdXNpYyIsCiAgIm11c3QiLAogICJtdXR1YWwiLAogICJteXNlbGYiLAogICJteXN0ZXJ5IiwKICAibXl0aCIsCiAgIm5haXZlIiwKICAibmFtZSIsCiAgIm5hcGtpbiIsCiAgIm5hcnJvdyIsCiAgIm5hc3R5IiwKICAibmF0aW9uIiwKICAibmF0dXJlIiwKICAibmVhciIsCiAgIm5lY2siLAogICJuZWVkIiwKICAibmVnYXRpdmUiLAogICJuZWdsZWN0IiwKICAibmVpdGhlciIsCiAgIm5lcGhldyIsCiAgIm5lcnZlIiwKICAibmVzdCIsCiAgIm5ldCIsCiAgIm5ldHdvcmsiLAogICJuZXV0cmFsIiwKICAibmV2ZXIiLAogICJuZXdzIiwKICAibmV4dCIsCiAgIm5pY2UiLAogICJuaWdodCIsCiAgIm5vYmxlIiwKICAibm9pc2UiLAogICJub21pbmVlIiwKICAibm9vZGxlIiwKICAibm9ybWFsIiwKICAibm9ydGgiLAogICJub3NlIiwKICAibm90YWJsZSIsCiAgIm5vdGUiLAogICJub3RoaW5nIiwKICAibm90aWNlIiwKICAibm92ZWwiLAogICJub3ciLAogICJudWNsZWFyIiwKICAibnVtYmVyIiwKICAibnVyc2UiLAogICJudXQiLAogICJvYWsiLAogICJvYmV5IiwKICAib2JqZWN0IiwKICAib2JsaWdlIiwKICAib2JzY3VyZSIsCiAgIm9ic2VydmUiLAogICJvYnRhaW4iLAogICJvYnZpb3VzIiwKICAib2NjdXIiLAogICJvY2VhbiIsCiAgIm9jdG9iZXIiLAogICJvZG9yIiwKICAib2ZmIiwKICAib2ZmZXIiLAogICJvZmZpY2UiLAogICJvZnRlbiIsCiAgIm9pbCIsCiAgIm9rYXkiLAogICJvbGQiLAogICJvbGl2ZSIsCiAgIm9seW1waWMiLAogICJvbWl0IiwKICAib25jZSIsCiAgIm9uZSIsCiAgIm9uaW9uIiwKICAib25saW5lIiwKICAib25seSIsCiAgIm9wZW4iLAogICJvcGVyYSIsCiAgIm9waW5pb24iLAogICJvcHBvc2UiLAogICJvcHRpb24iLAogICJvcmFuZ2UiLAogICJvcmJpdCIsCiAgIm9yY2hhcmQiLAogICJvcmRlciIsCiAgIm9yZGluYXJ5IiwKICAib3JnYW4iLAogICJvcmllbnQiLAogICJvcmlnaW5hbCIsCiAgIm9ycGhhbiIsCiAgIm9zdHJpY2giLAogICJvdGhlciIsCiAgIm91dGRvb3IiLAogICJvdXRlciIsCiAgIm91dHB1dCIsCiAgIm91dHNpZGUiLAogICJvdmFsIiwKICAib3ZlbiIsCiAgIm92ZXIiLAogICJvd24iLAogICJvd25lciIsCiAgIm94eWdlbiIsCiAgIm95c3RlciIsCiAgIm96b25lIiwKICAicGFjdCIsCiAgInBhZGRsZSIsCiAgInBhZ2UiLAogICJwYWlyIiwKICAicGFsYWNlIiwKICAicGFsbSIsCiAgInBhbmRhIiwKICAicGFuZWwiLAogICJwYW5pYyIsCiAgInBhbnRoZXIiLAogICJwYXBlciIsCiAgInBhcmFkZSIsCiAgInBhcmVudCIsCiAgInBhcmsiLAogICJwYXJyb3QiLAogICJwYXJ0eSIsCiAgInBhc3MiLAogICJwYXRjaCIsCiAgInBhdGgiLAogICJwYXRpZW50IiwKICAicGF0cm9sIiwKICAicGF0dGVybiIsCiAgInBhdXNlIiwKICAicGF2ZSIsCiAgInBheW1lbnQiLAogICJwZWFjZSIsCiAgInBlYW51dCIsCiAgInBlYXIiLAogICJwZWFzYW50IiwKICAicGVsaWNhbiIsCiAgInBlbiIsCiAgInBlbmFsdHkiLAogICJwZW5jaWwiLAogICJwZW9wbGUiLAogICJwZXBwZXIiLAogICJwZXJmZWN0IiwKICAicGVybWl0IiwKICAicGVyc29uIiwKICAicGV0IiwKICAicGhvbmUiLAogICJwaG90byIsCiAgInBocmFzZSIsCiAgInBoeXNpY2FsIiwKICAicGlhbm8iLAogICJwaWNuaWMiLAogICJwaWN0dXJlIiwKICAicGllY2UiLAogICJwaWciLAogICJwaWdlb24iLAogICJwaWxsIiwKICAicGlsb3QiLAogICJwaW5rIiwKICAicGlvbmVlciIsCiAgInBpcGUiLAogICJwaXN0b2wiLAogICJwaXRjaCIsCiAgInBpenphIiwKICAicGxhY2UiLAogICJwbGFuZXQiLAogICJwbGFzdGljIiwKICAicGxhdGUiLAogICJwbGF5IiwKICAicGxlYXNlIiwKICAicGxlZGdlIiwKICAicGx1Y2siLAogICJwbHVnIiwKICAicGx1bmdlIiwKICAicG9lbSIsCiAgInBvZXQiLAogICJwb2ludCIsCiAgInBvbGFyIiwKICAicG9sZSIsCiAgInBvbGljZSIsCiAgInBvbmQiLAogICJwb255IiwKICAicG9vbCIsCiAgInBvcHVsYXIiLAogICJwb3J0aW9uIiwKICAicG9zaXRpb24iLAogICJwb3NzaWJsZSIsCiAgInBvc3QiLAogICJwb3RhdG8iLAogICJwb3R0ZXJ5IiwKICAicG92ZXJ0eSIsCiAgInBvd2RlciIsCiAgInBvd2VyIiwKICAicHJhY3RpY2UiLAogICJwcmFpc2UiLAogICJwcmVkaWN0IiwKICAicHJlZmVyIiwKICAicHJlcGFyZSIsCiAgInByZXNlbnQiLAogICJwcmV0dHkiLAogICJwcmV2ZW50IiwKICAicHJpY2UiLAogICJwcmlkZSIsCiAgInByaW1hcnkiLAogICJwcmludCIsCiAgInByaW9yaXR5IiwKICAicHJpc29uIiwKICAicHJpdmF0ZSIsCiAgInByaXplIiwKICAicHJvYmxlbSIsCiAgInByb2Nlc3MiLAogICJwcm9kdWNlIiwKICAicHJvZml0IiwKICAicHJvZ3JhbSIsCiAgInByb2plY3QiLAogICJwcm9tb3RlIiwKICAicHJvb2YiLAogICJwcm9wZXJ0eSIsCiAgInByb3NwZXIiLAogICJwcm90ZWN0IiwKICAicHJvdWQiLAogICJwcm92aWRlIiwKICAicHVibGljIiwKICAicHVkZGluZyIsCiAgInB1bGwiLAogICJwdWxwIiwKICAicHVsc2UiLAogICJwdW1wa2luIiwKICAicHVuY2giLAogICJwdXBpbCIsCiAgInB1cHB5IiwKICAicHVyY2hhc2UiLAogICJwdXJpdHkiLAogICJwdXJwb3NlIiwKICAicHVyc2UiLAogICJwdXNoIiwKICAicHV0IiwKICAicHV6emxlIiwKICAicHlyYW1pZCIsCiAgInF1YWxpdHkiLAogICJxdWFudHVtIiwKICAicXVhcnRlciIsCiAgInF1ZXN0aW9uIiwKICAicXVpY2siLAogICJxdWl0IiwKICAicXVpeiIsCiAgInF1b3RlIiwKICAicmFiYml0IiwKICAicmFjY29vbiIsCiAgInJhY2UiLAogICJyYWNrIiwKICAicmFkYXIiLAogICJyYWRpbyIsCiAgInJhaWwiLAogICJyYWluIiwKICAicmFpc2UiLAogICJyYWxseSIsCiAgInJhbXAiLAogICJyYW5jaCIsCiAgInJhbmRvbSIsCiAgInJhbmdlIiwKICAicmFwaWQiLAogICJyYXJlIiwKICAicmF0ZSIsCiAgInJhdGhlciIsCiAgInJhdmVuIiwKICAicmF3IiwKICAicmF6b3IiLAogICJyZWFkeSIsCiAgInJlYWwiLAogICJyZWFzb24iLAogICJyZWJlbCIsCiAgInJlYnVpbGQiLAogICJyZWNhbGwiLAogICJyZWNlaXZlIiwKICAicmVjaXBlIiwKICAicmVjb3JkIiwKICAicmVjeWNsZSIsCiAgInJlZHVjZSIsCiAgInJlZmxlY3QiLAogICJyZWZvcm0iLAogICJyZWZ1c2UiLAogICJyZWdpb24iLAogICJyZWdyZXQiLAogICJyZWd1bGFyIiwKICAicmVqZWN0IiwKICAicmVsYXgiLAogICJyZWxlYXNlIiwKICAicmVsaWVmIiwKICAicmVseSIsCiAgInJlbWFpbiIsCiAgInJlbWVtYmVyIiwKICAicmVtaW5kIiwKICAicmVtb3ZlIiwKICAicmVuZGVyIiwKICAicmVuZXciLAogICJyZW50IiwKICAicmVvcGVuIiwKICAicmVwYWlyIiwKICAicmVwZWF0IiwKICAicmVwbGFjZSIsCiAgInJlcG9ydCIsCiAgInJlcXVpcmUiLAogICJyZXNjdWUiLAogICJyZXNlbWJsZSIsCiAgInJlc2lzdCIsCiAgInJlc291cmNlIiwKICAicmVzcG9uc2UiLAogICJyZXN1bHQiLAogICJyZXRpcmUiLAogICJyZXRyZWF0IiwKICAicmV0dXJuIiwKICAicmV1bmlvbiIsCiAgInJldmVhbCIsCiAgInJldmlldyIsCiAgInJld2FyZCIsCiAgInJoeXRobSIsCiAgInJpYiIsCiAgInJpYmJvbiIsCiAgInJpY2UiLAogICJyaWNoIiwKICAicmlkZSIsCiAgInJpZGdlIiwKICAicmlmbGUiLAogICJyaWdodCIsCiAgInJpZ2lkIiwKICAicmluZyIsCiAgInJpb3QiLAogICJyaXBwbGUiLAogICJyaXNrIiwKICAicml0dWFsIiwKICAicml2YWwiLAogICJyaXZlciIsCiAgInJvYWQiLAogICJyb2FzdCIsCiAgInJvYm90IiwKICAicm9idXN0IiwKICAicm9ja2V0IiwKICAicm9tYW5jZSIsCiAgInJvb2YiLAogICJyb29raWUiLAogICJyb29tIiwKICAicm9zZSIsCiAgInJvdGF0ZSIsCiAgInJvdWdoIiwKICAicm91bmQiLAogICJyb3V0ZSIsCiAgInJveWFsIiwKICAicnViYmVyIiwKICAicnVkZSIsCiAgInJ1ZyIsCiAgInJ1bGUiLAogICJydW4iLAogICJydW53YXkiLAogICJydXJhbCIsCiAgInNhZCIsCiAgInNhZGRsZSIsCiAgInNhZG5lc3MiLAogICJzYWZlIiwKICAic2FpbCIsCiAgInNhbGFkIiwKICAic2FsbW9uIiwKICAic2Fsb24iLAogICJzYWx0IiwKICAic2FsdXRlIiwKICAic2FtZSIsCiAgInNhbXBsZSIsCiAgInNhbmQiLAogICJzYXRpc2Z5IiwKICAic2F0b3NoaSIsCiAgInNhdWNlIiwKICAic2F1c2FnZSIsCiAgInNhdmUiLAogICJzYXkiLAogICJzY2FsZSIsCiAgInNjYW4iLAogICJzY2FyZSIsCiAgInNjYXR0ZXIiLAogICJzY2VuZSIsCiAgInNjaGVtZSIsCiAgInNjaG9vbCIsCiAgInNjaWVuY2UiLAogICJzY2lzc29ycyIsCiAgInNjb3JwaW9uIiwKICAic2NvdXQiLAogICJzY3JhcCIsCiAgInNjcmVlbiIsCiAgInNjcmlwdCIsCiAgInNjcnViIiwKICAic2VhIiwKICAic2VhcmNoIiwKICAic2Vhc29uIiwKICAic2VhdCIsCiAgInNlY29uZCIsCiAgInNlY3JldCIsCiAgInNlY3Rpb24iLAogICJzZWN1cml0eSIsCiAgInNlZWQiLAogICJzZWVrIiwKICAic2VnbWVudCIsCiAgInNlbGVjdCIsCiAgInNlbGwiLAogICJzZW1pbmFyIiwKICAic2VuaW9yIiwKICAic2Vuc2UiLAogICJzZW50ZW5jZSIsCiAgInNlcmllcyIsCiAgInNlcnZpY2UiLAogICJzZXNzaW9uIiwKICAic2V0dGxlIiwKICAic2V0dXAiLAogICJzZXZlbiIsCiAgInNoYWRvdyIsCiAgInNoYWZ0IiwKICAic2hhbGxvdyIsCiAgInNoYXJlIiwKICAic2hlZCIsCiAgInNoZWxsIiwKICAic2hlcmlmZiIsCiAgInNoaWVsZCIsCiAgInNoaWZ0IiwKICAic2hpbmUiLAogICJzaGlwIiwKICAic2hpdmVyIiwKICAic2hvY2siLAogICJzaG9lIiwKICAic2hvb3QiLAogICJzaG9wIiwKICAic2hvcnQiLAogICJzaG91bGRlciIsCiAgInNob3ZlIiwKICAic2hyaW1wIiwKICAic2hydWciLAogICJzaHVmZmxlIiwKICAic2h5IiwKICAic2libGluZyIsCiAgInNpY2siLAogICJzaWRlIiwKICAic2llZ2UiLAogICJzaWdodCIsCiAgInNpZ24iLAogICJzaWxlbnQiLAogICJzaWxrIiwKICAic2lsbHkiLAogICJzaWx2ZXIiLAogICJzaW1pbGFyIiwKICAic2ltcGxlIiwKICAic2luY2UiLAogICJzaW5nIiwKICAic2lyZW4iLAogICJzaXN0ZXIiLAogICJzaXR1YXRlIiwKICAic2l4IiwKICAic2l6ZSIsCiAgInNrYXRlIiwKICAic2tldGNoIiwKICAic2tpIiwKICAic2tpbGwiLAogICJza2luIiwKICAic2tpcnQiLAogICJza3VsbCIsCiAgInNsYWIiLAogICJzbGFtIiwKICAic2xlZXAiLAogICJzbGVuZGVyIiwKICAic2xpY2UiLAogICJzbGlkZSIsCiAgInNsaWdodCIsCiAgInNsaW0iLAogICJzbG9nYW4iLAogICJzbG90IiwKICAic2xvdyIsCiAgInNsdXNoIiwKICAic21hbGwiLAogICJzbWFydCIsCiAgInNtaWxlIiwKICAic21va2UiLAogICJzbW9vdGgiLAogICJzbmFjayIsCiAgInNuYWtlIiwKICAic25hcCIsCiAgInNuaWZmIiwKICAic25vdyIsCiAgInNvYXAiLAogICJzb2NjZXIiLAogICJzb2NpYWwiLAogICJzb2NrIiwKICAic29kYSIsCiAgInNvZnQiLAogICJzb2xhciIsCiAgInNvbGRpZXIiLAogICJzb2xpZCIsCiAgInNvbHV0aW9uIiwKICAic29sdmUiLAogICJzb21lb25lIiwKICAic29uZyIsCiAgInNvb24iLAogICJzb3JyeSIsCiAgInNvcnQiLAogICJzb3VsIiwKICAic291bmQiLAogICJzb3VwIiwKICAic291cmNlIiwKICAic291dGgiLAogICJzcGFjZSIsCiAgInNwYXJlIiwKICAic3BhdGlhbCIsCiAgInNwYXduIiwKICAic3BlYWsiLAogICJzcGVjaWFsIiwKICAic3BlZWQiLAogICJzcGVsbCIsCiAgInNwZW5kIiwKICAic3BoZXJlIiwKICAic3BpY2UiLAogICJzcGlkZXIiLAogICJzcGlrZSIsCiAgInNwaW4iLAogICJzcGlyaXQiLAogICJzcGxpdCIsCiAgInNwb2lsIiwKICAic3BvbnNvciIsCiAgInNwb29uIiwKICAic3BvcnQiLAogICJzcG90IiwKICAic3ByYXkiLAogICJzcHJlYWQiLAogICJzcHJpbmciLAogICJzcHkiLAogICJzcXVhcmUiLAogICJzcXVlZXplIiwKICAic3F1aXJyZWwiLAogICJzdGFibGUiLAogICJzdGFkaXVtIiwKICAic3RhZmYiLAogICJzdGFnZSIsCiAgInN0YWlycyIsCiAgInN0YW1wIiwKICAic3RhbmQiLAogICJzdGFydCIsCiAgInN0YXRlIiwKICAic3RheSIsCiAgInN0ZWFrIiwKICAic3RlZWwiLAogICJzdGVtIiwKICAic3RlcCIsCiAgInN0ZXJlbyIsCiAgInN0aWNrIiwKICAic3RpbGwiLAogICJzdGluZyIsCiAgInN0b2NrIiwKICAic3RvbWFjaCIsCiAgInN0b25lIiwKICAic3Rvb2wiLAogICJzdG9yeSIsCiAgInN0b3ZlIiwKICAic3RyYXRlZ3kiLAogICJzdHJlZXQiLAogICJzdHJpa2UiLAogICJzdHJvbmciLAogICJzdHJ1Z2dsZSIsCiAgInN0dWRlbnQiLAogICJzdHVmZiIsCiAgInN0dW1ibGUiLAogICJzdHlsZSIsCiAgInN1YmplY3QiLAogICJzdWJtaXQiLAogICJzdWJ3YXkiLAogICJzdWNjZXNzIiwKICAic3VjaCIsCiAgInN1ZGRlbiIsCiAgInN1ZmZlciIsCiAgInN1Z2FyIiwKICAic3VnZ2VzdCIsCiAgInN1aXQiLAogICJzdW1tZXIiLAogICJzdW4iLAogICJzdW5ueSIsCiAgInN1bnNldCIsCiAgInN1cGVyIiwKICAic3VwcGx5IiwKICAic3VwcmVtZSIsCiAgInN1cmUiLAogICJzdXJmYWNlIiwKICAic3VyZ2UiLAogICJzdXJwcmlzZSIsCiAgInN1cnJvdW5kIiwKICAic3VydmV5IiwKICAic3VzcGVjdCIsCiAgInN1c3RhaW4iLAogICJzd2FsbG93IiwKICAic3dhbXAiLAogICJzd2FwIiwKICAic3dhcm0iLAogICJzd2VhciIsCiAgInN3ZWV0IiwKICAic3dpZnQiLAogICJzd2ltIiwKICAic3dpbmciLAogICJzd2l0Y2giLAogICJzd29yZCIsCiAgInN5bWJvbCIsCiAgInN5bXB0b20iLAogICJzeXJ1cCIsCiAgInN5c3RlbSIsCiAgInRhYmxlIiwKICAidGFja2xlIiwKICAidGFnIiwKICAidGFpbCIsCiAgInRhbGVudCIsCiAgInRhbGsiLAogICJ0YW5rIiwKICAidGFwZSIsCiAgInRhcmdldCIsCiAgInRhc2siLAogICJ0YXN0ZSIsCiAgInRhdHRvbyIsCiAgInRheGkiLAogICJ0ZWFjaCIsCiAgInRlYW0iLAogICJ0ZWxsIiwKICAidGVuIiwKICAidGVuYW50IiwKICAidGVubmlzIiwKICAidGVudCIsCiAgInRlcm0iLAogICJ0ZXN0IiwKICAidGV4dCIsCiAgInRoYW5rIiwKICAidGhhdCIsCiAgInRoZW1lIiwKICAidGhlbiIsCiAgInRoZW9yeSIsCiAgInRoZXJlIiwKICAidGhleSIsCiAgInRoaW5nIiwKICAidGhpcyIsCiAgInRob3VnaHQiLAogICJ0aHJlZSIsCiAgInRocml2ZSIsCiAgInRocm93IiwKICAidGh1bWIiLAogICJ0aHVuZGVyIiwKICAidGlja2V0IiwKICAidGlkZSIsCiAgInRpZ2VyIiwKICAidGlsdCIsCiAgInRpbWJlciIsCiAgInRpbWUiLAogICJ0aW55IiwKICAidGlwIiwKICAidGlyZWQiLAogICJ0aXNzdWUiLAogICJ0aXRsZSIsCiAgInRvYXN0IiwKICAidG9iYWNjbyIsCiAgInRvZGF5IiwKICAidG9kZGxlciIsCiAgInRvZSIsCiAgInRvZ2V0aGVyIiwKICAidG9pbGV0IiwKICAidG9rZW4iLAogICJ0b21hdG8iLAogICJ0b21vcnJvdyIsCiAgInRvbmUiLAogICJ0b25ndWUiLAogICJ0b25pZ2h0IiwKICAidG9vbCIsCiAgInRvb3RoIiwKICAidG9wIiwKICAidG9waWMiLAogICJ0b3BwbGUiLAogICJ0b3JjaCIsCiAgInRvcm5hZG8iLAogICJ0b3J0b2lzZSIsCiAgInRvc3MiLAogICJ0b3RhbCIsCiAgInRvdXJpc3QiLAogICJ0b3dhcmQiLAogICJ0b3dlciIsCiAgInRvd24iLAogICJ0b3kiLAogICJ0cmFjayIsCiAgInRyYWRlIiwKICAidHJhZmZpYyIsCiAgInRyYWdpYyIsCiAgInRyYWluIiwKICAidHJhbnNmZXIiLAogICJ0cmFwIiwKICAidHJhc2giLAogICJ0cmF2ZWwiLAogICJ0cmF5IiwKICAidHJlYXQiLAogICJ0cmVlIiwKICAidHJlbmQiLAogICJ0cmlhbCIsCiAgInRyaWJlIiwKICAidHJpY2siLAogICJ0cmlnZ2VyIiwKICAidHJpbSIsCiAgInRyaXAiLAogICJ0cm9waHkiLAogICJ0cm91YmxlIiwKICAidHJ1Y2siLAogICJ0cnVlIiwKICAidHJ1bHkiLAogICJ0cnVtcGV0IiwKICAidHJ1c3QiLAogICJ0cnV0aCIsCiAgInRyeSIsCiAgInR1YmUiLAogICJ0dWl0aW9uIiwKICAidHVtYmxlIiwKICAidHVuYSIsCiAgInR1bm5lbCIsCiAgInR1cmtleSIsCiAgInR1cm4iLAogICJ0dXJ0bGUiLAogICJ0d2VsdmUiLAogICJ0d2VudHkiLAogICJ0d2ljZSIsCiAgInR3aW4iLAogICJ0d2lzdCIsCiAgInR3byIsCiAgInR5cGUiLAogICJ0eXBpY2FsIiwKICAidWdseSIsCiAgInVtYnJlbGxhIiwKICAidW5hYmxlIiwKICAidW5hd2FyZSIsCiAgInVuY2xlIiwKICAidW5jb3ZlciIsCiAgInVuZGVyIiwKICAidW5kbyIsCiAgInVuZmFpciIsCiAgInVuZm9sZCIsCiAgInVuaGFwcHkiLAogICJ1bmlmb3JtIiwKICAidW5pcXVlIiwKICAidW5pdCIsCiAgInVuaXZlcnNlIiwKICAidW5rbm93biIsCiAgInVubG9jayIsCiAgInVudGlsIiwKICAidW51c3VhbCIsCiAgInVudmVpbCIsCiAgInVwZGF0ZSIsCiAgInVwZ3JhZGUiLAogICJ1cGhvbGQiLAogICJ1cG9uIiwKICAidXBwZXIiLAogICJ1cHNldCIsCiAgInVyYmFuIiwKICAidXJnZSIsCiAgInVzYWdlIiwKICAidXNlIiwKICAidXNlZCIsCiAgInVzZWZ1bCIsCiAgInVzZWxlc3MiLAogICJ1c3VhbCIsCiAgInV0aWxpdHkiLAogICJ2YWNhbnQiLAogICJ2YWN1dW0iLAogICJ2YWd1ZSIsCiAgInZhbGlkIiwKICAidmFsbGV5IiwKICAidmFsdmUiLAogICJ2YW4iLAogICJ2YW5pc2giLAogICJ2YXBvciIsCiAgInZhcmlvdXMiLAogICJ2YXN0IiwKICAidmF1bHQiLAogICJ2ZWhpY2xlIiwKICAidmVsdmV0IiwKICAidmVuZG9yIiwKICAidmVudHVyZSIsCiAgInZlbnVlIiwKICAidmVyYiIsCiAgInZlcmlmeSIsCiAgInZlcnNpb24iLAogICJ2ZXJ5IiwKICAidmVzc2VsIiwKICAidmV0ZXJhbiIsCiAgInZpYWJsZSIsCiAgInZpYnJhbnQiLAogICJ2aWNpb3VzIiwKICAidmljdG9yeSIsCiAgInZpZGVvIiwKICAidmlldyIsCiAgInZpbGxhZ2UiLAogICJ2aW50YWdlIiwKICAidmlvbGluIiwKICAidmlydHVhbCIsCiAgInZpcnVzIiwKICAidmlzYSIsCiAgInZpc2l0IiwKICAidmlzdWFsIiwKICAidml0YWwiLAogICJ2aXZpZCIsCiAgInZvY2FsIiwKICAidm9pY2UiLAogICJ2b2lkIiwKICAidm9sY2FubyIsCiAgInZvbHVtZSIsCiAgInZvdGUiLAogICJ2b3lhZ2UiLAogICJ3YWdlIiwKICAid2Fnb24iLAogICJ3YWl0IiwKICAid2FsayIsCiAgIndhbGwiLAogICJ3YWxudXQiLAogICJ3YW50IiwKICAid2FyZmFyZSIsCiAgIndhcm0iLAogICJ3YXJyaW9yIiwKICAid2FzaCIsCiAgIndhc3AiLAogICJ3YXN0ZSIsCiAgIndhdGVyIiwKICAid2F2ZSIsCiAgIndheSIsCiAgIndlYWx0aCIsCiAgIndlYXBvbiIsCiAgIndlYXIiLAogICJ3ZWFzZWwiLAogICJ3ZWF0aGVyIiwKICAid2ViIiwKICAid2VkZGluZyIsCiAgIndlZWtlbmQiLAogICJ3ZWlyZCIsCiAgIndlbGNvbWUiLAogICJ3ZXN0IiwKICAid2V0IiwKICAid2hhbGUiLAogICJ3aGF0IiwKICAid2hlYXQiLAogICJ3aGVlbCIsCiAgIndoZW4iLAogICJ3aGVyZSIsCiAgIndoaXAiLAogICJ3aGlzcGVyIiwKICAid2lkZSIsCiAgIndpZHRoIiwKICAid2lmZSIsCiAgIndpbGQiLAogICJ3aWxsIiwKICAid2luIiwKICAid2luZG93IiwKICAid2luZSIsCiAgIndpbmciLAogICJ3aW5rIiwKICAid2lubmVyIiwKICAid2ludGVyIiwKICAid2lyZSIsCiAgIndpc2RvbSIsCiAgIndpc2UiLAogICJ3aXNoIiwKICAid2l0bmVzcyIsCiAgIndvbGYiLAogICJ3b21hbiIsCiAgIndvbmRlciIsCiAgIndvb2QiLAogICJ3b29sIiwKICAid29yZCIsCiAgIndvcmsiLAogICJ3b3JsZCIsCiAgIndvcnJ5IiwKICAid29ydGgiLAogICJ3cmFwIiwKICAid3JlY2siLAogICJ3cmVzdGxlIiwKICAid3Jpc3QiLAogICJ3cml0ZSIsCiAgIndyb25nIiwKICAieWFyZCIsCiAgInllYXIiLAogICJ5ZWxsb3ciLAogICJ5b3UiLAogICJ5b3VuZyIsCiAgInlvdXRoIiwKICAiemVicmEiLAogICJ6ZXJvIiwKICAiem9uZSIsCiAgInpvbyIKXQoKfSx7fV0sMjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8vIFJlZmVyZW5jZSBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXBzL2Jsb2IvbWFzdGVyL2JpcC0wMDY2Lm1lZGlhd2lraQovLyBGb3JtYXQ6IDB4MzAgW3RvdGFsLWxlbmd0aF0gMHgwMiBbUi1sZW5ndGhdIFtSXSAweDAyIFtTLWxlbmd0aF0gW1NdCi8vIE5PVEU6IFNJR0hBU0ggYnl0ZSBpZ25vcmVkIEFORCByZXN0cmljdGVkLCB0cnVuY2F0ZSBiZWZvcmUgdXNlCgpmdW5jdGlvbiBjaGVjayAoYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlci5sZW5ndGggPCA4KSByZXR1cm4gZmFsc2UKICBpZiAoYnVmZmVyLmxlbmd0aCA+IDcyKSByZXR1cm4gZmFsc2UKICBpZiAoYnVmZmVyWzBdICE9PSAweDMwKSByZXR1cm4gZmFsc2UKICBpZiAoYnVmZmVyWzFdICE9PSBidWZmZXIubGVuZ3RoIC0gMikgcmV0dXJuIGZhbHNlCiAgaWYgKGJ1ZmZlclsyXSAhPT0gMHgwMikgcmV0dXJuIGZhbHNlCgogIHZhciBsZW5SID0gYnVmZmVyWzNdCiAgaWYgKGxlblIgPT09IDApIHJldHVybiBmYWxzZQogIGlmICg1ICsgbGVuUiA+PSBidWZmZXIubGVuZ3RoKSByZXR1cm4gZmFsc2UKICBpZiAoYnVmZmVyWzQgKyBsZW5SXSAhPT0gMHgwMikgcmV0dXJuIGZhbHNlCgogIHZhciBsZW5TID0gYnVmZmVyWzUgKyBsZW5SXQogIGlmIChsZW5TID09PSAwKSByZXR1cm4gZmFsc2UKICBpZiAoKDYgKyBsZW5SICsgbGVuUykgIT09IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBmYWxzZQoKICBpZiAoYnVmZmVyWzRdICYgMHg4MCkgcmV0dXJuIGZhbHNlCiAgaWYgKGxlblIgPiAxICYmIChidWZmZXJbNF0gPT09IDB4MDApICYmICEoYnVmZmVyWzVdICYgMHg4MCkpIHJldHVybiBmYWxzZQoKICBpZiAoYnVmZmVyW2xlblIgKyA2XSAmIDB4ODApIHJldHVybiBmYWxzZQogIGlmIChsZW5TID4gMSAmJiAoYnVmZmVyW2xlblIgKyA2XSA9PT0gMHgwMCkgJiYgIShidWZmZXJbbGVuUiArIDddICYgMHg4MCkpIHJldHVybiBmYWxzZQogIHJldHVybiB0cnVlCn0KCmZ1bmN0aW9uIGRlY29kZSAoYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlci5sZW5ndGggPCA4KSB0aHJvdyBuZXcgRXJyb3IoJ0RFUiBzZXF1ZW5jZSBsZW5ndGggaXMgdG9vIHNob3J0JykKICBpZiAoYnVmZmVyLmxlbmd0aCA+IDcyKSB0aHJvdyBuZXcgRXJyb3IoJ0RFUiBzZXF1ZW5jZSBsZW5ndGggaXMgdG9vIGxvbmcnKQogIGlmIChidWZmZXJbMF0gIT09IDB4MzApIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgREVSIHNlcXVlbmNlJykKICBpZiAoYnVmZmVyWzFdICE9PSBidWZmZXIubGVuZ3RoIC0gMikgdGhyb3cgbmV3IEVycm9yKCdERVIgc2VxdWVuY2UgbGVuZ3RoIGlzIGludmFsaWQnKQogIGlmIChidWZmZXJbMl0gIT09IDB4MDIpIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgREVSIGludGVnZXInKQoKICB2YXIgbGVuUiA9IGJ1ZmZlclszXQogIGlmIChsZW5SID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ1IgbGVuZ3RoIGlzIHplcm8nKQogIGlmICg1ICsgbGVuUiA+PSBidWZmZXIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ1IgbGVuZ3RoIGlzIHRvbyBsb25nJykKICBpZiAoYnVmZmVyWzQgKyBsZW5SXSAhPT0gMHgwMikgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBERVIgaW50ZWdlciAoMiknKQoKICB2YXIgbGVuUyA9IGJ1ZmZlcls1ICsgbGVuUl0KICBpZiAobGVuUyA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdTIGxlbmd0aCBpcyB6ZXJvJykKICBpZiAoKDYgKyBsZW5SICsgbGVuUykgIT09IGJ1ZmZlci5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignUyBsZW5ndGggaXMgaW52YWxpZCcpCgogIGlmIChidWZmZXJbNF0gJiAweDgwKSB0aHJvdyBuZXcgRXJyb3IoJ1IgdmFsdWUgaXMgbmVnYXRpdmUnKQogIGlmIChsZW5SID4gMSAmJiAoYnVmZmVyWzRdID09PSAweDAwKSAmJiAhKGJ1ZmZlcls1XSAmIDB4ODApKSB0aHJvdyBuZXcgRXJyb3IoJ1IgdmFsdWUgZXhjZXNzaXZlbHkgcGFkZGVkJykKCiAgaWYgKGJ1ZmZlcltsZW5SICsgNl0gJiAweDgwKSB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgaXMgbmVnYXRpdmUnKQogIGlmIChsZW5TID4gMSAmJiAoYnVmZmVyW2xlblIgKyA2XSA9PT0gMHgwMCkgJiYgIShidWZmZXJbbGVuUiArIDddICYgMHg4MCkpIHRocm93IG5ldyBFcnJvcignUyB2YWx1ZSBleGNlc3NpdmVseSBwYWRkZWQnKQoKICAvLyBub24tQklQNjYgLSBleHRyYWN0IFIsIFMgdmFsdWVzCiAgcmV0dXJuIHsKICAgIHI6IGJ1ZmZlci5zbGljZSg0LCA0ICsgbGVuUiksCiAgICBzOiBidWZmZXIuc2xpY2UoNiArIGxlblIpCiAgfQp9CgovKgogKiBFeHBlY3RzIHIgYW5kIHMgdG8gYmUgcG9zaXRpdmUgREVSIGludGVnZXJzLgogKgogKiBUaGUgREVSIGZvcm1hdCB1c2VzIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBhcyBhIHNpZ24gYml0ICgmIDB4ODApLgogKiBJZiB0aGUgc2lnbmlmaWNhbnQgYml0IGlzIHNldCBBTkQgdGhlIGludGVnZXIgaXMgcG9zaXRpdmUsIGEgMHgwMCBpcyBwcmVwZW5kZWQuCiAqCiAqIEV4YW1wbGVzOgogKgogKiAgICAgIDAgPT4gICAgIDB4MDAKICogICAgICAxID0+ICAgICAweDAxCiAqICAgICAtMSA9PiAgICAgMHhmZgogKiAgICAxMjcgPT4gICAgIDB4N2YKICogICAtMTI3ID0+ICAgICAweDgxCiAqICAgIDEyOCA9PiAgIDB4MDA4MAogKiAgIC0xMjggPT4gICAgIDB4ODAKICogICAgMjU1ID0+ICAgMHgwMGZmCiAqICAgLTI1NSA9PiAgIDB4ZmYwMQogKiAgMTYzMDAgPT4gICAweDNmYWMKICogLTE2MzAwID0+ICAgMHhjMDU0CiAqICA2MjMwMCA9PiAweDAwZjM1YwogKiAtNjIzMDAgPT4gMHhmZjBjYTQKKi8KZnVuY3Rpb24gZW5jb2RlIChyLCBzKSB7CiAgdmFyIGxlblIgPSByLmxlbmd0aAogIHZhciBsZW5TID0gcy5sZW5ndGgKICBpZiAobGVuUiA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdSIGxlbmd0aCBpcyB6ZXJvJykKICBpZiAobGVuUyA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdTIGxlbmd0aCBpcyB6ZXJvJykKICBpZiAobGVuUiA+IDMzKSB0aHJvdyBuZXcgRXJyb3IoJ1IgbGVuZ3RoIGlzIHRvbyBsb25nJykKICBpZiAobGVuUyA+IDMzKSB0aHJvdyBuZXcgRXJyb3IoJ1MgbGVuZ3RoIGlzIHRvbyBsb25nJykKICBpZiAoclswXSAmIDB4ODApIHRocm93IG5ldyBFcnJvcignUiB2YWx1ZSBpcyBuZWdhdGl2ZScpCiAgaWYgKHNbMF0gJiAweDgwKSB0aHJvdyBuZXcgRXJyb3IoJ1MgdmFsdWUgaXMgbmVnYXRpdmUnKQogIGlmIChsZW5SID4gMSAmJiAoclswXSA9PT0gMHgwMCkgJiYgIShyWzFdICYgMHg4MCkpIHRocm93IG5ldyBFcnJvcignUiB2YWx1ZSBleGNlc3NpdmVseSBwYWRkZWQnKQogIGlmIChsZW5TID4gMSAmJiAoc1swXSA9PT0gMHgwMCkgJiYgIShzWzFdICYgMHg4MCkpIHRocm93IG5ldyBFcnJvcignUyB2YWx1ZSBleGNlc3NpdmVseSBwYWRkZWQnKQoKICB2YXIgc2lnbmF0dXJlID0gbmV3IEJ1ZmZlcig2ICsgbGVuUiArIGxlblMpCgogIC8vIDB4MzAgW3RvdGFsLWxlbmd0aF0gMHgwMiBbUi1sZW5ndGhdIFtSXSAweDAyIFtTLWxlbmd0aF0gW1NdCiAgc2lnbmF0dXJlWzBdID0gMHgzMAogIHNpZ25hdHVyZVsxXSA9IHNpZ25hdHVyZS5sZW5ndGggLSAyCiAgc2lnbmF0dXJlWzJdID0gMHgwMgogIHNpZ25hdHVyZVszXSA9IHIubGVuZ3RoCiAgci5jb3B5KHNpZ25hdHVyZSwgNCkKICBzaWduYXR1cmVbNCArIGxlblJdID0gMHgwMgogIHNpZ25hdHVyZVs1ICsgbGVuUl0gPSBzLmxlbmd0aAogIHMuY29weShzaWduYXR1cmUsIDYgKyBsZW5SKQoKICByZXR1cm4gc2lnbmF0dXJlCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGNoZWNrOiBjaGVjaywKICBkZWNvZGU6IGRlY29kZSwKICBlbmNvZGU6IGVuY29kZQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDI0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYnM1OGNoZWNrID0gcmVxdWlyZSgnYnM1OGNoZWNrJykKdmFyIGJzY3JpcHQgPSByZXF1aXJlKCcuL3NjcmlwdCcpCnZhciBuZXR3b3JrcyA9IHJlcXVpcmUoJy4vbmV0d29ya3MnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCgpmdW5jdGlvbiBmcm9tQmFzZTU4Q2hlY2sgKGFkZHJlc3MpIHsKICB2YXIgcGF5bG9hZCA9IGJzNThjaGVjay5kZWNvZGUoYWRkcmVzcykKICBpZiAocGF5bG9hZC5sZW5ndGggPCAyMSkgdGhyb3cgbmV3IFR5cGVFcnJvcihhZGRyZXNzICsgJyBpcyB0b28gc2hvcnQnKQogIGlmIChwYXlsb2FkLmxlbmd0aCA+IDIxKSB0aHJvdyBuZXcgVHlwZUVycm9yKGFkZHJlc3MgKyAnIGlzIHRvbyBsb25nJykKCiAgdmFyIHZlcnNpb24gPSBwYXlsb2FkWzBdCiAgdmFyIGhhc2ggPSBwYXlsb2FkLnNsaWNlKDEpCgogIHJldHVybiB7IGhhc2g6IGhhc2gsIHZlcnNpb246IHZlcnNpb24gfQp9CgpmdW5jdGlvbiBmcm9tT3V0cHV0U2NyaXB0IChzY3JpcHRQdWJLZXksIG5ldHdvcmspIHsKICBuZXR3b3JrID0gbmV0d29yayB8fCBuZXR3b3Jrcy5iaXRjb2luCgogIGlmIChic2NyaXB0LmlzUHViS2V5SGFzaE91dHB1dChzY3JpcHRQdWJLZXkpKSByZXR1cm4gdG9CYXNlNThDaGVjayhic2NyaXB0LmNvbXBpbGUoc2NyaXB0UHViS2V5KS5zbGljZSgzLCAyMyksIG5ldHdvcmsucHViS2V5SGFzaCkKICBpZiAoYnNjcmlwdC5pc1NjcmlwdEhhc2hPdXRwdXQoc2NyaXB0UHViS2V5KSkgcmV0dXJuIHRvQmFzZTU4Q2hlY2soYnNjcmlwdC5jb21waWxlKHNjcmlwdFB1YktleSkuc2xpY2UoMiwgMjIpLCBuZXR3b3JrLnNjcmlwdEhhc2gpCgogIHRocm93IG5ldyBFcnJvcihic2NyaXB0LnRvQVNNKHNjcmlwdFB1YktleSkgKyAnIGhhcyBubyBtYXRjaGluZyBBZGRyZXNzJykKfQoKZnVuY3Rpb24gdG9CYXNlNThDaGVjayAoaGFzaCwgdmVyc2lvbikgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5IYXNoMTYwYml0LCB0eXBlcy5VSW50OCksIGFyZ3VtZW50cykKCiAgdmFyIHBheWxvYWQgPSBuZXcgQnVmZmVyKDIxKQogIHBheWxvYWQud3JpdGVVSW50OCh2ZXJzaW9uLCAwKQogIGhhc2guY29weShwYXlsb2FkLCAxKQoKICByZXR1cm4gYnM1OGNoZWNrLmVuY29kZShwYXlsb2FkKQp9CgpmdW5jdGlvbiB0b091dHB1dFNjcmlwdCAoYWRkcmVzcywgbmV0d29yaykgewogIG5ldHdvcmsgPSBuZXR3b3JrIHx8IG5ldHdvcmtzLmJpdGNvaW4KCiAgdmFyIGRlY29kZSA9IGZyb21CYXNlNThDaGVjayhhZGRyZXNzKQogIGlmIChkZWNvZGUudmVyc2lvbiA9PT0gbmV0d29yay5wdWJLZXlIYXNoKSByZXR1cm4gYnNjcmlwdC5wdWJLZXlIYXNoT3V0cHV0KGRlY29kZS5oYXNoKQogIGlmIChkZWNvZGUudmVyc2lvbiA9PT0gbmV0d29yay5zY3JpcHRIYXNoKSByZXR1cm4gYnNjcmlwdC5zY3JpcHRIYXNoT3V0cHV0KGRlY29kZS5oYXNoKQoKICB0aHJvdyBuZXcgRXJyb3IoYWRkcmVzcyArICcgaGFzIG5vIG1hdGNoaW5nIFNjcmlwdCcpCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGZyb21CYXNlNThDaGVjazogZnJvbUJhc2U1OENoZWNrLAogIGZyb21PdXRwdXRTY3JpcHQ6IGZyb21PdXRwdXRTY3JpcHQsCiAgdG9CYXNlNThDaGVjazogdG9CYXNlNThDaGVjaywKICB0b091dHB1dFNjcmlwdDogdG9PdXRwdXRTY3JpcHQKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vbmV0d29ya3MiOjM0LCIuL3NjcmlwdCI6MzYsIi4vdHlwZXMiOjQwLCJiczU4Y2hlY2siOjc0LCJidWZmZXIiOjcwLCJ0eXBlZm9yY2UiOjE3M31dLDI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYnVmZmVydXRpbHMgPSByZXF1aXJlKCcuL2J1ZmZlcnV0aWxzJykKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBjb21wYXJlID0gcmVxdWlyZSgnYnVmZmVyLWNvbXBhcmUnKQoKdmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi90cmFuc2FjdGlvbicpCgpmdW5jdGlvbiBCbG9jayAoKSB7CiAgdGhpcy52ZXJzaW9uID0gMQogIHRoaXMucHJldkhhc2ggPSBudWxsCiAgdGhpcy5tZXJrbGVSb290ID0gbnVsbAogIHRoaXMudGltZXN0YW1wID0gMAogIHRoaXMuYml0cyA9IDAKICB0aGlzLm5vbmNlID0gMAp9CgpCbG9jay5mcm9tQnVmZmVyID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogIGlmIChidWZmZXIubGVuZ3RoIDwgODApIHRocm93IG5ldyBFcnJvcignQnVmZmVyIHRvbyBzbWFsbCAoPCA4MCBieXRlcyknKQoKICB2YXIgb2Zmc2V0ID0gMAogIGZ1bmN0aW9uIHJlYWRTbGljZSAobikgewogICAgb2Zmc2V0ICs9IG4KICAgIHJldHVybiBidWZmZXIuc2xpY2Uob2Zmc2V0IC0gbiwgb2Zmc2V0KQogIH0KCiAgZnVuY3Rpb24gcmVhZFVJbnQzMiAoKSB7CiAgICB2YXIgaSA9IGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0KQogICAgb2Zmc2V0ICs9IDQKICAgIHJldHVybiBpCiAgfQoKICB2YXIgYmxvY2sgPSBuZXcgQmxvY2soKQogIGJsb2NrLnZlcnNpb24gPSByZWFkVUludDMyKCkKICBibG9jay5wcmV2SGFzaCA9IHJlYWRTbGljZSgzMikKICBibG9jay5tZXJrbGVSb290ID0gcmVhZFNsaWNlKDMyKQogIGJsb2NrLnRpbWVzdGFtcCA9IHJlYWRVSW50MzIoKQogIGJsb2NrLmJpdHMgPSByZWFkVUludDMyKCkKICBibG9jay5ub25jZSA9IHJlYWRVSW50MzIoKQoKICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gODApIHJldHVybiBibG9jawoKICBmdW5jdGlvbiByZWFkVmFySW50ICgpIHsKICAgIHZhciB2aSA9IGJ1ZmZlcnV0aWxzLnJlYWRWYXJJbnQoYnVmZmVyLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gdmkuc2l6ZQogICAgcmV0dXJuIHZpLm51bWJlcgogIH0KCiAgZnVuY3Rpb24gcmVhZFRyYW5zYWN0aW9uICgpIHsKICAgIHZhciB0eCA9IFRyYW5zYWN0aW9uLmZyb21CdWZmZXIoYnVmZmVyLnNsaWNlKG9mZnNldCksIHRydWUpCgogICAgb2Zmc2V0ICs9IHR4LmJ5dGVMZW5ndGgoKQogICAgcmV0dXJuIHR4CiAgfQoKICB2YXIgblRyYW5zYWN0aW9ucyA9IHJlYWRWYXJJbnQoKQogIGJsb2NrLnRyYW5zYWN0aW9ucyA9IFtdCgogIGZvciAodmFyIGkgPSAwOyBpIDwgblRyYW5zYWN0aW9uczsgKytpKSB7CiAgICB2YXIgdHggPSByZWFkVHJhbnNhY3Rpb24oKQogICAgYmxvY2sudHJhbnNhY3Rpb25zLnB1c2godHgpCiAgfQoKICByZXR1cm4gYmxvY2sKfQoKQmxvY2suZnJvbUhleCA9IGZ1bmN0aW9uIChoZXgpIHsKICByZXR1cm4gQmxvY2suZnJvbUJ1ZmZlcihuZXcgQnVmZmVyKGhleCwgJ2hleCcpKQp9CgpCbG9jay5wcm90b3R5cGUuZ2V0SGFzaCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KHRoaXMudG9CdWZmZXIodHJ1ZSkpCn0KCkJsb2NrLnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gW10ucmV2ZXJzZS5jYWxsKHRoaXMuZ2V0SGFzaCgpKS50b1N0cmluZygnaGV4JykKfQoKQmxvY2sucHJvdG90eXBlLmdldFVUQ0RhdGUgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKSAvLyBlcG9jaAogIGRhdGUuc2V0VVRDU2Vjb25kcyh0aGlzLnRpbWVzdGFtcCkKCiAgcmV0dXJuIGRhdGUKfQoKQmxvY2sucHJvdG90eXBlLnRvQnVmZmVyID0gZnVuY3Rpb24gKGhlYWRlcnNPbmx5KSB7CiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoODApCgogIHZhciBvZmZzZXQgPSAwCiAgZnVuY3Rpb24gd3JpdGVTbGljZSAoc2xpY2UpIHsKICAgIHNsaWNlLmNvcHkoYnVmZmVyLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gc2xpY2UubGVuZ3RoCiAgfQoKICBmdW5jdGlvbiB3cml0ZVVJbnQzMiAoaSkgewogICAgYnVmZmVyLndyaXRlVUludDMyTEUoaSwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IDQKICB9CgogIHdyaXRlVUludDMyKHRoaXMudmVyc2lvbikKICB3cml0ZVNsaWNlKHRoaXMucHJldkhhc2gpCiAgd3JpdGVTbGljZSh0aGlzLm1lcmtsZVJvb3QpCiAgd3JpdGVVSW50MzIodGhpcy50aW1lc3RhbXApCiAgd3JpdGVVSW50MzIodGhpcy5iaXRzKQogIHdyaXRlVUludDMyKHRoaXMubm9uY2UpCgogIGlmIChoZWFkZXJzT25seSB8fCAhdGhpcy50cmFuc2FjdGlvbnMpIHJldHVybiBidWZmZXIKCiAgdmFyIHR4TGVuQnVmZmVyID0gYnVmZmVydXRpbHMudmFySW50QnVmZmVyKHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aCkKICB2YXIgdHhCdWZmZXJzID0gdGhpcy50cmFuc2FjdGlvbnMubWFwKGZ1bmN0aW9uICh0eCkgewogICAgcmV0dXJuIHR4LnRvQnVmZmVyKCkKICB9KQoKICByZXR1cm4gQnVmZmVyLmNvbmNhdChbYnVmZmVyLCB0eExlbkJ1ZmZlcl0uY29uY2F0KHR4QnVmZmVycykpCn0KCkJsb2NrLnByb3RvdHlwZS50b0hleCA9IGZ1bmN0aW9uIChoZWFkZXJzT25seSkgewogIHJldHVybiB0aGlzLnRvQnVmZmVyKGhlYWRlcnNPbmx5KS50b1N0cmluZygnaGV4JykKfQoKQmxvY2suY2FsY3VsYXRlVGFyZ2V0ID0gZnVuY3Rpb24gKGJpdHMpIHsKICB2YXIgZXhwb25lbnQgPSAoKGJpdHMgJiAweGZmMDAwMDAwKSA+PiAyNCkgLSAzCiAgdmFyIG1hbnRpc3NhID0gYml0cyAmIDB4MDA3ZmZmZmYKICB2YXIgaSA9IDMxIC0gZXhwb25lbnQKCiAgdmFyIHRhcmdldCA9IG5ldyBCdWZmZXIoMzIpCiAgdGFyZ2V0LmZpbGwoMCkKCiAgdGFyZ2V0W2ldID0gbWFudGlzc2EgJiAweGZmCiAgdGFyZ2V0W2kgLSAxXSA9IG1hbnRpc3NhID4+IDgKICB0YXJnZXRbaSAtIDJdID0gbWFudGlzc2EgPj4gMTYKICB0YXJnZXRbaSAtIDNdID0gbWFudGlzc2EgPj4gMjQKCiAgcmV0dXJuIHRhcmdldAp9CgpCbG9jay5wcm90b3R5cGUuY2hlY2tQcm9vZk9mV29yayA9IGZ1bmN0aW9uICgpIHsKICB2YXIgaGFzaCA9IFtdLnJldmVyc2UuY2FsbCh0aGlzLmdldEhhc2goKSkKICB2YXIgdGFyZ2V0ID0gQmxvY2suY2FsY3VsYXRlVGFyZ2V0KHRoaXMuYml0cykKCiAgcmV0dXJuIGNvbXBhcmUoaGFzaCwgdGFyZ2V0KSA8PSAwCn0KCm1vZHVsZS5leHBvcnRzID0gQmxvY2sKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2J1ZmZlcnV0aWxzIjoyNiwiLi9jcnlwdG8iOjI3LCIuL3RyYW5zYWN0aW9uIjozOCwiYnVmZmVyIjo3MCwiYnVmZmVyLWNvbXBhcmUiOjc1fV0sMjY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBvcGNvZGVzID0gcmVxdWlyZSgnLi9vcGNvZGVzJykKCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2Jsb2IvbWFzdGVyL2luZGV4LmpzI0wxMTI3CmZ1bmN0aW9uIHZlcmlmdWludCAodmFsdWUsIG1heCkgewogIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCB3cml0ZSBhIG5vbi1udW1iZXIgYXMgYSBudW1iZXInKQogIGlmICh2YWx1ZSA8IDApIHRocm93IG5ldyBFcnJvcignc3BlY2lmaWVkIGEgbmVnYXRpdmUgdmFsdWUgZm9yIHdyaXRpbmcgYW4gdW5zaWduZWQgdmFsdWUnKQogIGlmICh2YWx1ZSA+IG1heCkgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZSBpcyBsYXJnZXIgdGhhbiBtYXhpbXVtIHZhbHVlIGZvciB0eXBlJykKICBpZiAoTWF0aC5mbG9vcih2YWx1ZSkgIT09IHZhbHVlKSB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlIGhhcyBhIGZyYWN0aW9uYWwgY29tcG9uZW50JykKfQoKZnVuY3Rpb24gcHVzaERhdGFTaXplIChpKSB7CiAgcmV0dXJuIGkgPCBvcGNvZGVzLk9QX1BVU0hEQVRBMSA/IDEKICA6IGkgPCAweGZmID8gMgogIDogaSA8IDB4ZmZmZiA/IDMKICA6IDUKfQoKZnVuY3Rpb24gcmVhZFB1c2hEYXRhSW50IChidWZmZXIsIG9mZnNldCkgewogIHZhciBvcGNvZGUgPSBidWZmZXIucmVhZFVJbnQ4KG9mZnNldCkKICB2YXIgbnVtYmVyLCBzaXplCgogIC8vIH42IGJpdAogIGlmIChvcGNvZGUgPCBvcGNvZGVzLk9QX1BVU0hEQVRBMSkgewogICAgbnVtYmVyID0gb3Bjb2RlCiAgICBzaXplID0gMQoKICAvLyA4IGJpdAogIH0gZWxzZSBpZiAob3Bjb2RlID09PSBvcGNvZGVzLk9QX1BVU0hEQVRBMSkgewogICAgaWYgKG9mZnNldCArIDIgPiBidWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbAogICAgbnVtYmVyID0gYnVmZmVyLnJlYWRVSW50OChvZmZzZXQgKyAxKQogICAgc2l6ZSA9IDIKCiAgLy8gMTYgYml0CiAgfSBlbHNlIGlmIChvcGNvZGUgPT09IG9wY29kZXMuT1BfUFVTSERBVEEyKSB7CiAgICBpZiAob2Zmc2V0ICsgMyA+IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsCiAgICBudW1iZXIgPSBidWZmZXIucmVhZFVJbnQxNkxFKG9mZnNldCArIDEpCiAgICBzaXplID0gMwoKICAvLyAzMiBiaXQKICB9IGVsc2UgewogICAgaWYgKG9mZnNldCArIDUgPiBidWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbAogICAgaWYgKG9wY29kZSAhPT0gb3Bjb2Rlcy5PUF9QVVNIREFUQTQpIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBvcGNvZGUnKQoKICAgIG51bWJlciA9IGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0ICsgMSkKICAgIHNpemUgPSA1CiAgfQoKICByZXR1cm4gewogICAgb3Bjb2RlOiBvcGNvZGUsCiAgICBudW1iZXI6IG51bWJlciwKICAgIHNpemU6IHNpemUKICB9Cn0KCmZ1bmN0aW9uIHJlYWRVSW50NjRMRSAoYnVmZmVyLCBvZmZzZXQpIHsKICB2YXIgYSA9IGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0KQogIHZhciBiID0gYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQgKyA0KQogIGIgKj0gMHgxMDAwMDAwMDAKCiAgdmVyaWZ1aW50KGIgKyBhLCAweDAwMWZmZmZmZmZmZmZmZmYpCgogIHJldHVybiBiICsgYQp9CgpmdW5jdGlvbiByZWFkVmFySW50IChidWZmZXIsIG9mZnNldCkgewogIHZhciB0ID0gYnVmZmVyLnJlYWRVSW50OChvZmZzZXQpCiAgdmFyIG51bWJlciwgc2l6ZQoKICAvLyA4IGJpdAogIGlmICh0IDwgMjUzKSB7CiAgICBudW1iZXIgPSB0CiAgICBzaXplID0gMQoKICAvLyAxNiBiaXQKICB9IGVsc2UgaWYgKHQgPCAyNTQpIHsKICAgIG51bWJlciA9IGJ1ZmZlci5yZWFkVUludDE2TEUob2Zmc2V0ICsgMSkKICAgIHNpemUgPSAzCgogIC8vIDMyIGJpdAogIH0gZWxzZSBpZiAodCA8IDI1NSkgewogICAgbnVtYmVyID0gYnVmZmVyLnJlYWRVSW50MzJMRShvZmZzZXQgKyAxKQogICAgc2l6ZSA9IDUKCiAgLy8gNjQgYml0CiAgfSBlbHNlIHsKICAgIG51bWJlciA9IHJlYWRVSW50NjRMRShidWZmZXIsIG9mZnNldCArIDEpCiAgICBzaXplID0gOQogIH0KCiAgcmV0dXJuIHsKICAgIG51bWJlcjogbnVtYmVyLAogICAgc2l6ZTogc2l6ZQogIH0KfQoKZnVuY3Rpb24gd3JpdGVQdXNoRGF0YUludCAoYnVmZmVyLCBudW1iZXIsIG9mZnNldCkgewogIHZhciBzaXplID0gcHVzaERhdGFTaXplKG51bWJlcikKCiAgLy8gfjYgYml0CiAgaWYgKHNpemUgPT09IDEpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG51bWJlciwgb2Zmc2V0KQoKICAvLyA4IGJpdAogIH0gZWxzZSBpZiAoc2l6ZSA9PT0gMikgewogICAgYnVmZmVyLndyaXRlVUludDgob3Bjb2Rlcy5PUF9QVVNIREFUQTEsIG9mZnNldCkKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG51bWJlciwgb2Zmc2V0ICsgMSkKCiAgLy8gMTYgYml0CiAgfSBlbHNlIGlmIChzaXplID09PSAzKSB7CiAgICBidWZmZXIud3JpdGVVSW50OChvcGNvZGVzLk9QX1BVU0hEQVRBMiwgb2Zmc2V0KQogICAgYnVmZmVyLndyaXRlVUludDE2TEUobnVtYmVyLCBvZmZzZXQgKyAxKQoKICAvLyAzMiBiaXQKICB9IGVsc2UgewogICAgYnVmZmVyLndyaXRlVUludDgob3Bjb2Rlcy5PUF9QVVNIREFUQTQsIG9mZnNldCkKICAgIGJ1ZmZlci53cml0ZVVJbnQzMkxFKG51bWJlciwgb2Zmc2V0ICsgMSkKICB9CgogIHJldHVybiBzaXplCn0KCmZ1bmN0aW9uIHdyaXRlVUludDY0TEUgKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCkgewogIHZlcmlmdWludCh2YWx1ZSwgMHgwMDFmZmZmZmZmZmZmZmZmKQoKICBidWZmZXIud3JpdGVJbnQzMkxFKHZhbHVlICYgLTEsIG9mZnNldCkKICBidWZmZXIud3JpdGVVSW50MzJMRShNYXRoLmZsb29yKHZhbHVlIC8gMHgxMDAwMDAwMDApLCBvZmZzZXQgKyA0KQp9CgpmdW5jdGlvbiB2YXJJbnRTaXplIChpKSB7CiAgcmV0dXJuIGkgPCAyNTMgPyAxCiAgOiBpIDwgMHgxMDAwMCA/IDMKICA6IGkgPCAweDEwMDAwMDAwMCA/IDUKICA6IDkKfQoKZnVuY3Rpb24gd3JpdGVWYXJJbnQgKGJ1ZmZlciwgbnVtYmVyLCBvZmZzZXQpIHsKICB2YXIgc2l6ZSA9IHZhckludFNpemUobnVtYmVyKQoKICAvLyA4IGJpdAogIGlmIChzaXplID09PSAxKSB7CiAgICBidWZmZXIud3JpdGVVSW50OChudW1iZXIsIG9mZnNldCkKCiAgLy8gMTYgYml0CiAgfSBlbHNlIGlmIChzaXplID09PSAzKSB7CiAgICBidWZmZXIud3JpdGVVSW50OCgyNTMsIG9mZnNldCkKICAgIGJ1ZmZlci53cml0ZVVJbnQxNkxFKG51bWJlciwgb2Zmc2V0ICsgMSkKCiAgLy8gMzIgYml0CiAgfSBlbHNlIGlmIChzaXplID09PSA1KSB7CiAgICBidWZmZXIud3JpdGVVSW50OCgyNTQsIG9mZnNldCkKICAgIGJ1ZmZlci53cml0ZVVJbnQzMkxFKG51bWJlciwgb2Zmc2V0ICsgMSkKCiAgLy8gNjQgYml0CiAgfSBlbHNlIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KDI1NSwgb2Zmc2V0KQogICAgd3JpdGVVSW50NjRMRShidWZmZXIsIG51bWJlciwgb2Zmc2V0ICsgMSkKICB9CgogIHJldHVybiBzaXplCn0KCmZ1bmN0aW9uIHZhckludEJ1ZmZlciAoaSkgewogIHZhciBzaXplID0gdmFySW50U2l6ZShpKQogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKHNpemUpCiAgd3JpdGVWYXJJbnQoYnVmZmVyLCBpLCAwKQoKICByZXR1cm4gYnVmZmVyCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGVxdWFsOiByZXF1aXJlKCdidWZmZXItZXF1YWxzJyksCiAgcHVzaERhdGFTaXplOiBwdXNoRGF0YVNpemUsCiAgcmVhZFB1c2hEYXRhSW50OiByZWFkUHVzaERhdGFJbnQsCiAgcmVhZFVJbnQ2NExFOiByZWFkVUludDY0TEUsCiAgcmVhZFZhckludDogcmVhZFZhckludCwKICByZXZlcnNlOiByZXF1aXJlKCdidWZmZXItcmV2ZXJzZScpLAogIHZhckludEJ1ZmZlcjogdmFySW50QnVmZmVyLAogIHZhckludFNpemU6IHZhckludFNpemUsCiAgd3JpdGVQdXNoRGF0YUludDogd3JpdGVQdXNoRGF0YUludCwKICB3cml0ZVVJbnQ2NExFOiB3cml0ZVVJbnQ2NExFLAogIHdyaXRlVmFySW50OiB3cml0ZVZhckludAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9vcGNvZGVzIjozNSwiYnVmZmVyIjo3MCwiYnVmZmVyLWVxdWFscyI6NzYsImJ1ZmZlci1yZXZlcnNlIjo3N31dLDI3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCgpmdW5jdGlvbiBoYXNoMTYwIChidWZmZXIpIHsKICByZXR1cm4gcmlwZW1kMTYwKHNoYTI1NihidWZmZXIpKQp9CgpmdW5jdGlvbiBoYXNoMjU2IChidWZmZXIpIHsKICByZXR1cm4gc2hhMjU2KHNoYTI1NihidWZmZXIpKQp9CgpmdW5jdGlvbiByaXBlbWQxNjAgKGJ1ZmZlcikgewogIHJldHVybiBjcmVhdGVIYXNoKCdybWQxNjAnKS51cGRhdGUoYnVmZmVyKS5kaWdlc3QoKQp9CgpmdW5jdGlvbiBzaGExIChidWZmZXIpIHsKICByZXR1cm4gY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShidWZmZXIpLmRpZ2VzdCgpCn0KCmZ1bmN0aW9uIHNoYTI1NiAoYnVmZmVyKSB7CiAgcmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShidWZmZXIpLmRpZ2VzdCgpCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGhhc2gxNjA6IGhhc2gxNjAsCiAgaGFzaDI1NjogaGFzaDI1NiwKICByaXBlbWQxNjA6IHJpcGVtZDE2MCwKICBzaGExOiBzaGExLAogIHNoYTI1Njogc2hhMjU2Cn0KCn0seyJjcmVhdGUtaGFzaCI6ODJ9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGNyZWF0ZUhtYWMgPSByZXF1aXJlKCdjcmVhdGUtaG1hYycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKCnZhciBCaWdJbnRlZ2VyID0gcmVxdWlyZSgnYmlnaScpCnZhciBFQ1NpZ25hdHVyZSA9IHJlcXVpcmUoJy4vZWNzaWduYXR1cmUnKQoKdmFyIFpFUk8gPSBuZXcgQnVmZmVyKFswXSkKdmFyIE9ORSA9IG5ldyBCdWZmZXIoWzFdKQoKdmFyIGVjdXJ2ZSA9IHJlcXVpcmUoJ2VjdXJ2ZScpCnZhciBzZWNwMjU2azEgPSBlY3VydmUuZ2V0Q3VydmVCeU5hbWUoJ3NlY3AyNTZrMScpCgovLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjk3OSNzZWN0aW9uLTMuMgpmdW5jdGlvbiBkZXRlcm1pbmlzdGljR2VuZXJhdGVLIChoYXNoLCB4LCBjaGVja1NpZykgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgKICAgIHR5cGVzLkhhc2gyNTZiaXQsCiAgICB0eXBlcy5CdWZmZXIyNTZiaXQsCiAgICB0eXBlcy5GdW5jdGlvbgogICksIGFyZ3VtZW50cykKCiAgdmFyIGsgPSBuZXcgQnVmZmVyKDMyKQogIHZhciB2ID0gbmV3IEJ1ZmZlcigzMikKCiAgLy8gU3RlcCBBLCBpZ25vcmVkIGFzIGhhc2ggYWxyZWFkeSBwcm92aWRlZAogIC8vIFN0ZXAgQgogIHYuZmlsbCgxKQoKICAvLyBTdGVwIEMKICBrLmZpbGwoMCkKCiAgLy8gU3RlcCBECiAgayA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspCiAgICAudXBkYXRlKHYpCiAgICAudXBkYXRlKFpFUk8pCiAgICAudXBkYXRlKHgpCiAgICAudXBkYXRlKGhhc2gpCiAgICAuZGlnZXN0KCkKCiAgLy8gU3RlcCBFCiAgdiA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspLnVwZGF0ZSh2KS5kaWdlc3QoKQoKICAvLyBTdGVwIEYKICBrID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykKICAgIC51cGRhdGUodikKICAgIC51cGRhdGUoT05FKQogICAgLnVwZGF0ZSh4KQogICAgLnVwZGF0ZShoYXNoKQogICAgLmRpZ2VzdCgpCgogIC8vIFN0ZXAgRwogIHYgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKS51cGRhdGUodikuZGlnZXN0KCkKCiAgLy8gU3RlcCBIMS9IMmEsIGlnbm9yZWQgYXMgdGxlbiA9PT0gcWxlbiAoMjU2IGJpdCkKICAvLyBTdGVwIEgyYgogIHYgPSBjcmVhdGVIbWFjKCdzaGEyNTYnLCBrKS51cGRhdGUodikuZGlnZXN0KCkKCiAgdmFyIFQgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIodikKCiAgLy8gU3RlcCBIMywgcmVwZWF0IHVudGlsIFQgaXMgd2l0aGluIHRoZSBpbnRlcnZhbCBbMSwgbiAtIDFdIGFuZCBpcyBzdWl0YWJsZSBmb3IgRUNEU0EKICB3aGlsZSAoVC5zaWdudW0oKSA8PSAwIHx8IFQuY29tcGFyZVRvKHNlY3AyNTZrMS5uKSA+PSAwIHx8ICFjaGVja1NpZyhUKSkgewogICAgayA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspCiAgICAgIC51cGRhdGUodikKICAgICAgLnVwZGF0ZShaRVJPKQogICAgICAuZGlnZXN0KCkKCiAgICB2ID0gY3JlYXRlSG1hYygnc2hhMjU2JywgaykudXBkYXRlKHYpLmRpZ2VzdCgpCgogICAgLy8gU3RlcCBIMS9IMmEsIGFnYWluLCBpZ25vcmVkIGFzIHRsZW4gPT09IHFsZW4gKDI1NiBiaXQpCiAgICAvLyBTdGVwIEgyYiBhZ2FpbgogICAgdiA9IGNyZWF0ZUhtYWMoJ3NoYTI1NicsIGspLnVwZGF0ZSh2KS5kaWdlc3QoKQogICAgVCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcih2KQogIH0KCiAgcmV0dXJuIFQKfQoKdmFyIE5fT1ZFUl9UV08gPSBzZWNwMjU2azEubi5zaGlmdFJpZ2h0KDEpCgpmdW5jdGlvbiBzaWduIChoYXNoLCBkKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkhhc2gyNTZiaXQsIHR5cGVzLkJpZ0ludCksIGFyZ3VtZW50cykKCiAgdmFyIHggPSBkLnRvQnVmZmVyKDMyKQogIHZhciBlID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGhhc2gpCiAgdmFyIG4gPSBzZWNwMjU2azEubgogIHZhciBHID0gc2VjcDI1NmsxLkcKCiAgdmFyIHIsIHMKICBkZXRlcm1pbmlzdGljR2VuZXJhdGVLKGhhc2gsIHgsIGZ1bmN0aW9uIChrKSB7CiAgICB2YXIgUSA9IEcubXVsdGlwbHkoaykKCiAgICBpZiAoc2VjcDI1NmsxLmlzSW5maW5pdHkoUSkpIHJldHVybiBmYWxzZQoKICAgIHIgPSBRLmFmZmluZVgubW9kKG4pCiAgICBpZiAoci5zaWdudW0oKSA9PT0gMCkgcmV0dXJuIGZhbHNlCgogICAgcyA9IGsubW9kSW52ZXJzZShuKS5tdWx0aXBseShlLmFkZChkLm11bHRpcGx5KHIpKSkubW9kKG4pCiAgICBpZiAocy5zaWdudW0oKSA9PT0gMCkgcmV0dXJuIGZhbHNlCgogICAgcmV0dXJuIHRydWUKICB9KQoKICAvLyBlbmZvcmNlIGxvdyBTIHZhbHVlcywgc2VlIGJpcDYyOiAnbG93IHMgdmFsdWVzIGluIHNpZ25hdHVyZXMnCiAgaWYgKHMuY29tcGFyZVRvKE5fT1ZFUl9UV08pID4gMCkgewogICAgcyA9IG4uc3VidHJhY3QocykKICB9CgogIHJldHVybiBuZXcgRUNTaWduYXR1cmUociwgcykKfQoKZnVuY3Rpb24gdmVyaWZ5IChoYXNoLCBzaWduYXR1cmUsIFEpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUoCiAgICB0eXBlcy5IYXNoMjU2Yml0LAogICAgdHlwZXMuRUNTaWduYXR1cmUsCiAgICB0eXBlcy5FQ1BvaW50CiAgKSwgYXJndW1lbnRzKQoKICB2YXIgbiA9IHNlY3AyNTZrMS5uCiAgdmFyIEcgPSBzZWNwMjU2azEuRwoKICB2YXIgciA9IHNpZ25hdHVyZS5yCiAgdmFyIHMgPSBzaWduYXR1cmUucwoKICAvLyAxLjQuMSBFbmZvcmNlIHIgYW5kIHMgYXJlIGJvdGggaW50ZWdlcnMgaW4gdGhlIGludGVydmFsIFsxLCBuIOKIkiAxXQogIGlmIChyLnNpZ251bSgpIDw9IDAgfHwgci5jb21wYXJlVG8obikgPj0gMCkgcmV0dXJuIGZhbHNlCiAgaWYgKHMuc2lnbnVtKCkgPD0gMCB8fCBzLmNvbXBhcmVUbyhuKSA+PSAwKSByZXR1cm4gZmFsc2UKCiAgLy8gMS40LjIgSCA9IEhhc2goTSksIGFscmVhZHkgZG9uZSBieSB0aGUgdXNlcgogIC8vIDEuNC4zIGUgPSBICiAgdmFyIGUgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoaGFzaCkKCiAgLy8gQ29tcHV0ZSBzXi0xCiAgdmFyIHNJbnYgPSBzLm1vZEludmVyc2UobikKCiAgLy8gMS40LjQgQ29tcHV0ZSB1MSA9IGVzXuKIkjEgbW9kIG4KICAvLyAgICAgICAgICAgICAgIHUyID0gcnNe4oiSMSBtb2QgbgogIHZhciB1MSA9IGUubXVsdGlwbHkoc0ludikubW9kKG4pCiAgdmFyIHUyID0gci5tdWx0aXBseShzSW52KS5tb2QobikKCiAgLy8gMS40LjUgQ29tcHV0ZSBSID0gKHhSLCB5UikKICAvLyAgICAgICAgICAgICAgIFIgPSB1MUcgKyB1MlEKICB2YXIgUiA9IEcubXVsdGlwbHlUd28odTEsIFEsIHUyKQoKICAvLyAxLjQuNSAoY29udC4pIEVuZm9yY2UgUiBpcyBub3QgYXQgaW5maW5pdHkKICBpZiAoc2VjcDI1NmsxLmlzSW5maW5pdHkoUikpIHJldHVybiBmYWxzZQoKICAvLyAxLjQuNiBDb252ZXJ0IHRoZSBmaWVsZCBlbGVtZW50IFIueCB0byBhbiBpbnRlZ2VyCiAgdmFyIHhSID0gUi5hZmZpbmVYCgogIC8vIDEuNC43IFNldCB2ID0geFIgbW9kIG4KICB2YXIgdiA9IHhSLm1vZChuKQoKICAvLyAxLjQuOCBJZiB2ID0gciwgb3V0cHV0ICJ2YWxpZCIsIGFuZCBpZiB2ICE9IHIsIG91dHB1dCAiaW52YWxpZCIKICByZXR1cm4gdi5lcXVhbHMocikKfQoKLyoqCiAgKiBSZWNvdmVyIGEgcHVibGljIGtleSBmcm9tIGEgc2lnbmF0dXJlLgogICoKICAqIFNlZSBTRUMgMTogRWxsaXB0aWMgQ3VydmUgQ3J5cHRvZ3JhcGh5LCBzZWN0aW9uIDQuMS42LCAiUHVibGljCiAgKiBLZXkgUmVjb3ZlcnkgT3BlcmF0aW9uIi4KICAqCiAgKiBodHRwOi8vd3d3LnNlY2cub3JnL2Rvd25sb2FkL2FpZC03ODAvc2VjMS12Mi5wZGYKICAqLwpmdW5jdGlvbiByZWNvdmVyUHViS2V5IChlLCBzaWduYXR1cmUsIGkpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUoCiAgICB0eXBlcy5CaWdJbnQsCiAgICB0eXBlcy5FQ1NpZ25hdHVyZSwKICAgIHR5cGVzLlVJbnQyCiAgKSwgYXJndW1lbnRzKQoKICB2YXIgbiA9IHNlY3AyNTZrMS5uCiAgdmFyIEcgPSBzZWNwMjU2azEuRwogIHZhciByID0gc2lnbmF0dXJlLnIKICB2YXIgcyA9IHNpZ25hdHVyZS5zCgogIGlmIChyLnNpZ251bSgpIDw9IDAgfHwgci5jb21wYXJlVG8obikgPj0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHIgdmFsdWUnKQogIGlmIChzLnNpZ251bSgpIDw9IDAgfHwgcy5jb21wYXJlVG8obikgPj0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHMgdmFsdWUnKQoKICAvLyBBIHNldCBMU0Igc2lnbmlmaWVzIHRoYXQgdGhlIHktY29vcmRpbmF0ZSBpcyBvZGQKICB2YXIgaXNZT2RkID0gaSAmIDEKCiAgLy8gVGhlIG1vcmUgc2lnbmlmaWNhbnQgYml0IHNwZWNpZmllcyB3aGV0aGVyIHdlIHNob3VsZCB1c2UgdGhlCiAgLy8gZmlyc3Qgb3Igc2Vjb25kIGNhbmRpZGF0ZSBrZXkuCiAgdmFyIGlzU2Vjb25kS2V5ID0gaSA+PiAxCgogIC8vIDEuMSBMZXQgeCA9IHIgKyBqbgogIHZhciB4ID0gaXNTZWNvbmRLZXkgPyByLmFkZChuKSA6IHIKICB2YXIgUiA9IHNlY3AyNTZrMS5wb2ludEZyb21YKGlzWU9kZCwgeCkKCiAgLy8gMS40IENoZWNrIHRoYXQgblIgaXMgYXQgaW5maW5pdHkKICB2YXIgblIgPSBSLm11bHRpcGx5KG4pCiAgaWYgKCFzZWNwMjU2azEuaXNJbmZpbml0eShuUikpIHRocm93IG5ldyBFcnJvcignblIgaXMgbm90IGEgdmFsaWQgY3VydmUgcG9pbnQnKQoKICAvLyBDb21wdXRlIHJeLTEKICB2YXIgckludiA9IHIubW9kSW52ZXJzZShuKQoKICAvLyBDb21wdXRlIC1lIGZyb20gZQogIHZhciBlTmVnID0gZS5uZWdhdGUoKS5tb2QobikKCiAgLy8gMS42LjEgQ29tcHV0ZSBRID0gcl4tMSAoc1IgLSAgZUcpCiAgLy8gICAgICAgICAgICAgICBRID0gcl4tMSAoc1IgKyAtZUcpCiAgdmFyIFEgPSBSLm11bHRpcGx5VHdvKHMsIEcsIGVOZWcpLm11bHRpcGx5KHJJbnYpCgogIHNlY3AyNTZrMS52YWxpZGF0ZShRKQoKICByZXR1cm4gUQp9CgovKioKICAqIENhbGN1bGF0ZSBwdWJrZXkgZXh0cmFjdGlvbiBwYXJhbWV0ZXIuCiAgKgogICogV2hlbiBleHRyYWN0aW5nIGEgcHVia2V5IGZyb20gYSBzaWduYXR1cmUsIHdlIGhhdmUgdG8KICAqIGRpc3Rpbmd1aXNoIGZvdXIgZGlmZmVyZW50IGNhc2VzLiBSYXRoZXIgdGhhbiBwdXR0aW5nIHRoaXMKICAqIGJ1cmRlbiBvbiB0aGUgdmVyaWZpZXIsIEJpdGNvaW4gaW5jbHVkZXMgYSAyLWJpdCB2YWx1ZSB3aXRoIHRoZQogICogc2lnbmF0dXJlLgogICoKICAqIFRoaXMgZnVuY3Rpb24gc2ltcGx5IHRyaWVzIGFsbCBmb3VyIGNhc2VzIGFuZCByZXR1cm5zIHRoZSB2YWx1ZQogICogdGhhdCByZXN1bHRlZCBpbiBhIHN1Y2Nlc3NmdWwgcHVia2V5IHJlY292ZXJ5LgogICovCmZ1bmN0aW9uIGNhbGNQdWJLZXlSZWNvdmVyeVBhcmFtIChlLCBzaWduYXR1cmUsIFEpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUoCiAgICB0eXBlcy5CaWdJbnQsCiAgICB0eXBlcy5FQ1NpZ25hdHVyZSwKICAgIHR5cGVzLkVDUG9pbnQKICApLCBhcmd1bWVudHMpCgogIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICB2YXIgUXByaW1lID0gcmVjb3ZlclB1YktleShlLCBzaWduYXR1cmUsIGkpCgogICAgLy8gMS42LjIgVmVyaWZ5IFEKICAgIGlmIChRcHJpbWUuZXF1YWxzKFEpKSB7CiAgICAgIHJldHVybiBpCiAgICB9CiAgfQoKICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmaW5kIHZhbGlkIHJlY292ZXJ5IGZhY3RvcicpCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGNhbGNQdWJLZXlSZWNvdmVyeVBhcmFtOiBjYWxjUHViS2V5UmVjb3ZlcnlQYXJhbSwKICBkZXRlcm1pbmlzdGljR2VuZXJhdGVLOiBkZXRlcm1pbmlzdGljR2VuZXJhdGVLLAogIHJlY292ZXJQdWJLZXk6IHJlY292ZXJQdWJLZXksCiAgc2lnbjogc2lnbiwKICB2ZXJpZnk6IHZlcmlmeSwKCiAgLy8gVE9ETzogcmVtb3ZlCiAgX19jdXJ2ZTogc2VjcDI1NmsxCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2Vjc2lnbmF0dXJlIjozMCwiLi90eXBlcyI6NDAsImJpZ2kiOjE5LCJidWZmZXIiOjcwLCJjcmVhdGUtaG1hYyI6ODUsImVjdXJ2ZSI6OTksInR5cGVmb3JjZSI6MTczfV0sMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiY3J5cHRvID0gcmVxdWlyZSgnLi9jcnlwdG8nKQp2YXIgYnM1OGNoZWNrID0gcmVxdWlyZSgnYnM1OGNoZWNrJykKdmFyIGVjZHNhID0gcmVxdWlyZSgnLi9lY2RzYScpCnZhciByYW5kb21CeXRlcyA9IHJlcXVpcmUoJ3JhbmRvbWJ5dGVzJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQp2YXIgd2lmID0gcmVxdWlyZSgnd2lmJykKCnZhciBORVRXT1JLUyA9IHJlcXVpcmUoJy4vbmV0d29ya3MnKQp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQoKdmFyIGVjdXJ2ZSA9IHJlcXVpcmUoJ2VjdXJ2ZScpCnZhciBzZWNwMjU2azEgPSBlY2RzYS5fX2N1cnZlCgpmdW5jdGlvbiBFQ1BhaXIgKGQsIFEsIG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucykgewogICAgdHlwZWZvcmNlKHsKICAgICAgY29tcHJlc3NlZDogdHlwZXMubWF5YmUodHlwZXMuQm9vbGVhbiksCiAgICAgIG5ldHdvcms6IHR5cGVzLm1heWJlKHR5cGVzLk5ldHdvcmspCiAgICB9LCBvcHRpb25zKQogIH0KCiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge30KCiAgaWYgKGQpIHsKICAgIGlmIChkLnNpZ251bSgpIDw9IDApIHRocm93IG5ldyBFcnJvcignUHJpdmF0ZSBrZXkgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpCiAgICBpZiAoZC5jb21wYXJlVG8oc2VjcDI1NmsxLm4pID49IDApIHRocm93IG5ldyBFcnJvcignUHJpdmF0ZSBrZXkgbXVzdCBiZSBsZXNzIHRoYW4gdGhlIGN1cnZlIG9yZGVyJykKICAgIGlmIChRKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmV4cGVjdGVkIHB1YmxpY0tleSBwYXJhbWV0ZXInKQoKICAgIHRoaXMuZCA9IGQKICB9IGVsc2UgewogICAgdHlwZWZvcmNlKHR5cGVzLkVDUG9pbnQsIFEpCgogICAgdGhpcy5fX1EgPSBRCiAgfQoKICB0aGlzLmNvbXByZXNzZWQgPSBvcHRpb25zLmNvbXByZXNzZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRpb25zLmNvbXByZXNzZWQKICB0aGlzLm5ldHdvcmsgPSBvcHRpb25zLm5ldHdvcmsgfHwgTkVUV09SS1MuYml0Y29pbgp9CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoRUNQYWlyLnByb3RvdHlwZSwgJ1EnLCB7CiAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMuX19RICYmIHRoaXMuZCkgewogICAgICB0aGlzLl9fUSA9IHNlY3AyNTZrMS5HLm11bHRpcGx5KHRoaXMuZCkKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fX1EKICB9Cn0pCgpFQ1BhaXIuZnJvbVB1YmxpY0tleUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIsIG5ldHdvcmspIHsKICB2YXIgUSA9IGVjdXJ2ZS5Qb2ludC5kZWNvZGVGcm9tKHNlY3AyNTZrMSwgYnVmZmVyKQoKICByZXR1cm4gbmV3IEVDUGFpcihudWxsLCBRLCB7CiAgICBjb21wcmVzc2VkOiBRLmNvbXByZXNzZWQsCiAgICBuZXR3b3JrOiBuZXR3b3JrCiAgfSkKfQoKRUNQYWlyLmZyb21XSUYgPSBmdW5jdGlvbiAoc3RyaW5nLCBuZXR3b3JrKSB7CiAgbmV0d29yayA9IG5ldHdvcmsgfHwgTkVUV09SS1MuYml0Y29pbgogIHZhciBidWZmZXIgPSBiczU4Y2hlY2suZGVjb2RlKHN0cmluZykKCiAgaWYgKHR5cGVzLkFycmF5KG5ldHdvcmspKSB7CiAgICB2YXIgdmVyc2lvbiA9IGJ1ZmZlclswXQoKICAgIG5ldHdvcmsgPSBuZXR3b3JrLmZpbHRlcihmdW5jdGlvbiAobmV0d29yaykgewogICAgICByZXR1cm4gdmVyc2lvbiA9PT0gbmV0d29yay53aWYKICAgIH0pLnBvcCgpIHx8IHt9CiAgfQoKICB2YXIgZGVjb2RlZCA9IHdpZi5kZWNvZGVSYXcobmV0d29yay53aWYsIGJ1ZmZlcikKICB2YXIgZCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihkZWNvZGVkLmQpCgogIHJldHVybiBuZXcgRUNQYWlyKGQsIG51bGwsIHsKICAgIGNvbXByZXNzZWQ6IGRlY29kZWQuY29tcHJlc3NlZCwKICAgIG5ldHdvcms6IG5ldHdvcmsKICB9KQp9CgpFQ1BhaXIubWFrZVJhbmRvbSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge30KCiAgdmFyIHJuZyA9IG9wdGlvbnMucm5nIHx8IHJhbmRvbUJ5dGVzCgogIHZhciBkCiAgZG8gewogICAgdmFyIGJ1ZmZlciA9IHJuZygzMikKICAgIHR5cGVmb3JjZSh0eXBlcy5CdWZmZXIyNTZiaXQsIGJ1ZmZlcikKCiAgICBkID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGJ1ZmZlcikKICB9IHdoaWxlIChkLnNpZ251bSgpIDw9IDAgfHwgZC5jb21wYXJlVG8oc2VjcDI1NmsxLm4pID49IDApCgogIHJldHVybiBuZXcgRUNQYWlyKGQsIG51bGwsIG9wdGlvbnMpCn0KCkVDUGFpci5wcm90b3R5cGUuZ2V0QWRkcmVzcyA9IGZ1bmN0aW9uICgpIHsKICB2YXIgcHViS2V5ID0gdGhpcy5nZXRQdWJsaWNLZXlCdWZmZXIoKQogIHZhciBwdWJLZXlIYXNoID0gYmNyeXB0by5oYXNoMTYwKHB1YktleSkKCiAgdmFyIHBheWxvYWQgPSBuZXcgQnVmZmVyKDIxKQogIHBheWxvYWQud3JpdGVVSW50OCh0aGlzLm5ldHdvcmsucHViS2V5SGFzaCwgMCkKICBwdWJLZXlIYXNoLmNvcHkocGF5bG9hZCwgMSkKCiAgcmV0dXJuIGJzNThjaGVjay5lbmNvZGUocGF5bG9hZCkKfQoKRUNQYWlyLnByb3RvdHlwZS5nZXROZXR3b3JrID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLm5ldHdvcmsKfQoKRUNQYWlyLnByb3RvdHlwZS5nZXRQdWJsaWNLZXlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuUS5nZXRFbmNvZGVkKHRoaXMuY29tcHJlc3NlZCkKfQoKRUNQYWlyLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gKGhhc2gpIHsKICBpZiAoIXRoaXMuZCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHByaXZhdGUga2V5JykKCiAgcmV0dXJuIGVjZHNhLnNpZ24oaGFzaCwgdGhpcy5kKQp9CgpFQ1BhaXIucHJvdG90eXBlLnRvV0lGID0gZnVuY3Rpb24gKCkgewogIGlmICghdGhpcy5kKSB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcHJpdmF0ZSBrZXknKQoKICByZXR1cm4gd2lmLmVuY29kZSh0aGlzLm5ldHdvcmsud2lmLCB0aGlzLmQudG9CdWZmZXIoMzIpLCB0aGlzLmNvbXByZXNzZWQpCn0KCkVDUGFpci5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gKGhhc2gsIHNpZ25hdHVyZSkgewogIHJldHVybiBlY2RzYS52ZXJpZnkoaGFzaCwgc2lnbmF0dXJlLCB0aGlzLlEpCn0KCm1vZHVsZS5leHBvcnRzID0gRUNQYWlyCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9jcnlwdG8iOjI3LCIuL2VjZHNhIjoyOCwiLi9uZXR3b3JrcyI6MzQsIi4vdHlwZXMiOjQwLCJiaWdpIjoxOSwiYnM1OGNoZWNrIjo3NCwiYnVmZmVyIjo3MCwiZWN1cnZlIjo5OSwicmFuZG9tYnl0ZXMiOjE0OCwidHlwZWZvcmNlIjoxNzMsIndpZiI6MTc5fV0sMzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiaXA2NiA9IHJlcXVpcmUoJ2JpcDY2JykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKCmZ1bmN0aW9uIEVDU2lnbmF0dXJlIChyLCBzKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkJpZ0ludCwgdHlwZXMuQmlnSW50KSwgYXJndW1lbnRzKQoKICB0aGlzLnIgPSByCiAgdGhpcy5zID0gcwp9CgpFQ1NpZ25hdHVyZS5wYXJzZUNvbXBhY3QgPSBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlci5sZW5ndGggIT09IDY1KSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2lnbmF0dXJlIGxlbmd0aCcpCgogIHZhciBmbGFnQnl0ZSA9IGJ1ZmZlci5yZWFkVUludDgoMCkgLSAyNwogIGlmIChmbGFnQnl0ZSAhPT0gKGZsYWdCeXRlICYgNykpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzaWduYXR1cmUgcGFyYW1ldGVyJykKCiAgdmFyIGNvbXByZXNzZWQgPSAhIShmbGFnQnl0ZSAmIDQpCiAgdmFyIHJlY292ZXJ5UGFyYW0gPSBmbGFnQnl0ZSAmIDMKCiAgdmFyIHIgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoYnVmZmVyLnNsaWNlKDEsIDMzKSkKICB2YXIgcyA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihidWZmZXIuc2xpY2UoMzMpKQoKICByZXR1cm4gewogICAgY29tcHJlc3NlZDogY29tcHJlc3NlZCwKICAgIGk6IHJlY292ZXJ5UGFyYW0sCiAgICBzaWduYXR1cmU6IG5ldyBFQ1NpZ25hdHVyZShyLCBzKQogIH0KfQoKRUNTaWduYXR1cmUuZnJvbURFUiA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICB2YXIgZGVjb2RlID0gYmlwNjYuZGVjb2RlKGJ1ZmZlcikKICB2YXIgciA9IEJpZ0ludGVnZXIuZnJvbURFUkludGVnZXIoZGVjb2RlLnIpCiAgdmFyIHMgPSBCaWdJbnRlZ2VyLmZyb21ERVJJbnRlZ2VyKGRlY29kZS5zKQoKICByZXR1cm4gbmV3IEVDU2lnbmF0dXJlKHIsIHMpCn0KCi8vIEJJUDYyOiAxIGJ5dGUgaGFzaFR5cGUgZmxhZyAob25seSAweDAxLCAweDAyLCAweDAzLCAweDgxLCAweDgyIGFuZCAweDgzIGFyZSBhbGxvd2VkKQpFQ1NpZ25hdHVyZS5wYXJzZVNjcmlwdFNpZ25hdHVyZSA9IGZ1bmN0aW9uIChidWZmZXIpIHsKICB2YXIgaGFzaFR5cGUgPSBidWZmZXIucmVhZFVJbnQ4KGJ1ZmZlci5sZW5ndGggLSAxKQogIHZhciBoYXNoVHlwZU1vZCA9IGhhc2hUeXBlICYgfjB4ODAKCiAgaWYgKGhhc2hUeXBlTW9kIDw9IDB4MDAgfHwgaGFzaFR5cGVNb2QgPj0gMHgwNCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhhc2hUeXBlICcgKyBoYXNoVHlwZSkKCiAgcmV0dXJuIHsKICAgIHNpZ25hdHVyZTogRUNTaWduYXR1cmUuZnJvbURFUihidWZmZXIuc2xpY2UoMCwgLTEpKSwKICAgIGhhc2hUeXBlOiBoYXNoVHlwZQogIH0KfQoKRUNTaWduYXR1cmUucHJvdG90eXBlLnRvQ29tcGFjdCA9IGZ1bmN0aW9uIChpLCBjb21wcmVzc2VkKSB7CiAgaWYgKGNvbXByZXNzZWQpIHsKICAgIGkgKz0gNAogIH0KCiAgaSArPSAyNwoKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcig2NSkKICBidWZmZXIud3JpdGVVSW50OChpLCAwKQoKICB0aGlzLnIudG9CdWZmZXIoMzIpLmNvcHkoYnVmZmVyLCAxKQogIHRoaXMucy50b0J1ZmZlcigzMikuY29weShidWZmZXIsIDMzKQoKICByZXR1cm4gYnVmZmVyCn0KCkVDU2lnbmF0dXJlLnByb3RvdHlwZS50b0RFUiA9IGZ1bmN0aW9uICgpIHsKICB2YXIgciA9IG5ldyBCdWZmZXIodGhpcy5yLnRvREVSSW50ZWdlcigpKQogIHZhciBzID0gbmV3IEJ1ZmZlcih0aGlzLnMudG9ERVJJbnRlZ2VyKCkpCgogIHJldHVybiBiaXA2Ni5lbmNvZGUociwgcykKfQoKRUNTaWduYXR1cmUucHJvdG90eXBlLnRvU2NyaXB0U2lnbmF0dXJlID0gZnVuY3Rpb24gKGhhc2hUeXBlKSB7CiAgdmFyIGhhc2hUeXBlTW9kID0gaGFzaFR5cGUgJiB+MHg4MAogIGlmIChoYXNoVHlwZU1vZCA8PSAwIHx8IGhhc2hUeXBlTW9kID49IDQpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoYXNoVHlwZSAnICsgaGFzaFR5cGUpCgogIHZhciBoYXNoVHlwZUJ1ZmZlciA9IG5ldyBCdWZmZXIoMSkKICBoYXNoVHlwZUJ1ZmZlci53cml0ZVVJbnQ4KGhhc2hUeXBlLCAwKQoKICByZXR1cm4gQnVmZmVyLmNvbmNhdChbdGhpcy50b0RFUigpLCBoYXNoVHlwZUJ1ZmZlcl0pCn0KCm1vZHVsZS5leHBvcnRzID0gRUNTaWduYXR1cmUKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL3R5cGVzIjo0MCwiYmlnaSI6MTksImJpcDY2IjoyMywiYnVmZmVyIjo3MCwidHlwZWZvcmNlIjoxNzN9XSwzMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJhc2U1OGNoZWNrID0gcmVxdWlyZSgnYnM1OGNoZWNrJykKdmFyIGJjcnlwdG8gPSByZXF1aXJlKCcuL2NyeXB0bycpCnZhciBjcmVhdGVIbWFjID0gcmVxdWlyZSgnY3JlYXRlLWhtYWMnKQp2YXIgdHlwZWZvcmNlID0gcmVxdWlyZSgndHlwZWZvcmNlJykKdmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcycpCnZhciBORVRXT1JLUyA9IHJlcXVpcmUoJy4vbmV0d29ya3MnKQoKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKdmFyIEVDUGFpciA9IHJlcXVpcmUoJy4vZWNwYWlyJykKCnZhciBlY3VydmUgPSByZXF1aXJlKCdlY3VydmUnKQp2YXIgY3VydmUgPSBlY3VydmUuZ2V0Q3VydmVCeU5hbWUoJ3NlY3AyNTZrMScpCgpmdW5jdGlvbiBIRE5vZGUgKGtleVBhaXIsIGNoYWluQ29kZSkgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgnRUNQYWlyJywgdHlwZXMuQnVmZmVyMjU2Yml0KSwgYXJndW1lbnRzKQoKICBpZiAoIWtleVBhaXIuY29tcHJlc3NlZCkgdGhyb3cgbmV3IFR5cGVFcnJvcignQklQMzIgb25seSBhbGxvd3MgY29tcHJlc3NlZCBrZXlQYWlycycpCgogIHRoaXMua2V5UGFpciA9IGtleVBhaXIKICB0aGlzLmNoYWluQ29kZSA9IGNoYWluQ29kZQogIHRoaXMuZGVwdGggPSAwCiAgdGhpcy5pbmRleCA9IDAKICB0aGlzLnBhcmVudEZpbmdlcnByaW50ID0gMHgwMDAwMDAwMAp9CgpIRE5vZGUuSElHSEVTVF9CSVQgPSAweDgwMDAwMDAwCkhETm9kZS5MRU5HVEggPSA3OApIRE5vZGUuTUFTVEVSX1NFQ1JFVCA9IG5ldyBCdWZmZXIoJ0JpdGNvaW4gc2VlZCcpCgpIRE5vZGUuZnJvbVNlZWRCdWZmZXIgPSBmdW5jdGlvbiAoc2VlZCwgbmV0d29yaykgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5CdWZmZXIsIHR5cGVzLm1heWJlKHR5cGVzLk5ldHdvcmspKSwgYXJndW1lbnRzKQoKICBpZiAoc2VlZC5sZW5ndGggPCAxNikgdGhyb3cgbmV3IFR5cGVFcnJvcignU2VlZCBzaG91bGQgYmUgYXQgbGVhc3QgMTI4IGJpdHMnKQogIGlmIChzZWVkLmxlbmd0aCA+IDY0KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdTZWVkIHNob3VsZCBiZSBhdCBtb3N0IDUxMiBiaXRzJykKCiAgdmFyIEkgPSBjcmVhdGVIbWFjKCdzaGE1MTInLCBIRE5vZGUuTUFTVEVSX1NFQ1JFVCkudXBkYXRlKHNlZWQpLmRpZ2VzdCgpCiAgdmFyIElMID0gSS5zbGljZSgwLCAzMikKICB2YXIgSVIgPSBJLnNsaWNlKDMyKQoKICAvLyBJbiBjYXNlIElMIGlzIDAgb3IgPj0gbiwgdGhlIG1hc3RlciBrZXkgaXMgaW52YWxpZAogIC8vIFRoaXMgaXMgaGFuZGxlZCBieSB0aGUgRUNQYWlyIGNvbnN0cnVjdG9yCiAgdmFyIHBJTCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihJTCkKICB2YXIga2V5UGFpciA9IG5ldyBFQ1BhaXIocElMLCBudWxsLCB7CiAgICBuZXR3b3JrOiBuZXR3b3JrCiAgfSkKCiAgcmV0dXJuIG5ldyBIRE5vZGUoa2V5UGFpciwgSVIpCn0KCkhETm9kZS5mcm9tU2VlZEhleCA9IGZ1bmN0aW9uIChoZXgsIG5ldHdvcmspIHsKICByZXR1cm4gSEROb2RlLmZyb21TZWVkQnVmZmVyKG5ldyBCdWZmZXIoaGV4LCAnaGV4JyksIG5ldHdvcmspCn0KCkhETm9kZS5mcm9tQmFzZTU4ID0gZnVuY3Rpb24gKHN0cmluZywgbmV0d29ya3MpIHsKICB2YXIgYnVmZmVyID0gYmFzZTU4Y2hlY2suZGVjb2RlKHN0cmluZykKICBpZiAoYnVmZmVyLmxlbmd0aCAhPT0gNzgpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBidWZmZXIgbGVuZ3RoJykKCiAgLy8gNCBieXRlczogdmVyc2lvbiBieXRlcwogIHZhciB2ZXJzaW9uID0gYnVmZmVyLnJlYWRVSW50MzJCRSgwKQogIHZhciBuZXR3b3JrCgogIC8vIGxpc3Qgb2YgbmV0d29ya3M/CiAgaWYgKEFycmF5LmlzQXJyYXkobmV0d29ya3MpKSB7CiAgICBuZXR3b3JrID0gbmV0d29ya3MuZmlsdGVyKGZ1bmN0aW9uIChuZXR3b3JrKSB7CiAgICAgIHJldHVybiB2ZXJzaW9uID09PSBuZXR3b3JrLmJpcDMyLnByaXZhdGUgfHwKICAgICAgICAgICAgIHZlcnNpb24gPT09IG5ldHdvcmsuYmlwMzIucHVibGljCiAgICB9KS5wb3AoKSB8fCB7fQoKICAvLyBvdGhlcndpc2UsIGFzc3VtZSBhIG5ldHdvcmsgb2JqZWN0IChvciBkZWZhdWx0IHRvIGJpdGNvaW4pCiAgfSBlbHNlIHsKICAgIG5ldHdvcmsgPSBuZXR3b3JrcyB8fCBORVRXT1JLUy5iaXRjb2luCiAgfQoKICBpZiAodmVyc2lvbiAhPT0gbmV0d29yay5iaXAzMi5wcml2YXRlICYmCiAgICB2ZXJzaW9uICE9PSBuZXR3b3JrLmJpcDMyLnB1YmxpYykgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG5ldHdvcmsnKQoKICAvLyAxIGJ5dGU6IGRlcHRoOiAweDAwIGZvciBtYXN0ZXIgbm9kZXMsIDB4MDEgZm9yIGxldmVsLTEgZGVzY2VuZGFudHMsIC4uLgogIHZhciBkZXB0aCA9IGJ1ZmZlcls0XQoKICAvLyA0IGJ5dGVzOiB0aGUgZmluZ2VycHJpbnQgb2YgdGhlIHBhcmVudCdzIGtleSAoMHgwMDAwMDAwMCBpZiBtYXN0ZXIga2V5KQogIHZhciBwYXJlbnRGaW5nZXJwcmludCA9IGJ1ZmZlci5yZWFkVUludDMyQkUoNSkKICBpZiAoZGVwdGggPT09IDApIHsKICAgIGlmIChwYXJlbnRGaW5nZXJwcmludCAhPT0gMHgwMDAwMDAwMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBhcmVudCBmaW5nZXJwcmludCcpCiAgfQoKICAvLyA0IGJ5dGVzOiBjaGlsZCBudW1iZXIuIFRoaXMgaXMgdGhlIG51bWJlciBpIGluIHhpID0geHBhci9pLCB3aXRoIHhpIHRoZSBrZXkgYmVpbmcgc2VyaWFsaXplZC4KICAvLyBUaGlzIGlzIGVuY29kZWQgaW4gTVNCIG9yZGVyLiAoMHgwMDAwMDAwMCBpZiBtYXN0ZXIga2V5KQogIHZhciBpbmRleCA9IGJ1ZmZlci5yZWFkVUludDMyQkUoOSkKICBpZiAoZGVwdGggPT09IDAgJiYgaW5kZXggIT09IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbmRleCcpCgogIC8vIDMyIGJ5dGVzOiB0aGUgY2hhaW4gY29kZQogIHZhciBjaGFpbkNvZGUgPSBidWZmZXIuc2xpY2UoMTMsIDQ1KQogIHZhciBrZXlQYWlyCgogIC8vIDMzIGJ5dGVzOiBwcml2YXRlIGtleSBkYXRhICgweDAwICsgaykKICBpZiAodmVyc2lvbiA9PT0gbmV0d29yay5iaXAzMi5wcml2YXRlKSB7CiAgICBpZiAoYnVmZmVyLnJlYWRVSW50OCg0NSkgIT09IDB4MDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwcml2YXRlIGtleScpCgogICAgdmFyIGQgPSBCaWdJbnRlZ2VyLmZyb21CdWZmZXIoYnVmZmVyLnNsaWNlKDQ2LCA3OCkpCgogICAga2V5UGFpciA9IG5ldyBFQ1BhaXIoZCwgbnVsbCwgewogICAgICBuZXR3b3JrOiBuZXR3b3JrCiAgICB9KQoKICAvLyAzMyBieXRlczogcHVibGljIGtleSBkYXRhICgweDAyICsgWCBvciAweDAzICsgWCkKICB9IGVsc2UgewogICAgdmFyIFEgPSBlY3VydmUuUG9pbnQuZGVjb2RlRnJvbShjdXJ2ZSwgYnVmZmVyLnNsaWNlKDQ1LCA3OCkpCiAgICBpZiAoIVEuY29tcHJlc3NlZCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHB1YmxpYyBrZXknKQoKICAgIC8vIFZlcmlmeSB0aGF0IHRoZSBYIGNvb3JkaW5hdGUgaW4gdGhlIHB1YmxpYyBwb2ludCBjb3JyZXNwb25kcyB0byBhIHBvaW50IG9uIHRoZSBjdXJ2ZS4KICAgIC8vIElmIG5vdCwgdGhlIGV4dGVuZGVkIHB1YmxpYyBrZXkgaXMgaW52YWxpZC4KICAgIGN1cnZlLnZhbGlkYXRlKFEpCgogICAga2V5UGFpciA9IG5ldyBFQ1BhaXIobnVsbCwgUSwgewogICAgICBuZXR3b3JrOiBuZXR3b3JrCiAgICB9KQogIH0KCiAgdmFyIGhkID0gbmV3IEhETm9kZShrZXlQYWlyLCBjaGFpbkNvZGUpCiAgaGQuZGVwdGggPSBkZXB0aAogIGhkLmluZGV4ID0gaW5kZXgKICBoZC5wYXJlbnRGaW5nZXJwcmludCA9IHBhcmVudEZpbmdlcnByaW50CgogIHJldHVybiBoZAp9CgpIRE5vZGUucHJvdG90eXBlLmdldEFkZHJlc3MgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMua2V5UGFpci5nZXRBZGRyZXNzKCkKfQoKSEROb2RlLnByb3RvdHlwZS5nZXRJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBiY3J5cHRvLmhhc2gxNjAodGhpcy5rZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpKQp9CgpIRE5vZGUucHJvdG90eXBlLmdldEZpbmdlcnByaW50ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLmdldElkZW50aWZpZXIoKS5zbGljZSgwLCA0KQp9CgpIRE5vZGUucHJvdG90eXBlLmdldE5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMua2V5UGFpci5nZXROZXR3b3JrKCkKfQoKSEROb2RlLnByb3RvdHlwZS5nZXRQdWJsaWNLZXlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMua2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKQp9CgpIRE5vZGUucHJvdG90eXBlLm5ldXRlcmVkID0gZnVuY3Rpb24gKCkgewogIHZhciBuZXV0ZXJlZEtleVBhaXIgPSBuZXcgRUNQYWlyKG51bGwsIHRoaXMua2V5UGFpci5RLCB7CiAgICBuZXR3b3JrOiB0aGlzLmtleVBhaXIubmV0d29yawogIH0pCgogIHZhciBuZXV0ZXJlZCA9IG5ldyBIRE5vZGUobmV1dGVyZWRLZXlQYWlyLCB0aGlzLmNoYWluQ29kZSkKICBuZXV0ZXJlZC5kZXB0aCA9IHRoaXMuZGVwdGgKICBuZXV0ZXJlZC5pbmRleCA9IHRoaXMuaW5kZXgKICBuZXV0ZXJlZC5wYXJlbnRGaW5nZXJwcmludCA9IHRoaXMucGFyZW50RmluZ2VycHJpbnQKCiAgcmV0dXJuIG5ldXRlcmVkCn0KCkhETm9kZS5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIChoYXNoKSB7CiAgcmV0dXJuIHRoaXMua2V5UGFpci5zaWduKGhhc2gpCn0KCkhETm9kZS5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gKGhhc2gsIHNpZ25hdHVyZSkgewogIHJldHVybiB0aGlzLmtleVBhaXIudmVyaWZ5KGhhc2gsIHNpZ25hdHVyZSkKfQoKSEROb2RlLnByb3RvdHlwZS50b0Jhc2U1OCA9IGZ1bmN0aW9uIChfX2lzUHJpdmF0ZSkgewogIGlmIChfX2lzUHJpdmF0ZSAhPT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbnN1cHBvcnRlZCBhcmd1bWVudCBpbiAyLjAuMCcpCgogIC8vIFZlcnNpb24KICB2YXIgbmV0d29yayA9IHRoaXMua2V5UGFpci5uZXR3b3JrCiAgdmFyIHZlcnNpb24gPSB0aGlzLmtleVBhaXIuZCA/IG5ldHdvcmsuYmlwMzIucHJpdmF0ZSA6IG5ldHdvcmsuYmlwMzIucHVibGljCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoNzgpCgogIC8vIDQgYnl0ZXM6IHZlcnNpb24gYnl0ZXMKICBidWZmZXIud3JpdGVVSW50MzJCRSh2ZXJzaW9uLCAwKQoKICAvLyAxIGJ5dGU6IGRlcHRoOiAweDAwIGZvciBtYXN0ZXIgbm9kZXMsIDB4MDEgZm9yIGxldmVsLTEgZGVzY2VuZGFudHMsIC4uLi4KICBidWZmZXIud3JpdGVVSW50OCh0aGlzLmRlcHRoLCA0KQoKICAvLyA0IGJ5dGVzOiB0aGUgZmluZ2VycHJpbnQgb2YgdGhlIHBhcmVudCdzIGtleSAoMHgwMDAwMDAwMCBpZiBtYXN0ZXIga2V5KQogIGJ1ZmZlci53cml0ZVVJbnQzMkJFKHRoaXMucGFyZW50RmluZ2VycHJpbnQsIDUpCgogIC8vIDQgYnl0ZXM6IGNoaWxkIG51bWJlci4gVGhpcyBpcyB0aGUgbnVtYmVyIGkgaW4geGkgPSB4cGFyL2ksIHdpdGggeGkgdGhlIGtleSBiZWluZyBzZXJpYWxpemVkLgogIC8vIFRoaXMgaXMgZW5jb2RlZCBpbiBiaWcgZW5kaWFuLiAoMHgwMDAwMDAwMCBpZiBtYXN0ZXIga2V5KQogIGJ1ZmZlci53cml0ZVVJbnQzMkJFKHRoaXMuaW5kZXgsIDkpCgogIC8vIDMyIGJ5dGVzOiB0aGUgY2hhaW4gY29kZQogIHRoaXMuY2hhaW5Db2RlLmNvcHkoYnVmZmVyLCAxMykKCiAgLy8gMzMgYnl0ZXM6IHRoZSBwdWJsaWMga2V5IG9yIHByaXZhdGUga2V5IGRhdGEKICBpZiAodGhpcy5rZXlQYWlyLmQpIHsKICAgIC8vIDB4MDAgKyBrIGZvciBwcml2YXRlIGtleXMKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KDAsIDQ1KQogICAgdGhpcy5rZXlQYWlyLmQudG9CdWZmZXIoMzIpLmNvcHkoYnVmZmVyLCA0NikKCiAgLy8gMzMgYnl0ZXM6IHRoZSBwdWJsaWMga2V5CiAgfSBlbHNlIHsKICAgIC8vIFg5LjYyIGVuY29kaW5nIGZvciBwdWJsaWMga2V5cwogICAgdGhpcy5rZXlQYWlyLmdldFB1YmxpY0tleUJ1ZmZlcigpLmNvcHkoYnVmZmVyLCA0NSkKICB9CgogIHJldHVybiBiYXNlNThjaGVjay5lbmNvZGUoYnVmZmVyKQp9CgovLyBodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbi9iaXBzL2Jsb2IvbWFzdGVyL2JpcC0wMDMyLm1lZGlhd2lraSNjaGlsZC1rZXktZGVyaXZhdGlvbi1ja2QtZnVuY3Rpb25zCkhETm9kZS5wcm90b3R5cGUuZGVyaXZlID0gZnVuY3Rpb24gKGluZGV4KSB7CiAgdmFyIGlzSGFyZGVuZWQgPSBpbmRleCA+PSBIRE5vZGUuSElHSEVTVF9CSVQKICB2YXIgZGF0YSA9IG5ldyBCdWZmZXIoMzcpCgogIC8vIEhhcmRlbmVkIGNoaWxkCiAgaWYgKGlzSGFyZGVuZWQpIHsKICAgIGlmICghdGhpcy5rZXlQYWlyLmQpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NvdWxkIG5vdCBkZXJpdmUgaGFyZGVuZWQgY2hpbGQga2V5JykKCiAgICAvLyBkYXRhID0gMHgwMCB8fCBzZXIyNTYoa3BhcikgfHwgc2VyMzIoaW5kZXgpCiAgICBkYXRhWzBdID0gMHgwMAogICAgdGhpcy5rZXlQYWlyLmQudG9CdWZmZXIoMzIpLmNvcHkoZGF0YSwgMSkKICAgIGRhdGEud3JpdGVVSW50MzJCRShpbmRleCwgMzMpCgogIC8vIE5vcm1hbCBjaGlsZAogIH0gZWxzZSB7CiAgICAvLyBkYXRhID0gc2VyUChwb2ludChrcGFyKSkgfHwgc2VyMzIoaW5kZXgpCiAgICAvLyAgICAgID0gc2VyUChLcGFyKSB8fCBzZXIzMihpbmRleCkKICAgIHRoaXMua2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKS5jb3B5KGRhdGEsIDApCiAgICBkYXRhLndyaXRlVUludDMyQkUoaW5kZXgsIDMzKQogIH0KCiAgdmFyIEkgPSBjcmVhdGVIbWFjKCdzaGE1MTInLCB0aGlzLmNoYWluQ29kZSkudXBkYXRlKGRhdGEpLmRpZ2VzdCgpCiAgdmFyIElMID0gSS5zbGljZSgwLCAzMikKICB2YXIgSVIgPSBJLnNsaWNlKDMyKQoKICB2YXIgcElMID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKElMKQoKICAvLyBJbiBjYXNlIHBhcnNlMjU2KElMKSA+PSBuLCBwcm9jZWVkIHdpdGggdGhlIG5leHQgdmFsdWUgZm9yIGkKICBpZiAocElMLmNvbXBhcmVUbyhjdXJ2ZS5uKSA+PSAwKSB7CiAgICByZXR1cm4gdGhpcy5kZXJpdmUoaW5kZXggKyAxKQogIH0KCiAgLy8gUHJpdmF0ZSBwYXJlbnQga2V5IC0+IHByaXZhdGUgY2hpbGQga2V5CiAgdmFyIGRlcml2ZWRLZXlQYWlyCiAgaWYgKHRoaXMua2V5UGFpci5kKSB7CiAgICAvLyBraSA9IHBhcnNlMjU2KElMKSArIGtwYXIgKG1vZCBuKQogICAgdmFyIGtpID0gcElMLmFkZCh0aGlzLmtleVBhaXIuZCkubW9kKGN1cnZlLm4pCgogICAgLy8gSW4gY2FzZSBraSA9PSAwLCBwcm9jZWVkIHdpdGggdGhlIG5leHQgdmFsdWUgZm9yIGkKICAgIGlmIChraS5zaWdudW0oKSA9PT0gMCkgewogICAgICByZXR1cm4gdGhpcy5kZXJpdmUoaW5kZXggKyAxKQogICAgfQoKICAgIGRlcml2ZWRLZXlQYWlyID0gbmV3IEVDUGFpcihraSwgbnVsbCwgewogICAgICBuZXR3b3JrOiB0aGlzLmtleVBhaXIubmV0d29yawogICAgfSkKCiAgLy8gUHVibGljIHBhcmVudCBrZXkgLT4gcHVibGljIGNoaWxkIGtleQogIH0gZWxzZSB7CiAgICAvLyBLaSA9IHBvaW50KHBhcnNlMjU2KElMKSkgKyBLcGFyCiAgICAvLyAgICA9IEcqSUwgKyBLcGFyCiAgICB2YXIgS2kgPSBjdXJ2ZS5HLm11bHRpcGx5KHBJTCkuYWRkKHRoaXMua2V5UGFpci5RKQoKICAgIC8vIEluIGNhc2UgS2kgaXMgdGhlIHBvaW50IGF0IGluZmluaXR5LCBwcm9jZWVkIHdpdGggdGhlIG5leHQgdmFsdWUgZm9yIGkKICAgIGlmIChjdXJ2ZS5pc0luZmluaXR5KEtpKSkgewogICAgICByZXR1cm4gdGhpcy5kZXJpdmUoaW5kZXggKyAxKQogICAgfQoKICAgIGRlcml2ZWRLZXlQYWlyID0gbmV3IEVDUGFpcihudWxsLCBLaSwgewogICAgICBuZXR3b3JrOiB0aGlzLmtleVBhaXIubmV0d29yawogICAgfSkKICB9CgogIHZhciBoZCA9IG5ldyBIRE5vZGUoZGVyaXZlZEtleVBhaXIsIElSKQogIGhkLmRlcHRoID0gdGhpcy5kZXB0aCArIDEKICBoZC5pbmRleCA9IGluZGV4CiAgaGQucGFyZW50RmluZ2VycHJpbnQgPSB0aGlzLmdldEZpbmdlcnByaW50KCkucmVhZFVJbnQzMkJFKDApCgogIHJldHVybiBoZAp9CgpIRE5vZGUucHJvdG90eXBlLmRlcml2ZUhhcmRlbmVkID0gZnVuY3Rpb24gKGluZGV4KSB7CiAgLy8gT25seSBkZXJpdmVzIGhhcmRlbmVkIHByaXZhdGUga2V5cyBieSBkZWZhdWx0CiAgcmV0dXJuIHRoaXMuZGVyaXZlKGluZGV4ICsgSEROb2RlLkhJR0hFU1RfQklUKQp9CgpIRE5vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gSEROb2RlLnByb3RvdHlwZS50b0Jhc2U1OAoKbW9kdWxlLmV4cG9ydHMgPSBIRE5vZGUKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2NyeXB0byI6MjcsIi4vZWNwYWlyIjoyOSwiLi9uZXR3b3JrcyI6MzQsIi4vdHlwZXMiOjQwLCJiaWdpIjoxOSwiYnM1OGNoZWNrIjo3NCwiYnVmZmVyIjo3MCwiY3JlYXRlLWhtYWMiOjg1LCJlY3VydmUiOjk5LCJ0eXBlZm9yY2UiOjE3M31dLDMyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSB7CiAgQmxvY2s6IHJlcXVpcmUoJy4vYmxvY2snKSwKICBFQ1BhaXI6IHJlcXVpcmUoJy4vZWNwYWlyJyksCiAgRUNTaWduYXR1cmU6IHJlcXVpcmUoJy4vZWNzaWduYXR1cmUnKSwKICBIRE5vZGU6IHJlcXVpcmUoJy4vaGRub2RlJyksCiAgVHJhbnNhY3Rpb246IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb24nKSwKICBUcmFuc2FjdGlvbkJ1aWxkZXI6IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb25fYnVpbGRlcicpLAoKICBhZGRyZXNzOiByZXF1aXJlKCcuL2FkZHJlc3MnKSwKICBidWZmZXJ1dGlsczogcmVxdWlyZSgnLi9idWZmZXJ1dGlscycpLAogIGNyeXB0bzogcmVxdWlyZSgnLi9jcnlwdG8nKSwKICBtZXNzYWdlOiByZXF1aXJlKCcuL21lc3NhZ2UnKSwKICBuZXR3b3JrczogcmVxdWlyZSgnLi9uZXR3b3JrcycpLAogIG9wY29kZXM6IHJlcXVpcmUoJy4vb3Bjb2RlcycpLAogIHNjcmlwdDogcmVxdWlyZSgnLi9zY3JpcHQnKQp9Cgp9LHsiLi9hZGRyZXNzIjoyNCwiLi9ibG9jayI6MjUsIi4vYnVmZmVydXRpbHMiOjI2LCIuL2NyeXB0byI6MjcsIi4vZWNwYWlyIjoyOSwiLi9lY3NpZ25hdHVyZSI6MzAsIi4vaGRub2RlIjozMSwiLi9tZXNzYWdlIjozMywiLi9uZXR3b3JrcyI6MzQsIi4vb3Bjb2RlcyI6MzUsIi4vc2NyaXB0IjozNiwiLi90cmFuc2FjdGlvbiI6MzgsIi4vdHJhbnNhY3Rpb25fYnVpbGRlciI6Mzl9XSwzMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJ1ZmZlcnV0aWxzID0gcmVxdWlyZSgnLi9idWZmZXJ1dGlscycpCnZhciBiY3J5cHRvID0gcmVxdWlyZSgnLi9jcnlwdG8nKQp2YXIgZWNkc2EgPSByZXF1aXJlKCcuL2VjZHNhJykKdmFyIG5ldHdvcmtzID0gcmVxdWlyZSgnLi9uZXR3b3JrcycpCgp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQp2YXIgRUNQYWlyID0gcmVxdWlyZSgnLi9lY3BhaXInKQp2YXIgRUNTaWduYXR1cmUgPSByZXF1aXJlKCcuL2Vjc2lnbmF0dXJlJykKCmZ1bmN0aW9uIG1hZ2ljSGFzaCAobWVzc2FnZSwgbmV0d29yaykgewogIHZhciBtZXNzYWdlUHJlZml4ID0gbmV3IEJ1ZmZlcihuZXR3b3JrLm1lc3NhZ2VQcmVmaXgpCiAgdmFyIG1lc3NhZ2VCdWZmZXIgPSBuZXcgQnVmZmVyKG1lc3NhZ2UpCiAgdmFyIGxlbmd0aEJ1ZmZlciA9IGJ1ZmZlcnV0aWxzLnZhckludEJ1ZmZlcihtZXNzYWdlQnVmZmVyLmxlbmd0aCkKCiAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW21lc3NhZ2VQcmVmaXgsIGxlbmd0aEJ1ZmZlciwgbWVzc2FnZUJ1ZmZlcl0pCiAgcmV0dXJuIGJjcnlwdG8uaGFzaDI1NihidWZmZXIpCn0KCmZ1bmN0aW9uIHNpZ24gKGtleVBhaXIsIG1lc3NhZ2UsIG5ldHdvcmspIHsKICBuZXR3b3JrID0gbmV0d29yayB8fCBuZXR3b3Jrcy5iaXRjb2luCgogIHZhciBoYXNoID0gbWFnaWNIYXNoKG1lc3NhZ2UsIG5ldHdvcmspCiAgdmFyIHNpZ25hdHVyZSA9IGtleVBhaXIuc2lnbihoYXNoKQogIHZhciBlID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGhhc2gpCiAgdmFyIGkgPSBlY2RzYS5jYWxjUHViS2V5UmVjb3ZlcnlQYXJhbShlLCBzaWduYXR1cmUsIGtleVBhaXIuUSkKCiAgcmV0dXJuIHNpZ25hdHVyZS50b0NvbXBhY3QoaSwga2V5UGFpci5jb21wcmVzc2VkKQp9CgpmdW5jdGlvbiB2ZXJpZnkgKGFkZHJlc3MsIHNpZ25hdHVyZSwgbWVzc2FnZSwgbmV0d29yaykgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKHNpZ25hdHVyZSkpIHsKICAgIHNpZ25hdHVyZSA9IG5ldyBCdWZmZXIoc2lnbmF0dXJlLCAnYmFzZTY0JykKICB9CgogIG5ldHdvcmsgPSBuZXR3b3JrIHx8IG5ldHdvcmtzLmJpdGNvaW4KCiAgdmFyIGhhc2ggPSBtYWdpY0hhc2gobWVzc2FnZSwgbmV0d29yaykKICB2YXIgcGFyc2VkID0gRUNTaWduYXR1cmUucGFyc2VDb21wYWN0KHNpZ25hdHVyZSkKICB2YXIgZSA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihoYXNoKQogIHZhciBRID0gZWNkc2EucmVjb3ZlclB1YktleShlLCBwYXJzZWQuc2lnbmF0dXJlLCBwYXJzZWQuaSkKCiAgdmFyIGtleVBhaXIgPSBuZXcgRUNQYWlyKG51bGwsIFEsIHsKICAgIGNvbXByZXNzZWQ6IHBhcnNlZC5jb21wcmVzc2VkLAogICAgbmV0d29yazogbmV0d29yawogIH0pCgogIHJldHVybiBrZXlQYWlyLmdldEFkZHJlc3MoKSA9PT0gYWRkcmVzcwp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBtYWdpY0hhc2g6IG1hZ2ljSGFzaCwKICBzaWduOiBzaWduLAogIHZlcmlmeTogdmVyaWZ5Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2J1ZmZlcnV0aWxzIjoyNiwiLi9jcnlwdG8iOjI3LCIuL2VjZHNhIjoyOCwiLi9lY3BhaXIiOjI5LCIuL2Vjc2lnbmF0dXJlIjozMCwiLi9uZXR3b3JrcyI6MzQsImJpZ2kiOjE5LCJidWZmZXIiOjcwfV0sMzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBodHRwczovL2VuLmJpdGNvaW4uaXQvd2lraS9MaXN0X29mX2FkZHJlc3NfcHJlZml4ZXMKLy8gRG9nZWNvaW4gQklQMzIgaXMgYSBwcm9wb3NlZCBzdGFuZGFyZDogaHR0cHM6Ly9iaXRjb2ludGFsay5vcmcvaW5kZXgucGhwP3RvcGljPTQwOTczMQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgYml0Y29pbjogewogICAgbWVzc2FnZVByZWZpeDogJ1x4MThCaXRjb2luIFNpZ25lZCBNZXNzYWdlOlxuJywKICAgIGJpcDMyOiB7CiAgICAgIHB1YmxpYzogMHgwNDg4YjIxZSwKICAgICAgcHJpdmF0ZTogMHgwNDg4YWRlNAogICAgfSwKICAgIHB1YktleUhhc2g6IDB4MDAsCiAgICBzY3JpcHRIYXNoOiAweDA1LAogICAgd2lmOiAweDgwLAogICAgZHVzdFRocmVzaG9sZDogNTQ2IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpdGNvaW4vYmxvYi92MC45LjIvc3JjL2NvcmUuaCNMMTUxLUwxNjIKICB9LAogIHRlc3RuZXQ6IHsKICAgIG1lc3NhZ2VQcmVmaXg6ICdceDE4Qml0Y29pbiBTaWduZWQgTWVzc2FnZTpcbicsCiAgICBiaXAzMjogewogICAgICBwdWJsaWM6IDB4MDQzNTg3Y2YsCiAgICAgIHByaXZhdGU6IDB4MDQzNTgzOTQKICAgIH0sCiAgICBwdWJLZXlIYXNoOiAweDZmLAogICAgc2NyaXB0SGFzaDogMHhjNCwKICAgIHdpZjogMHhlZiwKICAgIGR1c3RUaHJlc2hvbGQ6IDU0NgogIH0sCiAgbGl0ZWNvaW46IHsKICAgIG1lc3NhZ2VQcmVmaXg6ICdceDE5TGl0ZWNvaW4gU2lnbmVkIE1lc3NhZ2U6XG4nLAogICAgYmlwMzI6IHsKICAgICAgcHVibGljOiAweDAxOWRhNDYyLAogICAgICBwcml2YXRlOiAweDAxOWQ5Y2ZlCiAgICB9LAogICAgcHViS2V5SGFzaDogMHgzMCwKICAgIHNjcmlwdEhhc2g6IDB4MDUsCiAgICB3aWY6IDB4YjAsCiAgICBkdXN0VGhyZXNob2xkOiAwIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9saXRlY29pbi1wcm9qZWN0L2xpdGVjb2luL2Jsb2IvdjAuOC43LjIvc3JjL21haW4uY3BwI0wzNjAtTDM2NQogIH0sCiAgZG9nZWNvaW46IHsKICAgIG1lc3NhZ2VQcmVmaXg6ICdceDE5RG9nZWNvaW4gU2lnbmVkIE1lc3NhZ2U6XG4nLAogICAgYmlwMzI6IHsKICAgICAgcHVibGljOiAweDAyZmFjYWZkLAogICAgICBwcml2YXRlOiAweDAyZmFjMzk4CiAgICB9LAogICAgcHViS2V5SGFzaDogMHgxZSwKICAgIHNjcmlwdEhhc2g6IDB4MTYsCiAgICB3aWY6IDB4OWUsCiAgICBkdXN0VGhyZXNob2xkOiAwIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kb2dlY29pbi9kb2dlY29pbi9ibG9iL3YxLjcuMS9zcmMvY29yZS5oI0wxNTUtTDE2MAogIH0KfQoKfSx7fV0sMzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cz17CiAgIk9QX0ZBTFNFIjogMCwKICAiT1BfMCI6IDAsCiAgIk9QX1BVU0hEQVRBMSI6IDc2LAogICJPUF9QVVNIREFUQTIiOiA3NywKICAiT1BfUFVTSERBVEE0IjogNzgsCiAgIk9QXzFORUdBVEUiOiA3OSwKICAiT1BfUkVTRVJWRUQiOiA4MCwKICAiT1BfMSI6IDgxLAogICJPUF9UUlVFIjogODEsCiAgIk9QXzIiOiA4MiwKICAiT1BfMyI6IDgzLAogICJPUF80IjogODQsCiAgIk9QXzUiOiA4NSwKICAiT1BfNiI6IDg2LAogICJPUF83IjogODcsCiAgIk9QXzgiOiA4OCwKICAiT1BfOSI6IDg5LAogICJPUF8xMCI6IDkwLAogICJPUF8xMSI6IDkxLAogICJPUF8xMiI6IDkyLAogICJPUF8xMyI6IDkzLAogICJPUF8xNCI6IDk0LAogICJPUF8xNSI6IDk1LAogICJPUF8xNiI6IDk2LAoKICAiT1BfTk9QIjogOTcsCiAgIk9QX1ZFUiI6IDk4LAogICJPUF9JRiI6IDk5LAogICJPUF9OT1RJRiI6IDEwMCwKICAiT1BfVkVSSUYiOiAxMDEsCiAgIk9QX1ZFUk5PVElGIjogMTAyLAogICJPUF9FTFNFIjogMTAzLAogICJPUF9FTkRJRiI6IDEwNCwKICAiT1BfVkVSSUZZIjogMTA1LAogICJPUF9SRVRVUk4iOiAxMDYsCgogICJPUF9UT0FMVFNUQUNLIjogMTA3LAogICJPUF9GUk9NQUxUU1RBQ0siOiAxMDgsCiAgIk9QXzJEUk9QIjogMTA5LAogICJPUF8yRFVQIjogMTEwLAogICJPUF8zRFVQIjogMTExLAogICJPUF8yT1ZFUiI6IDExMiwKICAiT1BfMlJPVCI6IDExMywKICAiT1BfMlNXQVAiOiAxMTQsCiAgIk9QX0lGRFVQIjogMTE1LAogICJPUF9ERVBUSCI6IDExNiwKICAiT1BfRFJPUCI6IDExNywKICAiT1BfRFVQIjogMTE4LAogICJPUF9OSVAiOiAxMTksCiAgIk9QX09WRVIiOiAxMjAsCiAgIk9QX1BJQ0siOiAxMjEsCiAgIk9QX1JPTEwiOiAxMjIsCiAgIk9QX1JPVCI6IDEyMywKICAiT1BfU1dBUCI6IDEyNCwKICAiT1BfVFVDSyI6IDEyNSwKCiAgIk9QX0NBVCI6IDEyNiwKICAiT1BfU1VCU1RSIjogMTI3LAogICJPUF9MRUZUIjogMTI4LAogICJPUF9SSUdIVCI6IDEyOSwKICAiT1BfU0laRSI6IDEzMCwKCiAgIk9QX0lOVkVSVCI6IDEzMSwKICAiT1BfQU5EIjogMTMyLAogICJPUF9PUiI6IDEzMywKICAiT1BfWE9SIjogMTM0LAogICJPUF9FUVVBTCI6IDEzNSwKICAiT1BfRVFVQUxWRVJJRlkiOiAxMzYsCiAgIk9QX1JFU0VSVkVEMSI6IDEzNywKICAiT1BfUkVTRVJWRUQyIjogMTM4LAoKICAiT1BfMUFERCI6IDEzOSwKICAiT1BfMVNVQiI6IDE0MCwKICAiT1BfMk1VTCI6IDE0MSwKICAiT1BfMkRJViI6IDE0MiwKICAiT1BfTkVHQVRFIjogMTQzLAogICJPUF9BQlMiOiAxNDQsCiAgIk9QX05PVCI6IDE0NSwKICAiT1BfME5PVEVRVUFMIjogMTQ2LAogICJPUF9BREQiOiAxNDcsCiAgIk9QX1NVQiI6IDE0OCwKICAiT1BfTVVMIjogMTQ5LAogICJPUF9ESVYiOiAxNTAsCiAgIk9QX01PRCI6IDE1MSwKICAiT1BfTFNISUZUIjogMTUyLAogICJPUF9SU0hJRlQiOiAxNTMsCgogICJPUF9CT09MQU5EIjogMTU0LAogICJPUF9CT09MT1IiOiAxNTUsCiAgIk9QX05VTUVRVUFMIjogMTU2LAogICJPUF9OVU1FUVVBTFZFUklGWSI6IDE1NywKICAiT1BfTlVNTk9URVFVQUwiOiAxNTgsCiAgIk9QX0xFU1NUSEFOIjogMTU5LAogICJPUF9HUkVBVEVSVEhBTiI6IDE2MCwKICAiT1BfTEVTU1RIQU5PUkVRVUFMIjogMTYxLAogICJPUF9HUkVBVEVSVEhBTk9SRVFVQUwiOiAxNjIsCiAgIk9QX01JTiI6IDE2MywKICAiT1BfTUFYIjogMTY0LAoKICAiT1BfV0lUSElOIjogMTY1LAoKICAiT1BfUklQRU1EMTYwIjogMTY2LAogICJPUF9TSEExIjogMTY3LAogICJPUF9TSEEyNTYiOiAxNjgsCiAgIk9QX0hBU0gxNjAiOiAxNjksCiAgIk9QX0hBU0gyNTYiOiAxNzAsCiAgIk9QX0NPREVTRVBBUkFUT1IiOiAxNzEsCiAgIk9QX0NIRUNLU0lHIjogMTcyLAogICJPUF9DSEVDS1NJR1ZFUklGWSI6IDE3MywKICAiT1BfQ0hFQ0tNVUxUSVNJRyI6IDE3NCwKICAiT1BfQ0hFQ0tNVUxUSVNJR1ZFUklGWSI6IDE3NSwKCiAgIk9QX05PUDEiOiAxNzYsCiAgIk9QX05PUDIiOiAxNzcsCiAgIk9QX0NIRUNLTE9DS1RJTUVWRVJJRlkiOiAxNzcsCgogICJPUF9OT1AzIjogMTc4LAogICJPUF9OT1A0IjogMTc5LAogICJPUF9OT1A1IjogMTgwLAogICJPUF9OT1A2IjogMTgxLAogICJPUF9OT1A3IjogMTgyLAogICJPUF9OT1A4IjogMTgzLAogICJPUF9OT1A5IjogMTg0LAogICJPUF9OT1AxMCI6IDE4NSwKCiAgIk9QX1BVQktFWUhBU0giOiAyNTMsCiAgIk9QX1BVQktFWSI6IDI1NCwKICAiT1BfSU5WQUxJRE9QQ09ERSI6IDI1NQp9Cgp9LHt9XSwzNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJpcDY2ID0gcmVxdWlyZSgnYmlwNjYnKQp2YXIgYnVmZmVydXRpbHMgPSByZXF1aXJlKCcuL2J1ZmZlcnV0aWxzJykKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCnZhciB0eXBlcyA9IHJlcXVpcmUoJy4vdHlwZXMnKQoKdmFyIE9QUyA9IHJlcXVpcmUoJy4vb3Bjb2RlcycpCnZhciBSRVZFUlNFX09QUyA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIHJlc3VsdCA9IHt9CiAgZm9yICh2YXIgb3AgaW4gT1BTKSB7CiAgICB2YXIgY29kZSA9IE9QU1tvcF0KICAgIHJlc3VsdFtjb2RlXSA9IG9wCiAgfQogIHJldHVybiByZXN1bHQKfSkoKQoKdmFyIE9QX0lOVF9CQVNFID0gT1BTLk9QX1JFU0VSVkVEIC8vIE9QXzEgLSAxCgpmdW5jdGlvbiB0b0FTTSAoY2h1bmtzKSB7CiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVua3MpKSB7CiAgICBjaHVua3MgPSBkZWNvbXBpbGUoY2h1bmtzKQogIH0KCiAgcmV0dXJuIGNodW5rcy5tYXAoZnVuY3Rpb24gKGNodW5rKSB7CiAgICAvLyBkYXRhPwogICAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpIHJldHVybiBjaHVuay50b1N0cmluZygnaGV4JykKCiAgICAvLyBvcGNvZGUhCiAgICByZXR1cm4gUkVWRVJTRV9PUFNbY2h1bmtdCiAgfSkuam9pbignICcpCn0KCmZ1bmN0aW9uIGZyb21BU00gKGFzbSkgewogIHR5cGVmb3JjZSh0eXBlcy5TdHJpbmcsIGFzbSkKCiAgcmV0dXJuIGNvbXBpbGUoYXNtLnNwbGl0KCcgJykubWFwKGZ1bmN0aW9uIChjaHVua1N0cikgewogICAgLy8gb3Bjb2RlPwogICAgaWYgKE9QU1tjaHVua1N0cl0gIT09IHVuZGVmaW5lZCkgcmV0dXJuIE9QU1tjaHVua1N0cl0KCiAgICAvLyBkYXRhIQogICAgcmV0dXJuIG5ldyBCdWZmZXIoY2h1bmtTdHIsICdoZXgnKQogIH0pKQp9CgpmdW5jdGlvbiBjb21waWxlIChjaHVua3MpIHsKICAvLyBUT0RPOiByZW1vdmUgbWUKICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rcykpIHJldHVybiBjaHVua3MKCiAgdHlwZWZvcmNlKHR5cGVzLkFycmF5LCBjaHVua3MpCgogIHZhciBidWZmZXJTaXplID0gY2h1bmtzLnJlZHVjZShmdW5jdGlvbiAoYWNjdW0sIGNodW5rKSB7CiAgICAvLyBkYXRhIGNodW5rCiAgICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgewogICAgICByZXR1cm4gYWNjdW0gKyBidWZmZXJ1dGlscy5wdXNoRGF0YVNpemUoY2h1bmsubGVuZ3RoKSArIGNodW5rLmxlbmd0aAogICAgfQoKICAgIC8vIG9wY29kZQogICAgcmV0dXJuIGFjY3VtICsgMQogIH0sIDAuMCkKCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyU2l6ZSkKICB2YXIgb2Zmc2V0ID0gMAoKICBjaHVua3MuZm9yRWFjaChmdW5jdGlvbiAoY2h1bmspIHsKICAgIC8vIGRhdGEgY2h1bmsKICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSB7CiAgICAgIG9mZnNldCArPSBidWZmZXJ1dGlscy53cml0ZVB1c2hEYXRhSW50KGJ1ZmZlciwgY2h1bmsubGVuZ3RoLCBvZmZzZXQpCgogICAgICBjaHVuay5jb3B5KGJ1ZmZlciwgb2Zmc2V0KQogICAgICBvZmZzZXQgKz0gY2h1bmsubGVuZ3RoCgogICAgLy8gb3Bjb2RlCiAgICB9IGVsc2UgewogICAgICBidWZmZXIud3JpdGVVSW50OChjaHVuaywgb2Zmc2V0KQogICAgICBvZmZzZXQgKz0gMQogICAgfQogIH0pCgogIGlmIChvZmZzZXQgIT09IGJ1ZmZlci5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGRlY29kZSBjaHVua3MnKQogIHJldHVybiBidWZmZXIKfQoKZnVuY3Rpb24gZGVjb21waWxlIChidWZmZXIpIHsKICAvLyBUT0RPOiByZW1vdmUgbWUKICBpZiAodHlwZXMuQXJyYXkoYnVmZmVyKSkgcmV0dXJuIGJ1ZmZlcgoKICB0eXBlZm9yY2UodHlwZXMuQnVmZmVyLCBidWZmZXIpCgogIHZhciBjaHVua3MgPSBbXQogIHZhciBpID0gMAoKICB3aGlsZSAoaSA8IGJ1ZmZlci5sZW5ndGgpIHsKICAgIHZhciBvcGNvZGUgPSBidWZmZXJbaV0KCiAgICAvLyBkYXRhIGNodW5rCiAgICBpZiAoKG9wY29kZSA+IE9QUy5PUF8wKSAmJiAob3Bjb2RlIDw9IE9QUy5PUF9QVVNIREFUQTQpKSB7CiAgICAgIHZhciBkID0gYnVmZmVydXRpbHMucmVhZFB1c2hEYXRhSW50KGJ1ZmZlciwgaSkKCiAgICAgIC8vIGRpZCByZWFkaW5nIGEgcHVzaERhdGFJbnQgZmFpbD8gZW1wdHkgc2NyaXB0CiAgICAgIGlmIChkID09PSBudWxsKSByZXR1cm4gW10KICAgICAgaSArPSBkLnNpemUKCiAgICAgIC8vIGF0dGVtcHQgdG8gcmVhZCB0b28gbXVjaCBkYXRhPyBlbXB0eSBzY3JpcHQKICAgICAgaWYgKGkgKyBkLm51bWJlciA+IGJ1ZmZlci5sZW5ndGgpIHJldHVybiBbXQoKICAgICAgdmFyIGRhdGEgPSBidWZmZXIuc2xpY2UoaSwgaSArIGQubnVtYmVyKQogICAgICBpICs9IGQubnVtYmVyCgogICAgICBjaHVua3MucHVzaChkYXRhKQoKICAgIC8vIG9wY29kZQogICAgfSBlbHNlIHsKICAgICAgY2h1bmtzLnB1c2gob3Bjb2RlKQoKICAgICAgaSArPSAxCiAgICB9CiAgfQoKICByZXR1cm4gY2h1bmtzCn0KCmZ1bmN0aW9uIGlzQ2Fub25pY2FsUHViS2V5IChidWZmZXIpIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWZmZXIpKSByZXR1cm4gZmFsc2UKICBpZiAoYnVmZmVyLmxlbmd0aCA8IDMzKSByZXR1cm4gZmFsc2UKCiAgc3dpdGNoIChidWZmZXJbMF0pIHsKICAgIGNhc2UgMHgwMjoKICAgIGNhc2UgMHgwMzoKICAgICAgcmV0dXJuIGJ1ZmZlci5sZW5ndGggPT09IDMzCiAgICBjYXNlIDB4MDQ6CiAgICAgIHJldHVybiBidWZmZXIubGVuZ3RoID09PSA2NQogIH0KCiAgcmV0dXJuIGZhbHNlCn0KCmZ1bmN0aW9uIGlzQ2Fub25pY2FsU2lnbmF0dXJlIChidWZmZXIpIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWZmZXIpKSByZXR1cm4gZmFsc2UKICBpZiAoIWlzRGVmaW5lZEhhc2hUeXBlKGJ1ZmZlcltidWZmZXIubGVuZ3RoIC0gMV0pKSByZXR1cm4gZmFsc2UKCiAgcmV0dXJuIGJpcDY2LmNoZWNrKGJ1ZmZlci5zbGljZSgwLCAtMSkpCn0KCmZ1bmN0aW9uIGlzRGVmaW5lZEhhc2hUeXBlIChoYXNoVHlwZSkgewogIHZhciBoYXNoVHlwZU1vZCA9IGhhc2hUeXBlICYgfjB4ODAKCi8vIHJldHVybiBoYXNoVHlwZU1vZCA+IFNJR0hBU0hfQUxMICYmIGhhc2hUeXBlTW9kIDwgU0lHSEFTSF9TSU5HTEUKICByZXR1cm4gaGFzaFR5cGVNb2QgPiAweDAwICYmIGhhc2hUeXBlTW9kIDwgMHgwNAp9CgpmdW5jdGlvbiBpc1B1YktleUhhc2hJbnB1dCAoc2NyaXB0KSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCgogIHJldHVybiBjaHVua3MubGVuZ3RoID09PSAyICYmCiAgICBpc0Nhbm9uaWNhbFNpZ25hdHVyZShjaHVua3NbMF0pICYmCiAgICBpc0Nhbm9uaWNhbFB1YktleShjaHVua3NbMV0pCn0KCmZ1bmN0aW9uIGlzUHViS2V5SGFzaE91dHB1dCAoc2NyaXB0KSB7CiAgdmFyIGJ1ZmZlciA9IGNvbXBpbGUoc2NyaXB0KQoKICByZXR1cm4gYnVmZmVyLmxlbmd0aCA9PT0gMjUgJiYKICAgIGJ1ZmZlclswXSA9PT0gT1BTLk9QX0RVUCAmJgogICAgYnVmZmVyWzFdID09PSBPUFMuT1BfSEFTSDE2MCAmJgogICAgYnVmZmVyWzJdID09PSAweDE0ICYmCiAgICBidWZmZXJbMjNdID09PSBPUFMuT1BfRVFVQUxWRVJJRlkgJiYKICAgIGJ1ZmZlclsyNF0gPT09IE9QUy5PUF9DSEVDS1NJRwp9CgpmdW5jdGlvbiBpc1B1YktleUlucHV0IChzY3JpcHQpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKCiAgcmV0dXJuIGNodW5rcy5sZW5ndGggPT09IDEgJiYKICAgIGlzQ2Fub25pY2FsU2lnbmF0dXJlKGNodW5rc1swXSkKfQoKZnVuY3Rpb24gaXNQdWJLZXlPdXRwdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQoKICByZXR1cm4gY2h1bmtzLmxlbmd0aCA9PT0gMiAmJgogICAgaXNDYW5vbmljYWxQdWJLZXkoY2h1bmtzWzBdKSAmJgogICAgY2h1bmtzWzFdID09PSBPUFMuT1BfQ0hFQ0tTSUcKfQoKZnVuY3Rpb24gaXNTY3JpcHRIYXNoSW5wdXQgKHNjcmlwdCwgYWxsb3dJbmNvbXBsZXRlKSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCiAgaWYgKGNodW5rcy5sZW5ndGggPCAyKSByZXR1cm4gZmFsc2UKCiAgdmFyIGxhc3RDaHVuayA9IGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMV0KICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihsYXN0Q2h1bmspKSByZXR1cm4gZmFsc2UKCiAgdmFyIHNjcmlwdFNpZ0NodW5rcyA9IGNodW5rcy5zbGljZSgwLCAtMSkKICB2YXIgcmVkZWVtU2NyaXB0Q2h1bmtzID0gZGVjb21waWxlKGxhc3RDaHVuaykKCiAgLy8gaXMgcmVkZWVtU2NyaXB0IGEgdmFsaWQgc2NyaXB0PwogIGlmIChyZWRlZW1TY3JpcHRDaHVua3MubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2UKCiAgcmV0dXJuIGNsYXNzaWZ5SW5wdXQoc2NyaXB0U2lnQ2h1bmtzLCBhbGxvd0luY29tcGxldGUpID09PSBjbGFzc2lmeU91dHB1dChyZWRlZW1TY3JpcHRDaHVua3MpCn0KCmZ1bmN0aW9uIGlzU2NyaXB0SGFzaE91dHB1dCAoc2NyaXB0KSB7CiAgdmFyIGJ1ZmZlciA9IGNvbXBpbGUoc2NyaXB0KQoKICByZXR1cm4gYnVmZmVyLmxlbmd0aCA9PT0gMjMgJiYKICAgIGJ1ZmZlclswXSA9PT0gT1BTLk9QX0hBU0gxNjAgJiYKICAgIGJ1ZmZlclsxXSA9PT0gMHgxNCAmJgogICAgYnVmZmVyWzIyXSA9PT0gT1BTLk9QX0VRVUFMCn0KCi8vIGFsbG93SW5jb21wbGV0ZSBpcyB0byBhY2NvdW50IGZvciBjb21iaW5pbmcgc2lnbmF0dXJlcwovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYml0Y29pbi9ibG9iL2Y0MjUwNTA1NDY2NDRhMzZiMGI4ZTBlYjJmNjkzNGEzZTBmNmY4MGYvc3JjL3NjcmlwdC9zaWduLmNwcCNMMTk1LUwxOTcKZnVuY3Rpb24gaXNNdWx0aXNpZ0lucHV0IChzY3JpcHQsIGFsbG93SW5jb21wbGV0ZSkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQogIGlmIChjaHVua3MubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlCiAgaWYgKGNodW5rc1swXSAhPT0gT1BTLk9QXzApIHJldHVybiBmYWxzZQoKICBpZiAoYWxsb3dJbmNvbXBsZXRlKSB7CiAgICByZXR1cm4gY2h1bmtzLnNsaWNlKDEpLmV2ZXJ5KGZ1bmN0aW9uIChjaHVuaykgewogICAgICByZXR1cm4gY2h1bmsgPT09IE9QUy5PUF8wIHx8IGlzQ2Fub25pY2FsU2lnbmF0dXJlKGNodW5rKQogICAgfSkKICB9CgogIHJldHVybiBjaHVua3Muc2xpY2UoMSkuZXZlcnkoaXNDYW5vbmljYWxTaWduYXR1cmUpCn0KCmZ1bmN0aW9uIGlzTXVsdGlzaWdPdXRwdXQgKHNjcmlwdCkgewogIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0KQogIGlmIChjaHVua3MubGVuZ3RoIDwgNCkgcmV0dXJuIGZhbHNlCiAgaWYgKGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMV0gIT09IE9QUy5PUF9DSEVDS01VTFRJU0lHKSByZXR1cm4gZmFsc2UKCiAgdmFyIG1PcCA9IGNodW5rc1swXQogIHZhciBuT3AgPSBjaHVua3NbY2h1bmtzLmxlbmd0aCAtIDJdCgogIGlmICghdHlwZXMuTnVtYmVyKG1PcCkpIHJldHVybiBmYWxzZQogIGlmICghdHlwZXMuTnVtYmVyKG5PcCkpIHJldHVybiBmYWxzZQoKICB2YXIgbSA9IG1PcCAtIE9QX0lOVF9CQVNFCiAgdmFyIG4gPSBuT3AgLSBPUF9JTlRfQkFTRQoKICAvLyAwIDwgbSA8PSBuIDw9IDE2CiAgaWYgKG0gPD0gMCkgcmV0dXJuIGZhbHNlCiAgaWYgKG0gPiBuKSByZXR1cm4gZmFsc2UKICBpZiAobiA+IDE2KSByZXR1cm4gZmFsc2UKICBpZiAobiAhPT0gY2h1bmtzLmxlbmd0aCAtIDMpIHJldHVybiBmYWxzZQoKICByZXR1cm4gY2h1bmtzLnNsaWNlKDEsIC0yKS5ldmVyeShpc0Nhbm9uaWNhbFB1YktleSkKfQoKZnVuY3Rpb24gaXNOdWxsRGF0YU91dHB1dCAoc2NyaXB0KSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCiAgcmV0dXJuIGNodW5rc1swXSA9PT0gT1BTLk9QX1JFVFVSTgp9CgpmdW5jdGlvbiBjbGFzc2lmeU91dHB1dCAoc2NyaXB0KSB7CiAgdmFyIGNodW5rcyA9IGRlY29tcGlsZShzY3JpcHQpCgogIGlmIChpc1B1YktleUhhc2hPdXRwdXQoY2h1bmtzKSkgewogICAgcmV0dXJuICdwdWJrZXloYXNoJwogIH0gZWxzZSBpZiAoaXNTY3JpcHRIYXNoT3V0cHV0KGNodW5rcykpIHsKICAgIHJldHVybiAnc2NyaXB0aGFzaCcKICB9IGVsc2UgaWYgKGlzTXVsdGlzaWdPdXRwdXQoY2h1bmtzKSkgewogICAgcmV0dXJuICdtdWx0aXNpZycKICB9IGVsc2UgaWYgKGlzUHViS2V5T3V0cHV0KGNodW5rcykpIHsKICAgIHJldHVybiAncHVia2V5JwogIH0gZWxzZSBpZiAoaXNOdWxsRGF0YU91dHB1dChjaHVua3MpKSB7CiAgICByZXR1cm4gJ251bGxkYXRhJwogIH0KCiAgcmV0dXJuICdub25zdGFuZGFyZCcKfQoKZnVuY3Rpb24gY2xhc3NpZnlJbnB1dCAoc2NyaXB0LCBhbGxvd0luY29tcGxldGUpIHsKICB2YXIgY2h1bmtzID0gZGVjb21waWxlKHNjcmlwdCkKCiAgaWYgKGlzUHViS2V5SGFzaElucHV0KGNodW5rcykpIHsKICAgIHJldHVybiAncHVia2V5aGFzaCcKICB9IGVsc2UgaWYgKGlzTXVsdGlzaWdJbnB1dChjaHVua3MsIGFsbG93SW5jb21wbGV0ZSkpIHsKICAgIHJldHVybiAnbXVsdGlzaWcnCiAgfSBlbHNlIGlmIChpc1NjcmlwdEhhc2hJbnB1dChjaHVua3MsIGFsbG93SW5jb21wbGV0ZSkpIHsKICAgIHJldHVybiAnc2NyaXB0aGFzaCcKICB9IGVsc2UgaWYgKGlzUHViS2V5SW5wdXQoY2h1bmtzKSkgewogICAgcmV0dXJuICdwdWJrZXknCiAgfQoKICByZXR1cm4gJ25vbnN0YW5kYXJkJwp9CgovLyBTdGFuZGFyZCBTY3JpcHQgVGVtcGxhdGVzCi8vIHtwdWJLZXl9IE9QX0NIRUNLU0lHCmZ1bmN0aW9uIHB1YktleU91dHB1dCAocHViS2V5KSB7CiAgcmV0dXJuIGNvbXBpbGUoW3B1YktleSwgT1BTLk9QX0NIRUNLU0lHXSkKfQoKLy8gT1BfRFVQIE9QX0hBU0gxNjAge3B1YktleUhhc2h9IE9QX0VRVUFMVkVSSUZZIE9QX0NIRUNLU0lHCmZ1bmN0aW9uIHB1YktleUhhc2hPdXRwdXQgKHB1YktleUhhc2gpIHsKICB0eXBlZm9yY2UodHlwZXMuSGFzaDE2MGJpdCwgcHViS2V5SGFzaCkKCiAgcmV0dXJuIGNvbXBpbGUoW09QUy5PUF9EVVAsIE9QUy5PUF9IQVNIMTYwLCBwdWJLZXlIYXNoLCBPUFMuT1BfRVFVQUxWRVJJRlksIE9QUy5PUF9DSEVDS1NJR10pCn0KCi8vIE9QX0hBU0gxNjAge3NjcmlwdEhhc2h9IE9QX0VRVUFMCmZ1bmN0aW9uIHNjcmlwdEhhc2hPdXRwdXQgKHNjcmlwdEhhc2gpIHsKICB0eXBlZm9yY2UodHlwZXMuSGFzaDE2MGJpdCwgc2NyaXB0SGFzaCkKCiAgcmV0dXJuIGNvbXBpbGUoW09QUy5PUF9IQVNIMTYwLCBzY3JpcHRIYXNoLCBPUFMuT1BfRVFVQUxdKQp9CgovLyBtIFtwdWJLZXlzIC4uLl0gbiBPUF9DSEVDS01VTFRJU0lHCmZ1bmN0aW9uIG11bHRpc2lnT3V0cHV0IChtLCBwdWJLZXlzKSB7CiAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLk51bWJlciwgW3R5cGVzLkJ1ZmZlcl0pLCBhcmd1bWVudHMpCgogIHZhciBuID0gcHViS2V5cy5sZW5ndGgKICBpZiAobiA8IG0pIHRocm93IG5ldyBFcnJvcignTm90IGVub3VnaCBwdWJLZXlzIHByb3ZpZGVkJykKCiAgcmV0dXJuIGNvbXBpbGUoW10uY29uY2F0KAogICAgT1BfSU5UX0JBU0UgKyBtLAogICAgcHViS2V5cywKICAgIE9QX0lOVF9CQVNFICsgbiwKICAgIE9QUy5PUF9DSEVDS01VTFRJU0lHCiAgKSkKfQoKLy8ge3NpZ25hdHVyZX0KZnVuY3Rpb24gcHViS2V5SW5wdXQgKHNpZ25hdHVyZSkgewogIHR5cGVmb3JjZSh0eXBlcy5CdWZmZXIsIHNpZ25hdHVyZSkKCiAgcmV0dXJuIGNvbXBpbGUoW3NpZ25hdHVyZV0pCn0KCi8vIHtzaWduYXR1cmV9IHtwdWJLZXl9CmZ1bmN0aW9uIHB1YktleUhhc2hJbnB1dCAoc2lnbmF0dXJlLCBwdWJLZXkpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuQnVmZmVyLCB0eXBlcy5CdWZmZXIpLCBhcmd1bWVudHMpCgogIHJldHVybiBjb21waWxlKFtzaWduYXR1cmUsIHB1YktleV0pCn0KCi8vIDxzY3JpcHRTaWc+IHtzZXJpYWxpemVkIHNjcmlwdFB1YktleSBzY3JpcHR9CmZ1bmN0aW9uIHNjcmlwdEhhc2hJbnB1dCAoc2NyaXB0U2lnLCBzY3JpcHRQdWJLZXkpIHsKICB2YXIgc2NyaXB0U2lnQ2h1bmtzID0gZGVjb21waWxlKHNjcmlwdFNpZykKICB2YXIgc2VyaWFsaXplZFNjcmlwdFB1YktleSA9IGNvbXBpbGUoc2NyaXB0UHViS2V5KQoKICByZXR1cm4gY29tcGlsZShbXS5jb25jYXQoCiAgICBzY3JpcHRTaWdDaHVua3MsCiAgICBzZXJpYWxpemVkU2NyaXB0UHViS2V5CiAgKSkKfQoKLy8gT1BfMCBbc2lnbmF0dXJlcyAuLi5dCmZ1bmN0aW9uIG11bHRpc2lnSW5wdXQgKHNpZ25hdHVyZXMsIHNjcmlwdFB1YktleSkgewogIGlmIChzY3JpcHRQdWJLZXkpIHsKICAgIHZhciBjaHVua3MgPSBkZWNvbXBpbGUoc2NyaXB0UHViS2V5KQogICAgaWYgKCFpc011bHRpc2lnT3V0cHV0KGNodW5rcykpIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgbXVsdGlzaWcgc2NyaXB0UHViS2V5JykKCiAgICB2YXIgbU9wID0gY2h1bmtzWzBdCiAgICB2YXIgbk9wID0gY2h1bmtzW2NodW5rcy5sZW5ndGggLSAyXQogICAgdmFyIG0gPSBtT3AgLSBPUF9JTlRfQkFTRQogICAgdmFyIG4gPSBuT3AgLSBPUF9JTlRfQkFTRQoKICAgIGlmIChzaWduYXR1cmVzLmxlbmd0aCA8IG0pIHRocm93IG5ldyBFcnJvcignTm90IGVub3VnaCBzaWduYXR1cmVzIHByb3ZpZGVkJykKICAgIGlmIChzaWduYXR1cmVzLmxlbmd0aCA+IG4pIHRocm93IG5ldyBFcnJvcignVG9vIG1hbnkgc2lnbmF0dXJlcyBwcm92aWRlZCcpCiAgfQoKICByZXR1cm4gY29tcGlsZShbXS5jb25jYXQoT1BTLk9QXzAsIHNpZ25hdHVyZXMpKQp9CgpmdW5jdGlvbiBudWxsRGF0YU91dHB1dCAoZGF0YSkgewogIHJldHVybiBjb21waWxlKFtPUFMuT1BfUkVUVVJOLCBkYXRhXSkKfQoKbW9kdWxlLmV4cG9ydHMgPSB7CiAgY29tcGlsZTogY29tcGlsZSwKICBkZWNvbXBpbGU6IGRlY29tcGlsZSwKICBmcm9tQVNNOiBmcm9tQVNNLAogIHRvQVNNOiB0b0FTTSwKCiAgbnVtYmVyOiByZXF1aXJlKCcuL3NjcmlwdF9udW1iZXInKSwKCiAgaXNDYW5vbmljYWxQdWJLZXk6IGlzQ2Fub25pY2FsUHViS2V5LAogIGlzQ2Fub25pY2FsU2lnbmF0dXJlOiBpc0Nhbm9uaWNhbFNpZ25hdHVyZSwKICBpc0RlZmluZWRIYXNoVHlwZTogaXNEZWZpbmVkSGFzaFR5cGUsCiAgaXNQdWJLZXlIYXNoSW5wdXQ6IGlzUHViS2V5SGFzaElucHV0LAogIGlzUHViS2V5SGFzaE91dHB1dDogaXNQdWJLZXlIYXNoT3V0cHV0LAogIGlzUHViS2V5SW5wdXQ6IGlzUHViS2V5SW5wdXQsCiAgaXNQdWJLZXlPdXRwdXQ6IGlzUHViS2V5T3V0cHV0LAogIGlzU2NyaXB0SGFzaElucHV0OiBpc1NjcmlwdEhhc2hJbnB1dCwKICBpc1NjcmlwdEhhc2hPdXRwdXQ6IGlzU2NyaXB0SGFzaE91dHB1dCwKICBpc011bHRpc2lnSW5wdXQ6IGlzTXVsdGlzaWdJbnB1dCwKICBpc011bHRpc2lnT3V0cHV0OiBpc011bHRpc2lnT3V0cHV0LAogIGlzTnVsbERhdGFPdXRwdXQ6IGlzTnVsbERhdGFPdXRwdXQsCiAgY2xhc3NpZnlPdXRwdXQ6IGNsYXNzaWZ5T3V0cHV0LAogIGNsYXNzaWZ5SW5wdXQ6IGNsYXNzaWZ5SW5wdXQsCiAgcHViS2V5T3V0cHV0OiBwdWJLZXlPdXRwdXQsCiAgcHViS2V5SGFzaE91dHB1dDogcHViS2V5SGFzaE91dHB1dCwKICBzY3JpcHRIYXNoT3V0cHV0OiBzY3JpcHRIYXNoT3V0cHV0LAogIG11bHRpc2lnT3V0cHV0OiBtdWx0aXNpZ091dHB1dCwKICBwdWJLZXlJbnB1dDogcHViS2V5SW5wdXQsCiAgcHViS2V5SGFzaElucHV0OiBwdWJLZXlIYXNoSW5wdXQsCiAgc2NyaXB0SGFzaElucHV0OiBzY3JpcHRIYXNoSW5wdXQsCiAgbXVsdGlzaWdJbnB1dDogbXVsdGlzaWdJbnB1dCwKICBudWxsRGF0YU91dHB1dDogbnVsbERhdGFPdXRwdXQKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYnVmZmVydXRpbHMiOjI2LCIuL29wY29kZXMiOjM1LCIuL3NjcmlwdF9udW1iZXIiOjM3LCIuL3R5cGVzIjo0MCwiYmlwNjYiOjIzLCJidWZmZXIiOjcwLCJ0eXBlZm9yY2UiOjE3M31dLDM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewpmdW5jdGlvbiBkZWNvZGUgKGJ1ZmZlciwgbWF4TGVuZ3RoLCBtaW5pbWFsKSB7CiAgbWF4TGVuZ3RoID0gbWF4TGVuZ3RoIHx8IDQKICBtaW5pbWFsID0gbWluaW1hbCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG1pbmltYWwKCiAgdmFyIGxlbmd0aCA9IGJ1ZmZlci5sZW5ndGgKICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gMAogIGlmIChsZW5ndGggPiBtYXhMZW5ndGgpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1NjcmlwdCBudW1iZXIgb3ZlcmZsb3cnKQogIGlmIChtaW5pbWFsKSB7CiAgICBpZiAoKGJ1ZmZlcltsZW5ndGggLSAxXSAmIDB4N2YpID09PSAwKSB7CiAgICAgIGlmIChsZW5ndGggPD0gMSB8fCAoYnVmZmVyW2xlbmd0aCAtIDJdICYgMHg4MCkgPT09IDApIHRocm93IG5ldyBFcnJvcignTm9uLW1pbmltYWxseSBlbmNvZGVkIHNjcmlwdCBudW1iZXInKQogICAgfQogIH0KCiAgLy8gNDAtYml0CiAgaWYgKGxlbmd0aCA9PT0gNSkgewogICAgdmFyIGEgPSBidWZmZXIucmVhZFVJbnQzMkxFKDApCiAgICB2YXIgYiA9IGJ1ZmZlci5yZWFkVUludDgoNCkKCiAgICBpZiAoYiAmIDB4ODApIHJldHVybiAtKChiICYgfjB4ODApICogMHgxMDAwMDAwMDAgKyBhKQogICAgcmV0dXJuIGIgKiAweDEwMDAwMDAwMCArIGEKICB9CgogIHZhciByZXN1bHQgPSAwCgogIC8vIDMyLWJpdCAvIDI0LWJpdCAvIDE2LWJpdCAvIDgtYml0CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgcmVzdWx0IHw9IGJ1ZmZlcltpXSA8PCAoOCAqIGkpCiAgfQoKICBpZiAoYnVmZmVyW2xlbmd0aCAtIDFdICYgMHg4MCkgcmV0dXJuIC0ocmVzdWx0ICYgfigweDgwIDw8ICg4ICogKGxlbmd0aCAtIDEpKSkpCiAgcmV0dXJuIHJlc3VsdAp9CgpmdW5jdGlvbiBzY3JpcHROdW1TaXplIChpKSB7CiAgcmV0dXJuIGkgPiAweDdmZmZmZmZmID8gNQogIDogaSA+IDB4N2ZmZmZmID8gNAogIDogaSA+IDB4N2ZmZiA/IDMKICA6IGkgPiAweDdmID8gMgogIDogaSA+IDB4MDAgPyAxCiAgOiAwCn0KCmZ1bmN0aW9uIGVuY29kZSAobnVtYmVyKSB7CiAgdmFyIHZhbHVlID0gTWF0aC5hYnMobnVtYmVyKQogIHZhciBzaXplID0gc2NyaXB0TnVtU2l6ZSh2YWx1ZSkKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihzaXplKQogIHZhciBuZWdhdGl2ZSA9IG51bWJlciA8IDAKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KHZhbHVlICYgMHhmZiwgaSkKICAgIHZhbHVlID4+PSA4CiAgfQoKICBpZiAoYnVmZmVyW3NpemUgLSAxXSAmIDB4ODApIHsKICAgIGJ1ZmZlci53cml0ZVVJbnQ4KG5lZ2F0aXZlID8gMHg4MCA6IDB4MDAsIHNpemUgLSAxKQogIH0gZWxzZSBpZiAobmVnYXRpdmUpIHsKICAgIGJ1ZmZlcltzaXplIC0gMV0gfD0gMHg4MAogIH0KCiAgcmV0dXJuIGJ1ZmZlcgp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBkZWNvZGU6IGRlY29kZSwKICBlbmNvZGU6IGVuY29kZQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYmNyeXB0byA9IHJlcXVpcmUoJy4vY3J5cHRvJykKdmFyIGJzY3JpcHQgPSByZXF1aXJlKCcuL3NjcmlwdCcpCnZhciBidWZmZXJ1dGlscyA9IHJlcXVpcmUoJy4vYnVmZmVydXRpbHMnKQp2YXIgb3Bjb2RlcyA9IHJlcXVpcmUoJy4vb3Bjb2RlcycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKCmZ1bmN0aW9uIFRyYW5zYWN0aW9uICgpIHsKICB0aGlzLnZlcnNpb24gPSAxCiAgdGhpcy5sb2NrdGltZSA9IDAKICB0aGlzLmlucyA9IFtdCiAgdGhpcy5vdXRzID0gW10KfQoKVHJhbnNhY3Rpb24uREVGQVVMVF9TRVFVRU5DRSA9IDB4ZmZmZmZmZmYKVHJhbnNhY3Rpb24uU0lHSEFTSF9BTEwgPSAweDAxClRyYW5zYWN0aW9uLlNJR0hBU0hfTk9ORSA9IDB4MDIKVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUgPSAweDAzClRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZID0gMHg4MAoKVHJhbnNhY3Rpb24uZnJvbUJ1ZmZlciA9IGZ1bmN0aW9uIChidWZmZXIsIF9fbm9TdHJpY3QpIHsKICB2YXIgb2Zmc2V0ID0gMAogIGZ1bmN0aW9uIHJlYWRTbGljZSAobikgewogICAgb2Zmc2V0ICs9IG4KICAgIHJldHVybiBidWZmZXIuc2xpY2Uob2Zmc2V0IC0gbiwgb2Zmc2V0KQogIH0KCiAgZnVuY3Rpb24gcmVhZFVJbnQzMiAoKSB7CiAgICB2YXIgaSA9IGJ1ZmZlci5yZWFkVUludDMyTEUob2Zmc2V0KQogICAgb2Zmc2V0ICs9IDQKICAgIHJldHVybiBpCiAgfQoKICBmdW5jdGlvbiByZWFkVUludDY0ICgpIHsKICAgIHZhciBpID0gYnVmZmVydXRpbHMucmVhZFVJbnQ2NExFKGJ1ZmZlciwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IDgKICAgIHJldHVybiBpCiAgfQoKICBmdW5jdGlvbiByZWFkVmFySW50ICgpIHsKICAgIHZhciB2aSA9IGJ1ZmZlcnV0aWxzLnJlYWRWYXJJbnQoYnVmZmVyLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gdmkuc2l6ZQogICAgcmV0dXJuIHZpLm51bWJlcgogIH0KCiAgZnVuY3Rpb24gcmVhZFNjcmlwdCAoKSB7CiAgICByZXR1cm4gcmVhZFNsaWNlKHJlYWRWYXJJbnQoKSkKICB9CgogIHZhciB0eCA9IG5ldyBUcmFuc2FjdGlvbigpCiAgdHgudmVyc2lvbiA9IHJlYWRVSW50MzIoKQoKICB2YXIgdmluTGVuID0gcmVhZFZhckludCgpCiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aW5MZW47ICsraSkgewogICAgdHguaW5zLnB1c2goewogICAgICBoYXNoOiByZWFkU2xpY2UoMzIpLAogICAgICBpbmRleDogcmVhZFVJbnQzMigpLAogICAgICBzY3JpcHQ6IHJlYWRTY3JpcHQoKSwKICAgICAgc2VxdWVuY2U6IHJlYWRVSW50MzIoKQogICAgfSkKICB9CgogIHZhciB2b3V0TGVuID0gcmVhZFZhckludCgpCiAgZm9yIChpID0gMDsgaSA8IHZvdXRMZW47ICsraSkgewogICAgdHgub3V0cy5wdXNoKHsKICAgICAgdmFsdWU6IHJlYWRVSW50NjQoKSwKICAgICAgc2NyaXB0OiByZWFkU2NyaXB0KCkKICAgIH0pCiAgfQoKICB0eC5sb2NrdGltZSA9IHJlYWRVSW50MzIoKQoKICBpZiAoX19ub1N0cmljdCkgcmV0dXJuIHR4CiAgaWYgKG9mZnNldCAhPT0gYnVmZmVyLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBoYXMgdW5leHBlY3RlZCBkYXRhJykKCiAgcmV0dXJuIHR4Cn0KClRyYW5zYWN0aW9uLmZyb21IZXggPSBmdW5jdGlvbiAoaGV4KSB7CiAgcmV0dXJuIFRyYW5zYWN0aW9uLmZyb21CdWZmZXIobmV3IEJ1ZmZlcihoZXgsICdoZXgnKSkKfQoKVHJhbnNhY3Rpb24uaXNDb2luYmFzZUhhc2ggPSBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5ldmVyeS5jYWxsKGJ1ZmZlciwgZnVuY3Rpb24gKHgpIHsKICAgIHJldHVybiB4ID09PSAwCiAgfSkKfQoKdmFyIEVNUFRZX1NDUklQVCA9IG5ldyBCdWZmZXIoMCkKClRyYW5zYWN0aW9uLnByb3RvdHlwZS5hZGRJbnB1dCA9IGZ1bmN0aW9uIChoYXNoLCBpbmRleCwgc2VxdWVuY2UsIHNjcmlwdFNpZykgewogIHR5cGVmb3JjZSh0eXBlcy50dXBsZSgKICAgIHR5cGVzLkhhc2gyNTZiaXQsCiAgICB0eXBlcy5VSW50MzIsCiAgICB0eXBlcy5tYXliZSh0eXBlcy5VSW50MzIpLAogICAgdHlwZXMubWF5YmUodHlwZXMuQnVmZmVyKQogICksIGFyZ3VtZW50cykKCiAgaWYgKHR5cGVzLk51bGwoc2VxdWVuY2UpKSB7CiAgICBzZXF1ZW5jZSA9IFRyYW5zYWN0aW9uLkRFRkFVTFRfU0VRVUVOQ0UKICB9CgogIC8vIEFkZCB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgaW5wdXQncyBpbmRleAogIHJldHVybiAodGhpcy5pbnMucHVzaCh7CiAgICBoYXNoOiBoYXNoLAogICAgaW5kZXg6IGluZGV4LAogICAgc2NyaXB0OiBzY3JpcHRTaWcgfHwgRU1QVFlfU0NSSVBULAogICAgc2VxdWVuY2U6IHNlcXVlbmNlCiAgfSkgLSAxKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuYWRkT3V0cHV0ID0gZnVuY3Rpb24gKHNjcmlwdFB1YktleSwgdmFsdWUpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuQnVmZmVyLCB0eXBlcy5VSW50NTMpLCBhcmd1bWVudHMpCgogIC8vIEFkZCB0aGUgb3V0cHV0IGFuZCByZXR1cm4gdGhlIG91dHB1dCdzIGluZGV4CiAgcmV0dXJuICh0aGlzLm91dHMucHVzaCh7CiAgICBzY3JpcHQ6IHNjcmlwdFB1YktleSwKICAgIHZhbHVlOiB2YWx1ZQogIH0pIC0gMSkKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLmJ5dGVMZW5ndGggPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gc2NyaXB0U2l6ZSAoc29tZVNjcmlwdCkgewogICAgdmFyIGxlbmd0aCA9IHNvbWVTY3JpcHQubGVuZ3RoCgogICAgcmV0dXJuIGJ1ZmZlcnV0aWxzLnZhckludFNpemUobGVuZ3RoKSArIGxlbmd0aAogIH0KCiAgcmV0dXJuICgKICAgIDggKwogICAgYnVmZmVydXRpbHMudmFySW50U2l6ZSh0aGlzLmlucy5sZW5ndGgpICsKICAgIGJ1ZmZlcnV0aWxzLnZhckludFNpemUodGhpcy5vdXRzLmxlbmd0aCkgKwogICAgdGhpcy5pbnMucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGlucHV0KSB7IHJldHVybiBzdW0gKyA0MCArIHNjcmlwdFNpemUoaW5wdXQuc2NyaXB0KSB9LCAwKSArCiAgICB0aGlzLm91dHMucmVkdWNlKGZ1bmN0aW9uIChzdW0sIG91dHB1dCkgeyByZXR1cm4gc3VtICsgOCArIHNjcmlwdFNpemUob3V0cHV0LnNjcmlwdCkgfSwgMCkKICApCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgbmV3VHggPSBuZXcgVHJhbnNhY3Rpb24oKQogIG5ld1R4LnZlcnNpb24gPSB0aGlzLnZlcnNpb24KICBuZXdUeC5sb2NrdGltZSA9IHRoaXMubG9ja3RpbWUKCiAgbmV3VHguaW5zID0gdGhpcy5pbnMubWFwKGZ1bmN0aW9uICh0eEluKSB7CiAgICByZXR1cm4gewogICAgICBoYXNoOiB0eEluLmhhc2gsCiAgICAgIGluZGV4OiB0eEluLmluZGV4LAogICAgICBzY3JpcHQ6IHR4SW4uc2NyaXB0LAogICAgICBzZXF1ZW5jZTogdHhJbi5zZXF1ZW5jZQogICAgfQogIH0pCgogIG5ld1R4Lm91dHMgPSB0aGlzLm91dHMubWFwKGZ1bmN0aW9uICh0eE91dCkgewogICAgcmV0dXJuIHsKICAgICAgc2NyaXB0OiB0eE91dC5zY3JpcHQsCiAgICAgIHZhbHVlOiB0eE91dC52YWx1ZQogICAgfQogIH0pCgogIHJldHVybiBuZXdUeAp9Cgp2YXIgT05FID0gbmV3IEJ1ZmZlcignMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMScsICdoZXgnKQp2YXIgVkFMVUVfVUlOVDY0X01BWCA9IG5ldyBCdWZmZXIoJ2ZmZmZmZmZmZmZmZmZmZmYnLCAnaGV4JykKCi8qKgogKiBIYXNoIHRyYW5zYWN0aW9uIGZvciBzaWduaW5nIGEgc3BlY2lmaWMgaW5wdXQuCiAqCiAqIEJpdGNvaW4gdXNlcyBhIGRpZmZlcmVudCBoYXNoIGZvciBlYWNoIHNpZ25lZCB0cmFuc2FjdGlvbiBpbnB1dC4KICogVGhpcyBtZXRob2QgY29waWVzIHRoZSB0cmFuc2FjdGlvbiwgbWFrZXMgdGhlIG5lY2Vzc2FyeSBjaGFuZ2VzIGJhc2VkIG9uIHRoZQogKiBoYXNoVHlwZSwgYW5kIHRoZW4gaGFzaGVzIHRoZSByZXN1bHQuCiAqIFRoaXMgaGFzaCBjYW4gdGhlbiBiZSB1c2VkIHRvIHNpZ24gdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uIGlucHV0LgogKi8KVHJhbnNhY3Rpb24ucHJvdG90eXBlLmhhc2hGb3JTaWduYXR1cmUgPSBmdW5jdGlvbiAoaW5JbmRleCwgcHJldk91dFNjcmlwdCwgaGFzaFR5cGUpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuVUludDMyLCB0eXBlcy5CdWZmZXIsIC8qIHR5cGVzLlVJbnQ4ICovIHR5cGVzLk51bWJlciksIGFyZ3VtZW50cykKCiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW4vYml0Y29pbi9ibG9iL21hc3Rlci9zcmMvdGVzdC9zaWdoYXNoX3Rlc3RzLmNwcCNMMjkKICBpZiAoaW5JbmRleCA+PSB0aGlzLmlucy5sZW5ndGgpIHJldHVybiBPTkUKCiAgdmFyIHR4VG1wID0gdGhpcy5jbG9uZSgpCgogIC8vIGluIGNhc2UgY29uY2F0ZW5hdGluZyB0d28gc2NyaXB0cyBlbmRzIHVwIHdpdGggdHdvIGNvZGVzZXBhcmF0b3JzLAogIC8vIG9yIGFuIGV4dHJhIG9uZSBhdCB0aGUgZW5kLCB0aGlzIHByZXZlbnRzIGFsbCB0aG9zZSBwb3NzaWJsZSBpbmNvbXBhdGliaWxpdGllcy4KICB2YXIgaGFzaFNjcmlwdCA9IGJzY3JpcHQuY29tcGlsZShic2NyaXB0LmRlY29tcGlsZShwcmV2T3V0U2NyaXB0KS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgIHJldHVybiB4ICE9PSBvcGNvZGVzLk9QX0NPREVTRVBBUkFUT1IKICB9KSkKICB2YXIgaQoKICAvLyBibGFuayBvdXQgb3RoZXIgaW5wdXRzJyBzaWduYXR1cmVzCiAgdHhUbXAuaW5zLmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7IGlucHV0LnNjcmlwdCA9IEVNUFRZX1NDUklQVCB9KQogIHR4VG1wLmluc1tpbkluZGV4XS5zY3JpcHQgPSBoYXNoU2NyaXB0CgogIC8vIGJsYW5rIG91dCBzb21lIG9mIHRoZSBpbnB1dHMKICBpZiAoKGhhc2hUeXBlICYgMHgxZikgPT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfTk9ORSkgewogICAgLy8gd2lsZGNhcmQgcGF5ZWUKICAgIHR4VG1wLm91dHMgPSBbXQoKICAgIC8vIGxldCB0aGUgb3RoZXJzIHVwZGF0ZSBhdCB3aWxsCiAgICB0eFRtcC5pbnMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQsIGkpIHsKICAgICAgaWYgKGkgIT09IGluSW5kZXgpIHsKICAgICAgICBpbnB1dC5zZXF1ZW5jZSA9IDAKICAgICAgfQogICAgfSkKICB9IGVsc2UgaWYgKChoYXNoVHlwZSAmIDB4MWYpID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX1NJTkdMRSkgewogICAgdmFyIG5PdXQgPSBpbkluZGV4CgogICAgLy8gb25seSBsb2NrLWluIHRoZSB0eE91dCBwYXllZSBhdCBzYW1lIGluZGV4IGFzIHR4SW4KICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luL2JpdGNvaW4vYmxvYi9tYXN0ZXIvc3JjL3Rlc3Qvc2lnaGFzaF90ZXN0cy5jcHAjTDYwCiAgICBpZiAobk91dCA+PSB0aGlzLm91dHMubGVuZ3RoKSByZXR1cm4gT05FCgogICAgdHhUbXAub3V0cyA9IHR4VG1wLm91dHMuc2xpY2UoMCwgbk91dCArIDEpCgogICAgLy8gYmxhbmsgYWxsIG90aGVyIG91dHB1dHMgKGNsZWFyIHNjcmlwdFB1YktleSwgdmFsdWUgPT09IC0xKQogICAgdmFyIHN0dWJPdXQgPSB7CiAgICAgIHNjcmlwdDogRU1QVFlfU0NSSVBULAogICAgICB2YWx1ZUJ1ZmZlcjogVkFMVUVfVUlOVDY0X01BWAogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCBuT3V0OyBpKyspIHsKICAgICAgdHhUbXAub3V0c1tpXSA9IHN0dWJPdXQKICAgIH0KCiAgICAvLyBsZXQgdGhlIG90aGVycyB1cGRhdGUgYXQgd2lsbAogICAgdHhUbXAuaW5zLmZvckVhY2goZnVuY3Rpb24gKGlucHV0LCBpKSB7CiAgICAgIGlmIChpICE9PSBpbkluZGV4KSB7CiAgICAgICAgaW5wdXQuc2VxdWVuY2UgPSAwCiAgICAgIH0KICAgIH0pCiAgfQoKICAvLyBibGFuayBvdXQgb3RoZXIgaW5wdXRzIGNvbXBsZXRlbHksIG5vdCByZWNvbW1lbmRlZCBmb3Igb3BlbiB0cmFuc2FjdGlvbnMKICBpZiAoaGFzaFR5cGUgJiBUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWSkgewogICAgdHhUbXAuaW5zWzBdID0gdHhUbXAuaW5zW2luSW5kZXhdCiAgICB0eFRtcC5pbnMgPSB0eFRtcC5pbnMuc2xpY2UoMCwgMSkKICB9CgogIC8vIHNlcmlhbGl6ZSBhbmQgaGFzaAogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKHR4VG1wLmJ5dGVMZW5ndGgoKSArIDQpCiAgYnVmZmVyLndyaXRlSW50MzJMRShoYXNoVHlwZSwgYnVmZmVyLmxlbmd0aCAtIDQpCiAgdHhUbXAudG9CdWZmZXIoKS5jb3B5KGJ1ZmZlciwgMCkKCiAgcmV0dXJuIGJjcnlwdG8uaGFzaDI1NihidWZmZXIpCn0KClRyYW5zYWN0aW9uLnByb3RvdHlwZS5nZXRIYXNoID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBiY3J5cHRvLmhhc2gyNTYodGhpcy50b0J1ZmZlcigpKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiAoKSB7CiAgLy8gdHJhbnNhY3Rpb24gaGFzaCdzIGFyZSBkaXNwbGF5ZWQgaW4gcmV2ZXJzZSBvcmRlcgogIHJldHVybiBbXS5yZXZlcnNlLmNhbGwodGhpcy5nZXRIYXNoKCkpLnRvU3RyaW5nKCdoZXgnKQp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUudG9CdWZmZXIgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIodGhpcy5ieXRlTGVuZ3RoKCkpCgogIHZhciBvZmZzZXQgPSAwCiAgZnVuY3Rpb24gd3JpdGVTbGljZSAoc2xpY2UpIHsKICAgIHNsaWNlLmNvcHkoYnVmZmVyLCBvZmZzZXQpCiAgICBvZmZzZXQgKz0gc2xpY2UubGVuZ3RoCiAgfQoKICBmdW5jdGlvbiB3cml0ZVVJbnQzMiAoaSkgewogICAgYnVmZmVyLndyaXRlVUludDMyTEUoaSwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IDQKICB9CgogIGZ1bmN0aW9uIHdyaXRlVUludDY0IChpKSB7CiAgICBidWZmZXJ1dGlscy53cml0ZVVJbnQ2NExFKGJ1ZmZlciwgaSwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IDgKICB9CgogIGZ1bmN0aW9uIHdyaXRlVmFySW50IChpKSB7CiAgICB2YXIgbiA9IGJ1ZmZlcnV0aWxzLndyaXRlVmFySW50KGJ1ZmZlciwgaSwgb2Zmc2V0KQogICAgb2Zmc2V0ICs9IG4KICB9CgogIHdyaXRlVUludDMyKHRoaXMudmVyc2lvbikKICB3cml0ZVZhckludCh0aGlzLmlucy5sZW5ndGgpCgogIHRoaXMuaW5zLmZvckVhY2goZnVuY3Rpb24gKHR4SW4pIHsKICAgIHdyaXRlU2xpY2UodHhJbi5oYXNoKQogICAgd3JpdGVVSW50MzIodHhJbi5pbmRleCkKICAgIHdyaXRlVmFySW50KHR4SW4uc2NyaXB0Lmxlbmd0aCkKICAgIHdyaXRlU2xpY2UodHhJbi5zY3JpcHQpCiAgICB3cml0ZVVJbnQzMih0eEluLnNlcXVlbmNlKQogIH0pCgogIHdyaXRlVmFySW50KHRoaXMub3V0cy5sZW5ndGgpCiAgdGhpcy5vdXRzLmZvckVhY2goZnVuY3Rpb24gKHR4T3V0KSB7CiAgICBpZiAoIXR4T3V0LnZhbHVlQnVmZmVyKSB7CiAgICAgIHdyaXRlVUludDY0KHR4T3V0LnZhbHVlKQogICAgfSBlbHNlIHsKICAgICAgd3JpdGVTbGljZSh0eE91dC52YWx1ZUJ1ZmZlcikKICAgIH0KCiAgICB3cml0ZVZhckludCh0eE91dC5zY3JpcHQubGVuZ3RoKQogICAgd3JpdGVTbGljZSh0eE91dC5zY3JpcHQpCiAgfSkKCiAgd3JpdGVVSW50MzIodGhpcy5sb2NrdGltZSkKCiAgcmV0dXJuIGJ1ZmZlcgp9CgpUcmFuc2FjdGlvbi5wcm90b3R5cGUudG9IZXggPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMudG9CdWZmZXIoKS50b1N0cmluZygnaGV4JykKfQoKVHJhbnNhY3Rpb24ucHJvdG90eXBlLnNldElucHV0U2NyaXB0ID0gZnVuY3Rpb24gKGluZGV4LCBzY3JpcHRTaWcpIHsKICB0eXBlZm9yY2UodHlwZXMudHVwbGUodHlwZXMuTnVtYmVyLCB0eXBlcy5CdWZmZXIpLCBhcmd1bWVudHMpCgogIHRoaXMuaW5zW2luZGV4XS5zY3JpcHQgPSBzY3JpcHRTaWcKfQoKbW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvbgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYnVmZmVydXRpbHMiOjI2LCIuL2NyeXB0byI6MjcsIi4vb3Bjb2RlcyI6MzUsIi4vc2NyaXB0IjozNiwiLi90eXBlcyI6NDAsImJ1ZmZlciI6NzAsInR5cGVmb3JjZSI6MTczfV0sMzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBiYWRkcmVzcyA9IHJlcXVpcmUoJy4vYWRkcmVzcycpCnZhciBiY3J5cHRvID0gcmVxdWlyZSgnLi9jcnlwdG8nKQp2YXIgYnNjcmlwdCA9IHJlcXVpcmUoJy4vc2NyaXB0JykKdmFyIGJ1ZmZlckVxdWFscyA9IHJlcXVpcmUoJ2J1ZmZlci1lcXVhbHMnKQp2YXIgbmV0d29ya3MgPSByZXF1aXJlKCcuL25ldHdvcmtzJykKdmFyIG9wcyA9IHJlcXVpcmUoJy4vb3Bjb2RlcycpCnZhciB0eXBlZm9yY2UgPSByZXF1aXJlKCd0eXBlZm9yY2UnKQp2YXIgdHlwZXMgPSByZXF1aXJlKCcuL3R5cGVzJykKCnZhciBFQ1BhaXIgPSByZXF1aXJlKCcuL2VjcGFpcicpCnZhciBFQ1NpZ25hdHVyZSA9IHJlcXVpcmUoJy4vZWNzaWduYXR1cmUnKQp2YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL3RyYW5zYWN0aW9uJykKCi8vIHJlLW9yZGVycyBzaWduYXR1cmVzIHRvIG1hdGNoIHB1YktleXMsIGZpbGxzIHVuZGVmaW5lZCBvdGhlcndpc2UKZnVuY3Rpb24gZml4TVNTaWduYXR1cmVzICh0cmFuc2FjdGlvbiwgdmluLCBwdWJLZXlzLCBzaWduYXR1cmVzLCBwcmV2T3V0U2NyaXB0LCBoYXNoVHlwZSwgc2tpcFB1YktleSkgewogIC8vIG1haW50YWluIGEgbG9jYWwgY29weSBvZiB1bm1hdGNoZWQgc2lnbmF0dXJlcwogIHZhciB1bm1hdGNoZWQgPSBzaWduYXR1cmVzLnNsaWNlKCkKICB2YXIgY2FjaGUgPSB7fQoKICByZXR1cm4gcHViS2V5cy5tYXAoZnVuY3Rpb24gKHB1YktleSkgewogICAgLy8gc2tpcCBvcHRpb25hbGx5IHByb3ZpZGVkIHB1YktleQogICAgaWYgKHNraXBQdWJLZXkgJiYgYnVmZmVyRXF1YWxzKHNraXBQdWJLZXksIHB1YktleSkpIHJldHVybiB1bmRlZmluZWQKCiAgICB2YXIgbWF0Y2hlZAogICAgdmFyIGtleVBhaXIyID0gRUNQYWlyLmZyb21QdWJsaWNLZXlCdWZmZXIocHViS2V5KQoKICAgIC8vIGNoZWNrIGZvciBhIG1hdGNoaW5nIHNpZ25hdHVyZQogICAgdW5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHNpZ25hdHVyZSwgaSkgewogICAgICAvLyBza2lwIGlmIHVuZGVmaW5lZCB8fCBPUF8wCiAgICAgIGlmICghc2lnbmF0dXJlKSByZXR1cm4gZmFsc2UKCiAgICAgIHZhciBzaWduYXR1cmVIYXNoID0gY2FjaGVbaGFzaFR5cGVdID0gY2FjaGVbaGFzaFR5cGVdIHx8IHRyYW5zYWN0aW9uLmhhc2hGb3JTaWduYXR1cmUodmluLCBwcmV2T3V0U2NyaXB0LCBoYXNoVHlwZSkKICAgICAgaWYgKCFrZXlQYWlyMi52ZXJpZnkoc2lnbmF0dXJlSGFzaCwgc2lnbmF0dXJlKSkgcmV0dXJuIGZhbHNlCgogICAgICAvLyByZW1vdmUgbWF0Y2hlZCBzaWduYXR1cmUgZnJvbSB1bm1hdGNoZWQKICAgICAgdW5tYXRjaGVkW2ldID0gdW5kZWZpbmVkCiAgICAgIG1hdGNoZWQgPSBzaWduYXR1cmUKCiAgICAgIHJldHVybiB0cnVlCiAgICB9KQoKICAgIHJldHVybiBtYXRjaGVkIHx8IHVuZGVmaW5lZAogIH0pCn0KCmZ1bmN0aW9uIGV4dHJhY3RJbnB1dCAodHJhbnNhY3Rpb24sIHR4SW4sIHZpbikgewogIHZhciByZWRlZW1TY3JpcHQKICB2YXIgc2NyaXB0U2lnID0gdHhJbi5zY3JpcHQKICB2YXIgc2NyaXB0U2lnQ2h1bmtzID0gYnNjcmlwdC5kZWNvbXBpbGUoc2NyaXB0U2lnKQoKICB2YXIgcHJldk91dFNjcmlwdAogIHZhciBwcmV2T3V0VHlwZSA9IGJzY3JpcHQuY2xhc3NpZnlJbnB1dChzY3JpcHRTaWcsIHRydWUpCiAgdmFyIHNjcmlwdFR5cGUKCiAgLy8gUmUtY2xhc3NpZnkgaWYgc2NyaXB0SGFzaAogIGlmIChwcmV2T3V0VHlwZSA9PT0gJ3NjcmlwdGhhc2gnKSB7CiAgICByZWRlZW1TY3JpcHQgPSBzY3JpcHRTaWdDaHVua3Muc2xpY2UoLTEpWzBdCiAgICBwcmV2T3V0U2NyaXB0ID0gYnNjcmlwdC5zY3JpcHRIYXNoT3V0cHV0KGJjcnlwdG8uaGFzaDE2MChyZWRlZW1TY3JpcHQpKQoKICAgIHNjcmlwdFNpZyA9IGJzY3JpcHQuY29tcGlsZShzY3JpcHRTaWdDaHVua3Muc2xpY2UoMCwgLTEpKQogICAgc2NyaXB0U2lnQ2h1bmtzID0gc2NyaXB0U2lnQ2h1bmtzLnNsaWNlKDAsIC0xKQoKICAgIHNjcmlwdFR5cGUgPSBic2NyaXB0LmNsYXNzaWZ5SW5wdXQoc2NyaXB0U2lnLCB0cnVlKQogIH0gZWxzZSB7CiAgICBzY3JpcHRUeXBlID0gcHJldk91dFR5cGUKICB9CgogIC8vIHByZS1lbXB0IHJlZGVlbVNjcmlwdCBkZWNvbXBpbGF0aW9uCiAgdmFyIHJlZGVlbVNjcmlwdENodW5rcwogIGlmIChyZWRlZW1TY3JpcHQpIHsKICAgIHJlZGVlbVNjcmlwdENodW5rcyA9IGJzY3JpcHQuZGVjb21waWxlKHJlZGVlbVNjcmlwdCkKICB9CgogIC8vIEV4dHJhY3QgaGFzaFR5cGUsIHB1YktleXMgYW5kIHNpZ25hdHVyZXMKICB2YXIgaGFzaFR5cGUsIHBhcnNlZCwgcHViS2V5cywgc2lnbmF0dXJlcwoKICBzd2l0Y2ggKHNjcmlwdFR5cGUpIHsKICAgIGNhc2UgJ3B1YmtleWhhc2gnOgogICAgICBwYXJzZWQgPSBFQ1NpZ25hdHVyZS5wYXJzZVNjcmlwdFNpZ25hdHVyZShzY3JpcHRTaWdDaHVua3NbMF0pCiAgICAgIGhhc2hUeXBlID0gcGFyc2VkLmhhc2hUeXBlCiAgICAgIHB1YktleXMgPSBzY3JpcHRTaWdDaHVua3Muc2xpY2UoMSkKICAgICAgc2lnbmF0dXJlcyA9IFtwYXJzZWQuc2lnbmF0dXJlXQogICAgICBwcmV2T3V0U2NyaXB0ID0gYnNjcmlwdC5wdWJLZXlIYXNoT3V0cHV0KGJjcnlwdG8uaGFzaDE2MChwdWJLZXlzWzBdKSkKCiAgICAgIGJyZWFrCgogICAgY2FzZSAncHVia2V5JzoKICAgICAgcGFyc2VkID0gRUNTaWduYXR1cmUucGFyc2VTY3JpcHRTaWduYXR1cmUoc2NyaXB0U2lnQ2h1bmtzWzBdKQogICAgICBoYXNoVHlwZSA9IHBhcnNlZC5oYXNoVHlwZQogICAgICBzaWduYXR1cmVzID0gW3BhcnNlZC5zaWduYXR1cmVdCgogICAgICBpZiAocmVkZWVtU2NyaXB0KSB7CiAgICAgICAgcHViS2V5cyA9IHJlZGVlbVNjcmlwdENodW5rcy5zbGljZSgwLCAxKQogICAgICB9CgogICAgICBicmVhawoKICAgIGNhc2UgJ211bHRpc2lnJzoKICAgICAgc2lnbmF0dXJlcyA9IHNjcmlwdFNpZ0NodW5rcy5zbGljZSgxKS5tYXAoZnVuY3Rpb24gKGNodW5rKSB7CiAgICAgICAgaWYgKGNodW5rID09PSBvcHMuT1BfMCkgcmV0dXJuIHVuZGVmaW5lZAoKICAgICAgICB2YXIgcGFyc2VkID0gRUNTaWduYXR1cmUucGFyc2VTY3JpcHRTaWduYXR1cmUoY2h1bmspCiAgICAgICAgaGFzaFR5cGUgPSBwYXJzZWQuaGFzaFR5cGUKCiAgICAgICAgcmV0dXJuIHBhcnNlZC5zaWduYXR1cmUKICAgICAgfSkKCiAgICAgIGlmIChyZWRlZW1TY3JpcHQpIHsKICAgICAgICBwdWJLZXlzID0gcmVkZWVtU2NyaXB0Q2h1bmtzLnNsaWNlKDEsIC0yKQoKICAgICAgICBpZiAocHViS2V5cy5sZW5ndGggIT09IHNpZ25hdHVyZXMubGVuZ3RoKSB7CiAgICAgICAgICBzaWduYXR1cmVzID0gZml4TVNTaWduYXR1cmVzKHRyYW5zYWN0aW9uLCB2aW4sIHB1YktleXMsIHNpZ25hdHVyZXMsIHJlZGVlbVNjcmlwdCwgaGFzaFR5cGUsIHJlZGVlbVNjcmlwdCkKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGJyZWFrCiAgfQoKICByZXR1cm4gewogICAgaGFzaFR5cGU6IGhhc2hUeXBlLAogICAgcHJldk91dFNjcmlwdDogcHJldk91dFNjcmlwdCwKICAgIHByZXZPdXRUeXBlOiBwcmV2T3V0VHlwZSwKICAgIHB1YktleXM6IHB1YktleXMsCiAgICByZWRlZW1TY3JpcHQ6IHJlZGVlbVNjcmlwdCwKICAgIHNjcmlwdFR5cGU6IHNjcmlwdFR5cGUsCiAgICBzaWduYXR1cmVzOiBzaWduYXR1cmVzCiAgfQp9CgpmdW5jdGlvbiBUcmFuc2FjdGlvbkJ1aWxkZXIgKG5ldHdvcmspIHsKICB0aGlzLnByZXZUeE1hcCA9IHt9CiAgdGhpcy5wcmV2T3V0U2NyaXB0cyA9IHt9CiAgdGhpcy5wcmV2T3V0VHlwZXMgPSB7fQogIHRoaXMubmV0d29yayA9IG5ldHdvcmsgfHwgbmV0d29ya3MuYml0Y29pbgoKICB0aGlzLmlucHV0cyA9IFtdCiAgdGhpcy50eCA9IG5ldyBUcmFuc2FjdGlvbigpCn0KClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuc2V0TG9ja1RpbWUgPSBmdW5jdGlvbiAobG9ja3RpbWUpIHsKICB0eXBlZm9yY2UodHlwZXMuVUludDMyLCBsb2NrdGltZSkKCiAgLy8gaWYgYW55IHNpZ25hdHVyZXMgZXhpc3QsIHRocm93CiAgaWYgKHRoaXMuaW5wdXRzLnNvbWUoZnVuY3Rpb24gKGlucHV0KSB7CiAgICBpZiAoIWlucHV0LnNpZ25hdHVyZXMpIHJldHVybiBmYWxzZQoKICAgIHJldHVybiBpbnB1dC5zaWduYXR1cmVzLnNvbWUoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgfSkKICB9KSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdObywgdGhpcyB3b3VsZCBpbnZhbGlkYXRlIHNpZ25hdHVyZXMnKQogIH0KCiAgdGhpcy50eC5sb2NrdGltZSA9IGxvY2t0aW1lCn0KClRyYW5zYWN0aW9uQnVpbGRlci5mcm9tVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIG5ldHdvcmspIHsKICB2YXIgdHhiID0gbmV3IFRyYW5zYWN0aW9uQnVpbGRlcihuZXR3b3JrKQoKICAvLyBDb3B5IG90aGVyIHRyYW5zYWN0aW9uIGZpZWxkcwogIHR4Yi50eC52ZXJzaW9uID0gdHJhbnNhY3Rpb24udmVyc2lvbgogIHR4Yi50eC5sb2NrdGltZSA9IHRyYW5zYWN0aW9uLmxvY2t0aW1lCgogIC8vIEV4dHJhY3QvYWRkIGlucHV0cwogIHRyYW5zYWN0aW9uLmlucy5mb3JFYWNoKGZ1bmN0aW9uICh0eEluKSB7CiAgICB0eGIuYWRkSW5wdXQodHhJbi5oYXNoLCB0eEluLmluZGV4LCB0eEluLnNlcXVlbmNlKQogIH0pCgogIC8vIEV4dHJhY3QvYWRkIG91dHB1dHMKICB0cmFuc2FjdGlvbi5vdXRzLmZvckVhY2goZnVuY3Rpb24gKHR4T3V0KSB7CiAgICB0eGIuYWRkT3V0cHV0KHR4T3V0LnNjcmlwdCwgdHhPdXQudmFsdWUpCiAgfSkKCiAgLy8gRXh0cmFjdC9hZGQgc2lnbmF0dXJlcwogIHR4Yi5pbnB1dHMgPSB0cmFuc2FjdGlvbi5pbnMubWFwKGZ1bmN0aW9uICh0eEluLCB2aW4pIHsKICAgIC8vIFRPRE86IHZlcmlmeSB3aGV0aGVyIGV4dHJhY3RJbnB1dCBpcyBzYW5lIHdpdGggY29pbmJhc2Ugc2NyaXB0cwogICAgaWYgKFRyYW5zYWN0aW9uLmlzQ29pbmJhc2VIYXNoKHR4SW4uaGFzaCkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb2luYmFzZSBpbnB1dHMgbm90IHN1cHBvcnRlZCcpCiAgICB9CgogICAgLy8gSWdub3JlIGVtcHR5IHNjcmlwdHMKICAgIGlmICh0eEluLnNjcmlwdC5sZW5ndGggPT09IDApIHJldHVybiB7fQoKICAgIHJldHVybiBleHRyYWN0SW5wdXQodHJhbnNhY3Rpb24sIHR4SW4sIHZpbikKICB9KQoKICByZXR1cm4gdHhiCn0KClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuYWRkSW5wdXQgPSBmdW5jdGlvbiAodHhIYXNoLCB2b3V0LCBzZXF1ZW5jZSwgcHJldk91dFNjcmlwdCkgewogIC8vIGlzIGl0IGEgaGV4IHN0cmluZz8KICBpZiAodHlwZW9mIHR4SGFzaCA9PT0gJ3N0cmluZycpIHsKICAgIC8vIHRyYW5zYWN0aW9uIGhhc2hzJ3MgYXJlIGRpc3BsYXllZCBpbiByZXZlcnNlIG9yZGVyLCB1bi1yZXZlcnNlIGl0CiAgICB0eEhhc2ggPSBbXS5yZXZlcnNlLmNhbGwobmV3IEJ1ZmZlcih0eEhhc2gsICdoZXgnKSkKCiAgLy8gaXMgaXQgYSBUcmFuc2FjdGlvbiBvYmplY3Q/CiAgfSBlbHNlIGlmICh0eEhhc2ggaW5zdGFuY2VvZiBUcmFuc2FjdGlvbikgewogICAgcHJldk91dFNjcmlwdCA9IHR4SGFzaC5vdXRzW3ZvdXRdLnNjcmlwdAogICAgdHhIYXNoID0gdHhIYXNoLmdldEhhc2goKQogIH0KCiAgdmFyIGlucHV0ID0ge30KICBpZiAocHJldk91dFNjcmlwdCkgewogICAgdmFyIHByZXZPdXRTY3JpcHRDaHVua3MgPSBic2NyaXB0LmRlY29tcGlsZShwcmV2T3V0U2NyaXB0KQogICAgdmFyIHByZXZPdXRUeXBlID0gYnNjcmlwdC5jbGFzc2lmeU91dHB1dChwcmV2T3V0U2NyaXB0Q2h1bmtzKQoKICAgIC8vIGlmIHdlIGNhbiwgZXh0cmFjdCBwdWJLZXkgaW5mb3JtYXRpb24KICAgIHN3aXRjaCAocHJldk91dFR5cGUpIHsKICAgICAgY2FzZSAnbXVsdGlzaWcnOgogICAgICAgIGlucHV0LnB1YktleXMgPSBwcmV2T3V0U2NyaXB0Q2h1bmtzLnNsaWNlKDEsIC0yKQogICAgICAgIGlucHV0LnNpZ25hdHVyZXMgPSBpbnB1dC5wdWJLZXlzLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQgfSkKCiAgICAgICAgYnJlYWsKCiAgICAgIGNhc2UgJ3B1YmtleSc6CiAgICAgICAgaW5wdXQucHViS2V5cyA9IHByZXZPdXRTY3JpcHRDaHVua3Muc2xpY2UoMCwgMSkKICAgICAgICBpbnB1dC5zaWduYXR1cmVzID0gW3VuZGVmaW5lZF0KCiAgICAgICAgYnJlYWsKICAgIH0KCiAgICBpZiAocHJldk91dFR5cGUgIT09ICdzY3JpcHRoYXNoJykgewogICAgICBpbnB1dC5zY3JpcHRUeXBlID0gcHJldk91dFR5cGUKICAgIH0KCiAgICBpbnB1dC5wcmV2T3V0U2NyaXB0ID0gcHJldk91dFNjcmlwdAogICAgaW5wdXQucHJldk91dFR5cGUgPSBwcmV2T3V0VHlwZQogIH0KCiAgLy8gaWYgc2lnbmF0dXJlcyBleGlzdCwgYWRkaW5nIGlucHV0cyBpcyBvbmx5IGFjY2VwdGFibGUgaWYgU0lHSEFTSF9BTllPTkVDQU5QQVkgaXMgdXNlZAogIC8vIHRocm93IGlmIGFueSBzaWduYXR1cmVzICpkaWRuJ3QqIHVzZSBTSUdIQVNIX0FOWU9ORUNBTlBBWQogIGlmICghdGhpcy5pbnB1dHMuZXZlcnkoZnVuY3Rpb24gKG90aGVySW5wdXQpIHsKICAgIC8vIG5vIHNpZ25hdHVyZQogICAgaWYgKG90aGVySW5wdXQuaGFzaFR5cGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWUKCiAgICByZXR1cm4gb3RoZXJJbnB1dC5oYXNoVHlwZSAmIFRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZCiAgfSkpIHsKICAgIHRocm93IG5ldyBFcnJvcignTm8sIHRoaXMgd291bGQgaW52YWxpZGF0ZSBzaWduYXR1cmVzJykKICB9CgogIHZhciBwcmV2T3V0ID0gdHhIYXNoLnRvU3RyaW5nKCdoZXgnKSArICc6JyArIHZvdXQKICBpZiAodGhpcy5wcmV2VHhNYXBbcHJldk91dF0pIHRocm93IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gaXMgYWxyZWFkeSBhbiBpbnB1dCcpCgogIHZhciB2aW4gPSB0aGlzLnR4LmFkZElucHV0KHR4SGFzaCwgdm91dCwgc2VxdWVuY2UpCiAgdGhpcy5pbnB1dHNbdmluXSA9IGlucHV0CiAgdGhpcy5wcmV2VHhNYXBbcHJldk91dF0gPSB2aW4KCiAgcmV0dXJuIHZpbgp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLmFkZE91dHB1dCA9IGZ1bmN0aW9uIChzY3JpcHRQdWJLZXksIHZhbHVlKSB7CiAgdmFyIG5PdXRwdXRzID0gdGhpcy50eC5vdXRzLmxlbmd0aAoKICAvLyBpZiBzaWduYXR1cmVzIGV4aXN0LCBhZGRpbmcgb3V0cHV0cyBpcyBvbmx5IGFjY2VwdGFibGUgaWYgU0lHSEFTSF9OT05FIG9yIFNJR0hBU0hfU0lOR0xFIGlzIHVzZWQKICAvLyB0aHJvd3MgaWYgYW55IHNpZ25hdHVyZXMgZGlkbid0IHVzZSBTSUdIQVNIX05PTkV8U0lHSEFTSF9TSU5HTEUKICBpZiAoIXRoaXMuaW5wdXRzLmV2ZXJ5KGZ1bmN0aW9uIChpbnB1dCwgaW5kZXgpIHsKICAgIC8vIG5vIHNpZ25hdHVyZQogICAgaWYgKGlucHV0Lmhhc2hUeXBlID09PSB1bmRlZmluZWQpIHJldHVybiB0cnVlCgogICAgdmFyIGhhc2hUeXBlTW9kID0gaW5wdXQuaGFzaFR5cGUgJiAweDFmCiAgICBpZiAoaGFzaFR5cGVNb2QgPT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfTk9ORSkgcmV0dXJuIHRydWUKICAgIGlmIChoYXNoVHlwZU1vZCA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUpIHsKICAgICAgLy8gYWNjb3VudCBmb3IgU0lHSEFTSF9TSU5HTEUgc2lnbmluZyBvZiBhIG5vbi1leGlzdGluZyBvdXRwdXQsIGFrYSB0aGUgIlNJR0hBU0hfU0lOR0xFIiBidWcKICAgICAgcmV0dXJuIGluZGV4IDwgbk91dHB1dHMKICAgIH0KCiAgICByZXR1cm4gZmFsc2UKICB9KSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdObywgdGhpcyB3b3VsZCBpbnZhbGlkYXRlIHNpZ25hdHVyZXMnKQogIH0KCiAgLy8gQXR0ZW1wdCB0byBnZXQgYSBzY3JpcHQgaWYgaXQncyBhIGJhc2U1OCBhZGRyZXNzIHN0cmluZwogIGlmICh0eXBlb2Ygc2NyaXB0UHViS2V5ID09PSAnc3RyaW5nJykgewogICAgc2NyaXB0UHViS2V5ID0gYmFkZHJlc3MudG9PdXRwdXRTY3JpcHQoc2NyaXB0UHViS2V5LCB0aGlzLm5ldHdvcmspCiAgfQoKICByZXR1cm4gdGhpcy50eC5hZGRPdXRwdXQoc2NyaXB0UHViS2V5LCB2YWx1ZSkKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5fX2J1aWxkKGZhbHNlKQp9ClRyYW5zYWN0aW9uQnVpbGRlci5wcm90b3R5cGUuYnVpbGRJbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl9fYnVpbGQodHJ1ZSkKfQoKdmFyIGNhbkJ1aWxkVHlwZXMgPSB7CiAgJ211bHRpc2lnJzogdHJ1ZSwKICAncHVia2V5JzogdHJ1ZSwKICAncHVia2V5aGFzaCc6IHRydWUKfQoKVHJhbnNhY3Rpb25CdWlsZGVyLnByb3RvdHlwZS5fX2J1aWxkID0gZnVuY3Rpb24gKGFsbG93SW5jb21wbGV0ZSkgewogIGlmICghYWxsb3dJbmNvbXBsZXRlKSB7CiAgICBpZiAoIXRoaXMudHguaW5zLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBoYXMgbm8gaW5wdXRzJykKICAgIGlmICghdGhpcy50eC5vdXRzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBoYXMgbm8gb3V0cHV0cycpCiAgfQoKICB2YXIgdHggPSB0aGlzLnR4LmNsb25lKCkKCiAgLy8gQ3JlYXRlIHNjcmlwdCBzaWduYXR1cmVzIGZyb20gaW5wdXRzCiAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQsIGluZGV4KSB7CiAgICB2YXIgc2NyaXB0VHlwZSA9IGlucHV0LnNjcmlwdFR5cGUKICAgIHZhciBzY3JpcHRTaWcKCiAgICBpZiAoIWFsbG93SW5jb21wbGV0ZSkgewogICAgICBpZiAoIXNjcmlwdFR5cGUpIHRocm93IG5ldyBFcnJvcignVHJhbnNhY3Rpb24gaXMgbm90IGNvbXBsZXRlJykKICAgICAgaWYgKCFjYW5CdWlsZFR5cGVzW3NjcmlwdFR5cGVdKSB0aHJvdyBuZXcgRXJyb3Ioc2NyaXB0VHlwZSArICcgbm90IHN1cHBvcnRlZCcpCgogICAgICAvLyBYWFg6IG9ubHkgcmVsZXZhbnQgdG8gdHlwZXMgdGhhdCBuZWVkIHNpZ25hdHVyZXMKICAgICAgaWYgKCFpbnB1dC5zaWduYXR1cmVzKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGlzIG1pc3Npbmcgc2lnbmF0dXJlcycpCiAgICB9CgogICAgaWYgKGlucHV0LnNpZ25hdHVyZXMpIHsKICAgICAgc3dpdGNoIChzY3JpcHRUeXBlKSB7CiAgICAgICAgY2FzZSAncHVia2V5aGFzaCc6CiAgICAgICAgICB2YXIgcGtoU2lnbmF0dXJlID0gaW5wdXQuc2lnbmF0dXJlc1swXS50b1NjcmlwdFNpZ25hdHVyZShpbnB1dC5oYXNoVHlwZSkKICAgICAgICAgIHNjcmlwdFNpZyA9IGJzY3JpcHQucHViS2V5SGFzaElucHV0KHBraFNpZ25hdHVyZSwgaW5wdXQucHViS2V5c1swXSkKICAgICAgICAgIGJyZWFrCgogICAgICAgIGNhc2UgJ211bHRpc2lnJzoKICAgICAgICAgIHZhciBtc1NpZ25hdHVyZXMgPSBpbnB1dC5zaWduYXR1cmVzLm1hcChmdW5jdGlvbiAoc2lnbmF0dXJlKSB7CiAgICAgICAgICAgIHJldHVybiBzaWduYXR1cmUgJiYgc2lnbmF0dXJlLnRvU2NyaXB0U2lnbmF0dXJlKGlucHV0Lmhhc2hUeXBlKQogICAgICAgICAgfSkKCiAgICAgICAgICAvLyBmaWxsIGluIGJsYW5rcyB3aXRoIE9QXzAKICAgICAgICAgIGlmIChhbGxvd0luY29tcGxldGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc1NpZ25hdHVyZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgICAgICBtc1NpZ25hdHVyZXNbaV0gPSBtc1NpZ25hdHVyZXNbaV0gfHwgb3BzLk9QXzAKICAgICAgICAgICAgfQoKICAgICAgICAgIC8vIHJlbW92ZSBibGFuayBzaWduYXR1cmVzCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtc1NpZ25hdHVyZXMgPSBtc1NpZ25hdHVyZXMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4IH0pCiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHJlZGVlbVNjcmlwdCA9IGFsbG93SW5jb21wbGV0ZSA/IHVuZGVmaW5lZCA6IGlucHV0LnJlZGVlbVNjcmlwdAogICAgICAgICAgc2NyaXB0U2lnID0gYnNjcmlwdC5tdWx0aXNpZ0lucHV0KG1zU2lnbmF0dXJlcywgcmVkZWVtU2NyaXB0KQogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAncHVia2V5JzoKICAgICAgICAgIHZhciBwa1NpZ25hdHVyZSA9IGlucHV0LnNpZ25hdHVyZXNbMF0udG9TY3JpcHRTaWduYXR1cmUoaW5wdXQuaGFzaFR5cGUpCiAgICAgICAgICBzY3JpcHRTaWcgPSBic2NyaXB0LnB1YktleUlucHV0KHBrU2lnbmF0dXJlKQogICAgICAgICAgYnJlYWsKICAgICAgfQogICAgfQoKICAgIC8vIGRpZCB3ZSBidWlsZCBhIHNjcmlwdFNpZz8KICAgIGlmIChzY3JpcHRTaWcpIHsKICAgICAgLy8gd3JhcCBhcyBzY3JpcHRIYXNoIGlmIG5lY2Vzc2FyeQogICAgICBpZiAoaW5wdXQucHJldk91dFR5cGUgPT09ICdzY3JpcHRoYXNoJykgewogICAgICAgIHNjcmlwdFNpZyA9IGJzY3JpcHQuc2NyaXB0SGFzaElucHV0KHNjcmlwdFNpZywgaW5wdXQucmVkZWVtU2NyaXB0KQogICAgICB9CgogICAgICB0eC5zZXRJbnB1dFNjcmlwdChpbmRleCwgc2NyaXB0U2lnKQogICAgfQogIH0pCgogIHJldHVybiB0eAp9CgpUcmFuc2FjdGlvbkJ1aWxkZXIucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiAoaW5kZXgsIGtleVBhaXIsIHJlZGVlbVNjcmlwdCwgaGFzaFR5cGUpIHsKICBpZiAoa2V5UGFpci5uZXR3b3JrICE9PSB0aGlzLm5ldHdvcmspIHRocm93IG5ldyBFcnJvcignSW5jb25zaXN0ZW50IG5ldHdvcmsnKQogIGlmICghdGhpcy5pbnB1dHNbaW5kZXhdKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGlucHV0IGF0IGluZGV4OiAnICsgaW5kZXgpCiAgaGFzaFR5cGUgPSBoYXNoVHlwZSB8fCBUcmFuc2FjdGlvbi5TSUdIQVNIX0FMTAoKICB2YXIgaW5wdXQgPSB0aGlzLmlucHV0c1tpbmRleF0KICB2YXIgY2FuU2lnbiA9IGlucHV0Lmhhc2hUeXBlICYmCiAgICBpbnB1dC5wcmV2T3V0U2NyaXB0ICYmCiAgICBpbnB1dC5wcmV2T3V0VHlwZSAmJgogICAgaW5wdXQucHViS2V5cyAmJgogICAgaW5wdXQuc2NyaXB0VHlwZSAmJgogICAgaW5wdXQuc2lnbmF0dXJlcyAmJgogICAgaW5wdXQuc2lnbmF0dXJlcy5sZW5ndGggPT09IGlucHV0LnB1YktleXMubGVuZ3RoCgogIHZhciBrcFB1YktleSA9IGtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkKCiAgLy8gYXJlIHdlIHJlYWR5IHRvIHNpZ24/CiAgaWYgKGNhblNpZ24pIHsKICAgIC8vIGlmIHJlZGVlbVNjcmlwdCB3YXMgcHJvdmlkZWQsIGVuZm9yY2UgY29uc2lzdGVuY3kKICAgIGlmIChyZWRlZW1TY3JpcHQpIHsKICAgICAgaWYgKCFidWZmZXJFcXVhbHMoaW5wdXQucmVkZWVtU2NyaXB0LCByZWRlZW1TY3JpcHQpKSB0aHJvdyBuZXcgRXJyb3IoJ0luY29uc2lzdGVudCByZWRlZW1TY3JpcHQnKQogICAgfQoKICAgIGlmIChpbnB1dC5oYXNoVHlwZSAhPT0gaGFzaFR5cGUpIHRocm93IG5ldyBFcnJvcignSW5jb25zaXN0ZW50IGhhc2hUeXBlJykKCiAgLy8gbm8/IHByZXBhcmUKICB9IGVsc2UgewogICAgLy8gbXVzdCBiZSBwYXktdG8tc2NyaXB0SGFzaD8KICAgIGlmIChyZWRlZW1TY3JpcHQpIHsKICAgICAgLy8gaWYgd2UgaGF2ZSBhIHByZXZPdXRTY3JpcHQsIGVuZm9yY2Ugc2NyaXB0SGFzaCBlcXVhbGl0eSB0byB0aGUgcmVkZWVtU2NyaXB0CiAgICAgIGlmIChpbnB1dC5wcmV2T3V0U2NyaXB0KSB7CiAgICAgICAgaWYgKGlucHV0LnByZXZPdXRUeXBlICE9PSAnc2NyaXB0aGFzaCcpIHRocm93IG5ldyBFcnJvcignUHJldk91dFNjcmlwdCBtdXN0IGJlIFAyU0gnKQoKICAgICAgICB2YXIgc2NyaXB0SGFzaCA9IGJzY3JpcHQuZGVjb21waWxlKGlucHV0LnByZXZPdXRTY3JpcHQpWzFdCiAgICAgICAgaWYgKCFidWZmZXJFcXVhbHMoc2NyaXB0SGFzaCwgYmNyeXB0by5oYXNoMTYwKHJlZGVlbVNjcmlwdCkpKSB0aHJvdyBuZXcgRXJyb3IoJ1JlZGVlbVNjcmlwdCBkb2VzIG5vdCBtYXRjaCAnICsgc2NyaXB0SGFzaC50b1N0cmluZygnaGV4JykpCiAgICAgIH0KCiAgICAgIHZhciBzY3JpcHRUeXBlID0gYnNjcmlwdC5jbGFzc2lmeU91dHB1dChyZWRlZW1TY3JpcHQpCiAgICAgIHZhciByZWRlZW1TY3JpcHRDaHVua3MgPSBic2NyaXB0LmRlY29tcGlsZShyZWRlZW1TY3JpcHQpCiAgICAgIHZhciBwdWJLZXlzCgogICAgICBzd2l0Y2ggKHNjcmlwdFR5cGUpIHsKICAgICAgICBjYXNlICdtdWx0aXNpZyc6CiAgICAgICAgICBwdWJLZXlzID0gcmVkZWVtU2NyaXB0Q2h1bmtzLnNsaWNlKDEsIC0yKQoKICAgICAgICAgIGJyZWFrCgogICAgICAgIGNhc2UgJ3B1YmtleWhhc2gnOgogICAgICAgICAgdmFyIHBraDEgPSByZWRlZW1TY3JpcHRDaHVua3NbMl0KICAgICAgICAgIHZhciBwa2gyID0gYmNyeXB0by5oYXNoMTYwKGtleVBhaXIuZ2V0UHVibGljS2V5QnVmZmVyKCkpCgogICAgICAgICAgaWYgKCFidWZmZXJFcXVhbHMocGtoMSwgcGtoMikpIHRocm93IG5ldyBFcnJvcigncHJpdmF0ZUtleSBjYW5ub3Qgc2lnbiBmb3IgdGhpcyBpbnB1dCcpCiAgICAgICAgICBwdWJLZXlzID0gW2twUHViS2V5XQoKICAgICAgICAgIGJyZWFrCgogICAgICAgIGNhc2UgJ3B1YmtleSc6CiAgICAgICAgICBwdWJLZXlzID0gcmVkZWVtU2NyaXB0Q2h1bmtzLnNsaWNlKDAsIDEpCgogICAgICAgICAgYnJlYWsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVkZWVtU2NyaXB0IG5vdCBzdXBwb3J0ZWQgKCcgKyBzY3JpcHRUeXBlICsgJyknKQogICAgICB9CgogICAgICAvLyBpZiB3ZSBkb24ndCBoYXZlIGEgcHJldk91dFNjcmlwdCwgZ2VuZXJhdGUgYSBQMlNIIHNjcmlwdAogICAgICBpZiAoIWlucHV0LnByZXZPdXRTY3JpcHQpIHsKICAgICAgICBpbnB1dC5wcmV2T3V0U2NyaXB0ID0gYnNjcmlwdC5zY3JpcHRIYXNoT3V0cHV0KGJjcnlwdG8uaGFzaDE2MChyZWRlZW1TY3JpcHQpKQogICAgICAgIGlucHV0LnByZXZPdXRUeXBlID0gJ3NjcmlwdGhhc2gnCiAgICAgIH0KCiAgICAgIGlucHV0LnB1YktleXMgPSBwdWJLZXlzCiAgICAgIGlucHV0LnJlZGVlbVNjcmlwdCA9IHJlZGVlbVNjcmlwdAogICAgICBpbnB1dC5zY3JpcHRUeXBlID0gc2NyaXB0VHlwZQogICAgICBpbnB1dC5zaWduYXR1cmVzID0gcHViS2V5cy5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkIH0pCiAgICB9IGVsc2UgewogICAgICAvLyBwYXktdG8tc2NyaXB0SGFzaCBpcyBub3QgcG9zc2libGUgd2l0aG91dCBhIHJlZGVlbVNjcmlwdAogICAgICBpZiAoaW5wdXQucHJldk91dFR5cGUgPT09ICdzY3JpcHRoYXNoJykgdGhyb3cgbmV3IEVycm9yKCdQcmV2T3V0U2NyaXB0IGlzIFAyU0gsIG1pc3NpbmcgcmVkZWVtU2NyaXB0JykKCiAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBzY3JpcHRUeXBlLCBhc3N1bWUgcHViS2V5SGFzaCBvdGhlcndpc2UKICAgICAgaWYgKCFpbnB1dC5zY3JpcHRUeXBlKSB7CiAgICAgICAgaW5wdXQucHJldk91dFNjcmlwdCA9IGJzY3JpcHQucHViS2V5SGFzaE91dHB1dChiY3J5cHRvLmhhc2gxNjAoa2V5UGFpci5nZXRQdWJsaWNLZXlCdWZmZXIoKSkpCiAgICAgICAgaW5wdXQucHJldk91dFR5cGUgPSAncHVia2V5aGFzaCcKICAgICAgICBpbnB1dC5wdWJLZXlzID0gW2twUHViS2V5XQogICAgICAgIGlucHV0LnNjcmlwdFR5cGUgPSBpbnB1dC5wcmV2T3V0VHlwZQogICAgICAgIGlucHV0LnNpZ25hdHVyZXMgPSBbdW5kZWZpbmVkXQogICAgICB9IGVsc2UgewogICAgICAgIC8vIHRocm93IGlmIHdlIGNhbid0IHNpZ24gd2l0aCBpdAogICAgICAgIGlmICghaW5wdXQucHViS2V5cyB8fCAhaW5wdXQuc2lnbmF0dXJlcykgdGhyb3cgbmV3IEVycm9yKGlucHV0LnNjcmlwdFR5cGUgKyAnIG5vdCBzdXBwb3J0ZWQnKQogICAgICB9CiAgICB9CgogICAgaW5wdXQuaGFzaFR5cGUgPSBoYXNoVHlwZQogIH0KCiAgLy8gcmVhZHkgdG8gc2lnbj8KICB2YXIgc2lnbmF0dXJlU2NyaXB0ID0gaW5wdXQucmVkZWVtU2NyaXB0IHx8IGlucHV0LnByZXZPdXRTY3JpcHQKICB2YXIgc2lnbmF0dXJlSGFzaCA9IHRoaXMudHguaGFzaEZvclNpZ25hdHVyZShpbmRleCwgc2lnbmF0dXJlU2NyaXB0LCBoYXNoVHlwZSkKCiAgLy8gZW5mb3JjZSBpbiBvcmRlciBzaWduaW5nIG9mIHB1YmxpYyBrZXlzCiAgdmFyIHZhbGlkID0gaW5wdXQucHViS2V5cy5zb21lKGZ1bmN0aW9uIChwdWJLZXksIGkpIHsKICAgIGlmICghYnVmZmVyRXF1YWxzKGtwUHViS2V5LCBwdWJLZXkpKSByZXR1cm4gZmFsc2UKICAgIGlmIChpbnB1dC5zaWduYXR1cmVzW2ldKSB0aHJvdyBuZXcgRXJyb3IoJ1NpZ25hdHVyZSBhbHJlYWR5IGV4aXN0cycpCgogICAgdmFyIHNpZ25hdHVyZSA9IGtleVBhaXIuc2lnbihzaWduYXR1cmVIYXNoKQogICAgaW5wdXQuc2lnbmF0dXJlc1tpXSA9IHNpZ25hdHVyZQoKICAgIHJldHVybiB0cnVlCiAgfSkKCiAgaWYgKCF2YWxpZCkgdGhyb3cgbmV3IEVycm9yKCdLZXkgcGFpciBjYW5ub3Qgc2lnbiBmb3IgdGhpcyBpbnB1dCcpCn0KCm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb25CdWlsZGVyCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hZGRyZXNzIjoyNCwiLi9jcnlwdG8iOjI3LCIuL2VjcGFpciI6MjksIi4vZWNzaWduYXR1cmUiOjMwLCIuL25ldHdvcmtzIjozNCwiLi9vcGNvZGVzIjozNSwiLi9zY3JpcHQiOjM2LCIuL3RyYW5zYWN0aW9uIjozOCwiLi90eXBlcyI6NDAsImJ1ZmZlciI6NzAsImJ1ZmZlci1lcXVhbHMiOjc2LCJ0eXBlZm9yY2UiOjE3M31dLDQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHR5cGVmb3JjZSA9IHJlcXVpcmUoJ3R5cGVmb3JjZScpCgpmdW5jdGlvbiBuQnVmZmVyICh2YWx1ZSwgbikgewogIHR5cGVmb3JjZSh0eXBlcy5CdWZmZXIsIHZhbHVlKQogIGlmICh2YWx1ZS5sZW5ndGggIT09IG4pIHRocm93IG5ldyB0eXBlZm9yY2UuVGZUeXBlRXJyb3IoJ0V4cGVjdGVkICcgKyAobiAqIDgpICsgJy1iaXQgQnVmZmVyLCBnb3QgJyArICh2YWx1ZS5sZW5ndGggKiA4KSArICctYml0IEJ1ZmZlcicpCgogIHJldHVybiB0cnVlCn0KCmZ1bmN0aW9uIEhhc2gxNjBiaXQgKHZhbHVlKSB7IHJldHVybiBuQnVmZmVyKHZhbHVlLCAyMCkgfQpmdW5jdGlvbiBIYXNoMjU2Yml0ICh2YWx1ZSkgeyByZXR1cm4gbkJ1ZmZlcih2YWx1ZSwgMzIpIH0KZnVuY3Rpb24gQnVmZmVyMjU2Yml0ICh2YWx1ZSkgeyByZXR1cm4gbkJ1ZmZlcih2YWx1ZSwgMzIpIH0KCnZhciBVSU5UNTNfTUFYID0gTWF0aC5wb3coMiwgNTMpIC0gMQpmdW5jdGlvbiBVSW50MiAodmFsdWUpIHsgcmV0dXJuICh2YWx1ZSAmIDMpID09PSB2YWx1ZSB9CmZ1bmN0aW9uIFVJbnQ4ICh2YWx1ZSkgeyByZXR1cm4gKHZhbHVlICYgMHhmZikgPT09IHZhbHVlIH0KZnVuY3Rpb24gVUludDMyICh2YWx1ZSkgeyByZXR1cm4gKHZhbHVlID4+PiAwKSA9PT0gdmFsdWUgfQpmdW5jdGlvbiBVSW50NTMgKHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVmb3JjZS5OdW1iZXIodmFsdWUpICYmCiAgICB2YWx1ZSA+PSAwICYmCiAgICB2YWx1ZSA8PSBVSU5UNTNfTUFYICYmCiAgICBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWUKfQoKLy8gZXh0ZXJuYWwgZGVwZW5kZW50IHR5cGVzCnZhciBCaWdJbnQgPSB0eXBlZm9yY2UucXVhY2tzTGlrZSgnQmlnSW50ZWdlcicpCnZhciBFQ1BvaW50ID0gdHlwZWZvcmNlLnF1YWNrc0xpa2UoJ1BvaW50JykKCi8vIGV4cG9zZWQsIGV4dGVybmFsIEFQSQp2YXIgRUNTaWduYXR1cmUgPSB0eXBlZm9yY2UuY29tcGlsZSh7IHI6IEJpZ0ludCwgczogQmlnSW50IH0pCnZhciBOZXR3b3JrID0gdHlwZWZvcmNlLmNvbXBpbGUoewogIG1lc3NhZ2VQcmVmaXg6IHR5cGVmb3JjZS5vbmVPZih0eXBlZm9yY2UuQnVmZmVyLCB0eXBlZm9yY2UuU3RyaW5nKSwKICBiaXAzMjogewogICAgcHVibGljOiBVSW50MzIsCiAgICBwcml2YXRlOiBVSW50MzIKICB9LAogIHB1YktleUhhc2g6IFVJbnQ4LAogIHNjcmlwdEhhc2g6IFVJbnQ4LAogIHdpZjogVUludDgsCiAgZHVzdFRocmVzaG9sZDogVUludDUzCn0pCgovLyBleHRlbmQgdHlwZWZvcmNlIHR5cGVzIHdpdGggb3Vycwp2YXIgdHlwZXMgPSB7CiAgQmlnSW50OiBCaWdJbnQsCiAgQnVmZmVyMjU2Yml0OiBCdWZmZXIyNTZiaXQsCiAgRUNQb2ludDogRUNQb2ludCwKICBFQ1NpZ25hdHVyZTogRUNTaWduYXR1cmUsCiAgSGFzaDE2MGJpdDogSGFzaDE2MGJpdCwKICBIYXNoMjU2Yml0OiBIYXNoMjU2Yml0LAogIE5ldHdvcms6IE5ldHdvcmssCiAgVUludDI6IFVJbnQyLAogIFVJbnQ4OiBVSW50OCwKICBVSW50MzI6IFVJbnQzMiwKICBVSW50NTM6IFVJbnQ1Mwp9Cgpmb3IgKHZhciB0eXBlTmFtZSBpbiB0eXBlZm9yY2UpIHsKICB0eXBlc1t0eXBlTmFtZV0gPSB0eXBlZm9yY2VbdHlwZU5hbWVdCn0KCm1vZHVsZS5leHBvcnRzID0gdHlwZXMKCn0seyJ0eXBlZm9yY2UiOjE3M31dLDQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIC8vIFV0aWxzCiAgZnVuY3Rpb24gYXNzZXJ0ICh2YWwsIG1zZykgewogICAgaWYgKCF2YWwpIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKICB9CgogIC8vIENvdWxkIHVzZSBgaW5oZXJpdHNgIG1vZHVsZSwgYnV0IGRvbid0IHdhbnQgdG8gbW92ZSBmcm9tIHNpbmdsZSBmaWxlCiAgLy8gYXJjaGl0ZWN0dXJlIHlldC4KICBmdW5jdGlvbiBpbmhlcml0cyAoY3Rvciwgc3VwZXJDdG9yKSB7CiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvcjsKICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9OwogICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZTsKICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKCk7CiAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3I7CiAgfQoKICAvLyBCTgoKICBmdW5jdGlvbiBCTiAobnVtYmVyLCBiYXNlLCBlbmRpYW4pIHsKICAgIC8vIE1heSBiZSBgbmV3IEJOKGJuKWAgPwogICAgaWYgKG51bWJlciAhPT0gbnVsbCAmJgogICAgICB0eXBlb2YgbnVtYmVyID09PSAnb2JqZWN0JyAmJgogICAgICBBcnJheS5pc0FycmF5KG51bWJlci53b3JkcykpIHsKICAgICAgcmV0dXJuIG51bWJlcjsKICAgIH0KCiAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgIHRoaXMud29yZHMgPSBudWxsOwogICAgdGhpcy5sZW5ndGggPSAwOwoKICAgIC8vIFJlZHVjdGlvbiBjb250ZXh0CiAgICB0aGlzLnJlZCA9IG51bGw7CgogICAgaWYgKG51bWJlciAhPT0gbnVsbCkgewogICAgICBpZiAoYmFzZSA9PT0gJ2xlJyB8fCBiYXNlID09PSAnYmUnKSB7CiAgICAgICAgZW5kaWFuID0gYmFzZTsKICAgICAgICBiYXNlID0gMTA7CiAgICAgIH0KCiAgICAgIHRoaXMuX2luaXQobnVtYmVyIHx8IDAsIGJhc2UgfHwgMTAsIGVuZGlhbiB8fCAnYmUnKTsKICAgIH0KICB9CiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IEJOOwogIH0gZWxzZSB7CiAgICBleHBvcnRzLkJOID0gQk47CiAgfQoKICBCTi5CTiA9IEJOOwogIEJOLndvcmRTaXplID0gMjY7CgogIHZhciBCdWZmZXI7CiAgdHJ5IHsKICAgIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZicgKyAnZmVyJykuQnVmZmVyOwogIH0gY2F0Y2ggKGUpIHsKICB9CgogIEJOLm1heCA9IGZ1bmN0aW9uIG1heCAobGVmdCwgcmlnaHQpIHsKICAgIGlmIChsZWZ0LmNtcChyaWdodCkgPiAwKSByZXR1cm4gbGVmdDsKICAgIHJldHVybiByaWdodDsKICB9OwoKICBCTi5taW4gPSBmdW5jdGlvbiBtaW4gKGxlZnQsIHJpZ2h0KSB7CiAgICBpZiAobGVmdC5jbXAocmlnaHQpIDwgMCkgcmV0dXJuIGxlZnQ7CiAgICByZXR1cm4gcmlnaHQ7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gaW5pdCAobnVtYmVyLCBiYXNlLCBlbmRpYW4pIHsKICAgIGlmICh0eXBlb2YgbnVtYmVyID09PSAnbnVtYmVyJykgewogICAgICByZXR1cm4gdGhpcy5faW5pdE51bWJlcihudW1iZXIsIGJhc2UsIGVuZGlhbik7CiAgICB9CgogICAgaWYgKHR5cGVvZiBudW1iZXIgPT09ICdvYmplY3QnKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbml0QXJyYXkobnVtYmVyLCBiYXNlLCBlbmRpYW4pOwogICAgfQoKICAgIGlmIChiYXNlID09PSAnaGV4JykgewogICAgICBiYXNlID0gMTY7CiAgICB9CiAgICBhc3NlcnQoYmFzZSA9PT0gKGJhc2UgfCAwKSAmJiBiYXNlID49IDIgJiYgYmFzZSA8PSAzNik7CgogICAgbnVtYmVyID0gbnVtYmVyLnRvU3RyaW5nKCkucmVwbGFjZSgvXHMrL2csICcnKTsKICAgIHZhciBzdGFydCA9IDA7CiAgICBpZiAobnVtYmVyWzBdID09PSAnLScpIHsKICAgICAgc3RhcnQrKzsKICAgIH0KCiAgICBpZiAoYmFzZSA9PT0gMTYpIHsKICAgICAgdGhpcy5fcGFyc2VIZXgobnVtYmVyLCBzdGFydCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9wYXJzZUJhc2UobnVtYmVyLCBiYXNlLCBzdGFydCk7CiAgICB9CgogICAgaWYgKG51bWJlclswXSA9PT0gJy0nKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgfQoKICAgIHRoaXMuc3RyaXAoKTsKCiAgICBpZiAoZW5kaWFuICE9PSAnbGUnKSByZXR1cm47CgogICAgdGhpcy5faW5pdEFycmF5KHRoaXMudG9BcnJheSgpLCBiYXNlLCBlbmRpYW4pOwogIH07CgogIEJOLnByb3RvdHlwZS5faW5pdE51bWJlciA9IGZ1bmN0aW9uIF9pbml0TnVtYmVyIChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgaWYgKG51bWJlciA8IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICAgIG51bWJlciA9IC1udW1iZXI7CiAgICB9CiAgICBpZiAobnVtYmVyIDwgMHg0MDAwMDAwKSB7CiAgICAgIHRoaXMud29yZHMgPSBbIG51bWJlciAmIDB4M2ZmZmZmZiBdOwogICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICB9IGVsc2UgaWYgKG51bWJlciA8IDB4MTAwMDAwMDAwMDAwMDApIHsKICAgICAgdGhpcy53b3JkcyA9IFsKICAgICAgICBudW1iZXIgJiAweDNmZmZmZmYsCiAgICAgICAgKG51bWJlciAvIDB4NDAwMDAwMCkgJiAweDNmZmZmZmYKICAgICAgXTsKICAgICAgdGhpcy5sZW5ndGggPSAyOwogICAgfSBlbHNlIHsKICAgICAgYXNzZXJ0KG51bWJlciA8IDB4MjAwMDAwMDAwMDAwMDApOyAvLyAyIF4gNTMgKHVuc2FmZSkKICAgICAgdGhpcy53b3JkcyA9IFsKICAgICAgICBudW1iZXIgJiAweDNmZmZmZmYsCiAgICAgICAgKG51bWJlciAvIDB4NDAwMDAwMCkgJiAweDNmZmZmZmYsCiAgICAgICAgMQogICAgICBdOwogICAgICB0aGlzLmxlbmd0aCA9IDM7CiAgICB9CgogICAgaWYgKGVuZGlhbiAhPT0gJ2xlJykgcmV0dXJuOwoKICAgIC8vIFJldmVyc2UgdGhlIGJ5dGVzCiAgICB0aGlzLl9pbml0QXJyYXkodGhpcy50b0FycmF5KCksIGJhc2UsIGVuZGlhbik7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9pbml0QXJyYXkgPSBmdW5jdGlvbiBfaW5pdEFycmF5IChudW1iZXIsIGJhc2UsIGVuZGlhbikgewogICAgLy8gUGVyaGFwcyBhIFVpbnQ4QXJyYXkKICAgIGFzc2VydCh0eXBlb2YgbnVtYmVyLmxlbmd0aCA9PT0gJ251bWJlcicpOwogICAgaWYgKG51bWJlci5sZW5ndGggPD0gMCkgewogICAgICB0aGlzLndvcmRzID0gWyAwIF07CiAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgdGhpcy5sZW5ndGggPSBNYXRoLmNlaWwobnVtYmVyLmxlbmd0aCAvIDMpOwogICAgdGhpcy53b3JkcyA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICB9CgogICAgdmFyIGosIHc7CiAgICB2YXIgb2ZmID0gMDsKICAgIGlmIChlbmRpYW4gPT09ICdiZScpIHsKICAgICAgZm9yIChpID0gbnVtYmVyLmxlbmd0aCAtIDEsIGogPSAwOyBpID49IDA7IGkgLT0gMykgewogICAgICAgIHcgPSBudW1iZXJbaV0gfCAobnVtYmVyW2kgLSAxXSA8PCA4KSB8IChudW1iZXJbaSAtIDJdIDw8IDE2KTsKICAgICAgICB0aGlzLndvcmRzW2pdIHw9ICh3IDw8IG9mZikgJiAweDNmZmZmZmY7CiAgICAgICAgdGhpcy53b3Jkc1tqICsgMV0gPSAodyA+Pj4gKDI2IC0gb2ZmKSkgJiAweDNmZmZmZmY7CiAgICAgICAgb2ZmICs9IDI0OwogICAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICAgIG9mZiAtPSAyNjsKICAgICAgICAgIGorKzsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZW5kaWFuID09PSAnbGUnKSB7CiAgICAgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbnVtYmVyLmxlbmd0aDsgaSArPSAzKSB7CiAgICAgICAgdyA9IG51bWJlcltpXSB8IChudW1iZXJbaSArIDFdIDw8IDgpIHwgKG51bWJlcltpICsgMl0gPDwgMTYpOwogICAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgICB0aGlzLndvcmRzW2ogKyAxXSA9ICh3ID4+PiAoMjYgLSBvZmYpKSAmIDB4M2ZmZmZmZjsKICAgICAgICBvZmYgKz0gMjQ7CiAgICAgICAgaWYgKG9mZiA+PSAyNikgewogICAgICAgICAgb2ZmIC09IDI2OwogICAgICAgICAgaisrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBmdW5jdGlvbiBwYXJzZUhleCAoc3RyLCBzdGFydCwgZW5kKSB7CiAgICB2YXIgciA9IDA7CiAgICB2YXIgbGVuID0gTWF0aC5taW4oc3RyLmxlbmd0aCwgZW5kKTsKICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSkgLSA0ODsKCiAgICAgIHIgPDw9IDQ7CgogICAgICAvLyAnYScgLSAnZicKICAgICAgaWYgKGMgPj0gNDkgJiYgYyA8PSA1NCkgewogICAgICAgIHIgfD0gYyAtIDQ5ICsgMHhhOwoKICAgICAgLy8gJ0EnIC0gJ0YnCiAgICAgIH0gZWxzZSBpZiAoYyA+PSAxNyAmJiBjIDw9IDIyKSB7CiAgICAgICAgciB8PSBjIC0gMTcgKyAweGE7CgogICAgICAvLyAnMCcgLSAnOScKICAgICAgfSBlbHNlIHsKICAgICAgICByIHw9IGMgJiAweGY7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByOwogIH0KCiAgQk4ucHJvdG90eXBlLl9wYXJzZUhleCA9IGZ1bmN0aW9uIF9wYXJzZUhleCAobnVtYmVyLCBzdGFydCkgewogICAgLy8gQ3JlYXRlIHBvc3NpYmx5IGJpZ2dlciBhcnJheSB0byBlbnN1cmUgdGhhdCBpdCBmaXRzIHRoZSBudW1iZXIKICAgIHRoaXMubGVuZ3RoID0gTWF0aC5jZWlsKChudW1iZXIubGVuZ3RoIC0gc3RhcnQpIC8gNik7CiAgICB0aGlzLndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gMDsKICAgIH0KCiAgICB2YXIgaiwgdzsKICAgIC8vIFNjYW4gMjQtYml0IGNodW5rcyBhbmQgYWRkIHRoZW0gdG8gdGhlIG51bWJlcgogICAgdmFyIG9mZiA9IDA7CiAgICBmb3IgKGkgPSBudW1iZXIubGVuZ3RoIC0gNiwgaiA9IDA7IGkgPj0gc3RhcnQ7IGkgLT0gNikgewogICAgICB3ID0gcGFyc2VIZXgobnVtYmVyLCBpLCBpICsgNik7CiAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgdGhpcy53b3Jkc1tqICsgMV0gfD0gdyA+Pj4gKDI2IC0gb2ZmKSAmIDB4M2ZmZmZmOwogICAgICBvZmYgKz0gMjQ7CiAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICBvZmYgLT0gMjY7CiAgICAgICAgaisrOwogICAgICB9CiAgICB9CiAgICBpZiAoaSArIDYgIT09IHN0YXJ0KSB7CiAgICAgIHcgPSBwYXJzZUhleChudW1iZXIsIHN0YXJ0LCBpICsgNik7CiAgICAgIHRoaXMud29yZHNbal0gfD0gKHcgPDwgb2ZmKSAmIDB4M2ZmZmZmZjsKICAgICAgdGhpcy53b3Jkc1tqICsgMV0gfD0gdyA+Pj4gKDI2IC0gb2ZmKSAmIDB4M2ZmZmZmOwogICAgfQogICAgdGhpcy5zdHJpcCgpOwogIH07CgogIGZ1bmN0aW9uIHBhcnNlQmFzZSAoc3RyLCBzdGFydCwgZW5kLCBtdWwpIHsKICAgIHZhciByID0gMDsKICAgIHZhciBsZW4gPSBNYXRoLm1pbihzdHIubGVuZ3RoLCBlbmQpOwogICAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgbGVuOyBpKyspIHsKICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKSAtIDQ4OwoKICAgICAgciAqPSBtdWw7CgogICAgICAvLyAnYScKICAgICAgaWYgKGMgPj0gNDkpIHsKICAgICAgICByICs9IGMgLSA0OSArIDB4YTsKCiAgICAgIC8vICdBJwogICAgICB9IGVsc2UgaWYgKGMgPj0gMTcpIHsKICAgICAgICByICs9IGMgLSAxNyArIDB4YTsKCiAgICAgIC8vICcwJyAtICc5JwogICAgICB9IGVsc2UgewogICAgICAgIHIgKz0gYzsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHI7CiAgfQoKICBCTi5wcm90b3R5cGUuX3BhcnNlQmFzZSA9IGZ1bmN0aW9uIF9wYXJzZUJhc2UgKG51bWJlciwgYmFzZSwgc3RhcnQpIHsKICAgIC8vIEluaXRpYWxpemUgYXMgemVybwogICAgdGhpcy53b3JkcyA9IFsgMCBdOwogICAgdGhpcy5sZW5ndGggPSAxOwoKICAgIC8vIEZpbmQgbGVuZ3RoIG9mIGxpbWIgaW4gYmFzZQogICAgZm9yICh2YXIgbGltYkxlbiA9IDAsIGxpbWJQb3cgPSAxOyBsaW1iUG93IDw9IDB4M2ZmZmZmZjsgbGltYlBvdyAqPSBiYXNlKSB7CiAgICAgIGxpbWJMZW4rKzsKICAgIH0KICAgIGxpbWJMZW4tLTsKICAgIGxpbWJQb3cgPSAobGltYlBvdyAvIGJhc2UpIHwgMDsKCiAgICB2YXIgdG90YWwgPSBudW1iZXIubGVuZ3RoIC0gc3RhcnQ7CiAgICB2YXIgbW9kID0gdG90YWwgJSBsaW1iTGVuOwogICAgdmFyIGVuZCA9IE1hdGgubWluKHRvdGFsLCB0b3RhbCAtIG1vZCkgKyBzdGFydDsKCiAgICB2YXIgd29yZCA9IDA7CiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gbGltYkxlbikgewogICAgICB3b3JkID0gcGFyc2VCYXNlKG51bWJlciwgaSwgaSArIGxpbWJMZW4sIGJhc2UpOwoKICAgICAgdGhpcy5pbXVsbihsaW1iUG93KTsKICAgICAgaWYgKHRoaXMud29yZHNbMF0gKyB3b3JkIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSArPSB3b3JkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2lhZGRuKHdvcmQpOwogICAgICB9CiAgICB9CgogICAgaWYgKG1vZCAhPT0gMCkgewogICAgICB2YXIgcG93ID0gMTsKICAgICAgd29yZCA9IHBhcnNlQmFzZShudW1iZXIsIGksIG51bWJlci5sZW5ndGgsIGJhc2UpOwoKICAgICAgZm9yIChpID0gMDsgaSA8IG1vZDsgaSsrKSB7CiAgICAgICAgcG93ICo9IGJhc2U7CiAgICAgIH0KCiAgICAgIHRoaXMuaW11bG4ocG93KTsKICAgICAgaWYgKHRoaXMud29yZHNbMF0gKyB3b3JkIDwgMHg0MDAwMDAwKSB7CiAgICAgICAgdGhpcy53b3Jkc1swXSArPSB3b3JkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2lhZGRuKHdvcmQpOwogICAgICB9CiAgICB9CiAgfTsKCiAgQk4ucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5IChkZXN0KSB7CiAgICBkZXN0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICBkZXN0LndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXTsKICAgIH0KICAgIGRlc3QubGVuZ3RoID0gdGhpcy5sZW5ndGg7CiAgICBkZXN0Lm5lZ2F0aXZlID0gdGhpcy5uZWdhdGl2ZTsKICAgIGRlc3QucmVkID0gdGhpcy5yZWQ7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUgKCkgewogICAgdmFyIHIgPSBuZXcgQk4obnVsbCk7CiAgICB0aGlzLmNvcHkocik7CiAgICByZXR1cm4gcjsKICB9OwoKICAvLyBSZW1vdmUgbGVhZGluZyBgMGAgZnJvbSBgdGhpc2AKICBCTi5wcm90b3R5cGUuc3RyaXAgPSBmdW5jdGlvbiBzdHJpcCAoKSB7CiAgICB3aGlsZSAodGhpcy5sZW5ndGggPiAxICYmIHRoaXMud29yZHNbdGhpcy5sZW5ndGggLSAxXSA9PT0gMCkgewogICAgICB0aGlzLmxlbmd0aC0tOwogICAgfQogICAgcmV0dXJuIHRoaXMuX25vcm1TaWduKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9ub3JtU2lnbiA9IGZ1bmN0aW9uIF9ub3JtU2lnbiAoKSB7CiAgICAvLyAtMCA9IDAKICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSAmJiB0aGlzLndvcmRzWzBdID09PSAwKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHsKICAgIHJldHVybiAodGhpcy5yZWQgPyAnPEJOLVI6ICcgOiAnPEJOOiAnKSArIHRoaXMudG9TdHJpbmcoMTYpICsgJz4nOwogIH07CgogIC8qCgogIHZhciB6ZXJvcyA9IFtdOwogIHZhciBncm91cFNpemVzID0gW107CiAgdmFyIGdyb3VwQmFzZXMgPSBbXTsKCiAgdmFyIHMgPSAnJzsKICB2YXIgaSA9IC0xOwogIHdoaWxlICgrK2kgPCBCTi53b3JkU2l6ZSkgewogICAgemVyb3NbaV0gPSBzOwogICAgcyArPSAnMCc7CiAgfQogIGdyb3VwU2l6ZXNbMF0gPSAwOwogIGdyb3VwU2l6ZXNbMV0gPSAwOwogIGdyb3VwQmFzZXNbMF0gPSAwOwogIGdyb3VwQmFzZXNbMV0gPSAwOwogIHZhciBiYXNlID0gMiAtIDE7CiAgd2hpbGUgKCsrYmFzZSA8IDM2ICsgMSkgewogICAgdmFyIGdyb3VwU2l6ZSA9IDA7CiAgICB2YXIgZ3JvdXBCYXNlID0gMTsKICAgIHdoaWxlIChncm91cEJhc2UgPCAoMSA8PCBCTi53b3JkU2l6ZSkgLyBiYXNlKSB7CiAgICAgIGdyb3VwQmFzZSAqPSBiYXNlOwogICAgICBncm91cFNpemUgKz0gMTsKICAgIH0KICAgIGdyb3VwU2l6ZXNbYmFzZV0gPSBncm91cFNpemU7CiAgICBncm91cEJhc2VzW2Jhc2VdID0gZ3JvdXBCYXNlOwogIH0KCiAgKi8KCiAgdmFyIHplcm9zID0gWwogICAgJycsCiAgICAnMCcsCiAgICAnMDAnLAogICAgJzAwMCcsCiAgICAnMDAwMCcsCiAgICAnMDAwMDAnLAogICAgJzAwMDAwMCcsCiAgICAnMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLAogICAgJzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsCiAgICAnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcKICBdOwoKICB2YXIgZ3JvdXBTaXplcyA9IFsKICAgIDAsIDAsCiAgICAyNSwgMTYsIDEyLCAxMSwgMTAsIDksIDgsCiAgICA4LCA3LCA3LCA3LCA3LCA2LCA2LAogICAgNiwgNiwgNiwgNiwgNiwgNSwgNSwKICAgIDUsIDUsIDUsIDUsIDUsIDUsIDUsCiAgICA1LCA1LCA1LCA1LCA1LCA1LCA1CiAgXTsKCiAgdmFyIGdyb3VwQmFzZXMgPSBbCiAgICAwLCAwLAogICAgMzM1NTQ0MzIsIDQzMDQ2NzIxLCAxNjc3NzIxNiwgNDg4MjgxMjUsIDYwNDY2MTc2LCA0MDM1MzYwNywgMTY3NzcyMTYsCiAgICA0MzA0NjcyMSwgMTAwMDAwMDAsIDE5NDg3MTcxLCAzNTgzMTgwOCwgNjI3NDg1MTcsIDc1Mjk1MzYsIDExMzkwNjI1LAogICAgMTY3NzcyMTYsIDI0MTM3NTY5LCAzNDAxMjIyNCwgNDcwNDU4ODEsIDY0MDAwMDAwLCA0MDg0MTAxLCA1MTUzNjMyLAogICAgNjQzNjM0MywgNzk2MjYyNCwgOTc2NTYyNSwgMTE4ODEzNzYsIDE0MzQ4OTA3LCAxNzIxMDM2OCwgMjA1MTExNDksCiAgICAyNDMwMDAwMCwgMjg2MjkxNTEsIDMzNTU0NDMyLCAzOTEzNTM5MywgNDU0MzU0MjQsIDUyNTIxODc1LCA2MDQ2NjE3NgogIF07CgogIEJOLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nIChiYXNlLCBwYWRkaW5nKSB7CiAgICBiYXNlID0gYmFzZSB8fCAxMDsKICAgIHBhZGRpbmcgPSBwYWRkaW5nIHwgMCB8fCAxOwoKICAgIHZhciBvdXQ7CiAgICBpZiAoYmFzZSA9PT0gMTYgfHwgYmFzZSA9PT0gJ2hleCcpIHsKICAgICAgb3V0ID0gJyc7CiAgICAgIHZhciBvZmYgPSAwOwogICAgICB2YXIgY2FycnkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdyA9IHRoaXMud29yZHNbaV07CiAgICAgICAgdmFyIHdvcmQgPSAoKCh3IDw8IG9mZikgfCBjYXJyeSkgJiAweGZmZmZmZikudG9TdHJpbmcoMTYpOwogICAgICAgIGNhcnJ5ID0gKHcgPj4+ICgyNCAtIG9mZikpICYgMHhmZmZmZmY7CiAgICAgICAgaWYgKGNhcnJ5ICE9PSAwIHx8IGkgIT09IHRoaXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgb3V0ID0gemVyb3NbNiAtIHdvcmQubGVuZ3RoXSArIHdvcmQgKyBvdXQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG91dCA9IHdvcmQgKyBvdXQ7CiAgICAgICAgfQogICAgICAgIG9mZiArPSAyOwogICAgICAgIGlmIChvZmYgPj0gMjYpIHsKICAgICAgICAgIG9mZiAtPSAyNjsKICAgICAgICAgIGktLTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgICAgb3V0ID0gY2FycnkudG9TdHJpbmcoMTYpICsgb3V0OwogICAgICB9CiAgICAgIHdoaWxlIChvdXQubGVuZ3RoICUgcGFkZGluZyAhPT0gMCkgewogICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgfQogICAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIG91dCA9ICctJyArIG91dDsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQoKICAgIGlmIChiYXNlID09PSAoYmFzZSB8IDApICYmIGJhc2UgPj0gMiAmJiBiYXNlIDw9IDM2KSB7CiAgICAgIC8vIHZhciBncm91cFNpemUgPSBNYXRoLmZsb29yKEJOLndvcmRTaXplICogTWF0aC5MTjIgLyBNYXRoLmxvZyhiYXNlKSk7CiAgICAgIHZhciBncm91cFNpemUgPSBncm91cFNpemVzW2Jhc2VdOwogICAgICAvLyB2YXIgZ3JvdXBCYXNlID0gTWF0aC5wb3coYmFzZSwgZ3JvdXBTaXplKTsKICAgICAgdmFyIGdyb3VwQmFzZSA9IGdyb3VwQmFzZXNbYmFzZV07CiAgICAgIG91dCA9ICcnOwogICAgICB2YXIgYyA9IHRoaXMuY2xvbmUoKTsKICAgICAgYy5uZWdhdGl2ZSA9IDA7CiAgICAgIHdoaWxlICghYy5pc1plcm8oKSkgewogICAgICAgIHZhciByID0gYy5tb2RuKGdyb3VwQmFzZSkudG9TdHJpbmcoYmFzZSk7CiAgICAgICAgYyA9IGMuaWRpdm4oZ3JvdXBCYXNlKTsKCiAgICAgICAgaWYgKCFjLmlzWmVybygpKSB7CiAgICAgICAgICBvdXQgPSB6ZXJvc1tncm91cFNpemUgLSByLmxlbmd0aF0gKyByICsgb3V0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvdXQgPSByICsgb3V0OwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5pc1plcm8oKSkgewogICAgICAgIG91dCA9ICcwJyArIG91dDsKICAgICAgfQogICAgICB3aGlsZSAob3V0Lmxlbmd0aCAlIHBhZGRpbmcgIT09IDApIHsKICAgICAgICBvdXQgPSAnMCcgKyBvdXQ7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgICBvdXQgPSAnLScgKyBvdXQ7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KCiAgICBhc3NlcnQoZmFsc2UsICdCYXNlIHNob3VsZCBiZSBiZXR3ZWVuIDIgYW5kIDM2Jyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnRvTnVtYmVyID0gZnVuY3Rpb24gdG9OdW1iZXIgKCkgewogICAgdmFyIGxlbmd0aCA9IHRoaXMuYml0TGVuZ3RoKCk7CiAgICB2YXIgcmV0OwogICAgaWYgKGxlbmd0aCA8PSAyNikgewogICAgICByZXQgPSB0aGlzLndvcmRzWzBdOwogICAgfSBlbHNlIGlmIChsZW5ndGggPD0gNTIpIHsKICAgICAgcmV0ID0gKHRoaXMud29yZHNbMV0gKiAweDQwMDAwMDApICsgdGhpcy53b3Jkc1swXTsKICAgIH0gZWxzZSBpZiAobGVuZ3RoID09PSA1MykgewogICAgICAvLyBOT1RFOiBhdCB0aGlzIHN0YWdlIGl0IGlzIGtub3duIHRoYXQgdGhlIHRvcCBiaXQgaXMgc2V0CiAgICAgIHJldCA9IDB4MTAwMDAwMDAwMDAwMDAgKyAodGhpcy53b3Jkc1sxXSAqIDB4NDAwMDAwMCkgKyB0aGlzLndvcmRzWzBdOwogICAgfSBlbHNlIHsKICAgICAgYXNzZXJ0KGZhbHNlLCAnTnVtYmVyIGNhbiBvbmx5IHNhZmVseSBzdG9yZSB1cCB0byA1MyBiaXRzJyk7CiAgICB9CiAgICByZXR1cm4gKHRoaXMubmVnYXRpdmUgIT09IDApID8gLXJldCA6IHJldDsKICB9OwoKICBCTi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKDE2KTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9CdWZmZXIgPSBmdW5jdGlvbiB0b0J1ZmZlciAoZW5kaWFuLCBsZW5ndGgpIHsKICAgIGFzc2VydCh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyk7CiAgICByZXR1cm4gdGhpcy50b0FycmF5TGlrZShCdWZmZXIsIGVuZGlhbiwgbGVuZ3RoKTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIHRvQXJyYXkgKGVuZGlhbiwgbGVuZ3RoKSB7CiAgICByZXR1cm4gdGhpcy50b0FycmF5TGlrZShBcnJheSwgZW5kaWFuLCBsZW5ndGgpOwogIH07CgogIEJOLnByb3RvdHlwZS50b0FycmF5TGlrZSA9IGZ1bmN0aW9uIHRvQXJyYXlMaWtlIChBcnJheVR5cGUsIGVuZGlhbiwgbGVuZ3RoKSB7CiAgICB2YXIgYnl0ZUxlbmd0aCA9IHRoaXMuYnl0ZUxlbmd0aCgpOwogICAgdmFyIHJlcUxlbmd0aCA9IGxlbmd0aCB8fCBNYXRoLm1heCgxLCBieXRlTGVuZ3RoKTsKICAgIGFzc2VydChieXRlTGVuZ3RoIDw9IHJlcUxlbmd0aCwgJ2J5dGUgYXJyYXkgbG9uZ2VyIHRoYW4gZGVzaXJlZCBsZW5ndGgnKTsKICAgIGFzc2VydChyZXFMZW5ndGggPiAwLCAnUmVxdWVzdGVkIGFycmF5IGxlbmd0aCA8PSAwJyk7CgogICAgdGhpcy5zdHJpcCgpOwogICAgdmFyIGxpdHRsZUVuZGlhbiA9IGVuZGlhbiA9PT0gJ2xlJzsKICAgIHZhciByZXMgPSBuZXcgQXJyYXlUeXBlKHJlcUxlbmd0aCk7CgogICAgdmFyIGIsIGk7CiAgICB2YXIgcSA9IHRoaXMuY2xvbmUoKTsKICAgIGlmICghbGl0dGxlRW5kaWFuKSB7CiAgICAgIC8vIEFzc3VtZSBiaWctZW5kaWFuCiAgICAgIGZvciAoaSA9IDA7IGkgPCByZXFMZW5ndGggLSBieXRlTGVuZ3RoOyBpKyspIHsKICAgICAgICByZXNbaV0gPSAwOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyAhcS5pc1plcm8oKTsgaSsrKSB7CiAgICAgICAgYiA9IHEuYW5kbG4oMHhmZik7CiAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgIHJlc1tyZXFMZW5ndGggLSBpIC0gMV0gPSBiOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBmb3IgKGkgPSAwOyAhcS5pc1plcm8oKTsgaSsrKSB7CiAgICAgICAgYiA9IHEuYW5kbG4oMHhmZik7CiAgICAgICAgcS5pdXNocm4oOCk7CgogICAgICAgIHJlc1tpXSA9IGI7CiAgICAgIH0KCiAgICAgIGZvciAoOyBpIDwgcmVxTGVuZ3RoOyBpKyspIHsKICAgICAgICByZXNbaV0gPSAwOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJlczsKICB9OwoKICBpZiAoTWF0aC5jbHozMikgewogICAgQk4ucHJvdG90eXBlLl9jb3VudEJpdHMgPSBmdW5jdGlvbiBfY291bnRCaXRzICh3KSB7CiAgICAgIHJldHVybiAzMiAtIE1hdGguY2x6MzIodyk7CiAgICB9OwogIH0gZWxzZSB7CiAgICBCTi5wcm90b3R5cGUuX2NvdW50Qml0cyA9IGZ1bmN0aW9uIF9jb3VudEJpdHMgKHcpIHsKICAgICAgdmFyIHQgPSB3OwogICAgICB2YXIgciA9IDA7CiAgICAgIGlmICh0ID49IDB4MTAwMCkgewogICAgICAgIHIgKz0gMTM7CiAgICAgICAgdCA+Pj49IDEzOwogICAgICB9CiAgICAgIGlmICh0ID49IDB4NDApIHsKICAgICAgICByICs9IDc7CiAgICAgICAgdCA+Pj49IDc7CiAgICAgIH0KICAgICAgaWYgKHQgPj0gMHg4KSB7CiAgICAgICAgciArPSA0OwogICAgICAgIHQgPj4+PSA0OwogICAgICB9CiAgICAgIGlmICh0ID49IDB4MDIpIHsKICAgICAgICByICs9IDI7CiAgICAgICAgdCA+Pj49IDI7CiAgICAgIH0KICAgICAgcmV0dXJuIHIgKyB0OwogICAgfTsKICB9CgogIEJOLnByb3RvdHlwZS5femVyb0JpdHMgPSBmdW5jdGlvbiBfemVyb0JpdHMgKHcpIHsKICAgIC8vIFNob3J0LWN1dAogICAgaWYgKHcgPT09IDApIHJldHVybiAyNjsKCiAgICB2YXIgdCA9IHc7CiAgICB2YXIgciA9IDA7CiAgICBpZiAoKHQgJiAweDFmZmYpID09PSAwKSB7CiAgICAgIHIgKz0gMTM7CiAgICAgIHQgPj4+PSAxMzsKICAgIH0KICAgIGlmICgodCAmIDB4N2YpID09PSAwKSB7CiAgICAgIHIgKz0gNzsKICAgICAgdCA+Pj49IDc7CiAgICB9CiAgICBpZiAoKHQgJiAweGYpID09PSAwKSB7CiAgICAgIHIgKz0gNDsKICAgICAgdCA+Pj49IDQ7CiAgICB9CiAgICBpZiAoKHQgJiAweDMpID09PSAwKSB7CiAgICAgIHIgKz0gMjsKICAgICAgdCA+Pj49IDI7CiAgICB9CiAgICBpZiAoKHQgJiAweDEpID09PSAwKSB7CiAgICAgIHIrKzsKICAgIH0KICAgIHJldHVybiByOwogIH07CgogIC8vIFJldHVybiBudW1iZXIgb2YgdXNlZCBiaXRzIGluIGEgQk4KICBCTi5wcm90b3R5cGUuYml0TGVuZ3RoID0gZnVuY3Rpb24gYml0TGVuZ3RoICgpIHsKICAgIHZhciB3ID0gdGhpcy53b3Jkc1t0aGlzLmxlbmd0aCAtIDFdOwogICAgdmFyIGhpID0gdGhpcy5fY291bnRCaXRzKHcpOwogICAgcmV0dXJuICh0aGlzLmxlbmd0aCAtIDEpICogMjYgKyBoaTsKICB9OwoKICBmdW5jdGlvbiB0b0JpdEFycmF5IChudW0pIHsKICAgIHZhciB3ID0gbmV3IEFycmF5KG51bS5iaXRMZW5ndGgoKSk7CgogICAgZm9yICh2YXIgYml0ID0gMDsgYml0IDwgdy5sZW5ndGg7IGJpdCsrKSB7CiAgICAgIHZhciBvZmYgPSAoYml0IC8gMjYpIHwgMDsKICAgICAgdmFyIHdiaXQgPSBiaXQgJSAyNjsKCiAgICAgIHdbYml0XSA9IChudW0ud29yZHNbb2ZmXSAmICgxIDw8IHdiaXQpKSA+Pj4gd2JpdDsKICAgIH0KCiAgICByZXR1cm4gdzsKICB9CgogIC8vIE51bWJlciBvZiB0cmFpbGluZyB6ZXJvIGJpdHMKICBCTi5wcm90b3R5cGUuemVyb0JpdHMgPSBmdW5jdGlvbiB6ZXJvQml0cyAoKSB7CiAgICBpZiAodGhpcy5pc1plcm8oKSkgcmV0dXJuIDA7CgogICAgdmFyIHIgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBiID0gdGhpcy5femVyb0JpdHModGhpcy53b3Jkc1tpXSk7CiAgICAgIHIgKz0gYjsKICAgICAgaWYgKGIgIT09IDI2KSBicmVhazsKICAgIH0KICAgIHJldHVybiByOwogIH07CgogIEJOLnByb3RvdHlwZS5ieXRlTGVuZ3RoID0gZnVuY3Rpb24gYnl0ZUxlbmd0aCAoKSB7CiAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuYml0TGVuZ3RoKCkgLyA4KTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9Ud29zID0gZnVuY3Rpb24gdG9Ud29zICh3aWR0aCkgewogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDApIHsKICAgICAgcmV0dXJuIHRoaXMuYWJzKCkuaW5vdG4od2lkdGgpLmlhZGRuKDEpOwogICAgfQogICAgcmV0dXJuIHRoaXMuY2xvbmUoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuZnJvbVR3b3MgPSBmdW5jdGlvbiBmcm9tVHdvcyAod2lkdGgpIHsKICAgIGlmICh0aGlzLnRlc3RuKHdpZHRoIC0gMSkpIHsKICAgICAgcmV0dXJuIHRoaXMubm90bih3aWR0aCkuaWFkZG4oMSkuaW5lZygpOwogICAgfQogICAgcmV0dXJuIHRoaXMuY2xvbmUoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNOZWcgPSBmdW5jdGlvbiBpc05lZyAoKSB7CiAgICByZXR1cm4gdGhpcy5uZWdhdGl2ZSAhPT0gMDsKICB9OwoKICAvLyBSZXR1cm4gbmVnYXRpdmUgY2xvbmUgb2YgYHRoaXNgCiAgQk4ucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZyAoKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmluZWcoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaW5lZyA9IGZ1bmN0aW9uIGluZWcgKCkgewogICAgaWYgKCF0aGlzLmlzWmVybygpKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgXj0gMTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICAvLyBPciBgbnVtYCB3aXRoIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pdW9yID0gZnVuY3Rpb24gaXVvciAobnVtKSB7CiAgICB3aGlsZSAodGhpcy5sZW5ndGggPCBudW0ubGVuZ3RoKSB7CiAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGgrK10gPSAwOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSB0aGlzLndvcmRzW2ldIHwgbnVtLndvcmRzW2ldOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlvciA9IGZ1bmN0aW9uIGlvciAobnVtKSB7CiAgICBhc3NlcnQoKHRoaXMubmVnYXRpdmUgfCBudW0ubmVnYXRpdmUpID09PSAwKTsKICAgIHJldHVybiB0aGlzLml1b3IobnVtKTsKICB9OwoKICAvLyBPciBgbnVtYCB3aXRoIGB0aGlzYAogIEJOLnByb3RvdHlwZS5vciA9IGZ1bmN0aW9uIG9yIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaW9yKG51bSk7CiAgICByZXR1cm4gbnVtLmNsb25lKCkuaW9yKHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS51b3IgPSBmdW5jdGlvbiB1b3IgKG51bSkgewogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdW9yKG51bSk7CiAgICByZXR1cm4gbnVtLmNsb25lKCkuaXVvcih0aGlzKTsKICB9OwoKICAvLyBBbmQgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaXVhbmQgPSBmdW5jdGlvbiBpdWFuZCAobnVtKSB7CiAgICAvLyBiID0gbWluLWxlbmd0aChudW0sIHRoaXMpCiAgICB2YXIgYjsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHsKICAgICAgYiA9IG51bTsKICAgIH0gZWxzZSB7CiAgICAgIGIgPSB0aGlzOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpXSAmIG51bS53b3Jkc1tpXTsKICAgIH0KCiAgICB0aGlzLmxlbmd0aCA9IGIubGVuZ3RoOwoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlhbmQgPSBmdW5jdGlvbiBpYW5kIChudW0pIHsKICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgcmV0dXJuIHRoaXMuaXVhbmQobnVtKTsKICB9OwoKICAvLyBBbmQgYG51bWAgd2l0aCBgdGhpc2AKICBCTi5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24gYW5kIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaWFuZChudW0pOwogICAgcmV0dXJuIG51bS5jbG9uZSgpLmlhbmQodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnVhbmQgPSBmdW5jdGlvbiB1YW5kIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXVhbmQobnVtKTsKICAgIHJldHVybiBudW0uY2xvbmUoKS5pdWFuZCh0aGlzKTsKICB9OwoKICAvLyBYb3IgYG51bWAgd2l0aCBgdGhpc2AgaW4tcGxhY2UKICBCTi5wcm90b3R5cGUuaXV4b3IgPSBmdW5jdGlvbiBpdXhvciAobnVtKSB7CiAgICAvLyBhLmxlbmd0aCA+IGIubGVuZ3RoCiAgICB2YXIgYTsKICAgIHZhciBiOwogICAgaWYgKHRoaXMubGVuZ3RoID4gbnVtLmxlbmd0aCkgewogICAgICBhID0gdGhpczsKICAgICAgYiA9IG51bTsKICAgIH0gZWxzZSB7CiAgICAgIGEgPSBudW07CiAgICAgIGIgPSB0aGlzOwogICAgfQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXSBeIGIud29yZHNbaV07CiAgICB9CgogICAgaWYgKHRoaXMgIT09IGEpIHsKICAgICAgZm9yICg7IGkgPCBhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGEud29yZHNbaV07CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLmxlbmd0aCA9IGEubGVuZ3RoOwoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLml4b3IgPSBmdW5jdGlvbiBpeG9yIChudW0pIHsKICAgIGFzc2VydCgodGhpcy5uZWdhdGl2ZSB8IG51bS5uZWdhdGl2ZSkgPT09IDApOwogICAgcmV0dXJuIHRoaXMuaXV4b3IobnVtKTsKICB9OwoKICAvLyBYb3IgYG51bWAgd2l0aCBgdGhpc2AKICBCTi5wcm90b3R5cGUueG9yID0gZnVuY3Rpb24geG9yIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXhvcihudW0pOwogICAgcmV0dXJuIG51bS5jbG9uZSgpLml4b3IodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnV4b3IgPSBmdW5jdGlvbiB1eG9yIChudW0pIHsKICAgIGlmICh0aGlzLmxlbmd0aCA+IG51bS5sZW5ndGgpIHJldHVybiB0aGlzLmNsb25lKCkuaXV4b3IobnVtKTsKICAgIHJldHVybiBudW0uY2xvbmUoKS5pdXhvcih0aGlzKTsKICB9OwoKICAvLyBOb3QgYGB0aGlzYGAgd2l0aCBgYHdpZHRoYGAgYml0d2lkdGgKICBCTi5wcm90b3R5cGUuaW5vdG4gPSBmdW5jdGlvbiBpbm90biAod2lkdGgpIHsKICAgIGFzc2VydCh0eXBlb2Ygd2lkdGggPT09ICdudW1iZXInICYmIHdpZHRoID49IDApOwoKICAgIHZhciBieXRlc05lZWRlZCA9IE1hdGguY2VpbCh3aWR0aCAvIDI2KSB8IDA7CiAgICB2YXIgYml0c0xlZnQgPSB3aWR0aCAlIDI2OwoKICAgIC8vIEV4dGVuZCB0aGUgYnVmZmVyIHdpdGggbGVhZGluZyB6ZXJvZXMKICAgIHdoaWxlICh0aGlzLmxlbmd0aCA8IGJ5dGVzTmVlZGVkKSB7CiAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGgrK10gPSAwOwogICAgfQoKICAgIGlmIChiaXRzTGVmdCA+IDApIHsKICAgICAgYnl0ZXNOZWVkZWQtLTsKICAgIH0KCiAgICAvLyBIYW5kbGUgY29tcGxldGUgd29yZHMKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXNOZWVkZWQ7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gfnRoaXMud29yZHNbaV0gJiAweDNmZmZmZmY7CiAgICB9CgogICAgLy8gSGFuZGxlIHRoZSByZXNpZHVlCiAgICBpZiAoYml0c0xlZnQgPiAwKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSB+dGhpcy53b3Jkc1tpXSAmICgweDNmZmZmZmYgPj4gKDI2IC0gYml0c0xlZnQpKTsKICAgIH0KCiAgICAvLyBBbmQgcmVtb3ZlIGxlYWRpbmcgemVyb2VzCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5ub3RuID0gZnVuY3Rpb24gbm90biAod2lkdGgpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW5vdG4od2lkdGgpOwogIH07CgogIC8vIFNldCBgYml0YCBvZiBgdGhpc2AKICBCTi5wcm90b3R5cGUuc2V0biA9IGZ1bmN0aW9uIHNldG4gKGJpdCwgdmFsKSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicgJiYgYml0ID49IDApOwoKICAgIHZhciBvZmYgPSAoYml0IC8gMjYpIHwgMDsKICAgIHZhciB3Yml0ID0gYml0ICUgMjY7CgogICAgd2hpbGUgKHRoaXMubGVuZ3RoIDw9IG9mZikgewogICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoKytdID0gMDsKICAgIH0KCiAgICBpZiAodmFsKSB7CiAgICAgIHRoaXMud29yZHNbb2ZmXSA9IHRoaXMud29yZHNbb2ZmXSB8ICgxIDw8IHdiaXQpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy53b3Jkc1tvZmZdID0gdGhpcy53b3Jkc1tvZmZdICYgfigxIDw8IHdiaXQpOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgLy8gQWRkIGBudW1gIHRvIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pYWRkID0gZnVuY3Rpb24gaWFkZCAobnVtKSB7CiAgICB2YXIgcjsKCiAgICAvLyBuZWdhdGl2ZSArIHBvc2l0aXZlCiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIHIgPSB0aGlzLmlzdWIobnVtKTsKICAgICAgdGhpcy5uZWdhdGl2ZSBePSAxOwogICAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKCiAgICAvLyBwb3NpdGl2ZSArIG5lZ2F0aXZlCiAgICB9IGVsc2UgaWYgKHRoaXMubmVnYXRpdmUgPT09IDAgJiYgbnVtLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIG51bS5uZWdhdGl2ZSA9IDA7CiAgICAgIHIgPSB0aGlzLmlzdWIobnVtKTsKICAgICAgbnVtLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHIuX25vcm1TaWduKCk7CiAgICB9CgogICAgLy8gYS5sZW5ndGggPiBiLmxlbmd0aAogICAgdmFyIGEsIGI7CiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSB7CiAgICAgIGEgPSB0aGlzOwogICAgICBiID0gbnVtOwogICAgfSBlbHNlIHsKICAgICAgYSA9IG51bTsKICAgICAgYiA9IHRoaXM7CiAgICB9CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIChiLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIGNhcnJ5ID0gciA+Pj4gMjY7CiAgICB9CiAgICBmb3IgKDsgY2FycnkgIT09IDAgJiYgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgciA9IChhLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHIgJiAweDNmZmZmZmY7CiAgICAgIGNhcnJ5ID0gciA+Pj4gMjY7CiAgICB9CgogICAgdGhpcy5sZW5ndGggPSBhLmxlbmd0aDsKICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICB0aGlzLndvcmRzW3RoaXMubGVuZ3RoXSA9IGNhcnJ5OwogICAgICB0aGlzLmxlbmd0aCsrOwogICAgLy8gQ29weSB0aGUgcmVzdCBvZiB0aGUgd29yZHMKICAgIH0gZWxzZSBpZiAoYSAhPT0gdGhpcykgewogICAgICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIEFkZCBgbnVtYCB0byBgdGhpc2AKICBCTi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChudW0pIHsKICAgIHZhciByZXM7CiAgICBpZiAobnVtLm5lZ2F0aXZlICE9PSAwICYmIHRoaXMubmVnYXRpdmUgPT09IDApIHsKICAgICAgbnVtLm5lZ2F0aXZlID0gMDsKICAgICAgcmVzID0gdGhpcy5zdWIobnVtKTsKICAgICAgbnVtLm5lZ2F0aXZlIF49IDE7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGVsc2UgaWYgKG51bS5uZWdhdGl2ZSA9PT0gMCAmJiB0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICByZXMgPSBudW0uc3ViKHRoaXMpOwogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHJlczsKICAgIH0KCiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gdGhpcy5jbG9uZSgpLmlhZGQobnVtKTsKCiAgICByZXR1cm4gbnVtLmNsb25lKCkuaWFkZCh0aGlzKTsKICB9OwoKICAvLyBTdWJ0cmFjdCBgbnVtYCBmcm9tIGB0aGlzYCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pc3ViID0gZnVuY3Rpb24gaXN1YiAobnVtKSB7CiAgICAvLyB0aGlzIC0gKC1udW0pID0gdGhpcyArIG51bQogICAgaWYgKG51bS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBudW0ubmVnYXRpdmUgPSAwOwogICAgICB2YXIgciA9IHRoaXMuaWFkZChudW0pOwogICAgICBudW0ubmVnYXRpdmUgPSAxOwogICAgICByZXR1cm4gci5fbm9ybVNpZ24oKTsKCiAgICAvLyAtdGhpcyAtIG51bSA9IC0odGhpcyArIG51bSkKICAgIH0gZWxzZSBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy5pYWRkKG51bSk7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgICByZXR1cm4gdGhpcy5fbm9ybVNpZ24oKTsKICAgIH0KCiAgICAvLyBBdCB0aGlzIHBvaW50IGJvdGggbnVtYmVycyBhcmUgcG9zaXRpdmUKICAgIHZhciBjbXAgPSB0aGlzLmNtcChudW0pOwoKICAgIC8vIE9wdGltaXphdGlvbiAtIHplcm9pZnkKICAgIGlmIChjbXAgPT09IDApIHsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDA7CiAgICAgIHRoaXMubGVuZ3RoID0gMTsKICAgICAgdGhpcy53b3Jkc1swXSA9IDA7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8vIGEgPiBiCiAgICB2YXIgYSwgYjsKICAgIGlmIChjbXAgPiAwKSB7CiAgICAgIGEgPSB0aGlzOwogICAgICBiID0gbnVtOwogICAgfSBlbHNlIHsKICAgICAgYSA9IG51bTsKICAgICAgYiA9IHRoaXM7CiAgICB9CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykgewogICAgICByID0gKGEud29yZHNbaV0gfCAwKSAtIChiLndvcmRzW2ldIHwgMCkgKyBjYXJyeTsKICAgICAgY2FycnkgPSByID4+IDI2OwogICAgICB0aGlzLndvcmRzW2ldID0gciAmIDB4M2ZmZmZmZjsKICAgIH0KICAgIGZvciAoOyBjYXJyeSAhPT0gMCAmJiBpIDwgYS5sZW5ndGg7IGkrKykgewogICAgICByID0gKGEud29yZHNbaV0gfCAwKSArIGNhcnJ5OwogICAgICBjYXJyeSA9IHIgPj4gMjY7CiAgICAgIHRoaXMud29yZHNbaV0gPSByICYgMHgzZmZmZmZmOwogICAgfQoKICAgIC8vIENvcHkgcmVzdCBvZiB0aGUgd29yZHMKICAgIGlmIChjYXJyeSA9PT0gMCAmJiBpIDwgYS5sZW5ndGggJiYgYSAhPT0gdGhpcykgewogICAgICBmb3IgKDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gYS53b3Jkc1tpXTsKICAgICAgfQogICAgfQoKICAgIHRoaXMubGVuZ3RoID0gTWF0aC5tYXgodGhpcy5sZW5ndGgsIGkpOwoKICAgIGlmIChhICE9PSB0aGlzKSB7CiAgICAgIHRoaXMubmVnYXRpdmUgPSAxOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgLy8gU3VidHJhY3QgYG51bWAgZnJvbSBgdGhpc2AKICBCTi5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24gc3ViIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaXN1YihudW0pOwogIH07CgogIGZ1bmN0aW9uIHNtYWxsTXVsVG8gKHNlbGYsIG51bSwgb3V0KSB7CiAgICBvdXQubmVnYXRpdmUgPSBudW0ubmVnYXRpdmUgXiBzZWxmLm5lZ2F0aXZlOwogICAgdmFyIGxlbiA9IChzZWxmLmxlbmd0aCArIG51bS5sZW5ndGgpIHwgMDsKICAgIG91dC5sZW5ndGggPSBsZW47CiAgICBsZW4gPSAobGVuIC0gMSkgfCAwOwoKICAgIC8vIFBlZWwgb25lIGl0ZXJhdGlvbiAoY29tcGlsZXIgY2FuJ3QgZG8gaXQsIGJlY2F1c2Ugb2YgY29kZSBjb21wbGV4aXR5KQogICAgdmFyIGEgPSBzZWxmLndvcmRzWzBdIHwgMDsKICAgIHZhciBiID0gbnVtLndvcmRzWzBdIHwgMDsKICAgIHZhciByID0gYSAqIGI7CgogICAgdmFyIGxvID0gciAmIDB4M2ZmZmZmZjsKICAgIHZhciBjYXJyeSA9IChyIC8gMHg0MDAwMDAwKSB8IDA7CiAgICBvdXQud29yZHNbMF0gPSBsbzsKCiAgICBmb3IgKHZhciBrID0gMTsgayA8IGxlbjsgaysrKSB7CiAgICAgIC8vIFN1bSBhbGwgd29yZHMgd2l0aCB0aGUgc2FtZSBgaSArIGogPSBrYCBhbmQgYWNjdW11bGF0ZSBgbmNhcnJ5YCwKICAgICAgLy8gbm90ZSB0aGF0IG5jYXJyeSBjb3VsZCBiZSA+PSAweDNmZmZmZmYKICAgICAgdmFyIG5jYXJyeSA9IGNhcnJ5ID4+PiAyNjsKICAgICAgdmFyIHJ3b3JkID0gY2FycnkgJiAweDNmZmZmZmY7CiAgICAgIHZhciBtYXhKID0gTWF0aC5taW4oaywgbnVtLmxlbmd0aCAtIDEpOwogICAgICBmb3IgKHZhciBqID0gTWF0aC5tYXgoMCwgayAtIHNlbGYubGVuZ3RoICsgMSk7IGogPD0gbWF4SjsgaisrKSB7CiAgICAgICAgdmFyIGkgPSAoayAtIGopIHwgMDsKICAgICAgICBhID0gc2VsZi53b3Jkc1tpXSB8IDA7CiAgICAgICAgYiA9IG51bS53b3Jkc1tqXSB8IDA7CiAgICAgICAgciA9IGEgKiBiICsgcndvcmQ7CiAgICAgICAgbmNhcnJ5ICs9IChyIC8gMHg0MDAwMDAwKSB8IDA7CiAgICAgICAgcndvcmQgPSByICYgMHgzZmZmZmZmOwogICAgICB9CiAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkIHwgMDsKICAgICAgY2FycnkgPSBuY2FycnkgfCAwOwogICAgfQogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIG91dC53b3Jkc1trXSA9IGNhcnJ5IHwgMDsKICAgIH0gZWxzZSB7CiAgICAgIG91dC5sZW5ndGgtLTsKICAgIH0KCiAgICByZXR1cm4gb3V0LnN0cmlwKCk7CiAgfQoKICAvLyBUT0RPKGluZHV0bnkpOiBpdCBtYXkgYmUgcmVhc29uYWJsZSB0byBvbWl0IGl0IGZvciB1c2VycyB3aG8gZG9uJ3QgbmVlZAogIC8vIHRvIHdvcmsgd2l0aCAyNTYtYml0IG51bWJlcnMsIG90aGVyd2lzZSBpdCBnaXZlcyAyMCUgaW1wcm92ZW1lbnQgZm9yIDI1Ni1iaXQKICAvLyBtdWx0aXBsaWNhdGlvbiAobGlrZSBlbGxpcHRpYyBzZWNwMjU2azEpLgogIHZhciBjb21iMTBNdWxUbyA9IGZ1bmN0aW9uIGNvbWIxME11bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgdmFyIGEgPSBzZWxmLndvcmRzOwogICAgdmFyIGIgPSBudW0ud29yZHM7CiAgICB2YXIgbyA9IG91dC53b3JkczsKICAgIHZhciBjID0gMDsKICAgIHZhciBsbzsKICAgIHZhciBtaWQ7CiAgICB2YXIgaGk7CiAgICB2YXIgYTAgPSBhWzBdIHwgMDsKICAgIHZhciBhbDAgPSBhMCAmIDB4MWZmZjsKICAgIHZhciBhaDAgPSBhMCA+Pj4gMTM7CiAgICB2YXIgYTEgPSBhWzFdIHwgMDsKICAgIHZhciBhbDEgPSBhMSAmIDB4MWZmZjsKICAgIHZhciBhaDEgPSBhMSA+Pj4gMTM7CiAgICB2YXIgYTIgPSBhWzJdIHwgMDsKICAgIHZhciBhbDIgPSBhMiAmIDB4MWZmZjsKICAgIHZhciBhaDIgPSBhMiA+Pj4gMTM7CiAgICB2YXIgYTMgPSBhWzNdIHwgMDsKICAgIHZhciBhbDMgPSBhMyAmIDB4MWZmZjsKICAgIHZhciBhaDMgPSBhMyA+Pj4gMTM7CiAgICB2YXIgYTQgPSBhWzRdIHwgMDsKICAgIHZhciBhbDQgPSBhNCAmIDB4MWZmZjsKICAgIHZhciBhaDQgPSBhNCA+Pj4gMTM7CiAgICB2YXIgYTUgPSBhWzVdIHwgMDsKICAgIHZhciBhbDUgPSBhNSAmIDB4MWZmZjsKICAgIHZhciBhaDUgPSBhNSA+Pj4gMTM7CiAgICB2YXIgYTYgPSBhWzZdIHwgMDsKICAgIHZhciBhbDYgPSBhNiAmIDB4MWZmZjsKICAgIHZhciBhaDYgPSBhNiA+Pj4gMTM7CiAgICB2YXIgYTcgPSBhWzddIHwgMDsKICAgIHZhciBhbDcgPSBhNyAmIDB4MWZmZjsKICAgIHZhciBhaDcgPSBhNyA+Pj4gMTM7CiAgICB2YXIgYTggPSBhWzhdIHwgMDsKICAgIHZhciBhbDggPSBhOCAmIDB4MWZmZjsKICAgIHZhciBhaDggPSBhOCA+Pj4gMTM7CiAgICB2YXIgYTkgPSBhWzldIHwgMDsKICAgIHZhciBhbDkgPSBhOSAmIDB4MWZmZjsKICAgIHZhciBhaDkgPSBhOSA+Pj4gMTM7CiAgICB2YXIgYjAgPSBiWzBdIHwgMDsKICAgIHZhciBibDAgPSBiMCAmIDB4MWZmZjsKICAgIHZhciBiaDAgPSBiMCA+Pj4gMTM7CiAgICB2YXIgYjEgPSBiWzFdIHwgMDsKICAgIHZhciBibDEgPSBiMSAmIDB4MWZmZjsKICAgIHZhciBiaDEgPSBiMSA+Pj4gMTM7CiAgICB2YXIgYjIgPSBiWzJdIHwgMDsKICAgIHZhciBibDIgPSBiMiAmIDB4MWZmZjsKICAgIHZhciBiaDIgPSBiMiA+Pj4gMTM7CiAgICB2YXIgYjMgPSBiWzNdIHwgMDsKICAgIHZhciBibDMgPSBiMyAmIDB4MWZmZjsKICAgIHZhciBiaDMgPSBiMyA+Pj4gMTM7CiAgICB2YXIgYjQgPSBiWzRdIHwgMDsKICAgIHZhciBibDQgPSBiNCAmIDB4MWZmZjsKICAgIHZhciBiaDQgPSBiNCA+Pj4gMTM7CiAgICB2YXIgYjUgPSBiWzVdIHwgMDsKICAgIHZhciBibDUgPSBiNSAmIDB4MWZmZjsKICAgIHZhciBiaDUgPSBiNSA+Pj4gMTM7CiAgICB2YXIgYjYgPSBiWzZdIHwgMDsKICAgIHZhciBibDYgPSBiNiAmIDB4MWZmZjsKICAgIHZhciBiaDYgPSBiNiA+Pj4gMTM7CiAgICB2YXIgYjcgPSBiWzddIHwgMDsKICAgIHZhciBibDcgPSBiNyAmIDB4MWZmZjsKICAgIHZhciBiaDcgPSBiNyA+Pj4gMTM7CiAgICB2YXIgYjggPSBiWzhdIHwgMDsKICAgIHZhciBibDggPSBiOCAmIDB4MWZmZjsKICAgIHZhciBiaDggPSBiOCA+Pj4gMTM7CiAgICB2YXIgYjkgPSBiWzldIHwgMDsKICAgIHZhciBibDkgPSBiOSAmIDB4MWZmZjsKICAgIHZhciBiaDkgPSBiOSA+Pj4gMTM7CgogICAgb3V0Lm5lZ2F0aXZlID0gc2VsZi5uZWdhdGl2ZSBeIG51bS5uZWdhdGl2ZTsKICAgIG91dC5sZW5ndGggPSAxOTsKICAgIC8qIGsgPSAwICovCiAgICBsbyA9IE1hdGguaW11bChhbDAsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWwwLCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDAsIGJoMCk7CiAgICB2YXIgdzAgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcwID4+PiAyNik7CiAgICB3MCAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMSAqLwogICAgbG8gPSBNYXRoLmltdWwoYWwxLCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsMSwgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWgxLCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDEpOwogICAgdmFyIHcxID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MSA+Pj4gMjYpOwogICAgdzEgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDIgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsMiwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDIsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoMiwgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmgyKTsKICAgIHZhciB3MiA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzIgPj4+IDI2KTsKICAgIHcyICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAzICovCiAgICBsbyA9IE1hdGguaW11bChhbDMsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWwzLCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDMsIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoMSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwxLCBibDIpOwogICAgbWlkICs9IE1hdGguaW11bChhbDEsIGJoMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMSwgYmwyKTsKICAgIGhpICs9IE1hdGguaW11bChhaDEsIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoMyk7CiAgICB2YXIgdzMgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHczID4+PiAyNik7CiAgICB3MyAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gNCAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw0LCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsNCwgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWg0LCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDEpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmwyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsMik7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMSwgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwxLCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgxLCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDQpOwogICAgdmFyIHc0ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3NCA+Pj4gMjYpOwogICAgdzQgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDUgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsNSwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDUsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoNSwgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmg1KTsKICAgIHZhciB3NSA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzUgPj4+IDI2KTsKICAgIHc1ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSA2ICovCiAgICBsbyA9IE1hdGguaW11bChhbDYsIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw2LCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDYsIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoMSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw0LCBibDIpOwogICAgbWlkICs9IE1hdGguaW11bChhbDQsIGJoMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNCwgYmwyKTsKICAgIGhpICs9IE1hdGguaW11bChhaDQsIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoNCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwxLCBibDUpOwogICAgbWlkICs9IE1hdGguaW11bChhbDEsIGJoNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMSwgYmw1KTsKICAgIGhpICs9IE1hdGguaW11bChhaDEsIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoNik7CiAgICB2YXIgdzYgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHc2ID4+PiAyNik7CiAgICB3NiAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gNyAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw3LCBibDApOwogICAgbWlkID0gTWF0aC5pbXVsKGFsNywgYmgwKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDApOwogICAgaGkgPSBNYXRoLmltdWwoYWg3LCBiaDApOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmwxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDEpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsMSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDEpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmwyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDIpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsMik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNCwgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw0LCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg0LCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDQpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmw1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsNSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMSwgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwxLCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDEsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWgxLCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMCwgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwwLCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDAsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgwLCBiaDcpOwogICAgdmFyIHc3ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3NyA+Pj4gMjYpOwogICAgdzcgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDggKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOCwgYmwwKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDgsIGJoMCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmwwKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOCwgYmgwKTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmgxKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDEpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDAsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMCwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgwLCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMCwgYmg4KTsKICAgIHZhciB3OCA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzggPj4+IDI2KTsKICAgIHc4ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSA5ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMCk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDApOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsMCk7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDEpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmwxKTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoMSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw3LCBibDIpOwogICAgbWlkICs9IE1hdGguaW11bChhbDcsIGJoMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNywgYmwyKTsKICAgIGhpICs9IE1hdGguaW11bChhaDcsIGJoMik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDMpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmwzKTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoNCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw0LCBibDUpOwogICAgbWlkICs9IE1hdGguaW11bChhbDQsIGJoNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNCwgYmw1KTsKICAgIGhpICs9IE1hdGguaW11bChhaDQsIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWwyLCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDIsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMiwgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDIsIGJoNyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwxLCBibDgpOwogICAgbWlkICs9IE1hdGguaW11bChhbDEsIGJoOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMSwgYmw4KTsKICAgIGhpICs9IE1hdGguaW11bChhaDEsIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwwLCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDAsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMCwgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDAsIGJoOSk7CiAgICB2YXIgdzkgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHc5ID4+PiAyNik7CiAgICB3OSAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTAgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmwxKTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoMSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmwxKTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmgxKTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsMik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDIpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmgyKTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsMyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmgzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDMpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmgzKTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmg0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDQpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDMsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMywgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgzLCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMywgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDIsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMiwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgyLCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMiwgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDEsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsMSwgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWgxLCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoMSwgYmg5KTsKICAgIHZhciB3MTAgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxMCA+Pj4gMjYpOwogICAgdzEwICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxMSAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDIpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmgyKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDIpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDIpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmwzKTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsMyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDMpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNywgYmw0KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw3LCBiaDQpOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsNCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg3LCBiaDQpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmw1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDUpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsNSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNCwgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw0LCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDQsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg0LCBiaDcpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMywgYmw4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwzLCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDMsIGJsOCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgzLCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsMiwgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWwyLCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDIsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWgyLCBiaDkpOwogICAgdmFyIHcxMSA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzExID4+PiAyNik7CiAgICB3MTEgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDEyICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsMyk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDMpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsMyk7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoMyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDQpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmw0KTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoNCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw3LCBibDUpOwogICAgbWlkICs9IE1hdGguaW11bChhbDcsIGJoNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNywgYmw1KTsKICAgIGhpICs9IE1hdGguaW11bChhaDcsIGJoNSk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDYpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmw2KTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw1LCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDUsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNSwgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDUsIGJoNyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw0LCBibDgpOwogICAgbWlkICs9IE1hdGguaW11bChhbDQsIGJoOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNCwgYmw4KTsKICAgIGhpICs9IE1hdGguaW11bChhaDQsIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWwzLCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDMsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoMywgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDMsIGJoOSk7CiAgICB2YXIgdzEyID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTIgPj4+IDI2KTsKICAgIHcxMiAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTMgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw0KTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmw0KTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg0KTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsNSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDUpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmg1KTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsNik7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmg2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDYpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmg2KTsKICAgIGxvICs9IE1hdGguaW11bChhbDYsIGJsNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNiwgYmg3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg2LCBibDcpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNiwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDUsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNSwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg1LCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNSwgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDQsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNCwgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg0LCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNCwgYmg5KTsKICAgIHZhciB3MTMgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxMyA+Pj4gMjYpOwogICAgdzEzICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxNCAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDUpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg1KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDUpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDUpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmw2KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsNik7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDYpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNywgYmw3KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw3LCBiaDcpOwogICAgbWlkICs9IE1hdGguaW11bChhaDcsIGJsNyk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg3LCBiaDcpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNiwgYmw4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw2LCBiaDgpOwogICAgbWlkICs9IE1hdGguaW11bChhaDYsIGJsOCk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg2LCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsNSwgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw1LCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDUsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg1LCBiaDkpOwogICAgdmFyIHcxNCA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzE0ID4+PiAyNik7CiAgICB3MTQgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDE1ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsNik7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDYpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsNik7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoNik7CiAgICBsbyArPSBNYXRoLmltdWwoYWw4LCBibDcpOwogICAgbWlkICs9IE1hdGguaW11bChhbDgsIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOCwgYmw3KTsKICAgIGhpICs9IE1hdGguaW11bChhaDgsIGJoNyk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw3LCBibDgpOwogICAgbWlkICs9IE1hdGguaW11bChhbDcsIGJoOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNywgYmw4KTsKICAgIGhpICs9IE1hdGguaW11bChhaDcsIGJoOCk7CiAgICBsbyArPSBNYXRoLmltdWwoYWw2LCBibDkpOwogICAgbWlkICs9IE1hdGguaW11bChhbDYsIGJoOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoNiwgYmw5KTsKICAgIGhpICs9IE1hdGguaW11bChhaDYsIGJoOSk7CiAgICB2YXIgdzE1ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTUgPj4+IDI2KTsKICAgIHcxNSAmPSAweDNmZmZmZmY7CiAgICAvKiBrID0gMTYgKi8KICAgIGxvID0gTWF0aC5pbXVsKGFsOSwgYmw3KTsKICAgIG1pZCA9IE1hdGguaW11bChhbDksIGJoNyk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFoOSwgYmw3KTsKICAgIGhpID0gTWF0aC5pbXVsKGFoOSwgYmg3KTsKICAgIGxvICs9IE1hdGguaW11bChhbDgsIGJsOCk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsOCwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg4LCBibDgpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoOCwgYmg4KTsKICAgIGxvICs9IE1hdGguaW11bChhbDcsIGJsOSk7CiAgICBtaWQgKz0gTWF0aC5pbXVsKGFsNywgYmg5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg3LCBibDkpOwogICAgaGkgKz0gTWF0aC5pbXVsKGFoNywgYmg5KTsKICAgIHZhciB3MTYgPSBjICsgbG8gKyAoKG1pZCAmIDB4MWZmZikgPDwgMTMpOwogICAgYyA9IGhpICsgKG1pZCA+Pj4gMTMpICsgKHcxNiA+Pj4gMjYpOwogICAgdzE2ICY9IDB4M2ZmZmZmZjsKICAgIC8qIGsgPSAxNyAqLwogICAgbG8gPSBNYXRoLmltdWwoYWw5LCBibDgpOwogICAgbWlkID0gTWF0aC5pbXVsKGFsOSwgYmg4KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWg5LCBibDgpOwogICAgaGkgPSBNYXRoLmltdWwoYWg5LCBiaDgpOwogICAgbG8gKz0gTWF0aC5pbXVsKGFsOCwgYmw5KTsKICAgIG1pZCArPSBNYXRoLmltdWwoYWw4LCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDgsIGJsOSk7CiAgICBoaSArPSBNYXRoLmltdWwoYWg4LCBiaDkpOwogICAgdmFyIHcxNyA9IGMgKyBsbyArICgobWlkICYgMHgxZmZmKSA8PCAxMyk7CiAgICBjID0gaGkgKyAobWlkID4+PiAxMykgKyAodzE3ID4+PiAyNik7CiAgICB3MTcgJj0gMHgzZmZmZmZmOwogICAgLyogayA9IDE4ICovCiAgICBsbyA9IE1hdGguaW11bChhbDksIGJsOSk7CiAgICBtaWQgPSBNYXRoLmltdWwoYWw5LCBiaDkpOwogICAgbWlkICs9IE1hdGguaW11bChhaDksIGJsOSk7CiAgICBoaSA9IE1hdGguaW11bChhaDksIGJoOSk7CiAgICB2YXIgdzE4ID0gYyArIGxvICsgKChtaWQgJiAweDFmZmYpIDw8IDEzKTsKICAgIGMgPSBoaSArIChtaWQgPj4+IDEzKSArICh3MTggPj4+IDI2KTsKICAgIHcxOCAmPSAweDNmZmZmZmY7CiAgICBvWzBdID0gdzA7CiAgICBvWzFdID0gdzE7CiAgICBvWzJdID0gdzI7CiAgICBvWzNdID0gdzM7CiAgICBvWzRdID0gdzQ7CiAgICBvWzVdID0gdzU7CiAgICBvWzZdID0gdzY7CiAgICBvWzddID0gdzc7CiAgICBvWzhdID0gdzg7CiAgICBvWzldID0gdzk7CiAgICBvWzEwXSA9IHcxMDsKICAgIG9bMTFdID0gdzExOwogICAgb1sxMl0gPSB3MTI7CiAgICBvWzEzXSA9IHcxMzsKICAgIG9bMTRdID0gdzE0OwogICAgb1sxNV0gPSB3MTU7CiAgICBvWzE2XSA9IHcxNjsKICAgIG9bMTddID0gdzE3OwogICAgb1sxOF0gPSB3MTg7CiAgICBpZiAoYyAhPT0gMCkgewogICAgICBvWzE5XSA9IGM7CiAgICAgIG91dC5sZW5ndGgrKzsKICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfTsKCiAgLy8gUG9seWZpbGwgY29tYgogIGlmICghTWF0aC5pbXVsKSB7CiAgICBjb21iMTBNdWxUbyA9IHNtYWxsTXVsVG87CiAgfQoKICBmdW5jdGlvbiBiaWdNdWxUbyAoc2VsZiwgbnVtLCBvdXQpIHsKICAgIG91dC5uZWdhdGl2ZSA9IG51bS5uZWdhdGl2ZSBeIHNlbGYubmVnYXRpdmU7CiAgICBvdXQubGVuZ3RoID0gc2VsZi5sZW5ndGggKyBudW0ubGVuZ3RoOwoKICAgIHZhciBjYXJyeSA9IDA7CiAgICB2YXIgaG5jYXJyeSA9IDA7CiAgICBmb3IgKHZhciBrID0gMDsgayA8IG91dC5sZW5ndGggLSAxOyBrKyspIHsKICAgICAgLy8gU3VtIGFsbCB3b3JkcyB3aXRoIHRoZSBzYW1lIGBpICsgaiA9IGtgIGFuZCBhY2N1bXVsYXRlIGBuY2FycnlgLAogICAgICAvLyBub3RlIHRoYXQgbmNhcnJ5IGNvdWxkIGJlID49IDB4M2ZmZmZmZgogICAgICB2YXIgbmNhcnJ5ID0gaG5jYXJyeTsKICAgICAgaG5jYXJyeSA9IDA7CiAgICAgIHZhciByd29yZCA9IGNhcnJ5ICYgMHgzZmZmZmZmOwogICAgICB2YXIgbWF4SiA9IE1hdGgubWluKGssIG51bS5sZW5ndGggLSAxKTsKICAgICAgZm9yICh2YXIgaiA9IE1hdGgubWF4KDAsIGsgLSBzZWxmLmxlbmd0aCArIDEpOyBqIDw9IG1heEo7IGorKykgewogICAgICAgIHZhciBpID0gayAtIGo7CiAgICAgICAgdmFyIGEgPSBzZWxmLndvcmRzW2ldIHwgMDsKICAgICAgICB2YXIgYiA9IG51bS53b3Jkc1tqXSB8IDA7CiAgICAgICAgdmFyIHIgPSBhICogYjsKCiAgICAgICAgdmFyIGxvID0gciAmIDB4M2ZmZmZmZjsKICAgICAgICBuY2FycnkgPSAobmNhcnJ5ICsgKChyIC8gMHg0MDAwMDAwKSB8IDApKSB8IDA7CiAgICAgICAgbG8gPSAobG8gKyByd29yZCkgfCAwOwogICAgICAgIHJ3b3JkID0gbG8gJiAweDNmZmZmZmY7CiAgICAgICAgbmNhcnJ5ID0gKG5jYXJyeSArIChsbyA+Pj4gMjYpKSB8IDA7CgogICAgICAgIGhuY2FycnkgKz0gbmNhcnJ5ID4+PiAyNjsKICAgICAgICBuY2FycnkgJj0gMHgzZmZmZmZmOwogICAgICB9CiAgICAgIG91dC53b3Jkc1trXSA9IHJ3b3JkOwogICAgICBjYXJyeSA9IG5jYXJyeTsKICAgICAgbmNhcnJ5ID0gaG5jYXJyeTsKICAgIH0KICAgIGlmIChjYXJyeSAhPT0gMCkgewogICAgICBvdXQud29yZHNba10gPSBjYXJyeTsKICAgIH0gZWxzZSB7CiAgICAgIG91dC5sZW5ndGgtLTsKICAgIH0KCiAgICByZXR1cm4gb3V0LnN0cmlwKCk7CiAgfQoKICBmdW5jdGlvbiBqdW1ib011bFRvIChzZWxmLCBudW0sIG91dCkgewogICAgdmFyIGZmdG0gPSBuZXcgRkZUTSgpOwogICAgcmV0dXJuIGZmdG0ubXVscChzZWxmLCBudW0sIG91dCk7CiAgfQoKICBCTi5wcm90b3R5cGUubXVsVG8gPSBmdW5jdGlvbiBtdWxUbyAobnVtLCBvdXQpIHsKICAgIHZhciByZXM7CiAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGggKyBudW0ubGVuZ3RoOwogICAgaWYgKHRoaXMubGVuZ3RoID09PSAxMCAmJiBudW0ubGVuZ3RoID09PSAxMCkgewogICAgICByZXMgPSBjb21iMTBNdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgICB9IGVsc2UgaWYgKGxlbiA8IDYzKSB7CiAgICAgIHJlcyA9IHNtYWxsTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfSBlbHNlIGlmIChsZW4gPCAxMDI0KSB7CiAgICAgIHJlcyA9IGJpZ011bFRvKHRoaXMsIG51bSwgb3V0KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcyA9IGp1bWJvTXVsVG8odGhpcywgbnVtLCBvdXQpOwogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgLy8gQ29vbGV5LVR1a2V5IGFsZ29yaXRobSBmb3IgRkZUCiAgLy8gc2xpZ2h0bHkgcmV2aXNpdGVkIHRvIHJlbHkgb24gbG9vcGluZyBpbnN0ZWFkIG9mIHJlY3Vyc2lvbgoKICBmdW5jdGlvbiBGRlRNICh4LCB5KSB7CiAgICB0aGlzLnggPSB4OwogICAgdGhpcy55ID0geTsKICB9CgogIEZGVE0ucHJvdG90eXBlLm1ha2VSQlQgPSBmdW5jdGlvbiBtYWtlUkJUIChOKSB7CiAgICB2YXIgdCA9IG5ldyBBcnJheShOKTsKICAgIHZhciBsID0gQk4ucHJvdG90eXBlLl9jb3VudEJpdHMoTikgLSAxOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgdFtpXSA9IHRoaXMucmV2QmluKGksIGwsIE4pOwogICAgfQoKICAgIHJldHVybiB0OwogIH07CgogIC8vIFJldHVybnMgYmluYXJ5LXJldmVyc2VkIHJlcHJlc2VudGF0aW9uIG9mIGB4YAogIEZGVE0ucHJvdG90eXBlLnJldkJpbiA9IGZ1bmN0aW9uIHJldkJpbiAoeCwgbCwgTikgewogICAgaWYgKHggPT09IDAgfHwgeCA9PT0gTiAtIDEpIHJldHVybiB4OwoKICAgIHZhciByYiA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICByYiB8PSAoeCAmIDEpIDw8IChsIC0gaSAtIDEpOwogICAgICB4ID4+PSAxOwogICAgfQoKICAgIHJldHVybiByYjsKICB9OwoKICAvLyBQZXJmb3JtcyAidHdlZWRsaW5nIiBwaGFzZSwgdGhlcmVmb3JlICdlbXVsYXRpbmcnCiAgLy8gYmVoYXZpb3VyIG9mIHRoZSByZWN1cnNpdmUgYWxnb3JpdGhtCiAgRkZUTS5wcm90b3R5cGUucGVybXV0ZSA9IGZ1bmN0aW9uIHBlcm11dGUgKHJidCwgcndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4pIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgIHJ0d3NbaV0gPSByd3NbcmJ0W2ldXTsKICAgICAgaXR3c1tpXSA9IGl3c1tyYnRbaV1dOwogICAgfQogIH07CgogIEZGVE0ucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uIHRyYW5zZm9ybSAocndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4sIHJidCkgewogICAgdGhpcy5wZXJtdXRlKHJidCwgcndzLCBpd3MsIHJ0d3MsIGl0d3MsIE4pOwoKICAgIGZvciAodmFyIHMgPSAxOyBzIDwgTjsgcyA8PD0gMSkgewogICAgICB2YXIgbCA9IHMgPDwgMTsKCiAgICAgIHZhciBydHdkZiA9IE1hdGguY29zKDIgKiBNYXRoLlBJIC8gbCk7CiAgICAgIHZhciBpdHdkZiA9IE1hdGguc2luKDIgKiBNYXRoLlBJIC8gbCk7CgogICAgICBmb3IgKHZhciBwID0gMDsgcCA8IE47IHAgKz0gbCkgewogICAgICAgIHZhciBydHdkZl8gPSBydHdkZjsKICAgICAgICB2YXIgaXR3ZGZfID0gaXR3ZGY7CgogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgczsgaisrKSB7CiAgICAgICAgICB2YXIgcmUgPSBydHdzW3AgKyBqXTsKICAgICAgICAgIHZhciBpZSA9IGl0d3NbcCArIGpdOwoKICAgICAgICAgIHZhciBybyA9IHJ0d3NbcCArIGogKyBzXTsKICAgICAgICAgIHZhciBpbyA9IGl0d3NbcCArIGogKyBzXTsKCiAgICAgICAgICB2YXIgcnggPSBydHdkZl8gKiBybyAtIGl0d2RmXyAqIGlvOwoKICAgICAgICAgIGlvID0gcnR3ZGZfICogaW8gKyBpdHdkZl8gKiBybzsKICAgICAgICAgIHJvID0gcng7CgogICAgICAgICAgcnR3c1twICsgal0gPSByZSArIHJvOwogICAgICAgICAgaXR3c1twICsgal0gPSBpZSArIGlvOwoKICAgICAgICAgIHJ0d3NbcCArIGogKyBzXSA9IHJlIC0gcm87CiAgICAgICAgICBpdHdzW3AgKyBqICsgc10gPSBpZSAtIGlvOwoKICAgICAgICAgIC8qIGpzaGludCBtYXhkZXB0aCA6IGZhbHNlICovCiAgICAgICAgICBpZiAoaiAhPT0gbCkgewogICAgICAgICAgICByeCA9IHJ0d2RmICogcnR3ZGZfIC0gaXR3ZGYgKiBpdHdkZl87CgogICAgICAgICAgICBpdHdkZl8gPSBydHdkZiAqIGl0d2RmXyArIGl0d2RmICogcnR3ZGZfOwogICAgICAgICAgICBydHdkZl8gPSByeDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICBGRlRNLnByb3RvdHlwZS5ndWVzc0xlbjEzYiA9IGZ1bmN0aW9uIGd1ZXNzTGVuMTNiIChuLCBtKSB7CiAgICB2YXIgTiA9IE1hdGgubWF4KG0sIG4pIHwgMTsKICAgIHZhciBvZGQgPSBOICYgMTsKICAgIHZhciBpID0gMDsKICAgIGZvciAoTiA9IE4gLyAyIHwgMDsgTjsgTiA9IE4gPj4+IDEpIHsKICAgICAgaSsrOwogICAgfQoKICAgIHJldHVybiAxIDw8IGkgKyAxICsgb2RkOwogIH07CgogIEZGVE0ucHJvdG90eXBlLmNvbmp1Z2F0ZSA9IGZ1bmN0aW9uIGNvbmp1Z2F0ZSAocndzLCBpd3MsIE4pIHsKICAgIGlmIChOIDw9IDEpIHJldHVybjsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE4gLyAyOyBpKyspIHsKICAgICAgdmFyIHQgPSByd3NbaV07CgogICAgICByd3NbaV0gPSByd3NbTiAtIGkgLSAxXTsKICAgICAgcndzW04gLSBpIC0gMV0gPSB0OwoKICAgICAgdCA9IGl3c1tpXTsKCiAgICAgIGl3c1tpXSA9IC1pd3NbTiAtIGkgLSAxXTsKICAgICAgaXdzW04gLSBpIC0gMV0gPSAtdDsKICAgIH0KICB9OwoKICBGRlRNLnByb3RvdHlwZS5ub3JtYWxpemUxM2IgPSBmdW5jdGlvbiBub3JtYWxpemUxM2IgKHdzLCBOKSB7CiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOIC8gMjsgaSsrKSB7CiAgICAgIHZhciB3ID0gTWF0aC5yb3VuZCh3c1syICogaSArIDFdIC8gTikgKiAweDIwMDAgKwogICAgICAgIE1hdGgucm91bmQod3NbMiAqIGldIC8gTikgKwogICAgICAgIGNhcnJ5OwoKICAgICAgd3NbaV0gPSB3ICYgMHgzZmZmZmZmOwoKICAgICAgaWYgKHcgPCAweDQwMDAwMDApIHsKICAgICAgICBjYXJyeSA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FycnkgPSB3IC8gMHg0MDAwMDAwIHwgMDsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB3czsKICB9OwoKICBGRlRNLnByb3RvdHlwZS5jb252ZXJ0MTNiID0gZnVuY3Rpb24gY29udmVydDEzYiAod3MsIGxlbiwgcndzLCBOKSB7CiAgICB2YXIgY2FycnkgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICBjYXJyeSA9IGNhcnJ5ICsgKHdzW2ldIHwgMCk7CgogICAgICByd3NbMiAqIGldID0gY2FycnkgJiAweDFmZmY7IGNhcnJ5ID0gY2FycnkgPj4+IDEzOwogICAgICByd3NbMiAqIGkgKyAxXSA9IGNhcnJ5ICYgMHgxZmZmOyBjYXJyeSA9IGNhcnJ5ID4+PiAxMzsKICAgIH0KCiAgICAvLyBQYWQgd2l0aCB6ZXJvZXMKICAgIGZvciAoaSA9IDIgKiBsZW47IGkgPCBOOyArK2kpIHsKICAgICAgcndzW2ldID0gMDsKICAgIH0KCiAgICBhc3NlcnQoY2FycnkgPT09IDApOwogICAgYXNzZXJ0KChjYXJyeSAmIH4weDFmZmYpID09PSAwKTsKICB9OwoKICBGRlRNLnByb3RvdHlwZS5zdHViID0gZnVuY3Rpb24gc3R1YiAoTikgewogICAgdmFyIHBoID0gbmV3IEFycmF5KE4pOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgcGhbaV0gPSAwOwogICAgfQoKICAgIHJldHVybiBwaDsKICB9OwoKICBGRlRNLnByb3RvdHlwZS5tdWxwID0gZnVuY3Rpb24gbXVscCAoeCwgeSwgb3V0KSB7CiAgICB2YXIgTiA9IDIgKiB0aGlzLmd1ZXNzTGVuMTNiKHgubGVuZ3RoLCB5Lmxlbmd0aCk7CgogICAgdmFyIHJidCA9IHRoaXMubWFrZVJCVChOKTsKCiAgICB2YXIgXyA9IHRoaXMuc3R1YihOKTsKCiAgICB2YXIgcndzID0gbmV3IEFycmF5KE4pOwogICAgdmFyIHJ3c3QgPSBuZXcgQXJyYXkoTik7CiAgICB2YXIgaXdzdCA9IG5ldyBBcnJheShOKTsKCiAgICB2YXIgbnJ3cyA9IG5ldyBBcnJheShOKTsKICAgIHZhciBucndzdCA9IG5ldyBBcnJheShOKTsKICAgIHZhciBuaXdzdCA9IG5ldyBBcnJheShOKTsKCiAgICB2YXIgcm13cyA9IG91dC53b3JkczsKICAgIHJtd3MubGVuZ3RoID0gTjsKCiAgICB0aGlzLmNvbnZlcnQxM2IoeC53b3JkcywgeC5sZW5ndGgsIHJ3cywgTik7CiAgICB0aGlzLmNvbnZlcnQxM2IoeS53b3JkcywgeS5sZW5ndGgsIG5yd3MsIE4pOwoKICAgIHRoaXMudHJhbnNmb3JtKHJ3cywgXywgcndzdCwgaXdzdCwgTiwgcmJ0KTsKICAgIHRoaXMudHJhbnNmb3JtKG5yd3MsIF8sIG5yd3N0LCBuaXdzdCwgTiwgcmJ0KTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IE47IGkrKykgewogICAgICB2YXIgcnggPSByd3N0W2ldICogbnJ3c3RbaV0gLSBpd3N0W2ldICogbml3c3RbaV07CiAgICAgIGl3c3RbaV0gPSByd3N0W2ldICogbml3c3RbaV0gKyBpd3N0W2ldICogbnJ3c3RbaV07CiAgICAgIHJ3c3RbaV0gPSByeDsKICAgIH0KCiAgICB0aGlzLmNvbmp1Z2F0ZShyd3N0LCBpd3N0LCBOKTsKICAgIHRoaXMudHJhbnNmb3JtKHJ3c3QsIGl3c3QsIHJtd3MsIF8sIE4sIHJidCk7CiAgICB0aGlzLmNvbmp1Z2F0ZShybXdzLCBfLCBOKTsKICAgIHRoaXMubm9ybWFsaXplMTNiKHJtd3MsIE4pOwoKICAgIG91dC5uZWdhdGl2ZSA9IHgubmVnYXRpdmUgXiB5Lm5lZ2F0aXZlOwogICAgb3V0Lmxlbmd0aCA9IHgubGVuZ3RoICsgeS5sZW5ndGg7CiAgICByZXR1cm4gb3V0LnN0cmlwKCk7CiAgfTsKCiAgLy8gTXVsdGlwbHkgYHRoaXNgIGJ5IGBudW1gCiAgQk4ucHJvdG90eXBlLm11bCA9IGZ1bmN0aW9uIG11bCAobnVtKSB7CiAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgb3V0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aCk7CiAgICByZXR1cm4gdGhpcy5tdWxUbyhudW0sIG91dCk7CiAgfTsKCiAgLy8gTXVsdGlwbHkgZW1wbG95aW5nIEZGVAogIEJOLnByb3RvdHlwZS5tdWxmID0gZnVuY3Rpb24gbXVsZiAobnVtKSB7CiAgICB2YXIgb3V0ID0gbmV3IEJOKG51bGwpOwogICAgb3V0LndvcmRzID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoICsgbnVtLmxlbmd0aCk7CiAgICByZXR1cm4ganVtYm9NdWxUbyh0aGlzLCBudW0sIG91dCk7CiAgfTsKCiAgLy8gSW4tcGxhY2UgTXVsdGlwbGljYXRpb24KICBCTi5wcm90b3R5cGUuaW11bCA9IGZ1bmN0aW9uIGltdWwgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5tdWxUbyhudW0sIHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS5pbXVsbiA9IGZ1bmN0aW9uIGltdWxuIChudW0pIHsKICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKCiAgICAvLyBDYXJyeQogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgdyA9ICh0aGlzLndvcmRzW2ldIHwgMCkgKiBudW07CiAgICAgIHZhciBsbyA9ICh3ICYgMHgzZmZmZmZmKSArIChjYXJyeSAmIDB4M2ZmZmZmZik7CiAgICAgIGNhcnJ5ID4+PSAyNjsKICAgICAgY2FycnkgKz0gKHcgLyAweDQwMDAwMDApIHwgMDsKICAgICAgLy8gTk9URTogbG8gaXMgMjdiaXQgbWF4aW11bQogICAgICBjYXJyeSArPSBsbyA+Pj4gMjY7CiAgICAgIHRoaXMud29yZHNbaV0gPSBsbyAmIDB4M2ZmZmZmZjsKICAgIH0KCiAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICB0aGlzLmxlbmd0aCsrOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH07CgogIEJOLnByb3RvdHlwZS5tdWxuID0gZnVuY3Rpb24gbXVsbiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmltdWxuKG51bSk7CiAgfTsKCiAgLy8gYHRoaXNgICogYHRoaXNgCiAgQk4ucHJvdG90eXBlLnNxciA9IGZ1bmN0aW9uIHNxciAoKSB7CiAgICByZXR1cm4gdGhpcy5tdWwodGhpcyk7CiAgfTsKCiAgLy8gYHRoaXNgICogYHRoaXNgIGluLXBsYWNlCiAgQk4ucHJvdG90eXBlLmlzcXIgPSBmdW5jdGlvbiBpc3FyICgpIHsKICAgIHJldHVybiB0aGlzLmltdWwodGhpcy5jbG9uZSgpKTsKICB9OwoKICAvLyBNYXRoLnBvdyhgdGhpc2AsIGBudW1gKQogIEJOLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiBwb3cgKG51bSkgewogICAgdmFyIHcgPSB0b0JpdEFycmF5KG51bSk7CiAgICBpZiAody5sZW5ndGggPT09IDApIHJldHVybiBuZXcgQk4oMSk7CgogICAgLy8gU2tpcCBsZWFkaW5nIHplcm9lcwogICAgdmFyIHJlcyA9IHRoaXM7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHcubGVuZ3RoOyBpKyssIHJlcyA9IHJlcy5zcXIoKSkgewogICAgICBpZiAod1tpXSAhPT0gMCkgYnJlYWs7CiAgICB9CgogICAgaWYgKCsraSA8IHcubGVuZ3RoKSB7CiAgICAgIGZvciAodmFyIHEgPSByZXMuc3FyKCk7IGkgPCB3Lmxlbmd0aDsgaSsrLCBxID0gcS5zcXIoKSkgewogICAgICAgIGlmICh3W2ldID09PSAwKSBjb250aW51ZTsKCiAgICAgICAgcmVzID0gcmVzLm11bChxKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiByZXM7CiAgfTsKCiAgLy8gU2hpZnQtbGVmdCBpbi1wbGFjZQogIEJOLnByb3RvdHlwZS5pdXNobG4gPSBmdW5jdGlvbiBpdXNobG4gKGJpdHMpIHsKICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgIHZhciByID0gYml0cyAlIDI2OwogICAgdmFyIHMgPSAoYml0cyAtIHIpIC8gMjY7CiAgICB2YXIgY2FycnlNYXNrID0gKDB4M2ZmZmZmZiA+Pj4gKDI2IC0gcikpIDw8ICgyNiAtIHIpOwogICAgdmFyIGk7CgogICAgaWYgKHIgIT09IDApIHsKICAgICAgdmFyIGNhcnJ5ID0gMDsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIG5ld0NhcnJ5ID0gdGhpcy53b3Jkc1tpXSAmIGNhcnJ5TWFzazsKICAgICAgICB2YXIgYyA9ICgodGhpcy53b3Jkc1tpXSB8IDApIC0gbmV3Q2FycnkpIDw8IHI7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGMgfCBjYXJyeTsKICAgICAgICBjYXJyeSA9IG5ld0NhcnJ5ID4+PiAoMjYgLSByKTsKICAgICAgfQoKICAgICAgaWYgKGNhcnJ5KSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IGNhcnJ5OwogICAgICAgIHRoaXMubGVuZ3RoKys7CiAgICAgIH0KICAgIH0KCiAgICBpZiAocyAhPT0gMCkgewogICAgICBmb3IgKGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpICsgc10gPSB0aGlzLndvcmRzW2ldOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgczsgaSsrKSB7CiAgICAgICAgdGhpcy53b3Jkc1tpXSA9IDA7CiAgICAgIH0KCiAgICAgIHRoaXMubGVuZ3RoICs9IHM7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNobG4gPSBmdW5jdGlvbiBpc2hsbiAoYml0cykgewogICAgLy8gVE9ETyhpbmR1dG55KTogaW1wbGVtZW50IG1lCiAgICBhc3NlcnQodGhpcy5uZWdhdGl2ZSA9PT0gMCk7CiAgICByZXR1cm4gdGhpcy5pdXNobG4oYml0cyk7CiAgfTsKCiAgLy8gU2hpZnQtcmlnaHQgaW4tcGxhY2UKICAvLyBOT1RFOiBgaGludGAgaXMgYSBsb3dlc3QgYml0IGJlZm9yZSB0cmFpbGluZyB6ZXJvZXMKICAvLyBOT1RFOiBpZiBgZXh0ZW5kZWRgIGlzIHByZXNlbnQgLSBpdCB3aWxsIGJlIGZpbGxlZCB3aXRoIGRlc3Ryb3llZCBiaXRzCiAgQk4ucHJvdG90eXBlLml1c2hybiA9IGZ1bmN0aW9uIGl1c2hybiAoYml0cywgaGludCwgZXh0ZW5kZWQpIHsKICAgIGFzc2VydCh0eXBlb2YgYml0cyA9PT0gJ251bWJlcicgJiYgYml0cyA+PSAwKTsKICAgIHZhciBoOwogICAgaWYgKGhpbnQpIHsKICAgICAgaCA9IChoaW50IC0gKGhpbnQgJSAyNikpIC8gMjY7CiAgICB9IGVsc2UgewogICAgICBoID0gMDsKICAgIH0KCiAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgIHZhciBzID0gTWF0aC5taW4oKGJpdHMgLSByKSAvIDI2LCB0aGlzLmxlbmd0aCk7CiAgICB2YXIgbWFzayA9IDB4M2ZmZmZmZiBeICgoMHgzZmZmZmZmID4+PiByKSA8PCByKTsKICAgIHZhciBtYXNrZWRXb3JkcyA9IGV4dGVuZGVkOwoKICAgIGggLT0gczsKICAgIGggPSBNYXRoLm1heCgwLCBoKTsKCiAgICAvLyBFeHRlbmRlZCBtb2RlLCBjb3B5IG1hc2tlZCBwYXJ0CiAgICBpZiAobWFza2VkV29yZHMpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICBtYXNrZWRXb3Jkcy53b3Jkc1tpXSA9IHRoaXMud29yZHNbaV07CiAgICAgIH0KICAgICAgbWFza2VkV29yZHMubGVuZ3RoID0gczsKICAgIH0KCiAgICBpZiAocyA9PT0gMCkgewogICAgICAvLyBOby1vcCwgd2Ugc2hvdWxkIG5vdCBtb3ZlIGFueXRoaW5nIGF0IGFsbAogICAgfSBlbHNlIGlmICh0aGlzLmxlbmd0aCA+IHMpIHsKICAgICAgdGhpcy5sZW5ndGggLT0gczsKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gdGhpcy53b3Jkc1tpICsgc107CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMud29yZHNbMF0gPSAwOwogICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICB9CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAoaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwICYmIChjYXJyeSAhPT0gMCB8fCBpID49IGgpOyBpLS0pIHsKICAgICAgdmFyIHdvcmQgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgdGhpcy53b3Jkc1tpXSA9IChjYXJyeSA8PCAoMjYgLSByKSkgfCAod29yZCA+Pj4gcik7CiAgICAgIGNhcnJ5ID0gd29yZCAmIG1hc2s7CiAgICB9CgogICAgLy8gUHVzaCBjYXJyaWVkIGJpdHMgYXMgYSBtYXNrCiAgICBpZiAobWFza2VkV29yZHMgJiYgY2FycnkgIT09IDApIHsKICAgICAgbWFza2VkV29yZHMud29yZHNbbWFza2VkV29yZHMubGVuZ3RoKytdID0gY2Fycnk7CiAgICB9CgogICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7CiAgICAgIHRoaXMud29yZHNbMF0gPSAwOwogICAgICB0aGlzLmxlbmd0aCA9IDE7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNocm4gPSBmdW5jdGlvbiBpc2hybiAoYml0cywgaGludCwgZXh0ZW5kZWQpIHsKICAgIC8vIFRPRE8oaW5kdXRueSk6IGltcGxlbWVudCBtZQogICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDApOwogICAgcmV0dXJuIHRoaXMuaXVzaHJuKGJpdHMsIGhpbnQsIGV4dGVuZGVkKTsKICB9OwoKICAvLyBTaGlmdC1sZWZ0CiAgQk4ucHJvdG90eXBlLnNobG4gPSBmdW5jdGlvbiBzaGxuIChiaXRzKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzaGxuKGJpdHMpOwogIH07CgogIEJOLnByb3RvdHlwZS51c2hsbiA9IGZ1bmN0aW9uIHVzaGxuIChiaXRzKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLml1c2hsbihiaXRzKTsKICB9OwoKICAvLyBTaGlmdC1yaWdodAogIEJOLnByb3RvdHlwZS5zaHJuID0gZnVuY3Rpb24gc2hybiAoYml0cykgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pc2hybihiaXRzKTsKICB9OwoKICBCTi5wcm90b3R5cGUudXNocm4gPSBmdW5jdGlvbiB1c2hybiAoYml0cykgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pdXNocm4oYml0cyk7CiAgfTsKCiAgLy8gVGVzdCBpZiBuIGJpdCBpcyBzZXQKICBCTi5wcm90b3R5cGUudGVzdG4gPSBmdW5jdGlvbiB0ZXN0biAoYml0KSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdCA9PT0gJ251bWJlcicgJiYgYml0ID49IDApOwogICAgdmFyIHIgPSBiaXQgJSAyNjsKICAgIHZhciBzID0gKGJpdCAtIHIpIC8gMjY7CiAgICB2YXIgcSA9IDEgPDwgcjsKCiAgICAvLyBGYXN0IGNhc2U6IGJpdCBpcyBtdWNoIGhpZ2hlciB0aGFuIGFsbCBleGlzdGluZyB3b3JkcwogICAgaWYgKHRoaXMubGVuZ3RoIDw9IHMpIHJldHVybiBmYWxzZTsKCiAgICAvLyBDaGVjayBiaXQgYW5kIHJldHVybgogICAgdmFyIHcgPSB0aGlzLndvcmRzW3NdOwoKICAgIHJldHVybiAhISh3ICYgcSk7CiAgfTsKCiAgLy8gUmV0dXJuIG9ubHkgbG93ZXJzIGJpdHMgb2YgbnVtYmVyIChpbi1wbGFjZSkKICBCTi5wcm90b3R5cGUuaW1hc2tuID0gZnVuY3Rpb24gaW1hc2tuIChiaXRzKSB7CiAgICBhc3NlcnQodHlwZW9mIGJpdHMgPT09ICdudW1iZXInICYmIGJpdHMgPj0gMCk7CiAgICB2YXIgciA9IGJpdHMgJSAyNjsKICAgIHZhciBzID0gKGJpdHMgLSByKSAvIDI2OwoKICAgIGFzc2VydCh0aGlzLm5lZ2F0aXZlID09PSAwLCAnaW1hc2tuIHdvcmtzIG9ubHkgd2l0aCBwb3NpdGl2ZSBudW1iZXJzJyk7CgogICAgaWYgKHIgIT09IDApIHsKICAgICAgcysrOwogICAgfQogICAgdGhpcy5sZW5ndGggPSBNYXRoLm1pbihzLCB0aGlzLmxlbmd0aCk7CgogICAgaWYgKHIgIT09IDApIHsKICAgICAgdmFyIG1hc2sgPSAweDNmZmZmZmYgXiAoKDB4M2ZmZmZmZiA+Pj4gcikgPDwgcik7CiAgICAgIHRoaXMud29yZHNbdGhpcy5sZW5ndGggLSAxXSAmPSBtYXNrOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgLy8gUmV0dXJuIG9ubHkgbG93ZXJzIGJpdHMgb2YgbnVtYmVyCiAgQk4ucHJvdG90eXBlLm1hc2tuID0gZnVuY3Rpb24gbWFza24gKGJpdHMpIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaW1hc2tuKGJpdHMpOwogIH07CgogIC8vIEFkZCBwbGFpbiBudW1iZXIgYG51bWAgdG8gYHRoaXNgCiAgQk4ucHJvdG90eXBlLmlhZGRuID0gZnVuY3Rpb24gaWFkZG4gKG51bSkgewogICAgYXNzZXJ0KHR5cGVvZiBudW0gPT09ICdudW1iZXInKTsKICAgIGFzc2VydChudW0gPCAweDQwMDAwMDApOwogICAgaWYgKG51bSA8IDApIHJldHVybiB0aGlzLmlzdWJuKC1udW0pOwoKICAgIC8vIFBvc3NpYmxlIHNpZ24gY2hhbmdlCiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBpZiAodGhpcy5sZW5ndGggPT09IDEgJiYgKHRoaXMud29yZHNbMF0gfCAwKSA8IG51bSkgewogICAgICAgIHRoaXMud29yZHNbMF0gPSBudW0gLSAodGhpcy53b3Jkc1swXSB8IDApOwogICAgICAgIHRoaXMubmVnYXRpdmUgPSAwOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy5pc3VibihudW0pOwogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLy8gQWRkIHdpdGhvdXQgY2hlY2tzCiAgICByZXR1cm4gdGhpcy5faWFkZG4obnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX2lhZGRuID0gZnVuY3Rpb24gX2lhZGRuIChudW0pIHsKICAgIHRoaXMud29yZHNbMF0gKz0gbnVtOwoKICAgIC8vIENhcnJ5CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoICYmIHRoaXMud29yZHNbaV0gPj0gMHg0MDAwMDAwOyBpKyspIHsKICAgICAgdGhpcy53b3Jkc1tpXSAtPSAweDQwMDAwMDA7CiAgICAgIGlmIChpID09PSB0aGlzLmxlbmd0aCAtIDEpIHsKICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy53b3Jkc1tpICsgMV0rKzsKICAgICAgfQogICAgfQogICAgdGhpcy5sZW5ndGggPSBNYXRoLm1heCh0aGlzLmxlbmd0aCwgaSArIDEpOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIC8vIFN1YnRyYWN0IHBsYWluIG51bWJlciBgbnVtYCBmcm9tIGB0aGlzYAogIEJOLnByb3RvdHlwZS5pc3VibiA9IGZ1bmN0aW9uIGlzdWJuIChudW0pIHsKICAgIGFzc2VydCh0eXBlb2YgbnVtID09PSAnbnVtYmVyJyk7CiAgICBhc3NlcnQobnVtIDwgMHg0MDAwMDAwKTsKICAgIGlmIChudW0gPCAwKSByZXR1cm4gdGhpcy5pYWRkbigtbnVtKTsKCiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCkgewogICAgICB0aGlzLm5lZ2F0aXZlID0gMDsKICAgICAgdGhpcy5pYWRkbihudW0pOwogICAgICB0aGlzLm5lZ2F0aXZlID0gMTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgdGhpcy53b3Jkc1swXSAtPSBudW07CgogICAgaWYgKHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPCAwKSB7CiAgICAgIHRoaXMud29yZHNbMF0gPSAtdGhpcy53b3Jkc1swXTsKICAgICAgdGhpcy5uZWdhdGl2ZSA9IDE7CiAgICB9IGVsc2UgewogICAgICAvLyBDYXJyeQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoICYmIHRoaXMud29yZHNbaV0gPCAwOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldICs9IDB4NDAwMDAwMDsKICAgICAgICB0aGlzLndvcmRzW2kgKyAxXSAtPSAxOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRoaXMuc3RyaXAoKTsKICB9OwoKICBCTi5wcm90b3R5cGUuYWRkbiA9IGZ1bmN0aW9uIGFkZG4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWRkbihudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5zdWJuID0gZnVuY3Rpb24gc3VibiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmlzdWJuKG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmlhYnMgPSBmdW5jdGlvbiBpYWJzICgpIHsKICAgIHRoaXMubmVnYXRpdmUgPSAwOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIEJOLnByb3RvdHlwZS5hYnMgPSBmdW5jdGlvbiBhYnMgKCkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5pYWJzKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLl9pc2hsbnN1Ym11bCA9IGZ1bmN0aW9uIF9pc2hsbnN1Ym11bCAobnVtLCBtdWwsIHNoaWZ0KSB7CiAgICAvLyBCaWdnZXIgc3RvcmFnZSBpcyBuZWVkZWQKICAgIHZhciBsZW4gPSBudW0ubGVuZ3RoICsgc2hpZnQ7CiAgICB2YXIgaTsKICAgIGlmICh0aGlzLndvcmRzLmxlbmd0aCA8IGxlbikgewogICAgICB2YXIgdCA9IG5ldyBBcnJheShsZW4pOwogICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRbaV0gPSB0aGlzLndvcmRzW2ldOwogICAgICB9CiAgICAgIHRoaXMud29yZHMgPSB0OwogICAgfSBlbHNlIHsKICAgICAgaSA9IHRoaXMubGVuZ3RoOwogICAgfQoKICAgIC8vIFplcm9pZnkgcmVzdAogICAgdGhpcy5sZW5ndGggPSBNYXRoLm1heCh0aGlzLmxlbmd0aCwgbGVuKTsKICAgIGZvciAoOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLndvcmRzW2ldID0gMDsKICAgIH0KCiAgICB2YXIgdzsKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKGkgPSAwOyBpIDwgbnVtLmxlbmd0aDsgaSsrKSB7CiAgICAgIHcgPSAodGhpcy53b3Jkc1tpICsgc2hpZnRdIHwgMCkgKyBjYXJyeTsKICAgICAgdmFyIHJpZ2h0ID0gKG51bS53b3Jkc1tpXSB8IDApICogbXVsOwogICAgICB3IC09IHJpZ2h0ICYgMHgzZmZmZmZmOwogICAgICBjYXJyeSA9ICh3ID4+IDI2KSAtICgocmlnaHQgLyAweDQwMDAwMDApIHwgMCk7CiAgICAgIHRoaXMud29yZHNbaSArIHNoaWZ0XSA9IHcgJiAweDNmZmZmZmY7CiAgICB9CiAgICBmb3IgKDsgaSA8IHRoaXMubGVuZ3RoIC0gc2hpZnQ7IGkrKykgewogICAgICB3ID0gKHRoaXMud29yZHNbaSArIHNoaWZ0XSB8IDApICsgY2Fycnk7CiAgICAgIGNhcnJ5ID0gdyA+PiAyNjsKICAgICAgdGhpcy53b3Jkc1tpICsgc2hpZnRdID0gdyAmIDB4M2ZmZmZmZjsKICAgIH0KCiAgICBpZiAoY2FycnkgPT09IDApIHJldHVybiB0aGlzLnN0cmlwKCk7CgogICAgLy8gU3VidHJhY3Rpb24gb3ZlcmZsb3cKICAgIGFzc2VydChjYXJyeSA9PT0gLTEpOwogICAgY2FycnkgPSAwOwogICAgZm9yIChpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgdyA9IC0odGhpcy53b3Jkc1tpXSB8IDApICsgY2Fycnk7CiAgICAgIGNhcnJ5ID0gdyA+PiAyNjsKICAgICAgdGhpcy53b3Jkc1tpXSA9IHcgJiAweDNmZmZmZmY7CiAgICB9CiAgICB0aGlzLm5lZ2F0aXZlID0gMTsKCiAgICByZXR1cm4gdGhpcy5zdHJpcCgpOwogIH07CgogIEJOLnByb3RvdHlwZS5fd29yZERpdiA9IGZ1bmN0aW9uIF93b3JkRGl2IChudW0sIG1vZGUpIHsKICAgIHZhciBzaGlmdCA9IHRoaXMubGVuZ3RoIC0gbnVtLmxlbmd0aDsKCiAgICB2YXIgYSA9IHRoaXMuY2xvbmUoKTsKICAgIHZhciBiID0gbnVtOwoKICAgIC8vIE5vcm1hbGl6ZQogICAgdmFyIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICB2YXIgYmhpQml0cyA9IHRoaXMuX2NvdW50Qml0cyhiaGkpOwogICAgc2hpZnQgPSAyNiAtIGJoaUJpdHM7CiAgICBpZiAoc2hpZnQgIT09IDApIHsKICAgICAgYiA9IGIudXNobG4oc2hpZnQpOwogICAgICBhLml1c2hsbihzaGlmdCk7CiAgICAgIGJoaSA9IGIud29yZHNbYi5sZW5ndGggLSAxXSB8IDA7CiAgICB9CgogICAgLy8gSW5pdGlhbGl6ZSBxdW90aWVudAogICAgdmFyIG0gPSBhLmxlbmd0aCAtIGIubGVuZ3RoOwogICAgdmFyIHE7CgogICAgaWYgKG1vZGUgIT09ICdtb2QnKSB7CiAgICAgIHEgPSBuZXcgQk4obnVsbCk7CiAgICAgIHEubGVuZ3RoID0gbSArIDE7CiAgICAgIHEud29yZHMgPSBuZXcgQXJyYXkocS5sZW5ndGgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHEubGVuZ3RoOyBpKyspIHsKICAgICAgICBxLndvcmRzW2ldID0gMDsKICAgICAgfQogICAgfQoKICAgIHZhciBkaWZmID0gYS5jbG9uZSgpLl9pc2hsbnN1Ym11bChiLCAxLCBtKTsKICAgIGlmIChkaWZmLm5lZ2F0aXZlID09PSAwKSB7CiAgICAgIGEgPSBkaWZmOwogICAgICBpZiAocSkgewogICAgICAgIHEud29yZHNbbV0gPSAxOwogICAgICB9CiAgICB9CgogICAgZm9yICh2YXIgaiA9IG0gLSAxOyBqID49IDA7IGotLSkgewogICAgICB2YXIgcWogPSAoYS53b3Jkc1tiLmxlbmd0aCArIGpdIHwgMCkgKiAweDQwMDAwMDAgKwogICAgICAgIChhLndvcmRzW2IubGVuZ3RoICsgaiAtIDFdIHwgMCk7CgogICAgICAvLyBOT1RFOiAocWogLyBiaGkpIGlzICgweDNmZmZmZmYgKiAweDQwMDAwMDAgKyAweDNmZmZmZmYpIC8gMHgyMDAwMDAwIG1heAogICAgICAvLyAoMHg3ZmZmZmZmKQogICAgICBxaiA9IE1hdGgubWluKChxaiAvIGJoaSkgfCAwLCAweDNmZmZmZmYpOwoKICAgICAgYS5faXNobG5zdWJtdWwoYiwgcWosIGopOwogICAgICB3aGlsZSAoYS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgIHFqLS07CiAgICAgICAgYS5uZWdhdGl2ZSA9IDA7CiAgICAgICAgYS5faXNobG5zdWJtdWwoYiwgMSwgaik7CiAgICAgICAgaWYgKCFhLmlzWmVybygpKSB7CiAgICAgICAgICBhLm5lZ2F0aXZlIF49IDE7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChxKSB7CiAgICAgICAgcS53b3Jkc1tqXSA9IHFqOwogICAgICB9CiAgICB9CiAgICBpZiAocSkgewogICAgICBxLnN0cmlwKCk7CiAgICB9CiAgICBhLnN0cmlwKCk7CgogICAgLy8gRGVub3JtYWxpemUKICAgIGlmIChtb2RlICE9PSAnZGl2JyAmJiBzaGlmdCAhPT0gMCkgewogICAgICBhLml1c2hybihzaGlmdCk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgZGl2OiBxIHx8IG51bGwsCiAgICAgIG1vZDogYQogICAgfTsKICB9OwoKICAvLyBOT1RFOiAxKSBgbW9kZWAgY2FuIGJlIHNldCB0byBgbW9kYCB0byByZXF1ZXN0IG1vZCBvbmx5LAogIC8vICAgICAgIHRvIGBkaXZgIHRvIHJlcXVlc3QgZGl2IG9ubHksIG9yIGJlIGFic2VudCB0bwogIC8vICAgICAgIHJlcXVlc3QgYm90aCBkaXYgJiBtb2QKICAvLyAgICAgICAyKSBgcG9zaXRpdmVgIGlzIHRydWUgaWYgdW5zaWduZWQgbW9kIGlzIHJlcXVlc3RlZAogIEJOLnByb3RvdHlwZS5kaXZtb2QgPSBmdW5jdGlvbiBkaXZtb2QgKG51bSwgbW9kZSwgcG9zaXRpdmUpIHsKICAgIGFzc2VydCghbnVtLmlzWmVybygpKTsKCiAgICBpZiAodGhpcy5pc1plcm8oKSkgewogICAgICByZXR1cm4gewogICAgICAgIGRpdjogbmV3IEJOKDApLAogICAgICAgIG1vZDogbmV3IEJOKDApCiAgICAgIH07CiAgICB9CgogICAgdmFyIGRpdiwgbW9kLCByZXM7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSAhPT0gMCAmJiBudW0ubmVnYXRpdmUgPT09IDApIHsKICAgICAgcmVzID0gdGhpcy5uZWcoKS5kaXZtb2QobnVtLCBtb2RlKTsKCiAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgIGRpdiA9IHJlcy5kaXYubmVnKCk7CiAgICAgIH0KCiAgICAgIGlmIChtb2RlICE9PSAnZGl2JykgewogICAgICAgIG1vZCA9IHJlcy5tb2QubmVnKCk7CiAgICAgICAgaWYgKHBvc2l0aXZlICYmIG1vZC5uZWdhdGl2ZSAhPT0gMCkgewogICAgICAgICAgbW9kLmlhZGQobnVtKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBkaXYsCiAgICAgICAgbW9kOiBtb2QKICAgICAgfTsKICAgIH0KCiAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHsKICAgICAgcmVzID0gdGhpcy5kaXZtb2QobnVtLm5lZygpLCBtb2RlKTsKCiAgICAgIGlmIChtb2RlICE9PSAnbW9kJykgewogICAgICAgIGRpdiA9IHJlcy5kaXYubmVnKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZGl2OiBkaXYsCiAgICAgICAgbW9kOiByZXMubW9kCiAgICAgIH07CiAgICB9CgogICAgaWYgKCh0aGlzLm5lZ2F0aXZlICYgbnVtLm5lZ2F0aXZlKSAhPT0gMCkgewogICAgICByZXMgPSB0aGlzLm5lZygpLmRpdm1vZChudW0ubmVnKCksIG1vZGUpOwoKICAgICAgaWYgKG1vZGUgIT09ICdkaXYnKSB7CiAgICAgICAgbW9kID0gcmVzLm1vZC5uZWcoKTsKICAgICAgICBpZiAocG9zaXRpdmUgJiYgbW9kLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgICAgICBtb2QuaXN1YihudW0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IHJlcy5kaXYsCiAgICAgICAgbW9kOiBtb2QKICAgICAgfTsKICAgIH0KCiAgICAvLyBCb3RoIG51bWJlcnMgYXJlIHBvc2l0aXZlIGF0IHRoaXMgcG9pbnQKCiAgICAvLyBTdHJpcCBib3RoIG51bWJlcnMgdG8gYXBwcm94aW1hdGUgc2hpZnQgdmFsdWUKICAgIGlmIChudW0ubGVuZ3RoID4gdGhpcy5sZW5ndGggfHwgdGhpcy5jbXAobnVtKSA8IDApIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IG5ldyBCTigwKSwKICAgICAgICBtb2Q6IHRoaXMKICAgICAgfTsKICAgIH0KCiAgICAvLyBWZXJ5IHNob3J0IHJlZHVjdGlvbgogICAgaWYgKG51bS5sZW5ndGggPT09IDEpIHsKICAgICAgaWYgKG1vZGUgPT09ICdkaXYnKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGRpdjogdGhpcy5kaXZuKG51bS53b3Jkc1swXSksCiAgICAgICAgICBtb2Q6IG51bGwKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAobW9kZSA9PT0gJ21vZCcpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZGl2OiBudWxsLAogICAgICAgICAgbW9kOiBuZXcgQk4odGhpcy5tb2RuKG51bS53b3Jkc1swXSkpCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBkaXY6IHRoaXMuZGl2bihudW0ud29yZHNbMF0pLAogICAgICAgIG1vZDogbmV3IEJOKHRoaXMubW9kbihudW0ud29yZHNbMF0pKQogICAgICB9OwogICAgfQoKICAgIHJldHVybiB0aGlzLl93b3JkRGl2KG51bSwgbW9kZSk7CiAgfTsKCiAgLy8gRmluZCBgdGhpc2AgLyBgbnVtYAogIEJOLnByb3RvdHlwZS5kaXYgPSBmdW5jdGlvbiBkaXYgKG51bSkgewogICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ2RpdicsIGZhbHNlKS5kaXY7CiAgfTsKCiAgLy8gRmluZCBgdGhpc2AgJSBgbnVtYAogIEJOLnByb3RvdHlwZS5tb2QgPSBmdW5jdGlvbiBtb2QgKG51bSkgewogICAgcmV0dXJuIHRoaXMuZGl2bW9kKG51bSwgJ21vZCcsIGZhbHNlKS5tb2Q7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnVtb2QgPSBmdW5jdGlvbiB1bW9kIChudW0pIHsKICAgIHJldHVybiB0aGlzLmRpdm1vZChudW0sICdtb2QnLCB0cnVlKS5tb2Q7CiAgfTsKCiAgLy8gRmluZCBSb3VuZChgdGhpc2AgLyBgbnVtYCkKICBCTi5wcm90b3R5cGUuZGl2Um91bmQgPSBmdW5jdGlvbiBkaXZSb3VuZCAobnVtKSB7CiAgICB2YXIgZG0gPSB0aGlzLmRpdm1vZChudW0pOwoKICAgIC8vIEZhc3QgY2FzZSAtIGV4YWN0IGRpdmlzaW9uCiAgICBpZiAoZG0ubW9kLmlzWmVybygpKSByZXR1cm4gZG0uZGl2OwoKICAgIHZhciBtb2QgPSBkbS5kaXYubmVnYXRpdmUgIT09IDAgPyBkbS5tb2QuaXN1YihudW0pIDogZG0ubW9kOwoKICAgIHZhciBoYWxmID0gbnVtLnVzaHJuKDEpOwogICAgdmFyIHIyID0gbnVtLmFuZGxuKDEpOwogICAgdmFyIGNtcCA9IG1vZC5jbXAoaGFsZik7CgogICAgLy8gUm91bmQgZG93bgogICAgaWYgKGNtcCA8IDAgfHwgcjIgPT09IDEgJiYgY21wID09PSAwKSByZXR1cm4gZG0uZGl2OwoKICAgIC8vIFJvdW5kIHVwCiAgICByZXR1cm4gZG0uZGl2Lm5lZ2F0aXZlICE9PSAwID8gZG0uZGl2LmlzdWJuKDEpIDogZG0uZGl2LmlhZGRuKDEpOwogIH07CgogIEJOLnByb3RvdHlwZS5tb2RuID0gZnVuY3Rpb24gbW9kbiAobnVtKSB7CiAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZik7CiAgICB2YXIgcCA9ICgxIDw8IDI2KSAlIG51bTsKCiAgICB2YXIgYWNjID0gMDsKICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIGFjYyA9IChwICogYWNjICsgKHRoaXMud29yZHNbaV0gfCAwKSkgJSBudW07CiAgICB9CgogICAgcmV0dXJuIGFjYzsKICB9OwoKICAvLyBJbi1wbGFjZSBkaXZpc2lvbiBieSBudW1iZXIKICBCTi5wcm90b3R5cGUuaWRpdm4gPSBmdW5jdGlvbiBpZGl2biAobnVtKSB7CiAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZik7CgogICAgdmFyIGNhcnJ5ID0gMDsKICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHZhciB3ID0gKHRoaXMud29yZHNbaV0gfCAwKSArIGNhcnJ5ICogMHg0MDAwMDAwOwogICAgICB0aGlzLndvcmRzW2ldID0gKHcgLyBudW0pIHwgMDsKICAgICAgY2FycnkgPSB3ICUgbnVtOwogICAgfQoKICAgIHJldHVybiB0aGlzLnN0cmlwKCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmRpdm4gPSBmdW5jdGlvbiBkaXZuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNsb25lKCkuaWRpdm4obnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUuZWdjZCA9IGZ1bmN0aW9uIGVnY2QgKHApIHsKICAgIGFzc2VydChwLm5lZ2F0aXZlID09PSAwKTsKICAgIGFzc2VydCghcC5pc1plcm8oKSk7CgogICAgdmFyIHggPSB0aGlzOwogICAgdmFyIHkgPSBwLmNsb25lKCk7CgogICAgaWYgKHgubmVnYXRpdmUgIT09IDApIHsKICAgICAgeCA9IHgudW1vZChwKTsKICAgIH0gZWxzZSB7CiAgICAgIHggPSB4LmNsb25lKCk7CiAgICB9CgogICAgLy8gQSAqIHggKyBCICogeSA9IHgKICAgIHZhciBBID0gbmV3IEJOKDEpOwogICAgdmFyIEIgPSBuZXcgQk4oMCk7CgogICAgLy8gQyAqIHggKyBEICogeSA9IHkKICAgIHZhciBDID0gbmV3IEJOKDApOwogICAgdmFyIEQgPSBuZXcgQk4oMSk7CgogICAgdmFyIGcgPSAwOwoKICAgIHdoaWxlICh4LmlzRXZlbigpICYmIHkuaXNFdmVuKCkpIHsKICAgICAgeC5pdXNocm4oMSk7CiAgICAgIHkuaXVzaHJuKDEpOwogICAgICArK2c7CiAgICB9CgogICAgdmFyIHlwID0geS5jbG9uZSgpOwogICAgdmFyIHhwID0geC5jbG9uZSgpOwoKICAgIHdoaWxlICgheC5pc1plcm8oKSkgewogICAgICBmb3IgKHZhciBpID0gMCwgaW0gPSAxOyAoeC53b3Jkc1swXSAmIGltKSA9PT0gMCAmJiBpIDwgMjY7ICsraSwgaW0gPDw9IDEpOwogICAgICBpZiAoaSA+IDApIHsKICAgICAgICB4Lml1c2hybihpKTsKICAgICAgICB3aGlsZSAoaS0tID4gMCkgewogICAgICAgICAgaWYgKEEuaXNPZGQoKSB8fCBCLmlzT2RkKCkpIHsKICAgICAgICAgICAgQS5pYWRkKHlwKTsKICAgICAgICAgICAgQi5pc3ViKHhwKTsKICAgICAgICAgIH0KCiAgICAgICAgICBBLml1c2hybigxKTsKICAgICAgICAgIEIuaXVzaHJuKDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yICh2YXIgaiA9IDAsIGptID0gMTsgKHkud29yZHNbMF0gJiBqbSkgPT09IDAgJiYgaiA8IDI2OyArK2osIGptIDw8PSAxKTsKICAgICAgaWYgKGogPiAwKSB7CiAgICAgICAgeS5pdXNocm4oaik7CiAgICAgICAgd2hpbGUgKGotLSA+IDApIHsKICAgICAgICAgIGlmIChDLmlzT2RkKCkgfHwgRC5pc09kZCgpKSB7CiAgICAgICAgICAgIEMuaWFkZCh5cCk7CiAgICAgICAgICAgIEQuaXN1Yih4cCk7CiAgICAgICAgICB9CgogICAgICAgICAgQy5pdXNocm4oMSk7CiAgICAgICAgICBELml1c2hybigxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh4LmNtcCh5KSA+PSAwKSB7CiAgICAgICAgeC5pc3ViKHkpOwogICAgICAgIEEuaXN1YihDKTsKICAgICAgICBCLmlzdWIoRCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgeS5pc3ViKHgpOwogICAgICAgIEMuaXN1YihBKTsKICAgICAgICBELmlzdWIoQik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICBhOiBDLAogICAgICBiOiBELAogICAgICBnY2Q6IHkuaXVzaGxuKGcpCiAgICB9OwogIH07CgogIC8vIFRoaXMgaXMgcmVkdWNlZCBpbmNhcm5hdGlvbiBvZiB0aGUgYmluYXJ5IEVFQQogIC8vIGFib3ZlLCBkZXNpZ25hdGVkIHRvIGludmVydCBtZW1iZXJzIG9mIHRoZQogIC8vIF9wcmltZV8gZmllbGRzIEYocCkgYXQgYSBtYXhpbWFsIHNwZWVkCiAgQk4ucHJvdG90eXBlLl9pbnZtcCA9IGZ1bmN0aW9uIF9pbnZtcCAocCkgewogICAgYXNzZXJ0KHAubmVnYXRpdmUgPT09IDApOwogICAgYXNzZXJ0KCFwLmlzWmVybygpKTsKCiAgICB2YXIgYSA9IHRoaXM7CiAgICB2YXIgYiA9IHAuY2xvbmUoKTsKCiAgICBpZiAoYS5uZWdhdGl2ZSAhPT0gMCkgewogICAgICBhID0gYS51bW9kKHApOwogICAgfSBlbHNlIHsKICAgICAgYSA9IGEuY2xvbmUoKTsKICAgIH0KCiAgICB2YXIgeDEgPSBuZXcgQk4oMSk7CiAgICB2YXIgeDIgPSBuZXcgQk4oMCk7CgogICAgdmFyIGRlbHRhID0gYi5jbG9uZSgpOwoKICAgIHdoaWxlIChhLmNtcG4oMSkgPiAwICYmIGIuY21wbigxKSA+IDApIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGltID0gMTsgKGEud29yZHNbMF0gJiBpbSkgPT09IDAgJiYgaSA8IDI2OyArK2ksIGltIDw8PSAxKTsKICAgICAgaWYgKGkgPiAwKSB7CiAgICAgICAgYS5pdXNocm4oaSk7CiAgICAgICAgd2hpbGUgKGktLSA+IDApIHsKICAgICAgICAgIGlmICh4MS5pc09kZCgpKSB7CiAgICAgICAgICAgIHgxLmlhZGQoZGVsdGEpOwogICAgICAgICAgfQoKICAgICAgICAgIHgxLml1c2hybigxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGogPSAwLCBqbSA9IDE7IChiLndvcmRzWzBdICYgam0pID09PSAwICYmIGogPCAyNjsgKytqLCBqbSA8PD0gMSk7CiAgICAgIGlmIChqID4gMCkgewogICAgICAgIGIuaXVzaHJuKGopOwogICAgICAgIHdoaWxlIChqLS0gPiAwKSB7CiAgICAgICAgICBpZiAoeDIuaXNPZGQoKSkgewogICAgICAgICAgICB4Mi5pYWRkKGRlbHRhKTsKICAgICAgICAgIH0KCiAgICAgICAgICB4Mi5pdXNocm4oMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoYS5jbXAoYikgPj0gMCkgewogICAgICAgIGEuaXN1YihiKTsKICAgICAgICB4MS5pc3ViKHgyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBiLmlzdWIoYSk7CiAgICAgICAgeDIuaXN1Yih4MSk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgcmVzOwogICAgaWYgKGEuY21wbigxKSA9PT0gMCkgewogICAgICByZXMgPSB4MTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcyA9IHgyOwogICAgfQoKICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgcmVzLmlhZGQocCk7CiAgICB9CgogICAgcmV0dXJuIHJlczsKICB9OwoKICBCTi5wcm90b3R5cGUuZ2NkID0gZnVuY3Rpb24gZ2NkIChudW0pIHsKICAgIGlmICh0aGlzLmlzWmVybygpKSByZXR1cm4gbnVtLmFicygpOwogICAgaWYgKG51bS5pc1plcm8oKSkgcmV0dXJuIHRoaXMuYWJzKCk7CgogICAgdmFyIGEgPSB0aGlzLmNsb25lKCk7CiAgICB2YXIgYiA9IG51bS5jbG9uZSgpOwogICAgYS5uZWdhdGl2ZSA9IDA7CiAgICBiLm5lZ2F0aXZlID0gMDsKCiAgICAvLyBSZW1vdmUgY29tbW9uIGZhY3RvciBvZiB0d28KICAgIGZvciAodmFyIHNoaWZ0ID0gMDsgYS5pc0V2ZW4oKSAmJiBiLmlzRXZlbigpOyBzaGlmdCsrKSB7CiAgICAgIGEuaXVzaHJuKDEpOwogICAgICBiLml1c2hybigxKTsKICAgIH0KCiAgICBkbyB7CiAgICAgIHdoaWxlIChhLmlzRXZlbigpKSB7CiAgICAgICAgYS5pdXNocm4oMSk7CiAgICAgIH0KICAgICAgd2hpbGUgKGIuaXNFdmVuKCkpIHsKICAgICAgICBiLml1c2hybigxKTsKICAgICAgfQoKICAgICAgdmFyIHIgPSBhLmNtcChiKTsKICAgICAgaWYgKHIgPCAwKSB7CiAgICAgICAgLy8gU3dhcCBgYWAgYW5kIGBiYCB0byBtYWtlIGBhYCBhbHdheXMgYmlnZ2VyIHRoYW4gYGJgCiAgICAgICAgdmFyIHQgPSBhOwogICAgICAgIGEgPSBiOwogICAgICAgIGIgPSB0OwogICAgICB9IGVsc2UgaWYgKHIgPT09IDAgfHwgYi5jbXBuKDEpID09PSAwKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIGEuaXN1YihiKTsKICAgIH0gd2hpbGUgKHRydWUpOwoKICAgIHJldHVybiBiLml1c2hsbihzaGlmdCk7CiAgfTsKCiAgLy8gSW52ZXJ0IG51bWJlciBpbiB0aGUgZmllbGQgRihudW0pCiAgQk4ucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChudW0pIHsKICAgIHJldHVybiB0aGlzLmVnY2QobnVtKS5hLnVtb2QobnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUuaXNFdmVuID0gZnVuY3Rpb24gaXNFdmVuICgpIHsKICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5pc09kZCA9IGZ1bmN0aW9uIGlzT2RkICgpIHsKICAgIHJldHVybiAodGhpcy53b3Jkc1swXSAmIDEpID09PSAxOwogIH07CgogIC8vIEFuZCBmaXJzdCB3b3JkIGFuZCBudW0KICBCTi5wcm90b3R5cGUuYW5kbG4gPSBmdW5jdGlvbiBhbmRsbiAobnVtKSB7CiAgICByZXR1cm4gdGhpcy53b3Jkc1swXSAmIG51bTsKICB9OwoKICAvLyBJbmNyZW1lbnQgYXQgdGhlIGJpdCBwb3NpdGlvbiBpbi1saW5lCiAgQk4ucHJvdG90eXBlLmJpbmNuID0gZnVuY3Rpb24gYmluY24gKGJpdCkgewogICAgYXNzZXJ0KHR5cGVvZiBiaXQgPT09ICdudW1iZXInKTsKICAgIHZhciByID0gYml0ICUgMjY7CiAgICB2YXIgcyA9IChiaXQgLSByKSAvIDI2OwogICAgdmFyIHEgPSAxIDw8IHI7CgogICAgLy8gRmFzdCBjYXNlOiBiaXQgaXMgbXVjaCBoaWdoZXIgdGhhbiBhbGwgZXhpc3Rpbmcgd29yZHMKICAgIGlmICh0aGlzLmxlbmd0aCA8PSBzKSB7CiAgICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aDsgaSA8IHMgKyAxOyBpKyspIHsKICAgICAgICB0aGlzLndvcmRzW2ldID0gMDsKICAgICAgfQogICAgICB0aGlzLndvcmRzW3NdIHw9IHE7CiAgICAgIHRoaXMubGVuZ3RoID0gcyArIDE7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8vIEFkZCBiaXQgYW5kIHByb3BhZ2F0ZSwgaWYgbmVlZGVkCiAgICB2YXIgY2FycnkgPSBxOwogICAgZm9yIChpID0gczsgY2FycnkgIT09IDAgJiYgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHcgPSB0aGlzLndvcmRzW2ldIHwgMDsKICAgICAgdyArPSBjYXJyeTsKICAgICAgY2FycnkgPSB3ID4+PiAyNjsKICAgICAgdyAmPSAweDNmZmZmZmY7CiAgICAgIHRoaXMud29yZHNbaV0gPSB3OwogICAgfQogICAgaWYgKGNhcnJ5ICE9PSAwKSB7CiAgICAgIHRoaXMud29yZHNbaV0gPSBjYXJyeTsKICAgICAgdGhpcy5sZW5ndGgrKzsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH07CgogIEJOLnByb3RvdHlwZS5pc1plcm8gPSBmdW5jdGlvbiBpc1plcm8gKCkgewogICAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAxICYmIHRoaXMud29yZHNbMF0gPT09IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmNtcG4gPSBmdW5jdGlvbiBjbXBuIChudW0pIHsKICAgIHZhciBuZWdhdGl2ZSA9IG51bSA8IDA7CgogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgIW5lZ2F0aXZlKSByZXR1cm4gLTE7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBuZWdhdGl2ZSkgcmV0dXJuIDE7CgogICAgdGhpcy5zdHJpcCgpOwoKICAgIHZhciByZXM7CiAgICBpZiAodGhpcy5sZW5ndGggPiAxKSB7CiAgICAgIHJlcyA9IDE7CiAgICB9IGVsc2UgewogICAgICBpZiAobmVnYXRpdmUpIHsKICAgICAgICBudW0gPSAtbnVtOwogICAgICB9CgogICAgICBhc3NlcnQobnVtIDw9IDB4M2ZmZmZmZiwgJ051bWJlciBpcyB0b28gYmlnJyk7CgogICAgICB2YXIgdyA9IHRoaXMud29yZHNbMF0gfCAwOwogICAgICByZXMgPSB3ID09PSBudW0gPyAwIDogdyA8IG51bSA/IC0xIDogMTsKICAgIH0KICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSB7CiAgICAgIHJlcyA9IC1yZXM7CiAgICB9CiAgICByZXR1cm4gcmVzOwogIH07CgogIC8vIENvbXBhcmUgdHdvIG51bWJlcnMgYW5kIHJldHVybjoKICAvLyAxIC0gaWYgYHRoaXNgID4gYG51bWAKICAvLyAwIC0gaWYgYHRoaXNgID09IGBudW1gCiAgLy8gLTEgLSBpZiBgdGhpc2AgPCBgbnVtYAogIEJOLnByb3RvdHlwZS5jbXAgPSBmdW5jdGlvbiBjbXAgKG51bSkgewogICAgaWYgKHRoaXMubmVnYXRpdmUgIT09IDAgJiYgbnVtLm5lZ2F0aXZlID09PSAwKSByZXR1cm4gLTE7CiAgICBpZiAodGhpcy5uZWdhdGl2ZSA9PT0gMCAmJiBudW0ubmVnYXRpdmUgIT09IDApIHJldHVybiAxOwoKICAgIHZhciByZXMgPSB0aGlzLnVjbXAobnVtKTsKICAgIGlmICh0aGlzLm5lZ2F0aXZlICE9PSAwKSByZXR1cm4gLXJlczsKCiAgICByZXR1cm4gcmVzOwogIH07CgogIC8vIFVuc2lnbmVkIGNvbXBhcmlzb24KICBCTi5wcm90b3R5cGUudWNtcCA9IGZ1bmN0aW9uIHVjbXAgKG51bSkgewogICAgLy8gQXQgdGhpcyBwb2ludCBib3RoIG51bWJlcnMgaGF2ZSB0aGUgc2FtZSBzaWduCiAgICBpZiAodGhpcy5sZW5ndGggPiBudW0ubGVuZ3RoKSByZXR1cm4gMTsKICAgIGlmICh0aGlzLmxlbmd0aCA8IG51bS5sZW5ndGgpIHJldHVybiAtMTsKCiAgICB2YXIgcmVzID0gMDsKICAgIGZvciAodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHZhciBhID0gdGhpcy53b3Jkc1tpXSB8IDA7CiAgICAgIHZhciBiID0gbnVtLndvcmRzW2ldIHwgMDsKCiAgICAgIGlmIChhID09PSBiKSBjb250aW51ZTsKICAgICAgaWYgKGEgPCBiKSB7CiAgICAgICAgcmVzID0gLTE7CiAgICAgIH0gZWxzZSBpZiAoYSA+IGIpIHsKICAgICAgICByZXMgPSAxOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwoKICBCTi5wcm90b3R5cGUuZ3RuID0gZnVuY3Rpb24gZ3RuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gMTsKICB9OwoKICBCTi5wcm90b3R5cGUuZ3QgPSBmdW5jdGlvbiBndCAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gMTsKICB9OwoKICBCTi5wcm90b3R5cGUuZ3RlbiA9IGZ1bmN0aW9uIGd0ZW4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wbihudW0pID49IDA7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmd0ZSA9IGZ1bmN0aW9uIGd0ZSAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA+PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5sdG4gPSBmdW5jdGlvbiBsdG4gKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wbihudW0pID09PSAtMTsKICB9OwoKICBCTi5wcm90b3R5cGUubHQgPSBmdW5jdGlvbiBsdCAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gLTE7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmx0ZW4gPSBmdW5jdGlvbiBsdGVuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA8PSAwOwogIH07CgogIEJOLnByb3RvdHlwZS5sdGUgPSBmdW5jdGlvbiBsdGUgKG51bSkgewogICAgcmV0dXJuIHRoaXMuY21wKG51bSkgPD0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUuZXFuID0gZnVuY3Rpb24gZXFuIChudW0pIHsKICAgIHJldHVybiB0aGlzLmNtcG4obnVtKSA9PT0gMDsKICB9OwoKICBCTi5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcSAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5jbXAobnVtKSA9PT0gMDsKICB9OwoKICAvLwogIC8vIEEgcmVkdWNlIGNvbnRleHQsIGNvdWxkIGJlIHVzaW5nIG1vbnRnb21lcnkgb3Igc29tZXRoaW5nIGJldHRlciwgZGVwZW5kaW5nCiAgLy8gb24gdGhlIGBtYCBpdHNlbGYuCiAgLy8KICBCTi5yZWQgPSBmdW5jdGlvbiByZWQgKG51bSkgewogICAgcmV0dXJuIG5ldyBSZWQobnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUudG9SZWQgPSBmdW5jdGlvbiB0b1JlZCAoY3R4KSB7CiAgICBhc3NlcnQoIXRoaXMucmVkLCAnQWxyZWFkeSBhIG51bWJlciBpbiByZWR1Y3Rpb24gY29udGV4dCcpOwogICAgYXNzZXJ0KHRoaXMubmVnYXRpdmUgPT09IDAsICdyZWQgd29ya3Mgb25seSB3aXRoIHBvc2l0aXZlcycpOwogICAgcmV0dXJuIGN0eC5jb252ZXJ0VG8odGhpcykuX2ZvcmNlUmVkKGN0eCk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmZyb21SZWQgPSBmdW5jdGlvbiBmcm9tUmVkICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ2Zyb21SZWQgd29ya3Mgb25seSB3aXRoIG51bWJlcnMgaW4gcmVkdWN0aW9uIGNvbnRleHQnKTsKICAgIHJldHVybiB0aGlzLnJlZC5jb252ZXJ0RnJvbSh0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUuX2ZvcmNlUmVkID0gZnVuY3Rpb24gX2ZvcmNlUmVkIChjdHgpIHsKICAgIHRoaXMucmVkID0gY3R4OwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgQk4ucHJvdG90eXBlLmZvcmNlUmVkID0gZnVuY3Rpb24gZm9yY2VSZWQgKGN0eCkgewogICAgYXNzZXJ0KCF0aGlzLnJlZCwgJ0FscmVhZHkgYSBudW1iZXIgaW4gcmVkdWN0aW9uIGNvbnRleHQnKTsKICAgIHJldHVybiB0aGlzLl9mb3JjZVJlZChjdHgpOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRBZGQgPSBmdW5jdGlvbiByZWRBZGQgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkQWRkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgcmV0dXJuIHRoaXMucmVkLmFkZCh0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRJQWRkID0gZnVuY3Rpb24gcmVkSUFkZCAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRJQWRkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgcmV0dXJuIHRoaXMucmVkLmlhZGQodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkU3ViID0gZnVuY3Rpb24gcmVkU3ViIChudW0pIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZFN1YiB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHJldHVybiB0aGlzLnJlZC5zdWIodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkSVN1YiA9IGZ1bmN0aW9uIHJlZElTdWIgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSVN1YiB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHJldHVybiB0aGlzLnJlZC5pc3ViKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZFNobCA9IGZ1bmN0aW9uIHJlZFNobCAobnVtKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTaGwgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICByZXR1cm4gdGhpcy5yZWQudXNobCh0aGlzLCBudW0pOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRNdWwgPSBmdW5jdGlvbiByZWRNdWwgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkTXVsIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTIodGhpcywgbnVtKTsKICAgIHJldHVybiB0aGlzLnJlZC5tdWwodGhpcywgbnVtKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkSU11bCA9IGZ1bmN0aW9uIHJlZElNdWwgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkTXVsIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTIodGhpcywgbnVtKTsKICAgIHJldHVybiB0aGlzLnJlZC5pbXVsKHRoaXMsIG51bSk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZFNxciA9IGZ1bmN0aW9uIHJlZFNxciAoKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTcXIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgIHJldHVybiB0aGlzLnJlZC5zcXIodGhpcyk7CiAgfTsKCiAgQk4ucHJvdG90eXBlLnJlZElTcXIgPSBmdW5jdGlvbiByZWRJU3FyICgpIHsKICAgIGFzc2VydCh0aGlzLnJlZCwgJ3JlZElTcXIgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgICB0aGlzLnJlZC5fdmVyaWZ5MSh0aGlzKTsKICAgIHJldHVybiB0aGlzLnJlZC5pc3FyKHRoaXMpOwogIH07CgogIC8vIFNxdWFyZSByb290IG92ZXIgcAogIEJOLnByb3RvdHlwZS5yZWRTcXJ0ID0gZnVuY3Rpb24gcmVkU3FydCAoKSB7CiAgICBhc3NlcnQodGhpcy5yZWQsICdyZWRTcXJ0IHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICByZXR1cm4gdGhpcy5yZWQuc3FydCh0aGlzKTsKICB9OwoKICBCTi5wcm90b3R5cGUucmVkSW52bSA9IGZ1bmN0aW9uIHJlZEludm0gKCkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkSW52bSB3b3JrcyBvbmx5IHdpdGggcmVkIG51bWJlcnMnKTsKICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgcmV0dXJuIHRoaXMucmVkLmludm0odGhpcyk7CiAgfTsKCiAgLy8gUmV0dXJuIG5lZ2F0aXZlIGNsb25lIG9mIGB0aGlzYCAlIGByZWQgbW9kdWxvYAogIEJOLnByb3RvdHlwZS5yZWROZWcgPSBmdW5jdGlvbiByZWROZWcgKCkgewogICAgYXNzZXJ0KHRoaXMucmVkLCAncmVkTmVnIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogICAgdGhpcy5yZWQuX3ZlcmlmeTEodGhpcyk7CiAgICByZXR1cm4gdGhpcy5yZWQubmVnKHRoaXMpOwogIH07CgogIEJOLnByb3RvdHlwZS5yZWRQb3cgPSBmdW5jdGlvbiByZWRQb3cgKG51bSkgewogICAgYXNzZXJ0KHRoaXMucmVkICYmICFudW0ucmVkLCAncmVkUG93KG5vcm1hbE51bSknKTsKICAgIHRoaXMucmVkLl92ZXJpZnkxKHRoaXMpOwogICAgcmV0dXJuIHRoaXMucmVkLnBvdyh0aGlzLCBudW0pOwogIH07CgogIC8vIFByaW1lIG51bWJlcnMgd2l0aCBlZmZpY2llbnQgcmVkdWN0aW9uCiAgdmFyIHByaW1lcyA9IHsKICAgIGsyNTY6IG51bGwsCiAgICBwMjI0OiBudWxsLAogICAgcDE5MjogbnVsbCwKICAgIHAyNTUxOTogbnVsbAogIH07CgogIC8vIFBzZXVkby1NZXJzZW5uZSBwcmltZQogIGZ1bmN0aW9uIE1QcmltZSAobmFtZSwgcCkgewogICAgLy8gUCA9IDIgXiBOIC0gSwogICAgdGhpcy5uYW1lID0gbmFtZTsKICAgIHRoaXMucCA9IG5ldyBCTihwLCAxNik7CiAgICB0aGlzLm4gPSB0aGlzLnAuYml0TGVuZ3RoKCk7CiAgICB0aGlzLmsgPSBuZXcgQk4oMSkuaXVzaGxuKHRoaXMubikuaXN1Yih0aGlzLnApOwoKICAgIHRoaXMudG1wID0gdGhpcy5fdG1wKCk7CiAgfQoKICBNUHJpbWUucHJvdG90eXBlLl90bXAgPSBmdW5jdGlvbiBfdG1wICgpIHsKICAgIHZhciB0bXAgPSBuZXcgQk4obnVsbCk7CiAgICB0bXAud29yZHMgPSBuZXcgQXJyYXkoTWF0aC5jZWlsKHRoaXMubiAvIDEzKSk7CiAgICByZXR1cm4gdG1wOwogIH07CgogIE1QcmltZS5wcm90b3R5cGUuaXJlZHVjZSA9IGZ1bmN0aW9uIGlyZWR1Y2UgKG51bSkgewogICAgLy8gQXNzdW1lcyB0aGF0IGBudW1gIGlzIGxlc3MgdGhhbiBgUF4yYAogICAgLy8gbnVtID0gSEkgKiAoMiBeIE4gLSBLKSArIEhJICogSyArIExPID0gSEkgKiBLICsgTE8gKG1vZCBQKQogICAgdmFyIHIgPSBudW07CiAgICB2YXIgcmxlbjsKCiAgICBkbyB7CiAgICAgIHRoaXMuc3BsaXQociwgdGhpcy50bXApOwogICAgICByID0gdGhpcy5pbXVsSyhyKTsKICAgICAgciA9IHIuaWFkZCh0aGlzLnRtcCk7CiAgICAgIHJsZW4gPSByLmJpdExlbmd0aCgpOwogICAgfSB3aGlsZSAocmxlbiA+IHRoaXMubik7CgogICAgdmFyIGNtcCA9IHJsZW4gPCB0aGlzLm4gPyAtMSA6IHIudWNtcCh0aGlzLnApOwogICAgaWYgKGNtcCA9PT0gMCkgewogICAgICByLndvcmRzWzBdID0gMDsKICAgICAgci5sZW5ndGggPSAxOwogICAgfSBlbHNlIGlmIChjbXAgPiAwKSB7CiAgICAgIHIuaXN1Yih0aGlzLnApOwogICAgfSBlbHNlIHsKICAgICAgci5zdHJpcCgpOwogICAgfQoKICAgIHJldHVybiByOwogIH07CgogIE1QcmltZS5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiBzcGxpdCAoaW5wdXQsIG91dCkgewogICAgaW5wdXQuaXVzaHJuKHRoaXMubiwgMCwgb3V0KTsKICB9OwoKICBNUHJpbWUucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgcmV0dXJuIG51bS5pbXVsKHRoaXMuayk7CiAgfTsKCiAgZnVuY3Rpb24gSzI1NiAoKSB7CiAgICBNUHJpbWUuY2FsbCgKICAgICAgdGhpcywKICAgICAgJ2syNTYnLAogICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZjMmYnKTsKICB9CiAgaW5oZXJpdHMoSzI1NiwgTVByaW1lKTsKCiAgSzI1Ni5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiBzcGxpdCAoaW5wdXQsIG91dHB1dCkgewogICAgLy8gMjU2ID0gOSAqIDI2ICsgMjIKICAgIHZhciBtYXNrID0gMHgzZmZmZmY7CgogICAgdmFyIG91dExlbiA9IE1hdGgubWluKGlucHV0Lmxlbmd0aCwgOSk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dExlbjsgaSsrKSB7CiAgICAgIG91dHB1dC53b3Jkc1tpXSA9IGlucHV0LndvcmRzW2ldOwogICAgfQogICAgb3V0cHV0Lmxlbmd0aCA9IG91dExlbjsKCiAgICBpZiAoaW5wdXQubGVuZ3RoIDw9IDkpIHsKICAgICAgaW5wdXQud29yZHNbMF0gPSAwOwogICAgICBpbnB1dC5sZW5ndGggPSAxOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gU2hpZnQgYnkgOSBsaW1icwogICAgdmFyIHByZXYgPSBpbnB1dC53b3Jkc1s5XTsKICAgIG91dHB1dC53b3Jkc1tvdXRwdXQubGVuZ3RoKytdID0gcHJldiAmIG1hc2s7CgogICAgZm9yIChpID0gMTA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgICB2YXIgbmV4dCA9IGlucHV0LndvcmRzW2ldIHwgMDsKICAgICAgaW5wdXQud29yZHNbaSAtIDEwXSA9ICgobmV4dCAmIG1hc2spIDw8IDQpIHwgKHByZXYgPj4+IDIyKTsKICAgICAgcHJldiA9IG5leHQ7CiAgICB9CiAgICBwcmV2ID4+Pj0gMjI7CiAgICBpbnB1dC53b3Jkc1tpIC0gMTBdID0gcHJldjsKICAgIGlmIChwcmV2ID09PSAwICYmIGlucHV0Lmxlbmd0aCA+IDEwKSB7CiAgICAgIGlucHV0Lmxlbmd0aCAtPSAxMDsKICAgIH0gZWxzZSB7CiAgICAgIGlucHV0Lmxlbmd0aCAtPSA5OwogICAgfQogIH07CgogIEsyNTYucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgLy8gSyA9IDB4MTAwMDAwM2QxID0gWyAweDQwLCAweDNkMSBdCiAgICBudW0ud29yZHNbbnVtLmxlbmd0aF0gPSAwOwogICAgbnVtLndvcmRzW251bS5sZW5ndGggKyAxXSA9IDA7CiAgICBudW0ubGVuZ3RoICs9IDI7CgogICAgLy8gYm91bmRlZCBhdDogMHg0MCAqIDB4M2ZmZmZmZiArIDB4M2QwID0gMHgxMDAwMDAzOTAKICAgIHZhciBsbyA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bS5sZW5ndGg7IGkrKykgewogICAgICB2YXIgdyA9IG51bS53b3Jkc1tpXSB8IDA7CiAgICAgIGxvICs9IHcgKiAweDNkMTsKICAgICAgbnVtLndvcmRzW2ldID0gbG8gJiAweDNmZmZmZmY7CiAgICAgIGxvID0gdyAqIDB4NDAgKyAoKGxvIC8gMHg0MDAwMDAwKSB8IDApOwogICAgfQoKICAgIC8vIEZhc3QgbGVuZ3RoIHJlZHVjdGlvbgogICAgaWYgKG51bS53b3Jkc1tudW0ubGVuZ3RoIC0gMV0gPT09IDApIHsKICAgICAgbnVtLmxlbmd0aC0tOwogICAgICBpZiAobnVtLndvcmRzW251bS5sZW5ndGggLSAxXSA9PT0gMCkgewogICAgICAgIG51bS5sZW5ndGgtLTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bTsKICB9OwoKICBmdW5jdGlvbiBQMjI0ICgpIHsKICAgIE1QcmltZS5jYWxsKAogICAgICB0aGlzLAogICAgICAncDIyNCcsCiAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMScpOwogIH0KICBpbmhlcml0cyhQMjI0LCBNUHJpbWUpOwoKICBmdW5jdGlvbiBQMTkyICgpIHsKICAgIE1QcmltZS5jYWxsKAogICAgICB0aGlzLAogICAgICAncDE5MicsCiAgICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmZmZiBmZmZmZmZmZicpOwogIH0KICBpbmhlcml0cyhQMTkyLCBNUHJpbWUpOwoKICBmdW5jdGlvbiBQMjU1MTkgKCkgewogICAgLy8gMiBeIDI1NSAtIDE5CiAgICBNUHJpbWUuY2FsbCgKICAgICAgdGhpcywKICAgICAgJzI1NTE5JywKICAgICAgJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnKTsKICB9CiAgaW5oZXJpdHMoUDI1NTE5LCBNUHJpbWUpOwoKICBQMjU1MTkucHJvdG90eXBlLmltdWxLID0gZnVuY3Rpb24gaW11bEsgKG51bSkgewogICAgLy8gSyA9IDB4MTMKICAgIHZhciBjYXJyeSA9IDA7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bS5sZW5ndGg7IGkrKykgewogICAgICB2YXIgaGkgPSAobnVtLndvcmRzW2ldIHwgMCkgKiAweDEzICsgY2Fycnk7CiAgICAgIHZhciBsbyA9IGhpICYgMHgzZmZmZmZmOwogICAgICBoaSA+Pj49IDI2OwoKICAgICAgbnVtLndvcmRzW2ldID0gbG87CiAgICAgIGNhcnJ5ID0gaGk7CiAgICB9CiAgICBpZiAoY2FycnkgIT09IDApIHsKICAgICAgbnVtLndvcmRzW251bS5sZW5ndGgrK10gPSBjYXJyeTsKICAgIH0KICAgIHJldHVybiBudW07CiAgfTsKCiAgLy8gRXhwb3J0ZWQgbW9zdGx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLCB1c2UgcGxhaW4gbmFtZSBpbnN0ZWFkCiAgQk4uX3ByaW1lID0gZnVuY3Rpb24gcHJpbWUgKG5hbWUpIHsKICAgIC8vIENhY2hlZCB2ZXJzaW9uIG9mIHByaW1lCiAgICBpZiAocHJpbWVzW25hbWVdKSByZXR1cm4gcHJpbWVzW25hbWVdOwoKICAgIHZhciBwcmltZTsKICAgIGlmIChuYW1lID09PSAnazI1NicpIHsKICAgICAgcHJpbWUgPSBuZXcgSzI1NigpOwogICAgfSBlbHNlIGlmIChuYW1lID09PSAncDIyNCcpIHsKICAgICAgcHJpbWUgPSBuZXcgUDIyNCgpOwogICAgfSBlbHNlIGlmIChuYW1lID09PSAncDE5MicpIHsKICAgICAgcHJpbWUgPSBuZXcgUDE5MigpOwogICAgfSBlbHNlIGlmIChuYW1lID09PSAncDI1NTE5JykgewogICAgICBwcmltZSA9IG5ldyBQMjU1MTkoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBwcmltZSAnICsgbmFtZSk7CiAgICB9CiAgICBwcmltZXNbbmFtZV0gPSBwcmltZTsKCiAgICByZXR1cm4gcHJpbWU7CiAgfTsKCiAgLy8KICAvLyBCYXNlIHJlZHVjdGlvbiBlbmdpbmUKICAvLwogIGZ1bmN0aW9uIFJlZCAobSkgewogICAgaWYgKHR5cGVvZiBtID09PSAnc3RyaW5nJykgewogICAgICB2YXIgcHJpbWUgPSBCTi5fcHJpbWUobSk7CiAgICAgIHRoaXMubSA9IHByaW1lLnA7CiAgICAgIHRoaXMucHJpbWUgPSBwcmltZTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubSA9IG07CiAgICAgIHRoaXMucHJpbWUgPSBudWxsOwogICAgfQogIH0KCiAgUmVkLnByb3RvdHlwZS5fdmVyaWZ5MSA9IGZ1bmN0aW9uIF92ZXJpZnkxIChhKSB7CiAgICBhc3NlcnQoYS5uZWdhdGl2ZSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICBhc3NlcnQoYS5yZWQsICdyZWQgd29ya3Mgb25seSB3aXRoIHJlZCBudW1iZXJzJyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5fdmVyaWZ5MiA9IGZ1bmN0aW9uIF92ZXJpZnkyIChhLCBiKSB7CiAgICBhc3NlcnQoKGEubmVnYXRpdmUgfCBiLm5lZ2F0aXZlKSA9PT0gMCwgJ3JlZCB3b3JrcyBvbmx5IHdpdGggcG9zaXRpdmVzJyk7CiAgICBhc3NlcnQoYS5yZWQgJiYgYS5yZWQgPT09IGIucmVkLAogICAgICAncmVkIHdvcmtzIG9ubHkgd2l0aCByZWQgbnVtYmVycycpOwogIH07CgogIFJlZC5wcm90b3R5cGUuaW1vZCA9IGZ1bmN0aW9uIGltb2QgKGEpIHsKICAgIGlmICh0aGlzLnByaW1lKSByZXR1cm4gdGhpcy5wcmltZS5pcmVkdWNlKGEpLl9mb3JjZVJlZCh0aGlzKTsKICAgIHJldHVybiBhLnVtb2QodGhpcy5tKS5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5uZWcgPSBmdW5jdGlvbiBuZWcgKGEpIHsKICAgIGlmIChhLmlzWmVybygpKSB7CiAgICAgIHJldHVybiBhLmNsb25lKCk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMubS5zdWIoYSkuX2ZvcmNlUmVkKHRoaXMpOwogIH07CgogIFJlZC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkIChhLCBiKSB7CiAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwoKICAgIHZhciByZXMgPSBhLmFkZChiKTsKICAgIGlmIChyZXMuY21wKHRoaXMubSkgPj0gMCkgewogICAgICByZXMuaXN1Yih0aGlzLm0pOwogICAgfQogICAgcmV0dXJuIHJlcy5fZm9yY2VSZWQodGhpcyk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5pYWRkID0gZnVuY3Rpb24gaWFkZCAoYSwgYikgewogICAgdGhpcy5fdmVyaWZ5MihhLCBiKTsKCiAgICB2YXIgcmVzID0gYS5pYWRkKGIpOwogICAgaWYgKHJlcy5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgIHJlcy5pc3ViKHRoaXMubSk7CiAgICB9CiAgICByZXR1cm4gcmVzOwogIH07CgogIFJlZC5wcm90b3R5cGUuc3ViID0gZnVuY3Rpb24gc3ViIChhLCBiKSB7CiAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwoKICAgIHZhciByZXMgPSBhLnN1YihiKTsKICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgcmVzLmlhZGQodGhpcy5tKTsKICAgIH0KICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogIH07CgogIFJlZC5wcm90b3R5cGUuaXN1YiA9IGZ1bmN0aW9uIGlzdWIgKGEsIGIpIHsKICAgIHRoaXMuX3ZlcmlmeTIoYSwgYik7CgogICAgdmFyIHJlcyA9IGEuaXN1YihiKTsKICAgIGlmIChyZXMuY21wbigwKSA8IDApIHsKICAgICAgcmVzLmlhZGQodGhpcy5tKTsKICAgIH0KICAgIHJldHVybiByZXM7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5zaGwgPSBmdW5jdGlvbiBzaGwgKGEsIG51bSkgewogICAgdGhpcy5fdmVyaWZ5MShhKTsKICAgIHJldHVybiB0aGlzLmltb2QoYS51c2hsbihudW0pKTsKICB9OwoKICBSZWQucHJvdG90eXBlLmltdWwgPSBmdW5jdGlvbiBpbXVsIChhLCBiKSB7CiAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwogICAgcmV0dXJuIHRoaXMuaW1vZChhLmltdWwoYikpOwogIH07CgogIFJlZC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsIChhLCBiKSB7CiAgICB0aGlzLl92ZXJpZnkyKGEsIGIpOwogICAgcmV0dXJuIHRoaXMuaW1vZChhLm11bChiKSk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5pc3FyID0gZnVuY3Rpb24gaXNxciAoYSkgewogICAgcmV0dXJuIHRoaXMuaW11bChhLCBhLmNsb25lKCkpOwogIH07CgogIFJlZC5wcm90b3R5cGUuc3FyID0gZnVuY3Rpb24gc3FyIChhKSB7CiAgICByZXR1cm4gdGhpcy5tdWwoYSwgYSk7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5zcXJ0ID0gZnVuY3Rpb24gc3FydCAoYSkgewogICAgaWYgKGEuaXNaZXJvKCkpIHJldHVybiBhLmNsb25lKCk7CgogICAgdmFyIG1vZDMgPSB0aGlzLm0uYW5kbG4oMyk7CiAgICBhc3NlcnQobW9kMyAlIDIgPT09IDEpOwoKICAgIC8vIEZhc3QgY2FzZQogICAgaWYgKG1vZDMgPT09IDMpIHsKICAgICAgdmFyIHBvdyA9IHRoaXMubS5hZGQobmV3IEJOKDEpKS5pdXNocm4oMik7CiAgICAgIHJldHVybiB0aGlzLnBvdyhhLCBwb3cpOwogICAgfQoKICAgIC8vIFRvbmVsbGktU2hhbmtzIGFsZ29yaXRobSAoVG90YWxseSB1bm9wdGltaXplZCBhbmQgc2xvdykKICAgIC8vCiAgICAvLyBGaW5kIFEgYW5kIFMsIHRoYXQgUSAqIDIgXiBTID0gKFAgLSAxKQogICAgdmFyIHEgPSB0aGlzLm0uc3VibigxKTsKICAgIHZhciBzID0gMDsKICAgIHdoaWxlICghcS5pc1plcm8oKSAmJiBxLmFuZGxuKDEpID09PSAwKSB7CiAgICAgIHMrKzsKICAgICAgcS5pdXNocm4oMSk7CiAgICB9CiAgICBhc3NlcnQoIXEuaXNaZXJvKCkpOwoKICAgIHZhciBvbmUgPSBuZXcgQk4oMSkudG9SZWQodGhpcyk7CiAgICB2YXIgbk9uZSA9IG9uZS5yZWROZWcoKTsKCiAgICAvLyBGaW5kIHF1YWRyYXRpYyBub24tcmVzaWR1ZQogICAgLy8gTk9URTogTWF4IGlzIHN1Y2ggYmVjYXVzZSBvZiBnZW5lcmFsaXplZCBSaWVtYW5uIGh5cG90aGVzaXMuCiAgICB2YXIgbHBvdyA9IHRoaXMubS5zdWJuKDEpLml1c2hybigxKTsKICAgIHZhciB6ID0gdGhpcy5tLmJpdExlbmd0aCgpOwogICAgeiA9IG5ldyBCTigyICogeiAqIHopLnRvUmVkKHRoaXMpOwoKICAgIHdoaWxlICh0aGlzLnBvdyh6LCBscG93KS5jbXAobk9uZSkgIT09IDApIHsKICAgICAgei5yZWRJQWRkKG5PbmUpOwogICAgfQoKICAgIHZhciBjID0gdGhpcy5wb3coeiwgcSk7CiAgICB2YXIgciA9IHRoaXMucG93KGEsIHEuYWRkbigxKS5pdXNocm4oMSkpOwogICAgdmFyIHQgPSB0aGlzLnBvdyhhLCBxKTsKICAgIHZhciBtID0gczsKICAgIHdoaWxlICh0LmNtcChvbmUpICE9PSAwKSB7CiAgICAgIHZhciB0bXAgPSB0OwogICAgICBmb3IgKHZhciBpID0gMDsgdG1wLmNtcChvbmUpICE9PSAwOyBpKyspIHsKICAgICAgICB0bXAgPSB0bXAucmVkU3FyKCk7CiAgICAgIH0KICAgICAgYXNzZXJ0KGkgPCBtKTsKICAgICAgdmFyIGIgPSB0aGlzLnBvdyhjLCBuZXcgQk4oMSkuaXVzaGxuKG0gLSBpIC0gMSkpOwoKICAgICAgciA9IHIucmVkTXVsKGIpOwogICAgICBjID0gYi5yZWRTcXIoKTsKICAgICAgdCA9IHQucmVkTXVsKGMpOwogICAgICBtID0gaTsKICAgIH0KCiAgICByZXR1cm4gcjsKICB9OwoKICBSZWQucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChhKSB7CiAgICB2YXIgaW52ID0gYS5faW52bXAodGhpcy5tKTsKICAgIGlmIChpbnYubmVnYXRpdmUgIT09IDApIHsKICAgICAgaW52Lm5lZ2F0aXZlID0gMDsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChpbnYpLnJlZE5lZygpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuaW1vZChpbnYpOwogICAgfQogIH07CgogIFJlZC5wcm90b3R5cGUucG93ID0gZnVuY3Rpb24gcG93IChhLCBudW0pIHsKICAgIGlmIChudW0uaXNaZXJvKCkpIHJldHVybiBuZXcgQk4oMSk7CiAgICBpZiAobnVtLmNtcG4oMSkgPT09IDApIHJldHVybiBhLmNsb25lKCk7CgogICAgdmFyIHdpbmRvd1NpemUgPSA0OwogICAgdmFyIHduZCA9IG5ldyBBcnJheSgxIDw8IHdpbmRvd1NpemUpOwogICAgd25kWzBdID0gbmV3IEJOKDEpLnRvUmVkKHRoaXMpOwogICAgd25kWzFdID0gYTsKICAgIGZvciAodmFyIGkgPSAyOyBpIDwgd25kLmxlbmd0aDsgaSsrKSB7CiAgICAgIHduZFtpXSA9IHRoaXMubXVsKHduZFtpIC0gMV0sIGEpOwogICAgfQoKICAgIHZhciByZXMgPSB3bmRbMF07CiAgICB2YXIgY3VycmVudCA9IDA7CiAgICB2YXIgY3VycmVudExlbiA9IDA7CiAgICB2YXIgc3RhcnQgPSBudW0uYml0TGVuZ3RoKCkgJSAyNjsKICAgIGlmIChzdGFydCA9PT0gMCkgewogICAgICBzdGFydCA9IDI2OwogICAgfQoKICAgIGZvciAoaSA9IG51bS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICB2YXIgd29yZCA9IG51bS53b3Jkc1tpXTsKICAgICAgZm9yICh2YXIgaiA9IHN0YXJ0IC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICB2YXIgYml0ID0gKHdvcmQgPj4gaikgJiAxOwogICAgICAgIGlmIChyZXMgIT09IHduZFswXSkgewogICAgICAgICAgcmVzID0gdGhpcy5zcXIocmVzKTsKICAgICAgICB9CgogICAgICAgIGlmIChiaXQgPT09IDAgJiYgY3VycmVudCA9PT0gMCkgewogICAgICAgICAgY3VycmVudExlbiA9IDA7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGN1cnJlbnQgPDw9IDE7CiAgICAgICAgY3VycmVudCB8PSBiaXQ7CiAgICAgICAgY3VycmVudExlbisrOwogICAgICAgIGlmIChjdXJyZW50TGVuICE9PSB3aW5kb3dTaXplICYmIChpICE9PSAwIHx8IGogIT09IDApKSBjb250aW51ZTsKCiAgICAgICAgcmVzID0gdGhpcy5tdWwocmVzLCB3bmRbY3VycmVudF0pOwogICAgICAgIGN1cnJlbnRMZW4gPSAwOwogICAgICAgIGN1cnJlbnQgPSAwOwogICAgICB9CiAgICAgIHN0YXJ0ID0gMjY7CiAgICB9CgogICAgcmV0dXJuIHJlczsKICB9OwoKICBSZWQucHJvdG90eXBlLmNvbnZlcnRUbyA9IGZ1bmN0aW9uIGNvbnZlcnRUbyAobnVtKSB7CiAgICB2YXIgciA9IG51bS51bW9kKHRoaXMubSk7CgogICAgcmV0dXJuIHIgPT09IG51bSA/IHIuY2xvbmUoKSA6IHI7CiAgfTsKCiAgUmVkLnByb3RvdHlwZS5jb252ZXJ0RnJvbSA9IGZ1bmN0aW9uIGNvbnZlcnRGcm9tIChudW0pIHsKICAgIHZhciByZXMgPSBudW0uY2xvbmUoKTsKICAgIHJlcy5yZWQgPSBudWxsOwogICAgcmV0dXJuIHJlczsKICB9OwoKICAvLwogIC8vIE1vbnRnb21lcnkgbWV0aG9kIGVuZ2luZQogIC8vCgogIEJOLm1vbnQgPSBmdW5jdGlvbiBtb250IChudW0pIHsKICAgIHJldHVybiBuZXcgTW9udChudW0pOwogIH07CgogIGZ1bmN0aW9uIE1vbnQgKG0pIHsKICAgIFJlZC5jYWxsKHRoaXMsIG0pOwoKICAgIHRoaXMuc2hpZnQgPSB0aGlzLm0uYml0TGVuZ3RoKCk7CiAgICBpZiAodGhpcy5zaGlmdCAlIDI2ICE9PSAwKSB7CiAgICAgIHRoaXMuc2hpZnQgKz0gMjYgLSAodGhpcy5zaGlmdCAlIDI2KTsKICAgIH0KCiAgICB0aGlzLnIgPSBuZXcgQk4oMSkuaXVzaGxuKHRoaXMuc2hpZnQpOwogICAgdGhpcy5yMiA9IHRoaXMuaW1vZCh0aGlzLnIuc3FyKCkpOwogICAgdGhpcy5yaW52ID0gdGhpcy5yLl9pbnZtcCh0aGlzLm0pOwoKICAgIHRoaXMubWludiA9IHRoaXMucmludi5tdWwodGhpcy5yKS5pc3VibigxKS5kaXYodGhpcy5tKTsKICAgIHRoaXMubWludiA9IHRoaXMubWludi51bW9kKHRoaXMucik7CiAgICB0aGlzLm1pbnYgPSB0aGlzLnIuc3ViKHRoaXMubWludik7CiAgfQogIGluaGVyaXRzKE1vbnQsIFJlZCk7CgogIE1vbnQucHJvdG90eXBlLmNvbnZlcnRUbyA9IGZ1bmN0aW9uIGNvbnZlcnRUbyAobnVtKSB7CiAgICByZXR1cm4gdGhpcy5pbW9kKG51bS51c2hsbih0aGlzLnNoaWZ0KSk7CiAgfTsKCiAgTW9udC5wcm90b3R5cGUuY29udmVydEZyb20gPSBmdW5jdGlvbiBjb252ZXJ0RnJvbSAobnVtKSB7CiAgICB2YXIgciA9IHRoaXMuaW1vZChudW0ubXVsKHRoaXMucmludikpOwogICAgci5yZWQgPSBudWxsOwogICAgcmV0dXJuIHI7CiAgfTsKCiAgTW9udC5wcm90b3R5cGUuaW11bCA9IGZ1bmN0aW9uIGltdWwgKGEsIGIpIHsKICAgIGlmIChhLmlzWmVybygpIHx8IGIuaXNaZXJvKCkpIHsKICAgICAgYS53b3Jkc1swXSA9IDA7CiAgICAgIGEubGVuZ3RoID0gMTsKICAgICAgcmV0dXJuIGE7CiAgICB9CgogICAgdmFyIHQgPSBhLmltdWwoYik7CiAgICB2YXIgYyA9IHQubWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubWludikuaW1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm0pOwogICAgdmFyIHUgPSB0LmlzdWIoYykuaXVzaHJuKHRoaXMuc2hpZnQpOwogICAgdmFyIHJlcyA9IHU7CgogICAgaWYgKHUuY21wKHRoaXMubSkgPj0gMCkgewogICAgICByZXMgPSB1LmlzdWIodGhpcy5tKTsKICAgIH0gZWxzZSBpZiAodS5jbXBuKDApIDwgMCkgewogICAgICByZXMgPSB1LmlhZGQodGhpcy5tKTsKICAgIH0KCiAgICByZXR1cm4gcmVzLl9mb3JjZVJlZCh0aGlzKTsKICB9OwoKICBNb250LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwgKGEsIGIpIHsKICAgIGlmIChhLmlzWmVybygpIHx8IGIuaXNaZXJvKCkpIHJldHVybiBuZXcgQk4oMCkuX2ZvcmNlUmVkKHRoaXMpOwoKICAgIHZhciB0ID0gYS5tdWwoYik7CiAgICB2YXIgYyA9IHQubWFza24odGhpcy5zaGlmdCkubXVsKHRoaXMubWludikuaW1hc2tuKHRoaXMuc2hpZnQpLm11bCh0aGlzLm0pOwogICAgdmFyIHUgPSB0LmlzdWIoYykuaXVzaHJuKHRoaXMuc2hpZnQpOwogICAgdmFyIHJlcyA9IHU7CiAgICBpZiAodS5jbXAodGhpcy5tKSA+PSAwKSB7CiAgICAgIHJlcyA9IHUuaXN1Yih0aGlzLm0pOwogICAgfSBlbHNlIGlmICh1LmNtcG4oMCkgPCAwKSB7CiAgICAgIHJlcyA9IHUuaWFkZCh0aGlzLm0pOwogICAgfQoKICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogIH07CgogIE1vbnQucHJvdG90eXBlLmludm0gPSBmdW5jdGlvbiBpbnZtIChhKSB7CiAgICAvLyAoQVIpXi0xICogUl4yID0gKEFeLTEgKiBSXi0xKSAqIFJeMiA9IEFeLTEgKiBSCiAgICB2YXIgcmVzID0gdGhpcy5pbW9kKGEuX2ludm1wKHRoaXMubSkubXVsKHRoaXMucjIpKTsKICAgIHJldHVybiByZXMuX2ZvcmNlUmVkKHRoaXMpOwogIH07Cn0pKHR5cGVvZiBtb2R1bGUgPT09ICd1bmRlZmluZWQnIHx8IG1vZHVsZSwgdGhpcyk7Cgp9LHt9XSw0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciByOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByYW5kKGxlbikgewogIGlmICghcikKICAgIHIgPSBuZXcgUmFuZChudWxsKTsKCiAgcmV0dXJuIHIuZ2VuZXJhdGUobGVuKTsKfTsKCmZ1bmN0aW9uIFJhbmQocmFuZCkgewogIHRoaXMucmFuZCA9IHJhbmQ7Cn0KbW9kdWxlLmV4cG9ydHMuUmFuZCA9IFJhbmQ7CgpSYW5kLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIGdlbmVyYXRlKGxlbikgewogIHJldHVybiB0aGlzLl9yYW5kKGxlbik7Cn07CgppZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICBpZiAod2luZG93LmNyeXB0byAmJiB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykgewogICAgLy8gTW9kZXJuIGJyb3dzZXJzCiAgICBSYW5kLnByb3RvdHlwZS5fcmFuZCA9IGZ1bmN0aW9uIF9yYW5kKG4pIHsKICAgICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KG4pOwogICAgICB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnIpOwogICAgICByZXR1cm4gYXJyOwogICAgfTsKICB9IGVsc2UgaWYgKHdpbmRvdy5tc0NyeXB0byAmJiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgICAvLyBJRQogICAgUmFuZC5wcm90b3R5cGUuX3JhbmQgPSBmdW5jdGlvbiBfcmFuZChuKSB7CiAgICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShuKTsKICAgICAgd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnIpOwogICAgICByZXR1cm4gYXJyOwogICAgfTsKICB9IGVsc2UgewogICAgLy8gT2xkIGp1bmsKICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24oKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkIHlldCcpOwogICAgfTsKICB9Cn0gZWxzZSB7CiAgLy8gTm9kZS5qcyBvciBXZWIgd29ya2VyCiAgdHJ5IHsKICAgIHZhciBjcnlwdG8gPSByZXF1aXJlKCdjcnknICsgJ3B0bycpOwoKICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKG4pOwogICAgfTsKICB9IGNhdGNoIChlKSB7CiAgICAvLyBFbXVsYXRlIGNyeXB0byBBUEkgdXNpbmcgcmFuZHkKICAgIFJhbmQucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogICAgICB2YXIgcmVzID0gbmV3IFVpbnQ4QXJyYXkobik7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IHRoaXMucmFuZC5nZXRCeXRlKCk7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwogIH0KfQoKfSx7fV0sNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoKfSx7fV0sNDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8vIGJhc2VkIG9uIHRoZSBhZXMgaW1wbGltZW50YXRpb24gaW4gdHJpcGxlIHNlYwovLyBodHRwczovL2dpdGh1Yi5jb20va2V5YmFzZS90cmlwbGVzZWMKCi8vIHdoaWNoIGlzIGluIHR1cm4gYmFzZWQgb24gdGhlIG9uZSBmcm9tIGNyeXB0by1qcwovLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy8KCnZhciB1aW50X21heCA9IE1hdGgucG93KDIsIDMyKQpmdW5jdGlvbiBmaXh1cF91aW50MzIgKHgpIHsKICB2YXIgcmV0LCB4X3BvcwogIHJldCA9IHggPiB1aW50X21heCB8fCB4IDwgMCA/ICh4X3BvcyA9IE1hdGguYWJzKHgpICUgdWludF9tYXgsIHggPCAwID8gdWludF9tYXggLSB4X3BvcyA6IHhfcG9zKSA6IHgKICByZXR1cm4gcmV0Cn0KZnVuY3Rpb24gc2NydWJfdmVjICh2KSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2Lmxlbmd0aDsgdisrKSB7CiAgICB2W2ldID0gMAogIH0KICByZXR1cm4gZmFsc2UKfQoKZnVuY3Rpb24gR2xvYmFsICgpIHsKICB0aGlzLlNCT1ggPSBbXQogIHRoaXMuSU5WX1NCT1ggPSBbXQogIHRoaXMuU1VCX01JWCA9IFtbXSwgW10sIFtdLCBbXV0KICB0aGlzLklOVl9TVUJfTUlYID0gW1tdLCBbXSwgW10sIFtdXQogIHRoaXMuaW5pdCgpCiAgdGhpcy5SQ09OID0gWzB4MDAsIDB4MDEsIDB4MDIsIDB4MDQsIDB4MDgsIDB4MTAsIDB4MjAsIDB4NDAsIDB4ODAsIDB4MWIsIDB4MzZdCn0KCkdsb2JhbC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgZCwgaSwgc3gsIHQsIHgsIHgyLCB4NCwgeDgsIHhpLCBfaQogIGQgPSAoZnVuY3Rpb24gKCkgewogICAgdmFyIF9pLCBfcmVzdWx0cwogICAgX3Jlc3VsdHMgPSBbXQogICAgZm9yIChpID0gX2kgPSAwOyBfaSA8IDI1NjsgaSA9ICsrX2kpIHsKICAgICAgaWYgKGkgPCAxMjgpIHsKICAgICAgICBfcmVzdWx0cy5wdXNoKGkgPDwgMSkKICAgICAgfSBlbHNlIHsKICAgICAgICBfcmVzdWx0cy5wdXNoKChpIDw8IDEpIF4gMHgxMWIpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfcmVzdWx0cwogIH0pKCkKICB4ID0gMAogIHhpID0gMAogIGZvciAoaSA9IF9pID0gMDsgX2kgPCAyNTY7IGkgPSArK19pKSB7CiAgICBzeCA9IHhpIF4gKHhpIDw8IDEpIF4gKHhpIDw8IDIpIF4gKHhpIDw8IDMpIF4gKHhpIDw8IDQpCiAgICBzeCA9IChzeCA+Pj4gOCkgXiAoc3ggJiAweGZmKSBeIDB4NjMKICAgIHRoaXMuU0JPWFt4XSA9IHN4CiAgICB0aGlzLklOVl9TQk9YW3N4XSA9IHgKICAgIHgyID0gZFt4XQogICAgeDQgPSBkW3gyXQogICAgeDggPSBkW3g0XQogICAgdCA9IChkW3N4XSAqIDB4MTAxKSBeIChzeCAqIDB4MTAxMDEwMCkKICAgIHRoaXMuU1VCX01JWFswXVt4XSA9ICh0IDw8IDI0KSB8ICh0ID4+PiA4KQogICAgdGhpcy5TVUJfTUlYWzFdW3hdID0gKHQgPDwgMTYpIHwgKHQgPj4+IDE2KQogICAgdGhpcy5TVUJfTUlYWzJdW3hdID0gKHQgPDwgOCkgfCAodCA+Pj4gMjQpCiAgICB0aGlzLlNVQl9NSVhbM11beF0gPSB0CiAgICB0ID0gKHg4ICogMHgxMDEwMTAxKSBeICh4NCAqIDB4MTAwMDEpIF4gKHgyICogMHgxMDEpIF4gKHggKiAweDEwMTAxMDApCiAgICB0aGlzLklOVl9TVUJfTUlYWzBdW3N4XSA9ICh0IDw8IDI0KSB8ICh0ID4+PiA4KQogICAgdGhpcy5JTlZfU1VCX01JWFsxXVtzeF0gPSAodCA8PCAxNikgfCAodCA+Pj4gMTYpCiAgICB0aGlzLklOVl9TVUJfTUlYWzJdW3N4XSA9ICh0IDw8IDgpIHwgKHQgPj4+IDI0KQogICAgdGhpcy5JTlZfU1VCX01JWFszXVtzeF0gPSB0CiAgICBpZiAoeCA9PT0gMCkgewogICAgICB4ID0geGkgPSAxCiAgICB9IGVsc2UgewogICAgICB4ID0geDIgXiBkW2RbZFt4OCBeIHgyXV1dCiAgICAgIHhpIF49IGRbZFt4aV1dCiAgICB9CiAgfQogIHJldHVybiB0cnVlCn0KCnZhciBHID0gbmV3IEdsb2JhbCgpCgpBRVMuYmxvY2tTaXplID0gNCAqIDQKCkFFUy5wcm90b3R5cGUuYmxvY2tTaXplID0gQUVTLmJsb2NrU2l6ZQoKQUVTLmtleVNpemUgPSAyNTYgLyA4CgpBRVMucHJvdG90eXBlLmtleVNpemUgPSBBRVMua2V5U2l6ZQoKZnVuY3Rpb24gYnVmZmVyVG9BcnJheSAoYnVmKSB7CiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGggLyA0CiAgdmFyIG91dCA9IG5ldyBBcnJheShsZW4pCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIG91dFtpXSA9IGJ1Zi5yZWFkVUludDMyQkUoaSAqIDQpCiAgfQogIHJldHVybiBvdXQKfQpmdW5jdGlvbiBBRVMgKGtleSkgewogIHRoaXMuX2tleSA9IGJ1ZmZlclRvQXJyYXkoa2V5KQogIHRoaXMuX2RvUmVzZXQoKQp9CgpBRVMucHJvdG90eXBlLl9kb1Jlc2V0ID0gZnVuY3Rpb24gKCkgewogIHZhciBpbnZLc1Jvdywga2V5U2l6ZSwga2V5V29yZHMsIGtzUm93LCBrc1Jvd3MsIHQKICBrZXlXb3JkcyA9IHRoaXMuX2tleQogIGtleVNpemUgPSBrZXlXb3Jkcy5sZW5ndGgKICB0aGlzLl9uUm91bmRzID0ga2V5U2l6ZSArIDYKICBrc1Jvd3MgPSAodGhpcy5fblJvdW5kcyArIDEpICogNAogIHRoaXMuX2tleVNjaGVkdWxlID0gW10KICBmb3IgKGtzUm93ID0gMDsga3NSb3cgPCBrc1Jvd3M7IGtzUm93KyspIHsKICAgIHRoaXMuX2tleVNjaGVkdWxlW2tzUm93XSA9IGtzUm93IDwga2V5U2l6ZSA/IGtleVdvcmRzW2tzUm93XSA6ICh0ID0gdGhpcy5fa2V5U2NoZWR1bGVba3NSb3cgLSAxXSwgKGtzUm93ICUga2V5U2l6ZSkgPT09IDAgPyAodCA9ICh0IDw8IDgpIHwgKHQgPj4+IDI0KSwgdCA9IChHLlNCT1hbdCA+Pj4gMjRdIDw8IDI0KSB8IChHLlNCT1hbKHQgPj4+IDE2KSAmIDB4ZmZdIDw8IDE2KSB8IChHLlNCT1hbKHQgPj4+IDgpICYgMHhmZl0gPDwgOCkgfCBHLlNCT1hbdCAmIDB4ZmZdLCB0IF49IEcuUkNPTlsoa3NSb3cgLyBrZXlTaXplKSB8IDBdIDw8IDI0KSA6IGtleVNpemUgPiA2ICYmIGtzUm93ICUga2V5U2l6ZSA9PT0gNCA/IHQgPSAoRy5TQk9YW3QgPj4+IDI0XSA8PCAyNCkgfCAoRy5TQk9YWyh0ID4+PiAxNikgJiAweGZmXSA8PCAxNikgfCAoRy5TQk9YWyh0ID4+PiA4KSAmIDB4ZmZdIDw8IDgpIHwgRy5TQk9YW3QgJiAweGZmXSA6IHZvaWQgMCwgdGhpcy5fa2V5U2NoZWR1bGVba3NSb3cgLSBrZXlTaXplXSBeIHQpCiAgfQogIHRoaXMuX2ludktleVNjaGVkdWxlID0gW10KICBmb3IgKGludktzUm93ID0gMDsgaW52S3NSb3cgPCBrc1Jvd3M7IGludktzUm93KyspIHsKICAgIGtzUm93ID0ga3NSb3dzIC0gaW52S3NSb3cKICAgIHQgPSB0aGlzLl9rZXlTY2hlZHVsZVtrc1JvdyAtIChpbnZLc1JvdyAlIDQgPyAwIDogNCldCiAgICB0aGlzLl9pbnZLZXlTY2hlZHVsZVtpbnZLc1Jvd10gPSBpbnZLc1JvdyA8IDQgfHwga3NSb3cgPD0gNCA/IHQgOiBHLklOVl9TVUJfTUlYWzBdW0cuU0JPWFt0ID4+PiAyNF1dIF4gRy5JTlZfU1VCX01JWFsxXVtHLlNCT1hbKHQgPj4+IDE2KSAmIDB4ZmZdXSBeIEcuSU5WX1NVQl9NSVhbMl1bRy5TQk9YWyh0ID4+PiA4KSAmIDB4ZmZdXSBeIEcuSU5WX1NVQl9NSVhbM11bRy5TQk9YW3QgJiAweGZmXV0KICB9CiAgcmV0dXJuIHRydWUKfQoKQUVTLnByb3RvdHlwZS5lbmNyeXB0QmxvY2sgPSBmdW5jdGlvbiAoTSkgewogIE0gPSBidWZmZXJUb0FycmF5KG5ldyBCdWZmZXIoTSkpCiAgdmFyIG91dCA9IHRoaXMuX2RvQ3J5cHRCbG9jayhNLCB0aGlzLl9rZXlTY2hlZHVsZSwgRy5TVUJfTUlYLCBHLlNCT1gpCiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoMTYpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzBdLCAwKQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsxXSwgNCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbMl0sIDgpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzNdLCAxMikKICByZXR1cm4gYnVmCn0KCkFFUy5wcm90b3R5cGUuZGVjcnlwdEJsb2NrID0gZnVuY3Rpb24gKE0pIHsKICBNID0gYnVmZmVyVG9BcnJheShuZXcgQnVmZmVyKE0pKQogIHZhciB0ZW1wID0gW01bM10sIE1bMV1dCiAgTVsxXSA9IHRlbXBbMF0KICBNWzNdID0gdGVtcFsxXQogIHZhciBvdXQgPSB0aGlzLl9kb0NyeXB0QmxvY2soTSwgdGhpcy5faW52S2V5U2NoZWR1bGUsIEcuSU5WX1NVQl9NSVgsIEcuSU5WX1NCT1gpCiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoMTYpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzBdLCAwKQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFszXSwgNCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbMl0sIDgpCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzFdLCAxMikKICByZXR1cm4gYnVmCn0KCkFFUy5wcm90b3R5cGUuc2NydWIgPSBmdW5jdGlvbiAoKSB7CiAgc2NydWJfdmVjKHRoaXMuX2tleVNjaGVkdWxlKQogIHNjcnViX3ZlYyh0aGlzLl9pbnZLZXlTY2hlZHVsZSkKICBzY3J1Yl92ZWModGhpcy5fa2V5KQp9CgpBRVMucHJvdG90eXBlLl9kb0NyeXB0QmxvY2sgPSBmdW5jdGlvbiAoTSwga2V5U2NoZWR1bGUsIFNVQl9NSVgsIFNCT1gpIHsKICB2YXIga3NSb3csIHMwLCBzMSwgczIsIHMzLCB0MCwgdDEsIHQyLCB0MwoKICBzMCA9IE1bMF0gXiBrZXlTY2hlZHVsZVswXQogIHMxID0gTVsxXSBeIGtleVNjaGVkdWxlWzFdCiAgczIgPSBNWzJdIF4ga2V5U2NoZWR1bGVbMl0KICBzMyA9IE1bM10gXiBrZXlTY2hlZHVsZVszXQogIGtzUm93ID0gNAogIGZvciAodmFyIHJvdW5kID0gMTsgcm91bmQgPCB0aGlzLl9uUm91bmRzOyByb3VuZCsrKSB7CiAgICB0MCA9IFNVQl9NSVhbMF1bczAgPj4+IDI0XSBeIFNVQl9NSVhbMV1bKHMxID4+PiAxNikgJiAweGZmXSBeIFNVQl9NSVhbMl1bKHMyID4+PiA4KSAmIDB4ZmZdIF4gU1VCX01JWFszXVtzMyAmIDB4ZmZdIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICAgIHQxID0gU1VCX01JWFswXVtzMSA+Pj4gMjRdIF4gU1VCX01JWFsxXVsoczIgPj4+IDE2KSAmIDB4ZmZdIF4gU1VCX01JWFsyXVsoczMgPj4+IDgpICYgMHhmZl0gXiBTVUJfTUlYWzNdW3MwICYgMHhmZl0gXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogICAgdDIgPSBTVUJfTUlYWzBdW3MyID4+PiAyNF0gXiBTVUJfTUlYWzFdWyhzMyA+Pj4gMTYpICYgMHhmZl0gXiBTVUJfTUlYWzJdWyhzMCA+Pj4gOCkgJiAweGZmXSBeIFNVQl9NSVhbM11bczEgJiAweGZmXSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgICB0MyA9IFNVQl9NSVhbMF1bczMgPj4+IDI0XSBeIFNVQl9NSVhbMV1bKHMwID4+PiAxNikgJiAweGZmXSBeIFNVQl9NSVhbMl1bKHMxID4+PiA4KSAmIDB4ZmZdIF4gU1VCX01JWFszXVtzMiAmIDB4ZmZdIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICAgIHMwID0gdDAKICAgIHMxID0gdDEKICAgIHMyID0gdDIKICAgIHMzID0gdDMKICB9CiAgdDAgPSAoKFNCT1hbczAgPj4+IDI0XSA8PCAyNCkgfCAoU0JPWFsoczEgPj4+IDE2KSAmIDB4ZmZdIDw8IDE2KSB8IChTQk9YWyhzMiA+Pj4gOCkgJiAweGZmXSA8PCA4KSB8IFNCT1hbczMgJiAweGZmXSkgXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogIHQxID0gKChTQk9YW3MxID4+PiAyNF0gPDwgMjQpIHwgKFNCT1hbKHMyID4+PiAxNikgJiAweGZmXSA8PCAxNikgfCAoU0JPWFsoczMgPj4+IDgpICYgMHhmZl0gPDwgOCkgfCBTQk9YW3MwICYgMHhmZl0pIF4ga2V5U2NoZWR1bGVba3NSb3crK10KICB0MiA9ICgoU0JPWFtzMiA+Pj4gMjRdIDw8IDI0KSB8IChTQk9YWyhzMyA+Pj4gMTYpICYgMHhmZl0gPDwgMTYpIHwgKFNCT1hbKHMwID4+PiA4KSAmIDB4ZmZdIDw8IDgpIHwgU0JPWFtzMSAmIDB4ZmZdKSBeIGtleVNjaGVkdWxlW2tzUm93KytdCiAgdDMgPSAoKFNCT1hbczMgPj4+IDI0XSA8PCAyNCkgfCAoU0JPWFsoczAgPj4+IDE2KSAmIDB4ZmZdIDw8IDE2KSB8IChTQk9YWyhzMSA+Pj4gOCkgJiAweGZmXSA8PCA4KSB8IFNCT1hbczIgJiAweGZmXSkgXiBrZXlTY2hlZHVsZVtrc1JvdysrXQogIHJldHVybiBbCiAgICBmaXh1cF91aW50MzIodDApLAogICAgZml4dXBfdWludDMyKHQxKSwKICAgIGZpeHVwX3VpbnQzMih0MiksCiAgICBmaXh1cF91aW50MzIodDMpCiAgXQp9CgpleHBvcnRzLkFFUyA9IEFFUwoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSw0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFlcyA9IHJlcXVpcmUoJy4vYWVzJykKdmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2NpcGhlci1iYXNlJykKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgR0hBU0ggPSByZXF1aXJlKCcuL2doYXNoJykKdmFyIHhvciA9IHJlcXVpcmUoJ2J1ZmZlci14b3InKQppbmhlcml0cyhTdHJlYW1DaXBoZXIsIFRyYW5zZm9ybSkKbW9kdWxlLmV4cG9ydHMgPSBTdHJlYW1DaXBoZXIKCmZ1bmN0aW9uIFN0cmVhbUNpcGhlciAobW9kZSwga2V5LCBpdiwgZGVjcnlwdCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTdHJlYW1DaXBoZXIpKSB7CiAgICByZXR1cm4gbmV3IFN0cmVhbUNpcGhlcihtb2RlLCBrZXksIGl2KQogIH0KICBUcmFuc2Zvcm0uY2FsbCh0aGlzKQogIHRoaXMuX2ZpbklEID0gQnVmZmVyLmNvbmNhdChbaXYsIG5ldyBCdWZmZXIoWzAsIDAsIDAsIDFdKV0pCiAgaXYgPSBCdWZmZXIuY29uY2F0KFtpdiwgbmV3IEJ1ZmZlcihbMCwgMCwgMCwgMl0pXSkKICB0aGlzLl9jaXBoZXIgPSBuZXcgYWVzLkFFUyhrZXkpCiAgdGhpcy5fcHJldiA9IG5ldyBCdWZmZXIoaXYubGVuZ3RoKQogIHRoaXMuX2NhY2hlID0gbmV3IEJ1ZmZlcignJykKICB0aGlzLl9zZWNDYWNoZSA9IG5ldyBCdWZmZXIoJycpCiAgdGhpcy5fZGVjcnlwdCA9IGRlY3J5cHQKICB0aGlzLl9hbGVuID0gMAogIHRoaXMuX2xlbiA9IDAKICBpdi5jb3B5KHRoaXMuX3ByZXYpCiAgdGhpcy5fbW9kZSA9IG1vZGUKICB2YXIgaCA9IG5ldyBCdWZmZXIoNCkKICBoLmZpbGwoMCkKICB0aGlzLl9naGFzaCA9IG5ldyBHSEFTSCh0aGlzLl9jaXBoZXIuZW5jcnlwdEJsb2NrKGgpKQogIHRoaXMuX2F1dGhUYWcgPSBudWxsCiAgdGhpcy5fY2FsbGVkID0gZmFsc2UKfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoY2h1bmspIHsKICBpZiAoIXRoaXMuX2NhbGxlZCAmJiB0aGlzLl9hbGVuKSB7CiAgICB2YXIgcnVtcCA9IDE2IC0gKHRoaXMuX2FsZW4gJSAxNikKICAgIGlmIChydW1wIDwgMTYpIHsKICAgICAgcnVtcCA9IG5ldyBCdWZmZXIocnVtcCkKICAgICAgcnVtcC5maWxsKDApCiAgICAgIHRoaXMuX2doYXNoLnVwZGF0ZShydW1wKQogICAgfQogIH0KICB0aGlzLl9jYWxsZWQgPSB0cnVlCiAgdmFyIG91dCA9IHRoaXMuX21vZGUuZW5jcnlwdCh0aGlzLCBjaHVuaykKICBpZiAodGhpcy5fZGVjcnlwdCkgewogICAgdGhpcy5fZ2hhc2gudXBkYXRlKGNodW5rKQogIH0gZWxzZSB7CiAgICB0aGlzLl9naGFzaC51cGRhdGUob3V0KQogIH0KICB0aGlzLl9sZW4gKz0gY2h1bmsubGVuZ3RoCiAgcmV0dXJuIG91dAp9ClN0cmVhbUNpcGhlci5wcm90b3R5cGUuX2ZpbmFsID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLl9kZWNyeXB0ICYmICF0aGlzLl9hdXRoVGFnKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHN0YXRlIG9yIHVuYWJsZSB0byBhdXRoZW50aWNhdGUgZGF0YScpCiAgfQogIHZhciB0YWcgPSB4b3IodGhpcy5fZ2hhc2guZmluYWwodGhpcy5fYWxlbiAqIDgsIHRoaXMuX2xlbiAqIDgpLCB0aGlzLl9jaXBoZXIuZW5jcnlwdEJsb2NrKHRoaXMuX2ZpbklEKSkKICBpZiAodGhpcy5fZGVjcnlwdCkgewogICAgaWYgKHhvclRlc3QodGFnLCB0aGlzLl9hdXRoVGFnKSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHN0YXRlIG9yIHVuYWJsZSB0byBhdXRoZW50aWNhdGUgZGF0YScpCiAgICB9CiAgfSBlbHNlIHsKICAgIHRoaXMuX2F1dGhUYWcgPSB0YWcKICB9CiAgdGhpcy5fY2lwaGVyLnNjcnViKCkKfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLmdldEF1dGhUYWcgPSBmdW5jdGlvbiBnZXRBdXRoVGFnICgpIHsKICBpZiAoIXRoaXMuX2RlY3J5cHQgJiYgQnVmZmVyLmlzQnVmZmVyKHRoaXMuX2F1dGhUYWcpKSB7CiAgICByZXR1cm4gdGhpcy5fYXV0aFRhZwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dGVtcHRpbmcgdG8gZ2V0IGF1dGggdGFnIGluIHVuc3VwcG9ydGVkIHN0YXRlJykKICB9Cn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5zZXRBdXRoVGFnID0gZnVuY3Rpb24gc2V0QXV0aFRhZyAodGFnKSB7CiAgaWYgKHRoaXMuX2RlY3J5cHQpIHsKICAgIHRoaXMuX2F1dGhUYWcgPSB0YWcKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0aW5nIHRvIHNldCBhdXRoIHRhZyBpbiB1bnN1cHBvcnRlZCBzdGF0ZScpCiAgfQp9ClN0cmVhbUNpcGhlci5wcm90b3R5cGUuc2V0QUFEID0gZnVuY3Rpb24gc2V0QUFEIChidWYpIHsKICBpZiAoIXRoaXMuX2NhbGxlZCkgewogICAgdGhpcy5fZ2hhc2gudXBkYXRlKGJ1ZikKICAgIHRoaXMuX2FsZW4gKz0gYnVmLmxlbmd0aAogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dGVtcHRpbmcgdG8gc2V0IEFBRCBpbiB1bnN1cHBvcnRlZCBzdGF0ZScpCiAgfQp9CmZ1bmN0aW9uIHhvclRlc3QgKGEsIGIpIHsKICB2YXIgb3V0ID0gMAogIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHsKICAgIG91dCsrCiAgfQogIHZhciBsZW4gPSBNYXRoLm1pbihhLmxlbmd0aCwgYi5sZW5ndGgpCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIG91dCArPSAoYVtpXSBeIGJbaV0pCiAgfQogIHJldHVybiBvdXQKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWVzIjo0NCwiLi9naGFzaCI6NDksImJ1ZmZlciI6NzAsImJ1ZmZlci14b3IiOjc4LCJjaXBoZXItYmFzZSI6NzksImluaGVyaXRzIjoxMjl9XSw0NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBjaXBoZXJzID0gcmVxdWlyZSgnLi9lbmNyeXB0ZXInKQpleHBvcnRzLmNyZWF0ZUNpcGhlciA9IGV4cG9ydHMuQ2lwaGVyID0gY2lwaGVycy5jcmVhdGVDaXBoZXIKZXhwb3J0cy5jcmVhdGVDaXBoZXJpdiA9IGV4cG9ydHMuQ2lwaGVyaXYgPSBjaXBoZXJzLmNyZWF0ZUNpcGhlcml2CnZhciBkZWNpcGhlcnMgPSByZXF1aXJlKCcuL2RlY3J5cHRlcicpCmV4cG9ydHMuY3JlYXRlRGVjaXBoZXIgPSBleHBvcnRzLkRlY2lwaGVyID0gZGVjaXBoZXJzLmNyZWF0ZURlY2lwaGVyCmV4cG9ydHMuY3JlYXRlRGVjaXBoZXJpdiA9IGV4cG9ydHMuRGVjaXBoZXJpdiA9IGRlY2lwaGVycy5jcmVhdGVEZWNpcGhlcml2CnZhciBtb2RlcyA9IHJlcXVpcmUoJy4vbW9kZXMnKQpmdW5jdGlvbiBnZXRDaXBoZXJzICgpIHsKICByZXR1cm4gT2JqZWN0LmtleXMobW9kZXMpCn0KZXhwb3J0cy5saXN0Q2lwaGVycyA9IGV4cG9ydHMuZ2V0Q2lwaGVycyA9IGdldENpcGhlcnMKCn0seyIuL2RlY3J5cHRlciI6NDcsIi4vZW5jcnlwdGVyIjo0OCwiLi9tb2RlcyI6NTB9XSw0NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFlcyA9IHJlcXVpcmUoJy4vYWVzJykKdmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ2NpcGhlci1iYXNlJykKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgbW9kZXMgPSByZXF1aXJlKCcuL21vZGVzJykKdmFyIFN0cmVhbUNpcGhlciA9IHJlcXVpcmUoJy4vc3RyZWFtQ2lwaGVyJykKdmFyIEF1dGhDaXBoZXIgPSByZXF1aXJlKCcuL2F1dGhDaXBoZXInKQp2YXIgZWJ0ayA9IHJlcXVpcmUoJ2V2cF9ieXRlc3Rva2V5JykKCmluaGVyaXRzKERlY2lwaGVyLCBUcmFuc2Zvcm0pCmZ1bmN0aW9uIERlY2lwaGVyIChtb2RlLCBrZXksIGl2KSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERlY2lwaGVyKSkgewogICAgcmV0dXJuIG5ldyBEZWNpcGhlcihtb2RlLCBrZXksIGl2KQogIH0KICBUcmFuc2Zvcm0uY2FsbCh0aGlzKQogIHRoaXMuX2NhY2hlID0gbmV3IFNwbGl0dGVyKCkKICB0aGlzLl9sYXN0ID0gdm9pZCAwCiAgdGhpcy5fY2lwaGVyID0gbmV3IGFlcy5BRVMoa2V5KQogIHRoaXMuX3ByZXYgPSBuZXcgQnVmZmVyKGl2Lmxlbmd0aCkKICBpdi5jb3B5KHRoaXMuX3ByZXYpCiAgdGhpcy5fbW9kZSA9IG1vZGUKICB0aGlzLl9hdXRvcGFkZGluZyA9IHRydWUKfQpEZWNpcGhlci5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdGhpcy5fY2FjaGUuYWRkKGRhdGEpCiAgdmFyIGNodW5rCiAgdmFyIHRoaW5nCiAgdmFyIG91dCA9IFtdCiAgd2hpbGUgKChjaHVuayA9IHRoaXMuX2NhY2hlLmdldCh0aGlzLl9hdXRvcGFkZGluZykpKSB7CiAgICB0aGluZyA9IHRoaXMuX21vZGUuZGVjcnlwdCh0aGlzLCBjaHVuaykKICAgIG91dC5wdXNoKHRoaW5nKQogIH0KICByZXR1cm4gQnVmZmVyLmNvbmNhdChvdXQpCn0KRGVjaXBoZXIucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgY2h1bmsgPSB0aGlzLl9jYWNoZS5mbHVzaCgpCiAgaWYgKHRoaXMuX2F1dG9wYWRkaW5nKSB7CiAgICByZXR1cm4gdW5wYWQodGhpcy5fbW9kZS5kZWNyeXB0KHRoaXMsIGNodW5rKSkKICB9IGVsc2UgaWYgKGNodW5rKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgbm90IG11bHRpcGxlIG9mIGJsb2NrIGxlbmd0aCcpCiAgfQp9CkRlY2lwaGVyLnByb3RvdHlwZS5zZXRBdXRvUGFkZGluZyA9IGZ1bmN0aW9uIChzZXRUbykgewogIHRoaXMuX2F1dG9wYWRkaW5nID0gISFzZXRUbwogIHJldHVybiB0aGlzCn0KZnVuY3Rpb24gU3BsaXR0ZXIgKCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTcGxpdHRlcikpIHsKICAgIHJldHVybiBuZXcgU3BsaXR0ZXIoKQogIH0KICB0aGlzLmNhY2hlID0gbmV3IEJ1ZmZlcignJykKfQpTcGxpdHRlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGRhdGEpIHsKICB0aGlzLmNhY2hlID0gQnVmZmVyLmNvbmNhdChbdGhpcy5jYWNoZSwgZGF0YV0pCn0KClNwbGl0dGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoYXV0b1BhZGRpbmcpIHsKICB2YXIgb3V0CiAgaWYgKGF1dG9QYWRkaW5nKSB7CiAgICBpZiAodGhpcy5jYWNoZS5sZW5ndGggPiAxNikgewogICAgICBvdXQgPSB0aGlzLmNhY2hlLnNsaWNlKDAsIDE2KQogICAgICB0aGlzLmNhY2hlID0gdGhpcy5jYWNoZS5zbGljZSgxNikKICAgICAgcmV0dXJuIG91dAogICAgfQogIH0gZWxzZSB7CiAgICBpZiAodGhpcy5jYWNoZS5sZW5ndGggPj0gMTYpIHsKICAgICAgb3V0ID0gdGhpcy5jYWNoZS5zbGljZSgwLCAxNikKICAgICAgdGhpcy5jYWNoZSA9IHRoaXMuY2FjaGUuc2xpY2UoMTYpCiAgICAgIHJldHVybiBvdXQKICAgIH0KICB9CiAgcmV0dXJuIG51bGwKfQpTcGxpdHRlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHRoaXMuY2FjaGUubGVuZ3RoKSB7CiAgICByZXR1cm4gdGhpcy5jYWNoZQogIH0KfQpmdW5jdGlvbiB1bnBhZCAobGFzdCkgewogIHZhciBwYWRkZWQgPSBsYXN0WzE1XQogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgcGFkZGVkKSB7CiAgICBpZiAobGFzdFsoaSArICgxNiAtIHBhZGRlZCkpXSAhPT0gcGFkZGVkKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigndW5hYmxlIHRvIGRlY3J5cHQgZGF0YScpCiAgICB9CiAgfQogIGlmIChwYWRkZWQgPT09IDE2KSB7CiAgICByZXR1cm4KICB9CiAgcmV0dXJuIGxhc3Quc2xpY2UoMCwgMTYgLSBwYWRkZWQpCn0KCnZhciBtb2RlbGlzdCA9IHsKICBFQ0I6IHJlcXVpcmUoJy4vbW9kZXMvZWNiJyksCiAgQ0JDOiByZXF1aXJlKCcuL21vZGVzL2NiYycpLAogIENGQjogcmVxdWlyZSgnLi9tb2Rlcy9jZmInKSwKICBDRkI4OiByZXF1aXJlKCcuL21vZGVzL2NmYjgnKSwKICBDRkIxOiByZXF1aXJlKCcuL21vZGVzL2NmYjEnKSwKICBPRkI6IHJlcXVpcmUoJy4vbW9kZXMvb2ZiJyksCiAgQ1RSOiByZXF1aXJlKCcuL21vZGVzL2N0cicpLAogIEdDTTogcmVxdWlyZSgnLi9tb2Rlcy9jdHInKQp9CgpmdW5jdGlvbiBjcmVhdGVEZWNpcGhlcml2IChzdWl0ZSwgcGFzc3dvcmQsIGl2KSB7CiAgdmFyIGNvbmZpZyA9IG1vZGVzW3N1aXRlLnRvTG93ZXJDYXNlKCldCiAgaWYgKCFjb25maWcpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQogIGlmICh0eXBlb2YgaXYgPT09ICdzdHJpbmcnKSB7CiAgICBpdiA9IG5ldyBCdWZmZXIoaXYpCiAgfQogIGlmICh0eXBlb2YgcGFzc3dvcmQgPT09ICdzdHJpbmcnKSB7CiAgICBwYXNzd29yZCA9IG5ldyBCdWZmZXIocGFzc3dvcmQpCiAgfQogIGlmIChwYXNzd29yZC5sZW5ndGggIT09IGNvbmZpZy5rZXkgLyA4KSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGtleSBsZW5ndGggJyArIHBhc3N3b3JkLmxlbmd0aCkKICB9CiAgaWYgKGl2Lmxlbmd0aCAhPT0gY29uZmlnLml2KSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGl2IGxlbmd0aCAnICsgaXYubGVuZ3RoKQogIH0KICBpZiAoY29uZmlnLnR5cGUgPT09ICdzdHJlYW0nKSB7CiAgICByZXR1cm4gbmV3IFN0cmVhbUNpcGhlcihtb2RlbGlzdFtjb25maWcubW9kZV0sIHBhc3N3b3JkLCBpdiwgdHJ1ZSkKICB9IGVsc2UgaWYgKGNvbmZpZy50eXBlID09PSAnYXV0aCcpIHsKICAgIHJldHVybiBuZXcgQXV0aENpcGhlcihtb2RlbGlzdFtjb25maWcubW9kZV0sIHBhc3N3b3JkLCBpdiwgdHJ1ZSkKICB9CiAgcmV0dXJuIG5ldyBEZWNpcGhlcihtb2RlbGlzdFtjb25maWcubW9kZV0sIHBhc3N3b3JkLCBpdikKfQoKZnVuY3Rpb24gY3JlYXRlRGVjaXBoZXIgKHN1aXRlLCBwYXNzd29yZCkgewogIHZhciBjb25maWcgPSBtb2Rlc1tzdWl0ZS50b0xvd2VyQ2FzZSgpXQogIGlmICghY29uZmlnKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KICB2YXIga2V5cyA9IGVidGsocGFzc3dvcmQsIGZhbHNlLCBjb25maWcua2V5LCBjb25maWcuaXYpCiAgcmV0dXJuIGNyZWF0ZURlY2lwaGVyaXYoc3VpdGUsIGtleXMua2V5LCBrZXlzLml2KQp9CmV4cG9ydHMuY3JlYXRlRGVjaXBoZXIgPSBjcmVhdGVEZWNpcGhlcgpleHBvcnRzLmNyZWF0ZURlY2lwaGVyaXYgPSBjcmVhdGVEZWNpcGhlcml2Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hZXMiOjQ0LCIuL2F1dGhDaXBoZXIiOjQ1LCIuL21vZGVzIjo1MCwiLi9tb2Rlcy9jYmMiOjUxLCIuL21vZGVzL2NmYiI6NTIsIi4vbW9kZXMvY2ZiMSI6NTMsIi4vbW9kZXMvY2ZiOCI6NTQsIi4vbW9kZXMvY3RyIjo1NSwiLi9tb2Rlcy9lY2IiOjU2LCIuL21vZGVzL29mYiI6NTcsIi4vc3RyZWFtQ2lwaGVyIjo1OCwiYnVmZmVyIjo3MCwiY2lwaGVyLWJhc2UiOjc5LCJldnBfYnl0ZXN0b2tleSI6MTE5LCJpbmhlcml0cyI6MTI5fV0sNDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBhZXMgPSByZXF1aXJlKCcuL2FlcycpCnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdjaXBoZXItYmFzZScpCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIG1vZGVzID0gcmVxdWlyZSgnLi9tb2RlcycpCnZhciBlYnRrID0gcmVxdWlyZSgnZXZwX2J5dGVzdG9rZXknKQp2YXIgU3RyZWFtQ2lwaGVyID0gcmVxdWlyZSgnLi9zdHJlYW1DaXBoZXInKQp2YXIgQXV0aENpcGhlciA9IHJlcXVpcmUoJy4vYXV0aENpcGhlcicpCmluaGVyaXRzKENpcGhlciwgVHJhbnNmb3JtKQpmdW5jdGlvbiBDaXBoZXIgKG1vZGUsIGtleSwgaXYpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQ2lwaGVyKSkgewogICAgcmV0dXJuIG5ldyBDaXBoZXIobW9kZSwga2V5LCBpdikKICB9CiAgVHJhbnNmb3JtLmNhbGwodGhpcykKICB0aGlzLl9jYWNoZSA9IG5ldyBTcGxpdHRlcigpCiAgdGhpcy5fY2lwaGVyID0gbmV3IGFlcy5BRVMoa2V5KQogIHRoaXMuX3ByZXYgPSBuZXcgQnVmZmVyKGl2Lmxlbmd0aCkKICBpdi5jb3B5KHRoaXMuX3ByZXYpCiAgdGhpcy5fbW9kZSA9IG1vZGUKICB0aGlzLl9hdXRvcGFkZGluZyA9IHRydWUKfQpDaXBoZXIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuX2NhY2hlLmFkZChkYXRhKQogIHZhciBjaHVuawogIHZhciB0aGluZwogIHZhciBvdXQgPSBbXQogIHdoaWxlICgoY2h1bmsgPSB0aGlzLl9jYWNoZS5nZXQoKSkpIHsKICAgIHRoaW5nID0gdGhpcy5fbW9kZS5lbmNyeXB0KHRoaXMsIGNodW5rKQogICAgb3V0LnB1c2godGhpbmcpCiAgfQogIHJldHVybiBCdWZmZXIuY29uY2F0KG91dCkKfQpDaXBoZXIucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgY2h1bmsgPSB0aGlzLl9jYWNoZS5mbHVzaCgpCiAgaWYgKHRoaXMuX2F1dG9wYWRkaW5nKSB7CiAgICBjaHVuayA9IHRoaXMuX21vZGUuZW5jcnlwdCh0aGlzLCBjaHVuaykKICAgIHRoaXMuX2NpcGhlci5zY3J1YigpCiAgICByZXR1cm4gY2h1bmsKICB9IGVsc2UgaWYgKGNodW5rLnRvU3RyaW5nKCdoZXgnKSAhPT0gJzEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwMTAxMDEwJykgewogICAgdGhpcy5fY2lwaGVyLnNjcnViKCkKICAgIHRocm93IG5ldyBFcnJvcignZGF0YSBub3QgbXVsdGlwbGUgb2YgYmxvY2sgbGVuZ3RoJykKICB9Cn0KQ2lwaGVyLnByb3RvdHlwZS5zZXRBdXRvUGFkZGluZyA9IGZ1bmN0aW9uIChzZXRUbykgewogIHRoaXMuX2F1dG9wYWRkaW5nID0gISFzZXRUbwogIHJldHVybiB0aGlzCn0KCmZ1bmN0aW9uIFNwbGl0dGVyICgpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU3BsaXR0ZXIpKSB7CiAgICByZXR1cm4gbmV3IFNwbGl0dGVyKCkKICB9CiAgdGhpcy5jYWNoZSA9IG5ldyBCdWZmZXIoJycpCn0KU3BsaXR0ZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdGhpcy5jYWNoZSA9IEJ1ZmZlci5jb25jYXQoW3RoaXMuY2FjaGUsIGRhdGFdKQp9CgpTcGxpdHRlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLmNhY2hlLmxlbmd0aCA+IDE1KSB7CiAgICB2YXIgb3V0ID0gdGhpcy5jYWNoZS5zbGljZSgwLCAxNikKICAgIHRoaXMuY2FjaGUgPSB0aGlzLmNhY2hlLnNsaWNlKDE2KQogICAgcmV0dXJuIG91dAogIH0KICByZXR1cm4gbnVsbAp9ClNwbGl0dGVyLnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgbGVuID0gMTYgLSB0aGlzLmNhY2hlLmxlbmd0aAogIHZhciBwYWRCdWZmID0gbmV3IEJ1ZmZlcihsZW4pCgogIHZhciBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBwYWRCdWZmLndyaXRlVUludDgobGVuLCBpKQogIH0KICB2YXIgb3V0ID0gQnVmZmVyLmNvbmNhdChbdGhpcy5jYWNoZSwgcGFkQnVmZl0pCiAgcmV0dXJuIG91dAp9CnZhciBtb2RlbGlzdCA9IHsKICBFQ0I6IHJlcXVpcmUoJy4vbW9kZXMvZWNiJyksCiAgQ0JDOiByZXF1aXJlKCcuL21vZGVzL2NiYycpLAogIENGQjogcmVxdWlyZSgnLi9tb2Rlcy9jZmInKSwKICBDRkI4OiByZXF1aXJlKCcuL21vZGVzL2NmYjgnKSwKICBDRkIxOiByZXF1aXJlKCcuL21vZGVzL2NmYjEnKSwKICBPRkI6IHJlcXVpcmUoJy4vbW9kZXMvb2ZiJyksCiAgQ1RSOiByZXF1aXJlKCcuL21vZGVzL2N0cicpLAogIEdDTTogcmVxdWlyZSgnLi9tb2Rlcy9jdHInKQp9CgpmdW5jdGlvbiBjcmVhdGVDaXBoZXJpdiAoc3VpdGUsIHBhc3N3b3JkLCBpdikgewogIHZhciBjb25maWcgPSBtb2Rlc1tzdWl0ZS50b0xvd2VyQ2FzZSgpXQogIGlmICghY29uZmlnKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KICBpZiAodHlwZW9mIGl2ID09PSAnc3RyaW5nJykgewogICAgaXYgPSBuZXcgQnVmZmVyKGl2KQogIH0KICBpZiAodHlwZW9mIHBhc3N3b3JkID09PSAnc3RyaW5nJykgewogICAgcGFzc3dvcmQgPSBuZXcgQnVmZmVyKHBhc3N3b3JkKQogIH0KICBpZiAocGFzc3dvcmQubGVuZ3RoICE9PSBjb25maWcua2V5IC8gOCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBrZXkgbGVuZ3RoICcgKyBwYXNzd29yZC5sZW5ndGgpCiAgfQogIGlmIChpdi5sZW5ndGggIT09IGNvbmZpZy5pdikgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBpdiBsZW5ndGggJyArIGl2Lmxlbmd0aCkKICB9CiAgaWYgKGNvbmZpZy50eXBlID09PSAnc3RyZWFtJykgewogICAgcmV0dXJuIG5ldyBTdHJlYW1DaXBoZXIobW9kZWxpc3RbY29uZmlnLm1vZGVdLCBwYXNzd29yZCwgaXYpCiAgfSBlbHNlIGlmIChjb25maWcudHlwZSA9PT0gJ2F1dGgnKSB7CiAgICByZXR1cm4gbmV3IEF1dGhDaXBoZXIobW9kZWxpc3RbY29uZmlnLm1vZGVdLCBwYXNzd29yZCwgaXYpCiAgfQogIHJldHVybiBuZXcgQ2lwaGVyKG1vZGVsaXN0W2NvbmZpZy5tb2RlXSwgcGFzc3dvcmQsIGl2KQp9CmZ1bmN0aW9uIGNyZWF0ZUNpcGhlciAoc3VpdGUsIHBhc3N3b3JkKSB7CiAgdmFyIGNvbmZpZyA9IG1vZGVzW3N1aXRlLnRvTG93ZXJDYXNlKCldCiAgaWYgKCFjb25maWcpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQogIHZhciBrZXlzID0gZWJ0ayhwYXNzd29yZCwgZmFsc2UsIGNvbmZpZy5rZXksIGNvbmZpZy5pdikKICByZXR1cm4gY3JlYXRlQ2lwaGVyaXYoc3VpdGUsIGtleXMua2V5LCBrZXlzLml2KQp9CgpleHBvcnRzLmNyZWF0ZUNpcGhlcml2ID0gY3JlYXRlQ2lwaGVyaXYKZXhwb3J0cy5jcmVhdGVDaXBoZXIgPSBjcmVhdGVDaXBoZXIKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2FlcyI6NDQsIi4vYXV0aENpcGhlciI6NDUsIi4vbW9kZXMiOjUwLCIuL21vZGVzL2NiYyI6NTEsIi4vbW9kZXMvY2ZiIjo1MiwiLi9tb2Rlcy9jZmIxIjo1MywiLi9tb2Rlcy9jZmI4Ijo1NCwiLi9tb2Rlcy9jdHIiOjU1LCIuL21vZGVzL2VjYiI6NTYsIi4vbW9kZXMvb2ZiIjo1NywiLi9zdHJlYW1DaXBoZXIiOjU4LCJidWZmZXIiOjcwLCJjaXBoZXItYmFzZSI6NzksImV2cF9ieXRlc3Rva2V5IjoxMTksImluaGVyaXRzIjoxMjl9XSw0OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHplcm9zID0gbmV3IEJ1ZmZlcigxNikKemVyb3MuZmlsbCgwKQptb2R1bGUuZXhwb3J0cyA9IEdIQVNICmZ1bmN0aW9uIEdIQVNIIChrZXkpIHsKICB0aGlzLmggPSBrZXkKICB0aGlzLnN0YXRlID0gbmV3IEJ1ZmZlcigxNikKICB0aGlzLnN0YXRlLmZpbGwoMCkKICB0aGlzLmNhY2hlID0gbmV3IEJ1ZmZlcignJykKfQovLyBmcm9tIGh0dHA6Ly9iaXR3aXNlc2hpZnRsZWZ0LmdpdGh1Yi5pby9zamNsL2RvYy9zeW1ib2xzL3NyYy9jb3JlX2djbS5qcy5odG1sCi8vIGJ5IEp1aG8gVsOkaMOkLUhlcnR0dWEKR0hBU0gucHJvdG90eXBlLmdoYXNoID0gZnVuY3Rpb24gKGJsb2NrKSB7CiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBibG9jay5sZW5ndGgpIHsKICAgIHRoaXMuc3RhdGVbaV0gXj0gYmxvY2tbaV0KICB9CiAgdGhpcy5fbXVsdGlwbHkoKQp9CgpHSEFTSC5wcm90b3R5cGUuX211bHRpcGx5ID0gZnVuY3Rpb24gKCkgewogIHZhciBWaSA9IHRvQXJyYXkodGhpcy5oKQogIHZhciBaaSA9IFswLCAwLCAwLCAwXQogIHZhciBqLCB4aSwgbHNiX1ZpCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCAxMjgpIHsKICAgIHhpID0gKHRoaXMuc3RhdGVbfn4oaSAvIDgpXSAmICgxIDw8ICg3IC0gaSAlIDgpKSkgIT09IDAKICAgIGlmICh4aSkgewogICAgICAvLyBaX2krMSA9IFpfaSBeIFZfaQogICAgICBaaSA9IHhvcihaaSwgVmkpCiAgICB9CgogICAgLy8gU3RvcmUgdGhlIHZhbHVlIG9mIExTQihWX2kpCiAgICBsc2JfVmkgPSAoVmlbM10gJiAxKSAhPT0gMAoKICAgIC8vIFZfaSsxID0gVl9pID4+IDEKICAgIGZvciAoaiA9IDM7IGogPiAwOyBqLS0pIHsKICAgICAgVmlbal0gPSAoVmlbal0gPj4+IDEpIHwgKChWaVtqIC0gMV0gJiAxKSA8PCAzMSkKICAgIH0KICAgIFZpWzBdID0gVmlbMF0gPj4+IDEKCiAgICAvLyBJZiBMU0IoVl9pKSBpcyAxLCBWX2krMSA9IChWX2kgPj4gMSkgXiBSCiAgICBpZiAobHNiX1ZpKSB7CiAgICAgIFZpWzBdID0gVmlbMF0gXiAoMHhlMSA8PCAyNCkKICAgIH0KICB9CiAgdGhpcy5zdGF0ZSA9IGZyb21BcnJheShaaSkKfQpHSEFTSC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGJ1ZikgewogIHRoaXMuY2FjaGUgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCBidWZdKQogIHZhciBjaHVuawogIHdoaWxlICh0aGlzLmNhY2hlLmxlbmd0aCA+PSAxNikgewogICAgY2h1bmsgPSB0aGlzLmNhY2hlLnNsaWNlKDAsIDE2KQogICAgdGhpcy5jYWNoZSA9IHRoaXMuY2FjaGUuc2xpY2UoMTYpCiAgICB0aGlzLmdoYXNoKGNodW5rKQogIH0KfQpHSEFTSC5wcm90b3R5cGUuZmluYWwgPSBmdW5jdGlvbiAoYWJsLCBibCkgewogIGlmICh0aGlzLmNhY2hlLmxlbmd0aCkgewogICAgdGhpcy5naGFzaChCdWZmZXIuY29uY2F0KFt0aGlzLmNhY2hlLCB6ZXJvc10sIDE2KSkKICB9CiAgdGhpcy5naGFzaChmcm9tQXJyYXkoWwogICAgMCwgYWJsLAogICAgMCwgYmwKICBdKSkKICByZXR1cm4gdGhpcy5zdGF0ZQp9CgpmdW5jdGlvbiB0b0FycmF5IChidWYpIHsKICByZXR1cm4gWwogICAgYnVmLnJlYWRVSW50MzJCRSgwKSwKICAgIGJ1Zi5yZWFkVUludDMyQkUoNCksCiAgICBidWYucmVhZFVJbnQzMkJFKDgpLAogICAgYnVmLnJlYWRVSW50MzJCRSgxMikKICBdCn0KZnVuY3Rpb24gZnJvbUFycmF5IChvdXQpIHsKICBvdXQgPSBvdXQubWFwKGZpeHVwX3VpbnQzMikKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcigxNikKICBidWYud3JpdGVVSW50MzJCRShvdXRbMF0sIDApCiAgYnVmLndyaXRlVUludDMyQkUob3V0WzFdLCA0KQogIGJ1Zi53cml0ZVVJbnQzMkJFKG91dFsyXSwgOCkKICBidWYud3JpdGVVSW50MzJCRShvdXRbM10sIDEyKQogIHJldHVybiBidWYKfQp2YXIgdWludF9tYXggPSBNYXRoLnBvdygyLCAzMikKZnVuY3Rpb24gZml4dXBfdWludDMyICh4KSB7CiAgdmFyIHJldCwgeF9wb3MKICByZXQgPSB4ID4gdWludF9tYXggfHwgeCA8IDAgPyAoeF9wb3MgPSBNYXRoLmFicyh4KSAlIHVpbnRfbWF4LCB4IDwgMCA/IHVpbnRfbWF4IC0geF9wb3MgOiB4X3BvcykgOiB4CiAgcmV0dXJuIHJldAp9CmZ1bmN0aW9uIHhvciAoYSwgYikgewogIHJldHVybiBbCiAgICBhWzBdIF4gYlswXSwKICAgIGFbMV0gXiBiWzFdLAogICAgYVsyXSBeIGJbMl0sCiAgICBhWzNdIF4gYlszXQogIF0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSw1MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmV4cG9ydHNbJ2Flcy0xMjgtZWNiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMCwKICBtb2RlOiAnRUNCJywKICB0eXBlOiAnYmxvY2snCn0KZXhwb3J0c1snYWVzLTE5Mi1lY2InXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAwLAogIG1vZGU6ICdFQ0InLAogIHR5cGU6ICdibG9jaycKfQpleHBvcnRzWydhZXMtMjU2LWVjYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDAsCiAgbW9kZTogJ0VDQicsCiAgdHlwZTogJ2Jsb2NrJwp9CmV4cG9ydHNbJ2Flcy0xMjgtY2JjJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTYsCiAgbW9kZTogJ0NCQycsCiAgdHlwZTogJ2Jsb2NrJwp9CmV4cG9ydHNbJ2Flcy0xOTItY2JjJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDE5MiwKICBpdjogMTYsCiAgbW9kZTogJ0NCQycsCiAgdHlwZTogJ2Jsb2NrJwp9CmV4cG9ydHNbJ2Flcy0yNTYtY2JjJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDI1NiwKICBpdjogMTYsCiAgbW9kZTogJ0NCQycsCiAgdHlwZTogJ2Jsb2NrJwp9CmV4cG9ydHNbJ2FlczEyOCddID0gZXhwb3J0c1snYWVzLTEyOC1jYmMnXQpleHBvcnRzWydhZXMxOTInXSA9IGV4cG9ydHNbJ2Flcy0xOTItY2JjJ10KZXhwb3J0c1snYWVzMjU2J10gPSBleHBvcnRzWydhZXMtMjU2LWNiYyddCmV4cG9ydHNbJ2Flcy0xMjgtY2ZiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTYsCiAgbW9kZTogJ0NGQicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTkyLWNmYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTI1Ni1jZmInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAxNiwKICBtb2RlOiAnQ0ZCJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xMjgtY2ZiOCddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxMjgsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkI4JywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xOTItY2ZiOCddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkI4JywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0yNTYtY2ZiOCddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkI4JywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xMjgtY2ZiMSddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxMjgsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkIxJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xOTItY2ZiMSddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkIxJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0yNTYtY2ZiMSddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDE2LAogIG1vZGU6ICdDRkIxJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xMjgtb2ZiJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTYsCiAgbW9kZTogJ09GQicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTkyLW9mYiddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDE2LAogIG1vZGU6ICdPRkInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTI1Ni1vZmInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAxNiwKICBtb2RlOiAnT0ZCJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xMjgtY3RyJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTYsCiAgbW9kZTogJ0NUUicsCiAgdHlwZTogJ3N0cmVhbScKfQpleHBvcnRzWydhZXMtMTkyLWN0ciddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAxOTIsCiAgaXY6IDE2LAogIG1vZGU6ICdDVFInLAogIHR5cGU6ICdzdHJlYW0nCn0KZXhwb3J0c1snYWVzLTI1Ni1jdHInXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMjU2LAogIGl2OiAxNiwKICBtb2RlOiAnQ1RSJywKICB0eXBlOiAnc3RyZWFtJwp9CmV4cG9ydHNbJ2Flcy0xMjgtZ2NtJ10gPSB7CiAgY2lwaGVyOiAnQUVTJywKICBrZXk6IDEyOCwKICBpdjogMTIsCiAgbW9kZTogJ0dDTScsCiAgdHlwZTogJ2F1dGgnCn0KZXhwb3J0c1snYWVzLTE5Mi1nY20nXSA9IHsKICBjaXBoZXI6ICdBRVMnLAogIGtleTogMTkyLAogIGl2OiAxMiwKICBtb2RlOiAnR0NNJywKICB0eXBlOiAnYXV0aCcKfQpleHBvcnRzWydhZXMtMjU2LWdjbSddID0gewogIGNpcGhlcjogJ0FFUycsCiAga2V5OiAyNTYsCiAgaXY6IDEyLAogIG1vZGU6ICdHQ00nLAogIHR5cGU6ICdhdXRoJwp9Cgp9LHt9XSw1MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB4b3IgPSByZXF1aXJlKCdidWZmZXIteG9yJykKCmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBibG9jaykgewogIHZhciBkYXRhID0geG9yKGJsb2NrLCBzZWxmLl9wcmV2KQoKICBzZWxmLl9wcmV2ID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhkYXRhKQogIHJldHVybiBzZWxmLl9wcmV2Cn0KCmV4cG9ydHMuZGVjcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBibG9jaykgewogIHZhciBwYWQgPSBzZWxmLl9wcmV2CgogIHNlbGYuX3ByZXYgPSBibG9jawogIHZhciBvdXQgPSBzZWxmLl9jaXBoZXIuZGVjcnlwdEJsb2NrKGJsb2NrKQoKICByZXR1cm4geG9yKG91dCwgcGFkKQp9Cgp9LHsiYnVmZmVyLXhvciI6Nzh9XSw1MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHhvciA9IHJlcXVpcmUoJ2J1ZmZlci14b3InKQoKZXhwb3J0cy5lbmNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGRhdGEsIGRlY3J5cHQpIHsKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcignJykKICB2YXIgbGVuCgogIHdoaWxlIChkYXRhLmxlbmd0aCkgewogICAgaWYgKHNlbGYuX2NhY2hlLmxlbmd0aCA9PT0gMCkgewogICAgICBzZWxmLl9jYWNoZSA9IHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soc2VsZi5fcHJldikKICAgICAgc2VsZi5fcHJldiA9IG5ldyBCdWZmZXIoJycpCiAgICB9CgogICAgaWYgKHNlbGYuX2NhY2hlLmxlbmd0aCA8PSBkYXRhLmxlbmd0aCkgewogICAgICBsZW4gPSBzZWxmLl9jYWNoZS5sZW5ndGgKICAgICAgb3V0ID0gQnVmZmVyLmNvbmNhdChbb3V0LCBlbmNyeXB0U3RhcnQoc2VsZiwgZGF0YS5zbGljZSgwLCBsZW4pLCBkZWNyeXB0KV0pCiAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKGxlbikKICAgIH0gZWxzZSB7CiAgICAgIG91dCA9IEJ1ZmZlci5jb25jYXQoW291dCwgZW5jcnlwdFN0YXJ0KHNlbGYsIGRhdGEsIGRlY3J5cHQpXSkKICAgICAgYnJlYWsKICAgIH0KICB9CgogIHJldHVybiBvdXQKfQpmdW5jdGlvbiBlbmNyeXB0U3RhcnQgKHNlbGYsIGRhdGEsIGRlY3J5cHQpIHsKICB2YXIgbGVuID0gZGF0YS5sZW5ndGgKICB2YXIgb3V0ID0geG9yKGRhdGEsIHNlbGYuX2NhY2hlKQogIHNlbGYuX2NhY2hlID0gc2VsZi5fY2FjaGUuc2xpY2UobGVuKQogIHNlbGYuX3ByZXYgPSBCdWZmZXIuY29uY2F0KFtzZWxmLl9wcmV2LCBkZWNyeXB0ID8gZGF0YSA6IG91dF0pCiAgcmV0dXJuIG91dAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MCwiYnVmZmVyLXhvciI6Nzh9XSw1MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKZnVuY3Rpb24gZW5jcnlwdEJ5dGUgKHNlbGYsIGJ5dGVQYXJhbSwgZGVjcnlwdCkgewogIHZhciBwYWQKICB2YXIgaSA9IC0xCiAgdmFyIGxlbiA9IDgKICB2YXIgb3V0ID0gMAogIHZhciBiaXQsIHZhbHVlCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgcGFkID0gc2VsZi5fY2lwaGVyLmVuY3J5cHRCbG9jayhzZWxmLl9wcmV2KQogICAgYml0ID0gKGJ5dGVQYXJhbSAmICgxIDw8ICg3IC0gaSkpKSA/IDB4ODAgOiAwCiAgICB2YWx1ZSA9IHBhZFswXSBeIGJpdAogICAgb3V0ICs9ICgodmFsdWUgJiAweDgwKSA+PiAoaSAlIDgpKQogICAgc2VsZi5fcHJldiA9IHNoaWZ0SW4oc2VsZi5fcHJldiwgZGVjcnlwdCA/IGJpdCA6IHZhbHVlKQogIH0KICByZXR1cm4gb3V0Cn0KZXhwb3J0cy5lbmNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGNodW5rLCBkZWNyeXB0KSB7CiAgdmFyIGxlbiA9IGNodW5rLmxlbmd0aAogIHZhciBvdXQgPSBuZXcgQnVmZmVyKGxlbikKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGxlbikgewogICAgb3V0W2ldID0gZW5jcnlwdEJ5dGUoc2VsZiwgY2h1bmtbaV0sIGRlY3J5cHQpCiAgfQogIHJldHVybiBvdXQKfQpmdW5jdGlvbiBzaGlmdEluIChidWZmZXIsIHZhbHVlKSB7CiAgdmFyIGxlbiA9IGJ1ZmZlci5sZW5ndGgKICB2YXIgaSA9IC0xCiAgdmFyIG91dCA9IG5ldyBCdWZmZXIoYnVmZmVyLmxlbmd0aCkKICBidWZmZXIgPSBCdWZmZXIuY29uY2F0KFtidWZmZXIsIG5ldyBCdWZmZXIoW3ZhbHVlXSldKQogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIG91dFtpXSA9IGJ1ZmZlcltpXSA8PCAxIHwgYnVmZmVyW2kgKyAxXSA+PiAoNykKICB9CiAgcmV0dXJuIG91dAp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDU0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewpmdW5jdGlvbiBlbmNyeXB0Qnl0ZSAoc2VsZiwgYnl0ZVBhcmFtLCBkZWNyeXB0KSB7CiAgdmFyIHBhZCA9IHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soc2VsZi5fcHJldikKICB2YXIgb3V0ID0gcGFkWzBdIF4gYnl0ZVBhcmFtCiAgc2VsZi5fcHJldiA9IEJ1ZmZlci5jb25jYXQoW3NlbGYuX3ByZXYuc2xpY2UoMSksIG5ldyBCdWZmZXIoW2RlY3J5cHQgPyBieXRlUGFyYW0gOiBvdXRdKV0pCiAgcmV0dXJuIG91dAp9CmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBjaHVuaywgZGVjcnlwdCkgewogIHZhciBsZW4gPSBjaHVuay5sZW5ndGgKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcihsZW4pCiAgdmFyIGkgPSAtMQogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIG91dFtpXSA9IGVuY3J5cHRCeXRlKHNlbGYsIGNodW5rW2ldLCBkZWNyeXB0KQogIH0KICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwfV0sNTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciB4b3IgPSByZXF1aXJlKCdidWZmZXIteG9yJykKCmZ1bmN0aW9uIGluY3IzMiAoaXYpIHsKICB2YXIgbGVuID0gaXYubGVuZ3RoCiAgdmFyIGl0ZW0KICB3aGlsZSAobGVuLS0pIHsKICAgIGl0ZW0gPSBpdi5yZWFkVUludDgobGVuKQogICAgaWYgKGl0ZW0gPT09IDI1NSkgewogICAgICBpdi53cml0ZVVJbnQ4KDAsIGxlbikKICAgIH0gZWxzZSB7CiAgICAgIGl0ZW0rKwogICAgICBpdi53cml0ZVVJbnQ4KGl0ZW0sIGxlbikKICAgICAgYnJlYWsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGdldEJsb2NrIChzZWxmKSB7CiAgdmFyIG91dCA9IHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soc2VsZi5fcHJldikKICBpbmNyMzIoc2VsZi5fcHJldikKICByZXR1cm4gb3V0Cn0KCmV4cG9ydHMuZW5jcnlwdCA9IGZ1bmN0aW9uIChzZWxmLCBjaHVuaykgewogIHdoaWxlIChzZWxmLl9jYWNoZS5sZW5ndGggPCBjaHVuay5sZW5ndGgpIHsKICAgIHNlbGYuX2NhY2hlID0gQnVmZmVyLmNvbmNhdChbc2VsZi5fY2FjaGUsIGdldEJsb2NrKHNlbGYpXSkKICB9CiAgdmFyIHBhZCA9IHNlbGYuX2NhY2hlLnNsaWNlKDAsIGNodW5rLmxlbmd0aCkKICBzZWxmLl9jYWNoZSA9IHNlbGYuX2NhY2hlLnNsaWNlKGNodW5rLmxlbmd0aCkKICByZXR1cm4geG9yKGNodW5rLCBwYWQpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwLCJidWZmZXIteG9yIjo3OH1dLDU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKZXhwb3J0cy5lbmNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGJsb2NrKSB7CiAgcmV0dXJuIHNlbGYuX2NpcGhlci5lbmNyeXB0QmxvY2soYmxvY2spCn0KZXhwb3J0cy5kZWNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGJsb2NrKSB7CiAgcmV0dXJuIHNlbGYuX2NpcGhlci5kZWNyeXB0QmxvY2soYmxvY2spCn0KCn0se31dLDU3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgeG9yID0gcmVxdWlyZSgnYnVmZmVyLXhvcicpCgpmdW5jdGlvbiBnZXRCbG9jayAoc2VsZikgewogIHNlbGYuX3ByZXYgPSBzZWxmLl9jaXBoZXIuZW5jcnlwdEJsb2NrKHNlbGYuX3ByZXYpCiAgcmV0dXJuIHNlbGYuX3ByZXYKfQoKZXhwb3J0cy5lbmNyeXB0ID0gZnVuY3Rpb24gKHNlbGYsIGNodW5rKSB7CiAgd2hpbGUgKHNlbGYuX2NhY2hlLmxlbmd0aCA8IGNodW5rLmxlbmd0aCkgewogICAgc2VsZi5fY2FjaGUgPSBCdWZmZXIuY29uY2F0KFtzZWxmLl9jYWNoZSwgZ2V0QmxvY2soc2VsZildKQogIH0KCiAgdmFyIHBhZCA9IHNlbGYuX2NhY2hlLnNsaWNlKDAsIGNodW5rLmxlbmd0aCkKICBzZWxmLl9jYWNoZSA9IHNlbGYuX2NhY2hlLnNsaWNlKGNodW5rLmxlbmd0aCkKICByZXR1cm4geG9yKGNodW5rLCBwYWQpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwLCJidWZmZXIteG9yIjo3OH1dLDU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYWVzID0gcmVxdWlyZSgnLi9hZXMnKQp2YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnY2lwaGVyLWJhc2UnKQp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCgppbmhlcml0cyhTdHJlYW1DaXBoZXIsIFRyYW5zZm9ybSkKbW9kdWxlLmV4cG9ydHMgPSBTdHJlYW1DaXBoZXIKZnVuY3Rpb24gU3RyZWFtQ2lwaGVyIChtb2RlLCBrZXksIGl2LCBkZWNyeXB0KSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFN0cmVhbUNpcGhlcikpIHsKICAgIHJldHVybiBuZXcgU3RyZWFtQ2lwaGVyKG1vZGUsIGtleSwgaXYpCiAgfQogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5fY2lwaGVyID0gbmV3IGFlcy5BRVMoa2V5KQogIHRoaXMuX3ByZXYgPSBuZXcgQnVmZmVyKGl2Lmxlbmd0aCkKICB0aGlzLl9jYWNoZSA9IG5ldyBCdWZmZXIoJycpCiAgdGhpcy5fc2VjQ2FjaGUgPSBuZXcgQnVmZmVyKCcnKQogIHRoaXMuX2RlY3J5cHQgPSBkZWNyeXB0CiAgaXYuY29weSh0aGlzLl9wcmV2KQogIHRoaXMuX21vZGUgPSBtb2RlCn0KU3RyZWFtQ2lwaGVyLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGNodW5rKSB7CiAgcmV0dXJuIHRoaXMuX21vZGUuZW5jcnlwdCh0aGlzLCBjaHVuaywgdGhpcy5fZGVjcnlwdCkKfQpTdHJlYW1DaXBoZXIucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9jaXBoZXIuc2NydWIoKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hZXMiOjQ0LCJidWZmZXIiOjcwLCJjaXBoZXItYmFzZSI6NzksImluaGVyaXRzIjoxMjl9XSw1OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBlYnRrID0gcmVxdWlyZSgnZXZwX2J5dGVzdG9rZXknKQp2YXIgYWVzID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1hZXMvYnJvd3NlcicpCnZhciBERVMgPSByZXF1aXJlKCdicm93c2VyaWZ5LWRlcycpCnZhciBkZXNNb2RlcyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktZGVzL21vZGVzJykKdmFyIGFlc01vZGVzID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1hZXMvbW9kZXMnKQpmdW5jdGlvbiBjcmVhdGVDaXBoZXIgKHN1aXRlLCBwYXNzd29yZCkgewogIHZhciBrZXlMZW4sIGl2TGVuCiAgc3VpdGUgPSBzdWl0ZS50b0xvd2VyQ2FzZSgpCiAgaWYgKGFlc01vZGVzW3N1aXRlXSkgewogICAga2V5TGVuID0gYWVzTW9kZXNbc3VpdGVdLmtleQogICAgaXZMZW4gPSBhZXNNb2Rlc1tzdWl0ZV0uaXYKICB9IGVsc2UgaWYgKGRlc01vZGVzW3N1aXRlXSkgewogICAga2V5TGVuID0gZGVzTW9kZXNbc3VpdGVdLmtleSAqIDgKICAgIGl2TGVuID0gZGVzTW9kZXNbc3VpdGVdLml2CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQogIHZhciBrZXlzID0gZWJ0ayhwYXNzd29yZCwgZmFsc2UsIGtleUxlbiwgaXZMZW4pCiAgcmV0dXJuIGNyZWF0ZUNpcGhlcml2KHN1aXRlLCBrZXlzLmtleSwga2V5cy5pdikKfQpmdW5jdGlvbiBjcmVhdGVEZWNpcGhlciAoc3VpdGUsIHBhc3N3b3JkKSB7CiAgdmFyIGtleUxlbiwgaXZMZW4KICBzdWl0ZSA9IHN1aXRlLnRvTG93ZXJDYXNlKCkKICBpZiAoYWVzTW9kZXNbc3VpdGVdKSB7CiAgICBrZXlMZW4gPSBhZXNNb2Rlc1tzdWl0ZV0ua2V5CiAgICBpdkxlbiA9IGFlc01vZGVzW3N1aXRlXS5pdgogIH0gZWxzZSBpZiAoZGVzTW9kZXNbc3VpdGVdKSB7CiAgICBrZXlMZW4gPSBkZXNNb2Rlc1tzdWl0ZV0ua2V5ICogOAogICAgaXZMZW4gPSBkZXNNb2Rlc1tzdWl0ZV0uaXYKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBzdWl0ZSB0eXBlJykKICB9CiAgdmFyIGtleXMgPSBlYnRrKHBhc3N3b3JkLCBmYWxzZSwga2V5TGVuLCBpdkxlbikKICByZXR1cm4gY3JlYXRlRGVjaXBoZXJpdihzdWl0ZSwga2V5cy5rZXksIGtleXMuaXYpCn0KCmZ1bmN0aW9uIGNyZWF0ZUNpcGhlcml2IChzdWl0ZSwga2V5LCBpdikgewogIHN1aXRlID0gc3VpdGUudG9Mb3dlckNhc2UoKQogIGlmIChhZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIHJldHVybiBhZXMuY3JlYXRlQ2lwaGVyaXYoc3VpdGUsIGtleSwgaXYpCiAgfSBlbHNlIGlmIChkZXNNb2Rlc1tzdWl0ZV0pIHsKICAgIHJldHVybiBuZXcgREVTKHsKICAgICAga2V5OiBrZXksCiAgICAgIGl2OiBpdiwKICAgICAgbW9kZTogc3VpdGUKICAgIH0pCiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgc3VpdGUgdHlwZScpCiAgfQp9CmZ1bmN0aW9uIGNyZWF0ZURlY2lwaGVyaXYgKHN1aXRlLCBrZXksIGl2KSB7CiAgc3VpdGUgPSBzdWl0ZS50b0xvd2VyQ2FzZSgpCiAgaWYgKGFlc01vZGVzW3N1aXRlXSkgewogICAgcmV0dXJuIGFlcy5jcmVhdGVEZWNpcGhlcml2KHN1aXRlLCBrZXksIGl2KQogIH0gZWxzZSBpZiAoZGVzTW9kZXNbc3VpdGVdKSB7CiAgICByZXR1cm4gbmV3IERFUyh7CiAgICAgIGtleToga2V5LAogICAgICBpdjogaXYsCiAgICAgIG1vZGU6IHN1aXRlLAogICAgICBkZWNyeXB0OiB0cnVlCiAgICB9KQogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHN1aXRlIHR5cGUnKQogIH0KfQpleHBvcnRzLmNyZWF0ZUNpcGhlciA9IGV4cG9ydHMuQ2lwaGVyID0gY3JlYXRlQ2lwaGVyCmV4cG9ydHMuY3JlYXRlQ2lwaGVyaXYgPSBleHBvcnRzLkNpcGhlcml2ID0gY3JlYXRlQ2lwaGVyaXYKZXhwb3J0cy5jcmVhdGVEZWNpcGhlciA9IGV4cG9ydHMuRGVjaXBoZXIgPSBjcmVhdGVEZWNpcGhlcgpleHBvcnRzLmNyZWF0ZURlY2lwaGVyaXYgPSBleHBvcnRzLkRlY2lwaGVyaXYgPSBjcmVhdGVEZWNpcGhlcml2CmZ1bmN0aW9uIGdldENpcGhlcnMgKCkgewogIHJldHVybiBPYmplY3Qua2V5cyhkZXNNb2RlcykuY29uY2F0KGFlcy5nZXRDaXBoZXJzKCkpCn0KZXhwb3J0cy5saXN0Q2lwaGVycyA9IGV4cG9ydHMuZ2V0Q2lwaGVycyA9IGdldENpcGhlcnMKCn0seyJicm93c2VyaWZ5LWFlcy9icm93c2VyIjo0NiwiYnJvd3NlcmlmeS1hZXMvbW9kZXMiOjUwLCJicm93c2VyaWZ5LWRlcyI6NjAsImJyb3dzZXJpZnktZGVzL21vZGVzIjo2MSwiZXZwX2J5dGVzdG9rZXkiOjExOX1dLDYwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgQ2lwaGVyQmFzZSA9IHJlcXVpcmUoJ2NpcGhlci1iYXNlJykKdmFyIGRlcyA9IHJlcXVpcmUoJ2Rlcy5qcycpCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKCnZhciBtb2RlcyA9IHsKICAnZGVzLWVkZTMtY2JjJzogZGVzLkNCQy5pbnN0YW50aWF0ZShkZXMuRURFKSwKICAnZGVzLWVkZTMnOiBkZXMuRURFLAogICdkZXMtZWRlLWNiYyc6IGRlcy5DQkMuaW5zdGFudGlhdGUoZGVzLkVERSksCiAgJ2Rlcy1lZGUnOiBkZXMuRURFLAogICdkZXMtY2JjJzogZGVzLkNCQy5pbnN0YW50aWF0ZShkZXMuREVTKSwKICAnZGVzLWVjYic6IGRlcy5ERVMKfQptb2Rlcy5kZXMgPSBtb2Rlc1snZGVzLWNiYyddCm1vZGVzLmRlczMgPSBtb2Rlc1snZGVzLWVkZTMtY2JjJ10KbW9kdWxlLmV4cG9ydHMgPSBERVMKaW5oZXJpdHMoREVTLCBDaXBoZXJCYXNlKQpmdW5jdGlvbiBERVMgKG9wdHMpIHsKICBDaXBoZXJCYXNlLmNhbGwodGhpcykKICB2YXIgbW9kZU5hbWUgPSBvcHRzLm1vZGUudG9Mb3dlckNhc2UoKQogIHZhciBtb2RlID0gbW9kZXNbbW9kZU5hbWVdCiAgdmFyIHR5cGUKICBpZiAob3B0cy5kZWNyeXB0KSB7CiAgICB0eXBlID0gJ2RlY3J5cHQnCiAgfSBlbHNlIHsKICAgIHR5cGUgPSAnZW5jcnlwdCcKICB9CiAgdmFyIGtleSA9IG9wdHMua2V5CiAgaWYgKG1vZGVOYW1lID09PSAnZGVzLWVkZScgfHwgbW9kZU5hbWUgPT09ICdkZXMtZWRlLWNiYycpIHsKICAgIGtleSA9IEJ1ZmZlci5jb25jYXQoW2tleSwga2V5LnNsaWNlKDAsIDgpXSkKICB9CiAgdmFyIGl2ID0gb3B0cy5pdgogIHRoaXMuX2RlcyA9IG1vZGUuY3JlYXRlKHsKICAgIGtleToga2V5LAogICAgaXY6IGl2LAogICAgdHlwZTogdHlwZQogIH0pCn0KREVTLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHsKICByZXR1cm4gbmV3IEJ1ZmZlcih0aGlzLl9kZXMudXBkYXRlKGRhdGEpKQp9CkRFUy5wcm90b3R5cGUuX2ZpbmFsID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBuZXcgQnVmZmVyKHRoaXMuX2Rlcy5maW5hbCgpKQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MCwiY2lwaGVyLWJhc2UiOjc5LCJkZXMuanMiOjg3LCJpbmhlcml0cyI6MTI5fV0sNjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzWydkZXMtZWNiJ10gPSB7CiAga2V5OiA4LAogIGl2OiAwCn0KZXhwb3J0c1snZGVzLWNiYyddID0gZXhwb3J0cy5kZXMgPSB7CiAga2V5OiA4LAogIGl2OiA4Cn0KZXhwb3J0c1snZGVzLWVkZTMtY2JjJ10gPSBleHBvcnRzLmRlczMgPSB7CiAga2V5OiAyNCwKICBpdjogOAp9CmV4cG9ydHNbJ2Rlcy1lZGUzJ10gPSB7CiAga2V5OiAyNCwKICBpdjogMAp9CmV4cG9ydHNbJ2Rlcy1lZGUtY2JjJ10gPSB7CiAga2V5OiAxNiwKICBpdjogOAp9CmV4cG9ydHNbJ2Rlcy1lZGUnXSA9IHsKICBrZXk6IDE2LAogIGl2OiAwCn0KCn0se31dLDYyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYm4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgcmFuZG9tQnl0ZXMgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpOwptb2R1bGUuZXhwb3J0cyA9IGNydDsKZnVuY3Rpb24gYmxpbmQocHJpdikgewogIHZhciByID0gZ2V0cihwcml2KTsKICB2YXIgYmxpbmRlciA9IHIudG9SZWQoYm4ubW9udChwcml2Lm1vZHVsdXMpKQogIC5yZWRQb3cobmV3IGJuKHByaXYucHVibGljRXhwb25lbnQpKS5mcm9tUmVkKCk7CiAgcmV0dXJuIHsKICAgIGJsaW5kZXI6IGJsaW5kZXIsCiAgICB1bmJsaW5kZXI6ci5pbnZtKHByaXYubW9kdWx1cykKICB9Owp9CmZ1bmN0aW9uIGNydChtc2csIHByaXYpIHsKICB2YXIgYmxpbmRzID0gYmxpbmQocHJpdik7CiAgdmFyIGxlbiA9IHByaXYubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgdmFyIG1vZCA9IGJuLm1vbnQocHJpdi5tb2R1bHVzKTsKICB2YXIgYmxpbmRlZCA9IG5ldyBibihtc2cpLm11bChibGluZHMuYmxpbmRlcikudW1vZChwcml2Lm1vZHVsdXMpOwogIHZhciBjMSA9IGJsaW5kZWQudG9SZWQoYm4ubW9udChwcml2LnByaW1lMSkpOwogIHZhciBjMiA9IGJsaW5kZWQudG9SZWQoYm4ubW9udChwcml2LnByaW1lMikpOwogIHZhciBxaW52ID0gcHJpdi5jb2VmZmljaWVudDsKICB2YXIgcCA9IHByaXYucHJpbWUxOwogIHZhciBxID0gcHJpdi5wcmltZTI7CiAgdmFyIG0xID0gYzEucmVkUG93KHByaXYuZXhwb25lbnQxKTsKICB2YXIgbTIgPSBjMi5yZWRQb3cocHJpdi5leHBvbmVudDIpOwogIG0xID0gbTEuZnJvbVJlZCgpOwogIG0yID0gbTIuZnJvbVJlZCgpOwogIHZhciBoID0gbTEuaXN1YihtMikuaW11bChxaW52KS51bW9kKHApOwogIGguaW11bChxKTsKICBtMi5pYWRkKGgpOwogIHJldHVybiBuZXcgQnVmZmVyKG0yLmltdWwoYmxpbmRzLnVuYmxpbmRlcikudW1vZChwcml2Lm1vZHVsdXMpLnRvQXJyYXkoZmFsc2UsIGxlbikpOwp9CmNydC5nZXRyID0gZ2V0cjsKZnVuY3Rpb24gZ2V0cihwcml2KSB7CiAgdmFyIGxlbiA9IHByaXYubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgdmFyIHIgPSBuZXcgYm4ocmFuZG9tQnl0ZXMobGVuKSk7CiAgd2hpbGUgKHIuY21wKHByaXYubW9kdWx1cykgPj0gIDAgfHwgIXIudW1vZChwcml2LnByaW1lMSkgfHwgIXIudW1vZChwcml2LnByaW1lMikpIHsKICAgIHIgPSBuZXcgYm4ocmFuZG9tQnl0ZXMobGVuKSk7CiAgfQogIHJldHVybiByOwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYm4uanMiOjQxLCJidWZmZXIiOjcwLCJyYW5kb21ieXRlcyI6MTQ4fV0sNjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JwpleHBvcnRzWydSU0EtU0hBMjI0J10gPSBleHBvcnRzLnNoYTIyNFdpdGhSU0FFbmNyeXB0aW9uID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdzaGEyMjQnLAogIGlkOiBuZXcgQnVmZmVyKCczMDJkMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDQwNTAwMDQxYycsICdoZXgnKQp9CmV4cG9ydHNbJ1JTQS1TSEEyNTYnXSA9IGV4cG9ydHMuc2hhMjU2V2l0aFJTQUVuY3J5cHRpb24gPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ3NoYTI1NicsCiAgaWQ6IG5ldyBCdWZmZXIoJzMwMzEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMTA1MDAwNDIwJywgJ2hleCcpCn0KZXhwb3J0c1snUlNBLVNIQTM4NCddID0gZXhwb3J0cy5zaGEzODRXaXRoUlNBRW5jcnlwdGlvbiA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAnc2hhMzg0JywKICBpZDogbmV3IEJ1ZmZlcignMzA0MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAyMDUwMDA0MzAnLCAnaGV4JykKfQpleHBvcnRzWydSU0EtU0hBNTEyJ10gPSBleHBvcnRzLnNoYTUxMldpdGhSU0FFbmNyeXB0aW9uID0gewogIHNpZ246ICdyc2EnLAogIGhhc2g6ICdzaGE1MTInLAogIGlkOiBuZXcgQnVmZmVyKCczMDUxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDMwNTAwMDQ0MCcsICdoZXgnKQp9CmV4cG9ydHNbJ1JTQS1TSEExJ10gPSB7CiAgc2lnbjogJ3JzYScsCiAgaGFzaDogJ3NoYTEnLAogIGlkOiBuZXcgQnVmZmVyKCczMDIxMzAwOTA2MDUyYjBlMDMwMjFhMDUwMDA0MTQnLCAnaGV4JykKfQpleHBvcnRzWydlY2RzYS13aXRoLVNIQTEnXSA9IHsKICBzaWduOiAnZWNkc2EnLAogIGhhc2g6ICdzaGExJywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KCmV4cG9ydHMuRFNBID0gZXhwb3J0c1snRFNBLVNIQTEnXSA9IGV4cG9ydHNbJ0RTQS1TSEEnXSA9IHsKICBzaWduOiAnZHNhJywKICBoYXNoOiAnc2hhMScsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CmV4cG9ydHNbJ0RTQS1TSEEyMjQnXSA9IGV4cG9ydHNbJ0RTQS1XSVRILVNIQTIyNCddID0gewogIHNpZ246ICdkc2EnLAogIGhhc2g6ICdzaGEyMjQnLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydEU0EtU0hBMjU2J10gPSBleHBvcnRzWydEU0EtV0lUSC1TSEEyNTYnXSA9IHsKICBzaWduOiAnZHNhJywKICBoYXNoOiAnc2hhMjU2JywKICBpZDogbmV3IEJ1ZmZlcignJywgJ2hleCcpCn0KZXhwb3J0c1snRFNBLVNIQTM4NCddID0gZXhwb3J0c1snRFNBLVdJVEgtU0hBMzg0J10gPSB7CiAgc2lnbjogJ2RzYScsCiAgaGFzaDogJ3NoYTM4NCcsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CmV4cG9ydHNbJ0RTQS1TSEE1MTInXSA9IGV4cG9ydHNbJ0RTQS1XSVRILVNIQTUxMiddID0gewogIHNpZ246ICdkc2EnLAogIGhhc2g6ICdzaGE1MTInLAogIGlkOiBuZXcgQnVmZmVyKCcnLCAnaGV4JykKfQpleHBvcnRzWydEU0EtUklQRU1EMTYwJ10gPSB7CiAgc2lnbjogJ2RzYScsCiAgaGFzaDogJ3JtZDE2MCcsCiAgaWQ6IG5ldyBCdWZmZXIoJycsICdoZXgnKQp9CmV4cG9ydHNbJ1JTQS1SSVBFTUQxNjAnXSA9IGV4cG9ydHMucmlwZW1kMTYwV2l0aFJTQSA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAncm1kMTYwJywKICBpZDogbmV3IEJ1ZmZlcignMzAyMTMwMDkwNjA1MmIyNDAzMDIwMTA1MDAwNDE0JywgJ2hleCcpCn0KZXhwb3J0c1snUlNBLU1ENSddID0gZXhwb3J0cy5tZDVXaXRoUlNBRW5jcnlwdGlvbiA9IHsKICBzaWduOiAncnNhJywKICBoYXNoOiAnbWQ1JywKICBpZDogbmV3IEJ1ZmZlcignMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwNTA1MDAwNDEwJywgJ2hleCcpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwfV0sNjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBfYWxnb3MgPSByZXF1aXJlKCcuL2FsZ29zJykKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIHNpZ24gPSByZXF1aXJlKCcuL3NpZ24nKQp2YXIgc3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJykKdmFyIHZlcmlmeSA9IHJlcXVpcmUoJy4vdmVyaWZ5JykKCnZhciBhbGdvcyA9IHt9Ck9iamVjdC5rZXlzKF9hbGdvcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgYWxnb3Nba2V5XSA9IGFsZ29zW2tleS50b0xvd2VyQ2FzZSgpXSA9IF9hbGdvc1trZXldCn0pCgpmdW5jdGlvbiBTaWduIChhbGdvcml0aG0pIHsKICBzdHJlYW0uV3JpdGFibGUuY2FsbCh0aGlzKQoKICB2YXIgZGF0YSA9IGFsZ29zW2FsZ29yaXRobV0KICBpZiAoIWRhdGEpIHsKICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBtZXNzYWdlIGRpZ2VzdCcpCiAgfQoKICB0aGlzLl9oYXNoVHlwZSA9IGRhdGEuaGFzaAogIHRoaXMuX2hhc2ggPSBjcmVhdGVIYXNoKGRhdGEuaGFzaCkKICB0aGlzLl90YWcgPSBkYXRhLmlkCiAgdGhpcy5fc2lnblR5cGUgPSBkYXRhLnNpZ24KfQppbmhlcml0cyhTaWduLCBzdHJlYW0uV3JpdGFibGUpCgpTaWduLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiBfd3JpdGUgKGRhdGEsIF8sIGRvbmUpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQogIGRvbmUoKQp9CgpTaWduLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUgKGRhdGEsIGVuYykgewogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgIGRhdGEgPSBuZXcgQnVmZmVyKGRhdGEsIGVuYykKICB9CgogIHRoaXMuX2hhc2gudXBkYXRlKGRhdGEpCiAgcmV0dXJuIHRoaXMKfQoKU2lnbi5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ25NZXRob2QgKGtleSwgZW5jKSB7CiAgdGhpcy5lbmQoKQogIHZhciBoYXNoID0gdGhpcy5faGFzaC5kaWdlc3QoKQogIHZhciBzaWcgPSBzaWduKEJ1ZmZlci5jb25jYXQoW3RoaXMuX3RhZywgaGFzaF0pLCBrZXksIHRoaXMuX2hhc2hUeXBlLCB0aGlzLl9zaWduVHlwZSkKCiAgcmV0dXJuIGVuYyA/IHNpZy50b1N0cmluZyhlbmMpIDogc2lnCn0KCmZ1bmN0aW9uIFZlcmlmeSAoYWxnb3JpdGhtKSB7CiAgc3RyZWFtLldyaXRhYmxlLmNhbGwodGhpcykKCiAgdmFyIGRhdGEgPSBhbGdvc1thbGdvcml0aG1dCiAgaWYgKCFkYXRhKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbWVzc2FnZSBkaWdlc3QnKQogIH0KCiAgdGhpcy5faGFzaCA9IGNyZWF0ZUhhc2goZGF0YS5oYXNoKQogIHRoaXMuX3RhZyA9IGRhdGEuaWQKICB0aGlzLl9zaWduVHlwZSA9IGRhdGEuc2lnbgp9CmluaGVyaXRzKFZlcmlmeSwgc3RyZWFtLldyaXRhYmxlKQoKVmVyaWZ5LnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiBfd3JpdGUgKGRhdGEsIF8sIGRvbmUpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhKQoKICBkb25lKCkKfQoKVmVyaWZ5LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUgKGRhdGEsIGVuYykgewogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgIGRhdGEgPSBuZXcgQnVmZmVyKGRhdGEsIGVuYykKICB9CgogIHRoaXMuX2hhc2gudXBkYXRlKGRhdGEpCiAgcmV0dXJuIHRoaXMKfQoKVmVyaWZ5LnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnlNZXRob2QgKGtleSwgc2lnLCBlbmMpIHsKICBpZiAodHlwZW9mIHNpZyA9PT0gJ3N0cmluZycpIHsKICAgIHNpZyA9IG5ldyBCdWZmZXIoc2lnLCBlbmMpCiAgfQoKICB0aGlzLmVuZCgpCiAgdmFyIGhhc2ggPSB0aGlzLl9oYXNoLmRpZ2VzdCgpCgogIHJldHVybiB2ZXJpZnkoc2lnLCBCdWZmZXIuY29uY2F0KFt0aGlzLl90YWcsIGhhc2hdKSwga2V5LCB0aGlzLl9zaWduVHlwZSkKfQoKZnVuY3Rpb24gY3JlYXRlU2lnbiAoYWxnb3JpdGhtKSB7CiAgcmV0dXJuIG5ldyBTaWduKGFsZ29yaXRobSkKfQoKZnVuY3Rpb24gY3JlYXRlVmVyaWZ5IChhbGdvcml0aG0pIHsKICByZXR1cm4gbmV3IFZlcmlmeShhbGdvcml0aG0pCn0KCm1vZHVsZS5leHBvcnRzID0gewogIFNpZ246IGNyZWF0ZVNpZ24sCiAgVmVyaWZ5OiBjcmVhdGVWZXJpZnksCiAgY3JlYXRlU2lnbjogY3JlYXRlU2lnbiwKICBjcmVhdGVWZXJpZnk6IGNyZWF0ZVZlcmlmeQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9hbGdvcyI6NjMsIi4vc2lnbiI6NjYsIi4vdmVyaWZ5Ijo2NywiYnVmZmVyIjo3MCwiY3JlYXRlLWhhc2giOjgyLCJpbmhlcml0cyI6MTI5LCJzdHJlYW0iOjE3MX1dLDY1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnCmV4cG9ydHNbJzEuMy4xMzIuMC4xMCddID0gJ3NlY3AyNTZrMScKCmV4cG9ydHNbJzEuMy4xMzIuMC4zMyddID0gJ3AyMjQnCgpleHBvcnRzWycxLjIuODQwLjEwMDQ1LjMuMS4xJ10gPSAncDE5MicKCmV4cG9ydHNbJzEuMi44NDAuMTAwNDUuMy4xLjcnXSA9ICdwMjU2JwoKZXhwb3J0c1snMS4zLjEzMi4wLjM0J10gPSAncDM4NCcKCmV4cG9ydHNbJzEuMy4xMzIuMC4zNSddID0gJ3A1MjEnCgp9LHt9XSw2NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLy8gbXVjaCBvZiB0aGlzIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L3NlbGYtc2lnbmVkL2Jsb2IvZ2gtcGFnZXMvbGliL3JzYS5qcwp2YXIgY3JlYXRlSG1hYyA9IHJlcXVpcmUoJ2NyZWF0ZS1obWFjJykKdmFyIGNydCA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktcnNhJykKdmFyIGN1cnZlcyA9IHJlcXVpcmUoJy4vY3VydmVzJykKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnZWxsaXB0aWMnKQp2YXIgcGFyc2VLZXlzID0gcmVxdWlyZSgncGFyc2UtYXNuMScpCgp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpCnZhciBFQyA9IGVsbGlwdGljLmVjCgpmdW5jdGlvbiBzaWduIChoYXNoLCBrZXksIGhhc2hUeXBlLCBzaWduVHlwZSkgewogIHZhciBwcml2ID0gcGFyc2VLZXlzKGtleSkKICBpZiAocHJpdi5jdXJ2ZSkgewogICAgaWYgKHNpZ25UeXBlICE9PSAnZWNkc2EnKSB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHByaXZhdGUga2V5IHR5cGUnKQoKICAgIHJldHVybiBlY1NpZ24oaGFzaCwgcHJpdikKICB9IGVsc2UgaWYgKHByaXYudHlwZSA9PT0gJ2RzYScpIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ2RzYScpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBwcml2YXRlIGtleSB0eXBlJykKICAgIH0KICAgIHJldHVybiBkc2FTaWduKGhhc2gsIHByaXYsIGhhc2hUeXBlKQogIH0gZWxzZSB7CiAgICBpZiAoc2lnblR5cGUgIT09ICdyc2EnKSB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHByaXZhdGUga2V5IHR5cGUnKQogIH0KCiAgdmFyIGxlbiA9IHByaXYubW9kdWx1cy5ieXRlTGVuZ3RoKCkKICB2YXIgcGFkID0gWyAwLCAxIF0KICB3aGlsZSAoaGFzaC5sZW5ndGggKyBwYWQubGVuZ3RoICsgMSA8IGxlbikgewogICAgcGFkLnB1c2goMHhmZikKICB9CiAgcGFkLnB1c2goMHgwMCkKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGhhc2gubGVuZ3RoKSB7CiAgICBwYWQucHVzaChoYXNoW2ldKQogIH0KCiAgdmFyIG91dCA9IGNydChwYWQsIHByaXYpCiAgcmV0dXJuIG91dAp9CgpmdW5jdGlvbiBlY1NpZ24gKGhhc2gsIHByaXYpIHsKICB2YXIgY3VydmVJZCA9IGN1cnZlc1twcml2LmN1cnZlLmpvaW4oJy4nKV0KICBpZiAoIWN1cnZlSWQpIHRocm93IG5ldyBFcnJvcigndW5rbm93biBjdXJ2ZSAnICsgcHJpdi5jdXJ2ZS5qb2luKCcuJykpCgogIHZhciBjdXJ2ZSA9IG5ldyBFQyhjdXJ2ZUlkKQogIHZhciBrZXkgPSBjdXJ2ZS5nZW5LZXlQYWlyKCkKCiAga2V5Ll9pbXBvcnRQcml2YXRlKHByaXYucHJpdmF0ZUtleSkKICB2YXIgb3V0ID0ga2V5LnNpZ24oaGFzaCkKCiAgcmV0dXJuIG5ldyBCdWZmZXIob3V0LnRvREVSKCkpCn0KCmZ1bmN0aW9uIGRzYVNpZ24gKGhhc2gsIHByaXYsIGFsZ28pIHsKICB2YXIgeCA9IHByaXYucGFyYW1zLnByaXZfa2V5CiAgdmFyIHAgPSBwcml2LnBhcmFtcy5wCiAgdmFyIHEgPSBwcml2LnBhcmFtcy5xCiAgdmFyIGcgPSBwcml2LnBhcmFtcy5nCiAgdmFyIHIgPSBuZXcgQk4oMCkKICB2YXIgawogIHZhciBIID0gYml0czJpbnQoaGFzaCwgcSkubW9kKHEpCiAgdmFyIHMgPSBmYWxzZQogIHZhciBrdiA9IGdldEtleSh4LCBxLCBoYXNoLCBhbGdvKQogIHdoaWxlIChzID09PSBmYWxzZSkgewogICAgayA9IG1ha2VLZXkocSwga3YsIGFsZ28pCiAgICByID0gbWFrZVIoZywgaywgcCwgcSkKICAgIHMgPSBrLmludm0ocSkuaW11bChILmFkZCh4Lm11bChyKSkpLm1vZChxKQogICAgaWYgKCFzLmNtcG4oMCkpIHsKICAgICAgcyA9IGZhbHNlCiAgICAgIHIgPSBuZXcgQk4oMCkKICAgIH0KICB9CiAgcmV0dXJuIHRvREVSKHIsIHMpCn0KCmZ1bmN0aW9uIHRvREVSIChyLCBzKSB7CiAgciA9IHIudG9BcnJheSgpCiAgcyA9IHMudG9BcnJheSgpCgogIC8vIFBhZCB2YWx1ZXMKICBpZiAoclswXSAmIDB4ODApIHsKICAgIHIgPSBbIDAgXS5jb25jYXQocikKICB9CiAgLy8gUGFkIHZhbHVlcwogIGlmIChzWzBdICYgMHg4MCkgewogICAgcyA9IFswXS5jb25jYXQocykKICB9CgogIHZhciB0b3RhbCA9IHIubGVuZ3RoICsgcy5sZW5ndGggKyA0CiAgdmFyIHJlcyA9IFsgMHgzMCwgdG90YWwsIDB4MDIsIHIubGVuZ3RoIF0KICByZXMgPSByZXMuY29uY2F0KHIsIFsgMHgwMiwgcy5sZW5ndGggXSwgcykKICByZXR1cm4gbmV3IEJ1ZmZlcihyZXMpCn0KCmZ1bmN0aW9uIGdldEtleSAoeCwgcSwgaGFzaCwgYWxnbykgewogIHggPSBuZXcgQnVmZmVyKHgudG9BcnJheSgpKQogIGlmICh4Lmxlbmd0aCA8IHEuYnl0ZUxlbmd0aCgpKSB7CiAgICB2YXIgemVyb3MgPSBuZXcgQnVmZmVyKHEuYnl0ZUxlbmd0aCgpIC0geC5sZW5ndGgpCiAgICB6ZXJvcy5maWxsKDApCiAgICB4ID0gQnVmZmVyLmNvbmNhdChbemVyb3MsIHhdKQogIH0KICB2YXIgaGxlbiA9IGhhc2gubGVuZ3RoCiAgdmFyIGhiaXRzID0gYml0czJvY3RldHMoaGFzaCwgcSkKICB2YXIgdiA9IG5ldyBCdWZmZXIoaGxlbikKICB2LmZpbGwoMSkKICB2YXIgayA9IG5ldyBCdWZmZXIoaGxlbikKICBrLmZpbGwoMCkKICBrID0gY3JlYXRlSG1hYyhhbGdvLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLnVwZGF0ZShuZXcgQnVmZmVyKFswXSkpCiAgICAudXBkYXRlKHgpCiAgICAudXBkYXRlKGhiaXRzKQogICAgLmRpZ2VzdCgpCiAgdiA9IGNyZWF0ZUhtYWMoYWxnbywgaykKICAgIC51cGRhdGUodikKICAgIC5kaWdlc3QoKQogIGsgPSBjcmVhdGVIbWFjKGFsZ28sIGspCiAgICAudXBkYXRlKHYpCiAgICAudXBkYXRlKG5ldyBCdWZmZXIoWzFdKSkKICAgIC51cGRhdGUoeCkKICAgIC51cGRhdGUoaGJpdHMpCiAgICAuZGlnZXN0KCkKICB2ID0gY3JlYXRlSG1hYyhhbGdvLCBrKQogICAgLnVwZGF0ZSh2KQogICAgLmRpZ2VzdCgpCiAgcmV0dXJuIHsKICAgIGs6IGssCiAgICB2OiB2CiAgfQp9CgpmdW5jdGlvbiBiaXRzMmludCAob2JpdHMsIHEpIHsKICB2YXIgYml0cyA9IG5ldyBCTihvYml0cykKICB2YXIgc2hpZnQgPSAob2JpdHMubGVuZ3RoIDw8IDMpIC0gcS5iaXRMZW5ndGgoKQogIGlmIChzaGlmdCA+IDApIHsKICAgIGJpdHMuaXNocm4oc2hpZnQpCiAgfQogIHJldHVybiBiaXRzCn0KCmZ1bmN0aW9uIGJpdHMyb2N0ZXRzIChiaXRzLCBxKSB7CiAgYml0cyA9IGJpdHMyaW50KGJpdHMsIHEpCiAgYml0cyA9IGJpdHMubW9kKHEpCiAgdmFyIG91dCA9IG5ldyBCdWZmZXIoYml0cy50b0FycmF5KCkpCiAgaWYgKG91dC5sZW5ndGggPCBxLmJ5dGVMZW5ndGgoKSkgewogICAgdmFyIHplcm9zID0gbmV3IEJ1ZmZlcihxLmJ5dGVMZW5ndGgoKSAtIG91dC5sZW5ndGgpCiAgICB6ZXJvcy5maWxsKDApCiAgICBvdXQgPSBCdWZmZXIuY29uY2F0KFt6ZXJvcywgb3V0XSkKICB9CiAgcmV0dXJuIG91dAp9CgpmdW5jdGlvbiBtYWtlS2V5IChxLCBrdiwgYWxnbykgewogIHZhciB0LCBrCgogIGRvIHsKICAgIHQgPSBuZXcgQnVmZmVyKCcnKQoKICAgIHdoaWxlICh0Lmxlbmd0aCAqIDggPCBxLmJpdExlbmd0aCgpKSB7CiAgICAgIGt2LnYgPSBjcmVhdGVIbWFjKGFsZ28sIGt2LmspCiAgICAgICAgLnVwZGF0ZShrdi52KQogICAgICAgIC5kaWdlc3QoKQogICAgICB0ID0gQnVmZmVyLmNvbmNhdChbdCwga3Yudl0pCiAgICB9CgogICAgayA9IGJpdHMyaW50KHQsIHEpCiAgICBrdi5rID0gY3JlYXRlSG1hYyhhbGdvLCBrdi5rKQogICAgICAudXBkYXRlKGt2LnYpCiAgICAgIC51cGRhdGUobmV3IEJ1ZmZlcihbMF0pKQogICAgICAuZGlnZXN0KCkKICAgIGt2LnYgPSBjcmVhdGVIbWFjKGFsZ28sIGt2LmspCiAgICAgIC51cGRhdGUoa3YudikKICAgICAgLmRpZ2VzdCgpCiAgfSB3aGlsZSAoay5jbXAocSkgIT09IC0xKQoKICByZXR1cm4gawp9CgpmdW5jdGlvbiBtYWtlUiAoZywgaywgcCwgcSkgewogIHJldHVybiBnLnRvUmVkKEJOLm1vbnQocCkpLnJlZFBvdyhrKS5mcm9tUmVkKCkubW9kKHEpCn0KCm1vZHVsZS5leHBvcnRzID0gc2lnbgptb2R1bGUuZXhwb3J0cy5nZXRLZXkgPSBnZXRLZXkKbW9kdWxlLmV4cG9ydHMubWFrZUtleSA9IG1ha2VLZXkKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2N1cnZlcyI6NjUsImJuLmpzIjo0MSwiYnJvd3NlcmlmeS1yc2EiOjYyLCJidWZmZXIiOjcwLCJjcmVhdGUtaG1hYyI6ODUsImVsbGlwdGljIjoxMDIsInBhcnNlLWFzbjEiOjEzOH1dLDY3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBtdWNoIG9mIHRoaXMgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvc2VsZi1zaWduZWQvYmxvYi9naC1wYWdlcy9saWIvcnNhLmpzCnZhciBjdXJ2ZXMgPSByZXF1aXJlKCcuL2N1cnZlcycpCnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJ2VsbGlwdGljJykKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKQoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKQp2YXIgRUMgPSBlbGxpcHRpYy5lYwoKZnVuY3Rpb24gdmVyaWZ5IChzaWcsIGhhc2gsIGtleSwgc2lnblR5cGUpIHsKICB2YXIgcHViID0gcGFyc2VLZXlzKGtleSkKICBpZiAocHViLnR5cGUgPT09ICdlYycpIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ2VjZHNhJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHB1YmxpYyBrZXkgdHlwZScpCiAgICB9CiAgICByZXR1cm4gZWNWZXJpZnkoc2lnLCBoYXNoLCBwdWIpCiAgfSBlbHNlIGlmIChwdWIudHlwZSA9PT0gJ2RzYScpIHsKICAgIGlmIChzaWduVHlwZSAhPT0gJ2RzYScpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cm9uZyBwdWJsaWMga2V5IHR5cGUnKQogICAgfQogICAgcmV0dXJuIGRzYVZlcmlmeShzaWcsIGhhc2gsIHB1YikKICB9IGVsc2UgewogICAgaWYgKHNpZ25UeXBlICE9PSAncnNhJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3dyb25nIHB1YmxpYyBrZXkgdHlwZScpCiAgICB9CiAgfQogIHZhciBsZW4gPSBwdWIubW9kdWx1cy5ieXRlTGVuZ3RoKCkKICB2YXIgcGFkID0gWyAxIF0KICB2YXIgcGFkTnVtID0gMAogIHdoaWxlIChoYXNoLmxlbmd0aCArIHBhZC5sZW5ndGggKyAyIDwgbGVuKSB7CiAgICBwYWQucHVzaCgweGZmKQogICAgcGFkTnVtKysKICB9CiAgcGFkLnB1c2goMHgwMCkKICB2YXIgaSA9IC0xCiAgd2hpbGUgKCsraSA8IGhhc2gubGVuZ3RoKSB7CiAgICBwYWQucHVzaChoYXNoW2ldKQogIH0KICBwYWQgPSBuZXcgQnVmZmVyKHBhZCkKICB2YXIgcmVkID0gQk4ubW9udChwdWIubW9kdWx1cykKICBzaWcgPSBuZXcgQk4oc2lnKS50b1JlZChyZWQpCgogIHNpZyA9IHNpZy5yZWRQb3cobmV3IEJOKHB1Yi5wdWJsaWNFeHBvbmVudCkpCgogIHNpZyA9IG5ldyBCdWZmZXIoc2lnLmZyb21SZWQoKS50b0FycmF5KCkpCiAgdmFyIG91dCA9IDAKICBpZiAocGFkTnVtIDwgOCkgewogICAgb3V0ID0gMQogIH0KICBsZW4gPSBNYXRoLm1pbihzaWcubGVuZ3RoLCBwYWQubGVuZ3RoKQogIGlmIChzaWcubGVuZ3RoICE9PSBwYWQubGVuZ3RoKSB7CiAgICBvdXQgPSAxCiAgfQoKICBpID0gLTEKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBvdXQgfD0gKHNpZ1tpXSBeIHBhZFtpXSkKICB9CiAgcmV0dXJuIG91dCA9PT0gMAp9CgpmdW5jdGlvbiBlY1ZlcmlmeSAoc2lnLCBoYXNoLCBwdWIpIHsKICB2YXIgY3VydmVJZCA9IGN1cnZlc1twdWIuZGF0YS5hbGdvcml0aG0uY3VydmUuam9pbignLicpXQogIGlmICghY3VydmVJZCkgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGN1cnZlICcgKyBwdWIuZGF0YS5hbGdvcml0aG0uY3VydmUuam9pbignLicpKQoKICB2YXIgY3VydmUgPSBuZXcgRUMoY3VydmVJZCkKICB2YXIgcHVia2V5ID0gcHViLmRhdGEuc3ViamVjdFByaXZhdGVLZXkuZGF0YQoKICByZXR1cm4gY3VydmUudmVyaWZ5KGhhc2gsIHNpZywgcHVia2V5KQp9CgpmdW5jdGlvbiBkc2FWZXJpZnkgKHNpZywgaGFzaCwgcHViKSB7CiAgdmFyIHAgPSBwdWIuZGF0YS5wCiAgdmFyIHEgPSBwdWIuZGF0YS5xCiAgdmFyIGcgPSBwdWIuZGF0YS5nCiAgdmFyIHkgPSBwdWIuZGF0YS5wdWJfa2V5CiAgdmFyIHVucGFja2VkID0gcGFyc2VLZXlzLnNpZ25hdHVyZS5kZWNvZGUoc2lnLCAnZGVyJykKICB2YXIgcyA9IHVucGFja2VkLnMKICB2YXIgciA9IHVucGFja2VkLnIKICBjaGVja1ZhbHVlKHMsIHEpCiAgY2hlY2tWYWx1ZShyLCBxKQogIHZhciBtb250cCA9IEJOLm1vbnQocCkKICB2YXIgdyA9IHMuaW52bShxKQogIHZhciB2ID0gZy50b1JlZChtb250cCkKICAgIC5yZWRQb3cobmV3IEJOKGhhc2gpLm11bCh3KS5tb2QocSkpCiAgICAuZnJvbVJlZCgpCiAgICAubXVsKAogICAgICB5LnRvUmVkKG1vbnRwKQogICAgICAgIC5yZWRQb3coci5tdWwodykubW9kKHEpKQogICAgICAgIC5mcm9tUmVkKCkKICApLm1vZChwKS5tb2QocSkKICByZXR1cm4gIXYuY21wKHIpCn0KCmZ1bmN0aW9uIGNoZWNrVmFsdWUgKGIsIHEpIHsKICBpZiAoYi5jbXBuKDApIDw9IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBzaWcnKQogIH0KICBpZiAoYi5jbXAocSkgPj0gcSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHNpZycpCiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IHZlcmlmeQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vY3VydmVzIjo2NSwiYm4uanMiOjQxLCJidWZmZXIiOjcwLCJlbGxpcHRpYyI6MTAyLCJwYXJzZS1hc24xIjoxMzh9XSw2ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmFyZ3VtZW50c1s0XVs0M11bMF0uYXBwbHkoZXhwb3J0cyxhcmd1bWVudHMpCn0seyJkdXAiOjQzfV0sNjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCcKCmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheQpleHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5Cgp2YXIgbG9va3VwID0gW10KdmFyIHJldkxvb2t1cCA9IFtdCnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXkKCmZ1bmN0aW9uIGluaXQgKCkgewogIHZhciBpCiAgdmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycKICB2YXIgbGVuID0gY29kZS5sZW5ndGgKCiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICBsb29rdXBbaV0gPSBjb2RlW2ldCiAgfQoKICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHsKICAgIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaQogIH0KICByZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjIKICByZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjMKfQoKaW5pdCgpCgpmdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7CiAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnIKICB2YXIgbGVuID0gYjY0Lmxlbmd0aAoKICBpZiAobGVuICUgNCA+IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpCiAgfQoKICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKQogIC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXQKICAvLyByZXByZXNlbnQgb25lIGJ5dGUKICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXMKICAvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlCiAgcGxhY2VIb2xkZXJzID0gYjY0W2xlbiAtIDJdID09PSAnPScgPyAyIDogYjY0W2xlbiAtIDFdID09PSAnPScgPyAxIDogMAoKICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKQoKICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzCiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuCgogIHZhciBMID0gMAoKICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7CiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV0KICAgIGFycltMKytdID0gKHRtcCAmIDB4RkYwMDAwKSA+PiAxNgogICAgYXJyW0wrK10gPSAodG1wICYgMHhGRjAwKSA+PiA4CiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHsKICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkgewogICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpCiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIHJldHVybiBhcnIKfQoKZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHsKICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl0KfQoKZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7CiAgdmFyIHRtcAogIHZhciBvdXRwdXQgPSBbXQogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7CiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pCiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSkKICB9CiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQp9CgpmdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkgewogIHZhciB0bXAKICB2YXIgbGVuID0gdWludDgubGVuZ3RoCiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzCiAgdmFyIG91dHB1dCA9ICcnCiAgdmFyIHBhcnRzID0gW10KICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDMKCiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlcgogIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHsKICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpCiAgfQoKICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzCiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXQogICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl0KICAgIG91dHB1dCArPSAnPT0nCiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7CiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF0KICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdCiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXQogICAgb3V0cHV0ICs9ICc9JwogIH0KCiAgcGFydHMucHVzaChvdXRwdXQpCgogIHJldHVybiBwYXJ0cy5qb2luKCcnKQp9Cgp9LHt9XSw3MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyohCiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLgogKgogKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz4KICogQGxpY2Vuc2UgIE1JVAogKi8KLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KCid1c2Ugc3RyaWN0JwoKdmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpCnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpCnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpCgpleHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlcgpleHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyCmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MApCdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb24KCnZhciByb290UGFyZW50ID0ge30KCi8qKgogKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOgogKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KQogKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpCiAqCiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKywKICogT3BlcmEgMTEuNissIGlPUyA0LjIrLgogKgogKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuCiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLgogKgogKiBOb3RlOgogKgogKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLAogKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguCiAqCiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLgogKgogKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZgogKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuCgogKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleQogKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS4KICovCkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZAogID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQKICA6IHR5cGVkQXJyYXlTdXBwb3J0KCkKCmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHsKICB0cnkgewogICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpCiAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfQogICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWQKICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YAogICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgCiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIGZhbHNlCiAgfQp9CgpmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHsKICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQKICAgID8gMHg3ZmZmZmZmZgogICAgOiAweDNmZmZmZmZmCn0KCi8qKgogKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXIKICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZgogKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzCiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0CiAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuCiAqCiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC4KICovCmZ1bmN0aW9uIEJ1ZmZlciAoYXJnKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHsKICAgIC8vIEF2b2lkIGdvaW5nIHRocm91Z2ggYW4gQXJndW1lbnRzQWRhcHRvclRyYW1wb2xpbmUgaW4gdGhlIGNvbW1vbiBjYXNlLgogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGFyZ3VtZW50c1sxXSkKICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZykKICB9CgogIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXMubGVuZ3RoID0gMAogICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQKICB9CgogIC8vIENvbW1vbiBjYXNlLgogIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgcmV0dXJuIGZyb21OdW1iZXIodGhpcywgYXJnKQogIH0KCiAgLy8gU2xpZ2h0bHkgbGVzcyBjb21tb24gY2FzZS4KICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHsKICAgIHJldHVybiBmcm9tU3RyaW5nKHRoaXMsIGFyZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiAndXRmOCcpCiAgfQoKICAvLyBVbnVzdWFsLgogIHJldHVybiBmcm9tT2JqZWN0KHRoaXMsIGFyZykKfQoKLy8gVE9ETzogTGVnYWN5LCBub3QgbmVlZGVkIGFueW1vcmUuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHZlcnNpb24uCkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHsKICBhcnIuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZQogIHJldHVybiBhcnIKfQoKZnVuY3Rpb24gZnJvbU51bWJlciAodGhhdCwgbGVuZ3RoKSB7CiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChsZW5ndGgpIHwgMCkKICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHRoYXRbaV0gPSAwCiAgICB9CiAgfQogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHsKICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIGVuY29kaW5nID0gJ3V0ZjgnCgogIC8vIEFzc3VtcHRpb246IGJ5dGVMZW5ndGgoKSByZXR1cm4gdmFsdWUgaXMgYWx3YXlzIDwga01heExlbmd0aC4KICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQoKICB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpCiAgcmV0dXJuIHRoYXQKfQoKZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqZWN0KSB7CiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmplY3QpKSByZXR1cm4gZnJvbUJ1ZmZlcih0aGF0LCBvYmplY3QpCgogIGlmIChpc0FycmF5KG9iamVjdCkpIHJldHVybiBmcm9tQXJyYXkodGhhdCwgb2JqZWN0KQoKICBpZiAob2JqZWN0ID09IG51bGwpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3Qgc3RhcnQgd2l0aCBudW1iZXIsIGJ1ZmZlciwgYXJyYXkgb3Igc3RyaW5nJykKICB9CgogIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7CiAgICBpZiAob2JqZWN0LmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgIHJldHVybiBmcm9tVHlwZWRBcnJheSh0aGF0LCBvYmplY3QpCiAgICB9CiAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCBvYmplY3QpCiAgICB9CiAgfQoKICBpZiAob2JqZWN0Lmxlbmd0aCkgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqZWN0KQoKICByZXR1cm4gZnJvbUpzb25PYmplY3QodGhhdCwgb2JqZWN0KQp9CgpmdW5jdGlvbiBmcm9tQnVmZmVyICh0aGF0LCBidWZmZXIpIHsKICB2YXIgbGVuZ3RoID0gY2hlY2tlZChidWZmZXIubGVuZ3RoKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQogIGJ1ZmZlci5jb3B5KHRoYXQsIDAsIDAsIGxlbmd0aCkKICByZXR1cm4gdGhhdAp9CgpmdW5jdGlvbiBmcm9tQXJyYXkgKHRoYXQsIGFycmF5KSB7CiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHsKICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NQogIH0KICByZXR1cm4gdGhhdAp9CgovLyBEdXBsaWNhdGUgb2YgZnJvbUFycmF5KCkgdG8ga2VlcCBmcm9tQXJyYXkoKSBtb25vbW9ycGhpYy4KZnVuY3Rpb24gZnJvbVR5cGVkQXJyYXkgKHRoYXQsIGFycmF5KSB7CiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDAKICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKQogIC8vIFRydW5jYXRpbmcgdGhlIGVsZW1lbnRzIGlzIHByb2JhYmx5IG5vdCB3aGF0IHBlb3BsZSBleHBlY3QgZnJvbSB0eXBlZAogIC8vIGFycmF5cyB3aXRoIEJZVEVTX1BFUl9FTEVNRU5UID4gMSBidXQgaXQncyBjb21wYXRpYmxlIHdpdGggdGhlIGJlaGF2aW9yCiAgLy8gb2YgdGhlIG9sZCBCdWZmZXIgY29uc3RydWN0b3IuCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewogICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1CiAgfQogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXkpIHsKICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXIKCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2UKICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShhcnJheSkKICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZQogIH0gZWxzZSB7CiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzCiAgICB0aGF0ID0gZnJvbVR5cGVkQXJyYXkodGhhdCwgbmV3IFVpbnQ4QXJyYXkoYXJyYXkpKQogIH0KICByZXR1cm4gdGhhdAp9CgpmdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkgewogIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwCiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCkKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7CiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTUKICB9CiAgcmV0dXJuIHRoYXQKfQoKLy8gRGVzZXJpYWxpemUgeyB0eXBlOiAnQnVmZmVyJywgZGF0YTogWzEsMiwzLC4uLl0gfSBpbnRvIGEgQnVmZmVyIG9iamVjdC4KLy8gUmV0dXJucyBhIHplcm8tbGVuZ3RoIGJ1ZmZlciBmb3IgaW5wdXRzIHRoYXQgZG9uJ3QgY29uZm9ybSB0byB0aGUgc3BlYy4KZnVuY3Rpb24gZnJvbUpzb25PYmplY3QgKHRoYXQsIG9iamVjdCkgewogIHZhciBhcnJheQogIHZhciBsZW5ndGggPSAwCgogIGlmIChvYmplY3QudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmplY3QuZGF0YSkpIHsKICAgIGFycmF5ID0gb2JqZWN0LmRhdGEKICAgIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDAKICB9CiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCkKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewogICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1CiAgfQogIHJldHVybiB0aGF0Cn0KCmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGUKICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheQogIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJgogICAgICBCdWZmZXJbU3ltYm9sLnNwZWNpZXNdID09PSBCdWZmZXIpIHsKICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywgewogICAgICB2YWx1ZTogbnVsbCwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9KQogIH0KfSBlbHNlIHsKICAvLyBwcmUtc2V0IGZvciB2YWx1ZXMgdGhhdCBtYXkgZXhpc3QgaW4gdGhlIGZ1dHVyZQogIEJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkCiAgQnVmZmVyLnByb3RvdHlwZS5wYXJlbnQgPSB1bmRlZmluZWQKfQoKZnVuY3Rpb24gYWxsb2NhdGUgKHRoYXQsIGxlbmd0aCkgewogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlCiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKQogICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCiAgfSBlbHNlIHsKICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3MKICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoCiAgfQoKICB2YXIgZnJvbVBvb2wgPSBsZW5ndGggIT09IDAgJiYgbGVuZ3RoIDw9IEJ1ZmZlci5wb29sU2l6ZSA+Pj4gMQogIGlmIChmcm9tUG9vbCkgdGhhdC5wYXJlbnQgPSByb290UGFyZW50CgogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkgewogIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW4KICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLikKICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKQogIH0KICByZXR1cm4gbGVuZ3RoIHwgMAp9CgpmdW5jdGlvbiBTbG93QnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbG93QnVmZmVyKSkgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKQoKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdWJqZWN0LCBlbmNvZGluZykKICBkZWxldGUgYnVmLnBhcmVudAogIHJldHVybiBidWYKfQoKQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHsKICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKQp9CgpCdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJykKICB9CgogIGlmIChhID09PSBiKSByZXR1cm4gMAoKICB2YXIgeCA9IGEubGVuZ3RoCiAgdmFyIHkgPSBiLmxlbmd0aAoKICB2YXIgaSA9IDAKICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSkKICB3aGlsZSAoaSA8IGxlbikgewogICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrCgogICAgKytpCiAgfQoKICBpZiAoaSAhPT0gbGVuKSB7CiAgICB4ID0gYVtpXQogICAgeSA9IGJbaV0KICB9CgogIGlmICh4IDwgeSkgcmV0dXJuIC0xCiAgaWYgKHkgPCB4KSByZXR1cm4gMQogIHJldHVybiAwCn0KCkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHsKICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkgewogICAgY2FzZSAnaGV4JzoKICAgIGNhc2UgJ3V0ZjgnOgogICAgY2FzZSAndXRmLTgnOgogICAgY2FzZSAnYXNjaWknOgogICAgY2FzZSAnYmluYXJ5JzoKICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICBjYXNlICdyYXcnOgogICAgY2FzZSAndWNzMic6CiAgICBjYXNlICd1Y3MtMic6CiAgICBjYXNlICd1dGYxNmxlJzoKICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgcmV0dXJuIHRydWUKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBmYWxzZQogIH0KfQoKQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7CiAgaWYgKCFpc0FycmF5KGxpc3QpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0IGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycy4nKQoKICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiBuZXcgQnVmZmVyKDApCiAgfQoKICB2YXIgaQogIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewogICAgbGVuZ3RoID0gMAogICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoCiAgICB9CiAgfQoKICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihsZW5ndGgpCiAgdmFyIHBvcyA9IDAKICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgdmFyIGl0ZW0gPSBsaXN0W2ldCiAgICBpdGVtLmNvcHkoYnVmLCBwb3MpCiAgICBwb3MgKz0gaXRlbS5sZW5ndGgKICB9CiAgcmV0dXJuIGJ1Zgp9CgpmdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7CiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSBzdHJpbmcgPSAnJyArIHN0cmluZwoKICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aAogIGlmIChsZW4gPT09IDApIHJldHVybiAwCgogIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvbgogIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCiAgZm9yICg7OykgewogICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICBjYXNlICdhc2NpaSc6CiAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgIC8vIERlcHJlY2F0ZWQKICAgICAgY2FzZSAncmF3JzoKICAgICAgY2FzZSAncmF3cyc6CiAgICAgICAgcmV0dXJuIGxlbgogICAgICBjYXNlICd1dGY4JzoKICAgICAgY2FzZSAndXRmLTgnOgogICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aAogICAgICBjYXNlICd1Y3MyJzoKICAgICAgY2FzZSAndWNzLTInOgogICAgICBjYXNlICd1dGYxNmxlJzoKICAgICAgY2FzZSAndXRmLTE2bGUnOgogICAgICAgIHJldHVybiBsZW4gKiAyCiAgICAgIGNhc2UgJ2hleCc6CiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMQogICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjgKICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpCiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlCiAgICB9CiAgfQp9CkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aAoKZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkgewogIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCgogIHN0YXJ0ID0gc3RhcnQgfCAwCiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID09PSBJbmZpbml0eSA/IHRoaXMubGVuZ3RoIDogZW5kIHwgMAoKICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JwogIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMAogIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGgKICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJycKCiAgd2hpbGUgKHRydWUpIHsKICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKICAgICAgY2FzZSAnaGV4JzoKICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICBjYXNlICd1dGYtOCc6CiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAnYXNjaWknOgogICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBjYXNlICdiaW5hcnknOgogICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgIGNhc2UgJ3VjczInOgogICAgICBjYXNlICd1Y3MtMic6CiAgICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgZGVmYXVsdDoKICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpCiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlCiAgICB9CiAgfQp9CgovLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdAovLyBCdWZmZXIgaW5zdGFuY2VzLgpCdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWUKCkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7CiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMAogIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJwogIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aCkKICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKfQoKQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpCiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlCiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwCn0KCkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkgewogIHZhciBzdHIgPSAnJwogIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTCiAgaWYgKHRoaXMubGVuZ3RoID4gMCkgewogICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJykKICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICcKICB9CiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPicKfQoKQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJykKICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIDAKICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikKfQoKQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0KSB7CiAgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZgogIGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwCiAgYnl0ZU9mZnNldCA+Pj0gMAoKICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAtMQogIGlmIChieXRlT2Zmc2V0ID49IHRoaXMubGVuZ3RoKSByZXR1cm4gLTEKCiAgLy8gTmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlcgogIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoICsgYnl0ZU9mZnNldCwgMCkKCiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xIC8vIHNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nIGFsd2F5cyBmYWlscwogICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCkKICB9CiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7CiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCkKICB9CiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCkKICAgIH0KICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgWyB2YWwgXSwgYnl0ZU9mZnNldCkKICB9CgogIGZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQpIHsKICAgIHZhciBmb3VuZEluZGV4ID0gLTEKICAgIGZvciAodmFyIGkgPSAwOyBieXRlT2Zmc2V0ICsgaSA8IGFyci5sZW5ndGg7IGkrKykgewogICAgICBpZiAoYXJyW2J5dGVPZmZzZXQgKyBpXSA9PT0gdmFsW2ZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4XSkgewogICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGkKICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWwubGVuZ3RoKSByZXR1cm4gYnl0ZU9mZnNldCArIGZvdW5kSW5kZXgKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3VuZEluZGV4ID0gLTEKICAgICAgfQogICAgfQogICAgcmV0dXJuIC0xCiAgfQoKICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKQp9CgpmdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMAogIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0CiAgaWYgKCFsZW5ndGgpIHsKICAgIGxlbmd0aCA9IHJlbWFpbmluZwogIH0gZWxzZSB7CiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKQogICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykgewogICAgICBsZW5ndGggPSByZW1haW5pbmcKICAgIH0KICB9CgogIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzCiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGgKICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKQoKICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikgewogICAgbGVuZ3RoID0gc3RyTGVuIC8gMgogIH0KICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KQogICAgaWYgKGlzTmFOKHBhcnNlZCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJykKICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZAogIH0KICByZXR1cm4gaQp9CgpmdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHsKICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKQogIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkgewogICAgZW5jb2RpbmcgPSAndXRmOCcKICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoCiAgICBvZmZzZXQgPSAwCiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpCiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykgewogICAgZW5jb2RpbmcgPSBvZmZzZXQKICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoCiAgICBvZmZzZXQgPSAwCiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSkKICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHsKICAgIG9mZnNldCA9IG9mZnNldCB8IDAKICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7CiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDAKICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnCiAgICB9IGVsc2UgewogICAgICBlbmNvZGluZyA9IGxlbmd0aAogICAgICBsZW5ndGggPSB1bmRlZmluZWQKICAgIH0KICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzCiAgfSBlbHNlIHsKICAgIHZhciBzd2FwID0gZW5jb2RpbmcKICAgIGVuY29kaW5nID0gb2Zmc2V0CiAgICBvZmZzZXQgPSBsZW5ndGggfCAwCiAgICBsZW5ndGggPSBzd2FwCiAgfQoKICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXQKICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmcKCiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpCiAgfQoKICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JwoKICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZQogIGZvciAoOzspIHsKICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKICAgICAgY2FzZSAnaGV4JzoKICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgIGNhc2UgJ3V0ZjgnOgogICAgICBjYXNlICd1dGYtOCc6CiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAnYXNjaWknOgogICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBjYXNlICdiaW5hcnknOgogICAgICAgIHJldHVybiBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZQogICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKQogICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkKICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKICAgIH0KICB9Cn0KCkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKICByZXR1cm4gewogICAgdHlwZTogJ0J1ZmZlcicsCiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMCkKICB9Cn0KCmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7CiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKQogIH0gZWxzZSB7CiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKQogIH0KfQoKZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpCiAgdmFyIHJlcyA9IFtdCgogIHZhciBpID0gc3RhcnQKICB3aGlsZSAoaSA8IGVuZCkgewogICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXQogICAgdmFyIGNvZGVQb2ludCA9IG51bGwKICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNAogICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDMKICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyCiAgICAgIDogMQoKICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHsKICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludAoKICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHsKICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlCiAgICAgICAgICB9CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRikKICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpCiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHsKICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrCiAgICAgICAgY2FzZSA0OgogICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV0KICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl0KICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdCiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewogICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRikKICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGEKICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZQogICAgICBjb2RlUG9pbnQgPSAweEZGRkQKICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDEKICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7CiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpCiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwCiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCkKICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkYKICAgIH0KCiAgICByZXMucHVzaChjb2RlUG9pbnQpCiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2UKICB9CgogIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKQp9CgovLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGgKLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLgovLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5CnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMAoKZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7CiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoCiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkgewogICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpCiAgfQoKICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkICJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWQiLgogIHZhciByZXMgPSAnJwogIHZhciBpID0gMAogIHdoaWxlIChpIDwgbGVuKSB7CiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSgKICAgICAgU3RyaW5nLAogICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpCiAgICApCiAgfQogIHJldHVybiByZXMKfQoKZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgdmFyIHJldCA9ICcnCiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKQoKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgewogICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RikKICB9CiAgcmV0dXJuIHJldAp9CgpmdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgdmFyIHJldCA9ICcnCiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKQoKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgewogICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKQogIH0KICByZXR1cm4gcmV0Cn0KCmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICB2YXIgbGVuID0gYnVmLmxlbmd0aAoKICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwCiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlbgoKICB2YXIgb3V0ID0gJycKICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgewogICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSkKICB9CiAgcmV0dXJuIG91dAp9CgpmdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKQogIHZhciByZXMgPSAnJwogIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KQogIH0KICByZXR1cm4gcmVzCn0KCkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkgewogIHZhciBsZW4gPSB0aGlzLmxlbmd0aAogIHN0YXJ0ID0gfn5zdGFydAogIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmQKCiAgaWYgKHN0YXJ0IDwgMCkgewogICAgc3RhcnQgKz0gbGVuCiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDAKICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7CiAgICBzdGFydCA9IGxlbgogIH0KCiAgaWYgKGVuZCA8IDApIHsKICAgIGVuZCArPSBsZW4KICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwCiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHsKICAgIGVuZCA9IGxlbgogIH0KCiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydAoKICB2YXIgbmV3QnVmCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICBuZXdCdWYgPSB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpCiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZQogIH0gZWxzZSB7CiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydAogICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7CiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XQogICAgfQogIH0KCiAgaWYgKG5ld0J1Zi5sZW5ndGgpIG5ld0J1Zi5wYXJlbnQgPSB0aGlzLnBhcmVudCB8fCB0aGlzCgogIHJldHVybiBuZXdCdWYKfQoKLyoKICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuCiAqLwpmdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkgewogIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpCiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciB2YWwgPSB0aGlzW29mZnNldF0KICB2YXIgbXVsID0gMQogIHZhciBpID0gMAogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAogIH0KCiAgcmV0dXJuIHZhbAp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCiAgfQoKICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdCiAgdmFyIG11bCA9IDEKICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWwKICB9CgogIHJldHVybiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKQogIHJldHVybiB0aGlzW29mZnNldF0KfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQogIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8CiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArCiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArCiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHwKICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHwKICAgIHRoaXNbb2Zmc2V0ICsgM10pCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciB2YWwgPSB0aGlzW29mZnNldF0KICB2YXIgbXVsID0gMQogIHZhciBpID0gMAogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAogIH0KICBtdWwgKj0gMHg4MAoKICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKICByZXR1cm4gdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciBpID0gYnl0ZUxlbmd0aAogIHZhciBtdWwgPSAxCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXQogIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bAogIH0KICBtdWwgKj0gMHg4MAoKICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKICByZXR1cm4gdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpCiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKQogIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQogIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQogIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCkKICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOCkKICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdKSB8CiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8CiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfAogICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8CiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAogICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfAogICAgKHRoaXNbb2Zmc2V0ICsgM10pCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQogIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCkKICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCkKICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KQp9CgpmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKQogIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKQogIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJykKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMCkKCiAgdmFyIG11bCA9IDEKICB2YXIgaSA9IDAKICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkYKICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGCiAgfQoKICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpLCAwKQoKICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxCiAgdmFyIG11bCA9IDEKICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGCiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkYKICB9CgogIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMCkKICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpCiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICByZXR1cm4gb2Zmc2V0ICsgMQp9CgpmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHsKICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMQogIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyBpKyspIHsKICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+CiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOAogIH0KfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDIKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCiAgfQogIHJldHVybiBvZmZzZXQgKyAyCn0KCmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikgewogIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMQogIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyBpKyspIHsKICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmYKICB9Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KQogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNCkKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSB7CiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpCgogICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpCiAgfQoKICB2YXIgaSA9IDAKICB2YXIgbXVsID0gMQogIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMAogIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRgogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGCiAgfQoKICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkKCiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdCkKICB9CgogIHZhciBpID0gYnl0ZUxlbmd0aCAtIDEKICB2YXIgbXVsID0gMQogIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMAogIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkYKICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkYKICB9CgogIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKQogIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSkKICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDEKICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogIHJldHVybiBvZmZzZXQgKyAxCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgMgp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCiAgfQogIHJldHVybiBvZmZzZXQgKyAyCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNikKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgNAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMCkKICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDEKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNikKICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCiAgfQogIHJldHVybiBvZmZzZXQgKyA0Cn0KCmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKQogIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJykKfQoKZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgewogICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpCiAgfQogIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KQogIHJldHVybiBvZmZzZXQgKyA0Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCn0KCmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSB7CiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KQogIH0KICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOCkKICByZXR1cm4gb2Zmc2V0ICsgOAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydCkKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KQp9CgovLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpCkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHsKICBpZiAoIXN0YXJ0KSBzdGFydCA9IDAKICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoCiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aAogIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMAogIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydAoKICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmUKICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDAKICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDAKCiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9ucwogIGlmICh0YXJnZXRTdGFydCA8IDApIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJykKICB9CiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKQogIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKQoKICAvLyBBcmUgd2Ugb29iPwogIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGgKICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHsKICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0CiAgfQoKICB2YXIgbGVuID0gZW5kIC0gc3RhcnQKICB2YXIgaQoKICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHsKICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZAogICAgZm9yIChpID0gbGVuIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF0KICAgIH0KICB9IGVsc2UgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0CiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF0KICAgIH0KICB9IGVsc2UgewogICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoCiAgICAgIHRhcmdldCwKICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLAogICAgICB0YXJnZXRTdGFydAogICAgKQogIH0KCiAgcmV0dXJuIGxlbgp9CgovLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aCkKQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsdWUsIHN0YXJ0LCBlbmQpIHsKICBpZiAoIXZhbHVlKSB2YWx1ZSA9IDAKICBpZiAoIXN0YXJ0KSBzdGFydCA9IDAKICBpZiAoIWVuZCkgZW5kID0gdGhpcy5sZW5ndGgKCiAgaWYgKGVuZCA8IHN0YXJ0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIDwgc3RhcnQnKQoKICAvLyBGaWxsIDAgYnl0ZXM7IHdlJ3JlIGRvbmUKICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuCiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4KCiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3N0YXJ0IG91dCBvZiBib3VuZHMnKQogIGlmIChlbmQgPCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIG91dCBvZiBib3VuZHMnKQoKICB2YXIgaQogIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7CiAgICAgIHRoaXNbaV0gPSB2YWx1ZQogICAgfQogIH0gZWxzZSB7CiAgICB2YXIgYnl0ZXMgPSB1dGY4VG9CeXRlcyh2YWx1ZS50b1N0cmluZygpKQogICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aAogICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykgewogICAgICB0aGlzW2ldID0gYnl0ZXNbaSAlIGxlbl0KICAgIH0KICB9CgogIHJldHVybiB0aGlzCn0KCi8vIEhFTFBFUiBGVU5DVElPTlMKLy8gPT09PT09PT09PT09PT09PQoKdmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1wvMC05QS1aYS16LV9dL2cKCmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHsKICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXG4gYW5kIFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90CiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKQogIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJycKICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJwogIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdAogIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkgewogICAgc3RyID0gc3RyICsgJz0nCiAgfQogIHJldHVybiBzdHIKfQoKZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7CiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKQogIHJldHVybiBzdHIucmVwbGFjZSgvXlxzK3xccyskL2csICcnKQp9CgpmdW5jdGlvbiB0b0hleCAobikgewogIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KQogIHJldHVybiBuLnRvU3RyaW5nKDE2KQp9CgpmdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykgewogIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHkKICB2YXIgY29kZVBvaW50CiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGgKICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGwKICB2YXIgYnl0ZXMgPSBbXQoKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKQoKICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnQKICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7CiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkCiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkgewogICAgICAgIC8vIG5vIGxlYWQgeWV0CiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikgewogICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbAogICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCiAgICAgICAgICBjb250aW51ZQogICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkgewogICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZAogICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCiAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KCiAgICAgICAgLy8gdmFsaWQgbGVhZAogICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQKCiAgICAgICAgY29udGludWUKICAgICAgfQoKICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvdwogICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7CiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludAogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KCiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyCiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDAKICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkgewogICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkCiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKQogICAgfQoKICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsCgogICAgLy8gZW5jb2RlIHV0ZjgKICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7CiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVhawogICAgICBieXRlcy5wdXNoKGNvZGVQb2ludCkKICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHsKICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCiAgICAgIGJ5dGVzLnB1c2goCiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsCiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKICAgICAgKQogICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7CiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVhawogICAgICBieXRlcy5wdXNoKAogICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLAogICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCwKICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAogICAgICApCiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7CiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVhawogICAgICBieXRlcy5wdXNoKAogICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCwKICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsCiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAogICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCiAgICAgICkKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JykKICAgIH0KICB9CgogIHJldHVybiBieXRlcwp9CgpmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikgewogIHZhciBieXRlQXJyYXkgPSBbXQogIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi4KICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRikKICB9CiAgcmV0dXJuIGJ5dGVBcnJheQp9CgpmdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykgewogIHZhciBjLCBoaSwgbG8KICB2YXIgYnl0ZUFycmF5ID0gW10KICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewogICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCgogICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpCiAgICBoaSA9IGMgPj4gOAogICAgbG8gPSBjICUgMjU2CiAgICBieXRlQXJyYXkucHVzaChsbykKICAgIGJ5dGVBcnJheS5wdXNoKGhpKQogIH0KCiAgcmV0dXJuIGJ5dGVBcnJheQp9CgpmdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHsKICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpCn0KCmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWsKICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXQogIH0KICByZXR1cm4gaQp9Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7ImJhc2U2NC1qcyI6NjksImllZWU3NTQiOjEyNywiaXNhcnJheSI6NzF9XSw3MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOwoKbW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHsKICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7Cn07Cgp9LHt9XSw3MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHsKICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307CiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDsKfQptb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjsKCi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueApFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyOwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkOwpFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7CgovLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmUKLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy4KRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDsKCi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93cwovLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC4KRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7CiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSkKICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7CiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjsKICByZXR1cm4gdGhpczsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwoKICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuCiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHsKICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8CiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7CiAgICAgIGVyID0gYXJndW1lbnRzWzFdOwogICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudAogICAgICB9CiAgICAgIHRocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkICJlcnJvciIgZXZlbnQuJyk7CiAgICB9CiAgfQoKICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpCiAgICByZXR1cm4gZmFsc2U7CgogIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7CiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHsKICAgICAgLy8gZmFzdCBjYXNlcwogICAgICBjYXNlIDE6CiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDI6CiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMzoKICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pOwogICAgICAgIGJyZWFrOwogICAgICAvLyBzbG93ZXIKICAgICAgZGVmYXVsdDoKICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgfQogIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHsKICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpOwogICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDsKICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykKICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpOwogIH0KCiAgcmV0dXJuIHRydWU7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKICB2YXIgbTsKCiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgogIGlmICghdGhpcy5fZXZlbnRzKQogICAgdGhpcy5fZXZlbnRzID0ge307CgogIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09ICJuZXdMaXN0ZW5lciIhIEJlZm9yZQogIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0ICJuZXdMaXN0ZW5lciIuCiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcikKICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLAogICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID8KICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTsKCiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC4KICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyOwogIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpCiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuCiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7CiAgZWxzZQogICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuCiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07CgogIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrCiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHsKICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkgewogICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzOwogICAgfSBlbHNlIHsKICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzOwogICAgfQoKICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7CiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlOwogICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICsKICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICsKICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJywKICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTsKICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMAogICAgICAgIGNvbnNvbGUudHJhY2UoKTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7CiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgogIHZhciBmaXJlZCA9IGZhbHNlOwoKICBmdW5jdGlvbiBnKCkgewogICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTsKCiAgICBpZiAoIWZpcmVkKSB7CiAgICAgIGZpcmVkID0gdHJ1ZTsKICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICB9CgogIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjsKICB0aGlzLm9uKHR5cGUsIGcpOwoKICByZXR1cm4gdGhpczsKfTsKCi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkCkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewogIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpOwoKICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKQogICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTsKCiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSkKICAgIHJldHVybiB0aGlzOwoKICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdOwogIGxlbmd0aCA9IGxpc3QubGVuZ3RoOwogIHBvc2l0aW9uID0gLTE7CgogIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fAogICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHsKICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKQogICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpOwoKICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7CiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7CiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fAogICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7CiAgICAgICAgcG9zaXRpb24gPSBpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgaWYgKHBvc2l0aW9uIDwgMCkKICAgICAgcmV0dXJuIHRoaXM7CgogICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7CiAgICAgIGxpc3QubGVuZ3RoID0gMDsKICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKICAgIH0gZWxzZSB7CiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTsKICAgIH0KCiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKQogICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpOwogIH0KCiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIga2V5LCBsaXN0ZW5lcnM7CgogIGlmICghdGhpcy5fZXZlbnRzKQogICAgcmV0dXJuIHRoaXM7CgogIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXQKICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApCiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9OwogICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKQogICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHMKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7CiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlOwogICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpOwogICAgfQogICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7CiAgICB0aGlzLl9ldmVudHMgPSB7fTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7CiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7CiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHsKICAgIC8vIExJRk8gb3JkZXIKICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKQogICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pOwogIH0KICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwoKICByZXR1cm4gdGhpczsKfTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkgewogIHZhciByZXQ7CiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSkKICAgIHJldCA9IFtdOwogIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSkKICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dOwogIGVsc2UKICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpOwogIHJldHVybiByZXQ7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7CiAgaWYgKHRoaXMuX2V2ZW50cykgewogICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07CgogICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpCiAgICAgIHJldHVybiAxOwogICAgZWxzZSBpZiAoZXZsaXN0ZW5lcikKICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoOwogIH0KICByZXR1cm4gMDsKfTsKCkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkgewogIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7Cn07CgpmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nOwp9CgpmdW5jdGlvbiBpc051bWJlcihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7Cn0KCmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7Cn0KCmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykgewogIHJldHVybiBhcmcgPT09IHZvaWQgMDsKfQoKfSx7fV0sNzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBCYXNlNTggZW5jb2RpbmcvZGVjb2RpbmcKLy8gT3JpZ2luYWxseSB3cml0dGVuIGJ5IE1pa2UgSGVhcm4gZm9yIEJpdGNvaW5KCi8vIENvcHlyaWdodCAoYykgMjAxMSBHb29nbGUgSW5jCi8vIFBvcnRlZCB0byBKYXZhU2NyaXB0IGJ5IFN0ZWZhbiBUaG9tYXMKLy8gTWVyZ2VkIEJ1ZmZlciByZWZhY3RvcmluZ3MgZnJvbSBiYXNlNTgtbmF0aXZlIGJ5IFN0ZXBoZW4gUGFpcgovLyBDb3B5cmlnaHQgKGMpIDIwMTMgQml0UGF5IEluYwoKdmFyIEFMUEhBQkVUID0gJzEyMzQ1Njc4OUFCQ0RFRkdISktMTU5QUVJTVFVWV1hZWmFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXonCnZhciBBTFBIQUJFVF9NQVAgPSB7fQpmb3IodmFyIGkgPSAwOyBpIDwgQUxQSEFCRVQubGVuZ3RoOyBpKyspIHsKICBBTFBIQUJFVF9NQVBbQUxQSEFCRVQuY2hhckF0KGkpXSA9IGkKfQp2YXIgQkFTRSA9IDU4CgpmdW5jdGlvbiBlbmNvZGUoYnVmZmVyKSB7CiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAnJwoKICB2YXIgaSwgaiwgZGlnaXRzID0gWzBdCiAgZm9yIChpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykgewogICAgZm9yIChqID0gMDsgaiA8IGRpZ2l0cy5sZW5ndGg7IGorKykgZGlnaXRzW2pdIDw8PSA4CgogICAgZGlnaXRzWzBdICs9IGJ1ZmZlcltpXQoKICAgIHZhciBjYXJyeSA9IDAKICAgIGZvciAoaiA9IDA7IGogPCBkaWdpdHMubGVuZ3RoOyArK2opIHsKICAgICAgZGlnaXRzW2pdICs9IGNhcnJ5CgogICAgICBjYXJyeSA9IChkaWdpdHNbal0gLyBCQVNFKSB8IDAKICAgICAgZGlnaXRzW2pdICU9IEJBU0UKICAgIH0KCiAgICB3aGlsZSAoY2FycnkpIHsKICAgICAgZGlnaXRzLnB1c2goY2FycnkgJSBCQVNFKQoKICAgICAgY2FycnkgPSAoY2FycnkgLyBCQVNFKSB8IDAKICAgIH0KICB9CgogIC8vIGRlYWwgd2l0aCBsZWFkaW5nIHplcm9zCiAgZm9yIChpID0gMDsgYnVmZmVyW2ldID09PSAwICYmIGkgPCBidWZmZXIubGVuZ3RoIC0gMTsgaSsrKSBkaWdpdHMucHVzaCgwKQoKICAvLyBjb252ZXJ0IGRpZ2l0cyB0byBhIHN0cmluZwogIHZhciBzdHJpbmdPdXRwdXQgPSAiIgogIGZvciAodmFyIGkgPSBkaWdpdHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIHN0cmluZ091dHB1dCA9IHN0cmluZ091dHB1dCArIEFMUEhBQkVUW2RpZ2l0c1tpXV0KICB9CiAgcmV0dXJuIHN0cmluZ091dHB1dAp9CgpmdW5jdGlvbiBkZWNvZGUoc3RyaW5nKSB7CiAgaWYgKHN0cmluZy5sZW5ndGggPT09IDApIHJldHVybiBbXQoKICB2YXIgaSwgaiwgYnl0ZXMgPSBbMF0KICBmb3IgKGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgYyA9IHN0cmluZ1tpXQogICAgaWYgKCEoYyBpbiBBTFBIQUJFVF9NQVApKSB0aHJvdyBuZXcgRXJyb3IoJ05vbi1iYXNlNTggY2hhcmFjdGVyJykKCiAgICBmb3IgKGogPSAwOyBqIDwgYnl0ZXMubGVuZ3RoOyBqKyspIGJ5dGVzW2pdICo9IEJBU0UKICAgIGJ5dGVzWzBdICs9IEFMUEhBQkVUX01BUFtjXQoKICAgIHZhciBjYXJyeSA9IDAKICAgIGZvciAoaiA9IDA7IGogPCBieXRlcy5sZW5ndGg7ICsraikgewogICAgICBieXRlc1tqXSArPSBjYXJyeQoKICAgICAgY2FycnkgPSBieXRlc1tqXSA+PiA4CiAgICAgIGJ5dGVzW2pdICY9IDB4ZmYKICAgIH0KCiAgICB3aGlsZSAoY2FycnkpIHsKICAgICAgYnl0ZXMucHVzaChjYXJyeSAmIDB4ZmYpCgogICAgICBjYXJyeSA+Pj0gOAogICAgfQogIH0KCiAgLy8gZGVhbCB3aXRoIGxlYWRpbmcgemVyb3MKICBmb3IgKGkgPSAwOyBzdHJpbmdbaV0gPT09ICcxJyAmJiBpIDwgc3RyaW5nLmxlbmd0aCAtIDE7IGkrKykgYnl0ZXMucHVzaCgwKQoKICByZXR1cm4gYnl0ZXMucmV2ZXJzZSgpCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGVuY29kZTogZW5jb2RlLAogIGRlY29kZTogZGVjb2RlCn0KCn0se31dLDc0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewondXNlIHN0cmljdCcKCnZhciBiYXNlNTggPSByZXF1aXJlKCdiczU4JykKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpCgovLyBTSEEyNTYoU0hBMjU2KGJ1ZmZlcikpCmZ1bmN0aW9uIHNoYTI1NngyIChidWZmZXIpIHsKICB2YXIgdG1wID0gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGJ1ZmZlcikuZGlnZXN0KCkKICByZXR1cm4gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHRtcCkuZGlnZXN0KCkKfQoKLy8gRW5jb2RlIGEgYnVmZmVyIGFzIGEgYmFzZTU4LWNoZWNrIGVuY29kZWQgc3RyaW5nCmZ1bmN0aW9uIGVuY29kZSAocGF5bG9hZCkgewogIHZhciBjaGVja3N1bSA9IHNoYTI1NngyKHBheWxvYWQpCgogIHJldHVybiBiYXNlNTguZW5jb2RlKEJ1ZmZlci5jb25jYXQoWwogICAgcGF5bG9hZCwKICAgIGNoZWNrc3VtCiAgXSwgcGF5bG9hZC5sZW5ndGggKyA0KSkKfQoKLy8gRGVjb2RlIGEgYmFzZTU4LWNoZWNrIGVuY29kZWQgc3RyaW5nIHRvIGEgYnVmZmVyCmZ1bmN0aW9uIGRlY29kZSAoc3RyaW5nKSB7CiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYmFzZTU4LmRlY29kZShzdHJpbmcpKQoKICB2YXIgcGF5bG9hZCA9IGJ1ZmZlci5zbGljZSgwLCAtNCkKICB2YXIgY2hlY2tzdW0gPSBidWZmZXIuc2xpY2UoLTQpCiAgdmFyIG5ld0NoZWNrc3VtID0gc2hhMjU2eDIocGF5bG9hZCkKCiAgaWYgKGNoZWNrc3VtWzBdIF4gbmV3Q2hlY2tzdW1bMF0gfAogICAgICBjaGVja3N1bVsxXSBeIG5ld0NoZWNrc3VtWzFdIHwKICAgICAgY2hlY2tzdW1bMl0gXiBuZXdDaGVja3N1bVsyXSB8CiAgICAgIGNoZWNrc3VtWzNdIF4gbmV3Q2hlY2tzdW1bM10pIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjaGVja3N1bScpCgogIHJldHVybiBwYXlsb2FkCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGVuY29kZTogZW5jb2RlLAogIGRlY29kZTogZGVjb2RlCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJiczU4Ijo3MywiYnVmZmVyIjo3MCwiY3JlYXRlLWhhc2giOjgyfV0sNzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGEsIGIpIHsKICBpZiAodHlwZW9mIGEuY29tcGFyZSA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGEuY29tcGFyZShiKQogIGlmIChhID09PSBiKSByZXR1cm4gMAoKICB2YXIgeCA9IGEubGVuZ3RoCiAgdmFyIHkgPSBiLmxlbmd0aAoKICB2YXIgaSA9IDAKICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSkKICB3aGlsZSAoaSA8IGxlbikgewogICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrCgogICAgKytpCiAgfQoKICBpZiAoaSAhPT0gbGVuKSB7CiAgICB4ID0gYVtpXQogICAgeSA9IGJbaV0KICB9CgogIGlmICh4IDwgeSkgcmV0dXJuIC0xCiAgaWYgKHkgPCB4KSByZXR1cm4gMQogIHJldHVybiAwCn0KCgp9LHt9XSw3NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhLCBiKSB7CglpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7CgkJdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpOwoJfQoKCWlmIChhID09PSBiKSB7CgkJcmV0dXJuIHRydWU7Cgl9CgoJaWYgKHR5cGVvZiBhLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJykgewoJCXJldHVybiBhLmVxdWFscyhiKTsKCX0KCglpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCWZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgewoJCWlmIChhW2ldICE9PSBiW2ldKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgoJcmV0dXJuIHRydWU7Cn07Cgp9KS5jYWxsKHRoaXMseyJpc0J1ZmZlciI6cmVxdWlyZSgiLi4vaXMtYnVmZmVyL2luZGV4LmpzIil9KQp9LHsiLi4vaXMtYnVmZmVyL2luZGV4LmpzIjoxMzB9XSw3NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXZlcnNlIChhKSB7CiAgdmFyIGxlbmd0aCA9IGEubGVuZ3RoCiAgdmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIobGVuZ3RoKQoKICBmb3IgKHZhciBpID0gMCwgaiA9IGxlbmd0aCAtIDE7IGkgPCBsZW5ndGg7ICsraSwgLS1qKSB7CiAgICBidWZmZXJbaV0gPSBhW2pdCiAgfQoKICByZXR1cm4gYnVmZmVyCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwfV0sNzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geG9yIChhLCBiKSB7CiAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCkKICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcihsZW5ndGgpCgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKICAgIGJ1ZmZlcltpXSA9IGFbaV0gXiBiW2ldCiAgfQoKICByZXR1cm4gYnVmZmVyCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwfV0sNzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCdzdHJlYW0nKS5UcmFuc2Zvcm0KdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyJykuU3RyaW5nRGVjb2Rlcgptb2R1bGUuZXhwb3J0cyA9IENpcGhlckJhc2UKaW5oZXJpdHMoQ2lwaGVyQmFzZSwgVHJhbnNmb3JtKQpmdW5jdGlvbiBDaXBoZXJCYXNlIChoYXNoTW9kZSkgewogIFRyYW5zZm9ybS5jYWxsKHRoaXMpCiAgdGhpcy5oYXNoTW9kZSA9IHR5cGVvZiBoYXNoTW9kZSA9PT0gJ3N0cmluZycKICBpZiAodGhpcy5oYXNoTW9kZSkgewogICAgdGhpc1toYXNoTW9kZV0gPSB0aGlzLl9maW5hbE9yRGlnZXN0CiAgfSBlbHNlIHsKICAgIHRoaXMuZmluYWwgPSB0aGlzLl9maW5hbE9yRGlnZXN0CiAgfQogIHRoaXMuX2RlY29kZXIgPSBudWxsCiAgdGhpcy5fZW5jb2RpbmcgPSBudWxsCn0KQ2lwaGVyQmFzZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRhdGEsIGlucHV0RW5jLCBvdXRwdXRFbmMpIHsKICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7CiAgICBkYXRhID0gbmV3IEJ1ZmZlcihkYXRhLCBpbnB1dEVuYykKICB9CiAgdmFyIG91dERhdGEgPSB0aGlzLl91cGRhdGUoZGF0YSkKICBpZiAodGhpcy5oYXNoTW9kZSkgewogICAgcmV0dXJuIHRoaXMKICB9CiAgaWYgKG91dHB1dEVuYykgewogICAgb3V0RGF0YSA9IHRoaXMuX3RvU3RyaW5nKG91dERhdGEsIG91dHB1dEVuYykKICB9CiAgcmV0dXJuIG91dERhdGEKfQoKQ2lwaGVyQmFzZS5wcm90b3R5cGUuc2V0QXV0b1BhZGRpbmcgPSBmdW5jdGlvbiAoKSB7fQoKQ2lwaGVyQmFzZS5wcm90b3R5cGUuZ2V0QXV0aFRhZyA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ3RyeWluZyB0byBnZXQgYXV0aCB0YWcgaW4gdW5zdXBwb3J0ZWQgc3RhdGUnKQp9CgpDaXBoZXJCYXNlLnByb3RvdHlwZS5zZXRBdXRoVGFnID0gZnVuY3Rpb24gKCkgewogIHRocm93IG5ldyBFcnJvcigndHJ5aW5nIHRvIHNldCBhdXRoIHRhZyBpbiB1bnN1cHBvcnRlZCBzdGF0ZScpCn0KCkNpcGhlckJhc2UucHJvdG90eXBlLnNldEFBRCA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ3RyeWluZyB0byBzZXQgYWFkIGluIHVuc3VwcG9ydGVkIHN0YXRlJykKfQoKQ2lwaGVyQmFzZS5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uIChkYXRhLCBfLCBuZXh0KSB7CiAgdmFyIGVycgogIHRyeSB7CiAgICBpZiAodGhpcy5oYXNoTW9kZSkgewogICAgICB0aGlzLl91cGRhdGUoZGF0YSkKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucHVzaCh0aGlzLl91cGRhdGUoZGF0YSkpCiAgICB9CiAgfSBjYXRjaCAoZSkgewogICAgZXJyID0gZQogIH0gZmluYWxseSB7CiAgICBuZXh0KGVycikKICB9Cn0KQ2lwaGVyQmFzZS5wcm90b3R5cGUuX2ZsdXNoID0gZnVuY3Rpb24gKGRvbmUpIHsKICB2YXIgZXJyCiAgdHJ5IHsKICAgIHRoaXMucHVzaCh0aGlzLl9maW5hbCgpKQogIH0gY2F0Y2ggKGUpIHsKICAgIGVyciA9IGUKICB9IGZpbmFsbHkgewogICAgZG9uZShlcnIpCiAgfQp9CkNpcGhlckJhc2UucHJvdG90eXBlLl9maW5hbE9yRGlnZXN0ID0gZnVuY3Rpb24gKG91dHB1dEVuYykgewogIHZhciBvdXREYXRhID0gdGhpcy5fZmluYWwoKSB8fCBuZXcgQnVmZmVyKCcnKQogIGlmIChvdXRwdXRFbmMpIHsKICAgIG91dERhdGEgPSB0aGlzLl90b1N0cmluZyhvdXREYXRhLCBvdXRwdXRFbmMsIHRydWUpCiAgfQogIHJldHVybiBvdXREYXRhCn0KCkNpcGhlckJhc2UucHJvdG90eXBlLl90b1N0cmluZyA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jLCBmaW5hbCkgewogIGlmICghdGhpcy5fZGVjb2RlcikgewogICAgdGhpcy5fZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYykKICAgIHRoaXMuX2VuY29kaW5nID0gZW5jCiAgfQogIGlmICh0aGlzLl9lbmNvZGluZyAhPT0gZW5jKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhblwndCBzd2l0Y2ggZW5jb2RpbmdzJykKICB9CiAgdmFyIG91dCA9IHRoaXMuX2RlY29kZXIud3JpdGUodmFsdWUpCiAgaWYgKGZpbmFsKSB7CiAgICBvdXQgKz0gdGhpcy5fZGVjb2Rlci5lbmQoKQogIH0KICByZXR1cm4gb3V0Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwLCJpbmhlcml0cyI6MTI5LCJzdHJlYW0iOjE3MSwic3RyaW5nX2RlY29kZXIiOjE3Mn1dLDgwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgovLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmAKLy8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuCgpmdW5jdGlvbiBpc0FycmF5KGFyZykgewogIGlmIChBcnJheS5pc0FycmF5KSB7CiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpOwogIH0KICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJzsKfQpleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5OwoKZnVuY3Rpb24gaXNCb29sZWFuKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7Cn0KZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47CgpmdW5jdGlvbiBpc051bGwoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gbnVsbDsKfQpleHBvcnRzLmlzTnVsbCA9IGlzTnVsbDsKCmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykgewogIHJldHVybiBhcmcgPT0gbnVsbDsKfQpleHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7CgpmdW5jdGlvbiBpc051bWJlcihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7Cn0KZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyOwoKZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnOwp9CmV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZzsKCmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJzsKfQpleHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7CgpmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09PSB2b2lkIDA7Cn0KZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkOwoKZnVuY3Rpb24gaXNSZWdFeHAocmUpIHsKICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJzsKfQpleHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7CgpmdW5jdGlvbiBpc09iamVjdChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwp9CmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDsKCmZ1bmN0aW9uIGlzRGF0ZShkKSB7CiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7Cn0KZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7CgpmdW5jdGlvbiBpc0Vycm9yKGUpIHsKICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7Cn0KZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjsKCmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7Cn0KZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjsKCmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykgewogIHJldHVybiBhcmcgPT09IG51bGwgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8CiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sCiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnOwp9CmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTsKCmV4cG9ydHMuaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXI7CgpmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTsKfQoKfSkuY2FsbCh0aGlzLHsiaXNCdWZmZXIiOnJlcXVpcmUoIi4uLy4uL2lzLWJ1ZmZlci9pbmRleC5qcyIpfSkKfSx7Ii4uLy4uL2lzLWJ1ZmZlci9pbmRleC5qcyI6MTMwfV0sODE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJ2VsbGlwdGljJyk7CnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVDREgoY3VydmUpIHsKCXJldHVybiBuZXcgRUNESChjdXJ2ZSk7Cn07Cgp2YXIgYWxpYXNlcyA9IHsKCXNlY3AyNTZrMTogewoJCW5hbWU6ICdzZWNwMjU2azEnLAoJCWJ5dGVMZW5ndGg6IDMyCgl9LAoJc2VjcDIyNHIxOiB7CgkJbmFtZTogJ3AyMjQnLAoJCWJ5dGVMZW5ndGg6IDI4Cgl9LAoJcHJpbWUyNTZ2MTogewoJCW5hbWU6ICdwMjU2JywKCQlieXRlTGVuZ3RoOiAzMgoJfSwKCXByaW1lMTkydjE6IHsKCQluYW1lOiAncDE5MicsCgkJYnl0ZUxlbmd0aDogMjQKCX0sCgllZDI1NTE5OiB7CgkJbmFtZTogJ2VkMjU1MTknLAoJCWJ5dGVMZW5ndGg6IDMyCgl9LAoJc2VjcDM4NHIxOiB7CgkJbmFtZTogJ3AzODQnLAoJCWJ5dGVMZW5ndGg6IDQ4Cgl9LAoJc2VjcDUyMXIxOiB7CgkJbmFtZTogJ3A1MjEnLAoJCWJ5dGVMZW5ndGg6IDY2Cgl9Cn07CgphbGlhc2VzLnAyMjQgPSBhbGlhc2VzLnNlY3AyMjRyMTsKYWxpYXNlcy5wMjU2ID0gYWxpYXNlcy5zZWNwMjU2cjEgPSBhbGlhc2VzLnByaW1lMjU2djE7CmFsaWFzZXMucDE5MiA9IGFsaWFzZXMuc2VjcDE5MnIxID0gYWxpYXNlcy5wcmltZTE5MnYxOwphbGlhc2VzLnAzODQgPSBhbGlhc2VzLnNlY3AzODRyMTsKYWxpYXNlcy5wNTIxID0gYWxpYXNlcy5zZWNwNTIxcjE7CgpmdW5jdGlvbiBFQ0RIKGN1cnZlKSB7Cgl0aGlzLmN1cnZlVHlwZSA9IGFsaWFzZXNbY3VydmVdOwoJaWYgKCF0aGlzLmN1cnZlVHlwZSApIHsKCQl0aGlzLmN1cnZlVHlwZSA9IHsKCQkJbmFtZTogY3VydmUKCQl9OwoJfQoJdGhpcy5jdXJ2ZSA9IG5ldyBlbGxpcHRpYy5lYyh0aGlzLmN1cnZlVHlwZS5uYW1lKTsKCXRoaXMua2V5cyA9IHZvaWQgMDsKfQoKRUNESC5wcm90b3R5cGUuZ2VuZXJhdGVLZXlzID0gZnVuY3Rpb24gKGVuYywgZm9ybWF0KSB7Cgl0aGlzLmtleXMgPSB0aGlzLmN1cnZlLmdlbktleVBhaXIoKTsKCXJldHVybiB0aGlzLmdldFB1YmxpY0tleShlbmMsIGZvcm1hdCk7Cn07CgpFQ0RILnByb3RvdHlwZS5jb21wdXRlU2VjcmV0ID0gZnVuY3Rpb24gKG90aGVyLCBpbmVuYywgZW5jKSB7CglpbmVuYyA9IGluZW5jIHx8ICd1dGY4JzsKCWlmICghQnVmZmVyLmlzQnVmZmVyKG90aGVyKSkgewoJCW90aGVyID0gbmV3IEJ1ZmZlcihvdGhlciwgaW5lbmMpOwoJfQoJdmFyIG90aGVyUHViID0gdGhpcy5jdXJ2ZS5rZXlGcm9tUHVibGljKG90aGVyKS5nZXRQdWJsaWMoKTsKCXZhciBvdXQgPSBvdGhlclB1Yi5tdWwodGhpcy5rZXlzLmdldFByaXZhdGUoKSkuZ2V0WCgpOwoJcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKG91dCwgZW5jLCB0aGlzLmN1cnZlVHlwZS5ieXRlTGVuZ3RoKTsKfTsKCkVDREgucHJvdG90eXBlLmdldFB1YmxpY0tleSA9IGZ1bmN0aW9uIChlbmMsIGZvcm1hdCkgewoJdmFyIGtleSA9IHRoaXMua2V5cy5nZXRQdWJsaWMoZm9ybWF0ID09PSAnY29tcHJlc3NlZCcsIHRydWUpOwoJaWYgKGZvcm1hdCA9PT0gJ2h5YnJpZCcpIHsKCQlpZiAoa2V5W2tleS5sZW5ndGggLSAxXSAlIDIpIHsKCQkJa2V5WzBdID0gNzsKCQl9IGVsc2UgewoJCQlrZXkgWzBdID0gNjsKCQl9Cgl9CglyZXR1cm4gZm9ybWF0UmV0dXJuVmFsdWUoa2V5LCBlbmMpOwp9OwoKRUNESC5wcm90b3R5cGUuZ2V0UHJpdmF0ZUtleSA9IGZ1bmN0aW9uIChlbmMpIHsKCXJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLmtleXMuZ2V0UHJpdmF0ZSgpLCBlbmMpOwp9OwoKRUNESC5wcm90b3R5cGUuc2V0UHVibGljS2V5ID0gZnVuY3Rpb24gKHB1YiwgZW5jKSB7CgllbmMgPSBlbmMgfHwgJ3V0ZjgnOwoJaWYgKCFCdWZmZXIuaXNCdWZmZXIocHViKSkgewoJCXB1YiA9IG5ldyBCdWZmZXIocHViLCBlbmMpOwoJfQoJdGhpcy5rZXlzLl9pbXBvcnRQdWJsaWMocHViKTsKCXJldHVybiB0aGlzOwp9OwoKRUNESC5wcm90b3R5cGUuc2V0UHJpdmF0ZUtleSA9IGZ1bmN0aW9uIChwcml2LCBlbmMpIHsKCWVuYyA9IGVuYyB8fCAndXRmOCc7CglpZiAoIUJ1ZmZlci5pc0J1ZmZlcihwcml2KSkgewoJCXByaXYgPSBuZXcgQnVmZmVyKHByaXYsIGVuYyk7Cgl9Cgl2YXIgX3ByaXYgPSBuZXcgQk4ocHJpdik7CglfcHJpdiA9IF9wcml2LnRvU3RyaW5nKDE2KTsKCXRoaXMua2V5cy5faW1wb3J0UHJpdmF0ZShfcHJpdik7CglyZXR1cm4gdGhpczsKfTsKCmZ1bmN0aW9uIGZvcm1hdFJldHVyblZhbHVlKGJuLCBlbmMsIGxlbikgewoJaWYgKCFBcnJheS5pc0FycmF5KGJuKSkgewoJCWJuID0gYm4udG9BcnJheSgpOwoJfQoJdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoYm4pOwoJaWYgKGxlbiAmJiBidWYubGVuZ3RoIDwgbGVuKSB7CgkJdmFyIHplcm9zID0gbmV3IEJ1ZmZlcihsZW4gLSBidWYubGVuZ3RoKTsKCQl6ZXJvcy5maWxsKDApOwoJCWJ1ZiA9IEJ1ZmZlci5jb25jYXQoW3plcm9zLCBidWZdKTsKCX0KCWlmICghZW5jKSB7CgkJcmV0dXJuIGJ1ZjsKCX0gZWxzZSB7CgkJcmV0dXJuIGJ1Zi50b1N0cmluZyhlbmMpOwoJfQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYm4uanMiOjQxLCJidWZmZXIiOjcwLCJlbGxpcHRpYyI6MTAyfV0sODI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgbWQ1ID0gcmVxdWlyZSgnLi9tZDUnKQp2YXIgcm1kMTYwID0gcmVxdWlyZSgncmlwZW1kMTYwJykKdmFyIHNoYSA9IHJlcXVpcmUoJ3NoYS5qcycpCgp2YXIgQmFzZSA9IHJlcXVpcmUoJ2NpcGhlci1iYXNlJykKCmZ1bmN0aW9uIEhhc2hOb0NvbnN0cnVjdG9yKGhhc2gpIHsKICBCYXNlLmNhbGwodGhpcywgJ2RpZ2VzdCcpCgogIHRoaXMuX2hhc2ggPSBoYXNoCiAgdGhpcy5idWZmZXJzID0gW10KfQoKaW5oZXJpdHMoSGFzaE5vQ29uc3RydWN0b3IsIEJhc2UpCgpIYXNoTm9Db25zdHJ1Y3Rvci5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgdGhpcy5idWZmZXJzLnB1c2goZGF0YSkKfQoKSGFzaE5vQ29uc3RydWN0b3IucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgYnVmID0gQnVmZmVyLmNvbmNhdCh0aGlzLmJ1ZmZlcnMpCiAgdmFyIHIgPSB0aGlzLl9oYXNoKGJ1ZikKICB0aGlzLmJ1ZmZlcnMgPSBudWxsCgogIHJldHVybiByCn0KCmZ1bmN0aW9uIEhhc2goaGFzaCkgewogIEJhc2UuY2FsbCh0aGlzLCAnZGlnZXN0JykKCiAgdGhpcy5faGFzaCA9IGhhc2gKfQoKaW5oZXJpdHMoSGFzaCwgQmFzZSkKCkhhc2gucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkgewogIHRoaXMuX2hhc2gudXBkYXRlKGRhdGEpCn0KCkhhc2gucHJvdG90eXBlLl9maW5hbCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5faGFzaC5kaWdlc3QoKQp9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUhhc2ggKGFsZykgewogIGFsZyA9IGFsZy50b0xvd2VyQ2FzZSgpCiAgaWYgKCdtZDUnID09PSBhbGcpIHJldHVybiBuZXcgSGFzaE5vQ29uc3RydWN0b3IobWQ1KQogIGlmICgncm1kMTYwJyA9PT0gYWxnIHx8ICdyaXBlbWQxNjAnID09PSBhbGcpIHJldHVybiBuZXcgSGFzaE5vQ29uc3RydWN0b3Iocm1kMTYwKQoKICByZXR1cm4gbmV3IEhhc2goc2hhKGFsZykpCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL21kNSI6ODQsImJ1ZmZlciI6NzAsImNpcGhlci1iYXNlIjo3OSwiaW5oZXJpdHMiOjEyOSwicmlwZW1kMTYwIjoxNTksInNoYS5qcyI6MTYzfV0sODM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKdmFyIGludFNpemUgPSA0Owp2YXIgemVyb0J1ZmZlciA9IG5ldyBCdWZmZXIoaW50U2l6ZSk7IHplcm9CdWZmZXIuZmlsbCgwKTsKdmFyIGNocnN6ID0gODsKCmZ1bmN0aW9uIHRvQXJyYXkoYnVmLCBiaWdFbmRpYW4pIHsKICBpZiAoKGJ1Zi5sZW5ndGggJSBpbnRTaXplKSAhPT0gMCkgewogICAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGggKyAoaW50U2l6ZSAtIChidWYubGVuZ3RoICUgaW50U2l6ZSkpOwogICAgYnVmID0gQnVmZmVyLmNvbmNhdChbYnVmLCB6ZXJvQnVmZmVyXSwgbGVuKTsKICB9CgogIHZhciBhcnIgPSBbXTsKICB2YXIgZm4gPSBiaWdFbmRpYW4gPyBidWYucmVhZEludDMyQkUgOiBidWYucmVhZEludDMyTEU7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWYubGVuZ3RoOyBpICs9IGludFNpemUpIHsKICAgIGFyci5wdXNoKGZuLmNhbGwoYnVmLCBpKSk7CiAgfQogIHJldHVybiBhcnI7Cn0KCmZ1bmN0aW9uIHRvQnVmZmVyKGFyciwgc2l6ZSwgYmlnRW5kaWFuKSB7CiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc2l6ZSk7CiAgdmFyIGZuID0gYmlnRW5kaWFuID8gYnVmLndyaXRlSW50MzJCRSA6IGJ1Zi53cml0ZUludDMyTEU7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgIGZuLmNhbGwoYnVmLCBhcnJbaV0sIGkgKiA0LCB0cnVlKTsKICB9CiAgcmV0dXJuIGJ1ZjsKfQoKZnVuY3Rpb24gaGFzaChidWYsIGZuLCBoYXNoU2l6ZSwgYmlnRW5kaWFuKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgYnVmID0gbmV3IEJ1ZmZlcihidWYpOwogIHZhciBhcnIgPSBmbih0b0FycmF5KGJ1ZiwgYmlnRW5kaWFuKSwgYnVmLmxlbmd0aCAqIGNocnN6KTsKICByZXR1cm4gdG9CdWZmZXIoYXJyLCBoYXNoU2l6ZSwgYmlnRW5kaWFuKTsKfQpleHBvcnRzLmhhc2ggPSBoYXNoOwp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MH1dLDg0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwovKgogKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFJTQSBEYXRhIFNlY3VyaXR5LCBJbmMuIE1ENSBNZXNzYWdlCiAqIERpZ2VzdCBBbGdvcml0aG0sIGFzIGRlZmluZWQgaW4gUkZDIDEzMjEuCiAqIFZlcnNpb24gMi4xIENvcHlyaWdodCAoQykgUGF1bCBKb2huc3RvbiAxOTk5IC0gMjAwMi4KICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldAogKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2UKICogU2VlIGh0dHA6Ly9wYWpob21lLm9yZy51ay9jcnlwdC9tZDUgZm9yIG1vcmUgaW5mby4KICovCgp2YXIgaGVscGVycyA9IHJlcXVpcmUoJy4vaGVscGVycycpOwoKLyoKICogQ2FsY3VsYXRlIHRoZSBNRDUgb2YgYW4gYXJyYXkgb2YgbGl0dGxlLWVuZGlhbiB3b3JkcywgYW5kIGEgYml0IGxlbmd0aAogKi8KZnVuY3Rpb24gY29yZV9tZDUoeCwgbGVuKQp7CiAgLyogYXBwZW5kIHBhZGRpbmcgKi8KICB4W2xlbiA+PiA1XSB8PSAweDgwIDw8ICgobGVuKSAlIDMyKTsKICB4WygoKGxlbiArIDY0KSA+Pj4gOSkgPDwgNCkgKyAxNF0gPSBsZW47CgogIHZhciBhID0gIDE3MzI1ODQxOTM7CiAgdmFyIGIgPSAtMjcxNzMzODc5OwogIHZhciBjID0gLTE3MzI1ODQxOTQ7CiAgdmFyIGQgPSAgMjcxNzMzODc4OwoKICBmb3IodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMTYpCiAgewogICAgdmFyIG9sZGEgPSBhOwogICAgdmFyIG9sZGIgPSBiOwogICAgdmFyIG9sZGMgPSBjOwogICAgdmFyIG9sZGQgPSBkOwoKICAgIGEgPSBtZDVfZmYoYSwgYiwgYywgZCwgeFtpKyAwXSwgNyAsIC02ODA4NzY5MzYpOwogICAgZCA9IG1kNV9mZihkLCBhLCBiLCBjLCB4W2krIDFdLCAxMiwgLTM4OTU2NDU4Nik7CiAgICBjID0gbWQ1X2ZmKGMsIGQsIGEsIGIsIHhbaSsgMl0sIDE3LCAgNjA2MTA1ODE5KTsKICAgIGIgPSBtZDVfZmYoYiwgYywgZCwgYSwgeFtpKyAzXSwgMjIsIC0xMDQ0NTI1MzMwKTsKICAgIGEgPSBtZDVfZmYoYSwgYiwgYywgZCwgeFtpKyA0XSwgNyAsIC0xNzY0MTg4OTcpOwogICAgZCA9IG1kNV9mZihkLCBhLCBiLCBjLCB4W2krIDVdLCAxMiwgIDEyMDAwODA0MjYpOwogICAgYyA9IG1kNV9mZihjLCBkLCBhLCBiLCB4W2krIDZdLCAxNywgLTE0NzMyMzEzNDEpOwogICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2krIDddLCAyMiwgLTQ1NzA1OTgzKTsKICAgIGEgPSBtZDVfZmYoYSwgYiwgYywgZCwgeFtpKyA4XSwgNyAsICAxNzcwMDM1NDE2KTsKICAgIGQgPSBtZDVfZmYoZCwgYSwgYiwgYywgeFtpKyA5XSwgMTIsIC0xOTU4NDE0NDE3KTsKICAgIGMgPSBtZDVfZmYoYywgZCwgYSwgYiwgeFtpKzEwXSwgMTcsIC00MjA2Myk7CiAgICBiID0gbWQ1X2ZmKGIsIGMsIGQsIGEsIHhbaSsxMV0sIDIyLCAtMTk5MDQwNDE2Mik7CiAgICBhID0gbWQ1X2ZmKGEsIGIsIGMsIGQsIHhbaSsxMl0sIDcgLCAgMTgwNDYwMzY4Mik7CiAgICBkID0gbWQ1X2ZmKGQsIGEsIGIsIGMsIHhbaSsxM10sIDEyLCAtNDAzNDExMDEpOwogICAgYyA9IG1kNV9mZihjLCBkLCBhLCBiLCB4W2krMTRdLCAxNywgLTE1MDIwMDIyOTApOwogICAgYiA9IG1kNV9mZihiLCBjLCBkLCBhLCB4W2krMTVdLCAyMiwgIDEyMzY1MzUzMjkpOwoKICAgIGEgPSBtZDVfZ2coYSwgYiwgYywgZCwgeFtpKyAxXSwgNSAsIC0xNjU3OTY1MTApOwogICAgZCA9IG1kNV9nZyhkLCBhLCBiLCBjLCB4W2krIDZdLCA5ICwgLTEwNjk1MDE2MzIpOwogICAgYyA9IG1kNV9nZyhjLCBkLCBhLCBiLCB4W2krMTFdLCAxNCwgIDY0MzcxNzcxMyk7CiAgICBiID0gbWQ1X2dnKGIsIGMsIGQsIGEsIHhbaSsgMF0sIDIwLCAtMzczODk3MzAyKTsKICAgIGEgPSBtZDVfZ2coYSwgYiwgYywgZCwgeFtpKyA1XSwgNSAsIC03MDE1NTg2OTEpOwogICAgZCA9IG1kNV9nZyhkLCBhLCBiLCBjLCB4W2krMTBdLCA5ICwgIDM4MDE2MDgzKTsKICAgIGMgPSBtZDVfZ2coYywgZCwgYSwgYiwgeFtpKzE1XSwgMTQsIC02NjA0NzgzMzUpOwogICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2krIDRdLCAyMCwgLTQwNTUzNzg0OCk7CiAgICBhID0gbWQ1X2dnKGEsIGIsIGMsIGQsIHhbaSsgOV0sIDUgLCAgNTY4NDQ2NDM4KTsKICAgIGQgPSBtZDVfZ2coZCwgYSwgYiwgYywgeFtpKzE0XSwgOSAsIC0xMDE5ODAzNjkwKTsKICAgIGMgPSBtZDVfZ2coYywgZCwgYSwgYiwgeFtpKyAzXSwgMTQsIC0xODczNjM5NjEpOwogICAgYiA9IG1kNV9nZyhiLCBjLCBkLCBhLCB4W2krIDhdLCAyMCwgIDExNjM1MzE1MDEpOwogICAgYSA9IG1kNV9nZyhhLCBiLCBjLCBkLCB4W2krMTNdLCA1ICwgLTE0NDQ2ODE0NjcpOwogICAgZCA9IG1kNV9nZyhkLCBhLCBiLCBjLCB4W2krIDJdLCA5ICwgLTUxNDAzNzg0KTsKICAgIGMgPSBtZDVfZ2coYywgZCwgYSwgYiwgeFtpKyA3XSwgMTQsICAxNzM1MzI4NDczKTsKICAgIGIgPSBtZDVfZ2coYiwgYywgZCwgYSwgeFtpKzEyXSwgMjAsIC0xOTI2NjA3NzM0KTsKCiAgICBhID0gbWQ1X2hoKGEsIGIsIGMsIGQsIHhbaSsgNV0sIDQgLCAtMzc4NTU4KTsKICAgIGQgPSBtZDVfaGgoZCwgYSwgYiwgYywgeFtpKyA4XSwgMTEsIC0yMDIyNTc0NDYzKTsKICAgIGMgPSBtZDVfaGgoYywgZCwgYSwgYiwgeFtpKzExXSwgMTYsICAxODM5MDMwNTYyKTsKICAgIGIgPSBtZDVfaGgoYiwgYywgZCwgYSwgeFtpKzE0XSwgMjMsIC0zNTMwOTU1Nik7CiAgICBhID0gbWQ1X2hoKGEsIGIsIGMsIGQsIHhbaSsgMV0sIDQgLCAtMTUzMDk5MjA2MCk7CiAgICBkID0gbWQ1X2hoKGQsIGEsIGIsIGMsIHhbaSsgNF0sIDExLCAgMTI3Mjg5MzM1Myk7CiAgICBjID0gbWQ1X2hoKGMsIGQsIGEsIGIsIHhbaSsgN10sIDE2LCAtMTU1NDk3NjMyKTsKICAgIGIgPSBtZDVfaGgoYiwgYywgZCwgYSwgeFtpKzEwXSwgMjMsIC0xMDk0NzMwNjQwKTsKICAgIGEgPSBtZDVfaGgoYSwgYiwgYywgZCwgeFtpKzEzXSwgNCAsICA2ODEyNzkxNzQpOwogICAgZCA9IG1kNV9oaChkLCBhLCBiLCBjLCB4W2krIDBdLCAxMSwgLTM1ODUzNzIyMik7CiAgICBjID0gbWQ1X2hoKGMsIGQsIGEsIGIsIHhbaSsgM10sIDE2LCAtNzIyNTIxOTc5KTsKICAgIGIgPSBtZDVfaGgoYiwgYywgZCwgYSwgeFtpKyA2XSwgMjMsICA3NjAyOTE4OSk7CiAgICBhID0gbWQ1X2hoKGEsIGIsIGMsIGQsIHhbaSsgOV0sIDQgLCAtNjQwMzY0NDg3KTsKICAgIGQgPSBtZDVfaGgoZCwgYSwgYiwgYywgeFtpKzEyXSwgMTEsIC00MjE4MTU4MzUpOwogICAgYyA9IG1kNV9oaChjLCBkLCBhLCBiLCB4W2krMTVdLCAxNiwgIDUzMDc0MjUyMCk7CiAgICBiID0gbWQ1X2hoKGIsIGMsIGQsIGEsIHhbaSsgMl0sIDIzLCAtOTk1MzM4NjUxKTsKCiAgICBhID0gbWQ1X2lpKGEsIGIsIGMsIGQsIHhbaSsgMF0sIDYgLCAtMTk4NjMwODQ0KTsKICAgIGQgPSBtZDVfaWkoZCwgYSwgYiwgYywgeFtpKyA3XSwgMTAsICAxMTI2ODkxNDE1KTsKICAgIGMgPSBtZDVfaWkoYywgZCwgYSwgYiwgeFtpKzE0XSwgMTUsIC0xNDE2MzU0OTA1KTsKICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpKyA1XSwgMjEsIC01NzQzNDA1NSk7CiAgICBhID0gbWQ1X2lpKGEsIGIsIGMsIGQsIHhbaSsxMl0sIDYgLCAgMTcwMDQ4NTU3MSk7CiAgICBkID0gbWQ1X2lpKGQsIGEsIGIsIGMsIHhbaSsgM10sIDEwLCAtMTg5NDk4NjYwNik7CiAgICBjID0gbWQ1X2lpKGMsIGQsIGEsIGIsIHhbaSsxMF0sIDE1LCAtMTA1MTUyMyk7CiAgICBiID0gbWQ1X2lpKGIsIGMsIGQsIGEsIHhbaSsgMV0sIDIxLCAtMjA1NDkyMjc5OSk7CiAgICBhID0gbWQ1X2lpKGEsIGIsIGMsIGQsIHhbaSsgOF0sIDYgLCAgMTg3MzMxMzM1OSk7CiAgICBkID0gbWQ1X2lpKGQsIGEsIGIsIGMsIHhbaSsxNV0sIDEwLCAtMzA2MTE3NDQpOwogICAgYyA9IG1kNV9paShjLCBkLCBhLCBiLCB4W2krIDZdLCAxNSwgLTE1NjAxOTgzODApOwogICAgYiA9IG1kNV9paShiLCBjLCBkLCBhLCB4W2krMTNdLCAyMSwgIDEzMDkxNTE2NDkpOwogICAgYSA9IG1kNV9paShhLCBiLCBjLCBkLCB4W2krIDRdLCA2ICwgLTE0NTUyMzA3MCk7CiAgICBkID0gbWQ1X2lpKGQsIGEsIGIsIGMsIHhbaSsxMV0sIDEwLCAtMTEyMDIxMDM3OSk7CiAgICBjID0gbWQ1X2lpKGMsIGQsIGEsIGIsIHhbaSsgMl0sIDE1LCAgNzE4Nzg3MjU5KTsKICAgIGIgPSBtZDVfaWkoYiwgYywgZCwgYSwgeFtpKyA5XSwgMjEsIC0zNDM0ODU1NTEpOwoKICAgIGEgPSBzYWZlX2FkZChhLCBvbGRhKTsKICAgIGIgPSBzYWZlX2FkZChiLCBvbGRiKTsKICAgIGMgPSBzYWZlX2FkZChjLCBvbGRjKTsKICAgIGQgPSBzYWZlX2FkZChkLCBvbGRkKTsKICB9CiAgcmV0dXJuIEFycmF5KGEsIGIsIGMsIGQpOwoKfQoKLyoKICogVGhlc2UgZnVuY3Rpb25zIGltcGxlbWVudCB0aGUgZm91ciBiYXNpYyBvcGVyYXRpb25zIHRoZSBhbGdvcml0aG0gdXNlcy4KICovCmZ1bmN0aW9uIG1kNV9jbW4ocSwgYSwgYiwgeCwgcywgdCkKewogIHJldHVybiBzYWZlX2FkZChiaXRfcm9sKHNhZmVfYWRkKHNhZmVfYWRkKGEsIHEpLCBzYWZlX2FkZCh4LCB0KSksIHMpLGIpOwp9CmZ1bmN0aW9uIG1kNV9mZihhLCBiLCBjLCBkLCB4LCBzLCB0KQp7CiAgcmV0dXJuIG1kNV9jbW4oKGIgJiBjKSB8ICgofmIpICYgZCksIGEsIGIsIHgsIHMsIHQpOwp9CmZ1bmN0aW9uIG1kNV9nZyhhLCBiLCBjLCBkLCB4LCBzLCB0KQp7CiAgcmV0dXJuIG1kNV9jbW4oKGIgJiBkKSB8IChjICYgKH5kKSksIGEsIGIsIHgsIHMsIHQpOwp9CmZ1bmN0aW9uIG1kNV9oaChhLCBiLCBjLCBkLCB4LCBzLCB0KQp7CiAgcmV0dXJuIG1kNV9jbW4oYiBeIGMgXiBkLCBhLCBiLCB4LCBzLCB0KTsKfQpmdW5jdGlvbiBtZDVfaWkoYSwgYiwgYywgZCwgeCwgcywgdCkKewogIHJldHVybiBtZDVfY21uKGMgXiAoYiB8ICh+ZCkpLCBhLCBiLCB4LCBzLCB0KTsKfQoKLyoKICogQWRkIGludGVnZXJzLCB3cmFwcGluZyBhdCAyXjMyLiBUaGlzIHVzZXMgMTYtYml0IG9wZXJhdGlvbnMgaW50ZXJuYWxseQogKiB0byB3b3JrIGFyb3VuZCBidWdzIGluIHNvbWUgSlMgaW50ZXJwcmV0ZXJzLgogKi8KZnVuY3Rpb24gc2FmZV9hZGQoeCwgeSkKewogIHZhciBsc3cgPSAoeCAmIDB4RkZGRikgKyAoeSAmIDB4RkZGRik7CiAgdmFyIG1zdyA9ICh4ID4+IDE2KSArICh5ID4+IDE2KSArIChsc3cgPj4gMTYpOwogIHJldHVybiAobXN3IDw8IDE2KSB8IChsc3cgJiAweEZGRkYpOwp9CgovKgogKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuCiAqLwpmdW5jdGlvbiBiaXRfcm9sKG51bSwgY250KQp7CiAgcmV0dXJuIChudW0gPDwgY250KSB8IChudW0gPj4+ICgzMiAtIGNudCkpOwp9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1kNShidWYpIHsKICByZXR1cm4gaGVscGVycy5oYXNoKGJ1ZiwgY29yZV9tZDUsIDE2KTsKfTsKfSx7Ii4vaGVscGVycyI6ODN9XSw4NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKJ3VzZSBzdHJpY3QnOwp2YXIgY3JlYXRlSGFzaCA9IHJlcXVpcmUoJ2NyZWF0ZS1oYXNoL2Jyb3dzZXInKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQoKdmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJ3N0cmVhbScpLlRyYW5zZm9ybQoKdmFyIFpFUk9TID0gbmV3IEJ1ZmZlcigxMjgpClpFUk9TLmZpbGwoMCkKCmZ1bmN0aW9uIEhtYWMoYWxnLCBrZXkpIHsKICBUcmFuc2Zvcm0uY2FsbCh0aGlzKQogIGFsZyA9IGFsZy50b0xvd2VyQ2FzZSgpCiAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7CiAgICBrZXkgPSBuZXcgQnVmZmVyKGtleSkKICB9CgogIHZhciBibG9ja3NpemUgPSAoYWxnID09PSAnc2hhNTEyJyB8fCBhbGcgPT09ICdzaGEzODQnKSA/IDEyOCA6IDY0CgogIHRoaXMuX2FsZyA9IGFsZwogIHRoaXMuX2tleSA9IGtleQoKICBpZiAoa2V5Lmxlbmd0aCA+IGJsb2Nrc2l6ZSkgewogICAga2V5ID0gY3JlYXRlSGFzaChhbGcpLnVwZGF0ZShrZXkpLmRpZ2VzdCgpCgogIH0gZWxzZSBpZiAoa2V5Lmxlbmd0aCA8IGJsb2Nrc2l6ZSkgewogICAga2V5ID0gQnVmZmVyLmNvbmNhdChba2V5LCBaRVJPU10sIGJsb2Nrc2l6ZSkKICB9CgogIHZhciBpcGFkID0gdGhpcy5faXBhZCA9IG5ldyBCdWZmZXIoYmxvY2tzaXplKQogIHZhciBvcGFkID0gdGhpcy5fb3BhZCA9IG5ldyBCdWZmZXIoYmxvY2tzaXplKQoKICBmb3IgKHZhciBpID0gMDsgaSA8IGJsb2Nrc2l6ZTsgaSsrKSB7CiAgICBpcGFkW2ldID0ga2V5W2ldIF4gMHgzNgogICAgb3BhZFtpXSA9IGtleVtpXSBeIDB4NUMKICB9CgogIHRoaXMuX2hhc2ggPSBjcmVhdGVIYXNoKGFsZykudXBkYXRlKGlwYWQpCn0KCmluaGVyaXRzKEhtYWMsIFRyYW5zZm9ybSkKCkhtYWMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhLCBlbmMpIHsKICB0aGlzLl9oYXNoLnVwZGF0ZShkYXRhLCBlbmMpCgogIHJldHVybiB0aGlzCn0KCkhtYWMucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoZGF0YSwgXywgbmV4dCkgewogIHRoaXMuX2hhc2gudXBkYXRlKGRhdGEpCgogIG5leHQoKQp9CgpIbWFjLnByb3RvdHlwZS5fZmx1c2ggPSBmdW5jdGlvbiAobmV4dCkgewogIHRoaXMucHVzaCh0aGlzLmRpZ2VzdCgpKQoKICBuZXh0KCkKfQoKSG1hYy5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKGVuYykgewogIHZhciBoID0gdGhpcy5faGFzaC5kaWdlc3QoKQoKICByZXR1cm4gY3JlYXRlSGFzaCh0aGlzLl9hbGcpLnVwZGF0ZSh0aGlzLl9vcGFkKS51cGRhdGUoaCkuZGlnZXN0KGVuYykKfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVIbWFjKGFsZywga2V5KSB7CiAgcmV0dXJuIG5ldyBIbWFjKGFsZywga2V5KQp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYnVmZmVyIjo3MCwiY3JlYXRlLWhhc2gvYnJvd3NlciI6ODIsImluaGVyaXRzIjoxMjksInN0cmVhbSI6MTcxfV0sODY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCcKCmV4cG9ydHMucmFuZG9tQnl0ZXMgPSBleHBvcnRzLnJuZyA9IGV4cG9ydHMucHNldWRvUmFuZG9tQnl0ZXMgPSBleHBvcnRzLnBybmcgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpCmV4cG9ydHMuY3JlYXRlSGFzaCA9IGV4cG9ydHMuSGFzaCA9IHJlcXVpcmUoJ2NyZWF0ZS1oYXNoJykKZXhwb3J0cy5jcmVhdGVIbWFjID0gZXhwb3J0cy5IbWFjID0gcmVxdWlyZSgnY3JlYXRlLWhtYWMnKQoKdmFyIGhhc2hlcyA9IFsnc2hhMScsICdzaGEyMjQnLCAnc2hhMjU2JywgJ3NoYTM4NCcsICdzaGE1MTInLCAnbWQ1JywgJ3JtZDE2MCddLmNvbmNhdChPYmplY3Qua2V5cyhyZXF1aXJlKCdicm93c2VyaWZ5LXNpZ24vYWxnb3MnKSkpCmV4cG9ydHMuZ2V0SGFzaGVzID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBoYXNoZXMKfQoKdmFyIHAgPSByZXF1aXJlKCdwYmtkZjInKQpleHBvcnRzLnBia2RmMiA9IHAucGJrZGYyCmV4cG9ydHMucGJrZGYyU3luYyA9IHAucGJrZGYyU3luYwoKdmFyIGFlcyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktY2lwaGVyJykKO1sKICAnQ2lwaGVyJywKICAnY3JlYXRlQ2lwaGVyJywKICAnQ2lwaGVyaXYnLAogICdjcmVhdGVDaXBoZXJpdicsCiAgJ0RlY2lwaGVyJywKICAnY3JlYXRlRGVjaXBoZXInLAogICdEZWNpcGhlcml2JywKICAnY3JlYXRlRGVjaXBoZXJpdicsCiAgJ2dldENpcGhlcnMnLAogICdsaXN0Q2lwaGVycycKXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICBleHBvcnRzW2tleV0gPSBhZXNba2V5XQp9KQoKdmFyIGRoID0gcmVxdWlyZSgnZGlmZmllLWhlbGxtYW4nKQo7WwogICdEaWZmaWVIZWxsbWFuR3JvdXAnLAogICdjcmVhdGVEaWZmaWVIZWxsbWFuR3JvdXAnLAogICdnZXREaWZmaWVIZWxsbWFuJywKICAnY3JlYXRlRGlmZmllSGVsbG1hbicsCiAgJ0RpZmZpZUhlbGxtYW4nCl0uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgZXhwb3J0c1trZXldID0gZGhba2V5XQp9KQoKdmFyIHNpZ24gPSByZXF1aXJlKCdicm93c2VyaWZ5LXNpZ24nKQo7WwogICdjcmVhdGVTaWduJywKICAnU2lnbicsCiAgJ2NyZWF0ZVZlcmlmeScsCiAgJ1ZlcmlmeScKXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICBleHBvcnRzW2tleV0gPSBzaWduW2tleV0KfSkKCmV4cG9ydHMuY3JlYXRlRUNESCA9IHJlcXVpcmUoJ2NyZWF0ZS1lY2RoJykKCnZhciBwdWJsaWNFbmNyeXB0ID0gcmVxdWlyZSgncHVibGljLWVuY3J5cHQnKQoKO1sKICAncHVibGljRW5jcnlwdCcsCiAgJ3ByaXZhdGVFbmNyeXB0JywKICAncHVibGljRGVjcnlwdCcsCiAgJ3ByaXZhdGVEZWNyeXB0JwpdLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogIGV4cG9ydHNba2V5XSA9IHB1YmxpY0VuY3J5cHRba2V5XQp9KQoKLy8gdGhlIGxlYXN0IEkgY2FuIGRvIGlzIG1ha2UgZXJyb3IgbWVzc2FnZXMgZm9yIHRoZSByZXN0IG9mIHRoZSBub2RlLmpzL2NyeXB0byBhcGkuCjtbCiAgJ2NyZWF0ZUNyZWRlbnRpYWxzJwpdLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICBleHBvcnRzW25hbWVdID0gZnVuY3Rpb24gKCkgewogICAgdGhyb3cgbmV3IEVycm9yKFsKICAgICAgJ3NvcnJ5LCAnICsgbmFtZSArICcgaXMgbm90IGltcGxlbWVudGVkIHlldCcsCiAgICAgICd3ZSBhY2NlcHQgcHVsbCByZXF1ZXN0cycsCiAgICAgICdodHRwczovL2dpdGh1Yi5jb20vY3J5cHRvLWJyb3dzZXJpZnkvY3J5cHRvLWJyb3dzZXJpZnknCiAgICBdLmpvaW4oJ1xuJykpCiAgfQp9KQoKfSx7ImJyb3dzZXJpZnktY2lwaGVyIjo1OSwiYnJvd3NlcmlmeS1zaWduIjo2NCwiYnJvd3NlcmlmeS1zaWduL2FsZ29zIjo2MywiY3JlYXRlLWVjZGgiOjgxLCJjcmVhdGUtaGFzaCI6ODIsImNyZWF0ZS1obWFjIjo4NSwiZGlmZmllLWhlbGxtYW4iOjkzLCJwYmtkZjIiOjEzOSwicHVibGljLWVuY3J5cHQiOjE0MiwicmFuZG9tYnl0ZXMiOjE0OH1dLDg3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKZXhwb3J0cy51dGlscyA9IHJlcXVpcmUoJy4vZGVzL3V0aWxzJyk7CmV4cG9ydHMuQ2lwaGVyID0gcmVxdWlyZSgnLi9kZXMvY2lwaGVyJyk7CmV4cG9ydHMuREVTID0gcmVxdWlyZSgnLi9kZXMvZGVzJyk7CmV4cG9ydHMuQ0JDID0gcmVxdWlyZSgnLi9kZXMvY2JjJyk7CmV4cG9ydHMuRURFID0gcmVxdWlyZSgnLi9kZXMvZWRlJyk7Cgp9LHsiLi9kZXMvY2JjIjo4OCwiLi9kZXMvY2lwaGVyIjo4OSwiLi9kZXMvZGVzIjo5MCwiLi9kZXMvZWRlIjo5MSwiLi9kZXMvdXRpbHMiOjkyfV0sODg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnbWluaW1hbGlzdGljLWFzc2VydCcpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwoKdmFyIHByb3RvID0ge307CgpmdW5jdGlvbiBDQkNTdGF0ZShpdikgewogIGFzc2VydC5lcXVhbChpdi5sZW5ndGgsIDgsICdJbnZhbGlkIElWIGxlbmd0aCcpOwoKICB0aGlzLml2ID0gbmV3IEFycmF5KDgpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdi5sZW5ndGg7IGkrKykKICAgIHRoaXMuaXZbaV0gPSBpdltpXTsKfQoKZnVuY3Rpb24gaW5zdGFudGlhdGUoQmFzZSkgewogIGZ1bmN0aW9uIENCQyhvcHRpb25zKSB7CiAgICBCYXNlLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgICB0aGlzLl9jYmNJbml0KCk7CiAgfQogIGluaGVyaXRzKENCQywgQmFzZSk7CgogIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvdG8pOwogIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgdmFyIGtleSA9IGtleXNbaV07CiAgICBDQkMucHJvdG90eXBlW2tleV0gPSBwcm90b1trZXldOwogIH0KCiAgQ0JDLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IENCQyhvcHRpb25zKTsKICB9OwoKICByZXR1cm4gQ0JDOwp9CgpleHBvcnRzLmluc3RhbnRpYXRlID0gaW5zdGFudGlhdGU7Cgpwcm90by5fY2JjSW5pdCA9IGZ1bmN0aW9uIF9jYmNJbml0KCkgewogIHZhciBzdGF0ZSA9IG5ldyBDQkNTdGF0ZSh0aGlzLm9wdGlvbnMuaXYpOwogIHRoaXMuX2NiY1N0YXRlID0gc3RhdGU7Cn07Cgpwcm90by5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShpbnAsIGluT2ZmLCBvdXQsIG91dE9mZikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2NiY1N0YXRlOwogIHZhciBzdXBlclByb3RvID0gdGhpcy5jb25zdHJ1Y3Rvci5zdXBlcl8ucHJvdG90eXBlOwoKICB2YXIgaXYgPSBzdGF0ZS5pdjsKICBpZiAodGhpcy50eXBlID09PSAnZW5jcnlwdCcpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ibG9ja1NpemU7IGkrKykKICAgICAgaXZbaV0gXj0gaW5wW2luT2ZmICsgaV07CgogICAgc3VwZXJQcm90by5fdXBkYXRlLmNhbGwodGhpcywgaXYsIDAsIG91dCwgb3V0T2ZmKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspCiAgICAgIGl2W2ldID0gb3V0W291dE9mZiArIGldOwogIH0gZWxzZSB7CiAgICBzdXBlclByb3RvLl91cGRhdGUuY2FsbCh0aGlzLCBpbnAsIGluT2ZmLCBvdXQsIG91dE9mZik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgaSsrKQogICAgICBvdXRbb3V0T2ZmICsgaV0gXj0gaXZbaV07CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgaSsrKQogICAgICBpdltpXSA9IGlucFtpbk9mZiArIGldOwogIH0KfTsKCn0seyJpbmhlcml0cyI6MTI5LCJtaW5pbWFsaXN0aWMtYXNzZXJ0IjoxMzR9XSw4OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBhc3NlcnQgPSByZXF1aXJlKCdtaW5pbWFsaXN0aWMtYXNzZXJ0Jyk7CgpmdW5jdGlvbiBDaXBoZXIob3B0aW9ucykgewogIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CgogIHRoaXMudHlwZSA9IHRoaXMub3B0aW9ucy50eXBlOwogIHRoaXMuYmxvY2tTaXplID0gODsKICB0aGlzLl9pbml0KCk7CgogIHRoaXMuYnVmZmVyID0gbmV3IEFycmF5KHRoaXMuYmxvY2tTaXplKTsKICB0aGlzLmJ1ZmZlck9mZiA9IDA7Cn0KbW9kdWxlLmV4cG9ydHMgPSBDaXBoZXI7CgpDaXBoZXIucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gX2luaXQoKSB7CiAgLy8gTWlnaHQgYmUgb3ZlcnJpZGVkCn07CgpDaXBoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7CiAgaWYgKGRhdGEubGVuZ3RoID09PSAwKQogICAgcmV0dXJuIFtdOwoKICBpZiAodGhpcy50eXBlID09PSAnZGVjcnlwdCcpCiAgICByZXR1cm4gdGhpcy5fdXBkYXRlRGVjcnlwdChkYXRhKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5fdXBkYXRlRW5jcnlwdChkYXRhKTsKfTsKCkNpcGhlci5wcm90b3R5cGUuX2J1ZmZlciA9IGZ1bmN0aW9uIF9idWZmZXIoZGF0YSwgb2ZmKSB7CiAgLy8gQXBwZW5kIGRhdGEgdG8gYnVmZmVyCiAgdmFyIG1pbiA9IE1hdGgubWluKHRoaXMuYnVmZmVyLmxlbmd0aCAtIHRoaXMuYnVmZmVyT2ZmLCBkYXRhLmxlbmd0aCAtIG9mZik7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaW47IGkrKykKICAgIHRoaXMuYnVmZmVyW3RoaXMuYnVmZmVyT2ZmICsgaV0gPSBkYXRhW29mZiArIGldOwogIHRoaXMuYnVmZmVyT2ZmICs9IG1pbjsKCiAgLy8gU2hpZnQgbmV4dAogIHJldHVybiBtaW47Cn07CgpDaXBoZXIucHJvdG90eXBlLl9mbHVzaEJ1ZmZlciA9IGZ1bmN0aW9uIF9mbHVzaEJ1ZmZlcihvdXQsIG9mZikgewogIHRoaXMuX3VwZGF0ZSh0aGlzLmJ1ZmZlciwgMCwgb3V0LCBvZmYpOwogIHRoaXMuYnVmZmVyT2ZmID0gMDsKICByZXR1cm4gdGhpcy5ibG9ja1NpemU7Cn07CgpDaXBoZXIucHJvdG90eXBlLl91cGRhdGVFbmNyeXB0ID0gZnVuY3Rpb24gX3VwZGF0ZUVuY3J5cHQoZGF0YSkgewogIHZhciBpbnB1dE9mZiA9IDA7CiAgdmFyIG91dHB1dE9mZiA9IDA7CgogIHZhciBjb3VudCA9ICgodGhpcy5idWZmZXJPZmYgKyBkYXRhLmxlbmd0aCkgLyB0aGlzLmJsb2NrU2l6ZSkgfCAwOwogIHZhciBvdXQgPSBuZXcgQXJyYXkoY291bnQgKiB0aGlzLmJsb2NrU2l6ZSk7CgogIGlmICh0aGlzLmJ1ZmZlck9mZiAhPT0gMCkgewogICAgaW5wdXRPZmYgKz0gdGhpcy5fYnVmZmVyKGRhdGEsIGlucHV0T2ZmKTsKCiAgICBpZiAodGhpcy5idWZmZXJPZmYgPT09IHRoaXMuYnVmZmVyLmxlbmd0aCkKICAgICAgb3V0cHV0T2ZmICs9IHRoaXMuX2ZsdXNoQnVmZmVyKG91dCwgb3V0cHV0T2ZmKTsKICB9CgogIC8vIFdyaXRlIGJsb2NrcwogIHZhciBtYXggPSBkYXRhLmxlbmd0aCAtICgoZGF0YS5sZW5ndGggLSBpbnB1dE9mZikgJSB0aGlzLmJsb2NrU2l6ZSk7CiAgZm9yICg7IGlucHV0T2ZmIDwgbWF4OyBpbnB1dE9mZiArPSB0aGlzLmJsb2NrU2l6ZSkgewogICAgdGhpcy5fdXBkYXRlKGRhdGEsIGlucHV0T2ZmLCBvdXQsIG91dHB1dE9mZik7CiAgICBvdXRwdXRPZmYgKz0gdGhpcy5ibG9ja1NpemU7CiAgfQoKICAvLyBRdWV1ZSByZXN0CiAgZm9yICg7IGlucHV0T2ZmIDwgZGF0YS5sZW5ndGg7IGlucHV0T2ZmKyssIHRoaXMuYnVmZmVyT2ZmKyspCiAgICB0aGlzLmJ1ZmZlclt0aGlzLmJ1ZmZlck9mZl0gPSBkYXRhW2lucHV0T2ZmXTsKCiAgcmV0dXJuIG91dDsKfTsKCkNpcGhlci5wcm90b3R5cGUuX3VwZGF0ZURlY3J5cHQgPSBmdW5jdGlvbiBfdXBkYXRlRGVjcnlwdChkYXRhKSB7CiAgdmFyIGlucHV0T2ZmID0gMDsKICB2YXIgb3V0cHV0T2ZmID0gMDsKCiAgdmFyIGNvdW50ID0gTWF0aC5jZWlsKCh0aGlzLmJ1ZmZlck9mZiArIGRhdGEubGVuZ3RoKSAvIHRoaXMuYmxvY2tTaXplKSAtIDE7CiAgdmFyIG91dCA9IG5ldyBBcnJheShjb3VudCAqIHRoaXMuYmxvY2tTaXplKTsKCiAgLy8gVE9ETyhpbmR1dG55KTogb3B0aW1pemUgaXQsIHRoaXMgaXMgZmFyIGZyb20gb3B0aW1hbAogIGZvciAoOyBjb3VudCA+IDA7IGNvdW50LS0pIHsKICAgIGlucHV0T2ZmICs9IHRoaXMuX2J1ZmZlcihkYXRhLCBpbnB1dE9mZik7CiAgICBvdXRwdXRPZmYgKz0gdGhpcy5fZmx1c2hCdWZmZXIob3V0LCBvdXRwdXRPZmYpOwogIH0KCiAgLy8gQnVmZmVyIHJlc3Qgb2YgdGhlIGlucHV0CiAgaW5wdXRPZmYgKz0gdGhpcy5fYnVmZmVyKGRhdGEsIGlucHV0T2ZmKTsKCiAgcmV0dXJuIG91dDsKfTsKCkNpcGhlci5wcm90b3R5cGUuZmluYWwgPSBmdW5jdGlvbiBmaW5hbChidWZmZXIpIHsKICB2YXIgZmlyc3Q7CiAgaWYgKGJ1ZmZlcikKICAgIGZpcnN0ID0gdGhpcy51cGRhdGUoYnVmZmVyKTsKCiAgdmFyIGxhc3Q7CiAgaWYgKHRoaXMudHlwZSA9PT0gJ2VuY3J5cHQnKQogICAgbGFzdCA9IHRoaXMuX2ZpbmFsRW5jcnlwdCgpOwogIGVsc2UKICAgIGxhc3QgPSB0aGlzLl9maW5hbERlY3J5cHQoKTsKCiAgaWYgKGZpcnN0KQogICAgcmV0dXJuIGZpcnN0LmNvbmNhdChsYXN0KTsKICBlbHNlCiAgICByZXR1cm4gbGFzdDsKfTsKCkNpcGhlci5wcm90b3R5cGUuX3BhZCA9IGZ1bmN0aW9uIF9wYWQoYnVmZmVyLCBvZmYpIHsKICBpZiAob2ZmID09PSAwKQogICAgcmV0dXJuIGZhbHNlOwoKICB3aGlsZSAob2ZmIDwgYnVmZmVyLmxlbmd0aCkKICAgIGJ1ZmZlcltvZmYrK10gPSAwOwoKICByZXR1cm4gdHJ1ZTsKfTsKCkNpcGhlci5wcm90b3R5cGUuX2ZpbmFsRW5jcnlwdCA9IGZ1bmN0aW9uIF9maW5hbEVuY3J5cHQoKSB7CiAgaWYgKCF0aGlzLl9wYWQodGhpcy5idWZmZXIsIHRoaXMuYnVmZmVyT2ZmKSkKICAgIHJldHVybiBbXTsKCiAgdmFyIG91dCA9IG5ldyBBcnJheSh0aGlzLmJsb2NrU2l6ZSk7CiAgdGhpcy5fdXBkYXRlKHRoaXMuYnVmZmVyLCAwLCBvdXQsIDApOwogIHJldHVybiBvdXQ7Cn07CgpDaXBoZXIucHJvdG90eXBlLl91bnBhZCA9IGZ1bmN0aW9uIF91bnBhZChidWZmZXIpIHsKICByZXR1cm4gYnVmZmVyOwp9OwoKQ2lwaGVyLnByb3RvdHlwZS5fZmluYWxEZWNyeXB0ID0gZnVuY3Rpb24gX2ZpbmFsRGVjcnlwdCgpIHsKICBhc3NlcnQuZXF1YWwodGhpcy5idWZmZXJPZmYsIHRoaXMuYmxvY2tTaXplLCAnTm90IGVub3VnaCBkYXRhIHRvIGRlY3J5cHQnKTsKICB2YXIgb3V0ID0gbmV3IEFycmF5KHRoaXMuYmxvY2tTaXplKTsKICB0aGlzLl9mbHVzaEJ1ZmZlcihvdXQsIDApOwoKICByZXR1cm4gdGhpcy5fdW5wYWQob3V0KTsKfTsKCn0seyJtaW5pbWFsaXN0aWMtYXNzZXJ0IjoxMzR9XSw5MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBhc3NlcnQgPSByZXF1aXJlKCdtaW5pbWFsaXN0aWMtYXNzZXJ0Jyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgZGVzID0gcmVxdWlyZSgnLi4vZGVzJyk7CnZhciB1dGlscyA9IGRlcy51dGlsczsKdmFyIENpcGhlciA9IGRlcy5DaXBoZXI7CgpmdW5jdGlvbiBERVNTdGF0ZSgpIHsKICB0aGlzLnRtcCA9IG5ldyBBcnJheSgyKTsKICB0aGlzLmtleXMgPSBudWxsOwp9CgpmdW5jdGlvbiBERVMob3B0aW9ucykgewogIENpcGhlci5jYWxsKHRoaXMsIG9wdGlvbnMpOwoKICB2YXIgc3RhdGUgPSBuZXcgREVTU3RhdGUoKTsKICB0aGlzLl9kZXNTdGF0ZSA9IHN0YXRlOwoKICB0aGlzLmRlcml2ZUtleXMoc3RhdGUsIG9wdGlvbnMua2V5KTsKfQppbmhlcml0cyhERVMsIENpcGhlcik7Cm1vZHVsZS5leHBvcnRzID0gREVTOwoKREVTLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBERVMob3B0aW9ucyk7Cn07Cgp2YXIgc2hpZnRUYWJsZSA9IFsKICAxLCAxLCAyLCAyLCAyLCAyLCAyLCAyLAogIDEsIDIsIDIsIDIsIDIsIDIsIDIsIDEKXTsKCkRFUy5wcm90b3R5cGUuZGVyaXZlS2V5cyA9IGZ1bmN0aW9uIGRlcml2ZUtleXMoc3RhdGUsIGtleSkgewogIHN0YXRlLmtleXMgPSBuZXcgQXJyYXkoMTYgKiAyKTsKCiAgYXNzZXJ0LmVxdWFsKGtleS5sZW5ndGgsIHRoaXMuYmxvY2tTaXplLCAnSW52YWxpZCBrZXkgbGVuZ3RoJyk7CgogIHZhciBrTCA9IHV0aWxzLnJlYWRVSW50MzJCRShrZXksIDApOwogIHZhciBrUiA9IHV0aWxzLnJlYWRVSW50MzJCRShrZXksIDQpOwoKICB1dGlscy5wYzEoa0wsIGtSLCBzdGF0ZS50bXAsIDApOwogIGtMID0gc3RhdGUudG1wWzBdOwogIGtSID0gc3RhdGUudG1wWzFdOwogIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhdGUua2V5cy5sZW5ndGg7IGkgKz0gMikgewogICAgdmFyIHNoaWZ0ID0gc2hpZnRUYWJsZVtpID4+PiAxXTsKICAgIGtMID0gdXRpbHMucjI4c2hsKGtMLCBzaGlmdCk7CiAgICBrUiA9IHV0aWxzLnIyOHNobChrUiwgc2hpZnQpOwogICAgdXRpbHMucGMyKGtMLCBrUiwgc3RhdGUua2V5cywgaSk7CiAgfQp9OwoKREVTLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShpbnAsIGluT2ZmLCBvdXQsIG91dE9mZikgewogIHZhciBzdGF0ZSA9IHRoaXMuX2Rlc1N0YXRlOwoKICB2YXIgbCA9IHV0aWxzLnJlYWRVSW50MzJCRShpbnAsIGluT2ZmKTsKICB2YXIgciA9IHV0aWxzLnJlYWRVSW50MzJCRShpbnAsIGluT2ZmICsgNCk7CgogIC8vIEluaXRpYWwgUGVybXV0YXRpb24KICB1dGlscy5pcChsLCByLCBzdGF0ZS50bXAsIDApOwogIGwgPSBzdGF0ZS50bXBbMF07CiAgciA9IHN0YXRlLnRtcFsxXTsKCiAgaWYgKHRoaXMudHlwZSA9PT0gJ2VuY3J5cHQnKQogICAgdGhpcy5fZW5jcnlwdChzdGF0ZSwgbCwgciwgc3RhdGUudG1wLCAwKTsKICBlbHNlCiAgICB0aGlzLl9kZWNyeXB0KHN0YXRlLCBsLCByLCBzdGF0ZS50bXAsIDApOwoKICBsID0gc3RhdGUudG1wWzBdOwogIHIgPSBzdGF0ZS50bXBbMV07CgogIHV0aWxzLndyaXRlVUludDMyQkUob3V0LCBsLCBvdXRPZmYpOwogIHV0aWxzLndyaXRlVUludDMyQkUob3V0LCByLCBvdXRPZmYgKyA0KTsKfTsKCkRFUy5wcm90b3R5cGUuX3BhZCA9IGZ1bmN0aW9uIF9wYWQoYnVmZmVyLCBvZmYpIHsKICB2YXIgdmFsdWUgPSBidWZmZXIubGVuZ3RoIC0gb2ZmOwogIGZvciAodmFyIGkgPSBvZmY7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspCiAgICBidWZmZXJbaV0gPSB2YWx1ZTsKCiAgcmV0dXJuIHRydWU7Cn07CgpERVMucHJvdG90eXBlLl91bnBhZCA9IGZ1bmN0aW9uIF91bnBhZChidWZmZXIpIHsKICB2YXIgcGFkID0gYnVmZmVyW2J1ZmZlci5sZW5ndGggLSAxXTsKICBmb3IgKHZhciBpID0gYnVmZmVyLmxlbmd0aCAtIHBhZDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykKICAgIGFzc2VydC5lcXVhbChidWZmZXJbaV0sIHBhZCk7CgogIHJldHVybiBidWZmZXIuc2xpY2UoMCwgYnVmZmVyLmxlbmd0aCAtIHBhZCk7Cn07CgpERVMucHJvdG90eXBlLl9lbmNyeXB0ID0gZnVuY3Rpb24gX2VuY3J5cHQoc3RhdGUsIGxTdGFydCwgclN0YXJ0LCBvdXQsIG9mZikgewogIHZhciBsID0gbFN0YXJ0OwogIHZhciByID0gclN0YXJ0OwoKICAvLyBBcHBseSBmKCkgeDE2IHRpbWVzCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5rZXlzLmxlbmd0aDsgaSArPSAyKSB7CiAgICB2YXIga2V5TCA9IHN0YXRlLmtleXNbaV07CiAgICB2YXIga2V5UiA9IHN0YXRlLmtleXNbaSArIDFdOwoKICAgIC8vIGYociwgaykKICAgIHV0aWxzLmV4cGFuZChyLCBzdGF0ZS50bXAsIDApOwoKICAgIGtleUwgXj0gc3RhdGUudG1wWzBdOwogICAga2V5UiBePSBzdGF0ZS50bXBbMV07CiAgICB2YXIgcyA9IHV0aWxzLnN1YnN0aXR1dGUoa2V5TCwga2V5Uik7CiAgICB2YXIgZiA9IHV0aWxzLnBlcm11dGUocyk7CgogICAgdmFyIHQgPSByOwogICAgciA9IChsIF4gZikgPj4+IDA7CiAgICBsID0gdDsKICB9CgogIC8vIFJldmVyc2UgSW5pdGlhbCBQZXJtdXRhdGlvbgogIHV0aWxzLnJpcChyLCBsLCBvdXQsIG9mZik7Cn07CgpERVMucHJvdG90eXBlLl9kZWNyeXB0ID0gZnVuY3Rpb24gX2RlY3J5cHQoc3RhdGUsIGxTdGFydCwgclN0YXJ0LCBvdXQsIG9mZikgewogIHZhciBsID0gclN0YXJ0OwogIHZhciByID0gbFN0YXJ0OwoKICAvLyBBcHBseSBmKCkgeDE2IHRpbWVzCiAgZm9yICh2YXIgaSA9IHN0YXRlLmtleXMubGVuZ3RoIC0gMjsgaSA+PSAwOyBpIC09IDIpIHsKICAgIHZhciBrZXlMID0gc3RhdGUua2V5c1tpXTsKICAgIHZhciBrZXlSID0gc3RhdGUua2V5c1tpICsgMV07CgogICAgLy8gZihyLCBrKQogICAgdXRpbHMuZXhwYW5kKGwsIHN0YXRlLnRtcCwgMCk7CgogICAga2V5TCBePSBzdGF0ZS50bXBbMF07CiAgICBrZXlSIF49IHN0YXRlLnRtcFsxXTsKICAgIHZhciBzID0gdXRpbHMuc3Vic3RpdHV0ZShrZXlMLCBrZXlSKTsKICAgIHZhciBmID0gdXRpbHMucGVybXV0ZShzKTsKCiAgICB2YXIgdCA9IGw7CiAgICBsID0gKHIgXiBmKSA+Pj4gMDsKICAgIHIgPSB0OwogIH0KCiAgLy8gUmV2ZXJzZSBJbml0aWFsIFBlcm11dGF0aW9uCiAgdXRpbHMucmlwKGwsIHIsIG91dCwgb2ZmKTsKfTsKCn0seyIuLi9kZXMiOjg3LCJpbmhlcml0cyI6MTI5LCJtaW5pbWFsaXN0aWMtYXNzZXJ0IjoxMzR9XSw5MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBhc3NlcnQgPSByZXF1aXJlKCdtaW5pbWFsaXN0aWMtYXNzZXJ0Jyk7CnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7Cgp2YXIgZGVzID0gcmVxdWlyZSgnLi4vZGVzJyk7CnZhciBDaXBoZXIgPSBkZXMuQ2lwaGVyOwp2YXIgREVTID0gZGVzLkRFUzsKCmZ1bmN0aW9uIEVERVN0YXRlKHR5cGUsIGtleSkgewogIGFzc2VydC5lcXVhbChrZXkubGVuZ3RoLCAyNCwgJ0ludmFsaWQga2V5IGxlbmd0aCcpOwoKICB2YXIgazEgPSBrZXkuc2xpY2UoMCwgOCk7CiAgdmFyIGsyID0ga2V5LnNsaWNlKDgsIDE2KTsKICB2YXIgazMgPSBrZXkuc2xpY2UoMTYsIDI0KTsKCiAgaWYgKHR5cGUgPT09ICdlbmNyeXB0JykgewogICAgdGhpcy5jaXBoZXJzID0gWwogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2VuY3J5cHQnLCBrZXk6IGsxIH0pLAogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2RlY3J5cHQnLCBrZXk6IGsyIH0pLAogICAgICBERVMuY3JlYXRlKHsgdHlwZTogJ2VuY3J5cHQnLCBrZXk6IGszIH0pCiAgICBdOwogIH0gZWxzZSB7CiAgICB0aGlzLmNpcGhlcnMgPSBbCiAgICAgIERFUy5jcmVhdGUoeyB0eXBlOiAnZGVjcnlwdCcsIGtleTogazMgfSksCiAgICAgIERFUy5jcmVhdGUoeyB0eXBlOiAnZW5jcnlwdCcsIGtleTogazIgfSksCiAgICAgIERFUy5jcmVhdGUoeyB0eXBlOiAnZGVjcnlwdCcsIGtleTogazEgfSkKICAgIF07CiAgfQp9CgpmdW5jdGlvbiBFREUob3B0aW9ucykgewogIENpcGhlci5jYWxsKHRoaXMsIG9wdGlvbnMpOwoKICB2YXIgc3RhdGUgPSBuZXcgRURFU3RhdGUodGhpcy50eXBlLCB0aGlzLm9wdGlvbnMua2V5KTsKICB0aGlzLl9lZGVTdGF0ZSA9IHN0YXRlOwp9CmluaGVyaXRzKEVERSwgQ2lwaGVyKTsKCm1vZHVsZS5leHBvcnRzID0gRURFOwoKRURFLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShvcHRpb25zKSB7CiAgcmV0dXJuIG5ldyBFREUob3B0aW9ucyk7Cn07CgpFREUucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiBfdXBkYXRlKGlucCwgaW5PZmYsIG91dCwgb3V0T2ZmKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fZWRlU3RhdGU7CgogIHN0YXRlLmNpcGhlcnNbMF0uX3VwZGF0ZShpbnAsIGluT2ZmLCBvdXQsIG91dE9mZik7CiAgc3RhdGUuY2lwaGVyc1sxXS5fdXBkYXRlKG91dCwgb3V0T2ZmLCBvdXQsIG91dE9mZik7CiAgc3RhdGUuY2lwaGVyc1syXS5fdXBkYXRlKG91dCwgb3V0T2ZmLCBvdXQsIG91dE9mZik7Cn07CgpFREUucHJvdG90eXBlLl9wYWQgPSBERVMucHJvdG90eXBlLl9wYWQ7CkVERS5wcm90b3R5cGUuX3VucGFkID0gREVTLnByb3RvdHlwZS5fdW5wYWQ7Cgp9LHsiLi4vZGVzIjo4NywiaW5oZXJpdHMiOjEyOSwibWluaW1hbGlzdGljLWFzc2VydCI6MTM0fV0sOTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpleHBvcnRzLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRShieXRlcywgb2ZmKSB7CiAgdmFyIHJlcyA9ICAoYnl0ZXNbMCArIG9mZl0gPDwgMjQpIHwKICAgICAgICAgICAgIChieXRlc1sxICsgb2ZmXSA8PCAxNikgfAogICAgICAgICAgICAgKGJ5dGVzWzIgKyBvZmZdIDw8IDgpIHwKICAgICAgICAgICAgIGJ5dGVzWzMgKyBvZmZdOwogIHJldHVybiByZXMgPj4+IDA7Cn07CgpleHBvcnRzLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFKGJ5dGVzLCB2YWx1ZSwgb2ZmKSB7CiAgYnl0ZXNbMCArIG9mZl0gPSB2YWx1ZSA+Pj4gMjQ7CiAgYnl0ZXNbMSArIG9mZl0gPSAodmFsdWUgPj4+IDE2KSAmIDB4ZmY7CiAgYnl0ZXNbMiArIG9mZl0gPSAodmFsdWUgPj4+IDgpICYgMHhmZjsKICBieXRlc1szICsgb2ZmXSA9IHZhbHVlICYgMHhmZjsKfTsKCmV4cG9ydHMuaXAgPSBmdW5jdGlvbiBpcChpbkwsIGluUiwgb3V0LCBvZmYpIHsKICB2YXIgb3V0TCA9IDA7CiAgdmFyIG91dFIgPSAwOwoKICBmb3IgKHZhciBpID0gNjsgaSA+PSAwOyBpIC09IDIpIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0TCA8PD0gMTsKICAgICAgb3V0TCB8PSAoaW5SID4+PiAoaiArIGkpKSAmIDE7CiAgICB9CiAgICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICAgIG91dEwgPDw9IDE7CiAgICAgIG91dEwgfD0gKGluTCA+Pj4gKGogKyBpKSkgJiAxOwogICAgfQogIH0KCiAgZm9yICh2YXIgaSA9IDY7IGkgPj0gMDsgaSAtPSAyKSB7CiAgICBmb3IgKHZhciBqID0gMTsgaiA8PSAyNTsgaiArPSA4KSB7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluUiA+Pj4gKGogKyBpKSkgJiAxOwogICAgfQogICAgZm9yICh2YXIgaiA9IDE7IGogPD0gMjU7IGogKz0gOCkgewogICAgICBvdXRSIDw8PSAxOwogICAgICBvdXRSIHw9IChpbkwgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CgogIG91dFtvZmYgKyAwXSA9IG91dEwgPj4+IDA7CiAgb3V0W29mZiArIDFdID0gb3V0UiA+Pj4gMDsKfTsKCmV4cG9ydHMucmlwID0gZnVuY3Rpb24gcmlwKGluTCwgaW5SLCBvdXQsIG9mZikgewogIHZhciBvdXRMID0gMDsKICB2YXIgb3V0UiA9IDA7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICBmb3IgKHZhciBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7CiAgICAgIG91dEwgPDw9IDE7CiAgICAgIG91dEwgfD0gKGluUiA+Pj4gKGogKyBpKSkgJiAxOwogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpbkwgPj4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CiAgZm9yICh2YXIgaSA9IDQ7IGkgPCA4OyBpKyspIHsKICAgIGZvciAodmFyIGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHsKICAgICAgb3V0UiA8PD0gMTsKICAgICAgb3V0UiB8PSAoaW5SID4+PiAoaiArIGkpKSAmIDE7CiAgICAgIG91dFIgPDw9IDE7CiAgICAgIG91dFIgfD0gKGluTCA+Pj4gKGogKyBpKSkgJiAxOwogICAgfQogIH0KCiAgb3V0W29mZiArIDBdID0gb3V0TCA+Pj4gMDsKICBvdXRbb2ZmICsgMV0gPSBvdXRSID4+PiAwOwp9OwoKZXhwb3J0cy5wYzEgPSBmdW5jdGlvbiBwYzEoaW5MLCBpblIsIG91dCwgb2ZmKSB7CiAgdmFyIG91dEwgPSAwOwogIHZhciBvdXRSID0gMDsKCiAgLy8gNywgMTUsIDIzLCAzMSwgMzksIDQ3LCA1NSwgNjMKICAvLyA2LCAxNCwgMjIsIDMwLCAzOSwgNDcsIDU1LCA2MwogIC8vIDUsIDEzLCAyMSwgMjksIDM5LCA0NywgNTUsIDYzCiAgLy8gNCwgMTIsIDIwLCAyOAogIGZvciAodmFyIGkgPSA3OyBpID49IDU7IGktLSkgewogICAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpblIgPj4gKGogKyBpKSkgJiAxOwogICAgfQogICAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgICBvdXRMIDw8PSAxOwogICAgICBvdXRMIHw9IChpbkwgPj4gKGogKyBpKSkgJiAxOwogICAgfQogIH0KICBmb3IgKHZhciBqID0gMDsgaiA8PSAyNDsgaiArPSA4KSB7CiAgICBvdXRMIDw8PSAxOwogICAgb3V0TCB8PSAoaW5SID4+IChqICsgaSkpICYgMTsKICB9CgogIC8vIDEsIDksIDE3LCAyNSwgMzMsIDQxLCA0OSwgNTcKICAvLyAyLCAxMCwgMTgsIDI2LCAzNCwgNDIsIDUwLCA1OAogIC8vIDMsIDExLCAxOSwgMjcsIDM1LCA0MywgNTEsIDU5CiAgLy8gMzYsIDQ0LCA1MiwgNjAKICBmb3IgKHZhciBpID0gMTsgaSA8PSAzOyBpKyspIHsKICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0UiA8PD0gMTsKICAgICAgb3V0UiB8PSAoaW5SID4+IChqICsgaSkpICYgMTsKICAgIH0KICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDI0OyBqICs9IDgpIHsKICAgICAgb3V0UiA8PD0gMTsKICAgICAgb3V0UiB8PSAoaW5MID4+IChqICsgaSkpICYgMTsKICAgIH0KICB9CiAgZm9yICh2YXIgaiA9IDA7IGogPD0gMjQ7IGogKz0gOCkgewogICAgb3V0UiA8PD0gMTsKICAgIG91dFIgfD0gKGluTCA+PiAoaiArIGkpKSAmIDE7CiAgfQoKICBvdXRbb2ZmICsgMF0gPSBvdXRMID4+PiAwOwogIG91dFtvZmYgKyAxXSA9IG91dFIgPj4+IDA7Cn07CgpleHBvcnRzLnIyOHNobCA9IGZ1bmN0aW9uIHIyOHNobChudW0sIHNoaWZ0KSB7CiAgcmV0dXJuICgobnVtIDw8IHNoaWZ0KSAmIDB4ZmZmZmZmZikgfCAobnVtID4+PiAoMjggLSBzaGlmdCkpOwp9OwoKdmFyIHBjMnRhYmxlID0gWwogIC8vIGluTCA9PiBvdXRMCiAgMTQsIDExLCAxNywgNCwgMjcsIDIzLCAyNSwgMCwKICAxMywgMjIsIDcsIDE4LCA1LCA5LCAxNiwgMjQsCiAgMiwgMjAsIDEyLCAyMSwgMSwgOCwgMTUsIDI2LAoKICAvLyBpblIgPT4gb3V0UgogIDE1LCA0LCAyNSwgMTksIDksIDEsIDI2LCAxNiwKICA1LCAxMSwgMjMsIDgsIDEyLCA3LCAxNywgMCwKICAyMiwgMywgMTAsIDE0LCA2LCAyMCwgMjcsIDI0Cl07CgpleHBvcnRzLnBjMiA9IGZ1bmN0aW9uIHBjMihpbkwsIGluUiwgb3V0LCBvZmYpIHsKICB2YXIgb3V0TCA9IDA7CiAgdmFyIG91dFIgPSAwOwoKICB2YXIgbGVuID0gcGMydGFibGUubGVuZ3RoID4+PiAxOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgIG91dEwgPDw9IDE7CiAgICBvdXRMIHw9IChpbkwgPj4+IHBjMnRhYmxlW2ldKSAmIDB4MTsKICB9CiAgZm9yICh2YXIgaSA9IGxlbjsgaSA8IHBjMnRhYmxlLmxlbmd0aDsgaSsrKSB7CiAgICBvdXRSIDw8PSAxOwogICAgb3V0UiB8PSAoaW5SID4+PiBwYzJ0YWJsZVtpXSkgJiAweDE7CiAgfQoKICBvdXRbb2ZmICsgMF0gPSBvdXRMID4+PiAwOwogIG91dFtvZmYgKyAxXSA9IG91dFIgPj4+IDA7Cn07CgpleHBvcnRzLmV4cGFuZCA9IGZ1bmN0aW9uIGV4cGFuZChyLCBvdXQsIG9mZikgewogIHZhciBvdXRMID0gMDsKICB2YXIgb3V0UiA9IDA7CgogIG91dEwgPSAoKHIgJiAxKSA8PCA1KSB8IChyID4+PiAyNyk7CiAgZm9yICh2YXIgaSA9IDIzOyBpID49IDE1OyBpIC09IDQpIHsKICAgIG91dEwgPDw9IDY7CiAgICBvdXRMIHw9IChyID4+PiBpKSAmIDB4M2Y7CiAgfQogIGZvciAodmFyIGkgPSAxMTsgaSA+PSAzOyBpIC09IDQpIHsKICAgIG91dFIgfD0gKHIgPj4+IGkpICYgMHgzZjsKICAgIG91dFIgPDw9IDY7CiAgfQogIG91dFIgfD0gKChyICYgMHgxZikgPDwgMSkgfCAociA+Pj4gMzEpOwoKICBvdXRbb2ZmICsgMF0gPSBvdXRMID4+PiAwOwogIG91dFtvZmYgKyAxXSA9IG91dFIgPj4+IDA7Cn07Cgp2YXIgc1RhYmxlID0gWwogIDE0LCAwLCA0LCAxNSwgMTMsIDcsIDEsIDQsIDIsIDE0LCAxNSwgMiwgMTEsIDEzLCA4LCAxLAogIDMsIDEwLCAxMCwgNiwgNiwgMTIsIDEyLCAxMSwgNSwgOSwgOSwgNSwgMCwgMywgNywgOCwKICA0LCAxNSwgMSwgMTIsIDE0LCA4LCA4LCAyLCAxMywgNCwgNiwgOSwgMiwgMSwgMTEsIDcsCiAgMTUsIDUsIDEyLCAxMSwgOSwgMywgNywgMTQsIDMsIDEwLCAxMCwgMCwgNSwgNiwgMCwgMTMsCgogIDE1LCAzLCAxLCAxMywgOCwgNCwgMTQsIDcsIDYsIDE1LCAxMSwgMiwgMywgOCwgNCwgMTQsCiAgOSwgMTIsIDcsIDAsIDIsIDEsIDEzLCAxMCwgMTIsIDYsIDAsIDksIDUsIDExLCAxMCwgNSwKICAwLCAxMywgMTQsIDgsIDcsIDEwLCAxMSwgMSwgMTAsIDMsIDQsIDE1LCAxMywgNCwgMSwgMiwKICA1LCAxMSwgOCwgNiwgMTIsIDcsIDYsIDEyLCA5LCAwLCAzLCA1LCAyLCAxNCwgMTUsIDksCgogIDEwLCAxMywgMCwgNywgOSwgMCwgMTQsIDksIDYsIDMsIDMsIDQsIDE1LCA2LCA1LCAxMCwKICAxLCAyLCAxMywgOCwgMTIsIDUsIDcsIDE0LCAxMSwgMTIsIDQsIDExLCAyLCAxNSwgOCwgMSwKICAxMywgMSwgNiwgMTAsIDQsIDEzLCA5LCAwLCA4LCA2LCAxNSwgOSwgMywgOCwgMCwgNywKICAxMSwgNCwgMSwgMTUsIDIsIDE0LCAxMiwgMywgNSwgMTEsIDEwLCA1LCAxNCwgMiwgNywgMTIsCgogIDcsIDEzLCAxMywgOCwgMTQsIDExLCAzLCA1LCAwLCA2LCA2LCAxNSwgOSwgMCwgMTAsIDMsCiAgMSwgNCwgMiwgNywgOCwgMiwgNSwgMTIsIDExLCAxLCAxMiwgMTAsIDQsIDE0LCAxNSwgOSwKICAxMCwgMywgNiwgMTUsIDksIDAsIDAsIDYsIDEyLCAxMCwgMTEsIDEsIDcsIDEzLCAxMywgOCwKICAxNSwgOSwgMSwgNCwgMywgNSwgMTQsIDExLCA1LCAxMiwgMiwgNywgOCwgMiwgNCwgMTQsCgogIDIsIDE0LCAxMiwgMTEsIDQsIDIsIDEsIDEyLCA3LCA0LCAxMCwgNywgMTEsIDEzLCA2LCAxLAogIDgsIDUsIDUsIDAsIDMsIDE1LCAxNSwgMTAsIDEzLCAzLCAwLCA5LCAxNCwgOCwgOSwgNiwKICA0LCAxMSwgMiwgOCwgMSwgMTIsIDExLCA3LCAxMCwgMSwgMTMsIDE0LCA3LCAyLCA4LCAxMywKICAxNSwgNiwgOSwgMTUsIDEyLCAwLCA1LCA5LCA2LCAxMCwgMywgNCwgMCwgNSwgMTQsIDMsCgogIDEyLCAxMCwgMSwgMTUsIDEwLCA0LCAxNSwgMiwgOSwgNywgMiwgMTIsIDYsIDksIDgsIDUsCiAgMCwgNiwgMTMsIDEsIDMsIDEzLCA0LCAxNCwgMTQsIDAsIDcsIDExLCA1LCAzLCAxMSwgOCwKICA5LCA0LCAxNCwgMywgMTUsIDIsIDUsIDEyLCAyLCA5LCA4LCA1LCAxMiwgMTUsIDMsIDEwLAogIDcsIDExLCAwLCAxNCwgNCwgMSwgMTAsIDcsIDEsIDYsIDEzLCAwLCAxMSwgOCwgNiwgMTMsCgogIDQsIDEzLCAxMSwgMCwgMiwgMTEsIDE0LCA3LCAxNSwgNCwgMCwgOSwgOCwgMSwgMTMsIDEwLAogIDMsIDE0LCAxMiwgMywgOSwgNSwgNywgMTIsIDUsIDIsIDEwLCAxNSwgNiwgOCwgMSwgNiwKICAxLCA2LCA0LCAxMSwgMTEsIDEzLCAxMywgOCwgMTIsIDEsIDMsIDQsIDcsIDEwLCAxNCwgNywKICAxMCwgOSwgMTUsIDUsIDYsIDAsIDgsIDE1LCAwLCAxNCwgNSwgMiwgOSwgMywgMiwgMTIsCgogIDEzLCAxLCAyLCAxNSwgOCwgMTMsIDQsIDgsIDYsIDEwLCAxNSwgMywgMTEsIDcsIDEsIDQsCiAgMTAsIDEyLCA5LCA1LCAzLCA2LCAxNCwgMTEsIDUsIDAsIDAsIDE0LCAxMiwgOSwgNywgMiwKICA3LCAyLCAxMSwgMSwgNCwgMTQsIDEsIDcsIDksIDQsIDEyLCAxMCwgMTQsIDgsIDIsIDEzLAogIDAsIDE1LCA2LCAxMiwgMTAsIDksIDEzLCAwLCAxNSwgMywgMywgNSwgNSwgNiwgOCwgMTEKXTsKCmV4cG9ydHMuc3Vic3RpdHV0ZSA9IGZ1bmN0aW9uIHN1YnN0aXR1dGUoaW5MLCBpblIpIHsKICB2YXIgb3V0ID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykgewogICAgdmFyIGIgPSAoaW5MID4+PiAoMTggLSBpICogNikpICYgMHgzZjsKICAgIHZhciBzYiA9IHNUYWJsZVtpICogMHg0MCArIGJdOwoKICAgIG91dCA8PD0gNDsKICAgIG91dCB8PSBzYjsKICB9CiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIHZhciBiID0gKGluUiA+Pj4gKDE4IC0gaSAqIDYpKSAmIDB4M2Y7CiAgICB2YXIgc2IgPSBzVGFibGVbNCAqIDB4NDAgKyBpICogMHg0MCArIGJdOwoKICAgIG91dCA8PD0gNDsKICAgIG91dCB8PSBzYjsKICB9CiAgcmV0dXJuIG91dCA+Pj4gMDsKfTsKCnZhciBwZXJtdXRlVGFibGUgPSBbCiAgMTYsIDI1LCAxMiwgMTEsIDMsIDIwLCA0LCAxNSwgMzEsIDE3LCA5LCA2LCAyNywgMTQsIDEsIDIyLAogIDMwLCAyNCwgOCwgMTgsIDAsIDUsIDI5LCAyMywgMTMsIDE5LCAyLCAyNiwgMTAsIDIxLCAyOCwgNwpdOwoKZXhwb3J0cy5wZXJtdXRlID0gZnVuY3Rpb24gcGVybXV0ZShudW0pIHsKICB2YXIgb3V0ID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IHBlcm11dGVUYWJsZS5sZW5ndGg7IGkrKykgewogICAgb3V0IDw8PSAxOwogICAgb3V0IHw9IChudW0gPj4+IHBlcm11dGVUYWJsZVtpXSkgJiAweDE7CiAgfQogIHJldHVybiBvdXQgPj4+IDA7Cn07CgpleHBvcnRzLnBhZFNwbGl0ID0gZnVuY3Rpb24gcGFkU3BsaXQobnVtLCBzaXplLCBncm91cCkgewogIHZhciBzdHIgPSBudW0udG9TdHJpbmcoMik7CiAgd2hpbGUgKHN0ci5sZW5ndGggPCBzaXplKQogICAgc3RyID0gJzAnICsgc3RyOwoKICB2YXIgb3V0ID0gW107CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpICs9IGdyb3VwKQogICAgb3V0LnB1c2goc3RyLnNsaWNlKGksIGkgKyBncm91cCkpOwogIHJldHVybiBvdXQuam9pbignICcpOwp9OwoKfSx7fV0sOTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBnZW5lcmF0ZVByaW1lID0gcmVxdWlyZSgnLi9saWIvZ2VuZXJhdGVQcmltZScpCnZhciBwcmltZXMgPSByZXF1aXJlKCcuL2xpYi9wcmltZXMuanNvbicpCgp2YXIgREggPSByZXF1aXJlKCcuL2xpYi9kaCcpCgpmdW5jdGlvbiBnZXREaWZmaWVIZWxsbWFuIChtb2QpIHsKICB2YXIgcHJpbWUgPSBuZXcgQnVmZmVyKHByaW1lc1ttb2RdLnByaW1lLCAnaGV4JykKICB2YXIgZ2VuID0gbmV3IEJ1ZmZlcihwcmltZXNbbW9kXS5nZW4sICdoZXgnKQoKICByZXR1cm4gbmV3IERIKHByaW1lLCBnZW4pCn0KCnZhciBFTkNPRElOR1MgPSB7CiAgJ2JpbmFyeSc6IHRydWUsICdoZXgnOiB0cnVlLCAnYmFzZTY0JzogdHJ1ZQp9CgpmdW5jdGlvbiBjcmVhdGVEaWZmaWVIZWxsbWFuIChwcmltZSwgZW5jLCBnZW5lcmF0b3IsIGdlbmMpIHsKICBpZiAoQnVmZmVyLmlzQnVmZmVyKGVuYykgfHwgRU5DT0RJTkdTW2VuY10gPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIGNyZWF0ZURpZmZpZUhlbGxtYW4ocHJpbWUsICdiaW5hcnknLCBlbmMsIGdlbmVyYXRvcikKICB9CgogIGVuYyA9IGVuYyB8fCAnYmluYXJ5JwogIGdlbmMgPSBnZW5jIHx8ICdiaW5hcnknCiAgZ2VuZXJhdG9yID0gZ2VuZXJhdG9yIHx8IG5ldyBCdWZmZXIoWzJdKQoKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihnZW5lcmF0b3IpKSB7CiAgICBnZW5lcmF0b3IgPSBuZXcgQnVmZmVyKGdlbmVyYXRvciwgZ2VuYykKICB9CgogIGlmICh0eXBlb2YgcHJpbWUgPT09ICdudW1iZXInKSB7CiAgICByZXR1cm4gbmV3IERIKGdlbmVyYXRlUHJpbWUocHJpbWUsIGdlbmVyYXRvciksIGdlbmVyYXRvciwgdHJ1ZSkKICB9CgogIGlmICghQnVmZmVyLmlzQnVmZmVyKHByaW1lKSkgewogICAgcHJpbWUgPSBuZXcgQnVmZmVyKHByaW1lLCBlbmMpCiAgfQoKICByZXR1cm4gbmV3IERIKHByaW1lLCBnZW5lcmF0b3IsIHRydWUpCn0KCmV4cG9ydHMuRGlmZmllSGVsbG1hbkdyb3VwID0gZXhwb3J0cy5jcmVhdGVEaWZmaWVIZWxsbWFuR3JvdXAgPSBleHBvcnRzLmdldERpZmZpZUhlbGxtYW4gPSBnZXREaWZmaWVIZWxsbWFuCmV4cG9ydHMuY3JlYXRlRGlmZmllSGVsbG1hbiA9IGV4cG9ydHMuRGlmZmllSGVsbG1hbiA9IGNyZWF0ZURpZmZpZUhlbGxtYW4KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2xpYi9kaCI6OTQsIi4vbGliL2dlbmVyYXRlUHJpbWUiOjk1LCIuL2xpYi9wcmltZXMuanNvbiI6OTYsImJ1ZmZlciI6NzB9XSw5NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIE1pbGxlclJhYmluID0gcmVxdWlyZSgnbWlsbGVyLXJhYmluJyk7CnZhciBtaWxsZXJSYWJpbiA9IG5ldyBNaWxsZXJSYWJpbigpOwp2YXIgVFdFTlRZRk9VUiA9IG5ldyBCTigyNCk7CnZhciBFTEVWRU4gPSBuZXcgQk4oMTEpOwp2YXIgVEVOID0gbmV3IEJOKDEwKTsKdmFyIFRIUkVFID0gbmV3IEJOKDMpOwp2YXIgU0VWRU4gPSBuZXcgQk4oNyk7CnZhciBwcmltZXMgPSByZXF1aXJlKCcuL2dlbmVyYXRlUHJpbWUnKTsKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKTsKbW9kdWxlLmV4cG9ydHMgPSBESDsKCmZ1bmN0aW9uIHNldFB1YmxpY0tleShwdWIsIGVuYykgewogIGVuYyA9IGVuYyB8fCAndXRmOCc7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIocHViKSkgewogICAgcHViID0gbmV3IEJ1ZmZlcihwdWIsIGVuYyk7CiAgfQogIHRoaXMuX3B1YiA9IG5ldyBCTihwdWIpOwogIHJldHVybiB0aGlzOwp9CgpmdW5jdGlvbiBzZXRQcml2YXRlS2V5KHByaXYsIGVuYykgewogIGVuYyA9IGVuYyB8fCAndXRmOCc7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIocHJpdikpIHsKICAgIHByaXYgPSBuZXcgQnVmZmVyKHByaXYsIGVuYyk7CiAgfQogIHRoaXMuX3ByaXYgPSBuZXcgQk4ocHJpdik7CiAgcmV0dXJuIHRoaXM7Cn0KCnZhciBwcmltZUNhY2hlID0ge307CmZ1bmN0aW9uIGNoZWNrUHJpbWUocHJpbWUsIGdlbmVyYXRvcikgewogIHZhciBnZW4gPSBnZW5lcmF0b3IudG9TdHJpbmcoJ2hleCcpOwogIHZhciBoZXggPSBbZ2VuLCBwcmltZS50b1N0cmluZygxNildLmpvaW4oJ18nKTsKICBpZiAoaGV4IGluIHByaW1lQ2FjaGUpIHsKICAgIHJldHVybiBwcmltZUNhY2hlW2hleF07CiAgfQogIHZhciBlcnJvciA9IDA7CgogIGlmIChwcmltZS5pc0V2ZW4oKSB8fAogICAgIXByaW1lcy5zaW1wbGVTaWV2ZSB8fAogICAgIXByaW1lcy5mZXJtYXRUZXN0KHByaW1lKSB8fAogICAgIW1pbGxlclJhYmluLnRlc3QocHJpbWUpKSB7CiAgICAvL25vdCBhIHByaW1lIHNvICsxCiAgICBlcnJvciArPSAxOwoKICAgIGlmIChnZW4gPT09ICcwMicgfHwgZ2VuID09PSAnMDUnKSB7CiAgICAgIC8vIHdlJ2QgYmUgYWJsZSB0byBjaGVjayB0aGUgZ2VuZXJhdG9yCiAgICAgIC8vIGl0IHdvdWxkIGZhaWwgc28gKzgKICAgICAgZXJyb3IgKz0gODsKICAgIH0gZWxzZSB7CiAgICAgIC8vd2Ugd291bGRuJ3QgYmUgYWJsZSB0byB0ZXN0IHRoZSBnZW5lcmF0b3IKICAgICAgLy8gc28gKzQKICAgICAgZXJyb3IgKz0gNDsKICAgIH0KICAgIHByaW1lQ2FjaGVbaGV4XSA9IGVycm9yOwogICAgcmV0dXJuIGVycm9yOwogIH0KICBpZiAoIW1pbGxlclJhYmluLnRlc3QocHJpbWUuc2hybigxKSkpIHsKICAgIC8vbm90IGEgc2FmZSBwcmltZQogICAgZXJyb3IgKz0gMjsKICB9CiAgdmFyIHJlbTsKICBzd2l0Y2ggKGdlbikgewogICAgY2FzZSAnMDInOgogICAgICBpZiAocHJpbWUubW9kKFRXRU5UWUZPVVIpLmNtcChFTEVWRU4pKSB7CiAgICAgICAgLy8gdW5zdWlkYWJsZSBnZW5lcmF0b3IKICAgICAgICBlcnJvciArPSA4OwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSAnMDUnOgogICAgICByZW0gPSBwcmltZS5tb2QoVEVOKTsKICAgICAgaWYgKHJlbS5jbXAoVEhSRUUpICYmIHJlbS5jbXAoU0VWRU4pKSB7CiAgICAgICAgLy8gcHJpbWUgbW9kIDEwIG5lZWRzIHRvIGVxdWFsIDMgb3IgNwogICAgICAgIGVycm9yICs9IDg7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICBlcnJvciArPSA0OwogIH0KICBwcmltZUNhY2hlW2hleF0gPSBlcnJvcjsKICByZXR1cm4gZXJyb3I7Cn0KCmZ1bmN0aW9uIERIKHByaW1lLCBnZW5lcmF0b3IsIG1hbGxlYWJsZSkgewogIHRoaXMuc2V0R2VuZXJhdG9yKGdlbmVyYXRvcik7CiAgdGhpcy5fX3ByaW1lID0gbmV3IEJOKHByaW1lKTsKICB0aGlzLl9wcmltZSA9IEJOLm1vbnQodGhpcy5fX3ByaW1lKTsKICB0aGlzLl9wcmltZUxlbiA9IHByaW1lLmxlbmd0aDsKICB0aGlzLl9wdWIgPSB1bmRlZmluZWQ7CiAgdGhpcy5fcHJpdiA9IHVuZGVmaW5lZDsKICB0aGlzLl9wcmltZUNvZGUgPSB1bmRlZmluZWQ7CiAgaWYgKG1hbGxlYWJsZSkgewogICAgdGhpcy5zZXRQdWJsaWNLZXkgPSBzZXRQdWJsaWNLZXk7CiAgICB0aGlzLnNldFByaXZhdGVLZXkgPSBzZXRQcml2YXRlS2V5OwogIH0gZWxzZSB7CiAgICB0aGlzLl9wcmltZUNvZGUgPSA4OwogIH0KfQpPYmplY3QuZGVmaW5lUHJvcGVydHkoREgucHJvdG90eXBlLCAndmVyaWZ5RXJyb3InLCB7CiAgZW51bWVyYWJsZTogdHJ1ZSwKICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0eXBlb2YgdGhpcy5fcHJpbWVDb2RlICE9PSAnbnVtYmVyJykgewogICAgICB0aGlzLl9wcmltZUNvZGUgPSBjaGVja1ByaW1lKHRoaXMuX19wcmltZSwgdGhpcy5fX2dlbik7CiAgICB9CiAgICByZXR1cm4gdGhpcy5fcHJpbWVDb2RlOwogIH0KfSk7CkRILnByb3RvdHlwZS5nZW5lcmF0ZUtleXMgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKCF0aGlzLl9wcml2KSB7CiAgICB0aGlzLl9wcml2ID0gbmV3IEJOKHJhbmRvbUJ5dGVzKHRoaXMuX3ByaW1lTGVuKSk7CiAgfQogIHRoaXMuX3B1YiA9IHRoaXMuX2dlbi50b1JlZCh0aGlzLl9wcmltZSkucmVkUG93KHRoaXMuX3ByaXYpLmZyb21SZWQoKTsKICByZXR1cm4gdGhpcy5nZXRQdWJsaWNLZXkoKTsKfTsKCkRILnByb3RvdHlwZS5jb21wdXRlU2VjcmV0ID0gZnVuY3Rpb24gKG90aGVyKSB7CiAgb3RoZXIgPSBuZXcgQk4ob3RoZXIpOwogIG90aGVyID0gb3RoZXIudG9SZWQodGhpcy5fcHJpbWUpOwogIHZhciBzZWNyZXQgPSBvdGhlci5yZWRQb3codGhpcy5fcHJpdikuZnJvbVJlZCgpOwogIHZhciBvdXQgPSBuZXcgQnVmZmVyKHNlY3JldC50b0FycmF5KCkpOwogIHZhciBwcmltZSA9IHRoaXMuZ2V0UHJpbWUoKTsKICBpZiAob3V0Lmxlbmd0aCA8IHByaW1lLmxlbmd0aCkgewogICAgdmFyIGZyb250ID0gbmV3IEJ1ZmZlcihwcmltZS5sZW5ndGggLSBvdXQubGVuZ3RoKTsKICAgIGZyb250LmZpbGwoMCk7CiAgICBvdXQgPSBCdWZmZXIuY29uY2F0KFtmcm9udCwgb3V0XSk7CiAgfQogIHJldHVybiBvdXQ7Cn07CgpESC5wcm90b3R5cGUuZ2V0UHVibGljS2V5ID0gZnVuY3Rpb24gZ2V0UHVibGljS2V5KGVuYykgewogIHJldHVybiBmb3JtYXRSZXR1cm5WYWx1ZSh0aGlzLl9wdWIsIGVuYyk7Cn07CgpESC5wcm90b3R5cGUuZ2V0UHJpdmF0ZUtleSA9IGZ1bmN0aW9uIGdldFByaXZhdGVLZXkoZW5jKSB7CiAgcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKHRoaXMuX3ByaXYsIGVuYyk7Cn07CgpESC5wcm90b3R5cGUuZ2V0UHJpbWUgPSBmdW5jdGlvbiAoZW5jKSB7CiAgcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKHRoaXMuX19wcmltZSwgZW5jKTsKfTsKCkRILnByb3RvdHlwZS5nZXRHZW5lcmF0b3IgPSBmdW5jdGlvbiAoZW5jKSB7CiAgcmV0dXJuIGZvcm1hdFJldHVyblZhbHVlKHRoaXMuX2dlbiwgZW5jKTsKfTsKCkRILnByb3RvdHlwZS5zZXRHZW5lcmF0b3IgPSBmdW5jdGlvbiAoZ2VuLCBlbmMpIHsKICBlbmMgPSBlbmMgfHwgJ3V0ZjgnOwogIGlmICghQnVmZmVyLmlzQnVmZmVyKGdlbikpIHsKICAgIGdlbiA9IG5ldyBCdWZmZXIoZ2VuLCBlbmMpOwogIH0KICB0aGlzLl9fZ2VuID0gZ2VuOwogIHRoaXMuX2dlbiA9IG5ldyBCTihnZW4pOwogIHJldHVybiB0aGlzOwp9OwoKZnVuY3Rpb24gZm9ybWF0UmV0dXJuVmFsdWUoYm4sIGVuYykgewogIHZhciBidWYgPSBuZXcgQnVmZmVyKGJuLnRvQXJyYXkoKSk7CiAgaWYgKCFlbmMpIHsKICAgIHJldHVybiBidWY7CiAgfSBlbHNlIHsKICAgIHJldHVybiBidWYudG9TdHJpbmcoZW5jKTsKICB9Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2dlbmVyYXRlUHJpbWUiOjk1LCJibi5qcyI6NDEsImJ1ZmZlciI6NzAsIm1pbGxlci1yYWJpbiI6MTMzLCJyYW5kb21ieXRlcyI6MTQ4fV0sOTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgcmFuZG9tQnl0ZXMgPSByZXF1aXJlKCdyYW5kb21ieXRlcycpOwptb2R1bGUuZXhwb3J0cyA9IGZpbmRQcmltZTsKZmluZFByaW1lLnNpbXBsZVNpZXZlID0gc2ltcGxlU2lldmU7CmZpbmRQcmltZS5mZXJtYXRUZXN0ID0gZmVybWF0VGVzdDsKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIFRXRU5UWUZPVVIgPSBuZXcgQk4oMjQpOwp2YXIgTWlsbGVyUmFiaW4gPSByZXF1aXJlKCdtaWxsZXItcmFiaW4nKTsKdmFyIG1pbGxlclJhYmluID0gbmV3IE1pbGxlclJhYmluKCk7CnZhciBPTkUgPSBuZXcgQk4oMSk7CnZhciBUV08gPSBuZXcgQk4oMik7CnZhciBGSVZFID0gbmV3IEJOKDUpOwp2YXIgU0lYVEVFTiA9IG5ldyBCTigxNik7CnZhciBFSUdIVCA9IG5ldyBCTig4KTsKdmFyIFRFTiA9IG5ldyBCTigxMCk7CnZhciBUSFJFRSA9IG5ldyBCTigzKTsKdmFyIFNFVkVOID0gbmV3IEJOKDcpOwp2YXIgRUxFVkVOID0gbmV3IEJOKDExKTsKdmFyIEZPVVIgPSBuZXcgQk4oNCk7CnZhciBUV0VMVkUgPSBuZXcgQk4oMTIpOwp2YXIgcHJpbWVzID0gbnVsbDsKCmZ1bmN0aW9uIF9nZXRQcmltZXMoKSB7CiAgaWYgKHByaW1lcyAhPT0gbnVsbCkKICAgIHJldHVybiBwcmltZXM7CgogIHZhciBsaW1pdCA9IDB4MTAwMDAwOwogIHZhciByZXMgPSBbXTsKICByZXNbMF0gPSAyOwogIGZvciAodmFyIGkgPSAxLCBrID0gMzsgayA8IGxpbWl0OyBrICs9IDIpIHsKICAgIHZhciBzcXJ0ID0gTWF0aC5jZWlsKE1hdGguc3FydChrKSk7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGkgJiYgcmVzW2pdIDw9IHNxcnQ7IGorKykKICAgICAgaWYgKGsgJSByZXNbal0gPT09IDApCiAgICAgICAgYnJlYWs7CgogICAgaWYgKGkgIT09IGogJiYgcmVzW2pdIDw9IHNxcnQpCiAgICAgIGNvbnRpbnVlOwoKICAgIHJlc1tpKytdID0gazsKICB9CiAgcHJpbWVzID0gcmVzOwogIHJldHVybiByZXM7Cn0KCmZ1bmN0aW9uIHNpbXBsZVNpZXZlKHApIHsKICB2YXIgcHJpbWVzID0gX2dldFByaW1lcygpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHByaW1lcy5sZW5ndGg7IGkrKykKICAgIGlmIChwLm1vZG4ocHJpbWVzW2ldKSA9PT0gMCkgewogICAgICBpZiAocC5jbXBuKHByaW1lc1tpXSkgPT09IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIGZlcm1hdFRlc3QocCkgewogIHZhciByZWQgPSBCTi5tb250KHApOwogIHJldHVybiBUV08udG9SZWQocmVkKS5yZWRQb3cocC5zdWJuKDEpKS5mcm9tUmVkKCkuY21wbigxKSA9PT0gMDsKfQoKZnVuY3Rpb24gZmluZFByaW1lKGJpdHMsIGdlbikgewogIGlmIChiaXRzIDwgMTYpIHsKICAgIC8vIHRoaXMgaXMgd2hhdCBvcGVuc3NsIGRvZXMKICAgIGlmIChnZW4gPT09IDIgfHwgZ2VuID09PSA1KSB7CiAgICAgIHJldHVybiBuZXcgQk4oWzB4OGMsIDB4N2JdKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXcgQk4oWzB4OGMsIDB4MjddKTsKICAgIH0KICB9CiAgZ2VuID0gbmV3IEJOKGdlbik7CgogIHZhciBudW0sIG4yOwoKICB3aGlsZSAodHJ1ZSkgewogICAgbnVtID0gbmV3IEJOKHJhbmRvbUJ5dGVzKE1hdGguY2VpbChiaXRzIC8gOCkpKTsKICAgIHdoaWxlIChudW0uYml0TGVuZ3RoKCkgPiBiaXRzKSB7CiAgICAgIG51bS5pc2hybigxKTsKICAgIH0KICAgIGlmIChudW0uaXNFdmVuKCkpIHsKICAgICAgbnVtLmlhZGQoT05FKTsKICAgIH0KICAgIGlmICghbnVtLnRlc3RuKDEpKSB7CiAgICAgIG51bS5pYWRkKFRXTyk7CiAgICB9CiAgICBpZiAoIWdlbi5jbXAoVFdPKSkgewogICAgICB3aGlsZSAobnVtLm1vZChUV0VOVFlGT1VSKS5jbXAoRUxFVkVOKSkgewogICAgICAgIG51bS5pYWRkKEZPVVIpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKCFnZW4uY21wKEZJVkUpKSB7CiAgICAgIHdoaWxlIChudW0ubW9kKFRFTikuY21wKFRIUkVFKSkgewogICAgICAgIG51bS5pYWRkKEZPVVIpOwogICAgICB9CiAgICB9CiAgICBuMiA9IG51bS5zaHJuKDEpOwogICAgaWYgKHNpbXBsZVNpZXZlKG4yKSAmJiBzaW1wbGVTaWV2ZShudW0pICYmCiAgICAgIGZlcm1hdFRlc3QobjIpICYmIGZlcm1hdFRlc3QobnVtKSAmJgogICAgICBtaWxsZXJSYWJpbi50ZXN0KG4yKSAmJiBtaWxsZXJSYWJpbi50ZXN0KG51bSkpIHsKICAgICAgcmV0dXJuIG51bTsKICAgIH0KICB9Cgp9Cgp9LHsiYm4uanMiOjQxLCJtaWxsZXItcmFiaW4iOjEzMywicmFuZG9tYnl0ZXMiOjE0OH1dLDk2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHM9ewogICAgIm1vZHAxIjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjNhMzYyMGZmZmZmZmZmZmZmZmZmZmYiCiAgICB9LAogICAgIm1vZHAyIjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNjUzODFmZmZmZmZmZmZmZmZmZmZmIgogICAgfSwKICAgICJtb2RwNSI6IHsKICAgICAgICAiZ2VuIjogIjAyIiwKICAgICAgICAicHJpbWUiOiAiZmZmZmZmZmZmZmZmZmZmZmM5MGZkYWEyMjE2OGMyMzRjNGM2NjI4YjgwZGMxY2QxMjkwMjRlMDg4YTY3Y2M3NDAyMGJiZWE2M2IxMzliMjI1MTRhMDg3OThlMzQwNGRkZWY5NTE5YjNjZDNhNDMxYjMwMmIwYTZkZjI1ZjE0Mzc0ZmUxMzU2ZDZkNTFjMjQ1ZTQ4NWI1NzY2MjVlN2VjNmY0NGM0MmU5YTYzN2VkNmIwYmZmNWNiNmY0MDZiN2VkZWUzODZiZmI1YTg5OWZhNWFlOWYyNDExN2M0YjFmZTY0OTI4NjY1MWVjZTQ1YjNkYzIwMDdjYjhhMTYzYmYwNTk4ZGE0ODM2MWM1NWQzOWE2OTE2M2ZhOGZkMjRjZjVmODM2NTVkMjNkY2EzYWQ5NjFjNjJmMzU2MjA4NTUyYmI5ZWQ1MjkwNzcwOTY5NjZkNjcwYzM1NGU0YWJjOTgwNGYxNzQ2YzA4Y2EyMzczMjdmZmZmZmZmZmZmZmZmZmZmIgogICAgfSwKICAgICJtb2RwMTQiOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2MzdlZDZiMGJmZjVjYjZmNDA2YjdlZGVlMzg2YmZiNWE4OTlmYTVhZTlmMjQxMTdjNGIxZmU2NDkyODY2NTFlY2U0NWIzZGMyMDA3Y2I4YTE2M2JmMDU5OGRhNDgzNjFjNTVkMzlhNjkxNjNmYThmZDI0Y2Y1ZjgzNjU1ZDIzZGNhM2FkOTYxYzYyZjM1NjIwODU1MmJiOWVkNTI5MDc3MDk2OTY2ZDY3MGMzNTRlNGFiYzk4MDRmMTc0NmMwOGNhMTgyMTdjMzI5MDVlNDYyZTM2Y2UzYmUzOWU3NzJjMTgwZTg2MDM5YjI3ODNhMmVjMDdhMjhmYjVjNTVkZjA2ZjRjNTJjOWRlMmJjYmY2OTU1ODE3MTgzOTk1NDk3Y2VhOTU2YWU1MTVkMjI2MTg5OGZhMDUxMDE1NzI4ZTVhOGFhY2FhNjhmZmZmZmZmZmZmZmZmZmZmIgogICAgfSwKICAgICJtb2RwMTUiOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2MzdlZDZiMGJmZjVjYjZmNDA2YjdlZGVlMzg2YmZiNWE4OTlmYTVhZTlmMjQxMTdjNGIxZmU2NDkyODY2NTFlY2U0NWIzZGMyMDA3Y2I4YTE2M2JmMDU5OGRhNDgzNjFjNTVkMzlhNjkxNjNmYThmZDI0Y2Y1ZjgzNjU1ZDIzZGNhM2FkOTYxYzYyZjM1NjIwODU1MmJiOWVkNTI5MDc3MDk2OTY2ZDY3MGMzNTRlNGFiYzk4MDRmMTc0NmMwOGNhMTgyMTdjMzI5MDVlNDYyZTM2Y2UzYmUzOWU3NzJjMTgwZTg2MDM5YjI3ODNhMmVjMDdhMjhmYjVjNTVkZjA2ZjRjNTJjOWRlMmJjYmY2OTU1ODE3MTgzOTk1NDk3Y2VhOTU2YWU1MTVkMjI2MTg5OGZhMDUxMDE1NzI4ZTVhOGFhYWM0MmRhZDMzMTcwZDA0NTA3YTMzYTg1NTIxYWJkZjFjYmE2NGVjZmI4NTA0NThkYmVmMGE4YWVhNzE1NzVkMDYwYzdkYjM5NzBmODVhNmUxZTRjN2FiZjVhZThjZGIwOTMzZDcxZThjOTRlMDRhMjU2MTlkY2VlM2QyMjYxYWQyZWU2YmYxMmZmYTA2ZDk4YTA4NjRkODc2MDI3MzNlYzg2YTY0NTIxZjJiMTgxNzdiMjAwY2JiZTExNzU3N2E2MTVkNmM3NzA5ODhjMGJhZDk0NmUyMDhlMjRmYTA3NGU1YWIzMTQzZGI1YmZjZTBmZDEwOGU0YjgyZDEyMGE5M2FkMmNhZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDE2IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTE4MjE3YzMyOTA1ZTQ2MmUzNmNlM2JlMzllNzcyYzE4MGU4NjAzOWIyNzgzYTJlYzA3YTI4ZmI1YzU1ZGYwNmY0YzUyYzlkZTJiY2JmNjk1NTgxNzE4Mzk5NTQ5N2NlYTk1NmFlNTE1ZDIyNjE4OThmYTA1MTAxNTcyOGU1YThhYWFjNDJkYWQzMzE3MGQwNDUwN2EzM2E4NTUyMWFiZGYxY2JhNjRlY2ZiODUwNDU4ZGJlZjBhOGFlYTcxNTc1ZDA2MGM3ZGIzOTcwZjg1YTZlMWU0YzdhYmY1YWU4Y2RiMDkzM2Q3MWU4Yzk0ZTA0YTI1NjE5ZGNlZTNkMjI2MWFkMmVlNmJmMTJmZmEwNmQ5OGEwODY0ZDg3NjAyNzMzZWM4NmE2NDUyMWYyYjE4MTc3YjIwMGNiYmUxMTc1NzdhNjE1ZDZjNzcwOTg4YzBiYWQ5NDZlMjA4ZTI0ZmEwNzRlNWFiMzE0M2RiNWJmY2UwZmQxMDhlNGI4MmQxMjBhOTIxMDgwMTFhNzIzYzEyYTc4N2U2ZDc4ODcxOWExMGJkYmE1YjI2OTljMzI3MTg2YWY0ZTIzYzFhOTQ2ODM0YjYxNTBiZGEyNTgzZTljYTJhZDQ0Y2U4ZGJiYmMyZGIwNGRlOGVmOTJlOGVmYzE0MWZiZWNhYTYyODdjNTk0NzRlNmJjMDVkOTliMjk2NGZhMDkwYzNhMjIzM2JhMTg2NTE1YmU3ZWQxZjYxMjk3MGNlZTJkN2FmYjgxYmRkNzYyMTcwNDgxY2QwMDY5MTI3ZDViMDVhYTk5M2I0ZWE5ODhkOGZkZGMxODZmZmI3ZGM5MGE2YzA4ZjRkZjQzNWM5MzQwNjMxOTlmZmZmZmZmZmZmZmZmZmZmIgogICAgfSwKICAgICJtb2RwMTciOiB7CiAgICAgICAgImdlbiI6ICIwMiIsCiAgICAgICAgInByaW1lIjogImZmZmZmZmZmZmZmZmZmZmZjOTBmZGFhMjIxNjhjMjM0YzRjNjYyOGI4MGRjMWNkMTI5MDI0ZTA4OGE2N2NjNzQwMjBiYmVhNjNiMTM5YjIyNTE0YTA4Nzk4ZTM0MDRkZGVmOTUxOWIzY2QzYTQzMWIzMDJiMGE2ZGYyNWYxNDM3NGZlMTM1NmQ2ZDUxYzI0NWU0ODViNTc2NjI1ZTdlYzZmNDRjNDJlOWE2MzdlZDZiMGJmZjVjYjZmNDA2YjdlZGVlMzg2YmZiNWE4OTlmYTVhZTlmMjQxMTdjNGIxZmU2NDkyODY2NTFlY2U0NWIzZGMyMDA3Y2I4YTE2M2JmMDU5OGRhNDgzNjFjNTVkMzlhNjkxNjNmYThmZDI0Y2Y1ZjgzNjU1ZDIzZGNhM2FkOTYxYzYyZjM1NjIwODU1MmJiOWVkNTI5MDc3MDk2OTY2ZDY3MGMzNTRlNGFiYzk4MDRmMTc0NmMwOGNhMTgyMTdjMzI5MDVlNDYyZTM2Y2UzYmUzOWU3NzJjMTgwZTg2MDM5YjI3ODNhMmVjMDdhMjhmYjVjNTVkZjA2ZjRjNTJjOWRlMmJjYmY2OTU1ODE3MTgzOTk1NDk3Y2VhOTU2YWU1MTVkMjI2MTg5OGZhMDUxMDE1NzI4ZTVhOGFhYWM0MmRhZDMzMTcwZDA0NTA3YTMzYTg1NTIxYWJkZjFjYmE2NGVjZmI4NTA0NThkYmVmMGE4YWVhNzE1NzVkMDYwYzdkYjM5NzBmODVhNmUxZTRjN2FiZjVhZThjZGIwOTMzZDcxZThjOTRlMDRhMjU2MTlkY2VlM2QyMjYxYWQyZWU2YmYxMmZmYTA2ZDk4YTA4NjRkODc2MDI3MzNlYzg2YTY0NTIxZjJiMTgxNzdiMjAwY2JiZTExNzU3N2E2MTVkNmM3NzA5ODhjMGJhZDk0NmUyMDhlMjRmYTA3NGU1YWIzMTQzZGI1YmZjZTBmZDEwOGU0YjgyZDEyMGE5MjEwODAxMWE3MjNjMTJhNzg3ZTZkNzg4NzE5YTEwYmRiYTViMjY5OWMzMjcxODZhZjRlMjNjMWE5NDY4MzRiNjE1MGJkYTI1ODNlOWNhMmFkNDRjZThkYmJiYzJkYjA0ZGU4ZWY5MmU4ZWZjMTQxZmJlY2FhNjI4N2M1OTQ3NGU2YmMwNWQ5OWIyOTY0ZmEwOTBjM2EyMjMzYmExODY1MTViZTdlZDFmNjEyOTcwY2VlMmQ3YWZiODFiZGQ3NjIxNzA0ODFjZDAwNjkxMjdkNWIwNWFhOTkzYjRlYTk4OGQ4ZmRkYzE4NmZmYjdkYzkwYTZjMDhmNGRmNDM1YzkzNDAyODQ5MjM2YzNmYWI0ZDI3YzcwMjZjMWQ0ZGNiMjYwMjY0NmRlYzk3NTFlNzYzZGJhMzdiZGY4ZmY5NDA2YWQ5ZTUzMGVlNWRiMzgyZjQxMzAwMWFlYjA2YTUzZWQ5MDI3ZDgzMTE3OTcyN2IwODY1YTg5MThkYTNlZGJlYmNmOWIxNGVkNDRjZTZjYmFjZWQ0YmIxYmRiN2YxNDQ3ZTZjYzI1NGIzMzIwNTE1MTJiZDdhZjQyNmZiOGY0MDEzNzhjZDJiZjU5ODNjYTAxYzY0YjkyZWNmMDMyZWExNWQxNzIxZDAzZjQ4MmQ3Y2U2ZTc0ZmVmNmQ1NWU3MDJmNDY5ODBjODJiNWE4NDAzMTkwMGIxYzllNTllN2M5N2ZiZWM3ZThmMzIzYTk3YTdlMzZjYzg4YmUwZjFkNDViN2ZmNTg1YWM1NGJkNDA3YjIyYjQxNTRhYWNjOGY2ZDdlYmY0OGUxZDgxNGNjNWVkMjBmODAzN2UwYTc5NzE1ZWVmMjliZTMyODA2YTFkNThiYjdjNWRhNzZmNTUwYWEzZDhhMWZiZmYwZWIxOWNjYjFhMzEzZDU1Y2RhNTZjOWVjMmVmMjk2MzIzODdmZThkNzZlM2MwNDY4MDQzZThmNjYzZjQ4NjBlZTEyYmYyZDViMGI3NDc0ZDZlNjk0ZjkxZTZkY2M0MDI0ZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0sCiAgICAibW9kcDE4IjogewogICAgICAgICJnZW4iOiAiMDIiLAogICAgICAgICJwcmltZSI6ICJmZmZmZmZmZmZmZmZmZmZmYzkwZmRhYTIyMTY4YzIzNGM0YzY2MjhiODBkYzFjZDEyOTAyNGUwODhhNjdjYzc0MDIwYmJlYTYzYjEzOWIyMjUxNGEwODc5OGUzNDA0ZGRlZjk1MTliM2NkM2E0MzFiMzAyYjBhNmRmMjVmMTQzNzRmZTEzNTZkNmQ1MWMyNDVlNDg1YjU3NjYyNWU3ZWM2ZjQ0YzQyZTlhNjM3ZWQ2YjBiZmY1Y2I2ZjQwNmI3ZWRlZTM4NmJmYjVhODk5ZmE1YWU5ZjI0MTE3YzRiMWZlNjQ5Mjg2NjUxZWNlNDViM2RjMjAwN2NiOGExNjNiZjA1OThkYTQ4MzYxYzU1ZDM5YTY5MTYzZmE4ZmQyNGNmNWY4MzY1NWQyM2RjYTNhZDk2MWM2MmYzNTYyMDg1NTJiYjllZDUyOTA3NzA5Njk2NmQ2NzBjMzU0ZTRhYmM5ODA0ZjE3NDZjMDhjYTE4MjE3YzMyOTA1ZTQ2MmUzNmNlM2JlMzllNzcyYzE4MGU4NjAzOWIyNzgzYTJlYzA3YTI4ZmI1YzU1ZGYwNmY0YzUyYzlkZTJiY2JmNjk1NTgxNzE4Mzk5NTQ5N2NlYTk1NmFlNTE1ZDIyNjE4OThmYTA1MTAxNTcyOGU1YThhYWFjNDJkYWQzMzE3MGQwNDUwN2EzM2E4NTUyMWFiZGYxY2JhNjRlY2ZiODUwNDU4ZGJlZjBhOGFlYTcxNTc1ZDA2MGM3ZGIzOTcwZjg1YTZlMWU0YzdhYmY1YWU4Y2RiMDkzM2Q3MWU4Yzk0ZTA0YTI1NjE5ZGNlZTNkMjI2MWFkMmVlNmJmMTJmZmEwNmQ5OGEwODY0ZDg3NjAyNzMzZWM4NmE2NDUyMWYyYjE4MTc3YjIwMGNiYmUxMTc1NzdhNjE1ZDZjNzcwOTg4YzBiYWQ5NDZlMjA4ZTI0ZmEwNzRlNWFiMzE0M2RiNWJmY2UwZmQxMDhlNGI4MmQxMjBhOTIxMDgwMTFhNzIzYzEyYTc4N2U2ZDc4ODcxOWExMGJkYmE1YjI2OTljMzI3MTg2YWY0ZTIzYzFhOTQ2ODM0YjYxNTBiZGEyNTgzZTljYTJhZDQ0Y2U4ZGJiYmMyZGIwNGRlOGVmOTJlOGVmYzE0MWZiZWNhYTYyODdjNTk0NzRlNmJjMDVkOTliMjk2NGZhMDkwYzNhMjIzM2JhMTg2NTE1YmU3ZWQxZjYxMjk3MGNlZTJkN2FmYjgxYmRkNzYyMTcwNDgxY2QwMDY5MTI3ZDViMDVhYTk5M2I0ZWE5ODhkOGZkZGMxODZmZmI3ZGM5MGE2YzA4ZjRkZjQzNWM5MzQwMjg0OTIzNmMzZmFiNGQyN2M3MDI2YzFkNGRjYjI2MDI2NDZkZWM5NzUxZTc2M2RiYTM3YmRmOGZmOTQwNmFkOWU1MzBlZTVkYjM4MmY0MTMwMDFhZWIwNmE1M2VkOTAyN2Q4MzExNzk3MjdiMDg2NWE4OTE4ZGEzZWRiZWJjZjliMTRlZDQ0Y2U2Y2JhY2VkNGJiMWJkYjdmMTQ0N2U2Y2MyNTRiMzMyMDUxNTEyYmQ3YWY0MjZmYjhmNDAxMzc4Y2QyYmY1OTgzY2EwMWM2NGI5MmVjZjAzMmVhMTVkMTcyMWQwM2Y0ODJkN2NlNmU3NGZlZjZkNTVlNzAyZjQ2OTgwYzgyYjVhODQwMzE5MDBiMWM5ZTU5ZTdjOTdmYmVjN2U4ZjMyM2E5N2E3ZTM2Y2M4OGJlMGYxZDQ1YjdmZjU4NWFjNTRiZDQwN2IyMmI0MTU0YWFjYzhmNmQ3ZWJmNDhlMWQ4MTRjYzVlZDIwZjgwMzdlMGE3OTcxNWVlZjI5YmUzMjgwNmExZDU4YmI3YzVkYTc2ZjU1MGFhM2Q4YTFmYmZmMGViMTljY2IxYTMxM2Q1NWNkYTU2YzllYzJlZjI5NjMyMzg3ZmU4ZDc2ZTNjMDQ2ODA0M2U4ZjY2M2Y0ODYwZWUxMmJmMmQ1YjBiNzQ3NGQ2ZTY5NGY5MWU2ZGJlMTE1OTc0YTM5MjZmMTJmZWU1ZTQzODc3N2NiNmE5MzJkZjhjZDhiZWM0ZDA3M2I5MzFiYTNiYzgzMmI2OGQ5ZGQzMDA3NDFmYTdiZjhhZmM0N2VkMjU3NmY2OTM2YmE0MjQ2NjNhYWI2MzljNWFlNGY1NjgzNDIzYjQ3NDJiZjFjOTc4MjM4ZjE2Y2JlMzlkNjUyZGUzZmRiOGJlZmM4NDhhZDkyMjIyMmUwNGE0MDM3YzA3MTNlYjU3YTgxYTIzZjBjNzM0NzNmYzY0NmNlYTMwNmI0YmNiYzg4NjJmODM4NWRkZmE5ZDRiN2ZhMmMwODdlODc5NjgzMzAzZWQ1YmRkM2EwNjJiM2NmNWIzYTI3OGE2NmQyYTEzZjgzZjQ0ZjgyZGRmMzEwZWUwNzRhYjZhMzY0NTk3ZTg5OWEwMjU1ZGMxNjRmMzFjYzUwODQ2ODUxZGY5YWI0ODE5NWRlZDdlYTFiMWQ1MTBiZDdlZTc0ZDczZmFmMzZiYzMxZWNmYTI2ODM1OTA0NmY0ZWI4NzlmOTI0MDA5NDM4YjQ4MWM2Y2Q3ODg5YTAwMmVkNWVlMzgyYmM5MTkwZGE2ZmMwMjZlNDc5NTU4ZTQ0NzU2NzdlOWFhOWUzMDUwZTI3NjU2OTRkZmM4MWY1NmU4ODBiOTZlNzE2MGM5ODBkZDk4ZWRkM2RmZmZmZmZmZmZmZmZmZmZmZiIKICAgIH0KfQp9LHt9XSw5NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKQp2YXIgQmlnSW50ZWdlciA9IHJlcXVpcmUoJ2JpZ2knKQoKdmFyIFBvaW50ID0gcmVxdWlyZSgnLi9wb2ludCcpCgpmdW5jdGlvbiBDdXJ2ZShwLCBhLCBiLCBHeCwgR3ksIG4sIGgpIHsKICB0aGlzLnAgPSBwCiAgdGhpcy5hID0gYQogIHRoaXMuYiA9IGIKICB0aGlzLkcgPSBQb2ludC5mcm9tQWZmaW5lKHRoaXMsIEd4LCBHeSkKICB0aGlzLm4gPSBuCiAgdGhpcy5oID0gaAoKICB0aGlzLmluZmluaXR5ID0gbmV3IFBvaW50KHRoaXMsIG51bGwsIG51bGwsIEJpZ0ludGVnZXIuWkVSTykKCiAgLy8gcmVzdWx0IGNhY2hpbmcKICB0aGlzLnBPdmVyRm91ciA9IHAuYWRkKEJpZ0ludGVnZXIuT05FKS5zaGlmdFJpZ2h0KDIpCn0KCkN1cnZlLnByb3RvdHlwZS5wb2ludEZyb21YID0gZnVuY3Rpb24oaXNPZGQsIHgpIHsKICB2YXIgYWxwaGEgPSB4LnBvdygzKS5hZGQodGhpcy5hLm11bHRpcGx5KHgpKS5hZGQodGhpcy5iKS5tb2QodGhpcy5wKQogIHZhciBiZXRhID0gYWxwaGEubW9kUG93KHRoaXMucE92ZXJGb3VyLCB0aGlzLnApIC8vIFhYWDogbm90IGNvbXBhdGlibGUgd2l0aCBhbGwgY3VydmVzCgogIHZhciB5ID0gYmV0YQogIGlmIChiZXRhLmlzRXZlbigpIF4gIWlzT2RkKSB7CiAgICB5ID0gdGhpcy5wLnN1YnRyYWN0KHkpIC8vIC15ICUgcAogIH0KCiAgcmV0dXJuIFBvaW50LmZyb21BZmZpbmUodGhpcywgeCwgeSkKfQoKQ3VydmUucHJvdG90eXBlLmlzSW5maW5pdHkgPSBmdW5jdGlvbihRKSB7CiAgaWYgKFEgPT09IHRoaXMuaW5maW5pdHkpIHJldHVybiB0cnVlCgogIHJldHVybiBRLnouc2lnbnVtKCkgPT09IDAgJiYgUS55LnNpZ251bSgpICE9PSAwCn0KCkN1cnZlLnByb3RvdHlwZS5pc09uQ3VydmUgPSBmdW5jdGlvbihRKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eShRKSkgcmV0dXJuIHRydWUKCiAgdmFyIHggPSBRLmFmZmluZVgKICB2YXIgeSA9IFEuYWZmaW5lWQogIHZhciBhID0gdGhpcy5hCiAgdmFyIGIgPSB0aGlzLmIKICB2YXIgcCA9IHRoaXMucAoKICAvLyBDaGVjayB0aGF0IHhRIGFuZCB5USBhcmUgaW50ZWdlcnMgaW4gdGhlIGludGVydmFsIFswLCBwIC0gMV0KICBpZiAoeC5zaWdudW0oKSA8IDAgfHwgeC5jb21wYXJlVG8ocCkgPj0gMCkgcmV0dXJuIGZhbHNlCiAgaWYgKHkuc2lnbnVtKCkgPCAwIHx8IHkuY29tcGFyZVRvKHApID49IDApIHJldHVybiBmYWxzZQoKICAvLyBhbmQgY2hlY2sgdGhhdCB5XjIgPSB4XjMgKyBheCArIGIgKG1vZCBwKQogIHZhciBsaHMgPSB5LnNxdWFyZSgpLm1vZChwKQogIHZhciByaHMgPSB4LnBvdygzKS5hZGQoYS5tdWx0aXBseSh4KSkuYWRkKGIpLm1vZChwKQogIHJldHVybiBsaHMuZXF1YWxzKHJocykKfQoKLyoqCiAqIFZhbGlkYXRlIGFuIGVsbGlwdGljIGN1cnZlIHBvaW50LgogKgogKiBTZWUgU0VDIDEsIHNlY3Rpb24gMy4yLjIuMTogRWxsaXB0aWMgQ3VydmUgUHVibGljIEtleSBWYWxpZGF0aW9uIFByaW1pdGl2ZQogKi8KQ3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24oUSkgewogIC8vIENoZWNrIFEgIT0gTwogIGFzc2VydCghdGhpcy5pc0luZmluaXR5KFEpLCAnUG9pbnQgaXMgYXQgaW5maW5pdHknKQogIGFzc2VydCh0aGlzLmlzT25DdXJ2ZShRKSwgJ1BvaW50IGlzIG5vdCBvbiB0aGUgY3VydmUnKQoKICAvLyBDaGVjayBuUSA9IE8gKHdoZXJlIFEgaXMgYSBzY2FsYXIgbXVsdGlwbGUgb2YgRykKICB2YXIgblEgPSBRLm11bHRpcGx5KHRoaXMubikKICBhc3NlcnQodGhpcy5pc0luZmluaXR5KG5RKSwgJ1BvaW50IGlzIG5vdCBhIHNjYWxhciBtdWx0aXBsZSBvZiBHJykKCiAgcmV0dXJuIHRydWUKfQoKbW9kdWxlLmV4cG9ydHMgPSBDdXJ2ZQoKfSx7Ii4vcG9pbnQiOjEwMSwiYXNzZXJ0IjoxNSwiYmlnaSI6MTl9XSw5ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAic2VjcDEyOHIxIjogewogICAgInAiOiAiZmZmZmZmZmRmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYiLAogICAgImEiOiAiZmZmZmZmZmRmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmMiLAogICAgImIiOiAiZTg3NTc5YzExMDc5ZjQzZGQ4MjQ5OTNjMmNlZTVlZDMiLAogICAgIm4iOiAiZmZmZmZmZmUwMDAwMDAwMDc1YTMwZDFiOTAzOGExMTUiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjE2MWZmNzUyOGI4OTliMmQwYzI4NjA3Y2E1MmM1Yjg2IiwKICAgICJHeSI6ICJjZjVhYzgzOTViYWZlYjEzYzAyZGEyOTJkZGVkN2E4MyIKICB9LAogICJzZWNwMTYwazEiOiB7CiAgICAicCI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWZmZmZhYzczIiwKICAgICJhIjogIjAwIiwKICAgICJiIjogIjA3IiwKICAgICJuIjogIjAxMDAwMDAwMDAwMDAwMDAwMDAwMDFiOGZhMTZkZmFiOWFjYTE2YjZiMyIsCiAgICAiaCI6ICIwMSIsCiAgICAiR3giOiAiM2I0YzM4MmNlMzdhYTE5MmE0MDE5ZTc2MzAzNmY0ZjVkZDRkN2ViYiIsCiAgICAiR3kiOiAiOTM4Y2Y5MzUzMThmZGNlZDZiYzI4Mjg2NTMxNzMzYzNmMDNjNGZlZSIKICB9LAogICJzZWNwMTYwcjEiOiB7CiAgICAicCI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjdmZmZmZmZmIiwKICAgICJhIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmN2ZmZmZmZmMiLAogICAgImIiOiAiMWM5N2JlZmM1NGJkN2E4YjY1YWNmODlmODFkNGQ0YWRjNTY1ZmE0NSIsCiAgICAibiI6ICIwMTAwMDAwMDAwMDAwMDAwMDAwMDAxZjRjOGY5MjdhZWQzY2E3NTIyNTciLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjRhOTZiNTY4OGVmNTczMjg0NjY0Njk4OTY4YzM4YmI5MTNjYmZjODIiLAogICAgIkd5IjogIjIzYTYyODU1MzE2ODk0N2Q1OWRjYzkxMjA0MjM1MTM3N2FjNWZiMzIiCiAgfSwKICAic2VjcDE5MmsxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWZmZmZlZTM3IiwKICAgICJhIjogIjAwIiwKICAgICJiIjogIjAzIiwKICAgICJuIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZTI2ZjJmYzE3MGY2OTQ2NmE3NGRlZmQ4ZCIsCiAgICAiaCI6ICIwMSIsCiAgICAiR3giOiAiZGI0ZmYxMGVjMDU3ZTlhZTI2YjA3ZDAyODBiN2Y0MzQxZGE1ZDFiMWVhZTA2YzdkIiwKICAgICJHeSI6ICI5YjJmMmY2ZDljNTYyOGE3ODQ0MTYzZDAxNWJlODYzNDQwODJhYTg4ZDk1ZTJmOWQiCiAgfSwKICAic2VjcDE5MnIxIjogewogICAgInAiOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZmZmZmZmZmZmZmZmIiwKICAgICJhIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlZmZmZmZmZmZmZmZmZmZmYyIsCiAgICAiYiI6ICI2NDIxMDUxOWU1OWM4MGU3MGZhN2U5YWI3MjI0MzA0OWZlYjhkZWVjYzE0NmI5YjEiLAogICAgIm4iOiAiZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmOTlkZWY4MzYxNDZiYzliMWI0ZDIyODMxIiwKICAgICJoIjogIjAxIiwKICAgICJHeCI6ICIxODhkYTgwZWIwMzA5MGY2N2NiZjIwZWI0M2ExODgwMGY0ZmYwYWZkODJmZjEwMTIiLAogICAgIkd5IjogIjA3MTkyYjk1ZmZjOGRhNzg2MzEwMTFlZDZiMjRjZGQ1NzNmOTc3YTExZTc5NDgxMSIKICB9LAogICJzZWNwMjU2azEiOiB7CiAgICAicCI6ICJmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWZmZmZmYzJmIiwKICAgICJhIjogIjAwIiwKICAgICJiIjogIjA3IiwKICAgICJuIjogImZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlYmFhZWRjZTZhZjQ4YTAzYmJmZDI1ZThjZDAzNjQxNDEiLAogICAgImgiOiAiMDEiLAogICAgIkd4IjogIjc5YmU2NjdlZjlkY2JiYWM1NWEwNjI5NWNlODcwYjA3MDI5YmZjZGIyZGNlMjhkOTU5ZjI4MTViMTZmODE3OTgiLAogICAgIkd5IjogIjQ4M2FkYTc3MjZhM2M0NjU1ZGE0ZmJmYzBlMTEwOGE4ZmQxN2I0NDhhNjg1NTQxOTljNDdkMDhmZmIxMGQ0YjgiCiAgfSwKICAic2VjcDI1NnIxIjogewogICAgInAiOiAiZmZmZmZmZmYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZiIsCiAgICAiYSI6ICJmZmZmZmZmZjAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZjIiwKICAgICJiIjogIjVhYzYzNWQ4YWEzYTkzZTdiM2ViYmQ1NTc2OTg4NmJjNjUxZDA2YjBjYzUzYjBmNjNiY2UzYzNlMjdkMjYwNGIiLAogICAgIm4iOiAiZmZmZmZmZmYwMDAwMDAwMGZmZmZmZmZmZmZmZmZmZmZiY2U2ZmFhZGE3MTc5ZTg0ZjNiOWNhYzJmYzYzMjU1MSIsCiAgICAiaCI6ICIwMSIsCiAgICAiR3giOiAiNmIxN2QxZjJlMTJjNDI0N2Y4YmNlNmU1NjNhNDQwZjI3NzAzN2Q4MTJkZWIzM2EwZjRhMTM5NDVkODk4YzI5NiIsCiAgICAiR3kiOiAiNGZlMzQyZTJmZTFhN2Y5YjhlZTdlYjRhN2MwZjllMTYyYmNlMzM1NzZiMzE1ZWNlY2JiNjQwNjgzN2JmNTFmNSIKICB9Cn0KCn0se31dLDk5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIFBvaW50ID0gcmVxdWlyZSgnLi9wb2ludCcpCnZhciBDdXJ2ZSA9IHJlcXVpcmUoJy4vY3VydmUnKQoKdmFyIGdldEN1cnZlQnlOYW1lID0gcmVxdWlyZSgnLi9uYW1lcycpCgptb2R1bGUuZXhwb3J0cyA9IHsKICBDdXJ2ZTogQ3VydmUsCiAgUG9pbnQ6IFBvaW50LAogIGdldEN1cnZlQnlOYW1lOiBnZXRDdXJ2ZUJ5TmFtZQp9Cgp9LHsiLi9jdXJ2ZSI6OTcsIi4vbmFtZXMiOjEwMCwiLi9wb2ludCI6MTAxfV0sMTAwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKCnZhciBjdXJ2ZXMgPSByZXF1aXJlKCcuL2N1cnZlcycpCnZhciBDdXJ2ZSA9IHJlcXVpcmUoJy4vY3VydmUnKQoKZnVuY3Rpb24gZ2V0Q3VydmVCeU5hbWUobmFtZSkgewogIHZhciBjdXJ2ZSA9IGN1cnZlc1tuYW1lXQogIGlmICghY3VydmUpIHJldHVybiBudWxsCgogIHZhciBwID0gbmV3IEJpZ0ludGVnZXIoY3VydmUucCwgMTYpCiAgdmFyIGEgPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5hLCAxNikKICB2YXIgYiA9IG5ldyBCaWdJbnRlZ2VyKGN1cnZlLmIsIDE2KQogIHZhciBuID0gbmV3IEJpZ0ludGVnZXIoY3VydmUubiwgMTYpCiAgdmFyIGggPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5oLCAxNikKICB2YXIgR3ggPSBuZXcgQmlnSW50ZWdlcihjdXJ2ZS5HeCwgMTYpCiAgdmFyIEd5ID0gbmV3IEJpZ0ludGVnZXIoY3VydmUuR3ksIDE2KQoKICByZXR1cm4gbmV3IEN1cnZlKHAsIGEsIGIsIEd4LCBHeSwgbiwgaCkKfQoKbW9kdWxlLmV4cG9ydHMgPSBnZXRDdXJ2ZUJ5TmFtZQoKfSx7Ii4vY3VydmUiOjk3LCIuL2N1cnZlcyI6OTgsImJpZ2kiOjE5fV0sMTAxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JykKdmFyIEJpZ0ludGVnZXIgPSByZXF1aXJlKCdiaWdpJykKCnZhciBUSFJFRSA9IEJpZ0ludGVnZXIudmFsdWVPZigzKQoKZnVuY3Rpb24gUG9pbnQoY3VydmUsIHgsIHksIHopIHsKICBhc3NlcnQubm90U3RyaWN0RXF1YWwoeiwgdW5kZWZpbmVkLCAnTWlzc2luZyBaIGNvb3JkaW5hdGUnKQoKICB0aGlzLmN1cnZlID0gY3VydmUKICB0aGlzLnggPSB4CiAgdGhpcy55ID0geQogIHRoaXMueiA9IHoKICB0aGlzLl96SW52ID0gbnVsbAoKICB0aGlzLmNvbXByZXNzZWQgPSB0cnVlCn0KCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQb2ludC5wcm90b3R5cGUsICd6SW52JywgewogIGdldDogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5fekludiA9PT0gbnVsbCkgewogICAgICB0aGlzLl96SW52ID0gdGhpcy56Lm1vZEludmVyc2UodGhpcy5jdXJ2ZS5wKQogICAgfQoKICAgIHJldHVybiB0aGlzLl96SW52CiAgfQp9KQoKT2JqZWN0LmRlZmluZVByb3BlcnR5KFBvaW50LnByb3RvdHlwZSwgJ2FmZmluZVgnLCB7CiAgZ2V0OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLngubXVsdGlwbHkodGhpcy56SW52KS5tb2QodGhpcy5jdXJ2ZS5wKQogIH0KfSkKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShQb2ludC5wcm90b3R5cGUsICdhZmZpbmVZJywgewogIGdldDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy55Lm11bHRpcGx5KHRoaXMuekludikubW9kKHRoaXMuY3VydmUucCkKICB9Cn0pCgpQb2ludC5mcm9tQWZmaW5lID0gZnVuY3Rpb24oY3VydmUsIHgsIHkpIHsKICByZXR1cm4gbmV3IFBvaW50KGN1cnZlLCB4LCB5LCBCaWdJbnRlZ2VyLk9ORSkKfQoKUG9pbnQucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uKG90aGVyKSB7CiAgaWYgKG90aGVyID09PSB0aGlzKSByZXR1cm4gdHJ1ZQogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkodGhpcykpIHJldHVybiB0aGlzLmN1cnZlLmlzSW5maW5pdHkob3RoZXIpCiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eShvdGhlcikpIHJldHVybiB0aGlzLmN1cnZlLmlzSW5maW5pdHkodGhpcykKCiAgLy8gdSA9IFkyICogWjEgLSBZMSAqIFoyCiAgdmFyIHUgPSBvdGhlci55Lm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy55Lm11bHRpcGx5KG90aGVyLnopKS5tb2QodGhpcy5jdXJ2ZS5wKQoKICBpZiAodS5zaWdudW0oKSAhPT0gMCkgcmV0dXJuIGZhbHNlCgogIC8vIHYgPSBYMiAqIFoxIC0gWDEgKiBaMgogIHZhciB2ID0gb3RoZXIueC5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueC5tdWx0aXBseShvdGhlci56KSkubW9kKHRoaXMuY3VydmUucCkKCiAgcmV0dXJuIHYuc2lnbnVtKCkgPT09IDAKfQoKUG9pbnQucHJvdG90eXBlLm5lZ2F0ZSA9IGZ1bmN0aW9uKCkgewogIHZhciB5ID0gdGhpcy5jdXJ2ZS5wLnN1YnRyYWN0KHRoaXMueSkKCiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLmN1cnZlLCB0aGlzLngsIHksIHRoaXMueikKfQoKUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGIpIHsKICBpZiAodGhpcy5jdXJ2ZS5pc0luZmluaXR5KHRoaXMpKSByZXR1cm4gYgogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkoYikpIHJldHVybiB0aGlzCgogIHZhciB4MSA9IHRoaXMueAogIHZhciB5MSA9IHRoaXMueQogIHZhciB4MiA9IGIueAogIHZhciB5MiA9IGIueQoKICAvLyB1ID0gWTIgKiBaMSAtIFkxICogWjIKICB2YXIgdSA9IHkyLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QoeTEubXVsdGlwbHkoYi56KSkubW9kKHRoaXMuY3VydmUucCkKICAvLyB2ID0gWDIgKiBaMSAtIFgxICogWjIKICB2YXIgdiA9IHgyLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QoeDEubXVsdGlwbHkoYi56KSkubW9kKHRoaXMuY3VydmUucCkKCiAgaWYgKHYuc2lnbnVtKCkgPT09IDApIHsKICAgIGlmICh1LnNpZ251bSgpID09PSAwKSB7CiAgICAgIHJldHVybiB0aGlzLnR3aWNlKCkgLy8gdGhpcyA9PSBiLCBzbyBkb3VibGUKICAgIH0KCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5pbmZpbml0eSAvLyB0aGlzID0gLWIsIHNvIGluZmluaXR5CiAgfQoKICB2YXIgdjIgPSB2LnNxdWFyZSgpCiAgdmFyIHYzID0gdjIubXVsdGlwbHkodikKICB2YXIgeDF2MiA9IHgxLm11bHRpcGx5KHYyKQogIHZhciB6dTIgPSB1LnNxdWFyZSgpLm11bHRpcGx5KHRoaXMueikKCiAgLy8geDMgPSB2ICogKHoyICogKHoxICogdV4yIC0gMiAqIHgxICogdl4yKSAtIHZeMykKICB2YXIgeDMgPSB6dTIuc3VidHJhY3QoeDF2Mi5zaGlmdExlZnQoMSkpLm11bHRpcGx5KGIueikuc3VidHJhY3QodjMpLm11bHRpcGx5KHYpLm1vZCh0aGlzLmN1cnZlLnApCiAgLy8geTMgPSB6MiAqICgzICogeDEgKiB1ICogdl4yIC0geTEgKiB2XjMgLSB6MSAqIHVeMykgKyB1ICogdl4zCiAgdmFyIHkzID0geDF2Mi5tdWx0aXBseShUSFJFRSkubXVsdGlwbHkodSkuc3VidHJhY3QoeTEubXVsdGlwbHkodjMpKS5zdWJ0cmFjdCh6dTIubXVsdGlwbHkodSkpLm11bHRpcGx5KGIueikuYWRkKHUubXVsdGlwbHkodjMpKS5tb2QodGhpcy5jdXJ2ZS5wKQogIC8vIHozID0gdl4zICogejEgKiB6MgogIHZhciB6MyA9IHYzLm11bHRpcGx5KHRoaXMueikubXVsdGlwbHkoYi56KS5tb2QodGhpcy5jdXJ2ZS5wKQoKICByZXR1cm4gbmV3IFBvaW50KHRoaXMuY3VydmUsIHgzLCB5MywgejMpCn0KClBvaW50LnByb3RvdHlwZS50d2ljZSA9IGZ1bmN0aW9uKCkgewogIGlmICh0aGlzLmN1cnZlLmlzSW5maW5pdHkodGhpcykpIHJldHVybiB0aGlzCiAgaWYgKHRoaXMueS5zaWdudW0oKSA9PT0gMCkgcmV0dXJuIHRoaXMuY3VydmUuaW5maW5pdHkKCiAgdmFyIHgxID0gdGhpcy54CiAgdmFyIHkxID0gdGhpcy55CgogIHZhciB5MXoxID0geTEubXVsdGlwbHkodGhpcy56KQogIHZhciB5MXNxejEgPSB5MXoxLm11bHRpcGx5KHkxKS5tb2QodGhpcy5jdXJ2ZS5wKQogIHZhciBhID0gdGhpcy5jdXJ2ZS5hCgogIC8vIHcgPSAzICogeDFeMiArIGEgKiB6MV4yCiAgdmFyIHcgPSB4MS5zcXVhcmUoKS5tdWx0aXBseShUSFJFRSkKCiAgaWYgKGEuc2lnbnVtKCkgIT09IDApIHsKICAgIHcgPSB3LmFkZCh0aGlzLnouc3F1YXJlKCkubXVsdGlwbHkoYSkpCiAgfQoKICB3ID0gdy5tb2QodGhpcy5jdXJ2ZS5wKQogIC8vIHgzID0gMiAqIHkxICogejEgKiAod14yIC0gOCAqIHgxICogeTFeMiAqIHoxKQogIHZhciB4MyA9IHcuc3F1YXJlKCkuc3VidHJhY3QoeDEuc2hpZnRMZWZ0KDMpLm11bHRpcGx5KHkxc3F6MSkpLnNoaWZ0TGVmdCgxKS5tdWx0aXBseSh5MXoxKS5tb2QodGhpcy5jdXJ2ZS5wKQogIC8vIHkzID0gNCAqIHkxXjIgKiB6MSAqICgzICogdyAqIHgxIC0gMiAqIHkxXjIgKiB6MSkgLSB3XjMKICB2YXIgeTMgPSB3Lm11bHRpcGx5KFRIUkVFKS5tdWx0aXBseSh4MSkuc3VidHJhY3QoeTFzcXoxLnNoaWZ0TGVmdCgxKSkuc2hpZnRMZWZ0KDIpLm11bHRpcGx5KHkxc3F6MSkuc3VidHJhY3Qody5wb3coMykpLm1vZCh0aGlzLmN1cnZlLnApCiAgLy8gejMgPSA4ICogKHkxICogejEpXjMKICB2YXIgejMgPSB5MXoxLnBvdygzKS5zaGlmdExlZnQoMykubW9kKHRoaXMuY3VydmUucCkKCiAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLmN1cnZlLCB4MywgeTMsIHozKQp9CgovLyBTaW1wbGUgTkFGIChOb24tQWRqYWNlbnQgRm9ybSkgbXVsdGlwbGljYXRpb24gYWxnb3JpdGhtCi8vIFRPRE86IG1vZHVsYXJpemUgdGhlIG11bHRpcGxpY2F0aW9uIGFsZ29yaXRobQpQb2ludC5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbihrKSB7CiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKSkgcmV0dXJuIHRoaXMKICBpZiAoay5zaWdudW0oKSA9PT0gMCkgcmV0dXJuIHRoaXMuY3VydmUuaW5maW5pdHkKCiAgdmFyIGUgPSBrCiAgdmFyIGggPSBlLm11bHRpcGx5KFRIUkVFKQoKICB2YXIgbmVnID0gdGhpcy5uZWdhdGUoKQogIHZhciBSID0gdGhpcwoKICBmb3IgKHZhciBpID0gaC5iaXRMZW5ndGgoKSAtIDI7IGkgPiAwOyAtLWkpIHsKICAgIHZhciBoQml0ID0gaC50ZXN0Qml0KGkpCiAgICB2YXIgZUJpdCA9IGUudGVzdEJpdChpKQoKICAgIFIgPSBSLnR3aWNlKCkKCiAgICBpZiAoaEJpdCAhPT0gZUJpdCkgewogICAgICBSID0gUi5hZGQoaEJpdCA/IHRoaXMgOiBuZWcpCiAgICB9CiAgfQoKICByZXR1cm4gUgp9CgovLyBDb21wdXRlIHRoaXMqaiArIHgqayAoc2ltdWx0YW5lb3VzIG11bHRpcGxpY2F0aW9uKQpQb2ludC5wcm90b3R5cGUubXVsdGlwbHlUd28gPSBmdW5jdGlvbihqLCB4LCBrKSB7CiAgdmFyIGkgPSBNYXRoLm1heChqLmJpdExlbmd0aCgpLCBrLmJpdExlbmd0aCgpKSAtIDEKICB2YXIgUiA9IHRoaXMuY3VydmUuaW5maW5pdHkKICB2YXIgYm90aCA9IHRoaXMuYWRkKHgpCgogIHdoaWxlIChpID49IDApIHsKICAgIHZhciBqQml0ID0gai50ZXN0Qml0KGkpCiAgICB2YXIga0JpdCA9IGsudGVzdEJpdChpKQoKICAgIFIgPSBSLnR3aWNlKCkKCiAgICBpZiAoakJpdCkgewogICAgICBpZiAoa0JpdCkgewogICAgICAgIFIgPSBSLmFkZChib3RoKQoKICAgICAgfSBlbHNlIHsKICAgICAgICBSID0gUi5hZGQodGhpcykKICAgICAgfQoKICAgIH0gZWxzZSBpZiAoa0JpdCkgewogICAgICBSID0gUi5hZGQoeCkKICAgIH0KICAgIC0taQogIH0KCiAgcmV0dXJuIFIKfQoKUG9pbnQucHJvdG90eXBlLmdldEVuY29kZWQgPSBmdW5jdGlvbihjb21wcmVzc2VkKSB7CiAgaWYgKGNvbXByZXNzZWQgPT0gdW5kZWZpbmVkKSBjb21wcmVzc2VkID0gdGhpcy5jb21wcmVzc2VkCiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKSkgcmV0dXJuIG5ldyBCdWZmZXIoJzAwJywgJ2hleCcpIC8vIEluZmluaXR5IHBvaW50IGVuY29kZWQgaXMgc2ltcGx5ICcwMCcKCiAgdmFyIHggPSB0aGlzLmFmZmluZVgKICB2YXIgeSA9IHRoaXMuYWZmaW5lWQoKICB2YXIgYnVmZmVyCgogIC8vIERldGVybWluZSBzaXplIG9mIHEgaW4gYnl0ZXMKICB2YXIgYnl0ZUxlbmd0aCA9IE1hdGguZmxvb3IoKHRoaXMuY3VydmUucC5iaXRMZW5ndGgoKSArIDcpIC8gOCkKCiAgLy8gMHgwMi8weDAzIHwgWAogIGlmIChjb21wcmVzc2VkKSB7CiAgICBidWZmZXIgPSBuZXcgQnVmZmVyKDEgKyBieXRlTGVuZ3RoKQogICAgYnVmZmVyLndyaXRlVUludDgoeS5pc0V2ZW4oKSA/IDB4MDIgOiAweDAzLCAwKQoKICAvLyAweDA0IHwgWCB8IFkKICB9IGVsc2UgewogICAgYnVmZmVyID0gbmV3IEJ1ZmZlcigxICsgYnl0ZUxlbmd0aCArIGJ5dGVMZW5ndGgpCiAgICBidWZmZXIud3JpdGVVSW50OCgweDA0LCAwKQoKICAgIHkudG9CdWZmZXIoYnl0ZUxlbmd0aCkuY29weShidWZmZXIsIDEgKyBieXRlTGVuZ3RoKQogIH0KCiAgeC50b0J1ZmZlcihieXRlTGVuZ3RoKS5jb3B5KGJ1ZmZlciwgMSkKCiAgcmV0dXJuIGJ1ZmZlcgp9CgpQb2ludC5kZWNvZGVGcm9tID0gZnVuY3Rpb24oY3VydmUsIGJ1ZmZlcikgewogIHZhciB0eXBlID0gYnVmZmVyLnJlYWRVSW50OCgwKQogIHZhciBjb21wcmVzc2VkID0gKHR5cGUgIT09IDQpCgogIHZhciBieXRlTGVuZ3RoID0gTWF0aC5mbG9vcigoY3VydmUucC5iaXRMZW5ndGgoKSArIDcpIC8gOCkKICB2YXIgeCA9IEJpZ0ludGVnZXIuZnJvbUJ1ZmZlcihidWZmZXIuc2xpY2UoMSwgMSArIGJ5dGVMZW5ndGgpKQoKICB2YXIgUQogIGlmIChjb21wcmVzc2VkKSB7CiAgICBhc3NlcnQuZXF1YWwoYnVmZmVyLmxlbmd0aCwgYnl0ZUxlbmd0aCArIDEsICdJbnZhbGlkIHNlcXVlbmNlIGxlbmd0aCcpCiAgICBhc3NlcnQodHlwZSA9PT0gMHgwMiB8fCB0eXBlID09PSAweDAzLCAnSW52YWxpZCBzZXF1ZW5jZSB0YWcnKQoKICAgIHZhciBpc09kZCA9ICh0eXBlID09PSAweDAzKQogICAgUSA9IGN1cnZlLnBvaW50RnJvbVgoaXNPZGQsIHgpCgogIH0gZWxzZSB7CiAgICBhc3NlcnQuZXF1YWwoYnVmZmVyLmxlbmd0aCwgMSArIGJ5dGVMZW5ndGggKyBieXRlTGVuZ3RoLCAnSW52YWxpZCBzZXF1ZW5jZSBsZW5ndGgnKQoKICAgIHZhciB5ID0gQmlnSW50ZWdlci5mcm9tQnVmZmVyKGJ1ZmZlci5zbGljZSgxICsgYnl0ZUxlbmd0aCkpCiAgICBRID0gUG9pbnQuZnJvbUFmZmluZShjdXJ2ZSwgeCwgeSkKICB9CgogIFEuY29tcHJlc3NlZCA9IGNvbXByZXNzZWQKICByZXR1cm4gUQp9CgpQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHRoaXMuY3VydmUuaXNJbmZpbml0eSh0aGlzKSkgcmV0dXJuICcoSU5GSU5JVFkpJwoKICByZXR1cm4gJygnICsgdGhpcy5hZmZpbmVYLnRvU3RyaW5nKCkgKyAnLCcgKyB0aGlzLmFmZmluZVkudG9TdHJpbmcoKSArICcpJwp9Cgptb2R1bGUuZXhwb3J0cyA9IFBvaW50Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYXNzZXJ0IjoxNSwiYmlnaSI6MTksImJ1ZmZlciI6NzB9XSwxMDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgZWxsaXB0aWMgPSBleHBvcnRzOwoKZWxsaXB0aWMudmVyc2lvbiA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb247CmVsbGlwdGljLnV0aWxzID0gcmVxdWlyZSgnLi9lbGxpcHRpYy91dGlscycpOwplbGxpcHRpYy5yYW5kID0gcmVxdWlyZSgnYnJvcmFuZCcpOwplbGxpcHRpYy5obWFjRFJCRyA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvaG1hYy1kcmJnJyk7CmVsbGlwdGljLmN1cnZlID0gcmVxdWlyZSgnLi9lbGxpcHRpYy9jdXJ2ZScpOwplbGxpcHRpYy5jdXJ2ZXMgPSByZXF1aXJlKCcuL2VsbGlwdGljL2N1cnZlcycpOwoKLy8gUHJvdG9jb2xzCmVsbGlwdGljLmVjID0gcmVxdWlyZSgnLi9lbGxpcHRpYy9lYycpOwplbGxpcHRpYy5lZGRzYSA9IHJlcXVpcmUoJy4vZWxsaXB0aWMvZWRkc2EnKTsKCn0seyIuLi9wYWNrYWdlLmpzb24iOjExOCwiLi9lbGxpcHRpYy9jdXJ2ZSI6MTA1LCIuL2VsbGlwdGljL2N1cnZlcyI6MTA4LCIuL2VsbGlwdGljL2VjIjoxMDksIi4vZWxsaXB0aWMvZWRkc2EiOjExMiwiLi9lbGxpcHRpYy9obWFjLWRyYmciOjExNSwiLi9lbGxpcHRpYy91dGlscyI6MTE3LCJicm9yYW5kIjo0Mn1dLDEwMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgZ2V0TkFGID0gdXRpbHMuZ2V0TkFGOwp2YXIgZ2V0SlNGID0gdXRpbHMuZ2V0SlNGOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gQmFzZUN1cnZlKHR5cGUsIGNvbmYpIHsKICB0aGlzLnR5cGUgPSB0eXBlOwogIHRoaXMucCA9IG5ldyBCTihjb25mLnAsIDE2KTsKCiAgLy8gVXNlIE1vbnRnb21lcnksIHdoZW4gdGhlcmUgaXMgbm8gZmFzdCByZWR1Y3Rpb24gZm9yIHRoZSBwcmltZQogIHRoaXMucmVkID0gY29uZi5wcmltZSA/IEJOLnJlZChjb25mLnByaW1lKSA6IEJOLm1vbnQodGhpcy5wKTsKCiAgLy8gVXNlZnVsIGZvciBtYW55IGN1cnZlcwogIHRoaXMuemVybyA9IG5ldyBCTigwKS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5vbmUgPSBuZXcgQk4oMSkudG9SZWQodGhpcy5yZWQpOwogIHRoaXMudHdvID0gbmV3IEJOKDIpLnRvUmVkKHRoaXMucmVkKTsKCiAgLy8gQ3VydmUgY29uZmlndXJhdGlvbiwgb3B0aW9uYWwKICB0aGlzLm4gPSBjb25mLm4gJiYgbmV3IEJOKGNvbmYubiwgMTYpOwogIHRoaXMuZyA9IGNvbmYuZyAmJiB0aGlzLnBvaW50RnJvbUpTT04oY29uZi5nLCBjb25mLmdSZWQpOwoKICAvLyBUZW1wb3JhcnkgYXJyYXlzCiAgdGhpcy5fd25hZlQxID0gbmV3IEFycmF5KDQpOwogIHRoaXMuX3duYWZUMiA9IG5ldyBBcnJheSg0KTsKICB0aGlzLl93bmFmVDMgPSBuZXcgQXJyYXkoNCk7CiAgdGhpcy5fd25hZlQ0ID0gbmV3IEFycmF5KDQpOwp9Cm1vZHVsZS5leHBvcnRzID0gQmFzZUN1cnZlOwoKQmFzZUN1cnZlLnByb3RvdHlwZS5wb2ludCA9IGZ1bmN0aW9uIHBvaW50KCkgewogIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7Cn07CgpCYXNlQ3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsKfTsKCkJhc2VDdXJ2ZS5wcm90b3R5cGUuX2ZpeGVkTmFmTXVsID0gZnVuY3Rpb24gX2ZpeGVkTmFmTXVsKHAsIGspIHsKICBhc3NlcnQocC5wcmVjb21wdXRlZCk7CiAgdmFyIGRvdWJsZXMgPSBwLl9nZXREb3VibGVzKCk7CgogIHZhciBuYWYgPSBnZXROQUYoaywgMSk7CiAgdmFyIEkgPSAoMSA8PCAoZG91Ymxlcy5zdGVwICsgMSkpIC0gKGRvdWJsZXMuc3RlcCAlIDIgPT09IDAgPyAyIDogMSk7CiAgSSAvPSAzOwoKICAvLyBUcmFuc2xhdGUgaW50byBtb3JlIHdpbmRvd2VkIGZvcm0KICB2YXIgcmVwciA9IFtdOwogIGZvciAodmFyIGogPSAwOyBqIDwgbmFmLmxlbmd0aDsgaiArPSBkb3VibGVzLnN0ZXApIHsKICAgIHZhciBuYWZXID0gMDsKICAgIGZvciAodmFyIGsgPSBqICsgZG91Ymxlcy5zdGVwIC0gMTsgayA+PSBqOyBrLS0pCiAgICAgIG5hZlcgPSAobmFmVyA8PCAxKSArIG5hZltrXTsKICAgIHJlcHIucHVzaChuYWZXKTsKICB9CgogIHZhciBhID0gdGhpcy5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgdmFyIGIgPSB0aGlzLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICBmb3IgKHZhciBpID0gSTsgaSA+IDA7IGktLSkgewogICAgZm9yICh2YXIgaiA9IDA7IGogPCByZXByLmxlbmd0aDsgaisrKSB7CiAgICAgIHZhciBuYWZXID0gcmVwcltqXTsKICAgICAgaWYgKG5hZlcgPT09IGkpCiAgICAgICAgYiA9IGIubWl4ZWRBZGQoZG91Ymxlcy5wb2ludHNbal0pOwogICAgICBlbHNlIGlmIChuYWZXID09PSAtaSkKICAgICAgICBiID0gYi5taXhlZEFkZChkb3VibGVzLnBvaW50c1tqXS5uZWcoKSk7CiAgICB9CiAgICBhID0gYS5hZGQoYik7CiAgfQogIHJldHVybiBhLnRvUCgpOwp9OwoKQmFzZUN1cnZlLnByb3RvdHlwZS5fd25hZk11bCA9IGZ1bmN0aW9uIF93bmFmTXVsKHAsIGspIHsKICB2YXIgdyA9IDQ7CgogIC8vIFByZWNvbXB1dGUgd2luZG93CiAgdmFyIG5hZlBvaW50cyA9IHAuX2dldE5BRlBvaW50cyh3KTsKICB3ID0gbmFmUG9pbnRzLnduZDsKICB2YXIgd25kID0gbmFmUG9pbnRzLnBvaW50czsKCiAgLy8gR2V0IE5BRiBmb3JtCiAgdmFyIG5hZiA9IGdldE5BRihrLCB3KTsKCiAgLy8gQWRkIGB0aGlzYCooTisxKSBmb3IgZXZlcnkgdy1OQUYgaW5kZXgKICB2YXIgYWNjID0gdGhpcy5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgZm9yICh2YXIgaSA9IG5hZi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgLy8gQ291bnQgemVyb2VzCiAgICBmb3IgKHZhciBrID0gMDsgaSA+PSAwICYmIG5hZltpXSA9PT0gMDsgaS0tKQogICAgICBrKys7CiAgICBpZiAoaSA+PSAwKQogICAgICBrKys7CiAgICBhY2MgPSBhY2MuZGJscChrKTsKCiAgICBpZiAoaSA8IDApCiAgICAgIGJyZWFrOwogICAgdmFyIHogPSBuYWZbaV07CiAgICBhc3NlcnQoeiAhPT0gMCk7CiAgICBpZiAocC50eXBlID09PSAnYWZmaW5lJykgewogICAgICAvLyBKICstIFAKICAgICAgaWYgKHogPiAwKQogICAgICAgIGFjYyA9IGFjYy5taXhlZEFkZCh3bmRbKHogLSAxKSA+PiAxXSk7CiAgICAgIGVsc2UKICAgICAgICBhY2MgPSBhY2MubWl4ZWRBZGQod25kWygteiAtIDEpID4+IDFdLm5lZygpKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEogKy0gSgogICAgICBpZiAoeiA+IDApCiAgICAgICAgYWNjID0gYWNjLmFkZCh3bmRbKHogLSAxKSA+PiAxXSk7CiAgICAgIGVsc2UKICAgICAgICBhY2MgPSBhY2MuYWRkKHduZFsoLXogLSAxKSA+PiAxXS5uZWcoKSk7CiAgICB9CiAgfQogIHJldHVybiBwLnR5cGUgPT09ICdhZmZpbmUnID8gYWNjLnRvUCgpIDogYWNjOwp9OwoKQmFzZUN1cnZlLnByb3RvdHlwZS5fd25hZk11bEFkZCA9IGZ1bmN0aW9uIF93bmFmTXVsQWRkKGRlZlcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2VmZnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4pIHsKICB2YXIgd25kV2lkdGggPSB0aGlzLl93bmFmVDE7CiAgdmFyIHduZCA9IHRoaXMuX3duYWZUMjsKICB2YXIgbmFmID0gdGhpcy5fd25hZlQzOwoKICAvLyBGaWxsIGFsbCBhcnJheXMKICB2YXIgbWF4ID0gMDsKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICB2YXIgcCA9IHBvaW50c1tpXTsKICAgIHZhciBuYWZQb2ludHMgPSBwLl9nZXROQUZQb2ludHMoZGVmVyk7CiAgICB3bmRXaWR0aFtpXSA9IG5hZlBvaW50cy53bmQ7CiAgICB3bmRbaV0gPSBuYWZQb2ludHMucG9pbnRzOwogIH0KCiAgLy8gQ29tYiBzbWFsbCB3aW5kb3cgTkFGcwogIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDE7IGkgLT0gMikgewogICAgdmFyIGEgPSBpIC0gMTsKICAgIHZhciBiID0gaTsKICAgIGlmICh3bmRXaWR0aFthXSAhPT0gMSB8fCB3bmRXaWR0aFtiXSAhPT0gMSkgewogICAgICBuYWZbYV0gPSBnZXROQUYoY29lZmZzW2FdLCB3bmRXaWR0aFthXSk7CiAgICAgIG5hZltiXSA9IGdldE5BRihjb2VmZnNbYl0sIHduZFdpZHRoW2JdKTsKICAgICAgbWF4ID0gTWF0aC5tYXgobmFmW2FdLmxlbmd0aCwgbWF4KTsKICAgICAgbWF4ID0gTWF0aC5tYXgobmFmW2JdLmxlbmd0aCwgbWF4KTsKICAgICAgY29udGludWU7CiAgICB9CgogICAgdmFyIGNvbWIgPSBbCiAgICAgIHBvaW50c1thXSwgLyogMSAqLwogICAgICBudWxsLCAvKiAzICovCiAgICAgIG51bGwsIC8qIDUgKi8KICAgICAgcG9pbnRzW2JdIC8qIDcgKi8KICAgIF07CgogICAgLy8gVHJ5IHRvIGF2b2lkIFByb2plY3RpdmUgcG9pbnRzLCBpZiBwb3NzaWJsZQogICAgaWYgKHBvaW50c1thXS55LmNtcChwb2ludHNbYl0ueSkgPT09IDApIHsKICAgICAgY29tYlsxXSA9IHBvaW50c1thXS5hZGQocG9pbnRzW2JdKTsKICAgICAgY29tYlsyXSA9IHBvaW50c1thXS50b0ooKS5taXhlZEFkZChwb2ludHNbYl0ubmVnKCkpOwogICAgfSBlbHNlIGlmIChwb2ludHNbYV0ueS5jbXAocG9pbnRzW2JdLnkucmVkTmVnKCkpID09PSAwKSB7CiAgICAgIGNvbWJbMV0gPSBwb2ludHNbYV0udG9KKCkubWl4ZWRBZGQocG9pbnRzW2JdKTsKICAgICAgY29tYlsyXSA9IHBvaW50c1thXS5hZGQocG9pbnRzW2JdLm5lZygpKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbWJbMV0gPSBwb2ludHNbYV0udG9KKCkubWl4ZWRBZGQocG9pbnRzW2JdKTsKICAgICAgY29tYlsyXSA9IHBvaW50c1thXS50b0ooKS5taXhlZEFkZChwb2ludHNbYl0ubmVnKCkpOwogICAgfQoKICAgIHZhciBpbmRleCA9IFsKICAgICAgLTMsIC8qIC0xIC0xICovCiAgICAgIC0xLCAvKiAtMSAwICovCiAgICAgIC01LCAvKiAtMSAxICovCiAgICAgIC03LCAvKiAwIC0xICovCiAgICAgIDAsIC8qIDAgMCAqLwogICAgICA3LCAvKiAwIDEgKi8KICAgICAgNSwgLyogMSAtMSAqLwogICAgICAxLCAvKiAxIDAgKi8KICAgICAgMyAgLyogMSAxICovCiAgICBdOwoKICAgIHZhciBqc2YgPSBnZXRKU0YoY29lZmZzW2FdLCBjb2VmZnNbYl0pOwogICAgbWF4ID0gTWF0aC5tYXgoanNmWzBdLmxlbmd0aCwgbWF4KTsKICAgIG5hZlthXSA9IG5ldyBBcnJheShtYXgpOwogICAgbmFmW2JdID0gbmV3IEFycmF5KG1heCk7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heDsgaisrKSB7CiAgICAgIHZhciBqYSA9IGpzZlswXVtqXSB8IDA7CiAgICAgIHZhciBqYiA9IGpzZlsxXVtqXSB8IDA7CgogICAgICBuYWZbYV1bal0gPSBpbmRleFsoamEgKyAxKSAqIDMgKyAoamIgKyAxKV07CiAgICAgIG5hZltiXVtqXSA9IDA7CiAgICAgIHduZFthXSA9IGNvbWI7CiAgICB9CiAgfQoKICB2YXIgYWNjID0gdGhpcy5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CiAgdmFyIHRtcCA9IHRoaXMuX3duYWZUNDsKICBmb3IgKHZhciBpID0gbWF4OyBpID49IDA7IGktLSkgewogICAgdmFyIGsgPSAwOwoKICAgIHdoaWxlIChpID49IDApIHsKICAgICAgdmFyIHplcm8gPSB0cnVlOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjsgaisrKSB7CiAgICAgICAgdG1wW2pdID0gbmFmW2pdW2ldIHwgMDsKICAgICAgICBpZiAodG1wW2pdICE9PSAwKQogICAgICAgICAgemVybyA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmICghemVybykKICAgICAgICBicmVhazsKICAgICAgaysrOwogICAgICBpLS07CiAgICB9CiAgICBpZiAoaSA+PSAwKQogICAgICBrKys7CiAgICBhY2MgPSBhY2MuZGJscChrKTsKICAgIGlmIChpIDwgMCkKICAgICAgYnJlYWs7CgogICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW47IGorKykgewogICAgICB2YXIgeiA9IHRtcFtqXTsKICAgICAgdmFyIHA7CiAgICAgIGlmICh6ID09PSAwKQogICAgICAgIGNvbnRpbnVlOwogICAgICBlbHNlIGlmICh6ID4gMCkKICAgICAgICBwID0gd25kW2pdWyh6IC0gMSkgPj4gMV07CiAgICAgIGVsc2UgaWYgKHogPCAwKQogICAgICAgIHAgPSB3bmRbal1bKC16IC0gMSkgPj4gMV0ubmVnKCk7CgogICAgICBpZiAocC50eXBlID09PSAnYWZmaW5lJykKICAgICAgICBhY2MgPSBhY2MubWl4ZWRBZGQocCk7CiAgICAgIGVsc2UKICAgICAgICBhY2MgPSBhY2MuYWRkKHApOwogICAgfQogIH0KICAvLyBaZXJvaWZ5IHJlZmVyZW5jZXMKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgd25kW2ldID0gbnVsbDsKICByZXR1cm4gYWNjLnRvUCgpOwp9OwoKZnVuY3Rpb24gQmFzZVBvaW50KGN1cnZlLCB0eXBlKSB7CiAgdGhpcy5jdXJ2ZSA9IGN1cnZlOwogIHRoaXMudHlwZSA9IHR5cGU7CiAgdGhpcy5wcmVjb21wdXRlZCA9IG51bGw7Cn0KQmFzZUN1cnZlLkJhc2VQb2ludCA9IEJhc2VQb2ludDsKCkJhc2VQb2ludC5wcm90b3R5cGUuZXEgPSBmdW5jdGlvbiBlcSgvKm90aGVyKi8pIHsKICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogIHJldHVybiB0aGlzLmN1cnZlLnZhbGlkYXRlKHRoaXMpOwp9OwoKQmFzZUN1cnZlLnByb3RvdHlwZS5kZWNvZGVQb2ludCA9IGZ1bmN0aW9uIGRlY29kZVBvaW50KGJ5dGVzLCBlbmMpIHsKICBieXRlcyA9IHV0aWxzLnRvQXJyYXkoYnl0ZXMsIGVuYyk7CgogIHZhciBsZW4gPSB0aGlzLnAuYnl0ZUxlbmd0aCgpOwogIGlmIChieXRlc1swXSA9PT0gMHgwNCAmJiBieXRlcy5sZW5ndGggLSAxID09PSAyICogbGVuKSB7CiAgICByZXR1cm4gdGhpcy5wb2ludChieXRlcy5zbGljZSgxLCAxICsgbGVuKSwKICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzLnNsaWNlKDEgKyBsZW4sIDEgKyAyICogbGVuKSk7CiAgfSBlbHNlIGlmICgoYnl0ZXNbMF0gPT09IDB4MDIgfHwgYnl0ZXNbMF0gPT09IDB4MDMpICYmCiAgICAgICAgICAgICAgYnl0ZXMubGVuZ3RoIC0gMSA9PT0gbGVuKSB7CiAgICByZXR1cm4gdGhpcy5wb2ludEZyb21YKGJ5dGVzLnNsaWNlKDEsIDEgKyBsZW4pLCBieXRlc1swXSA9PT0gMHgwMyk7CiAgfQogIHRocm93IG5ldyBFcnJvcignVW5rbm93biBwb2ludCBmb3JtYXQnKTsKfTsKCkJhc2VQb2ludC5wcm90b3R5cGUuZW5jb2RlQ29tcHJlc3NlZCA9IGZ1bmN0aW9uIGVuY29kZUNvbXByZXNzZWQoZW5jKSB7CiAgcmV0dXJuIHRoaXMuZW5jb2RlKGVuYywgdHJ1ZSk7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLl9lbmNvZGUgPSBmdW5jdGlvbiBfZW5jb2RlKGNvbXBhY3QpIHsKICB2YXIgbGVuID0gdGhpcy5jdXJ2ZS5wLmJ5dGVMZW5ndGgoKTsKICB2YXIgeCA9IHRoaXMuZ2V0WCgpLnRvQXJyYXkoJ2JlJywgbGVuKTsKCiAgaWYgKGNvbXBhY3QpCiAgICByZXR1cm4gWyB0aGlzLmdldFkoKS5pc0V2ZW4oKSA/IDB4MDIgOiAweDAzIF0uY29uY2F0KHgpOwoKICByZXR1cm4gWyAweDA0IF0uY29uY2F0KHgsIHRoaXMuZ2V0WSgpLnRvQXJyYXkoJ2JlJywgbGVuKSkgOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbiBlbmNvZGUoZW5jLCBjb21wYWN0KSB7CiAgcmV0dXJuIHV0aWxzLmVuY29kZSh0aGlzLl9lbmNvZGUoY29tcGFjdCksIGVuYyk7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLnByZWNvbXB1dGUgPSBmdW5jdGlvbiBwcmVjb21wdXRlKHBvd2VyKSB7CiAgaWYgKHRoaXMucHJlY29tcHV0ZWQpCiAgICByZXR1cm4gdGhpczsKCiAgdmFyIHByZWNvbXB1dGVkID0gewogICAgZG91YmxlczogbnVsbCwKICAgIG5hZjogbnVsbCwKICAgIGJldGE6IG51bGwKICB9OwogIHByZWNvbXB1dGVkLm5hZiA9IHRoaXMuX2dldE5BRlBvaW50cyg4KTsKICBwcmVjb21wdXRlZC5kb3VibGVzID0gdGhpcy5fZ2V0RG91Ymxlcyg0LCBwb3dlcik7CiAgcHJlY29tcHV0ZWQuYmV0YSA9IHRoaXMuX2dldEJldGEoKTsKICB0aGlzLnByZWNvbXB1dGVkID0gcHJlY29tcHV0ZWQ7CgogIHJldHVybiB0aGlzOwp9OwoKQmFzZVBvaW50LnByb3RvdHlwZS5faGFzRG91YmxlcyA9IGZ1bmN0aW9uIF9oYXNEb3VibGVzKGspIHsKICBpZiAoIXRoaXMucHJlY29tcHV0ZWQpCiAgICByZXR1cm4gZmFsc2U7CgogIHZhciBkb3VibGVzID0gdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzOwogIGlmICghZG91YmxlcykKICAgIHJldHVybiBmYWxzZTsKCiAgcmV0dXJuIGRvdWJsZXMucG9pbnRzLmxlbmd0aCA+PSBNYXRoLmNlaWwoKGsuYml0TGVuZ3RoKCkgKyAxKSAvIGRvdWJsZXMuc3RlcCk7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLl9nZXREb3VibGVzID0gZnVuY3Rpb24gX2dldERvdWJsZXMoc3RlcCwgcG93ZXIpIHsKICBpZiAodGhpcy5wcmVjb21wdXRlZCAmJiB0aGlzLnByZWNvbXB1dGVkLmRvdWJsZXMpCiAgICByZXR1cm4gdGhpcy5wcmVjb21wdXRlZC5kb3VibGVzOwoKICB2YXIgZG91YmxlcyA9IFsgdGhpcyBdOwogIHZhciBhY2MgPSB0aGlzOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcG93ZXI7IGkgKz0gc3RlcCkgewogICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdGVwOyBqKyspCiAgICAgIGFjYyA9IGFjYy5kYmwoKTsKICAgIGRvdWJsZXMucHVzaChhY2MpOwogIH0KICByZXR1cm4gewogICAgc3RlcDogc3RlcCwKICAgIHBvaW50czogZG91YmxlcwogIH07Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLl9nZXROQUZQb2ludHMgPSBmdW5jdGlvbiBfZ2V0TkFGUG9pbnRzKHduZCkgewogIGlmICh0aGlzLnByZWNvbXB1dGVkICYmIHRoaXMucHJlY29tcHV0ZWQubmFmKQogICAgcmV0dXJuIHRoaXMucHJlY29tcHV0ZWQubmFmOwoKICB2YXIgcmVzID0gWyB0aGlzIF07CiAgdmFyIG1heCA9ICgxIDw8IHduZCkgLSAxOwogIHZhciBkYmwgPSBtYXggPT09IDEgPyBudWxsIDogdGhpcy5kYmwoKTsKICBmb3IgKHZhciBpID0gMTsgaSA8IG1heDsgaSsrKQogICAgcmVzW2ldID0gcmVzW2kgLSAxXS5hZGQoZGJsKTsKICByZXR1cm4gewogICAgd25kOiB3bmQsCiAgICBwb2ludHM6IHJlcwogIH07Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLl9nZXRCZXRhID0gZnVuY3Rpb24gX2dldEJldGEoKSB7CiAgcmV0dXJuIG51bGw7Cn07CgpCYXNlUG9pbnQucHJvdG90eXBlLmRibHAgPSBmdW5jdGlvbiBkYmxwKGspIHsKICB2YXIgciA9IHRoaXM7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrOyBpKyspCiAgICByID0gci5kYmwoKTsKICByZXR1cm4gcjsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAyLCJibi5qcyI6NDF9XSwxMDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgY3VydmUgPSByZXF1aXJlKCcuLi9jdXJ2ZScpOwp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgQk4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgQmFzZSA9IGN1cnZlLmJhc2U7Cgp2YXIgYXNzZXJ0ID0gZWxsaXB0aWMudXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gRWR3YXJkc0N1cnZlKGNvbmYpIHsKICAvLyBOT1RFOiBJbXBvcnRhbnQgYXMgd2UgYXJlIGNyZWF0aW5nIHBvaW50IGluIEJhc2UuY2FsbCgpCiAgdGhpcy50d2lzdGVkID0gKGNvbmYuYSB8IDApICE9PSAxOwogIHRoaXMubU9uZUEgPSB0aGlzLnR3aXN0ZWQgJiYgKGNvbmYuYSB8IDApID09PSAtMTsKICB0aGlzLmV4dGVuZGVkID0gdGhpcy5tT25lQTsKCiAgQmFzZS5jYWxsKHRoaXMsICdlZHdhcmRzJywgY29uZik7CgogIHRoaXMuYSA9IG5ldyBCTihjb25mLmEsIDE2KS51bW9kKHRoaXMucmVkLm0pOwogIHRoaXMuYSA9IHRoaXMuYS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5jID0gbmV3IEJOKGNvbmYuYywgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmMyID0gdGhpcy5jLnJlZFNxcigpOwogIHRoaXMuZCA9IG5ldyBCTihjb25mLmQsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5kZCA9IHRoaXMuZC5yZWRBZGQodGhpcy5kKTsKCiAgYXNzZXJ0KCF0aGlzLnR3aXN0ZWQgfHwgdGhpcy5jLmZyb21SZWQoKS5jbXBuKDEpID09PSAwKTsKICB0aGlzLm9uZUMgPSAoY29uZi5jIHwgMCkgPT09IDE7Cn0KaW5oZXJpdHMoRWR3YXJkc0N1cnZlLCBCYXNlKTsKbW9kdWxlLmV4cG9ydHMgPSBFZHdhcmRzQ3VydmU7CgpFZHdhcmRzQ3VydmUucHJvdG90eXBlLl9tdWxBID0gZnVuY3Rpb24gX211bEEobnVtKSB7CiAgaWYgKHRoaXMubU9uZUEpCiAgICByZXR1cm4gbnVtLnJlZE5lZygpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLmEucmVkTXVsKG51bSk7Cn07CgpFZHdhcmRzQ3VydmUucHJvdG90eXBlLl9tdWxDID0gZnVuY3Rpb24gX211bEMobnVtKSB7CiAgaWYgKHRoaXMub25lQykKICAgIHJldHVybiBudW07CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuYy5yZWRNdWwobnVtKTsKfTsKCi8vIEp1c3QgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBTaG9ydCBjdXJ2ZQpFZHdhcmRzQ3VydmUucHJvdG90eXBlLmpwb2ludCA9IGZ1bmN0aW9uIGpwb2ludCh4LCB5LCB6LCB0KSB7CiAgcmV0dXJuIHRoaXMucG9pbnQoeCwgeSwgeiwgdCk7Cn07CgpFZHdhcmRzQ3VydmUucHJvdG90eXBlLnBvaW50RnJvbVggPSBmdW5jdGlvbiBwb2ludEZyb21YKHgsIG9kZCkgewogIHggPSBuZXcgQk4oeCwgMTYpOwogIGlmICgheC5yZWQpCiAgICB4ID0geC50b1JlZCh0aGlzLnJlZCk7CgogIHZhciB4MiA9IHgucmVkU3FyKCk7CiAgdmFyIHJocyA9IHRoaXMuYzIucmVkU3ViKHRoaXMuYS5yZWRNdWwoeDIpKTsKICB2YXIgbGhzID0gdGhpcy5vbmUucmVkU3ViKHRoaXMuYzIucmVkTXVsKHRoaXMuZCkucmVkTXVsKHgyKSk7CgogIHZhciB5MiA9IHJocy5yZWRNdWwobGhzLnJlZEludm0oKSk7CiAgdmFyIHkgPSB5Mi5yZWRTcXJ0KCk7CiAgaWYgKHkucmVkU3FyKCkucmVkU3ViKHkyKS5jbXAodGhpcy56ZXJvKSAhPT0gMCkKICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBwb2ludCcpOwoKICB2YXIgaXNPZGQgPSB5LmZyb21SZWQoKS5pc09kZCgpOwogIGlmIChvZGQgJiYgIWlzT2RkIHx8ICFvZGQgJiYgaXNPZGQpCiAgICB5ID0geS5yZWROZWcoKTsKCiAgcmV0dXJuIHRoaXMucG9pbnQoeCwgeSk7Cn07CgpFZHdhcmRzQ3VydmUucHJvdG90eXBlLnBvaW50RnJvbVkgPSBmdW5jdGlvbiBwb2ludEZyb21ZKHksIG9kZCkgewogIHkgPSBuZXcgQk4oeSwgMTYpOwogIGlmICgheS5yZWQpCiAgICB5ID0geS50b1JlZCh0aGlzLnJlZCk7CgogIC8vIHheMiA9ICh5XjIgLSAxKSAvIChkIHleMiArIDEpCiAgdmFyIHkyID0geS5yZWRTcXIoKTsKICB2YXIgbGhzID0geTIucmVkU3ViKHRoaXMub25lKTsKICB2YXIgcmhzID0geTIucmVkTXVsKHRoaXMuZCkucmVkQWRkKHRoaXMub25lKTsKICB2YXIgeDIgPSBsaHMucmVkTXVsKHJocy5yZWRJbnZtKCkpOwoKICBpZiAoeDIuY21wKHRoaXMuemVybykgPT09IDApIHsKICAgIGlmIChvZGQpCiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBwb2ludCcpOwogICAgZWxzZQogICAgICByZXR1cm4gdGhpcy5wb2ludCh0aGlzLnplcm8sIHkpOwogIH0KCiAgdmFyIHggPSB4Mi5yZWRTcXJ0KCk7CiAgaWYgKHgucmVkU3FyKCkucmVkU3ViKHgyKS5jbXAodGhpcy56ZXJvKSAhPT0gMCkKICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBwb2ludCcpOwoKICBpZiAoeC5pc09kZCgpICE9PSBvZGQpCiAgICB4ID0geC5yZWROZWcoKTsKCiAgcmV0dXJuIHRoaXMucG9pbnQoeCwgeSk7Cn07CgpFZHdhcmRzQ3VydmUucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUocG9pbnQpIHsKICBpZiAocG9pbnQuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRydWU7CgogIC8vIEN1cnZlOiBBICogWF4yICsgWV4yID0gQ14yICogKDEgKyBEICogWF4yICogWV4yKQogIHBvaW50Lm5vcm1hbGl6ZSgpOwoKICB2YXIgeDIgPSBwb2ludC54LnJlZFNxcigpOwogIHZhciB5MiA9IHBvaW50LnkucmVkU3FyKCk7CiAgdmFyIGxocyA9IHgyLnJlZE11bCh0aGlzLmEpLnJlZEFkZCh5Mik7CiAgdmFyIHJocyA9IHRoaXMuYzIucmVkTXVsKHRoaXMub25lLnJlZEFkZCh0aGlzLmQucmVkTXVsKHgyKS5yZWRNdWwoeTIpKSk7CgogIHJldHVybiBsaHMuY21wKHJocykgPT09IDA7Cn07CgpmdW5jdGlvbiBQb2ludChjdXJ2ZSwgeCwgeSwgeiwgdCkgewogIEJhc2UuQmFzZVBvaW50LmNhbGwodGhpcywgY3VydmUsICdwcm9qZWN0aXZlJyk7CiAgaWYgKHggPT09IG51bGwgJiYgeSA9PT0gbnVsbCAmJiB6ID09PSBudWxsKSB7CiAgICB0aGlzLnggPSB0aGlzLmN1cnZlLnplcm87CiAgICB0aGlzLnkgPSB0aGlzLmN1cnZlLm9uZTsKICAgIHRoaXMueiA9IHRoaXMuY3VydmUub25lOwogICAgdGhpcy50ID0gdGhpcy5jdXJ2ZS56ZXJvOwogICAgdGhpcy56T25lID0gdHJ1ZTsKICB9IGVsc2UgewogICAgdGhpcy54ID0gbmV3IEJOKHgsIDE2KTsKICAgIHRoaXMueSA9IG5ldyBCTih5LCAxNik7CiAgICB0aGlzLnogPSB6ID8gbmV3IEJOKHosIDE2KSA6IHRoaXMuY3VydmUub25lOwogICAgdGhpcy50ID0gdCAmJiBuZXcgQk4odCwgMTYpOwogICAgaWYgKCF0aGlzLngucmVkKQogICAgICB0aGlzLnggPSB0aGlzLngudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgaWYgKCF0aGlzLnkucmVkKQogICAgICB0aGlzLnkgPSB0aGlzLnkudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgaWYgKCF0aGlzLnoucmVkKQogICAgICB0aGlzLnogPSB0aGlzLnoudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgaWYgKHRoaXMudCAmJiAhdGhpcy50LnJlZCkKICAgICAgdGhpcy50ID0gdGhpcy50LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICAgIHRoaXMuek9uZSA9IHRoaXMueiA9PT0gdGhpcy5jdXJ2ZS5vbmU7CgogICAgLy8gVXNlIGV4dGVuZGVkIGNvb3JkaW5hdGVzCiAgICBpZiAodGhpcy5jdXJ2ZS5leHRlbmRlZCAmJiAhdGhpcy50KSB7CiAgICAgIHRoaXMudCA9IHRoaXMueC5yZWRNdWwodGhpcy55KTsKICAgICAgaWYgKCF0aGlzLnpPbmUpCiAgICAgICAgdGhpcy50ID0gdGhpcy50LnJlZE11bCh0aGlzLnoucmVkSW52bSgpKTsKICAgIH0KICB9Cn0KaW5oZXJpdHMoUG9pbnQsIEJhc2UuQmFzZVBvaW50KTsKCkVkd2FyZHNDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tSlNPTiA9IGZ1bmN0aW9uIHBvaW50RnJvbUpTT04ob2JqKSB7CiAgcmV0dXJuIFBvaW50LmZyb21KU09OKHRoaXMsIG9iaik7Cn07CgpFZHdhcmRzQ3VydmUucHJvdG90eXBlLnBvaW50ID0gZnVuY3Rpb24gcG9pbnQoeCwgeSwgeiwgdCkgewogIHJldHVybiBuZXcgUG9pbnQodGhpcywgeCwgeSwgeiwgdCk7Cn07CgpQb2ludC5mcm9tSlNPTiA9IGZ1bmN0aW9uIGZyb21KU09OKGN1cnZlLCBvYmopIHsKICByZXR1cm4gbmV3IFBvaW50KGN1cnZlLCBvYmpbMF0sIG9ialsxXSwgb2JqWzJdKTsKfTsKClBvaW50LnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gJzxFQyBQb2ludCBJbmZpbml0eT4nOwogIHJldHVybiAnPEVDIFBvaW50IHg6ICcgKyB0aGlzLnguZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICcgeTogJyArIHRoaXMueS5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsKICAgICAgJyB6OiAnICsgdGhpcy56LmZyb21SZWQoKS50b1N0cmluZygxNiwgMikgKyAnPic7Cn07CgpQb2ludC5wcm90b3R5cGUuaXNJbmZpbml0eSA9IGZ1bmN0aW9uIGlzSW5maW5pdHkoKSB7CiAgLy8gWFhYIFRoaXMgY29kZSBhc3N1bWVzIHRoYXQgemVybyBpcyBhbHdheXMgemVybyBpbiByZWQKICByZXR1cm4gdGhpcy54LmNtcG4oMCkgPT09IDAgJiYKICAgICAgICAgdGhpcy55LmNtcCh0aGlzLnopID09PSAwOwp9OwoKUG9pbnQucHJvdG90eXBlLl9leHREYmwgPSBmdW5jdGlvbiBfZXh0RGJsKCkgewogIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by10d2lzdGVkLWV4dGVuZGVkLTEuaHRtbAogIC8vICAgICAjZG91YmxpbmctZGJsLTIwMDgtaHdjZAogIC8vIDRNICsgNFMKCiAgLy8gQSA9IFgxXjIKICB2YXIgYSA9IHRoaXMueC5yZWRTcXIoKTsKICAvLyBCID0gWTFeMgogIHZhciBiID0gdGhpcy55LnJlZFNxcigpOwogIC8vIEMgPSAyICogWjFeMgogIHZhciBjID0gdGhpcy56LnJlZFNxcigpOwogIGMgPSBjLnJlZElBZGQoYyk7CiAgLy8gRCA9IGEgKiBBCiAgdmFyIGQgPSB0aGlzLmN1cnZlLl9tdWxBKGEpOwogIC8vIEUgPSAoWDEgKyBZMSleMiAtIEEgLSBCCiAgdmFyIGUgPSB0aGlzLngucmVkQWRkKHRoaXMueSkucmVkU3FyKCkucmVkSVN1YihhKS5yZWRJU3ViKGIpOwogIC8vIEcgPSBEICsgQgogIHZhciBnID0gZC5yZWRBZGQoYik7CiAgLy8gRiA9IEcgLSBDCiAgdmFyIGYgPSBnLnJlZFN1YihjKTsKICAvLyBIID0gRCAtIEIKICB2YXIgaCA9IGQucmVkU3ViKGIpOwogIC8vIFgzID0gRSAqIEYKICB2YXIgbnggPSBlLnJlZE11bChmKTsKICAvLyBZMyA9IEcgKiBICiAgdmFyIG55ID0gZy5yZWRNdWwoaCk7CiAgLy8gVDMgPSBFICogSAogIHZhciBudCA9IGUucmVkTXVsKGgpOwogIC8vIFozID0gRiAqIEcKICB2YXIgbnogPSBmLnJlZE11bChnKTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnksIG56LCBudCk7Cn07CgpQb2ludC5wcm90b3R5cGUuX3Byb2pEYmwgPSBmdW5jdGlvbiBfcHJvakRibCgpIHsKICAvLyBoeXBlcmVsbGlwdGljLm9yZy9FRkQvZzFwL2F1dG8tdHdpc3RlZC1wcm9qZWN0aXZlLmh0bWwKICAvLyAgICAgI2RvdWJsaW5nLWRibC0yMDA4LWJiamxwCiAgLy8gICAgICNkb3VibGluZy1kYmwtMjAwNy1ibAogIC8vIGFuZCBvdGhlcnMKICAvLyBHZW5lcmFsbHkgM00gKyA0UyBvciAyTSArIDRTCgogIC8vIEIgPSAoWDEgKyBZMSleMgogIHZhciBiID0gdGhpcy54LnJlZEFkZCh0aGlzLnkpLnJlZFNxcigpOwogIC8vIEMgPSBYMV4yCiAgdmFyIGMgPSB0aGlzLngucmVkU3FyKCk7CiAgLy8gRCA9IFkxXjIKICB2YXIgZCA9IHRoaXMueS5yZWRTcXIoKTsKCiAgdmFyIG54OwogIHZhciBueTsKICB2YXIgbno7CiAgaWYgKHRoaXMuY3VydmUudHdpc3RlZCkgewogICAgLy8gRSA9IGEgKiBDCiAgICB2YXIgZSA9IHRoaXMuY3VydmUuX211bEEoYyk7CiAgICAvLyBGID0gRSArIEQKICAgIHZhciBmID0gZS5yZWRBZGQoZCk7CiAgICBpZiAodGhpcy56T25lKSB7CiAgICAgIC8vIFgzID0gKEIgLSBDIC0gRCkgKiAoRiAtIDIpCiAgICAgIG54ID0gYi5yZWRTdWIoYykucmVkU3ViKGQpLnJlZE11bChmLnJlZFN1Yih0aGlzLmN1cnZlLnR3bykpOwogICAgICAvLyBZMyA9IEYgKiAoRSAtIEQpCiAgICAgIG55ID0gZi5yZWRNdWwoZS5yZWRTdWIoZCkpOwogICAgICAvLyBaMyA9IEZeMiAtIDIgKiBGCiAgICAgIG56ID0gZi5yZWRTcXIoKS5yZWRTdWIoZikucmVkU3ViKGYpOwogICAgfSBlbHNlIHsKICAgICAgLy8gSCA9IFoxXjIKICAgICAgdmFyIGggPSB0aGlzLnoucmVkU3FyKCk7CiAgICAgIC8vIEogPSBGIC0gMiAqIEgKICAgICAgdmFyIGogPSBmLnJlZFN1YihoKS5yZWRJU3ViKGgpOwogICAgICAvLyBYMyA9IChCLUMtRCkqSgogICAgICBueCA9IGIucmVkU3ViKGMpLnJlZElTdWIoZCkucmVkTXVsKGopOwogICAgICAvLyBZMyA9IEYgKiAoRSAtIEQpCiAgICAgIG55ID0gZi5yZWRNdWwoZS5yZWRTdWIoZCkpOwogICAgICAvLyBaMyA9IEYgKiBKCiAgICAgIG56ID0gZi5yZWRNdWwoaik7CiAgICB9CiAgfSBlbHNlIHsKICAgIC8vIEUgPSBDICsgRAogICAgdmFyIGUgPSBjLnJlZEFkZChkKTsKICAgIC8vIEggPSAoYyAqIFoxKV4yCiAgICB2YXIgaCA9IHRoaXMuY3VydmUuX211bEModGhpcy5jLnJlZE11bCh0aGlzLnopKS5yZWRTcXIoKTsKICAgIC8vIEogPSBFIC0gMiAqIEgKICAgIHZhciBqID0gZS5yZWRTdWIoaCkucmVkU3ViKGgpOwogICAgLy8gWDMgPSBjICogKEIgLSBFKSAqIEoKICAgIG54ID0gdGhpcy5jdXJ2ZS5fbXVsQyhiLnJlZElTdWIoZSkpLnJlZE11bChqKTsKICAgIC8vIFkzID0gYyAqIEUgKiAoQyAtIEQpCiAgICBueSA9IHRoaXMuY3VydmUuX211bEMoZSkucmVkTXVsKGMucmVkSVN1YihkKSk7CiAgICAvLyBaMyA9IEUgKiBKCiAgICBueiA9IGUucmVkTXVsKGopOwogIH0KICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnksIG56KTsKfTsKClBvaW50LnByb3RvdHlwZS5kYmwgPSBmdW5jdGlvbiBkYmwoKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRoaXM7CgogIC8vIERvdWJsZSBpbiBleHRlbmRlZCBjb29yZGluYXRlcwogIGlmICh0aGlzLmN1cnZlLmV4dGVuZGVkKQogICAgcmV0dXJuIHRoaXMuX2V4dERibCgpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLl9wcm9qRGJsKCk7Cn07CgpQb2ludC5wcm90b3R5cGUuX2V4dEFkZCA9IGZ1bmN0aW9uIF9leHRBZGQocCkgewogIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by10d2lzdGVkLWV4dGVuZGVkLTEuaHRtbAogIC8vICAgICAjYWRkaXRpb24tYWRkLTIwMDgtaHdjZC0zCiAgLy8gOE0KCiAgLy8gQSA9IChZMSAtIFgxKSAqIChZMiAtIFgyKQogIHZhciBhID0gdGhpcy55LnJlZFN1Yih0aGlzLngpLnJlZE11bChwLnkucmVkU3ViKHAueCkpOwogIC8vIEIgPSAoWTEgKyBYMSkgKiAoWTIgKyBYMikKICB2YXIgYiA9IHRoaXMueS5yZWRBZGQodGhpcy54KS5yZWRNdWwocC55LnJlZEFkZChwLngpKTsKICAvLyBDID0gVDEgKiBrICogVDIKICB2YXIgYyA9IHRoaXMudC5yZWRNdWwodGhpcy5jdXJ2ZS5kZCkucmVkTXVsKHAudCk7CiAgLy8gRCA9IFoxICogMiAqIFoyCiAgdmFyIGQgPSB0aGlzLnoucmVkTXVsKHAuei5yZWRBZGQocC56KSk7CiAgLy8gRSA9IEIgLSBBCiAgdmFyIGUgPSBiLnJlZFN1YihhKTsKICAvLyBGID0gRCAtIEMKICB2YXIgZiA9IGQucmVkU3ViKGMpOwogIC8vIEcgPSBEICsgQwogIHZhciBnID0gZC5yZWRBZGQoYyk7CiAgLy8gSCA9IEIgKyBBCiAgdmFyIGggPSBiLnJlZEFkZChhKTsKICAvLyBYMyA9IEUgKiBGCiAgdmFyIG54ID0gZS5yZWRNdWwoZik7CiAgLy8gWTMgPSBHICogSAogIHZhciBueSA9IGcucmVkTXVsKGgpOwogIC8vIFQzID0gRSAqIEgKICB2YXIgbnQgPSBlLnJlZE11bChoKTsKICAvLyBaMyA9IEYgKiBHCiAgdmFyIG56ID0gZi5yZWRNdWwoZyk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG55LCBueiwgbnQpOwp9OwoKUG9pbnQucHJvdG90eXBlLl9wcm9qQWRkID0gZnVuY3Rpb24gX3Byb2pBZGQocCkgewogIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by10d2lzdGVkLXByb2plY3RpdmUuaHRtbAogIC8vICAgICAjYWRkaXRpb24tYWRkLTIwMDgtYmJqbHAKICAvLyAgICAgI2FkZGl0aW9uLWFkZC0yMDA3LWJsCiAgLy8gMTBNICsgMVMKCiAgLy8gQSA9IFoxICogWjIKICB2YXIgYSA9IHRoaXMuei5yZWRNdWwocC56KTsKICAvLyBCID0gQV4yCiAgdmFyIGIgPSBhLnJlZFNxcigpOwogIC8vIEMgPSBYMSAqIFgyCiAgdmFyIGMgPSB0aGlzLngucmVkTXVsKHAueCk7CiAgLy8gRCA9IFkxICogWTIKICB2YXIgZCA9IHRoaXMueS5yZWRNdWwocC55KTsKICAvLyBFID0gZCAqIEMgKiBECiAgdmFyIGUgPSB0aGlzLmN1cnZlLmQucmVkTXVsKGMpLnJlZE11bChkKTsKICAvLyBGID0gQiAtIEUKICB2YXIgZiA9IGIucmVkU3ViKGUpOwogIC8vIEcgPSBCICsgRQogIHZhciBnID0gYi5yZWRBZGQoZSk7CiAgLy8gWDMgPSBBICogRiAqICgoWDEgKyBZMSkgKiAoWDIgKyBZMikgLSBDIC0gRCkKICB2YXIgdG1wID0gdGhpcy54LnJlZEFkZCh0aGlzLnkpLnJlZE11bChwLngucmVkQWRkKHAueSkpLnJlZElTdWIoYykucmVkSVN1YihkKTsKICB2YXIgbnggPSBhLnJlZE11bChmKS5yZWRNdWwodG1wKTsKICB2YXIgbnk7CiAgdmFyIG56OwogIGlmICh0aGlzLmN1cnZlLnR3aXN0ZWQpIHsKICAgIC8vIFkzID0gQSAqIEcgKiAoRCAtIGEgKiBDKQogICAgbnkgPSBhLnJlZE11bChnKS5yZWRNdWwoZC5yZWRTdWIodGhpcy5jdXJ2ZS5fbXVsQShjKSkpOwogICAgLy8gWjMgPSBGICogRwogICAgbnogPSBmLnJlZE11bChnKTsKICB9IGVsc2UgewogICAgLy8gWTMgPSBBICogRyAqIChEIC0gQykKICAgIG55ID0gYS5yZWRNdWwoZykucmVkTXVsKGQucmVkU3ViKGMpKTsKICAgIC8vIFozID0gYyAqIEYgKiBHCiAgICBueiA9IHRoaXMuY3VydmUuX211bEMoZikucmVkTXVsKGcpOwogIH0KICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnksIG56KTsKfTsKClBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQocCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiBwOwogIGlmIChwLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB0aGlzOwoKICBpZiAodGhpcy5jdXJ2ZS5leHRlbmRlZCkKICAgIHJldHVybiB0aGlzLl9leHRBZGQocCk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuX3Byb2pBZGQocCk7Cn07CgpQb2ludC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsKGspIHsKICBpZiAodGhpcy5faGFzRG91YmxlcyhrKSkKICAgIHJldHVybiB0aGlzLmN1cnZlLl9maXhlZE5hZk11bCh0aGlzLCBrKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bCh0aGlzLCBrKTsKfTsKClBvaW50LnByb3RvdHlwZS5tdWxBZGQgPSBmdW5jdGlvbiBtdWxBZGQoazEsIHAsIGsyKSB7CiAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWxBZGQoMSwgWyB0aGlzLCBwIF0sIFsgazEsIGsyIF0sIDIpOwp9OwoKUG9pbnQucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZSgpIHsKICBpZiAodGhpcy56T25lKQogICAgcmV0dXJuIHRoaXM7CgogIC8vIE5vcm1hbGl6ZSBjb29yZGluYXRlcwogIHZhciB6aSA9IHRoaXMuei5yZWRJbnZtKCk7CiAgdGhpcy54ID0gdGhpcy54LnJlZE11bCh6aSk7CiAgdGhpcy55ID0gdGhpcy55LnJlZE11bCh6aSk7CiAgaWYgKHRoaXMudCkKICAgIHRoaXMudCA9IHRoaXMudC5yZWRNdWwoemkpOwogIHRoaXMueiA9IHRoaXMuY3VydmUub25lOwogIHRoaXMuek9uZSA9IHRydWU7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludC5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24gbmVnKCkgewogIHJldHVybiB0aGlzLmN1cnZlLnBvaW50KHRoaXMueC5yZWROZWcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56LAogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudCAmJiB0aGlzLnQucmVkTmVnKCkpOwp9OwoKUG9pbnQucHJvdG90eXBlLmdldFggPSBmdW5jdGlvbiBnZXRYKCkgewogIHRoaXMubm9ybWFsaXplKCk7CiAgcmV0dXJuIHRoaXMueC5mcm9tUmVkKCk7Cn07CgpQb2ludC5wcm90b3R5cGUuZ2V0WSA9IGZ1bmN0aW9uIGdldFkoKSB7CiAgdGhpcy5ub3JtYWxpemUoKTsKICByZXR1cm4gdGhpcy55LmZyb21SZWQoKTsKfTsKClBvaW50LnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKG90aGVyKSB7CiAgcmV0dXJuIHRoaXMgPT09IG90aGVyIHx8CiAgICAgICAgIHRoaXMuZ2V0WCgpLmNtcChvdGhlci5nZXRYKCkpID09PSAwICYmCiAgICAgICAgIHRoaXMuZ2V0WSgpLmNtcChvdGhlci5nZXRZKCkpID09PSAwOwp9OwoKLy8gQ29tcGF0aWJpbGl0eSB3aXRoIEJhc2VDdXJ2ZQpQb2ludC5wcm90b3R5cGUudG9QID0gUG9pbnQucHJvdG90eXBlLm5vcm1hbGl6ZTsKUG9pbnQucHJvdG90eXBlLm1peGVkQWRkID0gUG9pbnQucHJvdG90eXBlLmFkZDsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAyLCIuLi9jdXJ2ZSI6MTA1LCJibi5qcyI6NDEsImluaGVyaXRzIjoxMjl9XSwxMDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgY3VydmUgPSBleHBvcnRzOwoKY3VydmUuYmFzZSA9IHJlcXVpcmUoJy4vYmFzZScpOwpjdXJ2ZS5zaG9ydCA9IHJlcXVpcmUoJy4vc2hvcnQnKTsKY3VydmUubW9udCA9IHJlcXVpcmUoJy4vbW9udCcpOwpjdXJ2ZS5lZHdhcmRzID0gcmVxdWlyZSgnLi9lZHdhcmRzJyk7Cgp9LHsiLi9iYXNlIjoxMDMsIi4vZWR3YXJkcyI6MTA0LCIuL21vbnQiOjEwNiwiLi9zaG9ydCI6MTA3fV0sMTA2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGN1cnZlID0gcmVxdWlyZSgnLi4vY3VydmUnKTsKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKdmFyIEJhc2UgPSBjdXJ2ZS5iYXNlOwoKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CgpmdW5jdGlvbiBNb250Q3VydmUoY29uZikgewogIEJhc2UuY2FsbCh0aGlzLCAnbW9udCcsIGNvbmYpOwoKICB0aGlzLmEgPSBuZXcgQk4oY29uZi5hLCAxNikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMuYiA9IG5ldyBCTihjb25mLmIsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgdGhpcy5pNCA9IG5ldyBCTig0KS50b1JlZCh0aGlzLnJlZCkucmVkSW52bSgpOwogIHRoaXMudHdvID0gbmV3IEJOKDIpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmEyNCA9IHRoaXMuaTQucmVkTXVsKHRoaXMuYS5yZWRBZGQodGhpcy50d28pKTsKfQppbmhlcml0cyhNb250Q3VydmUsIEJhc2UpOwptb2R1bGUuZXhwb3J0cyA9IE1vbnRDdXJ2ZTsKCk1vbnRDdXJ2ZS5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiB2YWxpZGF0ZShwb2ludCkgewogIHZhciB4ID0gcG9pbnQubm9ybWFsaXplKCkueDsKICB2YXIgeDIgPSB4LnJlZFNxcigpOwogIHZhciByaHMgPSB4Mi5yZWRNdWwoeCkucmVkQWRkKHgyLnJlZE11bCh0aGlzLmEpKS5yZWRBZGQoeCk7CiAgdmFyIHkgPSByaHMucmVkU3FydCgpOwoKICByZXR1cm4geS5yZWRTcXIoKS5jbXAocmhzKSA9PT0gMDsKfTsKCmZ1bmN0aW9uIFBvaW50KGN1cnZlLCB4LCB6KSB7CiAgQmFzZS5CYXNlUG9pbnQuY2FsbCh0aGlzLCBjdXJ2ZSwgJ3Byb2plY3RpdmUnKTsKICBpZiAoeCA9PT0gbnVsbCAmJiB6ID09PSBudWxsKSB7CiAgICB0aGlzLnggPSB0aGlzLmN1cnZlLm9uZTsKICAgIHRoaXMueiA9IHRoaXMuY3VydmUuemVybzsKICB9IGVsc2UgewogICAgdGhpcy54ID0gbmV3IEJOKHgsIDE2KTsKICAgIHRoaXMueiA9IG5ldyBCTih6LCAxNik7CiAgICBpZiAoIXRoaXMueC5yZWQpCiAgICAgIHRoaXMueCA9IHRoaXMueC50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgICBpZiAoIXRoaXMuei5yZWQpCiAgICAgIHRoaXMueiA9IHRoaXMuei50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CiAgfQp9CmluaGVyaXRzKFBvaW50LCBCYXNlLkJhc2VQb2ludCk7CgpNb250Q3VydmUucHJvdG90eXBlLmRlY29kZVBvaW50ID0gZnVuY3Rpb24gZGVjb2RlUG9pbnQoYnl0ZXMsIGVuYykgewogIHJldHVybiB0aGlzLnBvaW50KHV0aWxzLnRvQXJyYXkoYnl0ZXMsIGVuYyksIDEpOwp9OwoKTW9udEN1cnZlLnByb3RvdHlwZS5wb2ludCA9IGZ1bmN0aW9uIHBvaW50KHgsIHopIHsKICByZXR1cm4gbmV3IFBvaW50KHRoaXMsIHgsIHopOwp9OwoKTW9udEN1cnZlLnByb3RvdHlwZS5wb2ludEZyb21KU09OID0gZnVuY3Rpb24gcG9pbnRGcm9tSlNPTihvYmopIHsKICByZXR1cm4gUG9pbnQuZnJvbUpTT04odGhpcywgb2JqKTsKfTsKClBvaW50LnByb3RvdHlwZS5wcmVjb21wdXRlID0gZnVuY3Rpb24gcHJlY29tcHV0ZSgpIHsKICAvLyBOby1vcAp9OwoKUG9pbnQucHJvdG90eXBlLl9lbmNvZGUgPSBmdW5jdGlvbiBfZW5jb2RlKCkgewogIHJldHVybiB0aGlzLmdldFgoKS50b0FycmF5KCdiZScsIHRoaXMuY3VydmUucC5ieXRlTGVuZ3RoKCkpOwp9OwoKUG9pbnQuZnJvbUpTT04gPSBmdW5jdGlvbiBmcm9tSlNPTihjdXJ2ZSwgb2JqKSB7CiAgcmV0dXJuIG5ldyBQb2ludChjdXJ2ZSwgb2JqWzBdLCBvYmpbMV0gfHwgY3VydmUub25lKTsKfTsKClBvaW50LnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gJzxFQyBQb2ludCBJbmZpbml0eT4nOwogIHJldHVybiAnPEVDIFBvaW50IHg6ICcgKyB0aGlzLnguZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICcgejogJyArIHRoaXMuei5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsgJz4nOwp9OwoKUG9pbnQucHJvdG90eXBlLmlzSW5maW5pdHkgPSBmdW5jdGlvbiBpc0luZmluaXR5KCkgewogIC8vIFhYWCBUaGlzIGNvZGUgYXNzdW1lcyB0aGF0IHplcm8gaXMgYWx3YXlzIHplcm8gaW4gcmVkCiAgcmV0dXJuIHRoaXMuei5jbXBuKDApID09PSAwOwp9OwoKUG9pbnQucHJvdG90eXBlLmRibCA9IGZ1bmN0aW9uIGRibCgpIHsKICAvLyBodHRwOi8vaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLW1vbnRnb20teHouaHRtbCNkb3VibGluZy1kYmwtMTk4Ny1tLTMKICAvLyAyTSArIDJTICsgNEEKCiAgLy8gQSA9IFgxICsgWjEKICB2YXIgYSA9IHRoaXMueC5yZWRBZGQodGhpcy56KTsKICAvLyBBQSA9IEFeMgogIHZhciBhYSA9IGEucmVkU3FyKCk7CiAgLy8gQiA9IFgxIC0gWjEKICB2YXIgYiA9IHRoaXMueC5yZWRTdWIodGhpcy56KTsKICAvLyBCQiA9IEJeMgogIHZhciBiYiA9IGIucmVkU3FyKCk7CiAgLy8gQyA9IEFBIC0gQkIKICB2YXIgYyA9IGFhLnJlZFN1YihiYik7CiAgLy8gWDMgPSBBQSAqIEJCCiAgdmFyIG54ID0gYWEucmVkTXVsKGJiKTsKICAvLyBaMyA9IEMgKiAoQkIgKyBBMjQgKiBDKQogIHZhciBueiA9IGMucmVkTXVsKGJiLnJlZEFkZCh0aGlzLmN1cnZlLmEyNC5yZWRNdWwoYykpKTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnopOwp9OwoKUG9pbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZCgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBzdXBwb3J0ZWQgb24gTW9udGdvbWVyeSBjdXJ2ZScpOwp9OwoKUG9pbnQucHJvdG90eXBlLmRpZmZBZGQgPSBmdW5jdGlvbiBkaWZmQWRkKHAsIGRpZmYpIHsKICAvLyBodHRwOi8vaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLW1vbnRnb20teHouaHRtbCNkaWZmYWRkLWRhZGQtMTk4Ny1tLTMKICAvLyA0TSArIDJTICsgNkEKCiAgLy8gQSA9IFgyICsgWjIKICB2YXIgYSA9IHRoaXMueC5yZWRBZGQodGhpcy56KTsKICAvLyBCID0gWDIgLSBaMgogIHZhciBiID0gdGhpcy54LnJlZFN1Yih0aGlzLnopOwogIC8vIEMgPSBYMyArIFozCiAgdmFyIGMgPSBwLngucmVkQWRkKHAueik7CiAgLy8gRCA9IFgzIC0gWjMKICB2YXIgZCA9IHAueC5yZWRTdWIocC56KTsKICAvLyBEQSA9IEQgKiBBCiAgdmFyIGRhID0gZC5yZWRNdWwoYSk7CiAgLy8gQ0IgPSBDICogQgogIHZhciBjYiA9IGMucmVkTXVsKGIpOwogIC8vIFg1ID0gWjEgKiAoREEgKyBDQileMgogIHZhciBueCA9IGRpZmYuei5yZWRNdWwoZGEucmVkQWRkKGNiKS5yZWRTcXIoKSk7CiAgLy8gWjUgPSBYMSAqIChEQSAtIENCKV4yCiAgdmFyIG56ID0gZGlmZi54LnJlZE11bChkYS5yZWRJU3ViKGNiKS5yZWRTcXIoKSk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG56KTsKfTsKClBvaW50LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwoaykgewogIHZhciB0ID0gay5jbG9uZSgpOwogIHZhciBhID0gdGhpczsgLy8gKE4gLyAyKSAqIFEgKyBRCiAgdmFyIGIgPSB0aGlzLmN1cnZlLnBvaW50KG51bGwsIG51bGwpOyAvLyAoTiAvIDIpICogUQogIHZhciBjID0gdGhpczsgLy8gUQoKICBmb3IgKHZhciBiaXRzID0gW107IHQuY21wbigwKSAhPT0gMDsgdC5pdXNocm4oMSkpCiAgICBiaXRzLnB1c2godC5hbmRsbigxKSk7CgogIGZvciAodmFyIGkgPSBiaXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICBpZiAoYml0c1tpXSA9PT0gMCkgewogICAgICAvLyBOICogUSArIFEgPSAoKE4gLyAyKSAqIFEgKyBRKSkgKyAoTiAvIDIpICogUQogICAgICBhID0gYS5kaWZmQWRkKGIsIGMpOwogICAgICAvLyBOICogUSA9IDIgKiAoKE4gLyAyKSAqIFEgKyBRKSkKICAgICAgYiA9IGIuZGJsKCk7CiAgICB9IGVsc2UgewogICAgICAvLyBOICogUSA9ICgoTiAvIDIpICogUSArIFEpICsgKChOIC8gMikgKiBRKQogICAgICBiID0gYS5kaWZmQWRkKGIsIGMpOwogICAgICAvLyBOICogUSArIFEgPSAyICogKChOIC8gMikgKiBRICsgUSkKICAgICAgYSA9IGEuZGJsKCk7CiAgICB9CiAgfQogIHJldHVybiBiOwp9OwoKUG9pbnQucHJvdG90eXBlLm11bEFkZCA9IGZ1bmN0aW9uIG11bEFkZCgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBzdXBwb3J0ZWQgb24gTW9udGdvbWVyeSBjdXJ2ZScpOwp9OwoKUG9pbnQucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEob3RoZXIpIHsKICByZXR1cm4gdGhpcy5nZXRYKCkuY21wKG90aGVyLmdldFgoKSkgPT09IDA7Cn07CgpQb2ludC5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24gbm9ybWFsaXplKCkgewogIHRoaXMueCA9IHRoaXMueC5yZWRNdWwodGhpcy56LnJlZEludm0oKSk7CiAgdGhpcy56ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgcmV0dXJuIHRoaXM7Cn07CgpQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uIGdldFgoKSB7CiAgLy8gTm9ybWFsaXplIGNvb3JkaW5hdGVzCiAgdGhpcy5ub3JtYWxpemUoKTsKCiAgcmV0dXJuIHRoaXMueC5mcm9tUmVkKCk7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMiwiLi4vY3VydmUiOjEwNSwiYm4uanMiOjQxLCJpbmhlcml0cyI6MTI5fV0sMTA3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGN1cnZlID0gcmVxdWlyZSgnLi4vY3VydmUnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKdmFyIEJhc2UgPSBjdXJ2ZS5iYXNlOwoKdmFyIGFzc2VydCA9IGVsbGlwdGljLnV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIFNob3J0Q3VydmUoY29uZikgewogIEJhc2UuY2FsbCh0aGlzLCAnc2hvcnQnLCBjb25mKTsKCiAgdGhpcy5hID0gbmV3IEJOKGNvbmYuYSwgMTYpLnRvUmVkKHRoaXMucmVkKTsKICB0aGlzLmIgPSBuZXcgQk4oY29uZi5iLCAxNikudG9SZWQodGhpcy5yZWQpOwogIHRoaXMudGludiA9IHRoaXMudHdvLnJlZEludm0oKTsKCiAgdGhpcy56ZXJvQSA9IHRoaXMuYS5mcm9tUmVkKCkuY21wbigwKSA9PT0gMDsKICB0aGlzLnRocmVlQSA9IHRoaXMuYS5mcm9tUmVkKCkuc3ViKHRoaXMucCkuY21wbigtMykgPT09IDA7CgogIC8vIElmIHRoZSBjdXJ2ZSBpcyBlbmRvbW9ycGhpYywgcHJlY2FsY3VsYXRlIGJldGEgYW5kIGxhbWJkYQogIHRoaXMuZW5kbyA9IHRoaXMuX2dldEVuZG9tb3JwaGlzbShjb25mKTsKICB0aGlzLl9lbmRvV25hZlQxID0gbmV3IEFycmF5KDQpOwogIHRoaXMuX2VuZG9XbmFmVDIgPSBuZXcgQXJyYXkoNCk7Cn0KaW5oZXJpdHMoU2hvcnRDdXJ2ZSwgQmFzZSk7Cm1vZHVsZS5leHBvcnRzID0gU2hvcnRDdXJ2ZTsKClNob3J0Q3VydmUucHJvdG90eXBlLl9nZXRFbmRvbW9ycGhpc20gPSBmdW5jdGlvbiBfZ2V0RW5kb21vcnBoaXNtKGNvbmYpIHsKICAvLyBObyBlZmZpY2llbnQgZW5kb21vcnBoaXNtCiAgaWYgKCF0aGlzLnplcm9BIHx8ICF0aGlzLmcgfHwgIXRoaXMubiB8fCB0aGlzLnAubW9kbigzKSAhPT0gMSkKICAgIHJldHVybjsKCiAgLy8gQ29tcHV0ZSBiZXRhIGFuZCBsYW1iZGEsIHRoYXQgbGFtYmRhICogUCA9IChiZXRhICogUHg7IFB5KQogIHZhciBiZXRhOwogIHZhciBsYW1iZGE7CiAgaWYgKGNvbmYuYmV0YSkgewogICAgYmV0YSA9IG5ldyBCTihjb25mLmJldGEsIDE2KS50b1JlZCh0aGlzLnJlZCk7CiAgfSBlbHNlIHsKICAgIHZhciBiZXRhcyA9IHRoaXMuX2dldEVuZG9Sb290cyh0aGlzLnApOwogICAgLy8gQ2hvb3NlIHRoZSBzbWFsbGVzdCBiZXRhCiAgICBiZXRhID0gYmV0YXNbMF0uY21wKGJldGFzWzFdKSA8IDAgPyBiZXRhc1swXSA6IGJldGFzWzFdOwogICAgYmV0YSA9IGJldGEudG9SZWQodGhpcy5yZWQpOwogIH0KICBpZiAoY29uZi5sYW1iZGEpIHsKICAgIGxhbWJkYSA9IG5ldyBCTihjb25mLmxhbWJkYSwgMTYpOwogIH0gZWxzZSB7CiAgICAvLyBDaG9vc2UgdGhlIGxhbWJkYSB0aGF0IGlzIG1hdGNoaW5nIHNlbGVjdGVkIGJldGEKICAgIHZhciBsYW1iZGFzID0gdGhpcy5fZ2V0RW5kb1Jvb3RzKHRoaXMubik7CiAgICBpZiAodGhpcy5nLm11bChsYW1iZGFzWzBdKS54LmNtcCh0aGlzLmcueC5yZWRNdWwoYmV0YSkpID09PSAwKSB7CiAgICAgIGxhbWJkYSA9IGxhbWJkYXNbMF07CiAgICB9IGVsc2UgewogICAgICBsYW1iZGEgPSBsYW1iZGFzWzFdOwogICAgICBhc3NlcnQodGhpcy5nLm11bChsYW1iZGEpLnguY21wKHRoaXMuZy54LnJlZE11bChiZXRhKSkgPT09IDApOwogICAgfQogIH0KCiAgLy8gR2V0IGJhc2lzIHZlY3RvcnMsIHVzZWQgZm9yIGJhbGFuY2VkIGxlbmd0aC10d28gcmVwcmVzZW50YXRpb24KICB2YXIgYmFzaXM7CiAgaWYgKGNvbmYuYmFzaXMpIHsKICAgIGJhc2lzID0gY29uZi5iYXNpcy5tYXAoZnVuY3Rpb24odmVjKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYTogbmV3IEJOKHZlYy5hLCAxNiksCiAgICAgICAgYjogbmV3IEJOKHZlYy5iLCAxNikKICAgICAgfTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBiYXNpcyA9IHRoaXMuX2dldEVuZG9CYXNpcyhsYW1iZGEpOwogIH0KCiAgcmV0dXJuIHsKICAgIGJldGE6IGJldGEsCiAgICBsYW1iZGE6IGxhbWJkYSwKICAgIGJhc2lzOiBiYXNpcwogIH07Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5fZ2V0RW5kb1Jvb3RzID0gZnVuY3Rpb24gX2dldEVuZG9Sb290cyhudW0pIHsKICAvLyBGaW5kIHJvb3RzIG9mIGZvciB4XjIgKyB4ICsgMSBpbiBGCiAgLy8gUm9vdCA9ICgtMSArLSBTcXJ0KC0zKSkgLyAyCiAgLy8KICB2YXIgcmVkID0gbnVtID09PSB0aGlzLnAgPyB0aGlzLnJlZCA6IEJOLm1vbnQobnVtKTsKICB2YXIgdGludiA9IG5ldyBCTigyKS50b1JlZChyZWQpLnJlZEludm0oKTsKICB2YXIgbnRpbnYgPSB0aW52LnJlZE5lZygpOwoKICB2YXIgcyA9IG5ldyBCTigzKS50b1JlZChyZWQpLnJlZE5lZygpLnJlZFNxcnQoKS5yZWRNdWwodGludik7CgogIHZhciBsMSA9IG50aW52LnJlZEFkZChzKS5mcm9tUmVkKCk7CiAgdmFyIGwyID0gbnRpbnYucmVkU3ViKHMpLmZyb21SZWQoKTsKICByZXR1cm4gWyBsMSwgbDIgXTsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLl9nZXRFbmRvQmFzaXMgPSBmdW5jdGlvbiBfZ2V0RW5kb0Jhc2lzKGxhbWJkYSkgewogIC8vIGFwcnhTcXJ0ID49IHNxcnQodGhpcy5uKQogIHZhciBhcHJ4U3FydCA9IHRoaXMubi51c2hybihNYXRoLmZsb29yKHRoaXMubi5iaXRMZW5ndGgoKSAvIDIpKTsKCiAgLy8gMy43NAogIC8vIFJ1biBFR0NELCB1bnRpbCByKEwgKyAxKSA8IGFwcnhTcXJ0CiAgdmFyIHUgPSBsYW1iZGE7CiAgdmFyIHYgPSB0aGlzLm4uY2xvbmUoKTsKICB2YXIgeDEgPSBuZXcgQk4oMSk7CiAgdmFyIHkxID0gbmV3IEJOKDApOwogIHZhciB4MiA9IG5ldyBCTigwKTsKICB2YXIgeTIgPSBuZXcgQk4oMSk7CgogIC8vIE5PVEU6IGFsbCB2ZWN0b3JzIGFyZSByb290cyBvZjogYSArIGIgKiBsYW1iZGEgPSAwIChtb2QgbikKICB2YXIgYTA7CiAgdmFyIGIwOwogIC8vIEZpcnN0IHZlY3RvcgogIHZhciBhMTsKICB2YXIgYjE7CiAgLy8gU2Vjb25kIHZlY3RvcgogIHZhciBhMjsKICB2YXIgYjI7CgogIHZhciBwcmV2UjsKICB2YXIgaSA9IDA7CiAgdmFyIHI7CiAgdmFyIHg7CiAgd2hpbGUgKHUuY21wbigwKSAhPT0gMCkgewogICAgdmFyIHEgPSB2LmRpdih1KTsKICAgIHIgPSB2LnN1YihxLm11bCh1KSk7CiAgICB4ID0geDIuc3ViKHEubXVsKHgxKSk7CiAgICB2YXIgeSA9IHkyLnN1YihxLm11bCh5MSkpOwoKICAgIGlmICghYTEgJiYgci5jbXAoYXByeFNxcnQpIDwgMCkgewogICAgICBhMCA9IHByZXZSLm5lZygpOwogICAgICBiMCA9IHgxOwogICAgICBhMSA9IHIubmVnKCk7CiAgICAgIGIxID0geDsKICAgIH0gZWxzZSBpZiAoYTEgJiYgKytpID09PSAyKSB7CiAgICAgIGJyZWFrOwogICAgfQogICAgcHJldlIgPSByOwoKICAgIHYgPSB1OwogICAgdSA9IHI7CiAgICB4MiA9IHgxOwogICAgeDEgPSB4OwogICAgeTIgPSB5MTsKICAgIHkxID0geTsKICB9CiAgYTIgPSByLm5lZygpOwogIGIyID0geDsKCiAgdmFyIGxlbjEgPSBhMS5zcXIoKS5hZGQoYjEuc3FyKCkpOwogIHZhciBsZW4yID0gYTIuc3FyKCkuYWRkKGIyLnNxcigpKTsKICBpZiAobGVuMi5jbXAobGVuMSkgPj0gMCkgewogICAgYTIgPSBhMDsKICAgIGIyID0gYjA7CiAgfQoKICAvLyBOb3JtYWxpemUgc2lnbnMKICBpZiAoYTEubmVnYXRpdmUpIHsKICAgIGExID0gYTEubmVnKCk7CiAgICBiMSA9IGIxLm5lZygpOwogIH0KICBpZiAoYTIubmVnYXRpdmUpIHsKICAgIGEyID0gYTIubmVnKCk7CiAgICBiMiA9IGIyLm5lZygpOwogIH0KCiAgcmV0dXJuIFsKICAgIHsgYTogYTEsIGI6IGIxIH0sCiAgICB7IGE6IGEyLCBiOiBiMiB9CiAgXTsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLl9lbmRvU3BsaXQgPSBmdW5jdGlvbiBfZW5kb1NwbGl0KGspIHsKICB2YXIgYmFzaXMgPSB0aGlzLmVuZG8uYmFzaXM7CiAgdmFyIHYxID0gYmFzaXNbMF07CiAgdmFyIHYyID0gYmFzaXNbMV07CgogIHZhciBjMSA9IHYyLmIubXVsKGspLmRpdlJvdW5kKHRoaXMubik7CiAgdmFyIGMyID0gdjEuYi5uZWcoKS5tdWwoaykuZGl2Um91bmQodGhpcy5uKTsKCiAgdmFyIHAxID0gYzEubXVsKHYxLmEpOwogIHZhciBwMiA9IGMyLm11bCh2Mi5hKTsKICB2YXIgcTEgPSBjMS5tdWwodjEuYik7CiAgdmFyIHEyID0gYzIubXVsKHYyLmIpOwoKICAvLyBDYWxjdWxhdGUgYW5zd2VyCiAgdmFyIGsxID0gay5zdWIocDEpLnN1YihwMik7CiAgdmFyIGsyID0gcTEuYWRkKHEyKS5uZWcoKTsKICByZXR1cm4geyBrMTogazEsIGsyOiBrMiB9Owp9OwoKU2hvcnRDdXJ2ZS5wcm90b3R5cGUucG9pbnRGcm9tWCA9IGZ1bmN0aW9uIHBvaW50RnJvbVgoeCwgb2RkKSB7CiAgeCA9IG5ldyBCTih4LCAxNik7CiAgaWYgKCF4LnJlZCkKICAgIHggPSB4LnRvUmVkKHRoaXMucmVkKTsKCiAgdmFyIHkyID0geC5yZWRTcXIoKS5yZWRNdWwoeCkucmVkSUFkZCh4LnJlZE11bCh0aGlzLmEpKS5yZWRJQWRkKHRoaXMuYik7CiAgdmFyIHkgPSB5Mi5yZWRTcXJ0KCk7CiAgaWYgKHkucmVkU3FyKCkucmVkU3ViKHkyKS5jbXAodGhpcy56ZXJvKSAhPT0gMCkKICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBwb2ludCcpOwoKICAvLyBYWFggSXMgdGhlcmUgYW55IHdheSB0byB0ZWxsIGlmIHRoZSBudW1iZXIgaXMgb2RkIHdpdGhvdXQgY29udmVydGluZyBpdAogIC8vIHRvIG5vbi1yZWQgZm9ybT8KICB2YXIgaXNPZGQgPSB5LmZyb21SZWQoKS5pc09kZCgpOwogIGlmIChvZGQgJiYgIWlzT2RkIHx8ICFvZGQgJiYgaXNPZGQpCiAgICB5ID0geS5yZWROZWcoKTsKCiAgcmV0dXJuIHRoaXMucG9pbnQoeCwgeSk7Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKHBvaW50KSB7CiAgaWYgKHBvaW50LmluZikKICAgIHJldHVybiB0cnVlOwoKICB2YXIgeCA9IHBvaW50Lng7CiAgdmFyIHkgPSBwb2ludC55OwoKICB2YXIgYXggPSB0aGlzLmEucmVkTXVsKHgpOwogIHZhciByaHMgPSB4LnJlZFNxcigpLnJlZE11bCh4KS5yZWRJQWRkKGF4KS5yZWRJQWRkKHRoaXMuYik7CiAgcmV0dXJuIHkucmVkU3FyKCkucmVkSVN1YihyaHMpLmNtcG4oMCkgPT09IDA7Cn07CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5fZW5kb1duYWZNdWxBZGQgPQogICAgZnVuY3Rpb24gX2VuZG9XbmFmTXVsQWRkKHBvaW50cywgY29lZmZzKSB7CiAgdmFyIG5wb2ludHMgPSB0aGlzLl9lbmRvV25hZlQxOwogIHZhciBuY29lZmZzID0gdGhpcy5fZW5kb1duYWZUMjsKICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNwbGl0ID0gdGhpcy5fZW5kb1NwbGl0KGNvZWZmc1tpXSk7CiAgICB2YXIgcCA9IHBvaW50c1tpXTsKICAgIHZhciBiZXRhID0gcC5fZ2V0QmV0YSgpOwoKICAgIGlmIChzcGxpdC5rMS5uZWdhdGl2ZSkgewogICAgICBzcGxpdC5rMS5pbmVnKCk7CiAgICAgIHAgPSBwLm5lZyh0cnVlKTsKICAgIH0KICAgIGlmIChzcGxpdC5rMi5uZWdhdGl2ZSkgewogICAgICBzcGxpdC5rMi5pbmVnKCk7CiAgICAgIGJldGEgPSBiZXRhLm5lZyh0cnVlKTsKICAgIH0KCiAgICBucG9pbnRzW2kgKiAyXSA9IHA7CiAgICBucG9pbnRzW2kgKiAyICsgMV0gPSBiZXRhOwogICAgbmNvZWZmc1tpICogMl0gPSBzcGxpdC5rMTsKICAgIG5jb2VmZnNbaSAqIDIgKyAxXSA9IHNwbGl0LmsyOwogIH0KICB2YXIgcmVzID0gdGhpcy5fd25hZk11bEFkZCgxLCBucG9pbnRzLCBuY29lZmZzLCBpICogMik7CgogIC8vIENsZWFuLXVwIHJlZmVyZW5jZXMgdG8gcG9pbnRzIGFuZCBjb2VmZmljaWVudHMKICBmb3IgKHZhciBqID0gMDsgaiA8IGkgKiAyOyBqKyspIHsKICAgIG5wb2ludHNbal0gPSBudWxsOwogICAgbmNvZWZmc1tqXSA9IG51bGw7CiAgfQogIHJldHVybiByZXM7Cn07CgpmdW5jdGlvbiBQb2ludChjdXJ2ZSwgeCwgeSwgaXNSZWQpIHsKICBCYXNlLkJhc2VQb2ludC5jYWxsKHRoaXMsIGN1cnZlLCAnYWZmaW5lJyk7CiAgaWYgKHggPT09IG51bGwgJiYgeSA9PT0gbnVsbCkgewogICAgdGhpcy54ID0gbnVsbDsKICAgIHRoaXMueSA9IG51bGw7CiAgICB0aGlzLmluZiA9IHRydWU7CiAgfSBlbHNlIHsKICAgIHRoaXMueCA9IG5ldyBCTih4LCAxNik7CiAgICB0aGlzLnkgPSBuZXcgQk4oeSwgMTYpOwogICAgLy8gRm9yY2UgcmVkZ29tZXJ5IHJlcHJlc2VudGF0aW9uIHdoZW4gbG9hZGluZyBmcm9tIEpTT04KICAgIGlmIChpc1JlZCkgewogICAgICB0aGlzLnguZm9yY2VSZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgICB0aGlzLnkuZm9yY2VSZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgfQogICAgaWYgKCF0aGlzLngucmVkKQogICAgICB0aGlzLnggPSB0aGlzLngudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgaWYgKCF0aGlzLnkucmVkKQogICAgICB0aGlzLnkgPSB0aGlzLnkudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogICAgdGhpcy5pbmYgPSBmYWxzZTsKICB9Cn0KaW5oZXJpdHMoUG9pbnQsIEJhc2UuQmFzZVBvaW50KTsKClNob3J0Q3VydmUucHJvdG90eXBlLnBvaW50ID0gZnVuY3Rpb24gcG9pbnQoeCwgeSwgaXNSZWQpIHsKICByZXR1cm4gbmV3IFBvaW50KHRoaXMsIHgsIHksIGlzUmVkKTsKfTsKClNob3J0Q3VydmUucHJvdG90eXBlLnBvaW50RnJvbUpTT04gPSBmdW5jdGlvbiBwb2ludEZyb21KU09OKG9iaiwgcmVkKSB7CiAgcmV0dXJuIFBvaW50LmZyb21KU09OKHRoaXMsIG9iaiwgcmVkKTsKfTsKClBvaW50LnByb3RvdHlwZS5fZ2V0QmV0YSA9IGZ1bmN0aW9uIF9nZXRCZXRhKCkgewogIGlmICghdGhpcy5jdXJ2ZS5lbmRvKQogICAgcmV0dXJuOwoKICB2YXIgcHJlID0gdGhpcy5wcmVjb21wdXRlZDsKICBpZiAocHJlICYmIHByZS5iZXRhKQogICAgcmV0dXJuIHByZS5iZXRhOwoKICB2YXIgYmV0YSA9IHRoaXMuY3VydmUucG9pbnQodGhpcy54LnJlZE11bCh0aGlzLmN1cnZlLmVuZG8uYmV0YSksIHRoaXMueSk7CiAgaWYgKHByZSkgewogICAgdmFyIGN1cnZlID0gdGhpcy5jdXJ2ZTsKICAgIHZhciBlbmRvTXVsID0gZnVuY3Rpb24ocCkgewogICAgICByZXR1cm4gY3VydmUucG9pbnQocC54LnJlZE11bChjdXJ2ZS5lbmRvLmJldGEpLCBwLnkpOwogICAgfTsKICAgIHByZS5iZXRhID0gYmV0YTsKICAgIGJldGEucHJlY29tcHV0ZWQgPSB7CiAgICAgIGJldGE6IG51bGwsCiAgICAgIG5hZjogcHJlLm5hZiAmJiB7CiAgICAgICAgd25kOiBwcmUubmFmLnduZCwKICAgICAgICBwb2ludHM6IHByZS5uYWYucG9pbnRzLm1hcChlbmRvTXVsKQogICAgICB9LAogICAgICBkb3VibGVzOiBwcmUuZG91YmxlcyAmJiB7CiAgICAgICAgc3RlcDogcHJlLmRvdWJsZXMuc3RlcCwKICAgICAgICBwb2ludHM6IHByZS5kb3VibGVzLnBvaW50cy5tYXAoZW5kb011bCkKICAgICAgfQogICAgfTsKICB9CiAgcmV0dXJuIGJldGE7Cn07CgpQb2ludC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkgewogIGlmICghdGhpcy5wcmVjb21wdXRlZCkKICAgIHJldHVybiBbIHRoaXMueCwgdGhpcy55IF07CgogIHJldHVybiBbIHRoaXMueCwgdGhpcy55LCB0aGlzLnByZWNvbXB1dGVkICYmIHsKICAgIGRvdWJsZXM6IHRoaXMucHJlY29tcHV0ZWQuZG91YmxlcyAmJiB7CiAgICAgIHN0ZXA6IHRoaXMucHJlY29tcHV0ZWQuZG91Ymxlcy5zdGVwLAogICAgICBwb2ludHM6IHRoaXMucHJlY29tcHV0ZWQuZG91Ymxlcy5wb2ludHMuc2xpY2UoMSkKICAgIH0sCiAgICBuYWY6IHRoaXMucHJlY29tcHV0ZWQubmFmICYmIHsKICAgICAgd25kOiB0aGlzLnByZWNvbXB1dGVkLm5hZi53bmQsCiAgICAgIHBvaW50czogdGhpcy5wcmVjb21wdXRlZC5uYWYucG9pbnRzLnNsaWNlKDEpCiAgICB9CiAgfSBdOwp9OwoKUG9pbnQuZnJvbUpTT04gPSBmdW5jdGlvbiBmcm9tSlNPTihjdXJ2ZSwgb2JqLCByZWQpIHsKICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpCiAgICBvYmogPSBKU09OLnBhcnNlKG9iaik7CiAgdmFyIHJlcyA9IGN1cnZlLnBvaW50KG9ialswXSwgb2JqWzFdLCByZWQpOwogIGlmICghb2JqWzJdKQogICAgcmV0dXJuIHJlczsKCiAgZnVuY3Rpb24gb2JqMnBvaW50KG9iaikgewogICAgcmV0dXJuIGN1cnZlLnBvaW50KG9ialswXSwgb2JqWzFdLCByZWQpOwogIH0KCiAgdmFyIHByZSA9IG9ialsyXTsKICByZXMucHJlY29tcHV0ZWQgPSB7CiAgICBiZXRhOiBudWxsLAogICAgZG91YmxlczogcHJlLmRvdWJsZXMgJiYgewogICAgICBzdGVwOiBwcmUuZG91Ymxlcy5zdGVwLAogICAgICBwb2ludHM6IFsgcmVzIF0uY29uY2F0KHByZS5kb3VibGVzLnBvaW50cy5tYXAob2JqMnBvaW50KSkKICAgIH0sCiAgICBuYWY6IHByZS5uYWYgJiYgewogICAgICB3bmQ6IHByZS5uYWYud25kLAogICAgICBwb2ludHM6IFsgcmVzIF0uY29uY2F0KHByZS5uYWYucG9pbnRzLm1hcChvYmoycG9pbnQpKQogICAgfQogIH07CiAgcmV0dXJuIHJlczsKfTsKClBvaW50LnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCgpIHsKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gJzxFQyBQb2ludCBJbmZpbml0eT4nOwogIHJldHVybiAnPEVDIFBvaW50IHg6ICcgKyB0aGlzLnguZnJvbVJlZCgpLnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICcgeTogJyArIHRoaXMueS5mcm9tUmVkKCkudG9TdHJpbmcoMTYsIDIpICsgJz4nOwp9OwoKUG9pbnQucHJvdG90eXBlLmlzSW5maW5pdHkgPSBmdW5jdGlvbiBpc0luZmluaXR5KCkgewogIHJldHVybiB0aGlzLmluZjsKfTsKClBvaW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiBhZGQocCkgewogIC8vIE8gKyBQID0gUAogIGlmICh0aGlzLmluZikKICAgIHJldHVybiBwOwoKICAvLyBQICsgTyA9IFAKICBpZiAocC5pbmYpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gUCArIFAgPSAyUAogIGlmICh0aGlzLmVxKHApKQogICAgcmV0dXJuIHRoaXMuZGJsKCk7CgogIC8vIFAgKyAoLVApID0gTwogIGlmICh0aGlzLm5lZygpLmVxKHApKQogICAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobnVsbCwgbnVsbCk7CgogIC8vIFAgKyBRID0gTwogIGlmICh0aGlzLnguY21wKHAueCkgPT09IDApCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsKCiAgdmFyIGMgPSB0aGlzLnkucmVkU3ViKHAueSk7CiAgaWYgKGMuY21wbigwKSAhPT0gMCkKICAgIGMgPSBjLnJlZE11bCh0aGlzLngucmVkU3ViKHAueCkucmVkSW52bSgpKTsKICB2YXIgbnggPSBjLnJlZFNxcigpLnJlZElTdWIodGhpcy54KS5yZWRJU3ViKHAueCk7CiAgdmFyIG55ID0gYy5yZWRNdWwodGhpcy54LnJlZFN1YihueCkpLnJlZElTdWIodGhpcy55KTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChueCwgbnkpOwp9OwoKUG9pbnQucHJvdG90eXBlLmRibCA9IGZ1bmN0aW9uIGRibCgpIHsKICBpZiAodGhpcy5pbmYpCiAgICByZXR1cm4gdGhpczsKCiAgLy8gMlAgPSBPCiAgdmFyIHlzMSA9IHRoaXMueS5yZWRBZGQodGhpcy55KTsKICBpZiAoeXMxLmNtcG4oMCkgPT09IDApCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludChudWxsLCBudWxsKTsKCiAgdmFyIGEgPSB0aGlzLmN1cnZlLmE7CgogIHZhciB4MiA9IHRoaXMueC5yZWRTcXIoKTsKICB2YXIgZHlpbnYgPSB5czEucmVkSW52bSgpOwogIHZhciBjID0geDIucmVkQWRkKHgyKS5yZWRJQWRkKHgyKS5yZWRJQWRkKGEpLnJlZE11bChkeWludik7CgogIHZhciBueCA9IGMucmVkU3FyKCkucmVkSVN1Yih0aGlzLngucmVkQWRkKHRoaXMueCkpOwogIHZhciBueSA9IGMucmVkTXVsKHRoaXMueC5yZWRTdWIobngpKS5yZWRJU3ViKHRoaXMueSk7CiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobngsIG55KTsKfTsKClBvaW50LnByb3RvdHlwZS5nZXRYID0gZnVuY3Rpb24gZ2V0WCgpIHsKICByZXR1cm4gdGhpcy54LmZyb21SZWQoKTsKfTsKClBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gZ2V0WSgpIHsKICByZXR1cm4gdGhpcy55LmZyb21SZWQoKTsKfTsKClBvaW50LnByb3RvdHlwZS5tdWwgPSBmdW5jdGlvbiBtdWwoaykgewogIGsgPSBuZXcgQk4oaywgMTYpOwoKICBpZiAodGhpcy5faGFzRG91YmxlcyhrKSkKICAgIHJldHVybiB0aGlzLmN1cnZlLl9maXhlZE5hZk11bCh0aGlzLCBrKTsKICBlbHNlIGlmICh0aGlzLmN1cnZlLmVuZG8pCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fZW5kb1duYWZNdWxBZGQoWyB0aGlzIF0sIFsgayBdKTsKICBlbHNlCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5fd25hZk11bCh0aGlzLCBrKTsKfTsKClBvaW50LnByb3RvdHlwZS5tdWxBZGQgPSBmdW5jdGlvbiBtdWxBZGQoazEsIHAyLCBrMikgewogIHZhciBwb2ludHMgPSBbIHRoaXMsIHAyIF07CiAgdmFyIGNvZWZmcyA9IFsgazEsIGsyIF07CiAgaWYgKHRoaXMuY3VydmUuZW5kbykKICAgIHJldHVybiB0aGlzLmN1cnZlLl9lbmRvV25hZk11bEFkZChwb2ludHMsIGNvZWZmcyk7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMuY3VydmUuX3duYWZNdWxBZGQoMSwgcG9pbnRzLCBjb2VmZnMsIDIpOwp9OwoKUG9pbnQucHJvdG90eXBlLmVxID0gZnVuY3Rpb24gZXEocCkgewogIHJldHVybiB0aGlzID09PSBwIHx8CiAgICAgICAgIHRoaXMuaW5mID09PSBwLmluZiAmJgogICAgICAgICAgICAgKHRoaXMuaW5mIHx8IHRoaXMueC5jbXAocC54KSA9PT0gMCAmJiB0aGlzLnkuY21wKHAueSkgPT09IDApOwp9OwoKUG9pbnQucHJvdG90eXBlLm5lZyA9IGZ1bmN0aW9uIG5lZyhfcHJlY29tcHV0ZSkgewogIGlmICh0aGlzLmluZikKICAgIHJldHVybiB0aGlzOwoKICB2YXIgcmVzID0gdGhpcy5jdXJ2ZS5wb2ludCh0aGlzLngsIHRoaXMueS5yZWROZWcoKSk7CiAgaWYgKF9wcmVjb21wdXRlICYmIHRoaXMucHJlY29tcHV0ZWQpIHsKICAgIHZhciBwcmUgPSB0aGlzLnByZWNvbXB1dGVkOwogICAgdmFyIG5lZ2F0ZSA9IGZ1bmN0aW9uKHApIHsKICAgICAgcmV0dXJuIHAubmVnKCk7CiAgICB9OwogICAgcmVzLnByZWNvbXB1dGVkID0gewogICAgICBuYWY6IHByZS5uYWYgJiYgewogICAgICAgIHduZDogcHJlLm5hZi53bmQsCiAgICAgICAgcG9pbnRzOiBwcmUubmFmLnBvaW50cy5tYXAobmVnYXRlKQogICAgICB9LAogICAgICBkb3VibGVzOiBwcmUuZG91YmxlcyAmJiB7CiAgICAgICAgc3RlcDogcHJlLmRvdWJsZXMuc3RlcCwKICAgICAgICBwb2ludHM6IHByZS5kb3VibGVzLnBvaW50cy5tYXAobmVnYXRlKQogICAgICB9CiAgICB9OwogIH0KICByZXR1cm4gcmVzOwp9OwoKUG9pbnQucHJvdG90eXBlLnRvSiA9IGZ1bmN0aW9uIHRvSigpIHsKICBpZiAodGhpcy5pbmYpCiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobnVsbCwgbnVsbCwgbnVsbCk7CgogIHZhciByZXMgPSB0aGlzLmN1cnZlLmpwb2ludCh0aGlzLngsIHRoaXMueSwgdGhpcy5jdXJ2ZS5vbmUpOwogIHJldHVybiByZXM7Cn07CgpmdW5jdGlvbiBKUG9pbnQoY3VydmUsIHgsIHksIHopIHsKICBCYXNlLkJhc2VQb2ludC5jYWxsKHRoaXMsIGN1cnZlLCAnamFjb2JpYW4nKTsKICBpZiAoeCA9PT0gbnVsbCAmJiB5ID09PSBudWxsICYmIHogPT09IG51bGwpIHsKICAgIHRoaXMueCA9IHRoaXMuY3VydmUub25lOwogICAgdGhpcy55ID0gdGhpcy5jdXJ2ZS5vbmU7CiAgICB0aGlzLnogPSBuZXcgQk4oMCk7CiAgfSBlbHNlIHsKICAgIHRoaXMueCA9IG5ldyBCTih4LCAxNik7CiAgICB0aGlzLnkgPSBuZXcgQk4oeSwgMTYpOwogICAgdGhpcy56ID0gbmV3IEJOKHosIDE2KTsKICB9CiAgaWYgKCF0aGlzLngucmVkKQogICAgdGhpcy54ID0gdGhpcy54LnRvUmVkKHRoaXMuY3VydmUucmVkKTsKICBpZiAoIXRoaXMueS5yZWQpCiAgICB0aGlzLnkgPSB0aGlzLnkudG9SZWQodGhpcy5jdXJ2ZS5yZWQpOwogIGlmICghdGhpcy56LnJlZCkKICAgIHRoaXMueiA9IHRoaXMuei50b1JlZCh0aGlzLmN1cnZlLnJlZCk7CgogIHRoaXMuek9uZSA9IHRoaXMueiA9PT0gdGhpcy5jdXJ2ZS5vbmU7Cn0KaW5oZXJpdHMoSlBvaW50LCBCYXNlLkJhc2VQb2ludCk7CgpTaG9ydEN1cnZlLnByb3RvdHlwZS5qcG9pbnQgPSBmdW5jdGlvbiBqcG9pbnQoeCwgeSwgeikgewogIHJldHVybiBuZXcgSlBvaW50KHRoaXMsIHgsIHksIHopOwp9OwoKSlBvaW50LnByb3RvdHlwZS50b1AgPSBmdW5jdGlvbiB0b1AoKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQobnVsbCwgbnVsbCk7CgogIHZhciB6aW52ID0gdGhpcy56LnJlZEludm0oKTsKICB2YXIgemludjIgPSB6aW52LnJlZFNxcigpOwogIHZhciBheCA9IHRoaXMueC5yZWRNdWwoemludjIpOwogIHZhciBheSA9IHRoaXMueS5yZWRNdWwoemludjIpLnJlZE11bCh6aW52KTsKCiAgcmV0dXJuIHRoaXMuY3VydmUucG9pbnQoYXgsIGF5KTsKfTsKCkpQb2ludC5wcm90b3R5cGUubmVnID0gZnVuY3Rpb24gbmVnKCkgewogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludCh0aGlzLngsIHRoaXMueS5yZWROZWcoKSwgdGhpcy56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkKHApIHsKICAvLyBPICsgUCA9IFAKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gcDsKCiAgLy8gUCArIE8gPSBQCiAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRoaXM7CgogIC8vIDEyTSArIDRTICsgN0EKICB2YXIgcHoyID0gcC56LnJlZFNxcigpOwogIHZhciB6MiA9IHRoaXMuei5yZWRTcXIoKTsKICB2YXIgdTEgPSB0aGlzLngucmVkTXVsKHB6Mik7CiAgdmFyIHUyID0gcC54LnJlZE11bCh6Mik7CiAgdmFyIHMxID0gdGhpcy55LnJlZE11bChwejIucmVkTXVsKHAueikpOwogIHZhciBzMiA9IHAueS5yZWRNdWwoejIucmVkTXVsKHRoaXMueikpOwoKICB2YXIgaCA9IHUxLnJlZFN1Yih1Mik7CiAgdmFyIHIgPSBzMS5yZWRTdWIoczIpOwogIGlmIChoLmNtcG4oMCkgPT09IDApIHsKICAgIGlmIChyLmNtcG4oMCkgIT09IDApCiAgICAgIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHRoaXMuZGJsKCk7CiAgfQoKICB2YXIgaDIgPSBoLnJlZFNxcigpOwogIHZhciBoMyA9IGgyLnJlZE11bChoKTsKICB2YXIgdiA9IHUxLnJlZE11bChoMik7CgogIHZhciBueCA9IHIucmVkU3FyKCkucmVkSUFkZChoMykucmVkSVN1Yih2KS5yZWRJU3ViKHYpOwogIHZhciBueSA9IHIucmVkTXVsKHYucmVkSVN1YihueCkpLnJlZElTdWIoczEucmVkTXVsKGgzKSk7CiAgdmFyIG56ID0gdGhpcy56LnJlZE11bChwLnopLnJlZE11bChoKTsKCiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG54LCBueSwgbnopOwp9OwoKSlBvaW50LnByb3RvdHlwZS5taXhlZEFkZCA9IGZ1bmN0aW9uIG1peGVkQWRkKHApIHsKICAvLyBPICsgUCA9IFAKICBpZiAodGhpcy5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gcC50b0ooKTsKCiAgLy8gUCArIE8gPSBQCiAgaWYgKHAuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRoaXM7CgogIC8vIDhNICsgM1MgKyA3QQogIHZhciB6MiA9IHRoaXMuei5yZWRTcXIoKTsKICB2YXIgdTEgPSB0aGlzLng7CiAgdmFyIHUyID0gcC54LnJlZE11bCh6Mik7CiAgdmFyIHMxID0gdGhpcy55OwogIHZhciBzMiA9IHAueS5yZWRNdWwoejIpLnJlZE11bCh0aGlzLnopOwoKICB2YXIgaCA9IHUxLnJlZFN1Yih1Mik7CiAgdmFyIHIgPSBzMS5yZWRTdWIoczIpOwogIGlmIChoLmNtcG4oMCkgPT09IDApIHsKICAgIGlmIChyLmNtcG4oMCkgIT09IDApCiAgICAgIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChudWxsLCBudWxsLCBudWxsKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIHRoaXMuZGJsKCk7CiAgfQoKICB2YXIgaDIgPSBoLnJlZFNxcigpOwogIHZhciBoMyA9IGgyLnJlZE11bChoKTsKICB2YXIgdiA9IHUxLnJlZE11bChoMik7CgogIHZhciBueCA9IHIucmVkU3FyKCkucmVkSUFkZChoMykucmVkSVN1Yih2KS5yZWRJU3ViKHYpOwogIHZhciBueSA9IHIucmVkTXVsKHYucmVkSVN1YihueCkpLnJlZElTdWIoczEucmVkTXVsKGgzKSk7CiAgdmFyIG56ID0gdGhpcy56LnJlZE11bChoKTsKCiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG54LCBueSwgbnopOwp9OwoKSlBvaW50LnByb3RvdHlwZS5kYmxwID0gZnVuY3Rpb24gZGJscChwb3cpIHsKICBpZiAocG93ID09PSAwKQogICAgcmV0dXJuIHRoaXM7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRoaXM7CiAgaWYgKCFwb3cpCiAgICByZXR1cm4gdGhpcy5kYmwoKTsKCiAgaWYgKHRoaXMuY3VydmUuemVyb0EgfHwgdGhpcy5jdXJ2ZS50aHJlZUEpIHsKICAgIHZhciByID0gdGhpczsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG93OyBpKyspCiAgICAgIHIgPSByLmRibCgpOwogICAgcmV0dXJuIHI7CiAgfQoKICAvLyAxTSArIDJTICsgMUEgKyBOICogKDRTICsgNU0gKyA4QSkKICAvLyBOID0gMSA9PiA2TSArIDZTICsgOUEKICB2YXIgYSA9IHRoaXMuY3VydmUuYTsKICB2YXIgdGludiA9IHRoaXMuY3VydmUudGludjsKCiAgdmFyIGp4ID0gdGhpcy54OwogIHZhciBqeSA9IHRoaXMueTsKICB2YXIganogPSB0aGlzLno7CiAgdmFyIGp6NCA9IGp6LnJlZFNxcigpLnJlZFNxcigpOwoKICAvLyBSZXVzZSByZXN1bHRzCiAgdmFyIGp5ZCA9IGp5LnJlZEFkZChqeSk7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3c7IGkrKykgewogICAgdmFyIGp4MiA9IGp4LnJlZFNxcigpOwogICAgdmFyIGp5ZDIgPSBqeWQucmVkU3FyKCk7CiAgICB2YXIganlkNCA9IGp5ZDIucmVkU3FyKCk7CiAgICB2YXIgYyA9IGp4Mi5yZWRBZGQoangyKS5yZWRJQWRkKGp4MikucmVkSUFkZChhLnJlZE11bChqejQpKTsKCiAgICB2YXIgdDEgPSBqeC5yZWRNdWwoanlkMik7CiAgICB2YXIgbnggPSBjLnJlZFNxcigpLnJlZElTdWIodDEucmVkQWRkKHQxKSk7CiAgICB2YXIgdDIgPSB0MS5yZWRJU3ViKG54KTsKICAgIHZhciBkbnkgPSBjLnJlZE11bCh0Mik7CiAgICBkbnkgPSBkbnkucmVkSUFkZChkbnkpLnJlZElTdWIoanlkNCk7CiAgICB2YXIgbnogPSBqeWQucmVkTXVsKGp6KTsKICAgIGlmIChpICsgMSA8IHBvdykKICAgICAgano0ID0gano0LnJlZE11bChqeWQ0KTsKCiAgICBqeCA9IG54OwogICAganogPSBuejsKICAgIGp5ZCA9IGRueTsKICB9CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChqeCwganlkLnJlZE11bCh0aW52KSwganopOwp9OwoKSlBvaW50LnByb3RvdHlwZS5kYmwgPSBmdW5jdGlvbiBkYmwoKSB7CiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHRoaXM7CgogIGlmICh0aGlzLmN1cnZlLnplcm9BKQogICAgcmV0dXJuIHRoaXMuX3plcm9EYmwoKTsKICBlbHNlIGlmICh0aGlzLmN1cnZlLnRocmVlQSkKICAgIHJldHVybiB0aGlzLl90aHJlZURibCgpOwogIGVsc2UKICAgIHJldHVybiB0aGlzLl9kYmwoKTsKfTsKCkpQb2ludC5wcm90b3R5cGUuX3plcm9EYmwgPSBmdW5jdGlvbiBfemVyb0RibCgpIHsKICB2YXIgbng7CiAgdmFyIG55OwogIHZhciBuejsKICAvLyBaID0gMQogIGlmICh0aGlzLnpPbmUpIHsKICAgIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1zaG9ydHctamFjb2JpYW4tMC5odG1sCiAgICAvLyAgICAgI2RvdWJsaW5nLW1kYmwtMjAwNy1ibAogICAgLy8gMU0gKyA1UyArIDE0QQoKICAgIC8vIFhYID0gWDFeMgogICAgdmFyIHh4ID0gdGhpcy54LnJlZFNxcigpOwogICAgLy8gWVkgPSBZMV4yCiAgICB2YXIgeXkgPSB0aGlzLnkucmVkU3FyKCk7CiAgICAvLyBZWVlZID0gWVleMgogICAgdmFyIHl5eXkgPSB5eS5yZWRTcXIoKTsKICAgIC8vIFMgPSAyICogKChYMSArIFlZKV4yIC0gWFggLSBZWVlZKQogICAgdmFyIHMgPSB0aGlzLngucmVkQWRkKHl5KS5yZWRTcXIoKS5yZWRJU3ViKHh4KS5yZWRJU3ViKHl5eXkpOwogICAgcyA9IHMucmVkSUFkZChzKTsKICAgIC8vIE0gPSAzICogWFggKyBhOyBhID0gMAogICAgdmFyIG0gPSB4eC5yZWRBZGQoeHgpLnJlZElBZGQoeHgpOwogICAgLy8gVCA9IE0gXiAyIC0gMipTCiAgICB2YXIgdCA9IG0ucmVkU3FyKCkucmVkSVN1YihzKS5yZWRJU3ViKHMpOwoKICAgIC8vIDggKiBZWVlZCiAgICB2YXIgeXl5eTggPSB5eXl5LnJlZElBZGQoeXl5eSk7CiAgICB5eXl5OCA9IHl5eXk4LnJlZElBZGQoeXl5eTgpOwogICAgeXl5eTggPSB5eXl5OC5yZWRJQWRkKHl5eXk4KTsKCiAgICAvLyBYMyA9IFQKICAgIG54ID0gdDsKICAgIC8vIFkzID0gTSAqIChTIC0gVCkgLSA4ICogWVlZWQogICAgbnkgPSBtLnJlZE11bChzLnJlZElTdWIodCkpLnJlZElTdWIoeXl5eTgpOwogICAgLy8gWjMgPSAyKlkxCiAgICBueiA9IHRoaXMueS5yZWRBZGQodGhpcy55KTsKICB9IGVsc2UgewogICAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXNob3J0dy1qYWNvYmlhbi0wLmh0bWwKICAgIC8vICAgICAjZG91YmxpbmctZGJsLTIwMDktbAogICAgLy8gMk0gKyA1UyArIDEzQQoKICAgIC8vIEEgPSBYMV4yCiAgICB2YXIgYSA9IHRoaXMueC5yZWRTcXIoKTsKICAgIC8vIEIgPSBZMV4yCiAgICB2YXIgYiA9IHRoaXMueS5yZWRTcXIoKTsKICAgIC8vIEMgPSBCXjIKICAgIHZhciBjID0gYi5yZWRTcXIoKTsKICAgIC8vIEQgPSAyICogKChYMSArIEIpXjIgLSBBIC0gQykKICAgIHZhciBkID0gdGhpcy54LnJlZEFkZChiKS5yZWRTcXIoKS5yZWRJU3ViKGEpLnJlZElTdWIoYyk7CiAgICBkID0gZC5yZWRJQWRkKGQpOwogICAgLy8gRSA9IDMgKiBBCiAgICB2YXIgZSA9IGEucmVkQWRkKGEpLnJlZElBZGQoYSk7CiAgICAvLyBGID0gRV4yCiAgICB2YXIgZiA9IGUucmVkU3FyKCk7CgogICAgLy8gOCAqIEMKICAgIHZhciBjOCA9IGMucmVkSUFkZChjKTsKICAgIGM4ID0gYzgucmVkSUFkZChjOCk7CiAgICBjOCA9IGM4LnJlZElBZGQoYzgpOwoKICAgIC8vIFgzID0gRiAtIDIgKiBECiAgICBueCA9IGYucmVkSVN1YihkKS5yZWRJU3ViKGQpOwogICAgLy8gWTMgPSBFICogKEQgLSBYMykgLSA4ICogQwogICAgbnkgPSBlLnJlZE11bChkLnJlZElTdWIobngpKS5yZWRJU3ViKGM4KTsKICAgIC8vIFozID0gMiAqIFkxICogWjEKICAgIG56ID0gdGhpcy55LnJlZE11bCh0aGlzLnopOwogICAgbnogPSBuei5yZWRJQWRkKG56KTsKICB9CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUuX3RocmVlRGJsID0gZnVuY3Rpb24gX3RocmVlRGJsKCkgewogIHZhciBueDsKICB2YXIgbnk7CiAgdmFyIG56OwogIC8vIFogPSAxCiAgaWYgKHRoaXMuek9uZSkgewogICAgLy8gaHlwZXJlbGxpcHRpYy5vcmcvRUZEL2cxcC9hdXRvLXNob3J0dy1qYWNvYmlhbi0zLmh0bWwKICAgIC8vICAgICAjZG91YmxpbmctbWRibC0yMDA3LWJsCiAgICAvLyAxTSArIDVTICsgMTVBCgogICAgLy8gWFggPSBYMV4yCiAgICB2YXIgeHggPSB0aGlzLngucmVkU3FyKCk7CiAgICAvLyBZWSA9IFkxXjIKICAgIHZhciB5eSA9IHRoaXMueS5yZWRTcXIoKTsKICAgIC8vIFlZWVkgPSBZWV4yCiAgICB2YXIgeXl5eSA9IHl5LnJlZFNxcigpOwogICAgLy8gUyA9IDIgKiAoKFgxICsgWVkpXjIgLSBYWCAtIFlZWVkpCiAgICB2YXIgcyA9IHRoaXMueC5yZWRBZGQoeXkpLnJlZFNxcigpLnJlZElTdWIoeHgpLnJlZElTdWIoeXl5eSk7CiAgICBzID0gcy5yZWRJQWRkKHMpOwogICAgLy8gTSA9IDMgKiBYWCArIGEKICAgIHZhciBtID0geHgucmVkQWRkKHh4KS5yZWRJQWRkKHh4KS5yZWRJQWRkKHRoaXMuY3VydmUuYSk7CiAgICAvLyBUID0gTV4yIC0gMiAqIFMKICAgIHZhciB0ID0gbS5yZWRTcXIoKS5yZWRJU3ViKHMpLnJlZElTdWIocyk7CiAgICAvLyBYMyA9IFQKICAgIG54ID0gdDsKICAgIC8vIFkzID0gTSAqIChTIC0gVCkgLSA4ICogWVlZWQogICAgdmFyIHl5eXk4ID0geXl5eS5yZWRJQWRkKHl5eXkpOwogICAgeXl5eTggPSB5eXl5OC5yZWRJQWRkKHl5eXk4KTsKICAgIHl5eXk4ID0geXl5eTgucmVkSUFkZCh5eXl5OCk7CiAgICBueSA9IG0ucmVkTXVsKHMucmVkSVN1Yih0KSkucmVkSVN1Yih5eXl5OCk7CiAgICAvLyBaMyA9IDIgKiBZMQogICAgbnogPSB0aGlzLnkucmVkQWRkKHRoaXMueSk7CiAgfSBlbHNlIHsKICAgIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1zaG9ydHctamFjb2JpYW4tMy5odG1sI2RvdWJsaW5nLWRibC0yMDAxLWIKICAgIC8vIDNNICsgNVMKCiAgICAvLyBkZWx0YSA9IFoxXjIKICAgIHZhciBkZWx0YSA9IHRoaXMuei5yZWRTcXIoKTsKICAgIC8vIGdhbW1hID0gWTFeMgogICAgdmFyIGdhbW1hID0gdGhpcy55LnJlZFNxcigpOwogICAgLy8gYmV0YSA9IFgxICogZ2FtbWEKICAgIHZhciBiZXRhID0gdGhpcy54LnJlZE11bChnYW1tYSk7CiAgICAvLyBhbHBoYSA9IDMgKiAoWDEgLSBkZWx0YSkgKiAoWDEgKyBkZWx0YSkKICAgIHZhciBhbHBoYSA9IHRoaXMueC5yZWRTdWIoZGVsdGEpLnJlZE11bCh0aGlzLngucmVkQWRkKGRlbHRhKSk7CiAgICBhbHBoYSA9IGFscGhhLnJlZEFkZChhbHBoYSkucmVkSUFkZChhbHBoYSk7CiAgICAvLyBYMyA9IGFscGhhXjIgLSA4ICogYmV0YQogICAgdmFyIGJldGE0ID0gYmV0YS5yZWRJQWRkKGJldGEpOwogICAgYmV0YTQgPSBiZXRhNC5yZWRJQWRkKGJldGE0KTsKICAgIHZhciBiZXRhOCA9IGJldGE0LnJlZEFkZChiZXRhNCk7CiAgICBueCA9IGFscGhhLnJlZFNxcigpLnJlZElTdWIoYmV0YTgpOwogICAgLy8gWjMgPSAoWTEgKyBaMSleMiAtIGdhbW1hIC0gZGVsdGEKICAgIG56ID0gdGhpcy55LnJlZEFkZCh0aGlzLnopLnJlZFNxcigpLnJlZElTdWIoZ2FtbWEpLnJlZElTdWIoZGVsdGEpOwogICAgLy8gWTMgPSBhbHBoYSAqICg0ICogYmV0YSAtIFgzKSAtIDggKiBnYW1tYV4yCiAgICB2YXIgZ2dhbW1hOCA9IGdhbW1hLnJlZFNxcigpOwogICAgZ2dhbW1hOCA9IGdnYW1tYTgucmVkSUFkZChnZ2FtbWE4KTsKICAgIGdnYW1tYTggPSBnZ2FtbWE4LnJlZElBZGQoZ2dhbW1hOCk7CiAgICBnZ2FtbWE4ID0gZ2dhbW1hOC5yZWRJQWRkKGdnYW1tYTgpOwogICAgbnkgPSBhbHBoYS5yZWRNdWwoYmV0YTQucmVkSVN1YihueCkpLnJlZElTdWIoZ2dhbW1hOCk7CiAgfQoKICByZXR1cm4gdGhpcy5jdXJ2ZS5qcG9pbnQobngsIG55LCBueik7Cn07CgpKUG9pbnQucHJvdG90eXBlLl9kYmwgPSBmdW5jdGlvbiBfZGJsKCkgewogIHZhciBhID0gdGhpcy5jdXJ2ZS5hOwoKICAvLyA0TSArIDZTICsgMTBBCiAgdmFyIGp4ID0gdGhpcy54OwogIHZhciBqeSA9IHRoaXMueTsKICB2YXIganogPSB0aGlzLno7CiAgdmFyIGp6NCA9IGp6LnJlZFNxcigpLnJlZFNxcigpOwoKICB2YXIgangyID0gangucmVkU3FyKCk7CiAgdmFyIGp5MiA9IGp5LnJlZFNxcigpOwoKICB2YXIgYyA9IGp4Mi5yZWRBZGQoangyKS5yZWRJQWRkKGp4MikucmVkSUFkZChhLnJlZE11bChqejQpKTsKCiAgdmFyIGp4ZDQgPSBqeC5yZWRBZGQoangpOwogIGp4ZDQgPSBqeGQ0LnJlZElBZGQoanhkNCk7CiAgdmFyIHQxID0ganhkNC5yZWRNdWwoankyKTsKICB2YXIgbnggPSBjLnJlZFNxcigpLnJlZElTdWIodDEucmVkQWRkKHQxKSk7CiAgdmFyIHQyID0gdDEucmVkSVN1YihueCk7CgogIHZhciBqeWQ4ID0gankyLnJlZFNxcigpOwogIGp5ZDggPSBqeWQ4LnJlZElBZGQoanlkOCk7CiAganlkOCA9IGp5ZDgucmVkSUFkZChqeWQ4KTsKICBqeWQ4ID0ganlkOC5yZWRJQWRkKGp5ZDgpOwogIHZhciBueSA9IGMucmVkTXVsKHQyKS5yZWRJU3ViKGp5ZDgpOwogIHZhciBueiA9IGp5LnJlZEFkZChqeSkucmVkTXVsKGp6KTsKCiAgcmV0dXJuIHRoaXMuY3VydmUuanBvaW50KG54LCBueSwgbnopOwp9OwoKSlBvaW50LnByb3RvdHlwZS50cnBsID0gZnVuY3Rpb24gdHJwbCgpIHsKICBpZiAoIXRoaXMuY3VydmUuemVyb0EpCiAgICByZXR1cm4gdGhpcy5kYmwoKS5hZGQodGhpcyk7CgogIC8vIGh5cGVyZWxsaXB0aWMub3JnL0VGRC9nMXAvYXV0by1zaG9ydHctamFjb2JpYW4tMC5odG1sI3RyaXBsaW5nLXRwbC0yMDA3LWJsCiAgLy8gNU0gKyAxMFMgKyAuLi4KCiAgLy8gWFggPSBYMV4yCiAgdmFyIHh4ID0gdGhpcy54LnJlZFNxcigpOwogIC8vIFlZID0gWTFeMgogIHZhciB5eSA9IHRoaXMueS5yZWRTcXIoKTsKICAvLyBaWiA9IFoxXjIKICB2YXIgenogPSB0aGlzLnoucmVkU3FyKCk7CiAgLy8gWVlZWSA9IFlZXjIKICB2YXIgeXl5eSA9IHl5LnJlZFNxcigpOwogIC8vIE0gPSAzICogWFggKyBhICogWloyOyBhID0gMAogIHZhciBtID0geHgucmVkQWRkKHh4KS5yZWRJQWRkKHh4KTsKICAvLyBNTSA9IE1eMgogIHZhciBtbSA9IG0ucmVkU3FyKCk7CiAgLy8gRSA9IDYgKiAoKFgxICsgWVkpXjIgLSBYWCAtIFlZWVkpIC0gTU0KICB2YXIgZSA9IHRoaXMueC5yZWRBZGQoeXkpLnJlZFNxcigpLnJlZElTdWIoeHgpLnJlZElTdWIoeXl5eSk7CiAgZSA9IGUucmVkSUFkZChlKTsKICBlID0gZS5yZWRBZGQoZSkucmVkSUFkZChlKTsKICBlID0gZS5yZWRJU3ViKG1tKTsKICAvLyBFRSA9IEVeMgogIHZhciBlZSA9IGUucmVkU3FyKCk7CiAgLy8gVCA9IDE2KllZWVkKICB2YXIgdCA9IHl5eXkucmVkSUFkZCh5eXl5KTsKICB0ID0gdC5yZWRJQWRkKHQpOwogIHQgPSB0LnJlZElBZGQodCk7CiAgdCA9IHQucmVkSUFkZCh0KTsKICAvLyBVID0gKE0gKyBFKV4yIC0gTU0gLSBFRSAtIFQKICB2YXIgdSA9IG0ucmVkSUFkZChlKS5yZWRTcXIoKS5yZWRJU3ViKG1tKS5yZWRJU3ViKGVlKS5yZWRJU3ViKHQpOwogIC8vIFgzID0gNCAqIChYMSAqIEVFIC0gNCAqIFlZICogVSkKICB2YXIgeXl1NCA9IHl5LnJlZE11bCh1KTsKICB5eXU0ID0geXl1NC5yZWRJQWRkKHl5dTQpOwogIHl5dTQgPSB5eXU0LnJlZElBZGQoeXl1NCk7CiAgdmFyIG54ID0gdGhpcy54LnJlZE11bChlZSkucmVkSVN1Yih5eXU0KTsKICBueCA9IG54LnJlZElBZGQobngpOwogIG54ID0gbngucmVkSUFkZChueCk7CiAgLy8gWTMgPSA4ICogWTEgKiAoVSAqIChUIC0gVSkgLSBFICogRUUpCiAgdmFyIG55ID0gdGhpcy55LnJlZE11bCh1LnJlZE11bCh0LnJlZElTdWIodSkpLnJlZElTdWIoZS5yZWRNdWwoZWUpKSk7CiAgbnkgPSBueS5yZWRJQWRkKG55KTsKICBueSA9IG55LnJlZElBZGQobnkpOwogIG55ID0gbnkucmVkSUFkZChueSk7CiAgLy8gWjMgPSAoWjEgKyBFKV4yIC0gWlogLSBFRQogIHZhciBueiA9IHRoaXMuei5yZWRBZGQoZSkucmVkU3FyKCkucmVkSVN1Yih6eikucmVkSVN1YihlZSk7CgogIHJldHVybiB0aGlzLmN1cnZlLmpwb2ludChueCwgbnksIG56KTsKfTsKCkpQb2ludC5wcm90b3R5cGUubXVsID0gZnVuY3Rpb24gbXVsKGssIGtiYXNlKSB7CiAgayA9IG5ldyBCTihrLCBrYmFzZSk7CgogIHJldHVybiB0aGlzLmN1cnZlLl93bmFmTXVsKHRoaXMsIGspOwp9OwoKSlBvaW50LnByb3RvdHlwZS5lcSA9IGZ1bmN0aW9uIGVxKHApIHsKICBpZiAocC50eXBlID09PSAnYWZmaW5lJykKICAgIHJldHVybiB0aGlzLmVxKHAudG9KKCkpOwoKICBpZiAodGhpcyA9PT0gcCkKICAgIHJldHVybiB0cnVlOwoKICAvLyB4MSAqIHoyXjIgPT0geDIgKiB6MV4yCiAgdmFyIHoyID0gdGhpcy56LnJlZFNxcigpOwogIHZhciBwejIgPSBwLnoucmVkU3FyKCk7CiAgaWYgKHRoaXMueC5yZWRNdWwocHoyKS5yZWRJU3ViKHAueC5yZWRNdWwoejIpKS5jbXBuKDApICE9PSAwKQogICAgcmV0dXJuIGZhbHNlOwoKICAvLyB5MSAqIHoyXjMgPT0geTIgKiB6MV4zCiAgdmFyIHozID0gejIucmVkTXVsKHRoaXMueik7CiAgdmFyIHB6MyA9IHB6Mi5yZWRNdWwocC56KTsKICByZXR1cm4gdGhpcy55LnJlZE11bChwejMpLnJlZElTdWIocC55LnJlZE11bCh6MykpLmNtcG4oMCkgPT09IDA7Cn07CgpKUG9pbnQucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogIGlmICh0aGlzLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiAnPEVDIEpQb2ludCBJbmZpbml0eT4nOwogIHJldHVybiAnPEVDIEpQb2ludCB4OiAnICsgdGhpcy54LnRvU3RyaW5nKDE2LCAyKSArCiAgICAgICcgeTogJyArIHRoaXMueS50b1N0cmluZygxNiwgMikgKwogICAgICAnIHo6ICcgKyB0aGlzLnoudG9TdHJpbmcoMTYsIDIpICsgJz4nOwp9OwoKSlBvaW50LnByb3RvdHlwZS5pc0luZmluaXR5ID0gZnVuY3Rpb24gaXNJbmZpbml0eSgpIHsKICAvLyBYWFggVGhpcyBjb2RlIGFzc3VtZXMgdGhhdCB6ZXJvIGlzIGFsd2F5cyB6ZXJvIGluIHJlZAogIHJldHVybiB0aGlzLnouY21wbigwKSA9PT0gMDsKfTsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAyLCIuLi9jdXJ2ZSI6MTA1LCJibi5qcyI6NDEsImluaGVyaXRzIjoxMjl9XSwxMDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7Cgp2YXIgY3VydmVzID0gZXhwb3J0czsKCnZhciBoYXNoID0gcmVxdWlyZSgnaGFzaC5qcycpOwp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi9lbGxpcHRpYycpOwoKdmFyIGFzc2VydCA9IGVsbGlwdGljLnV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIFByZXNldEN1cnZlKG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucy50eXBlID09PSAnc2hvcnQnKQogICAgdGhpcy5jdXJ2ZSA9IG5ldyBlbGxpcHRpYy5jdXJ2ZS5zaG9ydChvcHRpb25zKTsKICBlbHNlIGlmIChvcHRpb25zLnR5cGUgPT09ICdlZHdhcmRzJykKICAgIHRoaXMuY3VydmUgPSBuZXcgZWxsaXB0aWMuY3VydmUuZWR3YXJkcyhvcHRpb25zKTsKICBlbHNlCiAgICB0aGlzLmN1cnZlID0gbmV3IGVsbGlwdGljLmN1cnZlLm1vbnQob3B0aW9ucyk7CiAgdGhpcy5nID0gdGhpcy5jdXJ2ZS5nOwogIHRoaXMubiA9IHRoaXMuY3VydmUubjsKICB0aGlzLmhhc2ggPSBvcHRpb25zLmhhc2g7CgogIGFzc2VydCh0aGlzLmcudmFsaWRhdGUoKSwgJ0ludmFsaWQgY3VydmUnKTsKICBhc3NlcnQodGhpcy5nLm11bCh0aGlzLm4pLmlzSW5maW5pdHkoKSwgJ0ludmFsaWQgY3VydmUsIEcqTiAhPSBPJyk7Cn0KY3VydmVzLlByZXNldEN1cnZlID0gUHJlc2V0Q3VydmU7CgpmdW5jdGlvbiBkZWZpbmVDdXJ2ZShuYW1lLCBvcHRpb25zKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN1cnZlcywgbmFtZSwgewogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBjdXJ2ZSA9IG5ldyBQcmVzZXRDdXJ2ZShvcHRpb25zKTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN1cnZlcywgbmFtZSwgewogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIHZhbHVlOiBjdXJ2ZQogICAgICB9KTsKICAgICAgcmV0dXJuIGN1cnZlOwogICAgfQogIH0pOwp9CgpkZWZpbmVDdXJ2ZSgncDE5MicsIHsKICB0eXBlOiAnc2hvcnQnLAogIHByaW1lOiAncDE5MicsCiAgcDogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZlIGZmZmZmZmZmIGZmZmZmZmZmJywKICBhOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZmZmYgZmZmZmZmZmMnLAogIGI6ICc2NDIxMDUxOSBlNTljODBlNyAwZmE3ZTlhYiA3MjI0MzA0OSBmZWI4ZGVlYyBjMTQ2YjliMScsCiAgbjogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIDk5ZGVmODM2IDE0NmJjOWIxIGI0ZDIyODMxJywKICBoYXNoOiBoYXNoLnNoYTI1NiwKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnMTg4ZGE4MGUgYjAzMDkwZjYgN2NiZjIwZWIgNDNhMTg4MDAgZjRmZjBhZmQgODJmZjEwMTInLAogICAgJzA3MTkyYjk1IGZmYzhkYTc4IDYzMTAxMWVkIDZiMjRjZGQ1IDczZjk3N2ExIDFlNzk0ODExJwogIF0KfSk7CgpkZWZpbmVDdXJ2ZSgncDIyNCcsIHsKICB0eXBlOiAnc2hvcnQnLAogIHByaW1lOiAncDIyNCcsCiAgcDogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIDAwMDAwMDAwIDAwMDAwMDAwIDAwMDAwMDAxJywKICBhOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUnLAogIGI6ICdiNDA1MGE4NSAwYzA0YjNhYiBmNTQxMzI1NiA1MDQ0YjBiNyBkN2JmZDhiYSAyNzBiMzk0MyAyMzU1ZmZiNCcsCiAgbjogJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmYxNmEyIGUwYjhmMDNlIDEzZGQyOTQ1IDVjNWMyYTNkJywKICBoYXNoOiBoYXNoLnNoYTI1NiwKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnYjcwZTBjYmQgNmJiNGJmN2YgMzIxMzkwYjkgNGEwM2MxZDMgNTZjMjExMjIgMzQzMjgwZDYgMTE1YzFkMjEnLAogICAgJ2JkMzc2Mzg4IGI1ZjcyM2ZiIDRjMjJkZmU2IGNkNDM3NWEwIDVhMDc0NzY0IDQ0ZDU4MTk5IDg1MDA3ZTM0JwogIF0KfSk7CgpkZWZpbmVDdXJ2ZSgncDI1NicsIHsKICB0eXBlOiAnc2hvcnQnLAogIHByaW1lOiBudWxsLAogIHA6ICdmZmZmZmZmZiAwMDAwMDAwMSAwMDAwMDAwMCAwMDAwMDAwMCAwMDAwMDAwMCBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZicsCiAgYTogJ2ZmZmZmZmZmIDAwMDAwMDAxIDAwMDAwMDAwIDAwMDAwMDAwIDAwMDAwMDAwIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZjJywKICBiOiAnNWFjNjM1ZDggYWEzYTkzZTcgYjNlYmJkNTUgNzY5ODg2YmMgNjUxZDA2YjAgY2M1M2IwZjYgM2JjZTNjM2UgMjdkMjYwNGInLAogIG46ICdmZmZmZmZmZiAwMDAwMDAwMCBmZmZmZmZmZiBmZmZmZmZmZiBiY2U2ZmFhZCBhNzE3OWU4NCBmM2I5Y2FjMiBmYzYzMjU1MScsCiAgaGFzaDogaGFzaC5zaGEyNTYsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJzZiMTdkMWYyIGUxMmM0MjQ3IGY4YmNlNmU1IDYzYTQ0MGYyIDc3MDM3ZDgxIDJkZWIzM2EwIGY0YTEzOTQ1IGQ4OThjMjk2JywKICAgICc0ZmUzNDJlMiBmZTFhN2Y5YiA4ZWU3ZWI0YSA3YzBmOWUxNiAyYmNlMzM1NyA2YjMxNWVjZSBjYmI2NDA2OCAzN2JmNTFmNScKICBdCn0pOwoKZGVmaW5lQ3VydmUoJ3AzODQnLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogbnVsbCwKICBwOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZlIGZmZmZmZmZmIDAwMDAwMDAwIDAwMDAwMDAwIGZmZmZmZmZmJywKICBhOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZlIGZmZmZmZmZmIDAwMDAwMDAwIDAwMDAwMDAwIGZmZmZmZmZjJywKICBiOiAnYjMzMTJmYTcgZTIzZWU3ZTQgOTg4ZTA1NmIgZTNmODJkMTkgMTgxZDljNmUgZmU4MTQxMTIgMDMxNDA4OGYgJyArCiAgICAgJzUwMTM4NzVhIGM2NTYzOThkIDhhMmVkMTlkIDJhODVjOGVkIGQzZWMyYWVmJywKICBuOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgYzc2MzRkODEgJyArCiAgICAgJ2Y0MzcyZGRmIDU4MWEwZGIyIDQ4YjBhNzdhIGVjZWMxOTZhIGNjYzUyOTczJywKICBoYXNoOiBoYXNoLnNoYTM4NCwKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnYWE4N2NhMjIgYmU4YjA1MzcgOGViMWM3MWUgZjMyMGFkNzQgNmUxZDNiNjIgOGJhNzliOTggNTlmNzQxZTAgODI1NDJhMzggJyArCiAgICAnNTUwMmYyNWQgYmY1NTI5NmMgM2E1NDVlMzggNzI3NjBhYjcnLAogICAgJzM2MTdkZTRhIDk2MjYyYzZmIDVkOWU5OGJmIDkyOTJkYzI5IGY4ZjQxZGJkIDI4OWExNDdjIGU5ZGEzMTEzIGI1ZjBiOGMwICcgKwogICAgJzBhNjBiMWNlIDFkN2U4MTlkIDdhNDMxZDdjIDkwZWEwZTVmJwogIF0KfSk7CgpkZWZpbmVDdXJ2ZSgncDUyMScsIHsKICB0eXBlOiAnc2hvcnQnLAogIHByaW1lOiBudWxsLAogIHA6ICcwMDAwMDFmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmJywKICBhOiAnMDAwMDAxZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgJyArCiAgICAgJ2ZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmIGZmZmZmZmZmICcgKwogICAgICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmYycsCiAgYjogJzAwMDAwMDUxIDk1M2ViOTYxIDhlMWM5YTFmIDkyOWEyMWEwIGI2ODU0MGVlIGEyZGE3MjViICcgKwogICAgICc5OWIzMTVmMyBiOGI0ODk5MSA4ZWYxMDllMSA1NjE5Mzk1MSBlYzdlOTM3YiAxNjUyYzBiZCAnICsKICAgICAnM2JiMWJmMDcgMzU3M2RmODggM2QyYzM0ZjEgZWY0NTFmZDQgNmI1MDNmMDAnLAogIG46ICcwMDAwMDFmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiAnICsKICAgICAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmEgNTE4Njg3ODMgYmYyZjk2NmIgN2ZjYzAxNDggJyArCiAgICAgJ2Y3MDlhNWQwIDNiYjVjOWI4IDg5OWM0N2FlIGJiNmZiNzFlIDkxMzg2NDA5JywKICBoYXNoOiBoYXNoLnNoYTUxMiwKICBnUmVkOiBmYWxzZSwKICBnOiBbCiAgICAnMDAwMDAwYzYgODU4ZTA2YjcgMDQwNGU5Y2QgOWUzZWNiNjYgMjM5NWI0NDIgOWM2NDgxMzkgJyArCiAgICAnMDUzZmI1MjEgZjgyOGFmNjAgNmI0ZDNkYmEgYTE0YjVlNzcgZWZlNzU5MjggZmUxZGMxMjcgJyArCiAgICAnYTJmZmE4ZGUgMzM0OGIzYzEgODU2YTQyOWIgZjk3ZTdlMzEgYzJlNWJkNjYnLAogICAgJzAwMDAwMTE4IDM5Mjk2YTc4IDlhM2JjMDA0IDVjOGE1ZmI0IDJjN2QxYmQ5IDk4ZjU0NDQ5ICcgKwogICAgJzU3OWI0NDY4IDE3YWZiZDE3IDI3M2U2NjJjIDk3ZWU3Mjk5IDVlZjQyNjQwIGM1NTBiOTAxICcgKwogICAgJzNmYWQwNzYxIDM1M2M3MDg2IGEyNzJjMjQwIDg4YmU5NDc2IDlmZDE2NjUwJwogIF0KfSk7CgpkZWZpbmVDdXJ2ZSgnY3VydmUyNTUxOScsIHsKICB0eXBlOiAnbW9udCcsCiAgcHJpbWU6ICdwMjU1MTknLAogIHA6ICc3ZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmVkJywKICBhOiAnNzZkMDYnLAogIGI6ICcwJywKICBuOiAnMTAwMDAwMDAwMDAwMDAwMCAwMDAwMDAwMDAwMDAwMDAwIDE0ZGVmOWRlYTJmNzljZDYgNTgxMjYzMWE1Y2Y1ZDNlZCcsCiAgaGFzaDogaGFzaC5zaGEyNTYsCiAgZ1JlZDogZmFsc2UsCiAgZzogWwogICAgJzknCiAgXQp9KTsKCmRlZmluZUN1cnZlKCdlZDI1NTE5JywgewogIHR5cGU6ICdlZHdhcmRzJywKICBwcmltZTogJ3AyNTUxOScsCiAgcDogJzdmZmZmZmZmZmZmZmZmZmYgZmZmZmZmZmZmZmZmZmZmZiBmZmZmZmZmZmZmZmZmZmZmIGZmZmZmZmZmZmZmZmZmZWQnLAogIGE6ICctMScsCiAgYzogJzEnLAogIC8vIC0xMjE2NjUgKiAoMTIxNjY2XigtMSkpIChtb2QgUCkKICBkOiAnNTIwMzZjZWUyYjZmZmU3MyA4Y2M3NDA3OTc3NzllODk4IDAwNzAwYTRkNDE0MWQ4YWIgNzVlYjRkY2ExMzU5NzhhMycsCiAgbjogJzEwMDAwMDAwMDAwMDAwMDAgMDAwMDAwMDAwMDAwMDAwMCAxNGRlZjlkZWEyZjc5Y2Q2IDU4MTI2MzFhNWNmNWQzZWQnLAogIGhhc2g6IGhhc2guc2hhMjU2LAogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICcyMTY5MzZkM2NkNmU1M2ZlYzBhNGUyMzFmZGQ2ZGM1YzY5MmNjNzYwOTUyNWE3YjJjOTU2MmQ2MDhmMjVkNTFhJywKCiAgICAvLyA0LzUKICAgICc2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjU4JwogIF0KfSk7Cgp2YXIgcHJlOwp0cnkgewogIHByZSA9IHJlcXVpcmUoJy4vcHJlY29tcHV0ZWQvc2VjcDI1NmsxJyk7Cn0gY2F0Y2ggKGUpIHsKICBwcmUgPSB1bmRlZmluZWQ7Cn0KCmRlZmluZUN1cnZlKCdzZWNwMjU2azEnLCB7CiAgdHlwZTogJ3Nob3J0JywKICBwcmltZTogJ2syNTYnLAogIHA6ICdmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZiBmZmZmZmZmZSBmZmZmZmMyZicsCiAgYTogJzAnLAogIGI6ICc3JywKICBuOiAnZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmYgZmZmZmZmZmUgYmFhZWRjZTYgYWY0OGEwM2IgYmZkMjVlOGMgZDAzNjQxNDEnLAogIGg6ICcxJywKICBoYXNoOiBoYXNoLnNoYTI1NiwKCiAgLy8gUHJlY29tcHV0ZWQgZW5kb21vcnBoaXNtCiAgYmV0YTogJzdhZTk2YTJiNjU3YzA3MTA2ZTY0NDc5ZWFjMzQzNGU5OWNmMDQ5NzUxMmY1ODk5NWMxMzk2YzI4NzE5NTAxZWUnLAogIGxhbWJkYTogJzUzNjNhZDRjYzA1YzMwZTBhNTI2MWMwMjg4MTI2NDVhMTIyZTIyZWEyMDgxNjY3OGRmMDI5NjdjMWIyM2JkNzInLAogIGJhc2lzOiBbCiAgICB7CiAgICAgIGE6ICczMDg2ZDIyMWE3ZDQ2YmNkZTg2YzkwZTQ5Mjg0ZWIxNScsCiAgICAgIGI6ICctZTQ0MzdlZDYwMTBlODgyODZmNTQ3ZmE5MGFiZmU0YzMnCiAgICB9LAogICAgewogICAgICBhOiAnMTE0Y2E1MGY3YThlMmYzZjY1N2MxMTA4ZDlkNDRjZmQ4JywKICAgICAgYjogJzMwODZkMjIxYTdkNDZiY2RlODZjOTBlNDkyODRlYjE1JwogICAgfQogIF0sCgogIGdSZWQ6IGZhbHNlLAogIGc6IFsKICAgICc3OWJlNjY3ZWY5ZGNiYmFjNTVhMDYyOTVjZTg3MGIwNzAyOWJmY2RiMmRjZTI4ZDk1OWYyODE1YjE2ZjgxNzk4JywKICAgICc0ODNhZGE3NzI2YTNjNDY1NWRhNGZiZmMwZTExMDhhOGZkMTdiNDQ4YTY4NTU0MTk5YzQ3ZDA4ZmZiMTBkNGI4JywKICAgIHByZQogIF0KfSk7Cgp9LHsiLi4vZWxsaXB0aWMiOjEwMiwiLi9wcmVjb21wdXRlZC9zZWNwMjU2azEiOjExNiwiaGFzaC5qcyI6MTIwfV0sMTA5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7Cgp2YXIgS2V5UGFpciA9IHJlcXVpcmUoJy4va2V5Jyk7CnZhciBTaWduYXR1cmUgPSByZXF1aXJlKCcuL3NpZ25hdHVyZScpOwoKZnVuY3Rpb24gRUMob3B0aW9ucykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBFQykpCiAgICByZXR1cm4gbmV3IEVDKG9wdGlvbnMpOwoKICAvLyBTaG9ydGN1dCBgZWxsaXB0aWMuZWMoY3VydmUtbmFtZSlgCiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgYXNzZXJ0KGVsbGlwdGljLmN1cnZlcy5oYXNPd25Qcm9wZXJ0eShvcHRpb25zKSwgJ1Vua25vd24gY3VydmUgJyArIG9wdGlvbnMpOwoKICAgIG9wdGlvbnMgPSBlbGxpcHRpYy5jdXJ2ZXNbb3B0aW9uc107CiAgfQoKICAvLyBTaG9ydGN1dCBmb3IgYGVsbGlwdGljLmVjKGVsbGlwdGljLmN1cnZlcy5jdXJ2ZU5hbWUpYAogIGlmIChvcHRpb25zIGluc3RhbmNlb2YgZWxsaXB0aWMuY3VydmVzLlByZXNldEN1cnZlKQogICAgb3B0aW9ucyA9IHsgY3VydmU6IG9wdGlvbnMgfTsKCiAgdGhpcy5jdXJ2ZSA9IG9wdGlvbnMuY3VydmUuY3VydmU7CiAgdGhpcy5uID0gdGhpcy5jdXJ2ZS5uOwogIHRoaXMubmggPSB0aGlzLm4udXNocm4oMSk7CiAgdGhpcy5nID0gdGhpcy5jdXJ2ZS5nOwoKICAvLyBQb2ludCBvbiBjdXJ2ZQogIHRoaXMuZyA9IG9wdGlvbnMuY3VydmUuZzsKICB0aGlzLmcucHJlY29tcHV0ZShvcHRpb25zLmN1cnZlLm4uYml0TGVuZ3RoKCkgKyAxKTsKCiAgLy8gSGFzaCBmb3IgZnVuY3Rpb24gZm9yIERSQkcKICB0aGlzLmhhc2ggPSBvcHRpb25zLmhhc2ggfHwgb3B0aW9ucy5jdXJ2ZS5oYXNoOwp9Cm1vZHVsZS5leHBvcnRzID0gRUM7CgpFQy5wcm90b3R5cGUua2V5UGFpciA9IGZ1bmN0aW9uIGtleVBhaXIob3B0aW9ucykgewogIHJldHVybiBuZXcgS2V5UGFpcih0aGlzLCBvcHRpb25zKTsKfTsKCkVDLnByb3RvdHlwZS5rZXlGcm9tUHJpdmF0ZSA9IGZ1bmN0aW9uIGtleUZyb21Qcml2YXRlKHByaXYsIGVuYykgewogIHJldHVybiBLZXlQYWlyLmZyb21Qcml2YXRlKHRoaXMsIHByaXYsIGVuYyk7Cn07CgpFQy5wcm90b3R5cGUua2V5RnJvbVB1YmxpYyA9IGZ1bmN0aW9uIGtleUZyb21QdWJsaWMocHViLCBlbmMpIHsKICByZXR1cm4gS2V5UGFpci5mcm9tUHVibGljKHRoaXMsIHB1YiwgZW5jKTsKfTsKCkVDLnByb3RvdHlwZS5nZW5LZXlQYWlyID0gZnVuY3Rpb24gZ2VuS2V5UGFpcihvcHRpb25zKSB7CiAgaWYgKCFvcHRpb25zKQogICAgb3B0aW9ucyA9IHt9OwoKICAvLyBJbnN0YW50aWF0ZSBIbWFjX0RSQkcKICB2YXIgZHJiZyA9IG5ldyBlbGxpcHRpYy5obWFjRFJCRyh7CiAgICBoYXNoOiB0aGlzLmhhc2gsCiAgICBwZXJzOiBvcHRpb25zLnBlcnMsCiAgICBlbnRyb3B5OiBvcHRpb25zLmVudHJvcHkgfHwgZWxsaXB0aWMucmFuZCh0aGlzLmhhc2guaG1hY1N0cmVuZ3RoKSwKICAgIG5vbmNlOiB0aGlzLm4udG9BcnJheSgpCiAgfSk7CgogIHZhciBieXRlcyA9IHRoaXMubi5ieXRlTGVuZ3RoKCk7CiAgdmFyIG5zMiA9IHRoaXMubi5zdWIobmV3IEJOKDIpKTsKICBkbyB7CiAgICB2YXIgcHJpdiA9IG5ldyBCTihkcmJnLmdlbmVyYXRlKGJ5dGVzKSk7CiAgICBpZiAocHJpdi5jbXAobnMyKSA+IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIHByaXYuaWFkZG4oMSk7CiAgICByZXR1cm4gdGhpcy5rZXlGcm9tUHJpdmF0ZShwcml2KTsKICB9IHdoaWxlICh0cnVlKTsKfTsKCkVDLnByb3RvdHlwZS5fdHJ1bmNhdGVUb04gPSBmdW5jdGlvbiB0cnVuY2F0ZVRvTihtc2csIHRydW5jT25seSkgewogIHZhciBkZWx0YSA9IG1zZy5ieXRlTGVuZ3RoKCkgKiA4IC0gdGhpcy5uLmJpdExlbmd0aCgpOwogIGlmIChkZWx0YSA+IDApCiAgICBtc2cgPSBtc2cudXNocm4oZGVsdGEpOwogIGlmICghdHJ1bmNPbmx5ICYmIG1zZy5jbXAodGhpcy5uKSA+PSAwKQogICAgcmV0dXJuIG1zZy5zdWIodGhpcy5uKTsKICBlbHNlCiAgICByZXR1cm4gbXNnOwp9OwoKRUMucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbiBzaWduKG1zZywga2V5LCBlbmMsIG9wdGlvbnMpIHsKICBpZiAodHlwZW9mIGVuYyA9PT0gJ29iamVjdCcpIHsKICAgIG9wdGlvbnMgPSBlbmM7CiAgICBlbmMgPSBudWxsOwogIH0KICBpZiAoIW9wdGlvbnMpCiAgICBvcHRpb25zID0ge307CgogIGtleSA9IHRoaXMua2V5RnJvbVByaXZhdGUoa2V5LCBlbmMpOwogIG1zZyA9IHRoaXMuX3RydW5jYXRlVG9OKG5ldyBCTihtc2csIDE2KSk7CgogIC8vIFplcm8tZXh0ZW5kIGtleSB0byBwcm92aWRlIGVub3VnaCBlbnRyb3B5CiAgdmFyIGJ5dGVzID0gdGhpcy5uLmJ5dGVMZW5ndGgoKTsKICB2YXIgYmtleSA9IGtleS5nZXRQcml2YXRlKCkudG9BcnJheSgnYmUnLCBieXRlcyk7CgogIC8vIFplcm8tZXh0ZW5kIG5vbmNlIHRvIGhhdmUgdGhlIHNhbWUgYnl0ZSBzaXplIGFzIE4KICB2YXIgbm9uY2UgPSBtc2cudG9BcnJheSgnYmUnLCBieXRlcyk7CgogIC8vIEluc3RhbnRpYXRlIEhtYWNfRFJCRwogIHZhciBkcmJnID0gbmV3IGVsbGlwdGljLmhtYWNEUkJHKHsKICAgIGhhc2g6IHRoaXMuaGFzaCwKICAgIGVudHJvcHk6IGJrZXksCiAgICBub25jZTogbm9uY2UsCiAgICBwZXJzOiBvcHRpb25zLnBlcnMsCiAgICBwZXJzRW5jOiBvcHRpb25zLnBlcnNFbmMKICB9KTsKCiAgLy8gTnVtYmVyIG9mIGJ5dGVzIHRvIGdlbmVyYXRlCiAgdmFyIG5zMSA9IHRoaXMubi5zdWIobmV3IEJOKDEpKTsKCiAgZm9yICh2YXIgaXRlciA9IDA7IHRydWU7IGl0ZXIrKykgewogICAgdmFyIGsgPSBvcHRpb25zLmsgPwogICAgICAgIG9wdGlvbnMuayhpdGVyKSA6CiAgICAgICAgbmV3IEJOKGRyYmcuZ2VuZXJhdGUodGhpcy5uLmJ5dGVMZW5ndGgoKSkpOwogICAgayA9IHRoaXMuX3RydW5jYXRlVG9OKGssIHRydWUpOwogICAgaWYgKGsuY21wbigxKSA8PSAwIHx8IGsuY21wKG5zMSkgPj0gMCkKICAgICAgY29udGludWU7CgogICAgdmFyIGtwID0gdGhpcy5nLm11bChrKTsKICAgIGlmIChrcC5pc0luZmluaXR5KCkpCiAgICAgIGNvbnRpbnVlOwoKICAgIHZhciBrcFggPSBrcC5nZXRYKCk7CiAgICB2YXIgciA9IGtwWC51bW9kKHRoaXMubik7CiAgICBpZiAoci5jbXBuKDApID09PSAwKQogICAgICBjb250aW51ZTsKCiAgICB2YXIgcyA9IGsuaW52bSh0aGlzLm4pLm11bChyLm11bChrZXkuZ2V0UHJpdmF0ZSgpKS5pYWRkKG1zZykpOwogICAgcyA9IHMudW1vZCh0aGlzLm4pOwogICAgaWYgKHMuY21wbigwKSA9PT0gMCkKICAgICAgY29udGludWU7CgogICAgdmFyIHJlY292ZXJ5UGFyYW0gPSAoa3AuZ2V0WSgpLmlzT2RkKCkgPyAxIDogMCkgfAogICAgICAgICAgICAgICAgICAgICAgICAoa3BYLmNtcChyKSAhPT0gMCA/IDIgOiAwKTsKCiAgICAvLyBVc2UgY29tcGxlbWVudCBvZiBgc2AsIGlmIGl0IGlzID4gYG4gLyAyYAogICAgaWYgKG9wdGlvbnMuY2Fub25pY2FsICYmIHMuY21wKHRoaXMubmgpID4gMCkgewogICAgICBzID0gdGhpcy5uLnN1YihzKTsKICAgICAgcmVjb3ZlcnlQYXJhbSBePSAxOwogICAgfQoKICAgIHJldHVybiBuZXcgU2lnbmF0dXJlKHsgcjogciwgczogcywgcmVjb3ZlcnlQYXJhbTogcmVjb3ZlcnlQYXJhbSB9KTsKICB9Cn07CgpFQy5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1zZywgc2lnbmF0dXJlLCBrZXksIGVuYykgewogIG1zZyA9IHRoaXMuX3RydW5jYXRlVG9OKG5ldyBCTihtc2csIDE2KSk7CiAga2V5ID0gdGhpcy5rZXlGcm9tUHVibGljKGtleSwgZW5jKTsKICBzaWduYXR1cmUgPSBuZXcgU2lnbmF0dXJlKHNpZ25hdHVyZSwgJ2hleCcpOwoKICAvLyBQZXJmb3JtIHByaW1pdGl2ZSB2YWx1ZXMgdmFsaWRhdGlvbgogIHZhciByID0gc2lnbmF0dXJlLnI7CiAgdmFyIHMgPSBzaWduYXR1cmUuczsKICBpZiAoci5jbXBuKDEpIDwgMCB8fCByLmNtcCh0aGlzLm4pID49IDApCiAgICByZXR1cm4gZmFsc2U7CiAgaWYgKHMuY21wbigxKSA8IDAgfHwgcy5jbXAodGhpcy5uKSA+PSAwKQogICAgcmV0dXJuIGZhbHNlOwoKICAvLyBWYWxpZGF0ZSBzaWduYXR1cmUKICB2YXIgc2ludiA9IHMuaW52bSh0aGlzLm4pOwogIHZhciB1MSA9IHNpbnYubXVsKG1zZykudW1vZCh0aGlzLm4pOwogIHZhciB1MiA9IHNpbnYubXVsKHIpLnVtb2QodGhpcy5uKTsKCiAgdmFyIHAgPSB0aGlzLmcubXVsQWRkKHUxLCBrZXkuZ2V0UHVibGljKCksIHUyKTsKICBpZiAocC5pc0luZmluaXR5KCkpCiAgICByZXR1cm4gZmFsc2U7CgogIHJldHVybiBwLmdldFgoKS51bW9kKHRoaXMubikuY21wKHIpID09PSAwOwp9OwoKRUMucHJvdG90eXBlLnJlY292ZXJQdWJLZXkgPSBmdW5jdGlvbihtc2csIHNpZ25hdHVyZSwgaiwgZW5jKSB7CiAgYXNzZXJ0KCgzICYgaikgPT09IGosICdUaGUgcmVjb3ZlcnkgcGFyYW0gaXMgbW9yZSB0aGFuIHR3byBiaXRzJyk7CiAgc2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZShzaWduYXR1cmUsIGVuYyk7CgogIHZhciBuID0gdGhpcy5uOwogIHZhciBlID0gbmV3IEJOKG1zZyk7CiAgdmFyIHIgPSBzaWduYXR1cmUucjsKICB2YXIgcyA9IHNpZ25hdHVyZS5zOwoKICAvLyBBIHNldCBMU0Igc2lnbmlmaWVzIHRoYXQgdGhlIHktY29vcmRpbmF0ZSBpcyBvZGQKICB2YXIgaXNZT2RkID0gaiAmIDE7CiAgdmFyIGlzU2Vjb25kS2V5ID0gaiA+PiAxOwogIGlmIChyLmNtcCh0aGlzLmN1cnZlLnAudW1vZCh0aGlzLmN1cnZlLm4pKSA+PSAwICYmIGlzU2Vjb25kS2V5KQogICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmluZCBzZW5jb25kIGtleSBjYW5kaW5hdGUnKTsKCiAgLy8gMS4xLiBMZXQgeCA9IHIgKyBqbi4KICBpZiAoaXNTZWNvbmRLZXkpCiAgICByID0gdGhpcy5jdXJ2ZS5wb2ludEZyb21YKHIuYWRkKHRoaXMuY3VydmUubiksIGlzWU9kZCk7CiAgZWxzZQogICAgciA9IHRoaXMuY3VydmUucG9pbnRGcm9tWChyLCBpc1lPZGQpOwoKICB2YXIgZU5lZyA9IG4uc3ViKGUpOwoKICAvLyAxLjYuMSBDb21wdXRlIFEgPSByXi0xIChzUiAtICBlRykKICAvLyAgICAgICAgICAgICAgIFEgPSByXi0xIChzUiArIC1lRykKICB2YXIgckludiA9IHNpZ25hdHVyZS5yLmludm0obik7CiAgcmV0dXJuIHRoaXMuZy5tdWxBZGQoZU5lZywgciwgcykubXVsKHJJbnYpOwp9OwoKRUMucHJvdG90eXBlLmdldEtleVJlY292ZXJ5UGFyYW0gPSBmdW5jdGlvbihlLCBzaWduYXR1cmUsIFEsIGVuYykgewogIHNpZ25hdHVyZSA9IG5ldyBTaWduYXR1cmUoc2lnbmF0dXJlLCBlbmMpOwogIGlmIChzaWduYXR1cmUucmVjb3ZlcnlQYXJhbSAhPT0gbnVsbCkKICAgIHJldHVybiBzaWduYXR1cmUucmVjb3ZlcnlQYXJhbTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIHZhciBRcHJpbWU7CiAgICB0cnkgewogICAgICBRcHJpbWUgPSB0aGlzLnJlY292ZXJQdWJLZXkoZSwgc2lnbmF0dXJlLCBpKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgY29udGludWU7CiAgICB9CgogICAgaWYgKFFwcmltZS5lcShRKSkKICAgICAgcmV0dXJuIGk7CiAgfQogIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpbmQgdmFsaWQgcmVjb3ZlcnkgZmFjdG9yJyk7Cn07Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMiwiLi9rZXkiOjExMCwiLi9zaWduYXR1cmUiOjExMSwiYm4uanMiOjQxfV0sMTEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKCmZ1bmN0aW9uIEtleVBhaXIoZWMsIG9wdGlvbnMpIHsKICB0aGlzLmVjID0gZWM7CiAgdGhpcy5wcml2ID0gbnVsbDsKICB0aGlzLnB1YiA9IG51bGw7CgogIC8vIEtleVBhaXIoZWMsIHsgcHJpdjogLi4uLCBwdWI6IC4uLiB9KQogIGlmIChvcHRpb25zLnByaXYpCiAgICB0aGlzLl9pbXBvcnRQcml2YXRlKG9wdGlvbnMucHJpdiwgb3B0aW9ucy5wcml2RW5jKTsKICBpZiAob3B0aW9ucy5wdWIpCiAgICB0aGlzLl9pbXBvcnRQdWJsaWMob3B0aW9ucy5wdWIsIG9wdGlvbnMucHViRW5jKTsKfQptb2R1bGUuZXhwb3J0cyA9IEtleVBhaXI7CgpLZXlQYWlyLmZyb21QdWJsaWMgPSBmdW5jdGlvbiBmcm9tUHVibGljKGVjLCBwdWIsIGVuYykgewogIGlmIChwdWIgaW5zdGFuY2VvZiBLZXlQYWlyKQogICAgcmV0dXJuIHB1YjsKCiAgcmV0dXJuIG5ldyBLZXlQYWlyKGVjLCB7CiAgICBwdWI6IHB1YiwKICAgIHB1YkVuYzogZW5jCiAgfSk7Cn07CgpLZXlQYWlyLmZyb21Qcml2YXRlID0gZnVuY3Rpb24gZnJvbVByaXZhdGUoZWMsIHByaXYsIGVuYykgewogIGlmIChwcml2IGluc3RhbmNlb2YgS2V5UGFpcikKICAgIHJldHVybiBwcml2OwoKICByZXR1cm4gbmV3IEtleVBhaXIoZWMsIHsKICAgIHByaXY6IHByaXYsCiAgICBwcml2RW5jOiBlbmMKICB9KTsKfTsKCktleVBhaXIucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgdmFyIHB1YiA9IHRoaXMuZ2V0UHVibGljKCk7CgogIGlmIChwdWIuaXNJbmZpbml0eSgpKQogICAgcmV0dXJuIHsgcmVzdWx0OiBmYWxzZSwgcmVhc29uOiAnSW52YWxpZCBwdWJsaWMga2V5JyB9OwogIGlmICghcHViLnZhbGlkYXRlKCkpCiAgICByZXR1cm4geyByZXN1bHQ6IGZhbHNlLCByZWFzb246ICdQdWJsaWMga2V5IGlzIG5vdCBhIHBvaW50JyB9OwogIGlmICghcHViLm11bCh0aGlzLmVjLmN1cnZlLm4pLmlzSW5maW5pdHkoKSkKICAgIHJldHVybiB7IHJlc3VsdDogZmFsc2UsIHJlYXNvbjogJ1B1YmxpYyBrZXkgKiBOICE9IE8nIH07CgogIHJldHVybiB7IHJlc3VsdDogdHJ1ZSwgcmVhc29uOiBudWxsIH07Cn07CgpLZXlQYWlyLnByb3RvdHlwZS5nZXRQdWJsaWMgPSBmdW5jdGlvbiBnZXRQdWJsaWMoY29tcGFjdCwgZW5jKSB7CiAgLy8gY29tcGFjdCBpcyBvcHRpb25hbCBhcmd1bWVudAogIGlmICh0eXBlb2YgY29tcGFjdCA9PT0gJ3N0cmluZycpIHsKICAgIGVuYyA9IGNvbXBhY3Q7CiAgICBjb21wYWN0ID0gbnVsbDsKICB9CgogIGlmICghdGhpcy5wdWIpCiAgICB0aGlzLnB1YiA9IHRoaXMuZWMuZy5tdWwodGhpcy5wcml2KTsKCiAgaWYgKCFlbmMpCiAgICByZXR1cm4gdGhpcy5wdWI7CgogIHJldHVybiB0aGlzLnB1Yi5lbmNvZGUoZW5jLCBjb21wYWN0KTsKfTsKCktleVBhaXIucHJvdG90eXBlLmdldFByaXZhdGUgPSBmdW5jdGlvbiBnZXRQcml2YXRlKGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHRoaXMucHJpdi50b1N0cmluZygxNiwgMik7CiAgZWxzZQogICAgcmV0dXJuIHRoaXMucHJpdjsKfTsKCktleVBhaXIucHJvdG90eXBlLl9pbXBvcnRQcml2YXRlID0gZnVuY3Rpb24gX2ltcG9ydFByaXZhdGUoa2V5LCBlbmMpIHsKICB0aGlzLnByaXYgPSBuZXcgQk4oa2V5LCBlbmMgfHwgMTYpOwoKICAvLyBFbnN1cmUgdGhhdCB0aGUgcHJpdiB3b24ndCBiZSBiaWdnZXIgdGhhbiBuLCBvdGhlcndpc2Ugd2UgbWF5IGZhaWwKICAvLyBpbiBmaXhlZCBtdWx0aXBsaWNhdGlvbiBtZXRob2QKICB0aGlzLnByaXYgPSB0aGlzLnByaXYudW1vZCh0aGlzLmVjLmN1cnZlLm4pOwp9OwoKS2V5UGFpci5wcm90b3R5cGUuX2ltcG9ydFB1YmxpYyA9IGZ1bmN0aW9uIF9pbXBvcnRQdWJsaWMoa2V5LCBlbmMpIHsKICBpZiAoa2V5LnggfHwga2V5LnkpIHsKICAgIHRoaXMucHViID0gdGhpcy5lYy5jdXJ2ZS5wb2ludChrZXkueCwga2V5LnkpOwogICAgcmV0dXJuOwogIH0KICB0aGlzLnB1YiA9IHRoaXMuZWMuY3VydmUuZGVjb2RlUG9pbnQoa2V5LCBlbmMpOwp9OwoKLy8gRUNESApLZXlQYWlyLnByb3RvdHlwZS5kZXJpdmUgPSBmdW5jdGlvbiBkZXJpdmUocHViKSB7CiAgcmV0dXJuIHB1Yi5tdWwodGhpcy5wcml2KS5nZXRYKCk7Cn07CgovLyBFQ0RTQQpLZXlQYWlyLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtc2csIGVuYywgb3B0aW9ucykgewogIHJldHVybiB0aGlzLmVjLnNpZ24obXNnLCB0aGlzLCBlbmMsIG9wdGlvbnMpOwp9OwoKS2V5UGFpci5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KG1zZywgc2lnbmF0dXJlKSB7CiAgcmV0dXJuIHRoaXMuZWMudmVyaWZ5KG1zZywgc2lnbmF0dXJlLCB0aGlzKTsKfTsKCktleVBhaXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0KCkgewogIHJldHVybiAnPEtleSBwcml2OiAnICsgKHRoaXMucHJpdiAmJiB0aGlzLnByaXYudG9TdHJpbmcoMTYsIDIpKSArCiAgICAgICAgICcgcHViOiAnICsgKHRoaXMucHViICYmIHRoaXMucHViLmluc3BlY3QoKSkgKyAnID4nOwp9OwoKfSx7ImJuLmpzIjo0MX1dLDExMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBCTiA9IHJlcXVpcmUoJ2JuLmpzJyk7Cgp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgdXRpbHMgPSBlbGxpcHRpYy51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKCmZ1bmN0aW9uIFNpZ25hdHVyZShvcHRpb25zLCBlbmMpIHsKICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIFNpZ25hdHVyZSkKICAgIHJldHVybiBvcHRpb25zOwoKICBpZiAodGhpcy5faW1wb3J0REVSKG9wdGlvbnMsIGVuYykpCiAgICByZXR1cm47CgogIGFzc2VydChvcHRpb25zLnIgJiYgb3B0aW9ucy5zLCAnU2lnbmF0dXJlIHdpdGhvdXQgciBvciBzJyk7CiAgdGhpcy5yID0gbmV3IEJOKG9wdGlvbnMuciwgMTYpOwogIHRoaXMucyA9IG5ldyBCTihvcHRpb25zLnMsIDE2KTsKICBpZiAob3B0aW9ucy5yZWNvdmVyeVBhcmFtID09PSB1bmRlZmluZWQpCiAgICB0aGlzLnJlY292ZXJ5UGFyYW0gPSBudWxsOwogIGVsc2UKICAgIHRoaXMucmVjb3ZlcnlQYXJhbSA9IG9wdGlvbnMucmVjb3ZlcnlQYXJhbTsKfQptb2R1bGUuZXhwb3J0cyA9IFNpZ25hdHVyZTsKCmZ1bmN0aW9uIFBvc2l0aW9uKCkgewogIHRoaXMucGxhY2UgPSAwOwp9CgpmdW5jdGlvbiBnZXRMZW5ndGgoYnVmLCBwKSB7CiAgdmFyIGluaXRpYWwgPSBidWZbcC5wbGFjZSsrXTsKICBpZiAoIShpbml0aWFsICYgMHg4MCkpIHsKICAgIHJldHVybiBpbml0aWFsOwogIH0KICB2YXIgb2N0ZXRMZW4gPSBpbml0aWFsICYgMHhmOwogIHZhciB2YWwgPSAwOwogIGZvciAodmFyIGkgPSAwLCBvZmYgPSBwLnBsYWNlOyBpIDwgb2N0ZXRMZW47IGkrKywgb2ZmKyspIHsKICAgIHZhbCA8PD0gODsKICAgIHZhbCB8PSBidWZbb2ZmXTsKICB9CiAgcC5wbGFjZSA9IG9mZjsKICByZXR1cm4gdmFsOwp9CgpmdW5jdGlvbiBybVBhZGRpbmcoYnVmKSB7CiAgdmFyIGkgPSAwOwogIHZhciBsZW4gPSBidWYubGVuZ3RoIC0gMTsKICB3aGlsZSAoIWJ1ZltpXSAmJiAhKGJ1ZltpICsgMV0gJiAweDgwKSAmJiBpIDwgbGVuKSB7CiAgICBpKys7CiAgfQogIGlmIChpID09PSAwKSB7CiAgICByZXR1cm4gYnVmOwogIH0KICByZXR1cm4gYnVmLnNsaWNlKGkpOwp9CgpTaWduYXR1cmUucHJvdG90eXBlLl9pbXBvcnRERVIgPSBmdW5jdGlvbiBfaW1wb3J0REVSKGRhdGEsIGVuYykgewogIGRhdGEgPSB1dGlscy50b0FycmF5KGRhdGEsIGVuYyk7CiAgdmFyIHAgPSBuZXcgUG9zaXRpb24oKTsKICBpZiAoZGF0YVtwLnBsYWNlKytdICE9PSAweDMwKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHZhciBsZW4gPSBnZXRMZW5ndGgoZGF0YSwgcCk7CiAgaWYgKChsZW4gKyBwLnBsYWNlKSAhPT0gZGF0YS5sZW5ndGgpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgaWYgKGRhdGFbcC5wbGFjZSsrXSAhPT0gMHgwMikgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgcmxlbiA9IGdldExlbmd0aChkYXRhLCBwKTsKICB2YXIgciA9IGRhdGEuc2xpY2UocC5wbGFjZSwgcmxlbiArIHAucGxhY2UpOwogIHAucGxhY2UgKz0gcmxlbjsKICBpZiAoZGF0YVtwLnBsYWNlKytdICE9PSAweDAyKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHZhciBzbGVuID0gZ2V0TGVuZ3RoKGRhdGEsIHApOwogIGlmIChkYXRhLmxlbmd0aCAhPT0gc2xlbiArIHAucGxhY2UpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdmFyIHMgPSBkYXRhLnNsaWNlKHAucGxhY2UsIHNsZW4gKyBwLnBsYWNlKTsKICBpZiAoclswXSA9PT0gMCAmJiAoclsxXSAmIDB4ODApKSB7CiAgICByID0gci5zbGljZSgxKTsKICB9CiAgaWYgKHNbMF0gPT09IDAgJiYgKHNbMV0gJiAweDgwKSkgewogICAgcyA9IHMuc2xpY2UoMSk7CiAgfQoKICB0aGlzLnIgPSBuZXcgQk4ocik7CiAgdGhpcy5zID0gbmV3IEJOKHMpOwogIHRoaXMucmVjb3ZlcnlQYXJhbSA9IG51bGw7CgogIHJldHVybiB0cnVlOwp9OwoKZnVuY3Rpb24gY29uc3RydWN0TGVuZ3RoKGFyciwgbGVuKSB7CiAgaWYgKGxlbiA8IDB4ODApIHsKICAgIGFyci5wdXNoKGxlbik7CiAgICByZXR1cm47CiAgfQogIHZhciBvY3RldHMgPSAxICsgKE1hdGgubG9nKGxlbikgLyBNYXRoLkxOMiA+Pj4gMyk7CiAgYXJyLnB1c2gob2N0ZXRzIHwgMHg4MCk7CiAgd2hpbGUgKC0tb2N0ZXRzKSB7CiAgICBhcnIucHVzaCgobGVuID4+PiAob2N0ZXRzIDw8IDMpKSAmIDB4ZmYpOwogIH0KICBhcnIucHVzaChsZW4pOwp9CgpTaWduYXR1cmUucHJvdG90eXBlLnRvREVSID0gZnVuY3Rpb24gdG9ERVIoZW5jKSB7CiAgdmFyIHIgPSB0aGlzLnIudG9BcnJheSgpOwogIHZhciBzID0gdGhpcy5zLnRvQXJyYXkoKTsKCiAgLy8gUGFkIHZhbHVlcwogIGlmIChyWzBdICYgMHg4MCkKICAgIHIgPSBbIDAgXS5jb25jYXQocik7CiAgLy8gUGFkIHZhbHVlcwogIGlmIChzWzBdICYgMHg4MCkKICAgIHMgPSBbIDAgXS5jb25jYXQocyk7CgogIHIgPSBybVBhZGRpbmcocik7CiAgcyA9IHJtUGFkZGluZyhzKTsKCiAgd2hpbGUgKCFzWzBdICYmICEoc1sxXSAmIDB4ODApKSB7CiAgICBzID0gcy5zbGljZSgxKTsKICB9CiAgdmFyIGFyciA9IFsgMHgwMiBdOwogIGNvbnN0cnVjdExlbmd0aChhcnIsIHIubGVuZ3RoKTsKICBhcnIgPSBhcnIuY29uY2F0KHIpOwogIGFyci5wdXNoKDB4MDIpOwogIGNvbnN0cnVjdExlbmd0aChhcnIsIHMubGVuZ3RoKTsKICB2YXIgYmFja0hhbGYgPSBhcnIuY29uY2F0KHMpOwogIHZhciByZXMgPSBbIDB4MzAgXTsKICBjb25zdHJ1Y3RMZW5ndGgocmVzLCBiYWNrSGFsZi5sZW5ndGgpOwogIHJlcyA9IHJlcy5jb25jYXQoYmFja0hhbGYpOwogIHJldHVybiB1dGlscy5lbmNvZGUocmVzLCBlbmMpOwp9OwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDIsImJuLmpzIjo0MX1dLDExMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBoYXNoID0gcmVxdWlyZSgnaGFzaC5qcycpOwp2YXIgZWxsaXB0aWMgPSByZXF1aXJlKCcuLi8uLi9lbGxpcHRpYycpOwp2YXIgdXRpbHMgPSBlbGxpcHRpYy51dGlsczsKdmFyIGFzc2VydCA9IHV0aWxzLmFzc2VydDsKdmFyIHBhcnNlQnl0ZXMgPSB1dGlscy5wYXJzZUJ5dGVzOwp2YXIgS2V5UGFpciA9IHJlcXVpcmUoJy4va2V5Jyk7CnZhciBTaWduYXR1cmUgPSByZXF1aXJlKCcuL3NpZ25hdHVyZScpOwoKZnVuY3Rpb24gRUREU0EoY3VydmUpIHsKICBhc3NlcnQoY3VydmUgPT09ICdlZDI1NTE5JywgJ29ubHkgdGVzdGVkIHdpdGggZWQyNTUxOSBzbyBmYXInKTsKCiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEVERFNBKSkKICAgIHJldHVybiBuZXcgRUREU0EoY3VydmUpOwoKICB2YXIgY3VydmUgPSBlbGxpcHRpYy5jdXJ2ZXNbY3VydmVdLmN1cnZlOwogIHRoaXMuY3VydmUgPSBjdXJ2ZTsKICB0aGlzLmcgPSBjdXJ2ZS5nOwogIHRoaXMuZy5wcmVjb21wdXRlKGN1cnZlLm4uYml0TGVuZ3RoKCkgKyAxKTsKCiAgdGhpcy5wb2ludENsYXNzID0gY3VydmUucG9pbnQoKS5jb25zdHJ1Y3RvcjsKICB0aGlzLmVuY29kaW5nTGVuZ3RoID0gTWF0aC5jZWlsKGN1cnZlLm4uYml0TGVuZ3RoKCkgLyA4KTsKICB0aGlzLmhhc2ggPSBoYXNoLnNoYTUxMjsKfQoKbW9kdWxlLmV4cG9ydHMgPSBFRERTQTsKCi8qKgoqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBtZXNzYWdlIC0gbWVzc2FnZSBieXRlcwoqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfEtleVBhaXJ9IHNlY3JldCAtIHNlY3JldCBieXRlcyBvciBhIGtleXBhaXIKKiBAcmV0dXJucyB7U2lnbmF0dXJlfSAtIHNpZ25hdHVyZQoqLwpFRERTQS5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uIHNpZ24obWVzc2FnZSwgc2VjcmV0KSB7CiAgbWVzc2FnZSA9IHBhcnNlQnl0ZXMobWVzc2FnZSk7CiAgdmFyIGtleSA9IHRoaXMua2V5RnJvbVNlY3JldChzZWNyZXQpOwogIHZhciByID0gdGhpcy5oYXNoSW50KGtleS5tZXNzYWdlUHJlZml4KCksIG1lc3NhZ2UpOwogIHZhciBSID0gdGhpcy5nLm11bChyKTsKICB2YXIgUmVuY29kZWQgPSB0aGlzLmVuY29kZVBvaW50KFIpOwogIHZhciBzXyA9IHRoaXMuaGFzaEludChSZW5jb2RlZCwga2V5LnB1YkJ5dGVzKCksIG1lc3NhZ2UpCiAgICAgICAgICAgICAgIC5tdWwoa2V5LnByaXYoKSk7CiAgdmFyIFMgPSByLmFkZChzXykudW1vZCh0aGlzLmN1cnZlLm4pOwogIHJldHVybiB0aGlzLm1ha2VTaWduYXR1cmUoeyBSOiBSLCBTOiBTLCBSZW5jb2RlZDogUmVuY29kZWQgfSk7Cn07CgovKioKKiBAcGFyYW0ge0FycmF5fSBtZXNzYWdlIC0gbWVzc2FnZSBieXRlcwoqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfFNpZ25hdHVyZX0gc2lnIC0gc2lnIGJ5dGVzCiogQHBhcmFtIHtBcnJheXxTdHJpbmd8UG9pbnR8S2V5UGFpcn0gcHViIC0gcHVibGljIGtleQoqIEByZXR1cm5zIHtCb29sZWFufSAtIHRydWUgaWYgcHVibGljIGtleSBtYXRjaGVzIHNpZyBvZiBtZXNzYWdlCiovCkVERFNBLnByb3RvdHlwZS52ZXJpZnkgPSBmdW5jdGlvbiB2ZXJpZnkobWVzc2FnZSwgc2lnLCBwdWIpIHsKICBtZXNzYWdlID0gcGFyc2VCeXRlcyhtZXNzYWdlKTsKICBzaWcgPSB0aGlzLm1ha2VTaWduYXR1cmUoc2lnKTsKICB2YXIga2V5ID0gdGhpcy5rZXlGcm9tUHVibGljKHB1Yik7CiAgdmFyIGggPSB0aGlzLmhhc2hJbnQoc2lnLlJlbmNvZGVkKCksIGtleS5wdWJCeXRlcygpLCBtZXNzYWdlKTsKICB2YXIgU0cgPSB0aGlzLmcubXVsKHNpZy5TKCkpOwogIHZhciBScGx1c0FoID0gc2lnLlIoKS5hZGQoa2V5LnB1YigpLm11bChoKSk7CiAgcmV0dXJuIFJwbHVzQWguZXEoU0cpOwp9OwoKRUREU0EucHJvdG90eXBlLmhhc2hJbnQgPSBmdW5jdGlvbiBoYXNoSW50KCkgewogIHZhciBoYXNoID0gdGhpcy5oYXNoKCk7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspCiAgICBoYXNoLnVwZGF0ZShhcmd1bWVudHNbaV0pOwogIHJldHVybiB1dGlscy5pbnRGcm9tTEUoaGFzaC5kaWdlc3QoKSkudW1vZCh0aGlzLmN1cnZlLm4pOwp9OwoKRUREU0EucHJvdG90eXBlLmtleUZyb21QdWJsaWMgPSBmdW5jdGlvbiBrZXlGcm9tUHVibGljKHB1YikgewogIHJldHVybiBLZXlQYWlyLmZyb21QdWJsaWModGhpcywgcHViKTsKfTsKCkVERFNBLnByb3RvdHlwZS5rZXlGcm9tU2VjcmV0ID0gZnVuY3Rpb24ga2V5RnJvbVNlY3JldChzZWNyZXQpIHsKICByZXR1cm4gS2V5UGFpci5mcm9tU2VjcmV0KHRoaXMsIHNlY3JldCk7Cn07CgpFRERTQS5wcm90b3R5cGUubWFrZVNpZ25hdHVyZSA9IGZ1bmN0aW9uIG1ha2VTaWduYXR1cmUoc2lnKSB7CiAgaWYgKHNpZyBpbnN0YW5jZW9mIFNpZ25hdHVyZSkKICAgIHJldHVybiBzaWc7CiAgcmV0dXJuIG5ldyBTaWduYXR1cmUodGhpcywgc2lnKTsKfTsKCi8qKgoqICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWpvc2Vmc3Nvbi1lZGRzYS1lZDI1NTE5LTAzI3NlY3Rpb24tNS4yCioKKiBFRERTQSBkZWZpbmVzIG1ldGhvZHMgZm9yIGVuY29kaW5nIGFuZCBkZWNvZGluZyBwb2ludHMgYW5kIGludGVnZXJzLiBUaGVzZSBhcmUKKiBoZWxwZXIgY29udmVuaWVuY2UgbWV0aG9kcywgdGhhdCBwYXNzIGFsb25nIHRvIHV0aWxpdHkgZnVuY3Rpb25zIGltcGxpZWQKKiBwYXJhbWV0ZXJzLgoqCiovCkVERFNBLnByb3RvdHlwZS5lbmNvZGVQb2ludCA9IGZ1bmN0aW9uIGVuY29kZVBvaW50KHBvaW50KSB7CiAgdmFyIGVuYyA9IHBvaW50LmdldFkoKS50b0FycmF5KCdsZScsIHRoaXMuZW5jb2RpbmdMZW5ndGgpOwogIGVuY1t0aGlzLmVuY29kaW5nTGVuZ3RoIC0gMV0gfD0gcG9pbnQuZ2V0WCgpLmlzT2RkKCkgPyAweDgwIDogMDsKICByZXR1cm4gZW5jOwp9OwoKRUREU0EucHJvdG90eXBlLmRlY29kZVBvaW50ID0gZnVuY3Rpb24gZGVjb2RlUG9pbnQoYnl0ZXMpIHsKICBieXRlcyA9IHV0aWxzLnBhcnNlQnl0ZXMoYnl0ZXMpOwoKICB2YXIgbGFzdEl4ID0gYnl0ZXMubGVuZ3RoIC0gMTsKICB2YXIgbm9ybWVkID0gYnl0ZXMuc2xpY2UoMCwgbGFzdEl4KS5jb25jYXQoYnl0ZXNbbGFzdEl4XSAmIH4weDgwKTsKICB2YXIgeElzT2RkID0gKGJ5dGVzW2xhc3RJeF0gJiAweDgwKSAhPT0gMDsKCiAgdmFyIHkgPSB1dGlscy5pbnRGcm9tTEUobm9ybWVkKTsKICByZXR1cm4gdGhpcy5jdXJ2ZS5wb2ludEZyb21ZKHksIHhJc09kZCk7Cn07CgpFRERTQS5wcm90b3R5cGUuZW5jb2RlSW50ID0gZnVuY3Rpb24gZW5jb2RlSW50KG51bSkgewogIHJldHVybiBudW0udG9BcnJheSgnbGUnLCB0aGlzLmVuY29kaW5nTGVuZ3RoKTsKfTsKCkVERFNBLnByb3RvdHlwZS5kZWNvZGVJbnQgPSBmdW5jdGlvbiBkZWNvZGVJbnQoYnl0ZXMpIHsKICByZXR1cm4gdXRpbHMuaW50RnJvbUxFKGJ5dGVzKTsKfTsKCkVERFNBLnByb3RvdHlwZS5pc1BvaW50ID0gZnVuY3Rpb24gaXNQb2ludCh2YWwpIHsKICByZXR1cm4gdmFsIGluc3RhbmNlb2YgdGhpcy5wb2ludENsYXNzOwp9OwoKfSx7Ii4uLy4uL2VsbGlwdGljIjoxMDIsIi4va2V5IjoxMTMsIi4vc2lnbmF0dXJlIjoxMTQsImhhc2guanMiOjEyMH1dLDExMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uLy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0Owp2YXIgcGFyc2VCeXRlcyA9IHV0aWxzLnBhcnNlQnl0ZXM7CnZhciBjYWNoZWRQcm9wZXJ0eSA9IHV0aWxzLmNhY2hlZFByb3BlcnR5OwoKLyoqCiogQHBhcmFtIHtFRERTQX0gZWRkc2EgLSBpbnN0YW5jZQoqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBwdWJsaWMvcHJpdmF0ZSBrZXkgcGFyYW1ldGVycwoqCiogQHBhcmFtIHtBcnJheTxCeXRlPn0gW3BhcmFtcy5zZWNyZXRdIC0gc2VjcmV0IHNlZWQgYnl0ZXMKKiBAcGFyYW0ge1BvaW50fSBbcGFyYW1zLnB1Yl0gLSBwdWJsaWMga2V5IHBvaW50IChha2EgYEFgIGluIGVkZHNhIHRlcm1zKQoqIEBwYXJhbSB7QXJyYXk8Qnl0ZT59IFtwYXJhbXMucHViXSAtIHB1YmxpYyBrZXkgcG9pbnQgZW5jb2RlZCBhcyBieXRlcwoqCiovCmZ1bmN0aW9uIEtleVBhaXIoZWRkc2EsIHBhcmFtcykgewogIHRoaXMuZWRkc2EgPSBlZGRzYTsKICB0aGlzLl9zZWNyZXQgPSBwYXJzZUJ5dGVzKHBhcmFtcy5zZWNyZXQpOwogIGlmIChlZGRzYS5pc1BvaW50KHBhcmFtcy5wdWIpKQogICAgdGhpcy5fcHViID0gcGFyYW1zLnB1YjsKICBlbHNlCiAgICB0aGlzLl9wdWJCeXRlcyA9IHBhcnNlQnl0ZXMocGFyYW1zLnB1Yik7Cn0KCktleVBhaXIuZnJvbVB1YmxpYyA9IGZ1bmN0aW9uIGZyb21QdWJsaWMoZWRkc2EsIHB1YikgewogIGlmIChwdWIgaW5zdGFuY2VvZiBLZXlQYWlyKQogICAgcmV0dXJuIHB1YjsKICByZXR1cm4gbmV3IEtleVBhaXIoZWRkc2EsIHsgcHViOiBwdWIgfSk7Cn07CgpLZXlQYWlyLmZyb21TZWNyZXQgPSBmdW5jdGlvbiBmcm9tU2VjcmV0KGVkZHNhLCBzZWNyZXQpIHsKICBpZiAoc2VjcmV0IGluc3RhbmNlb2YgS2V5UGFpcikKICAgIHJldHVybiBzZWNyZXQ7CiAgcmV0dXJuIG5ldyBLZXlQYWlyKGVkZHNhLCB7IHNlY3JldDogc2VjcmV0IH0pOwp9OwoKS2V5UGFpci5wcm90b3R5cGUuc2VjcmV0ID0gZnVuY3Rpb24gc2VjcmV0KCkgewogIHJldHVybiB0aGlzLl9zZWNyZXQ7Cn07CgpjYWNoZWRQcm9wZXJ0eShLZXlQYWlyLCBmdW5jdGlvbiBwdWJCeXRlcygpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5lbmNvZGVQb2ludCh0aGlzLnB1YigpKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShLZXlQYWlyLCBmdW5jdGlvbiBwdWIoKSB7CiAgaWYgKHRoaXMuX3B1YkJ5dGVzKQogICAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlUG9pbnQodGhpcy5fcHViQnl0ZXMpOwogIHJldHVybiB0aGlzLmVkZHNhLmcubXVsKHRoaXMucHJpdigpKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShLZXlQYWlyLCBmdW5jdGlvbiBwcml2Qnl0ZXMoKSB7CiAgdmFyIGVkZHNhID0gdGhpcy5lZGRzYTsKICB2YXIgaGFzaCA9IHRoaXMuaGFzaCgpOwogIHZhciBsYXN0SXggPSBlZGRzYS5lbmNvZGluZ0xlbmd0aCAtIDE7CgogIHZhciBhID0gaGFzaC5zbGljZSgwLCBlZGRzYS5lbmNvZGluZ0xlbmd0aCk7CiAgYVswXSAmPSAyNDg7CiAgYVtsYXN0SXhdICY9IDEyNzsKICBhW2xhc3RJeF0gfD0gNjQ7CgogIHJldHVybiBhOwp9KTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsIGZ1bmN0aW9uIHByaXYoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlSW50KHRoaXMucHJpdkJ5dGVzKCkpOwp9KTsKCmNhY2hlZFByb3BlcnR5KEtleVBhaXIsIGZ1bmN0aW9uIGhhc2goKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuaGFzaCgpLnVwZGF0ZSh0aGlzLnNlY3JldCgpKS5kaWdlc3QoKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShLZXlQYWlyLCBmdW5jdGlvbiBtZXNzYWdlUHJlZml4KCkgewogIHJldHVybiB0aGlzLmhhc2goKS5zbGljZSh0aGlzLmVkZHNhLmVuY29kaW5nTGVuZ3RoKTsKfSk7CgpLZXlQYWlyLnByb3RvdHlwZS5zaWduID0gZnVuY3Rpb24gc2lnbihtZXNzYWdlKSB7CiAgYXNzZXJ0KHRoaXMuX3NlY3JldCwgJ0tleVBhaXIgY2FuIG9ubHkgdmVyaWZ5Jyk7CiAgcmV0dXJuIHRoaXMuZWRkc2Euc2lnbihtZXNzYWdlLCB0aGlzKTsKfTsKCktleVBhaXIucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uIHZlcmlmeShtZXNzYWdlLCBzaWcpIHsKICByZXR1cm4gdGhpcy5lZGRzYS52ZXJpZnkobWVzc2FnZSwgc2lnLCB0aGlzKTsKfTsKCktleVBhaXIucHJvdG90eXBlLmdldFNlY3JldCA9IGZ1bmN0aW9uIGdldFNlY3JldChlbmMpIHsKICBhc3NlcnQodGhpcy5fc2VjcmV0LCAnS2V5UGFpciBpcyBwdWJsaWMgb25seScpOwogIHJldHVybiB1dGlscy5lbmNvZGUodGhpcy5zZWNyZXQoKSwgZW5jKTsKfTsKCktleVBhaXIucHJvdG90eXBlLmdldFB1YmxpYyA9IGZ1bmN0aW9uIGdldFB1YmxpYyhlbmMpIHsKICByZXR1cm4gdXRpbHMuZW5jb2RlKHRoaXMucHViQnl0ZXMoKSwgZW5jKTsKfTsKCm1vZHVsZS5leHBvcnRzID0gS2V5UGFpcjsKCn0seyIuLi8uLi9lbGxpcHRpYyI6MTAyfV0sMTE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKdmFyIGVsbGlwdGljID0gcmVxdWlyZSgnLi4vLi4vZWxsaXB0aWMnKTsKdmFyIHV0aWxzID0gZWxsaXB0aWMudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CnZhciBjYWNoZWRQcm9wZXJ0eSA9IHV0aWxzLmNhY2hlZFByb3BlcnR5Owp2YXIgcGFyc2VCeXRlcyA9IHV0aWxzLnBhcnNlQnl0ZXM7CgovKioKKiBAcGFyYW0ge0VERFNBfSBlZGRzYSAtIGVkZHNhIGluc3RhbmNlCiogQHBhcmFtIHtBcnJheTxCeXRlcz58T2JqZWN0fSBzaWcgLQoqIEBwYXJhbSB7QXJyYXk8Qnl0ZXM+fFBvaW50fSBbc2lnLlJdIC0gUiBwb2ludCBhcyBQb2ludCBvciBieXRlcwoqIEBwYXJhbSB7QXJyYXk8Qnl0ZXM+fGJufSBbc2lnLlNdIC0gUyBzY2FsYXIgYXMgYm4gb3IgYnl0ZXMKKiBAcGFyYW0ge0FycmF5PEJ5dGVzPn0gW3NpZy5SZW5jb2RlZF0gLSBSIHBvaW50IGVuY29kZWQKKiBAcGFyYW0ge0FycmF5PEJ5dGVzPn0gW3NpZy5TZW5jb2RlZF0gLSBTIHNjYWxhciBlbmNvZGVkCiovCmZ1bmN0aW9uIFNpZ25hdHVyZShlZGRzYSwgc2lnKSB7CiAgdGhpcy5lZGRzYSA9IGVkZHNhOwoKICBpZiAodHlwZW9mIHNpZyAhPT0gJ29iamVjdCcpCiAgICBzaWcgPSBwYXJzZUJ5dGVzKHNpZyk7CgogIGlmIChBcnJheS5pc0FycmF5KHNpZykpIHsKICAgIHNpZyA9IHsKICAgICAgUjogc2lnLnNsaWNlKDAsIGVkZHNhLmVuY29kaW5nTGVuZ3RoKSwKICAgICAgUzogc2lnLnNsaWNlKGVkZHNhLmVuY29kaW5nTGVuZ3RoKQogICAgfTsKICB9CgogIGFzc2VydChzaWcuUiAmJiBzaWcuUywgJ1NpZ25hdHVyZSB3aXRob3V0IFIgb3IgUycpOwoKICBpZiAoZWRkc2EuaXNQb2ludChzaWcuUikpCiAgICB0aGlzLl9SID0gc2lnLlI7CiAgaWYgKHNpZy5TIGluc3RhbmNlb2YgQk4pCiAgICB0aGlzLl9TID0gc2lnLlM7CgogIHRoaXMuX1JlbmNvZGVkID0gQXJyYXkuaXNBcnJheShzaWcuUikgPyBzaWcuUiA6IHNpZy5SZW5jb2RlZDsKICB0aGlzLl9TZW5jb2RlZCA9IEFycmF5LmlzQXJyYXkoc2lnLlMpID8gc2lnLlMgOiBzaWcuU2VuY29kZWQ7Cn0KCmNhY2hlZFByb3BlcnR5KFNpZ25hdHVyZSwgZnVuY3Rpb24gUygpIHsKICByZXR1cm4gdGhpcy5lZGRzYS5kZWNvZGVJbnQodGhpcy5TZW5jb2RlZCgpKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShTaWduYXR1cmUsIGZ1bmN0aW9uIFIoKSB7CiAgcmV0dXJuIHRoaXMuZWRkc2EuZGVjb2RlUG9pbnQodGhpcy5SZW5jb2RlZCgpKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShTaWduYXR1cmUsIGZ1bmN0aW9uIFJlbmNvZGVkKCkgewogIHJldHVybiB0aGlzLmVkZHNhLmVuY29kZVBvaW50KHRoaXMuUigpKTsKfSk7CgpjYWNoZWRQcm9wZXJ0eShTaWduYXR1cmUsIGZ1bmN0aW9uIFNlbmNvZGVkKCkgewogIHJldHVybiB0aGlzLmVkZHNhLmVuY29kZUludCh0aGlzLlMoKSk7Cn0pOwoKU2lnbmF0dXJlLnByb3RvdHlwZS50b0J5dGVzID0gZnVuY3Rpb24gdG9CeXRlcygpIHsKICByZXR1cm4gdGhpcy5SZW5jb2RlZCgpLmNvbmNhdCh0aGlzLlNlbmNvZGVkKCkpOwp9OwoKU2lnbmF0dXJlLnByb3RvdHlwZS50b0hleCA9IGZ1bmN0aW9uIHRvSGV4KCkgewogIHJldHVybiB1dGlscy5lbmNvZGUodGhpcy50b0J5dGVzKCksICdoZXgnKS50b1VwcGVyQ2FzZSgpOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBTaWduYXR1cmU7Cgp9LHsiLi4vLi4vZWxsaXB0aWMiOjEwMiwiYm4uanMiOjQxfV0sMTE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIGhhc2ggPSByZXF1aXJlKCdoYXNoLmpzJyk7CnZhciBlbGxpcHRpYyA9IHJlcXVpcmUoJy4uL2VsbGlwdGljJyk7CnZhciB1dGlscyA9IGVsbGlwdGljLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gSG1hY0RSQkcob3B0aW9ucykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBIbWFjRFJCRykpCiAgICByZXR1cm4gbmV3IEhtYWNEUkJHKG9wdGlvbnMpOwogIHRoaXMuaGFzaCA9IG9wdGlvbnMuaGFzaDsKICB0aGlzLnByZWRSZXNpc3QgPSAhIW9wdGlvbnMucHJlZFJlc2lzdDsKCiAgdGhpcy5vdXRMZW4gPSB0aGlzLmhhc2gub3V0U2l6ZTsKICB0aGlzLm1pbkVudHJvcHkgPSBvcHRpb25zLm1pbkVudHJvcHkgfHwgdGhpcy5oYXNoLmhtYWNTdHJlbmd0aDsKCiAgdGhpcy5yZXNlZWQgPSBudWxsOwogIHRoaXMucmVzZWVkSW50ZXJ2YWwgPSBudWxsOwogIHRoaXMuSyA9IG51bGw7CiAgdGhpcy5WID0gbnVsbDsKCiAgdmFyIGVudHJvcHkgPSB1dGlscy50b0FycmF5KG9wdGlvbnMuZW50cm9weSwgb3B0aW9ucy5lbnRyb3B5RW5jKTsKICB2YXIgbm9uY2UgPSB1dGlscy50b0FycmF5KG9wdGlvbnMubm9uY2UsIG9wdGlvbnMubm9uY2VFbmMpOwogIHZhciBwZXJzID0gdXRpbHMudG9BcnJheShvcHRpb25zLnBlcnMsIG9wdGlvbnMucGVyc0VuYyk7CiAgYXNzZXJ0KGVudHJvcHkubGVuZ3RoID49ICh0aGlzLm1pbkVudHJvcHkgLyA4KSwKICAgICAgICAgJ05vdCBlbm91Z2ggZW50cm9weS4gTWluaW11bSBpczogJyArIHRoaXMubWluRW50cm9weSArICcgYml0cycpOwogIHRoaXMuX2luaXQoZW50cm9weSwgbm9uY2UsIHBlcnMpOwp9Cm1vZHVsZS5leHBvcnRzID0gSG1hY0RSQkc7CgpIbWFjRFJCRy5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiBpbml0KGVudHJvcHksIG5vbmNlLCBwZXJzKSB7CiAgdmFyIHNlZWQgPSBlbnRyb3B5LmNvbmNhdChub25jZSkuY29uY2F0KHBlcnMpOwoKICB0aGlzLksgPSBuZXcgQXJyYXkodGhpcy5vdXRMZW4gLyA4KTsKICB0aGlzLlYgPSBuZXcgQXJyYXkodGhpcy5vdXRMZW4gLyA4KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuVi5sZW5ndGg7IGkrKykgewogICAgdGhpcy5LW2ldID0gMHgwMDsKICAgIHRoaXMuVltpXSA9IDB4MDE7CiAgfQoKICB0aGlzLl91cGRhdGUoc2VlZCk7CiAgdGhpcy5yZXNlZWQgPSAxOwogIHRoaXMucmVzZWVkSW50ZXJ2YWwgPSAweDEwMDAwMDAwMDAwMDA7ICAvLyAyXjQ4Cn07CgpIbWFjRFJCRy5wcm90b3R5cGUuX2htYWMgPSBmdW5jdGlvbiBobWFjKCkgewogIHJldHVybiBuZXcgaGFzaC5obWFjKHRoaXMuaGFzaCwgdGhpcy5LKTsKfTsKCkhtYWNEUkJHLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKHNlZWQpIHsKICB2YXIga21hYyA9IHRoaXMuX2htYWMoKQogICAgICAgICAgICAgICAgIC51cGRhdGUodGhpcy5WKQogICAgICAgICAgICAgICAgIC51cGRhdGUoWyAweDAwIF0pOwogIGlmIChzZWVkKQogICAga21hYyA9IGttYWMudXBkYXRlKHNlZWQpOwogIHRoaXMuSyA9IGttYWMuZGlnZXN0KCk7CiAgdGhpcy5WID0gdGhpcy5faG1hYygpLnVwZGF0ZSh0aGlzLlYpLmRpZ2VzdCgpOwogIGlmICghc2VlZCkKICAgIHJldHVybjsKCiAgdGhpcy5LID0gdGhpcy5faG1hYygpCiAgICAgICAgICAgICAgIC51cGRhdGUodGhpcy5WKQogICAgICAgICAgICAgICAudXBkYXRlKFsgMHgwMSBdKQogICAgICAgICAgICAgICAudXBkYXRlKHNlZWQpCiAgICAgICAgICAgICAgIC5kaWdlc3QoKTsKICB0aGlzLlYgPSB0aGlzLl9obWFjKCkudXBkYXRlKHRoaXMuVikuZGlnZXN0KCk7Cn07CgpIbWFjRFJCRy5wcm90b3R5cGUucmVzZWVkID0gZnVuY3Rpb24gcmVzZWVkKGVudHJvcHksIGVudHJvcHlFbmMsIGFkZCwgYWRkRW5jKSB7CiAgLy8gT3B0aW9uYWwgZW50cm9weSBlbmMKICBpZiAodHlwZW9mIGVudHJvcHlFbmMgIT09ICdzdHJpbmcnKSB7CiAgICBhZGRFbmMgPSBhZGQ7CiAgICBhZGQgPSBlbnRyb3B5RW5jOwogICAgZW50cm9weUVuYyA9IG51bGw7CiAgfQoKICBlbnRyb3B5ID0gdXRpbHMudG9CdWZmZXIoZW50cm9weSwgZW50cm9weUVuYyk7CiAgYWRkID0gdXRpbHMudG9CdWZmZXIoYWRkLCBhZGRFbmMpOwoKICBhc3NlcnQoZW50cm9weS5sZW5ndGggPj0gKHRoaXMubWluRW50cm9weSAvIDgpLAogICAgICAgICAnTm90IGVub3VnaCBlbnRyb3B5LiBNaW5pbXVtIGlzOiAnICsgdGhpcy5taW5FbnRyb3B5ICsgJyBiaXRzJyk7CgogIHRoaXMuX3VwZGF0ZShlbnRyb3B5LmNvbmNhdChhZGQgfHwgW10pKTsKICB0aGlzLnJlc2VlZCA9IDE7Cn07CgpIbWFjRFJCRy5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiBnZW5lcmF0ZShsZW4sIGVuYywgYWRkLCBhZGRFbmMpIHsKICBpZiAodGhpcy5yZXNlZWQgPiB0aGlzLnJlc2VlZEludGVydmFsKQogICAgdGhyb3cgbmV3IEVycm9yKCdSZXNlZWQgaXMgcmVxdWlyZWQnKTsKCiAgLy8gT3B0aW9uYWwgZW5jb2RpbmcKICBpZiAodHlwZW9mIGVuYyAhPT0gJ3N0cmluZycpIHsKICAgIGFkZEVuYyA9IGFkZDsKICAgIGFkZCA9IGVuYzsKICAgIGVuYyA9IG51bGw7CiAgfQoKICAvLyBPcHRpb25hbCBhZGRpdGlvbmFsIGRhdGEKICBpZiAoYWRkKSB7CiAgICBhZGQgPSB1dGlscy50b0FycmF5KGFkZCwgYWRkRW5jKTsKICAgIHRoaXMuX3VwZGF0ZShhZGQpOwogIH0KCiAgdmFyIHRlbXAgPSBbXTsKICB3aGlsZSAodGVtcC5sZW5ndGggPCBsZW4pIHsKICAgIHRoaXMuViA9IHRoaXMuX2htYWMoKS51cGRhdGUodGhpcy5WKS5kaWdlc3QoKTsKICAgIHRlbXAgPSB0ZW1wLmNvbmNhdCh0aGlzLlYpOwogIH0KCiAgdmFyIHJlcyA9IHRlbXAuc2xpY2UoMCwgbGVuKTsKICB0aGlzLl91cGRhdGUoYWRkKTsKICB0aGlzLnJlc2VlZCsrOwogIHJldHVybiB1dGlscy5lbmNvZGUocmVzLCBlbmMpOwp9OwoKfSx7Ii4uL2VsbGlwdGljIjoxMDIsImhhc2guanMiOjEyMH1dLDExNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gewogIGRvdWJsZXM6IHsKICAgIHN0ZXA6IDQsCiAgICBwb2ludHM6IFsKICAgICAgWwogICAgICAgICdlNjBmY2U5M2I1OWU5ZWM1MzAxMWFhYmMyMWMyM2U5N2IyYTMxMzY5Yjg3YTVhZTljNDRlZTg5ZTJhNmRlYzBhJywKICAgICAgICAnZjdlMzUwNzM5OWU1OTU5MjlkYjk5ZjM0ZjU3OTM3MTAxMjk2ODkxZTQ0ZDIzZjBiZTFmMzJjY2U2OTYxNjgyMScKICAgICAgXSwKICAgICAgWwogICAgICAgICc4MjgyMjYzMjEyYzYwOWQ5ZWEyYTZlM2UxNzJkZTIzOGQ4YzM5Y2FiZDVhYzFjYTEwNjQ2ZTIzZmQ1ZjUxNTA4JywKICAgICAgICAnMTFmOGE4MDk4NTU3ZGZlNDVlODI1NmU4MzBiNjBhY2U2MmQ2MTNhYzJmN2IxN2JlZDMxYjZlYWZmNmUyNmNhZicKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNzVlMTU5ZjcyOGI4NjVhNzJmOTljYzZjNmZjODQ2ZGUwYjkzODMzZmQyMjIyZWQ3M2ZjZTViNTUxZTViNzM5JywKICAgICAgICAnZDM1MDZlMGQ5ZTNjNzllYmE0ZWY5N2E1MWZmNzFmNWVhY2I1OTU1YWRkMjQzNDVjNmVmYTZmZmVlOWZlZDY5NScKICAgICAgXSwKICAgICAgWwogICAgICAgICczNjNkOTBkNDQ3YjAwYzljOTljZWFjMDViNjI2MmVlMDUzNDQxYzdlNTU1NTJmZmU1MjZiYWQ4ZjgzZmY0NjQwJywKICAgICAgICAnNGUyNzNhZGZjNzMyMjIxOTUzYjQ0NTM5N2YzMzYzMTQ1YjlhODkwMDgxOTllY2I2MjAwM2M3ZjNiZWU5ZGU5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhiNGI1ZjE2NWRmM2MyYmU4YzYyNDRiNWI3NDU2Mzg4NDNlNGE3ODFhMTViY2QxYjY5Zjc5YTU1ZGZmZGY4MGMnLAogICAgICAgICc0YWFkMGE2ZjY4ZDMwOGI0YjNmYmQ3ODEzYWIwZGEwNGY5ZTMzNjU0NjE2MmVlNTZiM2VmZjBjNjVmZDRmZDM2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzcyM2NiYWE2ZTVkYjk5NmQ2YmY3NzFjMDBiZDU0OGM3YjcwMGRiZmZhNmMwZTc3YmNiNjExNTkyNTIzMmZjZGEnLAogICAgICAgICc5NmU4NjdiNTU5NWNjNDk4YTkyMTEzNzQ4ODgyNGQ2ZTI2NjBhMDY1Mzc3OTQ5NDgwMWRjMDY5ZDllYjM5ZjVmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VlYmZhNGQ0OTNiZWJmOThiYTVmZWVjODEyYzJkM2I1MDk0Nzk2MTIzN2E5MTk4MzlhNTMzZWNhMGU3ZGQ3ZmEnLAogICAgICAgICc1ZDlhOGNhMzk3MGVmMGYyNjllZTdlZGFmMTc4MDg5ZDlhZTRjZGMzYTcxMWY3MTJkZGZkNGZkYWUxZGU4OTk5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzEwMGY0NGRhNjk2ZTcxNjcyNzkxZDBhMDliN2JkZTQ1OWYxMjE1YTI5YjNjMDNiZmVmZDc4MzViMzlhNDhkYjAnLAogICAgICAgICdjZGQ5ZTEzMTkyYTAwYjc3MmVjOGYzMzAwYzA5MDY2NmI3ZmY0YTE4ZmY1MTk1YWMwZmJkNWNkNjJiYzY1YTA5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2UxMDMxYmUyNjJjN2VkMWIxZGM5MjI3YTRhMDRjMDE3YTc3ZjhkNDQ2NGYzYjM4NTJjOGFjZGU2ZTUzNGZkMmQnLAogICAgICAgICc5ZDcwNjE5Mjg5NDA0MDVlNmJiNmE0MTc2NTk3NTM1YWYyOTJkZDQxOWUxY2VkNzlhNDRmMThmMjk0NTZhMDBkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2ZlZWE2Y2FlNDZkNTViNTMwYWMyODM5ZjE0M2JkN2VjNWNmOGIyNjZhNDFkNmFmNTJkNWU2ODhkOTA5NDY5NmQnLAogICAgICAgICdlNTdjNmI2Yzk3ZGNlMWJhYjA2ZTRlMTJiZjNlY2Q1Yzk4MWM4OTU3Y2M0MTQ0MmQzMTU1ZGViZjE4MDkwMDg4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RhNjdhOTFkOTEwNDljZGNiMzY3YmU0YmU2ZmZjYTNjZmVlZDY1N2Q4MDg1ODNkZTMzZmE5NzhiYzFlYzZjYjEnLAogICAgICAgICc5YmFjYWEzNTQ4MTY0MmJjNDFmNDYzZjdlYzk3ODBlNWRlYzdhZGM1MDhmNzQwYTE3ZTllYThlMjdhNjhiZTFkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzUzOTA0ZmFhMGIzMzRjZGRhNmUwMDA5MzVlZjIyMTUxZWMwOGQwZjdiYjExMDY5ZjU3NTQ1Y2NjMWEzN2I3YzAnLAogICAgICAgICc1YmMwODdkMGJjODAxMDZkODhjOWVjY2FjMjBkM2MxYzEzOTk5OTgxZTE0NDM0Njk5ZGNiMDk2YjAyMjc3MWM4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhlN2JjZDBiZDM1OTgzYTc3MTljY2E3NzY0Y2E5MDY3NzliNTNhMDQzYTliOGJjYWVmZjk1OWY0M2FkODYwNDcnLAogICAgICAgICcxMGI3NzcwYjJhM2RhNGIzOTQwMzEwNDIwY2E5NTE0NTc5ZTg4ZTJlNDdmZDY4YjNlYTEwMDQ3ZTg0NjAzNzJhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM4NWVlZDM0YzFjZGZmMjFlNmQwODE4Njg5YjgxYmRlNzFhN2Y0ZjE4Mzk3ZTY2OTBhODQxZTE1OTljNDM4NjInLAogICAgICAgICcyODNiZWJjM2U4ZWEyM2Y1NjcwMWRlMTllOWViZjQ1NzZiMzA0ZWVjMjA4NmRjOGNjMDQ1OGZlNTU0MmU1NDUzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzZmOWQ5YjgwM2VjZjE5MTYzN2M3M2E0NDEzZGZhMTgwZmRkZjg0YTU5NDdmYmM5YzYwNmVkODZjM2ZhYzNhNycsCiAgICAgICAgJzdjODBjNjhlNjAzMDU5YmE2OWI4ZTJhMzBlNDVjNGQ0N2VhNGRkMmY1YzI4MTAwMmQ4Njg5MDYwM2E4NDIxNjAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzMyMmQ0MDEyNDNjNGUyNTgyYTIxNDdjMTA0ZDZlY2JmNzc0ZDE2M2RiMGY1ZTUzMTNiN2UwZTc0MmQwZTZiZCcsCiAgICAgICAgJzU2ZTcwNzk3ZTk2NjRlZjViZmIwMTliYzRkZGFmOWI3MjgwNWY2M2VhMjg3M2FmNjI0ZjNhMmU5NmMyOGIyYTAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODU2NzJjN2QyZGUwYjdkYTJiZDE3NzBkODk2NjU4Njg3NDFiM2Y5YWY3NjQzMzk3NzIxZDc0ZDI4MTM0YWI4MycsCiAgICAgICAgJzdjNDgxYjliNWI0M2IyZWI2Mzc0MDQ5YmZhNjJjMmU1ZTc3ZjE3ZmNjNTI5OGY0NGM4ZTMwOTRmNzkwMzEzYTYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTQ4YmY4MDliMTk4OGE0NmIwNmM5ZjE5MTk0MTNiMTBmOTIyNmM2MGY2Njg4MzJmZmQ5NTlhZjYwYzgyYTBhJywKICAgICAgICAnNTNhNTYyODU2ZGNiNjY0NmRjNmI3NGM1ZDFjMzQxOGM2ZDRkZmYwOGM5N2NkMmJlZDRjYjdmODhkOGM4ZTU4OScKICAgICAgXSwKICAgICAgWwogICAgICAgICc2MjYwY2U3ZjQ2MTgwMWMzNGYwNjdjZTBmMDI4NzNhOGYxYjBlNDRkZmM2OTc1MmFjY2VjZDgxOWYzOGZkOGU4JywKICAgICAgICAnYmMyZGE4MmI2ZmE1YjU3MWE3ZjA5MDQ5Nzc2YTFlZjdlY2QyOTIyMzgwNTFjMTk4YzFhODRlOTViMmI0YWUxNycKICAgICAgXSwKICAgICAgWwogICAgICAgICdlNTAzN2RlMGFmYzFkOGQ0M2Q4MzQ4NDE0YmJmNDEwMzA0M2VjOGY1NzViZmRjNDMyOTUzY2M4ZDIwMzdmYTJkJywKICAgICAgICAnNDU3MTUzNGJhYTk0ZDNiNWY5Zjk4ZDA5ZmI5OTBiZGRiZDVmNWIwM2VjNDgxZjEwZTBlNWRjODQxZDc1NWJkYScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlMDYzNzJiMGY0YTIwN2FkZjVlYTkwNWU4ZjE3NzFiNGU3ZThkYmQxYzZhNmM1YjcyNTg2NmEwYWU0ZmNlNzI1JywKICAgICAgICAnN2E5MDg5NzRiY2UxOGNmZTEyYTI3YmIyYWQ1YTQ4OGNkNzQ4NGE3Nzg3MTA0ODcwYjI3MDM0Zjk0ZWVlMzFkZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICcyMTNjN2E3MTVjZDVkNDUzNThkMGJiZjlkYzBjZTAyMjA0YjEwYmRkZTJhM2Y1ODU0MGFkNjkwOGQwNTU5NzU0JywKICAgICAgICAnNGI2ZGFkMGI1YWU0NjI1MDcwMTNhZDA2MjQ1YmExOTBiYjQ4NTBmNWYzNmE3ZWVkZGZmMmMyNzUzNGI0NThmMicKICAgICAgXSwKICAgICAgWwogICAgICAgICc0ZTdjMjcyYTdhZjRiMzRlOGRiYjkzNTJhNTQxOWE4N2UyODM4YzcwYWRjNjJjZGRmMGNjM2EzYjA4ZmJkNTNjJywKICAgICAgICAnMTc3NDljNzY2YzlkMGIxOGUxNmZkMDlmNmRlZjY4MWI1MzBiOTYxNGJmZjdkZDMzZTBiMzk0MTgxN2RjYWFlNicKICAgICAgXSwKICAgICAgWwogICAgICAgICdmZWE3NGUzZGJlNzc4YjFiMTBmMjM4YWQ2MTY4NmFhNWM3NmUzZGIyYmU0MzA1NzYzMjQyN2UyODQwZmIyN2I2JywKICAgICAgICAnNmUwNTY4ZGI5YjBiMTMyOTdjZjY3NGRlY2NiNmFmOTMxMjZiNTk2Yjk3M2Y3Yjc3NzAxZDNkYjdmMjNjYjk2ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NmU2NDExM2Y2NzdjZjBlMTBhMjU3MGQ1OTk5NjhkMzE1NDRlMTc5Yjc2MDQzMjk1MmMwMmE0NDE3YmRkZTM5JywKICAgICAgICAnYzkwZGRmOGRlZTRlOTVjZjU3NzA2NmQ3MDY4MWYwZDM1ZTJhMzNkMmI1NmQyMDMyYjRiMTc1MmQxOTAxYWMwMScKICAgICAgXSwKICAgICAgWwogICAgICAgICdjNzM4YzU2YjAzYjJhYmUxZTgyODFiYWE3NDNmOGY5YThmN2NjNjQzZGYyNmNiZWUzYWIxNTAyNDJiY2JiODkxJywKICAgICAgICAnODkzZmI1Nzg5NTFhZDI1MzdmNzE4ZjJlYWNiZmJiYmI4MjMxNGVlZjc4ODBjZmU5MTdlNzM1ZDk2OTlhODRjMycKICAgICAgXSwKICAgICAgWwogICAgICAgICdkODk1NjI2NTQ4YjY1YjgxZTI2NGM3NjM3Yzk3Mjg3N2QxZDcyZTVmM2E5MjUwMTQzNzJlOWY2NTg4ZjZjMTRiJywKICAgICAgICAnZmViZmFhMzhmMmJjN2VhZTcyOGVjNjA4MThjMzQwZWIwMzQyOGQ2MzJiYjA2N2UxNzkzNjNlZDc1ZDdkOTkxZicKICAgICAgXSwKICAgICAgWwogICAgICAgICdiOGRhOTQwMzJhOTU3NTE4ZWIwZjY0MzM1NzFlODc2MWNlZmZjNzM2OTNlODRlZGQ0OTE1MGE1NjRmNjc2ZTAzJywKICAgICAgICAnMjgwNGRmYTQ0ODA1YTFlNGQ3Yzk5Y2M5NzYyODA4YjA5MmNjNTg0ZDk1ZmYzYjUxMTQ4OGU0ZTc0ZWZkZjZlNycKICAgICAgXSwKICAgICAgWwogICAgICAgICdlODBmZWExNDQ0MWZiMzNhN2Q4YWRhYjk0NzVkN2ZhYjIwMTllZmZiNTE1NmE3OTJmMWExMTc3OGUzYzBkZjVkJywKICAgICAgICAnZWVkMWRlN2Y2MzhlMDA3NzFlODk3NjhjYTNjYTk0NDcyZDE1NWU4MGFmMzIyZWE5ZmNiNDI5MWI2YWM5ZWM3OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdhMzAxNjk3YmRmY2Q3MDQzMTNiYTQ4ZTUxZDU2NzU0M2YyYTE4MjAzMWVmZDY5MTVkZGMwN2JiY2M0ZTE2MDcwJywKICAgICAgICAnNzM3MGY5MWNmYjY3ZTRmNTA4MTgwOWZhMjVkNDBmOWIxNzM1ZGJmN2MwYTExYTEzMGMwZDFhMDQxZTE3N2VhMScKICAgICAgXSwKICAgICAgWwogICAgICAgICc5MGFkODViMzg5ZDZiOTM2NDYzZjlkMDUxMjY3OGRlMjA4Y2MzMzBiMTEzMDdmZmZhYjdhYzYzZTNmYjA0ZWQ0JywKICAgICAgICAnZTUwN2EzNjIwYTM4MjYxYWZmZGNiZDk0MjcyMjJiODM5YWVmYWJlMTU4Mjg5NGQ5OTFkNGQ0OGNiNmVmMTUwJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhmNjhiOWQyZjYzYjVmMzM5MjM5YzFhZDk4MWYxNjJlZTg4YzU2Nzg3MjNlYTMzNTFiN2I0NDRjOWVjNGMwZGEnLAogICAgICAgICc2NjJhOWYyZGJhMDYzOTg2ZGUxZDkwYzJiNmJlMjE1ZGJiZWEyY2ZlOTU1MTBiZmRmMjNjYmY3OTUwMWZmZjgyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U0ZjNmYjAxNzZhZjg1ZDY1ZmY5OWZmOTE5OGMzNjA5MWY0OGU4NjUwMzY4MWUzZTY2ODZmZDUwNTMyMzFlMTEnLAogICAgICAgICcxZTYzNjMzYWQwZWY0ZjFjMTY2MWE2ZDBlYTAyYjcyODZjYzdlNzRlYzk1MWQxYzk4MjJjMzg1NzZmZWI3M2JjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzhjMDBmYTliMThlYmYzMzFlYjk2MTUzN2E0NWE0MjY2YzcwMzRmMmYwZDRlMWQwNzE2ZmI2ZWFlMjBlYWUyOWUnLAogICAgICAgICdlZmE0NzI2N2ZlYTUyMWExYTlkYzM0M2EzNzM2Yzk3NGMyZmFkYWZhODFlMzZjNTRlN2QyYTRjNjY3MDI0MTRiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U3YTI2Y2U2OWRkNDgyOWYzZTEwY2VjMGE5ZTk4ZWQzMTQzZDA4NGYzMDhiOTJjMDk5N2ZkZGZjNjBjYjNlNDEnLAogICAgICAgICcyYTc1OGUzMDBmYTc5ODRiNDcxYjAwNmExYWFmYmIxOGQwYTZiMmMwNDIwZTgzZTIwZThhOTQyMWNmMmNmZDUxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2I2NDU5ZTBlZTM2NjJlYzhkMjM1NDBjMjIzYmNiZGM1NzFjYmNiOTY3ZDc5NDI0ZjNjZjI5ZWIzZGU2YjgwZWYnLAogICAgICAgICc2N2M4NzZkMDZmM2UwNmRlMWRhZGYxNmU1NjYxZGIzYzRiM2FlNmQ0OGUzNWIyZmYzMGJmMGI2MWE3MWJhNDUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDY4YTgwYzgyODBiYjg0MDc5MzIzNGFhMTE4ZjA2MjMxZDZmMWZjNjdlNzNjNWE1ZGVkYTBmNWI0OTY5NDNlOCcsCiAgICAgICAgJ2RiOGJhOWZmZjRiNTg2ZDAwYzRiMWY5MTc3YjBlMjhiNWIwZTdiOGY3ODQ1Mjk1YTI5NGM4NDI2NmIxMzMxMjAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzI0YWVkN2RmNjVjODA0MjUyZGMwMjcwOTA3YTMwYjA5NjEyYWViOTczNDQ5Y2VhNDA5NTk4MGZjMjhkM2Q1ZCcsCiAgICAgICAgJzY0OGEzNjU3NzRiNjFmMmZmMTMwYzBjMzVhZWMxZjRmMTkyMTNiMGM3ZTMzMjg0Mzk2NzIyNGFmOTZhYjdjODQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNGRmOWMxNDkxOWNkZTYxZjZkNTFkZmRiZTVmZWU1ZGNlZWM0MTQzYmE4ZDFjYTg4OGU4YmQzNzNmZDA1NGM5NicsCiAgICAgICAgJzM1ZWM1MTA5MmQ4NzI4MDUwOTc0YzIzYTFkODVkNGI1ZDUwNmNkYzI4ODQ5MDE5MmViYWMwNmNhZDEwZDVkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzljMzkxOWE4NGE0NzQ4NzBmYWVkOGE5YzFjYzY2MDIxNTIzNDg5MDU0ZDdmMDMwOGNiZmM5OWM4YWMxZjk4Y2QnLAogICAgICAgICdkZGI4NGYwZjRhNGRkZDU3NTg0ZjA0NGJmMjYwZTY0MTkwNTMyNmY3NmM2NGM4ZTZiZTdlNWUwM2Q0ZmM1OTlkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzYwNTcxNzBiMWRkMTJmZGY4ZGUwNWYyODFkOGUwNmJiOTFlMTQ5M2E4YjkxZDRjYzVhMjEzODIxMjBhOTU5ZTUnLAogICAgICAgICc5YTFhZjBiMjZhNmE0ODA3YWRkOWEyZGFmNzFkZjI2MjQ2NTE1MmJjM2VlMjRjNjVlODk5YmU5MzIzODVhMmE4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2E1NzZkZjhlMjNhMDg0MTE0MjE0MzlhNDUxOGRhMzE4ODBjZWYwZmJhN2Q0ZGYxMmIxYTY5NzNlZWNiOTQyNjYnLAogICAgICAgICc0MGE2YmYyMGU3NjY0MGIyYzkyYjk3YWZlNThjZDgyYzQzMmUxMGE3ZjUxNGQ5ZjNlZThiZTExYWUxYjI4ZWM4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc3NzhhNzhjMjhkZWMzZTMwYTA1ZmU5NjI5ZGU4YzM4YmIzMGQxZjVjZjlhM2EyMDhmNzYzODg5YmU1OGFkNzEnLAogICAgICAgICczNDYyNmQ5YWI1YTViMjJmZjcwOThlMTJmMmZmNTgwMDg3YjM4NDExZmYyNGFjNTYzYjUxM2ZjMWZkOWY0M2FjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzkyODk1NWVlNjM3YTg0NDYzNzI5ZmQzMGU3YWZkMmVkNWY5NjI3NGU1YWQ3ZTVjYjA5ZWRhOWMwNmQ5MDNhYycsCiAgICAgICAgJ2MyNTYyMTAwM2QzZjQyYTgyN2I3OGExMzA5M2E5NWVlYWMzZDI2ZWZhOGE4ZDgzZmM1MTgwZTkzNWJjZDA5MWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODVkMGZlZjNlYzZkYjEwOTM5OTA2NGYzYTBlM2IyODU1NjQ1YjRhOTA3YWQzNTQ1MjdhYWU3NTE2M2Q4Mjc1MScsCiAgICAgICAgJzFmMDM2NDg0MTNhMzhjMGJlMjlkNDk2ZTU4MmNmNTY2M2U4NzUxZTk2ODc3MzMxNTgyYzIzN2EyNGViMWY5NjInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZmYyYjBkY2U5N2VlY2U5N2MxYzliNjA0MTc5OGI4NWRmZGZiNmQ4ODgyZGEyMDMwOGY1NDA0ODI0NTI2MDg3ZScsCiAgICAgICAgJzQ5M2QxM2ZlZjUyNGJhMTg4YWY0YzRkYzU0ZDA3OTM2YzdiN2VkNmZiOTBlMmNlYjJjOTUxZTAxZjBjMjk5MDcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODI3ZmJiZTRiMWU4ODBlYTllZDJiMmU2MzAxYjIxMmI1N2YxZWUxNDhjZDZkZDI4NzgwZTVlMmNmODU2ZTI0MScsCiAgICAgICAgJ2M2MGY5YzkyM2M3MjdiMGI3MWJlZjJjNjdkMWQxMjY4N2ZmN2E2MzE4NjkwMzE2NmQ2MDViNjhiYWVjMjkzZWMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWFhNjQ5ZjIxZjUxYmRiYWU3YmU0YWUzNGNlNmU1MjE3YTU4ZmRjZTdmNDdmOWFhN2YzYjU4ZmEyMTIwZTJiMycsCiAgICAgICAgJ2JlMzI3OWVkNWJiYmIwM2FjNjlhODBmODk4NzlhYTVhMDFhNmI5NjVmMTNmN2U1OWQ0N2E1MzA1YmE1YWQ5M2QnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTRhNDJkNDNjNWNmMTY5ZDkzOTFkZjZkZWNmNDJlZTU0MWI2ZDhmMGM5YTEzNzQwMWUyMzYzMmRkYTM0ZDI0ZicsCiAgICAgICAgJzRkOWY5MmU3MTZkMWM3MzUyNmZjOTljY2ZiOGFkMzRjZTg4NmVlZGZhOGQ4ZTRmMTNhN2Y3MTMxZGViYTk0MTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMWVjODBmZWYzNjBjYmRkOTU0MTYwZmFkYWIzNTJiNmI5MmI1MzU3NmE4OGZlYTQ5NDcxNzNiOWQ0MzAwYmYxOScsCiAgICAgICAgJ2FlZWZlOTM3NTZiNTM0MGQyZjNhNDk1OGE3YWJiZjVlMDE0NmU3N2Y2Mjk1YTA3YjY3MWNkYzFjYzEwN2NlZmQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTQ2YTc3OGMwNDY3MGMyZjkxYjAwYWY0NjgwZGZhOGJjZTM0OTA3MTdkNThiYTg4OWRkYjU5MjgzNjY2NDJiZScsCiAgICAgICAgJ2IzMThlMGVjMzM1NDAyOGFkZDY2OTgyN2Y5ZDRiMjg3MGFhYTk3MWQyZjdlNWVkMWQwYjI5NzQ4M2Q4M2VmZDAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZmE1MGMwZjYxZDIyZTVmMDdlM2FjZWJiMWFhMDdiMTI4ZDAwMTIyMDlhMjhiOTc3NmQ3NmE4NzkzMTgwZWVmOScsCiAgICAgICAgJzZiODRjNjkyMjM5N2ViYTliNzJjZDI4NzIyODFhNjhhNWU2ODMyOTNhNTdhMjEzYjM4Y2Q4ZDdkM2Y0ZjI4MTEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGExZDYxZDBjYTcyMWExMWIxYTViZjZiN2Q4OGU4NDIxYTI4OGFiNWQ1YmJhNTIyMGU1M2QzMmI1ZjA2N2VjMicsCiAgICAgICAgJzgxNTdmNTVhN2M5OTMwNmM3OWMwNzY2MTYxYzkxZTI5NjZhNzM4OTlkMjc5YjQ4YTY1NWZiYTBmMWFkODM2ZjEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYThlMjgyZmYwYzk3MDY5MDcyMTVmZjk4ZThmZDQxNjYxNTMxMWRlMDQ0NmYxZTA2MmE3M2IwNjEwZDA2NGUxMycsCiAgICAgICAgJzdmOTczNTViOGRiODFjMDlhYmZiN2YzYzViMjUxNTg4OGI2NzlhM2U1MGRkNmJkNmNlZjdjNzMxMTFmNGNjMGMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTc0YTUzYjljOWEyODU4NzJkMzllNTZlNjkxM2NhYjE1ZDU5YjFmYTUxMjUwOGMwMjJmMzgyZGU4MzE5NDk3YycsCiAgICAgICAgJ2NjYzlkYzM3YWJmYzljMTY1N2I0MTU1ZjJjNDdmOWU2NjQ2YjNhMWQ4Y2I5ODU0MzgzZGExM2FjMDc5YWZhNzMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTU5Mzk2OTgxOTQzNzg1YzNkM2U1N2VkZjUwMThjZGJlMDM5ZTczMGU0OTE4YjNkODg0ZmRmZjA5NDc1YjdiYScsCiAgICAgICAgJzJlN2U1NTI4ODhjMzMxZGQ4YmEwMzg2YTRiOWNkNjg0OWM2NTNmNjRjODcwOTM4NWU5YjhhYmY4NzUyNGYyZmQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDJhNjNhNTBhZTQwMWU1NmQ2NDVhMTE1M2IxMDlhOGZjY2EwYTQzZDU2MWZiYTJkYmI1MTM0MGM5ZDgyYjE1MScsCiAgICAgICAgJ2U4MmQ4NmZiNjQ0M2ZjYjc1NjVhZWU1OGIyOTQ4MjIwYTcwZjc1MGFmNDg0Y2E1MmQ0MTQyMTc0ZGNmODk0MDUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNjQ1ODdlMjMzNTQ3MWViODkwZWU3ODk2ZDdjZmRjODY2YmFjYmRiZDM4MzkzMTdiMzQzNmY5YjQ1NjE3ZTA3MycsCiAgICAgICAgJ2Q5OWZjZGQ1YmY2OTAyZTJhZTk2ZGQ2NDQ3YzI5OWExODViOTBhMzkxMzNhZWFiMzU4Mjk5ZTVlOWZhZjY1ODknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODQ4MWJkZTBlNGU0ZDg4NWIzYTU0NmQzZTU0OWRlMDQyZjBhYTZjZWEyNTBlN2ZkMzU4ZDZjODZkZDQ1ZTQ1OCcsCiAgICAgICAgJzM4ZWU3YjhjYmE1NDA0ZGQ4NGEyNWJmMzljZWNiMmNhOTAwYTc5YzQyYjI2MmU1NTZkNjRiMWI1OTc3OTA1N2UnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTM0NjRhNTdhNzgxMDJhYTYyYjY5NzlhZTgxN2Y0NjM3ZmZjZmVkM2M0YjFjZTMwYmNkNjMwM2Y2Y2FmNjY2YicsCiAgICAgICAgJzY5YmUxNTkwMDQ2MTQ1ODBlZjdlNDMzNDUzY2NiMGNhNDhmMzAwYTgxZDA5NDJlMTNmNDk1YTkwN2Y2ZWNjMjcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYmM0YTlkZjViNzEzZmUyZTlhZWY0MzBiY2MxZGM5N2EwY2Q5Y2NlZGUyZjI4NTg4Y2FkYTNhMGQyZDgzZjM2NicsCiAgICAgICAgJ2QzYTgxY2E2ZTc4NWMwNjM4MzkzN2FkZjRiNzk4Y2FhNmU4YTlmYmZhNTQ3YjE2ZDc1OGQ2NjY1ODFmMzNjMScKICAgICAgXSwKICAgICAgWwogICAgICAgICc4YzI4YTk3YmY4Mjk4YmMwZDIzZDhjNzQ5NDUyYTMyZTY5NGI2NWUzMGE5NDcyYTM5NTRhYjMwZmU1MzI0Y2FhJywKICAgICAgICAnNDBhMzA0NjNhMzMwNTE5MzM3OGZlZGYzMWY3Y2MwZWI3YWU3ODRmMDQ1MWNiOTQ1OWU3MWRjNzNjYmVmOTQ4MicKICAgICAgXSwKICAgICAgWwogICAgICAgICc4ZWE5NjY2MTM5NTI3YThjMWRkOTRjZTRmMDcxZmQyM2M4YjM1MGM1YTRiYjMzNzQ4YzRiYTExMWZhY2NhZTAnLAogICAgICAgICc2MjBlZmFiYmM4ZWUyNzgyZTI0ZTdjMGNmYjk1YzVkNzM1Yjc4M2JlOWNmMGY4ZTk1NWFmMzRhMzBlNjJiOTQ1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2RkMzYyNWZhZWY1YmEwNjA3NDY2OTcxNmJiZDM3ODhkODliZGRlODE1OTU5OTY4MDkyZjc2Y2M0ZWI5YTk3ODcnLAogICAgICAgICc3YTE4OGZhMzUyMGUzMGQ0NjFkYTI1MDEwNDU3MzFjYTk0MTQ2MTk4Mjg4MzM5NTkzN2Y2OGQwMGM2NDRhNTczJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Y3MTBkNzlkOWViOTYyMjk3ZTRmNjIzMmI0MGU4ZjdmZWIyYmM2MzgxNDYxNGQ2OTJjMTJkZTc1MjQwODIyMWUnLAogICAgICAgICdlYTk4ZTY3MjMyZDNiMzI5NWQzYjUzNTUzMjExNWNjYWM4NjEyYzcyMTg1MTYxNzUyNmFlNDdhOWM3N2JmYzgyJwogICAgICBdCiAgICBdCiAgfSwKICBuYWY6IHsKICAgIHduZDogNywKICAgIHBvaW50czogWwogICAgICBbCiAgICAgICAgJ2Y5MzA4YTAxOTI1OGMzMTA0OTM0NGY4NWY4OWQ1MjI5YjUzMWM4NDU4MzZmOTliMDg2MDFmMTEzYmNlMDM2ZjknLAogICAgICAgICczODhmN2IwZjYzMmRlODE0MGZlMzM3ZTYyYTM3ZjM1NjY1MDBhOTk5MzRjMjIzMWI2Y2I5ZmQ3NTg0YjhlNjcyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzJmOGJkZTRkMWEwNzIwOTM1NWI0YTcyNTBhNWM1MTI4ZTg4Yjg0YmRkYzYxOWFiN2NiYThkNTY5YjI0MGVmZTQnLAogICAgICAgICdkOGFjMjIyNjM2ZTVlM2Q2ZDRkYmE5ZGRhNmM5YzQyNmY3ODgyNzFiYWIwZDY4NDBkY2E4N2QzYWE2YWM2MmQ2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzVjYmRmMDY0NmU1ZGI0ZWFhMzk4ZjM2NWYyZWE3YTBlM2Q0MTliN2UwMzMwZTM5Y2U5MmJkZGVkY2FjNGY5YmMnLAogICAgICAgICc2YWViY2E0MGJhMjU1OTYwYTMxNzhkNmQ4NjFhNTRkYmE4MTNkMGI4MTNmZGU3YjVhNTA4MjYyODA4NzI2NGRhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2FjZDQ4NGUyZjBjN2Y2NTMwOWFkMTc4YTlmNTU5YWJkZTA5Nzk2OTc0YzU3ZTcxNGMzNWYxMTBkZmMyN2NjYmUnLAogICAgICAgICdjYzMzODkyMWIwYTdkOWZkNjQzODA5NzE3NjNiNjFlOWFkZDg4OGE0Mzc1ZjhlMGYwNWNjMjYyYWM2NGY5YzM3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc3NGFlN2Y4NThhOTQxMWU1ZWY0MjQ2YjcwYzY1YWFjNTY0OTk4MGJlNWMxNzg5MWJiZWMxNzg5NWRhMDA4Y2InLAogICAgICAgICdkOTg0YTAzMmViNmI1ZTE5MDI0M2RkNTZkN2I3YjM2NTM3MmRiMWUyZGZmOWQ2YTgzMDFkNzRjOWM5NTNjNjFiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2YyODc3M2MyZDk3NTI4OGJjN2QxZDIwNWMzNzQ4NjUxYjA3NWZiYzY2MTBlNThjZGRlZWRkZjhmMTk0MDVhYTgnLAogICAgICAgICdhYjA5MDJlOGQ4ODBhODk3NTgyMTJlYjY1Y2RhZjQ3M2ExYTA2ZGE1MjFmYTkxZjI5YjVjYjUyZGIwM2VkODEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDc5MjRkNGY3ZDQzZWE5NjVhNDY1YWUzMDk1ZmY0MTEzMWU1OTQ2ZjNjODVmNzllNDRhZGJjZjhlMjdlMDgwZScsCiAgICAgICAgJzU4MWUyODcyYTg2YzcyYTY4Mzg0MmVjMjI4Y2M2ZGVmZWE0MGFmMmJkODk2ZDNhNWM1MDRkYzlmZjZhMjZiNTgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGVmZGVhNGNkYjY3Nzc1MGE0MjBmZWU4MDdlYWNmMjFlYjk4OThhZTc5Yjk3Njg3NjZlNGZhYTA0YTJkNGEzNCcsCiAgICAgICAgJzQyMTFhYjA2OTQ2MzUxNjhlOTk3YjBlYWQyYTkzZGFlY2VkMWY0YTA0YTk1YzBmNmNmYjE5OWY2OWU1NmViNzcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMmI0ZWEwYTc5N2E0NDNkMjkzZWY1Y2ZmNDQ0ZjQ5NzlmMDZhY2ZlYmQ3ZTg2ZDI3NzQ3NTY1NjEzODM4NWI2YycsCiAgICAgICAgJzg1ZTg5YmMwMzc5NDVkOTNiMzQzMDgzYjVhMWM4NjEzMWEwMWY2MGM1MDI2OTc2M2I1NzBjODU0ZTVjMDliN2EnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzUyYmJmNGE0Y2RkMTI1NjRmOTNmYTMzMmNlMzMzMzAxZDlhZDQwMjcxZjgxMDcxODEzNDBhZWYyNWJlNTlkNScsCiAgICAgICAgJzMyMWViNDA3NTM0OGY1MzRkNTljMTgyNTlkZGEzZTFmNGExYjNiMmU3MWIxMDM5YzY3YmQzZDhiY2Y4MTk5OGMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMmZhMjEwNGQ2YjM4ZDExYjAyMzAwMTA1NTk4NzkxMjRlNDJhYjhkZmVmZjVmZjI5ZGM5Y2RhZGQ0ZWNhY2MzZicsCiAgICAgICAgJzJkZTEwNjgyOTVkZDg2NWI2NDU2OTMzNWJkNWRkODAxODFkNzBlY2ZjODgyNjQ4NDIzYmE3NmI1MzJiN2Q2NycKICAgICAgXSwKICAgICAgWwogICAgICAgICc5MjQ4Mjc5YjA5YjRkNjhkYWIyMWE5YjA2NmVkZGE4MzI2M2MzZDg0ZTA5NTcyZTI2OWNhMGNkN2Y1NDUzNzE0JywKICAgICAgICAnNzMwMTZmN2JmMjM0YWFkZTVkMWFhNzFiZGVhMmIxZmYzZmMwZGUyYTg4NzkxMmZmZTU0YTMyY2U5N2NiMzQwMicKICAgICAgXSwKICAgICAgWwogICAgICAgICdkYWVkNGYyYmUzYThiZjI3OGU3MDEzMmZiMGJlYjc1MjJmNTcwZTE0NGJmNjE1YzA3ZTk5NmQ0NDNkZWU4NzI5JywKICAgICAgICAnYTY5ZGNlNGE3ZDZjOThlOGQ0YTFhY2E4N2VmOGQ3MDAzZjgzYzIzMGYzYWZhNzI2YWI0MGU1MjI5MGJlMWM1NScKICAgICAgXSwKICAgICAgWwogICAgICAgICdjNDRkMTJjNzA2NWQ4MTJlOGFjZjI4ZDdjYmIxOWY5MDExZWNkOWU5ZmRmMjgxYjBlNmEzYjVlODdkMjJlN2RiJywKICAgICAgICAnMjExOWE0NjBjZTMyNmNkYzc2YzQ1OTI2Yzk4MmZkYWMwZTEwNmU4NjFlZGY2MWM1YTAzOTA2M2YwZTBlNjQ4MicKICAgICAgXSwKICAgICAgWwogICAgICAgICc2YTI0NWJmNmRjNjk4NTA0Yzg5YTIwY2ZkZWQ2MDg1MzE1MmI2OTUzMzZjMjgwNjNiNjFjNjVjYmQyNjllNmI0JywKICAgICAgICAnZTAyMmNmNDJjMmJkNGE3MDhiM2Y1MTI2ZjE2YTI0YWQ4YjMzYmE0OGQwNDIzYjZlZmQ1ZTYzNDgxMDBkOGE4MicKICAgICAgXSwKICAgICAgWwogICAgICAgICcxNjk3ZmZhNmZkOWRlNjI3YzA3N2UzZDJmZTU0MTA4NGNlMTMzMDBiMGJlYzExNDZmOTVhZTU3ZjBkMGJkNmE1JywKICAgICAgICAnYjljMzk4ZjE4NjgwNmY1ZDI3NTYxNTA2ZTQ1NTc0MzNhMmNmMTUwMDllNDk4YWU3YWRlZTlkNjNkMDFiMjM5NicKICAgICAgXSwKICAgICAgWwogICAgICAgICc2MDViZGIwMTk5ODE3MThiOTg2ZDBmMDdlODM0Y2IwZDlkZWI4MzYwZmZiN2Y2MWRmOTgyMzQ1ZWYyN2E3NDc5JywKICAgICAgICAnMjk3MmQyZGU0ZjhkMjA2ODFhNzhkOTNlYzk2ZmUyM2MyNmJmYWU4NGZiMTRkYjQzYjAxZTFlOTA1NmI4YzQ5JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzYyZDE0ZGFiNDE1MGJmNDk3NDAyZmRjNDVhMjE1ZTEwZGNiMDFjMzU0OTU5YjEwY2ZlMzFjN2U5ZDg3ZmYzM2QnLAogICAgICAgICc4MGZjMDZiZDhjYzViMDEwOTgwODhhMTk1MGVlZDBkYjAxYWExMzI5NjdhYjQ3MjIzNWY1NjQyNDgzYjI1ZWFmJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzgwYzYwYWQwMDQwZjI3ZGFkZTViNGIwNmM0MDhlNTZiMmM1MGU5ZjU2YjliOGI0MjVlNTU1YzJmODYzMDhiNmYnLAogICAgICAgICcxYzM4MzAzZjFjYzVjMzBmMjZlNjZiYWQ3ZmU3MmY3MGE2NWVlZDRjYmU3MDI0ZWIxYWEwMWY1NjQzMGJkNTdhJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzdhOTM3NWFkNjE2N2FkNTRhYTc0YzYzNDhjYzU0ZDM0NGNjNWRjOTQ4N2Q4NDcwNDlkNWVhYmIwZmEwM2M4ZmInLAogICAgICAgICdkMGUzZmE5ZWNhODcyNjkwOTU1OWUwZDc5MjY5MDQ2YmRjNTllYTEwYzcwY2UyYjAyZDQ5OWVjMjI0ZGM3ZjcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDUyOGVjZDliNjk2YjU0YzkwN2E5ZWQwNDU0NDdhNzliYjQwOGVjMzliNjhkZjUwNGJiNTFmNDU5YmMzZmZjOScsCiAgICAgICAgJ2VlY2Y0MTI1MzEzNmU1Zjk5OTY2ZjIxODgxZmQ2NTZlYmM0MzQ1NDA1YzUyMGRiYzA2MzQ2NWI1MjE0MDk5MzMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDkzNzBhNGI1ZjQzNDEyZWEyNWY1MTRlOGVjZGFkMDUyNjYxMTVlNGE3ZWNiMTM4NzIzMTgwOGY4YjQ1OTYzJywKICAgICAgICAnNzU4ZjNmNDFhZmQ2ZWQ0MjhiMzA4MWIwNTEyZmQ2MmE1NGMzZjNhZmJiNWI2NzY0YjY1MzA1MmExMjk0OWM5YScKICAgICAgXSwKICAgICAgWwogICAgICAgICc3N2YyMzA5MzZlZTg4Y2JiZDczZGY5MzBkNjQ3MDJlZjg4MWQ4MTFlMGUxNDk4ZTJmMWMxM2ViMWZjMzQ1ZDc0JywKICAgICAgICAnOTU4ZWY0MmE3ODg2YjY0MDBhMDgyNjZlOWJhMWIzNzg5NmM5NTMzMGQ5NzA3N2NiYmU4ZWIzYzc2NzFjNjBkNicKICAgICAgXSwKICAgICAgWwogICAgICAgICdmMmRhYzk5MWNjNGNlNGI5ZWE0NDg4N2U1YzdjMGJjZTU4YzgwMDc0YWI5ZDRkYmFlYjI4NTMxYjc3MzlmNTMwJywKICAgICAgICAnZTBkZWRjOWIzYjJmOGRhZDRkYTFmMzJkZWMyNTMxZGY5ZWI1ZmJlYjA1OThlNGZkMWExMTdkYmE3MDNhM2MzNycKICAgICAgXSwKICAgICAgWwogICAgICAgICc0NjNiM2Q5ZjY2MjYyMWZiMWI0YmU4ZmJiZTI1MjAxMjVhMjE2Y2RmYzlkYWUzZGViY2JhNDg1MGM2OTBkNDViJywKICAgICAgICAnNWVkNDMwZDc4YzI5NmMzNTQzMTE0MzA2ZGQ4NjIyZDdjNjIyZTI3Yzk3MGExZGUzMWNiMzc3YjAxYWY3MzA3ZScKICAgICAgXSwKICAgICAgWwogICAgICAgICdmMTZmODA0MjQ0ZTQ2ZTJhMDkyMzJkNGFmZjNiNTk5NzZiOThmYWMxNDMyOGEyZDFhMzI0OTZiNDk5OThmMjQ3JywKICAgICAgICAnY2VkYWJkOWI4MjIwM2Y3ZTEzZDIwNmZjZGY0ZTMzZDkyYTZjNTNjMjZlNWNjZTI2ZDY1Nzk5NjJjNGUzMWRmNicKICAgICAgXSwKICAgICAgWwogICAgICAgICdjYWY3NTQyNzJkYzg0NTYzYjAzNTJiN2ExNDMxMWFmNTVkMjQ1MzE1YWNlMjdjNjUzNjllMTVmNzE1MWQ0MWQxJywKICAgICAgICAnY2I0NzQ2NjBlZjM1ZjVmMmE0MWI2NDNmYTVlNDYwNTc1ZjRmYTliNzk2MjIzMmE1YzMyZjkwODMxOGEwNDQ3NicKICAgICAgXSwKICAgICAgWwogICAgICAgICcyNjAwY2E0YjI4MmNiOTg2Zjg1ZDBmMTcwOTk3OWQ4YjQ0YTA5YzA3Y2I4NmQ3YzEyNDQ5N2JjODZmMDgyMTIwJywKICAgICAgICAnNDExOWI4ODc1M2MxNWJkNmE2OTNiMDNmY2RkYmI0NWQ1YWM2YmU3NGFiNWYwZWY0NGIwYmU5NDc1YTdlNGI0MCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NjM1Y2E3MmQ3ZTg0MzJjMzM4ZWM1M2NkMTIyMjBiYzAxYzQ4Njg1ZTI0ZjdkYzhjNjAyYTc3NDY5OThlNDM1JywKICAgICAgICAnOTFiNjQ5NjA5NDg5ZDYxM2QxZDVlNTkwZjc4ZTZkNzRlY2ZjMDYxZDU3MDQ4YmFkOWU3NmYzMDJjNWI5YzYxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc1NGUzMjM5ZjMyNTU3MGNkYmJmNGE4N2RlZWU4YTY2YjdmMmIzMzQ3OWQ0NjhmYmMxYTUwNzQzYmY1NmNjMTgnLAogICAgICAgICc2NzNmYjg2ZTViZGEzMGZiM2NkMGVkMzA0ZWE0OWEwMjNlZTMzZDAxOTdhNjk1ZDBjNWQ5ODA5M2M1MzY2ODMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTNlNmJkMTA3MWExZTk2YWZmNTc4NTljODJkNTcwZjAzMzA4MDA2NjFkMWM5NTJmOWZlMjY5NDY5MWQ5YjllOCcsCiAgICAgICAgJzU5YzllMGJiYTM5NGU3NmY0MGMwYWE1ODM3OWEzY2I2YTVhMjI4Mzk5M2U5MGM0MTY3MDAyYWY0OTIwZTM3ZjUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTg2YjQ4M2QwNTZhMDMzODI2YWU3M2Q4OGY3MzI5ODVjNGNjYjFmMzJiYTM1ZjRiNGNjNDdmZGNmMDRhYTZlYicsCiAgICAgICAgJzNiOTUyZDMyYzY3Y2Y3N2UyZTE3NDQ2ZTIwNDE4MGFiMjFmYjgwOTA4OTUxMzhiNGE0YTc5N2Y4NmU4MDg4OGInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZGY5ZDcwYTZiOTg3NmNlNTQ0Yzk4NTYxZjRiZTRmNzI1NDQyZTZkMmI3MzdkOWM5MWE4MzIxNzI0Y2UwOTYzZicsCiAgICAgICAgJzU1ZWIyZGFmZDg0ZDZjY2Q1Zjg2MmI3ODVkYzM5ZDRhYjE1NzIyMjcyMGVmOWRhMjE3YjhjNDVjZjJiYTI0MTcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNWVkZDVjYzIzYzUxZTg3YTQ5N2NhODE1ZDVkY2UwZjhhYjUyNTU0Zjg0OWVkODk5NWRlNjRjNWYzNGNlNzE0MycsCiAgICAgICAgJ2VmYWU5YzhkYmMxNDEzMDY2MWU4Y2VjMDMwYzg5YWQwYzEzYzY2YzBkMTdhMjkwNWNkYzcwNmFiNzM5OWE4NjgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMjkwNzk4YzJiNjQ3NjgzMGRhMTJmZTAyMjg3ZTllNzc3YWEzZmJhMWMzNTViMTdhNzIyZDM2MmY4NDYxNGZiYScsCiAgICAgICAgJ2UzOGRhNzZkY2Q0NDA2MjE5ODhkMDBiY2Y3OWFmMjVkNWIyOWMwOTRkYjJhMjMxNDZkMDAzYWZkNDE5NDNlN2EnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYWYzYzQyM2E5NWQ5ZjViMzA1NDc1NGVmYTE1MGFjMzljZDI5NTUyZmUzNjAyNTczNjJkZmRlY2VmNDA1M2I0NScsCiAgICAgICAgJ2Y5OGEzZmQ4MzFlYjJiNzQ5YTkzYjBlNmYzNWNmYjQwYzhjZDVhYTY2N2ExNTU4MWJjMmZlZGVkNDk4ZmQ5YzYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzY2ZGJiMjRkMTM0ZTc0NWNjY2FhMjhjOTliZjI3NDkwNmJiNjZiMjZkY2Y5OGRmOGQyZmVkNTBkODg0MjQ5YScsCiAgICAgICAgJzc0NGIxMTUyZWFjYmU1ZTM4ZGNjODg3OTgwZGEzOGI4OTc1ODRhNjVmYTA2Y2VkZDJjOTI0Zjk3Y2JhYzU5OTYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNTlkYmY0NmY4Yzk0NzU5YmEyMTI3N2MzMzc4NGY0MTY0NWY3YjQ0ZjZjNTk2YTU4Y2U5MmU2NjYxOTFhYmUzZScsCiAgICAgICAgJ2M1MzRhZDQ0MTc1ZmJjMzAwZjRlYTZjZTY0ODMwOWEwNDJjZTczOWE3OTE5Nzk4Y2Q4NWUyMTZjNGEzMDdmNmUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZjEzYWRhOTUxMDNjNDUzNzMwNWU2OTFlNzRlOWE0YThkZDY0N2U3MTFhOTVlNzNjYjYyZGM2MDE4Y2ZkODdiOCcsCiAgICAgICAgJ2UxMzgxN2I0NGVlMTRkZTY2M2JmNGJjODA4MzQxZjMyNjk0OWUyMWE2YTc1YzI1NzA3Nzg0MTliZGFmNTczM2QnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzc1NGI0ZmEwZThhY2VkMDZkNDE2N2EyYzU5Y2NhNGNkYTE4NjljMDZlYmFkZmI2NDg4NTUwMDE1YTg4NTIyYycsCiAgICAgICAgJzMwZTkzZTg2NGU2NjlkODIyMjRiOTY3YzMwMjBiOGZhOGQxZTRlMzUwYjZjYmNjNTM3YTQ4YjU3ODQxMTYzYTInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOTQ4ZGNhZGY1OTkwZTA0OGFhMzg3NGQ0NmFiZWY5ZDcwMTg1OGY5NWRlODA0MWQyYTY4MjhjOTllMjI2MjUxOScsCiAgICAgICAgJ2U0OTFhNDI1MzdmNmU1OTdkNWQyOGEzMjI0YjFiYzI1ZGY5MTU0ZWZiZDJlZjFkMmNiYmEyY2FlNTM0N2Q1N2UnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzk2MjQxNDQ1MGM3NmMxNjg5YzdiNDhmODIwMmVjMzdmYjIyNGNmNWFjMGJmYTE1NzAzMjhhOGEzZDdjNzdhYicsCiAgICAgICAgJzEwMGI2MTBlYzRmZmI0NzYwZDVjMWZjMTMzZWY2ZjZiMTI1MDdhMDUxZjA0YWM1NzYwYWZhNWIyOWRiODM0MzcnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzUxNDA4NzgzNDk2NGI1NGIxNWIxNjA2NDRkOTE1NDg1YTE2OTc3MjI1Yjg4NDdiYjBkZDA4NTEzN2VjNDdjYScsCiAgICAgICAgJ2VmMGFmYmIyMDU2MjA1NDQ4ZTE2NTJjNDhlODEyN2ZjNjAzOWU3N2MxNWMyMzc4YjdlN2QxNWEwZGUyOTMzMTEnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDNjYzMwYWQ2YjQ4M2U0YmM3OWNlMmM5ZGQ4YmM1NDk5M2U5NDdlYjhkZjc4N2I0NDI5NDNkM2Y3YjUyN2VhZicsCiAgICAgICAgJzhiMzc4YTIyZDgyNzI3OGQ4OWM1ZTliZThmOTUwOGFlM2MyYWQ0NjI5MDM1ODYzMGFmYjM0ZGIwNGVlZGUwYTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTYyNGQ4NDc4MDczMjg2MGNlMWM3OGZjYmZlZmUwOGIyYjI5ODIzZGI5MTNmNjQ5Mzk3NWJhMGZmNDg0NzYxMCcsCiAgICAgICAgJzY4NjUxY2Y5YjZkYTkwM2UwOTE0NDQ4YzZjZDlkNGNhODk2ODc4ZjUyODJiZTRjOGNjMDZlMmE0MDQwNzg1NzUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNzMzY2U4MGRhOTU1YThhMjY5MDJjOTU2MzNlNjJhOTg1MTkyNDc0YjVhZjIwN2RhNmRmN2I0ZmQ1ZmM2MWNkNCcsCiAgICAgICAgJ2Y1NDM1YTJiZDJiYWRmN2Q0ODVhNGQ4YjhkYjlmY2NlM2UxZWY4ZTAyMDFlNDU3OGM1NDY3M2JjMWRjNWVhMWQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMTVkOTQ0MTI1NDk0NTA2NGNmMWExYzMzYmJkM2I0OWY4OTY2YzUwOTIxNzFlNjk5ZWYyNThkZmFiODFjMDQ1YycsCiAgICAgICAgJ2Q1NmViMzBiNjk0NjNlNzIzNGY1MTM3YjczYjg0MTc3NDM0ODAwYmFjZWJmYzY4NWZjMzdiYmU5ZWZlNDA3MGQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTFkMGZjZjJlYzlkZTY3NWI2MTIxMzZlNWNlNzBkMjcxYzIxNDE3YzlkMmI4YWFhYWMxMzg1OTlkMDcxNzk0MCcsCiAgICAgICAgJ2VkZDc3ZjUwYmNiNWEzY2FiMmU5MDczNzMwOTY2N2YyNjQxNDYyYTU0MDcwZjNkNTE5MjEyZDM5YzE5N2E2MjknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTIyZmJlMTVjMGFmOGNjYzU3ODBjMDczNWY4NGRiZTlhNzkwYmFkZWU4MjQ1YzA2YzdjYTM3MzMxY2IzNjk4MCcsCiAgICAgICAgJ2E4NTViYWJhZDVjZDYwYzg4YjQzMGE2OWY1M2ExYTdhMzgyODkxNTQ5NjQ3OTliZTQzZDA2ZDc3ZDMxZGEwNicKICAgICAgXSwKICAgICAgWwogICAgICAgICczMTEwOTFkZDk4NjBlOGUyMGVlMTM0NzNjMTE1NWY1ZjY5NjM1ZTM5NDcwNGVhYTc0MDA5NDUyMjQ2Y2ZhOWIzJywKICAgICAgICAnNjZkYjY1NmY4N2QxZjA0ZmZmZDFmMDQ3ODhjMDY4MzA4NzFlYzVhNjRmZWVlNjg1YmQ4MGYwYjEyODZkODM3NCcKICAgICAgXSwKICAgICAgWwogICAgICAgICczNGMxZmQwNGQzMDFiZTg5YjMxYzA0NDJkM2U2YWMyNDg4MzkyOGI0NWE5MzQwNzgxODY3ZDQyMzJlYzJkYmRmJywKICAgICAgICAnOTQxNDY4NWU5N2IxYjU5NTRiZDQ2ZjczMDE3NDEzNmQ1N2YxY2VlYjQ4NzQ0M2RjNTMyMTg1N2JhNzNhYmVlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2YyMTllYTVkNmI1NDcwMWMxYzE0ZGU1YjU1N2ViNDJhOGQxM2YzYWJiY2QwOGFmZmNjMmE1ZTZiMDQ5YjhkNjMnLAogICAgICAgICc0Y2I5NTk1N2U4M2Q0MGIwZjczYWY0NTQ0Y2NjZjZiMWY0YjA4ZDNjMDdiMjdmYjhkOGMyOTYyYTQwMDc2NmQxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2Q3Yjg3NDBmNzRhOGZiYWFiMWY2ODNkYjhmNDVkZTI2NTQzYTU0OTBiY2E2MjcwODcyMzY5MTI0NjlhMGI0NDgnLAogICAgICAgICdmYTc3OTY4MTI4ZDljOTJlZTEwMTBmMzM3YWQ0NzE3ZWZmMTVkYjVlZDNjMDQ5YjM0MTFlMDMxNWVhYTQ1OTNiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMyZDMxYzIyMmY4ZjZmMGVmODZmN2M5OGQzYTMzMzVlYWQ1YmNkMzJhYmRkOTQyODlmZTRkMzA5MWFhODI0YmYnLAogICAgICAgICc1ZjMwMzJmNTg5MjE1NmUzOWNjZDNkNzkxNWI5ZTFkYTJlNmRhYzllNmYyNmU5NjExMThkMTRiODQ2MmUxNjYxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc0NjFmMzcxOTE0YWIzMjY3MTA0NWExNTVkOTgzMWVhODc5M2Q3N2NkNTk1OTJjNDM0MGY4NmNiYzE4MzQ3YjUnLAogICAgICAgICc4ZWMwYmEyMzhiOTZiZWMwY2JkZGRjYWUwYWE0NDI1NDJlZWUxZmY1MGM5ODZlYTZiMzk4NDdiM2NjMDkyZmY2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VlMDc5YWRiMWRmMTg2MDA3NDM1NmEyNWFhMzgyMDZhNmQ3MTZiMmMzZTY3NDUzZDI4NzY5OGJhZDdiMmIyZDYnLAogICAgICAgICc4ZGMyNDEyYWFmZTNiZTVjNGM1ZjM3ZTBlY2M1ZjlmNmE0NDY5ODlhZjA0YzRlMjVlYmFhYzQ3OWVjMWM4YzFlJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE2ZWM5M2U0NDdlYzgzZjA0NjdiMTgzMDJlZTYyMGY3ZTY1ZGUzMzE4NzRjOWRjNzJiZmQ4NjE2YmE5ZGE2YjUnLAogICAgICAgICc1ZTQ2MzExNTBlNjJmYjQwZDBlOGMyYTdjYTU4MDRhMzlkNTgxODZhNTBlNDk3MTM5NjI2Nzc4ZTI1YjA2NzRkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2VhYTVmOTgwYzI0NWY2ZjAzODk3ODI5MGFmYTcwYjZiZDg4NTU4OTdmOThiNmFhNDg1Yjk2MDY1ZDUzN2JkOTknLAogICAgICAgICdmNjVmNWQzZTI5MmMyZTA4MTlhNTI4MzkxYzk5NDYyNGQ3ODQ4NjlkN2U2ZWE2N2ZiMTgwNDEwMjRlZGMwN2RjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc4Yzk0MDc1NDRhYzEzMjY5MmVlMTkxMGEwMjQzOTk1OGFlMDQ4NzcxNTEzNDJlYTk2YzRiNmIzNWE0OWY1MScsCiAgICAgICAgJ2YzZTAzMTkxNjllYjliODVkNTQwNDc5NTUzOWE1ZTY4ZmExZmJkNTgzYzA2NGQyNDYyYjY3NWYxOTRhM2RkYjQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDk0ZjRiZTIxOWExYTc3MDE2ZGNkODM4NDMxYWVhMDAwMWNkYzhhZTdhNmZjNjg4NzI2NTc4ZDk3MDI4NTdhNScsCiAgICAgICAgJzQyMjQyYTk2OTI4M2E1ZjMzOWJhN2YwNzVlMzZiYTJhZjkyNWNlMzBkNzY3ZWQ2ZTU1ZjRiMDMxODgwZDU2MmMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTU5OGE4MDMwZGE2ZDg2YzZiYzdmMmY1MTQ0ZWE1NDlkMjgyMTFlYTU4ZmFhNzBlYmY0YzFlNjY1YzFmZTliNScsCiAgICAgICAgJzIwNGI1ZDZmODQ4MjJjMzA3ZTRiNGE3MTQwNzM3YWVjMjNmYzYzYjY1YjM1Zjg2YTEwMDI2ZGJkMmQ4NjRlNmInCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYzQxOTE2MzY1YWJiMmI1ZDA5MTkyZjVmMmRiZWFmZWMyMDhmMDIwZjEyNTcwYTE4NGRiYWRjM2U1ODU5NTk5NycsCiAgICAgICAgJzRmMTQzNTFkMDA4N2VmYTQ5ZDI0NWIzMjg5ODQ5ODlkNWNhZjk0NTBmMzRiZmMwZWQxNmU5NmI1OGZhOTkxMycKICAgICAgXSwKICAgICAgWwogICAgICAgICc4NDFkNjA2M2E1ODZmYTQ3NWE3MjQ2MDRkYTAzYmM1YjkyYTJlMGQyZTBhMzZhY2ZlNGM3M2E1NTE0NzQyODgxJywKICAgICAgICAnNzM4NjdmNTljMDY1OWU4MTkwNGY5YTFjNzU0MzY5OGU2MjU2MmQ2NzQ0YzE2OWNlN2EzNmRlMDFhOGQ2MTU0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzVlOTViYjM5OWE2OTcxZDM3NjAyNjk0N2Y4OWJkZTJmMjgyYjMzODEwOTI4YmU0ZGVkMTEyYWM0ZDcwZTIwZDUnLAogICAgICAgICczOWYyM2YzNjY4MDkwODViZWViZmM3MTE4MTMxMzc3NWE5OWM5YWVkN2Q4YmEzOGIxNjEzODRjNzQ2MDEyODY1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzM2ZTQ2NDFhNTM5NDhmZDQ3NmMzOWY4YTk5ZmQ5NzRlNWVjMDc1NjRiNTMxNWQ4YmY5OTQ3MWJjYTBlZjJmNjYnLAogICAgICAgICdkMjQyNGIxYjFhYmU0ZWI4MTY0MjI3YjA4NWM5YWE5NDU2ZWExMzQ5M2ZkNTYzZTA2ZmQ1MWNmNTY5NGM3OGZjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzMzNjU4MWVhN2JmYmJiMjkwYzE5MWEyZjUwN2E0MWNmNTY0Mzg0MjE3MGU5MTRmYWVhYjI3YzJjNTc5ZjcyNicsCiAgICAgICAgJ2VhZDEyMTY4NTk1ZmUxYmU5OTI1MjEyOWI2ZTU2YjMzOTFmN2FiMTQxMGNkMWUwZWYzZGNkY2FiZDJmZGEyMjQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnOGFiODk4MTZkYWRmZDZiNmExZjI2MzRmY2YwMGVjODQwMzc4MTAyNWVkNjg5MGM0ODQ5NzQyNzA2YmQ0M2VkZScsCiAgICAgICAgJzZmZGNlZjA5ZjJmNmQwYTA0NGU2NTRhZWY2MjQxMzZmNTAzZDQ1OWMzZTg5ODQ1ODU4YTQ3YTkxMjljZGQyNGUnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMWUzM2YxYTc0NmM5YzU3NzgxMzMzNDRkOTI5OWZjYWEyMGIwOTM4ZThhY2ZmMjU0NGJiNDAyODRiOGM1ZmI5NCcsCiAgICAgICAgJzYwNjYwMjU3ZGQxMWIzYWE5YzhlZDYxOGQyNGVkZmYyMzA2ZDMyMGYxZDAzMDEwZTMzYTdkMjA1N2YzYjNiNicKICAgICAgXSwKICAgICAgWwogICAgICAgICc4NWI3YzFkY2IzY2VjMWI3ZWU3ZjMwZGVkNzlkZDIwYTBlZDFmNGNjMThjYmNmY2ZhNDEwMzYxZmQ4ZjA4ZjMxJywKICAgICAgICAnM2Q5OGE5Y2RkMDI2ZGQ0M2YzOTA0OGYyNWE4ODQ3ZjRmY2FmYWQxODk1ZDdhNjMzYzZmZWQzYzM1ZTk5OTUxMScKICAgICAgXSwKICAgICAgWwogICAgICAgICcyOWRmOWZiZDhkOWU0NjUwOTI3NWY0YjEyNWQ2ZDQ1ZDdmYmU5YTNiODc4YTdhZjg3MmEyODAwNjYxYWM1ZjUxJywKICAgICAgICAnYjRjNGZlOTljNzc1YTYwNmUyZDg4NjIxNzkxMzlmZmRhNjFkYzg2MWMwMTllNTVjZDI4NzZlYjJhMjdkODRiJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2EwYjFjYWUwNmIwYTg0N2EzZmVhNmU2NzFhYWY4YWRmZGZlNThjYTJmNzY4MTA1YzgwODJiMmU0NDlmY2UyNTInLAogICAgICAgICdhZTQzNDEwMmVkZGUwOTU4ZWM0YjE5ZDkxN2E2YTI4ZTZiNzJkYTE4MzRhZmYwZTY1MGYwNDk1MDNhMjk2Y2YyJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzRlOGNlYWZiOWIzZTlhMTM2ZGM3ZmY2N2U4NDAyOTViNDk5ZGZiM2IyMTMzZTRiYTExM2YyZTRjMGUxMjFlNScsCiAgICAgICAgJ2NmMjE3NDExOGM4YjZkN2E0YjQ4ZjZkNTM0Y2U1Yzc5NDIyYzA4NmE2MzQ2MDUwMmI4MjdjZTYyYTMyNjY4M2MnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZDI0YTQ0ZTA0N2UxOWI2ZjVhZmI4MWM3Y2EyZjY5MDgwYTUwNzY2ODlhMDEwOTE5ZjQyNzI1YzJiNzg5YTMzYicsCiAgICAgICAgJzZmYjhkNTU5MWI0NjZmOGZjNjNkYjUwZjFjMGYxYzY5MDEzZjk5Njg4N2I4MjQ0ZDJjZGVjNDE3YWZlYThmYTMnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZWEwMTYwNmE3YTZjOWNkZDI0OWZkZmNmYWNiOTk1ODQwMDFlZGQyOGFiYmFiNzdiNTEwNGU5OGU4ZTNiMzVkNCcsCiAgICAgICAgJzMyMmFmNDkwOGM3MzEyYjBjZmJmZTM2OWY3YTdiM2NkYjdkNDQ5NGJjMjgyMzcwMGNmZDY1MjE4OGEzZWE5OGQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYWY4YWRkYmYyYjY2MWM4YTZjNjMyODY1NWViOTY2NTEyNTIwMDdkOGM1ZWEzMWJlNGFkMTk2ZGU4Y2UyMTMxZicsCiAgICAgICAgJzY3NDllNjdjMDI5Yjg1ZjUyYTAzNGVhZmQwOTY4MzZiMjUyMDgxODY4MGUyNmFjOGYzZGZiY2RiNzE3NDk3MDAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTNhZTE5NzQ1NjZjYTA2Y2M1MTZkNDdlMGZiMTY1YTY3NGEzZGFiY2ZjYTE1ZTcyMmYwZTM0NTBmNDU4ODknLAogICAgICAgICcyYWVhYmU3ZTQ1MzE1MTAxMTYyMTdmMDdiZjRkMDczMDBkZTk3ZTQ4NzRmODFmNTMzNDIwYTcyZWViMGJkNmE0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzU5MWVlMzU1MzEzZDk5NzIxY2Y2OTkzZmZlZDFlM2UzMDE5OTNmZjNlZDI1ODgwMjA3NWVhOGNlZDM5N2UyNDYnLAogICAgICAgICdiMGVhNTU4YTExM2MzMGJlYTYwZmM0Nzc1NDYwYzc5MDFmZjBiMDUzZDI1Y2EyYmRlZWU5OGYxYTRiZTVkMTk2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzExMzk2ZDU1ZmRhNTRjNDlmMTlhYTk3MzE4ZDhkYTYxZmE4NTg0ZTQ3YjA4NDk0NTA3N2NmMDMyNTViNTI5ODQnLAogICAgICAgICc5OThjNzRhOGNkNDVhYzAxMjg5ZDU4MzNhN2JlYjQ3NDRmZjUzNmIwMWIyNTdiZTRjNTc2N2JlYTkzZWE1N2E0JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzNjNWQyYTFiYTM5YzVhMTc5MDAwMDczOGM5ZTBjNDBiOGRjZGZkNTQ2ODc1NGI2NDA1NTQwMTU3ZTAxN2FhN2EnLAogICAgICAgICdiMjI4NDI3OTk5NWEzNGUyZjlkNGRlNzM5NmZjMThiODBmOWI4YjlmZGQyNzBmNjY2MWY3OWNhNGM4MWJkMjU3JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2NjODcwNGI4YTYwYTBkZWZhM2E5OWE3Mjk5ZjJlOWMzZmJjMzk1YWZiMDRhYzA3ODQyNWVmOGExNzkzY2MwMzAnLAogICAgICAgICdiZGQ0NjAzOWZlZWQxNzg4MWQxZTA4NjJkYjM0N2Y4Y2YzOTViNzRmYzRiY2RjNGU5NDBiNzRlM2FjMWYxYjEzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2M1MzNlNGY3ZWE4NTU1YWFjZDk3NzdhYzVjYWQyOWI5N2RkNGRlZmNjYzUzZWU3ZWEyMDQxMTliMjg4OWIxOTcnLAogICAgICAgICc2ZjBhMjU2YmM1ZWZkZjQyOWEyZmI2MjQyZjFhNDNhMmQ5YjkyNWJiNGE0YjNhMjZiYjhlMGY0NWViNTk2MDk2JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2MxNGY4ZjJjY2IyN2Q2ZjEwOWY2ZDA4ZDAzY2M5NmE2OWJhOGMzNGVlYzA3YmJjZjU2NmQ0OGUzM2RhNjU5MycsCiAgICAgICAgJ2MzNTlkNjkyM2JiMzk4ZjdmZDQ0NzNlMTZmZTFjMjg0NzViNzQwZGQwOTgwNzVlNmMwZTg2NDkxMTNkYzNhMzgnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnYTZjYmMzMDQ2YmM2YTQ1MGJhYzI0Nzg5ZmExNzExNWE0Yzk3MzllZDc1ZjhmMjFjZTQ0MWY3MmUwYjkwZTZlZicsCiAgICAgICAgJzIxYWU3ZjQ2ODBlODg5YmIxMzA2MTllMmMwZjk1YTM2MGNlYjU3M2M3MDYwMzEzOTg2MmFmZDYxN2ZhOWI5ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICczNDdkNmQ5YTAyYzQ4OTI3ZWJmYjg2YzEzNTliMWNhZjEzMGEzYzAyNjdkMTFjZTYzNDRiMzlmOTlkNDNjYzM4JywKICAgICAgICAnNjBlYTdmNjFhMzUzNTI0ZDFjOTg3ZjZlY2VjOTJmMDg2ZDU2NWFiNjg3ODcwY2IxMjY4OWZmMWUzMWM3NDQ0OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdkYTY1NDVkMjE4MWRiOGQ5ODNmN2RjYjM3NWVmNTg2NmQ0N2M2N2IxYmYzMWM4Y2Y4NTVlZjc0MzdiNzI2NTZhJywKICAgICAgICAnNDliOTY3MTVhYjY4NzhhNzllNzhmMDdjZTU2ODBjNWQ2NjczMDUxYjQ5MzViZDg5N2ZlYTgyNGI3N2RjMjA4YScKICAgICAgXSwKICAgICAgWwogICAgICAgICdjNDA3NDdjYzlkMDEyY2IxYTEzYjgxNDgzMDljNmRlN2VjMjVkNjk0NWQ2NTcxNDZiOWQ1OTk0YjhmZWIxMTExJywKICAgICAgICAnNWNhNTYwNzUzYmUyYTEyZmM2ZGU2Y2FmMmNiNDg5NTY1ZGI5MzYxNTZiOTUxNGUxYmI1ZTgzMDM3ZTBmYTJkNCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc0ZTQyYzhlYzgyYzk5Nzk4Y2NmM2E2MTBiZTg3MGU3ODMzOGM3ZjcxMzM0OGJkMzRjODIwM2VmNDAzN2YzNTAyJywKICAgICAgICAnNzU3MWQ3NGVlNWUwZmI5MmE3YThiMzNhMDc3ODMzNDFhNTQ5MjE0NGNjNTRiY2M0MGE5NDQ3MzY5MzYwNjQzNycKICAgICAgXSwKICAgICAgWwogICAgICAgICczNzc1YWI3MDg5YmM2YWY4MjNhYmEyZTFhZjcwYjIzNmQyNTFjYWRiMGM4Njc0MzI4NzUyMmExYjNiMGRlZGVhJywKICAgICAgICAnYmU1MmQxMDdiY2ZhMDlkOGJjYjk3MzZhODI4Y2ZhN2ZhYzhkYjE3YmY3YTc2YTJjNDJhZDk2MTQwOTAxOGNmNycKICAgICAgXSwKICAgICAgWwogICAgICAgICdjZWUzMWNiZjdlMzRlYzM3OWQ5NGZiODE0ZDNkNzc1YWQ5NTQ1OTVkMTMxNGJhODg0Njk1OWUzZTgyZjc0ZTI2JywKICAgICAgICAnOGZkNjRhMTRjMDZiNTg5YzI2Yjk0N2FlMmJjZjZiZmEwMTQ5ZWYwYmUxNGVkNGQ4MGY0NDhhMDFjNDNiMWM2ZCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdiNGY5ZWFlYTA5YjY5MTc2MTlmNmVhNmE0ZWI1NDY0ZWZkZGI1OGZkNDViMWViZWZjZGMxYTAxZDA4YjQ3OTg2JywKICAgICAgICAnMzllNWM5OTI1YjVhNTRiMDc0MzNhNGYxOGM2MTcyNmY4YmIxMzFjMDEyY2E1NDJlYjI0YThhYzA3MjAwNjgyYScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkNDI2M2RmYzNkMmRmOTIzYTAxNzlhNDg5NjZkMzBjZTg0ZTI1MTVhZmMzZGNjYzFiNzc5MDc3OTJlYmNjNjBlJywKICAgICAgICAnNjJkZmFmMDdhMGY3OGZlYjMwZTMwZDYyOTU4NTNjZTE4OWUxMjc3NjBhZDZjZjdmYWUxNjRlMTIyYTIwOGQ1NCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc0ODQ1NzUyNDgyMGZhNjVhNGY4ZDM1ZWI2OTMwODU3YzAwMzJhY2MwYTRhMmRlNDIyMjMzZWVkYTg5NzYxMmM0JywKICAgICAgICAnMjVhNzQ4YWIzNjc5NzlkOTg3MzNjMzhhMWZhMWMyZTdkYzZjYzA3ZGIyZDYwYTlhZTdhNzZhYWE0OWJkMGY3NycKICAgICAgXSwKICAgICAgWwogICAgICAgICdkZmVlZWYxODgxMTAxZjJjYjExNjQ0ZjNhMmFmZGZjMjA0NWUxOTkxOTE1MjkyM2YzNjdhMTc2N2MxMWNjZWRhJywKICAgICAgICAnZWNmYjcwNTZjZjFkZTA0MmY5NDIwYmFiMzk2NzkzYzBjMzkwYmRlNzRiNGJiZGZmMTZhODNhZTA5YTlhNzUxNycKICAgICAgXSwKICAgICAgWwogICAgICAgICc2ZDdlZjZiMTc1NDNmODM3M2M1NzNmNDRlMWYzODk4MzVkODliY2JjNjA2MmNlZDM2YzgyZGY4M2I4ZmFlODU5JywKICAgICAgICAnY2Q0NTBlYzMzNTQzODk4NmRmZWZhMTBjNTdmZWE5YmNjNTIxYTA5NTliMmQ4MGJiZjc0YjE5MGRjYTcxMmQxMCcKICAgICAgXSwKICAgICAgWwogICAgICAgICdlNzU2MDVkNTkxMDJhNWEyNjg0NTAwZDNiOTkxZjJlM2YzYzg4YjkzMjI1NTQ3MDM1YWYyNWFmNjZlMDQ1NDFmJywKICAgICAgICAnZjVjNTQ3NTRhOGY3MWVlNTQwYjliNDg3Mjg0NzNlMzE0ZjcyOWFjNTMwOGIwNjkzODM2MDk5MGUyYmZhZDEyNScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlYjk4NjYwZjRjNGRmYWEwNmEyYmU0NTNkNTAyMGJjOTlhMGMyZTYwYWJlMzg4NDU3ZGQ0M2ZlZmIxZWQ2MjBjJywKICAgICAgICAnNmNiOWE4ODc2ZDljYjg1MjA2MDlhZjNhZGQyNmNkMjBhMGE3Y2Q4YTk0MTExMzFjZTg1ZjQ0MTAwMDk5MjIzZScKICAgICAgXSwKICAgICAgWwogICAgICAgICcxM2U4N2IwMjdkODUxNGQzNTkzOWYyZTY4OTJiMTk5MjIxNTQ1OTY5NDE4ODgzMzZkYzM1NjNlM2I4ZGJhOTQyJywKICAgICAgICAnZmVmNWEzYzY4MDU5YTZkZWM1ZDYyNDExNGJmMWU5MWFhYzJiOWRhNTY4ZDZhYmViMjU3MGQ1NTY0NmI4YWRmMScKICAgICAgXSwKICAgICAgWwogICAgICAgICdlZTE2MzAyNmU5ZmQ2ZmUwMTdjMzhmMDZhNWJlNmZjMTI1NDI0YjM3MWNlMjcwOGU3YmY0NDkxNjkxZTU3NjRhJywKICAgICAgICAnMWFjYjI1MGYyNTVkZDYxYzQzZDk0Y2NjNjcwZDBmNThmNDlhZTNmYTE1Yjk2NjIzZTU0MzBkYTBhZDZjNjJiMicKICAgICAgXSwKICAgICAgWwogICAgICAgICdiMjY4ZjVlZjlhZDUxZTRkNzhkZTNhNzUwYzJkYzg5YjFlNjI2ZDQzNTA1ODY3OTk5OTMyZTVkYjMzYWYzZDgwJywKICAgICAgICAnNWYzMTBkNGIzYzk5YjllYmIxOWY3N2Q0MWMxZGVlMDE4Y2YwZDM0ZmQ0MTkxNjE0MDAzZTk0NWExMjE2ZTQyMycKICAgICAgXSwKICAgICAgWwogICAgICAgICdmZjA3ZjMxMThhOWRmMDM1ZTlmYWQ4NWViNmM3YmZlNDJiMDJmMDFjYTk5Y2VlYTNiZjdmZmRiYTkzYzQ3NTBkJywKICAgICAgICAnNDM4MTM2ZDYwM2U4NThhM2E1YzQ0MGMzOGVjY2JhZGRjMWQyOTQyMTE0ZTJlZGRkNDc0MGQwOThjZWQxZjBkOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc4ZDhiOTg1NWM3YzA1MmEzNDE0NmZkMjBmZmI2NThiZWE0YjlmNjllMGQ4MjVlYmVjMTZlOGMzY2UyYjUyNmExJywKICAgICAgICAnY2RiNTU5ZWVkYzJkNzlmOTI2YmFmNDRmYjg0ZWE0ZDQ0YmNmNTBmZWU1MWQ3Y2ViMzBlMmU3ZjQ2MzAzNjc1OCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc1MmRiMGI1Mzg0ZGZiZjA1YmZhOWQ0NzJkN2FlMjZkZmU0Yjg1MWNlY2E5MWIxZWJhNTQyNjMxODBkYTMyYjYzJywKICAgICAgICAnYzNiOTk3ZDA1MGVlNWQ0MjNlYmFmNjZhNmRiOWY1N2IzMTgwYzkwMjg3NTY3OWRlOTI0YjY5ZDg0YTdiMzc1JwogICAgICBdLAogICAgICBbCiAgICAgICAgJ2U2MmY5NDkwZDNkNTFkYTYzOTVlZmQyNGU4MDkxOWNjN2QwZjI5YzNmM2ZhNDhjNmZmZjU0M2JlY2JkNDMzNTInLAogICAgICAgICc2ZDg5YWQ3YmE0ODc2YjBiMjJjMmNhMjgwYzY4Mjg2MmYzNDJjODU5MWYxZGFmNTE3MGUwN2JmZDljY2FmYTdkJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzdmMzBlYTI0NzZiMzk5YjQ5NTc1MDljODhmNzdkMDE5MWFmYTJmZjVjYjdiMTRmZDZkOGU3ZDY1YWFhYjExOTMnLAogICAgICAgICdjYTVlZjdkNGIyMzFjOTRjM2IxNTM4OWE1ZjYzMTFlOWRhZmY3YmI2N2IxMDNlOTg4MGVmNGJmZjYzN2FjYWVjJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzUwOThmZjFlMWQ5ZjE0ZmI0NmEyMTBmYWRhNmM5MDNmZWYwZmI3YjRhMWRkMWQ5YWM2MGEwMzYxODAwYjdhMDAnLAogICAgICAgICc5NzMxMTQxZDgxZmM4ZjgwODRkMzdjNmU3NTQyMDA2YjNlZTFiNDBkNjBkZmU1MzYyYTViMTMyZmQxN2RkYzAnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnMzJiNzhjN2RlOWVlNTEyYTcyODk1YmU2YjljYmVmYTZlMmYzYzRjY2NlNDQ1Yzk2YjlmMmM4MWUyNzc4YWQ1OCcsCiAgICAgICAgJ2VlMTg0OWY1MTNkZjcxZTMyZWZjMzg5NmVlMjgyNjBjNzNiYjgwNTQ3YWUyMjc1YmE0OTcyMzc3OTRjODc1M2MnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnZTJjYjc0ZmRkYzhlOWZiY2QwNzZlZWYyYTdjNzJiMGNlMzdkNTBmMDgyNjlkZmMwNzRiNTgxNTUwNTQ3YTRmNycsCiAgICAgICAgJ2QzYWEyZWQ3MWM5ZGQyMjQ3YTYyZGYwNjI3MzZlYjBiYWRkZWE5ZTM2MTIyZDJiZTg2NDFhYmNiMDA1Y2M0YTQnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnODQzODQ0NzU2NmQ0ZDdiZWRhZGMyOTk0OTZhYjM1NzQyNjAwOWEzNWYyMzVjYjE0MWJlMGQ5OWNkMTBhZTNhOCcsCiAgICAgICAgJ2M0ZTEwMjA5MTY5ODBhNGRhNWQwMWFjNWU2YWQzMzA3MzRlZjBkNzkwNjYzMWM0ZjIzOTA0MjZiMmVkZDc5MWYnCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnNDE2MmQ0ODhiODk0MDIwMzliNTg0YzZmYzZjMzA4ODcwNTg3ZDljNDZmNjYwYjg3OGFiNjVjODJjNzExZDY3ZScsCiAgICAgICAgJzY3MTYzZTkwMzIzNjI4OWY3NzZmMjJjMjVmYjhhM2FmYzE3MzJmMmI4NGI0ZTk1ZGJkYTQ3YWU1YTA4NTI2NDknCiAgICAgIF0sCiAgICAgIFsKICAgICAgICAnM2ZhZDNmYTg0Y2FmMGYzNGYwZjg5YmZkMmRjZjU0ZmMxNzVkNzY3YWVjM2U1MDY4NGYzYmE0YTRiZjVmNjgzZCcsCiAgICAgICAgJ2NkMWJjN2NiNmNjNDA3YmIyZjBjYTY0N2M3MThhNzMwY2Y3MTg3MmU3ZDBkMmE1M2ZhMjBlZmNkZmU2MTgyNicKICAgICAgXSwKICAgICAgWwogICAgICAgICc2NzRmMjYwMGEzMDA3YTAwNTY4YzFhN2NlMDVkMDgxNmMxZmI4NGJmMTM3MDc5OGYxYzY5NTMyZmFlYjFhODZiJywKICAgICAgICAnMjk5ZDIxZjk0MTNmMzNiM2VkZjQzYjI1NzAwNDU4MGI3MGRiNTdkYTBiMTgyMjU5ZTA5ZWVjYzY5ZTBkMzhhNScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkMzJmNGRhNTRhZGU3NGFiYjgxYjgxNWFkMWZiM2IyNjNkODJkNmM2OTI3MTRiY2ZmODdkMjliZDVlZTlmMDhmJywKICAgICAgICAnZjk0MjllNzM4YjhlNTNiOTY4ZTk5MDE2YzA1OTcwNzc4MmUxNGY0NTM1MzU5ZDU4MmZjNDE2OTEwYjNlZWE4NycKICAgICAgXSwKICAgICAgWwogICAgICAgICczMGU0ZTY3MDQzNTM4NTU1NmU1OTM2NTcxMzU4NDVkMzZmYmI2OTMxZjcyYjA4Y2IxZWQ5NTRmMWUzY2UzZmY2JywKICAgICAgICAnNDYyZjliY2U2MTk4OTg2Mzg0OTkzNTAxMTNiYmM5YjEwYTg3OGQzNWRhNzA3NDBkYzY5NWE1NTllYjg4ZGI3YicKICAgICAgXSwKICAgICAgWwogICAgICAgICdiZTIwNjIwMDNjNTFjYzMwMDQ2ODI5MDQzMzBlNGRlZTdmM2RjZDEwYjAxZTU4MGJmMTk3MWIwNGQ0Y2FkMjk3JywKICAgICAgICAnNjIxODhiYzQ5ZDYxZTU0Mjg1NzNkNDhhNzRlMWM2NTViMWM2MTA5MDkwNTY4MmEwZDU1NThlZDcyZGNjYjliYycKICAgICAgXSwKICAgICAgWwogICAgICAgICc5MzE0NDQyM2FjZTM0NTFlZDI5ZTBmYjlhYzJhZjIxMWNiNmU4NGE2MDFkZjU5OTNjNDE5ODU5ZmZmNWRmMDRhJywKICAgICAgICAnN2MxMGRmYjE2NGMzNDI1ZjVjNzFhM2Y5ZDc5OTIwMzhmMTA2NTIyNGY3MmJiOWQxZDkwMmE2ZDEzMDM3YjQ3YycKICAgICAgXSwKICAgICAgWwogICAgICAgICdiMDE1ZjgwNDRmNWZjYmRjZjIxY2EyNmQ2YzM0ZmI4MTk3ODI5MjA1YzdiN2QyYTdjYjY2NDE4YzE1N2IxMTJjJywKICAgICAgICAnYWI4YzFlMDg2ZDA0ZTgxMzc0NGE2NTViMmRmOGQ1ZjgzYjNjZGM2ZmFhMzA4OGMxZDNhZWExNDU0ZTNhMWQ1ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICdkNWU5ZTFkYTY0OWQ5N2Q4OWU0ODY4MTE3YTQ2NWEzYTRmOGExOGRlNTdhMTQwZDM2YjNmMmFmMzQxYTIxYjUyJywKICAgICAgICAnNGNiMDQ0MzdmMzkxZWQ3MzExMWExM2NjMWQ0ZGQwZGIxNjkzNDY1YzIyNDA0ODBkODk1NWU4NTkyZjI3NDQ3YScKICAgICAgXSwKICAgICAgWwogICAgICAgICdkM2FlNDEwNDdkZDdjYTA2NWRiZjhlZDc3Yjk5MjQzOTk4MzAwNWNkNzJlMTZkNmY5OTZhNTMxNmQzNjk2NmJiJywKICAgICAgICAnYmQxYWViMjFhZDIyZWJiMjJhMTBmMDMwMzQxN2M2ZDk2NGY4Y2RkN2RmMGFjYTYxNGIxMGRjMTRkMTI1YWM0NicKICAgICAgXSwKICAgICAgWwogICAgICAgICc0NjNlMjc2M2Q4ODVmOTU4ZmM2NmNkZDIyODAwZjBhNDg3MTk3ZDBhODJlMzc3YjQ5ZjgwYWY4N2M4OTdiMDY1JywKICAgICAgICAnYmZlZmFjZGIwZTVkMGZkN2RmM2EzMTFhOTRkZTA2MmIyNmI4MGM2MWZiYzk3NTA4Yjc5OTkyNjcxZWY3Y2E3ZicKICAgICAgXSwKICAgICAgWwogICAgICAgICc3OTg1ZmRmZDEyN2MwNTY3YzZmNTNlYzFiYjYzZWMzMTU4ZTU5N2M0MGJmZTc0N2M4M2NkZGZjOTEwNjQxOTE3JywKICAgICAgICAnNjAzYzEyZGFmM2Q5ODYyZWYyYjI1ZmUxZGUyODlhZWQyNGVkMjkxZTBlYzY3MDg3MDNhNWJkNTY3ZjMyZWQwMycKICAgICAgXSwKICAgICAgWwogICAgICAgICc3NGExYWQ2YjVmNzZlMzlkYjJkZDI0OTQxMGVhYzdmOTllNzRjNTljYjgzZDJkMGVkNWZmMTU0M2RhNzcwM2U5JywKICAgICAgICAnY2M2MTU3ZWYxOGM5YzYzY2Q2MTkzZDgzNjMxYmJlYTAwOTNlMDk2ODk0MmU4YzMzZDU3MzdmZDc5MGUwZGIwOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICczMDY4MmE1MDcwMzM3NWY2MDJkNDE2NjY0YmExOWI3ZmM5YmFiNDJjNzI3NDc0NjNhNzFkMDg5NmIyMmY2ZGEzJywKICAgICAgICAnNTUzZTA0ZjZiMDE4YjRmYTZjOGYzOWU3ZjMxMWQzMTc2MjkwZDBlMGYxOWNhNzNmMTc3MTRkOTk3N2EyMmZmOCcKICAgICAgXSwKICAgICAgWwogICAgICAgICc5ZTIxNThmMGQ3YzBkNWYyNmMzNzkxZWZlZmE3OTU5NzY1NGU3YTJiMjQ2NGY1MmIxZWU2YzEzNDc3NjllZjU3JywKICAgICAgICAnNzEyZmNkZDFiOTA1M2YwOTAwM2EzNDgxZmE3NzYyZTlmZmQ3YzhlZjM1YTM4NTA5ZTJmYmYyNjI5MDA4MzczJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzE3NmUyNjk4OWE0M2M5Y2ZlYmE0MDI5YzIwMjUzOGMyODE3MmU1NjZlM2M0ZmNlNzMyMjg1N2YzYmUzMjdkNjYnLAogICAgICAgICdlZDhjYzlkMDRiMjllYjg3N2QyNzBiNDg3OGRjNDNjMTlhZWZkMzFmNGVlZTA5ZWU3YjQ3ODM0YzFmYTRiMWMzJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzc1ZDQ2ZWZlYTM3NzFlNmU2OGFiYjg5YTEzYWQ3NDdlY2YxODkyMzkzZGZjNGYxYjcwMDQ3ODhjNTAzNzRkYTgnLAogICAgICAgICc5ODUyMzkwYTk5NTA3Njc5ZmQwYjg2ZmQyYjM5YTg2OGQ3ZWZjMjIxNTEzNDZlMWEzY2E0NzI2NTg2YTZiZWQ4JwogICAgICBdLAogICAgICBbCiAgICAgICAgJzgwOWEyMGM2N2Q2NDkwMGZmYjY5OGM0YzgyNWY2ZDVmMjMxMGZiMDQ1MWM4NjkzNDViNzMxOWY2NDU2MDU3MjEnLAogICAgICAgICc5ZTk5NDk4MGQ5OTE3ZTIyYjc2YjA2MTkyN2ZhMDQxNDNkMDk2Y2NjNTQ5NjNlNmE1ZWJmYTVmM2Y4ZTI4NmMxJwogICAgICBdLAogICAgICBbCiAgICAgICAgJzFiMzg5MDNhNDNmN2YxMTRlZDQ1MDBiNGVhYzcwODNmZGVmZWNlMWNmMjljNjM1MjhkNTYzNDQ2Zjk3MmMxODAnLAogICAgICAgICc0MDM2ZWRjOTMxYTYwYWU4ODkzNTNmNzdmZDUzZGU0YTI3MDhiMjZiNmY1ZGE3MmFkMzM5NDExOWRhZjQwOGY5JwogICAgICBdCiAgICBdCiAgfQp9OwoKfSx7fV0sMTE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKdmFyIHV0aWxzID0gZXhwb3J0czsKdmFyIEJOID0gcmVxdWlyZSgnYm4uanMnKTsKCnV0aWxzLmFzc2VydCA9IGZ1bmN0aW9uIGFzc2VydCh2YWwsIG1zZykgewogIGlmICghdmFsKQogICAgdGhyb3cgbmV3IEVycm9yKG1zZyB8fCAnQXNzZXJ0aW9uIGZhaWxlZCcpOwp9OwoKZnVuY3Rpb24gdG9BcnJheShtc2csIGVuYykgewogIGlmIChBcnJheS5pc0FycmF5KG1zZykpCiAgICByZXR1cm4gbXNnLnNsaWNlKCk7CiAgaWYgKCFtc2cpCiAgICByZXR1cm4gW107CiAgdmFyIHJlcyA9IFtdOwogIGlmICh0eXBlb2YgbXNnICE9PSAnc3RyaW5nJykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspCiAgICAgIHJlc1tpXSA9IG1zZ1tpXSB8IDA7CiAgICByZXR1cm4gcmVzOwogIH0KICBpZiAoIWVuYykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGMgPSBtc2cuY2hhckNvZGVBdChpKTsKICAgICAgdmFyIGhpID0gYyA+PiA4OwogICAgICB2YXIgbG8gPSBjICYgMHhmZjsKICAgICAgaWYgKGhpKQogICAgICAgIHJlcy5wdXNoKGhpLCBsbyk7CiAgICAgIGVsc2UKICAgICAgICByZXMucHVzaChsbyk7CiAgICB9CiAgfSBlbHNlIGlmIChlbmMgPT09ICdoZXgnKSB7CiAgICBtc2cgPSBtc2cucmVwbGFjZSgvW15hLXowLTldKy9pZywgJycpOwogICAgaWYgKG1zZy5sZW5ndGggJSAyICE9PSAwKQogICAgICBtc2cgPSAnMCcgKyBtc2c7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkgKz0gMikKICAgICAgcmVzLnB1c2gocGFyc2VJbnQobXNnW2ldICsgbXNnW2kgKyAxXSwgMTYpKTsKICB9CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0FycmF5ID0gdG9BcnJheTsKCmZ1bmN0aW9uIHplcm8yKHdvcmQpIHsKICBpZiAod29yZC5sZW5ndGggPT09IDEpCiAgICByZXR1cm4gJzAnICsgd29yZDsKICBlbHNlCiAgICByZXR1cm4gd29yZDsKfQp1dGlscy56ZXJvMiA9IHplcm8yOwoKZnVuY3Rpb24gdG9IZXgobXNnKSB7CiAgdmFyIHJlcyA9ICcnOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKQogICAgcmVzICs9IHplcm8yKG1zZ1tpXS50b1N0cmluZygxNikpOwogIHJldHVybiByZXM7Cn0KdXRpbHMudG9IZXggPSB0b0hleDsKCnV0aWxzLmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShhcnIsIGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHRvSGV4KGFycik7CiAgZWxzZQogICAgcmV0dXJuIGFycjsKfTsKCi8vIFJlcHJlc2VudCBudW0gaW4gYSB3LU5BRiBmb3JtCmZ1bmN0aW9uIGdldE5BRihudW0sIHcpIHsKICB2YXIgbmFmID0gW107CiAgdmFyIHdzID0gMSA8PCAodyArIDEpOwogIHZhciBrID0gbnVtLmNsb25lKCk7CiAgd2hpbGUgKGsuY21wbigxKSA+PSAwKSB7CiAgICB2YXIgejsKICAgIGlmIChrLmlzT2RkKCkpIHsKICAgICAgdmFyIG1vZCA9IGsuYW5kbG4od3MgLSAxKTsKICAgICAgaWYgKG1vZCA+ICh3cyA+PiAxKSAtIDEpCiAgICAgICAgeiA9ICh3cyA+PiAxKSAtIG1vZDsKICAgICAgZWxzZQogICAgICAgIHogPSBtb2Q7CiAgICAgIGsuaXN1Ym4oeik7CiAgICB9IGVsc2UgewogICAgICB6ID0gMDsKICAgIH0KICAgIG5hZi5wdXNoKHopOwoKICAgIC8vIE9wdGltaXphdGlvbiwgc2hpZnQgYnkgd29yZCBpZiBwb3NzaWJsZQogICAgdmFyIHNoaWZ0ID0gKGsuY21wbigwKSAhPT0gMCAmJiBrLmFuZGxuKHdzIC0gMSkgPT09IDApID8gKHcgKyAxKSA6IDE7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHNoaWZ0OyBpKyspCiAgICAgIG5hZi5wdXNoKDApOwogICAgay5pdXNocm4oc2hpZnQpOwogIH0KCiAgcmV0dXJuIG5hZjsKfQp1dGlscy5nZXROQUYgPSBnZXROQUY7CgovLyBSZXByZXNlbnQgazEsIGsyIGluIGEgSm9pbnQgU3BhcnNlIEZvcm0KZnVuY3Rpb24gZ2V0SlNGKGsxLCBrMikgewogIHZhciBqc2YgPSBbCiAgICBbXSwKICAgIFtdCiAgXTsKCiAgazEgPSBrMS5jbG9uZSgpOwogIGsyID0gazIuY2xvbmUoKTsKICB2YXIgZDEgPSAwOwogIHZhciBkMiA9IDA7CiAgd2hpbGUgKGsxLmNtcG4oLWQxKSA+IDAgfHwgazIuY21wbigtZDIpID4gMCkgewoKICAgIC8vIEZpcnN0IHBoYXNlCiAgICB2YXIgbTE0ID0gKGsxLmFuZGxuKDMpICsgZDEpICYgMzsKICAgIHZhciBtMjQgPSAoazIuYW5kbG4oMykgKyBkMikgJiAzOwogICAgaWYgKG0xNCA9PT0gMykKICAgICAgbTE0ID0gLTE7CiAgICBpZiAobTI0ID09PSAzKQogICAgICBtMjQgPSAtMTsKICAgIHZhciB1MTsKICAgIGlmICgobTE0ICYgMSkgPT09IDApIHsKICAgICAgdTEgPSAwOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG04ID0gKGsxLmFuZGxuKDcpICsgZDEpICYgNzsKICAgICAgaWYgKChtOCA9PT0gMyB8fCBtOCA9PT0gNSkgJiYgbTI0ID09PSAyKQogICAgICAgIHUxID0gLW0xNDsKICAgICAgZWxzZQogICAgICAgIHUxID0gbTE0OwogICAgfQogICAganNmWzBdLnB1c2godTEpOwoKICAgIHZhciB1MjsKICAgIGlmICgobTI0ICYgMSkgPT09IDApIHsKICAgICAgdTIgPSAwOwogICAgfSBlbHNlIHsKICAgICAgdmFyIG04ID0gKGsyLmFuZGxuKDcpICsgZDIpICYgNzsKICAgICAgaWYgKChtOCA9PT0gMyB8fCBtOCA9PT0gNSkgJiYgbTE0ID09PSAyKQogICAgICAgIHUyID0gLW0yNDsKICAgICAgZWxzZQogICAgICAgIHUyID0gbTI0OwogICAgfQogICAganNmWzFdLnB1c2godTIpOwoKICAgIC8vIFNlY29uZCBwaGFzZQogICAgaWYgKDIgKiBkMSA9PT0gdTEgKyAxKQogICAgICBkMSA9IDEgLSBkMTsKICAgIGlmICgyICogZDIgPT09IHUyICsgMSkKICAgICAgZDIgPSAxIC0gZDI7CiAgICBrMS5pdXNocm4oMSk7CiAgICBrMi5pdXNocm4oMSk7CiAgfQoKICByZXR1cm4ganNmOwp9CnV0aWxzLmdldEpTRiA9IGdldEpTRjsKCmZ1bmN0aW9uIGNhY2hlZFByb3BlcnR5KG9iaiwgY29tcHV0ZXIpIHsKICB2YXIgbmFtZSA9IGNvbXB1dGVyLm5hbWU7CiAgdmFyIGtleSA9ICdfJyArIG5hbWU7CiAgb2JqLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uIGNhY2hlZFByb3BlcnR5KCkgewogICAgcmV0dXJuIHRoaXNba2V5XSAhPT0gdW5kZWZpbmVkID8gdGhpc1trZXldIDoKICAgICAgICAgICB0aGlzW2tleV0gPSBjb21wdXRlci5jYWxsKHRoaXMpOwogIH07Cn0KdXRpbHMuY2FjaGVkUHJvcGVydHkgPSBjYWNoZWRQcm9wZXJ0eTsKCmZ1bmN0aW9uIHBhcnNlQnl0ZXMoYnl0ZXMpIHsKICByZXR1cm4gdHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJyA/IHV0aWxzLnRvQXJyYXkoYnl0ZXMsICdoZXgnKSA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlczsKfQp1dGlscy5wYXJzZUJ5dGVzID0gcGFyc2VCeXRlczsKCmZ1bmN0aW9uIGludEZyb21MRShieXRlcykgewogIHJldHVybiBuZXcgQk4oYnl0ZXMsICdoZXgnLCAnbGUnKTsKfQp1dGlscy5pbnRGcm9tTEUgPSBpbnRGcm9tTEU7CgoKfSx7ImJuLmpzIjo0MX1dLDExODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAiX2FyZ3MiOiBbCiAgICBbCiAgICAgICJlbGxpcHRpY0BeNi4wLjAiLAogICAgICAiL2hvbWUvZ2lsL0Rlc2t0b3AvcmV0aGluay9kZXYtcnVudGltZS1jb3JlL25vZGVfbW9kdWxlcy9icm93c2VyaWZ5LXNpZ24iCiAgICBdCiAgXSwKICAiX2Zyb20iOiAiZWxsaXB0aWNAPj02LjAuMCA8Ny4wLjAiLAogICJfaWQiOiAiZWxsaXB0aWNANi4yLjMiLAogICJfaW5DYWNoZSI6IHRydWUsCiAgIl9pbnN0YWxsYWJsZSI6IHRydWUsCiAgIl9sb2NhdGlvbiI6ICIvZWxsaXB0aWMiLAogICJfbm9kZVZlcnNpb24iOiAiNS40LjEiLAogICJfbnBtVXNlciI6IHsKICAgICJlbWFpbCI6ICJmZWRvckBpbmR1dG55LmNvbSIsCiAgICAibmFtZSI6ICJpbmR1dG55IgogIH0sCiAgIl9ucG1WZXJzaW9uIjogIjMuMy4xMiIsCiAgIl9waGFudG9tQ2hpbGRyZW4iOiB7fSwKICAiX3JlcXVlc3RlZCI6IHsKICAgICJuYW1lIjogImVsbGlwdGljIiwKICAgICJyYXciOiAiZWxsaXB0aWNAXjYuMC4wIiwKICAgICJyYXdTcGVjIjogIl42LjAuMCIsCiAgICAic2NvcGUiOiBudWxsLAogICAgInNwZWMiOiAiPj02LjAuMCA8Ny4wLjAiLAogICAgInR5cGUiOiAicmFuZ2UiCiAgfSwKICAiX3JlcXVpcmVkQnkiOiBbCiAgICAiL2Jyb3dzZXJpZnktc2lnbiIsCiAgICAiL2NyZWF0ZS1lY2RoIgogIF0sCiAgIl9yZXNvbHZlZCI6ICJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9lbGxpcHRpYy8tL2VsbGlwdGljLTYuMi4zLnRneiIsCiAgIl9zaGFzdW0iOiAiMThlNDZkNzMwNmIwOTUxMjc1YTJkNDIwNjMyNzBhMTRiNzRlYmU5OSIsCiAgIl9zaHJpbmt3cmFwIjogbnVsbCwKICAiX3NwZWMiOiAiZWxsaXB0aWNAXjYuMC4wIiwKICAiX3doZXJlIjogIi9ob21lL2dpbC9EZXNrdG9wL3JldGhpbmsvZGV2LXJ1bnRpbWUtY29yZS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS1zaWduIiwKICAiYXV0aG9yIjogewogICAgImVtYWlsIjogImZlZG9yQGluZHV0bnkuY29tIiwKICAgICJuYW1lIjogIkZlZG9yIEluZHV0bnkiCiAgfSwKICAiYnVncyI6IHsKICAgICJ1cmwiOiAiaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvZWxsaXB0aWMvaXNzdWVzIgogIH0sCiAgImRlcGVuZGVuY2llcyI6IHsKICAgICJibi5qcyI6ICJeNC4wLjAiLAogICAgImJyb3JhbmQiOiAiXjEuMC4xIiwKICAgICJoYXNoLmpzIjogIl4xLjAuMCIsCiAgICAiaW5oZXJpdHMiOiAiXjIuMC4xIgogIH0sCiAgImRlc2NyaXB0aW9uIjogIkVDIGNyeXB0b2dyYXBoeSIsCiAgImRldkRlcGVuZGVuY2llcyI6IHsKICAgICJjb3ZlcmFsbHMiOiAiXjIuMTEuMyIsCiAgICAiaXN0YW5idWwiOiAiXjAuNC4yIiwKICAgICJqc2NzIjogIl4yLjkuMCIsCiAgICAianNoaW50IjogIl4yLjYuMCIsCiAgICAibW9jaGEiOiAiXjIuMS4wIgogIH0sCiAgImRpcmVjdG9yaWVzIjoge30sCiAgImRpc3QiOiB7CiAgICAic2hhc3VtIjogIjE4ZTQ2ZDczMDZiMDk1MTI3NWEyZDQyMDYzMjcwYTE0Yjc0ZWJlOTkiLAogICAgInRhcmJhbGwiOiAiaHR0cDovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9lbGxpcHRpYy8tL2VsbGlwdGljLTYuMi4zLnRneiIKICB9LAogICJmaWxlcyI6IFsKICAgICJsaWIiCiAgXSwKICAiZ2l0SGVhZCI6ICJjMzJmMjBiMjJiNDIwZWI2YWYzYzZkZGEyODk2M2RlYjdmYWNmODIzIiwKICAiaG9tZXBhZ2UiOiAiaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvZWxsaXB0aWMiLAogICJrZXl3b3JkcyI6IFsKICAgICJFQyIsCiAgICAiRWxsaXB0aWMiLAogICAgImN1cnZlIiwKICAgICJDcnlwdG9ncmFwaHkiCiAgXSwKICAibGljZW5zZSI6ICJNSVQiLAogICJtYWluIjogImxpYi9lbGxpcHRpYy5qcyIsCiAgIm1haW50YWluZXJzIjogWwogICAgewogICAgICAiZW1haWwiOiAiZmVkb3JAaW5kdXRueS5jb20iLAogICAgICAibmFtZSI6ICJpbmR1dG55IgogICAgfQogIF0sCiAgIm5hbWUiOiAiZWxsaXB0aWMiLAogICJvcHRpb25hbERlcGVuZGVuY2llcyI6IHt9LAogICJyZWFkbWUiOiAiRVJST1I6IE5vIFJFQURNRSBkYXRhIGZvdW5kISIsCiAgInJlcG9zaXRvcnkiOiB7CiAgICAidHlwZSI6ICJnaXQiLAogICAgInVybCI6ICJnaXQrc3NoOi8vZ2l0QGdpdGh1Yi5jb20vaW5kdXRueS9lbGxpcHRpYy5naXQiCiAgfSwKICAic2NyaXB0cyI6IHsKICAgICJjb3ZlcmFnZSI6ICJucG0gcnVuIHVuaXQgLS1jb3ZlcmFnZSIsCiAgICAiY292ZXJhbGxzIjogIm5wbSBydW4gY292ZXJhZ2UgJiYgY2F0IC4vY292ZXJhZ2UvbGNvdi5pbmZvIHwgY292ZXJhbGxzIiwKICAgICJqc2NzIjogImpzY3MgYmVuY2htYXJrcy8qLmpzIGxpYi8qLmpzIGxpYi8qKi8qLmpzIGxpYi8qKi8qKi8qLmpzIHRlc3QvKi5qcyIsCiAgICAianNoaW50IjogImpzY3MgYmVuY2htYXJrcy8qLmpzIGxpYi8qLmpzIGxpYi8qKi8qLmpzIGxpYi8qKi8qKi8qLmpzIHRlc3QvKi5qcyIsCiAgICAibGludCI6ICJucG0gcnVuIGpzY3MgJiYgbnBtIHJ1biBqc2hpbnQiLAogICAgInRlc3QiOiAibnBtIHJ1biBsaW50ICYmIG5wbSBydW4gdW5pdCIsCiAgICAidW5pdCI6ICJpc3RhbmJ1bCB0ZXN0IF9tb2NoYSAtLXJlcG9ydGVyPXNwZWMgdGVzdC8qLXRlc3QuanMiCiAgfSwKICAidmVyc2lvbiI6ICI2LjIuMyIKfQoKfSx7fV0sMTE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgbWQ1ID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gvbWQ1JykKbW9kdWxlLmV4cG9ydHMgPSBFVlBfQnl0ZXNUb0tleQpmdW5jdGlvbiBFVlBfQnl0ZXNUb0tleSAocGFzc3dvcmQsIHNhbHQsIGtleUxlbiwgaXZMZW4pIHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihwYXNzd29yZCkpIHsKICAgIHBhc3N3b3JkID0gbmV3IEJ1ZmZlcihwYXNzd29yZCwgJ2JpbmFyeScpCiAgfQogIGlmIChzYWx0ICYmICFCdWZmZXIuaXNCdWZmZXIoc2FsdCkpIHsKICAgIHNhbHQgPSBuZXcgQnVmZmVyKHNhbHQsICdiaW5hcnknKQogIH0KICBrZXlMZW4gPSBrZXlMZW4gLyA4CiAgaXZMZW4gPSBpdkxlbiB8fCAwCiAgdmFyIGtpID0gMAogIHZhciBpaSA9IDAKICB2YXIga2V5ID0gbmV3IEJ1ZmZlcihrZXlMZW4pCiAgdmFyIGl2ID0gbmV3IEJ1ZmZlcihpdkxlbikKICB2YXIgYWRkbWQgPSAwCiAgdmFyIG1kX2J1ZgogIHZhciBpCiAgdmFyIGJ1ZnMgPSBbXQogIHdoaWxlICh0cnVlKSB7CiAgICBpZiAoYWRkbWQrKyA+IDApIHsKICAgICAgYnVmcy5wdXNoKG1kX2J1ZikKICAgIH0KICAgIGJ1ZnMucHVzaChwYXNzd29yZCkKICAgIGlmIChzYWx0KSB7CiAgICAgIGJ1ZnMucHVzaChzYWx0KQogICAgfQogICAgbWRfYnVmID0gbWQ1KEJ1ZmZlci5jb25jYXQoYnVmcykpCiAgICBidWZzID0gW10KICAgIGkgPSAwCiAgICBpZiAoa2V5TGVuID4gMCkgewogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIGlmIChrZXlMZW4gPT09IDApIHsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIGlmIChpID09PSBtZF9idWYubGVuZ3RoKSB7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICBrZXlba2krK10gPSBtZF9idWZbaV0KICAgICAgICBrZXlMZW4tLQogICAgICAgIGkrKwogICAgICB9CiAgICB9CiAgICBpZiAoaXZMZW4gPiAwICYmIGkgIT09IG1kX2J1Zi5sZW5ndGgpIHsKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICBpZiAoaXZMZW4gPT09IDApIHsKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICAgIGlmIChpID09PSBtZF9idWYubGVuZ3RoKSB7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgICBpdltpaSsrXSA9IG1kX2J1ZltpXQogICAgICAgIGl2TGVuLS0KICAgICAgICBpKysKICAgICAgfQogICAgfQogICAgaWYgKGtleUxlbiA9PT0gMCAmJiBpdkxlbiA9PT0gMCkgewogICAgICBicmVhawogICAgfQogIH0KICBmb3IgKGkgPSAwOyBpIDwgbWRfYnVmLmxlbmd0aDsgaSsrKSB7CiAgICBtZF9idWZbaV0gPSAwCiAgfQogIHJldHVybiB7CiAgICBrZXk6IGtleSwKICAgIGl2OiBpdgogIH0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzAsImNyZWF0ZS1oYXNoL21kNSI6ODR9XSwxMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgaGFzaCA9IGV4cG9ydHM7CgpoYXNoLnV0aWxzID0gcmVxdWlyZSgnLi9oYXNoL3V0aWxzJyk7Cmhhc2guY29tbW9uID0gcmVxdWlyZSgnLi9oYXNoL2NvbW1vbicpOwpoYXNoLnNoYSA9IHJlcXVpcmUoJy4vaGFzaC9zaGEnKTsKaGFzaC5yaXBlbWQgPSByZXF1aXJlKCcuL2hhc2gvcmlwZW1kJyk7Cmhhc2guaG1hYyA9IHJlcXVpcmUoJy4vaGFzaC9obWFjJyk7CgovLyBQcm94eSBoYXNoIGZ1bmN0aW9ucyB0byB0aGUgbWFpbiBvYmplY3QKaGFzaC5zaGExID0gaGFzaC5zaGEuc2hhMTsKaGFzaC5zaGEyNTYgPSBoYXNoLnNoYS5zaGEyNTY7Cmhhc2guc2hhMjI0ID0gaGFzaC5zaGEuc2hhMjI0OwpoYXNoLnNoYTM4NCA9IGhhc2guc2hhLnNoYTM4NDsKaGFzaC5zaGE1MTIgPSBoYXNoLnNoYS5zaGE1MTI7Cmhhc2gucmlwZW1kMTYwID0gaGFzaC5yaXBlbWQucmlwZW1kMTYwOwoKfSx7Ii4vaGFzaC9jb21tb24iOjEyMSwiLi9oYXNoL2htYWMiOjEyMiwiLi9oYXNoL3JpcGVtZCI6MTIzLCIuL2hhc2gvc2hhIjoxMjQsIi4vaGFzaC91dGlscyI6MTI1fV0sMTIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGhhc2ggPSByZXF1aXJlKCcuLi9oYXNoJyk7CnZhciB1dGlscyA9IGhhc2gudXRpbHM7CnZhciBhc3NlcnQgPSB1dGlscy5hc3NlcnQ7CgpmdW5jdGlvbiBCbG9ja0hhc2goKSB7CiAgdGhpcy5wZW5kaW5nID0gbnVsbDsKICB0aGlzLnBlbmRpbmdUb3RhbCA9IDA7CiAgdGhpcy5ibG9ja1NpemUgPSB0aGlzLmNvbnN0cnVjdG9yLmJsb2NrU2l6ZTsKICB0aGlzLm91dFNpemUgPSB0aGlzLmNvbnN0cnVjdG9yLm91dFNpemU7CiAgdGhpcy5obWFjU3RyZW5ndGggPSB0aGlzLmNvbnN0cnVjdG9yLmhtYWNTdHJlbmd0aDsKICB0aGlzLnBhZExlbmd0aCA9IHRoaXMuY29uc3RydWN0b3IucGFkTGVuZ3RoIC8gODsKICB0aGlzLmVuZGlhbiA9ICdiaWcnOwoKICB0aGlzLl9kZWx0YTggPSB0aGlzLmJsb2NrU2l6ZSAvIDg7CiAgdGhpcy5fZGVsdGEzMiA9IHRoaXMuYmxvY2tTaXplIC8gMzI7Cn0KZXhwb3J0cy5CbG9ja0hhc2ggPSBCbG9ja0hhc2g7CgpCbG9ja0hhc2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShtc2csIGVuYykgewogIC8vIENvbnZlcnQgbWVzc2FnZSB0byBhcnJheSwgcGFkIGl0LCBhbmQgam9pbiBpbnRvIDMyYml0IGJsb2NrcwogIG1zZyA9IHV0aWxzLnRvQXJyYXkobXNnLCBlbmMpOwogIGlmICghdGhpcy5wZW5kaW5nKQogICAgdGhpcy5wZW5kaW5nID0gbXNnOwogIGVsc2UKICAgIHRoaXMucGVuZGluZyA9IHRoaXMucGVuZGluZy5jb25jYXQobXNnKTsKICB0aGlzLnBlbmRpbmdUb3RhbCArPSBtc2cubGVuZ3RoOwoKICAvLyBFbm91Z2ggZGF0YSwgdHJ5IHVwZGF0aW5nCiAgaWYgKHRoaXMucGVuZGluZy5sZW5ndGggPj0gdGhpcy5fZGVsdGE4KSB7CiAgICBtc2cgPSB0aGlzLnBlbmRpbmc7CgogICAgLy8gUHJvY2VzcyBwZW5kaW5nIGRhdGEgaW4gYmxvY2tzCiAgICB2YXIgciA9IG1zZy5sZW5ndGggJSB0aGlzLl9kZWx0YTg7CiAgICB0aGlzLnBlbmRpbmcgPSBtc2cuc2xpY2UobXNnLmxlbmd0aCAtIHIsIG1zZy5sZW5ndGgpOwogICAgaWYgKHRoaXMucGVuZGluZy5sZW5ndGggPT09IDApCiAgICAgIHRoaXMucGVuZGluZyA9IG51bGw7CgogICAgbXNnID0gdXRpbHMuam9pbjMyKG1zZywgMCwgbXNnLmxlbmd0aCAtIHIsIHRoaXMuZW5kaWFuKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSArPSB0aGlzLl9kZWx0YTMyKQogICAgICB0aGlzLl91cGRhdGUobXNnLCBpLCBpICsgdGhpcy5fZGVsdGEzMik7CiAgfQoKICByZXR1cm4gdGhpczsKfTsKCkJsb2NrSGFzaC5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIHRoaXMudXBkYXRlKHRoaXMuX3BhZCgpKTsKICBhc3NlcnQodGhpcy5wZW5kaW5nID09PSBudWxsKTsKCiAgcmV0dXJuIHRoaXMuX2RpZ2VzdChlbmMpOwp9OwoKQmxvY2tIYXNoLnByb3RvdHlwZS5fcGFkID0gZnVuY3Rpb24gcGFkKCkgewogIHZhciBsZW4gPSB0aGlzLnBlbmRpbmdUb3RhbDsKICB2YXIgYnl0ZXMgPSB0aGlzLl9kZWx0YTg7CiAgdmFyIGsgPSBieXRlcyAtICgobGVuICsgdGhpcy5wYWRMZW5ndGgpICUgYnl0ZXMpOwogIHZhciByZXMgPSBuZXcgQXJyYXkoayArIHRoaXMucGFkTGVuZ3RoKTsKICByZXNbMF0gPSAweDgwOwogIGZvciAodmFyIGkgPSAxOyBpIDwgazsgaSsrKQogICAgcmVzW2ldID0gMDsKCiAgLy8gQXBwZW5kIGxlbmd0aAogIGxlbiA8PD0gMzsKICBpZiAodGhpcy5lbmRpYW4gPT09ICdiaWcnKSB7CiAgICBmb3IgKHZhciB0ID0gODsgdCA8IHRoaXMucGFkTGVuZ3RoOyB0KyspCiAgICAgIHJlc1tpKytdID0gMDsKCiAgICByZXNbaSsrXSA9IDA7CiAgICByZXNbaSsrXSA9IDA7CiAgICByZXNbaSsrXSA9IDA7CiAgICByZXNbaSsrXSA9IDA7CiAgICByZXNbaSsrXSA9IChsZW4gPj4+IDI0KSAmIDB4ZmY7CiAgICByZXNbaSsrXSA9IChsZW4gPj4+IDE2KSAmIDB4ZmY7CiAgICByZXNbaSsrXSA9IChsZW4gPj4+IDgpICYgMHhmZjsKICAgIHJlc1tpKytdID0gbGVuICYgMHhmZjsKICB9IGVsc2UgewogICAgcmVzW2krK10gPSBsZW4gJiAweGZmOwogICAgcmVzW2krK10gPSAobGVuID4+PiA4KSAmIDB4ZmY7CiAgICByZXNbaSsrXSA9IChsZW4gPj4+IDE2KSAmIDB4ZmY7CiAgICByZXNbaSsrXSA9IChsZW4gPj4+IDI0KSAmIDB4ZmY7CiAgICByZXNbaSsrXSA9IDA7CiAgICByZXNbaSsrXSA9IDA7CiAgICByZXNbaSsrXSA9IDA7CiAgICByZXNbaSsrXSA9IDA7CgogICAgZm9yICh2YXIgdCA9IDg7IHQgPCB0aGlzLnBhZExlbmd0aDsgdCsrKQogICAgICByZXNbaSsrXSA9IDA7CiAgfQoKICByZXR1cm4gcmVzOwp9OwoKfSx7Ii4uL2hhc2giOjEyMH1dLDEyMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBobWFjID0gZXhwb3J0czsKCnZhciBoYXNoID0gcmVxdWlyZSgnLi4vaGFzaCcpOwp2YXIgdXRpbHMgPSBoYXNoLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKZnVuY3Rpb24gSG1hYyhoYXNoLCBrZXksIGVuYykgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBIbWFjKSkKICAgIHJldHVybiBuZXcgSG1hYyhoYXNoLCBrZXksIGVuYyk7CiAgdGhpcy5IYXNoID0gaGFzaDsKICB0aGlzLmJsb2NrU2l6ZSA9IGhhc2guYmxvY2tTaXplIC8gODsKICB0aGlzLm91dFNpemUgPSBoYXNoLm91dFNpemUgLyA4OwogIHRoaXMuaW5uZXIgPSBudWxsOwogIHRoaXMub3V0ZXIgPSBudWxsOwoKICB0aGlzLl9pbml0KHV0aWxzLnRvQXJyYXkoa2V5LCBlbmMpKTsKfQptb2R1bGUuZXhwb3J0cyA9IEhtYWM7CgpIbWFjLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIGluaXQoa2V5KSB7CiAgLy8gU2hvcnRlbiBrZXksIGlmIG5lZWRlZAogIGlmIChrZXkubGVuZ3RoID4gdGhpcy5ibG9ja1NpemUpCiAgICBrZXkgPSBuZXcgdGhpcy5IYXNoKCkudXBkYXRlKGtleSkuZGlnZXN0KCk7CiAgYXNzZXJ0KGtleS5sZW5ndGggPD0gdGhpcy5ibG9ja1NpemUpOwoKICAvLyBBZGQgcGFkZGluZyB0byBrZXkKICBmb3IgKHZhciBpID0ga2V5Lmxlbmd0aDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspCiAgICBrZXkucHVzaCgwKTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyBpKyspCiAgICBrZXlbaV0gXj0gMHgzNjsKICB0aGlzLmlubmVyID0gbmV3IHRoaXMuSGFzaCgpLnVwZGF0ZShrZXkpOwoKICAvLyAweDM2IF4gMHg1YyA9IDB4NmEKICBmb3IgKHZhciBpID0gMDsgaSA8IGtleS5sZW5ndGg7IGkrKykKICAgIGtleVtpXSBePSAweDZhOwogIHRoaXMub3V0ZXIgPSBuZXcgdGhpcy5IYXNoKCkudXBkYXRlKGtleSk7Cn07CgpIbWFjLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUobXNnLCBlbmMpIHsKICB0aGlzLmlubmVyLnVwZGF0ZShtc2csIGVuYyk7CiAgcmV0dXJuIHRoaXM7Cn07CgpIbWFjLnByb3RvdHlwZS5kaWdlc3QgPSBmdW5jdGlvbiBkaWdlc3QoZW5jKSB7CiAgdGhpcy5vdXRlci51cGRhdGUodGhpcy5pbm5lci5kaWdlc3QoKSk7CiAgcmV0dXJuIHRoaXMub3V0ZXIuZGlnZXN0KGVuYyk7Cn07Cgp9LHsiLi4vaGFzaCI6MTIwfV0sMTIzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGhhc2ggPSByZXF1aXJlKCcuLi9oYXNoJyk7CnZhciB1dGlscyA9IGhhc2gudXRpbHM7Cgp2YXIgcm90bDMyID0gdXRpbHMucm90bDMyOwp2YXIgc3VtMzIgPSB1dGlscy5zdW0zMjsKdmFyIHN1bTMyXzMgPSB1dGlscy5zdW0zMl8zOwp2YXIgc3VtMzJfNCA9IHV0aWxzLnN1bTMyXzQ7CnZhciBCbG9ja0hhc2ggPSBoYXNoLmNvbW1vbi5CbG9ja0hhc2g7CgpmdW5jdGlvbiBSSVBFTUQxNjAoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJJUEVNRDE2MCkpCiAgICByZXR1cm4gbmV3IFJJUEVNRDE2MCgpOwoKICBCbG9ja0hhc2guY2FsbCh0aGlzKTsKCiAgdGhpcy5oID0gWyAweDY3NDUyMzAxLCAweGVmY2RhYjg5LCAweDk4YmFkY2ZlLCAweDEwMzI1NDc2LCAweGMzZDJlMWYwIF07CiAgdGhpcy5lbmRpYW4gPSAnbGl0dGxlJzsKfQp1dGlscy5pbmhlcml0cyhSSVBFTUQxNjAsIEJsb2NrSGFzaCk7CmV4cG9ydHMucmlwZW1kMTYwID0gUklQRU1EMTYwOwoKUklQRU1EMTYwLmJsb2NrU2l6ZSA9IDUxMjsKUklQRU1EMTYwLm91dFNpemUgPSAxNjA7ClJJUEVNRDE2MC5obWFjU3RyZW5ndGggPSAxOTI7ClJJUEVNRDE2MC5wYWRMZW5ndGggPSA2NDsKClJJUEVNRDE2MC5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShtc2csIHN0YXJ0KSB7CiAgdmFyIEEgPSB0aGlzLmhbMF07CiAgdmFyIEIgPSB0aGlzLmhbMV07CiAgdmFyIEMgPSB0aGlzLmhbMl07CiAgdmFyIEQgPSB0aGlzLmhbM107CiAgdmFyIEUgPSB0aGlzLmhbNF07CiAgdmFyIEFoID0gQTsKICB2YXIgQmggPSBCOwogIHZhciBDaCA9IEM7CiAgdmFyIERoID0gRDsKICB2YXIgRWggPSBFOwogIGZvciAodmFyIGogPSAwOyBqIDwgODA7IGorKykgewogICAgdmFyIFQgPSBzdW0zMigKICAgICAgcm90bDMyKAogICAgICAgIHN1bTMyXzQoQSwgZihqLCBCLCBDLCBEKSwgbXNnW3Jbal0gKyBzdGFydF0sIEsoaikpLAogICAgICAgIHNbal0pLAogICAgICBFKTsKICAgIEEgPSBFOwogICAgRSA9IEQ7CiAgICBEID0gcm90bDMyKEMsIDEwKTsKICAgIEMgPSBCOwogICAgQiA9IFQ7CiAgICBUID0gc3VtMzIoCiAgICAgIHJvdGwzMigKICAgICAgICBzdW0zMl80KEFoLCBmKDc5IC0gaiwgQmgsIENoLCBEaCksIG1zZ1tyaFtqXSArIHN0YXJ0XSwgS2goaikpLAogICAgICAgIHNoW2pdKSwKICAgICAgRWgpOwogICAgQWggPSBFaDsKICAgIEVoID0gRGg7CiAgICBEaCA9IHJvdGwzMihDaCwgMTApOwogICAgQ2ggPSBCaDsKICAgIEJoID0gVDsKICB9CiAgVCA9IHN1bTMyXzModGhpcy5oWzFdLCBDLCBEaCk7CiAgdGhpcy5oWzFdID0gc3VtMzJfMyh0aGlzLmhbMl0sIEQsIEVoKTsKICB0aGlzLmhbMl0gPSBzdW0zMl8zKHRoaXMuaFszXSwgRSwgQWgpOwogIHRoaXMuaFszXSA9IHN1bTMyXzModGhpcy5oWzRdLCBBLCBCaCk7CiAgdGhpcy5oWzRdID0gc3VtMzJfMyh0aGlzLmhbMF0sIEIsIENoKTsKICB0aGlzLmhbMF0gPSBUOwp9OwoKUklQRU1EMTYwLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHV0aWxzLnRvSGV4MzIodGhpcy5oLCAnbGl0dGxlJyk7CiAgZWxzZQogICAgcmV0dXJuIHV0aWxzLnNwbGl0MzIodGhpcy5oLCAnbGl0dGxlJyk7Cn07CgpmdW5jdGlvbiBmKGosIHgsIHksIHopIHsKICBpZiAoaiA8PSAxNSkKICAgIHJldHVybiB4IF4geSBeIHo7CiAgZWxzZSBpZiAoaiA8PSAzMSkKICAgIHJldHVybiAoeCAmIHkpIHwgKCh+eCkgJiB6KTsKICBlbHNlIGlmIChqIDw9IDQ3KQogICAgcmV0dXJuICh4IHwgKH55KSkgXiB6OwogIGVsc2UgaWYgKGogPD0gNjMpCiAgICByZXR1cm4gKHggJiB6KSB8ICh5ICYgKH56KSk7CiAgZWxzZQogICAgcmV0dXJuIHggXiAoeSB8ICh+eikpOwp9CgpmdW5jdGlvbiBLKGopIHsKICBpZiAoaiA8PSAxNSkKICAgIHJldHVybiAweDAwMDAwMDAwOwogIGVsc2UgaWYgKGogPD0gMzEpCiAgICByZXR1cm4gMHg1YTgyNzk5OTsKICBlbHNlIGlmIChqIDw9IDQ3KQogICAgcmV0dXJuIDB4NmVkOWViYTE7CiAgZWxzZSBpZiAoaiA8PSA2MykKICAgIHJldHVybiAweDhmMWJiY2RjOwogIGVsc2UKICAgIHJldHVybiAweGE5NTNmZDRlOwp9CgpmdW5jdGlvbiBLaChqKSB7CiAgaWYgKGogPD0gMTUpCiAgICByZXR1cm4gMHg1MGEyOGJlNjsKICBlbHNlIGlmIChqIDw9IDMxKQogICAgcmV0dXJuIDB4NWM0ZGQxMjQ7CiAgZWxzZSBpZiAoaiA8PSA0NykKICAgIHJldHVybiAweDZkNzAzZWYzOwogIGVsc2UgaWYgKGogPD0gNjMpCiAgICByZXR1cm4gMHg3YTZkNzZlOTsKICBlbHNlCiAgICByZXR1cm4gMHgwMDAwMDAwMDsKfQoKdmFyIHIgPSBbCiAgMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwKICA3LCA0LCAxMywgMSwgMTAsIDYsIDE1LCAzLCAxMiwgMCwgOSwgNSwgMiwgMTQsIDExLCA4LAogIDMsIDEwLCAxNCwgNCwgOSwgMTUsIDgsIDEsIDIsIDcsIDAsIDYsIDEzLCAxMSwgNSwgMTIsCiAgMSwgOSwgMTEsIDEwLCAwLCA4LCAxMiwgNCwgMTMsIDMsIDcsIDE1LCAxNCwgNSwgNiwgMiwKICA0LCAwLCA1LCA5LCA3LCAxMiwgMiwgMTAsIDE0LCAxLCAzLCA4LCAxMSwgNiwgMTUsIDEzCl07Cgp2YXIgcmggPSBbCiAgNSwgMTQsIDcsIDAsIDksIDIsIDExLCA0LCAxMywgNiwgMTUsIDgsIDEsIDEwLCAzLCAxMiwKICA2LCAxMSwgMywgNywgMCwgMTMsIDUsIDEwLCAxNCwgMTUsIDgsIDEyLCA0LCA5LCAxLCAyLAogIDE1LCA1LCAxLCAzLCA3LCAxNCwgNiwgOSwgMTEsIDgsIDEyLCAyLCAxMCwgMCwgNCwgMTMsCiAgOCwgNiwgNCwgMSwgMywgMTEsIDE1LCAwLCA1LCAxMiwgMiwgMTMsIDksIDcsIDEwLCAxNCwKICAxMiwgMTUsIDEwLCA0LCAxLCA1LCA4LCA3LCA2LCAyLCAxMywgMTQsIDAsIDMsIDksIDExCl07Cgp2YXIgcyA9IFsKICAxMSwgMTQsIDE1LCAxMiwgNSwgOCwgNywgOSwgMTEsIDEzLCAxNCwgMTUsIDYsIDcsIDksIDgsCiAgNywgNiwgOCwgMTMsIDExLCA5LCA3LCAxNSwgNywgMTIsIDE1LCA5LCAxMSwgNywgMTMsIDEyLAogIDExLCAxMywgNiwgNywgMTQsIDksIDEzLCAxNSwgMTQsIDgsIDEzLCA2LCA1LCAxMiwgNywgNSwKICAxMSwgMTIsIDE0LCAxNSwgMTQsIDE1LCA5LCA4LCA5LCAxNCwgNSwgNiwgOCwgNiwgNSwgMTIsCiAgOSwgMTUsIDUsIDExLCA2LCA4LCAxMywgMTIsIDUsIDEyLCAxMywgMTQsIDExLCA4LCA1LCA2Cl07Cgp2YXIgc2ggPSBbCiAgOCwgOSwgOSwgMTEsIDEzLCAxNSwgMTUsIDUsIDcsIDcsIDgsIDExLCAxNCwgMTQsIDEyLCA2LAogIDksIDEzLCAxNSwgNywgMTIsIDgsIDksIDExLCA3LCA3LCAxMiwgNywgNiwgMTUsIDEzLCAxMSwKICA5LCA3LCAxNSwgMTEsIDgsIDYsIDYsIDE0LCAxMiwgMTMsIDUsIDE0LCAxMywgMTMsIDcsIDUsCiAgMTUsIDUsIDgsIDExLCAxNCwgMTQsIDYsIDE0LCA2LCA5LCAxMiwgOSwgMTIsIDUsIDE1LCA4LAogIDgsIDUsIDEyLCA5LCAxMiwgNSwgMTQsIDYsIDgsIDEzLCA2LCA1LCAxNSwgMTMsIDExLCAxMQpdOwoKfSx7Ii4uL2hhc2giOjEyMH1dLDEyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBoYXNoID0gcmVxdWlyZSgnLi4vaGFzaCcpOwp2YXIgdXRpbHMgPSBoYXNoLnV0aWxzOwp2YXIgYXNzZXJ0ID0gdXRpbHMuYXNzZXJ0OwoKdmFyIHJvdHIzMiA9IHV0aWxzLnJvdHIzMjsKdmFyIHJvdGwzMiA9IHV0aWxzLnJvdGwzMjsKdmFyIHN1bTMyID0gdXRpbHMuc3VtMzI7CnZhciBzdW0zMl80ID0gdXRpbHMuc3VtMzJfNDsKdmFyIHN1bTMyXzUgPSB1dGlscy5zdW0zMl81Owp2YXIgcm90cjY0X2hpID0gdXRpbHMucm90cjY0X2hpOwp2YXIgcm90cjY0X2xvID0gdXRpbHMucm90cjY0X2xvOwp2YXIgc2hyNjRfaGkgPSB1dGlscy5zaHI2NF9oaTsKdmFyIHNocjY0X2xvID0gdXRpbHMuc2hyNjRfbG87CnZhciBzdW02NCA9IHV0aWxzLnN1bTY0Owp2YXIgc3VtNjRfaGkgPSB1dGlscy5zdW02NF9oaTsKdmFyIHN1bTY0X2xvID0gdXRpbHMuc3VtNjRfbG87CnZhciBzdW02NF80X2hpID0gdXRpbHMuc3VtNjRfNF9oaTsKdmFyIHN1bTY0XzRfbG8gPSB1dGlscy5zdW02NF80X2xvOwp2YXIgc3VtNjRfNV9oaSA9IHV0aWxzLnN1bTY0XzVfaGk7CnZhciBzdW02NF81X2xvID0gdXRpbHMuc3VtNjRfNV9sbzsKdmFyIEJsb2NrSGFzaCA9IGhhc2guY29tbW9uLkJsb2NrSGFzaDsKCnZhciBzaGEyNTZfSyA9IFsKICAweDQyOGEyZjk4LCAweDcxMzc0NDkxLCAweGI1YzBmYmNmLCAweGU5YjVkYmE1LAogIDB4Mzk1NmMyNWIsIDB4NTlmMTExZjEsIDB4OTIzZjgyYTQsIDB4YWIxYzVlZDUsCiAgMHhkODA3YWE5OCwgMHgxMjgzNWIwMSwgMHgyNDMxODViZSwgMHg1NTBjN2RjMywKICAweDcyYmU1ZDc0LCAweDgwZGViMWZlLCAweDliZGMwNmE3LCAweGMxOWJmMTc0LAogIDB4ZTQ5YjY5YzEsIDB4ZWZiZTQ3ODYsIDB4MGZjMTlkYzYsIDB4MjQwY2ExY2MsCiAgMHgyZGU5MmM2ZiwgMHg0YTc0ODRhYSwgMHg1Y2IwYTlkYywgMHg3NmY5ODhkYSwKICAweDk4M2U1MTUyLCAweGE4MzFjNjZkLCAweGIwMDMyN2M4LCAweGJmNTk3ZmM3LAogIDB4YzZlMDBiZjMsIDB4ZDVhNzkxNDcsIDB4MDZjYTYzNTEsIDB4MTQyOTI5NjcsCiAgMHgyN2I3MGE4NSwgMHgyZTFiMjEzOCwgMHg0ZDJjNmRmYywgMHg1MzM4MGQxMywKICAweDY1MGE3MzU0LCAweDc2NmEwYWJiLCAweDgxYzJjOTJlLCAweDkyNzIyYzg1LAogIDB4YTJiZmU4YTEsIDB4YTgxYTY2NGIsIDB4YzI0YjhiNzAsIDB4Yzc2YzUxYTMsCiAgMHhkMTkyZTgxOSwgMHhkNjk5MDYyNCwgMHhmNDBlMzU4NSwgMHgxMDZhYTA3MCwKICAweDE5YTRjMTE2LCAweDFlMzc2YzA4LCAweDI3NDg3NzRjLCAweDM0YjBiY2I1LAogIDB4MzkxYzBjYjMsIDB4NGVkOGFhNGEsIDB4NWI5Y2NhNGYsIDB4NjgyZTZmZjMsCiAgMHg3NDhmODJlZSwgMHg3OGE1NjM2ZiwgMHg4NGM4NzgxNCwgMHg4Y2M3MDIwOCwKICAweDkwYmVmZmZhLCAweGE0NTA2Y2ViLCAweGJlZjlhM2Y3LCAweGM2NzE3OGYyCl07Cgp2YXIgc2hhNTEyX0sgPSBbCiAgMHg0MjhhMmY5OCwgMHhkNzI4YWUyMiwgMHg3MTM3NDQ5MSwgMHgyM2VmNjVjZCwKICAweGI1YzBmYmNmLCAweGVjNGQzYjJmLCAweGU5YjVkYmE1LCAweDgxODlkYmJjLAogIDB4Mzk1NmMyNWIsIDB4ZjM0OGI1MzgsIDB4NTlmMTExZjEsIDB4YjYwNWQwMTksCiAgMHg5MjNmODJhNCwgMHhhZjE5NGY5YiwgMHhhYjFjNWVkNSwgMHhkYTZkODExOCwKICAweGQ4MDdhYTk4LCAweGEzMDMwMjQyLCAweDEyODM1YjAxLCAweDQ1NzA2ZmJlLAogIDB4MjQzMTg1YmUsIDB4NGVlNGIyOGMsIDB4NTUwYzdkYzMsIDB4ZDVmZmI0ZTIsCiAgMHg3MmJlNWQ3NCwgMHhmMjdiODk2ZiwgMHg4MGRlYjFmZSwgMHgzYjE2OTZiMSwKICAweDliZGMwNmE3LCAweDI1YzcxMjM1LCAweGMxOWJmMTc0LCAweGNmNjkyNjk0LAogIDB4ZTQ5YjY5YzEsIDB4OWVmMTRhZDIsIDB4ZWZiZTQ3ODYsIDB4Mzg0ZjI1ZTMsCiAgMHgwZmMxOWRjNiwgMHg4YjhjZDViNSwgMHgyNDBjYTFjYywgMHg3N2FjOWM2NSwKICAweDJkZTkyYzZmLCAweDU5MmIwMjc1LCAweDRhNzQ4NGFhLCAweDZlYTZlNDgzLAogIDB4NWNiMGE5ZGMsIDB4YmQ0MWZiZDQsIDB4NzZmOTg4ZGEsIDB4ODMxMTUzYjUsCiAgMHg5ODNlNTE1MiwgMHhlZTY2ZGZhYiwgMHhhODMxYzY2ZCwgMHgyZGI0MzIxMCwKICAweGIwMDMyN2M4LCAweDk4ZmIyMTNmLCAweGJmNTk3ZmM3LCAweGJlZWYwZWU0LAogIDB4YzZlMDBiZjMsIDB4M2RhODhmYzIsIDB4ZDVhNzkxNDcsIDB4OTMwYWE3MjUsCiAgMHgwNmNhNjM1MSwgMHhlMDAzODI2ZiwgMHgxNDI5Mjk2NywgMHgwYTBlNmU3MCwKICAweDI3YjcwYTg1LCAweDQ2ZDIyZmZjLCAweDJlMWIyMTM4LCAweDVjMjZjOTI2LAogIDB4NGQyYzZkZmMsIDB4NWFjNDJhZWQsIDB4NTMzODBkMTMsIDB4OWQ5NWIzZGYsCiAgMHg2NTBhNzM1NCwgMHg4YmFmNjNkZSwgMHg3NjZhMGFiYiwgMHgzYzc3YjJhOCwKICAweDgxYzJjOTJlLCAweDQ3ZWRhZWU2LCAweDkyNzIyYzg1LCAweDE0ODIzNTNiLAogIDB4YTJiZmU4YTEsIDB4NGNmMTAzNjQsIDB4YTgxYTY2NGIsIDB4YmM0MjMwMDEsCiAgMHhjMjRiOGI3MCwgMHhkMGY4OTc5MSwgMHhjNzZjNTFhMywgMHgwNjU0YmUzMCwKICAweGQxOTJlODE5LCAweGQ2ZWY1MjE4LCAweGQ2OTkwNjI0LCAweDU1NjVhOTEwLAogIDB4ZjQwZTM1ODUsIDB4NTc3MTIwMmEsIDB4MTA2YWEwNzAsIDB4MzJiYmQxYjgsCiAgMHgxOWE0YzExNiwgMHhiOGQyZDBjOCwgMHgxZTM3NmMwOCwgMHg1MTQxYWI1MywKICAweDI3NDg3NzRjLCAweGRmOGVlYjk5LCAweDM0YjBiY2I1LCAweGUxOWI0OGE4LAogIDB4MzkxYzBjYjMsIDB4YzVjOTVhNjMsIDB4NGVkOGFhNGEsIDB4ZTM0MThhY2IsCiAgMHg1YjljY2E0ZiwgMHg3NzYzZTM3MywgMHg2ODJlNmZmMywgMHhkNmIyYjhhMywKICAweDc0OGY4MmVlLCAweDVkZWZiMmZjLCAweDc4YTU2MzZmLCAweDQzMTcyZjYwLAogIDB4ODRjODc4MTQsIDB4YTFmMGFiNzIsIDB4OGNjNzAyMDgsIDB4MWE2NDM5ZWMsCiAgMHg5MGJlZmZmYSwgMHgyMzYzMWUyOCwgMHhhNDUwNmNlYiwgMHhkZTgyYmRlOSwKICAweGJlZjlhM2Y3LCAweGIyYzY3OTE1LCAweGM2NzE3OGYyLCAweGUzNzI1MzJiLAogIDB4Y2EyNzNlY2UsIDB4ZWEyNjYxOWMsIDB4ZDE4NmI4YzcsIDB4MjFjMGMyMDcsCiAgMHhlYWRhN2RkNiwgMHhjZGUwZWIxZSwgMHhmNTdkNGY3ZiwgMHhlZTZlZDE3OCwKICAweDA2ZjA2N2FhLCAweDcyMTc2ZmJhLCAweDBhNjM3ZGM1LCAweGEyYzg5OGE2LAogIDB4MTEzZjk4MDQsIDB4YmVmOTBkYWUsIDB4MWI3MTBiMzUsIDB4MTMxYzQ3MWIsCiAgMHgyOGRiNzdmNSwgMHgyMzA0N2Q4NCwgMHgzMmNhYWI3YiwgMHg0MGM3MjQ5MywKICAweDNjOWViZTBhLCAweDE1YzliZWJjLCAweDQzMWQ2N2M0LCAweDljMTAwZDRjLAogIDB4NGNjNWQ0YmUsIDB4Y2IzZTQyYjYsIDB4NTk3ZjI5OWMsIDB4ZmM2NTdlMmEsCiAgMHg1ZmNiNmZhYiwgMHgzYWQ2ZmFlYywgMHg2YzQ0MTk4YywgMHg0YTQ3NTgxNwpdOwoKdmFyIHNoYTFfSyA9IFsKICAweDVBODI3OTk5LCAweDZFRDlFQkExLAogIDB4OEYxQkJDREMsIDB4Q0E2MkMxRDYKXTsKCmZ1bmN0aW9uIFNIQTI1NigpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0hBMjU2KSkKICAgIHJldHVybiBuZXcgU0hBMjU2KCk7CgogIEJsb2NrSGFzaC5jYWxsKHRoaXMpOwogIHRoaXMuaCA9IFsgMHg2YTA5ZTY2NywgMHhiYjY3YWU4NSwgMHgzYzZlZjM3MiwgMHhhNTRmZjUzYSwKICAgICAgICAgICAgIDB4NTEwZTUyN2YsIDB4OWIwNTY4OGMsIDB4MWY4M2Q5YWIsIDB4NWJlMGNkMTkgXTsKICB0aGlzLmsgPSBzaGEyNTZfSzsKICB0aGlzLlcgPSBuZXcgQXJyYXkoNjQpOwp9CnV0aWxzLmluaGVyaXRzKFNIQTI1NiwgQmxvY2tIYXNoKTsKZXhwb3J0cy5zaGEyNTYgPSBTSEEyNTY7CgpTSEEyNTYuYmxvY2tTaXplID0gNTEyOwpTSEEyNTYub3V0U2l6ZSA9IDI1NjsKU0hBMjU2LmhtYWNTdHJlbmd0aCA9IDE5MjsKU0hBMjU2LnBhZExlbmd0aCA9IDY0OwoKU0hBMjU2LnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24gX3VwZGF0ZShtc2csIHN0YXJ0KSB7CiAgdmFyIFcgPSB0aGlzLlc7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykKICAgIFdbaV0gPSBtc2dbc3RhcnQgKyBpXTsKICBmb3IgKDsgaSA8IFcubGVuZ3RoOyBpKyspCiAgICBXW2ldID0gc3VtMzJfNChnMV8yNTYoV1tpIC0gMl0pLCBXW2kgLSA3XSwgZzBfMjU2KFdbaSAtIDE1XSksIFdbaSAtIDE2XSk7CgogIHZhciBhID0gdGhpcy5oWzBdOwogIHZhciBiID0gdGhpcy5oWzFdOwogIHZhciBjID0gdGhpcy5oWzJdOwogIHZhciBkID0gdGhpcy5oWzNdOwogIHZhciBlID0gdGhpcy5oWzRdOwogIHZhciBmID0gdGhpcy5oWzVdOwogIHZhciBnID0gdGhpcy5oWzZdOwogIHZhciBoID0gdGhpcy5oWzddOwoKICBhc3NlcnQodGhpcy5rLmxlbmd0aCA9PT0gVy5sZW5ndGgpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgVy5sZW5ndGg7IGkrKykgewogICAgdmFyIFQxID0gc3VtMzJfNShoLCBzMV8yNTYoZSksIGNoMzIoZSwgZiwgZyksIHRoaXMua1tpXSwgV1tpXSk7CiAgICB2YXIgVDIgPSBzdW0zMihzMF8yNTYoYSksIG1hajMyKGEsIGIsIGMpKTsKICAgIGggPSBnOwogICAgZyA9IGY7CiAgICBmID0gZTsKICAgIGUgPSBzdW0zMihkLCBUMSk7CiAgICBkID0gYzsKICAgIGMgPSBiOwogICAgYiA9IGE7CiAgICBhID0gc3VtMzIoVDEsIFQyKTsKICB9CgogIHRoaXMuaFswXSA9IHN1bTMyKHRoaXMuaFswXSwgYSk7CiAgdGhpcy5oWzFdID0gc3VtMzIodGhpcy5oWzFdLCBiKTsKICB0aGlzLmhbMl0gPSBzdW0zMih0aGlzLmhbMl0sIGMpOwogIHRoaXMuaFszXSA9IHN1bTMyKHRoaXMuaFszXSwgZCk7CiAgdGhpcy5oWzRdID0gc3VtMzIodGhpcy5oWzRdLCBlKTsKICB0aGlzLmhbNV0gPSBzdW0zMih0aGlzLmhbNV0sIGYpOwogIHRoaXMuaFs2XSA9IHN1bTMyKHRoaXMuaFs2XSwgZyk7CiAgdGhpcy5oWzddID0gc3VtMzIodGhpcy5oWzddLCBoKTsKfTsKClNIQTI1Ni5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB1dGlscy50b0hleDMyKHRoaXMuaCwgJ2JpZycpOwogIGVsc2UKICAgIHJldHVybiB1dGlscy5zcGxpdDMyKHRoaXMuaCwgJ2JpZycpOwp9OwoKZnVuY3Rpb24gU0hBMjI0KCkgewogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTSEEyMjQpKQogICAgcmV0dXJuIG5ldyBTSEEyMjQoKTsKCiAgU0hBMjU2LmNhbGwodGhpcyk7CiAgdGhpcy5oID0gWyAweGMxMDU5ZWQ4LCAweDM2N2NkNTA3LCAweDMwNzBkZDE3LCAweGY3MGU1OTM5LAogICAgICAgICAgICAgMHhmZmMwMGIzMSwgMHg2ODU4MTUxMSwgMHg2NGY5OGZhNywgMHhiZWZhNGZhNCBdOwp9CnV0aWxzLmluaGVyaXRzKFNIQTIyNCwgU0hBMjU2KTsKZXhwb3J0cy5zaGEyMjQgPSBTSEEyMjQ7CgpTSEEyMjQuYmxvY2tTaXplID0gNTEyOwpTSEEyMjQub3V0U2l6ZSA9IDIyNDsKU0hBMjI0LmhtYWNTdHJlbmd0aCA9IDE5MjsKU0hBMjI0LnBhZExlbmd0aCA9IDY0OwoKU0hBMjI0LnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIC8vIEp1c3QgdHJ1bmNhdGUgb3V0cHV0CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdXRpbHMudG9IZXgzMih0aGlzLmguc2xpY2UoMCwgNyksICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmguc2xpY2UoMCwgNyksICdiaWcnKTsKfTsKCmZ1bmN0aW9uIFNIQTUxMigpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0hBNTEyKSkKICAgIHJldHVybiBuZXcgU0hBNTEyKCk7CgogIEJsb2NrSGFzaC5jYWxsKHRoaXMpOwogIHRoaXMuaCA9IFsgMHg2YTA5ZTY2NywgMHhmM2JjYzkwOCwKICAgICAgICAgICAgIDB4YmI2N2FlODUsIDB4ODRjYWE3M2IsCiAgICAgICAgICAgICAweDNjNmVmMzcyLCAweGZlOTRmODJiLAogICAgICAgICAgICAgMHhhNTRmZjUzYSwgMHg1ZjFkMzZmMSwKICAgICAgICAgICAgIDB4NTEwZTUyN2YsIDB4YWRlNjgyZDEsCiAgICAgICAgICAgICAweDliMDU2ODhjLCAweDJiM2U2YzFmLAogICAgICAgICAgICAgMHgxZjgzZDlhYiwgMHhmYjQxYmQ2YiwKICAgICAgICAgICAgIDB4NWJlMGNkMTksIDB4MTM3ZTIxNzkgXTsKICB0aGlzLmsgPSBzaGE1MTJfSzsKICB0aGlzLlcgPSBuZXcgQXJyYXkoMTYwKTsKfQp1dGlscy5pbmhlcml0cyhTSEE1MTIsIEJsb2NrSGFzaCk7CmV4cG9ydHMuc2hhNTEyID0gU0hBNTEyOwoKU0hBNTEyLmJsb2NrU2l6ZSA9IDEwMjQ7ClNIQTUxMi5vdXRTaXplID0gNTEyOwpTSEE1MTIuaG1hY1N0cmVuZ3RoID0gMTkyOwpTSEE1MTIucGFkTGVuZ3RoID0gMTI4OwoKU0hBNTEyLnByb3RvdHlwZS5fcHJlcGFyZUJsb2NrID0gZnVuY3Rpb24gX3ByZXBhcmVCbG9jayhtc2csIHN0YXJ0KSB7CiAgdmFyIFcgPSB0aGlzLlc7CgogIC8vIDMyIHggMzJiaXQgd29yZHMKICBmb3IgKHZhciBpID0gMDsgaSA8IDMyOyBpKyspCiAgICBXW2ldID0gbXNnW3N0YXJ0ICsgaV07CiAgZm9yICg7IGkgPCBXLmxlbmd0aDsgaSArPSAyKSB7CiAgICB2YXIgYzBfaGkgPSBnMV81MTJfaGkoV1tpIC0gNF0sIFdbaSAtIDNdKTsgIC8vIGkgLSAyCiAgICB2YXIgYzBfbG8gPSBnMV81MTJfbG8oV1tpIC0gNF0sIFdbaSAtIDNdKTsKICAgIHZhciBjMV9oaSA9IFdbaSAtIDE0XTsgIC8vIGkgLSA3CiAgICB2YXIgYzFfbG8gPSBXW2kgLSAxM107CiAgICB2YXIgYzJfaGkgPSBnMF81MTJfaGkoV1tpIC0gMzBdLCBXW2kgLSAyOV0pOyAgLy8gaSAtIDE1CiAgICB2YXIgYzJfbG8gPSBnMF81MTJfbG8oV1tpIC0gMzBdLCBXW2kgLSAyOV0pOwogICAgdmFyIGMzX2hpID0gV1tpIC0gMzJdOyAgLy8gaSAtIDE2CiAgICB2YXIgYzNfbG8gPSBXW2kgLSAzMV07CgogICAgV1tpXSA9IHN1bTY0XzRfaGkoYzBfaGksIGMwX2xvLAogICAgICAgICAgICAgICAgICAgICAgYzFfaGksIGMxX2xvLAogICAgICAgICAgICAgICAgICAgICAgYzJfaGksIGMyX2xvLAogICAgICAgICAgICAgICAgICAgICAgYzNfaGksIGMzX2xvKTsKICAgIFdbaSArIDFdID0gc3VtNjRfNF9sbyhjMF9oaSwgYzBfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgYzFfaGksIGMxX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICBjM19oaSwgYzNfbG8pOwogIH0KfTsKClNIQTUxMi5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUobXNnLCBzdGFydCkgewogIHRoaXMuX3ByZXBhcmVCbG9jayhtc2csIHN0YXJ0KTsKCiAgdmFyIFcgPSB0aGlzLlc7CgogIHZhciBhaCA9IHRoaXMuaFswXTsKICB2YXIgYWwgPSB0aGlzLmhbMV07CiAgdmFyIGJoID0gdGhpcy5oWzJdOwogIHZhciBibCA9IHRoaXMuaFszXTsKICB2YXIgY2ggPSB0aGlzLmhbNF07CiAgdmFyIGNsID0gdGhpcy5oWzVdOwogIHZhciBkaCA9IHRoaXMuaFs2XTsKICB2YXIgZGwgPSB0aGlzLmhbN107CiAgdmFyIGVoID0gdGhpcy5oWzhdOwogIHZhciBlbCA9IHRoaXMuaFs5XTsKICB2YXIgZmggPSB0aGlzLmhbMTBdOwogIHZhciBmbCA9IHRoaXMuaFsxMV07CiAgdmFyIGdoID0gdGhpcy5oWzEyXTsKICB2YXIgZ2wgPSB0aGlzLmhbMTNdOwogIHZhciBoaCA9IHRoaXMuaFsxNF07CiAgdmFyIGhsID0gdGhpcy5oWzE1XTsKCiAgYXNzZXJ0KHRoaXMuay5sZW5ndGggPT09IFcubGVuZ3RoKTsKICBmb3IgKHZhciBpID0gMDsgaSA8IFcubGVuZ3RoOyBpICs9IDIpIHsKICAgIHZhciBjMF9oaSA9IGhoOwogICAgdmFyIGMwX2xvID0gaGw7CiAgICB2YXIgYzFfaGkgPSBzMV81MTJfaGkoZWgsIGVsKTsKICAgIHZhciBjMV9sbyA9IHMxXzUxMl9sbyhlaCwgZWwpOwogICAgdmFyIGMyX2hpID0gY2g2NF9oaShlaCwgZWwsIGZoLCBmbCwgZ2gsIGdsKTsKICAgIHZhciBjMl9sbyA9IGNoNjRfbG8oZWgsIGVsLCBmaCwgZmwsIGdoLCBnbCk7CiAgICB2YXIgYzNfaGkgPSB0aGlzLmtbaV07CiAgICB2YXIgYzNfbG8gPSB0aGlzLmtbaSArIDFdOwogICAgdmFyIGM0X2hpID0gV1tpXTsKICAgIHZhciBjNF9sbyA9IFdbaSArIDFdOwoKICAgIHZhciBUMV9oaSA9IHN1bTY0XzVfaGkoYzBfaGksIGMwX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjMV9oaSwgYzFfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGMyX2hpLCBjMl9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzNfaGksIGMzX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjNF9oaSwgYzRfbG8pOwogICAgdmFyIFQxX2xvID0gc3VtNjRfNV9sbyhjMF9oaSwgYzBfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGMxX2hpLCBjMV9sbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgYzJfaGksIGMyX2xvLAogICAgICAgICAgICAgICAgICAgICAgICAgICBjM19oaSwgYzNfbG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGM0X2hpLCBjNF9sbyk7CgogICAgdmFyIGMwX2hpID0gczBfNTEyX2hpKGFoLCBhbCk7CiAgICB2YXIgYzBfbG8gPSBzMF81MTJfbG8oYWgsIGFsKTsKICAgIHZhciBjMV9oaSA9IG1hajY0X2hpKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wpOwogICAgdmFyIGMxX2xvID0gbWFqNjRfbG8oYWgsIGFsLCBiaCwgYmwsIGNoLCBjbCk7CgogICAgdmFyIFQyX2hpID0gc3VtNjRfaGkoYzBfaGksIGMwX2xvLCBjMV9oaSwgYzFfbG8pOwogICAgdmFyIFQyX2xvID0gc3VtNjRfbG8oYzBfaGksIGMwX2xvLCBjMV9oaSwgYzFfbG8pOwoKICAgIGhoID0gZ2g7CiAgICBobCA9IGdsOwoKICAgIGdoID0gZmg7CiAgICBnbCA9IGZsOwoKICAgIGZoID0gZWg7CiAgICBmbCA9IGVsOwoKICAgIGVoID0gc3VtNjRfaGkoZGgsIGRsLCBUMV9oaSwgVDFfbG8pOwogICAgZWwgPSBzdW02NF9sbyhkbCwgZGwsIFQxX2hpLCBUMV9sbyk7CgogICAgZGggPSBjaDsKICAgIGRsID0gY2w7CgogICAgY2ggPSBiaDsKICAgIGNsID0gYmw7CgogICAgYmggPSBhaDsKICAgIGJsID0gYWw7CgogICAgYWggPSBzdW02NF9oaShUMV9oaSwgVDFfbG8sIFQyX2hpLCBUMl9sbyk7CiAgICBhbCA9IHN1bTY0X2xvKFQxX2hpLCBUMV9sbywgVDJfaGksIFQyX2xvKTsKICB9CgogIHN1bTY0KHRoaXMuaCwgMCwgYWgsIGFsKTsKICBzdW02NCh0aGlzLmgsIDIsIGJoLCBibCk7CiAgc3VtNjQodGhpcy5oLCA0LCBjaCwgY2wpOwogIHN1bTY0KHRoaXMuaCwgNiwgZGgsIGRsKTsKICBzdW02NCh0aGlzLmgsIDgsIGVoLCBlbCk7CiAgc3VtNjQodGhpcy5oLCAxMCwgZmgsIGZsKTsKICBzdW02NCh0aGlzLmgsIDEyLCBnaCwgZ2wpOwogIHN1bTY0KHRoaXMuaCwgMTQsIGhoLCBobCk7Cn07CgpTSEE1MTIucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiBkaWdlc3QoZW5jKSB7CiAgaWYgKGVuYyA9PT0gJ2hleCcpCiAgICByZXR1cm4gdXRpbHMudG9IZXgzMih0aGlzLmgsICdiaWcnKTsKICBlbHNlCiAgICByZXR1cm4gdXRpbHMuc3BsaXQzMih0aGlzLmgsICdiaWcnKTsKfTsKCmZ1bmN0aW9uIFNIQTM4NCgpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0hBMzg0KSkKICAgIHJldHVybiBuZXcgU0hBMzg0KCk7CgogIFNIQTUxMi5jYWxsKHRoaXMpOwogIHRoaXMuaCA9IFsgMHhjYmJiOWQ1ZCwgMHhjMTA1OWVkOCwKICAgICAgICAgICAgIDB4NjI5YTI5MmEsIDB4MzY3Y2Q1MDcsCiAgICAgICAgICAgICAweDkxNTkwMTVhLCAweDMwNzBkZDE3LAogICAgICAgICAgICAgMHgxNTJmZWNkOCwgMHhmNzBlNTkzOSwKICAgICAgICAgICAgIDB4NjczMzI2NjcsIDB4ZmZjMDBiMzEsCiAgICAgICAgICAgICAweDhlYjQ0YTg3LCAweDY4NTgxNTExLAogICAgICAgICAgICAgMHhkYjBjMmUwZCwgMHg2NGY5OGZhNywKICAgICAgICAgICAgIDB4NDdiNTQ4MWQsIDB4YmVmYTRmYTQgXTsKfQp1dGlscy5pbmhlcml0cyhTSEEzODQsIFNIQTUxMik7CmV4cG9ydHMuc2hhMzg0ID0gU0hBMzg0OwoKU0hBMzg0LmJsb2NrU2l6ZSA9IDEwMjQ7ClNIQTM4NC5vdXRTaXplID0gMzg0OwpTSEEzODQuaG1hY1N0cmVuZ3RoID0gMTkyOwpTSEEzODQucGFkTGVuZ3RoID0gMTI4OwoKU0hBMzg0LnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gZGlnZXN0KGVuYykgewogIGlmIChlbmMgPT09ICdoZXgnKQogICAgcmV0dXJuIHV0aWxzLnRvSGV4MzIodGhpcy5oLnNsaWNlKDAsIDEyKSwgJ2JpZycpOwogIGVsc2UKICAgIHJldHVybiB1dGlscy5zcGxpdDMyKHRoaXMuaC5zbGljZSgwLCAxMiksICdiaWcnKTsKfTsKCmZ1bmN0aW9uIFNIQTEoKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNIQTEpKQogICAgcmV0dXJuIG5ldyBTSEExKCk7CgogIEJsb2NrSGFzaC5jYWxsKHRoaXMpOwogIHRoaXMuaCA9IFsgMHg2NzQ1MjMwMSwgMHhlZmNkYWI4OSwgMHg5OGJhZGNmZSwKICAgICAgICAgICAgIDB4MTAzMjU0NzYsIDB4YzNkMmUxZjAgXTsKICB0aGlzLlcgPSBuZXcgQXJyYXkoODApOwp9Cgp1dGlscy5pbmhlcml0cyhTSEExLCBCbG9ja0hhc2gpOwpleHBvcnRzLnNoYTEgPSBTSEExOwoKU0hBMS5ibG9ja1NpemUgPSA1MTI7ClNIQTEub3V0U2l6ZSA9IDE2MDsKU0hBMS5obWFjU3RyZW5ndGggPSA4MDsKU0hBMS5wYWRMZW5ndGggPSA2NDsKClNIQTEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiBfdXBkYXRlKG1zZywgc3RhcnQpIHsKICB2YXIgVyA9IHRoaXMuVzsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKQogICAgV1tpXSA9IG1zZ1tzdGFydCArIGldOwoKICBmb3IoOyBpIDwgVy5sZW5ndGg7IGkrKykKICAgIFdbaV0gPSByb3RsMzIoV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XSwgMSk7CgogIHZhciBhID0gdGhpcy5oWzBdOwogIHZhciBiID0gdGhpcy5oWzFdOwogIHZhciBjID0gdGhpcy5oWzJdOwogIHZhciBkID0gdGhpcy5oWzNdOwogIHZhciBlID0gdGhpcy5oWzRdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IFcubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzID0gfn4oaSAvIDIwKTsKICAgIHZhciB0ID0gc3VtMzJfNShyb3RsMzIoYSwgNSksIGZ0XzEocywgYiwgYywgZCksIGUsIFdbaV0sIHNoYTFfS1tzXSk7CiAgICBlID0gZDsKICAgIGQgPSBjOwogICAgYyA9IHJvdGwzMihiLCAzMCk7CiAgICBiID0gYTsKICAgIGEgPSB0OwogIH0KCiAgdGhpcy5oWzBdID0gc3VtMzIodGhpcy5oWzBdLCBhKTsKICB0aGlzLmhbMV0gPSBzdW0zMih0aGlzLmhbMV0sIGIpOwogIHRoaXMuaFsyXSA9IHN1bTMyKHRoaXMuaFsyXSwgYyk7CiAgdGhpcy5oWzNdID0gc3VtMzIodGhpcy5oWzNdLCBkKTsKICB0aGlzLmhbNF0gPSBzdW0zMih0aGlzLmhbNF0sIGUpOwp9OwoKU0hBMS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uIGRpZ2VzdChlbmMpIHsKICBpZiAoZW5jID09PSAnaGV4JykKICAgIHJldHVybiB1dGlscy50b0hleDMyKHRoaXMuaCwgJ2JpZycpOwogIGVsc2UKICAgIHJldHVybiB1dGlscy5zcGxpdDMyKHRoaXMuaCwgJ2JpZycpOwp9OwoKZnVuY3Rpb24gY2gzMih4LCB5LCB6KSB7CiAgcmV0dXJuICh4ICYgeSkgXiAoKH54KSAmIHopOwp9CgpmdW5jdGlvbiBtYWozMih4LCB5LCB6KSB7CiAgcmV0dXJuICh4ICYgeSkgXiAoeCAmIHopIF4gKHkgJiB6KTsKfQoKZnVuY3Rpb24gcDMyKHgsIHksIHopIHsKICByZXR1cm4geCBeIHkgXiB6Owp9CgpmdW5jdGlvbiBzMF8yNTYoeCkgewogIHJldHVybiByb3RyMzIoeCwgMikgXiByb3RyMzIoeCwgMTMpIF4gcm90cjMyKHgsIDIyKTsKfQoKZnVuY3Rpb24gczFfMjU2KHgpIHsKICByZXR1cm4gcm90cjMyKHgsIDYpIF4gcm90cjMyKHgsIDExKSBeIHJvdHIzMih4LCAyNSk7Cn0KCmZ1bmN0aW9uIGcwXzI1Nih4KSB7CiAgcmV0dXJuIHJvdHIzMih4LCA3KSBeIHJvdHIzMih4LCAxOCkgXiAoeCA+Pj4gMyk7Cn0KCmZ1bmN0aW9uIGcxXzI1Nih4KSB7CiAgcmV0dXJuIHJvdHIzMih4LCAxNykgXiByb3RyMzIoeCwgMTkpIF4gKHggPj4+IDEwKTsKfQoKZnVuY3Rpb24gZnRfMShzLCB4LCB5LCB6KSB7CiAgaWYgKHMgPT09IDApCiAgICByZXR1cm4gY2gzMih4LCB5LCB6KTsKICBpZiAocyA9PT0gMSB8fCBzID09PSAzKQogICAgcmV0dXJuIHAzMih4LCB5LCB6KTsKICBpZiAocyA9PT0gMikKICAgIHJldHVybiBtYWozMih4LCB5LCB6KTsKfQoKZnVuY3Rpb24gY2g2NF9oaSh4aCwgeGwsIHloLCB5bCwgemgsIHpsKSB7CiAgdmFyIHIgPSAoeGggJiB5aCkgXiAoKH54aCkgJiB6aCk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gY2g2NF9sbyh4aCwgeGwsIHloLCB5bCwgemgsIHpsKSB7CiAgdmFyIHIgPSAoeGwgJiB5bCkgXiAoKH54bCkgJiB6bCk7CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gbWFqNjRfaGkoeGgsIHhsLCB5aCwgeWwsIHpoLCB6bCkgewogIHZhciByID0gKHhoICYgeWgpIF4gKHhoICYgemgpIF4gKHloICYgemgpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIG1hajY0X2xvKHhoLCB4bCwgeWgsIHlsLCB6aCwgemwpIHsKICB2YXIgciA9ICh4bCAmIHlsKSBeICh4bCAmIHpsKSBeICh5bCAmIHpsKTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBzMF81MTJfaGkoeGgsIHhsKSB7CiAgdmFyIGMwX2hpID0gcm90cjY0X2hpKHhoLCB4bCwgMjgpOwogIHZhciBjMV9oaSA9IHJvdHI2NF9oaSh4bCwgeGgsIDIpOyAgLy8gMzQKICB2YXIgYzJfaGkgPSByb3RyNjRfaGkoeGwsIHhoLCA3KTsgIC8vIDM5CgogIHZhciByID0gYzBfaGkgXiBjMV9oaSBeIGMyX2hpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIHMwXzUxMl9sbyh4aCwgeGwpIHsKICB2YXIgYzBfbG8gPSByb3RyNjRfbG8oeGgsIHhsLCAyOCk7CiAgdmFyIGMxX2xvID0gcm90cjY0X2xvKHhsLCB4aCwgMik7ICAvLyAzNAogIHZhciBjMl9sbyA9IHJvdHI2NF9sbyh4bCwgeGgsIDcpOyAgLy8gMzkKCiAgdmFyIHIgPSBjMF9sbyBeIGMxX2xvIF4gYzJfbG87CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gczFfNTEyX2hpKHhoLCB4bCkgewogIHZhciBjMF9oaSA9IHJvdHI2NF9oaSh4aCwgeGwsIDE0KTsKICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxOCk7CiAgdmFyIGMyX2hpID0gcm90cjY0X2hpKHhsLCB4aCwgOSk7ICAvLyA0MQoKICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBzMV81MTJfbG8oeGgsIHhsKSB7CiAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMTQpOwogIHZhciBjMV9sbyA9IHJvdHI2NF9sbyh4aCwgeGwsIDE4KTsKICB2YXIgYzJfbG8gPSByb3RyNjRfbG8oeGwsIHhoLCA5KTsgIC8vIDQxCgogIHZhciByID0gYzBfbG8gXiBjMV9sbyBeIGMyX2xvOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIGcwXzUxMl9oaSh4aCwgeGwpIHsKICB2YXIgYzBfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCAxKTsKICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGgsIHhsLCA4KTsKICB2YXIgYzJfaGkgPSBzaHI2NF9oaSh4aCwgeGwsIDcpOwoKICB2YXIgciA9IGMwX2hpIF4gYzFfaGkgXiBjMl9oaTsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9CgpmdW5jdGlvbiBnMF81MTJfbG8oeGgsIHhsKSB7CiAgdmFyIGMwX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgMSk7CiAgdmFyIGMxX2xvID0gcm90cjY0X2xvKHhoLCB4bCwgOCk7CiAgdmFyIGMyX2xvID0gc2hyNjRfbG8oeGgsIHhsLCA3KTsKCiAgdmFyIHIgPSBjMF9sbyBeIGMxX2xvIF4gYzJfbG87CiAgaWYgKHIgPCAwKQogICAgciArPSAweDEwMDAwMDAwMDsKICByZXR1cm4gcjsKfQoKZnVuY3Rpb24gZzFfNTEyX2hpKHhoLCB4bCkgewogIHZhciBjMF9oaSA9IHJvdHI2NF9oaSh4aCwgeGwsIDE5KTsKICB2YXIgYzFfaGkgPSByb3RyNjRfaGkoeGwsIHhoLCAyOSk7ICAvLyA2MQogIHZhciBjMl9oaSA9IHNocjY0X2hpKHhoLCB4bCwgNik7CgogIHZhciByID0gYzBfaGkgXiBjMV9oaSBeIGMyX2hpOwogIGlmIChyIDwgMCkKICAgIHIgKz0gMHgxMDAwMDAwMDA7CiAgcmV0dXJuIHI7Cn0KCmZ1bmN0aW9uIGcxXzUxMl9sbyh4aCwgeGwpIHsKICB2YXIgYzBfbG8gPSByb3RyNjRfbG8oeGgsIHhsLCAxOSk7CiAgdmFyIGMxX2xvID0gcm90cjY0X2xvKHhsLCB4aCwgMjkpOyAgLy8gNjEKICB2YXIgYzJfbG8gPSBzaHI2NF9sbyh4aCwgeGwsIDYpOwoKICB2YXIgciA9IGMwX2xvIF4gYzFfbG8gXiBjMl9sbzsKICBpZiAociA8IDApCiAgICByICs9IDB4MTAwMDAwMDAwOwogIHJldHVybiByOwp9Cgp9LHsiLi4vaGFzaCI6MTIwfV0sMTI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHV0aWxzID0gZXhwb3J0czsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCmZ1bmN0aW9uIHRvQXJyYXkobXNnLCBlbmMpIHsKICBpZiAoQXJyYXkuaXNBcnJheShtc2cpKQogICAgcmV0dXJuIG1zZy5zbGljZSgpOwogIGlmICghbXNnKQogICAgcmV0dXJuIFtdOwogIHZhciByZXMgPSBbXTsKICBpZiAodHlwZW9mIG1zZyA9PT0gJ3N0cmluZycpIHsKICAgIGlmICghZW5jKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGMgPSBtc2cuY2hhckNvZGVBdChpKTsKICAgICAgICB2YXIgaGkgPSBjID4+IDg7CiAgICAgICAgdmFyIGxvID0gYyAmIDB4ZmY7CiAgICAgICAgaWYgKGhpKQogICAgICAgICAgcmVzLnB1c2goaGksIGxvKTsKICAgICAgICBlbHNlCiAgICAgICAgICByZXMucHVzaChsbyk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZW5jID09PSAnaGV4JykgewogICAgICBtc2cgPSBtc2cucmVwbGFjZSgvW15hLXowLTldKy9pZywgJycpOwogICAgICBpZiAobXNnLmxlbmd0aCAlIDIgIT09IDApCiAgICAgICAgbXNnID0gJzAnICsgbXNnOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkgKz0gMikKICAgICAgICByZXMucHVzaChwYXJzZUludChtc2dbaV0gKyBtc2dbaSArIDFdLCAxNikpOwogICAgfQogIH0gZWxzZSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykKICAgICAgcmVzW2ldID0gbXNnW2ldIHwgMDsKICB9CiAgcmV0dXJuIHJlczsKfQp1dGlscy50b0FycmF5ID0gdG9BcnJheTsKCmZ1bmN0aW9uIHRvSGV4KG1zZykgewogIHZhciByZXMgPSAnJzsKICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykKICAgIHJlcyArPSB6ZXJvMihtc2dbaV0udG9TdHJpbmcoMTYpKTsKICByZXR1cm4gcmVzOwp9CnV0aWxzLnRvSGV4ID0gdG9IZXg7CgpmdW5jdGlvbiBodG9ubCh3KSB7CiAgdmFyIHJlcyA9ICh3ID4+PiAyNCkgfAogICAgICAgICAgICAoKHcgPj4+IDgpICYgMHhmZjAwKSB8CiAgICAgICAgICAgICgodyA8PCA4KSAmIDB4ZmYwMDAwKSB8CiAgICAgICAgICAgICgodyAmIDB4ZmYpIDw8IDI0KTsKICByZXR1cm4gcmVzID4+PiAwOwp9CnV0aWxzLmh0b25sID0gaHRvbmw7CgpmdW5jdGlvbiB0b0hleDMyKG1zZywgZW5kaWFuKSB7CiAgdmFyIHJlcyA9ICcnOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgdyA9IG1zZ1tpXTsKICAgIGlmIChlbmRpYW4gPT09ICdsaXR0bGUnKQogICAgICB3ID0gaHRvbmwodyk7CiAgICByZXMgKz0gemVybzgody50b1N0cmluZygxNikpOwogIH0KICByZXR1cm4gcmVzOwp9CnV0aWxzLnRvSGV4MzIgPSB0b0hleDMyOwoKZnVuY3Rpb24gemVybzIod29yZCkgewogIGlmICh3b3JkLmxlbmd0aCA9PT0gMSkKICAgIHJldHVybiAnMCcgKyB3b3JkOwogIGVsc2UKICAgIHJldHVybiB3b3JkOwp9CnV0aWxzLnplcm8yID0gemVybzI7CgpmdW5jdGlvbiB6ZXJvOCh3b3JkKSB7CiAgaWYgKHdvcmQubGVuZ3RoID09PSA3KQogICAgcmV0dXJuICcwJyArIHdvcmQ7CiAgZWxzZSBpZiAod29yZC5sZW5ndGggPT09IDYpCiAgICByZXR1cm4gJzAwJyArIHdvcmQ7CiAgZWxzZSBpZiAod29yZC5sZW5ndGggPT09IDUpCiAgICByZXR1cm4gJzAwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSA0KQogICAgcmV0dXJuICcwMDAwJyArIHdvcmQ7CiAgZWxzZSBpZiAod29yZC5sZW5ndGggPT09IDMpCiAgICByZXR1cm4gJzAwMDAwJyArIHdvcmQ7CiAgZWxzZSBpZiAod29yZC5sZW5ndGggPT09IDIpCiAgICByZXR1cm4gJzAwMDAwMCcgKyB3b3JkOwogIGVsc2UgaWYgKHdvcmQubGVuZ3RoID09PSAxKQogICAgcmV0dXJuICcwMDAwMDAwJyArIHdvcmQ7CiAgZWxzZQogICAgcmV0dXJuIHdvcmQ7Cn0KdXRpbHMuemVybzggPSB6ZXJvODsKCmZ1bmN0aW9uIGpvaW4zMihtc2csIHN0YXJ0LCBlbmQsIGVuZGlhbikgewogIHZhciBsZW4gPSBlbmQgLSBzdGFydDsKICBhc3NlcnQobGVuICUgNCA9PT0gMCk7CiAgdmFyIHJlcyA9IG5ldyBBcnJheShsZW4gLyA0KTsKICBmb3IgKHZhciBpID0gMCwgayA9IHN0YXJ0OyBpIDwgcmVzLmxlbmd0aDsgaSsrLCBrICs9IDQpIHsKICAgIHZhciB3OwogICAgaWYgKGVuZGlhbiA9PT0gJ2JpZycpCiAgICAgIHcgPSAobXNnW2tdIDw8IDI0KSB8IChtc2dbayArIDFdIDw8IDE2KSB8IChtc2dbayArIDJdIDw8IDgpIHwgbXNnW2sgKyAzXTsKICAgIGVsc2UKICAgICAgdyA9IChtc2dbayArIDNdIDw8IDI0KSB8IChtc2dbayArIDJdIDw8IDE2KSB8IChtc2dbayArIDFdIDw8IDgpIHwgbXNnW2tdOwogICAgcmVzW2ldID0gdyA+Pj4gMDsKICB9CiAgcmV0dXJuIHJlczsKfQp1dGlscy5qb2luMzIgPSBqb2luMzI7CgpmdW5jdGlvbiBzcGxpdDMyKG1zZywgZW5kaWFuKSB7CiAgdmFyIHJlcyA9IG5ldyBBcnJheShtc2cubGVuZ3RoICogNCk7CiAgZm9yICh2YXIgaSA9IDAsIGsgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrLCBrICs9IDQpIHsKICAgIHZhciBtID0gbXNnW2ldOwogICAgaWYgKGVuZGlhbiA9PT0gJ2JpZycpIHsKICAgICAgcmVzW2tdID0gbSA+Pj4gMjQ7CiAgICAgIHJlc1trICsgMV0gPSAobSA+Pj4gMTYpICYgMHhmZjsKICAgICAgcmVzW2sgKyAyXSA9IChtID4+PiA4KSAmIDB4ZmY7CiAgICAgIHJlc1trICsgM10gPSBtICYgMHhmZjsKICAgIH0gZWxzZSB7CiAgICAgIHJlc1trICsgM10gPSBtID4+PiAyNDsKICAgICAgcmVzW2sgKyAyXSA9IChtID4+PiAxNikgJiAweGZmOwogICAgICByZXNbayArIDFdID0gKG0gPj4+IDgpICYgMHhmZjsKICAgICAgcmVzW2tdID0gbSAmIDB4ZmY7CiAgICB9CiAgfQogIHJldHVybiByZXM7Cn0KdXRpbHMuc3BsaXQzMiA9IHNwbGl0MzI7CgpmdW5jdGlvbiByb3RyMzIodywgYikgewogIHJldHVybiAodyA+Pj4gYikgfCAodyA8PCAoMzIgLSBiKSk7Cn0KdXRpbHMucm90cjMyID0gcm90cjMyOwoKZnVuY3Rpb24gcm90bDMyKHcsIGIpIHsKICByZXR1cm4gKHcgPDwgYikgfCAodyA+Pj4gKDMyIC0gYikpOwp9CnV0aWxzLnJvdGwzMiA9IHJvdGwzMjsKCmZ1bmN0aW9uIHN1bTMyKGEsIGIpIHsKICByZXR1cm4gKGEgKyBiKSA+Pj4gMDsKfQp1dGlscy5zdW0zMiA9IHN1bTMyOwoKZnVuY3Rpb24gc3VtMzJfMyhhLCBiLCBjKSB7CiAgcmV0dXJuIChhICsgYiArIGMpID4+PiAwOwp9CnV0aWxzLnN1bTMyXzMgPSBzdW0zMl8zOwoKZnVuY3Rpb24gc3VtMzJfNChhLCBiLCBjLCBkKSB7CiAgcmV0dXJuIChhICsgYiArIGMgKyBkKSA+Pj4gMDsKfQp1dGlscy5zdW0zMl80ID0gc3VtMzJfNDsKCmZ1bmN0aW9uIHN1bTMyXzUoYSwgYiwgYywgZCwgZSkgewogIHJldHVybiAoYSArIGIgKyBjICsgZCArIGUpID4+PiAwOwp9CnV0aWxzLnN1bTMyXzUgPSBzdW0zMl81OwoKZnVuY3Rpb24gYXNzZXJ0KGNvbmQsIG1zZykgewogIGlmICghY29uZCkKICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKfQp1dGlscy5hc3NlcnQgPSBhc3NlcnQ7Cgp1dGlscy5pbmhlcml0cyA9IGluaGVyaXRzOwoKZnVuY3Rpb24gc3VtNjQoYnVmLCBwb3MsIGFoLCBhbCkgewogIHZhciBiaCA9IGJ1Zltwb3NdOwogIHZhciBibCA9IGJ1Zltwb3MgKyAxXTsKCiAgdmFyIGxvID0gKGFsICsgYmwpID4+PiAwOwogIHZhciBoaSA9IChsbyA8IGFsID8gMSA6IDApICsgYWggKyBiaDsKICBidWZbcG9zXSA9IGhpID4+PiAwOwogIGJ1Zltwb3MgKyAxXSA9IGxvOwp9CmV4cG9ydHMuc3VtNjQgPSBzdW02NDsKCmZ1bmN0aW9uIHN1bTY0X2hpKGFoLCBhbCwgYmgsIGJsKSB7CiAgdmFyIGxvID0gKGFsICsgYmwpID4+PiAwOwogIHZhciBoaSA9IChsbyA8IGFsID8gMSA6IDApICsgYWggKyBiaDsKICByZXR1cm4gaGkgPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfaGkgPSBzdW02NF9oaTsKCmZ1bmN0aW9uIHN1bTY0X2xvKGFoLCBhbCwgYmgsIGJsKSB7CiAgdmFyIGxvID0gYWwgKyBibDsKICByZXR1cm4gbG8gPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfbG8gPSBzdW02NF9sbzsKCmZ1bmN0aW9uIHN1bTY0XzRfaGkoYWgsIGFsLCBiaCwgYmwsIGNoLCBjbCwgZGgsIGRsKSB7CiAgdmFyIGNhcnJ5ID0gMDsKICB2YXIgbG8gPSBhbDsKICBsbyA9IChsbyArIGJsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGFsID8gMSA6IDA7CiAgbG8gPSAobG8gKyBjbCkgPj4+IDA7CiAgY2FycnkgKz0gbG8gPCBjbCA/IDEgOiAwOwogIGxvID0gKGxvICsgZGwpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgZGwgPyAxIDogMDsKCiAgdmFyIGhpID0gYWggKyBiaCArIGNoICsgZGggKyBjYXJyeTsKICByZXR1cm4gaGkgPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfNF9oaSA9IHN1bTY0XzRfaGk7CgpmdW5jdGlvbiBzdW02NF80X2xvKGFoLCBhbCwgYmgsIGJsLCBjaCwgY2wsIGRoLCBkbCkgewogIHZhciBsbyA9IGFsICsgYmwgKyBjbCArIGRsOwogIHJldHVybiBsbyA+Pj4gMDsKfTsKZXhwb3J0cy5zdW02NF80X2xvID0gc3VtNjRfNF9sbzsKCmZ1bmN0aW9uIHN1bTY0XzVfaGkoYWgsIGFsLCBiaCwgYmwsIGNoLCBjbCwgZGgsIGRsLCBlaCwgZWwpIHsKICB2YXIgY2FycnkgPSAwOwogIHZhciBsbyA9IGFsOwogIGxvID0gKGxvICsgYmwpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgYWwgPyAxIDogMDsKICBsbyA9IChsbyArIGNsKSA+Pj4gMDsKICBjYXJyeSArPSBsbyA8IGNsID8gMSA6IDA7CiAgbG8gPSAobG8gKyBkbCkgPj4+IDA7CiAgY2FycnkgKz0gbG8gPCBkbCA/IDEgOiAwOwogIGxvID0gKGxvICsgZWwpID4+PiAwOwogIGNhcnJ5ICs9IGxvIDwgZWwgPyAxIDogMDsKCiAgdmFyIGhpID0gYWggKyBiaCArIGNoICsgZGggKyBlaCArIGNhcnJ5OwogIHJldHVybiBoaSA+Pj4gMDsKfTsKZXhwb3J0cy5zdW02NF81X2hpID0gc3VtNjRfNV9oaTsKCmZ1bmN0aW9uIHN1bTY0XzVfbG8oYWgsIGFsLCBiaCwgYmwsIGNoLCBjbCwgZGgsIGRsLCBlaCwgZWwpIHsKICB2YXIgbG8gPSBhbCArIGJsICsgY2wgKyBkbCArIGVsOwoKICByZXR1cm4gbG8gPj4+IDA7Cn07CmV4cG9ydHMuc3VtNjRfNV9sbyA9IHN1bTY0XzVfbG87CgpmdW5jdGlvbiByb3RyNjRfaGkoYWgsIGFsLCBudW0pIHsKICB2YXIgciA9IChhbCA8PCAoMzIgLSBudW0pKSB8IChhaCA+Pj4gbnVtKTsKICByZXR1cm4gciA+Pj4gMDsKfTsKZXhwb3J0cy5yb3RyNjRfaGkgPSByb3RyNjRfaGk7CgpmdW5jdGlvbiByb3RyNjRfbG8oYWgsIGFsLCBudW0pIHsKICB2YXIgciA9IChhaCA8PCAoMzIgLSBudW0pKSB8IChhbCA+Pj4gbnVtKTsKICByZXR1cm4gciA+Pj4gMDsKfTsKZXhwb3J0cy5yb3RyNjRfbG8gPSByb3RyNjRfbG87CgpmdW5jdGlvbiBzaHI2NF9oaShhaCwgYWwsIG51bSkgewogIHJldHVybiBhaCA+Pj4gbnVtOwp9OwpleHBvcnRzLnNocjY0X2hpID0gc2hyNjRfaGk7CgpmdW5jdGlvbiBzaHI2NF9sbyhhaCwgYWwsIG51bSkgewogIHZhciByID0gKGFoIDw8ICgzMiAtIG51bSkpIHwgKGFsID4+PiBudW0pOwogIHJldHVybiByID4+PiAwOwp9OwpleHBvcnRzLnNocjY0X2xvID0gc2hyNjRfbG87Cgp9LHsiaW5oZXJpdHMiOjEyOX1dLDEyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocHJvY2Vzcyl7Ci8qISBoZWxsb2pzIHYxLjEwLjEgfCAoYykgMjAxMi0yMDE2IEFuZHJldyBEb2Rzb24gfCBNSVQgaHR0cHM6Ly9hZG9kc29uLmNvbS9oZWxsby5qcy9MSUNFTlNFICovDQovLyBFUzUgT2JqZWN0LmNyZWF0ZQppZiAoIU9iamVjdC5jcmVhdGUpIHsKCgkvLyBTaGltLCBPYmplY3QgY3JlYXRlCgkvLyBBIHNoaW0gZm9yIE9iamVjdC5jcmVhdGUoKSwgaXQgYWRkcyBhIHByb3RvdHlwZSB0byBhIG5ldyBvYmplY3QKCU9iamVjdC5jcmVhdGUgPSAoZnVuY3Rpb24oKSB7CgoJCWZ1bmN0aW9uIEYoKSB7fQoKCQlyZXR1cm4gZnVuY3Rpb24obykgewoKCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggIT0gMSkgewoJCQkJdGhyb3cgbmV3IEVycm9yKCdPYmplY3QuY3JlYXRlIGltcGxlbWVudGF0aW9uIG9ubHkgYWNjZXB0cyBvbmUgcGFyYW1ldGVyLicpOwoJCQl9CgoJCQlGLnByb3RvdHlwZSA9IG87CgkJCXJldHVybiBuZXcgRigpOwoJCX07CgoJfSkoKTsKCn0KCi8vIEVTNSBPYmplY3Qua2V5cwppZiAoIU9iamVjdC5rZXlzKSB7CglPYmplY3Qua2V5cyA9IGZ1bmN0aW9uKG8sIGssIHIpIHsKCQlyID0gW107CgkJZm9yIChrIGluIG8pIHsKCQkJaWYgKHIuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkKCQkJCXIucHVzaChrKTsKCQl9CgoJCXJldHVybiByOwoJfTsKfQoKLy8gRVM1IFtdLmluZGV4T2YKaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikgewoJQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbihzKSB7CgoJCWZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5sZW5ndGg7IGorKykgewoJCQlpZiAodGhpc1tqXSA9PT0gcykgewoJCQkJcmV0dXJuIGo7CgkJCX0KCQl9CgoJCXJldHVybiAtMTsKCX07Cn0KCi8vIEVTNSBbXS5mb3JFYWNoCmlmICghQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHsKCUFycmF5LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oZnVuLyosIHRoaXNBcmcqLykgewoKCQlpZiAodGhpcyA9PT0gdm9pZCAwIHx8IHRoaXMgPT09IG51bGwpIHsKCQkJdGhyb3cgbmV3IFR5cGVFcnJvcigpOwoJCX0KCgkJdmFyIHQgPSBPYmplY3QodGhpcyk7CgkJdmFyIGxlbiA9IHQubGVuZ3RoID4+PiAwOwoJCWlmICh0eXBlb2YgZnVuICE9PSAnZnVuY3Rpb24nKSB7CgkJCXRocm93IG5ldyBUeXBlRXJyb3IoKTsKCQl9CgoJCXZhciB0aGlzQXJnID0gYXJndW1lbnRzLmxlbmd0aCA+PSAyID8gYXJndW1lbnRzWzFdIDogdm9pZCAwOwoJCWZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCQkJaWYgKGkgaW4gdCkgewoJCQkJZnVuLmNhbGwodGhpc0FyZywgdFtpXSwgaSwgdCk7CgkJCX0KCQl9CgoJCXJldHVybiB0aGlzOwoJfTsKfQoKLy8gRVM1IFtdLmZpbHRlcgppZiAoIUFycmF5LnByb3RvdHlwZS5maWx0ZXIpIHsKCUFycmF5LnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbihmdW4sIHRoaXNBcmcpIHsKCgkJdmFyIGEgPSBbXTsKCQl0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsLCBpLCB0KSB7CgkJCWlmIChmdW4uY2FsbCh0aGlzQXJnIHx8IHZvaWQgMCwgdmFsLCBpLCB0KSkgewoJCQkJYS5wdXNoKHZhbCk7CgkJCX0KCQl9KTsKCgkJcmV0dXJuIGE7Cgl9Owp9CgovLyBQcm9kdWN0aW9uIHN0ZXBzIG9mIEVDTUEtMjYyLCBFZGl0aW9uIDUsIDE1LjQuNC4xOQovLyBSZWZlcmVuY2U6IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuNC40LjE5CmlmICghQXJyYXkucHJvdG90eXBlLm1hcCkgewoKCUFycmF5LnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbihmdW4sIHRoaXNBcmcpIHsKCgkJdmFyIGEgPSBbXTsKCQl0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsLCBpLCB0KSB7CgkJCWEucHVzaChmdW4uY2FsbCh0aGlzQXJnIHx8IHZvaWQgMCwgdmFsLCBpLCB0KSk7CgkJfSk7CgoJCXJldHVybiBhOwoJfTsKfQoKLy8gRVM1IGlzQXJyYXkKaWYgKCFBcnJheS5pc0FycmF5KSB7CgoJLy8gRnVuY3Rpb24gQXJyYXkuaXNBcnJheQoJQXJyYXkuaXNBcnJheSA9IGZ1bmN0aW9uKG8pIHsKCQlyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pID09PSAnW29iamVjdCBBcnJheV0nOwoJfTsKCn0KCi8vIFRlc3QgZm9yIGxvY2F0aW9uLmFzc2lnbgppZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHdpbmRvdy5sb2NhdGlvbiA9PT0gJ29iamVjdCcgJiYgIXdpbmRvdy5sb2NhdGlvbi5hc3NpZ24pIHsKCgl3aW5kb3cubG9jYXRpb24uYXNzaWduID0gZnVuY3Rpb24odXJsKSB7CgkJd2luZG93LmxvY2F0aW9uID0gdXJsOwoJfTsKCn0KCi8vIFRlc3QgZm9yIEZ1bmN0aW9uLmJpbmQKaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkgewoKCS8vIE1ETgoJLy8gUG9seWZpbGwgSUU4LCBkb2VzIG5vdCBzdXBwb3J0IG5hdGl2ZSBGdW5jdGlvbi5iaW5kCglGdW5jdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uKGIpIHsKCgkJaWYgKHR5cGVvZiB0aGlzICE9PSAnZnVuY3Rpb24nKSB7CgkJCXRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlJyk7CgkJfQoKCQlmdW5jdGlvbiBDKCkge30KCgkJdmFyIGEgPSBbXS5zbGljZTsKCQl2YXIgZiA9IGEuY2FsbChhcmd1bWVudHMsIDEpOwoJCXZhciBfdGhpcyA9IHRoaXM7CgkJdmFyIEQgPSBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIF90aGlzLmFwcGx5KHRoaXMgaW5zdGFuY2VvZiBDID8gdGhpcyA6IGIgfHwgd2luZG93LCBmLmNvbmNhdChhLmNhbGwoYXJndW1lbnRzKSkpOwoJCX07CgoJCUMucHJvdG90eXBlID0gdGhpcy5wcm90b3R5cGU7CgkJRC5wcm90b3R5cGUgPSBuZXcgQygpOwoKCQlyZXR1cm4gRDsKCX07Cgp9CgovKioKICogQGhlbGxvLmpzCiAqCiAqIEhlbGxvSlMgaXMgYSBjbGllbnQgc2lkZSBKYXZhc2NyaXB0IFNESyBmb3IgbWFraW5nIE9BdXRoMiBsb2dpbnMgYW5kIHN1YnNlcXVlbnQgUkVTVCBjYWxscy4KICoKICogQGF1dGhvciBBbmRyZXcgRG9kc29uCiAqIEB3ZWJzaXRlIGh0dHBzOi8vYWRvZHNvbi5jb20vaGVsbG8uanMvCiAqCiAqIEBjb3B5cmlnaHQgQW5kcmV3IERvZHNvbiwgMjAxMiAtIDIwMTUKICogQGxpY2Vuc2UgTUlUOiBZb3UgYXJlIGZyZWUgdG8gdXNlIGFuZCBtb2RpZnkgdGhpcyBjb2RlIGZvciBhbnkgdXNlLCBvbiB0aGUgY29uZGl0aW9uIHRoYXQgdGhpcyBjb3B5cmlnaHQgbm90aWNlIHJlbWFpbnMuCiAqLwoKdmFyIGhlbGxvID0gZnVuY3Rpb24obmFtZSkgewoJcmV0dXJuIGhlbGxvLnVzZShuYW1lKTsKfTsKCmhlbGxvLnV0aWxzID0gewoKCS8vIEV4dGVuZCB0aGUgZmlyc3Qgb2JqZWN0IHdpdGggdGhlIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMgb2YgdGhlIHNlY29uZAoJZXh0ZW5kOiBmdW5jdGlvbihyIC8qLCBhWywgYlssIC4uLl1dICovKSB7CgoJCS8vIEdldCB0aGUgYXJndW1lbnRzIGFzIGFuIGFycmF5IGJ1dCBvbW1pdCB0aGUgaW5pdGlhbCBpdGVtCgkJQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKS5mb3JFYWNoKGZ1bmN0aW9uKGEpIHsKCQkJaWYgKHIgaW5zdGFuY2VvZiBPYmplY3QgJiYgYSBpbnN0YW5jZW9mIE9iamVjdCAmJiByICE9PSBhKSB7CgkJCQlmb3IgKHZhciB4IGluIGEpIHsKCQkJCQlyW3hdID0gaGVsbG8udXRpbHMuZXh0ZW5kKHJbeF0sIGFbeF0pOwoJCQkJfQoJCQl9CgkJCWVsc2UgewoJCQkJciA9IGE7CgkJCX0KCQl9KTsKCgkJcmV0dXJuIHI7Cgl9Cn07CgovLyBDb3JlIGxpYnJhcnkKaGVsbG8udXRpbHMuZXh0ZW5kKGhlbGxvLCB7CgoJc2V0dGluZ3M6IHsKCgkJLy8gT0F1dGgyIGF1dGhlbnRpY2F0aW9uIGRlZmF1bHRzCgkJcmVkaXJlY3RfdXJpOiB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzBdLAoJCXJlc3BvbnNlX3R5cGU6ICd0b2tlbicsCgkJZGlzcGxheTogJ3BvcHVwJywKCQlzdGF0ZTogJycsCgoJCS8vIE9BdXRoMSBzaGltCgkJLy8gVGhlIHBhdGggdG8gdGhlIE9BdXRoMSBzZXJ2ZXIgZm9yIHNpZ25pbmcgdXNlciByZXF1ZXN0cwoJCS8vIFdhbnQgdG8gcmVjcmVhdGUgeW91ciBvd24/IENoZWNrb3V0IGh0dHBzOi8vZ2l0aHViLmNvbS9NclN3aXRjaC9ub2RlLW9hdXRoLXNoaW0KCQlvYXV0aF9wcm94eTogJ2h0dHBzOi8vYXV0aC1zZXJ2ZXIuaGVyb2t1YXBwLmNvbS9wcm94eScsCgoJCS8vIEFQSSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcwoJCXRpbWVvdXQ6IDIwMDAwLAoKCQkvLyBQb3B1cCBPcHRpb25zCgkJcG9wdXA6IHsKCQkJcmVzaXphYmxlOiAxLAoJCQlzY3JvbGxiYXJzOiAxLAoJCQl3aWR0aDogNTAwLAoJCQloZWlnaHQ6IDU1MAoJCX0sCgoJCS8vIERlZmF1bHQgc2VydmljZSAvIG5ldHdvcmsKCQlkZWZhdWx0X3NlcnZpY2U6IG51bGwsCgoJCS8vIEZvcmNlIGF1dGhlbnRpY2F0aW9uCgkJLy8gV2hlbiBoZWxsby5sb2dpbiBpcyBmaXJlZC4KCQkvLyAobnVsbCk6IGlnbm9yZSBjdXJyZW50IHNlc3Npb24gZXhwaXJ5IGFuZCBjb250aW51ZSB3aXRoIGxvZ2luCgkJLy8gKHRydWUpOiBpZ25vcmUgY3VycmVudCBzZXNzaW9uIGV4cGlyeSBhbmQgY29udGludWUgd2l0aCBsb2dpbiwgYXNrIGZvciB1c2VyIHRvIHJlYXV0aGVudGljYXRlCgkJLy8gKGZhbHNlKTogaWYgdGhlIGN1cnJlbnQgc2Vzc2lvbiBsb29rcyBnb29kIGZvciB0aGUgcmVxdWVzdCBzY29wZXMgcmV0dXJuIHRoZSBjdXJyZW50IHNlc3Npb24uCgkJZm9yY2U6IG51bGwsCgoJCS8vIFBhZ2UgVVJMCgkJLy8gV2hlbiAnZGlzcGxheT1wYWdlJyB0aGlzIHByb3BlcnR5IGRlZmluZXMgd2hlcmUgdGhlIHVzZXJzIHBhZ2Ugc2hvdWxkIGVuZCB1cCBhZnRlciByZWRpcmVjdF91cmkKCQkvLyBUaHMgY291bGQgYmUgcHJvYmxlbWF0aWMgaWYgdGhlIHJlZGlyZWN0X3VyaSBpcyBpbmRlZWQgdGhlIGZpbmFsIHBsYWNlLAoJCS8vIFR5cGljYWxseSB0aGlzIGNpcmN1bXZlbnRzIHRoZSBwcm9ibGVtIG9mIHRoZSByZWRpcmVjdF91cmwgYmVpbmcgYSBkdW1iIHJlbGF5IHBhZ2UuCgkJcGFnZV91cmk6IHdpbmRvdy5sb2NhdGlvbi5ocmVmCgl9LAoKCS8vIFNlcnZpY2UgY29uZmlndXJhdGlvbiBvYmplY3RzCglzZXJ2aWNlczoge30sCgoJLy8gVXNlCgkvLyBEZWZpbmUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIEhlbGxvSlMgbGlicmFyeSB3aXRoIGEgZGVmYXVsdCBzZXJ2aWNlCgl1c2U6IGZ1bmN0aW9uKHNlcnZpY2UpIHsKCgkJLy8gQ3JlYXRlIHNlbGYsIHdoaWNoIGluaGVyaXRzIGZyb20gaXRzIHBhcmVudAoJCXZhciBzZWxmID0gT2JqZWN0LmNyZWF0ZSh0aGlzKTsKCgkJLy8gSW5oZXJpdCB0aGUgcHJvdG90eXBlIGZyb20gaXRzIHBhcmVudAoJCXNlbGYuc2V0dGluZ3MgPSBPYmplY3QuY3JlYXRlKHRoaXMuc2V0dGluZ3MpOwoKCQkvLyBEZWZpbmUgdGhlIGRlZmF1bHQgc2VydmljZQoJCWlmIChzZXJ2aWNlKSB7CgkJCXNlbGYuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlID0gc2VydmljZTsKCQl9CgoJCS8vIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBFdmVudHMKCQlzZWxmLnV0aWxzLkV2ZW50LmNhbGwoc2VsZik7CgoJCXJldHVybiBzZWxmOwoJfSwKCgkvLyBJbml0aWFsaXplCgkvLyBEZWZpbmUgdGhlIGNsaWVudF9pZHMgZm9yIHRoZSBlbmRwb2ludCBzZXJ2aWNlcwoJLy8gQHBhcmFtIG9iamVjdCBvLCBjb250YWlucyBhIGtleSB2YWx1ZSBwYWlyLCBzZXJ2aWNlID0+IGNsaWVudElkCgkvLyBAcGFyYW0gb2JqZWN0IG9wdHMsIGNvbnRhaW5zIGEga2V5IHZhbHVlIHBhaXIgb2Ygb3B0aW9ucyB1c2VkIGZvciBkZWZpbmluZyB0aGUgYXV0aGVudGljYXRpb24gZGVmYXVsdHMKCS8vIEBwYXJhbSBudW1iZXIgdGltZW91dCwgdGltZW91dCBpbiBzZWNvbmRzCglpbml0OiBmdW5jdGlvbihzZXJ2aWNlcywgb3B0aW9ucykgewoKCQl2YXIgdXRpbHMgPSB0aGlzLnV0aWxzOwoKCQlpZiAoIXNlcnZpY2VzKSB7CgkJCXJldHVybiB0aGlzLnNlcnZpY2VzOwoJCX0KCgkJLy8gRGVmaW5lIHByb3ZpZGVyIGNyZWRlbnRpYWxzCgkJLy8gUmVmb3JtYXQgdGhlIElEIGZpZWxkCgkJZm9yICh2YXIgeCBpbiBzZXJ2aWNlcykge2lmIChzZXJ2aWNlcy5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQlpZiAodHlwZW9mIChzZXJ2aWNlc1t4XSkgIT09ICdvYmplY3QnKSB7CgkJCQlzZXJ2aWNlc1t4XSA9IHtpZDogc2VydmljZXNbeF19OwoJCQl9CgkJfX0KCgkJLy8gTWVyZ2Ugc2VydmljZXMgaWYgdGhlcmUgYWxyZWFkeSBleGlzdHMgc29tZQoJCXV0aWxzLmV4dGVuZCh0aGlzLnNlcnZpY2VzLCBzZXJ2aWNlcyk7CgoJCS8vIEZvcm1hdCB0aGUgaW5jb21pbmcKCQlmb3IgKHggaW4gdGhpcy5zZXJ2aWNlcykgewoJCQlpZiAodGhpcy5zZXJ2aWNlcy5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQkJdGhpcy5zZXJ2aWNlc1t4XS5zY29wZSA9IHRoaXMuc2VydmljZXNbeF0uc2NvcGUgfHwge307CgkJCX0KCQl9CgoJCS8vCgkJLy8gVXBkYXRlIHRoZSBkZWZhdWx0IHNldHRpbmdzIHdpdGggdGhpcyBvbmUuCgkJaWYgKG9wdGlvbnMpIHsKCQkJdXRpbHMuZXh0ZW5kKHRoaXMuc2V0dGluZ3MsIG9wdGlvbnMpOwoKCQkJLy8gRG8gdGhpcyBpbW1lZGlhdGx5IGluY2FzZSB0aGUgYnJvd3NlciBjaGFuZ2VzIHRoZSBjdXJyZW50IHBhdGguCgkJCWlmICgncmVkaXJlY3RfdXJpJyBpbiBvcHRpb25zKSB7CgkJCQl0aGlzLnNldHRpbmdzLnJlZGlyZWN0X3VyaSA9IHV0aWxzLnVybChvcHRpb25zLnJlZGlyZWN0X3VyaSkuaHJlZjsKCQkJfQoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCS8vIExvZ2luCgkvLyBVc2luZyB0aGUgZW5kcG9pbnQKCS8vIEBwYXJhbSBuZXR3b3JrIHN0cmluZ2lmeSAgICAgICBuYW1lIHRvIGNvbm5lY3QgdG8KCS8vIEBwYXJhbSBvcHRpb25zIG9iamVjdCAgICAob3B0aW9uYWwpICB7ZGlzcGxheSBtb2RlLCBpcyBlaXRoZXIgbm9uZXxwb3B1cChkZWZhdWx0KXxwYWdlLCBzY29wZTogZW1haWwsYmlydGhkYXkscHVibGlzaCwgLi4gfQoJLy8gQHBhcmFtIGNhbGxiYWNrICBmdW5jdGlvbiAgKG9wdGlvbmFsKSAgZmlyZWQgb24gc2lnbmluCglsb2dpbjogZnVuY3Rpb24oKSB7CgoJCS8vIENyZWF0ZSBhbiBvYmplY3Qgd2hpY2ggaW5oZXJpdHMgaXRzIHBhcmVudCBhcyB0aGUgcHJvdG90eXBlIGFuZCBjb25zdHJ1Y3RzIGEgbmV3IGV2ZW50IGNoYWluLgoJCXZhciBfdGhpcyA9IHRoaXM7CgkJdmFyIHV0aWxzID0gX3RoaXMudXRpbHM7CgkJdmFyIGVycm9yID0gdXRpbHMuZXJyb3I7CgkJdmFyIHByb21pc2UgPSB1dGlscy5Qcm9taXNlKCk7CgoJCS8vIEdldCBwYXJhbWV0ZXJzCgkJdmFyIHAgPSB1dGlscy5hcmdzKHtuZXR3b3JrOiAncycsIG9wdGlvbnM6ICdvJywgY2FsbGJhY2s6ICdmJ30sIGFyZ3VtZW50cyk7CgoJCS8vIExvY2FsIHZhcnMKCQl2YXIgdXJsOwoKCQkvLyBHZXQgYWxsIHRoZSBjdXN0b20gb3B0aW9ucyBhbmQgc3RvcmUgdG8gYmUgYXBwZW5kZWQgdG8gdGhlIHF1ZXJ5c3RyaW5nCgkJdmFyIHFzID0gdXRpbHMuZGlmZktleShwLm9wdGlvbnMsIF90aGlzLnNldHRpbmdzKTsKCgkJLy8gTWVyZ2Uvb3ZlcnJpZGUgb3B0aW9ucyB3aXRoIGFwcCBkZWZhdWx0cwoJCXZhciBvcHRzID0gcC5vcHRpb25zID0gdXRpbHMubWVyZ2UoX3RoaXMuc2V0dGluZ3MsIHAub3B0aW9ucyB8fCB7fSk7CgoJCS8vIE1lcmdlL292ZXJyaWRlIG9wdGlvbnMgd2l0aCBhcHAgZGVmYXVsdHMKCQlvcHRzLnBvcHVwID0gdXRpbHMubWVyZ2UoX3RoaXMuc2V0dGluZ3MucG9wdXAsIHAub3B0aW9ucy5wb3B1cCB8fCB7fSk7CgoJCS8vIE5ldHdvcmsKCQlwLm5ldHdvcmsgPSBwLm5ldHdvcmsgfHwgX3RoaXMuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlOwoKCQkvLyBCaW5kIGNhbGxiYWNrIHRvIGJvdGggcmVqZWN0IGFuZCBmdWxmaWxsIHN0YXRlcwoJCXByb21pc2UucHJveHkudGhlbihwLmNhbGxiYWNrLCBwLmNhbGxiYWNrKTsKCgkJLy8gVHJpZ2dlciBhbiBldmVudCBvbiB0aGUgZ2xvYmFsIGxpc3RlbmVyCgkJZnVuY3Rpb24gZW1pdChzLCB2YWx1ZSkgewoJCQloZWxsby5lbWl0KHMsIHZhbHVlKTsKCQl9CgoJCXByb21pc2UucHJveHkudGhlbihlbWl0LmJpbmQodGhpcywgJ2F1dGgubG9naW4gYXV0aCcpLCBlbWl0LmJpbmQodGhpcywgJ2F1dGguZmFpbGVkIGF1dGgnKSk7CgoJCS8vIElzIG91ciBzZXJ2aWNlIHZhbGlkPwoJCWlmICh0eXBlb2YgKHAubmV0d29yaykgIT09ICdzdHJpbmcnIHx8ICEocC5uZXR3b3JrIGluIF90aGlzLnNlcnZpY2VzKSkgewoJCQkvLyBUcmlnZ2VyIHRoZSBkZWZhdWx0IGxvZ2luLgoJCQkvLyBBaGggd2UgZG9udCBoYXZlIG9uZS4KCQkJcmV0dXJuIHByb21pc2UucmVqZWN0KGVycm9yKCdpbnZhbGlkX25ldHdvcmsnLCAnVGhlIHByb3ZpZGVkIG5ldHdvcmsgd2FzIG5vdCByZWNvZ25pemVkJykpOwoJCX0KCgkJdmFyIHByb3ZpZGVyID0gX3RoaXMuc2VydmljZXNbcC5uZXR3b3JrXTsKCgkJLy8gQ3JlYXRlIGEgZ2xvYmFsIGxpc3RlbmVyIHRvIGNhcHR1cmUgZXZlbnRzIHRyaWdnZXJlZCBvdXQgb2Ygc2NvcGUKCQl2YXIgY2FsbGJhY2tJZCA9IHV0aWxzLmdsb2JhbEV2ZW50KGZ1bmN0aW9uKHN0cikgewoKCQkJLy8gVGhlIHJlc3BvbnNlSGFuZGxlciByZXR1cm5zIGEgc3RyaW5nLCBsZXRzIHNhdmUgdGhpcyBsb2NhbGx5CgkJCXZhciBvYmo7CgoJCQlpZiAoc3RyKSB7CgkJCQlvYmogPSBKU09OLnBhcnNlKHN0cik7CgkJCX0KCQkJZWxzZSB7CgkJCQlvYmogPSBlcnJvcignY2FuY2VsbGVkJywgJ1RoZSBhdXRoZW50aWNhdGlvbiB3YXMgbm90IGNvbXBsZXRlZCcpOwoJCQl9CgoJCQkvLyBIYW5kbGUgdGhlc2UgcmVzcG9uc2UgdXNpbmcgdGhlIGxvY2FsCgkJCS8vIFRyaWdnZXIgb24gdGhlIHBhcmVudAoJCQlpZiAoIW9iai5lcnJvcikgewoKCQkJCS8vIFNhdmUgb24gdGhlIHBhcmVudCB3aW5kb3cgdGhlIG5ldyBjcmVkZW50aWFscwoJCQkJLy8gVGhpcyBmaXhlcyBhbiBJRTEwIGJ1ZyBpIHRoaW5rLi4uIGF0bGVhc3QgaXQgZG9lcyBmb3IgbWUuCgkJCQl1dGlscy5zdG9yZShvYmoubmV0d29yaywgb2JqKTsKCgkJCQkvLyBGdWxmaWxsIGEgc3VjY2Vzc2Z1bCBsb2dpbgoJCQkJcHJvbWlzZS5mdWxmaWxsKHsKCQkJCQluZXR3b3JrOiBvYmoubmV0d29yaywKCQkJCQlhdXRoUmVzcG9uc2U6IG9iagoJCQkJfSk7CgkJCX0KCQkJZWxzZSB7CgkJCQkvLyBSZWplY3QgYSBzdWNjZXNzZnVsIGxvZ2luCgkJCQlwcm9taXNlLnJlamVjdChvYmopOwoJCQl9CgkJfSk7CgoJCXZhciByZWRpcmVjdFVyaSA9IHV0aWxzLnVybChvcHRzLnJlZGlyZWN0X3VyaSkuaHJlZjsKCgkJLy8gTWF5IGJlIGEgc3BhY2UtZGVsaW1pdGVkIGxpc3Qgb2YgbXVsdGlwbGUsIGNvbXBsZW1lbnRhcnkgdHlwZXMKCQl2YXIgcmVzcG9uc2VUeXBlID0gcHJvdmlkZXIub2F1dGgucmVzcG9uc2VfdHlwZSB8fCBvcHRzLnJlc3BvbnNlX3R5cGU7CgoJCS8vIEZhbGxiYWNrIHRvIHRva2VuIGlmIHRoZSBtb2R1bGUgaGFzbid0IGRlZmluZWQgYSBncmFudCB1cmwKCQlpZiAoL1xiY29kZVxiLy50ZXN0KHJlc3BvbnNlVHlwZSkgJiYgIXByb3ZpZGVyLm9hdXRoLmdyYW50KSB7CgkJCXJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZS5yZXBsYWNlKC9cYmNvZGVcYi8sICd0b2tlbicpOwoJCX0KCgkJLy8gUXVlcnkgc3RyaW5nIHBhcmFtZXRlcnMsIHdlIG1heSBwYXNzIG91ciBvd24gYXJndW1lbnRzIHRvIGZvcm0gdGhlIHF1ZXJ5c3RyaW5nCgkJcC5xcyA9IHV0aWxzLm1lcmdlKHFzLCB7CgkJCWNsaWVudF9pZDogZW5jb2RlVVJJQ29tcG9uZW50KHByb3ZpZGVyLmlkKSwKCQkJcmVzcG9uc2VfdHlwZTogZW5jb2RlVVJJQ29tcG9uZW50KHJlc3BvbnNlVHlwZSksCgkJCXJlZGlyZWN0X3VyaTogZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0VXJpKSwKCQkJZGlzcGxheTogb3B0cy5kaXNwbGF5LAoJCQlzdGF0ZTogewoJCQkJY2xpZW50X2lkOiBwcm92aWRlci5pZCwKCQkJCW5ldHdvcms6IHAubmV0d29yaywKCQkJCWRpc3BsYXk6IG9wdHMuZGlzcGxheSwKCQkJCWNhbGxiYWNrOiBjYWxsYmFja0lkLAoJCQkJc3RhdGU6IG9wdHMuc3RhdGUsCgkJCQlyZWRpcmVjdF91cmk6IHJlZGlyZWN0VXJpCgkJCX0KCQl9KTsKCgkJLy8gR2V0IGN1cnJlbnQgc2Vzc2lvbiBmb3IgbWVyZ2luZyBzY29wZXMsIGFuZCBmb3IgcXVpY2sgYXV0aCByZXNwb25zZQoJCXZhciBzZXNzaW9uID0gdXRpbHMuc3RvcmUocC5uZXR3b3JrKTsKCgkJLy8gU2NvcGVzIChhdXRoZW50aWNhdGlvbiBwZXJtaXNpb25zKQoJCS8vIEVuc3VyZSB0aGlzIGlzIGEgc3RyaW5nIC0gSUUgaGFzIGEgcHJvYmxlbSBtb3ZpbmcgQXJyYXlzIGJldHdlZW4gd2luZG93cwoJCS8vIEFwcGVuZCB0aGUgc2V0dXAgc2NvcGUKCQl2YXIgU0NPUEVfU1BMSVQgPSAvWyxcc10rLzsKCQl2YXIgc2NvcGUgPSBbXTsKCgkJLy8gQWRkIHVzZXIgZGVmaW5lZCBzY29wZXMuLi4KCQlpZiAob3B0cy5zY29wZSkgewoJCQlzY29wZS5wdXNoKG9wdHMuc2NvcGUudG9TdHJpbmcoKSk7CgkJfQoKCQkvLyBBZGQgYW55IGJhc2ljIHNjb3BlIC0gdGhlIGRlZmF1bHQKCQlpZiAoJ2Jhc2ljJyBpbiBwcm92aWRlci5zY29wZSkgewoJCQlzY29wZS5wdXNoKCdiYXNpYycpOwoJCX0KCgkJLy8gQXBwZW5kIHNjb3BlcyBmcm9tIGEgcHJldmlvdXMgc2Vzc2lvbi4KCQkvLyBUaGlzIGhlbHBzIGtlZXAgYXBwIGNyZWRlbnRpYWxzIGNvbnN0YW50LAoJCS8vIEF2b2lkaW5nIGhhdmluZyB0byBrZWVwIHRhYnMgb24gd2hhdCBzY29wZXMgYXJlIGF1dGhvcml6ZWQKCQlpZiAoc2Vzc2lvbiAmJiAnc2NvcGUnIGluIHNlc3Npb24gJiYgc2Vzc2lvbi5zY29wZSBpbnN0YW5jZW9mIFN0cmluZykgewoJCQlzY29wZS5wdXNoKHNlc3Npb24uc2NvcGUpOwoJCX0KCgkJLy8gSm9pbiBhbmQgU3BsaXQgYWdhaW4KCQlzY29wZSA9IHNjb3BlLmpvaW4oJywnKS5zcGxpdChTQ09QRV9TUExJVCk7CgoJCS8vIEZvcm1hdCByZW1vdmUgZHVwbGljYXRlcyBhbmQgZW1wdHkgdmFsdWVzCgkJc2NvcGUgPSB1dGlscy51bmlxdWUoc2NvcGUpLmZpbHRlcihmaWx0ZXJFbXB0eSk7CgoJCS8vIFNhdmUgdGhlIHRoZSBzY29wZXMgdG8gdGhlIHN0YXRlIHdpdGggdGhlIG5hbWVzIHRoYXQgdGhleSB3ZXJlIHJlcXVlc3RlZCB3aXRoLgoJCXAucXMuc3RhdGUuc2NvcGUgPSBzY29wZS5qb2luKCcsJyk7CgoJCS8vIE1hcCBzY29wZXMgdG8gdGhlIHByb3ZpZGVycyBuYW1pbmcgY29udmVudGlvbgoJCXNjb3BlID0gc2NvcGUubWFwKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJLy8gRG9lcyB0aGlzIGhhdmUgYSBtYXBwaW5nPwoJCQlpZiAoaXRlbSBpbiBwcm92aWRlci5zY29wZSkgewoJCQkJcmV0dXJuIHByb3ZpZGVyLnNjb3BlW2l0ZW1dOwoJCQl9CgkJCWVsc2UgewoJCQkJLy8gTG9vcCB0aHJvdWdoIGFsbCBzZXJ2aWNlcyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHNjb3BlIGlzIGdlbmVyaWMKCQkJCWZvciAodmFyIHggaW4gX3RoaXMuc2VydmljZXMpIHsKCQkJCQl2YXIgc2VydmljZVNjb3BlcyA9IF90aGlzLnNlcnZpY2VzW3hdLnNjb3BlOwoJCQkJCWlmIChzZXJ2aWNlU2NvcGVzICYmIGl0ZW0gaW4gc2VydmljZVNjb3BlcykgewoJCQkJCQkvLyBGb3VuZCBhbiBpbnN0YW5jZSBvZiB0aGlzIHNjb3BlLCBzbyBsZXRzIG5vdCBhc3N1bWUgaXRzIHNwZWNpYWwKCQkJCQkJcmV0dXJuICcnOwoJCQkJCX0KCQkJCX0KCgkJCQkvLyBUaGlzIGlzIGEgdW5pcXVlIHNjb3BlIHRvIHRoaXMgc2VydmljZSBzbyBsZXRzIGluIGl0LgoJCQkJcmV0dXJuIGl0ZW07CgkJCX0KCgkJfSk7CgoJCS8vIFN0cmluZ2lmeSBhbmQgQXJyYXlpZnkgc28gdGhhdCBkb3VibGUgbWFwcGVkIHNjb3BlcyBhcmUgZ2l2ZW4gdGhlIGNoYW5jZSB0byBiZSBmb3JtYXR0ZWQKCQlzY29wZSA9IHNjb3BlLmpvaW4oJywnKS5zcGxpdChTQ09QRV9TUExJVCk7CgoJCS8vIEFnYWluLi4uCgkJLy8gRm9ybWF0IHJlbW92ZSBkdXBsaWNhdGVzIGFuZCBlbXB0eSB2YWx1ZXMKCQlzY29wZSA9IHV0aWxzLnVuaXF1ZShzY29wZSkuZmlsdGVyKGZpbHRlckVtcHR5KTsKCgkJLy8gSm9pbiB3aXRoIHRoZSBleHBlY3RlZCBzY29wZSBkZWxpbWl0ZXIgaW50byBhIHN0cmluZwoJCXAucXMuc2NvcGUgPSBzY29wZS5qb2luKHByb3ZpZGVyLnNjb3BlX2RlbGltIHx8ICcsJyk7CgoJCS8vIElzIHRoZSB1c2VyIGFscmVhZHkgc2lnbmVkIGluIHdpdGggdGhlIGFwcHJvcHJpYXRlIHNjb3BlcywgdmFsaWQgYWNjZXNzX3Rva2VuPwoJCWlmIChvcHRzLmZvcmNlID09PSBmYWxzZSkgewoKCQkJaWYgKHNlc3Npb24gJiYgJ2FjY2Vzc190b2tlbicgaW4gc2Vzc2lvbiAmJiBzZXNzaW9uLmFjY2Vzc190b2tlbiAmJiAnZXhwaXJlcycgaW4gc2Vzc2lvbiAmJiBzZXNzaW9uLmV4cGlyZXMgPiAoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAvIDFlMykpIHsKCQkJCS8vIFdoYXQgaXMgZGlmZmVyZW50IGFib3V0IHRoZSBzY29wZXMgaW4gdGhlIHNlc3Npb24gdnMgdGhlIHNjb3BlcyBpbiB0aGUgbmV3IGxvZ2luPwoJCQkJdmFyIGRpZmYgPSB1dGlscy5kaWZmKChzZXNzaW9uLnNjb3BlIHx8ICcnKS5zcGxpdChTQ09QRV9TUExJVCksIChwLnFzLnN0YXRlLnNjb3BlIHx8ICcnKS5zcGxpdChTQ09QRV9TUExJVCkpOwoJCQkJaWYgKGRpZmYubGVuZ3RoID09PSAwKSB7CgoJCQkJCS8vIE9LIHRyaWdnZXIgdGhlIGNhbGxiYWNrCgkJCQkJcHJvbWlzZS5mdWxmaWxsKHsKCQkJCQkJdW5jaGFuZ2VkOiB0cnVlLAoJCQkJCQluZXR3b3JrOiBwLm5ldHdvcmssCgkJCQkJCWF1dGhSZXNwb25zZTogc2Vzc2lvbgoJCQkJCX0pOwoKCQkJCQkvLyBOb3RoaW5nIGhhcyBjaGFuZ2VkCgkJCQkJcmV0dXJuIHByb21pc2U7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIFBhZ2UgVVJMCgkJaWYgKG9wdHMuZGlzcGxheSA9PT0gJ3BhZ2UnICYmIG9wdHMucGFnZV91cmkpIHsKCQkJLy8gQWRkIGEgcGFnZSBsb2NhdGlvbiwgcGxhY2UgdG8gZW5kdXAgYWZ0ZXIgc2Vzc2lvbiBoYXMgYXV0aGVudGljYXRlZAoJCQlwLnFzLnN0YXRlLnBhZ2VfdXJpID0gdXRpbHMudXJsKG9wdHMucGFnZV91cmkpLmhyZWY7CgkJfQoKCQkvLyBCZXNwb2tlCgkJLy8gT3ZlcnJpZGUgbG9naW4gcXVlcnlzdHJpbmdzIGZyb20gYXV0aF9vcHRpb25zCgkJaWYgKCdsb2dpbicgaW4gcHJvdmlkZXIgJiYgdHlwZW9mIChwcm92aWRlci5sb2dpbikgPT09ICdmdW5jdGlvbicpIHsKCQkJLy8gRm9ybWF0IHRoZSBwYXJhbWF0ZXJzIGFjY29yZGluZyB0byB0aGUgcHJvdmlkZXJzIGZvcm1hdHRpbmcgZnVuY3Rpb24KCQkJcHJvdmlkZXIubG9naW4ocCk7CgkJfQoKCQkvLyBBZGQgT0F1dGggdG8gc3RhdGUKCQkvLyBXaGVyZSB0aGUgc2VydmljZSBpcyBnb2luZyB0byB0YWtlIGFkdmFudGFnZSBvZiB0aGUgb2F1dGhfcHJveHkKCQlpZiAoIS9cYnRva2VuXGIvLnRlc3QocmVzcG9uc2VUeXBlKSB8fAoJCXBhcnNlSW50KHByb3ZpZGVyLm9hdXRoLnZlcnNpb24sIDEwKSA8IDIgfHwKCQkob3B0cy5kaXNwbGF5ID09PSAnbm9uZScgJiYgcHJvdmlkZXIub2F1dGguZ3JhbnQgJiYgc2Vzc2lvbiAmJiBzZXNzaW9uLnJlZnJlc2hfdG9rZW4pKSB7CgoJCQkvLyBBZGQgdGhlIG9hdXRoIGVuZHBvaW50cwoJCQlwLnFzLnN0YXRlLm9hdXRoID0gcHJvdmlkZXIub2F1dGg7CgoJCQkvLyBBZGQgdGhlIHByb3h5IHVybAoJCQlwLnFzLnN0YXRlLm9hdXRoX3Byb3h5ID0gb3B0cy5vYXV0aF9wcm94eTsKCgkJfQoKCQkvLyBDb252ZXJ0IHN0YXRlIHRvIGEgc3RyaW5nCgkJcC5xcy5zdGF0ZSA9IGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShwLnFzLnN0YXRlKSk7CgoJCS8vIFVSTAoJCWlmIChwYXJzZUludChwcm92aWRlci5vYXV0aC52ZXJzaW9uLCAxMCkgPT09IDEpIHsKCgkJCS8vIFR1cm4gdGhlIHJlcXVlc3QgdG8gdGhlIE9BdXRoIFByb3h5IGZvciAzLWxlZ2dlZCBhdXRoCgkJCXVybCA9IHV0aWxzLnFzKG9wdHMub2F1dGhfcHJveHksIHAucXMsIGVuY29kZUZ1bmN0aW9uKTsKCQl9CgoJCS8vIFJlZnJlc2ggdG9rZW4KCQllbHNlIGlmIChvcHRzLmRpc3BsYXkgPT09ICdub25lJyAmJiBwcm92aWRlci5vYXV0aC5ncmFudCAmJiBzZXNzaW9uICYmIHNlc3Npb24ucmVmcmVzaF90b2tlbikgewoKCQkJLy8gQWRkIHRoZSByZWZyZXNoX3Rva2VuIHRvIHRoZSByZXF1ZXN0CgkJCXAucXMucmVmcmVzaF90b2tlbiA9IHNlc3Npb24ucmVmcmVzaF90b2tlbjsKCgkJCS8vIERlZmluZSB0aGUgcmVxdWVzdCBwYXRoCgkJCXVybCA9IHV0aWxzLnFzKG9wdHMub2F1dGhfcHJveHksIHAucXMsIGVuY29kZUZ1bmN0aW9uKTsKCQl9CgkJZWxzZSB7CgkJCXVybCA9IHV0aWxzLnFzKHByb3ZpZGVyLm9hdXRoLmF1dGgsIHAucXMsIGVuY29kZUZ1bmN0aW9uKTsKCQl9CgoJCS8vIEJyb2FkY2FzdCB0aGlzIGV2ZW50IGFzIGFuIGF1dGg6aW5pdAoJCWVtaXQoJ2F1dGguaW5pdCcsIHApOwoKCQkvLyBFeGVjdXRlCgkJLy8gVHJpZ2dlciBob3cgd2Ugd2FudCBzZWxmIGRpc3BsYXllZAoJCWlmIChvcHRzLmRpc3BsYXkgPT09ICdub25lJykgewoJCQkvLyBTaWduLWluIGluIHRoZSBiYWNrZ3JvdW5kLCBpZnJhbWUKCQkJdXRpbHMuaWZyYW1lKHVybCwgcmVkaXJlY3RVcmkpOwoJCX0KCgkJLy8gVHJpZ2dlcmluZyBwb3B1cD8KCQllbHNlIGlmIChvcHRzLmRpc3BsYXkgPT09ICdwb3B1cCcpIHsKCgkJCXZhciBwb3B1cCA9IHV0aWxzLnBvcHVwKHVybCwgcmVkaXJlY3RVcmksIG9wdHMucG9wdXApOwoKCQkJdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CgkJCQlpZiAoIXBvcHVwIHx8IHBvcHVwLmNsb3NlZCkgewoJCQkJCWNsZWFySW50ZXJ2YWwodGltZXIpOwoJCQkJCWlmICghcHJvbWlzZS5zdGF0ZSkgewoKCQkJCQkJdmFyIHJlc3BvbnNlID0gZXJyb3IoJ2NhbmNlbGxlZCcsICdMb2dpbiBoYXMgYmVlbiBjYW5jZWxsZWQnKTsKCgkJCQkJCWlmICghcG9wdXApIHsKCQkJCQkJCXJlc3BvbnNlID0gZXJyb3IoJ2Jsb2NrZWQnLCAnUG9wdXAgd2FzIGJsb2NrZWQnKTsKCQkJCQkJfQoKCQkJCQkJcmVzcG9uc2UubmV0d29yayA9IHAubmV0d29yazsKCgkJCQkJCXByb21pc2UucmVqZWN0KHJlc3BvbnNlKTsKCQkJCQl9CgkJCQl9CgkJCX0sIDEwMCk7CgkJfQoKCQllbHNlIHsKCQkJd2luZG93LmxvY2F0aW9uID0gdXJsOwoJCX0KCgkJcmV0dXJuIHByb21pc2UucHJveHk7CgoJCWZ1bmN0aW9uIGVuY29kZUZ1bmN0aW9uKHMpIHtyZXR1cm4gczt9CgoJCWZ1bmN0aW9uIGZpbHRlckVtcHR5KHMpIHtyZXR1cm4gISFzO30KCX0sCgoJLy8gUmVtb3ZlIGFueSBkYXRhIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHNlcnZpY2UKCS8vIEBwYXJhbSBzdHJpbmcgbmFtZSBvZiB0aGUgc2VydmljZQoJLy8gQHBhcmFtIGZ1bmN0aW9uIGNhbGxiYWNrCglsb2dvdXQ6IGZ1bmN0aW9uKCkgewoKCQl2YXIgX3RoaXMgPSB0aGlzOwoJCXZhciB1dGlscyA9IF90aGlzLnV0aWxzOwoJCXZhciBlcnJvciA9IHV0aWxzLmVycm9yOwoKCQkvLyBDcmVhdGUgYSBuZXcgcHJvbWlzZQoJCXZhciBwcm9taXNlID0gdXRpbHMuUHJvbWlzZSgpOwoKCQl2YXIgcCA9IHV0aWxzLmFyZ3Moe25hbWU6J3MnLCBvcHRpb25zOiAnbycsIGNhbGxiYWNrOiAnZid9LCBhcmd1bWVudHMpOwoKCQlwLm9wdGlvbnMgPSBwLm9wdGlvbnMgfHwge307CgoJCS8vIEFkZCBjYWxsYmFjayB0byBldmVudHMKCQlwcm9taXNlLnByb3h5LnRoZW4ocC5jYWxsYmFjaywgcC5jYWxsYmFjayk7CgoJCS8vIFRyaWdnZXIgYW4gZXZlbnQgb24gdGhlIGdsb2JhbCBsaXN0ZW5lcgoJCWZ1bmN0aW9uIGVtaXQocywgdmFsdWUpIHsKCQkJaGVsbG8uZW1pdChzLCB2YWx1ZSk7CgkJfQoKCQlwcm9taXNlLnByb3h5LnRoZW4oZW1pdC5iaW5kKHRoaXMsICdhdXRoLmxvZ291dCBhdXRoJyksIGVtaXQuYmluZCh0aGlzLCAnZXJyb3InKSk7CgoJCS8vIE5ldHdvcmsKCQlwLm5hbWUgPSBwLm5hbWUgfHwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0X3NlcnZpY2U7CgkJcC5hdXRoUmVzcG9uc2UgPSB1dGlscy5zdG9yZShwLm5hbWUpOwoKCQlpZiAocC5uYW1lICYmICEocC5uYW1lIGluIF90aGlzLnNlcnZpY2VzKSkgewoKCQkJcHJvbWlzZS5yZWplY3QoZXJyb3IoJ2ludmFsaWRfbmV0d29yaycsICdUaGUgbmV0d29yayB3YXMgdW5yZWNvZ25pemVkJykpOwoKCQl9CgkJZWxzZSBpZiAocC5uYW1lICYmIHAuYXV0aFJlc3BvbnNlKSB7CgoJCQkvLyBEZWZpbmUgdGhlIGNhbGxiYWNrCgkJCXZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKG9wdHMpIHsKCgkJCQkvLyBSZW1vdmUgZnJvbSB0aGUgc3RvcmUKCQkJCXV0aWxzLnN0b3JlKHAubmFtZSwgbnVsbCk7CgoJCQkJLy8gRW1pdCBldmVudHMgYnkgZGVmYXVsdAoJCQkJcHJvbWlzZS5mdWxmaWxsKGhlbGxvLnV0aWxzLm1lcmdlKHtuZXR3b3JrOnAubmFtZX0sIG9wdHMgfHwge30pKTsKCQkJfTsKCgkJCS8vIFJ1biBhbiBhc3luYyBvcGVyYXRpb24gdG8gcmVtb3ZlIHRoZSB1c2VycyBzZXNzaW9uCgkJCXZhciBfb3B0cyA9IHt9OwoJCQlpZiAocC5vcHRpb25zLmZvcmNlKSB7CgkJCQl2YXIgbG9nb3V0ID0gX3RoaXMuc2VydmljZXNbcC5uYW1lXS5sb2dvdXQ7CgkJCQlpZiAobG9nb3V0KSB7CgkJCQkJLy8gQ29udmVydCBsb2dvdXQgdG8gVVJMIHN0cmluZywKCQkJCQkvLyBJZiBubyBzdHJpbmcgaXMgcmV0dXJuZWQsIHRoZW4gdGhpcyBmdW5jdGlvbiB3aWxsIGhhbmRsZSB0aGUgbG9nb3V0IGFzeW5jIHN0eWxlCgkJCQkJaWYgKHR5cGVvZiAobG9nb3V0KSA9PT0gJ2Z1bmN0aW9uJykgewoJCQkJCQlsb2dvdXQgPSBsb2dvdXQoY2FsbGJhY2ssIHApOwoJCQkJCX0KCgkJCQkJLy8gSWYgbG9nb3V0IGlzIGEgc3RyaW5nIHRoZW4gYXNzdW1lIFVSTCBhbmQgb3BlbiBpbiBpZnJhbWUuCgkJCQkJaWYgKHR5cGVvZiAobG9nb3V0KSA9PT0gJ3N0cmluZycpIHsKCQkJCQkJdXRpbHMuaWZyYW1lKGxvZ291dCk7CgkJCQkJCV9vcHRzLmZvcmNlID0gbnVsbDsKCQkJCQkJX29wdHMubWVzc2FnZSA9ICdMb2dvdXQgc3VjY2VzcyBvbiBwcm92aWRlcnMgc2l0ZSB3YXMgaW5kZXRlcm1pbmF0ZSc7CgkJCQkJfQoJCQkJCWVsc2UgaWYgKGxvZ291dCA9PT0gdW5kZWZpbmVkKSB7CgkJCQkJCS8vIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGhhbmRsZSB0aGUgcmVzcG9uc2UuCgkJCQkJCXJldHVybiBwcm9taXNlLnByb3h5OwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gUmVtb3ZlIGxvY2FsIGNyZWRlbnRpYWxzCgkJCWNhbGxiYWNrKF9vcHRzKTsKCQl9CgkJZWxzZSB7CgkJCXByb21pc2UucmVqZWN0KGVycm9yKCdpbnZhbGlkX3Nlc3Npb24nLCAnVGhlcmUgd2FzIG5vIHNlc3Npb24gdG8gcmVtb3ZlJykpOwoJCX0KCgkJcmV0dXJuIHByb21pc2UucHJveHk7Cgl9LAoKCS8vIFJldHVybnMgYWxsIHRoZSBzZXNzaW9ucyB0aGF0IGFyZSBzdWJzY3JpYmVkIHRvbwoJLy8gQHBhcmFtIHN0cmluZyBvcHRpb25hbCwgbmFtZSBvZiB0aGUgc2VydmljZSB0byBnZXQgaW5mb3JtYXRpb24gYWJvdXQuCglnZXRBdXRoUmVzcG9uc2U6IGZ1bmN0aW9uKHNlcnZpY2UpIHsKCgkJLy8gSWYgdGhlIHNlcnZpY2UgZG9lc24ndCBleGlzdAoJCXNlcnZpY2UgPSBzZXJ2aWNlIHx8IHRoaXMuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlOwoKCQlpZiAoIXNlcnZpY2UgfHwgIShzZXJ2aWNlIGluIHRoaXMuc2VydmljZXMpKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCgkJcmV0dXJuIHRoaXMudXRpbHMuc3RvcmUoc2VydmljZSkgfHwgbnVsbDsKCX0sCgoJLy8gRXZlbnRzOiBwbGFjZWhvbGRlciBmb3IgdGhlIGV2ZW50cwoJZXZlbnRzOiB7fQp9KTsKCi8vIENvcmUgdXRpbGl0aWVzCmhlbGxvLnV0aWxzLmV4dGVuZChoZWxsby51dGlscywgewoKCS8vIEVycm9yCgllcnJvcjogZnVuY3Rpb24oY29kZSwgbWVzc2FnZSkgewoJCXJldHVybiB7CgkJCWVycm9yOiB7CgkJCQljb2RlOiBjb2RlLAoJCQkJbWVzc2FnZTogbWVzc2FnZQoJCQl9CgkJfTsKCX0sCgoJLy8gQXBwZW5kIHRoZSBxdWVyeXN0cmluZyB0byBhIHVybAoJLy8gQHBhcmFtIHN0cmluZyB1cmwKCS8vIEBwYXJhbSBvYmplY3QgcGFyYW1ldGVycwoJcXM6IGZ1bmN0aW9uKHVybCwgcGFyYW1zLCBmb3JtYXRGdW5jdGlvbikgewoKCQlpZiAocGFyYW1zKSB7CgoJCQkvLyBTZXQgZGVmYXVsdCBmb3JtYXR0aW5nIGZ1bmN0aW9uCgkJCWZvcm1hdEZ1bmN0aW9uID0gZm9ybWF0RnVuY3Rpb24gfHwgZW5jb2RlVVJJQ29tcG9uZW50OwoKCQkJLy8gT3ZlcnJpZGUgdGhlIGl0ZW1zIGluIHRoZSBVUkwgd2hpY2ggYWxyZWFkeSBleGlzdAoJCQlmb3IgKHZhciB4IGluIHBhcmFtcykgewoJCQkJdmFyIHN0ciA9ICcoW1xcP1xcJl0pJyArIHggKyAnPVteXFwmXSonOwoJCQkJdmFyIHJlZyA9IG5ldyBSZWdFeHAoc3RyKTsKCQkJCWlmICh1cmwubWF0Y2gocmVnKSkgewoJCQkJCXVybCA9IHVybC5yZXBsYWNlKHJlZywgJyQxJyArIHggKyAnPScgKyBmb3JtYXRGdW5jdGlvbihwYXJhbXNbeF0pKTsKCQkJCQlkZWxldGUgcGFyYW1zW3hdOwoJCQkJfQoJCQl9CgkJfQoKCQlpZiAoIXRoaXMuaXNFbXB0eShwYXJhbXMpKSB7CgkJCXJldHVybiB1cmwgKyAodXJsLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nKSArIHRoaXMucGFyYW0ocGFyYW1zLCBmb3JtYXRGdW5jdGlvbik7CgkJfQoKCQlyZXR1cm4gdXJsOwoJfSwKCgkvLyBQYXJhbQoJLy8gRXhwbG9kZS9lbmNvZGUgdGhlIHBhcmFtZXRlcnMgb2YgYW4gVVJMIHN0cmluZy9vYmplY3QKCS8vIEBwYXJhbSBzdHJpbmcgcywgc3RyaW5nIHRvIGRlY29kZQoJcGFyYW06IGZ1bmN0aW9uKHMsIGZvcm1hdEZ1bmN0aW9uKSB7CgkJdmFyIGI7CgkJdmFyIGEgPSB7fTsKCQl2YXIgbTsKCgkJaWYgKHR5cGVvZiAocykgPT09ICdzdHJpbmcnKSB7CgoJCQlmb3JtYXRGdW5jdGlvbiA9IGZvcm1hdEZ1bmN0aW9uIHx8IGRlY29kZVVSSUNvbXBvbmVudDsKCgkJCW0gPSBzLnJlcGxhY2UoL15bXCNcP10vLCAnJykubWF0Y2goLyhbXj1cL1wmXSspPShbXlwmXSspL2cpOwoJCQlpZiAobSkgewoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBtLmxlbmd0aDsgaSsrKSB7CgkJCQkJYiA9IG1baV0ubWF0Y2goLyhbXj1dKyk9KC4qKS8pOwoJCQkJCWFbYlsxXV0gPSBmb3JtYXRGdW5jdGlvbihiWzJdKTsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIGE7CgkJfQoJCWVsc2UgewoKCQkJZm9ybWF0RnVuY3Rpb24gPSBmb3JtYXRGdW5jdGlvbiB8fCBlbmNvZGVVUklDb21wb25lbnQ7CgoJCQl2YXIgbyA9IHM7CgoJCQlhID0gW107CgoJCQlmb3IgKHZhciB4IGluIG8pIHtpZiAoby5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQkJaWYgKG8uaGFzT3duUHJvcGVydHkoeCkpIHsKCQkJCQlhLnB1c2goW3gsIG9beF0gPT09ICc/JyA/ICc/JyA6IGZvcm1hdEZ1bmN0aW9uKG9beF0pXS5qb2luKCc9JykpOwoJCQkJfQoJCQl9fQoKCQkJcmV0dXJuIGEuam9pbignJicpOwoJCX0KCX0sCgoJLy8gTG9jYWwgc3RvcmFnZSBmYWNhZGUKCXN0b3JlOiAoZnVuY3Rpb24oKSB7CgoJCXZhciBhID0gWydsb2NhbFN0b3JhZ2UnLCAnc2Vzc2lvblN0b3JhZ2UnXTsKCQl2YXIgaSA9IC0xOwoJCXZhciBwcmVmaXggPSAndGVzdCc7CgoJCS8vIFNldCBMb2NhbFN0b3JhZ2UKCQl2YXIgbG9jYWxTdG9yYWdlOwoKCQl3aGlsZSAoYVsrK2ldKSB7CgkJCXRyeSB7CgkJCQkvLyBJbiBDaHJvbWUgd2l0aCBjb29raWVzIGJsb2NrZWQsIGNhbGxpbmcgbG9jYWxTdG9yYWdlIHRocm93cyBhbiBlcnJvcgoJCQkJbG9jYWxTdG9yYWdlID0gd2luZG93W2FbaV1dOwoJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0ocHJlZml4ICsgaSwgaSk7CgkJCQlsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwcmVmaXggKyBpKTsKCQkJCWJyZWFrOwoJCQl9CgkJCWNhdGNoIChlKSB7CgkJCQlsb2NhbFN0b3JhZ2UgPSBudWxsOwoJCQl9CgkJfQoKCQlpZiAoIWxvY2FsU3RvcmFnZSkgewoKCQkJdmFyIGNhY2hlID0gbnVsbDsKCgkJCWxvY2FsU3RvcmFnZSA9IHsKCQkJCWdldEl0ZW06IGZ1bmN0aW9uKHByb3ApIHsKCQkJCQlwcm9wID0gcHJvcCArICc9JzsKCQkJCQl2YXIgbSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpOwoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKykgewoJCQkJCQl2YXIgX20gPSBtW2ldLnJlcGxhY2UoLyheXHMrfFxzKyQpLywgJycpOwoJCQkJCQlpZiAoX20gJiYgX20uaW5kZXhPZihwcm9wKSA9PT0gMCkgewoJCQkJCQkJcmV0dXJuIF9tLnN1YnN0cihwcm9wLmxlbmd0aCk7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCXJldHVybiBjYWNoZTsKCQkJCX0sCgoJCQkJc2V0SXRlbTogZnVuY3Rpb24ocHJvcCwgdmFsdWUpIHsKCQkJCQljYWNoZSA9IHZhbHVlOwoJCQkJCWRvY3VtZW50LmNvb2tpZSA9IHByb3AgKyAnPScgKyB2YWx1ZTsKCQkJCX0KCQkJfTsKCgkJCS8vIEZpbGwgdGhlIGNhY2hlIHVwCgkJCWNhY2hlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hlbGxvJyk7CgkJfQoKCQlmdW5jdGlvbiBnZXQoKSB7CgkJCXZhciBqc29uID0ge307CgkJCXRyeSB7CgkJCQlqc29uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGVsbG8nKSkgfHwge307CgkJCX0KCQkJY2F0Y2ggKGUpIHt9CgoJCQlyZXR1cm4ganNvbjsKCQl9CgoJCWZ1bmN0aW9uIHNldChqc29uKSB7CgkJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCdoZWxsbycsIEpTT04uc3RyaW5naWZ5KGpzb24pKTsKCQl9CgoJCS8vIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnQgbG9jYWwgc3RvcmFnZQoJCXJldHVybiBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZGF5cykgewoKCQkJLy8gTG9jYWwgc3RvcmFnZQoJCQl2YXIganNvbiA9IGdldCgpOwoKCQkJaWYgKG5hbWUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgewoJCQkJcmV0dXJuIGpzb25bbmFtZV0gfHwgbnVsbDsKCQkJfQoJCQllbHNlIGlmIChuYW1lICYmIHZhbHVlID09PSBudWxsKSB7CgkJCQl0cnkgewoJCQkJCWRlbGV0ZSBqc29uW25hbWVdOwoJCQkJfQoJCQkJY2F0Y2ggKGUpIHsKCQkJCQlqc29uW25hbWVdID0gbnVsbDsKCQkJCX0KCQkJfQoJCQllbHNlIGlmIChuYW1lKSB7CgkJCQlqc29uW25hbWVdID0gdmFsdWU7CgkJCX0KCQkJZWxzZSB7CgkJCQlyZXR1cm4ganNvbjsKCQkJfQoKCQkJc2V0KGpzb24pOwoKCQkJcmV0dXJuIGpzb24gfHwgbnVsbDsKCQl9OwoKCX0pKCksCgoJLy8gQ3JlYXRlIGFuZCBBcHBlbmQgbmV3IERPTSBlbGVtZW50cwoJLy8gQHBhcmFtIG5vZGUgc3RyaW5nCgkvLyBAcGFyYW0gYXR0ciBvYmplY3QgbGl0ZXJhbAoJLy8gQHBhcmFtIGRvbS9zdHJpbmcKCWFwcGVuZDogZnVuY3Rpb24obm9kZSwgYXR0ciwgdGFyZ2V0KSB7CgoJCXZhciBuID0gdHlwZW9mIChub2RlKSA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGUpIDogbm9kZTsKCgkJaWYgKHR5cGVvZiAoYXR0cikgPT09ICdvYmplY3QnKSB7CgkJCWlmICgndGFnTmFtZScgaW4gYXR0cikgewoJCQkJdGFyZ2V0ID0gYXR0cjsKCQkJfQoJCQllbHNlIHsKCQkJCWZvciAodmFyIHggaW4gYXR0cikge2lmIChhdHRyLmhhc093blByb3BlcnR5KHgpKSB7CgkJCQkJaWYgKHR5cGVvZiAoYXR0clt4XSkgPT09ICdvYmplY3QnKSB7CgkJCQkJCWZvciAodmFyIHkgaW4gYXR0clt4XSkge2lmIChhdHRyW3hdLmhhc093blByb3BlcnR5KHkpKSB7CgkJCQkJCQluW3hdW3ldID0gYXR0clt4XVt5XTsKCQkJCQkJfX0KCQkJCQl9CgkJCQkJZWxzZSBpZiAoeCA9PT0gJ2h0bWwnKSB7CgkJCQkJCW4uaW5uZXJIVE1MID0gYXR0clt4XTsKCQkJCQl9CgoJCQkJCS8vIElFIGRvZXNuJ3QgbGlrZSB1cyBzZXR0aW5nIG1ldGhvZHMgd2l0aCBzZXRBdHRyaWJ1dGUKCQkJCQllbHNlIGlmICghL15vbi8udGVzdCh4KSkgewoJCQkJCQluLnNldEF0dHJpYnV0ZSh4LCBhdHRyW3hdKTsKCQkJCQl9CgkJCQkJZWxzZSB7CgkJCQkJCW5beF0gPSBhdHRyW3hdOwoJCQkJCX0KCQkJCX19CgkJCX0KCQl9CgoJCWlmICh0YXJnZXQgPT09ICdib2R5JykgewoJCQkoZnVuY3Rpb24gc2VsZigpIHsKCQkJCWlmIChkb2N1bWVudC5ib2R5KSB7CgkJCQkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCXNldFRpbWVvdXQoc2VsZiwgMTYpOwoJCQkJfQoJCQl9KSgpOwoJCX0KCQllbHNlIGlmICh0eXBlb2YgKHRhcmdldCkgPT09ICdvYmplY3QnKSB7CgkJCXRhcmdldC5hcHBlbmRDaGlsZChuKTsKCQl9CgkJZWxzZSBpZiAodHlwZW9mICh0YXJnZXQpID09PSAnc3RyaW5nJykgewoJCQlkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YXJnZXQpWzBdLmFwcGVuZENoaWxkKG4pOwoJCX0KCgkJcmV0dXJuIG47Cgl9LAoKCS8vIEFuIGVhc3kgd2F5IHRvIGNyZWF0ZSBhIGhpZGRlbiBpZnJhbWUKCS8vIEBwYXJhbSBzdHJpbmcgc3JjCglpZnJhbWU6IGZ1bmN0aW9uKHNyYykgewoJCXRoaXMuYXBwZW5kKCdpZnJhbWUnLCB7c3JjOiBzcmMsIHN0eWxlOiB7cG9zaXRpb246J2Fic29sdXRlJywgbGVmdDogJy0xMDAwcHgnLCBib3R0b206IDAsIGhlaWdodDogJzFweCcsIHdpZHRoOiAnMXB4J319LCAnYm9keScpOwoJfSwKCgkvLyBSZWN1cnNpdmUgbWVyZ2UgdHdvIG9iamVjdHMgaW50byBvbmUsIHNlY29uZCBwYXJhbWV0ZXIgb3ZlcmlkZXMgdGhlIGZpcnN0CgkvLyBAcGFyYW0gYSBhcnJheQoJbWVyZ2U6IGZ1bmN0aW9uKC8qIEFyZ3M6IGEsIGIsIGMsIC4uIG4gKi8pIHsKCQl2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CgkJYXJncy51bnNoaWZ0KHt9KTsKCQlyZXR1cm4gdGhpcy5leHRlbmQuYXBwbHkobnVsbCwgYXJncyk7Cgl9LAoKCS8vIE1ha2VzIGl0IGVhc2llciB0byBhc3NpZ24gcGFyYW1ldGVycywgd2hlcmUgc29tZSBhcmUgb3B0aW9uYWwKCS8vIEBwYXJhbSBvIG9iamVjdAoJLy8gQHBhcmFtIGEgYXJndW1lbnRzCglhcmdzOiBmdW5jdGlvbihvLCBhcmdzKSB7CgoJCXZhciBwID0ge307CgkJdmFyIGkgPSAwOwoJCXZhciB0ID0gbnVsbDsKCQl2YXIgeCA9IG51bGw7CgoJCS8vICd4JyBpcyB0aGUgZmlyc3Qga2V5IGluIHRoZSBsaXN0IG9mIG9iamVjdCBwYXJhbWV0ZXJzCgkJZm9yICh4IGluIG8pIHtpZiAoby5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQlicmVhazsKCQl9fQoKCQkvLyBQYXNzaW5nIGluIGhhc2ggb2JqZWN0IG9mIGFyZ3VtZW50cz8KCQkvLyBXaGVyZSB0aGUgZmlyc3QgYXJndW1lbnQgY2FuJ3QgYmUgYW4gb2JqZWN0CgkJaWYgKChhcmdzLmxlbmd0aCA9PT0gMSkgJiYgKHR5cGVvZiAoYXJnc1swXSkgPT09ICdvYmplY3QnKSAmJiBvW3hdICE9ICdvIScpIHsKCgkJCS8vIENvdWxkIHRoaXMgb2JqZWN0IHN0aWxsIGJlbG9uZyB0byBhIHByb3BlcnR5PwoJCQkvLyBDaGVjayB0aGUgb2JqZWN0IGtleXMgaWYgdGhleSBtYXRjaCBhbnkgb2YgdGhlIHByb3BlcnR5IGtleXMKCQkJZm9yICh4IGluIGFyZ3NbMF0pIHtpZiAoby5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQkJLy8gRG9lcyB0aGlzIGtleSBleGlzdCBpbiB0aGUgcHJvcGVydHkgbGlzdD8KCQkJCWlmICh4IGluIG8pIHsKCQkJCQkvLyBZZXMgdGhpcyBrZXkgZG9lcyBleGlzdCBzbyBpdHMgbW9zdCBsaWtlbHkgdGhpcyBmdW5jdGlvbiBoYXMgYmVlbiBpbnZva2VkIHdpdGggYW4gb2JqZWN0IHBhcmFtZXRlcgoJCQkJCS8vIFJldHVybiBmaXJzdCBhcmd1bWVudCBhcyB0aGUgaGFzaCBvZiBhbGwgYXJndW1lbnRzCgkJCQkJcmV0dXJuIGFyZ3NbMF07CgkJCQl9CgkJCX19CgkJfQoKCQkvLyBFbHNlIGxvb3AgdGhyb3VnaCBhbmQgYWNjb3VudCBmb3IgdGhlIG1pc3Npbmcgb25lcy4KCQlmb3IgKHggaW4gbykge2lmIChvLmhhc093blByb3BlcnR5KHgpKSB7CgoJCQl0ID0gdHlwZW9mIChhcmdzW2ldKTsKCgkJCWlmICgodHlwZW9mIChvW3hdKSA9PT0gJ2Z1bmN0aW9uJyAmJiBvW3hdLnRlc3QoYXJnc1tpXSkpIHx8ICh0eXBlb2YgKG9beF0pID09PSAnc3RyaW5nJyAmJiAoCgkJCShvW3hdLmluZGV4T2YoJ3MnKSA+IC0xICYmIHQgPT09ICdzdHJpbmcnKSB8fAoJCQkob1t4XS5pbmRleE9mKCdvJykgPiAtMSAmJiB0ID09PSAnb2JqZWN0JykgfHwKCQkJKG9beF0uaW5kZXhPZignaScpID4gLTEgJiYgdCA9PT0gJ251bWJlcicpIHx8CgkJCShvW3hdLmluZGV4T2YoJ2EnKSA+IC0xICYmIHQgPT09ICdvYmplY3QnKSB8fAoJCQkob1t4XS5pbmRleE9mKCdmJykgPiAtMSAmJiB0ID09PSAnZnVuY3Rpb24nKQoJCQkpKQoJCQkpIHsKCQkJCXBbeF0gPSBhcmdzW2krK107CgkJCX0KCgkJCWVsc2UgaWYgKHR5cGVvZiAob1t4XSkgPT09ICdzdHJpbmcnICYmIG9beF0uaW5kZXhPZignIScpID4gLTEpIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX19CgoJCXJldHVybiBwOwoJfSwKCgkvLyBSZXR1cm5zIGEgVVJMIGluc3RhbmNlCgl1cmw6IGZ1bmN0aW9uKHBhdGgpIHsKCgkJLy8gSWYgdGhlIHBhdGggaXMgZW1wdHkKCQlpZiAoIXBhdGgpIHsKCQkJcmV0dXJuIHdpbmRvdy5sb2NhdGlvbjsKCQl9CgoJCS8vIENocm9tZSBhbmQgRmlyZUZveCBzdXBwb3J0IG5ldyBVUkwoKSB0byBleHRyYWN0IFVSTCBvYmplY3RzCgkJZWxzZSBpZiAod2luZG93LlVSTCAmJiBVUkwgaW5zdGFuY2VvZiBGdW5jdGlvbiAmJiBVUkwubGVuZ3RoICE9PSAwKSB7CgkJCXJldHVybiBuZXcgVVJMKHBhdGgsIHdpbmRvdy5sb2NhdGlvbik7CgkJfQoKCQkvLyBVZ2x5IHNoaW0sIGl0IHdvcmtzIQoJCWVsc2UgewoJCQl2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCQkJYS5ocmVmID0gcGF0aDsKCQkJcmV0dXJuIGEuY2xvbmVOb2RlKGZhbHNlKTsKCQl9Cgl9LAoKCWRpZmY6IGZ1bmN0aW9uKGEsIGIpIHsKCQlyZXR1cm4gYi5maWx0ZXIoZnVuY3Rpb24oaXRlbSkgewoJCQlyZXR1cm4gYS5pbmRleE9mKGl0ZW0pID09PSAtMTsKCQl9KTsKCX0sCgoJLy8gR2V0IHRoZSBkaWZmZXJlbnQgaGFzaCBvZiBwcm9wZXJ0aWVzIHVuaXF1ZSB0byBgYWAsIGFuZCBub3QgaW4gYGJgCglkaWZmS2V5OiBmdW5jdGlvbihhLCBiKSB7CgkJaWYgKGEgfHwgIWIpIHsKCQkJdmFyIHIgPSB7fTsKCQkJZm9yICh2YXIgeCBpbiBhKSB7CgkJCQkvLyBEb2VzIHRoZSBwcm9wZXJ0eSBub3QgZXhpc3Q/CgkJCQlpZiAoISh4IGluIGIpKSB7CgkJCQkJclt4XSA9IGFbeF07CgkJCQl9CgkJCX0KCgkJCXJldHVybiByOwoJCX0KCgkJcmV0dXJuIGE7Cgl9LAoKCS8vIFVuaXF1ZQoJLy8gUmVtb3ZlIGR1cGxpY2F0ZSBhbmQgbnVsbCB2YWx1ZXMgZnJvbSBhbiBhcnJheQoJLy8gQHBhcmFtIGEgYXJyYXkKCXVuaXF1ZTogZnVuY3Rpb24oYSkgewoJCWlmICghQXJyYXkuaXNBcnJheShhKSkgeyByZXR1cm4gW107IH0KCgkJcmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCS8vIElzIHRoaXMgdGhlIGZpcnN0IGxvY2F0aW9uIG9mIGl0ZW0KCQkJcmV0dXJuIGEuaW5kZXhPZihpdGVtKSA9PT0gaW5kZXg7CgkJfSk7Cgl9LAoKCWlzRW1wdHk6IGZ1bmN0aW9uKG9iaikgewoKCQkvLyBTY2FsYXIKCQlpZiAoIW9iaikKCQkJcmV0dXJuIHRydWU7CgoJCS8vIEFycmF5CgkJaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewoJCQlyZXR1cm4gIW9iai5sZW5ndGg7CgkJfQoJCWVsc2UgaWYgKHR5cGVvZiAob2JqKSA9PT0gJ29iamVjdCcpIHsKCQkJLy8gT2JqZWN0CgkJCWZvciAodmFyIGtleSBpbiBvYmopIHsKCQkJCWlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIHRydWU7Cgl9LAoKCS8vanNjczpkaXNhYmxlCgoJLyohCgkgKiogIFRoZW5hYmxlIC0tIEVtYmVkZGFibGUgTWluaW11bSBTdHJpY3RseS1Db21wbGlhbnQgUHJvbWlzZXMvQSsgMS4xLjEgVGhlbmFibGUKCSAqKiAgQ29weXJpZ2h0IChjKSAyMDEzLTIwMTQgUmFsZiBTLiBFbmdlbHNjaGFsbCA8aHR0cDovL2VuZ2Vsc2NoYWxsLmNvbT4KCSAqKiAgTGljZW5zZWQgdW5kZXIgVGhlIE1JVCBMaWNlbnNlIDxodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUPgoJICoqICBTb3VyY2UtQ29kZSBkaXN0cmlidXRlZCBvbiA8aHR0cDovL2dpdGh1Yi5jb20vcnNlL3RoZW5hYmxlPgoJICovCglQcm9taXNlOiAoZnVuY3Rpb24oKXsKCQkvKiAgcHJvbWlzZSBzdGF0ZXMgW1Byb21pc2VzL0ErIDIuMV0gICovCgkJdmFyIFNUQVRFX1BFTkRJTkcgICA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMS4xXSAgKi8KCQl2YXIgU1RBVEVfRlVMRklMTEVEID0gMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4xLjJdICAqLwoJCXZhciBTVEFURV9SRUpFQ1RFRCAgPSAyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjEuM10gICovCgoJCS8qICBwcm9taXNlIG9iamVjdCBjb25zdHJ1Y3RvciAgKi8KCQl2YXIgYXBpID0gZnVuY3Rpb24gKGV4ZWN1dG9yKSB7CgkJCS8qICBvcHRpb25hbGx5IHN1cHBvcnQgbm9uLWNvbnN0cnVjdG9yL3BsYWluLWZ1bmN0aW9uIGNhbGwgICovCgkJCWlmICghKHRoaXMgaW5zdGFuY2VvZiBhcGkpKQoJCQkJcmV0dXJuIG5ldyBhcGkoZXhlY3V0b3IpOwoKCQkJLyogIGluaXRpYWxpemUgb2JqZWN0ICAqLwoJCQl0aGlzLmlkICAgICAgICAgICA9ICJUaGVuYWJsZS8xLjAuNiI7CgkJCXRoaXMuc3RhdGUgICAgICAgID0gU1RBVEVfUEVORElORzsgLyogIGluaXRpYWwgc3RhdGUgICovCgkJCXRoaXMuZnVsZmlsbFZhbHVlID0gdW5kZWZpbmVkOyAgICAgLyogIGluaXRpYWwgdmFsdWUgICovICAgICAvKiAgW1Byb21pc2VzL0ErIDEuMywgMi4xLjIuMl0gICovCgkJCXRoaXMucmVqZWN0UmVhc29uID0gdW5kZWZpbmVkOyAgICAgLyogIGluaXRpYWwgcmVhc29uICovICAgICAvKiAgW1Byb21pc2VzL0ErIDEuNSwgMi4xLjMuMl0gICovCgkJCXRoaXMub25GdWxmaWxsZWQgID0gW107ICAgICAgICAgICAgLyogIGluaXRpYWwgaGFuZGxlcnMgICovCgkJCXRoaXMub25SZWplY3RlZCAgID0gW107ICAgICAgICAgICAgLyogIGluaXRpYWwgaGFuZGxlcnMgICovCgoJCQkvKiAgcHJvdmlkZSBvcHRpb25hbCBpbmZvcm1hdGlvbi1oaWRpbmcgcHJveHkgICovCgkJCXRoaXMucHJveHkgPSB7CgkJCQl0aGVuOiB0aGlzLnRoZW4uYmluZCh0aGlzKQoJCQl9OwoKCQkJLyogIHN1cHBvcnQgb3B0aW9uYWwgZXhlY3V0b3IgZnVuY3Rpb24gICovCgkJCWlmICh0eXBlb2YgZXhlY3V0b3IgPT09ICJmdW5jdGlvbiIpCgkJCQlleGVjdXRvci5jYWxsKHRoaXMsIHRoaXMuZnVsZmlsbC5iaW5kKHRoaXMpLCB0aGlzLnJlamVjdC5iaW5kKHRoaXMpKTsKCQl9OwoKCQkvKiAgcHJvbWlzZSBBUEkgbWV0aG9kcyAgKi8KCQlhcGkucHJvdG90eXBlID0gewoJCQkvKiAgcHJvbWlzZSByZXNvbHZpbmcgbWV0aG9kcyAgKi8KCQkJZnVsZmlsbDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBkZWxpdmVyKHRoaXMsIFNUQVRFX0ZVTEZJTExFRCwgImZ1bGZpbGxWYWx1ZSIsIHZhbHVlKTsgfSwKCQkJcmVqZWN0OiAgZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBkZWxpdmVyKHRoaXMsIFNUQVRFX1JFSkVDVEVELCAgInJlamVjdFJlYXNvbiIsIHZhbHVlKTsgfSwKCgkJCS8qICAiVGhlIHRoZW4gTWV0aG9kIiBbUHJvbWlzZXMvQSsgMS4xLCAxLjIsIDIuMl0gICovCgkJCXRoZW46IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkgewoJCQkJdmFyIGN1cnIgPSB0aGlzOwoJCQkJdmFyIG5leHQgPSBuZXcgYXBpKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuN10gICovCgkJCQljdXJyLm9uRnVsZmlsbGVkLnB1c2goCgkJCQkJcmVzb2x2ZXIob25GdWxmaWxsZWQsIG5leHQsICJmdWxmaWxsIikpOyAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMi4yLzIuMi42XSAgKi8KCQkJCWN1cnIub25SZWplY3RlZC5wdXNoKAoJCQkJCXJlc29sdmVyKG9uUmVqZWN0ZWQsICBuZXh0LCAicmVqZWN0IiApKTsgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuMy8yLjIuNl0gICovCgkJCQlleGVjdXRlKGN1cnIpOwoJCQkJcmV0dXJuIG5leHQucHJveHk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuNywgMy4zXSAgKi8KCQkJfQoJCX07CgoJCS8qICBkZWxpdmVyIGFuIGFjdGlvbiAgKi8KCQl2YXIgZGVsaXZlciA9IGZ1bmN0aW9uIChjdXJyLCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHsKCQkJaWYgKGN1cnIuc3RhdGUgPT09IFNUQVRFX1BFTkRJTkcpIHsKCQkJCWN1cnIuc3RhdGUgPSBzdGF0ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4xLjIuMSwgMi4xLjMuMV0gICovCgkJCQljdXJyW25hbWVdID0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMS4yLjIsIDIuMS4zLjJdICAqLwoJCQkJZXhlY3V0ZShjdXJyKTsKCQkJfQoJCQlyZXR1cm4gY3VycjsKCQl9OwoKCQkvKiAgZXhlY3V0ZSBhbGwgaGFuZGxlcnMgICovCgkJdmFyIGV4ZWN1dGUgPSBmdW5jdGlvbiAoY3VycikgewoJCQlpZiAoY3Vyci5zdGF0ZSA9PT0gU1RBVEVfRlVMRklMTEVEKQoJCQkJZXhlY3V0ZV9oYW5kbGVycyhjdXJyLCAib25GdWxmaWxsZWQiLCBjdXJyLmZ1bGZpbGxWYWx1ZSk7CgkJCWVsc2UgaWYgKGN1cnIuc3RhdGUgPT09IFNUQVRFX1JFSkVDVEVEKQoJCQkJZXhlY3V0ZV9oYW5kbGVycyhjdXJyLCAib25SZWplY3RlZCIsICBjdXJyLnJlamVjdFJlYXNvbik7CgkJfTsKCgkJLyogIGV4ZWN1dGUgcGFydGljdWxhciBzZXQgb2YgaGFuZGxlcnMgICovCgkJdmFyIGV4ZWN1dGVfaGFuZGxlcnMgPSBmdW5jdGlvbiAoY3VyciwgbmFtZSwgdmFsdWUpIHsKCQkJLyogZ2xvYmFsIHByb2Nlc3M6IHRydWUgKi8KCQkJLyogZ2xvYmFsIHNldEltbWVkaWF0ZTogdHJ1ZSAqLwoJCQkvKiBnbG9iYWwgc2V0VGltZW91dDogdHJ1ZSAqLwoKCQkJLyogIHNob3J0LWNpcmN1aXQgcHJvY2Vzc2luZyAgKi8KCQkJaWYgKGN1cnJbbmFtZV0ubGVuZ3RoID09PSAwKQoJCQkJcmV0dXJuOwoKCQkJLyogIGl0ZXJhdGUgb3ZlciBhbGwgaGFuZGxlcnMsIGV4YWN0bHkgb25jZSAgKi8KCQkJdmFyIGhhbmRsZXJzID0gY3VycltuYW1lXTsKCQkJY3VycltuYW1lXSA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjIuMywgMi4yLjMuM10gICovCgkJCXZhciBmdW5jID0gZnVuY3Rpb24gKCkgewoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVycy5sZW5ndGg7IGkrKykKCQkJCQloYW5kbGVyc1tpXSh2YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjVdICAqLwoJCQl9OwoKCQkJLyogIGV4ZWN1dGUgcHJvY2VkdXJlIGFzeW5jaHJvbm91c2x5ICAqLyAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjQsIDMuMV0gICovCgkJCWlmICh0eXBlb2YgcHJvY2VzcyA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIHByb2Nlc3MubmV4dFRpY2sgPT09ICJmdW5jdGlvbiIpCgkJCQlwcm9jZXNzLm5leHRUaWNrKGZ1bmMpOwoJCQllbHNlIGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAiZnVuY3Rpb24iKQoJCQkJc2V0SW1tZWRpYXRlKGZ1bmMpOwoJCQllbHNlCgkJCQlzZXRUaW1lb3V0KGZ1bmMsIDApOwoJCX07CgoJCS8qICBnZW5lcmF0ZSBhIHJlc29sdmVyIGZ1bmN0aW9uICAqLwoJCXZhciByZXNvbHZlciA9IGZ1bmN0aW9uIChjYiwgbmV4dCwgbWV0aG9kKSB7CgkJCXJldHVybiBmdW5jdGlvbiAodmFsdWUpIHsKCQkJCWlmICh0eXBlb2YgY2IgIT09ICJmdW5jdGlvbiIpICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjEsIDIuMi43LjMsIDIuMi43LjRdICAqLwoJCQkJCW5leHRbbWV0aG9kXS5jYWxsKG5leHQsIHZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuNy4zLCAyLjIuNy40XSAgKi8KCQkJCWVsc2UgewoJCQkJCXZhciByZXN1bHQ7CgkJCQkJdHJ5IHsgcmVzdWx0ID0gY2IodmFsdWUpOyB9ICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMi4yLjEsIDIuMi4zLjEsIDIuMi41LCAzLjJdICAqLwoJCQkJCWNhdGNoIChlKSB7CgkJCQkJCW5leHQucmVqZWN0KGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMi43LjJdICAqLwoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJCXJlc29sdmUobmV4dCwgcmVzdWx0KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuNy4xXSAgKi8KCQkJCX0KCQkJfTsKCQl9OwoKCQkvKiAgIlByb21pc2UgUmVzb2x1dGlvbiBQcm9jZWR1cmUiICAqLyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zXSAgKi8KCQl2YXIgcmVzb2x2ZSA9IGZ1bmN0aW9uIChwcm9taXNlLCB4KSB7CgkJCS8qICBzYW5pdHkgY2hlY2sgYXJndW1lbnRzICAqLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4xXSAgKi8KCQkJaWYgKHByb21pc2UgPT09IHggfHwgcHJvbWlzZS5wcm94eSA9PT0geCkgewoJCQkJcHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcigiY2Fubm90IHJlc29sdmUgcHJvbWlzZSB3aXRoIGl0c2VsZiIpKTsKCQkJCXJldHVybjsKCQkJfQoKCQkJLyogIHN1cmdpY2FsbHkgY2hlY2sgZm9yIGEgInRoZW4iIG1ldGhvZAoJCQkJKG1haW5seSB0byBqdXN0IGNhbGwgdGhlICJnZXR0ZXIiIG9mICJ0aGVuIiBvbmx5IG9uY2UpICAqLwoJCQl2YXIgdGhlbjsKCQkJaWYgKCh0eXBlb2YgeCA9PT0gIm9iamVjdCIgJiYgeCAhPT0gbnVsbCkgfHwgdHlwZW9mIHggPT09ICJmdW5jdGlvbiIpIHsKCQkJCXRyeSB7IHRoZW4gPSB4LnRoZW47IH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjMuMSwgMy41XSAgKi8KCQkJCWNhdGNoIChlKSB7CgkJCQkJcHJvbWlzZS5yZWplY3QoZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjJdICAqLwoJCQkJCXJldHVybjsKCQkJCX0KCQkJfQoKCQkJLyogIGhhbmRsZSBvd24gVGhlbmFibGVzICAgIFtQcm9taXNlcy9BKyAyLjMuMl0KCQkJCWFuZCBzaW1pbGFyICJ0aGVuYWJsZXMiIFtQcm9taXNlcy9BKyAyLjMuM10gICovCgkJCWlmICh0eXBlb2YgdGhlbiA9PT0gImZ1bmN0aW9uIikgewoJCQkJdmFyIHJlc29sdmVkID0gZmFsc2U7CgkJCQl0cnkgewoJCQkJCS8qICBjYWxsIHJldHJpZXZlZCAidGhlbiIgbWV0aG9kICovICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjMuMy4zXSAgKi8KCQkJCQl0aGVuLmNhbGwoeCwKCQkJCQkJLyogIHJlc29sdmVQcm9taXNlICAqLyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjMuMy4xXSAgKi8KCQkJCQkJZnVuY3Rpb24gKHkpIHsKCQkJCQkJCWlmIChyZXNvbHZlZCkgcmV0dXJuOyByZXNvbHZlZCA9IHRydWU7ICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjMuMy4zXSAgKi8KCQkJCQkJCWlmICh5ID09PSB4KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMy42XSAgKi8KCQkJCQkJCQlwcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCJjaXJjdWxhciB0aGVuYWJsZSBjaGFpbiIpKTsKCQkJCQkJCWVsc2UKCQkJCQkJCQlyZXNvbHZlKHByb21pc2UsIHkpOwoJCQkJCQl9LAoKCQkJCQkJLyogIHJlamVjdFByb21pc2UgICovICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjMuMy4yXSAgKi8KCQkJCQkJZnVuY3Rpb24gKHIpIHsKCQkJCQkJCWlmIChyZXNvbHZlZCkgcmV0dXJuOyByZXNvbHZlZCA9IHRydWU7ICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjMuMy4zXSAgKi8KCQkJCQkJCXByb21pc2UucmVqZWN0KHIpOwoJCQkJCQl9CgkJCQkJKTsKCQkJCX0KCQkJCWNhdGNoIChlKSB7CgkJCQkJaWYgKCFyZXNvbHZlZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuM10gICovCgkJCQkJCXByb21pc2UucmVqZWN0KGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuNF0gICovCgkJCQl9CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8qICBoYW5kbGUgb3RoZXIgdmFsdWVzICAqLwoJCQlwcm9taXNlLmZ1bGZpbGwoeCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjMuNCwgMi4zLjMuNF0gICovCgkJfTsKCgkJLyogIGV4cG9ydCBBUEkgICovCgkJcmV0dXJuIGFwaTsKCX0pKCksCgoJLy9qc2NzOmVuYWJsZQoKCS8vIEV2ZW50CgkvLyBBIGNvbnRydWN0b3Igc3VwZXJjbGFzcyBmb3IgYWRkaW5nIGV2ZW50IG1lbnRob2RzLCBvbiwgb2ZmLCBlbWl0LgoJRXZlbnQ6IGZ1bmN0aW9uKCkgewoKCQl2YXIgc2VwYXJhdG9yID0gL1tcc1wsXSsvOwoKCQkvLyBJZiB0aGlzIGRvZXNuJ3Qgc3VwcG9ydCBnZXRQcm90b3R5cGUgdGhlbiB3ZSBjYW4ndCBnZXQgcHJvdG90eXBlLmV2ZW50cyBvZiB0aGUgcGFyZW50CgkJLy8gU28gbGV0cyBnZXQgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZXZlbnRzLCBhbmQgYWRkIHRob3NlIHRvIGEgcGFyZW50IHByb3BlcnR5CgkJdGhpcy5wYXJlbnQgPSB7CgkJCWV2ZW50czogdGhpcy5ldmVudHMsCgkJCWZpbmRFdmVudHM6IHRoaXMuZmluZEV2ZW50cywKCQkJcGFyZW50OiB0aGlzLnBhcmVudCwKCQkJdXRpbHM6IHRoaXMudXRpbHMKCQl9OwoKCQl0aGlzLmV2ZW50cyA9IHt9OwoKCQkvLyBPbiwgc3Vic2NyaWJlIHRvIGV2ZW50cwoJCS8vIEBwYXJhbSBldnQgICBzdHJpbmcKCQkvLyBAcGFyYW0gY2FsbGJhY2sgIGZ1bmN0aW9uCgkJdGhpcy5vbiA9IGZ1bmN0aW9uKGV2dCwgY2FsbGJhY2spIHsKCgkJCWlmIChjYWxsYmFjayAmJiB0eXBlb2YgKGNhbGxiYWNrKSA9PT0gJ2Z1bmN0aW9uJykgewoJCQkJdmFyIGEgPSBldnQuc3BsaXQoc2VwYXJhdG9yKTsKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykgewoKCQkJCQkvLyBIYXMgdGhpcyBldmVudCBhbHJlYWR5IGJlZW4gZmlyZWQgb24gdGhpcyBpbnN0YW5jZT8KCQkJCQl0aGlzLmV2ZW50c1thW2ldXSA9IFtjYWxsYmFja10uY29uY2F0KHRoaXMuZXZlbnRzW2FbaV1dIHx8IFtdKTsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIHRoaXM7CgkJfTsKCgkJLy8gT2ZmLCB1bnN1YnNjcmliZSB0byBldmVudHMKCQkvLyBAcGFyYW0gZXZ0ICAgc3RyaW5nCgkJLy8gQHBhcmFtIGNhbGxiYWNrICBmdW5jdGlvbgoJCXRoaXMub2ZmID0gZnVuY3Rpb24oZXZ0LCBjYWxsYmFjaykgewoKCQkJdGhpcy5maW5kRXZlbnRzKGV2dCwgZnVuY3Rpb24obmFtZSwgaW5kZXgpIHsKCQkJCWlmICghY2FsbGJhY2sgfHwgdGhpcy5ldmVudHNbbmFtZV1baW5kZXhdID09PSBjYWxsYmFjaykgewoJCQkJCXRoaXMuZXZlbnRzW25hbWVdW2luZGV4XSA9IG51bGw7CgkJCQl9CgkJCX0pOwoKCQkJcmV0dXJuIHRoaXM7CgkJfTsKCgkJLy8gRW1pdAoJCS8vIFRyaWdnZXJzIGFueSBzdWJzY3JpYmVkIGV2ZW50cwoJCXRoaXMuZW1pdCA9IGZ1bmN0aW9uKGV2dCAvKiwgZGF0YSwgLi4uICovKSB7CgoJCQkvLyBHZXQgYXJndW1lbnRzIGFzIGFuIEFycmF5LCBrbm9jayBvZmYgdGhlIGZpcnN0IG9uZQoJCQl2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CgkJCWFyZ3MucHVzaChldnQpOwoKCQkJLy8gSGFuZGxlcgoJCQl2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKG5hbWUsIGluZGV4KSB7CgoJCQkJLy8gUmVwbGFjZSB0aGUgbGFzdCBwcm9wZXJ0eSB3aXRoIHRoZSBldmVudCBuYW1lCgkJCQlhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPSAobmFtZSA9PT0gJyonID8gZXZ0IDogbmFtZSk7CgoJCQkJLy8gVHJpZ2dlcgoJCQkJdGhpcy5ldmVudHNbbmFtZV1baW5kZXhdLmFwcGx5KHRoaXMsIGFyZ3MpOwoJCQl9OwoKCQkJLy8gRmluZCB0aGUgY2FsbGJhY2tzIHdoaWNoIG1hdGNoIHRoZSBjb25kaXRpb24gYW5kIGNhbGwKCQkJdmFyIF90aGlzID0gdGhpczsKCQkJd2hpbGUgKF90aGlzICYmIF90aGlzLmZpbmRFdmVudHMpIHsKCgkJCQkvLyBGaW5kIGV2ZW50cyB3aGljaCBtYXRjaAoJCQkJX3RoaXMuZmluZEV2ZW50cyhldnQgKyAnLConLCBoYW5kbGVyKTsKCQkJCV90aGlzID0gX3RoaXMucGFyZW50OwoJCQl9CgoJCQlyZXR1cm4gdGhpczsKCQl9OwoKCQkvLwoJCS8vIEVhc3kgZnVuY3Rpb25zCgkJdGhpcy5lbWl0QWZ0ZXIgPSBmdW5jdGlvbigpIHsKCQkJdmFyIF90aGlzID0gdGhpczsKCQkJdmFyIGFyZ3MgPSBhcmd1bWVudHM7CgkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQlfdGhpcy5lbWl0LmFwcGx5KF90aGlzLCBhcmdzKTsKCQkJfSwgMCk7CgoJCQlyZXR1cm4gdGhpczsKCQl9OwoKCQl0aGlzLmZpbmRFdmVudHMgPSBmdW5jdGlvbihldnQsIGNhbGxiYWNrKSB7CgoJCQl2YXIgYSA9IGV2dC5zcGxpdChzZXBhcmF0b3IpOwoKCQkJZm9yICh2YXIgbmFtZSBpbiB0aGlzLmV2ZW50cykge2lmICh0aGlzLmV2ZW50cy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewoKCQkJCWlmIChhLmluZGV4T2YobmFtZSkgPiAtMSkgewoKCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXZlbnRzW25hbWVdLmxlbmd0aDsgaSsrKSB7CgoJCQkJCQkvLyBEb2VzIHRoZSBldmVudCBoYW5kbGVyIGV4aXN0PwoJCQkJCQlpZiAodGhpcy5ldmVudHNbbmFtZV1baV0pIHsKCQkJCQkJCS8vIEVtaXQgb24gdGhlIGxvY2FsIGluc3RhbmNlIG9mIHRoaXMKCQkJCQkJCWNhbGxiYWNrLmNhbGwodGhpcywgbmFtZSwgaSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX19CgkJfTsKCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCS8vIEdsb2JhbCBFdmVudHMKCS8vIEF0dGFjaCB0aGUgY2FsbGJhY2sgdG8gdGhlIHdpbmRvdyBvYmplY3QKCS8vIFJldHVybiBpdHMgdW5pcXVlIHJlZmVyZW5jZQoJZ2xvYmFsRXZlbnQ6IGZ1bmN0aW9uKGNhbGxiYWNrLCBndWlkKSB7CgkJLy8gSWYgdGhlIGd1aWQgaGFzIG5vdCBiZWVuIHN1cHBsaWVkIHRoZW4gY3JlYXRlIGEgbmV3IG9uZS4KCQlndWlkID0gZ3VpZCB8fCAnX2hlbGxvanNfJyArIHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAxZTEyLCAxMCkudG9TdHJpbmcoMzYpOwoKCQkvLyBEZWZpbmUgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uCgkJd2luZG93W2d1aWRdID0gZnVuY3Rpb24oKSB7CgkJCS8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrCgkJCXRyeSB7CgkJCQlpZiAoY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKSkgewoJCQkJCWRlbGV0ZSB3aW5kb3dbZ3VpZF07CgkJCQl9CgkJCX0KCQkJY2F0Y2ggKGUpIHsKCQkJCWNvbnNvbGUuZXJyb3IoZSk7CgkJCX0KCQl9OwoKCQlyZXR1cm4gZ3VpZDsKCX0sCgoJLy8gVHJpZ2dlciBhIGNsaWVudHNpZGUgcG9wdXAKCS8vIFRoaXMgaGFzIGJlZW4gYXVnbWVudGVkIHRvIHN1cHBvcnQgUGhvbmVHYXAKCXBvcHVwOiBmdW5jdGlvbih1cmwsIHJlZGlyZWN0VXJpLCBvcHRpb25zKSB7CgoJCXZhciBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgoJCS8vIE11bHRpIFNjcmVlbiBQb3B1cCBQb3NpdGlvbmluZyAoaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY4NjEwNTApCgkJLy8gQ3JlZGl0OiBodHRwOi8vd3d3Lnh0Zi5kay8yMDExLzA4L2NlbnRlci1uZXctcG9wdXAtd2luZG93LWV2ZW4tb24uaHRtbAoJCS8vIEZpeGVzIGR1YWwtc2NyZWVuIHBvc2l0aW9uICAgICAgICAgICAgICAgICAgICAgICAgIE1vc3QgYnJvd3NlcnMgICAgICBGaXJlZm94CgoJCWlmIChvcHRpb25zLmhlaWdodCkgewoJCQl2YXIgZHVhbFNjcmVlblRvcCA9IHdpbmRvdy5zY3JlZW5Ub3AgIT09IHVuZGVmaW5lZCA/IHdpbmRvdy5zY3JlZW5Ub3AgOiBzY3JlZW4udG9wOwoJCQl2YXIgaGVpZ2h0ID0gc2NyZWVuLmhlaWdodCB8fCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKCQkJb3B0aW9ucy50b3AgPSBwYXJzZUludCgoaGVpZ2h0IC0gb3B0aW9ucy5oZWlnaHQpIC8gMiwgMTApICsgZHVhbFNjcmVlblRvcDsKCQl9CgoJCWlmIChvcHRpb25zLndpZHRoKSB7CgkJCXZhciBkdWFsU2NyZWVuTGVmdCA9IHdpbmRvdy5zY3JlZW5MZWZ0ICE9PSB1bmRlZmluZWQgPyB3aW5kb3cuc2NyZWVuTGVmdCA6IHNjcmVlbi5sZWZ0OwoJCQl2YXIgd2lkdGggPSBzY3JlZW4ud2lkdGggfHwgd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOwoJCQlvcHRpb25zLmxlZnQgPSBwYXJzZUludCgod2lkdGggLSBvcHRpb25zLndpZHRoKSAvIDIsIDEwKSArIGR1YWxTY3JlZW5MZWZ0OwoJCX0KCgkJLy8gQ29udmVydCBvcHRpb25zIGludG8gYW4gYXJyYXkKCQl2YXIgb3B0aW9uc0FycmF5ID0gW107CgkJT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7CgkJCXZhciB2YWx1ZSA9IG9wdGlvbnNbbmFtZV07CgkJCW9wdGlvbnNBcnJheS5wdXNoKG5hbWUgKyAodmFsdWUgIT09IG51bGwgPyAnPScgKyB2YWx1ZSA6ICcnKSk7CgkJfSk7CgoJCS8vIENyZWF0ZSBhIGZ1bmN0aW9uIGZvciByZW9wZW5pbmcgdGhlIHBvcHVwLCBhbmQgYXNzaWduaW5nIGV2ZW50cyB0byB0aGUgbmV3IHBvcHVwIG9iamVjdAoJCS8vIFRoaXMgaXMgYSBmaXggd2hlcmVieSB0cmlnZ2VyaW5nIHRoZQoJCXZhciBvcGVuID0gZnVuY3Rpb24odXJsKSB7CgoJCQkvLyBUcmlnZ2VyIGNhbGxiYWNrCgkJCXZhciBwb3B1cCA9IHdpbmRvdy5vcGVuKAoJCQkJdXJsLAoJCQkJJ19ibGFuaycsCgkJCQlvcHRpb25zQXJyYXkuam9pbignLCcpCgkJCSk7CgoJCQkvLyBQaG9uZUdhcCBzdXBwb3J0CgkJCS8vIEFkZCBhbiBldmVudCBsaXN0ZW5lciB0byBsaXN0ZW4gdG8gdGhlIGNoYW5nZSBpbiB0aGUgcG9wdXAgd2luZG93cyBVUkwKCQkJLy8gVGhpcyBtdXN0IGFwcGVhciBiZWZvcmUgcG9wdXAuZm9jdXMoKTsKCQkJdHJ5IHsKCQkJCWlmIChwb3B1cCAmJiBwb3B1cC5hZGRFdmVudExpc3RlbmVyKSB7CgoJCQkJCS8vIEdldCB0aGUgb3JpZ2luIG9mIHRoZSByZWRpcmVjdCBVUkkKCgkJCQkJdmFyIGEgPSBoZWxsby51dGlscy51cmwocmVkaXJlY3RVcmkpOwoJCQkJCXZhciByZWRpcmVjdFVyaU9yaWdpbiA9IGEub3JpZ2luIHx8IChhLnByb3RvY29sICsgJy8vJyArIGEuaG9zdG5hbWUpOwoKCQkJCQkvLyBMaXN0ZW4gdG8gY2hhbmdlcyBpbiB0aGUgSW5BcHBCcm93c2VyIHdpbmRvdwoKCQkJCQlwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCBmdW5jdGlvbihlKSB7CgoJCQkJCQl2YXIgdXJsID0gZS51cmw7CgoJCQkJCQkvLyBJcyB0aGlzIHRoZSBwYXRoLCBhcyBnaXZlbiBieSB0aGUgcmVkaXJlY3RVcmk/CgkJCQkJCS8vIENoZWNrIHRoZSBuZXcgVVJMIGFnYWlucyB0aGUgcmVkaXJlY3RVcmlPcmlnaW4uCgkJCQkJCS8vIEFjY29yZGluZyB0byAjNjMgYSB1c2VyIGNvdWxkIGNsaWNrICdjYW5jZWwnIGluIHNvbWUgZGlhbG9nIGJveGVzIC4uLi4KCQkJCQkJLy8gVGhlIHBvcHVwIHJlZGlyZWN0cyB0byBhbm90aGVyIHBhZ2Ugd2l0aCB0aGUgc2FtZSBvcmlnaW4sIHlldCB3ZSBzdGlsbCB3aXNoIGl0IHRvIGNsb3NlLgoKCQkJCQkJaWYgKHVybC5pbmRleE9mKHJlZGlyZWN0VXJpT3JpZ2luKSAhPT0gMCkgewoJCQkJCQkJcmV0dXJuOwoJCQkJCQl9CgoJCQkJCQkvLyBTcGxpdCBhcHBhcnQgdGhlIFVSTAoJCQkJCQl2YXIgYSA9IGhlbGxvLnV0aWxzLnVybCh1cmwpOwoKCQkJCQkJLy8gV2UgZG9udCBoYXZlIHdpbmRvdyBvcGVyYXRpb25zIG9uIHRoZSBwb3B1cCBzbyBsZXRzIGNyZWF0ZSBzb21lCgkJCQkJCS8vIFRoZSBsb2NhdGlvbiBjYW4gYmUgYXVnbWVudGVkIGluIHRvIGEgbG9jYXRpb24gb2JqZWN0IGxpa2Ugc28uLi4KCgkJCQkJCXZhciBfcG9wdXAgPSB7CgkJCQkJCQlsb2NhdGlvbjogewoJCQkJCQkJCS8vIENoYW5nZSB0aGUgbG9jYXRpb24gb2YgdGhlIHBvcHVwCgkJCQkJCQkJYXNzaWduOiBmdW5jdGlvbihsb2NhdGlvbikgewoKCQkJCQkJCQkJLy8gVW5mb3VydHVuYXRseSBhbiBhcHAgaXMgbWF5IG5vdCBjaGFuZ2UgdGhlIGxvY2F0aW9uIG9mIGEgSW5BcHBCcm93c2VyIHdpbmRvdy4KCQkJCQkJCQkJLy8gU28gdG8gc2hpbSB0aGlzLCBqdXN0IG9wZW4gYSBuZXcgb25lLgoKCQkJCQkJCQkJcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignZXhpdCcsIGZ1bmN0aW9uKCkgewoKCQkJCQkJCQkJCS8vIEZvciBzb21lIHJlYXNvbiBpdHMgZmFpbGluZyB0byBjbG9zZSB0aGUgd2luZG93IGlmIGEgbmV3IHdpbmRvdyBvcGVucyB0b28gc29vbi4KCgkJCQkJCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCQkJCQkJCW9wZW4obG9jYXRpb24pOwoJCQkJCQkJCQkJfSwgMTAwMCk7CgkJCQkJCQkJCX0pOwoJCQkJCQkJCX0sCgoJCQkJCQkJCXNlYXJjaDogYS5zZWFyY2gsCgkJCQkJCQkJaGFzaDogYS5oYXNoLAoJCQkJCQkJCWhyZWY6IGEuaHJlZgoJCQkJCQkJfSwKCQkJCQkJCWNsb3NlOiBmdW5jdGlvbigpIHsKCQkJCQkJCQlpZiAocG9wdXAuY2xvc2UpIHsKCQkJCQkJCQkJcG9wdXAuY2xvc2UoKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX07CgoJCQkJCQkvLyBUaGVuIHRoaXMgVVJMIGNvbnRhaW5zIGluZm9ybWF0aW9uIHdoaWNoIEhlbGxvSlMgbXVzdCBwcm9jZXNzCgkJCQkJCS8vIFVSTCBzdHJpbmcKCQkJCQkJLy8gV2luZG93IC0gYW55IGFjdGlvbiBzdWNoIGFzIHdpbmRvdyByZWxvY2F0aW9uIGdvZXMgaGVyZQoJCQkJCQkvLyBPcGVuZXIgLSB0aGUgcGFyZW50IHdpbmRvdyB3aGljaCBvcGVuZWQgdGhpcywgYWthIHRoaXMgc2NyaXB0CgoJCQkJCQloZWxsby51dGlscy5yZXNwb25zZUhhbmRsZXIoX3BvcHVwLCB3aW5kb3cpOwoKCQkJCQkJLy8gQWx3YXlzIGNsb3NlIHRoZSBwb3B1cCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGhlbGxvLnV0aWxzLnJlc3BvbnNlSGFuZGxlciBkZXRlY3RzIGEgc3RhdGUgcGFyYW1ldGVyIG9yIG5vdCBpbiB0aGUgcXVlcnlzdHJpbmcuCgkJCQkJCS8vIFN1Y2ggc2l0dWF0aW9ucyBtaWdodCBhcmlzZSBzdWNoIGFzIHRob3NlIGluICM2MwoKCQkJCQkJX3BvcHVwLmNsb3NlKCk7CgoJCQkJCX0pOwoJCQkJfQoJCQl9CgkJCWNhdGNoIChlKSB7fQoKCQkJaWYgKHBvcHVwICYmIHBvcHVwLmZvY3VzKSB7CgkJCQlwb3B1cC5mb2N1cygpOwoJCQl9CgoJCQlyZXR1cm4gcG9wdXA7CgkJfTsKCgkJLy8gQ2FsbCB0aGUgb3BlbigpIGZ1bmN0aW9uIHdpdGggdGhlIGluaXRpYWwgcGF0aAoJCS8vCgkJLy8gT0F1dGggcmVkaXJlY3QsIGZpeGVzIFVSSSBmcmFnbWVudHMgZnJvbSBiZWluZyBsb3N0IGluIFNhZmFyaQoJCS8vIChVUkkgRnJhZ21lbnRzIHdpdGhpbiAzMDIgTG9jYXRpb24gVVJJIGFyZSBsb3N0IG92ZXIgSFRUUFMpCgkJLy8gTG9hZGluZyB0aGUgcmVkaXJlY3QuaHRtbCBiZWZvcmUgdHJpZ2dlcmluZyB0aGUgT0F1dGggRmxvdyBzZWVtcyB0byBmaXggaXQuCgkJLy8KCQkvLyBGaXJlZm94ICBkZWNvZGVzIFVSTCBmcmFnbWVudHMgd2hlbiBjYWxsaW5nIGxvY2F0aW9uLmhhc2guCgkJLy8gIC0gVGhpcyBpcyBiYWQgaWYgdGhlIHZhbHVlIGNvbnRhaW5zIGJyZWFrIHBvaW50cyB3aGljaCBhcmUgZXNjYXBlZAoJCS8vICAtIEhlbmNlIHRoZSB1cmwgbXVzdCBiZSBlbmNvZGVkIHR3aWNlIGFzIGl0IGNvbnRhaW5zIGJyZWFrcG9pbnRzLgoJCWlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1NhZmFyaScpICE9PSAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0Nocm9tZScpID09PSAtMSkgewoJCQl1cmwgPSByZWRpcmVjdFVyaSArICcjb2F1dGhfcmVkaXJlY3Q9JyArIGVuY29kZVVSSUNvbXBvbmVudChlbmNvZGVVUklDb21wb25lbnQodXJsKSk7CgkJfQoKCQlyZXR1cm4gb3Blbih1cmwpOwoJfSwKCgkvLyBPQXV0aCBhbmQgQVBJIHJlc3BvbnNlIGhhbmRsZXIKCXJlc3BvbnNlSGFuZGxlcjogZnVuY3Rpb24od2luZG93LCBwYXJlbnQpIHsKCgkJdmFyIF90aGlzID0gdGhpczsKCQl2YXIgcDsKCQl2YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247CgoJCS8vIElzIHRoaXMgYW4gYXV0aCByZWxheSBtZXNzYWdlIHdoaWNoIG5lZWRzIHRvIGNhbGwgdGhlIHByb3h5PwoJCXAgPSBfdGhpcy5wYXJhbShsb2NhdGlvbi5zZWFyY2gpOwoKCQkvLyBPQXV0aDIgb3IgT0F1dGgxIHNlcnZlciByZXNwb25zZT8KCQlpZiAocCAmJiBwLnN0YXRlICYmIChwLmNvZGUgfHwgcC5vYXV0aF90b2tlbikpIHsKCgkJCXZhciBzdGF0ZSA9IEpTT04ucGFyc2UocC5zdGF0ZSk7CgoJCQkvLyBBZGQgdGhpcyBwYXRoIGFzIHRoZSByZWRpcmVjdF91cmkKCQkJcC5yZWRpcmVjdF91cmkgPSBzdGF0ZS5yZWRpcmVjdF91cmkgfHwgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC9bXD9cI10uKiQvLCAnJyk7CgoJCQkvLyBSZWRpcmVjdCB0byB0aGUgaG9zdAoJCQl2YXIgcGF0aCA9IHN0YXRlLm9hdXRoX3Byb3h5ICsgJz8nICsgX3RoaXMucGFyYW0ocCk7CgoJCQlsb2NhdGlvbi5hc3NpZ24ocGF0aCk7CgoJCQlyZXR1cm47CgkJfQoKCQkvLyBTYXZlIHNlc3Npb24sIGZyb20gcmVkaXJlY3RlZCBhdXRoZW50aWNhdGlvbgoJCS8vICNhY2Nlc3NfdG9rZW4gaGFzIGNvbWUgaW4/CgkJLy8KCQkvLyBGQUNFQk9PSyBpcyByZXR1cm5pbmcgYXV0aCBlcnJvcnMgd2l0aGluIGFzIGEgcXVlcnlfc3RyaW5nLi4uIHRoYXRzIGEgc3RpY2tsZXIgZm9yIGNvbnNpc3RlbmN5LgoJCS8vIFNvdW5kQ2xvdWQgaXMgdGhlIHN0YXRlIGluIHRoZSBxdWVyeXN0cmluZyBhbmQgdGhlIHRva2VuIGluIHRoZSBoYXNodGFnLCBzbyB3ZSdsbCBtaXggdGhlIHR3byB0b2dldGhlcgoKCQlwID0gX3RoaXMubWVyZ2UoX3RoaXMucGFyYW0obG9jYXRpb24uc2VhcmNoIHx8ICcnKSwgX3RoaXMucGFyYW0obG9jYXRpb24uaGFzaCB8fCAnJykpOwoKCQkvLyBJZiBwLnN0YXRlCgkJaWYgKHAgJiYgJ3N0YXRlJyBpbiBwKSB7CgoJCQkvLyBSZW1vdmUgYW55IGFkZGl0aW9uIGluZm9ybWF0aW9uCgkJCS8vIEUuZy4gcC5zdGF0ZSA9ICdmYWNlYm9vay5wYWdlJzsKCQkJdHJ5IHsKCQkJCXZhciBhID0gSlNPTi5wYXJzZShwLnN0YXRlKTsKCQkJCV90aGlzLmV4dGVuZChwLCBhKTsKCQkJfQoJCQljYXRjaCAoZSkgewoJCQkJY29uc29sZS5lcnJvcignQ291bGQgbm90IGRlY29kZSBzdGF0ZSBwYXJhbWV0ZXInKTsKCQkJfQoKCQkJLy8gQWNjZXNzX3Rva2VuPwoJCQlpZiAoKCdhY2Nlc3NfdG9rZW4nIGluIHAgJiYgcC5hY2Nlc3NfdG9rZW4pICYmIHAubmV0d29yaykgewoKCQkJCWlmICghcC5leHBpcmVzX2luIHx8IHBhcnNlSW50KHAuZXhwaXJlc19pbiwgMTApID09PSAwKSB7CgkJCQkJLy8gSWYgcC5leHBpcmVzX2luIGlzIHVuc2V0LCBzZXQgdG8gMAoJCQkJCXAuZXhwaXJlc19pbiA9IDA7CgkJCQl9CgoJCQkJcC5leHBpcmVzX2luID0gcGFyc2VJbnQocC5leHBpcmVzX2luLCAxMCk7CgkJCQlwLmV4cGlyZXMgPSAoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAvIDFlMykgKyAocC5leHBpcmVzX2luIHx8ICg2MCAqIDYwICogMjQgKiAzNjUpKTsKCgkJCQkvLyBMZXRzIHVzZSB0aGUgInN0YXRlIiB0byBhc3NpZ24gaXQgdG8gb25lIG9mIG91ciBuZXR3b3JrcwoJCQkJYXV0aENhbGxiYWNrKHAsIHdpbmRvdywgcGFyZW50KTsKCQkJfQoKCQkJLy8gRXJyb3I9PwoJCQkvLyAmZXJyb3JfZGVzY3JpcHRpb249PwoJCQkvLyAmc3RhdGU9PwoJCQllbHNlIGlmICgoJ2Vycm9yJyBpbiBwICYmIHAuZXJyb3IpICYmIHAubmV0d29yaykgewoKCQkJCXAuZXJyb3IgPSB7CgkJCQkJY29kZTogcC5lcnJvciwKCQkJCQltZXNzYWdlOiBwLmVycm9yX21lc3NhZ2UgfHwgcC5lcnJvcl9kZXNjcmlwdGlvbgoJCQkJfTsKCgkJCQkvLyBMZXQgdGhlIHN0YXRlIGhhbmRsZXIgaGFuZGxlIGl0CgkJCQlhdXRoQ2FsbGJhY2socCwgd2luZG93LCBwYXJlbnQpOwoJCQl9CgoJCQkvLyBBUEkgY2FsbCwgb3IgYSBjYW5jZWxsZWQgbG9naW4KCQkJLy8gUmVzdWx0IGlzIHNlcmlhbGl6ZWQgSlNPTiBzdHJpbmcKCQkJZWxzZSBpZiAocC5jYWxsYmFjayAmJiBwLmNhbGxiYWNrIGluIHBhcmVudCkgewoKCQkJCS8vIFRyaWdnZXIgYSBmdW5jdGlvbiBpbiB0aGUgcGFyZW50CgkJCQl2YXIgcmVzID0gJ3Jlc3VsdCcgaW4gcCAmJiBwLnJlc3VsdCA/IEpTT04ucGFyc2UocC5yZXN1bHQpIDogZmFsc2U7CgoJCQkJLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgb24gdGhlIHBhcmVudAoJCQkJcGFyZW50W3AuY2FsbGJhY2tdKHJlcyk7CgkJCQljbG9zZVdpbmRvdygpOwoJCQl9CgoJCQkvLyBJZiB0aGlzIHBhZ2UgaXMgc3RpbGwgb3BlbgoJCQlpZiAocC5wYWdlX3VyaSkgewoJCQkJbG9jYXRpb24uYXNzaWduKHAucGFnZV91cmkpOwoJCQl9CgkJfQoKCQkvLyBPQXV0aCByZWRpcmVjdCwgZml4ZXMgVVJJIGZyYWdtZW50cyBmcm9tIGJlaW5nIGxvc3QgaW4gU2FmYXJpCgkJLy8gKFVSSSBGcmFnbWVudHMgd2l0aGluIDMwMiBMb2NhdGlvbiBVUkkgYXJlIGxvc3Qgb3ZlciBIVFRQUykKCQkvLyBMb2FkaW5nIHRoZSByZWRpcmVjdC5odG1sIGJlZm9yZSB0cmlnZ2VyaW5nIHRoZSBPQXV0aCBGbG93IHNlZW1zIHRvIGZpeCBpdC4KCQllbHNlIGlmICgnb2F1dGhfcmVkaXJlY3QnIGluIHApIHsKCgkJCWxvY2F0aW9uLmFzc2lnbihkZWNvZGVVUklDb21wb25lbnQocC5vYXV0aF9yZWRpcmVjdCkpOwoJCQlyZXR1cm47CgkJfQoKCQkvLyBUcmlnZ2VyIGEgY2FsbGJhY2sgdG8gYXV0aGVudGljYXRlCgkJZnVuY3Rpb24gYXV0aENhbGxiYWNrKG9iaiwgd2luZG93LCBwYXJlbnQpIHsKCgkJCXZhciBjYiA9IG9iai5jYWxsYmFjazsKCQkJdmFyIG5ldHdvcmsgPSBvYmoubmV0d29yazsKCgkJCS8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIG9uIHRoZSBwYXJlbnQKCQkJX3RoaXMuc3RvcmUobmV0d29yaywgb2JqKTsKCgkJCS8vIElmIHRoaXMgaXMgYSBwYWdlIHJlcXVlc3QgaXQgaGFzIG5vIHBhcmVudCBvciBvcGVuZXIgd2luZG93IHRvIGhhbmRsZSBjYWxsYmFja3MKCQkJaWYgKCgnZGlzcGxheScgaW4gb2JqKSAmJiBvYmouZGlzcGxheSA9PT0gJ3BhZ2UnKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIFJlbW92ZSBmcm9tIHNlc3Npb24gb2JqZWN0CgkJCWlmIChwYXJlbnQgJiYgY2IgJiYgY2IgaW4gcGFyZW50KSB7CgoJCQkJdHJ5IHsKCQkJCQlkZWxldGUgb2JqLmNhbGxiYWNrOwoJCQkJfQoJCQkJY2F0Y2ggKGUpIHt9CgoJCQkJLy8gVXBkYXRlIHN0b3JlCgkJCQlfdGhpcy5zdG9yZShuZXR3b3JrLCBvYmopOwoKCQkJCS8vIENhbGwgdGhlIGdsb2JhbEV2ZW50IGZ1bmN0aW9uIG9uIHRoZSBwYXJlbnQKCQkJCS8vIEl0J3Mgc2FmZXIgdG8gcGFzcyBiYWNrIGEgc3RyaW5nIHRvIHRoZSBwYXJlbnQsCgkJCQkvLyBSYXRoZXIgdGhhbiBhbiBvYmplY3QvYXJyYXkgKGJldHRlciBmb3IgSUU4KQoJCQkJdmFyIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7CgoJCQkJdHJ5IHsKCQkJCQlwYXJlbnRbY2JdKHN0cik7CgkJCQl9CgkJCQljYXRjaCAoZSkgewoJCQkJCS8vIEVycm9yIHRocm93biB3aGlsc3QgZXhlY3V0aW5nIHBhcmVudCBjYWxsYmFjawoJCQkJfQoJCQl9CgoJCQljbG9zZVdpbmRvdygpOwoJCX0KCgkJZnVuY3Rpb24gY2xvc2VXaW5kb3coKSB7CgoJCQlpZiAod2luZG93LmZyYW1lRWxlbWVudCkgewoJCQkJLy8gSW5zaWRlIGFuIGlmcmFtZSwgcmVtb3ZlIGZyb20gcGFyZW50CgkJCQlwYXJlbnQuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh3aW5kb3cuZnJhbWVFbGVtZW50KTsKCQkJfQoJCQllbHNlIHsKCQkJCS8vIENsb3NlIHRoaXMgY3VycmVudCB3aW5kb3cKCQkJCXRyeSB7CgkJCQkJd2luZG93LmNsb3NlKCk7CgkJCQl9CgkJCQljYXRjaCAoZSkge30KCgkJCQkvLyBJT1MgYnVnIHdvbnQgbGV0IHVzIGNsb3NlIGEgcG9wdXAgaWYgc3RpbGwgbG9hZGluZwoJCQkJaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CgkJCQkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHsKCQkJCQkJd2luZG93LmNsb3NlKCk7CgkJCQkJfSk7CgkJCQl9CgkJCX0KCgkJfQoJfQp9KTsKCi8vIEV2ZW50cwovLyBFeHRlbmQgdGhlIGhlbGxvIG9iamVjdCB3aXRoIGl0cyBvd24gZXZlbnQgaW5zdGFuY2UKaGVsbG8udXRpbHMuRXZlbnQuY2FsbChoZWxsbyk7CgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBNb25pdG9yaW5nIHNlc3Npb24gc3RhdGUKLy8gQ2hlY2sgZm9yIHNlc3Npb24gY2hhbmdlcwovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKKGZ1bmN0aW9uKGhlbGxvKSB7CgoJLy8gTW9uaXRvciBmb3IgYSBjaGFuZ2UgaW4gc3RhdGUgYW5kIGZpcmUKCXZhciBvbGRTZXNzaW9ucyA9IHt9OwoKCS8vIEhhc2ggb2YgZXhwaXJlZCB0b2tlbnMKCXZhciBleHBpcmVkID0ge307CgoJLy8gTGlzdGVuIHRvIG90aGVyIHRyaWdnZXJzIHRvIEF1dGggZXZlbnRzLCB1c2UgdGhlc2UgdG8gdXBkYXRlIHRoaXMKCWhlbGxvLm9uKCdhdXRoLmxvZ2luLCBhdXRoLmxvZ291dCcsIGZ1bmN0aW9uKGF1dGgpIHsKCQlpZiAoYXV0aCAmJiB0eXBlb2YgKGF1dGgpID09PSAnb2JqZWN0JyAmJiBhdXRoLm5ldHdvcmspIHsKCQkJb2xkU2Vzc2lvbnNbYXV0aC5uZXR3b3JrXSA9IGhlbGxvLnV0aWxzLnN0b3JlKGF1dGgubmV0d29yaykgfHwge307CgkJfQoJfSk7CgoJKGZ1bmN0aW9uIHNlbGYoKSB7CgoJCXZhciBDVVJSRU5UX1RJTUUgPSAoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAvIDFlMyk7CgkJdmFyIGVtaXQgPSBmdW5jdGlvbihldmVudE5hbWUpIHsKCQkJaGVsbG8uZW1pdCgnYXV0aC4nICsgZXZlbnROYW1lLCB7CgkJCQluZXR3b3JrOiBuYW1lLAoJCQkJYXV0aFJlc3BvbnNlOiBzZXNzaW9uCgkJCX0pOwoJCX07CgoJCS8vIExvb3AgdGhyb3VnaCB0aGUgc2VydmljZXMKCQlmb3IgKHZhciBuYW1lIGluIGhlbGxvLnNlcnZpY2VzKSB7aWYgKGhlbGxvLnNlcnZpY2VzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CgoJCQlpZiAoIWhlbGxvLnNlcnZpY2VzW25hbWVdLmlkKSB7CgkJCQkvLyBXZSBoYXZlbid0IGF0dGFjaGVkIGFuIElEIHNvIGRvbnQgbGlzdGVuLgoJCQkJY29udGludWU7CgkJCX0KCgkJCS8vIEdldCBzZXNzaW9uCgkJCXZhciBzZXNzaW9uID0gaGVsbG8udXRpbHMuc3RvcmUobmFtZSkgfHwge307CgkJCXZhciBwcm92aWRlciA9IGhlbGxvLnNlcnZpY2VzW25hbWVdOwoJCQl2YXIgb2xkU2VzcyA9IG9sZFNlc3Npb25zW25hbWVdIHx8IHt9OwoKCQkJLy8gTGlzdGVuIGZvciBnbG9iYWxFdmVudHMgdGhhdCBkaWQgbm90IGdldCB0cmlnZ2VyZWQgZnJvbSB0aGUgY2hpbGQKCQkJaWYgKHNlc3Npb24gJiYgJ2NhbGxiYWNrJyBpbiBzZXNzaW9uKSB7CgoJCQkJLy8gVG8gZG8gcmVtb3ZlIGZyb20gc2Vzc2lvbiBvYmplY3QuLi4KCQkJCXZhciBjYiA9IHNlc3Npb24uY2FsbGJhY2s7CgkJCQl0cnkgewoJCQkJCWRlbGV0ZSBzZXNzaW9uLmNhbGxiYWNrOwoJCQkJfQoJCQkJY2F0Y2ggKGUpIHt9CgoJCQkJLy8gVXBkYXRlIHN0b3JlCgkJCQkvLyBSZW1vdmluZyB0aGUgY2FsbGJhY2sKCQkJCWhlbGxvLnV0aWxzLnN0b3JlKG5hbWUsIHNlc3Npb24pOwoKCQkJCS8vIEVtaXQgZ2xvYmFsIGV2ZW50cwoJCQkJdHJ5IHsKCQkJCQl3aW5kb3dbY2JdKHNlc3Npb24pOwoJCQkJfQoJCQkJY2F0Y2ggKGUpIHt9CgkJCX0KCgkJCS8vIFJlZnJlc2ggdG9rZW4KCQkJaWYgKHNlc3Npb24gJiYgKCdleHBpcmVzJyBpbiBzZXNzaW9uKSAmJiBzZXNzaW9uLmV4cGlyZXMgPCBDVVJSRU5UX1RJTUUpIHsKCgkJCQkvLyBJZiBhdXRvIHJlZnJlc2ggaXMgcG9zc2libGUKCQkJCS8vIEVpdGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cwoJCQkJdmFyIHJlZnJlc2ggPSBwcm92aWRlci5yZWZyZXNoIHx8IHNlc3Npb24ucmVmcmVzaF90b2tlbjsKCgkJCQkvLyBIYXMgdGhlIHJlZnJlc2ggYmVlbiBydW4gcmVjZW50bHk/CgkJCQlpZiAocmVmcmVzaCAmJiAoIShuYW1lIGluIGV4cGlyZWQpIHx8IGV4cGlyZWRbbmFtZV0gPCBDVVJSRU5UX1RJTUUpKSB7CgkJCQkJLy8gVHJ5IHRvIHJlc2lnbmluCgkJCQkJaGVsbG8uZW1pdCgnbm90aWNlJywgbmFtZSArICcgaGFzIGV4cGlyZWQgdHJ5aW5nIHRvIHJlc2lnbmluJyk7CgkJCQkJaGVsbG8ubG9naW4obmFtZSwge2Rpc3BsYXk6ICdub25lJywgZm9yY2U6IGZhbHNlfSk7CgoJCQkJCS8vIFVwZGF0ZSBleHBpcmVkLCBldmVyeSAxMCBtaW51dGVzCgkJCQkJZXhwaXJlZFtuYW1lXSA9IENVUlJFTlRfVElNRSArIDYwMDsKCQkJCX0KCgkJCQkvLyBEb2VzIHRoaXMgcHJvdmlkZXIgbm90IHN1cHBvcnQgcmVmcmVzaAoJCQkJZWxzZSBpZiAoIXJlZnJlc2ggJiYgIShuYW1lIGluIGV4cGlyZWQpKSB7CgkJCQkJLy8gTGFiZWwgdGhlIGV2ZW50CgkJCQkJZW1pdCgnZXhwaXJlZCcpOwoJCQkJCWV4cGlyZWRbbmFtZV0gPSB0cnVlOwoJCQkJfQoKCQkJCS8vIElmIHNlc3Npb24gaGFzIGV4cGlyZWQgdGhlbiB3ZSBkb250IHdhbnQgdG8gc3RvcmUgaXRzIHZhbHVlIHVudGlsIGl0IGNhbiBiZSBlc3RhYmxpc2hlZCB0aGF0IGl0cyBiZWVuIHVwZGF0ZWQKCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQkvLyBIYXMgc2Vzc2lvbiBjaGFuZ2VkPwoJCQllbHNlIGlmIChvbGRTZXNzLmFjY2Vzc190b2tlbiA9PT0gc2Vzc2lvbi5hY2Nlc3NfdG9rZW4gJiYKCQkJb2xkU2Vzcy5leHBpcmVzID09PSBzZXNzaW9uLmV4cGlyZXMpIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQkvLyBBY2Nlc3NfdG9rZW4gaGFzIGJlZW4gcmVtb3ZlZAoJCQllbHNlIGlmICghc2Vzc2lvbi5hY2Nlc3NfdG9rZW4gJiYgb2xkU2Vzcy5hY2Nlc3NfdG9rZW4pIHsKCQkJCWVtaXQoJ2xvZ291dCcpOwoJCQl9CgoJCQkvLyBBY2Nlc3NfdG9rZW4gaGFzIGJlZW4gY3JlYXRlZAoJCQllbHNlIGlmIChzZXNzaW9uLmFjY2Vzc190b2tlbiAmJiAhb2xkU2Vzcy5hY2Nlc3NfdG9rZW4pIHsKCQkJCWVtaXQoJ2xvZ2luJyk7CgkJCX0KCgkJCS8vIEFjY2Vzc190b2tlbiBoYXMgYmVlbiB1cGRhdGVkCgkJCWVsc2UgaWYgKHNlc3Npb24uZXhwaXJlcyAhPT0gb2xkU2Vzcy5leHBpcmVzKSB7CgkJCQllbWl0KCd1cGRhdGUnKTsKCQkJfQoKCQkJLy8gVXBkYXRlZCBzdG9yZWQgc2Vzc2lvbgoJCQlvbGRTZXNzaW9uc1tuYW1lXSA9IHNlc3Npb247CgoJCQkvLyBSZW1vdmUgdGhlIGV4cGlyZWQgZmxhZ3MKCQkJaWYgKG5hbWUgaW4gZXhwaXJlZCkgewoJCQkJZGVsZXRlIGV4cGlyZWRbbmFtZV07CgkJCX0KCQl9fQoKCQkvLyBDaGVjayBlcnJvciBldmVudHMKCQlzZXRUaW1lb3V0KHNlbGYsIDEwMDApOwoJfSkoKTsKCn0pKGhlbGxvKTsKCi8vIEVPRiBDT1JFIGxpYgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwovLyBBUEkKLy8gQHBhcmFtIHBhdGggICAgc3RyaW5nCi8vIEBwYXJhbSBxdWVyeSAgIG9iamVjdCAob3B0aW9uYWwpCi8vIEBwYXJhbSBtZXRob2QgIHN0cmluZyAob3B0aW9uYWwpCi8vIEBwYXJhbSBkYXRhICAgIG9iamVjdCAob3B0aW9uYWwpCi8vIEBwYXJhbSB0aW1lb3V0IGludGVnZXIgKG9wdGlvbmFsKQovLyBAcGFyYW0gY2FsbGJhY2sgIGZ1bmN0aW9uIChvcHRpb25hbCkKCmhlbGxvLmFwaSA9IGZ1bmN0aW9uKCkgewoKCS8vIFNob3J0aGFuZAoJdmFyIF90aGlzID0gdGhpczsKCXZhciB1dGlscyA9IF90aGlzLnV0aWxzOwoJdmFyIGVycm9yID0gdXRpbHMuZXJyb3I7CgoJLy8gQ29uc3RydWN0IGEgbmV3IFByb21pc2Ugb2JqZWN0Cgl2YXIgcHJvbWlzZSA9IHV0aWxzLlByb21pc2UoKTsKCgkvLyBBcmd1bWVudHMKCXZhciBwID0gdXRpbHMuYXJncyh7cGF0aDogJ3MhJywgcXVlcnk6ICdvJywgbWV0aG9kOiAncycsIGRhdGE6ICdvJywgdGltZW91dDogJ2knLCBjYWxsYmFjazogJ2YnfSwgYXJndW1lbnRzKTsKCgkvLyBNZXRob2QKCXAubWV0aG9kID0gKHAubWV0aG9kIHx8ICdnZXQnKS50b0xvd2VyQ2FzZSgpOwoKCS8vIEhlYWRlcnMKCXAuaGVhZGVycyA9IHAuaGVhZGVycyB8fCB7fTsKCgkvLyBRdWVyeQoJcC5xdWVyeSA9IHAucXVlcnkgfHwge307CgoJLy8gSWYgZ2V0LCBwdXQgYWxsIHBhcmFtZXRlcnMgaW50byBxdWVyeQoJaWYgKHAubWV0aG9kID09PSAnZ2V0JyB8fCBwLm1ldGhvZCA9PT0gJ2RlbGV0ZScpIHsKCQl1dGlscy5leHRlbmQocC5xdWVyeSwgcC5kYXRhKTsKCQlwLmRhdGEgPSB7fTsKCX0KCgl2YXIgZGF0YSA9IHAuZGF0YSA9IHAuZGF0YSB8fCB7fTsKCgkvLyBDb21wbGV0ZWQgZXZlbnQgY2FsbGJhY2sKCXByb21pc2UudGhlbihwLmNhbGxiYWNrLCBwLmNhbGxiYWNrKTsKCgkvLyBSZW1vdmUgdGhlIG5ldHdvcmsgZnJvbSBwYXRoLCBlLmcuIGZhY2Vib29rOi9tZS9mcmllbmRzCgkvLyBSZXN1bHRzIGluIHsgbmV0d29yayA6IGZhY2Vib29rLCBwYXRoIDogbWUvZnJpZW5kcyB9CglpZiAoIXAucGF0aCkgewoJCXJldHVybiBwcm9taXNlLnJlamVjdChlcnJvcignaW52YWxpZF9wYXRoJywgJ01pc3NpbmcgdGhlIHBhdGggcGFyYW1ldGVyIGZyb20gdGhlIHJlcXVlc3QnKSk7Cgl9CgoJcC5wYXRoID0gcC5wYXRoLnJlcGxhY2UoL15cLysvLCAnJyk7Cgl2YXIgYSA9IChwLnBhdGguc3BsaXQoL1tcL1w6XS8sIDIpIHx8IFtdKVswXS50b0xvd2VyQ2FzZSgpOwoKCWlmIChhIGluIF90aGlzLnNlcnZpY2VzKSB7CgkJcC5uZXR3b3JrID0gYTsKCQl2YXIgcmVnID0gbmV3IFJlZ0V4cCgnXicgKyBhICsgJzo/XC8/Jyk7CgkJcC5wYXRoID0gcC5wYXRoLnJlcGxhY2UocmVnLCAnJyk7Cgl9CgoJLy8gTmV0d29yayAmIFByb3ZpZGVyCgkvLyBEZWZpbmUgdGhlIG5ldHdvcmsgdGhhdCB0aGlzIHJlcXVlc3QgaXMgbWFkZSBmb3IKCXAubmV0d29yayA9IF90aGlzLnNldHRpbmdzLmRlZmF1bHRfc2VydmljZSA9IHAubmV0d29yayB8fCBfdGhpcy5zZXR0aW5ncy5kZWZhdWx0X3NlcnZpY2U7Cgl2YXIgbyA9IF90aGlzLnNlcnZpY2VzW3AubmV0d29ya107CgoJLy8gSU5WQUxJRAoJLy8gSXMgdGhlcmUgbm8gc2VydmljZSBieSB0aGUgZ2l2ZW4gbmV0d29yayBuYW1lPwoJaWYgKCFvKSB7CgkJcmV0dXJuIHByb21pc2UucmVqZWN0KGVycm9yKCdpbnZhbGlkX25ldHdvcmsnLCAnQ291bGQgbm90IG1hdGNoIHRoZSBzZXJ2aWNlIHJlcXVlc3RlZDogJyArIHAubmV0d29yaykpOwoJfQoKCS8vIFBBVEgKCS8vIEFzIGxvbmcgYXMgdGhlIHBhdGggaXNuJ3QgZmxhZ2dlZCBhcyB1bmF2YWlhYmxlLCBlLmcuIHBhdGggPT0gZmFsc2UKCglpZiAoISghKHAubWV0aG9kIGluIG8pIHx8ICEocC5wYXRoIGluIG9bcC5tZXRob2RdKSB8fCBvW3AubWV0aG9kXVtwLnBhdGhdICE9PSBmYWxzZSkpIHsKCQlyZXR1cm4gcHJvbWlzZS5yZWplY3QoZXJyb3IoJ2ludmFsaWRfcGF0aCcsICdUaGUgcHJvdmlkZWQgcGF0aCBpcyBub3QgYXZhaWxhYmxlIG9uIHRoZSBzZWxlY3RlZCBuZXR3b3JrJykpOwoJfQoKCS8vIFBST1hZCgkvLyBPQXV0aDEgY2FsbHMgYWx3YXlzIG5lZWQgYSBwcm94eQoKCWlmICghcC5vYXV0aF9wcm94eSkgewoJCXAub2F1dGhfcHJveHkgPSBfdGhpcy5zZXR0aW5ncy5vYXV0aF9wcm94eTsKCX0KCglpZiAoISgncHJveHknIGluIHApKSB7CgkJcC5wcm94eSA9IHAub2F1dGhfcHJveHkgJiYgby5vYXV0aCAmJiBwYXJzZUludChvLm9hdXRoLnZlcnNpb24sIDEwKSA9PT0gMTsKCX0KCgkvLyBUSU1FT1VUCgkvLyBBZG9wdCB0aW1lb3V0IGZyb20gZ2xvYmFsIHNldHRpbmdzIGJ5IGRlZmF1bHQKCglpZiAoISgndGltZW91dCcgaW4gcCkpIHsKCQlwLnRpbWVvdXQgPSBfdGhpcy5zZXR0aW5ncy50aW1lb3V0OwoJfQoKCS8vIEZvcm1hdCByZXNwb25zZQoJLy8gV2hldGhlciB0byBydW4gdGhlIHJhdyByZXNwb25zZSB0aHJvdWdoIHBvc3QgcHJvY2Vzc2luZy4KCWlmICghKCdmb3JtYXRSZXNwb25zZScgaW4gcCkpIHsKCQlwLmZvcm1hdFJlc3BvbnNlID0gdHJ1ZTsKCX0KCgkvLyBHZXQgdGhlIGN1cnJlbnQgc2Vzc2lvbgoJLy8gQXBwZW5kIHRoZSBhY2Nlc3NfdG9rZW4gdG8gdGhlIHF1ZXJ5CglwLmF1dGhSZXNwb25zZSA9IF90aGlzLmdldEF1dGhSZXNwb25zZShwLm5ldHdvcmspOwoJaWYgKHAuYXV0aFJlc3BvbnNlICYmIHAuYXV0aFJlc3BvbnNlLmFjY2Vzc190b2tlbikgewoJCXAucXVlcnkuYWNjZXNzX3Rva2VuID0gcC5hdXRoUmVzcG9uc2UuYWNjZXNzX3Rva2VuOwoJfQoKCXZhciB1cmwgPSBwLnBhdGg7Cgl2YXIgbTsKCgkvLyBTdG9yZSB0aGUgcXVlcnkgYXMgb3B0aW9ucwoJLy8gVGhpcyBpcyB1c2VkIHRvIHBvcHVsYXRlIHRoZSByZXF1ZXN0IG9iamVjdCBiZWZvcmUgdGhlIGRhdGEgaXMgYXVnbWVudGVkIGJ5IHRoZSBwcmV3cmFwIGhhbmRsZXJzLgoJcC5vcHRpb25zID0gdXRpbHMuY2xvbmUocC5xdWVyeSk7CgoJLy8gQ2xvbmUgdGhlIGRhdGEgb2JqZWN0CgkvLyBQcmV2ZW50IHRoaXMgc2NyaXB0IG92ZXJ3cml0aW5nIHRoZSBkYXRhIG9mIHRoZSBpbmNvbWluZyBvYmplY3QuCgkvLyBFbnN1cmUgdGhhdCBldmVyeXRpbWUgd2UgcnVuIGFuIGl0ZXJhdGlvbiB0aGUgY2FsbGJhY2tzIGhhdmVuJ3QgcmVtb3ZlZCBzb21lIGRhdGEKCXAuZGF0YSA9IHV0aWxzLmNsb25lKGRhdGEpOwoKCS8vIFVSTCBNYXBwaW5nCgkvLyBJcyB0aGVyZSBhIG1hcCBmb3IgdGhlIGdpdmVuIFVSTD8KCXZhciBhY3Rpb25zID0gb1t7J2RlbGV0ZSc6ICdkZWwnfVtwLm1ldGhvZF0gfHwgcC5tZXRob2RdIHx8IHt9OwoKCS8vIEV4dHJhcG9sYXRlIHRoZSBRdWVyeVN0cmluZwoJLy8gUHJvdmlkZSBhIGNsZWFuIHBhdGgKCS8vIE1vdmUgdGhlIHF1ZXJ5c3RyaW5nIGludG8gdGhlIGRhdGEKCWlmIChwLm1ldGhvZCA9PT0gJ2dldCcpIHsKCgkJdmFyIHF1ZXJ5ID0gdXJsLnNwbGl0KC9bXD8jXS8pWzFdOwoJCWlmIChxdWVyeSkgewoJCQl1dGlscy5leHRlbmQocC5xdWVyeSwgdXRpbHMucGFyYW0ocXVlcnkpKTsKCgkJCS8vIFJlbW92ZSB0aGUgcXVlcnkgcGFydCBmcm9tIHRoZSBVUkwKCQkJdXJsID0gdXJsLnJlcGxhY2UoL1w/Lio/KCN8JCkvLCAnJDEnKTsKCQl9Cgl9CgoJLy8gSXMgdGhlIGhhc2ggZnJhZ21lbnQgZGVmaW5lZAoJaWYgKChtID0gdXJsLm1hdGNoKC8jKC4rKS8sICcnKSkpIHsKCQl1cmwgPSB1cmwuc3BsaXQoJyMnKVswXTsKCQlwLnBhdGggPSBtWzFdOwoJfQoJZWxzZSBpZiAodXJsIGluIGFjdGlvbnMpIHsKCQlwLnBhdGggPSB1cmw7CgkJdXJsID0gYWN0aW9uc1t1cmxdOwoJfQoJZWxzZSBpZiAoJ2RlZmF1bHQnIGluIGFjdGlvbnMpIHsKCQl1cmwgPSBhY3Rpb25zWydkZWZhdWx0J107Cgl9CgoJLy8gUmVkaXJlY3QgSGFuZGxlcgoJLy8gVGhpcyBkZWZpbmVzIGZvciB0aGUgRm9ybStJZnJhbWUrSGFzaCBoYWNrIHdoZXJlIHRvIHJldHVybiB0aGUgcmVzdWx0cyB0b28uCglwLnJlZGlyZWN0X3VyaSA9IF90aGlzLnNldHRpbmdzLnJlZGlyZWN0X3VyaTsKCgkvLyBEZWZpbmUgRm9ybWF0SGFuZGxlcgoJLy8gVGhlIHJlcXVlc3QgY2FuIGJlIHByb2Nlc2VkIGluIGEgbXVsdGl0dWRlIG9mIHdheXMKCS8vIEhlcmUncyB0aGUgb3B0aW9ucyAtIGRlcGVuZGluZyBvbiB0aGUgYnJvd3NlciBhbmQgZW5kcG9pbnQKCXAueGhyID0gby54aHI7CglwLmpzb25wID0gby5qc29ucDsKCXAuZm9ybSA9IG8uZm9ybTsKCgkvLyBNYWtlIHJlcXVlc3QKCWlmICh0eXBlb2YgKHVybCkgPT09ICdmdW5jdGlvbicpIHsKCQkvLyBEb2VzIHNlbGYgaGF2ZSBpdHMgb3duIGNhbGxiYWNrPwoJCXVybChwLCBnZXRQYXRoKTsKCX0KCWVsc2UgewoJCS8vIEVsc2UgdGhlIFVSTCBpcyBhIHN0cmluZwoJCWdldFBhdGgodXJsKTsKCX0KCglyZXR1cm4gcHJvbWlzZS5wcm94eTsKCgkvLyBJZiB1cmwgbmVlZHMgYSBiYXNlCgkvLyBXcmFwIGV2ZXJ5dGhpbmcgaW4KCWZ1bmN0aW9uIGdldFBhdGgodXJsKSB7CgoJCS8vIEZvcm1hdCB0aGUgc3RyaW5nIGlmIGl0IG5lZWRzIGl0CgkJdXJsID0gdXJsLnJlcGxhY2UoL1xAXHsoW2EtelxfXC1dKykoXHwuKj8pP1x9L2dpLCBmdW5jdGlvbihtLCBrZXksIGRlZmF1bHRzKSB7CgkJCXZhciB2YWwgPSBkZWZhdWx0cyA/IGRlZmF1bHRzLnJlcGxhY2UoL15cfC8sICcnKSA6ICcnOwoJCQlpZiAoa2V5IGluIHAucXVlcnkpIHsKCQkJCXZhbCA9IHAucXVlcnlba2V5XTsKCQkJCWRlbGV0ZSBwLnF1ZXJ5W2tleV07CgkJCX0KCQkJZWxzZSBpZiAocC5kYXRhICYmIGtleSBpbiBwLmRhdGEpIHsKCQkJCXZhbCA9IHAuZGF0YVtrZXldOwoJCQkJZGVsZXRlIHAuZGF0YVtrZXldOwoJCQl9CgkJCWVsc2UgaWYgKCFkZWZhdWx0cykgewoJCQkJcHJvbWlzZS5yZWplY3QoZXJyb3IoJ21pc3NpbmdfYXR0cmlidXRlJywgJ1RoZSBhdHRyaWJ1dGUgJyArIGtleSArICcgaXMgbWlzc2luZyBmcm9tIHRoZSByZXF1ZXN0JykpOwoJCQl9CgoJCQlyZXR1cm4gdmFsOwoJCX0pOwoKCQkvLyBBZGQgYmFzZQoJCWlmICghdXJsLm1hdGNoKC9eaHR0cHM/OlwvXC8vKSkgewoJCQl1cmwgPSBvLmJhc2UgKyB1cmw7CgkJfQoKCQkvLyBEZWZpbmUgdGhlIHJlcXVlc3QgVVJMCgkJcC51cmwgPSB1cmw7CgoJCS8vIE1ha2UgdGhlIEhUVFAgcmVxdWVzdCB3aXRoIHRoZSBjdXJhdGVkIHJlcXVlc3Qgb2JqZWN0CgkJLy8gQ0FMTEJBQ0sgSEFORExFUgoJCS8vIEAgcmVzcG9uc2Ugb2JqZWN0CgkJLy8gQCBzdGF0dXNDb2RlIGludGVnZXIgaWYgYXZhaWxhYmxlCgkJdXRpbHMucmVxdWVzdChwLCBmdW5jdGlvbihyLCBoZWFkZXJzKSB7CgoJCQkvLyBJcyB0aGlzIGEgcmF3IHJlc3BvbnNlPwoJCQlpZiAoIXAuZm9ybWF0UmVzcG9uc2UpIHsKCQkJCS8vIEJhZCByZXF1ZXN0PyBlcnJvciBzdGF0dXNDb2RlIG9yIG90aGVyd2lzZSBjb250YWlucyBhbiBlcnJvciByZXNwb25zZSB2aXMgSlNPTlA/CgkJCQlpZiAodHlwZW9mIGhlYWRlcnMgPT09ICdvYmplY3QnID8gKGhlYWRlcnMuc3RhdHVzQ29kZSA+PSA0MDApIDogKHR5cGVvZiByID09PSAnb2JqZWN0JyAmJiAnZXJyb3InIGluIHIpKSB7CgkJCQkJcHJvbWlzZS5yZWplY3Qocik7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQlwcm9taXNlLmZ1bGZpbGwocik7CgkJCQl9CgoJCQkJcmV0dXJuOwoJCQl9CgoJCQkvLyBTaG91bGQgdGhpcyBiZSBhbiBvYmplY3QKCQkJaWYgKHIgPT09IHRydWUpIHsKCQkJCXIgPSB7c3VjY2Vzczp0cnVlfTsKCQkJfQoJCQllbHNlIGlmICghcikgewoJCQkJciA9IHt9OwoJCQl9CgoJCQkvLyBUaGUgZGVsZXRlIGNhbGxiYWNrIG5lZWRzIGEgYmV0dGVyIHJlc3BvbnNlCgkJCWlmIChwLm1ldGhvZCA9PT0gJ2RlbGV0ZScpIHsKCQkJCXIgPSAoIXIgfHwgdXRpbHMuaXNFbXB0eShyKSkgPyB7c3VjY2Vzczp0cnVlfSA6IHI7CgkJCX0KCgkJCS8vIEZPUk1BVCBSRVNQT05TRT8KCQkJLy8gRG9lcyBzZWxmIHJlcXVlc3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgZm9ybWF0dGVyCgkJCWlmIChvLndyYXAgJiYgKChwLnBhdGggaW4gby53cmFwKSB8fCAoJ2RlZmF1bHQnIGluIG8ud3JhcCkpKSB7CgkJCQl2YXIgd3JhcCA9IChwLnBhdGggaW4gby53cmFwID8gcC5wYXRoIDogJ2RlZmF1bHQnKTsKCQkJCXZhciB0aW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsKCgkJCQkvLyBGT1JNQVQgUkVTUE9OU0UKCQkJCXZhciBiID0gby53cmFwW3dyYXBdKHIsIGhlYWRlcnMsIHApOwoKCQkJCS8vIEhhcyB0aGUgcmVzcG9uc2UgYmVlbiB1dHRlcmx5IG92ZXJ3cml0dGVuPwoJCQkJLy8gVHlwaWNhbGx5IHNlbGYgYXVnbWVudHMgdGhlIGV4aXN0aW5nIG9iamVjdC4uIGJ1dCBmb3IgdGhvc2UgcmFyZSBvY2Nhc3Npb25zCgkJCQlpZiAoYikgewoJCQkJCXIgPSBiOwoJCQkJfQoJCQl9CgoJCQkvLyBJcyB0aGVyZSBhIG5leHRfcGFnZSBkZWZpbmVkIGluIHRoZSByZXNwb25zZT8KCQkJaWYgKHIgJiYgJ3BhZ2luZycgaW4gciAmJiByLnBhZ2luZy5uZXh0KSB7CgoJCQkJLy8gQWRkIHRoZSByZWxhdGl2ZSBwYXRoIGlmIGl0IGlzIG1pc3NpbmcgZnJvbSB0aGUgcGFnaW5nL25leHQgcGF0aAoJCQkJaWYgKHIucGFnaW5nLm5leHRbMF0gPT09ICc/JykgewoJCQkJCXIucGFnaW5nLm5leHQgPSBwLnBhdGggKyByLnBhZ2luZy5uZXh0OwoJCQkJfQoKCQkJCS8vIFRoZSByZWxhdGl2ZSBwYXRoIGhhcyBiZWVuIGRlZmluZWQsIGxldHMgbWFya3VwIHRoZSBoYW5kbGVyIGluIHRoZSBIYXNoRnJhZ21lbnQKCQkJCWVsc2UgewoJCQkJCXIucGFnaW5nLm5leHQgKz0gJyMnICsgcC5wYXRoOwoJCQkJfQoJCQl9CgoJCQkvLyBEaXNwYXRjaCB0byBsaXN0ZW5lcnMKCQkJLy8gRW1pdCBldmVudHMgd2hpY2ggcGVydGFpbiB0byB0aGUgZm9ybWF0dGVkIHJlc3BvbnNlCgkJCWlmICghciB8fCAnZXJyb3InIGluIHIpIHsKCQkJCXByb21pc2UucmVqZWN0KHIpOwoJCQl9CgkJCWVsc2UgewoJCQkJcHJvbWlzZS5mdWxmaWxsKHIpOwoJCQl9CgkJfSk7Cgl9Cn07CgovLyBBUEkgdXRpbGl0aWVzCmhlbGxvLnV0aWxzLmV4dGVuZChoZWxsby51dGlscywgewoKCS8vIE1ha2UgYW4gSFRUUCByZXF1ZXN0CglyZXF1ZXN0OiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoKCQl2YXIgX3RoaXMgPSB0aGlzOwoJCXZhciBlcnJvciA9IF90aGlzLmVycm9yOwoKCQkvLyBUaGlzIGhhcyB0byBnbyB0aHJvdWdoIGEgUE9TVCByZXF1ZXN0CgkJaWYgKCFfdGhpcy5pc0VtcHR5KHAuZGF0YSkgJiYgISgnRmlsZUxpc3QnIGluIHdpbmRvdykgJiYgX3RoaXMuaGFzQmluYXJ5KHAuZGF0YSkpIHsKCgkJCS8vIERpc2FibGUgWEhSIGFuZCBKU09OUAoJCQlwLnhociA9IGZhbHNlOwoJCQlwLmpzb25wID0gZmFsc2U7CgkJfQoKCQkvLyBDaGVjayBpZiB0aGUgYnJvd3NlciBhbmQgc2VydmljZSBzdXBwb3J0IENPUlMKCQl2YXIgY29ycyA9IHRoaXMucmVxdWVzdF9jb3JzKGZ1bmN0aW9uKCkgewoJCQkvLyBJZiBpdCBkb2VzIHRoZW4gcnVuIHRoaXMuLi4KCQkJcmV0dXJuICgocC54aHIgPT09IHVuZGVmaW5lZCkgfHwgKHAueGhyICYmICh0eXBlb2YgKHAueGhyKSAhPT0gJ2Z1bmN0aW9uJyB8fCBwLnhocihwLCBwLnF1ZXJ5KSkpKTsKCQl9KTsKCgkJaWYgKGNvcnMpIHsKCgkJCWZvcm1hdFVybChwLCBmdW5jdGlvbih1cmwpIHsKCgkJCQl2YXIgeCA9IF90aGlzLnhocihwLm1ldGhvZCwgdXJsLCBwLmhlYWRlcnMsIHAuZGF0YSwgY2FsbGJhY2spOwoJCQkJeC5vbnByb2dyZXNzID0gcC5vbnByb2dyZXNzIHx8IG51bGw7CgoJCQkJLy8gV2luZG93cyBQaG9uZSBkb2VzIG5vdCBzdXBwb3J0IHhoci51cGxvYWQsIHNlZSAjNzQKCQkJCS8vIEZlYXR1cmUgZGV0ZWN0CgkJCQlpZiAoeC51cGxvYWQgJiYgcC5vbnVwbG9hZHByb2dyZXNzKSB7CgkJCQkJeC51cGxvYWQub25wcm9ncmVzcyA9IHAub251cGxvYWRwcm9ncmVzczsKCQkJCX0KCgkJCX0pOwoKCQkJcmV0dXJuOwoJCX0KCgkJLy8gQ2xvbmUgdGhlIHF1ZXJ5IG9iamVjdAoJCS8vIEVhY2ggcmVxdWVzdCBtb2RpZmllcyB0aGUgcXVlcnkgb2JqZWN0IGFuZCBuZWVkcyB0byBiZSB0YXJlZCBhZnRlciBlYWNoIG9uZS4KCQl2YXIgX3F1ZXJ5ID0gcC5xdWVyeTsKCgkJcC5xdWVyeSA9IF90aGlzLmNsb25lKHAucXVlcnkpOwoKCQkvLyBBc3NpZ24gYSBuZXcgY2FsbGJhY2tJRAoJCXAuY2FsbGJhY2tJRCA9IF90aGlzLmdsb2JhbEV2ZW50KCk7CgoJCS8vIEpTT05QCgkJaWYgKHAuanNvbnAgIT09IGZhbHNlKSB7CgoJCQkvLyBDbG9uZSB0aGUgcXVlcnkgb2JqZWN0CgkJCXAucXVlcnkuY2FsbGJhY2sgPSBwLmNhbGxiYWNrSUQ7CgoJCQkvLyBJZiB0aGUgSlNPTlAgaXMgYSBmdW5jdGlvbiB0aGVuIHJ1biBpdAoJCQlpZiAodHlwZW9mIChwLmpzb25wKSA9PT0gJ2Z1bmN0aW9uJykgewoJCQkJcC5qc29ucChwLCBwLnF1ZXJ5KTsKCQkJfQoKCQkJLy8gTGV0cyB1c2UgSlNPTlAgaWYgdGhlIG1ldGhvZCBpcyAnZ2V0JwoJCQlpZiAocC5tZXRob2QgPT09ICdnZXQnKSB7CgoJCQkJZm9ybWF0VXJsKHAsIGZ1bmN0aW9uKHVybCkgewoJCQkJCV90aGlzLmpzb25wKHVybCwgY2FsbGJhY2ssIHAuY2FsbGJhY2tJRCwgcC50aW1lb3V0KTsKCQkJCX0pOwoKCQkJCXJldHVybjsKCQkJfQoJCQllbHNlIHsKCQkJCS8vIEl0J3Mgbm90IGNvbXBhdGlibGUgcmVzZXQgcXVlcnkKCQkJCXAucXVlcnkgPSBfcXVlcnk7CgkJCX0KCgkJfQoKCQkvLyBPdGhlcndpc2Ugd2UncmUgb24gdG8gdGhlIG9sZCBzY2hvb2wsIGlmcmFtZSBoYWNrcyBhbmQgSlNPTlAKCQlpZiAocC5mb3JtICE9PSBmYWxzZSkgewoKCQkJLy8gQWRkIHNvbWUgYWRkaXRpb25hbCBxdWVyeSBwYXJhbWV0ZXJzIHRvIHRoZSBVUkwKCQkJLy8gV2UncmUgcHJldHR5IHN0dWZmZWQgaWYgdGhlIGVuZHBvaW50IGRvZXNuJ3QgbGlrZSB0aGVzZQoJCQlwLnF1ZXJ5LnJlZGlyZWN0X3VyaSA9IHAucmVkaXJlY3RfdXJpOwoJCQlwLnF1ZXJ5LnN0YXRlID0gSlNPTi5zdHJpbmdpZnkoe2NhbGxiYWNrOnAuY2FsbGJhY2tJRH0pOwoKCQkJdmFyIG9wdHM7CgoJCQlpZiAodHlwZW9mIChwLmZvcm0pID09PSAnZnVuY3Rpb24nKSB7CgoJCQkJLy8gRm9ybWF0IHRoZSByZXF1ZXN0CgkJCQlvcHRzID0gcC5mb3JtKHAsIHAucXVlcnkpOwoJCQl9CgoJCQlpZiAocC5tZXRob2QgPT09ICdwb3N0JyAmJiBvcHRzICE9PSBmYWxzZSkgewoKCQkJCWZvcm1hdFVybChwLCBmdW5jdGlvbih1cmwpIHsKCQkJCQlfdGhpcy5wb3N0KHVybCwgcC5kYXRhLCBvcHRzLCBjYWxsYmFjaywgcC5jYWxsYmFja0lELCBwLnRpbWVvdXQpOwoJCQkJfSk7CgoJCQkJcmV0dXJuOwoJCQl9CgkJfQoKCQkvLyBOb25lIG9mIHRoZSBtZXRob2RzIHdlcmUgc3VjY2Vzc2Z1bCB0aHJvdyBhbiBlcnJvcgoJCWNhbGxiYWNrKGVycm9yKCdpbnZhbGlkX3JlcXVlc3QnLCAnVGhlcmUgd2FzIG5vIG1lY2hhbmlzbSBmb3IgaGFuZGxpbmcgdGhpcyByZXF1ZXN0JykpOwoKCQlyZXR1cm47CgoJCS8vIEZvcm1hdCBVUkwKCQkvLyBDb25zdHJ1Y3RzIHRoZSByZXF1ZXN0IFVSTCwgb3B0aW9uYWxseSB3cmFwcyB0aGUgVVJMIHRocm91Z2ggYSBjYWxsIHRvIGEgcHJveHkgc2VydmVyCgkJLy8gUmV0dXJucyB0aGUgZm9ybWF0dGVkIFVSTAoJCWZ1bmN0aW9uIGZvcm1hdFVybChwLCBjYWxsYmFjaykgewoKCQkJLy8gQXJlIHdlIHNpZ25pbmcgdGhlIHJlcXVlc3Q/CgkJCXZhciBzaWduOwoKCQkJLy8gT0F1dGgxCgkJCS8vIFJlbW92ZSB0aGUgdG9rZW4gZnJvbSB0aGUgcXVlcnkgYmVmb3JlIHNpZ25pbmcKCQkJaWYgKHAuYXV0aFJlc3BvbnNlICYmIHAuYXV0aFJlc3BvbnNlLm9hdXRoICYmIHBhcnNlSW50KHAuYXV0aFJlc3BvbnNlLm9hdXRoLnZlcnNpb24sIDEwKSA9PT0gMSkgewoKCQkJCS8vIE9BVVRIIFNJR05JTkcgUFJPWFkKCQkJCXNpZ24gPSBwLnF1ZXJ5LmFjY2Vzc190b2tlbjsKCgkJCQkvLyBSZW1vdmUgdGhlIGFjY2Vzc190b2tlbgoJCQkJZGVsZXRlIHAucXVlcnkuYWNjZXNzX3Rva2VuOwoKCQkJCS8vIEVuZm9yZSB1c2Ugb2YgUHJveHkKCQkJCXAucHJveHkgPSB0cnVlOwoJCQl9CgoJCQkvLyBQT1NUIGJvZHkgdG8gcXVlcnlzdHJpbmcKCQkJaWYgKHAuZGF0YSAmJiAocC5tZXRob2QgPT09ICdnZXQnIHx8IHAubWV0aG9kID09PSAnZGVsZXRlJykpIHsKCQkJCS8vIEF0dGFjaCB0aGUgcC5kYXRhIHRvIHRoZSBxdWVyeXN0cmluZy4KCQkJCV90aGlzLmV4dGVuZChwLnF1ZXJ5LCBwLmRhdGEpOwoJCQkJcC5kYXRhID0gbnVsbDsKCQkJfQoKCQkJLy8gQ29uc3RydWN0IHRoZSBwYXRoCgkJCXZhciBwYXRoID0gX3RoaXMucXMocC51cmwsIHAucXVlcnkpOwoKCQkJLy8gUHJveHkgdGhlIHJlcXVlc3QgdGhyb3VnaCBhIHNlcnZlcgoJCQkvLyBVc2VkIGZvciBzaWduaW5nIE9BdXRoMQoJCQkvLyBBbmQgY2lyY3VtdmVudGluZyBzZXJ2aWNlcyB3aXRob3V0IEFjY2Vzcy1Db250cm9sIEhlYWRlcnMKCQkJaWYgKHAucHJveHkpIHsKCQkJCS8vIFVzZSB0aGUgcHJveHkgYXMgYSBwYXRoCgkJCQlwYXRoID0gX3RoaXMucXMocC5vYXV0aF9wcm94eSwgewoJCQkJCXBhdGg6IHBhdGgsCgkJCQkJYWNjZXNzX3Rva2VuOiBzaWduIHx8ICcnLAoKCQkJCQkvLyBUaGlzIHdpbGwgcHJvbXB0IHRoZSByZXF1ZXN0IHRvIGJlIHNpZ25lZCBhcyB0aG91Z2ggaXQgaXMgT0F1dGgxCgkJCQkJdGhlbjogcC5wcm94eV9yZXNwb25zZV90eXBlIHx8IChwLm1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSAnZ2V0JyA/ICdyZWRpcmVjdCcgOiAncHJveHknKSwKCQkJCQltZXRob2Q6IHAubWV0aG9kLnRvTG93ZXJDYXNlKCksCgkJCQkJc3VwcHJlc3NfcmVzcG9uc2VfY29kZXM6IHRydWUKCQkJCX0pOwoJCQl9CgoJCQljYWxsYmFjayhwYXRoKTsKCQl9Cgl9LAoKCS8vIFRlc3Qgd2hldGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cyB0aGUgQ09SUyByZXNwb25zZQoJcmVxdWVzdF9jb3JzOiBmdW5jdGlvbihjYWxsYmFjaykgewoJCXJldHVybiAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKSAmJiBjYWxsYmFjaygpOwoJfSwKCgkvLyBSZXR1cm4gdGhlIHR5cGUgb2YgRE9NIG9iamVjdAoJZG9tSW5zdGFuY2U6IGZ1bmN0aW9uKHR5cGUsIGRhdGEpIHsKCQl2YXIgdGVzdCA9ICdIVE1MJyArICh0eXBlIHx8ICcnKS5yZXBsYWNlKAoJCQkvXlthLXpdLywKCQkJZnVuY3Rpb24obSkgewoJCQkJcmV0dXJuIG0udG9VcHBlckNhc2UoKTsKCQkJfQoKCQkpICsgJ0VsZW1lbnQnOwoKCQlpZiAoIWRhdGEpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYgKHdpbmRvd1t0ZXN0XSkgewoJCQlyZXR1cm4gZGF0YSBpbnN0YW5jZW9mIHdpbmRvd1t0ZXN0XTsKCQl9CgkJZWxzZSBpZiAod2luZG93LkVsZW1lbnQpIHsKCQkJcmV0dXJuIGRhdGEgaW5zdGFuY2VvZiB3aW5kb3cuRWxlbWVudCAmJiAoIXR5cGUgfHwgKGRhdGEudGFnTmFtZSAmJiBkYXRhLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdHlwZSkpOwoJCX0KCQllbHNlIHsKCQkJcmV0dXJuICghKGRhdGEgaW5zdGFuY2VvZiBPYmplY3QgfHwgZGF0YSBpbnN0YW5jZW9mIEFycmF5IHx8IGRhdGEgaW5zdGFuY2VvZiBTdHJpbmcgfHwgZGF0YSBpbnN0YW5jZW9mIE51bWJlcikgJiYgZGF0YS50YWdOYW1lICYmIGRhdGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0eXBlKTsKCQl9Cgl9LAoKCS8vIENyZWF0ZSBhIGNsb25lIG9mIGFuIG9iamVjdAoJY2xvbmU6IGZ1bmN0aW9uKG9iaikgewoJCS8vIERvZXMgbm90IGNsb25lIERPTSBlbGVtZW50cywgbm9yIEJpbmFyeSBkYXRhLCBlLmcuIEJsb2JzLCBGaWxlbGlzdHMKCQlpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiAob2JqKSAhPT0gJ29iamVjdCcgfHwgb2JqIGluc3RhbmNlb2YgRGF0ZSB8fCAnbm9kZU5hbWUnIGluIG9iaiB8fCB0aGlzLmlzQmluYXJ5KG9iaikpIHsKCQkJcmV0dXJuIG9iajsKCQl9CgoJCWlmIChBcnJheS5pc0FycmF5KG9iaikpIHsKCQkJLy8gQ2xvbmUgZWFjaCBpdGVtIGluIHRoZSBhcnJheQoJCQlyZXR1cm4gb2JqLm1hcCh0aGlzLmNsb25lLmJpbmQodGhpcykpOwoJCX0KCgkJLy8gQnV0IGRvZXMgY2xvbmUgZXZlcnl0aGluZyBlbHNlLgoJCXZhciBjbG9uZSA9IHt9OwoJCWZvciAodmFyIHggaW4gb2JqKSB7CgkJCWNsb25lW3hdID0gdGhpcy5jbG9uZShvYmpbeF0pOwoJCX0KCgkJcmV0dXJuIGNsb25lOwoJfSwKCgkvLyBYSFI6IHVzZXMgQ09SUyB0byBtYWtlIHJlcXVlc3RzCgl4aHI6IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBoZWFkZXJzLCBkYXRhLCBjYWxsYmFjaykgewoKCQl2YXIgciA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwoJCXZhciBlcnJvciA9IHRoaXMuZXJyb3I7CgoJCS8vIEJpbmFyeT8KCQl2YXIgYmluYXJ5ID0gZmFsc2U7CgkJaWYgKG1ldGhvZCA9PT0gJ2Jsb2InKSB7CgkJCWJpbmFyeSA9IG1ldGhvZDsKCQkJbWV0aG9kID0gJ0dFVCc7CgkJfQoKCQltZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKTsKCgkJLy8gWGhyLnJlc3BvbnNlVHlwZSAnanNvbicgaXMgbm90IHN1cHBvcnRlZCBpbiBhbnkgb2YgdGhlIHZlbmRvcnMgeWV0LgoJCXIub25sb2FkID0gZnVuY3Rpb24oZSkgewoJCQl2YXIganNvbiA9IHIucmVzcG9uc2U7CgkJCXRyeSB7CgkJCQlqc29uID0gSlNPTi5wYXJzZShyLnJlc3BvbnNlVGV4dCk7CgkJCX0KCQkJY2F0Y2ggKF9lKSB7CgkJCQlpZiAoci5zdGF0dXMgPT09IDQwMSkgewoJCQkJCWpzb24gPSBlcnJvcignYWNjZXNzX2RlbmllZCcsIHIuc3RhdHVzVGV4dCk7CgkJCQl9CgkJCX0KCgkJCXZhciBoZWFkZXJzID0gaGVhZGVyc1RvSlNPTihyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTsKCQkJaGVhZGVycy5zdGF0dXNDb2RlID0gci5zdGF0dXM7CgoJCQljYWxsYmFjayhqc29uIHx8IChtZXRob2QgPT09ICdHRVQnID8gZXJyb3IoJ2VtcHR5X3Jlc3BvbnNlJywgJ0NvdWxkIG5vdCBnZXQgcmVzb3VyY2UnKSA6IHt9KSwgaGVhZGVycyk7CgkJfTsKCgkJci5vbmVycm9yID0gZnVuY3Rpb24oZSkgewoJCQl2YXIganNvbiA9IHIucmVzcG9uc2VUZXh0OwoJCQl0cnkgewoJCQkJanNvbiA9IEpTT04ucGFyc2Uoci5yZXNwb25zZVRleHQpOwoJCQl9CgkJCWNhdGNoIChfZSkge30KCgkJCWNhbGxiYWNrKGpzb24gfHwgZXJyb3IoJ2FjY2Vzc19kZW5pZWQnLCAnQ291bGQgbm90IGdldCByZXNvdXJjZScpKTsKCQl9OwoKCQl2YXIgeDsKCgkJLy8gU2hvdWxkIHdlIGFkZCB0aGUgcXVlcnkgdG8gdGhlIFVSTD8KCQlpZiAobWV0aG9kID09PSAnR0VUJyB8fCBtZXRob2QgPT09ICdERUxFVEUnKSB7CgkJCWRhdGEgPSBudWxsOwoJCX0KCQllbHNlIGlmIChkYXRhICYmIHR5cGVvZiAoZGF0YSkgIT09ICdzdHJpbmcnICYmICEoZGF0YSBpbnN0YW5jZW9mIEZvcm1EYXRhKSAmJiAhKGRhdGEgaW5zdGFuY2VvZiBGaWxlKSAmJiAhKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSkgewoJCQkvLyBMb29wIHRocm91Z2ggYW5kIGFkZCBmb3JtRGF0YQoJCQl2YXIgZiA9IG5ldyBGb3JtRGF0YSgpOwoJCQlmb3IgKHggaW4gZGF0YSkgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoeCkpIHsKCQkJCWlmIChkYXRhW3hdIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkgewoJCQkJCWlmICgnZmlsZXMnIGluIGRhdGFbeF0gJiYgZGF0YVt4XS5maWxlcy5sZW5ndGggPiAwKSB7CgkJCQkJCWYuYXBwZW5kKHgsIGRhdGFbeF0uZmlsZXNbMF0pOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UgaWYgKGRhdGFbeF0gaW5zdGFuY2VvZiBCbG9iKSB7CgkJCQkJZi5hcHBlbmQoeCwgZGF0YVt4XSwgZGF0YS5uYW1lKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCWYuYXBwZW5kKHgsIGRhdGFbeF0pOwoJCQkJfQoJCQl9CgoJCQlkYXRhID0gZjsKCQl9CgoJCS8vIE9wZW4gdGhlIHBhdGgsIGFzeW5jCgkJci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTsKCgkJaWYgKGJpbmFyeSkgewoJCQlpZiAoJ3Jlc3BvbnNlVHlwZScgaW4gcikgewoJCQkJci5yZXNwb25zZVR5cGUgPSBiaW5hcnk7CgkJCX0KCQkJZWxzZSB7CgkJCQlyLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWQnKTsKCQkJfQoJCX0KCgkJLy8gU2V0IGFueSBiZXNwb2tlIGhlYWRlcnMKCQlpZiAoaGVhZGVycykgewoJCQlmb3IgKHggaW4gaGVhZGVycykgewoJCQkJci5zZXRSZXF1ZXN0SGVhZGVyKHgsIGhlYWRlcnNbeF0pOwoJCQl9CgkJfQoKCQlyLnNlbmQoZGF0YSk7CgoJCXJldHVybiByOwoKCQkvLyBIZWFkZXJzIGFyZSByZXR1cm5lZCBhcyBhIHN0cmluZwoJCWZ1bmN0aW9uIGhlYWRlcnNUb0pTT04ocykgewoJCQl2YXIgciA9IHt9OwoJCQl2YXIgcmVnID0gLyhbYS16XC1dKyk6XHM/KC4qKTs/L2dpOwoJCQl2YXIgbTsKCQkJd2hpbGUgKChtID0gcmVnLmV4ZWMocykpKSB7CgkJCQlyW21bMV1dID0gbVsyXTsKCQkJfQoKCQkJcmV0dXJuIHI7CgkJfQoJfSwKCgkvLyBKU09OUAoJLy8gSW5qZWN0cyBhIHNjcmlwdCB0YWcgaW50byB0aGUgRE9NIHRvIGJlIGV4ZWN1dGVkIGFuZCBhcHBlbmRzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdGhlIHdpbmRvdyBvYmplY3QKCS8vIEBwYXJhbSBzdHJpbmcvZnVuY3Rpb24gcGF0aEZ1bmMgZWl0aGVyIGEgc3RyaW5nIG9mIHRoZSBVUkwgb3IgYSBjYWxsYmFjayBmdW5jdGlvbiBwYXRoRnVuYyhxdWVyeXN0cmluZ2hhc2gsIGNvbnRpbnVlRnVuYyk7CgkvLyBAcGFyYW0gZnVuY3Rpb24gY2FsbGJhY2sgYSBmdW5jdGlvbiB0byBjYWxsIG9uIGNvbXBsZXRpb247Cglqc29ucDogZnVuY3Rpb24odXJsLCBjYWxsYmFjaywgY2FsbGJhY2tJRCwgdGltZW91dCkgewoKCQl2YXIgX3RoaXMgPSB0aGlzOwoJCXZhciBlcnJvciA9IF90aGlzLmVycm9yOwoKCQkvLyBDaGFuZ2UgdGhlIG5hbWUgb2YgdGhlIGNhbGxiYWNrCgkJdmFyIGJvb2wgPSAwOwoJCXZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTsKCQl2YXIgb3BlcmFGaXg7CgkJdmFyIHJlc3VsdCA9IGVycm9yKCdzZXJ2ZXJfZXJyb3InLCAnc2VydmVyX2Vycm9yJyk7CgkJdmFyIGNiID0gZnVuY3Rpb24oKSB7CgkJCWlmICghKGJvb2wrKykpIHsKCQkJCXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJCWNhbGxiYWNrKHJlc3VsdCk7CgkJCQkJaGVhZC5yZW1vdmVDaGlsZChzY3JpcHQpOwoJCQkJfSwgMCk7CgkJCX0KCgkJfTsKCgkJLy8gQWRkIGNhbGxiYWNrIHRvIHRoZSB3aW5kb3cgb2JqZWN0CgkJY2FsbGJhY2tJRCA9IF90aGlzLmdsb2JhbEV2ZW50KGZ1bmN0aW9uKGpzb24pIHsKCQkJcmVzdWx0ID0ganNvbjsKCQkJcmV0dXJuIHRydWU7CgoJCQkvLyBNYXJrIGNhbGxiYWNrIGFzIGRvbmUKCQl9LCBjYWxsYmFja0lEKTsKCgkJLy8gVGhlIFVSTCBpcyBhIGZ1bmN0aW9uIGZvciBzb21lIGNhc2VzIGFuZCBhcyBzdWNoCgkJLy8gRGV0ZXJtaW5lIGl0cyB2YWx1ZSB3aXRoIGEgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgbmV3IHBhcmFtZXRlcnMgb2YgdGhpcyBmdW5jdGlvbi4KCQl1cmwgPSB1cmwucmVwbGFjZShuZXcgUmVnRXhwKCc9XFw/KCZ8JCknKSwgJz0nICsgY2FsbGJhY2tJRCArICckMScpOwoKCQkvLyBCdWlsZCBzY3JpcHQgdGFnCgkJdmFyIHNjcmlwdCA9IF90aGlzLmFwcGVuZCgnc2NyaXB0JywgewoJCQlpZDogY2FsbGJhY2tJRCwKCQkJbmFtZTogY2FsbGJhY2tJRCwKCQkJc3JjOiB1cmwsCgkJCWFzeW5jOiB0cnVlLAoJCQlvbmxvYWQ6IGNiLAoJCQlvbmVycm9yOiBjYiwKCQkJb25yZWFkeXN0YXRlY2hhbmdlOiBmdW5jdGlvbigpIHsKCQkJCWlmICgvbG9hZGVkfGNvbXBsZXRlL2kudGVzdCh0aGlzLnJlYWR5U3RhdGUpKSB7CgkJCQkJY2IoKTsKCQkJCX0KCQkJfQoJCX0pOwoKCQkvLyBPcGVyYSBmaXggZXJyb3IKCQkvLyBQcm9ibGVtOiBJZiBhbiBlcnJvciBvY2N1cnMgd2l0aCBzY3JpcHQgbG9hZGluZyBPcGVyYSBmYWlscyB0byB0cmlnZ2VyIHRoZSBzY3JpcHQub25lcnJvciBoYW5kbGVyIHdlIHNwZWNpZmllZAoJCS8vCgkJLy8gRml4OgoJCS8vIEJ5IHNldHRpbmcgdGhlIHJlcXVlc3QgdG8gc3luY2hyb25vdXMgd2UgY2FuIHRyaWdnZXIgdGhlIGVycm9yIGhhbmRsZXIgd2hlbiBhbGwgZWxzZSBmYWlscy4KCQkvLyBUaGlzIGFjdGlvbiB3aWxsIGJlIGlnbm9yZWQgaWYgd2UndmUgYWxyZWFkeSBjYWxsZWQgdGhlIGNhbGxiYWNrIGhhbmRsZXIgImNiIiB3aXRoIGEgc3VjY2Vzc2Z1bCBvbmxvYWQgZXZlbnQKCQlpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdvcGVyYScpID4gLTEpIHsKCQkJb3BlcmFGaXggPSBfdGhpcy5hcHBlbmQoJ3NjcmlwdCcsIHsKCQkJCXRleHQ6ICdkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcJycgKyBjYWxsYmFja0lEICsgJ1wnKS5vbmVycm9yKCk7JwoJCQl9KTsKCQkJc2NyaXB0LmFzeW5jID0gZmFsc2U7CgkJfQoKCQkvLyBBZGQgdGltZW91dAoJCWlmICh0aW1lb3V0KSB7CgkJCXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJcmVzdWx0ID0gZXJyb3IoJ3RpbWVvdXQnLCAndGltZW91dCcpOwoJCQkJY2IoKTsKCQkJfSwgdGltZW91dCk7CgkJfQoKCQkvLyBUT0RPOiBhZGQgZml4IGZvciBJRSwKCQkvLyBIb3dldmVyOiB1bmFibGUgcmVjcmVhdGUgdGhlIGJ1ZyBvZiBmaXJpbmcgb2ZmIHRoZSBvbnJlYWR5c3RhdGVjaGFuZ2UgYmVmb3JlIHRoZSBzY3JpcHQgY29udGVudCBoYXMgYmVlbiBleGVjdXRlZCBhbmQgdGhlIHZhbHVlIG9mICJyZXN1bHQiIGhhcyBiZWVuIGRlZmluZWQuCgkJLy8gSW5qZWN0IHNjcmlwdCB0YWcgaW50byB0aGUgaGVhZCBlbGVtZW50CgkJaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpOwoKCQkvLyBBcHBlbmQgT3BlcmEgRml4IHRvIHJ1biBhZnRlciBvdXIgc2NyaXB0CgkJaWYgKG9wZXJhRml4KSB7CgkJCWhlYWQuYXBwZW5kQ2hpbGQob3BlcmFGaXgpOwoJCX0KCX0sCgoJLy8gUG9zdAoJLy8gU2VuZCBpbmZvcm1hdGlvbiB0byBhIHJlbW90ZSBsb2NhdGlvbiB1c2luZyB0aGUgcG9zdCBtZWNoYW5pc20KCS8vIEBwYXJhbSBzdHJpbmcgdXJpIHBhdGgKCS8vIEBwYXJhbSBvYmplY3QgZGF0YSwga2V5IHZhbHVlIGRhdGEgdG8gc2VuZAoJLy8gQHBhcmFtIGZ1bmN0aW9uIGNhbGxiYWNrLCBmdW5jdGlvbiB0byBleGVjdXRlIGluIHJlc3BvbnNlCglwb3N0OiBmdW5jdGlvbih1cmwsIGRhdGEsIG9wdGlvbnMsIGNhbGxiYWNrLCBjYWxsYmFja0lELCB0aW1lb3V0KSB7CgoJCXZhciBfdGhpcyA9IHRoaXM7CgkJdmFyIGVycm9yID0gX3RoaXMuZXJyb3I7CgkJdmFyIGRvYyA9IGRvY3VtZW50OwoKCQkvLyBUaGlzIGhhY2sgbmVlZHMgYSBmb3JtCgkJdmFyIGZvcm0gPSBudWxsOwoJCXZhciByZWVuYWJsZUFmdGVyU3VibWl0ID0gW107CgkJdmFyIG5ld2Zvcm07CgkJdmFyIGkgPSAwOwoJCXZhciB4ID0gbnVsbDsKCQl2YXIgYm9vbCA9IDA7CgkJdmFyIGNiID0gZnVuY3Rpb24ocikgewoJCQlpZiAoIShib29sKyspKSB7CgkJCQljYWxsYmFjayhyKTsKCQkJfQoJCX07CgoJCS8vIFdoYXQgaXMgdGhlIG5hbWUgb2YgdGhlIGNhbGxiYWNrIHRvIGNvbnRhaW4KCQkvLyBXZSdsbCBhbHNvIHVzZSB0aGlzIHRvIG5hbWUgdGhlIGlmcmFtZQoJCV90aGlzLmdsb2JhbEV2ZW50KGNiLCBjYWxsYmFja0lEKTsKCgkJLy8gQnVpbGQgdGhlIGlmcmFtZSB3aW5kb3cKCQl2YXIgd2luOwoJCXRyeSB7CgkJCS8vIElFNyBoYWNrLCBvbmx5IGxldHMgdXMgZGVmaW5lIHRoZSBuYW1lIGhlcmUsIG5vdCBsYXRlci4KCQkJd2luID0gZG9jLmNyZWF0ZUVsZW1lbnQoJzxpZnJhbWUgbmFtZT0iJyArIGNhbGxiYWNrSUQgKyAnIj4nKTsKCQl9CgkJY2F0Y2ggKGUpIHsKCQkJd2luID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwoJCX0KCgkJd2luLm5hbWUgPSBjYWxsYmFja0lEOwoJCXdpbi5pZCA9IGNhbGxiYWNrSUQ7CgkJd2luLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgoJCS8vIE92ZXJyaWRlIGNhbGxiYWNrIG1lY2hhbmlzbS4gVHJpZ2dnZXIgYSByZXNwb25zZSBvbmxvYWQvb25lcnJvcgoJCWlmIChvcHRpb25zICYmIG9wdGlvbnMuY2FsbGJhY2tvbmxvYWQpIHsKCQkJLy8gT25sb2FkIGlzIGJlaW5nIGZpcmVkIHR3aWNlCgkJCXdpbi5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJCWNiKHsKCQkJCQlyZXNwb25zZTogJ3Bvc3RlZCcsCgkJCQkJbWVzc2FnZTogJ0NvbnRlbnQgd2FzIHBvc3RlZCcKCQkJCX0pOwoJCQl9OwoJCX0KCgkJaWYgKHRpbWVvdXQpIHsKCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCWNiKGVycm9yKCd0aW1lb3V0JywgJ1RoZSBwb3N0IG9wZXJhdGlvbiB0aW1lZCBvdXQnKSk7CgkJCX0sIHRpbWVvdXQpOwoJCX0KCgkJZG9jLmJvZHkuYXBwZW5kQ2hpbGQod2luKTsKCgkJLy8gSWYgd2UgYXJlIGp1c3QgcG9zdGluZyBhIHNpbmdsZSBpdGVtCgkJaWYgKF90aGlzLmRvbUluc3RhbmNlKCdmb3JtJywgZGF0YSkpIHsKCQkJLy8gR2V0IHRoZSBwYXJlbnQgZm9ybQoJCQlmb3JtID0gZGF0YS5mb3JtOwoKCQkJLy8gTG9vcCB0aHJvdWdoIGFuZCBkaXNhYmxlIGFsbCBvZiBpdHMgc2libGluZ3MKCQkJZm9yIChpID0gMDsgaSA8IGZvcm0uZWxlbWVudHMubGVuZ3RoOyBpKyspIHsKCQkJCWlmIChmb3JtLmVsZW1lbnRzW2ldICE9PSBkYXRhKSB7CgkJCQkJZm9ybS5lbGVtZW50c1tpXS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7CgkJCQl9CgkJCX0KCgkJCS8vIE1vdmUgdGhlIGZvY3VzIHRvIHRoZSBmb3JtCgkJCWRhdGEgPSBmb3JtOwoJCX0KCgkJLy8gUG9zdGluZyBhIGZvcm0KCQlpZiAoX3RoaXMuZG9tSW5zdGFuY2UoJ2Zvcm0nLCBkYXRhKSkgewoJCQkvLyBUaGlzIGlzIGEgZm9ybSBlbGVtZW50CgkJCWZvcm0gPSBkYXRhOwoKCQkJLy8gRG9lcyB0aGlzIGZvcm0gbmVlZCB0byBiZSBhIG11bHRpcGFydCBmb3JtPwoJCQlmb3IgKGkgPSAwOyBpIDwgZm9ybS5lbGVtZW50cy5sZW5ndGg7IGkrKykgewoJCQkJaWYgKCFmb3JtLmVsZW1lbnRzW2ldLmRpc2FibGVkICYmIGZvcm0uZWxlbWVudHNbaV0udHlwZSA9PT0gJ2ZpbGUnKSB7CgkJCQkJZm9ybS5lbmNvZGluZyA9IGZvcm0uZW5jdHlwZSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJzsKCQkJCQlmb3JtLmVsZW1lbnRzW2ldLnNldEF0dHJpYnV0ZSgnbmFtZScsICdmaWxlJyk7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSB7CgkJCS8vIEl0cyBub3QgYSBmb3JtIGVsZW1lbnQsCgkJCS8vIFRoZXJlZm9yZSBpdCBtdXN0IGJlIGEgSlNPTiBvYmplY3Qgb2YgS2V5PT5WYWx1ZSBvciBLZXk9PkVsZW1lbnQKCQkJLy8gSWYgYW55b25lIG9mIHRob3NlIHZhbHVlcyBhcmUgYSBpbnB1dCB0eXBlPWZpbGUgd2Ugc2hhbGwgc2hhbGwgaW5zZXJ0IGl0cyBzaWJsaW5ncyBpbnRvIHRoZSBmb3JtIGZvciB3aGljaCBpdCBiZWxvbmdzLgoJCQlmb3IgKHggaW4gZGF0YSkgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoeCkpIHsKCQkJCS8vIElzIHRoaXMgYW4gaW5wdXQgRWxlbWVudD8KCQkJCWlmIChfdGhpcy5kb21JbnN0YW5jZSgnaW5wdXQnLCBkYXRhW3hdKSAmJiBkYXRhW3hdLnR5cGUgPT09ICdmaWxlJykgewoJCQkJCWZvcm0gPSBkYXRhW3hdLmZvcm07CgkJCQkJZm9ybS5lbmNvZGluZyA9IGZvcm0uZW5jdHlwZSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJzsKCQkJCX0KCQkJfQoKCQkJLy8gRG8gSWYgdGhlcmUgaXMgbm8gZGVmaW5lZCBmb3JtIGVsZW1lbnQsIGxldHMgY3JlYXRlIG9uZS4KCQkJaWYgKCFmb3JtKSB7CgkJCQkvLyBCdWlsZCBmb3JtCgkJCQlmb3JtID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTsKCQkJCWRvYy5ib2R5LmFwcGVuZENoaWxkKGZvcm0pOwoJCQkJbmV3Zm9ybSA9IGZvcm07CgkJCX0KCgkJCXZhciBpbnB1dDsKCgkJCS8vIEFkZCBlbGVtZW50cyB0byB0aGUgZm9ybSBpZiB0aGV5IGRvbnQgZXhpc3QKCQkJZm9yICh4IGluIGRhdGEpIGlmIChkYXRhLmhhc093blByb3BlcnR5KHgpKSB7CgoJCQkJLy8gSXMgdGhpcyBhbiBlbGVtZW50PwoJCQkJdmFyIGVsID0gKF90aGlzLmRvbUluc3RhbmNlKCdpbnB1dCcsIGRhdGFbeF0pIHx8IF90aGlzLmRvbUluc3RhbmNlKCd0ZXh0QXJlYScsIGRhdGFbeF0pIHx8IF90aGlzLmRvbUluc3RhbmNlKCdzZWxlY3QnLCBkYXRhW3hdKSk7CgoJCQkJLy8gSXMgdGhpcyBub3QgYW4gaW5wdXQgZWxlbWVudCwgb3Igb25lIHRoYXQgZXhpc3RzIG91dHNpZGUgdGhlIGZvcm0uCgkJCQlpZiAoIWVsIHx8IGRhdGFbeF0uZm9ybSAhPT0gZm9ybSkgewoKCQkJCQkvLyBEb2VzIGFuIGVsZW1lbnQgaGF2ZSB0aGUgc2FtZSBuYW1lPwoJCQkJCXZhciBpbnB1dHMgPSBmb3JtLmVsZW1lbnRzW3hdOwoJCQkJCWlmIChpbnB1dCkgewoJCQkJCQkvLyBSZW1vdmUgaXQuCgkJCQkJCWlmICghKGlucHV0cyBpbnN0YW5jZW9mIE5vZGVMaXN0KSkgewoJCQkJCQkJaW5wdXRzID0gW2lucHV0c107CgkJCQkJCX0KCgkJCQkJCWZvciAoaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHsKCQkJCQkJCWlucHV0c1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlucHV0c1tpXSk7CgkJCQkJCX0KCgkJCQkJfQoKCQkJCQkvLyBDcmVhdGUgYW4gaW5wdXQgZWxlbWVudAoJCQkJCWlucHV0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2hpZGRlbicpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsIHgpOwoKCQkJCQkvLyBEb2VzIGl0IGhhdmUgYSB2YWx1ZSBhdHRyaWJ1dGU/CgkJCQkJaWYgKGVsKSB7CgkJCQkJCWlucHV0LnZhbHVlID0gZGF0YVt4XS52YWx1ZTsKCQkJCQl9CgkJCQkJZWxzZSBpZiAoX3RoaXMuZG9tSW5zdGFuY2UobnVsbCwgZGF0YVt4XSkpIHsKCQkJCQkJaW5wdXQudmFsdWUgPSBkYXRhW3hdLmlubmVySFRNTCB8fCBkYXRhW3hdLmlubmVyVGV4dDsKCQkJCQl9CgkJCQkJZWxzZSB7CgkJCQkJCWlucHV0LnZhbHVlID0gZGF0YVt4XTsKCQkJCQl9CgoJCQkJCWZvcm0uYXBwZW5kQ2hpbGQoaW5wdXQpOwoJCQkJfQoKCQkJCS8vIEl0IGlzIGFuIGVsZW1lbnQsIHdoaWNoIGV4aXN0cyB3aXRoaW4gdGhlIGZvcm0sIGJ1dCB0aGUgbmFtZSBpcyB3cm9uZwoJCQkJZWxzZSBpZiAoZWwgJiYgZGF0YVt4XS5uYW1lICE9PSB4KSB7CgkJCQkJZGF0YVt4XS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCB4KTsKCQkJCQlkYXRhW3hdLm5hbWUgPSB4OwoJCQkJfQoJCQl9CgoJCQkvLyBEaXNhYmxlIGVsZW1lbnRzIGZyb20gd2l0aGluIHRoZSBmb3JtIGlmIHRoZXkgd2VyZW4ndCBzcGVjaWZpZWQKCQkJZm9yIChpID0gMDsgaSA8IGZvcm0uZWxlbWVudHMubGVuZ3RoOyBpKyspIHsKCgkJCQlpbnB1dCA9IGZvcm0uZWxlbWVudHNbaV07CgoJCQkJLy8gRG9lcyB0aGUgc2FtZSBuYW1lIGFuZCB2YWx1ZSBleGlzdCBpbiB0aGUgcGFyZW50CgkJCQlpZiAoIShpbnB1dC5uYW1lIGluIGRhdGEpICYmIGlucHV0LmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSAhPT0gdHJ1ZSkgewoJCQkJCS8vIERpc2FibGUKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7CgoJCQkJCS8vIEFkZCByZS1lbmFibGUgdG8gY2FsbGJhY2sKCQkJCQlyZWVuYWJsZUFmdGVyU3VibWl0LnB1c2goaW5wdXQpOwoJCQkJfQoJCQl9CgkJfQoKCQkvLyBTZXQgdGhlIHRhcmdldCBvZiB0aGUgZm9ybQoJCWZvcm0uc2V0QXR0cmlidXRlKCdtZXRob2QnLCAnUE9TVCcpOwoJCWZvcm0uc2V0QXR0cmlidXRlKCd0YXJnZXQnLCBjYWxsYmFja0lEKTsKCQlmb3JtLnRhcmdldCA9IGNhbGxiYWNrSUQ7CgoJCS8vIFVwZGF0ZSB0aGUgZm9ybSBVUkwKCQlmb3JtLnNldEF0dHJpYnV0ZSgnYWN0aW9uJywgdXJsKTsKCgkJLy8gU3VibWl0IHRoZSBmb3JtCgkJLy8gU29tZSByZWFzb24gdGhpcyBuZWVkcyB0byBiZSBvZmZzZXQgZnJvbSB0aGUgY3VycmVudCB3aW5kb3cgZXhlY3V0aW9uCgkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJZm9ybS5zdWJtaXQoKTsKCgkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCQl0cnkgewoJCQkJCS8vIFJlbW92ZSB0aGUgaWZyYW1lIGZyb20gdGhlIHBhZ2UuCgkJCQkJLy93aW4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh3aW4pOwoJCQkJCS8vIFJlbW92ZSB0aGUgZm9ybQoJCQkJCWlmIChuZXdmb3JtKSB7CgkJCQkJCW5ld2Zvcm0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuZXdmb3JtKTsKCQkJCQl9CgkJCQl9CgkJCQljYXRjaCAoZSkgewoJCQkJCXRyeSB7CgkJCQkJCWNvbnNvbGUuZXJyb3IoJ0hlbGxvSlM6IGNvdWxkIG5vdCByZW1vdmUgaWZyYW1lJyk7CgkJCQkJfQoJCQkJCWNhdGNoIChlZSkge30KCQkJCX0KCgkJCQkvLyBSZWVuYWJsZSB0aGUgZGlzYWJsZWQgZm9ybQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCByZWVuYWJsZUFmdGVyU3VibWl0Lmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKHJlZW5hYmxlQWZ0ZXJTdWJtaXRbaV0pIHsKCQkJCQkJcmVlbmFibGVBZnRlclN1Ym1pdFtpXS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgZmFsc2UpOwoJCQkJCQlyZWVuYWJsZUFmdGVyU3VibWl0W2ldLmRpc2FibGVkID0gZmFsc2U7CgkJCQkJfQoJCQkJfQoJCQl9LCAwKTsKCQl9LCAxMDApOwoJfSwKCgkvLyBTb21lIG9mIHRoZSBwcm92aWRlcnMgcmVxdWlyZSB0aGF0IG9ubHkgbXVsdGlwYXJ0IGlzIHVzZWQgd2l0aCBub24tYmluYXJ5IGZvcm1zLgoJLy8gVGhpcyBmdW5jdGlvbiBjaGVja3Mgd2hldGhlciB0aGUgZm9ybSBjb250YWlucyBiaW5hcnkgZGF0YQoJaGFzQmluYXJ5OiBmdW5jdGlvbihkYXRhKSB7CgkJZm9yICh2YXIgeCBpbiBkYXRhKSBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSh4KSkgewoJCQlpZiAodGhpcy5pc0JpbmFyeShkYXRhW3hdKSkgewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9CgoJCXJldHVybiBmYWxzZTsKCX0sCgoJLy8gRGV0ZXJtaW5lcyBpZiBhIHZhcmlhYmxlIEVpdGhlciBJcyBvciBsaWtlIGEgRm9ybUlucHV0IGhhcyB0aGUgdmFsdWUgb2YgYSBCbG9iCgoJaXNCaW5hcnk6IGZ1bmN0aW9uKGRhdGEpIHsKCgkJcmV0dXJuIGRhdGEgaW5zdGFuY2VvZiBPYmplY3QgJiYgKAoJCSh0aGlzLmRvbUluc3RhbmNlKCdpbnB1dCcsIGRhdGEpICYmIGRhdGEudHlwZSA9PT0gJ2ZpbGUnKSB8fAoJCSgnRmlsZUxpc3QnIGluIHdpbmRvdyAmJiBkYXRhIGluc3RhbmNlb2Ygd2luZG93LkZpbGVMaXN0KSB8fAoJCSgnRmlsZScgaW4gd2luZG93ICYmIGRhdGEgaW5zdGFuY2VvZiB3aW5kb3cuRmlsZSkgfHwKCQkoJ0Jsb2InIGluIHdpbmRvdyAmJiBkYXRhIGluc3RhbmNlb2Ygd2luZG93LkJsb2IpKTsKCgl9LAoKCS8vIENvbnZlcnQgRGF0YS1VUkkgdG8gQmxvYiBzdHJpbmcKCXRvQmxvYjogZnVuY3Rpb24oZGF0YVVSSSkgewoJCXZhciByZWcgPSAvXmRhdGFcOihbXjssXSsoXDtjaGFyc2V0PVteOyxdKyk/KShcO2Jhc2U2NCk/LC9pOwoJCXZhciBtID0gZGF0YVVSSS5tYXRjaChyZWcpOwoJCWlmICghbSkgewoJCQlyZXR1cm4gZGF0YVVSSTsKCQl9CgoJCXZhciBiaW5hcnkgPSBhdG9iKGRhdGFVUkkucmVwbGFjZShyZWcsICcnKSk7CgkJdmFyIGFycmF5ID0gW107CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5hcnkubGVuZ3RoOyBpKyspIHsKCQkJYXJyYXkucHVzaChiaW5hcnkuY2hhckNvZGVBdChpKSk7CgkJfQoKCQlyZXR1cm4gbmV3IEJsb2IoW25ldyBVaW50OEFycmF5KGFycmF5KV0sIHt0eXBlOiBtWzFdfSk7Cgl9Cgp9KTsKCi8vIEVYVFJBOiBDb252ZXJ0IEZvcm1FbGVtZW50IHRvIEpTT04gZm9yIFBPU1RpbmcKLy8gV3JhcHBlcnMgdG8gYWRkIGFkZGl0aW9uYWwgZnVuY3Rpb25hbGl0eSB0byBleGlzdGluZyBmdW5jdGlvbnMKKGZ1bmN0aW9uKGhlbGxvKSB7CgoJLy8gQ29weSBvcmlnaW5hbCBmdW5jdGlvbgoJdmFyIGFwaSA9IGhlbGxvLmFwaTsKCXZhciB1dGlscyA9IGhlbGxvLnV0aWxzOwoKCXV0aWxzLmV4dGVuZCh1dGlscywgewoKCQkvLyBEYXRhVG9KU09OCgkJLy8gVGhpcyB0YWtlcyBhIEZvcm1FbGVtZW50fE5vZGVMaXN0fElucHV0RWxlbWVudHxNaXhlZE9iamVjdHMgYW5kIGNvbnZlcnMgdGhlIGRhdGEgb2JqZWN0IHRvIEpTT04uCgkJZGF0YVRvSlNPTjogZnVuY3Rpb24ocCkgewoKCQkJdmFyIF90aGlzID0gdGhpczsKCQkJdmFyIHcgPSB3aW5kb3c7CgkJCXZhciBkYXRhID0gcC5kYXRhOwoKCQkJLy8gSXMgZGF0YSBhIGZvcm0gb2JqZWN0CgkJCWlmIChfdGhpcy5kb21JbnN0YW5jZSgnZm9ybScsIGRhdGEpKSB7CgkJCQlkYXRhID0gX3RoaXMubm9kZUxpc3RUb0pTT04oZGF0YS5lbGVtZW50cyk7CgkJCX0KCQkJZWxzZSBpZiAoJ05vZGVMaXN0JyBpbiB3ICYmIGRhdGEgaW5zdGFuY2VvZiBOb2RlTGlzdCkgewoJCQkJZGF0YSA9IF90aGlzLm5vZGVMaXN0VG9KU09OKGRhdGEpOwoJCQl9CgkJCWVsc2UgaWYgKF90aGlzLmRvbUluc3RhbmNlKCdpbnB1dCcsIGRhdGEpKSB7CgkJCQlkYXRhID0gX3RoaXMubm9kZUxpc3RUb0pTT04oW2RhdGFdKTsKCQkJfQoKCQkJLy8gSXMgZGF0YSBhIGJsb2IsIEZpbGUsIEZpbGVMaXN0PwoJCQlpZiAoKCdGaWxlJyBpbiB3ICYmIGRhdGEgaW5zdGFuY2VvZiB3LkZpbGUpIHx8CgkJCQkoJ0Jsb2InIGluIHcgJiYgZGF0YSBpbnN0YW5jZW9mIHcuQmxvYikgfHwKCQkJCSgnRmlsZUxpc3QnIGluIHcgJiYgZGF0YSBpbnN0YW5jZW9mIHcuRmlsZUxpc3QpKSB7CgkJCQlkYXRhID0ge2ZpbGU6IGRhdGF9OwoJCQl9CgoJCQkvLyBMb29wIHRocm91Z2ggZGF0YSBpZiBpdCdzIG5vdCBmb3JtIGRhdGEgaXQgbXVzdCBub3cgYmUgYSBKU09OIG9iamVjdAoJCQlpZiAoISgnRm9ybURhdGEnIGluIHcgJiYgZGF0YSBpbnN0YW5jZW9mIHcuRm9ybURhdGEpKSB7CgoJCQkJZm9yICh2YXIgeCBpbiBkYXRhKSBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSh4KSkgewoKCQkJCQlpZiAoJ0ZpbGVMaXN0JyBpbiB3ICYmIGRhdGFbeF0gaW5zdGFuY2VvZiB3LkZpbGVMaXN0KSB7CgkJCQkJCWlmIChkYXRhW3hdLmxlbmd0aCA9PT0gMSkgewoJCQkJCQkJZGF0YVt4XSA9IGRhdGFbeF1bMF07CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZSBpZiAoX3RoaXMuZG9tSW5zdGFuY2UoJ2lucHV0JywgZGF0YVt4XSkgJiYgZGF0YVt4XS50eXBlID09PSAnZmlsZScpIHsKCQkJCQkJY29udGludWU7CgkJCQkJfQoJCQkJCWVsc2UgaWYgKF90aGlzLmRvbUluc3RhbmNlKCdpbnB1dCcsIGRhdGFbeF0pIHx8CgkJCQkJCV90aGlzLmRvbUluc3RhbmNlKCdzZWxlY3QnLCBkYXRhW3hdKSB8fAoJCQkJCQlfdGhpcy5kb21JbnN0YW5jZSgndGV4dEFyZWEnLCBkYXRhW3hdKSkgewoJCQkJCQlkYXRhW3hdID0gZGF0YVt4XS52YWx1ZTsKCQkJCQl9CgkJCQkJZWxzZSBpZiAoX3RoaXMuZG9tSW5zdGFuY2UobnVsbCwgZGF0YVt4XSkpIHsKCQkJCQkJZGF0YVt4XSA9IGRhdGFbeF0uaW5uZXJIVE1MIHx8IGRhdGFbeF0uaW5uZXJUZXh0OwoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJcC5kYXRhID0gZGF0YTsKCQkJcmV0dXJuIGRhdGE7CgkJfSwKCgkJLy8gTm9kZUxpc3RUb0pTT04KCQkvLyBHaXZlbiBhIGxpc3Qgb2YgZWxlbWVudHMgZXh0cmFwb2xhdGUgdGhlaXIgdmFsdWVzIGFuZCByZXR1cm4gYXMgYSBqc29uIG9iamVjdAoJCW5vZGVMaXN0VG9KU09OOiBmdW5jdGlvbihub2RlbGlzdCkgewoKCQkJdmFyIGpzb24gPSB7fTsKCgkJCS8vIENyZWF0ZSBhIGRhdGEgc3RyaW5nCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbm9kZWxpc3QubGVuZ3RoOyBpKyspIHsKCgkJCQl2YXIgaW5wdXQgPSBub2RlbGlzdFtpXTsKCgkJCQkvLyBJZiB0aGUgbmFtZSBvZiB0aGUgaW5wdXQgaXMgZW1wdHkgb3IgZGlhYmxlZCwgZG9udCBhZGQgaXQuCgkJCQlpZiAoaW5wdXQuZGlzYWJsZWQgfHwgIWlucHV0Lm5hbWUpIHsKCQkJCQljb250aW51ZTsKCQkJCX0KCgkJCQkvLyBJcyB0aGlzIGEgZmlsZSwgZG9lcyB0aGUgYnJvd3NlciBub3Qgc3VwcG9ydCAnZmlsZXMnIGFuZCAnRm9ybURhdGEnPwoJCQkJaWYgKGlucHV0LnR5cGUgPT09ICdmaWxlJykgewoJCQkJCWpzb25baW5wdXQubmFtZV0gPSBpbnB1dDsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCWpzb25baW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSB8fCBpbnB1dC5pbm5lckhUTUw7CgkJCQl9CgkJCX0KCgkJCXJldHVybiBqc29uOwoJCX0KCX0pOwoKCS8vIFJlcGxhY2UgaXQKCWhlbGxvLmFwaSA9IGZ1bmN0aW9uKCkgewoKCQkvLyBHZXQgYXJndW1lbnRzCgkJdmFyIHAgPSB1dGlscy5hcmdzKHtwYXRoOiAncyEnLCBtZXRob2Q6ICdzJywgZGF0YTonbycsIHRpbWVvdXQ6ICdpJywgY2FsbGJhY2s6ICdmJ30sIGFyZ3VtZW50cyk7CgoJCS8vIENoYW5nZSBmb3IgaW50byBhIGRhdGEgb2JqZWN0CgkJaWYgKHAuZGF0YSkgewoJCQl1dGlscy5kYXRhVG9KU09OKHApOwoJCX0KCgkJcmV0dXJuIGFwaS5jYWxsKHRoaXMsIHApOwoJfTsKCn0pKGhlbGxvKTsKCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KLy8KLy8gU2F2ZSBhbnkgYWNjZXNzIHRva2VuIHRoYXQgaXMgaW4gdGhlIGN1cnJlbnQgcGFnZSBVUkwKLy8gSGFuZGxlIGFueSByZXNwb25zZSBzb2xpY2l0ZWQgdGhyb3VnaCBpZnJhbWUgaGFzaCB0YWcgZm9sbG93aW5nIGFuIEFQSSByZXF1ZXN0Ci8vCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCmhlbGxvLnV0aWxzLnJlc3BvbnNlSGFuZGxlcih3aW5kb3csIHdpbmRvdy5vcGVuZXIgfHwgd2luZG93LnBhcmVudCk7CgovLyBTY3JpcHQgdG8gc3VwcG9ydCBDaHJvbWVBcHBzCi8vIFRoaXMgb3ZlcmlkZXMgdGhlIGhlbGxvLnV0aWxzLnBvcHVwIG1ldGhvZCB0byBzdXBwb3J0IGNocm9tZS5pZGVudGl0eS5sYXVuY2hXZWJBdXRoRmxvdwovLyBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIuY2hyb21lLmNvbS9hcHBzL2FwcF9pZGVudGl0eSNub24KCi8vIElzIHRoaXMgYSBjaHJvbWUgYXBwPwoKaWYgKHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBjaHJvbWUuaWRlbnRpdHkgPT09ICdvYmplY3QnICYmIGNocm9tZS5pZGVudGl0eS5sYXVuY2hXZWJBdXRoRmxvdykgewoKCShmdW5jdGlvbigpIHsKCgkJLy8gU3dhcCB0aGUgcG9wdXAgbWV0aG9kCgkJaGVsbG8udXRpbHMucG9wdXAgPSBmdW5jdGlvbih1cmwpIHsKCgkJCXJldHVybiBfb3Blbih1cmwsIHRydWUpOwoKCQl9OwoKCQkvLyBTd2FwIHRoZSBoaWRkZW4gaWZyYW1lIG1ldGhvZAoJCWhlbGxvLnV0aWxzLmlmcmFtZSA9IGZ1bmN0aW9uKHVybCkgewoKCQkJX29wZW4odXJsLCBmYWxzZSk7CgoJCX07CgoJCS8vIFN3YXAgdGhlIHJlcXVlc3RfY29ycyBtZXRob2QKCQloZWxsby51dGlscy5yZXF1ZXN0X2NvcnMgPSBmdW5jdGlvbihjYWxsYmFjaykgewoKCQkJY2FsbGJhY2soKTsKCgkJCS8vIEFsd2F5cyBydW4gYXMgQ09SUwoKCQkJcmV0dXJuIHRydWU7CgkJfTsKCgkJLy8gU3dhcCB0aGUgc3RvcmFnZSBtZXRob2QKCQl2YXIgX2NhY2hlID0ge307CgkJY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KCdoZWxsbycsIGZ1bmN0aW9uKHIpIHsKCQkJLy8gVXBkYXRlIHRoZSBjYWNoZQoJCQlfY2FjaGUgPSByLmhlbGxvIHx8IHt9OwoJCX0pOwoKCQloZWxsby51dGlscy5zdG9yZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CgoJCQkvLyBHZXQgYWxsCgkJCWlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CgkJCQlyZXR1cm4gX2NhY2hlOwoJCQl9CgoJCQkvLyBHZXQKCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKCQkJCXJldHVybiBfY2FjaGVbbmFtZV0gfHwgbnVsbDsKCQkJfQoKCQkJLy8gU2V0CgkJCWlmICh2YWx1ZSkgewoJCQkJX2NhY2hlW25hbWVdID0gdmFsdWU7CgkJCQljaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe2hlbGxvOiBfY2FjaGV9KTsKCQkJCXJldHVybiB2YWx1ZTsKCQkJfQoKCQkJLy8gRGVsZXRlCgkJCWlmICh2YWx1ZSA9PT0gbnVsbCkgewoJCQkJZGVsZXRlIF9jYWNoZVtuYW1lXTsKCQkJCWNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7aGVsbG86IF9jYWNoZX0pOwoJCQkJcmV0dXJuIG51bGw7CgkJCX0KCQl9OwoKCQkvLyBPcGVuIGZ1bmN0aW9uCgkJZnVuY3Rpb24gX29wZW4odXJsLCBpbnRlcmFjdGl2ZSkgewoKCQkJLy8gTGF1bmNoCgkJCXZhciByZWYgPSB7CgkJCQljbG9zZWQ6IGZhbHNlCgkJCX07CgoJCQkvLyBMYXVuY2ggdGhlIHdlYkF1dGhGbG93CgkJCWNocm9tZS5pZGVudGl0eS5sYXVuY2hXZWJBdXRoRmxvdyh7CgkJCQl1cmw6IHVybCwKCQkJCWludGVyYWN0aXZlOiBpbnRlcmFjdGl2ZQoJCQl9LCBmdW5jdGlvbihyZXNwb25zZVVybCkgewoKCQkJCS8vIERpZCB0aGUgdXNlciBjYW5jZWwgdGhpcyBwcmVtYXR1cmVseQoJCQkJaWYgKHJlc3BvbnNlVXJsID09PSB1bmRlZmluZWQpIHsKCQkJCQlyZWYuY2xvc2VkID0gdHJ1ZTsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJLy8gU3BsaXQgYXBwYXJ0IHRoZSBVUkwKCQkJCXZhciBhID0gaGVsbG8udXRpbHMudXJsKHJlc3BvbnNlVXJsKTsKCgkJCQkvLyBUaGUgbG9jYXRpb24gY2FuIGJlIGF1Z21lbnRlZCBpbiB0byBhIGxvY2F0aW9uIG9iamVjdCBsaWtlIHNvLi4uCgkJCQkvLyBXZSBkb250IGhhdmUgd2luZG93IG9wZXJhdGlvbnMgb24gdGhlIHBvcHVwIHNvIGxldHMgY3JlYXRlIHNvbWUKCQkJCXZhciBfcG9wdXAgPSB7CgkJCQkJbG9jYXRpb246IHsKCgkJCQkJCS8vIENoYW5nZSB0aGUgbG9jYXRpb24gb2YgdGhlIHBvcHVwCgkJCQkJCWFzc2lnbjogZnVuY3Rpb24odXJsKSB7CgoJCQkJCQkJLy8gSWYgdGhlcmUgaXMgYSBzZWNvbmRhcnkgcmVhc3NpZ24KCQkJCQkJCS8vIEluIHRoZSBjYXNlIG9mIE9BdXRoMQoJCQkJCQkJLy8gVHJpZ2dlciB0aGlzIGluIG5vbi1pbnRlcmFjdGl2ZSBtb2RlLgoJCQkJCQkJX29wZW4odXJsLCBmYWxzZSk7CgkJCQkJCX0sCgoJCQkJCQlzZWFyY2g6IGEuc2VhcmNoLAoJCQkJCQloYXNoOiBhLmhhc2gsCgkJCQkJCWhyZWY6IGEuaHJlZgoJCQkJCX0sCgkJCQkJY2xvc2U6IGZ1bmN0aW9uKCkge30KCQkJCX07CgoJCQkJLy8gVGhlbiB0aGlzIFVSTCBjb250YWlucyBpbmZvcm1hdGlvbiB3aGljaCBIZWxsb0pTIG11c3QgcHJvY2VzcwoJCQkJLy8gVVJMIHN0cmluZwoJCQkJLy8gV2luZG93IC0gYW55IGFjdGlvbiBzdWNoIGFzIHdpbmRvdyByZWxvY2F0aW9uIGdvZXMgaGVyZQoJCQkJLy8gT3BlbmVyIC0gdGhlIHBhcmVudCB3aW5kb3cgd2hpY2ggb3BlbmVkIHRoaXMsIGFrYSB0aGlzIHNjcmlwdAoKCQkJCWhlbGxvLnV0aWxzLnJlc3BvbnNlSGFuZGxlcihfcG9wdXAsIHdpbmRvdyk7CgkJCX0pOwoKCQkJLy8gUmV0dXJuIHRoZSByZWZlcmVuY2UKCQkJcmV0dXJuIHJlZjsKCQl9CgoJfSkoKTsKfQoKKGZ1bmN0aW9uKGhlbGxvKSB7CgoJLy8gT0F1dGgxCgl2YXIgT0F1dGgxU2V0dGluZ3MgPSB7CgkJdmVyc2lvbjogJzEuMCcsCgkJYXV0aDogJ2h0dHBzOi8vd3d3LmRyb3Bib3guY29tLzEvb2F1dGgvYXV0aG9yaXplJywKCQlyZXF1ZXN0OiAnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vMS9vYXV0aC9yZXF1ZXN0X3Rva2VuJywKCQl0b2tlbjogJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tLzEvb2F1dGgvYWNjZXNzX3Rva2VuJwoJfTsKCgkvLyBPQXV0aDIgU2V0dGluZ3MKCXZhciBPQXV0aDJTZXR0aW5ncyA9IHsKCQl2ZXJzaW9uOiAyLAoJCWF1dGg6ICdodHRwczovL3d3dy5kcm9wYm94LmNvbS8xL29hdXRoMi9hdXRob3JpemUnLAoJCWdyYW50OiAnaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vMS9vYXV0aDIvdG9rZW4nCgl9OwoKCS8vIEluaXRpYXRlIHRoZSBEcm9wYm94IG1vZHVsZQoJaGVsbG8uaW5pdCh7CgoJCWRyb3Bib3g6IHsKCgkJCW5hbWU6ICdEcm9wYm94JywKCgkJCW9hdXRoOiBPQXV0aDJTZXR0aW5ncywKCgkJCWxvZ2luOiBmdW5jdGlvbihwKSB7CgkJCQkvLyBPQXV0aDIgbm9uLXN0YW5kYXJkIGFkanVzdG1lbnRzCgkJCQlwLnFzLnNjb3BlID0gJyc7CgkJCQlkZWxldGUgcC5xcy5kaXNwbGF5OwoKCQkJCS8vIFNob3VsZCB0aGlzIGJlIHJ1biBhcyBPQXV0aDE/CgkJCQkvLyBJZiB0aGUgcmVkaXJlY3RfdXJpIGlzIGlzIEhUVFAgKG5vbi1zZWN1cmUpIHRoZW4gaXRzIHJlcXVpcmVkIHRvIHJldmVydCB0byB0aGUgT0F1dGgxIGVuZHBvaW50cwoJCQkJdmFyIHJlZGlyZWN0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHAucXMucmVkaXJlY3RfdXJpKTsKCQkJCWlmIChyZWRpcmVjdC5pbmRleE9mKCdodHRwOicpID09PSAwICYmIHJlZGlyZWN0LmluZGV4T2YoJ2h0dHA6Ly9sb2NhbGhvc3QvJykgIT09IDApIHsKCgkJCQkJLy8gT3ZlcnJpZGUgdGhlIGRyb3Bib3ggT0F1dGggc2V0dGluZ3MuCgkJCQkJaGVsbG8uc2VydmljZXMuZHJvcGJveC5vYXV0aCA9IE9BdXRoMVNldHRpbmdzOwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJLy8gT3ZlcnJpZGUgdGhlIGRyb3Bib3ggT0F1dGggc2V0dGluZ3MuCgkJCQkJaGVsbG8uc2VydmljZXMuZHJvcGJveC5vYXV0aCA9IE9BdXRoMlNldHRpbmdzOwoJCQkJfQoKCQkJCS8vIFRoZSBkcm9wYm94IGxvZ2luIHdpbmRvdyBpcyBhIGRpZmZlcmVudCBzaXplCgkJCQlwLm9wdGlvbnMucG9wdXAud2lkdGggPSAxMDAwOwoJCQkJcC5vcHRpb25zLnBvcHVwLmhlaWdodCA9IDEwMDA7CgkJCX0sCgoJCQkvKgoJCQkJRHJvcGJveCBkb2VzIG5vdCBhbGxvdyBpbnNlY3VyZSBIVFRQIFVSSSdzIGluIHRoZSByZWRpcmVjdF91cmkgZmllbGQKCQkJCS4uLm90aGVyd2lzZSBJJ2QgbG92ZSB0byB1c2UgT0F1dGgyCgoJCQkJRm9sbG93IHJlcXVlc3QgaHR0cHM6Ly9mb3J1bXMuZHJvcGJveC5jb20vdG9waWMucGhwP2lkPTEwNjUwNQoKCQkJCXAucXMucmVzcG9uc2VfdHlwZSA9ICdjb2RlJzsKCQkJCW9hdXRoOiB7CgkJCQkJdmVyc2lvbjogMiwKCQkJCQlhdXRoOiAnaHR0cHM6Ly93d3cuZHJvcGJveC5jb20vMS9vYXV0aDIvYXV0aG9yaXplJywKCQkJCQlncmFudDogJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tLzEvb2F1dGgyL3Rva2VuJwoJCQkJfQoJCQkqLwoKCQkJLy8gQVBJIEJhc2UgVVJMCgkJCWJhc2U6ICdodHRwczovL2FwaS5kcm9wYm94LmNvbS8xLycsCgoJCQkvLyBCZXNwb2tlIHNldHRpbmc6IHRoaXMgaXMgc3RhdGVzIHdoZXRoZXIgdG8gdXNlIHRoZSBjdXN0b20gZW52aXJvbm1lbnQgb2YgRHJvcGJveCBvciB0byB1c2UgdGhlaXIgb3duIGVudmlyb25tZW50CgkJCS8vIEJlY2F1c2UgaXQncyBub3RvcmlvdXNseSBkaWZmaWN1bHQgZm9yIERyb3Bib3ggdG9vIHByb3ZpZGUgYWNjZXNzIGZyb20gb3RoZXIgd2Vic2VydmljZXMsIHRoaXMgZGVmYXVsdHMgdG8gU2FuZGJveAoJCQlyb290OiAnc2FuZGJveCcsCgoJCQkvLyBNYXAgR0VUIHJlcXVlc3RzCgkJCWdldDogewoJCQkJbWU6ICdhY2NvdW50L2luZm8nLAoKCQkJCS8vIEh0dHBzOi8vd3d3LmRyb3Bib3guY29tL2RldmVsb3BlcnMvY29yZS9kb2NzI21ldGFkYXRhCgkJCQknbWUvZmlsZXMnOiByZXEoJ21ldGFkYXRhL2F1dG8vQHtwYXJlbnR8fScpLAoJCQkJJ21lL2ZvbGRlcic6IHJlcSgnbWV0YWRhdGEvYXV0by9Ae2lkfScpLAoJCQkJJ21lL2ZvbGRlcnMnOiByZXEoJ21ldGFkYXRhL2F1dG8vJyksCgoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoJCQkJCWlmIChwLnBhdGgubWF0Y2goJ2h0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlcy8nKSkgewoJCQkJCQkvLyBUaGlzIGlzIGEgZmlsZSwgcmV0dXJuIGJpbmFyeSBkYXRhCgkJCQkJCXAubWV0aG9kID0gJ2Jsb2InOwoJCQkJCX0KCgkJCQkJY2FsbGJhY2socC5wYXRoKTsKCQkJCX0KCQkJfSwKCgkJCXBvc3Q6IHsKCQkJCSdtZS9maWxlcyc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgoJCQkJCXZhciBwYXRoID0gcC5kYXRhLnBhcmVudDsKCQkJCQl2YXIgZmlsZU5hbWUgPSBwLmRhdGEubmFtZTsKCgkJCQkJcC5kYXRhID0gewoJCQkJCQlmaWxlOiBwLmRhdGEuZmlsZQoJCQkJCX07CgoJCQkJCS8vIERvZXMgdGhpcyBoYXZlIGEgZGF0YS11cmkgdG8gdXBsb2FkIGFzIGEgZmlsZT8KCQkJCQlpZiAodHlwZW9mIChwLmRhdGEuZmlsZSkgPT09ICdzdHJpbmcnKSB7CgkJCQkJCXAuZGF0YS5maWxlID0gaGVsbG8udXRpbHMudG9CbG9iKHAuZGF0YS5maWxlKTsKCQkJCQl9CgoJCQkJCWNhbGxiYWNrKCdodHRwczovL2FwaS1jb250ZW50LmRyb3Bib3guY29tLzEvZmlsZXNfcHV0L2F1dG8vJyArIHBhdGggKyAnLycgKyBmaWxlTmFtZSk7CgkJCQl9LAoKCQkJCSdtZS9mb2xkZXJzJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCgkJCQkJdmFyIG5hbWUgPSBwLmRhdGEubmFtZTsKCQkJCQlwLmRhdGEgPSB7fTsKCgkJCQkJY2FsbGJhY2soJ2ZpbGVvcHMvY3JlYXRlX2ZvbGRlcj9yb290PUB7cm9vdHxzYW5kYm94fSYnICsgaGVsbG8udXRpbHMucGFyYW0oewoJCQkJCQlwYXRoOiBuYW1lCgkJCQkJfSkpOwoJCQkJfQoJCQl9LAoKCQkJLy8gTWFwIERFTEVURSByZXF1ZXN0cwoJCQlkZWw6IHsKCQkJCSdtZS9maWxlcyc6ICdmaWxlb3BzL2RlbGV0ZT9yb290PUB7cm9vdHxzYW5kYm94fSZwYXRoPUB7aWR9JywKCQkJCSdtZS9mb2xkZXInOiAnZmlsZW9wcy9kZWxldGU/cm9vdD1Ae3Jvb3R8c2FuZGJveH0mcGF0aD1Ae2lkfScKCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihvKSB7CgkJCQkJZm9ybWF0RXJyb3Iobyk7CgkJCQkJaWYgKCFvLnVpZCkgewoJCQkJCQlyZXR1cm4gbzsKCQkJCQl9CgoJCQkJCW8ubmFtZSA9IG8uZGlzcGxheV9uYW1lOwoJCQkJCXZhciBtID0gby5uYW1lLnNwbGl0KCcgJyk7CgkJCQkJby5maXJzdF9uYW1lID0gbS5zaGlmdCgpOwoJCQkJCW8ubGFzdF9uYW1lID0gbS5qb2luKCcgJyk7CgkJCQkJby5pZCA9IG8udWlkOwoJCQkJCWRlbGV0ZSBvLnVpZDsKCQkJCQlkZWxldGUgby5kaXNwbGF5X25hbWU7CgkJCQkJcmV0dXJuIG87CgkJCQl9LAoKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24obywgaGVhZGVycywgcmVxKSB7CgkJCQkJZm9ybWF0RXJyb3Iobyk7CgkJCQkJaWYgKG8uaXNfZGlyICYmIG8uY29udGVudHMpIHsKCQkJCQkJby5kYXRhID0gby5jb250ZW50czsKCQkJCQkJZGVsZXRlIG8uY29udGVudHM7CgoJCQkJCQlvLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpdGVtLnJvb3QgPSBvLnJvb3Q7CgkJCQkJCQlmb3JtYXRGaWxlKGl0ZW0sIGhlYWRlcnMsIHJlcSk7CgkJCQkJCX0pOwoJCQkJCX0KCgkJCQkJZm9ybWF0RmlsZShvLCBoZWFkZXJzLCByZXEpOwoKCQkJCQlpZiAoby5pc19kZWxldGVkKSB7CgkJCQkJCW8uc3VjY2VzcyA9IHRydWU7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0KCQkJfSwKCgkJCS8vIERvZXNuJ3QgcmV0dXJuIHRoZSBDT1JTIGhlYWRlcnMKCQkJeGhyOiBmdW5jdGlvbihwKSB7CgoJCQkJLy8gVGhlIHByb3h5IHN1cHBvcnRzIGFsbG93LWNyb3NzLW9yaWdpbi1yZXNvdXJjZQoJCQkJLy8gQWxhcyB0aGF0J3MgdGhlIG9ubHkgdGhpbmcgd2UncmUgdXNpbmcuCgkJCQlpZiAocC5kYXRhICYmIHAuZGF0YS5maWxlKSB7CgkJCQkJdmFyIGZpbGUgPSBwLmRhdGEuZmlsZTsKCQkJCQlpZiAoZmlsZSkgewoJCQkJCQlpZiAoZmlsZS5maWxlcykgewoJCQkJCQkJcC5kYXRhID0gZmlsZS5maWxlc1swXTsKCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCXAuZGF0YSA9IGZpbGU7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgoJCQkJaWYgKHAubWV0aG9kID09PSAnZGVsZXRlJykgewoJCQkJCXAubWV0aG9kID0gJ3Bvc3QnOwoJCQkJfQoKCQkJCXJldHVybiB0cnVlOwoJCQl9LAoKCQkJZm9ybTogZnVuY3Rpb24ocCwgcXMpIHsKCQkJCWRlbGV0ZSBxcy5zdGF0ZTsKCQkJCWRlbGV0ZSBxcy5yZWRpcmVjdF91cmk7CgkJCX0KCQl9Cgl9KTsKCglmdW5jdGlvbiBmb3JtYXRFcnJvcihvKSB7CgkJaWYgKG8gJiYgJ2Vycm9yJyBpbiBvKSB7CgkJCW8uZXJyb3IgPSB7CgkJCQljb2RlOiAnc2VydmVyX2Vycm9yJywKCQkJCW1lc3NhZ2U6IG8uZXJyb3IubWVzc2FnZSB8fCBvLmVycm9yCgkJCX07CgkJfQoJfQoKCWZ1bmN0aW9uIGZvcm1hdEZpbGUobywgaGVhZGVycywgcmVxKSB7CgoJCWlmICh0eXBlb2YgbyAhPT0gJ29iamVjdCcgfHwKCQkJKHR5cGVvZiBCbG9iICE9PSAndW5kZWZpbmVkJyAmJiBvIGluc3RhbmNlb2YgQmxvYikgfHwKCQkJKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgbyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkgewoJCQkvLyBUaGlzIGlzIGEgZmlsZSwgbGV0IGl0IHRocm91Z2ggdW5mb3JtYXR0ZWQKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCdlcnJvcicgaW4gbykgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIgcGF0aCA9IChvLnJvb3QgIT09ICdhcHBfZm9sZGVyJyA/IG8ucm9vdCA6ICcnKSArIG8ucGF0aC5yZXBsYWNlKC9cJi9nLCAnJTI2Jyk7CgkJcGF0aCA9IHBhdGgucmVwbGFjZSgvXlwvLywgJycpOwoJCWlmIChvLnRodW1iX2V4aXN0cykgewoJCQlvLnRodW1ibmFpbCA9IHJlcS5vYXV0aF9wcm94eSArICc/cGF0aD0nICsKCQkJZW5jb2RlVVJJQ29tcG9uZW50KCdodHRwczovL2FwaS1jb250ZW50LmRyb3Bib3guY29tLzEvdGh1bWJuYWlscy9hdXRvLycgKyBwYXRoICsgJz9mb3JtYXQ9anBlZyZzaXplPW0nKSArICcmYWNjZXNzX3Rva2VuPScgKyByZXEub3B0aW9ucy5hY2Nlc3NfdG9rZW47CgkJfQoKCQlvLnR5cGUgPSAoby5pc19kaXIgPyAnZm9sZGVyJyA6IG8ubWltZV90eXBlKTsKCQlvLm5hbWUgPSBvLnBhdGgucmVwbGFjZSgvLipcLy9nLCAnJyk7CgkJaWYgKG8uaXNfZGlyKSB7CgkJCW8uZmlsZXMgPSBwYXRoLnJlcGxhY2UoL15cLy8sICcnKTsKCQl9CgkJZWxzZSB7CgkJCW8uZG93bmxvYWRMaW5rID0gaGVsbG8uc2V0dGluZ3Mub2F1dGhfcHJveHkgKyAnP3BhdGg9JyArCgkJCWVuY29kZVVSSUNvbXBvbmVudCgnaHR0cHM6Ly9hcGktY29udGVudC5kcm9wYm94LmNvbS8xL2ZpbGVzL2F1dG8vJyArIHBhdGgpICsgJyZhY2Nlc3NfdG9rZW49JyArIHJlcS5vcHRpb25zLmFjY2Vzc190b2tlbjsKCQkJby5maWxlID0gJ2h0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlcy9hdXRvLycgKyBwYXRoOwoJCX0KCgkJaWYgKCFvLmlkKSB7CgkJCW8uaWQgPSBvLnBhdGgucmVwbGFjZSgvXlwvLywgJycpOwoJCX0KCgkJLy8gTy5tZWRpYSA9ICdodHRwczovL2FwaS1jb250ZW50LmRyb3Bib3guY29tLzEvZmlsZXMvJyArIHBhdGg7Cgl9CgoJZnVuY3Rpb24gcmVxKHN0cikgewoJCXJldHVybiBmdW5jdGlvbihwLCBjYikgewoJCQlkZWxldGUgcC5xdWVyeS5saW1pdDsKCQkJY2Ioc3RyKTsKCQl9OwoJfQoKfSkoaGVsbG8pOwoKKGZ1bmN0aW9uKGhlbGxvKSB7CgoJaGVsbG8uaW5pdCh7CgoJCWZhY2Vib29rOiB7CgoJCQluYW1lOiAnRmFjZWJvb2snLAoKCQkJLy8gU0VFIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9mYWNlYm9vay1sb2dpbi9tYW51YWxseS1idWlsZC1hLWxvZ2luLWZsb3cvdjIuMQoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL3d3dy5mYWNlYm9vay5jb20vZGlhbG9nL29hdXRoLycsCgkJCQlncmFudDogJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL29hdXRoL2FjY2Vzc190b2tlbicKCQkJfSwKCgkJCS8vIEF1dGhvcml6YXRpb24gc2NvcGVzCgkJCXNjb3BlOiB7CgkJCQliYXNpYzogJ3B1YmxpY19wcm9maWxlJywKCQkJCWVtYWlsOiAnZW1haWwnLAoJCQkJc2hhcmU6ICd1c2VyX3Bvc3RzJywKCQkJCWJpcnRoZGF5OiAndXNlcl9iaXJ0aGRheScsCgkJCQlldmVudHM6ICd1c2VyX2V2ZW50cycsCgkJCQlwaG90b3M6ICd1c2VyX3Bob3RvcycsCgkJCQl2aWRlb3M6ICd1c2VyX3ZpZGVvcycsCgkJCQlmcmllbmRzOiAndXNlcl9mcmllbmRzJywKCQkJCWZpbGVzOiAndXNlcl9waG90b3MsdXNlcl92aWRlb3MnLAoJCQkJcHVibGlzaF9maWxlczogJ3VzZXJfcGhvdG9zLHVzZXJfdmlkZW9zLHB1Ymxpc2hfYWN0aW9ucycsCgkJCQlwdWJsaXNoOiAncHVibGlzaF9hY3Rpb25zJywKCgkJCQkvLyBEZXByZWNhdGVkIGluIHYyLjAKCQkJCS8vIENyZWF0ZV9ldmVudAk6ICdjcmVhdGVfZXZlbnQnLAoKCQkJCW9mZmxpbmVfYWNjZXNzOiAnb2ZmbGluZV9hY2Nlc3MnCgkJCX0sCgoJCQkvLyBSZWZyZXNoIHRoZSBhY2Nlc3NfdG9rZW4KCQkJcmVmcmVzaDogdHJ1ZSwKCgkJCWxvZ2luOiBmdW5jdGlvbihwKSB7CgoJCQkJLy8gUmVhdXRoZW50aWNhdGUKCQkJCS8vIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9mYWNlYm9vay1sb2dpbi9yZWF1dGhlbnRpY2F0aW9uCgkJCQlpZiAocC5vcHRpb25zLmZvcmNlKSB7CgkJCQkJcC5xcy5hdXRoX3R5cGUgPSAncmVhdXRoZW50aWNhdGUnOwoJCQkJfQoKCQkJCS8vIFRoZSBmYWNlYm9vayBsb2dpbiB3aW5kb3cgaXMgYSBkaWZmZXJlbnQgc2l6ZS4KCQkJCXAub3B0aW9ucy5wb3B1cC53aWR0aCA9IDU4MDsKCQkJCXAub3B0aW9ucy5wb3B1cC5oZWlnaHQgPSA0MDA7CgkJCX0sCgoJCQlsb2dvdXQ6IGZ1bmN0aW9uKGNhbGxiYWNrLCBvcHRpb25zKSB7CgkJCQkvLyBBc3NpZ24gY2FsbGJhY2sgdG8gYSBnbG9iYWwgaGFuZGxlcgoJCQkJdmFyIGNhbGxiYWNrSUQgPSBoZWxsby51dGlscy5nbG9iYWxFdmVudChjYWxsYmFjayk7CgkJCQl2YXIgcmVkaXJlY3QgPSBlbmNvZGVVUklDb21wb25lbnQoaGVsbG8uc2V0dGluZ3MucmVkaXJlY3RfdXJpICsgJz8nICsgaGVsbG8udXRpbHMucGFyYW0oe2NhbGxiYWNrOmNhbGxiYWNrSUQsIHJlc3VsdDogSlNPTi5zdHJpbmdpZnkoe2ZvcmNlOnRydWV9KSwgc3RhdGU6ICd7fSd9KSk7CgkJCQl2YXIgdG9rZW4gPSAob3B0aW9ucy5hdXRoUmVzcG9uc2UgfHwge30pLmFjY2Vzc190b2tlbjsKCQkJCWhlbGxvLnV0aWxzLmlmcmFtZSgnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2xvZ291dC5waHA/bmV4dD0nICsgcmVkaXJlY3QgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZW4pOwoKCQkJCS8vIFBvc3NpYmxlIHJlc3BvbnNlczoKCQkJCS8vIFN0cmluZyBVUkwJLSBoZWxsby5sb2dvdXQgc2hvdWxkIGhhbmRsZSB0aGUgbG9nb3V0CgkJCQkvLyBVbmRlZmluZWQJLSB0aGlzIGZ1bmN0aW9uIHdpbGwgaGFuZGxlIHRoZSBjYWxsYmFjawoJCQkJLy8gVHJ1ZSAtIHRocm93IGEgc3VjY2VzcywgdGhpcyBjYWxsYmFjayBpc24ndCBoYW5kbGluZyB0aGUgY2FsbGJhY2sKCQkJCS8vIEZhbHNlIC0gdGhyb3cgYSBlcnJvcgoJCQkJaWYgKCF0b2tlbikgewoJCQkJCS8vIElmIHRoZXJlIGlzbid0IGEgdG9rZW4sIHRoZSBhYm92ZSB3b250IHJldHVybiBhIHJlc3BvbnNlLCBzbyBsZXRzIHRyaWdnZXIgYSByZXNwb25zZQoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfSwKCgkJCS8vIEFQSSBCYXNlIFVSTAoJCQliYXNlOiAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjIuNC8nLAoKCQkJLy8gTWFwIEdFVCByZXF1ZXN0cwoJCQlnZXQ6IHsKCQkJCW1lOiAnbWU/ZmllbGRzPWVtYWlsLGZpcnN0X25hbWUsbGFzdF9uYW1lLG5hbWUsdGltZXpvbmUsdmVyaWZpZWQnLAoJCQkJJ21lL2ZyaWVuZHMnOiAnbWUvZnJpZW5kcycsCgkJCQknbWUvZm9sbG93aW5nJzogJ21lL2ZyaWVuZHMnLAoJCQkJJ21lL2ZvbGxvd2Vycyc6ICdtZS9mcmllbmRzJywKCQkJCSdtZS9zaGFyZSc6ICdtZS9mZWVkJywKCQkJCSdtZS9saWtlJzogJ21lL2xpa2VzJywKCQkJCSdtZS9maWxlcyc6ICdtZS9hbGJ1bXMnLAoJCQkJJ21lL2FsYnVtcyc6ICdtZS9hbGJ1bXM/ZmllbGRzPWNvdmVyX3Bob3RvLG5hbWUnLAoJCQkJJ21lL2FsYnVtJzogJ0B7aWR9L3Bob3Rvcz9maWVsZHM9cGljdHVyZScsCgkJCQknbWUvcGhvdG9zJzogJ21lL3Bob3RvcycsCgkJCQknbWUvcGhvdG8nOiAnQHtpZH0nLAoJCQkJJ2ZyaWVuZC9hbGJ1bXMnOiAnQHtpZH0vYWxidW1zJywKCQkJCSdmcmllbmQvcGhvdG9zJzogJ0B7aWR9L3Bob3RvcycKCgkJCQkvLyBQYWdpbmF0aW9uCgkJCQkvLyBIdHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2RvY3MvcmVmZXJlbmNlL2FwaS9wYWdpbmF0aW9uLwoJCQl9LAoKCQkJLy8gTWFwIFBPU1QgcmVxdWVzdHMKCQkJcG9zdDogewoJCQkJJ21lL3NoYXJlJzogJ21lL2ZlZWQnLAoJCQkJJ21lL3Bob3RvJzogJ0B7aWR9JwoKCQkJCS8vIEh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9ncmFwaC1hcGkvcmVmZXJlbmNlL3YyLjIvb2JqZWN0L2xpa2VzLwoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZvcm1hdFVzZXIsCgkJCQknbWUvZnJpZW5kcyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93aW5nJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2FsYnVtcyc6IGZvcm1hdCwKCQkJCSdtZS9waG90b3MnOiBmb3JtYXQsCgkJCQknbWUvZmlsZXMnOiBmb3JtYXQsCgkJCQknZGVmYXVsdCc6IGZvcm1hdAoJCQl9LAoKCQkJLy8gU3BlY2lhbCByZXF1aXJlbWVudHMgZm9yIGhhbmRsaW5nIFhIUgoJCQl4aHI6IGZ1bmN0aW9uKHAsIHFzKSB7CgkJCQlpZiAocC5tZXRob2QgPT09ICdnZXQnIHx8IHAubWV0aG9kID09PSAncG9zdCcpIHsKCQkJCQlxcy5zdXBwcmVzc19yZXNwb25zZV9jb2RlcyA9IHRydWU7CgkJCQl9CgoJCQkJLy8gSXMgdGhpcyBhIHBvc3Qgd2l0aCBhIGRhdGEtdXJpPwoJCQkJaWYgKHAubWV0aG9kID09PSAncG9zdCcgJiYgcC5kYXRhICYmIHR5cGVvZiAocC5kYXRhLmZpbGUpID09PSAnc3RyaW5nJykgewoJCQkJCS8vIENvbnZlcnQgdGhlIERhdGEtVVJJIHRvIGEgQmxvYgoJCQkJCXAuZGF0YS5maWxlID0gaGVsbG8udXRpbHMudG9CbG9iKHAuZGF0YS5maWxlKTsKCQkJCX0KCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSwKCgkJCS8vIFNwZWNpYWwgcmVxdWlyZW1lbnRzIGZvciBoYW5kbGluZyBKU09OUCBmYWxsYmFjawoJCQlqc29ucDogZnVuY3Rpb24ocCwgcXMpIHsKCQkJCXZhciBtID0gcC5tZXRob2Q7CgkJCQlpZiAobSAhPT0gJ2dldCcgJiYgIWhlbGxvLnV0aWxzLmhhc0JpbmFyeShwLmRhdGEpKSB7CgkJCQkJcC5kYXRhLm1ldGhvZCA9IG07CgkJCQkJcC5tZXRob2QgPSAnZ2V0JzsKCQkJCX0KCQkJCWVsc2UgaWYgKHAubWV0aG9kID09PSAnZGVsZXRlJykgewoJCQkJCXFzLm1ldGhvZCA9ICdkZWxldGUnOwoJCQkJCXAubWV0aG9kID0gJ3Bvc3QnOwoJCQkJfQoJCQl9LAoKCQkJLy8gU3BlY2lhbCByZXF1aXJlbWVudHMgZm9yIGlmcmFtZSBmb3JtIGhhY2sKCQkJZm9ybTogZnVuY3Rpb24ocCkgewoJCQkJcmV0dXJuIHsKCQkJCQkvLyBGaXJlIHRoZSBjYWxsYmFjayBvbmxvYWQKCQkJCQljYWxsYmFja29ubG9hZDogdHJ1ZQoJCQkJfTsKCQkJfQoJCX0KCX0pOwoKCXZhciBiYXNlID0gJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyc7CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7CgkJaWYgKG8uaWQpIHsKCQkJby50aHVtYm5haWwgPSBvLnBpY3R1cmUgPSAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIG8uaWQgKyAnL3BpY3R1cmUnOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvKSB7CgkJaWYgKCdkYXRhJyBpbiBvKSB7CgkJCW8uZGF0YS5mb3JFYWNoKGZvcm1hdFVzZXIpOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0KG8sIGhlYWRlcnMsIHJlcSkgewoJCWlmICh0eXBlb2YgbyA9PT0gJ2Jvb2xlYW4nKSB7CgkJCW8gPSB7c3VjY2Vzczogb307CgkJfQoKCQlpZiAobyAmJiAnZGF0YScgaW4gbykgewoJCQl2YXIgdG9rZW4gPSByZXEucXVlcnkuYWNjZXNzX3Rva2VuOwoKCQkJaWYgKCEoby5kYXRhIGluc3RhbmNlb2YgQXJyYXkpKSB7CgkJCQl2YXIgZGF0YSA9IG8uZGF0YTsKCQkJCWRlbGV0ZSBvLmRhdGE7CgkJCQlvLmRhdGEgPSBbZGF0YV07CgkJCX0KCgkJCW8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsKCgkJCQlpZiAoZC5waWN0dXJlKSB7CgkJCQkJZC50aHVtYm5haWwgPSBkLnBpY3R1cmU7CgkJCQl9CgoJCQkJZC5waWN0dXJlcyA9IChkLmltYWdlcyB8fCBbXSkKCQkJCQkuc29ydChmdW5jdGlvbihhLCBiKSB7CgkJCQkJCXJldHVybiBhLndpZHRoIC0gYi53aWR0aDsKCQkJCQl9KTsKCgkJCQlpZiAoZC5jb3Zlcl9waG90byAmJiBkLmNvdmVyX3Bob3RvLmlkKSB7CgkJCQkJZC50aHVtYm5haWwgPSBiYXNlICsgZC5jb3Zlcl9waG90by5pZCArICcvcGljdHVyZT9hY2Nlc3NfdG9rZW49JyArIHRva2VuOwoJCQkJfQoKCQkJCWlmIChkLnR5cGUgPT09ICdhbGJ1bScpIHsKCQkJCQlkLmZpbGVzID0gZC5waG90b3MgPSBiYXNlICsgZC5pZCArICcvcGhvdG9zJzsKCQkJCX0KCgkJCQlpZiAoZC5jYW5fdXBsb2FkKSB7CgkJCQkJZC51cGxvYWRfbG9jYXRpb24gPSBiYXNlICsgZC5pZCArICcvcGhvdG9zJzsKCQkJCX0KCQkJfSk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQlmbGlja3I6IHsKCgkJCW5hbWU6ICdGbGlja3InLAoKCQkJLy8gRW5zdXJlIHRoYXQgeW91IGRlZmluZSBhbiBvYXV0aF9wcm94eQoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogJzEuMGEnLAoJCQkJYXV0aDogJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvb2F1dGgvYXV0aG9yaXplP3Blcm1zPXJlYWQnLAoJCQkJcmVxdWVzdDogJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvb2F1dGgvcmVxdWVzdF90b2tlbicsCgkJCQl0b2tlbjogJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvb2F1dGgvYWNjZXNzX3Rva2VuJwoJCQl9LAoKCQkJLy8gQVBJIGJhc2UgVVJMCgkJCWJhc2U6ICdodHRwczovL2FwaS5mbGlja3IuY29tL3NlcnZpY2VzL3Jlc3QnLAoKCQkJLy8gTWFwIEdFVCByZXNxdWVzdHMKCQkJZ2V0OiB7CgkJCQltZTogc2lnbignZmxpY2tyLnBlb3BsZS5nZXRJbmZvJyksCgkJCQknbWUvZnJpZW5kcyc6IHNpZ24oJ2ZsaWNrci5jb250YWN0cy5nZXRMaXN0Jywge3Blcl9wYWdlOidAe2xpbWl0fDUwfSd9KSwKCQkJCSdtZS9mb2xsb3dpbmcnOiBzaWduKCdmbGlja3IuY29udGFjdHMuZ2V0TGlzdCcsIHtwZXJfcGFnZTonQHtsaW1pdHw1MH0nfSksCgkJCQknbWUvZm9sbG93ZXJzJzogc2lnbignZmxpY2tyLmNvbnRhY3RzLmdldExpc3QnLCB7cGVyX3BhZ2U6J0B7bGltaXR8NTB9J30pLAoJCQkJJ21lL2FsYnVtcyc6IHNpZ24oJ2ZsaWNrci5waG90b3NldHMuZ2V0TGlzdCcsIHtwZXJfcGFnZTonQHtsaW1pdHw1MH0nfSksCgkJCQknbWUvYWxidW0nOiBzaWduKCdmbGlja3IucGhvdG9zZXRzLmdldFBob3RvcycsIHtwaG90b3NldF9pZDogJ0B7aWR9J30pLAoJCQkJJ21lL3Bob3Rvcyc6IHNpZ24oJ2ZsaWNrci5wZW9wbGUuZ2V0UGhvdG9zJywge3Blcl9wYWdlOidAe2xpbWl0fDUwfSd9KQoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZ1bmN0aW9uKG8pIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQlvID0gY2hlY2tSZXNwb25zZShvLCAncGVyc29uJyk7CgkJCQkJaWYgKG8uaWQpIHsKCQkJCQkJaWYgKG8ucmVhbG5hbWUpIHsKCQkJCQkJCW8ubmFtZSA9IG8ucmVhbG5hbWUuX2NvbnRlbnQ7CgkJCQkJCQl2YXIgbSA9IG8ubmFtZS5zcGxpdCgnICcpOwoJCQkJCQkJby5maXJzdF9uYW1lID0gbS5zaGlmdCgpOwoJCQkJCQkJby5sYXN0X25hbWUgPSBtLmpvaW4oJyAnKTsKCQkJCQkJfQoKCQkJCQkJby50aHVtYm5haWwgPSBnZXRCdWRkeUljb24obywgJ2wnKTsKCQkJCQkJby5waWN0dXJlID0gZ2V0QnVkZHlJY29uKG8sICdsJyk7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2Vycyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93aW5nJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9hbGJ1bXMnOiBmdW5jdGlvbihvKSB7CgkJCQkJZm9ybWF0RXJyb3Iobyk7CgkJCQkJbyA9IGNoZWNrUmVzcG9uc2UobywgJ3Bob3Rvc2V0cycpOwoJCQkJCXBhZ2luZyhvKTsKCQkJCQlpZiAoby5waG90b3NldCkgewoJCQkJCQlvLmRhdGEgPSBvLnBob3Rvc2V0OwoJCQkJCQlvLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpdGVtLm5hbWUgPSBpdGVtLnRpdGxlLl9jb250ZW50OwoJCQkJCQkJaXRlbS5waG90b3MgPSAnaHR0cHM6Ly9hcGkuZmxpY2tyLmNvbS9zZXJ2aWNlcy9yZXN0JyArIGdldEFwaVVybCgnZmxpY2tyLnBob3Rvc2V0cy5nZXRQaG90b3MnLCB7cGhvdG9zZXRfaWQ6IGl0ZW0uaWR9LCB0cnVlKTsKCQkJCQkJfSk7CgoJCQkJCQlkZWxldGUgby5waG90b3NldDsKCQkJCQl9CgoJCQkJCXJldHVybiBvOwoJCQkJfSwKCgkJCQknbWUvcGhvdG9zJzogZnVuY3Rpb24obykgewoJCQkJCWZvcm1hdEVycm9yKG8pOwoJCQkJCXJldHVybiBmb3JtYXRQaG90b3Mobyk7CgkJCQl9LAoKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24obykgewoJCQkJCWZvcm1hdEVycm9yKG8pOwoJCQkJCXJldHVybiBmb3JtYXRQaG90b3Mobyk7CgkJCQl9CgkJCX0sCgoJCQl4aHI6IGZhbHNlLAoKCQkJanNvbnA6IGZ1bmN0aW9uKHAsIHFzKSB7CgkJCQlpZiAocC5tZXRob2QgPT0gJ2dldCcpIHsKCQkJCQlkZWxldGUgcXMuY2FsbGJhY2s7CgkJCQkJcXMuanNvbmNhbGxiYWNrID0gcC5jYWxsYmFja0lEOwoJCQkJfQoJCQl9CgkJfQoJfSk7CgoJZnVuY3Rpb24gZ2V0QXBpVXJsKG1ldGhvZCwgZXh0cmFQYXJhbXMsIHNraXBOZXR3b3JrKSB7CgkJdmFyIHVybCA9ICgoc2tpcE5ldHdvcmspID8gJycgOiAnZmxpY2tyOicpICsKCQkJJz9tZXRob2Q9JyArIG1ldGhvZCArCgkJCScmYXBpX2tleT0nICsgaGVsbG8uc2VydmljZXMuZmxpY2tyLmlkICsKCQkJJyZmb3JtYXQ9anNvbic7CgkJZm9yICh2YXIgcGFyYW0gaW4gZXh0cmFQYXJhbXMpIHsKCQkJaWYgKGV4dHJhUGFyYW1zLmhhc093blByb3BlcnR5KHBhcmFtKSkgewoJCQkJdXJsICs9ICcmJyArIHBhcmFtICsgJz0nICsgZXh0cmFQYXJhbXNbcGFyYW1dOwoJCQl9CgkJfQoKCQlyZXR1cm4gdXJsOwoJfQoKCS8vIFRoaXMgaXMgbm90IGV4YWN0bHkgbmVhdCBidXQgYXZvaWQgdG8gY2FsbAoJLy8gVGhlIG1ldGhvZCAnZmxpY2tyLnRlc3QubG9naW4nIGZvciBlYWNoIGFwaSBjYWxsCgoJZnVuY3Rpb24gd2l0aFVzZXIoY2IpIHsKCQl2YXIgYXV0aCA9IGhlbGxvLmdldEF1dGhSZXNwb25zZSgnZmxpY2tyJyk7CgkJY2IoYXV0aCAmJiBhdXRoLnVzZXJfbnNpZCA/IGF1dGgudXNlcl9uc2lkIDogbnVsbCk7Cgl9CgoJZnVuY3Rpb24gc2lnbih1cmwsIHBhcmFtcykgewoJCWlmICghcGFyYW1zKSB7CgkJCXBhcmFtcyA9IHt9OwoJCX0KCgkJcmV0dXJuIGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgkJCXdpdGhVc2VyKGZ1bmN0aW9uKHVzZXJJZCkgewoJCQkJcGFyYW1zLnVzZXJfaWQgPSB1c2VySWQ7CgkJCQljYWxsYmFjayhnZXRBcGlVcmwodXJsLCBwYXJhbXMsIHRydWUpKTsKCQkJfSk7CgkJfTsKCX0KCglmdW5jdGlvbiBnZXRCdWRkeUljb24ocHJvZmlsZSwgc2l6ZSkgewoJCXZhciB1cmwgPSAnaHR0cHM6Ly93d3cuZmxpY2tyLmNvbS9pbWFnZXMvYnVkZHlpY29uLmdpZic7CgkJaWYgKHByb2ZpbGUubnNpZCAmJiBwcm9maWxlLmljb25zZXJ2ZXIgJiYgcHJvZmlsZS5pY29uZmFybSkgewoJCQl1cmwgPSAnaHR0cHM6Ly9mYXJtJyArIHByb2ZpbGUuaWNvbmZhcm0gKyAnLnN0YXRpY2ZsaWNrci5jb20vJyArCgkJCQlwcm9maWxlLmljb25zZXJ2ZXIgKyAnLycgKwoJCQkJJ2J1ZGR5aWNvbnMvJyArIHByb2ZpbGUubnNpZCArCgkJCQkoKHNpemUpID8gJ18nICsgc2l6ZSA6ICcnKSArICcuanBnJzsKCQl9CgoJCXJldHVybiB1cmw7Cgl9CgoJLy8gU2VlOiBodHRwczovL3d3dy5mbGlja3IuY29tL3NlcnZpY2VzL2FwaS9taXNjLnVybHMuaHRtbAoJZnVuY3Rpb24gY3JlYXRlUGhvdG9VcmwoaWQsIGZhcm0sIHNlcnZlciwgc2VjcmV0LCBzaXplKSB7CgkJc2l6ZSA9IChzaXplKSA/ICdfJyArIHNpemUgOiAnJzsKCQlyZXR1cm4gJ2h0dHBzOi8vZmFybScgKyBmYXJtICsgJy5zdGF0aWNmbGlja3IuY29tLycgKyBzZXJ2ZXIgKyAnLycgKyBpZCArICdfJyArIHNlY3JldCArIHNpemUgKyAnLmpwZyc7Cgl9CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmIChvICYmIG8uc3RhdCAmJiBvLnN0YXQudG9Mb3dlckNhc2UoKSAhPSAnb2snKSB7CgkJCW8uZXJyb3IgPSB7CgkJCQljb2RlOiAnaW52YWxpZF9yZXF1ZXN0JywKCQkJCW1lc3NhZ2U6IG8ubWVzc2FnZQoJCQl9OwoJCX0KCX0KCglmdW5jdGlvbiBmb3JtYXRQaG90b3MobykgewoJCWlmIChvLnBob3Rvc2V0IHx8IG8ucGhvdG9zKSB7CgkJCXZhciBzZXQgPSAoJ3Bob3Rvc2V0JyBpbiBvKSA/ICdwaG90b3NldCcgOiAncGhvdG9zJzsKCQkJbyA9IGNoZWNrUmVzcG9uc2Uobywgc2V0KTsKCQkJcGFnaW5nKG8pOwoJCQlvLmRhdGEgPSBvLnBob3RvOwoJCQlkZWxldGUgby5waG90bzsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvLmRhdGEubGVuZ3RoOyBpKyspIHsKCQkJCXZhciBwaG90byA9IG8uZGF0YVtpXTsKCQkJCXBob3RvLm5hbWUgPSBwaG90by50aXRsZTsKCQkJCXBob3RvLnBpY3R1cmUgPSBjcmVhdGVQaG90b1VybChwaG90by5pZCwgcGhvdG8uZmFybSwgcGhvdG8uc2VydmVyLCBwaG90by5zZWNyZXQsICcnKTsKCQkJCXBob3RvLnBpY3R1cmVzID0gY3JlYXRlUGljdHVyZXMocGhvdG8uaWQsIHBob3RvLmZhcm0sIHBob3RvLnNlcnZlciwgcGhvdG8uc2VjcmV0KTsKCQkJCXBob3RvLnNvdXJjZSA9IGNyZWF0ZVBob3RvVXJsKHBob3RvLmlkLCBwaG90by5mYXJtLCBwaG90by5zZXJ2ZXIsIHBob3RvLnNlY3JldCwgJ2InKTsKCQkJCXBob3RvLnRodW1ibmFpbCA9IGNyZWF0ZVBob3RvVXJsKHBob3RvLmlkLCBwaG90by5mYXJtLCBwaG90by5zZXJ2ZXIsIHBob3RvLnNlY3JldCwgJ20nKTsKCQkJfQoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJLy8gU2VlOiBodHRwczovL3d3dy5mbGlja3IuY29tL3NlcnZpY2VzL2FwaS9taXNjLnVybHMuaHRtbAoJZnVuY3Rpb24gY3JlYXRlUGljdHVyZXMoaWQsIGZhcm0sIHNlcnZlciwgc2VjcmV0KSB7CgoJCXZhciBOT19MSU1JVCA9IDIwNDg7CgkJdmFyIHNpemVzID0gWwoJCQl7aWQ6ICd0JywgbWF4OiAxMDB9LAoJCQl7aWQ6ICdtJywgbWF4OiAyNDB9LAoJCQl7aWQ6ICduJywgbWF4OiAzMjB9LAoJCQl7aWQ6ICcnLCBtYXg6IDUwMH0sCgkJCXtpZDogJ3onLCBtYXg6IDY0MH0sCgkJCXtpZDogJ2MnLCBtYXg6IDgwMH0sCgkJCXtpZDogJ2InLCBtYXg6IDEwMjR9LAoJCQl7aWQ6ICdoJywgbWF4OiAxNjAwfSwKCQkJe2lkOiAnaycsIG1heDogMjA0OH0sCgkJCXtpZDogJ28nLCBtYXg6IE5PX0xJTUlUfQoJCV07CgoJCXJldHVybiBzaXplcy5tYXAoZnVuY3Rpb24oc2l6ZSkgewoJCQlyZXR1cm4gewoJCQkJc291cmNlOiBjcmVhdGVQaG90b1VybChpZCwgZmFybSwgc2VydmVyLCBzZWNyZXQsIHNpemUuaWQpLAoKCQkJCS8vIE5vdGU6IHRoaXMgaXMgYSBndWVzcyB0aGF0J3MgYWxtb3N0IGNlcnRhaW4gdG8gYmUgd3JvbmcgKHVubGVzcyBzcXVhcmUgc291cmNlKQoJCQkJd2lkdGg6IHNpemUubWF4LAoJCQkJaGVpZ2h0OiBzaXplLm1heAoJCQl9OwoJCX0pOwoJfQoKCWZ1bmN0aW9uIGNoZWNrUmVzcG9uc2Uobywga2V5KSB7CgoJCWlmIChrZXkgaW4gbykgewoJCQlvID0gb1trZXldOwoJCX0KCQllbHNlIGlmICghKCdlcnJvcicgaW4gbykpIHsKCQkJby5lcnJvciA9IHsKCQkJCWNvZGU6ICdpbnZhbGlkX3JlcXVlc3QnLAoJCQkJbWVzc2FnZTogby5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZ2V0IGRhdGEgZnJvbSBGbGlja3InCgkJCX07CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRGcmllbmRzKG8pIHsKCQlmb3JtYXRFcnJvcihvKTsKCQlpZiAoby5jb250YWN0cykgewoJCQlvID0gY2hlY2tSZXNwb25zZShvLCAnY29udGFjdHMnKTsKCQkJcGFnaW5nKG8pOwoJCQlvLmRhdGEgPSBvLmNvbnRhY3Q7CgkJCWRlbGV0ZSBvLmNvbnRhY3Q7CgkJCWZvciAodmFyIGkgPSAwOyBpIDwgby5kYXRhLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgaXRlbSA9IG8uZGF0YVtpXTsKCQkJCWl0ZW0uaWQgPSBpdGVtLm5zaWQ7CgkJCQlpdGVtLm5hbWUgPSBpdGVtLnJlYWxuYW1lIHx8IGl0ZW0udXNlcm5hbWU7CgkJCQlpdGVtLnRodW1ibmFpbCA9IGdldEJ1ZGR5SWNvbihpdGVtLCAnbScpOwoJCQl9CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBwYWdpbmcocmVzKSB7CgkJaWYgKHJlcy5wYWdlICYmIHJlcy5wYWdlcyAmJiByZXMucGFnZSAhPT0gcmVzLnBhZ2VzKSB7CgkJCXJlcy5wYWdpbmcgPSB7CgkJCQluZXh0OiAnP3BhZ2U9JyArICgrK3Jlcy5wYWdlKQoJCQl9OwoJCX0KCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQlmb3Vyc3F1YXJlOiB7CgoJCQluYW1lOiAnRm91cnNxdWFyZScsCgoJCQlvYXV0aDogewoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5mb3Vyc3F1YXJlLmNvbS9vdmVydmlldy9hdXRoCgkJCQl2ZXJzaW9uOiAyLAoJCQkJYXV0aDogJ2h0dHBzOi8vZm91cnNxdWFyZS5jb20vb2F1dGgyL2F1dGhlbnRpY2F0ZScsCgkJCQlncmFudDogJ2h0dHBzOi8vZm91cnNxdWFyZS5jb20vb2F1dGgyL2FjY2Vzc190b2tlbicKCQkJfSwKCgkJCS8vIFJlZnJlc2ggdGhlIGFjY2Vzc190b2tlbiBvbmNlIGV4cGlyZWQKCQkJcmVmcmVzaDogdHJ1ZSwKCgkJCWJhc2U6ICdodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi8nLAoKCQkJZ2V0OiB7CgkJCQltZTogJ3VzZXJzL3NlbGYnLAoJCQkJJ21lL2ZyaWVuZHMnOiAndXNlcnMvc2VsZi9mcmllbmRzJywKCQkJCSdtZS9mb2xsb3dlcnMnOiAndXNlcnMvc2VsZi9mcmllbmRzJywKCQkJCSdtZS9mb2xsb3dpbmcnOiAndXNlcnMvc2VsZi9mcmllbmRzJwoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZ1bmN0aW9uKG8pIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQlpZiAobyAmJiBvLnJlc3BvbnNlKSB7CgkJCQkJCW8gPSBvLnJlc3BvbnNlLnVzZXI7CgkJCQkJCWZvcm1hdFVzZXIobyk7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihvKSB7CgkJCQkJZm9ybWF0RXJyb3Iobyk7CgoJCQkJCS8vIEZvcm1hdCBmcmllbmRzCgkJCQkJaWYgKG8gJiYgJ3Jlc3BvbnNlJyBpbiBvICYmICdmcmllbmRzJyBpbiBvLnJlc3BvbnNlICYmICdpdGVtcycgaW4gby5yZXNwb25zZS5mcmllbmRzKSB7CgkJCQkJCW8uZGF0YSA9IG8ucmVzcG9uc2UuZnJpZW5kcy5pdGVtczsKCQkJCQkJby5kYXRhLmZvckVhY2goZm9ybWF0VXNlcik7CgkJCQkJCWRlbGV0ZSBvLnJlc3BvbnNlOwoJCQkJCX0KCgkJCQkJcmV0dXJuIG87CgkJCQl9CgkJCX0sCgoJCQl4aHI6IGZvcm1hdFJlcXVlc3QsCgkJCWpzb25wOiBmb3JtYXRSZXF1ZXN0CgkJfQoJfSk7CgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmIChvLm1ldGEgJiYgKG8ubWV0YS5jb2RlID09PSA0MDAgfHwgby5tZXRhLmNvZGUgPT09IDQwMSkpIHsKCQkJby5lcnJvciA9IHsKCQkJCWNvZGU6ICdhY2Nlc3NfZGVuaWVkJywKCQkJCW1lc3NhZ2U6IG8ubWV0YS5lcnJvckRldGFpbAoJCQl9OwoJCX0KCX0KCglmdW5jdGlvbiBmb3JtYXRVc2VyKG8pIHsKCQlpZiAobyAmJiBvLmlkKSB7CgkJCW8udGh1bWJuYWlsID0gby5waG90by5wcmVmaXggKyAnMTAweDEwMCcgKyBvLnBob3RvLnN1ZmZpeDsKCQkJby5uYW1lID0gby5maXJzdE5hbWUgKyAnICcgKyBvLmxhc3ROYW1lOwoJCQlvLmZpcnN0X25hbWUgPSBvLmZpcnN0TmFtZTsKCQkJby5sYXN0X25hbWUgPSBvLmxhc3ROYW1lOwoJCQlpZiAoby5jb250YWN0KSB7CgkJCQlpZiAoby5jb250YWN0LmVtYWlsKSB7CgkJCQkJby5lbWFpbCA9IG8uY29udGFjdC5lbWFpbDsKCQkJCX0KCQkJfQoJCX0KCX0KCglmdW5jdGlvbiBmb3JtYXRSZXF1ZXN0KHAsIHFzKSB7CgkJdmFyIHRva2VuID0gcXMuYWNjZXNzX3Rva2VuOwoJCWRlbGV0ZSBxcy5hY2Nlc3NfdG9rZW47CgkJcXMub2F1dGhfdG9rZW4gPSB0b2tlbjsKCQlxcy52ID0gMjAxMjExMjU7CgkJcmV0dXJuIHRydWU7Cgl9Cgp9KShoZWxsbyk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgloZWxsby5pbml0KHsKCgkJZ2l0aHViOiB7CgoJCQluYW1lOiAnR2l0SHViJywKCgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAyLAoJCQkJYXV0aDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hdXRob3JpemUnLAoJCQkJZ3JhbnQ6ICdodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYWNjZXNzX3Rva2VuJywKCQkJCXJlc3BvbnNlX3R5cGU6ICdjb2RlJwoJCQl9LAoKCQkJc2NvcGU6IHsKCQkJCWVtYWlsOiAndXNlcjplbWFpbCcKCQkJfSwKCgkJCWJhc2U6ICdodHRwczovL2FwaS5naXRodWIuY29tLycsCgoJCQlnZXQ6IHsKCQkJCW1lOiAndXNlcicsCgkJCQknbWUvZnJpZW5kcyc6ICd1c2VyL2ZvbGxvd2luZz9wZXJfcGFnZT1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZvbGxvd2luZyc6ICd1c2VyL2ZvbGxvd2luZz9wZXJfcGFnZT1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZvbGxvd2Vycyc6ICd1c2VyL2ZvbGxvd2Vycz9wZXJfcGFnZT1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2xpa2UnOiAndXNlci9zdGFycmVkP3Blcl9wYWdlPUB7bGltaXR8MTAwfScKCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihvLCBoZWFkZXJzKSB7CgoJCQkJCWZvcm1hdEVycm9yKG8sIGhlYWRlcnMpOwoJCQkJCWZvcm1hdFVzZXIobyk7CgoJCQkJCXJldHVybiBvOwoJCQkJfSwKCgkJCQknZGVmYXVsdCc6IGZ1bmN0aW9uKG8sIGhlYWRlcnMsIHJlcSkgewoKCQkJCQlmb3JtYXRFcnJvcihvLCBoZWFkZXJzKTsKCgkJCQkJaWYgKEFycmF5LmlzQXJyYXkobykpIHsKCQkJCQkJbyA9IHtkYXRhOm99OwoJCQkJCX0KCgkJCQkJaWYgKG8uZGF0YSkgewoJCQkJCQlwYWdpbmcobywgaGVhZGVycywgcmVxKTsKCQkJCQkJby5kYXRhLmZvckVhY2goZm9ybWF0VXNlcik7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0KCQkJfSwKCgkJCXhocjogZnVuY3Rpb24ocCkgewoKCQkJCWlmIChwLm1ldGhvZCAhPT0gJ2dldCcgJiYgcC5kYXRhKSB7CgoJCQkJCS8vIFNlcmlhbGl6ZSBwYXlsb2FkIGFzIEpTT04KCQkJCQlwLmhlYWRlcnMgPSBwLmhlYWRlcnMgfHwge307CgkJCQkJcC5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJzsKCQkJCQlpZiAodHlwZW9mIChwLmRhdGEpID09PSAnb2JqZWN0JykgewoJCQkJCQlwLmRhdGEgPSBKU09OLnN0cmluZ2lmeShwLmRhdGEpOwoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCX0pOwoKCWZ1bmN0aW9uIGZvcm1hdEVycm9yKG8sIGhlYWRlcnMpIHsKCQl2YXIgY29kZSA9IGhlYWRlcnMgPyBoZWFkZXJzLnN0YXR1c0NvZGUgOiAobyAmJiAnbWV0YScgaW4gbyAmJiAnc3RhdHVzJyBpbiBvLm1ldGEgJiYgby5tZXRhLnN0YXR1cyk7CgkJaWYgKChjb2RlID09PSA0MDEgfHwgY29kZSA9PT0gNDAzKSkgewoJCQlvLmVycm9yID0gewoJCQkJY29kZTogJ2FjY2Vzc19kZW5pZWQnLAoJCQkJbWVzc2FnZTogby5tZXNzYWdlIHx8IChvLmRhdGEgPyBvLmRhdGEubWVzc2FnZSA6ICdDb3VsZCBub3QgZ2V0IHJlc3BvbnNlJykKCQkJfTsKCQkJZGVsZXRlIG8ubWVzc2FnZTsKCQl9Cgl9CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7CgkJaWYgKG8uaWQpIHsKCQkJby50aHVtYm5haWwgPSBvLnBpY3R1cmUgPSBvLmF2YXRhcl91cmw7CgkJCW8ubmFtZSA9IG8ubG9naW47CgkJfQoJfQoKCWZ1bmN0aW9uIHBhZ2luZyhyZXMsIGhlYWRlcnMsIHJlcSkgewoJCWlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5sZW5ndGggJiYgaGVhZGVycyAmJiBoZWFkZXJzLkxpbmspIHsKCQkJdmFyIG5leHQgPSBoZWFkZXJzLkxpbmsubWF0Y2goLzwoLio/KT47XHMqcmVsPVwibmV4dFwiLyk7CgkJCWlmIChuZXh0KSB7CgkJCQlyZXMucGFnaW5nID0gewoJCQkJCW5leHQ6IG5leHRbMV0KCQkJCX07CgkJCX0KCQl9Cgl9Cgp9KShoZWxsbyk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgl2YXIgY29udGFjdHNVcmwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tOC9mZWVkcy9jb250YWN0cy9kZWZhdWx0L2Z1bGw/dj0zLjAmYWx0PWpzb24mbWF4LXJlc3VsdHM9QHtsaW1pdHwxMDAwfSZzdGFydC1pbmRleD1Ae3N0YXJ0fDF9JzsKCgloZWxsby5pbml0KHsKCgkJZ29vZ2xlOiB7CgoJCQluYW1lOiAnR29vZ2xlIFBsdXMnLAoKCQkJLy8gU2VlOiBodHRwOi8vY29kZS5nb29nbGUuY29tL2FwaXMvYWNjb3VudHMvZG9jcy9PQXV0aDJVc2VyQWdlbnQuaHRtbAoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCcsCgkJCQlncmFudDogJ2h0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlbicKCQkJfSwKCgkJCS8vIEF1dGhvcml6YXRpb24gc2NvcGVzCgkJCXNjb3BlOiB7CgkJCQliYXNpYzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvcGx1cy5tZSBwcm9maWxlJywKCQkJCWVtYWlsOiAnZW1haWwnLAoJCQkJYmlydGhkYXk6ICcnLAoJCQkJZXZlbnRzOiAnJywKCQkJCXBob3RvczogJ2h0dHBzOi8vcGljYXNhd2ViLmdvb2dsZS5jb20vZGF0YS8nLAoJCQkJdmlkZW9zOiAnaHR0cDovL2dkYXRhLnlvdXR1YmUuY29tJywKCQkJCWZyaWVuZHM6ICdodHRwczovL3d3dy5nb29nbGUuY29tL204L2ZlZWRzLCBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3BsdXMubG9naW4nLAoJCQkJZmlsZXM6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLnJlYWRvbmx5JywKCQkJCXB1Ymxpc2g6ICcnLAoJCQkJcHVibGlzaF9maWxlczogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUnLAoJCQkJY3JlYXRlX2V2ZW50OiAnJywKCQkJCW9mZmxpbmVfYWNjZXNzOiAnJwoJCQl9LAoKCQkJc2NvcGVfZGVsaW06ICcgJywKCgkJCWxvZ2luOiBmdW5jdGlvbihwKSB7CgkJCQlpZiAocC5xcy5kaXNwbGF5ID09PSAnbm9uZScpIHsKCQkJCQkvLyBHb29nbGUgZG9lc24ndCBsaWtlIGRpc3BsYXk9bm9uZQoJCQkJCXAucXMuZGlzcGxheSA9ICcnOwoJCQkJfQoKCQkJCWlmIChwLnFzLnJlc3BvbnNlX3R5cGUgPT09ICdjb2RlJykgewoKCQkJCQkvLyBMZXQncyBzZXQgdGhpcyB0byBhbiBvZmZsaW5lIGFjY2VzcyB0byByZXR1cm4gYSByZWZyZXNoX3Rva2VuCgkJCQkJcC5xcy5hY2Nlc3NfdHlwZSA9ICdvZmZsaW5lJzsKCQkJCX0KCgkJCQkvLyBSZWF1dGhlbnRpY2F0ZQoJCQkJLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vaWRlbnRpdHkvcHJvdG9jb2xzLwoJCQkJaWYgKHAub3B0aW9ucy5mb3JjZSkgewoJCQkJCXAucXMuYXBwcm92YWxfcHJvbXB0ID0gJ2ZvcmNlJzsKCQkJCX0KCQkJfSwKCgkJCS8vIEFQSSBiYXNlIFVSSQoJCQliYXNlOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vJywKCgkJCS8vIE1hcCBHRVQgcmVxdWVzdHMKCQkJZ2V0OiB7CgkJCQltZTogJ3BsdXMvdjEvcGVvcGxlL21lJywKCgkJCQkvLyBEZXByZWNhdGVkIFNlcHQgMSwgMjAxNAoJCQkJLy8nbWUnOiAnb2F1dGgyL3YxL3VzZXJpbmZvP2FsdD1qc29uJywKCgkJCQkvLyBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tLysvYXBpL2xhdGVzdC9wZW9wbGUvbGlzdAoJCQkJJ21lL2ZyaWVuZHMnOiAncGx1cy92MS9wZW9wbGUvbWUvcGVvcGxlL3Zpc2libGU/bWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGNvbnRhY3RzVXJsLAoJCQkJJ21lL2ZvbGxvd2Vycyc6IGNvbnRhY3RzVXJsLAoJCQkJJ21lL2NvbnRhY3RzJzogY29udGFjdHNVcmwsCgkJCQknbWUvc2hhcmUnOiAncGx1cy92MS9wZW9wbGUvbWUvYWN0aXZpdGllcy9wdWJsaWM/bWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZlZWQnOiAncGx1cy92MS9wZW9wbGUvbWUvYWN0aXZpdGllcy9wdWJsaWM/bWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2FsYnVtcyc6ICdodHRwczovL3BpY2FzYXdlYi5nb29nbGUuY29tL2RhdGEvZmVlZC9hcGkvdXNlci9kZWZhdWx0P2FsdD1qc29uJm1heC1yZXN1bHRzPUB7bGltaXR8MTAwfSZzdGFydC1pbmRleD1Ae3N0YXJ0fDF9JywKCQkJCSdtZS9hbGJ1bSc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgkJCQkJdmFyIGtleSA9IHAucXVlcnkuaWQ7CgkJCQkJZGVsZXRlIHAucXVlcnkuaWQ7CgkJCQkJY2FsbGJhY2soa2V5LnJlcGxhY2UoJy9lbnRyeS8nLCAnL2ZlZWQvJykpOwoJCQkJfSwKCgkJCQknbWUvcGhvdG9zJzogJ2h0dHBzOi8vcGljYXNhd2ViLmdvb2dsZS5jb20vZGF0YS9mZWVkL2FwaS91c2VyL2RlZmF1bHQ/YWx0PWpzb24ma2luZD1waG90byZtYXgtcmVzdWx0cz1Ae2xpbWl0fDEwMH0mc3RhcnQtaW5kZXg9QHtzdGFydHwxfScsCgoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS92Mi9yZWZlcmVuY2UvZmlsZXMvbGlzdAoJCQkJJ21lL2ZpbGUnOiAnZHJpdmUvdjIvZmlsZXMvQHtpZH0nLAoJCQkJJ21lL2ZpbGVzJzogJ2RyaXZlL3YyL2ZpbGVzP3E9JTIyQHtwYXJlbnR8cm9vdH0lMjIraW4rcGFyZW50cythbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfScsCgoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS92Mi9yZWZlcmVuY2UvZmlsZXMvbGlzdAoJCQkJJ21lL2ZvbGRlcnMnOiAnZHJpdmUvdjIvZmlsZXM/cT0lMjJAe2lkfHJvb3R9JTIyK2luK3BhcmVudHMrYW5kK21pbWVUeXBlKz0rJTIyYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlciUyMithbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfScsCgoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS92Mi9yZWZlcmVuY2UvZmlsZXMvbGlzdAoJCQkJJ21lL2ZvbGRlcic6ICdkcml2ZS92Mi9maWxlcz9xPSUyMkB7aWR8cm9vdH0lMjIraW4rcGFyZW50cythbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfScKCQkJfSwKCgkJCS8vIE1hcCBQT1NUIHJlcXVlc3RzCgkJCXBvc3Q6IHsKCgkJCQkvLyBHb29nbGUgRHJpdmUKCQkJCSdtZS9maWxlcyc6IHVwbG9hZERyaXZlLAoJCQkJJ21lL2ZvbGRlcnMnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoJCQkJCXAuZGF0YSA9IHsKCQkJCQkJdGl0bGU6IHAuZGF0YS5uYW1lLAoJCQkJCQlwYXJlbnRzOiBbe2lkOiBwLmRhdGEucGFyZW50IHx8ICdyb290J31dLAoJCQkJCQltaW1lVHlwZTogJ2FwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXInCgkJCQkJfTsKCQkJCQljYWxsYmFjaygnZHJpdmUvdjIvZmlsZXMnKTsKCQkJCX0KCQkJfSwKCgkJCS8vIE1hcCBQVVQgcmVxdWVzdHMKCQkJcHV0OiB7CgkJCQknbWUvZmlsZXMnOiB1cGxvYWREcml2ZQoJCQl9LAoKCQkJLy8gTWFwIERFTEVURSByZXF1ZXN0cwoJCQlkZWw6IHsKCQkJCSdtZS9maWxlcyc6ICdkcml2ZS92Mi9maWxlcy9Ae2lkfScsCgkJCQknbWUvZm9sZGVyJzogJ2RyaXZlL3YyL2ZpbGVzL0B7aWR9JwoJCQl9LAoKCQkJLy8gTWFwIFBBVENIIHJlcXVlc3RzCgkJCXBhdGNoOiB7CgkJCQknbWUvZmlsZSc6ICdkcml2ZS92Mi9maWxlcy9Ae2lkfScKCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihvKSB7CgkJCQkJaWYgKG8uaWQpIHsKCQkJCQkJby5sYXN0X25hbWUgPSBvLmZhbWlseV9uYW1lIHx8IChvLm5hbWUgPyBvLm5hbWUuZmFtaWx5TmFtZSA6IG51bGwpOwoJCQkJCQlvLmZpcnN0X25hbWUgPSBvLmdpdmVuX25hbWUgfHwgKG8ubmFtZSA/IG8ubmFtZS5naXZlbk5hbWUgOiBudWxsKTsKCgkJCQkJCWlmIChvLmVtYWlscyAmJiBvLmVtYWlscy5sZW5ndGgpIHsKCQkJCQkJCW8uZW1haWwgPSBvLmVtYWlsc1swXS52YWx1ZTsKCQkJCQkJfQoKCQkJCQkJZm9ybWF0UGVyc29uKG8pOwoJCQkJCX0KCgkJCQkJcmV0dXJuIG87CgkJCQl9LAoKCQkJCSdtZS9mcmllbmRzJzogZnVuY3Rpb24obykgewoJCQkJCWlmIChvLml0ZW1zKSB7CgkJCQkJCXBhZ2luZyhvKTsKCQkJCQkJby5kYXRhID0gby5pdGVtczsKCQkJCQkJby5kYXRhLmZvckVhY2goZm9ybWF0UGVyc29uKTsKCQkJCQkJZGVsZXRlIG8uaXRlbXM7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ21lL2NvbnRhY3RzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvc2hhcmUnOiBmb3JtYXRGZWVkLAoJCQkJJ21lL2ZlZWQnOiBmb3JtYXRGZWVkLAoJCQkJJ21lL2FsYnVtcyc6IGdFbnRyeSwKCQkJCSdtZS9waG90b3MnOiBmb3JtYXRQaG90b3MsCgkJCQknZGVmYXVsdCc6IGdFbnRyeQoJCQl9LAoKCQkJeGhyOiBmdW5jdGlvbihwKSB7CgoJCQkJaWYgKHAubWV0aG9kID09PSAncG9zdCcgfHwgcC5tZXRob2QgPT09ICdwdXQnKSB7CgkJCQkJdG9KU09OKHApOwoJCQkJfQoJCQkJZWxzZSBpZiAocC5tZXRob2QgPT09ICdwYXRjaCcpIHsKCQkJCQloZWxsby51dGlscy5leHRlbmQocC5xdWVyeSwgcC5kYXRhKTsKCQkJCQlwLmRhdGEgPSBudWxsOwoJCQkJfQoKCQkJCXJldHVybiB0cnVlOwoJCQl9LAoKCQkJLy8gRG9uJ3QgZXZlbiB0cnkgc3VibWl0dGluZyB2aWEgZm9ybS4KCQkJLy8gVGhpcyBtZWFucyBubyBQT1NUIG9wZXJhdGlvbnMgaW4gPD1JRTkKCQkJZm9ybTogZmFsc2UKCQl9Cgl9KTsKCglmdW5jdGlvbiB0b0ludChzKSB7CgkJcmV0dXJuIHBhcnNlSW50KHMsIDEwKTsKCX0KCglmdW5jdGlvbiBmb3JtYXRGZWVkKG8pIHsKCQlwYWdpbmcobyk7CgkJby5kYXRhID0gby5pdGVtczsKCQlkZWxldGUgby5pdGVtczsKCQlyZXR1cm4gbzsKCX0KCgkvLyBGb3JtYXQ6IGVuc3VyZSBlYWNoIHJlY29yZCBjb250YWlucyBhIG5hbWUsIGlkIGV0Yy4KCWZ1bmN0aW9uIGZvcm1hdEl0ZW0obykgewoJCWlmIChvLmVycm9yKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICghby5uYW1lKSB7CgkJCW8ubmFtZSA9IG8udGl0bGUgfHwgby5tZXNzYWdlOwoJCX0KCgkJaWYgKCFvLnBpY3R1cmUpIHsKCQkJby5waWN0dXJlID0gby50aHVtYm5haWxMaW5rOwoJCX0KCgkJaWYgKCFvLnRodW1ibmFpbCkgewoJCQlvLnRodW1ibmFpbCA9IG8udGh1bWJuYWlsTGluazsKCQl9CgoJCWlmIChvLm1pbWVUeXBlID09PSAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlcicpIHsKCQkJby50eXBlID0gJ2ZvbGRlcic7CgkJCW8uZmlsZXMgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjIvZmlsZXM/cT0lMjInICsgby5pZCArICclMjIraW4rcGFyZW50cyc7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRJbWFnZShpbWFnZSkgewoJCXJldHVybiB7CgkJCXNvdXJjZTogaW1hZ2UudXJsLAoJCQl3aWR0aDogaW1hZ2Uud2lkdGgsCgkJCWhlaWdodDogaW1hZ2UuaGVpZ2h0CgkJfTsKCX0KCglmdW5jdGlvbiBmb3JtYXRQaG90b3MobykgewoJCW8uZGF0YSA9IG8uZmVlZC5lbnRyeS5tYXAoZm9ybWF0RW50cnkpOwoJCWRlbGV0ZSBvLmZlZWQ7Cgl9CgoJLy8gR29vZ2xlIGhhcyBhIGhvcnJpYmxlIEpTT04gQVBJCglmdW5jdGlvbiBnRW50cnkobykgewoJCXBhZ2luZyhvKTsKCgkJaWYgKCdmZWVkJyBpbiBvICYmICdlbnRyeScgaW4gby5mZWVkKSB7CgkJCW8uZGF0YSA9IG8uZmVlZC5lbnRyeS5tYXAoZm9ybWF0RW50cnkpOwoJCQlkZWxldGUgby5mZWVkOwoJCX0KCgkJLy8gT2xkIHN0eWxlOiBQaWNhc2EsIGV0Yy4KCQllbHNlIGlmICgnZW50cnknIGluIG8pIHsKCQkJcmV0dXJuIGZvcm1hdEVudHJ5KG8uZW50cnkpOwoJCX0KCgkJLy8gTmV3IHN0eWxlOiBHb29nbGUgRHJpdmUgJiBQbHVzCgkJZWxzZSBpZiAoJ2l0ZW1zJyBpbiBvKSB7CgkJCW8uZGF0YSA9IG8uaXRlbXMubWFwKGZvcm1hdEl0ZW0pOwoJCQlkZWxldGUgby5pdGVtczsKCQl9CgkJZWxzZSB7CgkJCWZvcm1hdEl0ZW0obyk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRQZXJzb24obykgewoJCW8ubmFtZSA9IG8uZGlzcGxheU5hbWUgfHwgby5uYW1lOwoJCW8ucGljdHVyZSA9IG8ucGljdHVyZSB8fCAoby5pbWFnZSA/IG8uaW1hZ2UudXJsIDogbnVsbCk7CgkJby50aHVtYm5haWwgPSBvLnBpY3R1cmU7Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvLCBoZWFkZXJzLCByZXEpIHsKCQlwYWdpbmcobyk7CgkJdmFyIHIgPSBbXTsKCQlpZiAoJ2ZlZWQnIGluIG8gJiYgJ2VudHJ5JyBpbiBvLmZlZWQpIHsKCQkJdmFyIHRva2VuID0gcmVxLnF1ZXJ5LmFjY2Vzc190b2tlbjsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvLmZlZWQuZW50cnkubGVuZ3RoOyBpKyspIHsKCQkJCXZhciBhID0gby5mZWVkLmVudHJ5W2ldOwoKCQkJCWEuaWQJPSBhLmlkLiR0OwoJCQkJYS5uYW1lCT0gYS50aXRsZS4kdDsKCQkJCWRlbGV0ZSBhLnRpdGxlOwoJCQkJaWYgKGEuZ2QkZW1haWwpIHsKCQkJCQlhLmVtYWlsCT0gKGEuZ2QkZW1haWwgJiYgYS5nZCRlbWFpbC5sZW5ndGggPiAwKSA/IGEuZ2QkZW1haWxbMF0uYWRkcmVzcyA6IG51bGw7CgkJCQkJYS5lbWFpbHMgPSBhLmdkJGVtYWlsOwoJCQkJCWRlbGV0ZSBhLmdkJGVtYWlsOwoJCQkJfQoKCQkJCWlmIChhLnVwZGF0ZWQpIHsKCQkJCQlhLnVwZGF0ZWQgPSBhLnVwZGF0ZWQuJHQ7CgkJCQl9CgoJCQkJaWYgKGEubGluaykgewoKCQkJCQl2YXIgcGljID0gKGEubGluay5sZW5ndGggPiAwKSA/IGEubGlua1swXS5ocmVmIDogbnVsbDsKCQkJCQlpZiAocGljICYmIGEubGlua1swXS5nZCRldGFnKSB7CgkJCQkJCXBpYyArPSAocGljLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nKSArICdhY2Nlc3NfdG9rZW49JyArIHRva2VuOwoJCQkJCQlhLnBpY3R1cmUgPSBwaWM7CgkJCQkJCWEudGh1bWJuYWlsID0gcGljOwoJCQkJCX0KCgkJCQkJZGVsZXRlIGEubGluazsKCQkJCX0KCgkJCQlpZiAoYS5jYXRlZ29yeSkgewoJCQkJCWRlbGV0ZSBhLmNhdGVnb3J5OwoJCQkJfQoJCQl9CgoJCQlvLmRhdGEgPSBvLmZlZWQuZW50cnk7CgkJCWRlbGV0ZSBvLmZlZWQ7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRFbnRyeShhKSB7CgoJCXZhciBncm91cCA9IGEubWVkaWEkZ3JvdXA7CgkJdmFyIHBob3RvID0gZ3JvdXAubWVkaWEkY29udGVudC5sZW5ndGggPyBncm91cC5tZWRpYSRjb250ZW50WzBdIDoge307CgkJdmFyIG1lZGlhQ29udGVudCA9IGdyb3VwLm1lZGlhJGNvbnRlbnQgfHwgW107CgkJdmFyIG1lZGlhVGh1bWJuYWlsID0gZ3JvdXAubWVkaWEkdGh1bWJuYWlsIHx8IFtdOwoKCQl2YXIgcGljdHVyZXMgPSBtZWRpYUNvbnRlbnQKCQkJLmNvbmNhdChtZWRpYVRodW1ibmFpbCkKCQkJLm1hcChmb3JtYXRJbWFnZSkKCQkJLnNvcnQoZnVuY3Rpb24oYSwgYikgewoJCQkJcmV0dXJuIGEud2lkdGggLSBiLndpZHRoOwoJCQl9KTsKCgkJdmFyIGkgPSAwOwoJCXZhciBfYTsKCQl2YXIgcCA9IHsKCQkJaWQ6IGEuaWQuJHQsCgkJCW5hbWU6IGEudGl0bGUuJHQsCgkJCWRlc2NyaXB0aW9uOiBhLnN1bW1hcnkuJHQsCgkJCXVwZGF0ZWRfdGltZTogYS51cGRhdGVkLiR0LAoJCQljcmVhdGVkX3RpbWU6IGEucHVibGlzaGVkLiR0LAoJCQlwaWN0dXJlOiBwaG90byA/IHBob3RvLnVybCA6IG51bGwsCgkJCXBpY3R1cmVzOiBwaWN0dXJlcywKCQkJaW1hZ2VzOiBbXSwKCQkJdGh1bWJuYWlsOiBwaG90byA/IHBob3RvLnVybCA6IG51bGwsCgkJCXdpZHRoOiBwaG90by53aWR0aCwKCQkJaGVpZ2h0OiBwaG90by5oZWlnaHQKCQl9OwoKCQkvLyBHZXQgZmVlZC9jaGlsZHJlbgoJCWlmICgnbGluaycgaW4gYSkgewoJCQlmb3IgKGkgPSAwOyBpIDwgYS5saW5rLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgZCA9IGEubGlua1tpXTsKCQkJCWlmIChkLnJlbC5tYXRjaCgvXCNmZWVkJC8pKSB7CgkJCQkJcC51cGxvYWRfbG9jYXRpb24gPSBwLmZpbGVzID0gcC5waG90b3MgPSBkLmhyZWY7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9CgoJCS8vIEdldCBpbWFnZXMgb2YgZGlmZmVyZW50IHNjYWxlcwoJCWlmICgnY2F0ZWdvcnknIGluIGEgJiYgYS5jYXRlZ29yeS5sZW5ndGgpIHsKCQkJX2EgPSBhLmNhdGVnb3J5OwoJCQlmb3IgKGkgPSAwOyBpIDwgX2EubGVuZ3RoOyBpKyspIHsKCQkJCWlmIChfYVtpXS5zY2hlbWUgJiYgX2FbaV0uc2NoZW1lLm1hdGNoKC9cI2tpbmQkLykpIHsKCQkJCQlwLnR5cGUgPSBfYVtpXS50ZXJtLnJlcGxhY2UoL14uKj9cIy8sICcnKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gR2V0IGltYWdlcyBvZiBkaWZmZXJlbnQgc2NhbGVzCgkJaWYgKCdtZWRpYSR0aHVtYm5haWwnIGluIGdyb3VwICYmIGdyb3VwLm1lZGlhJHRodW1ibmFpbC5sZW5ndGgpIHsKCQkJX2EgPSBncm91cC5tZWRpYSR0aHVtYm5haWw7CgkJCXAudGh1bWJuYWlsID0gX2FbMF0udXJsOwoJCQlwLmltYWdlcyA9IF9hLm1hcChmb3JtYXRJbWFnZSk7CgkJfQoKCQlfYSA9IGdyb3VwLm1lZGlhJGNvbnRlbnQ7CgoJCWlmIChfYSAmJiBfYS5sZW5ndGgpIHsKCQkJcC5pbWFnZXMucHVzaChmb3JtYXRJbWFnZShfYVswXSkpOwoJCX0KCgkJcmV0dXJuIHA7Cgl9CgoJZnVuY3Rpb24gcGFnaW5nKHJlcykgewoKCQkvLyBDb250YWN0cyBWMgoJCWlmICgnZmVlZCcgaW4gcmVzICYmIHJlcy5mZWVkLm9wZW5TZWFyY2gkaXRlbXNQZXJQYWdlKSB7CgkJCXZhciBsaW1pdCA9IHRvSW50KHJlcy5mZWVkLm9wZW5TZWFyY2gkaXRlbXNQZXJQYWdlLiR0KTsKCQkJdmFyIHN0YXJ0ID0gdG9JbnQocmVzLmZlZWQub3BlblNlYXJjaCRzdGFydEluZGV4LiR0KTsKCQkJdmFyIHRvdGFsID0gdG9JbnQocmVzLmZlZWQub3BlblNlYXJjaCR0b3RhbFJlc3VsdHMuJHQpOwoKCQkJaWYgKChzdGFydCArIGxpbWl0KSA8IHRvdGFsKSB7CgkJCQlyZXMucGFnaW5nID0gewoJCQkJCW5leHQ6ICc/c3RhcnQ9JyArIChzdGFydCArIGxpbWl0KQoJCQkJfTsKCQkJfQoJCX0KCQllbHNlIGlmICgnbmV4dFBhZ2VUb2tlbicgaW4gcmVzKSB7CgkJCXJlcy5wYWdpbmcgPSB7CgkJCQluZXh0OiAnP3BhZ2VUb2tlbj0nICsgcmVzLm5leHRQYWdlVG9rZW4KCQkJfTsKCQl9Cgl9CgoJLy8gQ29uc3RydWN0IGEgbXVsdGlwYXJ0IG1lc3NhZ2UKCWZ1bmN0aW9uIE11bHRpcGFydCgpIHsKCgkJLy8gSW50ZXJuYWwgYm9keQoJCXZhciBib2R5ID0gW107CgkJdmFyIGJvdW5kYXJ5ID0gKE1hdGgucmFuZG9tKCkgKiAxZTEwKS50b1N0cmluZygzMik7CgkJdmFyIGNvdW50ZXIgPSAwOwoJCXZhciBsaW5lQnJlYWsgPSAnXHJcbic7CgkJdmFyIGRlbGltID0gbGluZUJyZWFrICsgJy0tJyArIGJvdW5kYXJ5OwoJCXZhciByZWFkeSA9IGZ1bmN0aW9uKCkge307CgoJCXZhciBkYXRhVXJpID0gL15kYXRhXDooW147LF0rKFw7Y2hhcnNldD1bXjssXSspPykoXDtiYXNlNjQpPywvaTsKCgkJLy8gQWRkIGZpbGUKCQlmdW5jdGlvbiBhZGRGaWxlKGl0ZW0pIHsKCQkJdmFyIGZyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQkJZnIub25sb2FkID0gZnVuY3Rpb24oZSkgewoJCQkJYWRkQ29udGVudChidG9hKGUudGFyZ2V0LnJlc3VsdCksIGl0ZW0udHlwZSArIGxpbmVCcmVhayArICdDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiBiYXNlNjQnKTsKCQkJfTsKCgkJCWZyLnJlYWRBc0JpbmFyeVN0cmluZyhpdGVtKTsKCQl9CgoJCS8vIEFkZCBjb250ZW50CgkJZnVuY3Rpb24gYWRkQ29udGVudChjb250ZW50LCB0eXBlKSB7CgkJCWJvZHkucHVzaChsaW5lQnJlYWsgKyAnQ29udGVudC1UeXBlOiAnICsgdHlwZSArIGxpbmVCcmVhayArIGxpbmVCcmVhayArIGNvbnRlbnQpOwoJCQljb3VudGVyLS07CgkJCXJlYWR5KCk7CgkJfQoKCQkvLyBBZGQgbmV3IHRoaW5ncyB0byB0aGUgb2JqZWN0CgkJdGhpcy5hcHBlbmQgPSBmdW5jdGlvbihjb250ZW50LCB0eXBlKSB7CgoJCQkvLyBEb2VzIHRoZSBjb250ZW50IGhhdmUgYW4gYXJyYXkKCQkJaWYgKHR5cGVvZiAoY29udGVudCkgPT09ICdzdHJpbmcnIHx8ICEoJ2xlbmd0aCcgaW4gT2JqZWN0KGNvbnRlbnQpKSkgewoJCQkJLy8gQ29udmVydGkgdG8gbXVsdGlwbGVzCgkJCQljb250ZW50ID0gW2NvbnRlbnRdOwoJCQl9CgoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyBpKyspIHsKCgkJCQljb3VudGVyKys7CgoJCQkJdmFyIGl0ZW0gPSBjb250ZW50W2ldOwoKCQkJCS8vIElzIHRoaXMgYSBmaWxlPwoJCQkJLy8gRmlsZXMgY2FuIGJlIGVpdGhlciBCbG9icyBvciBGaWxlIHR5cGVzCgkJCQlpZiAoCgkJCQkJKHR5cGVvZiAoRmlsZSkgIT09ICd1bmRlZmluZWQnICYmIGl0ZW0gaW5zdGFuY2VvZiBGaWxlKSB8fAoJCQkJCSh0eXBlb2YgKEJsb2IpICE9PSAndW5kZWZpbmVkJyAmJiBpdGVtIGluc3RhbmNlb2YgQmxvYikKCQkJCSkgewoJCQkJCS8vIFJlYWQgdGhlIGZpbGUgaW4KCQkJCQlhZGRGaWxlKGl0ZW0pOwoJCQkJfQoKCQkJCS8vIERhdGEtVVJJPwoJCQkJLy8gRGF0YTpbPG1pbWUgdHlwZT5dWztjaGFyc2V0PTxjaGFyc2V0Pl1bO2Jhc2U2NF0sPGVuY29kZWQgZGF0YT4KCQkJCS8vIC9eZGF0YVw6KFteOyxdKyhcO2NoYXJzZXQ9W147LF0rKT8pKFw7YmFzZTY0KT8sL2kKCQkJCWVsc2UgaWYgKHR5cGVvZiAoaXRlbSkgPT09ICdzdHJpbmcnICYmIGl0ZW0ubWF0Y2goZGF0YVVyaSkpIHsKCQkJCQl2YXIgbSA9IGl0ZW0ubWF0Y2goZGF0YVVyaSk7CgkJCQkJYWRkQ29udGVudChpdGVtLnJlcGxhY2UoZGF0YVVyaSwgJycpLCBtWzFdICsgbGluZUJyZWFrICsgJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IGJhc2U2NCcpOwoJCQkJfQoKCQkJCS8vIFJlZ3VsYXIgc3RyaW5nCgkJCQllbHNlIHsKCQkJCQlhZGRDb250ZW50KGl0ZW0sIHR5cGUpOwoJCQkJfQoJCQl9CgkJfTsKCgkJdGhpcy5vbnJlYWR5ID0gZnVuY3Rpb24oZm4pIHsKCQkJcmVhZHkgPSBmdW5jdGlvbigpIHsKCQkJCWlmIChjb3VudGVyID09PSAwKSB7CgkJCQkJLy8gVHJpZ2dlciByZWFkeQoJCQkJCWJvZHkudW5zaGlmdCgnJyk7CgkJCQkJYm9keS5wdXNoKCctLScpOwoJCQkJCWZuKGJvZHkuam9pbihkZWxpbSksIGJvdW5kYXJ5KTsKCQkJCQlib2R5ID0gW107CgkJCQl9CgkJCX07CgoJCQlyZWFkeSgpOwoJCX07Cgl9CgoJLy8gVXBsb2FkIHRvIERyaXZlCgkvLyBJZiB0aGlzIGlzIFBVVCB0aGVuIG9ubHkgYXVnbWVudCB0aGUgZmlsZSB1cGxvYWRlZAoJLy8gUFVUIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2RyaXZlL3YyL3JlZmVyZW5jZS9maWxlcy91cGRhdGUKCS8vIFBPU1QgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZHJpdmUvbWFuYWdlLXVwbG9hZHMKCWZ1bmN0aW9uIHVwbG9hZERyaXZlKHAsIGNhbGxiYWNrKSB7CgoJCXZhciBkYXRhID0ge307CgoJCS8vIFRlc3QgZm9yIERPTSBlbGVtZW50CgkJaWYgKHAuZGF0YSAmJgoJCQkodHlwZW9mIChIVE1MSW5wdXRFbGVtZW50KSAhPT0gJ3VuZGVmaW5lZCcgJiYgcC5kYXRhIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkKCQkpIHsKCQkJcC5kYXRhID0ge2ZpbGU6IHAuZGF0YX07CgkJfQoKCQlpZiAoIXAuZGF0YS5uYW1lICYmIE9iamVjdChPYmplY3QocC5kYXRhLmZpbGUpLmZpbGVzKS5sZW5ndGggJiYgcC5tZXRob2QgPT09ICdwb3N0JykgewoJCQlwLmRhdGEubmFtZSA9IHAuZGF0YS5maWxlLmZpbGVzWzBdLm5hbWU7CgkJfQoKCQlpZiAocC5tZXRob2QgPT09ICdwb3N0JykgewoJCQlwLmRhdGEgPSB7CgkJCQl0aXRsZTogcC5kYXRhLm5hbWUsCgkJCQlwYXJlbnRzOiBbe2lkOiBwLmRhdGEucGFyZW50IHx8ICdyb290J31dLAoJCQkJZmlsZTogcC5kYXRhLmZpbGUKCQkJfTsKCQl9CgkJZWxzZSB7CgoJCQkvLyBNYWtlIGEgcmVmZXJlbmNlCgkJCWRhdGEgPSBwLmRhdGE7CgkJCXAuZGF0YSA9IHt9OwoKCQkJLy8gQWRkIHRoZSBwYXJ0cyB0byBjaGFuZ2UgYXMgcmVxdWlyZWQKCQkJaWYgKGRhdGEucGFyZW50KSB7CgkJCQlwLmRhdGEucGFyZW50cyA9IFt7aWQ6IHAuZGF0YS5wYXJlbnQgfHwgJ3Jvb3QnfV07CgkJCX0KCgkJCWlmIChkYXRhLmZpbGUpIHsKCQkJCXAuZGF0YS5maWxlID0gZGF0YS5maWxlOwoJCQl9CgoJCQlpZiAoZGF0YS5uYW1lKSB7CgkJCQlwLmRhdGEudGl0bGUgPSBkYXRhLm5hbWU7CgkJCX0KCQl9CgoJCS8vIEV4dHJhY3QgdGhlIGZpbGUsIGlmIGl0IGV4aXN0cyBmcm9tIHRoZSBkYXRhIG9iamVjdAoJCS8vIElmIHRoZSBGaWxlIGlzIGFuIElOUFVUIGVsZW1lbnQgbGV0cyBqdXN0IGNvbmNlcm4gb3Vyc2VsdmVzIHdpdGggdGhlIE5vZGVMaXN0CgkJdmFyIGZpbGU7CgkJaWYgKCdmaWxlJyBpbiBwLmRhdGEpIHsKCQkJZmlsZSA9IHAuZGF0YS5maWxlOwoJCQlkZWxldGUgcC5kYXRhLmZpbGU7CgoJCQlpZiAodHlwZW9mIChmaWxlKSA9PT0gJ29iamVjdCcgJiYgJ2ZpbGVzJyBpbiBmaWxlKSB7CgkJCQkvLyBBc3NpZ24gdGhlIE5vZGVMaXN0CgkJCQlmaWxlID0gZmlsZS5maWxlczsKCQkJfQoKCQkJaWYgKCFmaWxlIHx8ICFmaWxlLmxlbmd0aCkgewoJCQkJY2FsbGJhY2soewoJCQkJCWVycm9yOiB7CgkJCQkJCWNvZGU6ICdyZXF1ZXN0X2ludmFsaWQnLAoJCQkJCQltZXNzYWdlOiAnVGhlcmUgd2VyZSBubyBmaWxlcyBhdHRhY2hlZCB3aXRoIHRoaXMgcmVxdWVzdCB0byB1cGxvYWQnCgkJCQkJfQoJCQkJfSk7CgkJCQlyZXR1cm47CgkJCX0KCQl9CgoJCS8vIFNldCB0eXBlIHAuZGF0YS5taW1lVHlwZSA9IE9iamVjdChmaWxlWzBdKS50eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nOwoKCQkvLyBDb25zdHJ1Y3QgYSBtdWx0aXBhcnQgbWVzc2FnZQoJCXZhciBwYXJ0cyA9IG5ldyBNdWx0aXBhcnQoKTsKCQlwYXJ0cy5hcHBlbmQoSlNPTi5zdHJpbmdpZnkocC5kYXRhKSwgJ2FwcGxpY2F0aW9uL2pzb24nKTsKCgkJLy8gUmVhZCB0aGUgZmlsZSBpbnRvIGEgIGJhc2U2NCBzdHJpbmcuLi4geWVwIGEgaGFzc2xlLCBpIGtub3cKCQkvLyBGb3JtRGF0YSBkb2Vzbid0IGxldCB1cyBhc3NpZ24gb3VyIG93biBNdWx0aXBhcnQgaGVhZGVycyBhbmQgSFRUUCBDb250ZW50LVR5cGUKCQkvLyBBbGFzIEdvb2dsZUFwaSBuZWVkIHRoZXNlIGluIGEgcGFydGljdWxhciBmb3JtYXQKCQlpZiAoZmlsZSkgewoJCQlwYXJ0cy5hcHBlbmQoZmlsZSk7CgkJfQoKCQlwYXJ0cy5vbnJlYWR5KGZ1bmN0aW9uKGJvZHksIGJvdW5kYXJ5KSB7CgoJCQlwLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gJ211bHRpcGFydC9yZWxhdGVkOyBib3VuZGFyeT0iJyArIGJvdW5kYXJ5ICsgJyInOwoJCQlwLmRhdGEgPSBib2R5OwoKCQkJY2FsbGJhY2soJ3VwbG9hZC9kcml2ZS92Mi9maWxlcycgKyAoZGF0YS5pZCA/ICcvJyArIGRhdGEuaWQgOiAnJykgKyAnP3VwbG9hZFR5cGU9bXVsdGlwYXJ0Jyk7CgkJfSk7CgoJfQoKCWZ1bmN0aW9uIHRvSlNPTihwKSB7CgkJaWYgKHR5cGVvZiAocC5kYXRhKSA9PT0gJ29iamVjdCcpIHsKCQkJLy8gQ29udmVydCB0aGUgUE9TVCBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QKCQkJdHJ5IHsKCQkJCXAuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHAuZGF0YSk7CgkJCQlwLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwoJCQl9CgkJCWNhdGNoIChlKSB7fQoJCX0KCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQlpbnN0YWdyYW06IHsKCgkJCW5hbWU6ICdJbnN0YWdyYW0nLAoKCQkJb2F1dGg6IHsKCQkJCS8vIFNlZTogaHR0cDovL2luc3RhZ3JhbS5jb20vZGV2ZWxvcGVyL2F1dGhlbnRpY2F0aW9uLwoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL2luc3RhZ3JhbS5jb20vb2F1dGgvYXV0aG9yaXplLycsCgkJCQlncmFudDogJ2h0dHBzOi8vYXBpLmluc3RhZ3JhbS5jb20vb2F1dGgvYWNjZXNzX3Rva2VuJwoJCQl9LAoKCQkJLy8gUmVmcmVzaCB0aGUgYWNjZXNzX3Rva2VuIG9uY2UgZXhwaXJlZAoJCQlyZWZyZXNoOiB0cnVlLAoKCQkJc2NvcGU6IHsKCQkJCWJhc2ljOiAnYmFzaWMnLAoJCQkJcGhvdG9zOiAnJywKCQkJCWZyaWVuZHM6ICdyZWxhdGlvbnNoaXBzJywKCQkJCXB1Ymxpc2g6ICdsaWtlcyBjb21tZW50cycKCQkJfSwKCgkJCXNjb3BlX2RlbGltOiAnICcsCgoJCQlsb2dpbjogZnVuY3Rpb24ocCkgewoJCQkJLy8gSW5zdGFncmFtIHRocm93cyBlcnJvcnMgbGlrZSAnSmF2YVNjcmlwdCBBUEkgaXMgdW5zdXBwb3J0ZWQnIGlmIHRoZSBkaXNwbGF5IGlzICdwb3B1cCcuCgkJCQkvLyBNYWtlIHRoZSBkaXNwbGF5IGFueXRoaW5nIGJ1dCAncG9wdXAnCgkJCQlwLnFzLmRpc3BsYXkgPSAnJzsKCQkJfSwKCgkJCWJhc2U6ICdodHRwczovL2FwaS5pbnN0YWdyYW0uY29tL3YxLycsCgoJCQlnZXQ6IHsKCQkJCW1lOiAndXNlcnMvc2VsZicsCgkJCQknbWUvZmVlZCc6ICd1c2Vycy9zZWxmL2ZlZWQ/Y291bnQ9QHtsaW1pdHwxMDB9JywKCQkJCSdtZS9waG90b3MnOiAndXNlcnMvc2VsZi9tZWRpYS9yZWNlbnQ/bWluX2lkPTAmY291bnQ9QHtsaW1pdHwxMDB9JywKCQkJCSdtZS9mcmllbmRzJzogJ3VzZXJzL3NlbGYvZm9sbG93cz9jb3VudD1Ae2xpbWl0fDEwMH0nLAoJCQkJJ21lL2ZvbGxvd2luZyc6ICd1c2Vycy9zZWxmL2ZvbGxvd3M/Y291bnQ9QHtsaW1pdHwxMDB9JywKCQkJCSdtZS9mb2xsb3dlcnMnOiAndXNlcnMvc2VsZi9mb2xsb3dlZC1ieT9jb3VudD1Ae2xpbWl0fDEwMH0nLAoJCQkJJ2ZyaWVuZC9waG90b3MnOiAndXNlcnMvQHtpZH0vbWVkaWEvcmVjZW50P21pbl9pZD0wJmNvdW50PUB7bGltaXR8MTAwfScKCQkJfSwKCgkJCXBvc3Q6IHsKCQkJCSdtZS9saWtlJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQl2YXIgaWQgPSBwLmRhdGEuaWQ7CgkJCQkJcC5kYXRhID0ge307CgkJCQkJY2FsbGJhY2soJ21lZGlhLycgKyBpZCArICcvbGlrZXMnKTsKCQkJCX0KCQkJfSwKCgkJCWRlbDogewoJCQkJJ21lL2xpa2UnOiAnbWVkaWEvQHtpZH0vbGlrZXMnCgkJCX0sCgoJCQl3cmFwOiB7CgkJCQltZTogZnVuY3Rpb24obykgewoKCQkJCQlmb3JtYXRFcnJvcihvKTsKCgkJCQkJaWYgKCdkYXRhJyBpbiBvKSB7CgkJCQkJCW8uaWQgPSBvLmRhdGEuaWQ7CgkJCQkJCW8udGh1bWJuYWlsID0gby5kYXRhLnByb2ZpbGVfcGljdHVyZTsKCQkJCQkJby5uYW1lID0gby5kYXRhLmZ1bGxfbmFtZSB8fCBvLmRhdGEudXNlcm5hbWU7CgkJCQkJfQoKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93ZXJzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9waG90b3MnOiBmdW5jdGlvbihvKSB7CgoJCQkJCWZvcm1hdEVycm9yKG8pOwoJCQkJCXBhZ2luZyhvKTsKCgkJCQkJaWYgKCdkYXRhJyBpbiBvKSB7CgkJCQkJCW8uZGF0YSA9IG8uZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCkgewoJCQkJCQkJcmV0dXJuIGQudHlwZSA9PT0gJ2ltYWdlJzsKCQkJCQkJfSk7CgoJCQkJCQlvLmRhdGEuZm9yRWFjaChmdW5jdGlvbihkKSB7CgkJCQkJCQlkLm5hbWUgPSBkLmNhcHRpb24gPyBkLmNhcHRpb24udGV4dCA6IG51bGw7CgkJCQkJCQlkLnRodW1ibmFpbCA9IGQuaW1hZ2VzLnRodW1ibmFpbC51cmw7CgkJCQkJCQlkLnBpY3R1cmUgPSBkLmltYWdlcy5zdGFuZGFyZF9yZXNvbHV0aW9uLnVybDsKCQkJCQkJCWQucGljdHVyZXMgPSBPYmplY3Qua2V5cyhkLmltYWdlcykKCQkJCQkJCQkubWFwKGZ1bmN0aW9uKGtleSkgewoJCQkJCQkJCQl2YXIgaW1hZ2UgPSBkLmltYWdlc1trZXldOwoJCQkJCQkJCQlyZXR1cm4gZm9ybWF0SW1hZ2UoaW1hZ2UpOwoJCQkJCQkJCX0pCgkJCQkJCQkJLnNvcnQoZnVuY3Rpb24oYSwgYikgewoJCQkJCQkJCQlyZXR1cm4gYS53aWR0aCAtIGIud2lkdGg7CgkJCQkJCQkJfSk7CgkJCQkJCX0pOwoJCQkJCX0KCgkJCQkJcmV0dXJuIG87CgkJCQl9LAoKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24obykgewoJCQkJCW8gPSBmb3JtYXRFcnJvcihvKTsKCQkJCQlwYWdpbmcobyk7CgkJCQkJcmV0dXJuIG87CgkJCQl9CgkJCX0sCgoJCQkvLyBJbnN0YWdyYW0gZG9lcyBub3QgcmV0dXJuIGFueSBDT1JTIEhlYWRlcnMKCQkJLy8gU28gYmVzaWRlcyBKU09OUCB3ZSdyZSBzdHVjayB3aXRoIHByb3h5CgkJCXhocjogZnVuY3Rpb24ocCwgcXMpIHsKCgkJCQl2YXIgbWV0aG9kID0gcC5tZXRob2Q7CgkJCQl2YXIgcHJveHkgPSBtZXRob2QgIT09ICdnZXQnOwoKCQkJCWlmIChwcm94eSkgewoKCQkJCQlpZiAoKG1ldGhvZCA9PT0gJ3Bvc3QnIHx8IG1ldGhvZCA9PT0gJ3B1dCcpICYmIHAucXVlcnkuYWNjZXNzX3Rva2VuKSB7CgkJCQkJCXAuZGF0YS5hY2Nlc3NfdG9rZW4gPSBwLnF1ZXJ5LmFjY2Vzc190b2tlbjsKCQkJCQkJZGVsZXRlIHAucXVlcnkuYWNjZXNzX3Rva2VuOwoJCQkJCX0KCgkJCQkJLy8gTm8gYWNjZXNzIGNvbnRyb2wgaGVhZGVycwoJCQkJCS8vIFVzZSB0aGUgcHJveHkgaW5zdGVhZAoJCQkJCXAucHJveHkgPSBwcm94eTsKCQkJCX0KCgkJCQlyZXR1cm4gcHJveHk7CgkJCX0sCgoJCQkvLyBObyBmb3JtCgkJCWZvcm06IGZhbHNlCgkJfQoJfSk7CgoJZnVuY3Rpb24gZm9ybWF0SW1hZ2UoaW1hZ2UpIHsKCQlyZXR1cm4gewoJCQlzb3VyY2U6IGltYWdlLnVybCwKCQkJd2lkdGg6IGltYWdlLndpZHRoLAoJCQloZWlnaHQ6IGltYWdlLmhlaWdodAoJCX07Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmICh0eXBlb2YgbyA9PT0gJ3N0cmluZycpIHsKCQkJcmV0dXJuIHsKCQkJCWVycm9yOiB7CgkJCQkJY29kZTogJ2ludmFsaWRfcmVxdWVzdCcsCgkJCQkJbWVzc2FnZTogbwoJCQkJfQoJCQl9OwoJCX0KCgkJaWYgKG8gJiYgJ21ldGEnIGluIG8gJiYgJ2Vycm9yX3R5cGUnIGluIG8ubWV0YSkgewoJCQlvLmVycm9yID0gewoJCQkJY29kZTogby5tZXRhLmVycm9yX3R5cGUsCgkJCQltZXNzYWdlOiBvLm1ldGEuZXJyb3JfbWVzc2FnZQoJCQl9OwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvKSB7CgkJcGFnaW5nKG8pOwoJCWlmIChvICYmICdkYXRhJyBpbiBvKSB7CgkJCW8uZGF0YS5mb3JFYWNoKGZvcm1hdEZyaWVuZCk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRGcmllbmQobykgewoJCWlmIChvLmlkKSB7CgkJCW8udGh1bWJuYWlsID0gby5wcm9maWxlX3BpY3R1cmU7CgkJCW8ubmFtZSA9IG8uZnVsbF9uYW1lIHx8IG8udXNlcm5hbWU7CgkJfQoJfQoKCS8vIFNlZTogaHR0cDovL2luc3RhZ3JhbS5jb20vZGV2ZWxvcGVyL2VuZHBvaW50cy8KCWZ1bmN0aW9uIHBhZ2luZyhyZXMpIHsKCQlpZiAoJ3BhZ2luYXRpb24nIGluIHJlcykgewoJCQlyZXMucGFnaW5nID0gewoJCQkJbmV4dDogcmVzLnBhZ2luYXRpb24ubmV4dF91cmwKCQkJfTsKCQkJZGVsZXRlIHJlcy5wYWdpbmF0aW9uOwoJCX0KCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQlqb2lubWU6IHsKCgkJCW5hbWU6ICdqb2luLm1lJywKCgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAyLAoJCQkJYXV0aDogJ2h0dHBzOi8vc2VjdXJlLmpvaW4ubWUvYXBpL3B1YmxpYy92MS9hdXRoL29hdXRoMicsCgkJCQlncmFudDogJ2h0dHBzOi8vc2VjdXJlLmpvaW4ubWUvYXBpL3B1YmxpYy92MS9hdXRoL29hdXRoMicKCQkJfSwKCgkJCXJlZnJlc2g6IGZhbHNlLAoKCQkJc2NvcGU6IHsKCQkJCWJhc2ljOiAndXNlcl9pbmZvJywKCQkJCXVzZXI6ICd1c2VyX2luZm8nLAoJCQkJc2NoZWR1bGVyOiAnc2NoZWR1bGVyJywKCQkJCXN0YXJ0OiAnc3RhcnRfbWVldGluZycKCQkJfSwKCgkJCXNjb3BlX2RlbGltOiAnICcsCgoJCQlsb2dpbjogZnVuY3Rpb24ocCkgewoJCQkJcC5vcHRpb25zLnBvcHVwLndpZHRoID0gNDAwOwoJCQkJcC5vcHRpb25zLnBvcHVwLmhlaWdodCA9IDcwMDsKCQkJfSwKCgkJCWJhc2U6ICdodHRwczovL2FwaS5qb2luLm1lL3YxLycsCgoJCQlnZXQ6IHsKCQkJCW1lOiAndXNlcicsCgkJCQltZWV0aW5nczogJ21lZXRpbmdzJywKCQkJCSdtZWV0aW5ncy9pbmZvJzogJ21lZXRpbmdzL0B7aWR9JwoJCQl9LAoKCQkJcG9zdDogewoJCQkJJ21lZXRpbmdzL3N0YXJ0L2FkaG9jJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQljYWxsYmFjaygnbWVldGluZ3Mvc3RhcnQnKTsKCQkJCX0sCgoJCQkJJ21lZXRpbmdzL3N0YXJ0L3NjaGVkdWxlZCc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgkJCQkJdmFyIG1lZXRpbmdJZCA9IHAuZGF0YS5tZWV0aW5nSWQ7CgkJCQkJcC5kYXRhID0ge307CgkJCQkJY2FsbGJhY2soJ21lZXRpbmdzLycgKyBtZWV0aW5nSWQgKyAnL3N0YXJ0Jyk7CgkJCQl9LAoKCQkJCSdtZWV0aW5ncy9zY2hlZHVsZSc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgkJCQkJY2FsbGJhY2soJ21lZXRpbmdzJyk7CgkJCQl9CgkJCX0sCgoJCQlwYXRjaDogewoJCQkJJ21lZXRpbmdzL3VwZGF0ZSc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgkJCQkJY2FsbGJhY2soJ21lZXRpbmdzLycgKyBwLmRhdGEubWVldGluZ0lkKTsKCQkJCX0KCQkJfSwKCgkJCWRlbDogewoJCQkJJ21lZXRpbmdzL2RlbGV0ZSc6ICdtZWV0aW5ncy9Ae2lkfScKCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihvLCBoZWFkZXJzKSB7CgkJCQkJZm9ybWF0RXJyb3IobywgaGVhZGVycyk7CgoJCQkJCWlmICghby5lbWFpbCkgewoJCQkJCQlyZXR1cm4gbzsKCQkJCQl9CgoJCQkJCW8ubmFtZSA9IG8uZnVsbE5hbWU7CgkJCQkJby5maXJzdF9uYW1lID0gby5uYW1lLnNwbGl0KCcgJylbMF07CgkJCQkJby5sYXN0X25hbWUgPSBvLm5hbWUuc3BsaXQoJyAnKVsxXTsKCQkJCQlvLmlkID0gby5lbWFpbDsKCgkJCQkJcmV0dXJuIG87CgkJCQl9LAoKCQkJCSdkZWZhdWx0JzogZnVuY3Rpb24obywgaGVhZGVycykgewoJCQkJCWZvcm1hdEVycm9yKG8sIGhlYWRlcnMpOwoKCQkJCQlyZXR1cm4gbzsKCQkJCX0KCQkJfSwKCgkJCXhocjogZm9ybWF0UmVxdWVzdAoKCQl9Cgl9KTsKCglmdW5jdGlvbiBmb3JtYXRFcnJvcihvLCBoZWFkZXJzKSB7CgkJdmFyIGVycm9yQ29kZTsKCQl2YXIgbWVzc2FnZTsKCQl2YXIgZGV0YWlsczsKCgkJaWYgKG8gJiYgKCdNZXNzYWdlJyBpbiBvKSkgewoJCQltZXNzYWdlID0gby5NZXNzYWdlOwoJCQlkZWxldGUgby5NZXNzYWdlOwoKCQkJaWYgKCdFcnJvckNvZGUnIGluIG8pIHsKCQkJCWVycm9yQ29kZSA9IG8uRXJyb3JDb2RlOwoJCQkJZGVsZXRlIG8uRXJyb3JDb2RlOwoJCQl9CgkJCWVsc2UgewoJCQkJZXJyb3JDb2RlID0gZ2V0RXJyb3JDb2RlKGhlYWRlcnMpOwoJCQl9CgoJCQlvLmVycm9yID0gewoJCQkJY29kZTogZXJyb3JDb2RlLAoJCQkJbWVzc2FnZTogbWVzc2FnZSwKCQkJCWRldGFpbHM6IG8KCQkJfTsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdFJlcXVlc3QocCwgcXMpIHsKCQkvLyBNb3ZlIHRoZSBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgcmVxdWVzdCBib2R5IHRvIHRoZSByZXF1ZXN0IGhlYWRlcgoJCXZhciB0b2tlbiA9IHFzLmFjY2Vzc190b2tlbjsKCQlkZWxldGUgcXMuYWNjZXNzX3Rva2VuOwoJCXAuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgdG9rZW47CgoJCS8vIEZvcm1hdCBub24tZ2V0IHJlcXVlc3RzIHRvIGluZGljYXRlIGpzb24gYm9keQoJCWlmIChwLm1ldGhvZCAhPT0gJ2dldCcgJiYgcC5kYXRhKSB7CgkJCXAuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CgkJCWlmICh0eXBlb2YgKHAuZGF0YSkgPT09ICdvYmplY3QnKSB7CgkJCQlwLmRhdGEgPSBKU09OLnN0cmluZ2lmeShwLmRhdGEpOwoJCQl9CgkJfQoKCQlpZiAocC5tZXRob2QgPT09ICdwdXQnKSB7CgkJCXAubWV0aG9kID0gJ3BhdGNoJzsKCQl9CgoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIGdldEVycm9yQ29kZShoZWFkZXJzKSB7CgkJc3dpdGNoIChoZWFkZXJzLnN0YXR1c0NvZGUpIHsKCQkJY2FzZSA0MDA6CgkJCQlyZXR1cm4gJ2ludmFsaWRfcmVxdWVzdCc7CgkJCWNhc2UgNDAzOgoJCQkJcmV0dXJuICdzdGFsZV90b2tlbic7CgkJCWNhc2UgNDAxOgoJCQkJcmV0dXJuICdpbnZhbGlkX3Rva2VuJzsKCQkJY2FzZSA1MDA6CgkJCQlyZXR1cm4gJ3NlcnZlcl9lcnJvcic7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gJ3NlcnZlcl9lcnJvcic7CgkJfQoJfQoKfShoZWxsbykpOwoKKGZ1bmN0aW9uKGhlbGxvKSB7CgoJaGVsbG8uaW5pdCh7CgoJCWxpbmtlZGluOiB7CgoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogMiwKCQkJCXJlc3BvbnNlX3R5cGU6ICdjb2RlJywKCQkJCWF1dGg6ICdodHRwczovL3d3dy5saW5rZWRpbi5jb20vdWFzL29hdXRoMi9hdXRob3JpemF0aW9uJywKCQkJCWdyYW50OiAnaHR0cHM6Ly93d3cubGlua2VkaW4uY29tL3Vhcy9vYXV0aDIvYWNjZXNzVG9rZW4nCgkJCX0sCgoJCQkvLyBSZWZyZXNoIHRoZSBhY2Nlc3NfdG9rZW4gb25jZSBleHBpcmVkCgkJCXJlZnJlc2g6IHRydWUsCgoJCQlzY29wZTogewoJCQkJYmFzaWM6ICdyX2Jhc2ljcHJvZmlsZScsCgkJCQllbWFpbDogJ3JfZW1haWxhZGRyZXNzJywKCQkJCWZyaWVuZHM6ICcnLAoJCQkJcHVibGlzaDogJ3dfc2hhcmUnCgkJCX0sCgkJCXNjb3BlX2RlbGltOiAnICcsCgoJCQliYXNlOiAnaHR0cHM6Ly9hcGkubGlua2VkaW4uY29tL3YxLycsCgoJCQlnZXQ6IHsKCQkJCW1lOiAncGVvcGxlL346KHBpY3R1cmUtdXJsLGZpcnN0LW5hbWUsbGFzdC1uYW1lLGlkLGZvcm1hdHRlZC1uYW1lLGVtYWlsLWFkZHJlc3MpJywKCgkJCQkvLyBTZWU6IGh0dHA6Ly9kZXZlbG9wZXIubGlua2VkaW4uY29tL2RvY3VtZW50cy9nZXQtbmV0d29yay11cGRhdGVzLWFuZC1zdGF0aXN0aWNzLWFwaQoJCQkJJ21lL3NoYXJlJzogJ3Blb3BsZS9+L25ldHdvcmsvdXBkYXRlcz9jb3VudD1Ae2xpbWl0fDI1MH0nCgkJCX0sCgoJCQlwb3N0OiB7CgoJCQkJLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5saW5rZWRpbi5jb20vZG9jdW1lbnRzL2FwaS1yZXF1ZXN0cy1qc29uCgkJCQknbWUvc2hhcmUnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoJCQkJCXZhciBkYXRhID0gewoJCQkJCQl2aXNpYmlsaXR5OiB7CgkJCQkJCQljb2RlOiAnYW55b25lJwoJCQkJCQl9CgkJCQkJfTsKCgkJCQkJaWYgKHAuZGF0YS5pZCkgewoKCQkJCQkJZGF0YS5hdHRyaWJ1dGlvbiA9IHsKCQkJCQkJCXNoYXJlOiB7CgkJCQkJCQkJaWQ6IHAuZGF0YS5pZAoJCQkJCQkJfQoJCQkJCQl9OwoKCQkJCQl9CgkJCQkJZWxzZSB7CgkJCQkJCWRhdGEuY29tbWVudCA9IHAuZGF0YS5tZXNzYWdlOwoJCQkJCQlpZiAocC5kYXRhLnBpY3R1cmUgJiYgcC5kYXRhLmxpbmspIHsKCQkJCQkJCWRhdGEuY29udGVudCA9IHsKCQkJCQkJCQknc3VibWl0dGVkLXVybCc6IHAuZGF0YS5saW5rLAoJCQkJCQkJCSdzdWJtaXR0ZWQtaW1hZ2UtdXJsJzogcC5kYXRhLnBpY3R1cmUKCQkJCQkJCX07CgkJCQkJCX0KCQkJCQl9CgoJCQkJCXAuZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOwoKCQkJCQljYWxsYmFjaygncGVvcGxlL34vc2hhcmVzP2Zvcm1hdD1qc29uJyk7CgkJCQl9LAoKCQkJCSdtZS9saWtlJzogbGlrZQoJCQl9LAoKCQkJZGVsOnsKCQkJCSdtZS9saWtlJzogbGlrZQoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZ1bmN0aW9uKG8pIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQlmb3JtYXRVc2VyKG8pOwoJCQkJCXJldHVybiBvOwoJCQkJfSwKCgkJCQknbWUvZnJpZW5kcyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93aW5nJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL3NoYXJlJzogZnVuY3Rpb24obykgewoJCQkJCWZvcm1hdEVycm9yKG8pOwoJCQkJCXBhZ2luZyhvKTsKCQkJCQlpZiAoby52YWx1ZXMpIHsKCQkJCQkJby5kYXRhID0gby52YWx1ZXMubWFwKGZvcm1hdFVzZXIpOwoJCQkJCQlvLmRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpdGVtLm1lc3NhZ2UgPSBpdGVtLmhlYWRsaW5lOwoJCQkJCQl9KTsKCgkJCQkJCWRlbGV0ZSBvLnZhbHVlczsKCQkJCQl9CgoJCQkJCXJldHVybiBvOwoJCQkJfSwKCgkJCQknZGVmYXVsdCc6IGZ1bmN0aW9uKG8sIGhlYWRlcnMpIHsKCQkJCQlmb3JtYXRFcnJvcihvKTsKCQkJCQllbXB0eShvLCBoZWFkZXJzKTsKCQkJCQlwYWdpbmcobyk7CgkJCQl9CgkJCX0sCgoJCQlqc29ucDogZnVuY3Rpb24ocCwgcXMpIHsKCQkJCWZvcm1hdFF1ZXJ5KHFzKTsKCQkJCWlmIChwLm1ldGhvZCA9PT0gJ2dldCcpIHsKCQkJCQlxcy5mb3JtYXQgPSAnanNvbnAnOwoJCQkJCXFzWydlcnJvci1jYWxsYmFjayddID0gcC5jYWxsYmFja0lEOwoJCQkJfQoJCQl9LAoKCQkJeGhyOiBmdW5jdGlvbihwLCBxcykgewoJCQkJaWYgKHAubWV0aG9kICE9PSAnZ2V0JykgewoJCQkJCWZvcm1hdFF1ZXJ5KHFzKTsKCQkJCQlwLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwoKCQkJCQkvLyBOb3RlOiB4LWxpLWZvcm1hdCBlbnN1cmVzIGVycm9yIHJlc3BvbnNlcyBhcmUgbm90IHJldHVybmVkIGluIFhNTAoJCQkJCXAuaGVhZGVyc1sneC1saS1mb3JtYXQnXSA9ICdqc29uJzsKCQkJCQlwLnByb3h5ID0gdHJ1ZTsKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0KCgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9Cgl9KTsKCglmdW5jdGlvbiBmb3JtYXRFcnJvcihvKSB7CgkJaWYgKG8gJiYgJ2Vycm9yQ29kZScgaW4gbykgewoJCQlvLmVycm9yID0gewoJCQkJY29kZTogby5zdGF0dXMsCgkJCQltZXNzYWdlOiBvLm1lc3NhZ2UKCQkJfTsKCQl9Cgl9CgoJZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7CgkJaWYgKG8uZXJyb3IpIHsKCQkJcmV0dXJuOwoJCX0KCgkJby5maXJzdF9uYW1lID0gby5maXJzdE5hbWU7CgkJby5sYXN0X25hbWUgPSBvLmxhc3ROYW1lOwoJCW8ubmFtZSA9IG8uZm9ybWF0dGVkTmFtZSB8fCAoby5maXJzdF9uYW1lICsgJyAnICsgby5sYXN0X25hbWUpOwoJCW8udGh1bWJuYWlsID0gby5waWN0dXJlVXJsOwoJCW8uZW1haWwgPSBvLmVtYWlsQWRkcmVzczsKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRGcmllbmRzKG8pIHsKCQlmb3JtYXRFcnJvcihvKTsKCQlwYWdpbmcobyk7CgkJaWYgKG8udmFsdWVzKSB7CgkJCW8uZGF0YSA9IG8udmFsdWVzLm1hcChmb3JtYXRVc2VyKTsKCQkJZGVsZXRlIG8udmFsdWVzOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gcGFnaW5nKHJlcykgewoJCWlmICgnX2NvdW50JyBpbiByZXMgJiYgJ19zdGFydCcgaW4gcmVzICYmIChyZXMuX2NvdW50ICsgcmVzLl9zdGFydCkgPCByZXMuX3RvdGFsKSB7CgkJCXJlcy5wYWdpbmcgPSB7CgkJCQluZXh0OiAnP3N0YXJ0PScgKyAocmVzLl9zdGFydCArIHJlcy5fY291bnQpICsgJyZjb3VudD0nICsgcmVzLl9jb3VudAoJCQl9OwoJCX0KCX0KCglmdW5jdGlvbiBlbXB0eShvLCBoZWFkZXJzKSB7CgkJaWYgKEpTT04uc3RyaW5naWZ5KG8pID09PSAne30nICYmIGhlYWRlcnMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CgkJCW8uc3VjY2VzcyA9IHRydWU7CgkJfQoJfQoKCWZ1bmN0aW9uIGZvcm1hdFF1ZXJ5KHFzKSB7CgkJLy8gTGlua2VkSW4gc2lnbnMgcmVxdWVzdHMgd2l0aCB0aGUgcGFyYW1ldGVyICdvYXV0aDJfYWNjZXNzX3Rva2VuJwoJCS8vIC4uLiB5ZWFoIGFub3RoZXIgb25lIHdobyB0aGlua3MgdGhleSBzaG91bGQgYmUgZGlmZmVyZW50IQoJCWlmIChxcy5hY2Nlc3NfdG9rZW4pIHsKCQkJcXMub2F1dGgyX2FjY2Vzc190b2tlbiA9IHFzLmFjY2Vzc190b2tlbjsKCQkJZGVsZXRlIHFzLmFjY2Vzc190b2tlbjsKCQl9Cgl9CgoJZnVuY3Rpb24gbGlrZShwLCBjYWxsYmFjaykgewoJCXAuaGVhZGVyc1sneC1saS1mb3JtYXQnXSA9ICdqc29uJzsKCQl2YXIgaWQgPSBwLmRhdGEuaWQ7CgkJcC5kYXRhID0gKHAubWV0aG9kICE9PSAnZGVsZXRlJykudG9TdHJpbmcoKTsKCQlwLm1ldGhvZCA9ICdwdXQnOwoJCWNhbGxiYWNrKCdwZW9wbGUvfi9uZXR3b3JrL3VwZGF0ZXMva2V5PScgKyBpZCArICcvaXMtbGlrZWQnKTsKCX0KCn0pKGhlbGxvKTsKCi8vIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXJzLnNvdW5kY2xvdWQuY29tL2RvY3MvYXBpL3JlZmVyZW5jZQooZnVuY3Rpb24oaGVsbG8pIHsKCgloZWxsby5pbml0KHsKCgkJc291bmRjbG91ZDogewoJCQluYW1lOiAnU291bmRDbG91ZCcsCgoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL3NvdW5kY2xvdWQuY29tL2Nvbm5lY3QnLAoJCQkJZ3JhbnQ6ICdodHRwczovL3NvdW5kY2xvdWQuY29tL29hdXRoMi90b2tlbicKCQkJfSwKCgkJCS8vIFJlcXVlc3QgcGF0aCB0cmFuc2xhdGVkCgkJCWJhc2U6ICdodHRwczovL2FwaS5zb3VuZGNsb3VkLmNvbS8nLAoJCQlnZXQ6IHsKCQkJCW1lOiAnbWUuanNvbicsCgoJCQkJLy8gSHR0cDovL2RldmVsb3BlcnMuc291bmRjbG91ZC5jb20vZG9jcy9hcGkvcmVmZXJlbmNlI21lCgkJCQknbWUvZnJpZW5kcyc6ICdtZS9mb2xsb3dpbmdzLmpzb24nLAoJCQkJJ21lL2ZvbGxvd2Vycyc6ICdtZS9mb2xsb3dlcnMuanNvbicsCgkJCQknbWUvZm9sbG93aW5nJzogJ21lL2ZvbGxvd2luZ3MuanNvbicsCgoJCQkJLy8gU2VlOiBodHRwOi8vZGV2ZWxvcGVycy5zb3VuZGNsb3VkLmNvbS9kb2NzL2FwaS9yZWZlcmVuY2UjYWN0aXZpdGllcwoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoKCQkJCQkvLyBJbmNsdWRlICcuanNvbiBhdCB0aGUgZW5kIG9mIGVhY2ggcmVxdWVzdCcKCQkJCQljYWxsYmFjayhwLnBhdGggKyAnLmpzb24nKTsKCQkJCX0KCQkJfSwKCgkJCS8vIFJlc3BvbnNlIGhhbmRsZXJzCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihvKSB7CgkJCQkJZm9ybWF0VXNlcihvKTsKCQkJCQlyZXR1cm4gbzsKCQkJCX0sCgoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihvKSB7CgkJCQkJaWYgKEFycmF5LmlzQXJyYXkobykpIHsKCQkJCQkJbyA9IHsKCQkJCQkJCWRhdGE6IG8ubWFwKGZvcm1hdFVzZXIpCgkJCQkJCX07CgkJCQkJfQoKCQkJCQlwYWdpbmcobyk7CgkJCQkJcmV0dXJuIG87CgkJCQl9CgkJCX0sCgoJCQl4aHI6IGZvcm1hdFJlcXVlc3QsCgkJCWpzb25wOiBmb3JtYXRSZXF1ZXN0CgkJfQoJfSk7CgoJZnVuY3Rpb24gZm9ybWF0UmVxdWVzdChwLCBxcykgewoJCS8vIEFsdGVyIHRoZSBxdWVyeXN0cmluZwoJCXZhciB0b2tlbiA9IHFzLmFjY2Vzc190b2tlbjsKCQlkZWxldGUgcXMuYWNjZXNzX3Rva2VuOwoJCXFzLm9hdXRoX3Rva2VuID0gdG9rZW47CgkJcXNbJ19zdGF0dXNfY29kZV9tYXBbMzAyXSddID0gMjAwOwoJCXJldHVybiB0cnVlOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdFVzZXIobykgewoJCWlmIChvLmlkKSB7CgkJCW8ucGljdHVyZSA9IG8uYXZhdGFyX3VybDsKCQkJby50aHVtYm5haWwgPSBvLmF2YXRhcl91cmw7CgkJCW8ubmFtZSA9IG8udXNlcm5hbWUgfHwgby5mdWxsX25hbWU7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCgkvLyBTZWU6IGh0dHA6Ly9kZXZlbG9wZXJzLnNvdW5kY2xvdWQuY29tL2RvY3MvYXBpL3JlZmVyZW5jZSNhY3Rpdml0aWVzCglmdW5jdGlvbiBwYWdpbmcocmVzKSB7CgkJaWYgKCduZXh0X2hyZWYnIGluIHJlcykgewoJCQlyZXMucGFnaW5nID0gewoJCQkJbmV4dDogcmVzLm5leHRfaHJlZgoJCQl9OwoJCX0KCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCXZhciBiYXNlID0gJ2h0dHBzOi8vYXBpLnR3aXR0ZXIuY29tLyc7CgoJaGVsbG8uaW5pdCh7CgoJCXR3aXR0ZXI6IHsKCgkJCS8vIEVuc3VyZSB0aGF0IHlvdSBkZWZpbmUgYW4gb2F1dGhfcHJveHkKCQkJb2F1dGg6IHsKCQkJCXZlcnNpb246ICcxLjBhJywKCQkJCWF1dGg6IGJhc2UgKyAnb2F1dGgvYXV0aGVudGljYXRlJywKCQkJCXJlcXVlc3Q6IGJhc2UgKyAnb2F1dGgvcmVxdWVzdF90b2tlbicsCgkJCQl0b2tlbjogYmFzZSArICdvYXV0aC9hY2Nlc3NfdG9rZW4nCgkJCX0sCgoJCQlsb2dpbjogZnVuY3Rpb24ocCkgewoJCQkJLy8gUmVhdXRoZW50aWNhdGUKCQkJCS8vIGh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL29hdXRoL3JlZmVyZW5jZS9nZXQvb2F1dGgvYXV0aGVudGljYXRlCgkJCQl2YXIgcHJlZml4ID0gJz9mb3JjZV9sb2dpbj10cnVlJzsKCQkJCXRoaXMub2F1dGguYXV0aCA9IHRoaXMub2F1dGguYXV0aC5yZXBsYWNlKHByZWZpeCwgJycpICsgKHAub3B0aW9ucy5mb3JjZSA/IHByZWZpeCA6ICcnKTsKCQkJfSwKCgkJCWJhc2U6IGJhc2UgKyAnMS4xLycsCgoJCQlnZXQ6IHsKCQkJCW1lOiAnYWNjb3VudC92ZXJpZnlfY3JlZGVudGlhbHMuanNvbicsCgkJCQknbWUvZnJpZW5kcyc6ICdmcmllbmRzL2xpc3QuanNvbj9jb3VudD1Ae2xpbWl0fDIwMH0nLAoJCQkJJ21lL2ZvbGxvd2luZyc6ICdmcmllbmRzL2xpc3QuanNvbj9jb3VudD1Ae2xpbWl0fDIwMH0nLAoJCQkJJ21lL2ZvbGxvd2Vycyc6ICdmb2xsb3dlcnMvbGlzdC5qc29uP2NvdW50PUB7bGltaXR8MjAwfScsCgoJCQkJLy8gSHR0cHM6Ly9kZXYudHdpdHRlci5jb20vZG9jcy9hcGkvMS4xL2dldC9zdGF0dXNlcy91c2VyX3RpbWVsaW5lCgkJCQknbWUvc2hhcmUnOiAnc3RhdHVzZXMvdXNlcl90aW1lbGluZS5qc29uP2NvdW50PUB7bGltaXR8MjAwfScsCgoJCQkJLy8gSHR0cHM6Ly9kZXYudHdpdHRlci5jb20vcmVzdC9yZWZlcmVuY2UvZ2V0L2Zhdm9yaXRlcy9saXN0CgkJCQknbWUvbGlrZSc6ICdmYXZvcml0ZXMvbGlzdC5qc29uP2NvdW50PUB7bGltaXR8MjAwfScKCQkJfSwKCgkJCXBvc3Q6IHsKCQkJCSdtZS9zaGFyZSc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7CgoJCQkJCXZhciBkYXRhID0gcC5kYXRhOwoJCQkJCXAuZGF0YSA9IG51bGw7CgoJCQkJCXZhciBzdGF0dXMgPSBbXTsKCgkJCQkJLy8gQ2hhbmdlIG1lc3NhZ2UgdG8gc3RhdHVzCgkJCQkJaWYgKGRhdGEubWVzc2FnZSkgewoJCQkJCQlzdGF0dXMucHVzaChkYXRhLm1lc3NhZ2UpOwoJCQkJCQlkZWxldGUgZGF0YS5tZXNzYWdlOwoJCQkJCX0KCgkJCQkJLy8gSWYgbGluayBpcyBnaXZlbgoJCQkJCWlmIChkYXRhLmxpbmspIHsKCQkJCQkJc3RhdHVzLnB1c2goZGF0YS5saW5rKTsKCQkJCQkJZGVsZXRlIGRhdGEubGluazsKCQkJCQl9CgoJCQkJCWlmIChkYXRhLnBpY3R1cmUpIHsKCQkJCQkJc3RhdHVzLnB1c2goZGF0YS5waWN0dXJlKTsKCQkJCQkJZGVsZXRlIGRhdGEucGljdHVyZTsKCQkJCQl9CgoJCQkJCS8vIENvbXBvdW5kIGFsbCB0aGUgY29tcG9uZW50cwoJCQkJCWlmIChzdGF0dXMubGVuZ3RoKSB7CgkJCQkJCWRhdGEuc3RhdHVzID0gc3RhdHVzLmpvaW4oJyAnKTsKCQkJCQl9CgoJCQkJCS8vIFR3ZWV0IG1lZGlhCgkJCQkJaWYgKGRhdGEuZmlsZSkgewoJCQkJCQlkYXRhWydtZWRpYVtdJ10gPSBkYXRhLmZpbGU7CgkJCQkJCWRlbGV0ZSBkYXRhLmZpbGU7CgkJCQkJCXAuZGF0YSA9IGRhdGE7CgkJCQkJCWNhbGxiYWNrKCdzdGF0dXNlcy91cGRhdGVfd2l0aF9tZWRpYS5qc29uJyk7CgkJCQkJfQoKCQkJCQkvLyBSZXR3ZWV0PwoJCQkJCWVsc2UgaWYgKCdpZCcgaW4gZGF0YSkgewoJCQkJCQljYWxsYmFjaygnc3RhdHVzZXMvcmV0d2VldC8nICsgZGF0YS5pZCArICcuanNvbicpOwoJCQkJCX0KCgkJCQkJLy8gVHdlZXQKCQkJCQllbHNlIHsKCQkJCQkJLy8gQXNzaWduIHRoZSBwb3N0IGJvZHkgdG8gdGhlIHF1ZXJ5IHBhcmFtZXRlcnMKCQkJCQkJaGVsbG8udXRpbHMuZXh0ZW5kKHAucXVlcnksIGRhdGEpOwoJCQkJCQljYWxsYmFjaygnc3RhdHVzZXMvdXBkYXRlLmpzb24/aW5jbHVkZV9lbnRpdGllcz0xJyk7CgkJCQkJfQoJCQkJfSwKCgkJCQkvLyBTZWU6IGh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL3Jlc3QvcmVmZXJlbmNlL3Bvc3QvZmF2b3JpdGVzL2NyZWF0ZQoJCQkJJ21lL2xpa2UnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykgewoJCQkJCXZhciBpZCA9IHAuZGF0YS5pZDsKCQkJCQlwLmRhdGEgPSBudWxsOwoJCQkJCWNhbGxiYWNrKCdmYXZvcml0ZXMvY3JlYXRlLmpzb24/aWQ9JyArIGlkKTsKCQkJCX0KCQkJfSwKCgkJCWRlbDogewoKCQkJCS8vIFNlZTogaHR0cHM6Ly9kZXYudHdpdHRlci5jb20vcmVzdC9yZWZlcmVuY2UvcG9zdC9mYXZvcml0ZXMvZGVzdHJveQoJCQkJJ21lL2xpa2UnOiBmdW5jdGlvbigpIHsKCQkJCQlwLm1ldGhvZCA9ICdwb3N0JzsKCQkJCQl2YXIgaWQgPSBwLmRhdGEuaWQ7CgkJCQkJcC5kYXRhID0gbnVsbDsKCQkJCQljYWxsYmFjaygnZmF2b3JpdGVzL2Rlc3Ryb3kuanNvbj9pZD0nICsgaWQpOwoJCQkJfQoJCQl9LAoKCQkJd3JhcDogewoJCQkJbWU6IGZ1bmN0aW9uKHJlcykgewoJCQkJCWZvcm1hdEVycm9yKHJlcyk7CgkJCQkJZm9ybWF0VXNlcihyZXMpOwoJCQkJCXJldHVybiByZXM7CgkJCQl9LAoKCQkJCSdtZS9mcmllbmRzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsCgoJCQkJJ21lL3NoYXJlJzogZnVuY3Rpb24ocmVzKSB7CgkJCQkJZm9ybWF0RXJyb3IocmVzKTsKCQkJCQlwYWdpbmcocmVzKTsKCQkJCQlpZiAoIXJlcy5lcnJvciAmJiAnbGVuZ3RoJyBpbiByZXMpIHsKCQkJCQkJcmV0dXJuIHtkYXRhOiByZXN9OwoJCQkJCX0KCgkJCQkJcmV0dXJuIHJlczsKCQkJCX0sCgoJCQkJJ2RlZmF1bHQnOiBmdW5jdGlvbihyZXMpIHsKCQkJCQlyZXMgPSBhcnJheVRvRGF0YVJlc3BvbnNlKHJlcyk7CgkJCQkJcGFnaW5nKHJlcyk7CgkJCQkJcmV0dXJuIHJlczsKCQkJCX0KCQkJfSwKCQkJeGhyOiBmdW5jdGlvbihwKSB7CgoJCQkJLy8gUmVseSBvbiB0aGUgcHJveHkgZm9yIG5vbi1HRVQgcmVxdWVzdHMuCgkJCQlyZXR1cm4gKHAubWV0aG9kICE9PSAnZ2V0Jyk7CgkJCX0KCQl9Cgl9KTsKCglmdW5jdGlvbiBmb3JtYXRVc2VyKG8pIHsKCQlpZiAoby5pZCkgewoJCQlpZiAoby5uYW1lKSB7CgkJCQl2YXIgbSA9IG8ubmFtZS5zcGxpdCgnICcpOwoJCQkJby5maXJzdF9uYW1lID0gbS5zaGlmdCgpOwoJCQkJby5sYXN0X25hbWUgPSBtLmpvaW4oJyAnKTsKCQkJfQoKCQkJLy8gU2VlOiBodHRwczovL2Rldi50d2l0dGVyLmNvbS9vdmVydmlldy9nZW5lcmFsL3VzZXItcHJvZmlsZS1pbWFnZXMtYW5kLWJhbm5lcnMKCQkJby50aHVtYm5haWwgPSBvLnByb2ZpbGVfaW1hZ2VfdXJsX2h0dHBzIHx8IG8ucHJvZmlsZV9pbWFnZV91cmw7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRGcmllbmRzKG8pIHsKCQlmb3JtYXRFcnJvcihvKTsKCQlwYWdpbmcobyk7CgkJaWYgKG8udXNlcnMpIHsKCQkJby5kYXRhID0gby51c2Vycy5tYXAoZm9ybWF0VXNlcik7CgkJCWRlbGV0ZSBvLnVzZXJzOwoJCX0KCgkJcmV0dXJuIG87Cgl9CgoJZnVuY3Rpb24gZm9ybWF0RXJyb3IobykgewoJCWlmIChvLmVycm9ycykgewoJCQl2YXIgZSA9IG8uZXJyb3JzWzBdOwoJCQlvLmVycm9yID0gewoJCQkJY29kZTogJ3JlcXVlc3RfZmFpbGVkJywKCQkJCW1lc3NhZ2U6IGUubWVzc2FnZQoJCQl9OwoJCX0KCX0KCgkvLyBUYWtlIGEgY3Vyc29yIGFuZCBhZGQgaXQgdG8gdGhlIHBhdGgKCWZ1bmN0aW9uIHBhZ2luZyhyZXMpIHsKCQkvLyBEb2VzIHRoZSByZXNwb25zZSBpbmNsdWRlIGEgJ25leHRfY3Vyc29yX3N0cmluZycKCQlpZiAoJ25leHRfY3Vyc29yX3N0cicgaW4gcmVzKSB7CgkJCS8vIFNlZTogaHR0cHM6Ly9kZXYudHdpdHRlci5jb20vZG9jcy9taXNjL2N1cnNvcmluZwoJCQlyZXMucGFnaW5nID0gewoJCQkJbmV4dDogJz9jdXJzb3I9JyArIHJlcy5uZXh0X2N1cnNvcl9zdHIKCQkJfTsKCQl9Cgl9CgoJZnVuY3Rpb24gYXJyYXlUb0RhdGFSZXNwb25zZShyZXMpIHsKCQlyZXR1cm4gQXJyYXkuaXNBcnJheShyZXMpID8ge2RhdGE6IHJlc30gOiByZXM7Cgl9CgoJLyoqCgkvLyBUaGUgZG9jdW1lbnRhdGlvbiBzYXlzIHRvIGRlZmluZSB1c2VyIGluIHRoZSByZXF1ZXN0CgkvLyBBbHRob3VnaCBpdHMgbm90IGFjdHVhbGx5IHJlcXVpcmVkLgoKCXZhciB1c2VyX2lkOwoKCWZ1bmN0aW9uIHdpdGhVc2VySWQoY2FsbGJhY2spewoJCWlmKHVzZXJfaWQpewoJCQljYWxsYmFjayh1c2VyX2lkKTsKCQl9CgkJZWxzZXsKCQkJaGVsbG8uYXBpKCd0d2l0dGVyOi9tZScsIGZ1bmN0aW9uKG8pewoJCQkJdXNlcl9pZCA9IG8uaWQ7CgkJCQljYWxsYmFjayhvLmlkKTsKCQkJfSk7CgkJfQoJfQoKCWZ1bmN0aW9uIHNpZ24odXJsKXsKCQlyZXR1cm4gZnVuY3Rpb24ocCwgY2FsbGJhY2spewoJCQl3aXRoVXNlcklkKGZ1bmN0aW9uKHVzZXJfaWQpewoJCQkJY2FsbGJhY2sodXJsKyc/dXNlcl9pZD0nK3VzZXJfaWQpOwoJCQl9KTsKCQl9OwoJfQoJKi8KCn0pKGhlbGxvKTsKCi8vIFZrb250YWt0ZSAodmsuY29tKQooZnVuY3Rpb24oaGVsbG8pIHsKCgloZWxsby5pbml0KHsKCgkJdms6IHsKCQkJbmFtZTogJ1ZrJywKCgkJCS8vIFNlZSBodHRwczovL3ZrLmNvbS9kZXYvb2F1dGhfZGlhbG9nCgkJCW9hdXRoOiB7CgkJCQl2ZXJzaW9uOiAyLAoJCQkJYXV0aDogJ2h0dHBzOi8vb2F1dGgudmsuY29tL2F1dGhvcml6ZScsCgkJCQlncmFudDogJ2h0dHBzOi8vb2F1dGgudmsuY29tL2FjY2Vzc190b2tlbicKCQkJfSwKCgkJCS8vIEF1dGhvcml6YXRpb24gc2NvcGVzCgkJCXNjb3BlOiB7CgkJCQllbWFpbDogJ2VtYWlsJywKCQkJCW9mZmxpbmVfYWNjZXNzOiAnb2ZmbGluZScKCQkJfSwKCgkJCS8vIFJlZnJlc2ggdGhlIGFjY2Vzc190b2tlbgoJCQlyZWZyZXNoOiB0cnVlLAoKCQkJbG9naW46IGZ1bmN0aW9uKHApIHsKCQkJCXAucXMuZGlzcGxheSA9IHdpbmRvdy5uYXZpZ2F0b3IgJiYKCQkJCQl3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCAmJgoJCQkJCS9pcGFkfHBob25lfHBob25lfGFuZHJvaWQvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSkgPyAnbW9iaWxlJyA6ICdwb3B1cCc7CgkJCX0sCgoJCQkvLyBBUEkgQmFzZSBVUkwKCQkJYmFzZTogJ2h0dHBzOi8vYXBpLnZrLmNvbS9tZXRob2QvJywKCgkJCS8vIE1hcCBHRVQgcmVxdWVzdHMKCQkJZ2V0OiB7CgkJCQltZTogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHsKCQkJCQlwLnF1ZXJ5LmZpZWxkcyA9ICdpZCxmaXJzdF9uYW1lLGxhc3RfbmFtZSxwaG90b19tYXgnOwoJCQkJCWNhbGxiYWNrKCd1c2Vycy5nZXQnKTsKCQkJCX0KCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmdW5jdGlvbihyZXMsIGhlYWRlcnMsIHJlcSkgewoJCQkJCWZvcm1hdEVycm9yKHJlcyk7CgkJCQkJcmV0dXJuIGZvcm1hdFVzZXIocmVzLCByZXEpOwoJCQkJfQoJCQl9LAoKCQkJLy8gTm8gWEhSCgkJCXhocjogZmFsc2UsCgoJCQkvLyBBbGwgcmVxdWVzdHMgc2hvdWxkIGJlIEpTT05QIGFzIG9mIG1pc3NpbmcgQ09SUyBoZWFkZXJzIGluIGh0dHBzOi8vYXBpLnZrLmNvbS9tZXRob2QvKgoJCQlqc29ucDogdHJ1ZSwKCgkJCS8vIE5vIGZvcm0KCQkJZm9ybTogZmFsc2UKCQl9Cgl9KTsKCglmdW5jdGlvbiBmb3JtYXRVc2VyKG8sIHJlcSkgewoKCQlpZiAobyAhPT0gbnVsbCAmJiAncmVzcG9uc2UnIGluIG8gJiYgby5yZXNwb25zZSAhPT0gbnVsbCAmJiBvLnJlc3BvbnNlLmxlbmd0aCkgewoJCQlvID0gby5yZXNwb25zZVswXTsKCQkJby5pZCA9IG8udWlkOwoJCQlvLnRodW1ibmFpbCA9IG8ucGljdHVyZSA9IG8ucGhvdG9fbWF4OwoJCQlvLm5hbWUgPSBvLmZpcnN0X25hbWUgKyAnICcgKyBvLmxhc3RfbmFtZTsKCgkJCWlmIChyZXEuYXV0aFJlc3BvbnNlICYmIHJlcS5hdXRoUmVzcG9uc2UuZW1haWwgIT09IG51bGwpCgkJCQlvLmVtYWlsID0gcmVxLmF1dGhSZXNwb25zZS5lbWFpbDsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdEVycm9yKG8pIHsKCgkJaWYgKG8uZXJyb3IpIHsKCQkJdmFyIGUgPSBvLmVycm9yOwoJCQlvLmVycm9yID0gewoJCQkJY29kZTogZS5lcnJvcl9jb2RlLAoJCQkJbWVzc2FnZTogZS5lcnJvcl9tc2cKCQkJfTsKCQl9Cgl9Cgp9KShoZWxsbyk7CgooZnVuY3Rpb24oaGVsbG8pIHsKCgloZWxsby5pbml0KHsKCQl3aW5kb3dzOiB7CgkJCW5hbWU6ICdXaW5kb3dzIGxpdmUnLAoKCQkJLy8gUkVGOiBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaGgyNDM2NDEuYXNweAoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogMiwKCQkJCWF1dGg6ICdodHRwczovL2xvZ2luLmxpdmUuY29tL29hdXRoMjBfYXV0aG9yaXplLnNyZicsCgkJCQlncmFudDogJ2h0dHBzOi8vbG9naW4ubGl2ZS5jb20vb2F1dGgyMF90b2tlbi5zcmYnCgkJCX0sCgoJCQkvLyBSZWZyZXNoIHRoZSBhY2Nlc3NfdG9rZW4gb25jZSBleHBpcmVkCgkJCXJlZnJlc2g6IHRydWUsCgoJCQlsb2dvdXQ6IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICdodHRwOi8vbG9naW4ubGl2ZS5jb20vb2F1dGgyMF9sb2dvdXQuc3JmP3RzPScgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpOwoJCQl9LAoKCQkJLy8gQXV0aG9yaXphdGlvbiBzY29wZXMKCQkJc2NvcGU6IHsKCQkJCWJhc2ljOiAnd2wuc2lnbmluLHdsLmJhc2ljJywKCQkJCWVtYWlsOiAnd2wuZW1haWxzJywKCQkJCWJpcnRoZGF5OiAnd2wuYmlydGhkYXknLAoJCQkJZXZlbnRzOiAnd2wuY2FsZW5kYXJzJywKCQkJCXBob3RvczogJ3dsLnBob3RvcycsCgkJCQl2aWRlb3M6ICd3bC5waG90b3MnLAoJCQkJZnJpZW5kczogJ3dsLmNvbnRhY3RzX2VtYWlscycsCgkJCQlmaWxlczogJ3dsLnNreWRyaXZlJywKCQkJCXB1Ymxpc2g6ICd3bC5zaGFyZScsCgkJCQlwdWJsaXNoX2ZpbGVzOiAnd2wuc2t5ZHJpdmVfdXBkYXRlJywKCQkJCWNyZWF0ZV9ldmVudDogJ3dsLmNhbGVuZGFyc191cGRhdGUsd2wuZXZlbnRzX2NyZWF0ZScsCgkJCQlvZmZsaW5lX2FjY2VzczogJ3dsLm9mZmxpbmVfYWNjZXNzJwoJCQl9LAoKCQkJLy8gQVBJIGJhc2UgVVJMCgkJCWJhc2U6ICdodHRwczovL2FwaXMubGl2ZS5uZXQvdjUuMC8nLAoKCQkJLy8gTWFwIEdFVCByZXF1ZXN0cwoJCQlnZXQ6IHsKCgkJCQkvLyBGcmllbmRzCgkJCQltZTogJ21lJywKCQkJCSdtZS9mcmllbmRzJzogJ21lL2ZyaWVuZHMnLAoJCQkJJ21lL2ZvbGxvd2luZyc6ICdtZS9jb250YWN0cycsCgkJCQknbWUvZm9sbG93ZXJzJzogJ21lL2ZyaWVuZHMnLAoJCQkJJ21lL2NvbnRhY3RzJzogJ21lL2NvbnRhY3RzJywKCgkJCQknbWUvYWxidW1zJzogJ21lL2FsYnVtcycsCgoJCQkJLy8gSW5jbHVkZSB0aGUgZGF0YVtpZF0gaW4gdGhlIHBhdGgKCQkJCSdtZS9hbGJ1bSc6ICdAe2lkfS9maWxlcycsCgkJCQknbWUvcGhvdG8nOiAnQHtpZH0nLAoKCQkJCS8vIEZpbGVzCgkJCQknbWUvZmlsZXMnOiAnQHtwYXJlbnR8bWUvc2t5ZHJpdmV9L2ZpbGVzJywKCQkJCSdtZS9mb2xkZXJzJzogJ0B7aWR8bWUvc2t5ZHJpdmV9L2ZpbGVzJywKCQkJCSdtZS9mb2xkZXInOiAnQHtpZHxtZS9za3lkcml2ZX0vZmlsZXMnCgkJCX0sCgoJCQkvLyBNYXAgUE9TVCByZXF1ZXN0cwoJCQlwb3N0OiB7CgkJCQknbWUvYWxidW1zJzogJ21lL2FsYnVtcycsCgkJCQknbWUvYWxidW0nOiAnQHtpZH0vZmlsZXMvJywKCgkJCQknbWUvZm9sZGVycyc6ICdAe2lkfG1lL3NreWRyaXZlL30nLAoJCQkJJ21lL2ZpbGVzJzogJ0B7cGFyZW50fG1lL3NreWRyaXZlfS9maWxlcycKCQkJfSwKCgkJCS8vIE1hcCBERUxFVEUgcmVxdWVzdHMKCQkJZGVsOiB7CgkJCQkvLyBJbmNsdWRlIHRoZSBkYXRhW2lkXSBpbiB0aGUgcGF0aAoJCQkJJ21lL2FsYnVtJzogJ0B7aWR9JywKCQkJCSdtZS9waG90byc6ICdAe2lkfScsCgkJCQknbWUvZm9sZGVyJzogJ0B7aWR9JywKCQkJCSdtZS9maWxlcyc6ICdAe2lkfScKCQkJfSwKCgkJCXdyYXA6IHsKCQkJCW1lOiBmb3JtYXRVc2VyLAoKCQkJCSdtZS9mcmllbmRzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9jb250YWN0cyc6IGZvcm1hdEZyaWVuZHMsCgkJCQknbWUvZm9sbG93ZXJzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dpbmcnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ21lL2FsYnVtcyc6IGZvcm1hdEFsYnVtcywKCQkJCSdtZS9waG90b3MnOiBmb3JtYXREZWZhdWx0LAoJCQkJJ2RlZmF1bHQnOiBmb3JtYXREZWZhdWx0CgkJCX0sCgoJCQl4aHI6IGZ1bmN0aW9uKHApIHsKCQkJCWlmIChwLm1ldGhvZCAhPT0gJ2dldCcgJiYgcC5tZXRob2QgIT09ICdkZWxldGUnICYmICFoZWxsby51dGlscy5oYXNCaW5hcnkocC5kYXRhKSkgewoKCQkJCQkvLyBEb2VzIHRoaXMgaGF2ZSBhIGRhdGEtdXJpIHRvIHVwbG9hZCBhcyBhIGZpbGU/CgkJCQkJaWYgKHR5cGVvZiAocC5kYXRhLmZpbGUpID09PSAnc3RyaW5nJykgewoJCQkJCQlwLmRhdGEuZmlsZSA9IGhlbGxvLnV0aWxzLnRvQmxvYihwLmRhdGEuZmlsZSk7CgkJCQkJfQoJCQkJCWVsc2UgewoJCQkJCQlwLmRhdGEgPSBKU09OLnN0cmluZ2lmeShwLmRhdGEpOwoJCQkJCQlwLmhlYWRlcnMgPSB7CgkJCQkJCQknQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCgkJCQkJCX07CgkJCQkJfQoJCQkJfQoKCQkJCXJldHVybiB0cnVlOwoJCQl9LAoKCQkJanNvbnA6IGZ1bmN0aW9uKHApIHsKCQkJCWlmIChwLm1ldGhvZCAhPT0gJ2dldCcgJiYgIWhlbGxvLnV0aWxzLmhhc0JpbmFyeShwLmRhdGEpKSB7CgkJCQkJcC5kYXRhLm1ldGhvZCA9IHAubWV0aG9kOwoJCQkJCXAubWV0aG9kID0gJ2dldCc7CgkJCQl9CgkJCX0KCQl9Cgl9KTsKCglmdW5jdGlvbiBmb3JtYXREZWZhdWx0KG8pIHsKCQlpZiAoJ2RhdGEnIGluIG8pIHsKCQkJby5kYXRhLmZvckVhY2goZnVuY3Rpb24oZCkgewoJCQkJaWYgKGQucGljdHVyZSkgewoJCQkJCWQudGh1bWJuYWlsID0gZC5waWN0dXJlOwoJCQkJfQoKCQkJCWlmIChkLmltYWdlcykgewoJCQkJCWQucGljdHVyZXMgPSBkLmltYWdlcwoJCQkJCQkubWFwKGZvcm1hdEltYWdlKQoJCQkJCQkuc29ydChmdW5jdGlvbihhLCBiKSB7CgkJCQkJCQlyZXR1cm4gYS53aWR0aCAtIGIud2lkdGg7CgkJCQkJCX0pOwoJCQkJfQoJCQl9KTsKCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdEltYWdlKGltYWdlKSB7CgkJcmV0dXJuIHsKCQkJd2lkdGg6IGltYWdlLndpZHRoLAoJCQloZWlnaHQ6IGltYWdlLmhlaWdodCwKCQkJc291cmNlOiBpbWFnZS5zb3VyY2UKCQl9OwoJfQoKCWZ1bmN0aW9uIGZvcm1hdEFsYnVtcyhvKSB7CgkJaWYgKCdkYXRhJyBpbiBvKSB7CgkJCW8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsKCQkJCWQucGhvdG9zID0gZC5maWxlcyA9ICdodHRwczovL2FwaXMubGl2ZS5uZXQvdjUuMC8nICsgZC5pZCArICcvcGhvdG9zJzsKCQkJfSk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRVc2VyKG8sIGhlYWRlcnMsIHJlcSkgewoJCWlmIChvLmlkKSB7CgkJCXZhciB0b2tlbiA9IHJlcS5xdWVyeS5hY2Nlc3NfdG9rZW47CgkJCWlmIChvLmVtYWlscykgewoJCQkJby5lbWFpbCA9IG8uZW1haWxzLnByZWZlcnJlZDsKCQkJfQoKCQkJLy8gSWYgdGhpcyBpcyBub3QgYW4gbm9uLW5ldHdvcmsgZnJpZW5kCgkJCWlmIChvLmlzX2ZyaWVuZCAhPT0gZmFsc2UpIHsKCQkJCS8vIFVzZSB0aGUgaWQgb2YgdGhlIHVzZXJfaWQgaWYgYXZhaWxhYmxlCgkJCQl2YXIgaWQgPSAoby51c2VyX2lkIHx8IG8uaWQpOwoJCQkJby50aHVtYm5haWwgPSBvLnBpY3R1cmUgPSAnaHR0cHM6Ly9hcGlzLmxpdmUubmV0L3Y1LjAvJyArIGlkICsgJy9waWN0dXJlP2FjY2Vzc190b2tlbj0nICsgdG9rZW47CgkJCX0KCQl9CgoJCXJldHVybiBvOwoJfQoKCWZ1bmN0aW9uIGZvcm1hdEZyaWVuZHMobywgaGVhZGVycywgcmVxKSB7CgkJaWYgKCdkYXRhJyBpbiBvKSB7CgkJCW8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsKCQkJCWZvcm1hdFVzZXIoZCwgaGVhZGVycywgcmVxKTsKCQkJfSk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCn0pKGhlbGxvKTsKCihmdW5jdGlvbihoZWxsbykgewoKCWhlbGxvLmluaXQoewoKCQl5YWhvbzogewoKCQkJLy8gRW5zdXJlIHRoYXQgeW91IGRlZmluZSBhbiBvYXV0aF9wcm94eQoJCQlvYXV0aDogewoJCQkJdmVyc2lvbjogJzEuMGEnLAoJCQkJYXV0aDogJ2h0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbS9vYXV0aC92Mi9yZXF1ZXN0X2F1dGgnLAoJCQkJcmVxdWVzdDogJ2h0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbS9vYXV0aC92Mi9nZXRfcmVxdWVzdF90b2tlbicsCgkJCQl0b2tlbjogJ2h0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbS9vYXV0aC92Mi9nZXRfdG9rZW4nCgkJCX0sCgoJCQkvLyBMb2dpbiBoYW5kbGVyCgkJCWxvZ2luOiBmdW5jdGlvbihwKSB7CgkJCQkvLyBDaGFuZ2UgdGhlIGRlZmF1bHQgcG9wdXAgd2luZG93IHRvIGJlIGF0IGxlYXN0IDU2MAoJCQkJLy8gWWFob28gZG9lcyBkeW5hbWljYWxseSBjaGFuZ2UgaXQgb24gdGhlIGZseSBmb3IgdGhlIHNpZ25pbiBzY3JlZW4gKG9ubHksIHdoYXQgaWYgeW91ciBhbHJlYWR5IHNpZ25lZCBpbikKCQkJCXAub3B0aW9ucy5wb3B1cC53aWR0aCA9IDU2MDsKCgkJCQkvLyBZYWhvbyB0aHJvd3MgYW4gcGFyYW1ldGVyIGVycm9yIGlmIGZvciB3aGF0ZXZlciByZWFzb24gdGhlIHN0YXRlLnNjb3BlIGNvbnRhaW5zIGEgY29tbWEsIHNvIGxldHMgcmVtb3ZlIHNjb3BlCgkJCQl0cnkge2RlbGV0ZSBwLnFzLnN0YXRlLnNjb3BlO30KCQkJCWNhdGNoIChlKSB7fQoJCQl9LAoKCQkJYmFzZTogJ2h0dHBzOi8vc29jaWFsLnlhaG9vYXBpcy5jb20vdjEvJywKCgkJCWdldDogewoJCQkJbWU6IHlxbCgnc2VsZWN0ICogZnJvbSBzb2NpYWwucHJvZmlsZSgwKSB3aGVyZSBndWlkPW1lJyksCgkJCQknbWUvZnJpZW5kcyc6IHlxbCgnc2VsZWN0ICogZnJvbSBzb2NpYWwuY29udGFjdHMoMCkgd2hlcmUgZ3VpZD1tZScpLAoJCQkJJ21lL2ZvbGxvd2luZyc6IHlxbCgnc2VsZWN0ICogZnJvbSBzb2NpYWwuY29udGFjdHMoMCkgd2hlcmUgZ3VpZD1tZScpCgkJCX0sCgkJCXdyYXA6IHsKCQkJCW1lOiBmb3JtYXRVc2VyLAoKCQkJCS8vIENhbid0IGdldCBJRHMKCQkJCS8vIEl0IG1pZ2h0IGJlIGJldHRlciB0byBsb29wIHRocm91Z2ggdGhlIHNvY2lhbC5yZWxhdGlvbnNoaXAgdGFibGUgd2l0aCBoYXMgdW5pcXVlIElEcyBvZiB1c2Vycy4KCQkJCSdtZS9mcmllbmRzJzogZm9ybWF0RnJpZW5kcywKCQkJCSdtZS9mb2xsb3dpbmcnOiBmb3JtYXRGcmllbmRzLAoJCQkJJ2RlZmF1bHQnOiBwYWdpbmcKCQkJfQoJCX0KCX0pOwoKCS8qCgkJLy8gQXV0by1yZWZyZXNoIGZpeDogYnVnIGluIFlhaG9vIGNhbid0IGdldCB0aGlzIHRvIHdvcmsgd2l0aCBub2RlLW9hdXRoLXNoaW0KCQlsb2dpbiA6IGZ1bmN0aW9uKG8pewoJCQkvLyBJcyB0aGUgdXNlciBhbHJlYWR5IGxvZ2dlZCBpbgoJCQl2YXIgYXV0aCA9IGhlbGxvKCd5YWhvbycpLmdldEF1dGhSZXNwb25zZSgpOwoKCQkJLy8gSXMgdGhpcyBhIHJlZnJlc2ggdG9rZW4/CgkJCWlmKG8ub3B0aW9ucy5kaXNwbGF5PT09J25vbmUnJiZhdXRoJiZhdXRoLmFjY2Vzc190b2tlbiYmYXV0aC5yZWZyZXNoX3Rva2VuKXsKCQkJCS8vIEFkZCB0aGUgb2xkIHRva2VuIGFuZCB0aGUgcmVmcmVzaCB0b2tlbiwgaW5jbHVkaW5nIHBhdGggdG8gdGhlIHF1ZXJ5CgkJCQkvLyBTZWUgaHR0cDovL2RldmVsb3Blci55YWhvby5jb20vb2F1dGgvZ3VpZGUvb2F1dGgtcmVmcmVzaGFjY2Vzc3Rva2VuLmh0bWwKCQkJCW8ucXMuYWNjZXNzX3Rva2VuID0gYXV0aC5hY2Nlc3NfdG9rZW47CgkJCQlvLnFzLnJlZnJlc2hfdG9rZW4gPSBhdXRoLnJlZnJlc2hfdG9rZW47CgkJCQlvLnFzLnRva2VuX3VybCA9ICdodHRwczovL2FwaS5sb2dpbi55YWhvby5jb20vb2F1dGgvdjIvZ2V0X3Rva2VuJzsKCQkJfQoJCX0sCgkqLwoKCWZ1bmN0aW9uIGZvcm1hdEVycm9yKG8pIHsKCQlpZiAobyAmJiAnbWV0YScgaW4gbyAmJiAnZXJyb3JfdHlwZScgaW4gby5tZXRhKSB7CgkJCW8uZXJyb3IgPSB7CgkJCQljb2RlOiBvLm1ldGEuZXJyb3JfdHlwZSwKCQkJCW1lc3NhZ2U6IG8ubWV0YS5lcnJvcl9tZXNzYWdlCgkJCX07CgkJfQoJfQoKCWZ1bmN0aW9uIGZvcm1hdFVzZXIobykgewoKCQlmb3JtYXRFcnJvcihvKTsKCQlpZiAoby5xdWVyeSAmJiBvLnF1ZXJ5LnJlc3VsdHMgJiYgby5xdWVyeS5yZXN1bHRzLnByb2ZpbGUpIHsKCQkJbyA9IG8ucXVlcnkucmVzdWx0cy5wcm9maWxlOwoJCQlvLmlkID0gby5ndWlkOwoJCQlvLmxhc3RfbmFtZSA9IG8uZmFtaWx5TmFtZTsKCQkJby5maXJzdF9uYW1lID0gby5naXZlbk5hbWUgfHwgby5uaWNrbmFtZTsKCQkJdmFyIGEgPSBbXTsKCQkJaWYgKG8uZmlyc3RfbmFtZSkgewoJCQkJYS5wdXNoKG8uZmlyc3RfbmFtZSk7CgkJCX0KCgkJCWlmIChvLmxhc3RfbmFtZSkgewoJCQkJYS5wdXNoKG8ubGFzdF9uYW1lKTsKCQkJfQoKCQkJby5uYW1lID0gYS5qb2luKCcgJyk7CgkJCW8uZW1haWwgPSAoby5lbWFpbHMgJiYgby5lbWFpbHNbMF0pID8gby5lbWFpbHNbMF0uaGFuZGxlIDogbnVsbDsKCQkJby50aHVtYm5haWwgPSBvLmltYWdlID8gby5pbWFnZS5pbWFnZVVybCA6IG51bGw7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRGcmllbmRzKG8sIGhlYWRlcnMsIHJlcXVlc3QpIHsKCQlmb3JtYXRFcnJvcihvKTsKCQlwYWdpbmcobywgaGVhZGVycywgcmVxdWVzdCk7CgkJdmFyIGNvbnRhY3Q7CgkJdmFyIGZpZWxkOwoJCWlmIChvLnF1ZXJ5ICYmIG8ucXVlcnkucmVzdWx0cyAmJiBvLnF1ZXJ5LnJlc3VsdHMuY29udGFjdCkgewoJCQlvLmRhdGEgPSBvLnF1ZXJ5LnJlc3VsdHMuY29udGFjdDsKCQkJZGVsZXRlIG8ucXVlcnk7CgoJCQlpZiAoIUFycmF5LmlzQXJyYXkoby5kYXRhKSkgewoJCQkJby5kYXRhID0gW28uZGF0YV07CgkJCX0KCgkJCW8uZGF0YS5mb3JFYWNoKGZvcm1hdEZyaWVuZCk7CgkJfQoKCQlyZXR1cm4gbzsKCX0KCglmdW5jdGlvbiBmb3JtYXRGcmllbmQoY29udGFjdCkgewoJCWNvbnRhY3QuaWQgPSBudWxsOwoKCQkvLyAjMzYyOiBSZXBvcnRzIG9mIHJlc3BvbnNlcyByZXR1cm5pbmcgYSBzaW5nbGUgaXRlbSwgcmF0aGVyIHRoYW4gYW4gQXJyYXkgb2YgaXRlbXMuCgkJLy8gRm9ybWF0IHRoZSBjb250YWN0LmZpZWxkcyB0byBiZSBhbiBhcnJheS4KCQlpZiAoY29udGFjdC5maWVsZHMgJiYgIShjb250YWN0LmZpZWxkcyBpbnN0YW5jZW9mIEFycmF5KSkgewoJCQljb250YWN0LmZpZWxkcyA9IFtjb250YWN0LmZpZWxkc107CgkJfQoKCQkoY29udGFjdC5maWVsZHMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oZmllbGQpIHsKCQkJaWYgKGZpZWxkLnR5cGUgPT09ICdlbWFpbCcpIHsKCQkJCWNvbnRhY3QuZW1haWwgPSBmaWVsZC52YWx1ZTsKCQkJfQoKCQkJaWYgKGZpZWxkLnR5cGUgPT09ICduYW1lJykgewoJCQkJY29udGFjdC5maXJzdF9uYW1lID0gZmllbGQudmFsdWUuZ2l2ZW5OYW1lOwoJCQkJY29udGFjdC5sYXN0X25hbWUgPSBmaWVsZC52YWx1ZS5mYW1pbHlOYW1lOwoJCQkJY29udGFjdC5uYW1lID0gZmllbGQudmFsdWUuZ2l2ZW5OYW1lICsgJyAnICsgZmllbGQudmFsdWUuZmFtaWx5TmFtZTsKCQkJfQoKCQkJaWYgKGZpZWxkLnR5cGUgPT09ICd5YWhvb2lkJykgewoJCQkJY29udGFjdC5pZCA9IGZpZWxkLnZhbHVlOwoJCQl9CgkJfSk7Cgl9CgoJZnVuY3Rpb24gcGFnaW5nKHJlcywgaGVhZGVycywgcmVxdWVzdCkgewoKCQkvLyBTZWU6IGh0dHA6Ly9kZXZlbG9wZXIueWFob28uY29tL3lxbC9ndWlkZS9wYWdpbmcuaHRtbCNsb2NhbF9saW1pdHMKCQlpZiAocmVzLnF1ZXJ5ICYmIHJlcy5xdWVyeS5jb3VudCAmJiByZXF1ZXN0Lm9wdGlvbnMpIHsKCQkJcmVzLnBhZ2luZyA9IHsKCQkJCW5leHQ6ICc/c3RhcnQ9JyArIChyZXMucXVlcnkuY291bnQgKyAoK3JlcXVlc3Qub3B0aW9ucy5zdGFydCB8fCAxKSkKCQkJfTsKCQl9CgoJCXJldHVybiByZXM7Cgl9CgoJZnVuY3Rpb24geXFsKHEpIHsKCQlyZXR1cm4gJ2h0dHBzOi8vcXVlcnkueWFob29hcGlzLmNvbS92MS95cWw/cT0nICsgKHEgKyAnIGxpbWl0IEB7bGltaXR8MTAwfSBvZmZzZXQgQHtzdGFydHwwfScpLnJlcGxhY2UoL1xzL2csICclMjAnKSArICcmZm9ybWF0PWpzb24nOwoJfQoKfSkoaGVsbG8pOwoKLy8gUmVnaXN0ZXIgYXMgYW5vbnltb3VzIEFNRCBtb2R1bGUKaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewoJZGVmaW5lKGZ1bmN0aW9uKCkgewoJCXJldHVybiBoZWxsbzsKCX0pOwp9CgovLyBDb21tb25KUyBtb2R1bGUgZm9yIGJyb3dzZXJpZnkKaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7Cgltb2R1bGUuZXhwb3J0cyA9IGhlbGxvOwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSkKfSx7Il9wcm9jZXNzIjoxNDF9XSwxMjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykgewogIHZhciBlLCBtCiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEKICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMQogIHZhciBlQmlhcyA9IGVNYXggPj4gMQogIHZhciBuQml0cyA9IC03CiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMAogIHZhciBkID0gaXNMRSA/IC0xIDogMQogIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldCgogIGkgKz0gZAoKICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKQogIHMgPj49ICgtbkJpdHMpCiAgbkJpdHMgKz0gZUxlbgogIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgogIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpCiAgZSA+Pj0gKC1uQml0cykKICBuQml0cyArPSBtTGVuCiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge30KCiAgaWYgKGUgPT09IDApIHsKICAgIGUgPSAxIC0gZUJpYXMKICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHsKICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KQogIH0gZWxzZSB7CiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pCiAgICBlID0gZSAtIGVCaWFzCiAgfQogIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pCn0KCmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKICB2YXIgZSwgbSwgYwogIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxCiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDEKICB2YXIgZUJpYXMgPSBlTWF4ID4+IDEKICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApCiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKQogIHZhciBkID0gaXNMRSA/IDEgOiAtMQogIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwCgogIHZhbHVlID0gTWF0aC5hYnModmFsdWUpCgogIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7CiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDAKICAgIGUgPSBlTWF4CiAgfSBlbHNlIHsKICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKQogICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkgewogICAgICBlLS0KICAgICAgYyAqPSAyCiAgICB9CiAgICBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgdmFsdWUgKz0gcnQgLyBjCiAgICB9IGVsc2UgewogICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcykKICAgIH0KICAgIGlmICh2YWx1ZSAqIGMgPj0gMikgewogICAgICBlKysKICAgICAgYyAvPSAyCiAgICB9CgogICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CiAgICAgIG0gPSAwCiAgICAgIGUgPSBlTWF4CiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7CiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKQogICAgICBlID0gZSArIGVCaWFzCiAgICB9IGVsc2UgewogICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbikKICAgICAgZSA9IDAKICAgIH0KICB9CgogIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9CgogIGUgPSAoZSA8PCBtTGVuKSB8IG0KICBlTGVuICs9IG1MZW4KICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9CgogIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOAp9Cgp9LHt9XSwxMjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoKdmFyIGluZGV4T2YgPSBbXS5pbmRleE9mOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcnIsIG9iail7CiAgaWYgKGluZGV4T2YpIHJldHVybiBhcnIuaW5kZXhPZihvYmopOwogIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7CiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpOwogIH0KICByZXR1cm4gLTE7Cn07Cn0se31dLDEyOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CmlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykgewogIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlCiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yCiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwgewogICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgIHZhbHVlOiBjdG9yLAogICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICB9CiAgICB9KTsKICB9Owp9IGVsc2UgewogIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzCiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yCiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fQogICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZQogICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKQogICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yCiAgfQp9Cgp9LHt9XSwxMzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKioKICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBCdWZmZXIKICoKICogQXV0aG9yOiAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+CiAqIExpY2Vuc2U6ICBNSVQKICoKICogYG5wbSBpbnN0YWxsIGlzLWJ1ZmZlcmAKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHsKICByZXR1cm4gISEob2JqICE9IG51bGwgJiYKICAgIChvYmouX2lzQnVmZmVyIHx8IC8vIEZvciBTYWZhcmkgNS03IChtaXNzaW5nIE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IpCiAgICAgIChvYmouY29uc3RydWN0b3IgJiYKICAgICAgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKSkKICAgICkpCn0KCn0se31dLDEzMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7Cn07Cgp9LHt9XSwxMzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cgp2YXIgbmF2aWdhdG9yID0ge307Cm5hdmlnYXRvci51c2VyQWdlbnQgPSBmYWxzZTsKCnZhciB3aW5kb3cgPSB7fTsKLyoKICoganNyc2FzaWduIDUuMC41IChjKSAyMDEwLTIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCgovKgp5YWhvby1taW4uanMKQ29weXJpZ2h0IChjKSAyMDExLCBZYWhvbyEgSW5jLiBBbGwgcmlnaHRzIHJlc2VydmVkLgpDb2RlIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgTGljZW5zZToKaHR0cDovL2RldmVsb3Blci55YWhvby5jb20veXVpL2xpY2Vuc2UuaHRtbAp2ZXJzaW9uOiAyLjkuMAoqLwppZih0eXBlb2YgWUFIT089PSJ1bmRlZmluZWQifHwhWUFIT08pe3ZhciBZQUhPTz17fTt9WUFIT08ubmFtZXNwYWNlPWZ1bmN0aW9uKCl7dmFyIGI9YXJndW1lbnRzLGc9bnVsbCxlLGMsZjtmb3IoZT0wO2U8Yi5sZW5ndGg7ZT1lKzEpe2Y9KCIiK2JbZV0pLnNwbGl0KCIuIik7Zz1ZQUhPTztmb3IoYz0oZlswXT09IllBSE9PIik/MTowO2M8Zi5sZW5ndGg7Yz1jKzEpe2dbZltjXV09Z1tmW2NdXXx8e307Zz1nW2ZbY11dO319cmV0dXJuIGc7fTtZQUhPTy5sb2c9ZnVuY3Rpb24oZCxhLGMpe3ZhciBiPVlBSE9PLndpZGdldC5Mb2dnZXI7aWYoYiYmYi5sb2cpe3JldHVybiBiLmxvZyhkLGEsYyk7fWVsc2V7cmV0dXJuIGZhbHNlO319O1lBSE9PLnJlZ2lzdGVyPWZ1bmN0aW9uKGEsZixlKXt2YXIgaz1ZQUhPTy5lbnYubW9kdWxlcyxjLGosaCxnLGQ7aWYoIWtbYV0pe2tbYV09e3ZlcnNpb25zOltdLGJ1aWxkczpbXX07fWM9a1thXTtqPWUudmVyc2lvbjtoPWUuYnVpbGQ7Zz1ZQUhPTy5lbnYubGlzdGVuZXJzO2MubmFtZT1hO2MudmVyc2lvbj1qO2MuYnVpbGQ9aDtjLnZlcnNpb25zLnB1c2goaik7Yy5idWlsZHMucHVzaChoKTtjLm1haW5DbGFzcz1mO2ZvcihkPTA7ZDxnLmxlbmd0aDtkPWQrMSl7Z1tkXShjKTt9aWYoZil7Zi5WRVJTSU9OPWo7Zi5CVUlMRD1oO31lbHNle1lBSE9PLmxvZygibWFpbkNsYXNzIGlzIHVuZGVmaW5lZCBmb3IgbW9kdWxlICIrYSwid2FybiIpO319O1lBSE9PLmVudj1ZQUhPTy5lbnZ8fHttb2R1bGVzOltdLGxpc3RlbmVyczpbXX07WUFIT08uZW52LmdldFZlcnNpb249ZnVuY3Rpb24oYSl7cmV0dXJuIFlBSE9PLmVudi5tb2R1bGVzW2FdfHxudWxsO307WUFIT08uZW52LnBhcnNlVUE9ZnVuY3Rpb24oZCl7dmFyIGU9ZnVuY3Rpb24oaSl7dmFyIGo9MDtyZXR1cm4gcGFyc2VGbG9hdChpLnJlcGxhY2UoL1wuL2csZnVuY3Rpb24oKXtyZXR1cm4oaisrPT0xKT8iIjoiLiI7fSkpO30saD1uYXZpZ2F0b3IsZz17aWU6MCxvcGVyYTowLGdlY2tvOjAsd2Via2l0OjAsY2hyb21lOjAsbW9iaWxlOm51bGwsYWlyOjAsaXBhZDowLGlwaG9uZTowLGlwb2Q6MCxpb3M6bnVsbCxhbmRyb2lkOjAsd2Vib3M6MCxjYWphOmgmJmguY2FqYVZlcnNpb24sc2VjdXJlOmZhbHNlLG9zOm51bGx9LGM9ZHx8KG5hdmlnYXRvciYmbmF2aWdhdG9yLnVzZXJBZ2VudCksZj13aW5kb3cmJndpbmRvdy5sb2NhdGlvbixiPWYmJmYuaHJlZixhO2cuc2VjdXJlPWImJihiLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiaHR0cHMiKT09PTApO2lmKGMpe2lmKCgvd2luZG93c3x3aW4zMi9pKS50ZXN0KGMpKXtnLm9zPSJ3aW5kb3dzIjt9ZWxzZXtpZigoL21hY2ludG9zaC9pKS50ZXN0KGMpKXtnLm9zPSJtYWNpbnRvc2giO31lbHNle2lmKCgvcmhpbm8vaSkudGVzdChjKSl7Zy5vcz0icmhpbm8iO319fWlmKCgvS0hUTUwvKS50ZXN0KGMpKXtnLndlYmtpdD0xO31hPWMubWF0Y2goL0FwcGxlV2ViS2l0XC8oW15cc10qKS8pO2lmKGEmJmFbMV0pe2cud2Via2l0PWUoYVsxXSk7aWYoLyBNb2JpbGVcLy8udGVzdChjKSl7Zy5tb2JpbGU9IkFwcGxlIjthPWMubWF0Y2goL09TIChbXlxzXSopLyk7aWYoYSYmYVsxXSl7YT1lKGFbMV0ucmVwbGFjZSgiXyIsIi4iKSk7fWcuaW9zPWE7Zy5pcGFkPWcuaXBvZD1nLmlwaG9uZT0wO2E9Yy5tYXRjaCgvaVBhZHxpUG9kfGlQaG9uZS8pO2lmKGEmJmFbMF0pe2dbYVswXS50b0xvd2VyQ2FzZSgpXT1nLmlvczt9fWVsc2V7YT1jLm1hdGNoKC9Ob2tpYU5bXlwvXSp8QW5kcm9pZCBcZFwuXGR8d2ViT1NcL1xkXC5cZC8pO2lmKGEpe2cubW9iaWxlPWFbMF07fWlmKC93ZWJPUy8udGVzdChjKSl7Zy5tb2JpbGU9IldlYk9TIjthPWMubWF0Y2goL3dlYk9TXC8oW15cc10qKTsvKTtpZihhJiZhWzFdKXtnLndlYm9zPWUoYVsxXSk7fX1pZigvIEFuZHJvaWQvLnRlc3QoYykpe2cubW9iaWxlPSJBbmRyb2lkIjthPWMubWF0Y2goL0FuZHJvaWQgKFteXHNdKik7Lyk7aWYoYSYmYVsxXSl7Zy5hbmRyb2lkPWUoYVsxXSk7fX19YT1jLm1hdGNoKC9DaHJvbWVcLyhbXlxzXSopLyk7aWYoYSYmYVsxXSl7Zy5jaHJvbWU9ZShhWzFdKTt9ZWxzZXthPWMubWF0Y2goL0Fkb2JlQUlSXC8oW15cc10qKS8pO2lmKGEpe2cuYWlyPWFbMF07fX19aWYoIWcud2Via2l0KXthPWMubWF0Y2goL09wZXJhW1xzXC9dKFteXHNdKikvKTtpZihhJiZhWzFdKXtnLm9wZXJhPWUoYVsxXSk7YT1jLm1hdGNoKC9WZXJzaW9uXC8oW15cc10qKS8pO2lmKGEmJmFbMV0pe2cub3BlcmE9ZShhWzFdKTt9YT1jLm1hdGNoKC9PcGVyYSBNaW5pW147XSovKTtpZihhKXtnLm1vYmlsZT1hWzBdO319ZWxzZXthPWMubWF0Y2goL01TSUVccyhbXjtdKikvKTtpZihhJiZhWzFdKXtnLmllPWUoYVsxXSk7fWVsc2V7YT1jLm1hdGNoKC9HZWNrb1wvKFteXHNdKikvKTtpZihhKXtnLmdlY2tvPTE7YT1jLm1hdGNoKC9ydjooW15cc1wpXSopLyk7aWYoYSYmYVsxXSl7Zy5nZWNrbz1lKGFbMV0pO319fX19fXJldHVybiBnO307WUFIT08uZW52LnVhPVlBSE9PLmVudi5wYXJzZVVBKCk7KGZ1bmN0aW9uKCl7WUFIT08ubmFtZXNwYWNlKCJ1dGlsIiwid2lkZ2V0IiwiZXhhbXBsZSIpO2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFlBSE9PX2NvbmZpZyl7dmFyIGI9WUFIT09fY29uZmlnLmxpc3RlbmVyLGE9WUFIT08uZW52Lmxpc3RlbmVycyxkPXRydWUsYztpZihiKXtmb3IoYz0wO2M8YS5sZW5ndGg7YysrKXtpZihhW2NdPT1iKXtkPWZhbHNlO2JyZWFrO319aWYoZCl7YS5wdXNoKGIpO319fX0pKCk7WUFIT08ubGFuZz1ZQUhPTy5sYW5nfHx7fTsoZnVuY3Rpb24oKXt2YXIgZj1ZQUhPTy5sYW5nLGE9T2JqZWN0LnByb3RvdHlwZSxjPSJbb2JqZWN0IEFycmF5XSIsaD0iW29iamVjdCBGdW5jdGlvbl0iLGk9IltvYmplY3QgT2JqZWN0XSIsYj1bXSxnPXsiJiI6IiZhbXA7IiwiPCI6IiZsdDsiLCI+IjoiJmd0OyIsJyInOiImcXVvdDsiLCInIjoiJiN4Mjc7IiwiLyI6IiYjeDJGOyIsImAiOiImI3g2MDsifSxkPVsidG9TdHJpbmciLCJ2YWx1ZU9mIl0sZT17aXNBcnJheTpmdW5jdGlvbihqKXtyZXR1cm4gYS50b1N0cmluZy5hcHBseShqKT09PWM7fSxpc0Jvb2xlYW46ZnVuY3Rpb24oail7cmV0dXJuIHR5cGVvZiBqPT09ImJvb2xlYW4iO30saXNGdW5jdGlvbjpmdW5jdGlvbihqKXtyZXR1cm4odHlwZW9mIGo9PT0iZnVuY3Rpb24iKXx8YS50b1N0cmluZy5hcHBseShqKT09PWg7fSxpc051bGw6ZnVuY3Rpb24oail7cmV0dXJuIGo9PT1udWxsO30saXNOdW1iZXI6ZnVuY3Rpb24oail7cmV0dXJuIHR5cGVvZiBqPT09Im51bWJlciImJmlzRmluaXRlKGopO30saXNPYmplY3Q6ZnVuY3Rpb24oail7cmV0dXJuKGomJih0eXBlb2Ygaj09PSJvYmplY3QifHxmLmlzRnVuY3Rpb24oaikpKXx8ZmFsc2U7fSxpc1N0cmluZzpmdW5jdGlvbihqKXtyZXR1cm4gdHlwZW9mIGo9PT0ic3RyaW5nIjt9LGlzVW5kZWZpbmVkOmZ1bmN0aW9uKGope3JldHVybiB0eXBlb2Ygaj09PSJ1bmRlZmluZWQiO30sX0lFRW51bUZpeDooWUFIT08uZW52LnVhLmllKT9mdW5jdGlvbihsLGspe3ZhciBqLG4sbTtmb3Ioaj0wO2o8ZC5sZW5ndGg7aj1qKzEpe249ZFtqXTttPWtbbl07aWYoZi5pc0Z1bmN0aW9uKG0pJiZtIT1hW25dKXtsW25dPW07fX19OmZ1bmN0aW9uKCl7fSxlc2NhcGVIVE1MOmZ1bmN0aW9uKGope3JldHVybiBqLnJlcGxhY2UoL1smPD4iJ1wvYF0vZyxmdW5jdGlvbihrKXtyZXR1cm4gZ1trXTt9KTt9LGV4dGVuZDpmdW5jdGlvbihtLG4sbCl7aWYoIW58fCFtKXt0aHJvdyBuZXcgRXJyb3IoImV4dGVuZCBmYWlsZWQsIHBsZWFzZSBjaGVjayB0aGF0ICIrImFsbCBkZXBlbmRlbmNpZXMgYXJlIGluY2x1ZGVkLiIpO312YXIgaz1mdW5jdGlvbigpe30sajtrLnByb3RvdHlwZT1uLnByb3RvdHlwZTttLnByb3RvdHlwZT1uZXcgaygpO20ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW07bS5zdXBlcmNsYXNzPW4ucHJvdG90eXBlO2lmKG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPT1hLmNvbnN0cnVjdG9yKXtuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1uO31pZihsKXtmb3IoaiBpbiBsKXtpZihmLmhhc093blByb3BlcnR5KGwsaikpe20ucHJvdG90eXBlW2pdPWxbal07fX1mLl9JRUVudW1GaXgobS5wcm90b3R5cGUsbCk7fX0sYXVnbWVudE9iamVjdDpmdW5jdGlvbihuLG0pe2lmKCFtfHwhbil7dGhyb3cgbmV3IEVycm9yKCJBYnNvcmIgZmFpbGVkLCB2ZXJpZnkgZGVwZW5kZW5jaWVzLiIpO312YXIgaj1hcmd1bWVudHMsbCxvLGs9alsyXTtpZihrJiZrIT09dHJ1ZSl7Zm9yKGw9MjtsPGoubGVuZ3RoO2w9bCsxKXtuW2pbbF1dPW1baltsXV07fX1lbHNle2ZvcihvIGluIG0pe2lmKGt8fCEobyBpbiBuKSl7bltvXT1tW29dO319Zi5fSUVFbnVtRml4KG4sbSk7fXJldHVybiBuO30sYXVnbWVudFByb3RvOmZ1bmN0aW9uKG0sbCl7aWYoIWx8fCFtKXt0aHJvdyBuZXcgRXJyb3IoIkF1Z21lbnQgZmFpbGVkLCB2ZXJpZnkgZGVwZW5kZW5jaWVzLiIpO312YXIgaj1bbS5wcm90b3R5cGUsbC5wcm90b3R5cGVdLGs7Zm9yKGs9MjtrPGFyZ3VtZW50cy5sZW5ndGg7az1rKzEpe2oucHVzaChhcmd1bWVudHNba10pO31mLmF1Z21lbnRPYmplY3QuYXBwbHkodGhpcyxqKTtyZXR1cm4gbTt9LGR1bXA6ZnVuY3Rpb24oaixwKXt2YXIgbCxuLHI9W10sdD0iey4uLn0iLGs9ImYoKXsuLi59IixxPSIsICIsbT0iID0+ICI7aWYoIWYuaXNPYmplY3Qoaikpe3JldHVybiBqKyIiO31lbHNle2lmKGogaW5zdGFuY2VvZiBEYXRlfHwoIm5vZGVUeXBlIiBpbiBqJiYidGFnTmFtZSIgaW4gaikpe3JldHVybiBqO31lbHNle2lmKGYuaXNGdW5jdGlvbihqKSl7cmV0dXJuIGs7fX19cD0oZi5pc051bWJlcihwKSk/cDozO2lmKGYuaXNBcnJheShqKSl7ci5wdXNoKCJbIik7Zm9yKGw9MCxuPWoubGVuZ3RoO2w8bjtsPWwrMSl7aWYoZi5pc09iamVjdChqW2xdKSl7ci5wdXNoKChwPjApP2YuZHVtcChqW2xdLHAtMSk6dCk7fWVsc2V7ci5wdXNoKGpbbF0pO31yLnB1c2gocSk7fWlmKHIubGVuZ3RoPjEpe3IucG9wKCk7fXIucHVzaCgiXSIpO31lbHNle3IucHVzaCgieyIpO2ZvcihsIGluIGope2lmKGYuaGFzT3duUHJvcGVydHkoaixsKSl7ci5wdXNoKGwrbSk7aWYoZi5pc09iamVjdChqW2xdKSl7ci5wdXNoKChwPjApP2YuZHVtcChqW2xdLHAtMSk6dCk7fWVsc2V7ci5wdXNoKGpbbF0pO31yLnB1c2gocSk7fX1pZihyLmxlbmd0aD4xKXtyLnBvcCgpO31yLnB1c2goIn0iKTt9cmV0dXJuIHIuam9pbigiIik7fSxzdWJzdGl0dXRlOmZ1bmN0aW9uKHgseSxFLGwpe3ZhciBELEMsQixHLHQsdSxGPVtdLHAsej14Lmxlbmd0aCxBPSJkdW1wIixyPSIgIixxPSJ7IixtPSJ9IixuLHc7Zm9yKDs7KXtEPXgubGFzdEluZGV4T2YocSx6KTtpZihEPDApe2JyZWFrO31DPXguaW5kZXhPZihtLEQpO2lmKEQrMT5DKXticmVhazt9cD14LnN1YnN0cmluZyhEKzEsQyk7Rz1wO3U9bnVsbDtCPUcuaW5kZXhPZihyKTtpZihCPi0xKXt1PUcuc3Vic3RyaW5nKEIrMSk7Rz1HLnN1YnN0cmluZygwLEIpO310PXlbR107aWYoRSl7dD1FKEcsdCx1KTt9aWYoZi5pc09iamVjdCh0KSl7aWYoZi5pc0FycmF5KHQpKXt0PWYuZHVtcCh0LHBhcnNlSW50KHUsMTApKTt9ZWxzZXt1PXV8fCIiO249dS5pbmRleE9mKEEpO2lmKG4+LTEpe3U9dS5zdWJzdHJpbmcoNCk7fXc9dC50b1N0cmluZygpO2lmKHc9PT1pfHxuPi0xKXt0PWYuZHVtcCh0LHBhcnNlSW50KHUsMTApKTt9ZWxzZXt0PXc7fX19ZWxzZXtpZighZi5pc1N0cmluZyh0KSYmIWYuaXNOdW1iZXIodCkpe3Q9In4tIitGLmxlbmd0aCsiLX4iO0ZbRi5sZW5ndGhdPXA7fX14PXguc3Vic3RyaW5nKDAsRCkrdCt4LnN1YnN0cmluZyhDKzEpO2lmKGw9PT1mYWxzZSl7ej1ELTE7fX1mb3IoRD1GLmxlbmd0aC0xO0Q+PTA7RD1ELTEpe3g9eC5yZXBsYWNlKG5ldyBSZWdFeHAoIn4tIitEKyItfiIpLCJ7IitGW0RdKyJ9IiwiZyIpO31yZXR1cm4geDt9LHRyaW06ZnVuY3Rpb24oail7dHJ5e3JldHVybiBqLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKTt9Y2F0Y2goayl7cmV0dXJuIGo7Cn19LG1lcmdlOmZ1bmN0aW9uKCl7dmFyIG49e30saz1hcmd1bWVudHMsaj1rLmxlbmd0aCxtO2ZvcihtPTA7bTxqO209bSsxKXtmLmF1Z21lbnRPYmplY3QobixrW21dLHRydWUpO31yZXR1cm4gbjt9LGxhdGVyOmZ1bmN0aW9uKHQsayx1LG4scCl7dD10fHwwO2s9a3x8e307dmFyIGw9dSxzPW4scSxqO2lmKGYuaXNTdHJpbmcodSkpe2w9a1t1XTt9aWYoIWwpe3Rocm93IG5ldyBUeXBlRXJyb3IoIm1ldGhvZCB1bmRlZmluZWQiKTt9aWYoIWYuaXNVbmRlZmluZWQobikmJiFmLmlzQXJyYXkocykpe3M9W25dO31xPWZ1bmN0aW9uKCl7bC5hcHBseShrLHN8fGIpO307aj0ocCk/c2V0SW50ZXJ2YWwocSx0KTpzZXRUaW1lb3V0KHEsdCk7cmV0dXJue2ludGVydmFsOnAsY2FuY2VsOmZ1bmN0aW9uKCl7aWYodGhpcy5pbnRlcnZhbCl7Y2xlYXJJbnRlcnZhbChqKTt9ZWxzZXtjbGVhclRpbWVvdXQoaik7fX19O30saXNWYWx1ZTpmdW5jdGlvbihqKXtyZXR1cm4oZi5pc09iamVjdChqKXx8Zi5pc1N0cmluZyhqKXx8Zi5pc051bWJlcihqKXx8Zi5pc0Jvb2xlYW4oaikpO319O2YuaGFzT3duUHJvcGVydHk9KGEuaGFzT3duUHJvcGVydHkpP2Z1bmN0aW9uKGosayl7cmV0dXJuIGomJmouaGFzT3duUHJvcGVydHkmJmouaGFzT3duUHJvcGVydHkoayk7fTpmdW5jdGlvbihqLGspe3JldHVybiAhZi5pc1VuZGVmaW5lZChqW2tdKSYmai5jb25zdHJ1Y3Rvci5wcm90b3R5cGVba10hPT1qW2tdO307ZS5hdWdtZW50T2JqZWN0KGYsZSx0cnVlKTtZQUhPTy51dGlsLkxhbmc9ZjtmLmF1Z21lbnQ9Zi5hdWdtZW50UHJvdG87WUFIT08uYXVnbWVudD1mLmF1Z21lbnRQcm90bztZQUhPTy5leHRlbmQ9Zi5leHRlbmQ7fSkoKTtZQUhPTy5yZWdpc3RlcigieWFob28iLFlBSE9PLHt2ZXJzaW9uOiIyLjkuMCIsYnVpbGQ6IjI4MDAifSk7CgovKiEgQ3J5cHRvSlMgdjMuMS4yIGNvcmUtZml4LmpzCiAqIGNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwogKiAoYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQogKiBUSElTIElTIEZJWCBvZiAnY29yZS5qcycgdG8gZml4IEhtYWMgaXNzdWUuCiAqIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL2lzc3Vlcy9kZXRhaWw/aWQ9ODQKICogaHR0cHM6Ly9jcnlwdG8tanMuZ29vZ2xlY29kZS5jb20vc3ZuLWhpc3RvcnkvcjY2Ny9icmFuY2hlcy8zLngvc3JjL2NvcmUuanMKICovCnZhciBDcnlwdG9KUz1DcnlwdG9KU3x8KGZ1bmN0aW9uKGUsZyl7dmFyIGE9e307dmFyIGI9YS5saWI9e307dmFyIGo9Yi5CYXNlPShmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt9cmV0dXJue2V4dGVuZDpmdW5jdGlvbihwKXtuLnByb3RvdHlwZT10aGlzO3ZhciBvPW5ldyBuKCk7aWYocCl7by5taXhJbihwKX1pZighby5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpKXtvLmluaXQ9ZnVuY3Rpb24oKXtvLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19by5pbml0LnByb3RvdHlwZT1vO28uJHN1cGVyPXRoaXM7cmV0dXJuIG99LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciBvPXRoaXMuZXh0ZW5kKCk7by5pbml0LmFwcGx5KG8sYXJndW1lbnRzKTtyZXR1cm4gb30saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24ocCl7Zm9yKHZhciBvIGluIHApe2lmKHAuaGFzT3duUHJvcGVydHkobykpe3RoaXNbb109cFtvXX19aWYocC5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSl7dGhpcy50b1N0cmluZz1wLnRvU3RyaW5nfX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyl9fX0oKSk7dmFyIGw9Yi5Xb3JkQXJyYXk9ai5leHRlbmQoe2luaXQ6ZnVuY3Rpb24obyxuKXtvPXRoaXMud29yZHM9b3x8W107aWYobiE9Zyl7dGhpcy5zaWdCeXRlcz1ufWVsc2V7dGhpcy5zaWdCeXRlcz1vLmxlbmd0aCo0fX0sdG9TdHJpbmc6ZnVuY3Rpb24obil7cmV0dXJuKG58fGgpLnN0cmluZ2lmeSh0aGlzKX0sY29uY2F0OmZ1bmN0aW9uKHQpe3ZhciBxPXRoaXMud29yZHM7dmFyIHA9dC53b3Jkczt2YXIgbj10aGlzLnNpZ0J5dGVzO3ZhciBzPXQuc2lnQnl0ZXM7dGhpcy5jbGFtcCgpO2lmKG4lNCl7Zm9yKHZhciByPTA7cjxzO3IrKyl7dmFyIG89KHBbcj4+PjJdPj4+KDI0LShyJTQpKjgpKSYyNTU7cVsobityKT4+PjJdfD1vPDwoMjQtKChuK3IpJTQpKjgpfX1lbHNle2Zvcih2YXIgcj0wO3I8cztyKz00KXtxWyhuK3IpPj4+Ml09cFtyPj4+Ml19fXRoaXMuc2lnQnl0ZXMrPXM7cmV0dXJuIHRoaXN9LGNsYW1wOmZ1bmN0aW9uKCl7dmFyIG89dGhpcy53b3Jkczt2YXIgbj10aGlzLnNpZ0J5dGVzO29bbj4+PjJdJj00Mjk0OTY3Mjk1PDwoMzItKG4lNCkqOCk7by5sZW5ndGg9ZS5jZWlsKG4vNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIG49ai5jbG9uZS5jYWxsKHRoaXMpO24ud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKTtyZXR1cm4gbn0scmFuZG9tOmZ1bmN0aW9uKHApe3ZhciBvPVtdO2Zvcih2YXIgbj0wO248cDtuKz00KXtvLnB1c2goKGUucmFuZG9tKCkqNDI5NDk2NzI5Nil8MCl9cmV0dXJuIG5ldyBsLmluaXQobyxwKX19KTt2YXIgbT1hLmVuYz17fTt2YXIgaD1tLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKHApe3ZhciByPXAud29yZHM7dmFyIG89cC5zaWdCeXRlczt2YXIgcT1bXTtmb3IodmFyIG49MDtuPG87bisrKXt2YXIgcz0ocltuPj4+Ml0+Pj4oMjQtKG4lNCkqOCkpJjI1NTtxLnB1c2goKHM+Pj40KS50b1N0cmluZygxNikpO3EucHVzaCgocyYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gcS5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24ocCl7dmFyIG49cC5sZW5ndGg7dmFyIHE9W107Zm9yKHZhciBvPTA7bzxuO28rPTIpe3Fbbz4+PjNdfD1wYXJzZUludChwLnN1YnN0cihvLDIpLDE2KTw8KDI0LShvJTgpKjQpfXJldHVybiBuZXcgbC5pbml0KHEsbi8yKX19O3ZhciBkPW0uTGF0aW4xPXtzdHJpbmdpZnk6ZnVuY3Rpb24ocSl7dmFyIHI9cS53b3Jkczt2YXIgcD1xLnNpZ0J5dGVzO3ZhciBuPVtdO2Zvcih2YXIgbz0wO288cDtvKyspe3ZhciBzPShyW28+Pj4yXT4+PigyNC0obyU0KSo4KSkmMjU1O24ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHMpKX1yZXR1cm4gbi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24ocCl7dmFyIG49cC5sZW5ndGg7dmFyIHE9W107Zm9yKHZhciBvPTA7bzxuO28rKyl7cVtvPj4+Ml18PShwLmNoYXJDb2RlQXQobykmMjU1KTw8KDI0LShvJTQpKjgpfXJldHVybiBuZXcgbC5pbml0KHEsbil9fTt2YXIgYz1tLlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbihuKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZC5zdHJpbmdpZnkobikpKX1jYXRjaChvKXt0aHJvdyBuZXcgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIil9fSxwYXJzZTpmdW5jdGlvbihuKXtyZXR1cm4gZC5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQobikpKX19O3ZhciBpPWIuQnVmZmVyZWRCbG9ja0FsZ29yaXRobT1qLmV4dGVuZCh7cmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPW5ldyBsLmluaXQoKTt0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24obil7aWYodHlwZW9mIG49PSJzdHJpbmciKXtuPWMucGFyc2Uobil9dGhpcy5fZGF0YS5jb25jYXQobik7dGhpcy5fbkRhdGFCeXRlcys9bi5zaWdCeXRlc30sX3Byb2Nlc3M6ZnVuY3Rpb24odyl7dmFyIHE9dGhpcy5fZGF0YTt2YXIgeD1xLndvcmRzO3ZhciBuPXEuc2lnQnl0ZXM7dmFyIHQ9dGhpcy5ibG9ja1NpemU7dmFyIHY9dCo0O3ZhciB1PW4vdjtpZih3KXt1PWUuY2VpbCh1KX1lbHNle3U9ZS5tYXgoKHV8MCktdGhpcy5fbWluQnVmZmVyU2l6ZSwwKX12YXIgcz11KnQ7dmFyIHI9ZS5taW4ocyo0LG4pO2lmKHMpe2Zvcih2YXIgcD0wO3A8cztwKz10KXt0aGlzLl9kb1Byb2Nlc3NCbG9jayh4LHApfXZhciBvPXguc3BsaWNlKDAscyk7cS5zaWdCeXRlcy09cn1yZXR1cm4gbmV3IGwuaW5pdChvLHIpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBuPWouY2xvbmUuY2FsbCh0aGlzKTtuLl9kYXRhPXRoaXMuX2RhdGEuY2xvbmUoKTtyZXR1cm4gbn0sX21pbkJ1ZmZlclNpemU6MH0pO3ZhciBmPWIuSGFzaGVyPWkuZXh0ZW5kKHtjZmc6ai5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKG4pe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChuKTt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7aS5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKG4pe3RoaXMuX2FwcGVuZChuKTt0aGlzLl9wcm9jZXNzKCk7cmV0dXJuIHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKG4pe2lmKG4pe3RoaXMuX2FwcGVuZChuKX12YXIgbz10aGlzLl9kb0ZpbmFsaXplKCk7cmV0dXJuIG99LGJsb2NrU2l6ZTo1MTIvMzIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24ocCxvKXtyZXR1cm4gbmV3IG4uaW5pdChvKS5maW5hbGl6ZShwKX19LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbihwLG8pe3JldHVybiBuZXcgay5ITUFDLmluaXQobixvKS5maW5hbGl6ZShwKX19fSk7dmFyIGs9YS5hbGdvPXt9O3JldHVybiBhfShNYXRoKSk7Ci8qCkNyeXB0b0pTIHYzLjEuMiB4NjQtY29yZS1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihnKXt2YXIgYT1DcnlwdG9KUyxmPWEubGliLGU9Zi5CYXNlLGg9Zi5Xb3JkQXJyYXksYT1hLng2ND17fTthLldvcmQ9ZS5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYixjKXt0aGlzLmhpZ2g9Yjt0aGlzLmxvdz1jfX0pO2EuV29yZEFycmF5PWUuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGIsYyl7Yj10aGlzLndvcmRzPWJ8fFtdO3RoaXMuc2lnQnl0ZXM9YyE9Zz9jOjgqYi5sZW5ndGh9LHRvWDMyOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPXRoaXMud29yZHMsYz1iLmxlbmd0aCxhPVtdLGQ9MDtkPGM7ZCsrKXt2YXIgZT1iW2RdO2EucHVzaChlLmhpZ2gpO2EucHVzaChlLmxvdyl9cmV0dXJuIGguY3JlYXRlKGEsdGhpcy5zaWdCeXRlcyl9LGNsb25lOmZ1bmN0aW9uKCl7Zm9yKHZhciBiPWUuY2xvbmUuY2FsbCh0aGlzKSxjPWIud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxhPWMubGVuZ3RoLGQ9MDtkPGE7ZCsrKWNbZF09Y1tkXS5jbG9uZSgpO3JldHVybiBifX0pfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBobWFjLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KKGZ1bmN0aW9uKCl7dmFyIGM9Q3J5cHRvSlMsaz1jLmVuYy5VdGY4O2MuYWxnby5ITUFDPWMubGliLkJhc2UuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGEsYil7YT10aGlzLl9oYXNoZXI9bmV3IGEuaW5pdDsic3RyaW5nIj09dHlwZW9mIGImJihiPWsucGFyc2UoYikpO3ZhciBjPWEuYmxvY2tTaXplLGU9NCpjO2Iuc2lnQnl0ZXM+ZSYmKGI9YS5maW5hbGl6ZShiKSk7Yi5jbGFtcCgpO2Zvcih2YXIgZj10aGlzLl9vS2V5PWIuY2xvbmUoKSxnPXRoaXMuX2lLZXk9Yi5jbG9uZSgpLGg9Zi53b3JkcyxqPWcud29yZHMsZD0wO2Q8YztkKyspaFtkXV49MTU0OTU1NjgyOCxqW2RdXj05MDk1MjI0ODY7Zi5zaWdCeXRlcz1nLnNpZ0J5dGVzPWU7dGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2hhc2hlcjthLnJlc2V0KCk7YS51cGRhdGUodGhpcy5faUtleSl9LHVwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl9oYXNoZXIudXBkYXRlKGEpO3JldHVybiB0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbihhKXt2YXIgYj0KdGhpcy5faGFzaGVyO2E9Yi5maW5hbGl6ZShhKTtiLnJlc2V0KCk7cmV0dXJuIGIuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChhKSl9fSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTI1Ni1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihrKXtmb3IodmFyIGc9Q3J5cHRvSlMsaD1nLmxpYix2PWguV29yZEFycmF5LGo9aC5IYXNoZXIsaD1nLmFsZ28scz1bXSx0PVtdLHU9ZnVuY3Rpb24ocSl7cmV0dXJuIDQyOTQ5NjcyOTYqKHEtKHF8MCkpfDB9LGw9MixiPTA7NjQ+Yjspe3ZhciBkO2E6e2Q9bDtmb3IodmFyIHc9ay5zcXJ0KGQpLHI9MjtyPD13O3IrKylpZighKGQlcikpe2Q9ITE7YnJlYWsgYX1kPSEwfWQmJig4PmImJihzW2JdPXUoay5wb3cobCwwLjUpKSksdFtiXT11KGsucG93KGwsMS8zKSksYisrKTtsKyt9dmFyIG49W10saD1oLlNIQTI1Nj1qLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyB2LmluaXQocy5zbGljZSgwKSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihxLGgpe2Zvcih2YXIgYT10aGlzLl9oYXNoLndvcmRzLGM9YVswXSxkPWFbMV0sYj1hWzJdLGs9YVszXSxmPWFbNF0sZz1hWzVdLGo9YVs2XSxsPWFbN10sZT0wOzY0PmU7ZSsrKXtpZigxNj5lKW5bZV09CnFbaCtlXXwwO2Vsc2V7dmFyIG09bltlLTE1XSxwPW5bZS0yXTtuW2VdPSgobTw8MjV8bT4+PjcpXihtPDwxNHxtPj4+MTgpXm0+Pj4zKStuW2UtN10rKChwPDwxNXxwPj4+MTcpXihwPDwxM3xwPj4+MTkpXnA+Pj4xMCkrbltlLTE2XX1tPWwrKChmPDwyNnxmPj4+NileKGY8PDIxfGY+Pj4xMSleKGY8PDd8Zj4+PjI1KSkrKGYmZ15+ZiZqKSt0W2VdK25bZV07cD0oKGM8PDMwfGM+Pj4yKV4oYzw8MTl8Yz4+PjEzKV4oYzw8MTB8Yz4+PjIyKSkrKGMmZF5jJmJeZCZiKTtsPWo7aj1nO2c9ZjtmPWsrbXwwO2s9YjtiPWQ7ZD1jO2M9bStwfDB9YVswXT1hWzBdK2N8MDthWzFdPWFbMV0rZHwwO2FbMl09YVsyXStifDA7YVszXT1hWzNdK2t8MDthWzRdPWFbNF0rZnwwO2FbNV09YVs1XStnfDA7YVs2XT1hWzZdK2p8MDthWzddPWFbN10rbHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMuX2RhdGEsYj1kLndvcmRzLGE9OCp0aGlzLl9uRGF0YUJ5dGVzLGM9OCpkLnNpZ0J5dGVzOwpiW2M+Pj41XXw9MTI4PDwyNC1jJTMyO2JbKGMrNjQ+Pj45PDw0KSsxNF09ay5mbG9vcihhLzQyOTQ5NjcyOTYpO2JbKGMrNjQ+Pj45PDw0KSsxNV09YTtkLnNpZ0J5dGVzPTQqYi5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciBiPWouY2xvbmUuY2FsbCh0aGlzKTtiLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKTtyZXR1cm4gYn19KTtnLlNIQTI1Nj1qLl9jcmVhdGVIZWxwZXIoaCk7Zy5IbWFjU0hBMjU2PWouX2NyZWF0ZUhtYWNIZWxwZXIoaCl9KShNYXRoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBzaGEyMjQtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgYj1DcnlwdG9KUyxkPWIubGliLldvcmRBcnJheSxhPWIuYWxnbyxjPWEuU0hBMjU2LGE9YS5TSEEyMjQ9Yy5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgZC5pbml0KFszMjM4MzcxMDMyLDkxNDE1MDY2Myw4MTI3MDI5OTksNDE0NDkxMjY5Nyw0MjkwNzc1ODU3LDE3NTA2MDMwMjUsMTY5NDA3NjgzOSwzMjA0MDc1NDI4XSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9Yy5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTQ7cmV0dXJuIGF9fSk7Yi5TSEEyMjQ9Yy5fY3JlYXRlSGVscGVyKGEpO2IuSG1hY1NIQTIyND1jLl9jcmVhdGVIbWFjSGVscGVyKGEpfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBzaGE1MTItbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7cmV0dXJuIGQuY3JlYXRlLmFwcGx5KGQsYXJndW1lbnRzKX1mb3IodmFyIG49Q3J5cHRvSlMscj1uLmxpYi5IYXNoZXIsZT1uLng2NCxkPWUuV29yZCxUPWUuV29yZEFycmF5LGU9bi5hbGdvLGVhPVthKDExMTYzNTI0MDgsMzYwOTc2NzQ1OCksYSgxODk5NDQ3NDQxLDYwMjg5MTcyNSksYSgzMDQ5MzIzNDcxLDM5NjQ0ODQzOTkpLGEoMzkyMTAwOTU3MywyMTczMjk1NTQ4KSxhKDk2MTk4NzE2Myw0MDgxNjI4NDcyKSxhKDE1MDg5NzA5OTMsMzA1MzgzNDI2NSksYSgyNDUzNjM1NzQ4LDI5Mzc2NzE1NzkpLGEoMjg3MDc2MzIyMSwzNjY0NjA5NTYwKSxhKDM2MjQzODEwODAsMjczNDg4MzM5NCksYSgzMTA1OTg0MDEsMTE2NDk5NjU0MiksYSg2MDcyMjUyNzgsMTMyMzYxMDc2NCksYSgxNDI2ODgxOTg3LDM1OTAzMDQ5OTQpLGEoMTkyNTA3ODM4OCw0MDY4MTgyMzgzKSxhKDIxNjIwNzgyMDYsOTkxMzM2MTEzKSxhKDI2MTQ4ODgxMDMsNjMzODAzMzE3KSwKYSgzMjQ4MjIyNTgwLDM0Nzk3NzQ4NjgpLGEoMzgzNTM5MDQwMSwyNjY2NjEzNDU4KSxhKDQwMjIyMjQ3NzQsOTQ0NzExMTM5KSxhKDI2NDM0NzA3OCwyMzQxMjYyNzczKSxhKDYwNDgwNzYyOCwyMDA3ODAwOTMzKSxhKDc3MDI1NTk4MywxNDk1OTkwOTAxKSxhKDEyNDkxNTAxMjIsMTg1NjQzMTIzNSksYSgxNTU1MDgxNjkyLDMxNzUyMTgxMzIpLGEoMTk5NjA2NDk4NiwyMTk4OTUwODM3KSxhKDI1NTQyMjA4ODIsMzk5OTcxOTMzOSksYSgyODIxODM0MzQ5LDc2Njc4NDAxNiksYSgyOTUyOTk2ODA4LDI1NjY1OTQ4NzkpLGEoMzIxMDMxMzY3MSwzMjAzMzM3OTU2KSxhKDMzMzY1NzE4OTEsMTAzNDQ1NzAyNiksYSgzNTg0NTI4NzExLDI0NjY5NDg5MDEpLGEoMTEzOTI2OTkzLDM3NTgzMjYzODMpLGEoMzM4MjQxODk1LDE2ODcxNzkzNiksYSg2NjYzMDcyMDUsMTE4ODE3OTk2NCksYSg3NzM1Mjk5MTIsMTU0NjA0NTczNCksYSgxMjk0NzU3MzcyLDE1MjI4MDU0ODUpLGEoMTM5NjE4MjI5MSwKMjY0MzgzMzgyMyksYSgxNjk1MTgzNzAwLDIzNDM1MjczOTApLGEoMTk4NjY2MTA1MSwxMDE0NDc3NDgwKSxhKDIxNzcwMjYzNTAsMTIwNjc1OTE0MiksYSgyNDU2OTU2MDM3LDM0NDA3NzYyNyksYSgyNzMwNDg1OTIxLDEyOTA4NjM0NjApLGEoMjgyMDMwMjQxMSwzMTU4NDU0MjczKSxhKDMyNTk3MzA4MDAsMzUwNTk1MjY1NyksYSgzMzQ1NzY0NzcxLDEwNjIxNzAwOCksYSgzNTE2MDY1ODE3LDM2MDYwMDgzNDQpLGEoMzYwMDM1MjgwNCwxNDMyNzI1Nzc2KSxhKDQwOTQ1NzE5MDksMTQ2NzAzMTU5NCksYSgyNzU0MjMzNDQsODUxMTY5NzIwKSxhKDQzMDIyNzczNCwzMTAwODIzNzUyKSxhKDUwNjk0ODYxNiwxMzYzMjU4MTk1KSxhKDY1OTA2MDU1NiwzNzUwNjg1NTkzKSxhKDg4Mzk5Nzg3NywzNzg1MDUwMjgwKSxhKDk1ODEzOTU3MSwzMzE4MzA3NDI3KSxhKDEzMjI4MjIyMTgsMzgxMjcyMzQwMyksYSgxNTM3MDAyMDYzLDIwMDMwMzQ5OTUpLGEoMTc0Nzg3Mzc3OSwzNjAyMDM2ODk5KSwKYSgxOTU1NTYyMjIyLDE1NzU5OTAwMTIpLGEoMjAyNDEwNDgxNSwxMTI1NTkyOTI4KSxhKDIyMjc3MzA0NTIsMjcxNjkwNDMwNiksYSgyMzYxODUyNDI0LDQ0Mjc3NjA0NCksYSgyNDI4NDM2NDc0LDU5MzY5ODM0NCksYSgyNzU2NzM0MTg3LDM3MzMxMTAyNDkpLGEoMzIwNDAzMTQ3OSwyOTk5MzUxNTczKSxhKDMzMjkzMjUyOTgsMzgxNTkyMDQyNyksYSgzMzkxNTY5NjE0LDM5MjgzODM5MDApLGEoMzUxNTI2NzI3MSw1NjYyODA3MTEpLGEoMzk0MDE4NzYwNiwzNDU0MDY5NTM0KSxhKDQxMTg2MzAyNzEsNDAwMDIzOTk5MiksYSgxMTY0MTg0NzQsMTkxNDEzODU1NCksYSgxNzQyOTI0MjEsMjczMTA1NTI3MCksYSgyODkzODAzNTYsMzIwMzk5MzAwNiksYSg0NjAzOTMyNjksMzIwNjIwMzE1KSxhKDY4NTQ3MTczMyw1ODc0OTY4MzYpLGEoODUyMTQyOTcxLDEwODY3OTI4NTEpLGEoMTAxNzAzNjI5OCwzNjU1NDMxMDApLGEoMTEyNjAwMDU4MCwyNjE4Mjk3Njc2KSxhKDEyODgwMzM0NzAsCjM0MDk4NTUxNTgpLGEoMTUwMTUwNTk0OCw0MjM0NTA5ODY2KSxhKDE2MDcxNjc5MTUsOTg3MTY3NDY4KSxhKDE4MTY0MDIzMTYsMTI0NjE4OTU5MSldLHY9W10sdz0wOzgwPnc7dysrKXZbd109YSgpO2U9ZS5TSEE1MTI9ci5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgVC5pbml0KFtuZXcgZC5pbml0KDE3NzkwMzM3MDMsNDA4OTIzNTcyMCksbmV3IGQuaW5pdCgzMTQ0MTM0Mjc3LDIyMjc4NzM1OTUpLG5ldyBkLmluaXQoMTAxMzkwNDI0Miw0MjcxMTc1NzIzKSxuZXcgZC5pbml0KDI3NzM0ODA3NjIsMTU5NTc1MDEyOSksbmV3IGQuaW5pdCgxMzU5ODkzMTE5LDI5MTc1NjUxMzcpLG5ldyBkLmluaXQoMjYwMDgyMjkyNCw3MjU1MTExOTkpLG5ldyBkLmluaXQoNTI4NzM0NjM1LDQyMTUzODk1NDcpLG5ldyBkLmluaXQoMTU0MTQ1OTIyNSwzMjcwMzMyMDkpXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbihhLGQpe2Zvcih2YXIgZj10aGlzLl9oYXNoLndvcmRzLApGPWZbMF0sZT1mWzFdLG49ZlsyXSxyPWZbM10sRz1mWzRdLEg9Zls1XSxJPWZbNl0sZj1mWzddLHc9Ri5oaWdoLEo9Ri5sb3csWD1lLmhpZ2gsSz1lLmxvdyxZPW4uaGlnaCxMPW4ubG93LFo9ci5oaWdoLE09ci5sb3csJD1HLmhpZ2gsTj1HLmxvdyxhYT1ILmhpZ2gsTz1ILmxvdyxiYT1JLmhpZ2gsUD1JLmxvdyxjYT1mLmhpZ2gsUT1mLmxvdyxrPXcsZz1KLHo9WCx4PUssQT1ZLHk9TCxVPVosQj1NLGw9JCxoPU4sUj1hYSxDPU8sUz1iYSxEPVAsVj1jYSxFPVEsbT0wOzgwPm07bSsrKXt2YXIgcz12W21dO2lmKDE2Pm0pdmFyIGo9cy5oaWdoPWFbZCsyKm1dfDAsYj1zLmxvdz1hW2QrMiptKzFdfDA7ZWxzZXt2YXIgaj12W20tMTVdLGI9ai5oaWdoLHA9ai5sb3csaj0oYj4+PjF8cDw8MzEpXihiPj4+OHxwPDwyNCleYj4+PjcscD0ocD4+PjF8Yjw8MzEpXihwPj4+OHxiPDwyNCleKHA+Pj43fGI8PDI1KSx1PXZbbS0yXSxiPXUuaGlnaCxjPXUubG93LHU9KGI+Pj4xOXxjPDwxMyleKGI8PAozfGM+Pj4yOSleYj4+PjYsYz0oYz4+PjE5fGI8PDEzKV4oYzw8M3xiPj4+MjkpXihjPj4+NnxiPDwyNiksYj12W20tN10sVz1iLmhpZ2gsdD12W20tMTZdLHE9dC5oaWdoLHQ9dC5sb3csYj1wK2IubG93LGo9aitXKyhiPj4+MDxwPj4+MD8xOjApLGI9YitjLGo9ait1KyhiPj4+MDxjPj4+MD8xOjApLGI9Yit0LGo9aitxKyhiPj4+MDx0Pj4+MD8xOjApO3MuaGlnaD1qO3MubG93PWJ9dmFyIFc9bCZSXn5sJlMsdD1oJkNefmgmRCxzPWsmel5rJkFeeiZBLFQ9ZyZ4XmcmeV54JnkscD0oaz4+PjI4fGc8PDQpXihrPDwzMHxnPj4+MileKGs8PDI1fGc+Pj43KSx1PShnPj4+Mjh8azw8NCleKGc8PDMwfGs+Pj4yKV4oZzw8MjV8az4+PjcpLGM9ZWFbbV0sZmE9Yy5oaWdoLGRhPWMubG93LGM9RSsoKGg+Pj4xNHxsPDwxOCleKGg+Pj4xOHxsPDwxNCleKGg8PDIzfGw+Pj45KSkscT1WKygobD4+PjE0fGg8PDE4KV4obD4+PjE4fGg8PDE0KV4obDw8MjN8aD4+PjkpKSsoYz4+PjA8RT4+PjA/MToKMCksYz1jK3QscT1xK1crKGM+Pj4wPHQ+Pj4wPzE6MCksYz1jK2RhLHE9cStmYSsoYz4+PjA8ZGE+Pj4wPzE6MCksYz1jK2IscT1xK2orKGM+Pj4wPGI+Pj4wPzE6MCksYj11K1Qscz1wK3MrKGI+Pj4wPHU+Pj4wPzE6MCksVj1TLEU9RCxTPVIsRD1DLFI9bCxDPWgsaD1CK2N8MCxsPVUrcSsoaD4+PjA8Qj4+PjA/MTowKXwwLFU9QSxCPXksQT16LHk9eCx6PWsseD1nLGc9YytifDAsaz1xK3MrKGc+Pj4wPGM+Pj4wPzE6MCl8MH1KPUYubG93PUorZztGLmhpZ2g9dytrKyhKPj4+MDxnPj4+MD8xOjApO0s9ZS5sb3c9Syt4O2UuaGlnaD1YK3orKEs+Pj4wPHg+Pj4wPzE6MCk7TD1uLmxvdz1MK3k7bi5oaWdoPVkrQSsoTD4+PjA8eT4+PjA/MTowKTtNPXIubG93PU0rQjtyLmhpZ2g9WitVKyhNPj4+MDxCPj4+MD8xOjApO049Ry5sb3c9TitoO0cuaGlnaD0kK2wrKE4+Pj4wPGg+Pj4wPzE6MCk7Tz1ILmxvdz1PK0M7SC5oaWdoPWFhK1IrKE8+Pj4wPEM+Pj4wPzE6MCk7UD1JLmxvdz1QK0Q7CkkuaGlnaD1iYStTKyhQPj4+MDxEPj4+MD8xOjApO1E9Zi5sb3c9UStFO2YuaGlnaD1jYStWKyhRPj4+MDxFPj4+MD8xOjApfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZD1hLndvcmRzLGY9OCp0aGlzLl9uRGF0YUJ5dGVzLGU9OCphLnNpZ0J5dGVzO2RbZT4+PjVdfD0xMjg8PDI0LWUlMzI7ZFsoZSsxMjg+Pj4xMDw8NSkrMzBdPU1hdGguZmxvb3IoZi80Mjk0OTY3Mjk2KTtkWyhlKzEyOD4+PjEwPDw1KSszMV09ZjthLnNpZ0J5dGVzPTQqZC5sZW5ndGg7dGhpcy5fcHJvY2VzcygpO3JldHVybiB0aGlzLl9oYXNoLnRvWDMyKCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9ci5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfSxibG9ja1NpemU6MzJ9KTtuLlNIQTUxMj1yLl9jcmVhdGVIZWxwZXIoZSk7bi5IbWFjU0hBNTEyPXIuX2NyZWF0ZUhtYWNIZWxwZXIoZSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTM4NC1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbigpe3ZhciBjPUNyeXB0b0pTLGE9Yy54NjQsYj1hLldvcmQsZT1hLldvcmRBcnJheSxhPWMuYWxnbyxkPWEuU0hBNTEyLGE9YS5TSEEzODQ9ZC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgZS5pbml0KFtuZXcgYi5pbml0KDM0MTgwNzAzNjUsMzIzODM3MTAzMiksbmV3IGIuaW5pdCgxNjU0MjcwMjUwLDkxNDE1MDY2MyksbmV3IGIuaW5pdCgyNDM4NTI5MzcwLDgxMjcwMjk5OSksbmV3IGIuaW5pdCgzNTU0NjIzNjAsNDE0NDkxMjY5NyksbmV3IGIuaW5pdCgxNzMxNDA1NDE1LDQyOTA3NzU4NTcpLG5ldyBiLmluaXQoMjM5NDE4MDIzMSwxNzUwNjAzMDI1KSxuZXcgYi5pbml0KDM2NzUwMDg1MjUsMTY5NDA3NjgzOSksbmV3IGIuaW5pdCgxMjAzMDYyODEzLDMyMDQwNzU0MjgpXSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9ZC5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO2Euc2lnQnl0ZXMtPTE2O3JldHVybiBhfX0pO2MuU0hBMzg0PQpkLl9jcmVhdGVIZWxwZXIoYSk7Yy5IbWFjU0hBMzg0PWQuX2NyZWF0ZUhtYWNIZWxwZXIoYSl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIG1kNS1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCihmdW5jdGlvbihFKXtmdW5jdGlvbiBoKGEsZixnLGoscCxoLGspe2E9YSsoZiZnfH5mJmopK3AraztyZXR1cm4oYTw8aHxhPj4+MzItaCkrZn1mdW5jdGlvbiBrKGEsZixnLGoscCxoLGspe2E9YSsoZiZqfGcmfmopK3AraztyZXR1cm4oYTw8aHxhPj4+MzItaCkrZn1mdW5jdGlvbiBsKGEsZixnLGosaCxrLGwpe2E9YSsoZl5nXmopK2grbDtyZXR1cm4oYTw8a3xhPj4+MzItaykrZn1mdW5jdGlvbiBuKGEsZixnLGosaCxrLGwpe2E9YSsoZ14oZnx+aikpK2grbDtyZXR1cm4oYTw8a3xhPj4+MzItaykrZn1mb3IodmFyIHI9Q3J5cHRvSlMscT1yLmxpYixGPXEuV29yZEFycmF5LHM9cS5IYXNoZXIscT1yLmFsZ28sYT1bXSx0PTA7NjQ+dDt0KyspYVt0XT00Mjk0OTY3Mjk2KkUuYWJzKEUuc2luKHQrMSkpfDA7cT1xLk1ENT1zLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBGLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSwKX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKG0sZil7Zm9yKHZhciBnPTA7MTY+ZztnKyspe3ZhciBqPWYrZyxwPW1bal07bVtqXT0ocDw8OHxwPj4+MjQpJjE2NzExOTM1fChwPDwyNHxwPj4+OCkmNDI3ODI1NTM2MH12YXIgZz10aGlzLl9oYXNoLndvcmRzLGo9bVtmKzBdLHA9bVtmKzFdLHE9bVtmKzJdLHI9bVtmKzNdLHM9bVtmKzRdLHQ9bVtmKzVdLHU9bVtmKzZdLHY9bVtmKzddLHc9bVtmKzhdLHg9bVtmKzldLHk9bVtmKzEwXSx6PW1bZisxMV0sQT1tW2YrMTJdLEI9bVtmKzEzXSxDPW1bZisxNF0sRD1tW2YrMTVdLGI9Z1swXSxjPWdbMV0sZD1nWzJdLGU9Z1szXSxiPWgoYixjLGQsZSxqLDcsYVswXSksZT1oKGUsYixjLGQscCwxMixhWzFdKSxkPWgoZCxlLGIsYyxxLDE3LGFbMl0pLGM9aChjLGQsZSxiLHIsMjIsYVszXSksYj1oKGIsYyxkLGUscyw3LGFbNF0pLGU9aChlLGIsYyxkLHQsMTIsYVs1XSksZD1oKGQsZSxiLGMsdSwxNyxhWzZdKSxjPWgoYyxkLGUsYix2LDIyLGFbN10pLApiPWgoYixjLGQsZSx3LDcsYVs4XSksZT1oKGUsYixjLGQseCwxMixhWzldKSxkPWgoZCxlLGIsYyx5LDE3LGFbMTBdKSxjPWgoYyxkLGUsYix6LDIyLGFbMTFdKSxiPWgoYixjLGQsZSxBLDcsYVsxMl0pLGU9aChlLGIsYyxkLEIsMTIsYVsxM10pLGQ9aChkLGUsYixjLEMsMTcsYVsxNF0pLGM9aChjLGQsZSxiLEQsMjIsYVsxNV0pLGI9ayhiLGMsZCxlLHAsNSxhWzE2XSksZT1rKGUsYixjLGQsdSw5LGFbMTddKSxkPWsoZCxlLGIsYyx6LDE0LGFbMThdKSxjPWsoYyxkLGUsYixqLDIwLGFbMTldKSxiPWsoYixjLGQsZSx0LDUsYVsyMF0pLGU9ayhlLGIsYyxkLHksOSxhWzIxXSksZD1rKGQsZSxiLGMsRCwxNCxhWzIyXSksYz1rKGMsZCxlLGIscywyMCxhWzIzXSksYj1rKGIsYyxkLGUseCw1LGFbMjRdKSxlPWsoZSxiLGMsZCxDLDksYVsyNV0pLGQ9ayhkLGUsYixjLHIsMTQsYVsyNl0pLGM9ayhjLGQsZSxiLHcsMjAsYVsyN10pLGI9ayhiLGMsZCxlLEIsNSxhWzI4XSksZT1rKGUsYiwKYyxkLHEsOSxhWzI5XSksZD1rKGQsZSxiLGMsdiwxNCxhWzMwXSksYz1rKGMsZCxlLGIsQSwyMCxhWzMxXSksYj1sKGIsYyxkLGUsdCw0LGFbMzJdKSxlPWwoZSxiLGMsZCx3LDExLGFbMzNdKSxkPWwoZCxlLGIsYyx6LDE2LGFbMzRdKSxjPWwoYyxkLGUsYixDLDIzLGFbMzVdKSxiPWwoYixjLGQsZSxwLDQsYVszNl0pLGU9bChlLGIsYyxkLHMsMTEsYVszN10pLGQ9bChkLGUsYixjLHYsMTYsYVszOF0pLGM9bChjLGQsZSxiLHksMjMsYVszOV0pLGI9bChiLGMsZCxlLEIsNCxhWzQwXSksZT1sKGUsYixjLGQsaiwxMSxhWzQxXSksZD1sKGQsZSxiLGMsciwxNixhWzQyXSksYz1sKGMsZCxlLGIsdSwyMyxhWzQzXSksYj1sKGIsYyxkLGUseCw0LGFbNDRdKSxlPWwoZSxiLGMsZCxBLDExLGFbNDVdKSxkPWwoZCxlLGIsYyxELDE2LGFbNDZdKSxjPWwoYyxkLGUsYixxLDIzLGFbNDddKSxiPW4oYixjLGQsZSxqLDYsYVs0OF0pLGU9bihlLGIsYyxkLHYsMTAsYVs0OV0pLGQ9bihkLGUsYixjLApDLDE1LGFbNTBdKSxjPW4oYyxkLGUsYix0LDIxLGFbNTFdKSxiPW4oYixjLGQsZSxBLDYsYVs1Ml0pLGU9bihlLGIsYyxkLHIsMTAsYVs1M10pLGQ9bihkLGUsYixjLHksMTUsYVs1NF0pLGM9bihjLGQsZSxiLHAsMjEsYVs1NV0pLGI9bihiLGMsZCxlLHcsNixhWzU2XSksZT1uKGUsYixjLGQsRCwxMCxhWzU3XSksZD1uKGQsZSxiLGMsdSwxNSxhWzU4XSksYz1uKGMsZCxlLGIsQiwyMSxhWzU5XSksYj1uKGIsYyxkLGUscyw2LGFbNjBdKSxlPW4oZSxiLGMsZCx6LDEwLGFbNjFdKSxkPW4oZCxlLGIsYyxxLDE1LGFbNjJdKSxjPW4oYyxkLGUsYix4LDIxLGFbNjNdKTtnWzBdPWdbMF0rYnwwO2dbMV09Z1sxXStjfDA7Z1syXT1nWzJdK2R8MDtnWzNdPWdbM10rZXwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2RhdGEsZj1hLndvcmRzLGc9OCp0aGlzLl9uRGF0YUJ5dGVzLGo9OCphLnNpZ0J5dGVzO2Zbaj4+PjVdfD0xMjg8PDI0LWolMzI7dmFyIGg9RS5mbG9vcihnLwo0Mjk0OTY3Mjk2KTtmWyhqKzY0Pj4+OTw8NCkrMTVdPShoPDw4fGg+Pj4yNCkmMTY3MTE5MzV8KGg8PDI0fGg+Pj44KSY0Mjc4MjU1MzYwO2ZbKGorNjQ+Pj45PDw0KSsxNF09KGc8PDh8Zz4+PjI0KSYxNjcxMTkzNXwoZzw8MjR8Zz4+PjgpJjQyNzgyNTUzNjA7YS5zaWdCeXRlcz00KihmLmxlbmd0aCsxKTt0aGlzLl9wcm9jZXNzKCk7YT10aGlzLl9oYXNoO2Y9YS53b3Jkcztmb3IoZz0wOzQ+ZztnKyspaj1mW2ddLGZbZ109KGo8PDh8aj4+PjI0KSYxNjcxMTkzNXwoajw8MjR8aj4+PjgpJjQyNzgyNTUzNjA7cmV0dXJuIGF9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGE9cy5jbG9uZS5jYWxsKHRoaXMpO2EuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpO3JldHVybiBhfX0pO3IuTUQ1PXMuX2NyZWF0ZUhlbHBlcihxKTtyLkhtYWNNRDU9cy5fY3JlYXRlSG1hY0hlbHBlcihxKX0pKE1hdGgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIGVuYy1iYXNlNjQtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgaD1DcnlwdG9KUyxqPWgubGliLldvcmRBcnJheTtoLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbihiKXt2YXIgZT1iLndvcmRzLGY9Yi5zaWdCeXRlcyxjPXRoaXMuX21hcDtiLmNsYW1wKCk7Yj1bXTtmb3IodmFyIGE9MDthPGY7YSs9Mylmb3IodmFyIGQ9KGVbYT4+PjJdPj4+MjQtOCooYSU0KSYyNTUpPDwxNnwoZVthKzE+Pj4yXT4+PjI0LTgqKChhKzEpJTQpJjI1NSk8PDh8ZVthKzI+Pj4yXT4+PjI0LTgqKChhKzIpJTQpJjI1NSxnPTA7ND5nJiZhKzAuNzUqZzxmO2crKyliLnB1c2goYy5jaGFyQXQoZD4+PjYqKDMtZykmNjMpKTtpZihlPWMuY2hhckF0KDY0KSlmb3IoO2IubGVuZ3RoJTQ7KWIucHVzaChlKTtyZXR1cm4gYi5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24oYil7dmFyIGU9Yi5sZW5ndGgsZj10aGlzLl9tYXAsYz1mLmNoYXJBdCg2NCk7YyYmKGM9Yi5pbmRleE9mKGMpLC0xIT1jJiYoZT1jKSk7Zm9yKHZhciBjPVtdLGE9MCxkPTA7ZDwKZTtkKyspaWYoZCU0KXt2YXIgZz1mLmluZGV4T2YoYi5jaGFyQXQoZC0xKSk8PDIqKGQlNCksaD1mLmluZGV4T2YoYi5jaGFyQXQoZCkpPj4+Ni0yKihkJTQpO2NbYT4+PjJdfD0oZ3xoKTw8MjQtOCooYSU0KTthKyt9cmV0dXJuIGouY3JlYXRlKGMsYSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In19KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIGNpcGhlci1jb3JlLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KQ3J5cHRvSlMubGliLkNpcGhlcnx8ZnVuY3Rpb24odSl7dmFyIGc9Q3J5cHRvSlMsZj1nLmxpYixrPWYuQmFzZSxsPWYuV29yZEFycmF5LHE9Zi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtLHI9Zy5lbmMuQmFzZTY0LHY9Zy5hbGdvLkV2cEtERixuPWYuQ2lwaGVyPXEuZXh0ZW5kKHtjZmc6ay5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsYSxiKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGEsYil9LGluaXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChjKTt0aGlzLl94Zm9ybU1vZGU9YTt0aGlzLl9rZXk9Yjt0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7cS5yZXNldC5jYWxsKHRoaXMpO3RoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbihhKXt0aGlzLl9hcHBlbmQoYSk7CnJldHVybiB0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKGEpe2EmJnRoaXMuX2FwcGVuZChhKTtyZXR1cm4gdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihhKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihiLGMsZCl7cmV0dXJuKCJzdHJpbmciPT10eXBlb2YgYz9zOmopLmVuY3J5cHQoYSxiLGMsZCl9LGRlY3J5cHQ6ZnVuY3Rpb24oYixjLGQpe3JldHVybigic3RyaW5nIj09dHlwZW9mIGM/czpqKS5kZWNyeXB0KGEsYixjLGQpfX19fSk7Zi5TdHJlYW1DaXBoZXI9bi5leHRlbmQoe19kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb2Nlc3MoITApfSxibG9ja1NpemU6MX0pO3ZhciBtPWcubW9kZT17fSx0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9pdjtkP3RoaXMuX2l2PXU6ZD10aGlzLl9wcmV2QmxvY2s7Zm9yKHZhciBlPQowO2U8YztlKyspYVtiK2VdXj1kW2VdfSxoPShmLkJsb2NrQ2lwaGVyTW9kZT1rLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZShhLGIpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKGEsYil9LGluaXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLl9jaXBoZXI9YTt0aGlzLl9pdj1ifX0pKS5leHRlbmQoKTtoLkVuY3J5cHRvcj1oLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fY2lwaGVyLGQ9Yy5ibG9ja1NpemU7dC5jYWxsKHRoaXMsYSxiLGQpO2MuZW5jcnlwdEJsb2NrKGEsYik7dGhpcy5fcHJldkJsb2NrPWEuc2xpY2UoYixiK2QpfX0pO2guRGVjcnlwdG9yPWguZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9jaXBoZXIsZD1jLmJsb2NrU2l6ZSxlPWEuc2xpY2UoYixiK2QpO2MuZGVjcnlwdEJsb2NrKGEsCmIpO3QuY2FsbCh0aGlzLGEsYixkKTt0aGlzLl9wcmV2QmxvY2s9ZX19KTttPW0uQ0JDPWg7aD0oZy5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9NCpiLGM9Yy1hLnNpZ0J5dGVzJWMsZD1jPDwyNHxjPDwxNnxjPDw4fGMsZT1bXSxmPTA7ZjxjO2YrPTQpZS5wdXNoKGQpO2M9bC5jcmVhdGUoZSxjKTthLmNvbmNhdChjKX0sdW5wYWQ6ZnVuY3Rpb24oYSl7YS5zaWdCeXRlcy09YS53b3Jkc1thLnNpZ0J5dGVzLTE+Pj4yXSYyNTV9fTtmLkJsb2NrQ2lwaGVyPW4uZXh0ZW5kKHtjZmc6bi5jZmcuZXh0ZW5kKHttb2RlOm0scGFkZGluZzpofSkscmVzZXQ6ZnVuY3Rpb24oKXtuLnJlc2V0LmNhbGwodGhpcyk7dmFyIGE9dGhpcy5jZmcsYj1hLml2LGE9YS5tb2RlO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpdmFyIGM9YS5jcmVhdGVFbmNyeXB0b3I7ZWxzZSBjPWEuY3JlYXRlRGVjcnlwdG9yLHRoaXMuX21pbkJ1ZmZlclNpemU9MTsKdGhpcy5fbW9kZT1jLmNhbGwoYSx0aGlzLGImJmIud29yZHMpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayhhLGIpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2ZnLnBhZGRpbmc7aWYodGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERSl7YS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSk7dmFyIGI9dGhpcy5fcHJvY2VzcyghMCl9ZWxzZSBiPXRoaXMuX3Byb2Nlc3MoITApLGEudW5wYWQoYik7cmV0dXJuIGJ9LGJsb2NrU2l6ZTo0fSk7dmFyIHA9Zi5DaXBoZXJQYXJhbXM9ay5leHRlbmQoe2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5taXhJbihhKX0sdG9TdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuKGF8fHRoaXMuZm9ybWF0dGVyKS5zdHJpbmdpZnkodGhpcyl9fSksbT0oZy5mb3JtYXQ9e30pLk9wZW5TU0w9e3N0cmluZ2lmeTpmdW5jdGlvbihhKXt2YXIgYj1hLmNpcGhlcnRleHQ7YT1hLnNhbHQ7CnJldHVybihhP2wuY3JlYXRlKFsxMzk4ODkzNjg0LDE3MDEwNzY4MzFdKS5jb25jYXQoYSkuY29uY2F0KGIpOmIpLnRvU3RyaW5nKHIpfSxwYXJzZTpmdW5jdGlvbihhKXthPXIucGFyc2UoYSk7dmFyIGI9YS53b3JkcztpZigxMzk4ODkzNjg0PT1iWzBdJiYxNzAxMDc2ODMxPT1iWzFdKXt2YXIgYz1sLmNyZWF0ZShiLnNsaWNlKDIsNCkpO2Iuc3BsaWNlKDAsNCk7YS5zaWdCeXRlcy09MTZ9cmV0dXJuIHAuY3JlYXRlKHtjaXBoZXJ0ZXh0OmEsc2FsdDpjfSl9fSxqPWYuU2VyaWFsaXphYmxlQ2lwaGVyPWsuZXh0ZW5kKHtjZmc6ay5leHRlbmQoe2Zvcm1hdDptfSksZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTt2YXIgZT1hLmNyZWF0ZUVuY3J5cHRvcihjLGQpO2I9ZS5maW5hbGl6ZShiKTtlPWUuY2ZnO3JldHVybiBwLmNyZWF0ZSh7Y2lwaGVydGV4dDpiLGtleTpjLGl2OmUuaXYsYWxnb3JpdGhtOmEsbW9kZTplLm1vZGUscGFkZGluZzplLnBhZGRpbmcsCmJsb2NrU2l6ZTphLmJsb2NrU2l6ZSxmb3JtYXR0ZXI6ZC5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsYyxkKXtkPXRoaXMuY2ZnLmV4dGVuZChkKTtiPXRoaXMuX3BhcnNlKGIsZC5mb3JtYXQpO3JldHVybiBhLmNyZWF0ZURlY3J5cHRvcihjLGQpLmZpbmFsaXplKGIuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbihhLGIpe3JldHVybiJzdHJpbmciPT10eXBlb2YgYT9iLnBhcnNlKGEsdGhpcyk6YX19KSxnPShnLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbihhLGIsYyxkKXtkfHwoZD1sLnJhbmRvbSg4KSk7YT12LmNyZWF0ZSh7a2V5U2l6ZTpiK2N9KS5jb21wdXRlKGEsZCk7Yz1sLmNyZWF0ZShhLndvcmRzLnNsaWNlKGIpLDQqYyk7YS5zaWdCeXRlcz00KmI7cmV0dXJuIHAuY3JlYXRlKHtrZXk6YSxpdjpjLHNhbHQ6ZH0pfX0scz1mLlBhc3N3b3JkQmFzZWRDaXBoZXI9ai5leHRlbmQoe2NmZzpqLmNmZy5leHRlbmQoe2tkZjpnfSksZW5jcnlwdDpmdW5jdGlvbihhLApiLGMsZCl7ZD10aGlzLmNmZy5leHRlbmQoZCk7Yz1kLmtkZi5leGVjdXRlKGMsYS5rZXlTaXplLGEuaXZTaXplKTtkLml2PWMuaXY7YT1qLmVuY3J5cHQuY2FsbCh0aGlzLGEsYixjLmtleSxkKTthLm1peEluKGMpO3JldHVybiBhfSxkZWNyeXB0OmZ1bmN0aW9uKGEsYixjLGQpe2Q9dGhpcy5jZmcuZXh0ZW5kKGQpO2I9dGhpcy5fcGFyc2UoYixkLmZvcm1hdCk7Yz1kLmtkZi5leGVjdXRlKGMsYS5rZXlTaXplLGEuaXZTaXplLGIuc2FsdCk7ZC5pdj1jLml2O3JldHVybiBqLmRlY3J5cHQuY2FsbCh0aGlzLGEsYixjLmtleSxkKX19KX0oKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiBhZXMtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmb3IodmFyIHE9Q3J5cHRvSlMseD1xLmxpYi5CbG9ja0NpcGhlcixyPXEuYWxnbyxqPVtdLHk9W10sej1bXSxBPVtdLEI9W10sQz1bXSxzPVtdLHU9W10sdj1bXSx3PVtdLGc9W10saz0wOzI1Nj5rO2srKylnW2tdPTEyOD5rP2s8PDE6azw8MV4yODM7Zm9yKHZhciBuPTAsbD0wLGs9MDsyNTY+aztrKyspe3ZhciBmPWxebDw8MV5sPDwyXmw8PDNebDw8NCxmPWY+Pj44XmYmMjU1Xjk5O2pbbl09Zjt5W2ZdPW47dmFyIHQ9Z1tuXSxEPWdbdF0sRT1nW0RdLGI9MjU3KmdbZl1eMTY4NDMwMDgqZjt6W25dPWI8PDI0fGI+Pj44O0Fbbl09Yjw8MTZ8Yj4+PjE2O0Jbbl09Yjw8OHxiPj4+MjQ7Q1tuXT1iO2I9MTY4NDMwMDkqRV42NTUzNypEXjI1Nyp0XjE2ODQzMDA4Km47c1tmXT1iPDwyNHxiPj4+ODt1W2ZdPWI8PDE2fGI+Pj4xNjt2W2ZdPWI8PDh8Yj4+PjI0O3dbZl09YjtuPyhuPXReZ1tnW2dbRV50XV1dLGxePWdbZ1tsXV0pOm49bD0xfXZhciBGPVswLDEsMiw0LDgsCjE2LDMyLDY0LDEyOCwyNyw1NF0scj1yLkFFUz14LmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGM9dGhpcy5fa2V5LGU9Yy53b3JkcyxhPWMuc2lnQnl0ZXMvNCxjPTQqKCh0aGlzLl9uUm91bmRzPWErNikrMSksYj10aGlzLl9rZXlTY2hlZHVsZT1bXSxoPTA7aDxjO2grKylpZihoPGEpYltoXT1lW2hdO2Vsc2V7dmFyIGQ9YltoLTFdO2glYT82PGEmJjQ9PWglYSYmKGQ9altkPj4+MjRdPDwyNHxqW2Q+Pj4xNiYyNTVdPDwxNnxqW2Q+Pj44JjI1NV08PDh8altkJjI1NV0pOihkPWQ8PDh8ZD4+PjI0LGQ9altkPj4+MjRdPDwyNHxqW2Q+Pj4xNiYyNTVdPDwxNnxqW2Q+Pj44JjI1NV08PDh8altkJjI1NV0sZF49RltoL2F8MF08PDI0KTtiW2hdPWJbaC1hXV5kfWU9dGhpcy5faW52S2V5U2NoZWR1bGU9W107Zm9yKGE9MDthPGM7YSsrKWg9Yy1hLGQ9YSU0P2JbaF06YltoLTRdLGVbYV09ND5hfHw0Pj1oP2Q6c1tqW2Q+Pj4yNF1dXnVbaltkPj4+MTYmMjU1XV1edltqW2Q+Pj4KOCYyNTVdXV53W2pbZCYyNTVdXX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGMsZSl7dGhpcy5fZG9DcnlwdEJsb2NrKGMsZSx0aGlzLl9rZXlTY2hlZHVsZSx6LEEsQixDLGopfSxkZWNyeXB0QmxvY2s6ZnVuY3Rpb24oYyxlKXt2YXIgYT1jW2UrMV07Y1tlKzFdPWNbZSszXTtjW2UrM109YTt0aGlzLl9kb0NyeXB0QmxvY2soYyxlLHRoaXMuX2ludktleVNjaGVkdWxlLHMsdSx2LHcseSk7YT1jW2UrMV07Y1tlKzFdPWNbZSszXTtjW2UrM109YX0sX2RvQ3J5cHRCbG9jazpmdW5jdGlvbihjLGUsYSxiLGgsZCxqLG0pe2Zvcih2YXIgbj10aGlzLl9uUm91bmRzLGY9Y1tlXV5hWzBdLGc9Y1tlKzFdXmFbMV0saz1jW2UrMl1eYVsyXSxwPWNbZSszXV5hWzNdLGw9NCx0PTE7dDxuO3QrKyl2YXIgcT1iW2Y+Pj4yNF1eaFtnPj4+MTYmMjU1XV5kW2s+Pj44JjI1NV1ealtwJjI1NV1eYVtsKytdLHI9YltnPj4+MjRdXmhbaz4+PjE2JjI1NV1eZFtwPj4+OCYyNTVdXmpbZiYyNTVdXmFbbCsrXSxzPQpiW2s+Pj4yNF1eaFtwPj4+MTYmMjU1XV5kW2Y+Pj44JjI1NV1ealtnJjI1NV1eYVtsKytdLHA9YltwPj4+MjRdXmhbZj4+PjE2JjI1NV1eZFtnPj4+OCYyNTVdXmpbayYyNTVdXmFbbCsrXSxmPXEsZz1yLGs9cztxPShtW2Y+Pj4yNF08PDI0fG1bZz4+PjE2JjI1NV08PDE2fG1baz4+PjgmMjU1XTw8OHxtW3AmMjU1XSleYVtsKytdO3I9KG1bZz4+PjI0XTw8MjR8bVtrPj4+MTYmMjU1XTw8MTZ8bVtwPj4+OCYyNTVdPDw4fG1bZiYyNTVdKV5hW2wrK107cz0obVtrPj4+MjRdPDwyNHxtW3A+Pj4xNiYyNTVdPDwxNnxtW2Y+Pj44JjI1NV08PDh8bVtnJjI1NV0pXmFbbCsrXTtwPShtW3A+Pj4yNF08PDI0fG1bZj4+PjE2JjI1NV08PDE2fG1bZz4+PjgmMjU1XTw8OHxtW2smMjU1XSleYVtsKytdO2NbZV09cTtjW2UrMV09cjtjW2UrMl09cztjW2UrM109cH0sa2V5U2l6ZTo4fSk7cS5BRVM9eC5fY3JlYXRlSGVscGVyKHIpfSkoKTsKCi8qCkNyeXB0b0pTIHYzLjEuMiB0cmlwbGVkZXMtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXtmdW5jdGlvbiBqKGIsYyl7dmFyIGE9KHRoaXMuX2xCbG9jaz4+PmJedGhpcy5fckJsb2NrKSZjO3RoaXMuX3JCbG9ja149YTt0aGlzLl9sQmxvY2tePWE8PGJ9ZnVuY3Rpb24gbChiLGMpe3ZhciBhPSh0aGlzLl9yQmxvY2s+Pj5iXnRoaXMuX2xCbG9jaykmYzt0aGlzLl9sQmxvY2tePWE7dGhpcy5fckJsb2NrXj1hPDxifXZhciBoPUNyeXB0b0pTLGU9aC5saWIsbj1lLldvcmRBcnJheSxlPWUuQmxvY2tDaXBoZXIsZz1oLmFsZ28scT1bNTcsNDksNDEsMzMsMjUsMTcsOSwxLDU4LDUwLDQyLDM0LDI2LDE4LDEwLDIsNTksNTEsNDMsMzUsMjcsMTksMTEsMyw2MCw1Miw0NCwzNiw2Myw1NSw0NywzOSwzMSwyMywxNSw3LDYyLDU0LDQ2LDM4LDMwLDIyLDE0LDYsNjEsNTMsNDUsMzcsMjksMjEsMTMsNSwyOCwyMCwxMiw0XSxwPVsxNCwxNywxMSwyNCwxLDUsMywyOCwxNSw2LDIxLDEwLDIzLDE5LDEyLDQsMjYsOCwxNiw3LDI3LDIwLDEzLDIsNDEsNTIsMzEsMzcsNDcsCjU1LDMwLDQwLDUxLDQ1LDMzLDQ4LDQ0LDQ5LDM5LDU2LDM0LDUzLDQ2LDQyLDUwLDM2LDI5LDMyXSxyPVsxLDIsNCw2LDgsMTAsMTIsMTQsMTUsMTcsMTksMjEsMjMsMjUsMjcsMjhdLHM9W3siMCI6ODQyMTg4OCwyNjg0MzU0NTY6MzI3NjgsNTM2ODcwOTEyOjg0MjEzNzgsODA1MzA2MzY4OjIsMTA3Mzc0MTgyNDo1MTIsMTM0MjE3NzI4MDo4NDIxODkwLDE2MTA2MTI3MzY6ODM4OTEyMiwxODc5MDQ4MTkyOjgzODg2MDgsMjE0NzQ4MzY0ODo1MTQsMjQxNTkxOTEwNDo4Mzg5MTIwLDI2ODQzNTQ1NjA6MzMyODAsMjk1Mjc5MDAxNjo4NDIxMzc2LDMyMjEyMjU0NzI6MzI3NzAsMzQ4OTY2MDkyODo4Mzg4NjEwLDM3NTgwOTYzODQ6MCw0MDI2NTMxODQwOjMzMjgyLDEzNDIxNzcyODowLDQwMjY1MzE4NDo4NDIxODkwLDY3MTA4ODY0MDozMzI4Miw5Mzk1MjQwOTY6MzI3NjgsMTIwNzk1OTU1Mjo4NDIxODg4LDE0NzYzOTUwMDg6NTEyLDE3NDQ4MzA0NjQ6ODQyMTM3OCwyMDEzMjY1OTIwOjIsCjIyODE3MDEzNzY6ODM4OTEyMCwyNTUwMTM2ODMyOjMzMjgwLDI4MTg1NzIyODg6ODQyMTM3NiwzMDg3MDA3NzQ0OjgzODkxMjIsMzM1NTQ0MzIwMDo4Mzg4NjEwLDM2MjM4Nzg2NTY6MzI3NzAsMzg5MjMxNDExMjo1MTQsNDE2MDc0OTU2ODo4Mzg4NjA4LDE6MzI3NjgsMjY4NDM1NDU3OjIsNTM2ODcwOTEzOjg0MjE4ODgsODA1MzA2MzY5OjgzODg2MDgsMTA3Mzc0MTgyNTo4NDIxMzc4LDEzNDIxNzcyODE6MzMyODAsMTYxMDYxMjczNzo1MTIsMTg3OTA0ODE5Mzo4Mzg5MTIyLDIxNDc0ODM2NDk6ODQyMTg5MCwyNDE1OTE5MTA1Ojg0MjEzNzYsMjY4NDM1NDU2MTo4Mzg4NjEwLDI5NTI3OTAwMTc6MzMyODIsMzIyMTIyNTQ3Mzo1MTQsMzQ4OTY2MDkyOTo4Mzg5MTIwLDM3NTgwOTYzODU6MzI3NzAsNDAyNjUzMTg0MTowLDEzNDIxNzcyOTo4NDIxODkwLDQwMjY1MzE4NTo4NDIxMzc2LDY3MTA4ODY0MTo4Mzg4NjA4LDkzOTUyNDA5Nzo1MTIsMTIwNzk1OTU1MzozMjc2OCwxNDc2Mzk1MDA5OjgzODg2MTAsCjE3NDQ4MzA0NjU6MiwyMDEzMjY1OTIxOjMzMjgyLDIyODE3MDEzNzc6MzI3NzAsMjU1MDEzNjgzMzo4Mzg5MTIyLDI4MTg1NzIyODk6NTE0LDMwODcwMDc3NDU6ODQyMTg4OCwzMzU1NDQzMjAxOjgzODkxMjAsMzYyMzg3ODY1NzowLDM4OTIzMTQxMTM6MzMyODAsNDE2MDc0OTU2OTo4NDIxMzc4fSx7IjAiOjEwNzQyODI1MTIsMTY3NzcyMTY6MTYzODQsMzM1NTQ0MzI6NTI0Mjg4LDUwMzMxNjQ4OjEwNzQyNjYxMjgsNjcxMDg4NjQ6MTA3Mzc0MTg0MCw4Mzg4NjA4MDoxMDc0MjgyNDk2LDEwMDY2MzI5NjoxMDczNzU4MjA4LDExNzQ0MDUxMjoxNiwxMzQyMTc3Mjg6NTQwNjcyLDE1MDk5NDk0NDoxMDczNzU4MjI0LDE2Nzc3MjE2MDoxMDczNzQxODI0LDE4NDU0OTM3Njo1NDA2ODgsMjAxMzI2NTkyOjUyNDMwNCwyMTgxMDM4MDg6MCwyMzQ4ODEwMjQ6MTY0MDAsMjUxNjU4MjQwOjEwNzQyNjYxMTIsODM4ODYwODoxMDczNzU4MjA4LDI1MTY1ODI0OjU0MDY4OCw0MTk0MzA0MDoxNiw1ODcyMDI1NjoxMDczNzU4MjI0LAo3NTQ5NzQ3MjoxMDc0MjgyNTEyLDkyMjc0Njg4OjEwNzM3NDE4MjQsMTA5MDUxOTA0OjUyNDI4OCwxMjU4MjkxMjA6MTA3NDI2NjEyOCwxNDI2MDYzMzY6NTI0MzA0LDE1OTM4MzU1MjowLDE3NjE2MDc2ODoxNjM4NCwxOTI5Mzc5ODQ6MTA3NDI2NjExMiwyMDk3MTUyMDA6MTA3Mzc0MTg0MCwyMjY0OTI0MTY6NTQwNjcyLDI0MzI2OTYzMjoxMDc0MjgyNDk2LDI2MDA0Njg0ODoxNjQwMCwyNjg0MzU0NTY6MCwyODUyMTI2NzI6MTA3NDI2NjEyOCwzMDE5ODk4ODg6MTA3Mzc1ODIyNCwzMTg3NjcxMDQ6MTA3NDI4MjQ5NiwzMzU1NDQzMjA6MTA3NDI2NjExMiwzNTIzMjE1MzY6MTYsMzY5MDk4NzUyOjU0MDY4OCwzODU4NzU5Njg6MTYzODQsNDAyNjUzMTg0OjE2NDAwLDQxOTQzMDQwMDo1MjQyODgsNDM2MjA3NjE2OjUyNDMwNCw0NTI5ODQ4MzI6MTA3Mzc0MTg0MCw0Njk3NjIwNDg6NTQwNjcyLDQ4NjUzOTI2NDoxMDczNzU4MjA4LDUwMzMxNjQ4MDoxMDczNzQxODI0LDUyMDA5MzY5NjoxMDc0MjgyNTEyLAoyNzY4MjQwNjQ6NTQwNjg4LDI5MzYwMTI4MDo1MjQyODgsMzEwMzc4NDk2OjEwNzQyNjYxMTIsMzI3MTU1NzEyOjE2Mzg0LDM0MzkzMjkyODoxMDczNzU4MjA4LDM2MDcxMDE0NDoxMDc0MjgyNTEyLDM3NzQ4NzM2MDoxNiwzOTQyNjQ1NzY6MTA3Mzc0MTgyNCw0MTEwNDE3OTI6MTA3NDI4MjQ5Niw0Mjc4MTkwMDg6MTA3Mzc0MTg0MCw0NDQ1OTYyMjQ6MTA3Mzc1ODIyNCw0NjEzNzM0NDA6NTI0MzA0LDQ3ODE1MDY1NjowLDQ5NDkyNzg3MjoxNjQwMCw1MTE3MDUwODg6MTA3NDI2NjEyOCw1Mjg0ODIzMDQ6NTQwNjcyfSx7IjAiOjI2MCwxMDQ4NTc2OjAsMjA5NzE1Mjo2NzEwOTEyMCwzMTQ1NzI4OjY1Nzk2LDQxOTQzMDQ6NjU1NDAsNTI0Mjg4MDo2NzEwODg2OCw2MjkxNDU2OjY3MTc0NjYwLDczNDAwMzI6NjcxNzQ0MDAsODM4ODYwODo2NzEwODg2NCw5NDM3MTg0OjY3MTc0NjU2LDEwNDg1NzYwOjY1NzkyLDExNTM0MzM2OjY3MTc0NDA0LDEyNTgyOTEyOjY3MTA5MTI0LDEzNjMxNDg4OjY1NTM2LAoxNDY4MDA2NDo0LDE1NzI4NjQwOjI1Niw1MjQyODg6NjcxNzQ2NTYsMTU3Mjg2NDo2NzE3NDQwNCwyNjIxNDQwOjAsMzY3MDAxNjo2NzEwOTEyMCw0NzE4NTkyOjY3MTA4ODY4LDU3NjcxNjg6NjU1MzYsNjgxNTc0NDo2NTU0MCw3ODY0MzIwOjI2MCw4OTEyODk2OjQsOTk2MTQ3MjoyNTYsMTEwMTAwNDg6NjcxNzQ0MDAsMTIwNTg2MjQ6NjU3OTYsMTMxMDcyMDA6NjU3OTIsMTQxNTU3NzY6NjcxMDkxMjQsMTUyMDQzNTI6NjcxNzQ2NjAsMTYyNTI5Mjg6NjcxMDg4NjQsMTY3NzcyMTY6NjcxNzQ2NTYsMTc4MjU3OTI6NjU1NDAsMTg4NzQzNjg6NjU1MzYsMTk5MjI5NDQ6NjcxMDkxMjAsMjA5NzE1MjA6MjU2LDIyMDIwMDk2OjY3MTc0NjYwLDIzMDY4NjcyOjY3MTA4ODY4LDI0MTE3MjQ4OjAsMjUxNjU4MjQ6NjcxMDkxMjQsMjYyMTQ0MDA6NjcxMDg4NjQsMjcyNjI5NzY6NCwyODMxMTU1Mjo2NTc5MiwyOTM2MDEyODo2NzE3NDQwMCwzMDQwODcwNDoyNjAsMzE0NTcyODA6NjU3OTYsMzI1MDU4NTY6NjcxNzQ0MDQsCjE3MzAxNTA0OjY3MTA4ODY0LDE4MzUwMDgwOjI2MCwxOTM5ODY1Njo2NzE3NDY1NiwyMDQ0NzIzMjowLDIxNDk1ODA4OjY1NTQwLDIyNTQ0Mzg0OjY3MTA5MTIwLDIzNTkyOTYwOjI1NiwyNDY0MTUzNjo2NzE3NDQwNCwyNTY5MDExMjo2NTUzNiwyNjczODY4ODo2NzE3NDY2MCwyNzc4NzI2NDo2NTc5NiwyODgzNTg0MDo2NzEwODg2OCwyOTg4NDQxNjo2NzEwOTEyNCwzMDkzMjk5Mjo2NzE3NDQwMCwzMTk4MTU2ODo0LDMzMDMwMTQ0OjY1NzkyfSx7IjAiOjIxNTE2ODIwNDgsNjU1MzY6MjE0NzQ4NzgwOCwxMzEwNzI6NDE5ODQ2NCwxOTY2MDg6MjE1MTY3Nzk1MiwyNjIxNDQ6MCwzMjc2ODA6NDE5ODQwMCwzOTMyMTY6MjE0NzQ4MzcxMiw0NTg3NTI6NDE5NDM2OCw1MjQyODg6MjE0NzQ4MzY0OCw1ODk4MjQ6NDE5NDMwNCw2NTUzNjA6NjQsNzIwODk2OjIxNDc0ODc3NDQsNzg2NDMyOjIxNTE2NzgwMTYsODUxOTY4OjQxNjAsOTE3NTA0OjQwOTYsOTgzMDQwOjIxNTE2ODIxMTIsMzI3Njg6MjE0NzQ4NzgwOCwKOTgzMDQ6NjQsMTYzODQwOjIxNTE2NzgwMTYsMjI5Mzc2OjIxNDc0ODc3NDQsMjk0OTEyOjQxOTg0MDAsMzYwNDQ4OjIxNTE2ODIxMTIsNDI1OTg0OjAsNDkxNTIwOjIxNTE2Nzc5NTIsNTU3MDU2OjQwOTYsNjIyNTkyOjIxNTE2ODIwNDgsNjg4MTI4OjQxOTQzMDQsNzUzNjY0OjQxNjAsODE5MjAwOjIxNDc0ODM2NDgsODg0NzM2OjQxOTQzNjgsOTUwMjcyOjQxOTg0NjQsMTAxNTgwODoyMTQ3NDgzNzEyLDEwNDg1NzY6NDE5NDM2OCwxMTE0MTEyOjQxOTg0MDAsMTE3OTY0ODoyMTQ3NDgzNzEyLDEyNDUxODQ6MCwxMzEwNzIwOjQxNjAsMTM3NjI1NjoyMTUxNjc4MDE2LDE0NDE3OTI6MjE1MTY4MjA0OCwxNTA3MzI4OjIxNDc0ODc4MDgsMTU3Mjg2NDoyMTUxNjgyMTEyLDE2Mzg0MDA6MjE0NzQ4MzY0OCwxNzAzOTM2OjIxNTE2Nzc5NTIsMTc2OTQ3Mjo0MTk4NDY0LDE4MzUwMDg6MjE0NzQ4Nzc0NCwxOTAwNTQ0OjQxOTQzMDQsMTk2NjA4MDo2NCwyMDMxNjE2OjQwOTYsMTA4MTM0NDoyMTUxNjc3OTUyLAoxMTQ2ODgwOjIxNTE2ODIxMTIsMTIxMjQxNjowLDEyNzc5NTI6NDE5ODQwMCwxMzQzNDg4OjQxOTQzNjgsMTQwOTAyNDoyMTQ3NDgzNjQ4LDE0NzQ1NjA6MjE0NzQ4NzgwOCwxNTQwMDk2OjY0LDE2MDU2MzI6MjE0NzQ4MzcxMiwxNjcxMTY4OjQwOTYsMTczNjcwNDoyMTQ3NDg3NzQ0LDE4MDIyNDA6MjE1MTY3ODAxNiwxODY3Nzc2OjQxNjAsMTkzMzMxMjoyMTUxNjgyMDQ4LDE5OTg4NDg6NDE5NDMwNCwyMDY0Mzg0OjQxOTg0NjR9LHsiMCI6MTI4LDQwOTY6MTcwMzkzNjAsODE5MjoyNjIxNDQsMTIyODg6NTM2ODcwOTEyLDE2Mzg0OjUzNzEzMzE4NCwyMDQ4MDoxNjc3NzM0NCwyNDU3Njo1NTM2NDgyNTYsMjg2NzI6MjYyMjcyLDMyNzY4OjE2Nzc3MjE2LDM2ODY0OjUzNzEzMzA1Niw0MDk2MDo1MzY4NzEwNDAsNDUwNTY6NTUzOTEwNDAwLDQ5MTUyOjU1MzkxMDI3Miw1MzI0ODowLDU3MzQ0OjE3MDM5NDg4LDYxNDQwOjU1MzY0ODEyOCwyMDQ4OjE3MDM5NDg4LDYxNDQ6NTUzNjQ4MjU2LAoxMDI0MDoxMjgsMTQzMzY6MTcwMzkzNjAsMTg0MzI6MjYyMTQ0LDIyNTI4OjUzNzEzMzE4NCwyNjYyNDo1NTM5MTAyNzIsMzA3MjA6NTM2ODcwOTEyLDM0ODE2OjUzNzEzMzA1NiwzODkxMjowLDQzMDA4OjU1MzkxMDQwMCw0NzEwNDoxNjc3NzM0NCw1MTIwMDo1MzY4NzEwNDAsNTUyOTY6NTUzNjQ4MTI4LDU5MzkyOjE2Nzc3MjE2LDYzNDg4OjI2MjI3Miw2NTUzNjoyNjIxNDQsNjk2MzI6MTI4LDczNzI4OjUzNjg3MDkxMiw3NzgyNDo1NTM2NDgyNTYsODE5MjA6MTY3NzczNDQsODYwMTY6NTUzOTEwMjcyLDkwMTEyOjUzNzEzMzE4NCw5NDIwODoxNjc3NzIxNiw5ODMwNDo1NTM5MTA0MDAsMTAyNDAwOjU1MzY0ODEyOCwxMDY0OTY6MTcwMzkzNjAsMTEwNTkyOjUzNzEzMzA1NiwxMTQ2ODg6MjYyMjcyLDExODc4NDo1MzY4NzEwNDAsMTIyODgwOjAsMTI2OTc2OjE3MDM5NDg4LDY3NTg0OjU1MzY0ODI1Niw3MTY4MDoxNjc3NzIxNiw3NTc3NjoxNzAzOTM2MCw3OTg3Mjo1MzcxMzMxODQsCjgzOTY4OjUzNjg3MDkxMiw4ODA2NDoxNzAzOTQ4OCw5MjE2MDoxMjgsOTYyNTY6NTUzOTEwMjcyLDEwMDM1MjoyNjIyNzIsMTA0NDQ4OjU1MzkxMDQwMCwxMDg1NDQ6MCwxMTI2NDA6NTUzNjQ4MTI4LDExNjczNjoxNjc3NzM0NCwxMjA4MzI6MjYyMTQ0LDEyNDkyODo1MzcxMzMwNTYsMTI5MDI0OjUzNjg3MTA0MH0seyIwIjoyNjg0MzU0NjQsMjU2OjgxOTIsNTEyOjI3MDUzMjYwOCw3Njg6MjcwNTQwODA4LDEwMjQ6MjY4NDQzNjQ4LDEyODA6MjA5NzE1MiwxNTM2OjIwOTcxNjAsMTc5MjoyNjg0MzU0NTYsMjA0ODowLDIzMDQ6MjY4NDQzNjU2LDI1NjA6MjEwNTM0NCwyODE2OjgsMzA3MjoyNzA1MzI2MTYsMzMyODoyMTA1MzUyLDM1ODQ6ODIwMCwzODQwOjI3MDU0MDgwMCwxMjg6MjcwNTMyNjA4LDM4NDoyNzA1NDA4MDgsNjQwOjgsODk2OjIwOTcxNTIsMTE1MjoyMTA1MzUyLDE0MDg6MjY4NDM1NDY0LDE2NjQ6MjY4NDQzNjQ4LDE5MjA6ODIwMCwyMTc2OjIwOTcxNjAsMjQzMjo4MTkyLAoyNjg4OjI2ODQ0MzY1NiwyOTQ0OjI3MDUzMjYxNiwzMjAwOjAsMzQ1NjoyNzA1NDA4MDAsMzcxMjoyMTA1MzQ0LDM5Njg6MjY4NDM1NDU2LDQwOTY6MjY4NDQzNjQ4LDQzNTI6MjcwNTMyNjE2LDQ2MDg6MjcwNTQwODA4LDQ4NjQ6ODIwMCw1MTIwOjIwOTcxNTIsNTM3NjoyNjg0MzU0NTYsNTYzMjoyNjg0MzU0NjQsNTg4ODoyMTA1MzQ0LDYxNDQ6MjEwNTM1Miw2NDAwOjAsNjY1Njo4LDY5MTI6MjcwNTMyNjA4LDcxNjg6ODE5Miw3NDI0OjI2ODQ0MzY1Niw3NjgwOjI3MDU0MDgwMCw3OTM2OjIwOTcxNjAsNDIyNDo4LDQ0ODA6MjEwNTM0NCw0NzM2OjIwOTcxNTIsNDk5MjoyNjg0MzU0NjQsNTI0ODoyNjg0NDM2NDgsNTUwNDo4MjAwLDU3NjA6MjcwNTQwODA4LDYwMTY6MjcwNTMyNjA4LDYyNzI6MjcwNTQwODAwLDY1Mjg6MjcwNTMyNjE2LDY3ODQ6ODE5Miw3MDQwOjIxMDUzNTIsNzI5NjoyMDk3MTYwLDc1NTI6MCw3ODA4OjI2ODQzNTQ1Niw4MDY0OjI2ODQ0MzY1Nn0seyIwIjoxMDQ4NTc2LAoxNjozMzU1NTQ1NywzMjoxMDI0LDQ4OjEwNDk2MDEsNjQ6MzQ2MDQwMzMsODA6MCw5NjoxLDExMjozNDYwMzAwOSwxMjg6MzM1NTU0NTYsMTQ0OjEwNDg1NzcsMTYwOjMzNTU0NDMzLDE3NjozNDYwNDAzMiwxOTI6MzQ2MDMwMDgsMjA4OjEwMjUsMjI0OjEwNDk2MDAsMjQwOjMzNTU0NDMyLDg6MzQ2MDMwMDksMjQ6MCw0MDozMzU1NTQ1Nyw1NjozNDYwNDAzMiw3MjoxMDQ4NTc2LDg4OjMzNTU0NDMzLDEwNDozMzU1NDQzMiwxMjA6MTAyNSwxMzY6MTA0OTYwMSwxNTI6MzM1NTU0NTYsMTY4OjM0NjAzMDA4LDE4NDoxMDQ4NTc3LDIwMDoxMDI0LDIxNjozNDYwNDAzMywyMzI6MSwyNDg6MTA0OTYwMCwyNTY6MzM1NTQ0MzIsMjcyOjEwNDg1NzYsMjg4OjMzNTU1NDU3LDMwNDozNDYwMzAwOSwzMjA6MTA0ODU3NywzMzY6MzM1NTU0NTYsMzUyOjM0NjA0MDMyLDM2ODoxMDQ5NjAxLDM4NDoxMDI1LDQwMDozNDYwNDAzMyw0MTY6MTA0OTYwMCw0MzI6MSw0NDg6MCw0NjQ6MzQ2MDMwMDgsNDgwOjMzNTU0NDMzLAo0OTY6MTAyNCwyNjQ6MTA0OTYwMCwyODA6MzM1NTU0NTcsMjk2OjM0NjAzMDA5LDMxMjoxLDMyODozMzU1NDQzMiwzNDQ6MTA0ODU3NiwzNjA6MTAyNSwzNzY6MzQ2MDQwMzIsMzkyOjMzNTU0NDMzLDQwODozNDYwMzAwOCw0MjQ6MCw0NDA6MzQ2MDQwMzMsNDU2OjEwNDk2MDEsNDcyOjEwMjQsNDg4OjMzNTU1NDU2LDUwNDoxMDQ4NTc3fSx7IjAiOjEzNDIxOTgwOCwxOjEzMTA3MiwyOjEzNDIxNzcyOCwzOjMyLDQ6MTMxMTA0LDU6MTM0MzUwODgwLDY6MTM0MzUwODQ4LDc6MjA0OCw4OjEzNDM0ODgwMCw5OjEzNDIxOTc3NiwxMDoxMzMxMjAsMTE6MTM0MzQ4ODMyLDEyOjIwODAsMTM6MCwxNDoxMzQyMTc3NjAsMTU6MTMzMTUyLDIxNDc0ODM2NDg6MjA0OCwyMTQ3NDgzNjQ5OjEzNDM1MDg4MCwyMTQ3NDgzNjUwOjEzNDIxOTgwOCwyMTQ3NDgzNjUxOjEzNDIxNzcyOCwyMTQ3NDgzNjUyOjEzNDM0ODgwMCwyMTQ3NDgzNjUzOjEzMzEyMCwyMTQ3NDgzNjU0OjEzMzE1MiwyMTQ3NDgzNjU1OjMyLAoyMTQ3NDgzNjU2OjEzNDIxNzc2MCwyMTQ3NDgzNjU3OjIwODAsMjE0NzQ4MzY1ODoxMzExMDQsMjE0NzQ4MzY1OToxMzQzNTA4NDgsMjE0NzQ4MzY2MDowLDIxNDc0ODM2NjE6MTM0MzQ4ODMyLDIxNDc0ODM2NjI6MTM0MjE5Nzc2LDIxNDc0ODM2NjM6MTMxMDcyLDE2OjEzMzE1MiwxNzoxMzQzNTA4NDgsMTg6MzIsMTk6MjA0OCwyMDoxMzQyMTk3NzYsMjE6MTM0MjE3NzYwLDIyOjEzNDM0ODgzMiwyMzoxMzEwNzIsMjQ6MCwyNToxMzExMDQsMjY6MTM0MzQ4ODAwLDI3OjEzNDIxOTgwOCwyODoxMzQzNTA4ODAsMjk6MTMzMTIwLDMwOjIwODAsMzE6MTM0MjE3NzI4LDIxNDc0ODM2NjQ6MTMxMDcyLDIxNDc0ODM2NjU6MjA0OCwyMTQ3NDgzNjY2OjEzNDM0ODgzMiwyMTQ3NDgzNjY3OjEzMzE1MiwyMTQ3NDgzNjY4OjMyLDIxNDc0ODM2Njk6MTM0MzQ4ODAwLDIxNDc0ODM2NzA6MTM0MjE3NzI4LDIxNDc0ODM2NzE6MTM0MjE5ODA4LDIxNDc0ODM2NzI6MTM0MzUwODgwLDIxNDc0ODM2NzM6MTM0MjE3NzYwLAoyMTQ3NDgzNjc0OjEzNDIxOTc3NiwyMTQ3NDgzNjc1OjAsMjE0NzQ4MzY3NjoxMzMxMjAsMjE0NzQ4MzY3NzoyMDgwLDIxNDc0ODM2Nzg6MTMxMTA0LDIxNDc0ODM2Nzk6MTM0MzUwODQ4fV0sdD1bNDE2MDc0OTU2OSw1Mjg0ODIzMDQsMzMwMzAxNDQsMjA2NDM4NCwxMjkwMjQsODA2NCw1MDQsMjE0NzQ4MzY3OV0sbT1nLkRFUz1lLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIGI9dGhpcy5fa2V5LndvcmRzLGM9W10sYT0wOzU2PmE7YSsrKXt2YXIgZj1xW2FdLTE7Y1thXT1iW2Y+Pj41XT4+PjMxLWYlMzImMX1iPXRoaXMuX3N1YktleXM9W107Zm9yKGY9MDsxNj5mO2YrKyl7Zm9yKHZhciBkPWJbZl09W10sZT1yW2ZdLGE9MDsyND5hO2ErKylkW2EvNnwwXXw9Y1socFthXS0xK2UpJTI4XTw8MzEtYSU2LGRbNCsoYS82fDApXXw9Y1syOCsocFthKzI0XS0xK2UpJTI4XTw8MzEtYSU2O2RbMF09ZFswXTw8MXxkWzBdPj4+MzE7Zm9yKGE9MTs3PmE7YSsrKWRbYV0+Pj49CjQqKGEtMSkrMztkWzddPWRbN108PDV8ZFs3XT4+PjI3fWM9dGhpcy5faW52U3ViS2V5cz1bXTtmb3IoYT0wOzE2PmE7YSsrKWNbYV09YlsxNS1hXX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZG9DcnlwdEJsb2NrKGIsYyx0aGlzLl9zdWJLZXlzKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZG9DcnlwdEJsb2NrKGIsYyx0aGlzLl9pbnZTdWJLZXlzKX0sX2RvQ3J5cHRCbG9jazpmdW5jdGlvbihiLGMsYSl7dGhpcy5fbEJsb2NrPWJbY107dGhpcy5fckJsb2NrPWJbYysxXTtqLmNhbGwodGhpcyw0LDI1MjY0NTEzNSk7ai5jYWxsKHRoaXMsMTYsNjU1MzUpO2wuY2FsbCh0aGlzLDIsODU4OTkzNDU5KTtsLmNhbGwodGhpcyw4LDE2NzExOTM1KTtqLmNhbGwodGhpcywxLDE0MzE2NTU3NjUpO2Zvcih2YXIgZj0wOzE2PmY7ZisrKXtmb3IodmFyIGQ9YVtmXSxlPXRoaXMuX2xCbG9jayxoPXRoaXMuX3JCbG9jayxnPTAsaz0wOzg+aztrKyspZ3w9c1trXVsoKGheCmRba10pJnRba10pPj4+MF07dGhpcy5fbEJsb2NrPWg7dGhpcy5fckJsb2NrPWVeZ31hPXRoaXMuX2xCbG9jazt0aGlzLl9sQmxvY2s9dGhpcy5fckJsb2NrO3RoaXMuX3JCbG9jaz1hO2ouY2FsbCh0aGlzLDEsMTQzMTY1NTc2NSk7bC5jYWxsKHRoaXMsOCwxNjcxMTkzNSk7bC5jYWxsKHRoaXMsMiw4NTg5OTM0NTkpO2ouY2FsbCh0aGlzLDE2LDY1NTM1KTtqLmNhbGwodGhpcyw0LDI1MjY0NTEzNSk7YltjXT10aGlzLl9sQmxvY2s7YltjKzFdPXRoaXMuX3JCbG9ja30sa2V5U2l6ZToyLGl2U2l6ZToyLGJsb2NrU2l6ZToyfSk7aC5ERVM9ZS5fY3JlYXRlSGVscGVyKG0pO2c9Zy5UcmlwbGVERVM9ZS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fa2V5LndvcmRzO3RoaXMuX2RlczE9bS5jcmVhdGVFbmNyeXB0b3Iobi5jcmVhdGUoYi5zbGljZSgwLDIpKSk7dGhpcy5fZGVzMj1tLmNyZWF0ZUVuY3J5cHRvcihuLmNyZWF0ZShiLnNsaWNlKDIsNCkpKTt0aGlzLl9kZXMzPQptLmNyZWF0ZUVuY3J5cHRvcihuLmNyZWF0ZShiLnNsaWNlKDQsNikpKX0sZW5jcnlwdEJsb2NrOmZ1bmN0aW9uKGIsYyl7dGhpcy5fZGVzMS5lbmNyeXB0QmxvY2soYixjKTt0aGlzLl9kZXMyLmRlY3J5cHRCbG9jayhiLGMpO3RoaXMuX2RlczMuZW5jcnlwdEJsb2NrKGIsYyl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbihiLGMpe3RoaXMuX2RlczMuZGVjcnlwdEJsb2NrKGIsYyk7dGhpcy5fZGVzMi5lbmNyeXB0QmxvY2soYixjKTt0aGlzLl9kZXMxLmRlY3J5cHRCbG9jayhiLGMpfSxrZXlTaXplOjYsaXZTaXplOjIsYmxvY2tTaXplOjJ9KTtoLlRyaXBsZURFUz1lLl9jcmVhdGVIZWxwZXIoZyl9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHNoYTEtbWluLmpzCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcwooYykgMjAwOS0yMDEzIGJ5IEplZmYgTW90dC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZQoqLwooZnVuY3Rpb24oKXt2YXIgaz1DcnlwdG9KUyxiPWsubGliLG09Yi5Xb3JkQXJyYXksbD1iLkhhc2hlcixkPVtdLGI9ay5hbGdvLlNIQTE9bC5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgbS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24obixwKXtmb3IodmFyIGE9dGhpcy5faGFzaC53b3JkcyxlPWFbMF0sZj1hWzFdLGg9YVsyXSxqPWFbM10sYj1hWzRdLGM9MDs4MD5jO2MrKyl7aWYoMTY+YylkW2NdPW5bcCtjXXwwO2Vsc2V7dmFyIGc9ZFtjLTNdXmRbYy04XV5kW2MtMTRdXmRbYy0xNl07ZFtjXT1nPDwxfGc+Pj4zMX1nPShlPDw1fGU+Pj4yNykrYitkW2NdO2c9MjA+Yz9nKygoZiZofH5mJmopKzE1MTg1MDAyNDkpOjQwPmM/ZysoKGZeaF5qKSsxODU5Nzc1MzkzKTo2MD5jP2crKChmJmh8ZiZqfGgmaiktMTg5NDAwNzU4OCk6ZysoKGZeaF4KaiktODk5NDk3NTE0KTtiPWo7aj1oO2g9Zjw8MzB8Zj4+PjI7Zj1lO2U9Z31hWzBdPWFbMF0rZXwwO2FbMV09YVsxXStmfDA7YVsyXT1hWzJdK2h8MDthWzNdPWFbM10ranwwO2FbNF09YVs0XStifDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZGF0YSxkPWIud29yZHMsYT04KnRoaXMuX25EYXRhQnl0ZXMsZT04KmIuc2lnQnl0ZXM7ZFtlPj4+NV18PTEyODw8MjQtZSUzMjtkWyhlKzY0Pj4+OTw8NCkrMTRdPU1hdGguZmxvb3IoYS80Mjk0OTY3Mjk2KTtkWyhlKzY0Pj4+OTw8NCkrMTVdPWE7Yi5zaWdCeXRlcz00KmQubGVuZ3RoO3RoaXMuX3Byb2Nlc3MoKTtyZXR1cm4gdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgYj1sLmNsb25lLmNhbGwodGhpcyk7Yi5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGJ9fSk7ay5TSEExPWwuX2NyZWF0ZUhlbHBlcihiKTtrLkhtYWNTSEExPWwuX2NyZWF0ZUhtYWNIZWxwZXIoYil9KSgpOwoKLyoKQ3J5cHRvSlMgdjMuMS4yIHJpcGVtZDE2MC1taW4uanMKY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzCihjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlCiovCi8qCgooYykgMjAxMiBieSBDZWRyaWMgTWVzbmlsLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoKUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OgoKICAgIC0gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLgogICAgLSBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uCgpUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTICJBUyBJUyIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoqLwooZnVuY3Rpb24oKXt2YXIgcT1DcnlwdG9KUyxkPXEubGliLG49ZC5Xb3JkQXJyYXkscD1kLkhhc2hlcixkPXEuYWxnbyx4PW4uY3JlYXRlKFswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDcsNCwxMywxLDEwLDYsMTUsMywxMiwwLDksNSwyLDE0LDExLDgsMywxMCwxNCw0LDksMTUsOCwxLDIsNywwLDYsMTMsMTEsNSwxMiwxLDksMTEsMTAsMCw4LDEyLDQsMTMsMyw3LDE1LDE0LDUsNiwyLDQsMCw1LDksNywxMiwyLDEwLDE0LDEsMyw4LDExLDYsMTUsMTNdKSx5PW4uY3JlYXRlKFs1LDE0LDcsMCw5LDIsMTEsNCwxMyw2LDE1LDgsMSwxMCwzLDEyLDYsMTEsMyw3LDAsMTMsNSwxMCwxNCwxNSw4LDEyLDQsOSwxLDIsMTUsNSwxLDMsNywxNCw2LDksMTEsOCwxMiwyLDEwLDAsNCwxMyw4LDYsNCwxLDMsMTEsMTUsMCw1LDEyLDIsMTMsOSw3LDEwLDE0LDEyLDE1LDEwLDQsMSw1LDgsNyw2LDIsMTMsMTQsMCwzLDksMTFdKSx6PW4uY3JlYXRlKFsxMSwxNCwxNSwxMiwKNSw4LDcsOSwxMSwxMywxNCwxNSw2LDcsOSw4LDcsNiw4LDEzLDExLDksNywxNSw3LDEyLDE1LDksMTEsNywxMywxMiwxMSwxMyw2LDcsMTQsOSwxMywxNSwxNCw4LDEzLDYsNSwxMiw3LDUsMTEsMTIsMTQsMTUsMTQsMTUsOSw4LDksMTQsNSw2LDgsNiw1LDEyLDksMTUsNSwxMSw2LDgsMTMsMTIsNSwxMiwxMywxNCwxMSw4LDUsNl0pLEE9bi5jcmVhdGUoWzgsOSw5LDExLDEzLDE1LDE1LDUsNyw3LDgsMTEsMTQsMTQsMTIsNiw5LDEzLDE1LDcsMTIsOCw5LDExLDcsNywxMiw3LDYsMTUsMTMsMTEsOSw3LDE1LDExLDgsNiw2LDE0LDEyLDEzLDUsMTQsMTMsMTMsNyw1LDE1LDUsOCwxMSwxNCwxNCw2LDE0LDYsOSwxMiw5LDEyLDUsMTUsOCw4LDUsMTIsOSwxMiw1LDE0LDYsOCwxMyw2LDUsMTUsMTMsMTEsMTFdKSxCPW4uY3JlYXRlKFswLDE1MTg1MDAyNDksMTg1OTc3NTM5MywyNDAwOTU5NzA4LDI4NDA4NTM4MzhdKSxDPW4uY3JlYXRlKFsxMzUyODI5OTI2LDE1NDg2MDM2ODQsMTgzNjA3MjY5MSwKMjA1Mzk5NDIxNywwXSksZD1kLlJJUEVNRDE2MD1wLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW4uY3JlYXRlKFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzgsMzI4NTM3NzUyMF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZSx2KXtmb3IodmFyIGI9MDsxNj5iO2IrKyl7dmFyIGM9ditiLGY9ZVtjXTtlW2NdPShmPDw4fGY+Pj4yNCkmMTY3MTE5MzV8KGY8PDI0fGY+Pj44KSY0Mjc4MjU1MzYwfXZhciBjPXRoaXMuX2hhc2gud29yZHMsZj1CLndvcmRzLGQ9Qy53b3JkcyxuPXgud29yZHMscT15LndvcmRzLHA9ei53b3Jkcyx3PUEud29yZHMsdCxnLGgsaixyLHUsayxsLG0sczt1PXQ9Y1swXTtrPWc9Y1sxXTtsPWg9Y1syXTttPWo9Y1szXTtzPXI9Y1s0XTtmb3IodmFyIGEsYj0wOzgwPmI7Yis9MSlhPXQrZVt2K25bYl1dfDAsYT0xNj5iP2ErKChnXmheaikrZlswXSk6MzI+Yj9hKygoZyZofH5nJmopK2ZbMV0pOjQ4PmI/CmErKCgoZ3x+aCleaikrZlsyXSk6NjQ+Yj9hKygoZyZqfGgmfmopK2ZbM10pOmErKChnXihofH5qKSkrZls0XSksYXw9MCxhPWE8PHBbYl18YT4+PjMyLXBbYl0sYT1hK3J8MCx0PXIscj1qLGo9aDw8MTB8aD4+PjIyLGg9ZyxnPWEsYT11K2VbditxW2JdXXwwLGE9MTY+Yj9hKygoa14obHx+bSkpK2RbMF0pOjMyPmI/YSsoKGsmbXxsJn5tKStkWzFdKTo0OD5iP2ErKCgoa3x+bClebSkrZFsyXSk6NjQ+Yj9hKygoayZsfH5rJm0pK2RbM10pOmErKChrXmxebSkrZFs0XSksYXw9MCxhPWE8PHdbYl18YT4+PjMyLXdbYl0sYT1hK3N8MCx1PXMscz1tLG09bDw8MTB8bD4+PjIyLGw9ayxrPWE7YT1jWzFdK2grbXwwO2NbMV09Y1syXStqK3N8MDtjWzJdPWNbM10rcit1fDA7Y1szXT1jWzRdK3Qra3wwO2NbNF09Y1swXStnK2x8MDtjWzBdPWF9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSxkPWUud29yZHMsYj04KnRoaXMuX25EYXRhQnl0ZXMsYz04KmUuc2lnQnl0ZXM7CmRbYz4+PjVdfD0xMjg8PDI0LWMlMzI7ZFsoYys2ND4+Pjk8PDQpKzE0XT0oYjw8OHxiPj4+MjQpJjE2NzExOTM1fChiPDwyNHxiPj4+OCkmNDI3ODI1NTM2MDtlLnNpZ0J5dGVzPTQqKGQubGVuZ3RoKzEpO3RoaXMuX3Byb2Nlc3MoKTtlPXRoaXMuX2hhc2g7ZD1lLndvcmRzO2ZvcihiPTA7NT5iO2IrKyljPWRbYl0sZFtiXT0oYzw8OHxjPj4+MjQpJjE2NzExOTM1fChjPDwyNHxjPj4+OCkmNDI3ODI1NTM2MDtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZD1wLmNsb25lLmNhbGwodGhpcyk7ZC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCk7cmV0dXJuIGR9fSk7cS5SSVBFTUQxNjA9cC5fY3JlYXRlSGVscGVyKGQpO3EuSG1hY1JJUEVNRDE2MD1wLl9jcmVhdGVIbWFjSGVscGVyKGQpfSkoTWF0aCk7CgovKgpDcnlwdG9KUyB2My4xLjIgcGJrZGYyLW1pbi5qcwpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KKGZ1bmN0aW9uKCl7dmFyIGI9Q3J5cHRvSlMsYT1iLmxpYixkPWEuQmFzZSxtPWEuV29yZEFycmF5LGE9Yi5hbGdvLHE9YS5ITUFDLGw9YS5QQktERjI9ZC5leHRlbmQoe2NmZzpkLmV4dGVuZCh7a2V5U2l6ZTo0LGhhc2hlcjphLlNIQTEsaXRlcmF0aW9uczoxfSksaW5pdDpmdW5jdGlvbihhKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQoYSl9LGNvbXB1dGU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5jZmcsZj1xLmNyZWF0ZShjLmhhc2hlcixhKSxnPW0uY3JlYXRlKCksZD1tLmNyZWF0ZShbMV0pLGw9Zy53b3JkcyxyPWQud29yZHMsbj1jLmtleVNpemUsYz1jLml0ZXJhdGlvbnM7bC5sZW5ndGg8bjspe3ZhciBoPWYudXBkYXRlKGIpLmZpbmFsaXplKGQpO2YucmVzZXQoKTtmb3IodmFyIGo9aC53b3JkcyxzPWoubGVuZ3RoLGs9aCxwPTE7cDxjO3ArKyl7az1mLmZpbmFsaXplKGspO2YucmVzZXQoKTtmb3IodmFyIHQ9ay53b3JkcyxlPTA7ZTxzO2UrKylqW2VdXj10W2VdfWcuY29uY2F0KGgpOwpyWzBdKyt9Zy5zaWdCeXRlcz00Km47cmV0dXJuIGd9fSk7Yi5QQktERjI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBsLmNyZWF0ZShjKS5jb21wdXRlKGEsYil9fSkoKTsKCi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuLwogKi8KdmFyIGI2NG1hcD0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7dmFyIGI2NHBhZD0iPSI7ZnVuY3Rpb24gaGV4MmI2NChkKXt2YXIgYjt2YXIgZTt2YXIgYT0iIjtmb3IoYj0wO2IrMzw9ZC5sZW5ndGg7Yis9Myl7ZT1wYXJzZUludChkLnN1YnN0cmluZyhiLGIrMyksMTYpO2ErPWI2NG1hcC5jaGFyQXQoZT4+NikrYjY0bWFwLmNoYXJBdChlJjYzKX1pZihiKzE9PWQubGVuZ3RoKXtlPXBhcnNlSW50KGQuc3Vic3RyaW5nKGIsYisxKSwxNik7YSs9YjY0bWFwLmNoYXJBdChlPDwyKX1lbHNle2lmKGIrMj09ZC5sZW5ndGgpe2U9cGFyc2VJbnQoZC5zdWJzdHJpbmcoYixiKzIpLDE2KTthKz1iNjRtYXAuY2hhckF0KGU+PjIpK2I2NG1hcC5jaGFyQXQoKGUmMyk8PDQpfX1pZihiNjRwYWQpe3doaWxlKChhLmxlbmd0aCYzKT4wKXthKz1iNjRwYWR9fXJldHVybiBhfWZ1bmN0aW9uIGI2NHRvaGV4KGYpe3ZhciBkPSIiO3ZhciBlO3ZhciBiPTA7dmFyIGM7dmFyIGE7Zm9yKGU9MDtlPGYubGVuZ3RoOysrZSl7aWYoZi5jaGFyQXQoZSk9PWI2NHBhZCl7YnJlYWt9YT1iNjRtYXAuaW5kZXhPZihmLmNoYXJBdChlKSk7aWYoYTwwKXtjb250aW51ZX1pZihiPT0wKXtkKz1pbnQyY2hhcihhPj4yKTtjPWEmMztiPTF9ZWxzZXtpZihiPT0xKXtkKz1pbnQyY2hhcigoYzw8Mil8KGE+PjQpKTtjPWEmMTU7Yj0yfWVsc2V7aWYoYj09Mil7ZCs9aW50MmNoYXIoYyk7ZCs9aW50MmNoYXIoYT4+Mik7Yz1hJjM7Yj0zfWVsc2V7ZCs9aW50MmNoYXIoKGM8PDIpfChhPj40KSk7ZCs9aW50MmNoYXIoYSYxNSk7Yj0wfX19fWlmKGI9PTEpe2QrPWludDJjaGFyKGM8PDIpfXJldHVybiBkfWZ1bmN0aW9uIGI2NHRvQkEoZSl7dmFyIGQ9YjY0dG9oZXgoZSk7dmFyIGM7dmFyIGI9bmV3IEFycmF5KCk7Zm9yKGM9MDsyKmM8ZC5sZW5ndGg7KytjKXtiW2NdPXBhcnNlSW50KGQuc3Vic3RyaW5nKDIqYywyKmMrMiksMTYpfXJldHVybiBifTsKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwp2YXIgZGJpdHM7dmFyIGNhbmFyeT0yNDQ4Mzc4MTQwOTQ1OTA7dmFyIGpfbG09KChjYW5hcnkmMTY3NzcyMTUpPT0xNTcxNTA3MCk7ZnVuY3Rpb24gQmlnSW50ZWdlcihlLGQsZil7aWYoZSE9bnVsbCl7aWYoIm51bWJlciI9PXR5cGVvZiBlKXt0aGlzLmZyb21OdW1iZXIoZSxkLGYpfWVsc2V7aWYoZD09bnVsbCYmInN0cmluZyIhPXR5cGVvZiBlKXt0aGlzLmZyb21TdHJpbmcoZSwyNTYpfWVsc2V7dGhpcy5mcm9tU3RyaW5nKGUsZCl9fX19ZnVuY3Rpb24gbmJpKCl7cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKG51bGwpfWZ1bmN0aW9uIGFtMShmLGEsYixlLGgsZyl7d2hpbGUoLS1nPj0wKXt2YXIgZD1hKnRoaXNbZisrXStiW2VdK2g7aD1NYXRoLmZsb29yKGQvNjcxMDg4NjQpO2JbZSsrXT1kJjY3MTA4ODYzfXJldHVybiBofWZ1bmN0aW9uIGFtMihmLHEscixlLG8sYSl7dmFyIGs9cSYzMjc2NyxwPXE+PjE1O3doaWxlKC0tYT49MCl7dmFyIGQ9dGhpc1tmXSYzMjc2Nzt2YXIgZz10aGlzW2YrK10+PjE1O3ZhciBiPXAqZCtnKms7ZD1rKmQrKChiJjMyNzY3KTw8MTUpK3JbZV0rKG8mMTA3Mzc0MTgyMyk7bz0oZD4+PjMwKSsoYj4+PjE1KStwKmcrKG8+Pj4zMCk7cltlKytdPWQmMTA3Mzc0MTgyM31yZXR1cm4gb31mdW5jdGlvbiBhbTMoZixxLHIsZSxvLGEpe3ZhciBrPXEmMTYzODMscD1xPj4xNDt3aGlsZSgtLWE+PTApe3ZhciBkPXRoaXNbZl0mMTYzODM7dmFyIGc9dGhpc1tmKytdPj4xNDt2YXIgYj1wKmQrZyprO2Q9aypkKygoYiYxNjM4Myk8PDE0KStyW2VdK287bz0oZD4+MjgpKyhiPj4xNCkrcCpnO3JbZSsrXT1kJjI2ODQzNTQ1NX1yZXR1cm4gb31pZihqX2xtJiYobmF2aWdhdG9yLmFwcE5hbWU9PSJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXIiKSl7QmlnSW50ZWdlci5wcm90b3R5cGUuYW09YW0yO2RiaXRzPTMwfWVsc2V7aWYoal9sbSYmKG5hdmlnYXRvci5hcHBOYW1lIT0iTmV0c2NhcGUiKSl7QmlnSW50ZWdlci5wcm90b3R5cGUuYW09YW0xO2RiaXRzPTI2fWVsc2V7QmlnSW50ZWdlci5wcm90b3R5cGUuYW09YW0zO2RiaXRzPTI4fX1CaWdJbnRlZ2VyLnByb3RvdHlwZS5EQj1kYml0cztCaWdJbnRlZ2VyLnByb3RvdHlwZS5ETT0oKDE8PGRiaXRzKS0xKTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5EVj0oMTw8ZGJpdHMpO3ZhciBCSV9GUD01MjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5GVj1NYXRoLnBvdygyLEJJX0ZQKTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5GMT1CSV9GUC1kYml0cztCaWdJbnRlZ2VyLnByb3RvdHlwZS5GMj0yKmRiaXRzLUJJX0ZQO3ZhciBCSV9STT0iMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Ijt2YXIgQklfUkM9bmV3IEFycmF5KCk7dmFyIHJyLHZ2O3JyPSIwIi5jaGFyQ29kZUF0KDApO2Zvcih2dj0wO3Z2PD05OysrdnYpe0JJX1JDW3JyKytdPXZ2fXJyPSJhIi5jaGFyQ29kZUF0KDApO2Zvcih2dj0xMDt2djwzNjsrK3Z2KXtCSV9SQ1tycisrXT12dn1ycj0iQSIuY2hhckNvZGVBdCgwKTtmb3IodnY9MTA7dnY8MzY7Kyt2dil7QklfUkNbcnIrK109dnZ9ZnVuY3Rpb24gaW50MmNoYXIoYSl7cmV0dXJuIEJJX1JNLmNoYXJBdChhKX1mdW5jdGlvbiBpbnRBdChiLGEpe3ZhciBkPUJJX1JDW2IuY2hhckNvZGVBdChhKV07cmV0dXJuKGQ9PW51bGwpPy0xOmR9ZnVuY3Rpb24gYm5wQ29weVRvKGIpe2Zvcih2YXIgYT10aGlzLnQtMTthPj0wOy0tYSl7YlthXT10aGlzW2FdfWIudD10aGlzLnQ7Yi5zPXRoaXMuc31mdW5jdGlvbiBibnBGcm9tSW50KGEpe3RoaXMudD0xO3RoaXMucz0oYTwwKT8tMTowO2lmKGE+MCl7dGhpc1swXT1hfWVsc2V7aWYoYTwtMSl7dGhpc1swXT1hK3RoaXMuRFZ9ZWxzZXt0aGlzLnQ9MH19fWZ1bmN0aW9uIG5idihhKXt2YXIgYj1uYmkoKTtiLmZyb21JbnQoYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYm5wRnJvbVN0cmluZyhoLGMpe3ZhciBlO2lmKGM9PTE2KXtlPTR9ZWxzZXtpZihjPT04KXtlPTN9ZWxzZXtpZihjPT0yNTYpe2U9OH1lbHNle2lmKGM9PTIpe2U9MX1lbHNle2lmKGM9PTMyKXtlPTV9ZWxzZXtpZihjPT00KXtlPTJ9ZWxzZXt0aGlzLmZyb21SYWRpeChoLGMpO3JldHVybn19fX19fXRoaXMudD0wO3RoaXMucz0wO3ZhciBnPWgubGVuZ3RoLGQ9ZmFsc2UsZj0wO3doaWxlKC0tZz49MCl7dmFyIGE9KGU9PTgpP2hbZ10mMjU1OmludEF0KGgsZyk7aWYoYTwwKXtpZihoLmNoYXJBdChnKT09Ii0iKXtkPXRydWV9Y29udGludWV9ZD1mYWxzZTtpZihmPT0wKXt0aGlzW3RoaXMudCsrXT1hfWVsc2V7aWYoZitlPnRoaXMuREIpe3RoaXNbdGhpcy50LTFdfD0oYSYoKDE8PCh0aGlzLkRCLWYpKS0xKSk8PGY7dGhpc1t0aGlzLnQrK109KGE+Pih0aGlzLkRCLWYpKX1lbHNle3RoaXNbdGhpcy50LTFdfD1hPDxmfX1mKz1lO2lmKGY+PXRoaXMuREIpe2YtPXRoaXMuREJ9fWlmKGU9PTgmJihoWzBdJjEyOCkhPTApe3RoaXMucz0tMTtpZihmPjApe3RoaXNbdGhpcy50LTFdfD0oKDE8PCh0aGlzLkRCLWYpKS0xKTw8Zn19dGhpcy5jbGFtcCgpO2lmKGQpe0JpZ0ludGVnZXIuWkVSTy5zdWJUbyh0aGlzLHRoaXMpfX1mdW5jdGlvbiBibnBDbGFtcCgpe3ZhciBhPXRoaXMucyZ0aGlzLkRNO3doaWxlKHRoaXMudD4wJiZ0aGlzW3RoaXMudC0xXT09YSl7LS10aGlzLnR9fWZ1bmN0aW9uIGJuVG9TdHJpbmcoYyl7aWYodGhpcy5zPDApe3JldHVybiItIit0aGlzLm5lZ2F0ZSgpLnRvU3RyaW5nKGMpfXZhciBlO2lmKGM9PTE2KXtlPTR9ZWxzZXtpZihjPT04KXtlPTN9ZWxzZXtpZihjPT0yKXtlPTF9ZWxzZXtpZihjPT0zMil7ZT01fWVsc2V7aWYoYz09NCl7ZT0yfWVsc2V7cmV0dXJuIHRoaXMudG9SYWRpeChjKX19fX19dmFyIGc9KDE8PGUpLTEsbCxhPWZhbHNlLGg9IiIsZj10aGlzLnQ7dmFyIGo9dGhpcy5EQi0oZip0aGlzLkRCKSVlO2lmKGYtLT4wKXtpZihqPHRoaXMuREImJihsPXRoaXNbZl0+PmopPjApe2E9dHJ1ZTtoPWludDJjaGFyKGwpfXdoaWxlKGY+PTApe2lmKGo8ZSl7bD0odGhpc1tmXSYoKDE8PGopLTEpKTw8KGUtaik7bHw9dGhpc1stLWZdPj4oais9dGhpcy5EQi1lKX1lbHNle2w9KHRoaXNbZl0+PihqLT1lKSkmZztpZihqPD0wKXtqKz10aGlzLkRCOy0tZn19aWYobD4wKXthPXRydWV9aWYoYSl7aCs9aW50MmNoYXIobCl9fX1yZXR1cm4gYT9oOiIwIn1mdW5jdGlvbiBibk5lZ2F0ZSgpe3ZhciBhPW5iaSgpO0JpZ0ludGVnZXIuWkVSTy5zdWJUbyh0aGlzLGEpO3JldHVybiBhfWZ1bmN0aW9uIGJuQWJzKCl7cmV0dXJuKHRoaXMuczwwKT90aGlzLm5lZ2F0ZSgpOnRoaXN9ZnVuY3Rpb24gYm5Db21wYXJlVG8oYil7dmFyIGQ9dGhpcy5zLWIucztpZihkIT0wKXtyZXR1cm4gZH12YXIgYz10aGlzLnQ7ZD1jLWIudDtpZihkIT0wKXtyZXR1cm4odGhpcy5zPDApPy1kOmR9d2hpbGUoLS1jPj0wKXtpZigoZD10aGlzW2NdLWJbY10pIT0wKXtyZXR1cm4gZH19cmV0dXJuIDB9ZnVuY3Rpb24gbmJpdHMoYSl7dmFyIGM9MSxiO2lmKChiPWE+Pj4xNikhPTApe2E9YjtjKz0xNn1pZigoYj1hPj44KSE9MCl7YT1iO2MrPTh9aWYoKGI9YT4+NCkhPTApe2E9YjtjKz00fWlmKChiPWE+PjIpIT0wKXthPWI7Yys9Mn1pZigoYj1hPj4xKSE9MCl7YT1iO2MrPTF9cmV0dXJuIGN9ZnVuY3Rpb24gYm5CaXRMZW5ndGgoKXtpZih0aGlzLnQ8PTApe3JldHVybiAwfXJldHVybiB0aGlzLkRCKih0aGlzLnQtMSkrbmJpdHModGhpc1t0aGlzLnQtMV1eKHRoaXMucyZ0aGlzLkRNKSl9ZnVuY3Rpb24gYm5wRExTaGlmdFRvKGMsYil7dmFyIGE7Zm9yKGE9dGhpcy50LTE7YT49MDstLWEpe2JbYStjXT10aGlzW2FdfWZvcihhPWMtMTthPj0wOy0tYSl7YlthXT0wfWIudD10aGlzLnQrYztiLnM9dGhpcy5zfWZ1bmN0aW9uIGJucERSU2hpZnRUbyhjLGIpe2Zvcih2YXIgYT1jO2E8dGhpcy50OysrYSl7YlthLWNdPXRoaXNbYV19Yi50PU1hdGgubWF4KHRoaXMudC1jLDApO2Iucz10aGlzLnN9ZnVuY3Rpb24gYm5wTFNoaWZ0VG8oaixlKXt2YXIgYj1qJXRoaXMuREI7dmFyIGE9dGhpcy5EQi1iO3ZhciBnPSgxPDxhKS0xO3ZhciBmPU1hdGguZmxvb3Ioai90aGlzLkRCKSxoPSh0aGlzLnM8PGIpJnRoaXMuRE0sZDtmb3IoZD10aGlzLnQtMTtkPj0wOy0tZCl7ZVtkK2YrMV09KHRoaXNbZF0+PmEpfGg7aD0odGhpc1tkXSZnKTw8Yn1mb3IoZD1mLTE7ZD49MDstLWQpe2VbZF09MH1lW2ZdPWg7ZS50PXRoaXMudCtmKzE7ZS5zPXRoaXMucztlLmNsYW1wKCl9ZnVuY3Rpb24gYm5wUlNoaWZ0VG8oZyxkKXtkLnM9dGhpcy5zO3ZhciBlPU1hdGguZmxvb3IoZy90aGlzLkRCKTtpZihlPj10aGlzLnQpe2QudD0wO3JldHVybn12YXIgYj1nJXRoaXMuREI7dmFyIGE9dGhpcy5EQi1iO3ZhciBmPSgxPDxiKS0xO2RbMF09dGhpc1tlXT4+Yjtmb3IodmFyIGM9ZSsxO2M8dGhpcy50OysrYyl7ZFtjLWUtMV18PSh0aGlzW2NdJmYpPDxhO2RbYy1lXT10aGlzW2NdPj5ifWlmKGI+MCl7ZFt0aGlzLnQtZS0xXXw9KHRoaXMucyZmKTw8YX1kLnQ9dGhpcy50LWU7ZC5jbGFtcCgpfWZ1bmN0aW9uIGJucFN1YlRvKGQsZil7dmFyIGU9MCxnPTAsYj1NYXRoLm1pbihkLnQsdGhpcy50KTt3aGlsZShlPGIpe2crPXRoaXNbZV0tZFtlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWlmKGQudDx0aGlzLnQpe2ctPWQuczt3aGlsZShlPHRoaXMudCl7Zys9dGhpc1tlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWcrPXRoaXMuc31lbHNle2crPXRoaXMuczt3aGlsZShlPGQudCl7Zy09ZFtlXTtmW2UrK109ZyZ0aGlzLkRNO2c+Pj10aGlzLkRCfWctPWQuc31mLnM9KGc8MCk/LTE6MDtpZihnPC0xKXtmW2UrK109dGhpcy5EVitnfWVsc2V7aWYoZz4wKXtmW2UrK109Z319Zi50PWU7Zi5jbGFtcCgpfWZ1bmN0aW9uIGJucE11bHRpcGx5VG8oYyxlKXt2YXIgYj10aGlzLmFicygpLGY9Yy5hYnMoKTt2YXIgZD1iLnQ7ZS50PWQrZi50O3doaWxlKC0tZD49MCl7ZVtkXT0wfWZvcihkPTA7ZDxmLnQ7KytkKXtlW2QrYi50XT1iLmFtKDAsZltkXSxlLGQsMCxiLnQpfWUucz0wO2UuY2xhbXAoKTtpZih0aGlzLnMhPWMucyl7QmlnSW50ZWdlci5aRVJPLnN1YlRvKGUsZSl9fWZ1bmN0aW9uIGJucFNxdWFyZVRvKGQpe3ZhciBhPXRoaXMuYWJzKCk7dmFyIGI9ZC50PTIqYS50O3doaWxlKC0tYj49MCl7ZFtiXT0wfWZvcihiPTA7YjxhLnQtMTsrK2Ipe3ZhciBlPWEuYW0oYixhW2JdLGQsMipiLDAsMSk7aWYoKGRbYithLnRdKz1hLmFtKGIrMSwyKmFbYl0sZCwyKmIrMSxlLGEudC1iLTEpKT49YS5EVil7ZFtiK2EudF0tPWEuRFY7ZFtiK2EudCsxXT0xfX1pZihkLnQ+MCl7ZFtkLnQtMV0rPWEuYW0oYixhW2JdLGQsMipiLDAsMSl9ZC5zPTA7ZC5jbGFtcCgpfWZ1bmN0aW9uIGJucERpdlJlbVRvKG4saCxnKXt2YXIgdz1uLmFicygpO2lmKHcudDw9MCl7cmV0dXJufXZhciBrPXRoaXMuYWJzKCk7aWYoay50PHcudCl7aWYoaCE9bnVsbCl7aC5mcm9tSW50KDApfWlmKGchPW51bGwpe3RoaXMuY29weVRvKGcpfXJldHVybn1pZihnPT1udWxsKXtnPW5iaSgpfXZhciBkPW5iaSgpLGE9dGhpcy5zLGw9bi5zO3ZhciB2PXRoaXMuREItbmJpdHMod1t3LnQtMV0pO2lmKHY+MCl7dy5sU2hpZnRUbyh2LGQpO2subFNoaWZ0VG8odixnKX1lbHNle3cuY29weVRvKGQpO2suY29weVRvKGcpfXZhciBwPWQudDt2YXIgYj1kW3AtMV07aWYoYj09MCl7cmV0dXJufXZhciBvPWIqKDE8PHRoaXMuRjEpKygocD4xKT9kW3AtMl0+PnRoaXMuRjI6MCk7dmFyIEE9dGhpcy5GVi9vLHo9KDE8PHRoaXMuRjEpL28seD0xPDx0aGlzLkYyO3ZhciB1PWcudCxzPXUtcCxmPShoPT1udWxsKT9uYmkoKTpoO2QuZGxTaGlmdFRvKHMsZik7aWYoZy5jb21wYXJlVG8oZik+PTApe2dbZy50KytdPTE7Zy5zdWJUbyhmLGcpfUJpZ0ludGVnZXIuT05FLmRsU2hpZnRUbyhwLGYpO2Yuc3ViVG8oZCxkKTt3aGlsZShkLnQ8cCl7ZFtkLnQrK109MH13aGlsZSgtLXM+PTApe3ZhciBjPShnWy0tdV09PWIpP3RoaXMuRE06TWF0aC5mbG9vcihnW3VdKkErKGdbdS0xXSt4KSp6KTtpZigoZ1t1XSs9ZC5hbSgwLGMsZyxzLDAscCkpPGMpe2QuZGxTaGlmdFRvKHMsZik7Zy5zdWJUbyhmLGcpO3doaWxlKGdbdV08LS1jKXtnLnN1YlRvKGYsZyl9fX1pZihoIT1udWxsKXtnLmRyU2hpZnRUbyhwLGgpO2lmKGEhPWwpe0JpZ0ludGVnZXIuWkVSTy5zdWJUbyhoLGgpfX1nLnQ9cDtnLmNsYW1wKCk7aWYodj4wKXtnLnJTaGlmdFRvKHYsZyl9aWYoYTwwKXtCaWdJbnRlZ2VyLlpFUk8uc3ViVG8oZyxnKX19ZnVuY3Rpb24gYm5Nb2QoYil7dmFyIGM9bmJpKCk7dGhpcy5hYnMoKS5kaXZSZW1UbyhiLG51bGwsYyk7aWYodGhpcy5zPDAmJmMuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTyk+MCl7Yi5zdWJUbyhjLGMpfXJldHVybiBjfWZ1bmN0aW9uIENsYXNzaWMoYSl7dGhpcy5tPWF9ZnVuY3Rpb24gY0NvbnZlcnQoYSl7aWYoYS5zPDB8fGEuY29tcGFyZVRvKHRoaXMubSk+PTApe3JldHVybiBhLm1vZCh0aGlzLm0pfWVsc2V7cmV0dXJuIGF9fWZ1bmN0aW9uIGNSZXZlcnQoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gY1JlZHVjZShhKXthLmRpdlJlbVRvKHRoaXMubSxudWxsLGEpfWZ1bmN0aW9uIGNNdWxUbyhhLGMsYil7YS5tdWx0aXBseVRvKGMsYik7dGhpcy5yZWR1Y2UoYil9ZnVuY3Rpb24gY1NxclRvKGEsYil7YS5zcXVhcmVUbyhiKTt0aGlzLnJlZHVjZShiKX1DbGFzc2ljLnByb3RvdHlwZS5jb252ZXJ0PWNDb252ZXJ0O0NsYXNzaWMucHJvdG90eXBlLnJldmVydD1jUmV2ZXJ0O0NsYXNzaWMucHJvdG90eXBlLnJlZHVjZT1jUmVkdWNlO0NsYXNzaWMucHJvdG90eXBlLm11bFRvPWNNdWxUbztDbGFzc2ljLnByb3RvdHlwZS5zcXJUbz1jU3FyVG87ZnVuY3Rpb24gYm5wSW52RGlnaXQoKXtpZih0aGlzLnQ8MSl7cmV0dXJuIDB9dmFyIGE9dGhpc1swXTtpZigoYSYxKT09MCl7cmV0dXJuIDB9dmFyIGI9YSYzO2I9KGIqKDItKGEmMTUpKmIpKSYxNTtiPShiKigyLShhJjI1NSkqYikpJjI1NTtiPShiKigyLSgoKGEmNjU1MzUpKmIpJjY1NTM1KSkpJjY1NTM1O2I9KGIqKDItYSpiJXRoaXMuRFYpKSV0aGlzLkRWO3JldHVybihiPjApP3RoaXMuRFYtYjotYn1mdW5jdGlvbiBNb250Z29tZXJ5KGEpe3RoaXMubT1hO3RoaXMubXA9YS5pbnZEaWdpdCgpO3RoaXMubXBsPXRoaXMubXAmMzI3Njc7dGhpcy5tcGg9dGhpcy5tcD4+MTU7dGhpcy51bT0oMTw8KGEuREItMTUpKS0xO3RoaXMubXQyPTIqYS50fWZ1bmN0aW9uIG1vbnRDb252ZXJ0KGEpe3ZhciBiPW5iaSgpO2EuYWJzKCkuZGxTaGlmdFRvKHRoaXMubS50LGIpO2IuZGl2UmVtVG8odGhpcy5tLG51bGwsYik7aWYoYS5zPDAmJmIuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTyk+MCl7dGhpcy5tLnN1YlRvKGIsYil9cmV0dXJuIGJ9ZnVuY3Rpb24gbW9udFJldmVydChhKXt2YXIgYj1uYmkoKTthLmNvcHlUbyhiKTt0aGlzLnJlZHVjZShiKTtyZXR1cm4gYn1mdW5jdGlvbiBtb250UmVkdWNlKGEpe3doaWxlKGEudDw9dGhpcy5tdDIpe2FbYS50KytdPTB9Zm9yKHZhciBjPTA7Yzx0aGlzLm0udDsrK2Mpe3ZhciBiPWFbY10mMzI3Njc7dmFyIGQ9KGIqdGhpcy5tcGwrKCgoYip0aGlzLm1waCsoYVtjXT4+MTUpKnRoaXMubXBsKSZ0aGlzLnVtKTw8MTUpKSZhLkRNO2I9Yyt0aGlzLm0udDthW2JdKz10aGlzLm0uYW0oMCxkLGEsYywwLHRoaXMubS50KTt3aGlsZShhW2JdPj1hLkRWKXthW2JdLT1hLkRWO2FbKytiXSsrfX1hLmNsYW1wKCk7YS5kclNoaWZ0VG8odGhpcy5tLnQsYSk7aWYoYS5jb21wYXJlVG8odGhpcy5tKT49MCl7YS5zdWJUbyh0aGlzLm0sYSl9fWZ1bmN0aW9uIG1vbnRTcXJUbyhhLGIpe2Euc3F1YXJlVG8oYik7dGhpcy5yZWR1Y2UoYil9ZnVuY3Rpb24gbW9udE11bFRvKGEsYyxiKXthLm11bHRpcGx5VG8oYyxiKTt0aGlzLnJlZHVjZShiKX1Nb250Z29tZXJ5LnByb3RvdHlwZS5jb252ZXJ0PW1vbnRDb252ZXJ0O01vbnRnb21lcnkucHJvdG90eXBlLnJldmVydD1tb250UmV2ZXJ0O01vbnRnb21lcnkucHJvdG90eXBlLnJlZHVjZT1tb250UmVkdWNlO01vbnRnb21lcnkucHJvdG90eXBlLm11bFRvPW1vbnRNdWxUbztNb250Z29tZXJ5LnByb3RvdHlwZS5zcXJUbz1tb250U3FyVG87ZnVuY3Rpb24gYm5wSXNFdmVuKCl7cmV0dXJuKCh0aGlzLnQ+MCk/KHRoaXNbMF0mMSk6dGhpcy5zKT09MH1mdW5jdGlvbiBibnBFeHAoaCxqKXtpZihoPjQyOTQ5NjcyOTV8fGg8MSl7cmV0dXJuIEJpZ0ludGVnZXIuT05FfXZhciBmPW5iaSgpLGE9bmJpKCksZD1qLmNvbnZlcnQodGhpcyksYz1uYml0cyhoKS0xO2QuY29weVRvKGYpO3doaWxlKC0tYz49MCl7ai5zcXJUbyhmLGEpO2lmKChoJigxPDxjKSk+MCl7ai5tdWxUbyhhLGQsZil9ZWxzZXt2YXIgYj1mO2Y9YTthPWJ9fXJldHVybiBqLnJldmVydChmKX1mdW5jdGlvbiBibk1vZFBvd0ludChiLGEpe3ZhciBjO2lmKGI8MjU2fHxhLmlzRXZlbigpKXtjPW5ldyBDbGFzc2ljKGEpfWVsc2V7Yz1uZXcgTW9udGdvbWVyeShhKX1yZXR1cm4gdGhpcy5leHAoYixjKX1CaWdJbnRlZ2VyLnByb3RvdHlwZS5jb3B5VG89Ym5wQ29weVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmZyb21JbnQ9Ym5wRnJvbUludDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5mcm9tU3RyaW5nPWJucEZyb21TdHJpbmc7QmlnSW50ZWdlci5wcm90b3R5cGUuY2xhbXA9Ym5wQ2xhbXA7QmlnSW50ZWdlci5wcm90b3R5cGUuZGxTaGlmdFRvPWJucERMU2hpZnRUbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5kclNoaWZ0VG89Ym5wRFJTaGlmdFRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmxTaGlmdFRvPWJucExTaGlmdFRvO0JpZ0ludGVnZXIucHJvdG90eXBlLnJTaGlmdFRvPWJucFJTaGlmdFRvO0JpZ0ludGVnZXIucHJvdG90eXBlLnN1YlRvPWJucFN1YlRvO0JpZ0ludGVnZXIucHJvdG90eXBlLm11bHRpcGx5VG89Ym5wTXVsdGlwbHlUbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5zcXVhcmVUbz1ibnBTcXVhcmVUbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5kaXZSZW1Ubz1ibnBEaXZSZW1UbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5pbnZEaWdpdD1ibnBJbnZEaWdpdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5pc0V2ZW49Ym5wSXNFdmVuO0JpZ0ludGVnZXIucHJvdG90eXBlLmV4cD1ibnBFeHA7QmlnSW50ZWdlci5wcm90b3R5cGUudG9TdHJpbmc9Ym5Ub1N0cmluZztCaWdJbnRlZ2VyLnByb3RvdHlwZS5uZWdhdGU9Ym5OZWdhdGU7QmlnSW50ZWdlci5wcm90b3R5cGUuYWJzPWJuQWJzO0JpZ0ludGVnZXIucHJvdG90eXBlLmNvbXBhcmVUbz1ibkNvbXBhcmVUbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5iaXRMZW5ndGg9Ym5CaXRMZW5ndGg7QmlnSW50ZWdlci5wcm90b3R5cGUubW9kPWJuTW9kO0JpZ0ludGVnZXIucHJvdG90eXBlLm1vZFBvd0ludD1ibk1vZFBvd0ludDtCaWdJbnRlZ2VyLlpFUk89bmJ2KDApO0JpZ0ludGVnZXIuT05FPW5idigxKTsKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwpmdW5jdGlvbiBibkNsb25lKCl7dmFyIGE9bmJpKCk7dGhpcy5jb3B5VG8oYSk7cmV0dXJuIGF9ZnVuY3Rpb24gYm5JbnRWYWx1ZSgpe2lmKHRoaXMuczwwKXtpZih0aGlzLnQ9PTEpe3JldHVybiB0aGlzWzBdLXRoaXMuRFZ9ZWxzZXtpZih0aGlzLnQ9PTApe3JldHVybiAtMX19fWVsc2V7aWYodGhpcy50PT0xKXtyZXR1cm4gdGhpc1swXX1lbHNle2lmKHRoaXMudD09MCl7cmV0dXJuIDB9fX1yZXR1cm4oKHRoaXNbMV0mKCgxPDwoMzItdGhpcy5EQikpLTEpKTw8dGhpcy5EQil8dGhpc1swXX1mdW5jdGlvbiBibkJ5dGVWYWx1ZSgpe3JldHVybih0aGlzLnQ9PTApP3RoaXMuczoodGhpc1swXTw8MjQpPj4yNH1mdW5jdGlvbiBiblNob3J0VmFsdWUoKXtyZXR1cm4odGhpcy50PT0wKT90aGlzLnM6KHRoaXNbMF08PDE2KT4+MTZ9ZnVuY3Rpb24gYm5wQ2h1bmtTaXplKGEpe3JldHVybiBNYXRoLmZsb29yKE1hdGguTE4yKnRoaXMuREIvTWF0aC5sb2coYSkpfWZ1bmN0aW9uIGJuU2lnTnVtKCl7aWYodGhpcy5zPDApe3JldHVybiAtMX1lbHNle2lmKHRoaXMudDw9MHx8KHRoaXMudD09MSYmdGhpc1swXTw9MCkpe3JldHVybiAwfWVsc2V7cmV0dXJuIDF9fX1mdW5jdGlvbiBibnBUb1JhZGl4KGMpe2lmKGM9PW51bGwpe2M9MTB9aWYodGhpcy5zaWdudW0oKT09MHx8YzwyfHxjPjM2KXtyZXR1cm4iMCJ9dmFyIGY9dGhpcy5jaHVua1NpemUoYyk7dmFyIGU9TWF0aC5wb3coYyxmKTt2YXIgaT1uYnYoZSksaj1uYmkoKSxoPW5iaSgpLGc9IiI7dGhpcy5kaXZSZW1UbyhpLGosaCk7d2hpbGUoai5zaWdudW0oKT4wKXtnPShlK2guaW50VmFsdWUoKSkudG9TdHJpbmcoYykuc3Vic3RyKDEpK2c7ai5kaXZSZW1UbyhpLGosaCl9cmV0dXJuIGguaW50VmFsdWUoKS50b1N0cmluZyhjKStnfWZ1bmN0aW9uIGJucEZyb21SYWRpeChtLGgpe3RoaXMuZnJvbUludCgwKTtpZihoPT1udWxsKXtoPTEwfXZhciBmPXRoaXMuY2h1bmtTaXplKGgpO3ZhciBnPU1hdGgucG93KGgsZiksZT1mYWxzZSxhPTAsbD0wO2Zvcih2YXIgYz0wO2M8bS5sZW5ndGg7KytjKXt2YXIgaz1pbnRBdChtLGMpO2lmKGs8MCl7aWYobS5jaGFyQXQoYyk9PSItIiYmdGhpcy5zaWdudW0oKT09MCl7ZT10cnVlfWNvbnRpbnVlfWw9aCpsK2s7aWYoKythPj1mKXt0aGlzLmRNdWx0aXBseShnKTt0aGlzLmRBZGRPZmZzZXQobCwwKTthPTA7bD0wfX1pZihhPjApe3RoaXMuZE11bHRpcGx5KE1hdGgucG93KGgsYSkpO3RoaXMuZEFkZE9mZnNldChsLDApfWlmKGUpe0JpZ0ludGVnZXIuWkVSTy5zdWJUbyh0aGlzLHRoaXMpfX1mdW5jdGlvbiBibnBGcm9tTnVtYmVyKGYsZSxoKXtpZigibnVtYmVyIj09dHlwZW9mIGUpe2lmKGY8Mil7dGhpcy5mcm9tSW50KDEpfWVsc2V7dGhpcy5mcm9tTnVtYmVyKGYsaCk7aWYoIXRoaXMudGVzdEJpdChmLTEpKXt0aGlzLmJpdHdpc2VUbyhCaWdJbnRlZ2VyLk9ORS5zaGlmdExlZnQoZi0xKSxvcF9vcix0aGlzKX1pZih0aGlzLmlzRXZlbigpKXt0aGlzLmRBZGRPZmZzZXQoMSwwKX13aGlsZSghdGhpcy5pc1Byb2JhYmxlUHJpbWUoZSkpe3RoaXMuZEFkZE9mZnNldCgyLDApO2lmKHRoaXMuYml0TGVuZ3RoKCk+Zil7dGhpcy5zdWJUbyhCaWdJbnRlZ2VyLk9ORS5zaGlmdExlZnQoZi0xKSx0aGlzKX19fX1lbHNle3ZhciBkPW5ldyBBcnJheSgpLGc9ZiY3O2QubGVuZ3RoPShmPj4zKSsxO2UubmV4dEJ5dGVzKGQpO2lmKGc+MCl7ZFswXSY9KCgxPDxnKS0xKX1lbHNle2RbMF09MH10aGlzLmZyb21TdHJpbmcoZCwyNTYpfX1mdW5jdGlvbiBiblRvQnl0ZUFycmF5KCl7dmFyIGI9dGhpcy50LGM9bmV3IEFycmF5KCk7Y1swXT10aGlzLnM7dmFyIGU9dGhpcy5EQi0oYip0aGlzLkRCKSU4LGYsYT0wO2lmKGItLT4wKXtpZihlPHRoaXMuREImJihmPXRoaXNbYl0+PmUpIT0odGhpcy5zJnRoaXMuRE0pPj5lKXtjW2ErK109ZnwodGhpcy5zPDwodGhpcy5EQi1lKSl9d2hpbGUoYj49MCl7aWYoZTw4KXtmPSh0aGlzW2JdJigoMTw8ZSktMSkpPDwoOC1lKTtmfD10aGlzWy0tYl0+PihlKz10aGlzLkRCLTgpfWVsc2V7Zj0odGhpc1tiXT4+KGUtPTgpKSYyNTU7aWYoZTw9MCl7ZSs9dGhpcy5EQjstLWJ9fWlmKChmJjEyOCkhPTApe2Z8PS0yNTZ9aWYoYT09MCYmKHRoaXMucyYxMjgpIT0oZiYxMjgpKXsrK2F9aWYoYT4wfHxmIT10aGlzLnMpe2NbYSsrXT1mfX19cmV0dXJuIGN9ZnVuY3Rpb24gYm5FcXVhbHMoYil7cmV0dXJuKHRoaXMuY29tcGFyZVRvKGIpPT0wKX1mdW5jdGlvbiBibk1pbihiKXtyZXR1cm4odGhpcy5jb21wYXJlVG8oYik8MCk/dGhpczpifWZ1bmN0aW9uIGJuTWF4KGIpe3JldHVybih0aGlzLmNvbXBhcmVUbyhiKT4wKT90aGlzOmJ9ZnVuY3Rpb24gYm5wQml0d2lzZVRvKGMsaCxlKXt2YXIgZCxnLGI9TWF0aC5taW4oYy50LHRoaXMudCk7Zm9yKGQ9MDtkPGI7KytkKXtlW2RdPWgodGhpc1tkXSxjW2RdKX1pZihjLnQ8dGhpcy50KXtnPWMucyZ0aGlzLkRNO2ZvcihkPWI7ZDx0aGlzLnQ7KytkKXtlW2RdPWgodGhpc1tkXSxnKX1lLnQ9dGhpcy50fWVsc2V7Zz10aGlzLnMmdGhpcy5ETTtmb3IoZD1iO2Q8Yy50OysrZCl7ZVtkXT1oKGcsY1tkXSl9ZS50PWMudH1lLnM9aCh0aGlzLnMsYy5zKTtlLmNsYW1wKCl9ZnVuY3Rpb24gb3BfYW5kKGEsYil7cmV0dXJuIGEmYn1mdW5jdGlvbiBibkFuZChiKXt2YXIgYz1uYmkoKTt0aGlzLmJpdHdpc2VUbyhiLG9wX2FuZCxjKTtyZXR1cm4gY31mdW5jdGlvbiBvcF9vcihhLGIpe3JldHVybiBhfGJ9ZnVuY3Rpb24gYm5PcihiKXt2YXIgYz1uYmkoKTt0aGlzLmJpdHdpc2VUbyhiLG9wX29yLGMpO3JldHVybiBjfWZ1bmN0aW9uIG9wX3hvcihhLGIpe3JldHVybiBhXmJ9ZnVuY3Rpb24gYm5Yb3IoYil7dmFyIGM9bmJpKCk7dGhpcy5iaXR3aXNlVG8oYixvcF94b3IsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gb3BfYW5kbm90KGEsYil7cmV0dXJuIGEmfmJ9ZnVuY3Rpb24gYm5BbmROb3QoYil7dmFyIGM9bmJpKCk7dGhpcy5iaXR3aXNlVG8oYixvcF9hbmRub3QsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gYm5Ob3QoKXt2YXIgYj1uYmkoKTtmb3IodmFyIGE9MDthPHRoaXMudDsrK2Epe2JbYV09dGhpcy5ETSZ+dGhpc1thXX1iLnQ9dGhpcy50O2Iucz1+dGhpcy5zO3JldHVybiBifWZ1bmN0aW9uIGJuU2hpZnRMZWZ0KGIpe3ZhciBhPW5iaSgpO2lmKGI8MCl7dGhpcy5yU2hpZnRUbygtYixhKX1lbHNle3RoaXMubFNoaWZ0VG8oYixhKX1yZXR1cm4gYX1mdW5jdGlvbiBiblNoaWZ0UmlnaHQoYil7dmFyIGE9bmJpKCk7aWYoYjwwKXt0aGlzLmxTaGlmdFRvKC1iLGEpfWVsc2V7dGhpcy5yU2hpZnRUbyhiLGEpfXJldHVybiBhfWZ1bmN0aW9uIGxiaXQoYSl7aWYoYT09MCl7cmV0dXJuIC0xfXZhciBiPTA7aWYoKGEmNjU1MzUpPT0wKXthPj49MTY7Yis9MTZ9aWYoKGEmMjU1KT09MCl7YT4+PTg7Yis9OH1pZigoYSYxNSk9PTApe2E+Pj00O2IrPTR9aWYoKGEmMyk9PTApe2E+Pj0yO2IrPTJ9aWYoKGEmMSk9PTApeysrYn1yZXR1cm4gYn1mdW5jdGlvbiBibkdldExvd2VzdFNldEJpdCgpe2Zvcih2YXIgYT0wO2E8dGhpcy50OysrYSl7aWYodGhpc1thXSE9MCl7cmV0dXJuIGEqdGhpcy5EQitsYml0KHRoaXNbYV0pfX1pZih0aGlzLnM8MCl7cmV0dXJuIHRoaXMudCp0aGlzLkRCfXJldHVybiAtMX1mdW5jdGlvbiBjYml0KGEpe3ZhciBiPTA7d2hpbGUoYSE9MCl7YSY9YS0xOysrYn1yZXR1cm4gYn1mdW5jdGlvbiBibkJpdENvdW50KCl7dmFyIGM9MCxhPXRoaXMucyZ0aGlzLkRNO2Zvcih2YXIgYj0wO2I8dGhpcy50OysrYil7Yys9Y2JpdCh0aGlzW2JdXmEpfXJldHVybiBjfWZ1bmN0aW9uIGJuVGVzdEJpdChiKXt2YXIgYT1NYXRoLmZsb29yKGIvdGhpcy5EQik7aWYoYT49dGhpcy50KXtyZXR1cm4odGhpcy5zIT0wKX1yZXR1cm4oKHRoaXNbYV0mKDE8PChiJXRoaXMuREIpKSkhPTApfWZ1bmN0aW9uIGJucENoYW5nZUJpdChjLGIpe3ZhciBhPUJpZ0ludGVnZXIuT05FLnNoaWZ0TGVmdChjKTt0aGlzLmJpdHdpc2VUbyhhLGIsYSk7cmV0dXJuIGF9ZnVuY3Rpb24gYm5TZXRCaXQoYSl7cmV0dXJuIHRoaXMuY2hhbmdlQml0KGEsb3Bfb3IpfWZ1bmN0aW9uIGJuQ2xlYXJCaXQoYSl7cmV0dXJuIHRoaXMuY2hhbmdlQml0KGEsb3BfYW5kbm90KX1mdW5jdGlvbiBibkZsaXBCaXQoYSl7cmV0dXJuIHRoaXMuY2hhbmdlQml0KGEsb3BfeG9yKX1mdW5jdGlvbiBibnBBZGRUbyhkLGYpe3ZhciBlPTAsZz0wLGI9TWF0aC5taW4oZC50LHRoaXMudCk7d2hpbGUoZTxiKXtnKz10aGlzW2VdK2RbZV07ZltlKytdPWcmdGhpcy5ETTtnPj49dGhpcy5EQn1pZihkLnQ8dGhpcy50KXtnKz1kLnM7d2hpbGUoZTx0aGlzLnQpe2crPXRoaXNbZV07ZltlKytdPWcmdGhpcy5ETTtnPj49dGhpcy5EQn1nKz10aGlzLnN9ZWxzZXtnKz10aGlzLnM7d2hpbGUoZTxkLnQpe2crPWRbZV07ZltlKytdPWcmdGhpcy5ETTtnPj49dGhpcy5EQn1nKz1kLnN9Zi5zPShnPDApPy0xOjA7aWYoZz4wKXtmW2UrK109Z31lbHNle2lmKGc8LTEpe2ZbZSsrXT10aGlzLkRWK2d9fWYudD1lO2YuY2xhbXAoKX1mdW5jdGlvbiBibkFkZChiKXt2YXIgYz1uYmkoKTt0aGlzLmFkZFRvKGIsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gYm5TdWJ0cmFjdChiKXt2YXIgYz1uYmkoKTt0aGlzLnN1YlRvKGIsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gYm5NdWx0aXBseShiKXt2YXIgYz1uYmkoKTt0aGlzLm11bHRpcGx5VG8oYixjKTtyZXR1cm4gY31mdW5jdGlvbiBiblNxdWFyZSgpe3ZhciBhPW5iaSgpO3RoaXMuc3F1YXJlVG8oYSk7cmV0dXJuIGF9ZnVuY3Rpb24gYm5EaXZpZGUoYil7dmFyIGM9bmJpKCk7dGhpcy5kaXZSZW1UbyhiLGMsbnVsbCk7cmV0dXJuIGN9ZnVuY3Rpb24gYm5SZW1haW5kZXIoYil7dmFyIGM9bmJpKCk7dGhpcy5kaXZSZW1UbyhiLG51bGwsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gYm5EaXZpZGVBbmRSZW1haW5kZXIoYil7dmFyIGQ9bmJpKCksYz1uYmkoKTt0aGlzLmRpdlJlbVRvKGIsZCxjKTtyZXR1cm4gbmV3IEFycmF5KGQsYyl9ZnVuY3Rpb24gYm5wRE11bHRpcGx5KGEpe3RoaXNbdGhpcy50XT10aGlzLmFtKDAsYS0xLHRoaXMsMCwwLHRoaXMudCk7Kyt0aGlzLnQ7dGhpcy5jbGFtcCgpfWZ1bmN0aW9uIGJucERBZGRPZmZzZXQoYixhKXtpZihiPT0wKXtyZXR1cm59d2hpbGUodGhpcy50PD1hKXt0aGlzW3RoaXMudCsrXT0wfXRoaXNbYV0rPWI7d2hpbGUodGhpc1thXT49dGhpcy5EVil7dGhpc1thXS09dGhpcy5EVjtpZigrK2E+PXRoaXMudCl7dGhpc1t0aGlzLnQrK109MH0rK3RoaXNbYV19fWZ1bmN0aW9uIE51bGxFeHAoKXt9ZnVuY3Rpb24gbk5vcChhKXtyZXR1cm4gYX1mdW5jdGlvbiBuTXVsVG8oYSxjLGIpe2EubXVsdGlwbHlUbyhjLGIpfWZ1bmN0aW9uIG5TcXJUbyhhLGIpe2Euc3F1YXJlVG8oYil9TnVsbEV4cC5wcm90b3R5cGUuY29udmVydD1uTm9wO051bGxFeHAucHJvdG90eXBlLnJldmVydD1uTm9wO051bGxFeHAucHJvdG90eXBlLm11bFRvPW5NdWxUbztOdWxsRXhwLnByb3RvdHlwZS5zcXJUbz1uU3FyVG87ZnVuY3Rpb24gYm5Qb3coYSl7cmV0dXJuIHRoaXMuZXhwKGEsbmV3IE51bGxFeHAoKSl9ZnVuY3Rpb24gYm5wTXVsdGlwbHlMb3dlclRvKGIsZixlKXt2YXIgZD1NYXRoLm1pbih0aGlzLnQrYi50LGYpO2Uucz0wO2UudD1kO3doaWxlKGQ+MCl7ZVstLWRdPTB9dmFyIGM7Zm9yKGM9ZS50LXRoaXMudDtkPGM7KytkKXtlW2QrdGhpcy50XT10aGlzLmFtKDAsYltkXSxlLGQsMCx0aGlzLnQpfWZvcihjPU1hdGgubWluKGIudCxmKTtkPGM7KytkKXt0aGlzLmFtKDAsYltkXSxlLGQsMCxmLWQpfWUuY2xhbXAoKX1mdW5jdGlvbiBibnBNdWx0aXBseVVwcGVyVG8oYixlLGQpey0tZTt2YXIgYz1kLnQ9dGhpcy50K2IudC1lO2Qucz0wO3doaWxlKC0tYz49MCl7ZFtjXT0wfWZvcihjPU1hdGgubWF4KGUtdGhpcy50LDApO2M8Yi50OysrYyl7ZFt0aGlzLnQrYy1lXT10aGlzLmFtKGUtYyxiW2NdLGQsMCwwLHRoaXMudCtjLWUpfWQuY2xhbXAoKTtkLmRyU2hpZnRUbygxLGQpfWZ1bmN0aW9uIEJhcnJldHQoYSl7dGhpcy5yMj1uYmkoKTt0aGlzLnEzPW5iaSgpO0JpZ0ludGVnZXIuT05FLmRsU2hpZnRUbygyKmEudCx0aGlzLnIyKTt0aGlzLm11PXRoaXMucjIuZGl2aWRlKGEpO3RoaXMubT1hfWZ1bmN0aW9uIGJhcnJldHRDb252ZXJ0KGEpe2lmKGEuczwwfHxhLnQ+Mip0aGlzLm0udCl7cmV0dXJuIGEubW9kKHRoaXMubSl9ZWxzZXtpZihhLmNvbXBhcmVUbyh0aGlzLm0pPDApe3JldHVybiBhfWVsc2V7dmFyIGI9bmJpKCk7YS5jb3B5VG8oYik7dGhpcy5yZWR1Y2UoYik7cmV0dXJuIGJ9fX1mdW5jdGlvbiBiYXJyZXR0UmV2ZXJ0KGEpe3JldHVybiBhfWZ1bmN0aW9uIGJhcnJldHRSZWR1Y2UoYSl7YS5kclNoaWZ0VG8odGhpcy5tLnQtMSx0aGlzLnIyKTtpZihhLnQ+dGhpcy5tLnQrMSl7YS50PXRoaXMubS50KzE7YS5jbGFtcCgpfXRoaXMubXUubXVsdGlwbHlVcHBlclRvKHRoaXMucjIsdGhpcy5tLnQrMSx0aGlzLnEzKTt0aGlzLm0ubXVsdGlwbHlMb3dlclRvKHRoaXMucTMsdGhpcy5tLnQrMSx0aGlzLnIyKTt3aGlsZShhLmNvbXBhcmVUbyh0aGlzLnIyKTwwKXthLmRBZGRPZmZzZXQoMSx0aGlzLm0udCsxKX1hLnN1YlRvKHRoaXMucjIsYSk7d2hpbGUoYS5jb21wYXJlVG8odGhpcy5tKT49MCl7YS5zdWJUbyh0aGlzLm0sYSl9fWZ1bmN0aW9uIGJhcnJldHRTcXJUbyhhLGIpe2Euc3F1YXJlVG8oYik7dGhpcy5yZWR1Y2UoYil9ZnVuY3Rpb24gYmFycmV0dE11bFRvKGEsYyxiKXthLm11bHRpcGx5VG8oYyxiKTt0aGlzLnJlZHVjZShiKX1CYXJyZXR0LnByb3RvdHlwZS5jb252ZXJ0PWJhcnJldHRDb252ZXJ0O0JhcnJldHQucHJvdG90eXBlLnJldmVydD1iYXJyZXR0UmV2ZXJ0O0JhcnJldHQucHJvdG90eXBlLnJlZHVjZT1iYXJyZXR0UmVkdWNlO0JhcnJldHQucHJvdG90eXBlLm11bFRvPWJhcnJldHRNdWxUbztCYXJyZXR0LnByb3RvdHlwZS5zcXJUbz1iYXJyZXR0U3FyVG87ZnVuY3Rpb24gYm5Nb2RQb3cocSxmKXt2YXIgbz1xLmJpdExlbmd0aCgpLGgsYj1uYnYoMSksdjtpZihvPD0wKXtyZXR1cm4gYn1lbHNle2lmKG88MTgpe2g9MX1lbHNle2lmKG88NDgpe2g9M31lbHNle2lmKG88MTQ0KXtoPTR9ZWxzZXtpZihvPDc2OCl7aD01fWVsc2V7aD02fX19fX1pZihvPDgpe3Y9bmV3IENsYXNzaWMoZil9ZWxzZXtpZihmLmlzRXZlbigpKXt2PW5ldyBCYXJyZXR0KGYpfWVsc2V7dj1uZXcgTW9udGdvbWVyeShmKX19dmFyIHA9bmV3IEFycmF5KCksZD0zLHM9aC0xLGE9KDE8PGgpLTE7cFsxXT12LmNvbnZlcnQodGhpcyk7aWYoaD4xKXt2YXIgQT1uYmkoKTt2LnNxclRvKHBbMV0sQSk7d2hpbGUoZDw9YSl7cFtkXT1uYmkoKTt2Lm11bFRvKEEscFtkLTJdLHBbZF0pO2QrPTJ9fXZhciBsPXEudC0xLHgsdT10cnVlLGM9bmJpKCkseTtvPW5iaXRzKHFbbF0pLTE7d2hpbGUobD49MCl7aWYobz49cyl7eD0ocVtsXT4+KG8tcykpJmF9ZWxzZXt4PShxW2xdJigoMTw8KG8rMSkpLTEpKTw8KHMtbyk7aWYobD4wKXt4fD1xW2wtMV0+Pih0aGlzLkRCK28tcyl9fWQ9aDt3aGlsZSgoeCYxKT09MCl7eD4+PTE7LS1kfWlmKChvLT1kKTwwKXtvKz10aGlzLkRCOy0tbH1pZih1KXtwW3hdLmNvcHlUbyhiKTt1PWZhbHNlfWVsc2V7d2hpbGUoZD4xKXt2LnNxclRvKGIsYyk7di5zcXJUbyhjLGIpO2QtPTJ9aWYoZD4wKXt2LnNxclRvKGIsYyl9ZWxzZXt5PWI7Yj1jO2M9eX12Lm11bFRvKGMscFt4XSxiKX13aGlsZShsPj0wJiYocVtsXSYoMTw8bykpPT0wKXt2LnNxclRvKGIsYyk7eT1iO2I9YztjPXk7aWYoLS1vPDApe289dGhpcy5EQi0xOy0tbH19fXJldHVybiB2LnJldmVydChiKX1mdW5jdGlvbiBibkdDRChjKXt2YXIgYj0odGhpcy5zPDApP3RoaXMubmVnYXRlKCk6dGhpcy5jbG9uZSgpO3ZhciBoPShjLnM8MCk/Yy5uZWdhdGUoKTpjLmNsb25lKCk7aWYoYi5jb21wYXJlVG8oaCk8MCl7dmFyIGU9YjtiPWg7aD1lfXZhciBkPWIuZ2V0TG93ZXN0U2V0Qml0KCksZj1oLmdldExvd2VzdFNldEJpdCgpO2lmKGY8MCl7cmV0dXJuIGJ9aWYoZDxmKXtmPWR9aWYoZj4wKXtiLnJTaGlmdFRvKGYsYik7aC5yU2hpZnRUbyhmLGgpfXdoaWxlKGIuc2lnbnVtKCk+MCl7aWYoKGQ9Yi5nZXRMb3dlc3RTZXRCaXQoKSk+MCl7Yi5yU2hpZnRUbyhkLGIpfWlmKChkPWguZ2V0TG93ZXN0U2V0Qml0KCkpPjApe2guclNoaWZ0VG8oZCxoKX1pZihiLmNvbXBhcmVUbyhoKT49MCl7Yi5zdWJUbyhoLGIpO2IuclNoaWZ0VG8oMSxiKX1lbHNle2guc3ViVG8oYixoKTtoLnJTaGlmdFRvKDEsaCl9fWlmKGY+MCl7aC5sU2hpZnRUbyhmLGgpfXJldHVybiBofWZ1bmN0aW9uIGJucE1vZEludChlKXtpZihlPD0wKXtyZXR1cm4gMH12YXIgYz10aGlzLkRWJWUsYj0odGhpcy5zPDApP2UtMTowO2lmKHRoaXMudD4wKXtpZihjPT0wKXtiPXRoaXNbMF0lZX1lbHNle2Zvcih2YXIgYT10aGlzLnQtMTthPj0wOy0tYSl7Yj0oYypiK3RoaXNbYV0pJWV9fX1yZXR1cm4gYn1mdW5jdGlvbiBibk1vZEludmVyc2UoZil7dmFyIGo9Zi5pc0V2ZW4oKTtpZigodGhpcy5pc0V2ZW4oKSYmail8fGYuc2lnbnVtKCk9PTApe3JldHVybiBCaWdJbnRlZ2VyLlpFUk99dmFyIGk9Zi5jbG9uZSgpLGg9dGhpcy5jbG9uZSgpO3ZhciBnPW5idigxKSxlPW5idigwKSxsPW5idigwKSxrPW5idigxKTt3aGlsZShpLnNpZ251bSgpIT0wKXt3aGlsZShpLmlzRXZlbigpKXtpLnJTaGlmdFRvKDEsaSk7aWYoail7aWYoIWcuaXNFdmVuKCl8fCFlLmlzRXZlbigpKXtnLmFkZFRvKHRoaXMsZyk7ZS5zdWJUbyhmLGUpfWcuclNoaWZ0VG8oMSxnKX1lbHNle2lmKCFlLmlzRXZlbigpKXtlLnN1YlRvKGYsZSl9fWUuclNoaWZ0VG8oMSxlKX13aGlsZShoLmlzRXZlbigpKXtoLnJTaGlmdFRvKDEsaCk7aWYoail7aWYoIWwuaXNFdmVuKCl8fCFrLmlzRXZlbigpKXtsLmFkZFRvKHRoaXMsbCk7ay5zdWJUbyhmLGspfWwuclNoaWZ0VG8oMSxsKX1lbHNle2lmKCFrLmlzRXZlbigpKXtrLnN1YlRvKGYsayl9fWsuclNoaWZ0VG8oMSxrKX1pZihpLmNvbXBhcmVUbyhoKT49MCl7aS5zdWJUbyhoLGkpO2lmKGope2cuc3ViVG8obCxnKX1lLnN1YlRvKGssZSl9ZWxzZXtoLnN1YlRvKGksaCk7aWYoail7bC5zdWJUbyhnLGwpfWsuc3ViVG8oZSxrKX19aWYoaC5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpIT0wKXtyZXR1cm4gQmlnSW50ZWdlci5aRVJPfWlmKGsuY29tcGFyZVRvKGYpPj0wKXtyZXR1cm4gay5zdWJ0cmFjdChmKX1pZihrLnNpZ251bSgpPDApe2suYWRkVG8oZixrKX1lbHNle3JldHVybiBrfWlmKGsuc2lnbnVtKCk8MCl7cmV0dXJuIGsuYWRkKGYpfWVsc2V7cmV0dXJuIGt9fXZhciBsb3dwcmltZXM9WzIsMyw1LDcsMTEsMTMsMTcsMTksMjMsMjksMzEsMzcsNDEsNDMsNDcsNTMsNTksNjEsNjcsNzEsNzMsNzksODMsODksOTcsMTAxLDEwMywxMDcsMTA5LDExMywxMjcsMTMxLDEzNywxMzksMTQ5LDE1MSwxNTcsMTYzLDE2NywxNzMsMTc5LDE4MSwxOTEsMTkzLDE5NywxOTksMjExLDIyMywyMjcsMjI5LDIzMywyMzksMjQxLDI1MSwyNTcsMjYzLDI2OSwyNzEsMjc3LDI4MSwyODMsMjkzLDMwNywzMTEsMzEzLDMxNywzMzEsMzM3LDM0NywzNDksMzUzLDM1OSwzNjcsMzczLDM3OSwzODMsMzg5LDM5Nyw0MDEsNDA5LDQxOSw0MjEsNDMxLDQzMyw0MzksNDQzLDQ0OSw0NTcsNDYxLDQ2Myw0NjcsNDc5LDQ4Nyw0OTEsNDk5LDUwMyw1MDksNTIxLDUyMyw1NDEsNTQ3LDU1Nyw1NjMsNTY5LDU3MSw1NzcsNTg3LDU5Myw1OTksNjAxLDYwNyw2MTMsNjE3LDYxOSw2MzEsNjQxLDY0Myw2NDcsNjUzLDY1OSw2NjEsNjczLDY3Nyw2ODMsNjkxLDcwMSw3MDksNzE5LDcyNyw3MzMsNzM5LDc0Myw3NTEsNzU3LDc2MSw3NjksNzczLDc4Nyw3OTcsODA5LDgxMSw4MjEsODIzLDgyNyw4MjksODM5LDg1Myw4NTcsODU5LDg2Myw4NzcsODgxLDg4Myw4ODcsOTA3LDkxMSw5MTksOTI5LDkzNyw5NDEsOTQ3LDk1Myw5NjcsOTcxLDk3Nyw5ODMsOTkxLDk5N107dmFyIGxwbGltPSgxPDwyNikvbG93cHJpbWVzW2xvd3ByaW1lcy5sZW5ndGgtMV07ZnVuY3Rpb24gYm5Jc1Byb2JhYmxlUHJpbWUoZSl7dmFyIGQsYj10aGlzLmFicygpO2lmKGIudD09MSYmYlswXTw9bG93cHJpbWVzW2xvd3ByaW1lcy5sZW5ndGgtMV0pe2ZvcihkPTA7ZDxsb3dwcmltZXMubGVuZ3RoOysrZCl7aWYoYlswXT09bG93cHJpbWVzW2RdKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfWlmKGIuaXNFdmVuKCkpe3JldHVybiBmYWxzZX1kPTE7d2hpbGUoZDxsb3dwcmltZXMubGVuZ3RoKXt2YXIgYT1sb3dwcmltZXNbZF0sYz1kKzE7d2hpbGUoYzxsb3dwcmltZXMubGVuZ3RoJiZhPGxwbGltKXthKj1sb3dwcmltZXNbYysrXX1hPWIubW9kSW50KGEpO3doaWxlKGQ8Yyl7aWYoYSVsb3dwcmltZXNbZCsrXT09MCl7cmV0dXJuIGZhbHNlfX19cmV0dXJuIGIubWlsbGVyUmFiaW4oZSl9ZnVuY3Rpb24gYm5wTWlsbGVyUmFiaW4oZil7dmFyIGc9dGhpcy5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSk7dmFyIGM9Zy5nZXRMb3dlc3RTZXRCaXQoKTtpZihjPD0wKXtyZXR1cm4gZmFsc2V9dmFyIGg9Zy5zaGlmdFJpZ2h0KGMpO2Y9KGYrMSk+PjE7aWYoZj5sb3dwcmltZXMubGVuZ3RoKXtmPWxvd3ByaW1lcy5sZW5ndGh9dmFyIGI9bmJpKCk7Zm9yKHZhciBlPTA7ZTxmOysrZSl7Yi5mcm9tSW50KGxvd3ByaW1lc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqbG93cHJpbWVzLmxlbmd0aCldKTt2YXIgbD1iLm1vZFBvdyhoLHRoaXMpO2lmKGwuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKSE9MCYmbC5jb21wYXJlVG8oZykhPTApe3ZhciBkPTE7d2hpbGUoZCsrPGMmJmwuY29tcGFyZVRvKGcpIT0wKXtsPWwubW9kUG93SW50KDIsdGhpcyk7aWYobC5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpPT0wKXtyZXR1cm4gZmFsc2V9fWlmKGwuY29tcGFyZVRvKGcpIT0wKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gdHJ1ZX1CaWdJbnRlZ2VyLnByb3RvdHlwZS5jaHVua1NpemU9Ym5wQ2h1bmtTaXplO0JpZ0ludGVnZXIucHJvdG90eXBlLnRvUmFkaXg9Ym5wVG9SYWRpeDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5mcm9tUmFkaXg9Ym5wRnJvbVJhZGl4O0JpZ0ludGVnZXIucHJvdG90eXBlLmZyb21OdW1iZXI9Ym5wRnJvbU51bWJlcjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5iaXR3aXNlVG89Ym5wQml0d2lzZVRvO0JpZ0ludGVnZXIucHJvdG90eXBlLmNoYW5nZUJpdD1ibnBDaGFuZ2VCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuYWRkVG89Ym5wQWRkVG87QmlnSW50ZWdlci5wcm90b3R5cGUuZE11bHRpcGx5PWJucERNdWx0aXBseTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5kQWRkT2Zmc2V0PWJucERBZGRPZmZzZXQ7QmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHlMb3dlclRvPWJucE11bHRpcGx5TG93ZXJUbztCaWdJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseVVwcGVyVG89Ym5wTXVsdGlwbHlVcHBlclRvO0JpZ0ludGVnZXIucHJvdG90eXBlLm1vZEludD1ibnBNb2RJbnQ7QmlnSW50ZWdlci5wcm90b3R5cGUubWlsbGVyUmFiaW49Ym5wTWlsbGVyUmFiaW47QmlnSW50ZWdlci5wcm90b3R5cGUuY2xvbmU9Ym5DbG9uZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5pbnRWYWx1ZT1ibkludFZhbHVlO0JpZ0ludGVnZXIucHJvdG90eXBlLmJ5dGVWYWx1ZT1ibkJ5dGVWYWx1ZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zaG9ydFZhbHVlPWJuU2hvcnRWYWx1ZTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zaWdudW09Ym5TaWdOdW07QmlnSW50ZWdlci5wcm90b3R5cGUudG9CeXRlQXJyYXk9Ym5Ub0J5dGVBcnJheTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5lcXVhbHM9Ym5FcXVhbHM7QmlnSW50ZWdlci5wcm90b3R5cGUubWluPWJuTWluO0JpZ0ludGVnZXIucHJvdG90eXBlLm1heD1ibk1heDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbmQ9Ym5BbmQ7QmlnSW50ZWdlci5wcm90b3R5cGUub3I9Ym5PcjtCaWdJbnRlZ2VyLnByb3RvdHlwZS54b3I9Ym5Yb3I7QmlnSW50ZWdlci5wcm90b3R5cGUuYW5kTm90PWJuQW5kTm90O0JpZ0ludGVnZXIucHJvdG90eXBlLm5vdD1ibk5vdDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5zaGlmdExlZnQ9Ym5TaGlmdExlZnQ7QmlnSW50ZWdlci5wcm90b3R5cGUuc2hpZnRSaWdodD1iblNoaWZ0UmlnaHQ7QmlnSW50ZWdlci5wcm90b3R5cGUuZ2V0TG93ZXN0U2V0Qml0PWJuR2V0TG93ZXN0U2V0Qml0O0JpZ0ludGVnZXIucHJvdG90eXBlLmJpdENvdW50PWJuQml0Q291bnQ7QmlnSW50ZWdlci5wcm90b3R5cGUudGVzdEJpdD1iblRlc3RCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuc2V0Qml0PWJuU2V0Qml0O0JpZ0ludGVnZXIucHJvdG90eXBlLmNsZWFyQml0PWJuQ2xlYXJCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuZmxpcEJpdD1ibkZsaXBCaXQ7QmlnSW50ZWdlci5wcm90b3R5cGUuYWRkPWJuQWRkO0JpZ0ludGVnZXIucHJvdG90eXBlLnN1YnRyYWN0PWJuU3VidHJhY3Q7QmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHk9Ym5NdWx0aXBseTtCaWdJbnRlZ2VyLnByb3RvdHlwZS5kaXZpZGU9Ym5EaXZpZGU7QmlnSW50ZWdlci5wcm90b3R5cGUucmVtYWluZGVyPWJuUmVtYWluZGVyO0JpZ0ludGVnZXIucHJvdG90eXBlLmRpdmlkZUFuZFJlbWFpbmRlcj1ibkRpdmlkZUFuZFJlbWFpbmRlcjtCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2RQb3c9Ym5Nb2RQb3c7QmlnSW50ZWdlci5wcm90b3R5cGUubW9kSW52ZXJzZT1ibk1vZEludmVyc2U7QmlnSW50ZWdlci5wcm90b3R5cGUucG93PWJuUG93O0JpZ0ludGVnZXIucHJvdG90eXBlLmdjZD1ibkdDRDtCaWdJbnRlZ2VyLnByb3RvdHlwZS5pc1Byb2JhYmxlUHJpbWU9Ym5Jc1Byb2JhYmxlUHJpbWU7QmlnSW50ZWdlci5wcm90b3R5cGUuc3F1YXJlPWJuU3F1YXJlOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIEFyY2ZvdXIoKXt0aGlzLmk9MDt0aGlzLmo9MDt0aGlzLlM9bmV3IEFycmF5KCl9ZnVuY3Rpb24gQVJDNGluaXQoZCl7dmFyIGMsYSxiO2ZvcihjPTA7YzwyNTY7KytjKXt0aGlzLlNbY109Y31hPTA7Zm9yKGM9MDtjPDI1NjsrK2Mpe2E9KGErdGhpcy5TW2NdK2RbYyVkLmxlbmd0aF0pJjI1NTtiPXRoaXMuU1tjXTt0aGlzLlNbY109dGhpcy5TW2FdO3RoaXMuU1thXT1ifXRoaXMuaT0wO3RoaXMuaj0wfWZ1bmN0aW9uIEFSQzRuZXh0KCl7dmFyIGE7dGhpcy5pPSh0aGlzLmkrMSkmMjU1O3RoaXMuaj0odGhpcy5qK3RoaXMuU1t0aGlzLmldKSYyNTU7YT10aGlzLlNbdGhpcy5pXTt0aGlzLlNbdGhpcy5pXT10aGlzLlNbdGhpcy5qXTt0aGlzLlNbdGhpcy5qXT1hO3JldHVybiB0aGlzLlNbKGErdGhpcy5TW3RoaXMuaV0pJjI1NV19QXJjZm91ci5wcm90b3R5cGUuaW5pdD1BUkM0aW5pdDtBcmNmb3VyLnByb3RvdHlwZS5uZXh0PUFSQzRuZXh0O2Z1bmN0aW9uIHBybmdfbmV3c3RhdGUoKXtyZXR1cm4gbmV3IEFyY2ZvdXIoKX12YXIgcm5nX3BzaXplPTI1NjsKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwp2YXIgcm5nX3N0YXRlO3ZhciBybmdfcG9vbDt2YXIgcm5nX3BwdHI7ZnVuY3Rpb24gcm5nX3NlZWRfaW50KGEpe3JuZ19wb29sW3JuZ19wcHRyKytdXj1hJjI1NTtybmdfcG9vbFtybmdfcHB0cisrXV49KGE+PjgpJjI1NTtybmdfcG9vbFtybmdfcHB0cisrXV49KGE+PjE2KSYyNTU7cm5nX3Bvb2xbcm5nX3BwdHIrK11ePShhPj4yNCkmMjU1O2lmKHJuZ19wcHRyPj1ybmdfcHNpemUpe3JuZ19wcHRyLT1ybmdfcHNpemV9fWZ1bmN0aW9uIHJuZ19zZWVkX3RpbWUoKXtybmdfc2VlZF9pbnQobmV3IERhdGUoKS5nZXRUaW1lKCkpfWlmKHJuZ19wb29sPT1udWxsKXtybmdfcG9vbD1uZXcgQXJyYXkoKTtybmdfcHB0cj0wO3ZhciB0O2lmKG5hdmlnYXRvci5hcHBOYW1lPT0iTmV0c2NhcGUiJiZuYXZpZ2F0b3IuYXBwVmVyc2lvbjwiNSImJndpbmRvdy5jcnlwdG8pe3ZhciB6PXdpbmRvdy5jcnlwdG8ucmFuZG9tKDMyKTtmb3IodD0wO3Q8ei5sZW5ndGg7Kyt0KXtybmdfcG9vbFtybmdfcHB0cisrXT16LmNoYXJDb2RlQXQodCkmMjU1fX13aGlsZShybmdfcHB0cjxybmdfcHNpemUpe3Q9TWF0aC5mbG9vcig2NTUzNipNYXRoLnJhbmRvbSgpKTtybmdfcG9vbFtybmdfcHB0cisrXT10Pj4+ODtybmdfcG9vbFtybmdfcHB0cisrXT10JjI1NX1ybmdfcHB0cj0wO3JuZ19zZWVkX3RpbWUoKX1mdW5jdGlvbiBybmdfZ2V0X2J5dGUoKXtpZihybmdfc3RhdGU9PW51bGwpe3JuZ19zZWVkX3RpbWUoKTtybmdfc3RhdGU9cHJuZ19uZXdzdGF0ZSgpO3JuZ19zdGF0ZS5pbml0KHJuZ19wb29sKTtmb3Iocm5nX3BwdHI9MDtybmdfcHB0cjxybmdfcG9vbC5sZW5ndGg7KytybmdfcHB0cil7cm5nX3Bvb2xbcm5nX3BwdHJdPTB9cm5nX3BwdHI9MH1yZXR1cm4gcm5nX3N0YXRlLm5leHQoKX1mdW5jdGlvbiBybmdfZ2V0X2J5dGVzKGIpe3ZhciBhO2ZvcihhPTA7YTxiLmxlbmd0aDsrK2Epe2JbYV09cm5nX2dldF9ieXRlKCl9fWZ1bmN0aW9uIFNlY3VyZVJhbmRvbSgpe31TZWN1cmVSYW5kb20ucHJvdG90eXBlLm5leHRCeXRlcz1ybmdfZ2V0X2J5dGVzOwovKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi8KICovCmZ1bmN0aW9uIHBhcnNlQmlnSW50KGIsYSl7cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGIsYSl9ZnVuY3Rpb24gbGluZWJyayhjLGQpe3ZhciBhPSIiO3ZhciBiPTA7d2hpbGUoYitkPGMubGVuZ3RoKXthKz1jLnN1YnN0cmluZyhiLGIrZCkrIlxuIjtiKz1kfXJldHVybiBhK2Muc3Vic3RyaW5nKGIsYy5sZW5ndGgpfWZ1bmN0aW9uIGJ5dGUySGV4KGEpe2lmKGE8MTYpe3JldHVybiIwIithLnRvU3RyaW5nKDE2KX1lbHNle3JldHVybiBhLnRvU3RyaW5nKDE2KX19ZnVuY3Rpb24gcGtjczFwYWQyKGUsaCl7aWYoaDxlLmxlbmd0aCsxMSl7YWxlcnQoIk1lc3NhZ2UgdG9vIGxvbmcgZm9yIFJTQSIpO3JldHVybiBudWxsfXZhciBnPW5ldyBBcnJheSgpO3ZhciBkPWUubGVuZ3RoLTE7d2hpbGUoZD49MCYmaD4wKXt2YXIgZj1lLmNoYXJDb2RlQXQoZC0tKTtpZihmPDEyOCl7Z1stLWhdPWZ9ZWxzZXtpZigoZj4xMjcpJiYoZjwyMDQ4KSl7Z1stLWhdPShmJjYzKXwxMjg7Z1stLWhdPShmPj42KXwxOTJ9ZWxzZXtnWy0taF09KGYmNjMpfDEyODtnWy0taF09KChmPj42KSY2Myl8MTI4O2dbLS1oXT0oZj4+MTIpfDIyNH19fWdbLS1oXT0wO3ZhciBiPW5ldyBTZWN1cmVSYW5kb20oKTt2YXIgYT1uZXcgQXJyYXkoKTt3aGlsZShoPjIpe2FbMF09MDt3aGlsZShhWzBdPT0wKXtiLm5leHRCeXRlcyhhKX1nWy0taF09YVswXX1nWy0taF09MjtnWy0taF09MDtyZXR1cm4gbmV3IEJpZ0ludGVnZXIoZyl9ZnVuY3Rpb24gb2FlcF9tZ2YxX2FycihjLGEsZSl7dmFyIGI9IiIsZD0wO3doaWxlKGIubGVuZ3RoPGEpe2IrPWUoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsYy5jb25jYXQoWyhkJjQyNzgxOTAwODApPj4yNCwoZCYxNjcxMTY4MCk+PjE2LChkJjY1MjgwKT4+OCxkJjI1NV0pKSk7ZCs9MX1yZXR1cm4gYn12YXIgU0hBMV9TSVpFPTIwO2Z1bmN0aW9uIG9hZXBfcGFkKGwsYSxjKXtpZihsLmxlbmd0aCsyKlNIQTFfU0laRSsyPmEpe3Rocm93Ik1lc3NhZ2UgdG9vIGxvbmcgZm9yIFJTQSJ9dmFyIGg9IiIsZDtmb3IoZD0wO2Q8YS1sLmxlbmd0aC0yKlNIQTFfU0laRS0yO2QrPTEpe2grPSJceDAwIn12YXIgZT1yc3RyX3NoYTEoIiIpK2grIlx4MDEiK2w7dmFyIGY9bmV3IEFycmF5KFNIQTFfU0laRSk7bmV3IFNlY3VyZVJhbmRvbSgpLm5leHRCeXRlcyhmKTt2YXIgZz1vYWVwX21nZjFfYXJyKGYsZS5sZW5ndGgsY3x8cnN0cl9zaGExKTt2YXIgaz1bXTtmb3IoZD0wO2Q8ZS5sZW5ndGg7ZCs9MSl7a1tkXT1lLmNoYXJDb2RlQXQoZCleZy5jaGFyQ29kZUF0KGQpfXZhciBqPW9hZXBfbWdmMV9hcnIoayxmLmxlbmd0aCxyc3RyX3NoYTEpO3ZhciBiPVswXTtmb3IoZD0wO2Q8Zi5sZW5ndGg7ZCs9MSl7YltkKzFdPWZbZF1eai5jaGFyQ29kZUF0KGQpfXJldHVybiBuZXcgQmlnSW50ZWdlcihiLmNvbmNhdChrKSl9ZnVuY3Rpb24gUlNBS2V5KCl7dGhpcy5uPW51bGw7dGhpcy5lPTA7dGhpcy5kPW51bGw7dGhpcy5wPW51bGw7dGhpcy5xPW51bGw7dGhpcy5kbXAxPW51bGw7dGhpcy5kbXExPW51bGw7dGhpcy5jb2VmZj1udWxsfWZ1bmN0aW9uIFJTQVNldFB1YmxpYyhiLGEpe3RoaXMuaXNQdWJsaWM9dHJ1ZTtpZih0eXBlb2YgYiE9PSJzdHJpbmciKXt0aGlzLm49Yjt0aGlzLmU9YX1lbHNle2lmKGIhPW51bGwmJmEhPW51bGwmJmIubGVuZ3RoPjAmJmEubGVuZ3RoPjApe3RoaXMubj1wYXJzZUJpZ0ludChiLDE2KTt0aGlzLmU9cGFyc2VJbnQoYSwxNil9ZWxzZXthbGVydCgiSW52YWxpZCBSU0EgcHVibGljIGtleSIpfX19ZnVuY3Rpb24gUlNBRG9QdWJsaWMoYSl7cmV0dXJuIGEubW9kUG93SW50KHRoaXMuZSx0aGlzLm4pfWZ1bmN0aW9uIFJTQUVuY3J5cHQoZCl7dmFyIGE9cGtjczFwYWQyKGQsKHRoaXMubi5iaXRMZW5ndGgoKSs3KT4+Myk7aWYoYT09bnVsbCl7cmV0dXJuIG51bGx9dmFyIGU9dGhpcy5kb1B1YmxpYyhhKTtpZihlPT1udWxsKXtyZXR1cm4gbnVsbH12YXIgYj1lLnRvU3RyaW5nKDE2KTtpZigoYi5sZW5ndGgmMSk9PTApe3JldHVybiBifWVsc2V7cmV0dXJuIjAiK2J9fWZ1bmN0aW9uIFJTQUVuY3J5cHRPQUVQKGUsZCl7dmFyIGE9b2FlcF9wYWQoZSwodGhpcy5uLmJpdExlbmd0aCgpKzcpPj4zLGQpO2lmKGE9PW51bGwpe3JldHVybiBudWxsfXZhciBmPXRoaXMuZG9QdWJsaWMoYSk7aWYoZj09bnVsbCl7cmV0dXJuIG51bGx9dmFyIGI9Zi50b1N0cmluZygxNik7aWYoKGIubGVuZ3RoJjEpPT0wKXtyZXR1cm4gYn1lbHNle3JldHVybiIwIitifX1SU0FLZXkucHJvdG90eXBlLmRvUHVibGljPVJTQURvUHVibGljO1JTQUtleS5wcm90b3R5cGUuc2V0UHVibGljPVJTQVNldFB1YmxpYztSU0FLZXkucHJvdG90eXBlLmVuY3J5cHQ9UlNBRW5jcnlwdDtSU0FLZXkucHJvdG90eXBlLmVuY3J5cHRPQUVQPVJTQUVuY3J5cHRPQUVQO1JTQUtleS5wcm90b3R5cGUudHlwZT0iUlNBIjsKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwpmdW5jdGlvbiBwa2NzMXVucGFkMihnLGope3ZhciBhPWcudG9CeXRlQXJyYXkoKTt2YXIgZj0wO3doaWxlKGY8YS5sZW5ndGgmJmFbZl09PTApeysrZn1pZihhLmxlbmd0aC1mIT1qLTF8fGFbZl0hPTIpe3JldHVybiBudWxsfSsrZjt3aGlsZShhW2ZdIT0wKXtpZigrK2Y+PWEubGVuZ3RoKXtyZXR1cm4gbnVsbH19dmFyIGU9IiI7d2hpbGUoKytmPGEubGVuZ3RoKXt2YXIgaD1hW2ZdJjI1NTtpZihoPDEyOCl7ZSs9U3RyaW5nLmZyb21DaGFyQ29kZShoKX1lbHNle2lmKChoPjE5MSkmJihoPDIyNCkpe2UrPVN0cmluZy5mcm9tQ2hhckNvZGUoKChoJjMxKTw8Nil8KGFbZisxXSY2MykpOysrZn1lbHNle2UrPVN0cmluZy5mcm9tQ2hhckNvZGUoKChoJjE1KTw8MTIpfCgoYVtmKzFdJjYzKTw8Nil8KGFbZisyXSY2MykpO2YrPTJ9fX1yZXR1cm4gZX1mdW5jdGlvbiBvYWVwX21nZjFfc3RyKGMsYSxlKXt2YXIgYj0iIixkPTA7d2hpbGUoYi5sZW5ndGg8YSl7Yis9ZShjK1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLFsoZCY0Mjc4MTkwMDgwKT4+MjQsKGQmMTY3MTE2ODApPj4xNiwoZCY2NTI4MCk+PjgsZCYyNTVdKSk7ZCs9MX1yZXR1cm4gYn12YXIgU0hBMV9TSVpFPTIwO2Z1bmN0aW9uIG9hZXBfdW5wYWQobCxiLGUpe2w9bC50b0J5dGVBcnJheSgpO3ZhciBmO2ZvcihmPTA7ZjxsLmxlbmd0aDtmKz0xKXtsW2ZdJj0yNTV9d2hpbGUobC5sZW5ndGg8Yil7bC51bnNoaWZ0KDApfWw9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsbCk7aWYobC5sZW5ndGg8MipTSEExX1NJWkUrMil7dGhyb3ciQ2lwaGVyIHRvbyBzaG9ydCJ9dmFyIGM9bC5zdWJzdHIoMSxTSEExX1NJWkUpO3ZhciBvPWwuc3Vic3RyKFNIQTFfU0laRSsxKTt2YXIgbT1vYWVwX21nZjFfc3RyKG8sU0hBMV9TSVpFLGV8fHJzdHJfc2hhMSk7dmFyIGg9W10sZjtmb3IoZj0wO2Y8Yy5sZW5ndGg7Zis9MSl7aFtmXT1jLmNoYXJDb2RlQXQoZilebS5jaGFyQ29kZUF0KGYpfXZhciBqPW9hZXBfbWdmMV9zdHIoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsaCksbC5sZW5ndGgtU0hBMV9TSVpFLHJzdHJfc2hhMSk7dmFyIGc9W107Zm9yKGY9MDtmPG8ubGVuZ3RoO2YrPTEpe2dbZl09by5jaGFyQ29kZUF0KGYpXmouY2hhckNvZGVBdChmKX1nPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGcpO2lmKGcuc3Vic3RyKDAsU0hBMV9TSVpFKSE9PXJzdHJfc2hhMSgiIikpe3Rocm93Ikhhc2ggbWlzbWF0Y2gifWc9Zy5zdWJzdHIoU0hBMV9TSVpFKTt2YXIgYT1nLmluZGV4T2YoIlx4MDEiKTt2YXIgaz0oYSE9LTEpP2cuc3Vic3RyKDAsYSkubGFzdEluZGV4T2YoIlx4MDAiKTotMTtpZihrKzEhPWEpe3Rocm93Ik1hbGZvcm1lZCBkYXRhIn1yZXR1cm4gZy5zdWJzdHIoYSsxKX1mdW5jdGlvbiBSU0FTZXRQcml2YXRlKGMsYSxiKXt0aGlzLmlzUHJpdmF0ZT10cnVlO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe3RoaXMubj1jO3RoaXMuZT1hO3RoaXMuZD1ifWVsc2V7aWYoYyE9bnVsbCYmYSE9bnVsbCYmYy5sZW5ndGg+MCYmYS5sZW5ndGg+MCl7dGhpcy5uPXBhcnNlQmlnSW50KGMsMTYpO3RoaXMuZT1wYXJzZUludChhLDE2KTt0aGlzLmQ9cGFyc2VCaWdJbnQoYiwxNil9ZWxzZXthbGVydCgiSW52YWxpZCBSU0EgcHJpdmF0ZSBrZXkiKX19fWZ1bmN0aW9uIFJTQVNldFByaXZhdGVFeChnLGQsZSxjLGIsYSxoLGYpe3RoaXMuaXNQcml2YXRlPXRydWU7aWYoZz09bnVsbCl7dGhyb3ciUlNBU2V0UHJpdmF0ZUV4IE4gPT0gbnVsbCJ9aWYoZD09bnVsbCl7dGhyb3ciUlNBU2V0UHJpdmF0ZUV4IEUgPT0gbnVsbCJ9aWYoZy5sZW5ndGg9PTApe3Rocm93IlJTQVNldFByaXZhdGVFeCBOLmxlbmd0aCA9PSAwIn1pZihkLmxlbmd0aD09MCl7dGhyb3ciUlNBU2V0UHJpdmF0ZUV4IEUubGVuZ3RoID09IDAifWlmKGchPW51bGwmJmQhPW51bGwmJmcubGVuZ3RoPjAmJmQubGVuZ3RoPjApe3RoaXMubj1wYXJzZUJpZ0ludChnLDE2KTt0aGlzLmU9cGFyc2VJbnQoZCwxNik7dGhpcy5kPXBhcnNlQmlnSW50KGUsMTYpO3RoaXMucD1wYXJzZUJpZ0ludChjLDE2KTt0aGlzLnE9cGFyc2VCaWdJbnQoYiwxNik7dGhpcy5kbXAxPXBhcnNlQmlnSW50KGEsMTYpO3RoaXMuZG1xMT1wYXJzZUJpZ0ludChoLDE2KTt0aGlzLmNvZWZmPXBhcnNlQmlnSW50KGYsMTYpfWVsc2V7YWxlcnQoIkludmFsaWQgUlNBIHByaXZhdGUga2V5IGluIFJTQVNldFByaXZhdGVFeCIpfX1mdW5jdGlvbiBSU0FHZW5lcmF0ZShiLGkpe3ZhciBhPW5ldyBTZWN1cmVSYW5kb20oKTt2YXIgZj1iPj4xO3RoaXMuZT1wYXJzZUludChpLDE2KTt2YXIgYz1uZXcgQmlnSW50ZWdlcihpLDE2KTtmb3IoOzspe2Zvcig7Oyl7dGhpcy5wPW5ldyBCaWdJbnRlZ2VyKGItZiwxLGEpO2lmKHRoaXMucC5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSkuZ2NkKGMpLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk9PTAmJnRoaXMucC5pc1Byb2JhYmxlUHJpbWUoMTApKXticmVha319Zm9yKDs7KXt0aGlzLnE9bmV3IEJpZ0ludGVnZXIoZiwxLGEpO2lmKHRoaXMucS5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSkuZ2NkKGMpLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk9PTAmJnRoaXMucS5pc1Byb2JhYmxlUHJpbWUoMTApKXticmVha319aWYodGhpcy5wLmNvbXBhcmVUbyh0aGlzLnEpPD0wKXt2YXIgaD10aGlzLnA7dGhpcy5wPXRoaXMucTt0aGlzLnE9aH12YXIgZz10aGlzLnAuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpO3ZhciBkPXRoaXMucS5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSk7dmFyIGU9Zy5tdWx0aXBseShkKTtpZihlLmdjZChjKS5jb21wYXJlVG8oQmlnSW50ZWdlci5PTkUpPT0wKXt0aGlzLm49dGhpcy5wLm11bHRpcGx5KHRoaXMucSk7dGhpcy5kPWMubW9kSW52ZXJzZShlKTt0aGlzLmRtcDE9dGhpcy5kLm1vZChnKTt0aGlzLmRtcTE9dGhpcy5kLm1vZChkKTt0aGlzLmNvZWZmPXRoaXMucS5tb2RJbnZlcnNlKHRoaXMucCk7YnJlYWt9fX1mdW5jdGlvbiBSU0FEb1ByaXZhdGUoYSl7aWYodGhpcy5wPT1udWxsfHx0aGlzLnE9PW51bGwpe3JldHVybiBhLm1vZFBvdyh0aGlzLmQsdGhpcy5uKX12YXIgYz1hLm1vZCh0aGlzLnApLm1vZFBvdyh0aGlzLmRtcDEsdGhpcy5wKTt2YXIgYj1hLm1vZCh0aGlzLnEpLm1vZFBvdyh0aGlzLmRtcTEsdGhpcy5xKTt3aGlsZShjLmNvbXBhcmVUbyhiKTwwKXtjPWMuYWRkKHRoaXMucCl9cmV0dXJuIGMuc3VidHJhY3QoYikubXVsdGlwbHkodGhpcy5jb2VmZikubW9kKHRoaXMucCkubXVsdGlwbHkodGhpcy5xKS5hZGQoYil9ZnVuY3Rpb24gUlNBRGVjcnlwdChiKXt2YXIgZD1wYXJzZUJpZ0ludChiLDE2KTt2YXIgYT10aGlzLmRvUHJpdmF0ZShkKTtpZihhPT1udWxsKXtyZXR1cm4gbnVsbH1yZXR1cm4gcGtjczF1bnBhZDIoYSwodGhpcy5uLmJpdExlbmd0aCgpKzcpPj4zKX1mdW5jdGlvbiBSU0FEZWNyeXB0T0FFUChkLGIpe3ZhciBlPXBhcnNlQmlnSW50KGQsMTYpO3ZhciBhPXRoaXMuZG9Qcml2YXRlKGUpO2lmKGE9PW51bGwpe3JldHVybiBudWxsfXJldHVybiBvYWVwX3VucGFkKGEsKHRoaXMubi5iaXRMZW5ndGgoKSs3KT4+MyxiKX1SU0FLZXkucHJvdG90eXBlLmRvUHJpdmF0ZT1SU0FEb1ByaXZhdGU7UlNBS2V5LnByb3RvdHlwZS5zZXRQcml2YXRlPVJTQVNldFByaXZhdGU7UlNBS2V5LnByb3RvdHlwZS5zZXRQcml2YXRlRXg9UlNBU2V0UHJpdmF0ZUV4O1JTQUtleS5wcm90b3R5cGUuZ2VuZXJhdGU9UlNBR2VuZXJhdGU7UlNBS2V5LnByb3RvdHlwZS5kZWNyeXB0PVJTQURlY3J5cHQ7UlNBS2V5LnByb3RvdHlwZS5kZWNyeXB0T0FFUD1SU0FEZWNyeXB0T0FFUDsKLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vCiAqLwpmdW5jdGlvbiBFQ0ZpZWxkRWxlbWVudEZwKGIsYSl7dGhpcy54PWE7dGhpcy5xPWJ9ZnVuY3Rpb24gZmVGcEVxdWFscyhhKXtpZihhPT10aGlzKXtyZXR1cm4gdHJ1ZX1yZXR1cm4odGhpcy5xLmVxdWFscyhhLnEpJiZ0aGlzLnguZXF1YWxzKGEueCkpfWZ1bmN0aW9uIGZlRnBUb0JpZ0ludGVnZXIoKXtyZXR1cm4gdGhpcy54fWZ1bmN0aW9uIGZlRnBOZWdhdGUoKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLHRoaXMueC5uZWdhdGUoKS5tb2QodGhpcy5xKSl9ZnVuY3Rpb24gZmVGcEFkZChhKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLHRoaXMueC5hZGQoYS50b0JpZ0ludGVnZXIoKSkubW9kKHRoaXMucSkpfWZ1bmN0aW9uIGZlRnBTdWJ0cmFjdChhKXtyZXR1cm4gbmV3IEVDRmllbGRFbGVtZW50RnAodGhpcy5xLHRoaXMueC5zdWJ0cmFjdChhLnRvQmlnSW50ZWdlcigpKS5tb2QodGhpcy5xKSl9ZnVuY3Rpb24gZmVGcE11bHRpcGx5KGEpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsdGhpcy54Lm11bHRpcGx5KGEudG9CaWdJbnRlZ2VyKCkpLm1vZCh0aGlzLnEpKX1mdW5jdGlvbiBmZUZwU3F1YXJlKCl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSx0aGlzLnguc3F1YXJlKCkubW9kKHRoaXMucSkpfWZ1bmN0aW9uIGZlRnBEaXZpZGUoYSl7cmV0dXJuIG5ldyBFQ0ZpZWxkRWxlbWVudEZwKHRoaXMucSx0aGlzLngubXVsdGlwbHkoYS50b0JpZ0ludGVnZXIoKS5tb2RJbnZlcnNlKHRoaXMucSkpLm1vZCh0aGlzLnEpKX1FQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5lcXVhbHM9ZmVGcEVxdWFscztFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS50b0JpZ0ludGVnZXI9ZmVGcFRvQmlnSW50ZWdlcjtFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5uZWdhdGU9ZmVGcE5lZ2F0ZTtFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5hZGQ9ZmVGcEFkZDtFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5zdWJ0cmFjdD1mZUZwU3VidHJhY3Q7RUNGaWVsZEVsZW1lbnRGcC5wcm90b3R5cGUubXVsdGlwbHk9ZmVGcE11bHRpcGx5O0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLnNxdWFyZT1mZUZwU3F1YXJlO0VDRmllbGRFbGVtZW50RnAucHJvdG90eXBlLmRpdmlkZT1mZUZwRGl2aWRlO2Z1bmN0aW9uIEVDUG9pbnRGcChjLGEsZCxiKXt0aGlzLmN1cnZlPWM7dGhpcy54PWE7dGhpcy55PWQ7aWYoYj09bnVsbCl7dGhpcy56PUJpZ0ludGVnZXIuT05FfWVsc2V7dGhpcy56PWJ9dGhpcy56aW52PW51bGx9ZnVuY3Rpb24gcG9pbnRGcEdldFgoKXtpZih0aGlzLnppbnY9PW51bGwpe3RoaXMuemludj10aGlzLnoubW9kSW52ZXJzZSh0aGlzLmN1cnZlLnEpfXJldHVybiB0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKHRoaXMueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnppbnYpLm1vZCh0aGlzLmN1cnZlLnEpKX1mdW5jdGlvbiBwb2ludEZwR2V0WSgpe2lmKHRoaXMuemludj09bnVsbCl7dGhpcy56aW52PXRoaXMuei5tb2RJbnZlcnNlKHRoaXMuY3VydmUucSl9cmV0dXJuIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIodGhpcy55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMuemludikubW9kKHRoaXMuY3VydmUucSkpfWZ1bmN0aW9uIHBvaW50RnBFcXVhbHMoYSl7aWYoYT09dGhpcyl7cmV0dXJuIHRydWV9aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiBhLmlzSW5maW5pdHkoKX1pZihhLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXMuaXNJbmZpbml0eSgpfXZhciBjLGI7Yz1hLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkoYS56KSkubW9kKHRoaXMuY3VydmUucSk7aWYoIWMuZXF1YWxzKEJpZ0ludGVnZXIuWkVSTykpe3JldHVybiBmYWxzZX1iPWEueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShhLnopKS5tb2QodGhpcy5jdXJ2ZS5xKTtyZXR1cm4gYi5lcXVhbHMoQmlnSW50ZWdlci5aRVJPKX1mdW5jdGlvbiBwb2ludEZwSXNJbmZpbml0eSgpe2lmKCh0aGlzLng9PW51bGwpJiYodGhpcy55PT1udWxsKSl7cmV0dXJuIHRydWV9cmV0dXJuIHRoaXMuei5lcXVhbHMoQmlnSW50ZWdlci5aRVJPKSYmIXRoaXMueS50b0JpZ0ludGVnZXIoKS5lcXVhbHMoQmlnSW50ZWdlci5aRVJPKX1mdW5jdGlvbiBwb2ludEZwTmVnYXRlKCl7cmV0dXJuIG5ldyBFQ1BvaW50RnAodGhpcy5jdXJ2ZSx0aGlzLngsdGhpcy55Lm5lZ2F0ZSgpLHRoaXMueil9ZnVuY3Rpb24gcG9pbnRGcEFkZChsKXtpZih0aGlzLmlzSW5maW5pdHkoKSl7cmV0dXJuIGx9aWYobC5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzfXZhciBwPWwueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShsLnopKS5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgbz1sLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkobC56KSkubW9kKHRoaXMuY3VydmUucSk7aWYoQmlnSW50ZWdlci5aRVJPLmVxdWFscyhvKSl7aWYoQmlnSW50ZWdlci5aRVJPLmVxdWFscyhwKSl7cmV0dXJuIHRoaXMudHdpY2UoKX1yZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpfXZhciBqPW5ldyBCaWdJbnRlZ2VyKCIzIik7dmFyIGU9dGhpcy54LnRvQmlnSW50ZWdlcigpO3ZhciBuPXRoaXMueS50b0JpZ0ludGVnZXIoKTt2YXIgYz1sLngudG9CaWdJbnRlZ2VyKCk7dmFyIGs9bC55LnRvQmlnSW50ZWdlcigpO3ZhciBtPW8uc3F1YXJlKCk7dmFyIGk9bS5tdWx0aXBseShvKTt2YXIgZD1lLm11bHRpcGx5KG0pO3ZhciBnPXAuc3F1YXJlKCkubXVsdGlwbHkodGhpcy56KTt2YXIgYT1nLnN1YnRyYWN0KGQuc2hpZnRMZWZ0KDEpKS5tdWx0aXBseShsLnopLnN1YnRyYWN0KGkpLm11bHRpcGx5KG8pLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBoPWQubXVsdGlwbHkoaikubXVsdGlwbHkocCkuc3VidHJhY3Qobi5tdWx0aXBseShpKSkuc3VidHJhY3QoZy5tdWx0aXBseShwKSkubXVsdGlwbHkobC56KS5hZGQocC5tdWx0aXBseShpKSkubW9kKHRoaXMuY3VydmUucSk7dmFyIGY9aS5tdWx0aXBseSh0aGlzLnopLm11bHRpcGx5KGwueikubW9kKHRoaXMuY3VydmUucSk7cmV0dXJuIG5ldyBFQ1BvaW50RnAodGhpcy5jdXJ2ZSx0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKGEpLHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoaCksZil9ZnVuY3Rpb24gcG9pbnRGcFR3aWNlKCl7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzfWlmKHRoaXMueS50b0JpZ0ludGVnZXIoKS5zaWdudW0oKT09MCl7cmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKX12YXIgZz1uZXcgQmlnSW50ZWdlcigiMyIpO3ZhciBjPXRoaXMueC50b0JpZ0ludGVnZXIoKTt2YXIgaD10aGlzLnkudG9CaWdJbnRlZ2VyKCk7dmFyIGU9aC5tdWx0aXBseSh0aGlzLnopO3ZhciBqPWUubXVsdGlwbHkoaCkubW9kKHRoaXMuY3VydmUucSk7dmFyIGk9dGhpcy5jdXJ2ZS5hLnRvQmlnSW50ZWdlcigpO3ZhciBrPWMuc3F1YXJlKCkubXVsdGlwbHkoZyk7aWYoIUJpZ0ludGVnZXIuWkVSTy5lcXVhbHMoaSkpe2s9ay5hZGQodGhpcy56LnNxdWFyZSgpLm11bHRpcGx5KGkpKX1rPWsubW9kKHRoaXMuY3VydmUucSk7dmFyIGI9ay5zcXVhcmUoKS5zdWJ0cmFjdChjLnNoaWZ0TGVmdCgzKS5tdWx0aXBseShqKSkuc2hpZnRMZWZ0KDEpLm11bHRpcGx5KGUpLm1vZCh0aGlzLmN1cnZlLnEpO3ZhciBmPWsubXVsdGlwbHkoZykubXVsdGlwbHkoYykuc3VidHJhY3Qoai5zaGlmdExlZnQoMSkpLnNoaWZ0TGVmdCgyKS5tdWx0aXBseShqKS5zdWJ0cmFjdChrLnNxdWFyZSgpLm11bHRpcGx5KGspKS5tb2QodGhpcy5jdXJ2ZS5xKTt2YXIgZD1lLnNxdWFyZSgpLm11bHRpcGx5KGUpLnNoaWZ0TGVmdCgzKS5tb2QodGhpcy5jdXJ2ZS5xKTtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLmN1cnZlLHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoYiksdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihmKSxkKX1mdW5jdGlvbiBwb2ludEZwTXVsdGlwbHkoYil7aWYodGhpcy5pc0luZmluaXR5KCkpe3JldHVybiB0aGlzfWlmKGIuc2lnbnVtKCk9PTApe3JldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCl9dmFyIGc9Yjt2YXIgZj1nLm11bHRpcGx5KG5ldyBCaWdJbnRlZ2VyKCIzIikpO3ZhciBsPXRoaXMubmVnYXRlKCk7dmFyIGQ9dGhpczt2YXIgYztmb3IoYz1mLmJpdExlbmd0aCgpLTI7Yz4wOy0tYyl7ZD1kLnR3aWNlKCk7dmFyIGE9Zi50ZXN0Qml0KGMpO3ZhciBqPWcudGVzdEJpdChjKTtpZihhIT1qKXtkPWQuYWRkKGE/dGhpczpsKX19cmV0dXJuIGR9ZnVuY3Rpb24gcG9pbnRGcE11bHRpcGx5VHdvKGMsYSxiKXt2YXIgZDtpZihjLmJpdExlbmd0aCgpPmIuYml0TGVuZ3RoKCkpe2Q9Yy5iaXRMZW5ndGgoKS0xfWVsc2V7ZD1iLmJpdExlbmd0aCgpLTF9dmFyIGY9dGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpO3ZhciBlPXRoaXMuYWRkKGEpO3doaWxlKGQ+PTApe2Y9Zi50d2ljZSgpO2lmKGMudGVzdEJpdChkKSl7aWYoYi50ZXN0Qml0KGQpKXtmPWYuYWRkKGUpfWVsc2V7Zj1mLmFkZCh0aGlzKX19ZWxzZXtpZihiLnRlc3RCaXQoZCkpe2Y9Zi5hZGQoYSl9fS0tZH1yZXR1cm4gZn1FQ1BvaW50RnAucHJvdG90eXBlLmdldFg9cG9pbnRGcEdldFg7RUNQb2ludEZwLnByb3RvdHlwZS5nZXRZPXBvaW50RnBHZXRZO0VDUG9pbnRGcC5wcm90b3R5cGUuZXF1YWxzPXBvaW50RnBFcXVhbHM7RUNQb2ludEZwLnByb3RvdHlwZS5pc0luZmluaXR5PXBvaW50RnBJc0luZmluaXR5O0VDUG9pbnRGcC5wcm90b3R5cGUubmVnYXRlPXBvaW50RnBOZWdhdGU7RUNQb2ludEZwLnByb3RvdHlwZS5hZGQ9cG9pbnRGcEFkZDtFQ1BvaW50RnAucHJvdG90eXBlLnR3aWNlPXBvaW50RnBUd2ljZTtFQ1BvaW50RnAucHJvdG90eXBlLm11bHRpcGx5PXBvaW50RnBNdWx0aXBseTtFQ1BvaW50RnAucHJvdG90eXBlLm11bHRpcGx5VHdvPXBvaW50RnBNdWx0aXBseVR3bztmdW5jdGlvbiBFQ0N1cnZlRnAoZSxkLGMpe3RoaXMucT1lO3RoaXMuYT10aGlzLmZyb21CaWdJbnRlZ2VyKGQpO3RoaXMuYj10aGlzLmZyb21CaWdJbnRlZ2VyKGMpO3RoaXMuaW5maW5pdHk9bmV3IEVDUG9pbnRGcCh0aGlzLG51bGwsbnVsbCl9ZnVuY3Rpb24gY3VydmVGcEdldFEoKXtyZXR1cm4gdGhpcy5xfWZ1bmN0aW9uIGN1cnZlRnBHZXRBKCl7cmV0dXJuIHRoaXMuYX1mdW5jdGlvbiBjdXJ2ZUZwR2V0Qigpe3JldHVybiB0aGlzLmJ9ZnVuY3Rpb24gY3VydmVGcEVxdWFscyhhKXtpZihhPT10aGlzKXtyZXR1cm4gdHJ1ZX1yZXR1cm4odGhpcy5xLmVxdWFscyhhLnEpJiZ0aGlzLmEuZXF1YWxzKGEuYSkmJnRoaXMuYi5lcXVhbHMoYS5iKSl9ZnVuY3Rpb24gY3VydmVGcEdldEluZmluaXR5KCl7cmV0dXJuIHRoaXMuaW5maW5pdHl9ZnVuY3Rpb24gY3VydmVGcEZyb21CaWdJbnRlZ2VyKGEpe3JldHVybiBuZXcgRUNGaWVsZEVsZW1lbnRGcCh0aGlzLnEsYSl9ZnVuY3Rpb24gY3VydmVGcERlY29kZVBvaW50SGV4KGQpe3N3aXRjaChwYXJzZUludChkLnN1YnN0cigwLDIpLDE2KSl7Y2FzZSAwOnJldHVybiB0aGlzLmluZmluaXR5O2Nhc2UgMjpjYXNlIDM6cmV0dXJuIG51bGw7Y2FzZSA0OmNhc2UgNjpjYXNlIDc6dmFyIGE9KGQubGVuZ3RoLTIpLzI7dmFyIGM9ZC5zdWJzdHIoMixhKTt2YXIgYj1kLnN1YnN0cihhKzIsYSk7cmV0dXJuIG5ldyBFQ1BvaW50RnAodGhpcyx0aGlzLmZyb21CaWdJbnRlZ2VyKG5ldyBCaWdJbnRlZ2VyKGMsMTYpKSx0aGlzLmZyb21CaWdJbnRlZ2VyKG5ldyBCaWdJbnRlZ2VyKGIsMTYpKSk7ZGVmYXVsdDpyZXR1cm4gbnVsbH19RUNDdXJ2ZUZwLnByb3RvdHlwZS5nZXRRPWN1cnZlRnBHZXRRO0VDQ3VydmVGcC5wcm90b3R5cGUuZ2V0QT1jdXJ2ZUZwR2V0QTtFQ0N1cnZlRnAucHJvdG90eXBlLmdldEI9Y3VydmVGcEdldEI7RUNDdXJ2ZUZwLnByb3RvdHlwZS5lcXVhbHM9Y3VydmVGcEVxdWFscztFQ0N1cnZlRnAucHJvdG90eXBlLmdldEluZmluaXR5PWN1cnZlRnBHZXRJbmZpbml0eTtFQ0N1cnZlRnAucHJvdG90eXBlLmZyb21CaWdJbnRlZ2VyPWN1cnZlRnBGcm9tQmlnSW50ZWdlcjtFQ0N1cnZlRnAucHJvdG90eXBlLmRlY29kZVBvaW50SGV4PWN1cnZlRnBEZWNvZGVQb2ludEhleDsKLyohIChjKSBTdGVmYW4gVGhvbWFzIHwgaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW5qcy9iaXRjb2luanMtbGliCiAqLwpFQ0ZpZWxkRWxlbWVudEZwLnByb3RvdHlwZS5nZXRCeXRlTGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguZmxvb3IoKHRoaXMudG9CaWdJbnRlZ2VyKCkuYml0TGVuZ3RoKCkrNykvOCl9O0VDUG9pbnRGcC5wcm90b3R5cGUuZ2V0RW5jb2RlZD1mdW5jdGlvbihjKXt2YXIgZD1mdW5jdGlvbihoLGYpe3ZhciBnPWgudG9CeXRlQXJyYXlVbnNpZ25lZCgpO2lmKGY8Zy5sZW5ndGgpe2c9Zy5zbGljZShnLmxlbmd0aC1mKX1lbHNle3doaWxlKGY+Zy5sZW5ndGgpe2cudW5zaGlmdCgwKX19cmV0dXJuIGd9O3ZhciBhPXRoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpO3ZhciBlPXRoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpO3ZhciBiPWQoYSwzMik7aWYoYyl7aWYoZS5pc0V2ZW4oKSl7Yi51bnNoaWZ0KDIpfWVsc2V7Yi51bnNoaWZ0KDMpfX1lbHNle2IudW5zaGlmdCg0KTtiPWIuY29uY2F0KGQoZSwzMikpfXJldHVybiBifTtFQ1BvaW50RnAuZGVjb2RlRnJvbT1mdW5jdGlvbihnLGMpe3ZhciBmPWNbMF07dmFyIGU9Yy5sZW5ndGgtMTt2YXIgZD1jLnNsaWNlKDEsMStlLzIpO3ZhciBiPWMuc2xpY2UoMStlLzIsMStlKTtkLnVuc2hpZnQoMCk7Yi51bnNoaWZ0KDApO3ZhciBhPW5ldyBCaWdJbnRlZ2VyKGQpO3ZhciBoPW5ldyBCaWdJbnRlZ2VyKGIpO3JldHVybiBuZXcgRUNQb2ludEZwKGcsZy5mcm9tQmlnSW50ZWdlcihhKSxnLmZyb21CaWdJbnRlZ2VyKGgpKX07RUNQb2ludEZwLmRlY29kZUZyb21IZXg9ZnVuY3Rpb24oZyxjKXt2YXIgZj1jLnN1YnN0cigwLDIpO3ZhciBlPWMubGVuZ3RoLTI7dmFyIGQ9Yy5zdWJzdHIoMixlLzIpO3ZhciBiPWMuc3Vic3RyKDIrZS8yLGUvMik7dmFyIGE9bmV3IEJpZ0ludGVnZXIoZCwxNik7dmFyIGg9bmV3IEJpZ0ludGVnZXIoYiwxNik7cmV0dXJuIG5ldyBFQ1BvaW50RnAoZyxnLmZyb21CaWdJbnRlZ2VyKGEpLGcuZnJvbUJpZ0ludGVnZXIoaCkpfTtFQ1BvaW50RnAucHJvdG90eXBlLmFkZDJEPWZ1bmN0aW9uKGMpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXtyZXR1cm4gY31pZihjLmlzSW5maW5pdHkoKSl7cmV0dXJuIHRoaXN9aWYodGhpcy54LmVxdWFscyhjLngpKXtpZih0aGlzLnkuZXF1YWxzKGMueSkpe3JldHVybiB0aGlzLnR3aWNlKCl9cmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKX12YXIgZz1jLnguc3VidHJhY3QodGhpcy54KTt2YXIgZT1jLnkuc3VidHJhY3QodGhpcy55KTt2YXIgYT1lLmRpdmlkZShnKTt2YXIgZD1hLnNxdWFyZSgpLnN1YnRyYWN0KHRoaXMueCkuc3VidHJhY3QoYy54KTt2YXIgZj1hLm11bHRpcGx5KHRoaXMueC5zdWJ0cmFjdChkKSkuc3VidHJhY3QodGhpcy55KTtyZXR1cm4gbmV3IEVDUG9pbnRGcCh0aGlzLmN1cnZlLGQsZil9O0VDUG9pbnRGcC5wcm90b3R5cGUudHdpY2UyRD1mdW5jdGlvbigpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpc31pZih0aGlzLnkudG9CaWdJbnRlZ2VyKCkuc2lnbnVtKCk9PTApe3JldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCl9dmFyIGI9dGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcihCaWdJbnRlZ2VyLnZhbHVlT2YoMikpO3ZhciBlPXRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoQmlnSW50ZWdlci52YWx1ZU9mKDMpKTt2YXIgYT10aGlzLnguc3F1YXJlKCkubXVsdGlwbHkoZSkuYWRkKHRoaXMuY3VydmUuYSkuZGl2aWRlKHRoaXMueS5tdWx0aXBseShiKSk7dmFyIGM9YS5zcXVhcmUoKS5zdWJ0cmFjdCh0aGlzLngubXVsdGlwbHkoYikpO3ZhciBkPWEubXVsdGlwbHkodGhpcy54LnN1YnRyYWN0KGMpKS5zdWJ0cmFjdCh0aGlzLnkpO3JldHVybiBuZXcgRUNQb2ludEZwKHRoaXMuY3VydmUsYyxkKX07RUNQb2ludEZwLnByb3RvdHlwZS5tdWx0aXBseTJEPWZ1bmN0aW9uKGIpe2lmKHRoaXMuaXNJbmZpbml0eSgpKXtyZXR1cm4gdGhpc31pZihiLnNpZ251bSgpPT0wKXtyZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpfXZhciBnPWI7dmFyIGY9Zy5tdWx0aXBseShuZXcgQmlnSW50ZWdlcigiMyIpKTt2YXIgbD10aGlzLm5lZ2F0ZSgpO3ZhciBkPXRoaXM7dmFyIGM7Zm9yKGM9Zi5iaXRMZW5ndGgoKS0yO2M+MDstLWMpe2Q9ZC50d2ljZSgpO3ZhciBhPWYudGVzdEJpdChjKTt2YXIgaj1nLnRlc3RCaXQoYyk7aWYoYSE9ail7ZD1kLmFkZDJEKGE/dGhpczpsKX19cmV0dXJuIGR9O0VDUG9pbnRGcC5wcm90b3R5cGUuaXNPbkN1cnZlPWZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGk9dGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGY9dGhpcy5jdXJ2ZS5nZXRBKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGM9dGhpcy5jdXJ2ZS5nZXRCKCkudG9CaWdJbnRlZ2VyKCk7dmFyIGg9dGhpcy5jdXJ2ZS5nZXRRKCk7dmFyIGU9aS5tdWx0aXBseShpKS5tb2QoaCk7dmFyIGc9ZC5tdWx0aXBseShkKS5tdWx0aXBseShkKS5hZGQoZi5tdWx0aXBseShkKSkuYWRkKGMpLm1vZChoKTtyZXR1cm4gZS5lcXVhbHMoZyl9O0VDUG9pbnRGcC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iKCIrdGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCkudG9TdHJpbmcoKSsiLCIrdGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCkudG9TdHJpbmcoKSsiKSJ9O0VDUG9pbnRGcC5wcm90b3R5cGUudmFsaWRhdGU9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmN1cnZlLmdldFEoKTtpZih0aGlzLmlzSW5maW5pdHkoKSl7dGhyb3cgbmV3IEVycm9yKCJQb2ludCBpcyBhdCBpbmZpbml0eS4iKX12YXIgYT10aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKTt2YXIgYj10aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKTtpZihhLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk8MHx8YS5jb21wYXJlVG8oYy5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSkpPjApe3Rocm93IG5ldyBFcnJvcigieCBjb29yZGluYXRlIG91dCBvZiBib3VuZHMiKX1pZihiLmNvbXBhcmVUbyhCaWdJbnRlZ2VyLk9ORSk8MHx8Yi5jb21wYXJlVG8oYy5zdWJ0cmFjdChCaWdJbnRlZ2VyLk9ORSkpPjApe3Rocm93IG5ldyBFcnJvcigieSBjb29yZGluYXRlIG91dCBvZiBib3VuZHMiKX1pZighdGhpcy5pc09uQ3VydmUoKSl7dGhyb3cgbmV3IEVycm9yKCJQb2ludCBpcyBub3Qgb24gdGhlIGN1cnZlLiIpfWlmKHRoaXMubXVsdGlwbHkoYykuaXNJbmZpbml0eSgpKXt0aHJvdyBuZXcgRXJyb3IoIlBvaW50IGlzIG5vdCBhIHNjYWxhciBtdWx0aXBsZSBvZiBHLiIpfXJldHVybiB0cnVlfTsKLyohIGFzbjEtMS4wLjkuanMgKGMpIDIwMTMtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5hc24xPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMSl7S0pVUi5hc24xPXt9fUtKVVIuYXNuMS5BU04xVXRpbD1uZXcgZnVuY3Rpb24oKXt0aGlzLmludGVnZXJUb0J5dGVIZXg9ZnVuY3Rpb24oYSl7dmFyIGI9YS50b1N0cmluZygxNik7aWYoKGIubGVuZ3RoJTIpPT0xKXtiPSIwIitifXJldHVybiBifTt0aGlzLmJpZ0ludFRvTWluVHdvc0NvbXBsZW1lbnRzSGV4PWZ1bmN0aW9uKGope3ZhciBmPWoudG9TdHJpbmcoMTYpO2lmKGYuc3Vic3RyKDAsMSkhPSItIil7aWYoZi5sZW5ndGglMj09MSl7Zj0iMCIrZn1lbHNle2lmKCFmLm1hdGNoKC9eWzAtN10vKSl7Zj0iMDAiK2Z9fX1lbHNle3ZhciBhPWYuc3Vic3RyKDEpO3ZhciBlPWEubGVuZ3RoO2lmKGUlMj09MSl7ZSs9MX1lbHNle2lmKCFmLm1hdGNoKC9eWzAtN10vKSl7ZSs9Mn19dmFyIGc9IiI7Zm9yKHZhciBkPTA7ZDxlO2QrKyl7Zys9ImYifXZhciBjPW5ldyBCaWdJbnRlZ2VyKGcsMTYpO3ZhciBiPWMueG9yKGopLmFkZChCaWdJbnRlZ2VyLk9ORSk7Zj1iLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eLS8sIiIpfXJldHVybiBmfTt0aGlzLmdldFBFTVN0cmluZ0Zyb21IZXg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1LSlVSLmFzbjE7dmFyIGY9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShhKTt2YXIgZD1DcnlwdG9KUy5lbmMuQmFzZTY0LnN0cmluZ2lmeShmKTt2YXIgZT1kLnJlcGxhY2UoLyguezY0fSkvZywiJDFcclxuIik7ZT1lLnJlcGxhY2UoL1xyXG4kLywiIik7cmV0dXJuIi0tLS0tQkVHSU4gIitiKyItLS0tLVxyXG4iK2UrIlxyXG4tLS0tLUVORCAiK2IrIi0tLS0tXHJcbiJ9O3RoaXMubmV3T2JqZWN0PWZ1bmN0aW9uKGIpe3ZhciBnPUtKVVIuYXNuMTt2YXIgaz1PYmplY3Qua2V5cyhiKTtpZihrLmxlbmd0aCE9MSl7dGhyb3cia2V5IG9mIHBhcmFtIHNoYWxsIGJlIG9ubHkgb25lLiJ9dmFyIGo9a1swXTtpZigiOmJvb2w6aW50OmJpdHN0cjpvY3RzdHI6bnVsbDpvaWQ6ZW51bTp1dGY4c3RyOm51bXN0cjpwcm5zdHI6dGVsc3RyOmlhNXN0cjp1dGN0aW1lOmdlbnRpbWU6c2VxOnNldDp0YWc6Ii5pbmRleE9mKCI6IitqKyI6Iik9PS0xKXt0aHJvdyJ1bmRlZmluZWQga2V5OiAiK2p9aWYoaj09ImJvb2wiKXtyZXR1cm4gbmV3IGcuREVSQm9vbGVhbihiW2pdKX1pZihqPT0iaW50Iil7cmV0dXJuIG5ldyBnLkRFUkludGVnZXIoYltqXSl9aWYoaj09ImJpdHN0ciIpe3JldHVybiBuZXcgZy5ERVJCaXRTdHJpbmcoYltqXSl9aWYoaj09Im9jdHN0ciIpe3JldHVybiBuZXcgZy5ERVJPY3RldFN0cmluZyhiW2pdKX1pZihqPT0ibnVsbCIpe3JldHVybiBuZXcgZy5ERVJOdWxsKGJbal0pfWlmKGo9PSJvaWQiKXtyZXR1cm4gbmV3IGcuREVST2JqZWN0SWRlbnRpZmllcihiW2pdKX1pZihqPT0iZW51bSIpe3JldHVybiBuZXcgZy5ERVJFbnVtZXJhdGVkKGJbal0pfWlmKGo9PSJ1dGY4c3RyIil7cmV0dXJuIG5ldyBnLkRFUlVURjhTdHJpbmcoYltqXSl9aWYoaj09Im51bXN0ciIpe3JldHVybiBuZXcgZy5ERVJOdW1lcmljU3RyaW5nKGJbal0pfWlmKGo9PSJwcm5zdHIiKXtyZXR1cm4gbmV3IGcuREVSUHJpbnRhYmxlU3RyaW5nKGJbal0pfWlmKGo9PSJ0ZWxzdHIiKXtyZXR1cm4gbmV3IGcuREVSVGVsZXRleFN0cmluZyhiW2pdKX1pZihqPT0iaWE1c3RyIil7cmV0dXJuIG5ldyBnLkRFUklBNVN0cmluZyhiW2pdKX1pZihqPT0idXRjdGltZSIpe3JldHVybiBuZXcgZy5ERVJVVENUaW1lKGJbal0pfWlmKGo9PSJnZW50aW1lIil7cmV0dXJuIG5ldyBnLkRFUkdlbmVyYWxpemVkVGltZShiW2pdKX1pZihqPT0ic2VxIil7dmFyIG09YltqXTt2YXIgaD1bXTtmb3IodmFyIGU9MDtlPG0ubGVuZ3RoO2UrKyl7dmFyIGw9Zy5BU04xVXRpbC5uZXdPYmplY3QobVtlXSk7aC5wdXNoKGwpfXJldHVybiBuZXcgZy5ERVJTZXF1ZW5jZSh7YXJyYXk6aH0pfWlmKGo9PSJzZXQiKXt2YXIgbT1iW2pdO3ZhciBoPVtdO2Zvcih2YXIgZT0wO2U8bS5sZW5ndGg7ZSsrKXt2YXIgbD1nLkFTTjFVdGlsLm5ld09iamVjdChtW2VdKTtoLnB1c2gobCl9cmV0dXJuIG5ldyBnLkRFUlNldCh7YXJyYXk6aH0pfWlmKGo9PSJ0YWciKXt2YXIgYz1iW2pdO2lmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKT09PSJbb2JqZWN0IEFycmF5XSImJmMubGVuZ3RoPT0zKXt2YXIgZD1nLkFTTjFVdGlsLm5ld09iamVjdChjWzJdKTtyZXR1cm4gbmV3IGcuREVSVGFnZ2VkT2JqZWN0KHt0YWc6Y1swXSxleHBsaWNpdDpjWzFdLG9iajpkfSl9ZWxzZXt2YXIgZj17fTtpZihjLmV4cGxpY2l0IT09dW5kZWZpbmVkKXtmLmV4cGxpY2l0PWMuZXhwbGljaXR9aWYoYy50YWchPT11bmRlZmluZWQpe2YudGFnPWMudGFnfWlmKGMub2JqPT09dW5kZWZpbmVkKXt0aHJvdyJvYmogc2hhbGwgYmUgc3BlY2lmaWVkIGZvciAndGFnJy4ifWYub2JqPWcuQVNOMVV0aWwubmV3T2JqZWN0KGMub2JqKTtyZXR1cm4gbmV3IGcuREVSVGFnZ2VkT2JqZWN0KGYpfX19O3RoaXMuanNvblRvQVNOMUhFWD1mdW5jdGlvbihiKXt2YXIgYT10aGlzLm5ld09iamVjdChiKTtyZXR1cm4gYS5nZXRFbmNvZGVkSGV4KCl9fTtLSlVSLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQ9ZnVuY3Rpb24oYSl7dmFyIGo9IiI7dmFyIGs9cGFyc2VJbnQoYS5zdWJzdHIoMCwyKSwxNik7dmFyIGQ9TWF0aC5mbG9vcihrLzQwKTt2YXIgYz1rJTQwO3ZhciBqPWQrIi4iK2M7dmFyIGU9IiI7Zm9yKHZhciBmPTI7ZjxhLmxlbmd0aDtmKz0yKXt2YXIgZz1wYXJzZUludChhLnN1YnN0cihmLDIpLDE2KTt2YXIgaD0oIjAwMDAwMDAwIitnLnRvU3RyaW5nKDIpKS5zbGljZSgtOCk7ZT1lK2guc3Vic3RyKDEsNyk7aWYoaC5zdWJzdHIoMCwxKT09IjAiKXt2YXIgYj1uZXcgQmlnSW50ZWdlcihlLDIpO2o9aisiLiIrYi50b1N0cmluZygxMCk7ZT0iIn19cmV0dXJuIGp9O0tKVVIuYXNuMS5BU04xVXRpbC5vaWRJbnRUb0hleD1mdW5jdGlvbihmKXt2YXIgZT1mdW5jdGlvbihhKXt2YXIgaz1hLnRvU3RyaW5nKDE2KTtpZihrLmxlbmd0aD09MSl7az0iMCIra31yZXR1cm4ga307dmFyIGQ9ZnVuY3Rpb24obyl7dmFyIG49IiI7dmFyIGs9bmV3IEJpZ0ludGVnZXIobywxMCk7dmFyIGE9ay50b1N0cmluZygyKTt2YXIgbD03LWEubGVuZ3RoJTc7aWYobD09Nyl7bD0wfXZhciBxPSIiO2Zvcih2YXIgbT0wO208bDttKyspe3ErPSIwIn1hPXErYTtmb3IodmFyIG09MDttPGEubGVuZ3RoLTE7bSs9Nyl7dmFyIHA9YS5zdWJzdHIobSw3KTtpZihtIT1hLmxlbmd0aC03KXtwPSIxIitwfW4rPWUocGFyc2VJbnQocCwyKSl9cmV0dXJuIG59O2lmKCFmLm1hdGNoKC9eWzAtOS5dKyQvKSl7dGhyb3cibWFsZm9ybWVkIG9pZCBzdHJpbmc6ICIrZn12YXIgZz0iIjt2YXIgYj1mLnNwbGl0KCIuIik7dmFyIGo9cGFyc2VJbnQoYlswXSkqNDArcGFyc2VJbnQoYlsxXSk7Zys9ZShqKTtiLnNwbGljZSgwLDIpO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXtnKz1kKGJbY10pfXJldHVybiBnfTtLSlVSLmFzbjEuQVNOMU9iamVjdD1mdW5jdGlvbigpe3ZhciBjPXRydWU7dmFyIGI9bnVsbDt2YXIgZD0iMDAiO3ZhciBlPSIwMCI7dmFyIGE9IiI7dGhpcy5nZXRMZW5ndGhIZXhGcm9tVmFsdWU9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVj09InVuZGVmaW5lZCJ8fHRoaXMuaFY9PW51bGwpe3Rocm93InRoaXMuaFYgaXMgbnVsbCBvciB1bmRlZmluZWQuIn1pZih0aGlzLmhWLmxlbmd0aCUyPT0xKXt0aHJvdyJ2YWx1ZSBoZXggbXVzdCBiZSBldmVuIGxlbmd0aDogbj0iK2EubGVuZ3RoKyIsdj0iK3RoaXMuaFZ9dmFyIGk9dGhpcy5oVi5sZW5ndGgvMjt2YXIgaD1pLnRvU3RyaW5nKDE2KTtpZihoLmxlbmd0aCUyPT0xKXtoPSIwIitofWlmKGk8MTI4KXtyZXR1cm4gaH1lbHNle3ZhciBnPWgubGVuZ3RoLzI7aWYoZz4xNSl7dGhyb3ciQVNOLjEgbGVuZ3RoIHRvbyBsb25nIHRvIHJlcHJlc2VudCBieSA4eDogbiA9ICIraS50b1N0cmluZygxNil9dmFyIGY9MTI4K2c7cmV0dXJuIGYudG9TdHJpbmcoMTYpK2h9fTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmhUTFY9PW51bGx8fHRoaXMuaXNNb2RpZmllZCl7dGhpcy5oVj10aGlzLmdldEZyZXNoVmFsdWVIZXgoKTt0aGlzLmhMPXRoaXMuZ2V0TGVuZ3RoSGV4RnJvbVZhbHVlKCk7dGhpcy5oVExWPXRoaXMuaFQrdGhpcy5oTCt0aGlzLmhWO3RoaXMuaXNNb2RpZmllZD1mYWxzZX1yZXR1cm4gdGhpcy5oVExWfTt0aGlzLmdldFZhbHVlSGV4PWZ1bmN0aW9uKCl7dGhpcy5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFZ9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiIifX07S0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3RoaXMuZ2V0U3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc307dGhpcy5zZXRTdHJpbmc9ZnVuY3Rpb24oZCl7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5zPWQ7dGhpcy5oVj1zdG9oZXgodGhpcy5zKX07dGhpcy5zZXRTdHJpbmdIZXg9ZnVuY3Rpb24oZCl7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5zPW51bGw7dGhpcy5oVj1kfTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYz09InN0cmluZyIpe3RoaXMuc2V0U3RyaW5nKGMpfWVsc2V7aWYodHlwZW9mIGMuc3RyIT0idW5kZWZpbmVkIil7dGhpcy5zZXRTdHJpbmcoYy5zdHIpfWVsc2V7aWYodHlwZW9mIGMuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRTdHJpbmdIZXgoYy5oZXgpfX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuREVSQWJzdHJhY3RUaW1lPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5ERVJBYnN0cmFjdFRpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBiPW51bGw7dmFyIGE9bnVsbDt0aGlzLmxvY2FsRGF0ZVRvVVRDPWZ1bmN0aW9uKGYpe3V0Yz1mLmdldFRpbWUoKSsoZi5nZXRUaW1lem9uZU9mZnNldCgpKjYwMDAwKTt2YXIgZT1uZXcgRGF0ZSh1dGMpO3JldHVybiBlfTt0aGlzLmZvcm1hdERhdGU9ZnVuY3Rpb24obSxvLGUpe3ZhciBnPXRoaXMuemVyb1BhZGRpbmc7dmFyIG49dGhpcy5sb2NhbERhdGVUb1VUQyhtKTt2YXIgcD1TdHJpbmcobi5nZXRGdWxsWWVhcigpKTtpZihvPT0idXRjIil7cD1wLnN1YnN0cigyLDIpfXZhciBsPWcoU3RyaW5nKG4uZ2V0TW9udGgoKSsxKSwyKTt2YXIgcT1nKFN0cmluZyhuLmdldERhdGUoKSksMik7dmFyIGg9ZyhTdHJpbmcobi5nZXRIb3VycygpKSwyKTt2YXIgaT1nKFN0cmluZyhuLmdldE1pbnV0ZXMoKSksMik7dmFyIGo9ZyhTdHJpbmcobi5nZXRTZWNvbmRzKCkpLDIpO3ZhciByPXArbCtxK2graStqO2lmKGU9PT10cnVlKXt2YXIgZj1uLmdldE1pbGxpc2Vjb25kcygpO2lmKGYhPTApe3ZhciBrPWcoU3RyaW5nKGYpLDMpO2s9ay5yZXBsYWNlKC9bMF0rJC8sIiIpO3I9cisiLiIra319cmV0dXJuIHIrIloifTt0aGlzLnplcm9QYWRkaW5nPWZ1bmN0aW9uKGUsZCl7aWYoZS5sZW5ndGg+PWQpe3JldHVybiBlfXJldHVybiBuZXcgQXJyYXkoZC1lLmxlbmd0aCsxKS5qb2luKCIwIikrZX07dGhpcy5nZXRTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfTt0aGlzLnNldFN0cmluZz1mdW5jdGlvbihkKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLnM9ZDt0aGlzLmhWPXN0b2hleChkKX07dGhpcy5zZXRCeURhdGVWYWx1ZT1mdW5jdGlvbihoLGosZSxkLGYsZyl7dmFyIGk9bmV3IERhdGUoRGF0ZS5VVEMoaCxqLTEsZSxkLGYsZywwKSk7dGhpcy5zZXRCeURhdGUoaSl9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkFic3RyYWN0VGltZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZD1mdW5jdGlvbihiKXtLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPW51bGw7dGhpcy5zZXRCeUFTTjFPYmplY3RBcnJheT1mdW5jdGlvbihjKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLmFzbjFBcnJheT1jfTt0aGlzLmFwcGVuZEFTTjFPYmplY3Q9ZnVuY3Rpb24oYyl7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5hc24xQXJyYXkucHVzaChjKX07dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5hcnJheSE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMUFycmF5PWIuYXJyYXl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLkRFUkJvb2xlYW49ZnVuY3Rpb24oKXtLSlVSLmFzbjEuREVSQm9vbGVhbi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5oVD0iMDEiO3RoaXMuaFRMVj0iMDEwMWZmIn07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkJvb2xlYW4sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJJbnRlZ2VyPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJJbnRlZ2VyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwMiI7dGhpcy5zZXRCeUJpZ0ludGVnZXI9ZnVuY3Rpb24oYil7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj1LSlVSLmFzbjEuQVNOMVV0aWwuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXgoYil9O3RoaXMuc2V0QnlJbnRlZ2VyPWZ1bmN0aW9uKGMpe3ZhciBiPW5ldyBCaWdJbnRlZ2VyKFN0cmluZyhjKSwxMCk7dGhpcy5zZXRCeUJpZ0ludGVnZXIoYil9O3RoaXMuc2V0VmFsdWVIZXg9ZnVuY3Rpb24oYil7dGhpcy5oVj1ifTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5iaWdpbnQhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5QmlnSW50ZWdlcihhLmJpZ2ludCl9ZWxzZXtpZih0eXBlb2YgYVsiaW50Il0hPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5SW50ZWdlcihhWyJpbnQiXSl9ZWxzZXtpZih0eXBlb2YgYT09Im51bWJlciIpe3RoaXMuc2V0QnlJbnRlZ2VyKGEpfWVsc2V7aWYodHlwZW9mIGEuaGV4IT0idW5kZWZpbmVkIil7dGhpcy5zZXRWYWx1ZUhleChhLmhleCl9fX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkludGVnZXIsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJCaXRTdHJpbmc9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUkJpdFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5oVD0iMDMiO3RoaXMuc2V0SGV4VmFsdWVJbmNsdWRpbmdVbnVzZWRCaXRzPWZ1bmN0aW9uKGIpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMuaFY9Yn07dGhpcy5zZXRVbnVzZWRCaXRzQW5kSGV4VmFsdWU9ZnVuY3Rpb24oYixkKXtpZihiPDB8fDc8Yil7dGhyb3cidW51c2VkIGJpdHMgc2hhbGwgYmUgZnJvbSAwIHRvIDc6IHUgPSAiK2J9dmFyIGM9IjAiK2I7dGhpcy5oVExWPW51bGw7dGhpcy5pc01vZGlmaWVkPXRydWU7dGhpcy5oVj1jK2R9O3RoaXMuc2V0QnlCaW5hcnlTdHJpbmc9ZnVuY3Rpb24oZSl7ZT1lLnJlcGxhY2UoLzArJC8sIiIpO3ZhciBmPTgtZS5sZW5ndGglODtpZihmPT04KXtmPTB9Zm9yKHZhciBnPTA7Zzw9ZjtnKyspe2UrPSIwIn12YXIgaj0iIjtmb3IodmFyIGc9MDtnPGUubGVuZ3RoLTE7Zys9OCl7dmFyIGQ9ZS5zdWJzdHIoZyw4KTt2YXIgYz1wYXJzZUludChkLDIpLnRvU3RyaW5nKDE2KTtpZihjLmxlbmd0aD09MSl7Yz0iMCIrY31qKz1jfXRoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMuaFY9IjAiK2Yran07dGhpcy5zZXRCeUJvb2xlYW5BcnJheT1mdW5jdGlvbihkKXt2YXIgYz0iIjtmb3IodmFyIGI9MDtiPGQubGVuZ3RoO2IrKyl7aWYoZFtiXT09dHJ1ZSl7Yys9IjEifWVsc2V7Yys9IjAifX10aGlzLnNldEJ5QmluYXJ5U3RyaW5nKGMpfTt0aGlzLm5ld0ZhbHNlQXJyYXk9ZnVuY3Rpb24oZCl7dmFyIGI9bmV3IEFycmF5KGQpO2Zvcih2YXIgYz0wO2M8ZDtjKyspe2JbY109ZmFsc2V9cmV0dXJuIGJ9O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIiYmYS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eWzAtOWEtZl0rJC8pKXt0aGlzLnNldEhleFZhbHVlSW5jbHVkaW5nVW51c2VkQml0cyhhKX1lbHNle2lmKHR5cGVvZiBhLmhleCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0SGV4VmFsdWVJbmNsdWRpbmdVbnVzZWRCaXRzKGEuaGV4KX1lbHNle2lmKHR5cGVvZiBhLmJpbiE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlCaW5hcnlTdHJpbmcoYS5iaW4pfWVsc2V7aWYodHlwZW9mIGEuYXJyYXkhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5Qm9vbGVhbkFycmF5KGEuYXJyYXkpfX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJPY3RldFN0cmluZz1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVST2N0ZXRTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMDQifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVST2N0ZXRTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSTnVsbD1mdW5jdGlvbigpe0tKVVIuYXNuMS5ERVJOdWxsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSIwNSI7dGhpcy5oVExWPSIwNTAwIn07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUk51bGwsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyPWZ1bmN0aW9uKGMpe3ZhciBiPWZ1bmN0aW9uKGQpe3ZhciBlPWQudG9TdHJpbmcoMTYpO2lmKGUubGVuZ3RoPT0xKXtlPSIwIitlfXJldHVybiBlfTt2YXIgYT1mdW5jdGlvbihrKXt2YXIgaj0iIjt2YXIgZT1uZXcgQmlnSW50ZWdlcihrLDEwKTt2YXIgZD1lLnRvU3RyaW5nKDIpO3ZhciBmPTctZC5sZW5ndGglNztpZihmPT03KXtmPTB9dmFyIG09IiI7Zm9yKHZhciBnPTA7ZzxmO2crKyl7bSs9IjAifWQ9bStkO2Zvcih2YXIgZz0wO2c8ZC5sZW5ndGgtMTtnKz03KXt2YXIgbD1kLnN1YnN0cihnLDcpO2lmKGchPWQubGVuZ3RoLTcpe2w9IjEiK2x9ais9YihwYXJzZUludChsLDIpKX1yZXR1cm4gan07S0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuaFQ9IjA2Ijt0aGlzLnNldFZhbHVlSGV4PWZ1bmN0aW9uKGQpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMucz1udWxsO3RoaXMuaFY9ZH07dGhpcy5zZXRWYWx1ZU9pZFN0cmluZz1mdW5jdGlvbihmKXtpZighZi5tYXRjaCgvXlswLTkuXSskLykpe3Rocm93Im1hbGZvcm1lZCBvaWQgc3RyaW5nOiAiK2Z9dmFyIGc9IiI7dmFyIGQ9Zi5zcGxpdCgiLiIpO3ZhciBqPXBhcnNlSW50KGRbMF0pKjQwK3BhcnNlSW50KGRbMV0pO2crPWIoaik7ZC5zcGxpY2UoMCwyKTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7Zys9YShkW2VdKX10aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZTt0aGlzLnM9bnVsbDt0aGlzLmhWPWd9O3RoaXMuc2V0VmFsdWVOYW1lPWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBLSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0W2VdIT0idW5kZWZpbmVkIil7dmFyIGQ9S0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkTGlzdFtlXTt0aGlzLnNldFZhbHVlT2lkU3RyaW5nKGQpfWVsc2V7dGhyb3ciREVST2JqZWN0SWRlbnRpZmllciBvaWROYW1lIHVuZGVmaW5lZDogIitlfX07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGM9PSJzdHJpbmciJiZjLm1hdGNoKC9eWzAtMl0uWzAtOS5dKyQvKSl7dGhpcy5zZXRWYWx1ZU9pZFN0cmluZyhjKX1lbHNle2lmKEtKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3RbY10hPT11bmRlZmluZWQpe3RoaXMuc2V0VmFsdWVPaWRTdHJpbmcoS0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkTGlzdFtjXSl9ZWxzZXtpZih0eXBlb2YgYy5vaWQhPSJ1bmRlZmluZWQiKXt0aGlzLnNldFZhbHVlT2lkU3RyaW5nKGMub2lkKX1lbHNle2lmKHR5cGVvZiBjLmhleCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0VmFsdWVIZXgoYy5oZXgpfWVsc2V7aWYodHlwZW9mIGMubmFtZSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0VmFsdWVOYW1lKGMubmFtZSl9fX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuREVSRW51bWVyYXRlZD1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSRW51bWVyYXRlZC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5oVD0iMGEiO3RoaXMuc2V0QnlCaWdJbnRlZ2VyPWZ1bmN0aW9uKGIpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMuaFY9S0pVUi5hc24xLkFTTjFVdGlsLmJpZ0ludFRvTWluVHdvc0NvbXBsZW1lbnRzSGV4KGIpfTt0aGlzLnNldEJ5SW50ZWdlcj1mdW5jdGlvbihjKXt2YXIgYj1uZXcgQmlnSW50ZWdlcihTdHJpbmcoYyksMTApO3RoaXMuc2V0QnlCaWdJbnRlZ2VyKGIpfTt0aGlzLnNldFZhbHVlSGV4PWZ1bmN0aW9uKGIpe3RoaXMuaFY9Yn07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGFbImludCJdIT0idW5kZWZpbmVkIil7dGhpcy5zZXRCeUludGVnZXIoYVsiaW50Il0pfWVsc2V7aWYodHlwZW9mIGE9PSJudW1iZXIiKXt0aGlzLnNldEJ5SW50ZWdlcihhKX1lbHNle2lmKHR5cGVvZiBhLmhleCE9InVuZGVmaW5lZCIpe3RoaXMuc2V0VmFsdWVIZXgoYS5oZXgpfX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUkVudW1lcmF0ZWQsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5ERVJVVEY4U3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJVVEY4U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjBjIn07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlVURjhTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSTnVtZXJpY1N0cmluZz1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSTnVtZXJpY1N0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIxMiJ9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJOdW1lcmljU3RyaW5nLEtKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7S0pVUi5hc24xLkRFUlByaW50YWJsZVN0cmluZz1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjEzIn07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlByaW50YWJsZVN0cmluZyxLSlVSLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO0tKVVIuYXNuMS5ERVJUZWxldGV4U3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJUZWxldGV4U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjE0In07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlRlbGV0ZXhTdHJpbmcsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtLSlVSLmFzbjEuREVSSUE1U3RyaW5nPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJJQTVTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMTYifTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSSUE1U3RyaW5nLEtKVVIuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7S0pVUi5hc24xLkRFUlVUQ1RpbWU9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUlVUQ1RpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5oVD0iMTciO3RoaXMuc2V0QnlEYXRlPWZ1bmN0aW9uKGIpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMuZGF0ZT1iO3RoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLCJ1dGMiKTt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfTt0aGlzLmdldEZyZXNoVmFsdWVIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5kYXRlPT0idW5kZWZpbmVkIiYmdHlwZW9mIHRoaXMucz09InVuZGVmaW5lZCIpe3RoaXMuZGF0ZT1uZXcgRGF0ZSgpO3RoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLCJ1dGMiKTt0aGlzLmhWPXN0b2hleCh0aGlzLnMpfXJldHVybiB0aGlzLmhWfTtpZihhIT09dW5kZWZpbmVkKXtpZihhLnN0ciE9PXVuZGVmaW5lZCl7dGhpcy5zZXRTdHJpbmcoYS5zdHIpfWVsc2V7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLm1hdGNoKC9eWzAtOV17MTJ9WiQvKSl7dGhpcy5zZXRTdHJpbmcoYSl9ZWxzZXtpZihhLmhleCE9PXVuZGVmaW5lZCl7dGhpcy5zZXRTdHJpbmdIZXgoYS5oZXgpfWVsc2V7aWYoYS5kYXRlIT09dW5kZWZpbmVkKXt0aGlzLnNldEJ5RGF0ZShhLmRhdGUpfX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJVVENUaW1lLEtKVVIuYXNuMS5ERVJBYnN0cmFjdFRpbWUpO0tKVVIuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWU9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLkRFUkdlbmVyYWxpemVkVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIxOCI7dGhpcy53aXRoTWlsbGlzPWZhbHNlO3RoaXMuc2V0QnlEYXRlPWZ1bmN0aW9uKGIpe3RoaXMuaFRMVj1udWxsO3RoaXMuaXNNb2RpZmllZD10cnVlO3RoaXMuZGF0ZT1iO3RoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLCJnZW4iLHRoaXMud2l0aE1pbGxpcyk7dGhpcy5oVj1zdG9oZXgodGhpcy5zKX07dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kYXRlPT09dW5kZWZpbmVkJiZ0aGlzLnM9PT11bmRlZmluZWQpe3RoaXMuZGF0ZT1uZXcgRGF0ZSgpO3RoaXMucz10aGlzLmZvcm1hdERhdGUodGhpcy5kYXRlLCJnZW4iLHRoaXMud2l0aE1pbGxpcyk7dGhpcy5oVj1zdG9oZXgodGhpcy5zKX1yZXR1cm4gdGhpcy5oVn07aWYoYSE9PXVuZGVmaW5lZCl7aWYoYS5zdHIhPT11bmRlZmluZWQpe3RoaXMuc2V0U3RyaW5nKGEuc3RyKX1lbHNle2lmKHR5cGVvZiBhPT0ic3RyaW5nIiYmYS5tYXRjaCgvXlswLTldezE0fVokLykpe3RoaXMuc2V0U3RyaW5nKGEpfWVsc2V7aWYoYS5oZXghPT11bmRlZmluZWQpe3RoaXMuc2V0U3RyaW5nSGV4KGEuaGV4KX1lbHNle2lmKGEuZGF0ZSE9PXVuZGVmaW5lZCl7dGhpcy5zZXRCeURhdGUoYS5kYXRlKX19fX1pZihhLm1pbGxpcz09PXRydWUpe3RoaXMud2l0aE1pbGxpcz10cnVlfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUsS0pVUi5hc24xLkRFUkFic3RyYWN0VGltZSk7S0pVUi5hc24xLkRFUlNlcXVlbmNlPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS5ERVJTZXF1ZW5jZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmhUPSIzMCI7dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7dmFyIGM9IiI7Zm9yKHZhciBiPTA7Yjx0aGlzLmFzbjFBcnJheS5sZW5ndGg7YisrKXt2YXIgZD10aGlzLmFzbjFBcnJheVtiXTtjKz1kLmdldEVuY29kZWRIZXgoKX10aGlzLmhWPWM7cmV0dXJuIHRoaXMuaFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuREVSU2VxdWVuY2UsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCk7S0pVUi5hc24xLkRFUlNldD1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSU2V0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaFQ9IjMxIjt0aGlzLnNvcnRGbGFnPXRydWU7dGhpcy5nZXRGcmVzaFZhbHVlSGV4PWZ1bmN0aW9uKCl7dmFyIGI9bmV3IEFycmF5KCk7Zm9yKHZhciBjPTA7Yzx0aGlzLmFzbjFBcnJheS5sZW5ndGg7YysrKXt2YXIgZD10aGlzLmFzbjFBcnJheVtjXTtiLnB1c2goZC5nZXRFbmNvZGVkSGV4KCkpfWlmKHRoaXMuc29ydEZsYWc9PXRydWUpe2Iuc29ydCgpfXRoaXMuaFY9Yi5qb2luKCIiKTtyZXR1cm4gdGhpcy5oVn07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5zb3J0ZmxhZyE9InVuZGVmaW5lZCImJmEuc29ydGZsYWc9PWZhbHNlKXt0aGlzLnNvcnRGbGFnPWZhbHNlfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5ERVJTZXQsS0pVUi5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCk7S0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdD1mdW5jdGlvbihhKXtLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmhUPSJhMCI7dGhpcy5oVj0iIjt0aGlzLmlzRXhwbGljaXQ9dHJ1ZTt0aGlzLmFzbjFPYmplY3Q9bnVsbDt0aGlzLnNldEFTTjFPYmplY3Q9ZnVuY3Rpb24oYixjLGQpe3RoaXMuaFQ9Yzt0aGlzLmlzRXhwbGljaXQ9Yjt0aGlzLmFzbjFPYmplY3Q9ZDtpZih0aGlzLmlzRXhwbGljaXQpe3RoaXMuaFY9dGhpcy5hc24xT2JqZWN0LmdldEVuY29kZWRIZXgoKTt0aGlzLmhUTFY9bnVsbDt0aGlzLmlzTW9kaWZpZWQ9dHJ1ZX1lbHNle3RoaXMuaFY9bnVsbDt0aGlzLmhUTFY9ZC5nZXRFbmNvZGVkSGV4KCk7dGhpcy5oVExWPXRoaXMuaFRMVi5yZXBsYWNlKC9eLi4vLGMpO3RoaXMuaXNNb2RpZmllZD1mYWxzZX19O3RoaXMuZ2V0RnJlc2hWYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLnRhZyE9InVuZGVmaW5lZCIpe3RoaXMuaFQ9YS50YWd9aWYodHlwZW9mIGEuZXhwbGljaXQhPSJ1bmRlZmluZWQiKXt0aGlzLmlzRXhwbGljaXQ9YS5leHBsaWNpdH1pZih0eXBlb2YgYS5vYmohPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFPYmplY3Q9YS5vYmo7dGhpcy5zZXRBU04xT2JqZWN0KHRoaXMuaXNFeHBsaWNpdCx0aGlzLmhULHRoaXMuYXNuMU9iamVjdCl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7Ci8qISBhc24xaGV4LTEuMS42LmpzIChjKSAyMDEyLTIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCnZhciBBU04xSEVYPW5ldyBmdW5jdGlvbigpe3RoaXMuZ2V0Qnl0ZUxlbmd0aE9mTF9BdE9iaj1mdW5jdGlvbihiLGMpe2lmKGIuc3Vic3RyaW5nKGMrMixjKzMpIT0iOCIpe3JldHVybiAxfXZhciBhPXBhcnNlSW50KGIuc3Vic3RyaW5nKGMrMyxjKzQpKTtpZihhPT0wKXtyZXR1cm4gLTF9aWYoMDxhJiZhPDEwKXtyZXR1cm4gYSsxfXJldHVybiAtMn07dGhpcy5nZXRIZXhPZkxfQXRPYmo9ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzLmdldEJ5dGVMZW5ndGhPZkxfQXRPYmooYixjKTtpZihhPDEpe3JldHVybiIifXJldHVybiBiLnN1YnN0cmluZyhjKzIsYysyK2EqMil9O3RoaXMuZ2V0SW50T2ZMX0F0T2JqPWZ1bmN0aW9uKGMsZCl7dmFyIGI9dGhpcy5nZXRIZXhPZkxfQXRPYmooYyxkKTtpZihiPT0iIil7cmV0dXJuIC0xfXZhciBhO2lmKHBhcnNlSW50KGIuc3Vic3RyaW5nKDAsMSkpPDgpe2E9bmV3IEJpZ0ludGVnZXIoYiwxNil9ZWxzZXthPW5ldyBCaWdJbnRlZ2VyKGIuc3Vic3RyaW5nKDIpLDE2KX1yZXR1cm4gYS5pbnRWYWx1ZSgpfTt0aGlzLmdldFN0YXJ0UG9zT2ZWX0F0T2JqPWZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcy5nZXRCeXRlTGVuZ3RoT2ZMX0F0T2JqKGIsYyk7aWYoYTwwKXtyZXR1cm4gYX1yZXR1cm4gYysoYSsxKSoyfTt0aGlzLmdldEhleE9mVl9BdE9iaj1mdW5jdGlvbihjLGQpe3ZhciBiPXRoaXMuZ2V0U3RhcnRQb3NPZlZfQXRPYmooYyxkKTt2YXIgYT10aGlzLmdldEludE9mTF9BdE9iaihjLGQpO3JldHVybiBjLnN1YnN0cmluZyhiLGIrYSoyKX07dGhpcy5nZXRIZXhPZlRMVl9BdE9iaj1mdW5jdGlvbihjLGUpe3ZhciBiPWMuc3Vic3RyKGUsMik7dmFyIGQ9dGhpcy5nZXRIZXhPZkxfQXRPYmooYyxlKTt2YXIgYT10aGlzLmdldEhleE9mVl9BdE9iaihjLGUpO3JldHVybiBiK2QrYX07dGhpcy5nZXRQb3NPZk5leHRTaWJsaW5nX0F0T2JqPWZ1bmN0aW9uKGMsZCl7dmFyIGI9dGhpcy5nZXRTdGFydFBvc09mVl9BdE9iaihjLGQpO3ZhciBhPXRoaXMuZ2V0SW50T2ZMX0F0T2JqKGMsZCk7cmV0dXJuIGIrYSoyfTt0aGlzLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaj1mdW5jdGlvbihmLGope3ZhciBjPW5ldyBBcnJheSgpO3ZhciBpPXRoaXMuZ2V0U3RhcnRQb3NPZlZfQXRPYmooZixqKTtjLnB1c2goaSk7dmFyIGI9dGhpcy5nZXRJbnRPZkxfQXRPYmooZixqKTt2YXIgZz1pO3ZhciBkPTA7d2hpbGUoMSl7dmFyIGU9dGhpcy5nZXRQb3NPZk5leHRTaWJsaW5nX0F0T2JqKGYsZyk7aWYoZT09bnVsbHx8KGUtaT49KGIqMikpKXticmVha31pZihkPj0yMDApe2JyZWFrfWMucHVzaChlKTtnPWU7ZCsrfXJldHVybiBjfTt0aGlzLmdldE50aENoaWxkSW5kZXhfQXRPYmo9ZnVuY3Rpb24oZCxiLGUpe3ZhciBjPXRoaXMuZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQsYik7cmV0dXJuIGNbZV19O3RoaXMuZ2V0RGVjZW5kYW50SW5kZXhCeU50aExpc3Q9ZnVuY3Rpb24oZSxkLGMpe2lmKGMubGVuZ3RoPT0wKXtyZXR1cm4gZH12YXIgZj1jLnNoaWZ0KCk7dmFyIGI9dGhpcy5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSxkKTtyZXR1cm4gdGhpcy5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChlLGJbZl0sYyl9O3RoaXMuZ2V0RGVjZW5kYW50SGV4VExWQnlOdGhMaXN0PWZ1bmN0aW9uKGQsYyxiKXt2YXIgYT10aGlzLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGQsYyxiKTtyZXR1cm4gdGhpcy5nZXRIZXhPZlRMVl9BdE9iaihkLGEpfTt0aGlzLmdldERlY2VuZGFudEhleFZCeU50aExpc3Q9ZnVuY3Rpb24oZCxjLGIpe3ZhciBhPXRoaXMuZ2V0RGVjZW5kYW50SW5kZXhCeU50aExpc3QoZCxjLGIpO3JldHVybiB0aGlzLmdldEhleE9mVl9BdE9iaihkLGEpfX07QVNOMUhFWC5nZXRWYnlMaXN0PWZ1bmN0aW9uKGQsYyxiLGUpe3ZhciBhPXRoaXMuZ2V0RGVjZW5kYW50SW5kZXhCeU50aExpc3QoZCxjLGIpO2lmKGE9PT11bmRlZmluZWQpe3Rocm93ImNhbid0IGZpbmQgbnRoTGlzdCBvYmplY3QifWlmKGUhPT11bmRlZmluZWQpe2lmKGQuc3Vic3RyKGEsMikhPWUpe3Rocm93ImNoZWNraW5nIHRhZyBkb2Vzbid0IG1hdGNoOiAiK2Quc3Vic3RyKGEsMikrIiE9IitlfX1yZXR1cm4gdGhpcy5nZXRIZXhPZlZfQXRPYmooZCxhKX07QVNOMUhFWC5oZXh0b29pZHN0cj1mdW5jdGlvbihlKXt2YXIgaD1mdW5jdGlvbihiLGEpe2lmKGIubGVuZ3RoPj1hKXtyZXR1cm4gYn1yZXR1cm4gbmV3IEFycmF5KGEtYi5sZW5ndGgrMSkuam9pbigiMCIpK2J9O3ZhciBsPVtdO3ZhciBvPWUuc3Vic3RyKDAsMik7dmFyIGY9cGFyc2VJbnQobywxNik7bFswXT1uZXcgU3RyaW5nKE1hdGguZmxvb3IoZi80MCkpO2xbMV09bmV3IFN0cmluZyhmJTQwKTt2YXIgbT1lLnN1YnN0cigyKTt2YXIgaz1bXTtmb3IodmFyIGc9MDtnPG0ubGVuZ3RoLzI7ZysrKXtrLnB1c2gocGFyc2VJbnQobS5zdWJzdHIoZyoyLDIpLDE2KSl9dmFyIGo9W107dmFyIGQ9IiI7Zm9yKHZhciBnPTA7ZzxrLmxlbmd0aDtnKyspe2lmKGtbZ10mMTI4KXtkPWQraCgoa1tnXSYxMjcpLnRvU3RyaW5nKDIpLDcpfWVsc2V7ZD1kK2goKGtbZ10mMTI3KS50b1N0cmluZygyKSw3KTtqLnB1c2gobmV3IFN0cmluZyhwYXJzZUludChkLDIpKSk7ZD0iIn19dmFyIG49bC5qb2luKCIuIik7aWYoai5sZW5ndGg+MCl7bj1uKyIuIitqLmpvaW4oIi4iKX1yZXR1cm4gbn07QVNOMUhFWC5kdW1wPWZ1bmN0aW9uKGUsYyxrLGcpe3ZhciBvPWZ1bmN0aW9uKHcsaSl7aWYody5sZW5ndGg8PWkqMil7cmV0dXJuIHd9ZWxzZXt2YXIgdj13LnN1YnN0cigwLGkpKyIuLih0b3RhbCAiK3cubGVuZ3RoLzIrImJ5dGVzKS4uIit3LnN1YnN0cih3Lmxlbmd0aC1pLGkpO3JldHVybiB2fX07aWYoYz09PXVuZGVmaW5lZCl7Yz17b21taXRfbG9uZ19vY3RldDozMn19aWYoaz09PXVuZGVmaW5lZCl7az0wfWlmKGc9PT11bmRlZmluZWQpe2c9IiJ9dmFyIHI9Yy5vbW1pdF9sb25nX29jdGV0O2lmKGUuc3Vic3RyKGssMik9PSIwMSIpe3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsayk7aWYoaD09IjAwIil7cmV0dXJuIGcrIkJPT0xFQU4gRkFMU0VcbiJ9ZWxzZXtyZXR1cm4gZysiQk9PTEVBTiBUUlVFXG4ifX1pZihlLnN1YnN0cihrLDIpPT0iMDIiKXt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO3JldHVybiBnKyJJTlRFR0VSICIrbyhoLHIpKyJcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjAzIil7dmFyIGg9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKTtyZXR1cm4gZysiQklUU1RSSU5HICIrbyhoLHIpKyJcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjA0Iil7dmFyIGg9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKTtpZihBU04xSEVYLmlzQVNOMUhFWChoKSl7dmFyIGo9ZysiT0NURVRTVFJJTkcsIGVuY2Fwc3VsYXRlc1xuIjtqPWorQVNOMUhFWC5kdW1wKGgsYywwLGcrIiAgIik7cmV0dXJuIGp9ZWxzZXtyZXR1cm4gZysiT0NURVRTVFJJTkcgIitvKGgscikrIlxuIn19aWYoZS5zdWJzdHIoaywyKT09IjA1Iil7cmV0dXJuIGcrIk5VTExcbiJ9aWYoZS5zdWJzdHIoaywyKT09IjA2Iil7dmFyIGw9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKTt2YXIgYT1LSlVSLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQobCk7dmFyIG49S0pVUi5hc24xLng1MDkuT0lELm9pZDJuYW1lKGEpO3ZhciBiPWEucmVwbGFjZSgvXC4vZywiICIpO2lmKG4hPSIiKXtyZXR1cm4gZysiT2JqZWN0SWRlbnRpZmllciAiK24rIiAoIitiKyIpXG4ifWVsc2V7cmV0dXJuIGcrIk9iamVjdElkZW50aWZpZXIgKCIrYisiKVxuIn19aWYoZS5zdWJzdHIoaywyKT09IjBjIil7cmV0dXJuIGcrIlVURjhTdHJpbmcgJyIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyInXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxMyIpe3JldHVybiBnKyJQcmludGFibGVTdHJpbmcgJyIraGV4dG91dGY4KEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsaykpKyInXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxNCIpe3JldHVybiBnKyJUZWxldGV4U3RyaW5nICciK2hleHRvdXRmOChBU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspKSsiJ1xuIn1pZihlLnN1YnN0cihrLDIpPT0iMTYiKXtyZXR1cm4gZysiSUE1U3RyaW5nICciK2hleHRvdXRmOChBU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspKSsiJ1xuIn1pZihlLnN1YnN0cihrLDIpPT0iMTciKXtyZXR1cm4gZysiVVRDVGltZSAiK2hleHRvdXRmOChBU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspKSsiXG4ifWlmKGUuc3Vic3RyKGssMik9PSIxOCIpe3JldHVybiBnKyJHZW5lcmFsaXplZFRpbWUgIitoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZSxrKSkrIlxuIn1pZihlLnN1YnN0cihrLDIpPT0iMzAiKXtpZihlLnN1YnN0cihrLDQpPT0iMzAwMCIpe3JldHVybiBnKyJTRVFVRU5DRSB7fVxuIn12YXIgaj1nKyJTRVFVRU5DRVxuIjt2YXIgZD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLGspO3ZhciBmPWM7aWYoKGQubGVuZ3RoPT0yfHxkLmxlbmd0aD09MykmJmUuc3Vic3RyKGRbMF0sMik9PSIwNiImJmUuc3Vic3RyKGRbZC5sZW5ndGgtMV0sMik9PSIwNCIpe3ZhciB0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGUsZFswXSk7dmFyIGE9S0pVUi5hc24xLkFTTjFVdGlsLm9pZEhleFRvSW50KHQpO3ZhciBuPUtKVVIuYXNuMS54NTA5Lk9JRC5vaWQybmFtZShhKTt2YXIgcD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKTtwLng1MDlFeHROYW1lPW47Zj1wfWZvcih2YXIgcT0wO3E8ZC5sZW5ndGg7cSsrKXtqPWorQVNOMUhFWC5kdW1wKGUsZixkW3FdLGcrIiAgIil9cmV0dXJuIGp9aWYoZS5zdWJzdHIoaywyKT09IjMxIil7dmFyIGo9ZysiU0VUXG4iO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGUsayk7Zm9yKHZhciBxPTA7cTxkLmxlbmd0aDtxKyspe2o9aitBU04xSEVYLmR1bXAoZSxjLGRbcV0sZysiICAiKX1yZXR1cm4gan12YXIgdT1wYXJzZUludChlLnN1YnN0cihrLDIpLDE2KTtpZigodSYxMjgpIT0wKXt2YXIgbT11JjMxO2lmKCh1JjMyKSE9MCl7dmFyIGo9ZysiWyIrbSsiXVxuIjt2YXIgZD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLGspO2Zvcih2YXIgcT0wO3E8ZC5sZW5ndGg7cSsrKXtqPWorQVNOMUhFWC5kdW1wKGUsYyxkW3FdLGcrIiAgIil9cmV0dXJuIGp9ZWxzZXt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspO2lmKGguc3Vic3RyKDAsOCk9PSI2ODc0NzQ3MCIpe2g9aGV4dG91dGY4KGgpfWlmKGMueDUwOUV4dE5hbWU9PT0ic3ViamVjdEFsdE5hbWUiJiZtPT0yKXtoPWhleHRvdXRmOChoKX12YXIgaj1nKyJbIittKyJdICIraCsiXG4iO3JldHVybiBqfX1yZXR1cm4gZysiVU5LTk9XTigiK2Uuc3Vic3RyKGssMikrIikgIitBU04xSEVYLmdldEhleE9mVl9BdE9iaihlLGspKyJcbiJ9O0FTTjFIRVguaXNBU04xSEVYPWZ1bmN0aW9uKGQpe2lmKGQubGVuZ3RoJTI9PTEpe3JldHVybiBmYWxzZX12YXIgYz1BU04xSEVYLmdldEludE9mTF9BdE9iaihkLDApO3ZhciBiPWQuc3Vic3RyKDAsMik7dmFyIGU9QVNOMUhFWC5nZXRIZXhPZkxfQXRPYmooZCwwKTt2YXIgYT1kLmxlbmd0aC1iLmxlbmd0aC1lLmxlbmd0aDtpZihhPT1jKjIpe3JldHVybiB0cnVlfXJldHVybiBmYWxzZX07Ci8qISBhc24xeDUwOS0xLjAuMTMuanMgKGMpIDIwMTMtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5hc24xPT0idW5kZWZpbmVkInx8IUtKVVIuYXNuMSl7S0pVUi5hc24xPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjEueDUwOT09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEueDUwOSl7S0pVUi5hc24xLng1MDk9e319S0pVUi5hc24xLng1MDkuQ2VydGlmaWNhdGU9ZnVuY3Rpb24oZyl7S0pVUi5hc24xLng1MDkuQ2VydGlmaWNhdGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBiPW51bGw7dmFyIGQ9bnVsbDt2YXIgZj1udWxsO3ZhciBjPW51bGw7dmFyIGE9bnVsbDt2YXIgZT1udWxsO3RoaXMuc2V0UnNhUHJ2S2V5QnlQRU1hbmRQYXNzPWZ1bmN0aW9uKGksayl7dmFyIGg9UEtDUzVQS0VZLmdldERlY3J5cHRlZEtleUhleChpLGspO3ZhciBqPW5ldyBSU0FLZXkoKTtqLnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcoaCk7dGhpcy5wcnZLZXk9an07dGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhpcy5hc24xU2lnbmF0dXJlQWxnPXRoaXMuYXNuMVRCU0NlcnQuYXNuMVNpZ25hdHVyZUFsZztzaWc9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOiJTSEExd2l0aFJTQSJ9KTtzaWcuaW5pdCh0aGlzLnBydktleSk7c2lnLnVwZGF0ZUhleCh0aGlzLmFzbjFUQlNDZXJ0LmdldEVuY29kZWRIZXgoKSk7dGhpcy5oZXhTaWc9c2lnLnNpZ24oKTt0aGlzLmFzbjFTaWc9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK3RoaXMuaGV4U2lnfSk7dmFyIGg9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuYXNuMVRCU0NlcnQsdGhpcy5hc24xU2lnbmF0dXJlQWxnLHRoaXMuYXNuMVNpZ119KTt0aGlzLmhUTFY9aC5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlfTt0aGlzLnNldFNpZ25hdHVyZUhleD1mdW5jdGlvbihoKXt0aGlzLmFzbjFTaWduYXR1cmVBbGc9dGhpcy5hc24xVEJTQ2VydC5hc24xU2lnbmF0dXJlQWxnO3RoaXMuaGV4U2lnPWg7dGhpcy5hc24xU2lnPW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIit0aGlzLmhleFNpZ30pO3ZhciBpPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmFzbjFUQlNDZXJ0LHRoaXMuYXNuMVNpZ25hdHVyZUFsZyx0aGlzLmFzbjFTaWddfSk7dGhpcy5oVExWPWkuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5pc01vZGlmaWVkPT1mYWxzZSYmdGhpcy5oVExWIT1udWxsKXtyZXR1cm4gdGhpcy5oVExWfXRocm93Im5vdCBzaWduZWQgeWV0In07dGhpcy5nZXRQRU1TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgaj10aGlzLmdldEVuY29kZWRIZXgoKTt2YXIgaD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGopO3ZhciBpPUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KGgpO3ZhciBrPWkucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTtyZXR1cm4iLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tXHJcbiIraysiXHJcbi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS1cclxuIn07aWYodHlwZW9mIGchPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZy50YnNjZXJ0b2JqIT0idW5kZWZpbmVkIil7dGhpcy5hc24xVEJTQ2VydD1nLnRic2NlcnRvYmp9aWYodHlwZW9mIGcucHJ2a2V5b2JqIT0idW5kZWZpbmVkIil7dGhpcy5wcnZLZXk9Zy5wcnZrZXlvYmp9ZWxzZXtpZih0eXBlb2YgZy5yc2FwcnZrZXkhPSJ1bmRlZmluZWQiKXt0aGlzLnBydktleT1nLnJzYXBydmtleX1lbHNle2lmKCh0eXBlb2YgZy5yc2FwcnZwZW0hPSJ1bmRlZmluZWQiKSYmKHR5cGVvZiBnLnJzYXBydnBhcyE9InVuZGVmaW5lZCIpKXt0aGlzLnNldFJzYVBydktleUJ5UEVNYW5kUGFzcyhnLnJzYXBydnBlbSxnLnJzYXBydnBhcyl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuVEJTQ2VydGlmaWNhdGU9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLng1MDkuVEJTQ2VydGlmaWNhdGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuX2luaXRpYWxpemU9ZnVuY3Rpb24oKXt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTt0aGlzLmFzbjFWZXJzaW9uPW5ldyBLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHsiaW50IjoyfSl9KTt0aGlzLmFzbjFTZXJpYWxOdW1iZXI9bnVsbDt0aGlzLmFzbjFTaWduYXR1cmVBbGc9bnVsbDt0aGlzLmFzbjFJc3N1ZXI9bnVsbDt0aGlzLmFzbjFOb3RCZWZvcmU9bnVsbDt0aGlzLmFzbjFOb3RBZnRlcj1udWxsO3RoaXMuYXNuMVN1YmplY3Q9bnVsbDt0aGlzLmFzbjFTdWJqUEtleT1udWxsO3RoaXMuZXh0ZW5zaW9uc0FycmF5PW5ldyBBcnJheSgpfTt0aGlzLnNldFNlcmlhbE51bWJlckJ5UGFyYW09ZnVuY3Rpb24oYil7dGhpcy5hc24xU2VyaWFsTnVtYmVyPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcihiKX07dGhpcy5zZXRTaWduYXR1cmVBbGdCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMVNpZ25hdHVyZUFsZz1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcihiKX07dGhpcy5zZXRJc3N1ZXJCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUlzc3Vlcj1uZXcgS0pVUi5hc24xLng1MDkuWDUwME5hbWUoYil9O3RoaXMuc2V0Tm90QmVmb3JlQnlQYXJhbT1mdW5jdGlvbihiKXt0aGlzLmFzbjFOb3RCZWZvcmU9bmV3IEtKVVIuYXNuMS54NTA5LlRpbWUoYil9O3RoaXMuc2V0Tm90QWZ0ZXJCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMU5vdEFmdGVyPW5ldyBLSlVSLmFzbjEueDUwOS5UaW1lKGIpfTt0aGlzLnNldFN1YmplY3RCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMVN1YmplY3Q9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGIpfTt0aGlzLnNldFN1YmplY3RQdWJsaWNLZXlCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMVN1YmpQS2V5PW5ldyBLSlVSLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbyhiKX07dGhpcy5zZXRTdWJqZWN0UHVibGljS2V5QnlHZXRLZXk9ZnVuY3Rpb24oYyl7dmFyIGI9S0VZVVRJTC5nZXRLZXkoYyk7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvKGIpfTt0aGlzLmFwcGVuZEV4dGVuc2lvbj1mdW5jdGlvbihiKXt0aGlzLmV4dGVuc2lvbnNBcnJheS5wdXNoKGIpfTt0aGlzLmFwcGVuZEV4dGVuc2lvbkJ5TmFtZT1mdW5jdGlvbihkLGIpe2lmKGQudG9Mb3dlckNhc2UoKT09ImJhc2ljY29uc3RyYWludHMiKXt2YXIgYz1uZXcgS0pVUi5hc24xLng1MDkuQmFzaWNDb25zdHJhaW50cyhiKTt0aGlzLmFwcGVuZEV4dGVuc2lvbihjKX1lbHNle2lmKGQudG9Mb3dlckNhc2UoKT09ImtleXVzYWdlIil7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LktleVVzYWdlKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7aWYoZC50b0xvd2VyQ2FzZSgpPT0iY3JsZGlzdHJpYnV0aW9ucG9pbnRzIil7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LkNSTERpc3RyaWJ1dGlvblBvaW50cyhiKTt0aGlzLmFwcGVuZEV4dGVuc2lvbihjKX1lbHNle2lmKGQudG9Mb3dlckNhc2UoKT09ImV4dGtleXVzYWdlIil7dmFyIGM9bmV3IEtKVVIuYXNuMS54NTA5LkV4dEtleVVzYWdlKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7aWYoZC50b0xvd2VyQ2FzZSgpPT0iYXV0aG9yaXR5a2V5aWRlbnRpZmllciIpe3ZhciBjPW5ldyBLSlVSLmFzbjEueDUwOS5BdXRob3JpdHlLZXlJZGVudGlmaWVyKGIpO3RoaXMuYXBwZW5kRXh0ZW5zaW9uKGMpfWVsc2V7dGhyb3cidW5zdXBwb3J0ZWQgZXh0ZW5zaW9uIG5hbWU6ICIrZH19fX19fTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLmFzbjFOb3RCZWZvcmU9PW51bGx8fHRoaXMuYXNuMU5vdEFmdGVyPT1udWxsKXt0aHJvdyJub3RCZWZvcmUgYW5kL29yIG5vdEFmdGVyIG5vdCBzZXQifXZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmFzbjFOb3RCZWZvcmUsdGhpcy5hc24xTm90QWZ0ZXJdfSk7dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFWZXJzaW9uKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVNlcmlhbE51bWJlcik7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFTaWduYXR1cmVBbGcpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xSXNzdWVyKTt0aGlzLmFzbjFBcnJheS5wdXNoKGMpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xU3ViamVjdCk7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFTdWJqUEtleSk7aWYodGhpcy5leHRlbnNpb25zQXJyYXkubGVuZ3RoPjApe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuZXh0ZW5zaW9uc0FycmF5fSk7dmFyIGI9bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OnRydWUsdGFnOiJhMyIsb2JqOmR9KTt0aGlzLmFzbjFBcnJheS5wdXNoKGIpfXZhciBlPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuYXNuMUFycmF5fSk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3RoaXMuaXNNb2RpZmllZD1mYWxzZTtyZXR1cm4gdGhpcy5oVExWfTt0aGlzLl9pbml0aWFsaXplKCl9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LlRCU0NlcnRpZmljYXRlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5FeHRlbnNpb249ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBmPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOnRoaXMub2lkfSk7dmFyIGU9bmV3IEtKVVIuYXNuMS5ERVJPY3RldFN0cmluZyh7aGV4OnRoaXMuZ2V0RXh0blZhbHVlSGV4KCl9KTt2YXIgZD1uZXcgQXJyYXkoKTtkLnB1c2goZik7aWYodGhpcy5jcml0aWNhbCl7ZC5wdXNoKG5ldyBLSlVSLmFzbjEuREVSQm9vbGVhbigpKX1kLnB1c2goZSk7dmFyIGM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZH0pO3JldHVybiBjLmdldEVuY29kZWRIZXgoKX07dGhpcy5jcml0aWNhbD1mYWxzZTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmNyaXRpY2FsIT0idW5kZWZpbmVkIil7dGhpcy5jcml0aWNhbD1iLmNyaXRpY2FsfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkV4dGVuc2lvbixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuS2V5VXNhZ2U9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLng1MDkuS2V5VXNhZ2Uuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5nZXRFeHRuVmFsdWVIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLmdldEVuY29kZWRIZXgoKX07dGhpcy5vaWQ9IjIuNS4yOS4xNSI7aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYS5iaW4hPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFFeHRuVmFsdWU9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoYSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuS2V5VXNhZ2UsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5CYXNpY0NvbnN0cmFpbnRzPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS54NTA5LkJhc2ljQ29uc3RyYWludHMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYyk7dmFyIGE9ZmFsc2U7dmFyIGI9LTE7dGhpcy5nZXRFeHRuVmFsdWVIZXg9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgQXJyYXkoKTtpZih0aGlzLmNBKXtlLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJCb29sZWFuKCkpfWlmKHRoaXMucGF0aExlbj4tMSl7ZS5wdXNoKG5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6dGhpcy5wYXRoTGVufSkpfXZhciBkPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OmV9KTt0aGlzLmFzbjFFeHRuVmFsdWU9ZDtyZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLmdldEVuY29kZWRIZXgoKX07dGhpcy5vaWQ9IjIuNS4yOS4xOSI7dGhpcy5jQT1mYWxzZTt0aGlzLnBhdGhMZW49LTE7aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy5jQSE9InVuZGVmaW5lZCIpe3RoaXMuY0E9Yy5jQX1pZih0eXBlb2YgYy5wYXRoTGVuIT0idW5kZWZpbmVkIil7dGhpcy5wYXRoTGVuPWMucGF0aExlbn19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5CYXNpY0NvbnN0cmFpbnRzLEtKVVIuYXNuMS54NTA5LkV4dGVuc2lvbik7S0pVUi5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS54NTA5LkNSTERpc3RyaWJ1dGlvblBvaW50cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmdldEV4dG5WYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLnNldEJ5RFBBcnJheT1mdW5jdGlvbihiKXt0aGlzLmFzbjFFeHRuVmFsdWU9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6Yn0pfTt0aGlzLnNldEJ5T25lVVJJPWZ1bmN0aW9uKGUpe3ZhciBiPW5ldyBLSlVSLmFzbjEueDUwOS5HZW5lcmFsTmFtZXMoW3t1cmk6ZX1dKTt2YXIgZD1uZXcgS0pVUi5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnROYW1lKGIpO3ZhciBjPW5ldyBLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludCh7ZHBvYmo6ZH0pO3RoaXMuc2V0QnlEUEFycmF5KFtjXSl9O3RoaXMub2lkPSIyLjUuMjkuMzEiO2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuYXJyYXkhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5RFBBcnJheShhLmFycmF5KX1lbHNle2lmKHR5cGVvZiBhLnVyaSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0QnlPbmVVUkkoYS51cmkpfX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5DUkxEaXN0cmlidXRpb25Qb2ludHMsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5FeHRLZXlVc2FnZT1mdW5jdGlvbihhKXtLSlVSLmFzbjEueDUwOS5FeHRLZXlVc2FnZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLnNldFB1cnBvc2VBcnJheT1mdW5jdGlvbihiKXt0aGlzLmFzbjFFeHRuVmFsdWU9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSgpO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1uZXcgS0pVUi5hc24xLkRFUk9iamVjdElkZW50aWZpZXIoYltjXSk7dGhpcy5hc24xRXh0blZhbHVlLmFwcGVuZEFTTjFPYmplY3QoZCl9fTt0aGlzLmdldEV4dG5WYWx1ZUhleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUuZ2V0RW5jb2RlZEhleCgpfTt0aGlzLm9pZD0iMi41LjI5LjM3IjtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLmFycmF5IT0idW5kZWZpbmVkIil7dGhpcy5zZXRQdXJwb3NlQXJyYXkoYS5hcnJheSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuRXh0S2V5VXNhZ2UsS0pVUi5hc24xLng1MDkuRXh0ZW5zaW9uKTtLSlVSLmFzbjEueDUwOS5BdXRob3JpdHlLZXlJZGVudGlmaWVyPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSk7dGhpcy5hc24xS0lEPW51bGw7dGhpcy5hc24xQ2VydElzc3Vlcj1udWxsO3RoaXMuYXNuMUNlcnRTTj1udWxsO3RoaXMuZ2V0RXh0blZhbHVlSGV4PWZ1bmN0aW9uKCl7dmFyIGM9bmV3IEFycmF5KCk7aWYodGhpcy5hc24xS0lEKXtjLnB1c2gobmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OmZhbHNlLHRhZzoiODAiLG9iajp0aGlzLmFzbjFLSUR9KSl9aWYodGhpcy5hc24xQ2VydElzc3Vlcil7Yy5wdXNoKG5ldyBLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0KHtleHBsaWNpdDpmYWxzZSx0YWc6ImExIixvYmo6dGhpcy5hc24xQ2VydElzc3Vlcn0pKX1pZih0aGlzLmFzbjFDZXJ0U04pe2MucHVzaChuZXcgS0pVUi5hc24xLkRFUlRhZ2dlZE9iamVjdCh7ZXhwbGljaXQ6ZmFsc2UsdGFnOiI4MiIsb2JqOnRoaXMuYXNuMUNlcnRTTn0pKX12YXIgYj1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpjfSk7dGhpcy5hc24xRXh0blZhbHVlPWI7cmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS5nZXRFbmNvZGVkSGV4KCl9O3RoaXMuc2V0S0lEQnlQYXJhbT1mdW5jdGlvbihiKXt0aGlzLmFzbjFLSUQ9bmV3IEtKVVIuYXNuMS5ERVJPY3RldFN0cmluZyhiKX07dGhpcy5zZXRDZXJ0SXNzdWVyQnlQYXJhbT1mdW5jdGlvbihiKXt0aGlzLmFzbjFDZXJ0SXNzdWVyPW5ldyBLSlVSLmFzbjEueDUwOS5YNTAwTmFtZShiKX07dGhpcy5zZXRDZXJ0U05CeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMUNlcnRTTj1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoYil9O3RoaXMub2lkPSIyLjUuMjkuMzUiO2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEua2lkIT0idW5kZWZpbmVkIil7dGhpcy5zZXRLSURCeVBhcmFtKGEua2lkKX1pZih0eXBlb2YgYS5pc3N1ZXIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldENlcnRJc3N1ZXJCeVBhcmFtKGEuaXNzdWVyKX1pZih0eXBlb2YgYS5zbiE9InVuZGVmaW5lZCIpe3RoaXMuc2V0Q2VydFNOQnlQYXJhbShhLnNuKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5BdXRob3JpdHlLZXlJZGVudGlmaWVyLEtKVVIuYXNuMS54NTA5LkV4dGVuc2lvbik7S0pVUi5hc24xLng1MDkuQ1JMPWZ1bmN0aW9uKGYpe0tKVVIuYXNuMS54NTA5LkNSTC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9bnVsbDt2YXIgYz1udWxsO3ZhciBlPW51bGw7dmFyIGI9bnVsbDt2YXIgZD1udWxsO3RoaXMuc2V0UnNhUHJ2S2V5QnlQRU1hbmRQYXNzPWZ1bmN0aW9uKGgsail7dmFyIGc9UEtDUzVQS0VZLmdldERlY3J5cHRlZEtleUhleChoLGopO3ZhciBpPW5ldyBSU0FLZXkoKTtpLnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcoZyk7dGhpcy5yc2FQcnZLZXk9aX07dGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhpcy5hc24xU2lnbmF0dXJlQWxnPXRoaXMuYXNuMVRCU0NlcnRMaXN0LmFzbjFTaWduYXR1cmVBbGc7c2lnPW5ldyBLSlVSLmNyeXB0by5TaWduYXR1cmUoe2FsZzoiU0hBMXdpdGhSU0EiLHByb3Y6ImNyeXB0b2pzL2pzcnNhIn0pO3NpZy5pbml0U2lnbih0aGlzLnJzYVBydktleSk7c2lnLnVwZGF0ZUhleCh0aGlzLmFzbjFUQlNDZXJ0TGlzdC5nZXRFbmNvZGVkSGV4KCkpO3RoaXMuaGV4U2lnPXNpZy5zaWduKCk7dGhpcy5hc24xU2lnPW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIit0aGlzLmhleFNpZ30pO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmFzbjFUQlNDZXJ0TGlzdCx0aGlzLmFzbjFTaWduYXR1cmVBbGcsdGhpcy5hc24xU2lnXX0pO3RoaXMuaFRMVj1nLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2V9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuaXNNb2RpZmllZD09ZmFsc2UmJnRoaXMuaFRMViE9bnVsbCl7cmV0dXJuIHRoaXMuaFRMVn10aHJvdyJub3Qgc2lnbmVkIHlldCJ9O3RoaXMuZ2V0UEVNU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5nZXRFbmNvZGVkSGV4KCk7dmFyIGc9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShpKTt2YXIgaD1DcnlwdG9KUy5lbmMuQmFzZTY0LnN0cmluZ2lmeShnKTt2YXIgaj1oLnJlcGxhY2UoLyguezY0fSkvZywiJDFcclxuIik7cmV0dXJuIi0tLS0tQkVHSU4gWDUwOSBDUkwtLS0tLVxyXG4iK2orIlxyXG4tLS0tLUVORCBYNTA5IENSTC0tLS0tXHJcbiJ9O2lmKHR5cGVvZiBmIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGYudGJzb2JqIT0idW5kZWZpbmVkIil7dGhpcy5hc24xVEJTQ2VydExpc3Q9Zi50YnNvYmp9aWYodHlwZW9mIGYucnNhcHJ2a2V5IT0idW5kZWZpbmVkIil7dGhpcy5yc2FQcnZLZXk9Zi5yc2FwcnZrZXl9aWYoKHR5cGVvZiBmLnJzYXBydnBlbSE9InVuZGVmaW5lZCIpJiYodHlwZW9mIGYucnNhcHJ2cGFzIT0idW5kZWZpbmVkIikpe3RoaXMuc2V0UnNhUHJ2S2V5QnlQRU1hbmRQYXNzKGYucnNhcHJ2cGVtLGYucnNhcHJ2cGFzKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5DUkwsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LlRCU0NlcnRMaXN0PWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS54NTA5LlRCU0NlcnRMaXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3RoaXMuc2V0U2lnbmF0dXJlQWxnQnlQYXJhbT1mdW5jdGlvbihjKXt0aGlzLmFzbjFTaWduYXR1cmVBbGc9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoYyl9O3RoaXMuc2V0SXNzdWVyQnlQYXJhbT1mdW5jdGlvbihjKXt0aGlzLmFzbjFJc3N1ZXI9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGMpfTt0aGlzLnNldFRoaXNVcGRhdGVCeVBhcmFtPWZ1bmN0aW9uKGMpe3RoaXMuYXNuMVRoaXNVcGRhdGU9bmV3IEtKVVIuYXNuMS54NTA5LlRpbWUoYyl9O3RoaXMuc2V0TmV4dFVwZGF0ZUJ5UGFyYW09ZnVuY3Rpb24oYyl7dGhpcy5hc24xTmV4dFVwZGF0ZT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShjKX07dGhpcy5hZGRSZXZva2VkQ2VydD1mdW5jdGlvbihjLGQpe3ZhciBmPXt9O2lmKGMhPXVuZGVmaW5lZCYmYyE9bnVsbCl7Zi5zbj1jfWlmKGQhPXVuZGVmaW5lZCYmZCE9bnVsbCl7Zi50aW1lPWR9dmFyIGU9bmV3IEtKVVIuYXNuMS54NTA5LkNSTEVudHJ5KGYpO3RoaXMuYVJldm9rZWRDZXJ0LnB1c2goZSl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO2lmKHRoaXMuYXNuMVZlcnNpb24hPW51bGwpe3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xVmVyc2lvbil9dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFTaWduYXR1cmVBbGcpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xSXNzdWVyKTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVRoaXNVcGRhdGUpO2lmKHRoaXMuYXNuMU5leHRVcGRhdGUhPW51bGwpe3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xTmV4dFVwZGF0ZSl9aWYodGhpcy5hUmV2b2tlZENlcnQubGVuZ3RoPjApe3ZhciBjPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OnRoaXMuYVJldm9rZWRDZXJ0fSk7dGhpcy5hc24xQXJyYXkucHVzaChjKX12YXIgZD1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmFzbjFBcnJheX0pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2U7cmV0dXJuIHRoaXMuaFRMVn07dGhpcy5faW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMuYXNuMVZlcnNpb249bnVsbDt0aGlzLmFzbjFTaWduYXR1cmVBbGc9bnVsbDt0aGlzLmFzbjFJc3N1ZXI9bnVsbDt0aGlzLmFzbjFUaGlzVXBkYXRlPW51bGw7dGhpcy5hc24xTmV4dFVwZGF0ZT1udWxsO3RoaXMuYVJldm9rZWRDZXJ0PW5ldyBBcnJheSgpfTt0aGlzLl9pbml0aWFsaXplKCl9O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LlRCU0NlcnRMaXN0LEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5DUkxFbnRyeT1mdW5jdGlvbihjKXtLSlVSLmFzbjEueDUwOS5DUkxFbnRyeS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYT1udWxsO3RoaXMuc2V0Q2VydFNlcmlhbD1mdW5jdGlvbihkKXt0aGlzLnNuPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcihkKX07dGhpcy5zZXRSZXZvY2F0aW9uRGF0ZT1mdW5jdGlvbihkKXt0aGlzLnRpbWU9bmV3IEtKVVIuYXNuMS54NTA5LlRpbWUoZCl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLnNuLHRoaXMudGltZV19KTt0aGlzLlRMVj1kLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5UTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMudGltZSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0UmV2b2NhdGlvbkRhdGUoYy50aW1lKX1pZih0eXBlb2YgYy5zbiE9InVuZGVmaW5lZCIpe3RoaXMuc2V0Q2VydFNlcmlhbChjLnNuKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5DUkxFbnRyeSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuWDUwME5hbWU9ZnVuY3Rpb24oYil7S0pVUi5hc24xLng1MDkuWDUwME5hbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuc2V0QnlTdHJpbmc9ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5zcGxpdCgiLyIpO2Quc2hpZnQoKTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dGhpcy5hc24xQXJyYXkucHVzaChuZXcgS0pVUi5hc24xLng1MDkuUkROKHtzdHI6ZFtlXX0pKX19O3RoaXMuc2V0QnlPYmplY3Q9ZnVuY3Rpb24oZSl7Zm9yKHZhciBjIGluIGUpe2lmKGUuaGFzT3duUHJvcGVydHkoYykpe3ZhciBkPW5ldyBLSlVSLmFzbjEueDUwOS5SRE4oe3N0cjpjKyI9IitlW2NdfSk7dGhpcy5hc24xQXJyYXk/dGhpcy5hc24xQXJyYXkucHVzaChkKTp0aGlzLmFzbjFBcnJheT1bZF19fX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMuaFRMVj09InN0cmluZyIpe3JldHVybiB0aGlzLmhUTFZ9dmFyIGM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLmhUTFY9Yy5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5zdHIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5U3RyaW5nKGIuc3RyKX1lbHNle2lmKHR5cGVvZiBiPT09Im9iamVjdCIpe3RoaXMuc2V0QnlPYmplY3QoYil9fWlmKHR5cGVvZiBiLmNlcnRpc3N1ZXIhPSJ1bmRlZmluZWQiKXt2YXIgYT1uZXcgWDUwOSgpO2EuaGV4PVg1MDkucGVtVG9IZXgoYi5jZXJ0aXNzdWVyKTt0aGlzLmhUTFY9YS5nZXRJc3N1ZXJIZXgoKX1pZih0eXBlb2YgYi5jZXJ0c3ViamVjdCE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBYNTA5KCk7YS5oZXg9WDUwOS5wZW1Ub0hleChiLmNlcnRzdWJqZWN0KTt0aGlzLmhUTFY9YS5nZXRTdWJqZWN0SGV4KCl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuWDUwME5hbWUsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LlJETj1mdW5jdGlvbihhKXtLSlVSLmFzbjEueDUwOS5SRE4uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuYWRkQnlTdHJpbmc9ZnVuY3Rpb24oYil7dGhpcy5hc24xQXJyYXkucHVzaChuZXcgS0pVUi5hc24xLng1MDkuQXR0cmlidXRlVHlwZUFuZFZhbHVlKHtzdHI6Yn0pKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGI9bmV3IEtKVVIuYXNuMS5ERVJTZXQoe2FycmF5OnRoaXMuYXNuMUFycmF5fSk7dGhpcy5UTFY9Yi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuVExWfTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBhLnN0ciE9InVuZGVmaW5lZCIpe3RoaXMuYWRkQnlTdHJpbmcoYS5zdHIpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LlJETixLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuQXR0cmlidXRlVHlwZUFuZFZhbHVlPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS54NTA5LkF0dHJpYnV0ZVR5cGVBbmRWYWx1ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGQ9bnVsbDt2YXIgYz1udWxsO3ZhciBhPSJ1dGY4Ijt0aGlzLnNldEJ5U3RyaW5nPWZ1bmN0aW9uKGUpe2lmKGUubWF0Y2goL14oW149XSspPSguKykkLykpe3RoaXMuc2V0QnlBdHRyVHlwZUFuZFZhbHVlU3RyKFJlZ0V4cC4kMSxSZWdFeHAuJDIpfWVsc2V7dGhyb3cibWFsZm9ybWVkIGF0dHJUeXBlQW5kVmFsdWVTdHI6ICIrZX19O3RoaXMuc2V0QnlBdHRyVHlwZUFuZFZhbHVlU3RyPWZ1bmN0aW9uKGcsZil7dGhpcy50eXBlT2JqPUtKVVIuYXNuMS54NTA5Lk9JRC5hdHlwZTJvYmooZyk7dmFyIGU9YTtpZihnPT0iQyIpe2U9InBybiJ9dGhpcy52YWx1ZU9iaj10aGlzLmdldFZhbHVlT2JqKGUsZil9O3RoaXMuZ2V0VmFsdWVPYmo9ZnVuY3Rpb24oZixlKXtpZihmPT0idXRmOCIpe3JldHVybiBuZXcgS0pVUi5hc24xLkRFUlVURjhTdHJpbmcoe3N0cjplfSl9aWYoZj09InBybiIpe3JldHVybiBuZXcgS0pVUi5hc24xLkRFUlByaW50YWJsZVN0cmluZyh7c3RyOmV9KX1pZihmPT0idGVsIil7cmV0dXJuIG5ldyBLSlVSLmFzbjEuREVSVGVsZXRleFN0cmluZyh7c3RyOmV9KX1pZihmPT0iaWE1Iil7cmV0dXJuIG5ldyBLSlVSLmFzbjEuREVSSUE1U3RyaW5nKHtzdHI6ZX0pfXRocm93InVuc3VwcG9ydGVkIGRpcmVjdG9yeSBzdHJpbmcgdHlwZTogdHlwZT0iK2YrIiB2YWx1ZT0iK2V9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBlPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLnR5cGVPYmosdGhpcy52YWx1ZU9ial19KTt0aGlzLlRMVj1lLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5UTFZ9O2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGIuc3RyIT0idW5kZWZpbmVkIil7dGhpcy5zZXRCeVN0cmluZyhiLnN0cil9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuQXR0cmlidXRlVHlwZUFuZFZhbHVlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbz1mdW5jdGlvbihkKXtLSlVSLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgYz1udWxsO3ZhciBhPW51bGw7dGhpcy5zZXRSU0FLZXk9ZnVuY3Rpb24oZSl7aWYoIVJTQUtleS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKSl7dGhyb3ciYXJndW1lbnQgaXMgbm90IFJTQUtleSBpbnN0YW5jZSJ9dGhpcy5yc2FLZXk9ZTt2YXIgZz1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDplLm59KTt2YXIgZj1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOmUuZX0pO3ZhciBpPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OltnLGZdfSk7dmFyIGg9aS5nZXRFbmNvZGVkSGV4KCk7dGhpcy5hc24xQWxnSWQ9bmV3IEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6InJzYUVuY3J5cHRpb24ifSk7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK2h9KX07dGhpcy5zZXRSU0FQRU09ZnVuY3Rpb24oZyl7aWYoZy5tYXRjaCgvLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0vKSl7dmFyIG49ZztuPW4ucmVwbGFjZSgvXi0tLS0tW14tXSstLS0tLS8sIiIpO249bi5yZXBsYWNlKC8tLS0tLVteLV0rLS0tLS1ccyokLywiIik7dmFyIG09bi5yZXBsYWNlKC9ccysvZywiIik7dmFyIGY9Q3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShtKTt2YXIgaT1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShmKTt2YXIgaz1fcnNhcGVtX2dldEhleFZhbHVlQXJyYXlPZkNoaWxkcmVuRnJvbUhleChpKTt2YXIgaD1rWzFdO3ZhciBsPWguc3Vic3RyKDIpO3ZhciBlPV9yc2FwZW1fZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGwpO3ZhciBqPW5ldyBSU0FLZXkoKTtqLnNldFB1YmxpYyhlWzBdLGVbMV0pO3RoaXMuc2V0UlNBS2V5KGopfWVsc2V7dGhyb3cia2V5IG5vdCBzdXBwb3J0ZWQifX07dGhpcy5nZXRBU04xT2JqZWN0PWZ1bmN0aW9uKCl7aWYodGhpcy5hc24xQWxnSWQ9PW51bGx8fHRoaXMuYXNuMVN1YmpQS2V5PT1udWxsKXt0aHJvdyJhbGdJZCBhbmQvb3Igc3VialB1YktleSBub3Qgc2V0In12YXIgZT1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5hc24xQWxnSWQsdGhpcy5hc24xU3VialBLZXldfSk7cmV0dXJuIGV9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0QVNOMU9iamVjdCgpO3RoaXMuaFRMVj1lLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTt0aGlzLl9zZXRSU0FLZXk9ZnVuY3Rpb24oZSl7dmFyIGc9S0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6e2JpZ2ludDplLm59fSx7ImludCI6eyJpbnQiOmUuZX19XX0pO3ZhciBmPWcuZ2V0RW5jb2RlZEhleCgpO3RoaXMuYXNuMUFsZ0lkPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOiJyc2FFbmNyeXB0aW9uIn0pO3RoaXMuYXNuMVN1YmpQS2V5PW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIitmfSl9O3RoaXMuX3NldEVDPWZ1bmN0aW9uKGUpe3ZhciBmPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcih7bmFtZTplLmN1cnZlTmFtZX0pO3RoaXMuYXNuMUFsZ0lkPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOiJlY1B1YmxpY0tleSIsYXNuMXBhcmFtczpmfSk7dGhpcy5hc24xU3VialBLZXk9bmV3IEtKVVIuYXNuMS5ERVJCaXRTdHJpbmcoe2hleDoiMDAiK2UucHViS2V5SGV4fSl9O3RoaXMuX3NldERTQT1mdW5jdGlvbihlKXt2YXIgZj1uZXcgS0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6e2JpZ2ludDplLnB9fSx7ImludCI6e2JpZ2ludDplLnF9fSx7ImludCI6e2JpZ2ludDplLmd9fV19KTt0aGlzLmFzbjFBbGdJZD1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZToiZHNhIixhc24xcGFyYW1zOmZ9KTt2YXIgZz1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDplLnl9KTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrZy5nZXRFbmNvZGVkSGV4KCl9KX07aWYodHlwZW9mIGQhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmZCBpbnN0YW5jZW9mIFJTQUtleSl7dGhpcy5fc2V0UlNBS2V5KGQpfWVsc2V7aWYodHlwZW9mIEtKVVIuY3J5cHRvLkVDRFNBIT0idW5kZWZpbmVkIiYmZCBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKXt0aGlzLl9zZXRFQyhkKX1lbHNle2lmKHR5cGVvZiBLSlVSLmNyeXB0by5EU0EhPSJ1bmRlZmluZWQiJiZkIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRFNBKXt0aGlzLl9zZXREU0EoZCl9ZWxzZXtpZih0eXBlb2YgZC5yc2FrZXkhPSJ1bmRlZmluZWQiKXt0aGlzLnNldFJTQUtleShkLnJzYWtleSl9ZWxzZXtpZih0eXBlb2YgZC5yc2FwZW0hPSJ1bmRlZmluZWQiKXt0aGlzLnNldFJTQVBFTShkLnJzYXBlbSl9fX19fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5UaW1lPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS54NTA5LlRpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBiPW51bGw7dmFyIGE9bnVsbDt0aGlzLnNldFRpbWVQYXJhbXM9ZnVuY3Rpb24oZCl7dGhpcy50aW1lUGFyYW1zPWR9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBkPW51bGw7aWYodGhpcy50aW1lUGFyYW1zIT1udWxsKXtpZih0aGlzLnR5cGU9PSJ1dGMiKXtkPW5ldyBLSlVSLmFzbjEuREVSVVRDVGltZSh0aGlzLnRpbWVQYXJhbXMpfWVsc2V7ZD1uZXcgS0pVUi5hc24xLkRFUkdlbmVyYWxpemVkVGltZSh0aGlzLnRpbWVQYXJhbXMpfX1lbHNle2lmKHRoaXMudHlwZT09InV0YyIpe2Q9bmV3IEtKVVIuYXNuMS5ERVJVVENUaW1lKCl9ZWxzZXtkPW5ldyBLSlVSLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lKCl9fXRoaXMuVExWPWQuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLlRMVn07dGhpcy50eXBlPSJ1dGMiO2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMudHlwZSE9InVuZGVmaW5lZCIpe3RoaXMudHlwZT1jLnR5cGV9ZWxzZXtpZih0eXBlb2YgYy5zdHIhPSJ1bmRlZmluZWQiKXtpZihjLnN0ci5tYXRjaCgvXlswLTldezEyfVokLykpe3RoaXMudHlwZT0idXRjIn1pZihjLnN0ci5tYXRjaCgvXlswLTldezE0fVokLykpe3RoaXMudHlwZT0iZ2VuIn19fXRoaXMudGltZVBhcmFtcz1jfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuVGltZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcj1mdW5jdGlvbihlKXtLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1udWxsO3ZhciBkPW51bGw7dmFyIGI9bnVsbDt2YXIgYz1mYWxzZTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLm5hbWVBbGc9PW51bGwmJnRoaXMuYXNuMUFsZz09bnVsbCl7dGhyb3ciYWxnb3JpdGhtIG5vdCBzcGVjaWZpZWQifWlmKHRoaXMubmFtZUFsZyE9bnVsbCYmdGhpcy5hc24xQWxnPT1udWxsKXt0aGlzLmFzbjFBbGc9S0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2JqKHRoaXMubmFtZUFsZyl9dmFyIGY9W3RoaXMuYXNuMUFsZ107aWYoIXRoaXMucGFyYW1FbXB0eSl7Zi5wdXNoKHRoaXMuYXNuMVBhcmFtcyl9dmFyIGc9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6Zn0pO3RoaXMuaFRMVj1nLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBlLm5hbWUhPSJ1bmRlZmluZWQiKXt0aGlzLm5hbWVBbGc9ZS5uYW1lfWlmKHR5cGVvZiBlLmFzbjFwYXJhbXMhPSJ1bmRlZmluZWQiKXt0aGlzLmFzbjFQYXJhbXM9ZS5hc24xcGFyYW1zfWlmKHR5cGVvZiBlLnBhcmFtZW1wdHkhPSJ1bmRlZmluZWQiKXt0aGlzLnBhcmFtRW1wdHk9ZS5wYXJhbWVtcHR5fX1pZih0aGlzLmFzbjFQYXJhbXM9PW51bGwpe3RoaXMuYXNuMVBhcmFtcz1uZXcgS0pVUi5hc24xLkRFUk51bGwoKX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lPWZ1bmN0aW9uKGQpe0tKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYz1udWxsO3ZhciBiPW51bGw7dmFyIGE9e3JmYzgyMjoiODEiLGRuczoiODIiLGRuOiJhNCIsdXJpOiI4NiJ9O3RoaXMuZXhwbGljaXQ9ZmFsc2U7dGhpcy5zZXRCeVBhcmFtPWZ1bmN0aW9uKGspe3ZhciBqPW51bGw7dmFyIGc9bnVsbDtpZih0eXBlb2Ygaz09InVuZGVmaW5lZCIpe3JldHVybn1pZih0eXBlb2Ygay5yZmM4MjIhPSJ1bmRlZmluZWQiKXt0aGlzLnR5cGU9InJmYzgyMiI7Zz1uZXcgS0pVUi5hc24xLkRFUklBNVN0cmluZyh7c3RyOmtbdGhpcy50eXBlXX0pfWlmKHR5cGVvZiBrLmRucyE9InVuZGVmaW5lZCIpe3RoaXMudHlwZT0iZG5zIjtnPW5ldyBLSlVSLmFzbjEuREVSSUE1U3RyaW5nKHtzdHI6a1t0aGlzLnR5cGVdfSl9aWYodHlwZW9mIGsudXJpIT0idW5kZWZpbmVkIil7dGhpcy50eXBlPSJ1cmkiO2c9bmV3IEtKVVIuYXNuMS5ERVJJQTVTdHJpbmcoe3N0cjprW3RoaXMudHlwZV19KX1pZih0eXBlb2Ygay5jZXJ0aXNzdWVyIT0idW5kZWZpbmVkIil7dGhpcy50eXBlPSJkbiI7dGhpcy5leHBsaWNpdD10cnVlO3ZhciBoPWsuY2VydGlzc3Vlcjt2YXIgZj1udWxsO2lmKGgubWF0Y2goL15bMC05QS1GYS1mXSskLykpe2Y9PWh9aWYoaC5pbmRleE9mKCItLS0tLUJFR0lOICIpIT0tMSl7Zj1YNTA5LnBlbVRvSGV4KGgpfWlmKGY9PW51bGwpe3Rocm93ImNlcnRpc3N1ZXIgcGFyYW0gbm90IGNlcnQifXZhciBlPW5ldyBYNTA5KCk7ZS5oZXg9Zjt2YXIgaT1lLmdldElzc3VlckhleCgpO2c9bmV3IEtKVVIuYXNuMS5BU04xT2JqZWN0KCk7Zy5oVExWPWl9aWYodHlwZW9mIGsuY2VydHN1YmohPSJ1bmRlZmluZWQiKXt0aGlzLnR5cGU9ImRuIjt0aGlzLmV4cGxpY2l0PXRydWU7dmFyIGg9ay5jZXJ0c3Viajt2YXIgZj1udWxsO2lmKGgubWF0Y2goL15bMC05QS1GYS1mXSskLykpe2Y9PWh9aWYoaC5pbmRleE9mKCItLS0tLUJFR0lOICIpIT0tMSl7Zj1YNTA5LnBlbVRvSGV4KGgpfWlmKGY9PW51bGwpe3Rocm93ImNlcnRzdWJqIHBhcmFtIG5vdCBjZXJ0In12YXIgZT1uZXcgWDUwOSgpO2UuaGV4PWY7dmFyIGk9ZS5nZXRTdWJqZWN0SGV4KCk7Zz1uZXcgS0pVUi5hc24xLkFTTjFPYmplY3QoKTtnLmhUTFY9aX1pZih0aGlzLnR5cGU9PW51bGwpe3Rocm93InVuc3VwcG9ydGVkIHR5cGUgaW4gcGFyYW1zPSIra310aGlzLmFzbjFPYmo9bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OnRoaXMuZXhwbGljaXQsdGFnOmFbdGhpcy50eXBlXSxvYmo6Z30pfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc24xT2JqLmdldEVuY29kZWRIZXgoKX07aWYodHlwZW9mIGQhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5UGFyYW0oZCl9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEueDUwOS5HZW5lcmFsTmFtZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWVzPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lcy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9bnVsbDt0aGlzLnNldEJ5UGFyYW1BcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIGM9MDtjPGUubGVuZ3RoO2MrKyl7dmFyIGQ9bmV3IEtKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lKGVbY10pO3RoaXMuYXNuMUFycmF5LnB1c2goZCl9fTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmFzbjFBcnJheX0pO3JldHVybiBjLmdldEVuY29kZWRIZXgoKX07dGhpcy5hc24xQXJyYXk9bmV3IEFycmF5KCk7aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXt0aGlzLnNldEJ5UGFyYW1BcnJheShiKX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS54NTA5LkdlbmVyYWxOYW1lcyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnROYW1lPWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50TmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGU9bnVsbDt2YXIgYz1udWxsO3ZhciBhPW51bGw7dmFyIGQ9bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUhPSJmdWxsIil7dGhyb3ciY3VycmVudGx5IHR5cGUgc2hhbGwgYmUgJ2Z1bGwnOiAiK3RoaXMudHlwZX10aGlzLmFzbjFPYmo9bmV3IEtKVVIuYXNuMS5ERVJUYWdnZWRPYmplY3Qoe2V4cGxpY2l0OmZhbHNlLHRhZzp0aGlzLnRhZyxvYmo6dGhpcy5hc24xVn0pO3RoaXMuaFRMVj10aGlzLmFzbjFPYmouZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYoS0pVUi5hc24xLng1MDkuR2VuZXJhbE5hbWVzLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGIpKXt0aGlzLnR5cGU9ImZ1bGwiO3RoaXMudGFnPSJhMCI7dGhpcy5hc24xVj1ifWVsc2V7dGhyb3ciVGhpcyBjbGFzcyBzdXBwb3J0cyBHZW5lcmFsTmFtZXMgb25seSBhcyBhcmd1bWVudCJ9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnROYW1lLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludD1mdW5jdGlvbihiKXtLSlVSLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKCk7aWYodGhpcy5hc24xRFAhPW51bGwpe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0KHtleHBsaWNpdDp0cnVlLHRhZzoiYTAiLG9iajp0aGlzLmFzbjFEUH0pO2MuYXBwZW5kQVNOMU9iamVjdChkKX10aGlzLmhUTFY9Yy5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5kcG9iaiE9InVuZGVmaW5lZCIpe3RoaXMuYXNuMURQPWIuZHBvYmp9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnQsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS54NTA5Lk9JRD1uZXcgZnVuY3Rpb24oYSl7dGhpcy5hdHlwZTJvaWRMaXN0PXtDOiIyLjUuNC42IixPOiIyLjUuNC4xMCIsT1U6IjIuNS40LjExIixTVDoiMi41LjQuOCIsTDoiMi41LjQuNyIsQ046IjIuNS40LjMiLEROOiIyLjUuNC40OSIsREM6IjAuOS4yMzQyLjE5MjAwMzAwLjEwMC4xLjI1Iix9O3RoaXMubmFtZTJvaWRMaXN0PXtzaGExOiIxLjMuMTQuMy4yLjI2IixzaGEyNTY6IjIuMTYuODQwLjEuMTAxLjMuNC4yLjEiLHNoYTM4NDoiMi4xNi44NDAuMS4xMDEuMy40LjIuMiIsc2hhNTEyOiIyLjE2Ljg0MC4xLjEwMS4zLjQuMi4zIixzaGEyMjQ6IjIuMTYuODQwLjEuMTAxLjMuNC4yLjQiLG1kNToiMS4yLjg0MC4xMTM1NDkuMi41IixtZDI6IjEuMy4xNC43LjIuMi4xIixyaXBlbWQxNjA6IjEuMy4zNi4zLjIuMSIsTUQyd2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjIiLE1ENHdpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS4zIixNRDV3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuNCIsU0hBMXdpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS41IixTSEEyMjR3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuMTQiLFNIQTI1NndpdGhSU0E6IjEuMi44NDAuMTEzNTQ5LjEuMS4xMSIsU0hBMzg0d2l0aFJTQToiMS4yLjg0MC4xMTM1NDkuMS4xLjEyIixTSEE1MTJ3aXRoUlNBOiIxLjIuODQwLjExMzU0OS4xLjEuMTMiLFNIQTF3aXRoRUNEU0E6IjEuMi44NDAuMTAwNDUuNC4xIixTSEEyMjR3aXRoRUNEU0E6IjEuMi44NDAuMTAwNDUuNC4zLjEiLFNIQTI1NndpdGhFQ0RTQToiMS4yLjg0MC4xMDA0NS40LjMuMiIsU0hBMzg0d2l0aEVDRFNBOiIxLjIuODQwLjEwMDQ1LjQuMy4zIixTSEE1MTJ3aXRoRUNEU0E6IjEuMi44NDAuMTAwNDUuNC4zLjQiLGRzYToiMS4yLjg0MC4xMDA0MC40LjEiLFNIQTF3aXRoRFNBOiIxLjIuODQwLjEwMDQwLjQuMyIsU0hBMjI0d2l0aERTQToiMi4xNi44NDAuMS4xMDEuMy40LjMuMSIsU0hBMjU2d2l0aERTQToiMi4xNi44NDAuMS4xMDEuMy40LjMuMiIscnNhRW5jcnlwdGlvbjoiMS4yLjg0MC4xMTM1NDkuMS4xLjEiLGNvdW50cnlOYW1lOiIyLjUuNC42Iixvcmdhbml6YXRpb246IjIuNS40LjEwIixvcmdhbml6YXRpb25hbFVuaXQ6IjIuNS40LjExIixzdGF0ZU9yUHJvdmluY2VOYW1lOiIyLjUuNC44Iixsb2NhbGl0eToiMi41LjQuNyIsY29tbW9uTmFtZToiMi41LjQuMyIsc3ViamVjdEtleUlkZW50aWZpZXI6IjIuNS4yOS4xNCIsa2V5VXNhZ2U6IjIuNS4yOS4xNSIsc3ViamVjdEFsdE5hbWU6IjIuNS4yOS4xNyIsYmFzaWNDb25zdHJhaW50czoiMi41LjI5LjE5IixuYW1lQ29uc3RyYWludHM6IjIuNS4yOS4zMCIsY1JMRGlzdHJpYnV0aW9uUG9pbnRzOiIyLjUuMjkuMzEiLGNlcnRpZmljYXRlUG9saWNpZXM6IjIuNS4yOS4zMiIsYXV0aG9yaXR5S2V5SWRlbnRpZmllcjoiMi41LjI5LjM1Iixwb2xpY3lDb25zdHJhaW50czoiMi41LjI5LjM2IixleHRLZXlVc2FnZToiMi41LjI5LjM3IixhdXRob3JpdHlJbmZvQWNjZXNzOiIxLjMuNi4xLjUuNS43LjEuMSIsYW55RXh0ZW5kZWRLZXlVc2FnZToiMi41LjI5LjM3LjAiLHNlcnZlckF1dGg6IjEuMy42LjEuNS41LjcuMy4xIixjbGllbnRBdXRoOiIxLjMuNi4xLjUuNS43LjMuMiIsY29kZVNpZ25pbmc6IjEuMy42LjEuNS41LjcuMy4zIixlbWFpbFByb3RlY3Rpb246IjEuMy42LjEuNS41LjcuMy40Iix0aW1lU3RhbXBpbmc6IjEuMy42LjEuNS41LjcuMy44IixvY3NwU2lnbmluZzoiMS4zLjYuMS41LjUuNy4zLjkiLGVjUHVibGljS2V5OiIxLjIuODQwLjEwMDQ1LjIuMSIsc2VjcDI1NnIxOiIxLjIuODQwLjEwMDQ1LjMuMS43IixzZWNwMjU2azE6IjEuMy4xMzIuMC4xMCIsc2VjcDM4NHIxOiIxLjMuMTMyLjAuMzQiLHBrY3M1UEJFUzI6IjEuMi44NDAuMTEzNTQ5LjEuNS4xMyIscGtjczVQQktERjI6IjEuMi44NDAuMTEzNTQ5LjEuNS4xMiIsImRlcy1FREUzLUNCQyI6IjEuMi44NDAuMTEzNTQ5LjMuNyIsZGF0YToiMS4yLjg0MC4xMTM1NDkuMS43LjEiLCJzaWduZWQtZGF0YSI6IjEuMi44NDAuMTEzNTQ5LjEuNy4yIiwiZW52ZWxvcGVkLWRhdGEiOiIxLjIuODQwLjExMzU0OS4xLjcuMyIsImRpZ2VzdGVkLWRhdGEiOiIxLjIuODQwLjExMzU0OS4xLjcuNSIsImVuY3J5cHRlZC1kYXRhIjoiMS4yLjg0MC4xMTM1NDkuMS43LjYiLCJhdXRoZW50aWNhdGVkLWRhdGEiOiIxLjIuODQwLjExMzU0OS4xLjkuMTYuMS4yIix0c3RpbmZvOiIxLjIuODQwLjExMzU0OS4xLjkuMTYuMS40Iix9O3RoaXMub2JqQ2FjaGU9e307dGhpcy5uYW1lMm9iaj1mdW5jdGlvbihiKXtpZih0eXBlb2YgdGhpcy5vYmpDYWNoZVtiXSE9InVuZGVmaW5lZCIpe3JldHVybiB0aGlzLm9iakNhY2hlW2JdfWlmKHR5cGVvZiB0aGlzLm5hbWUyb2lkTGlzdFtiXT09InVuZGVmaW5lZCIpe3Rocm93Ik5hbWUgb2YgT2JqZWN0SWRlbnRpZmllciBub3QgZGVmaW5lZDogIitifXZhciBjPXRoaXMubmFtZTJvaWRMaXN0W2JdO3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOmN9KTt0aGlzLm9iakNhY2hlW2JdPWQ7cmV0dXJuIGR9O3RoaXMuYXR5cGUyb2JqPWZ1bmN0aW9uKGIpe2lmKHR5cGVvZiB0aGlzLm9iakNhY2hlW2JdIT0idW5kZWZpbmVkIil7cmV0dXJuIHRoaXMub2JqQ2FjaGVbYl19aWYodHlwZW9mIHRoaXMuYXR5cGUyb2lkTGlzdFtiXT09InVuZGVmaW5lZCIpe3Rocm93IkF0dHJpYnV0ZVR5cGUgbmFtZSB1bmRlZmluZWQ6ICIrYn12YXIgYz10aGlzLmF0eXBlMm9pZExpc3RbYl07dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6Y30pO3RoaXMub2JqQ2FjaGVbYl09ZDtyZXR1cm4gZH19O0tKVVIuYXNuMS54NTA5Lk9JRC5vaWQybmFtZT1mdW5jdGlvbihiKXt2YXIgYz1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0O2Zvcih2YXIgYSBpbiBjKXtpZihjW2FdPT1iKXtyZXR1cm4gYX19cmV0dXJuIiJ9O0tKVVIuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZD1mdW5jdGlvbihhKXt2YXIgYj1LSlVSLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0O2lmKGJbYV09PT11bmRlZmluZWQpe3JldHVybiIifXJldHVybiBiW2FdfTtLSlVSLmFzbjEueDUwOS5YNTA5VXRpbD1uZXcgZnVuY3Rpb24oKXt0aGlzLmdldFBLQ1M4UHViS2V5UEVNZnJvbVJTQUtleT1mdW5jdGlvbihpKXt2YXIgaD1udWxsO3ZhciBmPUtKVVIuYXNuMS5BU04xVXRpbC5iaWdJbnRUb01pblR3b3NDb21wbGVtZW50c0hleChpLm4pO3ZhciBqPUtKVVIuYXNuMS5BU04xVXRpbC5pbnRlZ2VyVG9CeXRlSGV4KGkuZSk7dmFyIGE9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtoZXg6Zn0pO3ZhciBnPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7aGV4Omp9KTt2YXIgbD1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbYSxnXX0pO3ZhciBjPWwuZ2V0RW5jb2RlZEhleCgpO3ZhciBkPW5ldyBLSlVSLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOiJyc2FFbmNyeXB0aW9uIn0pO3ZhciBiPW5ldyBLSlVSLmFzbjEuREVSQml0U3RyaW5nKHtoZXg6IjAwIitjfSk7dmFyIGs9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2QsYl19KTt2YXIgZT1rLmdldEVuY29kZWRIZXgoKTt2YXIgaD1LSlVSLmFzbjEuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChlLCJQVUJMSUMgS0VZIik7cmV0dXJuIGh9fTtLSlVSLmFzbjEueDUwOS5YNTA5VXRpbC5uZXdDZXJ0UEVNPWZ1bmN0aW9uKGYpe3ZhciBjPUtKVVIuYXNuMS54NTA5O3ZhciBlPW5ldyBjLlRCU0NlcnRpZmljYXRlKCk7aWYoZi5zZXJpYWwhPT11bmRlZmluZWQpe2Uuc2V0U2VyaWFsTnVtYmVyQnlQYXJhbShmLnNlcmlhbCl9ZWxzZXt0aHJvdyJzZXJpYWwgbnVtYmVyIHVuZGVmaW5lZC4ifWlmKHR5cGVvZiBmLnNpZ2FsZy5uYW1lPT0ic3RyaW5nIil7ZS5zZXRTaWduYXR1cmVBbGdCeVBhcmFtKGYuc2lnYWxnKX1lbHNle3Rocm93InVucHJvcGVyIHNpZ25hdHVyZSBhbGdvcml0aG0gbmFtZSJ9aWYoZi5pc3N1ZXIhPT11bmRlZmluZWQpe2Uuc2V0SXNzdWVyQnlQYXJhbShmLmlzc3Vlcil9ZWxzZXt0aHJvdyJpc3N1ZXIgbmFtZSB1bmRlZmluZWQuIn1pZihmLm5vdGJlZm9yZSE9PXVuZGVmaW5lZCl7ZS5zZXROb3RCZWZvcmVCeVBhcmFtKGYubm90YmVmb3JlKX1lbHNle3Rocm93Im5vdGJlZm9yZSB1bmRlZmluZWQuIn1pZihmLm5vdGFmdGVyIT09dW5kZWZpbmVkKXtlLnNldE5vdEFmdGVyQnlQYXJhbShmLm5vdGFmdGVyKX1lbHNle3Rocm93Im5vdGFmdGVyIHVuZGVmaW5lZC4ifWlmKGYuc3ViamVjdCE9PXVuZGVmaW5lZCl7ZS5zZXRTdWJqZWN0QnlQYXJhbShmLnN1YmplY3QpfWVsc2V7dGhyb3cic3ViamVjdCBuYW1lIHVuZGVmaW5lZC4ifWlmKGYuc2JqcHVia2V5IT09dW5kZWZpbmVkKXtlLnNldFN1YmplY3RQdWJsaWNLZXlCeUdldEtleShmLnNianB1YmtleSl9ZWxzZXt0aHJvdyJzdWJqZWN0IHB1YmxpYyBrZXkgdW5kZWZpbmVkLiJ9aWYoZi5leHQhPT11bmRlZmluZWQmJmYuZXh0Lmxlbmd0aCE9PXVuZGVmaW5lZCl7Zm9yKHZhciBiPTA7YjxmLmV4dC5sZW5ndGg7YisrKXtmb3Ioa2V5IGluIGYuZXh0W2JdKXtlLmFwcGVuZEV4dGVuc2lvbkJ5TmFtZShrZXksZi5leHRbYl1ba2V5XSl9fX1pZihmLmNha2V5PT09dW5kZWZpbmVkJiZmLnNpZ2hleD09PXVuZGVmaW5lZCl7dGhyb3cicGFyYW0gY2FrZXkgYW5kIHNpZ2hleCB1bmRlZmluZWQuIn12YXIgZD1udWxsO3ZhciBhPW51bGw7aWYoZi5jYWtleSl7ZD1LRVlVVElMLmdldEtleS5hcHBseShudWxsLGYuY2FrZXkpO2E9bmV3IGMuQ2VydGlmaWNhdGUoe3Ric2NlcnRvYmo6ZSxwcnZrZXlvYmo6ZH0pO2Euc2lnbigpfWlmKGYuc2lnaGV4KXthPW5ldyBjLkNlcnRpZmljYXRlKHt0YnNjZXJ0b2JqOmV9KTthLnNldFNpZ25hdHVyZUhleChmLnNpZ2hleCl9cmV0dXJuIGEuZ2V0UEVNU3RyaW5nKCl9OwovKiEgYXNuMWNtcy0xLjAuMi5qcyAoYykgMjAxMy0yMDE0IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319aWYodHlwZW9mIEtKVVIuYXNuMS5jbXM9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xLmNtcyl7S0pVUi5hc24xLmNtcz17fX1LSlVSLmFzbjEuY21zLkF0dHJpYnV0ZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9W107dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGYsZSxjO2Y9bmV3IEtKVVIuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyKHtvaWQ6dGhpcy5hdHRyVHlwZU9pZH0pO2U9bmV3IEtKVVIuYXNuMS5ERVJTZXQoe2FycmF5OnRoaXMudmFsdWVMaXN0fSk7dHJ5e2UuZ2V0RW5jb2RlZEhleCgpfWNhdGNoKGQpe3Rocm93ImZhaWwgdmFsdWVTZXQuZ2V0RW5jb2RlZEhleCBpbiBBdHRyaWJ1dGUoMSkvIitkfWM9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2YsZV19KTt0cnl7dGhpcy5oVExWPWMuZ2V0RW5jb2RlZEhleCgpfWNhdGNoKGQpe3Rocm93ImZhaWxlZCBzZXEuZ2V0RW5jb2RlZEhleCBpbiBBdHRyaWJ1dGUoMikvIitkfXJldHVybiB0aGlzLmhUTFZ9fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNtcy5Db250ZW50VHlwZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEuY21zLkNvbnRlbnRUeXBlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuMyI7dmFyIGE9bnVsbDtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcihiKTt0aGlzLnZhbHVlTGlzdD1bYV19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLkNvbnRlbnRUeXBlLEtKVVIuYXNuMS5jbXMuQXR0cmlidXRlKTtLSlVSLmFzbjEuY21zLk1lc3NhZ2VEaWdlc3Q9ZnVuY3Rpb24oZSl7S0pVUi5hc24xLmNtcy5NZXNzYWdlRGlnZXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuNCI7aWYodHlwZW9mIGUhPSJ1bmRlZmluZWQiKXtpZihlLmVjaU9iaiBpbnN0YW5jZW9mIEtKVVIuYXNuMS5jbXMuRW5jYXBzdWxhdGVkQ29udGVudEluZm8mJnR5cGVvZiBlLmhhc2hBbGc9PSJzdHJpbmciKXt2YXIgYj1lLmVjaU9iai5lQ29udGVudFZhbHVlSGV4O3ZhciBhPWUuaGFzaEFsZzt2YXIgYz1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYixhKTt2YXIgZD1uZXcgS0pVUi5hc24xLkRFUk9jdGV0U3RyaW5nKHtoZXg6Y30pO2QuZ2V0RW5jb2RlZEhleCgpO3RoaXMudmFsdWVMaXN0PVtkXX1lbHNle3ZhciBkPW5ldyBLSlVSLmFzbjEuREVST2N0ZXRTdHJpbmcoZSk7ZC5nZXRFbmNvZGVkSGV4KCk7dGhpcy52YWx1ZUxpc3Q9W2RdfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuTWVzc2FnZURpZ2VzdCxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNtcy5TaWduaW5nVGltZT1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY21zLlNpZ25pbmdUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuNSI7aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXt2YXIgYT1uZXcgS0pVUi5hc24xLng1MDkuVGltZShjKTt0cnl7YS5nZXRFbmNvZGVkSGV4KCl9Y2F0Y2goYil7dGhyb3ciU2lnbmluZ1RpbWUuZ2V0RW5jb2RlZEhleCgpIGZhaWxlZC8iK2J9dGhpcy52YWx1ZUxpc3Q9W2FdfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5TaWduaW5nVGltZSxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGU9ZnVuY3Rpb24oZCl7S0pVUi5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjEyIjt2YXIgYT1LSlVSLmFzbjE7dmFyIGM9S0pVUi5hc24xLmNtczt2YXIgYj1LSlVSLmNyeXB0bzt0aGlzLnNldENlcnRzPWZ1bmN0aW9uKGwpe3ZhciBqPVtdO2Zvcih2YXIgaD0wO2g8bC5sZW5ndGg7aCsrKXt2YXIgZj1LRVlVVElMLmdldEhleEZyb21QRU0obFtoXSk7dmFyIGU9Yi5VdGlsLmhhc2hIZXgoZiwic2hhMSIpO3ZhciBtPW5ldyBhLkRFUk9jdGV0U3RyaW5nKHtoZXg6ZX0pO20uZ2V0RW5jb2RlZEhleCgpO3ZhciBrPW5ldyBjLklzc3VlckFuZFNlcmlhbE51bWJlcih7Y2VydDpsW2hdfSk7ay5nZXRFbmNvZGVkSGV4KCk7dmFyIG49bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OlttLGtdfSk7bi5nZXRFbmNvZGVkSGV4KCk7ai5wdXNoKG4pfXZhciBnPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpqfSk7Zy5nZXRFbmNvZGVkSGV4KCk7dGhpcy52YWx1ZUxpc3Q9W2ddfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBkLmFycmF5PT0ib2JqZWN0Iil7dGhpcy5zZXRDZXJ0cyhkLmFycmF5KX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZSxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGVWMj1mdW5jdGlvbihlKXtLSlVSLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmF0dHJUeXBlT2lkPSIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi40NyI7dmFyIGI9S0pVUi5hc24xO3ZhciBmPUtKVVIuYXNuMS54NTA5O3ZhciBkPUtKVVIuYXNuMS5jbXM7dmFyIGM9S0pVUi5jcnlwdG87dGhpcy5zZXRDZXJ0cz1mdW5jdGlvbihwLGgpe3ZhciBuPVtdO2Zvcih2YXIgbD0wO2w8cC5sZW5ndGg7bCsrKXt2YXIgaj1LRVlVVElMLmdldEhleEZyb21QRU0ocFtsXSk7dmFyIHI9W107aWYoaCE9InNoYTI1NiIpe3IucHVzaChuZXcgZi5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmh9KSl9dmFyIGc9Yy5VdGlsLmhhc2hIZXgoaixoKTt2YXIgcT1uZXcgYi5ERVJPY3RldFN0cmluZyh7aGV4Omd9KTtxLmdldEVuY29kZWRIZXgoKTtyLnB1c2gocSk7dmFyIG09bmV3IGQuSXNzdWVyQW5kU2VyaWFsTnVtYmVyKHtjZXJ0OnBbbF19KTttLmdldEVuY29kZWRIZXgoKTtyLnB1c2gobSk7dmFyIG89bmV3IGIuREVSU2VxdWVuY2Uoe2FycmF5OnJ9KTtvLmdldEVuY29kZWRIZXgoKTtuLnB1c2gobyl9dmFyIGs9bmV3IGIuREVSU2VxdWVuY2Uoe2FycmF5Om59KTtrLmdldEVuY29kZWRIZXgoKTt0aGlzLnZhbHVlTGlzdD1ba119O2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUuYXJyYXk9PSJvYmplY3QiKXt2YXIgYT0ic2hhMjU2IjtpZih0eXBlb2YgZS5oYXNoQWxnPT0ic3RyaW5nIil7YT1lLmhhc2hBbGd9dGhpcy5zZXRDZXJ0cyhlLmFycmF5LGEpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlVjIsS0pVUi5hc24xLmNtcy5BdHRyaWJ1dGUpO0tKVVIuYXNuMS5jbXMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgZT1udWxsO3ZhciBiPW51bGw7dmFyIGE9S0pVUi5hc24xO3ZhciBkPWEueDUwOTt0aGlzLnNldEJ5Q2VydFBFTT1mdW5jdGlvbihpKXt2YXIgZz1LRVlVVElMLmdldEhleEZyb21QRU0oaSk7dmFyIGY9bmV3IFg1MDkoKTtmLmhleD1nO3ZhciBqPWYuZ2V0SXNzdWVySGV4KCk7dGhpcy5kSXNzdWVyPW5ldyBkLlg1MDBOYW1lKCk7dGhpcy5kSXNzdWVyLmhUTFY9ajt2YXIgaD1mLmdldFNlcmlhbE51bWJlckhleCgpO3RoaXMuZFNlcmlhbD1uZXcgYS5ERVJJbnRlZ2VyKHtoZXg6aH0pfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZj1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5kSXNzdWVyLHRoaXMuZFNlcmlhbF19KTt0aGlzLmhUTFY9Zi5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYz09InN0cmluZyImJmMuaW5kZXhPZigiLS0tLS1CRUdJTiAiKSE9LTEpe3RoaXMuc2V0QnlDZXJ0UEVNKGMpfWlmKGMuaXNzdWVyJiZjLnNlcmlhbCl7aWYoYy5pc3N1ZXIgaW5zdGFuY2VvZiBLSlVSLmFzbjEueDUwOS5YNTAwTmFtZSl7dGhpcy5kSXNzdWVyPWMuaXNzdWVyfWVsc2V7dGhpcy5kSXNzdWVyPW5ldyBLSlVSLmFzbjEueDUwOS5YNTAwTmFtZShjLmlzc3Vlcil9aWYoYy5zZXJpYWwgaW5zdGFuY2VvZiBLSlVSLmFzbjEuREVSSW50ZWdlcil7dGhpcy5kU2VyaWFsPWMuc2VyaWFsfWVsc2V7dGhpcy5kU2VyaWFsPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcihjLnNlcmlhbCl9fWlmKHR5cGVvZiBjLmNlcnQ9PSJzdHJpbmciKXt0aGlzLnNldEJ5Q2VydFBFTShjLmNlcnQpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3Q9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLmNtcy5BdHRyaWJ1dGVMaXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLmxpc3Q9bmV3IEFycmF5KCk7dGhpcy5zb3J0RmxhZz10cnVlO3RoaXMuYWRkPWZ1bmN0aW9uKGIpe2lmKGIgaW5zdGFuY2VvZiBLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSl7dGhpcy5saXN0LnB1c2goYil9fTt0aGlzLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpc3QubGVuZ3RofTt0aGlzLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5saXN0PW5ldyBBcnJheSgpO3RoaXMuaFRMVj1udWxsO3RoaXMuaFY9bnVsbH07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMuaFRMVj09InN0cmluZyIpe3JldHVybiB0aGlzLmhUTFZ9dmFyIGI9bmV3IEtKVVIuYXNuMS5ERVJTZXQoe2FycmF5OnRoaXMubGlzdCxzb3J0ZmxhZzp0aGlzLnNvcnRGbGFnfSk7dGhpcy5oVExWPWIuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGEuc29ydGZsYWchPSJ1bmRlZmluZWQiJiZhLnNvcnRmbGFnPT1mYWxzZSl7dGhpcy5zb3J0RmxhZz1mYWxzZX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3QsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuU2lnbmVySW5mbz1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY21zLlNpZ25lckluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY21zO3ZhciBkPUtKVVIuYXNuMS54NTA5O3RoaXMuZENNU1ZlcnNpb249bmV3IGEuREVSSW50ZWdlcih7ImludCI6MX0pO3RoaXMuZFNpZ25lcklkZW50aWZpZXI9bnVsbDt0aGlzLmREaWdlc3RBbGdvcml0aG09bnVsbDt0aGlzLmRTaWduZWRBdHRycz1uZXcgYi5BdHRyaWJ1dGVMaXN0KCk7dGhpcy5kU2lnQWxnPW51bGw7dGhpcy5kU2lnPW51bGw7dGhpcy5kVW5zaWduZWRBdHRycz1uZXcgYi5BdHRyaWJ1dGVMaXN0KCk7dGhpcy5zZXRTaWduZXJJZGVudGlmaWVyPWZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBmPT0ic3RyaW5nIiYmZi5pbmRleE9mKCJDRVJUSUZJQ0FURSIpIT0tMSYmZi5pbmRleE9mKCJCRUdJTiIpIT0tMSYmZi5pbmRleE9mKCJFTkQiKSE9LTEpe3ZhciBlPWY7dGhpcy5kU2lnbmVySWRlbnRpZmllcj1uZXcgYi5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIoe2NlcnQ6Zn0pfX07dGhpcy5zZXRGb3JDb250ZW50QW5kSGFzaD1mdW5jdGlvbihlKXtpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKGUuZWNpT2JqIGluc3RhbmNlb2YgS0pVUi5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbyl7dGhpcy5kU2lnbmVkQXR0cnMuYWRkKG5ldyBiLkNvbnRlbnRUeXBlKHtvaWQ6IjEuMi44NDAuMTEzNTQ5LjEuNy4xIn0pKTt0aGlzLmRTaWduZWRBdHRycy5hZGQobmV3IGIuTWVzc2FnZURpZ2VzdCh7ZWNpT2JqOmUuZWNpT2JqLGhhc2hBbGc6ZS5oYXNoQWxnfSkpfWlmKHR5cGVvZiBlLnNkT2JqIT0idW5kZWZpbmVkIiYmZS5zZE9iaiBpbnN0YW5jZW9mIEtKVVIuYXNuMS5jbXMuU2lnbmVkRGF0YSl7aWYoZS5zZE9iai5kaWdlc3RBbGdOYW1lTGlzdC5qb2luKCI6IikuaW5kZXhPZihlLmhhc2hBbGcpPT0tMSl7ZS5zZE9iai5kaWdlc3RBbGdOYW1lTGlzdC5wdXNoKGUuaGFzaEFsZyl9fWlmKHR5cGVvZiBlLmhhc2hBbGc9PSJzdHJpbmciKXt0aGlzLmREaWdlc3RBbGdvcml0aG09bmV3IGQuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTplLmhhc2hBbGd9KX19fTt0aGlzLnNpZ249ZnVuY3Rpb24oaixmKXt0aGlzLmRTaWdBbGc9bmV3IGQuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTpmfSk7dmFyIGc9dGhpcy5kU2lnbmVkQXR0cnMuZ2V0RW5jb2RlZEhleCgpO3ZhciBlPUtFWVVUSUwuZ2V0S2V5KGopO3ZhciBpPW5ldyBLSlVSLmNyeXB0by5TaWduYXR1cmUoe2FsZzpmfSk7aS5pbml0KGUpO2kudXBkYXRlSGV4KGcpO3ZhciBoPWkuc2lnbigpO3RoaXMuZFNpZz1uZXcgYS5ERVJPY3RldFN0cmluZyh7aGV4Omh9KX07dGhpcy5hZGRVbnNpZ25lZD1mdW5jdGlvbihlKXt0aGlzLmhUTFY9bnVsbDt0aGlzLmRVbnNpZ25lZEF0dHJzLmhUTFY9bnVsbDt0aGlzLmRVbnNpZ25lZEF0dHJzLmFkZChlKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kU2lnbmVkQXR0cnMgaW5zdGFuY2VvZiBLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3QmJnRoaXMuZFNpZ25lZEF0dHJzLmxlbmd0aCgpPT0wKXt0aHJvdyJTaWduZWRBdHRycyBsZW5ndGggPSAwIChlbXB0eSkifXZhciBlPW5ldyBhLkRFUlRhZ2dlZE9iamVjdCh7b2JqOnRoaXMuZFNpZ25lZEF0dHJzLHRhZzoiYTAiLGV4cGxpY2l0OmZhbHNlfSk7dmFyIGg9bnVsbDtpZih0aGlzLmRVbnNpZ25lZEF0dHJzLmxlbmd0aCgpPjApe2g9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6dGhpcy5kVW5zaWduZWRBdHRycyx0YWc6ImExIixleHBsaWNpdDpmYWxzZX0pfXZhciBnPVt0aGlzLmRDTVNWZXJzaW9uLHRoaXMuZFNpZ25lcklkZW50aWZpZXIsdGhpcy5kRGlnZXN0QWxnb3JpdGhtLGUsdGhpcy5kU2lnQWxnLHRoaXMuZFNpZyxdO2lmKGghPW51bGwpe2cucHVzaChoKX12YXIgZj1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6Z30pO3RoaXMuaFRMVj1mLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5TaWduZXJJbmZvLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jbXMuRW5jYXBzdWxhdGVkQ29udGVudEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY21zO3ZhciBkPUtKVVIuYXNuMS54NTA5O3RoaXMuZEVDb250ZW50VHlwZT1uZXcgYS5ERVJPYmplY3RJZGVudGlmaWVyKHtuYW1lOiJkYXRhIn0pO3RoaXMuZEVDb250ZW50PW51bGw7dGhpcy5pc0RldGFjaGVkPWZhbHNlO3RoaXMuZUNvbnRlbnRWYWx1ZUhleD1udWxsO3RoaXMuc2V0Q29udGVudFR5cGU9ZnVuY3Rpb24oZSl7aWYoZS5tYXRjaCgvXlswLTJdWy5dWzAtOS5dKyQvKSl7dGhpcy5kRUNvbnRlbnRUeXBlPW5ldyBhLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDplfSl9ZWxzZXt0aGlzLmRFQ29udGVudFR5cGU9bmV3IGEuREVST2JqZWN0SWRlbnRpZmllcih7bmFtZTplfSl9fTt0aGlzLnNldENvbnRlbnRWYWx1ZT1mdW5jdGlvbihlKXtpZih0eXBlb2YgZSE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBlLmhleD09InN0cmluZyIpe3RoaXMuZUNvbnRlbnRWYWx1ZUhleD1lLmhleH1lbHNle2lmKHR5cGVvZiBlLnN0cj09InN0cmluZyIpe3RoaXMuZUNvbnRlbnRWYWx1ZUhleD11dGY4dG9oZXgoZS5zdHIpfX19fTt0aGlzLnNldENvbnRlbnRWYWx1ZUhleD1mdW5jdGlvbihlKXt0aGlzLmVDb250ZW50VmFsdWVIZXg9ZX07dGhpcy5zZXRDb250ZW50VmFsdWVTdHI9ZnVuY3Rpb24oZSl7dGhpcy5lQ29udGVudFZhbHVlSGV4PXV0Zjh0b2hleChlKX07dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMuZUNvbnRlbnRWYWx1ZUhleCE9InN0cmluZyIpe3Rocm93ImVDb250ZW50VmFsdWUgbm90IHlldCBzZXQifXZhciBnPW5ldyBhLkRFUk9jdGV0U3RyaW5nKHtoZXg6dGhpcy5lQ29udGVudFZhbHVlSGV4fSk7dGhpcy5kRUNvbnRlbnQ9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6Zyx0YWc6ImEwIixleHBsaWNpdDp0cnVlfSk7dmFyIGU9W3RoaXMuZEVDb250ZW50VHlwZV07aWYoIXRoaXMuaXNEZXRhY2hlZCl7ZS5wdXNoKHRoaXMuZEVDb250ZW50KX12YXIgZj1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZX0pO3RoaXMuaFRMVj1mLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNtcy5Db250ZW50SW5mbz1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY21zLkNvbnRlbnRJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLmNtczt2YXIgZD1LSlVSLmFzbjEueDUwOTt0aGlzLmRDb250ZW50VHlwZT1udWxsO3RoaXMuZENvbnRlbnQ9bnVsbDt0aGlzLnNldENvbnRlbnRUeXBlPWZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlPT0ic3RyaW5nIil7dGhpcy5kQ29udGVudFR5cGU9ZC5PSUQubmFtZTJvYmooZSl9fTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZj1uZXcgYS5ERVJUYWdnZWRPYmplY3Qoe29iajp0aGlzLmRDb250ZW50LHRhZzoiYTAiLGV4cGxpY2l0OnRydWV9KTt2YXIgZT1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6W3RoaXMuZENvbnRlbnRUeXBlLGZdfSk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYoYy50eXBlKXt0aGlzLnNldENvbnRlbnRUeXBlKGMudHlwZSl9aWYoYy5vYmomJmMub2JqIGluc3RhbmNlb2YgYS5BU04xT2JqZWN0KXt0aGlzLmRDb250ZW50PWMub2JqfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jbXMuQ29udGVudEluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jbXMuU2lnbmVkRGF0YT1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY21zLlNpZ25lZERhdGEuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY21zO3ZhciBkPUtKVVIuYXNuMS54NTA5O3RoaXMuZENNU1ZlcnNpb249bmV3IGEuREVSSW50ZWdlcih7ImludCI6MX0pO3RoaXMuZERpZ2VzdEFsZ3M9bnVsbDt0aGlzLmRpZ2VzdEFsZ05hbWVMaXN0PVtdO3RoaXMuZEVuY2FwQ29udGVudEluZm89bmV3IGIuRW5jYXBzdWxhdGVkQ29udGVudEluZm8oKTt0aGlzLmRDZXJ0cz1udWxsO3RoaXMuY2VydGlmaWNhdGVMaXN0PVtdO3RoaXMuY3JsTGlzdD1bXTt0aGlzLnNpZ25lckluZm9MaXN0PVtuZXcgYi5TaWduZXJJbmZvKCldO3RoaXMuYWRkQ2VydGlmaWNhdGVzQnlQRU09ZnVuY3Rpb24oZSl7dmFyIGY9S0VZVVRJTC5nZXRIZXhGcm9tUEVNKGUpO3ZhciBnPW5ldyBhLkFTTjFPYmplY3QoKTtnLmhUTFY9Zjt0aGlzLmNlcnRpZmljYXRlTGlzdC5wdXNoKGcpfTt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXtpZih0eXBlb2YgdGhpcy5oVExWPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMuaFRMVn1pZih0aGlzLmREaWdlc3RBbGdzPT1udWxsKXt2YXIgaz1bXTtmb3IodmFyIGo9MDtqPHRoaXMuZGlnZXN0QWxnTmFtZUxpc3QubGVuZ3RoO2orKyl7dmFyIGg9dGhpcy5kaWdlc3RBbGdOYW1lTGlzdFtqXTt2YXIgbT1uZXcgZC5BbGdvcml0aG1JZGVudGlmaWVyKHtuYW1lOmh9KTtrLnB1c2gobSl9dGhpcy5kRGlnZXN0QWxncz1uZXcgYS5ERVJTZXQoe2FycmF5Omt9KX12YXIgZT1bdGhpcy5kQ01TVmVyc2lvbix0aGlzLmREaWdlc3RBbGdzLHRoaXMuZEVuY2FwQ29udGVudEluZm9dO2lmKHRoaXMuZENlcnRzPT1udWxsKXtpZih0aGlzLmNlcnRpZmljYXRlTGlzdC5sZW5ndGg+MCl7dmFyIGw9bmV3IGEuREVSU2V0KHthcnJheTp0aGlzLmNlcnRpZmljYXRlTGlzdH0pO3RoaXMuZENlcnRzPW5ldyBhLkRFUlRhZ2dlZE9iamVjdCh7b2JqOmwsdGFnOiJhMCIsZXhwbGljaXQ6ZmFsc2V9KX19aWYodGhpcy5kQ2VydHMhPW51bGwpe2UucHVzaCh0aGlzLmRDZXJ0cyl9dmFyIGc9bmV3IGEuREVSU2V0KHthcnJheTp0aGlzLnNpZ25lckluZm9MaXN0fSk7ZS5wdXNoKGcpO3ZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTplfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuZ2V0Q29udGVudEluZm89ZnVuY3Rpb24oKXt0aGlzLmdldEVuY29kZWRIZXgoKTt2YXIgZT1uZXcgYi5Db250ZW50SW5mbyh7dHlwZToic2lnbmVkLWRhdGEiLG9iajp0aGlzfSk7cmV0dXJuIGV9O3RoaXMuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRDb250ZW50SW5mbygpO3ZhciBmPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiBmfTt0aGlzLmdldFBFTT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4KCk7dmFyIGY9YS5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGUsIkNNUyIpO3JldHVybiBmfX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNtcy5TaWduZWREYXRhLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY21zLkNNU1V0aWw9bmV3IGZ1bmN0aW9uKCl7fTtLSlVSLmFzbjEuY21zLkNNU1V0aWwubmV3U2lnbmVkRGF0YT1mdW5jdGlvbihhKXt2YXIgaD1LSlVSLmFzbjEuY21zO3ZhciBnPUtKVVIuYXNuMS5jYWRlczt2YXIgZj1uZXcgaC5TaWduZWREYXRhKCk7Zi5kRW5jYXBDb250ZW50SW5mby5zZXRDb250ZW50VmFsdWUoYS5jb250ZW50KTtpZih0eXBlb2YgYS5jZXJ0cz09Im9iamVjdCIpe2Zvcih2YXIgYj0wO2I8YS5jZXJ0cy5sZW5ndGg7YisrKXtmLmFkZENlcnRpZmljYXRlc0J5UEVNKGEuY2VydHNbYl0pfX1mLnNpZ25lckluZm9MaXN0PVtdO2Zvcih2YXIgYj0wO2I8YS5zaWduZXJJbmZvcy5sZW5ndGg7YisrKXt2YXIgZD1hLnNpZ25lckluZm9zW2JdO3ZhciBjPW5ldyBoLlNpZ25lckluZm8oKTtjLnNldFNpZ25lcklkZW50aWZpZXIoZC5zaWduZXJDZXJ0KTtjLnNldEZvckNvbnRlbnRBbmRIYXNoKHtzZE9iajpmLGVjaU9iajpmLmRFbmNhcENvbnRlbnRJbmZvLGhhc2hBbGc6ZC5oYXNoQWxnfSk7Zm9yKGF0dHJOYW1lIGluIGQuc0F0dHIpe3ZhciBqPWQuc0F0dHJbYXR0ck5hbWVdO2lmKGF0dHJOYW1lPT0iU2lnbmluZ1RpbWUiKXt2YXIgZT1uZXcgaC5TaWduaW5nVGltZShqKTtjLmRTaWduZWRBdHRycy5hZGQoZSl9aWYoYXR0ck5hbWU9PSJTaWduaW5nQ2VydGlmaWNhdGUiKXt2YXIgZT1uZXcgaC5TaWduaW5nQ2VydGlmaWNhdGUoaik7Yy5kU2lnbmVkQXR0cnMuYWRkKGUpfWlmKGF0dHJOYW1lPT0iU2lnbmluZ0NlcnRpZmljYXRlVjIiKXt2YXIgZT1uZXcgaC5TaWduaW5nQ2VydGlmaWNhdGVWMihqKTtjLmRTaWduZWRBdHRycy5hZGQoZSl9aWYoYXR0ck5hbWU9PSJTaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyIil7dmFyIGU9bmV3IGcuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcihqKTtjLmRTaWduZWRBdHRycy5hZGQoZSl9fWMuc2lnbihkLnNpZ25lclBydktleSxkLnNpZ0FsZyk7Zi5zaWduZXJJbmZvTGlzdC5wdXNoKGMpfXJldHVybiBmfTsKLyohIGFzbjF0c3AtMS4wLjEuanMgKGMpIDIwMTQgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuYXNuMT09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEpe0tKVVIuYXNuMT17fX1pZih0eXBlb2YgS0pVUi5hc24xLnRzcD09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEudHNwKXtLSlVSLmFzbjEudHNwPXt9fUtKVVIuYXNuMS50c3AuQWNjdXJhY3k9ZnVuY3Rpb24oYil7S0pVUi5hc24xLnRzcC5BY2N1cmFjeS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3RoaXMuc2Vjb25kcz1udWxsO3RoaXMubWlsbGlzPW51bGw7dGhpcy5taWNyb3M9bnVsbDt0aGlzLmdldEVuY29kZWRIZXg9ZnVuY3Rpb24oKXt2YXIgZT1udWxsO3ZhciBnPW51bGw7dmFyIGk9bnVsbDt2YXIgYz1bXTtpZih0aGlzLnNlY29uZHMhPW51bGwpe2U9bmV3IGEuREVSSW50ZWdlcih7ImludCI6dGhpcy5zZWNvbmRzfSk7Yy5wdXNoKGUpfWlmKHRoaXMubWlsbGlzIT1udWxsKXt2YXIgaD1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50Ijp0aGlzLm1pbGxpc30pO2c9bmV3IGEuREVSVGFnZ2VkT2JqZWN0KHtvYmo6aCx0YWc6IjgwIixleHBsaWNpdDpmYWxzZX0pO2MucHVzaChnKX1pZih0aGlzLm1pY3JvcyE9bnVsbCl7dmFyIGY9bmV3IGEuREVSSW50ZWdlcih7ImludCI6dGhpcy5taWNyb3N9KTtpPW5ldyBhLkRFUlRhZ2dlZE9iamVjdCh7b2JqOmYsdGFnOiI4MSIsZXhwbGljaXQ6ZmFsc2V9KTtjLnB1c2goaSl9dmFyIGQ9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmN9KTt0aGlzLmhUTFY9ZC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5zZWNvbmRzPT0ibnVtYmVyIil7dGhpcy5zZWNvbmRzPWIuc2Vjb25kc31pZih0eXBlb2YgYi5taWxsaXM9PSJudW1iZXIiKXt0aGlzLm1pbGxpcz1iLm1pbGxpc31pZih0eXBlb2YgYi5taWNyb3M9PSJudW1iZXIiKXt0aGlzLm1pY3Jvcz1iLm1pY3Jvc319fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLkFjY3VyYWN5LEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEudHNwLk1lc3NhZ2VJbXByaW50PWZ1bmN0aW9uKGIpe0tKVVIuYXNuMS50c3AuTWVzc2FnZUltcHJpbnQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYz1LSlVSLmFzbjEueDUwOTt0aGlzLmRIYXNoQWxnPW51bGw7dGhpcy5kSGFzaFZhbHVlPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMuaFRMVj09InN0cmluZyIpe3JldHVybiB0aGlzLmhUTFZ9dmFyIGQ9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmRIYXNoQWxnLHRoaXMuZEhhc2hWYWx1ZV19KTtyZXR1cm4gZC5nZXRFbmNvZGVkSGV4KCl9O2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGIuaGFzaEFsZz09InN0cmluZyIpe3RoaXMuZEhhc2hBbGc9bmV3IGMuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTpiLmhhc2hBbGd9KX1pZih0eXBlb2YgYi5oYXNoVmFsdWU9PSJzdHJpbmciKXt0aGlzLmRIYXNoVmFsdWU9bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDpiLmhhc2hWYWx1ZX0pfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuTWVzc2FnZUltcHJpbnQsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVxPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVxLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLnRzcDt0aGlzLmRWZXJzaW9uPW5ldyBhLkRFUkludGVnZXIoeyJpbnQiOjF9KTt0aGlzLmRNZXNzYWdlSW1wcmludD1udWxsO3RoaXMuZFBvbGljeT1udWxsO3RoaXMuZE5vbmNlPW51bGw7dGhpcy5jZXJ0UmVxPXRydWU7dGhpcy5zZXRNZXNzYWdlSW1wcmludD1mdW5jdGlvbihkKXtpZihkIGluc3RhbmNlb2YgS0pVUi5hc24xLnRzcC5NZXNzYWdlSW1wcmludCl7dGhpcy5kTWVzc2FnZUltcHJpbnQ9ZDtyZXR1cm59aWYodHlwZW9mIGQ9PSJvYmplY3QiKXt0aGlzLmRNZXNzYWdlSW1wcmludD1uZXcgYi5NZXNzYWdlSW1wcmludChkKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuZE1lc3NhZ2VJbXByaW50PT1udWxsKXt0aHJvdyJtZXNzYWdlSW1wcmludCBzaGFsbCBiZSBzcGVjaWZpZWQifXZhciBkPVt0aGlzLmRWZXJzaW9uLHRoaXMuZE1lc3NhZ2VJbXByaW50XTtpZih0aGlzLmRQb2xpY3khPW51bGwpe2QucHVzaCh0aGlzLmRQb2xpY3kpfWlmKHRoaXMuZE5vbmNlIT1udWxsKXtkLnB1c2godGhpcy5kTm9uY2UpfWlmKHRoaXMuY2VydFJlcSl7ZC5wdXNoKG5ldyBhLkRFUkJvb2xlYW4oKSl9dmFyIGU9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5OmR9KTt0aGlzLmhUTFY9ZS5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYy5taT09Im9iamVjdCIpe3RoaXMuc2V0TWVzc2FnZUltcHJpbnQoYy5taSl9aWYodHlwZW9mIGMucG9saWN5PT0ib2JqZWN0Iil7dGhpcy5kUG9saWN5PW5ldyBhLkRFUk9iamVjdElkZW50aWZpZXIoYy5wb2xpY3kpfWlmKHR5cGVvZiBjLm5vbmNlPT0ib2JqZWN0Iil7dGhpcy5kTm9uY2U9bmV3IGEuREVSSW50ZWdlcihjLm5vbmNlKX1pZih0eXBlb2YgYy5jZXJ0cmVxPT0iYm9vbGVhbiIpe3RoaXMuY2VydFJlcT1jLmNlcnRyZXF9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5UaW1lU3RhbXBSZXEsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuVFNUSW5mbz1mdW5jdGlvbihjKXtLSlVSLmFzbjEudHNwLlRTVEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgZD1LSlVSLmFzbjEueDUwOTt2YXIgYj1LSlVSLmFzbjEudHNwO3RoaXMuZFZlcnNpb249bmV3IGEuREVSSW50ZWdlcih7ImludCI6MX0pO3RoaXMuZFBvbGljeT1udWxsO3RoaXMuZE1lc3NhZ2VJbXByaW50PW51bGw7dGhpcy5kU2VyaWFsTnVtYmVyPW51bGw7dGhpcy5kR2VuVGltZT1udWxsO3RoaXMuZEFjY3VyYWN5PW51bGw7dGhpcy5kT3JkZXJpbmc9bnVsbDt0aGlzLmROb25jZT1udWxsO3RoaXMuZFRzYT1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3ZhciBlPVt0aGlzLmRWZXJzaW9uXTtpZih0aGlzLmRQb2xpY3k9PW51bGwpe3Rocm93InBvbGljeSBzaGFsbCBiZSBzcGVjaWZpZWQuIn1lLnB1c2godGhpcy5kUG9saWN5KTtpZih0aGlzLmRNZXNzYWdlSW1wcmludD09bnVsbCl7dGhyb3cibWVzc2FnZUltcHJpbnQgc2hhbGwgYmUgc3BlY2lmaWVkLiJ9ZS5wdXNoKHRoaXMuZE1lc3NhZ2VJbXByaW50KTtpZih0aGlzLmRTZXJpYWxOdW1iZXI9PW51bGwpe3Rocm93InNlcmlhbE51bWJlciBzaGFsbCBiZSBzcGVjaWZpZWQuIn1lLnB1c2godGhpcy5kU2VyaWFsTnVtYmVyKTtpZih0aGlzLmRHZW5UaW1lPT1udWxsKXt0aHJvdyJnZW5UaW1lIHNoYWxsIGJlIHNwZWNpZmllZC4ifWUucHVzaCh0aGlzLmRHZW5UaW1lKTtpZih0aGlzLmRBY2N1cmFjeSE9bnVsbCl7ZS5wdXNoKHRoaXMuZEFjY3VyYWN5KX1pZih0aGlzLmRPcmRlcmluZyE9bnVsbCl7ZS5wdXNoKHRoaXMuZE9yZGVyaW5nKX1pZih0aGlzLmROb25jZSE9bnVsbCl7ZS5wdXNoKHRoaXMuZE5vbmNlKX1pZih0aGlzLmRUc2EhPW51bGwpe2UucHVzaCh0aGlzLmRUc2EpfXZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTplfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMucG9saWN5PT0ic3RyaW5nIil7aWYoIWMucG9saWN5Lm1hdGNoKC9eWzAtOS5dKyQvKSl7dGhyb3cicG9saWN5IHNoYWxsIGJlIG9pZCBsaWtlIDAuMS40LjEzNCJ9dGhpcy5kUG9saWN5PW5ldyBhLkRFUk9iamVjdElkZW50aWZpZXIoe29pZDpjLnBvbGljeX0pfWlmKHR5cGVvZiBjLm1lc3NhZ2VJbXByaW50IT0idW5kZWZpbmVkIil7dGhpcy5kTWVzc2FnZUltcHJpbnQ9bmV3IGIuTWVzc2FnZUltcHJpbnQoYy5tZXNzYWdlSW1wcmludCl9aWYodHlwZW9mIGMuc2VyaWFsTnVtYmVyIT0idW5kZWZpbmVkIil7dGhpcy5kU2VyaWFsTnVtYmVyPW5ldyBhLkRFUkludGVnZXIoYy5zZXJpYWxOdW1iZXIpfWlmKHR5cGVvZiBjLmdlblRpbWUhPSJ1bmRlZmluZWQiKXt0aGlzLmRHZW5UaW1lPW5ldyBhLkRFUkdlbmVyYWxpemVkVGltZShjLmdlblRpbWUpfWlmKHR5cGVvZiBjLmFjY3VyYWN5IT0idW5kZWZpbmQiKXt0aGlzLmRBY2N1cmFjeT1uZXcgYi5BY2N1cmFjeShjLmFjY3VyYWN5KX1pZih0eXBlb2YgYy5vcmRlcmluZyE9InVuZGVmaW5lZCImJmMub3JkZXJpbmc9PXRydWUpe3RoaXMuZE9yZGVyaW5nPW5ldyBhLkRFUkJvb2xlYW4oKX1pZih0eXBlb2YgYy5ub25jZSE9InVuZGVmaW5lZCIpe3RoaXMuZE5vbmNlPW5ldyBhLkRFUkludGVnZXIoYy5ub25jZSl9aWYodHlwZW9mIGMudHNhIT0idW5kZWZpbmVkIil7dGhpcy5kVHNhPW5ldyBkLlg1MDBOYW1lKGMudHNhKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlRTVEluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuVGltZVN0YW1wUmVzcD1mdW5jdGlvbihjKXtLSlVSLmFzbjEudHNwLlRpbWVTdGFtcFJlc3Auc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEudHNwO3RoaXMuZFN0YXR1cz1udWxsO3RoaXMuZFRTVD1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuZFN0YXR1cz09bnVsbCl7dGhyb3cic3RhdHVzIHNoYWxsIGJlIHNwZWNpZmllZCJ9dmFyIGQ9W3RoaXMuZFN0YXR1c107aWYodGhpcy5kVFNUIT1udWxsKXtkLnB1c2godGhpcy5kVFNUKX12YXIgZT1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6ZH0pO3RoaXMuaFRMVj1lLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLnN0YXR1cz09Im9iamVjdCIpe3RoaXMuZFN0YXR1cz1uZXcgYi5QS0lTdGF0dXNJbmZvKGMuc3RhdHVzKX1pZih0eXBlb2YgYy50c3QhPSJ1bmRlZmluZWQiJiZjLnRzdCBpbnN0YW5jZW9mIEtKVVIuYXNuMS5BU04xT2JqZWN0KXt0aGlzLmRUU1Q9Yy50c3QuZ2V0Q29udGVudEluZm8oKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlRpbWVTdGFtcFJlc3AsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzSW5mbz1mdW5jdGlvbihjKXtLSlVSLmFzbjEudHNwLlBLSVN0YXR1c0luZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEudHNwO3RoaXMuZFN0YXR1cz1udWxsO3RoaXMuZFN0YXR1c1N0cmluZz1udWxsO3RoaXMuZEZhaWx1cmVJbmZvPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5kU3RhdHVzPT1udWxsKXt0aHJvdyJzdGF0dXMgc2hhbGwgYmUgc3BlY2lmaWVkIn12YXIgZD1bdGhpcy5kU3RhdHVzXTtpZih0aGlzLmRTdGF0dXNTdHJpbmchPW51bGwpe2QucHVzaCh0aGlzLmRTdGF0dXNTdHJpbmcpfWlmKHRoaXMuZEZhaWx1cmVJbmZvIT1udWxsKXtkLnB1c2godGhpcy5kRmFpbHVyZUluZm8pfXZhciBlPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTpkfSk7dGhpcy5oVExWPWUuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGMuc3RhdHVzPT0ib2JqZWN0Iil7dGhpcy5kU3RhdHVzPW5ldyBiLlBLSVN0YXR1cyhjLnN0YXR1cyl9aWYodHlwZW9mIGMuc3RhdHN0cj09Im9iamVjdCIpe3RoaXMuZFN0YXR1c1N0cmluZz1uZXcgYi5QS0lGcmVlVGV4dCh7YXJyYXk6Yy5zdGF0c3RyfSl9aWYodHlwZW9mIGMuZmFpbGluZm89PSJvYmplY3QiKXt0aGlzLmRGYWlsdXJlSW5mbz1uZXcgYi5QS0lGYWlsdXJlSW5mbyhjLmZhaWxpbmZvKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEudHNwLlBLSVN0YXR1c0luZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzPWZ1bmN0aW9uKGUpe0tKVVIuYXNuMS50c3AuUEtJU3RhdHVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLnRzcDt2YXIgZD1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3RoaXMuaFRMVj10aGlzLmRTdGF0dXMuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBlIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGUubmFtZSE9InVuZGVmaW5lZCIpe3ZhciBjPWIuUEtJU3RhdHVzLnZhbHVlTGlzdDtpZih0eXBlb2YgY1tlLm5hbWVdPT0idW5kZWZpbmVkIil7dGhyb3cibmFtZSB1bmRlZmluZWQ6ICIrZS5uYW1lfXRoaXMuZFN0YXR1cz1uZXcgYS5ERVJJbnRlZ2VyKHsiaW50IjpjW2UubmFtZV19KX1lbHNle3RoaXMuZFN0YXR1cz1uZXcgYS5ERVJJbnRlZ2VyKGUpfX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuUEtJU3RhdHVzLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEudHNwLlBLSVN0YXR1cy52YWx1ZUxpc3Q9e2dyYW50ZWQ6MCxncmFudGVkV2l0aE1vZHM6MSxyZWplY3Rpb246Mix3YWl0aW5nOjMscmV2b2NhdGlvbldhcm5pbmc6NCxyZXZvY2F0aW9uTm90aWZpY2F0aW9uOjV9O0tKVVIuYXNuMS50c3AuUEtJRnJlZVRleHQ9ZnVuY3Rpb24oYil7S0pVUi5hc24xLnRzcC5QS0lGcmVlVGV4dC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3RoaXMudGV4dExpc3Q9W107dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGM9W107Zm9yKHZhciBlPTA7ZTx0aGlzLnRleHRMaXN0Lmxlbmd0aDtlKyspe2MucHVzaChuZXcgYS5ERVJVVEY4U3RyaW5nKHtzdHI6dGhpcy50ZXh0TGlzdFtlXX0pKX12YXIgZD1uZXcgYS5ERVJTZXF1ZW5jZSh7YXJyYXk6Y30pO3RoaXMuaFRMVj1kLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBiLmFycmF5PT0ib2JqZWN0Iil7dGhpcy50ZXh0TGlzdD1iLmFycmF5fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuUEtJRnJlZVRleHQsS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS50c3AuUEtJRmFpbHVyZUluZm89ZnVuY3Rpb24oZCl7S0pVUi5hc24xLnRzcC5QS0lGYWlsdXJlSW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGE9S0pVUi5hc24xO3ZhciBiPUtKVVIuYXNuMS50c3A7dGhpcy52YWx1ZT1udWxsO3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMudmFsdWU9PW51bGwpe3Rocm93InZhbHVlIHNoYWxsIGJlIHNwZWNpZmllZCJ9dmFyIGU9bmV3IE51bWJlcih0aGlzLnZhbHVlKS50b1N0cmluZygyKTt2YXIgZj1uZXcgYS5ERVJCaXRTdHJpbmcoKTtmLnNldEJ5QmluYXJ5U3RyaW5nKGUpO3RoaXMuaFRMVj1mLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5oVExWfTtpZih0eXBlb2YgZCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBkLm5hbWU9PSJzdHJpbmciKXt2YXIgYz1iLlBLSUZhaWx1cmVJbmZvLnZhbHVlTGlzdDtpZih0eXBlb2YgY1tkLm5hbWVdPT0idW5kZWZpbmVkIil7dGhyb3cibmFtZSB1bmRlZmluZWQ6ICIrZC5uYW1lfXRoaXMudmFsdWU9Y1tkLm5hbWVdfWVsc2V7aWYodHlwZW9mIGRbImludCJdPT0ibnVtYmVyIil7dGhpcy52YWx1ZT1kWyJpbnQiXX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLnRzcC5QS0lGYWlsdXJlSW5mbyxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLnRzcC5QS0lGYWlsdXJlSW5mby52YWx1ZUxpc3Q9e2JhZEFsZzowLGJhZFJlcXVlc3Q6MixiYWREYXRhRm9ybWF0OjUsdGltZU5vdEF2YWlsYWJsZToxNCx1bmFjY2VwdGVkUG9saWN5OjE1LHVuYWNjZXB0ZWRFeHRlbnNpb246MTYsYWRkSW5mb05vdEF2YWlsYWJsZToxNyxzeXN0ZW1GYWlsdXJlOjI1fTtLSlVSLmFzbjEudHNwLkFic3RyYWN0VFNBQWRhcHRlcj1mdW5jdGlvbihhKXt0aGlzLmdldFRTVEhleD1mdW5jdGlvbihjLGIpe3Rocm93Im5vdCBpbXBsZW1lbnRlZCB5ZXQifX07S0pVUi5hc24xLnRzcC5TaW1wbGVUU0FBZGFwdGVyPWZ1bmN0aW9uKGEpe0tKVVIuYXNuMS50c3AuU2ltcGxlVFNBQWRhcHRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5wYXJhbXM9bnVsbDt0aGlzLnNlcmlhbD0wO3RoaXMuZ2V0VFNUSGV4PWZ1bmN0aW9uKGMsYil7dmFyIGU9S0pVUi5jcnlwdG8uVXRpbC5oYXNoSGV4KGMsYik7dGhpcy5wYXJhbXMudHN0SW5mby5tZXNzYWdlSW1wcmludD17aGFzaEFsZzpiLGhhc2hWYWx1ZTplfTt0aGlzLnBhcmFtcy50c3RJbmZvLnNlcmlhbE51bWJlcj17ImludCI6dGhpcy5zZXJpYWwrK307dmFyIGQ9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwMDAwMDApO3RoaXMucGFyYW1zLnRzdEluZm8ubm9uY2U9eyJpbnQiOmR9O3ZhciBmPUtKVVIuYXNuMS50c3AuVFNQVXRpbC5uZXdUaW1lU3RhbXBUb2tlbih0aGlzLnBhcmFtcyk7cmV0dXJuIGYuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4KCl9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7dGhpcy5wYXJhbXM9YX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuU2ltcGxlVFNBQWRhcHRlcixLSlVSLmFzbjEudHNwLkFic3RyYWN0VFNBQWRhcHRlcik7S0pVUi5hc24xLnRzcC5GaXhlZFRTQUFkYXB0ZXI9ZnVuY3Rpb24oYSl7S0pVUi5hc24xLnRzcC5GaXhlZFRTQUFkYXB0ZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMucGFyYW1zPW51bGw7dGhpcy5nZXRUU1RIZXg9ZnVuY3Rpb24oYyxiKXt2YXIgZD1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYyxiKTt0aGlzLnBhcmFtcy50c3RJbmZvLm1lc3NhZ2VJbXByaW50PXtoYXNoQWxnOmIsaGFzaFZhbHVlOmR9O3ZhciBlPUtKVVIuYXNuMS50c3AuVFNQVXRpbC5uZXdUaW1lU3RhbXBUb2tlbih0aGlzLnBhcmFtcyk7cmV0dXJuIGUuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4KCl9O2lmKHR5cGVvZiBhIT0idW5kZWZpbmVkIil7dGhpcy5wYXJhbXM9YX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS50c3AuRml4ZWRUU0FBZGFwdGVyLEtKVVIuYXNuMS50c3AuQWJzdHJhY3RUU0FBZGFwdGVyKTtLSlVSLmFzbjEudHNwLlRTUFV0aWw9bmV3IGZ1bmN0aW9uKCl7fTtLSlVSLmFzbjEudHNwLlRTUFV0aWwubmV3VGltZVN0YW1wVG9rZW49ZnVuY3Rpb24oYil7dmFyIGo9S0pVUi5hc24xLmNtczt2YXIgYT1LSlVSLmFzbjEudHNwO3ZhciBnPW5ldyBqLlNpZ25lZERhdGEoKTt2YXIgZT1uZXcgYS5UU1RJbmZvKGIudHN0SW5mbyk7dmFyIGY9ZS5nZXRFbmNvZGVkSGV4KCk7Zy5kRW5jYXBDb250ZW50SW5mby5zZXRDb250ZW50VmFsdWUoe2hleDpmfSk7Zy5kRW5jYXBDb250ZW50SW5mby5zZXRDb250ZW50VHlwZSgidHN0aW5mbyIpO2lmKHR5cGVvZiBiLmNlcnRzPT0ib2JqZWN0Iil7Zm9yKHZhciBjPTA7YzxiLmNlcnRzLmxlbmd0aDtjKyspe2cuYWRkQ2VydGlmaWNhdGVzQnlQRU0oYi5jZXJ0c1tjXSl9fXZhciBkPWcuc2lnbmVySW5mb0xpc3RbMF07ZC5zZXRTaWduZXJJZGVudGlmaWVyKGIuc2lnbmVyQ2VydCk7ZC5zZXRGb3JDb250ZW50QW5kSGFzaCh7c2RPYmo6ZyxlY2lPYmo6Zy5kRW5jYXBDb250ZW50SW5mbyxoYXNoQWxnOmIuaGFzaEFsZ30pO3ZhciBoPW5ldyBqLlNpZ25pbmdDZXJ0aWZpY2F0ZSh7YXJyYXk6W2Iuc2lnbmVyQ2VydF19KTtkLmRTaWduZWRBdHRycy5hZGQoaCk7ZC5zaWduKGIuc2lnbmVyUHJ2S2V5LGIuc2lnQWxnKTtyZXR1cm4gZ307S0pVUi5hc24xLnRzcC5UU1BVdGlsLnBhcnNlVGltZVN0YW1wUmVxPWZ1bmN0aW9uKGQpe3ZhciBmPXt9O2YuY2VydHJlcT1mYWxzZTt2YXIgaD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihkLDApO2lmKGgubGVuZ3RoPDIpe3Rocm93IlRpbWVTdGFtcFJlcSBtdXN0IGhhdmUgYXQgbGVhc3QgMiBpdGVtcyJ9dmFyIGM9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGhbMV0pO2YubWk9S0pVUi5hc24xLnRzcC5UU1BVdGlsLnBhcnNlTWVzc2FnZUltcHJpbnQoYyk7Zm9yKHZhciBlPTI7ZTxoLmxlbmd0aDtlKyspe3ZhciBiPWhbZV07dmFyIGE9ZC5zdWJzdHIoYiwyKTtpZihhPT0iMDYiKXt2YXIgZz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihkLGIpO2YucG9saWN5PUFTTjFIRVguaGV4dG9vaWRzdHIoZyl9aWYoYT09IjAyIil7Zi5ub25jZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihkLGIpfWlmKGE9PSIwMSIpe2YuY2VydHJlcT10cnVlfX1yZXR1cm4gZn07S0pVUi5hc24xLnRzcC5UU1BVdGlsLnBhcnNlTWVzc2FnZUltcHJpbnQ9ZnVuY3Rpb24oYyl7dmFyIGg9e307aWYoYy5zdWJzdHIoMCwyKSE9IjMwIil7dGhyb3ciaGVhZCBvZiBtZXNzYWdlSW1wcmludCBoZXggc2hhbGwgYmUgJzMwJyJ9dmFyIGE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooYywwKTt2YXIgaT1BU04xSEVYLmdldERlY2VuZGFudEluZGV4QnlOdGhMaXN0KGMsMCxbMCwwXSk7dmFyIGQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYyxpKTt2YXIgZT1BU04xSEVYLmhleHRvb2lkc3RyKGQpO3ZhciBnPUtKVVIuYXNuMS54NTA5Lk9JRC5vaWQybmFtZShlKTtpZihnPT0iIil7dGhyb3ciaGFzaEFsZyBuYW1lIHVuZGVmaW5lZDogIitlfXZhciBiPWc7dmFyIGY9QVNOMUhFWC5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChjLDAsWzFdKTtoLmhhc2hBbGc9YjtoLmhhc2hWYWx1ZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLGYpO3JldHVybiBofTsKLyohIGFzbjFjYWRlcy0xLjAuMC5qcyAoYykgMjAxMy0yMDE0IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmFzbjE9PSJ1bmRlZmluZWQifHwhS0pVUi5hc24xKXtLSlVSLmFzbjE9e319aWYodHlwZW9mIEtKVVIuYXNuMS5jYWRlcz09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEuY2FkZXMpe0tKVVIuYXNuMS5jYWRlcz17fX1LSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcj1mdW5jdGlvbihlKXtLSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hdHRyVHlwZU9pZD0iMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTUiO3ZhciBiPUtKVVIuYXNuMTt2YXIgZD1LSlVSLmFzbjEuY2FkZXM7aWYodHlwZW9mIGUhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZS5vaWQ9PSJzdHJpbmciJiZ0eXBlb2YgZS5oYXNoPT0ib2JqZWN0Iil7dmFyIGY9bmV3IGIuREVST2JqZWN0SWRlbnRpZmllcih7b2lkOmUub2lkfSk7dmFyIGE9bmV3IGQuT3RoZXJIYXNoQWxnQW5kVmFsdWUoZS5oYXNoKTt2YXIgYz1uZXcgYi5ERVJTZXF1ZW5jZSh7YXJyYXk6W2YsYV19KTt0aGlzLnZhbHVlTGlzdD1bY119fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNhZGVzLlNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXIsS0pVUi5hc24xLmNtcy5BdHRyaWJ1dGUpO0tKVVIuYXNuMS5jYWRlcy5PdGhlckhhc2hBbGdBbmRWYWx1ZT1mdW5jdGlvbihiKXtLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoQWxnQW5kVmFsdWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYz1LSlVSLmFzbjEueDUwOTt0aGlzLmRBbGc9bnVsbDt0aGlzLmRIYXNoPW51bGw7dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7dmFyIGQ9bmV3IGEuREVSU2VxdWVuY2Uoe2FycmF5Olt0aGlzLmRBbGcsdGhpcy5kSGFzaF19KTt0aGlzLmhUTFY9ZC5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuaFRMVn07aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYi5hbGc9PSJzdHJpbmciJiZ0eXBlb2YgYi5oYXNoPT0ic3RyaW5nIil7dGhpcy5kQWxnPW5ldyBjLkFsZ29yaXRobUlkZW50aWZpZXIoe25hbWU6Yi5hbGd9KTt0aGlzLmRIYXNoPW5ldyBhLkRFUk9jdGV0U3RyaW5nKHtoZXg6Yi5oYXNofSl9fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNhZGVzLk90aGVySGFzaEFsZ0FuZFZhbHVlLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY2FkZXMuU2lnbmF0dXJlVGltZVN0YW1wPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jYWRlcy5TaWduYXR1cmVUaW1lU3RhbXAuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYXR0clR5cGVPaWQ9IjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjE0Ijt0aGlzLnRzdEhleD1udWxsO3ZhciBhPUtKVVIuYXNuMTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLnJlcyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLnJlcz09InN0cmluZyImJmMucmVzLm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXt9ZWxzZXtpZihjLnJlcyBpbnN0YW5jZW9mIEtKVVIuYXNuMS5BU04xT2JqZWN0KXt9ZWxzZXt0aHJvdyJyZXMgcGFyYW0gc2hhbGwgYmUgQVNOMU9iamVjdCBvciBoZXggc3RyaW5nIn19fWlmKHR5cGVvZiBjLnRzdCE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjLnRzdD09InN0cmluZyImJmMudHN0Lm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXt2YXIgYj1uZXcgYS5BU04xT2JqZWN0KCk7dGhpcy50c3RIZXg9Yy50c3Q7Yi5oVExWPXRoaXMudHN0SGV4O2IuZ2V0RW5jb2RlZEhleCgpO3RoaXMudmFsdWVMaXN0PVtiXX1lbHNle2lmKGMudHN0IGluc3RhbmNlb2YgS0pVUi5hc24xLkFTTjFPYmplY3Qpe31lbHNle3Rocm93InRzdCBwYXJhbSBzaGFsbCBiZSBBU04xT2JqZWN0IG9yIGhleCBzdHJpbmcifX19fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNhZGVzLlNpZ25hdHVyZVRpbWVTdGFtcCxLSlVSLmFzbjEuY21zLkF0dHJpYnV0ZSk7S0pVUi5hc24xLmNhZGVzLkNvbXBsZXRlQ2VydGlmaWNhdGVSZWZzPWZ1bmN0aW9uKGMpe0tKVVIuYXNuMS5jYWRlcy5Db21wbGV0ZUNlcnRpZmljYXRlUmVmcy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dGhpcy5hdHRyVHlwZU9pZD0iMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMjEiO3ZhciBhPUtKVVIuYXNuMTt2YXIgYj1LSlVSLmFzbjEuY2FkZXM7dGhpcy5zZXRCeUFycmF5PWZ1bmN0aW9uKGQpe3RoaXMudmFsdWVMaXN0PVtdO2Zvcih2YXIgZT0wO2U8ZC5sZW5ndGg7ZSsrKXt2YXIgZj1uZXcgYi5PdGhlckNlcnRJRChkW2VdKTt0aGlzLnZhbHVlTGlzdC5wdXNoKGYpfX07aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgYz09Im9iamVjdCImJnR5cGVvZiBjLmxlbmd0aD09Im51bWJlciIpe3RoaXMuc2V0QnlBcnJheShjKX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuQ29tcGxldGVDZXJ0aWZpY2F0ZVJlZnMsS0pVUi5hc24xLmNtcy5BdHRyaWJ1dGUpO0tKVVIuYXNuMS5jYWRlcy5PdGhlckNlcnRJRD1mdW5jdGlvbihkKXtLSlVSLmFzbjEuY2FkZXMuT3RoZXJDZXJ0SUQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3ZhciBhPUtKVVIuYXNuMTt2YXIgYz1LSlVSLmFzbjEuY21zO3ZhciBiPUtKVVIuYXNuMS5jYWRlczt0aGlzLmhhc0lzc3VlclNlcmlhbD10cnVlO3RoaXMuZE90aGVyQ2VydEhhc2g9bnVsbDt0aGlzLmRJc3N1ZXJTZXJpYWw9bnVsbDt0aGlzLnNldEJ5Q2VydFBFTT1mdW5jdGlvbihlKXt0aGlzLmRPdGhlckNlcnRIYXNoPW5ldyBiLk90aGVySGFzaChlKTtpZih0aGlzLmhhc0lzc3VlclNlcmlhbCl7dGhpcy5kSXNzdWVyU2VyaWFsPW5ldyBjLklzc3VlckFuZFNlcmlhbE51bWJlcihlKX19O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuaFRMViE9bnVsbCl7cmV0dXJuIHRoaXMuaFRMVn1pZih0aGlzLmRPdGhlckNlcnRIYXNoPT1udWxsKXt0aHJvdyJvdGhlckNlcnRIYXNoIG5vdCBzZXQifXZhciBlPVt0aGlzLmRPdGhlckNlcnRIYXNoXTtpZih0aGlzLmRJc3N1ZXJTZXJpYWwhPW51bGwpe2UucHVzaCh0aGlzLmRJc3N1ZXJTZXJpYWwpfXZhciBmPW5ldyBhLkRFUlNlcXVlbmNlKHthcnJheTplfSk7dGhpcy5oVExWPWYuZ2V0RW5jb2RlZEhleCgpO3JldHVybiB0aGlzLmhUTFZ9O2lmKHR5cGVvZiBkIT0idW5kZWZpbmVkIil7aWYodHlwZW9mIGQ9PSJzdHJpbmciJiZkLmluZGV4T2YoIi0tLS0tQkVHSU4gIikhPS0xKXt0aGlzLnNldEJ5Q2VydFBFTShkKX1pZih0eXBlb2YgZD09Im9iamVjdCIpe2lmKGQuaGFzaXM9PT1mYWxzZSl7dGhpcy5oYXNJc3N1ZXJTZXJpYWw9ZmFsc2V9aWYodHlwZW9mIGQuY2VydD09InN0cmluZyIpe3RoaXMuc2V0QnlDZXJ0UEVNKGQuY2VydCl9fX19O1lBSE9PLmxhbmcuZXh0ZW5kKEtKVVIuYXNuMS5jYWRlcy5PdGhlckNlcnRJRCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNhZGVzLk90aGVySGFzaD1mdW5jdGlvbihjKXtLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt2YXIgYT1LSlVSLmFzbjE7dmFyIGI9S0pVUi5hc24xLmNhZGVzO3RoaXMuYWxnPSJzaGEyNTYiO3RoaXMuZE90aGVySGFzaD1udWxsO3RoaXMuc2V0QnlDZXJ0UEVNPWZ1bmN0aW9uKGQpe2lmKGQuaW5kZXhPZigiLS0tLS1CRUdJTiAiKT09LTEpe3Rocm93ImNlcnRQRU0gbm90IHRvIHNlZW0gUEVNIGZvcm1hdCJ9dmFyIGU9WDUwOS5wZW1Ub0hleChkKTt2YXIgZj1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoZSx0aGlzLmFsZyk7dGhpcy5kT3RoZXJIYXNoPW5ldyBiLk90aGVySGFzaEFsZ0FuZFZhbHVlKHthbGc6dGhpcy5hbGcsaGFzaDpmfSl9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe2lmKHRoaXMuZE90aGVySGFzaD09bnVsbCl7dGhyb3ciT3RoZXJIYXNoIG5vdCBzZXQifXJldHVybiB0aGlzLmRPdGhlckhhc2guZ2V0RW5jb2RlZEhleCgpfTtpZih0eXBlb2YgYyE9InVuZGVmaW5lZCIpe2lmKHR5cGVvZiBjPT0ic3RyaW5nIil7aWYoYy5pbmRleE9mKCItLS0tLUJFR0lOICIpIT0tMSl7dGhpcy5zZXRCeUNlcnRQRU0oYyl9ZWxzZXtpZihjLm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXt0aGlzLmRPdGhlckhhc2g9bmV3IGEuREVST2N0ZXRTdHJpbmcoe2hleDpjfSl9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBzdHJpbmcgdmFsdWUgZm9yIHBhcmFtcyJ9fX1lbHNle2lmKHR5cGVvZiBjPT0ib2JqZWN0Iil7aWYodHlwZW9mIGMuY2VydD09InN0cmluZyIpe2lmKHR5cGVvZiBjLmFsZz09InN0cmluZyIpe3RoaXMuYWxnPWMuYWxnfXRoaXMuc2V0QnlDZXJ0UEVNKGMuY2VydCl9ZWxzZXt0aGlzLmRPdGhlckhhc2g9bmV3IGIuT3RoZXJIYXNoQWxnQW5kVmFsdWUoYyl9fX19fTtZQUhPTy5sYW5nLmV4dGVuZChLSlVSLmFzbjEuY2FkZXMuT3RoZXJIYXNoLEtKVVIuYXNuMS5BU04xT2JqZWN0KTtLSlVSLmFzbjEuY2FkZXMuQ0FkRVNVdGlsPW5ldyBmdW5jdGlvbigpe307S0pVUi5hc24xLmNhZGVzLkNBZEVTVXRpbC5hZGRTaWdUUz1mdW5jdGlvbihjLGIsYSl7fTtLSlVSLmFzbjEuY2FkZXMuQ0FkRVNVdGlsLnBhcnNlU2lnbmVkRGF0YUZvckFkZGluZ1Vuc2lnbmVkPWZ1bmN0aW9uKGQpe3ZhciBxPUtKVVIuYXNuMTt2YXIgcD1LSlVSLmFzbjEuY21zO3ZhciBjPUtKVVIuYXNuMS5jYWRlcy5DQWRFU1V0aWw7dmFyIGE9e307aWYoQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QoZCwwLFswXSkhPSIwNjA5MmE4NjQ4ODZmNzBkMDEwNzAyIil7dGhyb3ciaGV4IGlzIG5vdCBDTVMgU2lnbmVkRGF0YSJ9dmFyIHM9QVNOMUhFWC5nZXREZWNlbmRhbnRJbmRleEJ5TnRoTGlzdChkLDAsWzEsMF0pO3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQscyk7aWYoYi5sZW5ndGg8NCl7dGhyb3cibnVtIG9mIFNpZ25lZERhdGEgZWxlbSBzaGFsbCBiZSA0IGF0IGxlYXN0In12YXIgZj1iLnNoaWZ0KCk7YS52ZXJzaW9uPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxmKTt2YXIgbD1iLnNoaWZ0KCk7YS5hbGdzPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxsKTt2YXIgbT1iLnNoaWZ0KCk7YS5lbmNhcGNvbnRlbnQ9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLG0pO2EuY2VydHM9bnVsbDthLnJldnM9bnVsbDthLnNpPVtdO3ZhciBuPWIuc2hpZnQoKTtpZihkLnN1YnN0cihuLDIpPT0iYTAiKXthLmNlcnRzPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxuKTtuPWIuc2hpZnQoKX1pZihkLnN1YnN0cihuLDIpPT0iYTEiKXthLnJldnM9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLG4pO249Yi5zaGlmdCgpfXZhciBrPW47aWYoZC5zdWJzdHIoaywyKSE9IjMxIil7dGhyb3ciQ2FuJ3QgZmluZCBzaWduZXJJbmZvcyJ9dmFyIGo9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZCxrKTtmb3IodmFyIGg9MDtoPGoubGVuZ3RoO2grKyl7dmFyIG89altoXTt2YXIgZT1jLnBhcnNlU2lnbmVySW5mb0ZvckFkZGluZ1Vuc2lnbmVkKGQsbyxoKTthLnNpW2hdPWV9dmFyIGc9bnVsbDthLm9iaj1uZXcgcC5TaWduZWREYXRhKCk7Zz1uZXcgcS5BU04xT2JqZWN0KCk7Zy5oVExWPWEudmVyc2lvbjthLm9iai5kQ01TVmVyc2lvbj1nO2c9bmV3IHEuQVNOMU9iamVjdCgpO2cuaFRMVj1hLmFsZ3M7YS5vYmouZERpZ2VzdEFsZ3M9ZztnPW5ldyBxLkFTTjFPYmplY3QoKTtnLmhUTFY9YS5lbmNhcGNvbnRlbnQ7YS5vYmouZEVuY2FwQ29udGVudEluZm89ZztnPW5ldyBxLkFTTjFPYmplY3QoKTtnLmhUTFY9YS5jZXJ0czthLm9iai5kQ2VydHM9ZzthLm9iai5zaWduZXJJbmZvTGlzdD1bXTtmb3IodmFyIGg9MDtoPGEuc2kubGVuZ3RoO2grKyl7YS5vYmouc2lnbmVySW5mb0xpc3QucHVzaChhLnNpW2hdLm9iail9cmV0dXJuIGF9O0tKVVIuYXNuMS5jYWRlcy5DQWRFU1V0aWwucGFyc2VTaWduZXJJbmZvRm9yQWRkaW5nVW5zaWduZWQ9ZnVuY3Rpb24oZCxrLGEpe3ZhciBtPUtKVVIuYXNuMTt2YXIgbD1LSlVSLmFzbjEuY21zO3ZhciBiPXt9O3ZhciBlPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQsayk7aWYoZS5sZW5ndGghPTYpe3Rocm93Im5vdCBzdXBwb3J0ZWQgaXRlbXMgZm9yIFNpZ25lckluZm8gKCE9NikifXZhciBmPWUuc2hpZnQoKTtiLnZlcnNpb249QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGYpO3ZhciBuPWUuc2hpZnQoKTtiLnNpPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxuKTt2YXIgaD1lLnNoaWZ0KCk7Yi5kaWdhbGc9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGgpO3ZhciBjPWUuc2hpZnQoKTtiLnNhdHRycz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGQsYyk7dmFyIGk9ZS5zaGlmdCgpO2Iuc2lnYWxnPUFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooZCxpKTt2YXIgaj1lLnNoaWZ0KCk7Yi5zaWc9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihkLGopO2Iuc2lndmFsPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGQsaik7dmFyIGc9bnVsbDtiLm9iaj1uZXcgbC5TaWduZXJJbmZvKCk7Zz1uZXcgbS5BU04xT2JqZWN0KCk7Zy5oVExWPWIudmVyc2lvbjtiLm9iai5kQ01TVmVyc2lvbj1nO2c9bmV3IG0uQVNOMU9iamVjdCgpO2cuaFRMVj1iLnNpO2Iub2JqLmRTaWduZXJJZGVudGlmaWVyPWc7Zz1uZXcgbS5BU04xT2JqZWN0KCk7Zy5oVExWPWIuZGlnYWxnO2Iub2JqLmREaWdlc3RBbGdvcml0aG09ZztnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi5zYXR0cnM7Yi5vYmouZFNpZ25lZEF0dHJzPWc7Zz1uZXcgbS5BU04xT2JqZWN0KCk7Zy5oVExWPWIuc2lnYWxnO2Iub2JqLmRTaWdBbGc9ZztnPW5ldyBtLkFTTjFPYmplY3QoKTtnLmhUTFY9Yi5zaWc7Yi5vYmouZFNpZz1nO2Iub2JqLmRVbnNpZ25lZEF0dHJzPW5ldyBsLkF0dHJpYnV0ZUxpc3QoKTtyZXR1cm4gYn07Ci8qISBhc24xY3NyLTEuMC4wLmpzIChjKSAyMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUi5hc24xLmNzcj09InVuZGVmaW5lZCJ8fCFLSlVSLmFzbjEuY3NyKXtLSlVSLmFzbjEuY3NyPXt9fUtKVVIuYXNuMS5jc3IuQ2VydGlmaWNhdGlvblJlcXVlc3Q9ZnVuY3Rpb24oZil7S0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dmFyIGI9bnVsbDt2YXIgZD1udWxsO3ZhciBlPW51bGw7dmFyIGM9bnVsbDt2YXIgYT1udWxsO3RoaXMuc2lnbj1mdW5jdGlvbihpLGgpe2lmKHRoaXMucHJ2S2V5PT1udWxsKXt0aGlzLnBydktleT1ofXRoaXMuYXNuMVNpZ25hdHVyZUFsZz1uZXcgS0pVUi5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcih7bmFtZTppfSk7c2lnPW5ldyBLSlVSLmNyeXB0by5TaWduYXR1cmUoe2FsZzppfSk7c2lnLmluaXRTaWduKHRoaXMucHJ2S2V5KTtzaWcudXBkYXRlSGV4KHRoaXMuYXNuMUNTUkluZm8uZ2V0RW5jb2RlZEhleCgpKTt0aGlzLmhleFNpZz1zaWcuc2lnbigpO3RoaXMuYXNuMVNpZz1uZXcgS0pVUi5hc24xLkRFUkJpdFN0cmluZyh7aGV4OiIwMCIrdGhpcy5oZXhTaWd9KTt2YXIgZz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbdGhpcy5hc24xQ1NSSW5mbyx0aGlzLmFzbjFTaWduYXR1cmVBbGcsdGhpcy5hc24xU2lnXX0pO3RoaXMuaFRMVj1nLmdldEVuY29kZWRIZXgoKTt0aGlzLmlzTW9kaWZpZWQ9ZmFsc2V9O3RoaXMuZ2V0UEVNU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGc9S0pVUi5hc24xLkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgodGhpcy5nZXRFbmNvZGVkSGV4KCksIkNFUlRJRklDQVRFIFJFUVVFU1QiKTtyZXR1cm4gZ307dGhpcy5nZXRFbmNvZGVkSGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5pc01vZGlmaWVkPT1mYWxzZSYmdGhpcy5oVExWIT1udWxsKXtyZXR1cm4gdGhpcy5oVExWfXRocm93Im5vdCBzaWduZWQgeWV0In07aWYodHlwZW9mIGYhPSJ1bmRlZmluZWQiKXtpZih0eXBlb2YgZi5jc3JpbmZvIT0idW5kZWZpbmVkIil7dGhpcy5hc24xQ1NSSW5mbz1mLmNzcmluZm99fX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdCxLSlVSLmFzbjEuQVNOMU9iamVjdCk7S0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm89ZnVuY3Rpb24oYSl7S0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuX2luaXRpYWxpemU9ZnVuY3Rpb24oKXt0aGlzLmFzbjFBcnJheT1uZXcgQXJyYXkoKTt0aGlzLmFzbjFWZXJzaW9uPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6MH0pO3RoaXMuYXNuMVN1YmplY3Q9bnVsbDt0aGlzLmFzbjFTdWJqUEtleT1udWxsO3RoaXMuZXh0ZW5zaW9uc0FycmF5PW5ldyBBcnJheSgpfTt0aGlzLnNldFN1YmplY3RCeVBhcmFtPWZ1bmN0aW9uKGIpe3RoaXMuYXNuMVN1YmplY3Q9bmV3IEtKVVIuYXNuMS54NTA5Llg1MDBOYW1lKGIpfTt0aGlzLnNldFN1YmplY3RQdWJsaWNLZXlCeUdldEtleT1mdW5jdGlvbihjKXt2YXIgYj1LRVlVVElMLmdldEtleShjKTt0aGlzLmFzbjFTdWJqUEtleT1uZXcgS0pVUi5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8oYil9O3RoaXMuZ2V0RW5jb2RlZEhleD1mdW5jdGlvbigpe3RoaXMuYXNuMUFycmF5PW5ldyBBcnJheSgpO3RoaXMuYXNuMUFycmF5LnB1c2godGhpcy5hc24xVmVyc2lvbik7dGhpcy5hc24xQXJyYXkucHVzaCh0aGlzLmFzbjFTdWJqZWN0KTt0aGlzLmFzbjFBcnJheS5wdXNoKHRoaXMuYXNuMVN1YmpQS2V5KTt2YXIgYz1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTp0aGlzLmV4dGVuc2lvbnNBcnJheX0pO3ZhciBiPW5ldyBLSlVSLmFzbjEuREVSVGFnZ2VkT2JqZWN0KHtleHBsaWNpdDpmYWxzZSx0YWc6ImEwIixvYmo6Y30pO3RoaXMuYXNuMUFycmF5LnB1c2goYik7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6dGhpcy5hc24xQXJyYXl9KTt0aGlzLmhUTFY9ZC5nZXRFbmNvZGVkSGV4KCk7dGhpcy5pc01vZGlmaWVkPWZhbHNlO3JldHVybiB0aGlzLmhUTFZ9O3RoaXMuX2luaXRpYWxpemUoKX07WUFIT08ubGFuZy5leHRlbmQoS0pVUi5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8sS0pVUi5hc24xLkFTTjFPYmplY3QpO0tKVVIuYXNuMS5jc3IuQ1NSVXRpbD1uZXcgZnVuY3Rpb24oKXt9O0tKVVIuYXNuMS5jc3IuQ1NSVXRpbC5uZXdDU1JQRU09ZnVuY3Rpb24oZil7dmFyIGM9S0pVUi5hc24xLmNzcjtpZihmLnN1YmplY3Q9PT11bmRlZmluZWQpe3Rocm93InBhcmFtZXRlciBzdWJqZWN0IHVuZGVmaW5lZCJ9aWYoZi5zYmpwdWJrZXk9PT11bmRlZmluZWQpe3Rocm93InBhcmFtZXRlciBzYmpwdWJrZXkgdW5kZWZpbmVkIn1pZihmLnNpZ2FsZz09PXVuZGVmaW5lZCl7dGhyb3cicGFyYW1ldGVyIHNpZ2FsZyB1bmRlZmluZWQifWlmKGYuc2JqcHJ2a2V5PT09dW5kZWZpbmVkKXt0aHJvdyJwYXJhbWV0ZXIgc2JqcHVia2V5IHVuZGVmaW5lZCJ9dmFyIGI9bmV3IGMuQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvKCk7Yi5zZXRTdWJqZWN0QnlQYXJhbShmLnN1YmplY3QpO2Iuc2V0U3ViamVjdFB1YmxpY0tleUJ5R2V0S2V5KGYuc2JqcHVia2V5KTt2YXIgZD1uZXcgYy5DZXJ0aWZpY2F0aW9uUmVxdWVzdCh7Y3NyaW5mbzpifSk7dmFyIGE9S0VZVVRJTC5nZXRLZXkoZi5zYmpwcnZrZXkpO2Quc2lnbihmLnNpZ2FsZyxhKTt2YXIgZT1kLmdldFBFTVN0cmluZygpO3JldHVybiBlfTsKLyohIGJhc2U2NHgtMS4xLjYgKGMpIDIwMTItMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KZnVuY3Rpb24gQmFzZTY0eCgpe31mdW5jdGlvbiBzdG9CQShkKXt2YXIgYj1uZXcgQXJyYXkoKTtmb3IodmFyIGM9MDtjPGQubGVuZ3RoO2MrKyl7YltjXT1kLmNoYXJDb2RlQXQoYyl9cmV0dXJuIGJ9ZnVuY3Rpb24gQkF0b3MoYil7dmFyIGQ9IiI7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe2Q9ZCtTdHJpbmcuZnJvbUNoYXJDb2RlKGJbY10pfXJldHVybiBkfWZ1bmN0aW9uIEJBdG9oZXgoYil7dmFyIGU9IiI7Zm9yKHZhciBkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBjPWJbZF0udG9TdHJpbmcoMTYpO2lmKGMubGVuZ3RoPT0xKXtjPSIwIitjfWU9ZStjfXJldHVybiBlfWZ1bmN0aW9uIHN0b2hleChhKXtyZXR1cm4gQkF0b2hleChzdG9CQShhKSl9ZnVuY3Rpb24gc3RvYjY0KGEpe3JldHVybiBoZXgyYjY0KHN0b2hleChhKSl9ZnVuY3Rpb24gc3RvYjY0dShhKXtyZXR1cm4gYjY0dG9iNjR1KGhleDJiNjQoc3RvaGV4KGEpKSl9ZnVuY3Rpb24gYjY0dXRvcyhhKXtyZXR1cm4gQkF0b3MoYjY0dG9CQShiNjR1dG9iNjQoYSkpKX1mdW5jdGlvbiBiNjR0b2I2NHUoYSl7YT1hLnJlcGxhY2UoL1w9L2csIiIpO2E9YS5yZXBsYWNlKC9cKy9nLCItIik7YT1hLnJlcGxhY2UoL1wvL2csIl8iKTtyZXR1cm4gYX1mdW5jdGlvbiBiNjR1dG9iNjQoYSl7aWYoYS5sZW5ndGglND09Mil7YT1hKyI9PSJ9ZWxzZXtpZihhLmxlbmd0aCU0PT0zKXthPWErIj0ifX1hPWEucmVwbGFjZSgvLS9nLCIrIik7YT1hLnJlcGxhY2UoL18vZywiLyIpO3JldHVybiBhfWZ1bmN0aW9uIGhleHRvYjY0dShhKXtpZihhLmxlbmd0aCUyPT0xKXthPSIwIithfXJldHVybiBiNjR0b2I2NHUoaGV4MmI2NChhKSl9ZnVuY3Rpb24gYjY0dXRvaGV4KGEpe3JldHVybiBiNjR0b2hleChiNjR1dG9iNjQoYSkpfXZhciB1dGY4dG9iNjR1LGI2NHV0b3V0Zjg7aWYodHlwZW9mIEJ1ZmZlcj09PSJmdW5jdGlvbiIpe3V0Zjh0b2I2NHU9ZnVuY3Rpb24oYSl7cmV0dXJuIGI2NHRvYjY0dShuZXcgQnVmZmVyKGEsInV0ZjgiKS50b1N0cmluZygiYmFzZTY0IikpfTtiNjR1dG91dGY4PWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQnVmZmVyKGI2NHV0b2I2NChhKSwiYmFzZTY0IikudG9TdHJpbmcoInV0ZjgiKX19ZWxzZXt1dGY4dG9iNjR1PWZ1bmN0aW9uKGEpe3JldHVybiBoZXh0b2I2NHUodXJpY21wdG9oZXgoZW5jb2RlVVJJQ29tcG9uZW50QWxsKGEpKSl9O2I2NHV0b3V0Zjg9ZnVuY3Rpb24oYSl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChoZXh0b3VyaWNtcChiNjR1dG9oZXgoYSkpKX19ZnVuY3Rpb24gdXRmOHRvYjY0KGEpe3JldHVybiBoZXgyYjY0KHVyaWNtcHRvaGV4KGVuY29kZVVSSUNvbXBvbmVudEFsbChhKSkpfWZ1bmN0aW9uIGI2NHRvdXRmOChhKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGhleHRvdXJpY21wKGI2NHRvaGV4KGEpKSl9ZnVuY3Rpb24gdXRmOHRvaGV4KGEpe3JldHVybiB1cmljbXB0b2hleChlbmNvZGVVUklDb21wb25lbnRBbGwoYSkpfWZ1bmN0aW9uIGhleHRvdXRmOChhKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGhleHRvdXJpY21wKGEpKX1mdW5jdGlvbiBoZXh0b3JzdHIoYyl7dmFyIGI9IiI7Zm9yKHZhciBhPTA7YTxjLmxlbmd0aC0xO2ErPTIpe2IrPVN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoYy5zdWJzdHIoYSwyKSwxNikpfXJldHVybiBifWZ1bmN0aW9uIHJzdHJ0b2hleChjKXt2YXIgYT0iIjtmb3IodmFyIGI9MDtiPGMubGVuZ3RoO2IrKyl7YSs9KCIwIitjLmNoYXJDb2RlQXQoYikudG9TdHJpbmcoMTYpKS5zbGljZSgtMil9cmV0dXJuIGF9ZnVuY3Rpb24gaGV4dG9iNjQoYSl7cmV0dXJuIGhleDJiNjQoYSl9ZnVuY3Rpb24gaGV4dG9iNjRubChiKXt2YXIgYT1oZXh0b2I2NChiKTt2YXIgYz1hLnJlcGxhY2UoLyguezY0fSkvZywiJDFcclxuIik7Yz1jLnJlcGxhY2UoL1xyXG4kLywiIik7cmV0dXJuIGN9ZnVuY3Rpb24gYjY0bmx0b2hleChiKXt2YXIgYT1iLnJlcGxhY2UoL1teMC05QS1aYS16XC8rPV0qL2csIiIpO3ZhciBjPWI2NHRvaGV4KGEpO3JldHVybiBjfWZ1bmN0aW9uIHVyaWNtcHRvaGV4KGEpe3JldHVybiBhLnJlcGxhY2UoLyUvZywiIil9ZnVuY3Rpb24gaGV4dG91cmljbXAoYSl7cmV0dXJuIGEucmVwbGFjZSgvKC4uKS9nLCIlJDEiKX1mdW5jdGlvbiBlbmNvZGVVUklDb21wb25lbnRBbGwoYSl7dmFyIGQ9ZW5jb2RlVVJJQ29tcG9uZW50KGEpO3ZhciBiPSIiO2Zvcih2YXIgYz0wO2M8ZC5sZW5ndGg7YysrKXtpZihkW2NdPT0iJSIpe2I9YitkLnN1YnN0cihjLDMpO2M9YysyfWVsc2V7Yj1iKyIlIitzdG9oZXgoZFtjXSl9fXJldHVybiBifWZ1bmN0aW9uIG5ld2xpbmVfdG9Vbml4KGEpe2E9YS5yZXBsYWNlKC9cclxuL21nLCJcbiIpO3JldHVybiBhfWZ1bmN0aW9uIG5ld2xpbmVfdG9Eb3MoYSl7YT1hLnJlcGxhY2UoL1xyXG4vbWcsIlxuIik7YT1hLnJlcGxhY2UoL1xuL21nLCJcclxuIik7cmV0dXJuIGF9ZnVuY3Rpb24gaW50YXJ5c3RydG9oZXgoYil7Yj1iLnJlcGxhY2UoL15ccypcW1xzKi8sIiIpO2I9Yi5yZXBsYWNlKC9ccypcXVxzKiQvLCIiKTtiPWIucmVwbGFjZSgvXHMqL2csIiIpO3RyeXt2YXIgYz1iLnNwbGl0KC8sLykubWFwKGZ1bmN0aW9uKGcsZSxoKXt2YXIgZj1wYXJzZUludChnKTtpZihmPDB8fDI1NTxmKXt0aHJvdyJpbnRlZ2VyIG5vdCBpbiByYW5nZSAwLTI1NSJ9dmFyIGQ9KCIwMCIrZi50b1N0cmluZygxNikpLnNsaWNlKC0yKTtyZXR1cm4gZH0pLmpvaW4oIiIpO3JldHVybiBjfWNhdGNoKGEpe3Rocm93Im1hbGZvcm1lZCBpbnRlZ2VyIGFycmF5IHN0cmluZzogIithfX12YXIgc3RyZGlmZmlkeD1mdW5jdGlvbihjLGEpe3ZhciBkPWMubGVuZ3RoO2lmKGMubGVuZ3RoPmEubGVuZ3RoKXtkPWEubGVuZ3RofWZvcih2YXIgYj0wO2I8ZDtiKyspe2lmKGMuY2hhckNvZGVBdChiKSE9YS5jaGFyQ29kZUF0KGIpKXtyZXR1cm4gYn19aWYoYy5sZW5ndGghPWEubGVuZ3RoKXtyZXR1cm4gZH1yZXR1cm4gLTF9OwovKiEgY3J5cHRvLTEuMS43LmpzIChjKSAyMDEzLTIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmlmKHR5cGVvZiBLSlVSPT0idW5kZWZpbmVkInx8IUtKVVIpe0tKVVI9e319aWYodHlwZW9mIEtKVVIuY3J5cHRvPT0idW5kZWZpbmVkInx8IUtKVVIuY3J5cHRvKXtLSlVSLmNyeXB0bz17fX1LSlVSLmNyeXB0by5VdGlsPW5ldyBmdW5jdGlvbigpe3RoaXMuRElHRVNUSU5GT0hFQUQ9e3NoYTE6IjMwMjEzMDA5MDYwNTJiMGUwMzAyMWEwNTAwMDQxNCIsc2hhMjI0OiIzMDJkMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDQwNTAwMDQxYyIsc2hhMjU2OiIzMDMxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDEwNTAwMDQyMCIsc2hhMzg0OiIzMDQxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDIwNTAwMDQzMCIsc2hhNTEyOiIzMDUxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDMwNTAwMDQ0MCIsbWQyOiIzMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjAyMDUwMDA0MTAiLG1kNToiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwNTA1MDAwNDEwIixyaXBlbWQxNjA6IjMwMjEzMDA5MDYwNTJiMjQwMzAyMDEwNTAwMDQxNCIsfTt0aGlzLkRFRkFVTFRQUk9WSURFUj17bWQ1OiJjcnlwdG9qcyIsc2hhMToiY3J5cHRvanMiLHNoYTIyNDoiY3J5cHRvanMiLHNoYTI1NjoiY3J5cHRvanMiLHNoYTM4NDoiY3J5cHRvanMiLHNoYTUxMjoiY3J5cHRvanMiLHJpcGVtZDE2MDoiY3J5cHRvanMiLGhtYWNtZDU6ImNyeXB0b2pzIixobWFjc2hhMToiY3J5cHRvanMiLGhtYWNzaGEyMjQ6ImNyeXB0b2pzIixobWFjc2hhMjU2OiJjcnlwdG9qcyIsaG1hY3NoYTM4NDoiY3J5cHRvanMiLGhtYWNzaGE1MTI6ImNyeXB0b2pzIixobWFjcmlwZW1kMTYwOiJjcnlwdG9qcyIsTUQ1d2l0aFJTQToiY3J5cHRvanMvanNyc2EiLFNIQTF3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjI0d2l0aFJTQToiY3J5cHRvanMvanNyc2EiLFNIQTI1NndpdGhSU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEzODR3aXRoUlNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBNTEyd2l0aFJTQToiY3J5cHRvanMvanNyc2EiLFJJUEVNRDE2MHdpdGhSU0E6ImNyeXB0b2pzL2pzcnNhIixNRDV3aXRoRUNEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEExd2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjI0d2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjU2d2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMzg0d2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBNTEyd2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsUklQRU1EMTYwd2l0aEVDRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMXdpdGhEU0E6ImNyeXB0b2pzL2pzcnNhIixTSEEyMjR3aXRoRFNBOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjU2d2l0aERTQToiY3J5cHRvanMvanNyc2EiLE1ENXdpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsU0hBMXdpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsU0hBMjI0d2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixTSEEyNTZ3aXRoUlNBYW5kTUdGMToiY3J5cHRvanMvanNyc2EiLFNIQTM4NHdpdGhSU0FhbmRNR0YxOiJjcnlwdG9qcy9qc3JzYSIsU0hBNTEyd2l0aFJTQWFuZE1HRjE6ImNyeXB0b2pzL2pzcnNhIixSSVBFTUQxNjB3aXRoUlNBYW5kTUdGMToiY3J5cHRvanMvanNyc2EiLH07dGhpcy5DUllQVE9KU01FU1NBR0VESUdFU1ROQU1FPXttZDU6IkNyeXB0b0pTLmFsZ28uTUQ1IixzaGExOiJDcnlwdG9KUy5hbGdvLlNIQTEiLHNoYTIyNDoiQ3J5cHRvSlMuYWxnby5TSEEyMjQiLHNoYTI1NjoiQ3J5cHRvSlMuYWxnby5TSEEyNTYiLHNoYTM4NDoiQ3J5cHRvSlMuYWxnby5TSEEzODQiLHNoYTUxMjoiQ3J5cHRvSlMuYWxnby5TSEE1MTIiLHJpcGVtZDE2MDoiQ3J5cHRvSlMuYWxnby5SSVBFTUQxNjAifTt0aGlzLmdldERpZ2VzdEluZm9IZXg9ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgdGhpcy5ESUdFU1RJTkZPSEVBRFtiXT09InVuZGVmaW5lZCIpe3Rocm93ImFsZyBub3Qgc3VwcG9ydGVkIGluIFV0aWwuRElHRVNUSU5GT0hFQUQ6ICIrYn1yZXR1cm4gdGhpcy5ESUdFU1RJTkZPSEVBRFtiXSthfTt0aGlzLmdldFBhZGRlZERpZ2VzdEluZm9IZXg9ZnVuY3Rpb24oaCxhLGope3ZhciBjPXRoaXMuZ2V0RGlnZXN0SW5mb0hleChoLGEpO3ZhciBkPWovNDtpZihjLmxlbmd0aCsyMj5kKXt0aHJvdyJrZXkgaXMgdG9vIHNob3J0IGZvciBTaWdBbGc6IGtleWxlbj0iK2orIiwiK2F9dmFyIGI9IjAwMDEiO3ZhciBrPSIwMCIrYzt2YXIgZz0iIjt2YXIgbD1kLWIubGVuZ3RoLWsubGVuZ3RoO2Zvcih2YXIgZj0wO2Y8bDtmKz0yKXtnKz0iZmYifXZhciBlPWIrZytrO3JldHVybiBlfTt0aGlzLmhhc2hTdHJpbmc9ZnVuY3Rpb24oYSxjKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOmN9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuaGFzaEhleD1mdW5jdGlvbihiLGMpe3ZhciBhPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6Y30pO3JldHVybiBhLmRpZ2VzdEhleChiKX07dGhpcy5zaGExPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6InNoYTEiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5zaGEyNTY9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzoic2hhMjU2Iixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RTdHJpbmcoYSl9O3RoaXMuc2hhMjU2SGV4PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6InNoYTI1NiIscHJvdjoiY3J5cHRvanMifSk7cmV0dXJuIGIuZGlnZXN0SGV4KGEpfTt0aGlzLnNoYTUxMj1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJzaGE1MTIiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5zaGE1MTJIZXg9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Qoe2FsZzoic2hhNTEyIixwcm92OiJjcnlwdG9qcyJ9KTtyZXR1cm4gYi5kaWdlc3RIZXgoYSl9O3RoaXMubWQ1PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBLSlVSLmNyeXB0by5NZXNzYWdlRGlnZXN0KHthbGc6Im1kNSIscHJvdjoiY3J5cHRvanMifSk7cmV0dXJuIGIuZGlnZXN0U3RyaW5nKGEpfTt0aGlzLnJpcGVtZDE2MD1mdW5jdGlvbihhKXt2YXIgYj1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOiJyaXBlbWQxNjAiLHByb3Y6ImNyeXB0b2pzIn0pO3JldHVybiBiLmRpZ2VzdFN0cmluZyhhKX07dGhpcy5nZXRDcnlwdG9KU01EQnlOYW1lPWZ1bmN0aW9uKGEpe319O0tKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Q9ZnVuY3Rpb24ocGFyYW1zKXt2YXIgbWQ9bnVsbDt2YXIgYWxnTmFtZT1udWxsO3ZhciBwcm92TmFtZT1udWxsO3RoaXMuc2V0QWxnQW5kUHJvdmlkZXI9ZnVuY3Rpb24oYWxnLHByb3Ype2lmKGFsZyE9bnVsbCYmcHJvdj09PXVuZGVmaW5lZCl7cHJvdj1LSlVSLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlthbGddfWlmKCI6bWQ1OnNoYTE6c2hhMjI0OnNoYTI1NjpzaGEzODQ6c2hhNTEyOnJpcGVtZDE2MDoiLmluZGV4T2YoYWxnKSE9LTEmJnByb3Y9PSJjcnlwdG9qcyIpe3RyeXt0aGlzLm1kPWV2YWwoS0pVUi5jcnlwdG8uVXRpbC5DUllQVE9KU01FU1NBR0VESUdFU1ROQU1FW2FsZ10pLmNyZWF0ZSgpfWNhdGNoKGV4KXt0aHJvdyJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBhbGc9IithbGcrIi8iK2V4fXRoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKHN0cil7dGhpcy5tZC51cGRhdGUoc3RyKX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oaGV4KXt2YXIgd0hleD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGhleCk7dGhpcy5tZC51cGRhdGUod0hleCl9O3RoaXMuZGlnZXN0PWZ1bmN0aW9uKCl7dmFyIGhhc2g9dGhpcy5tZC5maW5hbGl6ZSgpO3JldHVybiBoYXNoLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5IZXgpfTt0aGlzLmRpZ2VzdFN0cmluZz1mdW5jdGlvbihzdHIpe3RoaXMudXBkYXRlU3RyaW5nKHN0cik7cmV0dXJuIHRoaXMuZGlnZXN0KCl9O3RoaXMuZGlnZXN0SGV4PWZ1bmN0aW9uKGhleCl7dGhpcy51cGRhdGVIZXgoaGV4KTtyZXR1cm4gdGhpcy5kaWdlc3QoKX19aWYoIjpzaGEyNTY6Ii5pbmRleE9mKGFsZykhPS0xJiZwcm92PT0ic2pjbCIpe3RyeXt0aGlzLm1kPW5ldyBzamNsLmhhc2guc2hhMjU2KCl9Y2F0Y2goZXgpe3Rocm93InNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGFsZz0iK2FsZysiLyIrZXh9dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24oc3RyKXt0aGlzLm1kLnVwZGF0ZShzdHIpfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbihoZXgpe3ZhciBiYUhleD1zamNsLmNvZGVjLmhleC50b0JpdHMoaGV4KTt0aGlzLm1kLnVwZGF0ZShiYUhleCl9O3RoaXMuZGlnZXN0PWZ1bmN0aW9uKCl7dmFyIGhhc2g9dGhpcy5tZC5maW5hbGl6ZSgpO3JldHVybiBzamNsLmNvZGVjLmhleC5mcm9tQml0cyhoYXNoKX07dGhpcy5kaWdlc3RTdHJpbmc9ZnVuY3Rpb24oc3RyKXt0aGlzLnVwZGF0ZVN0cmluZyhzdHIpO3JldHVybiB0aGlzLmRpZ2VzdCgpfTt0aGlzLmRpZ2VzdEhleD1mdW5jdGlvbihoZXgpe3RoaXMudXBkYXRlSGV4KGhleCk7cmV0dXJuIHRoaXMuZGlnZXN0KCl9fX07dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24oc3RyKXt0aHJvdyJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07dGhpcy51cGRhdGVIZXg9ZnVuY3Rpb24oaGV4KXt0aHJvdyJ1cGRhdGVIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07dGhpcy5kaWdlc3Q9ZnVuY3Rpb24oKXt0aHJvdyJkaWdlc3QoKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07dGhpcy5kaWdlc3RTdHJpbmc9ZnVuY3Rpb24oc3RyKXt0aHJvdyJkaWdlc3RTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07dGhpcy5kaWdlc3RIZXg9ZnVuY3Rpb24oaGV4KXt0aHJvdyJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnTmFtZSsiLyIrdGhpcy5wcm92TmFtZX07aWYocGFyYW1zIT09dW5kZWZpbmVkKXtpZihwYXJhbXMuYWxnIT09dW5kZWZpbmVkKXt0aGlzLmFsZ05hbWU9cGFyYW1zLmFsZztpZihwYXJhbXMucHJvdj09PXVuZGVmaW5lZCl7dGhpcy5wcm92TmFtZT1LSlVSLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlt0aGlzLmFsZ05hbWVdfXRoaXMuc2V0QWxnQW5kUHJvdmlkZXIodGhpcy5hbGdOYW1lLHRoaXMucHJvdk5hbWUpfX19O0tKVVIuY3J5cHRvLk1hYz1mdW5jdGlvbihwYXJhbXMpe3ZhciBtYWM9bnVsbDt2YXIgcGFzcz1udWxsO3ZhciBhbGdOYW1lPW51bGw7dmFyIHByb3ZOYW1lPW51bGw7dmFyIGFsZ1Byb3Y9bnVsbDt0aGlzLnNldEFsZ0FuZFByb3ZpZGVyPWZ1bmN0aW9uKGFsZyxwcm92KXtpZihhbGc9PW51bGwpe2FsZz0iaG1hY3NoYTEifWFsZz1hbGcudG9Mb3dlckNhc2UoKTtpZihhbGcuc3Vic3RyKDAsNCkhPSJobWFjIil7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgdW5zdXBwb3J0ZWQgSE1BQyBhbGc6ICIrYWxnfWlmKHByb3Y9PT11bmRlZmluZWQpe3Byb3Y9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbYWxnXX10aGlzLmFsZ1Byb3Y9YWxnKyIvIitwcm92O3ZhciBoYXNoQWxnPWFsZy5zdWJzdHIoNCk7aWYoIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOiIuaW5kZXhPZihoYXNoQWxnKSE9LTEmJnByb3Y9PSJjcnlwdG9qcyIpe3RyeXt2YXIgbWRPYmo9ZXZhbChLSlVSLmNyeXB0by5VdGlsLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUVbaGFzaEFsZ10pO3RoaXMubWFjPUNyeXB0b0pTLmFsZ28uSE1BQy5jcmVhdGUobWRPYmosdGhpcy5wYXNzKX1jYXRjaChleCl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgaGFzaEFsZz0iK2hhc2hBbGcrIi8iK2V4fXRoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKHN0cil7dGhpcy5tYWMudXBkYXRlKHN0cil9O3RoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKGhleCl7dmFyIHdIZXg9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShoZXgpO3RoaXMubWFjLnVwZGF0ZSh3SGV4KX07dGhpcy5kb0ZpbmFsPWZ1bmN0aW9uKCl7dmFyIGhhc2g9dGhpcy5tYWMuZmluYWxpemUoKTtyZXR1cm4gaGFzaC50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KX07dGhpcy5kb0ZpbmFsU3RyaW5nPWZ1bmN0aW9uKHN0cil7dGhpcy51cGRhdGVTdHJpbmcoc3RyKTtyZXR1cm4gdGhpcy5kb0ZpbmFsKCl9O3RoaXMuZG9GaW5hbEhleD1mdW5jdGlvbihoZXgpe3RoaXMudXBkYXRlSGV4KGhleCk7cmV0dXJuIHRoaXMuZG9GaW5hbCgpfX19O3RoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKHN0cil7dGhyb3cidXBkYXRlU3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKGhleCl7dGhyb3cidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMuZG9GaW5hbD1mdW5jdGlvbigpe3Rocm93ImRpZ2VzdCgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6ICIrdGhpcy5hbGdQcm92fTt0aGlzLmRvRmluYWxTdHJpbmc9ZnVuY3Rpb24oc3RyKXt0aHJvdyJkaWdlc3RTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiAiK3RoaXMuYWxnUHJvdn07dGhpcy5kb0ZpbmFsSGV4PWZ1bmN0aW9uKGhleCl7dGhyb3ciZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogIit0aGlzLmFsZ1Byb3Z9O3RoaXMuc2V0UGFzc3dvcmQ9ZnVuY3Rpb24ocGFzcyl7aWYodHlwZW9mIHBhc3M9PSJzdHJpbmciKXt2YXIgaFBhc3M9cGFzcztpZihwYXNzLmxlbmd0aCUyPT0xfHwhcGFzcy5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSl7aFBhc3M9cnN0cnRvaGV4KHBhc3MpfXRoaXMucGFzcz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGhQYXNzKTtyZXR1cm59aWYodHlwZW9mIHBhc3MhPSJvYmplY3QiKXt0aHJvdyJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogIitwYXNzfXZhciBoUGFzcz1udWxsO2lmKHBhc3MuaGV4IT09dW5kZWZpbmVkKXtpZihwYXNzLmhleC5sZW5ndGglMiE9MHx8IXBhc3MuaGV4Lm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKXt0aHJvdyJNYWM6IHdyb25nIGhleCBwYXNzd29yZDogIitwYXNzLmhleH1oUGFzcz1wYXNzLmhleH1pZihwYXNzLnV0ZjghPT11bmRlZmluZWQpe2hQYXNzPXV0Zjh0b2hleChwYXNzLnV0ZjgpfWlmKHBhc3MucnN0ciE9PXVuZGVmaW5lZCl7aFBhc3M9cnN0cnRvaGV4KHBhc3MucnN0cil9aWYocGFzcy5iNjQhPT11bmRlZmluZWQpe2hQYXNzPWI2NHRvaGV4KHBhc3MuYjY0KX1pZihwYXNzLmI2NHUhPT11bmRlZmluZWQpe2hQYXNzPWI2NHV0b2hleChwYXNzLmI2NHUpfWlmKGhQYXNzPT1udWxsKXt0aHJvdyJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogIitwYXNzfXRoaXMucGFzcz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKGhQYXNzKX07aWYocGFyYW1zIT09dW5kZWZpbmVkKXtpZihwYXJhbXMucGFzcyE9PXVuZGVmaW5lZCl7dGhpcy5zZXRQYXNzd29yZChwYXJhbXMucGFzcyl9aWYocGFyYW1zLmFsZyE9PXVuZGVmaW5lZCl7dGhpcy5hbGdOYW1lPXBhcmFtcy5hbGc7aWYocGFyYW1zLnByb3Y9PT11bmRlZmluZWQpe3RoaXMucHJvdk5hbWU9S0pVUi5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXX10aGlzLnNldEFsZ0FuZFByb3ZpZGVyKHRoaXMuYWxnTmFtZSx0aGlzLnByb3ZOYW1lKX19fTtLSlVSLmNyeXB0by5TaWduYXR1cmU9ZnVuY3Rpb24obyl7dmFyIHE9bnVsbDt2YXIgbj1udWxsO3ZhciByPW51bGw7dmFyIGM9bnVsbDt2YXIgbD1udWxsO3ZhciBkPW51bGw7dmFyIGs9bnVsbDt2YXIgaD1udWxsO3ZhciBwPW51bGw7dmFyIGU9bnVsbDt2YXIgYj0tMTt2YXIgZz1udWxsO3ZhciBqPW51bGw7dmFyIGE9bnVsbDt2YXIgaT1udWxsO3ZhciBmPW51bGw7dGhpcy5fc2V0QWxnTmFtZXM9ZnVuY3Rpb24oKXtpZih0aGlzLmFsZ05hbWUubWF0Y2goL14oLispd2l0aCguKykkLykpe3RoaXMubWRBbGdOYW1lPVJlZ0V4cC4kMS50b0xvd2VyQ2FzZSgpO3RoaXMucHVia2V5QWxnTmFtZT1SZWdFeHAuJDIudG9Mb3dlckNhc2UoKX19O3RoaXMuX3plcm9QYWRkaW5nT2ZTaWduYXR1cmU9ZnVuY3Rpb24oeCx3KXt2YXIgdj0iIjt2YXIgdD13LzQteC5sZW5ndGg7Zm9yKHZhciB1PTA7dTx0O3UrKyl7dj12KyIwIn1yZXR1cm4gdit4fTt0aGlzLnNldEFsZ0FuZFByb3ZpZGVyPWZ1bmN0aW9uKHUsdCl7dGhpcy5fc2V0QWxnTmFtZXMoKTtpZih0IT0iY3J5cHRvanMvanNyc2EiKXt0aHJvdyJwcm92aWRlciBub3Qgc3VwcG9ydGVkOiAiK3R9aWYoIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOiIuaW5kZXhPZih0aGlzLm1kQWxnTmFtZSkhPS0xKXt0cnl7dGhpcy5tZD1uZXcgS0pVUi5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7YWxnOnRoaXMubWRBbGdOYW1lfSl9Y2F0Y2gocyl7dGhyb3cic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPSIrdGhpcy5tZEFsZ05hbWUrIi8iK3N9dGhpcy5pbml0PWZ1bmN0aW9uKHcseCl7dmFyIHk9bnVsbDt0cnl7aWYoeD09PXVuZGVmaW5lZCl7eT1LRVlVVElMLmdldEtleSh3KX1lbHNle3k9S0VZVVRJTC5nZXRLZXkodyx4KX19Y2F0Y2godil7dGhyb3ciaW5pdCBmYWlsZWQ6Iit2fWlmKHkuaXNQcml2YXRlPT09dHJ1ZSl7dGhpcy5wcnZLZXk9eTt0aGlzLnN0YXRlPSJTSUdOIn1lbHNle2lmKHkuaXNQdWJsaWM9PT10cnVlKXt0aGlzLnB1YktleT15O3RoaXMuc3RhdGU9IlZFUklGWSJ9ZWxzZXt0aHJvdyJpbml0IGZhaWxlZC46Iit5fX19O3RoaXMuaW5pdFNpZ249ZnVuY3Rpb24odil7aWYodHlwZW9mIHYuZWNwcnZoZXg9PSJzdHJpbmciJiZ0eXBlb2Ygdi5lY2N1cnZlbmFtZT09InN0cmluZyIpe3RoaXMuZWNwcnZoZXg9di5lY3BydmhleDt0aGlzLmVjY3VydmVuYW1lPXYuZWNjdXJ2ZW5hbWV9ZWxzZXt0aGlzLnBydktleT12fXRoaXMuc3RhdGU9IlNJR04ifTt0aGlzLmluaXRWZXJpZnlCeVB1YmxpY0tleT1mdW5jdGlvbih2KXtpZih0eXBlb2Ygdi5lY3B1YmhleD09InN0cmluZyImJnR5cGVvZiB2LmVjY3VydmVuYW1lPT0ic3RyaW5nIil7dGhpcy5lY3B1YmhleD12LmVjcHViaGV4O3RoaXMuZWNjdXJ2ZW5hbWU9di5lY2N1cnZlbmFtZX1lbHNle2lmKHYgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5FQ0RTQSl7dGhpcy5wdWJLZXk9dn1lbHNle2lmKHYgaW5zdGFuY2VvZiBSU0FLZXkpe3RoaXMucHViS2V5PXZ9fX10aGlzLnN0YXRlPSJWRVJJRlkifTt0aGlzLmluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNPWZ1bmN0aW9uKHYpe3ZhciB3PW5ldyBYNTA5KCk7dy5yZWFkQ2VydFBFTSh2KTt0aGlzLnB1YktleT13LnN1YmplY3RQdWJsaWNLZXlSU0E7dGhpcy5zdGF0ZT0iVkVSSUZZIn07dGhpcy51cGRhdGVTdHJpbmc9ZnVuY3Rpb24odil7dGhpcy5tZC51cGRhdGVTdHJpbmcodil9O3RoaXMudXBkYXRlSGV4PWZ1bmN0aW9uKHYpe3RoaXMubWQudXBkYXRlSGV4KHYpfTt0aGlzLnNpZ249ZnVuY3Rpb24oKXt0aGlzLnNIYXNoSGV4PXRoaXMubWQuZGlnZXN0KCk7aWYodHlwZW9mIHRoaXMuZWNwcnZoZXghPSJ1bmRlZmluZWQiJiZ0eXBlb2YgdGhpcy5lY2N1cnZlbmFtZSE9InVuZGVmaW5lZCIpe3ZhciB2PW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6dGhpcy5lY2N1cnZlbmFtZX0pO3RoaXMuaFNpZ249di5zaWduSGV4KHRoaXMuc0hhc2hIZXgsdGhpcy5lY3BydmhleCl9ZWxzZXtpZih0aGlzLnBydktleSBpbnN0YW5jZW9mIFJTQUtleSYmdGhpcy5wdWJrZXlBbGdOYW1lPT0icnNhYW5kbWdmMSIpe3RoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaFBTUyh0aGlzLnNIYXNoSGV4LHRoaXMubWRBbGdOYW1lLHRoaXMucHNzU2FsdExlbil9ZWxzZXtpZih0aGlzLnBydktleSBpbnN0YW5jZW9mIFJTQUtleSYmdGhpcy5wdWJrZXlBbGdOYW1lPT0icnNhIil7dGhpcy5oU2lnbj10aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdGhpcy5tZEFsZ05hbWUpfWVsc2V7aWYodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5FQ0RTQSl7dGhpcy5oU2lnbj10aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgpfWVsc2V7aWYodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0Epe3RoaXMuaFNpZ249dGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4KX1lbHNle3Rocm93IlNpZ25hdHVyZTogdW5zdXBwb3J0ZWQgcHVibGljIGtleSBhbGc6ICIrdGhpcy5wdWJrZXlBbGdOYW1lfX19fX1yZXR1cm4gdGhpcy5oU2lnbn07dGhpcy5zaWduU3RyaW5nPWZ1bmN0aW9uKHYpe3RoaXMudXBkYXRlU3RyaW5nKHYpO3JldHVybiB0aGlzLnNpZ24oKX07dGhpcy5zaWduSGV4PWZ1bmN0aW9uKHYpe3RoaXMudXBkYXRlSGV4KHYpO3JldHVybiB0aGlzLnNpZ24oKX07dGhpcy52ZXJpZnk9ZnVuY3Rpb24odil7dGhpcy5zSGFzaEhleD10aGlzLm1kLmRpZ2VzdCgpO2lmKHR5cGVvZiB0aGlzLmVjcHViaGV4IT0idW5kZWZpbmVkIiYmdHlwZW9mIHRoaXMuZWNjdXJ2ZW5hbWUhPSJ1bmRlZmluZWQiKXt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOnRoaXMuZWNjdXJ2ZW5hbWV9KTtyZXR1cm4gdy52ZXJpZnlIZXgodGhpcy5zSGFzaEhleCx2LHRoaXMuZWNwdWJoZXgpfWVsc2V7aWYodGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBSU0FLZXkmJnRoaXMucHVia2V5QWxnTmFtZT09InJzYWFuZG1nZjEiKXtyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTKHRoaXMuc0hhc2hIZXgsdix0aGlzLm1kQWxnTmFtZSx0aGlzLnBzc1NhbHRMZW4pfWVsc2V7aWYodGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBSU0FLZXkmJnRoaXMucHVia2V5QWxnTmFtZT09InJzYSIpe3JldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCx2KX1lbHNle2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0Epe3JldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCx2KX1lbHNle2lmKHRoaXMucHViS2V5IGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRFNBKXtyZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsdil9ZWxzZXt0aHJvdyJTaWduYXR1cmU6IHVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnOiAiK3RoaXMucHVia2V5QWxnTmFtZX19fX19fX19O3RoaXMuaW5pdD1mdW5jdGlvbihzLHQpe3Rocm93ImluaXQoa2V5LCBwYXNzKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5pbml0VmVyaWZ5QnlQdWJsaWNLZXk9ZnVuY3Rpb24ocyl7dGhyb3ciaW5pdFZlcmlmeUJ5UHVibGljS2V5KHJzYVB1YktleXkpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNPWZ1bmN0aW9uKHMpe3Rocm93ImluaXRWZXJpZnlCeUNlcnRpZmljYXRlUEVNKGNlcnRQRU0pIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRTaWduPWZ1bmN0aW9uKHMpe3Rocm93ImluaXRTaWduKHBydktleSkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMudXBkYXRlU3RyaW5nPWZ1bmN0aW9uKHMpe3Rocm93InVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLnVwZGF0ZUhleD1mdW5jdGlvbihzKXt0aHJvdyJ1cGRhdGVIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy5zaWduPWZ1bmN0aW9uKCl7dGhyb3cic2lnbigpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLnNpZ25TdHJpbmc9ZnVuY3Rpb24ocyl7dGhyb3ciZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj0iK3RoaXMuYWxnUHJvdk5hbWV9O3RoaXMuc2lnbkhleD1mdW5jdGlvbihzKXt0aHJvdyJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PSIrdGhpcy5hbGdQcm92TmFtZX07dGhpcy52ZXJpZnk9ZnVuY3Rpb24ocyl7dGhyb3cidmVyaWZ5KGhTaWdWYWwpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9Iit0aGlzLmFsZ1Byb3ZOYW1lfTt0aGlzLmluaXRQYXJhbXM9bztpZihvIT09dW5kZWZpbmVkKXtpZihvLmFsZyE9PXVuZGVmaW5lZCl7dGhpcy5hbGdOYW1lPW8uYWxnO2lmKG8ucHJvdj09PXVuZGVmaW5lZCl7dGhpcy5wcm92TmFtZT1LSlVSLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlt0aGlzLmFsZ05hbWVdfWVsc2V7dGhpcy5wcm92TmFtZT1vLnByb3Z9dGhpcy5hbGdQcm92TmFtZT10aGlzLmFsZ05hbWUrIjoiK3RoaXMucHJvdk5hbWU7dGhpcy5zZXRBbGdBbmRQcm92aWRlcih0aGlzLmFsZ05hbWUsdGhpcy5wcm92TmFtZSk7dGhpcy5fc2V0QWxnTmFtZXMoKX1pZihvLnBzc3NhbHRsZW4hPT11bmRlZmluZWQpe3RoaXMucHNzU2FsdExlbj1vLnBzc3NhbHRsZW59aWYoby5wcnZrZXlwZW0hPT11bmRlZmluZWQpe2lmKG8ucHJ2a2V5cGFzIT09dW5kZWZpbmVkKXt0aHJvdyJib3RoIHBydmtleXBlbSBhbmQgcHJ2a2V5cGFzIHBhcmFtZXRlcnMgbm90IHN1cHBvcnRlZCJ9ZWxzZXt0cnl7dmFyIHE9bmV3IFJTQUtleSgpO3EucmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nKG8ucHJ2a2V5cGVtKTt0aGlzLmluaXRTaWduKHEpfWNhdGNoKG0pe3Rocm93ImZhdGFsIGVycm9yIHRvIGxvYWQgcGVtIHByaXZhdGUga2V5OiAiK219fX19fTtLSlVSLmNyeXB0by5PSUQ9bmV3IGZ1bmN0aW9uKCl7dGhpcy5vaWRoZXgybmFtZT17IjJhODY0ODg2ZjcwZDAxMDEwMSI6InJzYUVuY3J5cHRpb24iLCIyYTg2NDhjZTNkMDIwMSI6ImVjUHVibGljS2V5IiwiMmE4NjQ4Y2UzODA0MDEiOiJkc2EiLCIyYTg2NDhjZTNkMDMwMTA3Ijoic2VjcDI1NnIxIiwiMmI4MTA0MDAxZiI6InNlY3AxOTJrMSIsIjJiODEwNDAwMjEiOiJzZWNwMjI0cjEiLCIyYjgxMDQwMDBhIjoic2VjcDI1NmsxIiwiMmI4MTA0MDAyMyI6InNlY3A1MjFyMSIsIjJiODEwNDAwMjIiOiJzZWNwMzg0cjEiLCIyYTg2NDhjZTM4MDQwMyI6IlNIQTF3aXRoRFNBIiwiNjA4NjQ4MDE2NTAzMDQwMzAxIjoiU0hBMjI0d2l0aERTQSIsIjYwODY0ODAxNjUwMzA0MDMwMiI6IlNIQTI1NndpdGhEU0EiLH19OwovKiEgZWNkc2EtbW9kaWZpZWQtMS4wLjQuanMgKGMpIFN0ZXBoYW4gVGhvbWFzLCBLZW5qaSBVcnVzaGltYSB8IGdpdGh1Yi5jb20vYml0Y29pbmpzL2JpdGNvaW5qcy1saWIvYmxvYi9tYXN0ZXIvTElDRU5TRQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLkVDRFNBPWZ1bmN0aW9uKGgpe3ZhciBlPSJzZWNwMjU2cjEiO3ZhciBnPW51bGw7dmFyIGI9bnVsbDt2YXIgZj1udWxsO3ZhciBhPW5ldyBTZWN1cmVSYW5kb20oKTt2YXIgZD1udWxsO3RoaXMudHlwZT0iRUMiO2Z1bmN0aW9uIGMocyxvLHIsbil7dmFyIGo9TWF0aC5tYXgoby5iaXRMZW5ndGgoKSxuLmJpdExlbmd0aCgpKTt2YXIgdD1zLmFkZDJEKHIpO3ZhciBxPXMuY3VydmUuZ2V0SW5maW5pdHkoKTtmb3IodmFyIHA9ai0xO3A+PTA7LS1wKXtxPXEudHdpY2UyRCgpO3Euej1CaWdJbnRlZ2VyLk9ORTtpZihvLnRlc3RCaXQocCkpe2lmKG4udGVzdEJpdChwKSl7cT1xLmFkZDJEKHQpfWVsc2V7cT1xLmFkZDJEKHMpfX1lbHNle2lmKG4udGVzdEJpdChwKSl7cT1xLmFkZDJEKHIpfX19cmV0dXJuIHF9dGhpcy5nZXRCaWdSYW5kb209ZnVuY3Rpb24oaSl7cmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGkuYml0TGVuZ3RoKCksYSkubW9kKGkuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpKS5hZGQoQmlnSW50ZWdlci5PTkUpfTt0aGlzLnNldE5hbWVkQ3VydmU9ZnVuY3Rpb24oaSl7dGhpcy5lY3BhcmFtcz1LSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLmdldEJ5TmFtZShpKTt0aGlzLnBydktleUhleD1udWxsO3RoaXMucHViS2V5SGV4PW51bGw7dGhpcy5jdXJ2ZU5hbWU9aX07dGhpcy5zZXRQcml2YXRlS2V5SGV4PWZ1bmN0aW9uKGkpe3RoaXMuaXNQcml2YXRlPXRydWU7dGhpcy5wcnZLZXlIZXg9aX07dGhpcy5zZXRQdWJsaWNLZXlIZXg9ZnVuY3Rpb24oaSl7dGhpcy5pc1B1YmxpYz10cnVlO3RoaXMucHViS2V5SGV4PWl9O3RoaXMuZ2VuZXJhdGVLZXlQYWlySGV4PWZ1bmN0aW9uKCl7dmFyIGs9dGhpcy5lY3BhcmFtcy5uO3ZhciBuPXRoaXMuZ2V0QmlnUmFuZG9tKGspO3ZhciBsPXRoaXMuZWNwYXJhbXMuRy5tdWx0aXBseShuKTt2YXIgcT1sLmdldFgoKS50b0JpZ0ludGVnZXIoKTt2YXIgbz1sLmdldFkoKS50b0JpZ0ludGVnZXIoKTt2YXIgaT10aGlzLmVjcGFyYW1zLmtleWxlbi80O3ZhciBtPSgiMDAwMDAwMDAwMCIrbi50b1N0cmluZygxNikpLnNsaWNlKC1pKTt2YXIgcj0oIjAwMDAwMDAwMDAiK3EudG9TdHJpbmcoMTYpKS5zbGljZSgtaSk7dmFyIHA9KCIwMDAwMDAwMDAwIitvLnRvU3RyaW5nKDE2KSkuc2xpY2UoLWkpO3ZhciBqPSIwNCIrcitwO3RoaXMuc2V0UHJpdmF0ZUtleUhleChtKTt0aGlzLnNldFB1YmxpY0tleUhleChqKTtyZXR1cm57ZWNwcnZoZXg6bSxlY3B1YmhleDpqfX07dGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLnNpZ25IZXgoaSx0aGlzLnBydktleUhleCl9O3RoaXMuc2lnbkhleD1mdW5jdGlvbihvLGope3ZhciB0PW5ldyBCaWdJbnRlZ2VyKGosMTYpO3ZhciBsPXRoaXMuZWNwYXJhbXMubjt2YXIgcT1uZXcgQmlnSW50ZWdlcihvLDE2KTtkb3t2YXIgbT10aGlzLmdldEJpZ1JhbmRvbShsKTt2YXIgdT10aGlzLmVjcGFyYW1zLkc7dmFyIHA9dS5tdWx0aXBseShtKTt2YXIgaT1wLmdldFgoKS50b0JpZ0ludGVnZXIoKS5tb2QobCl9d2hpbGUoaS5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKTw9MCk7dmFyIHY9bS5tb2RJbnZlcnNlKGwpLm11bHRpcGx5KHEuYWRkKHQubXVsdGlwbHkoaSkpKS5tb2QobCk7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcoaSx2KX07dGhpcy5zaWduPWZ1bmN0aW9uKG0sdSl7dmFyIHE9dTt2YXIgaj10aGlzLmVjcGFyYW1zLm47dmFyIHA9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobSk7ZG97dmFyIGw9dGhpcy5nZXRCaWdSYW5kb20oaik7dmFyIHQ9dGhpcy5lY3BhcmFtcy5HO3ZhciBvPXQubXVsdGlwbHkobCk7dmFyIGk9by5nZXRYKCkudG9CaWdJbnRlZ2VyKCkubW9kKGopfXdoaWxlKGkuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTyk8PTApO3ZhciB2PWwubW9kSW52ZXJzZShqKS5tdWx0aXBseShwLmFkZChxLm11bHRpcGx5KGkpKSkubW9kKGopO3JldHVybiB0aGlzLnNlcmlhbGl6ZVNpZyhpLHYpfTt0aGlzLnZlcmlmeVdpdGhNZXNzYWdlSGFzaD1mdW5jdGlvbihqLGkpe3JldHVybiB0aGlzLnZlcmlmeUhleChqLGksdGhpcy5wdWJLZXlIZXgpfTt0aGlzLnZlcmlmeUhleD1mdW5jdGlvbihtLGkscCl7dmFyIGwsajt2YXIgbz1LSlVSLmNyeXB0by5FQ0RTQS5wYXJzZVNpZ0hleChpKTtsPW8ucjtqPW8uczt2YXIgaztrPUVDUG9pbnRGcC5kZWNvZGVGcm9tSGV4KHRoaXMuZWNwYXJhbXMuY3VydmUscCk7dmFyIG49bmV3IEJpZ0ludGVnZXIobSwxNik7cmV0dXJuIHRoaXMudmVyaWZ5UmF3KG4sbCxqLGspfTt0aGlzLnZlcmlmeT1mdW5jdGlvbihvLHAsail7dmFyIGwsaTtpZihCaXRjb2luLlV0aWwuaXNBcnJheShwKSl7dmFyIG49dGhpcy5wYXJzZVNpZyhwKTtsPW4ucjtpPW4uc31lbHNle2lmKCJvYmplY3QiPT09dHlwZW9mIHAmJnAuciYmcC5zKXtsPXAucjtpPXAuc31lbHNle3Rocm93IkludmFsaWQgdmFsdWUgZm9yIHNpZ25hdHVyZSJ9fXZhciBrO2lmKGogaW5zdGFuY2VvZiBFQ1BvaW50RnApe2s9an1lbHNle2lmKEJpdGNvaW4uVXRpbC5pc0FycmF5KGopKXtrPUVDUG9pbnRGcC5kZWNvZGVGcm9tKHRoaXMuZWNwYXJhbXMuY3VydmUsail9ZWxzZXt0aHJvdyJJbnZhbGlkIGZvcm1hdCBmb3IgcHVia2V5IHZhbHVlLCBtdXN0IGJlIGJ5dGUgYXJyYXkgb3IgRUNQb2ludEZwIn19dmFyIG09QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobyk7cmV0dXJuIHRoaXMudmVyaWZ5UmF3KG0sbCxpLGspfTt0aGlzLnZlcmlmeVJhdz1mdW5jdGlvbihvLGksdyxtKXt2YXIgbD10aGlzLmVjcGFyYW1zLm47dmFyIHU9dGhpcy5lY3BhcmFtcy5HO2lmKGkuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHxpLmNvbXBhcmVUbyhsKT49MCl7cmV0dXJuIGZhbHNlfWlmKHcuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKTwwfHx3LmNvbXBhcmVUbyhsKT49MCl7cmV0dXJuIGZhbHNlfXZhciBwPXcubW9kSW52ZXJzZShsKTt2YXIgaz1vLm11bHRpcGx5KHApLm1vZChsKTt2YXIgaj1pLm11bHRpcGx5KHApLm1vZChsKTt2YXIgcT11Lm11bHRpcGx5KGspLmFkZChtLm11bHRpcGx5KGopKTt2YXIgdD1xLmdldFgoKS50b0JpZ0ludGVnZXIoKS5tb2QobCk7cmV0dXJuIHQuZXF1YWxzKGkpfTt0aGlzLnNlcmlhbGl6ZVNpZz1mdW5jdGlvbihrLGope3ZhciBsPWsudG9CeXRlQXJyYXlTaWduZWQoKTt2YXIgaT1qLnRvQnl0ZUFycmF5U2lnbmVkKCk7dmFyIG09W107bS5wdXNoKDIpO20ucHVzaChsLmxlbmd0aCk7bT1tLmNvbmNhdChsKTttLnB1c2goMik7bS5wdXNoKGkubGVuZ3RoKTttPW0uY29uY2F0KGkpO20udW5zaGlmdChtLmxlbmd0aCk7bS51bnNoaWZ0KDQ4KTtyZXR1cm4gbX07dGhpcy5wYXJzZVNpZz1mdW5jdGlvbihuKXt2YXIgbTtpZihuWzBdIT00OCl7dGhyb3cgbmV3IEVycm9yKCJTaWduYXR1cmUgbm90IGEgdmFsaWQgREVSU2VxdWVuY2UiKX1tPTI7aWYoblttXSE9Mil7dGhyb3cgbmV3IEVycm9yKCJGaXJzdCBlbGVtZW50IGluIHNpZ25hdHVyZSBtdXN0IGJlIGEgREVSSW50ZWdlciIpfXZhciBsPW4uc2xpY2UobSsyLG0rMituW20rMV0pO20rPTIrblttKzFdO2lmKG5bbV0hPTIpe3Rocm93IG5ldyBFcnJvcigiU2Vjb25kIGVsZW1lbnQgaW4gc2lnbmF0dXJlIG11c3QgYmUgYSBERVJJbnRlZ2VyIil9dmFyIGk9bi5zbGljZShtKzIsbSsyK25bbSsxXSk7bSs9MituW20rMV07dmFyIGs9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobCk7dmFyIGo9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQoaSk7cmV0dXJue3I6ayxzOmp9fTt0aGlzLnBhcnNlU2lnQ29tcGFjdD1mdW5jdGlvbihtKXtpZihtLmxlbmd0aCE9PTY1KXt0aHJvdyJTaWduYXR1cmUgaGFzIHRoZSB3cm9uZyBsZW5ndGgifXZhciBqPW1bMF0tMjc7aWYoajwwfHxqPjcpe3Rocm93IkludmFsaWQgc2lnbmF0dXJlIHR5cGUifXZhciBvPXRoaXMuZWNwYXJhbXMubjt2YXIgbD1CaWdJbnRlZ2VyLmZyb21CeXRlQXJyYXlVbnNpZ25lZChtLnNsaWNlKDEsMzMpKS5tb2Qobyk7dmFyIGs9QmlnSW50ZWdlci5mcm9tQnl0ZUFycmF5VW5zaWduZWQobS5zbGljZSgzMyw2NSkpLm1vZChvKTtyZXR1cm57cjpsLHM6ayxpOmp9fTtpZihoIT09dW5kZWZpbmVkKXtpZihoLmN1cnZlIT09dW5kZWZpbmVkKXt0aGlzLmN1cnZlTmFtZT1oLmN1cnZlfX1pZih0aGlzLmN1cnZlTmFtZT09PXVuZGVmaW5lZCl7dGhpcy5jdXJ2ZU5hbWU9ZX10aGlzLnNldE5hbWVkQ3VydmUodGhpcy5jdXJ2ZU5hbWUpO2lmKGghPT11bmRlZmluZWQpe2lmKGgucHJ2IT09dW5kZWZpbmVkKXt0aGlzLnNldFByaXZhdGVLZXlIZXgoaC5wcnYpfWlmKGgucHViIT09dW5kZWZpbmVkKXt0aGlzLnNldFB1YmxpY0tleUhleChoLnB1Yil9fX07S0pVUi5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXg9ZnVuY3Rpb24oYSl7dmFyIGI9S0pVUi5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXhJbkhleFJTKGEpO3ZhciBkPW5ldyBCaWdJbnRlZ2VyKGIuciwxNik7dmFyIGM9bmV3IEJpZ0ludGVnZXIoYi5zLDE2KTtyZXR1cm57cjpkLHM6Y319O0tKVVIuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUz1mdW5jdGlvbihjKXtpZihjLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJzaWduYXR1cmUgaXMgbm90IGEgQVNOLjEgc2VxdWVuY2UifXZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGMsMCk7aWYoYi5sZW5ndGghPTIpe3Rocm93Im51bWJlciBvZiBzaWduYXR1cmUgQVNOLjEgc2VxdWVuY2UgZWxlbWVudHMgc2VlbSB3cm9uZyJ9dmFyIGc9YlswXTt2YXIgZj1iWzFdO2lmKGMuc3Vic3RyKGcsMikhPSIwMiIpe3Rocm93IjFzdCBpdGVtIG9mIHNlcXVlbmUgb2Ygc2lnbmF0dXJlIGlzIG5vdCBBU04uMSBpbnRlZ2VyIn1pZihjLnN1YnN0cihmLDIpIT0iMDIiKXt0aHJvdyIybmQgaXRlbSBvZiBzZXF1ZW5lIG9mIHNpZ25hdHVyZSBpcyBub3QgQVNOLjEgaW50ZWdlciJ9dmFyIGU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYyxnKTt2YXIgZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLGYpO3JldHVybntyOmUsczpkfX07S0pVUi5jcnlwdG8uRUNEU0EuYXNuMVNpZ1RvQ29uY2F0U2lnPWZ1bmN0aW9uKGMpe3ZhciBkPUtKVVIuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUyhjKTt2YXIgYj1kLnI7dmFyIGE9ZC5zO2lmKGIuc3Vic3RyKDAsMik9PSIwMCImJigoKGIubGVuZ3RoLzIpKjgpJSgxNio4KSk9PTgpe2I9Yi5zdWJzdHIoMil9aWYoYS5zdWJzdHIoMCwyKT09IjAwIiYmKCgoYS5sZW5ndGgvMikqOCklKDE2KjgpKT09OCl7YT1hLnN1YnN0cigyKX1pZigoKChiLmxlbmd0aC8yKSo4KSUoMTYqOCkpIT0wKXt0aHJvdyJ1bmtub3duIEVDRFNBIHNpZyByIGxlbmd0aCBlcnJvciJ9aWYoKCgoYS5sZW5ndGgvMikqOCklKDE2KjgpKSE9MCl7dGhyb3cidW5rbm93biBFQ0RTQSBzaWcgcyBsZW5ndGggZXJyb3IifXJldHVybiBiK2F9O0tKVVIuY3J5cHRvLkVDRFNBLmNvbmNhdFNpZ1RvQVNOMVNpZz1mdW5jdGlvbihhKXtpZigoKChhLmxlbmd0aC8yKSo4KSUoMTYqOCkpIT0wKXt0aHJvdyJ1bmtub3duIEVDRFNBIGNvbmNhdGluYXRlZCByLXMgc2lnICBsZW5ndGggZXJyb3IifXZhciBjPWEuc3Vic3RyKDAsYS5sZW5ndGgvMik7dmFyIGI9YS5zdWJzdHIoYS5sZW5ndGgvMik7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnKGMsYil9O0tKVVIuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnPWZ1bmN0aW9uKGIsYSl7dmFyIGQ9bmV3IEJpZ0ludGVnZXIoYiwxNik7dmFyIGM9bmV3IEJpZ0ludGVnZXIoYSwxNik7cmV0dXJuIEtKVVIuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcoZCxjKX07S0pVUi5jcnlwdG8uRUNEU0EuYmlSU1NpZ1RvQVNOMVNpZz1mdW5jdGlvbihlLGMpe3ZhciBiPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmV9KTt2YXIgYT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpjfSk7dmFyIGQ9bmV3IEtKVVIuYXNuMS5ERVJTZXF1ZW5jZSh7YXJyYXk6W2IsYV19KTtyZXR1cm4gZC5nZXRFbmNvZGVkSGV4KCl9OwovKiEgZWNwYXJhbS0xLjAuMC5qcyAoYykgMjAxMyBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KaWYodHlwZW9mIEtKVVI9PSJ1bmRlZmluZWQifHwhS0pVUil7S0pVUj17fX1pZih0eXBlb2YgS0pVUi5jcnlwdG89PSJ1bmRlZmluZWQifHwhS0pVUi5jcnlwdG8pe0tKVVIuY3J5cHRvPXt9fUtKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREI9bmV3IGZ1bmN0aW9uKCl7dmFyIGI9e307dmFyIGM9e307ZnVuY3Rpb24gYShkKXtyZXR1cm4gbmV3IEJpZ0ludGVnZXIoZCwxNil9dGhpcy5nZXRCeU5hbWU9ZnVuY3Rpb24oZSl7dmFyIGQ9ZTtpZih0eXBlb2YgY1tkXSE9InVuZGVmaW5lZCIpe2Q9Y1tlXX1pZih0eXBlb2YgYltkXSE9InVuZGVmaW5lZCIpe3JldHVybiBiW2RdfXRocm93InVucmVnaXN0ZXJlZCBFQyBjdXJ2ZSBuYW1lOiAiK2R9O3RoaXMucmVnaXN0PWZ1bmN0aW9uKEEsbCxvLGcsbSxlLGosZixrLHUsZCx4KXtiW0FdPXt9O3ZhciBzPWEobyk7dmFyIHo9YShnKTt2YXIgeT1hKG0pO3ZhciB0PWEoZSk7dmFyIHc9YShqKTt2YXIgcj1uZXcgRUNDdXJ2ZUZwKHMseix5KTt2YXIgcT1yLmRlY29kZVBvaW50SGV4KCIwNCIrZitrKTtiW0FdWyJuYW1lIl09QTtiW0FdWyJrZXlsZW4iXT1sO2JbQV1bImN1cnZlIl09cjtiW0FdWyJHIl09cTtiW0FdWyJuIl09dDtiW0FdWyJoIl09dztiW0FdWyJvaWQiXT1kO2JbQV1bImluZm8iXT14O2Zvcih2YXIgdj0wO3Y8dS5sZW5ndGg7disrKXtjW3Vbdl1dPUF9fX07S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AxMjhyMSIsMTI4LCJGRkZGRkZGREZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRiIsIkZGRkZGRkZERkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDIiwiRTg3NTc5QzExMDc5RjQzREQ4MjQ5OTNDMkNFRTVFRDMiLCJGRkZGRkZGRTAwMDAwMDAwNzVBMzBEMUI5MDM4QTExNSIsIjEiLCIxNjFGRjc1MjhCODk5QjJEMEMyODYwN0NBNTJDNUI4NiIsIkNGNUFDODM5NUJBRkVCMTNDMDJEQTI5MkRERUQ3QTgzIixbXSwiIiwic2VjcDEyOHIxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTI4IGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTYwazEiLDE2MCwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGQUM3MyIsIjAiLCI3IiwiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMUI4RkExNkRGQUI5QUNBMTZCNkIzIiwiMSIsIjNCNEMzODJDRTM3QUExOTJBNDAxOUU3NjMwMzZGNEY1REQ0RDdFQkIiLCI5MzhDRjkzNTMxOEZEQ0VENkJDMjgyODY1MzE3MzNDM0YwM0M0RkVFIixbXSwiIiwic2VjcDE2MGsxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTYwIGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTYwcjEiLDE2MCwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY3RkZGRkZGRiIsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGN0ZGRkZGRkMiLCIxQzk3QkVGQzU0QkQ3QThCNjVBQ0Y4OUY4MUQ0RDRBREM1NjVGQTQ1IiwiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMUY0QzhGOTI3QUVEM0NBNzUyMjU3IiwiMSIsIjRBOTZCNTY4OEVGNTczMjg0NjY0Njk4OTY4QzM4QkI5MTNDQkZDODIiLCIyM0E2Mjg1NTMxNjg5NDdENTlEQ0M5MTIwNDIzNTEzNzdBQzVGQjMyIixbXSwiIiwic2VjcDE2MHIxIDogU0VDRyBjdXJ2ZSBvdmVyIGEgMTYwIGJpdCBwcmltZSBmaWVsZCIpO0tKVVIuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KCJzZWNwMTkyazEiLDE5MiwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZFRTM3IiwiMCIsIjMiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkUyNkYyRkMxNzBGNjk0NjZBNzRERUZEOEQiLCIxIiwiREI0RkYxMEVDMDU3RTlBRTI2QjA3RDAyODBCN0Y0MzQxREE1RDFCMUVBRTA2QzdEIiwiOUIyRjJGNkQ5QzU2MjhBNzg0NDE2M0QwMTVCRTg2MzQ0MDgyQUE4OEQ5NUUyRjlEIixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AxOTJyMSIsMTkyLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkMiLCI2NDIxMDUxOUU1OUM4MEU3MEZBN0U5QUI3MjI0MzA0OUZFQjhERUVDQzE0NkI5QjEiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY5OURFRjgzNjE0NkJDOUIxQjREMjI4MzEiLCIxIiwiMTg4REE4MEVCMDMwOTBGNjdDQkYyMEVCNDNBMTg4MDBGNEZGMEFGRDgyRkYxMDEyIiwiMDcxOTJCOTVGRkM4REE3ODYzMTAxMUVENkIyNENERDU3M0Y5NzdBMTFFNzk0ODExIixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyMjRyMSIsMjI0LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMSIsIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFIiwiQjQwNTBBODUwQzA0QjNBQkY1NDEzMjU2NTA0NEIwQjdEN0JGRDhCQTI3MEIzOTQzMjM1NUZGQjQiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGMTZBMkUwQjhGMDNFMTNERDI5NDU1QzVDMkEzRCIsIjEiLCJCNzBFMENCRDZCQjRCRjdGMzIxMzkwQjk0QTAzQzFEMzU2QzIxMTIyMzQzMjgwRDYxMTVDMUQyMSIsIkJEMzc2Mzg4QjVGNzIzRkI0QzIyREZFNkNENDM3NUEwNUEwNzQ3NjQ0NEQ1ODE5OTg1MDA3RTM0IixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyNTZrMSIsMjU2LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGQzJGIiwiMCIsIjciLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUJBQUVEQ0U2QUY0OEEwM0JCRkQyNUU4Q0QwMzY0MTQxIiwiMSIsIjc5QkU2NjdFRjlEQ0JCQUM1NUEwNjI5NUNFODcwQjA3MDI5QkZDREIyRENFMjhEOTU5RjI4MTVCMTZGODE3OTgiLCI0ODNBREE3NzI2QTNDNDY1NURBNEZCRkMwRTExMDhBOEZEMTdCNDQ4QTY4NTU0MTk5QzQ3RDA4RkZCMTBENEI4IixbXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AyNTZyMSIsMjU2LCJGRkZGRkZGRjAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGIiwiRkZGRkZGRkYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQyIsIjVBQzYzNUQ4QUEzQTkzRTdCM0VCQkQ1NTc2OTg4NkJDNjUxRDA2QjBDQzUzQjBGNjNCQ0UzQzNFMjdEMjYwNEIiLCJGRkZGRkZGRjAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkJDRTZGQUFEQTcxNzlFODRGM0I5Q0FDMkZDNjMyNTUxIiwiMSIsIjZCMTdEMUYyRTEyQzQyNDdGOEJDRTZFNTYzQTQ0MEYyNzcwMzdEODEyREVCMzNBMEY0QTEzOTQ1RDg5OEMyOTYiLCI0RkUzNDJFMkZFMUE3RjlCOEVFN0VCNEE3QzBGOUUxNjJCQ0UzMzU3NkIzMTVFQ0VDQkI2NDA2ODM3QkY1MUY1IixbIk5JU1QgUC0yNTYiLCJQLTI1NiIsInByaW1lMjU2djEiXSk7S0pVUi5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoInNlY3AzODRyMSIsMzg0LCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkMiLCJCMzMxMkZBN0UyM0VFN0U0OTg4RTA1NkJFM0Y4MkQxOTE4MUQ5QzZFRkU4MTQxMTIwMzE0MDg4RjUwMTM4NzVBQzY1NjM5OEQ4QTJFRDE5RDJBODVDOEVERDNFQzJBRUYiLCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDNzYzNEQ4MUY0MzcyRERGNTgxQTBEQjI0OEIwQTc3QUVDRUMxOTZBQ0NDNTI5NzMiLCIxIiwiQUE4N0NBMjJCRThCMDUzNzhFQjFDNzFFRjMyMEFENzQ2RTFEM0I2MjhCQTc5Qjk4NTlGNzQxRTA4MjU0MkEzODU1MDJGMjVEQkY1NTI5NkMzQTU0NUUzODcyNzYwQUI3IiwiMzYxN2RlNGE5NjI2MmM2ZjVkOWU5OGJmOTI5MmRjMjlmOGY0MWRiZDI4OWExNDdjZTlkYTMxMTNiNWYwYjhjMDBhNjBiMWNlMWQ3ZTgxOWQ3YTQzMWQ3YzkwZWEwZTVmIixbIk5JU1QgUC0zODQiLCJQLTM4NCJdKTtLSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdCgic2VjcDUyMXIxIiw1MjEsIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGIiwiMUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkMiLCIwNTE5NTNFQjk2MThFMUM5QTFGOTI5QTIxQTBCNjg1NDBFRUEyREE3MjVCOTlCMzE1RjNCOEI0ODk5MThFRjEwOUUxNTYxOTM5NTFFQzdFOTM3QjE2NTJDMEJEM0JCMUJGMDczNTczREY4ODNEMkMzNEYxRUY0NTFGRDQ2QjUwM0YwMCIsIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkE1MTg2ODc4M0JGMkY5NjZCN0ZDQzAxNDhGNzA5QTVEMDNCQjVDOUI4ODk5QzQ3QUVCQjZGQjcxRTkxMzg2NDA5IiwiMSIsIkM2ODU4RTA2QjcwNDA0RTlDRDlFM0VDQjY2MjM5NUI0NDI5QzY0ODEzOTA1M0ZCNTIxRjgyOEFGNjA2QjREM0RCQUExNEI1RTc3RUZFNzU5MjhGRTFEQzEyN0EyRkZBOERFMzM0OEIzQzE4NTZBNDI5QkY5N0U3RTMxQzJFNUJENjYiLCIwMTE4MzkyOTZhNzg5YTNiYzAwNDVjOGE1ZmI0MmM3ZDFiZDk5OGY1NDQ0OTU3OWI0NDY4MTdhZmJkMTcyNzNlNjYyYzk3ZWU3Mjk5NWVmNDI2NDBjNTUwYjkwMTNmYWQwNzYxMzUzYzcwODZhMjcyYzI0MDg4YmU5NDc2OWZkMTY2NTAiLFsiTklTVCBQLTUyMSIsIlAtNTIxIl0pOwovKiEgZHNhLW1vZGlmaWVkLTEuMC4xLmpzIChjKSBSZWN1cml0eSBMYWJzIEdtYkgsIEtlbmppIFVydXNoaW1tYSB8IGdpdGh1Yi5jb20vb3BlbnBncGpzL29wZW5wZ3Bqcy9ibG9iL21hc3Rlci9MSUNFTlNFCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmNyeXB0bz09InVuZGVmaW5lZCJ8fCFLSlVSLmNyeXB0byl7S0pVUi5jcnlwdG89e319S0pVUi5jcnlwdG8uRFNBPWZ1bmN0aW9uKCl7dGhpcy5wPW51bGw7dGhpcy5xPW51bGw7dGhpcy5nPW51bGw7dGhpcy55PW51bGw7dGhpcy54PW51bGw7dGhpcy50eXBlPSJEU0EiO3RoaXMuc2V0UHJpdmF0ZT1mdW5jdGlvbih6LHcsdixBLHUpe3RoaXMuaXNQcml2YXRlPXRydWU7dGhpcy5wPXo7dGhpcy5xPXc7dGhpcy5nPXY7dGhpcy55PUE7dGhpcy54PXV9O3RoaXMuc2V0UHVibGljPWZ1bmN0aW9uKHcsdix1LHope3RoaXMuaXNQdWJsaWM9dHJ1ZTt0aGlzLnA9dzt0aGlzLnE9djt0aGlzLmc9dTt0aGlzLnk9ejt0aGlzLng9bnVsbH07dGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKHope3ZhciB2PXRoaXMucDt2YXIgdT10aGlzLnE7dmFyIEM9dGhpcy5nO3ZhciBEPXRoaXMueTt2YXIgRT10aGlzLng7dmFyIEE9ei5zdWJzdHIoMCx1LmJpdExlbmd0aCgpLzQpO3ZhciBCPW5ldyBCaWdJbnRlZ2VyKHosMTYpO3ZhciB3PW4oQmlnSW50ZWdlci5PTkUuYWRkKEJpZ0ludGVnZXIuT05FKSx1LnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk7dmFyIEc9KEMubW9kUG93KHcsdikpLm1vZCh1KTt2YXIgRj0ody5tb2RJbnZlcnNlKHUpLm11bHRpcGx5KEIuYWRkKEUubXVsdGlwbHkoRykpKSkubW9kKHUpO3ZhciBIPUtKVVIuYXNuMS5BU04xVXRpbC5qc29uVG9BU04xSEVYKHtzZXE6W3siaW50Ijp7YmlnaW50Okd9fSx7ImludCI6e2JpZ2ludDpGfX1dfSk7cmV0dXJuIEh9O3RoaXMudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoPWZ1bmN0aW9uKEMsQil7dmFyIHo9dGhpcy5wO3ZhciB1PXRoaXMucTt2YXIgRz10aGlzLmc7dmFyIEg9dGhpcy55O3ZhciBFPXRoaXMucGFyc2VBU04xU2lnbmF0dXJlKEIpO3ZhciBLPUVbMF07dmFyIEo9RVsxXTt2YXIgQz1DLnN1YnN0cigwLHUuYml0TGVuZ3RoKCkvNCk7dmFyIEQ9bmV3IEJpZ0ludGVnZXIoQywxNik7aWYoQmlnSW50ZWdlci5aRVJPLmNvbXBhcmVUbyhLKT4wfHxLLmNvbXBhcmVUbyh1KT4wfHxCaWdJbnRlZ2VyLlpFUk8uY29tcGFyZVRvKEopPjB8fEouY29tcGFyZVRvKHUpPjApe3Rocm93ImludmFsaWQgRFNBIHNpZ25hdHVyZSJ9dmFyIEk9Si5tb2RJbnZlcnNlKHUpO3ZhciBBPUQubXVsdGlwbHkoSSkubW9kKHUpO3ZhciB2PUsubXVsdGlwbHkoSSkubW9kKHUpO3ZhciBGPUcubW9kUG93KEEseikubXVsdGlwbHkoSC5tb2RQb3codix6KSkubW9kKHopLm1vZCh1KTtyZXR1cm4gRi5jb21wYXJlVG8oSyk9PTB9O3RoaXMucGFyc2VBU04xU2lnbmF0dXJlPWZ1bmN0aW9uKHUpe3RyeXt2YXIgeT1uZXcgQmlnSW50ZWdlcihBU04xSEVYLmdldFZieUxpc3QodSwwLFswXSwiMDIiKSwxNik7dmFyIHY9bmV3IEJpZ0ludGVnZXIoQVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjAyIiksMTYpO3JldHVyblt5LHZdfWNhdGNoKHcpe3Rocm93Im1hbGZvcm1lZCBEU0Egc2lnbmF0dXJlIn19O2Z1bmN0aW9uIGQoRSx3LEIsdix1LEMpe3ZhciB6PUtKVVIuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyh3LEUudG9Mb3dlckNhc2UoKSk7dmFyIHo9ei5zdWJzdHIoMCx1LmJpdExlbmd0aCgpLzQpO3ZhciBBPW5ldyBCaWdJbnRlZ2VyKHosMTYpO3ZhciB5PW4oQmlnSW50ZWdlci5PTkUuYWRkKEJpZ0ludGVnZXIuT05FKSx1LnN1YnRyYWN0KEJpZ0ludGVnZXIuT05FKSk7dmFyIEY9KEIubW9kUG93KHksdikpLm1vZCh1KTt2YXIgRD0oeS5tb2RJbnZlcnNlKHUpLm11bHRpcGx5KEEuYWRkKEMubXVsdGlwbHkoRikpKSkubW9kKHUpO3ZhciBHPW5ldyBBcnJheSgpO0dbMF09RjtHWzFdPUQ7cmV0dXJuIEd9ZnVuY3Rpb24gcih2KXt2YXIgdT1vcGVucGdwLmNvbmZpZy5jb25maWcucHJlZmVyX2hhc2hfYWxnb3JpdGhtO3N3aXRjaChNYXRoLnJvdW5kKHYuYml0TGVuZ3RoKCkvOCkpe2Nhc2UgMjA6aWYodSE9MiYmdT4xMSYmdSE9MTAmJnU8OCl7cmV0dXJuIDJ9cmV0dXJuIHU7Y2FzZSAyODppZih1PjExJiZ1PDgpe3JldHVybiAxMX1yZXR1cm4gdTtjYXNlIDMyOmlmKHU+MTAmJnU8OCl7cmV0dXJuIDh9cmV0dXJuIHU7ZGVmYXVsdDp1dGlsLnByaW50X2RlYnVnKCJEU0Egc2VsZWN0IGhhc2ggYWxnb3JpdGhtOiByZXR1cm5pbmcgbnVsbCBmb3IgYW4gdW5rbm93biBsZW5ndGggb2YgcSIpO3JldHVybiBudWxsfX10aGlzLnNlbGVjdF9oYXNoX2FsZ29yaXRobT1yO2Z1bmN0aW9uIG0oSSxLLEosQix6LHUsRixHKXt2YXIgQz1LSlVSLmNyeXB0by5VdGlsLmhhc2hTdHJpbmcoQixJLnRvTG93ZXJDYXNlKCkpO3ZhciBDPUMuc3Vic3RyKDAsdS5iaXRMZW5ndGgoKS80KTt2YXIgRD1uZXcgQmlnSW50ZWdlcihDLDE2KTtpZihCaWdJbnRlZ2VyLlpFUk8uY29tcGFyZVRvKEspPjB8fEsuY29tcGFyZVRvKHUpPjB8fEJpZ0ludGVnZXIuWkVSTy5jb21wYXJlVG8oSik+MHx8Si5jb21wYXJlVG8odSk+MCl7dXRpbC5wcmludF9lcnJvcigiaW52YWxpZCBEU0EgU2lnbmF0dXJlIik7cmV0dXJuIG51bGx9dmFyIEg9Si5tb2RJbnZlcnNlKHUpO3ZhciBBPUQubXVsdGlwbHkoSCkubW9kKHUpO3ZhciB2PUsubXVsdGlwbHkoSCkubW9kKHUpO3ZhciBFPUYubW9kUG93KEEseikubXVsdGlwbHkoRy5tb2RQb3codix6KSkubW9kKHopLm1vZCh1KTtyZXR1cm4gRS5jb21wYXJlVG8oSyk9PTB9ZnVuY3Rpb24gYSh6KXt2YXIgQT1uZXcgQmlnSW50ZWdlcih6LHByaW1lQ2VudGVyaWUpO3ZhciB5PWoocSw1MTIpO3ZhciB1PXQocCxxLHopO3ZhciB2O2Rve3Y9bmV3IEJpZ0ludGVnZXIocS5iaXRDb3VudCgpLHJhbmQpfXdoaWxlKHguY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTykhPTEmJnguY29tcGFyZVRvKHEpIT0tMSk7dmFyIHc9Zy5tb2RQb3coeCxwKTtyZXR1cm57eDp2LHE6QSxwOnksZzp1LHk6d319ZnVuY3Rpb24gaih5LHosdyl7aWYoeiU2NCE9MCl7cmV0dXJuIGZhbHNlfXZhciB1O3ZhciB2O2Rve3U9dyhiaXRjb3VudCx0cnVlKTt2PXUuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpO3U9dS5zdWJ0cmFjdCh2LnJlbWFpbmRlcih5KSl9d2hpbGUoIXUuaXNQcm9iYWJsZVByaW1lKHByaW1lQ2VudGVyaWUpfHx1LmJpdExlbmd0aCgpIT1sKTtyZXR1cm4gdX1mdW5jdGlvbiB0KEIseixBLHcpe3ZhciB1PUIuc3VidHJhY3QoQmlnSW50ZWdlci5PTkUpO3ZhciB5PXUuZGl2aWRlKHopO3ZhciB2O2Rve3Y9dyhBKX13aGlsZSh2LmNvbXBhcmVUbyh1KSE9LTEmJnYuY29tcGFyZVRvKEJpZ0ludGVnZXIuT05FKSE9MSk7cmV0dXJuIHYubW9kUG93KHksQil9ZnVuY3Rpb24gbyh3LHksdSl7dmFyIHY7ZG97dj11KHksZmFsc2UpfXdoaWxlKHYuY29tcGFyZVRvKHcpIT0tMSYmdi5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSE9MSk7cmV0dXJuIHZ9ZnVuY3Rpb24gaSh2LHcpe2s9byh2KTt2YXIgdT1nLm1vZFBvdyhrLHcpLm1vZCh2KTtyZXR1cm4gdX1mdW5jdGlvbiBoKEIsdyx5LHYseix1KXt2YXIgQT1CKHYpO3M9KHcubW9kSW52ZXJzZSh6KS5tdWx0aXBseShBLmFkZCh1Lm11bHRpcGx5KHkpKSkpLm1vZCh6KTtyZXR1cm4gc310aGlzLnNpZ249ZDt0aGlzLnZlcmlmeT1tO2Z1bmN0aW9uIG4odyx1KXtpZih1LmNvbXBhcmVUbyh3KTw9MCl7cmV0dXJufXZhciB2PXUuc3VidHJhY3Qodyk7dmFyIHk9ZSh2LmJpdExlbmd0aCgpKTt3aGlsZSh5PnYpe3k9ZSh2LmJpdExlbmd0aCgpKX1yZXR1cm4gdy5hZGQoeSl9ZnVuY3Rpb24gZSh3KXtpZih3PDApe3JldHVybiBudWxsfXZhciB1PU1hdGguZmxvb3IoKHcrNykvOCk7dmFyIHY9Yyh1KTtpZih3JTg+MCl7dj1TdHJpbmcuZnJvbUNoYXJDb2RlKChNYXRoLnBvdygyLHclOCktMSkmdi5jaGFyQ29kZUF0KDApKSt2LnN1YnN0cmluZygxKX1yZXR1cm4gbmV3IEJpZ0ludGVnZXIoZih2KSwxNil9ZnVuY3Rpb24gYyh3KXt2YXIgdT0iIjtmb3IodmFyIHY9MDt2PHc7disrKXt1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIoKSl9cmV0dXJuIHV9ZnVuY3Rpb24gYigpe3ZhciB1PW5ldyBVaW50MzJBcnJheSgxKTt3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyh1KTtyZXR1cm4gdVswXSYyNTV9ZnVuY3Rpb24gZih5KXtpZih5PT1udWxsKXtyZXR1cm4iIn12YXIgdj1bXTt2YXIgdz15Lmxlbmd0aDt2YXIgej0wO3ZhciB1O3doaWxlKHo8dyl7dT15W3orK10uY2hhckNvZGVBdCgpLnRvU3RyaW5nKDE2KTt3aGlsZSh1Lmxlbmd0aDwyKXt1PSIwIit1fXYucHVzaCgiIit1KX1yZXR1cm4gdi5qb2luKCIiKX10aGlzLmdldFJhbmRvbUJpZ0ludGVnZXJJblJhbmdlPW47dGhpcy5nZXRSYW5kb21CaWdJbnRlZ2VyPWU7dGhpcy5nZXRSYW5kb21CeXRlcz1jfTsKLyohIHBrY3M1cGtleS0xLjAuNi5qcyAoYykgMjAxMy0yMDE0IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwp2YXIgUEtDUzVQS0VZPWZ1bmN0aW9uKCl7dmFyIGM9ZnVuY3Rpb24obixwLG8pe3JldHVybiBpKENyeXB0b0pTLkFFUyxuLHAsbyl9O3ZhciBkPWZ1bmN0aW9uKG4scCxvKXtyZXR1cm4gaShDcnlwdG9KUy5UcmlwbGVERVMsbixwLG8pfTt2YXIgaT1mdW5jdGlvbihxLHYscyxvKXt2YXIgcD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHYpO3ZhciB1PUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uocyk7dmFyIG49Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShvKTt2YXIgcj17fTtyLmtleT11O3IuaXY9bjtyLmNpcGhlcnRleHQ9cDt2YXIgdD1xLmRlY3J5cHQocix1LHtpdjpufSk7cmV0dXJuIENyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHQpfTt2YXIgaj1mdW5jdGlvbihuLHAsbyl7cmV0dXJuIGUoQ3J5cHRvSlMuQUVTLG4scCxvKX07dmFyIG09ZnVuY3Rpb24obixwLG8pe3JldHVybiBlKENyeXB0b0pTLlRyaXBsZURFUyxuLHAsbyl9O3ZhciBlPWZ1bmN0aW9uKHMseCx2LHApe3ZhciByPUNyeXB0b0pTLmVuYy5IZXgucGFyc2UoeCk7dmFyIHc9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh2KTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHApO3ZhciBuPXt9O3ZhciB1PXMuZW5jcnlwdChyLHcse2l2Om99KTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHUudG9TdHJpbmcoKSk7dmFyIHQ9Q3J5cHRvSlMuZW5jLkJhc2U2NC5zdHJpbmdpZnkocSk7cmV0dXJuIHR9O3ZhciBnPXsiQUVTLTI1Ni1DQkMiOntwcm9jOmMsZXByb2M6aixrZXlsZW46MzIsaXZsZW46MTZ9LCJBRVMtMTkyLUNCQyI6e3Byb2M6YyxlcHJvYzpqLGtleWxlbjoyNCxpdmxlbjoxNn0sIkFFUy0xMjgtQ0JDIjp7cHJvYzpjLGVwcm9jOmosa2V5bGVuOjE2LGl2bGVuOjE2fSwiREVTLUVERTMtQ0JDIjp7cHJvYzpkLGVwcm9jOm0sa2V5bGVuOjI0LGl2bGVuOjh9fTt2YXIgYj1mdW5jdGlvbihuKXtyZXR1cm4gZ1tuXVsicHJvYyJdfTt2YXIgaz1mdW5jdGlvbihuKXt2YXIgcD1DcnlwdG9KUy5saWIuV29yZEFycmF5LnJhbmRvbShuKTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShwKTtyZXR1cm4gb307dmFyIGw9ZnVuY3Rpb24ocSl7dmFyIHI9e307aWYocS5tYXRjaChuZXcgUmVnRXhwKCJERUstSW5mbzogKFteLF0rKSwoWzAtOUEtRmEtZl0rKSIsIm0iKSkpe3IuY2lwaGVyPVJlZ0V4cC4kMTtyLml2c2FsdD1SZWdFeHAuJDJ9aWYocS5tYXRjaChuZXcgUmVnRXhwKCItLS0tLUJFR0lOIChbQS1aXSspIFBSSVZBVEUgS0VZLS0tLS0iKSkpe3IudHlwZT1SZWdFeHAuJDF9dmFyIHA9LTE7dmFyIHQ9MDtpZihxLmluZGV4T2YoIlxyXG5cclxuIikhPS0xKXtwPXEuaW5kZXhPZigiXHJcblxyXG4iKTt0PTJ9aWYocS5pbmRleE9mKCJcblxuIikhPS0xKXtwPXEuaW5kZXhPZigiXG5cbiIpO3Q9MX12YXIgbz1xLmluZGV4T2YoIi0tLS0tRU5EIik7aWYocCE9LTEmJm8hPS0xKXt2YXIgbj1xLnN1YnN0cmluZyhwK3QqMixvLXQpO249bi5yZXBsYWNlKC9ccysvZywiIik7ci5kYXRhPW59cmV0dXJuIHJ9O3ZhciBoPWZ1bmN0aW9uKG8sdyxuKXt2YXIgdD1uLnN1YnN0cmluZygwLDE2KTt2YXIgcj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHQpO3ZhciBwPUNyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHcpO3ZhciBzPWdbb11bImtleWxlbiJdK2dbb11bIml2bGVuIl07dmFyIHY9IiI7dmFyIHU9bnVsbDtmb3IoOzspe3ZhciBxPUNyeXB0b0pTLmFsZ28uTUQ1LmNyZWF0ZSgpO2lmKHUhPW51bGwpe3EudXBkYXRlKHUpfXEudXBkYXRlKHApO3EudXBkYXRlKHIpO3U9cS5maW5hbGl6ZSgpO3Y9ditDcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh1KTtpZih2Lmxlbmd0aD49cyoyKXticmVha319dmFyIHg9e307eC5rZXloZXg9di5zdWJzdHIoMCxnW29dWyJrZXlsZW4iXSoyKTt4Lml2aGV4PXYuc3Vic3RyKGdbb11bImtleWxlbiJdKjIsZ1tvXVsiaXZsZW4iXSoyKTtyZXR1cm4geH07dmFyIGE9ZnVuY3Rpb24obix0LHAsdSl7dmFyIHE9Q3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShuKTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShxKTt2YXIgcz1nW3RdWyJwcm9jIl07dmFyIHI9cyhvLHAsdSk7cmV0dXJuIHJ9O3ZhciBmPWZ1bmN0aW9uKG4scSxvLHMpe3ZhciBwPWdbcV1bImVwcm9jIl07dmFyIHI9cChuLG8scyk7cmV0dXJuIHJ9O3JldHVybnt2ZXJzaW9uOiIxLjAuNSIsZ2V0SGV4RnJvbVBFTTpmdW5jdGlvbihvLHIpe3ZhciBwPW87aWYocC5pbmRleE9mKCJCRUdJTiAiK3IpPT0tMSl7dGhyb3ciY2FuJ3QgZmluZCBQRU0gaGVhZGVyOiAiK3J9cD1wLnJlcGxhY2UoIi0tLS0tQkVHSU4gIityKyItLS0tLSIsIiIpO3A9cC5yZXBsYWNlKCItLS0tLUVORCAiK3IrIi0tLS0tIiwiIik7dmFyIHE9cC5yZXBsYWNlKC9ccysvZywiIik7dmFyIG49YjY0dG9oZXgocSk7cmV0dXJuIG59LGdldERlY3J5cHRlZEtleUhleEJ5S2V5SVY6ZnVuY3Rpb24obyxyLHEscCl7dmFyIG49YihyKTtyZXR1cm4gbihvLHEscCl9LHBhcnNlUEtDUzVQRU06ZnVuY3Rpb24obil7cmV0dXJuIGwobil9LGdldEtleUFuZFVudXNlZEl2QnlQYXNzY29kZUFuZEl2c2FsdDpmdW5jdGlvbihvLG4scCl7cmV0dXJuIGgobyxuLHApfSxkZWNyeXB0S2V5QjY0OmZ1bmN0aW9uKG4scCxvLHEpe3JldHVybiBhKG4scCxvLHEpfSxnZXREZWNyeXB0ZWRLZXlIZXg6ZnVuY3Rpb24odyx2KXt2YXIgbz1sKHcpO3ZhciByPW8udHlwZTt2YXIgcD1vLmNpcGhlcjt2YXIgbj1vLml2c2FsdDt2YXIgcT1vLmRhdGE7dmFyIHU9aChwLHYsbik7dmFyIHQ9dS5rZXloZXg7dmFyIHM9YShxLHAsdCxuKTtyZXR1cm4gc30sZ2V0UlNBS2V5RnJvbUVuY3J5cHRlZFBLQ1M1UEVNOmZ1bmN0aW9uKHAsbyl7dmFyIHE9dGhpcy5nZXREZWNyeXB0ZWRLZXlIZXgocCxvKTt2YXIgbj1uZXcgUlNBS2V5KCk7bi5yZWFkUHJpdmF0ZUtleUZyb21BU04xSGV4U3RyaW5nKHEpO3JldHVybiBufSxnZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4OmZ1bmN0aW9uKHEseCxyLHApe3ZhciBuPSIiO2lmKHR5cGVvZiByPT0idW5kZWZpbmVkInx8cj09bnVsbCl7cj0iQUVTLTI1Ni1DQkMifWlmKHR5cGVvZiBnW3JdPT0idW5kZWZpbmVkIil7dGhyb3ciUEtDUzVQS0VZIHVuc3VwcG9ydGVkIGFsZ29yaXRobTogIityfWlmKHR5cGVvZiBwPT0idW5kZWZpbmVkInx8cD09bnVsbCl7dmFyIHQ9Z1tyXVsiaXZsZW4iXTt2YXIgcz1rKHQpO3A9cy50b1VwcGVyQ2FzZSgpfXZhciB3PWgocix4LHApO3ZhciB2PXcua2V5aGV4O3ZhciB1PWYocSxyLHYscCk7dmFyIG89dS5yZXBsYWNlKC8oLns2NH0pL2csIiQxXHJcbiIpO3ZhciBuPSItLS0tLUJFR0lOIFJTQSBQUklWQVRFIEtFWS0tLS0tXHJcbiI7bis9IlByb2MtVHlwZTogNCxFTkNSWVBURURcclxuIjtuKz0iREVLLUluZm86ICIrcisiLCIrcCsiXHJcbiI7bis9IlxyXG4iO24rPW87bis9IlxyXG4tLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLVxyXG4iO3JldHVybiBufSxnZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5OmZ1bmN0aW9uKEMsRCxvLHMpe3ZhciBBPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6MH0pO3ZhciB2PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkMubn0pO3ZhciB6PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7ImludCI6Qy5lfSk7dmFyIEI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kfSk7dmFyIHQ9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5wfSk7dmFyIHI9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5xfSk7dmFyIHk9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kbXAxfSk7dmFyIHU9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5kbXExfSk7dmFyIHg9bmV3IEtKVVIuYXNuMS5ERVJJbnRlZ2VyKHtiaWdpbnQ6Qy5jb2VmZn0pO3ZhciBFPW5ldyBLSlVSLmFzbjEuREVSU2VxdWVuY2Uoe2FycmF5OltBLHYseixCLHQscix5LHUseF19KTt2YXIgdz1FLmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdGhpcy5nZXRFcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KHcsRCxvLHMpfSxuZXdFbmNyeXB0ZWRQS0NTNVBFTTpmdW5jdGlvbihuLG8scixzKXtpZih0eXBlb2Ygbz09InVuZGVmaW5lZCJ8fG89PW51bGwpe289MTAyNH1pZih0eXBlb2Ygcj09InVuZGVmaW5lZCJ8fHI9PW51bGwpe3I9IjEwMDAxIn12YXIgcD1uZXcgUlNBS2V5KCk7cC5nZW5lcmF0ZShvLHIpO3ZhciBxPW51bGw7aWYodHlwZW9mIHM9PSJ1bmRlZmluZWQifHxzPT1udWxsKXtxPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHBrZXksbil9ZWxzZXtxPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHBrZXksbixzKX1yZXR1cm4gcX0sZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhQRU06ZnVuY3Rpb24ocCl7aWYocC5tYXRjaCgvRU5DUllQVEVELykpe3Rocm93InBlbSBzaGFsbCBiZSBub3QgRU5DUllQVEVEIn12YXIgbz10aGlzLmdldEhleEZyb21QRU0ocCwiUFJJVkFURSBLRVkiKTt2YXIgbj10aGlzLmdldFJTQUtleUZyb21QbGFpblBLQ1M4SGV4KG8pO3JldHVybiBufSxnZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleDpmdW5jdGlvbihxKXt2YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihxLDApO2lmKHAubGVuZ3RoIT0zKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDMgZWxlbWVudHM6ICIrcC5sZW5ndGh9dmFyIG89QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihxLHBbMV0pO2lmKG8hPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZGVudGlmaWVyIGlzIG5vdCByc2FFbmM6ICIrb312YXIgbz1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKHEscFsxXSk7dmFyIHI9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihxLHBbMl0pO3ZhciBzPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHIsMCk7dmFyIG49bmV3IFJTQUtleSgpO24ucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhzKTtyZXR1cm4gbn0scGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4OmZ1bmN0aW9uKHUpe3ZhciBxPXt9O3ZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsMCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDApLml0ZW1zICE9IDI6ICIrcC5sZW5ndGh9cS5jaXBoZXJ0ZXh0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHUscFsxXSk7dmFyIHc9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxwWzBdKTtpZih3Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wKS5pdGVtcyAhPSAyOiAiK3cubGVuZ3RofWlmKEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHUsd1swXSkhPSIyYTg2NDg4NmY3MGQwMTA1MGQiKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQkVTMiJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSx3WzFdKTtpZih3Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEpLml0ZW1zICE9IDI6ICIrbi5sZW5ndGh9dmFyIG89QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxuWzFdKTtpZihvLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMSkuaXRlbXMgIT0gMjogIitvLmxlbmd0aH1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaih1LG9bMF0pIT0iMmE4NjQ4ODZmNzBkMDMwNyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBUcmlwbGVERVMifXEuZW5jcnlwdGlvblNjaGVtZUFsZz0iVHJpcGxlREVTIjtxLmVuY3J5cHRpb25TY2hlbWVJVj1BU04xSEVYLmdldEhleE9mVl9BdE9iaih1LG9bMV0pO3ZhciByPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHUsblswXSk7aWYoci5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjApLml0ZW1zICE9IDI6ICIrci5sZW5ndGh9aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSxyWzBdKSE9IjJhODY0ODg2ZjcwZDAxMDUwYyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBwa2NzNVBCS0RGMiJ9dmFyIHY9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodSxyWzFdKTtpZih2Lmxlbmd0aDwyKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wLjEpLml0ZW1zIDwgMjogIit2Lmxlbmd0aH1xLnBia2RmMlNhbHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodSx2WzBdKTt2YXIgcz1BU04xSEVYLmdldEhleE9mVl9BdE9iaih1LHZbMV0pO3RyeXtxLnBia2RmMkl0ZXI9cGFyc2VJbnQocywxNil9Y2F0Y2godCl7dGhyb3cibWFsZm9ybWVkIGZvcm1hdCBwYmtkZjJJdGVyOiAiK3N9cmV0dXJuIHF9LGdldFBCS0RGMktleUhleEZyb21QYXJhbTpmdW5jdGlvbihzLG4pe3ZhciByPUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uocy5wYmtkZjJTYWx0KTt2YXIgbz1zLnBia2RmMkl0ZXI7dmFyIHE9Q3J5cHRvSlMuUEJLREYyKG4scix7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczpvfSk7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocSk7cmV0dXJuIHB9LGdldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU06ZnVuY3Rpb24odix3KXt2YXIgcD10aGlzLmdldEhleEZyb21QRU0odiwiRU5DUllQVEVEIFBSSVZBVEUgS0VZIik7dmFyIG49dGhpcy5wYXJzZUhleE9mRW5jcnlwdGVkUEtDUzgocCk7dmFyIHM9UEtDUzVQS0VZLmdldFBCS0RGMktleUhleEZyb21QYXJhbShuLHcpO3ZhciB0PXt9O3QuY2lwaGVydGV4dD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKG4uY2lwaGVydGV4dCk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShzKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKG4uZW5jcnlwdGlvblNjaGVtZUlWKTt2YXIgdT1DcnlwdG9KUy5UcmlwbGVERVMuZGVjcnlwdCh0LHIse2l2OnF9KTt2YXIgbz1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh1KTtyZXR1cm4gb30sZ2V0UlNBS2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOmZ1bmN0aW9uKHEscCl7dmFyIG89dGhpcy5nZXRQbGFpblBLQ1M4SGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKHEscCk7dmFyIG49dGhpcy5nZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleChvKTtyZXR1cm4gbn0sZ2V0S2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOmZ1bmN0aW9uKHEsbyl7dmFyIG49dGhpcy5nZXRQbGFpblBLQ1M4SGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKHEsbyk7dmFyIHA9dGhpcy5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXgobik7cmV0dXJuIHB9LHBhcnNlUGxhaW5Qcml2YXRlUEtDUzhIZXg6ZnVuY3Rpb24ocSl7dmFyIG89e307by5hbGdwYXJhbT1udWxsO2lmKHEuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBwbGFpbiBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEsMCk7aWYocC5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBwbGFpbiBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMikifWlmKHEuc3Vic3RyKHBbMV0sMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMykifXZhciBuPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEscFsxXSk7aWYobi5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNCkifWlmKHEuc3Vic3RyKG5bMF0sMikhPSIwNiIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNSkifW8uYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEsblswXSk7aWYocS5zdWJzdHIoblsxXSwyKT09IjA2Iil7by5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLG5bMV0pfWlmKHEuc3Vic3RyKHBbMl0sMikhPSIwNCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwNikifW8ua2V5aWR4PUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmoocSxwWzJdKTtyZXR1cm4gb30sZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4UEVNOmZ1bmN0aW9uKG8pe3ZhciBuPXRoaXMuZ2V0SGV4RnJvbVBFTShvLCJQUklWQVRFIEtFWSIpO3ZhciBwPXRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KG4pO3JldHVybiBwfSxnZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXg6ZnVuY3Rpb24obil7dmFyIHA9dGhpcy5wYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4KG4pO2lmKHAuYWxnb2lkPT0iMmE4NjQ4ODZmNzBkMDEwMTAxIil7dGhpcy5wYXJzZVByaXZhdGVSYXdSU0FLZXlIZXhBdE9iaihuLHApO3ZhciBvPXAua2V5O3ZhciBxPW5ldyBSU0FLZXkoKTtxLnNldFByaXZhdGVFeChvLm4sby5lLG8uZCxvLnAsby5xLG8uZHAsby5kcSxvLmNvKTtyZXR1cm4gcX1lbHNle2lmKHAuYWxnb2lkPT0iMmE4NjQ4Y2UzZDAyMDEiKXt0aGlzLnBhcnNlUHJpdmF0ZVJhd0VDS2V5SGV4QXRPYmoobixwKTtpZihLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbcC5hbGdwYXJhbV09PT11bmRlZmluZWQpe3Rocm93IktKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZSB1bmRlZmluZWQ6ICIrcC5hbGdwYXJhbX12YXIgcj1LSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbcC5hbGdwYXJhbV07dmFyIHE9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpyLHBydjpwLmtleX0pO3JldHVybiBxfWVsc2V7dGhyb3cidW5zdXBwb3J0ZWQgcHJpdmF0ZSBrZXkgYWxnb3JpdGhtIn19fSxnZXRSU0FLZXlGcm9tUHVibGljUEtDUzhQRU06ZnVuY3Rpb24obyl7dmFyIHA9dGhpcy5nZXRIZXhGcm9tUEVNKG8sIlBVQkxJQyBLRVkiKTt2YXIgbj10aGlzLmdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleChwKTtyZXR1cm4gbn0sZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4UEVNOmZ1bmN0aW9uKG8pe3ZhciBwPXRoaXMuZ2V0SGV4RnJvbVBFTShvLCJQVUJMSUMgS0VZIik7dmFyIG49dGhpcy5nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgocCk7cmV0dXJuIG59LGdldEtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihvKXt2YXIgbj10aGlzLnBhcnNlUHVibGljUEtDUzhIZXgobyk7aWYobi5hbGdvaWQ9PSIyYTg2NDg4NmY3MGQwMTAxMDEiKXt2YXIgcj10aGlzLnBhcnNlUHVibGljUmF3UlNBS2V5SGV4KG4ua2V5KTt2YXIgcD1uZXcgUlNBS2V5KCk7cC5zZXRQdWJsaWMoci5uLHIuZSk7cmV0dXJuIHB9ZWxzZXtpZihuLmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW24uYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK24uYWxncGFyYW19dmFyIHE9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW24uYWxncGFyYW1dO3ZhciBwPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6cSxwdWI6bi5rZXl9KTtyZXR1cm4gcH1lbHNle3Rocm93InVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnb3JpdGhtIn19fSxwYXJzZVB1YmxpY1Jhd1JTQUtleUhleDpmdW5jdGlvbihwKXt2YXIgbj17fTtpZihwLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMSkifXZhciBvPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHAsMCk7aWYoby5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAyKSJ9aWYocC5zdWJzdHIob1swXSwyKSE9IjAyIil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDMpIn1uLm49QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocCxvWzBdKTtpZihwLnN1YnN0cihvWzFdLDIpIT0iMDIiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwNCkifW4uZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihwLG9bMV0pO3JldHVybiBufSxwYXJzZVByaXZhdGVSYXdSU0FLZXlIZXhBdE9iajpmdW5jdGlvbihvLHEpe3ZhciBwPXEua2V5aWR4O2lmKG8uc3Vic3RyKHAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBSU0EgcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihvLHApO2lmKG4ubGVuZ3RoIT05KXt0aHJvdyJtYWxmb3JtZWQgUlNBIHByaXZhdGUga2V5KGNvZGU6MDAyKSJ9cS5rZXk9e307cS5rZXkubj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bMV0pO3Eua2V5LmU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzJdKTtxLmtleS5kPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sblszXSk7cS5rZXkucD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bNF0pO3Eua2V5LnE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzVdKTtxLmtleS5kcD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihvLG5bNl0pO3Eua2V5LmRxPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sbls3XSk7cS5rZXkuY289QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoobyxuWzhdKX0scGFyc2VQcml2YXRlUmF3RUNLZXlIZXhBdE9iajpmdW5jdGlvbihvLHEpe3ZhciBwPXEua2V5aWR4O2lmKG8uc3Vic3RyKHAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBFQ0MgcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihvLHApO2lmKG4ubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgRUNDIHByaXZhdGUga2V5KGNvZGU6MDAyKSJ9aWYoby5zdWJzdHIoblsxXSwyKSE9IjA0Iil7dGhyb3cibWFsZm9ybWVkIEVDQyBwcml2YXRlIGtleShjb2RlOjAwMykifXEua2V5PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKG8sblsxXSl9LHBhcnNlUHVibGljUEtDUzhIZXg6ZnVuY3Rpb24ocSl7dmFyIG89e307by5hbGdwYXJhbT1udWxsO3ZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEsMCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im91dGVyIERFUlNlcXVlbmNlIHNoYWxsIGhhdmUgMiBlbGVtZW50czogIitwLmxlbmd0aH12YXIgcj1wWzBdO2lmKHEuc3Vic3RyKHIsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAxKSJ9dmFyIG49QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoocSxyKTtpZihuLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDIpIn1pZihxLnN1YnN0cihuWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMykifW8uYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEsblswXSk7aWYocS5zdWJzdHIoblsxXSwyKT09IjA2Iil7by5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLG5bMV0pfWlmKHEuc3Vic3RyKHBbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDA0KSJ9by5rZXk9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzFdKS5zdWJzdHIoMik7cmV0dXJuIG99LGdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihyKXt2YXIgcT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihyLDApO2lmKHEubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcS5sZW5ndGh9dmFyIHA9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihyLHFbMF0pO2lmKHAhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZCBpcyBub3QgcnNhRW5jcnlwdGlvbiJ9aWYoci5zdWJzdHIocVsxXSwyKSE9IjAzIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgQklUU1RSSU5HIGVuY2Fwc2xhdGVkLiJ9dmFyIHQ9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihyLHFbMV0pKzI7aWYoci5zdWJzdHIodCwyKSE9IjMwIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgU0VRVUVOQ0UuIn12YXIgbj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihyLHQpO2lmKG4ubGVuZ3RoIT0yKXt0aHJvdyJpbm5lciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrbi5sZW5ndGh9aWYoci5zdWJzdHIoblswXSwyKSE9IjAyIil7dGhyb3ciTiBpcyBub3QgQVNOLjEgSU5URUdFUiJ9aWYoci5zdWJzdHIoblsxXSwyKSE9IjAyIil7dGhyb3ciRSBpcyBub3QgQVNOLjEgSU5URUdFUiJ9dmFyIHU9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocixuWzBdKTt2YXIgcz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihyLG5bMV0pO3ZhciBvPW5ldyBSU0FLZXkoKTtvLnNldFB1YmxpYyh1LHMpO3JldHVybiBvfSx9fSgpOwovKiEga2V5dXRpbC0xLjAuMTIuanMgKGMpIDIwMTMtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KdmFyIEtFWVVUSUw9ZnVuY3Rpb24oKXt2YXIgZD1mdW5jdGlvbihwLHIscSl7cmV0dXJuIGsoQ3J5cHRvSlMuQUVTLHAscixxKX07dmFyIGU9ZnVuY3Rpb24ocCxyLHEpe3JldHVybiBrKENyeXB0b0pTLlRyaXBsZURFUyxwLHIscSl9O3ZhciBhPWZ1bmN0aW9uKHAscixxKXtyZXR1cm4gayhDcnlwdG9KUy5ERVMscCxyLHEpfTt2YXIgaz1mdW5jdGlvbihzLHgsdSxxKXt2YXIgcj1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHgpO3ZhciB3PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodSk7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShxKTt2YXIgdD17fTt0LmtleT13O3QuaXY9cDt0LmNpcGhlcnRleHQ9cjt2YXIgdj1zLmRlY3J5cHQodCx3LHtpdjpwfSk7cmV0dXJuIENyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHYpfTt2YXIgbD1mdW5jdGlvbihwLHIscSl7cmV0dXJuIGcoQ3J5cHRvSlMuQUVTLHAscixxKX07dmFyIG89ZnVuY3Rpb24ocCxyLHEpe3JldHVybiBnKENyeXB0b0pTLlRyaXBsZURFUyxwLHIscSl9O3ZhciBmPWZ1bmN0aW9uKHAscixxKXtyZXR1cm4gZyhDcnlwdG9KUy5ERVMscCxyLHEpfTt2YXIgZz1mdW5jdGlvbih0LHksdixxKXt2YXIgcz1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHkpO3ZhciB4PUNyeXB0b0pTLmVuYy5IZXgucGFyc2Uodik7dmFyIHA9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShxKTt2YXIgdz10LmVuY3J5cHQocyx4LHtpdjpwfSk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZSh3LnRvU3RyaW5nKCkpO3ZhciB1PUNyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KHIpO3JldHVybiB1fTt2YXIgaT17IkFFUy0yNTYtQ0JDIjp7cHJvYzpkLGVwcm9jOmwsa2V5bGVuOjMyLGl2bGVuOjE2fSwiQUVTLTE5Mi1DQkMiOntwcm9jOmQsZXByb2M6bCxrZXlsZW46MjQsaXZsZW46MTZ9LCJBRVMtMTI4LUNCQyI6e3Byb2M6ZCxlcHJvYzpsLGtleWxlbjoxNixpdmxlbjoxNn0sIkRFUy1FREUzLUNCQyI6e3Byb2M6ZSxlcHJvYzpvLGtleWxlbjoyNCxpdmxlbjo4fSwiREVTLUNCQyI6e3Byb2M6YSxlcHJvYzpmLGtleWxlbjo4LGl2bGVuOjh9fTt2YXIgYz1mdW5jdGlvbihwKXtyZXR1cm4gaVtwXVsicHJvYyJdfTt2YXIgbT1mdW5jdGlvbihwKXt2YXIgcj1DcnlwdG9KUy5saWIuV29yZEFycmF5LnJhbmRvbShwKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShyKTtyZXR1cm4gcX07dmFyIG49ZnVuY3Rpb24odCl7dmFyIHU9e307aWYodC5tYXRjaChuZXcgUmVnRXhwKCJERUstSW5mbzogKFteLF0rKSwoWzAtOUEtRmEtZl0rKSIsIm0iKSkpe3UuY2lwaGVyPVJlZ0V4cC4kMTt1Lml2c2FsdD1SZWdFeHAuJDJ9aWYodC5tYXRjaChuZXcgUmVnRXhwKCItLS0tLUJFR0lOIChbQS1aXSspIFBSSVZBVEUgS0VZLS0tLS0iKSkpe3UudHlwZT1SZWdFeHAuJDF9dmFyIHI9LTE7dmFyIHY9MDtpZih0LmluZGV4T2YoIlxyXG5cclxuIikhPS0xKXtyPXQuaW5kZXhPZigiXHJcblxyXG4iKTt2PTJ9aWYodC5pbmRleE9mKCJcblxuIikhPS0xKXtyPXQuaW5kZXhPZigiXG5cbiIpO3Y9MX12YXIgcT10LmluZGV4T2YoIi0tLS0tRU5EIik7aWYociE9LTEmJnEhPS0xKXt2YXIgcD10LnN1YnN0cmluZyhyK3YqMixxLXYpO3A9cC5yZXBsYWNlKC9ccysvZywiIik7dS5kYXRhPXB9cmV0dXJuIHV9O3ZhciBqPWZ1bmN0aW9uKHEseSxwKXt2YXIgdj1wLnN1YnN0cmluZygwLDE2KTt2YXIgdD1DcnlwdG9KUy5lbmMuSGV4LnBhcnNlKHYpO3ZhciByPUNyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHkpO3ZhciB1PWlbcV1bImtleWxlbiJdK2lbcV1bIml2bGVuIl07dmFyIHg9IiI7dmFyIHc9bnVsbDtmb3IoOzspe3ZhciBzPUNyeXB0b0pTLmFsZ28uTUQ1LmNyZWF0ZSgpO2lmKHchPW51bGwpe3MudXBkYXRlKHcpfXMudXBkYXRlKHIpO3MudXBkYXRlKHQpO3c9cy5maW5hbGl6ZSgpO3g9eCtDcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeSh3KTtpZih4Lmxlbmd0aD49dSoyKXticmVha319dmFyIHo9e307ei5rZXloZXg9eC5zdWJzdHIoMCxpW3FdWyJrZXlsZW4iXSoyKTt6Lml2aGV4PXguc3Vic3RyKGlbcV1bImtleWxlbiJdKjIsaVtxXVsiaXZsZW4iXSoyKTtyZXR1cm4gen07dmFyIGI9ZnVuY3Rpb24ocCx2LHIsdyl7dmFyIHM9Q3J5cHRvSlMuZW5jLkJhc2U2NC5wYXJzZShwKTt2YXIgcT1DcnlwdG9KUy5lbmMuSGV4LnN0cmluZ2lmeShzKTt2YXIgdT1pW3ZdWyJwcm9jIl07dmFyIHQ9dShxLHIsdyk7cmV0dXJuIHR9O3ZhciBoPWZ1bmN0aW9uKHAscyxxLHUpe3ZhciByPWlbc11bImVwcm9jIl07dmFyIHQ9cihwLHEsdSk7cmV0dXJuIHR9O3JldHVybnt2ZXJzaW9uOiIxLjAuMCIsZ2V0SGV4RnJvbVBFTTpmdW5jdGlvbihxLHUpe3ZhciByPXE7aWYoci5pbmRleE9mKCItLS0tLUJFR0lOICIpPT0tMSl7dGhyb3ciY2FuJ3QgZmluZCBQRU0gaGVhZGVyOiAiK3V9aWYodHlwZW9mIHU9PSJzdHJpbmciJiZ1IT0iIil7cj1yLnJlcGxhY2UoIi0tLS0tQkVHSU4gIit1KyItLS0tLSIsIiIpO3I9ci5yZXBsYWNlKCItLS0tLUVORCAiK3UrIi0tLS0tIiwiIil9ZWxzZXtyPXIucmVwbGFjZSgvLS0tLS1CRUdJTiBbXi1dKy0tLS0tLywiIik7cj1yLnJlcGxhY2UoLy0tLS0tRU5EIFteLV0rLS0tLS0vLCIiKX12YXIgdD1yLnJlcGxhY2UoL1xzKy9nLCIiKTt2YXIgcD1iNjR0b2hleCh0KTtyZXR1cm4gcH0sZ2V0RGVjcnlwdGVkS2V5SGV4QnlLZXlJVjpmdW5jdGlvbihxLHQscyxyKXt2YXIgcD1jKHQpO3JldHVybiBwKHEscyxyKX0scGFyc2VQS0NTNVBFTTpmdW5jdGlvbihwKXtyZXR1cm4gbihwKX0sZ2V0S2V5QW5kVW51c2VkSXZCeVBhc3Njb2RlQW5kSXZzYWx0OmZ1bmN0aW9uKHEscCxyKXtyZXR1cm4gaihxLHAscil9LGRlY3J5cHRLZXlCNjQ6ZnVuY3Rpb24ocCxyLHEscyl7cmV0dXJuIGIocCxyLHEscyl9LGdldERlY3J5cHRlZEtleUhleDpmdW5jdGlvbih5LHgpe3ZhciBxPW4oeSk7dmFyIHQ9cS50eXBlO3ZhciByPXEuY2lwaGVyO3ZhciBwPXEuaXZzYWx0O3ZhciBzPXEuZGF0YTt2YXIgdz1qKHIseCxwKTt2YXIgdj13LmtleWhleDt2YXIgdT1iKHMscix2LHApO3JldHVybiB1fSxnZXRSU0FLZXlGcm9tRW5jcnlwdGVkUEtDUzVQRU06ZnVuY3Rpb24ocixxKXt2YXIgcz10aGlzLmdldERlY3J5cHRlZEtleUhleChyLHEpO3ZhciBwPW5ldyBSU0FLZXkoKTtwLnJlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmcocyk7cmV0dXJuIHB9LGdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleDpmdW5jdGlvbih4LHMsQSx0LHIpe3ZhciBwPSIiO2lmKHR5cGVvZiB0PT0idW5kZWZpbmVkInx8dD09bnVsbCl7dD0iQUVTLTI1Ni1DQkMifWlmKHR5cGVvZiBpW3RdPT0idW5kZWZpbmVkIil7dGhyb3ciS0VZVVRJTCB1bnN1cHBvcnRlZCBhbGdvcml0aG06ICIrdH1pZih0eXBlb2Ygcj09InVuZGVmaW5lZCJ8fHI9PW51bGwpe3ZhciB2PWlbdF1bIml2bGVuIl07dmFyIHU9bSh2KTtyPXUudG9VcHBlckNhc2UoKX12YXIgej1qKHQsQSxyKTt2YXIgeT16LmtleWhleDt2YXIgdz1oKHMsdCx5LHIpO3ZhciBxPXcucmVwbGFjZSgvKC57NjR9KS9nLCIkMVxyXG4iKTt2YXIgcD0iLS0tLS1CRUdJTiAiK3grIiBQUklWQVRFIEtFWS0tLS0tXHJcbiI7cCs9IlByb2MtVHlwZTogNCxFTkNSWVBURURcclxuIjtwKz0iREVLLUluZm86ICIrdCsiLCIrcisiXHJcbiI7cCs9IlxyXG4iO3ArPXE7cCs9IlxyXG4tLS0tLUVORCAiK3grIiBQUklWQVRFIEtFWS0tLS0tXHJcbiI7cmV0dXJuIHB9LGdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVJTQUtleTpmdW5jdGlvbihELEUscix0KXt2YXIgQj1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOjB9KTt2YXIgdz1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoe2JpZ2ludDpELm59KTt2YXIgQT1uZXcgS0pVUi5hc24xLkRFUkludGVnZXIoeyJpbnQiOkQuZX0pO3ZhciBDPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZH0pO3ZhciB1PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQucH0pO3ZhciBzPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQucX0pO3ZhciB6PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZG1wMX0pO3ZhciB2PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuZG1xMX0pO3ZhciB5PW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OkQuY29lZmZ9KTt2YXIgRj1uZXcgS0pVUi5hc24xLkRFUlNlcXVlbmNlKHthcnJheTpbQix3LEEsQyx1LHMseix2LHldfSk7dmFyIHg9Ri5nZXRFbmNvZGVkSGV4KCk7cmV0dXJuIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KCJSU0EiLHgsRSxyLHQpfSxuZXdFbmNyeXB0ZWRQS0NTNVBFTTpmdW5jdGlvbihwLHEsdCx1KXtpZih0eXBlb2YgcT09InVuZGVmaW5lZCJ8fHE9PW51bGwpe3E9MTAyNH1pZih0eXBlb2YgdD09InVuZGVmaW5lZCJ8fHQ9PW51bGwpe3Q9IjEwMDAxIn12YXIgcj1uZXcgUlNBS2V5KCk7ci5nZW5lcmF0ZShxLHQpO3ZhciBzPW51bGw7aWYodHlwZW9mIHU9PSJ1bmRlZmluZWQifHx1PT1udWxsKXtzPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHIscCl9ZWxzZXtzPXRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUlNBS2V5KHIscCx1KX1yZXR1cm4gc30sZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhQRU06ZnVuY3Rpb24ocil7aWYoci5tYXRjaCgvRU5DUllQVEVELykpe3Rocm93InBlbSBzaGFsbCBiZSBub3QgRU5DUllQVEVEIn12YXIgcT10aGlzLmdldEhleEZyb21QRU0ociwiUFJJVkFURSBLRVkiKTt2YXIgcD10aGlzLmdldFJTQUtleUZyb21QbGFpblBLQ1M4SGV4KHEpO3JldHVybiBwfSxnZXRSU0FLZXlGcm9tUGxhaW5QS0NTOEhleDpmdW5jdGlvbihzKXt2YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0zKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDMgZWxlbWVudHM6ICIrci5sZW5ndGh9dmFyIHE9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihzLHJbMV0pO2lmKHEhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZGVudGlmaWVyIGlzIG5vdCByc2FFbmM6ICIrcX12YXIgcT1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKHMsclsxXSk7dmFyIHQ9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaihzLHJbMl0pO3ZhciB1PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHQsMCk7dmFyIHA9bmV3IFJTQUtleSgpO3AucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyh1KTtyZXR1cm4gcH0scGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4OmZ1bmN0aW9uKHcpe3ZhciBzPXt9O3ZhciByPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcsMCk7aWYoci5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDApLml0ZW1zICE9IDI6ICIrci5sZW5ndGh9cy5jaXBoZXJ0ZXh0PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHcsclsxXSk7dmFyIHk9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyxyWzBdKTtpZih5Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wKS5pdGVtcyAhPSAyOiAiK3kubGVuZ3RofWlmKEFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHcseVswXSkhPSIyYTg2NDg4NmY3MGQwMTA1MGQiKXt0aHJvdyJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQkVTMiJ9dmFyIHA9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyx5WzFdKTtpZih5Lmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEpLml0ZW1zICE9IDI6ICIrcC5sZW5ndGh9dmFyIHE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyxwWzFdKTtpZihxLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMSkuaXRlbXMgIT0gMjogIitxLmxlbmd0aH1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHFbMF0pIT0iMmE4NjQ4ODZmNzBkMDMwNyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBUcmlwbGVERVMifXMuZW5jcnlwdGlvblNjaGVtZUFsZz0iVHJpcGxlREVTIjtzLmVuY3J5cHRpb25TY2hlbWVJVj1BU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHFbMV0pO3ZhciB0PUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHcscFswXSk7aWYodC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjApLml0ZW1zICE9IDI6ICIrdC5sZW5ndGh9aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyx0WzBdKSE9IjJhODY0ODg2ZjcwZDAxMDUwYyIpe3Rocm93InRoaXMgb25seSBzdXBwb3J0cyBwa2NzNVBCS0RGMiJ9dmFyIHg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoodyx0WzFdKTtpZih4Lmxlbmd0aDwyKXt0aHJvdyJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wLjEpLml0ZW1zIDwgMjogIit4Lmxlbmd0aH1zLnBia2RmMlNhbHQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodyx4WzBdKTt2YXIgdT1BU04xSEVYLmdldEhleE9mVl9BdE9iaih3LHhbMV0pO3RyeXtzLnBia2RmMkl0ZXI9cGFyc2VJbnQodSwxNil9Y2F0Y2godil7dGhyb3cibWFsZm9ybWVkIGZvcm1hdCBwYmtkZjJJdGVyOiAiK3V9cmV0dXJuIHN9LGdldFBCS0RGMktleUhleEZyb21QYXJhbTpmdW5jdGlvbih1LHApe3ZhciB0PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodS5wYmtkZjJTYWx0KTt2YXIgcT11LnBia2RmMkl0ZXI7dmFyIHM9Q3J5cHRvSlMuUEJLREYyKHAsdCx7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczpxfSk7dmFyIHI9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocyk7cmV0dXJuIHJ9LGdldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU06ZnVuY3Rpb24oeCx5KXt2YXIgcj10aGlzLmdldEhleEZyb21QRU0oeCwiRU5DUllQVEVEIFBSSVZBVEUgS0VZIik7dmFyIHA9dGhpcy5wYXJzZUhleE9mRW5jcnlwdGVkUEtDUzgocik7dmFyIHU9S0VZVVRJTC5nZXRQQktERjJLZXlIZXhGcm9tUGFyYW0ocCx5KTt2YXIgdj17fTt2LmNpcGhlcnRleHQ9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShwLmNpcGhlcnRleHQpO3ZhciB0PUNyeXB0b0pTLmVuYy5IZXgucGFyc2UodSk7dmFyIHM9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShwLmVuY3J5cHRpb25TY2hlbWVJVik7dmFyIHc9Q3J5cHRvSlMuVHJpcGxlREVTLmRlY3J5cHQodix0LHtpdjpzfSk7dmFyIHE9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkodyk7cmV0dXJuIHF9LGdldFJTQUtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbihzLHIpe3ZhciBxPXRoaXMuZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShzLHIpO3ZhciBwPXRoaXMuZ2V0UlNBS2V5RnJvbVBsYWluUEtDUzhIZXgocSk7cmV0dXJuIHB9LGdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTpmdW5jdGlvbihzLHEpe3ZhciBwPXRoaXMuZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShzLHEpO3ZhciByPXRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KHApO3JldHVybiByfSxwYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4OmZ1bmN0aW9uKHMpe3ZhciBxPXt9O3EuYWxncGFyYW09bnVsbDtpZihzLnN1YnN0cigwLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDEpIn12YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDIpIn1pZihzLnN1YnN0cihyWzFdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDMpIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLHJbMV0pO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDQpIn1pZihzLnN1YnN0cihwWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDUpIn1xLmFsZ29pZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihzLHBbMF0pO2lmKHMuc3Vic3RyKHBbMV0sMik9PSIwNiIpe3EuYWxncGFyYW09QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxwWzFdKX1pZihzLnN1YnN0cihyWzJdLDIpIT0iMDQiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDYpIn1xLmtleWlkeD1BU04xSEVYLmdldFN0YXJ0UG9zT2ZWX0F0T2JqKHMsclsyXSk7cmV0dXJuIHF9LGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOFBFTTpmdW5jdGlvbihxKXt2YXIgcD10aGlzLmdldEhleEZyb21QRU0ocSwiUFJJVkFURSBLRVkiKTt2YXIgcj10aGlzLmdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleChwKTtyZXR1cm4gcn0sZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4OmZ1bmN0aW9uKHApe3ZhciB3PXRoaXMucGFyc2VQbGFpblByaXZhdGVQS0NTOEhleChwKTtpZih3LmFsZ29pZD09IjJhODY0ODg2ZjcwZDAxMDEwMSIpe3RoaXMucGFyc2VQcml2YXRlUmF3UlNBS2V5SGV4QXRPYmoocCx3KTt2YXIgdT13LmtleTt2YXIgej1uZXcgUlNBS2V5KCk7ei5zZXRQcml2YXRlRXgodS5uLHUuZSx1LmQsdS5wLHUucSx1LmRwLHUuZHEsdS5jbyk7cmV0dXJuIHp9ZWxzZXtpZih3LmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7dGhpcy5wYXJzZVByaXZhdGVSYXdFQ0tleUhleEF0T2JqKHAsdyk7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3cuYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK3cuYWxncGFyYW19dmFyIHY9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3cuYWxncGFyYW1dO3ZhciB6PW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6dn0pO3ouc2V0UHVibGljS2V5SGV4KHcucHVia2V5KTt6LnNldFByaXZhdGVLZXlIZXgody5rZXkpO3ouaXNQdWJsaWM9ZmFsc2U7cmV0dXJuIHp9ZWxzZXtpZih3LmFsZ29pZD09IjJhODY0OGNlMzgwNDAxIil7dmFyIHQ9QVNOMUhFWC5nZXRWYnlMaXN0KHAsMCxbMSwxLDBdLCIwMiIpO3ZhciBzPUFTTjFIRVguZ2V0VmJ5TGlzdChwLDAsWzEsMSwxXSwiMDIiKTt2YXIgeT1BU04xSEVYLmdldFZieUxpc3QocCwwLFsxLDEsMl0sIjAyIik7dmFyIEI9QVNOMUhFWC5nZXRWYnlMaXN0KHAsMCxbMiwwXSwiMDIiKTt2YXIgcj1uZXcgQmlnSW50ZWdlcih0LDE2KTt2YXIgcT1uZXcgQmlnSW50ZWdlcihzLDE2KTt2YXIgeD1uZXcgQmlnSW50ZWdlcih5LDE2KTt2YXIgQT1uZXcgQmlnSW50ZWdlcihCLDE2KTt2YXIgej1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7ei5zZXRQcml2YXRlKHIscSx4LG51bGwsQSk7cmV0dXJuIHp9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBwcml2YXRlIGtleSBhbGdvcml0aG0ifX19fSxnZXRSU0FLZXlGcm9tUHVibGljUEtDUzhQRU06ZnVuY3Rpb24ocSl7dmFyIHI9dGhpcy5nZXRIZXhGcm9tUEVNKHEsIlBVQkxJQyBLRVkiKTt2YXIgcD10aGlzLmdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleChyKTtyZXR1cm4gcH0sZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4UEVNOmZ1bmN0aW9uKHEpe3ZhciByPXRoaXMuZ2V0SGV4RnJvbVBFTShxLCJQVUJMSUMgS0VZIik7dmFyIHA9dGhpcy5nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgocik7cmV0dXJuIHB9LGdldEtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbihxKXt2YXIgcD10aGlzLnBhcnNlUHVibGljUEtDUzhIZXgocSk7aWYocC5hbGdvaWQ9PSIyYTg2NDg4NmY3MGQwMTAxMDEiKXt2YXIgdT10aGlzLnBhcnNlUHVibGljUmF3UlNBS2V5SGV4KHAua2V5KTt2YXIgcj1uZXcgUlNBS2V5KCk7ci5zZXRQdWJsaWModS5uLHUuZSk7cmV0dXJuIHJ9ZWxzZXtpZihwLmFsZ29pZD09IjJhODY0OGNlM2QwMjAxIil7aWYoS0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3AuYWxncGFyYW1dPT09dW5kZWZpbmVkKXt0aHJvdyJLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWUgdW5kZWZpbmVkOiAiK3AuYWxncGFyYW19dmFyIHM9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW3AuYWxncGFyYW1dO3ZhciByPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6cyxwdWI6cC5rZXl9KTtyZXR1cm4gcn1lbHNle2lmKHAuYWxnb2lkPT0iMmE4NjQ4Y2UzODA0MDEiKXt2YXIgdD1wLmFsZ3BhcmFtO3ZhciB2PUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHAua2V5LDApO3ZhciByPW5ldyBLSlVSLmNyeXB0by5EU0EoKTtyLnNldFB1YmxpYyhuZXcgQmlnSW50ZWdlcih0LnAsMTYpLG5ldyBCaWdJbnRlZ2VyKHQucSwxNiksbmV3IEJpZ0ludGVnZXIodC5nLDE2KSxuZXcgQmlnSW50ZWdlcih2LDE2KSk7cmV0dXJuIHJ9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZ29yaXRobSJ9fX19LHBhcnNlUHVibGljUmF3UlNBS2V5SGV4OmZ1bmN0aW9uKHIpe3ZhciBwPXt9O2lmKHIuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAxKSJ9dmFyIHE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmoociwwKTtpZihxLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDIpIn1pZihyLnN1YnN0cihxWzBdLDIpIT0iMDIiKXt0aHJvdyJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMykifXAubj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihyLHFbMF0pO2lmKHIuc3Vic3RyKHFbMV0sMikhPSIwMiIpe3Rocm93Im1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDA0KSJ9cC5lPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHIscVsxXSk7cmV0dXJuIHB9LHBhcnNlUHJpdmF0ZVJhd1JTQUtleUhleEF0T2JqOmZ1bmN0aW9uKHEscyl7dmFyIHI9cy5rZXlpZHg7aWYocS5zdWJzdHIociwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFJTQSBwcml2YXRlIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHEscik7aWYocC5sZW5ndGghPTkpe3Rocm93Im1hbGZvcm1lZCBSU0EgcHJpdmF0ZSBrZXkoY29kZTowMDIpIn1zLmtleT17fTtzLmtleS5uPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFsxXSk7cy5rZXkuZT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbMl0pO3Mua2V5LmQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzNdKTtzLmtleS5wPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFs0XSk7cy5rZXkucT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbNV0pO3Mua2V5LmRwPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKHEscFs2XSk7cy5rZXkuZHE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocSxwWzddKTtzLmtleS5jbz1BU04xSEVYLmdldEhleE9mVl9BdE9iaihxLHBbOF0pfSxwYXJzZVByaXZhdGVSYXdFQ0tleUhleEF0T2JqOmZ1bmN0aW9uKHAsdCl7dmFyIHE9dC5rZXlpZHg7dmFyIHI9QVNOMUhFWC5nZXRWYnlMaXN0KHAscSxbMV0sIjA0Iik7dmFyIHM9QVNOMUhFWC5nZXRWYnlMaXN0KHAscSxbMiwwXSwiMDMiKS5zdWJzdHIoMik7dC5rZXk9cjt0LnB1YmtleT1zfSxwYXJzZVB1YmxpY1BLQ1M4SGV4OmZ1bmN0aW9uKHMpe3ZhciBxPXt9O3EuYWxncGFyYW09bnVsbDt2YXIgcj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihzLDApO2lmKHIubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrci5sZW5ndGh9dmFyIHQ9clswXTtpZihzLnN1YnN0cih0LDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMSkifXZhciBwPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKHMsdCk7aWYocC5sZW5ndGghPTIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAyKSJ9aWYocy5zdWJzdHIocFswXSwyKSE9IjA2Iil7dGhyb3cibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDMpIn1xLmFsZ29pZD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihzLHBbMF0pO2lmKHMuc3Vic3RyKHBbMV0sMik9PSIwNiIpe3EuYWxncGFyYW09QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxwWzFdKX1lbHNle2lmKHMuc3Vic3RyKHBbMV0sMik9PSIzMCIpe3EuYWxncGFyYW09e307cS5hbGdwYXJhbS5wPUFTTjFIRVguZ2V0VmJ5TGlzdChzLHBbMV0sWzBdLCIwMiIpO3EuYWxncGFyYW0ucT1BU04xSEVYLmdldFZieUxpc3QocyxwWzFdLFsxXSwiMDIiKTtxLmFsZ3BhcmFtLmc9QVNOMUhFWC5nZXRWYnlMaXN0KHMscFsxXSxbMl0sIjAyIil9fWlmKHMuc3Vic3RyKHJbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDA0KSJ9cS5rZXk9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoocyxyWzFdKS5zdWJzdHIoMik7cmV0dXJuIHF9LGdldFJTQUtleUZyb21QdWJsaWNQS0NTOEhleDpmdW5jdGlvbih0KXt2YXIgcz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih0LDApO2lmKHMubGVuZ3RoIT0yKXt0aHJvdyJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcy5sZW5ndGh9dmFyIHI9QVNOMUhFWC5nZXRIZXhPZlRMVl9BdE9iaih0LHNbMF0pO2lmKHIhPSIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwMTA1MDAiKXt0aHJvdyJQS0NTOCBBbGdvcml0aG1JZCBpcyBub3QgcnNhRW5jcnlwdGlvbiJ9aWYodC5zdWJzdHIoc1sxXSwyKSE9IjAzIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgQklUU1RSSU5HIGVuY2Fwc2xhdGVkLiJ9dmFyIHY9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaih0LHNbMV0pKzI7aWYodC5zdWJzdHIodiwyKSE9IjMwIil7dGhyb3ciUEtDUzggUHVibGljIEtleSBpcyBub3QgU0VRVUVOQ0UuIn12YXIgcD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaih0LHYpO2lmKHAubGVuZ3RoIT0yKXt0aHJvdyJpbm5lciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6ICIrcC5sZW5ndGh9aWYodC5zdWJzdHIocFswXSwyKSE9IjAyIil7dGhyb3ciTiBpcyBub3QgQVNOLjEgSU5URUdFUiJ9aWYodC5zdWJzdHIocFsxXSwyKSE9IjAyIil7dGhyb3ciRSBpcyBub3QgQVNOLjEgSU5URUdFUiJ9dmFyIHc9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmoodCxwWzBdKTt2YXIgdT1BU04xSEVYLmdldEhleE9mVl9BdE9iaih0LHBbMV0pO3ZhciBxPW5ldyBSU0FLZXkoKTtxLnNldFB1YmxpYyh3LHUpO3JldHVybiBxfSx9fSgpO0tFWVVUSUwuZ2V0S2V5PWZ1bmN0aW9uKGYsZSxoKXtpZih0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIFJTQUtleSl7cmV0dXJuIGZ9aWYodHlwZW9mIEtKVVIuY3J5cHRvLkVDRFNBIT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKXtyZXR1cm4gZn1pZih0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmZiBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSl7cmV0dXJuIGZ9aWYoZi5jdXJ2ZSE9PXVuZGVmaW5lZCYmZi54eSE9PXVuZGVmaW5lZCYmZi5kPT09dW5kZWZpbmVkKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtwdWI6Zi54eSxjdXJ2ZTpmLmN1cnZlfSl9aWYoZi5jdXJ2ZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkKXtyZXR1cm4gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtwcnY6Zi5kLGN1cnZlOmYuY3VydmV9KX1pZihmLmt0eT09PXVuZGVmaW5lZCYmZi5uIT09dW5kZWZpbmVkJiZmLmUhPT11bmRlZmluZWQmJmYuZD09PXVuZGVmaW5lZCl7dmFyIHc9bmV3IFJTQUtleSgpO3cuc2V0UHVibGljKGYubixmLmUpO3JldHVybiB3fWlmKGYua3R5PT09dW5kZWZpbmVkJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkJiZmLnAhPT11bmRlZmluZWQmJmYucSE9PXVuZGVmaW5lZCYmZi5kcCE9PXVuZGVmaW5lZCYmZi5kcSE9PXVuZGVmaW5lZCYmZi5jbyE9PXVuZGVmaW5lZCYmZi5xaT09PXVuZGVmaW5lZCl7dmFyIHc9bmV3IFJTQUtleSgpO3cuc2V0UHJpdmF0ZUV4KGYubixmLmUsZi5kLGYucCxmLnEsZi5kcCxmLmRxLGYuY28pO3JldHVybiB3fWlmKGYua3R5PT09dW5kZWZpbmVkJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kIT09dW5kZWZpbmVkJiZmLnA9PT11bmRlZmluZWQpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnNldFByaXZhdGUoZi5uLGYuZSxmLmQpO3JldHVybiB3fWlmKGYucCE9PXVuZGVmaW5lZCYmZi5xIT09dW5kZWZpbmVkJiZmLmchPT11bmRlZmluZWQmJmYueSE9PXVuZGVmaW5lZCYmZi54PT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7dy5zZXRQdWJsaWMoZi5wLGYucSxmLmcsZi55KTtyZXR1cm4gd31pZihmLnAhPT11bmRlZmluZWQmJmYucSE9PXVuZGVmaW5lZCYmZi5nIT09dW5kZWZpbmVkJiZmLnkhPT11bmRlZmluZWQmJmYueCE9PXVuZGVmaW5lZCl7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3cuc2V0UHJpdmF0ZShmLnAsZi5xLGYuZyxmLnksZi54KTtyZXR1cm4gd31pZihmLmt0eT09PSJSU0EiJiZmLm4hPT11bmRlZmluZWQmJmYuZSE9PXVuZGVmaW5lZCYmZi5kPT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgUlNBS2V5KCk7dy5zZXRQdWJsaWMoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSkpO3JldHVybiB3fWlmKGYua3R5PT09IlJTQSImJmYubiE9PXVuZGVmaW5lZCYmZi5lIT09dW5kZWZpbmVkJiZmLmQhPT11bmRlZmluZWQmJmYucCE9PXVuZGVmaW5lZCYmZi5xIT09dW5kZWZpbmVkJiZmLmRwIT09dW5kZWZpbmVkJiZmLmRxIT09dW5kZWZpbmVkJiZmLnFpIT09dW5kZWZpbmVkKXt2YXIgdz1uZXcgUlNBS2V5KCk7dy5zZXRQcml2YXRlRXgoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSksYjY0dXRvaGV4KGYuZCksYjY0dXRvaGV4KGYucCksYjY0dXRvaGV4KGYucSksYjY0dXRvaGV4KGYuZHApLGI2NHV0b2hleChmLmRxKSxiNjR1dG9oZXgoZi5xaSkpO3JldHVybiB3fWlmKGYua3R5PT09IlJTQSImJmYubiE9PXVuZGVmaW5lZCYmZi5lIT09dW5kZWZpbmVkJiZmLmQhPT11bmRlZmluZWQpe3ZhciB3PW5ldyBSU0FLZXkoKTt3LnNldFByaXZhdGUoYjY0dXRvaGV4KGYubiksYjY0dXRvaGV4KGYuZSksYjY0dXRvaGV4KGYuZCkpO3JldHVybiB3fWlmKGYua3R5PT09IkVDIiYmZi5jcnYhPT11bmRlZmluZWQmJmYueCE9PXVuZGVmaW5lZCYmZi55IT09dW5kZWZpbmVkJiZmLmQ9PT11bmRlZmluZWQpe3ZhciBkPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6Zi5jcnZ9KTt2YXIgbD1kLmVjcGFyYW1zLmtleWxlbi80O3ZhciByPSgiMDAwMDAwMDAwMCIrYjY0dXRvaGV4KGYueCkpLnNsaWNlKC1sKTt2YXIgbj0oIjAwMDAwMDAwMDAiK2I2NHV0b2hleChmLnkpKS5zbGljZSgtbCk7dmFyIG09IjA0IityK247ZC5zZXRQdWJsaWNLZXlIZXgobSk7cmV0dXJuIGR9aWYoZi5rdHk9PT0iRUMiJiZmLmNydiE9PXVuZGVmaW5lZCYmZi54IT09dW5kZWZpbmVkJiZmLnkhPT11bmRlZmluZWQmJmYuZCE9PXVuZGVmaW5lZCl7dmFyIGQ9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpmLmNydn0pO3ZhciBsPWQuZWNwYXJhbXMua2V5bGVuLzQ7dmFyIGE9KCIwMDAwMDAwMDAwIitiNjR1dG9oZXgoZi5kKSkuc2xpY2UoLWwpO2Quc2V0UHJpdmF0ZUtleUhleChhKTtyZXR1cm4gZH1pZihmLmluZGV4T2YoIi1FTkQgQ0VSVElGSUNBVEUtIiwwKSE9LTF8fGYuaW5kZXhPZigiLUVORCBYNTA5IENFUlRJRklDQVRFLSIsMCkhPS0xfHxmLmluZGV4T2YoIi1FTkQgVFJVU1RFRCBDRVJUSUZJQ0FURS0iLDApIT0tMSl7cmV0dXJuIFg1MDkuZ2V0UHVibGljS2V5RnJvbUNlcnRQRU0oZil9aWYoaD09PSJwa2NzOHB1YiIpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21QdWJsaWNQS0NTOEhleChmKX1pZihmLmluZGV4T2YoIi1FTkQgUFVCTElDIEtFWS0iKSE9LTEpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21QdWJsaWNQS0NTOFBFTShmKX1pZihoPT09InBrY3M1cHJ2Iil7dmFyIHc9bmV3IFJTQUtleSgpO3cucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhmKTtyZXR1cm4gd31pZihoPT09InBrY3M1cHJ2Iil7dmFyIHc9bmV3IFJTQUtleSgpO3cucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZyhmKTtyZXR1cm4gd31pZihmLmluZGV4T2YoIi1FTkQgUlNBIFBSSVZBVEUgS0VZLSIpIT0tMSYmZi5pbmRleE9mKCI0LEVOQ1JZUFRFRCIpPT0tMSl7dmFyIGk9S0VZVVRJTC5nZXRIZXhGcm9tUEVNKGYsIlJTQSBQUklWQVRFIEtFWSIpO3JldHVybiBLRVlVVElMLmdldEtleShpLG51bGwsInBrY3M1cHJ2Iil9aWYoZi5pbmRleE9mKCItRU5EIERTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKT09LTEpe3ZhciB1PXRoaXMuZ2V0SGV4RnJvbVBFTShmLCJEU0EgUFJJVkFURSBLRVkiKTt2YXIgdD1BU04xSEVYLmdldFZieUxpc3QodSwwLFsxXSwiMDIiKTt2YXIgcz1BU04xSEVYLmdldFZieUxpc3QodSwwLFsyXSwiMDIiKTt2YXIgdj1BU04xSEVYLmdldFZieUxpc3QodSwwLFszXSwiMDIiKTt2YXIgaj1BU04xSEVYLmdldFZieUxpc3QodSwwLFs0XSwiMDIiKTt2YXIgaz1BU04xSEVYLmdldFZieUxpc3QodSwwLFs1XSwiMDIiKTt2YXIgdz1uZXcgS0pVUi5jcnlwdG8uRFNBKCk7dy5zZXRQcml2YXRlKG5ldyBCaWdJbnRlZ2VyKHQsMTYpLG5ldyBCaWdJbnRlZ2VyKHMsMTYpLG5ldyBCaWdJbnRlZ2VyKHYsMTYpLG5ldyBCaWdJbnRlZ2VyKGosMTYpLG5ldyBCaWdJbnRlZ2VyKGssMTYpKTtyZXR1cm4gd31pZihmLmluZGV4T2YoIi1FTkQgUFJJVkFURSBLRVktIikhPS0xKXtyZXR1cm4gS0VZVVRJTC5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhQRU0oZil9aWYoZi5pbmRleE9mKCItRU5EIFJTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3JldHVybiBLRVlVVElMLmdldFJTQUtleUZyb21FbmNyeXB0ZWRQS0NTNVBFTShmLGUpfWlmKGYuaW5kZXhPZigiLUVORCBFQyBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3ZhciB1PUtFWVVUSUwuZ2V0RGVjcnlwdGVkS2V5SGV4KGYsZSk7dmFyIHc9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjA0Iik7dmFyIGM9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMiwwXSwiMDYiKTt2YXIgbz1BU04xSEVYLmdldFZieUxpc3QodSwwLFszLDBdLCIwMyIpLnN1YnN0cigyKTt2YXIgYj0iIjtpZihLSlVSLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbY10hPT11bmRlZmluZWQpe2I9S0pVUi5jcnlwdG8uT0lELm9pZGhleDJuYW1lW2NdfWVsc2V7dGhyb3cidW5kZWZpbmVkIE9JRChoZXgpIGluIEtKVVIuY3J5cHRvLk9JRDogIitjfXZhciBkPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7bmFtZTpifSk7ZC5zZXRQdWJsaWNLZXlIZXgobyk7ZC5zZXRQcml2YXRlS2V5SGV4KHcpO2QuaXNQdWJsaWM9ZmFsc2U7cmV0dXJuIGR9aWYoZi5pbmRleE9mKCItRU5EIERTQSBQUklWQVRFIEtFWS0iKSE9LTEmJmYuaW5kZXhPZigiNCxFTkNSWVBURUQiKSE9LTEpe3ZhciB1PUtFWVVUSUwuZ2V0RGVjcnlwdGVkS2V5SGV4KGYsZSk7dmFyIHQ9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMV0sIjAyIik7dmFyIHM9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbMl0sIjAyIik7dmFyIHY9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbM10sIjAyIik7dmFyIGo9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbNF0sIjAyIik7dmFyIGs9QVNOMUhFWC5nZXRWYnlMaXN0KHUsMCxbNV0sIjAyIik7dmFyIHc9bmV3IEtKVVIuY3J5cHRvLkRTQSgpO3cuc2V0UHJpdmF0ZShuZXcgQmlnSW50ZWdlcih0LDE2KSxuZXcgQmlnSW50ZWdlcihzLDE2KSxuZXcgQmlnSW50ZWdlcih2LDE2KSxuZXcgQmlnSW50ZWdlcihqLDE2KSxuZXcgQmlnSW50ZWdlcihrLDE2KSk7cmV0dXJuIHd9aWYoZi5pbmRleE9mKCItRU5EIEVOQ1JZUFRFRCBQUklWQVRFIEtFWS0iKSE9LTEpe3JldHVybiBLRVlVVElMLmdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTShmLGUpfXRocm93Im5vdCBzdXBwb3J0ZWQgYXJndW1lbnQifTtLRVlVVElMLmdlbmVyYXRlS2V5cGFpcj1mdW5jdGlvbihhLGMpe2lmKGE9PSJSU0EiKXt2YXIgYj1jO3ZhciBoPW5ldyBSU0FLZXkoKTtoLmdlbmVyYXRlKGIsIjEwMDAxIik7aC5pc1ByaXZhdGU9dHJ1ZTtoLmlzUHVibGljPXRydWU7dmFyIGY9bmV3IFJTQUtleSgpO3ZhciBlPWgubi50b1N0cmluZygxNik7dmFyIGk9aC5lLnRvU3RyaW5nKDE2KTtmLnNldFB1YmxpYyhlLGkpO2YuaXNQcml2YXRlPWZhbHNlO2YuaXNQdWJsaWM9dHJ1ZTt2YXIgaz17fTtrLnBydktleU9iaj1oO2sucHViS2V5T2JqPWY7cmV0dXJuIGt9ZWxzZXtpZihhPT0iRUMiKXt2YXIgZD1jO3ZhciBnPW5ldyBLSlVSLmNyeXB0by5FQ0RTQSh7Y3VydmU6ZH0pO3ZhciBqPWcuZ2VuZXJhdGVLZXlQYWlySGV4KCk7dmFyIGg9bmV3IEtKVVIuY3J5cHRvLkVDRFNBKHtjdXJ2ZTpkfSk7aC5zZXRQcml2YXRlS2V5SGV4KGouZWNwcnZoZXgpO2guaXNQcml2YXRlPXRydWU7aC5pc1B1YmxpYz1mYWxzZTt2YXIgZj1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOmR9KTtmLnNldFB1YmxpY0tleUhleChqLmVjcHViaGV4KTtmLmlzUHJpdmF0ZT1mYWxzZTtmLmlzUHVibGljPXRydWU7dmFyIGs9e307ay5wcnZLZXlPYmo9aDtrLnB1YktleU9iaj1mO3JldHVybiBrfWVsc2V7dGhyb3cidW5rbm93biBhbGdvcml0aG06ICIrYX19fTtLRVlVVElMLmdldFBFTT1mdW5jdGlvbihhLHIsbyxnLGope3ZhciB2PUtKVVIuYXNuMTt2YXIgdT1LSlVSLmNyeXB0bztmdW5jdGlvbiBwKHMpe3ZhciB3PUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjB9LHsiaW50Ijp7YmlnaW50OnMubn19LHsiaW50IjpzLmV9LHsiaW50Ijp7YmlnaW50OnMuZH19LHsiaW50Ijp7YmlnaW50OnMucH19LHsiaW50Ijp7YmlnaW50OnMucX19LHsiaW50Ijp7YmlnaW50OnMuZG1wMX19LHsiaW50Ijp7YmlnaW50OnMuZG1xMX19LHsiaW50Ijp7YmlnaW50OnMuY29lZmZ9fV19KTtyZXR1cm4gd31mdW5jdGlvbiBxKHcpe3ZhciBzPUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjF9LHtvY3RzdHI6e2hleDp3LnBydktleUhleH19LHt0YWc6WyJhMCIsdHJ1ZSx7b2lkOntuYW1lOncuY3VydmVOYW1lfX1dfSx7dGFnOlsiYTEiLHRydWUse2JpdHN0cjp7aGV4OiIwMCIrdy5wdWJLZXlIZXh9fV19XX0pO3JldHVybiBzfWZ1bmN0aW9uIG4ocyl7dmFyIHc9S0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6MH0seyJpbnQiOntiaWdpbnQ6cy5wfX0seyJpbnQiOntiaWdpbnQ6cy5xfX0seyJpbnQiOntiaWdpbnQ6cy5nfX0seyJpbnQiOntiaWdpbnQ6cy55fX0seyJpbnQiOntiaWdpbnQ6cy54fX1dfSk7cmV0dXJuIHd9aWYoKCh0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIFJTQUtleSl8fCh0eXBlb2YgdS5EU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgdS5EU0EpfHwodHlwZW9mIHUuRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgdS5FQ0RTQSkpJiZhLmlzUHVibGljPT10cnVlJiYocj09PXVuZGVmaW5lZHx8cj09IlBLQ1M4UFVCIikpe3ZhciB0PW5ldyBLSlVSLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbyhhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlBVQkxJQyBLRVkiKX1pZihyPT0iUEtDUzFQUlYiJiZ0eXBlb2YgUlNBS2V5IT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIFJTQUtleSYmKG89PT11bmRlZmluZWR8fG89PW51bGwpJiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIHQ9cChhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlJTQSBQUklWQVRFIEtFWSIpfWlmKHI9PSJQS0NTMVBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJihvPT09dW5kZWZpbmVkfHxvPT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciBmPW5ldyBLSlVSLmFzbjEuREVST2JqZWN0SWRlbnRpZmllcih7bmFtZTphLmN1cnZlTmFtZX0pO3ZhciBsPWYuZ2V0RW5jb2RlZEhleCgpO3ZhciBlPXEoYSk7dmFyIGs9ZS5nZXRFbmNvZGVkSGV4KCk7dmFyIGk9IiI7aSs9di5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGwsIkVDIFBBUkFNRVRFUlMiKTtpKz12LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgoaywiRUMgUFJJVkFURSBLRVkiKTtyZXR1cm4gaX1pZihyPT0iUEtDUzFQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSYmKG89PT11bmRlZmluZWR8fG89PW51bGwpJiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIHQ9bihhKTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIkRTQSBQUklWQVRFIEtFWSIpfWlmKHI9PSJQS0NTNVBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgUlNBS2V5JiYobyE9PXVuZGVmaW5lZCYmbyE9bnVsbCkmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgdD1wKGEpO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKGc9PT11bmRlZmluZWQpe2c9IkRFUy1FREUzLUNCQyJ9cmV0dXJuIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KCJSU0EiLG0sbyxnKX1pZihyPT0iUEtDUzVQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJihvIT09dW5kZWZpbmVkJiZvIT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciB0PXEoYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7aWYoZz09PXVuZGVmaW5lZCl7Zz0iREVTLUVERTMtQ0JDIn1yZXR1cm4gdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoIkVDIixtLG8sZyl9aWYocj09IlBLQ1M1UFJWIiYmdHlwZW9mIEtKVVIuY3J5cHRvLkRTQSE9InVuZGVmaW5lZCImJmEgaW5zdGFuY2VvZiBLSlVSLmNyeXB0by5EU0EmJihvIT09dW5kZWZpbmVkJiZvIT1udWxsKSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciB0PW4oYSk7dmFyIG09dC5nZXRFbmNvZGVkSGV4KCk7aWYoZz09PXVuZGVmaW5lZCl7Zz0iREVTLUVERTMtQ0JDIn1yZXR1cm4gdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoIkRTQSIsbSxvLGcpfXZhciBoPWZ1bmN0aW9uKHcscyl7dmFyIHk9Yih3LHMpO3ZhciB4PW5ldyBLSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3tzZXE6W3tvaWQ6e25hbWU6InBrY3M1UEJFUzIifX0se3NlcTpbe3NlcTpbe29pZDp7bmFtZToicGtjczVQQktERjIifX0se3NlcTpbe29jdHN0cjp7aGV4OnkucGJrZGYyU2FsdH19LHsiaW50Ijp5LnBia2RmMkl0ZXJ9XX1dfSx7c2VxOlt7b2lkOntuYW1lOiJkZXMtRURFMy1DQkMifX0se29jdHN0cjp7aGV4OnkuZW5jcnlwdGlvblNjaGVtZUlWfX1dfV19XX0se29jdHN0cjp7aGV4OnkuY2lwaGVydGV4dH19XX0pO3JldHVybiB4LmdldEVuY29kZWRIZXgoKX07dmFyIGI9ZnVuY3Rpb24oRCxFKXt2YXIgeD0xMDA7dmFyIEM9Q3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20oOCk7dmFyIEI9IkRFUy1FREUzLUNCQyI7dmFyIHM9Q3J5cHRvSlMubGliLldvcmRBcnJheS5yYW5kb20oOCk7dmFyIHk9Q3J5cHRvSlMuUEJLREYyKEUsQyx7a2V5U2l6ZToxOTIvMzIsaXRlcmF0aW9uczp4fSk7dmFyIHo9Q3J5cHRvSlMuZW5jLkhleC5wYXJzZShEKTt2YXIgQT1DcnlwdG9KUy5UcmlwbGVERVMuZW5jcnlwdCh6LHkse2l2OnN9KSsiIjt2YXIgdz17fTt3LmNpcGhlcnRleHQ9QTt3LnBia2RmMlNhbHQ9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkoQyk7dy5wYmtkZjJJdGVyPXg7dy5lbmNyeXB0aW9uU2NoZW1lQWxnPUI7dy5lbmNyeXB0aW9uU2NoZW1lSVY9Q3J5cHRvSlMuZW5jLkhleC5zdHJpbmdpZnkocyk7cmV0dXJuIHd9O2lmKHI9PSJQS0NTOFBSViImJnR5cGVvZiBSU0FLZXkhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgUlNBS2V5JiZhLmlzUHJpdmF0ZT09dHJ1ZSl7dmFyIGQ9cChhKTt2YXIgYz1kLmdldEVuY29kZWRIZXgoKTt2YXIgdD1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjowfSx7c2VxOlt7b2lkOntuYW1lOiJyc2FFbmNyeXB0aW9uIn19LHsibnVsbCI6dHJ1ZX1dfSx7b2N0c3RyOntoZXg6Y319XX0pO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKG89PT11bmRlZmluZWR8fG89PW51bGwpe3JldHVybiB2LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgobSwiUFJJVkFURSBLRVkiKX1lbHNle3ZhciBrPWgobSxvKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGssIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIpfX1pZihyPT0iUEtDUzhQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRUNEU0EhPSJ1bmRlZmluZWQiJiZhIGluc3RhbmNlb2YgS0pVUi5jcnlwdG8uRUNEU0EmJmEuaXNQcml2YXRlPT10cnVlKXt2YXIgZD1uZXcgS0pVUi5hc24xLkFTTjFVdGlsLm5ld09iamVjdCh7c2VxOlt7ImludCI6MX0se29jdHN0cjp7aGV4OmEucHJ2S2V5SGV4fX0se3RhZzpbImExIix0cnVlLHtiaXRzdHI6e2hleDoiMDAiK2EucHViS2V5SGV4fX1dfV19KTt2YXIgYz1kLmdldEVuY29kZWRIZXgoKTt2YXIgdD1LSlVSLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHtzZXE6W3siaW50IjowfSx7c2VxOlt7b2lkOntuYW1lOiJlY1B1YmxpY0tleSJ9fSx7b2lkOntuYW1lOmEuY3VydmVOYW1lfX1dfSx7b2N0c3RyOntoZXg6Y319XX0pO3ZhciBtPXQuZ2V0RW5jb2RlZEhleCgpO2lmKG89PT11bmRlZmluZWR8fG89PW51bGwpe3JldHVybiB2LkFTTjFVdGlsLmdldFBFTVN0cmluZ0Zyb21IZXgobSwiUFJJVkFURSBLRVkiKX1lbHNle3ZhciBrPWgobSxvKTtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KGssIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIpfX1pZihyPT0iUEtDUzhQUlYiJiZ0eXBlb2YgS0pVUi5jcnlwdG8uRFNBIT0idW5kZWZpbmVkIiYmYSBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkRTQSYmYS5pc1ByaXZhdGU9PXRydWUpe3ZhciBkPW5ldyBLSlVSLmFzbjEuREVSSW50ZWdlcih7YmlnaW50OmEueH0pO3ZhciBjPWQuZ2V0RW5jb2RlZEhleCgpO3ZhciB0PUtKVVIuYXNuMS5BU04xVXRpbC5uZXdPYmplY3Qoe3NlcTpbeyJpbnQiOjB9LHtzZXE6W3tvaWQ6e25hbWU6ImRzYSJ9fSx7c2VxOlt7ImludCI6e2JpZ2ludDphLnB9fSx7ImludCI6e2JpZ2ludDphLnF9fSx7ImludCI6e2JpZ2ludDphLmd9fV19XX0se29jdHN0cjp7aGV4OmN9fV19KTt2YXIgbT10LmdldEVuY29kZWRIZXgoKTtpZihvPT09dW5kZWZpbmVkfHxvPT1udWxsKXtyZXR1cm4gdi5BU04xVXRpbC5nZXRQRU1TdHJpbmdGcm9tSGV4KG0sIlBSSVZBVEUgS0VZIil9ZWxzZXt2YXIgaz1oKG0sbyk7cmV0dXJuIHYuQVNOMVV0aWwuZ2V0UEVNU3RyaW5nRnJvbUhleChrLCJFTkNSWVBURUQgUFJJVkFURSBLRVkiKX19dGhyb3cidW5zdXBwb3J0ZWQgb2JqZWN0IG5vciBmb3JtYXQifTtLRVlVVElMLmdldEtleUZyb21DU1JQRU09ZnVuY3Rpb24oYil7dmFyIGE9S0VZVVRJTC5nZXRIZXhGcm9tUEVNKGIsIkNFUlRJRklDQVRFIFJFUVVFU1QiKTt2YXIgYz1LRVlVVElMLmdldEtleUZyb21DU1JIZXgoYSk7cmV0dXJuIGN9O0tFWVVUSUwuZ2V0S2V5RnJvbUNTUkhleD1mdW5jdGlvbihhKXt2YXIgYz1LRVlVVElMLnBhcnNlQ1NSSGV4KGEpO3ZhciBiPUtFWVVUSUwuZ2V0S2V5KGMucDhwdWJrZXloZXgsbnVsbCwicGtjczhwdWIiKTtyZXR1cm4gYn07S0VZVVRJTC5wYXJzZUNTUkhleD1mdW5jdGlvbihjKXt2YXIgYj17fTt2YXIgZT1jO2lmKGUuc3Vic3RyKDAsMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBDU1IoY29kZTowMDEpIn12YXIgZD1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLDApO2lmKGQubGVuZ3RoPDEpe3Rocm93Im1hbGZvcm1lZCBDU1IoY29kZTowMDIpIn1pZihlLnN1YnN0cihkWzBdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAzKSJ9dmFyIGE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZSxkWzBdKTtpZihhLmxlbmd0aDwzKXt0aHJvdyJtYWxmb3JtZWQgQ1NSKGNvZGU6MDA0KSJ9Yi5wOHB1YmtleWhleD1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGUsYVsyXSk7cmV0dXJuIGJ9OwovKiEgcnNhcGVtLTEuMS5qcyAoYykgMjAxMiBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KZnVuY3Rpb24gX3JzYXBlbV9wZW1Ub0Jhc2U2NChiKXt2YXIgYT1iO2E9YS5yZXBsYWNlKCItLS0tLUJFR0lOIFJTQSBQUklWQVRFIEtFWS0tLS0tIiwiIik7YT1hLnJlcGxhY2UoIi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tIiwiIik7YT1hLnJlcGxhY2UoL1sgXG5dKy9nLCIiKTtyZXR1cm4gYX1mdW5jdGlvbiBfcnNhcGVtX2dldFBvc0FycmF5T2ZDaGlsZHJlbkZyb21IZXgoZCl7dmFyIGo9bmV3IEFycmF5KCk7dmFyIGs9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihkLDApO3ZhciBmPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGspO3ZhciBoPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGYpO3ZhciBiPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGgpO3ZhciBsPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGIpO3ZhciBlPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGwpO3ZhciBnPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGUpO3ZhciBjPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGcpO3ZhciBpPUFTTjFIRVguZ2V0UG9zT2ZOZXh0U2libGluZ19BdE9iaihkLGMpO2oucHVzaChrLGYsaCxiLGwsZSxnLGMsaSk7cmV0dXJuIGp9ZnVuY3Rpb24gX3JzYXBlbV9nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgoaSl7dmFyIG89X3JzYXBlbV9nZXRQb3NBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGkpO3ZhciByPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1swXSk7dmFyIGY9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzFdKTt2YXIgaj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bMl0pO3ZhciBrPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1szXSk7dmFyIGM9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzRdKTt2YXIgYj1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bNV0pO3ZhciBoPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGksb1s2XSk7dmFyIGc9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooaSxvWzddKTt2YXIgbD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihpLG9bOF0pO3ZhciBtPW5ldyBBcnJheSgpO20ucHVzaChyLGYsaixrLGMsYixoLGcsbCk7cmV0dXJuIG19ZnVuY3Rpb24gX3JzYXBlbV9yZWFkUHJpdmF0ZUtleUZyb21BU04xSGV4U3RyaW5nKGMpe3ZhciBiPV9yc2FwZW1fZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGMpO3RoaXMuc2V0UHJpdmF0ZUV4KGJbMV0sYlsyXSxiWzNdLGJbNF0sYls1XSxiWzZdLGJbN10sYls4XSl9ZnVuY3Rpb24gX3JzYXBlbV9yZWFkUHJpdmF0ZUtleUZyb21QRU1TdHJpbmcoZSl7dmFyIGM9X3JzYXBlbV9wZW1Ub0Jhc2U2NChlKTt2YXIgZD1iNjR0b2hleChjKTt2YXIgYj1fcnNhcGVtX2dldEhleFZhbHVlQXJyYXlPZkNoaWxkcmVuRnJvbUhleChkKTt0aGlzLnNldFByaXZhdGVFeChiWzFdLGJbMl0sYlszXSxiWzRdLGJbNV0sYls2XSxiWzddLGJbOF0pfVJTQUtleS5wcm90b3R5cGUucmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nPV9yc2FwZW1fcmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nO1JTQUtleS5wcm90b3R5cGUucmVhZFByaXZhdGVLZXlGcm9tQVNOMUhleFN0cmluZz1fcnNhcGVtX3JlYWRQcml2YXRlS2V5RnJvbUFTTjFIZXhTdHJpbmc7Ci8qISByc2FzaWduLTEuMi43LmpzIChjKSAyMDEyIEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwp2YXIgX1JFX0hFWERFQ09OTFk9bmV3IFJlZ0V4cCgiIik7X1JFX0hFWERFQ09OTFkuY29tcGlsZSgiW14wLTlhLWZdIiwiZ2kiKTtmdW5jdGlvbiBfcnNhc2lnbl9nZXRIZXhQYWRkZWREaWdlc3RJbmZvRm9yU3RyaW5nKGQsZSxhKXt2YXIgYj1mdW5jdGlvbihmKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGYsYSl9O3ZhciBjPWIoZCk7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuZ2V0UGFkZGVkRGlnZXN0SW5mb0hleChjLGEsZSl9ZnVuY3Rpb24gX3plcm9QYWRkaW5nT2ZTaWduYXR1cmUoZSxkKXt2YXIgYz0iIjt2YXIgYT1kLzQtZS5sZW5ndGg7Zm9yKHZhciBiPTA7YjxhO2IrKyl7Yz1jKyIwIn1yZXR1cm4gYytlfWZ1bmN0aW9uIF9yc2FzaWduX3NpZ25TdHJpbmcoZCxhKXt2YXIgYj1mdW5jdGlvbihlKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGUsYSl9O3ZhciBjPWIoZCk7cmV0dXJuIHRoaXMuc2lnbldpdGhNZXNzYWdlSGFzaChjLGEpfWZ1bmN0aW9uIF9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2goZSxjKXt2YXIgZj1LSlVSLmNyeXB0by5VdGlsLmdldFBhZGRlZERpZ2VzdEluZm9IZXgoZSxjLHRoaXMubi5iaXRMZW5ndGgoKSk7dmFyIGI9cGFyc2VCaWdJbnQoZiwxNik7dmFyIGQ9dGhpcy5kb1ByaXZhdGUoYik7dmFyIGE9ZC50b1N0cmluZygxNik7cmV0dXJuIF96ZXJvUGFkZGluZ09mU2lnbmF0dXJlKGEsdGhpcy5uLmJpdExlbmd0aCgpKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduU3RyaW5nV2l0aFNIQTEoYSl7cmV0dXJuIF9yc2FzaWduX3NpZ25TdHJpbmcuY2FsbCh0aGlzLGEsInNoYTEiKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduU3RyaW5nV2l0aFNIQTI1NihhKXtyZXR1cm4gX3JzYXNpZ25fc2lnblN0cmluZy5jYWxsKHRoaXMsYSwic2hhMjU2Iil9ZnVuY3Rpb24gcHNzX21nZjFfc3RyKGMsYSxlKXt2YXIgYj0iIixkPTA7d2hpbGUoYi5sZW5ndGg8YSl7Yis9aGV4dG9yc3RyKGUocnN0cnRvaGV4KGMrU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsWyhkJjQyNzgxOTAwODApPj4yNCwoZCYxNjcxMTY4MCk+PjE2LChkJjY1MjgwKT4+OCxkJjI1NV0pKSkpO2QrPTF9cmV0dXJuIGJ9ZnVuY3Rpb24gX3JzYXNpZ25fc2lnblN0cmluZ1BTUyhlLGEsZCl7dmFyIGM9ZnVuY3Rpb24oZil7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChmLGEpfTt2YXIgYj1jKHJzdHJ0b2hleChlKSk7aWYoZD09PXVuZGVmaW5lZCl7ZD0tMX1yZXR1cm4gdGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKGIsYSxkKX1mdW5jdGlvbiBfcnNhc2lnbl9zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKGwsYSxrKXt2YXIgYj1oZXh0b3JzdHIobCk7dmFyIGc9Yi5sZW5ndGg7dmFyIG09dGhpcy5uLmJpdExlbmd0aCgpLTE7dmFyIGM9TWF0aC5jZWlsKG0vOCk7dmFyIGQ7dmFyIG89ZnVuY3Rpb24oaSl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChpLGEpfTtpZihrPT09LTF8fGs9PT11bmRlZmluZWQpe2s9Z31lbHNle2lmKGs9PT0tMil7az1jLWctMn1lbHNle2lmKGs8LTIpe3Rocm93ImludmFsaWQgc2FsdCBsZW5ndGgifX19aWYoYzwoZytrKzIpKXt0aHJvdyJkYXRhIHRvbyBsb25nIn12YXIgZj0iIjtpZihrPjApe2Y9bmV3IEFycmF5KGspO25ldyBTZWN1cmVSYW5kb20oKS5uZXh0Qnl0ZXMoZik7Zj1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxmKX12YXIgbj1oZXh0b3JzdHIobyhyc3RydG9oZXgoIlx4MDBceDAwXHgwMFx4MDBceDAwXHgwMFx4MDBceDAwIitiK2YpKSk7dmFyIGo9W107Zm9yKGQ9MDtkPGMtay1nLTI7ZCs9MSl7altkXT0wfXZhciBlPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGopKyJceDAxIitmO3ZhciBoPXBzc19tZ2YxX3N0cihuLGUubGVuZ3RoLG8pO3ZhciBxPVtdO2ZvcihkPTA7ZDxlLmxlbmd0aDtkKz0xKXtxW2RdPWUuY2hhckNvZGVBdChkKV5oLmNoYXJDb2RlQXQoZCl9dmFyIHA9KDY1MjgwPj4oOCpjLW0pKSYyNTU7cVswXSY9fnA7Zm9yKGQ9MDtkPGc7ZCsrKXtxLnB1c2gobi5jaGFyQ29kZUF0KGQpKX1xLnB1c2goMTg4KTtyZXR1cm4gX3plcm9QYWRkaW5nT2ZTaWduYXR1cmUodGhpcy5kb1ByaXZhdGUobmV3IEJpZ0ludGVnZXIocSkpLnRvU3RyaW5nKDE2KSx0aGlzLm4uYml0TGVuZ3RoKCkpfWZ1bmN0aW9uIF9yc2FzaWduX2dldERlY3J5cHRTaWduYXR1cmVCSShhLGQsYyl7dmFyIGI9bmV3IFJTQUtleSgpO2Iuc2V0UHVibGljKGQsYyk7dmFyIGU9Yi5kb1B1YmxpYyhhKTtyZXR1cm4gZX1mdW5jdGlvbiBfcnNhc2lnbl9nZXRIZXhEaWdlc3RJbmZvRnJvbVNpZyhhLGMsYil7dmFyIGU9X3JzYXNpZ25fZ2V0RGVjcnlwdFNpZ25hdHVyZUJJKGEsYyxiKTt2YXIgZD1lLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLCIiKTtyZXR1cm4gZH1mdW5jdGlvbiBfcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhmKXtmb3IodmFyIGUgaW4gS0pVUi5jcnlwdG8uVXRpbC5ESUdFU1RJTkZPSEVBRCl7dmFyIGQ9S0pVUi5jcnlwdG8uVXRpbC5ESUdFU1RJTkZPSEVBRFtlXTt2YXIgYj1kLmxlbmd0aDtpZihmLnN1YnN0cmluZygwLGIpPT1kKXt2YXIgYz1bZSxmLnN1YnN0cmluZyhiKV07cmV0dXJuIGN9fXJldHVybltdfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeVNpZ25hdHVyZVdpdGhBcmdzKGYsYixnLGope3ZhciBlPV9yc2FzaWduX2dldEhleERpZ2VzdEluZm9Gcm9tU2lnKGIsZyxqKTt2YXIgaD1fcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhlKTtpZihoLmxlbmd0aD09MCl7cmV0dXJuIGZhbHNlfXZhciBkPWhbMF07dmFyIGk9aFsxXTt2YXIgYT1mdW5jdGlvbihrKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGssZCl9O3ZhciBjPWEoZik7cmV0dXJuKGk9PWMpfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeUhleFNpZ25hdHVyZUZvck1lc3NhZ2UoYyxiKXt2YXIgZD1wYXJzZUJpZ0ludChjLDE2KTt2YXIgYT1fcnNhc2lnbl92ZXJpZnlTaWduYXR1cmVXaXRoQXJncyhiLGQsdGhpcy5uLnRvU3RyaW5nKDE2KSx0aGlzLmUudG9TdHJpbmcoMTYpKTtyZXR1cm4gYX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlTdHJpbmcoZixqKXtqPWoucmVwbGFjZShfUkVfSEVYREVDT05MWSwiIik7aj1qLnJlcGxhY2UoL1sgXG5dKy9nLCIiKTt2YXIgYj1wYXJzZUJpZ0ludChqLDE2KTtpZihiLmJpdExlbmd0aCgpPnRoaXMubi5iaXRMZW5ndGgoKSl7cmV0dXJuIDB9dmFyIGk9dGhpcy5kb1B1YmxpYyhiKTt2YXIgZT1pLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLCIiKTt2YXIgZz1fcnNhc2lnbl9nZXRBbGdOYW1lQW5kSGFzaEZyb21IZXhEaXNnZXN0SW5mbyhlKTtpZihnLmxlbmd0aD09MCl7cmV0dXJuIGZhbHNlfXZhciBkPWdbMF07dmFyIGg9Z1sxXTt2YXIgYT1mdW5jdGlvbihrKXtyZXR1cm4gS0pVUi5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKGssZCl9O3ZhciBjPWEoZik7cmV0dXJuKGg9PWMpfWZ1bmN0aW9uIF9yc2FzaWduX3ZlcmlmeVdpdGhNZXNzYWdlSGFzaChlLGEpe2E9YS5yZXBsYWNlKF9SRV9IRVhERUNPTkxZLCIiKTthPWEucmVwbGFjZSgvWyBcbl0rL2csIiIpO3ZhciBiPXBhcnNlQmlnSW50KGEsMTYpO2lmKGIuYml0TGVuZ3RoKCk+dGhpcy5uLmJpdExlbmd0aCgpKXtyZXR1cm4gMH12YXIgaD10aGlzLmRvUHVibGljKGIpO3ZhciBnPWgudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14xZiswMC8sIiIpO3ZhciBjPV9yc2FzaWduX2dldEFsZ05hbWVBbmRIYXNoRnJvbUhleERpc2dlc3RJbmZvKGcpO2lmKGMubGVuZ3RoPT0wKXtyZXR1cm4gZmFsc2V9dmFyIGQ9Y1swXTt2YXIgZj1jWzFdO3JldHVybihmPT1lKX1mdW5jdGlvbiBfcnNhc2lnbl92ZXJpZnlTdHJpbmdQU1MoYyxiLGEsZil7dmFyIGU9ZnVuY3Rpb24oZyl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChnLGEpfTt2YXIgZD1lKHJzdHJ0b2hleChjKSk7aWYoZj09PXVuZGVmaW5lZCl7Zj0tMX1yZXR1cm4gdGhpcy52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1MoZCxiLGEsZil9ZnVuY3Rpb24gX3JzYXNpZ25fdmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTKGYscyxsLGMpe3ZhciBrPW5ldyBCaWdJbnRlZ2VyKHMsMTYpO2lmKGsuYml0TGVuZ3RoKCk+dGhpcy5uLmJpdExlbmd0aCgpKXtyZXR1cm4gZmFsc2V9dmFyIHI9ZnVuY3Rpb24oaSl7cmV0dXJuIEtKVVIuY3J5cHRvLlV0aWwuaGFzaEhleChpLGwpfTt2YXIgaj1oZXh0b3JzdHIoZik7dmFyIGg9ai5sZW5ndGg7dmFyIGc9dGhpcy5uLmJpdExlbmd0aCgpLTE7dmFyIG09TWF0aC5jZWlsKGcvOCk7dmFyIHE7aWYoYz09PS0xfHxjPT09dW5kZWZpbmVkKXtjPWh9ZWxzZXtpZihjPT09LTIpe2M9bS1oLTJ9ZWxzZXtpZihjPC0yKXt0aHJvdyJpbnZhbGlkIHNhbHQgbGVuZ3RoIn19fWlmKG08KGgrYysyKSl7dGhyb3ciZGF0YSB0b28gbG9uZyJ9dmFyIGE9dGhpcy5kb1B1YmxpYyhrKS50b0J5dGVBcnJheSgpO2ZvcihxPTA7cTxhLmxlbmd0aDtxKz0xKXthW3FdJj0yNTV9d2hpbGUoYS5sZW5ndGg8bSl7YS51bnNoaWZ0KDApfWlmKGFbbS0xXSE9PTE4OCl7dGhyb3ciZW5jb2RlZCBtZXNzYWdlIGRvZXMgbm90IGVuZCBpbiAweGJjIn1hPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLGEpO3ZhciBkPWEuc3Vic3RyKDAsbS1oLTEpO3ZhciBlPWEuc3Vic3RyKGQubGVuZ3RoLGgpO3ZhciBwPSg2NTI4MD4+KDgqbS1nKSkmMjU1O2lmKChkLmNoYXJDb2RlQXQoMCkmcCkhPT0wKXt0aHJvdyJiaXRzIGJleW9uZCBrZXlzaXplIG5vdCB6ZXJvIn12YXIgbj1wc3NfbWdmMV9zdHIoZSxkLmxlbmd0aCxyKTt2YXIgbz1bXTtmb3IocT0wO3E8ZC5sZW5ndGg7cSs9MSl7b1txXT1kLmNoYXJDb2RlQXQocSlebi5jaGFyQ29kZUF0KHEpfW9bMF0mPX5wO3ZhciBiPW0taC1jLTI7Zm9yKHE9MDtxPGI7cSs9MSl7aWYob1txXSE9PTApe3Rocm93ImxlZnRtb3N0IG9jdGV0cyBub3QgemVybyJ9fWlmKG9bYl0hPT0xKXt0aHJvdyIweDAxIG1hcmtlciBub3QgZm91bmQifXJldHVybiBlPT09aGV4dG9yc3RyKHIocnN0cnRvaGV4KCJceDAwXHgwMFx4MDBceDAwXHgwMFx4MDBceDAwXHgwMCIraitTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxvLnNsaWNlKC1jKSkpKSl9UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aE1lc3NhZ2VIYXNoPV9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2g7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nPV9yc2FzaWduX3NpZ25TdHJpbmc7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nV2l0aFNIQTE9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEExO1JTQUtleS5wcm90b3R5cGUuc2lnblN0cmluZ1dpdGhTSEEyNTY9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEEyNTY7UlNBS2V5LnByb3RvdHlwZS5zaWduPV9yc2FzaWduX3NpZ25TdHJpbmc7UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aFNIQTE9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEExO1JTQUtleS5wcm90b3R5cGUuc2lnbldpdGhTSEEyNTY9X3JzYXNpZ25fc2lnblN0cmluZ1dpdGhTSEEyNTY7UlNBS2V5LnByb3RvdHlwZS5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTPV9yc2FzaWduX3NpZ25XaXRoTWVzc2FnZUhhc2hQU1M7UlNBS2V5LnByb3RvdHlwZS5zaWduU3RyaW5nUFNTPV9yc2FzaWduX3NpZ25TdHJpbmdQU1M7UlNBS2V5LnByb3RvdHlwZS5zaWduUFNTPV9yc2FzaWduX3NpZ25TdHJpbmdQU1M7UlNBS2V5LlNBTFRfTEVOX0hMRU49LTE7UlNBS2V5LlNBTFRfTEVOX01BWD0tMjtSU0FLZXkucHJvdG90eXBlLnZlcmlmeVdpdGhNZXNzYWdlSGFzaD1fcnNhc2lnbl92ZXJpZnlXaXRoTWVzc2FnZUhhc2g7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlTdHJpbmc9X3JzYXNpZ25fdmVyaWZ5U3RyaW5nO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5SGV4U2lnbmF0dXJlRm9yTWVzc2FnZT1fcnNhc2lnbl92ZXJpZnlIZXhTaWduYXR1cmVGb3JNZXNzYWdlO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5PV9yc2FzaWduX3ZlcmlmeVN0cmluZztSU0FLZXkucHJvdG90eXBlLnZlcmlmeUhleFNpZ25hdHVyZUZvckJ5dGVBcnJheU1lc3NhZ2U9X3JzYXNpZ25fdmVyaWZ5SGV4U2lnbmF0dXJlRm9yTWVzc2FnZTtSU0FLZXkucHJvdG90eXBlLnZlcmlmeVdpdGhNZXNzYWdlSGFzaFBTUz1fcnNhc2lnbl92ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1M7UlNBS2V5LnByb3RvdHlwZS52ZXJpZnlTdHJpbmdQU1M9X3JzYXNpZ25fdmVyaWZ5U3RyaW5nUFNTO1JTQUtleS5wcm90b3R5cGUudmVyaWZ5UFNTPV9yc2FzaWduX3ZlcmlmeVN0cmluZ1BTUztSU0FLZXkuU0FMVF9MRU5fUkVDT1ZFUj0tMjsKLyohIHg1MDktMS4xLjYuanMgKGMpIDIwMTItMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc3JzYXNpZ24vbGljZW5zZQogKi8KZnVuY3Rpb24gWDUwOSgpe3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQT1udWxsO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oTj1udWxsO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oRT1udWxsO3RoaXMuaGV4PW51bGw7dGhpcy5nZXRTZXJpYWxOdW1iZXJIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhWQnlOdGhMaXN0KHRoaXMuaGV4LDAsWzAsMV0pfTt0aGlzLmdldElzc3VlckhleD1mdW5jdGlvbigpe3JldHVybiBBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDNdKX07dGhpcy5nZXRJc3N1ZXJTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gWDUwOS5oZXgyZG4oQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCwzXSkpfTt0aGlzLmdldFN1YmplY3RIZXg9ZnVuY3Rpb24oKXtyZXR1cm4gQVNOMUhFWC5nZXREZWNlbmRhbnRIZXhUTFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCw1XSl9O3RoaXMuZ2V0U3ViamVjdFN0cmluZz1mdW5jdGlvbigpe3JldHVybiBYNTA5LmhleDJkbihBU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdCh0aGlzLmhleCwwLFswLDVdKSl9O3RoaXMuZ2V0Tm90QmVmb3JlPWZ1bmN0aW9uKCl7dmFyIGE9QVNOMUhFWC5nZXREZWNlbmRhbnRIZXhWQnlOdGhMaXN0KHRoaXMuaGV4LDAsWzAsNCwwXSk7YT1hLnJlcGxhY2UoLyguLikvZywiJSQxIik7YT1kZWNvZGVVUklDb21wb25lbnQoYSk7cmV0dXJuIGF9O3RoaXMuZ2V0Tm90QWZ0ZXI9ZnVuY3Rpb24oKXt2YXIgYT1BU04xSEVYLmdldERlY2VuZGFudEhleFZCeU50aExpc3QodGhpcy5oZXgsMCxbMCw0LDFdKTthPWEucmVwbGFjZSgvKC4uKS9nLCIlJDEiKTthPWRlY29kZVVSSUNvbXBvbmVudChhKTtyZXR1cm4gYX07dGhpcy5yZWFkQ2VydFBFTT1mdW5jdGlvbihjKXt2YXIgZT1YNTA5LnBlbVRvSGV4KGMpO3ZhciBiPVg1MDkuZ2V0UHVibGljS2V5SGV4QXJyYXlGcm9tQ2VydEhleChlKTt2YXIgZD1uZXcgUlNBS2V5KCk7ZC5zZXRQdWJsaWMoYlswXSxiWzFdKTt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0E9ZDt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0FfaE49YlswXTt0aGlzLnN1YmplY3RQdWJsaWNLZXlSU0FfaEU9YlsxXTt0aGlzLmhleD1lfTt0aGlzLnJlYWRDZXJ0UEVNV2l0aG91dFJTQUluaXQ9ZnVuY3Rpb24oYyl7dmFyIGQ9WDUwOS5wZW1Ub0hleChjKTt2YXIgYj1YNTA5LmdldFB1YmxpY0tleUhleEFycmF5RnJvbUNlcnRIZXgoZCk7dGhpcy5zdWJqZWN0UHVibGljS2V5UlNBLnNldFB1YmxpYyhiWzBdLGJbMV0pO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oTj1iWzBdO3RoaXMuc3ViamVjdFB1YmxpY0tleVJTQV9oRT1iWzFdO3RoaXMuaGV4PWR9fVg1MDkucGVtVG9CYXNlNjQ9ZnVuY3Rpb24oYSl7dmFyIGI9YTtiPWIucmVwbGFjZSgiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tIiwiIik7Yj1iLnJlcGxhY2UoIi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0iLCIiKTtiPWIucmVwbGFjZSgvWyBcbl0rL2csIiIpO3JldHVybiBifTtYNTA5LnBlbVRvSGV4PWZ1bmN0aW9uKGEpe3ZhciBjPVg1MDkucGVtVG9CYXNlNjQoYSk7dmFyIGI9YjY0dG9oZXgoYyk7cmV0dXJuIGJ9O1g1MDkuZ2V0U3ViamVjdFB1YmxpY0tleVBvc0Zyb21DZXJ0SGV4PWZ1bmN0aW9uKGYpe3ZhciBlPVg1MDkuZ2V0U3ViamVjdFB1YmxpY0tleUluZm9Qb3NGcm9tQ2VydEhleChmKTtpZihlPT0tMSl7cmV0dXJuIC0xfXZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGYsZSk7aWYoYi5sZW5ndGghPTIpe3JldHVybiAtMX12YXIgZD1iWzFdO2lmKGYuc3Vic3RyaW5nKGQsZCsyKSE9IjAzIil7cmV0dXJuIC0xfXZhciBjPUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmooZixkKTtpZihmLnN1YnN0cmluZyhjLGMrMikhPSIwMCIpe3JldHVybiAtMX1yZXR1cm4gYysyfTtYNTA5LmdldFN1YmplY3RQdWJsaWNLZXlJbmZvUG9zRnJvbUNlcnRIZXg9ZnVuY3Rpb24oZCl7dmFyIGM9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihkLDApO3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGQsYyk7aWYoYi5sZW5ndGg8MSl7cmV0dXJuIC0xfWlmKGQuc3Vic3RyaW5nKGJbMF0sYlswXSsxMCk9PSJhMDAzMDIwMTAyIil7aWYoYi5sZW5ndGg8Nil7cmV0dXJuIC0xfXJldHVybiBiWzZdfWVsc2V7aWYoYi5sZW5ndGg8NSl7cmV0dXJuIC0xfXJldHVybiBiWzVdfX07WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0SGV4PWZ1bmN0aW9uKGYpe3ZhciBlPVg1MDkuZ2V0U3ViamVjdFB1YmxpY0tleVBvc0Zyb21DZXJ0SGV4KGYpO3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGYsZSk7aWYoYi5sZW5ndGghPTIpe3JldHVybltdfXZhciBkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGYsYlswXSk7dmFyIGM9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZixiWzFdKTtpZihkIT1udWxsJiZjIT1udWxsKXtyZXR1cm5bZCxjXX1lbHNle3JldHVybltdfX07WDUwOS5nZXRIZXhUYnNDZXJ0aWZpY2F0ZUZyb21DZXJ0PWZ1bmN0aW9uKGIpe3ZhciBhPUFTTjFIRVguZ2V0U3RhcnRQb3NPZlZfQXRPYmooYiwwKTtyZXR1cm4gYX07WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0UEVNPWZ1bmN0aW9uKGMpe3ZhciBkPVg1MDkucGVtVG9IZXgoYyk7dmFyIGI9WDUwOS5nZXRQdWJsaWNLZXlIZXhBcnJheUZyb21DZXJ0SGV4KGQpO3JldHVybiBifTtYNTA5LmhleDJkbj1mdW5jdGlvbihlKXt2YXIgZj0iIjt2YXIgYz1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihlLDApO2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgYj1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGUsY1tkXSk7Zj1mKyIvIitYNTA5LmhleDJyZG4oYil9cmV0dXJuIGZ9O1g1MDkuaGV4MnJkbj1mdW5jdGlvbihhKXt2YXIgZj1BU04xSEVYLmdldERlY2VuZGFudEhleFRMVkJ5TnRoTGlzdChhLDAsWzAsMF0pO3ZhciBlPUFTTjFIRVguZ2V0RGVjZW5kYW50SGV4VkJ5TnRoTGlzdChhLDAsWzAsMV0pO3ZhciBjPSIiO3RyeXtjPVg1MDkuRE5fQVRUUkhFWFtmXX1jYXRjaChiKXtjPWZ9ZT1lLnJlcGxhY2UoLyguLikvZywiJSQxIik7dmFyIGQ9ZGVjb2RlVVJJQ29tcG9uZW50KGUpO3JldHVybiBjKyI9IitkfTtYNTA5LkROX0FUVFJIRVg9eyIwNjAzNTUwNDA2IjoiQyIsIjA2MDM1NTA0MGEiOiJPIiwiMDYwMzU1MDQwYiI6Ik9VIiwiMDYwMzU1MDQwMyI6IkNOIiwiMDYwMzU1MDQwNSI6IlNOIiwiMDYwMzU1MDQwOCI6IlNUIiwiMDYwMzU1MDQwNyI6IkwiLH07WDUwOS5nZXRQdWJsaWNLZXlGcm9tQ2VydFBFTT1mdW5jdGlvbihmKXt2YXIgYz1YNTA5LmdldFB1YmxpY0tleUluZm9Qcm9wT2ZDZXJ0UEVNKGYpO2lmKGMuYWxnb2lkPT0iMmE4NjQ4ODZmNzBkMDEwMTAxIil7dmFyIGk9S0VZVVRJTC5wYXJzZVB1YmxpY1Jhd1JTQUtleUhleChjLmtleWhleCk7dmFyIGo9bmV3IFJTQUtleSgpO2ouc2V0UHVibGljKGkubixpLmUpO3JldHVybiBqfWVsc2V7aWYoYy5hbGdvaWQ9PSIyYTg2NDhjZTNkMDIwMSIpe3ZhciBlPUtKVVIuY3J5cHRvLk9JRC5vaWRoZXgybmFtZVtjLmFsZ3BhcmFtXTt2YXIgaj1uZXcgS0pVUi5jcnlwdG8uRUNEU0Eoe2N1cnZlOmUsaW5mbzpjLmtleWhleH0pO2ouc2V0UHVibGljS2V5SGV4KGMua2V5aGV4KTtyZXR1cm4gan1lbHNle2lmKGMuYWxnb2lkPT0iMmE4NjQ4Y2UzODA0MDEiKXt2YXIgYj1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFswXSwiMDIiKTt2YXIgYT1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFsxXSwiMDIiKTt2YXIgZD1BU04xSEVYLmdldFZieUxpc3QoYy5hbGdwYXJhbSwwLFsyXSwiMDIiKTt2YXIgaD1BU04xSEVYLmdldEhleE9mVl9BdE9iaihjLmtleWhleCwwKTtoPWguc3Vic3RyKDIpO3ZhciBqPW5ldyBLSlVSLmNyeXB0by5EU0EoKTtqLnNldFB1YmxpYyhuZXcgQmlnSW50ZWdlcihiLDE2KSxuZXcgQmlnSW50ZWdlcihhLDE2KSxuZXcgQmlnSW50ZWdlcihkLDE2KSxuZXcgQmlnSW50ZWdlcihoLDE2KSk7cmV0dXJuIGp9ZWxzZXt0aHJvdyJ1bnN1cHBvcnRlZCBrZXkifX19fTtYNTA5LmdldFB1YmxpY0tleUluZm9Qcm9wT2ZDZXJ0UEVNPWZ1bmN0aW9uKGUpe3ZhciBjPXt9O2MuYWxncGFyYW09bnVsbDt2YXIgZz1YNTA5LnBlbVRvSGV4KGUpO3ZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsMCk7aWYoZC5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAxKSJ9aWYoZy5zdWJzdHIoZFswXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDIpIn12YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLGRbMF0pO2lmKGIubGVuZ3RoPDcpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAzKSJ9dmFyIGg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxiWzZdKTtpZihoLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDQpIn12YXIgZj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLGhbMF0pO2lmKGYubGVuZ3RoIT0yKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwNSkifWMuYWxnb2lkPUFTTjFIRVguZ2V0SGV4T2ZWX0F0T2JqKGcsZlswXSk7aWYoZy5zdWJzdHIoZlsxXSwyKT09IjA2Iil7Yy5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVl9BdE9iaihnLGZbMV0pfWVsc2V7aWYoZy5zdWJzdHIoZlsxXSwyKT09IjMwIil7Yy5hbGdwYXJhbT1BU04xSEVYLmdldEhleE9mVExWX0F0T2JqKGcsZlsxXSl9fWlmKGcuc3Vic3RyKGhbMV0sMikhPSIwMyIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDA2KSJ9dmFyIGE9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxoWzFdKTtjLmtleWhleD1hLnN1YnN0cigyKTtyZXR1cm4gY307WDUwOS5nZXRQdWJsaWNLZXlJbmZvUG9zT2ZDZXJ0SEVYPWZ1bmN0aW9uKGMpe3ZhciBiPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGMsMCk7aWYoYi5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAxKSJ9aWYoYy5zdWJzdHIoYlswXSwyKSE9IjMwIil7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDIpIn12YXIgYT1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihjLGJbMF0pO2lmKGEubGVuZ3RoPDcpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAzKSJ9cmV0dXJuIGFbNl19O1g1MDkuZ2V0VjNFeHRJbmZvTGlzdE9mQ2VydEhleD1mdW5jdGlvbihnKXt2YXIgYj1BU04xSEVYLmdldFBvc0FycmF5T2ZDaGlsZHJlbl9BdE9iaihnLDApO2lmKGIubGVuZ3RoIT0zKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwMSkifWlmKGcuc3Vic3RyKGJbMF0sMikhPSIzMCIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDAyKSJ9dmFyIGE9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxiWzBdKTtpZihhLmxlbmd0aDw4KXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwMykifWlmKGcuc3Vic3RyKGFbN10sMikhPSJhMyIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBQRU0gKGNvZGU6MDA0KSJ9dmFyIGg9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxhWzddKTtpZihoLmxlbmd0aCE9MSl7dGhyb3cibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIFBFTSAoY29kZTowMDUpIn1pZihnLnN1YnN0cihoWzBdLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgUEVNIChjb2RlOjAwNikifXZhciBmPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsaFswXSk7dmFyIGU9Zi5sZW5ndGg7dmFyIGQ9bmV3IEFycmF5KGUpO2Zvcih2YXIgYz0wO2M8ZTtjKyspe2RbY109WDUwOS5nZXRWM0V4dEl0ZW1JbmZvX0F0T2JqKGcsZltjXSl9cmV0dXJuIGR9O1g1MDkuZ2V0VjNFeHRJdGVtSW5mb19BdE9iaj1mdW5jdGlvbihmLGcpe3ZhciBlPXt9O2UucG9zVExWPWc7dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZixnKTtpZihiLmxlbmd0aCE9MiYmYi5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBYLjUwOXYzIEV4dCAoY29kZTowMDEpIn1pZihmLnN1YnN0cihiWzBdLDIpIT0iMDYiKXt0aHJvdyJtYWxmb3JtZWQgWC41MDl2MyBFeHQgKGNvZGU6MDAyKSJ9dmFyIGQ9QVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZixiWzBdKTtlLm9pZD1BU04xSEVYLmhleHRvb2lkc3RyKGQpO2UuY3JpdGljYWw9ZmFsc2U7aWYoYi5sZW5ndGg9PTMpe2UuY3JpdGljYWw9dHJ1ZX12YXIgYz1iW2IubGVuZ3RoLTFdO2lmKGYuc3Vic3RyKGMsMikhPSIwNCIpe3Rocm93Im1hbGZvcm1lZCBYLjUwOXYzIEV4dCAoY29kZTowMDMpIn1lLnBvc1Y9QVNOMUhFWC5nZXRTdGFydFBvc09mVl9BdE9iaihmLGMpO3JldHVybiBlfTtYNTA5LmdldEhleE9mVExWX1YzRXh0VmFsdWU9ZnVuY3Rpb24oYixhKXt2YXIgYz1YNTA5LmdldFBvc09mVExWX1YzRXh0VmFsdWUoYixhKTtpZihjPT0tMSl7cmV0dXJuIiJ9cmV0dXJuIEFTTjFIRVguZ2V0SGV4T2ZUTFZfQXRPYmooYixjKX07WDUwOS5nZXRIZXhPZlZfVjNFeHRWYWx1ZT1mdW5jdGlvbihiLGEpe3ZhciBjPVg1MDkuZ2V0UG9zT2ZUTFZfVjNFeHRWYWx1ZShiLGEpO2lmKGM9PS0xKXtyZXR1cm4iIn1yZXR1cm4gQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooYixjKX07WDUwOS5nZXRQb3NPZlRMVl9WM0V4dFZhbHVlPWZ1bmN0aW9uKGYsYil7dmFyIGQ9YjtpZighYi5tYXRjaCgvXlswLTkuXSskLykpe2Q9S0pVUi5hc24xLng1MDkuT0lELm5hbWUyb2lkKGIpfWlmKGQ9PSIiKXtyZXR1cm4gLTF9dmFyIGM9WDUwOS5nZXRWM0V4dEluZm9MaXN0T2ZDZXJ0SGV4KGYpO2Zvcih2YXIgYT0wO2E8Yy5sZW5ndGg7YSsrKXt2YXIgZT1jW2FdO2lmKGUub2lkPT1kKXtyZXR1cm4gZS5wb3NWfX1yZXR1cm4gLTF9O1g1MDkuS0VZVVNBR0VfTkFNRT1bImRpZ2l0YWxTaWduYXR1cmUiLCJub25SZXB1ZGlhdGlvbiIsImtleUVuY2lwaGVybWVudCIsImRhdGFFbmNpcGhlcm1lbnQiLCJrZXlBZ3JlZW1lbnQiLCJrZXlDZXJ0U2lnbiIsImNSTFNpZ24iLCJlbmNpcGhlck9ubHkiLCJkZWNpcGhlck9ubHkiXTtYNTA5LmdldEV4dEtleVVzYWdlQmluPWZ1bmN0aW9uKGQpe3ZhciBiPVg1MDkuZ2V0SGV4T2ZWX1YzRXh0VmFsdWUoZCwia2V5VXNhZ2UiKTtpZihiPT0iIil7cmV0dXJuIiJ9aWYoYi5sZW5ndGglMiE9MHx8Yi5sZW5ndGg8PTIpe3Rocm93Im1hbGZvcm1lZCBrZXkgdXNhZ2UgdmFsdWUifXZhciBhPXBhcnNlSW50KGIuc3Vic3RyKDAsMikpO3ZhciBjPXBhcnNlSW50KGIuc3Vic3RyKDIpLDE2KS50b1N0cmluZygyKTtyZXR1cm4gYy5zdWJzdHIoMCxjLmxlbmd0aC1hKX07WDUwOS5nZXRFeHRLZXlVc2FnZVN0cmluZz1mdW5jdGlvbihlKXt2YXIgZD1YNTA5LmdldEV4dEtleVVzYWdlQmluKGUpO3ZhciBiPW5ldyBBcnJheSgpO2Zvcih2YXIgYz0wO2M8ZC5sZW5ndGg7YysrKXtpZihkLnN1YnN0cihjLDEpPT0iMSIpe2IucHVzaChYNTA5LktFWVVTQUdFX05BTUVbY10pfX1yZXR1cm4gYi5qb2luKCIsIil9O1g1MDkuZ2V0RXh0QUlBSW5mbz1mdW5jdGlvbihnKXt2YXIgaj17fTtqLm9jc3A9W107ai5jYWlzc3Vlcj1bXTt2YXIgaD1YNTA5LmdldFBvc09mVExWX1YzRXh0VmFsdWUoZywiYXV0aG9yaXR5SW5mb0FjY2VzcyIpO2lmKGg9PS0xKXtyZXR1cm4gbnVsbH1pZihnLnN1YnN0cihoLDIpIT0iMzAiKXt0aHJvdyJtYWxmb3JtZWQgQUlBIEV4dG4gVmFsdWUifXZhciBkPUFTTjFIRVguZ2V0UG9zQXJyYXlPZkNoaWxkcmVuX0F0T2JqKGcsaCk7Zm9yKHZhciBjPTA7YzxkLmxlbmd0aDtjKyspe3ZhciBhPWRbY107dmFyIGI9QVNOMUhFWC5nZXRQb3NBcnJheU9mQ2hpbGRyZW5fQXRPYmooZyxhKTtpZihiLmxlbmd0aCE9Mil7dGhyb3cibWFsZm9ybWVkIEFjY2Vzc0Rlc2NyaXB0aW9uIG9mIEFJQSBFeHRuIn12YXIgZT1iWzBdO3ZhciBmPWJbMV07aWYoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxlKT09IjJiMDYwMTA1MDUwNzMwMDEiKXtpZihnLnN1YnN0cihmLDIpPT0iODYiKXtqLm9jc3AucHVzaChoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxmKSkpfX1pZihBU04xSEVYLmdldEhleE9mVl9BdE9iaihnLGUpPT0iMmIwNjAxMDUwNTA3MzAwMiIpe2lmKGcuc3Vic3RyKGYsMik9PSI4NiIpe2ouY2Fpc3N1ZXIucHVzaChoZXh0b3V0ZjgoQVNOMUhFWC5nZXRIZXhPZlZfQXRPYmooZyxmKSkpfX19cmV0dXJuIGp9OwovKiEgTWlrZSBTYW11ZWwgKGMpIDIwMDkgfCBjb2RlLmdvb2dsZS5jb20vcC9qc29uLXNhbnMtZXZhbAogKi8KdmFyIGpzb25QYXJzZT0oZnVuY3Rpb24oKXt2YXIgZT0iKD86LT9cXGIoPzowfFsxLTldWzAtOV0qKSg/OlxcLlswLTldKyk/KD86W2VFXVsrLV0/WzAtOV0rKT9cXGIpIjt2YXIgaj0nKD86W15cXDAtXFx4MDhcXHgwYS1cXHgxZiJcXFxcXXxcXFxcKD86WyIvXFxcXGJmbnJ0XXx1WzAtOUEtRmEtZl17NH0pKSc7dmFyIGk9Jyg/OiInK2orJyoiKSc7dmFyIGQ9bmV3IFJlZ0V4cCgiKD86ZmFsc2V8dHJ1ZXxudWxsfFtcXHtcXH1cXFtcXF1dfCIrZSsifCIraSsiKSIsImciKTt2YXIgaz1uZXcgUmVnRXhwKCJcXFxcKD86KFtedV0pfHUoLns0fSkpIiwiZyIpO3ZhciBnPXsnIic6JyInLCIvIjoiLyIsIlxcIjoiXFwiLGI6IlxiIixmOiJcZiIsbjoiXG4iLHI6IlxyIix0OiJcdCJ9O2Z1bmN0aW9uIGgobCxtLG4pe3JldHVybiBtP2dbbV06U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChuLDE2KSl9dmFyIGM9bmV3IFN0cmluZygiIik7dmFyIGE9IlxcIjt2YXIgZj17InsiOk9iamVjdCwiWyI6QXJyYXl9O3ZhciBiPU9iamVjdC5oYXNPd25Qcm9wZXJ0eTtyZXR1cm4gZnVuY3Rpb24odSxxKXt2YXIgcD11Lm1hdGNoKGQpO3ZhciB4O3ZhciB2PXBbMF07dmFyIGw9ZmFsc2U7aWYoInsiPT09dil7eD17fX1lbHNle2lmKCJbIj09PXYpe3g9W119ZWxzZXt4PVtdO2w9dHJ1ZX19dmFyIHQ7dmFyIHI9W3hdO2Zvcih2YXIgbz0xLWwsbT1wLmxlbmd0aDtvPG07KytvKXt2PXBbb107dmFyIHc7c3dpdGNoKHYuY2hhckNvZGVBdCgwKSl7ZGVmYXVsdDp3PXJbMF07d1t0fHx3Lmxlbmd0aF09Kyh2KTt0PXZvaWQgMDticmVhaztjYXNlIDM0OnY9di5zdWJzdHJpbmcoMSx2Lmxlbmd0aC0xKTtpZih2LmluZGV4T2YoYSkhPT0tMSl7dj12LnJlcGxhY2UoayxoKX13PXJbMF07aWYoIXQpe2lmKHcgaW5zdGFuY2VvZiBBcnJheSl7dD13Lmxlbmd0aH1lbHNle3Q9dnx8YzticmVha319d1t0XT12O3Q9dm9pZCAwO2JyZWFrO2Nhc2UgOTE6dz1yWzBdO3IudW5zaGlmdCh3W3R8fHcubGVuZ3RoXT1bXSk7dD12b2lkIDA7YnJlYWs7Y2FzZSA5MzpyLnNoaWZ0KCk7YnJlYWs7Y2FzZSAxMDI6dz1yWzBdO3dbdHx8dy5sZW5ndGhdPWZhbHNlO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTEwOnc9clswXTt3W3R8fHcubGVuZ3RoXT1udWxsO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTE2Onc9clswXTt3W3R8fHcubGVuZ3RoXT10cnVlO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTIzOnc9clswXTtyLnVuc2hpZnQod1t0fHx3Lmxlbmd0aF09e30pO3Q9dm9pZCAwO2JyZWFrO2Nhc2UgMTI1OnIuc2hpZnQoKTticmVha319aWYobCl7aWYoci5sZW5ndGghPT0xKXt0aHJvdyBuZXcgRXJyb3IoKX14PXhbMF19ZWxzZXtpZihyLmxlbmd0aCl7dGhyb3cgbmV3IEVycm9yKCl9fWlmKHEpe3ZhciBzPWZ1bmN0aW9uKEMsQil7dmFyIEQ9Q1tCXTtpZihEJiZ0eXBlb2YgRD09PSJvYmplY3QiKXt2YXIgbj1udWxsO2Zvcih2YXIgeiBpbiBEKXtpZihiLmNhbGwoRCx6KSYmRCE9PUMpe3ZhciB5PXMoRCx6KTtpZih5IT09dm9pZCAwKXtEW3pdPXl9ZWxzZXtpZighbil7bj1bXX1uLnB1c2goeil9fX1pZihuKXtmb3IodmFyIEE9bi5sZW5ndGg7LS1BPj0wOyl7ZGVsZXRlIERbbltBXV19fX1yZXR1cm4gcS5jYWxsKEMsQixEKX07eD1zKHsiIjp4fSwiIil9cmV0dXJuIHh9fSkoKTsKLyohIGp3cy0zLjMuMyAoYykgMjAxMy0yMDE1IEtlbmppIFVydXNoaW1hIHwga2p1ci5naXRodWIuY29tL2pzcnNhc2lnbi9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmp3cz09InVuZGVmaW5lZCJ8fCFLSlVSLmp3cyl7S0pVUi5qd3M9e319S0pVUi5qd3MuSldTPWZ1bmN0aW9uKCl7dmFyIGE9S0pVUi5qd3MuSldTO3RoaXMucGFyc2VKV1M9ZnVuY3Rpb24oZSxnKXtpZigodGhpcy5wYXJzZWRKV1MhPT11bmRlZmluZWQpJiYoZ3x8KHRoaXMucGFyc2VkSldTLnNpZ3ZhbEghPT11bmRlZmluZWQpKSl7cmV0dXJufWlmKGUubWF0Y2goL14oW14uXSspXC4oW14uXSspXC4oW14uXSspJC8pPT1udWxsKXt0aHJvdyJKV1Mgc2lnbmF0dXJlIGlzIG5vdCBhIGZvcm0gb2YgJ0hlYWQuUGF5bG9hZC5TaWdWYWx1ZScuIn12YXIgaD1SZWdFeHAuJDE7dmFyIGM9UmVnRXhwLiQyO3ZhciBpPVJlZ0V4cC4kMzt2YXIgaz1oKyIuIitjO3RoaXMucGFyc2VkSldTPXt9O3RoaXMucGFyc2VkSldTLmhlYWRCNjRVPWg7dGhpcy5wYXJzZWRKV1MucGF5bG9hZEI2NFU9Yzt0aGlzLnBhcnNlZEpXUy5zaWd2YWxCNjRVPWk7dGhpcy5wYXJzZWRKV1Muc2k9aztpZighZyl7dmFyIGY9YjY0dXRvaGV4KGkpO3ZhciBkPXBhcnNlQmlnSW50KGYsMTYpO3RoaXMucGFyc2VkSldTLnNpZ3ZhbEg9Zjt0aGlzLnBhcnNlZEpXUy5zaWd2YWxCST1kfXZhciBiPWI2NHV0b3V0ZjgoaCk7dmFyIGo9YjY0dXRvdXRmOChjKTt0aGlzLnBhcnNlZEpXUy5oZWFkUz1iO3RoaXMucGFyc2VkSldTLnBheWxvYWRTPWo7aWYoIWEuaXNTYWZlSlNPTlN0cmluZyhiLHRoaXMucGFyc2VkSldTLCJoZWFkUCIpKXt0aHJvdyJtYWxmb3JtZWQgSlNPTiBzdHJpbmcgZm9yIEpXUyBIZWFkOiAiK2J9fX07S0pVUi5qd3MuSldTLnNpZ249ZnVuY3Rpb24oYSxpLGMsbSxsKXt2YXIgaz1LSlVSLmp3cy5KV1M7dmFyIHEsZSxqO2lmKHR5cGVvZiBpIT0ic3RyaW5nIiYmdHlwZW9mIGkhPSJvYmplY3QiKXt0aHJvdyJzcEhlYWRlciBtdXN0IGJlIEpTT04gc3RyaW5nIG9yIG9iamVjdDogIitpfWlmKHR5cGVvZiBpPT0ib2JqZWN0Iil7ZT1pO3E9SlNPTi5zdHJpbmdpZnkoZSl9aWYodHlwZW9mIGk9PSJzdHJpbmciKXtxPWk7aWYoIWsuaXNTYWZlSlNPTlN0cmluZyhxKSl7dGhyb3ciSldTIEhlYWQgaXMgbm90IHNhZmUgSlNPTiBzdHJpbmc6ICIrcX1lPWsucmVhZFNhZmVKU09OU3RyaW5nKHEpfWo9YztpZih0eXBlb2YgYz09Im9iamVjdCIpe2o9SlNPTi5zdHJpbmdpZnkoYyl9aWYoKGE9PSIifHxhPT1udWxsKSYmZS5hbGchPT11bmRlZmluZWQpe2E9ZS5hbGd9aWYoKGEhPSIiJiZhIT1udWxsKSYmZS5hbGc9PT11bmRlZmluZWQpe2UuYWxnPWE7cT1KU09OLnN0cmluZ2lmeShlKX1pZihhIT09ZS5hbGcpe3Rocm93ImFsZyBhbmQgc0hlYWRlci5hbGcgZG9lc24ndCBtYXRjaDogIithKyIhPSIrZS5hbGd9dmFyIGQ9bnVsbDtpZihrLmp3c2FsZzJzaWdhbGdbYV09PT11bmRlZmluZWQpe3Rocm93InVuc3VwcG9ydGVkIGFsZyBuYW1lOiAiK2F9ZWxzZXtkPWsuandzYWxnMnNpZ2FsZ1thXX12YXIgYj11dGY4dG9iNjR1KHEpO3ZhciBnPXV0Zjh0b2I2NHUoaik7dmFyIG89YisiLiIrZzt2YXIgbj0iIjtpZihkLnN1YnN0cigwLDQpPT0iSG1hYyIpe2lmKG09PT11bmRlZmluZWQpe3Rocm93Im1hYyBrZXkgc2hhbGwgYmUgc3BlY2lmaWVkIGZvciBIUyogYWxnIn12YXIgaD1uZXcgS0pVUi5jcnlwdG8uTWFjKHthbGc6ZCxwcm92OiJjcnlwdG9qcyIscGFzczptfSk7aC51cGRhdGVTdHJpbmcobyk7bj1oLmRvRmluYWwoKX1lbHNle2lmKGQuaW5kZXhPZigid2l0aEVDRFNBIikhPS0xKXt2YXIgcD1uZXcgS0pVUi5jcnlwdG8uU2lnbmF0dXJlKHthbGc6ZH0pO3AuaW5pdChtLGwpO3AudXBkYXRlU3RyaW5nKG8pO2hBU04xU2lnPXAuc2lnbigpO249S0pVUi5jcnlwdG8uRUNEU0EuYXNuMVNpZ1RvQ29uY2F0U2lnKGhBU04xU2lnKX1lbHNle2lmKGQhPSJub25lIil7dmFyIHA9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOmR9KTtwLmluaXQobSxsKTtwLnVwZGF0ZVN0cmluZyhvKTtuPXAuc2lnbigpfX19dmFyIGY9aGV4dG9iNjR1KG4pO3JldHVybiBvKyIuIitmfTtLSlVSLmp3cy5KV1MudmVyaWZ5PWZ1bmN0aW9uKHAsdCxqKXt2YXIgbT1LSlVSLmp3cy5KV1M7dmFyIHE9cC5zcGxpdCgiLiIpO3ZhciBkPXFbMF07dmFyIGw9cVsxXTt2YXIgYj1kKyIuIitsO3ZhciByPWI2NHV0b2hleChxWzJdKTt2YXIgaT1tLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KHFbMF0pKTt2YXIgaD1udWxsO3ZhciBzPW51bGw7aWYoaS5hbGc9PT11bmRlZmluZWQpe3Rocm93ImFsZ29yaXRobSBub3Qgc3BlY2lmaWVkIGluIGhlYWRlciJ9ZWxzZXtoPWkuYWxnO3M9aC5zdWJzdHIoMCwyKX1pZihqIT1udWxsJiZPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaik9PT0iW29iamVjdCBBcnJheV0iJiZqLmxlbmd0aD4wKXt2YXIgYz0iOiIrai5qb2luKCI6IikrIjoiO2lmKGMuaW5kZXhPZigiOiIraCsiOiIpPT0tMSl7dGhyb3ciYWxnb3JpdGhtICciK2grIicgbm90IGFjY2VwdGVkIGluIHRoZSBsaXN0In19aWYoaCE9Im5vbmUiJiZ0PT09bnVsbCl7dGhyb3cia2V5IHNoYWxsIGJlIHNwZWNpZmllZCB0byB2ZXJpZnkuIn1pZih0eXBlb2YgdD09InN0cmluZyImJnQuaW5kZXhPZigiLS0tLS1CRUdJTiAiKSE9LTEpe3Q9S0VZVVRJTC5nZXRLZXkodCl9aWYocz09IlJTInx8cz09IlBTIil7aWYoISh0IGluc3RhbmNlb2YgUlNBS2V5KSl7dGhyb3cia2V5IHNoYWxsIGJlIGEgUlNBS2V5IG9iaiBmb3IgUlMqIGFuZCBQUyogYWxncyJ9fWlmKHM9PSJFUyIpe2lmKCEodCBpbnN0YW5jZW9mIEtKVVIuY3J5cHRvLkVDRFNBKSl7dGhyb3cia2V5IHNoYWxsIGJlIGEgRUNEU0Egb2JqIGZvciBFUyogYWxncyJ9fWlmKGg9PSJub25lIil7fXZhciBuPW51bGw7aWYobS5qd3NhbGcyc2lnYWxnW2kuYWxnXT09PXVuZGVmaW5lZCl7dGhyb3cidW5zdXBwb3J0ZWQgYWxnIG5hbWU6ICIraH1lbHNle249bS5qd3NhbGcyc2lnYWxnW2hdfWlmKG49PSJub25lIil7dGhyb3cibm90IHN1cHBvcnRlZCJ9ZWxzZXtpZihuLnN1YnN0cigwLDQpPT0iSG1hYyIpe3ZhciBrPW51bGw7aWYodD09PXVuZGVmaW5lZCl7dGhyb3ciaGV4YWRlY2ltYWwga2V5IHNoYWxsIGJlIHNwZWNpZmllZCBmb3IgSE1BQyJ9dmFyIGc9bmV3IEtKVVIuY3J5cHRvLk1hYyh7YWxnOm4scGFzczp0fSk7Zy51cGRhdGVTdHJpbmcoYik7az1nLmRvRmluYWwoKTtyZXR1cm4gcj09a31lbHNle2lmKG4uaW5kZXhPZigid2l0aEVDRFNBIikhPS0xKXt2YXIgZj1udWxsO3RyeXtmPUtKVVIuY3J5cHRvLkVDRFNBLmNvbmNhdFNpZ1RvQVNOMVNpZyhyKX1jYXRjaChvKXtyZXR1cm4gZmFsc2V9dmFyIGU9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOm59KTtlLmluaXQodCk7ZS51cGRhdGVTdHJpbmcoYik7cmV0dXJuIGUudmVyaWZ5KGYpfWVsc2V7dmFyIGU9bmV3IEtKVVIuY3J5cHRvLlNpZ25hdHVyZSh7YWxnOm59KTtlLmluaXQodCk7ZS51cGRhdGVTdHJpbmcoYik7cmV0dXJuIGUudmVyaWZ5KHIpfX19fTtLSlVSLmp3cy5KV1MucGFyc2U9ZnVuY3Rpb24oZyl7dmFyIGM9Zy5zcGxpdCgiLiIpO3ZhciBiPXt9O3ZhciBmLGUsZDtpZihjLmxlbmd0aCE9MiYmYy5sZW5ndGghPTMpe3Rocm93Im1hbGZvcm1lZCBzSldTOiB3cm9uZyBudW1iZXIgb2YgJy4nIHNwbGl0dGVkIGVsZW1lbnRzIn1mPWNbMF07ZT1jWzFdO2lmKGMubGVuZ3RoPT0zKXtkPWNbMl19Yi5oZWFkZXJPYmo9S0pVUi5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGYpKTtiLnBheWxvYWRPYmo9S0pVUi5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGUpKTtiLmhlYWRlclBQPUpTT04uc3RyaW5naWZ5KGIuaGVhZGVyT2JqLG51bGwsIiAgIik7aWYoYi5wYXlsb2FkT2JqPT1udWxsKXtiLnBheWxvYWRQUD1iNjR1dG91dGY4KGUpfWVsc2V7Yi5wYXlsb2FkUFA9SlNPTi5zdHJpbmdpZnkoYi5wYXlsb2FkT2JqLG51bGwsIiAgIil9aWYoZCE9PXVuZGVmaW5lZCl7Yi5zaWdIZXg9YjY0dXRvaGV4KGQpfXJldHVybiBifTtLSlVSLmp3cy5KV1MudmVyaWZ5SldUPWZ1bmN0aW9uKGQsaixsKXt2YXIgaD1LSlVSLmp3cy5KV1M7dmFyIGk9ZC5zcGxpdCgiLiIpO3ZhciBjPWlbMF07dmFyIGc9aVsxXTt2YXIgbT1jKyIuIitnO3ZhciBrPWI2NHV0b2hleChpWzJdKTt2YXIgZj1oLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGMpKTt2YXIgZT1oLnJlYWRTYWZlSlNPTlN0cmluZyhiNjR1dG91dGY4KGcpKTtpZihmLmFsZz09PXVuZGVmaW5lZCl7cmV0dXJuIGZhbHNlfWlmKGwuYWxnPT09dW5kZWZpbmVkKXt0aHJvdyJhY2NlcHRGaWVsZC5hbGcgc2hhbGwgYmUgc3BlY2lmaWVkIn1pZighaC5pbkFycmF5KGYuYWxnLGwuYWxnKSl7cmV0dXJuIGZhbHNlfWlmKGUuaXNzIT09dW5kZWZpbmVkJiZ0eXBlb2YgbC5pc3M9PT0ib2JqZWN0Iil7aWYoIWguaW5BcnJheShlLmlzcyxsLmlzcykpe3JldHVybiBmYWxzZX19aWYoZS5zdWIhPT11bmRlZmluZWQmJnR5cGVvZiBsLnN1Yj09PSJvYmplY3QiKXtpZighaC5pbkFycmF5KGUuc3ViLGwuc3ViKSl7cmV0dXJuIGZhbHNlfX1pZihlLmF1ZCE9PXVuZGVmaW5lZCYmdHlwZW9mIGwuYXVkPT09Im9iamVjdCIpe2lmKHR5cGVvZiBlLmF1ZD09InN0cmluZyIpe2lmKCFoLmluQXJyYXkoZS5hdWQsbC5hdWQpKXtyZXR1cm4gZmFsc2V9fWVsc2V7aWYodHlwZW9mIGUuYXVkPT0ib2JqZWN0Iil7aWYoIWguaW5jbHVkZWRBcnJheShlLmF1ZCxsLmF1ZCkpe3JldHVybiBmYWxzZX19fX12YXIgYj1LSlVSLmp3cy5JbnREYXRlLmdldE5vdygpO2lmKGwudmVyaWZ5QXQhPT11bmRlZmluZWQmJnR5cGVvZiBsLnZlcmlmeUF0PT0ibnVtYmVyIil7Yj1sLnZlcmlmeUF0fWlmKGUuZXhwIT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5leHA9PSJudW1iZXIiKXtpZihlLmV4cDxiKXtyZXR1cm4gZmFsc2V9fWlmKGUubmJmIT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5uYmY9PSJudW1iZXIiKXtpZihiPGUubmJmKXtyZXR1cm4gZmFsc2V9fWlmKGUuaWF0IT09dW5kZWZpbmVkJiZ0eXBlb2YgZS5pYXQ9PSJudW1iZXIiKXtpZihiPGUuaWF0KXtyZXR1cm4gZmFsc2V9fWlmKGUuanRpIT09dW5kZWZpbmVkJiZsLmp0aSE9PXVuZGVmaW5lZCl7aWYoZS5qdGkhPT1sLmp0aSl7cmV0dXJuIGZhbHNlfX1pZighS0pVUi5qd3MuSldTLnZlcmlmeShkLGosbC5hbGcpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9O0tKVVIuandzLkpXUy5pbmNsdWRlZEFycmF5PWZ1bmN0aW9uKGIsYSl7dmFyIGQ9S0pVUi5qd3MuSldTLmluQXJyYXk7aWYoYj09PW51bGwpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgYiE9PSJvYmplY3QiKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIGIubGVuZ3RoIT09Im51bWJlciIpe3JldHVybiBmYWxzZX1mb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7aWYoIWQoYltjXSxhKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX07S0pVUi5qd3MuSldTLmluQXJyYXk9ZnVuY3Rpb24oZCxiKXtpZihiPT09bnVsbCl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBiIT09Im9iamVjdCIpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgYi5sZW5ndGghPT0ibnVtYmVyIil7cmV0dXJuIGZhbHNlfWZvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXtpZihiW2NdPT1kKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfTtLSlVSLmp3cy5KV1MuandzYWxnMnNpZ2FsZz17SFMyNTY6IkhtYWNTSEEyNTYiLEhTMzg0OiJIbWFjU0hBMzg0IixIUzUxMjoiSG1hY1NIQTUxMiIsUlMyNTY6IlNIQTI1NndpdGhSU0EiLFJTMzg0OiJTSEEzODR3aXRoUlNBIixSUzUxMjoiU0hBNTEyd2l0aFJTQSIsRVMyNTY6IlNIQTI1NndpdGhFQ0RTQSIsRVMzODQ6IlNIQTM4NHdpdGhFQ0RTQSIsUFMyNTY6IlNIQTI1NndpdGhSU0FhbmRNR0YxIixQUzM4NDoiU0hBMzg0d2l0aFJTQWFuZE1HRjEiLFBTNTEyOiJTSEE1MTJ3aXRoUlNBYW5kTUdGMSIsbm9uZToibm9uZSIsfTtLSlVSLmp3cy5KV1MuaXNTYWZlSlNPTlN0cmluZz1mdW5jdGlvbihjLGIsZCl7dmFyIGU9bnVsbDt0cnl7ZT1qc29uUGFyc2UoYyk7aWYodHlwZW9mIGUhPSJvYmplY3QiKXtyZXR1cm4gMH1pZihlLmNvbnN0cnVjdG9yPT09QXJyYXkpe3JldHVybiAwfWlmKGIpe2JbZF09ZX1yZXR1cm4gMX1jYXRjaChhKXtyZXR1cm4gMH19O0tKVVIuandzLkpXUy5yZWFkU2FmZUpTT05TdHJpbmc9ZnVuY3Rpb24oYil7dmFyIGM9bnVsbDt0cnl7Yz1qc29uUGFyc2UoYik7aWYodHlwZW9mIGMhPSJvYmplY3QiKXtyZXR1cm4gbnVsbH1pZihjLmNvbnN0cnVjdG9yPT09QXJyYXkpe3JldHVybiBudWxsfXJldHVybiBjfWNhdGNoKGEpe3JldHVybiBudWxsfX07S0pVUi5qd3MuSldTLmdldEVuY29kZWRTaWduYXR1cmVWYWx1ZUZyb21KV1M9ZnVuY3Rpb24oYSl7aWYoYS5tYXRjaCgvXlteLl0rXC5bXi5dK1wuKFteLl0rKSQvKT09bnVsbCl7dGhyb3ciSldTIHNpZ25hdHVyZSBpcyBub3QgYSBmb3JtIG9mICdIZWFkLlBheWxvYWQuU2lnVmFsdWUnLiJ9cmV0dXJuIFJlZ0V4cC4kMX07S0pVUi5qd3MuSldTLmdldEpXS3RodW1icHJpbnQ9ZnVuY3Rpb24oZCl7aWYoZC5rdHkhPT0iUlNBIiYmZC5rdHkhPT0iRUMiJiZkLmt0eSE9PSJvY3QiKXt0aHJvdyJ1bnN1cHBvcnRlZCBhbGdvcml0aG0gZm9yIEpXSyBUaHVtcHJpbnQifXZhciBhPSJ7IjtpZihkLmt0eT09PSJSU0EiKXtpZih0eXBlb2YgZC5uIT0ic3RyaW5nInx8dHlwZW9mIGQuZSE9InN0cmluZyIpe3Rocm93Indyb25nIG4gYW5kIGUgdmFsdWUgZm9yIFJTQSBrZXkifWErPSciZSI6IicrZC5lKyciLCc7YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJuIjoiJytkLm4rJyJ9J31lbHNle2lmKGQua3R5PT09IkVDIil7aWYodHlwZW9mIGQuY3J2IT0ic3RyaW5nInx8dHlwZW9mIGQueCE9InN0cmluZyJ8fHR5cGVvZiBkLnkhPSJzdHJpbmciKXt0aHJvdyJ3cm9uZyBjcnYsIHggYW5kIHkgdmFsdWUgZm9yIEVDIGtleSJ9YSs9JyJjcnYiOiInK2QuY3J2KyciLCc7YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJ4IjoiJytkLngrJyIsJzthKz0nInkiOiInK2QueSsnIn0nfWVsc2V7aWYoZC5rdHk9PT0ib2N0Iil7aWYodHlwZW9mIGQuayE9InN0cmluZyIpe3Rocm93Indyb25nIGsgdmFsdWUgZm9yIG9jdChzeW1tZXRyaWMpIGtleSJ9YSs9JyJrdHkiOiInK2Qua3R5KyciLCc7YSs9JyJrIjoiJytkLmsrJyJ9J319fXZhciBiPXJzdHJ0b2hleChhKTt2YXIgYz1LSlVSLmNyeXB0by5VdGlsLmhhc2hIZXgoYiwic2hhMjU2Iik7dmFyIGU9aGV4dG9iNjR1KGMpO3JldHVybiBlfTtLSlVSLmp3cy5JbnREYXRlPXt9O0tKVVIuandzLkludERhdGUuZ2V0PWZ1bmN0aW9uKGEpe2lmKGE9PSJub3ciKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKX1lbHNle2lmKGE9PSJub3cgKyAxaG91ciIpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldE5vdygpKzYwKjYwfWVsc2V7aWYoYT09Im5vdyArIDFkYXkiKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKSs2MCo2MCoyNH1lbHNle2lmKGE9PSJub3cgKyAxbW9udGgiKXtyZXR1cm4gS0pVUi5qd3MuSW50RGF0ZS5nZXROb3coKSs2MCo2MCoyNCozMH1lbHNle2lmKGE9PSJub3cgKyAxeWVhciIpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldE5vdygpKzYwKjYwKjI0KjM2NX1lbHNle2lmKGEubWF0Y2goL1okLykpe3JldHVybiBLSlVSLmp3cy5JbnREYXRlLmdldFp1bHUoYSl9ZWxzZXtpZihhLm1hdGNoKC9eWzAtOV0rJC8pKXtyZXR1cm4gcGFyc2VJbnQoYSl9fX19fX19dGhyb3cidW5zdXBwb3J0ZWQgZm9ybWF0OiAiK2F9O0tKVVIuandzLkludERhdGUuZ2V0WnVsdT1mdW5jdGlvbihsKXt2YXIgaztpZihrPWwubWF0Y2goLyhcZCspKFxkXGQpKFxkXGQpKFxkXGQpKFxkXGQpKFxkXGQpWi8pKXt2YXIgYj1SZWdFeHAuJDE7dmFyIGk9cGFyc2VJbnQoYik7aWYoYi5sZW5ndGg9PTQpe31lbHNle2lmKGIubGVuZ3RoPT0yKXtpZig1MDw9aSYmaTwxMDApe2k9MTkwMCtpfWVsc2V7aWYoMDw9aSYmaTw1MCl7aT0yMDAwK2l9ZWxzZXt0aHJvdyJtYWxmb3JtZWQgeWVhciBzdHJpbmcgZm9yIFVUQ1RpbWUifX19ZWxzZXt0aHJvdyJtYWxmb3JtZWQgeWVhciBzdHJpbmcifX12YXIgZz1wYXJzZUludChSZWdFeHAuJDIpLTE7dmFyIGo9cGFyc2VJbnQoUmVnRXhwLiQzKTt2YXIgYz1wYXJzZUludChSZWdFeHAuJDQpO3ZhciBlPXBhcnNlSW50KFJlZ0V4cC4kNSk7dmFyIGY9cGFyc2VJbnQoUmVnRXhwLiQ2KTt2YXIgaD1uZXcgRGF0ZShEYXRlLlVUQyhpLGcsaixjLGUsZikpO3JldHVybiB+fihoLzEwMDApfXRocm93InVuc3VwcG9ydGVkIGZvcm1hdDogIitsfTtLSlVSLmp3cy5JbnREYXRlLmdldE5vdz1mdW5jdGlvbigpe3ZhciBhPX5+KG5ldyBEYXRlKCkvMTAwMCk7cmV0dXJuIGF9O0tKVVIuandzLkludERhdGUuaW50RGF0ZTJVVENTdHJpbmc9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IERhdGUoYSoxMDAwKTtyZXR1cm4gYi50b1VUQ1N0cmluZygpfTtLSlVSLmp3cy5JbnREYXRlLmludERhdGUyWnVsdT1mdW5jdGlvbihlKXt2YXIgaT1uZXcgRGF0ZShlKjEwMDApO3ZhciBoPSgiMDAwMCIraS5nZXRVVENGdWxsWWVhcigpKS5zbGljZSgtNCk7dmFyIGc9KCIwMCIrKGkuZ2V0VVRDTW9udGgoKSsxKSkuc2xpY2UoLTIpO3ZhciBiPSgiMDAiK2kuZ2V0VVRDRGF0ZSgpKS5zbGljZSgtMik7dmFyIGE9KCIwMCIraS5nZXRVVENIb3VycygpKS5zbGljZSgtMik7dmFyIGM9KCIwMCIraS5nZXRVVENNaW51dGVzKCkpLnNsaWNlKC0yKTt2YXIgZj0oIjAwIitpLmdldFVUQ1NlY29uZHMoKSkuc2xpY2UoLTIpO3JldHVybiBoK2crYithK2MrZisiWiJ9OwovKiEgandzanMtMi4wLjEgKGMpIDIwMTAtMjAxNSBLZW5qaSBVcnVzaGltYSB8IGtqdXIuZ2l0aHViLmNvbS9qc2p3cy9saWNlbnNlCiAqLwppZih0eXBlb2YgS0pVUj09InVuZGVmaW5lZCJ8fCFLSlVSKXtLSlVSPXt9fWlmKHR5cGVvZiBLSlVSLmp3cz09InVuZGVmaW5lZCJ8fCFLSlVSLmp3cyl7S0pVUi5qd3M9e319S0pVUi5qd3MuSldTSlM9ZnVuY3Rpb24oKXt2YXIgYT1LSlVSLmp3cy5KV1M7dGhpcy5hSGVhZGVyPVtdO3RoaXMuc1BheWxvYWQ9IiI7dGhpcy5hU2lnbmF0dXJlPVtdO3RoaXMuaW5pdD1mdW5jdGlvbigpe3RoaXMuYUhlYWRlcj1bXTt0aGlzLnNQYXlsb2FkPSIiO3RoaXMuYVNpZ25hdHVyZT1bXX07dGhpcy5pbml0V2l0aEpXUz1mdW5jdGlvbihjKXt0aGlzLmluaXQoKTt2YXIgYj1uZXcgS0pVUi5qd3MuSldTKCk7Yi5wYXJzZUpXUyhjKTt0aGlzLmFIZWFkZXIucHVzaChiLnBhcnNlZEpXUy5oZWFkQjY0VSk7dGhpcy5zUGF5bG9hZD1iLnBhcnNlZEpXUy5wYXlsb2FkQjY0VTt0aGlzLmFTaWduYXR1cmUucHVzaChiLnBhcnNlZEpXUy5zaWd2YWxCNjRVKX07dGhpcy5hZGRTaWduYXR1cmVCeUhlYWRlcktleT1mdW5jdGlvbihlLGIpe3ZhciBkPWI2NHV0b3V0ZjgodGhpcy5zUGF5bG9hZCk7dmFyIGM9bmV3IEtKVVIuandzLkpXUygpO3ZhciBmPWMuZ2VuZXJhdGVKV1NCeVAxUHJ2S2V5KGUsZCxiKTt0aGlzLmFIZWFkZXIucHVzaChjLnBhcnNlZEpXUy5oZWFkQjY0VSk7dGhpcy5hU2lnbmF0dXJlLnB1c2goYy5wYXJzZWRKV1Muc2lndmFsQjY0VSl9O3RoaXMuYWRkU2lnbmF0dXJlQnlIZWFkZXJQYXlsb2FkS2V5PWZ1bmN0aW9uKGUsZCxiKXt2YXIgYz1uZXcgS0pVUi5qd3MuSldTKCk7dmFyIGY9Yy5nZW5lcmF0ZUpXU0J5UDFQcnZLZXkoZSxkLGIpO3RoaXMuYUhlYWRlci5wdXNoKGMucGFyc2VkSldTLmhlYWRCNjRVKTt0aGlzLnNQYXlsb2FkPWMucGFyc2VkSldTLnBheWxvYWRCNjRVO3RoaXMuYVNpZ25hdHVyZS5wdXNoKGMucGFyc2VkSldTLnNpZ3ZhbEI2NFUpfTt0aGlzLnZlcmlmeVdpdGhDZXJ0cz1mdW5jdGlvbihjKXtpZih0aGlzLmFIZWFkZXIubGVuZ3RoIT1jLmxlbmd0aCl7dGhyb3cibnVtIGhlYWRlcnMgZG9lcyBub3QgbWF0Y2ggd2l0aCBudW0gY2VydHMifWlmKHRoaXMuYVNpZ25hdHVyZS5sZW5ndGghPWMubGVuZ3RoKXt0aHJvdyJudW0gc2lnbmF0dXJlcyBkb2VzIG5vdCBtYXRjaCB3aXRoIG51bSBjZXJ0cyJ9dmFyIGs9dGhpcy5zUGF5bG9hZDt2YXIgZz0iIjtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTt2YXIgZj10aGlzLmFIZWFkZXJbZF07dmFyIG09dGhpcy5hU2lnbmF0dXJlW2RdO3ZhciBiPWYrIi4iK2srIi4iK207dmFyIGo9bmV3IEtKVVIuandzLkpXUygpO3RyeXt2YXIgbD1qLnZlcmlmeUpXU0J5UGVtWDUwOUNlcnQoYixlKTtpZihsIT0xKXtnKz0oZCsxKSsidGggc2lnbmF0dXJlIHVubWF0Y2guICJ9fWNhdGNoKGgpe2crPShkKzEpKyJ0aCBzaWduYXR1cmUgZmFpbCgiK2grIikuICJ9fWlmKGc9PSIiKXtyZXR1cm4gMX1lbHNle3Rocm93IGd9fTt0aGlzLnJlYWRKV1NKUz1mdW5jdGlvbihiKXt2YXIgYz1hLnJlYWRTYWZlSlNPTlN0cmluZyhiKTtpZihjPT1udWxsKXt0aHJvdyJhcmd1bWVudCBpcyBub3QgSlNPTiBzdHJpbmc6ICIrYn10aGlzLmFIZWFkZXI9Yy5oZWFkZXJzO3RoaXMuc1BheWxvYWQ9Yy5wYXlsb2FkO3RoaXMuYVNpZ25hdHVyZT1jLnNpZ25hdHVyZXN9O3RoaXMuZ2V0SlNPTj1mdW5jdGlvbigpe3JldHVybntoZWFkZXJzOnRoaXMuYUhlYWRlcixwYXlsb2FkOnRoaXMuc1BheWxvYWQsc2lnbmF0dXJlczp0aGlzLmFTaWduYXR1cmV9fTt0aGlzLmlzRW1wdHk9ZnVuY3Rpb24oKXtpZih0aGlzLmFIZWFkZXIubGVuZ3RoPT0wKXtyZXR1cm4gMX1yZXR1cm4gMH19OwovKiEgbm9kZXV0aWwtMS4wLjAgKGMpIDIwMTUgS2VuamkgVXJ1c2hpbWEgfCBranVyLmdpdGh1Yi5jb20vanNyc2FzaWduL2xpY2Vuc2UKICovCmZ1bmN0aW9uIHJlYWRGaWxlVVRGOChhKXtyZXR1cm4gcmVxdWlyZSgiZnMiKS5yZWFkRmlsZVN5bmMoYSwidXRmOCIpfWZ1bmN0aW9uIHJlYWRGaWxlSGV4QnlCaW4oYyl7dmFyIGI9cmVxdWlyZSgianNyc2FzaWduIik7dmFyIGE9cmVxdWlyZSgiZnMiKTtyZXR1cm4gYi5yc3RydG9oZXgoYS5yZWFkRmlsZVN5bmMoYywiYmluYXJ5IikpfWZ1bmN0aW9uIHJlYWRGaWxlKGIpe3ZhciBhPXJlcXVpcmUoImZzIik7cmV0dXJuIGEucmVhZEZpbGVTeW5jKGIsImJpbmFyeSIpfWZ1bmN0aW9uIHNhdmVGaWxlKGMsYil7dmFyIGE9cmVxdWlyZSgiZnMiKTthLndyaXRlRmlsZVN5bmMoYyxiLCJiaW5hcnkiKX1mdW5jdGlvbiBzYXZlRmlsZUJpbkJ5SGV4KGUsYil7dmFyIGE9cmVxdWlyZSgiZnMiKTt2YXIgYz1yZXF1aXJlKCJqc3JzYXNpZ24iKTt2YXIgZD1jLmhleHRvcnN0cihiKTthLndyaXRlRmlsZVN5bmMoZSxkLCJiaW5hcnkiKX07CgpleHBvcnRzLkJpZ0ludGVnZXIgPSBCaWdJbnRlZ2VyOwpleHBvcnRzLlJTQUtleSA9IFJTQUtleTsKZXhwb3J0cy5FQ0RTQSA9IEtKVVIuY3J5cHRvLkVDRFNBOwpleHBvcnRzLkRTQSA9IEtKVVIuY3J5cHRvLkRTQTsKZXhwb3J0cy5TaWduYXR1cmUgPSBLSlVSLmNyeXB0by5TaWduYXR1cmU7CmV4cG9ydHMuTWVzc2FnZURpZ2VzdCA9IEtKVVIuY3J5cHRvLk1lc3NhZ2VEaWdlc3Q7CmV4cG9ydHMuTWFjID0gS0pVUi5jcnlwdG8uTWFjOwpleHBvcnRzLktFWVVUSUwgPSBLRVlVVElMOwpleHBvcnRzLkFTTjFIRVggPSBBU04xSEVYOwpleHBvcnRzLlg1MDkgPSBYNTA5OwpleHBvcnRzLkNyeXB0b0pTID0gQ3J5cHRvSlM7CgovLyBleHQvYmFzZTY0LmpzCmV4cG9ydHMuYjY0dG9oZXggPSBiNjR0b2hleDsKZXhwb3J0cy5iNjR0b0JBID0gYjY0dG9CQTsKCi8vIGJhc2U2NHguanMKZXhwb3J0cy5zdG9CQSA9IHN0b0JBOwpleHBvcnRzLkJBdG9zID0gQkF0b3M7CmV4cG9ydHMuQkF0b2hleCA9IEJBdG9oZXg7CmV4cG9ydHMuc3RvaGV4ID0gc3RvaGV4OwpleHBvcnRzLnN0b2I2NCA9IHN0b2I2NDsKZXhwb3J0cy5zdG9iNjR1ID0gc3RvYjY0dTsKZXhwb3J0cy5iNjR1dG9zID0gYjY0dXRvczsKZXhwb3J0cy5iNjR0b2I2NHUgPSBiNjR0b2I2NHU7CmV4cG9ydHMuYjY0dXRvYjY0ID0gYjY0dXRvYjY0OwpleHBvcnRzLmhleDJiNjQgPSBoZXgyYjY0OwpleHBvcnRzLmhleHRvYjY0dSA9IGhleHRvYjY0dTsKZXhwb3J0cy5iNjR1dG9oZXggPSBiNjR1dG9oZXg7CmV4cG9ydHMuYjY0dG9oZXggPSBiNjR0b2hleDsKZXhwb3J0cy51dGY4dG9iNjR1ID0gdXRmOHRvYjY0dTsKZXhwb3J0cy5iNjR1dG91dGY4ID0gYjY0dXRvdXRmODsKZXhwb3J0cy51dGY4dG9iNjQgPSB1dGY4dG9iNjQ7CmV4cG9ydHMuYjY0dG91dGY4ID0gYjY0dG91dGY4OwpleHBvcnRzLnV0Zjh0b2hleCA9IHV0Zjh0b2hleDsKZXhwb3J0cy5oZXh0b3V0ZjggPSBoZXh0b3V0Zjg7CmV4cG9ydHMuaGV4dG9yc3RyID0gaGV4dG9yc3RyOwpleHBvcnRzLnJzdHJ0b2hleCA9IHJzdHJ0b2hleDsKZXhwb3J0cy5uZXdsaW5lX3RvVW5peCA9IG5ld2xpbmVfdG9Vbml4OwpleHBvcnRzLm5ld2xpbmVfdG9Eb3MgPSBuZXdsaW5lX3RvRG9zOwpleHBvcnRzLmludGFyeXN0cnRvaGV4ID0gaW50YXJ5c3RydG9oZXg7CmV4cG9ydHMuc3RyZGlmZmlkeCA9IHN0cmRpZmZpZHg7CgpleHBvcnRzLmNyeXB0byA9IEtKVVIuY3J5cHRvOwpleHBvcnRzLmFzbjEgPSBLSlVSLmFzbjE7CmV4cG9ydHMuandzID0gS0pVUi5qd3M7CgpleHBvcnRzLnJlYWRGaWxlVVRGOCA9IHJlYWRGaWxlVVRGODsKZXhwb3J0cy5yZWFkRmlsZUhleEJ5QmluID0gcmVhZEZpbGVIZXhCeUJpbjsKZXhwb3J0cy5yZWFkRmlsZSA9IHJlYWRGaWxlOwpleHBvcnRzLnNhdmVGaWxlID0gc2F2ZUZpbGU7CmV4cG9ydHMuc2F2ZUZpbGVCaW5CeUhleCA9IHNhdmVGaWxlQmluQnlIZXg7CgoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzAsImZzIjo2OCwianNyc2FzaWduIjoxMzJ9XSwxMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgYm4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgYnJvcmFuZCA9IHJlcXVpcmUoJ2Jyb3JhbmQnKTsKCmZ1bmN0aW9uIE1pbGxlclJhYmluKHJhbmQpIHsKICB0aGlzLnJhbmQgPSByYW5kIHx8IG5ldyBicm9yYW5kLlJhbmQoKTsKfQptb2R1bGUuZXhwb3J0cyA9IE1pbGxlclJhYmluOwoKTWlsbGVyUmFiaW4uY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKHJhbmQpIHsKICByZXR1cm4gbmV3IE1pbGxlclJhYmluKHJhbmQpOwp9OwoKTWlsbGVyUmFiaW4ucHJvdG90eXBlLl9yYW5kID0gZnVuY3Rpb24gX3JhbmQobikgewogIHZhciBsZW4gPSBuLmJpdExlbmd0aCgpOwogIHZhciBidWYgPSB0aGlzLnJhbmQuZ2VuZXJhdGUoTWF0aC5jZWlsKGxlbiAvIDgpKTsKCiAgLy8gU2V0IGxvdyBiaXRzCiAgYnVmWzBdIHw9IDM7CgogIC8vIE1hc2sgaGlnaCBiaXRzCiAgdmFyIG1hc2sgPSBsZW4gJiAweDc7CiAgaWYgKG1hc2sgIT09IDApCiAgICBidWZbYnVmLmxlbmd0aCAtIDFdID4+PSA3IC0gbWFzazsKCiAgcmV0dXJuIG5ldyBibihidWYpOwp9CgpNaWxsZXJSYWJpbi5wcm90b3R5cGUudGVzdCA9IGZ1bmN0aW9uIHRlc3QobiwgaywgY2IpIHsKICB2YXIgbGVuID0gbi5iaXRMZW5ndGgoKTsKICB2YXIgcmVkID0gYm4ubW9udChuKTsKICB2YXIgcm9uZSA9IG5ldyBibigxKS50b1JlZChyZWQpOwoKICBpZiAoIWspCiAgICBrID0gTWF0aC5tYXgoMSwgKGxlbiAvIDQ4KSB8IDApOwoKICAvLyBGaW5kIGQgYW5kIHMsIChuIC0gMSkgPSAoMiBeIHMpICogZDsKICB2YXIgbjEgPSBuLnN1Ym4oMSk7CiAgdmFyIG4yID0gbjEuc3VibigxKTsKICBmb3IgKHZhciBzID0gMDsgIW4xLnRlc3RuKHMpOyBzKyspIHt9CiAgdmFyIGQgPSBuLnNocm4ocyk7CgogIHZhciBybjEgPSBuMS50b1JlZChyZWQpOwoKICB2YXIgcHJpbWUgPSB0cnVlOwogIGZvciAoOyBrID4gMDsgay0tKSB7CiAgICB2YXIgYSA9IHRoaXMuX3JhbmQobjIpOwogICAgaWYgKGNiKQogICAgICBjYihhKTsKCiAgICB2YXIgeCA9IGEudG9SZWQocmVkKS5yZWRQb3coZCk7CiAgICBpZiAoeC5jbXAocm9uZSkgPT09IDAgfHwgeC5jbXAocm4xKSA9PT0gMCkKICAgICAgY29udGludWU7CgogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzOyBpKyspIHsKICAgICAgeCA9IHgucmVkU3FyKCk7CgogICAgICBpZiAoeC5jbXAocm9uZSkgPT09IDApCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoeC5jbXAocm4xKSA9PT0gMCkKICAgICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoaSA9PT0gcykKICAgICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHByaW1lOwp9OwoKTWlsbGVyUmFiaW4ucHJvdG90eXBlLmdldERpdmlzb3IgPSBmdW5jdGlvbiBnZXREaXZpc29yKG4sIGspIHsKICB2YXIgbGVuID0gbi5iaXRMZW5ndGgoKTsKICB2YXIgcmVkID0gYm4ubW9udChuKTsKICB2YXIgcm9uZSA9IG5ldyBibigxKS50b1JlZChyZWQpOwoKICBpZiAoIWspCiAgICBrID0gTWF0aC5tYXgoMSwgKGxlbiAvIDQ4KSB8IDApOwoKICAvLyBGaW5kIGQgYW5kIHMsIChuIC0gMSkgPSAoMiBeIHMpICogZDsKICB2YXIgbjEgPSBuLnN1Ym4oMSk7CiAgdmFyIG4yID0gbjEuc3VibigxKTsKICBmb3IgKHZhciBzID0gMDsgIW4xLnRlc3RuKHMpOyBzKyspIHt9CiAgdmFyIGQgPSBuLnNocm4ocyk7CgogIHZhciBybjEgPSBuMS50b1JlZChyZWQpOwoKICBmb3IgKDsgayA+IDA7IGstLSkgewogICAgdmFyIGEgPSB0aGlzLl9yYW5kKG4yKTsKCiAgICB2YXIgZyA9IG4uZ2NkKGEpOwogICAgaWYgKGcuY21wbigxKSAhPT0gMCkKICAgICAgcmV0dXJuIGc7CgogICAgdmFyIHggPSBhLnRvUmVkKHJlZCkucmVkUG93KGQpOwogICAgaWYgKHguY21wKHJvbmUpID09PSAwIHx8IHguY21wKHJuMSkgPT09IDApCiAgICAgIGNvbnRpbnVlOwoKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgczsgaSsrKSB7CiAgICAgIHggPSB4LnJlZFNxcigpOwoKICAgICAgaWYgKHguY21wKHJvbmUpID09PSAwKQogICAgICAgIHJldHVybiB4LmZyb21SZWQoKS5zdWJuKDEpLmdjZChuKTsKICAgICAgaWYgKHguY21wKHJuMSkgPT09IDApCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgaWYgKGkgPT09IHMpIHsKICAgICAgeCA9IHgucmVkU3FyKCk7CiAgICAgIHJldHVybiB4LmZyb21SZWQoKS5zdWJuKDEpLmdjZChuKTsKICAgIH0KICB9CgogIHJldHVybiBmYWxzZTsKfTsKCn0seyJibi5qcyI6NDEsImJyb3JhbmQiOjQyfV0sMTM0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBhc3NlcnQ7CgpmdW5jdGlvbiBhc3NlcnQodmFsLCBtc2cpIHsKICBpZiAoIXZhbCkKICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnKTsKfQoKYXNzZXJ0LmVxdWFsID0gZnVuY3Rpb24gYXNzZXJ0RXF1YWwobCwgciwgbXNnKSB7CiAgaWYgKGwgIT0gcikKICAgIHRocm93IG5ldyBFcnJvcihtc2cgfHwgKCdBc3NlcnRpb24gZmFpbGVkOiAnICsgbCArICcgIT0gJyArIHIpKTsKfTsKCn0se31dLDEzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsiMi4xNi44NDAuMS4xMDEuMy40LjEuMSI6ICJhZXMtMTI4LWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yIjogImFlcy0xMjgtY2JjIiwKIjIuMTYuODQwLjEuMTAxLjMuNC4xLjMiOiAiYWVzLTEyOC1vZmIiLAoiMi4xNi44NDAuMS4xMDEuMy40LjEuNCI6ICJhZXMtMTI4LWNmYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMSI6ICJhZXMtMTkyLWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMiI6ICJhZXMtMTkyLWNiYyIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yMyI6ICJhZXMtMTkyLW9mYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yNCI6ICJhZXMtMTkyLWNmYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MSI6ICJhZXMtMjU2LWVjYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MiI6ICJhZXMtMjU2LWNiYyIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MyI6ICJhZXMtMjU2LW9mYiIsCiIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40NCI6ICJhZXMtMjU2LWNmYiIKfQp9LHt9XSwxMzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L3NlbGYtc2lnbmVkL2Jsb2IvZ2gtcGFnZXMvbGliL2FzbjEuanMKLy8gRmVkb3IsIHlvdSBhcmUgYW1hemluZy4KCnZhciBhc24xID0gcmVxdWlyZSgnYXNuMS5qcycpCgp2YXIgUlNBUHJpdmF0ZUtleSA9IGFzbjEuZGVmaW5lKCdSU0FQcml2YXRlS2V5JywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSwKICAgIHRoaXMua2V5KCdtb2R1bHVzJykuaW50KCksCiAgICB0aGlzLmtleSgncHVibGljRXhwb25lbnQnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcml2YXRlRXhwb25lbnQnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcmltZTEnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdwcmltZTInKS5pbnQoKSwKICAgIHRoaXMua2V5KCdleHBvbmVudDEnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdleHBvbmVudDInKS5pbnQoKSwKICAgIHRoaXMua2V5KCdjb2VmZmljaWVudCcpLmludCgpCiAgKQp9KQpleHBvcnRzLlJTQVByaXZhdGVLZXkgPSBSU0FQcml2YXRlS2V5Cgp2YXIgUlNBUHVibGljS2V5ID0gYXNuMS5kZWZpbmUoJ1JTQVB1YmxpY0tleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCdtb2R1bHVzJykuaW50KCksCiAgICB0aGlzLmtleSgncHVibGljRXhwb25lbnQnKS5pbnQoKQogICkKfSkKZXhwb3J0cy5SU0FQdWJsaWNLZXkgPSBSU0FQdWJsaWNLZXkKCnZhciBQdWJsaWNLZXkgPSBhc24xLmRlZmluZSgnU3ViamVjdFB1YmxpY0tleUluZm8nLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykudXNlKEFsZ29yaXRobUlkZW50aWZpZXIpLAogICAgdGhpcy5rZXkoJ3N1YmplY3RQdWJsaWNLZXknKS5iaXRzdHIoKQogICkKfSkKZXhwb3J0cy5QdWJsaWNLZXkgPSBQdWJsaWNLZXkKCnZhciBBbGdvcml0aG1JZGVudGlmaWVyID0gYXNuMS5kZWZpbmUoJ0FsZ29yaXRobUlkZW50aWZpZXInLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgnYWxnb3JpdGhtJykub2JqaWQoKSwKICAgIHRoaXMua2V5KCdub25lJykubnVsbF8oKS5vcHRpb25hbCgpLAogICAgdGhpcy5rZXkoJ2N1cnZlJykub2JqaWQoKS5vcHRpb25hbCgpLAogICAgdGhpcy5rZXkoJ3BhcmFtcycpLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ3AnKS5pbnQoKSwKICAgICAgdGhpcy5rZXkoJ3EnKS5pbnQoKSwKICAgICAgdGhpcy5rZXkoJ2cnKS5pbnQoKQogICAgKS5vcHRpb25hbCgpCiAgKQp9KQoKdmFyIFByaXZhdGVLZXlJbmZvID0gYXNuMS5kZWZpbmUoJ1ByaXZhdGVLZXlJbmZvJywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSwKICAgIHRoaXMua2V5KCdhbGdvcml0aG0nKS51c2UoQWxnb3JpdGhtSWRlbnRpZmllciksCiAgICB0aGlzLmtleSgnc3ViamVjdFByaXZhdGVLZXknKS5vY3RzdHIoKQogICkKfSkKZXhwb3J0cy5Qcml2YXRlS2V5ID0gUHJpdmF0ZUtleUluZm8KdmFyIEVuY3J5cHRlZFByaXZhdGVLZXlJbmZvID0gYXNuMS5kZWZpbmUoJ0VuY3J5cHRlZFByaXZhdGVLZXlJbmZvJywgZnVuY3Rpb24gKCkgewogIHRoaXMuc2VxKCkub2JqKAogICAgdGhpcy5rZXkoJ2FsZ29yaXRobScpLnNlcSgpLm9iaigKICAgICAgdGhpcy5rZXkoJ2lkJykub2JqaWQoKSwKICAgICAgdGhpcy5rZXkoJ2RlY3J5cHQnKS5zZXEoKS5vYmooCiAgICAgICAgdGhpcy5rZXkoJ2tkZScpLnNlcSgpLm9iaigKICAgICAgICAgIHRoaXMua2V5KCdpZCcpLm9iamlkKCksCiAgICAgICAgICB0aGlzLmtleSgna2RlcGFyYW1zJykuc2VxKCkub2JqKAogICAgICAgICAgICB0aGlzLmtleSgnc2FsdCcpLm9jdHN0cigpLAogICAgICAgICAgICB0aGlzLmtleSgnaXRlcnMnKS5pbnQoKQogICAgICAgICAgKQogICAgICAgICksCiAgICAgICAgdGhpcy5rZXkoJ2NpcGhlcicpLnNlcSgpLm9iaigKICAgICAgICAgIHRoaXMua2V5KCdhbGdvJykub2JqaWQoKSwKICAgICAgICAgIHRoaXMua2V5KCdpdicpLm9jdHN0cigpCiAgICAgICAgKQogICAgICApCiAgICApLAogICAgdGhpcy5rZXkoJ3N1YmplY3RQcml2YXRlS2V5Jykub2N0c3RyKCkKICApCn0pCgpleHBvcnRzLkVuY3J5cHRlZFByaXZhdGVLZXkgPSBFbmNyeXB0ZWRQcml2YXRlS2V5SW5mbwoKdmFyIERTQVByaXZhdGVLZXkgPSBhc24xLmRlZmluZSgnRFNBUHJpdmF0ZUtleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICB0aGlzLmtleSgncCcpLmludCgpLAogICAgdGhpcy5rZXkoJ3EnKS5pbnQoKSwKICAgIHRoaXMua2V5KCdnJykuaW50KCksCiAgICB0aGlzLmtleSgncHViX2tleScpLmludCgpLAogICAgdGhpcy5rZXkoJ3ByaXZfa2V5JykuaW50KCkKICApCn0pCmV4cG9ydHMuRFNBUHJpdmF0ZUtleSA9IERTQVByaXZhdGVLZXkKCmV4cG9ydHMuRFNBcGFyYW0gPSBhc24xLmRlZmluZSgnRFNBcGFyYW0nLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5pbnQoKQp9KQp2YXIgRUNQcml2YXRlS2V5ID0gYXNuMS5kZWZpbmUoJ0VDUHJpdmF0ZUtleScsIGZ1bmN0aW9uICgpIHsKICB0aGlzLnNlcSgpLm9iaigKICAgIHRoaXMua2V5KCd2ZXJzaW9uJykuaW50KCksCiAgICB0aGlzLmtleSgncHJpdmF0ZUtleScpLm9jdHN0cigpLAogICAgdGhpcy5rZXkoJ3BhcmFtZXRlcnMnKS5vcHRpb25hbCgpLmV4cGxpY2l0KDApLnVzZShFQ1BhcmFtZXRlcnMpLAogICAgdGhpcy5rZXkoJ3B1YmxpY0tleScpLm9wdGlvbmFsKCkuZXhwbGljaXQoMSkuYml0c3RyKCkKICApCn0pCmV4cG9ydHMuRUNQcml2YXRlS2V5ID0gRUNQcml2YXRlS2V5CnZhciBFQ1BhcmFtZXRlcnMgPSBhc24xLmRlZmluZSgnRUNQYXJhbWV0ZXJzJywgZnVuY3Rpb24gKCkgewogIHRoaXMuY2hvaWNlKHsKICAgIG5hbWVkQ3VydmU6IHRoaXMub2JqaWQoKQogIH0pCn0pCgpleHBvcnRzLnNpZ25hdHVyZSA9IGFzbjEuZGVmaW5lKCdzaWduYXR1cmUnLCBmdW5jdGlvbiAoKSB7CiAgdGhpcy5zZXEoKS5vYmooCiAgICB0aGlzLmtleSgncicpLmludCgpLAogICAgdGhpcy5rZXkoJ3MnKS5pbnQoKQogICkKfSkKCn0seyJhc24xLmpzIjoxfV0sMTM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBhZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FwYXRpbC9wZW1zdHJpcAp2YXIgZmluZFByb2MgPSAvUHJvYy1UeXBlOiA0LEVOQ1JZUFRFRFxyP1xuREVLLUluZm86IEFFUy0oKD86MTI4KXwoPzoxOTIpfCg/OjI1NikpLUNCQywoWzAtOUEtSF0rKVxyP1xuXHI/XG4oWzAtOUEtelxuXHJcK1wvXD1dKylccj9cbi9tCnZhciBzdGFydFJlZ2V4ID0gL14tLS0tLUJFR0lOICguKikgS0VZLS0tLS1ccj9cbi9tCnZhciBmdWxsUmVnZXggPSAvXi0tLS0tQkVHSU4gKC4qKSBLRVktLS0tLVxyP1xuKFswLTlBLXpcblxyXCtcL1w9XSspXHI/XG4tLS0tLUVORCBcMSBLRVktLS0tLSQvbQp2YXIgZXZwID0gcmVxdWlyZSgnZXZwX2J5dGVzdG9rZXknKQp2YXIgY2lwaGVycyA9IHJlcXVpcmUoJ2Jyb3dzZXJpZnktYWVzJykKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2tleSwgcGFzc3dvcmQpIHsKICB2YXIga2V5ID0gb2tleS50b1N0cmluZygpCiAgdmFyIG1hdGNoID0ga2V5Lm1hdGNoKGZpbmRQcm9jKQogIHZhciBkZWNyeXB0ZWQKICBpZiAoIW1hdGNoKSB7CiAgICB2YXIgbWF0Y2gyID0ga2V5Lm1hdGNoKGZ1bGxSZWdleCkKICAgIGRlY3J5cHRlZCA9IG5ldyBCdWZmZXIobWF0Y2gyWzJdLnJlcGxhY2UoL1xyP1xuL2csICcnKSwgJ2Jhc2U2NCcpCiAgfSBlbHNlIHsKICAgIHZhciBzdWl0ZSA9ICdhZXMnICsgbWF0Y2hbMV0KICAgIHZhciBpdiA9IG5ldyBCdWZmZXIobWF0Y2hbMl0sICdoZXgnKQogICAgdmFyIGNpcGhlclRleHQgPSBuZXcgQnVmZmVyKG1hdGNoWzNdLnJlcGxhY2UoL1xyP1xuL2csICcnKSwgJ2Jhc2U2NCcpCiAgICB2YXIgY2lwaGVyS2V5ID0gZXZwKHBhc3N3b3JkLCBpdi5zbGljZSgwLCA4KSwgcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSkua2V5CiAgICB2YXIgb3V0ID0gW10KICAgIHZhciBjaXBoZXIgPSBjaXBoZXJzLmNyZWF0ZURlY2lwaGVyaXYoc3VpdGUsIGNpcGhlcktleSwgaXYpCiAgICBvdXQucHVzaChjaXBoZXIudXBkYXRlKGNpcGhlclRleHQpKQogICAgb3V0LnB1c2goY2lwaGVyLmZpbmFsKCkpCiAgICBkZWNyeXB0ZWQgPSBCdWZmZXIuY29uY2F0KG91dCkKICB9CiAgdmFyIHRhZyA9IGtleS5tYXRjaChzdGFydFJlZ2V4KVsxXSArICcgS0VZJwogIHJldHVybiB7CiAgICB0YWc6IHRhZywKICAgIGRhdGE6IGRlY3J5cHRlZAogIH0KfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJyb3dzZXJpZnktYWVzIjo0NiwiYnVmZmVyIjo3MCwiZXZwX2J5dGVzdG9rZXkiOjExOX1dLDEzODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGFzbjEgPSByZXF1aXJlKCcuL2FzbjEnKQp2YXIgYWVzaWQgPSByZXF1aXJlKCcuL2Flc2lkLmpzb24nKQp2YXIgZml4UHJvYyA9IHJlcXVpcmUoJy4vZml4UHJvYycpCnZhciBjaXBoZXJzID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1hZXMnKQp2YXIgY29tcGF0ID0gcmVxdWlyZSgncGJrZGYyJykKbW9kdWxlLmV4cG9ydHMgPSBwYXJzZUtleXMKCmZ1bmN0aW9uIHBhcnNlS2V5cyAoYnVmZmVyKSB7CiAgdmFyIHBhc3N3b3JkCiAgaWYgKHR5cGVvZiBidWZmZXIgPT09ICdvYmplY3QnICYmICFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSkgewogICAgcGFzc3dvcmQgPSBidWZmZXIucGFzc3BocmFzZQogICAgYnVmZmVyID0gYnVmZmVyLmtleQogIH0KICBpZiAodHlwZW9mIGJ1ZmZlciA9PT0gJ3N0cmluZycpIHsKICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKQogIH0KCiAgdmFyIHN0cmlwcGVkID0gZml4UHJvYyhidWZmZXIsIHBhc3N3b3JkKQoKICB2YXIgdHlwZSA9IHN0cmlwcGVkLnRhZwogIHZhciBkYXRhID0gc3RyaXBwZWQuZGF0YQogIHZhciBzdWJ0eXBlLCBuZGF0YQogIHN3aXRjaCAodHlwZSkgewogICAgY2FzZSAnUFVCTElDIEtFWSc6CiAgICAgIG5kYXRhID0gYXNuMS5QdWJsaWNLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICBzdWJ0eXBlID0gbmRhdGEuYWxnb3JpdGhtLmFsZ29yaXRobS5qb2luKCcuJykKICAgICAgc3dpdGNoIChzdWJ0eXBlKSB7CiAgICAgICAgY2FzZSAnMS4yLjg0MC4xMTM1NDkuMS4xLjEnOgogICAgICAgICAgcmV0dXJuIGFzbjEuUlNBUHVibGljS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDUuMi4xJzoKICAgICAgICAgIG5kYXRhLnN1YmplY3RQcml2YXRlS2V5ID0gbmRhdGEuc3ViamVjdFB1YmxpY0tleQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogJ2VjJywKICAgICAgICAgICAgZGF0YTogbmRhdGEKICAgICAgICAgIH0KICAgICAgICBjYXNlICcxLjIuODQwLjEwMDQwLjQuMSc6CiAgICAgICAgICBuZGF0YS5hbGdvcml0aG0ucGFyYW1zLnB1Yl9rZXkgPSBhc24xLkRTQXBhcmFtLmRlY29kZShuZGF0YS5zdWJqZWN0UHVibGljS2V5LmRhdGEsICdkZXInKQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgICAgIGRhdGE6IG5kYXRhLmFsZ29yaXRobS5wYXJhbXMKICAgICAgICAgIH0KICAgICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24ga2V5IGlkICcgKyBzdWJ0eXBlKQogICAgICB9CiAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBrZXkgdHlwZSAnICsgdHlwZSkKICAgIGNhc2UgJ0VOQ1JZUFRFRCBQUklWQVRFIEtFWSc6CiAgICAgIGRhdGEgPSBhc24xLkVuY3J5cHRlZFByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICBkYXRhID0gZGVjcnlwdChkYXRhLCBwYXNzd29yZCkKICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgY2FzZSAnUFJJVkFURSBLRVknOgogICAgICBuZGF0YSA9IGFzbjEuUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgIHN1YnR5cGUgPSBuZGF0YS5hbGdvcml0aG0uYWxnb3JpdGhtLmpvaW4oJy4nKQogICAgICBzd2l0Y2ggKHN1YnR5cGUpIHsKICAgICAgICBjYXNlICcxLjIuODQwLjExMzU0OS4xLjEuMSc6CiAgICAgICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpCiAgICAgICAgY2FzZSAnMS4yLjg0MC4xMDA0NS4yLjEnOgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY3VydmU6IG5kYXRhLmFsZ29yaXRobS5jdXJ2ZSwKICAgICAgICAgICAgcHJpdmF0ZUtleTogYXNuMS5FQ1ByaXZhdGVLZXkuZGVjb2RlKG5kYXRhLnN1YmplY3RQcml2YXRlS2V5LCAnZGVyJykucHJpdmF0ZUtleQogICAgICAgICAgfQogICAgICAgIGNhc2UgJzEuMi44NDAuMTAwNDAuNC4xJzoKICAgICAgICAgIG5kYXRhLmFsZ29yaXRobS5wYXJhbXMucHJpdl9rZXkgPSBhc24xLkRTQXBhcmFtLmRlY29kZShuZGF0YS5zdWJqZWN0UHJpdmF0ZUtleSwgJ2RlcicpCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0eXBlOiAnZHNhJywKICAgICAgICAgICAgcGFyYW1zOiBuZGF0YS5hbGdvcml0aG0ucGFyYW1zCiAgICAgICAgICB9CiAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSBpZCAnICsgc3VidHlwZSkKICAgICAgfQogICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24ga2V5IHR5cGUgJyArIHR5cGUpCiAgICBjYXNlICdSU0EgUFVCTElDIEtFWSc6CiAgICAgIHJldHVybiBhc24xLlJTQVB1YmxpY0tleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICBjYXNlICdSU0EgUFJJVkFURSBLRVknOgogICAgICByZXR1cm4gYXNuMS5SU0FQcml2YXRlS2V5LmRlY29kZShkYXRhLCAnZGVyJykKICAgIGNhc2UgJ0RTQSBQUklWQVRFIEtFWSc6CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogJ2RzYScsCiAgICAgICAgcGFyYW1zOiBhc24xLkRTQVByaXZhdGVLZXkuZGVjb2RlKGRhdGEsICdkZXInKQogICAgICB9CiAgICBjYXNlICdFQyBQUklWQVRFIEtFWSc6CiAgICAgIGRhdGEgPSBhc24xLkVDUHJpdmF0ZUtleS5kZWNvZGUoZGF0YSwgJ2RlcicpCiAgICAgIHJldHVybiB7CiAgICAgICAgY3VydmU6IGRhdGEucGFyYW1ldGVycy52YWx1ZSwKICAgICAgICBwcml2YXRlS2V5OiBkYXRhLnByaXZhdGVLZXkKICAgICAgfQogICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGtleSB0eXBlICcgKyB0eXBlKQogIH0KfQpwYXJzZUtleXMuc2lnbmF0dXJlID0gYXNuMS5zaWduYXR1cmUKZnVuY3Rpb24gZGVjcnlwdCAoZGF0YSwgcGFzc3dvcmQpIHsKICB2YXIgc2FsdCA9IGRhdGEuYWxnb3JpdGhtLmRlY3J5cHQua2RlLmtkZXBhcmFtcy5zYWx0CiAgdmFyIGl0ZXJzID0gcGFyc2VJbnQoZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5rZGUua2RlcGFyYW1zLml0ZXJzLnRvU3RyaW5nKCksIDEwKQogIHZhciBhbGdvID0gYWVzaWRbZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5jaXBoZXIuYWxnby5qb2luKCcuJyldCiAgdmFyIGl2ID0gZGF0YS5hbGdvcml0aG0uZGVjcnlwdC5jaXBoZXIuaXYKICB2YXIgY2lwaGVyVGV4dCA9IGRhdGEuc3ViamVjdFByaXZhdGVLZXkKICB2YXIga2V5bGVuID0gcGFyc2VJbnQoYWxnby5zcGxpdCgnLScpWzFdLCAxMCkgLyA4CiAgdmFyIGtleSA9IGNvbXBhdC5wYmtkZjJTeW5jKHBhc3N3b3JkLCBzYWx0LCBpdGVycywga2V5bGVuKQogIHZhciBjaXBoZXIgPSBjaXBoZXJzLmNyZWF0ZURlY2lwaGVyaXYoYWxnbywga2V5LCBpdikKICB2YXIgb3V0ID0gW10KICBvdXQucHVzaChjaXBoZXIudXBkYXRlKGNpcGhlclRleHQpKQogIG91dC5wdXNoKGNpcGhlci5maW5hbCgpKQogIHJldHVybiBCdWZmZXIuY29uY2F0KG91dCkKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vYWVzaWQuanNvbiI6MTM1LCIuL2FzbjEiOjEzNiwiLi9maXhQcm9jIjoxMzcsImJyb3dzZXJpZnktYWVzIjo0NiwiYnVmZmVyIjo3MCwicGJrZGYyIjoxMzl9XSwxMzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBjcmVhdGVIbWFjID0gcmVxdWlyZSgnY3JlYXRlLWhtYWMnKQp2YXIgTUFYX0FMTE9DID0gTWF0aC5wb3coMiwgMzApIC0gMSAvLyBkZWZhdWx0IGluIGlvanMKCmV4cG9ydHMucGJrZGYyID0gcGJrZGYyCmZ1bmN0aW9uIHBia2RmMiAocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0LCBjYWxsYmFjaykgewogIGlmICh0eXBlb2YgZGlnZXN0ID09PSAnZnVuY3Rpb24nKSB7CiAgICBjYWxsYmFjayA9IGRpZ2VzdAogICAgZGlnZXN0ID0gdW5kZWZpbmVkCiAgfQoKICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNhbGxiYWNrIHByb3ZpZGVkIHRvIHBia2RmMicpCiAgfQoKICB2YXIgcmVzdWx0ID0gcGJrZGYyU3luYyhwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywga2V5bGVuLCBkaWdlc3QpCiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICBjYWxsYmFjayh1bmRlZmluZWQsIHJlc3VsdCkKICB9KQp9CgpleHBvcnRzLnBia2RmMlN5bmMgPSBwYmtkZjJTeW5jCmZ1bmN0aW9uIHBia2RmMlN5bmMgKHBhc3N3b3JkLCBzYWx0LCBpdGVyYXRpb25zLCBrZXlsZW4sIGRpZ2VzdCkgewogIGlmICh0eXBlb2YgaXRlcmF0aW9ucyAhPT0gJ251bWJlcicpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0l0ZXJhdGlvbnMgbm90IGEgbnVtYmVyJykKICB9CgogIGlmIChpdGVyYXRpb25zIDwgMCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQmFkIGl0ZXJhdGlvbnMnKQogIH0KCiAgaWYgKHR5cGVvZiBrZXlsZW4gIT09ICdudW1iZXInKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdLZXkgbGVuZ3RoIG5vdCBhIG51bWJlcicpCiAgfQoKICBpZiAoa2V5bGVuIDwgMCB8fCBrZXlsZW4gPiBNQVhfQUxMT0MpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JhZCBrZXkgbGVuZ3RoJykKICB9CgogIGRpZ2VzdCA9IGRpZ2VzdCB8fCAnc2hhMScKCiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIocGFzc3dvcmQpKSBwYXNzd29yZCA9IG5ldyBCdWZmZXIocGFzc3dvcmQsICdiaW5hcnknKQogIGlmICghQnVmZmVyLmlzQnVmZmVyKHNhbHQpKSBzYWx0ID0gbmV3IEJ1ZmZlcihzYWx0LCAnYmluYXJ5JykKCiAgdmFyIGhMZW4KICB2YXIgbCA9IDEKICB2YXIgREsgPSBuZXcgQnVmZmVyKGtleWxlbikKICB2YXIgYmxvY2sxID0gbmV3IEJ1ZmZlcihzYWx0Lmxlbmd0aCArIDQpCiAgc2FsdC5jb3B5KGJsb2NrMSwgMCwgMCwgc2FsdC5sZW5ndGgpCgogIHZhciByCiAgdmFyIFQKCiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gbDsgaSsrKSB7CiAgICBibG9jazEud3JpdGVVSW50MzJCRShpLCBzYWx0Lmxlbmd0aCkKICAgIHZhciBVID0gY3JlYXRlSG1hYyhkaWdlc3QsIHBhc3N3b3JkKS51cGRhdGUoYmxvY2sxKS5kaWdlc3QoKQoKICAgIGlmICghaExlbikgewogICAgICBoTGVuID0gVS5sZW5ndGgKICAgICAgVCA9IG5ldyBCdWZmZXIoaExlbikKICAgICAgbCA9IE1hdGguY2VpbChrZXlsZW4gLyBoTGVuKQogICAgICByID0ga2V5bGVuIC0gKGwgLSAxKSAqIGhMZW4KICAgIH0KCiAgICBVLmNvcHkoVCwgMCwgMCwgaExlbikKCiAgICBmb3IgKHZhciBqID0gMTsgaiA8IGl0ZXJhdGlvbnM7IGorKykgewogICAgICBVID0gY3JlYXRlSG1hYyhkaWdlc3QsIHBhc3N3b3JkKS51cGRhdGUoVSkuZGlnZXN0KCkKCiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgaExlbjsgaysrKSB7CiAgICAgICAgVFtrXSBePSBVW2tdCiAgICAgIH0KICAgIH0KCiAgICB2YXIgZGVzdFBvcyA9IChpIC0gMSkgKiBoTGVuCiAgICB2YXIgbGVuID0gKGkgPT09IGwgPyByIDogaExlbikKICAgIFQuY29weShESywgZGVzdFBvcywgMCwgbGVuKQogIH0KCiAgcmV0dXJuIERLCn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwLCJjcmVhdGUtaG1hYyI6ODV9XSwxNDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKHByb2Nlc3MpewondXNlIHN0cmljdCc7CgppZiAoIXByb2Nlc3MudmVyc2lvbiB8fAogICAgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YwLicpID09PSAwIHx8CiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuJykgPT09IDAgJiYgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YxLjguJykgIT09IDApIHsKICBtb2R1bGUuZXhwb3J0cyA9IG5leHRUaWNrOwp9IGVsc2UgewogIG1vZHVsZS5leHBvcnRzID0gcHJvY2Vzcy5uZXh0VGljazsKfQoKZnVuY3Rpb24gbmV4dFRpY2soZm4pIHsKICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CiAgdmFyIGkgPSAwOwogIHdoaWxlIChpIDwgYXJncy5sZW5ndGgpIHsKICAgIGFyZ3NbaSsrXSA9IGFyZ3VtZW50c1tpXTsKICB9CiAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7CiAgICBmbi5hcHBseShudWxsLCBhcmdzKTsKICB9KTsKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJykpCn0seyJfcHJvY2VzcyI6MTQxfV0sMTQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyCgp2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307CnZhciBxdWV1ZSA9IFtdOwp2YXIgZHJhaW5pbmcgPSBmYWxzZTsKdmFyIGN1cnJlbnRRdWV1ZTsKdmFyIHF1ZXVlSW5kZXggPSAtMTsKCmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHsKICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkgewogICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7CiAgICB9IGVsc2UgewogICAgICAgIHF1ZXVlSW5kZXggPSAtMTsKICAgIH0KICAgIGlmIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICBkcmFpblF1ZXVlKCk7CiAgICB9Cn0KCmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7CiAgICBpZiAoZHJhaW5pbmcpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTsKICAgIGRyYWluaW5nID0gdHJ1ZTsKCiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoOwogICAgd2hpbGUobGVuKSB7CiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7CiAgICAgICAgcXVldWUgPSBbXTsKICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoOwogICAgfQogICAgY3VycmVudFF1ZXVlID0gbnVsbDsKICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7Cn0KCnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7CiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTsKICAgICAgICB9CiAgICB9CiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpOwogICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHsKICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApOwogICAgfQp9OwoKLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0cwpmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHsKICAgIHRoaXMuZnVuID0gZnVuOwogICAgdGhpcy5hcnJheSA9IGFycmF5Owp9Ckl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpOwp9Owpwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInOwpwcm9jZXNzLmJyb3dzZXIgPSB0cnVlOwpwcm9jZXNzLmVudiA9IHt9Owpwcm9jZXNzLmFyZ3YgPSBbXTsKcHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzCnByb2Nlc3MudmVyc2lvbnMgPSB7fTsKCmZ1bmN0aW9uIG5vb3AoKSB7fQoKcHJvY2Vzcy5vbiA9IG5vb3A7CnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wOwpwcm9jZXNzLm9uY2UgPSBub29wOwpwcm9jZXNzLm9mZiA9IG5vb3A7CnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wOwpwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7CnByb2Nlc3MuZW1pdCA9IG5vb3A7Cgpwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpOwp9OwoKcHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTsKcHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHsKICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7Cn07CnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07Cgp9LHt9XSwxNDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewpleHBvcnRzLnB1YmxpY0VuY3J5cHQgPSByZXF1aXJlKCcuL3B1YmxpY0VuY3J5cHQnKTsKZXhwb3J0cy5wcml2YXRlRGVjcnlwdCA9IHJlcXVpcmUoJy4vcHJpdmF0ZURlY3J5cHQnKTsKCmV4cG9ydHMucHJpdmF0ZUVuY3J5cHQgPSBmdW5jdGlvbiBwcml2YXRlRW5jcnlwdChrZXksIGJ1ZikgewogIHJldHVybiBleHBvcnRzLnB1YmxpY0VuY3J5cHQoa2V5LCBidWYsIHRydWUpOwp9OwoKZXhwb3J0cy5wdWJsaWNEZWNyeXB0ID0gZnVuY3Rpb24gcHVibGljRGVjcnlwdChrZXksIGJ1ZikgewogIHJldHVybiBleHBvcnRzLnByaXZhdGVEZWNyeXB0KGtleSwgYnVmLCB0cnVlKTsKfTsKfSx7Ii4vcHJpdmF0ZURlY3J5cHQiOjE0NCwiLi9wdWJsaWNFbmNyeXB0IjoxNDV9XSwxNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBjcmVhdGVIYXNoID0gcmVxdWlyZSgnY3JlYXRlLWhhc2gnKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VlZCwgbGVuKSB7CiAgdmFyIHQgPSBuZXcgQnVmZmVyKCcnKTsKICB2YXIgIGkgPSAwLCBjOwogIHdoaWxlICh0Lmxlbmd0aCA8IGxlbikgewogICAgYyA9IGkyb3BzKGkrKyk7CiAgICB0ID0gQnVmZmVyLmNvbmNhdChbdCwgY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShzZWVkKS51cGRhdGUoYykuZGlnZXN0KCldKTsKICB9CiAgcmV0dXJuIHQuc2xpY2UoMCwgbGVuKTsKfTsKCmZ1bmN0aW9uIGkyb3BzKGMpIHsKICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcig0KTsKICBvdXQud3JpdGVVSW50MzJCRShjLDApOwogIHJldHVybiBvdXQ7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzAsImNyZWF0ZS1oYXNoIjo4Mn1dLDE0NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKTsKdmFyIG1nZiA9IHJlcXVpcmUoJy4vbWdmJyk7CnZhciB4b3IgPSByZXF1aXJlKCcuL3hvcicpOwp2YXIgYm4gPSByZXF1aXJlKCdibi5qcycpOwp2YXIgY3J0ID0gcmVxdWlyZSgnYnJvd3NlcmlmeS1yc2EnKTsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpOwp2YXIgd2l0aFB1YmxpYyA9IHJlcXVpcmUoJy4vd2l0aFB1YmxpYycpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHByaXZhdGVEZWNyeXB0KHByaXZhdGVfa2V5LCBlbmMsIHJldmVyc2UpIHsKICB2YXIgcGFkZGluZzsKICBpZiAocHJpdmF0ZV9rZXkucGFkZGluZykgewogICAgcGFkZGluZyA9IHByaXZhdGVfa2V5LnBhZGRpbmc7CiAgfSBlbHNlIGlmIChyZXZlcnNlKSB7CiAgICBwYWRkaW5nID0gMTsKICB9IGVsc2UgewogICAgcGFkZGluZyA9IDQ7CiAgfQogIAogIHZhciBrZXkgPSBwYXJzZUtleXMocHJpdmF0ZV9rZXkpOwogIHZhciBrID0ga2V5Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIGlmIChlbmMubGVuZ3RoID4gayB8fCBuZXcgYm4oZW5jKS5jbXAoa2V5Lm1vZHVsdXMpID49IDApIHsKICAgIHRocm93IG5ldyBFcnJvcignZGVjcnlwdGlvbiBlcnJvcicpOwogIH0KICB2YXIgbXNnOwogIGlmIChyZXZlcnNlKSB7CiAgICBtc2cgPSB3aXRoUHVibGljKG5ldyBibihlbmMpLCBrZXkpOwogIH0gZWxzZSB7CiAgICBtc2cgPSBjcnQoZW5jLCBrZXkpOwogIH0KICB2YXIgekJ1ZmZlciA9IG5ldyBCdWZmZXIoayAtIG1zZy5sZW5ndGgpOwogIHpCdWZmZXIuZmlsbCgwKTsKICBtc2cgPSBCdWZmZXIuY29uY2F0KFt6QnVmZmVyLCBtc2ddLCBrKTsKICBpZiAocGFkZGluZyA9PT0gNCkgewogICAgcmV0dXJuIG9hZXAoa2V5LCBtc2cpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMSkgewogICAgcmV0dXJuIHBrY3MxKGtleSwgbXNnLCByZXZlcnNlKTsKICB9IGVsc2UgaWYgKHBhZGRpbmcgPT09IDMpIHsKICAgIHJldHVybiBtc2c7CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBwYWRkaW5nJyk7CiAgfQp9OwoKZnVuY3Rpb24gb2FlcChrZXksIG1zZyl7CiAgdmFyIG4gPSBrZXkubW9kdWx1czsKICB2YXIgayA9IGtleS5tb2R1bHVzLmJ5dGVMZW5ndGgoKTsKICB2YXIgbUxlbiA9IG1zZy5sZW5ndGg7CiAgdmFyIGlIYXNoID0gY3JlYXRlSGFzaCgnc2hhMScpLnVwZGF0ZShuZXcgQnVmZmVyKCcnKSkuZGlnZXN0KCk7CiAgdmFyIGhMZW4gPSBpSGFzaC5sZW5ndGg7CiAgdmFyIGhMZW4yID0gMiAqIGhMZW47CiAgaWYgKG1zZ1swXSAhPT0gMCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHZhciBtYXNrZWRTZWVkID0gbXNnLnNsaWNlKDEsIGhMZW4gKyAxKTsKICB2YXIgbWFza2VkRGIgPSAgbXNnLnNsaWNlKGhMZW4gKyAxKTsKICB2YXIgc2VlZCA9IHhvcihtYXNrZWRTZWVkLCBtZ2YobWFza2VkRGIsIGhMZW4pKTsKICB2YXIgZGIgPSB4b3IobWFza2VkRGIsIG1nZihzZWVkLCBrIC0gaExlbiAtIDEpKTsKICBpZiAoY29tcGFyZShpSGFzaCwgZGIuc2xpY2UoMCwgaExlbikpKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlY3J5cHRpb24gZXJyb3InKTsKICB9CiAgdmFyIGkgPSBoTGVuOwogIHdoaWxlIChkYltpXSA9PT0gMCkgewogICAgaSsrOwogIH0KICBpZiAoZGJbaSsrXSAhPT0gMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHJldHVybiBkYi5zbGljZShpKTsKfQoKZnVuY3Rpb24gcGtjczEoa2V5LCBtc2csIHJldmVyc2UpewogIHZhciBwMSA9IG1zZy5zbGljZSgwLCAyKTsKICB2YXIgaSA9IDI7CiAgdmFyIHN0YXR1cyA9IDA7CiAgd2hpbGUgKG1zZ1tpKytdICE9PSAwKSB7CiAgICBpZiAoaSA+PSBtc2cubGVuZ3RoKSB7CiAgICAgIHN0YXR1cysrOwogICAgICBicmVhazsKICAgIH0KICB9CiAgdmFyIHBzID0gbXNnLnNsaWNlKDIsIGkgLSAxKTsKICB2YXIgcDIgPSBtc2cuc2xpY2UoaSAtIDEsIGkpOwoKICBpZiAoKHAxLnRvU3RyaW5nKCdoZXgnKSAhPT0gJzAwMDInICYmICFyZXZlcnNlKSB8fCAocDEudG9TdHJpbmcoJ2hleCcpICE9PSAnMDAwMScgJiYgcmV2ZXJzZSkpewogICAgc3RhdHVzKys7CiAgfQogIGlmIChwcy5sZW5ndGggPCA4KSB7CiAgICBzdGF0dXMrKzsKICB9CiAgaWYgKHN0YXR1cykgewogICAgdGhyb3cgbmV3IEVycm9yKCdkZWNyeXB0aW9uIGVycm9yJyk7CiAgfQogIHJldHVybiAgbXNnLnNsaWNlKGkpOwp9CmZ1bmN0aW9uIGNvbXBhcmUoYSwgYil7CiAgYSA9IG5ldyBCdWZmZXIoYSk7CiAgYiA9IG5ldyBCdWZmZXIoYik7CiAgdmFyIGRpZiA9IDA7CiAgdmFyIGxlbiA9IGEubGVuZ3RoOwogIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHsKICAgIGRpZisrOwogICAgbGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTsKICB9CiAgdmFyIGkgPSAtMTsKICB3aGlsZSAoKytpIDwgbGVuKSB7CiAgICBkaWYgKz0gKGFbaV0gXiBiW2ldKTsKICB9CiAgcmV0dXJuIGRpZjsKfQp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9tZ2YiOjE0MywiLi93aXRoUHVibGljIjoxNDYsIi4veG9yIjoxNDcsImJuLmpzIjo0MSwiYnJvd3NlcmlmeS1yc2EiOjYyLCJidWZmZXIiOjcwLCJjcmVhdGUtaGFzaCI6ODIsInBhcnNlLWFzbjEiOjEzOH1dLDE0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIHBhcnNlS2V5cyA9IHJlcXVpcmUoJ3BhcnNlLWFzbjEnKTsKdmFyIHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgncmFuZG9tYnl0ZXMnKTsKdmFyIGNyZWF0ZUhhc2ggPSByZXF1aXJlKCdjcmVhdGUtaGFzaCcpOwp2YXIgbWdmID0gcmVxdWlyZSgnLi9tZ2YnKTsKdmFyIHhvciA9IHJlcXVpcmUoJy4veG9yJyk7CnZhciBibiA9IHJlcXVpcmUoJ2JuLmpzJyk7CnZhciB3aXRoUHVibGljID0gcmVxdWlyZSgnLi93aXRoUHVibGljJyk7CnZhciBjcnQgPSByZXF1aXJlKCdicm93c2VyaWZ5LXJzYScpOwoKdmFyIGNvbnN0YW50cyA9IHsKICBSU0FfUEtDUzFfT0FFUF9QQURESU5HOiA0LAogIFJTQV9QS0NTMV9QQURESU46IDEsCiAgUlNBX05PX1BBRERJTkc6IDMKfTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcHVibGljRW5jcnlwdChwdWJsaWNfa2V5LCBtc2csIHJldmVyc2UpIHsKICB2YXIgcGFkZGluZzsKICBpZiAocHVibGljX2tleS5wYWRkaW5nKSB7CiAgICBwYWRkaW5nID0gcHVibGljX2tleS5wYWRkaW5nOwogIH0gZWxzZSBpZiAocmV2ZXJzZSkgewogICAgcGFkZGluZyA9IDE7CiAgfSBlbHNlIHsKICAgIHBhZGRpbmcgPSA0OwogIH0KICB2YXIga2V5ID0gcGFyc2VLZXlzKHB1YmxpY19rZXkpOwogIHZhciBwYWRkZWRNc2c7CiAgaWYgKHBhZGRpbmcgPT09IDQpIHsKICAgIHBhZGRlZE1zZyA9IG9hZXAoa2V5LCBtc2cpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMSkgewogICAgcGFkZGVkTXNnID0gcGtjczEoa2V5LCBtc2csIHJldmVyc2UpOwogIH0gZWxzZSBpZiAocGFkZGluZyA9PT0gMykgewogICAgcGFkZGVkTXNnID0gbmV3IGJuKG1zZyk7CiAgICBpZiAocGFkZGVkTXNnLmNtcChrZXkubW9kdWx1cykgPj0gMCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGEgdG9vIGxvbmcgZm9yIG1vZHVsdXMnKTsKICAgIH0KICB9IGVsc2UgewogICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIHBhZGRpbmcnKTsKICB9CiAgaWYgKHJldmVyc2UpIHsKICAgIHJldHVybiBjcnQocGFkZGVkTXNnLCBrZXkpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gd2l0aFB1YmxpYyhwYWRkZWRNc2csIGtleSk7CiAgfQp9OwoKZnVuY3Rpb24gb2FlcChrZXksIG1zZyl7CiAgdmFyIGsgPSBrZXkubW9kdWx1cy5ieXRlTGVuZ3RoKCk7CiAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogIHZhciBpSGFzaCA9IGNyZWF0ZUhhc2goJ3NoYTEnKS51cGRhdGUobmV3IEJ1ZmZlcignJykpLmRpZ2VzdCgpOwogIHZhciBoTGVuID0gaUhhc2gubGVuZ3RoOwogIHZhciBoTGVuMiA9IDIgKiBoTGVuOwogIGlmIChtTGVuID4gayAtIGhMZW4yIC0gMikgewogICAgdGhyb3cgbmV3IEVycm9yKCdtZXNzYWdlIHRvbyBsb25nJyk7CiAgfQogIHZhciBwcyA9IG5ldyBCdWZmZXIoayAtIG1MZW4gLSBoTGVuMiAtIDIpOwogIHBzLmZpbGwoMCk7CiAgdmFyIGRibGVuID0gayAtIGhMZW4gLSAxOwogIHZhciBzZWVkID0gcmFuZG9tQnl0ZXMoaExlbik7CiAgdmFyIG1hc2tlZERiID0geG9yKEJ1ZmZlci5jb25jYXQoW2lIYXNoLCBwcywgbmV3IEJ1ZmZlcihbMV0pLCBtc2ddLCBkYmxlbiksIG1nZihzZWVkLCBkYmxlbikpOwogIHZhciBtYXNrZWRTZWVkID0geG9yKHNlZWQsIG1nZihtYXNrZWREYiwgaExlbikpOwogIHJldHVybiBuZXcgYm4oQnVmZmVyLmNvbmNhdChbbmV3IEJ1ZmZlcihbMF0pLCBtYXNrZWRTZWVkLCBtYXNrZWREYl0sIGspKTsKfQpmdW5jdGlvbiBwa2NzMShrZXksIG1zZywgcmV2ZXJzZSl7CiAgdmFyIG1MZW4gPSBtc2cubGVuZ3RoOwogIHZhciBrID0ga2V5Lm1vZHVsdXMuYnl0ZUxlbmd0aCgpOwogIGlmIChtTGVuID4gayAtIDExKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ21lc3NhZ2UgdG9vIGxvbmcnKTsKICB9CiAgdmFyIHBzOwogIGlmIChyZXZlcnNlKSB7CiAgICBwcyA9IG5ldyBCdWZmZXIoayAtIG1MZW4gLSAzKTsKICAgIHBzLmZpbGwoMHhmZik7CiAgfSBlbHNlIHsKICAgIHBzID0gbm9uWmVybyhrIC0gbUxlbiAtIDMpOwogIH0KICByZXR1cm4gbmV3IGJuKEJ1ZmZlci5jb25jYXQoW25ldyBCdWZmZXIoWzAsIHJldmVyc2U/MToyXSksIHBzLCBuZXcgQnVmZmVyKFswXSksIG1zZ10sIGspKTsKfQpmdW5jdGlvbiBub25aZXJvKGxlbiwgY3J5cHRvKSB7CiAgdmFyIG91dCA9IG5ldyBCdWZmZXIobGVuKTsKICB2YXIgaSA9IDA7CiAgdmFyIGNhY2hlID0gcmFuZG9tQnl0ZXMobGVuKjIpOwogIHZhciBjdXIgPSAwOwogIHZhciBudW07CiAgd2hpbGUgKGkgPCBsZW4pIHsKICAgIGlmIChjdXIgPT09IGNhY2hlLmxlbmd0aCkgewogICAgICBjYWNoZSA9IHJhbmRvbUJ5dGVzKGxlbioyKTsKICAgICAgY3VyID0gMDsKICAgIH0KICAgIG51bSA9IGNhY2hlW2N1cisrXTsKICAgIGlmIChudW0pIHsKICAgICAgb3V0W2krK10gPSBudW07CiAgICB9CiAgfQogIHJldHVybiBvdXQ7Cn0KfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vbWdmIjoxNDMsIi4vd2l0aFB1YmxpYyI6MTQ2LCIuL3hvciI6MTQ3LCJibi5qcyI6NDEsImJyb3dzZXJpZnktcnNhIjo2MiwiYnVmZmVyIjo3MCwiY3JlYXRlLWhhc2giOjgyLCJwYXJzZS1hc24xIjoxMzgsInJhbmRvbWJ5dGVzIjoxNDh9XSwxNDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7CnZhciBibiA9IHJlcXVpcmUoJ2JuLmpzJyk7CmZ1bmN0aW9uIHdpdGhQdWJsaWMocGFkZGVkTXNnLCBrZXkpIHsKICByZXR1cm4gbmV3IEJ1ZmZlcihwYWRkZWRNc2cKICAgIC50b1JlZChibi5tb250KGtleS5tb2R1bHVzKSkKICAgIC5yZWRQb3cobmV3IGJuKGtleS5wdWJsaWNFeHBvbmVudCkpCiAgICAuZnJvbVJlZCgpCiAgICAudG9BcnJheSgpKTsKfQoKbW9kdWxlLmV4cG9ydHMgPSB3aXRoUHVibGljOwp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiYm4uanMiOjQxLCJidWZmZXIiOjcwfV0sMTQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB4b3IoYSwgYikgewogIHZhciBsZW4gPSBhLmxlbmd0aDsKICB2YXIgaSA9IC0xOwogIHdoaWxlICgrK2kgPCBsZW4pIHsKICAgIGFbaV0gXj0gYltpXTsKICB9CiAgcmV0dXJuIGEKfTsKfSx7fV0sMTQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCxCdWZmZXIpewondXNlIHN0cmljdCcKCmZ1bmN0aW9uIG9sZEJyb3dzZXIgKCkgewogIHRocm93IG5ldyBFcnJvcignc2VjdXJlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdGlvbiBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3NlclxudXNlIGNocm9tZSwgRmlyZUZveCBvciBJbnRlcm5ldCBFeHBsb3JlciAxMScpCn0KCnZhciBjcnlwdG8gPSBnbG9iYWwuY3J5cHRvIHx8IGdsb2JhbC5tc0NyeXB0bwoKaWYgKGNyeXB0byAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7CiAgbW9kdWxlLmV4cG9ydHMgPSByYW5kb21CeXRlcwp9IGVsc2UgewogIG1vZHVsZS5leHBvcnRzID0gb2xkQnJvd3Nlcgp9CgpmdW5jdGlvbiByYW5kb21CeXRlcyAoc2l6ZSwgY2IpIHsKICAvLyBwaGFudG9tanMgbmVlZHMgdG8gdGhyb3cKICBpZiAoc2l6ZSA+IDY1NTM2KSB0aHJvdyBuZXcgRXJyb3IoJ3JlcXVlc3RlZCB0b28gbWFueSByYW5kb20gYnl0ZXMnKQogIC8vIGluIGNhc2UgYnJvd3NlcmlmeSAgaXNuJ3QgdXNpbmcgdGhlIFVpbnQ4QXJyYXkgdmVyc2lvbgogIHZhciByYXdCeXRlcyA9IG5ldyBnbG9iYWwuVWludDhBcnJheShzaXplKQoKICAvLyBUaGlzIHdpbGwgbm90IHdvcmsgaW4gb2xkZXIgYnJvd3NlcnMuCiAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS93aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcwogIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMocmF3Qnl0ZXMpCgogIC8vIHBoYW50b21qcyBkb2Vzbid0IGxpa2UgYSBidWZmZXIgYmVpbmcgcGFzc2VkIGhlcmUKICB2YXIgYnl0ZXMgPSBuZXcgQnVmZmVyKHJhd0J5dGVzLmJ1ZmZlcikKCiAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBjYihudWxsLCBieXRlcykKICAgIH0pCiAgfQoKICByZXR1cm4gYnl0ZXMKfQoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoJ19wcm9jZXNzJyksdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJfcHJvY2VzcyI6MTQxLCJidWZmZXIiOjcwfV0sMTQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCIuL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIpCgp9LHsiLi9saWIvX3N0cmVhbV9kdXBsZXguanMiOjE1MH1dLDE1MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIGEgZHVwbGV4IHN0cmVhbSBpcyBqdXN0IGEgc3RyZWFtIHRoYXQgaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuCi8vIFNpbmNlIEpTIGRvZXNuJ3QgaGF2ZSBtdWx0aXBsZSBwcm90b3R5cGFsIGluaGVyaXRhbmNlLCB0aGlzIGNsYXNzCi8vIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFJlYWRhYmxlLCBhbmQgdGhlbiBwYXJhc2l0aWNhbGx5IGZyb20KLy8gV3JpdGFibGUuCgondXNlIHN0cmljdCc7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHsKICB2YXIga2V5cyA9IFtdOwogIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpOwogIHJldHVybiBrZXlzOwp9Ci8qPC9yZXBsYWNlbWVudD4qLwoKCm1vZHVsZS5leHBvcnRzID0gRHVwbGV4OwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHByb2Nlc3NOZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpOwp1dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKLyo8L3JlcGxhY2VtZW50PiovCgp2YXIgUmVhZGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fcmVhZGFibGUnKTsKdmFyIFdyaXRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3dyaXRhYmxlJyk7Cgp1dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpOwoKdmFyIGtleXMgPSBvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSk7CmZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykgewogIHZhciBtZXRob2QgPSBrZXlzW3ZdOwogIGlmICghRHVwbGV4LnByb3RvdHlwZVttZXRob2RdKQogICAgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07Cn0KCmZ1bmN0aW9uIER1cGxleChvcHRpb25zKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpCiAgICByZXR1cm4gbmV3IER1cGxleChvcHRpb25zKTsKCiAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTsKICBXcml0YWJsZS5jYWxsKHRoaXMsIG9wdGlvbnMpOwoKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSkKICAgIHRoaXMucmVhZGFibGUgPSBmYWxzZTsKCiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy53cml0YWJsZSA9PT0gZmFsc2UpCiAgICB0aGlzLndyaXRhYmxlID0gZmFsc2U7CgogIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7CiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkKICAgIHRoaXMuYWxsb3dIYWxmT3BlbiA9IGZhbHNlOwoKICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTsKfQoKLy8gdGhlIG5vLWhhbGYtb3BlbiBlbmZvcmNlcgpmdW5jdGlvbiBvbmVuZCgpIHsKICAvLyBpZiB3ZSBhbGxvdyBoYWxmLW9wZW4gc3RhdGUsIG9yIGlmIHRoZSB3cml0YWJsZSBzaWRlIGVuZGVkLAogIC8vIHRoZW4gd2UncmUgb2suCiAgaWYgKHRoaXMuYWxsb3dIYWxmT3BlbiB8fCB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKQogICAgcmV0dXJuOwoKICAvLyBubyBtb3JlIGRhdGEgY2FuIGJlIHdyaXR0ZW4uCiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suCiAgcHJvY2Vzc05leHRUaWNrKG9uRW5kTlQsIHRoaXMpOwp9CgpmdW5jdGlvbiBvbkVuZE5UKHNlbGYpIHsKICBzZWxmLmVuZCgpOwp9CgpmdW5jdGlvbiBmb3JFYWNoICh4cywgZikgewogIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBmKHhzW2ldLCBpKTsKICB9Cn0KCn0seyIuL19zdHJlYW1fcmVhZGFibGUiOjE1MiwiLi9fc3RyZWFtX3dyaXRhYmxlIjoxNTQsImNvcmUtdXRpbC1pcyI6ODAsImluaGVyaXRzIjoxMjksInByb2Nlc3MtbmV4dGljay1hcmdzIjoxNDB9XSwxNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBhIHBhc3N0aHJvdWdoIHN0cmVhbS4KLy8gYmFzaWNhbGx5IGp1c3QgdGhlIG1vc3QgbWluaW1hbCBzb3J0IG9mIFRyYW5zZm9ybSBzdHJlYW0uCi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuCgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IFBhc3NUaHJvdWdoOwoKdmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vX3N0cmVhbV90cmFuc2Zvcm0nKTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnV0aWwuaW5oZXJpdHMoUGFzc1Rocm91Z2gsIFRyYW5zZm9ybSk7CgpmdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFBhc3NUaHJvdWdoKSkKICAgIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7CgogIFRyYW5zZm9ybS5jYWxsKHRoaXMsIG9wdGlvbnMpOwp9CgpQYXNzVGhyb3VnaC5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICBjYihudWxsLCBjaHVuayk7Cn07Cgp9LHsiLi9fc3RyZWFtX3RyYW5zZm9ybSI6MTUzLCJjb3JlLXV0aWwtaXMiOjgwLCJpbmhlcml0cyI6MTI5fV0sMTUyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChwcm9jZXNzKXsKJ3VzZSBzdHJpY3QnOwoKbW9kdWxlLmV4cG9ydHMgPSBSZWFkYWJsZTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciBwcm9jZXNzTmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzLW5leHRpY2stYXJncycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKTsKLyo8L3JlcGxhY2VtZW50PiovCgoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKLyo8L3JlcGxhY2VtZW50PiovCgpSZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTsKCnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIEVFbGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHsKICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoOwp9OwovKjwvcmVwbGFjZW1lbnQ+Ki8KCgoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIFN0cmVhbTsKKGZ1bmN0aW9uICgpe3RyeXsKICBTdHJlYW0gPSByZXF1aXJlKCdzdCcgKyAncmVhbScpOwp9Y2F0Y2goXyl7fWZpbmFsbHl7CiAgaWYgKCFTdHJlYW0pCiAgICBTdHJlYW0gPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cn19KCkpCi8qPC9yZXBsYWNlbWVudD4qLwoKdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7CnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCgoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGRlYnVnVXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTsKdmFyIGRlYnVnOwppZiAoZGVidWdVdGlsICYmIGRlYnVnVXRpbC5kZWJ1Z2xvZykgewogIGRlYnVnID0gZGVidWdVdGlsLmRlYnVnbG9nKCdzdHJlYW0nKTsKfSBlbHNlIHsKICBkZWJ1ZyA9IGZ1bmN0aW9uICgpIHt9Owp9Ci8qPC9yZXBsYWNlbWVudD4qLwoKdmFyIFN0cmluZ0RlY29kZXI7Cgp1dGlsLmluaGVyaXRzKFJlYWRhYmxlLCBTdHJlYW0pOwoKdmFyIER1cGxleDsKZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHsKICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpOwoKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnLiBVc2VkIHRvIG1ha2UgcmVhZChuKSBpZ25vcmUgbiBhbmQgdG8KICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheQogIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlOwoKICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KQogICAgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGU7CgogIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyCiAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyAiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlciIKICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrOwogIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7CiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gKGh3bSB8fCBod20gPT09IDApID8gaHdtIDogZGVmYXVsdEh3bTsKCiAgLy8gY2FzdCB0byBpbnRzLgogIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrOwoKICB0aGlzLmJ1ZmZlciA9IFtdOwogIHRoaXMubGVuZ3RoID0gMDsKICB0aGlzLnBpcGVzID0gbnVsbDsKICB0aGlzLnBpcGVzQ291bnQgPSAwOwogIHRoaXMuZmxvd2luZyA9IG51bGw7CiAgdGhpcy5lbmRlZCA9IGZhbHNlOwogIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlOwogIHRoaXMucmVhZGluZyA9IGZhbHNlOwoKICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSwKICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueQogIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsICJsYXRlciIgc2hvdWxkIGdlbmVyYWxseSBhbHNvCiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuCiAgdGhpcy5zeW5jID0gdHJ1ZTsKCiAgLy8gd2hlbmV2ZXIgd2UgcmV0dXJuIG51bGwsIHRoZW4gd2Ugc2V0IGEgZmxhZyB0byBzYXkKICAvLyB0aGF0IHdlJ3JlIGF3YWl0aW5nIGEgJ3JlYWRhYmxlJyBldmVudCBlbWlzc2lvbi4KICB0aGlzLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwogIHRoaXMuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CiAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlOwoKICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nCiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLgogIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC4KICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JzsKCiAgLy8gd2hlbiBwaXBpbmcsIHdlIG9ubHkgY2FyZSBhYm91dCAncmVhZGFibGUnIGV2ZW50cyB0aGF0IGhhcHBlbgogIC8vIGFmdGVyIHJlYWQoKWluZyBhbGwgdGhlIGJ5dGVzIGFuZCBub3QgZ2V0dGluZyBhbnkgcHVzaGJhY2suCiAgdGhpcy5yYW5PdXQgPSBmYWxzZTsKCiAgLy8gdGhlIG51bWJlciBvZiB3cml0ZXJzIHRoYXQgYXJlIGF3YWl0aW5nIGEgZHJhaW4gZXZlbnQgaW4gLnBpcGUoKXMKICB0aGlzLmF3YWl0RHJhaW4gPSAwOwoKICAvLyBpZiB0cnVlLCBhIG1heWJlUmVhZE1vcmUgaGFzIGJlZW4gc2NoZWR1bGVkCiAgdGhpcy5yZWFkaW5nTW9yZSA9IGZhbHNlOwoKICB0aGlzLmRlY29kZXIgPSBudWxsOwogIHRoaXMuZW5jb2RpbmcgPSBudWxsOwogIGlmIChvcHRpb25zLmVuY29kaW5nKSB7CiAgICBpZiAoIVN0cmluZ0RlY29kZXIpCiAgICAgIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyOwogICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7CiAgICB0aGlzLmVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZzsKICB9Cn0KCnZhciBEdXBsZXg7CmZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpIHsKICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpOwoKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKQogICAgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTsKCiAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpOwoKICAvLyBsZWdhY3kKICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTsKCiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMucmVhZCA9PT0gJ2Z1bmN0aW9uJykKICAgIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7CgogIFN0cmVhbS5jYWxsKHRoaXMpOwp9CgovLyBNYW51YWxseSBzaG92ZSBzb21ldGhpbmcgaW50byB0aGUgcmVhZCgpIGJ1ZmZlci4KLy8gVGhpcyByZXR1cm5zIHRydWUgaWYgdGhlIGhpZ2hXYXRlck1hcmsgaGFzIG5vdCBiZWVuIGhpdCB5ZXQsCi8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGQKLy8gd3JpdGUoKSBzb21lIG1vcmUuClJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHsKICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nOwogICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykgewogICAgICBjaHVuayA9IG5ldyBCdWZmZXIoY2h1bmssIGVuY29kaW5nKTsKICAgICAgZW5jb2RpbmcgPSAnJzsKICAgIH0KICB9CgogIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlKTsKfTsKCi8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpClJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oY2h1bmspIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgJycsIHRydWUpOwp9OwoKUmVhZGFibGUucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9PT0gZmFsc2U7Cn07CgpmdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCkgewogIHZhciBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspOwogIGlmIChlcikgewogICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpOwogIH0gZWxzZSBpZiAoY2h1bmsgPT09IG51bGwpIHsKICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKICAgIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSk7CiAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHsKICAgIGlmIChzdGF0ZS5lbmRlZCAmJiAhYWRkVG9Gcm9udCkgewogICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnB1c2goKSBhZnRlciBFT0YnKTsKICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZSk7CiAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZEVtaXR0ZWQgJiYgYWRkVG9Gcm9udCkgewogICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKTsKICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZSk7CiAgICB9IGVsc2UgewogICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhYWRkVG9Gcm9udCAmJiAhZW5jb2RpbmcpCiAgICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTsKCiAgICAgIGlmICghYWRkVG9Gcm9udCkKICAgICAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7CgogICAgICAvLyBpZiB3ZSB3YW50IHRoZSBkYXRhIG5vdywganVzdCBlbWl0IGl0LgogICAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLnN5bmMpIHsKICAgICAgICBzdHJlYW0uZW1pdCgnZGF0YScsIGNodW5rKTsKICAgICAgICBzdHJlYW0ucmVhZCgwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB1cGRhdGUgdGhlIGJ1ZmZlciBpbmZvLgogICAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKICAgICAgICBpZiAoYWRkVG9Gcm9udCkKICAgICAgICAgIHN0YXRlLmJ1ZmZlci51bnNoaWZ0KGNodW5rKTsKICAgICAgICBlbHNlCiAgICAgICAgICBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7CgogICAgICAgIGlmIChzdGF0ZS5uZWVkUmVhZGFibGUpCiAgICAgICAgICBlbWl0UmVhZGFibGUoc3RyZWFtKTsKICAgICAgfQoKICAgICAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKICAgIH0KICB9IGVsc2UgaWYgKCFhZGRUb0Zyb250KSB7CiAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7CiAgfQoKICByZXR1cm4gbmVlZE1vcmVEYXRhKHN0YXRlKTsKfQoKCi8vIGlmIGl0J3MgcGFzdCB0aGUgaGlnaCB3YXRlciBtYXJrLCB3ZSBjYW4gcHVzaCBpbiBzb21lIG1vcmUuCi8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lCi8vIG1vcmUgYnl0ZXMuICBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLAovLyBzdWNoIGFzIHRoZSByZXBsLiAgQWxzbywgaWYgdGhlIHB1c2goKSB0cmlnZ2VyZWQgYQovLyByZWFkYWJsZSBldmVudCwgYW5kIHRoZSB1c2VyIGNhbGxlZCByZWFkKGxhcmdlTnVtYmVyKSBzdWNoIHRoYXQKLy8gbmVlZFJlYWRhYmxlIHdhcyBzZXQsIHRoZW4gd2Ugb3VnaHQgdG8gcHVzaCBtb3JlLCBzbyB0aGF0IGFub3RoZXIKLy8gJ3JlYWRhYmxlJyBldmVudCB3aWxsIGJlIHRyaWdnZXJlZC4KZnVuY3Rpb24gbmVlZE1vcmVEYXRhKHN0YXRlKSB7CiAgcmV0dXJuICFzdGF0ZS5lbmRlZCAmJgogICAgICAgICAoc3RhdGUubmVlZFJlYWRhYmxlIHx8CiAgICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8CiAgICAgICAgICBzdGF0ZS5sZW5ndGggPT09IDApOwp9CgovLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4KUmVhZGFibGUucHJvdG90eXBlLnNldEVuY29kaW5nID0gZnVuY3Rpb24oZW5jKSB7CiAgaWYgKCFTdHJpbmdEZWNvZGVyKQogICAgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7CiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIoZW5jKTsKICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jOwogIHJldHVybiB0aGlzOwp9OwoKLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDhNQgp2YXIgTUFYX0hXTSA9IDB4ODAwMDAwOwpmdW5jdGlvbiBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKSB7CiAgaWYgKG4gPj0gTUFYX0hXTSkgewogICAgbiA9IE1BWF9IV007CiAgfSBlbHNlIHsKICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIKICAgIG4tLTsKICAgIG4gfD0gbiA+Pj4gMTsKICAgIG4gfD0gbiA+Pj4gMjsKICAgIG4gfD0gbiA+Pj4gNDsKICAgIG4gfD0gbiA+Pj4gODsKICAgIG4gfD0gbiA+Pj4gMTY7CiAgICBuKys7CiAgfQogIHJldHVybiBuOwp9CgpmdW5jdGlvbiBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKSB7CiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkKICAgIHJldHVybiAwOwoKICBpZiAoc3RhdGUub2JqZWN0TW9kZSkKICAgIHJldHVybiBuID09PSAwID8gMCA6IDE7CgogIGlmIChuID09PSBudWxsIHx8IGlzTmFOKG4pKSB7CiAgICAvLyBvbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWUKICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmJ1ZmZlci5sZW5ndGgpCiAgICAgIHJldHVybiBzdGF0ZS5idWZmZXJbMF0ubGVuZ3RoOwogICAgZWxzZQogICAgICByZXR1cm4gc3RhdGUubGVuZ3RoOwogIH0KCiAgaWYgKG4gPD0gMCkKICAgIHJldHVybiAwOwoKICAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgdGFyZ2V0IGJ1ZmZlciBsZXZlbCwKICAvLyB0aGVuIHJhaXNlIHRoZSB3YXRlciBtYXJrLiAgQnVtcCB1cCB0byB0aGUgbmV4dCBoaWdoZXN0CiAgLy8gcG93ZXIgb2YgMiwgdG8gcHJldmVudCBpbmNyZWFzaW5nIGl0IGV4Y2Vzc2l2ZWx5IGluIHRpbnkKICAvLyBhbW91bnRzLgogIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaykKICAgIHN0YXRlLmhpZ2hXYXRlck1hcmsgPSBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKTsKCiAgLy8gZG9uJ3QgaGF2ZSB0aGF0IG11Y2guICByZXR1cm4gbnVsbCwgdW5sZXNzIHdlJ3ZlIGVuZGVkLgogIGlmIChuID4gc3RhdGUubGVuZ3RoKSB7CiAgICBpZiAoIXN0YXRlLmVuZGVkKSB7CiAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CiAgICAgIHJldHVybiAwOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN0YXRlLmxlbmd0aDsKICAgIH0KICB9CgogIHJldHVybiBuOwp9CgovLyB5b3UgY2FuIG92ZXJyaWRlIGVpdGhlciB0aGlzIG1ldGhvZCwgb3IgdGhlIGFzeW5jIF9yZWFkKG4pIGJlbG93LgpSZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uKG4pIHsKICBkZWJ1ZygncmVhZCcsIG4pOwogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgdmFyIG5PcmlnID0gbjsKCiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuID4gMCkKICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwoKICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlCiAgLy8gYWxyZWFkeSBoYXZlIGEgYnVuY2ggb2YgZGF0YSBpbiB0aGUgYnVmZmVyLCB0aGVuIGp1c3QgdHJpZ2dlcgogIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLgogIGlmIChuID09PSAwICYmCiAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSAmJgogICAgICAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7CiAgICBkZWJ1ZygncmVhZDogZW1pdFJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5lbmRlZCk7CiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKQogICAgICBlbmRSZWFkYWJsZSh0aGlzKTsKICAgIGVsc2UKICAgICAgZW1pdFJlYWRhYmxlKHRoaXMpOwogICAgcmV0dXJuIG51bGw7CiAgfQoKICBuID0gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSk7CgogIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC4KICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgewogICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkKICAgICAgZW5kUmVhZGFibGUodGhpcyk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmUKICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW4KICAvLyBzeW50aGV0aWMgc3RyZWFtIGNhc2VzLCBzdWNoIGFzIHBhc3N0aHJvdWdoIHN0cmVhbXMsIF9yZWFkCiAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZQogIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuCiAgLy8gYmVmb3JlIHRoZXJlIHdhcyAqbm90KiBlbm91Z2guCiAgLy8KICAvLyBTbywgdGhlIHN0ZXBzIGFyZToKICAvLyAxLiBGaWd1cmUgb3V0IHdoYXQgdGhlIHN0YXRlIG9mIHRoaW5ncyB3aWxsIGJlIGFmdGVyIHdlIGRvCiAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci4KICAvLwogIC8vIDIuIElmIHRoYXQgcmVzdWx0aW5nIHN0YXRlIHdpbGwgdHJpZ2dlciBhIF9yZWFkLCB0aGVuIGNhbGwgX3JlYWQuCiAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzCiAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuCiAgLy8gdGhhdCB0aGUgUmVhZGFibGUgY2xhc3Mgc2hvdWxkIGJlaGF2ZSBpbXByb3Blcmx5LCBhcyBzdHJlYW1zIGFyZQogIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuCiAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsCiAgLy8gaGFzIHJldHVybmVkIHlldCksIHNvIHRoYXQgd2Uga25vdyB3aGV0aGVyIG9yIG5vdCBpdCdzIHNhZmUgdG8gZW1pdAogIC8vICdyZWFkYWJsZScgZXRjLgogIC8vCiAgLy8gMy4gQWN0dWFsbHkgcHVsbCB0aGUgcmVxdWVzdGVkIGNodW5rcyBvdXQgb2YgdGhlIGJ1ZmZlciBhbmQgcmV0dXJuLgoKICAvLyBpZiB3ZSBuZWVkIGEgcmVhZGFibGUgZXZlbnQsIHRoZW4gd2UgbmVlZCB0byBkbyBzb21lIHJlYWRpbmcuCiAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTsKICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7CgogIC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZQogIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHsKICAgIGRvUmVhZCA9IHRydWU7CiAgICBkZWJ1ZygnbGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsnLCBkb1JlYWQpOwogIH0KCiAgLy8gaG93ZXZlciwgaWYgd2UndmUgZW5kZWQsIHRoZW4gdGhlcmUncyBubyBwb2ludCwgYW5kIGlmIHdlJ3JlIGFscmVhZHkKICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuCiAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHsKICAgIGRvUmVhZCA9IGZhbHNlOwogICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpOwogIH0KCiAgaWYgKGRvUmVhZCkgewogICAgZGVidWcoJ2RvIHJlYWQnKTsKICAgIHN0YXRlLnJlYWRpbmcgPSB0cnVlOwogICAgc3RhdGUuc3luYyA9IHRydWU7CiAgICAvLyBpZiB0aGUgbGVuZ3RoIGlzIGN1cnJlbnRseSB6ZXJvLCB0aGVuIHdlICpuZWVkKiBhIHJlYWRhYmxlIGV2ZW50LgogICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkKICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2QKICAgIHRoaXMuX3JlYWQoc3RhdGUuaGlnaFdhdGVyTWFyayk7CiAgICBzdGF0ZS5zeW5jID0gZmFsc2U7CiAgfQoKICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLAogIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci4KICBpZiAoZG9SZWFkICYmICFzdGF0ZS5yZWFkaW5nKQogICAgbiA9IGhvd011Y2hUb1JlYWQobk9yaWcsIHN0YXRlKTsKCiAgdmFyIHJldDsKICBpZiAobiA+IDApCiAgICByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7CiAgZWxzZQogICAgcmV0ID0gbnVsbDsKCiAgaWYgKHJldCA9PT0gbnVsbCkgewogICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIG4gPSAwOwogIH0KCiAgc3RhdGUubGVuZ3RoIC09IG47CgogIC8vIElmIHdlIGhhdmUgbm90aGluZyBpbiB0aGUgYnVmZmVyLCB0aGVuIHdlIHdhbnQgdG8ga25vdwogIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci4KICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5lbmRlZCkKICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CgogIC8vIElmIHdlIHRyaWVkIHRvIHJlYWQoKSBwYXN0IHRoZSBFT0YsIHRoZW4gZW1pdCBlbmQgb24gdGhlIG5leHQgdGljay4KICBpZiAobk9yaWcgIT09IG4gJiYgc3RhdGUuZW5kZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKQogICAgZW5kUmVhZGFibGUodGhpcyk7CgogIGlmIChyZXQgIT09IG51bGwpCiAgICB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpOwoKICByZXR1cm4gcmV0Owp9OwoKZnVuY3Rpb24gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuaykgewogIHZhciBlciA9IG51bGw7CiAgaWYgKCEoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgJiYKICAgICAgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJgogICAgICBjaHVuayAhPT0gbnVsbCAmJgogICAgICBjaHVuayAhPT0gdW5kZWZpbmVkICYmCiAgICAgICFzdGF0ZS5vYmplY3RNb2RlKSB7CiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTsKICB9CiAgcmV0dXJuIGVyOwp9CgoKZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKHN0YXRlLmVuZGVkKSByZXR1cm47CiAgaWYgKHN0YXRlLmRlY29kZXIpIHsKICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7CiAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB7CiAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTsKICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwogICAgfQogIH0KICBzdGF0ZS5lbmRlZCA9IHRydWU7CgogIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLgogIGVtaXRSZWFkYWJsZShzdHJlYW0pOwp9CgovLyBEb24ndCBlbWl0IHJlYWRhYmxlIHJpZ2h0IGF3YXkgaW4gc3luYyBtb2RlLCBiZWNhdXNlIHRoaXMgY2FuIHRyaWdnZXIKLy8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyCi8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC4KZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkgewogIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTsKICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkgewogICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpOwogICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIGlmIChzdGF0ZS5zeW5jKQogICAgICBwcm9jZXNzTmV4dFRpY2soZW1pdFJlYWRhYmxlXywgc3RyZWFtKTsKICAgIGVsc2UKICAgICAgZW1pdFJlYWRhYmxlXyhzdHJlYW0pOwogIH0KfQoKZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHsKICBkZWJ1ZygnZW1pdCByZWFkYWJsZScpOwogIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpOwogIGZsb3coc3RyZWFtKTsKfQoKCi8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsCi8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWQKLy8gaW4gdHVybiBhbm90aGVyIF9yZWFkKG4pIGNhbGwsIGluIHdoaWNoIGNhc2UgcmVhZGluZyA9IHRydWUgaWYKLy8gaXQncyBpbiBwcm9ncmVzcy4KLy8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSwKLy8gdGhlbiBnbyBhaGVhZCBhbmQgdHJ5IHRvIHJlYWQgc29tZSBtb3JlIHByZWVtcHRpdmVseS4KZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkgewogICAgc3RhdGUucmVhZGluZ01vcmUgPSB0cnVlOwogICAgcHJvY2Vzc05leHRUaWNrKG1heWJlUmVhZE1vcmVfLCBzdHJlYW0sIHN0YXRlKTsKICB9Cn0KCmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHsKICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoOwogIHdoaWxlICghc3RhdGUucmVhZGluZyAmJiAhc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUuZW5kZWQgJiYKICAgICAgICAgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykgewogICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7CiAgICBzdHJlYW0ucmVhZCgwKTsKICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aCkKICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy4KICAgICAgYnJlYWs7CiAgICBlbHNlCiAgICAgIGxlbiA9IHN0YXRlLmxlbmd0aDsKICB9CiAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTsKfQoKLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgovLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLgovLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgImxlbmd0aCIgaXMgc29tZXdoYXQKLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLgpSZWFkYWJsZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbihuKSB7CiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJykpOwp9OwoKUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBwaXBlT3B0cykgewogIHZhciBzcmMgPSB0aGlzOwogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgogIHN3aXRjaCAoc3RhdGUucGlwZXNDb3VudCkgewogICAgY2FzZSAwOgogICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7CiAgICAgIGJyZWFrOwogICAgY2FzZSAxOgogICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTsKICAgICAgYnJlYWs7CiAgfQogIHN0YXRlLnBpcGVzQ291bnQgKz0gMTsKICBkZWJ1ZygncGlwZSBjb3VudD0lZCBvcHRzPSVqJywgc3RhdGUucGlwZXNDb3VudCwgcGlwZU9wdHMpOwoKICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmCiAgICAgICAgICAgICAgZGVzdCAhPT0gcHJvY2Vzcy5zdGRvdXQgJiYKICAgICAgICAgICAgICBkZXN0ICE9PSBwcm9jZXNzLnN0ZGVycjsKCiAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZCA6IGNsZWFudXA7CiAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpCiAgICBwcm9jZXNzTmV4dFRpY2soZW5kRm4pOwogIGVsc2UKICAgIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7CgogIGRlc3Qub24oJ3VucGlwZScsIG9udW5waXBlKTsKICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSkgewogICAgZGVidWcoJ29udW5waXBlJyk7CiAgICBpZiAocmVhZGFibGUgPT09IHNyYykgewogICAgICBjbGVhbnVwKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvbmVuZCgpIHsKICAgIGRlYnVnKCdvbmVuZCcpOwogICAgZGVzdC5lbmQoKTsKICB9CgogIC8vIHdoZW4gdGhlIGRlc3QgZHJhaW5zLCBpdCByZWR1Y2VzIHRoZSBhd2FpdERyYWluIGNvdW50ZXIKICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKCkKICAvLyBoYW5kbGVyIGluIGZsb3coKSwgYnV0IGFkZGluZyBhbmQgcmVtb3ZpbmcgcmVwZWF0ZWRseSBpcwogIC8vIHRvbyBzbG93LgogIHZhciBvbmRyYWluID0gcGlwZU9uRHJhaW4oc3JjKTsKICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pOwoKICB2YXIgY2xlYW5lZFVwID0gZmFsc2U7CiAgZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgIGRlYnVnKCdjbGVhbnVwJyk7CiAgICAvLyBjbGVhbnVwIGV2ZW50IGhhbmRsZXJzIG9uY2UgdGhlIHBpcGUgaXMgYnJva2VuCiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCd1bnBpcGUnLCBvbnVucGlwZSk7CiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTsKICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7CiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpOwoKICAgIGNsZWFuZWRVcCA9IHRydWU7CgogICAgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpcwogICAgLy8gc3BlY2lmaWMgd3JpdGVyLCB0aGVuIGl0IHdvdWxkIGNhdXNlIGl0IHRvIG5ldmVyIHN0YXJ0CiAgICAvLyBmbG93aW5nIGFnYWluLgogICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LgogICAgLy8gSWYgd2UgZG9uJ3Qga25vdywgdGhlbiBhc3N1bWUgdGhhdCB3ZSBhcmUgd2FpdGluZyBmb3Igb25lLgogICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiYKICAgICAgICAoIWRlc3QuX3dyaXRhYmxlU3RhdGUgfHwgZGVzdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW4pKQogICAgICBvbmRyYWluKCk7CiAgfQoKICBzcmMub24oJ2RhdGEnLCBvbmRhdGEpOwogIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykgewogICAgZGVidWcoJ29uZGF0YScpOwogICAgdmFyIHJldCA9IGRlc3Qud3JpdGUoY2h1bmspOwogICAgaWYgKGZhbHNlID09PSByZXQpIHsKICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlCiAgICAgIC8vIHRvIGdldCBzdHVjayBpbiBhIHBlcm1hbmVudGx5IHBhdXNlZCBzdGF0ZSBpZiB0aGF0IHdyaXRlCiAgICAgIC8vIGFsc28gcmV0dXJuZWQgZmFsc2UuCiAgICAgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmCiAgICAgICAgICBzdGF0ZS5waXBlc1swXSA9PT0gZGVzdCAmJgogICAgICAgICAgc3JjLmxpc3RlbmVyQ291bnQoJ2RhdGEnKSA9PT0gMSAmJgogICAgICAgICAgIWNsZWFuZWRVcCkgewogICAgICAgIGRlYnVnKCdmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UnLCBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbik7CiAgICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKzsKICAgICAgfQogICAgICBzcmMucGF1c2UoKTsKICAgIH0KICB9CgogIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LgogIC8vIGhvd2V2ZXIsIGRvbid0IHN1cHByZXNzIHRoZSB0aHJvd2luZyBiZWhhdmlvciBmb3IgdGhpcy4KICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7CiAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTsKICAgIHVucGlwZSgpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKICAgIGlmIChFRWxpc3RlbmVyQ291bnQoZGVzdCwgJ2Vycm9yJykgPT09IDApCiAgICAgIGRlc3QuZW1pdCgnZXJyb3InLCBlcik7CiAgfQogIC8vIFRoaXMgaXMgYSBicnV0YWxseSB1Z2x5IGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb3VyIGVycm9yIGhhbmRsZXIKICAvLyBpcyBhdHRhY2hlZCBiZWZvcmUgYW55IHVzZXJsYW5kIG9uZXMuICBORVZFUiBETyBUSElTLgogIGlmICghZGVzdC5fZXZlbnRzIHx8ICFkZXN0Ll9ldmVudHMuZXJyb3IpCiAgICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpOwogIGVsc2UgaWYgKGlzQXJyYXkoZGVzdC5fZXZlbnRzLmVycm9yKSkKICAgIGRlc3QuX2V2ZW50cy5lcnJvci51bnNoaWZ0KG9uZXJyb3IpOwogIGVsc2UKICAgIGRlc3QuX2V2ZW50cy5lcnJvciA9IFtvbmVycm9yLCBkZXN0Ll9ldmVudHMuZXJyb3JdOwoKCiAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS4KICBmdW5jdGlvbiBvbmNsb3NlKCkgewogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpOwogICAgdW5waXBlKCk7CiAgfQogIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTsKICBmdW5jdGlvbiBvbmZpbmlzaCgpIHsKICAgIGRlYnVnKCdvbmZpbmlzaCcpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTsKICAgIHVucGlwZSgpOwogIH0KICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCiAgZnVuY3Rpb24gdW5waXBlKCkgewogICAgZGVidWcoJ3VucGlwZScpOwogICAgc3JjLnVucGlwZShkZXN0KTsKICB9CgogIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvCiAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTsKCiAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LgogIGlmICghc3RhdGUuZmxvd2luZykgewogICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7CiAgICBzcmMucmVzdW1lKCk7CiAgfQoKICByZXR1cm4gZGVzdDsKfTsKCmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykgewogIHJldHVybiBmdW5jdGlvbigpIHsKICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTsKICAgIGRlYnVnKCdwaXBlT25EcmFpbicsIHN0YXRlLmF3YWl0RHJhaW4pOwogICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4pCiAgICAgIHN0YXRlLmF3YWl0RHJhaW4tLTsKICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFbGlzdGVuZXJDb3VudChzcmMsICdkYXRhJykpIHsKICAgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7CiAgICAgIGZsb3coc3JjKTsKICAgIH0KICB9Owp9CgoKUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uKGRlc3QpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoKICAvLyBpZiB3ZSdyZSBub3QgcGlwaW5nIGFueXdoZXJlLCB0aGVuIGRvIG5vdGhpbmcuCiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDApCiAgICByZXR1cm4gdGhpczsKCiAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLgogIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSB7CiAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS4KICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKQogICAgICByZXR1cm4gdGhpczsKCiAgICBpZiAoIWRlc3QpCiAgICAgIGRlc3QgPSBzdGF0ZS5waXBlczsKCiAgICAvLyBnb3QgYSBtYXRjaC4KICAgIHN0YXRlLnBpcGVzID0gbnVsbDsKICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwOwogICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwogICAgaWYgKGRlc3QpCiAgICAgIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuCgogIGlmICghZGVzdCkgewogICAgLy8gcmVtb3ZlIGFsbC4KICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzOwogICAgdmFyIGxlbiA9IHN0YXRlLnBpcGVzQ291bnQ7CiAgICBzdGF0ZS5waXBlcyA9IG51bGw7CiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDsKICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzKTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gdHJ5IHRvIGZpbmQgdGhlIHJpZ2h0IG9uZS4KICB2YXIgaSA9IGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpOwogIGlmIChpID09PSAtMSkKICAgIHJldHVybiB0aGlzOwoKICBzdGF0ZS5waXBlcy5zcGxpY2UoaSwgMSk7CiAgc3RhdGUucGlwZXNDb3VudCAtPSAxOwogIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKQogICAgc3RhdGUucGlwZXMgPSBzdGF0ZS5waXBlc1swXTsKCiAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovLyBzZXQgdXAgZGF0YSBldmVudHMgaWYgdGhleSBhcmUgYXNrZWQgZm9yCi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nClJlYWRhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2LCBmbikgewogIHZhciByZXMgPSBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTsKCiAgLy8gSWYgbGlzdGVuaW5nIHRvIGRhdGEsIGFuZCBpdCBoYXMgbm90IGV4cGxpY2l0bHkgYmVlbiBwYXVzZWQsCiAgLy8gdGhlbiBjYWxsIHJlc3VtZSB0byBzdGFydCB0aGUgZmxvdyBvZiBkYXRhIG9uIHRoZSBuZXh0IHRpY2suCiAgaWYgKGV2ID09PSAnZGF0YScgJiYgZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykgewogICAgdGhpcy5yZXN1bWUoKTsKICB9CgogIGlmIChldiA9PT0gJ3JlYWRhYmxlJyAmJiB0aGlzLnJlYWRhYmxlKSB7CiAgICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgaWYgKCFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykgewogICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHRydWU7CiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwogICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHsKICAgICAgICBwcm9jZXNzTmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGVuZ3RoKSB7CiAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMsIHN0YXRlKTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHJlczsKfTsKUmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uOwoKZnVuY3Rpb24gblJlYWRpbmdOZXh0VGljayhzZWxmKSB7CiAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpOwogIHNlbGYucmVhZCgwKTsKfQoKLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSQovLyBJZiB0aGUgdXNlciB1c2VzIHRoZW0sIHRoZW4gc3dpdGNoIGludG8gb2xkIG1vZGUuClJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbigpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogIGlmICghc3RhdGUuZmxvd2luZykgewogICAgZGVidWcoJ3Jlc3VtZScpOwogICAgc3RhdGUuZmxvd2luZyA9IHRydWU7CiAgICByZXN1bWUodGhpcywgc3RhdGUpOwogIH0KICByZXR1cm4gdGhpczsKfTsKCmZ1bmN0aW9uIHJlc3VtZShzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKCFzdGF0ZS5yZXN1bWVTY2hlZHVsZWQpIHsKICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7CiAgICBwcm9jZXNzTmV4dFRpY2socmVzdW1lXywgc3RyZWFtLCBzdGF0ZSk7CiAgfQp9CgpmdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoIXN0YXRlLnJlYWRpbmcpIHsKICAgIGRlYnVnKCdyZXN1bWUgcmVhZCAwJyk7CiAgICBzdHJlYW0ucmVhZCgwKTsKICB9CgogIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlOwogIHN0cmVhbS5lbWl0KCdyZXN1bWUnKTsKICBmbG93KHN0cmVhbSk7CiAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLnJlYWRpbmcpCiAgICBzdHJlYW0ucmVhZCgwKTsKfQoKUmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7CiAgZGVidWcoJ2NhbGwgcGF1c2UgZmxvd2luZz0laicsIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyk7CiAgaWYgKGZhbHNlICE9PSB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpIHsKICAgIGRlYnVnKCdwYXVzZScpOwogICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gZmFsc2U7CiAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7CiAgfQogIHJldHVybiB0aGlzOwp9OwoKZnVuY3Rpb24gZmxvdyhzdHJlYW0pIHsKICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CiAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTsKICBpZiAoc3RhdGUuZmxvd2luZykgewogICAgZG8gewogICAgICB2YXIgY2h1bmsgPSBzdHJlYW0ucmVhZCgpOwogICAgfSB3aGlsZSAobnVsbCAhPT0gY2h1bmsgJiYgc3RhdGUuZmxvd2luZyk7CiAgfQp9CgovLyB3cmFwIGFuIG9sZC1zdHlsZSBzdHJlYW0gYXMgdGhlIGFzeW5jIGRhdGEgc291cmNlLgovLyBUaGlzIGlzICpub3QqIHBhcnQgb2YgdGhlIHJlYWRhYmxlIHN0cmVhbSBpbnRlcmZhY2UuCi8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LgpSZWFkYWJsZS5wcm90b3R5cGUud3JhcCA9IGZ1bmN0aW9uKHN0cmVhbSkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgdmFyIHBhdXNlZCA9IGZhbHNlOwoKICB2YXIgc2VsZiA9IHRoaXM7CiAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbigpIHsKICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpOwogICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7CiAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7CiAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpCiAgICAgICAgc2VsZi5wdXNoKGNodW5rKTsKICAgIH0KCiAgICBzZWxmLnB1c2gobnVsbCk7CiAgfSk7CgogIHN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uKGNodW5rKSB7CiAgICBkZWJ1Zygnd3JhcHBlZCBkYXRhJyk7CiAgICBpZiAoc3RhdGUuZGVjb2RlcikKICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTsKCiAgICAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGUKICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSkKICAgICAgcmV0dXJuOwogICAgZWxzZSBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSkKICAgICAgcmV0dXJuOwoKICAgIHZhciByZXQgPSBzZWxmLnB1c2goY2h1bmspOwogICAgaWYgKCFyZXQpIHsKICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgICAgc3RyZWFtLnBhdXNlKCk7CiAgICB9CiAgfSk7CgogIC8vIHByb3h5IGFsbCB0aGUgb3RoZXIgbWV0aG9kcy4KICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy4KICBmb3IgKHZhciBpIGluIHN0cmVhbSkgewogICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbihtZXRob2QpIHsgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7CiAgICAgIH07IH0oaSk7CiAgICB9CiAgfQoKICAvLyBwcm94eSBjZXJ0YWluIGltcG9ydGFudCBldmVudHMuCiAgdmFyIGV2ZW50cyA9IFsnZXJyb3InLCAnY2xvc2UnLCAnZGVzdHJveScsICdwYXVzZScsICdyZXN1bWUnXTsKICBmb3JFYWNoKGV2ZW50cywgZnVuY3Rpb24oZXYpIHsKICAgIHN0cmVhbS5vbihldiwgc2VsZi5lbWl0LmJpbmQoc2VsZiwgZXYpKTsKICB9KTsKCiAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZQogIC8vIHVuZGVybHlpbmcgc3RyZWFtLgogIHNlbGYuX3JlYWQgPSBmdW5jdGlvbihuKSB7CiAgICBkZWJ1Zygnd3JhcHBlZCBfcmVhZCcsIG4pOwogICAgaWYgKHBhdXNlZCkgewogICAgICBwYXVzZWQgPSBmYWxzZTsKICAgICAgc3RyZWFtLnJlc3VtZSgpOwogICAgfQogIH07CgogIHJldHVybiBzZWxmOwp9OwoKCi8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS4KUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7CgovLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuCi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuCmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7CiAgdmFyIGxpc3QgPSBzdGF0ZS5idWZmZXI7CiAgdmFyIGxlbmd0aCA9IHN0YXRlLmxlbmd0aDsKICB2YXIgc3RyaW5nTW9kZSA9ICEhc3RhdGUuZGVjb2RlcjsKICB2YXIgb2JqZWN0TW9kZSA9ICEhc3RhdGUub2JqZWN0TW9kZTsKICB2YXIgcmV0OwoKICAvLyBub3RoaW5nIGluIHRoZSBsaXN0LCBkZWZpbml0ZWx5IGVtcHR5LgogIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkKICAgIHJldHVybiBudWxsOwoKICBpZiAobGVuZ3RoID09PSAwKQogICAgcmV0ID0gbnVsbDsKICBlbHNlIGlmIChvYmplY3RNb2RlKQogICAgcmV0ID0gbGlzdC5zaGlmdCgpOwogIGVsc2UgaWYgKCFuIHx8IG4gPj0gbGVuZ3RoKSB7CiAgICAvLyByZWFkIGl0IGFsbCwgdHJ1bmNhdGUgdGhlIGFycmF5LgogICAgaWYgKHN0cmluZ01vZGUpCiAgICAgIHJldCA9IGxpc3Quam9pbignJyk7CiAgICBlbHNlIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkKICAgICAgcmV0ID0gbGlzdFswXTsKICAgIGVsc2UKICAgICAgcmV0ID0gQnVmZmVyLmNvbmNhdChsaXN0LCBsZW5ndGgpOwogICAgbGlzdC5sZW5ndGggPSAwOwogIH0gZWxzZSB7CiAgICAvLyByZWFkIGp1c3Qgc29tZSBvZiBpdC4KICAgIGlmIChuIDwgbGlzdFswXS5sZW5ndGgpIHsKICAgICAgLy8ganVzdCB0YWtlIGEgcGFydCBvZiB0aGUgZmlyc3QgbGlzdCBpdGVtLgogICAgICAvLyBzbGljZSBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy4KICAgICAgdmFyIGJ1ZiA9IGxpc3RbMF07CiAgICAgIHJldCA9IGJ1Zi5zbGljZSgwLCBuKTsKICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShuKTsKICAgIH0gZWxzZSBpZiAobiA9PT0gbGlzdFswXS5sZW5ndGgpIHsKICAgICAgLy8gZmlyc3QgbGlzdCBpcyBhIHBlcmZlY3QgbWF0Y2gKICAgICAgcmV0ID0gbGlzdC5zaGlmdCgpOwogICAgfSBlbHNlIHsKICAgICAgLy8gY29tcGxleCBjYXNlLgogICAgICAvLyB3ZSBoYXZlIGVub3VnaCB0byBjb3ZlciBpdCwgYnV0IGl0IHNwYW5zIHBhc3QgdGhlIGZpcnN0IGJ1ZmZlci4KICAgICAgaWYgKHN0cmluZ01vZGUpCiAgICAgICAgcmV0ID0gJyc7CiAgICAgIGVsc2UKICAgICAgICByZXQgPSBuZXcgQnVmZmVyKG4pOwoKICAgICAgdmFyIGMgPSAwOwogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxpc3QubGVuZ3RoOyBpIDwgbCAmJiBjIDwgbjsgaSsrKSB7CiAgICAgICAgdmFyIGJ1ZiA9IGxpc3RbMF07CiAgICAgICAgdmFyIGNweSA9IE1hdGgubWluKG4gLSBjLCBidWYubGVuZ3RoKTsKCiAgICAgICAgaWYgKHN0cmluZ01vZGUpCiAgICAgICAgICByZXQgKz0gYnVmLnNsaWNlKDAsIGNweSk7CiAgICAgICAgZWxzZQogICAgICAgICAgYnVmLmNvcHkocmV0LCBjLCAwLCBjcHkpOwoKICAgICAgICBpZiAoY3B5IDwgYnVmLmxlbmd0aCkKICAgICAgICAgIGxpc3RbMF0gPSBidWYuc2xpY2UoY3B5KTsKICAgICAgICBlbHNlCiAgICAgICAgICBsaXN0LnNoaWZ0KCk7CgogICAgICAgIGMgKz0gY3B5OwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBlbmRSZWFkYWJsZShzdHJlYW0pIHsKICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgogIC8vIElmIHdlIGdldCBoZXJlIGJlZm9yZSBjb25zdW1pbmcgYWxsIHRoZSBieXRlcywgdGhlbiB0aGF0IGlzIGEKICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uCiAgaWYgKHN0YXRlLmxlbmd0aCA+IDApCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZFJlYWRhYmxlIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7CgogIGlmICghc3RhdGUuZW5kRW1pdHRlZCkgewogICAgc3RhdGUuZW5kZWQgPSB0cnVlOwogICAgcHJvY2Vzc05leHRUaWNrKGVuZFJlYWRhYmxlTlQsIHN0YXRlLCBzdHJlYW0pOwogIH0KfQoKZnVuY3Rpb24gZW5kUmVhZGFibGVOVChzdGF0ZSwgc3RyZWFtKSB7CiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuCiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkgewogICAgc3RhdGUuZW5kRW1pdHRlZCA9IHRydWU7CiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTsKICAgIHN0cmVhbS5lbWl0KCdlbmQnKTsKICB9Cn0KCmZ1bmN0aW9uIGZvckVhY2ggKHhzLCBmKSB7CiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGYoeHNbaV0sIGkpOwogIH0KfQoKZnVuY3Rpb24gaW5kZXhPZiAoeHMsIHgpIHsKICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgaWYgKHhzW2ldID09PSB4KSByZXR1cm4gaTsKICB9CiAgcmV0dXJuIC0xOwp9Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgnX3Byb2Nlc3MnKSkKfSx7Ii4vX3N0cmVhbV9kdXBsZXgiOjE1MCwiX3Byb2Nlc3MiOjE0MSwiYnVmZmVyIjo3MCwiY29yZS11dGlsLWlzIjo4MCwiZXZlbnRzIjo3MiwiaW5oZXJpdHMiOjEyOSwiaXNhcnJheSI6MTMxLCJwcm9jZXNzLW5leHRpY2stYXJncyI6MTQwLCJzdHJpbmdfZGVjb2Rlci8iOjE3MiwidXRpbCI6NDN9XSwxNTM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvCi8vIHNvbWV0aGluZyB3aXRoIHRoZSBkYXRhLiAgU29tZXRpbWVzIGl0J3MgY2FsbGVkIGEgImZpbHRlciIsCi8vIGJ1dCB0aGF0J3Mgbm90IGEgZ3JlYXQgbmFtZSBmb3IgaXQsIHNpbmNlIHRoYXQgaW1wbGllcyBhIHRoaW5nIHdoZXJlCi8vIHNvbWUgYml0cyBwYXNzIHRocm91Z2gsIGFuZCBvdGhlcnMgYXJlIHNpbXBseSBpZ25vcmVkLiAgKFRoYXQgd291bGQKLy8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKQovLwovLyBXaGlsZSB0aGUgb3V0cHV0IGlzIGNhdXNhbGx5IHJlbGF0ZWQgdG8gdGhlIGlucHV0LCBpdCdzIG5vdCBhCi8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLAovLyBhIHpsaWIgc3RyZWFtIG1pZ2h0IHRha2UgbXVsdGlwbGUgcGxhaW4tdGV4dCB3cml0ZXMoKSwgYW5kIHRoZW4KLy8gZW1pdCBhIHNpbmdsZSBjb21wcmVzc2VkIGNodW5rIHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLgovLwovLyBIZXJlJ3MgaG93IHRoaXMgd29ya3M6Ci8vCi8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZQovLyBzdHJlYW0gY2xhc3Nlcy4gIFdoZW4geW91IHdyaXRlKGNodW5rKSwgdGhhdCBjYWxscyBfd3JpdGUoY2h1bmssY2IpCi8vIGludGVybmFsbHksIGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYSBsb3Qgb2YgcGVuZGluZyB3cml0ZXMKLy8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbAovLyB0aGVyZSdzIGVub3VnaCBwZW5kaW5nIHJlYWRhYmxlIGRhdGEgYnVmZmVyZWQgdXAuCi8vCi8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuCi8vIF9yZWFkKG4pIGlzIGNhbGxlZCwgaXQgdHJhbnNmb3JtcyB0aGUgcXVldWVkIHVwIGRhdGEsIGNhbGxpbmcgdGhlCi8vIGJ1ZmZlcmVkIF93cml0ZSBjYidzIGFzIGl0IGNvbnN1bWVzIGNodW5rcy4gIElmIGNvbnN1bWluZyBhIHNpbmdsZQovLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdAovLyBvdXRwdXR0ZWQgYml0IGNhbGxzIHRoZSByZWFkY2IsIGFuZCBzdWJzZXF1ZW50IGNodW5rcyBqdXN0IGdvIGludG8KLy8gdGhlIHJlYWQgYnVmZmVyLCBhbmQgd2lsbCBjYXVzZSBpdCB0byBlbWl0ICdyZWFkYWJsZScgaWYgbmVjZXNzYXJ5LgovLwovLyBUaGlzIHdheSwgYmFjay1wcmVzc3VyZSBpcyBhY3R1YWxseSBkZXRlcm1pbmVkIGJ5IHRoZSByZWFkaW5nIHNpZGUsCi8vIHNpbmNlIF9yZWFkIGhhcyB0byBiZSBjYWxsZWQgdG8gc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBjaHVuay4gIEhvd2V2ZXIsCi8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmcKLy8gaGVyZS4gIEZvciBleGFtcGxlLCBpbWFnaW5lIGEgc3RyZWFtIHdoZXJlIGV2ZXJ5IGJ5dGUgb2YgaW5wdXQgaXMKLy8gaW50ZXJwcmV0ZWQgYXMgYW4gaW50ZWdlciBmcm9tIDAtMjU1LCBhbmQgdGhlbiByZXN1bHRzIGluIHRoYXQgbWFueQovLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluCi8vIDFrYiBvZiBkYXRhIGJlaW5nIG91dHB1dC4gIEluIHRoaXMgY2FzZSwgeW91IGNvdWxkIHdyaXRlIGEgdmVyeSBzbWFsbAovLyBhbW91bnQgb2YgaW5wdXQsIGFuZCBlbmQgdXAgd2l0aCBhIHZlcnkgbGFyZ2UgYW1vdW50IG9mIG91dHB1dC4gIEluCi8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbAovLyB0aGUgc3lzdGVtIHRvIHN0b3AgZG9pbmcgdGhlIHRyYW5zZm9ybS4gIEEgc2luZ2xlIDRNQiB3cml0ZSBjb3VsZAovLyBjYXVzZSB0aGUgc3lzdGVtIHRvIHJ1biBvdXQgb2YgbWVtb3J5LgovLwovLyBIb3dldmVyLCBldmVuIGluIHN1Y2ggYSBwYXRob2xvZ2ljYWwgY2FzZSwgb25seSBhIHNpbmdsZSB3cml0dGVuIGNodW5rCi8vIHdvdWxkIGJlIGNvbnN1bWVkLCBhbmQgdGhlbiB0aGUgcmVzdCB3b3VsZCB3YWl0ICh1bi10cmFuc2Zvcm1lZCkgdW50aWwKLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuCgondXNlIHN0cmljdCc7Cgptb2R1bGUuZXhwb3J0cyA9IFRyYW5zZm9ybTsKCnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpOwp1dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKLyo8L3JlcGxhY2VtZW50PiovCgp1dGlsLmluaGVyaXRzKFRyYW5zZm9ybSwgRHVwbGV4KTsKCgpmdW5jdGlvbiBUcmFuc2Zvcm1TdGF0ZShzdHJlYW0pIHsKICB0aGlzLmFmdGVyVHJhbnNmb3JtID0gZnVuY3Rpb24oZXIsIGRhdGEpIHsKICAgIHJldHVybiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKTsKICB9OwoKICB0aGlzLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTsKICB0aGlzLnRyYW5zZm9ybWluZyA9IGZhbHNlOwogIHRoaXMud3JpdGVjYiA9IG51bGw7CiAgdGhpcy53cml0ZWNodW5rID0gbnVsbDsKfQoKZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSkgewogIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7CiAgdHMudHJhbnNmb3JtaW5nID0gZmFsc2U7CgogIHZhciBjYiA9IHRzLndyaXRlY2I7CgogIGlmICghY2IpCiAgICByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdubyB3cml0ZWNiIGluIFRyYW5zZm9ybSBjbGFzcycpKTsKCiAgdHMud3JpdGVjaHVuayA9IG51bGw7CiAgdHMud3JpdGVjYiA9IG51bGw7CgogIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHVuZGVmaW5lZCkKICAgIHN0cmVhbS5wdXNoKGRhdGEpOwoKICBpZiAoY2IpCiAgICBjYihlcik7CgogIHZhciBycyA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICBycy5yZWFkaW5nID0gZmFsc2U7CiAgaWYgKHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB7CiAgICBzdHJlYW0uX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7CiAgfQp9CgoKZnVuY3Rpb24gVHJhbnNmb3JtKG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSkKICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKG9wdGlvbnMpOwoKICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSBuZXcgVHJhbnNmb3JtU3RhdGUodGhpcyk7CgogIC8vIHdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy4KICB2YXIgc3RyZWFtID0gdGhpczsKCiAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuCiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwoKICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3MKICAvLyB0aGF0IFJlYWRhYmxlIHdhbnRzIGJlZm9yZSB0aGUgZmlyc3QgX3JlYWQgY2FsbCwgc28gdW5zZXQgdGhlCiAgLy8gc3luYyBndWFyZCBmbGFnLgogIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlOwoKICBpZiAob3B0aW9ucykgewogICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykKICAgICAgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07CgogICAgaWYgKHR5cGVvZiBvcHRpb25zLmZsdXNoID09PSAnZnVuY3Rpb24nKQogICAgICB0aGlzLl9mbHVzaCA9IG9wdGlvbnMuZmx1c2g7CiAgfQoKICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uKCkgewogICAgaWYgKHR5cGVvZiB0aGlzLl9mbHVzaCA9PT0gJ2Z1bmN0aW9uJykKICAgICAgdGhpcy5fZmx1c2goZnVuY3Rpb24oZXIpIHsKICAgICAgICBkb25lKHN0cmVhbSwgZXIpOwogICAgICB9KTsKICAgIGVsc2UKICAgICAgZG9uZShzdHJlYW0pOwogIH0pOwp9CgpUcmFuc2Zvcm0ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHsKICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtID0gZmFsc2U7CiAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7Cn07CgovLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiEKLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgovLyAnY2h1bmsnIGlzIGFuIGlucHV0IGNodW5rLgovLwovLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXQKLy8gdG8gdGhlIHJlYWRhYmxlIHNpZGUuICBZb3UgbWF5IGNhbGwgJ3B1c2gnIHplcm8gb3IgbW9yZSB0aW1lcy4KLy8KLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3MKLy8gYW4gZXJyb3IsIHRoZW4gdGhhdCdsbCBwdXQgdGhlIGh1cnQgb24gdGhlIHdob2xlIG9wZXJhdGlvbi4gIElmIHlvdQovLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLgpUcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTsKfTsKClRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlOwogIHRzLndyaXRlY2IgPSBjYjsKICB0cy53cml0ZWNodW5rID0gY2h1bms7CiAgdHMud3JpdGVlbmNvZGluZyA9IGVuY29kaW5nOwogIGlmICghdHMudHJhbnNmb3JtaW5nKSB7CiAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgaWYgKHRzLm5lZWRUcmFuc2Zvcm0gfHwKICAgICAgICBycy5uZWVkUmVhZGFibGUgfHwKICAgICAgICBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKQogICAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspOwogIH0KfTsKCi8vIERvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGFyZ3MgYXJlIGhlcmUuCi8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuCi8vIFRoYXQgd2UgZ290IGhlcmUgbWVhbnMgdGhhdCB0aGUgcmVhZGFibGUgc2lkZSB3YW50cyBtb3JlIGRhdGEuClRyYW5zZm9ybS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbihuKSB7CiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7CgogIGlmICh0cy53cml0ZWNodW5rICE9PSBudWxsICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykgewogICAgdHMudHJhbnNmb3JtaW5nID0gdHJ1ZTsKICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7CiAgfSBlbHNlIHsKICAgIC8vIG1hcmsgdGhhdCB3ZSBuZWVkIGEgdHJhbnNmb3JtLCBzbyB0aGF0IGFueSBkYXRhIHRoYXQgY29tZXMgaW4KICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LgogICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7CiAgfQp9OwoKCmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlcikgewogIGlmIChlcikKICAgIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CgogIC8vIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGVuIHRoYXQgbWVhbnMKICAvLyB0aGF0IG5vdGhpbmcgbW9yZSB3aWxsIGV2ZXIgYmUgcHJvdmlkZWQKICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CiAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTsKCiAgaWYgKHdzLmxlbmd0aCkKICAgIHRocm93IG5ldyBFcnJvcignY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7CgogIGlmICh0cy50cmFuc2Zvcm1pbmcpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTsKCiAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpOwp9Cgp9LHsiLi9fc3RyZWFtX2R1cGxleCI6MTUwLCJjb3JlLXV0aWwtaXMiOjgwLCJpbmhlcml0cyI6MTI5fV0sMTU0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQSBiaXQgc2ltcGxlciB0aGFuIHJlYWRhYmxlIHN0cmVhbXMuCi8vIEltcGxlbWVudCBhbiBhc3luYyAuX3dyaXRlKGNodW5rLCBlbmNvZGluZywgY2IpLCBhbmQgaXQnbGwgaGFuZGxlIGFsbAovLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy4KCid1c2Ugc3RyaWN0JzsKCm1vZHVsZS5leHBvcnRzID0gV3JpdGFibGU7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTsKLyo8L3JlcGxhY2VtZW50PiovCgoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjsKLyo8L3JlcGxhY2VtZW50PiovCgpXcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTsKCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpOwp1dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKLyo8L3JlcGxhY2VtZW50PiovCgoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGludGVybmFsVXRpbCA9IHsKICBkZXByZWNhdGU6IHJlcXVpcmUoJ3V0aWwtZGVwcmVjYXRlJykKfTsKLyo8L3JlcGxhY2VtZW50PiovCgoKCi8qPHJlcGxhY2VtZW50PiovCnZhciBTdHJlYW07CihmdW5jdGlvbiAoKXt0cnl7CiAgU3RyZWFtID0gcmVxdWlyZSgnc3QnICsgJ3JlYW0nKTsKfWNhdGNoKF8pe31maW5hbGx5ewogIGlmICghU3RyZWFtKQogICAgU3RyZWFtID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyOwp9fSgpKQovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7Cgp1dGlsLmluaGVyaXRzKFdyaXRhYmxlLCBTdHJlYW0pOwoKZnVuY3Rpb24gbm9wKCkge30KCmZ1bmN0aW9uIFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICB0aGlzLmNodW5rID0gY2h1bms7CiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwogIHRoaXMuY2FsbGJhY2sgPSBjYjsKICB0aGlzLm5leHQgPSBudWxsOwp9Cgp2YXIgRHVwbGV4OwpmdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciBvciBub3QgdGhpcyBzdHJlYW0KICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuCiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7CgogIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpCiAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTsKCiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZQogIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmCiAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKQogIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7CiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKICB0aGlzLmhpZ2hXYXRlck1hcmsgPSAoaHdtIHx8IGh3bSA9PT0gMCkgPyBod20gOiBkZWZhdWx0SHdtOwoKICAvLyBjYXN0IHRvIGludHMuCiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gfn50aGlzLmhpZ2hXYXRlck1hcms7CgogIHRoaXMubmVlZERyYWluID0gZmFsc2U7CiAgLy8gYXQgdGhlIHN0YXJ0IG9mIGNhbGxpbmcgZW5kKCkKICB0aGlzLmVuZGluZyA9IGZhbHNlOwogIC8vIHdoZW4gZW5kKCkgaGFzIGJlZW4gY2FsbGVkLCBhbmQgcmV0dXJuZWQKICB0aGlzLmVuZGVkID0gZmFsc2U7CiAgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkCiAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOwoKICAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT8KICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmcKICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLgogIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7CiAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlOwoKICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nCiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLgogIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC4KICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JzsKCiAgLy8gbm90IGFuIGFjdHVhbCBidWZmZXIgd2Uga2VlcCB0cmFjayBvZiwgYnV0IGEgbWVhc3VyZW1lbnQKICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nCiAgLy8gc29ja2V0IG9yIGZpbGUuCiAgdGhpcy5sZW5ndGggPSAwOwoKICAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLgogIHRoaXMud3JpdGluZyA9IGZhbHNlOwoKICAvLyB3aGVuIHRydWUgYWxsIHdyaXRlcyB3aWxsIGJlIGJ1ZmZlcmVkIHVudGlsIC51bmNvcmsoKSBjYWxsCiAgdGhpcy5jb3JrZWQgPSAwOwoKICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSwKICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueQogIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsICJsYXRlciIgc2hvdWxkIGdlbmVyYWxseSBhbHNvCiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuCiAgdGhpcy5zeW5jID0gdHJ1ZTsKCiAgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaAogIC8vIG1heSBjYWxsIHRoZSBfd3JpdGUoKSBjYWxsYmFjayBpbiB0aGUgc2FtZSB0aWNrLCBzbyB0aGF0IHdlIGRvbid0CiAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uCiAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7CgogIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYikKICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbihlcikgewogICAgb253cml0ZShzdHJlYW0sIGVyKTsKICB9OwoKICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYikKICB0aGlzLndyaXRlY2IgPSBudWxsOwoKICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuCiAgdGhpcy53cml0ZWxlbiA9IDA7CgogIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKICB0aGlzLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwoKICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrcwogIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZAogIHRoaXMucGVuZGluZ2NiID0gMDsKCiAgLy8gZW1pdCBwcmVmaW5pc2ggaWYgdGhlIG9ubHkgdGhpbmcgd2UncmUgd2FpdGluZyBmb3IgaXMgX3dyaXRlIGNicwogIC8vIFRoaXMgaXMgcmVsZXZhbnQgZm9yIHN5bmNocm9ub3VzIFRyYW5zZm9ybSBzdHJlYW1zCiAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlOwoKICAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpbgogIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7Cn0KCldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIHdyaXRhYmxlU3RhdGVHZXRCdWZmZXIoKSB7CiAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDsKICB2YXIgb3V0ID0gW107CiAgd2hpbGUgKGN1cnJlbnQpIHsKICAgIG91dC5wdXNoKGN1cnJlbnQpOwogICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsKICB9CiAgcmV0dXJuIG91dDsKfTsKCihmdW5jdGlvbiAoKXt0cnkgewpPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUsICdidWZmZXInLCB7CiAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7CiAgfSwgJ193cml0YWJsZVN0YXRlLmJ1ZmZlciBpcyBkZXByZWNhdGVkLiBVc2UgX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyICcgKwogICAgICdpbnN0ZWFkLicpCn0pOwp9Y2F0Y2goXyl7fX0oKSk7CgoKdmFyIER1cGxleDsKZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykgewogIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7CgogIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdGhvdWdoIHRoZXkncmUgbm90CiAgLy8gaW5zdGFuY2VvZiBXcml0YWJsZSwgdGhleSdyZSBpbnN0YW5jZW9mIFJlYWRhYmxlLgogIGlmICghKHRoaXMgaW5zdGFuY2VvZiBXcml0YWJsZSkgJiYgISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkKICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7CgogIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTsKCiAgLy8gbGVnYWN5LgogIHRoaXMud3JpdGFibGUgPSB0cnVlOwoKICBpZiAob3B0aW9ucykgewogICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRlID09PSAnZnVuY3Rpb24nKQogICAgICB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7CgogICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRldiA9PT0gJ2Z1bmN0aW9uJykKICAgICAgdGhpcy5fd3JpdGV2ID0gb3B0aW9ucy53cml0ZXY7CiAgfQoKICBTdHJlYW0uY2FsbCh0aGlzKTsKfQoKLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLgpXcml0YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKCkgewogIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLiBOb3QgcmVhZGFibGUuJykpOwp9OwoKCmZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBjYikgewogIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7CiAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2IKICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7Cn0KCi8vIElmIHdlIGdldCBzb21ldGhpbmcgdGhhdCBpcyBub3QgYSBidWZmZXIsIHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkLAovLyBhbmQgd2UncmUgbm90IGluIG9iamVjdE1vZGUsIHRoZW4gdGhhdCdzIGFuIGVycm9yLgovLyBPdGhlcndpc2Ugc3RyZWFtIGNodW5rcyBhcmUgYWxsIGNvbnNpZGVyZWQgdG8gYmUgb2YgbGVuZ3RoPTEsIGFuZCB0aGUKLy8gd2F0ZXJtYXJrcyBkZXRlcm1pbmUgaG93IG1hbnkgb2JqZWN0cyB0byBrZWVwIGluIHRoZSBidWZmZXIsIHJhdGhlciB0aGFuCi8vIGhvdyBtYW55IGJ5dGVzIG9yIGNoYXJhY3RlcnMuCmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7CiAgdmFyIHZhbGlkID0gdHJ1ZTsKCiAgaWYgKCEoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgJiYKICAgICAgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJgogICAgICBjaHVuayAhPT0gbnVsbCAmJgogICAgICBjaHVuayAhPT0gdW5kZWZpbmVkICYmCiAgICAgICFzdGF0ZS5vYmplY3RNb2RlKSB7CiAgICB2YXIgZXIgPSBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rJyk7CiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgICBwcm9jZXNzTmV4dFRpY2soY2IsIGVyKTsKICAgIHZhbGlkID0gZmFsc2U7CiAgfQogIHJldHVybiB2YWxpZDsKfQoKV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CiAgdmFyIHJldCA9IGZhbHNlOwoKICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7CiAgICBjYiA9IGVuY29kaW5nOwogICAgZW5jb2RpbmcgPSBudWxsOwogIH0KCiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpCiAgICBlbmNvZGluZyA9ICdidWZmZXInOwogIGVsc2UgaWYgKCFlbmNvZGluZykKICAgIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nOwoKICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKQogICAgY2IgPSBub3A7CgogIGlmIChzdGF0ZS5lbmRlZCkKICAgIHdyaXRlQWZ0ZXJFbmQodGhpcywgY2IpOwogIGVsc2UgaWYgKHZhbGlkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBjYikpIHsKICAgIHN0YXRlLnBlbmRpbmdjYisrOwogICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgfQoKICByZXR1cm4gcmV0Owp9OwoKV3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbigpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKICBzdGF0ZS5jb3JrZWQrKzsKfTsKCldyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbigpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKICBpZiAoc3RhdGUuY29ya2VkKSB7CiAgICBzdGF0ZS5jb3JrZWQtLTsKCiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYKICAgICAgICAhc3RhdGUuY29ya2VkICYmCiAgICAgICAgIXN0YXRlLmZpbmlzaGVkICYmCiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYKICAgICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpCiAgICAgIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTsKICB9Cn07CgpXcml0YWJsZS5wcm90b3R5cGUuc2V0RGVmYXVsdEVuY29kaW5nID0gZnVuY3Rpb24gc2V0RGVmYXVsdEVuY29kaW5nKGVuY29kaW5nKSB7CiAgLy8gbm9kZTo6UGFyc2VFbmNvZGluZygpIHJlcXVpcmVzIGxvd2VyIGNhc2UuCiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpCiAgICBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7CiAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywKJ3VjczInLCAndWNzLTInLCd1dGYxNmxlJywgJ3V0Zi0xNmxlJywgJ3JhdyddCi5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7CiAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2RpbmcgPSBlbmNvZGluZzsKfTsKCmZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHsKICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYKICAgICAgc3RhdGUuZGVjb2RlU3RyaW5ncyAhPT0gZmFsc2UgJiYKICAgICAgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgewogICAgY2h1bmsgPSBuZXcgQnVmZmVyKGNodW5rLCBlbmNvZGluZyk7CiAgfQogIHJldHVybiBjaHVuazsKfQoKLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzCi8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlCi8vIElmIHdlIHJldHVybiBmYWxzZSwgdGhlbiB3ZSBuZWVkIGEgZHJhaW4gZXZlbnQsIHNvIHNldCB0aGF0IGZsYWcuCmZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYikgewogIGNodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7CgogIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKQogICAgZW5jb2RpbmcgPSAnYnVmZmVyJzsKICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CgogIHN0YXRlLmxlbmd0aCArPSBsZW47CgogIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrOwogIC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLgogIGlmICghcmV0KQogICAgc3RhdGUubmVlZERyYWluID0gdHJ1ZTsKCiAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKSB7CiAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbmV3IFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpOwogICAgaWYgKGxhc3QpIHsKICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICB9CiAgfSBlbHNlIHsKICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgc3RhdGUud3JpdGVsZW4gPSBsZW47CiAgc3RhdGUud3JpdGVjYiA9IGNiOwogIHN0YXRlLndyaXRpbmcgPSB0cnVlOwogIHN0YXRlLnN5bmMgPSB0cnVlOwogIGlmICh3cml0ZXYpCiAgICBzdHJlYW0uX3dyaXRldihjaHVuaywgc3RhdGUub253cml0ZSk7CiAgZWxzZQogICAgc3RyZWFtLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIHN0YXRlLm9ud3JpdGUpOwogIHN0YXRlLnN5bmMgPSBmYWxzZTsKfQoKZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikgewogIC0tc3RhdGUucGVuZGluZ2NiOwogIGlmIChzeW5jKQogICAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7CiAgZWxzZQogICAgY2IoZXIpOwoKICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7Cn0KCmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkgewogIHN0YXRlLndyaXRpbmcgPSBmYWxzZTsKICBzdGF0ZS53cml0ZWNiID0gbnVsbDsKICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47CiAgc3RhdGUud3JpdGVsZW4gPSAwOwp9CgpmdW5jdGlvbiBvbndyaXRlKHN0cmVhbSwgZXIpIHsKICB2YXIgc3RhdGUgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jOwogIHZhciBjYiA9IHN0YXRlLndyaXRlY2I7CgogIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7CgogIGlmIChlcikKICAgIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpOwogIGVsc2UgewogICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXQKICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpOwoKICAgIGlmICghZmluaXNoZWQgJiYKICAgICAgICAhc3RhdGUuY29ya2VkICYmCiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYKICAgICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpIHsKICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7CiAgICB9CgogICAgaWYgKHN5bmMpIHsKICAgICAgcHJvY2Vzc05leHRUaWNrKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CiAgICB9IGVsc2UgewogICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikgewogIGlmICghZmluaXNoZWQpCiAgICBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7CiAgc3RhdGUucGVuZGluZ2NiLS07CiAgY2IoKTsKICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKfQoKLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3QKLy8gZW1pdCAnZHJhaW4nIGJlZm9yZSB0aGUgd3JpdGUoKSBjb25zdW1lciBnZXRzIHRoZSAnZmFsc2UnIHJldHVybgovLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLgpmdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkgewogIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUubmVlZERyYWluKSB7CiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTsKICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpOwogIH0KfQoKCi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0CmZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHsKICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTsKICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3Q7CgogIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7CiAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpCiAgICB2YXIgYnVmZmVyID0gW107CiAgICB2YXIgY2JzID0gW107CiAgICB3aGlsZSAoZW50cnkpIHsKICAgICAgY2JzLnB1c2goZW50cnkuY2FsbGJhY2spOwogICAgICBidWZmZXIucHVzaChlbnRyeSk7CiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDsKICAgIH0KCiAgICAvLyBjb3VudCB0aGUgb25lIHdlIGFyZSBhZGRpbmcsIGFzIHdlbGwuCiAgICAvLyBUT0RPKGlzYWFjcykgY2xlYW4gdGhpcyB1cAogICAgc3RhdGUucGVuZGluZ2NiKys7CiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBidWZmZXIsICcnLCBmdW5jdGlvbihlcnIpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBzdGF0ZS5wZW5kaW5nY2ItLTsKICAgICAgICBjYnNbaV0oZXJyKTsKICAgICAgfQogICAgfSk7CgogICAgLy8gQ2xlYXIgYnVmZmVyCiAgfSBlbHNlIHsKICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmUKICAgIHdoaWxlIChlbnRyeSkgewogICAgICB2YXIgY2h1bmsgPSBlbnRyeS5jaHVuazsKICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7CiAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrOwogICAgICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CgogICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpOwogICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7CiAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuCiAgICAgIC8vIGl0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byB3YWl0IHVudGlsIGl0IGRvZXMuCiAgICAgIC8vIGFsc28sIHRoYXQgbWVhbnMgdGhhdCB0aGUgY2h1bmsgYW5kIGNiIGFyZSBjdXJyZW50bHkKICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uCiAgICAgIGlmIChzdGF0ZS53cml0aW5nKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZW50cnkgPT09IG51bGwpCiAgICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwogIH0KICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBlbnRyeTsKICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7Cn0KCldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgY2IobmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7Cn07CgpXcml0YWJsZS5wcm90b3R5cGUuX3dyaXRldiA9IG51bGw7CgpXcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CgogIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gY2h1bms7CiAgICBjaHVuayA9IG51bGw7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKICAgIGNiID0gZW5jb2Rpbmc7CiAgICBlbmNvZGluZyA9IG51bGw7CiAgfQoKICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCkKICAgIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTsKCiAgLy8gLmVuZCgpIGZ1bGx5IHVuY29ya3MKICBpZiAoc3RhdGUuY29ya2VkKSB7CiAgICBzdGF0ZS5jb3JrZWQgPSAxOwogICAgdGhpcy51bmNvcmsoKTsKICB9CgogIC8vIGlnbm9yZSB1bm5lY2Vzc2FyeSBlbmQoKSBjYWxscy4KICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpCiAgICBlbmRXcml0YWJsZSh0aGlzLCBzdGF0ZSwgY2IpOwp9OwoKCmZ1bmN0aW9uIG5lZWRGaW5pc2goc3RhdGUpIHsKICByZXR1cm4gKHN0YXRlLmVuZGluZyAmJgogICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwICYmCiAgICAgICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPT09IG51bGwgJiYKICAgICAgICAgICFzdGF0ZS5maW5pc2hlZCAmJgogICAgICAgICAgIXN0YXRlLndyaXRpbmcpOwp9CgpmdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkgewogIGlmICghc3RhdGUucHJlZmluaXNoZWQpIHsKICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTsKICB9Cn0KCmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHsKICB2YXIgbmVlZCA9IG5lZWRGaW5pc2goc3RhdGUpOwogIGlmIChuZWVkKSB7CiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7CiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTsKICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlOwogICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7CiAgICB9IGVsc2UgewogICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7CiAgICB9CiAgfQogIHJldHVybiBuZWVkOwp9CgpmdW5jdGlvbiBlbmRXcml0YWJsZShzdHJlYW0sIHN0YXRlLCBjYikgewogIHN0YXRlLmVuZGluZyA9IHRydWU7CiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7CiAgaWYgKGNiKSB7CiAgICBpZiAoc3RhdGUuZmluaXNoZWQpCiAgICAgIHByb2Nlc3NOZXh0VGljayhjYik7CiAgICBlbHNlCiAgICAgIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7CiAgfQogIHN0YXRlLmVuZGVkID0gdHJ1ZTsKfQoKfSx7Ii4vX3N0cmVhbV9kdXBsZXgiOjE1MCwiYnVmZmVyIjo3MCwiY29yZS11dGlsLWlzIjo4MCwiZXZlbnRzIjo3MiwiaW5oZXJpdHMiOjEyOSwicHJvY2Vzcy1uZXh0aWNrLWFyZ3MiOjE0MCwidXRpbC1kZXByZWNhdGUiOjE3NX1dLDE1NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgiLi9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcyIpCgp9LHsiLi9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcyI6MTUxfV0sMTU2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIFN0cmVhbSA9IChmdW5jdGlvbiAoKXsKICB0cnkgewogICAgcmV0dXJuIHJlcXVpcmUoJ3N0JyArICdyZWFtJyk7IC8vIGhhY2sgdG8gZml4IGEgY2lyY3VsYXIgZGVwZW5kZW5jeSBpc3N1ZSB3aGVuIHVzZWQgd2l0aCBicm93c2VyaWZ5CiAgfSBjYXRjaChfKXt9Cn0oKSk7CmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcmVhZGFibGUuanMnKTsKZXhwb3J0cy5TdHJlYW0gPSBTdHJlYW0gfHwgZXhwb3J0czsKZXhwb3J0cy5SZWFkYWJsZSA9IGV4cG9ydHM7CmV4cG9ydHMuV3JpdGFibGUgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzJyk7CmV4cG9ydHMuRHVwbGV4ID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9kdXBsZXguanMnKTsKZXhwb3J0cy5UcmFuc2Zvcm0gPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcycpOwpleHBvcnRzLlBhc3NUaHJvdWdoID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcycpOwoKfSx7Ii4vbGliL19zdHJlYW1fZHVwbGV4LmpzIjoxNTAsIi4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiOjE1MSwiLi9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcyI6MTUyLCIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyI6MTUzLCIuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIjoxNTR9XSwxNTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoIi4vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzIikKCn0seyIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyI6MTUzfV0sMTU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCIuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIikKCn0seyIuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIjoxNTR9XSwxNTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8qCkNyeXB0b0pTIHYzLjEuMgpjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMKKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCmNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy93aWtpL0xpY2Vuc2UKKi8KLyoqIEBwcmVzZXJ2ZQooYykgMjAxMiBieSBDw6lkcmljIE1lc25pbC4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KClJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDoKCiAgICAtIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KICAgIC0gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLgoKVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyAiQVMgSVMiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KKi8KCi8vIGNvbnN0YW50cyB0YWJsZQp2YXIgemwgPSBbCiAgMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwKICA3LCA0LCAxMywgMSwgMTAsIDYsIDE1LCAzLCAxMiwgMCwgOSwgNSwgMiwgMTQsIDExLCA4LAogIDMsIDEwLCAxNCwgNCwgOSwgMTUsIDgsIDEsIDIsIDcsIDAsIDYsIDEzLCAxMSwgNSwgMTIsCiAgMSwgOSwgMTEsIDEwLCAwLCA4LCAxMiwgNCwgMTMsIDMsIDcsIDE1LCAxNCwgNSwgNiwgMiwKICA0LCAwLCA1LCA5LCA3LCAxMiwgMiwgMTAsIDE0LCAxLCAzLCA4LCAxMSwgNiwgMTUsIDEzCl0KCnZhciB6ciA9IFsKICA1LCAxNCwgNywgMCwgOSwgMiwgMTEsIDQsIDEzLCA2LCAxNSwgOCwgMSwgMTAsIDMsIDEyLAogIDYsIDExLCAzLCA3LCAwLCAxMywgNSwgMTAsIDE0LCAxNSwgOCwgMTIsIDQsIDksIDEsIDIsCiAgMTUsIDUsIDEsIDMsIDcsIDE0LCA2LCA5LCAxMSwgOCwgMTIsIDIsIDEwLCAwLCA0LCAxMywKICA4LCA2LCA0LCAxLCAzLCAxMSwgMTUsIDAsIDUsIDEyLCAyLCAxMywgOSwgNywgMTAsIDE0LAogIDEyLCAxNSwgMTAsIDQsIDEsIDUsIDgsIDcsIDYsIDIsIDEzLCAxNCwgMCwgMywgOSwgMTEKXQoKdmFyIHNsID0gWwogIDExLCAxNCwgMTUsIDEyLCA1LCA4LCA3LCA5LCAxMSwgMTMsIDE0LCAxNSwgNiwgNywgOSwgOCwKICA3LCA2LCA4LCAxMywgMTEsIDksIDcsIDE1LCA3LCAxMiwgMTUsIDksIDExLCA3LCAxMywgMTIsCiAgMTEsIDEzLCA2LCA3LCAxNCwgOSwgMTMsIDE1LCAxNCwgOCwgMTMsIDYsIDUsIDEyLCA3LCA1LAogIDExLCAxMiwgMTQsIDE1LCAxNCwgMTUsIDksIDgsIDksIDE0LCA1LCA2LCA4LCA2LCA1LCAxMiwKICA5LCAxNSwgNSwgMTEsIDYsIDgsIDEzLCAxMiwgNSwgMTIsIDEzLCAxNCwgMTEsIDgsIDUsIDYKXQoKdmFyIHNyID0gWwogIDgsIDksIDksIDExLCAxMywgMTUsIDE1LCA1LCA3LCA3LCA4LCAxMSwgMTQsIDE0LCAxMiwgNiwKICA5LCAxMywgMTUsIDcsIDEyLCA4LCA5LCAxMSwgNywgNywgMTIsIDcsIDYsIDE1LCAxMywgMTEsCiAgOSwgNywgMTUsIDExLCA4LCA2LCA2LCAxNCwgMTIsIDEzLCA1LCAxNCwgMTMsIDEzLCA3LCA1LAogIDE1LCA1LCA4LCAxMSwgMTQsIDE0LCA2LCAxNCwgNiwgOSwgMTIsIDksIDEyLCA1LCAxNSwgOCwKICA4LCA1LCAxMiwgOSwgMTIsIDUsIDE0LCA2LCA4LCAxMywgNiwgNSwgMTUsIDEzLCAxMSwgMTEKXQoKdmFyIGhsID0gWzB4MDAwMDAwMDAsIDB4NUE4Mjc5OTksIDB4NkVEOUVCQTEsIDB4OEYxQkJDREMsIDB4QTk1M0ZENEVdCnZhciBociA9IFsweDUwQTI4QkU2LCAweDVDNEREMTI0LCAweDZENzAzRUYzLCAweDdBNkQ3NkU5LCAweDAwMDAwMDAwXQoKZnVuY3Rpb24gYnl0ZXNUb1dvcmRzIChieXRlcykgewogIHZhciB3b3JkcyA9IFtdCiAgZm9yICh2YXIgaSA9IDAsIGIgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpKyssIGIgKz0gOCkgewogICAgd29yZHNbYiA+Pj4gNV0gfD0gYnl0ZXNbaV0gPDwgKDI0IC0gYiAlIDMyKQogIH0KICByZXR1cm4gd29yZHMKfQoKZnVuY3Rpb24gd29yZHNUb0J5dGVzICh3b3JkcykgewogIHZhciBieXRlcyA9IFtdCiAgZm9yICh2YXIgYiA9IDA7IGIgPCB3b3Jkcy5sZW5ndGggKiAzMjsgYiArPSA4KSB7CiAgICBieXRlcy5wdXNoKCh3b3Jkc1tiID4+PiA1XSA+Pj4gKDI0IC0gYiAlIDMyKSkgJiAweEZGKQogIH0KICByZXR1cm4gYnl0ZXMKfQoKZnVuY3Rpb24gcHJvY2Vzc0Jsb2NrIChILCBNLCBvZmZzZXQpIHsKICAvLyBzd2FwIGVuZGlhbgogIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykgewogICAgdmFyIG9mZnNldF9pID0gb2Zmc2V0ICsgaQogICAgdmFyIE1fb2Zmc2V0X2kgPSBNW29mZnNldF9pXQoKICAgIC8vIFN3YXAKICAgIE1bb2Zmc2V0X2ldID0gKAogICAgICAoKChNX29mZnNldF9pIDw8IDgpIHwgKE1fb2Zmc2V0X2kgPj4+IDI0KSkgJiAweDAwZmYwMGZmKSB8CiAgICAgICgoKE1fb2Zmc2V0X2kgPDwgMjQpIHwgKE1fb2Zmc2V0X2kgPj4+IDgpKSAmIDB4ZmYwMGZmMDApCiAgICApCiAgfQoKICAvLyBXb3JraW5nIHZhcmlhYmxlcwogIHZhciBhbCwgYmwsIGNsLCBkbCwgZWwKICB2YXIgYXIsIGJyLCBjciwgZHIsIGVyCgogIGFyID0gYWwgPSBIWzBdCiAgYnIgPSBibCA9IEhbMV0KICBjciA9IGNsID0gSFsyXQogIGRyID0gZGwgPSBIWzNdCiAgZXIgPSBlbCA9IEhbNF0KCiAgLy8gY29tcHV0YXRpb24KICB2YXIgdAogIGZvciAoaSA9IDA7IGkgPCA4MDsgaSArPSAxKSB7CiAgICB0ID0gKGFsICsgTVtvZmZzZXQgKyB6bFtpXV0pIHwgMAogICAgaWYgKGkgPCAxNikgewogICAgICB0ICs9IGYxKGJsLCBjbCwgZGwpICsgaGxbMF0KICAgIH0gZWxzZSBpZiAoaSA8IDMyKSB7CiAgICAgIHQgKz0gZjIoYmwsIGNsLCBkbCkgKyBobFsxXQogICAgfSBlbHNlIGlmIChpIDwgNDgpIHsKICAgICAgdCArPSBmMyhibCwgY2wsIGRsKSArIGhsWzJdCiAgICB9IGVsc2UgaWYgKGkgPCA2NCkgewogICAgICB0ICs9IGY0KGJsLCBjbCwgZGwpICsgaGxbM10KICAgIH0gZWxzZSB7Ly8gaWYgKGk8ODApIHsKICAgICAgdCArPSBmNShibCwgY2wsIGRsKSArIGhsWzRdCiAgICB9CiAgICB0ID0gdCB8IDAKICAgIHQgPSByb3RsKHQsIHNsW2ldKQogICAgdCA9ICh0ICsgZWwpIHwgMAogICAgYWwgPSBlbAogICAgZWwgPSBkbAogICAgZGwgPSByb3RsKGNsLCAxMCkKICAgIGNsID0gYmwKICAgIGJsID0gdAoKICAgIHQgPSAoYXIgKyBNW29mZnNldCArIHpyW2ldXSkgfCAwCiAgICBpZiAoaSA8IDE2KSB7CiAgICAgIHQgKz0gZjUoYnIsIGNyLCBkcikgKyBoclswXQogICAgfSBlbHNlIGlmIChpIDwgMzIpIHsKICAgICAgdCArPSBmNChiciwgY3IsIGRyKSArIGhyWzFdCiAgICB9IGVsc2UgaWYgKGkgPCA0OCkgewogICAgICB0ICs9IGYzKGJyLCBjciwgZHIpICsgaHJbMl0KICAgIH0gZWxzZSBpZiAoaSA8IDY0KSB7CiAgICAgIHQgKz0gZjIoYnIsIGNyLCBkcikgKyBoclszXQogICAgfSBlbHNlIHsvLyBpZiAoaTw4MCkgewogICAgICB0ICs9IGYxKGJyLCBjciwgZHIpICsgaHJbNF0KICAgIH0KCiAgICB0ID0gdCB8IDAKICAgIHQgPSByb3RsKHQsIHNyW2ldKQogICAgdCA9ICh0ICsgZXIpIHwgMAogICAgYXIgPSBlcgogICAgZXIgPSBkcgogICAgZHIgPSByb3RsKGNyLCAxMCkKICAgIGNyID0gYnIKICAgIGJyID0gdAogIH0KCiAgLy8gaW50ZXJtZWRpYXRlIGhhc2ggdmFsdWUKICB0ID0gKEhbMV0gKyBjbCArIGRyKSB8IDAKICBIWzFdID0gKEhbMl0gKyBkbCArIGVyKSB8IDAKICBIWzJdID0gKEhbM10gKyBlbCArIGFyKSB8IDAKICBIWzNdID0gKEhbNF0gKyBhbCArIGJyKSB8IDAKICBIWzRdID0gKEhbMF0gKyBibCArIGNyKSB8IDAKICBIWzBdID0gdAp9CgpmdW5jdGlvbiBmMSAoeCwgeSwgeikgewogIHJldHVybiAoKHgpIF4gKHkpIF4gKHopKQp9CgpmdW5jdGlvbiBmMiAoeCwgeSwgeikgewogIHJldHVybiAoKCh4KSAmICh5KSkgfCAoKH54KSAmICh6KSkpCn0KCmZ1bmN0aW9uIGYzICh4LCB5LCB6KSB7CiAgcmV0dXJuICgoKHgpIHwgKH4oeSkpKSBeICh6KSkKfQoKZnVuY3Rpb24gZjQgKHgsIHksIHopIHsKICByZXR1cm4gKCgoeCkgJiAoeikpIHwgKCh5KSAmICh+KHopKSkpCn0KCmZ1bmN0aW9uIGY1ICh4LCB5LCB6KSB7CiAgcmV0dXJuICgoeCkgXiAoKHkpIHwgKH4oeikpKSkKfQoKZnVuY3Rpb24gcm90bCAoeCwgbikgewogIHJldHVybiAoeCA8PCBuKSB8ICh4ID4+PiAoMzIgLSBuKSkKfQoKZnVuY3Rpb24gcmlwZW1kMTYwIChtZXNzYWdlKSB7CiAgdmFyIEggPSBbMHg2NzQ1MjMwMSwgMHhFRkNEQUI4OSwgMHg5OEJBRENGRSwgMHgxMDMyNTQ3NiwgMHhDM0QyRTFGMF0KCiAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJykgewogICAgbWVzc2FnZSA9IG5ldyBCdWZmZXIobWVzc2FnZSwgJ3V0ZjgnKQogIH0KCiAgdmFyIG0gPSBieXRlc1RvV29yZHMobWVzc2FnZSkKCiAgdmFyIG5CaXRzTGVmdCA9IG1lc3NhZ2UubGVuZ3RoICogOAogIHZhciBuQml0c1RvdGFsID0gbWVzc2FnZS5sZW5ndGggKiA4CgogIC8vIEFkZCBwYWRkaW5nCiAgbVtuQml0c0xlZnQgPj4+IDVdIHw9IDB4ODAgPDwgKDI0IC0gbkJpdHNMZWZ0ICUgMzIpCiAgbVsoKChuQml0c0xlZnQgKyA2NCkgPj4+IDkpIDw8IDQpICsgMTRdID0gKAogICAgKCgobkJpdHNUb3RhbCA8PCA4KSB8IChuQml0c1RvdGFsID4+PiAyNCkpICYgMHgwMGZmMDBmZikgfAogICAgKCgobkJpdHNUb3RhbCA8PCAyNCkgfCAobkJpdHNUb3RhbCA+Pj4gOCkpICYgMHhmZjAwZmYwMCkKICApCgogIGZvciAodmFyIGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkgKz0gMTYpIHsKICAgIHByb2Nlc3NCbG9jayhILCBtLCBpKQogIH0KCiAgLy8gc3dhcCBlbmRpYW4KICBmb3IgKGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAvLyBzaG9ydGN1dAogICAgdmFyIEhfaSA9IEhbaV0KCiAgICAvLyBTd2FwCiAgICBIW2ldID0gKCgoSF9pIDw8IDgpIHwgKEhfaSA+Pj4gMjQpKSAmIDB4MDBmZjAwZmYpIHwKICAgICAgKCgoSF9pIDw8IDI0KSB8IChIX2kgPj4+IDgpKSAmIDB4ZmYwMGZmMDApCiAgfQoKICB2YXIgZGlnZXN0Ynl0ZXMgPSB3b3Jkc1RvQnl0ZXMoSCkKICByZXR1cm4gbmV3IEJ1ZmZlcihkaWdlc3RieXRlcykKfQoKbW9kdWxlLmV4cG9ydHMgPSByaXBlbWQxNjAKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJidWZmZXIiOjcwfV0sMTYwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIERpc3RyaWJ1dGlvbiBmaWxlIGZvciBSdW50aW1lQ2F0YWxvZ3VlLmpzIAovLyB2ZXJzaW9uOiAwLjEuMAoKIWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LlJ1bnRpbWVDYXRhbG9ndWU9ZSgpfX0oZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gZnVuY3Rpb24gdChlLHIsbil7ZnVuY3Rpb24gaShhLHMpe2lmKCFyW2FdKXtpZighZVthXSl7dmFyIHU9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIXMmJnUpcmV0dXJuIHUoYSwhMCk7aWYobylyZXR1cm4gbyhhLCEwKTt2YXIgYz1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIithKyInIik7dGhyb3cgYy5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixjfXZhciBsPXJbYV09e2V4cG9ydHM6e319O2VbYV1bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIHI9ZVthXVsxXVt0XTtyZXR1cm4gaShyP3I6dCl9LGwsbC5leHBvcnRzLHQsZSxyLG4pfXJldHVybiByW2FdLmV4cG9ydHN9Zm9yKHZhciBvPSJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGE9MDthPG4ubGVuZ3RoO2ErKylpKG5bYV0pO3JldHVybiBpfSh7MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvY3JlYXRlIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiOjE3fV0sMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiOjE4fV0sMzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOjE5fV0sNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6MjB9XSw1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjoyMX1dLDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9wcm9taXNlIjoyMn1dLDc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCI6MjN9XSw4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vY2xhc3NDYWxsQ2hlY2suanMiKX0seyIuL2NsYXNzQ2FsbENoZWNrLmpzIjo5fV0sOTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi9jcmVhdGVDbGFzcy5qcyIpfSx7Ii4vY3JlYXRlQ2xhc3MuanMiOjExfV0sMTE6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5Iiksbz1uKGkpO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLG9bImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sMTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIGk9ZSgiLi4vY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLG89bihpKSxhPWUoIi4uL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLHM9bihhKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24gdShlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAsc1siZGVmYXVsdCJdKShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBpPSgwLG9bImRlZmF1bHQiXSkoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDp1KGksdCxyKX1pZigidmFsdWUiaW4gbilyZXR1cm4gbi52YWx1ZTt2YXIgYT1uLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwocil9fSx7Ii4uL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6MywiLi4vY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NH1dLDEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWUoIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxvPW4oaSksYT1lKCIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiKSxzPW4oYSksdT1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGM9bih1KTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiKygidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsY1siZGVmYXVsdCJdKSh0KSkpO2UucHJvdG90eXBlPSgwLHNbImRlZmF1bHQiXSkodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihvWyJkZWZhdWx0Il0/KDAsb1siZGVmYXVsdCJdKShlLHQpOmUuX19wcm90b19fPXQpfX0seyIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjEsIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjUsIi4uL2hlbHBlcnMvdHlwZW9mIjoxNn1dLDE0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIil9LHsiLi9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiOjE1fV0sMTU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX19LHt9XSwxNjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGUmJiJ1bmRlZmluZWQiIT10eXBlb2YgX1N5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PV9TeW1ib2w/InN5bWJvbCI6dHlwZW9mIGV9ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvc3ltYm9sIiksYT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBhWyJkZWZhdWx0Il0mJmUuY29uc3RydWN0b3I9PT1hWyJkZWZhdWx0Il0/InN5bWJvbCI6InVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOmkoZSl9fSx7Ii4uL2NvcmUtanMvc3ltYm9sIjo3fV0sMTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy8kIjo1NH1dLDE4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxyKX19LHsiLi4vLi4vbW9kdWxlcy8kIjo1NH1dLDE5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmdldERlc2MoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy8kIjo1NCwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6Nzl9XSwyMDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmdldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoyOSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiOjgwfV0sMjE6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5zZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MjksIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIjo4MX1dLDIyOltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjoyOSwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6ODIsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjgzLCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjg0LCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjg2fV0sMjM6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiKSxlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuU3ltYm9sfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjoyOSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6ODIsIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCI6ODV9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBlfX0se31dLDI1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKCl7fX0se31dLDI2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGV9fSx7Ii4vJC5pcy1vYmplY3QiOjQ3fV0sMjc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIiksaT1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIiksbz0iQXJndW1lbnRzIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLGE7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj0odD1PYmplY3QoZSkpW2ldKT9yOm8/bih0KToiT2JqZWN0Ij09KGE9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjphfX0seyIuLyQuY29mIjoyOCwiLi8kLndrcyI6NzZ9XSwyODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKGUpLnNsaWNlKDgsLTEpfX0se31dLDI5OltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPXt2ZXJzaW9uOiIxLjIuNiJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPW4pfSx7fV0sMzA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYS1mdW5jdGlvbiIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixpKXtyZXR1cm4gZS5jYWxsKHQscixuLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0seyIuLyQuYS1mdW5jdGlvbiI6MjR9XSwzMTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PWUpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIitlKTtyZXR1cm4gZX19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hZSgiLi8kLmZhaWxzIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSx7Ii4vJC5mYWlscyI6MzZ9XSwzMzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCxvPW4oaSkmJm4oaS5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG8/aS5jcmVhdGVFbGVtZW50KGUpOnt9fX0seyIuLyQuZ2xvYmFsIjozOSwiLi8kLmlzLW9iamVjdCI6NDd9XSwzNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uLmdldEtleXMoZSkscj1uLmdldFN5bWJvbHM7aWYocilmb3IodmFyIGksbz1yKGUpLGE9bi5pc0VudW0scz0wO28ubGVuZ3RoPnM7KWEuY2FsbChlLGk9b1tzKytdKSYmdC5wdXNoKGkpO3JldHVybiB0fX0seyIuLyQiOjU0fV0sMzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksaT1lKCIuLyQuY29yZSIpLG89ZSgiLi8kLmN0eCIpLGE9InByb3RvdHlwZSIscz1mdW5jdGlvbihlLHQscil7dmFyIHUsYyxsLGY9ZSZzLkYscD1lJnMuRyxoPWUmcy5TLGQ9ZSZzLlAseT1lJnMuQixtPWUmcy5XLGc9cD9pOmlbdF18fChpW3RdPXt9KSx2PXA/bjpoP25bdF06KG5bdF18fHt9KVthXTtwJiYocj10KTtmb3IodSBpbiByKWM9IWYmJnYmJnUgaW4gdixjJiZ1IGluIGd8fChsPWM/dlt1XTpyW3VdLGdbdV09cCYmImZ1bmN0aW9uIiE9dHlwZW9mIHZbdV0/clt1XTp5JiZjP28obCxuKTptJiZ2W3VdPT1sP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFthXT1lW2FdLHR9KGwpOmQmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP28oRnVuY3Rpb24uY2FsbCxsKTpsLGQmJigoZ1thXXx8KGdbYV09e30pKVt1XT1sKSl9O3MuRj0xLHMuRz0yLHMuUz00LHMuUD04LHMuQj0xNixzLlc9MzIsdC5leHBvcnRzPXN9LHsiLi8kLmNvcmUiOjI5LCIuLyQuY3R4IjozMCwiLi8kLmdsb2JhbCI6Mzl9XSwzNjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDM3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLGk9ZSgiLi8kLml0ZXItY2FsbCIpLG89ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxhPWUoIi4vJC5hbi1vYmplY3QiKSxzPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGMpe3ZhciBsLGYscCxoPXUoZSksZD1uKHIsYyx0PzI6MSkseT0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBoKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKG8oaCkpZm9yKGw9cyhlLmxlbmd0aCk7bD55O3krKyl0P2QoYShmPWVbeV0pWzBdLGZbMV0pOmQoZVt5XSk7ZWxzZSBmb3IocD1oLmNhbGwoZSk7IShmPXAubmV4dCgpKS5kb25lOylpKHAsZCxmLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjoyNiwiLi8kLmN0eCI6MzAsIi4vJC5pcy1hcnJheS1pdGVyIjo0NSwiLi8kLml0ZXItY2FsbCI6NDgsIi4vJC50by1sZW5ndGgiOjczLCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6Nzd9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pb2JqZWN0IiksaT1lKCIuLyQiKS5nZXROYW1lcyxvPXt9LnRvU3RyaW5nLGE9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10scz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIGkoZSl9Y2F0Y2godCl7cmV0dXJuIGEuc2xpY2UoKX19O3QuZXhwb3J0cy5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGEmJiJbb2JqZWN0IFdpbmRvd10iPT1vLmNhbGwoZSk/cyhlKTppKG4oZSkpfX0seyIuLyQiOjU0LCIuLyQudG8taW9iamVjdCI6NzJ9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDQwOltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDQxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksaT1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsaSgxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjo1NCwiLi8kLmRlc2NyaXB0b3JzIjozMiwiLi8kLnByb3BlcnR5LWRlc2MiOjU5fV0sNDI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6Mzl9XSw0MzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sNDQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjI4fV0sNDU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksaT1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fG9baV09PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6NTMsIi4vJC53a3MiOjc2fV0sNDY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSx7Ii4vJC5jb2YiOjI4fV0sNDc6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDQ4OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixpKXt0cnl7cmV0dXJuIGk/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2gobyl7dmFyIGE9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09YSYmbihhLmNhbGwoZSkpLG99fX0seyIuLyQuYW4tb2JqZWN0IjoyNn1dLDQ5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLGk9ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxvPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLGE9e307ZSgiLi8kLmhpZGUiKShhLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShhLHtuZXh0OmkoMSxyKX0pLG8oZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjo1NCwiLi8kLmhpZGUiOjQxLCIuLyQucHJvcGVydHktZGVzYyI6NTksIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjUsIi4vJC53a3MiOjc2fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxpPWUoIi4vJC5leHBvcnQiKSxvPWUoIi4vJC5yZWRlZmluZSIpLGE9ZSgiLi8kLmhpZGUiKSxzPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxjPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGw9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZj1lKCIuLyQiKS5nZXRQcm90byxwPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxoPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLGQ9IkBAaXRlcmF0b3IiLHk9ImtleXMiLG09InZhbHVlcyIsZz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdixiLF8sTyl7YyhyLHQsdik7dmFyICQsRSxQPWZ1bmN0aW9uKGUpe2lmKCFoJiZlIGluIHcpcmV0dXJuIHdbZV07c3dpdGNoKGUpe2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSBtOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGo9dCsiIEl0ZXJhdG9yIixrPWI9PW0sUz0hMSx3PWUucHJvdG90eXBlLFI9d1twXXx8d1tkXXx8YiYmd1tiXSx4PVJ8fFAoYik7aWYoUil7dmFyIE09Zih4LmNhbGwobmV3IGUpKTtsKE0saiwhMCksIW4mJnModyxkKSYmYShNLHAsZyksayYmUi5uYW1lIT09bSYmKFM9ITAseD1mdW5jdGlvbigpe3JldHVybiBSLmNhbGwodGhpcyl9KX1pZihuJiYhT3x8IWgmJiFTJiZ3W3BdfHxhKHcscCx4KSx1W3RdPXgsdVtqXT1nLGIpaWYoJD17dmFsdWVzOms/eDpQKG0pLGtleXM6Xz94OlAoeSksZW50cmllczprP1AoImVudHJpZXMiKTp4fSxPKWZvcihFIGluICQpRSBpbiB3fHxvKHcsRSwkW0VdKTtlbHNlIGkoaS5QK2kuRiooaHx8UyksdCwkKTtyZXR1cm4gJH19LHsiLi8kIjo1NCwiLi8kLmV4cG9ydCI6MzUsIi4vJC5oYXMiOjQwLCIuLyQuaGlkZSI6NDEsIi4vJC5pdGVyLWNyZWF0ZSI6NDksIi4vJC5pdGVyYXRvcnMiOjUzLCIuLyQubGlicmFyeSI6NTYsIi4vJC5yZWRlZmluZSI6NjEsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NjUsIi4vJC53a3MiOjc2fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT0hMTt0cnl7dmFyIG89WzddW25dKCk7b1sicmV0dXJuIl09ZnVuY3Rpb24oKXtpPSEwfSxBcnJheS5mcm9tKG8sZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goYSl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhaSlyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIG89WzddLGE9b1tuXSgpO2EubmV4dD1mdW5jdGlvbigpe3I9ITB9LG9bbl09ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZShvKX1jYXRjaChzKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjc2fV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSw1NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDU1OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksaT1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixvPWkoZSksYT1uLmdldEtleXMobykscz1hLmxlbmd0aCx1PTA7cz51OylpZihvW3I9YVt1KytdXT09PXQpcmV0dXJuIHJ9fSx7Ii4vJCI6NTQsIi4vJC50by1pb2JqZWN0Ijo3Mn1dLDU2OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG8sYT1lKCIuLyQuZ2xvYmFsIikscz1lKCIuLyQudGFzayIpLnNldCx1PWEuTXV0YXRpb25PYnNlcnZlcnx8YS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGM9YS5wcm9jZXNzLGw9YS5Qcm9taXNlLGY9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYykscD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IoZiYmKGU9Yy5kb21haW4pJiYoYy5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtpPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGYpbz1mdW5jdGlvbigpe2MubmV4dFRpY2socCl9O2Vsc2UgaWYodSl7dmFyIGg9MSxkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShwKS5vYnNlcnZlKGQse2NoYXJhY3RlckRhdGE6ITB9KSxvPWZ1bmN0aW9uKCl7ZC5kYXRhPWg9LWh9fWVsc2Ugbz1sJiZsLnJlc29sdmU/ZnVuY3Rpb24oKXtsLnJlc29sdmUoKS50aGVuKHApfTpmdW5jdGlvbigpe3MuY2FsbChhLHApfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmYmJmMuZG9tYWlufTtpJiYoaS5uZXh0PXQpLG58fChuPXQsbygpKSxpPXR9fSx7Ii4vJC5jb2YiOjI4LCIuLyQuZ2xvYmFsIjozOSwiLi8kLnRhc2siOjcwfV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0IiksaT1lKCIuLyQuY29yZSIpLG89ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KGkuT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxhPXt9O2FbZV09dChyKSxuKG4uUytuLkYqbyhmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixhKX19LHsiLi8kLmNvcmUiOjI5LCIuLyQuZXhwb3J0IjozNSwiLi8kLmZhaWxzIjozNn1dLDU5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDYwOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6NjF9XSw2MTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjo0MX1dLDYyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDYzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxpPWUoIi4vJC5pcy1vYmplY3QiKSxvPWUoIi4vJC5hbi1vYmplY3QiKSxhPWZ1bmN0aW9uKGUsdCl7aWYobyhlKSwhaSh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixpKXt0cnl7aT1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxpKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKG8pe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEoZSx0KSxyP2UuX19wcm90b19fPXQ6aShlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazphfX0seyIuLyQiOjU0LCIuLyQuYW4tb2JqZWN0IjoyNiwiLi8kLmN0eCI6MzAsIi4vJC5pcy1vYmplY3QiOjQ3fV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxpPWUoIi4vJCIpLG89ZSgiLi8kLmRlc2NyaXB0b3JzIiksYT1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtvJiZ0JiYhdFthXSYmaS5zZXREZXNjKHQsYSx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjU0LCIuLyQuY29yZSI6MjksIi4vJC5kZXNjcmlwdG9ycyI6MzIsIi4vJC53a3MiOjc2fV0sNjU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLGk9ZSgiLi8kLmhhcyIpLG89ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIWkoZT1yP2U6ZS5wcm90b3R5cGUsbykmJm4oZSxvLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjU0LCIuLyQuaGFzIjo0MCwiLi8kLndrcyI6NzZ9XSw2NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxpPSJfX2NvcmUtanNfc2hhcmVkX18iLG89bltpXXx8KG5baV09e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gb1tlXXx8KG9bZV09e30pfX0seyIuLyQuZ2xvYmFsIjozOX1dLDY3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLGk9ZSgiLi8kLmEtZnVuY3Rpb24iKSxvPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGE9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09YXx8dm9pZCAwPT0ocj1uKGEpW29dKT90Omkocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjoyNCwiLi8kLmFuLW9iamVjdCI6MjYsIi4vJC53a3MiOjc2fV0sNjg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNjk6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLGk9ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIG8sYSxzPVN0cmluZyhpKHQpKSx1PW4ociksYz1zLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1jP2U/IiI6dm9pZCAwOihvPXMuY2hhckNvZGVBdCh1KSw1NTI5Nj5vfHxvPjU2MzE5fHx1KzE9PT1jfHwoYT1zLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fGE+NTczNDM/ZT9zLmNoYXJBdCh1KTpvOmU/cy5zbGljZSh1LHUrMik6KG8tNTUyOTY8PDEwKSsoYS01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjMxLCIuLyQudG8taW50ZWdlciI6NzF9XSw3MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGksbyxhPWUoIi4vJC5jdHgiKSxzPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYz1lKCIuLyQuZG9tLWNyZWF0ZSIpLGw9ZSgiLi8kLmdsb2JhbCIpLGY9bC5wcm9jZXNzLHA9bC5zZXRJbW1lZGlhdGUsaD1sLmNsZWFySW1tZWRpYXRlLGQ9bC5NZXNzYWdlQ2hhbm5lbCx5PTAsbT17fSxnPSJvbnJlYWR5c3RhdGVjaGFuZ2UiLHY9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZihtLmhhc093blByb3BlcnR5KGUpKXt2YXIgdD1tW2VdO2RlbGV0ZSBtW2VdLHQoKX19LGI9ZnVuY3Rpb24oZSl7di5jYWxsKGUuZGF0YSl9O3AmJmh8fChwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBtWysreV09ZnVuY3Rpb24oKXtzKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4oeSkseX0saD1mdW5jdGlvbihlKXtkZWxldGUgbVtlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikoZik/bj1mdW5jdGlvbihlKXtmLm5leHRUaWNrKGEodixlLDEpKX06ZD8oaT1uZXcgZCxvPWkucG9ydDIsaS5wb3J0MS5vbm1lc3NhZ2U9YixuPWEoby5wb3N0TWVzc2FnZSxvLDEpKTpsLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWwuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtsLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sbC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixiLCExKSk6bj1nIGluIGMoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYygic2NyaXB0IikpW2ddPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSx2LmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGEodixlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6cCxjbGVhcjpofX0seyIuLyQuY29mIjoyOCwiLi8kLmN0eCI6MzAsIi4vJC5kb20tY3JlYXRlIjozMywiLi8kLmdsb2JhbCI6MzksIi4vJC5odG1sIjo0MiwiLi8kLmludm9rZSI6NDN9XSw3MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxpPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/aTpuKShlKX19LHt9XSw3MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0IiksaT1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihpKGUpKX19LHsiLi8kLmRlZmluZWQiOjMxLCIuLyQuaW9iamVjdCI6NDR9XSw3MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksaT1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9pKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjcxfV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6MzF9XSw3NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsaT1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24raSkudG9TdHJpbmcoMzYpKX19LHt9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksaT1lKCIuLyQudWlkIiksbz1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09byYmb1tlXXx8KG98fGkpKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjM5LCIuLyQuc2hhcmVkIjo2NiwiLi8kLnVpZCI6NzV9XSw3NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksaT1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW2ldfHxlWyJAQGl0ZXJhdG9yIl18fG9bbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MjcsIi4vJC5jb3JlIjoyOSwiLi8kLml0ZXJhdG9ycyI6NTMsIi4vJC53a3MiOjc2fV0sNzg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLGk9ZSgiLi8kLml0ZXItc3RlcCIpLG89ZSgiLi8kLml0ZXJhdG9ycyIpLGE9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9YShlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsaSgxKSk6ImtleXMiPT10P2koMCxyKToidmFsdWVzIj09dD9pKDAsZVtyXSk6aSgwLFtyLGVbcl1dKX0sInZhbHVlcyIpLG8uQXJndW1lbnRzPW8uQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjoyNSwiLi8kLml0ZXItZGVmaW5lIjo1MCwiLi8kLml0ZXItc3RlcCI6NTIsIi4vJC5pdGVyYXRvcnMiOjUzLCIuLyQudG8taW9iamVjdCI6NzJ9XSw3OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gZShuKHQpLHIpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo1OCwiLi8kLnRvLWlvYmplY3QiOjcyfV0sODA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8tb2JqZWN0Iik7ZSgiLi8kLm9iamVjdC1zYXAiKSgiZ2V0UHJvdG90eXBlT2YiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZShuKHQpKX19KX0seyIuLyQub2JqZWN0LXNhcCI6NTgsIi4vJC50by1vYmplY3QiOjc0fV0sODE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOmUoIi4vJC5zZXQtcHJvdG8iKS5zZXR9KX0seyIuLyQuZXhwb3J0IjozNSwiLi8kLnNldC1wcm90byI6NjN9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe30se31dLDgzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLGk9ZSgiLi8kIiksbz1lKCIuLyQubGlicmFyeSIpLGE9ZSgiLi8kLmdsb2JhbCIpLHM9ZSgiLi8kLmN0eCIpLHU9ZSgiLi8kLmNsYXNzb2YiKSxjPWUoIi4vJC5leHBvcnQiKSxsPWUoIi4vJC5pcy1vYmplY3QiKSxmPWUoIi4vJC5hbi1vYmplY3QiKSxwPWUoIi4vJC5hLWZ1bmN0aW9uIiksaD1lKCIuLyQuc3RyaWN0LW5ldyIpLGQ9ZSgiLi8kLmZvci1vZiIpLHk9ZSgiLi8kLnNldC1wcm90byIpLnNldCxtPWUoIi4vJC5zYW1lLXZhbHVlIiksZz1lKCIuLyQud2tzIikoInNwZWNpZXMiKSx2PWUoIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIiksYj1lKCIuLyQubWljcm90YXNrIiksXz0iUHJvbWlzZSIsTz1hLnByb2Nlc3MsJD0icHJvY2VzcyI9PXUoTyksRT1hW19dLFA9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEUoZnVuY3Rpb24oKXt9KTtyZXR1cm4gZSYmKHQuY29uc3RydWN0b3I9T2JqZWN0KSxFLnJlc29sdmUodCk9PT10fSxqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgcj1uZXcgRShlKTtyZXR1cm4geShyLHQucHJvdG90eXBlKSxyfXZhciByPSExO3RyeXtpZihyPUUmJkUucmVzb2x2ZSYmUCgpLHkodCxFKSx0LnByb3RvdHlwZT1pLmNyZWF0ZShFLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnR9fSksdC5yZXNvbHZlKDUpLnRoZW4oZnVuY3Rpb24oKXt9KWluc3RhbmNlb2YgdHx8KHI9ITEpLHImJmUoIi4vJC5kZXNjcmlwdG9ycyIpKXt2YXIgbj0hMTtFLnJlc29sdmUoaS5zZXREZXNjKHt9LCJ0aGVuIix7Z2V0OmZ1bmN0aW9uKCl7bj0hMH19KSkscj1ufX1jYXRjaChvKXtyPSExfXJldHVybiByfSgpLGs9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbyYmZT09PUUmJnQ9PT1uPyEwOm0oZSx0KX0sUz1mdW5jdGlvbihlKXt2YXIgdD1mKGUpW2ddO3JldHVybiB2b2lkIDAhPXQ/dDplfSx3PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBsKGUpJiYiZnVuY3Rpb24iPT10eXBlb2YodD1lLnRoZW4pP3Q6ITF9LFI9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPXAodCksdGhpcy5yZWplY3Q9cChyKX0seD1mdW5jdGlvbihlKXt0cnl7ZSgpfWNhdGNoKHQpe3JldHVybntlcnJvcjp0fX19LE09ZnVuY3Rpb24oZSx0KXtpZighZS5uKXtlLm49ITA7dmFyIHI9ZS5jO2IoZnVuY3Rpb24oKXtmb3IodmFyIG49ZS52LGk9MT09ZS5zLG89MCxzPWZ1bmN0aW9uKHQpe3ZhciByLG8sYT1pP3Qub2s6dC5mYWlsLHM9dC5yZXNvbHZlLHU9dC5yZWplY3Q7dHJ5e2E/KGl8fChlLmg9ITApLHI9YT09PSEwP246YShuKSxyPT09dC5wcm9taXNlP3UoVHlwZUVycm9yKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihvPXcocikpP28uY2FsbChyLHMsdSk6cyhyKSk6dShuKX1jYXRjaChjKXt1KGMpfX07ci5sZW5ndGg+bzspcyhyW28rK10pO3IubGVuZ3RoPTAsZS5uPSExLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdCxyLGk9ZS5wO0EoaSkmJigkP08uZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixuLGkpOih0PWEub251bmhhbmRsZWRyZWplY3Rpb24pP3Qoe3Byb21pc2U6aSxyZWFzb246bn0pOihyPWEuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbikpLGUuYT12b2lkIDB9LDEpfSl9fSxBPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5fZCxuPXIuYXx8ci5jLGk9MDtpZihyLmgpcmV0dXJuITE7Zm9yKDtuLmxlbmd0aD5pOylpZih0PW5baSsrXSx0LmZhaWx8fCFBKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LE49ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmR8fCh0LmQ9ITAsdD10LnJ8fHQsdC52PWUsdC5zPTIsdC5hPXQuYy5zbGljZSgpLE0odCwhMCkpfSxUPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5kKXtyLmQ9ITAscj1yLnJ8fHI7dHJ5e2lmKHIucD09PWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PXcoZSkpP2IoZnVuY3Rpb24oKXt2YXIgbj17cjpyLGQ6ITF9O3RyeXt0LmNhbGwoZSxzKFQsbiwxKSxzKE4sbiwxKSl9Y2F0Y2goaSl7Ti5jYWxsKG4saSl9fSk6KHIudj1lLHIucz0xLE0ociwhMSkpfWNhdGNoKG4pe04uY2FsbCh7cjpyLGQ6ITF9LG4pfX19O2p8fChFPWZ1bmN0aW9uKGUpe3AoZSk7dmFyIHQ9dGhpcy5fZD17cDpoKHRoaXMsRSxfKSxjOltdLGE6dm9pZCAwLHM6MCxkOiExLHY6dm9pZCAwLGg6ITEsbjohMX07dHJ5e2UocyhULHQsMSkscyhOLHQsMSkpfWNhdGNoKHIpe04uY2FsbCh0LHIpfX0sZSgiLi8kLnJlZGVmaW5lLWFsbCIpKEUucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IFIodih0aGlzLEUpKSxuPXIucHJvbWlzZSxpPXRoaXMuX2Q7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTohMCxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsaS5jLnB1c2gociksaS5hJiZpLmEucHVzaChyKSxpLnMmJk0oaSwhMSksbn0sImNhdGNoIjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSksYyhjLkcrYy5XK2MuRiohaix7UHJvbWlzZTpFfSksZSgiLi8kLnNldC10by1zdHJpbmctdGFnIikoRSxfKSxlKCIuLyQuc2V0LXNwZWNpZXMiKShfKSxuPWUoIi4vJC5jb3JlIilbX10sYyhjLlMrYy5GKiFqLF8se3JlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgUih0aGlzKSxyPXQucmVqZWN0O3JldHVybiByKGUpLHQucHJvbWlzZX19KSxjKGMuUytjLkYqKCFqfHxQKCEwKSksXyx7cmVzb2x2ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgRSYmayhlLmNvbnN0cnVjdG9yLHRoaXMpKXJldHVybiBlO3ZhciB0PW5ldyBSKHRoaXMpLHI9dC5yZXNvbHZlO3JldHVybiByKGUpLHQucHJvbWlzZX19KSxjKGMuUytjLkYqIShqJiZlKCIuLyQuaXRlci1kZXRlY3QiKShmdW5jdGlvbihlKXtFLmFsbChlKVsiY2F0Y2giXShmdW5jdGlvbigpe30pfSkpLF8se2FsbDpmdW5jdGlvbihlKXt2YXIgdD1TKHRoaXMpLHI9bmV3IFIodCksbj1yLnJlc29sdmUsbz1yLnJlamVjdCxhPVtdLHM9eChmdW5jdGlvbigpe2QoZSwhMSxhLnB1c2gsYSk7dmFyIHI9YS5sZW5ndGgscz1BcnJheShyKTtyP2kuZWFjaC5jYWxsKGEsZnVuY3Rpb24oZSxpKXt2YXIgYT0hMTt0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXthfHwoYT0hMCxzW2ldPWUsLS1yfHxuKHMpKX0sbyl9KTpuKHMpfSk7cmV0dXJuIHMmJm8ocy5lcnJvciksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PVModGhpcykscj1uZXcgUih0KSxuPXIucmVqZWN0LGk9eChmdW5jdGlvbigpe2QoZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBpJiZuKGkuZXJyb3IpLHIucHJvbWlzZX19KX0seyIuLyQiOjU0LCIuLyQuYS1mdW5jdGlvbiI6MjQsIi4vJC5hbi1vYmplY3QiOjI2LCIuLyQuY2xhc3NvZiI6MjcsIi4vJC5jb3JlIjoyOSwiLi8kLmN0eCI6MzAsIi4vJC5kZXNjcmlwdG9ycyI6MzIsIi4vJC5leHBvcnQiOjM1LCIuLyQuZm9yLW9mIjozNywiLi8kLmdsb2JhbCI6MzksIi4vJC5pcy1vYmplY3QiOjQ3LCIuLyQuaXRlci1kZXRlY3QiOjUxLCIuLyQubGlicmFyeSI6NTYsIi4vJC5taWNyb3Rhc2siOjU3LCIuLyQucmVkZWZpbmUtYWxsIjo2MCwiLi8kLnNhbWUtdmFsdWUiOjYyLCIuLyQuc2V0LXByb3RvIjo2MywiLi8kLnNldC1zcGVjaWVzIjo2NCwiLi8kLnNldC10by1zdHJpbmctdGFnIjo2NSwiLi8kLnNwZWNpZXMtY29uc3RydWN0b3IiOjY3LCIuLyQuc3RyaWN0LW5ldyI6NjgsIi4vJC53a3MiOjc2fV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLnN0cmluZy1hdCIpKCEwKTtlKCIuLyQuaXRlci1kZWZpbmUiKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSx7Ii4vJC5pdGVyLWRlZmluZSI6NTAsIi4vJC5zdHJpbmctYXQiOjY5fV0sODU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kIiksaT1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuaGFzIiksYT1lKCIuLyQuZGVzY3JpcHRvcnMiKSxzPWUoIi4vJC5leHBvcnQiKSx1PWUoIi4vJC5yZWRlZmluZSIpLGM9ZSgiLi8kLmZhaWxzIiksbD1lKCIuLyQuc2hhcmVkIiksZj1lKCIuLyQuc2V0LXRvLXN0cmluZy10YWciKSxwPWUoIi4vJC51aWQiKSxoPWUoIi4vJC53a3MiKSxkPWUoIi4vJC5rZXlvZiIpLHk9ZSgiLi8kLmdldC1uYW1lcyIpLG09ZSgiLi8kLmVudW0ta2V5cyIpLGc9ZSgiLi8kLmlzLWFycmF5Iiksdj1lKCIuLyQuYW4tb2JqZWN0IiksYj1lKCIuLyQudG8taW9iamVjdCIpLF89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxPPW4uZ2V0RGVzYywkPW4uc2V0RGVzYyxFPW4uY3JlYXRlLFA9eS5nZXQsaj1pLlN5bWJvbCxrPWkuSlNPTixTPWsmJmsuc3RyaW5naWZ5LHc9ITEsUj1oKCJfaGlkZGVuIikseD1uLmlzRW51bSxNPWwoInN5bWJvbC1yZWdpc3RyeSIpLEE9bCgic3ltYm9scyIpLE49ImZ1bmN0aW9uIj09dHlwZW9mIGosVD1PYmplY3QucHJvdG90eXBlLEM9YSYmYyhmdW5jdGlvbigpe3JldHVybiA3IT1FKCQoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49TyhULHQpO24mJmRlbGV0ZSBUW3RdLCQoZSx0LHIpLG4mJmUhPT1UJiYkKFQsdCxuKX06JCxJPWZ1bmN0aW9uKGUpe3ZhciB0PUFbZV09RShqLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSxhJiZ3JiZDKFQsZSx7Y29uZmlndXJhYmxlOiEwLHNldDpmdW5jdGlvbih0KXtvKHRoaXMsUikmJm8odGhpc1tSXSxlKSYmKHRoaXNbUl1bZV09ITEpLEModGhpcyxlLF8oMSx0KSl9fSksdH0sVT1mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9LEQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiByJiZvKEEsdCk/KHIuZW51bWVyYWJsZT8obyhlLFIpJiZlW1JdW3RdJiYoZVtSXVt0XT0hMSkscj1FKHIse2VudW1lcmFibGU6XygwLCExKX0pKToobyhlLFIpfHwkKGUsUixfKDEse30pKSxlW1JdW3RdPSEwKSxDKGUsdCxyKSk6JChlLHQscil9LEw9ZnVuY3Rpb24oZSx0KXt2KGUpO2Zvcih2YXIgcixuPW0odD1iKHQpKSxpPTAsbz1uLmxlbmd0aDtvPmk7KUQoZSxyPW5baSsrXSx0W3JdKTtyZXR1cm4gZX0sRj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P0UoZSk6TChFKGUpLHQpfSxIPWZ1bmN0aW9uKGUpe3ZhciB0PXguY2FsbCh0aGlzLGUpO3JldHVybiB0fHwhbyh0aGlzLGUpfHwhbyhBLGUpfHxvKHRoaXMsUikmJnRoaXNbUl1bZV0/dDohMH0sWT1mdW5jdGlvbihlLHQpe3ZhciByPU8oZT1iKGUpLHQpO3JldHVybiFyfHwhbyhBLHQpfHxvKGUsUikmJmVbUl1bdF18fChyLmVudW1lcmFibGU9ITApLHJ9LEI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9UChiKGUpKSxuPVtdLGk9MDtyLmxlbmd0aD5pOylvKEEsdD1yW2krK10pfHx0PT1SfHxuLnB1c2godCk7cmV0dXJuIG59LEs9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9UChiKGUpKSxuPVtdLGk9MDtyLmxlbmd0aD5pOylvKEEsdD1yW2krK10pJiZuLnB1c2goQVt0XSk7cmV0dXJuIG59LHE9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSYmIVUoZSkpe2Zvcih2YXIgdCxyLG49W2VdLGk9MSxvPWFyZ3VtZW50cztvLmxlbmd0aD5pOyluLnB1c2gob1tpKytdKTtyZXR1cm4gdD1uWzFdLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10KSwocnx8IWcodCkpJiYodD1mdW5jdGlvbihlLHQpe3JldHVybiByJiYodD1yLmNhbGwodGhpcyxlLHQpKSxVKHQpP3ZvaWQgMDp0fSksblsxXT10LFMuYXBwbHkoayxuKX19LEo9YyhmdW5jdGlvbigpe3ZhciBlPWooKTtyZXR1cm4iW251bGxdIiE9UyhbZV0pfHwie30iIT1TKHthOmV9KXx8Int9IiE9UyhPYmplY3QoZSkpfSk7Tnx8KGo9ZnVuY3Rpb24oKXtpZihVKHRoaXMpKXRocm93IFR5cGVFcnJvcigiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIik7cmV0dXJuIEkocChhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCkpfSx1KGoucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLFU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBqfSxuLmNyZWF0ZT1GLG4uaXNFbnVtPUgsbi5nZXREZXNjPVksbi5zZXREZXNjPUQsbi5zZXREZXNjcz1MLG4uZ2V0TmFtZXM9eS5nZXQ9QixuLmdldFN5bWJvbHM9SyxhJiYhZSgiLi8kLmxpYnJhcnkiKSYmdShULCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsSCwhMCkpO3ZhciBHPXsiZm9yIjpmdW5jdGlvbihlKXtyZXR1cm4gbyhNLGUrPSIiKT9NW2VdOk1bZV09aihlKX0sa2V5Rm9yOmZ1bmN0aW9uKGUpe3JldHVybiBkKE0sZSl9LHVzZVNldHRlcjpmdW5jdGlvbigpe3c9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe3c9ITF9fTtuLmVhY2guY2FsbCgiaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMiLnNwbGl0KCIsIiksZnVuY3Rpb24oZSl7dmFyIHQ9aChlKTtHW2VdPU4/dDpJKHQpfSksdz0hMCxzKHMuRytzLlcse1N5bWJvbDpqfSkscyhzLlMsIlN5bWJvbCIsRykscyhzLlMrcy5GKiFOLCJPYmplY3QiLHtjcmVhdGU6RixkZWZpbmVQcm9wZXJ0eTpELGRlZmluZVByb3BlcnRpZXM6TCxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6WSxnZXRPd25Qcm9wZXJ0eU5hbWVzOkIsZ2V0T3duUHJvcGVydHlTeW1ib2xzOkt9KSxrJiZzKHMuUytzLkYqKCFOfHxKKSwiSlNPTiIse3N0cmluZ2lmeTpxfSksZihqLCJTeW1ib2wiKSxmKE1hdGgsIk1hdGgiLCEwKSxmKGkuSlNPTiwiSlNPTiIsITApfSx7Ii4vJCI6NTQsIi4vJC5hbi1vYmplY3QiOjI2LCIuLyQuZGVzY3JpcHRvcnMiOjMyLCIuLyQuZW51bS1rZXlzIjozNCwiLi8kLmV4cG9ydCI6MzUsIi4vJC5mYWlscyI6MzYsIi4vJC5nZXQtbmFtZXMiOjM4LCIuLyQuZ2xvYmFsIjozOSwiLi8kLmhhcyI6NDAsIi4vJC5pcy1hcnJheSI6NDYsIi4vJC5rZXlvZiI6NTUsIi4vJC5saWJyYXJ5Ijo1NiwiLi8kLnByb3BlcnR5LWRlc2MiOjU5LCIuLyQucmVkZWZpbmUiOjYxLCIuLyQuc2V0LXRvLXN0cmluZy10YWciOjY1LCIuLyQuc2hhcmVkIjo2NiwiLi8kLnRvLWlvYmplY3QiOjcyLCIuLyQudWlkIjo3NSwiLi8kLndrcyI6NzZ9XSw4NjpbZnVuY3Rpb24oZSx0LHIpe2UoIi4vZXM2LmFycmF5Lml0ZXJhdG9yIik7dmFyIG49ZSgiLi8kLml0ZXJhdG9ycyIpO24uTm9kZUxpc3Q9bi5IVE1MQ29sbGVjdGlvbj1uLkFycmF5fSx7Ii4vJC5pdGVyYXRvcnMiOjUzLCIuL2VzNi5hcnJheS5pdGVyYXRvciI6Nzh9XSw4NzpbZnVuY3Rpb24odCxyLG4peyFmdW5jdGlvbih0LG4peyJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFtZD9lKFtdLG4pOiJ1bmRlZmluZWQiIT10eXBlb2YgciYmci5leHBvcnRzP3IuZXhwb3J0cz1uKCk6dC50djQ9bigpfSh0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZW5jb2RlVVJJKGUpLnJlcGxhY2UoLyUyNVswLTldWzAtOV0vZyxmdW5jdGlvbihlKXtyZXR1cm4iJSIrZS5zdWJzdHJpbmcoMyl9KX1mdW5jdGlvbiB0KHQpe3ZhciByPSIiO3BbdC5jaGFyQXQoMCldJiYocj10LmNoYXJBdCgwKSx0PXQuc3Vic3RyaW5nKDEpKTt2YXIgbj0iIixpPSIiLG89ITAsYT0hMSxzPSExOyIrIj09PXI/bz0hMToiLiI9PT1yPyhpPSIuIixuPSIuIik6Ii8iPT09cj8oaT0iLyIsbj0iLyIpOiIjIj09PXI/KGk9IiMiLG89ITEpOiI7Ij09PXI/KGk9IjsiLG49IjsiLGE9ITAscz0hMCk6Ij8iPT09cj8oaT0iPyIsbj0iJiIsYT0hMCk6IiYiPT09ciYmKGk9IiYiLG49IiYiLGE9ITApO2Zvcih2YXIgdT1bXSxjPXQuc3BsaXQoIiwiKSxsPVtdLGY9e30sZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgeT1jW2RdLG09bnVsbDtpZigtMSE9PXkuaW5kZXhPZigiOiIpKXt2YXIgZz15LnNwbGl0KCI6Iik7eT1nWzBdLG09cGFyc2VJbnQoZ1sxXSwxMCl9Zm9yKHZhciB2PXt9O2hbeS5jaGFyQXQoeS5sZW5ndGgtMSldOyl2W3kuY2hhckF0KHkubGVuZ3RoLTEpXT0hMCx5PXkuc3Vic3RyaW5nKDAseS5sZW5ndGgtMSk7dmFyIGI9e3RydW5jYXRlOm0sbmFtZTp5LHN1ZmZpY2VzOnZ9O2wucHVzaChiKSxmW3ldPWIsdS5wdXNoKHkpfXZhciBfPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0iIix1PTAsYz0wO2M8bC5sZW5ndGg7YysrKXt2YXIgZj1sW2NdLHA9dChmLm5hbWUpO2lmKG51bGw9PT1wfHx2b2lkIDA9PT1wfHxBcnJheS5pc0FycmF5KHApJiYwPT09cC5sZW5ndGh8fCJvYmplY3QiPT10eXBlb2YgcCYmMD09PU9iamVjdC5rZXlzKHApLmxlbmd0aCl1Kys7ZWxzZSBpZihyKz1jPT09dT9pOm58fCIsIixBcnJheS5pc0FycmF5KHApKXthJiYocis9Zi5uYW1lKyI9Iik7Zm9yKHZhciBoPTA7aDxwLmxlbmd0aDtoKyspaD4wJiYocis9Zi5zdWZmaWNlc1siKiJdP258fCIsIjoiLCIsZi5zdWZmaWNlc1siKiJdJiZhJiYocis9Zi5uYW1lKyI9IikpLHIrPW8/ZW5jb2RlVVJJQ29tcG9uZW50KHBbaF0pLnJlcGxhY2UoLyEvZywiJTIxIik6ZShwW2hdKX1lbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgcCl7YSYmIWYuc3VmZmljZXNbIioiXSYmKHIrPWYubmFtZSsiPSIpO3ZhciBkPSEwO2Zvcih2YXIgeSBpbiBwKWR8fChyKz1mLnN1ZmZpY2VzWyIqIl0/bnx8IiwiOiIsIiksZD0hMSxyKz1vP2VuY29kZVVSSUNvbXBvbmVudCh5KS5yZXBsYWNlKC8hL2csIiUyMSIpOmUoeSkscis9Zi5zdWZmaWNlc1siKiJdPyI9IjoiLCIscis9bz9lbmNvZGVVUklDb21wb25lbnQocFt5XSkucmVwbGFjZSgvIS9nLCIlMjEiKTplKHBbeV0pfWVsc2UgYSYmKHIrPWYubmFtZSxzJiYiIj09PXB8fChyKz0iPSIpKSxudWxsIT1mLnRydW5jYXRlJiYocD1wLnN1YnN0cmluZygwLGYudHJ1bmNhdGUpKSxyKz1vP2VuY29kZVVSSUNvbXBvbmVudChwKS5yZXBsYWNlKC8hL2csIiUyMSIpOmUocCl9cmV0dXJuIHJ9O3JldHVybiBfLnZhck5hbWVzPXUse3ByZWZpeDppLHN1YnN0aXR1dGlvbjpffX1mdW5jdGlvbiByKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHIpKXJldHVybiBuZXcgcihlKTtmb3IodmFyIG49ZS5zcGxpdCgieyIpLGk9W24uc2hpZnQoKV0sbz1bXSxhPVtdLHM9W107bi5sZW5ndGg+MDspe3ZhciB1PW4uc2hpZnQoKSxjPXUuc3BsaXQoIn0iKVswXSxsPXUuc3Vic3RyaW5nKGMubGVuZ3RoKzEpLGY9dChjKTthLnB1c2goZi5zdWJzdGl0dXRpb24pLG8ucHVzaChmLnByZWZpeCksaS5wdXNoKGwpLHM9cy5jb25jYXQoZi5zdWJzdGl0dXRpb24udmFyTmFtZXMpfXRoaXMuZmlsbD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9aVswXSxyPTA7cjxhLmxlbmd0aDtyKyspe3ZhciBuPWFbcl07dCs9bihlKSx0Kz1pW3IrMV19cmV0dXJuIHR9LHRoaXMudmFyTmFtZXM9cyx0aGlzLnRlbXBsYXRlPWV9ZnVuY3Rpb24gbihlLHQpe2lmKGU9PT10KXJldHVybiEwO2lmKGUmJnQmJiJvYmplY3QiPT10eXBlb2YgZSYmIm9iamVjdCI9PXR5cGVvZiB0KXtpZihBcnJheS5pc0FycmF5KGUpIT09QXJyYXkuaXNBcnJheSh0KSlyZXR1cm4hMTtpZihBcnJheS5pc0FycmF5KGUpKXtpZihlLmxlbmd0aCE9PXQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWlmKCFuKGVbcl0sdFtyXSkpcmV0dXJuITF9ZWxzZXt2YXIgaTtmb3IoaSBpbiBlKWlmKHZvaWQgMD09PXRbaV0mJnZvaWQgMCE9PWVbaV0pcmV0dXJuITE7Zm9yKGkgaW4gdClpZih2b2lkIDA9PT1lW2ldJiZ2b2lkIDAhPT10W2ldKXJldHVybiExO2ZvcihpIGluIGUpaWYoIW4oZVtpXSx0W2ldKSlyZXR1cm4hMX1yZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBpKGUpe3ZhciB0PVN0cmluZyhlKS5yZXBsYWNlKC9eXHMrfFxzKyQvZywiIikubWF0Y2goL14oW146XC8/I10rOik/KFwvXC8oPzpbXjpAXSooPzo6W146QF0qKT9AKT8oKFteOlwvPyNdKikoPzo6KFxkKikpPykpPyhbXj8jXSopKFw/W14jXSopPygjW1xzXFNdKik/Lyk7cmV0dXJuIHQ/e2hyZWY6dFswXXx8IiIscHJvdG9jb2w6dFsxXXx8IiIsYXV0aG9yaXR5OnRbMl18fCIiLGhvc3Q6dFszXXx8IiIsaG9zdG5hbWU6dFs0XXx8IiIscG9ydDp0WzVdfHwiIixwYXRobmFtZTp0WzZdfHwiIixzZWFyY2g6dFs3XXx8IiIsaGFzaDp0WzhdfHwiIn06bnVsbH1mdW5jdGlvbiBvKGUsdCl7ZnVuY3Rpb24gcihlKXt2YXIgdD1bXTtyZXR1cm4gZS5yZXBsYWNlKC9eKFwuXC4/KFwvfCQpKSsvLCIiKS5yZXBsYWNlKC9cLyhcLihcL3wkKSkrL2csIi8iKS5yZXBsYWNlKC9cL1wuXC4kLywiLy4uLyIpLnJlcGxhY2UoL1wvP1teXC9dKi9nLGZ1bmN0aW9uKGUpeyIvLi4iPT09ZT90LnBvcCgpOnQucHVzaChlKX0pLHQuam9pbigiIikucmVwbGFjZSgvXlwvLywiLyI9PT1lLmNoYXJBdCgwKT8iLyI6IiIpfXJldHVybiB0PWkodHx8IiIpLGU9aShlfHwiIiksdCYmZT8odC5wcm90b2NvbHx8ZS5wcm90b2NvbCkrKHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5P3QuYXV0aG9yaXR5OmUuYXV0aG9yaXR5KStyKHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5fHwiLyI9PT10LnBhdGhuYW1lLmNoYXJBdCgwKT90LnBhdGhuYW1lOnQucGF0aG5hbWU/KGUuYXV0aG9yaXR5JiYhZS5wYXRobmFtZT8iLyI6IiIpK2UucGF0aG5hbWUuc2xpY2UoMCxlLnBhdGhuYW1lLmxhc3RJbmRleE9mKCIvIikrMSkrdC5wYXRobmFtZTplLnBhdGhuYW1lKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fHQucGF0aG5hbWU/dC5zZWFyY2g6dC5zZWFyY2h8fGUuc2VhcmNoKSt0Lmhhc2g6bnVsbH1mdW5jdGlvbiBhKGUpe3JldHVybiBlLnNwbGl0KCIjIilbMF19ZnVuY3Rpb24gcyhlLHQpe2lmKGUmJiJvYmplY3QiPT10eXBlb2YgZSlpZih2b2lkIDA9PT10P3Q9ZS5pZDoic3RyaW5nIj09dHlwZW9mIGUuaWQmJih0PW8odCxlLmlkKSxlLmlkPXQpLEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspcyhlW3JdLHQpO2Vsc2V7InN0cmluZyI9PXR5cGVvZiBlLiRyZWYmJihlLiRyZWY9byh0LGUuJHJlZikpO2Zvcih2YXIgbiBpbiBlKSJlbnVtIiE9PW4mJnMoZVtuXSx0KX19ZnVuY3Rpb24gdShlKXtlPWV8fCJlbiI7dmFyIHQ9T1tlXTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dFtlLmNvZGVdfHxfW2UuY29kZV07aWYoInN0cmluZyIhPXR5cGVvZiByKXJldHVybiJVbmtub3duIGVycm9yIGNvZGUgIitlLmNvZGUrIjogIitKU09OLnN0cmluZ2lmeShlLm1lc3NhZ2VQYXJhbXMpO3ZhciBuPWUucGFyYW1zO3JldHVybiByLnJlcGxhY2UoL1x7KFtee31dKilcfS9nLGZ1bmN0aW9uKGUsdCl7dmFyIHI9blt0XTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHJ8fCJudW1iZXIiPT10eXBlb2Ygcj9yOmV9KX19ZnVuY3Rpb24gYyhlLHQscixuLGkpe2lmKEVycm9yLmNhbGwodGhpcyksdm9pZCAwPT09ZSl0aHJvdyBuZXcgRXJyb3IoIk5vIGVycm9yIGNvZGUgc3VwcGxpZWQ6ICIrbik7dGhpcy5tZXNzYWdlPSIiLHRoaXMucGFyYW1zPXQsdGhpcy5jb2RlPWUsdGhpcy5kYXRhUGF0aD1yfHwiIix0aGlzLnNjaGVtYVBhdGg9bnx8IiIsdGhpcy5zdWJFcnJvcnM9aXx8bnVsbDt2YXIgbz1uZXcgRXJyb3IodGhpcy5tZXNzYWdlKTtpZih0aGlzLnN0YWNrPW8uc3RhY2t8fG8uc3RhY2t0cmFjZSwhdGhpcy5zdGFjayl0cnl7dGhyb3cgb31jYXRjaChvKXt0aGlzLnN0YWNrPW8uc3RhY2t8fG8uc3RhY2t0cmFjZX19ZnVuY3Rpb24gbChlLHQpe2lmKHQuc3Vic3RyaW5nKDAsZS5sZW5ndGgpPT09ZSl7dmFyIHI9dC5zdWJzdHJpbmcoZS5sZW5ndGgpO2lmKHQubGVuZ3RoPjAmJiIvIj09PXQuY2hhckF0KGUubGVuZ3RoLTEpfHwiIyI9PT1yLmNoYXJBdCgwKXx8Ij8iPT09ci5jaGFyQXQoMCkpcmV0dXJuITA7Cn1yZXR1cm4hMX1mdW5jdGlvbiBmKGUpe3ZhciB0LHIsbj1uZXcgZCxpPXtzZXRFcnJvclJlcG9ydGVyOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZT90aGlzLmxhbmd1YWdlKGUpOihyPWUsITApfSxhZGRGb3JtYXQ6ZnVuY3Rpb24oKXtuLmFkZEZvcm1hdC5hcHBseShuLGFyZ3VtZW50cyl9LGxhbmd1YWdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyhPW2VdfHwoZT1lLnNwbGl0KCItIilbMF0pLE9bZV0/KHQ9ZSxlKTohMSk6dH0sYWRkTGFuZ3VhZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgcjtmb3IociBpbiBnKXRbcl0mJiF0W2dbcl1dJiYodFtnW3JdXT10W3JdKTt2YXIgbj1lLnNwbGl0KCItIilbMF07aWYoT1tuXSl7T1tlXT1PYmplY3QuY3JlYXRlKE9bbl0pO2ZvcihyIGluIHQpInVuZGVmaW5lZCI9PXR5cGVvZiBPW25dW3JdJiYoT1tuXVtyXT10W3JdKSxPW2VdW3JdPXRbcl19ZWxzZSBPW2VdPXQsT1tuXT10O3JldHVybiB0aGlzfSxmcmVzaEFwaTpmdW5jdGlvbihlKXt2YXIgdD1mKCk7cmV0dXJuIGUmJnQubGFuZ3VhZ2UoZSksdH0sdmFsaWRhdGU6ZnVuY3Rpb24oZSxpLG8sYSl7dmFyIHM9dSh0KSxjPXI/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByKGUsdCxuKXx8cyhlLHQsbil9OnMsbD1uZXcgZChuLCExLGMsbyxhKTsic3RyaW5nIj09dHlwZW9mIGkmJihpPXskcmVmOml9KSxsLmFkZFNjaGVtYSgiIixpKTt2YXIgZj1sLnZhbGlkYXRlQWxsKGUsaSxudWxsLG51bGwsIiIpO3JldHVybiFmJiZhJiYoZj1sLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsaSkpLHRoaXMuZXJyb3I9Zix0aGlzLm1pc3Npbmc9bC5taXNzaW5nLHRoaXMudmFsaWQ9bnVsbD09PWYsdGhpcy52YWxpZH0sdmFsaWRhdGVSZXN1bHQ6ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gdGhpcy52YWxpZGF0ZS5hcHBseShlLGFyZ3VtZW50cyksZX0sdmFsaWRhdGVNdWx0aXBsZTpmdW5jdGlvbihlLGksbyxhKXt2YXIgcz11KHQpLGM9cj9mdW5jdGlvbihlLHQsbil7cmV0dXJuIHIoZSx0LG4pfHxzKGUsdCxuKX06cyxsPW5ldyBkKG4sITAsYyxvLGEpOyJzdHJpbmciPT10eXBlb2YgaSYmKGk9eyRyZWY6aX0pLGwuYWRkU2NoZW1hKCIiLGkpLGwudmFsaWRhdGVBbGwoZSxpLG51bGwsbnVsbCwiIiksYSYmbC5iYW5Vbmtub3duUHJvcGVydGllcyhlLGkpO3ZhciBmPXt9O3JldHVybiBmLmVycm9ycz1sLmVycm9ycyxmLm1pc3Npbmc9bC5taXNzaW5nLGYudmFsaWQ9MD09PWYuZXJyb3JzLmxlbmd0aCxmfSxhZGRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gbi5hZGRTY2hlbWEuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWEuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWFNYXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWFNYXAuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWFVcmlzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0U2NoZW1hVXJpcy5hcHBseShuLGFyZ3VtZW50cyl9LGdldE1pc3NpbmdVcmlzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0TWlzc2luZ1VyaXMuYXBwbHkobixhcmd1bWVudHMpfSxkcm9wU2NoZW1hczpmdW5jdGlvbigpe24uZHJvcFNjaGVtYXMuYXBwbHkobixhcmd1bWVudHMpfSxkZWZpbmVLZXl3b3JkOmZ1bmN0aW9uKCl7bi5kZWZpbmVLZXl3b3JkLmFwcGx5KG4sYXJndW1lbnRzKX0sZGVmaW5lRXJyb3I6ZnVuY3Rpb24oZSx0LHIpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8IS9eW0EtWl0rKF9bQS1aXSspKiQvLnRlc3QoZSkpdGhyb3cgbmV3IEVycm9yKCJDb2RlIG5hbWUgbXVzdCBiZSBhIHN0cmluZyBpbiBVUFBFUl9DQVNFX1dJVEhfVU5ERVJTQ09SRVMiKTtpZigibnVtYmVyIiE9dHlwZW9mIHR8fHQlMSE9PTB8fDFlND50KXRocm93IG5ldyBFcnJvcigiQ29kZSBudW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyID4gMTAwMDAiKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGdbZV0pdGhyb3cgbmV3IEVycm9yKCJFcnJvciBhbHJlYWR5IGRlZmluZWQ6ICIrZSsiIGFzICIrZ1tlXSk7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB2W3RdKXRocm93IG5ldyBFcnJvcigiRXJyb3IgY29kZSBhbHJlYWR5IHVzZWQ6ICIrdlt0XSsiIGFzICIrdCk7Z1tlXT10LHZbdF09ZSxfW2VdPV9bdF09cjtmb3IodmFyIG4gaW4gTyl7dmFyIGk9T1tuXTtpW2VdJiYoaVt0XT1pW3RdfHxpW2VdKX19LHJlc2V0OmZ1bmN0aW9uKCl7bi5yZXNldCgpLHRoaXMuZXJyb3I9bnVsbCx0aGlzLm1pc3Npbmc9W10sdGhpcy52YWxpZD0hMH0sbWlzc2luZzpbXSxlcnJvcjpudWxsLHZhbGlkOiEwLG5vcm1TY2hlbWE6cyxyZXNvbHZlVXJsOm8sZ2V0RG9jdW1lbnRVcmk6YSxlcnJvckNvZGVzOmd9O3JldHVybiBpLmxhbmd1YWdlKGV8fCJlbiIpLGl9T2JqZWN0LmtleXN8fChPYmplY3Qua2V5cz1mdW5jdGlvbigpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdD0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLHI9WyJ0b1N0cmluZyIsInRvTG9jYWxlU3RyaW5nIiwidmFsdWVPZiIsImhhc093blByb3BlcnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiY29uc3RydWN0b3IiXSxuPXIubGVuZ3RoO3JldHVybiBmdW5jdGlvbihpKXtpZigib2JqZWN0IiE9dHlwZW9mIGkmJiJmdW5jdGlvbiIhPXR5cGVvZiBpfHxudWxsPT09aSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCIpO3ZhciBvPVtdO2Zvcih2YXIgYSBpbiBpKWUuY2FsbChpLGEpJiZvLnB1c2goYSk7aWYodClmb3IodmFyIHM9MDtuPnM7cysrKWUuY2FsbChpLHJbc10pJiZvLnB1c2gocltzXSk7cmV0dXJuIG99fSgpKSxPYmplY3QuY3JlYXRlfHwoT2JqZWN0LmNyZWF0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiT2JqZWN0LmNyZWF0ZSBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgb25lIHBhcmFtZXRlci4iKTtyZXR1cm4gZS5wcm90b3R5cGU9dCxuZXcgZX19KCkpLEFycmF5LmlzQXJyYXl8fChBcnJheS5pc0FycmF5PWZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9KSxBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIHQ9T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lmKDA9PT1yKXJldHVybi0xO3ZhciBuPTA7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYobj1OdW1iZXIoYXJndW1lbnRzWzFdKSxuIT09bj9uPTA6MCE9PW4mJm4hPT0xLzAmJm4hPT0tKDEvMCkmJihuPShuPjB8fC0xKSpNYXRoLmZsb29yKE1hdGguYWJzKG4pKSkpLG4+PXIpcmV0dXJuLTE7Zm9yKHZhciBpPW4+PTA/bjpNYXRoLm1heChyLU1hdGguYWJzKG4pLDApO3I+aTtpKyspaWYoaSBpbiB0JiZ0W2ldPT09ZSlyZXR1cm4gaTtyZXR1cm4tMX0pLE9iamVjdC5pc0Zyb3plbnx8KE9iamVjdC5pc0Zyb3plbj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9InR2NF90ZXN0X2Zyb3plbl9rZXkiO2UuaGFzT3duUHJvcGVydHkodCk7KXQrPU1hdGgucmFuZG9tKCk7dHJ5e3JldHVybiBlW3RdPSEwLGRlbGV0ZSBlW3RdLCExfWNhdGNoKHIpe3JldHVybiEwfX0pO3ZhciBwPXsiKyI6ITAsIiMiOiEwLCIuIjohMCwiLyI6ITAsIjsiOiEwLCI/IjohMCwiJiI6ITB9LGg9eyIqIjohMH07ci5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVtcGxhdGV9LGZpbGxGcm9tT2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmZpbGwoZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX19O3ZhciBkPWZ1bmN0aW9uKGUsdCxyLG4saSl7aWYodGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmZvcm1hdFZhbGlkYXRvcnM9ZT9PYmplY3QuY3JlYXRlKGUuZm9ybWF0VmFsaWRhdG9ycyk6e30sdGhpcy5zY2hlbWFzPWU/T2JqZWN0LmNyZWF0ZShlLnNjaGVtYXMpOnt9LHRoaXMuY29sbGVjdE11bHRpcGxlPXQsdGhpcy5lcnJvcnM9W10sdGhpcy5oYW5kbGVFcnJvcj10P3RoaXMuY29sbGVjdEVycm9yOnRoaXMucmV0dXJuRXJyb3IsbiYmKHRoaXMuY2hlY2tSZWN1cnNpdmU9ITAsdGhpcy5zY2FubmVkPVtdLHRoaXMuc2Nhbm5lZEZyb3plbj1bXSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzPVtdLHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnM9W10sdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5PSJ0djRfdmFsaWRhdGlvbl9pZCIsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5PSJ0djRfdmFsaWRhdGlvbl9lcnJvcnNfaWQiKSxpJiYodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzPSEwLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30pLHRoaXMuZXJyb3JSZXBvcnRlcj1yfHx1KCJlbiIpLCJzdHJpbmciPT10eXBlb2YgdGhpcy5lcnJvclJlcG9ydGVyKXRocm93IG5ldyBFcnJvcigiZGVidWciKTtpZih0aGlzLmRlZmluZWRLZXl3b3Jkcz17fSxlKWZvcih2YXIgbyBpbiBlLmRlZmluZWRLZXl3b3Jkcyl0aGlzLmRlZmluZWRLZXl3b3Jkc1tvXT1lLmRlZmluZWRLZXl3b3Jkc1tvXS5zbGljZSgwKX07ZC5wcm90b3R5cGUuZGVmaW5lS2V5d29yZD1mdW5jdGlvbihlLHQpe3RoaXMuZGVmaW5lZEtleXdvcmRzW2VdPXRoaXMuZGVmaW5lZEtleXdvcmRzW2VdfHxbXSx0aGlzLmRlZmluZWRLZXl3b3Jkc1tlXS5wdXNoKHQpfSxkLnByb3RvdHlwZS5jcmVhdGVFcnJvcj1mdW5jdGlvbihlLHQscixuLGksbyxhKXt2YXIgcz1uZXcgYyhlLHQscixuLGkpO3JldHVybiBzLm1lc3NhZ2U9dGhpcy5lcnJvclJlcG9ydGVyKHMsbyxhKSxzfSxkLnByb3RvdHlwZS5yZXR1cm5FcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gZX0sZC5wcm90b3R5cGUuY29sbGVjdEVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLmVycm9ycy5wdXNoKGUpLG51bGx9LGQucHJvdG90eXBlLnByZWZpeEVycm9ycz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPWU7bjx0aGlzLmVycm9ycy5sZW5ndGg7bisrKXRoaXMuZXJyb3JzW25dPXRoaXMuZXJyb3JzW25dLnByZWZpeFdpdGgodCxyKTtyZXR1cm4gdGhpc30sZC5wcm90b3R5cGUuYmFuVW5rbm93blByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocyl7dmFyIG49dGhpcy5jcmVhdGVFcnJvcihnLlVOS05PV05fUFJPUEVSVFkse3BhdGg6cn0sciwiIixudWxsLGUsdCksaT10aGlzLmhhbmRsZUVycm9yKG4pO2lmKGkpcmV0dXJuIGl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLmFkZEZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKHZhciByIGluIGUpdGhpcy5hZGRGb3JtYXQocixlW3JdKTtyZXR1cm4gdGhpc310aGlzLmZvcm1hdFZhbGlkYXRvcnNbZV09dH0sZC5wcm90b3R5cGUucmVzb2x2ZVJlZnM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT1lLiRyZWYpe2lmKHQ9dHx8e30sdFtlLiRyZWZdKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuQ0lSQ1VMQVJfUkVGRVJFTkNFLHt1cmxzOk9iamVjdC5rZXlzKHQpLmpvaW4oIiwgIil9LCIiLCIiLG51bGwsdm9pZCAwLGUpO3RbZS4kcmVmXT0hMCxlPXRoaXMuZ2V0U2NoZW1hKGUuJHJlZix0KX1yZXR1cm4gZX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hPWZ1bmN0aW9uKGUsdCl7dmFyIHI7aWYodm9pZCAwIT09dGhpcy5zY2hlbWFzW2VdKXJldHVybiByPXRoaXMuc2NoZW1hc1tlXSx0aGlzLnJlc29sdmVSZWZzKHIsdCk7dmFyIG49ZSxpPSIiO2lmKC0xIT09ZS5pbmRleE9mKCIjIikmJihpPWUuc3Vic3RyaW5nKGUuaW5kZXhPZigiIyIpKzEpLG49ZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIiMiKSkpLCJvYmplY3QiPT10eXBlb2YgdGhpcy5zY2hlbWFzW25dKXtyPXRoaXMuc2NoZW1hc1tuXTt2YXIgbz1kZWNvZGVVUklDb21wb25lbnQoaSk7aWYoIiI9PT1vKXJldHVybiB0aGlzLnJlc29sdmVSZWZzKHIsdCk7aWYoIi8iIT09by5jaGFyQXQoMCkpcmV0dXJuO2Zvcih2YXIgYT1vLnNwbGl0KCIvIikuc2xpY2UoMSkscz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgdT1hW3NdLnJlcGxhY2UoL34xL2csIi8iKS5yZXBsYWNlKC9+MC9nLCJ+Iik7aWYodm9pZCAwPT09clt1XSl7cj12b2lkIDA7YnJlYWt9cj1yW3VdfWlmKHZvaWQgMCE9PXIpcmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMocix0KX12b2lkIDA9PT10aGlzLm1pc3Npbmdbbl0mJih0aGlzLm1pc3NpbmcucHVzaChuKSx0aGlzLm1pc3Npbmdbbl09bix0aGlzLm1pc3NpbmdNYXBbbl09bil9LGQucHJvdG90eXBlLnNlYXJjaFNjaGVtYXM9ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXRoaXMuc2VhcmNoU2NoZW1hcyhlW3JdLHQpO2Vsc2UgaWYoZSYmIm9iamVjdCI9PXR5cGVvZiBlKXsic3RyaW5nIj09dHlwZW9mIGUuaWQmJmwodCxlLmlkKSYmdm9pZCAwPT09dGhpcy5zY2hlbWFzW2UuaWRdJiYodGhpcy5zY2hlbWFzW2UuaWRdPWUpO2Zvcih2YXIgbiBpbiBlKWlmKCJlbnVtIiE9PW4paWYoIm9iamVjdCI9PXR5cGVvZiBlW25dKXRoaXMuc2VhcmNoU2NoZW1hcyhlW25dLHQpO2Vsc2UgaWYoIiRyZWYiPT09bil7dmFyIGk9YShlW25dKTtpJiZ2b2lkIDA9PT10aGlzLnNjaGVtYXNbaV0mJnZvaWQgMD09PXRoaXMubWlzc2luZ01hcFtpXSYmKHRoaXMubWlzc2luZ01hcFtpXT1pKX19fSxkLnByb3RvdHlwZS5hZGRTY2hlbWE9ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHwic3RyaW5nIiE9dHlwZW9mIGUuaWQpcmV0dXJuO3Q9ZSxlPXQuaWR9ZT09PWEoZSkrIiMiJiYoZT1hKGUpKSx0aGlzLnNjaGVtYXNbZV09dCxkZWxldGUgdGhpcy5taXNzaW5nTWFwW2VdLHModCxlKSx0aGlzLnNlYXJjaFNjaGVtYXModCxlKX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hTWFwPWZ1bmN0aW9uKCl7dmFyIGU9e307Zm9yKHZhciB0IGluIHRoaXMuc2NoZW1hcyllW3RdPXRoaXMuc2NoZW1hc1t0XTtyZXR1cm4gZX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5zY2hlbWFzKSghZXx8ZS50ZXN0KHIpKSYmdC5wdXNoKHIpO3JldHVybiB0fSxkLnByb3RvdHlwZS5nZXRNaXNzaW5nVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5taXNzaW5nTWFwKSghZXx8ZS50ZXN0KHIpKSYmdC5wdXNoKHIpO3JldHVybiB0fSxkLnByb3RvdHlwZS5kcm9wU2NoZW1hcz1mdW5jdGlvbigpe3RoaXMuc2NoZW1hcz17fSx0aGlzLnJlc2V0KCl9LGQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmVycm9ycz1bXX0sZC5wcm90b3R5cGUudmFsaWRhdGVBbGw9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbztpZih0PXRoaXMucmVzb2x2ZVJlZnModCksIXQpcmV0dXJuIG51bGw7aWYodCBpbnN0YW5jZW9mIGMpcmV0dXJuIHRoaXMuZXJyb3JzLnB1c2godCksdDt2YXIgYSxzPXRoaXMuZXJyb3JzLmxlbmd0aCx1PW51bGwsbD1udWxsO2lmKHRoaXMuY2hlY2tSZWN1cnNpdmUmJmUmJiJvYmplY3QiPT10eXBlb2YgZSl7aWYobz0hdGhpcy5zY2FubmVkLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pe3ZhciBmPWVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XS5pbmRleE9mKHQpO2lmKC0xIT09ZilyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuY29uY2F0KGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtmXSksbnVsbH1pZihPYmplY3QuaXNGcm96ZW4oZSkmJihhPXRoaXMuc2Nhbm5lZEZyb3plbi5pbmRleE9mKGUpLC0xIT09YSkpe3ZhciBwPXRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbYV0uaW5kZXhPZih0KTtpZigtMSE9PXApcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLmNvbmNhdCh0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW2FdW3BdKSxudWxsfWlmKHRoaXMuc2Nhbm5lZC5wdXNoKGUpLE9iamVjdC5pc0Zyb3plbihlKSktMT09PWEmJihhPXRoaXMuc2Nhbm5lZEZyb3plbi5sZW5ndGgsdGhpcy5zY2FubmVkRnJvemVuLnB1c2goZSksdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcy5wdXNoKFtdKSksdT10aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2FdLmxlbmd0aCx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2FdW3VdPXQsdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1thXVt1XT1bXTtlbHNle2lmKCFlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pdHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHRoaXMudmFsaWRhdGVkU2NoZW1hc0tleSx7dmFsdWU6W10sY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KX1jYXRjaChoKXtlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV09W10sZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldPVtdfWw9ZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV1bbF09dCxlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bbF09W119fXZhciBkPXRoaXMuZXJyb3JzLmxlbmd0aCx5PXRoaXMudmFsaWRhdGVCYXNpYyhlLHQsaSl8fHRoaXMudmFsaWRhdGVOdW1lcmljKGUsdCxpKXx8dGhpcy52YWxpZGF0ZVN0cmluZyhlLHQsaSl8fHRoaXMudmFsaWRhdGVBcnJheShlLHQsaSl8fHRoaXMudmFsaWRhdGVPYmplY3QoZSx0LGkpfHx0aGlzLnZhbGlkYXRlQ29tYmluYXRpb25zKGUsdCxpKXx8dGhpcy52YWxpZGF0ZUh5cGVybWVkaWEoZSx0LGkpfHx0aGlzLnZhbGlkYXRlRm9ybWF0KGUsdCxpKXx8dGhpcy52YWxpZGF0ZURlZmluZWRLZXl3b3JkcyhlLHQsaSl8fG51bGw7aWYobyl7Zm9yKDt0aGlzLnNjYW5uZWQubGVuZ3RoOyl7dmFyIG09dGhpcy5zY2FubmVkLnBvcCgpO2RlbGV0ZSBtW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV19dGhpcy5zY2FubmVkRnJvemVuPVtdLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXM9W119aWYoeXx8ZCE9PXRoaXMuZXJyb3JzLmxlbmd0aClmb3IoO3ImJnIubGVuZ3RofHxuJiZuLmxlbmd0aDspe3ZhciBnPXImJnIubGVuZ3RoPyIiK3IucG9wKCk6bnVsbCx2PW4mJm4ubGVuZ3RoPyIiK24ucG9wKCk6bnVsbDt5JiYoeT15LnByZWZpeFdpdGgoZyx2KSksdGhpcy5wcmVmaXhFcnJvcnMoZCxnLHYpfXJldHVybiBudWxsIT09dT90aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW2FdW3VdPXRoaXMuZXJyb3JzLnNsaWNlKHMpOm51bGwhPT1sJiYoZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2xdPXRoaXMuZXJyb3JzLnNsaWNlKHMpKSx0aGlzLmhhbmRsZUVycm9yKHkpfSxkLnByb3RvdHlwZS52YWxpZGF0ZUZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdC5mb3JtYXR8fCF0aGlzLmZvcm1hdFZhbGlkYXRvcnNbdC5mb3JtYXRdKXJldHVybiBudWxsO3ZhciByPXRoaXMuZm9ybWF0VmFsaWRhdG9yc1t0LmZvcm1hdF0uY2FsbChudWxsLGUsdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiByfHwibnVtYmVyIj09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcihnLkZPUk1BVF9DVVNUT00se21lc3NhZ2U6cn0sIiIsIi9mb3JtYXQiLG51bGwsZSx0KTpyJiYib2JqZWN0Ij09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcihnLkZPUk1BVF9DVVNUT00se21lc3NhZ2U6ci5tZXNzYWdlfHwiPyJ9LHIuZGF0YVBhdGh8fCIiLHIuc2NoZW1hUGF0aHx8Ii9mb3JtYXQiLG51bGwsZSx0KTpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZURlZmluZWRLZXl3b3Jkcz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuIGluIHRoaXMuZGVmaW5lZEtleXdvcmRzKWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgdFtuXSlmb3IodmFyIGk9dGhpcy5kZWZpbmVkS2V5d29yZHNbbl0sbz0wO288aS5sZW5ndGg7bysrKXt2YXIgYT1pW29dLHM9YShlLHRbbl0sdCxyKTtpZigic3RyaW5nIj09dHlwZW9mIHN8fCJudW1iZXIiPT10eXBlb2YgcylyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLktFWVdPUkRfQ1VTVE9NLHtrZXk6bixtZXNzYWdlOnN9LCIiLCIiLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbik7aWYocyYmIm9iamVjdCI9PXR5cGVvZiBzKXt2YXIgdT1zLmNvZGU7aWYoInN0cmluZyI9PXR5cGVvZiB1KXtpZighZ1t1XSl0aHJvdyBuZXcgRXJyb3IoIlVuZGVmaW5lZCBlcnJvciBjb2RlICh1c2UgZGVmaW5lRXJyb3IpOiAiK3UpO3U9Z1t1XX1lbHNlIm51bWJlciIhPXR5cGVvZiB1JiYodT1nLktFWVdPUkRfQ1VTVE9NKTt2YXIgYz0ib2JqZWN0Ij09dHlwZW9mIHMubWVzc2FnZT9zLm1lc3NhZ2U6e2tleTpuLG1lc3NhZ2U6cy5tZXNzYWdlfHwiPyJ9LGw9cy5zY2hlbWFQYXRofHwiLyIrbi5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKTtyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih1LGMscy5kYXRhUGF0aHx8bnVsbCxsLG51bGwsZSx0KX19cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQmFzaWM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO3JldHVybihuPXRoaXMudmFsaWRhdGVUeXBlKGUsdCxyKSk/bi5wcmVmaXhXaXRoKG51bGwsInR5cGUiKToobj10aGlzLnZhbGlkYXRlRW51bShlLHQscikpP24ucHJlZml4V2l0aChudWxsLCJ0eXBlIik6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVUeXBlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dC50eXBlKXJldHVybiBudWxsO3ZhciByPXR5cGVvZiBlO251bGw9PT1lP3I9Im51bGwiOkFycmF5LmlzQXJyYXkoZSkmJihyPSJhcnJheSIpO3ZhciBuPXQudHlwZTtBcnJheS5pc0FycmF5KG4pfHwobj1bbl0pO2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgbz1uW2ldO2lmKG89PT1yfHwiaW50ZWdlciI9PT1vJiYibnVtYmVyIj09PXImJmUlMT09PTApcmV0dXJuIG51bGx9cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5JTlZBTElEX1RZUEUse3R5cGU6cixleHBlY3RlZDpuLmpvaW4oIi8iKX0sIiIsIiIsbnVsbCxlLHQpfSxkLnByb3RvdHlwZS52YWxpZGF0ZUVudW09ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10WyJlbnVtIl0pcmV0dXJuIG51bGw7Zm9yKHZhciByPTA7cjx0WyJlbnVtIl0ubGVuZ3RoO3IrKyl7dmFyIGk9dFsiZW51bSJdW3JdO2lmKG4oZSxpKSlyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLkVOVU1fTUlTTUFUQ0gse3ZhbHVlOiJ1bmRlZmluZWQiIT10eXBlb2YgSlNPTj9KU09OLnN0cmluZ2lmeShlKTplfSwiIiwiIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlTnVtZXJpYz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVNdWx0aXBsZU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU1pbk1heChlLHQscil8fHRoaXMudmFsaWRhdGVOYU4oZSx0LHIpfHxudWxsfTt2YXIgeT1NYXRoLnBvdygyLC01MSksbT0xLXk7ZC5wcm90b3R5cGUudmFsaWRhdGVNdWx0aXBsZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5tdWx0aXBsZU9mfHx0LmRpdmlzaWJsZUJ5O2lmKHZvaWQgMD09PXIpcmV0dXJuIG51bGw7aWYoIm51bWJlciI9PXR5cGVvZiBlKXt2YXIgbj1lL3IlMTtpZihuPj15JiZtPm4pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5OVU1CRVJfTVVMVElQTEVfT0Yse3ZhbHVlOmUsbXVsdGlwbGVPZjpyfSwiIiwiIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlTWluTWF4PWZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciIhPXR5cGVvZiBlKXJldHVybiBudWxsO2lmKHZvaWQgMCE9PXQubWluaW11bSl7aWYoZTx0Lm1pbmltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5OVU1CRVJfTUlOSU1VTSx7dmFsdWU6ZSxtaW5pbXVtOnQubWluaW11bX0sIiIsIi9taW5pbXVtIixudWxsLGUsdCk7aWYodC5leGNsdXNpdmVNaW5pbXVtJiZlPT09dC5taW5pbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFLHt2YWx1ZTplLG1pbmltdW06dC5taW5pbXVtfSwiIiwiL2V4Y2x1c2l2ZU1pbmltdW0iLG51bGwsZSx0KX1pZih2b2lkIDAhPT10Lm1heGltdW0pe2lmKGU+dC5tYXhpbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuTlVNQkVSX01BWElNVU0se3ZhbHVlOmUsbWF4aW11bTp0Lm1heGltdW19LCIiLCIvbWF4aW11bSIsbnVsbCxlLHQpO2lmKHQuZXhjbHVzaXZlTWF4aW11bSYmZT09PXQubWF4aW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLk5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRSx7dmFsdWU6ZSxtYXhpbXVtOnQubWF4aW11bX0sIiIsIi9leGNsdXNpdmVNYXhpbXVtIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlTmFOPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlP251bGw6aXNOYU4oZSk9PT0hMHx8ZT09PTEvMHx8ZT09PS0oMS8wKT90aGlzLmNyZWF0ZUVycm9yKGcuTlVNQkVSX05PVF9BX05VTUJFUix7dmFsdWU6ZX0sIiIsIi90eXBlIixudWxsLGUsdCk6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnZhbGlkYXRlU3RyaW5nTGVuZ3RoKGUsdCxyKXx8dGhpcy52YWxpZGF0ZVN0cmluZ1BhdHRlcm4oZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ0xlbmd0aD1mdW5jdGlvbihlLHQpe3JldHVybiJzdHJpbmciIT10eXBlb2YgZT9udWxsOnZvaWQgMCE9PXQubWluTGVuZ3RoJiZlLmxlbmd0aDx0Lm1pbkxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKGcuU1RSSU5HX0xFTkdUSF9TSE9SVCx7bGVuZ3RoOmUubGVuZ3RoLG1pbmltdW06dC5taW5MZW5ndGh9LCIiLCIvbWluTGVuZ3RoIixudWxsLGUsdCk6dm9pZCAwIT09dC5tYXhMZW5ndGgmJmUubGVuZ3RoPnQubWF4TGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IoZy5TVFJJTkdfTEVOR1RIX0xPTkcse2xlbmd0aDplLmxlbmd0aCxtYXhpbXVtOnQubWF4TGVuZ3RofSwiIiwiL21heExlbmd0aCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nUGF0dGVybj1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8InN0cmluZyIhPXR5cGVvZiB0LnBhdHRlcm4mJiEodC5wYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSlyZXR1cm4gbnVsbDt2YXIgcjtpZih0LnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApcj10LnBhdHRlcm47ZWxzZXt2YXIgbixpPSIiLG89dC5wYXR0ZXJuLm1hdGNoKC9eXC8oLispXC8oW2ltZ10qKSQvKTtvPyhuPW9bMV0saT1vWzJdKTpuPXQucGF0dGVybixyPW5ldyBSZWdFeHAobixpKX1yZXR1cm4gci50ZXN0KGUpP251bGw6dGhpcy5jcmVhdGVFcnJvcihnLlNUUklOR19QQVRURVJOLHtwYXR0ZXJuOnQucGF0dGVybn0sIiIsIi9wYXR0ZXJuIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXk9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP3RoaXMudmFsaWRhdGVBcnJheUxlbmd0aChlLHQscil8fHRoaXMudmFsaWRhdGVBcnJheVVuaXF1ZUl0ZW1zKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFycmF5SXRlbXMoZSx0LHIpfHxudWxsOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlMZW5ndGg9ZnVuY3Rpb24oZSx0KXt2YXIgcjtyZXR1cm4gdm9pZCAwIT09dC5taW5JdGVtcyYmZS5sZW5ndGg8dC5taW5JdGVtcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihnLkFSUkFZX0xFTkdUSF9TSE9SVCx7bGVuZ3RoOmUubGVuZ3RoLG1pbmltdW06dC5taW5JdGVtc30sIiIsIi9taW5JdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhJdGVtcyYmZS5sZW5ndGg+dC5tYXhJdGVtcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihnLkFSUkFZX0xFTkdUSF9MT05HLHtsZW5ndGg6ZS5sZW5ndGgsbWF4aW11bTp0Lm1heEl0ZW1zfSwiIiwiL21heEl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXM9ZnVuY3Rpb24oZSx0KXtpZih0LnVuaXF1ZUl0ZW1zKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWZvcih2YXIgaT1yKzE7aTxlLmxlbmd0aDtpKyspaWYobihlW3JdLGVbaV0pKXt2YXIgbz10aGlzLmNyZWF0ZUVycm9yKGcuQVJSQVlfVU5JUVVFLHttYXRjaDE6cixtYXRjaDI6aX0sIiIsIi91bmlxdWVJdGVtcyIsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IobykpcmV0dXJuIG99cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlJdGVtcz1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5pdGVtcylyZXR1cm4gbnVsbDt2YXIgbixpO2lmKEFycmF5LmlzQXJyYXkodC5pdGVtcykpe2ZvcihpPTA7aTxlLmxlbmd0aDtpKyspaWYoaTx0Lml0ZW1zLmxlbmd0aCl7aWYobj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5pdGVtc1tpXSxbaV0sWyJpdGVtcyIsaV0scisiLyIraSkpcmV0dXJuIG59ZWxzZSBpZih2b2lkIDAhPT10LmFkZGl0aW9uYWxJdGVtcylpZigiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxJdGVtcyl7aWYoIXQuYWRkaXRpb25hbEl0ZW1zJiYobj10aGlzLmNyZWF0ZUVycm9yKGcuQVJSQVlfQURESVRJT05BTF9JVEVNUyx7fSwiLyIraSwiL2FkZGl0aW9uYWxJdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5hZGRpdGlvbmFsSXRlbXMsW2ldLFsiYWRkaXRpb25hbEl0ZW1zIl0scisiLyIraSkpcmV0dXJuIG59ZWxzZSBmb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKWlmKG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQuaXRlbXMsW2ldLFsiaXRlbXMiXSxyKyIvIitpKSlyZXR1cm4gbjtyZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3Q9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWV8fEFycmF5LmlzQXJyYXkoZSk/bnVsbDp0aGlzLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXMoZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdE1pbk1heFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcixuPU9iamVjdC5rZXlzKGUpO3JldHVybiB2b2lkIDAhPT10Lm1pblByb3BlcnRpZXMmJm4ubGVuZ3RoPHQubWluUHJvcGVydGllcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihnLk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU0se3Byb3BlcnR5Q291bnQ6bi5sZW5ndGgsbWluaW11bTp0Lm1pblByb3BlcnRpZXN9LCIiLCIvbWluUHJvcGVydGllcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhQcm9wZXJ0aWVzJiZuLmxlbmd0aD50Lm1heFByb3BlcnRpZXMmJihyPXRoaXMuY3JlYXRlRXJyb3IoZy5PQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNLHtwcm9wZXJ0eUNvdW50Om4ubGVuZ3RoLG1heGltdW06dC5tYXhQcm9wZXJ0aWVzfSwiIiwiL21heFByb3BlcnRpZXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0UmVxdWlyZWRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dC5yZXF1aXJlZClmb3IodmFyIHI9MDtyPHQucmVxdWlyZWQubGVuZ3RoO3IrKyl7dmFyIG49dC5yZXF1aXJlZFtyXTtpZih2b2lkIDA9PT1lW25dKXt2YXIgaT10aGlzLmNyZWF0ZUVycm9yKGcuT0JKRUNUX1JFUVVJUkVELHtrZXk6bn0sIiIsIi9yZXF1aXJlZC8iK3IsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IoaSkpcmV0dXJuIGl9fXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2Zvcih2YXIgaSBpbiBlKXt2YXIgbz1yKyIvIitpLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLGE9ITE7aWYodm9pZCAwIT09dC5wcm9wZXJ0aWVzJiZ2b2lkIDAhPT10LnByb3BlcnRpZXNbaV0mJihhPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQucHJvcGVydGllc1tpXSxbaV0sWyJwcm9wZXJ0aWVzIixpXSxvKSkpcmV0dXJuIG47aWYodm9pZCAwIT09dC5wYXR0ZXJuUHJvcGVydGllcylmb3IodmFyIHMgaW4gdC5wYXR0ZXJuUHJvcGVydGllcyl7dmFyIHU9bmV3IFJlZ0V4cChzKTtpZih1LnRlc3QoaSkmJihhPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQucGF0dGVyblByb3BlcnRpZXNbc10sW2ldLFsicGF0dGVyblByb3BlcnRpZXMiLHNdLG8pKSlyZXR1cm4gbn1pZihhKXRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW29dPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW29dKTtlbHNlIGlmKHZvaWQgMCE9PXQuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW29dPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW29dKSwiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzKXtpZighdC5hZGRpdGlvbmFsUHJvcGVydGllcyYmKG49dGhpcy5jcmVhdGVFcnJvcihnLk9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVMse2tleTppfSwiIiwiL2FkZGl0aW9uYWxQcm9wZXJ0aWVzIixudWxsLGUsdCkucHJlZml4V2l0aChpLG51bGwpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5hZGRpdGlvbmFsUHJvcGVydGllcyxbaV0sWyJhZGRpdGlvbmFsUHJvcGVydGllcyJdLG8pKXJldHVybiBufWVsc2UgdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYhdGhpcy5rbm93blByb3BlcnR5UGF0aHNbb10mJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW29dPSEwKX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2lmKHZvaWQgMCE9PXQuZGVwZW5kZW5jaWVzKWZvcih2YXIgaSBpbiB0LmRlcGVuZGVuY2llcylpZih2b2lkIDAhPT1lW2ldKXt2YXIgbz10LmRlcGVuZGVuY2llc1tpXTtpZigic3RyaW5nIj09dHlwZW9mIG8pe2lmKHZvaWQgMD09PWVbb10mJihuPXRoaXMuY3JlYXRlRXJyb3IoZy5PQkpFQ1RfREVQRU5ERU5DWV9LRVkse2tleTppLG1pc3Npbmc6b30sIiIsIiIsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxpKS5wcmVmaXhXaXRoKG51bGwsImRlcGVuZGVuY2llcyIpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYoQXJyYXkuaXNBcnJheShvKSlmb3IodmFyIGE9MDthPG8ubGVuZ3RoO2ErKyl7dmFyIHM9b1thXTtpZih2b2lkIDA9PT1lW3NdJiYobj10aGlzLmNyZWF0ZUVycm9yKGcuT0JKRUNUX0RFUEVOREVOQ1lfS0VZLHtrZXk6aSxtaXNzaW5nOnN9LCIiLCIvIithLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsaSkucHJlZml4V2l0aChudWxsLCJkZXBlbmRlbmNpZXMiKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlLG8sW10sWyJkZXBlbmRlbmNpZXMiLGldLHIpKXJldHVybiBufXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUNvbWJpbmF0aW9ucz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVBbGxPZihlLHQscil8fHRoaXMudmFsaWRhdGVBbnlPZihlLHQscil8fHRoaXMudmFsaWRhdGVPbmVPZihlLHQscil8fHRoaXMudmFsaWRhdGVOb3QoZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFsbE9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10LmFsbE9mKXJldHVybiBudWxsO2Zvcih2YXIgbixpPTA7aTx0LmFsbE9mLmxlbmd0aDtpKyspe3ZhciBvPXQuYWxsT2ZbaV07aWYobj10aGlzLnZhbGlkYXRlQWxsKGUsbyxbXSxbImFsbE9mIixpXSxyKSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVBbnlPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5hbnlPZilyZXR1cm4gbnVsbDt2YXIgbixpLG89W10sYT10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLGk9dGhpcy5rbm93blByb3BlcnR5UGF0aHMpO2Zvcih2YXIgcz0hMCx1PTA7dTx0LmFueU9mLmxlbmd0aDt1Kyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPXQuYW55T2ZbdV0sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsYyxbXSxbImFueU9mIix1XSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYodGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxhKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpe2Zvcih2YXIgcCBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocylpW3BdPSEwLGRlbGV0ZSBuW3BdO2Zvcih2YXIgaCBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKWlbaF18fChuW2hdPSEwKTtzPSExO2NvbnRpbnVlfXJldHVybiBudWxsfWYmJm8ucHVzaChmLnByZWZpeFdpdGgobnVsbCwiIit1KS5wcmVmaXhXaXRoKG51bGwsImFueU9mIikpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9aSkscz8obz1vLmNvbmNhdCh0aGlzLmVycm9ycy5zbGljZShhKSksdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxhKSx0aGlzLmNyZWF0ZUVycm9yKGcuQU5ZX09GX01JU1NJTkcse30sIiIsIi9hbnlPZiIsbyxlLHQpKTp2b2lkIDB9LGQucHJvdG90eXBlLnZhbGlkYXRlT25lT2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQub25lT2YpcmV0dXJuIG51bGw7dmFyIG4saSxvPW51bGwsYT1bXSxzPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsaT10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciB1PTA7dTx0Lm9uZU9mLmxlbmd0aDt1Kyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPXQub25lT2ZbdV0sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsYyxbXSxbIm9uZU9mIix1XSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYobnVsbCE9PW8pcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAscyksdGhpcy5jcmVhdGVFcnJvcihnLk9ORV9PRl9NVUxUSVBMRSx7aW5kZXgxOm8saW5kZXgyOnV9LCIiLCIvb25lT2YiLG51bGwsZSx0KTtpZihvPXUsdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIHAgaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpaVtwXT0hMCxkZWxldGUgbltwXTtmb3IodmFyIGggaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylpW2hdfHwobltoXT0hMCl9fWVsc2UgZiYmYS5wdXNoKGYpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9aSksbnVsbD09PW8/KGE9YS5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2UocykpLHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAscyksdGhpcy5jcmVhdGVFcnJvcihnLk9ORV9PRl9NSVNTSU5HLHt9LCIiLCIvb25lT2YiLGEsZSx0KSk6KHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAscyksbnVsbCl9LGQucHJvdG90eXBlLnZhbGlkYXRlTm90PWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lm5vdClyZXR1cm4gbnVsbDt2YXIgbixpLG89dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxpPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzLHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBhPXRoaXMudmFsaWRhdGVBbGwoZSx0Lm5vdCxudWxsLG51bGwscikscz10aGlzLmVycm9ycy5zbGljZShvKTtyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxvKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9aSksbnVsbD09PWEmJjA9PT1zLmxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKGcuTk9UX1BBU1NFRCx7fSwiIiwiL25vdCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlSHlwZXJtZWRpYT1mdW5jdGlvbihlLHQsbil7aWYoIXQubGlua3MpcmV0dXJuIG51bGw7Zm9yKHZhciBpLG89MDtvPHQubGlua3MubGVuZ3RoO28rKyl7dmFyIGE9dC5saW5rc1tvXTtpZigiZGVzY3JpYmVkYnkiPT09YS5yZWwpe2Zvcih2YXIgcz1uZXcgcihhLmhyZWYpLHU9ITAsYz0wO2M8cy52YXJOYW1lcy5sZW5ndGg7YysrKWlmKCEocy52YXJOYW1lc1tjXWluIGUpKXt1PSExO2JyZWFrfWlmKHUpe3ZhciBsPXMuZmlsbEZyb21PYmplY3QoZSksZj17JHJlZjpsfTtpZihpPXRoaXMudmFsaWRhdGVBbGwoZSxmLFtdLFsibGlua3MiLG9dLG4pKXJldHVybiBpfX19fTt2YXIgZz17SU5WQUxJRF9UWVBFOjAsRU5VTV9NSVNNQVRDSDoxLEFOWV9PRl9NSVNTSU5HOjEwLE9ORV9PRl9NSVNTSU5HOjExLE9ORV9PRl9NVUxUSVBMRToxMixOT1RfUEFTU0VEOjEzLE5VTUJFUl9NVUxUSVBMRV9PRjoxMDAsTlVNQkVSX01JTklNVU06MTAxLE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRToxMDIsTlVNQkVSX01BWElNVU06MTAzLE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRToxMDQsTlVNQkVSX05PVF9BX05VTUJFUjoxMDUsU1RSSU5HX0xFTkdUSF9TSE9SVDoyMDAsU1RSSU5HX0xFTkdUSF9MT05HOjIwMSxTVFJJTkdfUEFUVEVSTjoyMDIsT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTTozMDAsT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTozMDEsT0JKRUNUX1JFUVVJUkVEOjMwMixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOjMwMyxPQkpFQ1RfREVQRU5ERU5DWV9LRVk6MzA0LEFSUkFZX0xFTkdUSF9TSE9SVDo0MDAsQVJSQVlfTEVOR1RIX0xPTkc6NDAxLEFSUkFZX1VOSVFVRTo0MDIsQVJSQVlfQURESVRJT05BTF9JVEVNUzo0MDMsRk9STUFUX0NVU1RPTTo1MDAsS0VZV09SRF9DVVNUT006NTAxLENJUkNVTEFSX1JFRkVSRU5DRTo2MDAsVU5LTk9XTl9QUk9QRVJUWToxZTN9LHY9e307Zm9yKHZhciBiIGluIGcpdltnW2JdXT1iO3ZhciBfPXtJTlZBTElEX1RZUEU6IkludmFsaWQgdHlwZToge3R5cGV9IChleHBlY3RlZCB7ZXhwZWN0ZWR9KSIsRU5VTV9NSVNNQVRDSDoiTm8gZW51bSBtYXRjaCBmb3I6IHt2YWx1ZX0iLEFOWV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gImFueU9mIicsT05FX09GX01JU1NJTkc6J0RhdGEgZG9lcyBub3QgbWF0Y2ggYW55IHNjaGVtYXMgZnJvbSAib25lT2YiJyxPTkVfT0ZfTVVMVElQTEU6J0RhdGEgaXMgdmFsaWQgYWdhaW5zdCBtb3JlIHRoYW4gb25lIHNjaGVtYSBmcm9tICJvbmVPZiI6IGluZGljZXMge2luZGV4MX0gYW5kIHtpbmRleDJ9JyxOT1RfUEFTU0VEOidEYXRhIG1hdGNoZXMgc2NoZW1hIGZyb20gIm5vdCInLE5VTUJFUl9NVUxUSVBMRV9PRjoiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSBtdWx0aXBsZSBvZiB7bXVsdGlwbGVPZn0iLE5VTUJFUl9NSU5JTVVNOiJWYWx1ZSB7dmFsdWV9IGlzIGxlc3MgdGhhbiBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOiJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01BWElNVU06IlZhbHVlIHt2YWx1ZX0gaXMgZ3JlYXRlciB0aGFuIG1heGltdW0ge21heGltdW19IixOVU1CRVJfTUFYSU1VTV9FWENMVVNJVkU6IlZhbHVlIHt2YWx1ZX0gaXMgZXF1YWwgdG8gZXhjbHVzaXZlIG1heGltdW0ge21heGltdW19IixOVU1CRVJfTk9UX0FfTlVNQkVSOiJWYWx1ZSB7dmFsdWV9IGlzIG5vdCBhIHZhbGlkIG51bWJlciIsU1RSSU5HX0xFTkdUSF9TSE9SVDoiU3RyaW5nIGlzIHRvbyBzaG9ydCAoe2xlbmd0aH0gY2hhcnMpLCBtaW5pbXVtIHttaW5pbXVtfSIsU1RSSU5HX0xFTkdUSF9MT05HOiJTdHJpbmcgaXMgdG9vIGxvbmcgKHtsZW5ndGh9IGNoYXJzKSwgbWF4aW11bSB7bWF4aW11bX0iLFNUUklOR19QQVRURVJOOiJTdHJpbmcgZG9lcyBub3QgbWF0Y2ggcGF0dGVybjoge3BhdHRlcm59IixPQkpFQ1RfUFJPUEVSVElFU19NSU5JTVVNOiJUb28gZmV3IHByb3BlcnRpZXMgZGVmaW5lZCAoe3Byb3BlcnR5Q291bnR9KSwgbWluaW11bSB7bWluaW11bX0iLE9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU06IlRvbyBtYW55IHByb3BlcnRpZXMgZGVmaW5lZCAoe3Byb3BlcnR5Q291bnR9KSwgbWF4aW11bSB7bWF4aW11bX0iLE9CSkVDVF9SRVFVSVJFRDoiTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eToge2tleX0iLE9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVM6IkFkZGl0aW9uYWwgcHJvcGVydGllcyBub3QgYWxsb3dlZCIsT0JKRUNUX0RFUEVOREVOQ1lfS0VZOiJEZXBlbmRlbmN5IGZhaWxlZCAtIGtleSBtdXN0IGV4aXN0OiB7bWlzc2luZ30gKGR1ZSB0byBrZXk6IHtrZXl9KSIsQVJSQVlfTEVOR1RIX1NIT1JUOiJBcnJheSBpcyB0b28gc2hvcnQgKHtsZW5ndGh9KSwgbWluaW11bSB7bWluaW11bX0iLEFSUkFZX0xFTkdUSF9MT05HOiJBcnJheSBpcyB0b28gbG9uZyAoe2xlbmd0aH0pLCBtYXhpbXVtIHttYXhpbXVtfSIsQVJSQVlfVU5JUVVFOiJBcnJheSBpdGVtcyBhcmUgbm90IHVuaXF1ZSAoaW5kaWNlcyB7bWF0Y2gxfSBhbmQge21hdGNoMn0pIixBUlJBWV9BRERJVElPTkFMX0lURU1TOiJBZGRpdGlvbmFsIGl0ZW1zIG5vdCBhbGxvd2VkIixGT1JNQVRfQ1VTVE9NOiJGb3JtYXQgdmFsaWRhdGlvbiBmYWlsZWQgKHttZXNzYWdlfSkiLEtFWVdPUkRfQ1VTVE9NOiJLZXl3b3JkIGZhaWxlZDoge2tleX0gKHttZXNzYWdlfSkiLENJUkNVTEFSX1JFRkVSRU5DRToiQ2lyY3VsYXIgJHJlZnM6IHt1cmxzfSIsVU5LTk9XTl9QUk9QRVJUWToiVW5rbm93biBwcm9wZXJ0eSAobm90IGluIHNjaGVtYSkifTtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksYy5wcm90b3R5cGUuY29uc3RydWN0b3I9YyxjLnByb3RvdHlwZS5uYW1lPSJWYWxpZGF0aW9uRXJyb3IiLGMucHJvdG90eXBlLnByZWZpeFdpdGg9ZnVuY3Rpb24oZSx0KXtpZihudWxsIT09ZSYmKGU9ZS5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSx0aGlzLmRhdGFQYXRoPSIvIitlK3RoaXMuZGF0YVBhdGgpLG51bGwhPT10JiYodD10LnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLHRoaXMuc2NoZW1hUGF0aD0iLyIrdCt0aGlzLnNjaGVtYVBhdGgpLG51bGwhPT10aGlzLnN1YkVycm9ycylmb3IodmFyIHI9MDtyPHRoaXMuc3ViRXJyb3JzLmxlbmd0aDtyKyspdGhpcy5zdWJFcnJvcnNbcl0ucHJlZml4V2l0aChlLHQpO3JldHVybiB0aGlzfTt2YXIgTz17fSwkPWYoKTtyZXR1cm4gJC5hZGRMYW5ndWFnZSgiZW4tZ2IiLF8pLCQudHY0PSQsJH0pfSx7fV0sODg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9ZSgiLi9ydW50aW1lLWNhdGFsb2d1ZS9SdW50aW1lQ2F0YWxvZ3VlLUxvY2FsIiksbz1uKGkpO3JbImRlZmF1bHQiXT1vWyJkZWZhdWx0Il0sdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL3J1bnRpbWUtY2F0YWxvZ3VlL1J1bnRpbWVDYXRhbG9ndWUtTG9jYWwiOjk4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE0fV0sODk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixvLGEscyl7aSh0aGlzLGUpLHRoaXMuX2d1aWQ9dCx0aGlzLl90eXBlPXIsdGhpcy5fb2JqZWN0TmFtZT1uLHRoaXMuX2Rlc2NyaXB0aW9uPW8sdGhpcy5fbGFuZ3VhZ2U9YSx0aGlzLl9zb3VyY2VQYWNrYWdlVVJMPXMsdGhpcy5fc2lnbmF0dXJlPW51bGwsdGhpcy5fc291cmNlUGFja2FnZT1udWxsfXJldHVybiBuKGUsW3trZXk6Imd1aWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ndWlkfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2d1aWQ9ZSl9fSx7a2V5OiJ0eXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl90eXBlPWUpfX0se2tleToib2JqZWN0TmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29iamVjdE5hbWV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fb2JqZWN0TmFtZT1lKX19LHtrZXk6ImRlc2NyaXB0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRpb259LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fZGVzY3JpcHRpb249ZSl9fSx7a2V5OiJsYW5ndWFnZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhbmd1YWdlfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2xhbmd1YWdlPWUpfX0se2tleToic2lnbmF0dXJlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2lnbmF0dXJlfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NpZ25hdHVyZT1lKX19LHtrZXk6InNvdXJjZVBhY2thZ2UiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VQYWNrYWdlfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NvdXJjZVBhY2thZ2U9ZSl9fSx7a2V5OiJzb3VyY2VQYWNrYWdlVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlUGFja2FnZVVSTH0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zb3VyY2VQYWNrYWdlVVJMPWUpfX1dKSxlfSgpLGE9e0hZUEVSVFk6Imh5cGVydHkiLFBST1RPU1RVQjoicHJvdG9zdHViIixIWVBFUlRZX1JVTlRJTUU6Imh5cGVydHlfcnVudGltZSIsSFlQRVJUWV9JTlRFUkNFUFRPUjoiaHlwZXJ0eV9pbnNwZWN0b3IiLEhZUEVSVFlfREFUQV9PQkpFQ1Q6Imh5cGVydHlfZGF0YV9vYmplY3QiLFBPTElDWV9FTkZPUkNFUjoicG9saWN5X2VuZm9yY2VyIixEQVRBX1NDSEVNQToiZGF0YV9zY2hlbWEifTtyLkNhdGFsb2d1ZU9iamVjdFR5cGU9YTt2YXIgcz17SkFWQVNDUklQVF9FQ01BNjoiamF2YXNjcmlwdF9lY21hNiIsSkFWQVNDUklQVF9FQ01BNToiamF2YXNjcmlwdF9lY21hNSIsSlNPTl9TQ0hFTUFfVjQ6Impzb25fc2NoZW1hX3Y0IixQWVRIT046InB5dGhvbiIsVFlQRVNDUklQVDoidHlwZXNjcmlwdCJ9O3IuRGF0YU9iamVjdFNvdXJjZUxhbmd1YWdlPXMsclsiZGVmYXVsdCJdPW99LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEwfV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuLi9yZVRISU5LT2JqZWN0L1JldGhpbmtPYmplY3QiKSxjPXModSksbD1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxmPXMobCkscD1lKCIuL1NvdXJjZVBhY2thZ2UiKSxoPXMocCksZD1lKCIuL0h5cGVydHlEZXNjcmlwdG9yIikseT1zKGQpLG09ZSgiLi9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIiksZz1zKG0pLHY9ZSgiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiKSxiPXModiksXz1lKCIuL1BvbGljeUVuZm9yY2VyRGVzY3JpcHRvciIpLE89cyhfKSwkPWUoIi4vRGF0YU9iamVjdFNjaGVtYSIpLEU9cygkKSxQPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyKXthKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscil9cmV0dXJuIGkodCxlKSxvKHQsW3trZXk6ImNyZWF0ZUNhdGFsb2d1ZURhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSxvKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2YgaXx8InVuZGVmaW5lZCI9PXR5cGVvZiBvKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgZlsiZGVmYXVsdCJdKGUsdCxyLG4saSxvKX19LHtrZXk6ImNyZWF0ZUh5cGVydHlEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLGksbyxhKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2YgaXx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGEpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyB5WyJkZWZhdWx0Il0oZSxsLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWSx0LHIsbixpLG8sYSl9fSx7a2V5OiJjcmVhdGVQcm90b1N0dWJEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLGksbyxhLHMpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIG98fCJ1bmRlZmluZWQiPT10eXBlb2YgYXx8InVuZGVmaW5lZCI9PXR5cGVvZiBzKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgZ1siZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLlBST1RPU1RVQix0LHIsbixpLG8sYSxzKX19LHtrZXk6ImNyZWF0ZUh5cGVydHlSdW50aW1lRGVzY3JpcHRvck9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSxzKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2YgaXx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGF8fCJ1bmRlZmluZWQiPT10eXBlb2Ygcyl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IGJbImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5IWVBFUlRZX1JVTlRJTUUsdCxyLG4saSxvLGEscyl9fSx7a2V5OiJjcmVhdGVQb2xpY3lFbmZvcmNlckRlc2NyaXB0b3JPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSxvLGEpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIG98fCJ1bmRlZmluZWQiPT10eXBlb2YgYSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IE9bImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5QT0xJQ1lfRU5GT1JDRVIsdCxyLG4saSxvLGEpfX0se2tleToiY3JlYXRlRGF0YU9iamVjdFNjaGVtYSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2YgaSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IEVbImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5EQVRBX1NDSEVNQSx0LHIsbixpKX19LHtrZXk6ImNyZWF0ZVNvdXJjZVBhY2thZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBoWyJkZWZhdWx0Il0oZSx0KX19XSksdH0oY1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09UCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdCI6OTcsIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCI6ODksIi4vRGF0YU9iamVjdFNjaGVtYSI6OTEsIi4vSHlwZXJ0eURlc2NyaXB0b3IiOjkyLCIuL0h5cGVydHlSdW50aW1lRGVzY3JpcHRvciI6OTMsIi4vUG9saWN5RW5mb3JjZXJEZXNjcmlwdG9yIjo5NCwiLi9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIjo5NSwiLi9Tb3VyY2VQYWNrYWdlIjo5NiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEwLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxNH1dLDkxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLHU9YShzKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksYSxzLHUpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLHUpfXJldHVybiBpKHQsZSksdH0odVsiZGVmYXVsdCJdKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksYSxzLHUpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLHUpfXJldHVybiBpKHQsZSksdH0oYyk7ci5NZXNzYWdlRGF0YU9iamVjdFNjaGVtYT1sO3ZhciBmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksYSxzLHUsYyl7byh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxhLHMsdSksdGhpcy5fYWNjZXNzQ29udHJvbFBvbGljeT1jfXJldHVybiBpKHQsZSksdH0oYyk7ci5IeXBlcnR5RGF0YU9iamVjdFNjaGVtYT1mO3ZhciBwPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksYSxzLHUsYyl7byh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxhLHMsdSxjKX1yZXR1cm4gaSh0LGUpLHR9KGYpO3IuQ29tbXVuaWNhdGlvbkRhdGFPYmplY3RTY2hlbWE9cDt2YXIgaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLGEscyx1LGMpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLHUsYyl9cmV0dXJuIGkodCxlKSx0fShmKTtyLkNvbm5lY3Rpb25EYXRhT2JqZWN0U2NoZW1hPWg7dmFyIGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxhLHMsdSxjKXtvKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixpLGEscyx1LGMpfXJldHVybiBpKHQsZSksdH0oZik7ci5JZGVudGlmeURhdGFPYmplY3RTY2hlbWE9ZDt2YXIgeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLGEscyx1LGMpe28odGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksYSxzLHUsYyl9cmV0dXJuIGkodCxlKSx0fShmKTtyLkNvbnRleHREYXRhT2JqZWN0U2NoZW1hPXksclsiZGVmYXVsdCJdPWN9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo4OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjEyLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE0fV0sOTI6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxjPXModSksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixpLG8scyx1LGMsbCl7CmEodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksbyxzLHUpLHRoaXMuX2NvbmZpZ3VyYXRpb249e30sdGhpcy5fY29uc3RyYWludHM9e30sdGhpcy5fcG9saWNpZXM9e30sdGhpcy5fbWVzc2FnZVNjaGVtYT1udWxsLHRoaXMuX2h5cGVydHlUeXBlPWMsdGhpcy5fZGF0YU9iamVjdHM9bH1yZXR1cm4gaSh0LGUpLG8odCxbe2tleToiaHlwZXJ0eVR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5VHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9oeXBlcnR5VHlwZT1lKX19LHtrZXk6ImRhdGFPYmplY3RzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YU9iamVjdHN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fZGF0YU9iamVjdHM9ZSl9fSx7a2V5OiJjb25maWd1cmF0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25maWd1cmF0aW9uPWUpfX0se2tleToiY29uc3RyYWludHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25zdHJhaW50c30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25zdHJhaW50cz1lKX19LHtrZXk6Im1lc3NhZ2VTY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlU2NoZW1hfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX21lc3NhZ2VTY2hlbWE9ZSl9fSx7a2V5OiJwb2xpY2llcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvbGljaWVzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3BvbGljaWVzPWUpfX1dKSx0fShjWyJkZWZhdWx0Il0pLGY9e307ci5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHlUeXBlPWY7dmFyIHA9e0NPTU1VTklDQVRPUjoiY29tbXVuaWNhdG9yIixJREVOVElUWToiaWRlbnRpdHkiLENPTlRFWFQ6ImNvbnRleHQifTtyLkh5cGVydHlUeXBlPXAsclsiZGVmYXVsdCJdPWx9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo4OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEwLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxNH1dLDkzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksYz1zKHUpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxvLHMsdSxjLGwsZil7YSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsaSxvLHMsdSksdGhpcy5fcnVudGltZVR5cGU9YyxsP3RoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9bDp0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzPXt9LGY/dGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9Zjp0aGlzLl9wcm90b2NvbENhcGFiaWxpdGllcz17fX1yZXR1cm4gaSh0LGUpLG8odCxbe2tleToicnVudGltZVR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ydW50aW1lVHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9ydW50aW1lVHlwZT1lKX19LHtrZXk6Imh5cGVydHlDYXBhYmlsaXRpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9ZSl9fSx7a2V5OiJwcm90b2NvbENhcGFiaWxpdGllcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9ZSl9fV0pLHR9KGNbImRlZmF1bHQiXSksZj17QlJPV1NFUjoiYnJvd3NlciIsU1RBTkRBTE9ORToic3RhbmRhbG9uZSIsU0VSVkVSOiJzZXJ2ZXIiLEdBVEVXQVk6ImdhdGV3YXkifTtyLlJ1bnRpbWVUeXBlPWY7dmFyIHA9e01JQzoibWljIixDQU1FUkE6ImNhbWVyYSIsU0VOU09SOiJzZW5zb3IiLFdFQlJUQzoid2VicnRjIixPUlRDOiJvcnRjIn07ci5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHlUeXBlPXA7dmFyIGg9e0hUVFA6Imh0dHAiLEhUVFBTOiJodHRwcyIsV1M6IndzIixXU1M6IndzcyIsQ09BUDoiY29hcCIsREFUQUNIQU5FTDoiZGF0YWNoYW5uZWwifTtyLlJ1bnRpbWVQcm90b2NvbENhcGFiaWxpdHlUeXBlPWgsclsiZGVmYXVsdCJdPWx9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo4OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEwLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxNH1dLDk0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksYz1zKHUpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsaSxvLHMsdSxjLGwpe2EodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksbyxzLHUpLHRoaXMuX2NvbmZpZ3VyYXRpb249Yyx0aGlzLl9wb2xpY2llcz1sfXJldHVybiBpKHQsZSksbyh0LFt7a2V5OiJjb25maWd1cmF0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2NvbmZpZ3VyYXRpb249ZX19LHtrZXk6InBvbGljaWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9saWNpZXN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9wb2xpY2llcz1lfX1dKSx0fShjWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1sLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo4OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEwLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxNH1dLDk1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksYz1zKHUpLGw9ZSgiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiKSxmPShzKGwpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLGksbyxzLHUsYyxsLGYpe2EodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLGksbyxzLHUpLHRoaXMuX21lc3NhZ2VTY2hlbWFzPWMsbD90aGlzLl9jb25maWd1cmF0aW9uPWw6dGhpcy5fY29uZmlndXJhdGlvbj17fSxmP3RoaXMuX2NvbnN0cmFpbnRzPWY6dGhpcy5fY29uc3RyYWludHM9e319cmV0dXJuIGkodCxlKSxvKHQsW3trZXk6Im1lc3NhZ2VTY2hlbWFzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZVNjaGVtYXN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fbWVzc2FnZVNjaGVtYXM9ZSl9fSx7a2V5OiJjb25zdHJhaW50cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnN0cmFpbnRzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2NvbnN0cmFpbnRzPWUpfX0se2tleToiY29uZmlndXJhdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb259LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uZmlndXJhdGlvbj1lKX19XSksdH0oY1siZGVmYXVsdCJdKSk7clsiZGVmYXVsdCJdPWYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjg5LCIuL0h5cGVydHlSdW50aW1lRGVzY3JpcHRvciI6OTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTIsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTR9XSw5NjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscil7aSh0aGlzLGUpLHRoaXMuX3NvdXJjZUNvZGU9cix0aGlzLl9zb3VyY2VDb2RlQ2xhc3NuYW1lPXQsdGhpcy5fZW5jb2Rpbmc9bnVsbCx0aGlzLl9zaWduYXR1cmU9bnVsbH1yZXR1cm4gbihlLFt7a2V5OiJzb3VyY2VDb2RlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlQ29kZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zb3VyY2VDb2RlPWUpfX0se2tleToic291cmNlQ29kZUNsYXNzbmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZUNvZGVDbGFzc25hbWV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlQ29kZUNsYXNzbmFtZT1lKX19LHtrZXk6ImVuY29kaW5nIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jb2Rpbmd9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fZW5jb2Rpbmc9ZSl9fSx7a2V5OiJzaWduYXR1cmUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaWduYXR1cmV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc2lnbmF0dXJlPWUpfX1dKSxlfSgpO3JbImRlZmF1bHQiXT1vLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEwfV0sOTc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgYT1lKCJ0djQiKSxzPW8oYSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXtpKHRoaXMsZSk7dGhpcy52YWxpZGF0aW9uPXQsdGhpcy5zY2hlbWE9cn1yZXR1cm4gbihlLFt7a2V5OiJ2YWxpZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2NoZW1hP3NbImRlZmF1bHQiXS52YWxpZGF0ZShlLHRoaXMuc2NoZW1hKTohMX19XSksZX0oKTtyLlJldGhpbmtPYmplY3Q9dSxyWyJkZWZhdWx0Il09dX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6OCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTAsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTQsdHY0Ojg3fV0sOTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcz1lKCIuLi91dGlscy91dGlscyIpLHU9ZSgiLi4vY2F0YWxvZ3VlLWZhY3RvcnkvQ2F0YWxvZ3VlRGF0YU9iamVjdEZhY3RvcnkiKSxjPWEodSksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7aWYoaSh0aGlzLGUpLCF0KXRocm93IEVycm9yKCJUaGUgY2F0YWxvZ3VlIG5lZWRzIHRoZSBydW50aW1lRmFjdG9yeSIpO3ZhciByPXRoaXM7ci5fZmFjdG9yeT1uZXcgY1siZGVmYXVsdCJdKCExLHZvaWQgMCksci5odHRwUmVxdWVzdD10LmNyZWF0ZUh0dHBSZXF1ZXN0KCl9cmV0dXJuIG4oZSxbe2tleToiZ2V0SHlwZXJ0eVJ1bnRpbWVVUkwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZS5faHlwZXJ0eVJ1bnRpbWVVUkx9fSx7a2V5OiJnZXRIeXBlcnR5RGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8oZnVuY3Rpb24ocixuKXt2YXIgaT0oMCxzLmRpdmlkZVVSTCkoZSksbz1pLnR5cGUsYT1pLmRvbWFpbix1PWkuaWRlbnRpdHk7YXx8KGE9ZSksdSYmKHU9dS5zdWJzdHJpbmcodS5sYXN0SW5kZXhPZigiLyIpKzEpKSx0Lmh0dHBSZXF1ZXN0LmdldChvKyI6Ly8iK2ErIi9yZXNvdXJjZXMvZGVzY3JpcHRvcnMvSHlwZXJ0aWVzLmpzb24iKS50aGVuKGZ1bmN0aW9uKGUpe3QuSHlwZXJ0aWVzPUpTT04ucGFyc2UoZSk7dmFyIGk9dC5IeXBlcnRpZXNbdV07aWYoaS5lcnJvciluKGkpO2Vsc2V7dmFyIG89dC5fZmFjdG9yeS5jcmVhdGVIeXBlcnR5RGVzY3JpcHRvck9iamVjdChpLmNndWlkLGkub2JqZWN0TmFtZSxpLmRlc2NyaXB0aW9uLGkubGFuZ3VhZ2UsaS5zb3VyY2VQYWNrYWdlVVJMLGkudHlwZSxpLmRhdGFPYmplY3RzKTtvLmNvbmZpZ3VyYXRpb249aS5jb25maWd1cmF0aW9uLG8uY29uc3RyYWludHM9aS5jb25zdHJhaW50cyxvLm1lc3NhZ2VTY2hlbWE9aS5tZXNzYWdlU2NoZW1hLG8ucG9saWNpZXM9aS5wb2xpY2llcyxvLnNpZ25hdHVyZT1pLnNpZ25hdHVyZTt2YXIgYT1pLnNvdXJjZVBhY2thZ2U7YSYmKG8uc291cmNlUGFja2FnZT10Ll9jcmVhdGVTb3VyY2VQYWNrYWdlKHQuX2ZhY3RvcnksYSkpLGNvbnNvbGUubG9nKCJoeXBlcnR5IGhhcyBzb3VyY2VQYWNrYWdlOiIsbykscihvKX19KX0pfX0se2tleToiZ2V0UnVudGltZURlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHIsbil7dmFyIGk9KDAscy5kaXZpZGVVUkwpKGUpLG89aS50eXBlLGE9aS5kb21haW4sdT1pLmlkZW50aXR5O3UmJih1PXUuc3Vic3RyaW5nKHUubGFzdEluZGV4T2YoIi8iKSsxKSksdC5odHRwUmVxdWVzdC5nZXQobysiOi8vIithKyIvcmVzb3VyY2VzL2Rlc2NyaXB0b3JzL1J1bnRpbWVzLmpzb24iKS50aGVuKGZ1bmN0aW9uKGUpe3QuUnVudGltZXM9SlNPTi5wYXJzZShlKTt2YXIgaT10LlJ1bnRpbWVzW3VdO2lmKGkuRVJST1IpbihpKTtlbHNle3RyeXtpLmh5cGVydHlDYXBhYmlsaXRpZXM9SlNPTi5wYXJzZShpLmh5cGVydHlDYXBhYmlsaXRpZXMpLGkucHJvdG9jb2xDYXBhYmlsaXRpZXM9SlNPTi5wYXJzZShpLnByb3RvY29sQ2FwYWJpbGl0aWVzKX1jYXRjaChvKXt9Y29uc29sZS5sb2coImNyZWF0aW5nIHJ1bnRpbWUgZGVzY3JpcHRvciBiYXNlZCBvbjogIixpKTt2YXIgYT10Ll9mYWN0b3J5LmNyZWF0ZUh5cGVydHlSdW50aW1lRGVzY3JpcHRvck9iamVjdChpLmNndWlkLGkub2JqZWN0TmFtZSxpLmRlc2NyaXB0aW9uLGkubGFuZ3VhZ2UsaS5zb3VyY2VQYWNrYWdlVVJMLGkudHlwZXx8aS5ydW50aW1lVHlwZSxpLmh5cGVydHlDYXBhYmlsaXRpZXMsaS5wcm90b2NvbENhcGFiaWxpdGllcyk7Y29uc29sZS5sb2coImNyZWF0ZWQgcnVudGltZSBkZXNjcmlwdG9yIG9iamVjdDoiLGEpO3ZhciBzPWkuc291cmNlUGFja2FnZTtzJiYoYS5zb3VyY2VQYWNrYWdlPXQuX2NyZWF0ZVNvdXJjZVBhY2thZ2UodC5fZmFjdG9yeSxzKSkscihhKX19KX0pfX0se2tleToiZ2V0U291cmNlUGFja2FnZUZyb21VUkwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHIsbil7Ii9zb3VyY2VQYWNrYWdlIj09PWUmJm4oInNvdXJjZVBhY2thZ2UgaXMgYWxyZWFkeSBjb250YWluZWQgaW4gZGVzY3JpcHRvciwgcGxlYXNlIHVzZSBpdCBkaXJlY3RseSIpLHQuaHR0cFJlcXVlc3QuZ2V0KGUpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZS5lcnJvciluKGUpO2Vsc2V7ZT1KU09OLnBhcnNlKGUpO3ZhciBpPWUuc291cmNlUGFja2FnZTtpPyhpPXQuX2NyZWF0ZVNvdXJjZVBhY2thZ2UodC5fZmFjdG9yeSxpKSxyKGkpKTpuKCJubyBzb3VyY2UgcGFja2FnZSIpfX0pWyJjYXRjaCJdKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleToiZ2V0U3R1YkRlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvKGZ1bmN0aW9uKHIsbil7dmFyIGk9KDAscy5kaXZpZGVVUkwpKGUpLG89cy5kaXZpZGVVUkwudHlwZSxhPWkuZG9tYWluLHU9aS5pZGVudGl0eTthfHwoYT1lKSx1PXU/dS5zdWJzdHJpbmcodS5sYXN0SW5kZXhPZigiLyIpKzEpOiJkZWZhdWx0Iix0Lmh0dHBSZXF1ZXN0LmdldChvKyI6Ly8iK2ErIi9yZXNvdXJjZXMvZGVzY3JpcHRvcnMvUHJvdG9TdHVicy5qc29uIikudGhlbihmdW5jdGlvbihlKXt0LlByb3RvU3R1YnM9SlNPTi5wYXJzZShlKTt2YXIgaT10LlByb3RvU3R1YnNbdV07aWYoaS5lcnJvciluKGkpO2Vsc2V7Y29uc29sZS5sb2coImNyZWF0aW5nIHN0dWIgZGVzY3JpcHRvciBiYXNlZCBvbjogIixpKTt2YXIgbz10Ll9mYWN0b3J5LmNyZWF0ZVByb3RvU3R1YkRlc2NyaXB0b3JPYmplY3QoaS5jZ3VpZCxpLm9iamVjdE5hbWUsaS5kZXNjcmlwdGlvbixpLmxhbmd1YWdlLGkuc291cmNlUGFja2FnZVVSTCxpLm1lc3NhZ2VTY2hlbWFzLEpTT04uc3RyaW5naWZ5KGkuY29uZmlndXJhdGlvbiksaS5jb25zdHJhaW50cyksYT1pLnNvdXJjZVBhY2thZ2U7YSYmKGE9dC5fY3JlYXRlU291cmNlUGFja2FnZSh0Ll9mYWN0b3J5LGEpLG8uc291cmNlUGFja2FnZT1hKSxyKG8pfX0pfSl9fSx7a2V5OiJnZXREYXRhU2NoZW1hRGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8oZnVuY3Rpb24ocixuKXt2YXIgaT0oMCxzLmRpdmlkZVVSTCkoZSksbz1zLmRpdmlkZVVSTC50eXBlLGE9aS5kb21haW4sdT1pLmlkZW50aXR5O3UmJih1PXUuc3Vic3RyaW5nKHUubGFzdEluZGV4T2YoIi8iKSsxKSksdC5odHRwUmVxdWVzdC5nZXQobysiOi8vIithKyIvcmVzb3VyY2VzL2Rlc2NyaXB0b3JzL0RhdGFTY2hlbWFzLmpzb24iKS50aGVuKGZ1bmN0aW9uKGUpe3QuRGF0YVNjaGVtYXM9SlNPTi5wYXJzZShlKTt2YXIgaT10LkRhdGFTY2hlbWFzW3VdO2lmKGkuRVJST1IpbihpKTtlbHNle2NvbnNvbGUubG9nKCJjcmVhdGluZyBkYXRhU2NoZW1hIGJhc2VkIG9uOiAiLGkpO3ZhciBvPXQuX2ZhY3RvcnkuY3JlYXRlRGF0YU9iamVjdFNjaGVtYShpLmNndWlkLGkub2JqZWN0TmFtZSxpLmRlc2NyaXB0aW9uLGkubGFuZ3VhZ2UsaS5zb3VyY2VQYWNrYWdlVVJMKTtjb25zb2xlLmxvZygiY3JlYXRlZCBkYXRhU2NoZW1hIGRlc2NyaXB0b3Igb2JqZWN0OiIsbyk7dmFyIGE9aS5zb3VyY2VQYWNrYWdlO2EmJihvLnNvdXJjZVBhY2thZ2U9dC5fY3JlYXRlU291cmNlUGFja2FnZSh0Ll9mYWN0b3J5LGEpLCJzdHJpbmciPT10eXBlb2Ygby5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUmJihvLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZT1KU09OLnBhcnNlKG8uc291cmNlUGFja2FnZS5zb3VyY2VDb2RlKSkpLHIobyl9fSl9KX19LHtrZXk6Il9jcmVhdGVTb3VyY2VQYWNrYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RyeXt0PUpTT04ucGFyc2UodCl9Y2F0Y2gocil7Y29uc29sZS5sb2coInBhcnNpbmcgc291cmNlUGFja2FnZSBmYWlsZWQuIGFscmVhZHkgcGFyc2VkPyAtPiAiLHQpfSJiYXNlNjQiPT09dC5lbmNvZGluZyYmKHQuc291cmNlQ29kZT1hdG9iKHQuc291cmNlQ29kZSksdC5lbmNvZGluZz0iVVRGLTgiKTt2YXIgbj1lLmNyZWF0ZVNvdXJjZVBhY2thZ2UodC5zb3VyY2VDb2RlQ2xhc3NuYW1lLHQuc291cmNlQ29kZSk7cmV0dXJuIHQuaGFzT3duUHJvcGVydHkoImVuY29kaW5nIikmJihuLmVuY29kaW5nPXQuZW5jb2RpbmcpLHQuaGFzT3duUHJvcGVydHkoInNpZ25hdHVyZSIpJiYobi5zaWduYXR1cmU9dC5zaWduYXR1cmUpLG59fSx7a2V5OiJydW50aW1lVVJMIixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9ydW50aW1lVVJMPWV9LGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGUuX3J1bnRpbWVVUkx9fV0pLGV9KCk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi9jYXRhbG9ndWUtZmFjdG9yeS9DYXRhbG9ndWVEYXRhT2JqZWN0RmFjdG9yeSI6OTAsIi4uL3V0aWxzL3V0aWxzIjo5OSwiYmFiZWwtcnVudGltZS9jb3JlLWpzL3Byb21pc2UiOjYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjo4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxNH1dLDk5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBpPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIGl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTp2b2lkIDB9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuZGl2aWRlVVJMPW4sci5kZWVwQ2xvbmU9aX0se31dfSx7fSxbODhdKSg4OCl9KTsKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDE2MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoZ2xvYmFsKXsKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovLyBEaXN0cmlidXRpb24gZmlsZSBmb3Igc2VydmljZS1mcmFtZXdvcmsuanMgCi8vIHZlcnNpb246IDAuMS4wCgohZnVuY3Rpb24oZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuc2VydmljZUZyYW1ld29yaz1lKCl9fShmdW5jdGlvbigpe3ZhciBlO3JldHVybiBmdW5jdGlvbiB0KGUscixuKXtmdW5jdGlvbiBvKHMsYSl7aWYoIXJbc10pe2lmKCFlW3NdKXt2YXIgdT0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighYSYmdSlyZXR1cm4gdShzLCEwKTtpZihpKXJldHVybiBpKHMsITApO3ZhciBjPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK3MrIiciKTt0aHJvdyBjLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGN9dmFyIGw9cltzXT17ZXhwb3J0czp7fX07ZVtzXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgcj1lW3NdWzFdW3RdO3JldHVybiBvKHI/cjp0KX0sbCxsLmV4cG9ydHMsdCxlLHIsbil9cmV0dXJuIHJbc10uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUscz0wO3M8bi5sZW5ndGg7cysrKW8obltzXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9jcmVhdGUiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2NyZWF0ZSI6MjB9XSwyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHkiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eSI6MjF9XSwzOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9mcmVlemUiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2ZyZWV6ZSI6MjJ9XSw0OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6MjN9XSw1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9nZXQtcHJvdG90eXBlLW9mIjoyNH1dLDY6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2tleXMiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2tleXMiOjI1fV0sNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz17ImRlZmF1bHQiOmUoImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9vYmplY3Qvc2V0LXByb3RvdHlwZS1vZiI6MjZ9XSw4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3Byb21pc2UiKSxfX2VzTW9kdWxlOiEwfX0seyJjb3JlLWpzL2xpYnJhcnkvZm4vcHJvbWlzZSI6Mjd9XSw5OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPXsiZGVmYXVsdCI6ZSgiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbCIpLF9fZXNNb2R1bGU6ITB9fSx7ImNvcmUtanMvbGlicmFyeS9mbi9zeW1ib2wiOjI4fV0sMTA6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9eyJkZWZhdWx0IjplKCJjb3JlLWpzL2xpYnJhcnkvZm4vc3ltYm9sL2l0ZXJhdG9yIiksX19lc01vZHVsZTohMH19LHsiY29yZS1qcy9saWJyYXJ5L2ZuL3N5bWJvbC9pdGVyYXRvciI6Mjl9XSwxMTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuL2NsYXNzQ2FsbENoZWNrLmpzIil9LHsiLi9jbGFzc0NhbGxDaGVjay5qcyI6MTJ9XSwxMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyLl9fZXNNb2R1bGU9ITAsclsiZGVmYXVsdCJdPWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi9jcmVhdGVDbGFzcy5qcyIpfSx7Ii4vY3JlYXRlQ2xhc3MuanMiOjE0fV0sMTQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IiksaT1uKG8pO3JbImRlZmF1bHQiXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLGlbImRlZmF1bHQiXSkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LHsiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5IjoyfV0sMTU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX1yLl9fZXNNb2R1bGU9ITA7dmFyIG89ZSgiLi4vY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiIpLGk9bihvKSxzPWUoIi4uL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLGE9bihzKTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24gdShlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAsYVsiZGVmYXVsdCJdKShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBvPSgwLGlbImRlZmF1bHQiXSkoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp1KG8sdCxyKX1pZigidmFsdWUiaW4gbilyZXR1cm4gbi52YWx1ZTt2YXIgcz1uLmdldDtpZih2b2lkIDAhPT1zKXJldHVybiBzLmNhbGwocil9fSx7Ii4uL2NvcmUtanMvb2JqZWN0L2dldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6NCwiLi4vY29yZS1qcy9vYmplY3QvZ2V0LXByb3RvdHlwZS1vZiI6NX1dLDE2OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOnsiZGVmYXVsdCI6ZX19ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWUoIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiKSxpPW4obykscz1lKCIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiKSxhPW4ocyksdT1lKCIuLi9oZWxwZXJzL3R5cGVvZiIpLGM9bih1KTtyWyJkZWZhdWx0Il09ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiKygidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6KDAsY1siZGVmYXVsdCJdKSh0KSkpO2UucHJvdG90eXBlPSgwLGFbImRlZmF1bHQiXSkodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihpWyJkZWZhdWx0Il0/KDAsaVsiZGVmYXVsdCJdKShlLHQpOmUuX19wcm90b19fPXQpfX0seyIuLi9jb3JlLWpzL29iamVjdC9jcmVhdGUiOjEsIi4uL2NvcmUtanMvb2JqZWN0L3NldC1wcm90b3R5cGUtb2YiOjcsIi4uL2hlbHBlcnMvdHlwZW9mIjoxOX1dLDE3OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWUoIi4vaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIil9LHsiLi9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiOjE4fV0sMTg6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwLHJbImRlZmF1bHQiXT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX19LHt9XSwxOTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ImRlZmF1bHQiOmV9fWZ1bmN0aW9uIG8oZSl7cmV0dXJuIGUmJiJ1bmRlZmluZWQiIT10eXBlb2YgX1N5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PV9TeW1ib2w/InN5bWJvbCI6dHlwZW9mIGV9ci5fX2VzTW9kdWxlPSEwO3ZhciBpPWUoIi4uL2NvcmUtanMvc3ltYm9sIikscz1uKGkpO3JbImRlZmF1bHQiXT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBzWyJkZWZhdWx0Il0mJmUuY29uc3RydWN0b3I9PT1zWyJkZWZhdWx0Il0/InN5bWJvbCI6InVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOm8oZSl9fSx7Ii4uL2NvcmUtanMvc3ltYm9sIjo5fV0sMjA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLi8uLi9tb2R1bGVzLyQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy8kIjo2MH1dLDIxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5zZXREZXNjKGUsdCxyKX19LHsiLi4vLi4vbW9kdWxlcy8kIjo2MH1dLDIyOltmdW5jdGlvbihlLHQscil7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmZyZWV6ZSIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5mcmVlemV9LHsiLi4vLi4vbW9kdWxlcy8kLmNvcmUiOjM1LCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QuZnJlZXplIjo4NX1dLDIzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi4vLi4vbW9kdWxlcy8kIik7ZSgiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpLHQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmdldERlc2MoZSx0KX19LHsiLi4vLi4vbW9kdWxlcy8kIjo2MCwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI6ODZ9XSwyNDpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuT2JqZWN0LmdldFByb3RvdHlwZU9mfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozNSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmdldC1wcm90b3R5cGUtb2YiOjg3fV0sMjU6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5rZXlzfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozNSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LmtleXMiOjg4fV0sMjY6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3Quc2V0LXByb3RvdHlwZS1vZiIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQuY29yZSIpLk9iamVjdC5zZXRQcm90b3R5cGVPZn0seyIuLi8uLi9tb2R1bGVzLyQuY29yZSI6MzUsIi4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5zZXQtcHJvdG90eXBlLW9mIjo4OX1dLDI3OltmdW5jdGlvbihlLHQscil7ZSgiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyIpLGUoIi4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLGUoIi4uL21vZHVsZXMvZXM2LnByb21pc2UiKSx0LmV4cG9ydHM9ZSgiLi4vbW9kdWxlcy8kLmNvcmUiKS5Qcm9taXNlfSx7Ii4uL21vZHVsZXMvJC5jb3JlIjozNSwiLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6OTAsIi4uL21vZHVsZXMvZXM2LnByb21pc2UiOjkxLCIuLi9tb2R1bGVzL2VzNi5zdHJpbmcuaXRlcmF0b3IiOjkyLCIuLi9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOjk0fV0sMjg6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuLi8uLi9tb2R1bGVzL2VzNi5zeW1ib2wiKSxlKCIuLi8uLi9tb2R1bGVzL2VzNi5vYmplY3QudG8tc3RyaW5nIiksdC5leHBvcnRzPWUoIi4uLy4uL21vZHVsZXMvJC5jb3JlIikuU3ltYm9sfSx7Ii4uLy4uL21vZHVsZXMvJC5jb3JlIjozNSwiLi4vLi4vbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI6OTAsIi4uLy4uL21vZHVsZXMvZXM2LnN5bWJvbCI6OTN9XSwyOTpbZnVuY3Rpb24oZSx0LHIpe2UoIi4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciIpLGUoIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpLHQuZXhwb3J0cz1lKCIuLi8uLi9tb2R1bGVzLyQud2tzIikoIml0ZXJhdG9yIil9LHsiLi4vLi4vbW9kdWxlcy8kLndrcyI6ODIsIi4uLy4uL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI6OTIsIi4uLy4uL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI6OTR9XSwzMDpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBlfX0se31dLDMxOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKCl7fX0se31dLDMyOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmlzLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGV9fSx7Ii4vJC5pcy1vYmplY3QiOjUzfV0sMzM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIiksbz1lKCIuLyQud2tzIikoInRvU3RyaW5nVGFnIiksaT0iQXJndW1lbnRzIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLHM7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj0odD1PYmplY3QoZSkpW29dKT9yOmk/bih0KToiT2JqZWN0Ij09KHM9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjpzfX0seyIuLyQuY29mIjozNCwiLi8kLndrcyI6ODJ9XSwzNDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKGUpLnNsaWNlKDgsLTEpfX0se31dLDM1OltmdW5jdGlvbihlLHQscil7dmFyIG49dC5leHBvcnRzPXt2ZXJzaW9uOiIxLjIuNiJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPW4pfSx7fV0sMzY6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuYS1mdW5jdGlvbiIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0seyIuLyQuYS1mdW5jdGlvbiI6MzB9XSwzNzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PWUpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIitlKTtyZXR1cm4gZX19LHt9XSwzODpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz0hZSgiLi8kLmZhaWxzIikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSx7Ii4vJC5mYWlscyI6NDJ9XSwzOTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKSxvPWUoIi4vJC5nbG9iYWwiKS5kb2N1bWVudCxpPW4obykmJm4oby5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGk/by5jcmVhdGVFbGVtZW50KGUpOnt9fX0seyIuLyQuZ2xvYmFsIjo0NSwiLi8kLmlzLW9iamVjdCI6NTN9XSw0MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uLmdldEtleXMoZSkscj1uLmdldFN5bWJvbHM7aWYocilmb3IodmFyIG8saT1yKGUpLHM9bi5pc0VudW0sYT0wO2kubGVuZ3RoPmE7KXMuY2FsbChlLG89aVthKytdKSYmdC5wdXNoKG8pO3JldHVybiB0fX0seyIuLyQiOjYwfV0sNDE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZ2xvYmFsIiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmN0eCIpLHM9InByb3RvdHlwZSIsYT1mdW5jdGlvbihlLHQscil7dmFyIHUsYyxsLGY9ZSZhLkYsaD1lJmEuRyxwPWUmYS5TLGQ9ZSZhLlAseT1lJmEuQixiPWUmYS5XLHY9aD9vOm9bdF18fChvW3RdPXt9KSxtPWg/bjpwP25bdF06KG5bdF18fHt9KVtzXTtoJiYocj10KTtmb3IodSBpbiByKWM9IWYmJm0mJnUgaW4gbSxjJiZ1IGluIHZ8fChsPWM/bVt1XTpyW3VdLHZbdV09aCYmImZ1bmN0aW9uIiE9dHlwZW9mIG1bdV0/clt1XTp5JiZjP2kobCxuKTpiJiZtW3VdPT1sP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT9uZXcgZSh0KTplKHQpfTtyZXR1cm4gdFtzXT1lW3NdLHR9KGwpOmQmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP2koRnVuY3Rpb24uY2FsbCxsKTpsLGQmJigodltzXXx8KHZbc109e30pKVt1XT1sKSl9O2EuRj0xLGEuRz0yLGEuUz00LGEuUD04LGEuQj0xNixhLlc9MzIsdC5leHBvcnRzPWF9LHsiLi8kLmNvcmUiOjM1LCIuLyQuY3R4IjozNiwiLi8kLmdsb2JhbCI6NDV9XSw0MjpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2godCl7cmV0dXJuITB9fX0se31dLDQzOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmN0eCIpLG89ZSgiLi8kLml0ZXItY2FsbCIpLGk9ZSgiLi8kLmlzLWFycmF5LWl0ZXIiKSxzPWUoIi4vJC5hbi1vYmplY3QiKSxhPWUoIi4vJC50by1sZW5ndGgiKSx1PWUoIi4vY29yZS5nZXQtaXRlcmF0b3ItbWV0aG9kIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGMpe3ZhciBsLGYsaCxwPXUoZSksZD1uKHIsYyx0PzI6MSkseT0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBwKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpO2lmKGkocCkpZm9yKGw9YShlLmxlbmd0aCk7bD55O3krKyl0P2QocyhmPWVbeV0pWzBdLGZbMV0pOmQoZVt5XSk7ZWxzZSBmb3IoaD1wLmNhbGwoZSk7IShmPWgubmV4dCgpKS5kb25lOylvKGgsZCxmLnZhbHVlLHQpfX0seyIuLyQuYW4tb2JqZWN0IjozMiwiLi8kLmN0eCI6MzYsIi4vJC5pcy1hcnJheS1pdGVyIjo1MSwiLi8kLml0ZXItY2FsbCI6NTQsIi4vJC50by1sZW5ndGgiOjc5LCIuL2NvcmUuZ2V0LWl0ZXJhdG9yLW1ldGhvZCI6ODN9XSw0NDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pb2JqZWN0Iiksbz1lKCIuLyQiKS5nZXROYW1lcyxpPXt9LnRvU3RyaW5nLHM9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10sYT1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIG8oZSl9Y2F0Y2godCl7cmV0dXJuIHMuc2xpY2UoKX19O3QuZXhwb3J0cy5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHMmJiJbb2JqZWN0IFdpbmRvd10iPT1pLmNhbGwoZSk/YShlKTpvKG4oZSkpfX0seyIuLyQiOjYwLCIuLyQudG8taW9iamVjdCI6Nzh9XSw0NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0se31dLDQ2OltmdW5jdGlvbihlLHQscil7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQpfX0se31dLDQ3OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQucHJvcGVydHktZGVzYyIpO3QuZXhwb3J0cz1lKCIuLyQuZGVzY3JpcHRvcnMiKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uc2V0RGVzYyhlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LHsiLi8kIjo2MCwiLi8kLmRlc2NyaXB0b3JzIjozOCwiLi8kLnByb3BlcnR5LWRlc2MiOjY1fV0sNDg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZSgiLi8kLmdsb2JhbCIpLmRvY3VtZW50JiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9LHsiLi8kLmdsb2JhbCI6NDV9XSw0OTpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSx7fV0sNTA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSx7Ii4vJC5jb2YiOjM0fV0sNTE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuaXRlcmF0b3JzIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fGlbb109PT1lKX19LHsiLi8kLml0ZXJhdG9ycyI6NTksIi4vJC53a3MiOjgyfV0sNTI6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuY29mIik7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSx7Ii4vJC5jb2YiOjM0fV0sNTM6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0se31dLDU0OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2goaSl7dmFyIHM9ZVsicmV0dXJuIl07dGhyb3cgdm9pZCAwIT09cyYmbihzLmNhbGwoZSkpLGl9fX0seyIuLyQuYW4tb2JqZWN0IjozMn1dLDU1OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLnByb3BlcnR5LWRlc2MiKSxpPWUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpLHM9e307ZSgiLi8kLmhpZGUiKShzLGUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uLmNyZWF0ZShzLHtuZXh0Om8oMSxyKX0pLGkoZSx0KyIgSXRlcmF0b3IiKX19LHsiLi8kIjo2MCwiLi8kLmhpZGUiOjQ3LCIuLyQucHJvcGVydHktZGVzYyI6NjUsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NzEsIi4vJC53a3MiOjgyfV0sNTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmxpYnJhcnkiKSxvPWUoIi4vJC5leHBvcnQiKSxpPWUoIi4vJC5yZWRlZmluZSIpLHM9ZSgiLi8kLmhpZGUiKSxhPWUoIi4vJC5oYXMiKSx1PWUoIi4vJC5pdGVyYXRvcnMiKSxjPWUoIi4vJC5pdGVyLWNyZWF0ZSIpLGw9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksZj1lKCIuLyQiKS5nZXRQcm90byxoPWUoIi4vJC53a3MiKSgiaXRlcmF0b3IiKSxwPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLGQ9IkBAaXRlcmF0b3IiLHk9ImtleXMiLGI9InZhbHVlcyIsdj1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbSxnLF8sTyl7YyhyLHQsbSk7dmFyIGosRSx3PWZ1bmN0aW9uKGUpe2lmKCFwJiZlIGluIFIpcmV0dXJuIFJbZV07c3dpdGNoKGUpe2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX07Y2FzZSBiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LGs9dCsiIEl0ZXJhdG9yIiwkPWc9PWIsUD0hMSxSPWUucHJvdG90eXBlLFM9UltoXXx8UltkXXx8ZyYmUltnXSxNPVN8fHcoZyk7aWYoUyl7dmFyIFQ9ZihNLmNhbGwobmV3IGUpKTtsKFQsaywhMCksIW4mJmEoUixkKSYmcyhULGgsdiksJCYmUy5uYW1lIT09YiYmKFA9ITAsTT1mdW5jdGlvbigpe3JldHVybiBTLmNhbGwodGhpcyl9KX1pZihuJiYhT3x8IXAmJiFQJiZSW2hdfHxzKFIsaCxNKSx1W3RdPU0sdVtrXT12LGcpaWYoaj17dmFsdWVzOiQ/TTp3KGIpLGtleXM6Xz9NOncoeSksZW50cmllczokP3coImVudHJpZXMiKTpNfSxPKWZvcihFIGluIGopRSBpbiBSfHxpKFIsRSxqW0VdKTtlbHNlIG8oby5QK28uRioocHx8UCksdCxqKTtyZXR1cm4gan19LHsiLi8kIjo2MCwiLi8kLmV4cG9ydCI6NDEsIi4vJC5oYXMiOjQ2LCIuLyQuaGlkZSI6NDcsIi4vJC5pdGVyLWNyZWF0ZSI6NTUsIi4vJC5pdGVyYXRvcnMiOjU5LCIuLyQubGlicmFyeSI6NjIsIi4vJC5yZWRlZmluZSI6NjcsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NzEsIi4vJC53a3MiOjgyfV0sNTc6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aVsicmV0dXJuIl09ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2gocyl7fXQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3I9ITB9LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChhKXt9cmV0dXJuIHJ9fSx7Ii4vJC53a3MiOjgyfV0sNTg6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSx7fV0sNTk6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9e319LHt9XSw2MDpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU9iamVjdDt0LmV4cG9ydHM9e2NyZWF0ZTpuLmNyZWF0ZSxnZXRQcm90bzpuLmdldFByb3RvdHlwZU9mLGlzRW51bTp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxnZXREZXNjOm4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLHNldERlc2M6bi5kZWZpbmVQcm9wZXJ0eSxzZXREZXNjczpuLmRlZmluZVByb3BlcnRpZXMsZ2V0S2V5czpuLmtleXMsZ2V0TmFtZXM6bi5nZXRPd25Qcm9wZXJ0eU5hbWVzLGdldFN5bWJvbHM6bi5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZWFjaDpbXS5mb3JFYWNofX0se31dLDYxOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIiksbz1lKCIuLyQudG8taW9iamVjdCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixpPW8oZSkscz1uLmdldEtleXMoaSksYT1zLmxlbmd0aCx1PTA7YT51OylpZihpW3I9c1t1KytdXT09PXQpcmV0dXJuIHJ9fSx7Ii4vJCI6NjAsIi4vJC50by1pb2JqZWN0Ijo3OH1dLDYyOltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPSEwfSx7fV0sNjM6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1lKCIuLyQuZ2xvYmFsIiksYT1lKCIuLyQudGFzayIpLnNldCx1PXMuTXV0YXRpb25PYnNlcnZlcnx8cy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGM9cy5wcm9jZXNzLGw9cy5Qcm9taXNlLGY9InByb2Nlc3MiPT1lKCIuLyQuY29mIikoYyksaD1mdW5jdGlvbigpe3ZhciBlLHQscjtmb3IoZiYmKGU9Yy5kb21haW4pJiYoYy5kb21haW49bnVsbCxlLmV4aXQoKSk7bjspdD1uLmRvbWFpbixyPW4uZm4sdCYmdC5lbnRlcigpLHIoKSx0JiZ0LmV4aXQoKSxuPW4ubmV4dDtvPXZvaWQgMCxlJiZlLmVudGVyKCl9O2lmKGYpaT1mdW5jdGlvbigpe2MubmV4dFRpY2soaCl9O2Vsc2UgaWYodSl7dmFyIHA9MSxkPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgdShoKS5vYnNlcnZlKGQse2NoYXJhY3RlckRhdGE6ITB9KSxpPWZ1bmN0aW9uKCl7ZC5kYXRhPXA9LXB9fWVsc2UgaT1sJiZsLnJlc29sdmU/ZnVuY3Rpb24oKXtsLnJlc29sdmUoKS50aGVuKGgpfTpmdW5jdGlvbigpe2EuY2FsbChzLGgpfTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9e2ZuOmUsbmV4dDp2b2lkIDAsZG9tYWluOmYmJmMuZG9tYWlufTtvJiYoby5uZXh0PXQpLG58fChuPXQsaSgpKSxvPXR9fSx7Ii4vJC5jb2YiOjM0LCIuLyQuZ2xvYmFsIjo0NSwiLi8kLnRhc2siOjc2fV0sNjQ6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZXhwb3J0Iiksbz1lKCIuLyQuY29yZSIpLGk9ZSgiLi8kLmZhaWxzIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxzPXt9O3NbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSwiT2JqZWN0IixzKX19LHsiLi8kLmNvcmUiOjM1LCIuLyQuZXhwb3J0Ijo0MSwiLi8kLmZhaWxzIjo0Mn1dLDY1OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0se31dLDY2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnJlZGVmaW5lIik7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpbihlLHIsdFtyXSk7cmV0dXJuIGV9fSx7Ii4vJC5yZWRlZmluZSI6Njd9XSw2NzpbZnVuY3Rpb24oZSx0LHIpe3QuZXhwb3J0cz1lKCIuLyQuaGlkZSIpfSx7Ii4vJC5oaWRlIjo0N31dLDY4OltmdW5jdGlvbihlLHQscil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09PTEvdDplIT1lJiZ0IT10fX0se31dLDY5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kIikuZ2V0RGVzYyxvPWUoIi4vJC5pcy1vYmplY3QiKSxpPWUoIi4vJC5hbi1vYmplY3QiKSxzPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbyh0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9P2Z1bmN0aW9uKHQscixvKXt0cnl7bz1lKCIuLyQuY3R4IikoRnVuY3Rpb24uY2FsbCxuKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxvKHQsW10pLHI9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGkpe3I9ITB9cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHMoZSx0KSxyP2UuX19wcm90b19fPXQ6byhlLHQpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpzfX0seyIuLyQiOjYwLCIuLyQuYW4tb2JqZWN0IjozMiwiLi8kLmN0eCI6MzYsIi4vJC5pcy1vYmplY3QiOjUzfV0sNzA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmNvcmUiKSxvPWUoIi4vJCIpLGk9ZSgiLi8kLmRlc2NyaXB0b3JzIikscz1lKCIuLyQud2tzIikoInNwZWNpZXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTtpJiZ0JiYhdFtzXSYmby5zZXREZXNjKHQscyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0seyIuLyQiOjYwLCIuLyQuY29yZSI6MzUsIi4vJC5kZXNjcmlwdG9ycyI6MzgsIi4vJC53a3MiOjgyfV0sNzE6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQiKS5zZXREZXNjLG89ZSgiLi8kLmhhcyIpLGk9ZSgiLi8kLndrcyIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIW8oZT1yP2U6ZS5wcm90b3R5cGUsaSkmJm4oZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0seyIuLyQiOjYwLCIuLyQuaGFzIjo0NiwiLi8kLndrcyI6ODJ9XSw3MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5nbG9iYWwiKSxvPSJfX2NvcmUtanNfc2hhcmVkX18iLGk9bltvXXx8KG5bb109e30pO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0seyIuLyQuZ2xvYmFsIjo0NX1dLDczOltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmFuLW9iamVjdCIpLG89ZSgiLi8kLmEtZnVuY3Rpb24iKSxpPWUoIi4vJC53a3MiKSgic3BlY2llcyIpO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSx7Ii4vJC5hLWZ1bmN0aW9uIjozMCwiLi8kLmFuLW9iamVjdCI6MzIsIi4vJC53a3MiOjgyfV0sNzQ6W2Z1bmN0aW9uKGUsdCxyKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IFR5cGVFcnJvcihyKyI6IHVzZSB0aGUgJ25ldycgb3BlcmF0b3IhIik7cmV0dXJuIGV9fSx7fV0sNzU6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQudG8taW50ZWdlciIpLG89ZSgiLi8kLmRlZmluZWQiKTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGkscyxhPVN0cmluZyhvKHQpKSx1PW4ociksYz1hLmxlbmd0aDtyZXR1cm4gMD51fHx1Pj1jP2U/IiI6dm9pZCAwOihpPWEuY2hhckNvZGVBdCh1KSw1NTI5Nj5pfHxpPjU2MzE5fHx1KzE9PT1jfHwocz1hLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fHM+NTczNDM/ZT9hLmNoYXJBdCh1KTppOmU/YS5zbGljZSh1LHUrMik6KGktNTUyOTY8PDEwKSsocy01NjMyMCkrNjU1MzYpfX19LHsiLi8kLmRlZmluZWQiOjM3LCIuLyQudG8taW50ZWdlciI6Nzd9XSw3NjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPWUoIi4vJC5jdHgiKSxhPWUoIi4vJC5pbnZva2UiKSx1PWUoIi4vJC5odG1sIiksYz1lKCIuLyQuZG9tLWNyZWF0ZSIpLGw9ZSgiLi8kLmdsb2JhbCIpLGY9bC5wcm9jZXNzLGg9bC5zZXRJbW1lZGlhdGUscD1sLmNsZWFySW1tZWRpYXRlLGQ9bC5NZXNzYWdlQ2hhbm5lbCx5PTAsYj17fSx2PSJvbnJlYWR5c3RhdGVjaGFuZ2UiLG09ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZihiLmhhc093blByb3BlcnR5KGUpKXt2YXIgdD1iW2VdO2RlbGV0ZSBiW2VdLHQoKX19LGc9ZnVuY3Rpb24oZSl7bS5jYWxsKGUuZGF0YSl9O2gmJnB8fChoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBiWysreV09ZnVuY3Rpb24oKXthKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4oeSkseX0scD1mdW5jdGlvbihlKXtkZWxldGUgYltlXX0sInByb2Nlc3MiPT1lKCIuLyQuY29mIikoZik/bj1mdW5jdGlvbihlKXtmLm5leHRUaWNrKHMobSxlLDEpKX06ZD8obz1uZXcgZCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9ZyxuPXMoaS5wb3N0TWVzc2FnZSxpLDEpKTpsLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWwuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtsLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sbC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixnLCExKSk6bj12IGluIGMoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYygic2NyaXB0IikpW3ZdPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxtLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMobSxlLDEpLDApfSksdC5leHBvcnRzPXtzZXQ6aCxjbGVhcjpwfX0seyIuLyQuY29mIjozNCwiLi8kLmN0eCI6MzYsIi4vJC5kb20tY3JlYXRlIjozOSwiLi8kLmdsb2JhbCI6NDUsIi4vJC5odG1sIjo0OCwiLi8kLmludm9rZSI6NDl9XSw3NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU1hdGguY2VpbCxvPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bzpuKShlKX19LHt9XSw3ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pb2JqZWN0Iiksbz1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LHsiLi8kLmRlZmluZWQiOjM3LCIuLyQuaW9iamVjdCI6NTB9XSw3OTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1pbnRlZ2VyIiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LHsiLi8kLnRvLWludGVnZXIiOjc3fV0sODA6W2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1lKCIuLyQuZGVmaW5lZCIpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0seyIuLyQuZGVmaW5lZCI6Mzd9XSw4MTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPTAsbz1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PWU/IiI6ZSwiKV8iLCgrK24rbykudG9TdHJpbmcoMzYpKX19LHt9XSw4MjpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5zaGFyZWQiKSgid2tzIiksbz1lKCIuLyQudWlkIiksaT1lKCIuLyQuZ2xvYmFsIikuU3ltYm9sO3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aSYmaVtlXXx8KGl8fG8pKCJTeW1ib2wuIitlKSl9fSx7Ii4vJC5nbG9iYWwiOjQ1LCIuLyQuc2hhcmVkIjo3MiwiLi8kLnVpZCI6ODF9XSw4MzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5jbGFzc29mIiksbz1lKCIuLyQud2tzIikoIml0ZXJhdG9yIiksaT1lKCIuLyQuaXRlcmF0b3JzIik7dC5leHBvcnRzPWUoIi4vJC5jb3JlIikuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZT9lW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV06dm9pZCAwfX0seyIuLyQuY2xhc3NvZiI6MzMsIi4vJC5jb3JlIjozNSwiLi8kLml0ZXJhdG9ycyI6NTksIi4vJC53a3MiOjgyfV0sODQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiLi8kLmFkZC10by11bnNjb3BhYmxlcyIpLG89ZSgiLi8kLml0ZXItc3RlcCIpLGk9ZSgiLi8kLml0ZXJhdG9ycyIpLHM9ZSgiLi8kLnRvLWlvYmplY3QiKTt0LmV4cG9ydHM9ZSgiLi8kLml0ZXItZGVmaW5lIikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLGkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0seyIuLyQuYWRkLXRvLXVuc2NvcGFibGVzIjozMSwiLi8kLml0ZXItZGVmaW5lIjo1NiwiLi8kLml0ZXItc3RlcCI6NTgsIi4vJC5pdGVyYXRvcnMiOjU5LCIuLyQudG8taW9iamVjdCI6Nzh9XSw4NTpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC5pcy1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJmcmVlemUiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSYmbih0KT9lKHQpOnR9fSl9LHsiLi8kLmlzLW9iamVjdCI6NTMsIi4vJC5vYmplY3Qtc2FwIjo2NH1dLDg2OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLnRvLWlvYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3JldHVybiBlKG4odCkscil9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjY0LCIuLyQudG8taW9iamVjdCI6Nzh9XSw4NzpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKG4odCkpfX0pfSx7Ii4vJC5vYmplY3Qtc2FwIjo2NCwiLi8kLnRvLW9iamVjdCI6ODB9XSw4ODpbZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUoIi4vJC50by1vYmplY3QiKTtlKCIuLyQub2JqZWN0LXNhcCIpKCJrZXlzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUobih0KSl9fSl9LHsiLi8kLm9iamVjdC1zYXAiOjY0LCIuLyQudG8tb2JqZWN0Ijo4MH1dLDg5OltmdW5jdGlvbihlLHQscil7dmFyIG49ZSgiLi8kLmV4cG9ydCIpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjplKCIuLyQuc2V0LXByb3RvIikuc2V0fSl9LHsiLi8kLmV4cG9ydCI6NDEsIi4vJC5zZXQtcHJvdG8iOjY5fV0sOTA6W2Z1bmN0aW9uKGUsdCxyKXt9LHt9XSw5MTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPWUoIi4vJCIpLGk9ZSgiLi8kLmxpYnJhcnkiKSxzPWUoIi4vJC5nbG9iYWwiKSxhPWUoIi4vJC5jdHgiKSx1PWUoIi4vJC5jbGFzc29mIiksYz1lKCIuLyQuZXhwb3J0IiksbD1lKCIuLyQuaXMtb2JqZWN0IiksZj1lKCIuLyQuYW4tb2JqZWN0IiksaD1lKCIuLyQuYS1mdW5jdGlvbiIpLHA9ZSgiLi8kLnN0cmljdC1uZXciKSxkPWUoIi4vJC5mb3Itb2YiKSx5PWUoIi4vJC5zZXQtcHJvdG8iKS5zZXQsYj1lKCIuLyQuc2FtZS12YWx1ZSIpLHY9ZSgiLi8kLndrcyIpKCJzcGVjaWVzIiksbT1lKCIuLyQuc3BlY2llcy1jb25zdHJ1Y3RvciIpLGc9ZSgiLi8kLm1pY3JvdGFzayIpLF89IlByb21pc2UiLE89cy5wcm9jZXNzLGo9InByb2Nlc3MiPT11KE8pLEU9c1tfXSx3PWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBFKGZ1bmN0aW9uKCl7fSk7cmV0dXJuIGUmJih0LmNvbnN0cnVjdG9yPU9iamVjdCksRS5yZXNvbHZlKHQpPT09dH0saz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIHI9bmV3IEUoZSk7cmV0dXJuIHkocix0LnByb3RvdHlwZSkscn12YXIgcj0hMTt0cnl7aWYocj1FJiZFLnJlc29sdmUmJncoKSx5KHQsRSksdC5wcm90b3R5cGU9by5jcmVhdGUoRS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0fX0pLHQucmVzb2x2ZSg1KS50aGVuKGZ1bmN0aW9uKCl7fSlpbnN0YW5jZW9mIHR8fChyPSExKSxyJiZlKCIuLyQuZGVzY3JpcHRvcnMiKSl7dmFyIG49ITE7RS5yZXNvbHZlKG8uc2V0RGVzYyh7fSwidGhlbiIse2dldDpmdW5jdGlvbigpe249ITB9fSkpLHI9bn19Y2F0Y2goaSl7cj0hMX1yZXR1cm4gcn0oKSwkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkmJmU9PT1FJiZ0PT09bj8hMDpiKGUsdCl9LFA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZihlKVt2XTtyZXR1cm4gdm9pZCAwIT10P3Q6ZX0sUj1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbChlKSYmImZ1bmN0aW9uIj09dHlwZW9mKHQ9ZS50aGVuKT90OiExfSxTPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1oKHQpLHRoaXMucmVqZWN0PWgocil9LE09ZnVuY3Rpb24oZSl7dHJ5e2UoKX1jYXRjaCh0KXtyZXR1cm57ZXJyb3I6dH19fSxUPWZ1bmN0aW9uKGUsdCl7aWYoIWUubil7ZS5uPSEwO3ZhciByPWUuYztnKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUudixvPTE9PWUucyxpPTAsYT1mdW5jdGlvbih0KXt2YXIgcixpLHM9bz90Lm9rOnQuZmFpbCxhPXQucmVzb2x2ZSx1PXQucmVqZWN0O3RyeXtzPyhvfHwoZS5oPSEwKSxyPXM9PT0hMD9uOnMobikscj09PXQucHJvbWlzZT91KFR5cGVFcnJvcigiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1SKHIpKT9pLmNhbGwocixhLHUpOmEocikpOnUobil9Y2F0Y2goYyl7dShjKX19O3IubGVuZ3RoPmk7KWEocltpKytdKTtyLmxlbmd0aD0wLGUubj0hMSx0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQscixvPWUucDt4KG8pJiYoaj9PLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbixvKToodD1zLm9udW5oYW5kbGVkcmVqZWN0aW9uKT90KHtwcm9taXNlOm8scmVhc29uOm59KToocj1zLmNvbnNvbGUpJiZyLmVycm9yJiZyLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG4pKSxlLmE9dm9pZCAwfSwxKX0pfX0seD1mdW5jdGlvbihlKXt2YXIgdCxyPWUuX2Qsbj1yLmF8fHIuYyxvPTA7aWYoci5oKXJldHVybiExO2Zvcig7bi5sZW5ndGg+bzspaWYodD1uW28rK10sdC5mYWlsfHwheCh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxBPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5kfHwodC5kPSEwLHQ9dC5yfHx0LHQudj1lLHQucz0yLHQuYT10LmMuc2xpY2UoKSxUKHQsITApKX0sTj1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuZCl7ci5kPSEwLHI9ci5yfHxyO3RyeXtpZihyLnA9PT1lKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1SKGUpKT9nKGZ1bmN0aW9uKCl7dmFyIG49e3I6cixkOiExfTt0cnl7dC5jYWxsKGUsYShOLG4sMSksYShBLG4sMSkpfWNhdGNoKG8pe0EuY2FsbChuLG8pfX0pOihyLnY9ZSxyLnM9MSxUKHIsITEpKX1jYXRjaChuKXtBLmNhbGwoe3I6cixkOiExfSxuKX19fTtrfHwoRT1mdW5jdGlvbihlKXtoKGUpO3ZhciB0PXRoaXMuX2Q9e3A6cCh0aGlzLEUsXyksYzpbXSxhOnZvaWQgMCxzOjAsZDohMSx2OnZvaWQgMCxoOiExLG46ITF9O3RyeXtlKGEoTix0LDEpLGEoQSx0LDEpKX1jYXRjaChyKXtBLmNhbGwodCxyKX19LGUoIi4vJC5yZWRlZmluZS1hbGwiKShFLnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPW5ldyBTKG0odGhpcyxFKSksbj1yLnByb21pc2Usbz10aGlzLl9kO3JldHVybiByLm9rPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ITAsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LG8uYy5wdXNoKHIpLG8uYSYmby5hLnB1c2gociksby5zJiZUKG8sITEpLG59LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSkpLGMoYy5HK2MuVytjLkYqIWsse1Byb21pc2U6RX0pLGUoIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyIpKEUsXyksZSgiLi8kLnNldC1zcGVjaWVzIikoXyksbj1lKCIuLyQuY29yZSIpW19dLGMoYy5TK2MuRiohayxfLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFModGhpcykscj10LnJlamVjdDtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksYyhjLlMrYy5GKigha3x8dyghMCkpLF8se3Jlc29sdmU6ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIEUmJiQoZS5jb25zdHJ1Y3Rvcix0aGlzKSlyZXR1cm4gZTt2YXIgdD1uZXcgUyh0aGlzKSxyPXQucmVzb2x2ZTtyZXR1cm4gcihlKSx0LnByb21pc2V9fSksYyhjLlMrYy5GKiEoayYmZSgiLi8kLml0ZXItZGV0ZWN0IikoZnVuY3Rpb24oZSl7RS5hbGwoZSlbImNhdGNoIl0oZnVuY3Rpb24oKXt9KX0pKSxfLHthbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9UCh0aGlzKSxyPW5ldyBTKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qscz1bXSxhPU0oZnVuY3Rpb24oKXtkKGUsITEscy5wdXNoLHMpO3ZhciByPXMubGVuZ3RoLGE9QXJyYXkocik7cj9vLmVhY2guY2FsbChzLGZ1bmN0aW9uKGUsbyl7dmFyIHM9ITE7dC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7c3x8KHM9ITAsYVtvXT1lLC0tcnx8bihhKSl9LGkpfSk6bihhKX0pO3JldHVybiBhJiZpKGEuZXJyb3IpLHIucHJvbWlzZX0scmFjZTpmdW5jdGlvbihlKXt2YXIgdD1QKHRoaXMpLHI9bmV3IFModCksbj1yLnJlamVjdCxvPU0oZnVuY3Rpb24oKXtkKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gbyYmbihvLmVycm9yKSxyLnByb21pc2V9fSl9LHsiLi8kIjo2MCwiLi8kLmEtZnVuY3Rpb24iOjMwLCIuLyQuYW4tb2JqZWN0IjozMiwiLi8kLmNsYXNzb2YiOjMzLCIuLyQuY29yZSI6MzUsIi4vJC5jdHgiOjM2LCIuLyQuZGVzY3JpcHRvcnMiOjM4LCIuLyQuZXhwb3J0Ijo0MSwiLi8kLmZvci1vZiI6NDMsIi4vJC5nbG9iYWwiOjQ1LCIuLyQuaXMtb2JqZWN0Ijo1MywiLi8kLml0ZXItZGV0ZWN0Ijo1NywiLi8kLmxpYnJhcnkiOjYyLCIuLyQubWljcm90YXNrIjo2MywiLi8kLnJlZGVmaW5lLWFsbCI6NjYsIi4vJC5zYW1lLXZhbHVlIjo2OCwiLi8kLnNldC1wcm90byI6NjksIi4vJC5zZXQtc3BlY2llcyI6NzAsIi4vJC5zZXQtdG8tc3RyaW5nLXRhZyI6NzEsIi4vJC5zcGVjaWVzLWNvbnN0cnVjdG9yIjo3MywiLi8kLnN0cmljdC1uZXciOjc0LCIuLyQud2tzIjo4Mn1dLDkyOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJC5zdHJpbmctYXQiKSghMCk7ZSgiLi8kLml0ZXItZGVmaW5lIikoU3RyaW5nLCJTdHJpbmciLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0seyIuLyQuaXRlci1kZWZpbmUiOjU2LCIuLyQuc3RyaW5nLWF0Ijo3NX1dLDkzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoIi4vJCIpLG89ZSgiLi8kLmdsb2JhbCIpLGk9ZSgiLi8kLmhhcyIpLHM9ZSgiLi8kLmRlc2NyaXB0b3JzIiksYT1lKCIuLyQuZXhwb3J0IiksdT1lKCIuLyQucmVkZWZpbmUiKSxjPWUoIi4vJC5mYWlscyIpLGw9ZSgiLi8kLnNoYXJlZCIpLGY9ZSgiLi8kLnNldC10by1zdHJpbmctdGFnIiksaD1lKCIuLyQudWlkIikscD1lKCIuLyQud2tzIiksZD1lKCIuLyQua2V5b2YiKSx5PWUoIi4vJC5nZXQtbmFtZXMiKSxiPWUoIi4vJC5lbnVtLWtleXMiKSx2PWUoIi4vJC5pcy1hcnJheSIpLG09ZSgiLi8kLmFuLW9iamVjdCIpLGc9ZSgiLi8kLnRvLWlvYmplY3QiKSxfPWUoIi4vJC5wcm9wZXJ0eS1kZXNjIiksTz1uLmdldERlc2Msaj1uLnNldERlc2MsRT1uLmNyZWF0ZSx3PXkuZ2V0LGs9by5TeW1ib2wsJD1vLkpTT04sUD0kJiYkLnN0cmluZ2lmeSxSPSExLFM9cCgiX2hpZGRlbiIpLE09bi5pc0VudW0sVD1sKCJzeW1ib2wtcmVnaXN0cnkiKSx4PWwoInN5bWJvbHMiKSxBPSJmdW5jdGlvbiI9PXR5cGVvZiBrLE49T2JqZWN0LnByb3RvdHlwZSxDPXMmJmMoZnVuY3Rpb24oKXtyZXR1cm4gNyE9RShqKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGoodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU8oTix0KTtuJiZkZWxldGUgTlt0XSxqKGUsdCxyKSxuJiZlIT09TiYmaihOLHQsbil9OmosST1mdW5jdGlvbihlKXt2YXIgdD14W2VdPUUoay5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUscyYmUiYmQyhOLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZnVuY3Rpb24odCl7aSh0aGlzLFMpJiZpKHRoaXNbU10sZSkmJih0aGlzW1NdW2VdPSExKSxDKHRoaXMsZSxfKDEsdCkpfX0pLHR9LEQ9ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfSxVPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gciYmaSh4LHQpPyhyLmVudW1lcmFibGU/KGkoZSxTKSYmZVtTXVt0XSYmKGVbU11bdF09ITEpLHI9RShyLHtlbnVtZXJhYmxlOl8oMCwhMSl9KSk6KGkoZSxTKXx8aihlLFMsXygxLHt9KSksZVtTXVt0XT0hMCksQyhlLHQscikpOmooZSx0LHIpfSxMPWZ1bmN0aW9uKGUsdCl7bShlKTtmb3IodmFyIHIsbj1iKHQ9Zyh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylVKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LEY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9FKGUpOkwoRShlKSx0KX0sQj1mdW5jdGlvbihlKXt2YXIgdD1NLmNhbGwodGhpcyxlKTtyZXR1cm4gdHx8IWkodGhpcyxlKXx8IWkoeCxlKXx8aSh0aGlzLFMpJiZ0aGlzW1NdW2VdP3Q6ITB9LEg9ZnVuY3Rpb24oZSx0KXt2YXIgcj1PKGU9ZyhlKSx0KTtyZXR1cm4hcnx8IWkoeCx0KXx8aShlLFMpJiZlW1NdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfSxxPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXcoZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaSh4LHQ9cltvKytdKXx8dD09U3x8bi5wdXNoKHQpO3JldHVybiBufSxZPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXcoZyhlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaSh4LHQ9cltvKytdKSYmbi5wdXNoKHhbdF0pO3JldHVybiBufSxHPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFEKGUpKXtmb3IodmFyIHQscixuPVtlXSxvPTEsaT1hcmd1bWVudHM7aS5sZW5ndGg+bzspbi5wdXNoKGlbbysrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksKHJ8fCF2KHQpKSYmKHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksRCh0KT92b2lkIDA6dH0pLG5bMV09dCxQLmFwcGx5KCQsbil9fSxLPWMoZnVuY3Rpb24oKXt2YXIgZT1rKCk7cmV0dXJuIltudWxsXSIhPVAoW2VdKXx8Int9IiE9UCh7YTplfSl8fCJ7fSIhPVAoT2JqZWN0KGUpKX0pO0F8fChrPWZ1bmN0aW9uKCl7aWYoRCh0aGlzKSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3JldHVybiBJKGgoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApKX0sdShrLnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxEPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Yga30sbi5jcmVhdGU9RixuLmlzRW51bT1CLG4uZ2V0RGVzYz1ILG4uc2V0RGVzYz1VLG4uc2V0RGVzY3M9TCxuLmdldE5hbWVzPXkuZ2V0PXEsbi5nZXRTeW1ib2xzPVkscyYmIWUoIi4vJC5saWJyYXJ5IikmJnUoTiwicHJvcGVydHlJc0VudW1lcmFibGUiLEIsITApKTt2YXIgVj17ImZvciI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoVCxlKz0iIik/VFtlXTpUW2VdPWsoZSl9LGtleUZvcjpmdW5jdGlvbihlKXtyZXR1cm4gZChULGUpfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtSPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtSPSExfX07bi5lYWNoLmNhbGwoImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGZ1bmN0aW9uKGUpe3ZhciB0PXAoZSk7VltlXT1BP3Q6SSh0KX0pLFI9ITAsYShhLkcrYS5XLHtTeW1ib2w6a30pLGEoYS5TLCJTeW1ib2wiLFYpLGEoYS5TK2EuRiohQSwiT2JqZWN0Iix7Y3JlYXRlOkYsZGVmaW5lUHJvcGVydHk6VSxkZWZpbmVQcm9wZXJ0aWVzOkwsZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOkgsZ2V0T3duUHJvcGVydHlOYW1lczpxLGdldE93blByb3BlcnR5U3ltYm9sczpZfSksJCYmYShhLlMrYS5GKighQXx8SyksIkpTT04iLHtzdHJpbmdpZnk6R30pLGYoaywiU3ltYm9sIiksZihNYXRoLCJNYXRoIiwhMCksZihvLkpTT04sIkpTT04iLCEwKX0seyIuLyQiOjYwLCIuLyQuYW4tb2JqZWN0IjozMiwiLi8kLmRlc2NyaXB0b3JzIjozOCwiLi8kLmVudW0ta2V5cyI6NDAsIi4vJC5leHBvcnQiOjQxLCIuLyQuZmFpbHMiOjQyLCIuLyQuZ2V0LW5hbWVzIjo0NCwiLi8kLmdsb2JhbCI6NDUsIi4vJC5oYXMiOjQ2LCIuLyQuaXMtYXJyYXkiOjUyLCIuLyQua2V5b2YiOjYxLCIuLyQubGlicmFyeSI6NjIsIi4vJC5wcm9wZXJ0eS1kZXNjIjo2NSwiLi8kLnJlZGVmaW5lIjo2NywiLi8kLnNldC10by1zdHJpbmctdGFnIjo3MSwiLi8kLnNoYXJlZCI6NzIsIi4vJC50by1pb2JqZWN0Ijo3OCwiLi8kLnVpZCI6ODEsIi4vJC53a3MiOjgyfV0sOTQ6W2Z1bmN0aW9uKGUsdCxyKXtlKCIuL2VzNi5hcnJheS5pdGVyYXRvciIpO3ZhciBuPWUoIi4vJC5pdGVyYXRvcnMiKTtuLk5vZGVMaXN0PW4uSFRNTENvbGxlY3Rpb249bi5BcnJheX0seyIuLyQuaXRlcmF0b3JzIjo1OSwiLi9lczYuYXJyYXkuaXRlcmF0b3IiOjg0fV0sOTU6W2Z1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24ocil7dmFyIG49Im9iamVjdCI9PXR5cGVvZiByP3I6Im9iamVjdCI9PXR5cGVvZiB3aW5kb3c/d2luZG93OiJvYmplY3QiPT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsbz1uLnJlZ2VuZXJhdG9yUnVudGltZSYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobikuaW5kZXhPZigicmVnZW5lcmF0b3JSdW50aW1lIik+PTAsaT1vJiZuLnJlZ2VuZXJhdG9yUnVudGltZTtpZihuLnJlZ2VuZXJhdG9yUnVudGltZT12b2lkIDAsdC5leHBvcnRzPWUoIi4vcnVudGltZSIpLG8pbi5yZWdlbmVyYXRvclJ1bnRpbWU9aTtlbHNlIHRyeXtkZWxldGUgbi5yZWdlbmVyYXRvclJ1bnRpbWV9Y2F0Y2gocyl7bi5yZWdlbmVyYXRvclJ1bnRpbWU9dm9pZCAwfXQuZXhwb3J0cz17ImRlZmF1bHQiOnQuZXhwb3J0cyxfX2VzTW9kdWxlOiEwfX0pLmNhbGwodGhpcywidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0seyIuL3J1bnRpbWUiOjk2fV0sOTY6W2Z1bmN0aW9uKGUsdCxyKXsoZnVuY3Rpb24ocixuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6eyJkZWZhdWx0IjplfX12YXIgaT1lKCIuLi9jb3JlLWpzL3Byb21pc2UiKSxzPW8oaSksYT1lKCIuLi9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIiksdT1vKGEpLGM9ZSgiLi4vY29yZS1qcy9vYmplY3QvY3JlYXRlIiksbD1vKGMpLGY9ZSgiLi4vaGVscGVycy90eXBlb2YiKSxoPW8oZikscD1lKCIuLi9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvciIpLGQ9byhwKSx5PWUoIi4uL2NvcmUtanMvc3ltYm9sIiksYj1vKHkpOyFmdW5jdGlvbihlKXtmdW5jdGlvbiBuKGUsdCxyLG4pe3ZhciBvPSgwLGxbImRlZmF1bHQiXSkoKHR8fGkpLnByb3RvdHlwZSkscz1uZXcgXyhufHxbXSk7cmV0dXJuIG8uX2ludm9rZT12KGUscixzKSxvfWZ1bmN0aW9uIG8oZSx0LHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6ZS5jYWxsKHQscil9fWNhdGNoKG4pe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOm59fX1mdW5jdGlvbiBpKCl7fWZ1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gYygpe31mdW5jdGlvbiBmKGUpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9pbnZva2UodCxlKX19KX1mdW5jdGlvbiBwKGUpe3RoaXMuYXJnPWV9ZnVuY3Rpb24geShlKXtmdW5jdGlvbiB0KHQscil7dmFyIG49ZVt0XShyKSxvPW4udmFsdWU7cmV0dXJuIG8gaW5zdGFuY2VvZiBwP3NbImRlZmF1bHQiXS5yZXNvbHZlKG8uYXJnKS50aGVuKGksYSk6c1siZGVmYXVsdCJdLnJlc29sdmUobykudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbi52YWx1ZT1lLG59KX1mdW5jdGlvbiBuKGUscil7ZnVuY3Rpb24gbigpe3JldHVybiB0KGUscil9cmV0dXJuIG89bz9vLnRoZW4obixuKTpuZXcgc1siZGVmYXVsdCJdKGZ1bmN0aW9uKGUpe2UobigpKX0pfSJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygcj8idW5kZWZpbmVkIjooMCxoWyJkZWZhdWx0Il0pKHIpKSYmci5kb21haW4mJih0PXIuZG9tYWluLmJpbmQodCkpO3ZhciBvLGk9dC5iaW5kKGUsIm5leHQiKSxhPXQuYmluZChlLCJ0aHJvdyIpO3QuYmluZChlLCJyZXR1cm4iKTt0aGlzLl9pbnZva2U9bn1mdW5jdGlvbiB2KGUsdCxyKXt2YXIgbj1SO3JldHVybiBmdW5jdGlvbihpLHMpe2lmKG49PT1NKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1UKXtpZigidGhyb3ciPT09aSl0aHJvdyBzO3JldHVybiBqKCl9Zm9yKDs7KXt2YXIgYT1yLmRlbGVnYXRlO2lmKGEpe2lmKCJyZXR1cm4iPT09aXx8InRocm93Ij09PWkmJmEuaXRlcmF0b3JbaV09PT1FKXtyLmRlbGVnYXRlPW51bGw7dmFyIHU9YS5pdGVyYXRvclsicmV0dXJuIl07aWYodSl7dmFyIGM9byh1LGEuaXRlcmF0b3Iscyk7aWYoInRocm93Ij09PWMudHlwZSl7aT0idGhyb3ciLHM9Yy5hcmc7Y29udGludWV9fWlmKCJyZXR1cm4iPT09aSljb250aW51ZX12YXIgYz1vKGEuaXRlcmF0b3JbaV0sYS5pdGVyYXRvcixzKTtpZigidGhyb3ciPT09Yy50eXBlKXtyLmRlbGVnYXRlPW51bGwsaT0idGhyb3ciLHM9Yy5hcmc7Y29udGludWV9aT0ibmV4dCIscz1FO3ZhciBsPWMuYXJnO2lmKCFsLmRvbmUpcmV0dXJuIG49UyxsO3JbYS5yZXN1bHROYW1lXT1sLnZhbHVlLHIubmV4dD1hLm5leHRMb2Msci5kZWxlZ2F0ZT1udWxsfWlmKCJuZXh0Ij09PWkpci5fc2VudD1zLG49PT1TP3Iuc2VudD1zOnIuc2VudD1FO2Vsc2UgaWYoInRocm93Ij09PWkpe2lmKG49PT1SKXRocm93IG49VCxzO3IuZGlzcGF0Y2hFeGNlcHRpb24ocykmJihpPSJuZXh0IixzPUUpfWVsc2UicmV0dXJuIj09PWkmJnIuYWJydXB0KCJyZXR1cm4iLHMpO249TTt2YXIgYz1vKGUsdCxyKTtpZigibm9ybWFsIj09PWMudHlwZSl7bj1yLmRvbmU/VDpTO3ZhciBsPXt2YWx1ZTpjLmFyZyxkb25lOnIuZG9uZX07aWYoYy5hcmchPT14KXJldHVybiBsO3IuZGVsZWdhdGUmJiJuZXh0Ij09PWkmJihzPUUpfWVsc2UidGhyb3ciPT09Yy50eXBlJiYobj1ULGk9InRocm93IixzPWMuYXJnKX19fWZ1bmN0aW9uIG0oZSl7dmFyIHQ9e3RyeUxvYzplWzBdfTsxIGluIGUmJih0LmNhdGNoTG9jPWVbMV0pLDIgaW4gZSYmKHQuZmluYWxseUxvYz1lWzJdLHQuYWZ0ZXJMb2M9ZVszXSksdGhpcy50cnlFbnRyaWVzLnB1c2godCl9ZnVuY3Rpb24gZyhlKXt2YXIgdD1lLmNvbXBsZXRpb258fHt9O3QudHlwZT0ibm9ybWFsIixkZWxldGUgdC5hcmcsZS5jb21wbGV0aW9uPXR9ZnVuY3Rpb24gXyhlKXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6InJvb3QifV0sZS5mb3JFYWNoKG0sdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gTyhlKXtpZihlKXt2YXIgdD1lW2tdO2lmKHQpcmV0dXJuIHQuY2FsbChlKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgZS5uZXh0KXJldHVybiBlO2lmKCFpc05hTihlLmxlbmd0aCkpe3ZhciByPS0xLG49ZnVuY3Rpb24gbygpe2Zvcig7KytyPGUubGVuZ3RoOylpZih3LmNhbGwoZSxyKSlyZXR1cm4gby52YWx1ZT1lW3JdLApvLmRvbmU9ITEsbztyZXR1cm4gby52YWx1ZT1FLG8uZG9uZT0hMCxvfTtyZXR1cm4gbi5uZXh0PW59fXJldHVybntuZXh0Omp9fWZ1bmN0aW9uIGooKXtyZXR1cm57dmFsdWU6RSxkb25lOiEwfX12YXIgRSx3PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksaz0iZnVuY3Rpb24iPT10eXBlb2YgYlsiZGVmYXVsdCJdJiZkWyJkZWZhdWx0Il18fCJAQGl0ZXJhdG9yIiwkPSJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjooMCxoWyJkZWZhdWx0Il0pKHQpKSxQPWUucmVnZW5lcmF0b3JSdW50aW1lO2lmKFApcmV0dXJuIHZvaWQoJCYmKHQuZXhwb3J0cz1QKSk7UD1lLnJlZ2VuZXJhdG9yUnVudGltZT0kP3QuZXhwb3J0czp7fSxQLndyYXA9bjt2YXIgUj0ic3VzcGVuZGVkU3RhcnQiLFM9InN1c3BlbmRlZFlpZWxkIixNPSJleGVjdXRpbmciLFQ9ImNvbXBsZXRlZCIseD17fSxBPWMucHJvdG90eXBlPWkucHJvdG90eXBlO2EucHJvdG90eXBlPUEuY29uc3RydWN0b3I9YyxjLmNvbnN0cnVjdG9yPWEsYS5kaXNwbGF5TmFtZT0iR2VuZXJhdG9yRnVuY3Rpb24iLFAuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZS5jb25zdHJ1Y3RvcjtyZXR1cm4gdD90PT09YXx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PSh0LmRpc3BsYXlOYW1lfHx0Lm5hbWUpOiExfSxQLm1hcms9ZnVuY3Rpb24oZSl7cmV0dXJuIHVbImRlZmF1bHQiXT8oMCx1WyJkZWZhdWx0Il0pKGUsYyk6ZS5fX3Byb3RvX189YyxlLnByb3RvdHlwZT0oMCxsWyJkZWZhdWx0Il0pKEEpLGV9LFAuYXdyYXA9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBwKGUpfSxmKHkucHJvdG90eXBlKSxQLmFzeW5jPWZ1bmN0aW9uKGUsdCxyLG8pe3ZhciBpPW5ldyB5KG4oZSx0LHIsbykpO3JldHVybiBQLmlzR2VuZXJhdG9yRnVuY3Rpb24odCk/aTppLm5leHQoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRvbmU/ZS52YWx1ZTppLm5leHQoKX0pfSxmKEEpLEFba109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sQS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSxQLmtleXM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIGUpdC5wdXNoKHIpO3JldHVybiB0LnJldmVyc2UoKSxmdW5jdGlvbiBuKCl7Zm9yKDt0Lmxlbmd0aDspe3ZhciByPXQucG9wKCk7aWYociBpbiBlKXJldHVybiBuLnZhbHVlPXIsbi5kb25lPSExLG59cmV0dXJuIG4uZG9uZT0hMCxufX0sUC52YWx1ZXM9TyxfLnByb3RvdHlwZT17Y29uc3RydWN0b3I6XyxyZXNldDpmdW5jdGlvbihlKXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9RSx0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKGcpLCFlKWZvcih2YXIgdCBpbiB0aGlzKSJ0Ij09PXQuY2hhckF0KDApJiZ3LmNhbGwodGhpcyx0KSYmIWlzTmFOKCt0LnNsaWNlKDEpKSYmKHRoaXNbdF09RSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIGU9dGhpcy50cnlFbnRyaWVzWzBdLHQ9ZS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3JldHVybiBpLnR5cGU9InRocm93IixpLmFyZz1lLHIubmV4dD10LCEhbn1pZih0aGlzLmRvbmUpdGhyb3cgZTtmb3IodmFyIHI9dGhpcyxuPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtuPj0wOy0tbil7dmFyIG89dGhpcy50cnlFbnRyaWVzW25dLGk9by5jb21wbGV0aW9uO2lmKCJyb290Ij09PW8udHJ5TG9jKXJldHVybiB0KCJlbmQiKTtpZihvLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgcz13LmNhbGwobywiY2F0Y2hMb2MiKSxhPXcuY2FsbChvLCJmaW5hbGx5TG9jIik7aWYocyYmYSl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIHQoby5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gdChvLmZpbmFsbHlMb2MpfWVsc2UgaWYocyl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIHQoby5jYXRjaExvYywhMCl9ZWxzZXtpZighYSl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gdChvLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgbj10aGlzLnRyeUVudHJpZXNbcl07aWYobi50cnlMb2M8PXRoaXMucHJldiYmdy5jYWxsKG4sImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PG4uZmluYWxseUxvYyl7dmFyIG89bjticmVha319byYmKCJicmVhayI9PT1lfHwiY29udGludWUiPT09ZSkmJm8udHJ5TG9jPD10JiZ0PD1vLmZpbmFsbHlMb2MmJihvPW51bGwpO3ZhciBpPW8/by5jb21wbGV0aW9uOnt9O3JldHVybiBpLnR5cGU9ZSxpLmFyZz10LG8/dGhpcy5uZXh0PW8uZmluYWxseUxvYzp0aGlzLmNvbXBsZXRlKGkpLHh9LGNvbXBsZXRlOmZ1bmN0aW9uKGUsdCl7aWYoInRocm93Ij09PWUudHlwZSl0aHJvdyBlLmFyZzsiYnJlYWsiPT09ZS50eXBlfHwiY29udGludWUiPT09ZS50eXBlP3RoaXMubmV4dD1lLmFyZzoicmV0dXJuIj09PWUudHlwZT8odGhpcy5ydmFsPWUuYXJnLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT1lLnR5cGUmJnQmJih0aGlzLm5leHQ9dCl9LGZpbmlzaDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3Q+PTA7LS10KXt2YXIgcj10aGlzLnRyeUVudHJpZXNbdF07aWYoci5maW5hbGx5TG9jPT09ZSlyZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sci5hZnRlckxvYyksZyhyKSx4fX0sImNhdGNoIjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3Q+PTA7LS10KXt2YXIgcj10aGlzLnRyeUVudHJpZXNbdF07aWYoci50cnlMb2M9PT1lKXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIG89bi5hcmc7ZyhyKX1yZXR1cm4gb319dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOk8oZSkscmVzdWx0TmFtZTp0LG5leHRMb2M6cn0seH19fSgib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIG4/InVuZGVmaW5lZCI6KDAsaFsiZGVmYXVsdCJdKShuKSk/bjoib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdz8idW5kZWZpbmVkIjooMCxoWyJkZWZhdWx0Il0pKHdpbmRvdykpP3dpbmRvdzoib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIHNlbGY/InVuZGVmaW5lZCI6KDAsaFsiZGVmYXVsdCJdKShzZWxmKSk/c2VsZjp2b2lkIDApfSkuY2FsbCh0aGlzLGUoIl9wcm9jZXNzIiksInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHsiLi4vY29yZS1qcy9vYmplY3QvY3JlYXRlIjoxLCIuLi9jb3JlLWpzL29iamVjdC9zZXQtcHJvdG90eXBlLW9mIjo3LCIuLi9jb3JlLWpzL3Byb21pc2UiOjgsIi4uL2NvcmUtanMvc3ltYm9sIjo5LCIuLi9jb3JlLWpzL3N5bWJvbC9pdGVyYXRvciI6MTAsIi4uL2hlbHBlcnMvdHlwZW9mIjoxOSxfcHJvY2Vzczo5N31dLDk3OltmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gbigpe2w9ITEsYS5sZW5ndGg/Yz1hLmNvbmNhdChjKTpmPS0xLGMubGVuZ3RoJiZvKCl9ZnVuY3Rpb24gbygpe2lmKCFsKXt2YXIgZT1zZXRUaW1lb3V0KG4pO2w9ITA7Zm9yKHZhciB0PWMubGVuZ3RoO3Q7KXtmb3IoYT1jLGM9W107KytmPHQ7KWEmJmFbZl0ucnVuKCk7Zj0tMSx0PWMubGVuZ3RofWE9bnVsbCxsPSExLGNsZWFyVGltZW91dChlKX19ZnVuY3Rpb24gaShlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fWZ1bmN0aW9uIHMoKXt9dmFyIGEsdT10LmV4cG9ydHM9e30sYz1bXSxsPSExLGY9LTE7dS5uZXh0VGljaz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO2MucHVzaChuZXcgaShlLHQpKSwxIT09Yy5sZW5ndGh8fGx8fHNldFRpbWVvdXQobywwKX0saS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sdS50aXRsZT0iYnJvd3NlciIsdS5icm93c2VyPSEwLHUuZW52PXt9LHUuYXJndj1bXSx1LnZlcnNpb249IiIsdS52ZXJzaW9ucz17fSx1Lm9uPXMsdS5hZGRMaXN0ZW5lcj1zLHUub25jZT1zLHUub2ZmPXMsdS5yZW1vdmVMaXN0ZW5lcj1zLHUucmVtb3ZlQWxsTGlzdGVuZXJzPXMsdS5lbWl0PXMsdS5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKX0sdS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm4iLyJ9LHUuY2hkaXI9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX0sdS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0se31dLDk4OltmdW5jdGlvbih0LHIsbil7IWZ1bmN0aW9uKHQsbil7ImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUuYW1kP2UoW10sbik6InVuZGVmaW5lZCIhPXR5cGVvZiByJiZyLmV4cG9ydHM/ci5leHBvcnRzPW4oKTp0LnR2ND1uKCl9KHRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiBlbmNvZGVVUkkoZSkucmVwbGFjZSgvJTI1WzAtOV1bMC05XS9nLGZ1bmN0aW9uKGUpe3JldHVybiIlIitlLnN1YnN0cmluZygzKX0pfWZ1bmN0aW9uIHQodCl7dmFyIHI9IiI7aFt0LmNoYXJBdCgwKV0mJihyPXQuY2hhckF0KDApLHQ9dC5zdWJzdHJpbmcoMSkpO3ZhciBuPSIiLG89IiIsaT0hMCxzPSExLGE9ITE7IisiPT09cj9pPSExOiIuIj09PXI/KG89Ii4iLG49Ii4iKToiLyI9PT1yPyhvPSIvIixuPSIvIik6IiMiPT09cj8obz0iIyIsaT0hMSk6IjsiPT09cj8obz0iOyIsbj0iOyIscz0hMCxhPSEwKToiPyI9PT1yPyhvPSI/IixuPSImIixzPSEwKToiJiI9PT1yJiYobz0iJiIsbj0iJiIscz0hMCk7Zm9yKHZhciB1PVtdLGM9dC5zcGxpdCgiLCIpLGw9W10sZj17fSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciB5PWNbZF0sYj1udWxsO2lmKC0xIT09eS5pbmRleE9mKCI6Iikpe3ZhciB2PXkuc3BsaXQoIjoiKTt5PXZbMF0sYj1wYXJzZUludCh2WzFdLDEwKX1mb3IodmFyIG09e307cFt5LmNoYXJBdCh5Lmxlbmd0aC0xKV07KW1beS5jaGFyQXQoeS5sZW5ndGgtMSldPSEwLHk9eS5zdWJzdHJpbmcoMCx5Lmxlbmd0aC0xKTt2YXIgZz17dHJ1bmNhdGU6YixuYW1lOnksc3VmZmljZXM6bX07bC5wdXNoKGcpLGZbeV09Zyx1LnB1c2goeSl9dmFyIF89ZnVuY3Rpb24odCl7Zm9yKHZhciByPSIiLHU9MCxjPTA7YzxsLmxlbmd0aDtjKyspe3ZhciBmPWxbY10saD10KGYubmFtZSk7aWYobnVsbD09PWh8fHZvaWQgMD09PWh8fEFycmF5LmlzQXJyYXkoaCkmJjA9PT1oLmxlbmd0aHx8Im9iamVjdCI9PXR5cGVvZiBoJiYwPT09T2JqZWN0LmtleXMoaCkubGVuZ3RoKXUrKztlbHNlIGlmKHIrPWM9PT11P286bnx8IiwiLEFycmF5LmlzQXJyYXkoaCkpe3MmJihyKz1mLm5hbWUrIj0iKTtmb3IodmFyIHA9MDtwPGgubGVuZ3RoO3ArKylwPjAmJihyKz1mLnN1ZmZpY2VzWyIqIl0/bnx8IiwiOiIsIixmLnN1ZmZpY2VzWyIqIl0mJnMmJihyKz1mLm5hbWUrIj0iKSkscis9aT9lbmNvZGVVUklDb21wb25lbnQoaFtwXSkucmVwbGFjZSgvIS9nLCIlMjEiKTplKGhbcF0pfWVsc2UgaWYoIm9iamVjdCI9PXR5cGVvZiBoKXtzJiYhZi5zdWZmaWNlc1siKiJdJiYocis9Zi5uYW1lKyI9Iik7dmFyIGQ9ITA7Zm9yKHZhciB5IGluIGgpZHx8KHIrPWYuc3VmZmljZXNbIioiXT9ufHwiLCI6IiwiKSxkPSExLHIrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KHkpLnJlcGxhY2UoLyEvZywiJTIxIik6ZSh5KSxyKz1mLnN1ZmZpY2VzWyIqIl0/Ij0iOiIsIixyKz1pP2VuY29kZVVSSUNvbXBvbmVudChoW3ldKS5yZXBsYWNlKC8hL2csIiUyMSIpOmUoaFt5XSl9ZWxzZSBzJiYocis9Zi5uYW1lLGEmJiIiPT09aHx8KHIrPSI9IikpLG51bGwhPWYudHJ1bmNhdGUmJihoPWguc3Vic3RyaW5nKDAsZi50cnVuY2F0ZSkpLHIrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KGgpLnJlcGxhY2UoLyEvZywiJTIxIik6ZShoKX1yZXR1cm4gcn07cmV0dXJuIF8udmFyTmFtZXM9dSx7cHJlZml4Om8sc3Vic3RpdHV0aW9uOl99fWZ1bmN0aW9uIHIoZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgcikpcmV0dXJuIG5ldyByKGUpO2Zvcih2YXIgbj1lLnNwbGl0KCJ7Iiksbz1bbi5zaGlmdCgpXSxpPVtdLHM9W10sYT1bXTtuLmxlbmd0aD4wOyl7dmFyIHU9bi5zaGlmdCgpLGM9dS5zcGxpdCgifSIpWzBdLGw9dS5zdWJzdHJpbmcoYy5sZW5ndGgrMSksZj10KGMpO3MucHVzaChmLnN1YnN0aXR1dGlvbiksaS5wdXNoKGYucHJlZml4KSxvLnB1c2gobCksYT1hLmNvbmNhdChmLnN1YnN0aXR1dGlvbi52YXJOYW1lcyl9dGhpcy5maWxsPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1vWzBdLHI9MDtyPHMubGVuZ3RoO3IrKyl7dmFyIG49c1tyXTt0Kz1uKGUpLHQrPW9bcisxXX1yZXR1cm4gdH0sdGhpcy52YXJOYW1lcz1hLHRoaXMudGVtcGxhdGU9ZX1mdW5jdGlvbiBuKGUsdCl7aWYoZT09PXQpcmV0dXJuITA7aWYoZSYmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiYib2JqZWN0Ij09dHlwZW9mIHQpe2lmKEFycmF5LmlzQXJyYXkoZSkhPT1BcnJheS5pc0FycmF5KHQpKXJldHVybiExO2lmKEFycmF5LmlzQXJyYXkoZSkpe2lmKGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspaWYoIW4oZVtyXSx0W3JdKSlyZXR1cm4hMX1lbHNle3ZhciBvO2ZvcihvIGluIGUpaWYodm9pZCAwPT09dFtvXSYmdm9pZCAwIT09ZVtvXSlyZXR1cm4hMTtmb3IobyBpbiB0KWlmKHZvaWQgMD09PWVbb10mJnZvaWQgMCE9PXRbb10pcmV0dXJuITE7Zm9yKG8gaW4gZSlpZighbihlW29dLHRbb10pKXJldHVybiExfXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9U3RyaW5nKGUpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKS5tYXRjaCgvXihbXjpcLz8jXSs6KT8oXC9cLyg/OlteOkBdKig/OjpbXjpAXSopP0ApPygoW146XC8/I10qKSg/OjooXGQqKSk/KSk/KFtePyNdKikoXD9bXiNdKik/KCNbXHNcU10qKT8vKTtyZXR1cm4gdD97aHJlZjp0WzBdfHwiIixwcm90b2NvbDp0WzFdfHwiIixhdXRob3JpdHk6dFsyXXx8IiIsaG9zdDp0WzNdfHwiIixob3N0bmFtZTp0WzRdfHwiIixwb3J0OnRbNV18fCIiLHBhdGhuYW1lOnRbNl18fCIiLHNlYXJjaDp0WzddfHwiIixoYXNoOnRbOF18fCIifTpudWxsfWZ1bmN0aW9uIGkoZSx0KXtmdW5jdGlvbiByKGUpe3ZhciB0PVtdO3JldHVybiBlLnJlcGxhY2UoL14oXC5cLj8oXC98JCkpKy8sIiIpLnJlcGxhY2UoL1wvKFwuKFwvfCQpKSsvZywiLyIpLnJlcGxhY2UoL1wvXC5cLiQvLCIvLi4vIikucmVwbGFjZSgvXC8/W15cL10qL2csZnVuY3Rpb24oZSl7Ii8uLiI9PT1lP3QucG9wKCk6dC5wdXNoKGUpfSksdC5qb2luKCIiKS5yZXBsYWNlKC9eXC8vLCIvIj09PWUuY2hhckF0KDApPyIvIjoiIil9cmV0dXJuIHQ9byh0fHwiIiksZT1vKGV8fCIiKSx0JiZlPyh0LnByb3RvY29sfHxlLnByb3RvY29sKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHk/dC5hdXRob3JpdHk6ZS5hdXRob3JpdHkpK3IodC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fCIvIj09PXQucGF0aG5hbWUuY2hhckF0KDApP3QucGF0aG5hbWU6dC5wYXRobmFtZT8oZS5hdXRob3JpdHkmJiFlLnBhdGhuYW1lPyIvIjoiIikrZS5wYXRobmFtZS5zbGljZSgwLGUucGF0aG5hbWUubGFzdEluZGV4T2YoIi8iKSsxKSt0LnBhdGhuYW1lOmUucGF0aG5hbWUpKyh0LnByb3RvY29sfHx0LmF1dGhvcml0eXx8dC5wYXRobmFtZT90LnNlYXJjaDp0LnNlYXJjaHx8ZS5zZWFyY2gpK3QuaGFzaDpudWxsfWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGUuc3BsaXQoIiMiKVswXX1mdW5jdGlvbiBhKGUsdCl7aWYoZSYmIm9iamVjdCI9PXR5cGVvZiBlKWlmKHZvaWQgMD09PXQ/dD1lLmlkOiJzdHJpbmciPT10eXBlb2YgZS5pZCYmKHQ9aSh0LGUuaWQpLGUuaWQ9dCksQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKylhKGVbcl0sdCk7ZWxzZXsic3RyaW5nIj09dHlwZW9mIGUuJHJlZiYmKGUuJHJlZj1pKHQsZS4kcmVmKSk7Zm9yKHZhciBuIGluIGUpImVudW0iIT09biYmYShlW25dLHQpfX1mdW5jdGlvbiB1KGUpe2U9ZXx8ImVuIjt2YXIgdD1PW2VdO3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10W2UuY29kZV18fF9bZS5jb2RlXTtpZigic3RyaW5nIiE9dHlwZW9mIHIpcmV0dXJuIlVua25vd24gZXJyb3IgY29kZSAiK2UuY29kZSsiOiAiK0pTT04uc3RyaW5naWZ5KGUubWVzc2FnZVBhcmFtcyk7dmFyIG49ZS5wYXJhbXM7cmV0dXJuIHIucmVwbGFjZSgvXHsoW157fV0qKVx9L2csZnVuY3Rpb24oZSx0KXt2YXIgcj1uW3RdO3JldHVybiJzdHJpbmciPT10eXBlb2Ygcnx8Im51bWJlciI9PXR5cGVvZiByP3I6ZX0pfX1mdW5jdGlvbiBjKGUsdCxyLG4sbyl7aWYoRXJyb3IuY2FsbCh0aGlzKSx2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcigiTm8gZXJyb3IgY29kZSBzdXBwbGllZDogIituKTt0aGlzLm1lc3NhZ2U9IiIsdGhpcy5wYXJhbXM9dCx0aGlzLmNvZGU9ZSx0aGlzLmRhdGFQYXRoPXJ8fCIiLHRoaXMuc2NoZW1hUGF0aD1ufHwiIix0aGlzLnN1YkVycm9ycz1vfHxudWxsO3ZhciBpPW5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpO2lmKHRoaXMuc3RhY2s9aS5zdGFja3x8aS5zdGFja3RyYWNlLCF0aGlzLnN0YWNrKXRyeXt0aHJvdyBpfWNhdGNoKGkpe3RoaXMuc3RhY2s9aS5zdGFja3x8aS5zdGFja3RyYWNlfX1mdW5jdGlvbiBsKGUsdCl7aWYodC5zdWJzdHJpbmcoMCxlLmxlbmd0aCk9PT1lKXt2YXIgcj10LnN1YnN0cmluZyhlLmxlbmd0aCk7aWYodC5sZW5ndGg+MCYmIi8iPT09dC5jaGFyQXQoZS5sZW5ndGgtMSl8fCIjIj09PXIuY2hhckF0KDApfHwiPyI9PT1yLmNoYXJBdCgwKSlyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBmKGUpe3ZhciB0LHIsbj1uZXcgZCxvPXtzZXRFcnJvclJlcG9ydGVyOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZT90aGlzLmxhbmd1YWdlKGUpOihyPWUsITApfSxhZGRGb3JtYXQ6ZnVuY3Rpb24oKXtuLmFkZEZvcm1hdC5hcHBseShuLGFyZ3VtZW50cyl9LGxhbmd1YWdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyhPW2VdfHwoZT1lLnNwbGl0KCItIilbMF0pLE9bZV0/KHQ9ZSxlKTohMSk6dH0sYWRkTGFuZ3VhZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgcjtmb3IociBpbiB2KXRbcl0mJiF0W3Zbcl1dJiYodFt2W3JdXT10W3JdKTt2YXIgbj1lLnNwbGl0KCItIilbMF07aWYoT1tuXSl7T1tlXT1PYmplY3QuY3JlYXRlKE9bbl0pO2ZvcihyIGluIHQpInVuZGVmaW5lZCI9PXR5cGVvZiBPW25dW3JdJiYoT1tuXVtyXT10W3JdKSxPW2VdW3JdPXRbcl19ZWxzZSBPW2VdPXQsT1tuXT10O3JldHVybiB0aGlzfSxmcmVzaEFwaTpmdW5jdGlvbihlKXt2YXIgdD1mKCk7cmV0dXJuIGUmJnQubGFuZ3VhZ2UoZSksdH0sdmFsaWRhdGU6ZnVuY3Rpb24oZSxvLGkscyl7dmFyIGE9dSh0KSxjPXI/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByKGUsdCxuKXx8YShlLHQsbil9OmEsbD1uZXcgZChuLCExLGMsaSxzKTsic3RyaW5nIj09dHlwZW9mIG8mJihvPXskcmVmOm99KSxsLmFkZFNjaGVtYSgiIixvKTt2YXIgZj1sLnZhbGlkYXRlQWxsKGUsbyxudWxsLG51bGwsIiIpO3JldHVybiFmJiZzJiYoZj1sLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsbykpLHRoaXMuZXJyb3I9Zix0aGlzLm1pc3Npbmc9bC5taXNzaW5nLHRoaXMudmFsaWQ9bnVsbD09PWYsdGhpcy52YWxpZH0sdmFsaWRhdGVSZXN1bHQ6ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gdGhpcy52YWxpZGF0ZS5hcHBseShlLGFyZ3VtZW50cyksZX0sdmFsaWRhdGVNdWx0aXBsZTpmdW5jdGlvbihlLG8saSxzKXt2YXIgYT11KHQpLGM9cj9mdW5jdGlvbihlLHQsbil7cmV0dXJuIHIoZSx0LG4pfHxhKGUsdCxuKX06YSxsPW5ldyBkKG4sITAsYyxpLHMpOyJzdHJpbmciPT10eXBlb2YgbyYmKG89eyRyZWY6b30pLGwuYWRkU2NoZW1hKCIiLG8pLGwudmFsaWRhdGVBbGwoZSxvLG51bGwsbnVsbCwiIikscyYmbC5iYW5Vbmtub3duUHJvcGVydGllcyhlLG8pO3ZhciBmPXt9O3JldHVybiBmLmVycm9ycz1sLmVycm9ycyxmLm1pc3Npbmc9bC5taXNzaW5nLGYudmFsaWQ9MD09PWYuZXJyb3JzLmxlbmd0aCxmfSxhZGRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gbi5hZGRTY2hlbWEuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWE6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWEuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWFNYXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWFNYXAuYXBwbHkobixhcmd1bWVudHMpfSxnZXRTY2hlbWFVcmlzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0U2NoZW1hVXJpcy5hcHBseShuLGFyZ3VtZW50cyl9LGdldE1pc3NpbmdVcmlzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0TWlzc2luZ1VyaXMuYXBwbHkobixhcmd1bWVudHMpfSxkcm9wU2NoZW1hczpmdW5jdGlvbigpe24uZHJvcFNjaGVtYXMuYXBwbHkobixhcmd1bWVudHMpfSxkZWZpbmVLZXl3b3JkOmZ1bmN0aW9uKCl7bi5kZWZpbmVLZXl3b3JkLmFwcGx5KG4sYXJndW1lbnRzKX0sZGVmaW5lRXJyb3I6ZnVuY3Rpb24oZSx0LHIpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8IS9eW0EtWl0rKF9bQS1aXSspKiQvLnRlc3QoZSkpdGhyb3cgbmV3IEVycm9yKCJDb2RlIG5hbWUgbXVzdCBiZSBhIHN0cmluZyBpbiBVUFBFUl9DQVNFX1dJVEhfVU5ERVJTQ09SRVMiKTtpZigibnVtYmVyIiE9dHlwZW9mIHR8fHQlMSE9PTB8fDFlND50KXRocm93IG5ldyBFcnJvcigiQ29kZSBudW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyID4gMTAwMDAiKTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHZbZV0pdGhyb3cgbmV3IEVycm9yKCJFcnJvciBhbHJlYWR5IGRlZmluZWQ6ICIrZSsiIGFzICIrdltlXSk7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBtW3RdKXRocm93IG5ldyBFcnJvcigiRXJyb3IgY29kZSBhbHJlYWR5IHVzZWQ6ICIrbVt0XSsiIGFzICIrdCk7dltlXT10LG1bdF09ZSxfW2VdPV9bdF09cjtmb3IodmFyIG4gaW4gTyl7dmFyIG89T1tuXTtvW2VdJiYob1t0XT1vW3RdfHxvW2VdKX19LHJlc2V0OmZ1bmN0aW9uKCl7bi5yZXNldCgpLHRoaXMuZXJyb3I9bnVsbCx0aGlzLm1pc3Npbmc9W10sdGhpcy52YWxpZD0hMH0sbWlzc2luZzpbXSxlcnJvcjpudWxsLHZhbGlkOiEwLG5vcm1TY2hlbWE6YSxyZXNvbHZlVXJsOmksZ2V0RG9jdW1lbnRVcmk6cyxlcnJvckNvZGVzOnZ9O3JldHVybiBvLmxhbmd1YWdlKGV8fCJlbiIpLG99T2JqZWN0LmtleXN8fChPYmplY3Qua2V5cz1mdW5jdGlvbigpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdD0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLHI9WyJ0b1N0cmluZyIsInRvTG9jYWxlU3RyaW5nIiwidmFsdWVPZiIsImhhc093blByb3BlcnR5IiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiY29uc3RydWN0b3IiXSxuPXIubGVuZ3RoO3JldHVybiBmdW5jdGlvbihvKXtpZigib2JqZWN0IiE9dHlwZW9mIG8mJiJmdW5jdGlvbiIhPXR5cGVvZiBvfHxudWxsPT09byl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCIpO3ZhciBpPVtdO2Zvcih2YXIgcyBpbiBvKWUuY2FsbChvLHMpJiZpLnB1c2gocyk7aWYodClmb3IodmFyIGE9MDtuPmE7YSsrKWUuY2FsbChvLHJbYV0pJiZpLnB1c2goclthXSk7cmV0dXJuIGl9fSgpKSxPYmplY3QuY3JlYXRlfHwoT2JqZWN0LmNyZWF0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiT2JqZWN0LmNyZWF0ZSBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgb25lIHBhcmFtZXRlci4iKTtyZXR1cm4gZS5wcm90b3R5cGU9dCxuZXcgZX19KCkpLEFycmF5LmlzQXJyYXl8fChBcnJheS5pc0FycmF5PWZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9KSxBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIHQ9T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lmKDA9PT1yKXJldHVybi0xO3ZhciBuPTA7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYobj1OdW1iZXIoYXJndW1lbnRzWzFdKSxuIT09bj9uPTA6MCE9PW4mJm4hPT0xLzAmJm4hPT0tKDEvMCkmJihuPShuPjB8fC0xKSpNYXRoLmZsb29yKE1hdGguYWJzKG4pKSkpLG4+PXIpcmV0dXJuLTE7Zm9yKHZhciBvPW4+PTA/bjpNYXRoLm1heChyLU1hdGguYWJzKG4pLDApO3I+bztvKyspaWYobyBpbiB0JiZ0W29dPT09ZSlyZXR1cm4gbztyZXR1cm4tMX0pLE9iamVjdC5pc0Zyb3plbnx8KE9iamVjdC5pc0Zyb3plbj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9InR2NF90ZXN0X2Zyb3plbl9rZXkiO2UuaGFzT3duUHJvcGVydHkodCk7KXQrPU1hdGgucmFuZG9tKCk7dHJ5e3JldHVybiBlW3RdPSEwLGRlbGV0ZSBlW3RdLCExfWNhdGNoKHIpe3JldHVybiEwfX0pO3ZhciBoPXsiKyI6ITAsIiMiOiEwLCIuIjohMCwiLyI6ITAsIjsiOiEwLCI/IjohMCwiJiI6ITB9LHA9eyIqIjohMH07ci5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVtcGxhdGV9LGZpbGxGcm9tT2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmZpbGwoZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX19O3ZhciBkPWZ1bmN0aW9uKGUsdCxyLG4sbyl7aWYodGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmZvcm1hdFZhbGlkYXRvcnM9ZT9PYmplY3QuY3JlYXRlKGUuZm9ybWF0VmFsaWRhdG9ycyk6e30sdGhpcy5zY2hlbWFzPWU/T2JqZWN0LmNyZWF0ZShlLnNjaGVtYXMpOnt9LHRoaXMuY29sbGVjdE11bHRpcGxlPXQsdGhpcy5lcnJvcnM9W10sdGhpcy5oYW5kbGVFcnJvcj10P3RoaXMuY29sbGVjdEVycm9yOnRoaXMucmV0dXJuRXJyb3IsbiYmKHRoaXMuY2hlY2tSZWN1cnNpdmU9ITAsdGhpcy5zY2FubmVkPVtdLHRoaXMuc2Nhbm5lZEZyb3plbj1bXSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzPVtdLHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnM9W10sdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5PSJ0djRfdmFsaWRhdGlvbl9pZCIsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5PSJ0djRfdmFsaWRhdGlvbl9lcnJvcnNfaWQiKSxvJiYodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzPSEwLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30pLHRoaXMuZXJyb3JSZXBvcnRlcj1yfHx1KCJlbiIpLCJzdHJpbmciPT10eXBlb2YgdGhpcy5lcnJvclJlcG9ydGVyKXRocm93IG5ldyBFcnJvcigiZGVidWciKTtpZih0aGlzLmRlZmluZWRLZXl3b3Jkcz17fSxlKWZvcih2YXIgaSBpbiBlLmRlZmluZWRLZXl3b3Jkcyl0aGlzLmRlZmluZWRLZXl3b3Jkc1tpXT1lLmRlZmluZWRLZXl3b3Jkc1tpXS5zbGljZSgwKX07ZC5wcm90b3R5cGUuZGVmaW5lS2V5d29yZD1mdW5jdGlvbihlLHQpe3RoaXMuZGVmaW5lZEtleXdvcmRzW2VdPXRoaXMuZGVmaW5lZEtleXdvcmRzW2VdfHxbXSx0aGlzLmRlZmluZWRLZXl3b3Jkc1tlXS5wdXNoKHQpfSxkLnByb3RvdHlwZS5jcmVhdGVFcnJvcj1mdW5jdGlvbihlLHQscixuLG8saSxzKXt2YXIgYT1uZXcgYyhlLHQscixuLG8pO3JldHVybiBhLm1lc3NhZ2U9dGhpcy5lcnJvclJlcG9ydGVyKGEsaSxzKSxhfSxkLnByb3RvdHlwZS5yZXR1cm5FcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gZX0sZC5wcm90b3R5cGUuY29sbGVjdEVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLmVycm9ycy5wdXNoKGUpLG51bGx9LGQucHJvdG90eXBlLnByZWZpeEVycm9ycz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPWU7bjx0aGlzLmVycm9ycy5sZW5ndGg7bisrKXRoaXMuZXJyb3JzW25dPXRoaXMuZXJyb3JzW25dLnByZWZpeFdpdGgodCxyKTtyZXR1cm4gdGhpc30sZC5wcm90b3R5cGUuYmFuVW5rbm93blByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocyl7dmFyIG49dGhpcy5jcmVhdGVFcnJvcih2LlVOS05PV05fUFJPUEVSVFkse3BhdGg6cn0sciwiIixudWxsLGUsdCksbz10aGlzLmhhbmRsZUVycm9yKG4pO2lmKG8pcmV0dXJuIG99cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLmFkZEZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKHZhciByIGluIGUpdGhpcy5hZGRGb3JtYXQocixlW3JdKTtyZXR1cm4gdGhpc310aGlzLmZvcm1hdFZhbGlkYXRvcnNbZV09dH0sZC5wcm90b3R5cGUucmVzb2x2ZVJlZnM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT1lLiRyZWYpe2lmKHQ9dHx8e30sdFtlLiRyZWZdKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuQ0lSQ1VMQVJfUkVGRVJFTkNFLHt1cmxzOk9iamVjdC5rZXlzKHQpLmpvaW4oIiwgIil9LCIiLCIiLG51bGwsdm9pZCAwLGUpO3RbZS4kcmVmXT0hMCxlPXRoaXMuZ2V0U2NoZW1hKGUuJHJlZix0KX1yZXR1cm4gZX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hPWZ1bmN0aW9uKGUsdCl7dmFyIHI7aWYodm9pZCAwIT09dGhpcy5zY2hlbWFzW2VdKXJldHVybiByPXRoaXMuc2NoZW1hc1tlXSx0aGlzLnJlc29sdmVSZWZzKHIsdCk7dmFyIG49ZSxvPSIiO2lmKC0xIT09ZS5pbmRleE9mKCIjIikmJihvPWUuc3Vic3RyaW5nKGUuaW5kZXhPZigiIyIpKzEpLG49ZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIiMiKSkpLCJvYmplY3QiPT10eXBlb2YgdGhpcy5zY2hlbWFzW25dKXtyPXRoaXMuc2NoZW1hc1tuXTt2YXIgaT1kZWNvZGVVUklDb21wb25lbnQobyk7aWYoIiI9PT1pKXJldHVybiB0aGlzLnJlc29sdmVSZWZzKHIsdCk7aWYoIi8iIT09aS5jaGFyQXQoMCkpcmV0dXJuO2Zvcih2YXIgcz1pLnNwbGl0KCIvIikuc2xpY2UoMSksYT0wO2E8cy5sZW5ndGg7YSsrKXt2YXIgdT1zW2FdLnJlcGxhY2UoL34xL2csIi8iKS5yZXBsYWNlKC9+MC9nLCJ+Iik7aWYodm9pZCAwPT09clt1XSl7cj12b2lkIDA7YnJlYWt9cj1yW3VdfWlmKHZvaWQgMCE9PXIpcmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMocix0KX12b2lkIDA9PT10aGlzLm1pc3Npbmdbbl0mJih0aGlzLm1pc3NpbmcucHVzaChuKSx0aGlzLm1pc3Npbmdbbl09bix0aGlzLm1pc3NpbmdNYXBbbl09bil9LGQucHJvdG90eXBlLnNlYXJjaFNjaGVtYXM9ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXRoaXMuc2VhcmNoU2NoZW1hcyhlW3JdLHQpO2Vsc2UgaWYoZSYmIm9iamVjdCI9PXR5cGVvZiBlKXsic3RyaW5nIj09dHlwZW9mIGUuaWQmJmwodCxlLmlkKSYmdm9pZCAwPT09dGhpcy5zY2hlbWFzW2UuaWRdJiYodGhpcy5zY2hlbWFzW2UuaWRdPWUpO2Zvcih2YXIgbiBpbiBlKWlmKCJlbnVtIiE9PW4paWYoIm9iamVjdCI9PXR5cGVvZiBlW25dKXRoaXMuc2VhcmNoU2NoZW1hcyhlW25dLHQpO2Vsc2UgaWYoIiRyZWYiPT09bil7dmFyIG89cyhlW25dKTtvJiZ2b2lkIDA9PT10aGlzLnNjaGVtYXNbb10mJnZvaWQgMD09PXRoaXMubWlzc2luZ01hcFtvXSYmKHRoaXMubWlzc2luZ01hcFtvXT1vKX19fSxkLnByb3RvdHlwZS5hZGRTY2hlbWE9ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdCl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHwic3RyaW5nIiE9dHlwZW9mIGUuaWQpcmV0dXJuO3Q9ZSxlPXQuaWR9ZT09PXMoZSkrIiMiJiYoZT1zKGUpKSx0aGlzLnNjaGVtYXNbZV09dCxkZWxldGUgdGhpcy5taXNzaW5nTWFwW2VdLGEodCxlKSx0aGlzLnNlYXJjaFNjaGVtYXModCxlKX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hTWFwPWZ1bmN0aW9uKCl7dmFyIGU9e307Zm9yKHZhciB0IGluIHRoaXMuc2NoZW1hcyllW3RdPXRoaXMuc2NoZW1hc1t0XTtyZXR1cm4gZX0sZC5wcm90b3R5cGUuZ2V0U2NoZW1hVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5zY2hlbWFzKSghZXx8ZS50ZXN0KHIpKSYmdC5wdXNoKHIpO3JldHVybiB0fSxkLnByb3RvdHlwZS5nZXRNaXNzaW5nVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5taXNzaW5nTWFwKSghZXx8ZS50ZXN0KHIpKSYmdC5wdXNoKHIpO3JldHVybiB0fSxkLnByb3RvdHlwZS5kcm9wU2NoZW1hcz1mdW5jdGlvbigpe3RoaXMuc2NoZW1hcz17fSx0aGlzLnJlc2V0KCl9LGQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmVycm9ycz1bXX0sZC5wcm90b3R5cGUudmFsaWRhdGVBbGw9ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaTtpZih0PXRoaXMucmVzb2x2ZVJlZnModCksIXQpcmV0dXJuIG51bGw7aWYodCBpbnN0YW5jZW9mIGMpcmV0dXJuIHRoaXMuZXJyb3JzLnB1c2godCksdDt2YXIgcyxhPXRoaXMuZXJyb3JzLmxlbmd0aCx1PW51bGwsbD1udWxsO2lmKHRoaXMuY2hlY2tSZWN1cnNpdmUmJmUmJiJvYmplY3QiPT10eXBlb2YgZSl7aWYoaT0hdGhpcy5zY2FubmVkLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pe3ZhciBmPWVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XS5pbmRleE9mKHQpO2lmKC0xIT09ZilyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuY29uY2F0KGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtmXSksbnVsbH1pZihPYmplY3QuaXNGcm96ZW4oZSkmJihzPXRoaXMuc2Nhbm5lZEZyb3plbi5pbmRleE9mKGUpLC0xIT09cykpe3ZhciBoPXRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbc10uaW5kZXhPZih0KTtpZigtMSE9PWgpcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLmNvbmNhdCh0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW3NdW2hdKSxudWxsfWlmKHRoaXMuc2Nhbm5lZC5wdXNoKGUpLE9iamVjdC5pc0Zyb3plbihlKSktMT09PXMmJihzPXRoaXMuc2Nhbm5lZEZyb3plbi5sZW5ndGgsdGhpcy5zY2FubmVkRnJvemVuLnB1c2goZSksdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcy5wdXNoKFtdKSksdT10aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW3NdLmxlbmd0aCx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW3NdW3VdPXQsdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1tzXVt1XT1bXTtlbHNle2lmKCFlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pdHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHRoaXMudmFsaWRhdGVkU2NoZW1hc0tleSx7dmFsdWU6W10sY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KX1jYXRjaChwKXtlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV09W10sZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldPVtdfWw9ZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV1bbF09dCxlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bbF09W119fXZhciBkPXRoaXMuZXJyb3JzLmxlbmd0aCx5PXRoaXMudmFsaWRhdGVCYXNpYyhlLHQsbyl8fHRoaXMudmFsaWRhdGVOdW1lcmljKGUsdCxvKXx8dGhpcy52YWxpZGF0ZVN0cmluZyhlLHQsbyl8fHRoaXMudmFsaWRhdGVBcnJheShlLHQsbyl8fHRoaXMudmFsaWRhdGVPYmplY3QoZSx0LG8pfHx0aGlzLnZhbGlkYXRlQ29tYmluYXRpb25zKGUsdCxvKXx8dGhpcy52YWxpZGF0ZUh5cGVybWVkaWEoZSx0LG8pfHx0aGlzLnZhbGlkYXRlRm9ybWF0KGUsdCxvKXx8dGhpcy52YWxpZGF0ZURlZmluZWRLZXl3b3JkcyhlLHQsbyl8fG51bGw7aWYoaSl7Zm9yKDt0aGlzLnNjYW5uZWQubGVuZ3RoOyl7dmFyIGI9dGhpcy5zY2FubmVkLnBvcCgpO2RlbGV0ZSBiW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV19dGhpcy5zY2FubmVkRnJvemVuPVtdLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXM9W119aWYoeXx8ZCE9PXRoaXMuZXJyb3JzLmxlbmd0aClmb3IoO3ImJnIubGVuZ3RofHxuJiZuLmxlbmd0aDspe3ZhciB2PXImJnIubGVuZ3RoPyIiK3IucG9wKCk6bnVsbCxtPW4mJm4ubGVuZ3RoPyIiK24ucG9wKCk6bnVsbDt5JiYoeT15LnByZWZpeFdpdGgodixtKSksdGhpcy5wcmVmaXhFcnJvcnMoZCx2LG0pfXJldHVybiBudWxsIT09dT90aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW3NdW3VdPXRoaXMuZXJyb3JzLnNsaWNlKGEpOm51bGwhPT1sJiYoZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2xdPXRoaXMuZXJyb3JzLnNsaWNlKGEpKSx0aGlzLmhhbmRsZUVycm9yKHkpfSxkLnByb3RvdHlwZS52YWxpZGF0ZUZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdC5mb3JtYXR8fCF0aGlzLmZvcm1hdFZhbGlkYXRvcnNbdC5mb3JtYXRdKXJldHVybiBudWxsO3ZhciByPXRoaXMuZm9ybWF0VmFsaWRhdG9yc1t0LmZvcm1hdF0uY2FsbChudWxsLGUsdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiByfHwibnVtYmVyIj09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcih2LkZPUk1BVF9DVVNUT00se21lc3NhZ2U6cn0sIiIsIi9mb3JtYXQiLG51bGwsZSx0KTpyJiYib2JqZWN0Ij09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcih2LkZPUk1BVF9DVVNUT00se21lc3NhZ2U6ci5tZXNzYWdlfHwiPyJ9LHIuZGF0YVBhdGh8fCIiLHIuc2NoZW1hUGF0aHx8Ii9mb3JtYXQiLG51bGwsZSx0KTpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZURlZmluZWRLZXl3b3Jkcz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuIGluIHRoaXMuZGVmaW5lZEtleXdvcmRzKWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgdFtuXSlmb3IodmFyIG89dGhpcy5kZWZpbmVkS2V5d29yZHNbbl0saT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cyhlLHRbbl0sdCxyKTtpZigic3RyaW5nIj09dHlwZW9mIGF8fCJudW1iZXIiPT10eXBlb2YgYSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih2LktFWVdPUkRfQ1VTVE9NLHtrZXk6bixtZXNzYWdlOmF9LCIiLCIiLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbik7aWYoYSYmIm9iamVjdCI9PXR5cGVvZiBhKXt2YXIgdT1hLmNvZGU7aWYoInN0cmluZyI9PXR5cGVvZiB1KXtpZighdlt1XSl0aHJvdyBuZXcgRXJyb3IoIlVuZGVmaW5lZCBlcnJvciBjb2RlICh1c2UgZGVmaW5lRXJyb3IpOiAiK3UpO3U9dlt1XX1lbHNlIm51bWJlciIhPXR5cGVvZiB1JiYodT12LktFWVdPUkRfQ1VTVE9NKTt2YXIgYz0ib2JqZWN0Ij09dHlwZW9mIGEubWVzc2FnZT9hLm1lc3NhZ2U6e2tleTpuLG1lc3NhZ2U6YS5tZXNzYWdlfHwiPyJ9LGw9YS5zY2hlbWFQYXRofHwiLyIrbi5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKTtyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih1LGMsYS5kYXRhUGF0aHx8bnVsbCxsLG51bGwsZSx0KX19cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQmFzaWM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO3JldHVybihuPXRoaXMudmFsaWRhdGVUeXBlKGUsdCxyKSk/bi5wcmVmaXhXaXRoKG51bGwsInR5cGUiKToobj10aGlzLnZhbGlkYXRlRW51bShlLHQscikpP24ucHJlZml4V2l0aChudWxsLCJ0eXBlIik6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVUeXBlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dC50eXBlKXJldHVybiBudWxsO3ZhciByPXR5cGVvZiBlO251bGw9PT1lP3I9Im51bGwiOkFycmF5LmlzQXJyYXkoZSkmJihyPSJhcnJheSIpO3ZhciBuPXQudHlwZTtBcnJheS5pc0FycmF5KG4pfHwobj1bbl0pO2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXt2YXIgaT1uW29dO2lmKGk9PT1yfHwiaW50ZWdlciI9PT1pJiYibnVtYmVyIj09PXImJmUlMT09PTApcmV0dXJuIG51bGx9cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5JTlZBTElEX1RZUEUse3R5cGU6cixleHBlY3RlZDpuLmpvaW4oIi8iKX0sIiIsIiIsbnVsbCxlLHQpfSxkLnByb3RvdHlwZS52YWxpZGF0ZUVudW09ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10WyJlbnVtIl0pcmV0dXJuIG51bGw7Zm9yKHZhciByPTA7cjx0WyJlbnVtIl0ubGVuZ3RoO3IrKyl7dmFyIG89dFsiZW51bSJdW3JdO2lmKG4oZSxvKSlyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih2LkVOVU1fTUlTTUFUQ0gse3ZhbHVlOiJ1bmRlZmluZWQiIT10eXBlb2YgSlNPTj9KU09OLnN0cmluZ2lmeShlKTplfSwiIiwiIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlTnVtZXJpYz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVNdWx0aXBsZU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU1pbk1heChlLHQscil8fHRoaXMudmFsaWRhdGVOYU4oZSx0LHIpfHxudWxsfTt2YXIgeT1NYXRoLnBvdygyLC01MSksYj0xLXk7ZC5wcm90b3R5cGUudmFsaWRhdGVNdWx0aXBsZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5tdWx0aXBsZU9mfHx0LmRpdmlzaWJsZUJ5O2lmKHZvaWQgMD09PXIpcmV0dXJuIG51bGw7aWYoIm51bWJlciI9PXR5cGVvZiBlKXt2YXIgbj1lL3IlMTtpZihuPj15JiZiPm4pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5OVU1CRVJfTVVMVElQTEVfT0Yse3ZhbHVlOmUsbXVsdGlwbGVPZjpyfSwiIiwiIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlTWluTWF4PWZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciIhPXR5cGVvZiBlKXJldHVybiBudWxsO2lmKHZvaWQgMCE9PXQubWluaW11bSl7aWYoZTx0Lm1pbmltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3Iodi5OVU1CRVJfTUlOSU1VTSx7dmFsdWU6ZSxtaW5pbXVtOnQubWluaW11bX0sIiIsIi9taW5pbXVtIixudWxsLGUsdCk7aWYodC5leGNsdXNpdmVNaW5pbXVtJiZlPT09dC5taW5pbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFLHt2YWx1ZTplLG1pbmltdW06dC5taW5pbXVtfSwiIiwiL2V4Y2x1c2l2ZU1pbmltdW0iLG51bGwsZSx0KX1pZih2b2lkIDAhPT10Lm1heGltdW0pe2lmKGU+dC5tYXhpbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKHYuTlVNQkVSX01BWElNVU0se3ZhbHVlOmUsbWF4aW11bTp0Lm1heGltdW19LCIiLCIvbWF4aW11bSIsbnVsbCxlLHQpO2lmKHQuZXhjbHVzaXZlTWF4aW11bSYmZT09PXQubWF4aW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih2Lk5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRSx7dmFsdWU6ZSxtYXhpbXVtOnQubWF4aW11bX0sIiIsIi9leGNsdXNpdmVNYXhpbXVtIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlTmFOPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlP251bGw6aXNOYU4oZSk9PT0hMHx8ZT09PTEvMHx8ZT09PS0oMS8wKT90aGlzLmNyZWF0ZUVycm9yKHYuTlVNQkVSX05PVF9BX05VTUJFUix7dmFsdWU6ZX0sIiIsIi90eXBlIixudWxsLGUsdCk6bnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnZhbGlkYXRlU3RyaW5nTGVuZ3RoKGUsdCxyKXx8dGhpcy52YWxpZGF0ZVN0cmluZ1BhdHRlcm4oZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ0xlbmd0aD1mdW5jdGlvbihlLHQpe3JldHVybiJzdHJpbmciIT10eXBlb2YgZT9udWxsOnZvaWQgMCE9PXQubWluTGVuZ3RoJiZlLmxlbmd0aDx0Lm1pbkxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKHYuU1RSSU5HX0xFTkdUSF9TSE9SVCx7bGVuZ3RoOmUubGVuZ3RoLG1pbmltdW06dC5taW5MZW5ndGh9LCIiLCIvbWluTGVuZ3RoIixudWxsLGUsdCk6dm9pZCAwIT09dC5tYXhMZW5ndGgmJmUubGVuZ3RoPnQubWF4TGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3Iodi5TVFJJTkdfTEVOR1RIX0xPTkcse2xlbmd0aDplLmxlbmd0aCxtYXhpbXVtOnQubWF4TGVuZ3RofSwiIiwiL21heExlbmd0aCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nUGF0dGVybj1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8InN0cmluZyIhPXR5cGVvZiB0LnBhdHRlcm4mJiEodC5wYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSlyZXR1cm4gbnVsbDt2YXIgcjtpZih0LnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApcj10LnBhdHRlcm47ZWxzZXt2YXIgbixvPSIiLGk9dC5wYXR0ZXJuLm1hdGNoKC9eXC8oLispXC8oW2ltZ10qKSQvKTtpPyhuPWlbMV0sbz1pWzJdKTpuPXQucGF0dGVybixyPW5ldyBSZWdFeHAobixvKX1yZXR1cm4gci50ZXN0KGUpP251bGw6dGhpcy5jcmVhdGVFcnJvcih2LlNUUklOR19QQVRURVJOLHtwYXR0ZXJuOnQucGF0dGVybn0sIiIsIi9wYXR0ZXJuIixudWxsLGUsdCl9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXk9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP3RoaXMudmFsaWRhdGVBcnJheUxlbmd0aChlLHQscil8fHRoaXMudmFsaWRhdGVBcnJheVVuaXF1ZUl0ZW1zKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFycmF5SXRlbXMoZSx0LHIpfHxudWxsOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlMZW5ndGg9ZnVuY3Rpb24oZSx0KXt2YXIgcjtyZXR1cm4gdm9pZCAwIT09dC5taW5JdGVtcyYmZS5sZW5ndGg8dC5taW5JdGVtcyYmKHI9dGhpcy5jcmVhdGVFcnJvcih2LkFSUkFZX0xFTkdUSF9TSE9SVCx7bGVuZ3RoOmUubGVuZ3RoLG1pbmltdW06dC5taW5JdGVtc30sIiIsIi9taW5JdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhJdGVtcyYmZS5sZW5ndGg+dC5tYXhJdGVtcyYmKHI9dGhpcy5jcmVhdGVFcnJvcih2LkFSUkFZX0xFTkdUSF9MT05HLHtsZW5ndGg6ZS5sZW5ndGgsbWF4aW11bTp0Lm1heEl0ZW1zfSwiIiwiL21heEl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjpudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXM9ZnVuY3Rpb24oZSx0KXtpZih0LnVuaXF1ZUl0ZW1zKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWZvcih2YXIgbz1yKzE7bzxlLmxlbmd0aDtvKyspaWYobihlW3JdLGVbb10pKXt2YXIgaT10aGlzLmNyZWF0ZUVycm9yKHYuQVJSQVlfVU5JUVVFLHttYXRjaDE6cixtYXRjaDI6b30sIiIsIi91bmlxdWVJdGVtcyIsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IoaSkpcmV0dXJuIGl9cmV0dXJuIG51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlJdGVtcz1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5pdGVtcylyZXR1cm4gbnVsbDt2YXIgbixvO2lmKEFycmF5LmlzQXJyYXkodC5pdGVtcykpe2ZvcihvPTA7bzxlLmxlbmd0aDtvKyspaWYobzx0Lml0ZW1zLmxlbmd0aCl7aWYobj10aGlzLnZhbGlkYXRlQWxsKGVbb10sdC5pdGVtc1tvXSxbb10sWyJpdGVtcyIsb10scisiLyIrbykpcmV0dXJuIG59ZWxzZSBpZih2b2lkIDAhPT10LmFkZGl0aW9uYWxJdGVtcylpZigiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxJdGVtcyl7aWYoIXQuYWRkaXRpb25hbEl0ZW1zJiYobj10aGlzLmNyZWF0ZUVycm9yKHYuQVJSQVlfQURESVRJT05BTF9JVEVNUyx7fSwiLyIrbywiL2FkZGl0aW9uYWxJdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbb10sdC5hZGRpdGlvbmFsSXRlbXMsW29dLFsiYWRkaXRpb25hbEl0ZW1zIl0scisiLyIrbykpcmV0dXJuIG59ZWxzZSBmb3Iobz0wO288ZS5sZW5ndGg7bysrKWlmKG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQuaXRlbXMsW29dLFsiaXRlbXMiXSxyKyIvIitvKSlyZXR1cm4gbjtyZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3Q9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiJvYmplY3QiIT10eXBlb2YgZXx8bnVsbD09PWV8fEFycmF5LmlzQXJyYXkoZSk/bnVsbDp0aGlzLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXMoZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdE1pbk1heFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcixuPU9iamVjdC5rZXlzKGUpO3JldHVybiB2b2lkIDAhPT10Lm1pblByb3BlcnRpZXMmJm4ubGVuZ3RoPHQubWluUHJvcGVydGllcyYmKHI9dGhpcy5jcmVhdGVFcnJvcih2Lk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU0se3Byb3BlcnR5Q291bnQ6bi5sZW5ndGgsbWluaW11bTp0Lm1pblByb3BlcnRpZXN9LCIiLCIvbWluUHJvcGVydGllcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6dm9pZCAwIT09dC5tYXhQcm9wZXJ0aWVzJiZuLmxlbmd0aD50Lm1heFByb3BlcnRpZXMmJihyPXRoaXMuY3JlYXRlRXJyb3Iodi5PQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNLHtwcm9wZXJ0eUNvdW50Om4ubGVuZ3RoLG1heGltdW06dC5tYXhQcm9wZXJ0aWVzfSwiIiwiL21heFByb3BlcnRpZXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0UmVxdWlyZWRQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dC5yZXF1aXJlZClmb3IodmFyIHI9MDtyPHQucmVxdWlyZWQubGVuZ3RoO3IrKyl7dmFyIG49dC5yZXF1aXJlZFtyXTtpZih2b2lkIDA9PT1lW25dKXt2YXIgbz10aGlzLmNyZWF0ZUVycm9yKHYuT0JKRUNUX1JFUVVJUkVELHtrZXk6bn0sIiIsIi9yZXF1aXJlZC8iK3IsbnVsbCxlLHQpO2lmKHRoaXMuaGFuZGxlRXJyb3IobykpcmV0dXJuIG99fXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2Zvcih2YXIgbyBpbiBlKXt2YXIgaT1yKyIvIitvLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLHM9ITE7aWYodm9pZCAwIT09dC5wcm9wZXJ0aWVzJiZ2b2lkIDAhPT10LnByb3BlcnRpZXNbb10mJihzPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQucHJvcGVydGllc1tvXSxbb10sWyJwcm9wZXJ0aWVzIixvXSxpKSkpcmV0dXJuIG47aWYodm9pZCAwIT09dC5wYXR0ZXJuUHJvcGVydGllcylmb3IodmFyIGEgaW4gdC5wYXR0ZXJuUHJvcGVydGllcyl7dmFyIHU9bmV3IFJlZ0V4cChhKTtpZih1LnRlc3QobykmJihzPSEwLG49dGhpcy52YWxpZGF0ZUFsbChlW29dLHQucGF0dGVyblByb3BlcnRpZXNbYV0sW29dLFsicGF0dGVyblByb3BlcnRpZXMiLGFdLGkpKSlyZXR1cm4gbn1pZihzKXRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldKTtlbHNlIGlmKHZvaWQgMCE9PXQuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldKSwiYm9vbGVhbiI9PXR5cGVvZiB0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzKXtpZighdC5hZGRpdGlvbmFsUHJvcGVydGllcyYmKG49dGhpcy5jcmVhdGVFcnJvcih2Lk9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVMse2tleTpvfSwiIiwiL2FkZGl0aW9uYWxQcm9wZXJ0aWVzIixudWxsLGUsdCkucHJlZml4V2l0aChvLG51bGwpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbb10sdC5hZGRpdGlvbmFsUHJvcGVydGllcyxbb10sWyJhZGRpdGlvbmFsUHJvcGVydGllcyJdLGkpKXJldHVybiBufWVsc2UgdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYhdGhpcy5rbm93blByb3BlcnR5UGF0aHNbaV0mJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW2ldPSEwKX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO2lmKHZvaWQgMCE9PXQuZGVwZW5kZW5jaWVzKWZvcih2YXIgbyBpbiB0LmRlcGVuZGVuY2llcylpZih2b2lkIDAhPT1lW29dKXt2YXIgaT10LmRlcGVuZGVuY2llc1tvXTtpZigic3RyaW5nIj09dHlwZW9mIGkpe2lmKHZvaWQgMD09PWVbaV0mJihuPXRoaXMuY3JlYXRlRXJyb3Iodi5PQkpFQ1RfREVQRU5ERU5DWV9LRVkse2tleTpvLG1pc3Npbmc6aX0sIiIsIiIsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxvKS5wcmVmaXhXaXRoKG51bGwsImRlcGVuZGVuY2llcyIpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYoQXJyYXkuaXNBcnJheShpKSlmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGE9aVtzXTtpZih2b2lkIDA9PT1lW2FdJiYobj10aGlzLmNyZWF0ZUVycm9yKHYuT0JKRUNUX0RFUEVOREVOQ1lfS0VZLHtrZXk6byxtaXNzaW5nOmF9LCIiLCIvIitzLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbykucHJlZml4V2l0aChudWxsLCJkZXBlbmRlbmNpZXMiKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlLGksW10sWyJkZXBlbmRlbmNpZXMiLG9dLHIpKXJldHVybiBufXJldHVybiBudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUNvbWJpbmF0aW9ucz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVBbGxPZihlLHQscil8fHRoaXMudmFsaWRhdGVBbnlPZihlLHQscil8fHRoaXMudmFsaWRhdGVPbmVPZihlLHQscil8fHRoaXMudmFsaWRhdGVOb3QoZSx0LHIpfHxudWxsfSxkLnByb3RvdHlwZS52YWxpZGF0ZUFsbE9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10LmFsbE9mKXJldHVybiBudWxsO2Zvcih2YXIgbixvPTA7bzx0LmFsbE9mLmxlbmd0aDtvKyspe3ZhciBpPXQuYWxsT2Zbb107aWYobj10aGlzLnZhbGlkYXRlQWxsKGUsaSxbXSxbImFsbE9mIixvXSxyKSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUudmFsaWRhdGVBbnlPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5hbnlPZilyZXR1cm4gbnVsbDt2YXIgbixvLGk9W10scz10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLG89dGhpcy5rbm93blByb3BlcnR5UGF0aHMpO2Zvcih2YXIgYT0hMCx1PTA7dTx0LmFueU9mLmxlbmd0aDt1Kyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPXQuYW55T2ZbdV0sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsYyxbXSxbImFueU9mIix1XSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYodGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpe2Zvcih2YXIgaCBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocylvW2hdPSEwLGRlbGV0ZSBuW2hdO2Zvcih2YXIgcCBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKW9bcF18fChuW3BdPSEwKTthPSExO2NvbnRpbnVlfXJldHVybiBudWxsfWYmJmkucHVzaChmLnByZWZpeFdpdGgobnVsbCwiIit1KS5wcmVmaXhXaXRoKG51bGwsImFueU9mIikpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksYT8oaT1pLmNvbmNhdCh0aGlzLmVycm9ycy5zbGljZShzKSksdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLmNyZWF0ZUVycm9yKHYuQU5ZX09GX01JU1NJTkcse30sIiIsIi9hbnlPZiIsaSxlLHQpKTp2b2lkIDB9LGQucHJvdG90eXBlLnZhbGlkYXRlT25lT2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQub25lT2YpcmV0dXJuIG51bGw7dmFyIG4sbyxpPW51bGwscz1bXSxhPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsbz10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciB1PTA7dTx0Lm9uZU9mLmxlbmd0aDt1Kyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPXQub25lT2ZbdV0sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKGUsYyxbXSxbIm9uZU9mIix1XSxyKTtpZihudWxsPT09ZiYmbD09PXRoaXMuZXJyb3JzLmxlbmd0aCl7aWYobnVsbCE9PWkpcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy5jcmVhdGVFcnJvcih2Lk9ORV9PRl9NVUxUSVBMRSx7aW5kZXgxOmksaW5kZXgyOnV9LCIiLCIvb25lT2YiLG51bGwsZSx0KTtpZihpPXUsdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIGggaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpb1toXT0hMCxkZWxldGUgbltoXTtmb3IodmFyIHAgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylvW3BdfHwobltwXT0hMCl9fWVsc2UgZiYmcy5wdXNoKGYpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksbnVsbD09PWk/KHM9cy5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2UoYSkpLHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy5jcmVhdGVFcnJvcih2Lk9ORV9PRl9NSVNTSU5HLHt9LCIiLCIvb25lT2YiLHMsZSx0KSk6KHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksbnVsbCl9LGQucHJvdG90eXBlLnZhbGlkYXRlTm90PWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lm5vdClyZXR1cm4gbnVsbDt2YXIgbixvLGk9dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxvPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzLHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBzPXRoaXMudmFsaWRhdGVBbGwoZSx0Lm5vdCxudWxsLG51bGwsciksYT10aGlzLmVycm9ycy5zbGljZShpKTtyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxpKSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9byksbnVsbD09PXMmJjA9PT1hLmxlbmd0aD90aGlzLmNyZWF0ZUVycm9yKHYuTk9UX1BBU1NFRCx7fSwiIiwiL25vdCIsbnVsbCxlLHQpOm51bGx9LGQucHJvdG90eXBlLnZhbGlkYXRlSHlwZXJtZWRpYT1mdW5jdGlvbihlLHQsbil7aWYoIXQubGlua3MpcmV0dXJuIG51bGw7Zm9yKHZhciBvLGk9MDtpPHQubGlua3MubGVuZ3RoO2krKyl7dmFyIHM9dC5saW5rc1tpXTtpZigiZGVzY3JpYmVkYnkiPT09cy5yZWwpe2Zvcih2YXIgYT1uZXcgcihzLmhyZWYpLHU9ITAsYz0wO2M8YS52YXJOYW1lcy5sZW5ndGg7YysrKWlmKCEoYS52YXJOYW1lc1tjXWluIGUpKXt1PSExO2JyZWFrfWlmKHUpe3ZhciBsPWEuZmlsbEZyb21PYmplY3QoZSksZj17JHJlZjpsfTtpZihvPXRoaXMudmFsaWRhdGVBbGwoZSxmLFtdLFsibGlua3MiLGldLG4pKXJldHVybiBvfX19fTt2YXIgdj17SU5WQUxJRF9UWVBFOjAsRU5VTV9NSVNNQVRDSDoxLEFOWV9PRl9NSVNTSU5HOjEwLE9ORV9PRl9NSVNTSU5HOjExLE9ORV9PRl9NVUxUSVBMRToxMixOT1RfUEFTU0VEOjEzLE5VTUJFUl9NVUxUSVBMRV9PRjoxMDAsTlVNQkVSX01JTklNVU06MTAxLE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRToxMDIsTlVNQkVSX01BWElNVU06MTAzLE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRToxMDQsTlVNQkVSX05PVF9BX05VTUJFUjoxMDUsU1RSSU5HX0xFTkdUSF9TSE9SVDoyMDAsU1RSSU5HX0xFTkdUSF9MT05HOjIwMSxTVFJJTkdfUEFUVEVSTjoyMDIsT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTTozMDAsT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTozMDEsT0JKRUNUX1JFUVVJUkVEOjMwMixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOjMwMyxPQkpFQ1RfREVQRU5ERU5DWV9LRVk6MzA0LEFSUkFZX0xFTkdUSF9TSE9SVDo0MDAsQVJSQVlfTEVOR1RIX0xPTkc6NDAxLEFSUkFZX1VOSVFVRTo0MDIsQVJSQVlfQURESVRJT05BTF9JVEVNUzo0MDMsRk9STUFUX0NVU1RPTTo1MDAsS0VZV09SRF9DVVNUT006NTAxLENJUkNVTEFSX1JFRkVSRU5DRTo2MDAsVU5LTk9XTl9QUk9QRVJUWToxZTN9LG09e307Zm9yKHZhciBnIGluIHYpbVt2W2ddXT1nO3ZhciBfPXtJTlZBTElEX1RZUEU6IkludmFsaWQgdHlwZToge3R5cGV9IChleHBlY3RlZCB7ZXhwZWN0ZWR9KSIsRU5VTV9NSVNNQVRDSDoiTm8gZW51bSBtYXRjaCBmb3I6IHt2YWx1ZX0iLEFOWV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gImFueU9mIicsT05FX09GX01JU1NJTkc6J0RhdGEgZG9lcyBub3QgbWF0Y2ggYW55IHNjaGVtYXMgZnJvbSAib25lT2YiJyxPTkVfT0ZfTVVMVElQTEU6J0RhdGEgaXMgdmFsaWQgYWdhaW5zdCBtb3JlIHRoYW4gb25lIHNjaGVtYSBmcm9tICJvbmVPZiI6IGluZGljZXMge2luZGV4MX0gYW5kIHtpbmRleDJ9JyxOT1RfUEFTU0VEOidEYXRhIG1hdGNoZXMgc2NoZW1hIGZyb20gIm5vdCInLE5VTUJFUl9NVUxUSVBMRV9PRjoiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSBtdWx0aXBsZSBvZiB7bXVsdGlwbGVPZn0iLE5VTUJFUl9NSU5JTVVNOiJWYWx1ZSB7dmFsdWV9IGlzIGxlc3MgdGhhbiBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOiJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtaW5pbXVtIHttaW5pbXVtfSIsTlVNQkVSX01BWElNVU06IlZhbHVlIHt2YWx1ZX0gaXMgZ3JlYXRlciB0aGFuIG1heGltdW0ge21heGltdW19IixOVU1CRVJfTUFYSU1VTV9FWENMVVNJVkU6IlZhbHVlIHt2YWx1ZX0gaXMgZXF1YWwgdG8gZXhjbHVzaXZlIG1heGltdW0ge21heGltdW19IixOVU1CRVJfTk9UX0FfTlVNQkVSOiJWYWx1ZSB7dmFsdWV9IGlzIG5vdCBhIHZhbGlkIG51bWJlciIsU1RSSU5HX0xFTkdUSF9TSE9SVDoiU3RyaW5nIGlzIHRvbyBzaG9ydCAoe2xlbmd0aH0gY2hhcnMpLCBtaW5pbXVtIHttaW5pbXVtfSIsU1RSSU5HX0xFTkdUSF9MT05HOiJTdHJpbmcgaXMgdG9vIGxvbmcgKHtsZW5ndGh9IGNoYXJzKSwgbWF4aW11bSB7bWF4aW11bX0iLApTVFJJTkdfUEFUVEVSTjoiU3RyaW5nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm46IHtwYXR0ZXJufSIsT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTToiVG9vIGZldyBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1pbmltdW0ge21pbmltdW19IixPQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNOiJUb28gbWFueSBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1heGltdW0ge21heGltdW19IixPQkpFQ1RfUkVRVUlSRUQ6Ik1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6IHtrZXl9IixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOiJBZGRpdGlvbmFsIHByb3BlcnRpZXMgbm90IGFsbG93ZWQiLE9CSkVDVF9ERVBFTkRFTkNZX0tFWToiRGVwZW5kZW5jeSBmYWlsZWQgLSBrZXkgbXVzdCBleGlzdDoge21pc3Npbmd9IChkdWUgdG8ga2V5OiB7a2V5fSkiLEFSUkFZX0xFTkdUSF9TSE9SVDoiQXJyYXkgaXMgdG9vIHNob3J0ICh7bGVuZ3RofSksIG1pbmltdW0ge21pbmltdW19IixBUlJBWV9MRU5HVEhfTE9ORzoiQXJyYXkgaXMgdG9vIGxvbmcgKHtsZW5ndGh9KSwgbWF4aW11bSB7bWF4aW11bX0iLEFSUkFZX1VOSVFVRToiQXJyYXkgaXRlbXMgYXJlIG5vdCB1bmlxdWUgKGluZGljZXMge21hdGNoMX0gYW5kIHttYXRjaDJ9KSIsQVJSQVlfQURESVRJT05BTF9JVEVNUzoiQWRkaXRpb25hbCBpdGVtcyBub3QgYWxsb3dlZCIsRk9STUFUX0NVU1RPTToiRm9ybWF0IHZhbGlkYXRpb24gZmFpbGVkICh7bWVzc2FnZX0pIixLRVlXT1JEX0NVU1RPTToiS2V5d29yZCBmYWlsZWQ6IHtrZXl9ICh7bWVzc2FnZX0pIixDSVJDVUxBUl9SRUZFUkVOQ0U6IkNpcmN1bGFyICRyZWZzOiB7dXJsc30iLFVOS05PV05fUFJPUEVSVFk6IlVua25vd24gcHJvcGVydHkgKG5vdCBpbiBzY2hlbWEpIn07Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWMsYy5wcm90b3R5cGUubmFtZT0iVmFsaWRhdGlvbkVycm9yIixjLnByb3RvdHlwZS5wcmVmaXhXaXRoPWZ1bmN0aW9uKGUsdCl7aWYobnVsbCE9PWUmJihlPWUucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIiksdGhpcy5kYXRhUGF0aD0iLyIrZSt0aGlzLmRhdGFQYXRoKSxudWxsIT09dCYmKHQ9dC5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSx0aGlzLnNjaGVtYVBhdGg9Ii8iK3QrdGhpcy5zY2hlbWFQYXRoKSxudWxsIT09dGhpcy5zdWJFcnJvcnMpZm9yKHZhciByPTA7cjx0aGlzLnN1YkVycm9ycy5sZW5ndGg7cisrKXRoaXMuc3ViRXJyb3JzW3JdLnByZWZpeFdpdGgoZSx0KTtyZXR1cm4gdGhpc307dmFyIE89e30saj1mKCk7cmV0dXJuIGouYWRkTGFuZ3VhZ2UoImVuLWdiIixfKSxqLnR2ND1qLGp9KX0se31dLDk5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4saSxzLGEpe28odGhpcyxlKSx0aGlzLl9ndWlkPXQsdGhpcy5fdHlwZT1yLHRoaXMuX29iamVjdE5hbWU9bix0aGlzLl9kZXNjcmlwdGlvbj1pLHRoaXMuX2xhbmd1YWdlPXMsdGhpcy5fc291cmNlUGFja2FnZVVSTD1hLHRoaXMuX3NpZ25hdHVyZT1udWxsLHRoaXMuX3NvdXJjZVBhY2thZ2U9bnVsbH1yZXR1cm4gbihlLFt7a2V5OiJndWlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3VpZH0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9ndWlkPWUpfX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fdHlwZT1lKX19LHtrZXk6Im9iamVjdE5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3ROYW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX29iamVjdE5hbWU9ZSl9fSx7a2V5OiJkZXNjcmlwdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2Rlc2NyaXB0aW9uPWUpfX0se2tleToibGFuZ3VhZ2UiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYW5ndWFnZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9sYW5ndWFnZT1lKX19LHtrZXk6InNpZ25hdHVyZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpZ25hdHVyZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zaWduYXR1cmU9ZSl9fSx7a2V5OiJzb3VyY2VQYWNrYWdlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlUGFja2FnZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9zb3VyY2VQYWNrYWdlPWUpfX0se2tleToic291cmNlUGFja2FnZVVSTCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZVBhY2thZ2VVUkx9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlUGFja2FnZVVSTD1lKX19XSksZX0oKSxzPXtIWVBFUlRZOiJoeXBlcnR5IixQUk9UT1NUVUI6InByb3Rvc3R1YiIsSFlQRVJUWV9SVU5USU1FOiJoeXBlcnR5X3J1bnRpbWUiLEhZUEVSVFlfSU5URVJDRVBUT1I6Imh5cGVydHlfaW5zcGVjdG9yIixIWVBFUlRZX0RBVEFfT0JKRUNUOiJoeXBlcnR5X2RhdGFfb2JqZWN0IixQT0xJQ1lfRU5GT1JDRVI6InBvbGljeV9lbmZvcmNlciIsREFUQV9TQ0hFTUE6ImRhdGFfc2NoZW1hIn07ci5DYXRhbG9ndWVPYmplY3RUeXBlPXM7dmFyIGE9e0pBVkFTQ1JJUFRfRUNNQTY6ImphdmFzY3JpcHRfZWNtYTYiLEpBVkFTQ1JJUFRfRUNNQTU6ImphdmFzY3JpcHRfZWNtYTUiLEpTT05fU0NIRU1BX1Y0OiJqc29uX3NjaGVtYV92NCIsUFlUSE9OOiJweXRob24iLFRZUEVTQ1JJUFQ6InR5cGVzY3JpcHQifTtyLkRhdGFPYmplY3RTb3VyY2VMYW5ndWFnZT1hLHJbImRlZmF1bHQiXT1pfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTN9XSwxMDA6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuLi9yZVRISU5LT2JqZWN0L1JldGhpbmtPYmplY3QiKSxjPWEodSksbD1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxmPWEobCksaD1lKCIuL1NvdXJjZVBhY2thZ2UiKSxwPWEoaCksZD1lKCIuL0h5cGVydHlEZXNjcmlwdG9yIikseT1hKGQpLGI9ZSgiLi9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIiksdj1hKGIpLG09ZSgiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiKSxnPWEobSksXz1lKCIuL1BvbGljeUVuZm9yY2VyRGVzY3JpcHRvciIpLE89YShfKSxqPWUoIi4vRGF0YU9iamVjdFNjaGVtYSIpLEU9YShqKSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscil9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6ImNyZWF0ZUNhdGFsb2d1ZURhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgZlsiZGVmYXVsdCJdKGUsdCxyLG4sbyxpKX19LHtrZXk6ImNyZWF0ZUh5cGVydHlEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSxzKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIHMpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyB5WyJkZWZhdWx0Il0oZSxsLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWSx0LHIsbixvLGkscyl9fSx7a2V5OiJjcmVhdGVQcm90b1N0dWJEZXNjcmlwdG9yT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSxzLGEpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2Ygc3x8InVuZGVmaW5lZCI9PXR5cGVvZiBhKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwYXJhbWV0ZXJzISIpO3JldHVybiBuZXcgdlsiZGVmYXVsdCJdKGUsbC5DYXRhbG9ndWVPYmplY3RUeXBlLlBST1RPU1RVQix0LHIsbixvLGkscyxhKX19LHtrZXk6ImNyZWF0ZUh5cGVydHlSdW50aW1lRGVzY3JpcHRvck9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvLGkscyxhKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygb3x8InVuZGVmaW5lZCI9PXR5cGVvZiBpfHwidW5kZWZpbmVkIj09dHlwZW9mIHN8fCJ1bmRlZmluZWQiPT10eXBlb2YgYSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IGdbImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5IWVBFUlRZX1JVTlRJTUUsdCxyLG4sbyxpLHMsYSl9fSx7a2V5OiJjcmVhdGVQb2xpY3lFbmZvcmNlckRlc2NyaXB0b3JPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpLHMpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIHJ8fCJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8InVuZGVmaW5lZCI9PXR5cGVvZiBvfHwidW5kZWZpbmVkIj09dHlwZW9mIGl8fCJ1bmRlZmluZWQiPT10eXBlb2Ygcyl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IE9bImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5QT0xJQ1lfRU5GT1JDRVIsdCxyLG4sbyxpLHMpfX0se2tleToiY3JlYXRlRGF0YU9iamVjdFNjaGVtYSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fCJ1bmRlZmluZWQiPT10eXBlb2YgdHx8InVuZGVmaW5lZCI9PXR5cGVvZiByfHwidW5kZWZpbmVkIj09dHlwZW9mIG58fCJ1bmRlZmluZWQiPT10eXBlb2Ygbyl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVycyEiKTtyZXR1cm4gbmV3IEVbImRlZmF1bHQiXShlLGwuQ2F0YWxvZ3VlT2JqZWN0VHlwZS5EQVRBX1NDSEVNQSx0LHIsbixvKX19LHtrZXk6ImNyZWF0ZVNvdXJjZVBhY2thZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiB0fHwidW5kZWZpbmVkIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBhcmFtZXRlcnMhIik7cmV0dXJuIG5ldyBwWyJkZWZhdWx0Il0oZSx0KX19XSksdH0oY1siZGVmYXVsdCJdKTtyWyJkZWZhdWx0Il09dyx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdCI6MTEwLCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjk5LCIuL0RhdGFPYmplY3RTY2hlbWEiOjEwMSwiLi9IeXBlcnR5RGVzY3JpcHRvciI6MTAyLCIuL0h5cGVydHlSdW50aW1lRGVzY3JpcHRvciI6MTAzLCIuL1BvbGljeUVuZm9yY2VyRGVzY3JpcHRvciI6MTA0LCIuL1Byb3RvY29sU3R1YkRlc2NyaXB0b3IiOjEwNSwiLi9Tb3VyY2VQYWNrYWdlIjoxMDYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTAxOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLHU9cyhhKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUpfXJldHVybiBvKHQsZSksdH0odVsiZGVmYXVsdCJdKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUpfXJldHVybiBvKHQsZSksdH0oYyk7ci5NZXNzYWdlRGF0YU9iamVjdFNjaGVtYT1sO3ZhciBmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUsYyl7aSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxzLGEsdSksdGhpcy5fYWNjZXNzQ29udHJvbFBvbGljeT1jfXJldHVybiBvKHQsZSksdH0oYyk7ci5IeXBlcnR5RGF0YU9iamVjdFNjaGVtYT1mO3ZhciBoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8scyxhLHUsYyl7aSh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxzLGEsdSxjKX1yZXR1cm4gbyh0LGUpLHR9KGYpO3IuQ29tbXVuaWNhdGlvbkRhdGFPYmplY3RTY2hlbWE9aDt2YXIgcD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLHMsYSx1LGMpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUsYyl9cmV0dXJuIG8odCxlKSx0fShmKTtyLkNvbm5lY3Rpb25EYXRhT2JqZWN0U2NoZW1hPXA7dmFyIGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxzLGEsdSxjKXtpKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLHMsYSx1LGMpfXJldHVybiBvKHQsZSksdH0oZik7ci5JZGVudGlmeURhdGFPYmplY3RTY2hlbWE9ZDt2YXIgeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLHMsYSx1LGMpe2kodGhpcyx0KSxuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG8scyxhLHUsYyl9cmV0dXJuIG8odCxlKSx0fShmKTtyLkNvbnRleHREYXRhT2JqZWN0U2NoZW1hPXksclsiZGVmYXVsdCJdPWN9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo5OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxNSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxN31dLDEwMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciB1PWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLGM9YSh1KSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8saSxhLHUsYyxsKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLGksYSx1KSx0aGlzLl9jb25maWd1cmF0aW9uPXt9LHRoaXMuX2NvbnN0cmFpbnRzPXt9LHRoaXMuX3BvbGljaWVzPXt9LHRoaXMuX21lc3NhZ2VTY2hlbWE9bnVsbCx0aGlzLl9oeXBlcnR5VHlwZT1jLHRoaXMuX2RhdGFPYmplY3RzPWx9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6Imh5cGVydHlUeXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHlwZXJ0eVR5cGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5faHlwZXJ0eVR5cGU9ZSl9fSx7a2V5OiJkYXRhT2JqZWN0cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFPYmplY3RzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2RhdGFPYmplY3RzPWUpfX0se2tleToiY29uZmlndXJhdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb259LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uZmlndXJhdGlvbj1lKX19LHtrZXk6ImNvbnN0cmFpbnRzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uc3RyYWludHN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fY29uc3RyYWludHM9ZSl9fSx7a2V5OiJtZXNzYWdlU2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZVNjaGVtYX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9tZXNzYWdlU2NoZW1hPWUpfX0se2tleToicG9saWNpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xpY2llc30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9wb2xpY2llcz1lKX19XSksdH0oY1siZGVmYXVsdCJdKSxmPXt9O3IuUnVudGltZUh5cGVydHlDYXBhYmlsaXR5VHlwZT1mO3ZhciBoPXtDT01NVU5JQ0FUT1I6ImNvbW11bmljYXRvciIsSURFTlRJVFk6ImlkZW50aXR5IixDT05URVhUOiJjb250ZXh0In07ci5IeXBlcnR5VHlwZT1oLHJbImRlZmF1bHQiXT1sfSx7Ii4vQ2F0YWxvZ3VlRGF0YU9iamVjdCI6OTksImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTAzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHU9ZSgiLi9DYXRhbG9ndWVEYXRhT2JqZWN0IiksYz1hKHUpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxpLGEsdSxjLGwsZil7cyh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxpLGEsdSksdGhpcy5fcnVudGltZVR5cGU9YyxsP3RoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9bDp0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzPXt9LGY/dGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9Zjp0aGlzLl9wcm90b2NvbENhcGFiaWxpdGllcz17fX1yZXR1cm4gbyh0LGUpLGkodCxbe2tleToicnVudGltZVR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ydW50aW1lVHlwZX0sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9ydW50aW1lVHlwZT1lKX19LHtrZXk6Imh5cGVydHlDYXBhYmlsaXRpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXM9ZSl9fSx7a2V5OiJwcm90b2NvbENhcGFiaWxpdGllcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXN9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9ZSl9fV0pLHR9KGNbImRlZmF1bHQiXSksZj17QlJPV1NFUjoiYnJvd3NlciIsU1RBTkRBTE9ORToic3RhbmRhbG9uZSIsU0VSVkVSOiJzZXJ2ZXIiLEdBVEVXQVk6ImdhdGV3YXkifTtyLlJ1bnRpbWVUeXBlPWY7dmFyIGg9e01JQzoibWljIixDQU1FUkE6ImNhbWVyYSIsU0VOU09SOiJzZW5zb3IiLFdFQlJUQzoid2VicnRjIixPUlRDOiJvcnRjIn07ci5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHlUeXBlPWg7dmFyIHA9e0hUVFA6Imh0dHAiLEhUVFBTOiJodHRwcyIsV1M6IndzIixXU1M6IndzcyIsQ09BUDoiY29hcCIsREFUQUNIQU5FTDoiZGF0YWNoYW5uZWwifTtyLlJ1bnRpbWVQcm90b2NvbENhcGFiaWxpdHlUeXBlPXAsclsiZGVmYXVsdCJdPWx9LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo5OSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMDQ6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL0NhdGFsb2d1ZURhdGFPYmplY3QiKSxjPWEodSksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLGksYSx1LGMsbCl7cyh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxpLGEsdSksdGhpcy5fY29uZmlndXJhdGlvbj1jLHRoaXMuX3BvbGljaWVzPWx9cmV0dXJuIG8odCxlKSxpKHQsW3trZXk6ImNvbmZpZ3VyYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25maWd1cmF0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fY29uZmlndXJhdGlvbj1lfX0se2tleToicG9saWNpZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xpY2llc30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3BvbGljaWVzPWV9fV0pLHR9KGNbImRlZmF1bHQiXSk7clsiZGVmYXVsdCJdPWwsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuL0NhdGFsb2d1ZURhdGFPYmplY3QiOjk5LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IjoxNSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjoxNiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxN31dLDEwNTpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvZ2V0IilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyIpWyJkZWZhdWx0Il0saT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciB1PWUoIi4vQ2F0YWxvZ3VlRGF0YU9iamVjdCIpLGM9YSh1KSxsPWUoIi4vSHlwZXJ0eVJ1bnRpbWVEZXNjcmlwdG9yIiksZj0oYShsKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixvLGksYSx1LGMsbCxmKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixvLGksYSx1KSx0aGlzLl9tZXNzYWdlU2NoZW1hcz1jLGw/dGhpcy5fY29uZmlndXJhdGlvbj1sOnRoaXMuX2NvbmZpZ3VyYXRpb249e30sZj90aGlzLl9jb25zdHJhaW50cz1mOnRoaXMuX2NvbnN0cmFpbnRzPXt9fXJldHVybiBvKHQsZSksaSh0LFt7a2V5OiJtZXNzYWdlU2NoZW1hcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VTY2hlbWFzfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX21lc3NhZ2VTY2hlbWFzPWUpfX0se2tleToiY29uc3RyYWludHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25zdHJhaW50c30sc2V0OmZ1bmN0aW9uKGUpe2UmJih0aGlzLl9jb25zdHJhaW50cz1lKX19LHtrZXk6ImNvbmZpZ3VyYXRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25maWd1cmF0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2NvbmZpZ3VyYXRpb249ZSl9fV0pLHR9KGNbImRlZmF1bHQiXSkpO3JbImRlZmF1bHQiXT1mLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9DYXRhbG9ndWVEYXRhT2JqZWN0Ijo5OSwiLi9IeXBlcnR5UnVudGltZURlc2NyaXB0b3IiOjEwMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMDY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpe28odGhpcyxlKSx0aGlzLl9zb3VyY2VDb2RlPXIsdGhpcy5fc291cmNlQ29kZUNsYXNzbmFtZT10LHRoaXMuX2VuY29kaW5nPW51bGwsdGhpcy5fc2lnbmF0dXJlPW51bGx9cmV0dXJuIG4oZSxbe2tleToic291cmNlQ29kZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZUNvZGV9LHNldDpmdW5jdGlvbihlKXtlJiYodGhpcy5fc291cmNlQ29kZT1lKX19LHtrZXk6InNvdXJjZUNvZGVDbGFzc25hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VDb2RlQ2xhc3NuYW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NvdXJjZUNvZGVDbGFzc25hbWU9ZSl9fSx7a2V5OiJlbmNvZGluZyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuY29kaW5nfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX2VuY29kaW5nPWUpfX0se2tleToic2lnbmF0dXJlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2lnbmF0dXJlfSxzZXQ6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX3NpZ25hdHVyZT1lKX19XSksZX0oKTtyWyJkZWZhdWx0Il09aSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTN9XSwxMDc6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpLHMpe28odGhpcyxlKSx0aGlzLmlkPXQsdGhpcy5mcm9tPXIsdGhpcy50bz1uLHRoaXMudHlwZT1pLHRoaXMuYm9keT1zfXJldHVybiBuKGUsW3trZXk6ImFzc2VydElkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UsIHRva2VuIHRvIGJlIHJlbW92ZWQsIGFuZCBhc3NlcnRlZElkZW50aXR5IG11c3QgYmUgcHJvdmlkZWQiKTt2YXIgcj10aGlzLmJvZHk7cmV0dXJuIHIuaWRUb2tlbj1udWxsLHIuYXNzZXJ0ZWRJZGVudGl0eT10LHRoaXMuYm9keT1yLHRoaXN9fSx7a2V5OiJhZGRJZFRva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UsIHRva2VuIHRvIGJlIGFkZGVkLCBtdXN0IGJlIHByb3ZpZGVkIik7dmFyIHQ9dGhpcy5ib2R5O3JldHVybiB0LmlkVG9rZW49ZSx0aGlzLmJvZHk9dCx0aGlzfX0se2tleToiYWRkQWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigibWVzc2FnZSwgdG9rZW4gdG8gYmUgYWRkZWQsIG11c3QgYmUgcHJvdmlkZWQiKTt2YXIgdD10aGlzLmJvZHk7cmV0dXJuIHQuYWNjZXNzVG9rZW49ZSx0aGlzLmJvZHk9dCx0aGlzfX1dKSxlfSgpO3IuTWVzc2FnZT1pO3ZhciBzPXtDUkVBVEU6ImNyZWF0ZSIsUkVBRDoicmVhZCIsVVBEQVRFOiJ1cGRhdGUiLERFTEVURToiZGVsZXRlIixTVUJTQ1JJQkU6InN1YnNjcmliZSIsVU5TVUJTQ1JJQkU6InVuc3Vic2NyaWJlIixSRVNQT05TRToicmVzcG9uc2UiLEZPUldBUkQ6ImZvcndhcmQifTtyLk1lc3NhZ2VUeXBlPXMsclsiZGVmYXVsdCJdPWl9LHsiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxM31dLDEwODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3ZhciB0PWEoZSkucmVkdWNlKGZ1bmN0aW9uKHQscil7cmV0dXJuIHRbZVtyXV09cix0fSx7fSk7cmV0dXJuIHUoYShlKS5yZWR1Y2UoZnVuY3Rpb24odCxyKXtyZXR1cm4gdFtyXT1lW3JdLHR9LGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSkpfXZhciBvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxhPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpWyJkZWZhdWx0Il0sdT1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2ZyZWV6ZSIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuRW51bT1uO3ZhciBjPWZ1bmN0aW9uIG0oZSx0LHIsbixpKXtvKHRoaXMsbSksdGhpcy5pZFRva2VuPWUsdGhpcy5hY2Nlc3NUb2tlbj10LHRoaXMucmVzb3VyY2U9cix0aGlzLnNjaGVtYT1uLHRoaXMuYXNzZXJ0ZWRJZGVudGl0eT1pfTtyLk1lc3NhZ2VCb2R5PWM7dmFyIGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixzLGEsdSxjKXtpZihvKHRoaXMsdCksIWUpdGhyb3cgbmV3IEVycm9yKCJUaGUgdmFsdWUgcGFyYW1ldGVyIGlzIG51bGwiKTtpKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsbixzLGEsdSxjLHUsYyksdGhpcy52YWx1ZT1lLHImJih0aGlzLnBvbGljeT1yKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuQ3JlYXRlTWVzc2FnZUJvZHk9bDt2YXIgZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1LGMsbCl7byh0aGlzLHQpLGkoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbixzLGEpLHUmJih0aGlzLmF0dHJpYnV0ZT11KSxjJiYodGhpcy5jcml0ZXJpYVN5bnRheD1jKSxsJiYodGhpcy5jcml0ZXJpYT1sKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuUmVhZE1lc3NhZ2VCb2R5PWY7dmFyIGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbixzLGEsdSl7byh0aGlzLHQpLGkoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbixzLGEpLHUmJih0aGlzLmF0dHJpYnV0ZT11KX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuRGVsZXRlTWVzc2FnZUJvZHk9aDt2YXIgcD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1LGMpe28odGhpcyx0KSxpKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksImNvbnN0cnVjdG9yIix0aGlzKS5jYWxsKHRoaXMsZSxyLG4scyxhKSx0aGlzLmF0dHJpYnV0ZT11LHRoaXMudmFsdWU9Y31yZXR1cm4gcyh0LGUpLHR9KGMpO3IuVXBkYXRlTWVzc2FnZUJvZHk9cDt2YXIgZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUscixuLHMsYSx1KXtvKHRoaXMsdCksaShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixuLHMsYSksdGhpcy5tZXNzYWdlPXV9cmV0dXJuIHModCxlKSx0fShjKTtyLkZvcndhcmRNZXNzYWdlQm9keT1kO3ZhciB5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG4scyxhKXtvKHRoaXMsdCksaShPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUscixuKSxzJiYodGhpcy5jb2RlPXMsdGhpcy5kZXNjcmlwdGlvbj12W3NdKSxhJiYodGhpcy52YWx1ZT1hKX1yZXR1cm4gcyh0LGUpLHR9KGMpO3IuUmVzcG9uc2VNZXNzYWdlQm9keT15O3ZhciBiPW4oezEwMDoiMTAwIiwxMDE6IjEwMSIsMjAwOiIyMDAiLDIwMToiMjAxIiwyMDI6IjIwMiIsMjAzOiIyMDMiLDIwNDoiMjA0IiwyMDU6IjIwNSIsMjA2OiIyMDYiLDMwMDoiMzAwIiwzMDE6IjMwMSIsMzAyOiIzMDIiLDMwMzoiMzAzIiwzMDQ6IjMwNCIsMzA1OiIzMDUiLDMwNzoiMzA3Iiw0MDA6IjQwMCIsNDAxOiI0MDEiLDQwMjoiNDAyIiw0MDM6IjQwMyIsNDA0OiI0MDQiLDQwNToiNDA1Iiw0MDY6IjQwNiIsNDA3OiI0MDciLDQwODoiNDA4Iiw0MDk6IjQwOSIsNDEwOiI0MTAiLDQxMToiNDExIiw0MTI6IjQxMiIsNDEzOiI0MTMiLDQxNDoiNDE0Iiw0MTU6IjQxNSIsNDE2OiI0MTYiLDQxNzoiNDE3Iiw0MjY6IjQyNiIsNTAwOiI1MDAiLDUwMToiNTAxIiw1MDI6IjUwMiIsNTAzOiI1MDMiLDUwNDoiNTA0Iiw1MDU6IjUwNSJ9KTtyLlJFU1BPTlNFX0NPREU9Yjt2YXIgdj1uKHsxMDA6IkNvbnRpbnVlIiwxMDE6IlN3aXRjaGluZyBQcm90b2NvbHMiLDIwMDoiT0siLDIwMToiQ3JlYXRlZCIsMjAyOiJBY2NlcHRlZCIsMjAzOiJOb24tQXV0aG9yaXRhdGl2ZSBJbmZvcm1hdGlvbiIsMjA0OiJObyBDb250ZW50IiwyMDU6IlJlc2V0IENvbnRlbnQiLDIwNjoiUGFydGlhbCBDb250ZW50IiwzMDA6Ik11bHRpcGxlIENob2ljZXMiLDMwMToiTW92ZWQgUGVybWFuZW50bHkiLDMwMjoiRm91bmQiLDMwMzoiU2VlIE90aGVyIiwzMDQ6Ik5vdCBNb2RpZmllZCIsMzA1OiJVc2UgUHJveHkiLDMwNzoiVGVtcG9yYXJ5IFJlZGlyZWN0Iiw0MDA6IkJhZCBSZXF1ZXN0Iiw0MDE6IlVuYXV0aG9yaXplZCIsNDAyOiJQYXltZW50IFJlcXVpcmVkIiw0MDM6IkZvcmJpZGRlbiIsNDA0OiJOb3QgRm91bmQiLDQwNToiTWV0aG9kIE5vdCBBbGxvd2VkIiw0MDY6Ik5vdCBBY2NlcHRhYmxlIiw0MDc6IlByb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkIiw0MDg6IlJlcXVlc3QgVGltZW91dCIsNDA5OiJDb25mbGljdCIsNDEwOiJHb25lIiw0MTE6Ikxlbmd0aCBSZXF1aXJlZCIsNDEyOiJQcmVjb25kaXRpb24gRmFpbGVkIiw0MTM6IlBheWxvYWQgVG9vIExhcmdlIiw0MTQ6IlJlcXVlc3QtVVJJIFRvbyBMb25nIiw0MTU6IlVuc3VwcG9ydGVkIE1lZGlhIFR5cGUiLDQxNjoiUmFuZ2UgTm90IFNhdGlzZmlhYmxlIiw0MTc6IkV4cGVjdGF0aW9uIEZhaWxlZCIsNDI2OiJVcGdyYWRlIFJlcXVpcmVkIiw1MDA6IkludGVybmFsIFNlcnZlciBFcnJvciIsNTAxOiJOb3QgSW1wbGVtZW50ZWQiLDUwMjoiQmFkIEdhdGV3YXkiLDUwMzoiU2VydmljZSBVbmF2YWlsYWJsZSIsNTA0OiJHYXRld2F5IFRpbWUtb3V0Iiw1MDU6IkhUVFAgVmVyc2lvbiBOb3QgU3VwcG9ydGVkIn0pO3IuUkVBU09OX1BIUkFTRT12LHJbImRlZmF1bHQiXT1jfSx7ImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3QvZnJlZXplIjozLCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTZ9XSwxMDk6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL3JlZ2VuZXJhdG9yIilbImRlZmF1bHQiXSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBjPWUoIi4uL3JlVEhJTktPYmplY3QvUmV0aGlua09iamVjdC5qcyIpLGw9dShjKSxmPWUoIi4vTWVzc2FnZS5qcyIpLGg9dShmKSxwPWUoIi4vTWVzc2FnZUJvZHkuanMiKSxkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyKXtzKHRoaXMsdCksbihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJjb25zdHJ1Y3RvciIsdGhpcykuY2FsbCh0aGlzLGUsciksdGhpcy5teUdlbmVyYXRvcj0obmV3IHkpLmlkTWFrZXIoKX1yZXR1cm4gbyh0LGUpLGkodCxbe2tleToidmFsaWRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuKE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnByb3RvdHlwZSksInZhbGlkYXRlIix0aGlzKS5jYWxsKHRoaXMsZSl9fSx7a2V5OiJjcmVhdGVDcmVhdGVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7aWYoIWV8fCF0fHwhcil0aHJvdyBuZXcgRXJyb3IoImZyb20sIHRvLCBhbmQgdmFsdWUgb2Ygb2JqZWN0IHRvIGJlIGNyZWF0ZWQgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBwLkNyZWF0ZU1lc3NhZ2VCb2R5KHIsbixudWxsLG51bGwsbnVsbCxudWxsLG51bGwpLHM9bmV3IGhbImRlZmF1bHQiXShvLGUsdCxmLk1lc3NhZ2VUeXBlLkNSRUFURSxpKTtyZXR1cm4gc319LHtrZXk6ImNyZWF0ZUZvcndhcmRNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdHx8IXIpdGhyb3cgbmV3IEVycm9yKCJmcm9tLCB0bywgYW5kIG1lc3NhZ2UgdG8gZm9yd2FyZCBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLG89bmV3IHAuRm9yd2FyZE1lc3NhZ2VCb2R5KG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxyKSxpPW5ldyBoWyJkZWZhdWx0Il0obixlLHQsZi5NZXNzYWdlVHlwZS5GT1JXQVJELG8pO3JldHVybiBpfX0se2tleToiY3JlYXRlRGVsZXRlTWVzc2FnZVJlcXVlc3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoImZyb20gYW5kIHRvIHBhcmFtZXRlcnMgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBwLkRlbGV0ZU1lc3NhZ2VCb2R5KG51bGwsbnVsbCxyLG4sbnVsbCxudWxsKSxzPW5ldyBoWyJkZWZhdWx0Il0obyxlLHQsZi5NZXNzYWdlVHlwZS5ERUxFVEUsaSk7cmV0dXJuIHN9fSx7a2V5OiJjcmVhdGVVcGRhdGVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgYW5kIHRvIGFuZCB2YWx1ZSBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBpPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLHM9bmV3IHAuVXBkYXRlTWVzc2FnZUJvZHkobnVsbCxudWxsLG4sbnVsbCxudWxsLG8sciksYT1uZXcgaFsiZGVmYXVsdCJdKGksZSx0LGYuTWVzc2FnZVR5cGUuVVBEQVRFLHMpO3JldHVybiBhfX0se2tleToiY3JlYXRlUmVhZE1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighZXx8IXR8fCFyKXRocm93IG5ldyBFcnJvcigiZnJvbSwgdG8gYW5kIHRoZSByZXNvdXJjZSB0byByZWFkIGZyb20gTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz10aGlzLm15R2VuZXJhdG9yLm5leHQoKS52YWx1ZSxpPW5ldyBwLlJlYWRNZXNzYWdlQm9keShudWxsLG51bGwscixudWxsLG51bGwsbixudWxsLG51bGwpLHM9bmV3IGhbImRlZmF1bHQiXShvLGUsdCxmLk1lc3NhZ2VUeXBlLlJFQUQsaSk7cmV0dXJuIHN9fSx7a2V5OiJjcmVhdGVTdWJzY3JpYmVNZXNzYWdlUmVxdWVzdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdHx8IXIpdGhyb3cgbmV3IEVycm9yKCJmcm9tLCB0byBhbmQgdGhlIHJlc291cmNlIHRvIHN1YnNjcmliZSB0byBNVVNUIGJlIHNwZWNpZmllZCIpO3ZhciBuPXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlLG89bmV3IHAuTWVzc2FnZUJvZHkobnVsbCxudWxsLHIsbnVsbCxudWxsKSxpPW5ldyBoWyJkZWZhdWx0Il0obixlLHQsZi5NZXNzYWdlVHlwZS5TVUJTQ1JJQkUsbyk7cmV0dXJuIGl9fSx7a2V5OiJjcmVhdGVVbnN1YnNjcmliZU1lc3NhZ2VSZXF1ZXN0Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7aWYoIWV8fCF0fHwhcil0aHJvdyBuZXcgRXJyb3IoImZyb20sIHRvIGFuZCB0aGUgcmVzb3VyY2UgdG8gc3Vic2NyaWJlIHRvIE1VU1QgYmUgc3BlY2lmaWVkIik7dmFyIG49dGhpcy5teUdlbmVyYXRvci5uZXh0KCkudmFsdWUsbz1uZXcgcC5NZXNzYWdlQm9keShudWxsLG51bGwscixudWxsLG51bGwpLGk9bmV3IGhbImRlZmF1bHQiXShuLGUsdCxmLk1lc3NhZ2VUeXBlLlVOU1VCU0NSSUJFLG8pO3JldHVybiBpfX0se2tleToiY3JlYXRlTWVzc2FnZVJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoInJlc3BvbnNlIENvZGUgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbz1uZXcgcC5SZXNwb25zZU1lc3NhZ2VCb2R5KG51bGwsbnVsbCxudWxsLHQscixuKTtyZXR1cm4gbmV3IGhbImRlZmF1bHQiXShlLmlkLGUudG8sZS5mcm9tLGYuTWVzc2FnZVR5cGUuUkVTUE9OU0Usbyl9fSx7a2V5OiJnZW5lcmF0ZU1lc3NhZ2VSZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2lmKCFlfHwhdCl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UgYW5kIHJlc3BvbnNlIGNvZGUgTVVTVCBiZSBzcGVjaWZpZWQiKTt2YXIgbj1lLmJvZHksbz1uLmlkVG9rZW4saT1uLmFjY2Vzc1Rva2VuLHM9bi5yZXNvdXJjZSxhPW5ldyBwLlJlc3BvbnNlTWVzc2FnZUJvZHkobyxpLHMsdCxyKSx1PXRoaXMubXlHZW5lcmF0b3IubmV4dCgpLnZhbHVlO3JldHVybiBuZXcgaFsiZGVmYXVsdCJdKHUsZS50byxlLmZyb20sZi5NZXNzYWdlVHlwZS5SRVNQT05TRSxhKX19XSksdH0obFsiZGVmYXVsdCJdKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ModGhpcyxlKX1yZXR1cm4gaShlLFt7a2V5OiJpZE1ha2VyIix2YWx1ZTphLm1hcmsoZnVuY3Rpb24gdCgpe3ZhciBlO3JldHVybiBhLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6ZT0xO2Nhc2UgMTppZighKDFlNT5lKSl7dC5uZXh0PTY7YnJlYWt9cmV0dXJuIHQubmV4dD00LGUrKztjYXNlIDQ6dC5uZXh0PTE7YnJlYWs7Y2FzZSA2OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMpfSl9XSksZX0oKTtyLklkR2VuZXJhdG9yPXksclsiZGVmYXVsdCJdPWR9LHsiLi4vcmVUSElOS09iamVjdC9SZXRoaW5rT2JqZWN0LmpzIjoxMTAsIi4vTWVzc2FnZS5qcyI6MTA3LCIuL01lc3NhZ2VCb2R5LmpzIjoxMDgsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiOjE1LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOjE2LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3LCJiYWJlbC1ydW50aW1lL3JlZ2VuZXJhdG9yIjo5NX1dLDExMDpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBzPWUoInR2NCIpLGE9aShzKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIpe28odGhpcyxlKTt0aGlzLnZhbGlkYXRpb249dCx0aGlzLnNjaGVtYT1yfXJldHVybiBuKGUsW3trZXk6InZhbGlkYXRlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zY2hlbWE/YVsiZGVmYXVsdCJdLnZhbGlkYXRlKGUsdGhpcy5zY2hlbWEpOiExfX1dKSxlfSgpO3IuUmV0aGlua09iamVjdD11LHJbImRlZmF1bHQiXT11fSx7ImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIjoxMSwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyI6MTMsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTcsdHY0Ojk4fV0sMTExOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWUoIi4vY2F0YWxvZ3VlLWZhY3RvcnkvQ2F0YWxvZ3VlRGF0YU9iamVjdEZhY3RvcnkiKSxpPW4obykscz1lKCIuL21lc3NhZ2UtZmFjdG9yeS9NZXNzYWdlRmFjdG9yeSIpLGE9bihzKSx1PWUoIi4vc3luY2hlci9TeW5jaGVyIiksYz1uKHUpLGw9ZSgiLi9zeW5jaGVyL0RhdGFPYmplY3RSZXBvcnRlciIpLGY9bihsKSxoPWUoIi4vc3luY2hlci9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxwPW4oaCksZD1lKCIuL2NhdGFsb2d1ZS1mYWN0b3J5L0h5cGVydHlEZXNjcmlwdG9yIikseT1uKGQpLGI9ZSgiLi9jYXRhbG9ndWUtZmFjdG9yeS9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIiksdj1uKGIpLG09ZSgiLi9jYXRhbG9ndWUtZmFjdG9yeS9Tb3VyY2VQYWNrYWdlIiksZz1uKG0pO3IuQ2F0YWxvZ3VlRmFjdG9yeT1pWyJkZWZhdWx0Il0sci5NZXNzYWdlRmFjdG9yeT1hWyJkZWZhdWx0Il0sci5TeW5jaGVyPWNbImRlZmF1bHQiXSxyLkRhdGFPYmplY3RSZXBvcnRlcj1mWyJkZWZhdWx0Il0sci5EYXRhT2JqZWN0T2JzZXJ2ZXI9cFsiZGVmYXVsdCJdLHIuSHlwZXJ0eURlc2NyaXB0b3I9eVsiZGVmYXVsdCJdLHIuUHJvdG9jb2xTdHViRGVzY3JpcHRvcj12WyJkZWZhdWx0Il0sci5Tb3VyY2VQYWNrYWdlPWdbImRlZmF1bHQiXX0seyIuL2NhdGFsb2d1ZS1mYWN0b3J5L0NhdGFsb2d1ZURhdGFPYmplY3RGYWN0b3J5IjoxMDAsIi4vY2F0YWxvZ3VlLWZhY3RvcnkvSHlwZXJ0eURlc2NyaXB0b3IiOjEwMiwiLi9jYXRhbG9ndWUtZmFjdG9yeS9Qcm90b2NvbFN0dWJEZXNjcmlwdG9yIjoxMDUsIi4vY2F0YWxvZ3VlLWZhY3RvcnkvU291cmNlUGFja2FnZSI6MTA2LCIuL21lc3NhZ2UtZmFjdG9yeS9NZXNzYWdlRmFjdG9yeSI6MTA5LCIuL3N5bmNoZXIvRGF0YU9iamVjdE9ic2VydmVyIjoxMTQsIi4vc3luY2hlci9EYXRhT2JqZWN0UmVwb3J0ZXIiOjExNSwiLi9zeW5jaGVyL1N5bmNoZXIiOjExOCwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IjoxN31dLDExMjpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2NvcmUtanMvcHJvbWlzZSIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL1N5bmNPYmplY3QiKSxjPWEodSksbD1lKCIuL0RhdGFPYmplY3RDaGlsZCIpLGY9YShsKSxoPWUoIi4uL3V0aWxzL3V0aWxzLmpzIikscD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyLG4saSxzLGEpe28odGhpcyxlKTt2YXIgdT10aGlzO3UuX3N5bmNoZXI9dCx1Ll91cmw9cix1Ll9zY2hlbWE9bix1Ll9zdGF0dXM9aSx1Ll9zeW5jT2JqPW5ldyBjWyJkZWZhdWx0Il0ocyksdS5fY2hpbGRyZW5zPWEsdS5fdmVyc2lvbj0wLHUuX2NoaWxkSWQ9MCx1Ll9jaGlsZHJlbk9iamVjdHM9e30sdS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sdS5fb3duZXI9dC5fb3duZXIsdS5fYnVzPXQuX2J1c31yZXR1cm4gbihlLFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrIi9jaGlsZHJlbi8iO3QuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24obil7dmFyIG89cituLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24ocil7aWYoY29uc29sZS5sb2coIkRhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAiLHIpLHIuZnJvbSE9PWUuX293bmVyKXN3aXRjaChyLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkNoaWxkcmVuQ3JlYXRlKHIpO2JyZWFrO2Nhc2UiZGVsZXRlIjpjb25zb2xlLmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksaShlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5PYmplY3RzW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InBhdXNlIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93Ik5vdCBpbXBsZW1lbnRlZCJ9fSx7a2V5OiJyZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3ciTm90IGltcGxlbWVudGVkIn19LHtrZXk6ImFkZENoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5fY2hpbGRJZCsrO3ZhciBuPXIuX293bmVyKyIjIityLl9jaGlsZElkLG89ci5fdXJsKyIvY2hpbGRyZW4vIitlLGk9e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLl9vd25lcix0bzpvLGJvZHk6e3Jlc291cmNlOm4sdmFsdWU6dH19O3JldHVybiBuZXcgcyhmdW5jdGlvbihlKXt2YXIgcz1yLl9idXMucG9zdE1lc3NhZ2UoaSk7Y29uc29sZS5sb2coImNyZWF0ZS1yZXBvcnRlci1jaGlsZCggIityLl9vd25lcisiICk6ICIsaSk7dmFyIGE9bmV3IGZbImRlZmF1bHQiXShyLHIuX293bmVyLG4scyx0KTthLm9uQ2hhbmdlKGZ1bmN0aW9uKGUpe3IuX29uQ2hhbmdlKGUse3BhdGg6byxjaGlsZElkOm59KX0pLHIuX2NoaWxkcmVuT2JqZWN0c1tuXT1hLGUoYSl9KX19LHtrZXk6Im9uQWRkQ2hpbGRyZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyPWV9fSx7a2V5OiJfb25DaGlsZHJlbkNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZTtjb25zb2xlLmxvZygiY3JlYXRlLW9ic2VydmVyLWNoaWxkKCAiK3QuX293bmVyKyIgKTogIixlKTt2YXIgbj1uZXcgZlsiZGVmYXVsdCJdKHQsZS5mcm9tLHIsMCxlLmJvZHkudmFsdWUpO3QuX2NoaWxkcmVuT2JqZWN0c1tyXT1uLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc291cmNlOnQuX293bmVyfX0pfSk7dmFyIG89e3R5cGU6ZS50eXBlLGZyb206ZS5mcm9tLHVybDplLnRvLHZhbHVlOmUuYm9keS52YWx1ZSxjaGlsZElkOnJ9O3QuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiYoY29uc29sZS5sb2coIkFERC1DSElMRFJFTi1FVkVOVDogIixvKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSl9fSx7a2V5OiJfb25DaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKyssIm9uIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6InVwZGF0ZSIsZnJvbTpyLl91cmwsdG86ci5fdXJsKyIvY2hhbmdlcyIsYm9keTp7dmVyc2lvbjpyLl92ZXJzaW9uLGF0dHJpYnV0ZTplLmZpZWxkfX07ZS5vVHlwZT09PXUuT2JqZWN0VHlwZS5PQkpFQ1Q/ZS5jVHlwZSE9PXUuQ2hhbmdlVHlwZS5SRU1PVkUmJihuLmJvZHkudmFsdWU9ZS5kYXRhKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT11LkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OiJfY2hhbmdlT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPT09dC5ib2R5LnZlcnNpb24pe3IuX3ZlcnNpb24rKzt2YXIgbj10LmJvZHkuYXR0cmlidXRlLG89KDAsaC5kZWVwQ2xvbmUpKHQuYm9keS52YWx1ZSksaT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5LmF0dHJpYnV0ZVR5cGU9PT11Lk9iamVjdFR5cGUuQVJSQVkpaWYodC5ib2R5Lm9wZXJhdGlvbj09PXUuQ2hhbmdlVHlwZS5BREQpe3ZhciBzPWkub2JqLGE9aS5sYXN0O0FycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkocyxbYSwwXS5jb25jYXQobykpfWVsc2UgaWYodC5ib2R5Lm9wZXJhdGlvbj09PXUuQ2hhbmdlVHlwZS5SRU1PVkUpe3ZhciBzPWkub2JqLGE9aS5sYXN0O3Muc3BsaWNlKGEsbyl9ZWxzZSBpLm9ialtpLmxhc3RdPW87ZWxzZSB0LmJvZHkudmFsdWU/aS5vYmpbaS5sYXN0XT1vOmRlbGV0ZSBpLm9ialtpLmxhc3RdfWVsc2UgY29uc29sZS5sb2coIlVOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICIrci5fdmVyc2lvbisiLCBtc2cgPT4gIit0LmJvZHkudmVyc2lvbisiKSIpfX0se2tleToiX2NoYW5nZUNoaWxkcmVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2NvbnNvbGUubG9nKCJDaGFuZ2UgY2hpbGRyZW46ICIsdC5fb3duZXIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49dC5fY2hpbGRyZW5PYmplY3RzW3JdO24/dC5fY2hhbmdlT2JqZWN0KG4uX3N5bmNPYmosZSk6Y29uc29sZS5sb2coIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogIixyKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6InN0YXR1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6ImRhdGEiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OiJjaGlsZHJlbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuT2JqZWN0c319XSksZX0oKTtyWyJkZWZhdWx0Il09cCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMTksIi4vRGF0YU9iamVjdENoaWxkIjoxMTMsIi4vU3luY09iamVjdCI6MTE3LCJiYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2tleXMiOjYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTEzOltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2ludGVyb3AtcmVxdWlyZS1kZWZhdWx0IilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHM9ZSgiLi9TeW5jT2JqZWN0IiksYT1pKHMpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQscixuLGkscyl7byh0aGlzLGUpO3ZhciB1PXRoaXM7dS5fcGFyZW50PXQsdS5fb3duZXI9cix1Ll9jaGlsZElkPW4sdS5fbXNnSWQ9aSx1Ll9zeW5jT2JqPW5ldyBhWyJkZWZhdWx0Il0ocyksdS5fYnVzPXQuX2J1cyx1Ll9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBuKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9vd25lcixmdW5jdGlvbih0KXsicmVzcG9uc2UiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJihjb25zb2xlLmxvZygiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6Iix0KSxlLl9vblJlc3BvbnNlKHQpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2RlbGV0ZSBlLl9wYXJlbnQuX2NoaWxkcmVuW2UuX2NoaWxkSWRdLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24odCl7ZSh0KX0pfX0se2tleToib25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihyKX19LHtrZXk6ImNoaWxkSWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19XSksZX0oKTtyWyJkZWZhdWx0Il09dSx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vU3luY09iamVjdCI6MTE3LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTE0OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9nZXQiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLHM9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGE9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIilbImRlZmF1bHQiXSx1PWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBjPWUoIi4vRGF0YU9iamVjdCIpLGw9dShjKSxmPXtBTlk6ImFueSIsU1RBUlQ6InN0YXJ0IixFWEFDVDoiZXhhY3QifSxoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSxyLG8saSxhLHUsYyl7cyh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxpLGEsdSk7dmFyIGw9dGhpcztsLl92ZXJzaW9uPWMsbC5fZmlsdGVycz17fSwKbC5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKGUpe2wuX29uRmlsdGVyKGUpfSksbC5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4gbyh0LGUpLGkodCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe24oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiX2FsbG9jYXRlTGlzdGVuZXJzIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCsiL2NoYW5nZXMiLGZ1bmN0aW9uKHQpeyJ1cGRhdGUiPT09dC50eXBlJiYoY29uc29sZS5sb2coIkRhdGFPYmplY3RPYnNlcnZlci0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe24oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiX3JlbGVhc2VMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19fSx7a2V5OiJ1bnN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtjb25zb2xlLmxvZygiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uQ2hhbmdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTpmLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKCIqIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9Zi5BTlk6KG4udHlwZT1mLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6Il9vbkZpbHRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczthKHQuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49dC5fZmlsdGVyc1tyXTtuLnR5cGU9PT1mLkFOWT9uLmNhbGxiYWNrKGUpOm4udHlwZT09PWYuU1RBUlQ/MD09PWUuZmllbGQuaW5kZXhPZihyKSYmbi5jYWxsYmFjayhlKTpuLnR5cGU9PT1mLkVYQUNUJiZlLmZpZWxkPT09ciYmbi5jYWxsYmFjayhlKX0pfX1dKSx0fShsWyJkZWZhdWx0Il0pO3JbImRlZmF1bHQiXT1oLHQuZXhwb3J0cz1yWyJkZWZhdWx0Il19LHsiLi9EYXRhT2JqZWN0IjoxMTIsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMTU6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0scz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il0sYT1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiKVsiZGVmYXVsdCJdO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgdT1lKCIuL0RhdGFPYmplY3QiKSxjPWEodSksbD1lKCIuLi91dGlscy91dGlscy5qcyIpLGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHIsbyxpLGEsdSl7cyh0aGlzLHQpLG4oT2JqZWN0LmdldFByb3RvdHlwZU9mKHQucHJvdG90eXBlKSwiY29uc3RydWN0b3IiLHRoaXMpLmNhbGwodGhpcyxlLHIsbyxpLGEsdSk7dmFyIGM9dGhpcztjLl9zdWJzY3JpcHRpb25zPXt9LGMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLSIrcisiLVNFTkQ6ICIsZSksYy5fb25DaGFuZ2UoZSl9KSxjLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBvKHQsZSksaSh0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7bihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJfYWxsb2NhdGVMaXN0ZW5lcnMiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9yZXNwb25zZUxpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7InJlc3BvbnNlIj09PXQudHlwZSYmZS5fb25SZXNwb25zZSh0KX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7bihPYmplY3QuZ2V0UHJvdG90eXBlT2YodC5wcm90b3R5cGUpLCJfcmVsZWFzZUxpc3RlbmVycyIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX3Jlc3BvbnNlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOiJkZWxldGUiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe2NvbnNvbGUubG9nKCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAiLHQpLDIwMD09PXQuYm9keS5jb2RlJiYoZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9yZXBvcnRlcnNbZS5fdXJsXSl9KX19LHtrZXk6Im9uU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXI9ZX19LHtrZXk6Im9uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OiJfb25Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3N3aXRjaChjb25zb2xlLmxvZygiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogIixlKSxlLmJvZHkudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uVW5TdWJzY3JpYmUoZSl9fX0se2tleToiX29uU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj17dHlwZTplLmJvZHkudHlwZSx1cmw6cixhY2NlcHQ6ZnVuY3Rpb24oKXt2YXIgbj17dXJsOnIsc3RhdHVzOiJvbiJ9O3JldHVybiB0Ll9zdWJzY3JpcHRpb25zW3JdPW4sdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNjaGVtYTp0Ll9zY2hlbWEsdmVyc2lvbjp0Ll92ZXJzaW9uLHZhbHVlOigwLGwuZGVlcENsb25lKSh0LmRhdGEpfX0pLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpyfX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIlNVQlNDUklQVElPTi1FVkVOVDogIixuKSx0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPXQuX3N1YnNjcmlwdGlvbnNbcl07ZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl07dmFyIG89e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsb2JqZWN0Om59O3QuX29uU3Vic2NyaXB0aW9uSGFuZGxlciYmKGNvbnNvbGUubG9nKCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICIsbyksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKG8pKX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihjb25zb2xlLmxvZygiUkVTUE9OU0UtRVZFTlQ6ICIsciksdC5fb25SZXNwb25zZUhhbmRsZXIocikpfX0se2tleToic3Vic2NyaXB0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnN9fV0pLHR9KGNbImRlZmF1bHQiXSk7clsiZGVmYXVsdCJdPWYsdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyIuLi91dGlscy91dGlscy5qcyI6MTE5LCIuL0RhdGFPYmplY3QiOjExMiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxMywiYmFiZWwtcnVudGltZS9oZWxwZXJzL2dldCI6MTUsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyI6MTYsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCI6MTd9XSwxMTY6W2Z1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZS1jbGFzcyIpWyJkZWZhdWx0Il0sbz1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbixpKXtvKHRoaXMsZSk7dmFyIHM9dGhpcztzLl9vd25lcj10LHMuX3VybD1yLHMuX2J1cz1uLHMuX2NoaWxkcmVuPWkscy5fY2hhbmdlcz1bXSxzLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybiBuKGUsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7Y29uc29sZS5sb2coIkRhdGFQcm92aXNpb25hbC0iK2UuX3VybCsiLVJDVjogIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OiJhcHBseSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6ImNoaWxkcmVuIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59fV0pLGV9KCk7clsiZGVmYXVsdCJdPWksdC5leHBvcnRzPXJbImRlZmF1bHQiXX0seyJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzfV0sMTE3OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiKVsiZGVmYXVsdCJdLG89ZSgiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siKVsiZGVmYXVsdCJdLGk9ZSgiYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzIilbImRlZmF1bHQiXTtPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHM9ZSgiLi4vdXRpbHMvdXRpbHMuanMiKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSk7dmFyIHI9dGhpcztyLl9vYnNlcnZlcnM9W10sci5fZmlsdGVycz17fSx0P3IuX2RhdGE9KDAscy5kZWVwQ2xvbmUpKHQpOnIuX2RhdGE9e30sci5faW50ZXJuYWxPYnNlcnZlKG5ldyB1LHIuX2RhdGEpfXJldHVybiBuKGUsW3trZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleToiZmluZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLiIpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleToiZmluZEJlZm9yZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj1lLnNwbGl0KCIuIik7cmV0dXJuIHQubGFzdD1yLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQociksdH19LHtrZXk6Il9maW5kV2l0aFNwbGl0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6Il9pc09ic2VydmFibGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnN0cnVjdG9yPT09T2JqZWN0fHxlLmNvbnN0cnVjdG9yPT09QXJyYXk/ITA6ITF9fSx7a2V5OiJfaW50ZXJuYWxPYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbj1mdW5jdGlvbih0KXtyLl9vbkNoYW5nZXMoZSx0KX07aWYodC5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7T2JqZWN0Lm9ic2VydmUodCxuKTtmb3IodmFyIG8gaW4gdClyLl9pc09ic2VydmFibGUodFtvXSkmJnIuX2ludGVybmFsT2JzZXJ2ZShlWyJuZXciXShvKSx0W29dKX1lbHNlIGlmKHQuY29uc3RydWN0b3I9PT1BcnJheSl7QXJyYXkub2JzZXJ2ZSh0LG4pO2Zvcih2YXIgbyBpbiB0KWlmKHIuX2lzT2JzZXJ2YWJsZSh0W29dKSl7dmFyIGk9ZVsibmV3Il0obmV3IGModFtvXSxvKSk7ci5faW50ZXJuYWxPYnNlcnZlKGksdFtvXSl9fX19fSx7a2V5OiJfb25DaGFuZ2VzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHQpe3ZhciBvPXRbbl0ub2JqZWN0LGk9dm9pZCAwO2lmKG8uY29uc3RydWN0b3I9PT1PYmplY3QmJihpPWYuT0JKRUNUKSxvLmNvbnN0cnVjdG9yPT09QXJyYXkmJihpPWYuQVJSQVkpLCJzcGxpY2UiPT09dFtuXS50eXBlKSFmdW5jdGlvbigpe3ZhciBhPXRbbl0uaW5kZXgsdT1lWyJuZXciXSgiIithKSxmPXUudG9TdHJpbmcoKSxoPXRbbl0ucmVtb3ZlZC5sZW5ndGg7aWYoMCE9PWgpe3ZhciBwPXRbbl0ucmVtb3ZlZDtwLmZvckVhY2goZnVuY3Rpb24odCxuKXtyLl9pc09ic2VydmFibGUodCkmJmUucmVtb3ZlSW5kZXgoYStuKX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6bC5SRU1PVkUsb1R5cGU6aSxmaWVsZDpmLGRhdGE6aH0pfXZhciBkPXRbbl0uYWRkZWRDb3VudDtpZigwIT09ZCl7dmFyIHk9by5zbGljZShhLGErZCk7eS5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7aWYoci5faXNPYnNlcnZhYmxlKHQpKXt2YXIgbz1lWyJuZXciXShuZXcgYyh0LGErbikpO3IuX2ludGVybmFsT2JzZXJ2ZShvLHQpfX0pLHIuX2ZpcmVFdmVudCh7Y1R5cGU6bC5BREQsb1R5cGU6aSxmaWVsZDpmLGRhdGE6KDAscy5kZWVwQ2xvbmUpKHkpfSl9YSE9PW8ubGVuZ3RoLTEmJmUucmVJbmRleEZyb20obyl9KCk7ZWxzZXt2YXIgYT1lWyJuZXciXSh0W25dLm5hbWUpLHU9YS50b1N0cmluZygpO2lmKC0xIT09dS5pbmRleE9mKCJTeW1ib2wiKSljb250aW51ZTt2YXIgaD1vW3Rbbl0ubmFtZV07InVwZGF0ZSI9PT10W25dLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6bC5VUERBVEUsb1R5cGU6aSxmaWVsZDp1LGRhdGE6KDAscy5kZWVwQ2xvbmUpKGgpfSksImFkZCI9PT10W25dLnR5cGUmJih0aGlzLl9pbnRlcm5hbE9ic2VydmUoYSxoKSx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmwuQURELG9UeXBlOmksZmllbGQ6dSxkYXRhOigwLHMuZGVlcENsb25lKShoKX0pKSwiZGVsZXRlIj09PXRbbl0udHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpsLlJFTU9WRSxvVHlwZTppLGZpZWxkOnV9KX19fX0se2tleToiZGF0YSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLGV9KCksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtvKHRoaXMsZSksdGhpcy5fcGF0aD1bXSx0aGlzLl9vYnNlcnZhYmxlcz17fX1yZXR1cm4gbihlLFt7a2V5OiJyZW1vdmVJbmRleCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX29ic2VydmFibGVzW2VdfX0se2tleToicmVJbmRleEZyb20iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aSh0aGlzLl9vYnNlcnZhYmxlcykuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj10Ll9vYnNlcnZhYmxlc1tyXSxvPWUuaW5kZXhPZihuLm9iaik7bi5pZHghPW8mJihuLmlkeD1vLGRlbGV0ZSB0Ll9vYnNlcnZhYmxlc1tyXSx0Ll9vYnNlcnZhYmxlc1tvXT1uKX0pfX0se2tleToibmV3Iix2YWx1ZTpmdW5jdGlvbihlKXtlLmNvbnN0cnVjdG9yPT1jJiYodGhpcy5fb2JzZXJ2YWJsZXNbZS5pZHhdPWUpO3ZhciB0PXRoaXMuY2xvbmUoKTtyZXR1cm4gdC5fcGF0aC5wdXNoKGUpLHR9fSx7a2V5OiJjbG9uZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3BhdGgucHVzaChlKX0pLHR9fSx7a2V5OiJ0b1N0cmluZyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0iIjtyZXR1cm4gdGhpcy5fcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKHQscil7MD09PXI/ZT10LnRvU3RyaW5nKCk6ZSs9Ii4iK3QudG9TdHJpbmcoKX0pLGV9fV0pLGV9KCksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxyKXtvKHRoaXMsZSksdGhpcy5vYmo9dCx0aGlzLmlkeD1yfXJldHVybiBuKGUsW3trZXk6InRvU3RyaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeC50b1N0cmluZygpfX1dKSxlfSgpLGw9e1VQREFURToidXBkYXRlIixBREQ6ImFkZCIsUkVNT1ZFOiJyZW1vdmUifTtyLkNoYW5nZVR5cGU9bDt2YXIgZj17T0JKRUNUOiJvYmplY3QiLEFSUkFZOiJhcnJheSJ9O3IuT2JqZWN0VHlwZT1mLHJbImRlZmF1bHQiXT1hfSx7Ii4uL3V0aWxzL3V0aWxzLmpzIjoxMTksImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9vYmplY3Qva2V5cyI6NiwiYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzLWNhbGwtY2hlY2siOjExLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIjoxM31dLDExODpbZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlLWNsYXNzIilbImRlZmF1bHQiXSxvPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzcy1jYWxsLWNoZWNrIilbImRlZmF1bHQiXSxpPWUoImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIilbImRlZmF1bHQiXSxzPWUoImJhYmVsLXJ1bnRpbWUvaGVscGVycy9pbnRlcm9wLXJlcXVpcmUtZGVmYXVsdCIpWyJkZWZhdWx0Il07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBhPWUoIi4vRGF0YU9iamVjdFJlcG9ydGVyIiksdT1zKGEpLGM9ZSgiLi9EYXRhT2JqZWN0T2JzZXJ2ZXIiKSxsPXMoYyksZj1lKCIuL0RhdGFQcm92aXNpb25hbCIpLGg9cyhmKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LHIsbil7byh0aGlzLGUpO3ZhciBpPXRoaXM7aS5fb3duZXI9dCxpLl9idXM9cixpLl9zdWJVUkw9bi5ydW50aW1lVVJMKyIvc20iLGkuX3JlcG9ydGVycz17fSxpLl9vYnNlcnZlcnM9e30saS5fcHJvdmlzaW9uYWxzPXt9LHIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtzd2l0Y2goY29uc29sZS5sb2coIlN5bmNoZXItUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJmb3J3YXJkIjppLl9vbkZvcndhcmQoZSk7YnJlYWs7Y2FzZSJjcmVhdGUiOmkuX29uUmVtb3RlQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjppLl9vblJlbW90ZURlbGV0ZShlKX19KX1yZXR1cm4gbihlLFt7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLG89e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl9vd25lcix0bzpuLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUsdmFsdWU6cixhdXRob3Jpc2U6dH19O3JldHVybiBuZXcgaShmdW5jdGlvbih0LGkpe24uX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2lmKGNvbnNvbGUubG9nKCJjcmVhdGUtcmVzcG9uc2U6ICIsbyksMjAwPT09by5ib2R5LmNvZGUpe3ZhciBzPW8uYm9keS5yZXNvdXJjZSxhPW5ldyB1WyJkZWZhdWx0Il0obixzLGUsIm9uIixyLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyk7bi5fcmVwb3J0ZXJzW3NdPWEsdChhKX1lbHNlIGkoby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7c2NoZW1hOmUscmVzb3VyY2U6dH19O3JldHVybiBuZXcgaShmdW5jdGlvbihvLGkpe3IuX2J1cy5wb3N0TWVzc2FnZShuLGZ1bmN0aW9uKG4pe2NvbnNvbGUubG9nKCJzdWJzY3JpYmUtcmVzcG9uc2U6ICIsbik7dmFyIHM9ci5fcHJvdmlzaW9uYWxzW3RdO2lmKGRlbGV0ZSByLl9wcm92aXNpb25hbHNbdF0scyYmcy5fcmVsZWFzZUxpc3RlbmVycygpLG4uYm9keS5jb2RlPDIwMClzPW5ldyBoWyJkZWZhdWx0Il0oci5fb3duZXIsdCxyLl9idXMsbi5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKSxyLl9wcm92aXNpb25hbHNbdF09cztlbHNlIGlmKDIwMD09PW4uYm9keS5jb2RlKXt2YXIgYT1uZXcgbFsiZGVmYXVsdCJdKHIsdCxlLCJvbiIsbi5ib2R5LnZhbHVlLHMuY2hpbGRyZW4sbi5ib2R5LnZlcnNpb24pO3IuX29ic2VydmVyc1t0XT1hLG8oYSkscy5hcHBseShhKX1lbHNlIGkobi5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Im9uTm90aWZpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6Il9vbkZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9yZXBvcnRlcnNbZS5ib2R5LnRvXTtyLl9vbkZvcndhcmQoZSl9fSx7a2V5OiJfb25SZW1vdGVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkVG9rZW4sYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoY29uc29sZS5sb2coIk5PVElGSUNBVElPTi1FVkVOVDogIixuKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIobikpfX0se2tleToiX29uUmVtb3RlRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdO2lmKG4pe3ZhciBvPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRUb2tlbixhY2s6ZnVuY3Rpb24ocil7dmFyIG89MjAwO3ImJihvPXIpLDIwMD09PW8mJm5bImRlbGV0ZSJdKCksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6byxzb3VyY2U6dC5fb3duZXJ9fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihjb25zb2xlLmxvZygiTk9USUZJQ0FUSU9OLUVWRU5UOiAiLG8pLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihvKSl9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDQsc291cmNlOnQuX293bmVyfX0pfX0se2tleToib3duZXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcn19LHtrZXk6InJlcG9ydGVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcG9ydGVyc319LHtrZXk6Im9ic2VydmVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29ic2VydmVyc319XSksZX0oKTtyWyJkZWZhdWx0Il09cCx0LmV4cG9ydHM9clsiZGVmYXVsdCJdfSx7Ii4vRGF0YU9iamVjdE9ic2VydmVyIjoxMTQsIi4vRGF0YU9iamVjdFJlcG9ydGVyIjoxMTUsIi4vRGF0YVByb3Zpc2lvbmFsIjoxMTYsImJhYmVsLXJ1bnRpbWUvY29yZS1qcy9wcm9taXNlIjo4LCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3MtY2FsbC1jaGVjayI6MTEsImJhYmVsLXJ1bnRpbWUvaGVscGVycy9jcmVhdGUtY2xhc3MiOjEzLCJiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW50ZXJvcC1yZXF1aXJlLWRlZmF1bHQiOjE3fV0sMTE5OltmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG4oZSl7dmFyIHQ9LyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2kscj0iJDEsJDIsJDMiLG49ZS5yZXBsYWNlKHQscikuc3BsaXQoIiwiKTtuWzBdPT09ZSYmKG5bMF09Imh0dHBzIixuWzFdPWUpO3ZhciBvPXt0eXBlOm5bMF0sZG9tYWluOm5bMV0saWRlbnRpdHk6blsyXX07cmV0dXJuIG99ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTp2b2lkIDB9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHIuZGl2aWRlVVJMPW4sci5kZWVwQ2xvbmU9b30se31dfSx7fSxbMTExXSkoMTExKX0pOwp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sMTYyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovLyBwcm90b3R5cGUgY2xhc3MgZm9yIGhhc2ggZnVuY3Rpb25zCmZ1bmN0aW9uIEhhc2ggKGJsb2NrU2l6ZSwgZmluYWxTaXplKSB7CiAgdGhpcy5fYmxvY2sgPSBuZXcgQnVmZmVyKGJsb2NrU2l6ZSkKICB0aGlzLl9maW5hbFNpemUgPSBmaW5hbFNpemUKICB0aGlzLl9ibG9ja1NpemUgPSBibG9ja1NpemUKICB0aGlzLl9sZW4gPSAwCiAgdGhpcy5fcyA9IDAKfQoKSGFzaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRhdGEsIGVuYykgewogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHsKICAgIGVuYyA9IGVuYyB8fCAndXRmOCcKICAgIGRhdGEgPSBuZXcgQnVmZmVyKGRhdGEsIGVuYykKICB9CgogIHZhciBsID0gdGhpcy5fbGVuICs9IGRhdGEubGVuZ3RoCiAgdmFyIHMgPSB0aGlzLl9zIHx8IDAKICB2YXIgZiA9IDAKICB2YXIgYnVmZmVyID0gdGhpcy5fYmxvY2sKCiAgd2hpbGUgKHMgPCBsKSB7CiAgICB2YXIgdCA9IE1hdGgubWluKGRhdGEubGVuZ3RoLCBmICsgdGhpcy5fYmxvY2tTaXplIC0gKHMgJSB0aGlzLl9ibG9ja1NpemUpKQogICAgdmFyIGNoID0gKHQgLSBmKQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2g7IGkrKykgewogICAgICBidWZmZXJbKHMgJSB0aGlzLl9ibG9ja1NpemUpICsgaV0gPSBkYXRhW2kgKyBmXQogICAgfQoKICAgIHMgKz0gY2gKICAgIGYgKz0gY2gKCiAgICBpZiAoKHMgJSB0aGlzLl9ibG9ja1NpemUpID09PSAwKSB7CiAgICAgIHRoaXMuX3VwZGF0ZShidWZmZXIpCiAgICB9CiAgfQogIHRoaXMuX3MgPSBzCgogIHJldHVybiB0aGlzCn0KCkhhc2gucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uIChlbmMpIHsKICAvLyBTdXBwb3NlIHRoZSBsZW5ndGggb2YgdGhlIG1lc3NhZ2UgTSwgaW4gYml0cywgaXMgbAogIHZhciBsID0gdGhpcy5fbGVuICogOAoKICAvLyBBcHBlbmQgdGhlIGJpdCAxIHRvIHRoZSBlbmQgb2YgdGhlIG1lc3NhZ2UKICB0aGlzLl9ibG9ja1t0aGlzLl9sZW4gJSB0aGlzLl9ibG9ja1NpemVdID0gMHg4MAoKICAvLyBhbmQgdGhlbiBrIHplcm8gYml0cywgd2hlcmUgayBpcyB0aGUgc21hbGxlc3Qgbm9uLW5lZ2F0aXZlIHNvbHV0aW9uIHRvIHRoZSBlcXVhdGlvbiAobCArIDEgKyBrKSA9PT0gZmluYWxTaXplIG1vZCBibG9ja1NpemUKICB0aGlzLl9ibG9jay5maWxsKDAsIHRoaXMuX2xlbiAlIHRoaXMuX2Jsb2NrU2l6ZSArIDEpCgogIGlmIChsICUgKHRoaXMuX2Jsb2NrU2l6ZSAqIDgpID49IHRoaXMuX2ZpbmFsU2l6ZSAqIDgpIHsKICAgIHRoaXMuX3VwZGF0ZSh0aGlzLl9ibG9jaykKICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCkKICB9CgogIC8vIHRvIHRoaXMgYXBwZW5kIHRoZSBibG9jayB3aGljaCBpcyBlcXVhbCB0byB0aGUgbnVtYmVyIGwgd3JpdHRlbiBpbiBiaW5hcnkKICAvLyBUT0RPOiBoYW5kbGUgY2FzZSB3aGVyZSBsIGlzID4gTWF0aC5wb3coMiwgMjkpCiAgdGhpcy5fYmxvY2sud3JpdGVJbnQzMkJFKGwsIHRoaXMuX2Jsb2NrU2l6ZSAtIDQpCgogIHZhciBoYXNoID0gdGhpcy5fdXBkYXRlKHRoaXMuX2Jsb2NrKSB8fCB0aGlzLl9oYXNoKCkKCiAgcmV0dXJuIGVuYyA/IGhhc2gudG9TdHJpbmcoZW5jKSA6IGhhc2gKfQoKSGFzaC5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICB0aHJvdyBuZXcgRXJyb3IoJ191cGRhdGUgbXVzdCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzcycpCn0KCm1vZHVsZS5leHBvcnRzID0gSGFzaAoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7ImJ1ZmZlciI6NzB9XSwxNjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gU0hBIChhbGdvcml0aG0pIHsKICBhbGdvcml0aG0gPSBhbGdvcml0aG0udG9Mb3dlckNhc2UoKQoKICB2YXIgQWxnb3JpdGhtID0gZXhwb3J0c1thbGdvcml0aG1dCiAgaWYgKCFBbGdvcml0aG0pIHRocm93IG5ldyBFcnJvcihhbGdvcml0aG0gKyAnIGlzIG5vdCBzdXBwb3J0ZWQgKHdlIGFjY2VwdCBwdWxsIHJlcXVlc3RzKScpCgogIHJldHVybiBuZXcgQWxnb3JpdGhtKCkKfQoKZXhwb3J0cy5zaGEgPSByZXF1aXJlKCcuL3NoYScpCmV4cG9ydHMuc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpCmV4cG9ydHMuc2hhMjI0ID0gcmVxdWlyZSgnLi9zaGEyMjQnKQpleHBvcnRzLnNoYTI1NiA9IHJlcXVpcmUoJy4vc2hhMjU2JykKZXhwb3J0cy5zaGEzODQgPSByZXF1aXJlKCcuL3NoYTM4NCcpCmV4cG9ydHMuc2hhNTEyID0gcmVxdWlyZSgnLi9zaGE1MTInKQoKfSx7Ii4vc2hhIjoxNjQsIi4vc2hhMSI6MTY1LCIuL3NoYTIyNCI6MTY2LCIuL3NoYTI1NiI6MTY3LCIuL3NoYTM4NCI6MTY4LCIuL3NoYTUxMiI6MTY5fV0sMTY0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewovKgogKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTAsIGFzIGRlZmluZWQKICogaW4gRklQUyBQVUIgMTgwLTEKICogVGhpcyBzb3VyY2UgY29kZSBpcyBkZXJpdmVkIGZyb20gc2hhMS5qcyBvZiB0aGUgc2FtZSByZXBvc2l0b3J5LgogKiBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIFNIQS0wIGFuZCBTSEEtMSBpcyBqdXN0IGEgYml0d2lzZSByb3RhdGUgbGVmdAogKiBvcGVyYXRpb24gd2FzIGFkZGVkLgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIFcgPSBuZXcgQXJyYXkoODApCgpmdW5jdGlvbiBTaGEgKCkgewogIHRoaXMuaW5pdCgpCiAgdGhpcy5fdyA9IFcKCiAgSGFzaC5jYWxsKHRoaXMsIDY0LCA1NikKfQoKaW5oZXJpdHMoU2hhLCBIYXNoKQoKU2hhLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2EgPSAweDY3NDUyMzAxIHwgMAogIHRoaXMuX2IgPSAweGVmY2RhYjg5IHwgMAogIHRoaXMuX2MgPSAweDk4YmFkY2ZlIHwgMAogIHRoaXMuX2QgPSAweDEwMzI1NDc2IHwgMAogIHRoaXMuX2UgPSAweGMzZDJlMWYwIHwgMAoKICByZXR1cm4gdGhpcwp9CgovKgogKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuCiAqLwpmdW5jdGlvbiByb2wgKG51bSwgY250KSB7CiAgcmV0dXJuIChudW0gPDwgY250KSB8IChudW0gPj4+ICgzMiAtIGNudCkpCn0KClNoYS5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uIChNKSB7CiAgdmFyIFcgPSB0aGlzLl93CgogIHZhciBhID0gdGhpcy5fYQogIHZhciBiID0gdGhpcy5fYgogIHZhciBjID0gdGhpcy5fYwogIHZhciBkID0gdGhpcy5fZAogIHZhciBlID0gdGhpcy5fZQoKICB2YXIgaiA9IDAKICB2YXIgawoKICAvKgogICAqIFNIQS0xIGhhcyBhIGJpdHdpc2Ugcm90YXRlIGxlZnQgb3BlcmF0aW9uLiBCdXQsIFNIQSBpcyBub3QKICAgKiBmdW5jdGlvbiBjYWxjVygpIHsgcmV0dXJuIHJvbChXW2ogLSAzXSBeIFdbaiAtICA4XSBeIFdbaiAtIDE0XSBeIFdbaiAtIDE2XSwgMSkgfQogICAqLwogIGZ1bmN0aW9uIGNhbGNXICgpIHsgcmV0dXJuIFdbaiAtIDNdIF4gV1tqIC0gOF0gXiBXW2ogLSAxNF0gXiBXW2ogLSAxNl0gfQogIGZ1bmN0aW9uIGxvb3AgKHcsIGYpIHsKICAgIFdbal0gPSB3CgogICAgdmFyIHQgPSByb2woYSwgNSkgKyBmICsgZSArIHcgKyBrCgogICAgZSA9IGQKICAgIGQgPSBjCiAgICBjID0gcm9sKGIsIDMwKQogICAgYiA9IGEKICAgIGEgPSB0CiAgICBqKysKICB9CgogIGsgPSAxNTE4NTAwMjQ5CiAgd2hpbGUgKGogPCAxNikgbG9vcChNLnJlYWRJbnQzMkJFKGogKiA0KSwgKGIgJiBjKSB8ICgofmIpICYgZCkpCiAgd2hpbGUgKGogPCAyMCkgbG9vcChjYWxjVygpLCAoYiAmIGMpIHwgKCh+YikgJiBkKSkKICBrID0gMTg1OTc3NTM5MwogIHdoaWxlIChqIDwgNDApIGxvb3AoY2FsY1coKSwgYiBeIGMgXiBkKQogIGsgPSAtMTg5NDAwNzU4OAogIHdoaWxlIChqIDwgNjApIGxvb3AoY2FsY1coKSwgKGIgJiBjKSB8IChiICYgZCkgfCAoYyAmIGQpKQogIGsgPSAtODk5NDk3NTE0CiAgd2hpbGUgKGogPCA4MCkgbG9vcChjYWxjVygpLCBiIF4gYyBeIGQpCgogIHRoaXMuX2EgPSAoYSArIHRoaXMuX2EpIHwgMAogIHRoaXMuX2IgPSAoYiArIHRoaXMuX2IpIHwgMAogIHRoaXMuX2MgPSAoYyArIHRoaXMuX2MpIHwgMAogIHRoaXMuX2QgPSAoZCArIHRoaXMuX2QpIHwgMAogIHRoaXMuX2UgPSAoZSArIHRoaXMuX2UpIHwgMAp9CgpTaGEucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcigyMCkKCiAgSC53cml0ZUludDMyQkUodGhpcy5fYSB8IDAsIDApCiAgSC53cml0ZUludDMyQkUodGhpcy5fYiB8IDAsIDQpCiAgSC53cml0ZUludDMyQkUodGhpcy5fYyB8IDAsIDgpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZCB8IDAsIDEyKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2UgfCAwLCAxNikKCiAgcmV0dXJuIEgKfQoKbW9kdWxlLmV4cG9ydHMgPSBTaGEKCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjIsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjl9XSwxNjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8qCiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgU2VjdXJlIEhhc2ggQWxnb3JpdGhtLCBTSEEtMSwgYXMgZGVmaW5lZAogKiBpbiBGSVBTIFBVQiAxODAtMQogKiBWZXJzaW9uIDIuMWEgQ29weXJpZ2h0IFBhdWwgSm9obnN0b24gMjAwMCAtIDIwMDIuCiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXQKICogRGlzdHJpYnV0ZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlCiAqIFNlZSBodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1IGZvciBkZXRhaWxzLgogKi8KCnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJykKdmFyIEhhc2ggPSByZXF1aXJlKCcuL2hhc2gnKQoKdmFyIFcgPSBuZXcgQXJyYXkoODApCgpmdW5jdGlvbiBTaGExICgpIHsKICB0aGlzLmluaXQoKQogIHRoaXMuX3cgPSBXCgogIEhhc2guY2FsbCh0aGlzLCA2NCwgNTYpCn0KCmluaGVyaXRzKFNoYTEsIEhhc2gpCgpTaGExLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2EgPSAweDY3NDUyMzAxIHwgMAogIHRoaXMuX2IgPSAweGVmY2RhYjg5IHwgMAogIHRoaXMuX2MgPSAweDk4YmFkY2ZlIHwgMAogIHRoaXMuX2QgPSAweDEwMzI1NDc2IHwgMAogIHRoaXMuX2UgPSAweGMzZDJlMWYwIHwgMAoKICByZXR1cm4gdGhpcwp9CgovKgogKiBCaXR3aXNlIHJvdGF0ZSBhIDMyLWJpdCBudW1iZXIgdG8gdGhlIGxlZnQuCiAqLwpmdW5jdGlvbiByb2wgKG51bSwgY250KSB7CiAgcmV0dXJuIChudW0gPDwgY250KSB8IChudW0gPj4+ICgzMiAtIGNudCkpCn0KClNoYTEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYSA9IHRoaXMuX2EKICB2YXIgYiA9IHRoaXMuX2IKICB2YXIgYyA9IHRoaXMuX2MKICB2YXIgZCA9IHRoaXMuX2QKICB2YXIgZSA9IHRoaXMuX2UKCiAgdmFyIGogPSAwCiAgdmFyIGsKCiAgZnVuY3Rpb24gY2FsY1cgKCkgeyByZXR1cm4gcm9sKFdbaiAtIDNdIF4gV1tqIC0gOF0gXiBXW2ogLSAxNF0gXiBXW2ogLSAxNl0sIDEpIH0KICBmdW5jdGlvbiBsb29wICh3LCBmKSB7CiAgICBXW2pdID0gdwoKICAgIHZhciB0ID0gcm9sKGEsIDUpICsgZiArIGUgKyB3ICsgawoKICAgIGUgPSBkCiAgICBkID0gYwogICAgYyA9IHJvbChiLCAzMCkKICAgIGIgPSBhCiAgICBhID0gdAogICAgaisrCiAgfQoKICBrID0gMTUxODUwMDI0OQogIHdoaWxlIChqIDwgMTYpIGxvb3AoTS5yZWFkSW50MzJCRShqICogNCksIChiICYgYykgfCAoKH5iKSAmIGQpKQogIHdoaWxlIChqIDwgMjApIGxvb3AoY2FsY1coKSwgKGIgJiBjKSB8ICgofmIpICYgZCkpCiAgayA9IDE4NTk3NzUzOTMKICB3aGlsZSAoaiA8IDQwKSBsb29wKGNhbGNXKCksIGIgXiBjIF4gZCkKICBrID0gLTE4OTQwMDc1ODgKICB3aGlsZSAoaiA8IDYwKSBsb29wKGNhbGNXKCksIChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKSkKICBrID0gLTg5OTQ5NzUxNAogIHdoaWxlIChqIDwgODApIGxvb3AoY2FsY1coKSwgYiBeIGMgXiBkKQoKICB0aGlzLl9hID0gKGEgKyB0aGlzLl9hKSB8IDAKICB0aGlzLl9iID0gKGIgKyB0aGlzLl9iKSB8IDAKICB0aGlzLl9jID0gKGMgKyB0aGlzLl9jKSB8IDAKICB0aGlzLl9kID0gKGQgKyB0aGlzLl9kKSB8IDAKICB0aGlzLl9lID0gKGUgKyB0aGlzLl9lKSB8IDAKfQoKU2hhMS5wcm90b3R5cGUuX2hhc2ggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIEggPSBuZXcgQnVmZmVyKDIwKQoKICBILndyaXRlSW50MzJCRSh0aGlzLl9hIHwgMCwgMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9iIHwgMCwgNCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9jIHwgMCwgOCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9kIHwgMCwgMTIpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZSB8IDAsIDE2KQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTEKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2hhc2giOjE2MiwiYnVmZmVyIjo3MCwiaW5oZXJpdHMiOjEyOX1dLDE2NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKLyoqCiAqIEEgSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgU2VjdXJlIEhhc2ggQWxnb3JpdGhtLCBTSEEtMjU2LCBhcyBkZWZpbmVkCiAqIGluIEZJUFMgMTgwLTIKICogVmVyc2lvbiAyLjItYmV0YSBDb3B5cmlnaHQgQW5nZWwgTWFyaW4sIFBhdWwgSm9obnN0b24gMjAwMCAtIDIwMDkuCiAqIE90aGVyIGNvbnRyaWJ1dG9yczogR3JlZyBIb2x0LCBBbmRyZXcgS2VwZXJ0LCBZZG5hciwgTG9zdGluZXQKICoKICovCgp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBTaGEyNTYgPSByZXF1aXJlKCcuL3NoYTI1NicpCnZhciBIYXNoID0gcmVxdWlyZSgnLi9oYXNoJykKCnZhciBXID0gbmV3IEFycmF5KDY0KQoKZnVuY3Rpb24gU2hhMjI0ICgpIHsKICB0aGlzLmluaXQoKQoKICB0aGlzLl93ID0gVyAvLyBuZXcgQXJyYXkoNjQpCgogIEhhc2guY2FsbCh0aGlzLCA2NCwgNTYpCn0KCmluaGVyaXRzKFNoYTIyNCwgU2hhMjU2KQoKU2hhMjI0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2EgPSAweGMxMDU5ZWQ4IHwgMAogIHRoaXMuX2IgPSAweDM2N2NkNTA3IHwgMAogIHRoaXMuX2MgPSAweDMwNzBkZDE3IHwgMAogIHRoaXMuX2QgPSAweGY3MGU1OTM5IHwgMAogIHRoaXMuX2UgPSAweGZmYzAwYjMxIHwgMAogIHRoaXMuX2YgPSAweDY4NTgxNTExIHwgMAogIHRoaXMuX2cgPSAweDY0Zjk4ZmE3IHwgMAogIHRoaXMuX2ggPSAweGJlZmE0ZmE0IHwgMAoKICByZXR1cm4gdGhpcwp9CgpTaGEyMjQucHJvdG90eXBlLl9oYXNoID0gZnVuY3Rpb24gKCkgewogIHZhciBIID0gbmV3IEJ1ZmZlcigyOCkKCiAgSC53cml0ZUludDMyQkUodGhpcy5fYSwgMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9iLCA0KQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2MsIDgpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZCwgMTIpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZSwgMTYpCiAgSC53cml0ZUludDMyQkUodGhpcy5fZiwgMjApCiAgSC53cml0ZUludDMyQkUodGhpcy5fZywgMjQpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhMjI0Cgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjIsIi4vc2hhMjU2IjoxNjcsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjl9XSwxNjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Ci8qKgogKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTI1NiwgYXMgZGVmaW5lZAogKiBpbiBGSVBTIDE4MC0yCiAqIFZlcnNpb24gMi4yLWJldGEgQ29weXJpZ2h0IEFuZ2VsIE1hcmluLCBQYXVsIEpvaG5zdG9uIDIwMDAgLSAyMDA5LgogKiBPdGhlciBjb250cmlidXRvcnM6IEdyZWcgSG9sdCwgQW5kcmV3IEtlcGVydCwgWWRuYXIsIExvc3RpbmV0CiAqCiAqLwoKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgSGFzaCA9IHJlcXVpcmUoJy4vaGFzaCcpCgp2YXIgSyA9IFsKICAweDQyOEEyRjk4LCAweDcxMzc0NDkxLCAweEI1QzBGQkNGLCAweEU5QjVEQkE1LAogIDB4Mzk1NkMyNUIsIDB4NTlGMTExRjEsIDB4OTIzRjgyQTQsIDB4QUIxQzVFRDUsCiAgMHhEODA3QUE5OCwgMHgxMjgzNUIwMSwgMHgyNDMxODVCRSwgMHg1NTBDN0RDMywKICAweDcyQkU1RDc0LCAweDgwREVCMUZFLCAweDlCREMwNkE3LCAweEMxOUJGMTc0LAogIDB4RTQ5QjY5QzEsIDB4RUZCRTQ3ODYsIDB4MEZDMTlEQzYsIDB4MjQwQ0ExQ0MsCiAgMHgyREU5MkM2RiwgMHg0QTc0ODRBQSwgMHg1Q0IwQTlEQywgMHg3NkY5ODhEQSwKICAweDk4M0U1MTUyLCAweEE4MzFDNjZELCAweEIwMDMyN0M4LCAweEJGNTk3RkM3LAogIDB4QzZFMDBCRjMsIDB4RDVBNzkxNDcsIDB4MDZDQTYzNTEsIDB4MTQyOTI5NjcsCiAgMHgyN0I3MEE4NSwgMHgyRTFCMjEzOCwgMHg0RDJDNkRGQywgMHg1MzM4MEQxMywKICAweDY1MEE3MzU0LCAweDc2NkEwQUJCLCAweDgxQzJDOTJFLCAweDkyNzIyQzg1LAogIDB4QTJCRkU4QTEsIDB4QTgxQTY2NEIsIDB4QzI0QjhCNzAsIDB4Qzc2QzUxQTMsCiAgMHhEMTkyRTgxOSwgMHhENjk5MDYyNCwgMHhGNDBFMzU4NSwgMHgxMDZBQTA3MCwKICAweDE5QTRDMTE2LCAweDFFMzc2QzA4LCAweDI3NDg3NzRDLCAweDM0QjBCQ0I1LAogIDB4MzkxQzBDQjMsIDB4NEVEOEFBNEEsIDB4NUI5Q0NBNEYsIDB4NjgyRTZGRjMsCiAgMHg3NDhGODJFRSwgMHg3OEE1NjM2RiwgMHg4NEM4NzgxNCwgMHg4Q0M3MDIwOCwKICAweDkwQkVGRkZBLCAweEE0NTA2Q0VCLCAweEJFRjlBM0Y3LCAweEM2NzE3OEYyCl0KCnZhciBXID0gbmV3IEFycmF5KDY0KQoKZnVuY3Rpb24gU2hhMjU2ICgpIHsKICB0aGlzLmluaXQoKQoKICB0aGlzLl93ID0gVyAvLyBuZXcgQXJyYXkoNjQpCgogIEhhc2guY2FsbCh0aGlzLCA2NCwgNTYpCn0KCmluaGVyaXRzKFNoYTI1NiwgSGFzaCkKClNoYTI1Ni5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9hID0gMHg2YTA5ZTY2NyB8IDAKICB0aGlzLl9iID0gMHhiYjY3YWU4NSB8IDAKICB0aGlzLl9jID0gMHgzYzZlZjM3MiB8IDAKICB0aGlzLl9kID0gMHhhNTRmZjUzYSB8IDAKICB0aGlzLl9lID0gMHg1MTBlNTI3ZiB8IDAKICB0aGlzLl9mID0gMHg5YjA1Njg4YyB8IDAKICB0aGlzLl9nID0gMHgxZjgzZDlhYiB8IDAKICB0aGlzLl9oID0gMHg1YmUwY2QxOSB8IDAKCiAgcmV0dXJuIHRoaXMKfQoKZnVuY3Rpb24gQ2ggKHgsIHksIHopIHsKICByZXR1cm4geiBeICh4ICYgKHkgXiB6KSkKfQoKZnVuY3Rpb24gTWFqICh4LCB5LCB6KSB7CiAgcmV0dXJuICh4ICYgeSkgfCAoeiAmICh4IHwgeSkpCn0KCmZ1bmN0aW9uIFNpZ21hMCAoeCkgewogIHJldHVybiAoeCA+Pj4gMiB8IHggPDwgMzApIF4gKHggPj4+IDEzIHwgeCA8PCAxOSkgXiAoeCA+Pj4gMjIgfCB4IDw8IDEwKQp9CgpmdW5jdGlvbiBTaWdtYTEgKHgpIHsKICByZXR1cm4gKHggPj4+IDYgfCB4IDw8IDI2KSBeICh4ID4+PiAxMSB8IHggPDwgMjEpIF4gKHggPj4+IDI1IHwgeCA8PCA3KQp9CgpmdW5jdGlvbiBHYW1tYTAgKHgpIHsKICByZXR1cm4gKHggPj4+IDcgfCB4IDw8IDI1KSBeICh4ID4+PiAxOCB8IHggPDwgMTQpIF4gKHggPj4+IDMpCn0KCmZ1bmN0aW9uIEdhbW1hMSAoeCkgewogIHJldHVybiAoeCA+Pj4gMTcgfCB4IDw8IDE1KSBeICh4ID4+PiAxOSB8IHggPDwgMTMpIF4gKHggPj4+IDEwKQp9CgpTaGEyNTYucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYSA9IHRoaXMuX2EgfCAwCiAgdmFyIGIgPSB0aGlzLl9iIHwgMAogIHZhciBjID0gdGhpcy5fYyB8IDAKICB2YXIgZCA9IHRoaXMuX2QgfCAwCiAgdmFyIGUgPSB0aGlzLl9lIHwgMAogIHZhciBmID0gdGhpcy5fZiB8IDAKICB2YXIgZyA9IHRoaXMuX2cgfCAwCiAgdmFyIGggPSB0aGlzLl9oIHwgMAoKICB2YXIgaiA9IDAKCiAgZnVuY3Rpb24gY2FsY1cgKCkgeyByZXR1cm4gR2FtbWExKFdbaiAtIDJdKSArIFdbaiAtIDddICsgR2FtbWEwKFdbaiAtIDE1XSkgKyBXW2ogLSAxNl0gfQogIGZ1bmN0aW9uIGxvb3AgKHcpIHsKICAgIFdbal0gPSB3CgogICAgdmFyIFQxID0gaCArIFNpZ21hMShlKSArIENoKGUsIGYsIGcpICsgS1tqXSArIHcKICAgIHZhciBUMiA9IFNpZ21hMChhKSArIE1haihhLCBiLCBjKQoKICAgIGggPSBnCiAgICBnID0gZgogICAgZiA9IGUKICAgIGUgPSBkICsgVDEKICAgIGQgPSBjCiAgICBjID0gYgogICAgYiA9IGEKICAgIGEgPSBUMSArIFQyCgogICAgaisrCiAgfQoKICB3aGlsZSAoaiA8IDE2KSBsb29wKE0ucmVhZEludDMyQkUoaiAqIDQpKQogIHdoaWxlIChqIDwgNjQpIGxvb3AoY2FsY1coKSkKCiAgdGhpcy5fYSA9IChhICsgdGhpcy5fYSkgfCAwCiAgdGhpcy5fYiA9IChiICsgdGhpcy5fYikgfCAwCiAgdGhpcy5fYyA9IChjICsgdGhpcy5fYykgfCAwCiAgdGhpcy5fZCA9IChkICsgdGhpcy5fZCkgfCAwCiAgdGhpcy5fZSA9IChlICsgdGhpcy5fZSkgfCAwCiAgdGhpcy5fZiA9IChmICsgdGhpcy5fZikgfCAwCiAgdGhpcy5fZyA9IChnICsgdGhpcy5fZykgfCAwCiAgdGhpcy5faCA9IChoICsgdGhpcy5faCkgfCAwCn0KClNoYTI1Ni5wcm90b3R5cGUuX2hhc2ggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIEggPSBuZXcgQnVmZmVyKDMyKQoKICBILndyaXRlSW50MzJCRSh0aGlzLl9hLCAwKQogIEgud3JpdGVJbnQzMkJFKHRoaXMuX2IsIDQpCiAgSC53cml0ZUludDMyQkUodGhpcy5fYywgOCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9kLCAxMikKICBILndyaXRlSW50MzJCRSh0aGlzLl9lLCAxNikKICBILndyaXRlSW50MzJCRSh0aGlzLl9mLCAyMCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9nLCAyNCkKICBILndyaXRlSW50MzJCRSh0aGlzLl9oLCAyOCkKCiAgcmV0dXJuIEgKfQoKbW9kdWxlLmV4cG9ydHMgPSBTaGEyNTYKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyIuL2hhc2giOjE2MiwiYnVmZmVyIjo3MCwiaW5oZXJpdHMiOjEyOX1dLDE2ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQp2YXIgU0hBNTEyID0gcmVxdWlyZSgnLi9zaGE1MTInKQp2YXIgSGFzaCA9IHJlcXVpcmUoJy4vaGFzaCcpCgp2YXIgVyA9IG5ldyBBcnJheSgxNjApCgpmdW5jdGlvbiBTaGEzODQgKCkgewogIHRoaXMuaW5pdCgpCiAgdGhpcy5fdyA9IFcKCiAgSGFzaC5jYWxsKHRoaXMsIDEyOCwgMTEyKQp9Cgppbmhlcml0cyhTaGEzODQsIFNIQTUxMikKClNoYTM4NC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLl9hID0gMHhjYmJiOWQ1ZCB8IDAKICB0aGlzLl9iID0gMHg2MjlhMjkyYSB8IDAKICB0aGlzLl9jID0gMHg5MTU5MDE1YSB8IDAKICB0aGlzLl9kID0gMHgxNTJmZWNkOCB8IDAKICB0aGlzLl9lID0gMHg2NzMzMjY2NyB8IDAKICB0aGlzLl9mID0gMHg4ZWI0NGE4NyB8IDAKICB0aGlzLl9nID0gMHhkYjBjMmUwZCB8IDAKICB0aGlzLl9oID0gMHg0N2I1NDgxZCB8IDAKCiAgdGhpcy5fYWwgPSAweGMxMDU5ZWQ4IHwgMAogIHRoaXMuX2JsID0gMHgzNjdjZDUwNyB8IDAKICB0aGlzLl9jbCA9IDB4MzA3MGRkMTcgfCAwCiAgdGhpcy5fZGwgPSAweGY3MGU1OTM5IHwgMAogIHRoaXMuX2VsID0gMHhmZmMwMGIzMSB8IDAKICB0aGlzLl9mbCA9IDB4Njg1ODE1MTEgfCAwCiAgdGhpcy5fZ2wgPSAweDY0Zjk4ZmE3IHwgMAogIHRoaXMuX2hsID0gMHhiZWZhNGZhNCB8IDAKCiAgcmV0dXJuIHRoaXMKfQoKU2hhMzg0LnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgSCA9IG5ldyBCdWZmZXIoNDgpCgogIGZ1bmN0aW9uIHdyaXRlSW50NjRCRSAoaCwgbCwgb2Zmc2V0KSB7CiAgICBILndyaXRlSW50MzJCRShoLCBvZmZzZXQpCiAgICBILndyaXRlSW50MzJCRShsLCBvZmZzZXQgKyA0KQogIH0KCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2EsIHRoaXMuX2FsLCAwKQogIHdyaXRlSW50NjRCRSh0aGlzLl9iLCB0aGlzLl9ibCwgOCkKICB3cml0ZUludDY0QkUodGhpcy5fYywgdGhpcy5fY2wsIDE2KQogIHdyaXRlSW50NjRCRSh0aGlzLl9kLCB0aGlzLl9kbCwgMjQpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2UsIHRoaXMuX2VsLCAzMikKICB3cml0ZUludDY0QkUodGhpcy5fZiwgdGhpcy5fZmwsIDQwKQoKICByZXR1cm4gSAp9Cgptb2R1bGUuZXhwb3J0cyA9IFNoYTM4NAoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vaGFzaCI6MTYyLCIuL3NoYTUxMiI6MTY5LCJidWZmZXIiOjcwLCJpbmhlcml0cyI6MTI5fV0sMTY5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChCdWZmZXIpewp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpCnZhciBIYXNoID0gcmVxdWlyZSgnLi9oYXNoJykKCnZhciBLID0gWwogIDB4NDI4YTJmOTgsIDB4ZDcyOGFlMjIsIDB4NzEzNzQ0OTEsIDB4MjNlZjY1Y2QsCiAgMHhiNWMwZmJjZiwgMHhlYzRkM2IyZiwgMHhlOWI1ZGJhNSwgMHg4MTg5ZGJiYywKICAweDM5NTZjMjViLCAweGYzNDhiNTM4LCAweDU5ZjExMWYxLCAweGI2MDVkMDE5LAogIDB4OTIzZjgyYTQsIDB4YWYxOTRmOWIsIDB4YWIxYzVlZDUsIDB4ZGE2ZDgxMTgsCiAgMHhkODA3YWE5OCwgMHhhMzAzMDI0MiwgMHgxMjgzNWIwMSwgMHg0NTcwNmZiZSwKICAweDI0MzE4NWJlLCAweDRlZTRiMjhjLCAweDU1MGM3ZGMzLCAweGQ1ZmZiNGUyLAogIDB4NzJiZTVkNzQsIDB4ZjI3Yjg5NmYsIDB4ODBkZWIxZmUsIDB4M2IxNjk2YjEsCiAgMHg5YmRjMDZhNywgMHgyNWM3MTIzNSwgMHhjMTliZjE3NCwgMHhjZjY5MjY5NCwKICAweGU0OWI2OWMxLCAweDllZjE0YWQyLCAweGVmYmU0Nzg2LCAweDM4NGYyNWUzLAogIDB4MGZjMTlkYzYsIDB4OGI4Y2Q1YjUsIDB4MjQwY2ExY2MsIDB4NzdhYzljNjUsCiAgMHgyZGU5MmM2ZiwgMHg1OTJiMDI3NSwgMHg0YTc0ODRhYSwgMHg2ZWE2ZTQ4MywKICAweDVjYjBhOWRjLCAweGJkNDFmYmQ0LCAweDc2Zjk4OGRhLCAweDgzMTE1M2I1LAogIDB4OTgzZTUxNTIsIDB4ZWU2NmRmYWIsIDB4YTgzMWM2NmQsIDB4MmRiNDMyMTAsCiAgMHhiMDAzMjdjOCwgMHg5OGZiMjEzZiwgMHhiZjU5N2ZjNywgMHhiZWVmMGVlNCwKICAweGM2ZTAwYmYzLCAweDNkYTg4ZmMyLCAweGQ1YTc5MTQ3LCAweDkzMGFhNzI1LAogIDB4MDZjYTYzNTEsIDB4ZTAwMzgyNmYsIDB4MTQyOTI5NjcsIDB4MGEwZTZlNzAsCiAgMHgyN2I3MGE4NSwgMHg0NmQyMmZmYywgMHgyZTFiMjEzOCwgMHg1YzI2YzkyNiwKICAweDRkMmM2ZGZjLCAweDVhYzQyYWVkLCAweDUzMzgwZDEzLCAweDlkOTViM2RmLAogIDB4NjUwYTczNTQsIDB4OGJhZjYzZGUsIDB4NzY2YTBhYmIsIDB4M2M3N2IyYTgsCiAgMHg4MWMyYzkyZSwgMHg0N2VkYWVlNiwgMHg5MjcyMmM4NSwgMHgxNDgyMzUzYiwKICAweGEyYmZlOGExLCAweDRjZjEwMzY0LCAweGE4MWE2NjRiLCAweGJjNDIzMDAxLAogIDB4YzI0YjhiNzAsIDB4ZDBmODk3OTEsIDB4Yzc2YzUxYTMsIDB4MDY1NGJlMzAsCiAgMHhkMTkyZTgxOSwgMHhkNmVmNTIxOCwgMHhkNjk5MDYyNCwgMHg1NTY1YTkxMCwKICAweGY0MGUzNTg1LCAweDU3NzEyMDJhLCAweDEwNmFhMDcwLCAweDMyYmJkMWI4LAogIDB4MTlhNGMxMTYsIDB4YjhkMmQwYzgsIDB4MWUzNzZjMDgsIDB4NTE0MWFiNTMsCiAgMHgyNzQ4Nzc0YywgMHhkZjhlZWI5OSwgMHgzNGIwYmNiNSwgMHhlMTliNDhhOCwKICAweDM5MWMwY2IzLCAweGM1Yzk1YTYzLCAweDRlZDhhYTRhLCAweGUzNDE4YWNiLAogIDB4NWI5Y2NhNGYsIDB4Nzc2M2UzNzMsIDB4NjgyZTZmZjMsIDB4ZDZiMmI4YTMsCiAgMHg3NDhmODJlZSwgMHg1ZGVmYjJmYywgMHg3OGE1NjM2ZiwgMHg0MzE3MmY2MCwKICAweDg0Yzg3ODE0LCAweGExZjBhYjcyLCAweDhjYzcwMjA4LCAweDFhNjQzOWVjLAogIDB4OTBiZWZmZmEsIDB4MjM2MzFlMjgsIDB4YTQ1MDZjZWIsIDB4ZGU4MmJkZTksCiAgMHhiZWY5YTNmNywgMHhiMmM2NzkxNSwgMHhjNjcxNzhmMiwgMHhlMzcyNTMyYiwKICAweGNhMjczZWNlLCAweGVhMjY2MTljLCAweGQxODZiOGM3LCAweDIxYzBjMjA3LAogIDB4ZWFkYTdkZDYsIDB4Y2RlMGViMWUsIDB4ZjU3ZDRmN2YsIDB4ZWU2ZWQxNzgsCiAgMHgwNmYwNjdhYSwgMHg3MjE3NmZiYSwgMHgwYTYzN2RjNSwgMHhhMmM4OThhNiwKICAweDExM2Y5ODA0LCAweGJlZjkwZGFlLCAweDFiNzEwYjM1LCAweDEzMWM0NzFiLAogIDB4MjhkYjc3ZjUsIDB4MjMwNDdkODQsIDB4MzJjYWFiN2IsIDB4NDBjNzI0OTMsCiAgMHgzYzllYmUwYSwgMHgxNWM5YmViYywgMHg0MzFkNjdjNCwgMHg5YzEwMGQ0YywKICAweDRjYzVkNGJlLCAweGNiM2U0MmI2LCAweDU5N2YyOTljLCAweGZjNjU3ZTJhLAogIDB4NWZjYjZmYWIsIDB4M2FkNmZhZWMsIDB4NmM0NDE5OGMsIDB4NGE0NzU4MTcKXQoKdmFyIFcgPSBuZXcgQXJyYXkoMTYwKQoKZnVuY3Rpb24gU2hhNTEyICgpIHsKICB0aGlzLmluaXQoKQogIHRoaXMuX3cgPSBXCgogIEhhc2guY2FsbCh0aGlzLCAxMjgsIDExMikKfQoKaW5oZXJpdHMoU2hhNTEyLCBIYXNoKQoKU2hhNTEyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2EgPSAweDZhMDllNjY3IHwgMAogIHRoaXMuX2IgPSAweGJiNjdhZTg1IHwgMAogIHRoaXMuX2MgPSAweDNjNmVmMzcyIHwgMAogIHRoaXMuX2QgPSAweGE1NGZmNTNhIHwgMAogIHRoaXMuX2UgPSAweDUxMGU1MjdmIHwgMAogIHRoaXMuX2YgPSAweDliMDU2ODhjIHwgMAogIHRoaXMuX2cgPSAweDFmODNkOWFiIHwgMAogIHRoaXMuX2ggPSAweDViZTBjZDE5IHwgMAoKICB0aGlzLl9hbCA9IDB4ZjNiY2M5MDggfCAwCiAgdGhpcy5fYmwgPSAweDg0Y2FhNzNiIHwgMAogIHRoaXMuX2NsID0gMHhmZTk0ZjgyYiB8IDAKICB0aGlzLl9kbCA9IDB4NWYxZDM2ZjEgfCAwCiAgdGhpcy5fZWwgPSAweGFkZTY4MmQxIHwgMAogIHRoaXMuX2ZsID0gMHgyYjNlNmMxZiB8IDAKICB0aGlzLl9nbCA9IDB4ZmI0MWJkNmIgfCAwCiAgdGhpcy5faGwgPSAweDEzN2UyMTc5IHwgMAoKICByZXR1cm4gdGhpcwp9CgpmdW5jdGlvbiBDaCAoeCwgeSwgeikgewogIHJldHVybiB6IF4gKHggJiAoeSBeIHopKQp9CgpmdW5jdGlvbiBNYWogKHgsIHksIHopIHsKICByZXR1cm4gKHggJiB5KSB8ICh6ICYgKHggfCB5KSkKfQoKZnVuY3Rpb24gU2lnbWEwICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMjggfCB4bCA8PCA0KSBeICh4bCA+Pj4gMiB8IHggPDwgMzApIF4gKHhsID4+PiA3IHwgeCA8PCAyNSkKfQoKZnVuY3Rpb24gU2lnbWExICh4LCB4bCkgewogIHJldHVybiAoeCA+Pj4gMTQgfCB4bCA8PCAxOCkgXiAoeCA+Pj4gMTggfCB4bCA8PCAxNCkgXiAoeGwgPj4+IDkgfCB4IDw8IDIzKQp9CgpmdW5jdGlvbiBHYW1tYTAgKHgsIHhsKSB7CiAgcmV0dXJuICh4ID4+PiAxIHwgeGwgPDwgMzEpIF4gKHggPj4+IDggfCB4bCA8PCAyNCkgXiAoeCA+Pj4gNykKfQoKZnVuY3Rpb24gR2FtbWEwbCAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDEgfCB4bCA8PCAzMSkgXiAoeCA+Pj4gOCB8IHhsIDw8IDI0KSBeICh4ID4+PiA3IHwgeGwgPDwgMjUpCn0KCmZ1bmN0aW9uIEdhbW1hMSAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDE5IHwgeGwgPDwgMTMpIF4gKHhsID4+PiAyOSB8IHggPDwgMykgXiAoeCA+Pj4gNikKfQoKZnVuY3Rpb24gR2FtbWExbCAoeCwgeGwpIHsKICByZXR1cm4gKHggPj4+IDE5IHwgeGwgPDwgMTMpIF4gKHhsID4+PiAyOSB8IHggPDwgMykgXiAoeCA+Pj4gNiB8IHhsIDw8IDI2KQp9CgpTaGE1MTIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbiAoTSkgewogIHZhciBXID0gdGhpcy5fdwoKICB2YXIgYSA9IHRoaXMuX2EgfCAwCiAgdmFyIGIgPSB0aGlzLl9iIHwgMAogIHZhciBjID0gdGhpcy5fYyB8IDAKICB2YXIgZCA9IHRoaXMuX2QgfCAwCiAgdmFyIGUgPSB0aGlzLl9lIHwgMAogIHZhciBmID0gdGhpcy5fZiB8IDAKICB2YXIgZyA9IHRoaXMuX2cgfCAwCiAgdmFyIGggPSB0aGlzLl9oIHwgMAoKICB2YXIgYWwgPSB0aGlzLl9hbCB8IDAKICB2YXIgYmwgPSB0aGlzLl9ibCB8IDAKICB2YXIgY2wgPSB0aGlzLl9jbCB8IDAKICB2YXIgZGwgPSB0aGlzLl9kbCB8IDAKICB2YXIgZWwgPSB0aGlzLl9lbCB8IDAKICB2YXIgZmwgPSB0aGlzLl9mbCB8IDAKICB2YXIgZ2wgPSB0aGlzLl9nbCB8IDAKICB2YXIgaGwgPSB0aGlzLl9obCB8IDAKCiAgdmFyIGkgPSAwCiAgdmFyIGogPSAwCiAgdmFyIFdpLCBXaWwKICBmdW5jdGlvbiBjYWxjVyAoKSB7CiAgICB2YXIgeCA9IFdbaiAtIDE1ICogMl0KICAgIHZhciB4bCA9IFdbaiAtIDE1ICogMiArIDFdCiAgICB2YXIgZ2FtbWEwID0gR2FtbWEwKHgsIHhsKQogICAgdmFyIGdhbW1hMGwgPSBHYW1tYTBsKHhsLCB4KQoKICAgIHggPSBXW2ogLSAyICogMl0KICAgIHhsID0gV1tqIC0gMiAqIDIgKyAxXQogICAgdmFyIGdhbW1hMSA9IEdhbW1hMSh4LCB4bCkKICAgIHZhciBnYW1tYTFsID0gR2FtbWExbCh4bCwgeCkKCiAgICAvLyBXW2ldID0gZ2FtbWEwICsgV1tpIC0gN10gKyBnYW1tYTEgKyBXW2kgLSAxNl0KICAgIHZhciBXaTcgPSBXW2ogLSA3ICogMl0KICAgIHZhciBXaTdsID0gV1tqIC0gNyAqIDIgKyAxXQoKICAgIHZhciBXaTE2ID0gV1tqIC0gMTYgKiAyXQogICAgdmFyIFdpMTZsID0gV1tqIC0gMTYgKiAyICsgMV0KCiAgICBXaWwgPSBnYW1tYTBsICsgV2k3bAogICAgV2kgPSBnYW1tYTAgKyBXaTcgKyAoKFdpbCA+Pj4gMCkgPCAoZ2FtbWEwbCA+Pj4gMCkgPyAxIDogMCkKICAgIFdpbCA9IFdpbCArIGdhbW1hMWwKICAgIFdpID0gV2kgKyBnYW1tYTEgKyAoKFdpbCA+Pj4gMCkgPCAoZ2FtbWExbCA+Pj4gMCkgPyAxIDogMCkKICAgIFdpbCA9IFdpbCArIFdpMTZsCiAgICBXaSA9IFdpICsgV2kxNiArICgoV2lsID4+PiAwKSA8IChXaTE2bCA+Pj4gMCkgPyAxIDogMCkKICB9CgogIGZ1bmN0aW9uIGxvb3AgKCkgewogICAgV1tqXSA9IFdpCiAgICBXW2ogKyAxXSA9IFdpbAoKICAgIHZhciBtYWogPSBNYWooYSwgYiwgYykKICAgIHZhciBtYWpsID0gTWFqKGFsLCBibCwgY2wpCgogICAgdmFyIHNpZ21hMGggPSBTaWdtYTAoYSwgYWwpCiAgICB2YXIgc2lnbWEwbCA9IFNpZ21hMChhbCwgYSkKICAgIHZhciBzaWdtYTFoID0gU2lnbWExKGUsIGVsKQogICAgdmFyIHNpZ21hMWwgPSBTaWdtYTEoZWwsIGUpCgogICAgLy8gdDEgPSBoICsgc2lnbWExICsgY2ggKyBLW2ldICsgV1tpXQogICAgdmFyIEtpID0gS1tqXQogICAgdmFyIEtpbCA9IEtbaiArIDFdCgogICAgdmFyIGNoID0gQ2goZSwgZiwgZykKICAgIHZhciBjaGwgPSBDaChlbCwgZmwsIGdsKQoKICAgIHZhciB0MWwgPSBobCArIHNpZ21hMWwKICAgIHZhciB0MSA9IGggKyBzaWdtYTFoICsgKCh0MWwgPj4+IDApIDwgKGhsID4+PiAwKSA/IDEgOiAwKQogICAgdDFsID0gdDFsICsgY2hsCiAgICB0MSA9IHQxICsgY2ggKyAoKHQxbCA+Pj4gMCkgPCAoY2hsID4+PiAwKSA/IDEgOiAwKQogICAgdDFsID0gdDFsICsgS2lsCiAgICB0MSA9IHQxICsgS2kgKyAoKHQxbCA+Pj4gMCkgPCAoS2lsID4+PiAwKSA/IDEgOiAwKQogICAgdDFsID0gdDFsICsgV2lsCiAgICB0MSA9IHQxICsgV2kgKyAoKHQxbCA+Pj4gMCkgPCAoV2lsID4+PiAwKSA/IDEgOiAwKQoKICAgIC8vIHQyID0gc2lnbWEwICsgbWFqCiAgICB2YXIgdDJsID0gc2lnbWEwbCArIG1hamwKICAgIHZhciB0MiA9IHNpZ21hMGggKyBtYWogKyAoKHQybCA+Pj4gMCkgPCAoc2lnbWEwbCA+Pj4gMCkgPyAxIDogMCkKCiAgICBoID0gZwogICAgaGwgPSBnbAogICAgZyA9IGYKICAgIGdsID0gZmwKICAgIGYgPSBlCiAgICBmbCA9IGVsCiAgICBlbCA9IChkbCArIHQxbCkgfCAwCiAgICBlID0gKGQgKyB0MSArICgoZWwgPj4+IDApIDwgKGRsID4+PiAwKSA/IDEgOiAwKSkgfCAwCiAgICBkID0gYwogICAgZGwgPSBjbAogICAgYyA9IGIKICAgIGNsID0gYmwKICAgIGIgPSBhCiAgICBibCA9IGFsCiAgICBhbCA9ICh0MWwgKyB0MmwpIHwgMAogICAgYSA9ICh0MSArIHQyICsgKChhbCA+Pj4gMCkgPCAodDFsID4+PiAwKSA/IDEgOiAwKSkgfCAwCgogICAgaSsrCiAgICBqICs9IDIKICB9CgogIHdoaWxlIChpIDwgMTYpIHsKICAgIFdpID0gTS5yZWFkSW50MzJCRShqICogNCkKICAgIFdpbCA9IE0ucmVhZEludDMyQkUoaiAqIDQgKyA0KQoKICAgIGxvb3AoKQogIH0KCiAgd2hpbGUgKGkgPCA4MCkgewogICAgY2FsY1coKQogICAgbG9vcCgpCiAgfQoKICB0aGlzLl9hbCA9ICh0aGlzLl9hbCArIGFsKSB8IDAKICB0aGlzLl9ibCA9ICh0aGlzLl9ibCArIGJsKSB8IDAKICB0aGlzLl9jbCA9ICh0aGlzLl9jbCArIGNsKSB8IDAKICB0aGlzLl9kbCA9ICh0aGlzLl9kbCArIGRsKSB8IDAKICB0aGlzLl9lbCA9ICh0aGlzLl9lbCArIGVsKSB8IDAKICB0aGlzLl9mbCA9ICh0aGlzLl9mbCArIGZsKSB8IDAKICB0aGlzLl9nbCA9ICh0aGlzLl9nbCArIGdsKSB8IDAKICB0aGlzLl9obCA9ICh0aGlzLl9obCArIGhsKSB8IDAKCiAgdGhpcy5fYSA9ICh0aGlzLl9hICsgYSArICgodGhpcy5fYWwgPj4+IDApIDwgKGFsID4+PiAwKSA/IDEgOiAwKSkgfCAwCiAgdGhpcy5fYiA9ICh0aGlzLl9iICsgYiArICgodGhpcy5fYmwgPj4+IDApIDwgKGJsID4+PiAwKSA/IDEgOiAwKSkgfCAwCiAgdGhpcy5fYyA9ICh0aGlzLl9jICsgYyArICgodGhpcy5fY2wgPj4+IDApIDwgKGNsID4+PiAwKSA/IDEgOiAwKSkgfCAwCiAgdGhpcy5fZCA9ICh0aGlzLl9kICsgZCArICgodGhpcy5fZGwgPj4+IDApIDwgKGRsID4+PiAwKSA/IDEgOiAwKSkgfCAwCiAgdGhpcy5fZSA9ICh0aGlzLl9lICsgZSArICgodGhpcy5fZWwgPj4+IDApIDwgKGVsID4+PiAwKSA/IDEgOiAwKSkgfCAwCiAgdGhpcy5fZiA9ICh0aGlzLl9mICsgZiArICgodGhpcy5fZmwgPj4+IDApIDwgKGZsID4+PiAwKSA/IDEgOiAwKSkgfCAwCiAgdGhpcy5fZyA9ICh0aGlzLl9nICsgZyArICgodGhpcy5fZ2wgPj4+IDApIDwgKGdsID4+PiAwKSA/IDEgOiAwKSkgfCAwCiAgdGhpcy5faCA9ICh0aGlzLl9oICsgaCArICgodGhpcy5faGwgPj4+IDApIDwgKGhsID4+PiAwKSA/IDEgOiAwKSkgfCAwCn0KClNoYTUxMi5wcm90b3R5cGUuX2hhc2ggPSBmdW5jdGlvbiAoKSB7CiAgdmFyIEggPSBuZXcgQnVmZmVyKDY0KQoKICBmdW5jdGlvbiB3cml0ZUludDY0QkUgKGgsIGwsIG9mZnNldCkgewogICAgSC53cml0ZUludDMyQkUoaCwgb2Zmc2V0KQogICAgSC53cml0ZUludDMyQkUobCwgb2Zmc2V0ICsgNCkKICB9CgogIHdyaXRlSW50NjRCRSh0aGlzLl9hLCB0aGlzLl9hbCwgMCkKICB3cml0ZUludDY0QkUodGhpcy5fYiwgdGhpcy5fYmwsIDgpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2MsIHRoaXMuX2NsLCAxNikKICB3cml0ZUludDY0QkUodGhpcy5fZCwgdGhpcy5fZGwsIDI0KQogIHdyaXRlSW50NjRCRSh0aGlzLl9lLCB0aGlzLl9lbCwgMzIpCiAgd3JpdGVJbnQ2NEJFKHRoaXMuX2YsIHRoaXMuX2ZsLCA0MCkKICB3cml0ZUludDY0QkUodGhpcy5fZywgdGhpcy5fZ2wsIDQ4KQogIHdyaXRlSW50NjRCRSh0aGlzLl9oLCB0aGlzLl9obCwgNTYpCgogIHJldHVybiBICn0KCm1vZHVsZS5leHBvcnRzID0gU2hhNTEyCgp9KS5jYWxsKHRoaXMscmVxdWlyZSgiYnVmZmVyIikuQnVmZmVyKQp9LHsiLi9oYXNoIjoxNjIsImJ1ZmZlciI6NzAsImluaGVyaXRzIjoxMjl9XSwxNzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7ZnVuY3Rpb24gcShhKXt0aHJvdyBhO312YXIgcz12b2lkIDAsdT0hMTt2YXIgc2pjbD17Y2lwaGVyOnt9LGhhc2g6e30sa2V5ZXhjaGFuZ2U6e30sbW9kZTp7fSxtaXNjOnt9LGNvZGVjOnt9LGV4Y2VwdGlvbjp7Y29ycnVwdDpmdW5jdGlvbihhKXt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkNPUlJVUFQ6ICIrdGhpcy5tZXNzYWdlfTt0aGlzLm1lc3NhZ2U9YX0saW52YWxpZDpmdW5jdGlvbihhKXt0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIklOVkFMSUQ6ICIrdGhpcy5tZXNzYWdlfTt0aGlzLm1lc3NhZ2U9YX0sYnVnOmZ1bmN0aW9uKGEpe3RoaXMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iQlVHOiAiK3RoaXMubWVzc2FnZX07dGhpcy5tZXNzYWdlPWF9LG5vdFJlYWR5OmZ1bmN0aW9uKGEpe3RoaXMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iTk9UIFJFQURZOiAiK3RoaXMubWVzc2FnZX07dGhpcy5tZXNzYWdlPWF9fX07CiJ1bmRlZmluZWQiIT09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMmJihtb2R1bGUuZXhwb3J0cz1zamNsKTsiZnVuY3Rpb24iPT09dHlwZW9mIGRlZmluZSYmZGVmaW5lKFtdLGZ1bmN0aW9uKCl7cmV0dXJuIHNqY2x9KTsKc2pjbC5jaXBoZXIuYWVzPWZ1bmN0aW9uKGEpe3RoaXMua1swXVswXVswXXx8dGhpcy5EKCk7dmFyIGIsYyxkLGUsZj10aGlzLmtbMF1bNF0sZz10aGlzLmtbMV07Yj1hLmxlbmd0aDt2YXIgaD0xOzQhPT1iJiYoNiE9PWImJjghPT1iKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgiaW52YWxpZCBhZXMga2V5IHNpemUiKSk7dGhpcy5iPVtkPWEuc2xpY2UoMCksZT1bXV07Zm9yKGE9YjthPDQqYisyODthKyspe2M9ZFthLTFdO2lmKDA9PT1hJWJ8fDg9PT1iJiY0PT09YSViKWM9ZltjPj4+MjRdPDwyNF5mW2M+PjE2JjI1NV08PDE2XmZbYz4+OCYyNTVdPDw4XmZbYyYyNTVdLDA9PT1hJWImJihjPWM8PDheYz4+PjI0Xmg8PDI0LGg9aDw8MV4yODMqKGg+PjcpKTtkW2FdPWRbYS1iXV5jfWZvcihiPTA7YTtiKyssYS0tKWM9ZFtiJjM/YTphLTRdLGVbYl09ND49YXx8ND5iP2M6Z1swXVtmW2M+Pj4yNF1dXmdbMV1bZltjPj4xNiYyNTVdXV5nWzJdW2ZbYz4+OCYyNTVdXV5nWzNdW2ZbYyYKMjU1XV19OwpzamNsLmNpcGhlci5hZXMucHJvdG90eXBlPXtlbmNyeXB0OmZ1bmN0aW9uKGEpe3JldHVybiB3KHRoaXMsYSwwKX0sZGVjcnlwdDpmdW5jdGlvbihhKXtyZXR1cm4gdyh0aGlzLGEsMSl9LGs6W1tbXSxbXSxbXSxbXSxbXV0sW1tdLFtdLFtdLFtdLFtdXV0sRDpmdW5jdGlvbigpe3ZhciBhPXRoaXMua1swXSxiPXRoaXMua1sxXSxjPWFbNF0sZD1iWzRdLGUsZixnLGg9W10sbD1bXSxrLG4sbSxwO2ZvcihlPTA7MHgxMDA+ZTtlKyspbFsoaFtlXT1lPDwxXjI4MyooZT4+NykpXmVdPWU7Zm9yKGY9Zz0wOyFjW2ZdO2ZePWt8fDEsZz1sW2ddfHwxKXttPWdeZzw8MV5nPDwyXmc8PDNeZzw8NDttPW0+PjhebSYyNTVeOTk7Y1tmXT1tO2RbbV09ZjtuPWhbZT1oW2s9aFtmXV1dO3A9MHgxMDEwMTAxKm5eMHgxMDAwMSplXjB4MTAxKmteMHgxMDEwMTAwKmY7bj0weDEwMSpoW21dXjB4MTAxMDEwMCptO2ZvcihlPTA7ND5lO2UrKylhW2VdW2ZdPW49bjw8MjRebj4+PjgsYltlXVttXT1wPXA8PDI0XnA+Pj44fWZvcihlPQowOzU+ZTtlKyspYVtlXT1hW2VdLnNsaWNlKDApLGJbZV09YltlXS5zbGljZSgwKX19OwpmdW5jdGlvbiB3KGEsYixjKXs0IT09Yi5sZW5ndGgmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImludmFsaWQgYWVzIGJsb2NrIHNpemUiKSk7dmFyIGQ9YS5iW2NdLGU9YlswXV5kWzBdLGY9YltjPzM6MV1eZFsxXSxnPWJbMl1eZFsyXTtiPWJbYz8xOjNdXmRbM107dmFyIGgsbCxrLG49ZC5sZW5ndGgvNC0yLG0scD00LHQ9WzAsMCwwLDBdO2g9YS5rW2NdO2E9aFswXTt2YXIgcj1oWzFdLHY9aFsyXSx5PWhbM10sej1oWzRdO2ZvcihtPTA7bTxuO20rKyloPWFbZT4+PjI0XV5yW2Y+PjE2JjI1NV1edltnPj44JjI1NV1eeVtiJjI1NV1eZFtwXSxsPWFbZj4+PjI0XV5yW2c+PjE2JjI1NV1edltiPj44JjI1NV1eeVtlJjI1NV1eZFtwKzFdLGs9YVtnPj4+MjRdXnJbYj4+MTYmMjU1XV52W2U+PjgmMjU1XV55W2YmMjU1XV5kW3ArMl0sYj1hW2I+Pj4yNF1ecltlPj4xNiYyNTVdXnZbZj4+OCYyNTVdXnlbZyYyNTVdXmRbcCszXSxwKz00LGU9aCxmPWwsZz1rO2ZvcihtPTA7ND4KbTttKyspdFtjPzMmLW06bV09eltlPj4+MjRdPDwyNF56W2Y+PjE2JjI1NV08PDE2XnpbZz4+OCYyNTVdPDw4XnpbYiYyNTVdXmRbcCsrXSxoPWUsZT1mLGY9ZyxnPWIsYj1oO3JldHVybiB0fQpzamNsLmJpdEFycmF5PXtiaXRTbGljZTpmdW5jdGlvbihhLGIsYyl7YT1zamNsLmJpdEFycmF5LlAoYS5zbGljZShiLzMyKSwzMi0oYiYzMSkpLnNsaWNlKDEpO3JldHVybiBjPT09cz9hOnNqY2wuYml0QXJyYXkuY2xhbXAoYSxjLWIpfSxleHRyYWN0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1NYXRoLmZsb29yKC1iLWMmMzEpO3JldHVybigoYitjLTFeYikmLTMyP2FbYi8zMnwwXTw8MzItZF5hW2IvMzIrMXwwXT4+PmQ6YVtiLzMyfDBdPj4+ZCkmKDE8PGMpLTF9LGNvbmNhdDpmdW5jdGlvbihhLGIpe2lmKDA9PT1hLmxlbmd0aHx8MD09PWIubGVuZ3RoKXJldHVybiBhLmNvbmNhdChiKTt2YXIgYz1hW2EubGVuZ3RoLTFdLGQ9c2pjbC5iaXRBcnJheS5nZXRQYXJ0aWFsKGMpO3JldHVybiAzMj09PWQ/YS5jb25jYXQoYik6c2pjbC5iaXRBcnJheS5QKGIsZCxjfDAsYS5zbGljZSgwLGEubGVuZ3RoLTEpKX0sYml0TGVuZ3RoOmZ1bmN0aW9uKGEpe3ZhciBiPWEubGVuZ3RoO3JldHVybiAwPT09CmI/MDozMiooYi0xKStzamNsLmJpdEFycmF5LmdldFBhcnRpYWwoYVtiLTFdKX0sY2xhbXA6ZnVuY3Rpb24oYSxiKXtpZigzMiphLmxlbmd0aDxiKXJldHVybiBhO2E9YS5zbGljZSgwLE1hdGguY2VpbChiLzMyKSk7dmFyIGM9YS5sZW5ndGg7YiY9MzE7MDxjJiZiJiYoYVtjLTFdPXNqY2wuYml0QXJyYXkucGFydGlhbChiLGFbYy0xXSYyMTQ3NDgzNjQ4Pj5iLTEsMSkpO3JldHVybiBhfSxwYXJ0aWFsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMzI9PT1hP2I6KGM/YnwwOmI8PDMyLWEpKzB4MTAwMDAwMDAwMDAqYX0sZ2V0UGFydGlhbDpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5yb3VuZChhLzB4MTAwMDAwMDAwMDApfHwzMn0sZXF1YWw6ZnVuY3Rpb24oYSxiKXtpZihzamNsLmJpdEFycmF5LmJpdExlbmd0aChhKSE9PXNqY2wuYml0QXJyYXkuYml0TGVuZ3RoKGIpKXJldHVybiB1O3ZhciBjPTAsZDtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWN8PWFbZF1eYltkXTtyZXR1cm4gMD09PQpjfSxQOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlO2U9MDtmb3IoZD09PXMmJihkPVtdKTszMjw9YjtiLT0zMilkLnB1c2goYyksYz0wO2lmKDA9PT1iKXJldHVybiBkLmNvbmNhdChhKTtmb3IoZT0wO2U8YS5sZW5ndGg7ZSsrKWQucHVzaChjfGFbZV0+Pj5iKSxjPWFbZV08PDMyLWI7ZT1hLmxlbmd0aD9hW2EubGVuZ3RoLTFdOjA7YT1zamNsLmJpdEFycmF5LmdldFBhcnRpYWwoZSk7ZC5wdXNoKHNqY2wuYml0QXJyYXkucGFydGlhbChiK2EmMzEsMzI8YithP2M6ZC5wb3AoKSwxKSk7cmV0dXJuIGR9LGw6ZnVuY3Rpb24oYSxiKXtyZXR1cm5bYVswXV5iWzBdLGFbMV1eYlsxXSxhWzJdXmJbMl0sYVszXV5iWzNdXX0sYnl0ZXN3YXBNOmZ1bmN0aW9uKGEpe3ZhciBiLGM7Zm9yKGI9MDtiPGEubGVuZ3RoOysrYiljPWFbYl0sYVtiXT1jPj4+MjR8Yz4+PjgmMHhmZjAwfChjJjB4ZmYwMCk8PDh8Yzw8MjQ7cmV0dXJuIGF9fTsKc2pjbC5jb2RlYy51dGY4U3RyaW5nPXtmcm9tQml0czpmdW5jdGlvbihhKXt2YXIgYj0iIixjPXNqY2wuYml0QXJyYXkuYml0TGVuZ3RoKGEpLGQsZTtmb3IoZD0wO2Q8Yy84O2QrKykwPT09KGQmMykmJihlPWFbZC80XSksYis9U3RyaW5nLmZyb21DaGFyQ29kZShlPj4+MjQpLGU8PD04O3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGIpKX0sdG9CaXRzOmZ1bmN0aW9uKGEpe2E9dW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGEpKTt2YXIgYj1bXSxjLGQ9MDtmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWQ9ZDw8OHxhLmNoYXJDb2RlQXQoYyksMz09PShjJjMpJiYoYi5wdXNoKGQpLGQ9MCk7YyYzJiZiLnB1c2goc2pjbC5iaXRBcnJheS5wYXJ0aWFsKDgqKGMmMyksZCkpO3JldHVybiBifX07CnNqY2wuY29kZWMuaGV4PXtmcm9tQml0czpmdW5jdGlvbihhKXt2YXIgYj0iIixjO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspYis9KChhW2NdfDApKzB4ZjAwMDAwMDAwMDAwKS50b1N0cmluZygxNikuc3Vic3RyKDQpO3JldHVybiBiLnN1YnN0cigwLHNqY2wuYml0QXJyYXkuYml0TGVuZ3RoKGEpLzQpfSx0b0JpdHM6ZnVuY3Rpb24oYSl7dmFyIGIsYz1bXSxkO2E9YS5yZXBsYWNlKC9cc3wweC9nLCIiKTtkPWEubGVuZ3RoO2ErPSIwMDAwMDAwMCI7Zm9yKGI9MDtiPGEubGVuZ3RoO2IrPTgpYy5wdXNoKHBhcnNlSW50KGEuc3Vic3RyKGIsOCksMTYpXjApO3JldHVybiBzamNsLmJpdEFycmF5LmNsYW1wKGMsNCpkKX19OwpzamNsLmNvZGVjLmJhc2U2ND17SjoiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIsZnJvbUJpdHM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIiLGU9MCxmPXNqY2wuY29kZWMuYmFzZTY0LkosZz0wLGg9c2pjbC5iaXRBcnJheS5iaXRMZW5ndGgoYSk7YyYmKGY9Zi5zdWJzdHIoMCw2MikrIi1fIik7Zm9yKGM9MDs2KmQubGVuZ3RoPGg7KWQrPWYuY2hhckF0KChnXmFbY10+Pj5lKT4+PjI2KSw2PmU/KGc9YVtjXTw8Ni1lLGUrPTI2LGMrKyk6KGc8PD02LGUtPTYpO2Zvcig7ZC5sZW5ndGgmMyYmIWI7KWQrPSI9IjtyZXR1cm4gZH0sdG9CaXRzOmZ1bmN0aW9uKGEsYil7YT1hLnJlcGxhY2UoL1xzfD0vZywiIik7dmFyIGM9W10sZCxlPTAsZj1zamNsLmNvZGVjLmJhc2U2NC5KLGc9MCxoO2ImJihmPWYuc3Vic3RyKDAsNjIpKyItXyIpO2ZvcihkPTA7ZDxhLmxlbmd0aDtkKyspaD1mLmluZGV4T2YoYS5jaGFyQXQoZCkpLAowPmgmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoInRoaXMgaXNuJ3QgYmFzZTY0ISIpKSwyNjxlPyhlLT0yNixjLnB1c2goZ15oPj4+ZSksZz1oPDwzMi1lKTooZSs9NixnXj1oPDwzMi1lKTtlJjU2JiZjLnB1c2goc2pjbC5iaXRBcnJheS5wYXJ0aWFsKGUmNTYsZywxKSk7cmV0dXJuIGN9fTtzamNsLmNvZGVjLmJhc2U2NHVybD17ZnJvbUJpdHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHNqY2wuY29kZWMuYmFzZTY0LmZyb21CaXRzKGEsMSwxKX0sdG9CaXRzOmZ1bmN0aW9uKGEpe3JldHVybiBzamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoYSwxKX19O3NqY2wuaGFzaC5zaGEyNTY9ZnVuY3Rpb24oYSl7dGhpcy5iWzBdfHx0aGlzLkQoKTthPyh0aGlzLnI9YS5yLnNsaWNlKDApLHRoaXMubz1hLm8uc2xpY2UoMCksdGhpcy5oPWEuaCk6dGhpcy5yZXNldCgpfTtzamNsLmhhc2guc2hhMjU2Lmhhc2g9ZnVuY3Rpb24oYSl7cmV0dXJuKG5ldyBzamNsLmhhc2guc2hhMjU2KS51cGRhdGUoYSkuZmluYWxpemUoKX07CnNqY2wuaGFzaC5zaGEyNTYucHJvdG90eXBlPXtibG9ja1NpemU6NTEyLHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5yPXRoaXMuTi5zbGljZSgwKTt0aGlzLm89W107dGhpcy5oPTA7cmV0dXJuIHRoaXN9LHVwZGF0ZTpmdW5jdGlvbihhKXsic3RyaW5nIj09PXR5cGVvZiBhJiYoYT1zamNsLmNvZGVjLnV0ZjhTdHJpbmcudG9CaXRzKGEpKTt2YXIgYixjPXRoaXMubz1zamNsLmJpdEFycmF5LmNvbmNhdCh0aGlzLm8sYSk7Yj10aGlzLmg7YT10aGlzLmg9YitzamNsLmJpdEFycmF5LmJpdExlbmd0aChhKTtmb3IoYj01MTIrYiYtNTEyO2I8PWE7Yis9NTEyKXgodGhpcyxjLnNwbGljZSgwLDE2KSk7cmV0dXJuIHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLm8sYz10aGlzLnIsYj1zamNsLmJpdEFycmF5LmNvbmNhdChiLFtzamNsLmJpdEFycmF5LnBhcnRpYWwoMSwxKV0pO2ZvcihhPWIubGVuZ3RoKzI7YSYxNTthKyspYi5wdXNoKDApO2IucHVzaChNYXRoLmZsb29yKHRoaXMuaC8KNDI5NDk2NzI5NikpO2ZvcihiLnB1c2godGhpcy5ofDApO2IubGVuZ3RoOyl4KHRoaXMsYi5zcGxpY2UoMCwxNikpO3RoaXMucmVzZXQoKTtyZXR1cm4gY30sTjpbXSxiOltdLEQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiAweDEwMDAwMDAwMCooYS1NYXRoLmZsb29yKGEpKXwwfXZhciBiPTAsYz0yLGQ7YTpmb3IoOzY0PmI7YysrKXtmb3IoZD0yO2QqZDw9YztkKyspaWYoMD09PWMlZCljb250aW51ZSBhOzg+YiYmKHRoaXMuTltiXT1hKE1hdGgucG93KGMsMC41KSkpO3RoaXMuYltiXT1hKE1hdGgucG93KGMsMS8zKSk7YisrfX19OwpmdW5jdGlvbiB4KGEsYil7dmFyIGMsZCxlLGY9Yi5zbGljZSgwKSxnPWEucixoPWEuYixsPWdbMF0saz1nWzFdLG49Z1syXSxtPWdbM10scD1nWzRdLHQ9Z1s1XSxyPWdbNl0sdj1nWzddO2ZvcihjPTA7NjQ+YztjKyspMTY+Yz9kPWZbY106KGQ9ZltjKzEmMTVdLGU9ZltjKzE0JjE1XSxkPWZbYyYxNV09KGQ+Pj43XmQ+Pj4xOF5kPj4+M15kPDwyNV5kPDwxNCkrKGU+Pj4xN15lPj4+MTleZT4+PjEwXmU8PDE1XmU8PDEzKStmW2MmMTVdK2ZbYys5JjE1XXwwKSxkPWQrdisocD4+PjZecD4+PjExXnA+Pj4yNV5wPDwyNl5wPDwyMV5wPDw3KSsocl5wJih0XnIpKStoW2NdLHY9cixyPXQsdD1wLHA9bStkfDAsbT1uLG49ayxrPWwsbD1kKyhrJm5ebSYoa15uKSkrKGs+Pj4yXms+Pj4xM15rPj4+MjJeazw8MzBeazw8MTleazw8MTApfDA7Z1swXT1nWzBdK2x8MDtnWzFdPWdbMV0ra3wwO2dbMl09Z1syXStufDA7Z1szXT1nWzNdK218MDtnWzRdPWdbNF0rcHwwO2dbNV09Z1s1XSt0fDA7Z1s2XT0KZ1s2XStyfDA7Z1s3XT1nWzddK3Z8MH0Kc2pjbC5tb2RlLmNjbT17bmFtZToiY2NtIixlbmNyeXB0OmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZz1iLnNsaWNlKDApLGg9c2pjbC5iaXRBcnJheSxsPWguYml0TGVuZ3RoKGMpLzgsaz1oLmJpdExlbmd0aChnKS84O2U9ZXx8NjQ7ZD1kfHxbXTs3PmwmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImNjbTogaXYgbXVzdCBiZSBhdCBsZWFzdCA3IGJ5dGVzIikpO2ZvcihmPTI7ND5mJiZrPj4+OCpmO2YrKyk7ZjwxNS1sJiYoZj0xNS1sKTtjPWguY2xhbXAoYyw4KigxNS1mKSk7Yj1zamNsLm1vZGUuY2NtLkwoYSxiLGMsZCxlLGYpO2c9c2pjbC5tb2RlLmNjbS5wKGEsZyxjLGIsZSxmKTtyZXR1cm4gaC5jb25jYXQoZy5kYXRhLGcudGFnKX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsYyxkLGUpe2U9ZXx8NjQ7ZD1kfHxbXTt2YXIgZj1zamNsLmJpdEFycmF5LGc9Zi5iaXRMZW5ndGgoYykvOCxoPWYuYml0TGVuZ3RoKGIpLGw9Zi5jbGFtcChiLGgtZSksaz1mLmJpdFNsaWNlKGIsCmgtZSksaD0oaC1lKS84Ozc+ZyYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgiY2NtOiBpdiBtdXN0IGJlIGF0IGxlYXN0IDcgYnl0ZXMiKSk7Zm9yKGI9Mjs0PmImJmg+Pj44KmI7YisrKTtiPDE1LWcmJihiPTE1LWcpO2M9Zi5jbGFtcChjLDgqKDE1LWIpKTtsPXNqY2wubW9kZS5jY20ucChhLGwsYyxrLGUsYik7YT1zamNsLm1vZGUuY2NtLkwoYSxsLmRhdGEsYyxkLGUsYik7Zi5lcXVhbChsLnRhZyxhKXx8cShuZXcgc2pjbC5leGNlcHRpb24uY29ycnVwdCgiY2NtOiB0YWcgZG9lc24ndCBtYXRjaCIpKTtyZXR1cm4gbC5kYXRhfSxMOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz1bXSxoPXNqY2wuYml0QXJyYXksbD1oLmw7ZS89ODsoZSUyfHw0PmV8fDE2PGUpJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJjY206IGludmFsaWQgdGFnIGxlbmd0aCIpKTsoMHhmZmZmZmZmZjxkLmxlbmd0aHx8MHhmZmZmZmZmZjxiLmxlbmd0aCkmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmJ1ZygiY2NtOiBjYW4ndCBkZWFsIHdpdGggNEdpQiBvciBtb3JlIGRhdGEiKSk7CmY9W2gucGFydGlhbCg4LChkLmxlbmd0aD82NDowKXxlLTI8PDJ8Zi0xKV07Zj1oLmNvbmNhdChmLGMpO2ZbM118PWguYml0TGVuZ3RoKGIpLzg7Zj1hLmVuY3J5cHQoZik7aWYoZC5sZW5ndGgpe2M9aC5iaXRMZW5ndGgoZCkvODs2NTI3OT49Yz9nPVtoLnBhcnRpYWwoMTYsYyldOjB4ZmZmZmZmZmY+PWMmJihnPWguY29uY2F0KFtoLnBhcnRpYWwoMTYsNjU1MzQpXSxbY10pKTtnPWguY29uY2F0KGcsZCk7Zm9yKGQ9MDtkPGcubGVuZ3RoO2QrPTQpZj1hLmVuY3J5cHQobChmLGcuc2xpY2UoZCxkKzQpLmNvbmNhdChbMCwwLDBdKSkpfWZvcihkPTA7ZDxiLmxlbmd0aDtkKz00KWY9YS5lbmNyeXB0KGwoZixiLnNsaWNlKGQsZCs0KS5jb25jYXQoWzAsMCwwXSkpKTtyZXR1cm4gaC5jbGFtcChmLDgqZSl9LHA6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnLGg9c2pjbC5iaXRBcnJheTtnPWgubDt2YXIgbD1iLmxlbmd0aCxrPWguYml0TGVuZ3RoKGIpO2M9aC5jb25jYXQoW2gucGFydGlhbCg4LApmLTEpXSxjKS5jb25jYXQoWzAsMCwwXSkuc2xpY2UoMCw0KTtkPWguYml0U2xpY2UoZyhkLGEuZW5jcnlwdChjKSksMCxlKTtpZighbClyZXR1cm57dGFnOmQsZGF0YTpbXX07Zm9yKGc9MDtnPGw7Zys9NCljWzNdKyssZT1hLmVuY3J5cHQoYyksYltnXV49ZVswXSxiW2crMV1ePWVbMV0sYltnKzJdXj1lWzJdLGJbZyszXV49ZVszXTtyZXR1cm57dGFnOmQsZGF0YTpoLmNsYW1wKGIsayl9fX07CnNqY2wubW9kZS5vY2IyPXtuYW1lOiJvY2IyIixlbmNyeXB0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXsxMjghPT1zamNsLmJpdEFycmF5LmJpdExlbmd0aChjKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgib2NiIGl2IG11c3QgYmUgMTI4IGJpdHMiKSk7dmFyIGcsaD1zamNsLm1vZGUub2NiMi5ILGw9c2pjbC5iaXRBcnJheSxrPWwubCxuPVswLDAsMCwwXTtjPWgoYS5lbmNyeXB0KGMpKTt2YXIgbSxwPVtdO2Q9ZHx8W107ZT1lfHw2NDtmb3IoZz0wO2crNDxiLmxlbmd0aDtnKz00KW09Yi5zbGljZShnLGcrNCksbj1rKG4sbSkscD1wLmNvbmNhdChrKGMsYS5lbmNyeXB0KGsoYyxtKSkpKSxjPWgoYyk7bT1iLnNsaWNlKGcpO2I9bC5iaXRMZW5ndGgobSk7Zz1hLmVuY3J5cHQoayhjLFswLDAsMCxiXSkpO209bC5jbGFtcChrKG0uY29uY2F0KFswLDAsMF0pLGcpLGIpO249ayhuLGsobS5jb25jYXQoWzAsMCwwXSksZykpO249YS5lbmNyeXB0KGsobixrKGMsaChjKSkpKTtkLmxlbmd0aCYmCihuPWsobixmP2Q6c2pjbC5tb2RlLm9jYjIucG1hYyhhLGQpKSk7cmV0dXJuIHAuY29uY2F0KGwuY29uY2F0KG0sbC5jbGFtcChuLGUpKSl9LGRlY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpezEyOCE9PXNqY2wuYml0QXJyYXkuYml0TGVuZ3RoKGMpJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJvY2IgaXYgbXVzdCBiZSAxMjggYml0cyIpKTtlPWV8fDY0O3ZhciBnPXNqY2wubW9kZS5vY2IyLkgsaD1zamNsLmJpdEFycmF5LGw9aC5sLGs9WzAsMCwwLDBdLG49ZyhhLmVuY3J5cHQoYykpLG0scCx0PXNqY2wuYml0QXJyYXkuYml0TGVuZ3RoKGIpLWUscj1bXTtkPWR8fFtdO2ZvcihjPTA7Yys0PHQvMzI7Yys9NCltPWwobixhLmRlY3J5cHQobChuLGIuc2xpY2UoYyxjKzQpKSkpLGs9bChrLG0pLHI9ci5jb25jYXQobSksbj1nKG4pO3A9dC0zMipjO209YS5lbmNyeXB0KGwobixbMCwwLDAscF0pKTttPWwobSxoLmNsYW1wKGIuc2xpY2UoYykscCkuY29uY2F0KFswLDAsMF0pKTsKaz1sKGssbSk7az1hLmVuY3J5cHQobChrLGwobixnKG4pKSkpO2QubGVuZ3RoJiYoaz1sKGssZj9kOnNqY2wubW9kZS5vY2IyLnBtYWMoYSxkKSkpO2guZXF1YWwoaC5jbGFtcChrLGUpLGguYml0U2xpY2UoYix0KSl8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmNvcnJ1cHQoIm9jYjogdGFnIGRvZXNuJ3QgbWF0Y2giKSk7cmV0dXJuIHIuY29uY2F0KGguY2xhbXAobSxwKSl9LHBtYWM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXNqY2wubW9kZS5vY2IyLkgsZT1zamNsLmJpdEFycmF5LGY9ZS5sLGc9WzAsMCwwLDBdLGg9YS5lbmNyeXB0KFswLDAsMCwwXSksaD1mKGgsZChkKGgpKSk7Zm9yKGM9MDtjKzQ8Yi5sZW5ndGg7Yys9NCloPWQoaCksZz1mKGcsYS5lbmNyeXB0KGYoaCxiLnNsaWNlKGMsYys0KSkpKTtjPWIuc2xpY2UoYyk7MTI4PmUuYml0TGVuZ3RoKGMpJiYoaD1mKGgsZChoKSksYz1lLmNvbmNhdChjLFstMjE0NzQ4MzY0OCwwLDAsMF0pKTtnPWYoZyxjKTtyZXR1cm4gYS5lbmNyeXB0KGYoZChmKGgsCmQoaCkpKSxnKSl9LEg6ZnVuY3Rpb24oYSl7cmV0dXJuW2FbMF08PDFeYVsxXT4+PjMxLGFbMV08PDFeYVsyXT4+PjMxLGFbMl08PDFeYVszXT4+PjMxLGFbM108PDFeMTM1KihhWzBdPj4+MzEpXX19OwpzamNsLm1vZGUuZ2NtPXtuYW1lOiJnY20iLGVuY3J5cHQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1iLnNsaWNlKDApO2I9c2pjbC5iaXRBcnJheTtkPWR8fFtdO2E9c2pjbC5tb2RlLmdjbS5wKCEwLGEsZixkLGMsZXx8MTI4KTtyZXR1cm4gYi5jb25jYXQoYS5kYXRhLGEudGFnKX0sZGVjcnlwdDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWIuc2xpY2UoMCksZz1zamNsLmJpdEFycmF5LGg9Zy5iaXRMZW5ndGgoZik7ZT1lfHwxMjg7ZD1kfHxbXTtlPD1oPyhiPWcuYml0U2xpY2UoZixoLWUpLGY9Zy5iaXRTbGljZShmLDAsaC1lKSk6KGI9ZixmPVtdKTthPXNqY2wubW9kZS5nY20ucCh1LGEsZixkLGMsZSk7Zy5lcXVhbChhLnRhZyxiKXx8cShuZXcgc2pjbC5leGNlcHRpb24uY29ycnVwdCgiZ2NtOiB0YWcgZG9lc24ndCBtYXRjaCIpKTtyZXR1cm4gYS5kYXRhfSxaOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZyxoPXNqY2wuYml0QXJyYXkubDtlPVswLDAsMCwwXTtmPWIuc2xpY2UoMCk7CmZvcihjPTA7MTI4PmM7YysrKXsoZD0wIT09KGFbTWF0aC5mbG9vcihjLzMyKV0mMTw8MzEtYyUzMikpJiYoZT1oKGUsZikpO2c9MCE9PShmWzNdJjEpO2ZvcihkPTM7MDxkO2QtLSlmW2RdPWZbZF0+Pj4xfChmW2QtMV0mMSk8PDMxO2ZbMF0+Pj49MTtnJiYoZlswXV49LTB4MWYwMDAwMDApfXJldHVybiBlfSxnOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWMubGVuZ3RoO2I9Yi5zbGljZSgwKTtmb3IoZD0wO2Q8ZTtkKz00KWJbMF1ePTB4ZmZmZmZmZmYmY1tkXSxiWzFdXj0weGZmZmZmZmZmJmNbZCsxXSxiWzJdXj0weGZmZmZmZmZmJmNbZCsyXSxiWzNdXj0weGZmZmZmZmZmJmNbZCszXSxiPXNqY2wubW9kZS5nY20uWihiLGEpO3JldHVybiBifSxwOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZyxoLGwsayxuLG0scCx0LHI9c2pjbC5iaXRBcnJheTttPWMubGVuZ3RoO3A9ci5iaXRMZW5ndGgoYyk7dD1yLmJpdExlbmd0aChkKTtoPXIuYml0TGVuZ3RoKGUpO2c9Yi5lbmNyeXB0KFswLAowLDAsMF0pOzk2PT09aD8oZT1lLnNsaWNlKDApLGU9ci5jb25jYXQoZSxbMV0pKTooZT1zamNsLm1vZGUuZ2NtLmcoZyxbMCwwLDAsMF0sZSksZT1zamNsLm1vZGUuZ2NtLmcoZyxlLFswLDAsTWF0aC5mbG9vcihoLzB4MTAwMDAwMDAwKSxoJjB4ZmZmZmZmZmZdKSk7aD1zamNsLm1vZGUuZ2NtLmcoZyxbMCwwLDAsMF0sZCk7bj1lLnNsaWNlKDApO2Q9aC5zbGljZSgwKTthfHwoZD1zamNsLm1vZGUuZ2NtLmcoZyxoLGMpKTtmb3Ioaz0wO2s8bTtrKz00KW5bM10rKyxsPWIuZW5jcnlwdChuKSxjW2tdXj1sWzBdLGNbaysxXV49bFsxXSxjW2srMl1ePWxbMl0sY1trKzNdXj1sWzNdO2M9ci5jbGFtcChjLHApO2EmJihkPXNqY2wubW9kZS5nY20uZyhnLGgsYykpO2E9W01hdGguZmxvb3IodC8weDEwMDAwMDAwMCksdCYweGZmZmZmZmZmLE1hdGguZmxvb3IocC8weDEwMDAwMDAwMCkscCYweGZmZmZmZmZmXTtkPXNqY2wubW9kZS5nY20uZyhnLGQsYSk7bD1iLmVuY3J5cHQoZSk7ZFswXV49bFswXTsKZFsxXV49bFsxXTtkWzJdXj1sWzJdO2RbM11ePWxbM107cmV0dXJue3RhZzpyLmJpdFNsaWNlKGQsMCxmKSxkYXRhOmN9fX07c2pjbC5taXNjLmhtYWM9ZnVuY3Rpb24oYSxiKXt0aGlzLk09Yj1ifHxzamNsLmhhc2guc2hhMjU2O3ZhciBjPVtbXSxbXV0sZCxlPWIucHJvdG90eXBlLmJsb2NrU2l6ZS8zMjt0aGlzLm49W25ldyBiLG5ldyBiXTthLmxlbmd0aD5lJiYoYT1iLmhhc2goYSkpO2ZvcihkPTA7ZDxlO2QrKyljWzBdW2RdPWFbZF1eOTA5NTIyNDg2LGNbMV1bZF09YVtkXV4xNTQ5NTU2ODI4O3RoaXMublswXS51cGRhdGUoY1swXSk7dGhpcy5uWzFdLnVwZGF0ZShjWzFdKTt0aGlzLkc9bmV3IGIodGhpcy5uWzBdKX07CnNqY2wubWlzYy5obWFjLnByb3RvdHlwZS5lbmNyeXB0PXNqY2wubWlzYy5obWFjLnByb3RvdHlwZS5tYWM9ZnVuY3Rpb24oYSl7dGhpcy5RJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJlbmNyeXB0IG9uIGFscmVhZHkgdXBkYXRlZCBobWFjIGNhbGxlZCEiKSk7dGhpcy51cGRhdGUoYSk7cmV0dXJuIHRoaXMuZGlnZXN0KGEpfTtzamNsLm1pc2MuaG1hYy5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLkc9bmV3IHRoaXMuTSh0aGlzLm5bMF0pO3RoaXMuUT11fTtzamNsLm1pc2MuaG1hYy5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEpe3RoaXMuUT0hMDt0aGlzLkcudXBkYXRlKGEpfTtzamNsLm1pc2MuaG1hYy5wcm90b3R5cGUuZGlnZXN0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5HLmZpbmFsaXplKCksYT0obmV3IHRoaXMuTSh0aGlzLm5bMV0pKS51cGRhdGUoYSkuZmluYWxpemUoKTt0aGlzLnJlc2V0KCk7cmV0dXJuIGF9OwpzamNsLm1pc2MucGJrZGYyPWZ1bmN0aW9uKGEsYixjLGQsZSl7Yz1jfHwxRTM7KDA+ZHx8MD5jKSYmcShzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJpbnZhbGlkIHBhcmFtcyB0byBwYmtkZjIiKSk7InN0cmluZyI9PT10eXBlb2YgYSYmKGE9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhhKSk7InN0cmluZyI9PT10eXBlb2YgYiYmKGI9c2pjbC5jb2RlYy51dGY4U3RyaW5nLnRvQml0cyhiKSk7ZT1lfHxzamNsLm1pc2MuaG1hYzthPW5ldyBlKGEpO3ZhciBmLGcsaCxsLGs9W10sbj1zamNsLmJpdEFycmF5O2ZvcihsPTE7MzIqay5sZW5ndGg8KGR8fDEpO2wrKyl7ZT1mPWEuZW5jcnlwdChuLmNvbmNhdChiLFtsXSkpO2ZvcihnPTE7ZzxjO2crKyl7Zj1hLmVuY3J5cHQoZik7Zm9yKGg9MDtoPGYubGVuZ3RoO2grKyllW2hdXj1mW2hdfWs9ay5jb25jYXQoZSl9ZCYmKGs9bi5jbGFtcChrLGQpKTtyZXR1cm4ga307CnNqY2wucHJuZz1mdW5jdGlvbihhKXt0aGlzLmM9W25ldyBzamNsLmhhc2guc2hhMjU2XTt0aGlzLmk9WzBdO3RoaXMuRj0wO3RoaXMucz17fTt0aGlzLkM9MDt0aGlzLks9e307dGhpcy5PPXRoaXMuZD10aGlzLmo9dGhpcy5XPTA7dGhpcy5iPVswLDAsMCwwLDAsMCwwLDBdO3RoaXMuZj1bMCwwLDAsMF07dGhpcy5BPXM7dGhpcy5CPWE7dGhpcy5xPXU7dGhpcy53PXtwcm9ncmVzczp7fSxzZWVkZWQ6e319O3RoaXMubT10aGlzLlY9MDt0aGlzLnQ9MTt0aGlzLnU9Mjt0aGlzLlM9MHgxMDAwMDt0aGlzLkk9WzAsNDgsNjQsOTYsMTI4LDE5MiwweDEwMCwzODQsNTEyLDc2OCwxMDI0XTt0aGlzLlQ9M0U0O3RoaXMuUj04MH07CnNqY2wucHJuZy5wcm90b3R5cGU9e3JhbmRvbVdvcmRzOmZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZDtkPXRoaXMuaXNSZWFkeShiKTt2YXIgZTtkPT09dGhpcy5tJiZxKG5ldyBzamNsLmV4Y2VwdGlvbi5ub3RSZWFkeSgiZ2VuZXJhdG9yIGlzbid0IHNlZWRlZCIpKTtpZihkJnRoaXMudSl7ZD0hKGQmdGhpcy50KTtlPVtdO3ZhciBmPTAsZzt0aGlzLk89ZVswXT0obmV3IERhdGUpLnZhbHVlT2YoKSt0aGlzLlQ7Zm9yKGc9MDsxNj5nO2crKyllLnB1c2goMHgxMDAwMDAwMDAqTWF0aC5yYW5kb20oKXwwKTtmb3IoZz0wO2c8dGhpcy5jLmxlbmd0aCYmIShlPWUuY29uY2F0KHRoaXMuY1tnXS5maW5hbGl6ZSgpKSxmKz10aGlzLmlbZ10sdGhpcy5pW2ddPTAsIWQmJnRoaXMuRiYxPDxnKTtnKyspO3RoaXMuRj49MTw8dGhpcy5jLmxlbmd0aCYmKHRoaXMuYy5wdXNoKG5ldyBzamNsLmhhc2guc2hhMjU2KSx0aGlzLmkucHVzaCgwKSk7dGhpcy5kLT1mO2Y+dGhpcy5qJiYodGhpcy5qPWYpO3RoaXMuRisrOwp0aGlzLmI9c2pjbC5oYXNoLnNoYTI1Ni5oYXNoKHRoaXMuYi5jb25jYXQoZSkpO3RoaXMuQT1uZXcgc2pjbC5jaXBoZXIuYWVzKHRoaXMuYik7Zm9yKGQ9MDs0PmQmJiEodGhpcy5mW2RdPXRoaXMuZltkXSsxfDAsdGhpcy5mW2RdKTtkKyspO31mb3IoZD0wO2Q8YTtkKz00KTA9PT0oZCsxKSV0aGlzLlMmJkEodGhpcyksZT1CKHRoaXMpLGMucHVzaChlWzBdLGVbMV0sZVsyXSxlWzNdKTtBKHRoaXMpO3JldHVybiBjLnNsaWNlKDAsYSl9LHNldERlZmF1bHRQYXJhbm9pYTpmdW5jdGlvbihhLGIpezA9PT1hJiYiU2V0dGluZyBwYXJhbm9pYT0wIHdpbGwgcnVpbiB5b3VyIHNlY3VyaXR5OyB1c2UgaXQgb25seSBmb3IgdGVzdGluZyIhPT1iJiZxKCJTZXR0aW5nIHBhcmFub2lhPTAgd2lsbCBydWluIHlvdXIgc2VjdXJpdHk7IHVzZSBpdCBvbmx5IGZvciB0ZXN0aW5nIik7dGhpcy5CPWF9LGFkZEVudHJvcHk6ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8InVzZXIiO3ZhciBkLGUsZj0obmV3IERhdGUpLnZhbHVlT2YoKSwKZz10aGlzLnNbY10saD10aGlzLmlzUmVhZHkoKSxsPTA7ZD10aGlzLktbY107ZD09PXMmJihkPXRoaXMuS1tjXT10aGlzLlcrKyk7Zz09PXMmJihnPXRoaXMuc1tjXT0wKTt0aGlzLnNbY109KHRoaXMuc1tjXSsxKSV0aGlzLmMubGVuZ3RoO3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSAibnVtYmVyIjpiPT09cyYmKGI9MSk7dGhpcy5jW2ddLnVwZGF0ZShbZCx0aGlzLkMrKywxLGIsZiwxLGF8MF0pO2JyZWFrO2Nhc2UgIm9iamVjdCI6Yz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSk7aWYoIltvYmplY3QgVWludDMyQXJyYXldIj09PWMpe2U9W107Zm9yKGM9MDtjPGEubGVuZ3RoO2MrKyllLnB1c2goYVtjXSk7YT1lfWVsc2V7IltvYmplY3QgQXJyYXldIiE9PWMmJihsPTEpO2ZvcihjPTA7YzxhLmxlbmd0aCYmIWw7YysrKSJudW1iZXIiIT09dHlwZW9mIGFbY10mJihsPTEpfWlmKCFsKXtpZihiPT09cylmb3IoYz1iPTA7YzxhLmxlbmd0aDtjKyspZm9yKGU9YVtjXTswPGU7KWIrKywKZT4+Pj0xO3RoaXMuY1tnXS51cGRhdGUoW2QsdGhpcy5DKyssMixiLGYsYS5sZW5ndGhdLmNvbmNhdChhKSl9YnJlYWs7Y2FzZSAic3RyaW5nIjpiPT09cyYmKGI9YS5sZW5ndGgpO3RoaXMuY1tnXS51cGRhdGUoW2QsdGhpcy5DKyssMyxiLGYsYS5sZW5ndGhdKTt0aGlzLmNbZ10udXBkYXRlKGEpO2JyZWFrO2RlZmF1bHQ6bD0xfWwmJnEobmV3IHNqY2wuZXhjZXB0aW9uLmJ1ZygicmFuZG9tOiBhZGRFbnRyb3B5IG9ubHkgc3VwcG9ydHMgbnVtYmVyLCBhcnJheSBvZiBudW1iZXJzIG9yIHN0cmluZyIpKTt0aGlzLmlbZ10rPWI7dGhpcy5kKz1iO2g9PT10aGlzLm0mJih0aGlzLmlzUmVhZHkoKSE9PXRoaXMubSYmQygic2VlZGVkIixNYXRoLm1heCh0aGlzLmosdGhpcy5kKSksQygicHJvZ3Jlc3MiLHRoaXMuZ2V0UHJvZ3Jlc3MoKSkpfSxpc1JlYWR5OmZ1bmN0aW9uKGEpe2E9dGhpcy5JW2EhPT1zP2E6dGhpcy5CXTtyZXR1cm4gdGhpcy5qJiZ0aGlzLmo+PWE/dGhpcy5pWzBdPnRoaXMuUiYmCihuZXcgRGF0ZSkudmFsdWVPZigpPnRoaXMuTz90aGlzLnV8dGhpcy50OnRoaXMudDp0aGlzLmQ+PWE/dGhpcy51fHRoaXMubTp0aGlzLm19LGdldFByb2dyZXNzOmZ1bmN0aW9uKGEpe2E9dGhpcy5JW2E/YTp0aGlzLkJdO3JldHVybiB0aGlzLmo+PWE/MTp0aGlzLmQ+YT8xOnRoaXMuZC9hfSxzdGFydENvbGxlY3RvcnM6ZnVuY3Rpb24oKXt0aGlzLnF8fCh0aGlzLmE9e2xvYWRUaW1lQ29sbGVjdG9yOkQodGhpcyx0aGlzLmFhKSxtb3VzZUNvbGxlY3RvcjpEKHRoaXMsdGhpcy5iYSksa2V5Ym9hcmRDb2xsZWN0b3I6RCh0aGlzLHRoaXMuJCksYWNjZWxlcm9tZXRlckNvbGxlY3RvcjpEKHRoaXMsdGhpcy5VKSx0b3VjaENvbGxlY3RvcjpEKHRoaXMsdGhpcy5kYSl9LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyPyh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsdGhpcy5hLmxvYWRUaW1lQ29sbGVjdG9yLHUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuYS5tb3VzZUNvbGxlY3RvciwKdSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleXByZXNzIix0aGlzLmEua2V5Ym9hcmRDb2xsZWN0b3IsdSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImRldmljZW1vdGlvbiIsdGhpcy5hLmFjY2VsZXJvbWV0ZXJDb2xsZWN0b3IsdSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsdGhpcy5hLnRvdWNoQ29sbGVjdG9yLHUpKTpkb2N1bWVudC5hdHRhY2hFdmVudD8oZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ubG9hZCIsdGhpcy5hLmxvYWRUaW1lQ29sbGVjdG9yKSxkb2N1bWVudC5hdHRhY2hFdmVudCgib25tb3VzZW1vdmUiLHRoaXMuYS5tb3VzZUNvbGxlY3RvciksZG9jdW1lbnQuYXR0YWNoRXZlbnQoImtleXByZXNzIix0aGlzLmEua2V5Ym9hcmRDb2xsZWN0b3IpKTpxKG5ldyBzamNsLmV4Y2VwdGlvbi5idWcoImNhbid0IGF0dGFjaCBldmVudCIpKSx0aGlzLnE9ITApfSxzdG9wQ29sbGVjdG9yczpmdW5jdGlvbigpe3RoaXMucSYmKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyPwood2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLHRoaXMuYS5sb2FkVGltZUNvbGxlY3Rvcix1KSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLmEubW91c2VDb2xsZWN0b3IsdSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleXByZXNzIix0aGlzLmEua2V5Ym9hcmRDb2xsZWN0b3IsdSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImRldmljZW1vdGlvbiIsdGhpcy5hLmFjY2VsZXJvbWV0ZXJDb2xsZWN0b3IsdSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNobW92ZSIsdGhpcy5hLnRvdWNoQ29sbGVjdG9yLHUpKTpkb2N1bWVudC5kZXRhY2hFdmVudCYmKGRvY3VtZW50LmRldGFjaEV2ZW50KCJvbmxvYWQiLHRoaXMuYS5sb2FkVGltZUNvbGxlY3RvciksZG9jdW1lbnQuZGV0YWNoRXZlbnQoIm9ubW91c2Vtb3ZlIix0aGlzLmEubW91c2VDb2xsZWN0b3IpLGRvY3VtZW50LmRldGFjaEV2ZW50KCJrZXlwcmVzcyIsCnRoaXMuYS5rZXlib2FyZENvbGxlY3RvcikpLHRoaXMucT11KX0sYWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe3RoaXMud1thXVt0aGlzLlYrK109Yn0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT10aGlzLndbYV0sZj1bXTtmb3IoZCBpbiBlKWUuaGFzT3duUHJvcGVydHkoZCkmJmVbZF09PT1iJiZmLnB1c2goZCk7Zm9yKGM9MDtjPGYubGVuZ3RoO2MrKylkPWZbY10sZGVsZXRlIGVbZF19LCQ6ZnVuY3Rpb24oKXtFKDEpfSxiYTpmdW5jdGlvbihhKXt2YXIgYixjO3RyeXtiPWEueHx8YS5jbGllbnRYfHxhLm9mZnNldFh8fDAsYz1hLnl8fGEuY2xpZW50WXx8YS5vZmZzZXRZfHwwfWNhdGNoKGQpe2M9Yj0wfTAhPWImJjAhPWMmJnNqY2wucmFuZG9tLmFkZEVudHJvcHkoW2IsY10sMiwibW91c2UiKTtFKDApfSxkYTpmdW5jdGlvbihhKXthPWEudG91Y2hlc1swXXx8YS5jaGFuZ2VkVG91Y2hlc1swXTtzamNsLnJhbmRvbS5hZGRFbnRyb3B5KFthLnBhZ2VYfHwKYS5jbGllbnRYLGEucGFnZVl8fGEuY2xpZW50WV0sMSwidG91Y2giKTtFKDApfSxhYTpmdW5jdGlvbigpe0UoMil9LFU6ZnVuY3Rpb24oYSl7YT1hLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHkueHx8YS5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5Lnl8fGEuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eS56O2lmKHdpbmRvdy5vcmllbnRhdGlvbil7dmFyIGI9d2luZG93Lm9yaWVudGF0aW9uOyJudW1iZXIiPT09dHlwZW9mIGImJnNqY2wucmFuZG9tLmFkZEVudHJvcHkoYiwxLCJhY2NlbGVyb21ldGVyIil9YSYmc2pjbC5yYW5kb20uYWRkRW50cm9weShhLDIsImFjY2VsZXJvbWV0ZXIiKTtFKDApfX07ZnVuY3Rpb24gQyhhLGIpe3ZhciBjLGQ9c2pjbC5yYW5kb20ud1thXSxlPVtdO2ZvcihjIGluIGQpZC5oYXNPd25Qcm9wZXJ0eShjKSYmZS5wdXNoKGRbY10pO2ZvcihjPTA7YzxlLmxlbmd0aDtjKyspZVtjXShiKX0KZnVuY3Rpb24gRShhKXsidW5kZWZpbmVkIiE9PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5wZXJmb3JtYW5jZSYmImZ1bmN0aW9uIj09PXR5cGVvZiB3aW5kb3cucGVyZm9ybWFuY2Uubm93P3NqY2wucmFuZG9tLmFkZEVudHJvcHkod2luZG93LnBlcmZvcm1hbmNlLm5vdygpLGEsImxvYWR0aW1lIik6c2pjbC5yYW5kb20uYWRkRW50cm9weSgobmV3IERhdGUpLnZhbHVlT2YoKSxhLCJsb2FkdGltZSIpfWZ1bmN0aW9uIEEoYSl7YS5iPUIoYSkuY29uY2F0KEIoYSkpO2EuQT1uZXcgc2pjbC5jaXBoZXIuYWVzKGEuYil9ZnVuY3Rpb24gQihhKXtmb3IodmFyIGI9MDs0PmImJiEoYS5mW2JdPWEuZltiXSsxfDAsYS5mW2JdKTtiKyspO3JldHVybiBhLkEuZW5jcnlwdChhLmYpfWZ1bmN0aW9uIEQoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtiLmFwcGx5KGEsYXJndW1lbnRzKX19c2pjbC5yYW5kb209bmV3IHNqY2wucHJuZyg2KTsKYTp0cnl7dmFyIEYsRyxILEk7aWYoST0idW5kZWZpbmVkIiE9PXR5cGVvZiBtb2R1bGUpe3ZhciBKO2lmKEo9bW9kdWxlLmV4cG9ydHMpe3ZhciBLO3RyeXtLPXJlcXVpcmUoImNyeXB0byIpfWNhdGNoKEwpe0s9bnVsbH1KPShHPUspJiZHLnJhbmRvbUJ5dGVzfUk9Sn1pZihJKUY9Ry5yYW5kb21CeXRlcygxMjgpLEY9bmV3IFVpbnQzMkFycmF5KChuZXcgVWludDhBcnJheShGKSkuYnVmZmVyKSxzamNsLnJhbmRvbS5hZGRFbnRyb3B5KEYsMTAyNCwiY3J5cHRvWydyYW5kb21CeXRlcyddIik7ZWxzZSBpZigidW5kZWZpbmVkIiE9PXR5cGVvZiB3aW5kb3cmJiJ1bmRlZmluZWQiIT09dHlwZW9mIFVpbnQzMkFycmF5KXtIPW5ldyBVaW50MzJBcnJheSgzMik7aWYod2luZG93LmNyeXB0byYmd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoSCk7ZWxzZSBpZih3aW5kb3cubXNDcnlwdG8mJndpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMpd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyhIKTsKZWxzZSBicmVhayBhO3NqY2wucmFuZG9tLmFkZEVudHJvcHkoSCwxMDI0LCJjcnlwdG9bJ2dldFJhbmRvbVZhbHVlcyddIil9fWNhdGNoKE0peyJ1bmRlZmluZWQiIT09dHlwZW9mIHdpbmRvdyYmd2luZG93LmNvbnNvbGUmJihjb25zb2xlLmxvZygiVGhlcmUgd2FzIGFuIGVycm9yIGNvbGxlY3RpbmcgZW50cm9weSBmcm9tIHRoZSBicm93c2VyOiIpLGNvbnNvbGUubG9nKE0pKX0Kc2pjbC5qc29uPXtkZWZhdWx0czp7djoxLGl0ZXI6MUUzLGtzOjEyOCx0czo2NCxtb2RlOiJjY20iLGFkYXRhOiIiLGNpcGhlcjoiYWVzIn0sWTpmdW5jdGlvbihhLGIsYyxkKXtjPWN8fHt9O2Q9ZHx8e307dmFyIGU9c2pjbC5qc29uLGY9ZS5lKHtpdjpzamNsLnJhbmRvbS5yYW5kb21Xb3Jkcyg0LDApfSxlLmRlZmF1bHRzKSxnO2UuZShmLGMpO2M9Zi5hZGF0YTsic3RyaW5nIj09PXR5cGVvZiBmLnNhbHQmJihmLnNhbHQ9c2pjbC5jb2RlYy5iYXNlNjQudG9CaXRzKGYuc2FsdCkpOyJzdHJpbmciPT09dHlwZW9mIGYuaXYmJihmLml2PXNqY2wuY29kZWMuYmFzZTY0LnRvQml0cyhmLml2KSk7KCFzamNsLm1vZGVbZi5tb2RlXXx8IXNqY2wuY2lwaGVyW2YuY2lwaGVyXXx8InN0cmluZyI9PT10eXBlb2YgYSYmMTAwPj1mLml0ZXJ8fDY0IT09Zi50cyYmOTYhPT1mLnRzJiYxMjghPT1mLnRzfHwxMjghPT1mLmtzJiYxOTIhPT1mLmtzJiYweDEwMCE9PWYua3N8fDI+Zi5pdi5sZW5ndGh8fDQ8CmYuaXYubGVuZ3RoKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgianNvbiBlbmNyeXB0OiBpbnZhbGlkIHBhcmFtZXRlcnMiKSk7InN0cmluZyI9PT10eXBlb2YgYT8oZz1zamNsLm1pc2MuY2FjaGVkUGJrZGYyKGEsZiksYT1nLmtleS5zbGljZSgwLGYua3MvMzIpLGYuc2FsdD1nLnNhbHQpOnNqY2wuZWNjJiZhIGluc3RhbmNlb2Ygc2pjbC5lY2MuZWxHYW1hbC5wdWJsaWNLZXkmJihnPWEua2VtKCksZi5rZW10YWc9Zy50YWcsYT1nLmtleS5zbGljZSgwLGYua3MvMzIpKTsic3RyaW5nIj09PXR5cGVvZiBiJiYoYj1zamNsLmNvZGVjLnV0ZjhTdHJpbmcudG9CaXRzKGIpKTsic3RyaW5nIj09PXR5cGVvZiBjJiYoZi5hZGF0YT1jPXNqY2wuY29kZWMudXRmOFN0cmluZy50b0JpdHMoYykpO2c9bmV3IHNqY2wuY2lwaGVyW2YuY2lwaGVyXShhKTtlLmUoZCxmKTtkLmtleT1hO2YuY3Q9c2pjbC5tb2RlW2YubW9kZV0uZW5jcnlwdChnLGIsZi5pdixjLGYudHMpO3JldHVybiBmfSwKZW5jcnlwdDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1zamNsLmpzb24sZj1lLlkuYXBwbHkoZSxhcmd1bWVudHMpO3JldHVybiBlLmVuY29kZShmKX0sWDpmdW5jdGlvbihhLGIsYyxkKXtjPWN8fHt9O2Q9ZHx8e307dmFyIGU9c2pjbC5qc29uO2I9ZS5lKGUuZShlLmUoe30sZS5kZWZhdWx0cyksYiksYywhMCk7dmFyIGYsZztmPWIuYWRhdGE7InN0cmluZyI9PT10eXBlb2YgYi5zYWx0JiYoYi5zYWx0PXNqY2wuY29kZWMuYmFzZTY0LnRvQml0cyhiLnNhbHQpKTsic3RyaW5nIj09PXR5cGVvZiBiLml2JiYoYi5pdj1zamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoYi5pdikpOyghc2pjbC5tb2RlW2IubW9kZV18fCFzamNsLmNpcGhlcltiLmNpcGhlcl18fCJzdHJpbmciPT09dHlwZW9mIGEmJjEwMD49Yi5pdGVyfHw2NCE9PWIudHMmJjk2IT09Yi50cyYmMTI4IT09Yi50c3x8MTI4IT09Yi5rcyYmMTkyIT09Yi5rcyYmMHgxMDAhPT1iLmtzfHwhYi5pdnx8Mj5iLml2Lmxlbmd0aHx8NDxiLml2Lmxlbmd0aCkmJgpxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJqc29uIGRlY3J5cHQ6IGludmFsaWQgcGFyYW1ldGVycyIpKTsic3RyaW5nIj09PXR5cGVvZiBhPyhnPXNqY2wubWlzYy5jYWNoZWRQYmtkZjIoYSxiKSxhPWcua2V5LnNsaWNlKDAsYi5rcy8zMiksYi5zYWx0PWcuc2FsdCk6c2pjbC5lY2MmJmEgaW5zdGFuY2VvZiBzamNsLmVjYy5lbEdhbWFsLnNlY3JldEtleSYmKGE9YS51bmtlbShzamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoYi5rZW10YWcpKS5zbGljZSgwLGIua3MvMzIpKTsic3RyaW5nIj09PXR5cGVvZiBmJiYoZj1zamNsLmNvZGVjLnV0ZjhTdHJpbmcudG9CaXRzKGYpKTtnPW5ldyBzamNsLmNpcGhlcltiLmNpcGhlcl0oYSk7Zj1zamNsLm1vZGVbYi5tb2RlXS5kZWNyeXB0KGcsYi5jdCxiLml2LGYsYi50cyk7ZS5lKGQsYik7ZC5rZXk9YTtyZXR1cm4gMT09PWMucmF3P2Y6c2pjbC5jb2RlYy51dGY4U3RyaW5nLmZyb21CaXRzKGYpfSxkZWNyeXB0OmZ1bmN0aW9uKGEsYiwKYyxkKXt2YXIgZT1zamNsLmpzb247cmV0dXJuIGUuWChhLGUuZGVjb2RlKGIpLGMsZCl9LGVuY29kZTpmdW5jdGlvbihhKXt2YXIgYixjPSJ7IixkPSIiO2ZvcihiIGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eShiKSlzd2l0Y2goYi5tYXRjaCgvXlthLXowLTldKyQvaSl8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImpzb24gZW5jb2RlOiBpbnZhbGlkIHByb3BlcnR5IG5hbWUiKSksYys9ZCsnIicrYisnIjonLGQ9IiwiLHR5cGVvZiBhW2JdKXtjYXNlICJudW1iZXIiOmNhc2UgImJvb2xlYW4iOmMrPWFbYl07YnJlYWs7Y2FzZSAic3RyaW5nIjpjKz0nIicrZXNjYXBlKGFbYl0pKyciJzticmVhaztjYXNlICJvYmplY3QiOmMrPSciJytzamNsLmNvZGVjLmJhc2U2NC5mcm9tQml0cyhhW2JdLDApKyciJzticmVhaztkZWZhdWx0OnEobmV3IHNqY2wuZXhjZXB0aW9uLmJ1ZygianNvbiBlbmNvZGU6IHVuc3VwcG9ydGVkIHR5cGUiKSl9cmV0dXJuIGMrIn0ifSxkZWNvZGU6ZnVuY3Rpb24oYSl7YT0KYS5yZXBsYWNlKC9ccy9nLCIiKTthLm1hdGNoKC9eXHsuKlx9JC8pfHxxKG5ldyBzamNsLmV4Y2VwdGlvbi5pbnZhbGlkKCJqc29uIGRlY29kZTogdGhpcyBpc24ndCBqc29uISIpKTthPWEucmVwbGFjZSgvXlx7fFx9JC9nLCIiKS5zcGxpdCgvLC8pO3ZhciBiPXt9LGMsZDtmb3IoYz0wO2M8YS5sZW5ndGg7YysrKShkPWFbY10ubWF0Y2goL15ccyooPzooWyInXT8pKFthLXpdW2EtejAtOV0qKVwxKVxzKjpccyooPzooLT9cZCspfCIoW2EtejAtOStcLyUqXy5APVwtXSopInwodHJ1ZXxmYWxzZSkpJC9pKSl8fHEobmV3IHNqY2wuZXhjZXB0aW9uLmludmFsaWQoImpzb24gZGVjb2RlOiB0aGlzIGlzbid0IGpzb24hIikpLGRbM10/YltkWzJdXT1wYXJzZUludChkWzNdLDEwKTpkWzRdP2JbZFsyXV09ZFsyXS5tYXRjaCgvXihjdHxhZGF0YXxzYWx0fGl2KSQvKT9zamNsLmNvZGVjLmJhc2U2NC50b0JpdHMoZFs0XSk6dW5lc2NhcGUoZFs0XSk6ZFs1XSYmKGJbZFsyXV09InRydWUiPT09CmRbNV0pO3JldHVybiBifSxlOmZ1bmN0aW9uKGEsYixjKXthPT09cyYmKGE9e30pO2lmKGI9PT1zKXJldHVybiBhO2Zvcih2YXIgZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJihjJiYoYVtkXSE9PXMmJmFbZF0hPT1iW2RdKSYmcShuZXcgc2pjbC5leGNlcHRpb24uaW52YWxpZCgicmVxdWlyZWQgcGFyYW1ldGVyIG92ZXJyaWRkZW4iKSksYVtkXT1iW2RdKTtyZXR1cm4gYX0sZmE6ZnVuY3Rpb24oYSxiKXt2YXIgYz17fSxkO2ZvcihkIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShkKSYmYVtkXSE9PWJbZF0mJihjW2RdPWFbZF0pO3JldHVybiBjfSxlYTpmdW5jdGlvbihhLGIpe3ZhciBjPXt9LGQ7Zm9yKGQ9MDtkPGIubGVuZ3RoO2QrKylhW2JbZF1dIT09cyYmKGNbYltkXV09YVtiW2RdXSk7cmV0dXJuIGN9fTtzamNsLmVuY3J5cHQ9c2pjbC5qc29uLmVuY3J5cHQ7c2pjbC5kZWNyeXB0PXNqY2wuanNvbi5kZWNyeXB0O3NqY2wubWlzYy5jYT17fTsKc2pjbC5taXNjLmNhY2hlZFBia2RmMj1mdW5jdGlvbihhLGIpe3ZhciBjPXNqY2wubWlzYy5jYSxkO2I9Ynx8e307ZD1iLml0ZXJ8fDFFMztjPWNbYV09Y1thXXx8e307ZD1jW2RdPWNbZF18fHtmaXJzdFNhbHQ6Yi5zYWx0JiZiLnNhbHQubGVuZ3RoP2Iuc2FsdC5zbGljZSgwKTpzamNsLnJhbmRvbS5yYW5kb21Xb3JkcygyLDApfTtjPWIuc2FsdD09PXM/ZC5maXJzdFNhbHQ6Yi5zYWx0O2RbY109ZFtjXXx8c2pjbC5taXNjLnBia2RmMihhLGMsYi5pdGVyKTtyZXR1cm57a2V5OmRbY10uc2xpY2UoMCksc2FsdDpjLnNsaWNlKDApfX07Cgp9LHsiY3J5cHRvIjo4Nn1dLDE3MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCm1vZHVsZS5leHBvcnRzID0gU3RyZWFtOwoKdmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwoKaW5oZXJpdHMoU3RyZWFtLCBFRSk7ClN0cmVhbS5SZWFkYWJsZSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qcycpOwpTdHJlYW0uV3JpdGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMnKTsKU3RyZWFtLkR1cGxleCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9kdXBsZXguanMnKTsKU3RyZWFtLlRyYW5zZm9ybSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS90cmFuc2Zvcm0uanMnKTsKU3RyZWFtLlBhc3NUaHJvdWdoID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3Bhc3N0aHJvdWdoLmpzJyk7CgovLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjQueApTdHJlYW0uU3RyZWFtID0gU3RyZWFtOwoKCgovLyBvbGQtc3R5bGUgc3RyZWFtcy4gIE5vdGUgdGhhdCB0aGUgcGlwZSBtZXRob2QgKHRoZSBvbmx5IHJlbGV2YW50Ci8vIHBhcnQgb2YgdGhpcyBjbGFzcykgaXMgb3ZlcnJpZGRlbiBpbiB0aGUgUmVhZGFibGUgY2xhc3MuCgpmdW5jdGlvbiBTdHJlYW0oKSB7CiAgRUUuY2FsbCh0aGlzKTsKfQoKU3RyZWFtLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oZGVzdCwgb3B0aW9ucykgewogIHZhciBzb3VyY2UgPSB0aGlzOwoKICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHsKICAgIGlmIChkZXN0LndyaXRhYmxlKSB7CiAgICAgIGlmIChmYWxzZSA9PT0gZGVzdC53cml0ZShjaHVuaykgJiYgc291cmNlLnBhdXNlKSB7CiAgICAgICAgc291cmNlLnBhdXNlKCk7CiAgICAgIH0KICAgIH0KICB9CgogIHNvdXJjZS5vbignZGF0YScsIG9uZGF0YSk7CgogIGZ1bmN0aW9uIG9uZHJhaW4oKSB7CiAgICBpZiAoc291cmNlLnJlYWRhYmxlICYmIHNvdXJjZS5yZXN1bWUpIHsKICAgICAgc291cmNlLnJlc3VtZSgpOwogICAgfQogIH0KCiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTsKCiAgLy8gSWYgdGhlICdlbmQnIG9wdGlvbiBpcyBub3Qgc3VwcGxpZWQsIGRlc3QuZW5kKCkgd2lsbCBiZSBjYWxsZWQgd2hlbgogIC8vIHNvdXJjZSBnZXRzIHRoZSAnZW5kJyBvciAnY2xvc2UnIGV2ZW50cy4gIE9ubHkgZGVzdC5lbmQoKSBvbmNlLgogIGlmICghZGVzdC5faXNTdGRpbyAmJiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5lbmQgIT09IGZhbHNlKSkgewogICAgc291cmNlLm9uKCdlbmQnLCBvbmVuZCk7CiAgICBzb3VyY2Uub24oJ2Nsb3NlJywgb25jbG9zZSk7CiAgfQoKICB2YXIgZGlkT25FbmQgPSBmYWxzZTsKICBmdW5jdGlvbiBvbmVuZCgpIHsKICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuOwogICAgZGlkT25FbmQgPSB0cnVlOwoKICAgIGRlc3QuZW5kKCk7CiAgfQoKCiAgZnVuY3Rpb24gb25jbG9zZSgpIHsKICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuOwogICAgZGlkT25FbmQgPSB0cnVlOwoKICAgIGlmICh0eXBlb2YgZGVzdC5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSBkZXN0LmRlc3Ryb3koKTsKICB9CgogIC8vIGRvbid0IGxlYXZlIGRhbmdsaW5nIHBpcGVzIHdoZW4gdGhlcmUgYXJlIGVycm9ycy4KICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7CiAgICBjbGVhbnVwKCk7CiAgICBpZiAoRUUubGlzdGVuZXJDb3VudCh0aGlzLCAnZXJyb3InKSA9PT0gMCkgewogICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkIHN0cmVhbSBlcnJvciBpbiBwaXBlLgogICAgfQogIH0KCiAgc291cmNlLm9uKCdlcnJvcicsIG9uZXJyb3IpOwogIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7CgogIC8vIHJlbW92ZSBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyB0aGF0IHdlcmUgYWRkZWQuCiAgZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pOwoKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwogICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwoKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CgogICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTsKICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTsKCiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApOwogIH0KCiAgc291cmNlLm9uKCdlbmQnLCBjbGVhbnVwKTsKICBzb3VyY2Uub24oJ2Nsb3NlJywgY2xlYW51cCk7CgogIGRlc3Qub24oJ2Nsb3NlJywgY2xlYW51cCk7CgogIGRlc3QuZW1pdCgncGlwZScsIHNvdXJjZSk7CgogIC8vIEFsbG93IGZvciB1bml4LWxpa2UgdXNhZ2U6IEEucGlwZShCKS5waXBlKEMpCiAgcmV0dXJuIGRlc3Q7Cn07Cgp9LHsiZXZlbnRzIjo3MiwiaW5oZXJpdHMiOjEyOSwicmVhZGFibGUtc3RyZWFtL2R1cGxleC5qcyI6MTQ5LCJyZWFkYWJsZS1zdHJlYW0vcGFzc3Rocm91Z2guanMiOjE1NSwicmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLmpzIjoxNTYsInJlYWRhYmxlLXN0cmVhbS90cmFuc2Zvcm0uanMiOjE1NywicmVhZGFibGUtc3RyZWFtL3dyaXRhYmxlLmpzIjoxNTh9XSwxNzI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgp2YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyOwoKdmFyIGlzQnVmZmVyRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZwogIHx8IGZ1bmN0aW9uKGVuY29kaW5nKSB7CiAgICAgICBzd2l0Y2ggKGVuY29kaW5nICYmIGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgY2FzZSAnaGV4JzogY2FzZSAndXRmOCc6IGNhc2UgJ3V0Zi04JzogY2FzZSAnYXNjaWknOiBjYXNlICdiaW5hcnknOiBjYXNlICdiYXNlNjQnOiBjYXNlICd1Y3MyJzogY2FzZSAndWNzLTInOiBjYXNlICd1dGYxNmxlJzogY2FzZSAndXRmLTE2bGUnOiBjYXNlICdyYXcnOiByZXR1cm4gdHJ1ZTsKICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlOwogICAgICAgfQogICAgIH0KCgpmdW5jdGlvbiBhc3NlcnRFbmNvZGluZyhlbmNvZGluZykgewogIGlmIChlbmNvZGluZyAmJiAhaXNCdWZmZXJFbmNvZGluZyhlbmNvZGluZykpIHsKICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTsKICB9Cn0KCi8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2YKLy8gYnVmZmVycyBpbnRvIGEgc2VyaWVzIG9mIEpTIHN0cmluZ3Mgd2l0aG91dCBicmVha2luZyBhcGFydCBtdWx0aS1ieXRlCi8vIGNoYXJhY3RlcnMuIENFU1UtOCBpcyBoYW5kbGVkIGFzIHBhcnQgb2YgdGhlIFVURi04IGVuY29kaW5nLgovLwovLyBAVE9ETyBIYW5kbGluZyBhbGwgZW5jb2RpbmdzIGluc2lkZSBhIHNpbmdsZSBvYmplY3QgbWFrZXMgaXQgdmVyeSBkaWZmaWN1bHQKLy8gdG8gcmVhc29uIGFib3V0IHRoaXMgY29kZSwgc28gaXQgc2hvdWxkIGJlIHNwbGl0IHVwIGluIHRoZSBmdXR1cmUuCi8vIEBUT0RPIFRoZXJlIHNob3VsZCBiZSBhIHV0Zjgtc3RyaWN0IGVuY29kaW5nIHRoYXQgcmVqZWN0cyBpbnZhbGlkIFVURi04IGNvZGUKLy8gcG9pbnRzIGFzIHVzZWQgYnkgQ0VTVS04Lgp2YXIgU3RyaW5nRGVjb2RlciA9IGV4cG9ydHMuU3RyaW5nRGVjb2RlciA9IGZ1bmN0aW9uKGVuY29kaW5nKSB7CiAgdGhpcy5lbmNvZGluZyA9IChlbmNvZGluZyB8fCAndXRmOCcpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sICcnKTsKICBhc3NlcnRFbmNvZGluZyhlbmNvZGluZyk7CiAgc3dpdGNoICh0aGlzLmVuY29kaW5nKSB7CiAgICBjYXNlICd1dGY4JzoKICAgICAgLy8gQ0VTVS04IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAzLWJ5dGVzCiAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDM7CiAgICAgIGJyZWFrOwogICAgY2FzZSAndWNzMic6CiAgICBjYXNlICd1dGYxNmxlJzoKICAgICAgLy8gVVRGLTE2IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAyLWJ5dGVzCiAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDI7CiAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyOwogICAgICBicmVhazsKICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICAgIC8vIEJhc2UtNjQgc3RvcmVzIDMgYnl0ZXMgaW4gNCBjaGFycywgYW5kIHBhZHMgdGhlIHJlbWFpbmRlci4KICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMzsKICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IGJhc2U2NERldGVjdEluY29tcGxldGVDaGFyOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIHRoaXMud3JpdGUgPSBwYXNzVGhyb3VnaFdyaXRlOwogICAgICByZXR1cm47CiAgfQoKICAvLyBFbm91Z2ggc3BhY2UgdG8gc3RvcmUgYWxsIGJ5dGVzIG9mIGEgc2luZ2xlIGNoYXJhY3Rlci4gVVRGLTggbmVlZHMgNAogIC8vIGJ5dGVzLCBidXQgQ0VTVS04IG1heSByZXF1aXJlIHVwIHRvIDYgKDMgYnl0ZXMgcGVyIHN1cnJvZ2F0ZSkuCiAgdGhpcy5jaGFyQnVmZmVyID0gbmV3IEJ1ZmZlcig2KTsKICAvLyBOdW1iZXIgb2YgYnl0ZXMgcmVjZWl2ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuCiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSAwOwogIC8vIE51bWJlciBvZiBieXRlcyBleHBlY3RlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci4KICB0aGlzLmNoYXJMZW5ndGggPSAwOwp9OwoKCi8vIHdyaXRlIGRlY29kZXMgdGhlIGdpdmVuIGJ1ZmZlciBhbmQgcmV0dXJucyBpdCBhcyBKUyBzdHJpbmcgdGhhdCBpcwovLyBndWFyYW50ZWVkIHRvIG5vdCBjb250YWluIGFueSBwYXJ0aWFsIG11bHRpLWJ5dGUgY2hhcmFjdGVycy4gQW55IHBhcnRpYWwKLy8gY2hhcmFjdGVyIGZvdW5kIGF0IHRoZSBlbmQgb2YgdGhlIGJ1ZmZlciBpcyBidWZmZXJlZCB1cCwgYW5kIHdpbGwgYmUKLy8gcmV0dXJuZWQgd2hlbiBjYWxsaW5nIHdyaXRlIGFnYWluIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcy4KLy8KLy8gTm90ZTogQ29udmVydGluZyBhIEJ1ZmZlciBjb250YWluaW5nIGFuIG9ycGhhbiBzdXJyb2dhdGUgdG8gYSBTdHJpbmcKLy8gY3VycmVudGx5IHdvcmtzLCBidXQgY29udmVydGluZyBhIFN0cmluZyB0byBhIEJ1ZmZlciAodmlhIGBuZXcgQnVmZmVyYCwgb3IKLy8gQnVmZmVyI3dyaXRlKSB3aWxsIHJlcGxhY2UgaW5jb21wbGV0ZSBzdXJyb2dhdGVzIHdpdGggdGhlIHVuaWNvZGUKLy8gcmVwbGFjZW1lbnQgY2hhcmFjdGVyLiBTZWUgaHR0cHM6Ly9jb2RlcmV2aWV3LmNocm9taXVtLm9yZy8xMjExNzMwMDkvIC4KU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHsKICB2YXIgY2hhclN0ciA9ICcnOwogIC8vIGlmIG91ciBsYXN0IHdyaXRlIGVuZGVkIHdpdGggYW4gaW5jb21wbGV0ZSBtdWx0aWJ5dGUgY2hhcmFjdGVyCiAgd2hpbGUgKHRoaXMuY2hhckxlbmd0aCkgewogICAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IHJlbWFpbmluZyBieXRlcyB0aGlzIGJ1ZmZlciBoYXMgdG8gb2ZmZXIgZm9yIHRoaXMgY2hhcgogICAgdmFyIGF2YWlsYWJsZSA9IChidWZmZXIubGVuZ3RoID49IHRoaXMuY2hhckxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkKSA/CiAgICAgICAgdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQgOgogICAgICAgIGJ1ZmZlci5sZW5ndGg7CgogICAgLy8gYWRkIHRoZSBuZXcgYnl0ZXMgdG8gdGhlIGNoYXIgYnVmZmVyCiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHRoaXMuY2hhclJlY2VpdmVkLCAwLCBhdmFpbGFibGUpOwogICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gYXZhaWxhYmxlOwoKICAgIGlmICh0aGlzLmNoYXJSZWNlaXZlZCA8IHRoaXMuY2hhckxlbmd0aCkgewogICAgICAvLyBzdGlsbCBub3QgZW5vdWdoIGNoYXJzIGluIHRoaXMgYnVmZmVyPyB3YWl0IGZvciBtb3JlIC4uLgogICAgICByZXR1cm4gJyc7CiAgICB9CgogICAgLy8gcmVtb3ZlIGJ5dGVzIGJlbG9uZ2luZyB0byB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZnJvbSB0aGUgYnVmZmVyCiAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoYXZhaWxhYmxlLCBidWZmZXIubGVuZ3RoKTsKCiAgICAvLyBnZXQgdGhlIGNoYXJhY3RlciB0aGF0IHdhcyBzcGxpdAogICAgY2hhclN0ciA9IHRoaXMuY2hhckJ1ZmZlci5zbGljZSgwLCB0aGlzLmNoYXJMZW5ndGgpLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpOwoKICAgIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIKICAgIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChjaGFyU3RyLmxlbmd0aCAtIDEpOwogICAgaWYgKGNoYXJDb2RlID49IDB4RDgwMCAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHsKICAgICAgdGhpcy5jaGFyTGVuZ3RoICs9IHRoaXMuc3Vycm9nYXRlU2l6ZTsKICAgICAgY2hhclN0ciA9ICcnOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIHRoaXMuY2hhclJlY2VpdmVkID0gdGhpcy5jaGFyTGVuZ3RoID0gMDsKCiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbW9yZSBieXRlcyBpbiB0aGlzIGJ1ZmZlciwganVzdCBlbWl0IG91ciBjaGFyCiAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gY2hhclN0cjsKICAgIH0KICAgIGJyZWFrOwogIH0KCiAgLy8gZGV0ZXJtaW5lIGFuZCBzZXQgY2hhckxlbmd0aCAvIGNoYXJSZWNlaXZlZAogIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKTsKCiAgdmFyIGVuZCA9IGJ1ZmZlci5sZW5ndGg7CiAgaWYgKHRoaXMuY2hhckxlbmd0aCkgewogICAgLy8gYnVmZmVyIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlciBieXRlcyB3ZSBnb3QKICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgYnVmZmVyLmxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkLCBlbmQpOwogICAgZW5kIC09IHRoaXMuY2hhclJlY2VpdmVkOwogIH0KCiAgY2hhclN0ciArPSBidWZmZXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgZW5kKTsKCiAgdmFyIGVuZCA9IGNoYXJTdHIubGVuZ3RoIC0gMTsKICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoZW5kKTsKICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyCiAgaWYgKGNoYXJDb2RlID49IDB4RDgwMCAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHsKICAgIHZhciBzaXplID0gdGhpcy5zdXJyb2dhdGVTaXplOwogICAgdGhpcy5jaGFyTGVuZ3RoICs9IHNpemU7CiAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBzaXplOwogICAgdGhpcy5jaGFyQnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCBzaXplLCAwLCBzaXplKTsKICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgMCwgc2l6ZSk7CiAgICByZXR1cm4gY2hhclN0ci5zdWJzdHJpbmcoMCwgZW5kKTsKICB9CgogIC8vIG9yIGp1c3QgZW1pdCB0aGUgY2hhclN0cgogIHJldHVybiBjaGFyU3RyOwp9OwoKLy8gZGV0ZWN0SW5jb21wbGV0ZUNoYXIgZGV0ZXJtaW5lcyBpZiB0aGVyZSBpcyBhbiBpbmNvbXBsZXRlIFVURi04IGNoYXJhY3RlciBhdAovLyB0aGUgZW5kIG9mIHRoZSBnaXZlbiBidWZmZXIuIElmIHNvLCBpdCBzZXRzIHRoaXMuY2hhckxlbmd0aCB0byB0aGUgYnl0ZQovLyBsZW5ndGggdGhhdCBjaGFyYWN0ZXIsIGFuZCBzZXRzIHRoaXMuY2hhclJlY2VpdmVkIHRvIHRoZSBudW1iZXIgb2YgYnl0ZXMKLy8gdGhhdCBhcmUgYXZhaWxhYmxlIGZvciB0aGlzIGNoYXJhY3Rlci4KU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBmdW5jdGlvbihidWZmZXIpIHsKICAvLyBkZXRlcm1pbmUgaG93IG1hbnkgYnl0ZXMgd2UgaGF2ZSB0byBjaGVjayBhdCB0aGUgZW5kIG9mIHRoaXMgYnVmZmVyCiAgdmFyIGkgPSAoYnVmZmVyLmxlbmd0aCA+PSAzKSA/IDMgOiBidWZmZXIubGVuZ3RoOwoKICAvLyBGaWd1cmUgb3V0IGlmIG9uZSBvZiB0aGUgbGFzdCBpIGJ5dGVzIG9mIG91ciBidWZmZXIgYW5ub3VuY2VzIGFuCiAgLy8gaW5jb21wbGV0ZSBjaGFyLgogIGZvciAoOyBpID4gMDsgaS0tKSB7CiAgICB2YXIgYyA9IGJ1ZmZlcltidWZmZXIubGVuZ3RoIC0gaV07CgogICAgLy8gU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVRGLTgjRGVzY3JpcHRpb24KCiAgICAvLyAxMTBYWFhYWAogICAgaWYgKGkgPT0gMSAmJiBjID4+IDUgPT0gMHgwNikgewogICAgICB0aGlzLmNoYXJMZW5ndGggPSAyOwogICAgICBicmVhazsKICAgIH0KCiAgICAvLyAxMTEwWFhYWAogICAgaWYgKGkgPD0gMiAmJiBjID4+IDQgPT0gMHgwRSkgewogICAgICB0aGlzLmNoYXJMZW5ndGggPSAzOwogICAgICBicmVhazsKICAgIH0KCiAgICAvLyAxMTExMFhYWAogICAgaWYgKGkgPD0gMyAmJiBjID4+IDMgPT0gMHgxRSkgewogICAgICB0aGlzLmNoYXJMZW5ndGggPSA0OwogICAgICBicmVhazsKICAgIH0KICB9CiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBpOwp9OwoKU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oYnVmZmVyKSB7CiAgdmFyIHJlcyA9ICcnOwogIGlmIChidWZmZXIgJiYgYnVmZmVyLmxlbmd0aCkKICAgIHJlcyA9IHRoaXMud3JpdGUoYnVmZmVyKTsKCiAgaWYgKHRoaXMuY2hhclJlY2VpdmVkKSB7CiAgICB2YXIgY3IgPSB0aGlzLmNoYXJSZWNlaXZlZDsKICAgIHZhciBidWYgPSB0aGlzLmNoYXJCdWZmZXI7CiAgICB2YXIgZW5jID0gdGhpcy5lbmNvZGluZzsKICAgIHJlcyArPSBidWYuc2xpY2UoMCwgY3IpLnRvU3RyaW5nKGVuYyk7CiAgfQoKICByZXR1cm4gcmVzOwp9OwoKZnVuY3Rpb24gcGFzc1Rocm91Z2hXcml0ZShidWZmZXIpIHsKICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpOwp9CgpmdW5jdGlvbiB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikgewogIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDI7CiAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAyIDogMDsKfQoKZnVuY3Rpb24gYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7CiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMzsKICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDMgOiAwOwp9Cgp9LHsiYnVmZmVyIjo3MH1dLDE3MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKQoKZnVuY3Rpb24gVGZUeXBlRXJyb3IgKHR5cGUsIHZhbHVlKSB7CiAgdGhpcy50ZkVycm9yID0gRXJyb3IuY2FsbCh0aGlzKQoKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycpIHsKICAgIHRoaXMubWVzc2FnZSA9IHR5cGUKICB9IGVsc2UgewogICAgdGhpcy50ZlR5cGUgPSB0eXBlCiAgICB0aGlzLnRmVmFsdWUgPSB2YWx1ZQoKICAgIHZhciBtZXNzYWdlCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ21lc3NhZ2UnLCB7CiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChtZXNzYWdlKSByZXR1cm4gbWVzc2FnZQogICAgICAgIG1lc3NhZ2UgPSB0ZkVycm9yU3RyaW5nKHR5cGUsIHZhbHVlKQoKICAgICAgICByZXR1cm4gbWVzc2FnZQogICAgICB9CiAgICB9KQogIH0KfQoKaW5oZXJpdHMoVGZUeXBlRXJyb3IsIEVycm9yKQpPYmplY3QuZGVmaW5lUHJvcGVydHkoVGZUeXBlRXJyb3IsICdzdGFjaycsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLnRmRXJyb3Iuc3RhY2sgfSB9KQoKZnVuY3Rpb24gVGZQcm9wZXJ0eVR5cGVFcnJvciAodHlwZSwgcHJvcGVydHksIHZhbHVlLCBlcnJvcikgewogIHRoaXMudGZFcnJvciA9IGVycm9yIHx8IEVycm9yLmNhbGwodGhpcykKICB0aGlzLnRmUHJvcGVydHkgPSBwcm9wZXJ0eQogIHRoaXMudGZUeXBlID0gdHlwZQogIHRoaXMudGZWYWx1ZSA9IHZhbHVlCgogIHZhciBtZXNzYWdlCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdtZXNzYWdlJywgewogICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChtZXNzYWdlKSByZXR1cm4gbWVzc2FnZQogICAgICBpZiAodHlwZSkgewogICAgICAgIG1lc3NhZ2UgPSB0ZlByb3BlcnR5RXJyb3JTdHJpbmcodHlwZSwgcHJvcGVydHksIHZhbHVlKQogICAgICB9IGVsc2UgewogICAgICAgIG1lc3NhZ2UgPSAnVW5leHBlY3RlZCBwcm9wZXJ0eSAiJyArIHByb3BlcnR5ICsgJyInCiAgICAgIH0KCiAgICAgIHJldHVybiBtZXNzYWdlCiAgICB9CiAgfSkKfQoKaW5oZXJpdHMoVGZQcm9wZXJ0eVR5cGVFcnJvciwgRXJyb3IpCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZlByb3BlcnR5VHlwZUVycm9yLCAnc3RhY2snLCB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50ZkVycm9yLnN0YWNrIH0gfSkKClRmUHJvcGVydHlUeXBlRXJyb3IucHJvdG90eXBlLmFzQ2hpbGRPZiA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkgewogIHJldHVybiBuZXcgVGZQcm9wZXJ0eVR5cGVFcnJvcih0aGlzLnRmVHlwZSwgcHJvcGVydHkgKyAnLicgKyB0aGlzLnRmUHJvcGVydHksIHRoaXMudGZWYWx1ZSwgdGhpcy50ZkVycm9yKQp9CgpmdW5jdGlvbiBnZXRGdW5jdGlvbk5hbWUgKGZuKSB7CiAgcmV0dXJuIGZuLm5hbWUgfHwgZm4udG9TdHJpbmcoKS5tYXRjaCgvZnVuY3Rpb24gKC4qPylccypcKC8pWzFdCn0KCmZ1bmN0aW9uIGdldFZhbHVlVHlwZU5hbWUgKHZhbHVlKSB7CiAgaWYgKG5hdGl2ZVR5cGVzLk51bGwodmFsdWUpKSByZXR1cm4gJycKCiAgcmV0dXJuIGdldEZ1bmN0aW9uTmFtZSh2YWx1ZS5jb25zdHJ1Y3RvcikKfQoKZnVuY3Rpb24gZ2V0VmFsdWUgKHZhbHVlKSB7CiAgaWYgKG5hdGl2ZVR5cGVzLkZ1bmN0aW9uKHZhbHVlKSkgcmV0dXJuICcnCiAgaWYgKG5hdGl2ZVR5cGVzLlN0cmluZyh2YWx1ZSkpIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSkKICBpZiAodmFsdWUgJiYgbmF0aXZlVHlwZXMuT2JqZWN0KHZhbHVlKSkgcmV0dXJuICcnCgogIHJldHVybiB2YWx1ZQp9CgpmdW5jdGlvbiB0ZkpTT04gKHR5cGUpIHsKICBpZiAobmF0aXZlVHlwZXMuRnVuY3Rpb24odHlwZSkpIHJldHVybiB0eXBlLnRvSlNPTiA/IHR5cGUudG9KU09OKCkgOiBnZXRGdW5jdGlvbk5hbWUodHlwZSkKICBpZiAobmF0aXZlVHlwZXMuQXJyYXkodHlwZSkpIHJldHVybiAnQXJyYXknCiAgaWYgKHR5cGUgJiYgbmF0aXZlVHlwZXMuT2JqZWN0KHR5cGUpKSByZXR1cm4gJ09iamVjdCcKCiAgcmV0dXJuIHR5cGUgfHwgJycKfQoKZnVuY3Rpb24gc3RmSlNPTiAodHlwZSkgewogIHR5cGUgPSB0ZkpTT04odHlwZSkKCiAgcmV0dXJuIG5hdGl2ZVR5cGVzLk9iamVjdCh0eXBlKSA/IEpTT04uc3RyaW5naWZ5KHR5cGUpIDogdHlwZQp9CgpmdW5jdGlvbiB0ZkVycm9yU3RyaW5nICh0eXBlLCB2YWx1ZSkgewogIHZhciB2YWx1ZVR5cGVOYW1lID0gZ2V0VmFsdWVUeXBlTmFtZSh2YWx1ZSkKICB2YXIgdmFsdWVWYWx1ZSA9IGdldFZhbHVlKHZhbHVlKQoKICByZXR1cm4gJ0V4cGVjdGVkICcgKyBzdGZKU09OKHR5cGUpICsgJywgZ290JyArICh2YWx1ZVR5cGVOYW1lICE9PSAnJyA/ICcgJyArIHZhbHVlVHlwZU5hbWUgOiAnJykgKyAodmFsdWVWYWx1ZSAhPT0gJycgPyAnICcgKyB2YWx1ZVZhbHVlIDogJycpCn0KCmZ1bmN0aW9uIHRmUHJvcGVydHlFcnJvclN0cmluZyAodHlwZSwgbmFtZSwgdmFsdWUpIHsKICByZXR1cm4gdGZFcnJvclN0cmluZygncHJvcGVydHkgXCInICsgc3RmSlNPTihuYW1lKSArICdcIiBvZiB0eXBlICcgKyBzdGZKU09OKHR5cGUpLCB2YWx1ZSkKfQoKdmFyIG5hdGl2ZVR5cGVzID0gewogIEFycmF5OiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5IH0sCiAgQm9vbGVhbjogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJyB9LAogIEJ1ZmZlcjogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBCdWZmZXIuaXNCdWZmZXIodmFsdWUpIH0sCiAgRnVuY3Rpb246IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nIH0sCiAgTnVsbDogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsIH0sCiAgTnVtYmVyOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfSwKICBPYmplY3Q6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyB9LAogIFN0cmluZzogZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIH0sCiAgJyc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWUgfQp9Cgp2YXIgb3RoZXJUeXBlcyA9IHsKICBhcnJheU9mOiBmdW5jdGlvbiBhcnJheU9mICh0eXBlKSB7CiAgICBmdW5jdGlvbiBhcnJheU9mICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIGlmICghbmF0aXZlVHlwZXMuQXJyYXkodmFsdWUpKSByZXR1cm4gZmFsc2UKCiAgICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB0eXBlZm9yY2UodHlwZSwgeCwgc3RyaWN0LCBhcnJheU9mKQogICAgICB9KQogICAgfQogICAgYXJyYXlPZi50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBbdGZKU09OKHR5cGUpXSB9CgogICAgcmV0dXJuIGFycmF5T2YKICB9LAoKICBtYXliZTogZnVuY3Rpb24gbWF5YmUgKHR5cGUpIHsKICAgIGZ1bmN0aW9uIG1heWJlICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIHJldHVybiBuYXRpdmVUeXBlcy5OdWxsKHZhbHVlKSB8fCB0eXBlZm9yY2UodHlwZSwgdmFsdWUsIHN0cmljdCwgbWF5YmUpCiAgICB9CiAgICBtYXliZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnPycgKyBzdGZKU09OKHR5cGUpIH0KCiAgICByZXR1cm4gbWF5YmUKICB9LAoKICBvYmplY3Q6IGZ1bmN0aW9uIG9iamVjdCAodHlwZSkgewogICAgZnVuY3Rpb24gb2JqZWN0ICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIGlmICghbmF0aXZlVHlwZXMuT2JqZWN0KHZhbHVlKSkgcmV0dXJuIGZhbHNlCiAgICAgIGlmIChuYXRpdmVUeXBlcy5OdWxsKHZhbHVlKSkgcmV0dXJuIGZhbHNlCgogICAgICB2YXIgcHJvcGVydHlOYW1lCgogICAgICB0cnkgewogICAgICAgIGZvciAocHJvcGVydHlOYW1lIGluIHR5cGUpIHsKICAgICAgICAgIHZhciBwcm9wZXJ0eVR5cGUgPSB0eXBlW3Byb3BlcnR5TmFtZV0KICAgICAgICAgIHZhciBwcm9wZXJ0eVZhbHVlID0gdmFsdWVbcHJvcGVydHlOYW1lXQoKICAgICAgICAgIHR5cGVmb3JjZShwcm9wZXJ0eVR5cGUsIHByb3BlcnR5VmFsdWUsIHN0cmljdCkKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFRmUHJvcGVydHlUeXBlRXJyb3IpIHsKICAgICAgICAgIHRocm93IGUuYXNDaGlsZE9mKHByb3BlcnR5TmFtZSkKICAgICAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBUZlR5cGVFcnJvcikgewogICAgICAgICAgdGhyb3cgbmV3IFRmUHJvcGVydHlUeXBlRXJyb3IoZS50ZlR5cGUsIHByb3BlcnR5TmFtZSwgZS50ZlZhbHVlLCBlLnRmRXJyb3IpCiAgICAgICAgfQoKICAgICAgICB0aHJvdyBlCiAgICAgIH0KCiAgICAgIGlmIChzdHJpY3QpIHsKICAgICAgICBmb3IgKHByb3BlcnR5TmFtZSBpbiB2YWx1ZSkgewogICAgICAgICAgaWYgKHR5cGVbcHJvcGVydHlOYW1lXSkgY29udGludWUKCiAgICAgICAgICB0aHJvdyBuZXcgVGZQcm9wZXJ0eVR5cGVFcnJvcih1bmRlZmluZWQsIHByb3BlcnR5TmFtZSkKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlCiAgICB9CiAgICBvYmplY3QudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGZKU09OKHR5cGUpIH0KCiAgICByZXR1cm4gb2JqZWN0CiAgfSwKCiAgbWFwOiBmdW5jdGlvbiBtYXAgKHByb3BlcnR5VHlwZSwgcHJvcGVydHlLZXlUeXBlKSB7CiAgICBmdW5jdGlvbiBtYXAgKHZhbHVlLCBzdHJpY3QpIHsKICAgICAgdHlwZWZvcmNlKG5hdGl2ZVR5cGVzLk9iamVjdCwgdmFsdWUsIHN0cmljdCkKICAgICAgaWYgKG5hdGl2ZVR5cGVzLk51bGwodmFsdWUpKSByZXR1cm4gZmFsc2UKCiAgICAgIHZhciBwcm9wZXJ0eU5hbWUKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChwcm9wZXJ0eU5hbWUgaW4gdmFsdWUpIHsKICAgICAgICAgIGlmIChwcm9wZXJ0eUtleVR5cGUpIHsKICAgICAgICAgICAgdHlwZWZvcmNlKHByb3BlcnR5S2V5VHlwZSwgcHJvcGVydHlOYW1lLCBzdHJpY3QpCiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHByb3BlcnR5VmFsdWUgPSB2YWx1ZVtwcm9wZXJ0eU5hbWVdCiAgICAgICAgICB0eXBlZm9yY2UocHJvcGVydHlUeXBlLCBwcm9wZXJ0eVZhbHVlLCBzdHJpY3QpCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBUZlByb3BlcnR5VHlwZUVycm9yKSB7CiAgICAgICAgICB0aHJvdyBlLmFzQ2hpbGRPZihwcm9wZXJ0eU5hbWUpCiAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgVGZUeXBlRXJyb3IpIHsKICAgICAgICAgIHRocm93IG5ldyBUZlByb3BlcnR5VHlwZUVycm9yKGUudGZUeXBlLCBwcm9wZXJ0eUtleVR5cGUgfHwgcHJvcGVydHlOYW1lLCBlLnRmVmFsdWUpCiAgICAgICAgfQoKICAgICAgICB0aHJvdyBlCiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlCiAgICB9CgogICAgaWYgKHByb3BlcnR5S2V5VHlwZSkgewogICAgICBtYXAudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJ3snICsgc3RmSlNPTihwcm9wZXJ0eUtleVR5cGUpICsgJzogJyArIHN0ZkpTT04ocHJvcGVydHlUeXBlKSArICd9JyB9CiAgICB9IGVsc2UgewogICAgICBtYXAudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJ3snICsgc3RmSlNPTihwcm9wZXJ0eVR5cGUpICsgJ30nIH0KICAgIH0KCiAgICByZXR1cm4gbWFwCiAgfSwKCiAgb25lT2Y6IGZ1bmN0aW9uIG9uZU9mICgpIHsKICAgIHZhciB0eXBlcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKQoKICAgIGZ1bmN0aW9uIG9uZU9mICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIHJldHVybiB0eXBlcy5zb21lKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiB0eXBlZm9yY2UodHlwZSwgdmFsdWUsIHN0cmljdCkKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFRmVHlwZUVycm9yIHx8IGUgaW5zdGFuY2VvZiBUZlByb3BlcnR5VHlwZUVycm9yKSByZXR1cm4gZmFsc2UKCiAgICAgICAgICB0aHJvdyBlCiAgICAgICAgfQogICAgICB9KQogICAgfQogICAgb25lT2YudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHlwZXMubWFwKHN0ZkpTT04pLmpvaW4oJ3wnKSB9CgogICAgcmV0dXJuIG9uZU9mCiAgfSwKCiAgcXVhY2tzTGlrZTogZnVuY3Rpb24gcXVhY2tzTGlrZSAodHlwZSkgewogICAgZnVuY3Rpb24gcXVhY2tzTGlrZSAodmFsdWUpIHsKICAgICAgcmV0dXJuIHR5cGUgPT09IGdldFZhbHVlVHlwZU5hbWUodmFsdWUpCiAgICB9CiAgICBxdWFja3NMaWtlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHR5cGUgfQoKICAgIHJldHVybiBxdWFja3NMaWtlCiAgfSwKCiAgdHVwbGU6IGZ1bmN0aW9uIHR1cGxlICgpIHsKICAgIHZhciB0eXBlcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKQoKICAgIGZ1bmN0aW9uIHR1cGxlICh2YWx1ZSwgc3RyaWN0KSB7CiAgICAgIHJldHVybiB0eXBlcy5ldmVyeShmdW5jdGlvbiAodHlwZSwgaSkgewogICAgICAgIHJldHVybiB0eXBlZm9yY2UodHlwZSwgdmFsdWVbaV0sIHN0cmljdCkKICAgICAgfSkKICAgIH0KICAgIHR1cGxlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcoJyArIHR5cGVzLm1hcChzdGZKU09OKS5qb2luKCcsICcpICsgJyknIH0KCiAgICByZXR1cm4gdHVwbGUKICB9LAoKICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUgKGV4cGVjdGVkKSB7CiAgICBmdW5jdGlvbiB2YWx1ZSAoYWN0dWFsKSB7CiAgICAgIHJldHVybiBhY3R1YWwgPT09IGV4cGVjdGVkCiAgICB9CiAgICB2YWx1ZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBleHBlY3RlZCB9CgogICAgcmV0dXJuIHZhbHVlCiAgfQp9CgpmdW5jdGlvbiBjb21waWxlICh0eXBlKSB7CiAgaWYgKG5hdGl2ZVR5cGVzLlN0cmluZyh0eXBlKSkgewogICAgaWYgKHR5cGVbMF0gPT09ICc/JykgcmV0dXJuIG90aGVyVHlwZXMubWF5YmUoY29tcGlsZSh0eXBlLnNsaWNlKDEpKSkKCiAgICByZXR1cm4gbmF0aXZlVHlwZXNbdHlwZV0gfHwgb3RoZXJUeXBlcy5xdWFja3NMaWtlKHR5cGUpCiAgfSBlbHNlIGlmICh0eXBlICYmIG5hdGl2ZVR5cGVzLk9iamVjdCh0eXBlKSkgewogICAgaWYgKG5hdGl2ZVR5cGVzLkFycmF5KHR5cGUpKSByZXR1cm4gb3RoZXJUeXBlcy5hcnJheU9mKGNvbXBpbGUodHlwZVswXSkpCgogICAgdmFyIGNvbXBpbGVkID0ge30KCiAgICBmb3IgKHZhciBwcm9wZXJ0eU5hbWUgaW4gdHlwZSkgewogICAgICBjb21waWxlZFtwcm9wZXJ0eU5hbWVdID0gY29tcGlsZSh0eXBlW3Byb3BlcnR5TmFtZV0pCiAgICB9CgogICAgcmV0dXJuIG90aGVyVHlwZXMub2JqZWN0KGNvbXBpbGVkKQogIH0gZWxzZSBpZiAobmF0aXZlVHlwZXMuRnVuY3Rpb24odHlwZSkpIHsKICAgIHJldHVybiB0eXBlCiAgfQoKICByZXR1cm4gb3RoZXJUeXBlcy52YWx1ZSh0eXBlKQp9CgpmdW5jdGlvbiB0eXBlZm9yY2UgKHR5cGUsIHZhbHVlLCBzdHJpY3QsIHN1cnJvZ2F0ZSkgewogIGlmIChuYXRpdmVUeXBlcy5GdW5jdGlvbih0eXBlKSkgewogICAgaWYgKHR5cGUodmFsdWUsIHN0cmljdCkpIHJldHVybiB0cnVlCgogICAgdGhyb3cgbmV3IFRmVHlwZUVycm9yKHN1cnJvZ2F0ZSB8fCB0eXBlLCB2YWx1ZSkKICB9CgogIC8vIEpJVAogIHJldHVybiB0eXBlZm9yY2UoY29tcGlsZSh0eXBlKSwgdmFsdWUsIHN0cmljdCkKfQoKLy8gYXNzaWduIGFsbCB0eXBlcyB0byB0eXBlZm9yY2UgZnVuY3Rpb24KdmFyIHR5cGVOYW1lCk9iamVjdC5rZXlzKG5hdGl2ZVR5cGVzKS5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlTmFtZSkgewogIHZhciBuYXRpdmVUeXBlID0gbmF0aXZlVHlwZXNbdHlwZU5hbWVdCiAgbmF0aXZlVHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0eXBlTmFtZSB9CgogIHR5cGVmb3JjZVt0eXBlTmFtZV0gPSBuYXRpdmVUeXBlCn0pCgpmb3IgKHR5cGVOYW1lIGluIG90aGVyVHlwZXMpIHsKICB0eXBlZm9yY2VbdHlwZU5hbWVdID0gb3RoZXJUeXBlc1t0eXBlTmFtZV0KfQoKbW9kdWxlLmV4cG9ydHMgPSB0eXBlZm9yY2UKbW9kdWxlLmV4cG9ydHMuY29tcGlsZSA9IGNvbXBpbGUKCi8vIGV4cG9ydCBFcnJvciBvYmplY3RzCm1vZHVsZS5leHBvcnRzLlRmVHlwZUVycm9yID0gVGZUeXBlRXJyb3IKbW9kdWxlLmV4cG9ydHMuVGZQcm9wZXJ0eVR5cGVFcnJvciA9IFRmUHJvcGVydHlUeXBlRXJyb3IKCn0pLmNhbGwodGhpcyx7ImlzQnVmZmVyIjpyZXF1aXJlKCIuLi9pcy1idWZmZXIvaW5kZXguanMiKX0pCn0seyIuLi9pcy1idWZmZXIvaW5kZXguanMiOjEzMCwiaW5oZXJpdHMiOjEyOX1dLDE3NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAocm9vdCkgewogICAidXNlIHN0cmljdCI7CgovKioqKiogdW5vcm0uanMgKioqKiovCgovKgogKiBVbmljb2RlTm9ybWFsaXplciAxLjAuMAogKiBDb3B5cmlnaHQgKGMpIDIwMDggTWF0c3V6YQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkgYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICogJERhdGU6IDIwMDgtMDYtMDUgMTY6NDQ6MTcgKzAyMDAgKFRodSwgMDUgSnVuIDIwMDgpICQKICogJFJldjogMTMzMDkgJAogKi8KCiAgIHZhciBERUZBVUxUX0ZFQVRVUkUgPSBbbnVsbCwgMCwge31dOwogICB2YXIgQ0FDSEVfVEhSRVNIT0xEID0gMTA7CiAgIHZhciBTQmFzZSA9IDB4QUMwMCwgTEJhc2UgPSAweDExMDAsIFZCYXNlID0gMHgxMTYxLCBUQmFzZSA9IDB4MTFBNywgTENvdW50ID0gMTksIFZDb3VudCA9IDIxLCBUQ291bnQgPSAyODsKICAgdmFyIE5Db3VudCA9IFZDb3VudCAqIFRDb3VudDsgLy8gNTg4CiAgIHZhciBTQ291bnQgPSBMQ291bnQgKiBOQ291bnQ7IC8vIDExMTcyCgogICB2YXIgVUNoYXIgPSBmdW5jdGlvbihjcCwgZmVhdHVyZSl7CiAgICAgIHRoaXMuY29kZXBvaW50ID0gY3A7CiAgICAgIHRoaXMuZmVhdHVyZSA9IGZlYXR1cmU7CiAgIH07CgogICAvLyBTdHJhdGVnaWVzCiAgIHZhciBjYWNoZSA9IHt9OwogICB2YXIgY2FjaGVDb3VudGVyID0gW107CiAgIGZvciAodmFyIGkgPSAwOyBpIDw9IDB4RkY7ICsraSl7CiAgICAgIGNhY2hlQ291bnRlcltpXSA9IDA7CiAgIH0KCiAgIGZ1bmN0aW9uIGZyb21DYWNoZShuZXh0LCBjcCwgbmVlZEZlYXR1cmUpewogICAgICB2YXIgcmV0ID0gY2FjaGVbY3BdOwogICAgICBpZighcmV0KXsKICAgICAgICAgcmV0ID0gbmV4dChjcCwgbmVlZEZlYXR1cmUpOwogICAgICAgICBpZighIXJldC5mZWF0dXJlICYmICsrY2FjaGVDb3VudGVyWyhjcCA+PiA4KSAmIDB4RkZdID4gQ0FDSEVfVEhSRVNIT0xEKXsKICAgICAgICAgICAgY2FjaGVbY3BdID0gcmV0OwogICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgfQoKICAgZnVuY3Rpb24gZnJvbURhdGEobmV4dCwgY3AsIG5lZWRGZWF0dXJlKXsKICAgICAgdmFyIGhhc2ggPSBjcCAmIDB4RkYwMDsKICAgICAgdmFyIGR1bml0ID0gVUNoYXIudWRhdGFbaGFzaF0gfHwge307CiAgICAgIHZhciBmID0gZHVuaXRbY3BdOwogICAgICByZXR1cm4gZiA/IG5ldyBVQ2hhcihjcCwgZikgOiBuZXcgVUNoYXIoY3AsIERFRkFVTFRfRkVBVFVSRSk7CiAgIH0KICAgZnVuY3Rpb24gZnJvbUNwT25seShuZXh0LCBjcCwgbmVlZEZlYXR1cmUpewogICAgICByZXR1cm4gISFuZWVkRmVhdHVyZSA/IG5leHQoY3AsIG5lZWRGZWF0dXJlKSA6IG5ldyBVQ2hhcihjcCwgbnVsbCk7CiAgIH0KICAgZnVuY3Rpb24gZnJvbVJ1bGVCYXNlZEphbW8obmV4dCwgY3AsIG5lZWRGZWF0dXJlKXsKICAgICAgdmFyIGo7CiAgICAgIGlmKGNwIDwgTEJhc2UgfHwgKExCYXNlICsgTENvdW50IDw9IGNwICYmIGNwIDwgU0Jhc2UpIHx8IChTQmFzZSArIFNDb3VudCA8IGNwKSl7CiAgICAgICAgIHJldHVybiBuZXh0KGNwLCBuZWVkRmVhdHVyZSk7CiAgICAgIH0KICAgICAgaWYoTEJhc2UgPD0gY3AgJiYgY3AgPCBMQmFzZSArIExDb3VudCl7CiAgICAgICAgIHZhciBjID0ge307CiAgICAgICAgIHZhciBiYXNlID0gKGNwIC0gTEJhc2UpICogVkNvdW50OwogICAgICAgICBmb3IgKGogPSAwOyBqIDwgVkNvdW50OyArK2opewogICAgICAgICAgICBjW1ZCYXNlICsgal0gPSBTQmFzZSArIFRDb3VudCAqIChqICsgYmFzZSk7CiAgICAgICAgIH0KICAgICAgICAgcmV0dXJuIG5ldyBVQ2hhcihjcCwgWywsY10pOwogICAgICB9CgogICAgICB2YXIgU0luZGV4ID0gY3AgLSBTQmFzZTsKICAgICAgdmFyIFRJbmRleCA9IFNJbmRleCAlIFRDb3VudDsKICAgICAgdmFyIGZlYXR1cmUgPSBbXTsKICAgICAgaWYoVEluZGV4ICE9PSAwKXsKICAgICAgICAgZmVhdHVyZVswXSA9IFtTQmFzZSArIFNJbmRleCAtIFRJbmRleCwgVEJhc2UgKyBUSW5kZXhdOwogICAgICB9IGVsc2UgewogICAgICAgICBmZWF0dXJlWzBdID0gW0xCYXNlICsgTWF0aC5mbG9vcihTSW5kZXggLyBOQ291bnQpLCBWQmFzZSArIE1hdGguZmxvb3IoKFNJbmRleCAlIE5Db3VudCkgLyBUQ291bnQpXTsKICAgICAgICAgZmVhdHVyZVsyXSA9IHt9OwogICAgICAgICBmb3IgKGogPSAxOyBqIDwgVENvdW50OyArK2opewogICAgICAgICAgICBmZWF0dXJlWzJdW1RCYXNlICsgal0gPSBjcCArIGo7CiAgICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbmV3IFVDaGFyKGNwLCBmZWF0dXJlKTsKICAgfQogICBmdW5jdGlvbiBmcm9tQ3BGaWx0ZXIobmV4dCwgY3AsIG5lZWRGZWF0dXJlKXsKICAgICAgcmV0dXJuIGNwIDwgNjAgfHwgMTMzMTEgPCBjcCAmJiBjcCA8IDQyNjA3ID8gbmV3IFVDaGFyKGNwLCBERUZBVUxUX0ZFQVRVUkUpIDogbmV4dChjcCwgbmVlZEZlYXR1cmUpOwogICB9CgogICB2YXIgc3RyYXRlZ2llcyA9IFtmcm9tQ3BGaWx0ZXIsIGZyb21DYWNoZSwgZnJvbUNwT25seSwgZnJvbVJ1bGVCYXNlZEphbW8sIGZyb21EYXRhXTsKCiAgIFVDaGFyLmZyb21DaGFyQ29kZSA9IHN0cmF0ZWdpZXMucmVkdWNlUmlnaHQoZnVuY3Rpb24gKG5leHQsIHN0cmF0ZWd5KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoY3AsIG5lZWRGZWF0dXJlKSB7CiAgICAgICAgIHJldHVybiBzdHJhdGVneShuZXh0LCBjcCwgbmVlZEZlYXR1cmUpOwogICAgICB9OwogICB9LCBudWxsKTsKCiAgIFVDaGFyLmlzSGlnaFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uKGNwKXsKICAgICAgcmV0dXJuIGNwID49IDB4RDgwMCAmJiBjcCA8PSAweERCRkY7CiAgIH07CiAgIFVDaGFyLmlzTG93U3Vycm9nYXRlID0gZnVuY3Rpb24oY3ApewogICAgICByZXR1cm4gY3AgPj0gMHhEQzAwICYmIGNwIDw9IDB4REZGRjsKICAgfTsKCiAgIFVDaGFyLnByb3RvdHlwZS5wcmVwRmVhdHVyZSA9IGZ1bmN0aW9uKCl7CiAgICAgIGlmKCF0aGlzLmZlYXR1cmUpewogICAgICAgICB0aGlzLmZlYXR1cmUgPSBVQ2hhci5mcm9tQ2hhckNvZGUodGhpcy5jb2RlcG9pbnQsIHRydWUpLmZlYXR1cmU7CiAgICAgIH0KICAgfTsKCiAgIFVDaGFyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCl7CiAgICAgIGlmKHRoaXMuY29kZXBvaW50IDwgMHgxMDAwMCl7CiAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuY29kZXBvaW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAgdmFyIHggPSB0aGlzLmNvZGVwb2ludCAtIDB4MTAwMDA7CiAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKE1hdGguZmxvb3IoeCAvIDB4NDAwKSArIDB4RDgwMCwgeCAlIDB4NDAwICsgMHhEQzAwKTsKICAgICAgfQogICB9OwoKICAgVUNoYXIucHJvdG90eXBlLmdldERlY29tcCA9IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMucHJlcEZlYXR1cmUoKTsKICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZVswXSB8fCBudWxsOwogICB9OwoKICAgVUNoYXIucHJvdG90eXBlLmlzQ29tcGF0aWJpbGl0eSA9IGZ1bmN0aW9uKCl7CiAgICAgIHRoaXMucHJlcEZlYXR1cmUoKTsKICAgICAgcmV0dXJuICEhdGhpcy5mZWF0dXJlWzFdICYmICh0aGlzLmZlYXR1cmVbMV0gJiAoMSA8PCA4KSk7CiAgIH07CiAgIFVDaGFyLnByb3RvdHlwZS5pc0V4Y2x1ZGUgPSBmdW5jdGlvbigpewogICAgICB0aGlzLnByZXBGZWF0dXJlKCk7CiAgICAgIHJldHVybiAhIXRoaXMuZmVhdHVyZVsxXSAmJiAodGhpcy5mZWF0dXJlWzFdICYgKDEgPDwgOSkpOwogICB9OwogICBVQ2hhci5wcm90b3R5cGUuZ2V0Q2Fub25pY2FsQ2xhc3MgPSBmdW5jdGlvbigpewogICAgICB0aGlzLnByZXBGZWF0dXJlKCk7CiAgICAgIHJldHVybiAhIXRoaXMuZmVhdHVyZVsxXSA/ICh0aGlzLmZlYXR1cmVbMV0gJiAweGZmKSA6IDA7CiAgIH07CiAgIFVDaGFyLnByb3RvdHlwZS5nZXRDb21wb3NpdGUgPSBmdW5jdGlvbihmb2xsb3dpbmcpewogICAgICB0aGlzLnByZXBGZWF0dXJlKCk7CiAgICAgIGlmKCF0aGlzLmZlYXR1cmVbMl0pewogICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB2YXIgY3AgPSB0aGlzLmZlYXR1cmVbMl1bZm9sbG93aW5nLmNvZGVwb2ludF07CiAgICAgIHJldHVybiBjcCA/IFVDaGFyLmZyb21DaGFyQ29kZShjcCkgOiBudWxsOwogICB9OwoKICAgdmFyIFVDaGFySXRlcmF0b3IgPSBmdW5jdGlvbihzdHIpewogICAgICB0aGlzLnN0ciA9IHN0cjsKICAgICAgdGhpcy5jdXJzb3IgPSAwOwogICB9OwogICBVQ2hhckl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKXsKICAgICAgaWYoISF0aGlzLnN0ciAmJiB0aGlzLmN1cnNvciA8IHRoaXMuc3RyLmxlbmd0aCl7CiAgICAgICAgIHZhciBjcCA9IHRoaXMuc3RyLmNoYXJDb2RlQXQodGhpcy5jdXJzb3IrKyk7CiAgICAgICAgIHZhciBkOwogICAgICAgICBpZihVQ2hhci5pc0hpZ2hTdXJyb2dhdGUoY3ApICYmIHRoaXMuY3Vyc29yIDwgdGhpcy5zdHIubGVuZ3RoICYmIFVDaGFyLmlzTG93U3Vycm9nYXRlKChkID0gdGhpcy5zdHIuY2hhckNvZGVBdCh0aGlzLmN1cnNvcikpKSl7CiAgICAgICAgICAgIGNwID0gKGNwIC0gMHhEODAwKSAqIDB4NDAwICsgKGQgLTB4REMwMCkgKyAweDEwMDAwOwogICAgICAgICAgICArK3RoaXMuY3Vyc29yOwogICAgICAgICB9CiAgICAgICAgIHJldHVybiBVQ2hhci5mcm9tQ2hhckNvZGUoY3ApOwogICAgICB9IGVsc2UgewogICAgICAgICB0aGlzLnN0ciA9IG51bGw7CiAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgIH07CgogICB2YXIgUmVjdXJzRGVjb21wSXRlcmF0b3IgPSBmdW5jdGlvbihpdCwgY2Fubyl7CiAgICAgIHRoaXMuaXQgPSBpdDsKICAgICAgdGhpcy5jYW5vbmljYWwgPSBjYW5vOwogICAgICB0aGlzLnJlc0J1ZiA9IFtdOwogICB9OwoKICAgUmVjdXJzRGVjb21wSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpewogICAgICBmdW5jdGlvbiByZWN1cnNpdmVEZWNvbXAoY2FubywgdWNoYXIpewogICAgICAgICB2YXIgZGVjb21wID0gdWNoYXIuZ2V0RGVjb21wKCk7CiAgICAgICAgIGlmKCEhZGVjb21wICYmICEoY2FubyAmJiB1Y2hhci5pc0NvbXBhdGliaWxpdHkoKSkpewogICAgICAgICAgICB2YXIgcmV0ID0gW107CiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkZWNvbXAubGVuZ3RoOyArK2kpewogICAgICAgICAgICAgICB2YXIgYSA9IHJlY3Vyc2l2ZURlY29tcChjYW5vLCBVQ2hhci5mcm9tQ2hhckNvZGUoZGVjb21wW2ldKSk7CiAgICAgICAgICAgICAgICByZXQgPSByZXQuY29uY2F0KGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBbdWNoYXJdOwogICAgICAgICB9CiAgICAgIH0KICAgICAgaWYodGhpcy5yZXNCdWYubGVuZ3RoID09PSAwKXsKICAgICAgICAgdmFyIHVjaGFyID0gdGhpcy5pdC5uZXh0KCk7CiAgICAgICAgIGlmKCF1Y2hhcil7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICB9CiAgICAgICAgIHRoaXMucmVzQnVmID0gcmVjdXJzaXZlRGVjb21wKHRoaXMuY2Fub25pY2FsLCB1Y2hhcik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucmVzQnVmLnNoaWZ0KCk7CiAgIH07CgogICB2YXIgRGVjb21wSXRlcmF0b3IgPSBmdW5jdGlvbihpdCl7CiAgICAgIHRoaXMuaXQgPSBpdDsKICAgICAgdGhpcy5yZXNCdWYgPSBbXTsKICAgfTsKCiAgIERlY29tcEl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKXsKICAgICAgdmFyIGNjOwogICAgICBpZih0aGlzLnJlc0J1Zi5sZW5ndGggPT09IDApewogICAgICAgICBkb3sKICAgICAgICAgICAgdmFyIHVjaGFyID0gdGhpcy5pdC5uZXh0KCk7CiAgICAgICAgICAgIGlmKCF1Y2hhcil7CiAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNjID0gdWNoYXIuZ2V0Q2Fub25pY2FsQ2xhc3MoKTsKICAgICAgICAgICAgdmFyIGluc3B0ID0gdGhpcy5yZXNCdWYubGVuZ3RoOwogICAgICAgICAgICBpZihjYyAhPT0gMCl7CiAgICAgICAgICAgICAgIGZvcig7IGluc3B0ID4gMDsgLS1pbnNwdCl7CiAgICAgICAgICAgICAgICAgIHZhciB1Y2hhcjIgPSB0aGlzLnJlc0J1ZltpbnNwdCAtIDFdOwogICAgICAgICAgICAgICAgICB2YXIgY2MyID0gdWNoYXIyLmdldENhbm9uaWNhbENsYXNzKCk7CiAgICAgICAgICAgICAgICAgIGlmKGNjMiA8PSBjYyl7CiAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnJlc0J1Zi5zcGxpY2UoaW5zcHQsIDAsIHVjaGFyKTsKICAgICAgICAgfSB3aGlsZShjYyAhPT0gMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucmVzQnVmLnNoaWZ0KCk7CiAgIH07CgogICB2YXIgQ29tcEl0ZXJhdG9yID0gZnVuY3Rpb24oaXQpewogICAgICB0aGlzLml0ID0gaXQ7CiAgICAgIHRoaXMucHJvY0J1ZiA9IFtdOwogICAgICB0aGlzLnJlc0J1ZiA9IFtdOwogICAgICB0aGlzLmxhc3RDbGFzcyA9IG51bGw7CiAgIH07CgogICBDb21wSXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpewogICAgICB3aGlsZSh0aGlzLnJlc0J1Zi5sZW5ndGggPT09IDApewogICAgICAgICB2YXIgdWNoYXIgPSB0aGlzLml0Lm5leHQoKTsKICAgICAgICAgaWYoIXVjaGFyKXsKICAgICAgICAgICAgdGhpcy5yZXNCdWYgPSB0aGlzLnByb2NCdWY7CiAgICAgICAgICAgIHRoaXMucHJvY0J1ZiA9IFtdOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgfQogICAgICAgICBpZih0aGlzLnByb2NCdWYubGVuZ3RoID09PSAwKXsKICAgICAgICAgICAgdGhpcy5sYXN0Q2xhc3MgPSB1Y2hhci5nZXRDYW5vbmljYWxDbGFzcygpOwogICAgICAgICAgICB0aGlzLnByb2NCdWYucHVzaCh1Y2hhcik7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBzdGFydGVyID0gdGhpcy5wcm9jQnVmWzBdOwogICAgICAgICAgICB2YXIgY29tcG9zaXRlID0gc3RhcnRlci5nZXRDb21wb3NpdGUodWNoYXIpOwogICAgICAgICAgICB2YXIgY2MgPSB1Y2hhci5nZXRDYW5vbmljYWxDbGFzcygpOwogICAgICAgICAgICBpZighIWNvbXBvc2l0ZSAmJiAodGhpcy5sYXN0Q2xhc3MgPCBjYyB8fCB0aGlzLmxhc3RDbGFzcyA9PT0gMCkpewogICAgICAgICAgICAgICB0aGlzLnByb2NCdWZbMF0gPSBjb21wb3NpdGU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgIGlmKGNjID09PSAwKXsKICAgICAgICAgICAgICAgICAgdGhpcy5yZXNCdWYgPSB0aGlzLnByb2NCdWY7CiAgICAgICAgICAgICAgICAgIHRoaXMucHJvY0J1ZiA9IFtdOwogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIHRoaXMubGFzdENsYXNzID0gY2M7CiAgICAgICAgICAgICAgIHRoaXMucHJvY0J1Zi5wdXNoKHVjaGFyKTsKICAgICAgICAgICAgfQogICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMucmVzQnVmLnNoaWZ0KCk7CiAgIH07CgogICB2YXIgY3JlYXRlSXRlcmF0b3IgPSBmdW5jdGlvbihtb2RlLCBzdHIpewogICAgICBzd2l0Y2gobW9kZSl7CiAgICAgICAgIGNhc2UgIk5GRCI6CiAgICAgICAgICAgIHJldHVybiBuZXcgRGVjb21wSXRlcmF0b3IobmV3IFJlY3Vyc0RlY29tcEl0ZXJhdG9yKG5ldyBVQ2hhckl0ZXJhdG9yKHN0ciksIHRydWUpKTsKICAgICAgICAgY2FzZSAiTkZLRCI6CiAgICAgICAgICAgIHJldHVybiBuZXcgRGVjb21wSXRlcmF0b3IobmV3IFJlY3Vyc0RlY29tcEl0ZXJhdG9yKG5ldyBVQ2hhckl0ZXJhdG9yKHN0ciksIGZhbHNlKSk7CiAgICAgICAgIGNhc2UgIk5GQyI6CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcEl0ZXJhdG9yKG5ldyBEZWNvbXBJdGVyYXRvcihuZXcgUmVjdXJzRGVjb21wSXRlcmF0b3IobmV3IFVDaGFySXRlcmF0b3Ioc3RyKSwgdHJ1ZSkpKTsKICAgICAgICAgY2FzZSAiTkZLQyI6CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcEl0ZXJhdG9yKG5ldyBEZWNvbXBJdGVyYXRvcihuZXcgUmVjdXJzRGVjb21wSXRlcmF0b3IobmV3IFVDaGFySXRlcmF0b3Ioc3RyKSwgZmFsc2UpKSk7CiAgICAgIH0KICAgICAgdGhyb3cgbW9kZSArICIgaXMgaW52YWxpZCI7CiAgIH07CiAgIHZhciBub3JtYWxpemUgPSBmdW5jdGlvbihtb2RlLCBzdHIpewogICAgICB2YXIgaXQgPSBjcmVhdGVJdGVyYXRvcihtb2RlLCBzdHIpOwogICAgICB2YXIgcmV0ID0gIiI7CiAgICAgIHZhciB1Y2hhcjsKICAgICAgd2hpbGUoISEodWNoYXIgPSBpdC5uZXh0KCkpKXsKICAgICAgICAgcmV0ICs9IHVjaGFyLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgfTsKCiAgIC8qIEFQSSBmdW5jdGlvbnMgKi8KICAgZnVuY3Rpb24gbmZkKHN0cil7CiAgICAgIHJldHVybiBub3JtYWxpemUoIk5GRCIsIHN0cik7CiAgIH0KCiAgIGZ1bmN0aW9uIG5ma2Qoc3RyKXsKICAgICAgcmV0dXJuIG5vcm1hbGl6ZSgiTkZLRCIsIHN0cik7CiAgIH0KCiAgIGZ1bmN0aW9uIG5mYyhzdHIpewogICAgICByZXR1cm4gbm9ybWFsaXplKCJORkMiLCBzdHIpOwogICB9CgogICBmdW5jdGlvbiBuZmtjKHN0cil7CiAgICAgIHJldHVybiBub3JtYWxpemUoIk5GS0MiLCBzdHIpOwogICB9CgovKiBVbmljb2RlIGRhdGEgKi8KVUNoYXIudWRhdGE9ewowOns2MDpbLCx7ODI0Ojg4MTR9XSw2MTpbLCx7ODI0Ojg4MDB9XSw2MjpbLCx7ODI0Ojg4MTV9XSw2NTpbLCx7NzY4OjE5Miw3Njk6MTkzLDc3MDoxOTQsNzcxOjE5NSw3NzI6MjU2LDc3NDoyNTgsNzc1OjU1MCw3NzY6MTk2LDc3Nzo3ODQyLDc3ODoxOTcsNzgwOjQ2MSw3ODM6NTEyLDc4NTo1MTQsODAzOjc4NDAsODA1Ojc2ODAsODA4OjI2MH1dLDY2OlssLHs3NzU6NzY4Miw4MDM6NzY4NCw4MTc6NzY4Nn1dLDY3OlssLHs3Njk6MjYyLDc3MDoyNjQsNzc1OjI2Niw3ODA6MjY4LDgwNzoxOTl9XSw2ODpbLCx7Nzc1Ojc2OTAsNzgwOjI3MCw4MDM6NzY5Miw4MDc6NzY5Niw4MTM6NzY5OCw4MTc6NzY5NH1dLDY5OlssLHs3Njg6MjAwLDc2OToyMDEsNzcwOjIwMiw3NzE6Nzg2OCw3NzI6Mjc0LDc3NDoyNzYsNzc1OjI3OCw3NzY6MjAzLDc3Nzo3ODY2LDc4MDoyODIsNzgzOjUxNiw3ODU6NTE4LDgwMzo3ODY0LDgwNzo1NTIsODA4OjI4MCw4MTM6NzcwNCw4MTY6NzcwNn1dLDcwOlssLHs3NzU6NzcxMH1dLDcxOlssLHs3Njk6NTAwLDc3MDoyODQsNzcyOjc3MTIsNzc0OjI4Niw3NzU6Mjg4LDc4MDo0ODYsODA3OjI5MH1dLDcyOlssLHs3NzA6MjkyLDc3NTo3NzE0LDc3Njo3NzE4LDc4MDo1NDIsODAzOjc3MTYsODA3Ojc3MjAsODE0Ojc3MjJ9XSw3MzpbLCx7NzY4OjIwNCw3Njk6MjA1LDc3MDoyMDYsNzcxOjI5Niw3NzI6Mjk4LDc3NDozMDAsNzc1OjMwNCw3NzY6MjA3LDc3Nzo3ODgwLDc4MDo0NjMsNzgzOjUyMCw3ODU6NTIyLDgwMzo3ODgyLDgwODozMDIsODE2Ojc3MjR9XSw3NDpbLCx7NzcwOjMwOH1dLDc1OlssLHs3Njk6NzcyOCw3ODA6NDg4LDgwMzo3NzMwLDgwNzozMTAsODE3Ojc3MzJ9XSw3NjpbLCx7NzY5OjMxMyw3ODA6MzE3LDgwMzo3NzM0LDgwNzozMTUsODEzOjc3NDAsODE3Ojc3Mzh9XSw3NzpbLCx7NzY5Ojc3NDIsNzc1Ojc3NDQsODAzOjc3NDZ9XSw3ODpbLCx7NzY4OjUwNCw3Njk6MzIzLDc3MToyMDksNzc1Ojc3NDgsNzgwOjMyNyw4MDM6Nzc1MCw4MDc6MzI1LDgxMzo3NzU0LDgxNzo3NzUyfV0sNzk6Wywsezc2ODoyMTAsNzY5OjIxMSw3NzA6MjEyLDc3MToyMTMsNzcyOjMzMiw3NzQ6MzM0LDc3NTo1NTgsNzc2OjIxNCw3Nzc6Nzg4Niw3Nzk6MzM2LDc4MDo0NjUsNzgzOjUyNCw3ODU6NTI2LDc5NTo0MTYsODAzOjc4ODQsODA4OjQ5MH1dLDgwOlssLHs3Njk6Nzc2NCw3NzU6Nzc2Nn1dLDgyOlssLHs3Njk6MzQwLDc3NTo3NzY4LDc4MDozNDQsNzgzOjUyOCw3ODU6NTMwLDgwMzo3NzcwLDgwNzozNDIsODE3Ojc3NzR9XSw4MzpbLCx7NzY5OjM0Niw3NzA6MzQ4LDc3NTo3Nzc2LDc4MDozNTIsODAzOjc3NzgsODA2OjUzNiw4MDc6MzUwfV0sODQ6Wywsezc3NTo3Nzg2LDc4MDozNTYsODAzOjc3ODgsODA2OjUzOCw4MDc6MzU0LDgxMzo3NzkyLDgxNzo3NzkwfV0sODU6Wywsezc2ODoyMTcsNzY5OjIxOCw3NzA6MjE5LDc3MTozNjAsNzcyOjM2Miw3NzQ6MzY0LDc3NjoyMjAsNzc3Ojc5MTAsNzc4OjM2Niw3Nzk6MzY4LDc4MDo0NjcsNzgzOjUzMiw3ODU6NTM0LDc5NTo0MzEsODAzOjc5MDgsODA0Ojc3OTQsODA4OjM3MCw4MTM6Nzc5OCw4MTY6Nzc5Nn1dLDg2OlssLHs3NzE6NzgwNCw4MDM6NzgwNn1dLDg3OlssLHs3Njg6NzgwOCw3Njk6NzgxMCw3NzA6MzcyLDc3NTo3ODE0LDc3Njo3ODEyLDgwMzo3ODE2fV0sODg6Wywsezc3NTo3ODE4LDc3Njo3ODIwfV0sODk6Wywsezc2ODo3OTIyLDc2OToyMjEsNzcwOjM3NCw3NzE6NzkyOCw3NzI6NTYyLDc3NTo3ODIyLDc3NjozNzYsNzc3Ojc5MjYsODAzOjc5MjR9XSw5MDpbLCx7NzY5OjM3Nyw3NzA6NzgyNCw3NzU6Mzc5LDc4MDozODEsODAzOjc4MjYsODE3Ojc4Mjh9XSw5NzpbLCx7NzY4OjIyNCw3Njk6MjI1LDc3MDoyMjYsNzcxOjIyNyw3NzI6MjU3LDc3NDoyNTksNzc1OjU1MSw3NzY6MjI4LDc3Nzo3ODQzLDc3ODoyMjksNzgwOjQ2Miw3ODM6NTEzLDc4NTo1MTUsODAzOjc4NDEsODA1Ojc2ODEsODA4OjI2MX1dLDk4OlssLHs3NzU6NzY4Myw4MDM6NzY4NSw4MTc6NzY4N31dLDk5OlssLHs3Njk6MjYzLDc3MDoyNjUsNzc1OjI2Nyw3ODA6MjY5LDgwNzoyMzF9XSwxMDA6Wywsezc3NTo3NjkxLDc4MDoyNzEsODAzOjc2OTMsODA3Ojc2OTcsODEzOjc2OTksODE3Ojc2OTV9XSwxMDE6Wywsezc2ODoyMzIsNzY5OjIzMyw3NzA6MjM0LDc3MTo3ODY5LDc3MjoyNzUsNzc0OjI3Nyw3NzU6Mjc5LDc3NjoyMzUsNzc3Ojc4NjcsNzgwOjI4Myw3ODM6NTE3LDc4NTo1MTksODAzOjc4NjUsODA3OjU1Myw4MDg6MjgxLDgxMzo3NzA1LDgxNjo3NzA3fV0sMTAyOlssLHs3NzU6NzcxMX1dLDEwMzpbLCx7NzY5OjUwMSw3NzA6Mjg1LDc3Mjo3NzEzLDc3NDoyODcsNzc1OjI4OSw3ODA6NDg3LDgwNzoyOTF9XSwxMDQ6Wywsezc3MDoyOTMsNzc1Ojc3MTUsNzc2Ojc3MTksNzgwOjU0Myw4MDM6NzcxNyw4MDc6NzcyMSw4MTQ6NzcyMyw4MTc6NzgzMH1dLDEwNTpbLCx7NzY4OjIzNiw3Njk6MjM3LDc3MDoyMzgsNzcxOjI5Nyw3NzI6Mjk5LDc3NDozMDEsNzc2OjIzOSw3Nzc6Nzg4MSw3ODA6NDY0LDc4Mzo1MjEsNzg1OjUyMyw4MDM6Nzg4Myw4MDg6MzAzLDgxNjo3NzI1fV0sMTA2OlssLHs3NzA6MzA5LDc4MDo0OTZ9XSwxMDc6Wywsezc2OTo3NzI5LDc4MDo0ODksODAzOjc3MzEsODA3OjMxMSw4MTc6NzczM31dLDEwODpbLCx7NzY5OjMxNCw3ODA6MzE4LDgwMzo3NzM1LDgwNzozMTYsODEzOjc3NDEsODE3Ojc3Mzl9XSwxMDk6Wywsezc2OTo3NzQzLDc3NTo3NzQ1LDgwMzo3NzQ3fV0sMTEwOlssLHs3Njg6NTA1LDc2OTozMjQsNzcxOjI0MSw3NzU6Nzc0OSw3ODA6MzI4LDgwMzo3NzUxLDgwNzozMjYsODEzOjc3NTUsODE3Ojc3NTN9XSwxMTE6Wywsezc2ODoyNDIsNzY5OjI0Myw3NzA6MjQ0LDc3MToyNDUsNzcyOjMzMyw3NzQ6MzM1LDc3NTo1NTksNzc2OjI0Niw3Nzc6Nzg4Nyw3Nzk6MzM3LDc4MDo0NjYsNzgzOjUyNSw3ODU6NTI3LDc5NTo0MTcsODAzOjc4ODUsODA4OjQ5MX1dLDExMjpbLCx7NzY5Ojc3NjUsNzc1Ojc3Njd9XSwxMTQ6Wywsezc2OTozNDEsNzc1Ojc3NjksNzgwOjM0NSw3ODM6NTI5LDc4NTo1MzEsODAzOjc3NzEsODA3OjM0Myw4MTc6Nzc3NX1dLDExNTpbLCx7NzY5OjM0Nyw3NzA6MzQ5LDc3NTo3Nzc3LDc4MDozNTMsODAzOjc3NzksODA2OjUzNyw4MDc6MzUxfV0sMTE2OlssLHs3NzU6Nzc4Nyw3NzY6NzgzMSw3ODA6MzU3LDgwMzo3Nzg5LDgwNjo1MzksODA3OjM1NSw4MTM6Nzc5Myw4MTc6Nzc5MX1dLDExNzpbLCx7NzY4OjI0OSw3Njk6MjUwLDc3MDoyNTEsNzcxOjM2MSw3NzI6MzYzLDc3NDozNjUsNzc2OjI1Miw3Nzc6NzkxMSw3Nzg6MzY3LDc3OTozNjksNzgwOjQ2OCw3ODM6NTMzLDc4NTo1MzUsNzk1OjQzMiw4MDM6NzkwOSw4MDQ6Nzc5NSw4MDg6MzcxLDgxMzo3Nzk5LDgxNjo3Nzk3fV0sMTE4OlssLHs3NzE6NzgwNSw4MDM6NzgwN31dLDExOTpbLCx7NzY4Ojc4MDksNzY5Ojc4MTEsNzcwOjM3Myw3NzU6NzgxNSw3NzY6NzgxMyw3Nzg6NzgzMiw4MDM6NzgxN31dLDEyMDpbLCx7Nzc1Ojc4MTksNzc2Ojc4MjF9XSwxMjE6Wywsezc2ODo3OTIzLDc2OToyNTMsNzcwOjM3NSw3NzE6NzkyOSw3NzI6NTYzLDc3NTo3ODIzLDc3NjoyNTUsNzc3Ojc5MjcsNzc4Ojc4MzMsODAzOjc5MjV9XSwxMjI6Wywsezc2OTozNzgsNzcwOjc4MjUsNzc1OjM4MCw3ODA6MzgyLDgwMzo3ODI3LDgxNzo3ODI5fV0sMTYwOltbMzJdLDI1Nl0sMTY4OltbMzIsNzc2XSwyNTYsezc2ODo4MTczLDc2OTo5MDEsODM0OjgxMjl9XSwxNzA6W1s5N10sMjU2XSwxNzU6W1szMiw3NzJdLDI1Nl0sMTc4OltbNTBdLDI1Nl0sMTc5OltbNTFdLDI1Nl0sMTgwOltbMzIsNzY5XSwyNTZdLDE4MTpbWzk1Nl0sMjU2XSwxODQ6W1szMiw4MDddLDI1Nl0sMTg1OltbNDldLDI1Nl0sMTg2OltbMTExXSwyNTZdLDE4ODpbWzQ5LDgyNjAsNTJdLDI1Nl0sMTg5OltbNDksODI2MCw1MF0sMjU2XSwxOTA6W1s1MSw4MjYwLDUyXSwyNTZdLDE5MjpbWzY1LDc2OF1dLDE5MzpbWzY1LDc2OV1dLDE5NDpbWzY1LDc3MF0sLHs3Njg6Nzg0Niw3Njk6Nzg0NCw3NzE6Nzg1MCw3Nzc6Nzg0OH1dLDE5NTpbWzY1LDc3MV1dLDE5NjpbWzY1LDc3Nl0sLHs3NzI6NDc4fV0sMTk3OltbNjUsNzc4XSwsezc2OTo1MDZ9XSwxOTg6Wywsezc2OTo1MDgsNzcyOjQ4Mn1dLDE5OTpbWzY3LDgwN10sLHs3Njk6NzY4OH1dLDIwMDpbWzY5LDc2OF1dLDIwMTpbWzY5LDc2OV1dLDIwMjpbWzY5LDc3MF0sLHs3Njg6Nzg3Miw3Njk6Nzg3MCw3NzE6Nzg3Niw3Nzc6Nzg3NH1dLDIwMzpbWzY5LDc3Nl1dLDIwNDpbWzczLDc2OF1dLDIwNTpbWzczLDc2OV1dLDIwNjpbWzczLDc3MF1dLDIwNzpbWzczLDc3Nl0sLHs3Njk6NzcyNn1dLDIwOTpbWzc4LDc3MV1dLDIxMDpbWzc5LDc2OF1dLDIxMTpbWzc5LDc2OV1dLDIxMjpbWzc5LDc3MF0sLHs3Njg6Nzg5MCw3Njk6Nzg4OCw3NzE6Nzg5NCw3Nzc6Nzg5Mn1dLDIxMzpbWzc5LDc3MV0sLHs3Njk6Nzc1Niw3NzI6NTU2LDc3Njo3NzU4fV0sMjE0OltbNzksNzc2XSwsezc3Mjo1NTR9XSwyMTY6Wywsezc2OTo1MTB9XSwyMTc6W1s4NSw3NjhdXSwyMTg6W1s4NSw3NjldXSwyMTk6W1s4NSw3NzBdXSwyMjA6W1s4NSw3NzZdLCx7NzY4OjQ3NSw3Njk6NDcxLDc3Mjo0NjksNzgwOjQ3M31dLDIyMTpbWzg5LDc2OV1dLDIyNDpbWzk3LDc2OF1dLDIyNTpbWzk3LDc2OV1dLDIyNjpbWzk3LDc3MF0sLHs3Njg6Nzg0Nyw3Njk6Nzg0NSw3NzE6Nzg1MSw3Nzc6Nzg0OX1dLDIyNzpbWzk3LDc3MV1dLDIyODpbWzk3LDc3Nl0sLHs3NzI6NDc5fV0sMjI5OltbOTcsNzc4XSwsezc2OTo1MDd9XSwyMzA6Wywsezc2OTo1MDksNzcyOjQ4M31dLDIzMTpbWzk5LDgwN10sLHs3Njk6NzY4OX1dLDIzMjpbWzEwMSw3NjhdXSwyMzM6W1sxMDEsNzY5XV0sMjM0OltbMTAxLDc3MF0sLHs3Njg6Nzg3Myw3Njk6Nzg3MSw3NzE6Nzg3Nyw3Nzc6Nzg3NX1dLDIzNTpbWzEwMSw3NzZdXSwyMzY6W1sxMDUsNzY4XV0sMjM3OltbMTA1LDc2OV1dLDIzODpbWzEwNSw3NzBdXSwyMzk6W1sxMDUsNzc2XSwsezc2OTo3NzI3fV0sMjQxOltbMTEwLDc3MV1dLDI0MjpbWzExMSw3NjhdXSwyNDM6W1sxMTEsNzY5XV0sMjQ0OltbMTExLDc3MF0sLHs3Njg6Nzg5MSw3Njk6Nzg4OSw3NzE6Nzg5NSw3Nzc6Nzg5M31dLDI0NTpbWzExMSw3NzFdLCx7NzY5Ojc3NTcsNzcyOjU1Nyw3NzY6Nzc1OX1dLDI0NjpbWzExMSw3NzZdLCx7NzcyOjU1NX1dLDI0ODpbLCx7NzY5OjUxMX1dLDI0OTpbWzExNyw3NjhdXSwyNTA6W1sxMTcsNzY5XV0sMjUxOltbMTE3LDc3MF1dLDI1MjpbWzExNyw3NzZdLCx7NzY4OjQ3Niw3Njk6NDcyLDc3Mjo0NzAsNzgwOjQ3NH1dLDI1MzpbWzEyMSw3NjldXSwyNTU6W1sxMjEsNzc2XV19LAoyNTY6ezI1NjpbWzY1LDc3Ml1dLDI1NzpbWzk3LDc3Ml1dLDI1ODpbWzY1LDc3NF0sLHs3Njg6Nzg1Niw3Njk6Nzg1NCw3NzE6Nzg2MCw3Nzc6Nzg1OH1dLDI1OTpbWzk3LDc3NF0sLHs3Njg6Nzg1Nyw3Njk6Nzg1NSw3NzE6Nzg2MSw3Nzc6Nzg1OX1dLDI2MDpbWzY1LDgwOF1dLDI2MTpbWzk3LDgwOF1dLDI2MjpbWzY3LDc2OV1dLDI2MzpbWzk5LDc2OV1dLDI2NDpbWzY3LDc3MF1dLDI2NTpbWzk5LDc3MF1dLDI2NjpbWzY3LDc3NV1dLDI2NzpbWzk5LDc3NV1dLDI2ODpbWzY3LDc4MF1dLDI2OTpbWzk5LDc4MF1dLDI3MDpbWzY4LDc4MF1dLDI3MTpbWzEwMCw3ODBdXSwyNzQ6W1s2OSw3NzJdLCx7NzY4Ojc3MDAsNzY5Ojc3MDJ9XSwyNzU6W1sxMDEsNzcyXSwsezc2ODo3NzAxLDc2OTo3NzAzfV0sMjc2OltbNjksNzc0XV0sMjc3OltbMTAxLDc3NF1dLDI3ODpbWzY5LDc3NV1dLDI3OTpbWzEwMSw3NzVdXSwyODA6W1s2OSw4MDhdXSwyODE6W1sxMDEsODA4XV0sMjgyOltbNjksNzgwXV0sMjgzOltbMTAxLDc4MF1dLDI4NDpbWzcxLDc3MF1dLDI4NTpbWzEwMyw3NzBdXSwyODY6W1s3MSw3NzRdXSwyODc6W1sxMDMsNzc0XV0sMjg4OltbNzEsNzc1XV0sMjg5OltbMTAzLDc3NV1dLDI5MDpbWzcxLDgwN11dLDI5MTpbWzEwMyw4MDddXSwyOTI6W1s3Miw3NzBdXSwyOTM6W1sxMDQsNzcwXV0sMjk2OltbNzMsNzcxXV0sMjk3OltbMTA1LDc3MV1dLDI5ODpbWzczLDc3Ml1dLDI5OTpbWzEwNSw3NzJdXSwzMDA6W1s3Myw3NzRdXSwzMDE6W1sxMDUsNzc0XV0sMzAyOltbNzMsODA4XV0sMzAzOltbMTA1LDgwOF1dLDMwNDpbWzczLDc3NV1dLDMwNjpbWzczLDc0XSwyNTZdLDMwNzpbWzEwNSwxMDZdLDI1Nl0sMzA4OltbNzQsNzcwXV0sMzA5OltbMTA2LDc3MF1dLDMxMDpbWzc1LDgwN11dLDMxMTpbWzEwNyw4MDddXSwzMTM6W1s3Niw3NjldXSwzMTQ6W1sxMDgsNzY5XV0sMzE1OltbNzYsODA3XV0sMzE2OltbMTA4LDgwN11dLDMxNzpbWzc2LDc4MF1dLDMxODpbWzEwOCw3ODBdXSwzMTk6W1s3NiwxODNdLDI1Nl0sMzIwOltbMTA4LDE4M10sMjU2XSwzMjM6W1s3OCw3NjldXSwzMjQ6W1sxMTAsNzY5XV0sMzI1OltbNzgsODA3XV0sMzI2OltbMTEwLDgwN11dLDMyNzpbWzc4LDc4MF1dLDMyODpbWzExMCw3ODBdXSwzMjk6W1s3MDAsMTEwXSwyNTZdLDMzMjpbWzc5LDc3Ml0sLHs3Njg6Nzc2MCw3Njk6Nzc2Mn1dLDMzMzpbWzExMSw3NzJdLCx7NzY4Ojc3NjEsNzY5Ojc3NjN9XSwzMzQ6W1s3OSw3NzRdXSwzMzU6W1sxMTEsNzc0XV0sMzM2OltbNzksNzc5XV0sMzM3OltbMTExLDc3OV1dLDM0MDpbWzgyLDc2OV1dLDM0MTpbWzExNCw3NjldXSwzNDI6W1s4Miw4MDddXSwzNDM6W1sxMTQsODA3XV0sMzQ0OltbODIsNzgwXV0sMzQ1OltbMTE0LDc4MF1dLDM0NjpbWzgzLDc2OV0sLHs3NzU6Nzc4MH1dLDM0NzpbWzExNSw3NjldLCx7Nzc1Ojc3ODF9XSwzNDg6W1s4Myw3NzBdXSwzNDk6W1sxMTUsNzcwXV0sMzUwOltbODMsODA3XV0sMzUxOltbMTE1LDgwN11dLDM1MjpbWzgzLDc4MF0sLHs3NzU6Nzc4Mn1dLDM1MzpbWzExNSw3ODBdLCx7Nzc1Ojc3ODN9XSwzNTQ6W1s4NCw4MDddXSwzNTU6W1sxMTYsODA3XV0sMzU2OltbODQsNzgwXV0sMzU3OltbMTE2LDc4MF1dLDM2MDpbWzg1LDc3MV0sLHs3Njk6NzgwMH1dLDM2MTpbWzExNyw3NzFdLCx7NzY5Ojc4MDF9XSwzNjI6W1s4NSw3NzJdLCx7Nzc2Ojc4MDJ9XSwzNjM6W1sxMTcsNzcyXSwsezc3Njo3ODAzfV0sMzY0OltbODUsNzc0XV0sMzY1OltbMTE3LDc3NF1dLDM2NjpbWzg1LDc3OF1dLDM2NzpbWzExNyw3NzhdXSwzNjg6W1s4NSw3NzldXSwzNjk6W1sxMTcsNzc5XV0sMzcwOltbODUsODA4XV0sMzcxOltbMTE3LDgwOF1dLDM3MjpbWzg3LDc3MF1dLDM3MzpbWzExOSw3NzBdXSwzNzQ6W1s4OSw3NzBdXSwzNzU6W1sxMjEsNzcwXV0sMzc2OltbODksNzc2XV0sMzc3OltbOTAsNzY5XV0sMzc4OltbMTIyLDc2OV1dLDM3OTpbWzkwLDc3NV1dLDM4MDpbWzEyMiw3NzVdXSwzODE6W1s5MCw3ODBdXSwzODI6W1sxMjIsNzgwXV0sMzgzOltbMTE1XSwyNTYsezc3NTo3ODM1fV0sNDE2OltbNzksNzk1XSwsezc2ODo3OTAwLDc2OTo3ODk4LDc3MTo3OTA0LDc3Nzo3OTAyLDgwMzo3OTA2fV0sNDE3OltbMTExLDc5NV0sLHs3Njg6NzkwMSw3Njk6Nzg5OSw3NzE6NzkwNSw3Nzc6NzkwMyw4MDM6NzkwN31dLDQzMTpbWzg1LDc5NV0sLHs3Njg6NzkxNCw3Njk6NzkxMiw3NzE6NzkxOCw3Nzc6NzkxNiw4MDM6NzkyMH1dLDQzMjpbWzExNyw3OTVdLCx7NzY4Ojc5MTUsNzY5Ojc5MTMsNzcxOjc5MTksNzc3Ojc5MTcsODAzOjc5MjF9XSw0Mzk6Wywsezc4MDo0OTR9XSw0NTI6W1s2OCwzODFdLDI1Nl0sNDUzOltbNjgsMzgyXSwyNTZdLDQ1NDpbWzEwMCwzODJdLDI1Nl0sNDU1OltbNzYsNzRdLDI1Nl0sNDU2OltbNzYsMTA2XSwyNTZdLDQ1NzpbWzEwOCwxMDZdLDI1Nl0sNDU4OltbNzgsNzRdLDI1Nl0sNDU5OltbNzgsMTA2XSwyNTZdLDQ2MDpbWzExMCwxMDZdLDI1Nl0sNDYxOltbNjUsNzgwXV0sNDYyOltbOTcsNzgwXV0sNDYzOltbNzMsNzgwXV0sNDY0OltbMTA1LDc4MF1dLDQ2NTpbWzc5LDc4MF1dLDQ2NjpbWzExMSw3ODBdXSw0Njc6W1s4NSw3ODBdXSw0Njg6W1sxMTcsNzgwXV0sNDY5OltbMjIwLDc3Ml1dLDQ3MDpbWzI1Miw3NzJdXSw0NzE6W1syMjAsNzY5XV0sNDcyOltbMjUyLDc2OV1dLDQ3MzpbWzIyMCw3ODBdXSw0NzQ6W1syNTIsNzgwXV0sNDc1OltbMjIwLDc2OF1dLDQ3NjpbWzI1Miw3NjhdXSw0Nzg6W1sxOTYsNzcyXV0sNDc5OltbMjI4LDc3Ml1dLDQ4MDpbWzU1MCw3NzJdXSw0ODE6W1s1NTEsNzcyXV0sNDgyOltbMTk4LDc3Ml1dLDQ4MzpbWzIzMCw3NzJdXSw0ODY6W1s3MSw3ODBdXSw0ODc6W1sxMDMsNzgwXV0sNDg4OltbNzUsNzgwXV0sNDg5OltbMTA3LDc4MF1dLDQ5MDpbWzc5LDgwOF0sLHs3NzI6NDkyfV0sNDkxOltbMTExLDgwOF0sLHs3NzI6NDkzfV0sNDkyOltbNDkwLDc3Ml1dLDQ5MzpbWzQ5MSw3NzJdXSw0OTQ6W1s0MzksNzgwXV0sNDk1OltbNjU4LDc4MF1dLDQ5NjpbWzEwNiw3ODBdXSw0OTc6W1s2OCw5MF0sMjU2XSw0OTg6W1s2OCwxMjJdLDI1Nl0sNDk5OltbMTAwLDEyMl0sMjU2XSw1MDA6W1s3MSw3NjldXSw1MDE6W1sxMDMsNzY5XV0sNTA0OltbNzgsNzY4XV0sNTA1OltbMTEwLDc2OF1dLDUwNjpbWzE5Nyw3NjldXSw1MDc6W1syMjksNzY5XV0sNTA4OltbMTk4LDc2OV1dLDUwOTpbWzIzMCw3NjldXSw1MTA6W1syMTYsNzY5XV0sNTExOltbMjQ4LDc2OV1dLDY2MDQ1OlssMjIwXX0sCjUxMjp7NTEyOltbNjUsNzgzXV0sNTEzOltbOTcsNzgzXV0sNTE0OltbNjUsNzg1XV0sNTE1OltbOTcsNzg1XV0sNTE2OltbNjksNzgzXV0sNTE3OltbMTAxLDc4M11dLDUxODpbWzY5LDc4NV1dLDUxOTpbWzEwMSw3ODVdXSw1MjA6W1s3Myw3ODNdXSw1MjE6W1sxMDUsNzgzXV0sNTIyOltbNzMsNzg1XV0sNTIzOltbMTA1LDc4NV1dLDUyNDpbWzc5LDc4M11dLDUyNTpbWzExMSw3ODNdXSw1MjY6W1s3OSw3ODVdXSw1Mjc6W1sxMTEsNzg1XV0sNTI4OltbODIsNzgzXV0sNTI5OltbMTE0LDc4M11dLDUzMDpbWzgyLDc4NV1dLDUzMTpbWzExNCw3ODVdXSw1MzI6W1s4NSw3ODNdXSw1MzM6W1sxMTcsNzgzXV0sNTM0OltbODUsNzg1XV0sNTM1OltbMTE3LDc4NV1dLDUzNjpbWzgzLDgwNl1dLDUzNzpbWzExNSw4MDZdXSw1Mzg6W1s4NCw4MDZdXSw1Mzk6W1sxMTYsODA2XV0sNTQyOltbNzIsNzgwXV0sNTQzOltbMTA0LDc4MF1dLDU1MDpbWzY1LDc3NV0sLHs3NzI6NDgwfV0sNTUxOltbOTcsNzc1XSwsezc3Mjo0ODF9XSw1NTI6W1s2OSw4MDddLCx7Nzc0Ojc3MDh9XSw1NTM6W1sxMDEsODA3XSwsezc3NDo3NzA5fV0sNTU0OltbMjE0LDc3Ml1dLDU1NTpbWzI0Niw3NzJdXSw1NTY6W1syMTMsNzcyXV0sNTU3OltbMjQ1LDc3Ml1dLDU1ODpbWzc5LDc3NV0sLHs3NzI6NTYwfV0sNTU5OltbMTExLDc3NV0sLHs3NzI6NTYxfV0sNTYwOltbNTU4LDc3Ml1dLDU2MTpbWzU1OSw3NzJdXSw1NjI6W1s4OSw3NzJdXSw1NjM6W1sxMjEsNzcyXV0sNjU4OlssLHs3ODA6NDk1fV0sNjg4OltbMTA0XSwyNTZdLDY4OTpbWzYxNF0sMjU2XSw2OTA6W1sxMDZdLDI1Nl0sNjkxOltbMTE0XSwyNTZdLDY5MjpbWzYzM10sMjU2XSw2OTM6W1s2MzVdLDI1Nl0sNjk0OltbNjQxXSwyNTZdLDY5NTpbWzExOV0sMjU2XSw2OTY6W1sxMjFdLDI1Nl0sNzI4OltbMzIsNzc0XSwyNTZdLDcyOTpbWzMyLDc3NV0sMjU2XSw3MzA6W1szMiw3NzhdLDI1Nl0sNzMxOltbMzIsODA4XSwyNTZdLDczMjpbWzMyLDc3MV0sMjU2XSw3MzM6W1szMiw3NzldLDI1Nl0sNzM2OltbNjExXSwyNTZdLDczNzpbWzEwOF0sMjU2XSw3Mzg6W1sxMTVdLDI1Nl0sNzM5OltbMTIwXSwyNTZdLDc0MDpbWzY2MV0sMjU2XSw2NjI3MjpbLDIyMF19LAo3Njg6ezc2ODpbLDIzMF0sNzY5OlssMjMwXSw3NzA6WywyMzBdLDc3MTpbLDIzMF0sNzcyOlssMjMwXSw3NzM6WywyMzBdLDc3NDpbLDIzMF0sNzc1OlssMjMwXSw3NzY6WywyMzAsezc2OTo4MzZ9XSw3Nzc6WywyMzBdLDc3ODpbLDIzMF0sNzc5OlssMjMwXSw3ODA6WywyMzBdLDc4MTpbLDIzMF0sNzgyOlssMjMwXSw3ODM6WywyMzBdLDc4NDpbLDIzMF0sNzg1OlssMjMwXSw3ODY6WywyMzBdLDc4NzpbLDIzMF0sNzg4OlssMjMwXSw3ODk6WywyMzJdLDc5MDpbLDIyMF0sNzkxOlssMjIwXSw3OTI6WywyMjBdLDc5MzpbLDIyMF0sNzk0OlssMjMyXSw3OTU6WywyMTZdLDc5NjpbLDIyMF0sNzk3OlssMjIwXSw3OTg6WywyMjBdLDc5OTpbLDIyMF0sODAwOlssMjIwXSw4MDE6WywyMDJdLDgwMjpbLDIwMl0sODAzOlssMjIwXSw4MDQ6WywyMjBdLDgwNTpbLDIyMF0sODA2OlssMjIwXSw4MDc6WywyMDJdLDgwODpbLDIwMl0sODA5OlssMjIwXSw4MTA6WywyMjBdLDgxMTpbLDIyMF0sODEyOlssMjIwXSw4MTM6WywyMjBdLDgxNDpbLDIyMF0sODE1OlssMjIwXSw4MTY6WywyMjBdLDgxNzpbLDIyMF0sODE4OlssMjIwXSw4MTk6WywyMjBdLDgyMDpbLDFdLDgyMTpbLDFdLDgyMjpbLDFdLDgyMzpbLDFdLDgyNDpbLDFdLDgyNTpbLDIyMF0sODI2OlssMjIwXSw4Mjc6WywyMjBdLDgyODpbLDIyMF0sODI5OlssMjMwXSw4MzA6WywyMzBdLDgzMTpbLDIzMF0sODMyOltbNzY4XSwyMzBdLDgzMzpbWzc2OV0sMjMwXSw4MzQ6WywyMzBdLDgzNTpbWzc4N10sMjMwXSw4MzY6W1s3NzYsNzY5XSwyMzBdLDgzNzpbLDI0MF0sODM4OlssMjMwXSw4Mzk6WywyMjBdLDg0MDpbLDIyMF0sODQxOlssMjIwXSw4NDI6WywyMzBdLDg0MzpbLDIzMF0sODQ0OlssMjMwXSw4NDU6WywyMjBdLDg0NjpbLDIyMF0sODQ4OlssMjMwXSw4NDk6WywyMzBdLDg1MDpbLDIzMF0sODUxOlssMjIwXSw4NTI6WywyMjBdLDg1MzpbLDIyMF0sODU0OlssMjIwXSw4NTU6WywyMzBdLDg1NjpbLDIzMl0sODU3OlssMjIwXSw4NTg6WywyMjBdLDg1OTpbLDIzMF0sODYwOlssMjMzXSw4NjE6WywyMzRdLDg2MjpbLDIzNF0sODYzOlssMjMzXSw4NjQ6WywyMzRdLDg2NTpbLDIzNF0sODY2OlssMjMzXSw4Njc6WywyMzBdLDg2ODpbLDIzMF0sODY5OlssMjMwXSw4NzA6WywyMzBdLDg3MTpbLDIzMF0sODcyOlssMjMwXSw4NzM6WywyMzBdLDg3NDpbLDIzMF0sODc1OlssMjMwXSw4NzY6WywyMzBdLDg3NzpbLDIzMF0sODc4OlssMjMwXSw4Nzk6WywyMzBdLDg4NDpbWzY5N11dLDg5MDpbWzMyLDgzN10sMjU2XSw4OTQ6W1s1OV1dLDkwMDpbWzMyLDc2OV0sMjU2XSw5MDE6W1sxNjgsNzY5XV0sOTAyOltbOTEzLDc2OV1dLDkwMzpbWzE4M11dLDkwNDpbWzkxNyw3NjldXSw5MDU6W1s5MTksNzY5XV0sOTA2OltbOTIxLDc2OV1dLDkwODpbWzkyNyw3NjldXSw5MTA6W1s5MzMsNzY5XV0sOTExOltbOTM3LDc2OV1dLDkxMjpbWzk3MCw3NjldXSw5MTM6Wywsezc2ODo4MTIyLDc2OTo5MDIsNzcyOjgxMjEsNzc0OjgxMjAsNzg3Ojc5NDQsNzg4Ojc5NDUsODM3OjgxMjR9XSw5MTc6Wywsezc2ODo4MTM2LDc2OTo5MDQsNzg3Ojc5NjAsNzg4Ojc5NjF9XSw5MTk6Wywsezc2ODo4MTM4LDc2OTo5MDUsNzg3Ojc5NzYsNzg4Ojc5NzcsODM3OjgxNDB9XSw5MjE6Wywsezc2ODo4MTU0LDc2OTo5MDYsNzcyOjgxNTMsNzc0OjgxNTIsNzc2OjkzOCw3ODc6Nzk5Miw3ODg6Nzk5M31dLDkyNzpbLCx7NzY4OjgxODQsNzY5OjkwOCw3ODc6ODAwOCw3ODg6ODAwOX1dLDkyOTpbLCx7Nzg4OjgxNzJ9XSw5MzM6Wywsezc2ODo4MTcwLDc2OTo5MTAsNzcyOjgxNjksNzc0OjgxNjgsNzc2OjkzOSw3ODg6ODAyNX1dLDkzNzpbLCx7NzY4OjgxODYsNzY5OjkxMSw3ODc6ODA0MCw3ODg6ODA0MSw4Mzc6ODE4OH1dLDkzODpbWzkyMSw3NzZdXSw5Mzk6W1s5MzMsNzc2XV0sOTQwOltbOTQ1LDc2OV0sLHs4Mzc6ODExNn1dLDk0MTpbWzk0OSw3NjldXSw5NDI6W1s5NTEsNzY5XSwsezgzNzo4MTMyfV0sOTQzOltbOTUzLDc2OV1dLDk0NDpbWzk3MSw3NjldXSw5NDU6Wywsezc2ODo4MDQ4LDc2OTo5NDAsNzcyOjgxMTMsNzc0OjgxMTIsNzg3Ojc5MzYsNzg4Ojc5MzcsODM0OjgxMTgsODM3OjgxMTV9XSw5NDk6Wywsezc2ODo4MDUwLDc2OTo5NDEsNzg3Ojc5NTIsNzg4Ojc5NTN9XSw5NTE6Wywsezc2ODo4MDUyLDc2OTo5NDIsNzg3Ojc5NjgsNzg4Ojc5NjksODM0OjgxMzQsODM3OjgxMzF9XSw5NTM6Wywsezc2ODo4MDU0LDc2OTo5NDMsNzcyOjgxNDUsNzc0OjgxNDQsNzc2Ojk3MCw3ODc6Nzk4NCw3ODg6Nzk4NSw4MzQ6ODE1MH1dLDk1OTpbLCx7NzY4OjgwNTYsNzY5Ojk3Miw3ODc6ODAwMCw3ODg6ODAwMX1dLDk2MTpbLCx7Nzg3OjgxNjQsNzg4OjgxNjV9XSw5NjU6Wywsezc2ODo4MDU4LDc2OTo5NzMsNzcyOjgxNjEsNzc0OjgxNjAsNzc2Ojk3MSw3ODc6ODAxNiw3ODg6ODAxNyw4MzQ6ODE2Nn1dLDk2OTpbLCx7NzY4OjgwNjAsNzY5Ojk3NCw3ODc6ODAzMiw3ODg6ODAzMyw4MzQ6ODE4Miw4Mzc6ODE3OX1dLDk3MDpbWzk1Myw3NzZdLCx7NzY4OjgxNDYsNzY5OjkxMiw4MzQ6ODE1MX1dLDk3MTpbWzk2NSw3NzZdLCx7NzY4OjgxNjIsNzY5Ojk0NCw4MzQ6ODE2N31dLDk3MjpbWzk1OSw3NjldXSw5NzM6W1s5NjUsNzY5XV0sOTc0OltbOTY5LDc2OV0sLHs4Mzc6ODE4MH1dLDk3NjpbWzk0Nl0sMjU2XSw5Nzc6W1s5NTJdLDI1Nl0sOTc4OltbOTMzXSwyNTYsezc2OTo5NzksNzc2Ojk4MH1dLDk3OTpbWzk3OCw3NjldXSw5ODA6W1s5NzgsNzc2XV0sOTgxOltbOTY2XSwyNTZdLDk4MjpbWzk2MF0sMjU2XSwxMDA4OltbOTU0XSwyNTZdLDEwMDk6W1s5NjFdLDI1Nl0sMTAxMDpbWzk2Ml0sMjU2XSwxMDEyOltbOTIwXSwyNTZdLDEwMTM6W1s5NDldLDI1Nl0sMTAxNzpbWzkzMV0sMjU2XSw2NjQyMjpbLDIzMF0sNjY0MjM6WywyMzBdLDY2NDI0OlssMjMwXSw2NjQyNTpbLDIzMF0sNjY0MjY6WywyMzBdfSwKMTAyNDp7MTAyNDpbWzEwNDUsNzY4XV0sMTAyNTpbWzEwNDUsNzc2XV0sMTAyNzpbWzEwNDMsNzY5XV0sMTAzMDpbLCx7Nzc2OjEwMzF9XSwxMDMxOltbMTAzMCw3NzZdXSwxMDM2OltbMTA1MCw3NjldXSwxMDM3OltbMTA0OCw3NjhdXSwxMDM4OltbMTA1OSw3NzRdXSwxMDQwOlssLHs3NzQ6MTIzMiw3NzY6MTIzNH1dLDEwNDM6Wywsezc2OToxMDI3fV0sMTA0NTpbLCx7NzY4OjEwMjQsNzc0OjEyMzgsNzc2OjEwMjV9XSwxMDQ2OlssLHs3NzQ6MTIxNyw3NzY6MTI0NH1dLDEwNDc6Wywsezc3NjoxMjQ2fV0sMTA0ODpbLCx7NzY4OjEwMzcsNzcyOjEyNTAsNzc0OjEwNDksNzc2OjEyNTJ9XSwxMDQ5OltbMTA0OCw3NzRdXSwxMDUwOlssLHs3Njk6MTAzNn1dLDEwNTQ6Wywsezc3NjoxMjU0fV0sMTA1OTpbLCx7NzcyOjEyNjIsNzc0OjEwMzgsNzc2OjEyNjQsNzc5OjEyNjZ9XSwxMDYzOlssLHs3NzY6MTI2OH1dLDEwNjc6Wywsezc3NjoxMjcyfV0sMTA2OTpbLCx7Nzc2OjEyNjB9XSwxMDcyOlssLHs3NzQ6MTIzMyw3NzY6MTIzNX1dLDEwNzU6Wywsezc2OToxMTA3fV0sMTA3NzpbLCx7NzY4OjExMDQsNzc0OjEyMzksNzc2OjExMDV9XSwxMDc4OlssLHs3NzQ6MTIxOCw3NzY6MTI0NX1dLDEwNzk6Wywsezc3NjoxMjQ3fV0sMTA4MDpbLCx7NzY4OjExMTcsNzcyOjEyNTEsNzc0OjEwODEsNzc2OjEyNTN9XSwxMDgxOltbMTA4MCw3NzRdXSwxMDgyOlssLHs3Njk6MTExNn1dLDEwODY6Wywsezc3NjoxMjU1fV0sMTA5MTpbLCx7NzcyOjEyNjMsNzc0OjExMTgsNzc2OjEyNjUsNzc5OjEyNjd9XSwxMDk1OlssLHs3NzY6MTI2OX1dLDEwOTk6Wywsezc3NjoxMjczfV0sMTEwMTpbLCx7Nzc2OjEyNjF9XSwxMTA0OltbMTA3Nyw3NjhdXSwxMTA1OltbMTA3Nyw3NzZdXSwxMTA3OltbMTA3NSw3NjldXSwxMTEwOlssLHs3NzY6MTExMX1dLDExMTE6W1sxMTEwLDc3Nl1dLDExMTY6W1sxMDgyLDc2OV1dLDExMTc6W1sxMDgwLDc2OF1dLDExMTg6W1sxMDkxLDc3NF1dLDExNDA6Wywsezc4MzoxMTQyfV0sMTE0MTpbLCx7NzgzOjExNDN9XSwxMTQyOltbMTE0MCw3ODNdXSwxMTQzOltbMTE0MSw3ODNdXSwxMTU1OlssMjMwXSwxMTU2OlssMjMwXSwxMTU3OlssMjMwXSwxMTU4OlssMjMwXSwxMTU5OlssMjMwXSwxMjE3OltbMTA0Niw3NzRdXSwxMjE4OltbMTA3OCw3NzRdXSwxMjMyOltbMTA0MCw3NzRdXSwxMjMzOltbMTA3Miw3NzRdXSwxMjM0OltbMTA0MCw3NzZdXSwxMjM1OltbMTA3Miw3NzZdXSwxMjM4OltbMTA0NSw3NzRdXSwxMjM5OltbMTA3Nyw3NzRdXSwxMjQwOlssLHs3NzY6MTI0Mn1dLDEyNDE6Wywsezc3NjoxMjQzfV0sMTI0MjpbWzEyNDAsNzc2XV0sMTI0MzpbWzEyNDEsNzc2XV0sMTI0NDpbWzEwNDYsNzc2XV0sMTI0NTpbWzEwNzgsNzc2XV0sMTI0NjpbWzEwNDcsNzc2XV0sMTI0NzpbWzEwNzksNzc2XV0sMTI1MDpbWzEwNDgsNzcyXV0sMTI1MTpbWzEwODAsNzcyXV0sMTI1MjpbWzEwNDgsNzc2XV0sMTI1MzpbWzEwODAsNzc2XV0sMTI1NDpbWzEwNTQsNzc2XV0sMTI1NTpbWzEwODYsNzc2XV0sMTI1NjpbLCx7Nzc2OjEyNTh9XSwxMjU3OlssLHs3NzY6MTI1OX1dLDEyNTg6W1sxMjU2LDc3Nl1dLDEyNTk6W1sxMjU3LDc3Nl1dLDEyNjA6W1sxMDY5LDc3Nl1dLDEyNjE6W1sxMTAxLDc3Nl1dLDEyNjI6W1sxMDU5LDc3Ml1dLDEyNjM6W1sxMDkxLDc3Ml1dLDEyNjQ6W1sxMDU5LDc3Nl1dLDEyNjU6W1sxMDkxLDc3Nl1dLDEyNjY6W1sxMDU5LDc3OV1dLDEyNjc6W1sxMDkxLDc3OV1dLDEyNjg6W1sxMDYzLDc3Nl1dLDEyNjk6W1sxMDk1LDc3Nl1dLDEyNzI6W1sxMDY3LDc3Nl1dLDEyNzM6W1sxMDk5LDc3Nl1dfSwKMTI4MDp7MTQxNTpbWzEzODEsMTQxMF0sMjU2XSwxNDI1OlssMjIwXSwxNDI2OlssMjMwXSwxNDI3OlssMjMwXSwxNDI4OlssMjMwXSwxNDI5OlssMjMwXSwxNDMwOlssMjIwXSwxNDMxOlssMjMwXSwxNDMyOlssMjMwXSwxNDMzOlssMjMwXSwxNDM0OlssMjIyXSwxNDM1OlssMjIwXSwxNDM2OlssMjMwXSwxNDM3OlssMjMwXSwxNDM4OlssMjMwXSwxNDM5OlssMjMwXSwxNDQwOlssMjMwXSwxNDQxOlssMjMwXSwxNDQyOlssMjIwXSwxNDQzOlssMjIwXSwxNDQ0OlssMjIwXSwxNDQ1OlssMjIwXSwxNDQ2OlssMjIwXSwxNDQ3OlssMjIwXSwxNDQ4OlssMjMwXSwxNDQ5OlssMjMwXSwxNDUwOlssMjIwXSwxNDUxOlssMjMwXSwxNDUyOlssMjMwXSwxNDUzOlssMjIyXSwxNDU0OlssMjI4XSwxNDU1OlssMjMwXSwxNDU2OlssMTBdLDE0NTc6WywxMV0sMTQ1ODpbLDEyXSwxNDU5OlssMTNdLDE0NjA6WywxNF0sMTQ2MTpbLDE1XSwxNDYyOlssMTZdLDE0NjM6WywxN10sMTQ2NDpbLDE4XSwxNDY1OlssMTldLDE0NjY6WywxOV0sMTQ2NzpbLDIwXSwxNDY4OlssMjFdLDE0Njk6WywyMl0sMTQ3MTpbLDIzXSwxNDczOlssMjRdLDE0NzQ6WywyNV0sMTQ3NjpbLDIzMF0sMTQ3NzpbLDIyMF0sMTQ3OTpbLDE4XX0sCjE1MzY6ezE1NTI6WywyMzBdLDE1NTM6WywyMzBdLDE1NTQ6WywyMzBdLDE1NTU6WywyMzBdLDE1NTY6WywyMzBdLDE1NTc6WywyMzBdLDE1NTg6WywyMzBdLDE1NTk6WywyMzBdLDE1NjA6WywzMF0sMTU2MTpbLDMxXSwxNTYyOlssMzJdLDE1NzA6W1sxNTc1LDE2MTldXSwxNTcxOltbMTU3NSwxNjIwXV0sMTU3MjpbWzE2MDgsMTYyMF1dLDE1NzM6W1sxNTc1LDE2MjFdXSwxNTc0OltbMTYxMCwxNjIwXV0sMTU3NTpbLCx7MTYxOToxNTcwLDE2MjA6MTU3MSwxNjIxOjE1NzN9XSwxNjA4OlssLHsxNjIwOjE1NzJ9XSwxNjEwOlssLHsxNjIwOjE1NzR9XSwxNjExOlssMjddLDE2MTI6WywyOF0sMTYxMzpbLDI5XSwxNjE0OlssMzBdLDE2MTU6WywzMV0sMTYxNjpbLDMyXSwxNjE3OlssMzNdLDE2MTg6WywzNF0sMTYxOTpbLDIzMF0sMTYyMDpbLDIzMF0sMTYyMTpbLDIyMF0sMTYyMjpbLDIyMF0sMTYyMzpbLDIzMF0sMTYyNDpbLDIzMF0sMTYyNTpbLDIzMF0sMTYyNjpbLDIzMF0sMTYyNzpbLDIzMF0sMTYyODpbLDIyMF0sMTYyOTpbLDIzMF0sMTYzMDpbLDIzMF0sMTYzMTpbLDIyMF0sMTY0ODpbLDM1XSwxNjUzOltbMTU3NSwxNjUyXSwyNTZdLDE2NTQ6W1sxNjA4LDE2NTJdLDI1Nl0sMTY1NTpbWzE3MzUsMTY1Ml0sMjU2XSwxNjU2OltbMTYxMCwxNjUyXSwyNTZdLDE3Mjg6W1sxNzQ5LDE2MjBdXSwxNzI5OlssLHsxNjIwOjE3MzB9XSwxNzMwOltbMTcyOSwxNjIwXV0sMTc0NjpbLCx7MTYyMDoxNzQ3fV0sMTc0NzpbWzE3NDYsMTYyMF1dLDE3NDk6WywsezE2MjA6MTcyOH1dLDE3NTA6WywyMzBdLDE3NTE6WywyMzBdLDE3NTI6WywyMzBdLDE3NTM6WywyMzBdLDE3NTQ6WywyMzBdLDE3NTU6WywyMzBdLDE3NTY6WywyMzBdLDE3NTk6WywyMzBdLDE3NjA6WywyMzBdLDE3NjE6WywyMzBdLDE3NjI6WywyMzBdLDE3NjM6WywyMjBdLDE3NjQ6WywyMzBdLDE3Njc6WywyMzBdLDE3Njg6WywyMzBdLDE3NzA6WywyMjBdLDE3NzE6WywyMzBdLDE3NzI6WywyMzBdLDE3NzM6WywyMjBdfSwKMTc5Mjp7MTgwOTpbLDM2XSwxODQwOlssMjMwXSwxODQxOlssMjIwXSwxODQyOlssMjMwXSwxODQzOlssMjMwXSwxODQ0OlssMjIwXSwxODQ1OlssMjMwXSwxODQ2OlssMjMwXSwxODQ3OlssMjIwXSwxODQ4OlssMjIwXSwxODQ5OlssMjIwXSwxODUwOlssMjMwXSwxODUxOlssMjIwXSwxODUyOlssMjIwXSwxODUzOlssMjMwXSwxODU0OlssMjIwXSwxODU1OlssMjMwXSwxODU2OlssMjMwXSwxODU3OlssMjMwXSwxODU4OlssMjIwXSwxODU5OlssMjMwXSwxODYwOlssMjIwXSwxODYxOlssMjMwXSwxODYyOlssMjIwXSwxODYzOlssMjMwXSwxODY0OlssMjIwXSwxODY1OlssMjMwXSwxODY2OlssMjMwXSwyMDI3OlssMjMwXSwyMDI4OlssMjMwXSwyMDI5OlssMjMwXSwyMDMwOlssMjMwXSwyMDMxOlssMjMwXSwyMDMyOlssMjMwXSwyMDMzOlssMjMwXSwyMDM0OlssMjIwXSwyMDM1OlssMjMwXX0sCjIwNDg6ezIwNzA6WywyMzBdLDIwNzE6WywyMzBdLDIwNzI6WywyMzBdLDIwNzM6WywyMzBdLDIwNzU6WywyMzBdLDIwNzY6WywyMzBdLDIwNzc6WywyMzBdLDIwNzg6WywyMzBdLDIwNzk6WywyMzBdLDIwODA6WywyMzBdLDIwODE6WywyMzBdLDIwODI6WywyMzBdLDIwODM6WywyMzBdLDIwODU6WywyMzBdLDIwODY6WywyMzBdLDIwODc6WywyMzBdLDIwODk6WywyMzBdLDIwOTA6WywyMzBdLDIwOTE6WywyMzBdLDIwOTI6WywyMzBdLDIwOTM6WywyMzBdLDIxMzc6WywyMjBdLDIxMzg6WywyMjBdLDIxMzk6WywyMjBdLDIyNzY6WywyMzBdLDIyNzc6WywyMzBdLDIyNzg6WywyMjBdLDIyNzk6WywyMzBdLDIyODA6WywyMzBdLDIyODE6WywyMjBdLDIyODI6WywyMzBdLDIyODM6WywyMzBdLDIyODQ6WywyMzBdLDIyODU6WywyMjBdLDIyODY6WywyMjBdLDIyODc6WywyMjBdLDIyODg6WywyN10sMjI4OTpbLDI4XSwyMjkwOlssMjldLDIyOTE6WywyMzBdLDIyOTI6WywyMzBdLDIyOTM6WywyMzBdLDIyOTQ6WywyMjBdLDIyOTU6WywyMzBdLDIyOTY6WywyMzBdLDIyOTc6WywyMjBdLDIyOTg6WywyMjBdLDIyOTk6WywyMzBdLDIzMDA6WywyMzBdLDIzMDE6WywyMzBdLDIzMDI6WywyMzBdLDIzMDM6WywyMzBdfSwKMjMwNDp7MjM0NDpbLCx7MjM2NDoyMzQ1fV0sMjM0NTpbWzIzNDQsMjM2NF1dLDIzNTI6WywsezIzNjQ6MjM1M31dLDIzNTM6W1syMzUyLDIzNjRdXSwyMzU1OlssLHsyMzY0OjIzNTZ9XSwyMzU2OltbMjM1NSwyMzY0XV0sMjM2NDpbLDddLDIzODE6Wyw5XSwyMzg1OlssMjMwXSwyMzg2OlssMjIwXSwyMzg3OlssMjMwXSwyMzg4OlssMjMwXSwyMzkyOltbMjMyNSwyMzY0XSw1MTJdLDIzOTM6W1syMzI2LDIzNjRdLDUxMl0sMjM5NDpbWzIzMjcsMjM2NF0sNTEyXSwyMzk1OltbMjMzMiwyMzY0XSw1MTJdLDIzOTY6W1syMzM3LDIzNjRdLDUxMl0sMjM5NzpbWzIzMzgsMjM2NF0sNTEyXSwyMzk4OltbMjM0NywyMzY0XSw1MTJdLDIzOTk6W1syMzUxLDIzNjRdLDUxMl0sMjQ5MjpbLDddLDI1MDM6WywsezI0OTQ6MjUwNywyNTE5OjI1MDh9XSwyNTA3OltbMjUwMywyNDk0XV0sMjUwODpbWzI1MDMsMjUxOV1dLDI1MDk6Wyw5XSwyNTI0OltbMjQ2NSwyNDkyXSw1MTJdLDI1MjU6W1syNDY2LDI0OTJdLDUxMl0sMjUyNzpbWzI0NzksMjQ5Ml0sNTEyXX0sCjI1NjA6ezI2MTE6W1syNjEwLDI2MjBdLDUxMl0sMjYxNDpbWzI2MTYsMjYyMF0sNTEyXSwyNjIwOlssN10sMjYzNzpbLDldLDI2NDk6W1syNTgyLDI2MjBdLDUxMl0sMjY1MDpbWzI1ODMsMjYyMF0sNTEyXSwyNjUxOltbMjU4OCwyNjIwXSw1MTJdLDI2NTQ6W1syNjAzLDI2MjBdLDUxMl0sMjc0ODpbLDddLDI3NjU6Wyw5XSw2ODEwOTpbLDIyMF0sNjgxMTE6WywyMzBdLDY4MTUyOlssMjMwXSw2ODE1MzpbLDFdLDY4MTU0OlssMjIwXSw2ODE1OTpbLDldLDY4MzI1OlssMjMwXSw2ODMyNjpbLDIyMF19LAoyODE2OnsyODc2OlssN10sMjg4NzpbLCx7Mjg3ODoyODkxLDI5MDI6Mjg4OCwyOTAzOjI4OTJ9XSwyODg4OltbMjg4NywyOTAyXV0sMjg5MTpbWzI4ODcsMjg3OF1dLDI4OTI6W1syODg3LDI5MDNdXSwyODkzOlssOV0sMjkwODpbWzI4NDksMjg3Nl0sNTEyXSwyOTA5OltbMjg1MCwyODc2XSw1MTJdLDI5NjI6WywsezMwMzE6Mjk2NH1dLDI5NjQ6W1syOTYyLDMwMzFdXSwzMDE0OlssLHszMDA2OjMwMTgsMzAzMTozMDIwfV0sMzAxNTpbLCx7MzAwNjozMDE5fV0sMzAxODpbWzMwMTQsMzAwNl1dLDMwMTk6W1szMDE1LDMwMDZdXSwzMDIwOltbMzAxNCwzMDMxXV0sMzAyMTpbLDldfSwKMzA3Mjp7MzE0MjpbLCx7MzE1ODozMTQ0fV0sMzE0NDpbWzMxNDIsMzE1OF1dLDMxNDk6Wyw5XSwzMTU3OlssODRdLDMxNTg6Wyw5MV0sMzI2MDpbLDddLDMyNjM6WywsezMyODU6MzI2NH1dLDMyNjQ6W1szMjYzLDMyODVdXSwzMjcwOlssLHszMjY2OjMyNzQsMzI4NTozMjcxLDMyODY6MzI3Mn1dLDMyNzE6W1szMjcwLDMyODVdXSwzMjcyOltbMzI3MCwzMjg2XV0sMzI3NDpbWzMyNzAsMzI2Nl0sLHszMjg1OjMyNzV9XSwzMjc1OltbMzI3NCwzMjg1XV0sMzI3NzpbLDldfSwKMzMyODp7MzM5ODpbLCx7MzM5MDozNDAyLDM0MTU6MzQwNH1dLDMzOTk6WywsezMzOTA6MzQwM31dLDM0MDI6W1szMzk4LDMzOTBdXSwzNDAzOltbMzM5OSwzMzkwXV0sMzQwNDpbWzMzOTgsMzQxNV1dLDM0MDU6Wyw5XSwzNTMwOlssOV0sMzU0NTpbLCx7MzUzMDozNTQ2LDM1MzU6MzU0OCwzNTUxOjM1NTB9XSwzNTQ2OltbMzU0NSwzNTMwXV0sMzU0ODpbWzM1NDUsMzUzNV0sLHszNTMwOjM1NDl9XSwzNTQ5OltbMzU0OCwzNTMwXV0sMzU1MDpbWzM1NDUsMzU1MV1dfSwKMzU4NDp7MzYzNTpbWzM2NjEsMzYzNF0sMjU2XSwzNjQwOlssMTAzXSwzNjQxOlssMTAzXSwzNjQyOlssOV0sMzY1NjpbLDEwN10sMzY1NzpbLDEwN10sMzY1ODpbLDEwN10sMzY1OTpbLDEwN10sMzc2MzpbWzM3ODksMzc2Ml0sMjU2XSwzNzY4OlssMTE4XSwzNzY5OlssMTE4XSwzNzg0OlssMTIyXSwzNzg1OlssMTIyXSwzNzg2OlssMTIyXSwzNzg3OlssMTIyXSwzODA0OltbMzc1NSwzNzM3XSwyNTZdLDM4MDU6W1szNzU1LDM3NDVdLDI1Nl19LAozODQwOnszODUyOltbMzg1MV0sMjU2XSwzODY0OlssMjIwXSwzODY1OlssMjIwXSwzODkzOlssMjIwXSwzODk1OlssMjIwXSwzODk3OlssMjE2XSwzOTA3OltbMzkwNiw0MDIzXSw1MTJdLDM5MTc6W1szOTE2LDQwMjNdLDUxMl0sMzkyMjpbWzM5MjEsNDAyM10sNTEyXSwzOTI3OltbMzkyNiw0MDIzXSw1MTJdLDM5MzI6W1szOTMxLDQwMjNdLDUxMl0sMzk0NTpbWzM5MDQsNDAyMV0sNTEyXSwzOTUzOlssMTI5XSwzOTU0OlssMTMwXSwzOTU1OltbMzk1MywzOTU0XSw1MTJdLDM5NTY6WywxMzJdLDM5NTc6W1szOTUzLDM5NTZdLDUxMl0sMzk1ODpbWzQwMTgsMzk2OF0sNTEyXSwzOTU5OltbNDAxOCwzOTY5XSwyNTZdLDM5NjA6W1s0MDE5LDM5NjhdLDUxMl0sMzk2MTpbWzQwMTksMzk2OV0sMjU2XSwzOTYyOlssMTMwXSwzOTYzOlssMTMwXSwzOTY0OlssMTMwXSwzOTY1OlssMTMwXSwzOTY4OlssMTMwXSwzOTY5OltbMzk1MywzOTY4XSw1MTJdLDM5NzA6WywyMzBdLDM5NzE6WywyMzBdLDM5NzI6Wyw5XSwzOTc0OlssMjMwXSwzOTc1OlssMjMwXSwzOTg3OltbMzk4Niw0MDIzXSw1MTJdLDM5OTc6W1szOTk2LDQwMjNdLDUxMl0sNDAwMjpbWzQwMDEsNDAyM10sNTEyXSw0MDA3OltbNDAwNiw0MDIzXSw1MTJdLDQwMTI6W1s0MDExLDQwMjNdLDUxMl0sNDAyNTpbWzM5ODQsNDAyMV0sNTEyXSw0MDM4OlssMjIwXX0sCjQwOTY6ezQxMzM6WywsezQxNDI6NDEzNH1dLDQxMzQ6W1s0MTMzLDQxNDJdXSw0MTUxOlssN10sNDE1MzpbLDldLDQxNTQ6Wyw5XSw0MjM3OlssMjIwXSw0MzQ4OltbNDMxNl0sMjU2XSw2OTcwMjpbLDldLDY5NzU5OlssOV0sNjk3ODU6WywsezY5ODE4OjY5Nzg2fV0sNjk3ODY6W1s2OTc4NSw2OTgxOF1dLDY5Nzg3OlssLHs2OTgxODo2OTc4OH1dLDY5Nzg4OltbNjk3ODcsNjk4MThdXSw2OTc5NzpbLCx7Njk4MTg6Njk4MDN9XSw2OTgwMzpbWzY5Nzk3LDY5ODE4XV0sNjk4MTc6Wyw5XSw2OTgxODpbLDddfSwKNDM1Mjp7Njk4ODg6WywyMzBdLDY5ODg5OlssMjMwXSw2OTg5MDpbLDIzMF0sNjk5MzQ6W1s2OTkzNyw2OTkyN11dLDY5OTM1OltbNjk5MzgsNjk5MjddXSw2OTkzNzpbLCx7Njk5Mjc6Njk5MzR9XSw2OTkzODpbLCx7Njk5Mjc6Njk5MzV9XSw2OTkzOTpbLDldLDY5OTQwOlssOV0sNzAwMDM6Wyw3XSw3MDA4MDpbLDldfSwKNDYwODp7NzAxOTc6Wyw5XSw3MDE5ODpbLDddLDcwMzc3OlssN10sNzAzNzg6Wyw5XX0sCjQ4NjQ6ezQ5NTc6WywyMzBdLDQ5NTg6WywyMzBdLDQ5NTk6WywyMzBdLDcwNDYwOlssN10sNzA0NzE6WywsezcwNDYyOjcwNDc1LDcwNDg3OjcwNDc2fV0sNzA0NzU6W1s3MDQ3MSw3MDQ2Ml1dLDcwNDc2OltbNzA0NzEsNzA0ODddXSw3MDQ3NzpbLDldLDcwNTAyOlssMjMwXSw3MDUwMzpbLDIzMF0sNzA1MDQ6WywyMzBdLDcwNTA1OlssMjMwXSw3MDUwNjpbLDIzMF0sNzA1MDc6WywyMzBdLDcwNTA4OlssMjMwXSw3MDUxMjpbLDIzMF0sNzA1MTM6WywyMzBdLDcwNTE0OlssMjMwXSw3MDUxNTpbLDIzMF0sNzA1MTY6WywyMzBdfSwKNTEyMDp7NzA4NDE6WywsezcwODMyOjcwODQ0LDcwODQyOjcwODQzLDcwODQ1OjcwODQ2fV0sNzA4NDM6W1s3MDg0MSw3MDg0Ml1dLDcwODQ0OltbNzA4NDEsNzA4MzJdXSw3MDg0NjpbWzcwODQxLDcwODQ1XV0sNzA4NTA6Wyw5XSw3MDg1MTpbLDddfSwKNTM3Njp7NzEwOTY6WywsezcxMDg3OjcxMDk4fV0sNzEwOTc6WywsezcxMDg3OjcxMDk5fV0sNzEwOTg6W1s3MTA5Niw3MTA4N11dLDcxMDk5OltbNzEwOTcsNzEwODddXSw3MTEwMzpbLDldLDcxMTA0OlssN119LAo1NjMyOns3MTIzMTpbLDldLDcxMzUwOlssOV0sNzEzNTE6Wyw3XX0sCjU4ODg6ezU5MDg6Wyw5XSw1OTQwOlssOV0sNjA5ODpbLDldLDYxMDk6WywyMzBdfSwKNjE0NDp7NjMxMzpbLDIyOF19LAo2NDAwOns2NDU3OlssMjIyXSw2NDU4OlssMjMwXSw2NDU5OlssMjIwXX0sCjY2NTY6ezY2Nzk6WywyMzBdLDY2ODA6WywyMjBdLDY3NTI6Wyw5XSw2NzczOlssMjMwXSw2Nzc0OlssMjMwXSw2Nzc1OlssMjMwXSw2Nzc2OlssMjMwXSw2Nzc3OlssMjMwXSw2Nzc4OlssMjMwXSw2Nzc5OlssMjMwXSw2NzgwOlssMjMwXSw2NzgzOlssMjIwXSw2ODMyOlssMjMwXSw2ODMzOlssMjMwXSw2ODM0OlssMjMwXSw2ODM1OlssMjMwXSw2ODM2OlssMjMwXSw2ODM3OlssMjIwXSw2ODM4OlssMjIwXSw2ODM5OlssMjIwXSw2ODQwOlssMjIwXSw2ODQxOlssMjIwXSw2ODQyOlssMjIwXSw2ODQzOlssMjMwXSw2ODQ0OlssMjMwXSw2ODQ1OlssMjIwXX0sCjY5MTI6ezY5MTc6WywsezY5NjU6NjkxOH1dLDY5MTg6W1s2OTE3LDY5NjVdXSw2OTE5OlssLHs2OTY1OjY5MjB9XSw2OTIwOltbNjkxOSw2OTY1XV0sNjkyMTpbLCx7Njk2NTo2OTIyfV0sNjkyMjpbWzY5MjEsNjk2NV1dLDY5MjM6WywsezY5NjU6NjkyNH1dLDY5MjQ6W1s2OTIzLDY5NjVdXSw2OTI1OlssLHs2OTY1OjY5MjZ9XSw2OTI2OltbNjkyNSw2OTY1XV0sNjkyOTpbLCx7Njk2NTo2OTMwfV0sNjkzMDpbWzY5MjksNjk2NV1dLDY5NjQ6Wyw3XSw2OTcwOlssLHs2OTY1OjY5NzF9XSw2OTcxOltbNjk3MCw2OTY1XV0sNjk3MjpbLCx7Njk2NTo2OTczfV0sNjk3MzpbWzY5NzIsNjk2NV1dLDY5NzQ6WywsezY5NjU6Njk3Nn1dLDY5NzU6WywsezY5NjU6Njk3N31dLDY5NzY6W1s2OTc0LDY5NjVdXSw2OTc3OltbNjk3NSw2OTY1XV0sNjk3ODpbLCx7Njk2NTo2OTc5fV0sNjk3OTpbWzY5NzgsNjk2NV1dLDY5ODA6Wyw5XSw3MDE5OlssMjMwXSw3MDIwOlssMjIwXSw3MDIxOlssMjMwXSw3MDIyOlssMjMwXSw3MDIzOlssMjMwXSw3MDI0OlssMjMwXSw3MDI1OlssMjMwXSw3MDI2OlssMjMwXSw3MDI3OlssMjMwXSw3MDgyOlssOV0sNzA4MzpbLDldLDcxNDI6Wyw3XSw3MTU0OlssOV0sNzE1NTpbLDldfSwKNzE2ODp7NzIyMzpbLDddLDczNzY6WywyMzBdLDczNzc6WywyMzBdLDczNzg6WywyMzBdLDczODA6WywxXSw3MzgxOlssMjIwXSw3MzgyOlssMjIwXSw3MzgzOlssMjIwXSw3Mzg0OlssMjIwXSw3Mzg1OlssMjIwXSw3Mzg2OlssMjMwXSw3Mzg3OlssMjMwXSw3Mzg4OlssMjIwXSw3Mzg5OlssMjIwXSw3MzkwOlssMjIwXSw3MzkxOlssMjIwXSw3MzkyOlssMjMwXSw3Mzk0OlssMV0sNzM5NTpbLDFdLDczOTY6WywxXSw3Mzk3OlssMV0sNzM5ODpbLDFdLDczOTk6WywxXSw3NDAwOlssMV0sNzQwNTpbLDIyMF0sNzQxMjpbLDIzMF0sNzQxNjpbLDIzMF0sNzQxNzpbLDIzMF19LAo3NDI0Ons3NDY4OltbNjVdLDI1Nl0sNzQ2OTpbWzE5OF0sMjU2XSw3NDcwOltbNjZdLDI1Nl0sNzQ3MjpbWzY4XSwyNTZdLDc0NzM6W1s2OV0sMjU2XSw3NDc0OltbMzk4XSwyNTZdLDc0NzU6W1s3MV0sMjU2XSw3NDc2OltbNzJdLDI1Nl0sNzQ3NzpbWzczXSwyNTZdLDc0Nzg6W1s3NF0sMjU2XSw3NDc5OltbNzVdLDI1Nl0sNzQ4MDpbWzc2XSwyNTZdLDc0ODE6W1s3N10sMjU2XSw3NDgyOltbNzhdLDI1Nl0sNzQ4NDpbWzc5XSwyNTZdLDc0ODU6W1s1NDZdLDI1Nl0sNzQ4NjpbWzgwXSwyNTZdLDc0ODc6W1s4Ml0sMjU2XSw3NDg4OltbODRdLDI1Nl0sNzQ4OTpbWzg1XSwyNTZdLDc0OTA6W1s4N10sMjU2XSw3NDkxOltbOTddLDI1Nl0sNzQ5MjpbWzU5Ml0sMjU2XSw3NDkzOltbNTkzXSwyNTZdLDc0OTQ6W1s3NDI2XSwyNTZdLDc0OTU6W1s5OF0sMjU2XSw3NDk2OltbMTAwXSwyNTZdLDc0OTc6W1sxMDFdLDI1Nl0sNzQ5ODpbWzYwMV0sMjU2XSw3NDk5OltbNjAzXSwyNTZdLDc1MDA6W1s2MDRdLDI1Nl0sNzUwMTpbWzEwM10sMjU2XSw3NTAzOltbMTA3XSwyNTZdLDc1MDQ6W1sxMDldLDI1Nl0sNzUwNTpbWzMzMV0sMjU2XSw3NTA2OltbMTExXSwyNTZdLDc1MDc6W1s1OTZdLDI1Nl0sNzUwODpbWzc0NDZdLDI1Nl0sNzUwOTpbWzc0NDddLDI1Nl0sNzUxMDpbWzExMl0sMjU2XSw3NTExOltbMTE2XSwyNTZdLDc1MTI6W1sxMTddLDI1Nl0sNzUxMzpbWzc0NTNdLDI1Nl0sNzUxNDpbWzYyM10sMjU2XSw3NTE1OltbMTE4XSwyNTZdLDc1MTY6W1s3NDYxXSwyNTZdLDc1MTc6W1s5NDZdLDI1Nl0sNzUxODpbWzk0N10sMjU2XSw3NTE5OltbOTQ4XSwyNTZdLDc1MjA6W1s5NjZdLDI1Nl0sNzUyMTpbWzk2N10sMjU2XSw3NTIyOltbMTA1XSwyNTZdLDc1MjM6W1sxMTRdLDI1Nl0sNzUyNDpbWzExN10sMjU2XSw3NTI1OltbMTE4XSwyNTZdLDc1MjY6W1s5NDZdLDI1Nl0sNzUyNzpbWzk0N10sMjU2XSw3NTI4OltbOTYxXSwyNTZdLDc1Mjk6W1s5NjZdLDI1Nl0sNzUzMDpbWzk2N10sMjU2XSw3NTQ0OltbMTA4NV0sMjU2XSw3NTc5OltbNTk0XSwyNTZdLDc1ODA6W1s5OV0sMjU2XSw3NTgxOltbNTk3XSwyNTZdLDc1ODI6W1syNDBdLDI1Nl0sNzU4MzpbWzYwNF0sMjU2XSw3NTg0OltbMTAyXSwyNTZdLDc1ODU6W1s2MDddLDI1Nl0sNzU4NjpbWzYwOV0sMjU2XSw3NTg3OltbNjEzXSwyNTZdLDc1ODg6W1s2MTZdLDI1Nl0sNzU4OTpbWzYxN10sMjU2XSw3NTkwOltbNjE4XSwyNTZdLDc1OTE6W1s3NTQ3XSwyNTZdLDc1OTI6W1s2NjldLDI1Nl0sNzU5MzpbWzYyMV0sMjU2XSw3NTk0OltbNzU1N10sMjU2XSw3NTk1OltbNjcxXSwyNTZdLDc1OTY6W1s2MjVdLDI1Nl0sNzU5NzpbWzYyNF0sMjU2XSw3NTk4OltbNjI2XSwyNTZdLDc1OTk6W1s2MjddLDI1Nl0sNzYwMDpbWzYyOF0sMjU2XSw3NjAxOltbNjI5XSwyNTZdLDc2MDI6W1s2MzJdLDI1Nl0sNzYwMzpbWzY0Ml0sMjU2XSw3NjA0OltbNjQzXSwyNTZdLDc2MDU6W1s0MjddLDI1Nl0sNzYwNjpbWzY0OV0sMjU2XSw3NjA3OltbNjUwXSwyNTZdLDc2MDg6W1s3NDUyXSwyNTZdLDc2MDk6W1s2NTFdLDI1Nl0sNzYxMDpbWzY1Ml0sMjU2XSw3NjExOltbMTIyXSwyNTZdLDc2MTI6W1s2NTZdLDI1Nl0sNzYxMzpbWzY1N10sMjU2XSw3NjE0OltbNjU4XSwyNTZdLDc2MTU6W1s5NTJdLDI1Nl0sNzYxNjpbLDIzMF0sNzYxNzpbLDIzMF0sNzYxODpbLDIyMF0sNzYxOTpbLDIzMF0sNzYyMDpbLDIzMF0sNzYyMTpbLDIzMF0sNzYyMjpbLDIzMF0sNzYyMzpbLDIzMF0sNzYyNDpbLDIzMF0sNzYyNTpbLDIzMF0sNzYyNjpbLDIyMF0sNzYyNzpbLDIzMF0sNzYyODpbLDIzMF0sNzYyOTpbLDIzNF0sNzYzMDpbLDIxNF0sNzYzMTpbLDIyMF0sNzYzMjpbLDIwMl0sNzYzMzpbLDIzMF0sNzYzNDpbLDIzMF0sNzYzNTpbLDIzMF0sNzYzNjpbLDIzMF0sNzYzNzpbLDIzMF0sNzYzODpbLDIzMF0sNzYzOTpbLDIzMF0sNzY0MDpbLDIzMF0sNzY0MTpbLDIzMF0sNzY0MjpbLDIzMF0sNzY0MzpbLDIzMF0sNzY0NDpbLDIzMF0sNzY0NTpbLDIzMF0sNzY0NjpbLDIzMF0sNzY0NzpbLDIzMF0sNzY0ODpbLDIzMF0sNzY0OTpbLDIzMF0sNzY1MDpbLDIzMF0sNzY1MTpbLDIzMF0sNzY1MjpbLDIzMF0sNzY1MzpbLDIzMF0sNzY1NDpbLDIzMF0sNzY1NTpbLDIzMF0sNzY1NjpbLDIzMF0sNzY1NzpbLDIzMF0sNzY1ODpbLDIzMF0sNzY1OTpbLDIzMF0sNzY2MDpbLDIzMF0sNzY2MTpbLDIzMF0sNzY2MjpbLDIzMF0sNzY2MzpbLDIzMF0sNzY2NDpbLDIzMF0sNzY2NTpbLDIzMF0sNzY2NjpbLDIzMF0sNzY2NzpbLDIzMF0sNzY2ODpbLDIzMF0sNzY2OTpbLDIzMF0sNzY3NjpbLDIzM10sNzY3NzpbLDIyMF0sNzY3ODpbLDIzMF0sNzY3OTpbLDIyMF19LAo3NjgwOns3NjgwOltbNjUsODA1XV0sNzY4MTpbWzk3LDgwNV1dLDc2ODI6W1s2Niw3NzVdXSw3NjgzOltbOTgsNzc1XV0sNzY4NDpbWzY2LDgwM11dLDc2ODU6W1s5OCw4MDNdXSw3Njg2OltbNjYsODE3XV0sNzY4NzpbWzk4LDgxN11dLDc2ODg6W1sxOTksNzY5XV0sNzY4OTpbWzIzMSw3NjldXSw3NjkwOltbNjgsNzc1XV0sNzY5MTpbWzEwMCw3NzVdXSw3NjkyOltbNjgsODAzXV0sNzY5MzpbWzEwMCw4MDNdXSw3Njk0OltbNjgsODE3XV0sNzY5NTpbWzEwMCw4MTddXSw3Njk2OltbNjgsODA3XV0sNzY5NzpbWzEwMCw4MDddXSw3Njk4OltbNjgsODEzXV0sNzY5OTpbWzEwMCw4MTNdXSw3NzAwOltbMjc0LDc2OF1dLDc3MDE6W1syNzUsNzY4XV0sNzcwMjpbWzI3NCw3NjldXSw3NzAzOltbMjc1LDc2OV1dLDc3MDQ6W1s2OSw4MTNdXSw3NzA1OltbMTAxLDgxM11dLDc3MDY6W1s2OSw4MTZdXSw3NzA3OltbMTAxLDgxNl1dLDc3MDg6W1s1NTIsNzc0XV0sNzcwOTpbWzU1Myw3NzRdXSw3NzEwOltbNzAsNzc1XV0sNzcxMTpbWzEwMiw3NzVdXSw3NzEyOltbNzEsNzcyXV0sNzcxMzpbWzEwMyw3NzJdXSw3NzE0OltbNzIsNzc1XV0sNzcxNTpbWzEwNCw3NzVdXSw3NzE2OltbNzIsODAzXV0sNzcxNzpbWzEwNCw4MDNdXSw3NzE4OltbNzIsNzc2XV0sNzcxOTpbWzEwNCw3NzZdXSw3NzIwOltbNzIsODA3XV0sNzcyMTpbWzEwNCw4MDddXSw3NzIyOltbNzIsODE0XV0sNzcyMzpbWzEwNCw4MTRdXSw3NzI0OltbNzMsODE2XV0sNzcyNTpbWzEwNSw4MTZdXSw3NzI2OltbMjA3LDc2OV1dLDc3Mjc6W1syMzksNzY5XV0sNzcyODpbWzc1LDc2OV1dLDc3Mjk6W1sxMDcsNzY5XV0sNzczMDpbWzc1LDgwM11dLDc3MzE6W1sxMDcsODAzXV0sNzczMjpbWzc1LDgxN11dLDc3MzM6W1sxMDcsODE3XV0sNzczNDpbWzc2LDgwM10sLHs3NzI6NzczNn1dLDc3MzU6W1sxMDgsODAzXSwsezc3Mjo3NzM3fV0sNzczNjpbWzc3MzQsNzcyXV0sNzczNzpbWzc3MzUsNzcyXV0sNzczODpbWzc2LDgxN11dLDc3Mzk6W1sxMDgsODE3XV0sNzc0MDpbWzc2LDgxM11dLDc3NDE6W1sxMDgsODEzXV0sNzc0MjpbWzc3LDc2OV1dLDc3NDM6W1sxMDksNzY5XV0sNzc0NDpbWzc3LDc3NV1dLDc3NDU6W1sxMDksNzc1XV0sNzc0NjpbWzc3LDgwM11dLDc3NDc6W1sxMDksODAzXV0sNzc0ODpbWzc4LDc3NV1dLDc3NDk6W1sxMTAsNzc1XV0sNzc1MDpbWzc4LDgwM11dLDc3NTE6W1sxMTAsODAzXV0sNzc1MjpbWzc4LDgxN11dLDc3NTM6W1sxMTAsODE3XV0sNzc1NDpbWzc4LDgxM11dLDc3NTU6W1sxMTAsODEzXV0sNzc1NjpbWzIxMyw3NjldXSw3NzU3OltbMjQ1LDc2OV1dLDc3NTg6W1syMTMsNzc2XV0sNzc1OTpbWzI0NSw3NzZdXSw3NzYwOltbMzMyLDc2OF1dLDc3NjE6W1szMzMsNzY4XV0sNzc2MjpbWzMzMiw3NjldXSw3NzYzOltbMzMzLDc2OV1dLDc3NjQ6W1s4MCw3NjldXSw3NzY1OltbMTEyLDc2OV1dLDc3NjY6W1s4MCw3NzVdXSw3NzY3OltbMTEyLDc3NV1dLDc3Njg6W1s4Miw3NzVdXSw3NzY5OltbMTE0LDc3NV1dLDc3NzA6W1s4Miw4MDNdLCx7NzcyOjc3NzJ9XSw3NzcxOltbMTE0LDgwM10sLHs3NzI6Nzc3M31dLDc3NzI6W1s3NzcwLDc3Ml1dLDc3NzM6W1s3NzcxLDc3Ml1dLDc3NzQ6W1s4Miw4MTddXSw3Nzc1OltbMTE0LDgxN11dLDc3NzY6W1s4Myw3NzVdXSw3Nzc3OltbMTE1LDc3NV1dLDc3Nzg6W1s4Myw4MDNdLCx7Nzc1Ojc3ODR9XSw3Nzc5OltbMTE1LDgwM10sLHs3NzU6Nzc4NX1dLDc3ODA6W1szNDYsNzc1XV0sNzc4MTpbWzM0Nyw3NzVdXSw3NzgyOltbMzUyLDc3NV1dLDc3ODM6W1szNTMsNzc1XV0sNzc4NDpbWzc3NzgsNzc1XV0sNzc4NTpbWzc3NzksNzc1XV0sNzc4NjpbWzg0LDc3NV1dLDc3ODc6W1sxMTYsNzc1XV0sNzc4ODpbWzg0LDgwM11dLDc3ODk6W1sxMTYsODAzXV0sNzc5MDpbWzg0LDgxN11dLDc3OTE6W1sxMTYsODE3XV0sNzc5MjpbWzg0LDgxM11dLDc3OTM6W1sxMTYsODEzXV0sNzc5NDpbWzg1LDgwNF1dLDc3OTU6W1sxMTcsODA0XV0sNzc5NjpbWzg1LDgxNl1dLDc3OTc6W1sxMTcsODE2XV0sNzc5ODpbWzg1LDgxM11dLDc3OTk6W1sxMTcsODEzXV0sNzgwMDpbWzM2MCw3NjldXSw3ODAxOltbMzYxLDc2OV1dLDc4MDI6W1szNjIsNzc2XV0sNzgwMzpbWzM2Myw3NzZdXSw3ODA0OltbODYsNzcxXV0sNzgwNTpbWzExOCw3NzFdXSw3ODA2OltbODYsODAzXV0sNzgwNzpbWzExOCw4MDNdXSw3ODA4OltbODcsNzY4XV0sNzgwOTpbWzExOSw3NjhdXSw3ODEwOltbODcsNzY5XV0sNzgxMTpbWzExOSw3NjldXSw3ODEyOltbODcsNzc2XV0sNzgxMzpbWzExOSw3NzZdXSw3ODE0OltbODcsNzc1XV0sNzgxNTpbWzExOSw3NzVdXSw3ODE2OltbODcsODAzXV0sNzgxNzpbWzExOSw4MDNdXSw3ODE4OltbODgsNzc1XV0sNzgxOTpbWzEyMCw3NzVdXSw3ODIwOltbODgsNzc2XV0sNzgyMTpbWzEyMCw3NzZdXSw3ODIyOltbODksNzc1XV0sNzgyMzpbWzEyMSw3NzVdXSw3ODI0OltbOTAsNzcwXV0sNzgyNTpbWzEyMiw3NzBdXSw3ODI2OltbOTAsODAzXV0sNzgyNzpbWzEyMiw4MDNdXSw3ODI4OltbOTAsODE3XV0sNzgyOTpbWzEyMiw4MTddXSw3ODMwOltbMTA0LDgxN11dLDc4MzE6W1sxMTYsNzc2XV0sNzgzMjpbWzExOSw3NzhdXSw3ODMzOltbMTIxLDc3OF1dLDc4MzQ6W1s5Nyw3MDJdLDI1Nl0sNzgzNTpbWzM4Myw3NzVdXSw3ODQwOltbNjUsODAzXSwsezc3MDo3ODUyLDc3NDo3ODYyfV0sNzg0MTpbWzk3LDgwM10sLHs3NzA6Nzg1Myw3NzQ6Nzg2M31dLDc4NDI6W1s2NSw3NzddXSw3ODQzOltbOTcsNzc3XV0sNzg0NDpbWzE5NCw3NjldXSw3ODQ1OltbMjI2LDc2OV1dLDc4NDY6W1sxOTQsNzY4XV0sNzg0NzpbWzIyNiw3NjhdXSw3ODQ4OltbMTk0LDc3N11dLDc4NDk6W1syMjYsNzc3XV0sNzg1MDpbWzE5NCw3NzFdXSw3ODUxOltbMjI2LDc3MV1dLDc4NTI6W1s3ODQwLDc3MF1dLDc4NTM6W1s3ODQxLDc3MF1dLDc4NTQ6W1syNTgsNzY5XV0sNzg1NTpbWzI1OSw3NjldXSw3ODU2OltbMjU4LDc2OF1dLDc4NTc6W1syNTksNzY4XV0sNzg1ODpbWzI1OCw3NzddXSw3ODU5OltbMjU5LDc3N11dLDc4NjA6W1syNTgsNzcxXV0sNzg2MTpbWzI1OSw3NzFdXSw3ODYyOltbNzg0MCw3NzRdXSw3ODYzOltbNzg0MSw3NzRdXSw3ODY0OltbNjksODAzXSwsezc3MDo3ODc4fV0sNzg2NTpbWzEwMSw4MDNdLCx7NzcwOjc4Nzl9XSw3ODY2OltbNjksNzc3XV0sNzg2NzpbWzEwMSw3NzddXSw3ODY4OltbNjksNzcxXV0sNzg2OTpbWzEwMSw3NzFdXSw3ODcwOltbMjAyLDc2OV1dLDc4NzE6W1syMzQsNzY5XV0sNzg3MjpbWzIwMiw3NjhdXSw3ODczOltbMjM0LDc2OF1dLDc4NzQ6W1syMDIsNzc3XV0sNzg3NTpbWzIzNCw3NzddXSw3ODc2OltbMjAyLDc3MV1dLDc4Nzc6W1syMzQsNzcxXV0sNzg3ODpbWzc4NjQsNzcwXV0sNzg3OTpbWzc4NjUsNzcwXV0sNzg4MDpbWzczLDc3N11dLDc4ODE6W1sxMDUsNzc3XV0sNzg4MjpbWzczLDgwM11dLDc4ODM6W1sxMDUsODAzXV0sNzg4NDpbWzc5LDgwM10sLHs3NzA6Nzg5Nn1dLDc4ODU6W1sxMTEsODAzXSwsezc3MDo3ODk3fV0sNzg4NjpbWzc5LDc3N11dLDc4ODc6W1sxMTEsNzc3XV0sNzg4ODpbWzIxMiw3NjldXSw3ODg5OltbMjQ0LDc2OV1dLDc4OTA6W1syMTIsNzY4XV0sNzg5MTpbWzI0NCw3NjhdXSw3ODkyOltbMjEyLDc3N11dLDc4OTM6W1syNDQsNzc3XV0sNzg5NDpbWzIxMiw3NzFdXSw3ODk1OltbMjQ0LDc3MV1dLDc4OTY6W1s3ODg0LDc3MF1dLDc4OTc6W1s3ODg1LDc3MF1dLDc4OTg6W1s0MTYsNzY5XV0sNzg5OTpbWzQxNyw3NjldXSw3OTAwOltbNDE2LDc2OF1dLDc5MDE6W1s0MTcsNzY4XV0sNzkwMjpbWzQxNiw3NzddXSw3OTAzOltbNDE3LDc3N11dLDc5MDQ6W1s0MTYsNzcxXV0sNzkwNTpbWzQxNyw3NzFdXSw3OTA2OltbNDE2LDgwM11dLDc5MDc6W1s0MTcsODAzXV0sNzkwODpbWzg1LDgwM11dLDc5MDk6W1sxMTcsODAzXV0sNzkxMDpbWzg1LDc3N11dLDc5MTE6W1sxMTcsNzc3XV0sNzkxMjpbWzQzMSw3NjldXSw3OTEzOltbNDMyLDc2OV1dLDc5MTQ6W1s0MzEsNzY4XV0sNzkxNTpbWzQzMiw3NjhdXSw3OTE2OltbNDMxLDc3N11dLDc5MTc6W1s0MzIsNzc3XV0sNzkxODpbWzQzMSw3NzFdXSw3OTE5OltbNDMyLDc3MV1dLDc5MjA6W1s0MzEsODAzXV0sNzkyMTpbWzQzMiw4MDNdXSw3OTIyOltbODksNzY4XV0sNzkyMzpbWzEyMSw3NjhdXSw3OTI0OltbODksODAzXV0sNzkyNTpbWzEyMSw4MDNdXSw3OTI2OltbODksNzc3XV0sNzkyNzpbWzEyMSw3NzddXSw3OTI4OltbODksNzcxXV0sNzkyOTpbWzEyMSw3NzFdXX0sCjc5MzY6ezc5MzY6W1s5NDUsNzg3XSwsezc2ODo3OTM4LDc2OTo3OTQwLDgzNDo3OTQyLDgzNzo4MDY0fV0sNzkzNzpbWzk0NSw3ODhdLCx7NzY4Ojc5MzksNzY5Ojc5NDEsODM0Ojc5NDMsODM3OjgwNjV9XSw3OTM4OltbNzkzNiw3NjhdLCx7ODM3OjgwNjZ9XSw3OTM5OltbNzkzNyw3NjhdLCx7ODM3OjgwNjd9XSw3OTQwOltbNzkzNiw3NjldLCx7ODM3OjgwNjh9XSw3OTQxOltbNzkzNyw3NjldLCx7ODM3OjgwNjl9XSw3OTQyOltbNzkzNiw4MzRdLCx7ODM3OjgwNzB9XSw3OTQzOltbNzkzNyw4MzRdLCx7ODM3OjgwNzF9XSw3OTQ0OltbOTEzLDc4N10sLHs3Njg6Nzk0Niw3Njk6Nzk0OCw4MzQ6Nzk1MCw4Mzc6ODA3Mn1dLDc5NDU6W1s5MTMsNzg4XSwsezc2ODo3OTQ3LDc2OTo3OTQ5LDgzNDo3OTUxLDgzNzo4MDczfV0sNzk0NjpbWzc5NDQsNzY4XSwsezgzNzo4MDc0fV0sNzk0NzpbWzc5NDUsNzY4XSwsezgzNzo4MDc1fV0sNzk0ODpbWzc5NDQsNzY5XSwsezgzNzo4MDc2fV0sNzk0OTpbWzc5NDUsNzY5XSwsezgzNzo4MDc3fV0sNzk1MDpbWzc5NDQsODM0XSwsezgzNzo4MDc4fV0sNzk1MTpbWzc5NDUsODM0XSwsezgzNzo4MDc5fV0sNzk1MjpbWzk0OSw3ODddLCx7NzY4Ojc5NTQsNzY5Ojc5NTZ9XSw3OTUzOltbOTQ5LDc4OF0sLHs3Njg6Nzk1NSw3Njk6Nzk1N31dLDc5NTQ6W1s3OTUyLDc2OF1dLDc5NTU6W1s3OTUzLDc2OF1dLDc5NTY6W1s3OTUyLDc2OV1dLDc5NTc6W1s3OTUzLDc2OV1dLDc5NjA6W1s5MTcsNzg3XSwsezc2ODo3OTYyLDc2OTo3OTY0fV0sNzk2MTpbWzkxNyw3ODhdLCx7NzY4Ojc5NjMsNzY5Ojc5NjV9XSw3OTYyOltbNzk2MCw3NjhdXSw3OTYzOltbNzk2MSw3NjhdXSw3OTY0OltbNzk2MCw3NjldXSw3OTY1OltbNzk2MSw3NjldXSw3OTY4OltbOTUxLDc4N10sLHs3Njg6Nzk3MCw3Njk6Nzk3Miw4MzQ6Nzk3NCw4Mzc6ODA4MH1dLDc5Njk6W1s5NTEsNzg4XSwsezc2ODo3OTcxLDc2OTo3OTczLDgzNDo3OTc1LDgzNzo4MDgxfV0sNzk3MDpbWzc5NjgsNzY4XSwsezgzNzo4MDgyfV0sNzk3MTpbWzc5NjksNzY4XSwsezgzNzo4MDgzfV0sNzk3MjpbWzc5NjgsNzY5XSwsezgzNzo4MDg0fV0sNzk3MzpbWzc5NjksNzY5XSwsezgzNzo4MDg1fV0sNzk3NDpbWzc5NjgsODM0XSwsezgzNzo4MDg2fV0sNzk3NTpbWzc5NjksODM0XSwsezgzNzo4MDg3fV0sNzk3NjpbWzkxOSw3ODddLCx7NzY4Ojc5NzgsNzY5Ojc5ODAsODM0Ojc5ODIsODM3OjgwODh9XSw3OTc3OltbOTE5LDc4OF0sLHs3Njg6Nzk3OSw3Njk6Nzk4MSw4MzQ6Nzk4Myw4Mzc6ODA4OX1dLDc5Nzg6W1s3OTc2LDc2OF0sLHs4Mzc6ODA5MH1dLDc5Nzk6W1s3OTc3LDc2OF0sLHs4Mzc6ODA5MX1dLDc5ODA6W1s3OTc2LDc2OV0sLHs4Mzc6ODA5Mn1dLDc5ODE6W1s3OTc3LDc2OV0sLHs4Mzc6ODA5M31dLDc5ODI6W1s3OTc2LDgzNF0sLHs4Mzc6ODA5NH1dLDc5ODM6W1s3OTc3LDgzNF0sLHs4Mzc6ODA5NX1dLDc5ODQ6W1s5NTMsNzg3XSwsezc2ODo3OTg2LDc2OTo3OTg4LDgzNDo3OTkwfV0sNzk4NTpbWzk1Myw3ODhdLCx7NzY4Ojc5ODcsNzY5Ojc5ODksODM0Ojc5OTF9XSw3OTg2OltbNzk4NCw3NjhdXSw3OTg3OltbNzk4NSw3NjhdXSw3OTg4OltbNzk4NCw3NjldXSw3OTg5OltbNzk4NSw3NjldXSw3OTkwOltbNzk4NCw4MzRdXSw3OTkxOltbNzk4NSw4MzRdXSw3OTkyOltbOTIxLDc4N10sLHs3Njg6Nzk5NCw3Njk6Nzk5Niw4MzQ6Nzk5OH1dLDc5OTM6W1s5MjEsNzg4XSwsezc2ODo3OTk1LDc2OTo3OTk3LDgzNDo3OTk5fV0sNzk5NDpbWzc5OTIsNzY4XV0sNzk5NTpbWzc5OTMsNzY4XV0sNzk5NjpbWzc5OTIsNzY5XV0sNzk5NzpbWzc5OTMsNzY5XV0sNzk5ODpbWzc5OTIsODM0XV0sNzk5OTpbWzc5OTMsODM0XV0sODAwMDpbWzk1OSw3ODddLCx7NzY4OjgwMDIsNzY5OjgwMDR9XSw4MDAxOltbOTU5LDc4OF0sLHs3Njg6ODAwMyw3Njk6ODAwNX1dLDgwMDI6W1s4MDAwLDc2OF1dLDgwMDM6W1s4MDAxLDc2OF1dLDgwMDQ6W1s4MDAwLDc2OV1dLDgwMDU6W1s4MDAxLDc2OV1dLDgwMDg6W1s5MjcsNzg3XSwsezc2ODo4MDEwLDc2OTo4MDEyfV0sODAwOTpbWzkyNyw3ODhdLCx7NzY4OjgwMTEsNzY5OjgwMTN9XSw4MDEwOltbODAwOCw3NjhdXSw4MDExOltbODAwOSw3NjhdXSw4MDEyOltbODAwOCw3NjldXSw4MDEzOltbODAwOSw3NjldXSw4MDE2OltbOTY1LDc4N10sLHs3Njg6ODAxOCw3Njk6ODAyMCw4MzQ6ODAyMn1dLDgwMTc6W1s5NjUsNzg4XSwsezc2ODo4MDE5LDc2OTo4MDIxLDgzNDo4MDIzfV0sODAxODpbWzgwMTYsNzY4XV0sODAxOTpbWzgwMTcsNzY4XV0sODAyMDpbWzgwMTYsNzY5XV0sODAyMTpbWzgwMTcsNzY5XV0sODAyMjpbWzgwMTYsODM0XV0sODAyMzpbWzgwMTcsODM0XV0sODAyNTpbWzkzMyw3ODhdLCx7NzY4OjgwMjcsNzY5OjgwMjksODM0OjgwMzF9XSw4MDI3OltbODAyNSw3NjhdXSw4MDI5OltbODAyNSw3NjldXSw4MDMxOltbODAyNSw4MzRdXSw4MDMyOltbOTY5LDc4N10sLHs3Njg6ODAzNCw3Njk6ODAzNiw4MzQ6ODAzOCw4Mzc6ODA5Nn1dLDgwMzM6W1s5NjksNzg4XSwsezc2ODo4MDM1LDc2OTo4MDM3LDgzNDo4MDM5LDgzNzo4MDk3fV0sODAzNDpbWzgwMzIsNzY4XSwsezgzNzo4MDk4fV0sODAzNTpbWzgwMzMsNzY4XSwsezgzNzo4MDk5fV0sODAzNjpbWzgwMzIsNzY5XSwsezgzNzo4MTAwfV0sODAzNzpbWzgwMzMsNzY5XSwsezgzNzo4MTAxfV0sODAzODpbWzgwMzIsODM0XSwsezgzNzo4MTAyfV0sODAzOTpbWzgwMzMsODM0XSwsezgzNzo4MTAzfV0sODA0MDpbWzkzNyw3ODddLCx7NzY4OjgwNDIsNzY5OjgwNDQsODM0OjgwNDYsODM3OjgxMDR9XSw4MDQxOltbOTM3LDc4OF0sLHs3Njg6ODA0Myw3Njk6ODA0NSw4MzQ6ODA0Nyw4Mzc6ODEwNX1dLDgwNDI6W1s4MDQwLDc2OF0sLHs4Mzc6ODEwNn1dLDgwNDM6W1s4MDQxLDc2OF0sLHs4Mzc6ODEwN31dLDgwNDQ6W1s4MDQwLDc2OV0sLHs4Mzc6ODEwOH1dLDgwNDU6W1s4MDQxLDc2OV0sLHs4Mzc6ODEwOX1dLDgwNDY6W1s4MDQwLDgzNF0sLHs4Mzc6ODExMH1dLDgwNDc6W1s4MDQxLDgzNF0sLHs4Mzc6ODExMX1dLDgwNDg6W1s5NDUsNzY4XSwsezgzNzo4MTE0fV0sODA0OTpbWzk0MF1dLDgwNTA6W1s5NDksNzY4XV0sODA1MTpbWzk0MV1dLDgwNTI6W1s5NTEsNzY4XSwsezgzNzo4MTMwfV0sODA1MzpbWzk0Ml1dLDgwNTQ6W1s5NTMsNzY4XV0sODA1NTpbWzk0M11dLDgwNTY6W1s5NTksNzY4XV0sODA1NzpbWzk3Ml1dLDgwNTg6W1s5NjUsNzY4XV0sODA1OTpbWzk3M11dLDgwNjA6W1s5NjksNzY4XSwsezgzNzo4MTc4fV0sODA2MTpbWzk3NF1dLDgwNjQ6W1s3OTM2LDgzN11dLDgwNjU6W1s3OTM3LDgzN11dLDgwNjY6W1s3OTM4LDgzN11dLDgwNjc6W1s3OTM5LDgzN11dLDgwNjg6W1s3OTQwLDgzN11dLDgwNjk6W1s3OTQxLDgzN11dLDgwNzA6W1s3OTQyLDgzN11dLDgwNzE6W1s3OTQzLDgzN11dLDgwNzI6W1s3OTQ0LDgzN11dLDgwNzM6W1s3OTQ1LDgzN11dLDgwNzQ6W1s3OTQ2LDgzN11dLDgwNzU6W1s3OTQ3LDgzN11dLDgwNzY6W1s3OTQ4LDgzN11dLDgwNzc6W1s3OTQ5LDgzN11dLDgwNzg6W1s3OTUwLDgzN11dLDgwNzk6W1s3OTUxLDgzN11dLDgwODA6W1s3OTY4LDgzN11dLDgwODE6W1s3OTY5LDgzN11dLDgwODI6W1s3OTcwLDgzN11dLDgwODM6W1s3OTcxLDgzN11dLDgwODQ6W1s3OTcyLDgzN11dLDgwODU6W1s3OTczLDgzN11dLDgwODY6W1s3OTc0LDgzN11dLDgwODc6W1s3OTc1LDgzN11dLDgwODg6W1s3OTc2LDgzN11dLDgwODk6W1s3OTc3LDgzN11dLDgwOTA6W1s3OTc4LDgzN11dLDgwOTE6W1s3OTc5LDgzN11dLDgwOTI6W1s3OTgwLDgzN11dLDgwOTM6W1s3OTgxLDgzN11dLDgwOTQ6W1s3OTgyLDgzN11dLDgwOTU6W1s3OTgzLDgzN11dLDgwOTY6W1s4MDMyLDgzN11dLDgwOTc6W1s4MDMzLDgzN11dLDgwOTg6W1s4MDM0LDgzN11dLDgwOTk6W1s4MDM1LDgzN11dLDgxMDA6W1s4MDM2LDgzN11dLDgxMDE6W1s4MDM3LDgzN11dLDgxMDI6W1s4MDM4LDgzN11dLDgxMDM6W1s4MDM5LDgzN11dLDgxMDQ6W1s4MDQwLDgzN11dLDgxMDU6W1s4MDQxLDgzN11dLDgxMDY6W1s4MDQyLDgzN11dLDgxMDc6W1s4MDQzLDgzN11dLDgxMDg6W1s4MDQ0LDgzN11dLDgxMDk6W1s4MDQ1LDgzN11dLDgxMTA6W1s4MDQ2LDgzN11dLDgxMTE6W1s4MDQ3LDgzN11dLDgxMTI6W1s5NDUsNzc0XV0sODExMzpbWzk0NSw3NzJdXSw4MTE0OltbODA0OCw4MzddXSw4MTE1OltbOTQ1LDgzN11dLDgxMTY6W1s5NDAsODM3XV0sODExODpbWzk0NSw4MzRdLCx7ODM3OjgxMTl9XSw4MTE5OltbODExOCw4MzddXSw4MTIwOltbOTEzLDc3NF1dLDgxMjE6W1s5MTMsNzcyXV0sODEyMjpbWzkxMyw3NjhdXSw4MTIzOltbOTAyXV0sODEyNDpbWzkxMyw4MzddXSw4MTI1OltbMzIsNzg3XSwyNTZdLDgxMjY6W1s5NTNdXSw4MTI3OltbMzIsNzg3XSwyNTYsezc2ODo4MTQxLDc2OTo4MTQyLDgzNDo4MTQzfV0sODEyODpbWzMyLDgzNF0sMjU2XSw4MTI5OltbMTY4LDgzNF1dLDgxMzA6W1s4MDUyLDgzN11dLDgxMzE6W1s5NTEsODM3XV0sODEzMjpbWzk0Miw4MzddXSw4MTM0OltbOTUxLDgzNF0sLHs4Mzc6ODEzNX1dLDgxMzU6W1s4MTM0LDgzN11dLDgxMzY6W1s5MTcsNzY4XV0sODEzNzpbWzkwNF1dLDgxMzg6W1s5MTksNzY4XV0sODEzOTpbWzkwNV1dLDgxNDA6W1s5MTksODM3XV0sODE0MTpbWzgxMjcsNzY4XV0sODE0MjpbWzgxMjcsNzY5XV0sODE0MzpbWzgxMjcsODM0XV0sODE0NDpbWzk1Myw3NzRdXSw4MTQ1OltbOTUzLDc3Ml1dLDgxNDY6W1s5NzAsNzY4XV0sODE0NzpbWzkxMl1dLDgxNTA6W1s5NTMsODM0XV0sODE1MTpbWzk3MCw4MzRdXSw4MTUyOltbOTIxLDc3NF1dLDgxNTM6W1s5MjEsNzcyXV0sODE1NDpbWzkyMSw3NjhdXSw4MTU1OltbOTA2XV0sODE1NzpbWzgxOTAsNzY4XV0sODE1ODpbWzgxOTAsNzY5XV0sODE1OTpbWzgxOTAsODM0XV0sODE2MDpbWzk2NSw3NzRdXSw4MTYxOltbOTY1LDc3Ml1dLDgxNjI6W1s5NzEsNzY4XV0sODE2MzpbWzk0NF1dLDgxNjQ6W1s5NjEsNzg3XV0sODE2NTpbWzk2MSw3ODhdXSw4MTY2OltbOTY1LDgzNF1dLDgxNjc6W1s5NzEsODM0XV0sODE2ODpbWzkzMyw3NzRdXSw4MTY5OltbOTMzLDc3Ml1dLDgxNzA6W1s5MzMsNzY4XV0sODE3MTpbWzkxMF1dLDgxNzI6W1s5MjksNzg4XV0sODE3MzpbWzE2OCw3NjhdXSw4MTc0OltbOTAxXV0sODE3NTpbWzk2XV0sODE3ODpbWzgwNjAsODM3XV0sODE3OTpbWzk2OSw4MzddXSw4MTgwOltbOTc0LDgzN11dLDgxODI6W1s5NjksODM0XSwsezgzNzo4MTgzfV0sODE4MzpbWzgxODIsODM3XV0sODE4NDpbWzkyNyw3NjhdXSw4MTg1OltbOTA4XV0sODE4NjpbWzkzNyw3NjhdXSw4MTg3OltbOTExXV0sODE4ODpbWzkzNyw4MzddXSw4MTg5OltbMTgwXV0sODE5MDpbWzMyLDc4OF0sMjU2LHs3Njg6ODE1Nyw3Njk6ODE1OCw4MzQ6ODE1OX1dfSwKODE5Mjp7ODE5MjpbWzgxOTRdXSw4MTkzOltbODE5NV1dLDgxOTQ6W1szMl0sMjU2XSw4MTk1OltbMzJdLDI1Nl0sODE5NjpbWzMyXSwyNTZdLDgxOTc6W1szMl0sMjU2XSw4MTk4OltbMzJdLDI1Nl0sODE5OTpbWzMyXSwyNTZdLDgyMDA6W1szMl0sMjU2XSw4MjAxOltbMzJdLDI1Nl0sODIwMjpbWzMyXSwyNTZdLDgyMDk6W1s4MjA4XSwyNTZdLDgyMTU6W1szMiw4MTldLDI1Nl0sODIyODpbWzQ2XSwyNTZdLDgyMjk6W1s0Niw0Nl0sMjU2XSw4MjMwOltbNDYsNDYsNDZdLDI1Nl0sODIzOTpbWzMyXSwyNTZdLDgyNDM6W1s4MjQyLDgyNDJdLDI1Nl0sODI0NDpbWzgyNDIsODI0Miw4MjQyXSwyNTZdLDgyNDY6W1s4MjQ1LDgyNDVdLDI1Nl0sODI0NzpbWzgyNDUsODI0NSw4MjQ1XSwyNTZdLDgyNTI6W1szMywzM10sMjU2XSw4MjU0OltbMzIsNzczXSwyNTZdLDgyNjM6W1s2Myw2M10sMjU2XSw4MjY0OltbNjMsMzNdLDI1Nl0sODI2NTpbWzMzLDYzXSwyNTZdLDgyNzk6W1s4MjQyLDgyNDIsODI0Miw4MjQyXSwyNTZdLDgyODc6W1szMl0sMjU2XSw4MzA0OltbNDhdLDI1Nl0sODMwNTpbWzEwNV0sMjU2XSw4MzA4OltbNTJdLDI1Nl0sODMwOTpbWzUzXSwyNTZdLDgzMTA6W1s1NF0sMjU2XSw4MzExOltbNTVdLDI1Nl0sODMxMjpbWzU2XSwyNTZdLDgzMTM6W1s1N10sMjU2XSw4MzE0OltbNDNdLDI1Nl0sODMxNTpbWzg3MjJdLDI1Nl0sODMxNjpbWzYxXSwyNTZdLDgzMTc6W1s0MF0sMjU2XSw4MzE4OltbNDFdLDI1Nl0sODMxOTpbWzExMF0sMjU2XSw4MzIwOltbNDhdLDI1Nl0sODMyMTpbWzQ5XSwyNTZdLDgzMjI6W1s1MF0sMjU2XSw4MzIzOltbNTFdLDI1Nl0sODMyNDpbWzUyXSwyNTZdLDgzMjU6W1s1M10sMjU2XSw4MzI2OltbNTRdLDI1Nl0sODMyNzpbWzU1XSwyNTZdLDgzMjg6W1s1Nl0sMjU2XSw4MzI5OltbNTddLDI1Nl0sODMzMDpbWzQzXSwyNTZdLDgzMzE6W1s4NzIyXSwyNTZdLDgzMzI6W1s2MV0sMjU2XSw4MzMzOltbNDBdLDI1Nl0sODMzNDpbWzQxXSwyNTZdLDgzMzY6W1s5N10sMjU2XSw4MzM3OltbMTAxXSwyNTZdLDgzMzg6W1sxMTFdLDI1Nl0sODMzOTpbWzEyMF0sMjU2XSw4MzQwOltbNjAxXSwyNTZdLDgzNDE6W1sxMDRdLDI1Nl0sODM0MjpbWzEwN10sMjU2XSw4MzQzOltbMTA4XSwyNTZdLDgzNDQ6W1sxMDldLDI1Nl0sODM0NTpbWzExMF0sMjU2XSw4MzQ2OltbMTEyXSwyNTZdLDgzNDc6W1sxMTVdLDI1Nl0sODM0ODpbWzExNl0sMjU2XSw4MzYwOltbODIsMTE1XSwyNTZdLDg0MDA6WywyMzBdLDg0MDE6WywyMzBdLDg0MDI6WywxXSw4NDAzOlssMV0sODQwNDpbLDIzMF0sODQwNTpbLDIzMF0sODQwNjpbLDIzMF0sODQwNzpbLDIzMF0sODQwODpbLDFdLDg0MDk6WywxXSw4NDEwOlssMV0sODQxMTpbLDIzMF0sODQxMjpbLDIzMF0sODQxNzpbLDIzMF0sODQyMTpbLDFdLDg0MjI6WywxXSw4NDIzOlssMjMwXSw4NDI0OlssMjIwXSw4NDI1OlssMjMwXSw4NDI2OlssMV0sODQyNzpbLDFdLDg0Mjg6WywyMjBdLDg0Mjk6WywyMjBdLDg0MzA6WywyMjBdLDg0MzE6WywyMjBdLDg0MzI6WywyMzBdfSwKODQ0ODp7ODQ0ODpbWzk3LDQ3LDk5XSwyNTZdLDg0NDk6W1s5Nyw0NywxMTVdLDI1Nl0sODQ1MDpbWzY3XSwyNTZdLDg0NTE6W1sxNzYsNjddLDI1Nl0sODQ1MzpbWzk5LDQ3LDExMV0sMjU2XSw4NDU0OltbOTksNDcsMTE3XSwyNTZdLDg0NTU6W1s0MDBdLDI1Nl0sODQ1NzpbWzE3Niw3MF0sMjU2XSw4NDU4OltbMTAzXSwyNTZdLDg0NTk6W1s3Ml0sMjU2XSw4NDYwOltbNzJdLDI1Nl0sODQ2MTpbWzcyXSwyNTZdLDg0NjI6W1sxMDRdLDI1Nl0sODQ2MzpbWzI5NV0sMjU2XSw4NDY0OltbNzNdLDI1Nl0sODQ2NTpbWzczXSwyNTZdLDg0NjY6W1s3Nl0sMjU2XSw4NDY3OltbMTA4XSwyNTZdLDg0Njk6W1s3OF0sMjU2XSw4NDcwOltbNzgsMTExXSwyNTZdLDg0NzM6W1s4MF0sMjU2XSw4NDc0OltbODFdLDI1Nl0sODQ3NTpbWzgyXSwyNTZdLDg0NzY6W1s4Ml0sMjU2XSw4NDc3OltbODJdLDI1Nl0sODQ4MDpbWzgzLDc3XSwyNTZdLDg0ODE6W1s4NCw2OSw3Nl0sMjU2XSw4NDgyOltbODQsNzddLDI1Nl0sODQ4NDpbWzkwXSwyNTZdLDg0ODY6W1s5MzddXSw4NDg4OltbOTBdLDI1Nl0sODQ5MDpbWzc1XV0sODQ5MTpbWzE5N11dLDg0OTI6W1s2Nl0sMjU2XSw4NDkzOltbNjddLDI1Nl0sODQ5NTpbWzEwMV0sMjU2XSw4NDk2OltbNjldLDI1Nl0sODQ5NzpbWzcwXSwyNTZdLDg0OTk6W1s3N10sMjU2XSw4NTAwOltbMTExXSwyNTZdLDg1MDE6W1sxNDg4XSwyNTZdLDg1MDI6W1sxNDg5XSwyNTZdLDg1MDM6W1sxNDkwXSwyNTZdLDg1MDQ6W1sxNDkxXSwyNTZdLDg1MDU6W1sxMDVdLDI1Nl0sODUwNzpbWzcwLDY1LDg4XSwyNTZdLDg1MDg6W1s5NjBdLDI1Nl0sODUwOTpbWzk0N10sMjU2XSw4NTEwOltbOTE1XSwyNTZdLDg1MTE6W1s5MjhdLDI1Nl0sODUxMjpbWzg3MjFdLDI1Nl0sODUxNzpbWzY4XSwyNTZdLDg1MTg6W1sxMDBdLDI1Nl0sODUxOTpbWzEwMV0sMjU2XSw4NTIwOltbMTA1XSwyNTZdLDg1MjE6W1sxMDZdLDI1Nl0sODUyODpbWzQ5LDgyNjAsNTVdLDI1Nl0sODUyOTpbWzQ5LDgyNjAsNTddLDI1Nl0sODUzMDpbWzQ5LDgyNjAsNDksNDhdLDI1Nl0sODUzMTpbWzQ5LDgyNjAsNTFdLDI1Nl0sODUzMjpbWzUwLDgyNjAsNTFdLDI1Nl0sODUzMzpbWzQ5LDgyNjAsNTNdLDI1Nl0sODUzNDpbWzUwLDgyNjAsNTNdLDI1Nl0sODUzNTpbWzUxLDgyNjAsNTNdLDI1Nl0sODUzNjpbWzUyLDgyNjAsNTNdLDI1Nl0sODUzNzpbWzQ5LDgyNjAsNTRdLDI1Nl0sODUzODpbWzUzLDgyNjAsNTRdLDI1Nl0sODUzOTpbWzQ5LDgyNjAsNTZdLDI1Nl0sODU0MDpbWzUxLDgyNjAsNTZdLDI1Nl0sODU0MTpbWzUzLDgyNjAsNTZdLDI1Nl0sODU0MjpbWzU1LDgyNjAsNTZdLDI1Nl0sODU0MzpbWzQ5LDgyNjBdLDI1Nl0sODU0NDpbWzczXSwyNTZdLDg1NDU6W1s3Myw3M10sMjU2XSw4NTQ2OltbNzMsNzMsNzNdLDI1Nl0sODU0NzpbWzczLDg2XSwyNTZdLDg1NDg6W1s4Nl0sMjU2XSw4NTQ5OltbODYsNzNdLDI1Nl0sODU1MDpbWzg2LDczLDczXSwyNTZdLDg1NTE6W1s4Niw3Myw3Myw3M10sMjU2XSw4NTUyOltbNzMsODhdLDI1Nl0sODU1MzpbWzg4XSwyNTZdLDg1NTQ6W1s4OCw3M10sMjU2XSw4NTU1OltbODgsNzMsNzNdLDI1Nl0sODU1NjpbWzc2XSwyNTZdLDg1NTc6W1s2N10sMjU2XSw4NTU4OltbNjhdLDI1Nl0sODU1OTpbWzc3XSwyNTZdLDg1NjA6W1sxMDVdLDI1Nl0sODU2MTpbWzEwNSwxMDVdLDI1Nl0sODU2MjpbWzEwNSwxMDUsMTA1XSwyNTZdLDg1NjM6W1sxMDUsMTE4XSwyNTZdLDg1NjQ6W1sxMThdLDI1Nl0sODU2NTpbWzExOCwxMDVdLDI1Nl0sODU2NjpbWzExOCwxMDUsMTA1XSwyNTZdLDg1Njc6W1sxMTgsMTA1LDEwNSwxMDVdLDI1Nl0sODU2ODpbWzEwNSwxMjBdLDI1Nl0sODU2OTpbWzEyMF0sMjU2XSw4NTcwOltbMTIwLDEwNV0sMjU2XSw4NTcxOltbMTIwLDEwNSwxMDVdLDI1Nl0sODU3MjpbWzEwOF0sMjU2XSw4NTczOltbOTldLDI1Nl0sODU3NDpbWzEwMF0sMjU2XSw4NTc1OltbMTA5XSwyNTZdLDg1ODU6W1s0OCw4MjYwLDUxXSwyNTZdLDg1OTI6WywsezgyNDo4NjAyfV0sODU5NDpbLCx7ODI0Ojg2MDN9XSw4NTk2OlssLHs4MjQ6ODYyMn1dLDg2MDI6W1s4NTkyLDgyNF1dLDg2MDM6W1s4NTk0LDgyNF1dLDg2MjI6W1s4NTk2LDgyNF1dLDg2NTM6W1s4NjU2LDgyNF1dLDg2NTQ6W1s4NjYwLDgyNF1dLDg2NTU6W1s4NjU4LDgyNF1dLDg2NTY6WywsezgyNDo4NjUzfV0sODY1ODpbLCx7ODI0Ojg2NTV9XSw4NjYwOlssLHs4MjQ6ODY1NH1dfSwKODcwNDp7ODcwNzpbLCx7ODI0Ojg3MDh9XSw4NzA4OltbODcwNyw4MjRdXSw4NzEyOlssLHs4MjQ6ODcxM31dLDg3MTM6W1s4NzEyLDgyNF1dLDg3MTU6WywsezgyNDo4NzE2fV0sODcxNjpbWzg3MTUsODI0XV0sODczOTpbLCx7ODI0Ojg3NDB9XSw4NzQwOltbODczOSw4MjRdXSw4NzQxOlssLHs4MjQ6ODc0Mn1dLDg3NDI6W1s4NzQxLDgyNF1dLDg3NDg6W1s4NzQ3LDg3NDddLDI1Nl0sODc0OTpbWzg3NDcsODc0Nyw4NzQ3XSwyNTZdLDg3NTE6W1s4NzUwLDg3NTBdLDI1Nl0sODc1MjpbWzg3NTAsODc1MCw4NzUwXSwyNTZdLDg3NjQ6WywsezgyNDo4NzY5fV0sODc2OTpbWzg3NjQsODI0XV0sODc3MTpbLCx7ODI0Ojg3NzJ9XSw4NzcyOltbODc3MSw4MjRdXSw4NzczOlssLHs4MjQ6ODc3NX1dLDg3NzU6W1s4NzczLDgyNF1dLDg3NzY6WywsezgyNDo4Nzc3fV0sODc3NzpbWzg3NzYsODI0XV0sODc4MTpbLCx7ODI0Ojg4MTN9XSw4ODAwOltbNjEsODI0XV0sODgwMTpbLCx7ODI0Ojg4MDJ9XSw4ODAyOltbODgwMSw4MjRdXSw4ODA0OlssLHs4MjQ6ODgxNn1dLDg4MDU6WywsezgyNDo4ODE3fV0sODgxMzpbWzg3ODEsODI0XV0sODgxNDpbWzYwLDgyNF1dLDg4MTU6W1s2Miw4MjRdXSw4ODE2OltbODgwNCw4MjRdXSw4ODE3OltbODgwNSw4MjRdXSw4ODE4OlssLHs4MjQ6ODgyMH1dLDg4MTk6WywsezgyNDo4ODIxfV0sODgyMDpbWzg4MTgsODI0XV0sODgyMTpbWzg4MTksODI0XV0sODgyMjpbLCx7ODI0Ojg4MjR9XSw4ODIzOlssLHs4MjQ6ODgyNX1dLDg4MjQ6W1s4ODIyLDgyNF1dLDg4MjU6W1s4ODIzLDgyNF1dLDg4MjY6WywsezgyNDo4ODMyfV0sODgyNzpbLCx7ODI0Ojg4MzN9XSw4ODI4OlssLHs4MjQ6ODkyOH1dLDg4Mjk6WywsezgyNDo4OTI5fV0sODgzMjpbWzg4MjYsODI0XV0sODgzMzpbWzg4MjcsODI0XV0sODgzNDpbLCx7ODI0Ojg4MzZ9XSw4ODM1OlssLHs4MjQ6ODgzN31dLDg4MzY6W1s4ODM0LDgyNF1dLDg4Mzc6W1s4ODM1LDgyNF1dLDg4Mzg6WywsezgyNDo4ODQwfV0sODgzOTpbLCx7ODI0Ojg4NDF9XSw4ODQwOltbODgzOCw4MjRdXSw4ODQxOltbODgzOSw4MjRdXSw4ODQ5OlssLHs4MjQ6ODkzMH1dLDg4NTA6WywsezgyNDo4OTMxfV0sODg2NjpbLCx7ODI0Ojg4NzZ9XSw4ODcyOlssLHs4MjQ6ODg3N31dLDg4NzM6WywsezgyNDo4ODc4fV0sODg3NTpbLCx7ODI0Ojg4Nzl9XSw4ODc2OltbODg2Niw4MjRdXSw4ODc3OltbODg3Miw4MjRdXSw4ODc4OltbODg3Myw4MjRdXSw4ODc5OltbODg3NSw4MjRdXSw4ODgyOlssLHs4MjQ6ODkzOH1dLDg4ODM6WywsezgyNDo4OTM5fV0sODg4NDpbLCx7ODI0Ojg5NDB9XSw4ODg1OlssLHs4MjQ6ODk0MX1dLDg5Mjg6W1s4ODI4LDgyNF1dLDg5Mjk6W1s4ODI5LDgyNF1dLDg5MzA6W1s4ODQ5LDgyNF1dLDg5MzE6W1s4ODUwLDgyNF1dLDg5Mzg6W1s4ODgyLDgyNF1dLDg5Mzk6W1s4ODgzLDgyNF1dLDg5NDA6W1s4ODg0LDgyNF1dLDg5NDE6W1s4ODg1LDgyNF1dfSwKODk2MDp7OTAwMTpbWzEyMjk2XV0sOTAwMjpbWzEyMjk3XV19LAo5MjE2Ons5MzEyOltbNDldLDI1Nl0sOTMxMzpbWzUwXSwyNTZdLDkzMTQ6W1s1MV0sMjU2XSw5MzE1OltbNTJdLDI1Nl0sOTMxNjpbWzUzXSwyNTZdLDkzMTc6W1s1NF0sMjU2XSw5MzE4OltbNTVdLDI1Nl0sOTMxOTpbWzU2XSwyNTZdLDkzMjA6W1s1N10sMjU2XSw5MzIxOltbNDksNDhdLDI1Nl0sOTMyMjpbWzQ5LDQ5XSwyNTZdLDkzMjM6W1s0OSw1MF0sMjU2XSw5MzI0OltbNDksNTFdLDI1Nl0sOTMyNTpbWzQ5LDUyXSwyNTZdLDkzMjY6W1s0OSw1M10sMjU2XSw5MzI3OltbNDksNTRdLDI1Nl0sOTMyODpbWzQ5LDU1XSwyNTZdLDkzMjk6W1s0OSw1Nl0sMjU2XSw5MzMwOltbNDksNTddLDI1Nl0sOTMzMTpbWzUwLDQ4XSwyNTZdLDkzMzI6W1s0MCw0OSw0MV0sMjU2XSw5MzMzOltbNDAsNTAsNDFdLDI1Nl0sOTMzNDpbWzQwLDUxLDQxXSwyNTZdLDkzMzU6W1s0MCw1Miw0MV0sMjU2XSw5MzM2OltbNDAsNTMsNDFdLDI1Nl0sOTMzNzpbWzQwLDU0LDQxXSwyNTZdLDkzMzg6W1s0MCw1NSw0MV0sMjU2XSw5MzM5OltbNDAsNTYsNDFdLDI1Nl0sOTM0MDpbWzQwLDU3LDQxXSwyNTZdLDkzNDE6W1s0MCw0OSw0OCw0MV0sMjU2XSw5MzQyOltbNDAsNDksNDksNDFdLDI1Nl0sOTM0MzpbWzQwLDQ5LDUwLDQxXSwyNTZdLDkzNDQ6W1s0MCw0OSw1MSw0MV0sMjU2XSw5MzQ1OltbNDAsNDksNTIsNDFdLDI1Nl0sOTM0NjpbWzQwLDQ5LDUzLDQxXSwyNTZdLDkzNDc6W1s0MCw0OSw1NCw0MV0sMjU2XSw5MzQ4OltbNDAsNDksNTUsNDFdLDI1Nl0sOTM0OTpbWzQwLDQ5LDU2LDQxXSwyNTZdLDkzNTA6W1s0MCw0OSw1Nyw0MV0sMjU2XSw5MzUxOltbNDAsNTAsNDgsNDFdLDI1Nl0sOTM1MjpbWzQ5LDQ2XSwyNTZdLDkzNTM6W1s1MCw0Nl0sMjU2XSw5MzU0OltbNTEsNDZdLDI1Nl0sOTM1NTpbWzUyLDQ2XSwyNTZdLDkzNTY6W1s1Myw0Nl0sMjU2XSw5MzU3OltbNTQsNDZdLDI1Nl0sOTM1ODpbWzU1LDQ2XSwyNTZdLDkzNTk6W1s1Niw0Nl0sMjU2XSw5MzYwOltbNTcsNDZdLDI1Nl0sOTM2MTpbWzQ5LDQ4LDQ2XSwyNTZdLDkzNjI6W1s0OSw0OSw0Nl0sMjU2XSw5MzYzOltbNDksNTAsNDZdLDI1Nl0sOTM2NDpbWzQ5LDUxLDQ2XSwyNTZdLDkzNjU6W1s0OSw1Miw0Nl0sMjU2XSw5MzY2OltbNDksNTMsNDZdLDI1Nl0sOTM2NzpbWzQ5LDU0LDQ2XSwyNTZdLDkzNjg6W1s0OSw1NSw0Nl0sMjU2XSw5MzY5OltbNDksNTYsNDZdLDI1Nl0sOTM3MDpbWzQ5LDU3LDQ2XSwyNTZdLDkzNzE6W1s1MCw0OCw0Nl0sMjU2XSw5MzcyOltbNDAsOTcsNDFdLDI1Nl0sOTM3MzpbWzQwLDk4LDQxXSwyNTZdLDkzNzQ6W1s0MCw5OSw0MV0sMjU2XSw5Mzc1OltbNDAsMTAwLDQxXSwyNTZdLDkzNzY6W1s0MCwxMDEsNDFdLDI1Nl0sOTM3NzpbWzQwLDEwMiw0MV0sMjU2XSw5Mzc4OltbNDAsMTAzLDQxXSwyNTZdLDkzNzk6W1s0MCwxMDQsNDFdLDI1Nl0sOTM4MDpbWzQwLDEwNSw0MV0sMjU2XSw5MzgxOltbNDAsMTA2LDQxXSwyNTZdLDkzODI6W1s0MCwxMDcsNDFdLDI1Nl0sOTM4MzpbWzQwLDEwOCw0MV0sMjU2XSw5Mzg0OltbNDAsMTA5LDQxXSwyNTZdLDkzODU6W1s0MCwxMTAsNDFdLDI1Nl0sOTM4NjpbWzQwLDExMSw0MV0sMjU2XSw5Mzg3OltbNDAsMTEyLDQxXSwyNTZdLDkzODg6W1s0MCwxMTMsNDFdLDI1Nl0sOTM4OTpbWzQwLDExNCw0MV0sMjU2XSw5MzkwOltbNDAsMTE1LDQxXSwyNTZdLDkzOTE6W1s0MCwxMTYsNDFdLDI1Nl0sOTM5MjpbWzQwLDExNyw0MV0sMjU2XSw5MzkzOltbNDAsMTE4LDQxXSwyNTZdLDkzOTQ6W1s0MCwxMTksNDFdLDI1Nl0sOTM5NTpbWzQwLDEyMCw0MV0sMjU2XSw5Mzk2OltbNDAsMTIxLDQxXSwyNTZdLDkzOTc6W1s0MCwxMjIsNDFdLDI1Nl0sOTM5ODpbWzY1XSwyNTZdLDkzOTk6W1s2Nl0sMjU2XSw5NDAwOltbNjddLDI1Nl0sOTQwMTpbWzY4XSwyNTZdLDk0MDI6W1s2OV0sMjU2XSw5NDAzOltbNzBdLDI1Nl0sOTQwNDpbWzcxXSwyNTZdLDk0MDU6W1s3Ml0sMjU2XSw5NDA2OltbNzNdLDI1Nl0sOTQwNzpbWzc0XSwyNTZdLDk0MDg6W1s3NV0sMjU2XSw5NDA5OltbNzZdLDI1Nl0sOTQxMDpbWzc3XSwyNTZdLDk0MTE6W1s3OF0sMjU2XSw5NDEyOltbNzldLDI1Nl0sOTQxMzpbWzgwXSwyNTZdLDk0MTQ6W1s4MV0sMjU2XSw5NDE1OltbODJdLDI1Nl0sOTQxNjpbWzgzXSwyNTZdLDk0MTc6W1s4NF0sMjU2XSw5NDE4OltbODVdLDI1Nl0sOTQxOTpbWzg2XSwyNTZdLDk0MjA6W1s4N10sMjU2XSw5NDIxOltbODhdLDI1Nl0sOTQyMjpbWzg5XSwyNTZdLDk0MjM6W1s5MF0sMjU2XSw5NDI0OltbOTddLDI1Nl0sOTQyNTpbWzk4XSwyNTZdLDk0MjY6W1s5OV0sMjU2XSw5NDI3OltbMTAwXSwyNTZdLDk0Mjg6W1sxMDFdLDI1Nl0sOTQyOTpbWzEwMl0sMjU2XSw5NDMwOltbMTAzXSwyNTZdLDk0MzE6W1sxMDRdLDI1Nl0sOTQzMjpbWzEwNV0sMjU2XSw5NDMzOltbMTA2XSwyNTZdLDk0MzQ6W1sxMDddLDI1Nl0sOTQzNTpbWzEwOF0sMjU2XSw5NDM2OltbMTA5XSwyNTZdLDk0Mzc6W1sxMTBdLDI1Nl0sOTQzODpbWzExMV0sMjU2XSw5NDM5OltbMTEyXSwyNTZdLDk0NDA6W1sxMTNdLDI1Nl0sOTQ0MTpbWzExNF0sMjU2XSw5NDQyOltbMTE1XSwyNTZdLDk0NDM6W1sxMTZdLDI1Nl0sOTQ0NDpbWzExN10sMjU2XSw5NDQ1OltbMTE4XSwyNTZdLDk0NDY6W1sxMTldLDI1Nl0sOTQ0NzpbWzEyMF0sMjU2XSw5NDQ4OltbMTIxXSwyNTZdLDk0NDk6W1sxMjJdLDI1Nl0sOTQ1MDpbWzQ4XSwyNTZdfSwKMTA3NTI6ezEwNzY0OltbODc0Nyw4NzQ3LDg3NDcsODc0N10sMjU2XSwxMDg2ODpbWzU4LDU4LDYxXSwyNTZdLDEwODY5OltbNjEsNjFdLDI1Nl0sMTA4NzA6W1s2MSw2MSw2MV0sMjU2XSwxMDk3MjpbWzEwOTczLDgyNF0sNTEyXX0sCjExMjY0OnsxMTM4ODpbWzEwNl0sMjU2XSwxMTM4OTpbWzg2XSwyNTZdLDExNTAzOlssMjMwXSwxMTUwNDpbLDIzMF0sMTE1MDU6WywyMzBdfSwKMTE1MjA6ezExNjMxOltbMTE2MTddLDI1Nl0sMTE2NDc6Wyw5XSwxMTc0NDpbLDIzMF0sMTE3NDU6WywyMzBdLDExNzQ2OlssMjMwXSwxMTc0NzpbLDIzMF0sMTE3NDg6WywyMzBdLDExNzQ5OlssMjMwXSwxMTc1MDpbLDIzMF0sMTE3NTE6WywyMzBdLDExNzUyOlssMjMwXSwxMTc1MzpbLDIzMF0sMTE3NTQ6WywyMzBdLDExNzU1OlssMjMwXSwxMTc1NjpbLDIzMF0sMTE3NTc6WywyMzBdLDExNzU4OlssMjMwXSwxMTc1OTpbLDIzMF0sMTE3NjA6WywyMzBdLDExNzYxOlssMjMwXSwxMTc2MjpbLDIzMF0sMTE3NjM6WywyMzBdLDExNzY0OlssMjMwXSwxMTc2NTpbLDIzMF0sMTE3NjY6WywyMzBdLDExNzY3OlssMjMwXSwxMTc2ODpbLDIzMF0sMTE3Njk6WywyMzBdLDExNzcwOlssMjMwXSwxMTc3MTpbLDIzMF0sMTE3NzI6WywyMzBdLDExNzczOlssMjMwXSwxMTc3NDpbLDIzMF0sMTE3NzU6WywyMzBdfSwKMTE3NzY6ezExOTM1OltbMjc1OTddLDI1Nl0sMTIwMTk6W1s0MDg2M10sMjU2XX0sCjEyMDMyOnsxMjAzMjpbWzE5OTY4XSwyNTZdLDEyMDMzOltbMjAwMDhdLDI1Nl0sMTIwMzQ6W1syMDAyMl0sMjU2XSwxMjAzNTpbWzIwMDMxXSwyNTZdLDEyMDM2OltbMjAwNTddLDI1Nl0sMTIwMzc6W1syMDEwMV0sMjU2XSwxMjAzODpbWzIwMTA4XSwyNTZdLDEyMDM5OltbMjAxMjhdLDI1Nl0sMTIwNDA6W1syMDE1NF0sMjU2XSwxMjA0MTpbWzIwNzk5XSwyNTZdLDEyMDQyOltbMjA4MzddLDI1Nl0sMTIwNDM6W1syMDg0M10sMjU2XSwxMjA0NDpbWzIwODY2XSwyNTZdLDEyMDQ1OltbMjA4ODZdLDI1Nl0sMTIwNDY6W1syMDkwN10sMjU2XSwxMjA0NzpbWzIwOTYwXSwyNTZdLDEyMDQ4OltbMjA5ODFdLDI1Nl0sMTIwNDk6W1syMDk5Ml0sMjU2XSwxMjA1MDpbWzIxMTQ3XSwyNTZdLDEyMDUxOltbMjEyNDFdLDI1Nl0sMTIwNTI6W1syMTI2OV0sMjU2XSwxMjA1MzpbWzIxMjc0XSwyNTZdLDEyMDU0OltbMjEzMDRdLDI1Nl0sMTIwNTU6W1syMTMxM10sMjU2XSwxMjA1NjpbWzIxMzQwXSwyNTZdLDEyMDU3OltbMjEzNTNdLDI1Nl0sMTIwNTg6W1syMTM3OF0sMjU2XSwxMjA1OTpbWzIxNDMwXSwyNTZdLDEyMDYwOltbMjE0NDhdLDI1Nl0sMTIwNjE6W1syMTQ3NV0sMjU2XSwxMjA2MjpbWzIyMjMxXSwyNTZdLDEyMDYzOltbMjIzMDNdLDI1Nl0sMTIwNjQ6W1syMjc2M10sMjU2XSwxMjA2NTpbWzIyNzg2XSwyNTZdLDEyMDY2OltbMjI3OTRdLDI1Nl0sMTIwNjc6W1syMjgwNV0sMjU2XSwxMjA2ODpbWzIyODIzXSwyNTZdLDEyMDY5OltbMjI4OTldLDI1Nl0sMTIwNzA6W1syMzM3Nl0sMjU2XSwxMjA3MTpbWzIzNDI0XSwyNTZdLDEyMDcyOltbMjM1NDRdLDI1Nl0sMTIwNzM6W1syMzU2N10sMjU2XSwxMjA3NDpbWzIzNTg2XSwyNTZdLDEyMDc1OltbMjM2MDhdLDI1Nl0sMTIwNzY6W1syMzY2Ml0sMjU2XSwxMjA3NzpbWzIzNjY1XSwyNTZdLDEyMDc4OltbMjQwMjddLDI1Nl0sMTIwNzk6W1syNDAzN10sMjU2XSwxMjA4MDpbWzI0MDQ5XSwyNTZdLDEyMDgxOltbMjQwNjJdLDI1Nl0sMTIwODI6W1syNDE3OF0sMjU2XSwxMjA4MzpbWzI0MTg2XSwyNTZdLDEyMDg0OltbMjQxOTFdLDI1Nl0sMTIwODU6W1syNDMwOF0sMjU2XSwxMjA4NjpbWzI0MzE4XSwyNTZdLDEyMDg3OltbMjQzMzFdLDI1Nl0sMTIwODg6W1syNDMzOV0sMjU2XSwxMjA4OTpbWzI0NDAwXSwyNTZdLDEyMDkwOltbMjQ0MTddLDI1Nl0sMTIwOTE6W1syNDQzNV0sMjU2XSwxMjA5MjpbWzI0NTE1XSwyNTZdLDEyMDkzOltbMjUwOTZdLDI1Nl0sMTIwOTQ6W1syNTE0Ml0sMjU2XSwxMjA5NTpbWzI1MTYzXSwyNTZdLDEyMDk2OltbMjU5MDNdLDI1Nl0sMTIwOTc6W1syNTkwOF0sMjU2XSwxMjA5ODpbWzI1OTkxXSwyNTZdLDEyMDk5OltbMjYwMDddLDI1Nl0sMTIxMDA6W1syNjAyMF0sMjU2XSwxMjEwMTpbWzI2MDQxXSwyNTZdLDEyMTAyOltbMjYwODBdLDI1Nl0sMTIxMDM6W1syNjA4NV0sMjU2XSwxMjEwNDpbWzI2MzUyXSwyNTZdLDEyMTA1OltbMjYzNzZdLDI1Nl0sMTIxMDY6W1syNjQwOF0sMjU2XSwxMjEwNzpbWzI3NDI0XSwyNTZdLDEyMTA4OltbMjc0OTBdLDI1Nl0sMTIxMDk6W1syNzUxM10sMjU2XSwxMjExMDpbWzI3NTcxXSwyNTZdLDEyMTExOltbMjc1OTVdLDI1Nl0sMTIxMTI6W1syNzYwNF0sMjU2XSwxMjExMzpbWzI3NjExXSwyNTZdLDEyMTE0OltbMjc2NjNdLDI1Nl0sMTIxMTU6W1syNzY2OF0sMjU2XSwxMjExNjpbWzI3NzAwXSwyNTZdLDEyMTE3OltbMjg3NzldLDI1Nl0sMTIxMTg6W1syOTIyNl0sMjU2XSwxMjExOTpbWzI5MjM4XSwyNTZdLDEyMTIwOltbMjkyNDNdLDI1Nl0sMTIxMjE6W1syOTI0N10sMjU2XSwxMjEyMjpbWzI5MjU1XSwyNTZdLDEyMTIzOltbMjkyNzNdLDI1Nl0sMTIxMjQ6W1syOTI3NV0sMjU2XSwxMjEyNTpbWzI5MzU2XSwyNTZdLDEyMTI2OltbMjk1NzJdLDI1Nl0sMTIxMjc6W1syOTU3N10sMjU2XSwxMjEyODpbWzI5OTE2XSwyNTZdLDEyMTI5OltbMjk5MjZdLDI1Nl0sMTIxMzA6W1syOTk3Nl0sMjU2XSwxMjEzMTpbWzI5OTgzXSwyNTZdLDEyMTMyOltbMjk5OTJdLDI1Nl0sMTIxMzM6W1szMDAwMF0sMjU2XSwxMjEzNDpbWzMwMDkxXSwyNTZdLDEyMTM1OltbMzAwOThdLDI1Nl0sMTIxMzY6W1szMDMyNl0sMjU2XSwxMjEzNzpbWzMwMzMzXSwyNTZdLDEyMTM4OltbMzAzODJdLDI1Nl0sMTIxMzk6W1szMDM5OV0sMjU2XSwxMjE0MDpbWzMwNDQ2XSwyNTZdLDEyMTQxOltbMzA2ODNdLDI1Nl0sMTIxNDI6W1szMDY5MF0sMjU2XSwxMjE0MzpbWzMwNzA3XSwyNTZdLDEyMTQ0OltbMzEwMzRdLDI1Nl0sMTIxNDU6W1szMTE2MF0sMjU2XSwxMjE0NjpbWzMxMTY2XSwyNTZdLDEyMTQ3OltbMzEzNDhdLDI1Nl0sMTIxNDg6W1szMTQzNV0sMjU2XSwxMjE0OTpbWzMxNDgxXSwyNTZdLDEyMTUwOltbMzE4NTldLDI1Nl0sMTIxNTE6W1szMTk5Ml0sMjU2XSwxMjE1MjpbWzMyNTY2XSwyNTZdLDEyMTUzOltbMzI1OTNdLDI1Nl0sMTIxNTQ6W1szMjY1MF0sMjU2XSwxMjE1NTpbWzMyNzAxXSwyNTZdLDEyMTU2OltbMzI3NjldLDI1Nl0sMTIxNTc6W1szMjc4MF0sMjU2XSwxMjE1ODpbWzMyNzg2XSwyNTZdLDEyMTU5OltbMzI4MTldLDI1Nl0sMTIxNjA6W1szMjg5NV0sMjU2XSwxMjE2MTpbWzMyOTA1XSwyNTZdLDEyMTYyOltbMzMyNTFdLDI1Nl0sMTIxNjM6W1szMzI1OF0sMjU2XSwxMjE2NDpbWzMzMjY3XSwyNTZdLDEyMTY1OltbMzMyNzZdLDI1Nl0sMTIxNjY6W1szMzI5Ml0sMjU2XSwxMjE2NzpbWzMzMzA3XSwyNTZdLDEyMTY4OltbMzMzMTFdLDI1Nl0sMTIxNjk6W1szMzM5MF0sMjU2XSwxMjE3MDpbWzMzMzk0XSwyNTZdLDEyMTcxOltbMzM0MDBdLDI1Nl0sMTIxNzI6W1szNDM4MV0sMjU2XSwxMjE3MzpbWzM0NDExXSwyNTZdLDEyMTc0OltbMzQ4ODBdLDI1Nl0sMTIxNzU6W1szNDg5Ml0sMjU2XSwxMjE3NjpbWzM0OTE1XSwyNTZdLDEyMTc3OltbMzUxOThdLDI1Nl0sMTIxNzg6W1szNTIxMV0sMjU2XSwxMjE3OTpbWzM1MjgyXSwyNTZdLDEyMTgwOltbMzUzMjhdLDI1Nl0sMTIxODE6W1szNTg5NV0sMjU2XSwxMjE4MjpbWzM1OTEwXSwyNTZdLDEyMTgzOltbMzU5MjVdLDI1Nl0sMTIxODQ6W1szNTk2MF0sMjU2XSwxMjE4NTpbWzM1OTk3XSwyNTZdLDEyMTg2OltbMzYxOTZdLDI1Nl0sMTIxODc6W1szNjIwOF0sMjU2XSwxMjE4ODpbWzM2Mjc1XSwyNTZdLDEyMTg5OltbMzY1MjNdLDI1Nl0sMTIxOTA6W1szNjU1NF0sMjU2XSwxMjE5MTpbWzM2NzYzXSwyNTZdLDEyMTkyOltbMzY3ODRdLDI1Nl0sMTIxOTM6W1szNjc4OV0sMjU2XSwxMjE5NDpbWzM3MDA5XSwyNTZdLDEyMTk1OltbMzcxOTNdLDI1Nl0sMTIxOTY6W1szNzMxOF0sMjU2XSwxMjE5NzpbWzM3MzI0XSwyNTZdLDEyMTk4OltbMzczMjldLDI1Nl0sMTIxOTk6W1szODI2M10sMjU2XSwxMjIwMDpbWzM4MjcyXSwyNTZdLDEyMjAxOltbMzg0MjhdLDI1Nl0sMTIyMDI6W1szODU4Ml0sMjU2XSwxMjIwMzpbWzM4NTg1XSwyNTZdLDEyMjA0OltbMzg2MzJdLDI1Nl0sMTIyMDU6W1szODczN10sMjU2XSwxMjIwNjpbWzM4NzUwXSwyNTZdLDEyMjA3OltbMzg3NTRdLDI1Nl0sMTIyMDg6W1szODc2MV0sMjU2XSwxMjIwOTpbWzM4ODU5XSwyNTZdLDEyMjEwOltbMzg4OTNdLDI1Nl0sMTIyMTE6W1szODg5OV0sMjU2XSwxMjIxMjpbWzM4OTEzXSwyNTZdLDEyMjEzOltbMzkwODBdLDI1Nl0sMTIyMTQ6W1szOTEzMV0sMjU2XSwxMjIxNTpbWzM5MTM1XSwyNTZdLDEyMjE2OltbMzkzMThdLDI1Nl0sMTIyMTc6W1szOTMyMV0sMjU2XSwxMjIxODpbWzM5MzQwXSwyNTZdLDEyMjE5OltbMzk1OTJdLDI1Nl0sMTIyMjA6W1szOTY0MF0sMjU2XSwxMjIyMTpbWzM5NjQ3XSwyNTZdLDEyMjIyOltbMzk3MTddLDI1Nl0sMTIyMjM6W1szOTcyN10sMjU2XSwxMjIyNDpbWzM5NzMwXSwyNTZdLDEyMjI1OltbMzk3NDBdLDI1Nl0sMTIyMjY6W1szOTc3MF0sMjU2XSwxMjIyNzpbWzQwMTY1XSwyNTZdLDEyMjI4OltbNDA1NjVdLDI1Nl0sMTIyMjk6W1s0MDU3NV0sMjU2XSwxMjIzMDpbWzQwNjEzXSwyNTZdLDEyMjMxOltbNDA2MzVdLDI1Nl0sMTIyMzI6W1s0MDY0M10sMjU2XSwxMjIzMzpbWzQwNjUzXSwyNTZdLDEyMjM0OltbNDA2NTddLDI1Nl0sMTIyMzU6W1s0MDY5N10sMjU2XSwxMjIzNjpbWzQwNzAxXSwyNTZdLDEyMjM3OltbNDA3MThdLDI1Nl0sMTIyMzg6W1s0MDcyM10sMjU2XSwxMjIzOTpbWzQwNzM2XSwyNTZdLDEyMjQwOltbNDA3NjNdLDI1Nl0sMTIyNDE6W1s0MDc3OF0sMjU2XSwxMjI0MjpbWzQwNzg2XSwyNTZdLDEyMjQzOltbNDA4NDVdLDI1Nl0sMTIyNDQ6W1s0MDg2MF0sMjU2XSwxMjI0NTpbWzQwODY0XSwyNTZdfSwKMTIyODg6ezEyMjg4OltbMzJdLDI1Nl0sMTIzMzA6WywyMThdLDEyMzMxOlssMjI4XSwxMjMzMjpbLDIzMl0sMTIzMzM6WywyMjJdLDEyMzM0OlssMjI0XSwxMjMzNTpbLDIyNF0sMTIzNDI6W1sxMjMwNl0sMjU2XSwxMjM0NDpbWzIxMzEzXSwyNTZdLDEyMzQ1OltbMjEzMTZdLDI1Nl0sMTIzNDY6W1syMTMxN10sMjU2XSwxMjM1ODpbLCx7MTI0NDE6MTI0MzZ9XSwxMjM2MzpbLCx7MTI0NDE6MTIzNjR9XSwxMjM2NDpbWzEyMzYzLDEyNDQxXV0sMTIzNjU6WywsezEyNDQxOjEyMzY2fV0sMTIzNjY6W1sxMjM2NSwxMjQ0MV1dLDEyMzY3OlssLHsxMjQ0MToxMjM2OH1dLDEyMzY4OltbMTIzNjcsMTI0NDFdXSwxMjM2OTpbLCx7MTI0NDE6MTIzNzB9XSwxMjM3MDpbWzEyMzY5LDEyNDQxXV0sMTIzNzE6WywsezEyNDQxOjEyMzcyfV0sMTIzNzI6W1sxMjM3MSwxMjQ0MV1dLDEyMzczOlssLHsxMjQ0MToxMjM3NH1dLDEyMzc0OltbMTIzNzMsMTI0NDFdXSwxMjM3NTpbLCx7MTI0NDE6MTIzNzZ9XSwxMjM3NjpbWzEyMzc1LDEyNDQxXV0sMTIzNzc6WywsezEyNDQxOjEyMzc4fV0sMTIzNzg6W1sxMjM3NywxMjQ0MV1dLDEyMzc5OlssLHsxMjQ0MToxMjM4MH1dLDEyMzgwOltbMTIzNzksMTI0NDFdXSwxMjM4MTpbLCx7MTI0NDE6MTIzODJ9XSwxMjM4MjpbWzEyMzgxLDEyNDQxXV0sMTIzODM6WywsezEyNDQxOjEyMzg0fV0sMTIzODQ6W1sxMjM4MywxMjQ0MV1dLDEyMzg1OlssLHsxMjQ0MToxMjM4Nn1dLDEyMzg2OltbMTIzODUsMTI0NDFdXSwxMjM4ODpbLCx7MTI0NDE6MTIzODl9XSwxMjM4OTpbWzEyMzg4LDEyNDQxXV0sMTIzOTA6WywsezEyNDQxOjEyMzkxfV0sMTIzOTE6W1sxMjM5MCwxMjQ0MV1dLDEyMzkyOlssLHsxMjQ0MToxMjM5M31dLDEyMzkzOltbMTIzOTIsMTI0NDFdXSwxMjM5OTpbLCx7MTI0NDE6MTI0MDAsMTI0NDI6MTI0MDF9XSwxMjQwMDpbWzEyMzk5LDEyNDQxXV0sMTI0MDE6W1sxMjM5OSwxMjQ0Ml1dLDEyNDAyOlssLHsxMjQ0MToxMjQwMywxMjQ0MjoxMjQwNH1dLDEyNDAzOltbMTI0MDIsMTI0NDFdXSwxMjQwNDpbWzEyNDAyLDEyNDQyXV0sMTI0MDU6WywsezEyNDQxOjEyNDA2LDEyNDQyOjEyNDA3fV0sMTI0MDY6W1sxMjQwNSwxMjQ0MV1dLDEyNDA3OltbMTI0MDUsMTI0NDJdXSwxMjQwODpbLCx7MTI0NDE6MTI0MDksMTI0NDI6MTI0MTB9XSwxMjQwOTpbWzEyNDA4LDEyNDQxXV0sMTI0MTA6W1sxMjQwOCwxMjQ0Ml1dLDEyNDExOlssLHsxMjQ0MToxMjQxMiwxMjQ0MjoxMjQxM31dLDEyNDEyOltbMTI0MTEsMTI0NDFdXSwxMjQxMzpbWzEyNDExLDEyNDQyXV0sMTI0MzY6W1sxMjM1OCwxMjQ0MV1dLDEyNDQxOlssOF0sMTI0NDI6Wyw4XSwxMjQ0MzpbWzMyLDEyNDQxXSwyNTZdLDEyNDQ0OltbMzIsMTI0NDJdLDI1Nl0sMTI0NDU6WywsezEyNDQxOjEyNDQ2fV0sMTI0NDY6W1sxMjQ0NSwxMjQ0MV1dLDEyNDQ3OltbMTI0MjQsMTI0MjZdLDI1Nl0sMTI0NTQ6WywsezEyNDQxOjEyNTMyfV0sMTI0NTk6WywsezEyNDQxOjEyNDYwfV0sMTI0NjA6W1sxMjQ1OSwxMjQ0MV1dLDEyNDYxOlssLHsxMjQ0MToxMjQ2Mn1dLDEyNDYyOltbMTI0NjEsMTI0NDFdXSwxMjQ2MzpbLCx7MTI0NDE6MTI0NjR9XSwxMjQ2NDpbWzEyNDYzLDEyNDQxXV0sMTI0NjU6WywsezEyNDQxOjEyNDY2fV0sMTI0NjY6W1sxMjQ2NSwxMjQ0MV1dLDEyNDY3OlssLHsxMjQ0MToxMjQ2OH1dLDEyNDY4OltbMTI0NjcsMTI0NDFdXSwxMjQ2OTpbLCx7MTI0NDE6MTI0NzB9XSwxMjQ3MDpbWzEyNDY5LDEyNDQxXV0sMTI0NzE6WywsezEyNDQxOjEyNDcyfV0sMTI0NzI6W1sxMjQ3MSwxMjQ0MV1dLDEyNDczOlssLHsxMjQ0MToxMjQ3NH1dLDEyNDc0OltbMTI0NzMsMTI0NDFdXSwxMjQ3NTpbLCx7MTI0NDE6MTI0NzZ9XSwxMjQ3NjpbWzEyNDc1LDEyNDQxXV0sMTI0Nzc6WywsezEyNDQxOjEyNDc4fV0sMTI0Nzg6W1sxMjQ3NywxMjQ0MV1dLDEyNDc5OlssLHsxMjQ0MToxMjQ4MH1dLDEyNDgwOltbMTI0NzksMTI0NDFdXSwxMjQ4MTpbLCx7MTI0NDE6MTI0ODJ9XSwxMjQ4MjpbWzEyNDgxLDEyNDQxXV0sMTI0ODQ6WywsezEyNDQxOjEyNDg1fV0sMTI0ODU6W1sxMjQ4NCwxMjQ0MV1dLDEyNDg2OlssLHsxMjQ0MToxMjQ4N31dLDEyNDg3OltbMTI0ODYsMTI0NDFdXSwxMjQ4ODpbLCx7MTI0NDE6MTI0ODl9XSwxMjQ4OTpbWzEyNDg4LDEyNDQxXV0sMTI0OTU6WywsezEyNDQxOjEyNDk2LDEyNDQyOjEyNDk3fV0sMTI0OTY6W1sxMjQ5NSwxMjQ0MV1dLDEyNDk3OltbMTI0OTUsMTI0NDJdXSwxMjQ5ODpbLCx7MTI0NDE6MTI0OTksMTI0NDI6MTI1MDB9XSwxMjQ5OTpbWzEyNDk4LDEyNDQxXV0sMTI1MDA6W1sxMjQ5OCwxMjQ0Ml1dLDEyNTAxOlssLHsxMjQ0MToxMjUwMiwxMjQ0MjoxMjUwM31dLDEyNTAyOltbMTI1MDEsMTI0NDFdXSwxMjUwMzpbWzEyNTAxLDEyNDQyXV0sMTI1MDQ6WywsezEyNDQxOjEyNTA1LDEyNDQyOjEyNTA2fV0sMTI1MDU6W1sxMjUwNCwxMjQ0MV1dLDEyNTA2OltbMTI1MDQsMTI0NDJdXSwxMjUwNzpbLCx7MTI0NDE6MTI1MDgsMTI0NDI6MTI1MDl9XSwxMjUwODpbWzEyNTA3LDEyNDQxXV0sMTI1MDk6W1sxMjUwNywxMjQ0Ml1dLDEyNTI3OlssLHsxMjQ0MToxMjUzNX1dLDEyNTI4OlssLHsxMjQ0MToxMjUzNn1dLDEyNTI5OlssLHsxMjQ0MToxMjUzN31dLDEyNTMwOlssLHsxMjQ0MToxMjUzOH1dLDEyNTMyOltbMTI0NTQsMTI0NDFdXSwxMjUzNTpbWzEyNTI3LDEyNDQxXV0sMTI1MzY6W1sxMjUyOCwxMjQ0MV1dLDEyNTM3OltbMTI1MjksMTI0NDFdXSwxMjUzODpbWzEyNTMwLDEyNDQxXV0sMTI1NDE6WywsezEyNDQxOjEyNTQyfV0sMTI1NDI6W1sxMjU0MSwxMjQ0MV1dLDEyNTQzOltbMTI0NjcsMTI0ODhdLDI1Nl19LAoxMjU0NDp7MTI1OTM6W1s0MzUyXSwyNTZdLDEyNTk0OltbNDM1M10sMjU2XSwxMjU5NTpbWzQ1MjJdLDI1Nl0sMTI1OTY6W1s0MzU0XSwyNTZdLDEyNTk3OltbNDUyNF0sMjU2XSwxMjU5ODpbWzQ1MjVdLDI1Nl0sMTI1OTk6W1s0MzU1XSwyNTZdLDEyNjAwOltbNDM1Nl0sMjU2XSwxMjYwMTpbWzQzNTddLDI1Nl0sMTI2MDI6W1s0NTI4XSwyNTZdLDEyNjAzOltbNDUyOV0sMjU2XSwxMjYwNDpbWzQ1MzBdLDI1Nl0sMTI2MDU6W1s0NTMxXSwyNTZdLDEyNjA2OltbNDUzMl0sMjU2XSwxMjYwNzpbWzQ1MzNdLDI1Nl0sMTI2MDg6W1s0Mzc4XSwyNTZdLDEyNjA5OltbNDM1OF0sMjU2XSwxMjYxMDpbWzQzNTldLDI1Nl0sMTI2MTE6W1s0MzYwXSwyNTZdLDEyNjEyOltbNDM4NV0sMjU2XSwxMjYxMzpbWzQzNjFdLDI1Nl0sMTI2MTQ6W1s0MzYyXSwyNTZdLDEyNjE1OltbNDM2M10sMjU2XSwxMjYxNjpbWzQzNjRdLDI1Nl0sMTI2MTc6W1s0MzY1XSwyNTZdLDEyNjE4OltbNDM2Nl0sMjU2XSwxMjYxOTpbWzQzNjddLDI1Nl0sMTI2MjA6W1s0MzY4XSwyNTZdLDEyNjIxOltbNDM2OV0sMjU2XSwxMjYyMjpbWzQzNzBdLDI1Nl0sMTI2MjM6W1s0NDQ5XSwyNTZdLDEyNjI0OltbNDQ1MF0sMjU2XSwxMjYyNTpbWzQ0NTFdLDI1Nl0sMTI2MjY6W1s0NDUyXSwyNTZdLDEyNjI3OltbNDQ1M10sMjU2XSwxMjYyODpbWzQ0NTRdLDI1Nl0sMTI2Mjk6W1s0NDU1XSwyNTZdLDEyNjMwOltbNDQ1Nl0sMjU2XSwxMjYzMTpbWzQ0NTddLDI1Nl0sMTI2MzI6W1s0NDU4XSwyNTZdLDEyNjMzOltbNDQ1OV0sMjU2XSwxMjYzNDpbWzQ0NjBdLDI1Nl0sMTI2MzU6W1s0NDYxXSwyNTZdLDEyNjM2OltbNDQ2Ml0sMjU2XSwxMjYzNzpbWzQ0NjNdLDI1Nl0sMTI2Mzg6W1s0NDY0XSwyNTZdLDEyNjM5OltbNDQ2NV0sMjU2XSwxMjY0MDpbWzQ0NjZdLDI1Nl0sMTI2NDE6W1s0NDY3XSwyNTZdLDEyNjQyOltbNDQ2OF0sMjU2XSwxMjY0MzpbWzQ0NjldLDI1Nl0sMTI2NDQ6W1s0NDQ4XSwyNTZdLDEyNjQ1OltbNDM3Ml0sMjU2XSwxMjY0NjpbWzQzNzNdLDI1Nl0sMTI2NDc6W1s0NTUxXSwyNTZdLDEyNjQ4OltbNDU1Ml0sMjU2XSwxMjY0OTpbWzQ1NTZdLDI1Nl0sMTI2NTA6W1s0NTU4XSwyNTZdLDEyNjUxOltbNDU2M10sMjU2XSwxMjY1MjpbWzQ1NjddLDI1Nl0sMTI2NTM6W1s0NTY5XSwyNTZdLDEyNjU0OltbNDM4MF0sMjU2XSwxMjY1NTpbWzQ1NzNdLDI1Nl0sMTI2NTY6W1s0NTc1XSwyNTZdLDEyNjU3OltbNDM4MV0sMjU2XSwxMjY1ODpbWzQzODJdLDI1Nl0sMTI2NTk6W1s0Mzg0XSwyNTZdLDEyNjYwOltbNDM4Nl0sMjU2XSwxMjY2MTpbWzQzODddLDI1Nl0sMTI2NjI6W1s0MzkxXSwyNTZdLDEyNjYzOltbNDM5M10sMjU2XSwxMjY2NDpbWzQzOTVdLDI1Nl0sMTI2NjU6W1s0Mzk2XSwyNTZdLDEyNjY2OltbNDM5N10sMjU2XSwxMjY2NzpbWzQzOThdLDI1Nl0sMTI2Njg6W1s0Mzk5XSwyNTZdLDEyNjY5OltbNDQwMl0sMjU2XSwxMjY3MDpbWzQ0MDZdLDI1Nl0sMTI2NzE6W1s0NDE2XSwyNTZdLDEyNjcyOltbNDQyM10sMjU2XSwxMjY3MzpbWzQ0MjhdLDI1Nl0sMTI2NzQ6W1s0NTkzXSwyNTZdLDEyNjc1OltbNDU5NF0sMjU2XSwxMjY3NjpbWzQ0MzldLDI1Nl0sMTI2Nzc6W1s0NDQwXSwyNTZdLDEyNjc4OltbNDQ0MV0sMjU2XSwxMjY3OTpbWzQ0ODRdLDI1Nl0sMTI2ODA6W1s0NDg1XSwyNTZdLDEyNjgxOltbNDQ4OF0sMjU2XSwxMjY4MjpbWzQ0OTddLDI1Nl0sMTI2ODM6W1s0NDk4XSwyNTZdLDEyNjg0OltbNDUwMF0sMjU2XSwxMjY4NTpbWzQ1MTBdLDI1Nl0sMTI2ODY6W1s0NTEzXSwyNTZdLDEyNjkwOltbMTk5NjhdLDI1Nl0sMTI2OTE6W1syMDEwOF0sMjU2XSwxMjY5MjpbWzE5OTc3XSwyNTZdLDEyNjkzOltbMjIyMzVdLDI1Nl0sMTI2OTQ6W1sxOTk3OF0sMjU2XSwxMjY5NTpbWzIwMDEzXSwyNTZdLDEyNjk2OltbMTk5NzldLDI1Nl0sMTI2OTc6W1szMDAwMl0sMjU2XSwxMjY5ODpbWzIwMDU3XSwyNTZdLDEyNjk5OltbMTk5OTNdLDI1Nl0sMTI3MDA6W1sxOTk2OV0sMjU2XSwxMjcwMTpbWzIyODI1XSwyNTZdLDEyNzAyOltbMjIzMjBdLDI1Nl0sMTI3MDM6W1syMDE1NF0sMjU2XX0sCjEyODAwOnsxMjgwMDpbWzQwLDQzNTIsNDFdLDI1Nl0sMTI4MDE6W1s0MCw0MzU0LDQxXSwyNTZdLDEyODAyOltbNDAsNDM1NSw0MV0sMjU2XSwxMjgwMzpbWzQwLDQzNTcsNDFdLDI1Nl0sMTI4MDQ6W1s0MCw0MzU4LDQxXSwyNTZdLDEyODA1OltbNDAsNDM1OSw0MV0sMjU2XSwxMjgwNjpbWzQwLDQzNjEsNDFdLDI1Nl0sMTI4MDc6W1s0MCw0MzYzLDQxXSwyNTZdLDEyODA4OltbNDAsNDM2NCw0MV0sMjU2XSwxMjgwOTpbWzQwLDQzNjYsNDFdLDI1Nl0sMTI4MTA6W1s0MCw0MzY3LDQxXSwyNTZdLDEyODExOltbNDAsNDM2OCw0MV0sMjU2XSwxMjgxMjpbWzQwLDQzNjksNDFdLDI1Nl0sMTI4MTM6W1s0MCw0MzcwLDQxXSwyNTZdLDEyODE0OltbNDAsNDM1Miw0NDQ5LDQxXSwyNTZdLDEyODE1OltbNDAsNDM1NCw0NDQ5LDQxXSwyNTZdLDEyODE2OltbNDAsNDM1NSw0NDQ5LDQxXSwyNTZdLDEyODE3OltbNDAsNDM1Nyw0NDQ5LDQxXSwyNTZdLDEyODE4OltbNDAsNDM1OCw0NDQ5LDQxXSwyNTZdLDEyODE5OltbNDAsNDM1OSw0NDQ5LDQxXSwyNTZdLDEyODIwOltbNDAsNDM2MSw0NDQ5LDQxXSwyNTZdLDEyODIxOltbNDAsNDM2Myw0NDQ5LDQxXSwyNTZdLDEyODIyOltbNDAsNDM2NCw0NDQ5LDQxXSwyNTZdLDEyODIzOltbNDAsNDM2Niw0NDQ5LDQxXSwyNTZdLDEyODI0OltbNDAsNDM2Nyw0NDQ5LDQxXSwyNTZdLDEyODI1OltbNDAsNDM2OCw0NDQ5LDQxXSwyNTZdLDEyODI2OltbNDAsNDM2OSw0NDQ5LDQxXSwyNTZdLDEyODI3OltbNDAsNDM3MCw0NDQ5LDQxXSwyNTZdLDEyODI4OltbNDAsNDM2NCw0NDYyLDQxXSwyNTZdLDEyODI5OltbNDAsNDM2Myw0NDU3LDQzNjQsNDQ1Myw0NTIzLDQxXSwyNTZdLDEyODMwOltbNDAsNDM2Myw0NDU3LDQzNzAsNDQ2Miw0MV0sMjU2XSwxMjgzMjpbWzQwLDE5OTY4LDQxXSwyNTZdLDEyODMzOltbNDAsMjAxMDgsNDFdLDI1Nl0sMTI4MzQ6W1s0MCwxOTk3Nyw0MV0sMjU2XSwxMjgzNTpbWzQwLDIyMjM1LDQxXSwyNTZdLDEyODM2OltbNDAsMjAxMTYsNDFdLDI1Nl0sMTI4Mzc6W1s0MCwyMDg0NSw0MV0sMjU2XSwxMjgzODpbWzQwLDE5OTcxLDQxXSwyNTZdLDEyODM5OltbNDAsMjA4NDMsNDFdLDI1Nl0sMTI4NDA6W1s0MCwyMDA2MSw0MV0sMjU2XSwxMjg0MTpbWzQwLDIxMzEzLDQxXSwyNTZdLDEyODQyOltbNDAsMjYzNzYsNDFdLDI1Nl0sMTI4NDM6W1s0MCwyODc3OSw0MV0sMjU2XSwxMjg0NDpbWzQwLDI3NzAwLDQxXSwyNTZdLDEyODQ1OltbNDAsMjY0MDgsNDFdLDI1Nl0sMTI4NDY6W1s0MCwzNzMyOSw0MV0sMjU2XSwxMjg0NzpbWzQwLDIyMzAzLDQxXSwyNTZdLDEyODQ4OltbNDAsMjYwODUsNDFdLDI1Nl0sMTI4NDk6W1s0MCwyNjY2Niw0MV0sMjU2XSwxMjg1MDpbWzQwLDI2Mzc3LDQxXSwyNTZdLDEyODUxOltbNDAsMzEwMzgsNDFdLDI1Nl0sMTI4NTI6W1s0MCwyMTUxNyw0MV0sMjU2XSwxMjg1MzpbWzQwLDI5MzA1LDQxXSwyNTZdLDEyODU0OltbNDAsMzYwMDEsNDFdLDI1Nl0sMTI4NTU6W1s0MCwzMTA2OSw0MV0sMjU2XSwxMjg1NjpbWzQwLDIxMTcyLDQxXSwyNTZdLDEyODU3OltbNDAsMjAxOTUsNDFdLDI1Nl0sMTI4NTg6W1s0MCwyMTYyOCw0MV0sMjU2XSwxMjg1OTpbWzQwLDIzMzk4LDQxXSwyNTZdLDEyODYwOltbNDAsMzA0MzUsNDFdLDI1Nl0sMTI4NjE6W1s0MCwyMDIyNSw0MV0sMjU2XSwxMjg2MjpbWzQwLDM2MDM5LDQxXSwyNTZdLDEyODYzOltbNDAsMjEzMzIsNDFdLDI1Nl0sMTI4NjQ6W1s0MCwzMTA4NSw0MV0sMjU2XSwxMjg2NTpbWzQwLDIwMjQxLDQxXSwyNTZdLDEyODY2OltbNDAsMzMyNTgsNDFdLDI1Nl0sMTI4Njc6W1s0MCwzMzI2Nyw0MV0sMjU2XSwxMjg2ODpbWzIxODM5XSwyNTZdLDEyODY5OltbMjQxODhdLDI1Nl0sMTI4NzA6W1syNTk5MV0sMjU2XSwxMjg3MTpbWzMxNjMxXSwyNTZdLDEyODgwOltbODAsODQsNjldLDI1Nl0sMTI4ODE6W1s1MCw0OV0sMjU2XSwxMjg4MjpbWzUwLDUwXSwyNTZdLDEyODgzOltbNTAsNTFdLDI1Nl0sMTI4ODQ6W1s1MCw1Ml0sMjU2XSwxMjg4NTpbWzUwLDUzXSwyNTZdLDEyODg2OltbNTAsNTRdLDI1Nl0sMTI4ODc6W1s1MCw1NV0sMjU2XSwxMjg4ODpbWzUwLDU2XSwyNTZdLDEyODg5OltbNTAsNTddLDI1Nl0sMTI4OTA6W1s1MSw0OF0sMjU2XSwxMjg5MTpbWzUxLDQ5XSwyNTZdLDEyODkyOltbNTEsNTBdLDI1Nl0sMTI4OTM6W1s1MSw1MV0sMjU2XSwxMjg5NDpbWzUxLDUyXSwyNTZdLDEyODk1OltbNTEsNTNdLDI1Nl0sMTI4OTY6W1s0MzUyXSwyNTZdLDEyODk3OltbNDM1NF0sMjU2XSwxMjg5ODpbWzQzNTVdLDI1Nl0sMTI4OTk6W1s0MzU3XSwyNTZdLDEyOTAwOltbNDM1OF0sMjU2XSwxMjkwMTpbWzQzNTldLDI1Nl0sMTI5MDI6W1s0MzYxXSwyNTZdLDEyOTAzOltbNDM2M10sMjU2XSwxMjkwNDpbWzQzNjRdLDI1Nl0sMTI5MDU6W1s0MzY2XSwyNTZdLDEyOTA2OltbNDM2N10sMjU2XSwxMjkwNzpbWzQzNjhdLDI1Nl0sMTI5MDg6W1s0MzY5XSwyNTZdLDEyOTA5OltbNDM3MF0sMjU2XSwxMjkxMDpbWzQzNTIsNDQ0OV0sMjU2XSwxMjkxMTpbWzQzNTQsNDQ0OV0sMjU2XSwxMjkxMjpbWzQzNTUsNDQ0OV0sMjU2XSwxMjkxMzpbWzQzNTcsNDQ0OV0sMjU2XSwxMjkxNDpbWzQzNTgsNDQ0OV0sMjU2XSwxMjkxNTpbWzQzNTksNDQ0OV0sMjU2XSwxMjkxNjpbWzQzNjEsNDQ0OV0sMjU2XSwxMjkxNzpbWzQzNjMsNDQ0OV0sMjU2XSwxMjkxODpbWzQzNjQsNDQ0OV0sMjU2XSwxMjkxOTpbWzQzNjYsNDQ0OV0sMjU2XSwxMjkyMDpbWzQzNjcsNDQ0OV0sMjU2XSwxMjkyMTpbWzQzNjgsNDQ0OV0sMjU2XSwxMjkyMjpbWzQzNjksNDQ0OV0sMjU2XSwxMjkyMzpbWzQzNzAsNDQ0OV0sMjU2XSwxMjkyNDpbWzQzNjYsNDQ0OSw0NTM1LDQzNTIsNDQ1N10sMjU2XSwxMjkyNTpbWzQzNjQsNDQ2Miw0MzYzLDQ0NjhdLDI1Nl0sMTI5MjY6W1s0MzYzLDQ0NjJdLDI1Nl0sMTI5Mjg6W1sxOTk2OF0sMjU2XSwxMjkyOTpbWzIwMTA4XSwyNTZdLDEyOTMwOltbMTk5NzddLDI1Nl0sMTI5MzE6W1syMjIzNV0sMjU2XSwxMjkzMjpbWzIwMTE2XSwyNTZdLDEyOTMzOltbMjA4NDVdLDI1Nl0sMTI5MzQ6W1sxOTk3MV0sMjU2XSwxMjkzNTpbWzIwODQzXSwyNTZdLDEyOTM2OltbMjAwNjFdLDI1Nl0sMTI5Mzc6W1syMTMxM10sMjU2XSwxMjkzODpbWzI2Mzc2XSwyNTZdLDEyOTM5OltbMjg3NzldLDI1Nl0sMTI5NDA6W1syNzcwMF0sMjU2XSwxMjk0MTpbWzI2NDA4XSwyNTZdLDEyOTQyOltbMzczMjldLDI1Nl0sMTI5NDM6W1syMjMwM10sMjU2XSwxMjk0NDpbWzI2MDg1XSwyNTZdLDEyOTQ1OltbMjY2NjZdLDI1Nl0sMTI5NDY6W1syNjM3N10sMjU2XSwxMjk0NzpbWzMxMDM4XSwyNTZdLDEyOTQ4OltbMjE1MTddLDI1Nl0sMTI5NDk6W1syOTMwNV0sMjU2XSwxMjk1MDpbWzM2MDAxXSwyNTZdLDEyOTUxOltbMzEwNjldLDI1Nl0sMTI5NTI6W1syMTE3Ml0sMjU2XSwxMjk1MzpbWzMxMTkyXSwyNTZdLDEyOTU0OltbMzAwMDddLDI1Nl0sMTI5NTU6W1syMjg5OV0sMjU2XSwxMjk1NjpbWzM2OTY5XSwyNTZdLDEyOTU3OltbMjA3NzhdLDI1Nl0sMTI5NTg6W1syMTM2MF0sMjU2XSwxMjk1OTpbWzI3ODgwXSwyNTZdLDEyOTYwOltbMzg5MTddLDI1Nl0sMTI5NjE6W1syMDI0MV0sMjU2XSwxMjk2MjpbWzIwODg5XSwyNTZdLDEyOTYzOltbMjc0OTFdLDI1Nl0sMTI5NjQ6W1sxOTk3OF0sMjU2XSwxMjk2NTpbWzIwMDEzXSwyNTZdLDEyOTY2OltbMTk5NzldLDI1Nl0sMTI5Njc6W1syNDAzOF0sMjU2XSwxMjk2ODpbWzIxNDkxXSwyNTZdLDEyOTY5OltbMjEzMDddLDI1Nl0sMTI5NzA6W1syMzQ0N10sMjU2XSwxMjk3MTpbWzIzMzk4XSwyNTZdLDEyOTcyOltbMzA0MzVdLDI1Nl0sMTI5NzM6W1syMDIyNV0sMjU2XSwxMjk3NDpbWzM2MDM5XSwyNTZdLDEyOTc1OltbMjEzMzJdLDI1Nl0sMTI5NzY6W1syMjgxMl0sMjU2XSwxMjk3NzpbWzUxLDU0XSwyNTZdLDEyOTc4OltbNTEsNTVdLDI1Nl0sMTI5Nzk6W1s1MSw1Nl0sMjU2XSwxMjk4MDpbWzUxLDU3XSwyNTZdLDEyOTgxOltbNTIsNDhdLDI1Nl0sMTI5ODI6W1s1Miw0OV0sMjU2XSwxMjk4MzpbWzUyLDUwXSwyNTZdLDEyOTg0OltbNTIsNTFdLDI1Nl0sMTI5ODU6W1s1Miw1Ml0sMjU2XSwxMjk4NjpbWzUyLDUzXSwyNTZdLDEyOTg3OltbNTIsNTRdLDI1Nl0sMTI5ODg6W1s1Miw1NV0sMjU2XSwxMjk4OTpbWzUyLDU2XSwyNTZdLDEyOTkwOltbNTIsNTddLDI1Nl0sMTI5OTE6W1s1Myw0OF0sMjU2XSwxMjk5MjpbWzQ5LDI2Mzc2XSwyNTZdLDEyOTkzOltbNTAsMjYzNzZdLDI1Nl0sMTI5OTQ6W1s1MSwyNjM3Nl0sMjU2XSwxMjk5NTpbWzUyLDI2Mzc2XSwyNTZdLDEyOTk2OltbNTMsMjYzNzZdLDI1Nl0sMTI5OTc6W1s1NCwyNjM3Nl0sMjU2XSwxMjk5ODpbWzU1LDI2Mzc2XSwyNTZdLDEyOTk5OltbNTYsMjYzNzZdLDI1Nl0sMTMwMDA6W1s1NywyNjM3Nl0sMjU2XSwxMzAwMTpbWzQ5LDQ4LDI2Mzc2XSwyNTZdLDEzMDAyOltbNDksNDksMjYzNzZdLDI1Nl0sMTMwMDM6W1s0OSw1MCwyNjM3Nl0sMjU2XSwxMzAwNDpbWzcyLDEwM10sMjU2XSwxMzAwNTpbWzEwMSwxMTQsMTAzXSwyNTZdLDEzMDA2OltbMTAxLDg2XSwyNTZdLDEzMDA3OltbNzYsODQsNjhdLDI1Nl0sMTMwMDg6W1sxMjQ1MF0sMjU2XSwxMzAwOTpbWzEyNDUyXSwyNTZdLDEzMDEwOltbMTI0NTRdLDI1Nl0sMTMwMTE6W1sxMjQ1Nl0sMjU2XSwxMzAxMjpbWzEyNDU4XSwyNTZdLDEzMDEzOltbMTI0NTldLDI1Nl0sMTMwMTQ6W1sxMjQ2MV0sMjU2XSwxMzAxNTpbWzEyNDYzXSwyNTZdLDEzMDE2OltbMTI0NjVdLDI1Nl0sMTMwMTc6W1sxMjQ2N10sMjU2XSwxMzAxODpbWzEyNDY5XSwyNTZdLDEzMDE5OltbMTI0NzFdLDI1Nl0sMTMwMjA6W1sxMjQ3M10sMjU2XSwxMzAyMTpbWzEyNDc1XSwyNTZdLDEzMDIyOltbMTI0NzddLDI1Nl0sMTMwMjM6W1sxMjQ3OV0sMjU2XSwxMzAyNDpbWzEyNDgxXSwyNTZdLDEzMDI1OltbMTI0ODRdLDI1Nl0sMTMwMjY6W1sxMjQ4Nl0sMjU2XSwxMzAyNzpbWzEyNDg4XSwyNTZdLDEzMDI4OltbMTI0OTBdLDI1Nl0sMTMwMjk6W1sxMjQ5MV0sMjU2XSwxMzAzMDpbWzEyNDkyXSwyNTZdLDEzMDMxOltbMTI0OTNdLDI1Nl0sMTMwMzI6W1sxMjQ5NF0sMjU2XSwxMzAzMzpbWzEyNDk1XSwyNTZdLDEzMDM0OltbMTI0OThdLDI1Nl0sMTMwMzU6W1sxMjUwMV0sMjU2XSwxMzAzNjpbWzEyNTA0XSwyNTZdLDEzMDM3OltbMTI1MDddLDI1Nl0sMTMwMzg6W1sxMjUxMF0sMjU2XSwxMzAzOTpbWzEyNTExXSwyNTZdLDEzMDQwOltbMTI1MTJdLDI1Nl0sMTMwNDE6W1sxMjUxM10sMjU2XSwxMzA0MjpbWzEyNTE0XSwyNTZdLDEzMDQzOltbMTI1MTZdLDI1Nl0sMTMwNDQ6W1sxMjUxOF0sMjU2XSwxMzA0NTpbWzEyNTIwXSwyNTZdLDEzMDQ2OltbMTI1MjFdLDI1Nl0sMTMwNDc6W1sxMjUyMl0sMjU2XSwxMzA0ODpbWzEyNTIzXSwyNTZdLDEzMDQ5OltbMTI1MjRdLDI1Nl0sMTMwNTA6W1sxMjUyNV0sMjU2XSwxMzA1MTpbWzEyNTI3XSwyNTZdLDEzMDUyOltbMTI1MjhdLDI1Nl0sMTMwNTM6W1sxMjUyOV0sMjU2XSwxMzA1NDpbWzEyNTMwXSwyNTZdfSwKMTMwNTY6ezEzMDU2OltbMTI0NTAsMTI0OTcsMTI1NDAsMTI0ODhdLDI1Nl0sMTMwNTc6W1sxMjQ1MCwxMjUyMywxMjUwMSwxMjQ0OV0sMjU2XSwxMzA1ODpbWzEyNDUwLDEyNTMxLDEyNTA2LDEyNDUwXSwyNTZdLDEzMDU5OltbMTI0NTAsMTI1NDAsMTI1MjNdLDI1Nl0sMTMwNjA6W1sxMjQ1MiwxMjQ5MSwxMjUzMSwxMjQ2NF0sMjU2XSwxMzA2MTpbWzEyNDUyLDEyNTMxLDEyNDgxXSwyNTZdLDEzMDYyOltbMTI0NTQsMTI0NTcsMTI1MzFdLDI1Nl0sMTMwNjM6W1sxMjQ1NiwxMjQ3MywxMjQ2MywxMjU0MCwxMjQ4OV0sMjU2XSwxMzA2NDpbWzEyNDU2LDEyNTQwLDEyNDU5LDEyNTQwXSwyNTZdLDEzMDY1OltbMTI0NTgsMTI1MzEsMTI0NzNdLDI1Nl0sMTMwNjY6W1sxMjQ1OCwxMjU0MCwxMjUxMl0sMjU2XSwxMzA2NzpbWzEyNDU5LDEyNDUyLDEyNTIyXSwyNTZdLDEzMDY4OltbMTI0NTksMTI1MjEsMTI0ODMsMTI0ODhdLDI1Nl0sMTMwNjk6W1sxMjQ1OSwxMjUyNSwxMjUyMiwxMjU0MF0sMjU2XSwxMzA3MDpbWzEyNDYwLDEyNTI1LDEyNTMxXSwyNTZdLDEzMDcxOltbMTI0NjAsMTI1MzEsMTI1MTBdLDI1Nl0sMTMwNzI6W1sxMjQ2MiwxMjQ2MF0sMjU2XSwxMzA3MzpbWzEyNDYyLDEyNDkxLDEyNTQwXSwyNTZdLDEzMDc0OltbMTI0NjEsMTI1MTcsMTI1MjIsMTI1NDBdLDI1Nl0sMTMwNzU6W1sxMjQ2MiwxMjUyMywxMjQ4MCwxMjU0MF0sMjU2XSwxMzA3NjpbWzEyNDYxLDEyNTI1XSwyNTZdLDEzMDc3OltbMTI0NjEsMTI1MjUsMTI0NjQsMTI1MjEsMTI1MTJdLDI1Nl0sMTMwNzg6W1sxMjQ2MSwxMjUyNSwxMjUxMywxMjU0MCwxMjQ4OCwxMjUyM10sMjU2XSwxMzA3OTpbWzEyNDYxLDEyNTI1LDEyNTI3LDEyNDgzLDEyNDg4XSwyNTZdLDEzMDgwOltbMTI0NjQsMTI1MjEsMTI1MTJdLDI1Nl0sMTMwODE6W1sxMjQ2NCwxMjUyMSwxMjUxMiwxMjQ4OCwxMjUzMV0sMjU2XSwxMzA4MjpbWzEyNDYzLDEyNTIzLDEyNDc2LDEyNDUyLDEyNTI1XSwyNTZdLDEzMDgzOltbMTI0NjMsMTI1MjUsMTI1NDAsMTI0OTNdLDI1Nl0sMTMwODQ6W1sxMjQ2NSwxMjU0MCwxMjQ3M10sMjU2XSwxMzA4NTpbWzEyNDY3LDEyNTIzLDEyNDkwXSwyNTZdLDEzMDg2OltbMTI0NjcsMTI1NDAsMTI1MDldLDI1Nl0sMTMwODc6W1sxMjQ2OSwxMjQ1MiwxMjQ2MywxMjUyM10sMjU2XSwxMzA4ODpbWzEyNDY5LDEyNTMxLDEyNDgxLDEyNTQwLDEyNTEyXSwyNTZdLDEzMDg5OltbMTI0NzEsMTI1MjIsMTI1MzEsMTI0NjRdLDI1Nl0sMTMwOTA6W1sxMjQ3NSwxMjUzMSwxMjQ4MV0sMjU2XSwxMzA5MTpbWzEyNDc1LDEyNTMxLDEyNDg4XSwyNTZdLDEzMDkyOltbMTI0ODAsMTI1NDAsMTI0NzNdLDI1Nl0sMTMwOTM6W1sxMjQ4NywxMjQ3MV0sMjU2XSwxMzA5NDpbWzEyNDg5LDEyNTIzXSwyNTZdLDEzMDk1OltbMTI0ODgsMTI1MzFdLDI1Nl0sMTMwOTY6W1sxMjQ5MCwxMjQ5NF0sMjU2XSwxMzA5NzpbWzEyNDk0LDEyNDgzLDEyNDg4XSwyNTZdLDEzMDk4OltbMTI0OTUsMTI0NTIsMTI0ODRdLDI1Nl0sMTMwOTk6W1sxMjQ5NywxMjU0MCwxMjQ3NSwxMjUzMSwxMjQ4OF0sMjU2XSwxMzEwMDpbWzEyNDk3LDEyNTQwLDEyNDg0XSwyNTZdLDEzMTAxOltbMTI0OTYsMTI1NDAsMTI1MjQsMTI1MjNdLDI1Nl0sMTMxMDI6W1sxMjUwMCwxMjQ1MCwxMjQ3MywxMjQ4OCwxMjUyM10sMjU2XSwxMzEwMzpbWzEyNTAwLDEyNDYzLDEyNTIzXSwyNTZdLDEzMTA0OltbMTI1MDAsMTI0NjddLDI1Nl0sMTMxMDU6W1sxMjQ5OSwxMjUyM10sMjU2XSwxMzEwNjpbWzEyNTAxLDEyNDQ5LDEyNTIxLDEyNDgzLDEyNDg5XSwyNTZdLDEzMTA3OltbMTI1MDEsMTI0NTEsMTI1NDAsMTI0ODhdLDI1Nl0sMTMxMDg6W1sxMjUwMiwxMjQ4MywxMjQ3MSwxMjQ1NSwxMjUyM10sMjU2XSwxMzEwOTpbWzEyNTAxLDEyNTIxLDEyNTMxXSwyNTZdLDEzMTEwOltbMTI1MDQsMTI0NjMsMTI0NzksMTI1NDAsMTI1MjNdLDI1Nl0sMTMxMTE6W1sxMjUwNiwxMjQ3N10sMjU2XSwxMzExMjpbWzEyNTA2LDEyNDkxLDEyNDk4XSwyNTZdLDEzMTEzOltbMTI1MDQsMTI1MjMsMTI0ODRdLDI1Nl0sMTMxMTQ6W1sxMjUwNiwxMjUzMSwxMjQ3M10sMjU2XSwxMzExNTpbWzEyNTA2LDEyNTQwLDEyNDcyXSwyNTZdLDEzMTE2OltbMTI1MDUsMTI1NDAsMTI0NzldLDI1Nl0sMTMxMTc6W1sxMjUwOSwxMjQ1MiwxMjUzMSwxMjQ4OF0sMjU2XSwxMzExODpbWzEyNTA4LDEyNTIzLDEyNDg4XSwyNTZdLDEzMTE5OltbMTI1MDcsMTI1MzFdLDI1Nl0sMTMxMjA6W1sxMjUwOSwxMjUzMSwxMjQ4OV0sMjU2XSwxMzEyMTpbWzEyNTA3LDEyNTQwLDEyNTIzXSwyNTZdLDEzMTIyOltbMTI1MDcsMTI1NDAsMTI1MzFdLDI1Nl0sMTMxMjM6W1sxMjUxMCwxMjQ1MiwxMjQ2MywxMjUyNV0sMjU2XSwxMzEyNDpbWzEyNTEwLDEyNDUyLDEyNTIzXSwyNTZdLDEzMTI1OltbMTI1MTAsMTI0ODMsMTI0OTVdLDI1Nl0sMTMxMjY6W1sxMjUxMCwxMjUyMywxMjQ2M10sMjU2XSwxMzEyNzpbWzEyNTEwLDEyNTMxLDEyNDcxLDEyNTE5LDEyNTMxXSwyNTZdLDEzMTI4OltbMTI1MTEsMTI0NjMsMTI1MjUsMTI1MzFdLDI1Nl0sMTMxMjk6W1sxMjUxMSwxMjUyMl0sMjU2XSwxMzEzMDpbWzEyNTExLDEyNTIyLDEyNDk2LDEyNTQwLDEyNTIzXSwyNTZdLDEzMTMxOltbMTI1MTMsMTI0NjBdLDI1Nl0sMTMxMzI6W1sxMjUxMywxMjQ2MCwxMjQ4OCwxMjUzMV0sMjU2XSwxMzEzMzpbWzEyNTEzLDEyNTQwLDEyNDg4LDEyNTIzXSwyNTZdLDEzMTM0OltbMTI1MTYsMTI1NDAsMTI0ODldLDI1Nl0sMTMxMzU6W1sxMjUxNiwxMjU0MCwxMjUyM10sMjU2XSwxMzEzNjpbWzEyNTE4LDEyNDUwLDEyNTMxXSwyNTZdLDEzMTM3OltbMTI1MjIsMTI0ODMsMTI0ODgsMTI1MjNdLDI1Nl0sMTMxMzg6W1sxMjUyMiwxMjUyMV0sMjU2XSwxMzEzOTpbWzEyNTIzLDEyNTAwLDEyNTQwXSwyNTZdLDEzMTQwOltbMTI1MjMsMTI1NDAsMTI1MDIsMTI1MjNdLDI1Nl0sMTMxNDE6W1sxMjUyNCwxMjUxMl0sMjU2XSwxMzE0MjpbWzEyNTI0LDEyNTMxLDEyNDg4LDEyNDY2LDEyNTMxXSwyNTZdLDEzMTQzOltbMTI1MjcsMTI0ODMsMTI0ODhdLDI1Nl0sMTMxNDQ6W1s0OCwyODg1N10sMjU2XSwxMzE0NTpbWzQ5LDI4ODU3XSwyNTZdLDEzMTQ2OltbNTAsMjg4NTddLDI1Nl0sMTMxNDc6W1s1MSwyODg1N10sMjU2XSwxMzE0ODpbWzUyLDI4ODU3XSwyNTZdLDEzMTQ5OltbNTMsMjg4NTddLDI1Nl0sMTMxNTA6W1s1NCwyODg1N10sMjU2XSwxMzE1MTpbWzU1LDI4ODU3XSwyNTZdLDEzMTUyOltbNTYsMjg4NTddLDI1Nl0sMTMxNTM6W1s1NywyODg1N10sMjU2XSwxMzE1NDpbWzQ5LDQ4LDI4ODU3XSwyNTZdLDEzMTU1OltbNDksNDksMjg4NTddLDI1Nl0sMTMxNTY6W1s0OSw1MCwyODg1N10sMjU2XSwxMzE1NzpbWzQ5LDUxLDI4ODU3XSwyNTZdLDEzMTU4OltbNDksNTIsMjg4NTddLDI1Nl0sMTMxNTk6W1s0OSw1MywyODg1N10sMjU2XSwxMzE2MDpbWzQ5LDU0LDI4ODU3XSwyNTZdLDEzMTYxOltbNDksNTUsMjg4NTddLDI1Nl0sMTMxNjI6W1s0OSw1NiwyODg1N10sMjU2XSwxMzE2MzpbWzQ5LDU3LDI4ODU3XSwyNTZdLDEzMTY0OltbNTAsNDgsMjg4NTddLDI1Nl0sMTMxNjU6W1s1MCw0OSwyODg1N10sMjU2XSwxMzE2NjpbWzUwLDUwLDI4ODU3XSwyNTZdLDEzMTY3OltbNTAsNTEsMjg4NTddLDI1Nl0sMTMxNjg6W1s1MCw1MiwyODg1N10sMjU2XSwxMzE2OTpbWzEwNCw4MCw5N10sMjU2XSwxMzE3MDpbWzEwMCw5N10sMjU2XSwxMzE3MTpbWzY1LDg1XSwyNTZdLDEzMTcyOltbOTgsOTcsMTE0XSwyNTZdLDEzMTczOltbMTExLDg2XSwyNTZdLDEzMTc0OltbMTEyLDk5XSwyNTZdLDEzMTc1OltbMTAwLDEwOV0sMjU2XSwxMzE3NjpbWzEwMCwxMDksMTc4XSwyNTZdLDEzMTc3OltbMTAwLDEwOSwxNzldLDI1Nl0sMTMxNzg6W1s3Myw4NV0sMjU2XSwxMzE3OTpbWzI0MTc5LDI1MTA0XSwyNTZdLDEzMTgwOltbMjYxNTcsMjE2NDRdLDI1Nl0sMTMxODE6W1syMjgyMywyNzQ5MV0sMjU2XSwxMzE4MjpbWzI2MTI2LDI3ODM1XSwyNTZdLDEzMTgzOltbMjY2NjYsMjQzMzUsMjAyNTAsMzEwMzhdLDI1Nl0sMTMxODQ6W1sxMTIsNjVdLDI1Nl0sMTMxODU6W1sxMTAsNjVdLDI1Nl0sMTMxODY6W1s5NTYsNjVdLDI1Nl0sMTMxODc6W1sxMDksNjVdLDI1Nl0sMTMxODg6W1sxMDcsNjVdLDI1Nl0sMTMxODk6W1s3NSw2Nl0sMjU2XSwxMzE5MDpbWzc3LDY2XSwyNTZdLDEzMTkxOltbNzEsNjZdLDI1Nl0sMTMxOTI6W1s5OSw5NywxMDhdLDI1Nl0sMTMxOTM6W1sxMDcsOTksOTcsMTA4XSwyNTZdLDEzMTk0OltbMTEyLDcwXSwyNTZdLDEzMTk1OltbMTEwLDcwXSwyNTZdLDEzMTk2OltbOTU2LDcwXSwyNTZdLDEzMTk3OltbOTU2LDEwM10sMjU2XSwxMzE5ODpbWzEwOSwxMDNdLDI1Nl0sMTMxOTk6W1sxMDcsMTAzXSwyNTZdLDEzMjAwOltbNzIsMTIyXSwyNTZdLDEzMjAxOltbMTA3LDcyLDEyMl0sMjU2XSwxMzIwMjpbWzc3LDcyLDEyMl0sMjU2XSwxMzIwMzpbWzcxLDcyLDEyMl0sMjU2XSwxMzIwNDpbWzg0LDcyLDEyMl0sMjU2XSwxMzIwNTpbWzk1Niw4NDY3XSwyNTZdLDEzMjA2OltbMTA5LDg0NjddLDI1Nl0sMTMyMDc6W1sxMDAsODQ2N10sMjU2XSwxMzIwODpbWzEwNyw4NDY3XSwyNTZdLDEzMjA5OltbMTAyLDEwOV0sMjU2XSwxMzIxMDpbWzExMCwxMDldLDI1Nl0sMTMyMTE6W1s5NTYsMTA5XSwyNTZdLDEzMjEyOltbMTA5LDEwOV0sMjU2XSwxMzIxMzpbWzk5LDEwOV0sMjU2XSwxMzIxNDpbWzEwNywxMDldLDI1Nl0sMTMyMTU6W1sxMDksMTA5LDE3OF0sMjU2XSwxMzIxNjpbWzk5LDEwOSwxNzhdLDI1Nl0sMTMyMTc6W1sxMDksMTc4XSwyNTZdLDEzMjE4OltbMTA3LDEwOSwxNzhdLDI1Nl0sMTMyMTk6W1sxMDksMTA5LDE3OV0sMjU2XSwxMzIyMDpbWzk5LDEwOSwxNzldLDI1Nl0sMTMyMjE6W1sxMDksMTc5XSwyNTZdLDEzMjIyOltbMTA3LDEwOSwxNzldLDI1Nl0sMTMyMjM6W1sxMDksODcyNSwxMTVdLDI1Nl0sMTMyMjQ6W1sxMDksODcyNSwxMTUsMTc4XSwyNTZdLDEzMjI1OltbODAsOTddLDI1Nl0sMTMyMjY6W1sxMDcsODAsOTddLDI1Nl0sMTMyMjc6W1s3Nyw4MCw5N10sMjU2XSwxMzIyODpbWzcxLDgwLDk3XSwyNTZdLDEzMjI5OltbMTE0LDk3LDEwMF0sMjU2XSwxMzIzMDpbWzExNCw5NywxMDAsODcyNSwxMTVdLDI1Nl0sMTMyMzE6W1sxMTQsOTcsMTAwLDg3MjUsMTE1LDE3OF0sMjU2XSwxMzIzMjpbWzExMiwxMTVdLDI1Nl0sMTMyMzM6W1sxMTAsMTE1XSwyNTZdLDEzMjM0OltbOTU2LDExNV0sMjU2XSwxMzIzNTpbWzEwOSwxMTVdLDI1Nl0sMTMyMzY6W1sxMTIsODZdLDI1Nl0sMTMyMzc6W1sxMTAsODZdLDI1Nl0sMTMyMzg6W1s5NTYsODZdLDI1Nl0sMTMyMzk6W1sxMDksODZdLDI1Nl0sMTMyNDA6W1sxMDcsODZdLDI1Nl0sMTMyNDE6W1s3Nyw4Nl0sMjU2XSwxMzI0MjpbWzExMiw4N10sMjU2XSwxMzI0MzpbWzExMCw4N10sMjU2XSwxMzI0NDpbWzk1Niw4N10sMjU2XSwxMzI0NTpbWzEwOSw4N10sMjU2XSwxMzI0NjpbWzEwNyw4N10sMjU2XSwxMzI0NzpbWzc3LDg3XSwyNTZdLDEzMjQ4OltbMTA3LDkzN10sMjU2XSwxMzI0OTpbWzc3LDkzN10sMjU2XSwxMzI1MDpbWzk3LDQ2LDEwOSw0Nl0sMjU2XSwxMzI1MTpbWzY2LDExM10sMjU2XSwxMzI1MjpbWzk5LDk5XSwyNTZdLDEzMjUzOltbOTksMTAwXSwyNTZdLDEzMjU0OltbNjcsODcyNSwxMDcsMTAzXSwyNTZdLDEzMjU1OltbNjcsMTExLDQ2XSwyNTZdLDEzMjU2OltbMTAwLDY2XSwyNTZdLDEzMjU3OltbNzEsMTIxXSwyNTZdLDEzMjU4OltbMTA0LDk3XSwyNTZdLDEzMjU5OltbNzIsODBdLDI1Nl0sMTMyNjA6W1sxMDUsMTEwXSwyNTZdLDEzMjYxOltbNzUsNzVdLDI1Nl0sMTMyNjI6W1s3NSw3N10sMjU2XSwxMzI2MzpbWzEwNywxMTZdLDI1Nl0sMTMyNjQ6W1sxMDgsMTA5XSwyNTZdLDEzMjY1OltbMTA4LDExMF0sMjU2XSwxMzI2NjpbWzEwOCwxMTEsMTAzXSwyNTZdLDEzMjY3OltbMTA4LDEyMF0sMjU2XSwxMzI2ODpbWzEwOSw5OF0sMjU2XSwxMzI2OTpbWzEwOSwxMDUsMTA4XSwyNTZdLDEzMjcwOltbMTA5LDExMSwxMDhdLDI1Nl0sMTMyNzE6W1s4MCw3Ml0sMjU2XSwxMzI3MjpbWzExMiw0NiwxMDksNDZdLDI1Nl0sMTMyNzM6W1s4MCw4MCw3N10sMjU2XSwxMzI3NDpbWzgwLDgyXSwyNTZdLDEzMjc1OltbMTE1LDExNF0sMjU2XSwxMzI3NjpbWzgzLDExOF0sMjU2XSwxMzI3NzpbWzg3LDk4XSwyNTZdLDEzMjc4OltbODYsODcyNSwxMDldLDI1Nl0sMTMyNzk6W1s2NSw4NzI1LDEwOV0sMjU2XSwxMzI4MDpbWzQ5LDI2MDg1XSwyNTZdLDEzMjgxOltbNTAsMjYwODVdLDI1Nl0sMTMyODI6W1s1MSwyNjA4NV0sMjU2XSwxMzI4MzpbWzUyLDI2MDg1XSwyNTZdLDEzMjg0OltbNTMsMjYwODVdLDI1Nl0sMTMyODU6W1s1NCwyNjA4NV0sMjU2XSwxMzI4NjpbWzU1LDI2MDg1XSwyNTZdLDEzMjg3OltbNTYsMjYwODVdLDI1Nl0sMTMyODg6W1s1NywyNjA4NV0sMjU2XSwxMzI4OTpbWzQ5LDQ4LDI2MDg1XSwyNTZdLDEzMjkwOltbNDksNDksMjYwODVdLDI1Nl0sMTMyOTE6W1s0OSw1MCwyNjA4NV0sMjU2XSwxMzI5MjpbWzQ5LDUxLDI2MDg1XSwyNTZdLDEzMjkzOltbNDksNTIsMjYwODVdLDI1Nl0sMTMyOTQ6W1s0OSw1MywyNjA4NV0sMjU2XSwxMzI5NTpbWzQ5LDU0LDI2MDg1XSwyNTZdLDEzMjk2OltbNDksNTUsMjYwODVdLDI1Nl0sMTMyOTc6W1s0OSw1NiwyNjA4NV0sMjU2XSwxMzI5ODpbWzQ5LDU3LDI2MDg1XSwyNTZdLDEzMjk5OltbNTAsNDgsMjYwODVdLDI1Nl0sMTMzMDA6W1s1MCw0OSwyNjA4NV0sMjU2XSwxMzMwMTpbWzUwLDUwLDI2MDg1XSwyNTZdLDEzMzAyOltbNTAsNTEsMjYwODVdLDI1Nl0sMTMzMDM6W1s1MCw1MiwyNjA4NV0sMjU2XSwxMzMwNDpbWzUwLDUzLDI2MDg1XSwyNTZdLDEzMzA1OltbNTAsNTQsMjYwODVdLDI1Nl0sMTMzMDY6W1s1MCw1NSwyNjA4NV0sMjU2XSwxMzMwNzpbWzUwLDU2LDI2MDg1XSwyNTZdLDEzMzA4OltbNTAsNTcsMjYwODVdLDI1Nl0sMTMzMDk6W1s1MSw0OCwyNjA4NV0sMjU2XSwxMzMxMDpbWzUxLDQ5LDI2MDg1XSwyNTZdLDEzMzExOltbMTAzLDk3LDEwOF0sMjU2XX0sCjI3MTM2Ons5MjkxMjpbLDFdLDkyOTEzOlssMV0sOTI5MTQ6WywxXSw5MjkxNTpbLDFdLDkyOTE2OlssMV19LAoyNzM5Mjp7OTI5NzY6WywyMzBdLDkyOTc3OlssMjMwXSw5Mjk3ODpbLDIzMF0sOTI5Nzk6WywyMzBdLDkyOTgwOlssMjMwXSw5Mjk4MTpbLDIzMF0sOTI5ODI6WywyMzBdfSwKNDI0OTY6ezQyNjA3OlssMjMwXSw0MjYxMjpbLDIzMF0sNDI2MTM6WywyMzBdLDQyNjE0OlssMjMwXSw0MjYxNTpbLDIzMF0sNDI2MTY6WywyMzBdLDQyNjE3OlssMjMwXSw0MjYxODpbLDIzMF0sNDI2MTk6WywyMzBdLDQyNjIwOlssMjMwXSw0MjYyMTpbLDIzMF0sNDI2NTI6W1sxMDk4XSwyNTZdLDQyNjUzOltbMTEwMF0sMjU2XSw0MjY1NTpbLDIzMF0sNDI3MzY6WywyMzBdLDQyNzM3OlssMjMwXX0sCjQyNzUyOns0Mjg2NDpbWzQyODYzXSwyNTZdLDQzMDAwOltbMjk0XSwyNTZdLDQzMDAxOltbMzM5XSwyNTZdfSwKNDMwMDg6ezQzMDE0OlssOV0sNDMyMDQ6Wyw5XSw0MzIzMjpbLDIzMF0sNDMyMzM6WywyMzBdLDQzMjM0OlssMjMwXSw0MzIzNTpbLDIzMF0sNDMyMzY6WywyMzBdLDQzMjM3OlssMjMwXSw0MzIzODpbLDIzMF0sNDMyMzk6WywyMzBdLDQzMjQwOlssMjMwXSw0MzI0MTpbLDIzMF0sNDMyNDI6WywyMzBdLDQzMjQzOlssMjMwXSw0MzI0NDpbLDIzMF0sNDMyNDU6WywyMzBdLDQzMjQ2OlssMjMwXSw0MzI0NzpbLDIzMF0sNDMyNDg6WywyMzBdLDQzMjQ5OlssMjMwXX0sCjQzMjY0Ons0MzMwNzpbLDIyMF0sNDMzMDg6WywyMjBdLDQzMzA5OlssMjIwXSw0MzM0NzpbLDldLDQzNDQzOlssN10sNDM0NTY6Wyw5XX0sCjQzNTIwOns0MzY5NjpbLDIzMF0sNDM2OTg6WywyMzBdLDQzNjk5OlssMjMwXSw0MzcwMDpbLDIyMF0sNDM3MDM6WywyMzBdLDQzNzA0OlssMjMwXSw0MzcxMDpbLDIzMF0sNDM3MTE6WywyMzBdLDQzNzEzOlssMjMwXSw0Mzc2NjpbLDldfSwKNDM3NzY6ezQzODY4OltbNDI3OTFdLDI1Nl0sNDM4Njk6W1s0MzgzMV0sMjU2XSw0Mzg3MDpbWzYxOV0sMjU2XSw0Mzg3MTpbWzQzODU4XSwyNTZdLDQ0MDEzOlssOV19LAo0ODEyODp7MTEzODIyOlssMV19LAo1MzUwNDp7MTE5MTM0OltbMTE5MTI3LDExOTE0MV0sNTEyXSwxMTkxMzU6W1sxMTkxMjgsMTE5MTQxXSw1MTJdLDExOTEzNjpbWzExOTEzNSwxMTkxNTBdLDUxMl0sMTE5MTM3OltbMTE5MTM1LDExOTE1MV0sNTEyXSwxMTkxMzg6W1sxMTkxMzUsMTE5MTUyXSw1MTJdLDExOTEzOTpbWzExOTEzNSwxMTkxNTNdLDUxMl0sMTE5MTQwOltbMTE5MTM1LDExOTE1NF0sNTEyXSwxMTkxNDE6WywyMTZdLDExOTE0MjpbLDIxNl0sMTE5MTQzOlssMV0sMTE5MTQ0OlssMV0sMTE5MTQ1OlssMV0sMTE5MTQ5OlssMjI2XSwxMTkxNTA6WywyMTZdLDExOTE1MTpbLDIxNl0sMTE5MTUyOlssMjE2XSwxMTkxNTM6WywyMTZdLDExOTE1NDpbLDIxNl0sMTE5MTYzOlssMjIwXSwxMTkxNjQ6WywyMjBdLDExOTE2NTpbLDIyMF0sMTE5MTY2OlssMjIwXSwxMTkxNjc6WywyMjBdLDExOTE2ODpbLDIyMF0sMTE5MTY5OlssMjIwXSwxMTkxNzA6WywyMjBdLDExOTE3MzpbLDIzMF0sMTE5MTc0OlssMjMwXSwxMTkxNzU6WywyMzBdLDExOTE3NjpbLDIzMF0sMTE5MTc3OlssMjMwXSwxMTkxNzg6WywyMjBdLDExOTE3OTpbLDIyMF0sMTE5MjEwOlssMjMwXSwxMTkyMTE6WywyMzBdLDExOTIxMjpbLDIzMF0sMTE5MjEzOlssMjMwXSwxMTkyMjc6W1sxMTkyMjUsMTE5MTQxXSw1MTJdLDExOTIyODpbWzExOTIyNiwxMTkxNDFdLDUxMl0sMTE5MjI5OltbMTE5MjI3LDExOTE1MF0sNTEyXSwxMTkyMzA6W1sxMTkyMjgsMTE5MTUwXSw1MTJdLDExOTIzMTpbWzExOTIyNywxMTkxNTFdLDUxMl0sMTE5MjMyOltbMTE5MjI4LDExOTE1MV0sNTEyXX0sCjUzNzYwOnsxMTkzNjI6WywyMzBdLDExOTM2MzpbLDIzMF0sMTE5MzY0OlssMjMwXX0sCjU0MjcyOnsxMTk4MDg6W1s2NV0sMjU2XSwxMTk4MDk6W1s2Nl0sMjU2XSwxMTk4MTA6W1s2N10sMjU2XSwxMTk4MTE6W1s2OF0sMjU2XSwxMTk4MTI6W1s2OV0sMjU2XSwxMTk4MTM6W1s3MF0sMjU2XSwxMTk4MTQ6W1s3MV0sMjU2XSwxMTk4MTU6W1s3Ml0sMjU2XSwxMTk4MTY6W1s3M10sMjU2XSwxMTk4MTc6W1s3NF0sMjU2XSwxMTk4MTg6W1s3NV0sMjU2XSwxMTk4MTk6W1s3Nl0sMjU2XSwxMTk4MjA6W1s3N10sMjU2XSwxMTk4MjE6W1s3OF0sMjU2XSwxMTk4MjI6W1s3OV0sMjU2XSwxMTk4MjM6W1s4MF0sMjU2XSwxMTk4MjQ6W1s4MV0sMjU2XSwxMTk4MjU6W1s4Ml0sMjU2XSwxMTk4MjY6W1s4M10sMjU2XSwxMTk4Mjc6W1s4NF0sMjU2XSwxMTk4Mjg6W1s4NV0sMjU2XSwxMTk4Mjk6W1s4Nl0sMjU2XSwxMTk4MzA6W1s4N10sMjU2XSwxMTk4MzE6W1s4OF0sMjU2XSwxMTk4MzI6W1s4OV0sMjU2XSwxMTk4MzM6W1s5MF0sMjU2XSwxMTk4MzQ6W1s5N10sMjU2XSwxMTk4MzU6W1s5OF0sMjU2XSwxMTk4MzY6W1s5OV0sMjU2XSwxMTk4Mzc6W1sxMDBdLDI1Nl0sMTE5ODM4OltbMTAxXSwyNTZdLDExOTgzOTpbWzEwMl0sMjU2XSwxMTk4NDA6W1sxMDNdLDI1Nl0sMTE5ODQxOltbMTA0XSwyNTZdLDExOTg0MjpbWzEwNV0sMjU2XSwxMTk4NDM6W1sxMDZdLDI1Nl0sMTE5ODQ0OltbMTA3XSwyNTZdLDExOTg0NTpbWzEwOF0sMjU2XSwxMTk4NDY6W1sxMDldLDI1Nl0sMTE5ODQ3OltbMTEwXSwyNTZdLDExOTg0ODpbWzExMV0sMjU2XSwxMTk4NDk6W1sxMTJdLDI1Nl0sMTE5ODUwOltbMTEzXSwyNTZdLDExOTg1MTpbWzExNF0sMjU2XSwxMTk4NTI6W1sxMTVdLDI1Nl0sMTE5ODUzOltbMTE2XSwyNTZdLDExOTg1NDpbWzExN10sMjU2XSwxMTk4NTU6W1sxMThdLDI1Nl0sMTE5ODU2OltbMTE5XSwyNTZdLDExOTg1NzpbWzEyMF0sMjU2XSwxMTk4NTg6W1sxMjFdLDI1Nl0sMTE5ODU5OltbMTIyXSwyNTZdLDExOTg2MDpbWzY1XSwyNTZdLDExOTg2MTpbWzY2XSwyNTZdLDExOTg2MjpbWzY3XSwyNTZdLDExOTg2MzpbWzY4XSwyNTZdLDExOTg2NDpbWzY5XSwyNTZdLDExOTg2NTpbWzcwXSwyNTZdLDExOTg2NjpbWzcxXSwyNTZdLDExOTg2NzpbWzcyXSwyNTZdLDExOTg2ODpbWzczXSwyNTZdLDExOTg2OTpbWzc0XSwyNTZdLDExOTg3MDpbWzc1XSwyNTZdLDExOTg3MTpbWzc2XSwyNTZdLDExOTg3MjpbWzc3XSwyNTZdLDExOTg3MzpbWzc4XSwyNTZdLDExOTg3NDpbWzc5XSwyNTZdLDExOTg3NTpbWzgwXSwyNTZdLDExOTg3NjpbWzgxXSwyNTZdLDExOTg3NzpbWzgyXSwyNTZdLDExOTg3ODpbWzgzXSwyNTZdLDExOTg3OTpbWzg0XSwyNTZdLDExOTg4MDpbWzg1XSwyNTZdLDExOTg4MTpbWzg2XSwyNTZdLDExOTg4MjpbWzg3XSwyNTZdLDExOTg4MzpbWzg4XSwyNTZdLDExOTg4NDpbWzg5XSwyNTZdLDExOTg4NTpbWzkwXSwyNTZdLDExOTg4NjpbWzk3XSwyNTZdLDExOTg4NzpbWzk4XSwyNTZdLDExOTg4ODpbWzk5XSwyNTZdLDExOTg4OTpbWzEwMF0sMjU2XSwxMTk4OTA6W1sxMDFdLDI1Nl0sMTE5ODkxOltbMTAyXSwyNTZdLDExOTg5MjpbWzEwM10sMjU2XSwxMTk4OTQ6W1sxMDVdLDI1Nl0sMTE5ODk1OltbMTA2XSwyNTZdLDExOTg5NjpbWzEwN10sMjU2XSwxMTk4OTc6W1sxMDhdLDI1Nl0sMTE5ODk4OltbMTA5XSwyNTZdLDExOTg5OTpbWzExMF0sMjU2XSwxMTk5MDA6W1sxMTFdLDI1Nl0sMTE5OTAxOltbMTEyXSwyNTZdLDExOTkwMjpbWzExM10sMjU2XSwxMTk5MDM6W1sxMTRdLDI1Nl0sMTE5OTA0OltbMTE1XSwyNTZdLDExOTkwNTpbWzExNl0sMjU2XSwxMTk5MDY6W1sxMTddLDI1Nl0sMTE5OTA3OltbMTE4XSwyNTZdLDExOTkwODpbWzExOV0sMjU2XSwxMTk5MDk6W1sxMjBdLDI1Nl0sMTE5OTEwOltbMTIxXSwyNTZdLDExOTkxMTpbWzEyMl0sMjU2XSwxMTk5MTI6W1s2NV0sMjU2XSwxMTk5MTM6W1s2Nl0sMjU2XSwxMTk5MTQ6W1s2N10sMjU2XSwxMTk5MTU6W1s2OF0sMjU2XSwxMTk5MTY6W1s2OV0sMjU2XSwxMTk5MTc6W1s3MF0sMjU2XSwxMTk5MTg6W1s3MV0sMjU2XSwxMTk5MTk6W1s3Ml0sMjU2XSwxMTk5MjA6W1s3M10sMjU2XSwxMTk5MjE6W1s3NF0sMjU2XSwxMTk5MjI6W1s3NV0sMjU2XSwxMTk5MjM6W1s3Nl0sMjU2XSwxMTk5MjQ6W1s3N10sMjU2XSwxMTk5MjU6W1s3OF0sMjU2XSwxMTk5MjY6W1s3OV0sMjU2XSwxMTk5Mjc6W1s4MF0sMjU2XSwxMTk5Mjg6W1s4MV0sMjU2XSwxMTk5Mjk6W1s4Ml0sMjU2XSwxMTk5MzA6W1s4M10sMjU2XSwxMTk5MzE6W1s4NF0sMjU2XSwxMTk5MzI6W1s4NV0sMjU2XSwxMTk5MzM6W1s4Nl0sMjU2XSwxMTk5MzQ6W1s4N10sMjU2XSwxMTk5MzU6W1s4OF0sMjU2XSwxMTk5MzY6W1s4OV0sMjU2XSwxMTk5Mzc6W1s5MF0sMjU2XSwxMTk5Mzg6W1s5N10sMjU2XSwxMTk5Mzk6W1s5OF0sMjU2XSwxMTk5NDA6W1s5OV0sMjU2XSwxMTk5NDE6W1sxMDBdLDI1Nl0sMTE5OTQyOltbMTAxXSwyNTZdLDExOTk0MzpbWzEwMl0sMjU2XSwxMTk5NDQ6W1sxMDNdLDI1Nl0sMTE5OTQ1OltbMTA0XSwyNTZdLDExOTk0NjpbWzEwNV0sMjU2XSwxMTk5NDc6W1sxMDZdLDI1Nl0sMTE5OTQ4OltbMTA3XSwyNTZdLDExOTk0OTpbWzEwOF0sMjU2XSwxMTk5NTA6W1sxMDldLDI1Nl0sMTE5OTUxOltbMTEwXSwyNTZdLDExOTk1MjpbWzExMV0sMjU2XSwxMTk5NTM6W1sxMTJdLDI1Nl0sMTE5OTU0OltbMTEzXSwyNTZdLDExOTk1NTpbWzExNF0sMjU2XSwxMTk5NTY6W1sxMTVdLDI1Nl0sMTE5OTU3OltbMTE2XSwyNTZdLDExOTk1ODpbWzExN10sMjU2XSwxMTk5NTk6W1sxMThdLDI1Nl0sMTE5OTYwOltbMTE5XSwyNTZdLDExOTk2MTpbWzEyMF0sMjU2XSwxMTk5NjI6W1sxMjFdLDI1Nl0sMTE5OTYzOltbMTIyXSwyNTZdLDExOTk2NDpbWzY1XSwyNTZdLDExOTk2NjpbWzY3XSwyNTZdLDExOTk2NzpbWzY4XSwyNTZdLDExOTk3MDpbWzcxXSwyNTZdLDExOTk3MzpbWzc0XSwyNTZdLDExOTk3NDpbWzc1XSwyNTZdLDExOTk3NzpbWzc4XSwyNTZdLDExOTk3ODpbWzc5XSwyNTZdLDExOTk3OTpbWzgwXSwyNTZdLDExOTk4MDpbWzgxXSwyNTZdLDExOTk4MjpbWzgzXSwyNTZdLDExOTk4MzpbWzg0XSwyNTZdLDExOTk4NDpbWzg1XSwyNTZdLDExOTk4NTpbWzg2XSwyNTZdLDExOTk4NjpbWzg3XSwyNTZdLDExOTk4NzpbWzg4XSwyNTZdLDExOTk4ODpbWzg5XSwyNTZdLDExOTk4OTpbWzkwXSwyNTZdLDExOTk5MDpbWzk3XSwyNTZdLDExOTk5MTpbWzk4XSwyNTZdLDExOTk5MjpbWzk5XSwyNTZdLDExOTk5MzpbWzEwMF0sMjU2XSwxMTk5OTU6W1sxMDJdLDI1Nl0sMTE5OTk3OltbMTA0XSwyNTZdLDExOTk5ODpbWzEwNV0sMjU2XSwxMTk5OTk6W1sxMDZdLDI1Nl0sMTIwMDAwOltbMTA3XSwyNTZdLDEyMDAwMTpbWzEwOF0sMjU2XSwxMjAwMDI6W1sxMDldLDI1Nl0sMTIwMDAzOltbMTEwXSwyNTZdLDEyMDAwNTpbWzExMl0sMjU2XSwxMjAwMDY6W1sxMTNdLDI1Nl0sMTIwMDA3OltbMTE0XSwyNTZdLDEyMDAwODpbWzExNV0sMjU2XSwxMjAwMDk6W1sxMTZdLDI1Nl0sMTIwMDEwOltbMTE3XSwyNTZdLDEyMDAxMTpbWzExOF0sMjU2XSwxMjAwMTI6W1sxMTldLDI1Nl0sMTIwMDEzOltbMTIwXSwyNTZdLDEyMDAxNDpbWzEyMV0sMjU2XSwxMjAwMTU6W1sxMjJdLDI1Nl0sMTIwMDE2OltbNjVdLDI1Nl0sMTIwMDE3OltbNjZdLDI1Nl0sMTIwMDE4OltbNjddLDI1Nl0sMTIwMDE5OltbNjhdLDI1Nl0sMTIwMDIwOltbNjldLDI1Nl0sMTIwMDIxOltbNzBdLDI1Nl0sMTIwMDIyOltbNzFdLDI1Nl0sMTIwMDIzOltbNzJdLDI1Nl0sMTIwMDI0OltbNzNdLDI1Nl0sMTIwMDI1OltbNzRdLDI1Nl0sMTIwMDI2OltbNzVdLDI1Nl0sMTIwMDI3OltbNzZdLDI1Nl0sMTIwMDI4OltbNzddLDI1Nl0sMTIwMDI5OltbNzhdLDI1Nl0sMTIwMDMwOltbNzldLDI1Nl0sMTIwMDMxOltbODBdLDI1Nl0sMTIwMDMyOltbODFdLDI1Nl0sMTIwMDMzOltbODJdLDI1Nl0sMTIwMDM0OltbODNdLDI1Nl0sMTIwMDM1OltbODRdLDI1Nl0sMTIwMDM2OltbODVdLDI1Nl0sMTIwMDM3OltbODZdLDI1Nl0sMTIwMDM4OltbODddLDI1Nl0sMTIwMDM5OltbODhdLDI1Nl0sMTIwMDQwOltbODldLDI1Nl0sMTIwMDQxOltbOTBdLDI1Nl0sMTIwMDQyOltbOTddLDI1Nl0sMTIwMDQzOltbOThdLDI1Nl0sMTIwMDQ0OltbOTldLDI1Nl0sMTIwMDQ1OltbMTAwXSwyNTZdLDEyMDA0NjpbWzEwMV0sMjU2XSwxMjAwNDc6W1sxMDJdLDI1Nl0sMTIwMDQ4OltbMTAzXSwyNTZdLDEyMDA0OTpbWzEwNF0sMjU2XSwxMjAwNTA6W1sxMDVdLDI1Nl0sMTIwMDUxOltbMTA2XSwyNTZdLDEyMDA1MjpbWzEwN10sMjU2XSwxMjAwNTM6W1sxMDhdLDI1Nl0sMTIwMDU0OltbMTA5XSwyNTZdLDEyMDA1NTpbWzExMF0sMjU2XSwxMjAwNTY6W1sxMTFdLDI1Nl0sMTIwMDU3OltbMTEyXSwyNTZdLDEyMDA1ODpbWzExM10sMjU2XSwxMjAwNTk6W1sxMTRdLDI1Nl0sMTIwMDYwOltbMTE1XSwyNTZdLDEyMDA2MTpbWzExNl0sMjU2XSwxMjAwNjI6W1sxMTddLDI1Nl0sMTIwMDYzOltbMTE4XSwyNTZdfSwKNTQ1Mjg6ezEyMDA2NDpbWzExOV0sMjU2XSwxMjAwNjU6W1sxMjBdLDI1Nl0sMTIwMDY2OltbMTIxXSwyNTZdLDEyMDA2NzpbWzEyMl0sMjU2XSwxMjAwNjg6W1s2NV0sMjU2XSwxMjAwNjk6W1s2Nl0sMjU2XSwxMjAwNzE6W1s2OF0sMjU2XSwxMjAwNzI6W1s2OV0sMjU2XSwxMjAwNzM6W1s3MF0sMjU2XSwxMjAwNzQ6W1s3MV0sMjU2XSwxMjAwNzc6W1s3NF0sMjU2XSwxMjAwNzg6W1s3NV0sMjU2XSwxMjAwNzk6W1s3Nl0sMjU2XSwxMjAwODA6W1s3N10sMjU2XSwxMjAwODE6W1s3OF0sMjU2XSwxMjAwODI6W1s3OV0sMjU2XSwxMjAwODM6W1s4MF0sMjU2XSwxMjAwODQ6W1s4MV0sMjU2XSwxMjAwODY6W1s4M10sMjU2XSwxMjAwODc6W1s4NF0sMjU2XSwxMjAwODg6W1s4NV0sMjU2XSwxMjAwODk6W1s4Nl0sMjU2XSwxMjAwOTA6W1s4N10sMjU2XSwxMjAwOTE6W1s4OF0sMjU2XSwxMjAwOTI6W1s4OV0sMjU2XSwxMjAwOTQ6W1s5N10sMjU2XSwxMjAwOTU6W1s5OF0sMjU2XSwxMjAwOTY6W1s5OV0sMjU2XSwxMjAwOTc6W1sxMDBdLDI1Nl0sMTIwMDk4OltbMTAxXSwyNTZdLDEyMDA5OTpbWzEwMl0sMjU2XSwxMjAxMDA6W1sxMDNdLDI1Nl0sMTIwMTAxOltbMTA0XSwyNTZdLDEyMDEwMjpbWzEwNV0sMjU2XSwxMjAxMDM6W1sxMDZdLDI1Nl0sMTIwMTA0OltbMTA3XSwyNTZdLDEyMDEwNTpbWzEwOF0sMjU2XSwxMjAxMDY6W1sxMDldLDI1Nl0sMTIwMTA3OltbMTEwXSwyNTZdLDEyMDEwODpbWzExMV0sMjU2XSwxMjAxMDk6W1sxMTJdLDI1Nl0sMTIwMTEwOltbMTEzXSwyNTZdLDEyMDExMTpbWzExNF0sMjU2XSwxMjAxMTI6W1sxMTVdLDI1Nl0sMTIwMTEzOltbMTE2XSwyNTZdLDEyMDExNDpbWzExN10sMjU2XSwxMjAxMTU6W1sxMThdLDI1Nl0sMTIwMTE2OltbMTE5XSwyNTZdLDEyMDExNzpbWzEyMF0sMjU2XSwxMjAxMTg6W1sxMjFdLDI1Nl0sMTIwMTE5OltbMTIyXSwyNTZdLDEyMDEyMDpbWzY1XSwyNTZdLDEyMDEyMTpbWzY2XSwyNTZdLDEyMDEyMzpbWzY4XSwyNTZdLDEyMDEyNDpbWzY5XSwyNTZdLDEyMDEyNTpbWzcwXSwyNTZdLDEyMDEyNjpbWzcxXSwyNTZdLDEyMDEyODpbWzczXSwyNTZdLDEyMDEyOTpbWzc0XSwyNTZdLDEyMDEzMDpbWzc1XSwyNTZdLDEyMDEzMTpbWzc2XSwyNTZdLDEyMDEzMjpbWzc3XSwyNTZdLDEyMDEzNDpbWzc5XSwyNTZdLDEyMDEzODpbWzgzXSwyNTZdLDEyMDEzOTpbWzg0XSwyNTZdLDEyMDE0MDpbWzg1XSwyNTZdLDEyMDE0MTpbWzg2XSwyNTZdLDEyMDE0MjpbWzg3XSwyNTZdLDEyMDE0MzpbWzg4XSwyNTZdLDEyMDE0NDpbWzg5XSwyNTZdLDEyMDE0NjpbWzk3XSwyNTZdLDEyMDE0NzpbWzk4XSwyNTZdLDEyMDE0ODpbWzk5XSwyNTZdLDEyMDE0OTpbWzEwMF0sMjU2XSwxMjAxNTA6W1sxMDFdLDI1Nl0sMTIwMTUxOltbMTAyXSwyNTZdLDEyMDE1MjpbWzEwM10sMjU2XSwxMjAxNTM6W1sxMDRdLDI1Nl0sMTIwMTU0OltbMTA1XSwyNTZdLDEyMDE1NTpbWzEwNl0sMjU2XSwxMjAxNTY6W1sxMDddLDI1Nl0sMTIwMTU3OltbMTA4XSwyNTZdLDEyMDE1ODpbWzEwOV0sMjU2XSwxMjAxNTk6W1sxMTBdLDI1Nl0sMTIwMTYwOltbMTExXSwyNTZdLDEyMDE2MTpbWzExMl0sMjU2XSwxMjAxNjI6W1sxMTNdLDI1Nl0sMTIwMTYzOltbMTE0XSwyNTZdLDEyMDE2NDpbWzExNV0sMjU2XSwxMjAxNjU6W1sxMTZdLDI1Nl0sMTIwMTY2OltbMTE3XSwyNTZdLDEyMDE2NzpbWzExOF0sMjU2XSwxMjAxNjg6W1sxMTldLDI1Nl0sMTIwMTY5OltbMTIwXSwyNTZdLDEyMDE3MDpbWzEyMV0sMjU2XSwxMjAxNzE6W1sxMjJdLDI1Nl0sMTIwMTcyOltbNjVdLDI1Nl0sMTIwMTczOltbNjZdLDI1Nl0sMTIwMTc0OltbNjddLDI1Nl0sMTIwMTc1OltbNjhdLDI1Nl0sMTIwMTc2OltbNjldLDI1Nl0sMTIwMTc3OltbNzBdLDI1Nl0sMTIwMTc4OltbNzFdLDI1Nl0sMTIwMTc5OltbNzJdLDI1Nl0sMTIwMTgwOltbNzNdLDI1Nl0sMTIwMTgxOltbNzRdLDI1Nl0sMTIwMTgyOltbNzVdLDI1Nl0sMTIwMTgzOltbNzZdLDI1Nl0sMTIwMTg0OltbNzddLDI1Nl0sMTIwMTg1OltbNzhdLDI1Nl0sMTIwMTg2OltbNzldLDI1Nl0sMTIwMTg3OltbODBdLDI1Nl0sMTIwMTg4OltbODFdLDI1Nl0sMTIwMTg5OltbODJdLDI1Nl0sMTIwMTkwOltbODNdLDI1Nl0sMTIwMTkxOltbODRdLDI1Nl0sMTIwMTkyOltbODVdLDI1Nl0sMTIwMTkzOltbODZdLDI1Nl0sMTIwMTk0OltbODddLDI1Nl0sMTIwMTk1OltbODhdLDI1Nl0sMTIwMTk2OltbODldLDI1Nl0sMTIwMTk3OltbOTBdLDI1Nl0sMTIwMTk4OltbOTddLDI1Nl0sMTIwMTk5OltbOThdLDI1Nl0sMTIwMjAwOltbOTldLDI1Nl0sMTIwMjAxOltbMTAwXSwyNTZdLDEyMDIwMjpbWzEwMV0sMjU2XSwxMjAyMDM6W1sxMDJdLDI1Nl0sMTIwMjA0OltbMTAzXSwyNTZdLDEyMDIwNTpbWzEwNF0sMjU2XSwxMjAyMDY6W1sxMDVdLDI1Nl0sMTIwMjA3OltbMTA2XSwyNTZdLDEyMDIwODpbWzEwN10sMjU2XSwxMjAyMDk6W1sxMDhdLDI1Nl0sMTIwMjEwOltbMTA5XSwyNTZdLDEyMDIxMTpbWzExMF0sMjU2XSwxMjAyMTI6W1sxMTFdLDI1Nl0sMTIwMjEzOltbMTEyXSwyNTZdLDEyMDIxNDpbWzExM10sMjU2XSwxMjAyMTU6W1sxMTRdLDI1Nl0sMTIwMjE2OltbMTE1XSwyNTZdLDEyMDIxNzpbWzExNl0sMjU2XSwxMjAyMTg6W1sxMTddLDI1Nl0sMTIwMjE5OltbMTE4XSwyNTZdLDEyMDIyMDpbWzExOV0sMjU2XSwxMjAyMjE6W1sxMjBdLDI1Nl0sMTIwMjIyOltbMTIxXSwyNTZdLDEyMDIyMzpbWzEyMl0sMjU2XSwxMjAyMjQ6W1s2NV0sMjU2XSwxMjAyMjU6W1s2Nl0sMjU2XSwxMjAyMjY6W1s2N10sMjU2XSwxMjAyMjc6W1s2OF0sMjU2XSwxMjAyMjg6W1s2OV0sMjU2XSwxMjAyMjk6W1s3MF0sMjU2XSwxMjAyMzA6W1s3MV0sMjU2XSwxMjAyMzE6W1s3Ml0sMjU2XSwxMjAyMzI6W1s3M10sMjU2XSwxMjAyMzM6W1s3NF0sMjU2XSwxMjAyMzQ6W1s3NV0sMjU2XSwxMjAyMzU6W1s3Nl0sMjU2XSwxMjAyMzY6W1s3N10sMjU2XSwxMjAyMzc6W1s3OF0sMjU2XSwxMjAyMzg6W1s3OV0sMjU2XSwxMjAyMzk6W1s4MF0sMjU2XSwxMjAyNDA6W1s4MV0sMjU2XSwxMjAyNDE6W1s4Ml0sMjU2XSwxMjAyNDI6W1s4M10sMjU2XSwxMjAyNDM6W1s4NF0sMjU2XSwxMjAyNDQ6W1s4NV0sMjU2XSwxMjAyNDU6W1s4Nl0sMjU2XSwxMjAyNDY6W1s4N10sMjU2XSwxMjAyNDc6W1s4OF0sMjU2XSwxMjAyNDg6W1s4OV0sMjU2XSwxMjAyNDk6W1s5MF0sMjU2XSwxMjAyNTA6W1s5N10sMjU2XSwxMjAyNTE6W1s5OF0sMjU2XSwxMjAyNTI6W1s5OV0sMjU2XSwxMjAyNTM6W1sxMDBdLDI1Nl0sMTIwMjU0OltbMTAxXSwyNTZdLDEyMDI1NTpbWzEwMl0sMjU2XSwxMjAyNTY6W1sxMDNdLDI1Nl0sMTIwMjU3OltbMTA0XSwyNTZdLDEyMDI1ODpbWzEwNV0sMjU2XSwxMjAyNTk6W1sxMDZdLDI1Nl0sMTIwMjYwOltbMTA3XSwyNTZdLDEyMDI2MTpbWzEwOF0sMjU2XSwxMjAyNjI6W1sxMDldLDI1Nl0sMTIwMjYzOltbMTEwXSwyNTZdLDEyMDI2NDpbWzExMV0sMjU2XSwxMjAyNjU6W1sxMTJdLDI1Nl0sMTIwMjY2OltbMTEzXSwyNTZdLDEyMDI2NzpbWzExNF0sMjU2XSwxMjAyNjg6W1sxMTVdLDI1Nl0sMTIwMjY5OltbMTE2XSwyNTZdLDEyMDI3MDpbWzExN10sMjU2XSwxMjAyNzE6W1sxMThdLDI1Nl0sMTIwMjcyOltbMTE5XSwyNTZdLDEyMDI3MzpbWzEyMF0sMjU2XSwxMjAyNzQ6W1sxMjFdLDI1Nl0sMTIwMjc1OltbMTIyXSwyNTZdLDEyMDI3NjpbWzY1XSwyNTZdLDEyMDI3NzpbWzY2XSwyNTZdLDEyMDI3ODpbWzY3XSwyNTZdLDEyMDI3OTpbWzY4XSwyNTZdLDEyMDI4MDpbWzY5XSwyNTZdLDEyMDI4MTpbWzcwXSwyNTZdLDEyMDI4MjpbWzcxXSwyNTZdLDEyMDI4MzpbWzcyXSwyNTZdLDEyMDI4NDpbWzczXSwyNTZdLDEyMDI4NTpbWzc0XSwyNTZdLDEyMDI4NjpbWzc1XSwyNTZdLDEyMDI4NzpbWzc2XSwyNTZdLDEyMDI4ODpbWzc3XSwyNTZdLDEyMDI4OTpbWzc4XSwyNTZdLDEyMDI5MDpbWzc5XSwyNTZdLDEyMDI5MTpbWzgwXSwyNTZdLDEyMDI5MjpbWzgxXSwyNTZdLDEyMDI5MzpbWzgyXSwyNTZdLDEyMDI5NDpbWzgzXSwyNTZdLDEyMDI5NTpbWzg0XSwyNTZdLDEyMDI5NjpbWzg1XSwyNTZdLDEyMDI5NzpbWzg2XSwyNTZdLDEyMDI5ODpbWzg3XSwyNTZdLDEyMDI5OTpbWzg4XSwyNTZdLDEyMDMwMDpbWzg5XSwyNTZdLDEyMDMwMTpbWzkwXSwyNTZdLDEyMDMwMjpbWzk3XSwyNTZdLDEyMDMwMzpbWzk4XSwyNTZdLDEyMDMwNDpbWzk5XSwyNTZdLDEyMDMwNTpbWzEwMF0sMjU2XSwxMjAzMDY6W1sxMDFdLDI1Nl0sMTIwMzA3OltbMTAyXSwyNTZdLDEyMDMwODpbWzEwM10sMjU2XSwxMjAzMDk6W1sxMDRdLDI1Nl0sMTIwMzEwOltbMTA1XSwyNTZdLDEyMDMxMTpbWzEwNl0sMjU2XSwxMjAzMTI6W1sxMDddLDI1Nl0sMTIwMzEzOltbMTA4XSwyNTZdLDEyMDMxNDpbWzEwOV0sMjU2XSwxMjAzMTU6W1sxMTBdLDI1Nl0sMTIwMzE2OltbMTExXSwyNTZdLDEyMDMxNzpbWzExMl0sMjU2XSwxMjAzMTg6W1sxMTNdLDI1Nl0sMTIwMzE5OltbMTE0XSwyNTZdfSwKNTQ3ODQ6ezEyMDMyMDpbWzExNV0sMjU2XSwxMjAzMjE6W1sxMTZdLDI1Nl0sMTIwMzIyOltbMTE3XSwyNTZdLDEyMDMyMzpbWzExOF0sMjU2XSwxMjAzMjQ6W1sxMTldLDI1Nl0sMTIwMzI1OltbMTIwXSwyNTZdLDEyMDMyNjpbWzEyMV0sMjU2XSwxMjAzMjc6W1sxMjJdLDI1Nl0sMTIwMzI4OltbNjVdLDI1Nl0sMTIwMzI5OltbNjZdLDI1Nl0sMTIwMzMwOltbNjddLDI1Nl0sMTIwMzMxOltbNjhdLDI1Nl0sMTIwMzMyOltbNjldLDI1Nl0sMTIwMzMzOltbNzBdLDI1Nl0sMTIwMzM0OltbNzFdLDI1Nl0sMTIwMzM1OltbNzJdLDI1Nl0sMTIwMzM2OltbNzNdLDI1Nl0sMTIwMzM3OltbNzRdLDI1Nl0sMTIwMzM4OltbNzVdLDI1Nl0sMTIwMzM5OltbNzZdLDI1Nl0sMTIwMzQwOltbNzddLDI1Nl0sMTIwMzQxOltbNzhdLDI1Nl0sMTIwMzQyOltbNzldLDI1Nl0sMTIwMzQzOltbODBdLDI1Nl0sMTIwMzQ0OltbODFdLDI1Nl0sMTIwMzQ1OltbODJdLDI1Nl0sMTIwMzQ2OltbODNdLDI1Nl0sMTIwMzQ3OltbODRdLDI1Nl0sMTIwMzQ4OltbODVdLDI1Nl0sMTIwMzQ5OltbODZdLDI1Nl0sMTIwMzUwOltbODddLDI1Nl0sMTIwMzUxOltbODhdLDI1Nl0sMTIwMzUyOltbODldLDI1Nl0sMTIwMzUzOltbOTBdLDI1Nl0sMTIwMzU0OltbOTddLDI1Nl0sMTIwMzU1OltbOThdLDI1Nl0sMTIwMzU2OltbOTldLDI1Nl0sMTIwMzU3OltbMTAwXSwyNTZdLDEyMDM1ODpbWzEwMV0sMjU2XSwxMjAzNTk6W1sxMDJdLDI1Nl0sMTIwMzYwOltbMTAzXSwyNTZdLDEyMDM2MTpbWzEwNF0sMjU2XSwxMjAzNjI6W1sxMDVdLDI1Nl0sMTIwMzYzOltbMTA2XSwyNTZdLDEyMDM2NDpbWzEwN10sMjU2XSwxMjAzNjU6W1sxMDhdLDI1Nl0sMTIwMzY2OltbMTA5XSwyNTZdLDEyMDM2NzpbWzExMF0sMjU2XSwxMjAzNjg6W1sxMTFdLDI1Nl0sMTIwMzY5OltbMTEyXSwyNTZdLDEyMDM3MDpbWzExM10sMjU2XSwxMjAzNzE6W1sxMTRdLDI1Nl0sMTIwMzcyOltbMTE1XSwyNTZdLDEyMDM3MzpbWzExNl0sMjU2XSwxMjAzNzQ6W1sxMTddLDI1Nl0sMTIwMzc1OltbMTE4XSwyNTZdLDEyMDM3NjpbWzExOV0sMjU2XSwxMjAzNzc6W1sxMjBdLDI1Nl0sMTIwMzc4OltbMTIxXSwyNTZdLDEyMDM3OTpbWzEyMl0sMjU2XSwxMjAzODA6W1s2NV0sMjU2XSwxMjAzODE6W1s2Nl0sMjU2XSwxMjAzODI6W1s2N10sMjU2XSwxMjAzODM6W1s2OF0sMjU2XSwxMjAzODQ6W1s2OV0sMjU2XSwxMjAzODU6W1s3MF0sMjU2XSwxMjAzODY6W1s3MV0sMjU2XSwxMjAzODc6W1s3Ml0sMjU2XSwxMjAzODg6W1s3M10sMjU2XSwxMjAzODk6W1s3NF0sMjU2XSwxMjAzOTA6W1s3NV0sMjU2XSwxMjAzOTE6W1s3Nl0sMjU2XSwxMjAzOTI6W1s3N10sMjU2XSwxMjAzOTM6W1s3OF0sMjU2XSwxMjAzOTQ6W1s3OV0sMjU2XSwxMjAzOTU6W1s4MF0sMjU2XSwxMjAzOTY6W1s4MV0sMjU2XSwxMjAzOTc6W1s4Ml0sMjU2XSwxMjAzOTg6W1s4M10sMjU2XSwxMjAzOTk6W1s4NF0sMjU2XSwxMjA0MDA6W1s4NV0sMjU2XSwxMjA0MDE6W1s4Nl0sMjU2XSwxMjA0MDI6W1s4N10sMjU2XSwxMjA0MDM6W1s4OF0sMjU2XSwxMjA0MDQ6W1s4OV0sMjU2XSwxMjA0MDU6W1s5MF0sMjU2XSwxMjA0MDY6W1s5N10sMjU2XSwxMjA0MDc6W1s5OF0sMjU2XSwxMjA0MDg6W1s5OV0sMjU2XSwxMjA0MDk6W1sxMDBdLDI1Nl0sMTIwNDEwOltbMTAxXSwyNTZdLDEyMDQxMTpbWzEwMl0sMjU2XSwxMjA0MTI6W1sxMDNdLDI1Nl0sMTIwNDEzOltbMTA0XSwyNTZdLDEyMDQxNDpbWzEwNV0sMjU2XSwxMjA0MTU6W1sxMDZdLDI1Nl0sMTIwNDE2OltbMTA3XSwyNTZdLDEyMDQxNzpbWzEwOF0sMjU2XSwxMjA0MTg6W1sxMDldLDI1Nl0sMTIwNDE5OltbMTEwXSwyNTZdLDEyMDQyMDpbWzExMV0sMjU2XSwxMjA0MjE6W1sxMTJdLDI1Nl0sMTIwNDIyOltbMTEzXSwyNTZdLDEyMDQyMzpbWzExNF0sMjU2XSwxMjA0MjQ6W1sxMTVdLDI1Nl0sMTIwNDI1OltbMTE2XSwyNTZdLDEyMDQyNjpbWzExN10sMjU2XSwxMjA0Mjc6W1sxMThdLDI1Nl0sMTIwNDI4OltbMTE5XSwyNTZdLDEyMDQyOTpbWzEyMF0sMjU2XSwxMjA0MzA6W1sxMjFdLDI1Nl0sMTIwNDMxOltbMTIyXSwyNTZdLDEyMDQzMjpbWzY1XSwyNTZdLDEyMDQzMzpbWzY2XSwyNTZdLDEyMDQzNDpbWzY3XSwyNTZdLDEyMDQzNTpbWzY4XSwyNTZdLDEyMDQzNjpbWzY5XSwyNTZdLDEyMDQzNzpbWzcwXSwyNTZdLDEyMDQzODpbWzcxXSwyNTZdLDEyMDQzOTpbWzcyXSwyNTZdLDEyMDQ0MDpbWzczXSwyNTZdLDEyMDQ0MTpbWzc0XSwyNTZdLDEyMDQ0MjpbWzc1XSwyNTZdLDEyMDQ0MzpbWzc2XSwyNTZdLDEyMDQ0NDpbWzc3XSwyNTZdLDEyMDQ0NTpbWzc4XSwyNTZdLDEyMDQ0NjpbWzc5XSwyNTZdLDEyMDQ0NzpbWzgwXSwyNTZdLDEyMDQ0ODpbWzgxXSwyNTZdLDEyMDQ0OTpbWzgyXSwyNTZdLDEyMDQ1MDpbWzgzXSwyNTZdLDEyMDQ1MTpbWzg0XSwyNTZdLDEyMDQ1MjpbWzg1XSwyNTZdLDEyMDQ1MzpbWzg2XSwyNTZdLDEyMDQ1NDpbWzg3XSwyNTZdLDEyMDQ1NTpbWzg4XSwyNTZdLDEyMDQ1NjpbWzg5XSwyNTZdLDEyMDQ1NzpbWzkwXSwyNTZdLDEyMDQ1ODpbWzk3XSwyNTZdLDEyMDQ1OTpbWzk4XSwyNTZdLDEyMDQ2MDpbWzk5XSwyNTZdLDEyMDQ2MTpbWzEwMF0sMjU2XSwxMjA0NjI6W1sxMDFdLDI1Nl0sMTIwNDYzOltbMTAyXSwyNTZdLDEyMDQ2NDpbWzEwM10sMjU2XSwxMjA0NjU6W1sxMDRdLDI1Nl0sMTIwNDY2OltbMTA1XSwyNTZdLDEyMDQ2NzpbWzEwNl0sMjU2XSwxMjA0Njg6W1sxMDddLDI1Nl0sMTIwNDY5OltbMTA4XSwyNTZdLDEyMDQ3MDpbWzEwOV0sMjU2XSwxMjA0NzE6W1sxMTBdLDI1Nl0sMTIwNDcyOltbMTExXSwyNTZdLDEyMDQ3MzpbWzExMl0sMjU2XSwxMjA0NzQ6W1sxMTNdLDI1Nl0sMTIwNDc1OltbMTE0XSwyNTZdLDEyMDQ3NjpbWzExNV0sMjU2XSwxMjA0Nzc6W1sxMTZdLDI1Nl0sMTIwNDc4OltbMTE3XSwyNTZdLDEyMDQ3OTpbWzExOF0sMjU2XSwxMjA0ODA6W1sxMTldLDI1Nl0sMTIwNDgxOltbMTIwXSwyNTZdLDEyMDQ4MjpbWzEyMV0sMjU2XSwxMjA0ODM6W1sxMjJdLDI1Nl0sMTIwNDg0OltbMzA1XSwyNTZdLDEyMDQ4NTpbWzU2N10sMjU2XSwxMjA0ODg6W1s5MTNdLDI1Nl0sMTIwNDg5OltbOTE0XSwyNTZdLDEyMDQ5MDpbWzkxNV0sMjU2XSwxMjA0OTE6W1s5MTZdLDI1Nl0sMTIwNDkyOltbOTE3XSwyNTZdLDEyMDQ5MzpbWzkxOF0sMjU2XSwxMjA0OTQ6W1s5MTldLDI1Nl0sMTIwNDk1OltbOTIwXSwyNTZdLDEyMDQ5NjpbWzkyMV0sMjU2XSwxMjA0OTc6W1s5MjJdLDI1Nl0sMTIwNDk4OltbOTIzXSwyNTZdLDEyMDQ5OTpbWzkyNF0sMjU2XSwxMjA1MDA6W1s5MjVdLDI1Nl0sMTIwNTAxOltbOTI2XSwyNTZdLDEyMDUwMjpbWzkyN10sMjU2XSwxMjA1MDM6W1s5MjhdLDI1Nl0sMTIwNTA0OltbOTI5XSwyNTZdLDEyMDUwNTpbWzEwMTJdLDI1Nl0sMTIwNTA2OltbOTMxXSwyNTZdLDEyMDUwNzpbWzkzMl0sMjU2XSwxMjA1MDg6W1s5MzNdLDI1Nl0sMTIwNTA5OltbOTM0XSwyNTZdLDEyMDUxMDpbWzkzNV0sMjU2XSwxMjA1MTE6W1s5MzZdLDI1Nl0sMTIwNTEyOltbOTM3XSwyNTZdLDEyMDUxMzpbWzg3MTFdLDI1Nl0sMTIwNTE0OltbOTQ1XSwyNTZdLDEyMDUxNTpbWzk0Nl0sMjU2XSwxMjA1MTY6W1s5NDddLDI1Nl0sMTIwNTE3OltbOTQ4XSwyNTZdLDEyMDUxODpbWzk0OV0sMjU2XSwxMjA1MTk6W1s5NTBdLDI1Nl0sMTIwNTIwOltbOTUxXSwyNTZdLDEyMDUyMTpbWzk1Ml0sMjU2XSwxMjA1MjI6W1s5NTNdLDI1Nl0sMTIwNTIzOltbOTU0XSwyNTZdLDEyMDUyNDpbWzk1NV0sMjU2XSwxMjA1MjU6W1s5NTZdLDI1Nl0sMTIwNTI2OltbOTU3XSwyNTZdLDEyMDUyNzpbWzk1OF0sMjU2XSwxMjA1Mjg6W1s5NTldLDI1Nl0sMTIwNTI5OltbOTYwXSwyNTZdLDEyMDUzMDpbWzk2MV0sMjU2XSwxMjA1MzE6W1s5NjJdLDI1Nl0sMTIwNTMyOltbOTYzXSwyNTZdLDEyMDUzMzpbWzk2NF0sMjU2XSwxMjA1MzQ6W1s5NjVdLDI1Nl0sMTIwNTM1OltbOTY2XSwyNTZdLDEyMDUzNjpbWzk2N10sMjU2XSwxMjA1Mzc6W1s5NjhdLDI1Nl0sMTIwNTM4OltbOTY5XSwyNTZdLDEyMDUzOTpbWzg3MDZdLDI1Nl0sMTIwNTQwOltbMTAxM10sMjU2XSwxMjA1NDE6W1s5NzddLDI1Nl0sMTIwNTQyOltbMTAwOF0sMjU2XSwxMjA1NDM6W1s5ODFdLDI1Nl0sMTIwNTQ0OltbMTAwOV0sMjU2XSwxMjA1NDU6W1s5ODJdLDI1Nl0sMTIwNTQ2OltbOTEzXSwyNTZdLDEyMDU0NzpbWzkxNF0sMjU2XSwxMjA1NDg6W1s5MTVdLDI1Nl0sMTIwNTQ5OltbOTE2XSwyNTZdLDEyMDU1MDpbWzkxN10sMjU2XSwxMjA1NTE6W1s5MThdLDI1Nl0sMTIwNTUyOltbOTE5XSwyNTZdLDEyMDU1MzpbWzkyMF0sMjU2XSwxMjA1NTQ6W1s5MjFdLDI1Nl0sMTIwNTU1OltbOTIyXSwyNTZdLDEyMDU1NjpbWzkyM10sMjU2XSwxMjA1NTc6W1s5MjRdLDI1Nl0sMTIwNTU4OltbOTI1XSwyNTZdLDEyMDU1OTpbWzkyNl0sMjU2XSwxMjA1NjA6W1s5MjddLDI1Nl0sMTIwNTYxOltbOTI4XSwyNTZdLDEyMDU2MjpbWzkyOV0sMjU2XSwxMjA1NjM6W1sxMDEyXSwyNTZdLDEyMDU2NDpbWzkzMV0sMjU2XSwxMjA1NjU6W1s5MzJdLDI1Nl0sMTIwNTY2OltbOTMzXSwyNTZdLDEyMDU2NzpbWzkzNF0sMjU2XSwxMjA1Njg6W1s5MzVdLDI1Nl0sMTIwNTY5OltbOTM2XSwyNTZdLDEyMDU3MDpbWzkzN10sMjU2XSwxMjA1NzE6W1s4NzExXSwyNTZdLDEyMDU3MjpbWzk0NV0sMjU2XSwxMjA1NzM6W1s5NDZdLDI1Nl0sMTIwNTc0OltbOTQ3XSwyNTZdLDEyMDU3NTpbWzk0OF0sMjU2XX0sCjU1MDQwOnsxMjA1NzY6W1s5NDldLDI1Nl0sMTIwNTc3OltbOTUwXSwyNTZdLDEyMDU3ODpbWzk1MV0sMjU2XSwxMjA1Nzk6W1s5NTJdLDI1Nl0sMTIwNTgwOltbOTUzXSwyNTZdLDEyMDU4MTpbWzk1NF0sMjU2XSwxMjA1ODI6W1s5NTVdLDI1Nl0sMTIwNTgzOltbOTU2XSwyNTZdLDEyMDU4NDpbWzk1N10sMjU2XSwxMjA1ODU6W1s5NThdLDI1Nl0sMTIwNTg2OltbOTU5XSwyNTZdLDEyMDU4NzpbWzk2MF0sMjU2XSwxMjA1ODg6W1s5NjFdLDI1Nl0sMTIwNTg5OltbOTYyXSwyNTZdLDEyMDU5MDpbWzk2M10sMjU2XSwxMjA1OTE6W1s5NjRdLDI1Nl0sMTIwNTkyOltbOTY1XSwyNTZdLDEyMDU5MzpbWzk2Nl0sMjU2XSwxMjA1OTQ6W1s5NjddLDI1Nl0sMTIwNTk1OltbOTY4XSwyNTZdLDEyMDU5NjpbWzk2OV0sMjU2XSwxMjA1OTc6W1s4NzA2XSwyNTZdLDEyMDU5ODpbWzEwMTNdLDI1Nl0sMTIwNTk5OltbOTc3XSwyNTZdLDEyMDYwMDpbWzEwMDhdLDI1Nl0sMTIwNjAxOltbOTgxXSwyNTZdLDEyMDYwMjpbWzEwMDldLDI1Nl0sMTIwNjAzOltbOTgyXSwyNTZdLDEyMDYwNDpbWzkxM10sMjU2XSwxMjA2MDU6W1s5MTRdLDI1Nl0sMTIwNjA2OltbOTE1XSwyNTZdLDEyMDYwNzpbWzkxNl0sMjU2XSwxMjA2MDg6W1s5MTddLDI1Nl0sMTIwNjA5OltbOTE4XSwyNTZdLDEyMDYxMDpbWzkxOV0sMjU2XSwxMjA2MTE6W1s5MjBdLDI1Nl0sMTIwNjEyOltbOTIxXSwyNTZdLDEyMDYxMzpbWzkyMl0sMjU2XSwxMjA2MTQ6W1s5MjNdLDI1Nl0sMTIwNjE1OltbOTI0XSwyNTZdLDEyMDYxNjpbWzkyNV0sMjU2XSwxMjA2MTc6W1s5MjZdLDI1Nl0sMTIwNjE4OltbOTI3XSwyNTZdLDEyMDYxOTpbWzkyOF0sMjU2XSwxMjA2MjA6W1s5MjldLDI1Nl0sMTIwNjIxOltbMTAxMl0sMjU2XSwxMjA2MjI6W1s5MzFdLDI1Nl0sMTIwNjIzOltbOTMyXSwyNTZdLDEyMDYyNDpbWzkzM10sMjU2XSwxMjA2MjU6W1s5MzRdLDI1Nl0sMTIwNjI2OltbOTM1XSwyNTZdLDEyMDYyNzpbWzkzNl0sMjU2XSwxMjA2Mjg6W1s5MzddLDI1Nl0sMTIwNjI5OltbODcxMV0sMjU2XSwxMjA2MzA6W1s5NDVdLDI1Nl0sMTIwNjMxOltbOTQ2XSwyNTZdLDEyMDYzMjpbWzk0N10sMjU2XSwxMjA2MzM6W1s5NDhdLDI1Nl0sMTIwNjM0OltbOTQ5XSwyNTZdLDEyMDYzNTpbWzk1MF0sMjU2XSwxMjA2MzY6W1s5NTFdLDI1Nl0sMTIwNjM3OltbOTUyXSwyNTZdLDEyMDYzODpbWzk1M10sMjU2XSwxMjA2Mzk6W1s5NTRdLDI1Nl0sMTIwNjQwOltbOTU1XSwyNTZdLDEyMDY0MTpbWzk1Nl0sMjU2XSwxMjA2NDI6W1s5NTddLDI1Nl0sMTIwNjQzOltbOTU4XSwyNTZdLDEyMDY0NDpbWzk1OV0sMjU2XSwxMjA2NDU6W1s5NjBdLDI1Nl0sMTIwNjQ2OltbOTYxXSwyNTZdLDEyMDY0NzpbWzk2Ml0sMjU2XSwxMjA2NDg6W1s5NjNdLDI1Nl0sMTIwNjQ5OltbOTY0XSwyNTZdLDEyMDY1MDpbWzk2NV0sMjU2XSwxMjA2NTE6W1s5NjZdLDI1Nl0sMTIwNjUyOltbOTY3XSwyNTZdLDEyMDY1MzpbWzk2OF0sMjU2XSwxMjA2NTQ6W1s5NjldLDI1Nl0sMTIwNjU1OltbODcwNl0sMjU2XSwxMjA2NTY6W1sxMDEzXSwyNTZdLDEyMDY1NzpbWzk3N10sMjU2XSwxMjA2NTg6W1sxMDA4XSwyNTZdLDEyMDY1OTpbWzk4MV0sMjU2XSwxMjA2NjA6W1sxMDA5XSwyNTZdLDEyMDY2MTpbWzk4Ml0sMjU2XSwxMjA2NjI6W1s5MTNdLDI1Nl0sMTIwNjYzOltbOTE0XSwyNTZdLDEyMDY2NDpbWzkxNV0sMjU2XSwxMjA2NjU6W1s5MTZdLDI1Nl0sMTIwNjY2OltbOTE3XSwyNTZdLDEyMDY2NzpbWzkxOF0sMjU2XSwxMjA2Njg6W1s5MTldLDI1Nl0sMTIwNjY5OltbOTIwXSwyNTZdLDEyMDY3MDpbWzkyMV0sMjU2XSwxMjA2NzE6W1s5MjJdLDI1Nl0sMTIwNjcyOltbOTIzXSwyNTZdLDEyMDY3MzpbWzkyNF0sMjU2XSwxMjA2NzQ6W1s5MjVdLDI1Nl0sMTIwNjc1OltbOTI2XSwyNTZdLDEyMDY3NjpbWzkyN10sMjU2XSwxMjA2Nzc6W1s5MjhdLDI1Nl0sMTIwNjc4OltbOTI5XSwyNTZdLDEyMDY3OTpbWzEwMTJdLDI1Nl0sMTIwNjgwOltbOTMxXSwyNTZdLDEyMDY4MTpbWzkzMl0sMjU2XSwxMjA2ODI6W1s5MzNdLDI1Nl0sMTIwNjgzOltbOTM0XSwyNTZdLDEyMDY4NDpbWzkzNV0sMjU2XSwxMjA2ODU6W1s5MzZdLDI1Nl0sMTIwNjg2OltbOTM3XSwyNTZdLDEyMDY4NzpbWzg3MTFdLDI1Nl0sMTIwNjg4OltbOTQ1XSwyNTZdLDEyMDY4OTpbWzk0Nl0sMjU2XSwxMjA2OTA6W1s5NDddLDI1Nl0sMTIwNjkxOltbOTQ4XSwyNTZdLDEyMDY5MjpbWzk0OV0sMjU2XSwxMjA2OTM6W1s5NTBdLDI1Nl0sMTIwNjk0OltbOTUxXSwyNTZdLDEyMDY5NTpbWzk1Ml0sMjU2XSwxMjA2OTY6W1s5NTNdLDI1Nl0sMTIwNjk3OltbOTU0XSwyNTZdLDEyMDY5ODpbWzk1NV0sMjU2XSwxMjA2OTk6W1s5NTZdLDI1Nl0sMTIwNzAwOltbOTU3XSwyNTZdLDEyMDcwMTpbWzk1OF0sMjU2XSwxMjA3MDI6W1s5NTldLDI1Nl0sMTIwNzAzOltbOTYwXSwyNTZdLDEyMDcwNDpbWzk2MV0sMjU2XSwxMjA3MDU6W1s5NjJdLDI1Nl0sMTIwNzA2OltbOTYzXSwyNTZdLDEyMDcwNzpbWzk2NF0sMjU2XSwxMjA3MDg6W1s5NjVdLDI1Nl0sMTIwNzA5OltbOTY2XSwyNTZdLDEyMDcxMDpbWzk2N10sMjU2XSwxMjA3MTE6W1s5NjhdLDI1Nl0sMTIwNzEyOltbOTY5XSwyNTZdLDEyMDcxMzpbWzg3MDZdLDI1Nl0sMTIwNzE0OltbMTAxM10sMjU2XSwxMjA3MTU6W1s5NzddLDI1Nl0sMTIwNzE2OltbMTAwOF0sMjU2XSwxMjA3MTc6W1s5ODFdLDI1Nl0sMTIwNzE4OltbMTAwOV0sMjU2XSwxMjA3MTk6W1s5ODJdLDI1Nl0sMTIwNzIwOltbOTEzXSwyNTZdLDEyMDcyMTpbWzkxNF0sMjU2XSwxMjA3MjI6W1s5MTVdLDI1Nl0sMTIwNzIzOltbOTE2XSwyNTZdLDEyMDcyNDpbWzkxN10sMjU2XSwxMjA3MjU6W1s5MThdLDI1Nl0sMTIwNzI2OltbOTE5XSwyNTZdLDEyMDcyNzpbWzkyMF0sMjU2XSwxMjA3Mjg6W1s5MjFdLDI1Nl0sMTIwNzI5OltbOTIyXSwyNTZdLDEyMDczMDpbWzkyM10sMjU2XSwxMjA3MzE6W1s5MjRdLDI1Nl0sMTIwNzMyOltbOTI1XSwyNTZdLDEyMDczMzpbWzkyNl0sMjU2XSwxMjA3MzQ6W1s5MjddLDI1Nl0sMTIwNzM1OltbOTI4XSwyNTZdLDEyMDczNjpbWzkyOV0sMjU2XSwxMjA3Mzc6W1sxMDEyXSwyNTZdLDEyMDczODpbWzkzMV0sMjU2XSwxMjA3Mzk6W1s5MzJdLDI1Nl0sMTIwNzQwOltbOTMzXSwyNTZdLDEyMDc0MTpbWzkzNF0sMjU2XSwxMjA3NDI6W1s5MzVdLDI1Nl0sMTIwNzQzOltbOTM2XSwyNTZdLDEyMDc0NDpbWzkzN10sMjU2XSwxMjA3NDU6W1s4NzExXSwyNTZdLDEyMDc0NjpbWzk0NV0sMjU2XSwxMjA3NDc6W1s5NDZdLDI1Nl0sMTIwNzQ4OltbOTQ3XSwyNTZdLDEyMDc0OTpbWzk0OF0sMjU2XSwxMjA3NTA6W1s5NDldLDI1Nl0sMTIwNzUxOltbOTUwXSwyNTZdLDEyMDc1MjpbWzk1MV0sMjU2XSwxMjA3NTM6W1s5NTJdLDI1Nl0sMTIwNzU0OltbOTUzXSwyNTZdLDEyMDc1NTpbWzk1NF0sMjU2XSwxMjA3NTY6W1s5NTVdLDI1Nl0sMTIwNzU3OltbOTU2XSwyNTZdLDEyMDc1ODpbWzk1N10sMjU2XSwxMjA3NTk6W1s5NThdLDI1Nl0sMTIwNzYwOltbOTU5XSwyNTZdLDEyMDc2MTpbWzk2MF0sMjU2XSwxMjA3NjI6W1s5NjFdLDI1Nl0sMTIwNzYzOltbOTYyXSwyNTZdLDEyMDc2NDpbWzk2M10sMjU2XSwxMjA3NjU6W1s5NjRdLDI1Nl0sMTIwNzY2OltbOTY1XSwyNTZdLDEyMDc2NzpbWzk2Nl0sMjU2XSwxMjA3Njg6W1s5NjddLDI1Nl0sMTIwNzY5OltbOTY4XSwyNTZdLDEyMDc3MDpbWzk2OV0sMjU2XSwxMjA3NzE6W1s4NzA2XSwyNTZdLDEyMDc3MjpbWzEwMTNdLDI1Nl0sMTIwNzczOltbOTc3XSwyNTZdLDEyMDc3NDpbWzEwMDhdLDI1Nl0sMTIwNzc1OltbOTgxXSwyNTZdLDEyMDc3NjpbWzEwMDldLDI1Nl0sMTIwNzc3OltbOTgyXSwyNTZdLDEyMDc3ODpbWzk4OF0sMjU2XSwxMjA3Nzk6W1s5ODldLDI1Nl0sMTIwNzgyOltbNDhdLDI1Nl0sMTIwNzgzOltbNDldLDI1Nl0sMTIwNzg0OltbNTBdLDI1Nl0sMTIwNzg1OltbNTFdLDI1Nl0sMTIwNzg2OltbNTJdLDI1Nl0sMTIwNzg3OltbNTNdLDI1Nl0sMTIwNzg4OltbNTRdLDI1Nl0sMTIwNzg5OltbNTVdLDI1Nl0sMTIwNzkwOltbNTZdLDI1Nl0sMTIwNzkxOltbNTddLDI1Nl0sMTIwNzkyOltbNDhdLDI1Nl0sMTIwNzkzOltbNDldLDI1Nl0sMTIwNzk0OltbNTBdLDI1Nl0sMTIwNzk1OltbNTFdLDI1Nl0sMTIwNzk2OltbNTJdLDI1Nl0sMTIwNzk3OltbNTNdLDI1Nl0sMTIwNzk4OltbNTRdLDI1Nl0sMTIwNzk5OltbNTVdLDI1Nl0sMTIwODAwOltbNTZdLDI1Nl0sMTIwODAxOltbNTddLDI1Nl0sMTIwODAyOltbNDhdLDI1Nl0sMTIwODAzOltbNDldLDI1Nl0sMTIwODA0OltbNTBdLDI1Nl0sMTIwODA1OltbNTFdLDI1Nl0sMTIwODA2OltbNTJdLDI1Nl0sMTIwODA3OltbNTNdLDI1Nl0sMTIwODA4OltbNTRdLDI1Nl0sMTIwODA5OltbNTVdLDI1Nl0sMTIwODEwOltbNTZdLDI1Nl0sMTIwODExOltbNTddLDI1Nl0sMTIwODEyOltbNDhdLDI1Nl0sMTIwODEzOltbNDldLDI1Nl0sMTIwODE0OltbNTBdLDI1Nl0sMTIwODE1OltbNTFdLDI1Nl0sMTIwODE2OltbNTJdLDI1Nl0sMTIwODE3OltbNTNdLDI1Nl0sMTIwODE4OltbNTRdLDI1Nl0sMTIwODE5OltbNTVdLDI1Nl0sMTIwODIwOltbNTZdLDI1Nl0sMTIwODIxOltbNTddLDI1Nl0sMTIwODIyOltbNDhdLDI1Nl0sMTIwODIzOltbNDldLDI1Nl0sMTIwODI0OltbNTBdLDI1Nl0sMTIwODI1OltbNTFdLDI1Nl0sMTIwODI2OltbNTJdLDI1Nl0sMTIwODI3OltbNTNdLDI1Nl0sMTIwODI4OltbNTRdLDI1Nl0sMTIwODI5OltbNTVdLDI1Nl0sMTIwODMwOltbNTZdLDI1Nl0sMTIwODMxOltbNTddLDI1Nl19LAo1OTM5Mjp7MTI1MTM2OlssMjIwXSwxMjUxMzc6WywyMjBdLDEyNTEzODpbLDIyMF0sMTI1MTM5OlssMjIwXSwxMjUxNDA6WywyMjBdLDEyNTE0MTpbLDIyMF0sMTI1MTQyOlssMjIwXX0sCjYwOTI4OnsxMjY0NjQ6W1sxNTc1XSwyNTZdLDEyNjQ2NTpbWzE1NzZdLDI1Nl0sMTI2NDY2OltbMTU4MF0sMjU2XSwxMjY0Njc6W1sxNTgzXSwyNTZdLDEyNjQ2OTpbWzE2MDhdLDI1Nl0sMTI2NDcwOltbMTU4Nl0sMjU2XSwxMjY0NzE6W1sxNTgxXSwyNTZdLDEyNjQ3MjpbWzE1OTFdLDI1Nl0sMTI2NDczOltbMTYxMF0sMjU2XSwxMjY0NzQ6W1sxNjAzXSwyNTZdLDEyNjQ3NTpbWzE2MDRdLDI1Nl0sMTI2NDc2OltbMTYwNV0sMjU2XSwxMjY0Nzc6W1sxNjA2XSwyNTZdLDEyNjQ3ODpbWzE1ODddLDI1Nl0sMTI2NDc5OltbMTU5M10sMjU2XSwxMjY0ODA6W1sxNjAxXSwyNTZdLDEyNjQ4MTpbWzE1ODldLDI1Nl0sMTI2NDgyOltbMTYwMl0sMjU2XSwxMjY0ODM6W1sxNTg1XSwyNTZdLDEyNjQ4NDpbWzE1ODhdLDI1Nl0sMTI2NDg1OltbMTU3OF0sMjU2XSwxMjY0ODY6W1sxNTc5XSwyNTZdLDEyNjQ4NzpbWzE1ODJdLDI1Nl0sMTI2NDg4OltbMTU4NF0sMjU2XSwxMjY0ODk6W1sxNTkwXSwyNTZdLDEyNjQ5MDpbWzE1OTJdLDI1Nl0sMTI2NDkxOltbMTU5NF0sMjU2XSwxMjY0OTI6W1sxNjQ2XSwyNTZdLDEyNjQ5MzpbWzE3MjJdLDI1Nl0sMTI2NDk0OltbMTY5N10sMjU2XSwxMjY0OTU6W1sxNjQ3XSwyNTZdLDEyNjQ5NzpbWzE1NzZdLDI1Nl0sMTI2NDk4OltbMTU4MF0sMjU2XSwxMjY1MDA6W1sxNjA3XSwyNTZdLDEyNjUwMzpbWzE1ODFdLDI1Nl0sMTI2NTA1OltbMTYxMF0sMjU2XSwxMjY1MDY6W1sxNjAzXSwyNTZdLDEyNjUwNzpbWzE2MDRdLDI1Nl0sMTI2NTA4OltbMTYwNV0sMjU2XSwxMjY1MDk6W1sxNjA2XSwyNTZdLDEyNjUxMDpbWzE1ODddLDI1Nl0sMTI2NTExOltbMTU5M10sMjU2XSwxMjY1MTI6W1sxNjAxXSwyNTZdLDEyNjUxMzpbWzE1ODldLDI1Nl0sMTI2NTE0OltbMTYwMl0sMjU2XSwxMjY1MTY6W1sxNTg4XSwyNTZdLDEyNjUxNzpbWzE1NzhdLDI1Nl0sMTI2NTE4OltbMTU3OV0sMjU2XSwxMjY1MTk6W1sxNTgyXSwyNTZdLDEyNjUyMTpbWzE1OTBdLDI1Nl0sMTI2NTIzOltbMTU5NF0sMjU2XSwxMjY1MzA6W1sxNTgwXSwyNTZdLDEyNjUzNTpbWzE1ODFdLDI1Nl0sMTI2NTM3OltbMTYxMF0sMjU2XSwxMjY1Mzk6W1sxNjA0XSwyNTZdLDEyNjU0MTpbWzE2MDZdLDI1Nl0sMTI2NTQyOltbMTU4N10sMjU2XSwxMjY1NDM6W1sxNTkzXSwyNTZdLDEyNjU0NTpbWzE1ODldLDI1Nl0sMTI2NTQ2OltbMTYwMl0sMjU2XSwxMjY1NDg6W1sxNTg4XSwyNTZdLDEyNjU1MTpbWzE1ODJdLDI1Nl0sMTI2NTUzOltbMTU5MF0sMjU2XSwxMjY1NTU6W1sxNTk0XSwyNTZdLDEyNjU1NzpbWzE3MjJdLDI1Nl0sMTI2NTU5OltbMTY0N10sMjU2XSwxMjY1NjE6W1sxNTc2XSwyNTZdLDEyNjU2MjpbWzE1ODBdLDI1Nl0sMTI2NTY0OltbMTYwN10sMjU2XSwxMjY1Njc6W1sxNTgxXSwyNTZdLDEyNjU2ODpbWzE1OTFdLDI1Nl0sMTI2NTY5OltbMTYxMF0sMjU2XSwxMjY1NzA6W1sxNjAzXSwyNTZdLDEyNjU3MjpbWzE2MDVdLDI1Nl0sMTI2NTczOltbMTYwNl0sMjU2XSwxMjY1NzQ6W1sxNTg3XSwyNTZdLDEyNjU3NTpbWzE1OTNdLDI1Nl0sMTI2NTc2OltbMTYwMV0sMjU2XSwxMjY1Nzc6W1sxNTg5XSwyNTZdLDEyNjU3ODpbWzE2MDJdLDI1Nl0sMTI2NTgwOltbMTU4OF0sMjU2XSwxMjY1ODE6W1sxNTc4XSwyNTZdLDEyNjU4MjpbWzE1NzldLDI1Nl0sMTI2NTgzOltbMTU4Ml0sMjU2XSwxMjY1ODU6W1sxNTkwXSwyNTZdLDEyNjU4NjpbWzE1OTJdLDI1Nl0sMTI2NTg3OltbMTU5NF0sMjU2XSwxMjY1ODg6W1sxNjQ2XSwyNTZdLDEyNjU5MDpbWzE2OTddLDI1Nl0sMTI2NTkyOltbMTU3NV0sMjU2XSwxMjY1OTM6W1sxNTc2XSwyNTZdLDEyNjU5NDpbWzE1ODBdLDI1Nl0sMTI2NTk1OltbMTU4M10sMjU2XSwxMjY1OTY6W1sxNjA3XSwyNTZdLDEyNjU5NzpbWzE2MDhdLDI1Nl0sMTI2NTk4OltbMTU4Nl0sMjU2XSwxMjY1OTk6W1sxNTgxXSwyNTZdLDEyNjYwMDpbWzE1OTFdLDI1Nl0sMTI2NjAxOltbMTYxMF0sMjU2XSwxMjY2MDM6W1sxNjA0XSwyNTZdLDEyNjYwNDpbWzE2MDVdLDI1Nl0sMTI2NjA1OltbMTYwNl0sMjU2XSwxMjY2MDY6W1sxNTg3XSwyNTZdLDEyNjYwNzpbWzE1OTNdLDI1Nl0sMTI2NjA4OltbMTYwMV0sMjU2XSwxMjY2MDk6W1sxNTg5XSwyNTZdLDEyNjYxMDpbWzE2MDJdLDI1Nl0sMTI2NjExOltbMTU4NV0sMjU2XSwxMjY2MTI6W1sxNTg4XSwyNTZdLDEyNjYxMzpbWzE1NzhdLDI1Nl0sMTI2NjE0OltbMTU3OV0sMjU2XSwxMjY2MTU6W1sxNTgyXSwyNTZdLDEyNjYxNjpbWzE1ODRdLDI1Nl0sMTI2NjE3OltbMTU5MF0sMjU2XSwxMjY2MTg6W1sxNTkyXSwyNTZdLDEyNjYxOTpbWzE1OTRdLDI1Nl0sMTI2NjI1OltbMTU3Nl0sMjU2XSwxMjY2MjY6W1sxNTgwXSwyNTZdLDEyNjYyNzpbWzE1ODNdLDI1Nl0sMTI2NjI5OltbMTYwOF0sMjU2XSwxMjY2MzA6W1sxNTg2XSwyNTZdLDEyNjYzMTpbWzE1ODFdLDI1Nl0sMTI2NjMyOltbMTU5MV0sMjU2XSwxMjY2MzM6W1sxNjEwXSwyNTZdLDEyNjYzNTpbWzE2MDRdLDI1Nl0sMTI2NjM2OltbMTYwNV0sMjU2XSwxMjY2Mzc6W1sxNjA2XSwyNTZdLDEyNjYzODpbWzE1ODddLDI1Nl0sMTI2NjM5OltbMTU5M10sMjU2XSwxMjY2NDA6W1sxNjAxXSwyNTZdLDEyNjY0MTpbWzE1ODldLDI1Nl0sMTI2NjQyOltbMTYwMl0sMjU2XSwxMjY2NDM6W1sxNTg1XSwyNTZdLDEyNjY0NDpbWzE1ODhdLDI1Nl0sMTI2NjQ1OltbMTU3OF0sMjU2XSwxMjY2NDY6W1sxNTc5XSwyNTZdLDEyNjY0NzpbWzE1ODJdLDI1Nl0sMTI2NjQ4OltbMTU4NF0sMjU2XSwxMjY2NDk6W1sxNTkwXSwyNTZdLDEyNjY1MDpbWzE1OTJdLDI1Nl0sMTI2NjUxOltbMTU5NF0sMjU2XX0sCjYxNjk2OnsxMjcyMzI6W1s0OCw0Nl0sMjU2XSwxMjcyMzM6W1s0OCw0NF0sMjU2XSwxMjcyMzQ6W1s0OSw0NF0sMjU2XSwxMjcyMzU6W1s1MCw0NF0sMjU2XSwxMjcyMzY6W1s1MSw0NF0sMjU2XSwxMjcyMzc6W1s1Miw0NF0sMjU2XSwxMjcyMzg6W1s1Myw0NF0sMjU2XSwxMjcyMzk6W1s1NCw0NF0sMjU2XSwxMjcyNDA6W1s1NSw0NF0sMjU2XSwxMjcyNDE6W1s1Niw0NF0sMjU2XSwxMjcyNDI6W1s1Nyw0NF0sMjU2XSwxMjcyNDg6W1s0MCw2NSw0MV0sMjU2XSwxMjcyNDk6W1s0MCw2Niw0MV0sMjU2XSwxMjcyNTA6W1s0MCw2Nyw0MV0sMjU2XSwxMjcyNTE6W1s0MCw2OCw0MV0sMjU2XSwxMjcyNTI6W1s0MCw2OSw0MV0sMjU2XSwxMjcyNTM6W1s0MCw3MCw0MV0sMjU2XSwxMjcyNTQ6W1s0MCw3MSw0MV0sMjU2XSwxMjcyNTU6W1s0MCw3Miw0MV0sMjU2XSwxMjcyNTY6W1s0MCw3Myw0MV0sMjU2XSwxMjcyNTc6W1s0MCw3NCw0MV0sMjU2XSwxMjcyNTg6W1s0MCw3NSw0MV0sMjU2XSwxMjcyNTk6W1s0MCw3Niw0MV0sMjU2XSwxMjcyNjA6W1s0MCw3Nyw0MV0sMjU2XSwxMjcyNjE6W1s0MCw3OCw0MV0sMjU2XSwxMjcyNjI6W1s0MCw3OSw0MV0sMjU2XSwxMjcyNjM6W1s0MCw4MCw0MV0sMjU2XSwxMjcyNjQ6W1s0MCw4MSw0MV0sMjU2XSwxMjcyNjU6W1s0MCw4Miw0MV0sMjU2XSwxMjcyNjY6W1s0MCw4Myw0MV0sMjU2XSwxMjcyNjc6W1s0MCw4NCw0MV0sMjU2XSwxMjcyNjg6W1s0MCw4NSw0MV0sMjU2XSwxMjcyNjk6W1s0MCw4Niw0MV0sMjU2XSwxMjcyNzA6W1s0MCw4Nyw0MV0sMjU2XSwxMjcyNzE6W1s0MCw4OCw0MV0sMjU2XSwxMjcyNzI6W1s0MCw4OSw0MV0sMjU2XSwxMjcyNzM6W1s0MCw5MCw0MV0sMjU2XSwxMjcyNzQ6W1sxMjMwOCw4MywxMjMwOV0sMjU2XSwxMjcyNzU6W1s2N10sMjU2XSwxMjcyNzY6W1s4Ml0sMjU2XSwxMjcyNzc6W1s2Nyw2OF0sMjU2XSwxMjcyNzg6W1s4Nyw5MF0sMjU2XSwxMjcyODA6W1s2NV0sMjU2XSwxMjcyODE6W1s2Nl0sMjU2XSwxMjcyODI6W1s2N10sMjU2XSwxMjcyODM6W1s2OF0sMjU2XSwxMjcyODQ6W1s2OV0sMjU2XSwxMjcyODU6W1s3MF0sMjU2XSwxMjcyODY6W1s3MV0sMjU2XSwxMjcyODc6W1s3Ml0sMjU2XSwxMjcyODg6W1s3M10sMjU2XSwxMjcyODk6W1s3NF0sMjU2XSwxMjcyOTA6W1s3NV0sMjU2XSwxMjcyOTE6W1s3Nl0sMjU2XSwxMjcyOTI6W1s3N10sMjU2XSwxMjcyOTM6W1s3OF0sMjU2XSwxMjcyOTQ6W1s3OV0sMjU2XSwxMjcyOTU6W1s4MF0sMjU2XSwxMjcyOTY6W1s4MV0sMjU2XSwxMjcyOTc6W1s4Ml0sMjU2XSwxMjcyOTg6W1s4M10sMjU2XSwxMjcyOTk6W1s4NF0sMjU2XSwxMjczMDA6W1s4NV0sMjU2XSwxMjczMDE6W1s4Nl0sMjU2XSwxMjczMDI6W1s4N10sMjU2XSwxMjczMDM6W1s4OF0sMjU2XSwxMjczMDQ6W1s4OV0sMjU2XSwxMjczMDU6W1s5MF0sMjU2XSwxMjczMDY6W1s3Miw4Nl0sMjU2XSwxMjczMDc6W1s3Nyw4Nl0sMjU2XSwxMjczMDg6W1s4Myw2OF0sMjU2XSwxMjczMDk6W1s4Myw4M10sMjU2XSwxMjczMTA6W1s4MCw4MCw4Nl0sMjU2XSwxMjczMTE6W1s4Nyw2N10sMjU2XSwxMjczMzg6W1s3Nyw2N10sMjU2XSwxMjczMzk6W1s3Nyw2OF0sMjU2XSwxMjczNzY6W1s2OCw3NF0sMjU2XX0sCjYxOTUyOnsxMjc0ODg6W1sxMjQxMSwxMjM2M10sMjU2XSwxMjc0ODk6W1sxMjQ2NywxMjQ2N10sMjU2XSwxMjc0OTA6W1sxMjQ2OV0sMjU2XSwxMjc1MDQ6W1syNTE2M10sMjU2XSwxMjc1MDU6W1syMzM4M10sMjU2XSwxMjc1MDY6W1syMTQ1Ml0sMjU2XSwxMjc1MDc6W1sxMjQ4N10sMjU2XSwxMjc1MDg6W1syMDEwOF0sMjU2XSwxMjc1MDk6W1syMjgxMF0sMjU2XSwxMjc1MTA6W1szNTI5OV0sMjU2XSwxMjc1MTE6W1syMjgyNV0sMjU2XSwxMjc1MTI6W1syMDEzMl0sMjU2XSwxMjc1MTM6W1syNjE0NF0sMjU2XSwxMjc1MTQ6W1syODk2MV0sMjU2XSwxMjc1MTU6W1syNjAwOV0sMjU2XSwxMjc1MTY6W1syMTA2OV0sMjU2XSwxMjc1MTc6W1syNDQ2MF0sMjU2XSwxMjc1MTg6W1syMDg3N10sMjU2XSwxMjc1MTk6W1syNjAzMl0sMjU2XSwxMjc1MjA6W1syMTAyMV0sMjU2XSwxMjc1MjE6W1szMjA2Nl0sMjU2XSwxMjc1MjI6W1syOTk4M10sMjU2XSwxMjc1MjM6W1szNjAwOV0sMjU2XSwxMjc1MjQ6W1syMjc2OF0sMjU2XSwxMjc1MjU6W1syMTU2MV0sMjU2XSwxMjc1MjY6W1syODQzNl0sMjU2XSwxMjc1Mjc6W1syNTIzN10sMjU2XSwxMjc1Mjg6W1syNTQyOV0sMjU2XSwxMjc1Mjk6W1sxOTk2OF0sMjU2XSwxMjc1MzA6W1sxOTk3N10sMjU2XSwxMjc1MzE6W1szNjkzOF0sMjU2XSwxMjc1MzI6W1syNDAzOF0sMjU2XSwxMjc1MzM6W1syMDAxM10sMjU2XSwxMjc1MzQ6W1syMTQ5MV0sMjU2XSwxMjc1MzU6W1syNTM1MV0sMjU2XSwxMjc1MzY6W1szNjIwOF0sMjU2XSwxMjc1Mzc6W1syNTE3MV0sMjU2XSwxMjc1Mzg6W1szMTEwNV0sMjU2XSwxMjc1Mzk6W1szMTM1NF0sMjU2XSwxMjc1NDA6W1syMTUxMl0sMjU2XSwxMjc1NDE6W1syODI4OF0sMjU2XSwxMjc1NDI6W1syNjM3N10sMjU2XSwxMjc1NDM6W1syNjM3Nl0sMjU2XSwxMjc1NDQ6W1szMDAwM10sMjU2XSwxMjc1NDU6W1syMTEwNl0sMjU2XSwxMjc1NDY6W1syMTk0Ml0sMjU2XSwxMjc1NTI6W1sxMjMwOCwyNjQxMiwxMjMwOV0sMjU2XSwxMjc1NTM6W1sxMjMwOCwxOTk3NywxMjMwOV0sMjU2XSwxMjc1NTQ6W1sxMjMwOCwyMDEwOCwxMjMwOV0sMjU2XSwxMjc1NTU6W1sxMjMwOCwyMzQzMywxMjMwOV0sMjU2XSwxMjc1NTY6W1sxMjMwOCwyODg1NywxMjMwOV0sMjU2XSwxMjc1NTc6W1sxMjMwOCwyNTE3MSwxMjMwOV0sMjU2XSwxMjc1NTg6W1sxMjMwOCwzMDQyMywxMjMwOV0sMjU2XSwxMjc1NTk6W1sxMjMwOCwyMTIxMywxMjMwOV0sMjU2XSwxMjc1NjA6W1sxMjMwOCwyNTk0MywxMjMwOV0sMjU2XSwxMjc1Njg6W1syNDQ3MV0sMjU2XSwxMjc1Njk6W1syMTQ4N10sMjU2XX0sCjYzNDg4OnsxOTQ1NjA6W1syMDAyOV1dLDE5NDU2MTpbWzIwMDI0XV0sMTk0NTYyOltbMjAwMzNdXSwxOTQ1NjM6W1sxMzEzNjJdXSwxOTQ1NjQ6W1syMDMyMF1dLDE5NDU2NTpbWzIwMzk4XV0sMTk0NTY2OltbMjA0MTFdXSwxOTQ1Njc6W1syMDQ4Ml1dLDE5NDU2ODpbWzIwNjAyXV0sMTk0NTY5OltbMjA2MzNdXSwxOTQ1NzA6W1syMDcxMV1dLDE5NDU3MTpbWzIwNjg3XV0sMTk0NTcyOltbMTM0NzBdXSwxOTQ1NzM6W1sxMzI2NjZdXSwxOTQ1NzQ6W1syMDgxM11dLDE5NDU3NTpbWzIwODIwXV0sMTk0NTc2OltbMjA4MzZdXSwxOTQ1Nzc6W1syMDg1NV1dLDE5NDU3ODpbWzEzMjM4MF1dLDE5NDU3OTpbWzEzNDk3XV0sMTk0NTgwOltbMjA4MzldXSwxOTQ1ODE6W1syMDg3N11dLDE5NDU4MjpbWzEzMjQyN11dLDE5NDU4MzpbWzIwODg3XV0sMTk0NTg0OltbMjA5MDBdXSwxOTQ1ODU6W1syMDE3Ml1dLDE5NDU4NjpbWzIwOTA4XV0sMTk0NTg3OltbMjA5MTddXSwxOTQ1ODg6W1sxNjg0MTVdXSwxOTQ1ODk6W1syMDk4MV1dLDE5NDU5MDpbWzIwOTk1XV0sMTk0NTkxOltbMTM1MzVdXSwxOTQ1OTI6W1syMTA1MV1dLDE5NDU5MzpbWzIxMDYyXV0sMTk0NTk0OltbMjExMDZdXSwxOTQ1OTU6W1syMTExMV1dLDE5NDU5NjpbWzEzNTg5XV0sMTk0NTk3OltbMjExOTFdXSwxOTQ1OTg6W1syMTE5M11dLDE5NDU5OTpbWzIxMjIwXV0sMTk0NjAwOltbMjEyNDJdXSwxOTQ2MDE6W1syMTI1M11dLDE5NDYwMjpbWzIxMjU0XV0sMTk0NjAzOltbMjEyNzFdXSwxOTQ2MDQ6W1syMTMyMV1dLDE5NDYwNTpbWzIxMzI5XV0sMTk0NjA2OltbMjEzMzhdXSwxOTQ2MDc6W1syMTM2M11dLDE5NDYwODpbWzIxMzczXV0sMTk0NjA5OltbMjEzNzVdXSwxOTQ2MTA6W1syMTM3NV1dLDE5NDYxMTpbWzIxMzc1XV0sMTk0NjEyOltbMTMzNjc2XV0sMTk0NjEzOltbMjg3ODRdXSwxOTQ2MTQ6W1syMTQ1MF1dLDE5NDYxNTpbWzIxNDcxXV0sMTk0NjE2OltbMTMzOTg3XV0sMTk0NjE3OltbMjE0ODNdXSwxOTQ2MTg6W1syMTQ4OV1dLDE5NDYxOTpbWzIxNTEwXV0sMTk0NjIwOltbMjE2NjJdXSwxOTQ2MjE6W1syMTU2MF1dLDE5NDYyMjpbWzIxNTc2XV0sMTk0NjIzOltbMjE2MDhdXSwxOTQ2MjQ6W1syMTY2Nl1dLDE5NDYyNTpbWzIxNzUwXV0sMTk0NjI2OltbMjE3NzZdXSwxOTQ2Mjc6W1syMTg0M11dLDE5NDYyODpbWzIxODU5XV0sMTk0NjI5OltbMjE4OTJdXSwxOTQ2MzA6W1syMTg5Ml1dLDE5NDYzMTpbWzIxOTEzXV0sMTk0NjMyOltbMjE5MzFdXSwxOTQ2MzM6W1syMTkzOV1dLDE5NDYzNDpbWzIxOTU0XV0sMTk0NjM1OltbMjIyOTRdXSwxOTQ2MzY6W1syMjAyMl1dLDE5NDYzNzpbWzIyMjk1XV0sMTk0NjM4OltbMjIwOTddXSwxOTQ2Mzk6W1syMjEzMl1dLDE5NDY0MDpbWzIwOTk5XV0sMTk0NjQxOltbMjI3NjZdXSwxOTQ2NDI6W1syMjQ3OF1dLDE5NDY0MzpbWzIyNTE2XV0sMTk0NjQ0OltbMjI1NDFdXSwxOTQ2NDU6W1syMjQxMV1dLDE5NDY0NjpbWzIyNTc4XV0sMTk0NjQ3OltbMjI1NzddXSwxOTQ2NDg6W1syMjcwMF1dLDE5NDY0OTpbWzEzNjQyMF1dLDE5NDY1MDpbWzIyNzcwXV0sMTk0NjUxOltbMjI3NzVdXSwxOTQ2NTI6W1syMjc5MF1dLDE5NDY1MzpbWzIyODEwXV0sMTk0NjU0OltbMjI4MThdXSwxOTQ2NTU6W1syMjg4Ml1dLDE5NDY1NjpbWzEzNjg3Ml1dLDE5NDY1NzpbWzEzNjkzOF1dLDE5NDY1ODpbWzIzMDIwXV0sMTk0NjU5OltbMjMwNjddXSwxOTQ2NjA6W1syMzA3OV1dLDE5NDY2MTpbWzIzMDAwXV0sMTk0NjYyOltbMjMxNDJdXSwxOTQ2NjM6W1sxNDA2Ml1dLDE5NDY2NDpbWzE0MDc2XV0sMTk0NjY1OltbMjMzMDRdXSwxOTQ2NjY6W1syMzM1OF1dLDE5NDY2NzpbWzIzMzU4XV0sMTk0NjY4OltbMTM3NjcyXV0sMTk0NjY5OltbMjM0OTFdXSwxOTQ2NzA6W1syMzUxMl1dLDE5NDY3MTpbWzIzNTI3XV0sMTk0NjcyOltbMjM1MzldXSwxOTQ2NzM6W1sxMzgwMDhdXSwxOTQ2NzQ6W1syMzU1MV1dLDE5NDY3NTpbWzIzNTU4XV0sMTk0Njc2OltbMjQ0MDNdXSwxOTQ2Nzc6W1syMzU4Nl1dLDE5NDY3ODpbWzE0MjA5XV0sMTk0Njc5OltbMjM2NDhdXSwxOTQ2ODA6W1syMzY2Ml1dLDE5NDY4MTpbWzIzNzQ0XV0sMTk0NjgyOltbMjM2OTNdXSwxOTQ2ODM6W1sxMzg3MjRdXSwxOTQ2ODQ6W1syMzg3NV1dLDE5NDY4NTpbWzEzODcyNl1dLDE5NDY4NjpbWzIzOTE4XV0sMTk0Njg3OltbMjM5MTVdXSwxOTQ2ODg6W1syMzkzMl1dLDE5NDY4OTpbWzI0MDMzXV0sMTk0NjkwOltbMjQwMzRdXSwxOTQ2OTE6W1sxNDM4M11dLDE5NDY5MjpbWzI0MDYxXV0sMTk0NjkzOltbMjQxMDRdXSwxOTQ2OTQ6W1syNDEyNV1dLDE5NDY5NTpbWzI0MTY5XV0sMTk0Njk2OltbMTQ0MzRdXSwxOTQ2OTc6W1sxMzk2NTFdXSwxOTQ2OTg6W1sxNDQ2MF1dLDE5NDY5OTpbWzI0MjQwXV0sMTk0NzAwOltbMjQyNDNdXSwxOTQ3MDE6W1syNDI0Nl1dLDE5NDcwMjpbWzI0MjY2XV0sMTk0NzAzOltbMTcyOTQ2XV0sMTk0NzA0OltbMjQzMThdXSwxOTQ3MDU6W1sxNDAwODFdXSwxOTQ3MDY6W1sxNDAwODFdXSwxOTQ3MDc6W1szMzI4MV1dLDE5NDcwODpbWzI0MzU0XV0sMTk0NzA5OltbMjQzNTRdXSwxOTQ3MTA6W1sxNDUzNV1dLDE5NDcxMTpbWzE0NDA1Nl1dLDE5NDcxMjpbWzE1NjEyMl1dLDE5NDcxMzpbWzI0NDE4XV0sMTk0NzE0OltbMjQ0MjddXSwxOTQ3MTU6W1sxNDU2M11dLDE5NDcxNjpbWzI0NDc0XV0sMTk0NzE3OltbMjQ1MjVdXSwxOTQ3MTg6W1syNDUzNV1dLDE5NDcxOTpbWzI0NTY5XV0sMTk0NzIwOltbMjQ3MDVdXSwxOTQ3MjE6W1sxNDY1MF1dLDE5NDcyMjpbWzE0NjIwXV0sMTk0NzIzOltbMjQ3MjRdXSwxOTQ3MjQ6W1sxNDEwMTJdXSwxOTQ3MjU6W1syNDc3NV1dLDE5NDcyNjpbWzI0OTA0XV0sMTk0NzI3OltbMjQ5MDhdXSwxOTQ3Mjg6W1syNDkxMF1dLDE5NDcyOTpbWzI0OTA4XV0sMTk0NzMwOltbMjQ5NTRdXSwxOTQ3MzE6W1syNDk3NF1dLDE5NDczMjpbWzI1MDEwXV0sMTk0NzMzOltbMjQ5OTZdXSwxOTQ3MzQ6W1syNTAwN11dLDE5NDczNTpbWzI1MDU0XV0sMTk0NzM2OltbMjUwNzRdXSwxOTQ3Mzc6W1syNTA3OF1dLDE5NDczODpbWzI1MTA0XV0sMTk0NzM5OltbMjUxMTVdXSwxOTQ3NDA6W1syNTE4MV1dLDE5NDc0MTpbWzI1MjY1XV0sMTk0NzQyOltbMjUzMDBdXSwxOTQ3NDM6W1syNTQyNF1dLDE5NDc0NDpbWzE0MjA5Ml1dLDE5NDc0NTpbWzI1NDA1XV0sMTk0NzQ2OltbMjUzNDBdXSwxOTQ3NDc6W1syNTQ0OF1dLDE5NDc0ODpbWzI1NDc1XV0sMTk0NzQ5OltbMjU1NzJdXSwxOTQ3NTA6W1sxNDIzMjFdXSwxOTQ3NTE6W1syNTYzNF1dLDE5NDc1MjpbWzI1NTQxXV0sMTk0NzUzOltbMjU1MTNdXSwxOTQ3NTQ6W1sxNDg5NF1dLDE5NDc1NTpbWzI1NzA1XV0sMTk0NzU2OltbMjU3MjZdXSwxOTQ3NTc6W1syNTc1N11dLDE5NDc1ODpbWzI1NzE5XV0sMTk0NzU5OltbMTQ5NTZdXSwxOTQ3NjA6W1syNTkzNV1dLDE5NDc2MTpbWzI1OTY0XV0sMTk0NzYyOltbMTQzMzcwXV0sMTk0NzYzOltbMjYwODNdXSwxOTQ3NjQ6W1syNjM2MF1dLDE5NDc2NTpbWzI2MTg1XV0sMTk0NzY2OltbMTUxMjldXSwxOTQ3Njc6W1syNjI1N11dLDE5NDc2ODpbWzE1MTEyXV0sMTk0NzY5OltbMTUwNzZdXSwxOTQ3NzA6W1syMDg4Ml1dLDE5NDc3MTpbWzIwODg1XV0sMTk0NzcyOltbMjYzNjhdXSwxOTQ3NzM6W1syNjI2OF1dLDE5NDc3NDpbWzMyOTQxXV0sMTk0Nzc1OltbMTczNjldXSwxOTQ3NzY6W1syNjM5MV1dLDE5NDc3NzpbWzI2Mzk1XV0sMTk0Nzc4OltbMjY0MDFdXSwxOTQ3Nzk6W1syNjQ2Ml1dLDE5NDc4MDpbWzI2NDUxXV0sMTk0NzgxOltbMTQ0MzIzXV0sMTk0NzgyOltbMTUxNzddXSwxOTQ3ODM6W1syNjYxOF1dLDE5NDc4NDpbWzI2NTAxXV0sMTk0Nzg1OltbMjY3MDZdXSwxOTQ3ODY6W1syNjc1N11dLDE5NDc4NzpbWzE0NDQ5M11dLDE5NDc4ODpbWzI2NzY2XV0sMTk0Nzg5OltbMjY2NTVdXSwxOTQ3OTA6W1syNjkwMF1dLDE5NDc5MTpbWzE1MjYxXV0sMTk0NzkyOltbMjY5NDZdXSwxOTQ3OTM6W1syNzA0M11dLDE5NDc5NDpbWzI3MTE0XV0sMTk0Nzk1OltbMjczMDRdXSwxOTQ3OTY6W1sxNDUwNTldXSwxOTQ3OTc6W1syNzM1NV1dLDE5NDc5ODpbWzE1Mzg0XV0sMTk0Nzk5OltbMjc0MjVdXSwxOTQ4MDA6W1sxNDU1NzVdXSwxOTQ4MDE6W1syNzQ3Nl1dLDE5NDgwMjpbWzE1NDM4XV0sMTk0ODAzOltbMjc1MDZdXSwxOTQ4MDQ6W1syNzU1MV1dLDE5NDgwNTpbWzI3NTc4XV0sMTk0ODA2OltbMjc1NzldXSwxOTQ4MDc6W1sxNDYwNjFdXSwxOTQ4MDg6W1sxMzg1MDddXSwxOTQ4MDk6W1sxNDYxNzBdXSwxOTQ4MTA6W1syNzcyNl1dLDE5NDgxMTpbWzE0NjYyMF1dLDE5NDgxMjpbWzI3ODM5XV0sMTk0ODEzOltbMjc4NTNdXSwxOTQ4MTQ6W1syNzc1MV1dLDE5NDgxNTpbWzI3OTI2XV19LAo2Mzc0NDp7NjM3NDQ6W1szNTkxMl1dLDYzNzQ1OltbMjYzNTZdXSw2Mzc0NjpbWzM2NTU0XV0sNjM3NDc6W1szNjA0MF1dLDYzNzQ4OltbMjgzNjldXSw2Mzc0OTpbWzIwMDE4XV0sNjM3NTA6W1syMTQ3N11dLDYzNzUxOltbNDA4NjBdXSw2Mzc1MjpbWzQwODYwXV0sNjM3NTM6W1syMjg2NV1dLDYzNzU0OltbMzczMjldXSw2Mzc1NTpbWzIxODk1XV0sNjM3NTY6W1syMjg1Nl1dLDYzNzU3OltbMjUwNzhdXSw2Mzc1ODpbWzMwMzEzXV0sNjM3NTk6W1szMjY0NV1dLDYzNzYwOltbMzQzNjddXSw2Mzc2MTpbWzM0NzQ2XV0sNjM3NjI6W1szNTA2NF1dLDYzNzYzOltbMzcwMDddXSw2Mzc2NDpbWzI3MTM4XV0sNjM3NjU6W1syNzkzMV1dLDYzNzY2OltbMjg4ODldXSw2Mzc2NzpbWzI5NjYyXV0sNjM3Njg6W1szMzg1M11dLDYzNzY5OltbMzcyMjZdXSw2Mzc3MDpbWzM5NDA5XV0sNjM3NzE6W1syMDA5OF1dLDYzNzcyOltbMjEzNjVdXSw2Mzc3MzpbWzI3Mzk2XV0sNjM3NzQ6W1syOTIxMV1dLDYzNzc1OltbMzQzNDldXSw2Mzc3NjpbWzQwNDc4XV0sNjM3Nzc6W1syMzg4OF1dLDYzNzc4OltbMjg2NTFdXSw2Mzc3OTpbWzM0MjUzXV0sNjM3ODA6W1szNTE3Ml1dLDYzNzgxOltbMjUyODldXSw2Mzc4MjpbWzMzMjQwXV0sNjM3ODM6W1szNDg0N11dLDYzNzg0OltbMjQyNjZdXSw2Mzc4NTpbWzI2MzkxXV0sNjM3ODY6W1syODAxMF1dLDYzNzg3OltbMjk0MzZdXSw2Mzc4ODpbWzM3MDcwXV0sNjM3ODk6W1syMDM1OF1dLDYzNzkwOltbMjA5MTldXSw2Mzc5MTpbWzIxMjE0XV0sNjM3OTI6W1syNTc5Nl1dLDYzNzkzOltbMjczNDddXSw2Mzc5NDpbWzI5MjAwXV0sNjM3OTU6W1szMDQzOV1dLDYzNzk2OltbMzI3NjldXSw2Mzc5NzpbWzM0MzEwXV0sNjM3OTg6W1szNDM5Nl1dLDYzNzk5OltbMzYzMzVdXSw2MzgwMDpbWzM4NzA2XV0sNjM4MDE6W1szOTc5MV1dLDYzODAyOltbNDA0NDJdXSw2MzgwMzpbWzMwODYwXV0sNjM4MDQ6W1szMTEwM11dLDYzODA1OltbMzIxNjBdXSw2MzgwNjpbWzMzNzM3XV0sNjM4MDc6W1szNzYzNl1dLDYzODA4OltbNDA1NzVdXSw2MzgwOTpbWzM1NTQyXV0sNjM4MTA6W1syMjc1MV1dLDYzODExOltbMjQzMjRdXSw2MzgxMjpbWzMxODQwXV0sNjM4MTM6W1szMjg5NF1dLDYzODE0OltbMjkyODJdXSw2MzgxNTpbWzMwOTIyXV0sNjM4MTY6W1szNjAzNF1dLDYzODE3OltbMzg2NDddXSw2MzgxODpbWzIyNzQ0XV0sNjM4MTk6W1syMzY1MF1dLDYzODIwOltbMjcxNTVdXSw2MzgyMTpbWzI4MTIyXV0sNjM4MjI6W1syODQzMV1dLDYzODIzOltbMzIwNDddXSw2MzgyNDpbWzMyMzExXV0sNjM4MjU6W1szODQ3NV1dLDYzODI2OltbMjEyMDJdXSw2MzgyNzpbWzMyOTA3XV0sNjM4Mjg6W1syMDk1Nl1dLDYzODI5OltbMjA5NDBdXSw2MzgzMDpbWzMxMjYwXV0sNjM4MzE6W1szMjE5MF1dLDYzODMyOltbMzM3NzddXSw2MzgzMzpbWzM4NTE3XV0sNjM4MzQ6W1szNTcxMl1dLDYzODM1OltbMjUyOTVdXSw2MzgzNjpbWzI3MTM4XV0sNjM4Mzc6W1szNTU4Ml1dLDYzODM4OltbMjAwMjVdXSw2MzgzOTpbWzIzNTI3XV0sNjM4NDA6W1syNDU5NF1dLDYzODQxOltbMjk1NzVdXSw2Mzg0MjpbWzMwMDY0XV0sNjM4NDM6W1syMTI3MV1dLDYzODQ0OltbMzA5NzFdXSw2Mzg0NTpbWzIwNDE1XV0sNjM4NDY6W1syNDQ4OV1dLDYzODQ3OltbMTk5ODFdXSw2Mzg0ODpbWzI3ODUyXV0sNjM4NDk6W1syNTk3Nl1dLDYzODUwOltbMzIwMzRdXSw2Mzg1MTpbWzIxNDQzXV0sNjM4NTI6W1syMjYyMl1dLDYzODUzOltbMzA0NjVdXSw2Mzg1NDpbWzMzODY1XV0sNjM4NTU6W1szNTQ5OF1dLDYzODU2OltbMjc1NzhdXSw2Mzg1NzpbWzM2Nzg0XV0sNjM4NTg6W1syNzc4NF1dLDYzODU5OltbMjUzNDJdXSw2Mzg2MDpbWzMzNTA5XV0sNjM4NjE6W1syNTUwNF1dLDYzODYyOltbMzAwNTNdXSw2Mzg2MzpbWzIwMTQyXV0sNjM4NjQ6W1syMDg0MV1dLDYzODY1OltbMjA5MzddXSw2Mzg2NjpbWzI2NzUzXV0sNjM4Njc6W1szMTk3NV1dLDYzODY4OltbMzMzOTFdXSw2Mzg2OTpbWzM1NTM4XV0sNjM4NzA6W1szNzMyN11dLDYzODcxOltbMjEyMzddXSw2Mzg3MjpbWzIxNTcwXV0sNjM4NzM6W1syMjg5OV1dLDYzODc0OltbMjQzMDBdXSw2Mzg3NTpbWzI2MDUzXV0sNjM4NzY6W1syODY3MF1dLDYzODc3OltbMzEwMThdXSw2Mzg3ODpbWzM4MzE3XV0sNjM4Nzk6W1szOTUzMF1dLDYzODgwOltbNDA1OTldXSw2Mzg4MTpbWzQwNjU0XV0sNjM4ODI6W1syMTE0N11dLDYzODgzOltbMjYzMTBdXSw2Mzg4NDpbWzI3NTExXV0sNjM4ODU6W1szNjcwNl1dLDYzODg2OltbMjQxODBdXSw2Mzg4NzpbWzI0OTc2XV0sNjM4ODg6W1syNTA4OF1dLDYzODg5OltbMjU3NTRdXSw2Mzg5MDpbWzI4NDUxXV0sNjM4OTE6W1syOTAwMV1dLDYzODkyOltbMjk4MzNdXSw2Mzg5MzpbWzMxMTc4XV0sNjM4OTQ6W1szMjI0NF1dLDYzODk1OltbMzI4NzldXSw2Mzg5NjpbWzM2NjQ2XV0sNjM4OTc6W1szNDAzMF1dLDYzODk4OltbMzY4OTldXSw2Mzg5OTpbWzM3NzA2XV0sNjM5MDA6W1syMTAxNV1dLDYzOTAxOltbMjExNTVdXSw2MzkwMjpbWzIxNjkzXV0sNjM5MDM6W1syODg3Ml1dLDYzOTA0OltbMzUwMTBdXSw2MzkwNTpbWzM1NDk4XV0sNjM5MDY6W1syNDI2NV1dLDYzOTA3OltbMjQ1NjVdXSw2MzkwODpbWzI1NDY3XV0sNjM5MDk6W1syNzU2Nl1dLDYzOTEwOltbMzE4MDZdXSw2MzkxMTpbWzI5NTU3XV0sNjM5MTI6W1syMDE5Nl1dLDYzOTEzOltbMjIyNjVdXSw2MzkxNDpbWzIzNTI3XV0sNjM5MTU6W1syMzk5NF1dLDYzOTE2OltbMjQ2MDRdXSw2MzkxNzpbWzI5NjE4XV0sNjM5MTg6W1syOTgwMV1dLDYzOTE5OltbMzI2NjZdXSw2MzkyMDpbWzMyODM4XV0sNjM5MjE6W1szNzQyOF1dLDYzOTIyOltbMzg2NDZdXSw2MzkyMzpbWzM4NzI4XV0sNjM5MjQ6W1szODkzNl1dLDYzOTI1OltbMjAzNjNdXSw2MzkyNjpbWzMxMTUwXV0sNjM5Mjc6W1szNzMwMF1dLDYzOTI4OltbMzg1ODRdXSw2MzkyOTpbWzI0ODAxXV0sNjM5MzA6W1syMDEwMl1dLDYzOTMxOltbMjA2OThdXSw2MzkzMjpbWzIzNTM0XV0sNjM5MzM6W1syMzYxNV1dLDYzOTM0OltbMjYwMDldXSw2MzkzNTpbWzI3MTM4XV0sNjM5MzY6W1syOTEzNF1dLDYzOTM3OltbMzAyNzRdXSw2MzkzODpbWzM0MDQ0XV0sNjM5Mzk6W1szNjk4OF1dLDYzOTQwOltbNDA4NDVdXSw2Mzk0MTpbWzI2MjQ4XV0sNjM5NDI6W1szODQ0Nl1dLDYzOTQzOltbMjExMjldXSw2Mzk0NDpbWzI2NDkxXV0sNjM5NDU6W1syNjYxMV1dLDYzOTQ2OltbMjc5NjldXSw2Mzk0NzpbWzI4MzE2XV0sNjM5NDg6W1syOTcwNV1dLDYzOTQ5OltbMzAwNDFdXSw2Mzk1MDpbWzMwODI3XV0sNjM5NTE6W1szMjAxNl1dLDYzOTUyOltbMzkwMDZdXSw2Mzk1MzpbWzIwODQ1XV0sNjM5NTQ6W1syNTEzNF1dLDYzOTU1OltbMzg1MjBdXSw2Mzk1NjpbWzIwNTIzXV0sNjM5NTc6W1syMzgzM11dLDYzOTU4OltbMjgxMzhdXSw2Mzk1OTpbWzM2NjUwXV0sNjM5NjA6W1syNDQ1OV1dLDYzOTYxOltbMjQ5MDBdXSw2Mzk2MjpbWzI2NjQ3XV0sNjM5NjM6W1syOTU3NV1dLDYzOTY0OltbMzg1MzRdXSw2Mzk2NTpbWzIxMDMzXV0sNjM5NjY6W1syMTUxOV1dLDYzOTY3OltbMjM2NTNdXSw2Mzk2ODpbWzI2MTMxXV0sNjM5Njk6W1syNjQ0Nl1dLDYzOTcwOltbMjY3OTJdXSw2Mzk3MTpbWzI3ODc3XV0sNjM5NzI6W1syOTcwMl1dLDYzOTczOltbMzAxNzhdXSw2Mzk3NDpbWzMyNjMzXV0sNjM5NzU6W1szNTAyM11dLDYzOTc2OltbMzUwNDFdXSw2Mzk3NzpbWzM3MzI0XV0sNjM5Nzg6W1szODYyNl1dLDYzOTc5OltbMjEzMTFdXSw2Mzk4MDpbWzI4MzQ2XV0sNjM5ODE6W1syMTUzM11dLDYzOTgyOltbMjkxMzZdXSw2Mzk4MzpbWzI5ODQ4XV0sNjM5ODQ6W1szNDI5OF1dLDYzOTg1OltbMzg1NjNdXSw2Mzk4NjpbWzQwMDIzXV0sNjM5ODc6W1s0MDYwN11dLDYzOTg4OltbMjY1MTldXSw2Mzk4OTpbWzI4MTA3XV0sNjM5OTA6W1szMzI1Nl1dLDYzOTkxOltbMzE0MzVdXSw2Mzk5MjpbWzMxNTIwXV0sNjM5OTM6W1szMTg5MF1dLDYzOTk0OltbMjkzNzZdXSw2Mzk5NTpbWzI4ODI1XV0sNjM5OTY6W1szNTY3Ml1dLDYzOTk3OltbMjAxNjBdXSw2Mzk5ODpbWzMzNTkwXV0sNjM5OTk6W1syMTA1MF1dLDE5NDgxNjpbWzI3OTY2XV0sMTk0ODE3OltbMjgwMjNdXSwxOTQ4MTg6W1syNzk2OV1dLDE5NDgxOTpbWzI4MDA5XV0sMTk0ODIwOltbMjgwMjRdXSwxOTQ4MjE6W1syODAzN11dLDE5NDgyMjpbWzE0NjcxOF1dLDE5NDgyMzpbWzI3OTU2XV0sMTk0ODI0OltbMjgyMDddXSwxOTQ4MjU6W1syODI3MF1dLDE5NDgyNjpbWzE1NjY3XV0sMTk0ODI3OltbMjgzNjNdXSwxOTQ4Mjg6W1syODM1OV1dLDE5NDgyOTpbWzE0NzE1M11dLDE5NDgzMDpbWzI4MTUzXV0sMTk0ODMxOltbMjg1MjZdXSwxOTQ4MzI6W1sxNDcyOTRdXSwxOTQ4MzM6W1sxNDczNDJdXSwxOTQ4MzQ6W1syODYxNF1dLDE5NDgzNTpbWzI4NzI5XV0sMTk0ODM2OltbMjg3MDJdXSwxOTQ4Mzc6W1syODY5OV1dLDE5NDgzODpbWzE1NzY2XV0sMTk0ODM5OltbMjg3NDZdXSwxOTQ4NDA6W1syODc5N11dLDE5NDg0MTpbWzI4NzkxXV0sMTk0ODQyOltbMjg4NDVdXSwxOTQ4NDM6W1sxMzIzODldXSwxOTQ4NDQ6W1syODk5N11dLDE5NDg0NTpbWzE0ODA2N11dLDE5NDg0NjpbWzI5MDg0XV0sMTk0ODQ3OltbMTQ4Mzk1XV0sMTk0ODQ4OltbMjkyMjRdXSwxOTQ4NDk6W1syOTIzN11dLDE5NDg1MDpbWzI5MjY0XV0sMTk0ODUxOltbMTQ5MDAwXV0sMTk0ODUyOltbMjkzMTJdXSwxOTQ4NTM6W1syOTMzM11dLDE5NDg1NDpbWzE0OTMwMV1dLDE5NDg1NTpbWzE0OTUyNF1dLDE5NDg1NjpbWzI5NTYyXV0sMTk0ODU3OltbMjk1NzldXSwxOTQ4NTg6W1sxNjA0NF1dLDE5NDg1OTpbWzI5NjA1XV0sMTk0ODYwOltbMTYwNTZdXSwxOTQ4NjE6W1sxNjA1Nl1dLDE5NDg2MjpbWzI5NzY3XV0sMTk0ODYzOltbMjk3ODhdXSwxOTQ4NjQ6W1syOTgwOV1dLDE5NDg2NTpbWzI5ODI5XV0sMTk0ODY2OltbMjk4OThdXSwxOTQ4Njc6W1sxNjE1NV1dLDE5NDg2ODpbWzI5OTg4XV0sMTk0ODY5OltbMTUwNTgyXV0sMTk0ODcwOltbMzAwMTRdXSwxOTQ4NzE6W1sxNTA2NzRdXSwxOTQ4NzI6W1szMDA2NF1dLDE5NDg3MzpbWzEzOTY3OV1dLDE5NDg3NDpbWzMwMjI0XV0sMTk0ODc1OltbMTUxNDU3XV0sMTk0ODc2OltbMTUxNDgwXV0sMTk0ODc3OltbMTUxNjIwXV0sMTk0ODc4OltbMTYzODBdXSwxOTQ4Nzk6W1sxNjM5Ml1dLDE5NDg4MDpbWzMwNDUyXV0sMTk0ODgxOltbMTUxNzk1XV0sMTk0ODgyOltbMTUxNzk0XV0sMTk0ODgzOltbMTUxODMzXV0sMTk0ODg0OltbMTUxODU5XV0sMTk0ODg1OltbMzA0OTRdXSwxOTQ4ODY6W1szMDQ5NV1dLDE5NDg4NzpbWzMwNDk1XV0sMTk0ODg4OltbMzA1MzhdXSwxOTQ4ODk6W1sxNjQ0MV1dLDE5NDg5MDpbWzMwNjAzXV0sMTk0ODkxOltbMTY0NTRdXSwxOTQ4OTI6W1sxNjUzNF1dLDE5NDg5MzpbWzE1MjYwNV1dLDE5NDg5NDpbWzMwNzk4XV0sMTk0ODk1OltbMzA4NjBdXSwxOTQ4OTY6W1szMDkyNF1dLDE5NDg5NzpbWzE2NjExXV0sMTk0ODk4OltbMTUzMTI2XV0sMTk0ODk5OltbMzEwNjJdXSwxOTQ5MDA6W1sxNTMyNDJdXSwxOTQ5MDE6W1sxNTMyODVdXSwxOTQ5MDI6W1szMTExOV1dLDE5NDkwMzpbWzMxMjExXV0sMTk0OTA0OltbMTY2ODddXSwxOTQ5MDU6W1szMTI5Nl1dLDE5NDkwNjpbWzMxMzA2XV0sMTk0OTA3OltbMzEzMTFdXSwxOTQ5MDg6W1sxNTM5ODBdXSwxOTQ5MDk6W1sxNTQyNzldXSwxOTQ5MTA6W1sxNTQyNzldXSwxOTQ5MTE6W1szMTQ3MF1dLDE5NDkxMjpbWzE2ODk4XV0sMTk0OTEzOltbMTU0NTM5XV0sMTk0OTE0OltbMzE2ODZdXSwxOTQ5MTU6W1szMTY4OV1dLDE5NDkxNjpbWzE2OTM1XV0sMTk0OTE3OltbMTU0NzUyXV0sMTk0OTE4OltbMzE5NTRdXSwxOTQ5MTk6W1sxNzA1Nl1dLDE5NDkyMDpbWzMxOTc2XV0sMTk0OTIxOltbMzE5NzFdXSwxOTQ5MjI6W1szMjAwMF1dLDE5NDkyMzpbWzE1NTUyNl1dLDE5NDkyNDpbWzMyMDk5XV0sMTk0OTI1OltbMTcxNTNdXSwxOTQ5MjY6W1szMjE5OV1dLDE5NDkyNzpbWzMyMjU4XV0sMTk0OTI4OltbMzIzMjVdXSwxOTQ5Mjk6W1sxNzIwNF1dLDE5NDkzMDpbWzE1NjIwMF1dLDE5NDkzMTpbWzE1NjIzMV1dLDE5NDkzMjpbWzE3MjQxXV0sMTk0OTMzOltbMTU2Mzc3XV0sMTk0OTM0OltbMzI2MzRdXSwxOTQ5MzU6W1sxNTY0NzhdXSwxOTQ5MzY6W1szMjY2MV1dLDE5NDkzNzpbWzMyNzYyXV0sMTk0OTM4OltbMzI3NzNdXSwxOTQ5Mzk6W1sxNTY4OTBdXSwxOTQ5NDA6W1sxNTY5NjNdXSwxOTQ5NDE6W1szMjg2NF1dLDE5NDk0MjpbWzE1NzA5Nl1dLDE5NDk0MzpbWzMyODgwXV0sMTk0OTQ0OltbMTQ0MjIzXV0sMTk0OTQ1OltbMTczNjVdXSwxOTQ5NDY6W1szMjk0Nl1dLDE5NDk0NzpbWzMzMDI3XV0sMTk0OTQ4OltbMTc0MTldXSwxOTQ5NDk6W1szMzA4Nl1dLDE5NDk1MDpbWzIzMjIxXV0sMTk0OTUxOltbMTU3NjA3XV0sMTk0OTUyOltbMTU3NjIxXV0sMTk0OTUzOltbMTQ0Mjc1XV0sMTk0OTU0OltbMTQ0Mjg0XV0sMTk0OTU1OltbMzMyODFdXSwxOTQ5NTY6W1szMzI4NF1dLDE5NDk1NzpbWzM2NzY2XV0sMTk0OTU4OltbMTc1MTVdXSwxOTQ5NTk6W1szMzQyNV1dLDE5NDk2MDpbWzMzNDE5XV0sMTk0OTYxOltbMzM0MzddXSwxOTQ5NjI6W1syMTE3MV1dLDE5NDk2MzpbWzMzNDU3XV0sMTk0OTY0OltbMzM0NTldXSwxOTQ5NjU6W1szMzQ2OV1dLDE5NDk2NjpbWzMzNTEwXV0sMTk0OTY3OltbMTU4NTI0XV0sMTk0OTY4OltbMzM1MDldXSwxOTQ5Njk6W1szMzU2NV1dLDE5NDk3MDpbWzMzNjM1XV0sMTk0OTcxOltbMzM3MDldXSwxOTQ5NzI6W1szMzU3MV1dLDE5NDk3MzpbWzMzNzI1XV0sMTk0OTc0OltbMzM3NjddXSwxOTQ5NzU6W1szMzg3OV1dLDE5NDk3NjpbWzMzNjE5XV0sMTk0OTc3OltbMzM3MzhdXSwxOTQ5Nzg6W1szMzc0MF1dLDE5NDk3OTpbWzMzNzU2XV0sMTk0OTgwOltbMTU4Nzc0XV0sMTk0OTgxOltbMTU5MDgzXV0sMTk0OTgyOltbMTU4OTMzXV0sMTk0OTgzOltbMTc3MDddXSwxOTQ5ODQ6W1szNDAzM11dLDE5NDk4NTpbWzM0MDM1XV0sMTk0OTg2OltbMzQwNzBdXSwxOTQ5ODc6W1sxNjA3MTRdXSwxOTQ5ODg6W1szNDE0OF1dLDE5NDk4OTpbWzE1OTUzMl1dLDE5NDk5MDpbWzE3NzU3XV0sMTk0OTkxOltbMTc3NjFdXSwxOTQ5OTI6W1sxNTk2NjVdXSwxOTQ5OTM6W1sxNTk5NTRdXSwxOTQ5OTQ6W1sxNzc3MV1dLDE5NDk5NTpbWzM0Mzg0XV0sMTk0OTk2OltbMzQzOTZdXSwxOTQ5OTc6W1szNDQwN11dLDE5NDk5ODpbWzM0NDA5XV0sMTk0OTk5OltbMzQ0NzNdXSwxOTUwMDA6W1szNDQ0MF1dLDE5NTAwMTpbWzM0NTc0XV0sMTk1MDAyOltbMzQ1MzBdXSwxOTUwMDM6W1szNDY4MV1dLDE5NTAwNDpbWzM0NjAwXV0sMTk1MDA1OltbMzQ2NjddXSwxOTUwMDY6W1szNDY5NF1dLDE5NTAwNzpbWzE3ODc5XV0sMTk1MDA4OltbMzQ3ODVdXSwxOTUwMDk6W1szNDgxN11dLDE5NTAxMDpbWzE3OTEzXV0sMTk1MDExOltbMzQ5MTJdXSwxOTUwMTI6W1szNDkxNV1dLDE5NTAxMzpbWzE2MTM4M11dLDE5NTAxNDpbWzM1MDMxXV0sMTk1MDE1OltbMzUwMzhdXSwxOTUwMTY6W1sxNzk3M11dLDE5NTAxNzpbWzM1MDY2XV0sMTk1MDE4OltbMTM0OTldXSwxOTUwMTk6W1sxNjE5NjZdXSwxOTUwMjA6W1sxNjIxNTBdXSwxOTUwMjE6W1sxODExMF1dLDE5NTAyMjpbWzE4MTE5XV0sMTk1MDIzOltbMzU0ODhdXSwxOTUwMjQ6W1szNTU2NV1dLDE5NTAyNTpbWzM1NzIyXV0sMTk1MDI2OltbMzU5MjVdXSwxOTUwMjc6W1sxNjI5ODRdXSwxOTUwMjg6W1szNjAxMV1dLDE5NTAyOTpbWzM2MDMzXV0sMTk1MDMwOltbMzYxMjNdXSwxOTUwMzE6W1szNjIxNV1dLDE5NTAzMjpbWzE2MzYzMV1dLDE5NTAzMzpbWzEzMzEyNF1dLDE5NTAzNDpbWzM2Mjk5XV0sMTk1MDM1OltbMzYyODRdXSwxOTUwMzY6W1szNjMzNl1dLDE5NTAzNzpbWzEzMzM0Ml1dLDE5NTAzODpbWzM2NTY0XV0sMTk1MDM5OltbMzY2NjRdXSwxOTUwNDA6W1sxNjUzMzBdXSwxOTUwNDE6W1sxNjUzNTddXSwxOTUwNDI6W1szNzAxMl1dLDE5NTA0MzpbWzM3MTA1XV0sMTk1MDQ0OltbMzcxMzddXSwxOTUwNDU6W1sxNjU2NzhdXSwxOTUwNDY6W1szNzE0N11dLDE5NTA0NzpbWzM3NDMyXV0sMTk1MDQ4OltbMzc1OTFdXSwxOTUwNDk6W1szNzU5Ml1dLDE5NTA1MDpbWzM3NTAwXV0sMTk1MDUxOltbMzc4ODFdXSwxOTUwNTI6W1szNzkwOV1dLDE5NTA1MzpbWzE2NjkwNl1dLDE5NTA1NDpbWzM4MjgzXV0sMTk1MDU1OltbMTg4MzddXSwxOTUwNTY6W1szODMyN11dLDE5NTA1NzpbWzE2NzI4N11dLDE5NTA1ODpbWzE4OTE4XV0sMTk1MDU5OltbMzg1OTVdXSwxOTUwNjA6W1syMzk4Nl1dLDE5NTA2MTpbWzM4NjkxXV0sMTk1MDYyOltbMTY4MjYxXV0sMTk1MDYzOltbMTY4NDc0XV0sMTk1MDY0OltbMTkwNTRdXSwxOTUwNjU6W1sxOTA2Ml1dLDE5NTA2NjpbWzM4ODgwXV0sMTk1MDY3OltbMTY4OTcwXV0sMTk1MDY4OltbMTkxMjJdXSwxOTUwNjk6W1sxNjkxMTBdXSwxOTUwNzA6W1szODkyM11dLDE5NTA3MTpbWzM4OTIzXV19LAo2NDAwMDp7NjQwMDA6W1syMDk5OV1dLDY0MDAxOltbMjQyMzBdXSw2NDAwMjpbWzI1Mjk5XV0sNjQwMDM6W1szMTk1OF1dLDY0MDA0OltbMjM0MjldXSw2NDAwNTpbWzI3OTM0XV0sNjQwMDY6W1syNjI5Ml1dLDY0MDA3OltbMzY2NjddXSw2NDAwODpbWzM0ODkyXV0sNjQwMDk6W1szODQ3N11dLDY0MDEwOltbMzUyMTFdXSw2NDAxMTpbWzI0Mjc1XV0sNjQwMTI6W1syMDgwMF1dLDY0MDEzOltbMjE5NTJdXSw2NDAxNjpbWzIyNjE4XV0sNjQwMTg6W1syNjIyOF1dLDY0MDIxOltbMjA5NThdXSw2NDAyMjpbWzI5NDgyXV0sNjQwMjM6W1szMDQxMF1dLDY0MDI0OltbMzEwMzZdXSw2NDAyNTpbWzMxMDcwXV0sNjQwMjY6W1szMTA3N11dLDY0MDI3OltbMzExMTldXSw2NDAyODpbWzM4NzQyXV0sNjQwMjk6W1szMTkzNF1dLDY0MDMwOltbMzI3MDFdXSw2NDAzMjpbWzM0MzIyXV0sNjQwMzQ6W1szNTU3Nl1dLDY0MDM3OltbMzY5MjBdXSw2NDAzODpbWzM3MTE3XV0sNjQwNDI6W1szOTE1MV1dLDY0MDQzOltbMzkxNjRdXSw2NDA0NDpbWzM5MjA4XV0sNjQwNDU6W1s0MDM3Ml1dLDY0MDQ2OltbMzcwODZdXSw2NDA0NzpbWzM4NTgzXV0sNjQwNDg6W1syMDM5OF1dLDY0MDQ5OltbMjA3MTFdXSw2NDA1MDpbWzIwODEzXV0sNjQwNTE6W1syMTE5M11dLDY0MDUyOltbMjEyMjBdXSw2NDA1MzpbWzIxMzI5XV0sNjQwNTQ6W1syMTkxN11dLDY0MDU1OltbMjIwMjJdXSw2NDA1NjpbWzIyMTIwXV0sNjQwNTc6W1syMjU5Ml1dLDY0MDU4OltbMjI2OTZdXSw2NDA1OTpbWzIzNjUyXV0sNjQwNjA6W1syMzY2Ml1dLDY0MDYxOltbMjQ3MjRdXSw2NDA2MjpbWzI0OTM2XV0sNjQwNjM6W1syNDk3NF1dLDY0MDY0OltbMjUwNzRdXSw2NDA2NTpbWzI1OTM1XV0sNjQwNjY6W1syNjA4Ml1dLDY0MDY3OltbMjYyNTddXSw2NDA2ODpbWzI2NzU3XV0sNjQwNjk6W1syODAyM11dLDY0MDcwOltbMjgxODZdXSw2NDA3MTpbWzI4NDUwXV0sNjQwNzI6W1syOTAzOF1dLDY0MDczOltbMjkyMjddXSw2NDA3NDpbWzI5NzMwXV0sNjQwNzU6W1szMDg2NV1dLDY0MDc2OltbMzEwMzhdXSw2NDA3NzpbWzMxMDQ5XV0sNjQwNzg6W1szMTA0OF1dLDY0MDc5OltbMzEwNTZdXSw2NDA4MDpbWzMxMDYyXV0sNjQwODE6W1szMTA2OV1dLDY0MDgyOltbMzExMTddXSw2NDA4MzpbWzMxMTE4XV0sNjQwODQ6W1szMTI5Nl1dLDY0MDg1OltbMzEzNjFdXSw2NDA4NjpbWzMxNjgwXV0sNjQwODc6W1szMjI0NF1dLDY0MDg4OltbMzIyNjVdXSw2NDA4OTpbWzMyMzIxXV0sNjQwOTA6W1szMjYyNl1dLDY0MDkxOltbMzI3NzNdXSw2NDA5MjpbWzMzMjYxXV0sNjQwOTM6W1szMzQwMV1dLDY0MDk0OltbMzM0MDFdXSw2NDA5NTpbWzMzODc5XV0sNjQwOTY6W1szNTA4OF1dLDY0MDk3OltbMzUyMjJdXSw2NDA5ODpbWzM1NTg1XV0sNjQwOTk6W1szNTY0MV1dLDY0MTAwOltbMzYwNTFdXSw2NDEwMTpbWzM2MTA0XV0sNjQxMDI6W1szNjc5MF1dLDY0MTAzOltbMzY5MjBdXSw2NDEwNDpbWzM4NjI3XV0sNjQxMDU6W1szODkxMV1dLDY0MTA2OltbMzg5NzFdXSw2NDEwNzpbWzI0NjkzXV0sNjQxMDg6W1sxNDgyMDZdXSw2NDEwOTpbWzMzMzA0XV0sNjQxMTI6W1syMDAwNl1dLDY0MTEzOltbMjA5MTddXSw2NDExNDpbWzIwODQwXV0sNjQxMTU6W1syMDM1Ml1dLDY0MTE2OltbMjA4MDVdXSw2NDExNzpbWzIwODY0XV0sNjQxMTg6W1syMTE5MV1dLDY0MTE5OltbMjEyNDJdXSw2NDEyMDpbWzIxOTE3XV0sNjQxMjE6W1syMTg0NV1dLDY0MTIyOltbMjE5MTNdXSw2NDEyMzpbWzIxOTg2XV0sNjQxMjQ6W1syMjYxOF1dLDY0MTI1OltbMjI3MDddXSw2NDEyNjpbWzIyODUyXV0sNjQxMjc6W1syMjg2OF1dLDY0MTI4OltbMjMxMzhdXSw2NDEyOTpbWzIzMzM2XV0sNjQxMzA6W1syNDI3NF1dLDY0MTMxOltbMjQyODFdXSw2NDEzMjpbWzI0NDI1XV0sNjQxMzM6W1syNDQ5M11dLDY0MTM0OltbMjQ3OTJdXSw2NDEzNTpbWzI0OTEwXV0sNjQxMzY6W1syNDg0MF1dLDY0MTM3OltbMjQ5NzRdXSw2NDEzODpbWzI0OTI4XV0sNjQxMzk6W1syNTA3NF1dLDY0MTQwOltbMjUxNDBdXSw2NDE0MTpbWzI1NTQwXV0sNjQxNDI6W1syNTYyOF1dLDY0MTQzOltbMjU2ODJdXSw2NDE0NDpbWzI1OTQyXV0sNjQxNDU6W1syNjIyOF1dLDY0MTQ2OltbMjYzOTFdXSw2NDE0NzpbWzI2Mzk1XV0sNjQxNDg6W1syNjQ1NF1dLDY0MTQ5OltbMjc1MTNdXSw2NDE1MDpbWzI3NTc4XV0sNjQxNTE6W1syNzk2OV1dLDY0MTUyOltbMjgzNzldXSw2NDE1MzpbWzI4MzYzXV0sNjQxNTQ6W1syODQ1MF1dLDY0MTU1OltbMjg3MDJdXSw2NDE1NjpbWzI5MDM4XV0sNjQxNTc6W1szMDYzMV1dLDY0MTU4OltbMjkyMzddXSw2NDE1OTpbWzI5MzU5XV0sNjQxNjA6W1syOTQ4Ml1dLDY0MTYxOltbMjk4MDldXSw2NDE2MjpbWzI5OTU4XV0sNjQxNjM6W1szMDAxMV1dLDY0MTY0OltbMzAyMzddXSw2NDE2NTpbWzMwMjM5XV0sNjQxNjY6W1szMDQxMF1dLDY0MTY3OltbMzA0MjddXSw2NDE2ODpbWzMwNDUyXV0sNjQxNjk6W1szMDUzOF1dLDY0MTcwOltbMzA1MjhdXSw2NDE3MTpbWzMwOTI0XV0sNjQxNzI6W1szMTQwOV1dLDY0MTczOltbMzE2ODBdXSw2NDE3NDpbWzMxODY3XV0sNjQxNzU6W1szMjA5MV1dLDY0MTc2OltbMzIyNDRdXSw2NDE3NzpbWzMyNTc0XV0sNjQxNzg6W1szMjc3M11dLDY0MTc5OltbMzM2MThdXSw2NDE4MDpbWzMzNzc1XV0sNjQxODE6W1szNDY4MV1dLDY0MTgyOltbMzUxMzddXSw2NDE4MzpbWzM1MjA2XV0sNjQxODQ6W1szNTIyMl1dLDY0MTg1OltbMzU1MTldXSw2NDE4NjpbWzM1NTc2XV0sNjQxODc6W1szNTUzMV1dLDY0MTg4OltbMzU1ODVdXSw2NDE4OTpbWzM1NTgyXV0sNjQxOTA6W1szNTU2NV1dLDY0MTkxOltbMzU2NDFdXSw2NDE5MjpbWzM1NzIyXV0sNjQxOTM6W1szNjEwNF1dLDY0MTk0OltbMzY2NjRdXSw2NDE5NTpbWzM2OTc4XV0sNjQxOTY6W1szNzI3M11dLDY0MTk3OltbMzc0OTRdXSw2NDE5ODpbWzM4NTI0XV0sNjQxOTk6W1szODYyN11dLDY0MjAwOltbMzg3NDJdXSw2NDIwMTpbWzM4ODc1XV0sNjQyMDI6W1szODkxMV1dLDY0MjAzOltbMzg5MjNdXSw2NDIwNDpbWzM4OTcxXV0sNjQyMDU6W1szOTY5OF1dLDY0MjA2OltbNDA4NjBdXSw2NDIwNzpbWzE0MTM4Nl1dLDY0MjA4OltbMTQxMzgwXV0sNjQyMDk6W1sxNDQzNDFdXSw2NDIxMDpbWzE1MjYxXV0sNjQyMTE6W1sxNjQwOF1dLDY0MjEyOltbMTY0NDFdXSw2NDIxMzpbWzE1MjEzN11dLDY0MjE0OltbMTU0ODMyXV0sNjQyMTU6W1sxNjM1MzldXSw2NDIxNjpbWzQwNzcxXV0sNjQyMTc6W1s0MDg0Nl1dLDE5NTA3MjpbWzM4OTUzXV0sMTk1MDczOltbMTY5Mzk4XV0sMTk1MDc0OltbMzkxMzhdXSwxOTUwNzU6W1sxOTI1MV1dLDE5NTA3NjpbWzM5MjA5XV0sMTk1MDc3OltbMzkzMzVdXSwxOTUwNzg6W1szOTM2Ml1dLDE5NTA3OTpbWzM5NDIyXV0sMTk1MDgwOltbMTk0MDZdXSwxOTUwODE6W1sxNzA4MDBdXSwxOTUwODI6W1szOTY5OF1dLDE5NTA4MzpbWzQwMDAwXV0sMTk1MDg0OltbNDAxODldXSwxOTUwODU6W1sxOTY2Ml1dLDE5NTA4NjpbWzE5NjkzXV0sMTk1MDg3OltbNDAyOTVdXSwxOTUwODg6W1sxNzIyMzhdXSwxOTUwODk6W1sxOTcwNF1dLDE5NTA5MDpbWzE3MjI5M11dLDE5NTA5MTpbWzE3MjU1OF1dLDE5NTA5MjpbWzE3MjY4OV1dLDE5NTA5MzpbWzQwNjM1XV0sMTk1MDk0OltbMTk3OThdXSwxOTUwOTU6W1s0MDY5N11dLDE5NTA5NjpbWzQwNzAyXV0sMTk1MDk3OltbNDA3MDldXSwxOTUwOTg6W1s0MDcxOV1dLDE5NTA5OTpbWzQwNzI2XV0sMTk1MTAwOltbNDA3NjNdXSwxOTUxMDE6W1sxNzM1NjhdXX0sCjY0MjU2Ons2NDI1NjpbWzEwMiwxMDJdLDI1Nl0sNjQyNTc6W1sxMDIsMTA1XSwyNTZdLDY0MjU4OltbMTAyLDEwOF0sMjU2XSw2NDI1OTpbWzEwMiwxMDIsMTA1XSwyNTZdLDY0MjYwOltbMTAyLDEwMiwxMDhdLDI1Nl0sNjQyNjE6W1szODMsMTE2XSwyNTZdLDY0MjYyOltbMTE1LDExNl0sMjU2XSw2NDI3NTpbWzEzOTYsMTM5OF0sMjU2XSw2NDI3NjpbWzEzOTYsMTM4MV0sMjU2XSw2NDI3NzpbWzEzOTYsMTM4N10sMjU2XSw2NDI3ODpbWzE0MDYsMTM5OF0sMjU2XSw2NDI3OTpbWzEzOTYsMTM4OV0sMjU2XSw2NDI4NTpbWzE0OTcsMTQ2MF0sNTEyXSw2NDI4NjpbLDI2XSw2NDI4NzpbWzE1MjIsMTQ2M10sNTEyXSw2NDI4ODpbWzE1MDZdLDI1Nl0sNjQyODk6W1sxNDg4XSwyNTZdLDY0MjkwOltbMTQ5MV0sMjU2XSw2NDI5MTpbWzE0OTJdLDI1Nl0sNjQyOTI6W1sxNDk5XSwyNTZdLDY0MjkzOltbMTUwMF0sMjU2XSw2NDI5NDpbWzE1MDFdLDI1Nl0sNjQyOTU6W1sxNTEyXSwyNTZdLDY0Mjk2OltbMTUxNF0sMjU2XSw2NDI5NzpbWzQzXSwyNTZdLDY0Mjk4OltbMTUxMywxNDczXSw1MTJdLDY0Mjk5OltbMTUxMywxNDc0XSw1MTJdLDY0MzAwOltbNjQzMjksMTQ3M10sNTEyXSw2NDMwMTpbWzY0MzI5LDE0NzRdLDUxMl0sNjQzMDI6W1sxNDg4LDE0NjNdLDUxMl0sNjQzMDM6W1sxNDg4LDE0NjRdLDUxMl0sNjQzMDQ6W1sxNDg4LDE0NjhdLDUxMl0sNjQzMDU6W1sxNDg5LDE0NjhdLDUxMl0sNjQzMDY6W1sxNDkwLDE0NjhdLDUxMl0sNjQzMDc6W1sxNDkxLDE0NjhdLDUxMl0sNjQzMDg6W1sxNDkyLDE0NjhdLDUxMl0sNjQzMDk6W1sxNDkzLDE0NjhdLDUxMl0sNjQzMTA6W1sxNDk0LDE0NjhdLDUxMl0sNjQzMTI6W1sxNDk2LDE0NjhdLDUxMl0sNjQzMTM6W1sxNDk3LDE0NjhdLDUxMl0sNjQzMTQ6W1sxNDk4LDE0NjhdLDUxMl0sNjQzMTU6W1sxNDk5LDE0NjhdLDUxMl0sNjQzMTY6W1sxNTAwLDE0NjhdLDUxMl0sNjQzMTg6W1sxNTAyLDE0NjhdLDUxMl0sNjQzMjA6W1sxNTA0LDE0NjhdLDUxMl0sNjQzMjE6W1sxNTA1LDE0NjhdLDUxMl0sNjQzMjM6W1sxNTA3LDE0NjhdLDUxMl0sNjQzMjQ6W1sxNTA4LDE0NjhdLDUxMl0sNjQzMjY6W1sxNTEwLDE0NjhdLDUxMl0sNjQzMjc6W1sxNTExLDE0NjhdLDUxMl0sNjQzMjg6W1sxNTEyLDE0NjhdLDUxMl0sNjQzMjk6W1sxNTEzLDE0NjhdLDUxMl0sNjQzMzA6W1sxNTE0LDE0NjhdLDUxMl0sNjQzMzE6W1sxNDkzLDE0NjVdLDUxMl0sNjQzMzI6W1sxNDg5LDE0NzFdLDUxMl0sNjQzMzM6W1sxNDk5LDE0NzFdLDUxMl0sNjQzMzQ6W1sxNTA4LDE0NzFdLDUxMl0sNjQzMzU6W1sxNDg4LDE1MDBdLDI1Nl0sNjQzMzY6W1sxNjQ5XSwyNTZdLDY0MzM3OltbMTY0OV0sMjU2XSw2NDMzODpbWzE2NTldLDI1Nl0sNjQzMzk6W1sxNjU5XSwyNTZdLDY0MzQwOltbMTY1OV0sMjU2XSw2NDM0MTpbWzE2NTldLDI1Nl0sNjQzNDI6W1sxNjYyXSwyNTZdLDY0MzQzOltbMTY2Ml0sMjU2XSw2NDM0NDpbWzE2NjJdLDI1Nl0sNjQzNDU6W1sxNjYyXSwyNTZdLDY0MzQ2OltbMTY2NF0sMjU2XSw2NDM0NzpbWzE2NjRdLDI1Nl0sNjQzNDg6W1sxNjY0XSwyNTZdLDY0MzQ5OltbMTY2NF0sMjU2XSw2NDM1MDpbWzE2NThdLDI1Nl0sNjQzNTE6W1sxNjU4XSwyNTZdLDY0MzUyOltbMTY1OF0sMjU2XSw2NDM1MzpbWzE2NThdLDI1Nl0sNjQzNTQ6W1sxNjYzXSwyNTZdLDY0MzU1OltbMTY2M10sMjU2XSw2NDM1NjpbWzE2NjNdLDI1Nl0sNjQzNTc6W1sxNjYzXSwyNTZdLDY0MzU4OltbMTY1N10sMjU2XSw2NDM1OTpbWzE2NTddLDI1Nl0sNjQzNjA6W1sxNjU3XSwyNTZdLDY0MzYxOltbMTY1N10sMjU2XSw2NDM2MjpbWzE3MDBdLDI1Nl0sNjQzNjM6W1sxNzAwXSwyNTZdLDY0MzY0OltbMTcwMF0sMjU2XSw2NDM2NTpbWzE3MDBdLDI1Nl0sNjQzNjY6W1sxNzAyXSwyNTZdLDY0MzY3OltbMTcwMl0sMjU2XSw2NDM2ODpbWzE3MDJdLDI1Nl0sNjQzNjk6W1sxNzAyXSwyNTZdLDY0MzcwOltbMTY2OF0sMjU2XSw2NDM3MTpbWzE2NjhdLDI1Nl0sNjQzNzI6W1sxNjY4XSwyNTZdLDY0MzczOltbMTY2OF0sMjU2XSw2NDM3NDpbWzE2NjddLDI1Nl0sNjQzNzU6W1sxNjY3XSwyNTZdLDY0Mzc2OltbMTY2N10sMjU2XSw2NDM3NzpbWzE2NjddLDI1Nl0sNjQzNzg6W1sxNjcwXSwyNTZdLDY0Mzc5OltbMTY3MF0sMjU2XSw2NDM4MDpbWzE2NzBdLDI1Nl0sNjQzODE6W1sxNjcwXSwyNTZdLDY0MzgyOltbMTY3MV0sMjU2XSw2NDM4MzpbWzE2NzFdLDI1Nl0sNjQzODQ6W1sxNjcxXSwyNTZdLDY0Mzg1OltbMTY3MV0sMjU2XSw2NDM4NjpbWzE2NzddLDI1Nl0sNjQzODc6W1sxNjc3XSwyNTZdLDY0Mzg4OltbMTY3Nl0sMjU2XSw2NDM4OTpbWzE2NzZdLDI1Nl0sNjQzOTA6W1sxNjc4XSwyNTZdLDY0MzkxOltbMTY3OF0sMjU2XSw2NDM5MjpbWzE2NzJdLDI1Nl0sNjQzOTM6W1sxNjcyXSwyNTZdLDY0Mzk0OltbMTY4OF0sMjU2XSw2NDM5NTpbWzE2ODhdLDI1Nl0sNjQzOTY6W1sxNjgxXSwyNTZdLDY0Mzk3OltbMTY4MV0sMjU2XSw2NDM5ODpbWzE3MDVdLDI1Nl0sNjQzOTk6W1sxNzA1XSwyNTZdLDY0NDAwOltbMTcwNV0sMjU2XSw2NDQwMTpbWzE3MDVdLDI1Nl0sNjQ0MDI6W1sxNzExXSwyNTZdLDY0NDAzOltbMTcxMV0sMjU2XSw2NDQwNDpbWzE3MTFdLDI1Nl0sNjQ0MDU6W1sxNzExXSwyNTZdLDY0NDA2OltbMTcxNV0sMjU2XSw2NDQwNzpbWzE3MTVdLDI1Nl0sNjQ0MDg6W1sxNzE1XSwyNTZdLDY0NDA5OltbMTcxNV0sMjU2XSw2NDQxMDpbWzE3MTNdLDI1Nl0sNjQ0MTE6W1sxNzEzXSwyNTZdLDY0NDEyOltbMTcxM10sMjU2XSw2NDQxMzpbWzE3MTNdLDI1Nl0sNjQ0MTQ6W1sxNzIyXSwyNTZdLDY0NDE1OltbMTcyMl0sMjU2XSw2NDQxNjpbWzE3MjNdLDI1Nl0sNjQ0MTc6W1sxNzIzXSwyNTZdLDY0NDE4OltbMTcyM10sMjU2XSw2NDQxOTpbWzE3MjNdLDI1Nl0sNjQ0MjA6W1sxNzI4XSwyNTZdLDY0NDIxOltbMTcyOF0sMjU2XSw2NDQyMjpbWzE3MjldLDI1Nl0sNjQ0MjM6W1sxNzI5XSwyNTZdLDY0NDI0OltbMTcyOV0sMjU2XSw2NDQyNTpbWzE3MjldLDI1Nl0sNjQ0MjY6W1sxNzI2XSwyNTZdLDY0NDI3OltbMTcyNl0sMjU2XSw2NDQyODpbWzE3MjZdLDI1Nl0sNjQ0Mjk6W1sxNzI2XSwyNTZdLDY0NDMwOltbMTc0Nl0sMjU2XSw2NDQzMTpbWzE3NDZdLDI1Nl0sNjQ0MzI6W1sxNzQ3XSwyNTZdLDY0NDMzOltbMTc0N10sMjU2XSw2NDQ2NzpbWzE3MDldLDI1Nl0sNjQ0Njg6W1sxNzA5XSwyNTZdLDY0NDY5OltbMTcwOV0sMjU2XSw2NDQ3MDpbWzE3MDldLDI1Nl0sNjQ0NzE6W1sxNzM1XSwyNTZdLDY0NDcyOltbMTczNV0sMjU2XSw2NDQ3MzpbWzE3MzRdLDI1Nl0sNjQ0NzQ6W1sxNzM0XSwyNTZdLDY0NDc1OltbMTczNl0sMjU2XSw2NDQ3NjpbWzE3MzZdLDI1Nl0sNjQ0Nzc6W1sxNjU1XSwyNTZdLDY0NDc4OltbMTczOV0sMjU2XSw2NDQ3OTpbWzE3MzldLDI1Nl0sNjQ0ODA6W1sxNzMzXSwyNTZdLDY0NDgxOltbMTczM10sMjU2XSw2NDQ4MjpbWzE3MzddLDI1Nl0sNjQ0ODM6W1sxNzM3XSwyNTZdLDY0NDg0OltbMTc0NF0sMjU2XSw2NDQ4NTpbWzE3NDRdLDI1Nl0sNjQ0ODY6W1sxNzQ0XSwyNTZdLDY0NDg3OltbMTc0NF0sMjU2XSw2NDQ4ODpbWzE2MDldLDI1Nl0sNjQ0ODk6W1sxNjA5XSwyNTZdLDY0NDkwOltbMTU3NCwxNTc1XSwyNTZdLDY0NDkxOltbMTU3NCwxNTc1XSwyNTZdLDY0NDkyOltbMTU3NCwxNzQ5XSwyNTZdLDY0NDkzOltbMTU3NCwxNzQ5XSwyNTZdLDY0NDk0OltbMTU3NCwxNjA4XSwyNTZdLDY0NDk1OltbMTU3NCwxNjA4XSwyNTZdLDY0NDk2OltbMTU3NCwxNzM1XSwyNTZdLDY0NDk3OltbMTU3NCwxNzM1XSwyNTZdLDY0NDk4OltbMTU3NCwxNzM0XSwyNTZdLDY0NDk5OltbMTU3NCwxNzM0XSwyNTZdLDY0NTAwOltbMTU3NCwxNzM2XSwyNTZdLDY0NTAxOltbMTU3NCwxNzM2XSwyNTZdLDY0NTAyOltbMTU3NCwxNzQ0XSwyNTZdLDY0NTAzOltbMTU3NCwxNzQ0XSwyNTZdLDY0NTA0OltbMTU3NCwxNzQ0XSwyNTZdLDY0NTA1OltbMTU3NCwxNjA5XSwyNTZdLDY0NTA2OltbMTU3NCwxNjA5XSwyNTZdLDY0NTA3OltbMTU3NCwxNjA5XSwyNTZdLDY0NTA4OltbMTc0MF0sMjU2XSw2NDUwOTpbWzE3NDBdLDI1Nl0sNjQ1MTA6W1sxNzQwXSwyNTZdLDY0NTExOltbMTc0MF0sMjU2XX0sCjY0NTEyOns2NDUxMjpbWzE1NzQsMTU4MF0sMjU2XSw2NDUxMzpbWzE1NzQsMTU4MV0sMjU2XSw2NDUxNDpbWzE1NzQsMTYwNV0sMjU2XSw2NDUxNTpbWzE1NzQsMTYwOV0sMjU2XSw2NDUxNjpbWzE1NzQsMTYxMF0sMjU2XSw2NDUxNzpbWzE1NzYsMTU4MF0sMjU2XSw2NDUxODpbWzE1NzYsMTU4MV0sMjU2XSw2NDUxOTpbWzE1NzYsMTU4Ml0sMjU2XSw2NDUyMDpbWzE1NzYsMTYwNV0sMjU2XSw2NDUyMTpbWzE1NzYsMTYwOV0sMjU2XSw2NDUyMjpbWzE1NzYsMTYxMF0sMjU2XSw2NDUyMzpbWzE1NzgsMTU4MF0sMjU2XSw2NDUyNDpbWzE1NzgsMTU4MV0sMjU2XSw2NDUyNTpbWzE1NzgsMTU4Ml0sMjU2XSw2NDUyNjpbWzE1NzgsMTYwNV0sMjU2XSw2NDUyNzpbWzE1NzgsMTYwOV0sMjU2XSw2NDUyODpbWzE1NzgsMTYxMF0sMjU2XSw2NDUyOTpbWzE1NzksMTU4MF0sMjU2XSw2NDUzMDpbWzE1NzksMTYwNV0sMjU2XSw2NDUzMTpbWzE1NzksMTYwOV0sMjU2XSw2NDUzMjpbWzE1NzksMTYxMF0sMjU2XSw2NDUzMzpbWzE1ODAsMTU4MV0sMjU2XSw2NDUzNDpbWzE1ODAsMTYwNV0sMjU2XSw2NDUzNTpbWzE1ODEsMTU4MF0sMjU2XSw2NDUzNjpbWzE1ODEsMTYwNV0sMjU2XSw2NDUzNzpbWzE1ODIsMTU4MF0sMjU2XSw2NDUzODpbWzE1ODIsMTU4MV0sMjU2XSw2NDUzOTpbWzE1ODIsMTYwNV0sMjU2XSw2NDU0MDpbWzE1ODcsMTU4MF0sMjU2XSw2NDU0MTpbWzE1ODcsMTU4MV0sMjU2XSw2NDU0MjpbWzE1ODcsMTU4Ml0sMjU2XSw2NDU0MzpbWzE1ODcsMTYwNV0sMjU2XSw2NDU0NDpbWzE1ODksMTU4MV0sMjU2XSw2NDU0NTpbWzE1ODksMTYwNV0sMjU2XSw2NDU0NjpbWzE1OTAsMTU4MF0sMjU2XSw2NDU0NzpbWzE1OTAsMTU4MV0sMjU2XSw2NDU0ODpbWzE1OTAsMTU4Ml0sMjU2XSw2NDU0OTpbWzE1OTAsMTYwNV0sMjU2XSw2NDU1MDpbWzE1OTEsMTU4MV0sMjU2XSw2NDU1MTpbWzE1OTEsMTYwNV0sMjU2XSw2NDU1MjpbWzE1OTIsMTYwNV0sMjU2XSw2NDU1MzpbWzE1OTMsMTU4MF0sMjU2XSw2NDU1NDpbWzE1OTMsMTYwNV0sMjU2XSw2NDU1NTpbWzE1OTQsMTU4MF0sMjU2XSw2NDU1NjpbWzE1OTQsMTYwNV0sMjU2XSw2NDU1NzpbWzE2MDEsMTU4MF0sMjU2XSw2NDU1ODpbWzE2MDEsMTU4MV0sMjU2XSw2NDU1OTpbWzE2MDEsMTU4Ml0sMjU2XSw2NDU2MDpbWzE2MDEsMTYwNV0sMjU2XSw2NDU2MTpbWzE2MDEsMTYwOV0sMjU2XSw2NDU2MjpbWzE2MDEsMTYxMF0sMjU2XSw2NDU2MzpbWzE2MDIsMTU4MV0sMjU2XSw2NDU2NDpbWzE2MDIsMTYwNV0sMjU2XSw2NDU2NTpbWzE2MDIsMTYwOV0sMjU2XSw2NDU2NjpbWzE2MDIsMTYxMF0sMjU2XSw2NDU2NzpbWzE2MDMsMTU3NV0sMjU2XSw2NDU2ODpbWzE2MDMsMTU4MF0sMjU2XSw2NDU2OTpbWzE2MDMsMTU4MV0sMjU2XSw2NDU3MDpbWzE2MDMsMTU4Ml0sMjU2XSw2NDU3MTpbWzE2MDMsMTYwNF0sMjU2XSw2NDU3MjpbWzE2MDMsMTYwNV0sMjU2XSw2NDU3MzpbWzE2MDMsMTYwOV0sMjU2XSw2NDU3NDpbWzE2MDMsMTYxMF0sMjU2XSw2NDU3NTpbWzE2MDQsMTU4MF0sMjU2XSw2NDU3NjpbWzE2MDQsMTU4MV0sMjU2XSw2NDU3NzpbWzE2MDQsMTU4Ml0sMjU2XSw2NDU3ODpbWzE2MDQsMTYwNV0sMjU2XSw2NDU3OTpbWzE2MDQsMTYwOV0sMjU2XSw2NDU4MDpbWzE2MDQsMTYxMF0sMjU2XSw2NDU4MTpbWzE2MDUsMTU4MF0sMjU2XSw2NDU4MjpbWzE2MDUsMTU4MV0sMjU2XSw2NDU4MzpbWzE2MDUsMTU4Ml0sMjU2XSw2NDU4NDpbWzE2MDUsMTYwNV0sMjU2XSw2NDU4NTpbWzE2MDUsMTYwOV0sMjU2XSw2NDU4NjpbWzE2MDUsMTYxMF0sMjU2XSw2NDU4NzpbWzE2MDYsMTU4MF0sMjU2XSw2NDU4ODpbWzE2MDYsMTU4MV0sMjU2XSw2NDU4OTpbWzE2MDYsMTU4Ml0sMjU2XSw2NDU5MDpbWzE2MDYsMTYwNV0sMjU2XSw2NDU5MTpbWzE2MDYsMTYwOV0sMjU2XSw2NDU5MjpbWzE2MDYsMTYxMF0sMjU2XSw2NDU5MzpbWzE2MDcsMTU4MF0sMjU2XSw2NDU5NDpbWzE2MDcsMTYwNV0sMjU2XSw2NDU5NTpbWzE2MDcsMTYwOV0sMjU2XSw2NDU5NjpbWzE2MDcsMTYxMF0sMjU2XSw2NDU5NzpbWzE2MTAsMTU4MF0sMjU2XSw2NDU5ODpbWzE2MTAsMTU4MV0sMjU2XSw2NDU5OTpbWzE2MTAsMTU4Ml0sMjU2XSw2NDYwMDpbWzE2MTAsMTYwNV0sMjU2XSw2NDYwMTpbWzE2MTAsMTYwOV0sMjU2XSw2NDYwMjpbWzE2MTAsMTYxMF0sMjU2XSw2NDYwMzpbWzE1ODQsMTY0OF0sMjU2XSw2NDYwNDpbWzE1ODUsMTY0OF0sMjU2XSw2NDYwNTpbWzE2MDksMTY0OF0sMjU2XSw2NDYwNjpbWzMyLDE2MTIsMTYxN10sMjU2XSw2NDYwNzpbWzMyLDE2MTMsMTYxN10sMjU2XSw2NDYwODpbWzMyLDE2MTQsMTYxN10sMjU2XSw2NDYwOTpbWzMyLDE2MTUsMTYxN10sMjU2XSw2NDYxMDpbWzMyLDE2MTYsMTYxN10sMjU2XSw2NDYxMTpbWzMyLDE2MTcsMTY0OF0sMjU2XSw2NDYxMjpbWzE1NzQsMTU4NV0sMjU2XSw2NDYxMzpbWzE1NzQsMTU4Nl0sMjU2XSw2NDYxNDpbWzE1NzQsMTYwNV0sMjU2XSw2NDYxNTpbWzE1NzQsMTYwNl0sMjU2XSw2NDYxNjpbWzE1NzQsMTYwOV0sMjU2XSw2NDYxNzpbWzE1NzQsMTYxMF0sMjU2XSw2NDYxODpbWzE1NzYsMTU4NV0sMjU2XSw2NDYxOTpbWzE1NzYsMTU4Nl0sMjU2XSw2NDYyMDpbWzE1NzYsMTYwNV0sMjU2XSw2NDYyMTpbWzE1NzYsMTYwNl0sMjU2XSw2NDYyMjpbWzE1NzYsMTYwOV0sMjU2XSw2NDYyMzpbWzE1NzYsMTYxMF0sMjU2XSw2NDYyNDpbWzE1NzgsMTU4NV0sMjU2XSw2NDYyNTpbWzE1NzgsMTU4Nl0sMjU2XSw2NDYyNjpbWzE1NzgsMTYwNV0sMjU2XSw2NDYyNzpbWzE1NzgsMTYwNl0sMjU2XSw2NDYyODpbWzE1NzgsMTYwOV0sMjU2XSw2NDYyOTpbWzE1NzgsMTYxMF0sMjU2XSw2NDYzMDpbWzE1NzksMTU4NV0sMjU2XSw2NDYzMTpbWzE1NzksMTU4Nl0sMjU2XSw2NDYzMjpbWzE1NzksMTYwNV0sMjU2XSw2NDYzMzpbWzE1NzksMTYwNl0sMjU2XSw2NDYzNDpbWzE1NzksMTYwOV0sMjU2XSw2NDYzNTpbWzE1NzksMTYxMF0sMjU2XSw2NDYzNjpbWzE2MDEsMTYwOV0sMjU2XSw2NDYzNzpbWzE2MDEsMTYxMF0sMjU2XSw2NDYzODpbWzE2MDIsMTYwOV0sMjU2XSw2NDYzOTpbWzE2MDIsMTYxMF0sMjU2XSw2NDY0MDpbWzE2MDMsMTU3NV0sMjU2XSw2NDY0MTpbWzE2MDMsMTYwNF0sMjU2XSw2NDY0MjpbWzE2MDMsMTYwNV0sMjU2XSw2NDY0MzpbWzE2MDMsMTYwOV0sMjU2XSw2NDY0NDpbWzE2MDMsMTYxMF0sMjU2XSw2NDY0NTpbWzE2MDQsMTYwNV0sMjU2XSw2NDY0NjpbWzE2MDQsMTYwOV0sMjU2XSw2NDY0NzpbWzE2MDQsMTYxMF0sMjU2XSw2NDY0ODpbWzE2MDUsMTU3NV0sMjU2XSw2NDY0OTpbWzE2MDUsMTYwNV0sMjU2XSw2NDY1MDpbWzE2MDYsMTU4NV0sMjU2XSw2NDY1MTpbWzE2MDYsMTU4Nl0sMjU2XSw2NDY1MjpbWzE2MDYsMTYwNV0sMjU2XSw2NDY1MzpbWzE2MDYsMTYwNl0sMjU2XSw2NDY1NDpbWzE2MDYsMTYwOV0sMjU2XSw2NDY1NTpbWzE2MDYsMTYxMF0sMjU2XSw2NDY1NjpbWzE2MDksMTY0OF0sMjU2XSw2NDY1NzpbWzE2MTAsMTU4NV0sMjU2XSw2NDY1ODpbWzE2MTAsMTU4Nl0sMjU2XSw2NDY1OTpbWzE2MTAsMTYwNV0sMjU2XSw2NDY2MDpbWzE2MTAsMTYwNl0sMjU2XSw2NDY2MTpbWzE2MTAsMTYwOV0sMjU2XSw2NDY2MjpbWzE2MTAsMTYxMF0sMjU2XSw2NDY2MzpbWzE1NzQsMTU4MF0sMjU2XSw2NDY2NDpbWzE1NzQsMTU4MV0sMjU2XSw2NDY2NTpbWzE1NzQsMTU4Ml0sMjU2XSw2NDY2NjpbWzE1NzQsMTYwNV0sMjU2XSw2NDY2NzpbWzE1NzQsMTYwN10sMjU2XSw2NDY2ODpbWzE1NzYsMTU4MF0sMjU2XSw2NDY2OTpbWzE1NzYsMTU4MV0sMjU2XSw2NDY3MDpbWzE1NzYsMTU4Ml0sMjU2XSw2NDY3MTpbWzE1NzYsMTYwNV0sMjU2XSw2NDY3MjpbWzE1NzYsMTYwN10sMjU2XSw2NDY3MzpbWzE1NzgsMTU4MF0sMjU2XSw2NDY3NDpbWzE1NzgsMTU4MV0sMjU2XSw2NDY3NTpbWzE1NzgsMTU4Ml0sMjU2XSw2NDY3NjpbWzE1NzgsMTYwNV0sMjU2XSw2NDY3NzpbWzE1NzgsMTYwN10sMjU2XSw2NDY3ODpbWzE1NzksMTYwNV0sMjU2XSw2NDY3OTpbWzE1ODAsMTU4MV0sMjU2XSw2NDY4MDpbWzE1ODAsMTYwNV0sMjU2XSw2NDY4MTpbWzE1ODEsMTU4MF0sMjU2XSw2NDY4MjpbWzE1ODEsMTYwNV0sMjU2XSw2NDY4MzpbWzE1ODIsMTU4MF0sMjU2XSw2NDY4NDpbWzE1ODIsMTYwNV0sMjU2XSw2NDY4NTpbWzE1ODcsMTU4MF0sMjU2XSw2NDY4NjpbWzE1ODcsMTU4MV0sMjU2XSw2NDY4NzpbWzE1ODcsMTU4Ml0sMjU2XSw2NDY4ODpbWzE1ODcsMTYwNV0sMjU2XSw2NDY4OTpbWzE1ODksMTU4MV0sMjU2XSw2NDY5MDpbWzE1ODksMTU4Ml0sMjU2XSw2NDY5MTpbWzE1ODksMTYwNV0sMjU2XSw2NDY5MjpbWzE1OTAsMTU4MF0sMjU2XSw2NDY5MzpbWzE1OTAsMTU4MV0sMjU2XSw2NDY5NDpbWzE1OTAsMTU4Ml0sMjU2XSw2NDY5NTpbWzE1OTAsMTYwNV0sMjU2XSw2NDY5NjpbWzE1OTEsMTU4MV0sMjU2XSw2NDY5NzpbWzE1OTIsMTYwNV0sMjU2XSw2NDY5ODpbWzE1OTMsMTU4MF0sMjU2XSw2NDY5OTpbWzE1OTMsMTYwNV0sMjU2XSw2NDcwMDpbWzE1OTQsMTU4MF0sMjU2XSw2NDcwMTpbWzE1OTQsMTYwNV0sMjU2XSw2NDcwMjpbWzE2MDEsMTU4MF0sMjU2XSw2NDcwMzpbWzE2MDEsMTU4MV0sMjU2XSw2NDcwNDpbWzE2MDEsMTU4Ml0sMjU2XSw2NDcwNTpbWzE2MDEsMTYwNV0sMjU2XSw2NDcwNjpbWzE2MDIsMTU4MV0sMjU2XSw2NDcwNzpbWzE2MDIsMTYwNV0sMjU2XSw2NDcwODpbWzE2MDMsMTU4MF0sMjU2XSw2NDcwOTpbWzE2MDMsMTU4MV0sMjU2XSw2NDcxMDpbWzE2MDMsMTU4Ml0sMjU2XSw2NDcxMTpbWzE2MDMsMTYwNF0sMjU2XSw2NDcxMjpbWzE2MDMsMTYwNV0sMjU2XSw2NDcxMzpbWzE2MDQsMTU4MF0sMjU2XSw2NDcxNDpbWzE2MDQsMTU4MV0sMjU2XSw2NDcxNTpbWzE2MDQsMTU4Ml0sMjU2XSw2NDcxNjpbWzE2MDQsMTYwNV0sMjU2XSw2NDcxNzpbWzE2MDQsMTYwN10sMjU2XSw2NDcxODpbWzE2MDUsMTU4MF0sMjU2XSw2NDcxOTpbWzE2MDUsMTU4MV0sMjU2XSw2NDcyMDpbWzE2MDUsMTU4Ml0sMjU2XSw2NDcyMTpbWzE2MDUsMTYwNV0sMjU2XSw2NDcyMjpbWzE2MDYsMTU4MF0sMjU2XSw2NDcyMzpbWzE2MDYsMTU4MV0sMjU2XSw2NDcyNDpbWzE2MDYsMTU4Ml0sMjU2XSw2NDcyNTpbWzE2MDYsMTYwNV0sMjU2XSw2NDcyNjpbWzE2MDYsMTYwN10sMjU2XSw2NDcyNzpbWzE2MDcsMTU4MF0sMjU2XSw2NDcyODpbWzE2MDcsMTYwNV0sMjU2XSw2NDcyOTpbWzE2MDcsMTY0OF0sMjU2XSw2NDczMDpbWzE2MTAsMTU4MF0sMjU2XSw2NDczMTpbWzE2MTAsMTU4MV0sMjU2XSw2NDczMjpbWzE2MTAsMTU4Ml0sMjU2XSw2NDczMzpbWzE2MTAsMTYwNV0sMjU2XSw2NDczNDpbWzE2MTAsMTYwN10sMjU2XSw2NDczNTpbWzE1NzQsMTYwNV0sMjU2XSw2NDczNjpbWzE1NzQsMTYwN10sMjU2XSw2NDczNzpbWzE1NzYsMTYwNV0sMjU2XSw2NDczODpbWzE1NzYsMTYwN10sMjU2XSw2NDczOTpbWzE1NzgsMTYwNV0sMjU2XSw2NDc0MDpbWzE1NzgsMTYwN10sMjU2XSw2NDc0MTpbWzE1NzksMTYwNV0sMjU2XSw2NDc0MjpbWzE1NzksMTYwN10sMjU2XSw2NDc0MzpbWzE1ODcsMTYwNV0sMjU2XSw2NDc0NDpbWzE1ODcsMTYwN10sMjU2XSw2NDc0NTpbWzE1ODgsMTYwNV0sMjU2XSw2NDc0NjpbWzE1ODgsMTYwN10sMjU2XSw2NDc0NzpbWzE2MDMsMTYwNF0sMjU2XSw2NDc0ODpbWzE2MDMsMTYwNV0sMjU2XSw2NDc0OTpbWzE2MDQsMTYwNV0sMjU2XSw2NDc1MDpbWzE2MDYsMTYwNV0sMjU2XSw2NDc1MTpbWzE2MDYsMTYwN10sMjU2XSw2NDc1MjpbWzE2MTAsMTYwNV0sMjU2XSw2NDc1MzpbWzE2MTAsMTYwN10sMjU2XSw2NDc1NDpbWzE2MDAsMTYxNCwxNjE3XSwyNTZdLDY0NzU1OltbMTYwMCwxNjE1LDE2MTddLDI1Nl0sNjQ3NTY6W1sxNjAwLDE2MTYsMTYxN10sMjU2XSw2NDc1NzpbWzE1OTEsMTYwOV0sMjU2XSw2NDc1ODpbWzE1OTEsMTYxMF0sMjU2XSw2NDc1OTpbWzE1OTMsMTYwOV0sMjU2XSw2NDc2MDpbWzE1OTMsMTYxMF0sMjU2XSw2NDc2MTpbWzE1OTQsMTYwOV0sMjU2XSw2NDc2MjpbWzE1OTQsMTYxMF0sMjU2XSw2NDc2MzpbWzE1ODcsMTYwOV0sMjU2XSw2NDc2NDpbWzE1ODcsMTYxMF0sMjU2XSw2NDc2NTpbWzE1ODgsMTYwOV0sMjU2XSw2NDc2NjpbWzE1ODgsMTYxMF0sMjU2XSw2NDc2NzpbWzE1ODEsMTYwOV0sMjU2XX0sCjY0NzY4Ons2NDc2ODpbWzE1ODEsMTYxMF0sMjU2XSw2NDc2OTpbWzE1ODAsMTYwOV0sMjU2XSw2NDc3MDpbWzE1ODAsMTYxMF0sMjU2XSw2NDc3MTpbWzE1ODIsMTYwOV0sMjU2XSw2NDc3MjpbWzE1ODIsMTYxMF0sMjU2XSw2NDc3MzpbWzE1ODksMTYwOV0sMjU2XSw2NDc3NDpbWzE1ODksMTYxMF0sMjU2XSw2NDc3NTpbWzE1OTAsMTYwOV0sMjU2XSw2NDc3NjpbWzE1OTAsMTYxMF0sMjU2XSw2NDc3NzpbWzE1ODgsMTU4MF0sMjU2XSw2NDc3ODpbWzE1ODgsMTU4MV0sMjU2XSw2NDc3OTpbWzE1ODgsMTU4Ml0sMjU2XSw2NDc4MDpbWzE1ODgsMTYwNV0sMjU2XSw2NDc4MTpbWzE1ODgsMTU4NV0sMjU2XSw2NDc4MjpbWzE1ODcsMTU4NV0sMjU2XSw2NDc4MzpbWzE1ODksMTU4NV0sMjU2XSw2NDc4NDpbWzE1OTAsMTU4NV0sMjU2XSw2NDc4NTpbWzE1OTEsMTYwOV0sMjU2XSw2NDc4NjpbWzE1OTEsMTYxMF0sMjU2XSw2NDc4NzpbWzE1OTMsMTYwOV0sMjU2XSw2NDc4ODpbWzE1OTMsMTYxMF0sMjU2XSw2NDc4OTpbWzE1OTQsMTYwOV0sMjU2XSw2NDc5MDpbWzE1OTQsMTYxMF0sMjU2XSw2NDc5MTpbWzE1ODcsMTYwOV0sMjU2XSw2NDc5MjpbWzE1ODcsMTYxMF0sMjU2XSw2NDc5MzpbWzE1ODgsMTYwOV0sMjU2XSw2NDc5NDpbWzE1ODgsMTYxMF0sMjU2XSw2NDc5NTpbWzE1ODEsMTYwOV0sMjU2XSw2NDc5NjpbWzE1ODEsMTYxMF0sMjU2XSw2NDc5NzpbWzE1ODAsMTYwOV0sMjU2XSw2NDc5ODpbWzE1ODAsMTYxMF0sMjU2XSw2NDc5OTpbWzE1ODIsMTYwOV0sMjU2XSw2NDgwMDpbWzE1ODIsMTYxMF0sMjU2XSw2NDgwMTpbWzE1ODksMTYwOV0sMjU2XSw2NDgwMjpbWzE1ODksMTYxMF0sMjU2XSw2NDgwMzpbWzE1OTAsMTYwOV0sMjU2XSw2NDgwNDpbWzE1OTAsMTYxMF0sMjU2XSw2NDgwNTpbWzE1ODgsMTU4MF0sMjU2XSw2NDgwNjpbWzE1ODgsMTU4MV0sMjU2XSw2NDgwNzpbWzE1ODgsMTU4Ml0sMjU2XSw2NDgwODpbWzE1ODgsMTYwNV0sMjU2XSw2NDgwOTpbWzE1ODgsMTU4NV0sMjU2XSw2NDgxMDpbWzE1ODcsMTU4NV0sMjU2XSw2NDgxMTpbWzE1ODksMTU4NV0sMjU2XSw2NDgxMjpbWzE1OTAsMTU4NV0sMjU2XSw2NDgxMzpbWzE1ODgsMTU4MF0sMjU2XSw2NDgxNDpbWzE1ODgsMTU4MV0sMjU2XSw2NDgxNTpbWzE1ODgsMTU4Ml0sMjU2XSw2NDgxNjpbWzE1ODgsMTYwNV0sMjU2XSw2NDgxNzpbWzE1ODcsMTYwN10sMjU2XSw2NDgxODpbWzE1ODgsMTYwN10sMjU2XSw2NDgxOTpbWzE1OTEsMTYwNV0sMjU2XSw2NDgyMDpbWzE1ODcsMTU4MF0sMjU2XSw2NDgyMTpbWzE1ODcsMTU4MV0sMjU2XSw2NDgyMjpbWzE1ODcsMTU4Ml0sMjU2XSw2NDgyMzpbWzE1ODgsMTU4MF0sMjU2XSw2NDgyNDpbWzE1ODgsMTU4MV0sMjU2XSw2NDgyNTpbWzE1ODgsMTU4Ml0sMjU2XSw2NDgyNjpbWzE1OTEsMTYwNV0sMjU2XSw2NDgyNzpbWzE1OTIsMTYwNV0sMjU2XSw2NDgyODpbWzE1NzUsMTYxMV0sMjU2XSw2NDgyOTpbWzE1NzUsMTYxMV0sMjU2XSw2NDg0ODpbWzE1NzgsMTU4MCwxNjA1XSwyNTZdLDY0ODQ5OltbMTU3OCwxNTgxLDE1ODBdLDI1Nl0sNjQ4NTA6W1sxNTc4LDE1ODEsMTU4MF0sMjU2XSw2NDg1MTpbWzE1NzgsMTU4MSwxNjA1XSwyNTZdLDY0ODUyOltbMTU3OCwxNTgyLDE2MDVdLDI1Nl0sNjQ4NTM6W1sxNTc4LDE2MDUsMTU4MF0sMjU2XSw2NDg1NDpbWzE1NzgsMTYwNSwxNTgxXSwyNTZdLDY0ODU1OltbMTU3OCwxNjA1LDE1ODJdLDI1Nl0sNjQ4NTY6W1sxNTgwLDE2MDUsMTU4MV0sMjU2XSw2NDg1NzpbWzE1ODAsMTYwNSwxNTgxXSwyNTZdLDY0ODU4OltbMTU4MSwxNjA1LDE2MTBdLDI1Nl0sNjQ4NTk6W1sxNTgxLDE2MDUsMTYwOV0sMjU2XSw2NDg2MDpbWzE1ODcsMTU4MSwxNTgwXSwyNTZdLDY0ODYxOltbMTU4NywxNTgwLDE1ODFdLDI1Nl0sNjQ4NjI6W1sxNTg3LDE1ODAsMTYwOV0sMjU2XSw2NDg2MzpbWzE1ODcsMTYwNSwxNTgxXSwyNTZdLDY0ODY0OltbMTU4NywxNjA1LDE1ODFdLDI1Nl0sNjQ4NjU6W1sxNTg3LDE2MDUsMTU4MF0sMjU2XSw2NDg2NjpbWzE1ODcsMTYwNSwxNjA1XSwyNTZdLDY0ODY3OltbMTU4NywxNjA1LDE2MDVdLDI1Nl0sNjQ4Njg6W1sxNTg5LDE1ODEsMTU4MV0sMjU2XSw2NDg2OTpbWzE1ODksMTU4MSwxNTgxXSwyNTZdLDY0ODcwOltbMTU4OSwxNjA1LDE2MDVdLDI1Nl0sNjQ4NzE6W1sxNTg4LDE1ODEsMTYwNV0sMjU2XSw2NDg3MjpbWzE1ODgsMTU4MSwxNjA1XSwyNTZdLDY0ODczOltbMTU4OCwxNTgwLDE2MTBdLDI1Nl0sNjQ4NzQ6W1sxNTg4LDE2MDUsMTU4Ml0sMjU2XSw2NDg3NTpbWzE1ODgsMTYwNSwxNTgyXSwyNTZdLDY0ODc2OltbMTU4OCwxNjA1LDE2MDVdLDI1Nl0sNjQ4Nzc6W1sxNTg4LDE2MDUsMTYwNV0sMjU2XSw2NDg3ODpbWzE1OTAsMTU4MSwxNjA5XSwyNTZdLDY0ODc5OltbMTU5MCwxNTgyLDE2MDVdLDI1Nl0sNjQ4ODA6W1sxNTkwLDE1ODIsMTYwNV0sMjU2XSw2NDg4MTpbWzE1OTEsMTYwNSwxNTgxXSwyNTZdLDY0ODgyOltbMTU5MSwxNjA1LDE1ODFdLDI1Nl0sNjQ4ODM6W1sxNTkxLDE2MDUsMTYwNV0sMjU2XSw2NDg4NDpbWzE1OTEsMTYwNSwxNjEwXSwyNTZdLDY0ODg1OltbMTU5MywxNTgwLDE2MDVdLDI1Nl0sNjQ4ODY6W1sxNTkzLDE2MDUsMTYwNV0sMjU2XSw2NDg4NzpbWzE1OTMsMTYwNSwxNjA1XSwyNTZdLDY0ODg4OltbMTU5MywxNjA1LDE2MDldLDI1Nl0sNjQ4ODk6W1sxNTk0LDE2MDUsMTYwNV0sMjU2XSw2NDg5MDpbWzE1OTQsMTYwNSwxNjEwXSwyNTZdLDY0ODkxOltbMTU5NCwxNjA1LDE2MDldLDI1Nl0sNjQ4OTI6W1sxNjAxLDE1ODIsMTYwNV0sMjU2XSw2NDg5MzpbWzE2MDEsMTU4MiwxNjA1XSwyNTZdLDY0ODk0OltbMTYwMiwxNjA1LDE1ODFdLDI1Nl0sNjQ4OTU6W1sxNjAyLDE2MDUsMTYwNV0sMjU2XSw2NDg5NjpbWzE2MDQsMTU4MSwxNjA1XSwyNTZdLDY0ODk3OltbMTYwNCwxNTgxLDE2MTBdLDI1Nl0sNjQ4OTg6W1sxNjA0LDE1ODEsMTYwOV0sMjU2XSw2NDg5OTpbWzE2MDQsMTU4MCwxNTgwXSwyNTZdLDY0OTAwOltbMTYwNCwxNTgwLDE1ODBdLDI1Nl0sNjQ5MDE6W1sxNjA0LDE1ODIsMTYwNV0sMjU2XSw2NDkwMjpbWzE2MDQsMTU4MiwxNjA1XSwyNTZdLDY0OTAzOltbMTYwNCwxNjA1LDE1ODFdLDI1Nl0sNjQ5MDQ6W1sxNjA0LDE2MDUsMTU4MV0sMjU2XSw2NDkwNTpbWzE2MDUsMTU4MSwxNTgwXSwyNTZdLDY0OTA2OltbMTYwNSwxNTgxLDE2MDVdLDI1Nl0sNjQ5MDc6W1sxNjA1LDE1ODEsMTYxMF0sMjU2XSw2NDkwODpbWzE2MDUsMTU4MCwxNTgxXSwyNTZdLDY0OTA5OltbMTYwNSwxNTgwLDE2MDVdLDI1Nl0sNjQ5MTA6W1sxNjA1LDE1ODIsMTU4MF0sMjU2XSw2NDkxMTpbWzE2MDUsMTU4MiwxNjA1XSwyNTZdLDY0OTE0OltbMTYwNSwxNTgwLDE1ODJdLDI1Nl0sNjQ5MTU6W1sxNjA3LDE2MDUsMTU4MF0sMjU2XSw2NDkxNjpbWzE2MDcsMTYwNSwxNjA1XSwyNTZdLDY0OTE3OltbMTYwNiwxNTgxLDE2MDVdLDI1Nl0sNjQ5MTg6W1sxNjA2LDE1ODEsMTYwOV0sMjU2XSw2NDkxOTpbWzE2MDYsMTU4MCwxNjA1XSwyNTZdLDY0OTIwOltbMTYwNiwxNTgwLDE2MDVdLDI1Nl0sNjQ5MjE6W1sxNjA2LDE1ODAsMTYwOV0sMjU2XSw2NDkyMjpbWzE2MDYsMTYwNSwxNjEwXSwyNTZdLDY0OTIzOltbMTYwNiwxNjA1LDE2MDldLDI1Nl0sNjQ5MjQ6W1sxNjEwLDE2MDUsMTYwNV0sMjU2XSw2NDkyNTpbWzE2MTAsMTYwNSwxNjA1XSwyNTZdLDY0OTI2OltbMTU3NiwxNTgyLDE2MTBdLDI1Nl0sNjQ5Mjc6W1sxNTc4LDE1ODAsMTYxMF0sMjU2XSw2NDkyODpbWzE1NzgsMTU4MCwxNjA5XSwyNTZdLDY0OTI5OltbMTU3OCwxNTgyLDE2MTBdLDI1Nl0sNjQ5MzA6W1sxNTc4LDE1ODIsMTYwOV0sMjU2XSw2NDkzMTpbWzE1NzgsMTYwNSwxNjEwXSwyNTZdLDY0OTMyOltbMTU3OCwxNjA1LDE2MDldLDI1Nl0sNjQ5MzM6W1sxNTgwLDE2MDUsMTYxMF0sMjU2XSw2NDkzNDpbWzE1ODAsMTU4MSwxNjA5XSwyNTZdLDY0OTM1OltbMTU4MCwxNjA1LDE2MDldLDI1Nl0sNjQ5MzY6W1sxNTg3LDE1ODIsMTYwOV0sMjU2XSw2NDkzNzpbWzE1ODksMTU4MSwxNjEwXSwyNTZdLDY0OTM4OltbMTU4OCwxNTgxLDE2MTBdLDI1Nl0sNjQ5Mzk6W1sxNTkwLDE1ODEsMTYxMF0sMjU2XSw2NDk0MDpbWzE2MDQsMTU4MCwxNjEwXSwyNTZdLDY0OTQxOltbMTYwNCwxNjA1LDE2MTBdLDI1Nl0sNjQ5NDI6W1sxNjEwLDE1ODEsMTYxMF0sMjU2XSw2NDk0MzpbWzE2MTAsMTU4MCwxNjEwXSwyNTZdLDY0OTQ0OltbMTYxMCwxNjA1LDE2MTBdLDI1Nl0sNjQ5NDU6W1sxNjA1LDE2MDUsMTYxMF0sMjU2XSw2NDk0NjpbWzE2MDIsMTYwNSwxNjEwXSwyNTZdLDY0OTQ3OltbMTYwNiwxNTgxLDE2MTBdLDI1Nl0sNjQ5NDg6W1sxNjAyLDE2MDUsMTU4MV0sMjU2XSw2NDk0OTpbWzE2MDQsMTU4MSwxNjA1XSwyNTZdLDY0OTUwOltbMTU5MywxNjA1LDE2MTBdLDI1Nl0sNjQ5NTE6W1sxNjAzLDE2MDUsMTYxMF0sMjU2XSw2NDk1MjpbWzE2MDYsMTU4MCwxNTgxXSwyNTZdLDY0OTUzOltbMTYwNSwxNTgyLDE2MTBdLDI1Nl0sNjQ5NTQ6W1sxNjA0LDE1ODAsMTYwNV0sMjU2XSw2NDk1NTpbWzE2MDMsMTYwNSwxNjA1XSwyNTZdLDY0OTU2OltbMTYwNCwxNTgwLDE2MDVdLDI1Nl0sNjQ5NTc6W1sxNjA2LDE1ODAsMTU4MV0sMjU2XSw2NDk1ODpbWzE1ODAsMTU4MSwxNjEwXSwyNTZdLDY0OTU5OltbMTU4MSwxNTgwLDE2MTBdLDI1Nl0sNjQ5NjA6W1sxNjA1LDE1ODAsMTYxMF0sMjU2XSw2NDk2MTpbWzE2MDEsMTYwNSwxNjEwXSwyNTZdLDY0OTYyOltbMTU3NiwxNTgxLDE2MTBdLDI1Nl0sNjQ5NjM6W1sxNjAzLDE2MDUsMTYwNV0sMjU2XSw2NDk2NDpbWzE1OTMsMTU4MCwxNjA1XSwyNTZdLDY0OTY1OltbMTU4OSwxNjA1LDE2MDVdLDI1Nl0sNjQ5NjY6W1sxNTg3LDE1ODIsMTYxMF0sMjU2XSw2NDk2NzpbWzE2MDYsMTU4MCwxNjEwXSwyNTZdLDY1MDA4OltbMTU4OSwxNjA0LDE3NDZdLDI1Nl0sNjUwMDk6W1sxNjAyLDE2MDQsMTc0Nl0sMjU2XSw2NTAxMDpbWzE1NzUsMTYwNCwxNjA0LDE2MDddLDI1Nl0sNjUwMTE6W1sxNTc1LDE2MDMsMTU3NiwxNTg1XSwyNTZdLDY1MDEyOltbMTYwNSwxNTgxLDE2MDUsMTU4M10sMjU2XSw2NTAxMzpbWzE1ODksMTYwNCwxNTkzLDE2MDVdLDI1Nl0sNjUwMTQ6W1sxNTg1LDE1ODcsMTYwOCwxNjA0XSwyNTZdLDY1MDE1OltbMTU5MywxNjA0LDE2MTAsMTYwN10sMjU2XSw2NTAxNjpbWzE2MDgsMTU4NywxNjA0LDE2MDVdLDI1Nl0sNjUwMTc6W1sxNTg5LDE2MDQsMTYwOV0sMjU2XSw2NTAxODpbWzE1ODksMTYwNCwxNjA5LDMyLDE1NzUsMTYwNCwxNjA0LDE2MDcsMzIsMTU5MywxNjA0LDE2MTAsMTYwNywzMiwxNjA4LDE1ODcsMTYwNCwxNjA1XSwyNTZdLDY1MDE5OltbMTU4MCwxNjA0LDMyLDE1ODAsMTYwNCwxNTc1LDE2MDQsMTYwN10sMjU2XSw2NTAyMDpbWzE1ODUsMTc0MCwxNTc1LDE2MDRdLDI1Nl19LAo2NTAyNDp7NjUwNDA6W1s0NF0sMjU2XSw2NTA0MTpbWzEyMjg5XSwyNTZdLDY1MDQyOltbMTIyOTBdLDI1Nl0sNjUwNDM6W1s1OF0sMjU2XSw2NTA0NDpbWzU5XSwyNTZdLDY1MDQ1OltbMzNdLDI1Nl0sNjUwNDY6W1s2M10sMjU2XSw2NTA0NzpbWzEyMzEwXSwyNTZdLDY1MDQ4OltbMTIzMTFdLDI1Nl0sNjUwNDk6W1s4MjMwXSwyNTZdLDY1MDU2OlssMjMwXSw2NTA1NzpbLDIzMF0sNjUwNTg6WywyMzBdLDY1MDU5OlssMjMwXSw2NTA2MDpbLDIzMF0sNjUwNjE6WywyMzBdLDY1MDYyOlssMjMwXSw2NTA2MzpbLDIyMF0sNjUwNjQ6WywyMjBdLDY1MDY1OlssMjIwXSw2NTA2NjpbLDIyMF0sNjUwNjc6WywyMjBdLDY1MDY4OlssMjIwXSw2NTA2OTpbLDIyMF0sNjUwNzI6W1s4MjI5XSwyNTZdLDY1MDczOltbODIxMl0sMjU2XSw2NTA3NDpbWzgyMTFdLDI1Nl0sNjUwNzU6W1s5NV0sMjU2XSw2NTA3NjpbWzk1XSwyNTZdLDY1MDc3OltbNDBdLDI1Nl0sNjUwNzg6W1s0MV0sMjU2XSw2NTA3OTpbWzEyM10sMjU2XSw2NTA4MDpbWzEyNV0sMjU2XSw2NTA4MTpbWzEyMzA4XSwyNTZdLDY1MDgyOltbMTIzMDldLDI1Nl0sNjUwODM6W1sxMjMwNF0sMjU2XSw2NTA4NDpbWzEyMzA1XSwyNTZdLDY1MDg1OltbMTIyOThdLDI1Nl0sNjUwODY6W1sxMjI5OV0sMjU2XSw2NTA4NzpbWzEyMjk2XSwyNTZdLDY1MDg4OltbMTIyOTddLDI1Nl0sNjUwODk6W1sxMjMwMF0sMjU2XSw2NTA5MDpbWzEyMzAxXSwyNTZdLDY1MDkxOltbMTIzMDJdLDI1Nl0sNjUwOTI6W1sxMjMwM10sMjU2XSw2NTA5NTpbWzkxXSwyNTZdLDY1MDk2OltbOTNdLDI1Nl0sNjUwOTc6W1s4MjU0XSwyNTZdLDY1MDk4OltbODI1NF0sMjU2XSw2NTA5OTpbWzgyNTRdLDI1Nl0sNjUxMDA6W1s4MjU0XSwyNTZdLDY1MTAxOltbOTVdLDI1Nl0sNjUxMDI6W1s5NV0sMjU2XSw2NTEwMzpbWzk1XSwyNTZdLDY1MTA0OltbNDRdLDI1Nl0sNjUxMDU6W1sxMjI4OV0sMjU2XSw2NTEwNjpbWzQ2XSwyNTZdLDY1MTA4OltbNTldLDI1Nl0sNjUxMDk6W1s1OF0sMjU2XSw2NTExMDpbWzYzXSwyNTZdLDY1MTExOltbMzNdLDI1Nl0sNjUxMTI6W1s4MjEyXSwyNTZdLDY1MTEzOltbNDBdLDI1Nl0sNjUxMTQ6W1s0MV0sMjU2XSw2NTExNTpbWzEyM10sMjU2XSw2NTExNjpbWzEyNV0sMjU2XSw2NTExNzpbWzEyMzA4XSwyNTZdLDY1MTE4OltbMTIzMDldLDI1Nl0sNjUxMTk6W1szNV0sMjU2XSw2NTEyMDpbWzM4XSwyNTZdLDY1MTIxOltbNDJdLDI1Nl0sNjUxMjI6W1s0M10sMjU2XSw2NTEyMzpbWzQ1XSwyNTZdLDY1MTI0OltbNjBdLDI1Nl0sNjUxMjU6W1s2Ml0sMjU2XSw2NTEyNjpbWzYxXSwyNTZdLDY1MTI4OltbOTJdLDI1Nl0sNjUxMjk6W1szNl0sMjU2XSw2NTEzMDpbWzM3XSwyNTZdLDY1MTMxOltbNjRdLDI1Nl0sNjUxMzY6W1szMiwxNjExXSwyNTZdLDY1MTM3OltbMTYwMCwxNjExXSwyNTZdLDY1MTM4OltbMzIsMTYxMl0sMjU2XSw2NTE0MDpbWzMyLDE2MTNdLDI1Nl0sNjUxNDI6W1szMiwxNjE0XSwyNTZdLDY1MTQzOltbMTYwMCwxNjE0XSwyNTZdLDY1MTQ0OltbMzIsMTYxNV0sMjU2XSw2NTE0NTpbWzE2MDAsMTYxNV0sMjU2XSw2NTE0NjpbWzMyLDE2MTZdLDI1Nl0sNjUxNDc6W1sxNjAwLDE2MTZdLDI1Nl0sNjUxNDg6W1szMiwxNjE3XSwyNTZdLDY1MTQ5OltbMTYwMCwxNjE3XSwyNTZdLDY1MTUwOltbMzIsMTYxOF0sMjU2XSw2NTE1MTpbWzE2MDAsMTYxOF0sMjU2XSw2NTE1MjpbWzE1NjldLDI1Nl0sNjUxNTM6W1sxNTcwXSwyNTZdLDY1MTU0OltbMTU3MF0sMjU2XSw2NTE1NTpbWzE1NzFdLDI1Nl0sNjUxNTY6W1sxNTcxXSwyNTZdLDY1MTU3OltbMTU3Ml0sMjU2XSw2NTE1ODpbWzE1NzJdLDI1Nl0sNjUxNTk6W1sxNTczXSwyNTZdLDY1MTYwOltbMTU3M10sMjU2XSw2NTE2MTpbWzE1NzRdLDI1Nl0sNjUxNjI6W1sxNTc0XSwyNTZdLDY1MTYzOltbMTU3NF0sMjU2XSw2NTE2NDpbWzE1NzRdLDI1Nl0sNjUxNjU6W1sxNTc1XSwyNTZdLDY1MTY2OltbMTU3NV0sMjU2XSw2NTE2NzpbWzE1NzZdLDI1Nl0sNjUxNjg6W1sxNTc2XSwyNTZdLDY1MTY5OltbMTU3Nl0sMjU2XSw2NTE3MDpbWzE1NzZdLDI1Nl0sNjUxNzE6W1sxNTc3XSwyNTZdLDY1MTcyOltbMTU3N10sMjU2XSw2NTE3MzpbWzE1NzhdLDI1Nl0sNjUxNzQ6W1sxNTc4XSwyNTZdLDY1MTc1OltbMTU3OF0sMjU2XSw2NTE3NjpbWzE1NzhdLDI1Nl0sNjUxNzc6W1sxNTc5XSwyNTZdLDY1MTc4OltbMTU3OV0sMjU2XSw2NTE3OTpbWzE1NzldLDI1Nl0sNjUxODA6W1sxNTc5XSwyNTZdLDY1MTgxOltbMTU4MF0sMjU2XSw2NTE4MjpbWzE1ODBdLDI1Nl0sNjUxODM6W1sxNTgwXSwyNTZdLDY1MTg0OltbMTU4MF0sMjU2XSw2NTE4NTpbWzE1ODFdLDI1Nl0sNjUxODY6W1sxNTgxXSwyNTZdLDY1MTg3OltbMTU4MV0sMjU2XSw2NTE4ODpbWzE1ODFdLDI1Nl0sNjUxODk6W1sxNTgyXSwyNTZdLDY1MTkwOltbMTU4Ml0sMjU2XSw2NTE5MTpbWzE1ODJdLDI1Nl0sNjUxOTI6W1sxNTgyXSwyNTZdLDY1MTkzOltbMTU4M10sMjU2XSw2NTE5NDpbWzE1ODNdLDI1Nl0sNjUxOTU6W1sxNTg0XSwyNTZdLDY1MTk2OltbMTU4NF0sMjU2XSw2NTE5NzpbWzE1ODVdLDI1Nl0sNjUxOTg6W1sxNTg1XSwyNTZdLDY1MTk5OltbMTU4Nl0sMjU2XSw2NTIwMDpbWzE1ODZdLDI1Nl0sNjUyMDE6W1sxNTg3XSwyNTZdLDY1MjAyOltbMTU4N10sMjU2XSw2NTIwMzpbWzE1ODddLDI1Nl0sNjUyMDQ6W1sxNTg3XSwyNTZdLDY1MjA1OltbMTU4OF0sMjU2XSw2NTIwNjpbWzE1ODhdLDI1Nl0sNjUyMDc6W1sxNTg4XSwyNTZdLDY1MjA4OltbMTU4OF0sMjU2XSw2NTIwOTpbWzE1ODldLDI1Nl0sNjUyMTA6W1sxNTg5XSwyNTZdLDY1MjExOltbMTU4OV0sMjU2XSw2NTIxMjpbWzE1ODldLDI1Nl0sNjUyMTM6W1sxNTkwXSwyNTZdLDY1MjE0OltbMTU5MF0sMjU2XSw2NTIxNTpbWzE1OTBdLDI1Nl0sNjUyMTY6W1sxNTkwXSwyNTZdLDY1MjE3OltbMTU5MV0sMjU2XSw2NTIxODpbWzE1OTFdLDI1Nl0sNjUyMTk6W1sxNTkxXSwyNTZdLDY1MjIwOltbMTU5MV0sMjU2XSw2NTIyMTpbWzE1OTJdLDI1Nl0sNjUyMjI6W1sxNTkyXSwyNTZdLDY1MjIzOltbMTU5Ml0sMjU2XSw2NTIyNDpbWzE1OTJdLDI1Nl0sNjUyMjU6W1sxNTkzXSwyNTZdLDY1MjI2OltbMTU5M10sMjU2XSw2NTIyNzpbWzE1OTNdLDI1Nl0sNjUyMjg6W1sxNTkzXSwyNTZdLDY1MjI5OltbMTU5NF0sMjU2XSw2NTIzMDpbWzE1OTRdLDI1Nl0sNjUyMzE6W1sxNTk0XSwyNTZdLDY1MjMyOltbMTU5NF0sMjU2XSw2NTIzMzpbWzE2MDFdLDI1Nl0sNjUyMzQ6W1sxNjAxXSwyNTZdLDY1MjM1OltbMTYwMV0sMjU2XSw2NTIzNjpbWzE2MDFdLDI1Nl0sNjUyMzc6W1sxNjAyXSwyNTZdLDY1MjM4OltbMTYwMl0sMjU2XSw2NTIzOTpbWzE2MDJdLDI1Nl0sNjUyNDA6W1sxNjAyXSwyNTZdLDY1MjQxOltbMTYwM10sMjU2XSw2NTI0MjpbWzE2MDNdLDI1Nl0sNjUyNDM6W1sxNjAzXSwyNTZdLDY1MjQ0OltbMTYwM10sMjU2XSw2NTI0NTpbWzE2MDRdLDI1Nl0sNjUyNDY6W1sxNjA0XSwyNTZdLDY1MjQ3OltbMTYwNF0sMjU2XSw2NTI0ODpbWzE2MDRdLDI1Nl0sNjUyNDk6W1sxNjA1XSwyNTZdLDY1MjUwOltbMTYwNV0sMjU2XSw2NTI1MTpbWzE2MDVdLDI1Nl0sNjUyNTI6W1sxNjA1XSwyNTZdLDY1MjUzOltbMTYwNl0sMjU2XSw2NTI1NDpbWzE2MDZdLDI1Nl0sNjUyNTU6W1sxNjA2XSwyNTZdLDY1MjU2OltbMTYwNl0sMjU2XSw2NTI1NzpbWzE2MDddLDI1Nl0sNjUyNTg6W1sxNjA3XSwyNTZdLDY1MjU5OltbMTYwN10sMjU2XSw2NTI2MDpbWzE2MDddLDI1Nl0sNjUyNjE6W1sxNjA4XSwyNTZdLDY1MjYyOltbMTYwOF0sMjU2XSw2NTI2MzpbWzE2MDldLDI1Nl0sNjUyNjQ6W1sxNjA5XSwyNTZdLDY1MjY1OltbMTYxMF0sMjU2XSw2NTI2NjpbWzE2MTBdLDI1Nl0sNjUyNjc6W1sxNjEwXSwyNTZdLDY1MjY4OltbMTYxMF0sMjU2XSw2NTI2OTpbWzE2MDQsMTU3MF0sMjU2XSw2NTI3MDpbWzE2MDQsMTU3MF0sMjU2XSw2NTI3MTpbWzE2MDQsMTU3MV0sMjU2XSw2NTI3MjpbWzE2MDQsMTU3MV0sMjU2XSw2NTI3MzpbWzE2MDQsMTU3M10sMjU2XSw2NTI3NDpbWzE2MDQsMTU3M10sMjU2XSw2NTI3NTpbWzE2MDQsMTU3NV0sMjU2XSw2NTI3NjpbWzE2MDQsMTU3NV0sMjU2XX0sCjY1MjgwOns2NTI4MTpbWzMzXSwyNTZdLDY1MjgyOltbMzRdLDI1Nl0sNjUyODM6W1szNV0sMjU2XSw2NTI4NDpbWzM2XSwyNTZdLDY1Mjg1OltbMzddLDI1Nl0sNjUyODY6W1szOF0sMjU2XSw2NTI4NzpbWzM5XSwyNTZdLDY1Mjg4OltbNDBdLDI1Nl0sNjUyODk6W1s0MV0sMjU2XSw2NTI5MDpbWzQyXSwyNTZdLDY1MjkxOltbNDNdLDI1Nl0sNjUyOTI6W1s0NF0sMjU2XSw2NTI5MzpbWzQ1XSwyNTZdLDY1Mjk0OltbNDZdLDI1Nl0sNjUyOTU6W1s0N10sMjU2XSw2NTI5NjpbWzQ4XSwyNTZdLDY1Mjk3OltbNDldLDI1Nl0sNjUyOTg6W1s1MF0sMjU2XSw2NTI5OTpbWzUxXSwyNTZdLDY1MzAwOltbNTJdLDI1Nl0sNjUzMDE6W1s1M10sMjU2XSw2NTMwMjpbWzU0XSwyNTZdLDY1MzAzOltbNTVdLDI1Nl0sNjUzMDQ6W1s1Nl0sMjU2XSw2NTMwNTpbWzU3XSwyNTZdLDY1MzA2OltbNThdLDI1Nl0sNjUzMDc6W1s1OV0sMjU2XSw2NTMwODpbWzYwXSwyNTZdLDY1MzA5OltbNjFdLDI1Nl0sNjUzMTA6W1s2Ml0sMjU2XSw2NTMxMTpbWzYzXSwyNTZdLDY1MzEyOltbNjRdLDI1Nl0sNjUzMTM6W1s2NV0sMjU2XSw2NTMxNDpbWzY2XSwyNTZdLDY1MzE1OltbNjddLDI1Nl0sNjUzMTY6W1s2OF0sMjU2XSw2NTMxNzpbWzY5XSwyNTZdLDY1MzE4OltbNzBdLDI1Nl0sNjUzMTk6W1s3MV0sMjU2XSw2NTMyMDpbWzcyXSwyNTZdLDY1MzIxOltbNzNdLDI1Nl0sNjUzMjI6W1s3NF0sMjU2XSw2NTMyMzpbWzc1XSwyNTZdLDY1MzI0OltbNzZdLDI1Nl0sNjUzMjU6W1s3N10sMjU2XSw2NTMyNjpbWzc4XSwyNTZdLDY1MzI3OltbNzldLDI1Nl0sNjUzMjg6W1s4MF0sMjU2XSw2NTMyOTpbWzgxXSwyNTZdLDY1MzMwOltbODJdLDI1Nl0sNjUzMzE6W1s4M10sMjU2XSw2NTMzMjpbWzg0XSwyNTZdLDY1MzMzOltbODVdLDI1Nl0sNjUzMzQ6W1s4Nl0sMjU2XSw2NTMzNTpbWzg3XSwyNTZdLDY1MzM2OltbODhdLDI1Nl0sNjUzMzc6W1s4OV0sMjU2XSw2NTMzODpbWzkwXSwyNTZdLDY1MzM5OltbOTFdLDI1Nl0sNjUzNDA6W1s5Ml0sMjU2XSw2NTM0MTpbWzkzXSwyNTZdLDY1MzQyOltbOTRdLDI1Nl0sNjUzNDM6W1s5NV0sMjU2XSw2NTM0NDpbWzk2XSwyNTZdLDY1MzQ1OltbOTddLDI1Nl0sNjUzNDY6W1s5OF0sMjU2XSw2NTM0NzpbWzk5XSwyNTZdLDY1MzQ4OltbMTAwXSwyNTZdLDY1MzQ5OltbMTAxXSwyNTZdLDY1MzUwOltbMTAyXSwyNTZdLDY1MzUxOltbMTAzXSwyNTZdLDY1MzUyOltbMTA0XSwyNTZdLDY1MzUzOltbMTA1XSwyNTZdLDY1MzU0OltbMTA2XSwyNTZdLDY1MzU1OltbMTA3XSwyNTZdLDY1MzU2OltbMTA4XSwyNTZdLDY1MzU3OltbMTA5XSwyNTZdLDY1MzU4OltbMTEwXSwyNTZdLDY1MzU5OltbMTExXSwyNTZdLDY1MzYwOltbMTEyXSwyNTZdLDY1MzYxOltbMTEzXSwyNTZdLDY1MzYyOltbMTE0XSwyNTZdLDY1MzYzOltbMTE1XSwyNTZdLDY1MzY0OltbMTE2XSwyNTZdLDY1MzY1OltbMTE3XSwyNTZdLDY1MzY2OltbMTE4XSwyNTZdLDY1MzY3OltbMTE5XSwyNTZdLDY1MzY4OltbMTIwXSwyNTZdLDY1MzY5OltbMTIxXSwyNTZdLDY1MzcwOltbMTIyXSwyNTZdLDY1MzcxOltbMTIzXSwyNTZdLDY1MzcyOltbMTI0XSwyNTZdLDY1MzczOltbMTI1XSwyNTZdLDY1Mzc0OltbMTI2XSwyNTZdLDY1Mzc1OltbMTA2MjldLDI1Nl0sNjUzNzY6W1sxMDYzMF0sMjU2XSw2NTM3NzpbWzEyMjkwXSwyNTZdLDY1Mzc4OltbMTIzMDBdLDI1Nl0sNjUzNzk6W1sxMjMwMV0sMjU2XSw2NTM4MDpbWzEyMjg5XSwyNTZdLDY1MzgxOltbMTI1MzldLDI1Nl0sNjUzODI6W1sxMjUzMF0sMjU2XSw2NTM4MzpbWzEyNDQ5XSwyNTZdLDY1Mzg0OltbMTI0NTFdLDI1Nl0sNjUzODU6W1sxMjQ1M10sMjU2XSw2NTM4NjpbWzEyNDU1XSwyNTZdLDY1Mzg3OltbMTI0NTddLDI1Nl0sNjUzODg6W1sxMjUxNV0sMjU2XSw2NTM4OTpbWzEyNTE3XSwyNTZdLDY1MzkwOltbMTI1MTldLDI1Nl0sNjUzOTE6W1sxMjQ4M10sMjU2XSw2NTM5MjpbWzEyNTQwXSwyNTZdLDY1MzkzOltbMTI0NTBdLDI1Nl0sNjUzOTQ6W1sxMjQ1Ml0sMjU2XSw2NTM5NTpbWzEyNDU0XSwyNTZdLDY1Mzk2OltbMTI0NTZdLDI1Nl0sNjUzOTc6W1sxMjQ1OF0sMjU2XSw2NTM5ODpbWzEyNDU5XSwyNTZdLDY1Mzk5OltbMTI0NjFdLDI1Nl0sNjU0MDA6W1sxMjQ2M10sMjU2XSw2NTQwMTpbWzEyNDY1XSwyNTZdLDY1NDAyOltbMTI0NjddLDI1Nl0sNjU0MDM6W1sxMjQ2OV0sMjU2XSw2NTQwNDpbWzEyNDcxXSwyNTZdLDY1NDA1OltbMTI0NzNdLDI1Nl0sNjU0MDY6W1sxMjQ3NV0sMjU2XSw2NTQwNzpbWzEyNDc3XSwyNTZdLDY1NDA4OltbMTI0NzldLDI1Nl0sNjU0MDk6W1sxMjQ4MV0sMjU2XSw2NTQxMDpbWzEyNDg0XSwyNTZdLDY1NDExOltbMTI0ODZdLDI1Nl0sNjU0MTI6W1sxMjQ4OF0sMjU2XSw2NTQxMzpbWzEyNDkwXSwyNTZdLDY1NDE0OltbMTI0OTFdLDI1Nl0sNjU0MTU6W1sxMjQ5Ml0sMjU2XSw2NTQxNjpbWzEyNDkzXSwyNTZdLDY1NDE3OltbMTI0OTRdLDI1Nl0sNjU0MTg6W1sxMjQ5NV0sMjU2XSw2NTQxOTpbWzEyNDk4XSwyNTZdLDY1NDIwOltbMTI1MDFdLDI1Nl0sNjU0MjE6W1sxMjUwNF0sMjU2XSw2NTQyMjpbWzEyNTA3XSwyNTZdLDY1NDIzOltbMTI1MTBdLDI1Nl0sNjU0MjQ6W1sxMjUxMV0sMjU2XSw2NTQyNTpbWzEyNTEyXSwyNTZdLDY1NDI2OltbMTI1MTNdLDI1Nl0sNjU0Mjc6W1sxMjUxNF0sMjU2XSw2NTQyODpbWzEyNTE2XSwyNTZdLDY1NDI5OltbMTI1MThdLDI1Nl0sNjU0MzA6W1sxMjUyMF0sMjU2XSw2NTQzMTpbWzEyNTIxXSwyNTZdLDY1NDMyOltbMTI1MjJdLDI1Nl0sNjU0MzM6W1sxMjUyM10sMjU2XSw2NTQzNDpbWzEyNTI0XSwyNTZdLDY1NDM1OltbMTI1MjVdLDI1Nl0sNjU0MzY6W1sxMjUyN10sMjU2XSw2NTQzNzpbWzEyNTMxXSwyNTZdLDY1NDM4OltbMTI0NDFdLDI1Nl0sNjU0Mzk6W1sxMjQ0Ml0sMjU2XSw2NTQ0MDpbWzEyNjQ0XSwyNTZdLDY1NDQxOltbMTI1OTNdLDI1Nl0sNjU0NDI6W1sxMjU5NF0sMjU2XSw2NTQ0MzpbWzEyNTk1XSwyNTZdLDY1NDQ0OltbMTI1OTZdLDI1Nl0sNjU0NDU6W1sxMjU5N10sMjU2XSw2NTQ0NjpbWzEyNTk4XSwyNTZdLDY1NDQ3OltbMTI1OTldLDI1Nl0sNjU0NDg6W1sxMjYwMF0sMjU2XSw2NTQ0OTpbWzEyNjAxXSwyNTZdLDY1NDUwOltbMTI2MDJdLDI1Nl0sNjU0NTE6W1sxMjYwM10sMjU2XSw2NTQ1MjpbWzEyNjA0XSwyNTZdLDY1NDUzOltbMTI2MDVdLDI1Nl0sNjU0NTQ6W1sxMjYwNl0sMjU2XSw2NTQ1NTpbWzEyNjA3XSwyNTZdLDY1NDU2OltbMTI2MDhdLDI1Nl0sNjU0NTc6W1sxMjYwOV0sMjU2XSw2NTQ1ODpbWzEyNjEwXSwyNTZdLDY1NDU5OltbMTI2MTFdLDI1Nl0sNjU0NjA6W1sxMjYxMl0sMjU2XSw2NTQ2MTpbWzEyNjEzXSwyNTZdLDY1NDYyOltbMTI2MTRdLDI1Nl0sNjU0NjM6W1sxMjYxNV0sMjU2XSw2NTQ2NDpbWzEyNjE2XSwyNTZdLDY1NDY1OltbMTI2MTddLDI1Nl0sNjU0NjY6W1sxMjYxOF0sMjU2XSw2NTQ2NzpbWzEyNjE5XSwyNTZdLDY1NDY4OltbMTI2MjBdLDI1Nl0sNjU0Njk6W1sxMjYyMV0sMjU2XSw2NTQ3MDpbWzEyNjIyXSwyNTZdLDY1NDc0OltbMTI2MjNdLDI1Nl0sNjU0NzU6W1sxMjYyNF0sMjU2XSw2NTQ3NjpbWzEyNjI1XSwyNTZdLDY1NDc3OltbMTI2MjZdLDI1Nl0sNjU0Nzg6W1sxMjYyN10sMjU2XSw2NTQ3OTpbWzEyNjI4XSwyNTZdLDY1NDgyOltbMTI2MjldLDI1Nl0sNjU0ODM6W1sxMjYzMF0sMjU2XSw2NTQ4NDpbWzEyNjMxXSwyNTZdLDY1NDg1OltbMTI2MzJdLDI1Nl0sNjU0ODY6W1sxMjYzM10sMjU2XSw2NTQ4NzpbWzEyNjM0XSwyNTZdLDY1NDkwOltbMTI2MzVdLDI1Nl0sNjU0OTE6W1sxMjYzNl0sMjU2XSw2NTQ5MjpbWzEyNjM3XSwyNTZdLDY1NDkzOltbMTI2MzhdLDI1Nl0sNjU0OTQ6W1sxMjYzOV0sMjU2XSw2NTQ5NTpbWzEyNjQwXSwyNTZdLDY1NDk4OltbMTI2NDFdLDI1Nl0sNjU0OTk6W1sxMjY0Ml0sMjU2XSw2NTUwMDpbWzEyNjQzXSwyNTZdLDY1NTA0OltbMTYyXSwyNTZdLDY1NTA1OltbMTYzXSwyNTZdLDY1NTA2OltbMTcyXSwyNTZdLDY1NTA3OltbMTc1XSwyNTZdLDY1NTA4OltbMTY2XSwyNTZdLDY1NTA5OltbMTY1XSwyNTZdLDY1NTEwOltbODM2MV0sMjU2XSw2NTUxMjpbWzk0NzRdLDI1Nl0sNjU1MTM6W1s4NTkyXSwyNTZdLDY1NTE0OltbODU5M10sMjU2XSw2NTUxNTpbWzg1OTRdLDI1Nl0sNjU1MTY6W1s4NTk1XSwyNTZdLDY1NTE3OltbOTYzMl0sMjU2XSw2NTUxODpbWzk2NzVdLDI1Nl19Cgp9OwoKICAgLyoqKioqIE1vZHVsZSB0byBleHBvcnQgKi8KICAgdmFyIHVub3JtID0gewogICAgICBuZmM6IG5mYywKICAgICAgbmZkOiBuZmQsCiAgICAgIG5ma2M6IG5ma2MsCiAgICAgIG5ma2Q6IG5ma2QKICAgfTsKCiAgIC8qZ2xvYmFscyBtb2R1bGU6dHJ1ZSxkZWZpbmU6dHJ1ZSovCgogICAvLyBDb21tb25KUwogICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gIm9iamVjdCIpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSB1bm9ybTsKCiAgIC8vIEFNRAogICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCkgewogICAgICBkZWZpbmUoInVub3JtIiwgZnVuY3Rpb24gKCkgewogICAgICAgICByZXR1cm4gdW5vcm07CiAgICAgIH0pOwoKICAgLy8gR2xvYmFsCiAgIH0gZWxzZSB7CiAgICAgIHJvb3QudW5vcm0gPSB1bm9ybTsKICAgfQoKICAgLyoqKioqIEV4cG9ydCBhcyBzaGltIGZvciBTdHJpbmc6Om5vcm1hbGl6ZSBtZXRob2QgKioqKiovCiAgIC8qCiAgICAgIGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6c3BlY2lmaWNhdGlvbl9kcmFmdHMjbm92ZW1iZXJfOF8yMDEzX2RyYWZ0X3Jldl8yMQoKICAgICAgMjEuMS4zLjEyIFN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplKGZvcm09Ik5GQyIpCiAgICAgIFdoZW4gdGhlIG5vcm1hbGl6ZSBtZXRob2QgaXMgY2FsbGVkIHdpdGggb25lIGFyZ3VtZW50IGZvcm0sIHRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuOgoKICAgICAgMS4gTGV0IE8gYmUgQ2hlY2tPYmplY3RDb2VyY2libGUodGhpcyB2YWx1ZSkuCiAgICAgIDIuIExldCBTIGJlIFRvU3RyaW5nKE8pLgogICAgICAzLiBSZXR1cm5JZkFicnVwdChTKS4KICAgICAgNC4gSWYgZm9ybSBpcyBub3QgcHJvdmlkZWQgb3IgdW5kZWZpbmVkIGxldCBmb3JtIGJlICJORkMiLgogICAgICA1LiBMZXQgZiBiZSBUb1N0cmluZyhmb3JtKS4KICAgICAgNi4gUmV0dXJuSWZBYnJ1cHQoZikuCiAgICAgIDcuIElmIGYgaXMgbm90IG9uZSBvZiAiTkZDIiwgIk5GRCIsICJORktDIiwgb3IgIk5GS0QiLCB0aGVuIHRocm93IGEgUmFuZ2VFcnJvciBFeGNlcHRpb24uCiAgICAgIDguIExldCBucyBiZSB0aGUgU3RyaW5nIHZhbHVlIGlzIHRoZSByZXN1bHQgb2Ygbm9ybWFsaXppbmcgUyBpbnRvIHRoZSBub3JtYWxpemF0aW9uIGZvcm0gbmFtZWQgYnkgZiBhcyBzcGVjaWZpZWQgaW4gVW5pY29kZSBTdGFuZGFyZCBBbm5leCAjMTUsIFVuaWNvZGVOb3JtYWxpemF0b2luIEZvcm1zLgogICAgICA5LiBSZXR1cm4gbnMuCgogICAgICBUaGUgbGVuZ3RoIHByb3BlcnR5IG9mIHRoZSBub3JtYWxpemUgbWV0aG9kIGlzIDAuCgogICAgICAqTk9URSogVGhlIG5vcm1hbGl6ZSBmdW5jdGlvbiBpcyBpbnRlbnRpb25hbGx5IGdlbmVyaWM7IGl0IGRvZXMgbm90IHJlcXVpcmUgdGhhdCBpdHMgdGhpcyB2YWx1ZSBiZSBhIFN0cmluZyBvYmplY3QuIFRoZXJlZm9yZSBpdCBjYW4gYmUgdHJhbnNmZXJyZWQgdG8gb3RoZXIga2luZHMgb2Ygb2JqZWN0cyBmb3IgdXNlIGFzIGEgbWV0aG9kLgogICAqLwogICAgdW5vcm0uc2hpbUFwcGxpZWQgPSBmYWxzZTsKCiAgIGlmICghU3RyaW5nLnByb3RvdHlwZS5ub3JtYWxpemUpIHsKICAgICAgU3RyaW5nLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbihmb3JtKSB7CiAgICAgICAgIHZhciBzdHIgPSAiIiArIHRoaXM7CiAgICAgICAgIGZvcm0gPSAgZm9ybSA9PT0gdW5kZWZpbmVkID8gIk5GQyIgOiBmb3JtOwoKICAgICAgICAgaWYgKGZvcm0gPT09ICJORkMiKSB7CiAgICAgICAgICAgIHJldHVybiB1bm9ybS5uZmMoc3RyKTsKICAgICAgICAgfSBlbHNlIGlmIChmb3JtID09PSAiTkZEIikgewogICAgICAgICAgICByZXR1cm4gdW5vcm0ubmZkKHN0cik7CiAgICAgICAgIH0gZWxzZSBpZiAoZm9ybSA9PT0gIk5GS0MiKSB7CiAgICAgICAgICAgIHJldHVybiB1bm9ybS5uZmtjKHN0cik7CiAgICAgICAgIH0gZWxzZSBpZiAoZm9ybSA9PT0gIk5GS0QiKSB7CiAgICAgICAgICAgIHJldHVybiB1bm9ybS5uZmtkKHN0cik7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vcm1hbGl6YXRpb24gZm9ybTogIiArIGZvcm0pOwogICAgICAgICB9CiAgICAgIH07CgogICAgICB1bm9ybS5zaGltQXBwbGllZCA9IHRydWU7CiAgIH0KfSh0aGlzKSk7Cgp9LHt9XSwxNzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7CgovKioKICogTW9kdWxlIGV4cG9ydHMuCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBkZXByZWNhdGU7CgovKioKICogTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC4KICogUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC4KICoKICogSWYgYGxvY2FsU3RvcmFnZS5ub0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuCiAqCiAqIElmIGBsb2NhbFN0b3JhZ2UudGhyb3dEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9ucwogKiB3aWxsIHRocm93IGFuIEVycm9yIHdoZW4gaW52b2tlZC4KICoKICogSWYgYGxvY2FsU3RvcmFnZS50cmFjZURlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zCiAqIHdpbGwgaW52b2tlIGBjb25zb2xlLnRyYWNlKClgIGluc3RlYWQgb2YgYGNvbnNvbGUuZXJyb3IoKWAuCiAqCiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gdGhlIGZ1bmN0aW9uIHRvIGRlcHJlY2F0ZQogKiBAcGFyYW0ge1N0cmluZ30gbXNnIC0gdGhlIHN0cmluZyB0byBwcmludCB0byB0aGUgY29uc29sZSB3aGVuIGBmbmAgaXMgaW52b2tlZAogKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgbmV3ICJkZXByZWNhdGVkIiB2ZXJzaW9uIG9mIGBmbmAKICogQGFwaSBwdWJsaWMKICovCgpmdW5jdGlvbiBkZXByZWNhdGUgKGZuLCBtc2cpIHsKICBpZiAoY29uZmlnKCdub0RlcHJlY2F0aW9uJykpIHsKICAgIHJldHVybiBmbjsKICB9CgogIHZhciB3YXJuZWQgPSBmYWxzZTsKICBmdW5jdGlvbiBkZXByZWNhdGVkKCkgewogICAgaWYgKCF3YXJuZWQpIHsKICAgICAgaWYgKGNvbmZpZygndGhyb3dEZXByZWNhdGlvbicpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7CiAgICAgIH0gZWxzZSBpZiAoY29uZmlnKCd0cmFjZURlcHJlY2F0aW9uJykpIHsKICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS53YXJuKG1zZyk7CiAgICAgIH0KICAgICAgd2FybmVkID0gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgcmV0dXJuIGRlcHJlY2F0ZWQ7Cn0KCi8qKgogKiBDaGVja3MgYGxvY2FsU3RvcmFnZWAgZm9yIGJvb2xlYW4gdmFsdWVzIGZvciB0aGUgZ2l2ZW4gYG5hbWVgLgogKgogKiBAcGFyYW0ge1N0cmluZ30gbmFtZQogKiBAcmV0dXJucyB7Qm9vbGVhbn0KICogQGFwaSBwcml2YXRlCiAqLwoKZnVuY3Rpb24gY29uZmlnIChuYW1lKSB7CiAgLy8gYWNjZXNzaW5nIGdsb2JhbC5sb2NhbFN0b3JhZ2UgY2FuIHRyaWdnZXIgYSBET01FeGNlcHRpb24gaW4gc2FuZGJveGVkIGlmcmFtZXMKICB0cnkgewogICAgaWYgKCFnbG9iYWwubG9jYWxTdG9yYWdlKSByZXR1cm4gZmFsc2U7CiAgfSBjYXRjaCAoXykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgdmFsID0gZ2xvYmFsLmxvY2FsU3RvcmFnZVtuYW1lXTsKICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiBmYWxzZTsKICByZXR1cm4gU3RyaW5nKHZhbCkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnOwp9Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7fV0sMTc2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHsKICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnCiAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbicKICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJwogICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7Cn0KfSx7fV0sMTc3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCnZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZGolXS9nOwpleHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHsKICBpZiAoIWlzU3RyaW5nKGYpKSB7CiAgICB2YXIgb2JqZWN0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7CiAgICB9CiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7CiAgfQoKICB2YXIgaSA9IDE7CiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoOwogIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHsKICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnOwogICAgaWYgKGkgPj0gbGVuKSByZXR1cm4geDsKICAgIHN3aXRjaCAoeCkgewogICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTsKICAgICAgY2FzZSAnJWQnOiByZXR1cm4gTnVtYmVyKGFyZ3NbaSsrXSk7CiAgICAgIGNhc2UgJyVqJzoKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3NbaSsrXSk7CiAgICAgICAgfSBjYXRjaCAoXykgewogICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJzsKICAgICAgICB9CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIHg7CiAgICB9CiAgfSk7CiAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHsKICAgIGlmIChpc051bGwoeCkgfHwgIWlzT2JqZWN0KHgpKSB7CiAgICAgIHN0ciArPSAnICcgKyB4OwogICAgfSBlbHNlIHsKICAgICAgc3RyICs9ICcgJyArIGluc3BlY3QoeCk7CiAgICB9CiAgfQogIHJldHVybiBzdHI7Cn07CgoKLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC4KLy8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC4KLy8gSWYgLS1uby1kZXByZWNhdGlvbiBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC4KZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7CiAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC4KICBpZiAoaXNVbmRlZmluZWQoZ2xvYmFsLnByb2Nlc3MpKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9CgogIGlmIChwcm9jZXNzLm5vRGVwcmVjYXRpb24gPT09IHRydWUpIHsKICAgIHJldHVybiBmbjsKICB9CgogIHZhciB3YXJuZWQgPSBmYWxzZTsKICBmdW5jdGlvbiBkZXByZWNhdGVkKCkgewogICAgaWYgKCF3YXJuZWQpIHsKICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikgewogICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogICAgICB9IGVsc2UgaWYgKHByb2Nlc3MudHJhY2VEZXByZWNhdGlvbikgewogICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7CiAgICAgIH0KICAgICAgd2FybmVkID0gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgcmV0dXJuIGRlcHJlY2F0ZWQ7Cn07CgoKdmFyIGRlYnVncyA9IHt9Owp2YXIgZGVidWdFbnZpcm9uOwpleHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7CiAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpCiAgICBkZWJ1Z0Vudmlyb24gPSBwcm9jZXNzLmVudi5OT0RFX0RFQlVHIHx8ICcnOwogIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpOwogIGlmICghZGVidWdzW3NldF0pIHsKICAgIGlmIChuZXcgUmVnRXhwKCdcXGInICsgc2V0ICsgJ1xcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7CiAgICAgIHZhciBwaWQgPSBwcm9jZXNzLnBpZDsKICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTsKICAgICAgICBjb25zb2xlLmVycm9yKCclcyAlZDogJXMnLCBzZXQsIHBpZCwgbXNnKTsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7fTsKICAgIH0KICB9CiAgcmV0dXJuIGRlYnVnc1tzZXRdOwp9OwoKCi8qKgogKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0CiAqIGluIHRoZSBiZXN0IHdheSBwb3NzaWJsZSBnaXZlbiB0aGUgZGlmZmVyZW50IHR5cGVzLgogKgogKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LgogKiBAcGFyYW0ge09iamVjdH0gb3B0cyBPcHRpb25hbCBvcHRpb25zIG9iamVjdCB0aGF0IGFsdGVycyB0aGUgb3V0cHV0LgogKi8KLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqLwpmdW5jdGlvbiBpbnNwZWN0KG9iaiwgb3B0cykgewogIC8vIGRlZmF1bHQgb3B0aW9ucwogIHZhciBjdHggPSB7CiAgICBzZWVuOiBbXSwKICAgIHN0eWxpemU6IHN0eWxpemVOb0NvbG9yCiAgfTsKICAvLyBsZWdhY3kuLi4KICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSBjdHguZGVwdGggPSBhcmd1bWVudHNbMl07CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTsKICBpZiAoaXNCb29sZWFuKG9wdHMpKSB7CiAgICAvLyBsZWdhY3kuLi4KICAgIGN0eC5zaG93SGlkZGVuID0gb3B0czsKICB9IGVsc2UgaWYgKG9wdHMpIHsKICAgIC8vIGdvdCBhbiAib3B0aW9ucyIgb2JqZWN0CiAgICBleHBvcnRzLl9leHRlbmQoY3R4LCBvcHRzKTsKICB9CiAgLy8gc2V0IGRlZmF1bHQgb3B0aW9ucwogIGlmIChpc1VuZGVmaW5lZChjdHguc2hvd0hpZGRlbikpIGN0eC5zaG93SGlkZGVuID0gZmFsc2U7CiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7CiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7CiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jdXN0b21JbnNwZWN0KSkgY3R4LmN1c3RvbUluc3BlY3QgPSB0cnVlOwogIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7CiAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpOwp9CmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7CgoKLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzCmluc3BlY3QuY29sb3JzID0gewogICdib2xkJyA6IFsxLCAyMl0sCiAgJ2l0YWxpYycgOiBbMywgMjNdLAogICd1bmRlcmxpbmUnIDogWzQsIDI0XSwKICAnaW52ZXJzZScgOiBbNywgMjddLAogICd3aGl0ZScgOiBbMzcsIDM5XSwKICAnZ3JleScgOiBbOTAsIDM5XSwKICAnYmxhY2snIDogWzMwLCAzOV0sCiAgJ2JsdWUnIDogWzM0LCAzOV0sCiAgJ2N5YW4nIDogWzM2LCAzOV0sCiAgJ2dyZWVuJyA6IFszMiwgMzldLAogICdtYWdlbnRhJyA6IFszNSwgMzldLAogICdyZWQnIDogWzMxLCAzOV0sCiAgJ3llbGxvdycgOiBbMzMsIDM5XQp9OwoKLy8gRG9uJ3QgdXNlICdibHVlJyBub3QgdmlzaWJsZSBvbiBjbWQuZXhlCmluc3BlY3Quc3R5bGVzID0gewogICdzcGVjaWFsJzogJ2N5YW4nLAogICdudW1iZXInOiAneWVsbG93JywKICAnYm9vbGVhbic6ICd5ZWxsb3cnLAogICd1bmRlZmluZWQnOiAnZ3JleScsCiAgJ251bGwnOiAnYm9sZCcsCiAgJ3N0cmluZyc6ICdncmVlbicsCiAgJ2RhdGUnOiAnbWFnZW50YScsCiAgLy8gIm5hbWUiOiBpbnRlbnRpb25hbGx5IG5vdCBzdHlsaW5nCiAgJ3JlZ2V4cCc6ICdyZWQnCn07CgoKZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkgewogIHZhciBzdHlsZSA9IGluc3BlY3Quc3R5bGVzW3N0eWxlVHlwZV07CgogIGlmIChzdHlsZSkgewogICAgcmV0dXJuICdcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVswXSArICdtJyArIHN0ciArCiAgICAgICAgICAgJ1x1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzFdICsgJ20nOwogIH0gZWxzZSB7CiAgICByZXR1cm4gc3RyOwogIH0KfQoKCmZ1bmN0aW9uIHN0eWxpemVOb0NvbG9yKHN0ciwgc3R5bGVUeXBlKSB7CiAgcmV0dXJuIHN0cjsKfQoKCmZ1bmN0aW9uIGFycmF5VG9IYXNoKGFycmF5KSB7CiAgdmFyIGhhc2ggPSB7fTsKCiAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbih2YWwsIGlkeCkgewogICAgaGFzaFt2YWxdID0gdHJ1ZTsKICB9KTsKCiAgcmV0dXJuIGhhc2g7Cn0KCgpmdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHsKICAvLyBQcm92aWRlIGEgaG9vayBmb3IgdXNlci1zcGVjaWZpZWQgaW5zcGVjdCBmdW5jdGlvbnMuCiAgLy8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0CiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmCiAgICAgIHZhbHVlICYmCiAgICAgIGlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkgJiYKICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsCiAgICAgIHZhbHVlLmluc3BlY3QgIT09IGV4cG9ydHMuaW5zcGVjdCAmJgogICAgICAvLyBBbHNvIGZpbHRlciBvdXQgYW55IHByb3RvdHlwZSBvYmplY3RzIHVzaW5nIHRoZSBjaXJjdWxhciBjaGVjay4KICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkgewogICAgdmFyIHJldCA9IHZhbHVlLmluc3BlY3QocmVjdXJzZVRpbWVzLCBjdHgpOwogICAgaWYgKCFpc1N0cmluZyhyZXQpKSB7CiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9CgogIC8vIFByaW1pdGl2ZSB0eXBlcyBjYW5ub3QgaGF2ZSBwcm9wZXJ0aWVzCiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTsKICBpZiAocHJpbWl0aXZlKSB7CiAgICByZXR1cm4gcHJpbWl0aXZlOwogIH0KCiAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LgogIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpOwogIHZhciB2aXNpYmxlS2V5cyA9IGFycmF5VG9IYXNoKGtleXMpOwoKICBpZiAoY3R4LnNob3dIaWRkZW4pIHsKICAgIGtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7CiAgfQoKICAvLyBJRSBkb2Vzbid0IG1ha2UgZXJyb3IgZmllbGRzIG5vbi1lbnVtZXJhYmxlCiAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2R3dzUyc2J0KHY9dnMuOTQpLmFzcHgKICBpZiAoaXNFcnJvcih2YWx1ZSkKICAgICAgJiYgKGtleXMuaW5kZXhPZignbWVzc2FnZScpID49IDAgfHwga2V5cy5pbmRleE9mKCdkZXNjcmlwdGlvbicpID49IDApKSB7CiAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpOwogIH0KCiAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLgogIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkgewogICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7CiAgICAgIHZhciBuYW1lID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7CiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7CiAgICB9CiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7CiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7CiAgICB9CiAgICBpZiAoaXNEYXRlKHZhbHVlKSkgewogICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7CiAgICB9CiAgICBpZiAoaXNFcnJvcih2YWx1ZSkpIHsKICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTsKICAgIH0KICB9CgogIHZhciBiYXNlID0gJycsIGFycmF5ID0gZmFsc2UsIGJyYWNlcyA9IFsneycsICd9J107CgogIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXkKICBpZiAoaXNBcnJheSh2YWx1ZSkpIHsKICAgIGFycmF5ID0gdHJ1ZTsKICAgIGJyYWNlcyA9IFsnWycsICddJ107CiAgfQoKICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnMKICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHsKICAgIHZhciBuID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7CiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJzsKICB9CgogIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzCiAgaWYgKGlzUmVnRXhwKHZhbHVlKSkgewogICAgYmFzZSA9ICcgJyArIFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7CiAgfQoKICAvLyBNYWtlIGRhdGVzIHdpdGggcHJvcGVydGllcyBmaXJzdCBzYXkgdGhlIGRhdGUKICBpZiAoaXNEYXRlKHZhbHVlKSkgewogICAgYmFzZSA9ICcgJyArIERhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodmFsdWUpOwogIH0KCiAgLy8gTWFrZSBlcnJvciB3aXRoIG1lc3NhZ2UgZmlyc3Qgc2F5IHRoZSBlcnJvcgogIGlmIChpc0Vycm9yKHZhbHVlKSkgewogICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTsKICB9CgogIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkgewogICAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyBicmFjZXNbMV07CiAgfQoKICBpZiAocmVjdXJzZVRpbWVzIDwgMCkgewogICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkgewogICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbT2JqZWN0XScsICdzcGVjaWFsJyk7CiAgICB9CiAgfQoKICBjdHguc2Vlbi5wdXNoKHZhbHVlKTsKCiAgdmFyIG91dHB1dDsKICBpZiAoYXJyYXkpIHsKICAgIG91dHB1dCA9IGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpOwogIH0gZWxzZSB7CiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHsKICAgICAgcmV0dXJuIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpOwogICAgfSk7CiAgfQoKICBjdHguc2Vlbi5wb3AoKTsKCiAgcmV0dXJuIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKTsKfQoKCmZ1bmN0aW9uIGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKSB7CiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkKICAgIHJldHVybiBjdHguc3R5bGl6ZSgndW5kZWZpbmVkJywgJ3VuZGVmaW5lZCcpOwogIGlmIChpc1N0cmluZyh2YWx1ZSkpIHsKICAgIHZhciBzaW1wbGUgPSAnXCcnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpLnJlcGxhY2UoL14ifCIkL2csICcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAiXFwnIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcIi9nLCAnIicpICsgJ1wnJzsKICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTsKICB9CiAgaWYgKGlzTnVtYmVyKHZhbHVlKSkKICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7CiAgaWYgKGlzQm9vbGVhbih2YWx1ZSkpCiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ2Jvb2xlYW4nKTsKICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgIm9iamVjdCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLgogIGlmIChpc051bGwodmFsdWUpKQogICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTsKfQoKCmZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7CiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJzsKfQoKCmZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHsKICB2YXIgb3V0cHV0ID0gW107CiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHsKICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkgewogICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLAogICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7CiAgICB9IGVsc2UgewogICAgICBvdXRwdXQucHVzaCgnJyk7CiAgICB9CiAgfQogIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgIGlmICgha2V5Lm1hdGNoKC9eXGQrJC8pKSB7CiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsCiAgICAgICAgICBrZXksIHRydWUpKTsKICAgIH0KICB9KTsKICByZXR1cm4gb3V0cHV0Owp9CgoKZnVuY3Rpb24gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSkgewogIHZhciBuYW1lLCBzdHIsIGRlc2M7CiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9OwogIGlmIChkZXNjLmdldCkgewogICAgaWYgKGRlc2Muc2V0KSB7CiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpOwogICAgfSBlbHNlIHsKICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXJdJywgJ3NwZWNpYWwnKTsKICAgIH0KICB9IGVsc2UgewogICAgaWYgKGRlc2Muc2V0KSB7CiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7CiAgICB9CiAgfQogIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHsKICAgIG5hbWUgPSAnWycgKyBrZXkgKyAnXSc7CiAgfQogIGlmICghc3RyKSB7CiAgICBpZiAoY3R4LnNlZW4uaW5kZXhPZihkZXNjLnZhbHVlKSA8IDApIHsKICAgICAgaWYgKGlzTnVsbChyZWN1cnNlVGltZXMpKSB7CiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIHJlY3Vyc2VUaW1lcyAtIDEpOwogICAgICB9CiAgICAgIGlmIChzdHIuaW5kZXhPZignXG4nKSA+IC0xKSB7CiAgICAgICAgaWYgKGFycmF5KSB7CiAgICAgICAgICBzdHIgPSBzdHIuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lOwogICAgICAgICAgfSkuam9pbignXG4nKS5zdWJzdHIoMik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0ciA9ICdcbicgKyBzdHIuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTsKICAgICAgICAgIH0pLmpvaW4oJ1xuJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0NpcmN1bGFyXScsICdzcGVjaWFsJyk7CiAgICB9CiAgfQogIGlmIChpc1VuZGVmaW5lZChuYW1lKSkgewogICAgaWYgKGFycmF5ICYmIGtleS5tYXRjaCgvXlxkKyQvKSkgewogICAgICByZXR1cm4gc3RyOwogICAgfQogICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTsKICAgIGlmIChuYW1lLm1hdGNoKC9eIihbYS16QS1aX11bYS16QS1aXzAtOV0qKSIkLykpIHsKICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDEsIG5hbWUubGVuZ3RoIC0gMik7CiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnbmFtZScpOwogICAgfSBlbHNlIHsKICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCAiXFwnIikKICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwiL2csICciJykKICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF4ifCIkKS9nLCAiJyIpOwogICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ3N0cmluZycpOwogICAgfQogIH0KCiAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyOwp9CgoKZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHsKICB2YXIgbnVtTGluZXNFc3QgPSAwOwogIHZhciBsZW5ndGggPSBvdXRwdXQucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cikgewogICAgbnVtTGluZXNFc3QrKzsKICAgIGlmIChjdXIuaW5kZXhPZignXG4nKSA+PSAwKSBudW1MaW5lc0VzdCsrOwogICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXHUwMDFiXFtcZFxkP20vZywgJycpLmxlbmd0aCArIDE7CiAgfSwgMCk7CgogIGlmIChsZW5ndGggPiA2MCkgewogICAgcmV0dXJuIGJyYWNlc1swXSArCiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xuICcpICsKICAgICAgICAgICAnICcgKwogICAgICAgICAgIG91dHB1dC5qb2luKCcsXG4gICcpICsKICAgICAgICAgICAnICcgKwogICAgICAgICAgIGJyYWNlc1sxXTsKICB9CgogIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07Cn0KCgovLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmAKLy8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuCmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHsKICByZXR1cm4gQXJyYXkuaXNBcnJheShhcik7Cn0KZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTsKCmZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nOwp9CmV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuOwoKZnVuY3Rpb24gaXNOdWxsKGFyZykgewogIHJldHVybiBhcmcgPT09IG51bGw7Cn0KZXhwb3J0cy5pc051bGwgPSBpc051bGw7CgpmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09IG51bGw7Cn0KZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkOwoKZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInOwp9CmV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjsKCmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJzsKfQpleHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7CgpmdW5jdGlvbiBpc1N5bWJvbChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7Cn0KZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sOwoKZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwOwp9CmV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDsKCmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7CiAgcmV0dXJuIGlzT2JqZWN0KHJlKSAmJiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nOwp9CmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDsKCmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7Cn0KZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0OwoKZnVuY3Rpb24gaXNEYXRlKGQpIHsKICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJzsKfQpleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTsKCmZ1bmN0aW9uIGlzRXJyb3IoZSkgewogIHJldHVybiBpc09iamVjdChlKSAmJgogICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTsKfQpleHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yOwoKZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKfQpleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uOwoKZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2wKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7Cn0KZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlOwoKZXhwb3J0cy5pc0J1ZmZlciA9IHJlcXVpcmUoJy4vc3VwcG9ydC9pc0J1ZmZlcicpOwoKZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7Cn0KCgpmdW5jdGlvbiBwYWQobikgewogIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApOwp9CgoKdmFyIG1vbnRocyA9IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLAogICAgICAgICAgICAgICdPY3QnLCAnTm92JywgJ0RlYyddOwoKLy8gMjYgRmViIDE2OjE5OjM0CmZ1bmN0aW9uIHRpbWVzdGFtcCgpIHsKICB2YXIgZCA9IG5ldyBEYXRlKCk7CiAgdmFyIHRpbWUgPSBbcGFkKGQuZ2V0SG91cnMoKSksCiAgICAgICAgICAgICAgcGFkKGQuZ2V0TWludXRlcygpKSwKICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7CiAgcmV0dXJuIFtkLmdldERhdGUoKSwgbW9udGhzW2QuZ2V0TW9udGgoKV0sIHRpbWVdLmpvaW4oJyAnKTsKfQoKCi8vIGxvZyBpcyBqdXN0IGEgdGhpbiB3cmFwcGVyIHRvIGNvbnNvbGUubG9nIHRoYXQgcHJlcGVuZHMgYSB0aW1lc3RhbXAKZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHsKICBjb25zb2xlLmxvZygnJXMgLSAlcycsIHRpbWVzdGFtcCgpLCBleHBvcnRzLmZvcm1hdC5hcHBseShleHBvcnRzLCBhcmd1bWVudHMpKTsKfTsKCgovKioKICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLgogKgogKiBUaGUgRnVuY3Rpb24ucHJvdG90eXBlLmluaGVyaXRzIGZyb20gbGFuZy5qcyByZXdyaXR0ZW4gYXMgYSBzdGFuZGFsb25lCiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZAogKiBkdXJpbmcgYm9vdHN0cmFwcGluZyB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHJld3JpdHRlbiB1c2luZyBzb21lIG5hdGl2ZQogKiBmdW5jdGlvbnMgYXMgcHJvdG90eXBlIHNldHVwIHVzaW5nIG5vcm1hbCBKYXZhU2NyaXB0IGRvZXMgbm90IHdvcmsgYXMKICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuCiAqCiAqIEBwYXJhbSB7ZnVuY3Rpb259IGN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gaW5oZXJpdCB0aGUKICogICAgIHByb3RvdHlwZS4KICogQHBhcmFtIHtmdW5jdGlvbn0gc3VwZXJDdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIGluaGVyaXQgcHJvdG90eXBlIGZyb20uCiAqLwpleHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTsKCmV4cG9ydHMuX2V4dGVuZCA9IGZ1bmN0aW9uKG9yaWdpbiwgYWRkKSB7CiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdAogIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luOwoKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7CiAgdmFyIGkgPSBrZXlzLmxlbmd0aDsKICB3aGlsZSAoaS0tKSB7CiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07CiAgfQogIHJldHVybiBvcmlnaW47Cn07CgpmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0seyIuL3N1cHBvcnQvaXNCdWZmZXIiOjE3NiwiX3Byb2Nlc3MiOjE0MSwiaW5oZXJpdHMiOjEyOX1dLDE3ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpbmRleE9mID0gcmVxdWlyZSgnaW5kZXhvZicpOwoKdmFyIE9iamVjdF9rZXlzID0gZnVuY3Rpb24gKG9iaikgewogICAgaWYgKE9iamVjdC5rZXlzKSByZXR1cm4gT2JqZWN0LmtleXMob2JqKQogICAgZWxzZSB7CiAgICAgICAgdmFyIHJlcyA9IFtdOwogICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHJlcy5wdXNoKGtleSkKICAgICAgICByZXR1cm4gcmVzOwogICAgfQp9OwoKdmFyIGZvckVhY2ggPSBmdW5jdGlvbiAoeHMsIGZuKSB7CiAgICBpZiAoeHMuZm9yRWFjaCkgcmV0dXJuIHhzLmZvckVhY2goZm4pCiAgICBlbHNlIGZvciAodmFyIGkgPSAwOyBpIDwgeHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmbih4c1tpXSwgaSwgeHMpOwogICAgfQp9OwoKdmFyIGRlZmluZVByb3AgPSAoZnVuY3Rpb24oKSB7CiAgICB0cnkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ18nLCB7fSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgbmFtZSwgdmFsdWUpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwgewogICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgICB9KQogICAgICAgIH07CiAgICB9IGNhdGNoKGUpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICBvYmpbbmFtZV0gPSB2YWx1ZTsKICAgICAgICB9OwogICAgfQp9KCkpOwoKdmFyIGdsb2JhbHMgPSBbJ0FycmF5JywgJ0Jvb2xlYW4nLCAnRGF0ZScsICdFcnJvcicsICdFdmFsRXJyb3InLCAnRnVuY3Rpb24nLAonSW5maW5pdHknLCAnSlNPTicsICdNYXRoJywgJ05hTicsICdOdW1iZXInLCAnT2JqZWN0JywgJ1JhbmdlRXJyb3InLAonUmVmZXJlbmNlRXJyb3InLCAnUmVnRXhwJywgJ1N0cmluZycsICdTeW50YXhFcnJvcicsICdUeXBlRXJyb3InLCAnVVJJRXJyb3InLAonZGVjb2RlVVJJJywgJ2RlY29kZVVSSUNvbXBvbmVudCcsICdlbmNvZGVVUkknLCAnZW5jb2RlVVJJQ29tcG9uZW50JywgJ2VzY2FwZScsCidldmFsJywgJ2lzRmluaXRlJywgJ2lzTmFOJywgJ3BhcnNlRmxvYXQnLCAncGFyc2VJbnQnLCAndW5kZWZpbmVkJywgJ3VuZXNjYXBlJ107CgpmdW5jdGlvbiBDb250ZXh0KCkge30KQ29udGV4dC5wcm90b3R5cGUgPSB7fTsKCnZhciBTY3JpcHQgPSBleHBvcnRzLlNjcmlwdCA9IGZ1bmN0aW9uIE5vZGVTY3JpcHQgKGNvZGUpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTY3JpcHQpKSByZXR1cm4gbmV3IFNjcmlwdChjb2RlKTsKICAgIHRoaXMuY29kZSA9IGNvZGU7Cn07CgpTY3JpcHQucHJvdG90eXBlLnJ1bkluQ29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICBpZiAoIShjb250ZXh0IGluc3RhbmNlb2YgQ29udGV4dCkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJuZWVkcyBhICdjb250ZXh0JyBhcmd1bWVudC4iKTsKICAgIH0KICAgIAogICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwogICAgaWYgKCFpZnJhbWUuc3R5bGUpIGlmcmFtZS5zdHlsZSA9IHt9OwogICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKICAgIAogICAgdmFyIHdpbiA9IGlmcmFtZS5jb250ZW50V2luZG93OwogICAgdmFyIHdFdmFsID0gd2luLmV2YWwsIHdFeGVjU2NyaXB0ID0gd2luLmV4ZWNTY3JpcHQ7CgogICAgaWYgKCF3RXZhbCAmJiB3RXhlY1NjcmlwdCkgewogICAgICAgIC8vIHdpbi5ldmFsKCkgbWFnaWNhbGx5IGFwcGVhcnMgd2hlbiB0aGlzIGlzIGNhbGxlZCBpbiBJRToKICAgICAgICB3RXhlY1NjcmlwdC5jYWxsKHdpbiwgJ251bGwnKTsKICAgICAgICB3RXZhbCA9IHdpbi5ldmFsOwogICAgfQogICAgCiAgICBmb3JFYWNoKE9iamVjdF9rZXlzKGNvbnRleHQpLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgd2luW2tleV0gPSBjb250ZXh0W2tleV07CiAgICB9KTsKICAgIGZvckVhY2goZ2xvYmFscywgZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChjb250ZXh0W2tleV0pIHsKICAgICAgICAgICAgd2luW2tleV0gPSBjb250ZXh0W2tleV07CiAgICAgICAgfQogICAgfSk7CiAgICAKICAgIHZhciB3aW5LZXlzID0gT2JqZWN0X2tleXMod2luKTsKCiAgICB2YXIgcmVzID0gd0V2YWwuY2FsbCh3aW4sIHRoaXMuY29kZSk7CiAgICAKICAgIGZvckVhY2goT2JqZWN0X2tleXMod2luKSwgZnVuY3Rpb24gKGtleSkgewogICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgY2lyY3VsYXIgb2JqZWN0cyBsaWtlIGB0b3BgIGFuZCBgd2luZG93YCBieSBvbmx5CiAgICAgICAgLy8gdXBkYXRpbmcgZXhpc3RpbmcgY29udGV4dCBwcm9wZXJ0aWVzIG9yIG5ldyBwcm9wZXJ0aWVzIGluIHRoZSBgd2luYAogICAgICAgIC8vIHRoYXQgd2FzIG9ubHkgaW50cm9kdWNlZCBhZnRlciB0aGUgZXZhbC4KICAgICAgICBpZiAoa2V5IGluIGNvbnRleHQgfHwgaW5kZXhPZih3aW5LZXlzLCBrZXkpID09PSAtMSkgewogICAgICAgICAgICBjb250ZXh0W2tleV0gPSB3aW5ba2V5XTsKICAgICAgICB9CiAgICB9KTsKCiAgICBmb3JFYWNoKGdsb2JhbHMsIGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBpZiAoIShrZXkgaW4gY29udGV4dCkpIHsKICAgICAgICAgICAgZGVmaW5lUHJvcChjb250ZXh0LCBrZXksIHdpbltrZXldKTsKICAgICAgICB9CiAgICB9KTsKICAgIAogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpOwogICAgCiAgICByZXR1cm4gcmVzOwp9OwoKU2NyaXB0LnByb3RvdHlwZS5ydW5JblRoaXNDb250ZXh0ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGV2YWwodGhpcy5jb2RlKTsgLy8gbWF5YmUuLi4KfTsKClNjcmlwdC5wcm90b3R5cGUucnVuSW5OZXdDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHsKICAgIHZhciBjdHggPSBTY3JpcHQuY3JlYXRlQ29udGV4dChjb250ZXh0KTsKICAgIHZhciByZXMgPSB0aGlzLnJ1bkluQ29udGV4dChjdHgpOwoKICAgIGZvckVhY2goT2JqZWN0X2tleXMoY3R4KSwgZnVuY3Rpb24gKGtleSkgewogICAgICAgIGNvbnRleHRba2V5XSA9IGN0eFtrZXldOwogICAgfSk7CgogICAgcmV0dXJuIHJlczsKfTsKCmZvckVhY2goT2JqZWN0X2tleXMoU2NyaXB0LnByb3RvdHlwZSksIGZ1bmN0aW9uIChuYW1lKSB7CiAgICBleHBvcnRzW25hbWVdID0gU2NyaXB0W25hbWVdID0gZnVuY3Rpb24gKGNvZGUpIHsKICAgICAgICB2YXIgcyA9IFNjcmlwdChjb2RlKTsKICAgICAgICByZXR1cm4gc1tuYW1lXS5hcHBseShzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpOwogICAgfTsKfSk7CgpleHBvcnRzLmNyZWF0ZVNjcmlwdCA9IGZ1bmN0aW9uIChjb2RlKSB7CiAgICByZXR1cm4gZXhwb3J0cy5TY3JpcHQoY29kZSk7Cn07CgpleHBvcnRzLmNyZWF0ZUNvbnRleHQgPSBTY3JpcHQuY3JlYXRlQ29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7CiAgICB2YXIgY29weSA9IG5ldyBDb250ZXh0KCk7CiAgICBpZih0eXBlb2YgY29udGV4dCA9PT0gJ29iamVjdCcpIHsKICAgICAgICBmb3JFYWNoKE9iamVjdF9rZXlzKGNvbnRleHQpLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgIGNvcHlba2V5XSA9IGNvbnRleHRba2V5XTsKICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiBjb3B5Owp9OwoKfSx7ImluZGV4b2YiOjEyOH1dLDE3OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CihmdW5jdGlvbiAoQnVmZmVyKXsKdmFyIGJzNThjaGVjayA9IHJlcXVpcmUoJ2JzNThjaGVjaycpCgpmdW5jdGlvbiBkZWNvZGVSYXcgKHZlcnNpb24sIGJ1ZmZlcikgewogIGlmIChidWZmZXJbMF0gIT09IHZlcnNpb24pIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBuZXR3b3JrIHZlcnNpb24nKQoKICAvLyBjb21wcmVzc2lvbiBmbGFnPwogIGlmIChidWZmZXIubGVuZ3RoID09PSAzNCkgewogICAgaWYgKGJ1ZmZlclszM10gIT09IDB4MDEpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb21wcmVzc2lvbiBmbGFnJykKCiAgICAvLyB0cnVuY2F0ZSB0aGUgdmVyc2lvbiBieXRlL2NvbXByZXNzaW9uIGZsYWcKICAgIHJldHVybiB7CiAgICAgIHZlcnNpb246IGJ1ZmZlclswXSwKICAgICAgZDogYnVmZmVyLnNsaWNlKDEsIC0xKSwKICAgICAgY29tcHJlc3NlZDogdHJ1ZQogICAgfQogIH0KCiAgLy8gbm8gY29tcHJlc3Npb24gZmxhZwogIGlmIChidWZmZXIubGVuZ3RoICE9PSAzMykgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFdJRiBsZW5ndGgnKQoKICByZXR1cm4gewogICAgdmVyc2lvbjogYnVmZmVyWzBdLAogICAgZDogYnVmZmVyLnNsaWNlKDEpLAogICAgY29tcHJlc3NlZDogZmFsc2UKICB9Cn0KCmZ1bmN0aW9uIGRlY29kZSAodmVyc2lvbiwgc3RyaW5nKSB7CiAgcmV0dXJuIGRlY29kZVJhdyh2ZXJzaW9uLCBiczU4Y2hlY2suZGVjb2RlKHN0cmluZykpCn0KCmZ1bmN0aW9uIGVuY29kZVJhdyAodmVyc2lvbiwgZCwgY29tcHJlc3NlZCkgewogIHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKGNvbXByZXNzZWQgPyAzNCA6IDMzKQoKICBidWZmZXIud3JpdGVVSW50OCh2ZXJzaW9uLCAwKQogIGQuY29weShidWZmZXIsIDEpCgogIGlmIChjb21wcmVzc2VkKSB7CiAgICBidWZmZXJbMzNdID0gMHgwMQogIH0KCiAgcmV0dXJuIGJ1ZmZlcgp9CgpmdW5jdGlvbiBlbmNvZGUgKHZlcnNpb24sIGQsIGNvbXByZXNzZWQpIHsKICByZXR1cm4gYnM1OGNoZWNrLmVuY29kZShlbmNvZGVSYXcodmVyc2lvbiwgZCwgY29tcHJlc3NlZCkpCn0KCm1vZHVsZS5leHBvcnRzID0gewogIGRlY29kZTogZGVjb2RlLAogIGRlY29kZVJhdzogZGVjb2RlUmF3LAogIGVuY29kZTogZW5jb2RlLAogIGVuY29kZVJhdzogZW5jb2RlUmF3Cn0KCn0pLmNhbGwodGhpcyxyZXF1aXJlKCJidWZmZXIiKS5CdWZmZXIpCn0seyJiczU4Y2hlY2siOjc0LCJidWZmZXIiOjcwfV0sMTgwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIEBhdXRob3IgbWljYWVscGVkcm9zYUBnbWFpbC5jb20KKiBNaW5pbWFsIGludGVyZmFjZSBhbmQgaW1wbGVtZW50YXRpb24gdG8gc2VuZCBhbmQgcmVjZWl2ZSBtZXNzYWdlcy4gSXQgY2FuIGJlIHJldXNlZCBpbiBtYW55IHR5cGUgb2YgY29tcG9uZW50cy4KKiBDb21wb25lbnRzIHRoYXQgbmVlZCBhIG1lc3NhZ2Ugc3lzdGVtIHNob3VsZCByZWNlaXZlIHRoaXMgY2xhc3MgYXMgYSBkZXBlbmRlbmN5IG9yIGV4dGVuZCBpdC4KKiBFeHRlbnNpb25zIHNob3VsZCBpbXBsZW1lbnQgdGhlIGZvbGxvd2luZyBwcml2YXRlIG1ldGhvZHM6IF9vblBvc3RNZXNzYWdlIGFuZCBfcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyCiovCgp2YXIgQnVzID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICBfbXNnSWQ6IG51bWJlcjsKICBfc3Vic2NyaXB0aW9uczogPHVybDogTXNnTGlzdGVuZXJbXT4KICAgX3Jlc3BvbnNlVGltZU91dDogbnVtYmVyCiAgX3Jlc3BvbnNlQ2FsbGJhY2tzOiA8dXJsK2lkOiAobXNnKSA9PiB2b2lkPgogICAqLwoKICBmdW5jdGlvbiBCdXMoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnVzKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX3RoaXMuX21zZ0lkID0gMDsKICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0ge307CgogICAgX3RoaXMuX3Jlc3BvbnNlVGltZU91dCA9IDUwMDA7IC8vZGVmYXVsdCB0byAzcwogICAgX3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzID0ge307CgogICAgX3RoaXMuX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcigpOwogIH0KCiAgLyoqCiAgKiBSZWdpc3RlciBsaXN0ZW5lciB0byByZWNlaXZlIG1lc3NhZ2Ugd2hlbiAibXNnLnRvID09PSB1cmwiLgogICogU3BlY2lhbCB1cmwgIioiIGZvciBkZWZhdWx0IGxpc3RlbmVyIGlzIGFjY2VwdGVkIHRvIGludGVyY2VwdCBhbGwgbWVzc2FnZXMuCiAgKiBAcGFyYW0ge1VSTH0gdXJsIEFkZHJlc3MgdG8gaW50ZXJjZXB0LCB0aGEgaXMgaW4gdGhlIG1lc3NhZ2UgInRvIgogICogQHBhcmFtIHtMaXN0ZW5lcn0gbGlzdGVuZXIgbGlzdGVuZXIKICAqIEByZXR1cm4ge01zZ0xpc3RlbmVyfSBpbnN0YW5jZSBvZiBNc2dMaXN0ZW5lcgogICovCgoKICBfY3JlYXRlQ2xhc3MoQnVzLCBbewogICAga2V5OiAnYWRkTGlzdGVuZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHVybCwgbGlzdGVuZXIpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpdGVtID0gbmV3IE1zZ0xpc3RlbmVyKF90aGlzLl9zdWJzY3JpcHRpb25zLCB1cmwsIGxpc3RlbmVyKTsKICAgICAgdmFyIGl0ZW1MaXN0ID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbdXJsXTsKICAgICAgaWYgKCFpdGVtTGlzdCkgewogICAgICAgIGl0ZW1MaXN0ID0gW107CiAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNbdXJsXSA9IGl0ZW1MaXN0OwogICAgICB9CgogICAgICBpdGVtTGlzdC5wdXNoKGl0ZW0pOwogICAgICByZXR1cm4gaXRlbTsKICAgIH0KCiAgICAvKioKICAgICAqIE1hbnVhbGx5IGFkZCBhIHJlc3BvbnNlIGxpc3RlbmVyLiBPbmx5IG9uZSBsaXN0ZW5lciBwZXIgbWVzc2FnZSBJRCBzaG91bGQgZXhpc3QuCiAgICAgKiBBVEVOVElPTiwgdGhlcmUgaXMgbm8gdGltZW91dCBmb3IgdGhpcyBsaXN0ZW5lci4KICAgICAqIFRoZSBsaXN0ZW5lciBzaG91bGQgYmUgcmVtb3ZlZCB3aXRoIGEgcmVtb3ZlUmVzcG9uc2VMaXN0ZW5lciwgZmFpbGluZyB0byBkbyB0aGlzIHdpbGwgcmVzdWx0IGluIGEgdW5yZWxlYXNlZCBtZW1vcnkgcHJvYmxlbS4KICAgICAqIEBwYXJhbSB7VVJMfSB1cmwgT3JpZ2luIGFkZHJlc3Mgb2YgdGhlIG1lc3NhZ2Ugc2VudCwgIm1zZy5mcm9tIi4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtc2dJZCBNZXNzYWdlIElEIHRoYXQgaXMgcmV0dXJuZWQgZnJvbSB0aGUgcG9zdE1lc3NhZ2UuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNwb25zZUxpc3RlbmVyIENhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgcmVzcG9uc2UKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdhZGRSZXNwb25zZUxpc3RlbmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRSZXNwb25zZUxpc3RlbmVyKHVybCwgbXNnSWQsIHJlc3BvbnNlTGlzdGVuZXIpIHsKICAgICAgdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbdXJsICsgbXNnSWRdID0gcmVzcG9uc2VMaXN0ZW5lcjsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSB0aGUgcmVzcG9uc2UgbGlzdGVuZXIuCiAgICAgKiBAcGFyYW0ge1VSTH0gdXJsIE9yaWdpbiBhZGRyZXNzIG9mIHRoZSBtZXNzYWdlIHNlbnQsICJtc2cuZnJvbSIuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbXNnSWQgIE1lc3NhZ2UgSUQgdGhhdCBpcyByZXR1cm5lZCBmcm9tIHRoZSBwb3N0TWVzc2FnZQogICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlbW92ZVJlc3BvbnNlTGlzdGVuZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVJlc3BvbnNlTGlzdGVuZXIodXJsLCBtc2dJZCkgewogICAgICBkZWxldGUgdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbdXJsICsgbXNnSWRdOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIGFsbCBleGlzdGVudCBsaXN0ZW5lcnMgZm9yIHRoZSBVUkwKICAgICAqIEBwYXJhbSAge1VSTH0gdXJsIEFkZHJlc3MgcmVnaXN0ZXJlZAogICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlbW92ZUFsbExpc3RlbmVyc09mJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnNPZih1cmwpIHsKICAgICAgZGVsZXRlIHRoaXMuX3N1YnNjcmlwdGlvbnNbdXJsXTsKICAgIH0KCiAgICAvKioKICAgICAqIEhlbHBlciBtZXRob2QgdG8gYmluZCBsaXN0ZW5lcnMgKGluIGJvdGggZGlyZWN0aW9ucykgaW50byBvdGhlciBNaW5pQnVzIHRhcmdldC4KICAgICAqIEBwYXJhbSAge1VSTH0gb3V0VXJsIE91dGJvdW5kIFVSTCwgcmVnaXN0ZXIgbGlzdGVuZXIgZm9yIHVybCBpbiBkaXJlY3Rpb24gInRoaXMgLT4gdGFyZ2V0IgogICAgICogQHBhcmFtICB7VVJMfSBpblVybCBJbmJvdW5kIFVSTCwgcmVnaXN0ZXIgbGlzdGVuZXIgZm9yIHVybCBpbiBkaXJlY3Rpb24gInRhcmdldCAtPiB0aGlzIgogICAgICogQHBhcmFtICB7TWluaUJ1c30gdGFyZ2V0IFRoZSBvdGhlciB0YXJnZXQgTWluaUJ1cwogICAgICogQHJldHVybiB7Qm91bmR9IGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBwcm9wZXJ0aWVzIFt0aGlzTGlzdGVuZXIsIHRhcmdldExpc3RlbmVyXSBhbmQgdGhlIHVuYmluZCBtZXRob2QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYmluZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYmluZChvdXRVcmwsIGluVXJsLCB0YXJnZXQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHRoaXNMaXN0biA9IF90aGlzLmFkZExpc3RlbmVyKG91dFVybCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIHRhcmdldC5wb3N0TWVzc2FnZShtc2cpOwogICAgICB9KTsKCiAgICAgIHZhciB0YXJnZXRMaXN0biA9IHRhcmdldC5hZGRMaXN0ZW5lcihpblVybCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIF90aGlzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIHsKICAgICAgICB0aGlzTGlzdGVuZXI6IHRoaXNMaXN0biwKICAgICAgICB0YXJnZXRMaXN0ZW5lcjogdGFyZ2V0TGlzdG4sCiAgICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7CiAgICAgICAgICBfdGhpczIudGhpc0xpc3RlbmVyLnJlbW92ZSgpOwogICAgICAgICAgX3RoaXMyLnRhcmdldExpc3RlbmVyLnJlbW92ZSgpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KCiAgICAvL3B1Ymxpc2ggb24gZGVmYXVsdCBsaXN0ZW5lcnMKCiAgfSwgewogICAga2V5OiAnX3B1Ymxpc2hPbkRlZmF1bHQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9wdWJsaXNoT25EZWZhdWx0KG1zZykgewogICAgICAvL2lzIHRoZXJlIGFueSAiKiIgKGRlZmF1bHQpIGxpc3RlbmVycz8KICAgICAgdmFyIGl0ZW1MaXN0ID0gdGhpcy5fc3Vic2NyaXB0aW9uc1snKiddOwogICAgICBpZiAoaXRlbUxpc3QpIHsKICAgICAgICB0aGlzLl9wdWJsaXNoT24oaXRlbUxpc3QsIG1zZyk7CiAgICAgIH0KICAgIH0KCiAgICAvL3B1Ymxpc2ggb24gYSBzdWJzY3JpcHRpb24gbGlzdC4KCiAgfSwgewogICAga2V5OiAnX3B1Ymxpc2hPbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3B1Ymxpc2hPbihpdGVtTGlzdCwgbXNnKSB7CiAgICAgIGl0ZW1MaXN0LmZvckVhY2goZnVuY3Rpb24gKHN1YikgewogICAgICAgIHN1Yi5fY2FsbGJhY2sobXNnKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3Jlc3BvbnNlQ2FsbGJhY2snLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNwb25zZUNhbGxiYWNrKGluTXNnLCByZXNwb25zZUNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2F1dG9tYXRpYyBtYW5hZ2VtZW50IG9mIHJlc3BvbnNlIGhhbmRsZXJzCiAgICAgIGlmIChyZXNwb25zZUNhbGxiYWNrKSB7CiAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciByZXNwb25zZUlkID0gaW5Nc2cuZnJvbSArIGluTXNnLmlkOwogICAgICAgICAgX3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3Jlc3BvbnNlSWRdID0gcmVzcG9uc2VDYWxsYmFjazsKCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHJlc3BvbnNlRnVuID0gX3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3Jlc3BvbnNlSWRdOwogICAgICAgICAgICBkZWxldGUgX3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3Jlc3BvbnNlSWRdOwoKICAgICAgICAgICAgaWYgKHJlc3BvbnNlRnVuKSB7CiAgICAgICAgICAgICAgdmFyIGVycm9yTXNnID0gewogICAgICAgICAgICAgICAgaWQ6IGluTXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLAogICAgICAgICAgICAgICAgYm9keTogeyBjb2RlOiA0MDgsIGRlc2M6ICdSZXNwb25zZSB0aW1lb3V0IScsIHZhbHVlOiBpbk1zZyB9CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgcmVzcG9uc2VGdW4oZXJyb3JNc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfdGhpcy5fcmVzcG9uc2VUaW1lT3V0KTsKICAgICAgICB9KSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uUmVzcG9uc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlc3BvbnNlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKG1zZy50eXBlID09PSAncmVzcG9uc2UnKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlSWQgPSBtc2cudG8gKyBtc2cuaWQ7CiAgICAgICAgdmFyIHJlc3BvbnNlRnVuID0gX3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3Jlc3BvbnNlSWRdOwoKICAgICAgICAvL2lmIGl0J3MgYSBwcm92aXNpb25hbCByZXNwb25zZSwgZG9uJ3QgZGVsZXRlIHJlc3BvbnNlIGxpc3RlbmVyCiAgICAgICAgaWYgKG1zZy5ib2R5LmNvZGUgPj0gMjAwKSB7CiAgICAgICAgICBkZWxldGUgX3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3Jlc3BvbnNlSWRdOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc3BvbnNlRnVuKSB7CiAgICAgICAgICByZXNwb25zZUZ1bihtc2cpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy9yZWNlaXZlIG1lc3NhZ2VzIGZyb20gZXh0ZXJuYWwgaW50ZXJmYWNlCgogIH0sIHsKICAgIGtleTogJ19vbk1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbk1lc3NhZ2UobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIV90aGlzLl9vblJlc3BvbnNlKG1zZykpIHsKICAgICAgICB2YXIgaXRlbUxpc3QgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1ttc2cudG9dOwogICAgICAgIGlmIChpdGVtTGlzdCkgewogICAgICAgICAgX3RoaXMuX3B1Ymxpc2hPbihpdGVtTGlzdCwgbXNnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuX3B1Ymxpc2hPbkRlZmF1bHQobXNnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZ2VuSWQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZW5JZChpbk1zZykgewogICAgICAvL1RPRE86IGhvdyBkbyB3ZSBtYW5hZ2UgbWVzc2FnZSBJRCdzPyBTaG91bGQgaXQgYmUgYSBnbG9iYWwgcnVudGltZSBjb3VudGVyLCBvciBwZXIgVVJMIGFkZHJlc3M/CiAgICAgIC8vR2xvYmFsIGNvdW50ZXIgd2lsbCBub3Qgd29yaywgYmVjYXVzZSB0aGVyZSB3aWxsIGJlIG11bHRpcGxlIE1pbmlCdXMgaW5zdGFuY2VzIQogICAgICAvL1BlciBVUkwsIGNhbiBiZSBhIGxvdCBvZiBkYXRhIHRvIG1haW50YWluIQogICAgICAvL01heWJlIGEgY291bnRlciBwZXIgTWluaUJ1cyBpbnN0YW5jZS4gVGhpcyBpcyB0aGUgYXNzdW1lZCBzb2x1dGlvbiBmb3Igbm93LgogICAgICBpZiAoIWluTXNnLmlkIHx8IGluTXNnLmlkID09PSAwKSB7CiAgICAgICAgdGhpcy5fbXNnSWQrKzsKICAgICAgICBpbk1zZy5pZCA9IHRoaXMuX21zZ0lkOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAqIFNlbmQgbWVzc2FnZXMgdG8gbG9jYWwgbGlzdGVuZXJzLCBvciBpZiBub3QgZXhpc3RzIHRvIGV4dGVybmFsIGxpc3RlbmVycy4KICAgICogSXQncyBoYXMgYW4gb3B0aW9uYWwgbWVjaGFuaXNtIGZvciBhdXRvbWF0aWMgbWFuYWdlbWVudCBvZiByZXNwb25zZSBoYW5kbGVycy4KICAgICogVGhlIHJlc3BvbnNlIGhhbmRsZXIgd2lsbCBiZSB1bnJlZ2lzdGVyZWQgYWZ0ZXIgcmVjZWl2aW5nIHRoZSByZXNwb25zZSwgb3IgYWZ0ZXIgcmVzcG9uc2UgdGltZW91dCAoZGVmYXVsdCB0byAzcykuCiAgICAqIEBwYXJhbSAge01lc3NhZ2V9IG1zZyBNZXNzYWdlIHRvIHNlbmQuIE1lc3NhZ2UgSUQgaXMgYXV0b21hdGljYWxseSBhZGRlZCB0byB0aGUgbWVzc2FnZS4KICAgICogQHBhcmFtICB7RnVuY3Rpb259IHJlc3BvbnNlQ2FsbGJhY2sgT3B0aW9uYWwgcGFyYW1ldGVyLCBpZiB0aGUgZGV2ZWxvcGVyIHdoYXQncyBhdXRvbWF0aWMgcmVzcG9uc2UgbWFuYWdlbWVudC4KICAgICogQHJldHVybiB7bnVtYmVyfSBSZXR1cm5zIHRoZSBtZXNzYWdlIElELCBpbiBjYXNlIGl0IHNob3VsZCBiZSBuZWVkZWQgZm9yIG1hbnVhbCBtYW5hZ2VtZW50IG9mIHRoZSByZXNwb25zZSBoYW5kbGVyLgogICAgKi8KCiAgfSwgewogICAga2V5OiAncG9zdE1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBvc3RNZXNzYWdlKGluTXNnLCByZXNwb25zZUNhbGxiYWNrKSB7fQoKICAgIC8qKgogICAgICogTm90IHB1YmxpYyBhdmFpbGFibGUsIHVzZWQgYnkgdGhlIGNsYXNzIGV4dGVuc2lvbiBpbXBsZW1lbnRhdGlvbiwgdG8gcHJvY2VzcyBtZXNzYWdlcyBmcm9tIHRoZSBwdWJsaWMgInBvc3RNZXNzYWdlIiB3aXRob3V0IGEgcmVnaXN0ZXJlZCBsaXN0ZW5lci4KICAgICAqIFVzZWQgdG8gc2VuZCB0aGUgbWVzc2FnZSB0byBhbiBleHRlcm5hbCBpbnRlcmZhY2UsIGxpa2UgYSBXZWJXb3JrZXIsIElGcmFtZSwgZXRjLgogICAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSBtc2cgTWVzc2FnZQogICAgICovCgogIH0sIHsKICAgIGtleTogJ19vblBvc3RNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qb3N0TWVzc2FnZShtc2cpIHt9IC8qaW1wbGVtZW50YXRpb24gd2lsbCBzZW5kIG1lc3NhZ2UgdG8gZXh0ZXJuYWwgc3lzdGVtKi8KCiAgICAvKioKICAgICAqIE5vdCBwdWJsaWMgYXZhaWxhYmxlLCB1c2VkIGJ5IHRoZSBjbGFzcyBleHRlbnNpb24gaW1wbGVtZW50YXRpb24sIHRvIHByb2Nlc3MgYWxsIG1lc3NhZ2VzIHRoYXQgZW50ZXIgdGhlIE1pbmlCdXMgZnJvbSBhbiBleHRlcm5hbCBpbnRlcmZhY2UsIGxpa2UgYSBXZWJXb3JrZXIsIElGcmFtZSwgZXRjLgogICAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIG9uZSB0aW1lIGluIHRoZSBjb25zdHJ1Y3RvciB0byByZWdpc3RlciBleHRlcm5hbCBsaXN0ZW5lcnMuCiAgICAgKiBUaGUgaW1wbGVtZW50YXRpb24gd2lsbCBwcm9iYWJseSBjYWxsIHRoZSAiX29uTWVzc2FnZSIgbWV0aG9kIHRvIHB1Ymxpc2ggaW4gdGhlIGxvY2FsIGxpc3RlbmVycy4KICAgICAqIERPIE5PVCBjYWxsICJwb3N0TWVzc2FnZSIsIHRoZXJlIGlzIGEgZGFuZ2VyIHRoYXQgdGhlIG1lc3NhZ2UgZW50ZXJzIGluIGEgY3ljbGUhCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcigpIHsvKmltcGxlbWVudGF0aW9uIHdpbGwgcmVnaXN0ZXIgZXh0ZXJuYWwgbGlzdGVuZXIgYW5kIGNhbGwgInRoaXMuX29uTWVzc2FnZShtc2cpIiAqL30KICB9XSk7CgogIHJldHVybiBCdXM7Cn0oKTsKCnZhciBNc2dMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX3N1YnNjcmlwdGlvbnM6IDxzdHJpbmc6IE1zZ0xpc3RlbmVyW10+OwogIF91cmw6IHN0cmluZzsKICBfY2FsbGJhY2s6IChtc2cpID0+IHZvaWQ7CiAgKi8KCiAgZnVuY3Rpb24gTXNnTGlzdGVuZXIoc3Vic2NyaXB0aW9ucywgdXJsLCBjYWxsYmFjaykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1zZ0xpc3RlbmVyKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0gc3Vic2NyaXB0aW9uczsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjazsKICB9CgogIF9jcmVhdGVDbGFzcyhNc2dMaXN0ZW5lciwgW3sKICAgIGtleTogJ3JlbW92ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHN1YnMgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1tfdGhpcy5fdXJsXTsKICAgICAgaWYgKHN1YnMpIHsKICAgICAgICB2YXIgaW5kZXggPSBzdWJzLmluZGV4T2YoX3RoaXMpOwogICAgICAgIHN1YnMuc3BsaWNlKGluZGV4LCAxKTsKCiAgICAgICAgLy9pZiB0aGVyZSBhcmUgbm8gbGlzdGVuZXJzLCByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBlbnRpcmVseS4KICAgICAgICBpZiAoc3Vicy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc3Vic2NyaXB0aW9uc1tfdGhpcy5fdXJsXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICd1cmwnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl91cmw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTXNnTGlzdGVuZXI7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEJ1czsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxODE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfQnVzMiA9IHJlcXVpcmUoJy4vQnVzJyk7Cgp2YXIgX0J1czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9CdXMyKTsKCnZhciBfUGlwZWxpbmUgPSByZXF1aXJlKCcuL1BpcGVsaW5lJyk7Cgp2YXIgX1BpcGVsaW5lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BpcGVsaW5lKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsgfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCi8qKgoqIE1lc3NhZ2UgQlVTIEludGVyZmFjZSBpcyBhbiBleHRlbnNpb24gb2YgdGhlIE1pbmlCdXMKKiBJdCBkb2Vzbid0IHN1cHBvcnQgdGhlIGRlZmF1bHQgJyonIGxpc3RlbmVyLCBpbnN0ZWFkIGl0IHVzZXMgdGhlIHJlZ2lzdHJ5LnJlc29sdmUoLi4pCiovCgp2YXIgTWVzc2FnZUJ1cyA9IGZ1bmN0aW9uIChfQnVzKSB7CiAgX2luaGVyaXRzKE1lc3NhZ2VCdXMsIF9CdXMpOwoKICAvKiBwcml2YXRlCiAgX3JlZ2lzdHJ5OiBSZWdpc3RyeQogIF9mb3J3YXJkczogeyA8ZnJvbS11cmw+OiB7IGZsOiBNc2dMaXN0ZW5lciwgc2FuZGJveFRvVXJsczogTWFwKFNhbmRib3gsIFt0by11cmxdKSwgdXJsVG9TYW5kYm94OiB7IHRvLXVybDogU2FuZGJveCB9IH0gfQogICBfcGlwZWxpbmU6IFBpcGVsaW5lCiAgKi8KCiAgLy9UT0RPOiBmdXR1cmUgb3B0aW1pemF0aW9uCiAgLy8xLiBtZXNzYWdlIGJhdGNoIHByb2Nlc3Npbmcgd2l0aCBzZXRJbnRlcnZhbAogIC8vMi4gcmVzb2x2ZSBkZWZhdWx0IGdhdGV3YXkvcHJvdG9zdHViIHdpdGggcmVnaXN0ZXIucmVzb2x2ZQoKICBmdW5jdGlvbiBNZXNzYWdlQnVzKHJlZ2lzdHJ5KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVzc2FnZUJ1cyk7CgogICAgdmFyIF90aGlzMiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihNZXNzYWdlQnVzKS5jYWxsKHRoaXMpKTsKCiAgICBfdGhpczIuX3JlZ2lzdHJ5ID0gcmVnaXN0cnk7CiAgICBfdGhpczIuX2ZvcndhcmRzID0ge307CgogICAgX3RoaXMyLl9waXBlbGluZSA9IG5ldyBfUGlwZWxpbmUyLmRlZmF1bHQoZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbnNvbGUubG9nKCdQSVBFTElORS1FUlJPUjogJywgSlNPTi5zdHJpbmdpZnkoZXJyb3IpKTsKICAgIH0pOwogICAgcmV0dXJuIF90aGlzMjsKICB9CgogIF9jcmVhdGVDbGFzcyhNZXNzYWdlQnVzLCBbewogICAga2V5OiAncG9zdE1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBvc3RNZXNzYWdlKGluTXNnLCByZXNwb25zZUNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fZ2VuSWQoaW5Nc2cpOwoKICAgICAgX3RoaXMuX3BpcGVsaW5lLnByb2Nlc3MoaW5Nc2csIGZ1bmN0aW9uIChtc2cpIHsKCiAgICAgICAgX3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2soaW5Nc2csIHJlc3BvbnNlQ2FsbGJhY2spOwoKICAgICAgICBpZiAoIV90aGlzLl9vblJlc3BvbnNlKG1zZykpIHsKICAgICAgICAgIHZhciBpdGVtTGlzdCA9IF90aGlzLl9zdWJzY3JpcHRpb25zW21zZy50b107CiAgICAgICAgICBpZiAoaXRlbUxpc3QpIHsKICAgICAgICAgICAgLy9kbyBub3QgcHVibGlzaCBvbiBkZWZhdWx0IGFkZHJlc3MsIGJlY2F1c2Ugb2YgbG9vcGJhY2sgY3ljbGUKICAgICAgICAgICAgX3RoaXMuX3B1Ymxpc2hPbihpdGVtTGlzdCwgbXNnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vaWYgdGhlcmUgaXMgbm8gbGlzdGVuZXIsIHNlbmQgdG8gZXh0ZXJuYWwgaW50ZXJmYWNlCiAgICAgICAgICAgIF90aGlzLl9vblBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHJldHVybiBpbk1zZy5pZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdhZGRGb3J3YXJkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRGb3J3YXJkKGZyb20sIHRvKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vdmVyaWZ5IGlmIGZvcndhcmQgZXhpc3QKICAgICAgdmFyIGNvbmYgPSBfdGhpcy5fZm9yd2FyZHNbZnJvbV07CiAgICAgIGlmICghY29uZikgewogICAgICAgIHZhciBmb3J3YXJkTGlzdGVuZXIgPSBfdGhpcy5hZGRMaXN0ZW5lcihmcm9tLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICBjb25mLnNhbmRib3hUb1VybHMuZm9yRWFjaChmdW5jdGlvbiAodXJscywgc2FuZGJveCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnTUItRk9SV0FSRDogKCAnICsgZnJvbSArICcgdG8gJyArIHVybHMuc2l6ZSArICcgZGVzdGluYXRpb25zKScpOwogICAgICAgICAgICB1cmxzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NFTkQtVE86ICcsIHZhbHVlKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBzYW5kYm94LnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgY29uZiA9IHsKICAgICAgICAgIGZyb206IGZyb20sCiAgICAgICAgICBmbDogZm9yd2FyZExpc3RlbmVyLAogICAgICAgICAgc2FuZGJveFRvVXJsczogbmV3IE1hcCgpLAogICAgICAgICAgdXJsVG9TYW5kYm94OiBuZXcgTWFwKCksCgogICAgICAgICAgLy9yZW1vdmUgZm9yd2FyZCBkZXRpbmF0aW9uCiAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSh1cmwpIHsKICAgICAgICAgICAgdmFyIHNhbmRib3ggPSBfdGhpczMudXJsVG9TYW5kYm94LmdldCh1cmwpOwogICAgICAgICAgICBpZiAoc2FuZGJveCkgewogICAgICAgICAgICAgIF90aGlzMy51cmxUb1NhbmRib3guZGVsZXRlKHVybCk7CiAgICAgICAgICAgICAgX3RoaXMzLnNhbmRib3hUb1VybHMuZ2V0KHNhbmRib3gpLmRlbGV0ZSh1cmwpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX2ZvcndhcmRzW2Zyb21dID0gY29uZjsKICAgICAgfQoKICAgICAgLy9hZGQgZm9yd2FyZCBkZXRpbmF0aW9uCiAgICAgIHRoaXMuX3JlZ2lzdHJ5LmdldFNhbmRib3godG8pLnRoZW4oZnVuY3Rpb24gKHNhbmRib3gpIHsKICAgICAgICB2YXIgdXJscyA9IGNvbmYuc2FuZGJveFRvVXJscy5nZXQoc2FuZGJveCk7CiAgICAgICAgaWYgKCF1cmxzKSB7CiAgICAgICAgICB1cmxzID0gbmV3IFNldCgpOwogICAgICAgICAgY29uZi5zYW5kYm94VG9VcmxzLnNldChzYW5kYm94LCB1cmxzKTsKICAgICAgICB9CgogICAgICAgIHVybHMuYWRkKHRvKTsKICAgICAgICBjb25mLnVybFRvU2FuZGJveC5zZXQodG8sIHNhbmRib3gpOwogICAgICB9KTsKCiAgICAgIHJldHVybiBjb25mOwogICAgfQogIH0sIHsKICAgIGtleTogJ19wdWJsaXNoJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHVibGlzaCh1cmwsIG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGl0ZW1MaXN0ID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbdXJsXTsKICAgICAgaWYgKGl0ZW1MaXN0KSB7CiAgICAgICAgX3RoaXMuX3B1Ymxpc2hPbihpdGVtTGlzdCwgbXNnKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vblBvc3RNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qb3N0TWVzc2FnZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vcmVzb2x2ZSBleHRlcm5hbCBwcm90b3N0dWIuLi4KICAgICAgX3RoaXMuX3JlZ2lzdHJ5LnJlc29sdmUobXNnLnRvKS50aGVuKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgIF90aGlzLl9wdWJsaXNoKHJvdXRlLCBtc2cpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKCdSRVNPTFZFLUVSUk9SOiAnLCBlKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAncGlwZWxpbmUnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9waXBlbGluZTsKICAgIH0KICB9XSk7CgogIHJldHVybiBNZXNzYWdlQnVzOwp9KF9CdXMzLmRlZmF1bHQpOwoKZXhwb3J0cy5kZWZhdWx0ID0gTWVzc2FnZUJ1czsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi9CdXMiOjE4MCwiLi9QaXBlbGluZSI6MTgyfV0sMTgyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqIEBhdXRob3IgbWljYWVscGVkcm9zYUBnbWFpbC5jb20KKiBQaXBlbGluZQoqIFNlcXVlbmNpYWwgcHJvY2Vzc29yIG9mIG1ldGhvZHMuIFNpbWlsYXIgdG8gaG93IFNlcXVlbnRpYWwgUHJvbWlzZSdzIHdvcmssIGJ1dCBiZXR0ZXIgZml0IGZvciBtZXNzYWdlIHByb2Nlc3NpbmcuCiovCgp2YXIgUGlwZWxpbmUgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHVibGljCiAgICBoYW5kbGVyczogKChQaXBlQ29udGV4dCkgPT4gdm9pZClbXQogICAgb25GYWlsOiAoZXJyb3IpID0+IHZvaWQKICAqLwoKICBmdW5jdGlvbiBQaXBlbGluZShfb25GYWlsKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGlwZWxpbmUpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuaGFuZGxlcnMgPSBbXTsKICAgIF90aGlzLm9uRmFpbCA9IF9vbkZhaWw7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUGlwZWxpbmUsIFt7CiAgICBrZXk6ICJwcm9jZXNzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9jZXNzKG1zZywgb25EZWxpdmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMuaGFuZGxlcnMubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBpdGVyID0gbmV3IEl0ZXJhdG9yKF90aGlzLmhhbmRsZXJzKTsKICAgICAgICBpdGVyLm5leHQobmV3IFBpcGVDb250ZXh0KF90aGlzLCBpdGVyLCBtc2csIG9uRGVsaXZlcikpOwogICAgICB9IGVsc2UgewogICAgICAgIG9uRGVsaXZlcihtc2cpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUGlwZWxpbmU7Cn0oKTsKCnZhciBQaXBlQ29udGV4dCA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgICBfaW5TdG9wOiBib29sZWFuCiAgICAgX3BpcGVsaW5lOiBQaXBlbGluZQogICAgX2l0ZXI6IEl0ZXJhdG9yCiAgICBfbXNnOiBNZXNzYWdlCiAgKi8KCiAgZnVuY3Rpb24gUGlwZUNvbnRleHQocGlwZWxpbmUsIGl0ZXIsIG1zZywgb25EZWxpdmVyKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGlwZUNvbnRleHQpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX2luU3RvcCA9IGZhbHNlOwoKICAgIF90aGlzLl9waXBlbGluZSA9IHBpcGVsaW5lOwogICAgX3RoaXMuX2l0ZXIgPSBpdGVyOwogICAgX3RoaXMuX21zZyA9IG1zZzsKICAgIF90aGlzLl9vbkRlbGl2ZXIgPSBvbkRlbGl2ZXI7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUGlwZUNvbnRleHQsIFt7CiAgICBrZXk6ICJuZXh0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFfdGhpcy5faW5TdG9wKSB7CiAgICAgICAgaWYgKF90aGlzLl9pdGVyLmhhc05leHQpIHsKICAgICAgICAgIF90aGlzLl9pdGVyLm5leHQoX3RoaXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fb25EZWxpdmVyKF90aGlzLl9tc2cpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRlbGl2ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGl2ZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmICghX3RoaXMuX2luU3RvcCkgewogICAgICAgIF90aGlzLl9pblN0b3AgPSB0cnVlOwogICAgICAgIF90aGlzLl9vbkRlbGl2ZXIoX3RoaXMuX21zZyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJmYWlsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmYWlsKGVycm9yKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIV90aGlzLl9pblN0b3ApIHsKICAgICAgICBfdGhpcy5faW5TdG9wID0gdHJ1ZTsKICAgICAgICBpZiAoX3RoaXMuX3BpcGVsaW5lLm9uRmFpbCkgewogICAgICAgICAgX3RoaXMuX3BpcGVsaW5lLm9uRmFpbChlcnJvcik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicGlwZWxpbmUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9waXBlbGluZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtc2ciLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9tc2c7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoaW5Nc2cpIHsKICAgICAgdGhpcy5fbXNnID0gaW5Nc2c7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUGlwZUNvbnRleHQ7Cn0oKTsKCnZhciBJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgICBfaW5kZXg6IG51bWJlcgogICAgX2FycmF5OiBbXQogICovCgogIGZ1bmN0aW9uIEl0ZXJhdG9yKGFycmF5KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSXRlcmF0b3IpOwoKICAgIHRoaXMuX2luZGV4ID0gLTE7CiAgICB0aGlzLl9hcnJheSA9IGFycmF5OwogIH0KCiAgX2NyZWF0ZUNsYXNzKEl0ZXJhdG9yLCBbewogICAga2V5OiAiaGFzTmV4dCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2luZGV4IDwgdGhpcy5fYXJyYXkubGVuZ3RoIC0gMTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuZXh0IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB0aGlzLl9pbmRleCsrOwogICAgICByZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5faW5kZXhdOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEl0ZXJhdG9yOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBQaXBlbGluZTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxODM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoKQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNvbmRhdmllcy9ibG9vbWZpbHRlci5qcwoKT3JpZ2luYWwgTGljZW5zZToKCkNvcHlyaWdodCAoYykgMjAxMSwgSmFzb24gRGF2aWVzCkFsbCByaWdodHMgcmVzZXJ2ZWQuCgpSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQKbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6CgogICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzCiAgICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KCiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsCiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uCiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KCiAgKiBUaGUgbmFtZSBKYXNvbiBEYXZpZXMgbWF5IG5vdCBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cwogICAgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uCgpUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTICJBUyBJUyIgQU5ECkFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVECldBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUKRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgSkFTT04gREFWSUVTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsCklOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QKTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SClBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YKTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRQpPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGCkFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgoqLwoKLyoqCiogSW1wbGVtZW50cyBhIEJsb29tIGZpbHRlci4KKiBAYXV0aG9yIEphc29uIERhdmllczsgYWRhcHRlZCBhbmQgZXh0ZW5kZWQgYnkgYmVpZXJsZUB0dS1iZXJsaW4uZGUKKi8KCnZhciBCbG9vbUZpbHRlciA9IGZ1bmN0aW9uICgpIHsKCiAgLy92YXIgdHlwZWRBcnJheXMgPSB0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnOwoKICAvLyBDcmVhdGVzIGEgbmV3IGJsb29tIGZpbHRlci4gIElmICptKiBpcyBhbiBhcnJheS1saWtlIG9iamVjdCwgd2l0aCBhIGxlbmd0aAogIC8vIHByb3BlcnR5LCB0aGVuIHRoZSBibG9vbSBmaWx0ZXIgaXMgbG9hZGVkIHdpdGggZGF0YSBmcm9tIHRoZSBhcnJheSwgd2hlcmUKICAvLyBlYWNoIGVsZW1lbnQgaXMgYSAzMi1iaXQgaW50ZWdlci4gIE90aGVyd2lzZSwgKm0qIHNob3VsZCBzcGVjaWZ5IHRoZQogIC8vIG51bWJlciBvZiBiaXRzLiAgTm90ZSB0aGF0ICptKiBpcyByb3VuZGVkIHVwIHRvIHRoZSBuZWFyZXN0IG11bHRpcGxlIG9mCiAgLy8gMzIuICAqayogc3BlY2lmaWVzIHRoZSBudW1iZXIgb2YgaGFzaGluZyBmdW5jdGlvbnMuCgogIGZ1bmN0aW9uIEJsb29tRmlsdGVyKG0sIGspIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCbG9vbUZpbHRlcik7CgogICAgdmFyIHR5cGVkQXJyYXlzID0gdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJzsKCiAgICB2YXIgYTsKICAgIGlmICh0eXBlb2YgbSAhPT0gJ251bWJlcicpIHsKICAgICAgYSA9IG07CiAgICAgIG0gPSBhLmxlbmd0aCAqIDMyOwogICAgfQoKICAgIHZhciBuID0gTWF0aC5jZWlsKG0gLyAzMik7CiAgICB2YXIgaSA9IC0xOwogICAgdGhpcy5tID0gbSA9IG4gKiAzMjsKICAgIHRoaXMuayA9IGs7CgogICAgaWYgKHR5cGVkQXJyYXlzKSB7CiAgICAgIHZhciBrYnl0ZXMgPSAxIDw8IE1hdGguY2VpbChNYXRoLmxvZyhNYXRoLmNlaWwoTWF0aC5sb2cobSkgLyBNYXRoLkxOMiAvIDgpKSAvIE1hdGguTE4yKTsKICAgICAgdmFyIGFycmF5ID0ga2J5dGVzID09PSAxID8gVWludDhBcnJheSA6IGtieXRlcyA9PT0gMiA/IFVpbnQxNkFycmF5IDogVWludDMyQXJyYXk7CiAgICAgIHZhciBrYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGtieXRlcyAqIGspOwogICAgICB0aGlzLmJ1Y2tldHMgPSBuZXcgSW50MzJBcnJheShuKTsKICAgICAgaWYgKGEpIHdoaWxlICgrK2kgPCBuKSB7CiAgICAgICAgYnVja2V0c1tpXSA9IGFbaV07CiAgICAgIH10aGlzLl9sb2NhdGlvbnMgPSBuZXcgQXJyYXkoa2J1ZmZlcik7CiAgICB9IGVsc2UgewogICAgICAvL3ZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzID0gW107CiAgICAgIHRoaXMuYnVja2V0cyA9IFtdOwogICAgICBpZiAoYSkgd2hpbGUgKCsraSA8IG4pIHsKICAgICAgICBidWNrZXRzW2ldID0gYVtpXTsKICAgICAgfSBlbHNlIHdoaWxlICgrK2kgPCBuKSB7CiAgICAgICAgYnVja2V0c1tpXSA9IDA7CiAgICAgIH10aGlzLl9sb2NhdGlvbnMgPSBbXTsKICAgIH0KICB9CgogIC8vIFNlZSBodHRwOi8vd2lsbHdoaW0ud3BlbmdpbmUuY29tLzIwMTEvMDkvMDMvcHJvZHVjaW5nLW4taGFzaC1mdW5jdGlvbnMtYnktaGFzaGluZy1vbmx5LW9uY2UvCgoKICBfY3JlYXRlQ2xhc3MoQmxvb21GaWx0ZXIsIFt7CiAgICBrZXk6ICdsb2NhdGlvbnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvY2F0aW9ucyh2KSB7CiAgICAgIHZhciBrID0gdGhpcy5rOwogICAgICB2YXIgbSA9IHRoaXMubTsKICAgICAgdmFyIHIgPSB0aGlzLl9sb2NhdGlvbnM7CiAgICAgIHZhciBhID0gdGhpcy5mbnYxYSh2KTsKICAgICAgdmFyIGIgPSB0aGlzLmZudjFhYihhKTsKICAgICAgdmFyIHggPSBhICUgbTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrOyArK2kpIHsKICAgICAgICByW2ldID0geCA8IDAgPyB4ICsgbSA6IHg7CiAgICAgICAgeCA9ICh4ICsgYikgJSBtOwogICAgICB9CiAgICAgIHJldHVybiByOwogICAgfQogIH0sIHsKICAgIGtleTogJ2FkZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkKHYpIHsKICAgICAgdmFyIGwgPSB0aGlzLmxvY2F0aW9ucyh2ICsgJycpOwogICAgICB2YXIgayA9IHRoaXMuazsKICAgICAgdmFyIGJ1Y2tldHMgPSB0aGlzLmJ1Y2tldHM7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgazsgKytpKSB7CiAgICAgICAgYnVja2V0c1tNYXRoLmZsb29yKGxbaV0gLyAzMildIHw9IDEgPDwgbFtpXSAlIDMyOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAndGVzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gdGVzdCh2KSB7CiAgICAgIHZhciBsID0gdGhpcy5sb2NhdGlvbnModiArICcnKTsKICAgICAgdmFyIGsgPSB0aGlzLms7CiAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGs7ICsraSkgewogICAgICAgIHZhciBiID0gbFtpXTsKICAgICAgICBpZiAoKGJ1Y2tldHNbTWF0aC5mbG9vcihiIC8gMzIpXSAmIDEgPDwgYiAlIDMyKSA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLyBORVc6IE9ScyB0aGUgQmxvb21GaWx0ZXIgZnJvbSB0aGUgcGFyYW1ldGVyCiAgICAvLyBwYXJhbSBoYXMgdG8gYmUgYSBCRjsgQkZzIHNob3VsZCBiZSBzYW1lIGxlbmd0aAoKICB9LCB7CiAgICBrZXk6ICdhZGRCbG9vbUZpbHRlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQmxvb21GaWx0ZXIodikgewogICAgICB2YXIgYnVja2V0cyA9IHRoaXMuYnVja2V0czsKICAgICAgdmFyIGJ1Y2tldHNQYXJhbSA9IHYuYnVja2V0czsKICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBidWNrZXRzLmxlbmd0aDsgaSA8IG47ICsraSkgewogICAgICAgIGJ1Y2tldHNbaV0gPSBidWNrZXRzW2ldIHwgYnVja2V0c1BhcmFtW2ldOwogICAgICB9CiAgICB9CgogICAgLy8gRXN0aW1hdGVkIGNhcmRpbmFsaXR5LgoKICB9LCB7CiAgICBrZXk6ICdzaXplJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzaXplKCkgewogICAgICB2YXIgYnVja2V0cyA9IHRoaXMuYnVja2V0czsKICAgICAgdmFyIGJpdHMgPSAwOwogICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGJ1Y2tldHMubGVuZ3RoOyBpIDwgbjsgKytpKSB7CiAgICAgICAgYml0cyArPSB0aGlzLnBvcGNudChidWNrZXRzW2ldKTsKICAgICAgfXJldHVybiAtdGhpcy5tICogTWF0aC5sb2coMSAtIGJpdHMgLyB0aGlzLm0pIC8gdGhpcy5rOwogICAgfQoKICAgIC8vIGh0dHA6Ly9ncmFwaGljcy5zdGFuZm9yZC5lZHUvfnNlYW5kZXIvYml0aGFja3MuaHRtbCNDb3VudEJpdHNTZXRQYXJhbGxlbAoKICB9LCB7CiAgICBrZXk6ICdwb3BjbnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBvcGNudCh2KSB7CiAgICAgIHYgLT0gdiA+PiAxICYgMHg1NTU1NTU1NTsKICAgICAgdiA9ICh2ICYgMHgzMzMzMzMzMykgKyAodiA+PiAyICYgMHgzMzMzMzMzMyk7CiAgICAgIHJldHVybiAodiArICh2ID4+IDQpICYgMHhmMGYwZjBmKSAqIDB4MTAxMDEwMSA+PiAyNDsKICAgIH0KCiAgICAvLyBGb3dsZXIvTm9sbC9WbyBoYXNoaW5nLgoKICB9LCB7CiAgICBrZXk6ICdmbnYxYScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm52MWEodikgewogICAgICB2YXIgYSA9IDIxNjYxMzYyNjE7CiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdi5sZW5ndGg7IGkgPCBuOyArK2kpIHsKICAgICAgICB2YXIgYyA9IHYuY2hhckNvZGVBdChpKTsKICAgICAgICB2YXIgZCA9IGMgJiAweGZmMDA7CiAgICAgICAgaWYgKGQpIGEgPSB0aGlzLmZudm11bHRpcGx5KGEgXiBkID4+IDgpOwogICAgICAgIGEgPSB0aGlzLmZudm11bHRpcGx5KGEgXiBjICYgMHhmZik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZm52bWl4KGEpOwogICAgfQoKICAgIC8vIGEgKiAxNjc3NzYxOSBtb2QgMioqMzIKCiAgfSwgewogICAga2V5OiAnZm52bXVsdGlwbHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZudm11bHRpcGx5KGEpIHsKICAgICAgcmV0dXJuIGEgKyAoYSA8PCAxKSArIChhIDw8IDQpICsgKGEgPDwgNykgKyAoYSA8PCA4KSArIChhIDw8IDI0KTsKICAgIH0KCiAgICAvLyBPbmUgYWRkaXRpb25hbCBpdGVyYXRpb24gb2YgRk5WLCBnaXZlbiBhIGhhc2guCgogIH0sIHsKICAgIGtleTogJ2ZudjFhYicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm52MWFiKGEpIHsKICAgICAgcmV0dXJuIHRoaXMuZm52bWl4KHRoaXMuZm52bXVsdGlwbHkoYSkpOwogICAgfQoKICAgIC8vIFNlZSBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMzEwMTkwMTMyMjUvaHR0cDovL2hvbWUuY29tY2FzdC5uZXQvfmJyZXRtL2hhc2gvNi5odG1sCgogIH0sIHsKICAgIGtleTogJ2Zudm1peCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm52bWl4KGEpIHsKICAgICAgYSArPSBhIDw8IDEzOwogICAgICBhIF49IGEgPj4+IDc7CiAgICAgIGEgKz0gYSA8PCAzOwogICAgICBhIF49IGEgPj4+IDE3OwogICAgICBhICs9IGEgPDwgNTsKICAgICAgcmV0dXJuIGEgJiAweGZmZmZmZmZmOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEJsb29tRmlsdGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBCbG9vbUZpbHRlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxODQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogUmVwcmVzZW50cyB0aGUgdXNlcidzIGluZm9ybWF0aW9uIGZvciB0aGUgZ2xvYmFsIHJlZ2lzdHJ5LgoqIEBhdXRob3IgYmVpZXJsZUB0dS1iZXJsaW4uZGUKKi8KCnZhciBHbG9iYWxSZWdpc3RyeVJlY29yZCA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgICogQ29uc3RydWN0cyBhIG5ldyBlbXB0eSBvYmplY3QuCiAgICovCgogIGZ1bmN0aW9uIEdsb2JhbFJlZ2lzdHJ5UmVjb3JkKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdsb2JhbFJlZ2lzdHJ5UmVjb3JkKTsKCiAgICB0aGlzLmd1aWQ7CiAgICB0aGlzLnNhbHQ7CiAgICB0aGlzLnVzZXJJRHMgPSBbXTsKICAgIHRoaXMubGFzdFVwZGF0ZTsKICAgIHRoaXMudGltZW91dDsKICAgIHRoaXMucHVibGljS2V5OwogICAgdGhpcy5hY3RpdmU7CiAgICB0aGlzLnJldm9rZWQ7CiAgfQoKICAvKioKICAgKiBDb25zdHJ1Y3RzIGEgbmV3IG9iamVjdCByZXByZXNlbnRpbmcgaW5mb3JtYXRpb24gYWJvdXQgb25lIGNvbnRhY3QuCiAgICogQHJldHVybnMge09iamVjdH0gIG9iamVjdCAgQSBKYXZhU2NyaXB0IE9iamVjdCB3aXRoIGFsbCBmaWVsZHMgZm9yIHRoZSBHbG9iYWwgUmVnaXN0cnkgUmVjb3JkLgogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEdsb2JhbFJlZ2lzdHJ5UmVjb3JkLCBbewogICAga2V5OiAiZ2V0UmVjb3JkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWNvcmQoKSB7CgogICAgICAvLyBUT0RPOiBnaXZlIGVycm9yIGlmIGZpZWxkcyBhcmUgbWlzc2luZwoKICAgICAgdmFyIHJlY29yZCA9IG5ldyBPYmplY3QoKTsKICAgICAgcmVjb3JkLmd1aWQgPSB0aGlzLmd1aWQ7CiAgICAgIHJlY29yZC5zYWx0ID0gdGhpcy5zYWx0OwogICAgICByZWNvcmQudXNlcklEcyA9IHRoaXMudXNlcklkczsKICAgICAgcmVjb3JkLmxhc3RVcGRhdGUgPSB0aGlzLmxhc3RVcGRhdGU7CiAgICAgIHJlY29yZC50aW1lb3V0ID0gdGhpcy50aW1lb3V0OwogICAgICByZWNvcmQucHVibGljS2V5ID0gdGhpcy5wdWJsaWNLZXk7CiAgICAgIHJlY29yZC5hY3RpdmUgPSB0aGlzLmFjdGl2ZTsKICAgICAgcmVjb3JkLnJldm9rZWQgPSB0aGlzLnJldm9rZWQ7CgogICAgICByZXR1cm4gcmVjb3JkOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdsb2JhbFJlZ2lzdHJ5UmVjb3JkOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBHbG9iYWxSZWdpc3RyeVJlY29yZDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxODU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKEJ1ZmZlcil7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKdmFyIF9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhID0gcmVxdWlyZSgnLi9HcmFwaENvbm5lY3RvckNvbnRhY3REYXRhJyk7Cgp2YXIgX0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSk7Cgp2YXIgX0Jsb29tRmlsdGVyID0gcmVxdWlyZSgnLi9CbG9vbUZpbHRlcicpOwoKdmFyIF9CbG9vbUZpbHRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9CbG9vbUZpbHRlcik7Cgp2YXIgX0dsb2JhbFJlZ2lzdHJ5UmVjb3JkID0gcmVxdWlyZSgnLi9HbG9iYWxSZWdpc3RyeVJlY29yZCcpOwoKdmFyIF9HbG9iYWxSZWdpc3RyeVJlY29yZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9HbG9iYWxSZWdpc3RyeVJlY29yZCk7Cgp2YXIgX2JpdGNvaW5qc0xpYiA9IHJlcXVpcmUoJ2JpdGNvaW5qcy1saWInKTsKCnZhciBfYml0Y29pbmpzTGliMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpdGNvaW5qc0xpYik7Cgp2YXIgX2JpcCA9IHJlcXVpcmUoJ2JpcDM5Jyk7Cgp2YXIgX2JpcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaXApOwoKdmFyIF9zamNsID0gcmVxdWlyZSgnc2pjbCcpOwoKdmFyIF9zamNsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NqY2wpOwoKdmFyIF9qc3JzYXNpZ24gPSByZXF1aXJlKCdqc3JzYXNpZ24nKTsKCnZhciBfanNyc2FzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2pzcnNhc2lnbik7Cgp2YXIgX2Jhc2U2NFVybCA9IHJlcXVpcmUoJ2Jhc2U2NC11cmwnKTsKCnZhciBfYmFzZTY0VXJsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2U2NFVybCk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKKiBUaGUgR3JhcGggQ29ubmVjdG9yIGNvbnRhaW5zIHRoZSBjb250YWN0IGxpc3QvYWRkcmVzcyBib29rLgoqIEBhdXRob3IgYmVpZXJsZUB0dS1iZXJsaW4uZGUKKi8KCnZhciBHcmFwaENvbm5lY3RvciA9IGZ1bmN0aW9uICgpIHsKCiAgLy8gVE9ETzogaW1wb3J0IC8gZXhwb3J0IG1ldGhvZHMKCiAgLyoqCiAgICogQ29uc3RydWN0cyBhIG5ldyBhbmQgZW1wdHkgR3JhcGggQ29ubmVjdG9yLgogICAqIEBwYXJhbSB7c3RyaW5nfSAgIEh5cGVydHlSdW50aW1lVVJMICAgIFRoZSBIeXBlcnR5IFJ1bnRpbWUgVVJMLgogICAqIEBwYXJhbSB7bWVzc2FnZUJ1c30gICAgTWVzc2FnZUJ1cyAgICAgIFRoZSBNZXNzYWdlIEJ1cy4KICAgKi8KCiAgZnVuY3Rpb24gR3JhcGhDb25uZWN0b3IoaHlwZXJ0eVJ1bnRpbWVVUkwsIG1lc3NhZ2VCdXMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHcmFwaENvbm5lY3Rvcik7CgogICAgdGhpcy5jb250YWN0cyA9IFtdOwogICAgdGhpcy5sYXN0Q2FsY3VsYXRpb25CbG9vbUZpbHRlcjFIb3AgPSBuZXcgRGF0ZSgwKS50b0lTT1N0cmluZygpOwoKICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQgPSBuZXcgX0dsb2JhbFJlZ2lzdHJ5UmVjb3JkMi5kZWZhdWx0KCk7CiAgICB0aGlzLl9wcnZLZXk7CgogICAgdGhpcy5ncm91cHMgPSBbXTsKICAgIHRoaXMucmVzaWRlbmNlTG9jYXRpb247CiAgICB0aGlzLmZpcnN0TmFtZTsKICAgIHRoaXMubGFzdE5hbWU7CgogICAgdGhpcy5fbWVzc2FnZUJ1cyA9IG1lc3NhZ2VCdXM7CiAgICB0aGlzLl9oeXBlcnR5UnVudGltZVVSTCA9IGh5cGVydHlSdW50aW1lVVJMOwogIH0KCiAgLyoqCiAgKiBSZXR1cm5zIHRoZSBNZXNzYWdlQnVzLgogICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cyAgICBUaGUgTWVzc2FnZSBCdXMuCiAgKi8KCgogIF9jcmVhdGVDbGFzcyhHcmFwaENvbm5lY3RvciwgW3sKICAgIGtleTogJ2dlbmVyYXRlR1VJRCcsCgoKICAgIC8qKgogICAgICogR2VuZXJhdGVzIGEgR1VJRCBhbmQgcmV0dXJucyBhIG1uZW1vbmljIGZyb20gd2hpY2ggdGhlIEdVSUQgY2FuIGJlIHJlLWNyZWF0ZWQgbGF0ZXIuCiAgICAgKiBAcmV0dXJucyAge3N0cmluZ30gICAgbW5lbW9uaWMgICAgICBBIHN0cmluZyB3aXRoIDE2IHdvcmRzLgogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVHVUlEKCkgewoKICAgICAgLy8gZ2VuZXJhdGUgbW5lbW9uaWMgYW5kIHNhbHQKICAgICAgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSB0cnVlOwogICAgICB2YXIgbW5lbW9uaWMgPSBfYmlwMi5kZWZhdWx0LmdlbmVyYXRlTW5lbW9uaWMoMTYwKTsKCiAgICAgIHZhciBzYWx0V29yZCA9IF9iaXAyLmRlZmF1bHQuZ2VuZXJhdGVNbmVtb25pYyg4KTsKICAgICAgdGhpcy5fY3JlYXRlS2V5cyhtbmVtb25pYywgc2FsdFdvcmQpOwoKICAgICAgLy8gc2V0IGxhc1VwZGF0ZSBkYXRlCiAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQubGFzdFVwZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKCiAgICAgIC8vIHNldCBkZWZ1YWx0IHRpbWVvdXQKICAgICAgdmFyIHRpbWVvdXQgPSBuZXcgRGF0ZSgpOwogICAgICB0aW1lb3V0LnNldE1vbnRoKHRpbWVvdXQuZ2V0TW9udGgoKSArIDEyMCk7CiAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudGltZW91dCA9IHRpbWVvdXQudG9JU09TdHJpbmcoKTsKCiAgICAgIC8vIHNldCBkZWZhdWx0IHZhbHVlcwogICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmFjdGl2ZSA9IDE7CiAgICAgIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQucmV2b2tlZCA9IDA7CgogICAgICAvLyByZXR1cm4gbW5lbW9uaWMKICAgICAgdmFyIHJ0biA9IG1uZW1vbmljICsgJyAnICsgc2FsdFdvcmQ7CiAgICAgIHJldHVybiBydG47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZXMgYSBwdWJsaWMvcHJpdmF0ZSBrZXkgcGFpciBmcm9tIGEgZ2l2ZW4gbW5lbW9uaWMgKDE2IHdvcmRzKS4KICAgICAqIEV4cGVjdHMgYSBzdHJpbmcgY29udGFpbmluZyAxNiB3b3JkcyBzZXBlcmF0ZWQgYnkgc2luZ2xlIHNwYWNlcy4KICAgICAqIFJldHJpZXZlcyBkYXRhIGZyb20gdGhlIEdsb2JhbCBSZWdpc3RyeS4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIG1uZW1vbmljQW5kU2FsdCAgICAgQSBzdHJpbmcgb2YgMTYgd29yZHMuCiAgICAgKiBAcmV0dXJucyAge1Byb21pc2V9ICBQcm9taXNlICAgICAgICAgIEdsb2JhbCBSZWdpc3RyeSBSZWNvcmQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAndXNlR1VJRCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXNlR1VJRChtbmVtb25pY0FuZFNhbHQpIHsKICAgICAgLy8gVE9ETzogY2hlY2sgaWYgZm9ybWF0IGlzIGNvcnJlY3QgYW5kIGlmIGFsbCB3b3JkcyBhcmUgZnJvbSBiaXAzOSBlbmdsaXNoIHdvcmRsaXN0CiAgICAgIHZhciBsYXN0SW5kZXggPSBtbmVtb25pY0FuZFNhbHQubGFzdEluZGV4T2YoJyAnKTsKICAgICAgdmFyIG1uZW1vbmljID0gbW5lbW9uaWNBbmRTYWx0LnN1YnN0cmluZygwLCBsYXN0SW5kZXgpOwogICAgICB2YXIgc2FsdFdvcmQgPSBtbmVtb25pY0FuZFNhbHQuc3Vic3RyaW5nKGxhc3RJbmRleCArIDEsIG1uZW1vbmljQW5kU2FsdC5sZW5ndGgpOwogICAgICB0aGlzLl9jcmVhdGVLZXlzKG1uZW1vbmljLCBzYWx0V29yZCk7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gcmV0cmlldmUgY3VycmVudCBpbmZvIGZyb20gR2xvYmFsIFJlZ2lzdHJ5IGFuZCBmaWxsIHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAnUkVBRCcsCiAgICAgICAgZnJvbTogdGhpcy5faHlwZXJ0eVJ1bnRpbWVVUkwgKyAnL2dyYXBoLWNvbm5lY3RvcicsCiAgICAgICAgdG86ICdnbG9iYWw6Ly9yZWdpc3RyeS8nLAogICAgICAgIGJvZHk6IHsgZ3VpZDogdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5ndWlkIH0KICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGlmIChfdGhpcy5tZXNzYWdlQnVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgnTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gR3JhcGhDb25uZWN0b3InKTsKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKCiAgICAgICAgICAgIC8vIHJlcGx5IHNob3VsZCBiZSB0aGUgSlNPTiByZXR1cm5lZCBmcm9tIHRoZSBHbG9iYWwgUmVnaXN0cnkgUkVTVC1pbnRlcmZhY2UKICAgICAgICAgICAgdmFyIHVud3JhcHBlZEpXVCA9IEtKVVIuandzLkpXUy5wYXJzZShyZXBseS5ib2R5LmRhdGEpOwogICAgICAgICAgICB2YXIgZGF0YUVuY29kZWQgPSB1bndyYXBwZWRKV1QucGF5bG9hZE9iai5kYXRhOwogICAgICAgICAgICB2YXIgZGF0YURlY29kZWQgPSBfYmFzZTY0VXJsMi5kZWZhdWx0LmRlY29kZShkYXRhRW5jb2RlZCk7CiAgICAgICAgICAgIHZhciBkYXRhSlNPTiA9IEpTT04ucGFyc2UoZGF0YURlY29kZWQpOwoKICAgICAgICAgICAgLy8gcHVibGljIGtleSBzaG91bGQgbWF0Y2gKICAgICAgICAgICAgdmFyIHNhbWVLZXkgPSBkYXRhSlNPTi5wdWJsaWNLZXkgPT0gX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQucHVibGljS2V5OwogICAgICAgICAgICBpZiAoIXNhbWVLZXkpIHsKICAgICAgICAgICAgICByZWplY3QoJ1JldHJpZXZlZCBrZXkgZG9lcyBub3QgbWF0Y2ghJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIHB1YmxpY0tleU9iamVjdCA9IF9qc3JzYXNpZ24yLmRlZmF1bHQuS0VZVVRJTC5nZXRLZXkoZGF0YUpTT04ucHVibGljS2V5KTsKICAgICAgICAgICAgICB2YXIgaXNWYWxpZCA9IEtKVVIuandzLkpXUy52ZXJpZnkocmVwbHkuYm9keS5kYXRhLCBwdWJsaWNLZXlPYmplY3QsIFsnRVMyNTYnXSk7CiAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7CiAgICAgICAgICAgICAgICByZWplY3QoJ1JldHJpZXZlZCBSZWNvcmQgbm90IHZhbGlkIScpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFKU09OLnVzZXJJRHMgIT0gJ3VuZGVmaW5lZCcgJiYgZGF0YUpTT04udXNlcklEcyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnVzZXJJRHMgPSBkYXRhSlNPTi51c2VySURzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQubGFzdFVwZGF0ZSA9IGRhdGFKU09OLmxhc3RVcGRhdGU7CiAgICAgICAgICAgICAgICBfdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC50aW1lb3V0ID0gZGF0YUpTT04udGltZW91dDsKICAgICAgICAgICAgICAgIF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnNhbHQgPSBkYXRhSlNPTi5zYWx0OwogICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuYWN0aXZlID0gZGF0YUpTT04uYWN0aXZlOwogICAgICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQucmV2b2tlZCA9IGRhdGFKU09OLnJldm9rZWQ7CiAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIHRoZSBrZXlzIGZyb20gbW5lbW9uaWMgYW5kIHNhbHQuIEFsc28gc2V0cyBwdWJsaWMga2V5LCBndWlkLCBhbmQgc2FsdCBmb3IgZ2xvYmFsUmVnaXN0cnlSZWNvcmQuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICBtbmVtb25pYyAgICAgQSBzdHJpbmcgd2l0aCAxNSB3b3Jkcy4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIHNhbHQgICAgICAgICBBIHdvcmQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnX2NyZWF0ZUtleXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVLZXlzKG1uZW1vbmljLCBzYWx0V29yZCkgewoKICAgICAgLy8gZ2VuZXJhdGUga2V5IHBhaXIKICAgICAgdmFyIHNlZWQgPSBfYmlwMi5kZWZhdWx0Lm1uZW1vbmljVG9TZWVkKG1uZW1vbmljKTsKICAgICAgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBmYWxzZTsKICAgICAgdmFyIGhkbm9kZSA9IF9iaXRjb2luanNMaWIyLmRlZmF1bHQuSEROb2RlLmZyb21TZWVkQnVmZmVyKHNlZWQpOwogICAgICB2YXIgZWNwYXJhbXMgPSBLSlVSLmNyeXB0by5FQ1BhcmFtZXRlckRCLmdldEJ5TmFtZSgnc2VjcDI1NmsxJyk7CiAgICAgIHZhciBiaVBydiA9IGhkbm9kZS5rZXlQYWlyLmQ7IC8vIHByaXZhdGUga2V5IGJpZyBpbnRlZ2VyCiAgICAgIHZhciBlcFB1YiA9IGVjcGFyYW1zLkcubXVsdGlwbHkoYmlQcnYpOyAvLyBkKkcKICAgICAgdmFyIGJpWCA9IGVwUHViLmdldFgoKS50b0JpZ0ludGVnZXIoKTsgLy8geCBmcm9tIFEKICAgICAgdmFyIGJpWSA9IGVwUHViLmdldFkoKS50b0JpZ0ludGVnZXIoKTsgLy8geSBmcm9tIFEKICAgICAgdmFyIGNoYXJsZW4gPSBlY3BhcmFtcy5rZXlsZW4gLyA0OwogICAgICB2YXIgaFBydiA9ICgnMDAwMDAwMDAwMCcgKyBiaVBydi50b1N0cmluZygxNikpLnNsaWNlKC1jaGFybGVuKTsKICAgICAgdmFyIGhYID0gKCcwMDAwMDAwMDAwJyArIGJpWC50b1N0cmluZygxNikpLnNsaWNlKC1jaGFybGVuKTsKICAgICAgdmFyIGhZID0gKCcwMDAwMDAwMDAwJyArIGJpWS50b1N0cmluZygxNikpLnNsaWNlKC1jaGFybGVuKTsKICAgICAgdmFyIGhQdWIgPSAnMDQnICsgaFggKyBoWTsKICAgICAgdGhpcy5fcHJ2S2V5ID0gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHsgY3VydmU6ICdzZWNwMjU2azEnIH0pOwogICAgICB0aGlzLl9wcnZLZXkuc2V0UHJpdmF0ZUtleUhleChoUHJ2KTsKICAgICAgdGhpcy5fcHJ2S2V5LmlzUHJpdmF0ZSA9IHRydWU7CiAgICAgIHRoaXMuX3BydktleS5pc1B1YmxpYyA9IGZhbHNlOwogICAgICB2YXIgcHViS2V5ID0gbmV3IEtKVVIuY3J5cHRvLkVDRFNBKHsgY3VydmU6ICdzZWNwMjU2azEnIH0pOwogICAgICBwdWJLZXkuc2V0UHVibGljS2V5SGV4KGhQdWIpOwogICAgICBwdWJLZXkuaXNQcml2YXRlID0gZmFsc2U7CiAgICAgIHB1YktleS5pc1B1YmxpYyA9IHRydWU7CiAgICAgIHZhciBwdWJsaWNLZXkgPSBfanNyc2FzaWduMi5kZWZhdWx0LktFWVVUSUwuZ2V0UEVNKHB1YktleSwgJ1BLQ1M4UFVCJyk7CiAgICAgIHB1YmxpY0tleSA9IHB1YmxpY0tleS5yZXBsYWNlKC8oXHJcbnxcbnxccikvZ20sICcnKTsKICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5wdWJsaWNLZXkgPSBwdWJsaWNLZXk7CgogICAgICAvLyBnZW5lcmF0ZSBzYWx0CiAgICAgIHZhciBzYWx0SGFzaGVkQml0QXJyYXkgPSBfc2pjbDIuZGVmYXVsdC5oYXNoLnNoYTI1Ni5oYXNoKHNhbHRXb3JkKTsKICAgICAgdmFyIHNhbHQgPSBfc2pjbDIuZGVmYXVsdC5jb2RlYy5iYXNlNjQuZnJvbUJpdHMoc2FsdEhhc2hlZEJpdEFycmF5KTsKICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5zYWx0ID0gc2FsdDsKCiAgICAgIC8vIGdlbmVyYXRlIEdVSUQKICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAxMDAwMDsKICAgICAgdmFyIGd1aWRCaXRBcnJheSA9IF9zamNsMi5kZWZhdWx0Lm1pc2MucGJrZGYyKHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQucHVibGljS2V5LCBzYWx0LCBpdGVyYXRpb25zKTsKICAgICAgdmFyIGd1aWQgPSBfc2pjbDIuZGVmYXVsdC5jb2RlYy5iYXNlNjR1cmwuZnJvbUJpdHMoZ3VpZEJpdEFycmF5KTsKICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC5ndWlkID0gZ3VpZDsKICAgIH0KCiAgICAvKioKICAgICAqIFNpZ25HZW5lcmF0ZXMgYSBwdWJsaWMvcHJpdmF0ZSBrZXkgcGFpciBmcm9tIGEgZ2l2ZW4gbW5lbW9uaWMuCiAgICAgKiBAcmV0dXJucyAge3N0cmluZ30gICAgIEpXVCAgICAgSlNPTiBXZWIgVG9rZW4gcmVhZHkgdG8gY29tbWl0IHRvIEdsb2JhbCBSZWdpc3RyeS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzaWduR2xvYmFsUmVnaXN0cnlSZWNvcmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNpZ25HbG9iYWxSZWdpc3RyeVJlY29yZCgpIHsKCiAgICAgIHZhciByZWNvcmQgPSB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLmdldFJlY29yZCgpOwogICAgICB2YXIgcmVjb3JkU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocmVjb3JkKTsKICAgICAgdmFyIHJlY29yZFN0cmluZ0Jhc2U2NCA9IF9iYXNlNjRVcmwyLmRlZmF1bHQuZW5jb2RlKHJlY29yZFN0cmluZyk7CgogICAgICB2YXIgand0ID0gS0pVUi5qd3MuSldTLnNpZ24obnVsbCwgeyBhbGc6ICdFUzI1NicgfSwgeyBkYXRhOiByZWNvcmRTdHJpbmdCYXNlNjQgfSwgdGhpcy5fcHJ2S2V5KTsKICAgICAgcmV0dXJuIGp3dDsKICAgIH0KCiAgICAvKioKICAgICAqIFRha2VzIHRoZSBHbG9iYWwgUmVnaXN0cnkgUmVjb3JkIGFzIGEgc2lnbmVkIEpXVCBhbmQgc2VuZHMgaXQgdG8gdGhlIEdsb2JhbCBSZWdpc3RyeSB2aWEgdGhlIE1lc3NhZ2VCdXMuCiAgICAgKiBSZXR1cm5zIHRoZSByZXNwb25zZSBjb2RlIG9mIHRoZSBSRVNULWludGVyZmFjZSBvZiB0aGUgR2xvYmFsIFJlZ2lzdHJ5IGFzIGEgUHJvbWlzZS4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIGp3dCAgICAgVGhlIEdsb2JhbCBSZWdpc3RyeSBSZWNvcmQgYXMgYSBzaWduZWQgSldULgogICAgICogQHJldHVybnMge1Byb3BtaXNlfSAgUHJvbWlzZSBSZXNwb25zZSBDb2RlIGZyb20gR2xvYmFsIFJlZ2lzdHJ5LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ3NlbmRHbG9iYWxSZWdpc3RyeVJlY29yZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZEdsb2JhbFJlZ2lzdHJ5UmVjb3JkKGp3dCkgewoKICAgICAgdmFyIHBheWxvYWRPYmogPSBLSlVSLmp3cy5KV1MucGFyc2Uoand0KS5wYXlsb2FkT2JqOwogICAgICB2YXIgZ3VpZCA9IHBheWxvYWRPYmouZ3VpZDsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdDUkVBVEUnLAogICAgICAgIGZyb206IHRoaXMuX2h5cGVydHlSdW50aW1lVVJMICsgJy9ncmFwaC1jb25uZWN0b3InLAogICAgICAgIHRvOiAnZ2xvYmFsOi8vcmVnaXN0cnkvJywKICAgICAgICBib2R5OiB7IGd1aWQ6IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQuZ3VpZCwgand0OiBqd3QgfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgaWYgKF90aGlzLm1lc3NhZ2VCdXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiBHcmFwaENvbm5lY3RvcicpOwogICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgewoKICAgICAgICAgICAgdmFyIHJlc3BvbnNlQ29kZSA9IHJlcGx5LmJvZHkucmVzcG9uc2VDb2RlOwogICAgICAgICAgICBpZiAocmVzcG9uc2VDb2RlID09IDIwMCkgewogICAgICAgICAgICAgIHJlc29sdmUoMjAwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2VDb2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFF1ZXJpZXMgdGhlIEdsb2JhbCBSZWdpc3RyeSBmb3IgYSBnaXZlbiBHVUlELgogICAgICogUmV0dXJucyBhIEdyYXBoIENvbm5lY3RvciBDb250YWN0IERhdGEgYXMgYSBQcm9taXNlLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIGd1aWQgIFRoZSBHVUlEIHRvIHF1ZXJ5IHRoZSBHbG9iYWwgUmVnaXN0cnkgZm9yCiAgICAgKiBAcmV0dXJucyAgIHtQcm9taXNlfSAgIFByb21pc2UgICBHcmFwaCBDb25uZWN0b3IgQ29udGFjdCBEYXRhIGNvbnRhaW5pbmcgVXNlcklEcy4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdxdWVyeUdsb2JhbFJlZ2lzdHJ5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBxdWVyeUdsb2JhbFJlZ2lzdHJ5KGd1aWQpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdSRUFEJywKICAgICAgICBmcm9tOiB0aGlzLl9oeXBlcnR5UnVudGltZVVSTCArICcvZ3JhcGgtY29ubmVjdG9yJywKICAgICAgICB0bzogJ2dsb2JhbDovL3JlZ2lzdHJ5LycsCiAgICAgICAgYm9keTogeyBndWlkOiBndWlkIH0KICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGlmIChfdGhpcy5tZXNzYWdlQnVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgnTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gR3JhcGhDb25uZWN0b3InKTsKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKCiAgICAgICAgICAgIC8vIHJlcGx5IHNob3VsZCBiZSB0aGUgSlNPTiByZXR1cm5lZCBmcm9tIHRoZSBHbG9iYWwgUmVnaXN0cnkgUkVTVC1pbnRlcmZhY2UKICAgICAgICAgICAgdmFyIHVud3JhcHBlZEpXVCA9IEtKVVIuandzLkpXUy5wYXJzZShyZXBseS5ib2R5LmRhdGEpOwogICAgICAgICAgICB2YXIgZGF0YUVuY29kZWQgPSB1bndyYXBwZWRKV1QucGF5bG9hZE9iai5kYXRhOwogICAgICAgICAgICB2YXIgZGF0YURlY29kZWQgPSBfYmFzZTY0VXJsMi5kZWZhdWx0LmRlY29kZShkYXRhRW5jb2RlZCk7CiAgICAgICAgICAgIHZhciBkYXRhSlNPTiA9IEpTT04ucGFyc2UoZGF0YURlY29kZWQpOwoKICAgICAgICAgICAgdmFyIHB1YmxpY0tleU9iamVjdCA9IF9qc3JzYXNpZ24yLmRlZmF1bHQuS0VZVVRJTC5nZXRLZXkoZGF0YUpTT04ucHVibGljS2V5KTsKICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBLSlVSLmp3cy5KV1MudmVyaWZ5KHJlcGx5LmJvZHkuZGF0YSwgcHVibGljS2V5T2JqZWN0LCBbJ0VTMjU2J10pOwogICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHsKICAgICAgICAgICAgICByZWplY3QoJ1JldHJpZXZlZCBSZWNvcmQgbm90IHZhbGlkIScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBxdWVyaWVkQ29udGFjdCA9IG5ldyBfR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YTIuZGVmYXVsdChkYXRhSlNPTi5ndWlkLCAnJywgJycpOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YUpTT04udXNlcklEcyAhPSAndW5kZWZpbmVkJyAmJiBkYXRhSlNPTi51c2VySURzICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHF1ZXJpZWRDb250YWN0LnVzZXJJRHMgPSBkYXRhSlNPTi51c2VySURzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXNvbHZlKHF1ZXJpZWRDb250YWN0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZHMgYSBVc2VySUQgZm9yIHRoZSB1c2VyLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgdXNlcklEICAgICAgICAgIFRoZSBVc2VySUQgZm9yIGEgRG9tYWluIFJlZ2lzdHJ5IHRvIGFkZCBmb3IgdGhlIHVzZXIuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkVXNlcklEJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRVc2VySUQodXNlcklEKSB7CiAgICAgIC8vIGNoZWNrIGlmIGFscmVhZHkgaW5zaWRlCiAgICAgIHZhciBmb3VuZCA9IGZhbHNlOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ2xvYmFsUmVnaXN0cnlSZWNvcmQudXNlcklEcy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnVzZXJJRHMgPT0gdXNlcklEKSB7CiAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghZm91bmQpIHsKICAgICAgICB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnVzZXJJRHMucHVzaCh1c2VySUQpOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmVzIGEgVXNlcklEIGZvciB0aGUgdXNlci4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIHVzZXJJRCAgICAgICAgICBUaGUgVXNlcklEIHRvIHJlbW92ZS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZW1vdmVVc2VySUQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVVzZXJJRCh1c2VySUQpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdsb2JhbFJlZ2lzdHJ5UmVjb3JkLnVzZXJJRHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzID09IHVzZXJJRCkgewogICAgICAgICAgdGhpcy5nbG9iYWxSZWdpc3RyeVJlY29yZC51c2VySURzLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhIGNvbnRhY3QgdG8gdGhlIEdyYXBoIENvbm5lY3Rvci4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICBndWlkICAgICAgICAgIEdVSUQgb2YgdGhlIG5ldyBjb250YWN0LgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIGZpcnN0TmFtZSAgICAgRmlyc3QgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgbGFzdG5hbWUgICAgICBMYXN0IG5hbWUgb2YgdGhlIG5ldyBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZENvbnRhY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENvbnRhY3QoZ3VpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSkgewoKICAgICAgLy8gVE9ETzogd2hhdCBpZiB0d28gY29udGFjdHMgaGF2ZSB0aGUgc2FtZSBHVUlEPwogICAgICAvLyBUT0RPOiByZWplY3QgaW52YWxpZCBHVUlEcwoKICAgICAgdGhpcy5jb250YWN0cy5wdXNoKG5ldyBfR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YTIuZGVmYXVsdChndWlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgYSBjb250YWN0IGZyb20gdGhlIEdyYXBoIENvbm5lY3Rvci4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIGd1aWQgICAgICBHVUlEIG9mIHRoZSB1c2VyIHRvIGJlIHJlbW92ZWQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVtb3ZlQ29udGFjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQ29udGFjdChndWlkKSB7CiAgICAgIC8vIHJlbW92ZSBmcm9tIGNvbnRhY3RzCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250YWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmNvbnRhY3RzW2ldLmd1aWQgPT0gZ3VpZCkgewogICAgICAgICAgdGhpcy5jb250YWN0cy5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyByZS1jYWxjdWxhdGUgQkYxaG9wCiAgICAgIHRoaXMuY2FsY3VsYXRlQmxvb21GaWx0ZXIxSG9wKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxjdWxhdGVzIHRoZSBCbG9vbSBmaWx0ZXIgY29udGFpbmluZyBhbGwgbm9uLXByaXZhdGUgY29udGFjdHMuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnY2FsY3VsYXRlQmxvb21GaWx0ZXIxSG9wJywKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGVCbG9vbUZpbHRlcjFIb3AoKSB7CiAgICAgIHZhciBiZiA9IG5ldyBfQmxvb21GaWx0ZXIyLmRlZmF1bHQoNDMxMzI4LCAvLyBudW1iZXIgb2YgYml0cyB0byBhbGxvY2F0ZS4gV2l0aCAzMDAwMCBlbnRyaWVzLCB3ZSBoYXZlIGEgZmFsc2UgcG9zaXRpdmUgcmF0ZSBvZiAwLjEgJS4KICAgICAgMTAgLy8gbnVtYmVyIG9mIGhhc2ggZnVuY3Rpb25zLgogICAgICApOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoIXRoaXMuY29udGFjdHNbaV0ucHJpdmF0ZUNvbnRhY3QpIHsKICAgICAgICAgIGJmLmFkZCh0aGlzLmNvbnRhY3RzW2ldLmd1aWQpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmNvbnRhY3RzQmxvb21GaWx0ZXIxSG9wID0gYmY7CiAgICAgIHRoaXMubGFzdENhbGN1bGF0aW9uQmxvb21GaWx0ZXIxSG9wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0cyBjb250YWN0cyBieSBuYW1lLgogICAgICogQHBhcmFtICB7c3RyaW5nfSAgIG5hbWUgICAgRmlyc3Qgb3IgbGFzdCBuYW1lIHRvIGxvb2sgZm9yIGluIHRoZSBjb250YWN0IGxpc3QuCiAgICAgKiBAcmV0dXJucyAge2FycmF5fSAgIG1hdGNoaW5nQ29udGFjdHMgICAgICAgQ29udGFjdHMgbWF0Y2hpbmcgdGhlIGdpdmVuIG5hbWUuIFRoZSBmb3JtYXQgaXM6IENvbnRhY3RzPEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGE+LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2dldENvbnRhY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbnRhY3QobmFtZSkgewogICAgICAvLyBUT0RPOiBvcHRpbWl6ZSwgZS5nLiwgZmluZCBtaXNzcGVsbGVkIHBlb3BsZQogICAgICB2YXIgcnRuQXJyYXkgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuY29udGFjdHNbaV0uZmlyc3ROYW1lID09IG5hbWUgfHwgdGhpcy5jb250YWN0c1tpXS5sYXN0TmFtZSA9PSBuYW1lKSB7CiAgICAgICAgICBydG5BcnJheS5wdXNoKHRoaXMuY29udGFjdHNbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcnRuQXJyYXk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVja3MsIGlmIHRoZSBnaXZlbiBHVUlEIGlzIGtub3duIGFuZCByZXR1cm5zIGEgbGlzdCBvZiBjb250YWNzIHRoYXQgYXJlIGRpcmVjdCBjb25uZWN0aW9ucyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBjb250YWN0cyB0aGF0IChtb3N0IGxpa2VseSkga25vdyB0aGUgZ2l2ZW4gY29udGFjdC4KICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgIGd1aWQgICAgICBHVUlEIG9mIHRoZSBjb250YWN0IHRvIGxvb2sgZm9yLgogICAgICogQHJldHVybnMgIHthcnJheX0gICAgcmVsYXRlZENvbnRhY3RzICAgICBMaXN0IG9mIHJlbGF0ZWQgZGlyZWN0IGNvbnRhY3RzIGFuZCBvZiByZWxhdGVkIGZyaWVuZHMtb2YtZnJpZW5kcyBjb250YWN0cy5UaGUgZm9ybWF0IGlzOiBSZWxhdGVkQ29udGFjdHM8RGlyZWN0PEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGE+LEZvRjxHcmFwaENvbm5lY3RvckNvbnRhY3REYXRhPj4uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnY2hlY2tHVUlEJywKICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0dVSUQoZ3VpZCkgewogICAgICB2YXIgZGlyZWN0Q29udGFjdHNBcnJheSA9IFtdOwogICAgICB2YXIgZm9mQ29udGFjdHNBcnJheSA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGFjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5jb250YWN0c1tpXS5ndWlkID09IGd1aWQpIHsKICAgICAgICAgIGRpcmVjdENvbnRhY3RzQXJyYXkucHVzaCh0aGlzLmNvbnRhY3RzW2ldKTsKICAgICAgICB9CiAgICAgICAgdmFyIGJmMWhvcCA9IHRoaXMuY29udGFjdHNbaV0uY29udGFjdHNCbG9vbUZpbHRlcjFIb3A7CiAgICAgICAgaWYgKGJmMWhvcCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBpZiAoYmYxaG9wLnRlc3QoZ3VpZCkpIHsKICAgICAgICAgICAgZm9mQ29udGFjdHNBcnJheS5wdXNoKHRoaXMuY29udGFjdHNbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgcnRuQXJyYXkgPSBbXTsKICAgICAgcnRuQXJyYXkucHVzaChkaXJlY3RDb250YWN0c0FycmF5LCBmb2ZDb250YWN0c0FycmF5KTsKICAgICAgcmV0dXJuIHJ0bkFycmF5OwogICAgfQoKICAgIC8vIFRPRE86IGV4cG9ydEdyYXBoRGF0YSg/KXt9CiAgICAvLyBUT0RPOiBpbXBvcnRHcmFwaERhdGEoPyl7fQoKICB9LCB7CiAgICBrZXk6ICdtZXNzYWdlQnVzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fbWVzc2FnZUJ1czsKICAgIH0KCiAgICAvKioKICAgICogU2V0cyB0aGUgTWVzc2FnZUJ1cy4KICAgICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cyAgICBUaGUgTWVzc2FnZSBCdXMuCiAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQobWVzc2FnZUJ1cykgewogICAgICB0aGlzLl9tZXNzYWdlQnVzID0gbWVzc2FnZUJ1czsKICAgIH0KICB9XSk7CgogIHJldHVybiBHcmFwaENvbm5lY3RvcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gR3JhcGhDb25uZWN0b3I7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSkuY2FsbCh0aGlzLHJlcXVpcmUoImJ1ZmZlciIpLkJ1ZmZlcikKfSx7Ii4vQmxvb21GaWx0ZXIiOjE4MywiLi9HbG9iYWxSZWdpc3RyeVJlY29yZCI6MTg0LCIuL0dyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEiOjE4NiwiYmFzZTY0LXVybCI6MTYsImJpcDM5IjoyMSwiYml0Y29pbmpzLWxpYiI6MzIsImJ1ZmZlciI6NzAsImpzcnNhc2lnbiI6MTMyLCJzamNsIjoxNzB9XSwxODY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiogUmVwcmVzZW50cyBpbmZvcm1hdGlvbiBhYm91dCBhIGNvbnRhY3QuCiogQGF1dGhvciBiZWllcmxlQHR1LWJlcmxpbi5kZQoqLwoKdmFyIEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEgPSBmdW5jdGlvbiAoKSB7CgogIC8qKgogICAqIENvbnN0cnVjdHMgYSBuZXcgb2JqZWN0IHJlcHJlc2VudGluZyBpbmZvcm1hdGlvbiBhYm91dCBvbmUgY29udGFjdC4KICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBndWlkICAgICAgICBUaGUgR1VJRCBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICogQHBhcmFtICB7U3RyaW5nfSAgIGZpcnN0TmFtZSAgIFRoZSBmaXJzdCBuYW1lIG9mIHRoZSBuZXcgY29udGFjdC4KICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgbGFzdE5hbWUgICAgVGhlIGxhc3QgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuCiAgICovCgogIGZ1bmN0aW9uIEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEoZ3VpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEpOwoKICAgIHRoaXMuX2d1aWQgPSBndWlkOwogICAgdGhpcy5fdXNlcklEcyA9IFtdOwogICAgdGhpcy5fZmlyc3ROYW1lID0gZmlyc3ROYW1lOwogICAgdGhpcy5fbGFzdE5hbWUgPSBsYXN0TmFtZTsKICAgIHRoaXMuX3ByaXZhdGVDb250YWN0ID0gZmFsc2U7CiAgICB0aGlzLl9sYXN0U3luY0Jsb29tRmlsdGVyMUhvcCA9IG5ldyBEYXRlKDApLnRvSVNPU3RyaW5nKCk7CiAgICB0aGlzLl9sYXN0U3luY0RvbWFpblVzZXJJRHMgPSBuZXcgRGF0ZSgwKS50b0lTT1N0cmluZygpOwogICAgdGhpcy5fcmVzaWRlbmNlTG9jYXRpb247CiAgICB0aGlzLl9ncm91cHMgPSBbXTsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIEdVSUQuCiAgICogQHJldHVybnMgIHtTdHJpbmd9ICAgICBHVUlEICAgICAgICBHVUlEIG9mIHRoZSBjb250YWN0LgogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEsIFt7CiAgICBrZXk6ICJndWlkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZ3VpZDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIEdVSUQuCiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBHVUlEICAgICAgICBHVUlEIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGd1aWQpIHsKICAgICAgdGhpcy5fZ3VpZCA9IGd1aWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB1c2VyIElEcy4KICAgICAqIEByZXR1cm5zICB7TGlzdDxTdHJpbmc+fSAgICAgdXNlcklEcyAgICAgICAgVXNlcklEcyBvZiB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJ1c2VySURzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXNlcklEczsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIHVzZXJJRHMuCiAgICAgKiBAcGFyYW0gIHtMaXN0PFN0cmluZz59ICAgICB1c2VySURzICAgICAgICBVc2VySURzIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KHVzZXJJRHMpIHsKICAgICAgdGhpcy5fdXNlcklEcyA9IHVzZXJJRHM7CiAgICAgIHRoaXMuX2xhc3RTeW5jRG9tYWluVXNlcklEcyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGZpcnN0IG5hbWUuCiAgICAgKiBAcmV0dXJucyAge1N0cmluZ30gICAgIGZpcnN0TmFtZSAgICAgICAgRmlyc3QgbmFtZSBvZiB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJmaXJzdE5hbWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9maXJzdE5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBmaXJzdCBuYW1lLgogICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgZmlyc3ROYW1lICAgICAgICBGaXJzdCBuYW1lIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGZpcnN0TmFtZSkgewogICAgICB0aGlzLl9maXJzdE5hbWUgPSBmaXJzdE5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IG5hbWUuCiAgICAgKiBAcmV0dXJucyAge1N0cmluZ30gICAgIGxhc3ROYW1lICAgICAgICBMYXN0IG5hbWUgb2YgdGhlIGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAibGFzdE5hbWUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9sYXN0TmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGxhc3QgbmFtZS4KICAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgIGxhc3ROYW1lICAgICAgICBMYXN0IG5hbWUgb2YgdGhlIGNvbnRhdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQobGFzdE5hbWUpIHsKICAgICAgdGhpcy5fbGFzdE5hbWUgPSBsYXN0TmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHByaXZhY3kgc3RhdHVzIG9mIHRoZSBjb250YWN0LgogICAgICogQHJldHVybnMgIHtCb29sZWFufSAgICAgcHJpdmF0ZUNvbnRhY3QgICAgICAgIFRydWUvZmFsc2UgdmFsdWUgaW5kaWNhdGluZyB0aGUgcHJpdmFjeSBzdGF0dXMgb2YgdGhlIGNvbnRhY3QuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicHJpdmF0ZUNvbnRhY3QiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9wcml2YXRlQ29udGFjdDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIHByaXZhY3kgc3RhdHVzIG9mIHRoZSBjb250YWN0IGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gQm9vbGVhbiB2YWx1ZS4KICAgICAqIEBwYXJhbSAge0Jvb2xlYW59ICAgICBib29sUHJpdmF0ZSAgICAgICAgVHJ1ZS9mYWxzZSB2YWx1ZSBpbmRpY2F0aW5nIHRoZSBwcml2YWN5IHN0YXR1cyBvZiB0aGUgY29udGFjdC4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoYm9vbFByaXZhdGUpIHsKICAgICAgdGhpcy5fcHJpdmF0ZUNvbnRhY3QgPSBib29sUHJpdmF0ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIEJsb29tIGZpbHRlciBjb250YWluaW5nIHRoZSBoYXNoZWQgR1VJRHMgb2YgdGhlIGNvbnRhY3RzIGZvciB0aGUgY29udGFjdC4KICAgICAqIEByZXR1cm5zICB7Qmxvb21GaWx0ZXJ9ICAgICBiZiAgICAgICAgQmxvb20gZmlsdGVyIGZvciB0aGUgY29udGFjdC4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjb250YWN0c0Jsb29tRmlsdGVyMUhvcCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhY3RzQmxvb21GaWx0ZXIxSG9wOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgZnJpZW5kcy1vZi1mcmllbmRzIEJsb29tIGZpbHRlciBjb250YWluaW5nIHRoZSBoYXNoZWQgR1VJRHMgb2YgdGhlIGNvbnRhY3RzIGZvciB0aGUgY29udGFjdC4KICAgICAqIEBwYXJhbSAge0Jsb29tRmlsdGVyfSAgICAgYmYgICAgICAgIEJsb29tIGZpbHRlciBmb3IgdGhlIGNvbnRhY3QuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGJmKSB7CiAgICAgIHRoaXMuX2NvbnRhY3RzQmxvb21GaWx0ZXIxSG9wID0gYmY7CiAgICAgIHRoaXMuX2xhc3RTeW5jQmxvb21GaWx0ZXIxSG9wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZ2VvaGFzaCBvZiB0aGUgcmVzaWRlbmNlIGxvY2F0aW9uLgogICAgICogQHJldHVybnMgIHtTdHJpbmd9ICAgICBnZW9oYXNoICAgICAgICBHZW9oYXNoIG9mIHRoZSByZXNpZGVuY2UgbG9jYXRpb24uCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAicmVzaWRlbmNlTG9jYXRpb24iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZXNpZGVuY2VMb2NhdGlvbjsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGdlb2hhc2ggb2YgdGhlIHJlc2lkZW5jZSBsb2NhdGlvbi4KICAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgIGdlb2hhc2ggICAgICAgIEdlb2hhc2ggb2YgdGhlIHJlc2lkZW5jZSBsb2NhdGlvbi4KICAgICAqLwogICAgLAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZ2VvaGFzaCkgewogICAgICB0aGlzLl9yZXNpZGVuY2VMb2NhdGlvbiA9IGdlb2hhc2g7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBncm91cHMuCiAgICAgKiBAcmV0dXJucyAge0xpc3Q8U3RyaW5nPn0gICAgIGdyb3VwcyAgICAgICAgR3JvdXBzIG9mIHRoZSBjb250YWN0LgogICAgICovCgogIH0sIHsKICAgIGtleTogImdyb3VwcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwczsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGdyb3Vwcy4KICAgICAqIEBwYXJhbSAge0xpc3Q8U3RyaW5nPn0gICAgIGdyb3VwcyAgICAgICAgR3JvdXBzIG9mIHRoZSBjb250YXQuCiAgICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KGdyb3VwcykgewogICAgICB0aGlzLl9ncm91cHMgPSBncm91cHM7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YTsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gR3JhcGhDb25uZWN0b3JDb250YWN0RGF0YTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxODc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfaGVsbG9qcyA9IHJlcXVpcmUoJ2hlbGxvanMnKTsKCnZhciBfaGVsbG9qczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oZWxsb2pzKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqCiogVGhlIElkZW50aXR5IE1vZHVsZSAoSWQgTW9kdWxlKSBpcyB0aGUgY29tcG9uZW50IHJlc3BvbnNpYmxlIGZvciBoYW5kbGluZyB0aGUKKiB1c2VyIGlkZW50aXR5IGFuZCB0aGUgYXNzb2NpYXRpb24gb2YgdGhpcyBpZGVudGl0eSB3aXRoIHRoZSBIeXBlcnR5IGluc3RhbmNlcywKKiBpbiBvcmRlciB0byBtYWtlIEh5cGVydHkgaW5zdGFuY2VzIGlkZW50aWZpYWJsZS4gVGhlIGlkZW50aXR5IGluIHRoZSByZVRISU5LIHByb2plY3QKKiBpcyBub3QgZml4ZWQgdG8gYSB1bmlxdWUgSWRlbnRpdHkgU2VydmljZSBQcm92aWRlciwgYnV0IG9idGFpbmVkIHRocm91Z2ggc2V2ZXJhbAoqIGRpZmZlcmVudCBJZGVudGl0eSBzb3VyY2VzLiBXaXRoIHRoaXMgYXBwcm9hY2gsIHRoZSBJZCBNb2R1bGUgcHJvdmlkZXMgdG8gdGhlIHVzZXIgdGhlCiogb3B0aW9uIHRvIGNob29zZSB0aGUgcHJlZmVycmVkIG1ldGhvZCBmb3IgYXV0aGVudGljYXRpb24uCiogVGhpcyBtb2R1bGUgd2lsbCB0aHVzIGFibGUgdG8gc3VwcG9ydCBtdWx0aXBsZSBJZGVudGl0eSBhY3F1aXNpdGlvbiBtZXRob2RzLAoqIHN1Y2ggYXMgT3BlbklEIGNvbm5lY3QgMS4wLCBLZXJiZXJvcyBTeXN0ZW0sIG9yIGF1dGhlbnRpY2F0aW9uIHRocm91Z2ggc21hcnQgY2FyZHMuCiogRm9yIGV4YW1wbGUsIGEgdXNlciB3aXRoIGEgR29vZ2xlIGFjY291bnQgY2FuIHVzZSB0aGUgR29vZ2xlIGFzIGFuIElkZW50aXR5IFByb3ZpZGVyIHRvIHByb3ZpZGUgSWRlbnRpdHkgVG9rZW5zLAoqICB3aGljaCBjYW4gYmUgdXNlZCBieSB0aGUgSWRlbnRpdHkgTW9kdWxlIHRvIGFzc29jaWF0ZSBpdCB3aXRoIGEgSHlwZXJ0eSBpbnN0YW5jZS4KKgoqIFRoZSBJZGVudGl0eSBNb2R1bGUgdXNlcyBhIG5vZGUgcGFja2FnZSwgdGhlIEhlbGxvSlMsIHdoaWNoIGlzIGEgY2xpZW50LXNpZGUgSmF2YVNjcmlwdCBBUEkgZm9yIGF1dGhlbnRpY2F0aW9uCiogdGhhdCBmYWNpbGl0YXRlcyB0aGUgcmVxdWVzdHMgZm9yIHRoZSBPcGVuSUQgY29ubmVjdCBwcm90b2NvbC4gVGhpcyBtZXRob2QgYWxsb3dzIGZvciBzb21lIGFic3RyYWN0aW9uCiogd2hlbiBtYWtpbmcgcmVxdWVzdHMgZm9yIGRpZmZlcmVudCBJZGVudGl0eSBQcm92aWRlcnMsIHN1Y2ggYXMgT3BlbklEIGNvbm5lY3QgdXNlZCBieSBHb29nbGUsIEZhY2Vib29rLCBNaWNyb3NvZnQsIGZvciBleGFtcGxlLgoqCiogV2hlbiBhIHJlcXVlc3QgZm9yIGEgdXNlciBpZGVudGl0eSBpcyBtYWRlIHVzaW5nIHRoZSBtZXRob2QgbG9naW5XaXRoUlAoaWRlbnRpZmllciwgc2NvcGUpLAoqIHRoaXMgbWV0aG9kIHdpbGwgYW5hbHlzZSB0aGUgSWRlbnRpdHkgUHJvdmlkZXIgY2hvc2VuIHRvIG9idGFpbiBhbiBpZGVudGl0eSBhbmQgd2lsbCB1c2UgdGhlIEhlbGxvSlMgbm9kZSBwYWNrYWdlCiogd2l0aCB0aGUgc2VsZWN0ZWQgSWRlbnRpdHkgUHJvdmlkZXIgYW5kIGlkZW50aXR5IHNjb3BlLiBBZnRlciB0aGUgSGVsbG9KUyByZXF1ZXN0IGZvciBhbiBBY2Nlc3MgVG9rZW4KKiB0byB0aGUgSWRlbnRpdHkgUHJvdmlkZXJzLCB0aGUgdXNlciB3aWxsIGJlIHByb21wdGVkIHRvIGF1dGhlbnRpY2F0ZSB0b3dhcmRzIHRoZSBJZGVudGl0eSBQcm92aWRlci4KKiBVcG9uIHJlY2VpdmluZyB0aGUgQWNjZXNzIFRva2VuLCB0aGlzIHRva2VuIGlzIHZhbGlkYXRlZCB3aXRoIGEgUkVTVGZ1bCB3ZWIgc2VydmljZSByZXF1ZXN0IHRvIGFuIGVuZHBvaW50Ciogb24gdGhlIElkZW50aXR5IFByb3ZpZGVyIEF1dGhvcml6YXRpb24gU2VydmVyLCBhbmQgYWZ0ZXIgdGhlIHZhbGlkYXRpb24gaXMgZG9uZSwKKiBhbiBJRCB0b2tlbiBpcyBvYnRhaW5lZCB3aXRoIHRoZSBpbmZvcm1hdGlvbiBhY2NvcmRpbmcgdG8gdGhlIHNjb3BlIHJlcXVpcmVkLgoqIFRoaXMgSUQgdG9rZW4gaXMgdGhlbiBwcmVzZXJ2ZWQgaW4gdGhpcyBtb2R1bGUgdGhhdCBjYW4gb2J0YWluZWQgdGhyb3VnaCB0aGUgZ2V0SWRlbnRpdGllcygpCiogYW5kIGlzIHBhc3NlZCBhcyByZXR1cm4gdmFsdWUgb2YgdGhlIGxvZ2luV2l0aFJQIGZ1bmN0aW9uLiBUaGUgbWV0aG9kcyBnZW5lcmF0ZUFzc2VydGlvbiBhbmQgdmFsaWRhdGVBc3NlcnRpb24gaGF2ZSBub3QgeWV0IGJlZW4gZGV2ZWxvcGVkLgoqCiovCgp2YXIgSWRlbnRpdHlNb2R1bGUgPSBmdW5jdGlvbiAoKSB7CgogIC8qKgogICogVGhpcyBpcyB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGlzZSB0aGUgSWRlbnRpdHkgTW9kdWxlIGl0IGRvZXMgbm90IHJlcXVpcmUgYW55IGlucHV0LgogICovCgogIGZ1bmN0aW9uIElkZW50aXR5TW9kdWxlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIElkZW50aXR5TW9kdWxlKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgLy90byBzdG9yZSBpdGVtcyB3aXRoIHRoaXMgZm9ybWF0OiB7aWRlbnRpdHk6IGlkZW50aXR5VVJMLCB0b2tlbjogdG9rZW5JRH0KICAgIF90aGlzLmlkZW50aXRpZXMgPSBbXTsKICB9CgogIC8qKgogICogUmVnaXN0ZXIgYSBuZXcgSWRlbnRpdHkgd2l0aCBhbiBJZGVudGl0eSBQcm92aWRlcgogICovCgoKICBfY3JlYXRlQ2xhc3MoSWRlbnRpdHlNb2R1bGUsIFt7CiAgICBrZXk6ICdyZWdpc3RlcklkZW50aXR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlcklkZW50aXR5KCkge30KICAgIC8vIEJvZHkuLi4KCgogICAgLyoqCiAgICAqIEluIHJlbGF0aW9uIHdpdGggYSBjbGFzc2ljYWwgUmVseWluZyBQYXJ0eTogUmVnaXN0cmF0aW9uCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlcldpdGhSUCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJXaXRoUlAoKSB7fQogICAgLy8gQm9keS4uLgoKCiAgICAvKioKICAgICogRnVuY3Rpb24gdG8gcmV0dXJuIGFsbCB0aGUgaWRlbnRpdGllcyByZWdpc3RlcmVkIHdpdGhpbiBhIHNlc3Npb24gYnkgYSB1c2VyLgogICAgKiBUaGVzZSBpZGVudGl0aWVzIGFyZSByZXR1cm5lZCBpbiBhbiBhcnJheSBjb250YWluaW5nIGEgSlNPTiBwYWNrYWdlIGZvciBlYWNoIHVzZXIgaWRlbnRpdHkuCiAgICAqIEByZXR1cm4ge0FycmF5PElkZW50aXRpZXM+fSAgICAgICAgIEFycmF5ICAgICAgICAgSWRlbnRpdGllcwogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0SWRlbnRpdGllcycsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SWRlbnRpdGllcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLmlkZW50aXRpZXM7CiAgICB9CgogICAgLyoqCiAgICAqIEZ1bmN0aW9uIHRvIHJlcXVlc3QgYW4gSUQgVG9rZW4gZnJvbSBhIHVzZXIuIElmIG5vIHRva2VuIGV4aXN0cywgdGhlIElkZW50aXR5IE1vZHVsZQogICAgKiB3aWxsIHRyeSB0byBvYnRhaW4gb25lIGZyb20gYW4gSWRlbnRpdHkgUHJvdmlkZXIsIGFuZCB0aGUgdXNlciB3aWxsIGJlIGFza2VkIHRvIGF1dGhlbnRpY2F0ZQogICAgKiAgdG93YXJkcyB0aGUgSWRlbnRpdHkgUHJvdmlkZXIuCiAgICAqIFRoZSBmdW5jdGlvbiByZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGEgdG9rZW4gY29udGFpbmluZyB0aGUgdXNlciBpbmZvcm1hdGlvbi4KICAgICoKICAgICogQHBhcmFtICB7SWRlbnRpZmllcn0gICAgICBpZGVudGlmaWVyICAgICAgaWRlbnRpZmllcgogICAgKiBAcGFyYW0gIHtTY29wZX0gICAgICAgICAgIHNjb3BlICAgICAgICAgICBzY29wZQogICAgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICAgIFByb21pc2UgICAgICAgICBJRFRva2VuIGNvbnRhaW5pbmcgdGhlIHVzZXIgaW5mb3JtYXRpb24KICAgICovCgogIH0sIHsKICAgIGtleTogJ2xvZ2luV2l0aFJQJywKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpbldpdGhSUChpZGVudGlmaWVyLCBzY29wZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLyoKICAgICAgICBXaGVuIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiwgaWYgZXZlcnl0aGluZyBpcyBmaW5lLCBhIHNtYWxsIHBvcC11cCB3aWxsIG9wZW4gcmVxdWVzdGluZyBhIGxvZ2luIHdpdGggYSBnb29nbGUgYWNjb3VudC4gQWZ0ZXIgdGhlIGxvZ2luIGlzIG1hZGUsIHRoZSBwb3AtdXAgd2lsbCBjbG9zZSBhbmQgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBJRCB0b2tlbi4KICAgICAgICBUaGlzIGZ1bmN0aW9uIHdhcyB0ZXN0ZWQgd2l0aCB0aGUgVVJMOiBodHRwOi8vMTI3LjAuMC4xOjgwODAvIGFuZCB3aXRoIHRoZSBzYW1lIHJlZGlyZWN0IFVSSQogICAgICAgCUluIGNhc2UgdGhlIHJlZGlyZWN0IFVSSSBpcyBub3QgYWNjZXB0ZWQgb3IgaXMgcmVxdWlyZWQgdG8gYWRkIG90aGVycyByZWRpcmVjdCBVUklzLCBhIGxpdHRsZSBpbmZvcm1hdGlvbiBpcyBwcm92aWRlZCB0byBmaXggdGhlIHByb2JsZW06CiAgICAgICAJU28gdGhhdCBhbiBhcHBsaWNhdGlvbiBjYW4gdXNlIEdvb2dsZSdzIE9BdXRoIDIuMCBhdXRoZW50aWNhdGlvbiBzeXN0ZW0gZm9yIHVzZXIgbG9naW4sCiAgICAgIAlmaXJzdCBpcyByZXF1aXJlZCB0byBzZXQgdXAgYSBwcm9qZWN0IGluIHRoZSBHb29nbGUgRGV2ZWxvcGVycyBDb25zb2xlIHRvIG9idGFpbiBPQXV0aCAyLjAgY3JlZGVudGlhbHMgYW5kIHNldCBhIHJlZGlyZWN0IFVSSS4KICAgICAgCUEgdGVzdCBhY2NvdW50IHdhcyBjcmVhdGVkIHRvIHNldCB0aGUgcHJvamVjdCBpbiB0aGUgR29vZ2xlIERldmVsb3BlcnMgQ29uc29sZSB0byBvYnRhaW4gT0F1dGggMi4wIGNyZWRlbnRpYWxzLAl3aXRoIHRoZSBmb2xsb3dpbmcgY3JlZGVudGlhbHM6CiAgICAgICAgICAgCXVzZXJuYW1lOiBvcGVuaWR0ZXN0MTBAZ21haWwuY29tCiAgICAgICAgICAgICBwYXNzd29yZDogdGVzdE9wZW5JRDEwCiAgICAgICAJVG8gYWRkIG1vcmUgVVJJJ3MsIGZvbGxvdyB0aGUgc3RlcHM6CiAgICAgIAkxwrogY2hvb3NlIHRoZSBwcm9qZWN0ICggY2FuIGJlIHRoZSBNeSBPcGVuSUQgUHJvamVjdCkJIGZyb20gIGh0dHBzOi8vY29uc29sZS5kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvamVjdHNlbGVjdG9yL2FwaXMvY3JlZGVudGlhbHMgdXNpbmcgdGhlIGNyZWRlbnRpYWxzIHByb3ZpZGVkIGFib3ZlLgogICAgICAJMsK6IE9wZW4gVGhlIENsaWVudCBXZWIgMSBsaXN0ZWQgaW4gT0F1dGggMi4wIENsaWVudCBJRCdzCiAgICAgIAkzwrogQWRkIHRoZSBVUkkgIGluIHRoZSBhdXRob3JpemVkIHJlZGlyZWN0IFVSSSBzZWN0aW9uLgogICAgICAgIDTCuiBjaGFuZ2UgdGhlIFJFRElSRUNUIHBhcmFtZXRlciBiZWxsb3cgd2l0aCB0aGUgcHJldGVuZGVkIFVSSQogICAgICAgICBpZGVudGl0eU1vZHVsZS5faGVsbG8uaW5pdCh7Z29vZ2xlOiAiODA4MzI5NTY2MDEyLXRxcjhxb2gxMTE5NDJnZDJrZzAwN3QwczhmMjc3cm9pLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIn0pOwogICAgICAgIGlkZW50aXR5TW9kdWxlLl9oZWxsbygiZ29vZ2xlIikubG9naW4oKTsKICAgICAgICovCgogICAgICB2YXIgVkFMSURVUkwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL3Rva2VuaW5mbz9hY2Nlc3NfdG9rZW49JzsKICAgICAgdmFyIFVTRVJJTkZVUkwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL3VzZXJpbmZvP2FjY2Vzc190b2tlbj0nOwogICAgICB2YXIgYWNUb2tlbiA9IHZvaWQgMDsKICAgICAgdmFyIHRva2VuVHlwZSA9IHZvaWQgMDsKICAgICAgdmFyIGV4cGlyZXNJbiA9IHZvaWQgMDsKICAgICAgdmFyIHVzZXIgPSB2b2lkIDA7CiAgICAgIHZhciB0b2tlbklEID0gdm9pZCAwOwogICAgICB2YXIgaW5mb1Rva2VuID0gdm9pZCAwOwogICAgICB2YXIgbG9nZ2VkSW4gPSBmYWxzZTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGlmIChfdGhpcy5pbmZvVG9rZW4gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgLy9UT0RPIHZlcmlmeSB3aGV0aGVyIHRoZSB0b2tlbiBpcyBzdGlsbCB2YWxpZCBvciBub3QuCiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShfdGhpcy5pbmZvVG9rZW4pOwogICAgICAgIH0KCiAgICAgICAgLy9mdW5jdGlvbiB0byB2YWxpZGF0ZSB0aGUgYWNjZXNzIHRva2VuIHJlY2VpdmVkIGR1cmluZyB0aGUgYXV0aGVudGljYXRpb24KICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVRva2VuKHRva2VuKSB7CiAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICByZXEub3BlbignR0VUJywgVkFMSURVUkwgKyB0b2tlbiwgdHJ1ZSk7CgogICAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICBnZXRJbmZvVG9rZW4odG9rZW4pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLnN0YXR1cyA9PSA0MDApIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRva2VuJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnc29tZXRoaW5nIGVsc2Ugb3RoZXIgdGhhbiAyMDAgd2FzIHJldHVybmVkJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgcmVxLnNlbmQoKTsKICAgICAgICB9CgogICAgICAgIC8vZnVuY3Rpb24gdG8gZXhjaGFuZ2UgdGhlIGFjY2VzcyB0b2tlbiB3aXRoIGFuIElEIFRva2VuIGNvbnRhaW5pbmcgdGhlIGluZm9ybWF0aW9uCiAgICAgICAgZnVuY3Rpb24gZ2V0SW5mb1Rva2VuKHRva2VuKSB7CiAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICByZXEub3BlbignR0VUJywgVVNFUklORlVSTCArIHRva2VuLCB0cnVlKTsKCiAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09PSA0KSB7CiAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgaW5mb1Rva2VuID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIF90aGlzLmluZm9Ub2tlbiA9IGluZm9Ub2tlbjsKICAgICAgICAgICAgICAgIHZhciBlbWFpbCA9IGluZm9Ub2tlbi5lbWFpbDsKCiAgICAgICAgICAgICAgICAvL2NvbnRydWN0IHRoZSBpZGVudGl0eVVSTCB0byBiZSBkZWZpbmVkIGFzIGluIHNwZWNpZmljYXRpb24KICAgICAgICAgICAgICAgIC8vIG1vZGVsOiB1c2VyOi8vPGlkcGRvbWFpbj4vPHVzZXItaWRlbnRpZmllcj4KICAgICAgICAgICAgICAgIHZhciBpZGVudGl0eVVSTCA9ICd1c2VyOi8vJyArIGVtYWlsLnN1YnN0cmluZyhlbWFpbC5pbmRleE9mKCdAJykgKyAxLCBlbWFpbC5sZW5ndGgpICsgJy8nICsgZW1haWwuc3Vic3RyaW5nKDAsIGVtYWlsLmluZGV4T2YoJ0AnKSk7CgogICAgICAgICAgICAgICAgLy9UT0RPIHJlbW92ZSBsYXRlciB0aGUgJ3Rva2VuJyBmaWVsZCBrZXkKICAgICAgICAgICAgICAgIHZhciBpZGVudGl0eUJ1bmRsZSA9IHsgaWRlbnRpdHk6IGlkZW50aXR5VVJMLCB0b2tlbjogaW5mb1Rva2VuLCBhY2Nlc3NUb2tlbjogdG9rZW4sIGlkVG9rZW46IHt9LCBpbmZvVG9rZW46IGluZm9Ub2tlbiB9OwoKICAgICAgICAgICAgICAgIGdldElEVG9rZW4odG9rZW4sIGlkZW50aXR5QnVuZGxlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcS5zdGF0dXMgPT09IDQwMCkgewogICAgICAgICAgICAgICAgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdG9rZW4nKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVqZWN0KCdzb21ldGhpbmcgZWxzZSBvdGhlciB0aGFuIDIwMCB3YXMgcmV0dXJuZWQnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICByZXEuc2VuZCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0SURUb2tlbih0b2tlbiwgaWRlbnRpdHlCdW5kbGUpIHsKICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgIHJlcS5vcGVuKCdHRVQnLCBWQUxJRFVSTCArIHRva2VuLCB0cnVlKTsKCiAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09PSA0KSB7CiAgICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgdG9rZW5JRCA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlVGV4dCk7CgogICAgICAgICAgICAgICAgaWRlbnRpdHlCdW5kbGUuaWRUb2tlbiA9IHRva2VuSUQ7CiAgICAgICAgICAgICAgICBfdGhpcy5pZGVudGl0aWVzLnB1c2goaWRlbnRpdHlCdW5kbGUpOwogICAgICAgICAgICAgICAgcmVzb2x2ZShpZGVudGl0eUJ1bmRsZS50b2tlbik7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEuc3RhdHVzID09PSA0MDApIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRva2VuJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnc29tZXRoaW5nIGVsc2Ugb3RoZXIgdGhhbiAyMDAgd2FzIHJldHVybmVkJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgcmVxLnNlbmQoKTsKICAgICAgICB9CgogICAgICAgIF9oZWxsb2pzMi5kZWZhdWx0LmluaXQoeyBnb29nbGU6ICc4MDgzMjk1NjYwMTItdHFyOHFvaDExMTk0MmdkMmtnMDA3dDBzOGYyNzdyb2kuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nIH0pOwogICAgICAgICgwLCBfaGVsbG9qczIuZGVmYXVsdCkoJ2dvb2dsZScpLmxvZ2luKHsgc2NvcGU6ICdlbWFpbCcgfSkudGhlbihmdW5jdGlvbiAodG9rZW4pIHsKCiAgICAgICAgICB2YWxpZGF0ZVRva2VuKHRva2VuLmF1dGhSZXNwb25zZS5hY2Nlc3NfdG9rZW4pOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yVmFsaWRhdGluZyAnLCBlcnJvcik7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogSW4gcmVsYXRpb24gd2l0aCBhIEh5cGVydHkgSW5zdGFuY2U6IEFzc29jaWF0ZSBpZGVudGl0eQogICAgKi8KCiAgfSwgewogICAga2V5OiAnc2V0SHlwZXJ0eUlkZW50aXR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRIeXBlcnR5SWRlbnRpdHkoKSB7fQogICAgLy8gQm9keS4uLgoKCiAgICAvKioKICAgICogR2VuZXJhdGVzIGFuIElkZW50aXR5IEFzc2VydGlvbgogICAgKgogICAgKiBAcGFyYW0gIHtET01TdHJpbmd9IGNvbnRlbnRzICAgICBjb250ZW50cwogICAgKiBAcGFyYW0gIHtET01TdHJpbmd9IG9yaWdpbiAgICAgICBvcmlnaW4KICAgICogQHBhcmFtICB7RE9NU3RyaW5nfSB1c2VybmFtZUhpbnQgdXNlcm5hbWVIaW50CiAgICAqIEByZXR1cm4ge0lkQXNzZXJ0aW9ufSAgICAgICAgICAgICAgSWRBc3NlcnRpb24KICAgICovCgogIH0sIHsKICAgIGtleTogJ2dlbmVyYXRlQXNzZXJ0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cywgb3JpZ2luLCB1c2VybmFtZUhpbnQpIHt9CiAgICAvLyBCb2R5Li4uCgoKICAgIC8qKgogICAgKiBPVEhFUiBVU0VSJ1MgSURFTlRJVFkKICAgICovCgogICAgLyoqCiAgICAqIEZ1bmN0aW9uIHRvIHZhbGlkYXRlIGFuIGlkZW50aXR5IGFzc2VydGlvbiBnZW5lcmF0ZWQgcHJldmlvdXNseS4KICAgICogUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgcmVzdWx0IGZyb20gdGhlIHZhbGlkYXRpb24uCiAgICAqIEBwYXJhbSAge0RPTVN0cmluZ30gYXNzZXJ0aW9uCiAgICAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgICAgUHJvbWlzZSAgICAgICAgIHByb21pc2Ugd2l0aCB0aGUgcmVzdWx0IGZyb20gdGhlIHZhbGlkYXRpb24KICAgICovCgogIH0sIHsKICAgIGtleTogJ3ZhbGlkYXRlQXNzZXJ0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZUFzc2VydGlvbihhc3NlcnRpb24pIHt9CiAgICAvLyBCb2R5Li4uCgoKICAgIC8qKgogICAgKiBUcnVzdCBsZXZlbCBldmFsdWF0aW9uIG9mIGEgcmVjZWl2ZWQgSWRBc3NlcnRpb24KICAgICogQHBhcmFtICB7RE9NU3RyaW5nfSBhc3NlcnRpb24gYXNzZXJ0aW9uCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRBc3NlcnRpb25UcnVzdExldmVsJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBc3NlcnRpb25UcnVzdExldmVsKGFzc2VydGlvbikgewogICAgICAvLyBCb2R5Li4uCiAgICB9CiAgfV0pOwoKICByZXR1cm4gSWRlbnRpdHlNb2R1bGU7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IElkZW50aXR5TW9kdWxlOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJoZWxsb2pzIjoxMjZ9XSwxODg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIFBEUCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBQRFAoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUERQKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX3RoaXMuYmxhY2tMaXN0ID0gW107CiAgICBfdGhpcy53aGl0ZUxpc3QgPSBbXTsKICB9CgogIC8qIHVzZSBoYXNodGFibGUgdG8gYWxsb3cgZHluYW1pYyBtYW5hZ2VtZW50ICovCgoKICBfY3JlYXRlQ2xhc3MoUERQLCBbewogICAga2V5OiAnZXZhbHVhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGV2YWx1YXRlKHJlZ2lzdHJ5LCBtZXNzYWdlLCBoeXBlcnR5VG9WZXJpZnksIHBvbGljaWVzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciByZXN1bHRzID0gW3RydWVdOwogICAgICB2YXIgYWN0aW9ucyA9IFtdOwoKICAgICAgZm9yICh2YXIgaSBpbiBwb2xpY2llcykgewogICAgICAgIHZhciBwb2xpY3kgPSBwb2xpY2llc1tpXTsKICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IHBvbGljeS5jb25kaXRpb24uc3BsaXQoJyAnKTsKICAgICAgICBzd2l0Y2ggKGNvbmRpdGlvblswXSkgewogICAgICAgICAgY2FzZSAnYmxhY2tsaXN0ZWQnOgogICAgICAgICAgICByZXN1bHRbMF0gPSBfdGhpcy5pc0JsYWNrTGlzdGVkKHJlZ2lzdHJ5LCBoeXBlcnR5VG9WZXJpZnkpID8gcG9saWN5LmF1dGhvcmlzZSA6ICFwb2xpY3kuYXV0aG9yaXNlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3doaXRlbGlzdGVkJzoKICAgICAgICAgICAgcmVzdWx0WzBdID0gX3RoaXMuaXNXaGl0ZUxpc3RlZChoeXBlcnR5VG9WZXJpZnkpID8gcG9saWN5LmF1dGhvcmlzZSA6ICFwb2xpY3kuYXV0aG9yaXNlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3RpbWUnOgogICAgICAgICAgICB2YXIgc3RhcnQgPSBjb25kaXRpb25bMV07CiAgICAgICAgICAgIHZhciBlbmQgPSBjb25kaXRpb25bMl07CiAgICAgICAgICAgIHJlc3VsdFswXSA9IF90aGlzLmlzVGltZUJldHdlZW4oc3RhcnQsIGVuZCkgPyBwb2xpY3kuYXV0aG9yaXNlIDogIXBvbGljeS5hdXRob3Jpc2U7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKCiAgICAgICAgICAgIC8vIFRPRE86IGRvIGFjdGlvbnMgZGVwZW5kIG9uIHRoZSBkZWNpc2lvbj8KICAgICAgICAgICAgcmVzdWx0WzFdID0gcG9saWN5LmFjdGlvbnM7CiAgICAgICAgfQoKICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0WzBdKTsKICAgICAgICBhY3Rpb25zLnB1c2gocmVzdWx0WzFdKTsKICAgICAgfQoKICAgICAgdmFyIGF1dGhEZWNpc2lvbiA9IF90aGlzLmdldERlY2lzaW9uKHJlc3VsdHMpOwogICAgICByZXR1cm4gW2F1dGhEZWNpc2lvbiwgYWN0aW9uc107CiAgICB9CiAgfSwgewogICAga2V5OiAnaXNTYW1lT3JpZ2luJywKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NhbWVPcmlnaW4oKSB7fQogIH0sIHsKICAgIGtleTogJ2lzQmxhY2tMaXN0ZWQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQmxhY2tMaXN0ZWQocmVnaXN0cnksIGh5cGVydHlUb1ZlcmlmeSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgYmxhY2tMaXN0ID0gX3RoaXMuYmxhY2tMaXN0OwogICAgICBmb3IgKHZhciBpIGluIGJsYWNrTGlzdCkgewogICAgICAgIGlmIChfdGhpcy5oeXBlcnRpZXNNYXRjaChyZWdpc3RyeSwgYmxhY2tMaXN0W2ldKSwgaHlwZXJ0eVRvVmVyaWZ5KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qIFRPRE86IGNhY2hlIHRoaXM/ICovCgogIH0sIHsKICAgIGtleTogJ2h5cGVydGllc01hdGNoJywKICAgIHZhbHVlOiBmdW5jdGlvbiBoeXBlcnRpZXNNYXRjaChyZWdpc3RyeSwgVVJMVG9WZXJpZnksIGh5cGVydHlUb1ZlcmlmeSkgewogICAgICByZWdpc3RyeS5nZXRVc2VySHlwZXJ0eShVUkxUb1ZlcmlmeSkudGhlbihmdW5jdGlvbiAoaHlwZXJ0eSkgewogICAgICAgIHJldHVybiBoeXBlcnR5Lmh5cGVydHlVUkwgPT09IGh5cGVydHlUb1ZlcmlmeTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnaXNXaGl0ZUxpc3RlZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNXaGl0ZUxpc3RlZCh1c2VySUQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuIF90aGlzLndoaXRlTGlzdC5pbmRleE9mKHVzZXJJRCkgPiAtMTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdpc1RpbWVCZXR3ZWVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1RpbWVCZXR3ZWVuKHN0YXJ0LCBlbmQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBub3dNaW51dGVzID0gX3RoaXMuZ2V0TWludXRlcyhwYXJzZUludChub3cuZ2V0SG91cnMoKSkgKyAnOicgKyBub3cuZ2V0TWludXRlcygpKTsKICAgICAgdmFyIHN0YXJ0TWludXRlcyA9IF90aGlzLmdldE1pbnV0ZXMoc3RhcnQpOwogICAgICB2YXIgZW5kTWludXRlcyA9IF90aGlzLmdldE1pbnV0ZXMoZW5kKTsKICAgICAgaWYgKGVuZE1pbnV0ZXMgPiBzdGFydE1pbnV0ZXMpIHsKICAgICAgICByZXR1cm4gbm93TWludXRlcyA+IHN0YXJ0TWludXRlcyAmJiBub3dNaW51dGVzIDwgZW5kTWludXRlczsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobm93TWludXRlcyA8IHN0YXJ0TWludXRlcykgewogICAgICAgICAgbm93TWludXRlcyArPSAyNCAqIDYwOwogICAgICAgIH0KICAgICAgICBlbmRNaW51dGVzICs9IDI0ICogNjA7CiAgICAgICAgcmV0dXJuIG5vd01pbnV0ZXMgPiBzdGFydE1pbnV0ZXMgJiYgbm93TWludXRlcyA8IGVuZE1pbnV0ZXM7CiAgICAgIH0KICAgIH0KCiAgICAvKiBBdXggZnVuY3Rpb24gZm9yIGlzVGltZUJldHdlZW4oKSAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRNaW51dGVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNaW51dGVzKHRpbWUpIHsKICAgICAgdmFyIHRpbWVTcGxpdCA9IHRpbWUuc3BsaXQoJzonKTsKICAgICAgcmV0dXJuIHBhcnNlSW50KHRpbWVTcGxpdFswXSkgKiA2MCArIHBhcnNlSW50KHRpbWVTcGxpdFsxXSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZ2V0QmxhY2tMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRCbGFja0xpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5ibGFja0xpc3Q7CiAgICB9CiAgfSwgewogICAga2V5OiAnaXNDb250ZXh0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0NvbnRleHQoKSB7fQogIH0sIHsKICAgIGtleTogJ2lzSHlwZXJ0eVR5cGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzSHlwZXJ0eVR5cGUoKSB7fQoKICAgIC8qIEF1eCBmdW5jdGlvbiBmb3IgZXZhbHVhdGUoKSAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXREZWNpc2lvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVjaXNpb24ocmVzdWx0cykgewogICAgICByZXR1cm4gcmVzdWx0cy5pbmRleE9mKGZhbHNlKSA9PT0gLTE7CiAgICB9CiAgfSwgewogICAga2V5OiAnYWRkVG9CbGFja0xpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRvQmxhY2tMaXN0KHVzZXJJRCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoX3RoaXMuYmxhY2tMaXN0LmluZGV4T2YodXNlcklEKSA9PT0gLTEpIHsKICAgICAgICBfdGhpcy5ibGFja0xpc3QucHVzaCh1c2VySUQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAncmVtb3ZlRnJvbUJsYWNrTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRnJvbUJsYWNrTGlzdCh1c2VySUQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGJsYWNrTGlzdCA9IF90aGlzLmJsYWNrTGlzdDsKICAgICAgZm9yICh2YXIgaSBpbiBibGFja0xpc3QpIHsKICAgICAgICBpZiAoYmxhY2tMaXN0W2ldID09PSB1c2VySUQpIHsKICAgICAgICAgIGJsYWNrTGlzdC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdhZGRUb1doaXRlTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVG9XaGl0ZUxpc3QodXNlcklEKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGlmIChfdGhpcy5ibGFja0xpc3QuaW5kZXhPZih1c2VySUQpID09PSAtMSkgewogICAgICAgIF90aGlzLndoaXRlTGlzdC5wdXNoKHVzZXJJRCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdyZW1vdmVGcm9tV2hpdGVMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGcm9tV2hpdGVMaXN0KHVzZXJJRCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgd2hpdGVMaXN0ID0gX3RoaXMud2hpdGVMaXN0OwogICAgICBmb3IgKHZhciBpIGluIHdoaXRlTGlzdCkgewogICAgICAgIGlmICh3aGl0ZUxpc3RbaV0gPT09IHVzZXJJRCkgewogICAgICAgICAgd2hpdGVMaXN0LnNwbGljZShpLCAxKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBEUDsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUERQOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE4OTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9Cgp2YXIgUEVQID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFBFUCgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQRVApOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFBFUCwgW3sKICAgIGtleTogImVuZm9yY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVuZm9yY2UoKSB7fQogIH0sIHsKICAgIGtleTogInNlbmRBdXRvbWF0aWNNZXNzYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kQXV0b21hdGljTWVzc2FnZSgpIHt9CiAgfSwgewogICAga2V5OiAiZm9yd2FyZFRvSUQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcndhcmRUb0lEKCkge30KICB9LCB7CiAgICBrZXk6ICJmb3J3YXJkVG9IeXBlcnR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3J3YXJkVG9IeXBlcnR5KCkge30KICB9XSk7CgogIHJldHVybiBQRVA7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFBFUDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHt9XSwxOTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCnZhciBfUEVQID0gcmVxdWlyZSgnLi9QRVAnKTsKCnZhciBfUEVQMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BFUCk7Cgp2YXIgX1BEUCA9IHJlcXVpcmUoJy4vUERQJyk7Cgp2YXIgX1BEUDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QRFApOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLy8gaW1wb3J0IFBvbGljeSBmcm9tICcuL1BvbGljeSc7Cgp2YXIgUG9saWN5RW5naW5lID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFBvbGljeUVuZ2luZShpZGVudGl0eU1vZHVsZSwgcnVudGltZVJlZ2lzdHJ5KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9saWN5RW5naW5lKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX3RoaXMuaWRNb2R1bGUgPSBpZGVudGl0eU1vZHVsZTsKICAgIF90aGlzLnJlZ2lzdHJ5ID0gcnVudGltZVJlZ2lzdHJ5OwogICAgX3RoaXMucGVwID0gbmV3IF9QRVAyLmRlZmF1bHQoKTsKICAgIF90aGlzLnBkcCA9IG5ldyBfUERQMi5kZWZhdWx0KCk7CiAgICBfdGhpcy5wb2xpY2llcyA9IHt9OwogIH0KCiAgLy8gVE9ETzogdmVyaWZ5IGR1cGxpY2F0ZXMKICAvLyBUT0RPOiBjb25mbGljdCBkZXRlY3Rpb24KCgogIF9jcmVhdGVDbGFzcyhQb2xpY3lFbmdpbmUsIFt7CiAgICBrZXk6ICdhZGRQb2xpY2llcycsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkUG9saWNpZXMoa2V5LCBwb2xpY2llcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBmb3IgKHZhciBpIGluIHBvbGljaWVzKSB7CiAgICAgICAgaWYgKF90aGlzLnBvbGljaWVzW2tleV0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgX3RoaXMucG9saWNpZXNba2V5XSA9IFtdOwogICAgICAgIH0KICAgICAgICB2YXIgZXhpc3RzID0gZmFsc2U7CiAgICAgICAgZm9yICh2YXIgcG9saWN5IGluIF90aGlzLnBvbGljaWVzW2tleV0pIHsKICAgICAgICAgIGlmIChfdGhpcy5wb2xpY2llc1trZXldW3BvbGljeV0uaWQgPT09IHBvbGljaWVzW2ldLmlkKSB7CiAgICAgICAgICAgIGV4aXN0cyA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWV4aXN0cykgewogICAgICAgICAgX3RoaXMucG9saWNpZXNba2V5XS5wdXNoKHBvbGljaWVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICAvKnNpbXVsYXRlKGtleSkgewogICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgeXRlCiAgICAgIGxldCBwb2xpY3kyID0gbmV3IFBvbGljeShwb2xpY3kuaWQsIHBvbGljeS5zY29wZSwgcG9saWN5LmNvbmRpdGlvbiwKICAgICAgICBwb2xpY3kuYXV0aG9yaXNlLCBwb2xpY3kuYWN0aW9ucyk7CiAgICAgICBwb2xpY3kgPSB7CiAgICAgICAgaWQ6ICdhbGxvdy13aGl0ZWxpc3RlZCcsCiAgICAgICAgc2NvcGU6ICd1c2VyJywKICAgICAgICBjb25kaXRpb246ICd3aGl0ZWxpc3RlZCdjLAogICAgICAgIGF1dGhvcmlzZTogdHJ1ZSwKICAgICAgICBhY3Rpb25zOiBbXQogICAgICB9OwogICAgICBsZXQgcG9saWN5MyA9IG5ldyBQb2xpY3kocG9saWN5LmlkLCBwb2xpY3kuc2NvcGUsIHBvbGljeS5jb25kaXRpb24sCiAgICAgICAgcG9saWN5LmF1dGhvcmlzZSwgcG9saWN5LmFjdGlvbnMpOwogICAgICAgcG9saWN5ID0gewogICAgICAgIGlkOiAnYmxvY2stMDgtMjAnLAogICAgICAgIHNjb3BlOiAndXNlcicsCiAgICAgICAgY29uZGl0aW9uOiAndGltZSAwODowMCAyMDowMCcsCiAgICAgICAgYXV0aG9yaXNlOiBmYWxzZSwKICAgICAgICBhY3Rpb25zOiBbXQogICAgICB9OwogICAgICBsZXQgcG9saWN5NCA9IG5ldyBQb2xpY3kocG9saWN5LmlkLCBwb2xpY3kuc2NvcGUsIHBvbGljeS5jb25kaXRpb24sCiAgICAgICAgcG9saWN5LmF1dGhvcmlzZSwgcG9saWN5LmFjdGlvbnMpOwogICAgICAgX3RoaXMuYWRkUG9saWNpZXMoa2V5LCBbcG9saWN5NF0pOwogICAgfSovCgogIH0sIHsKICAgIGtleTogJ3JlbW92ZVBvbGljaWVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVQb2xpY2llcyhrZXksIHBvbGljeUlkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBhbGxQb2xpY2llcyA9IF90aGlzLnBvbGljaWVzOwoKICAgICAgaWYgKGtleSBpbiBhbGxQb2xpY2llcykgewogICAgICAgIGlmIChwb2xpY3lJZCAhPT0gJ2FsbCcpIHsKICAgICAgICAgIHZhciBwb2xpY2llcyA9IGFsbFBvbGljaWVzW2tleV07CiAgICAgICAgICB2YXIgbnVtUG9saWNpZXMgPSBwb2xpY2llcy5sZW5ndGg7CgogICAgICAgICAgZm9yICh2YXIgcG9saWN5ID0gMDsgcG9saWN5IDwgbnVtUG9saWNpZXM7IHBvbGljeSsrKSB7CiAgICAgICAgICAgIGlmIChwb2xpY2llc1twb2xpY3ldLmlkID09PSBwb2xpY3lJZCkgewogICAgICAgICAgICAgIHBvbGljaWVzLnNwbGljZShwb2xpY3ksIDEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5wb2xpY2llc1trZXldOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ2FkZFRvQmxhY2tMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRUb0JsYWNrTGlzdCh1c2VySUQpIHsKICAgICAgdGhpcy5wZHAuYWRkVG9CbGFja0xpc3QodXNlcklEKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdyZW1vdmVGcm9tQmxhY2tMaXN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGcm9tQmxhY2tMaXN0KHVzZXJJRCkgewogICAgICB0aGlzLnBkcC5yZW1vdmVGcm9tQmxhY2tMaXN0KHVzZXJJRCk7CiAgICB9CiAgfSwgewogICAga2V5OiAnYWRkVG9XaGl0ZUxpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRvV2hpdGVMaXN0KHVzZXJJRCkgewogICAgICB0aGlzLnBkcC5hZGRUb1doaXRlTGlzdCh1c2VySUQpOwogICAgfQogIH0sIHsKICAgIGtleTogJ3JlbW92ZUZyb21XaGl0ZUxpc3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21XaGl0ZUxpc3QodXNlcklEKSB7CiAgICAgIHRoaXMucGRwLnJlbW92ZUZyb21XaGl0ZUxpc3QodXNlcklEKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdhdXRob3Jpc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGF1dGhvcmlzZShtZXNzYWdlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIC8qbGV0IG1lc3NhZ2UgPSB7IGlkOiAxMjMsIHR5cGU6J1JFQUQnLCBmcm9tOidoeXBlcnR5Oi8vdWEucHQvYXNkZicsCiAgICAgICAgICAgICAgICAgICAgdG86J2RvbWFpbjovL3JlZ2lzdHJ5LnVhLnB0L2h5cGVydHktaW5zdGFuY2UvdXNlcicgfTsKICAgICAgX3RoaXMuc2ltdWxhdGUobWVzc2FnZS5mcm9tKTsqLwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLmlkTW9kdWxlLmxvZ2luV2l0aFJQKCdnb29nbGUgaWRlbnRpdHknLCAnc2NvcGUnKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgdmFyIGFzc2VydGVkSUQgPSBfdGhpcy5pZE1vZHVsZS5nZXRJZGVudGl0aWVzKCk7CgogICAgICAgICAgaWYgKCFtZXNzYWdlLmhhc093blByb3BlcnR5KCdib2R5JykpIHsKICAgICAgICAgICAgbWVzc2FnZS5ib2R5ID0ge307CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGh5cGVydHlUb1ZlcmlmeSA9IHZvaWQgMDsKICAgICAgICAgIGlmICghbWVzc2FnZS5ib2R5Lmhhc093blByb3BlcnR5KCdhc3NlcnRlZElkZW50aXR5JykpIHsKICAgICAgICAgICAgbWVzc2FnZS5ib2R5LmFzc2VydGVkSWRlbnRpdHkgPSBhc3NlcnRlZElEWzBdLmlkZW50aXR5OwogICAgICAgICAgICBtZXNzYWdlLmJvZHkuaWRUb2tlbiA9IHZhbHVlOwogICAgICAgICAgICBoeXBlcnR5VG9WZXJpZnkgPSBtZXNzYWdlLnRvOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaHlwZXJ0eVRvVmVyaWZ5ID0gbWVzc2FnZS5mcm9tOwogICAgICAgICAgfQoKICAgICAgICAgIC8qIFRPRE86IGdldCBzY29wZSBvZiB0aGUgbWVzc2FnZSAqLwogICAgICAgICAgdmFyIHNjb3BlID0gJ3VzZXInOwoKICAgICAgICAgIHZhciBhcHBsaWNhYmxlUG9saWNpZXMgPSBfdGhpcy5nZXRBcHBsaWNhYmxlUG9saWNpZXMoc2NvcGUpOwogICAgICAgICAgdmFyIHBvbGljaWVzUmVzdWx0ID0gdm9pZCAwOwogICAgICAgICAgaWYgKGh5cGVydHlUb1ZlcmlmeS5zcGxpdCgnOicpWzBdID09PSAnaHlwZXJ0eScpIHsKICAgICAgICAgICAgcG9saWNpZXNSZXN1bHQgPSBfdGhpcy5wZHAuZXZhbHVhdGUoX3RoaXMucmVnaXN0cnksIG1lc3NhZ2UsIGh5cGVydHlUb1ZlcmlmeSwgYXBwbGljYWJsZVBvbGljaWVzKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBvbGljaWVzUmVzdWx0ID0gW3RydWUsIFtdXTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy5wZXAuZW5mb3JjZShwb2xpY2llc1Jlc3VsdFsxXSk7CgogICAgICAgICAgaWYgKHBvbGljaWVzUmVzdWx0WzBdKSB7CiAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QobWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdnZXRBcHBsaWNhYmxlUG9saWNpZXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFwcGxpY2FibGVQb2xpY2llcyhzY29wZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgYXBwbGljYWJsZVBvbGljaWVzID0gX3RoaXMucG9saWNpZXNbc2NvcGVdOwogICAgICBpZiAoYXBwbGljYWJsZVBvbGljaWVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICBhcHBsaWNhYmxlUG9saWNpZXMgPSBbXTsKICAgICAgfQogICAgICByZXR1cm4gYXBwbGljYWJsZVBvbGljaWVzOwogICAgfQogIH0sIHsKICAgIGtleTogJ2dldEJsYWNrTGlzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QmxhY2tMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMucGRwLmdldEJsYWNrTGlzdCgpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBvbGljeUVuZ2luZTsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUG9saWN5RW5naW5lOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL1BEUCI6MTg4LCIuL1BFUCI6MTg5fV0sMTkxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8vIGltcG9ydCBNZXNzYWdlRmFjdG9yeSBmcm9tICcuLi8uLi9yZXNvdXJjZXMvTWVzc2FnZUZhY3RvcnknOwoKLyoqCiAqIENsYXNzIHdpbGwgYXNrIHRvIHRoZSBtZXNzYWdlIG5vZGUgZm9yIGFkZHJlc3NlcwogKi8KCnZhciBBZGRyZXNzQWxsb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX3VybDogVVJMCiAgX2J1czogTWluaUJ1cwogICovCgogIC8qKgogICAqIENyZWF0ZSBhbiBBZGRyZXNzIEFsbG9jYXRpb24KICAgKiBAcGFyYW0gIHtVUkwuVVJMfSAgICAgIHVybCAtIHVybCBmcm9tIHdobyBpcyBzZW5kaW5nIHRoZSBtZXNzYWdlCiAgICogQHBhcmFtICB7TWluaUJ1c30gICAgICBidXMgLSBNaW5pQnVzIHVzZWQgZm9yIGFkZHJlc3MgYWxsb2NhdGlvbgogICAqLwoKICBmdW5jdGlvbiBBZGRyZXNzQWxsb2NhdGlvbih1cmwsIGJ1cykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFkZHJlc3NBbGxvY2F0aW9uKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8vIGxldCBtZXNzYWdlRmFjdG9yeSA9IG5ldyBNZXNzYWdlRmFjdG9yeSgpOwogICAgLy8KICAgIC8vIF90aGlzLl9tZXNzYWdlRmFjdG9yeSA9IG1lc3NhZ2VGYWN0b3J5OwogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9idXMgPSBidXM7CiAgfQoKICAvKioKICAgKiBnZXQgdGhlIFVSTCB2YWx1ZQogICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVybCB2YWx1ZTsKICAgKi8KCgogIF9jcmVhdGVDbGFzcyhBZGRyZXNzQWxsb2NhdGlvbiwgW3sKICAgIGtleTogJ2NyZWF0ZScsCgoKICAgIC8qKgogICAgICogQXNrIGZvciBjcmVhdGlvbiBvZiBhIG51bWJlciBvZiBIeXBlcnR5IGFkZHJlc3NlcywgdG8gdGhlIGRvbWFpbiBtZXNzYWdlIG5vZGUuCiAgICAgKiBAcGFyYW0gIHtEb21haW59IGRvbWFpbiAtIERvbWFpbiBvZiB0aGUgbWVzc2FnZSBub2RlLgogICAgICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgLSBOdW1iZXIgb2YgYWRkcmVzc2VzIHRvIHJlcXVlc3QKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEh5cGVydHlVUkw+fSAgQSBsaXN0IG9mIEh5cGVydHlVUkwncwogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGRvbWFpbiwgbnVtYmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBsZXQgbWVzc2FnZUZhY3RvcnkgPSBfdGhpcy5fbWVzc2FnZUZhY3Rvcnk7CgogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL2h5cGVydHktYWRkcmVzcy1hbGxvY2F0aW9uJywKICAgICAgICBib2R5OiB7IHZhbHVlOiB7IG51bWJlcjogbnVtYmVyIH0gfQogICAgICB9OwoKICAgICAgLy8gVE9ETzogQXBwbHkgdGhlIG1lc3NhZ2UgZmFjdG9yeQogICAgICAvLyBUaGUgbXNnLW5vZGUtdmVydHggc2hvdWxkIGJlIGNoYW5nZWQgdGhlIGJvZHkgZmllbGQgdG8gcmVjZWl2ZQogICAgICAvLyB0aGUgZm9sbG93aW5nIGZvcm1hdCBib2R5OiB7dmFsdWU6IHtudW1iZXI6IG51bWJlcn19IGJlY2F1c2UKICAgICAgLy8gdGhlIG1lc3NhZ2UgaXMgZ2VuZXJhdGVkIGluIHRoYXQgd2F5IGJ5IHRoZSBtZXNzYWdlIGZhY3Rvcnk7CiAgICAgIC8vIGxldCBtc2cgPSBtZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxdWVzdChfdGhpcy5fdXJsLCAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvaHlwZXJ0eS1hZGRyZXNzLWFsbG9jYXRpb24nLCAnJywge251bWJlcjogbnVtYmVyfSk7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvLyBUT0RPOiBjaGFuZ2UgdGhpcyByZXNwb25zZSBNZXNzYWdlIHVzaW5nIHRoZSBNZXNzYWdlRmFjdG9yeQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICByZXNvbHZlKHJlcGx5LmJvZHkudmFsdWUuYWxsb2NhdGVkKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICd1cmwnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl91cmw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQWRkcmVzc0FsbG9jYXRpb247Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IEFkZHJlc3NBbGxvY2F0aW9uOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE5MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKdmFyIF9SZWdpc3RyeURhdGFNb2RlbDIgPSByZXF1aXJlKCcuL1JlZ2lzdHJ5RGF0YU1vZGVsJyk7Cgp2YXIgX1JlZ2lzdHJ5RGF0YU1vZGVsMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JlZ2lzdHJ5RGF0YU1vZGVsMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9CgovKioKKiAgIEBhdXRob3I6IEdpbCBEaWFzIChnaWwuZGlhc0B0ZWNuaWNvLnVsaXNib2EucHQpCiogICBIeXBlcnR5SW5zdGFuY2UgRGF0YSBNb2RlbCB1c2VkIHRvIG1vZGVsIGluc3RhbmNlcyBvZiBIeXBlcnRpZXMgcnVubmluZyBpbiBkZXZpY2VzIGFuZCBzZXJ2ZXJzLgoqLwoKdmFyIEh5cGVydHlJbnN0YW5jZSA9IGZ1bmN0aW9uIChfUmVnaXN0cnlEYXRhTW9kZWwpIHsKICBfaW5oZXJpdHMoSHlwZXJ0eUluc3RhbmNlLCBfUmVnaXN0cnlEYXRhTW9kZWwpOwoKICBmdW5jdGlvbiBIeXBlcnR5SW5zdGFuY2UoaWQsIHVybCwgZGVzY3JpcHRvciwgaHlwZXJ0eVVSTCwgdXNlciwgZ3VpZCwgcnVudGltZSwgY29udGV4dCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEh5cGVydHlJbnN0YW5jZSk7CgogICAgdmFyIF90aGlzMiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIE9iamVjdC5nZXRQcm90b3R5cGVPZihIeXBlcnR5SW5zdGFuY2UpLmNhbGwodGhpcywgaWQsIHVybCwgZGVzY3JpcHRvcikpOwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKICAgIF90aGlzLl9oeXBlcnR5VVJMID0gaHlwZXJ0eVVSTDsKICAgIF90aGlzLl91c2VyID0gdXNlcjsKICAgIF90aGlzLl9ndWlkID0gZ3VpZDsKICAgIF90aGlzLl9ydW50aW1lID0gcnVudGltZTsKICAgIF90aGlzLl9jb250ZXh0ID0gY29udGV4dDsKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICBfY3JlYXRlQ2xhc3MoSHlwZXJ0eUluc3RhbmNlLCBbewogICAga2V5OiAndXNlcicsCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChpZGVudGl0eSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpcy51c2VyID0gaWRlbnRpdHk7CiAgICB9LAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fdXNlcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdoeXBlcnR5VVJMJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2h5cGVydHlVUkw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSHlwZXJ0eUluc3RhbmNlOwp9KF9SZWdpc3RyeURhdGFNb2RlbDMuZGVmYXVsdCk7CgpleHBvcnRzLmRlZmF1bHQgPSBIeXBlcnR5SW5zdGFuY2U7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vUmVnaXN0cnlEYXRhTW9kZWwiOjE5NH1dLDE5MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKdmFyIF9FdmVudEVtaXR0ZXIyID0gcmVxdWlyZSgnLi4vdXRpbHMvRXZlbnRFbWl0dGVyJyk7Cgp2YXIgX0V2ZW50RW1pdHRlcjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9FdmVudEVtaXR0ZXIyKTsKCnZhciBfQWRkcmVzc0FsbG9jYXRpb24gPSByZXF1aXJlKCcuL0FkZHJlc3NBbGxvY2F0aW9uJyk7Cgp2YXIgX0FkZHJlc3NBbGxvY2F0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FkZHJlc3NBbGxvY2F0aW9uKTsKCnZhciBfSHlwZXJ0eUluc3RhbmNlID0gcmVxdWlyZSgnLi9IeXBlcnR5SW5zdGFuY2UnKTsKCnZhciBfSHlwZXJ0eUluc3RhbmNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0h5cGVydHlJbnN0YW5jZSk7Cgp2YXIgX3NlcnZpY2VGcmFtZXdvcmsgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yaycpOwoKdmFyIF91dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzLmpzJyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgpmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7IH0KCmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9CgovKioKKiBSdW50aW1lIFJlZ2lzdHJ5IEludGVyZmFjZQoqLwoKdmFyIFJlZ2lzdHJ5ID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoUmVnaXN0cnksIF9FdmVudEVtaXR0ZXIpOwoKICAvKioKICAqIFRvIGluaXRpYWxpc2UgdGhlIFJ1bnRpbWUgUmVnaXN0cnkgd2l0aCB0aGUgUnVudGltZVVSTCB0aGF0IHdpbGwgYmUgdGhlIGJhc2lzIHRvIGRlcml2ZSB0aGUgaW50ZXJuYWwgcnVudGltZSBhZGRyZXNzZXMgd2hlbiBhbGxvY2F0aW5nIGFkZHJlc3NlcyB0byBpbnRlcm5hbCBydW50aW1lIGNvbXBvbmVudC4gSW4gYWRkaXRpb24sIHRoZSBSZWdpc3RyeSBkb21haW4gYmFjay1lbmQgdG8gYmUgdXNlZCB0byByZW1vdGVseSByZWdpc3RlciBSdW50aW1lIGNvbXBvbmVudHMsIGlzIGFsc28gcGFzc2VkIGFzIGlucHV0IHBhcmFtZXRlci4KICAqIEBwYXJhbSAge01lc3NhZ2VCdXN9ICAgICAgICAgIG1zZ2J1cyAgICAgICAgICAgICAgICBtc2didXMKICAqIEBwYXJhbSAge0h5cGVydHlSdW50aW1lVVJMfSAgIHJ1bnRpbWVVUkwgICAgICAgICAgICBydW50aW1lVVJMCiAgKiBAcGFyYW0gIHtBcHBTYW5kYm94fSAgICAgICAgICBhcHBTYW5kYm94ICAgICAgICAgICAgYXBwU2FuZGJveAogICogQHBhcmFtICB7RG9tYWluVVJMfSAgICAgICAgICAgcmVtb3RlUmVnaXN0cnkgICAgICAgIHJlbW90ZVJlZ2lzdHJ5CiAgKi8KCiAgZnVuY3Rpb24gUmVnaXN0cnkocnVudGltZVVSTCwgYXBwU2FuZGJveCwgaWRlbnRpdHlNb2R1bGUsIHJlbW90ZVJlZ2lzdHJ5KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVnaXN0cnkpOwoKICAgIC8vIGhvdyBzb21lIGZ1bmN0aW9ucyByZWNlaXZlIHRoZSBwYXJhbWV0ZXJzIGZvciBleGFtcGxlOgogICAgLy8gbmV3IFJlZ2lzdHJ5KCdoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvMTIzJywgYXBwU2FuZGJveCwgaWRNb2R1bGUsIHJlbW90ZVJlZ2lzdHJ5KTsKICAgIC8vIHJlZ2lzdHJ5LnJlZ2lzdGVyU3R1YihzYW5kYm94LCAnc3AxJyk7CiAgICAvLyByZWdpc3RyeS5yZWdpc3Rlckh5cGVydHkoc2FuZEJveCwgJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKICAgIC8vIHJlZ2lzdHJ5LnJlc29sdmUoJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKCiAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgT2JqZWN0LmdldFByb3RvdHlwZU9mKFJlZ2lzdHJ5KS5jYWxsKHRoaXMpKTsKCiAgICBpZiAoIXJ1bnRpbWVVUkwpIHRocm93IG5ldyBFcnJvcigncnVudGltZVVSTCBpcyBtaXNzaW5nLicpOwogICAgLyppZiAoIXJlbW90ZVJlZ2lzdHJ5KSB0aHJvdyBuZXcgRXJyb3IoJ3JlbW90ZVJlZ2lzdHJ5IGlzIG1pc3NpbmcnKTsqLwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKCiAgICBfdGhpcy5yZWdpc3RyeVVSTCA9IHJ1bnRpbWVVUkwgKyAnL3JlZ2lzdHJ5LzEyMyc7CiAgICBfdGhpcy5hcHBTYW5kYm94ID0gYXBwU2FuZGJveDsKICAgIF90aGlzLnJ1bnRpbWVVUkwgPSBydW50aW1lVVJMOwogICAgX3RoaXMucmVtb3RlUmVnaXN0cnkgPSByZW1vdGVSZWdpc3RyeTsKICAgIF90aGlzLmlkTW9kdWxlID0gaWRlbnRpdHlNb2R1bGU7CiAgICBfdGhpcy5pZGVudGlmaWVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAgKyAxKTsKCiAgICBfdGhpcy5oeXBlcnRpZXNMaXN0VG9SZW1vdmUgPSB7fTsKICAgIF90aGlzLmh5cGVydGllc0xpc3QgPSBbXTsKICAgIF90aGlzLnByb3Rvc3R1YnNMaXN0ID0ge307CiAgICBfdGhpcy5zYW5kYm94ZXNMaXN0ID0geyBzYW5kYm94OiB7fSwgYXBwU2FuZGJveDoge30gfTsKICAgIF90aGlzLnBlcExpc3QgPSB7fTsKCiAgICBfdGhpcy5fZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKF90aGlzLnJlZ2lzdHJ5VVJMKS5kb21haW47CiAgICBfdGhpcy5zYW5kYm94ZXNMaXN0LmFwcFNhbmRib3hbcnVudGltZVVSTF0gPSBhcHBTYW5kYm94OwogICAgdmFyIG1zZ0ZhY3RvcnkgPSBuZXcgX3NlcnZpY2VGcmFtZXdvcmsuTWVzc2FnZUZhY3RvcnkoJ2ZhbHNlJywgJ3t9Jyk7CiAgICBfdGhpcy5tZXNzYWdlRmFjdG9yeSA9IG1zZ0ZhY3Rvcnk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgLyoqCiAgKiByZXR1cm4gdGhlIG1lc3NhZ2VCdXMgaW4gdGhpcyBSZWdpc3RyeQogICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICovCgoKICBfY3JlYXRlQ2xhc3MoUmVnaXN0cnksIFt7CiAgICBrZXk6ICdnZXRBcHBTYW5kYm94JywKCgogICAgLyoqCiAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byByZXR1cm4gdGhlIHNhbmRib3ggaW5zdGFuY2Ugd2hlcmUgdGhlIEFwcGxpY2F0aW9uIGlzIGV4ZWN1dGluZy4gSXQgaXMgYXNzdW1lZCB0aGVyZSBpcyBqdXN0IG9uZSBBcHAgcGVyIFJ1bnRpbWUgaW5zdGFuY2UuCiAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFwcFNhbmRib3goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5hcHBTYW5kYm94OwogICAgfQoKICAgIC8qKgogICAgKiBGdW5jdGlvbiB0byBxdWVyeSB0aGUgRG9tYWluIHJlZ2lzdHJ5LCB3aXRoIGFuIHVzZXIgZW1haWwuCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdnZXRVc2VySHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNlckh5cGVydHkoaWRlbnRpZmllcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaWRlbnRpdHlVUkwgPSB2b2lkIDA7CiAgICAgIHZhciBlbWFpbCA9IHZvaWQgMDsKICAgICAgaWYgKGlkZW50aWZpZXIuaW5kZXhPZignQCcpID4gLTEpIHsKICAgICAgICBpZGVudGl0eVVSTCA9ICd1c2VyOi8vJyArIGlkZW50aWZpZXIuc3Vic3RyaW5nKGlkZW50aWZpZXIuaW5kZXhPZignQCcpICsgMSwgaWRlbnRpZmllci5sZW5ndGgpICsgJy8nICsgaWRlbnRpZmllci5zdWJzdHJpbmcoMCwgaWRlbnRpZmllci5pbmRleE9mKCdAJykpOwogICAgICAgIGVtYWlsID0gaWRlbnRpZmllcjsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZGVudGl0eVVSTCA9IGlkZW50aWZpZXI7CiAgICAgICAgZW1haWwgPSAoMCwgX3V0aWxzLmdldFVzZXJFbWFpbEZyb21VUkwpKGlkZW50aWZpZXIpOwogICAgICB9CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ1JFQUQnLCBmcm9tOiBfdGhpcy5yZWdpc3RyeVVSTCwgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgX3RoaXMuX2RvbWFpbiArICcvJywgYm9keTogeyByZXNvdXJjZTogaWRlbnRpdHlVUkwgfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIC8vY29uc29sZS5sb2coJ01FU1NBR0UnLCByZXBseSk7CgogICAgICAgICAgdmFyIGh5cGVydHkgPSB2b2lkIDA7CiAgICAgICAgICB2YXIgbW9zdFJlY2VudCA9IHZvaWQgMDsKICAgICAgICAgIHZhciBsYXN0SHlwZXJ0eSA9IHZvaWQgMDsKICAgICAgICAgIHZhciB2YWx1ZSA9IHJlcGx5LmJvZHkudmFsdWU7CiAgICAgICAgICBjb25zb2xlLmxvZygncmVwbHknLCB2YWx1ZSk7CiAgICAgICAgICBmb3IgKGh5cGVydHkgaW4gdmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlW2h5cGVydHldLmxhc3RNb2RpZmllZCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgaWYgKG1vc3RSZWNlbnQgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgbW9zdFJlY2VudCA9IG5ldyBEYXRlKHZhbHVlW2h5cGVydHldLmxhc3RNb2RpZmllZCk7CiAgICAgICAgICAgICAgICBsYXN0SHlwZXJ0eSA9IGh5cGVydHk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBoeXBlcnR5RGF0ZSA9IG5ldyBEYXRlKHZhbHVlW2h5cGVydHldLmxhc3RNb2RpZmllZCk7CiAgICAgICAgICAgICAgICBpZiAobW9zdFJlY2VudC5nZXRUaW1lKCkgPCBoeXBlcnR5RGF0ZS5nZXRUaW1lKCkpIHsKICAgICAgICAgICAgICAgICAgbW9zdFJlY2VudCA9IGh5cGVydHlEYXRlOwogICAgICAgICAgICAgICAgICBsYXN0SHlwZXJ0eSA9IGh5cGVydHk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgaHlwZXJ0eVVSTCA9IGxhc3RIeXBlcnR5OwoKICAgICAgICAgIGlmIChoeXBlcnR5VVJMID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgnVXNlciBIeXBlcnR5IG5vdCBmb3VuZCcpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBpZFBhY2thZ2UgPSB7CiAgICAgICAgICAgIGlkOiBlbWFpbCwKICAgICAgICAgICAgZGVzY3JpcHRvcjogdmFsdWVbaHlwZXJ0eVVSTF0uZGVzY3JpcHRvciwKICAgICAgICAgICAgaHlwZXJ0eVVSTDogaHlwZXJ0eVVSTAogICAgICAgICAgfTsKCiAgICAgICAgICBjb25zb2xlLmxvZygnPT09PiBSZWdpc3Rlckh5cGVydHkgbWVzc2FnZUJ1bmRsZTogJywgaWRQYWNrYWdlKTsKICAgICAgICAgIHJlc29sdmUoaWRQYWNrYWdlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqICBmdW5jdGlvbiB0byBkZWxldGUgYW4gaHlwZXJ0eUluc3RhbmNlIGluIHRoZSBEb21haW4gUmVnaXN0cnkKICAgICovCgogIH0sIHsKICAgIGtleTogJ2RlbGV0ZUh5cGVydHlJbnN0YW5jZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlSHlwZXJ0eUluc3RhbmNlKHVzZXIsIGh5cGVydHlJbnN0YW5jZSkgewogICAgICAvL1RPRE8gd29ya2luZyBidXQgdGhlIHVzZXIKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtZXNzYWdlID0geyB0eXBlOiAnREVMRVRFJywgZnJvbTogX3RoaXMucmVnaXN0cnlVUkwsCiAgICAgICAgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgX3RoaXMuX2RvbWFpbiArICcvJywKICAgICAgICBib2R5OiB7IHZhbHVlOiB7IHVzZXI6IHVzZXIsIGh5cGVydHlVUkw6IGh5cGVydHlJbnN0YW5jZSB9IH0gfTsKCiAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGUgaHlwZXJ0eSBSZXBseScsIHJlcGx5KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIEZ1bmN0aW9uIHRvIHVwZGF0ZSBhbiBIeXBlcnR5CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICd1cGRhdGVIeXBlcnR5SW5zdGFuY2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUh5cGVydHlJbnN0YW5jZShyZXNvdXJjZSwgdmFsdWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtZXNzYWdlID0geyB0eXBlOiAnVVBEQVRFJywgZnJvbTogX3RoaXMucmVnaXN0cnlVUkwsCiAgICAgICAgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgX3RoaXMuX2RvbWFpbiArICcvJywKICAgICAgICBib2R5OiB7IHJlc291cmNlOiByZXNvdXJjZSwgdmFsdWU6IHZhbHVlIH0gfTsKCiAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3QucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgaHlwZXJ0eSByZXBseScsIHJlcGx5KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHJlZ2lzdGVyIGEgbmV3IEh5cGVydHkgaW4gdGhlIHJ1bnRpbWUgd2hpY2ggcmV0dXJucyB0aGUgSHlwZXJ0eVVSTCBhbGxvY2F0ZWQgdG8gdGhlIG5ldyBIeXBlcnR5LgogICAgKiBAcGFyYW0gIHtTYW5kYm94fSAgICAgICAgICAgICBzYW5kYm94ICAgICAgICAgICAgICAgc2FuZGJveAogICAgKiBAcGFyYW0gIHtIeXBlcnR5Q2F0YWxvZ3VlVVJMfSBIeXBlcnR5Q2F0YWxvZ3VlVVJMICAgZGVzY3JpcHRvcgogICAgKiBAcmV0dXJuIHtIeXBlcnR5VVJMfSAgICAgICAgICBIeXBlcnR5VVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3Rlckh5cGVydHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVySHlwZXJ0eShzYW5kYm94LCBkZXNjcmlwdG9yKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2Fzc3VtaW5nIGRlc2NyaXB0b3IgY29tZSBpbiB0aGlzIGZvcm1hdCwgdGhlIHNlcnZpY2UtcHJvdmlkZXItZG9tYWluIHVybCBpcyByZXRyaWV2ZWQgYnkgYSBzcGxpdCBpbnN0cnVjdGlvbgogICAgICAvL2h5cGVydHktY2F0YWxvZ3VlOi8vPHNlcnZpY2UtcHJvdmlkZXItZG9tYWluPi88Y2F0YWxvZ3VlLW9iamVjdC1pZGVudGlmaWVyPgogICAgICB2YXIgZG9tYWluVXJsID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKGRlc2NyaXB0b3IpLmRvbWFpbjsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzLmlkTW9kdWxlLmxvZ2luV2l0aFJQKCdnb29nbGUnLCAnbWUnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIHZhciBlbWFpbCA9IHJlc3VsdC5lbWFpbDsKICAgICAgICAgIHZhciBpZGVudGl0eVVSTCA9ICd1c2VyOi8vJyArIGVtYWlsLnN1YnN0cmluZyhlbWFpbC5pbmRleE9mKCdAJykgKyAxLCBlbWFpbC5sZW5ndGgpICsgJy8nICsgZW1haWwuc3Vic3RyaW5nKDAsIGVtYWlsLmluZGV4T2YoJ0AnKSk7CgogICAgICAgICAgaWYgKF90aGlzLl9tZXNzYWdlQnVzID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmVqZWN0KCdNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiByZWdpc3RlclN0dWInKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vY2FsbCBjaGVjayBpZiB0aGUgcHJvdG9zdHViIGV4aXN0CiAgICAgICAgICAgIF90aGlzLnJlc29sdmUoJ2h5cGVydHktcnVudGltZTovLycgKyBkb21haW5VcmwpLnRoZW4oZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICBfdGhpcy5yZWdpc3RyeURvbWFpbiA9IGRvbWFpblVybDsKCiAgICAgICAgICAgICAgLy8gVE9ETzogc2hvdWxkIGJlIGltcGxlbWVudGVkIHdpdGggYWRkcmVzc2VzIHBvbGwKICAgICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2Ugd2Ugd2lsbCByZXF1ZXN0IGFuZCByZXR1cm4gb25seSBvbmUKICAgICAgICAgICAgICAvLyBhZGRyZXNzCiAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWRkcmVzc2VzID0gMTsKICAgICAgICAgICAgICBfdGhpcy5hZGRyZXNzQWxsb2NhdGlvbi5jcmVhdGUoZG9tYWluVXJsLCBudW1iZXJPZkFkZHJlc3NlcykudGhlbihmdW5jdGlvbiAoYWRkZXJlc3NMaXN0KSB7CgogICAgICAgICAgICAgICAgYWRkZXJlc3NMaXN0LmZvckVhY2goZnVuY3Rpb24gKGFkZHJlc3MpIHsKCiAgICAgICAgICAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGFkZHJlc3MgKyAnL3N0YXR1cycsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTWVzc2FnZSBhZGRMaXN0ZW5lciBmb3IgOiAnLCBhZGRyZXNzICsgJy9zdGF0dXMgLT4gJyArIG1zZyk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgdmFyIGh5cGVydHkgPSBuZXcgX0h5cGVydHlJbnN0YW5jZTIuZGVmYXVsdChfdGhpcy5pZGVudGlmaWVyLCBfdGhpcy5yZWdpc3RyeVVSTCwgZGVzY3JpcHRvciwgYWRkZXJlc3NMaXN0WzBdLCBpZGVudGl0eVVSTCk7CgogICAgICAgICAgICAgICAgX3RoaXMuaHlwZXJ0aWVzTGlzdC5wdXNoKGh5cGVydHkpOwoKICAgICAgICAgICAgICAgIC8vY2hlY2sgd2hldGhlciB0aGUgcmVjZWl2ZWQgc2FuYm94IGUgQXBwbGljYXRpb25TYW5kYm94IG9yIGEgbm9ybWFsIHNhbmRib3gKICAgICAgICAgICAgICAgIGlmIChzYW5kYm94LnR5cGUgPT09ICdhcHAnKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnNhbmRib3hlc0xpc3QuYXBwU2FuZGJveFthZGRlcmVzc0xpc3RbMF1dID0gc2FuZGJveDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2FuZGJveC50eXBlID09PSAnbm9ybWFsJykgewoKICAgICAgICAgICAgICAgICAgX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94W2FkZGVyZXNzTGlzdFswXV0gPSBzYW5kYm94OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVqZWN0KCdXcm9uZyBTYW5kYm94VHlwZScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vbWVzc2FnZSB0byByZWdpc3RlciB0aGUgbmV3IGh5cGVydHksIHdpdGhpbiB0aGUgZG9tYWluIHJlZ2lzdHJ5CiAgICAgICAgICAgICAgICAvL1RPRE8gdW5jb21tZW50IGFuZCByZW1vdmUgdGhlIG1zZyB2YXJpYWJsZSB3aGVuIHRoZSBtZXNzYWdlRmFjdG9yeSBpcyB1cC4KICAgICAgICAgICAgICAgIC8qbGV0IG1lc3NhZ2VWYWx1ZSA9IHt1c2VyOiBpZGVudGl0eVVSTCwgIGh5cGVydHlEZXNjcmlwdG9yVVJMOiBkZXNjcmlwdG9yLCBoeXBlcnR5VVJMOiBhZGRlcmVzc0xpc3RbMF19OwogICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gX3RoaXMubWVzc2FnZUZhY3RvcnkuY3JlYXRlQ3JlYXRlTWVzc2FnZVJlcXVlc3QoCiAgICAgICAgICAgICAgICAgIF90aGlzLnJlZ2lzdHJ5VVJMLAogICAgICAgICAgICAgICAgICAnZG9tYWluOi8vcmVnaXN0cnkuJyArIF90aGlzLnJlZ2lzdHJ5RG9tYWluICsgJy8nLAogICAgICAgICAgICAgICAgICBtZXNzYWdlVmFsdWUsCiAgICAgICAgICAgICAgICAgICdwb2xpY3knCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21lc3NhZ2VmYWN0b3J5JywgbWVzc2FnZSk7Ki8KICAgICAgICAgICAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdDUkVBVEUnLCBmcm9tOiBfdGhpcy5yZWdpc3RyeVVSTCwgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgX3RoaXMucmVnaXN0cnlEb21haW4gKyAnLycsIGJvZHk6IHsgdmFsdWU6IHsgdXNlcjogaWRlbnRpdHlVUkwsIGh5cGVydHlEZXNjcmlwdG9yVVJMOiBkZXNjcmlwdG9yLCBoeXBlcnR5VVJMOiBhZGRlcmVzc0xpc3RbMF0gfSB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ21lc3NhZ2Vub3JtYWwnLCBtc2cpOwogICAgICAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJz09PT4gUmVnaXN0ZXJIeXBlcnR5IFJlcGx5OiAnLCByZXBseSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXNvbHZlKGFkZGVyZXNzTGlzdFswXSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkcmVzcyBSZWFzb246ICcsIHJlYXNvbik7CiAgICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJlamVjdCgnRmFpbGVkIHRvIG9idGFpbiBhbiBpZGVudGl0eScpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICogVG8gdW5yZWdpc3RlciBhIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBIeXBlcnR5CiAgICAqIEBwYXJhbSAge0h5cGVydHlVUkx9ICAgICAgICAgIEh5cGVydHlVUkwgdXJsICAgICAgICB1cmwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJIeXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiB1bnJlZ2lzdGVySHlwZXJ0eSh1cmwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBmb3VuZCA9IGZhbHNlOwogICAgICAgIHZhciBpbmRleCA9IDA7CgogICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IF90aGlzLmh5cGVydGllc0xpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICB2YXIgaHlwZXJ0eSA9IF90aGlzLmh5cGVydGllc0xpc3RbaW5kZXhdOwogICAgICAgICAgaWYgKGh5cGVydHkgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBpZiAoaHlwZXJ0eS5oeXBlcnR5VVJMID09PSB1cmwpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChmb3VuZCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHJlamVjdCgnSHlwZXJ0eSBub3QgZm91bmQnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIF90aGlzLmh5cGVydGllc0xpc3RbaW5kZXhdOwogICAgICAgICAgcmVzb2x2ZSgnSHlwZXJ0eSBzdWNjZXNzZnVsbHkgZGVsZXRlZCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIGRpc2NvdmVyIHByb3RvY29sIHN0dWJzIGF2YWlsYWJsZSBpbiB0aGUgcnVudGltZSBmb3IgYSBjZXJ0YWluIGRvbWFpbi4gSWYgYXZhaWxhYmxlLCBpdCByZXR1cm5zIHRoZSBydW50aW1lIHVybCBmb3IgdGhlIHByb3RvY29sIHN0dWIgdGhhdCBjb25uZWN0cyB0byB0aGUgcmVxdWVzdGVkIGRvbWFpbi4gUmVxdWlyZWQgYnkgdGhlIHJ1bnRpbWUgQlVTIHRvIHJvdXRlIG1lc3NhZ2VzIHRvIHJlbW90ZSBzZXJ2ZXJzIG9yIHBlZXJzIChkbyB3ZSBuZWVkIHNvbWV0aGluZyBzaW1pbGFyIGZvciBIeXBlcnRpZXM/KS4KICAgICogQHBhcmFtICB7RG9tYWluVVJMfSAgICAgICAgICAgRG9tYWluVVJMICAgICAgICAgICAgdXJsCiAgICAqIEByZXR1cm4ge1J1bnRpbWVVUkx9ICAgICAgICAgICBSdW50aW1lVVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkaXNjb3ZlclByb3Rvc3R1YicsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY292ZXJQcm90b3N0dWIodXJsKSB7CiAgICAgIGlmICghdXJsKSB0aHJvdyBuZXcgRXJyb3IoJ1BhcmFtZXRlciB1cmwgbmVlZGVkJyk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgcmVxdWVzdCA9IF90aGlzLnByb3Rvc3R1YnNMaXN0W3VybF07CgogICAgICAgIGlmIChyZXF1ZXN0ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJlamVjdCgncmVxdWVzdFVwZGF0ZSBjb3VsZG5cJyBnZXQgdGhlIFByb3Rvc3R1YlVSTCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXNvbHZlKHJlcXVlc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUbyByZWdpc3RlciBhIG5ldyBQcm90b2NvbCBTdHViIGluIHRoZSBydW50aW1lIGluY2x1ZGluZyBhcyBpbnB1dCBwYXJhbWV0ZXJzIHRoZSBmdW5jdGlvbiB0byBwb3N0TWVzc2FnZSwgdGhlIERvbWFpblVSTCB0aGF0IGlzIGNvbm5lY3RlZCB3aXRoIHRoZSBzdHViLCB3aGljaCByZXR1cm5zIHRoZSBSdW50aW1lVVJMIGFsbG9jYXRlZCB0byB0aGUgbmV3IFByb3RvY29sU3R1Yi4KICAgICAqIEBwYXJhbSB7U2FuZGJveH0gICAgICAgIFNhbmRib3gKICAgICAqIEBwYXJhbSAge0RvbWFpblVSTH0gICAgIERvbWFpblVSTCBzZXJ2aWNlIHByb3ZpZGVyIGRvbWFpbgogICAgICogQHJldHVybiB7UnVudGltZVByb3RvU3R1YlVSTH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlclN0dWInLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdGVyU3R1YihzYW5kYm94LCBkb21haW5VUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHJ1bnRpbWVQcm90b1N0dWJVUkwgPSB2b2lkIDA7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvL2NoZWNrIGlmIG1lc3NhZ2VCdXMgaXMgcmVnaXN0ZXJlZCBpbiByZWdpc3RyeSBvciBub3QKICAgICAgICBpZiAoX3RoaXMuX21lc3NhZ2VCdXMgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVqZWN0KCdNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiByZWdpc3RlclN0dWInKTsKICAgICAgICB9CgogICAgICAgIC8vVE9ETyBpbXBsZW1lbnQgYSB1bmlxdWUgbnVtYmVyIGZvciB0aGUgcHJvdG9zdHViVVJMCiAgICAgICAgaWYgKCFkb21haW5VUkwuaW5kZXhPZignbXNnLW5vZGUuJykpIHsKICAgICAgICAgIGRvbWFpblVSTCA9IGRvbWFpblVSTC5zdWJzdHJpbmcoZG9tYWluVVJMLmluZGV4T2YoJy4nKSArIDEpOwogICAgICAgIH0KCiAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCA9ICdtc2ctbm9kZS4nICsgZG9tYWluVVJMICsgJy9wcm90b3N0dWIvJyArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwICsgMSk7CgogICAgICAgIC8vIFRPRE86IE9wdGltaXplIHRoaXMKICAgICAgICBfdGhpcy5wcm90b3N0dWJzTGlzdFtkb21haW5VUkxdID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgICAgICBfdGhpcy5zYW5kYm94ZXNMaXN0LnNhbmRib3hbcnVudGltZVByb3RvU3R1YlVSTF0gPSBzYW5kYm94OwoKICAgICAgICAvLyBzYW5kYm94LmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24obXNnKSB7CiAgICAgICAgLy8gICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgIC8vIH0pOwoKICAgICAgICByZXNvbHZlKHJ1bnRpbWVQcm90b1N0dWJVUkwpOwoKICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICBpZiAobXNnLnJlc291cmNlID09PSBtc2cudG8gKyAnL3N0YXR1cycpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1J1bnRpbWVQcm90b3N0dWJVUkwvc3RhdHVzIG1lc3NhZ2U6ICcsIG1zZy5ib2R5LnZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHVucmVnaXN0ZXIgYSBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgcHJvdG9jb2wgc3R1YgogICAgKiBAcGFyYW0gIHtIeXBlcnR5UnVudGltZVVSTH0gICBIeXBlcnR5UnVudGltZVVSTCAgICAgaHlwZXJ0eVJ1bnRpbWVVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJTdHViJywKICAgIHZhbHVlOiBmdW5jdGlvbiB1bnJlZ2lzdGVyU3R1YihoeXBlcnR5UnVudGltZVVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgcnVudGltZVByb3RvU3R1YlVSTCA9IHZvaWQgMDsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBkYXRhID0gX3RoaXMucHJvdG9zdHVic0xpc3RbaHlwZXJ0eVJ1bnRpbWVVUkxdOwoKICAgICAgICBpZiAoZGF0YSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ0Vycm9yIG9uIHVucmVnaXN0ZXJTdHViOiBIeXBlcnR5IG5vdCBmb3VuZCcpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkZWxldGUgX3RoaXMucHJvdG9zdHVic0xpc3RbaHlwZXJ0eVJ1bnRpbWVVUkxdOwogICAgICAgICAgcmVzb2x2ZSgnUHJvdG9zdHViVVJMIHJlbW92ZWQnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyByZWdpc3RlciBhIG5ldyBQb2xpY3kgRW5mb3JjZXIgaW4gdGhlIHJ1bnRpbWUgaW5jbHVkaW5nIGFzIGlucHV0IHBhcmFtZXRlcnMgdGhlIGZ1bmN0aW9uIHRvIHBvc3RNZXNzYWdlLCB0aGUgSHlwZXJ0eVVSTCBhc3NvY2lhdGVkIHdpdGggdGhlIFBFUCwgd2hpY2ggcmV0dXJucyB0aGUgUnVudGltZVVSTCBhbGxvY2F0ZWQgdG8gdGhlIG5ldyBQb2xpY3kgRW5mb3JjZXIgY29tcG9uZW50LgogICAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9IHBvc3RNZXNzYWdlIHBvc3RNZXNzYWdlCiAgICAqIEBwYXJhbSAge0h5cGVydHlVUkx9ICAgICAgICAgIEh5cGVydHlVUkwgICAgICAgICAgICBoeXBlcnR5CiAgICAqIEByZXR1cm4ge0h5cGVydHlSdW50aW1lVVJMfSAgIEh5cGVydHlSdW50aW1lVVJMCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWdpc3RlclBFUCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJQRVAocG9zdE1lc3NhZ2UsIGh5cGVydHkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgLy9UT0RPIGNoZWNrIHdoYXQgcGFyYW1ldGVyIGluIHRoZSBwb3N0TWVzc2FnZSB0aGUgcGVwIGlzLgogICAgICAgIF90aGlzLnBlcExpc3RbaHlwZXJ0eV0gPSBwb3N0TWVzc2FnZTsKICAgICAgICByZXNvbHZlKCdQRVAgcmVnaXN0ZXJlZCB3aXRoIHN1Y2Nlc3MnKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFRvIHVucmVnaXN0ZXIgYSBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgcHJvdG9jb2wgc3R1YgogICAgKiBAcGFyYW0gIHtIeXBlcnR5UnVudGltZVVSTH0gICBIeXBlcnR5UnVudGltZVVSTCAgICAgSHlwZXJ0eVJ1bnRpbWVVUkwKICAgICovCgogIH0sIHsKICAgIGtleTogJ3VucmVnaXN0ZXJQRVAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVucmVnaXN0ZXJQRVAoSHlwZXJ0eVJ1bnRpbWVVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciByZXN1bHQgPSBfdGhpcy5wZXBMaXN0W0h5cGVydHlSdW50aW1lVVJMXTsKCiAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZWplY3QoJ1BlcCBOb3QgZm91bmQuJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc29sdmUoJ1BFUCBzdWNjZXNzZnVsbHkgcmVtb3ZlZC4nKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyByZWNlaXZlIHN0YXR1cyBldmVudHMgZnJvbSBjb21wb25lbnRzIHJlZ2lzdGVyZWQgaW4gdGhlIFJlZ2lzdHJ5LgogICAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICBNZXNzYWdlLk1lc3NhZ2UgICAgICAgZXZlbnQKICAgICovCgogIH0sIHsKICAgIGtleTogJ29uRXZlbnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uRXZlbnQoZXZlbnQpIHt9CiAgICAvLyBUT0RPIGJvZHkuLi4KCgogICAgLyoqCiAgICAqIFRvIGRpc2NvdmVyIHNhbmRib3hlcyBhdmFpbGFibGUgaW4gdGhlIHJ1bnRpbWUgZm9yIGEgY2VydGFpbiBkb21haW4uIFJlcXVpcmVkIGJ5IHRoZSBydW50aW1lIFVBIHRvIGF2b2lkIG1vcmUgdGhhbiBvbmUgc2FuZGJveCBmb3IgdGhlIHNhbWUgZG9tYWluLgogICAgKiBAcGFyYW0gIHtEb21haW5VUkx9IERvbWFpblVSTCB1cmwKICAgICogQHJldHVybiB7UnVudGltZVNhbmRib3h9ICAgICAgICAgICBSdW50aW1lU2FuZGJveAogICAgKi8KCiAgfSwgewogICAga2V5OiAnZ2V0U2FuZGJveCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2FuZGJveCh1cmwpIHsKICAgICAgaWYgKCF1cmwpIHRocm93IG5ldyBFcnJvcignUGFyYW1ldGVyIHVybCBuZWVkZWQnKTsKICAgICAgY29uc29sZS5sb2coJ2dldFNhbmRib3g6ICcsIHVybCk7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgcmVxdWVzdCA9IHZvaWQgMDsKCiAgICAgICAgLy9maXJzdCB0cnkgdG8gZmluZCB0aGUgdXJsIGluIHRoZSBhcHBTYW5kYm94IGxpc3QKICAgICAgICByZXF1ZXN0ID0gX3RoaXMuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W3VybF07CgogICAgICAgIC8vaWYgbm8gYXBwU2FuZGJveCB3YXMgZm91bmQsIHRyeSB0byBzZWFyY2ggaW4gdGhlIG5vcm1hbCBzYW5kYm94ZXMgbGlzdAogICAgICAgIGlmICghcmVxdWVzdCkgewogICAgICAgICAgcmVxdWVzdCA9IF90aGlzLnNhbmRib3hlc0xpc3Quc2FuZGJveFt1cmxdOwoKICAgICAgICAgIGlmICghcmVxdWVzdCkgewoKICAgICAgICAgICAgdmFyIGRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKSh1cmwpLmRvbWFpbjsKCiAgICAgICAgICAgIC8vIHNlYXJjaCBpbiB0aGUgc2FuZGJveGVzIGxpc3QgZm9yIGEgZW50cnkgY29udGFpbmluZyB0aGUgZG9tYWluIGdpdmVuCiAgICAgICAgICAgIGZvciAodmFyIHNhbmRib3ggaW4gX3RoaXMuc2FuZGJveGVzTGlzdC5zYW5kYm94KSB7CiAgICAgICAgICAgICAgaWYgKHNhbmRib3guaW5jbHVkZXMoZG9tYWluKSkgewogICAgICAgICAgICAgICAgcmVxdWVzdCA9IF90aGlzLnNhbmRib3hlc0xpc3Quc2FuZGJveFtzYW5kYm94XTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgICAgICByZWplY3QoJ25vIHNhbmRib3ggZm91bmQgZm9yOiAnICsgdXJsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBUbyB2ZXJpZnkgaWYgc291cmNlIGlzIHZhbGlkIGFuZCB0byByZXNvbHZlIHRhcmdldCBydW50aW1lIHVybCBhZGRyZXNzIGlmIG5lZWRlZCAoZWcgcHJvdG9zdHViIHJ1bnRpbWUgdXJsIGluIGNhc2UgdGhlIG1lc3NhZ2UgaXMgdG8gYmUgZGlzcGF0Y2hlZCB0byBhIHJlbW90ZSBlbmRwb2ludCkuCiAgICAqIEBwYXJhbSAge1VSTC5VUkx9ICB1cmwgICAgICAgdXJsCiAgICAqIEByZXR1cm4ge1Byb21pc2U8VVJMLlVSTD59ICAgICAgICAgICAgICAgICBQcm9taXNlIDxVUkwuVVJMPgogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVzb2x2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZSh1cmwpIHsKICAgICAgY29uc29sZS5sb2coJ3Jlc29sdmUgJyArIHVybCk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL3NwbGl0IHRoZSB1cmwgdG8gZmluZCB0aGUgZG9tYWluVVJMLiBkZWFscyB3aXRoIHRoZSB1cmwgZm9yIGV4YW1wbGUgYXM6CiAgICAgIC8vImh5cGVydHktcnVudGltZTovL3NwMS9wcm90b3N0dWIvMTIzIiwKICAgICAgdmFyIGRvbWFpblVybCA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKSh1cmwpLmRvbWFpbjsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIGlmICghZG9tYWluVXJsLmluZGV4T2YoJ21zZy1ub2RlLicpIHx8ICFkb21haW5VcmwuaW5kZXhPZigncmVnaXN0cnkuJykpIHsKICAgICAgICAgIGRvbWFpblVybCA9IGRvbWFpblVybC5zdWJzdHJpbmcoZG9tYWluVXJsLmluZGV4T2YoJy4nKSArIDEpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlcXVlc3QgPSBfdGhpcy5wcm90b3N0dWJzTGlzdFtkb21haW5VcmxdOwoKICAgICAgICBfdGhpcy5hZGRFdmVudExpc3RlbmVyKCdydW50aW1lOnN0dWJMb2FkZWQnLCBmdW5jdGlvbiAoZG9tYWluVXJsKSB7CiAgICAgICAgICByZXF1ZXN0ID0gX3RoaXMucHJvdG9zdHVic0xpc3RbZG9tYWluVXJsXTsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnUmVzb2x2ZWQ6ICcsIHJlcXVlc3QpOwogICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0KTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHJlcXVlc3QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCdSZXNvbHZlZDogJywgcmVxdWVzdCk7CiAgICAgICAgICByZXNvbHZlKHJlcXVlc3QpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdydW50aW1lOmxvYWRTdHViJywgZG9tYWluVXJsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ21lc3NhZ2VCdXMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5fbWVzc2FnZUJ1czsKICAgIH0KCiAgICAvKioKICAgICogU2V0IHRoZSBtZXNzYWdlQnVzIGluIHRoaXMgUmVnaXN0cnkKICAgICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICAgKi8KICAgICwKICAgIHNldDogZnVuY3Rpb24gc2V0KG1lc3NhZ2VCdXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgX3RoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzOwoKICAgICAgLy8gSW5zdGFsbCBBZGRyZXNzQWxsb2NhdGlvbgogICAgICB2YXIgYWRkcmVzc0FsbG9jYXRpb24gPSBuZXcgX0FkZHJlc3NBbGxvY2F0aW9uMi5kZWZhdWx0KF90aGlzLnJlZ2lzdHJ5VVJMLCBtZXNzYWdlQnVzKTsKICAgICAgX3RoaXMuYWRkcmVzc0FsbG9jYXRpb24gPSBhZGRyZXNzQWxsb2NhdGlvbjsKICAgIH0KICB9XSk7CgogIHJldHVybiBSZWdpc3RyeTsKfShfRXZlbnRFbWl0dGVyMy5kZWZhdWx0KTsKCmV4cG9ydHMuZGVmYXVsdCA9IFJlZ2lzdHJ5Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy9FdmVudEVtaXR0ZXIiOjIwMSwiLi4vdXRpbHMvdXRpbHMuanMiOjIwMiwiLi9BZGRyZXNzQWxsb2NhdGlvbiI6MTkxLCIuL0h5cGVydHlJbnN0YW5jZSI6MTkyLCJzZXJ2aWNlLWZyYW1ld29yayI6MTYxfV0sMTk0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgoqICAgQGF1dGhvcjogR2lsIERpYXMgKGdpbC5kaWFzQHRlY25pY28udWxpc2JvYS5wdCkKKiAgIFJlZ2lzdHJ5IERhdGEgTW9kZWwgaW5jbHVkZXMgYWxsIE9iamVjdHMgdG8gYmUgaGFuZGxlZCBieSB0aGUgUmVnaXN0cnkgZnVuY3Rpb25hbGl0eSBpbmNsdWRpbmcKKi8KCnZhciBSZWdpc3RyeURhdGFNb2RlbCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBSZWdpc3RyeURhdGFNb2RlbChpZCwgdXJsLCBkZXNjcmlwdG9yLCBzdGFydGluZ1RpbWUsIGxhc3RNb2RpZmllZCwgc3RhdHVzLCBzdHVicywgc3R1YnNDb25maWd1cmF0aW9uKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVnaXN0cnlEYXRhTW9kZWwpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX2lkID0gaWQ7CiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2Rlc2NyaXB0b3IgPSBkZXNjcmlwdG9yOwogICAgX3RoaXMuX3N0YXJ0aW5nVGltZSA9IHN0YXJ0aW5nVGltZTsKICAgIF90aGlzLl9sYXN0TW9kaWZpZWQgPSBsYXN0TW9kaWZpZWQ7CiAgICBfdGhpcy5fc3RhdHVzID0gc3RhdHVzOwogICAgX3RoaXMuX3N0dWJzID0gc3R1YnM7CiAgICBfdGhpcy5fc3R1YnNDb25maWd1cmF0aW9uID0gc3R1YnNDb25maWd1cmF0aW9uOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFJlZ2lzdHJ5RGF0YU1vZGVsLCBbewogICAga2V5OiAiaWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBfdGhpcy5faWQ7CiAgICB9CiAgfSwgewogICAga2V5OiAidXJsIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX3VybDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXNjcmlwdG9yIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX3RoaXMuX2Rlc2NyaXB0b3I7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVnaXN0cnlEYXRhTW9kZWw7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFJlZ2lzdHJ5RGF0YU1vZGVsOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0se31dLDE5NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOyAvLyBTZXJ2aWNlIEZyYW1ld29yayBkZXBlbmRlY2llcwoKCi8vTWFpbiBkZXBlbmRlY2llcwoKCnZhciBfUnVudGltZUNhdGFsb2d1ZSA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvUnVudGltZUNhdGFsb2d1ZScpOwoKdmFyIF9SdW50aW1lQ2F0YWxvZ3VlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1J1bnRpbWVDYXRhbG9ndWUpOwoKdmFyIF9SZWdpc3RyeSA9IHJlcXVpcmUoJy4uL3JlZ2lzdHJ5L1JlZ2lzdHJ5Jyk7Cgp2YXIgX1JlZ2lzdHJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1JlZ2lzdHJ5KTsKCnZhciBfSWRlbnRpdHlNb2R1bGUgPSByZXF1aXJlKCcuLi9pZGVudGl0eS9JZGVudGl0eU1vZHVsZScpOwoKdmFyIF9JZGVudGl0eU1vZHVsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JZGVudGl0eU1vZHVsZSk7Cgp2YXIgX1BvbGljeUVuZ2luZSA9IHJlcXVpcmUoJy4uL3BvbGljeS9Qb2xpY3lFbmdpbmUnKTsKCnZhciBfUG9saWN5RW5naW5lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BvbGljeUVuZ2luZSk7Cgp2YXIgX01lc3NhZ2VCdXMgPSByZXF1aXJlKCcuLi9idXMvTWVzc2FnZUJ1cycpOwoKdmFyIF9NZXNzYWdlQnVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01lc3NhZ2VCdXMpOwoKdmFyIF9HcmFwaENvbm5lY3RvciA9IHJlcXVpcmUoJy4uL2dyYXBoY29ubmVjdG9yL0dyYXBoQ29ubmVjdG9yJyk7Cgp2YXIgX0dyYXBoQ29ubmVjdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0dyYXBoQ29ubmVjdG9yKTsKCnZhciBfU3luY2hlck1hbmFnZXIgPSByZXF1aXJlKCcuLi9zeW5jaGVyL1N5bmNoZXJNYW5hZ2VyJyk7Cgp2YXIgX1N5bmNoZXJNYW5hZ2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N5bmNoZXJNYW5hZ2VyKTsKCnZhciBfdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91dGlscycpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiAqIFJ1bnRpbWUgVXNlciBBZ2VudCBJbnRlcmZhY2Ugd2lsbCBwcm9jZXNzIGFsbCB0aGUgZGVwZW5kZWNpZXMgb2YgdGhlIGNvcmUgcnVudGltZTsKICogQGF1dGhvciBWaXRvciBTaWx2YSBbdml0b3ItdC1zaWx2YUB0ZWxlY29tLnB0XQogKiBAdmVyc2lvbiAwLjQuMAogKgogKiBAcHJvcGVydHkge3J1bnRpbWVGYWN0b3J5fSBydW50aW1lRmFjdG9yeSAtIFNwZWNpZmljIGltcGxlbWVudGF0aW9uIG9mIHNhbmRib3g7CiAqIEBwcm9wZXJ0eSB7UnVudGltZUNhdGFsb2d1ZX0gcnVudGltZUNhdGFsb2d1ZSAtIENhdGFsb2d1ZSBvZiBjb21wb25lbnRzIGNhbiBiZSBpbnN0YWxsZWQ7CiAqIEBwcm9wZXJ0eSB7cnVudGltZVVSTH0gcnVudGltZVVSTCAtIFRoaXMgaWRlbnRpZnkgdGhlIGNvcmUgcnVudGltZSwgc2hvdWxkIGJlIHVuaXF1ZTsKICogQHByb3BlcnR5IHtJZGVudGl0eU1vZHVsZX0gaWRlbnRpdHlNb2R1bGUgLSBJZGVudGl0eSBNb2R1bGU7CiAqIEBwcm9wZXJ0eSB7UG9saWN5RW5naW5lfSBwb2xpY3lFbmdpbmUgLSBQb2xpY3kgRW5naW5lIE1vZHVsZTsKICogQHByb3BlcnR5IHtSZWdpc3RyeX0gcmVnaXN0cnkgLSBSZWdpc3RyeSBNb2R1bGU7CiAqIEBwcm9wZXJ0eSB7TWVzc2FnZUJ1c30gbWVzc2FnZUJ1cyAtIE1lc3NhZ2UgQnVzIGlzIHVzZWQgbGlrZSBhIHJvdXRlciB0byByZWRpcmVjdCB0aGUgbWVzc2FnZXMgZnJvbSBvbmUgY29tcG9uZW50IHRvIG90aGVyKHMpCiAqIEBwcm9wZXJ0eSB7R3JhcGhDb25uZWN0b3J9IGdyYXBoQ29ubmVjdG9yIC0gR3JhcGggQ29ubmVjdG9yIGhhbmRsaW5nIEdVSUQgYW5kIGNvbnRhY3RzCiAqLwoKdmFyIFJ1bnRpbWVVQSA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIFJ1bnRpbWUgVXNlciBBZ2VudAogICAqIEBwYXJhbSB7cnVudGltZUZhY3Rvcnl9IHJ1bnRpbWVGYWN0b3J5IC0gU3BlY2lmaWMgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBlbnZpcm9ubWVudCB3aGVyZSB0aGUgY29yZSBydW50aW1lIHdpbGwgcnVuOwogICAqIEBwYXJhbSB7ZG9tYWlufSBkb21haW5VUkwgLSBzcGVjaWZ5IHRoZSBkb21haW4gYmFzZSBmb3IgdGhlIHJ1bnRpbWU7CiAgICovCgogIGZ1bmN0aW9uIFJ1bnRpbWVVQShydW50aW1lRmFjdG9yeSwgZG9tYWluKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUnVudGltZVVBKTsKCiAgICBpZiAoIXJ1bnRpbWVGYWN0b3J5KSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzYW5kYm94IGZhY3RvcnkgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWRvbWFpbikgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0aGUgZG9tYWluIG9mIHJ1bnRpbWUnKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLnJ1bnRpbWVGYWN0b3J5ID0gcnVudGltZUZhY3Rvcnk7CgogICAgY29uc29sZS5sb2coX1J1bnRpbWVDYXRhbG9ndWUyLmRlZmF1bHQpOwoKICAgIF90aGlzLnJ1bnRpbWVDYXRhbG9ndWUgPSBuZXcgX1J1bnRpbWVDYXRhbG9ndWUyLmRlZmF1bHQocnVudGltZUZhY3RvcnkpOwoKICAgIC8vIFRPRE86IHBvc3QgYW5kIHJldHVybiByZWdpc3RyeS9oeXBlcnR5UnVudGltZUluc3RhbmNlIHRvIGFuZCBmcm9tIEJhY2stZW5kIFNlcnZpY2UKICAgIC8vIHRoZSByZXNwb25zZSBpcyBsaWtlOiBydW50aW1lOi8vc3AxLzEyMwoKICAgIHZhciBydW50aW1lVVJMID0gJ3J1bnRpbWU6Ly8nICsgZG9tYWluICsgJy8nICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAgKyAxKTsKICAgIF90aGlzLnJ1bnRpbWVVUkwgPSBydW50aW1lVVJMOwogICAgX3RoaXMuZG9tYWluID0gZG9tYWluOwoKICAgIC8vIFRPRE86IGNoZWNrIGlmIHJ1bnRpbWUgY2F0YWxvZ3VlIG5lZWQgdGhlIHJ1bnRpbWVVUkw7CiAgICBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLnJ1bnRpbWVVUkwgPSBydW50aW1lVVJMOwoKICAgIC8vIEluc3RhbnRpYXRlIHRoZSBpZGVudGl0eSBNb2R1bGUKICAgIF90aGlzLmlkZW50aXR5TW9kdWxlID0gbmV3IF9JZGVudGl0eU1vZHVsZTIuZGVmYXVsdCgpOwoKICAgIC8vIFVzZSB0aGUgc2FuZGJveCBmYWN0b3J5IHRvIGNyZWF0ZSBhbiBBcHBTYW5kYm94OwogICAgLy8gSW4gdGhlIGZ1dHVyZSBjYW4gYmUgZGVjaWRlZCBieSBwb2xpY3lFbmdpbmUgaWYgd2UgbmVlZAogICAgLy8gY3JlYXRlIGEgQXBwU2FuZGJveCBvciBub3Q7CiAgICB2YXIgYXBwU2FuZGJveCA9IHJ1bnRpbWVGYWN0b3J5LmNyZWF0ZUFwcFNhbmRib3goKTsKCiAgICAvLyBJbnN0YW50aWF0ZSB0aGUgUmVnaXN0cnkgTW9kdWxlCiAgICBfdGhpcy5yZWdpc3RyeSA9IG5ldyBfUmVnaXN0cnkyLmRlZmF1bHQocnVudGltZVVSTCwgYXBwU2FuZGJveCwgX3RoaXMuaWRlbnRpdHlNb2R1bGUpOwoKICAgIC8vIEluc3RhbnRpYXRlIHRoZSBQb2xpY3kgRW5naW5lCiAgICBfdGhpcy5wb2xpY3lFbmdpbmUgPSBuZXcgX1BvbGljeUVuZ2luZTIuZGVmYXVsdChfdGhpcy5pZGVudGl0eU1vZHVsZSwgX3RoaXMucmVnaXN0cnkpOwoKICAgIC8vIEluc3RhbnRpYXRlIHRoZSBNZXNzYWdlIEJ1cwogICAgX3RoaXMubWVzc2FnZUJ1cyA9IG5ldyBfTWVzc2FnZUJ1czIuZGVmYXVsdChfdGhpcy5yZWdpc3RyeSk7CiAgICBfdGhpcy5tZXNzYWdlQnVzLnBpcGVsaW5lLmhhbmRsZXJzID0gWwoKICAgIC8vIFBvbGljeSBtZXNzYWdlIGF1dGhvcmlzZQogICAgZnVuY3Rpb24gKGN0eCkgewogICAgICBfdGhpcy5wb2xpY3lFbmdpbmUuYXV0aG9yaXNlKGN0eC5tc2cpLnRoZW4oZnVuY3Rpb24gKGNoYW5nZWRNZ3MpIHsKICAgICAgICBjdHgubXNnID0gY2hhbmdlZE1nczsKICAgICAgICBjdHgubmV4dCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pOwogICAgICAgIGN0eC5mYWlsKHJlYXNvbik7CiAgICAgIH0pOwogICAgfV07CgogICAgLy8gQWRkIHRvIEFwcCBTYW5kYm94IHRoZSBsaXN0ZW5lcjsKICAgIGFwcFNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0pOwoKICAgIC8vIFJlZ2lzdGVyIG1lc3NhZ2VCdXMgb24gUmVnaXN0cnkKICAgIF90aGlzLnJlZ2lzdHJ5Lm1lc3NhZ2VCdXMgPSBfdGhpcy5tZXNzYWdlQnVzOwoKICAgIF90aGlzLnJlZ2lzdHJ5LmFkZEV2ZW50TGlzdGVuZXIoJ3J1bnRpbWU6bG9hZFN0dWInLCBmdW5jdGlvbiAoZG9tYWluVVJMKSB7CgogICAgICBfdGhpcy5sb2FkU3R1Yihkb21haW5VUkwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnJlZ2lzdHJ5LnRyaWdnZXIoJ3J1bnRpbWU6c3R1YkxvYWRlZCcsIGRvbWFpblVSTCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgIH0pOwogICAgfSk7CgogICAgLy8gVXNlIHNhbmRib3ggZmFjdG9yeSB0byB1c2Ugc3BlY2lmaWMgbWV0aG9kcwogICAgLy8gYW5kIHNldCB0aGUgbWVzc2FnZSBidXMgdG8gdGhlIGZhY3RvcnkKICAgIHJ1bnRpbWVGYWN0b3J5Lm1lc3NhZ2VCdXMgPSBfdGhpcy5tZXNzYWdlQnVzOwoKICAgIC8vIEluc3RhbmNpYXRlIHRoZSBTeW5jaGVyTWFuYWdlcjsKICAgIF90aGlzLnN5bmNoZXJNYW5hZ2VyID0gbmV3IF9TeW5jaGVyTWFuYWdlcjIuZGVmYXVsdChfdGhpcy5ydW50aW1lVVJMLCBfdGhpcy5tZXNzYWdlQnVzLCB7fSwgX3RoaXMucnVudGltZUNhdGFsb2d1ZSk7CgogICAgLy8gSW5zdGFudGlhdGUgdGhlIEdyYXBoIENvbm5lY3RvcgogICAgX3RoaXMuZ3JhcGhDb25uZWN0b3IgPSBuZXcgX0dyYXBoQ29ubmVjdG9yMi5kZWZhdWx0KF90aGlzLnJ1bnRpbWVVUkwsIF90aGlzLm1lc3NhZ2VCdXMpOwogIH0KCiAgLyoqCiAgKiBBY2NvbW9kYXRlIGludGVyb3BlcmFiaWxpdHkgaW4gSDJIIGFuZCBwcm90byBvbiB0aGUgZmx5IGZvciBuZXdseSBkaXNjb3ZlcmVkIGRldmljZXMgaW4gTTJNCiAgKiBAcGFyYW0gIHtDYXRhbG9ndWVEYXRhT2JqZWN0Lkh5cGVydHlEZXNjcmlwdG9yfSAgIGRlc2NyaXB0b3IgICAgZGVzY3JpcHRvcgogICovCgoKICBfY3JlYXRlQ2xhc3MoUnVudGltZVVBLCBbewogICAga2V5OiAnZGlzY292ZXJIaXBlcnR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb3ZlckhpcGVydHkoZGVzY3JpcHRvcikge30KICAgIC8vIEJvZHkuLi4KCgogICAgLyoqCiAgICAqIFJlZ2lzdGVyIEh5cGVydHkgZGVwbG95ZWQgYnkgdGhlIEFwcCB0aGF0IGlzIHBhc3NlZCBhcyBpbnB1dCBwYXJhbWV0ZXIuIFRvIGJlIHVzZWQgd2hlbiBBcHAgYW5kIEh5cGVydGllcyBhcmUgZnJvbSB0aGUgc2FtZSBkb21haW4gb3RoZXJ3aXNlIHRoZSBSdW50aW1lVUEgd2lsbCByYWlzZSBhbiBleGNlcHRpb24gYW5kIHRoZSBBcHAgaGFzIHRvIHVzZSB0aGUgbG9hZEh5cGVydHkoLi4pIGZ1bmN0aW9uLgogICAgKiBAcGFyYW0gIHtPYmplY3R9IE9iamVjdCAgICAgICAgICAgICAgICAgICBoeXBlcnR5SW5zdGFuY2UKICAgICogQHBhcmFtICB7VVJMLkh5cGVydHlDYXRhbG9ndWVVUkx9ICAgICAgICAgZGVzY3JpcHRvciAgICAgIGRlc2NyaXB0b3IKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlZ2lzdGVySHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJIeXBlcnR5KGh5cGVydHlJbnN0YW5jZSwgZGVzY3JpcHRvcikge30KICAgIC8vIEJvZHkuLi4KCgogICAgLyoqCiAgICAqIERlcGxveSBIeXBlcnR5IGZyb20gQ2F0YWxvZ3VlIFVSTAogICAgKiBAcGFyYW0gIHtVUkwuSHlwZXJ0eUNhdGFsb2d1ZVVSTH0gICAgaHlwZXJ0eSBoeXBlcnR5RGVzY3JpcHRvciB1cmw7CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdsb2FkSHlwZXJ0eScsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZEh5cGVydHkoaHlwZXJ0eURlc2NyaXB0b3JVUkwpIHsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIWh5cGVydHlEZXNjcmlwdG9yVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ0h5cGVydHkgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCcpOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgdmFyIF9oeXBlcnR5VVJMID0gdm9pZCAwOwogICAgICAgIHZhciBfaHlwZXJ0eVNhbmRib3ggPSB2b2lkIDA7CiAgICAgICAgdmFyIF9oeXBlcnR5RGVzY3JpcHRvciA9IHZvaWQgMDsKICAgICAgICB2YXIgX2h5cGVydHlTb3VyY2VQYWNrYWdlID0gdm9pZCAwOwoKICAgICAgICB2YXIgZXJyb3JSZWFzb24gPSBmdW5jdGlvbiBlcnJvclJlYXNvbihyZWFzb24pIHsKICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgIH07CgogICAgICAgIC8vIEdldCBIeXBlcnR5IGRlc2NyaXB0b3IKICAgICAgICAvLyBUT0RPOiB0aGUgcmVxdWVzdCBNb2R1bGUgc2hvdWxkIGJlIGNoYW5nZWQsCiAgICAgICAgLy8gYmVjYXVzZSBhdCB0aGlzIG1vbWVudCBpdCBpcyBpbmNvbXBhdGlibGUgd2l0aCBub2RlanM7CiAgICAgICAgLy8gUHJvYmFibHkgd2UgbmVlZCB0byBwYXNzIGEgZmFjdG9yeSBsaWtlIHdlIGRvIGZvciBzYW5kYm94ZXM7CiAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0gSHlwZXJ0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTsKICAgICAgICBjb25zb2xlLmluZm8oJ0dldCBoeXBlcnR5IGRlc2NyaXB0b3IgZm9yIDonLCBoeXBlcnR5RGVzY3JpcHRvclVSTCk7CiAgICAgICAgX3RoaXMucnVudGltZUNhdGFsb2d1ZS5nZXRIeXBlcnR5RGVzY3JpcHRvcihoeXBlcnR5RGVzY3JpcHRvclVSTCkudGhlbihmdW5jdGlvbiAoaHlwZXJ0eURlc2NyaXB0b3IpIHsKICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDIgYW5kIDMiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMTogcmV0dXJuIGh5cGVydHkgZGVzY3JpcHRvcicsIGh5cGVydHlEZXNjcmlwdG9yKTsKCiAgICAgICAgICAvLyBoeXBlcnR5IGNvbnRhaW5zIHRoZSBmdWxsIHBhdGggb2YgdGhlIGNhdGFsb2d1ZSBVUkwsIGUuZy4KICAgICAgICAgIC8vIGNhdGFsb2d1ZS5yZXRoaW5rLmV1Ly53ZWxsLWtub3duLy4uLi4uLi4uLi4KICAgICAgICAgIF9oeXBlcnR5RGVzY3JpcHRvciA9IGh5cGVydHlEZXNjcmlwdG9yOwoKICAgICAgICAgIHZhciBzb3VyY2VQYWNrYWdlVVJMID0gaHlwZXJ0eURlc2NyaXB0b3Iuc291cmNlUGFja2FnZVVSTDsKCiAgICAgICAgICBpZiAoc291cmNlUGFja2FnZVVSTCA9PT0gJy9zb3VyY2VQYWNrYWdlJykgewogICAgICAgICAgICByZXR1cm4gaHlwZXJ0eURlc2NyaXB0b3Iuc291cmNlUGFja2FnZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBHZXQgdGhlIGh5cGVydHkgc291cmNlIGNvZGUKICAgICAgICAgIHJldHVybiBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHNvdXJjZVBhY2thZ2VVUkwpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNvdXJjZVBhY2thZ2UpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMjogcmV0dXJuIGh5cGVydHkgc291cmNlIGNvZGUnKTsKCiAgICAgICAgICAvLyBhdCB0aGlzIHBvaW50LCB3ZSBoYXZlIGNvbXBsZXRlZCAic3RlcCA0IGFuZCA1IiBhcyBzaG93biBpbiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kCgogICAgICAgICAgX2h5cGVydHlTb3VyY2VQYWNrYWdlID0gc291cmNlUGFja2FnZTsKCiAgICAgICAgICAvLwogICAgICAgICAgLy8gc3RlcHMgNiAtLSA5IGFyZSBza2lwcGVkLgogICAgICAgICAgLy8gVE9ETzogb24gcmVsZWFzZSBvZiBjb3JlIDAuMjsKICAgICAgICAgIC8vIFRPRE86IFByb21pc2UgdG8gY2hlY2sgdGhlIHBvbGljeSBlbmdpbmUKCiAgICAgICAgICAvLyBtb2NrLXVwIGNvZGU7CiAgICAgICAgICAvLyB0ZW1wb3JhcnkgY29kZSwgb25seQogICAgICAgICAgdmFyIHBvbGljeSA9IHRydWU7CgogICAgICAgICAgcmV0dXJuIHBvbGljeTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChwb2xpY3lSZXN1bHQpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnMzogcmV0dXJuIHBvbGljeSBlbmdpbmUgcmVzdWx0OiAnLCBwb2xpY3lSZXN1bHQpOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgNiB0byA5IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgLy8KICAgICAgICAgIC8vIFN0ZXBzIDYgLS0gOQogICAgICAgICAgLy8gQXMgYSByZXN1bHQgb2YgdGhlIHNpcHBlZCBzdGVwcywgd2Uga25vdyBhdCB0aGlzIHBvaW50IGlmIHdlIGV4ZWN1dGUKICAgICAgICAgIC8vIGluU2FtZVNhbmRib3ggb3Igbm90LgogICAgICAgICAgLy8KCiAgICAgICAgICAvLyBGb3IgdGVzdGluZywganVzdCBhc3N1bWUgd2UgZXhlY3V0ZSBpbiBzYW1lIFNhbmRib3guCiAgICAgICAgICB2YXIgaW5TYW1lU2FuZGJveCA9IHRydWU7CiAgICAgICAgICB2YXIgc2FuZGJveCA9IHZvaWQgMDsKCiAgICAgICAgICBpZiAoaW5TYW1lU2FuZGJveCkgewoKICAgICAgICAgICAgLy8gdGhpcyBkb24ndCBuZWVkIGJlIGEgUHJvbWlzZTsKICAgICAgICAgICAgc2FuZGJveCA9IF90aGlzLnJlZ2lzdHJ5LmdldEFwcFNhbmRib3goKTsKCiAgICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTEgaGVyZS4KICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkoaHlwZXJ0eURlc2NyaXB0b3JVUkwpLmRvbWFpbjsKCiAgICAgICAgICAgICAgLy8gZ2V0U2FuZGJveCwgdGhpcyB3aWxsIHJldHVybiBhIHByb21pc2U7CiAgICAgICAgICAgICAgc2FuZGJveCA9IF90aGlzLnJlZ2lzdHJ5LmdldFNhbmRib3goZG9tYWluKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIC8vIHRoaXMgd2lsbCByZXR1cm4gdGhlIHNhbmRib3ggb3Igb25lIHByb21pc2UgdG8gZ2V0U2FuZGJveDsKICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHNhbmRib3gpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNDogcmV0dXJuIHRoZSBzYW5kYm94Jywgc2FuZGJveCk7CgogICAgICAgICAgLy8gUmV0dXJuIHRoZSBzYW5kYm94IGluZGVwZW50ZWx5IGlmIGl0IHJ1bm5pbmcgaW4gdGhlIHNhbWUgc2FuZGJveCBvciBub3QKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTQgaGVyZS4KICAgICAgICAgIHJldHVybiBzYW5kYm94OwogICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJzQuMTogdHJ5IHRvIHJlZ2lzdGVyIGEgbmV3IHNhbmRib3gnLCByZWFzb24pOwoKICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVkIGZvciB0aGlzIGh5cGVydHkgZGVzY3JpcHRvciB1cmw7CiAgICAgICAgICAvLyBNYWtlIFN0ZXBzIHh4eCAtLS0geHh4CiAgICAgICAgICAvLyBJbnN0YW50aWF0ZSB0aGUgU2FuZGJveAogICAgICAgICAgdmFyIHNhbmRib3ggPSBfdGhpcy5ydW50aW1lRmFjdG9yeS5jcmVhdGVTYW5kYm94KCk7CgogICAgICAgICAgc2FuZGJveC5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuIHNhbmRib3g7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc2FuZGJveCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCc1OiByZXR1cm4gc2FuZGJveCBhbmQgcmVnaXN0ZXInKTsKCiAgICAgICAgICBfaHlwZXJ0eVNhbmRib3ggPSBzYW5kYm94OwoKICAgICAgICAgIC8vIFJlZ2lzdGVyIGh5cGVydHkKICAgICAgICAgIHJldHVybiBfdGhpcy5yZWdpc3RyeS5yZWdpc3Rlckh5cGVydHkoc2FuZGJveCwgaHlwZXJ0eURlc2NyaXB0b3JVUkwpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGh5cGVydHlVUkwpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNjogSHlwZXJ0eSB1cmwsIGFmdGVyIHJlZ2lzdGVyIGh5cGVydHknLCBoeXBlcnR5VVJMKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDE2IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgoKICAgICAgICAgIF9oeXBlcnR5VVJMID0gaHlwZXJ0eVVSTDsKCiAgICAgICAgICBjb25zb2xlLmxvZyhfaHlwZXJ0eURlc2NyaXB0b3IpOwoKICAgICAgICAgIC8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CiAgICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9IHt9OwogICAgICAgICAgaWYgKCEoMCwgX3V0aWxzLmVtcHR5T2JqZWN0KShfaHlwZXJ0eURlc2NyaXB0b3IuY29uZmlndXJhdGlvbikpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25maWd1cmF0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgSlNPTi5wYXJzZShfaHlwZXJ0eURlc2NyaXB0b3IuY29uZmlndXJhdGlvbikpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uZmlndXJhdGlvbiA9IF9oeXBlcnR5RGVzY3JpcHRvci5jb25maWd1cmF0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkwgPSBfdGhpcy5ydW50aW1lVVJMOwoKICAgICAgICAgIC8vIFdlIHdpbGwgZGVwbG95IHRoZSBjb21wb25lbnQgLSBzdGVwIDE3IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgogICAgICAgICAgcmV0dXJuIF9oeXBlcnR5U2FuZGJveC5kZXBsb3lDb21wb25lbnQoX2h5cGVydHlTb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUsIF9oeXBlcnR5VVJMLCBjb25maWd1cmF0aW9uKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkZXBsb3lDb21wb25lbnRTdGF0dXMpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNzogRGVwbG95IGNvbXBvbmVudCBzdGF0dXMgZm9yIGh5cGVydHk6ICcsIGRlcGxveUNvbXBvbmVudFN0YXR1cyk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAxOSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KCiAgICAgICAgICAvLyBBZGQgdGhlIG1lc3NhZ2UgYnVzIGxpc3RlbmVyIHRvIHRoZSBhcHBTYW5kYm94IG9yIGh5cGVydFNhbmRib3g7CiAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKF9oeXBlcnR5VVJMLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIF9oeXBlcnR5U2FuZGJveC5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyMCBvZiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KICAgICAgICAgIHZhciBoeXBlcnR5ID0gewogICAgICAgICAgICBydW50aW1lSHlwZXJ0eVVSTDogX2h5cGVydHlVUkwsCiAgICAgICAgICAgIHN0YXR1czogZGVwbG95Q29tcG9uZW50U3RhdHVzCiAgICAgICAgICB9OwoKICAgICAgICAgIHJlc29sdmUoaHlwZXJ0eSk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyMSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpOwogICAgICAgIH0pLmNhdGNoKGVycm9yUmVhc29uKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIERlcGxveSBTdHViIGZyb20gQ2F0YWxvZ3VlIFVSTCBvciBkb21haW4gdXJsCiAgICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICBkb21haW4gICAgICAgICAgZG9tYWluCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdsb2FkU3R1YicsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZFN0dWIocHJvdG9zdHViVVJMKSB7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFwcm90b3N0dWJVUkwpIHRocm93IG5ldyBFcnJvcignZG9tYWluIHBhcmFtZXRlciBpcyBuZWVkZWQnKTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkocHJvdG9zdHViVVJMKS5kb21haW47CgogICAgICAgIGlmICghZG9tYWluKSB7CiAgICAgICAgICBkb21haW4gPSBwcm90b3N0dWJVUkw7CiAgICAgICAgfQoKICAgICAgICB2YXIgX3N0dWJTYW5kYm94ID0gdm9pZCAwOwogICAgICAgIHZhciBfc3R1YkRlc2NyaXB0b3IgPSB2b2lkIDA7CiAgICAgICAgdmFyIF9ydW50aW1lUHJvdG9TdHViVVJMID0gdm9pZCAwOwogICAgICAgIHZhciBfc3R1YlNvdXJjZVBhY2thZ2UgPSB2b2lkIDA7CgogICAgICAgIHZhciBlcnJvclJlYXNvbiA9IGZ1bmN0aW9uIGVycm9yUmVhc29uKHJlYXNvbikgewogICAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pOwogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfTsKCiAgICAgICAgLy8gRGlzY292ZXIgUHJvdG9jb2wgU3R1YgogICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0tLS0tLS0tLS0tLSBQcm90b1N0dWIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4nKTsKICAgICAgICBjb25zb2xlLmluZm8oJ0Rpc2NvdmVyIG9yIENyZWF0ZSBhIG5ldyBQcm90b1N0dWIgZm9yIGRvbWFpbjogJywgZG9tYWluKTsKICAgICAgICBfdGhpcy5yZWdpc3RyeS5kaXNjb3ZlclByb3Rvc3R1Yihkb21haW4pLnRoZW4oZnVuY3Rpb24gKGRlc2NyaXB0b3IpIHsKICAgICAgICAgIC8vIElzIHJlZ2lzdGVkPwogICAgICAgICAgY29uc29sZS5pbmZvKCcxLiBQcm90byBTdHViIERpc2NvdmVyZWQ6ICcsIGRlc2NyaXB0b3IpOwogICAgICAgICAgX3N0dWJEZXNjcmlwdG9yID0gZGVzY3JpcHRvcjsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCgogICAgICAgICAgcmV0dXJuIF9zdHViRGVzY3JpcHRvcjsKICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAvLyBpcyBub3QgcmVnaXN0ZWQ/CiAgICAgICAgICBjb25zb2xlLmluZm8oJzEuIFByb3RvIFN0dWIgbm90IGZvdW5kOicsIHJlYXNvbik7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZ2V0IFByb3RvU3R1YiBkZXNjcmlwdG9yIHN0ZXAgNCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKICAgICAgICAgIHJldHVybiBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldFN0dWJEZXNjcmlwdG9yKHByb3Rvc3R1YlVSTCk7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoc3R1YkRlc2NyaXB0b3IpIHsKCiAgICAgICAgICBjb25zb2xlLmluZm8oJzIuIHJldHVybiB0aGUgUHJvdG9TdHViIGRlc2NyaXB0b3I6Jywgc3R1YkRlc2NyaXB0b3IpOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgNSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICBfc3R1YkRlc2NyaXB0b3IgPSBzdHViRGVzY3JpcHRvcjsKCiAgICAgICAgICB2YXIgc291cmNlUGFja2FnZVVSTCA9IHN0dWJEZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2VVUkw7CgogICAgICAgICAgaWYgKHNvdXJjZVBhY2thZ2VVUkwgPT09ICcvc291cmNlUGFja2FnZScpIHsKICAgICAgICAgICAgcmV0dXJuIHN0dWJEZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2U7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gd2UgbmVlZCB0byBnZXQgUHJvdG9TdHViIFNvdXJjZSBjb2RlIGZyb20gZGVzY3JpcHRvciAtIHN0ZXAgNiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKICAgICAgICAgIHJldHVybiBfdGhpcy5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHNvdXJjZVBhY2thZ2VVUkwpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN0dWJTb3VyY2VQYWNrYWdlKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJzMuIHJldHVybiB0aGUgUHJvdG9TdHViIFNvdXJjZSBDb2RlOiAnLCBzdHViU291cmNlUGFja2FnZSk7CgogICAgICAgICAgLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCA3IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgIF9zdHViU291cmNlUGFja2FnZSA9IHN0dWJTb3VyY2VQYWNrYWdlOwoKICAgICAgICAgIC8vIFRPRE86IENoZWNrIG9uIFBFUCAocG9saWN5IEVuZ2luZSkgaWYgd2UgbmVlZCB0aGUgc2FuZGJveCBhbmQgY2hlY2sgaWYgdGhlIFNhbmRib3ggRmFjdG9yeSBoYXZlIHRoZSBjb250ZXh0IHNhbmRib3g7CiAgICAgICAgICB2YXIgcG9saWN5ID0gdHJ1ZTsKICAgICAgICAgIHJldHVybiBwb2xpY3k7CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocG9saWN5KSB7CiAgICAgICAgICAvLyB0aGlzIHdpbGwgcmV0dXJuIHRoZSBzYW5kYm94IG9yIG9uZSBwcm9taXNlIHRvIGdldFNhbmRib3g7CiAgICAgICAgICByZXR1cm4gX3RoaXMucmVnaXN0cnkuZ2V0U2FuZGJveChkb21haW4pOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHN0dWJTYW5kYm94KSB7CgogICAgICAgICAgY29uc29sZS5pbmZvKCc0LiBpZiB0aGUgc2FuZGJveCBpcyByZWdpc3RlcmVkIHRoZW4gcmV0dXJuIHRoZSBzYW5kYm94Jywgc3R1YlNhbmRib3gpOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgIF9zdHViU2FuZGJveCA9IHN0dWJTYW5kYm94OwogICAgICAgICAgcmV0dXJuIHN0dWJTYW5kYm94OwogICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnNS4gU2FuZGJveCB3YXMgbm90IGZvdW5kLCBjcmVhdGluZyBhIG5ldyBvbmUnLCByZWFzb24pOwoKICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVkIGZvciB0aGlzIHN0dWIgZGVzY3JpcHRvciB1cmw7CiAgICAgICAgICAvLyBNYWtlIFN0ZXBzIHh4eCAtLS0geHh4CiAgICAgICAgICAvLyBJbnN0YW50aWF0ZSB0aGUgU2FuZGJveAogICAgICAgICAgdmFyIHNhbmRib3ggPSBfdGhpcy5ydW50aW1lRmFjdG9yeS5jcmVhdGVTYW5kYm94KCk7CiAgICAgICAgICBzYW5kYm94LmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICByZXR1cm4gc2FuZGJveDsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzYW5kYm94KSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJzYuIHJldHVybiB0aGUgc2FuZGJveCBpbnN0YW5jZSBhbmQgcmVnaXN0ZXInLCBzYW5kYm94LCAndG8gZG9tYWluICcsIGRvbWFpbik7CgogICAgICAgICAgX3N0dWJTYW5kYm94ID0gc2FuZGJveDsKCiAgICAgICAgICAvLyB3ZSBuZWVkIHJlZ2lzdGVyIHN0dWIgb24gcmVnaXN0cnkgLSBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKICAgICAgICAgIHJldHVybiBfdGhpcy5yZWdpc3RyeS5yZWdpc3RlclN0dWIoX3N0dWJTYW5kYm94LCBkb21haW4pOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJ1bnRpbWVQcm90b1N0dWJVUkwpIHsKCiAgICAgICAgICBjb25zb2xlLmluZm8oJzcuIHJldHVybiB0aGUgcnVudGltZSBwcm90b3N0dWIgdXJsOiAnLCBydW50aW1lUHJvdG9TdHViVVJMKTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICBfcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CgogICAgICAgICAgY29uc29sZS5sb2coX3N0dWJEZXNjcmlwdG9yKTsKCiAgICAgICAgICAvLyBFeHRlbmQgb3JpZ2luYWwgaHlwZXJ0eSBjb25maWd1cmF0aW9uOwogICAgICAgICAgdmFyIGNvbmZpZ3VyYXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBKU09OLnBhcnNlKF9zdHViRGVzY3JpcHRvci5jb25maWd1cmF0aW9uKSk7CiAgICAgICAgICBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkwgPSBfdGhpcy5ydW50aW1lVVJMOwoKICAgICAgICAgIC8vIERlcGxveSBDb21wb25lbnQgc3RlcCB4eHgKICAgICAgICAgIHJldHVybiBfc3R1YlNhbmRib3guZGVwbG95Q29tcG9uZW50KF9zdHViU291cmNlUGFja2FnZS5zb3VyY2VDb2RlLCBydW50aW1lUHJvdG9TdHViVVJMLCBjb25maWd1cmF0aW9uKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkZXBsb3lDb21wb25lbnRTdGF0dXMpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnODogcmV0dXJuIGRlcGxveSBjb21wb25lbnQgZm9yIHNhbmRib3ggc3RhdHVzOiAnLCBkZXBsb3lDb21wb25lbnRTdGF0dXMpOwoKICAgICAgICAgIC8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAoKICAgICAgICAgIC8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIKICAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoX3J1bnRpbWVQcm90b1N0dWJVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgX3N0dWJTYW5kYm94LnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKCiAgICAgICAgICAvLyBMb2FkIFN0dWIgZnVuY3Rpb24gcmVzb2x2ZWQgd2l0aCBzdWNjZXNzOwogICAgICAgICAgdmFyIHN0dWIgPSB7CiAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkw6IF9ydW50aW1lUHJvdG9TdHViVVJMLAogICAgICAgICAgICBzdGF0dXM6IGRlcGxveUNvbXBvbmVudFN0YXR1cwogICAgICAgICAgfTsKCiAgICAgICAgICByZXNvbHZlKHN0dWIpOwogICAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbicpOwogICAgICAgIH0pLmNhdGNoKGVycm9yUmVhc29uKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFVzZWQgdG8gY2hlY2sgZm9yIHVwZGF0ZXMgYWJvdXQgY29tcG9uZW50cyBoYW5kbGVkIGluIHRoZSBDYXRhbG9ndWUgaW5jbHVkaW5nIHByb3RvY29sIHN0dWJzIGFuZCBIeXBlcnRpZXMuIGNoZWNrIHJlbGF0aW9uc2hpcCB3aXRoIGxpZmVjeWNsZSBtYW5hZ2VtZW50IHByb3ZpZGVkIGJ5IFNlcnZpY2UgV29ya2VycwogICAgKiBAcGFyYW0gIHtDYXRhbG9ndWVVUkx9ICAgICAgIHVybCB1cmwKICAgICovCgogIH0sIHsKICAgIGtleTogJ2NoZWNrRm9yVXBkYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0ZvclVwZGF0ZSh1cmwpIHsKICAgICAgLy8gQm9keS4uLgogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJ1bnRpbWVVQTsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gUnVudGltZVVBOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi9idXMvTWVzc2FnZUJ1cyI6MTgxLCIuLi9ncmFwaGNvbm5lY3Rvci9HcmFwaENvbm5lY3RvciI6MTg1LCIuLi9pZGVudGl0eS9JZGVudGl0eU1vZHVsZSI6MTg3LCIuLi9wb2xpY3kvUG9saWN5RW5naW5lIjoxOTAsIi4uL3JlZ2lzdHJ5L1JlZ2lzdHJ5IjoxOTMsIi4uL3N5bmNoZXIvU3luY2hlck1hbmFnZXIiOjIwMCwiLi4vdXRpbHMvdXRpbHMiOjIwMiwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9SdW50aW1lQ2F0YWxvZ3VlIjoxNjB9XSwxOTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIE9iamVjdEFsbG9jYXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICAqLwoKICAvKioKICAgKiBDcmVhdGUgYW4gT2JqZWN0IEFsbG9jYXRpb24KICAgKiBAcGFyYW0gIHtVUkwuVVJMfSAgICAgIHVybCAtIHVybCBmcm9tIHdobyBpcyBzZW5kaW5nIHRoZSBtZXNzYWdlCiAgICogQHBhcmFtICB7TWluaUJ1c30gICAgICBidXMgLSBNaW5pQnVzIHVzZWQgZm9yIGFkZHJlc3MgYWxsb2NhdGlvbgogICAqLwoKICBmdW5jdGlvbiBPYmplY3RBbGxvY2F0aW9uKHVybCwgYnVzKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2JqZWN0QWxsb2NhdGlvbik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2J1cyA9IGJ1czsKICB9CgogIC8qKgogICAqIGdldCB0aGUgVVJMIHZhbHVlCiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdXJsIHZhbHVlOwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKE9iamVjdEFsbG9jYXRpb24sIFt7CiAgICBrZXk6ICdjcmVhdGUnLAoKCiAgICAvKioKICAgICAqIEFzayBmb3IgY3JlYXRpb24gb2YgYSBudW1iZXIgb2YgT2JqZWN0IGFkZHJlc3NlcywgdG8gdGhlIGRvbWFpbiBtZXNzYWdlIG5vZGUuCiAgICAgKiBAcGFyYW0gIHtEb21haW59IGRvbWFpbiAtIERvbWFpbiBvZiB0aGUgbWVzc2FnZSBub2RlLgogICAgICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgLSBOdW1iZXIgb2YgYWRkcmVzc2VzIHRvIHJlcXVlc3QKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdFVSTD59ICBBIGxpc3Qgb2YgT2JqZWN0VVJMJ3MKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShkb21haW4sIHNjaGVtZSwgY2hpbGRyZW4sIG51bWJlcikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX3VybCwgdG86ICdkb21haW46Ly9tc2ctbm9kZS4nICsgZG9tYWluICsgJy9vYmplY3QtYWRkcmVzcy1hbGxvY2F0aW9uJywKICAgICAgICBib2R5OiB7IHNjaGVtZTogc2NoZW1lLCBjaGlsZHJlblJlc291cmNlczogY2hpbGRyZW4sIHZhbHVlOiB7IG51bWJlcjogbnVtYmVyIH0gfQogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXBseS5ib2R5LnZhbHVlLmFsbG9jYXRlZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAndXJsJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXJsOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE9iamVjdEFsbG9jYXRpb247Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IE9iamVjdEFsbG9jYXRpb247Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMTk3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTsKCnZhciBfU3Vic2NyaXB0aW9uID0gcmVxdWlyZSgnLi9TdWJzY3JpcHRpb24nKTsKCnZhciBfU3Vic2NyaXB0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N1YnNjcmlwdGlvbik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9Cgp2YXIgT2JzZXJ2ZXJPYmplY3QgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gT2JzZXJ2ZXJPYmplY3QocGFyZW50LCB1cmwsIGNoaWxkcmVucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9ic2VydmVyT2JqZWN0KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2NoaWxkcmVucyA9IGNoaWxkcmVuczsKCiAgICBfdGhpcy5fYnVzID0gcGFyZW50Ll9idXM7CiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHt9OwogIH0KCiAgX2NyZWF0ZUNsYXNzKE9ic2VydmVyT2JqZWN0LCBbewogICAga2V5OiAnYWRkU3Vic2NyaXB0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTdWJzY3JpcHRpb24oaHlwZXJ0eSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eV0gPSBuZXcgX1N1YnNjcmlwdGlvbjIuZGVmYXVsdChfdGhpcy5fYnVzLCBoeXBlcnR5LCBfdGhpcy5fdXJsLCBfdGhpcy5fY2hpbGRyZW5zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdyZW1vdmVTdWJzY3JpcHRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVN1YnNjcmlwdGlvbihoeXBlcnR5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKGh5cGVydHkpLmRvbWFpbjsKICAgICAgdmFyIG9ialVSTFN1YnNjcmlwdGlvbiA9IF90aGlzLl91cmwgKyAnL3N1YnNjcmlwdGlvbic7CgogICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eV07CiAgICAgIGlmIChzdWJzY3JpcHRpb24pIHsKICAgICAgICAvL3Vuc3Vic2NyaWJlIG1zZyB0byB0aGUgUmVwb3J0ZXIgU00KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICd1bnN1YnNjcmliZScsIGZyb206IF90aGlzLl9wYXJlbnQuX3VybCwgdG86IG9ialVSTFN1YnNjcmlwdGlvbiwKICAgICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwgfQogICAgICAgIH0pOwoKICAgICAgICAvL1RPRE86IHNob3VsZCBJIHdhaXQgZm9yIHJlc3BvbnNlIGJlZm9yZSB1bnN1YnNjcmliZSBvbiBtc2ctbm9kZQogICAgICAgIC8vdW5zdWJzY3JpYmUgbXNnIHRvIHRoZSBkb21haW4gbm9kZQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3Vuc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX3BhcmVudC5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL3NtJywKICAgICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwsIGNoaWxkcmVuUmVzb3VyY2VzOiBfdGhpcy5fY2hpbGRyZW5zIH0KICAgICAgICB9KTsKCiAgICAgICAgc3Vic2NyaXB0aW9uLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgICAgZGVsZXRlIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHldOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gT2JzZXJ2ZXJPYmplY3Q7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IE9ic2VydmVyT2JqZWN0Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy91dGlscyI6MjAyLCIuL1N1YnNjcmlwdGlvbiI6MTk5fV0sMTk4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTsKCnZhciBfU3Vic2NyaXB0aW9uID0gcmVxdWlyZSgnLi9TdWJzY3JpcHRpb24nKTsKCnZhciBfU3Vic2NyaXB0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N1YnNjcmlwdGlvbik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9Cgp2YXIgUmVwb3J0ZXJPYmplY3QgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUmVwb3J0ZXJPYmplY3QocGFyZW50LCBvd25lciwgdXJsLCBjaGlsZHJlbnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXBvcnRlck9iamVjdCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fcGFyZW50ID0gcGFyZW50OwogICAgX3RoaXMuX293bmVyID0gb3duZXI7CiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2NoaWxkcmVucyA9IGNoaWxkcmVuczsKCiAgICBfdGhpcy5fb2JqU3Vic2NyaXB0b3JVUkwgPSBfdGhpcy5fdXJsICsgJy9zdWJzY3JpcHRpb24nOwogICAgX3RoaXMuX2J1cyA9IHBhcmVudC5fYnVzOwogICAgX3RoaXMuX3N1YnNjcmlwdGlvbnMgPSB7fTsKCiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsKICB9CgogIF9jcmVhdGVDbGFzcyhSZXBvcnRlck9iamVjdCwgW3sKICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9hZGQgb2JqZWN0VVJMIGZvcndhcmQuLi4KICAgICAgX3RoaXMuX29iakZvcndhcmQgPSBfdGhpcy5fYnVzLmFkZEZvcndhcmQoX3RoaXMuX3VybCwgX3RoaXMuX293bmVyKTsKCiAgICAgIC8vYWRkIHN1YnNjcmlwdGlvbiBsaXN0ZW5lci4uLgogICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uTGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl9vYmpTdWJzY3JpcHRvclVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIGNvbnNvbGUubG9nKF90aGlzLl9vYmpTdWJzY3JpcHRvclVSTCArICctUkNWOiAnLCBtc2cpOwogICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ3N1YnNjcmliZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZVN1YnNjcmliZShtc2cpO2JyZWFrOwogICAgICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVVblN1YnNjcmliZShtc2cpO2JyZWFrOwogICAgICAgICAgY2FzZSAncmVzcG9uc2UnOgogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVSZXNwb25zZShtc2cpO2JyZWFrOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICAvL2FkZCBjaGlsZHJlbiBsaXN0ZW5lcnMuLi4KICAgICAgdmFyIGNoaWxkQmFzZVVSTCA9IF90aGlzLl91cmwgKyAnL2NoaWxkcmVuLyc7CiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOwogICAgICBfdGhpcy5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgdmFyIGNoaWxkVVJMID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7CiAgICAgICAgdmFyIGNoaWxkTGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKGNoaWxkVVJMLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAvL1RPRE86IHdoYXQgdG9kbyBoZXJlPyBQcm9jZXNzIGNoaWxkIGNyZWF0aW9ucz8KICAgICAgICAgIGNvbnNvbGUubG9nKCdTeW5jaGVyTWFuYWdlci0nICsgY2hpbGRVUkwgKyAnLVJDVjogJywgbXNnKTsKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goY2hpbGRMaXN0ZW5lcik7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9vYmpGb3J3YXJkLnJlbW92ZSgpOwoKICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbkxpc3RlbmVyLnJlbW92ZSgpOwoKICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGNsKSB7CiAgICAgICAgY2wucmVtb3ZlKCk7CiAgICAgIH0pOwoKICAgICAgLy9yZW1vdmUgYWxsIHN1YnNjcmlwdGlvbnMKICAgICAgT2JqZWN0LmtleXMoX3RoaXMuX3N1YnNjcmlwdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25zW2tleV0uX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKF90aGlzLl9vd25lcikuZG9tYWluOwoKICAgICAgLy9kZWxldGUgbXNnIHRvIGFsbCBzdWJzY3JpcHRpb25zCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5fb2JqU3Vic2NyaXB0b3JVUkwsIHRvOiBfdGhpcy5fdXJsICsgJy9jaGFuZ2VzJwogICAgICB9KTsKCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5fcGFyZW50Ll91cmwsIHRvOiAnZG9tYWluOi8vbXNnLW5vZGUuJyArIGRvbWFpbiArICcvb2JqZWN0LWFkZHJlc3MtYWxsb2NhdGlvbicsCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCwgY2hpbGRyZW5SZXNvdXJjZXM6IF90aGlzLl9jaGlsZHJlbnMgfQogICAgICB9KTsKCiAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgIGRlbGV0ZSBfdGhpcy5fcGFyZW50Ll9yZXBvcnRlcnNbX3RoaXMuX3VybF07CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uUmVtb3RlUmVzcG9uc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlbW90ZVJlc3BvbnNlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogX3RoaXMuX3VybCwKICAgICAgICBib2R5OiB7IGNvZGU6IG1zZy5ib2R5LmNvZGUsIHNvdXJjZTogbXNnLmZyb20gfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25SZW1vdGVTdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlbW90ZVN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGh5cGVydHlVUkwgPSBtc2cuYm9keS5zdWJzY3JpYmVyOwoKICAgICAgLy92YWxpZGF0ZSBpZiBzdWJzY3JpcHRpb24gYWxyZWFkeSBleGlzdHM/CiAgICAgIGlmIChfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VVJMXSkgewogICAgICAgIHZhciBlcnJvck1zZyA9IHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IGh5cGVydHlVUkwsCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDUwMCwgZGVzYzogJ1N1YnNjcmlwdGlvbiBmb3IgKCcgKyBfdGhpcy5fdXJsICsgJyA6ICcgKyBoeXBlcnR5VVJMICsgJykgYWxyZWFkeSBleGlzdHMhJyB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShlcnJvck1zZyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvL2FzayB0byBzdWJzY3JpYmUgdG8gU3luY2hlcj8gKGRlcGVuZHMgb24gdGhlIG9wZXJhdGlvbiBtb2RlKQogICAgICAvL1RPRE86IGdldCBtb2RlIGZyb20gb2JqZWN0IQogICAgICB2YXIgbW9kZSA9ICdzdWIvcHViJzsKCiAgICAgIGlmIChtb2RlID09PSAnc3ViL3B1YicpIHsKICAgICAgICAvL2ZvcndhcmQgdG8gSHlwZXJ0eSBvd25lcgogICAgICAgIHZhciBmb3J3YXJkTXNnID0gewogICAgICAgICAgdHlwZTogJ2ZvcndhcmQnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogX3RoaXMuX293bmVyLAogICAgICAgICAgYm9keTogeyB0eXBlOiBtc2cudHlwZSwgZnJvbTogaHlwZXJ0eVVSTCwgdG86IF90aGlzLl91cmwgfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoZm9yd2FyZE1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZm9yd2FyZC1yZXBseTogJywgcmVwbHkpOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVUkxdID0gbmV3IF9TdWJzY3JpcHRpb24yLmRlZmF1bHQoX3RoaXMuX2J1cywgaHlwZXJ0eVVSTCwgX3RoaXMuX3VybCwgX3RoaXMuX2NoaWxkcmVucyk7CiAgICAgICAgICB9CgogICAgICAgICAgLy9zZW5kIHN1YnNjcmliZS1yZXNwb25zZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiByZXBseS5ib2R5CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZVVuU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVVblN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGh5cGVydHlVUkwgPSBtc2cuYm9keS5zdWJzY3JpYmVyOwoKICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVUkxdOwogICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgc3Vic2NyaXB0aW9uLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgICAgZGVsZXRlIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVUkxdOwoKICAgICAgICAvL1RPRE86IHNlbmQgdW4tc3Vic2NyaWJlIG1lc3NhZ2UgdG8gU3luY2hlcj8gKGRlcGVuZHMgb24gdGhlIG9wZXJhdGlvbiBtb2RlKQogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVwb3J0ZXJPYmplY3Q7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IFJlcG9ydGVyT2JqZWN0Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuLi91dGlscy91dGlscyI6MjAyLCIuL1N1YnNjcmlwdGlvbiI6MTk5fV0sMTk5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKGJ1cywgaHlwZXJ0eSwgdXJsLCBjaGlsZHJlbnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWJzY3JpcHRpb24pOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB2YXIgY2hpbGRCYXNlVVJMID0gdXJsICsgJy9jaGlsZHJlbi8nOwogICAgdmFyIGNoYW5nZVVSTCA9IHVybCArICcvY2hhbmdlcyc7CgogICAgLy9wcm9jZXNzIGRlbGV0ZSBtZXNzYWdlCiAgICBfdGhpcy5fZGVsZXRlTGlzdGVuZXIgPSBidXMuYWRkTGlzdGVuZXIoY2hhbmdlVVJMLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGlmIChtc2cudHlwZSA9PT0gJ2RlbGV0ZScpIHsKICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaXB0aW9uLURFTEVURTogJywgbXNnKTsKICAgICAgICB2YXIgZGVsZXRlTWVzc2FnZVRvSHlwZXJ0eSA9IHsKICAgICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBtc2cuZnJvbSwgdG86IGh5cGVydHksCiAgICAgICAgICBib2R5OiB7IHJlc291cmNlOiB1cmwgfQogICAgICAgIH07CgogICAgICAgIC8vc2VuZCBkZWxldGUgdG8gaHlwZXJ0eQogICAgICAgIGJ1cy5wb3N0TWVzc2FnZShkZWxldGVNZXNzYWdlVG9IeXBlcnR5LCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWJzY3JpcHRpb24tREVMRVRFLVJFUExZOiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgLy9zdWJzY3JpcHRpb24gYWNjZXB0ZWQgKGFkZCBmb3J3YXJkIGFuZCBzdWJzY3JpcHRpb24pCiAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIgPSBidXMuYWRkRm9yd2FyZChjaGFuZ2VVUkwsIGh5cGVydHkpOwoKICAgIC8vYWRkIGZvcndhcmQgZm9yIGNoaWxkcmVuCiAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsKICAgIGNoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICB2YXIgY2hpbGRyZW5Gb3J3YXJkID0gYnVzLmFkZEZvcndhcmQoY2hpbGRCYXNlVVJMICsgY2hpbGQsIGh5cGVydHkpOwogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChjaGlsZHJlbkZvcndhcmQpOwogICAgfSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoU3Vic2NyaXB0aW9uLCBbewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2RlbGV0ZUxpc3RlbmVyLnJlbW92ZSgpOwogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChmb3J3YXJkKSB7CiAgICAgICAgZm9yd2FyZC5yZW1vdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU3Vic2NyaXB0aW9uOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBTdWJzY3JpcHRpb247Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMjAwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Cgp2YXIgX3V0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTsKCnZhciBfT2JqZWN0QWxsb2NhdGlvbiA9IHJlcXVpcmUoJy4vT2JqZWN0QWxsb2NhdGlvbicpOwoKdmFyIF9PYmplY3RBbGxvY2F0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX09iamVjdEFsbG9jYXRpb24pOwoKdmFyIF9SZXBvcnRlck9iamVjdCA9IHJlcXVpcmUoJy4vUmVwb3J0ZXJPYmplY3QnKTsKCnZhciBfUmVwb3J0ZXJPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUmVwb3J0ZXJPYmplY3QpOwoKdmFyIF9PYnNlcnZlck9iamVjdCA9IHJlcXVpcmUoJy4vT2JzZXJ2ZXJPYmplY3QnKTsKCnZhciBfT2JzZXJ2ZXJPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfT2JzZXJ2ZXJPYmplY3QpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiAqIEBhdXRob3IgbWljYWVscGVkcm9zYUBnbWFpbC5jb20KICogQ29yZSBTeW5jcm9uaXphdGlvbiBzeXN0ZW0uCiAqLwoKdmFyIFN5bmNoZXJNYW5hZ2VyID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICBfdXJsOiBVUkwKICBfYnVzOiBNaW5pQnVzCiAgX3JlZ2lzdHJ5OiBSZWdpc3RyeQogIF9hbGxvY2F0b3I6IE9iamVjdEFsbG9jYXRpb24KICAgX3JlcG9ydGVyczogeyBPYmplY3RVUkw6IFJlcG9ydGVyT2JqZWN0IH0KICBfb2JzZXJ2ZXJzOiB7IE9iamVjdFVSTDogT2JzZXJ2ZXJPYmplY3QgfQogICovCgogIGZ1bmN0aW9uIFN5bmNoZXJNYW5hZ2VyKHJ1bnRpbWVVUkwsIGJ1cywgcmVnaXN0cnksIGNhdGFsb2csIGFsbG9jYXRvcikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN5bmNoZXJNYW5hZ2VyKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9idXMgPSBidXM7CiAgICBfdGhpcy5fcmVnaXN0cnkgPSByZWdpc3RyeTsKICAgIF90aGlzLl9jYXRhbG9nID0gY2F0YWxvZzsKCiAgICAvL1RPRE86IHRoZXNlIHNob3VsZCBiZSBzYXZlZCBpbiBwZXJzaXN0ZW5jZSBlbmdpbmU/CiAgICBfdGhpcy5fdXJsID0gcnVudGltZVVSTCArICcvc20nOwogICAgX3RoaXMuX29iamVjdFVSTCA9IHJ1bnRpbWVVUkwgKyAnL29iamVjdC1hbGxvY2F0aW9uJzsKCiAgICBfdGhpcy5fcmVwb3J0ZXJzID0ge307CiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0ge307CgogICAgLy9UT0RPOiB0aGlzIHNob3VsZCBub3QgYmUgaGFyZGNvZGVkIQogICAgX3RoaXMuX2RvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShydW50aW1lVVJMKS5kb21haW47CgogICAgaWYgKGFsbG9jYXRvcikgewogICAgICBfdGhpcy5fYWxsb2NhdG9yID0gYWxsb2NhdG9yOwogICAgfSBlbHNlIHsKICAgICAgX3RoaXMuX2FsbG9jYXRvciA9IG5ldyBfT2JqZWN0QWxsb2NhdGlvbjIuZGVmYXVsdChfdGhpcy5fb2JqZWN0VVJMLCBidXMpOwogICAgfQoKICAgIGJ1cy5hZGRMaXN0ZW5lcihfdGhpcy5fdXJsLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGNvbnNvbGUubG9nKCdTeW5jaGVyTWFuYWdlci1SQ1Y6ICcsIG1zZyk7CiAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKICAgICAgICBjYXNlICdjcmVhdGUnOgogICAgICAgICAgX3RoaXMuX29uQ3JlYXRlKG1zZyk7YnJlYWs7CiAgICAgICAgY2FzZSAnZGVsZXRlJzoKICAgICAgICAgIF90aGlzLl9vbkRlbGV0ZShtc2cpO2JyZWFrOwogICAgICAgIGNhc2UgJ3N1YnNjcmliZSc6CiAgICAgICAgICBfdGhpcy5fb25Mb2NhbFN1YnNjcmliZShtc2cpO2JyZWFrOwogICAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoKICAgICAgICAgIF90aGlzLl9vbkxvY2FsVW5TdWJzY3JpYmUobXNnKTticmVhazsKICAgICAgfQogICAgfSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoU3luY2hlck1hbmFnZXIsIFt7CiAgICBrZXk6ICdfb25DcmVhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNyZWF0ZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIG93bmVyID0gbXNnLmZyb207CiAgICAgIHZhciBkb21haW4gPSAoMCwgX3V0aWxzLmRpdmlkZVVSTCkobXNnLmZyb20pLmRvbWFpbjsKCiAgICAgIC8vVE9ETzogNS03IGF1dGhvcml6ZU9iamVjdENyZWF0aW9uKG93bmVyLCBvYmogPz8/PyApCiAgICAgIC8vVE9ETzogb3RoZXIgb3B0aW9uYWwgc3RlcHMKCiAgICAgIC8vZ2V0IHNjaGVtYSBmcm9tIGNhdGFsb2d1ZSBhbmQgcGFyc2UgLT4gKHNjaGVtZSwgY2hpbGRyZW4pCiAgICAgIF90aGlzLl9jYXRhbG9nLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKG1zZy5ib2R5LnNjaGVtYSkudGhlbihmdW5jdGlvbiAoZGVzY3JpcHRvcikgewogICAgICAgIHZhciBwcm9wZXJ0aWVzID0gZGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllczsKICAgICAgICB2YXIgc2NoZW1lID0gcHJvcGVydGllcy5zY2hlbWUgPyBwcm9wZXJ0aWVzLnNjaGVtZS5jb25zdGFudCA6ICdyZXNvdXJjZSc7CiAgICAgICAgdmFyIGNoaWxkcmVucyA9IHByb3BlcnRpZXMuY2hpbGRyZW4gPyBwcm9wZXJ0aWVzLmNoaWxkcmVuLmNvbnN0YW50IDogW107CgogICAgICAgIF90aGlzLl9hbGxvY2F0b3IuY3JlYXRlKGRvbWFpbiwgc2NoZW1lLCBjaGlsZHJlbnMsIDEpLnRoZW4oZnVuY3Rpb24gKGFsbG9jYXRlZCkgewogICAgICAgICAgLy9UT0RPOiBnZXQgYWRkcmVzcyBmcm9tIGFkZHJlc3MgYWxsb2NhdG9yID8KICAgICAgICAgIHZhciBvYmpVUkwgPSBhbGxvY2F0ZWRbMF07CiAgICAgICAgICB2YXIgb2JqU3Vic2NyaXB0b3JVUkwgPSBvYmpVUkwgKyAnL3N1YnNjcmlwdGlvbic7CgogICAgICAgICAgX3RoaXMuX3JlcG9ydGVyc1tvYmpVUkxdID0gbmV3IF9SZXBvcnRlck9iamVjdDIuZGVmYXVsdChfdGhpcywgb3duZXIsIG9ialVSTCwgY2hpbGRyZW5zKTsKCiAgICAgICAgICAvL2FsbCBvaywgc2VuZCByZXNwb25zZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG93bmVyLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgcmVzb3VyY2U6IG9ialVSTCwgY2hpbGRyZW5SZXNvdXJjZXM6IGNoaWxkcmVucyB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICAvL3NlbmQgY3JlYXRlIHRvIGFsbCBvYnNlcnZlcnMsIHJlc3BvbnNlcyB3aWxsIGJlIGRlbGl2ZXIgdG8gdGhlIEh5cGVydHkgb3duZXI/CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy9zY2hlZHVsZSBmb3IgbmV4dCBjeWNsZSBuZWVkZWQsIGJlY2F1c2UgdGhlIFJlcG9ydGVyIHNob3VsZCBiZSBhdmFpbGFibGUuCiAgICAgICAgICAgIG1zZy5ib2R5LmF1dGhvcmlzZS5mb3JFYWNoKGZ1bmN0aW9uIChoeXBlcnR5VVJMKSB7CiAgICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogb2JqU3Vic2NyaXB0b3JVUkwsIHRvOiBoeXBlcnR5VVJMLAogICAgICAgICAgICAgICAgYm9keTogeyBzb3VyY2U6IG1zZy5mcm9tLCB2YWx1ZTogbXNnLmJvZHkudmFsdWUsIHNjaGVtYTogbXNnLmJvZHkuc2NoZW1hIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogb3duZXIsCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDUwMCwgZGVzYzogcmVhc29uIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uRGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25EZWxldGUobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgb2JqVVJMID0gbXNnLmJvZHkucmVzb3VyY2U7CgogICAgICB2YXIgb2JqZWN0ID0gX3RoaXMuX3JlcG9ydGVyc1tvYmpVUkxdOwogICAgICBpZiAob2JqZWN0KSB7CiAgICAgICAgLy9UT0RPOiBpcyB0aGVyZSBhbnkgcG9saWN5IHZlcmlmaWNhdGlvbiBiZWZvcmUgZGVsZXRlPwogICAgICAgIG9iamVjdC5kZWxldGUoKTsKCiAgICAgICAgLy9UT0RPOiB1bnJlZ2lzdGVyIG9iamVjdD8KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uTG9jYWxTdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkxvY2FsU3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaHlwZXJ0eVVSTCA9IG1zZy5mcm9tOwogICAgICB2YXIgZG9tYWluID0gKDAsIF91dGlscy5kaXZpZGVVUkwpKGh5cGVydHlVUkwpLmRvbWFpbjsKICAgICAgdmFyIG9ialVSTCA9IG1zZy5ib2R5LnJlc291cmNlOwogICAgICB2YXIgb2JqVVJMU3Vic2NyaXB0aW9uID0gb2JqVVJMICsgJy9zdWJzY3JpcHRpb24nOwoKICAgICAgLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoY2hpbGRyZW4pCiAgICAgIF90aGlzLl9jYXRhbG9nLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKG1zZy5ib2R5LnNjaGVtYSkudGhlbihmdW5jdGlvbiAoZGVzY3JpcHRvcikgewogICAgICAgIHZhciBwcm9wZXJ0aWVzID0gZGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllczsKICAgICAgICB2YXIgY2hpbGRyZW5zID0gcHJvcGVydGllcy5jaGlsZHJlbiA/IHByb3BlcnRpZXMuY2hpbGRyZW4uY29uc3RhbnQgOiBbXTsKCiAgICAgICAgLy9zdWJzY3JpYmUgbXNnIGZvciB0aGUgZG9tYWluIG5vZGUKICAgICAgICB2YXIgbm9kZVN1YnNjcmliZU1zZyA9IHsKICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogJ2RvbWFpbjovL21zZy1ub2RlLicgKyBkb21haW4gKyAnL3NtJywKICAgICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IG9ialVSTCwgY2hpbGRyZW5SZXNvdXJjZXM6IGNoaWxkcmVucywgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEgfQogICAgICAgIH07CgogICAgICAgIC8vc3Vic2NyaWJlIGluIG1zZy1ub2RlCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShub2RlU3Vic2NyaWJlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdub2RlLXN1YnNjcmliZS1yZXNwb25zZTogJywgcmVwbHkpOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CgogICAgICAgICAgICAvL3NlbmQgcHJvdmlzaW9uYWwgcmVzcG9uc2UKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogaHlwZXJ0eVVSTCwKICAgICAgICAgICAgICBib2R5OiB7IGNvZGU6IDEwMCwgY2hpbGRyZW5SZXNvdXJjZXM6IGNoaWxkcmVucyB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmFyIG9ialN1YnNjcmliZU1zZyA9IHsKICAgICAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX3VybCwgdG86IG9ialVSTFN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgICBib2R5OiB7IHN1YnNjcmliZXI6IGh5cGVydHlVUkwgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy9zdWJzY3JpYmUgdG8gcmVwb3J0ZXIgU00KICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShvYmpTdWJzY3JpYmVNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXBvcnRlci1zdWJzY3JpYmUtcmVzcG9uc2U6ICcsIHJlcGx5KTsKICAgICAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKCiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBfdGhpcy5fb2JzZXJ2ZXJzW29ialVSTF07CiAgICAgICAgICAgICAgICBpZiAoIW9ic2VydmVyKSB7CiAgICAgICAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IF9PYnNlcnZlck9iamVjdDIuZGVmYXVsdChfdGhpcywgb2JqVVJMLCBjaGlsZHJlbnMpOwogICAgICAgICAgICAgICAgICBfdGhpcy5fb2JzZXJ2ZXJzW29ialVSTF0gPSBvYnNlcnZlcjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBvYnNlcnZlci5hZGRTdWJzY3JpcHRpb24oaHlwZXJ0eVVSTCk7CgogICAgICAgICAgICAgICAgLy9mb3J3YXJkIHRvIGh5cGVydHk6CiAgICAgICAgICAgICAgICByZXBseS5pZCA9IG1zZy5pZDsKICAgICAgICAgICAgICAgIHJlcGx5LmZyb20gPSBfdGhpcy5fdXJsOwogICAgICAgICAgICAgICAgcmVwbHkudG8gPSBoeXBlcnR5VVJMOwogICAgICAgICAgICAgICAgX3RoaXMyLl9idXMucG9zdE1lc3NhZ2UocmVwbHkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL2xpc3RlbmVyIHJlamVjdGVkCiAgICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IGh5cGVydHlVUkwsCiAgICAgICAgICAgICAgYm9keTogcmVwbHkuYm9keQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uTG9jYWxVblN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uTG9jYWxVblN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBoeXBlcnR5VVJMID0gbXNnLmZyb207CiAgICAgIHZhciBvYmpVUkwgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIHZhciBvYnNlcnZlciA9IF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXTsKICAgICAgaWYgKG9ic2VydmVyKSB7CiAgICAgICAgLy9UT0RPOiBpcyB0aGVyZSBhbnkgcG9saWN5IHZlcmlmaWNhdGlvbiBiZWZvcmUgZGVsZXRlPwogICAgICAgIG9ic2VydmVyLnJlbW92ZVN1YnNjcmlwdGlvbihoeXBlcnR5VVJMKTsKCiAgICAgICAgLy9UT0RPOiBkZXN0cm95IG9iamVjdCBpbiB0aGUgcmVnaXN0cnk/CiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwIH0KICAgICAgICB9KTsKCiAgICAgICAgLy9UT0RPOiByZW1vdmUgT2JqZWN0IGlmIG5vIG1vcmUgc3Vic2NyaXB0aW9uPwogICAgICAgIC8vZGVsZXRlIF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3VybCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgIH0KICB9XSk7CgogIHJldHVybiBTeW5jaGVyTWFuYWdlcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gU3luY2hlck1hbmFnZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4uL3V0aWxzL3V0aWxzIjoyMDIsIi4vT2JqZWN0QWxsb2NhdGlvbiI6MTk2LCIuL09ic2VydmVyT2JqZWN0IjoxOTcsIi4vUmVwb3J0ZXJPYmplY3QiOjE5OH1dLDIwMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioKICogRXZlbnRFbWl0dGVyCiAqIEFsbCBjbGFzc2VzIHdoaWNoIGV4dGVuZHMgdGhpcywgY2FuIGhhdmUgYWRkRXZlbnRMaXN0ZW5lciBhbmQgdHJpZ2dlciBldmVudHM7CiAqLwoKdmFyIEV2ZW50RW1pdHRlciA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRFbWl0dGVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhFdmVudEVtaXR0ZXIsIFt7CiAgICBrZXk6ICJhZGRFdmVudExpc3RlbmVyIiwKCgogICAgLyoqCiAgICAgKiBhZGRFdmVudExpc3RlbmVyIGxpc3RlbiBmb3IgYW4gZXZlbnRUeXBlCiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgZXZlbnRUeXBlIC0gbGlzdGVuaW5nIGZvciB0aGlzIHR5cGUgb2YgZXZlbnQKICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgICBjYiAgICAgICAgLSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGV2ZW50IGl0IGlzIGludm9rZWQKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBfdGhpc1tldmVudFR5cGVdID0gY2I7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnZva2UgdGhlIGV2ZW50VHlwZQogICAgICogQHBhcmFtICB7c3RyaW5nfSBldmVudFR5cGUgLSBldmVudCB3aWxsIGJlIGludm9rZWQKICAgICAqIEBwYXJhbSAge29iamVjdH0gcGFyYW1zIC0gcGFyYW1ldGVycyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgYWRkRXZlbnRMaXN0ZW5lcgogICAgICovCgogIH0sIHsKICAgIGtleTogInRyaWdnZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoZXZlbnRUeXBlLCBwYXJhbXMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpc1tldmVudFR5cGVdKSB7CiAgICAgICAgX3RoaXNbZXZlbnRUeXBlXShwYXJhbXMpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRXZlbnRFbWl0dGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBFdmVudEVtaXR0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV0sMjAyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRpdmlkZVVSTCA9IGRpdmlkZVVSTDsKZXhwb3J0cy5lbXB0eU9iamVjdCA9IGVtcHR5T2JqZWN0OwpleHBvcnRzLmRlZXBDbG9uZSA9IGRlZXBDbG9uZTsKZXhwb3J0cy5nZXRVc2VyVVJMRnJvbUVtYWlsID0gZ2V0VXNlclVSTEZyb21FbWFpbDsKZXhwb3J0cy5nZXRVc2VyRW1haWxGcm9tVVJMID0gZ2V0VXNlckVtYWlsRnJvbVVSTDsKLyoqCiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWwKICogQG1vZHVsZSB1dGlscwogKi8KCi8qKgogKiBAdHlwZWRlZiBkaXZpZGVVUkwKICogQHR5cGUgT2JqZWN0CiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMCiAqLwoKLyoqCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1cmwgLSB1cmwgYWRkcmVzcwogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAqLwpmdW5jdGlvbiBkaXZpZGVVUkwodXJsKSB7CgogIC8vIGxldCByZSA9IC8oW2EtekEtWi1dKik/OlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIpKihcL1tcL1xkXHdcLi1dKikqKD86W1w/XSkqKC4rKSovZ2k7CiAgdmFyIHJlID0gLyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7CiAgdmFyIHN1YnN0ID0gJyQxLCQyLCQzJzsKICB2YXIgcGFydHMgPSB1cmwucmVwbGFjZShyZSwgc3Vic3QpLnNwbGl0KCcsJyk7CgogIC8vIElmIHRoZSB1cmwgaGFzIG5vIHByb3RvY29sLCB0aGUgZGVmYXVsdCBwcm90b2NvbCBzZXQgaXMgaHR0cHMKICBpZiAocGFydHNbMF0gPT09IHVybCkgewogICAgcGFydHNbMF0gPSAnaHR0cHMnOwogICAgcGFydHNbMV0gPSB1cmw7CiAgfQoKICB2YXIgcmVzdWx0ID0gewogICAgdHlwZTogcGFydHNbMF0sCiAgICBkb21haW46IHBhcnRzWzFdLAogICAgaWRlbnRpdHk6IHBhcnRzWzJdCiAgfTsKCiAgcmV0dXJuIHJlc3VsdDsKfQoKLyoqCiAqIENoZWNrIGlmIGFuIE9iamVjdCBpcyBlbXB0eQogKiBAcGFyYW0gIHtPYmplY3R9IG9iamVjdCBPYmplY3QgdG8gYmUgY2hlY2tlZAogKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICBzdGF0dXMgb2YgT2JqZWN0LCBlbXB0eSBvciBub3QgKHRydWV8ZmFsc2UpOwogKi8KZnVuY3Rpb24gZW1wdHlPYmplY3Qob2JqZWN0KSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdCkubGVuZ3RoID4gMCA/IGZhbHNlIDogdHJ1ZTsKfQoKLyoqCiAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQKICogQHJldHVybiB7T2JqZWN0fQogKi8KZnVuY3Rpb24gZGVlcENsb25lKG9iaikgewogIC8vVE9ETzogc2ltcGxlIGJ1dCBpbmVmZmljaWVudCBKU09OIGRlZXAgY2xvbmUuLi4KICBpZiAob2JqKSByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTsKfQoKLyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBlbWFpbAogKiBAcGFyYW0gIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKi8KZnVuY3Rpb24gZ2V0VXNlclVSTEZyb21FbWFpbCh1c2VyRW1haWwpIHsKICB2YXIgaW5kZXhPZkF0ID0gdXNlckVtYWlsLmluZGV4T2YoJ0AnKTsKICByZXR1cm4gJ3VzZXI6Ly8nICsgdXNlckVtYWlsLnN1YnN0cmluZyhpbmRleE9mQXQgKyAxLCB1c2VyRW1haWwubGVuZ3RoKSArICcvJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoMCwgaW5kZXhPZkF0KTsKfQoKLyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgZW1haWwgdGhhdCBjb3JyZXNwb25kcyB0byBhIGdpdmVuIFVSTAogKiBAcGFyYW0gIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKiBAcmV0dXJuIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKi8KZnVuY3Rpb24gZ2V0VXNlckVtYWlsRnJvbVVSTCh1c2VyVVJMKSB7CiAgdmFyIHVybCA9IGRpdmlkZVVSTCh1c2VyVVJMKTsKICByZXR1cm4gdXJsLmlkZW50aXR5LnJlcGxhY2UoJy8nLCAnJykgKyAnQCcgKyB1cmwuZG9tYWluOyAvLyBpZGVudGl0eSBmaWVsZCBoYXMgJy9leGFtcGxlSUQnIGluc3RlYWQgb2YgJ2V4YW1wbGVJRCcKfQoKfSx7fV19LHt9LFsxOTVdKSgxOTUpCn0pOw==",
      "sourceCodeClassname": "RuntimeUA",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "Runtimes",
    "version": "0.1",
    "description": "Description of RuntimeUA",
    "objectName": "RuntimeUA",
    "configuration": {},
    "runtimeType": "browser",
    "hypertyCapabilities": {
      "mic": false
    },
    "protocolCapabilities": {
      "http": true
    },
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.core=e()}}(function(){var e;return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,n,r){(function(t){!function(t,o){"object"==typeof r&&"undefined"!=typeof n?n.exports=o():"function"==typeof e&&e.amd?e(o):t.Dexie=o()}(this,function(){"use strict";function e(e,t){return"object"!=typeof t?e:(Oe(t).forEach(function(n){e[n]=t[n]}),e)}function n(e,t){return Me.call(e,t)}function r(e,t){"function"==typeof t&&(t=t(Se(e))),Oe(t).forEach(function(n){o(e,n,t[n])})}function o(t,r,o,i){Object.defineProperty(t,r,e(o&&n(o,"get")&&"function"==typeof o.get?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},i))}function i(e){return{from:function(t){return e.prototype=Object.create(t.prototype),o(e.prototype,"constructor",e),{extend:r.bind(null,e.prototype)}}}}function a(e,t){var n,r=Ce(e,t);return r||(n=Se(e))&&a(n,t)}function s(e,t,n){return Te.call(e,t,n)}function u(e,t){return t(e)}function c(e){var t=setTimeout(e,1e3);clearTimeout(t)}function l(e){if(!e)throw new Error("Assertion Failed")}function f(e){Ee.setImmediate?setImmediate(e):setTimeout(e,0)}function d(e,t){return e.reduce(function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function p(e,t){return function(){try{e.apply(this,arguments)}catch(n){t(n)}}}function h(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function y(e,t){if(n(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],o=0,i=t.length;o<i;++o){var a=y(e,t[o]);r.push(a)}return r}var s=t.indexOf(".");if(s!==-1){var u=e[t.substr(0,s)];return void 0===u?void 0:y(u,t.substr(s+1))}}function v(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){l("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)v(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var a=t.substr(0,i),s=t.substr(i+1);if(""===s)void 0===n?delete e[a]:e[a]=n;else{var u=e[a];u||(u=e[a]={}),v(u,s,n)}}else void 0===n?delete e[t]:e[t]=n}}function g(e,t){"string"==typeof t?v(e,t,void 0):"length"in t&&[].map.call(t,function(t){v(e,t,void 0)})}function m(e){var t={};for(var r in e)n(e,r)&&(t[r]=e[r]);return t}function _(e){if(!e||"object"!=typeof e)return e;var t;if(Pe(e)){t=[];for(var r=0,o=e.length;r<o;++r)t.push(_(e[r]))}else if(e instanceof Date)t=new Date,t.setTime(e.getTime());else{t=e.constructor?Object.create(e.constructor.prototype):{};for(var i in e)n(e,i)&&(t[i]=_(e[i]))}return t}function b(e,t,r,o){return r=r||{},o=o||"",Oe(e).forEach(function(i){if(n(t,i)){var a=e[i],s=t[i];"object"==typeof a&&"object"==typeof s&&a&&s&&a.constructor===s.constructor?b(a,s,r,o+i+"."):a!==s&&(r[o+i]=t[i])}else r[o+i]=void 0}),Oe(t).forEach(function(i){n(e,i)||(r[o+i]=t[i])}),r}function w(e){var t,n,r,o;if(1===arguments.length){if(Pe(e))return e.slice();if(this===Ie&&"string"==typeof e)return[e];if(o=Ae(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(null==e)return[e];if(t=e.length,"number"==typeof t){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}function k(e){return Ne.apply([],e)}function x(){}function j(e){return e}function O(e,t){return null==e||e===j?t:function(n){return t(e(n))}}function P(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function E(e,t){return e===x?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?P(r,this.onsuccess):r),o&&(this.onerror=this.onerror?P(o,this.onerror):o),void 0!==i?i:n}}function S(e,t){return e===x?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?P(n,this.onsuccess):n),r&&(this.onerror=this.onerror?P(r,this.onerror):r)}}function M(t,n){return t===x?n:function(r){var o=t.apply(this,arguments);e(r,o);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?P(i,this.onsuccess):i),a&&(this.onerror=this.onerror?P(a,this.onerror):a),void 0===o?void 0===s?void 0:s:e(o,s)}}function C(e,t){return e===x?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function T(e,t){return e===x?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}function R(e,t){De=e,Ue=t}function A(){if(Fe)try{throw A.arguments,new Error}catch(e){return e}return new Error}function I(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Ue).map(function(e){return"\n"+e}).join("")):""}function N(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+I(A(),1)),t.apply(this,arguments)}}function D(e,t){this._e=A(),this.name=e,this.message=t}function U(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function F(e,t,n,r){this._e=A(),this.failures=t,this.failedKeys=r,this.successCount=n}function L(e,t){this._e=A(),this.name="BulkError",this.failures=t,this.message=U(e,t)}function $(e,t){if(!e||e instanceof D||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ge[e.name])return e;var n=new Ge[e.name](t||e.message,e);return"stack"in e&&o(n,"stack",{get:function(){return this.inner.stack}}),n}function z(e){function t(e,t,i){if("object"==typeof e)return n(e);t||(t=C),i||(i=x);var a={subscribers:[],fire:i,subscribe:function(e){a.subscribers.indexOf(e)===-1&&(a.subscribers.push(e),a.fire=t(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter(function(t){return t!==e}),a.fire=a.subscribers.reduce(t,i)}};return r[e]=o[e]=a,a}function n(e){Oe(e).forEach(function(n){var r=e[n];if(Pe(r))t(n,e[n][0],e[n][1]);else{if("asap"!==r)throw new Ke.InvalidArgument("Invalid event config");var o=t(n,j,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];o.subscribers.forEach(function(e){f(function(){e.apply(null,t)})})})}})}var r={},o=function(t,n){if(n){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return r[t].subscribe.apply(null,i),e}if("string"==typeof t)return r[t]};o.addEventType=t;for(var i=1,a=arguments.length;i<a;++i)t(arguments[i]);return o}function B(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=x,this._lib=!1;var t=this._PSD=st;if(De&&(this._stackHolder=A(),this._prev=null,this._numPrev=0,V(this,ot)),"function"!=typeof e){if(e!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&K(this,this._value))}this._state=null,this._value=null,++t.ref,H(this,e)}function q(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=st}function H(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&X();t&&"function"==typeof t.then?H(e,function(e,n){t instanceof B?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,G(e)),n&&Z()}},K.bind(null,e))}catch(n){K(e,n)}}function K(e,t){if(rt.push(t),null===e._state){var n=e._lib&&X();t=it(t),e._state=!1,e._value=t,De&&null!==t&&"object"==typeof t&&!t._promise&&h(function(){var n=a(t,"stack");t._promise=e,o(t,"stack",{get:function(){return Je?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),ne(e),G(e),n&&Z()}}function G(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Q(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===ct&&(++ct,Ze(function(){0===--ct&&ee()},[]))}function Q(e,t){if(null===e._state)return void e._listeners.push(t);var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);var r=t.psd;++r.ref,++ct,Ze(W,[n,e,t])}function W(e,t,n){var r=st,o=n.psd;try{o!==r&&(st=o),ot=t;var i,a=t._value;t._state?i=e(a):(rt.length&&(rt=[]),i=e(a),rt.indexOf(a)===-1&&re(t)),n.resolve(i)}catch(s){n.reject(s)}finally{o!==r&&(st=r),ot=null,0===--ct&&ee(),--o.ref||o.finalize()}}function Y(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var o,i,a=e._value;null!=a?(o=a.name||"Error",i=a.message||a,r=I(a,0)):(o=a,i=""),t.push(o+(i?": "+i:"")+r)}return De&&(r=I(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Y(e._prev,t,n)),t}function V(e,t){var n=t?t._numPrev+1:0;n<Ye&&(e._prev=t,e._numPrev=n)}function J(){X()&&Z()}function X(){var e=et;return et=!1,tt=!1,e}function Z(){var e,t,n;do for(;ut.length>0;)for(e=ut,ut=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(ut.length>0);et=!0,tt=!0}function ee(){var e=nt;nt=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=lt.slice(0),n=t.length;n;)t[--n]()}function te(e){function t(){e(),lt.splice(lt.indexOf(t),1)}lt.push(t),++ct,Ze(function(){0===--ct&&ee()},[])}function ne(e){nt.some(function(t){return t._value===e._value})||nt.push(e)}function re(e){for(var t=nt.length;t;)if(nt[--t]._value===e._value)return void nt.splice(t,1)}function oe(e){console.warn("Unhandled rejection: "+(e.stack||e))}function ie(e){return new B(We,(!1),e)}function ae(e,t){var n=st;return function(){var r=X(),o=st;try{return o!==n&&(st=n),e.apply(this,arguments)}catch(i){t&&t(i)}finally{o!==n&&(st=o),r&&Z()}}}function se(e,t,n,r){var o=st,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=ue(i,e,t,n,r);return 0===i.ref&&i.finalize(),a}function ue(e,t,n,r,o){var i=st;try{return e!==i&&(st=e),t(n,r,o)}finally{e!==i&&(st=i)}}function ce(t,n){var r;try{r=n.onuncatched(t)}catch(o){}if(r!==!1)try{var i,a={promise:n,reason:t};if(Ee.document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(dt,!0,!0),e(i,a)):Ee.CustomEvent&&(i=new CustomEvent(dt,{detail:a}),e(i,a)),i&&Ee.dispatchEvent&&(dispatchEvent(i),!Ee.PromiseRejectionEvent&&Ee.onunhandledrejection))try{Ee.onunhandledrejection(i)}catch(s){}i.defaultPrevented||B.on.error.fire(t,n)}catch(o){}}function le(e,t){var n=B.reject(e);return t?n.uncaught(t):n}function fe(t,a){function f(){rt.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+rt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+rt.name+"'. Closing db now to resume the delete request."),rt.close()}),rt.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+rt.name+"') was blocked"):console.warn("Upgrade '"+rt.name+"' blocked by other connection holding version "+e.oldVersion/10)})}function g(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function P(e,t,n){var r=rt._createTransaction(nt,Ye,Qe);r.create(t),r._completion["catch"](n);var o=r._reject.bind(r);se(function(){st.trans=r,0===e?(Oe(Qe).forEach(function(e){I(t,e,Qe[e].primKey,Qe[e].indexes)}),B.follow(function(){return rt.on.populate.fire(r)})["catch"](o)):C(e,r,t)["catch"](o)})}function C(e,t,n){function r(){return o.length?B.resolve(o.shift()(t.idbtrans)).then(r):B.resolve()}var o=[],i=We.filter(function(t){return t._cfg.version===e})[0];if(!i)throw new Ke.Upgrade("Dexie specification of currently installed DB version is missing");Qe=rt._dbSchema=i._cfg.dbschema;var a=!1,s=We.filter(function(t){return t._cfg.version>e});return s.forEach(function(e){o.push(function(){var r=Qe,o=e._cfg.dbschema;Ae(r,n),Ae(o,n),Qe=rt._dbSchema=o;var i=R(r,o);if(i.add.forEach(function(e){I(n,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(function(e){if(e.recreate)throw new Ke.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){$(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),$(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return a=!0,B.follow(function(){e._cfg.contentUpgrade(t)})}),o.push(function(t){if(!a||!bt){var n=e._cfg.dbschema;U(n,t)}})}),r().then(function(){D(Qe,n)})}function R(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],i=t[r];if(o){var a={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)a.recreate=!0,n.change.push(a);else{var s=o.idxByName,u=i.idxByName;for(var c in s)u[c]||a.del.push(c);for(c in u){var l=s[c],f=u[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,i])}return n}function I(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){$(o,e)}),o}function D(e,t){Oe(e).forEach(function(n){t.db.objectStoreNames.contains(n)||I(t,n,e[n].primKey,e[n].indexes)})}function U(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function $(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function q(e){return rt.on.error.fire(e)}function H(e,t,n){if(et||st.letThrough){var r=rt._createTransaction(e,t,Qe);return r._promise(e,function(e,t){se(function(){st.trans=r,n(e,t,r)})}).then(function(e){return r._completion.then(function(){return e})})}if(!Ze){if(!qe)return le(new Ke.DatabaseClosed,q);rt.open()["catch"](x)}return ot.then(function(){return H(e,t,n)})}function K(e,t,n){this.name=e,this.schema=t,this.hook=Ve[e]?Ve[e].hook:z(null,{creating:[E,x],reading:[O,j],updating:[M,x],deleting:[S,x]}),this._collClass=n||J}function G(e,t,n){K.call(this,e,t,n||Z)}function Q(e,t,n){return(n?ge:ve)(function(n){e.push(n),t&&t()})}function W(e,t,n,r,o){return new B(function(i,a){var s=n.length,u=s-1;if(0===s)return i();if(r){var c,l=ge(a),f=ye(null);h(function(){for(var r=0;r<s;++r){c={onsuccess:null,onerror:null};var a=n[r];o.call(c,a[0],a[1],t);var d=e["delete"](a[0]);d._hookCtx=c,d.onerror=l,r===u?d.onsuccess=ye(i):d.onsuccess=f}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var d=0;d<s;++d){var p=e["delete"](n[d]);p.onerror=ae(ve(a)),d===u&&(p.onsuccess=ae(function(){return i()}))}}).uncaught(q)}function Y(e,t,n,r){var o=this;this.db=rt,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=z(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=n,this._resolve=null,this._reject=null,this._completion=new B(function(e,t){o._resolve=e,o._reject=t}).uncaught(q),this._completion.then(function(){o.on.complete.fire()},function(e){return o.on.error.fire(e),o.parent?o.parent._reject(e):o.active&&o.idbtrans&&o.idbtrans.abort(),o.active=!1,le(e)})}function V(e,t,n){this._ctx={table:e,index:":id"===t?null:t,collClass:e._collClass,or:n}}function J(e,t){var n=null,r=null;if(t)try{n=t()}catch(o){r=o}var i=e._ctx,a=i.table;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:a.hook.reading.fire}}function X(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Z(){J.apply(this,arguments)}function ee(e,t){return e._cfg.version-t._cfg.version}function te(e,t,n,r){t.forEach(function(t){var o=rt._tableFactory(n,r[t]);e.forEach(function(e){t in e||(e[t]=o)})})}function ne(e){e.forEach(function(e){for(var t in e)e[t]instanceof K&&delete e[t]})}function re(e,t,n,r,o,i){var a=i?function(e,t,r){return n(i(e),t,r)}:n,s=ae(a,o);e.onerror||(e.onerror=ve(o)),t?e.onsuccess=p(function(){var n=e.result;if(n){var i=function(){n["continue"]()};t(n,function(e){i=e},r,o)&&s(n.value,n,function(e){i=e}),i()}else r()},o):e.onsuccess=p(function(){var t=e.result;if(t){var n=function(){t["continue"]()};s(t.value,t,function(e){n=e}),n()}else r()},o)}function oe(e){var t=[];return e.split(",").forEach(function(e){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new we(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Pe(r),/\./.test(e)))}),t}function ie(e,t){return He.cmp(e,t)}function ce(e,t){return ie(e,t)<0?e:t}function de(e,t){return ie(e,t)>0?e:t}function Ee(e,t){return He.cmp(e,t)}function Se(e,t){return He.cmp(t,e)}function Me(e,t){return e<t?-1:e===t?0:1}function Ce(e,t){return e>t?-1:e===t?0:1}function Te(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Re(){if(rt.verno=Je.version/10,rt._dbSchema=Qe={},Ye=s(Je.objectStoreNames,0),0!==Ye.length){var e=Je.transaction(xe(Ye),"readonly");Ye.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,o=r&&"string"==typeof r&&r.indexOf(".")!==-1,i=new we(r,r||"",(!1),(!1),(!!n.autoIncrement),r&&"string"!=typeof r,o),a=[],s=0;s<n.indexNames.length;++s){var u=n.index(n.indexNames[s]);r=u.keyPath,o=r&&"string"==typeof r&&r.indexOf(".")!==-1;var c=new we(u.name,r,(!!u.unique),(!!u.multiEntry),(!1),r&&"string"!=typeof r,o);a.push(c)}Qe[t]=new ke(t,i,a,{})}),te([Ve,Y.prototype],Oe(Qe),nt,Qe)}}function Ae(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],i=t.objectStore(o);Le="getAll"in i;for(var a=0;a<i.indexNames.length;++a){var u=i.indexNames[a],c=i.index(u).keyPath,l="string"==typeof c?c:"["+s(c).join("+")+"]";if(e[o]){var f=e[o].idxByName[l];f&&(f.name=u)}}}}function Ne(e){rt.on("blocked").fire(e),mt.filter(function(e){return e.name===rt.name&&e!==rt&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}var Ue,Fe,Le,$e=fe.dependencies,ze=e({addons:fe.addons,autoOpen:!0,indexedDB:$e.indexedDB,IDBKeyRange:$e.IDBKeyRange},a),Be=ze.addons,qe=ze.autoOpen,He=ze.indexedDB,Ge=ze.IDBKeyRange,Qe=this._dbSchema={},We=[],Ye=[],Ve={},Je=null,Xe=null,Ze=!1,et=!1,tt="readonly",nt="readwrite",rt=this,ot=new B(function(e){Ue=e}),it=new B(function(e,t){Fe=t}),at=!0,ut=!!je(He);this.version=function(e){if(Je||Ze)throw new Ke.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=We.filter(function(t){return t._cfg.version===e})[0];return t?t:(t=new g(e),We.push(t),We.sort(ee),t)},e(g.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?e(this._cfg.storesSource,t):t;var n={};We.forEach(function(t){e(n,t._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(n,r),Qe=rt._dbSchema=r,ne([Ve,rt,Y.prototype]),te([Ve,rt,Y.prototype,this._cfg.tables],Oe(r),nt,r),Ye=Oe(r),this},upgrade:function(e){var t=this;return xt(function(){e(rt._createTransaction(nt,Oe(t._cfg.dbschema),t._cfg.dbschema))}),this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){Oe(e).forEach(function(n){if(null!==e[n]){var r={},o=oe(e[n]),i=o.shift();if(i.multi)throw new Ke.Schema("Primary key cannot be multi-valued");i.keyPath&&v(r,i.keyPath,i.auto?0:i.keyPath),o.forEach(function(e){if(e.auto)throw new Ke.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Ke.Schema("Index must have a name and cannot be an empty string");v(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new ke(n,i,o,r)}})}}),this._allTables=Ve,this._tableFactory=function(e,t){return e===tt?new K(t.name,t,J):new G(t.name,t)},this._createTransaction=function(e,t,n,r){return new Y(e,t,n,r)},this._whenReady=function(e){return new B(jt||et||st.letThrough?e:function(t,n){if(!Ze){if(!qe)return void n(new Ke.DatabaseClosed);rt.open()["catch"](x)}ot.then(function(){e(t,n)})}).uncaught(q)},this.verno=0,this.open=function(){if(Ze||Je)return ot.then(function(){return Xe?le(Xe,q):rt});De&&(it._stackHolder=A()),Ze=!0,Xe=null,et=!1;var e=Ue,n=null;return B.race([it,new B(function(e,r){if(c(function(){return e()}),We.length>0&&(at=!1),!He)throw new Ke.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=at?He.open(t):He.open(t,Math.round(10*rt.verno));if(!o)throw new Ke.MissingAPI("IndexedDB API not available");o.onerror=ae(ve(r)),o.onblocked=ae(Ne),o.onupgradeneeded=ae(function(e){if(n=o.transaction,at&&!rt._allowEmptyDB){o.onerror=me,n.abort(),o.result.close();var i=He.deleteDatabase(t);i.onsuccess=i.onerror=ae(function(){r(new Ke.NoSuchDatabase("Database "+t+" doesnt exist"))})}else{n.onerror=ae(ve(r));var a=e.oldVersion>Math.pow(2,62)?0:e.oldVersion;P(a/10,n,r,o)}},r),o.onsuccess=ae(function(){if(n=null,Je=o.result,mt.push(rt),at)Re();else if(Je.objectStoreNames.length>0)try{Ae(Qe,Je.transaction(xe(Je.objectStoreNames),tt))}catch(r){}Je.onversionchange=ae(function(e){rt._vcFired=!0,rt.on("versionchange").fire(e)}),ut||_e(function(e){if(e.indexOf(t)===-1)return e.push(t)}),e()},r)})]).then(function(){return fe.vip(rt.on.ready.fire)}).then(function(){return Ze=!1,rt})["catch"](function(e){try{n&&n.abort()}catch(t){}return Ze=!1,rt.close(),Xe=e,le(Xe,q)})["finally"](function(){et=!0,e()})},this.close=function(){var e=mt.indexOf(rt);if(e>=0&&mt.splice(e,1),Je){try{Je.close()}catch(t){}Je=null}qe=!1,Xe=new Ke.DatabaseClosed,Ze&&Fe(Xe),ot=new B(function(e){Ue=e}),it=new B(function(e,t){Fe=t})},this["delete"]=function(){var e=arguments.length>0;return new B(function(n,r){function o(){rt.close();var e=He.deleteDatabase(t);e.onsuccess=ae(function(){ut||_e(function(e){var n=e.indexOf(t);if(n>=0)return e.splice(n,1)}),n()}),e.onerror=ae(ve(r)),e.onblocked=Ne}if(e)throw new Ke.InvalidArgument("Arguments not allowed in db.delete()");Ze?ot.then(o):o()}).uncaught(q)},this.backendDB=function(){return Je},this.isOpen=function(){return null!==Je},this.hasFailed=function(){return null!==Xe},this.dynamicallyOpened=function(){return at},this.name=t,o(this,"tables",{get:function(){return Oe(Ve).map(function(e){return Ve[e]})}}),this.on=z(this,"error","populate","blocked","versionchange",{ready:[T,x]}),this.on.error.subscribe=N("Dexie.on.error",this.on.error.subscribe),this.on.error.unsubscribe=N("Dexie.on.error.unsubscribe",this.on.error.unsubscribe),this.on.ready.subscribe=u(this.on.ready.subscribe,function(e){return function(t,n){fe.vip(function(){et?(Xe||B.resolve().then(t),n&&e(t)):(e(t),n||e(function r(){rt.on.ready.unsubscribe(t),rt.on.ready.unsubscribe(r)}))})}}),xt(function(){rt.on("populate").fire(rt._createTransaction(nt,Ye,Qe)),rt.on("error").fire(new Error)}),this.transaction=function(e,t,r){function o(t){var o=st;t(B.resolve().then(function(){return se(function(){st.transless=st.transless||o;var t=rt._createTransaction(e,l,Qe,u);st.trans=t,u?t.idbtrans=u.idbtrans:t.create();var i=l.map(function(e){return Ve[e]});i.push(t);var a;return B.follow(function(){if(a=r.apply(t,i))if("function"==typeof a.next&&"function"==typeof a["throw"])a=be(a);else if("function"==typeof a.then&&!n(a,"_PSD"))throw new Ke.IncompatiblePromise("Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: "+r.toString())}).uncaught(q).then(function(){return u&&t._resolve(),t._completion}).then(function(){return a})["catch"](function(e){return t._reject(e),le(e)})})}))}var i=arguments.length;if(i<2)throw new Ke.InvalidArgument("Too few arguments");for(var a=new Array(i-1);--i;)a[i-1]=arguments[i];r=a.pop();var s=k(a),u=st.trans;u&&u.db===rt&&e.indexOf("!")===-1||(u=null);var c=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{var l=s.map(function(e){var t=e instanceof K?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||e==tt)e=tt;else{if("rw"!=e&&e!=nt)throw new Ke.InvalidArgument("Invalid transaction mode: "+e);e=nt}if(u){if(u.mode===tt&&e===nt){if(!c)throw new Ke.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&l.forEach(function(e){if(u&&u.storeNames.indexOf(e)===-1){if(!c)throw new Ke.SubTransaction("Table "+e+" not included in parent transaction.");u=null}})}}catch(f){return u?u._promise(null,function(e,t){t(f)}):le(f,q)}return u?u._promise(e,o,"lock"):rt._whenReady(o)},this.table=function(e){if(jt&&at)return new G(e);if(!n(Ve,e))throw new Ke.InvalidTable("Table "+e+" does not exist");return Ve[e]},r(K.prototype,{_trans:function(e,t,n){var r=st.trans;return r&&r.db===rt?r._promise(e,t,n):H(e,[this.name],t)},_idbstore:function(e,t,n){function r(e,n,r){t(e,n,r.idbtrans.objectStore(i),r)}if(jt)return new B(t);var o=st.trans,i=this.name;return o&&o.db===rt?o._promise(e,r,n):H(e,[this.name],r)},get:function(e,t){var n=this;return this._idbstore(tt,function(t,r,o){jt&&t(n.schema.instanceTemplate);var i=o.get(e);i.onerror=ve(r),i.onsuccess=ae(function(){t(n.hook.reading.fire(i.result))},r)}).then(t)},where:function(e){return new V(this,e)},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new this._collClass(new V(this,e))},toCollection:function(){return new this._collClass(new V(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var r=Object.create(e.prototype);t&&pe(r,t),this.schema.instanceTemplate=r;var o=function(t){if(!t)return t;var r=Object.create(e.prototype);for(var o in t)if(n(t,o))try{r[o]=t[o]}catch(i){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),e},defineClass:function(e){return this.mapToClass(fe.defineClass(e),e)}}),i(G).from(K).extend({bulkDelete:function(e){return this.hook.deleting.fire===x?this._idbstore(nt,function(t,n,r,o){t(W(r,o,e,!1,x))}):this.where(":id").anyOf(e)["delete"]().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(nt,function(r,o,i){if(!i.keyPath&&!n.schema.primKey.auto&&!t)throw new Ke.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&t)throw new Ke.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Ke.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var a,s,u=function(e){0===c.length?r(e):o(new L(n.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,f=n;if(n.hook.creating.fire===x&&n.hook.updating.fire===x){s=Q(c);for(var p=0,h=e.length;p<h;++p)a=t?i.put(e[p],t[p]):i.put(e[p]),a.onerror=s;a.onerror=Q(c,u),a.onsuccess=he(u)}else{var v=t||i.keyPath&&e.map(function(e){return y(e,i.keyPath)}),g=v&&d(v,function(t,n){return null!=t&&[t,e[n]]}),m=v?f.where(":id").anyOf(v.filter(function(e){return null!=e})).modify(function(){this.value=g[this.primKey],g[this.primKey]=null})["catch"](F,function(e){c=e.failures}).then(function(){for(var n=[],r=t&&[],o=v.length-1;o>=0;--o){var i=v[o];(null==i||g[i])&&(n.push(e[o]),t&&r.push(i),null!=i&&(g[i]=null))}return n.reverse(),t&&r.reverse(),f.bulkAdd(n,r)}).then(function(e){var t=v[v.length-1];return null!=t?t:e}):f.bulkAdd(e);m.then(u)["catch"](L,function(e){c=c.concat(e.failures),u()})["catch"](o)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(nt,function(o,i,a,s){function u(e){0===d.length?o(e):i(new L(n.name+".bulkAdd(): "+d.length+" of "+p+" operations failed",d))}if(!a.keyPath&&!n.schema.primKey.auto&&!t)throw new Ke.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new Ke.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new Ke.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return o();var c,l,f,d=[],p=e.length;if(r!==x){var g,m=a.keyPath;l=Q(d,null,!0),f=ye(null),h(function(){for(var n=0,o=e.length;n<o;++n){g={onerror:null,onsuccess:null};var i=t&&t[n],u=e[n],d=t?i:m?y(u,m):void 0,p=r.call(g,d,u,s);null==d&&null!=p&&(m?(u=_(u),v(u,m,p)):i=p),c=null!=i?a.add(u,i):a.add(u),c._hookCtx=g,n<o-1&&(c.onerror=l,g.onsuccess&&(c.onsuccess=f))}},function(e){throw g.onerror&&g.onerror(e),e}),c.onerror=Q(d,u,!0),c.onsuccess=ye(u)}else{l=Q(d);for(var b=0,w=e.length;b<w;++b)c=t?a.add(e[b],t[b]):a.add(e[b]),c.onerror=l;c.onerror=Q(d,u),c.onsuccess=he(u)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(nt,function(r,o,i,a){var s={onsuccess:null,onerror:null};if(n!==x){var u=null!=t?t:i.keyPath?y(e,i.keyPath):void 0,c=n.call(s,u,e,a);null==u&&null!=c&&(i.keyPath?v(e,i.keyPath,c):t=c)}try{var l=null!=t?i.add(e,t):i.add(e);l._hookCtx=s,l.onerror=ge(o),l.onsuccess=ye(function(t){var n=i.keyPath;n&&v(e,n,t),r(t)})}catch(f){throw s.onerror&&s.onerror(f),f}})},put:function(e,t){var n=this,r=this.hook.creating.fire,o=this.hook.updating.fire;return r!==x||o!==x?this._trans(nt,function(r,o,i){var a=void 0!==t?t:n.schema.primKey.keyPath&&y(e,n.schema.primKey.keyPath);null==a?n.add(e).then(r,o):(i._lock(),e=_(e),n.where(":id").equals(a).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):a})["finally"](function(){i._unlock()}).then(r,o))}):this._idbstore(nt,function(n,r,o){var i=void 0!==t?o.put(e,t):o.put(e);i.onerror=ve(r),i.onsuccess=function(t){var r=o.keyPath;r&&v(e,r,t.target.result),n(i.result)}})},"delete":function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e)["delete"]():this._idbstore(nt,function(t,n,r){var o=r["delete"](e);o.onerror=ve(n),o.onsuccess=function(){t(o.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection()["delete"]():this._idbstore(nt,function(e,t,n){var r=n.clear();r.onerror=ve(t),r.onsuccess=function(){e(r.result)}})},update:function(e,t){if("object"!=typeof t||Pe(t))throw new Ke.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||Pe(e))return this.where(":id").equals(e).modify(t);Oe(t).forEach(function(n){v(e,n,t[n])});var n=y(e,this.schema.primKey.keyPath);return void 0===n?le(new Ke.InvalidArgument("Given object does not contain its primary key"),q):this.where(":id").equals(n).modify(t)}}),r(Y.prototype,{_lock:function(){return l(!st.global),++this._reculock,1!==this._reculock||st.global||(st.lockOwnerFor=this),this},_unlock:function(){if(l(!st.global),0===--this._reculock)for(st.global||(st.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ue(e[1],e[0])}catch(t){}}return this},_locked:function(){return this._reculock&&st.lockOwnerFor!==this},create:function(e){var t=this;if(l(!this.idbtrans),!e&&!Je)switch(Xe&&Xe.name){case"DatabaseClosedError":throw new Ke.DatabaseClosed(Xe);
case"MissingAPIError":throw new Ke.MissingAPI(Xe.message,Xe);default:throw new Ke.OpenFailed(Xe)}if(!this.active)throw new Ke.TransactionInactive;return l(null===this._completion._state),e=this.idbtrans=e||Je.transaction(xe(this.storeNames),this.mode),e.onerror=ae(function(n){me(n),t._reject(e.error)}),e.onabort=ae(function(e){me(e),t.active&&t._reject(new Ke.Abort),t.active=!1,t.on("abort").fire(e)}),e.oncomplete=ae(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this,o=r._locked()?new B(function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},st])}):se(function(){var o=r.active?new B(function(o,i){if(e===nt&&r.mode!==nt)throw new Ke.ReadOnly("Transaction is readonly");!r.idbtrans&&e&&r.create(),n&&r._lock(),t(o,i,r)}):le(new Ke.TransactionInactive);return r.active&&n&&o["finally"](function(){r._unlock()}),o});return o._lib=!0,o.uncaught(q)},abort:function(){this.active&&this._reject(new Ke.Abort),this.active=!1},tables:{get:N("Transaction.tables",function(){return d(this.storeNames,function(e){return[e,Ve[e]]})},"Use db.tables()")},complete:N("Transaction.complete()",function(e){return this.on("complete",e)}),error:N("Transaction.error()",function(e){return this.on("error",e)}),table:N("Transaction.table()",function(e){if(this.storeNames.indexOf(e)===-1)throw new Ke.InvalidTable("Table "+e+" not in transaction");return Ve[e]})}),r(V.prototype,function(){function e(e,t,n){var r=e instanceof V?new e._ctx.collClass(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new e._ctx.collClass(e,function(){return Ge.only("")}).limit(0)}function n(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function o(e,t,n,r,o,i){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;o(e[u],c)<0&&(s=u)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function i(t,i,a,s){function u(e){c=n(e),l=r(e),f="next"===e?Me:Ce;var t=a.map(function(e){return{lower:l(e),upper:c(e)}}).sort(function(e,t){return f(e.lower,t.lower)});d=t.map(function(e){return e.upper}),p=t.map(function(e){return e.lower}),h=e,y="next"===e?"":s}var c,l,f,d,p,h,y,v=a.length;if(!a.every(function(e){return"string"==typeof e}))return e(t,gt);u("next");var g=new t._ctx.collClass(t,function(){return Ge.bound(d[0],p[v-1]+s)});g._ondirectionchange=function(e){u(e)};var m=0;return g._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var a=l(r);if(i(a,p,m))return!0;for(var s=null,u=m;u<v;++u){var c=o(r,a,d[u],p[u],f,h);null===c&&null===s?m=u+1:(null===s||f(s,c)>0)&&(s=c)}return t(null!==s?function(){e["continue"](s+y)}:n),!1}),g}return{between:function(n,r,o,i){o=o!==!1,i=i===!0;try{return ie(n,r)>0||0===ie(n,r)&&(o||i)&&(!o||!i)?t(this):new this._ctx.collClass(this,function(){return Ge.bound(n,r,!o,!i)})}catch(a){return e(this,vt)}},equals:function(e){return new this._ctx.collClass(this,function(){return Ge.only(e)})},above:function(e){return new this._ctx.collClass(this,function(){return Ge.lowerBound(e,!0)})},aboveOrEqual:function(e){return new this._ctx.collClass(this,function(){return Ge.lowerBound(e)})},below:function(e){return new this._ctx.collClass(this,function(){return Ge.upperBound(e,!0)})},belowOrEqual:function(e){return new this._ctx.collClass(this,function(){return Ge.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,gt):this.between(t,t+ht,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):i(this,function(e,t){return 0===e.indexOf(t[0])},[e],ht)},equalsIgnoreCase:function(e){return i(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=w.apply(Ie,arguments);return 0===e.length?t(this):i(this,function(e,t){return t.indexOf(e)!==-1},e,"")},startsWithAnyOfIgnoreCase:function(){var e=w.apply(Ie,arguments);return 0===e.length?t(this):i(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,ht)},anyOf:function(){var n=w.apply(Ie,arguments),r=Ee;try{n.sort(r)}catch(o){return e(this,vt)}if(0===n.length)return t(this);var i=new this._ctx.collClass(this,function(){return Ge.bound(n[0],n[n.length-1])});i._ondirectionchange=function(e){r="next"===e?Ee:Se,n.sort(r)};var a=0;return i._addAlgorithm(function(e,t,o){for(var i=e.key;r(i,n[a])>0;)if(++a,a===n.length)return t(o),!1;return 0===r(i,n[a])||(t(function(){e["continue"](n[a])}),!1)}),i},notEqual:function(e){return this.inAnyRange([[-(1/0),e],[e,yt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=w.apply(Ie,arguments);if(0===t.length)return new this._ctx.collClass(this);try{t.sort(Ee)}catch(n){return e(this,vt)}var r=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]},null);return r.push([t[t.length-1],yt]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function o(e,t){for(var n=0,r=e.length;n<r;++n){var o=e[n];if(ie(t[0],o[1])<0&&ie(t[1],o[0])>0){o[0]=ce(o[0],t[0]),o[1]=de(o[1],t[1]);break}}return n===r&&e.push(t),e}function i(e,t){return f(e[0],t[0])}function a(e){return!h(e)&&!y(e)}var s=this._ctx;if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&Ee(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ke.InvalidArgument);var u,c=!r||r.includeLowers!==!1,l=r&&r.includeUppers===!0,f=Ee;try{u=n.reduce(o,[]),u.sort(i)}catch(d){return e(this,vt)}var p=0,h=l?function(e){return Ee(e,u[p][1])>0}:function(e){return Ee(e,u[p][1])>=0},y=c?function(e){return Se(e,u[p][0])>0}:function(e){return Se(e,u[p][0])>=0},v=h,g=new s.collClass(this,function(){return Ge.bound(u[0][0],u[u.length-1][1],!c,!l)});return g._ondirectionchange=function(e){"next"===e?(v=h,f=Ee):(v=y,f=Se),u.sort(i)},g._addAlgorithm(function(e,t,n){for(var r=e.key;v(r);)if(++p,p===u.length)return t(n),!1;return!!a(r)||0!==ie(r,u[p][1])&&0!==ie(r,u[p][0])&&(t(function(){f===Ee?e["continue"](u[p][0]):e["continue"](u[p][1])}),!1)}),g},startsWithAnyOf:function(){var n=w.apply(Ie,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+ht]})):e(this,"startsWithAnyOf() only works with strings")}}}),r(J.prototype,function(){function t(e,t){e.filter=Te(e.filter,t)}function r(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Te(r(),t())}:t,e.justLimit=n&&!r}function o(e,t){e.isMatch=Te(e.isMatch,t)}function i(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new Ke.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function a(e,t){var n=i(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function s(e,t,r,o,i){var s=e.replayFilter?Te(e.filter,e.replayFilter()):e.filter;e.or?function(){function u(){2===++f&&r()}function c(e,r,i){if(!s||s(r,i,u,o)){var a=r.primaryKey.toString();n(l,a)||(l[a]=!0,t(e,r,i))}}var l={},f=0;e.or._iterate(c,u,o,i),re(a(e,i),e.algorithm,c,u,o,!e.keysOnly&&e.valueMapper)}():re(a(e,i),Te(e.algorithm,s),t,r,o,!e.keysOnly&&e.valueMapper)}function u(e){return e.table.schema.instanceTemplate}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,function(e,t){t(n.error)}):n.table._idbstore(tt,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,function(e,n){n(t.error)}):t.table._idbstore(nt,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Te(t.algorithm,e)},_iterate:function(e,t,n,r){return s(this._ctx,e,t,n,r)},clone:function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&e(r,t),n._ctx=r,n},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;if(jt){var n=u(t),r=t.table.schema.primKey.keyPath,o=y(n,t.index?t.table.schema.idxByName[t.index].keyPath:r),i=y(n,r);e(n,{key:o,primaryKey:i})}return this._read(function(n,r,o){s(t,e,n,r,o)})},count:function(e){if(jt)return B.resolve(0).then(e);var t=this._ctx;if(X(t,!0))return this._read(function(e,n,r){var o=i(t,r),a=t.range?o.count(t.range):o.count();a.onerror=ve(n),a.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,o){s(t,function(){return++n,!1},function(){e(n)},r,o)},e)},sortBy:function(e,t){function n(e,t){return t?n(e[o[t]],t-1):e[i]}function r(e,t){var r=n(e,a),o=n(t,a);return r<o?-s:r>o?s:0}var o=e.split(".").reverse(),i=o[0],a=o.length-1,s="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,r){if(jt&&e([u(t)]),Le&&"next"===t.dir&&X(t,!0)&&t.limit>0){var o=t.table.hook.reading.fire,a=i(t,r),c=t.limit<1/0?a.getAll(t.range,t.limit):a.getAll(t.range);c.onerror=ve(n),c.onsuccess=o===j?he(e):ae(he(function(t){try{e(t.map(o))}catch(r){n(r)}}))}else{var l=[];s(t,function(e){l.push(e)},function(){e(l)},n,r)}},e)},offset:function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,X(t)?r(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):r(t,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),r(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(e,n){var r=this._ctx;return jt&&e(u(r)),t(this._ctx,function(t,r,o){return!e(t.value)||(r(o),n)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(e){return jt&&e(u(this._ctx)),t(this._ctx,function(t){return e(t.value)}),o(this._ctx,e),this},and:function(e){return this.filter(e)},or:function(e){return new V(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(Le&&"next"===t.dir&&X(t,!0)&&t.limit>0)return this._read(function(e,n,r){var o=i(t,r),a=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);a.onerror=ve(n),a.onsuccess=he(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var o={};return t(this._ctx,function(e){var t=e.primaryKey.toString(),r=n(o,t);return o[t]=!0,!r}),this}}}),i(Z).from(J).extend({modify:function(t){var r=this,o=this._ctx,i=o.table.hook,a=i.updating.fire,s=i.deleting.fire;return jt&&"function"==typeof t&&t.call({value:o.table.schema.instanceTemplate},o.table.schema.instanceTemplate),this._write(function(o,i,u,c){function l(e,t){function r(e){return E.push(e),S.push(o.primKey),d(),!0}M=t.primaryKey;var o={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};if(p.call(o,e,o)!==!1){var i=!n(o,"value");++j,h(function(){var e=i?t["delete"]():t.update(o.value);e._hookCtx=o,e.onerror=ge(r),e.onsuccess=ye(function(){++O,d()})},r)}else o.onsuccess&&o.onsuccess(o.value)}function f(e){return e&&(E.push(e),S.push(M)),i(new F("Error modifying one or more objects",E,O,S))}function d(){P&&O+E.length===j&&(E.length>0?f():o(O))}var p;if("function"==typeof t)p=a===x&&s===x?t:function(e){var r=_(e);if(t.call(this,e,this)===!1)return!1;if(n(this,"value")){var o=b(r,this.value),i=a.call(this,o,this.primKey,r,c);i&&(e=this.value,Oe(i).forEach(function(t){v(e,t,i[t])}))}else s.call(this,this.primKey,e,c)};else if(a===x){var g=Oe(t),w=g.length;p=function(e){for(var n=!1,r=0;r<w;++r){var o=g[r],i=t[o];y(e,o)!==i&&(v(e,o,i),n=!0)}return n}}else{var k=t;t=m(k),p=function(n){var r=!1,o=a.call(this,t,this.primKey,_(n),c);return o&&e(t,o),Oe(t).forEach(function(e){var o=t[e];y(n,e)!==o&&(v(n,e,o),r=!0)}),o&&(t=m(k)),r}}var j=0,O=0,P=!1,E=[],S=[],M=null;r.clone().raw()._iterate(l,function(){P=!0,d()},f,u)})},"delete":function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,o=r!==x;if(!o&&X(t)&&(t.isPrimKey&&!wt||!n))return this._write(function(e,t,r){var o=ve(t),i=n?r.count(n):r.count();i.onerror=o,i.onsuccess=function(){var a=i.result;h(function(){var t=n?r["delete"](n):r.clear();t.onerror=o,t.onsuccess=function(){return e(a)}},function(e){return t(e)})}});var i=o?2e3:1e4;return this._write(function(n,a,s,u){var c=0,l=e.clone({keysOnly:!t.isMatch&&!o}).distinct().limit(i).raw(),f=[],d=function(){return l.each(o?function(e,t){f.push([t.primaryKey,t.value])}:function(e,t){f.push(t.primaryKey)}).then(function(){return o?f.sort(function(e,t){return Ee(e[0],t[0])}):f.sort(Ee),W(s,u,f,o,r)}).then(function(){var e=f.length;return c+=e,f=[],e<i?c:d()})};n(d())})}}),e(this,{Collection:J,Table:K,Transaction:Y,Version:g,WhereClause:V,WriteableCollection:Z,WriteableTable:G}),f(),Be.forEach(function(e){e(rt)})}function de(e){if("function"==typeof e)return new e;if(Pe(e))return[de(e[0])];if(e&&"object"==typeof e){var t={};return pe(t,e),t}return e}function pe(e,t){return Oe(t).forEach(function(n){var r=de(t[n]);e[n]=r}),e}function he(e){return function(t){e(t.target.result)}}function ye(e){return ae(function(t){var n=t.target,r=n.result,o=n._hookCtx,i=o&&o.onsuccess;i&&i(r),e&&e(r)},e)}function ve(e){return function(t){return me(t),e(t.target.error),!1}}function ge(e){return ae(function(t){var n=t.target,r=n.error,o=n._hookCtx,i=o&&o.onerror;return i&&i(r),me(t),e(r),!1})}function me(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function _e(e){var t,n=fe.dependencies.localStorage;if(!n)return e([]);try{t=JSON.parse(n.getItem("Dexie.DatabaseNames")||"[]")}catch(r){t=[]}e(t)&&n.setItem("Dexie.DatabaseNames",JSON.stringify(t))}function be(e){function t(e){return function(t){var n=e(t),r=n.value;return n.done?r:r&&"function"==typeof r.then?r.then(o,i):Pe(r)?B.all(r).then(o,i):o(r)}}var n=function(t){return e.next(t)},r=function(t){return e["throw"](t)},o=t(n),i=t(r);return t(n)()}function we(e,t,n,r,o,i,a){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=o,this.compound=i,this.dotted=a;var s="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(o?"++":"")+s}function ke(e,t,n,r){this.name=e,this.primKey=t||new we,this.indexes=n||[new we],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=d(n,function(e){return[e.name,e]})}function xe(e){return 1===e.length?e[0]:e}function je(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}var Oe=Object.keys,Pe=Array.isArray,Ee="undefined"!=typeof self?self:"undefined"!=typeof window?window:t,Se=Object.getPrototypeOf,Me={}.hasOwnProperty,Ce=Object.getOwnPropertyDescriptor,Te=[].slice,Re="undefined"!=typeof Symbol&&Symbol.iterator,Ae=Re?function(e){var t;return null!=e&&(t=e[Re])&&t.apply(e)}:function(){return null},Ie={},Ne=[].concat,De="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Ue=function(){return!0},Fe=!new Error("").stack,Le=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"],$e=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ze=Le.concat($e),Be={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};i(D).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+I(this._e,2))}},toString:function(){return this.name+": "+this.message}}),i(F).from(D),i(L).from(D);var qe=ze.reduce(function(e,t){return e[t]=t+"Error",e},{}),He=D,Ke=ze.reduce(function(e,t){function n(e,n){this._e=A(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Be[t]||r,this.inner=null)}var r=t+"Error";return i(n).from(He),e[t]=n,e},{});Ke.Syntax=SyntaxError,Ke.Type=TypeError,Ke.Range=RangeError;var Ge=$e.reduce(function(e,t){return e[t+"Error"]=Ke[t],e},{}),Qe=ze.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=Ke[t]),e},{});Qe.ModifyError=F,Qe.DexieError=D,Qe.BulkError=L;var We={},Ye=100,Ve=20,Je=!1,Xe=Ee.setImmediate?setImmediate.bind(null,J):Ee.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){J(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(J,0)},Ze=function(e,t){ut.push([e,t]),tt&&(Xe(),tt=!1)},et=!0,tt=!0,nt=[],rt=[],ot=null,it=j,at={global:!0,ref:0,unhandleds:[],onunhandled:ce,finalize:function(){this.unhandleds.forEach(function(e){try{ce(e[0],e[1])}catch(t){}})}},st=at,ut=[],ct=0,lt=[];r(B.prototype,{then:function(e,t){var n=this,r=new B(function(r,o){Q(n,new q(e,t,r,o))});return De&&(!this._prev||null===this._state)&&V(r,this),r},_then:function(e,t){Q(this,new q(null,null,e,t))},"catch":function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):ie(e)}):this.then(null,function(e){return e&&e.name===t?n(e):ie(e)})},"finally":function(e){return this.then(function(t){return e(),t},function(t){return e(),ie(t)})},uncaught:function(e){var t=this;return this.onuncatched=C(this.onuncatched,e),this._state===!1&&nt.indexOf(this)===-1&&nt.some(function(e,n,r){return e._value===t._value&&(r[n]=t)}),this},stack:{get:function(){if(this._stack)return this._stack;try{Je=!0;var e=Y(this,[],Ve),t=e.join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{Je=!1}}}}),r(B,{all:function(){var e=w.apply(null,arguments);return new B(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(o,i){return B.resolve(o).then(function(n){e[i]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof B?e:e&&"function"==typeof e.then?new B(function(t,n){e.then(t,n)}):new B(We,(!0),e)},reject:ie,race:function(){var e=w.apply(null,arguments);return new B(function(t,n){e.map(function(e){return B.resolve(e).then(t,n)})})},PSD:{get:function(){return st},set:function(e){return st=e}},newPSD:se,usePSD:ue,scheduler:{get:function(){return Ze},set:function(e){Ze=e}},rejectionMapper:{get:function(){return it},set:function(e){it=e}},follow:function(e){return new B(function(t,n){return se(function(t,n){var r=st;r.unhandleds=[],r.onunhandled=n,r.finalize=P(function(){var e=this;te(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n)})},on:z(null,{error:[C,oe]})});var ft=B.on.error;ft.subscribe=N("Promise.on('error')",ft.subscribe),ft.unsubscribe=N("Promise.on('error').unsubscribe",ft.unsubscribe);var dt="unhandledrejection";c(function(){Ze=function(e,t){setTimeout(function(){e.apply(null,t)},0)}});var pt="1.5.1",ht=String.fromCharCode(65535),yt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return ht}}(),vt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gt="String expected.",mt=[],_t="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),bt=_t,wt=_t,kt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};R(De,kt);var xt=function(){},jt=!1,Ot=Ee.idbModules&&Ee.idbModules.shimIndexedDB?Ee.idbModules:{};return r(fe,Qe),r(fe,{"delete":function(e){var t=new fe(e),n=t["delete"]();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new fe(e).open().then(function(e){return e.close(),!0})["catch"](fe.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){return new B(function(e,t){var n=je(indexedDB);if(n){var r=n();r.onsuccess=function(t){e(s(t.target.result,0))},r.onerror=ve(t)}else _e(function(t){return e(t),!1})}).then(e)},defineClass:function(t){function n(n){n?e(this,n):jt&&pe(this,t)}return n},applyStructure:pe,ignoreTransaction:function(e){return st.trans?ue(st.transless,e):e()},vip:function(e){return se(function(){return st.letThrough=!0,e()})},async:function(e){return function(){try{var t=be(e.apply(this,arguments));return t&&"function"==typeof t.then?t:B.resolve(t)}catch(n){return le(n)}}},spawn:function(e,t,n){try{var r=be(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:B.resolve(r)}catch(o){return le(o)}},currentTransaction:{get:function(){return st.trans||null}},Promise:B,debug:{get:function(){return De},set:function(e){R(e,"dexie"===e?function(){return!0}:kt)}},derive:i,extend:e,props:r,override:u,Events:z,events:{get:N(function(){return z})},getByKeyPath:y,setByKeyPath:v,delByKeyPath:g,shallowClone:m,deepClone:_,getObjectDiff:b,asap:f,maxKey:yt,addons:[],connections:mt,MultiModifyError:Ke.Modify,errnames:qe,IndexSpec:we,TableSchema:ke,dependencies:{indexedDB:Ot.shimIndexedDB||Ee.indexedDB||Ee.mozIndexedDB||Ee.webkitIndexedDB||Ee.msIndexedDB,IDBKeyRange:Ot.IDBKeyRange||Ee.IDBKeyRange||Ee.webkitIDBKeyRange},semVer:pt,version:pt.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),fakeAutoComplete:xt,"default":fe}),h(function(){fe.dependencies.localStorage=null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:Ee.localStorage}),B.rejectionMapper=$,c(function(){fe.fakeAutoComplete=xt=c,fe.fake=jt=!0}),fe})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,n,r){(function(o){!function(t){if("object"==typeof r&&"undefined"!=typeof n)n.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.minibus=t()}}(function(){return function e(n,r,o){function i(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof t&&t;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};n[s][0].call(f.exports,function(e){var t=n[s][1][e];return i(t?t:e)},f,f.exports,e,n,r,o)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":12}],2:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":13}],3:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":14}],4:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":15}],5:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":16}],6:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":17}],7:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/define-property"),i=r(o);n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":2}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=r(o),a=e("../core-js/object/create"),s=r(a),u=e("../helpers/typeof"),c=r(u);n["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,s["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},{"../core-js/object/create":1,"../core-js/object/set-prototype-of":4,"../helpers/typeof":11}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../helpers/typeof"),i=r(o);n["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":11}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/symbol/iterator"),i=r(o),a=e("../core-js/symbol"),s=r(a),u="function"==typeof s["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":typeof e};n["default"]="function"==typeof s["default"]&&"symbol"===u(i["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},{"../core-js/symbol":5,"../core-js/symbol/iterator":6}],12:[function(e,t,n){e("../../modules/es6.object.create");var r=e("../../modules/_core").Object;t.exports=function(e,t){return r.create(e,t)}},{"../../modules/_core":23,"../../modules/es6.object.create":77}],13:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":23,"../../modules/es6.object.define-property":78}],14:[function(e,t,n){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":23,"../../modules/es6.object.get-prototype-of":79}],15:[function(e,t,n){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":23,"../../modules/es6.object.set-prototype-of":80}],16:[function(e,t,n){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":23,"../../modules/es6.object.to-string":81,"../../modules/es6.symbol":83,"../../modules/es7.symbol.async-iterator":84,"../../modules/es7.symbol.observable":85}],17:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":74,"../../modules/es6.string.iterator":82,"../../modules/web.dom.iterable":86}],18:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],19:[function(e,t,n){t.exports=function(){}},{}],20:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":39}],21:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,n,a){var s,u=r(t),c=o(u.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},{"./_to-index":66,"./_to-iobject":68,"./_to-length":69}],22:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],23:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],24:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":18}],25:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],26:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":31}],27:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":32,"./_is-object":39}],28:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],29:[function(e,t,n){var r=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},{"./_object-gops":53,"./_object-keys":56,"./_object-pie":57}],30:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,v=e&u.B,g=e&u.W,m=p?o:o[t]||(o[t]={}),_=m[s],b=p?r:h?r[t]:(r[t]||{})[s];p&&(n=t);for(c in n)l=!d&&b&&void 0!==b[c],l&&c in m||(f=l?b[c]:n[c],m[c]=p&&"function"!=typeof b[c]?n[c]:v&&l?i(f,r):g&&b[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&_&&!_[c]&&a(_,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":23,"./_ctx":24,"./_global":32,"./_hide":34}],31:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],32:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],33:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],34:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":26,"./_object-dp":48,"./_property-desc":59}],35:[function(e,t,n){t.exports=e("./_global").document&&document.documentElement},{"./_global":32}],36:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){
return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":26,"./_dom-create":27,"./_fails":31}],37:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":22}],38:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":22}],39:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],40:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},{"./_hide":34,"./_object-create":47,"./_property-desc":59,"./_set-to-string-tag":62,"./_wks":75}],41:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",v="values",g=function(){return this};t.exports=function(e,t,n,m,_,b,w){c(n,t,m);var k,x,j,O=function(e){if(!p&&e in M)return M[e];switch(e){case y:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},P=t+" Iterator",E=_==v,S=!1,M=e.prototype,C=M[d]||M[h]||_&&M[_],T=C||O(_),R=_?E?O("entries"):T:void 0,A="Array"==t?M.entries||C:C;if(A&&(j=f(A.call(new e)),j!==Object.prototype&&(l(j,P,!0),r||s(j,d)||a(j,d,g))),E&&C&&C.name!==v&&(S=!0,T=function(){return C.call(this)}),r&&!w||!p&&!S&&M[d]||a(M,d,T),u[t]=T,u[P]=g,_)if(k={values:E?T:O(v),keys:b?T:O(y),entries:R},w)for(x in k)x in M||i(M,x,k[x]);else o(o.P+o.F*(p||S),t,k);return k}},{"./_export":30,"./_has":33,"./_hide":34,"./_iter-create":40,"./_iterators":43,"./_library":45,"./_object-gpo":54,"./_redefine":60,"./_set-to-string-tag":62,"./_wks":75}],42:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],43:[function(e,t,n){t.exports={}},{}],44:[function(e,t,n){var r=e("./_object-keys"),o=e("./_to-iobject");t.exports=function(e,t){for(var n,i=o(e),a=r(i),s=a.length,u=0;s>u;)if(i[n=a[u++]]===t)return n}},{"./_object-keys":56,"./_to-iobject":68}],45:[function(e,t,n){t.exports=!0},{}],46:[function(e,t,n){var r=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return c&&h.NEED&&u(e)&&!i(e,r)&&l(e),e},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},{"./_fails":31,"./_has":33,"./_is-object":39,"./_object-dp":48,"./_uid":72}],47:[function(e,t,n){var r=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},u="prototype",c=function(){var t,n=e("./_dom-create")("iframe"),r=i.length,o="<",a=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+a+"document.F=Object"+o+"/script"+a),t.close(),c=t.F;r--;)delete c[u][i[r]];return c()};t.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},{"./_an-object":20,"./_dom-create":27,"./_enum-bug-keys":28,"./_html":35,"./_object-dps":49,"./_shared-key":63}],48:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":20,"./_descriptors":26,"./_ie8-dom-define":36,"./_to-primitive":71}],49:[function(e,t,n){var r=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},{"./_an-object":20,"./_descriptors":26,"./_object-dp":48,"./_object-keys":56}],50:[function(e,t,n){var r=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},{"./_descriptors":26,"./_has":33,"./_ie8-dom-define":36,"./_object-pie":57,"./_property-desc":59,"./_to-iobject":68,"./_to-primitive":71}],51:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};t.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(r(e))}},{"./_object-gopn":52,"./_to-iobject":68}],52:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},{"./_enum-bug-keys":28,"./_object-keys-internal":55}],53:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],54:[function(e,t,n){var r=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":33,"./_shared-key":63,"./_to-object":70}],55:[function(e,t,n){var r=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,s=o(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},{"./_array-includes":21,"./_has":33,"./_shared-key":63,"./_to-iobject":68}],56:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":28,"./_object-keys-internal":55}],57:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],58:[function(e,t,n){var r=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},{"./_core":23,"./_export":30,"./_fails":31}],59:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],60:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":34}],61:[function(e,t,n){var r=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r("./_ctx")(Function.call,r("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},{"./_an-object":20,"./_ctx":24,"./_is-object":39,"./_object-gopd":50}],62:[function(e,t,n){var r=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"./_has":33,"./_object-dp":48,"./_wks":75}],63:[function(e,t,n){var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":64,"./_uid":72}],64:[function(e,t,n){var r=e("./_global"),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":32}],65:[function(e,t,n){var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},{"./_defined":25,"./_to-integer":67}],66:[function(e,t,n){var r=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":67}],67:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],68:[function(e,t,n){var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":25,"./_iobject":37}],69:[function(e,t,n){var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":67}],70:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":25}],71:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":39}],72:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],73:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":23,"./_global":32,"./_library":45,"./_object-dp":48,"./_wks-ext":74}],74:[function(e,t,n){n.f=e("./_wks")},{"./_wks":75}],75:[function(e,t,n){var r=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i,s=t.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))};s.store=r},{"./_global":32,"./_shared":64,"./_uid":72}],76:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":19,"./_iter-define":41,"./_iter-step":42,"./_iterators":43,"./_to-iobject":68}],77:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":30,"./_object-create":47}],78:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":26,"./_export":30,"./_object-dp":48}],79:[function(e,t,n){var r=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(r(e))}})},{"./_object-gpo":54,"./_object-sap":58,"./_to-object":70}],80:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":30,"./_set-proto":61}],81:[function(e,t,n){},{}],82:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":41,"./_string-at":65}],83:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_has"),i=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),d=e("./_uid"),p=e("./_wks"),h=e("./_wks-ext"),y=e("./_wks-define"),v=e("./_keyof"),g=e("./_enum-keys"),m=e("./_is-array"),_=e("./_an-object"),b=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),x=e("./_object-create"),j=e("./_object-gopn-ext"),O=e("./_object-gopd"),P=e("./_object-dp"),E=e("./_object-keys"),S=O.f,M=P.f,C=j.f,T=r.Symbol,R=r.JSON,A=R&&R.stringify,I="prototype",N=p("_hidden"),D=p("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),L=l("symbols"),$=l("op-symbols"),z=Object[I],B="function"==typeof T,q=r.QObject,H=!q||!q[I]||!q[I].findChild,K=i&&c(function(){return 7!=x(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=S(z,t);r&&delete z[t],M(e,t,n),r&&e!==z&&M(z,t,r)}:M,G=function(e){var t=L[e]=x(T[I]);return t._k=e,t},Q=B&&"symbol"==typeof T.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof T},W=function(e,t,n){return e===z&&W($,t,n),_(e),t=w(t,!0),_(n),o(L,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=x(n,{enumerable:k(0,!1)})):(o(e,N)||M(e,N,k(1,{})),e[N][t]=!0),K(e,t,n)):M(e,t,n)},Y=function(e,t){_(e);for(var n,r=g(t=b(t)),o=0,i=r.length;i>o;)W(e,n=r[o++],t[n]);return e},V=function(e,t){return void 0===t?x(e):Y(x(e),t)},J=function(e){var t=U.call(this,e=w(e,!0));return!(this===z&&o(L,e)&&!o($,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,N)&&this[N][e])||t)},X=function(e,t){if(e=b(e),t=w(t,!0),e!==z||!o(L,t)||o($,t)){var n=S(e,t);return!n||!o(L,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=C(b(e)),r=[],i=0;n.length>i;)o(L,t=n[i++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===z,r=C(n?$:b(e)),i=[],a=0;r.length>a;)!o(L,t=r[a++])||n&&!o(z,t)||i.push(L[t]);return i};B||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call($,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),K(this,e,k(1,n))};return i&&H&&K(z,e,{configurable:!0,set:t}),G(e)},s(T[I],"toString",function(){return this._k}),O.f=X,P.f=W,e("./_object-gopn").f=j.f=Z,e("./_object-pie").f=J,e("./_object-gops").f=ee,i&&!e("./_library")&&s(z,"propertyIsEnumerable",J,!0),h.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!B,{Symbol:T});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var te=E(p.store),ne=0;te.length>ne;)y(te[ne++]);a(a.S+a.F*!B,"Symbol",{"for":function(e){return o(F,e+="")?F[e]:F[e]=T(e)},keyFor:function(e){if(Q(e))return v(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!B,"Object",{create:V,defineProperty:W,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),R&&a(a.S+a.F*(!B||c(function(){var e=T();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Q(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&m(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Q(t))return t}),r[1]=t,A.apply(R,r)}}}),T[I][D]||e("./_hide")(T[I],D,T[I].valueOf),f(T,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},{"./_an-object":20,"./_descriptors":26,"./_enum-keys":29,"./_export":30,"./_fails":31,"./_global":32,"./_has":33,"./_hide":34,"./_is-array":38,"./_keyof":44,"./_library":45,"./_meta":46,"./_object-create":47,"./_object-dp":48,"./_object-gopd":50,"./_object-gopn":52,"./_object-gopn-ext":51,"./_object-gops":53,"./_object-keys":56,"./_object-pie":57,"./_property-desc":59,"./_redefine":60,"./_set-to-string-tag":62,"./_shared":64,"./_to-iobject":68,"./_to-primitive":71,"./_uid":72,"./_wks":75,"./_wks-define":73,"./_wks-ext":74}],84:[function(e,t,n){e("./_wks-define")("asyncIterator")},{"./_wks-define":73}],85:[function(e,t,n){e("./_wks-define")("observable")},{"./_wks-define":73}],86:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),o=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&o(f,a,c),i[c]=i.Array}},{"./_global":32,"./_hide":34,"./_iterators":43,"./_wks":75,"./es6.array.iterator":76}],87:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),a=e("babel-runtime/helpers/createClass"),s=r(a),u=function(){function e(){(0,i["default"])(this,e);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=5e3,t._responseCallbacks={},t._registerExternalListener()}return(0,s["default"])(e,[{key:"addListener",value:function(e,t){var n=this,r=new c(n._subscriptions,e,t),o=n._subscriptions[e];return o||(o=[],n._subscriptions[e]=o),o.push(r),r}},{key:"addResponseListener",value:function(e,t,n){this._responseCallbacks[e+t]=n}},{key:"removeResponseListener",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:"removeAllListenersOf",value:function(e){delete this._subscriptions[e]}},{key:"bind",value:function(e,t,n){var r=this,o=this,i=o.addListener(e,function(e){n.postMessage(e)}),a=n.addListener(t,function(e){o.postMessage(e)});return{thisListener:i,targetListener:a,unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:"_publishOnDefault",value:function(e){var t=this._subscriptions["*"];t&&this._publishOn(t,e)}},{key:"_publishOn",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:"_responseCallback",value:function(e,t){var n=this;t&&!function(){var r=e.from+e.id;n._responseCallbacks[r]=t,setTimeout(function(){var t=n._responseCallbacks[r];if(delete n._responseCallbacks[r],t){var o={id:e.id,type:"response",body:{code:408,desc:"Response timeout!",value:e}};t(o)}},n._responseTimeOut)}()}},{key:"_onResponse",value:function(e){var t=this;if("response"===e.type){var n=e.to+e.id,r=t._responseCallbacks[n];if(e.body.code>=200&&delete t._responseCallbacks[n],r)return r(e),!0}return!1}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?t._publishOn(n,e):t._publishOnDefault(e)}}},{key:"_genId",value:function(e){e.id&&0!==e.id||(this._msgId++,e.id=this._msgId)}},{key:"postMessage",value:function(e,t){}},{key:"_onPostMessage",value:function(e){}},{key:"_registerExternalListener",value:function(){}}]),e}(),c=function(){function e(t,n,r){(0,i["default"])(this,e);var o=this;o._subscriptions=t,o._url=n,o._callback=r}return(0,s["default"])(e,[{key:"remove",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var n=t.indexOf(e);t.splice(n,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:"url",get:function(){return this._url}}]),e}();n["default"]=u,t.exports=n["default"]},{"babel-runtime/helpers/classCallCheck":7,"babel-runtime/helpers/createClass":8}],88:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),a=e("babel-runtime/helpers/classCallCheck"),s=r(a),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(l),d=e("babel-runtime/helpers/inherits"),p=r(d),h=e("./Bus"),y=r(h),v=function(e){function t(){return(0,s["default"])(this,t),(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"postMessage",value:function(e,t){var n=this;return n._genId(e),n._responseCallback(e,t),n._onPostMessage(e),e.id}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?(t._publishOn(n,e),e.to.startsWith("hyperty")||t._publishOnDefault(e)):t._publishOnDefault(e)}}}]),t}(y["default"]);n["default"]=v,t.exports=n["default"]},{"./Bus":87,"babel-runtime/core-js/object/get-prototype-of":3,"babel-runtime/helpers/classCallCheck":7,"babel-runtime/helpers/createClass":8,"babel-runtime/helpers/inherits":9,"babel-runtime/helpers/possibleConstructorReturn":10}],89:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./bus/MiniBus"),i=r(o);n["default"]=i["default"],t.exports=n["default"]},{"./bus/MiniBus":88}]},{},[89])(89)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,n,r){(function(o){!function(t){if("object"==typeof r&&"undefined"!=typeof n)n.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.sandbox=t()}}(function(){return function e(n,r,o){function i(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof t&&t;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};n[s][0].call(f.exports,function(e){var t=n[s][1][e];return i(t?t:e)},f,f.exports,e,n,r,o)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":13}],2:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":14}],3:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":15}],4:[function(e,t,n){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":16}],5:[function(e,t,n){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":17}],6:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":18}],7:[function(e,t,n){t.exports={"default":e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":19}],8:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/define-property"),i=r(o);n["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":2}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=r(o),a=e("../core-js/object/create"),s=r(a),u=e("../helpers/typeof"),c=r(u);n["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,s["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},{"../core-js/object/create":1,"../core-js/object/set-prototype-of":4,"../helpers/typeof":12}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../helpers/typeof"),i=r(o);n["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":12}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var o=e("../core-js/symbol/iterator"),i=r(o),a=e("../core-js/symbol"),s=r(a),u="function"==typeof s["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":typeof e};n["default"]="function"==typeof s["default"]&&"symbol"===u(i["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},{"../core-js/symbol":6,"../core-js/symbol/iterator":7}],13:[function(e,t,n){e("../../modules/es6.object.create");var r=e("../../modules/_core").Object;t.exports=function(e,t){return r.create(e,t)}},{"../../modules/_core":27,"../../modules/es6.object.create":92}],14:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,n){return r.defineProperty(e,t,n)}},{"../../modules/_core":27,"../../modules/es6.object.define-property":93}],15:[function(e,t,n){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":27,"../../modules/es6.object.get-prototype-of":94}],16:[function(e,t,n){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":27,"../../modules/es6.object.set-prototype-of":95}],17:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":27,"../modules/es6.object.to-string":96,"../modules/es6.promise":97,"../modules/es6.string.iterator":98,"../modules/web.dom.iterable":102}],18:[function(e,t,n){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":27,"../../modules/es6.object.to-string":96,"../../modules/es6.symbol":99,"../../modules/es7.symbol.async-iterator":100,"../../modules/es7.symbol.observable":101}],19:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":88,"../../modules/es6.string.iterator":98,"../../modules/web.dom.iterable":102}],20:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],21:[function(e,t,n){t.exports=function(){}},{}],22:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],23:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":46}],24:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,n,a){var s,u=r(t),c=o(u.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},{"./_to-index":80,"./_to-iobject":82,"./_to-length":83}],25:[function(e,t,n){var r=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":26,"./_wks":89}],26:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],27:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],28:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":20}],29:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],30:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":35}],31:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":37,"./_is-object":46}],32:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],33:[function(e,t,n){var r=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},{"./_object-gops":63,"./_object-keys":66,"./_object-pie":67}],34:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,v=e&u.B,g=e&u.W,m=p?o:o[t]||(o[t]={}),_=m[s],b=p?r:h?r[t]:(r[t]||{})[s];p&&(n=t);for(c in n)l=!d&&b&&void 0!==b[c],l&&c in m||(f=l?b[c]:n[c],m[c]=p&&"function"!=typeof b[c]?n[c]:v&&l?i(f,r):g&&b[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&_&&!_[c]&&a(_,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":27,"./_ctx":28,"./_global":37,"./_hide":39}],35:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],36:[function(e,t,n){var r=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={},n=t.exports=function(e,t,n,f,d){var p,h,y,v,g=d?function(){return e}:u(e),m=r(n,f,t?2:1),_=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(p=s(e.length);p>_;_++)if(v=t?m(a(h=e[_])[0],h[1]):m(e[_]),v===c||v===l)return v}else for(y=g.call(e);!(h=y.next()).done;)if(v=o(y,m,h.value,t),v===c||v===l)return v};n.BREAK=c,n.RETURN=l},{"./_an-object":23,"./_ctx":28,"./_is-array-iter":44,"./_iter-call":47,"./_to-length":83,"./core.get-iterator-method":90}],37:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],38:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],39:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":30,"./_object-dp":58,"./_property-desc":69}],40:[function(e,t,n){t.exports=e("./_global").document&&document.documentElement},{"./_global":37}],41:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":30,"./_dom-create":31,"./_fails":35}],42:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],43:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":26}],44:[function(e,t,n){var r=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},{"./_iterators":52,
"./_wks":89}],45:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":26}],46:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],47:[function(e,t,n){var r=e("./_an-object");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e["return"];throw void 0!==i&&r(i.call(e)),t}}},{"./_an-object":23}],48:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},{"./_hide":39,"./_object-create":57,"./_property-desc":69,"./_set-to-string-tag":74,"./_wks":89}],49:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",v="values",g=function(){return this};t.exports=function(e,t,n,m,_,b,w){c(n,t,m);var k,x,j,O=function(e){if(!p&&e in M)return M[e];switch(e){case y:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},P=t+" Iterator",E=_==v,S=!1,M=e.prototype,C=M[d]||M[h]||_&&M[_],T=C||O(_),R=_?E?O("entries"):T:void 0,A="Array"==t?M.entries||C:C;if(A&&(j=f(A.call(new e)),j!==Object.prototype&&(l(j,P,!0),r||s(j,d)||a(j,d,g))),E&&C&&C.name!==v&&(S=!0,T=function(){return C.call(this)}),r&&!w||!p&&!S&&M[d]||a(M,d,T),u[t]=T,u[P]=g,_)if(k={values:E?T:O(v),keys:b?T:O(y),entries:R},w)for(x in k)x in M||i(M,x,k[x]);else o(o.P+o.F*(p||S),t,k);return k}},{"./_export":34,"./_has":38,"./_hide":39,"./_iter-create":48,"./_iterators":52,"./_library":54,"./_object-gpo":64,"./_redefine":71,"./_set-to-string-tag":74,"./_wks":89}],50:[function(e,t,n){var r=e("./_wks")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},{"./_wks":89}],51:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],52:[function(e,t,n){t.exports={}},{}],53:[function(e,t,n){var r=e("./_object-keys"),o=e("./_to-iobject");t.exports=function(e,t){for(var n,i=o(e),a=r(i),s=a.length,u=0;s>u;)if(i[n=a[u++]]===t)return n}},{"./_object-keys":66,"./_to-iobject":82}],54:[function(e,t,n){t.exports=!0},{}],55:[function(e,t,n){var r=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return c&&h.NEED&&u(e)&&!i(e,r)&&l(e),e},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},{"./_fails":35,"./_has":38,"./_is-object":46,"./_object-dp":58,"./_uid":86}],56:[function(e,t,n){var r=e("./_global"),o=e("./_task").set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==e("./_cof")(a);t.exports=function(){var e,t,n,c=function(){var r,o;for(u&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(i){var l=!0,f=document.createTextNode("");new i(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){o.call(r,c)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},{"./_cof":26,"./_global":37,"./_task":79}],57:[function(e,t,n){var r=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},u="prototype",c=function(){var t,n=e("./_dom-create")("iframe"),r=i.length,o="<",a=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+a+"document.F=Object"+o+"/script"+a),t.close(),c=t.F;r--;)delete c[u][i[r]];return c()};t.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},{"./_an-object":23,"./_dom-create":31,"./_enum-bug-keys":32,"./_html":40,"./_object-dps":59,"./_shared-key":75}],58:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":23,"./_descriptors":30,"./_ie8-dom-define":41,"./_to-primitive":85}],59:[function(e,t,n){var r=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},{"./_an-object":23,"./_descriptors":30,"./_object-dp":58,"./_object-keys":66}],60:[function(e,t,n){var r=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},{"./_descriptors":30,"./_has":38,"./_ie8-dom-define":41,"./_object-pie":67,"./_property-desc":69,"./_to-iobject":82,"./_to-primitive":85}],61:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};t.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(r(e))}},{"./_object-gopn":62,"./_to-iobject":82}],62:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},{"./_enum-bug-keys":32,"./_object-keys-internal":65}],63:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],64:[function(e,t,n){var r=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":38,"./_shared-key":75,"./_to-object":84}],65:[function(e,t,n){var r=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,s=o(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},{"./_array-includes":24,"./_has":38,"./_shared-key":75,"./_to-iobject":82}],66:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":32,"./_object-keys-internal":65}],67:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],68:[function(e,t,n){var r=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},{"./_core":27,"./_export":34,"./_fails":35}],69:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],70:[function(e,t,n){var r=e("./_hide");t.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},{"./_hide":39}],71:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":39}],72:[function(e,t,n){var r=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r("./_ctx")(Function.call,r("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},{"./_an-object":23,"./_ctx":28,"./_is-object":46,"./_object-gopd":60}],73:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_core"),i=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":27,"./_descriptors":30,"./_global":37,"./_object-dp":58,"./_wks":89}],74:[function(e,t,n){var r=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"./_has":38,"./_object-dp":58,"./_wks":89}],75:[function(e,t,n){var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":76,"./_uid":86}],76:[function(e,t,n){var r=e("./_global"),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":37}],77:[function(e,t,n){var r=e("./_an-object"),o=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},{"./_a-function":20,"./_an-object":23,"./_wks":89}],78:[function(e,t,n){var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},{"./_defined":29,"./_to-integer":81}],79:[function(e,t,n){var r,o,i,a=e("./_ctx"),s=e("./_invoke"),u=e("./_html"),c=e("./_dom-create"),l=e("./_global"),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,y=0,v={},g="onreadystatechange",m=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){m.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},p=function(e){delete v[e]},"process"==e("./_cof")(f)?r=function(e){f.nextTick(a(m,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=_,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):r=g in c("script")?function(e){u.appendChild(c("script"))[g]=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),t.exports={set:d,clear:p}},{"./_cof":26,"./_ctx":28,"./_dom-create":31,"./_global":37,"./_html":40,"./_invoke":42}],80:[function(e,t,n){var r=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":81}],81:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],82:[function(e,t,n){var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":29,"./_iobject":43}],83:[function(e,t,n){var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":81}],84:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":29}],85:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":46}],86:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],87:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":27,"./_global":37,"./_library":54,"./_object-dp":58,"./_wks-ext":88}],88:[function(e,t,n){n.f=e("./_wks")},{"./_wks":89}],89:[function(e,t,n){var r=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i,s=t.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))};s.store=r},{"./_global":37,"./_shared":76,"./_uid":86}],90:[function(e,t,n){var r=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},{"./_classof":25,"./_core":27,"./_iterators":52,"./_wks":89}],91:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":21,"./_iter-define":49,"./_iter-step":51,"./_iterators":52,"./_to-iobject":82}],92:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":34,"./_object-create":57}],93:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":30,"./_export":34,"./_object-dp":58}],94:[function(e,t,n){var r=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(r(e))}})},{"./_object-gpo":64,"./_object-sap":68,"./_to-object":84}],95:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":34,"./_set-proto":72}],96:[function(e,t,n){},{}],97:[function(e,t,n){"use strict";var r,o,i,a=e("./_library"),s=e("./_global"),u=e("./_ctx"),c=e("./_classof"),l=e("./_export"),f=e("./_is-object"),d=e("./_a-function"),p=e("./_an-instance"),h=e("./_for-of"),y=e("./_species-constructor"),v=e("./_task").set,g=e("./_microtask")(),m="Promise",_=s.TypeError,b=s.process,w=s[m],b=s.process,k="process"==c(b),x=function(){},j=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n("./_wks")("species")]=function(e){e(x,x)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(n){}}(),O=function(e,t){return e===t||e===w&&t===i},P=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},E=function(e){return O(w,e)?new S(e):new o(e)},S=o=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw _("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},M=function(e){try{e()}catch(e){return{error:e}}},C=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,o=1==e._s,i=0,a=function(e){var t,n,i=o?e.ok:e.fail,a=e.resolve,s=e.reject,u=e.domain;try{i?(o||(2==c._h&&A(c),c._h=1),i===!0?t=r:(u&&u.enter(),t=i(r),u&&u.exit()),t===e.promise?s(_("Promise-chain cycle")):(n=P(t))?n.call(t,a,s):a(t)):s(r)}catch(c){s(c)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){v.call(s,function(){var t,n,r,o=e._v;if(R(e)&&(t=M(function(){k?b.emit("unhandledRejection",o,e):(n=s.onunhandledrejection)?n({promise:e,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=k||R(e)?2:1),e._a=void 0,t)throw t.error})},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!R(t.promise))return!1;return!0},A=function(e){v.call(s,function(){var t;k?b.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},I=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw _("Promise can't be resolved itself");(t=P(e))?g(function(){var e={_w:n,_d:!1};try{t.call(r,u(N,e,1),u(I,e,1))}catch(r){I.call(e,r)}}):(n._v=e,n._s=1,C(n,!1))}catch(e){I.call({_w:n,_d:!1},e)}}};j||(w=function(e){p(this,w,m,"_h"),d(e),r.call(this);try{e(u(N,this,1),u(I,this,1))}catch(e){I.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e("./_redefine-all")(w.prototype,{then:function(e,t){var n=E(y(this,w));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),S=function(){var e=new r;this.promise=e,this.resolve=u(N,e,1),this.reject=u(I,e,1)}),l(l.G+l.W+l.F*!j,{Promise:w}),e("./_set-to-string-tag")(w,m),e("./_set-species")(m),i=e("./_core")[m],l(l.S+l.F*!j,m,{reject:function(e){var t=E(this),n=t.reject;return n(e),t.promise}}),l(l.S+l.F*(a||!j),m,{resolve:function(e){if(e instanceof w&&O(e.constructor,this))return e;var t=E(this),n=t.resolve;return n(e),t.promise}}),l(l.S+l.F*!(j&&e("./_iter-detect")(function(e){w.all(e)["catch"](x)})),m,{all:function(e){var t=this,n=E(t),r=n.resolve,o=n.reject,i=M(function(){var n=[],i=0,a=1;h(e,!1,function(e){var s=i++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i&&o(i.error),n.promise},race:function(e){var t=this,n=E(t),r=n.reject,o=M(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},{"./_a-function":20,"./_an-instance":22,"./_classof":25,"./_core":27,"./_ctx":28,"./_export":34,"./_for-of":36,"./_global":37,"./_is-object":46,"./_iter-detect":50,"./_library":54,"./_microtask":56,"./_redefine-all":70,"./_set-species":73,"./_set-to-string-tag":74,"./_species-constructor":77,"./_task":79,"./_wks":89}],98:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":49,"./_string-at":78}],99:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_has"),i=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),d=e("./_uid"),p=e("./_wks"),h=e("./_wks-ext"),y=e("./_wks-define"),v=e("./_keyof"),g=e("./_enum-keys"),m=e("./_is-array"),_=e("./_an-object"),b=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),x=e("./_object-create"),j=e("./_object-gopn-ext"),O=e("./_object-gopd"),P=e("./_object-dp"),E=e("./_object-keys"),S=O.f,M=P.f,C=j.f,T=r.Symbol,R=r.JSON,A=R&&R.stringify,I="prototype",N=p("_hidden"),D=p("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),L=l("symbols"),$=l("op-symbols"),z=Object[I],B="function"==typeof T,q=r.QObject,H=!q||!q[I]||!q[I].findChild,K=i&&c(function(){return 7!=x(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=S(z,t);r&&delete z[t],M(e,t,n),r&&e!==z&&M(z,t,r)}:M,G=function(e){var t=L[e]=x(T[I]);return t._k=e,t},Q=B&&"symbol"==typeof T.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof T},W=function(e,t,n){return e===z&&W($,t,n),_(e),t=w(t,!0),_(n),o(L,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=x(n,{enumerable:k(0,!1)})):(o(e,N)||M(e,N,k(1,{})),e[N][t]=!0),K(e,t,n)):M(e,t,n)},Y=function(e,t){_(e);for(var n,r=g(t=b(t)),o=0,i=r.length;i>o;)W(e,n=r[o++],t[n]);return e},V=function(e,t){return void 0===t?x(e):Y(x(e),t)},J=function(e){var t=U.call(this,e=w(e,!0));return!(this===z&&o(L,e)&&!o($,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,N)&&this[N][e])||t)},X=function(e,t){if(e=b(e),t=w(t,!0),e!==z||!o(L,t)||o($,t)){var n=S(e,t);return!n||!o(L,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=C(b(e)),r=[],i=0;n.length>i;)o(L,t=n[i++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===z,r=C(n?$:b(e)),i=[],a=0;r.length>a;)!o(L,t=r[a++])||n&&!o(z,t)||i.push(L[t]);return i};B||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call($,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),K(this,e,k(1,n))};return i&&H&&K(z,e,{configurable:!0,set:t}),G(e)},s(T[I],"toString",function(){return this._k}),O.f=X,P.f=W,e("./_object-gopn").f=j.f=Z,e("./_object-pie").f=J,e("./_object-gops").f=ee,i&&!e("./_library")&&s(z,"propertyIsEnumerable",J,!0),h.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!B,{Symbol:T});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var te=E(p.store),ne=0;te.length>ne;)y(te[ne++]);a(a.S+a.F*!B,"Symbol",{"for":function(e){return o(F,e+="")?F[e]:F[e]=T(e)},keyFor:function(e){if(Q(e))return v(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!B,"Object",{create:V,defineProperty:W,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),R&&a(a.S+a.F*(!B||c(function(){var e=T();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Q(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&m(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Q(t))return t}),r[1]=t,A.apply(R,r)}}}),T[I][D]||e("./_hide")(T[I],D,T[I].valueOf),f(T,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},{"./_an-object":23,"./_descriptors":30,"./_enum-keys":33,"./_export":34,"./_fails":35,"./_global":37,"./_has":38,"./_hide":39,"./_is-array":45,"./_keyof":53,"./_library":54,"./_meta":55,"./_object-create":57,"./_object-dp":58,"./_object-gopd":60,"./_object-gopn":62,"./_object-gopn-ext":61,"./_object-gops":63,"./_object-keys":66,"./_object-pie":67,"./_property-desc":69,"./_redefine":71,"./_set-to-string-tag":74,"./_shared":76,"./_to-iobject":82,"./_to-primitive":85,"./_uid":86,"./_wks":89,"./_wks-define":87,"./_wks-ext":88}],100:[function(e,t,n){e("./_wks-define")("asyncIterator")},{"./_wks-define":87}],101:[function(e,t,n){e("./_wks-define")("observable")},{"./_wks-define":87}],102:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),o=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&o(f,a,c),i[c]=i.Array}},{"./_global":37,"./_hide":39,"./_iterators":52,"./_wks":89,"./es6.array.iterator":91}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),a=e("babel-runtime/helpers/createClass"),s=r(a),u=function(){function e(){(0,i["default"])(this,e);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=5e3,t._responseCallbacks={},t._registerExternalListener()}return(0,s["default"])(e,[{key:"addListener",value:function(e,t){var n=this,r=new c(n._subscriptions,e,t),o=n._subscriptions[e];return o||(o=[],n._subscriptions[e]=o),o.push(r),r}},{key:"addResponseListener",value:function(e,t,n){this._responseCallbacks[e+t]=n}},{key:"removeResponseListener",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:"removeAllListenersOf",value:function(e){delete this._subscriptions[e]}},{key:"bind",value:function(e,t,n){var r=this,o=this,i=o.addListener(e,function(e){n.postMessage(e)}),a=n.addListener(t,function(e){o.postMessage(e)});return{thisListener:i,targetListener:a,unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:"_publishOnDefault",value:function(e){var t=this._subscriptions["*"];t&&this._publishOn(t,e)}},{key:"_publishOn",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:"_responseCallback",value:function(e,t){var n=this;t&&!function(){var r=e.from+e.id;n._responseCallbacks[r]=t,setTimeout(function(){var t=n._responseCallbacks[r];if(delete n._responseCallbacks[r],t){var o={id:e.id,type:"response",body:{code:408,desc:"Response timeout!",value:e}};t(o)}},n._responseTimeOut)}()}},{key:"_onResponse",value:function(e){var t=this;if("response"===e.type){var n=e.to+e.id,r=t._responseCallbacks[n];if(e.body.code>=200&&delete t._responseCallbacks[n],r)return r(e),!0}return!1}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?t._publishOn(n,e):t._publishOnDefault(e)}}},{key:"_genId",value:function(e){e.id&&0!==e.id||(this._msgId++,e.id=this._msgId)}},{key:"postMessage",value:function(e,t){}},{key:"_onPostMessage",value:function(e){}},{key:"_registerExternalListener",value:function(){}}]),e}(),c=function(){function e(t,n,r){(0,i["default"])(this,e);var o=this;o._subscriptions=t,o._url=n,o._callback=r}return(0,s["default"])(e,[{key:"remove",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var n=t.indexOf(e);t.splice(n,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:"url",get:function(){return this._url}}]),e}();n["default"]=u,t.exports=n["default"]},{"babel-runtime/helpers/classCallCheck":8,"babel-runtime/helpers/createClass":9}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/core-js/object/get-prototype-of"),i=r(o),a=e("babel-runtime/helpers/classCallCheck"),s=r(a),u=e("babel-runtime/helpers/createClass"),c=r(u),l=e("babel-runtime/helpers/possibleConstructorReturn"),f=r(l),d=e("babel-runtime/helpers/inherits"),p=r(d),h=e("./Bus"),y=r(h),v=function(e){function t(){return(0,s["default"])(this,t),(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this))}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"postMessage",value:function(e,t){var n=this;return n._genId(e),n._responseCallback(e,t),n._onPostMessage(e),e.id}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?(t._publishOn(n,e),e.to.startsWith("hyperty")||t._publishOnDefault(e)):t._publishOnDefault(e)}}}]),t}(y["default"]);n["default"]=v,t.exports=n["default"]},{"./Bus":103,"babel-runtime/core-js/object/get-prototype-of":3,"babel-runtime/helpers/classCallCheck":8,"babel-runtime/helpers/createClass":9,"babel-runtime/helpers/inherits":10,"babel-runtime/helpers/possibleConstructorReturn":11}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.SandboxRegistry=n.SandboxType=n.Sandbox=void 0;var o=e("./sandbox/Sandbox"),i=r(o),a=e("./sandbox/SandboxRegistry"),s=r(a);n.Sandbox=i["default"],n.SandboxType=o.SandboxType,n.SandboxRegistry=s["default"]},{"./sandbox/Sandbox":106,"./sandbox/SandboxRegistry":107}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.SandboxType=void 0;var o=e("babel-runtime/core-js/promise"),i=r(o),a=e("babel-runtime/core-js/object/get-prototype-of"),s=r(a),u=e("babel-runtime/helpers/classCallCheck"),c=r(u),l=e("babel-runtime/helpers/createClass"),f=r(l),d=e("babel-runtime/helpers/possibleConstructorReturn"),p=r(d),h=e("babel-runtime/helpers/inherits"),y=r(h),v=e("../sandbox/SandboxRegistry"),g=r(v),m=e("../bus/MiniBus"),_=r(m),b=(n.SandboxType={APP:"app",NORMAL:"normal"},function(e){function t(){(0,c["default"])(this,t);var e=(0,p["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this));return e}return(0,y["default"])(t,e),(0,f["default"])(t,[{key:"deployComponent",value:function(e,t,n){var r=this;return new i["default"](function(o,i){var a={type:"create",from:g["default"].ExternalDeployAddress,to:g["default"].InternalDeployAddress,body:{url:t,sourceCode:e,config:n}};r.postMessage(a,function(e){200===e.body.code?o("deployed"):i(e.body.desc)})})}},{key:"removeComponent",value:function(e){var t=this;return new i["default"](function(n,r){var o={type:"delete",from:g["default"].ExternalDeployAddress,to:g["default"].InternalDeployAddress,body:{url:e}};t.postMessage(o,function(e){200===e.body.code?n("undeployed"):r(e.body.desc)})})}}]),t}(_["default"]));n["default"]=b},{"../bus/MiniBus":104,"../sandbox/SandboxRegistry":107,"babel-runtime/core-js/object/get-prototype-of":3,"babel-runtime/core-js/promise":5,"babel-runtime/helpers/classCallCheck":8,"babel-runtime/helpers/createClass":9,"babel-runtime/helpers/inherits":10,"babel-runtime/helpers/possibleConstructorReturn":11}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=r(o),a=e("babel-runtime/helpers/createClass"),s=r(a),u=function(){function e(t){(0,i["default"])(this,e);var n=this;n._bus=t,n._components={},t.addListener(e.InternalDeployAddress,function(e){switch(e.type){case"create":n._onDeploy(e);break;case"delete":n._onRemove(e)}})}return(0,s["default"])(e,[{key:"_responseMsg",value:function(t,n,r){var o={id:t.id,type:"response",from:e.InternalDeployAddress,to:e.ExternalDeployAddress},i={};return n&&(i.code=n),r&&(i.desc=r),o.body=i,o}},{key:"_onDeploy",value:function(e){var t=this,n=e.body.config,r=e.body.url,o=e.body.sourceCode,i=void 0,a=void 0;if(t._components.hasOwnProperty(r))i=500,a="Instance "+r+" already exist!";else try{t._components[r]=t._create(r,o,n),i=200}catch(e){i=500,a=e}var s=t._responseMsg(e,i,a);t._bus.postMessage(s)}},{key:"_onRemove",value:function(e){var t=this,n=e.body.url,r=void 0,o=void 0;t._components.hasOwnProperty(n)?(delete t._components[n],t._bus.removeAllListenersOf(n),r=200):(r=500,o="Instance "+n+" doesn't exist!");var i=t._responseMsg(e,r,o);t._bus.postMessage(i)}},{key:"_create",value:function(e,t,n){}},{key:"components",get:function(){return this._components}}]),e}();u.ExternalDeployAddress="hyperty-runtime://sandbox/external",u.InternalDeployAddress="hyperty-runtime://sandbox/internal",n["default"]=u,t.exports=n["default"]},{"babel-runtime/helpers/classCallCheck":8,"babel-runtime/helpers/createClass":9}]},{},[105])(105)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,n,r){!function(t,o){"object"==typeof r&&"object"==typeof n?n.exports=o():"function"==typeof e&&e.amd?e("PersistenceManager",[],o):"object"==typeof r?r.PersistenceManager=o():(t[""]=t[""]||{},t[""].PersistenceManager=o())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=161)}({0:function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},1:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},10:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(33),i=r(o);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),
(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},11:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},129:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(39),i=r(o),a=n(9),s=r(a),u=n(10),c=r(u),l=function(){function e(t){if((0,s["default"])(this,e),!t)throw Error("The Persistence Manager needs the localStorage");var n=this;n.localStorage=t}return(0,c["default"])(e,[{key:"set",value:function(e,t,n){var r=this;r.localStorage.setItem(e,(0,i["default"])({version:t,value:n}))}},{key:"get",value:function(e){var t=this;try{return JSON.parse(t.localStorage.getItem(e)).value}catch(n){}}},{key:"getVersion",value:function(e){var t=this;try{return JSON.parse(t.localStorage.getItem(e)).version}catch(n){}}},{key:"delete",value:function(e){var t=this;t.localStorage.removeItem(e)}}]),e}();t["default"]=l,e.exports=t["default"]},14:function(e,t,n){var r=n(19);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},15:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},161:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(129),i=r(o);t["default"]=i["default"],e.exports=t["default"]},17:function(e,t,n){var r=n(6),o=n(1).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},19:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},2:function(e,t,n){e.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},21:function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},25:function(e,t,n){e.exports=!n(2)&&!n(11)(function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a})},33:function(e,t,n){e.exports={"default":n(36),__esModule:!0}},36:function(e,t,n){n(38);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},38:function(e,t,n){var r=n(8);r(r.S+r.F*!n(2),"Object",{defineProperty:n(4).f})},39:function(e,t,n){e.exports={"default":n(53),__esModule:!0}},4:function(e,t,n){var r=n(5),o=n(25),i=n(21),a=Object.defineProperty;t.f=n(2)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},5:function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},53:function(e,t,n){var r=n(0),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},6:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},7:function(e,t,n){var r=n(4),o=n(15);e.exports=n(2)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},8:function(e,t,n){var r=n(1),o=n(0),i=n(14),a=n(7),s="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,v=e&u.B,g=e&u.W,m=p?o:o[t]||(o[t]={}),_=m[s],b=p?r:h?r[t]:(r[t]||{})[s];p&&(n=t);for(c in n)l=!d&&b&&void 0!==b[c],l&&c in m||(f=l?b[c]:n[c],m[c]=p&&"function"!=typeof b[c]?n[c]:v&&l?i(f,r):g&&b[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&_&&!_[c]&&a(_,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},9:function(e,t,n){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}})})},{}],5:[function(t,n,r){!function(t,o){"object"==typeof r&&"object"==typeof n?n.exports=o():"function"==typeof e&&e.amd?e("RuntimeCatalogue",[],o):"object"==typeof r?r.RuntimeCatalogue=o():(t[""]=t[""]||{},t[""].RuntimeCatalogue=o())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=162)}([function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(30)("wks"),o=n(23),i=n(1).Symbol,a="function"==typeof i,s=e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))};s.store=r},function(e,t,n){var r=n(5),o=n(25),i=n(21),a=Object.defineProperty;t.f=n(2)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(4),o=n(15);e.exports=n(2)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(1),o=n(0),i=n(14),a=n(7),s="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,v=e&u.B,g=e&u.W,m=p?o:o[t]||(o[t]={}),_=m[s],b=p?r:h?r[t]:(r[t]||{})[s];p&&(n=t);for(c in n)l=!d&&b&&void 0!==b[c],l&&c in m||(f=l?b[c]:n[c],m[c]=p&&"function"!=typeof b[c]?n[c]:v&&l?i(f,r):g&&b[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&_&&!_[c]&&a(_,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(33),i=r(o);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(56),o=n(24);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(19);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports={}},function(e,t,n){var r=n(6),o=n(1).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(44),o=n(29);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(4).f,o=n(12),i=n(3)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){e.exports=!n(2)&&!n(11)(function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=!0},function(e,t,n){var r=n(30)("keys"),o=n(23);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(1),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){e.exports={"default":n(79),__esModule:!0}},function(e,t,n){var r=n(24);e.exports=function(e){return Object(r(e))}},function(e,t,n){e.exports={"default":n(36),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(75),i=r(o),a=n(74),s=r(a),u=n(59),c=r(u);t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,s["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(59),i=r(o);t["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&"function"!=typeof t?e:t}},function(e,t,n){n(38);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(5),o=n(64),i=n(29),a=n(27)("IE_PROTO"),s=function(){},u="prototype",c=function(){var e,t=n(17)("iframe"),r=i.length,o="<",a=">";for(t.style.display="none",n(42).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+a+"document.F=Object"+o+"/script"+a),e.close(),c=e.F;r--;)delete c[u][i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(8);r(r.S+r.F*!n(2),"Object",{defineProperty:n(4).f})},function(e,t,n){e.exports={"default":n(53),__esModule:!0}},function(e,t,n){"use strict";var r=n(26),o=n(8),i=n(46),a=n(7),s=n(12),u=n(16),c=n(62),l=n(22),f=n(43),d=n(3)("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",v="values",g=function(){return this};e.exports=function(e,t,n,m,_,b,w){c(n,t,m);var k,x,j,O=function(e){if(!p&&e in M)return M[e];switch(e){case y:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},P=t+" Iterator",E=_==v,S=!1,M=e.prototype,C=M[d]||M[h]||_&&M[_],T=C||O(_),R=_?E?O("entries"):T:void 0,A="Array"==t?M.entries||C:C;if(A&&(j=f(A.call(new e)),j!==Object.prototype&&(l(j,P,!0),r||s(j,d)||a(j,d,g))),E&&C&&C.name!==v&&(S=!0,T=function(){return C.call(this)}),r&&!w||!p&&!S&&M[d]||a(M,d,T),u[t]=T,u[P]=g,_)if(k={values:E?T:O(v),keys:b?T:O(y),entries:R},w)for(x in k)x in M||i(M,x,k[x]);else o(o.P+o.F*(p||S),t,k);return k}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){e.exports=n(1).document&&document.documentElement},function(e,t,n){var r=n(12),o=n(32),i=n(27)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(12),o=n(13),i=n(61)(!1),a=n(27)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(8),o=n(0),i=n(11);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports=n(7)},function(e,t,n){var r=n(28),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(1),o=n(0),i=n(26),a=n(49),s=n(4).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){t.f=n(3)},function(e,t,n){"use strict";var r=n(66)(!0);n(40)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){n(69);for(var r=n(1),o=n(7),i=n(16),a=n(3)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&o(f,a,c),i[c]=i.Array}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DataObjectSourceLanguage=t.CatalogueObjectType=void 0;var o=n(31),i=r(o),a=n(9),s=r(a),u=n(10),c=r(u),l=n(35),f=r(l),d=n(34),p=r(d),h=n(108),y=r(h),v=function(e){function t(e,n,r,o,a,u,c){(0,s["default"])(this,t);var l=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this));return l._guid=e,l._type=n,l._version=r,l._objectName=o,l._description=a,l._language=u,l._sourcePackageURL=c,l._signature=null,l._sourcePackage=null,l}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"guid",get:function(){return this._guid},set:function(e){e&&(this._guid=e)}},{key:"type",get:function(){return this._type},set:function(e){e&&(this._type=e)}},{key:"version",get:function(){return this._version},set:function(e){e&&(this._version=e)}},{key:"objectName",get:function(){return this._objectName},set:function(e){e&&(this._objectName=e)}},{key:"description",get:function(){return this._description},set:function(e){e&&(this._description=e)}},{key:"language",get:function(){return this._language},set:function(e){e&&(this._language=e)}},{key:"signature",get:function(){return this._signature},set:function(e){e&&(this._signature=e)}},{key:"sourcePackage",get:function(){return this._sourcePackage},set:function(e){e&&(this._sourcePackage=e)}},{key:"sourcePackageURL",get:function(){return this._sourcePackageURL},set:function(e){e&&(this._sourcePackageURL=e)}}]),t}(y["default"]);t.CatalogueObjectType={HYPERTY:"hyperty",PROTOSTUB:"protostub",HYPERTY_RUNTIME:"hyperty_runtime",HYPERTY_INTERCEPTOR:"hyperty_inspector",HYPERTY_DATA_OBJECT:"hyperty_data_object"},t.DataObjectSourceLanguage={JAVASCRIPT_ECMA6:"javascript_ecma6",JAVASCRIPT_ECMA5:"javascript_ecma5",JSON_SCHEMA_V4:"json_schema_v4",PYTHON:"python",TYPESCRIPT:"typescript"};t["default"]=v},function(e,t,n){var r=n(0),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t){},function(e,t,n){var r=n(20),o=n(3)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(20);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(41),o=n(15),i=n(13),a=n(21),s=n(12),u=n(25),c=Object.getOwnPropertyDescriptor;t.f=n(2)?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(77),i=r(o),a=n(76),s=r(a),u="function"==typeof s["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":typeof e};t["default"]="function"==typeof s["default"]&&"symbol"===u(i["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(13),o=n(47),i=n(68);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=o(u.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){"use strict";var r=n(37),o=n(15),i=n(22),a={};n(7)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(4),o=n(5),i=n(18);e.exports=n(2)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(44),o=n(29).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(28),o=n(24);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},function(e,t,n){var r,o,i,a=n(14),s=n(88),u=n(42),c=n(17),l=n(1),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,y=0,v={},g="onreadystatechange",m=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){m.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},p=function(e){delete v[e]},"process"==n(20)(f)?r=function(e){f.nextTick(a(m,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=_,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):r=g in c("script")?function(e){u.appendChild(c("script"))[g]=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,n){var r=n(28),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){"use strict";var r=n(60),o=n(63),i=n(16),a=n(13);e.exports=n(40)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},,function(e,t,n){e.exports={"default":n(82),__esModule:!0}},function(e,t,n){var r=n(23)("meta"),o=n(6),i=n(12),a=n(4).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(11)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return c&&h.NEED&&u(e)&&!i(e,r)&&l(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(e,t,n){var r=n(55),o=n(3)("iterator"),i=n(16);e.exports=n(0).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){e.exports={"default":n(78),__esModule:!0}},function(e,t,n){e.exports={"default":n(81),__esModule:!0}},function(e,t,n){e.exports={"default":n(83),__esModule:!0}},function(e,t,n){e.exports={"default":n(84),__esModule:!0}},function(e,t,n){n(100);var r=n(0).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){n(101),e.exports=n(0).Object.getPrototypeOf},,function(e,t,n){n(103),e.exports=n(0).Object.setPrototypeOf},function(e,t,n){n(54),n(50),n(51),n(104),e.exports=n(0).Promise},function(e,t,n){n(105),n(54),n(106),n(107),e.exports=n(0).Symbol},function(e,t,n){n(50),n(51),e.exports=n(49).f("iterator")},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(18),o=n(58),i=n(41);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(14),o=n(91),i=n(89),a=n(5),s=n(47),u=n(73),c={},l={},t=e.exports=function(e,t,n,f,d){var p,h,y,v,g=d?function(){return e}:u(e),m=r(n,f,t?2:1),_=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(p=s(e.length);p>_;_++)if(v=t?m(a(h=e[_])[0],h[1]):m(e[_]),v===c||v===l)return v}else for(y=g.call(e);!(h=y.next()).done;)if(v=o(y,m,h.value,t),v===c||v===l)return v};t.BREAK=c,t.RETURN=l},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(16),o=n(3)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){var r=n(20);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(5);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(i){var a=e["return"];throw void 0!==a&&r(a.call(e)),i}}},function(e,t,n){var r=n(3)("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(s){}return n}},function(e,t,n){var r=n(18),o=n(13);e.exports=function(e,t){for(var n,i=o(e),a=r(i),s=a.length,u=0;s>u;)if(i[n=a[u++]]===t)return n}},function(e,t,n){var r=n(1),o=n(67).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(20)(a);e.exports=function(){var e,t,n,c=function(){var r,o;for(u&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(i){throw e?n():t=void 0,i}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(i){var l=!0,f=document.createTextNode("");new i(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){o.call(r,c)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var r=n(13),o=n(65).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(r(e))}},function(e,t,n){var r=n(7);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},function(e,t,n){var r=n(6),o=n(5),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(14)(Function.call,n(57).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){"use strict";var r=n(1),o=n(0),i=n(4),a=n(2),s=n(3)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(5),o=n(19),i=n(3)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r=n(8);r(r.S,"Object",{create:n(37)})},function(e,t,n){var r=n(32),o=n(43);n(45)("getPrototypeOf",function(){return function(e){return o(r(e))}})},,function(e,t,n){var r=n(8);r(r.S,"Object",{setPrototypeOf:n(97).set})},function(e,t,n){"use strict";var r,o,i,a=n(26),s=n(1),u=n(14),c=n(55),l=n(8),f=n(6),d=n(19),p=n(85),h=n(87),y=n(99),v=n(67).set,g=n(94)(),m="Promise",_=s.TypeError,b=s.process,w=s[m],b=s.process,k="process"==c(b),x=function(){},j=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(x,x)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(r){}}(),O=function(e,t){return e===t||e===w&&t===i},P=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},E=function(e){return O(w,e)?new S(e):new o(e)},S=o=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw _("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},M=function(e){try{e()}catch(t){return{error:t}}},C=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a=o?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(o||(2==e._h&&A(e),e._h=1),a===!0?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(_("Promise-chain cycle")):(i=P(n))?i.call(n,s,u):s(n)):u(r)}catch(l){u(l)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){v.call(s,function(){var t,n,r,o=e._v;if(R(e)&&(t=M(function(){k?b.emit("unhandledRejection",o,e):(n=s.onunhandledrejection)?n({promise:e,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=k||R(e)?2:1),e._a=void 0,t)throw t.error})},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!R(t.promise))return!1;return!0},A=function(e){v.call(s,function(){var t;k?b.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},I=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw _("Promise can't be resolved itself");(t=P(e))?g(function(){var r={_w:n,_d:!1};try{t.call(e,u(N,r,1),u(I,r,1))}catch(o){I.call(r,o)}}):(n._v=e,n._s=1,C(n,!1))}catch(r){I.call({_w:n,_d:!1},r)}}};j||(w=function(e){p(this,w,m,"_h"),d(e),r.call(this);try{e(u(N,this,1),u(I,this,1))}catch(t){I.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(96)(w.prototype,{then:function(e,t){var n=E(y(this,w));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),S=function(){var e=new r;this.promise=e,this.resolve=u(N,e,1),this.reject=u(I,e,1)}),l(l.G+l.W+l.F*!j,{Promise:w}),n(22)(w,m),n(98)(m),i=n(0)[m],l(l.S+l.F*!j,m,{reject:function(e){var t=E(this),n=t.reject;return n(e),t.promise}}),l(l.S+l.F*(a||!j),m,{resolve:function(e){if(e instanceof w&&O(e.constructor,this))return e;var t=E(this),n=t.resolve;return n(e),t.promise}}),l(l.S+l.F*!(j&&n(92)(function(e){w.all(e)["catch"](x)})),m,{all:function(e){var t=this,n=E(t),r=n.resolve,o=n.reject,i=M(function(){var n=[],i=0,a=1;h(e,!1,function(e){var s=i++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i&&o(i.error),n.promise},race:function(e){var t=this,n=E(t),r=n.reject,o=M(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(e,t,n){"use strict";var r=n(1),o=n(12),i=n(2),a=n(8),s=n(46),u=n(72).KEY,c=n(11),l=n(30),f=n(22),d=n(23),p=n(3),h=n(49),y=n(48),v=n(93),g=n(86),m=n(90),_=n(5),b=n(13),w=n(21),k=n(15),x=n(37),j=n(95),O=n(57),P=n(4),E=n(18),S=O.f,M=P.f,C=j.f,T=r.Symbol,R=r.JSON,A=R&&R.stringify,I="prototype",N=p("_hidden"),D=p("toPrimitive"),U={}.propertyIsEnumerable,F=l("symbol-registry"),L=l("symbols"),$=l("op-symbols"),z=Object[I],B="function"==typeof T,q=r.QObject,H=!q||!q[I]||!q[I].findChild,K=i&&c(function(){return 7!=x(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=S(z,t);r&&delete z[t],M(e,t,n),r&&e!==z&&M(z,t,r)}:M,G=function(e){var t=L[e]=x(T[I]);return t._k=e,t},Q=B&&"symbol"==typeof T.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof T},W=function(e,t,n){return e===z&&W($,t,n),_(e),t=w(t,!0),_(n),o(L,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=x(n,{enumerable:k(0,!1)})):(o(e,N)||M(e,N,k(1,{})),e[N][t]=!0),K(e,t,n)):M(e,t,n)},Y=function(e,t){_(e);for(var n,r=g(t=b(t)),o=0,i=r.length;i>o;)W(e,n=r[o++],t[n]);return e},V=function(e,t){return void 0===t?x(e):Y(x(e),t)},J=function(e){var t=U.call(this,e=w(e,!0));return!(this===z&&o(L,e)&&!o($,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,N)&&this[N][e])||t)},X=function(e,t){if(e=b(e),t=w(t,!0),e!==z||!o(L,t)||o($,t)){var n=S(e,t);return!n||!o(L,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=C(b(e)),r=[],i=0;n.length>i;)o(L,t=n[i++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===z,r=C(n?$:b(e)),i=[],a=0;r.length>a;)!o(L,t=r[a++])||n&&!o(z,t)||i.push(L[t]);return i};B||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call($,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),K(this,e,k(1,n))};return i&&H&&K(z,e,{configurable:!0,set:t}),G(e)},s(T[I],"toString",function(){return this._k}),O.f=X,P.f=W,n(65).f=j.f=Z,n(41).f=J,n(58).f=ee,i&&!n(26)&&s(z,"propertyIsEnumerable",J,!0),h.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!B,{Symbol:T});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var te=E(p.store),ne=0;te.length>ne;)y(te[ne++]);a(a.S+a.F*!B,"Symbol",{"for":function(e){return o(F,e+="")?F[e]:F[e]=T(e)},keyFor:function(e){if(Q(e))return v(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!B,"Object",{create:V,defineProperty:W,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),R&&a(a.S+a.F*(!B||c(function(){var e=T();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Q(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&m(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Q(t))return t}),r[1]=t,A.apply(R,r)}}}),T[I][D]||n(7)(T[I],D,T[I].valueOf),f(T,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){n(48)("asyncIterator")},function(e,t,n){n(48)("observable")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e
}}Object.defineProperty(t,"__esModule",{value:!0}),t.RethinkObject=void 0;var o=n(39),i=r(o),a=n(9),s=r(a),u=n(10),c=r(u),l=n(110),f=r(l),d=t.RethinkObject=function(){function e(){(0,s["default"])(this,e)}return(0,c["default"])(e,[{key:"validate",value:function(e){f["default"].addSchema(e.id,e);var t=f["default"].validateMultiple(JSON.parse((0,i["default"])(this)),e);return t.errors.forEach(function(e){delete e.stack}),(!t.valid||t.missing.length>0)&&(console.warn("Object validation "+(t.valid?"succeeded, but schema contained references:":"failed:"),(0,i["default"])(t,null,2)),console.log("Object:",(0,i["default"])(this,null,2))),t.valid}}]),e}();t["default"]=d},,function(e,t,n){var r,o,i;!function(n,a){o=[],r=a,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(this,function(){function e(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function t(t){var n="";d[t.charAt(0)]&&(n=t.charAt(0),t=t.substring(1));var r="",o="",i=!0,a=!1,s=!1;"+"===n?i=!1:"."===n?(o=".",r="."):"/"===n?(o="/",r="/"):"#"===n?(o="#",i=!1):";"===n?(o=";",r=";",a=!0,s=!0):"?"===n?(o="?",r="&",a=!0):"&"===n&&(o="&",r="&",a=!0);for(var u=[],c=t.split(","),l=[],f={},h=0;h<c.length;h++){var y=c[h],v=null;if(y.indexOf(":")!==-1){var g=y.split(":");y=g[0],v=parseInt(g[1],10)}for(var m={};p[y.charAt(y.length-1)];)m[y.charAt(y.length-1)]=!0,y=y.substring(0,y.length-1);var _={truncate:v,name:y,suffices:m};l.push(_),f[y]=_,u.push(y)}var b=function(t){for(var n="",u=0,c=0;c<l.length;c++){var f=l[c],d=t(f.name);if(null===d||void 0===d||Array.isArray(d)&&0===d.length||"object"==typeof d&&0===Object.keys(d).length)u++;else if(n+=c===u?o:r||",",Array.isArray(d)){a&&(n+=f.name+"=");for(var p=0;p<d.length;p++)p>0&&(n+=f.suffices["*"]?r||",":",",f.suffices["*"]&&a&&(n+=f.name+"=")),n+=i?encodeURIComponent(d[p]).replace(/!/g,"%21"):e(d[p])}else if("object"==typeof d){a&&!f.suffices["*"]&&(n+=f.name+"=");var h=!0;for(var y in d)h||(n+=f.suffices["*"]?r||",":","),h=!1,n+=i?encodeURIComponent(y).replace(/!/g,"%21"):e(y),n+=f.suffices["*"]?"=":",",n+=i?encodeURIComponent(d[y]).replace(/!/g,"%21"):e(d[y])}else a&&(n+=f.name,s&&""===d||(n+="=")),null!=f.truncate&&(d=d.substring(0,f.truncate)),n+=i?encodeURIComponent(d).replace(/!/g,"%21"):e(d)}return n};return b.varNames=u,{prefix:o,substitution:b}}function n(e){if(!(this instanceof n))return new n(e);for(var r=e.split("{"),o=[r.shift()],i=[],a=[],s=[];r.length>0;){var u=r.shift(),c=u.split("}")[0],l=u.substring(c.length+1),f=t(c);a.push(f.substitution),i.push(f.prefix),o.push(l),s=s.concat(f.substitution.varNames)}this.fill=function(e){for(var t=o[0],n=0;n<a.length;n++){var r=a[n];t+=r(e),t+=o[n+1]}return t},this.varNames=s,this.template=e}function r(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else{var o;for(o in e)if(void 0===t[o]&&void 0!==e[o])return!1;for(o in t)if(void 0===e[o]&&void 0!==t[o])return!1;for(o in e)if(!r(e[o],t[o]))return!1}return!0}return!1}function o(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function i(e,t){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return t=o(t||""),e=o(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+n(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function a(e){return e.split("#")[0]}function s(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=i(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)s(e[n],t);else{"string"==typeof e.$ref&&(e.$ref=i(t,e.$ref));for(var r in e)"enum"!==r&&s(e[r],t)}}function u(e){e=e||"en";var t=w[e];return function(e){var n=t[e.code]||b[e.code];if("string"!=typeof n)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var r=e.params;return n.replace(/\{([^{}]*)\}/g,function(e,t){var n=r[t];return"string"==typeof n||"number"==typeof n?n:e})}}function c(e,t,n,r,o){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+r);this.message="",this.params=t,this.code=e,this.dataPath=n||"",this.schemaPath=r||"",this.subErrors=o||null;var i=new Error(this.message);if(this.stack=i.stack||i.stacktrace,!this.stack)try{throw i}catch(i){this.stack=i.stack||i.stacktrace}}function l(e,t){if(t.substring(0,e.length)===e){var n=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===n.charAt(0)||"?"===n.charAt(0))return!0}return!1}function f(e){var t,n,r=new h,o={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){r.addFormat.apply(r,arguments)},language:function(e){return e?(w[e]||(e=e.split("-")[0]),!!w[e]&&(t=e,e)):t},addLanguage:function(e,t){var n;for(n in g)t[n]&&!t[g[n]]&&(t[g[n]]=t[n]);var r=e.split("-")[0];if(w[r]){w[e]=Object.create(w[r]);for(n in t)"undefined"==typeof w[r][n]&&(w[r][n]=t[n]),w[e][n]=t[n]}else w[e]=t,w[r]=t;return this},freshApi:function(e){var t=f();return e&&t.language(e),t},validate:function(e,o,i,a){var s=u(t),c=n?function(e,t,r){return n(e,t,r)||s(e,t,r)}:s,l=new h(r,(!1),c,i,a);"string"==typeof o&&(o={$ref:o}),l.addSchema("",o);var f=l.validateAll(e,o,null,null,"");return!f&&a&&(f=l.banUnknownProperties(e,o)),this.error=f,this.missing=l.missing,this.valid=null===f,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,o,i,a){var s=u(t),c=n?function(e,t,r){return n(e,t,r)||s(e,t,r)}:s,l=new h(r,(!0),c,i,a);"string"==typeof o&&(o={$ref:o}),l.addSchema("",o),l.validateAll(e,o,null,null,""),a&&l.banUnknownProperties(e,o);var f={};return f.errors=l.errors,f.missing=l.missing,f.valid=0===f.errors.length,f},addSchema:function(){return r.addSchema.apply(r,arguments)},getSchema:function(){return r.getSchema.apply(r,arguments)},getSchemaMap:function(){return r.getSchemaMap.apply(r,arguments)},getSchemaUris:function(){return r.getSchemaUris.apply(r,arguments)},getMissingUris:function(){return r.getMissingUris.apply(r,arguments)},dropSchemas:function(){r.dropSchemas.apply(r,arguments)},defineKeyword:function(){r.defineKeyword.apply(r,arguments)},defineError:function(e,t,n){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||t<1e4)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof g[e])throw new Error("Error already defined: "+e+" as "+g[e]);if("undefined"!=typeof m[t])throw new Error("Error code already used: "+m[t]+" as "+t);g[e]=t,m[t]=e,b[e]=b[t]=n;for(var r in w){var o=w[r];o[e]&&(o[t]=o[t]||o[e])}},reset:function(){r.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:s,resolveUrl:i,getDocumentUri:a,errorCodes:g};return o.language(e||"en"),o}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var i=[];for(var a in o)e.call(o,a)&&i.push(a);if(t)for(var s=0;s<r;s++)e.call(o,n[s])&&i.push(n[s]);return i}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var o=r>=0?r:Math.max(n-Math.abs(r),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(n){return!0}});var d={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},p={"*":!0};n.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var h=function(e,t,n,r,o){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,r&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),o&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=n||u("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var i in e.definedKeywords)this.definedKeywords[i]=e.definedKeywords[i].slice(0)};h.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},h.prototype.createError=function(e,t,n,r,o,i,a){var s=new c(e,t,n,r,o);return s.message=this.errorReporter(s,i,a),s},h.prototype.returnError=function(e){return e},h.prototype.collectError=function(e){return e&&this.errors.push(e),null},h.prototype.prefixErrors=function(e,t,n){for(var r=e;r<this.errors.length;r++)this.errors[r]=this.errors[r].prefixWith(t,n);return this},h.prototype.banUnknownProperties=function(e,t){for(var n in this.unknownPropertyPaths){var r=this.createError(g.UNKNOWN_PROPERTY,{path:n},n,"",null,e,t),o=this.handleError(r);if(o)return o}return null},h.prototype.addFormat=function(e,t){if("object"==typeof e){for(var n in e)this.addFormat(n,e[n]);return this}this.formatValidators[e]=t},h.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(g.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},h.prototype.getSchema=function(e,t){var n;if(void 0!==this.schemas[e])return n=this.schemas[e],this.resolveRefs(n,t);var r=e,o="";if(e.indexOf("#")!==-1&&(o=e.substring(e.indexOf("#")+1),r=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[r]){n=this.schemas[r];var i=decodeURIComponent(o);if(""===i)return this.resolveRefs(n,t);if("/"!==i.charAt(0))return;for(var a=i.split("/").slice(1),s=0;s<a.length;s++){var u=a[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===n[u]){n=void 0;break}n=n[u]}if(void 0!==n)return this.resolveRefs(n,t)}void 0===this.missing[r]&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},h.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.searchSchemas(e[n],t);else if(e&&"object"==typeof e){"string"==typeof e.id&&l(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){var o=a(e[r]);o&&void 0===this.schemas[o]&&void 0===this.missingMap[o]&&(this.missingMap[o]=o)}}},h.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}e===a(e)+"#"&&(e=a(e)),this.schemas[e]=t,delete this.missingMap[e],s(t,e),this.searchSchemas(t,e)},h.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},h.prototype.getSchemaUris=function(e){var t=[];for(var n in this.schemas)e&&!e.test(n)||t.push(n);return t},h.prototype.getMissingUris=function(e){var t=[];for(var n in this.missingMap)e&&!e.test(n)||t.push(n);return t},h.prototype.dropSchemas=function(){this.schemas={},this.reset()},h.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},h.prototype.validateAll=function(e,t,n,r,o){var i;if(t=this.resolveRefs(t),!t)return null;if(t instanceof c)return this.errors.push(t),t;var a,s=this.errors.length,u=null,l=null;if(this.checkRecursive&&e&&"object"==typeof e){if(i=!this.scanned.length,e[this.validatedSchemasKey]){var f=e[this.validatedSchemasKey].indexOf(t);if(f!==-1)return this.errors=this.errors.concat(e[this.validationErrorsKey][f]),null}if(Object.isFrozen(e)&&(a=this.scannedFrozen.indexOf(e),a!==-1)){var d=this.scannedFrozenSchemas[a].indexOf(t);if(d!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[a][d]),null}if(this.scanned.push(e),Object.isFrozen(e))a===-1&&(a=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),u=this.scannedFrozenSchemas[a].length,this.scannedFrozenSchemas[a][u]=t,this.scannedFrozenValidationErrors[a][u]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(p){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}l=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][l]=t,e[this.validationErrorsKey][l]=[]}}var h=this.errors.length,y=this.validateBasic(e,t,o)||this.validateNumeric(e,t,o)||this.validateString(e,t,o)||this.validateArray(e,t,o)||this.validateObject(e,t,o)||this.validateCombinations(e,t,o)||this.validateHypermedia(e,t,o)||this.validateFormat(e,t,o)||this.validateDefinedKeywords(e,t,o)||null;if(i){for(;this.scanned.length;){var v=this.scanned.pop();delete v[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(y||h!==this.errors.length)for(;n&&n.length||r&&r.length;){var g=n&&n.length?""+n.pop():null,m=r&&r.length?""+r.pop():null;y&&(y=y.prefixWith(g,m)),this.prefixErrors(h,g,m)}return null!==u?this.scannedFrozenValidationErrors[a][u]=this.errors.slice(s):null!==l&&(e[this.validationErrorsKey][l]=this.errors.slice(s)),this.handleError(y)},h.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var n=this.formatValidators[t.format].call(null,e,t);return"string"==typeof n||"number"==typeof n?this.createError(g.FORMAT_CUSTOM,{message:n},"","/format",null,e,t):n&&"object"==typeof n?this.createError(g.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||"",n.schemaPath||"/format",null,e,t):null},h.prototype.validateDefinedKeywords=function(e,t,n){for(var r in this.definedKeywords)if("undefined"!=typeof t[r])for(var o=this.definedKeywords[r],i=0;i<o.length;i++){var a=o[i],s=a(e,t[r],t,n);if("string"==typeof s||"number"==typeof s)return this.createError(g.KEYWORD_CUSTOM,{key:r,message:s},"","",null,e,t).prefixWith(null,r);if(s&&"object"==typeof s){var u=s.code;if("string"==typeof u){if(!g[u])throw new Error("Undefined error code (use defineError): "+u);u=g[u]}else"number"!=typeof u&&(u=g.KEYWORD_CUSTOM);var c="object"==typeof s.message?s.message:{key:r,message:s.message||"?"},l=s.schemaPath||"/"+r.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(u,c,s.dataPath||null,l,null,e,t)}}return null},h.prototype.validateBasic=function(e,t,n){var r;return(r=this.validateType(e,t,n))?r.prefixWith(null,"type"):(r=this.validateEnum(e,t,n))?r.prefixWith(null,"type"):null},h.prototype.validateType=function(e,t){if(void 0===t.type)return null;var n=typeof e;null===e?n="null":Array.isArray(e)&&(n="array");var r=t.type;Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var i=r[o];if(i===n||"integer"===i&&"number"===n&&e%1===0)return null}return this.createError(g.INVALID_TYPE,{type:n,expected:r.join("/")},"","",null,e,t)},h.prototype.validateEnum=function(e,t){if(void 0===t["enum"])return null;for(var n=0;n<t["enum"].length;n++){var o=t["enum"][n];if(r(e,o))return null}return this.createError(g.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},h.prototype.validateNumeric=function(e,t,n){return this.validateMultipleOf(e,t,n)||this.validateMinMax(e,t,n)||this.validateNaN(e,t,n)||null};var y=Math.pow(2,-51),v=1-y;h.prototype.validateMultipleOf=function(e,t){var n=t.multipleOf||t.divisibleBy;if(void 0===n)return null;if("number"==typeof e){var r=e/n%1;if(r>=y&&r<v)return this.createError(g.NUMBER_MULTIPLE_OF,{value:e,multipleOf:n},"","",null,e,t)}return null},h.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(g.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(g.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(g.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(g.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},h.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:isNaN(e)===!0||e===1/0||e===-(1/0)?this.createError(g.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},h.prototype.validateString=function(e,t,n){return this.validateStringLength(e,t,n)||this.validateStringPattern(e,t,n)||null},h.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(g.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(g.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},h.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var n;if(t.pattern instanceof RegExp)n=t.pattern;else{var r,o="",i=t.pattern.match(/^\/(.+)\/([img]*)$/);i?(r=i[1],o=i[2]):r=t.pattern,n=new RegExp(r,o)}return n.test(e)?null:this.createError(g.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},h.prototype.validateArray=function(e,t,n){return Array.isArray(e)?this.validateArrayLength(e,t,n)||this.validateArrayUniqueItems(e,t,n)||this.validateArrayItems(e,t,n)||null:null},h.prototype.validateArrayLength=function(e,t){var n;return void 0!==t.minItems&&e.length<t.minItems&&(n=this.createError(g.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(n))?n:void 0!==t.maxItems&&e.length>t.maxItems&&(n=this.createError(g.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(n))?n:null},h.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var n=0;n<e.length;n++)for(var o=n+1;o<e.length;o++)if(r(e[n],e[o])){var i=this.createError(g.ARRAY_UNIQUE,{match1:n,match2:o},"","/uniqueItems",null,e,t);if(this.handleError(i))return i}return null},h.prototype.validateArrayItems=function(e,t,n){if(void 0===t.items)return null;var r,o;if(Array.isArray(t.items)){for(o=0;o<e.length;o++)if(o<t.items.length){if(r=this.validateAll(e[o],t.items[o],[o],["items",o],n+"/"+o))return r}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(r=this.createError(g.ARRAY_ADDITIONAL_ITEMS,{},"/"+o,"/additionalItems",null,e,t),this.handleError(r)))return r}else if(r=this.validateAll(e[o],t.additionalItems,[o],["additionalItems"],n+"/"+o))return r}else for(o=0;o<e.length;o++)if(r=this.validateAll(e[o],t.items,[o],["items"],n+"/"+o))return r;return null},h.prototype.validateObject=function(e,t,n){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,n)||this.validateObjectRequiredProperties(e,t,n)||this.validateObjectProperties(e,t,n)||this.validateObjectDependencies(e,t,n)||null},h.prototype.validateObjectMinMaxProperties=function(e,t){var n,r=Object.keys(e);return void 0!==t.minProperties&&r.length<t.minProperties&&(n=this.createError(g.OBJECT_PROPERTIES_MINIMUM,{propertyCount:r.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(n))?n:void 0!==t.maxProperties&&r.length>t.maxProperties&&(n=this.createError(g.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:r.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(n))?n:null},h.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var n=0;n<t.required.length;n++){var r=t.required[n];if(void 0===e[r]){var o=this.createError(g.OBJECT_REQUIRED,{key:r},"","/required/"+n,null,e,t);if(this.handleError(o))return o}}return null},h.prototype.validateObjectProperties=function(e,t,n){var r;for(var o in e){var i=n+"/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[o]&&(a=!0,r=this.validateAll(e[o],t.properties[o],[o],["properties",o],i)))return r;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var u=new RegExp(s);if(u.test(o)&&(a=!0,r=this.validateAll(e[o],t.patternProperties[s],[o],["patternProperties",s],i)))return r}if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(r=this.createError(g.OBJECT_ADDITIONAL_PROPERTIES,{key:o},"","/additionalProperties",null,e,t).prefixWith(o,null),this.handleError(r)))return r}else if(r=this.validateAll(e[o],t.additionalProperties,[o],["additionalProperties"],i))return r}else this.trackUnknownProperties&&!this.knownPropertyPaths[i]&&(this.unknownPropertyPaths[i]=!0)}return null},h.prototype.validateObjectDependencies=function(e,t,n){var r;if(void 0!==t.dependencies)for(var o in t.dependencies)if(void 0!==e[o]){var i=t.dependencies[o];if("string"==typeof i){if(void 0===e[i]&&(r=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:o,missing:i},"","",null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(Array.isArray(i))for(var a=0;a<i.length;a++){var s=i[a];if(void 0===e[s]&&(r=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:o,missing:s},"","/"+a,null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(r=this.validateAll(e,i,[],["dependencies",o],n))return r}return null},h.prototype.validateCombinations=function(e,t,n){return this.validateAllOf(e,t,n)||this.validateAnyOf(e,t,n)||this.validateOneOf(e,t,n)||this.validateNot(e,t,n)||null},h.prototype.validateAllOf=function(e,t,n){if(void 0===t.allOf)return null;for(var r,o=0;o<t.allOf.length;o++){var i=t.allOf[o];if(r=this.validateAll(e,i,[],["allOf",o],n))return r}return null},h.prototype.validateAnyOf=function(e,t,n){if(void 0===t.anyOf)return null;var r,o,i=[],a=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var s=!0,u=0;u<t.anyOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.anyOf[u],l=this.errors.length,f=this.validateAll(e,c,[],["anyOf",u],n);if(null===f&&l===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete r[d];for(var p in this.unknownPropertyPaths)o[p]||(r[p]=!0);s=!1;continue}return null}f&&i.push(f.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=o),s?(i=i.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(g.ANY_OF_MISSING,{},"","/anyOf",i,e,t)):void 0},h.prototype.validateOneOf=function(e,t,n){if(void 0===t.oneOf)return null;var r,o,i=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var u=0;u<t.oneOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.oneOf[u],l=this.errors.length,f=this.validateAll(e,c,[],["oneOf",u],n);if(null===f&&l===this.errors.length){if(null!==i)return this.errors=this.errors.slice(0,s),this.createError(g.ONE_OF_MULTIPLE,{index1:i,index2:u},"","/oneOf",null,e,t);if(i=u,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete r[d];for(var p in this.unknownPropertyPaths)o[p]||(r[p]=!0)}}else f&&a.push(f)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=o),null===i?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(g.ONE_OF_MISSING,{},"","/oneOf",a,e,t)):(this.errors=this.errors.slice(0,s),null)},h.prototype.validateNot=function(e,t,n){if(void 0===t.not)return null;var r,o,i=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,o=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,n),s=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=o),null===a&&0===s.length?this.createError(g.NOT_PASSED,{},"","/not",null,e,t):null},h.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var o,i=0;i<t.links.length;i++){var a=t.links[i];if("describedby"===a.rel){for(var s=new n(a.href),u=!0,c=0;c<s.varNames.length;c++)if(!(s.varNames[c]in e)){u=!1;break}if(u){var l=s.fillFromObject(e),f={$ref:l};if(o=this.validateAll(e,f,[],["links",i],r))return o}}}};var g={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},m={};for(var _ in g)m[g[_]]=_;var b={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="ValidationError",c.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(e,t);return this};var w={},k=f();return k.addLanguage("en-gb",b),k.tv4=k,k})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HypertyResourceType=t.HypertyType=t.RuntimeHypertyCapabilityType=void 0;var o=n(31),i=r(o),a=n(9),s=r(a),u=n(10),c=r(u),l=n(35),f=r(l),d=n(34),p=r(d),h=n(52),y=r(h),v=function(e){function t(e,n,r,o,a,u,c,l,d){(0,s["default"])(this,t);var p=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,c));return p._configuration={},p._constraints={},p._policies={},p._messageSchema=null,p._hypertyType=l,p._dataObjects=d,p}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"hypertyType",get:function(){return this._hypertyType},set:function(e){e&&(this._hypertyType=e)}},{key:"dataObjects",get:function(){return this._dataObjects},set:function(e){e&&(this._dataObjects=e)}},{key:"configuration",get:function(){return this._configuration},set:function(e){e&&(this._configuration=e)}},{key:"constraints",get:function(){return this._constraints},set:function(e){e&&(this._constraints=e)}},{key:"messageSchema",get:function(){return this._messageSchema},set:function(e){e&&(this._messageSchema=e)}},{key:"policies",get:function(){return this._policies},set:function(e){e&&(this._policies=e)}}]),t}(y["default"]);t.RuntimeHypertyCapabilityType={},t.HypertyType={COMMUNICATOR:"communicator",IDENTITY:"identity",CONTEXT:"context"},t.HypertyResourceType={chat:"CHAT",audio:"Audio",video:"Video",av:"AV",screen:"SCREEN",file:"FILe",midi:"MIDI"};t["default"]=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),i=r(o),a=n(9),s=r(a),u=n(10),c=r(u),l=n(35),f=r(l),d=n(34),p=r(d),h=n(52),y=r(h),v=function(e){function t(e,n,r,o,a,u,c,l,d,p,h,y,v,g,m){(0,s["default"])(this,t);var _=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,c));return _._messageSchemas=l,d?_._configuration=d:_._configuration={},p?_._constraints=p:_._constraints={},_._hypertyType=h,y?_._dataObjects=y:_._dataObjects=[],_._interworking=v,_._idpProxy=g,_._mutualAuthentication=m,_}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"messageSchemas",get:function(){return this._messageSchemas},set:function(e){e&&(this._messageSchemas=e)}},{key:"constraints",get:function(){return this._constraints},set:function(e){e&&(this._constraints=e)}},{key:"configuration",get:function(){return this._configuration},set:function(e){e&&(this._configuration=e)}},{key:"hypertyType",get:function(){return this._hypertyType},set:function(e){this._hypertyType=e}},{key:"dataObjects",get:function(){return this._dataObjects;
},set:function(e){this._dataObjects=e}},{key:"interworking",get:function(){return this._interworking},set:function(e){this._interworking=e}},{key:"idpProxy",get:function(){return this._idpProxy},set:function(e){this._idpProxy=e}},{key:"mutualAuthentication",get:function(){return this._mutualAuthentication},set:function(e){this._mutualAuthentication=e}}]),t}(y["default"]);t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=r(o),a=n(10),s=r(a),u=function(){function e(t,n){(0,i["default"])(this,e),this._sourceCode=n,this._sourceCodeClassname=t,this._encoding=null,this._signature=null}return(0,s["default"])(e,[{key:"sourceCode",get:function(){return this._sourceCode},set:function(e){e&&(this._sourceCode=e)}},{key:"sourceCodeClassname",get:function(){return this._sourceCodeClassname},set:function(e){e&&(this._sourceCodeClassname=e)}},{key:"encoding",get:function(){return this._encoding},set:function(e){e&&(this._encoding=e)}},{key:"signature",get:function(){return this._signature},set:function(e){e&&(this._signature=e)}}]),e}();t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=r(o),a=n(10),s=r(a),u=n(52),c=r(u),l=n(113),f=r(l),d=n(111),p=r(d),h=n(112),y=r(h),v=n(117),g=r(v),m=n(116),_=r(m),b=n(115),w=function(){function e(){(0,i["default"])(this,e)}return(0,s["default"])(e,[{key:"createCatalogueDataObject",value:function(e,t,n,r,o,i,a){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a)throw new Error("Invalid parameters!");return new c["default"](e,t,n,r,o,i,a)}},{key:"createHypertyDescriptorObject",value:function(e,t,n,r,o,i,a,s){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a||"undefined"==typeof s)throw new Error("Invalid parameters!");return new p["default"](e,u.CatalogueObjectType.HYPERTY,t,n,r,o,i,a,s)}},{key:"createProtoStubDescriptorObject",value:function(e,t,n,r,o,i,a,s,c,l,f,d,p,h){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a||"undefined"==typeof s||"undefined"==typeof c)throw new Error("Invalid parameters!");return new y["default"](e,u.CatalogueObjectType.PROTOSTUB,t,n,r,o,i,a,s,c,l,f,d,p,h)}},{key:"createHypertyRuntimeDescriptorObject",value:function(e,t,n,r,o,i,a,s,c,l,f){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a)throw new Error("Invalid parameters!");return new g["default"](e,u.CatalogueObjectType.HYPERTY_RUNTIME,t,n,r,o,i,a,s,c,l,f)}},{key:"createHypertyInterceptorDescriptorObject",value:function(e,t,n,r,o,i,a,s){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i)throw new Error("Invalid parameters!");return new _["default"](e,u.CatalogueObjectType.HYPERTY_INTERCEPTOR,t,n,r,o,i,a,s)}},{key:"createDataObjectSchema",value:function(e,t,n,r,o,i){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i)throw new Error("Invalid parameters!");return new b.DataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i)}},{key:"createMessageDataObjectSchema",value:function(e,t,n,r,o,i){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i)throw new Error("Invalid parameters!");return new b.DataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i)}},{key:"createHypertyDataObjectSchema",value:function(e,t,n,r,o,i,a,s){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof r||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof s||"undefined"==typeof a)throw new Error("Invalid parameters!");return s===b.DataUrlScheme.COMM?new b.CommunicationDataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i,s,a):s===b.DataUrlScheme.CONNECTION?new b.ConnectionDataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i,s,a):s===b.DataUrlScheme.CTXT?new b.ContextDataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i,s,a):s===b.DataUrlScheme.IDENTITY?new b.IdentityDataObjectSchema(e,u.CatalogueObjectType.HYPERTY_DATA_OBJECT,t,n,r,o,i,s,a):void 0}},{key:"createSourcePackage",value:function(e,t){if("undefined"==typeof t||"undefined"==typeof e)throw new Error("Invalid parameters!");return new f["default"](e,t)}}]),e}();t["default"]=w,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DataUrlScheme=t.ContextDataObjectSchema=t.IdentityDataObjectSchema=t.ConnectionDataObjectSchema=t.CommunicationDataObjectSchema=t.HypertyDataObjectSchema=t.MessageDataObjectSchema=t.DataObjectSchema=void 0;var o=n(31),i=r(o),a=n(9),s=r(a),u=n(35),c=r(u),l=n(34),f=r(l),d=n(52),p=r(d),h=t.DataObjectSchema=function(e){function t(e,n,r,o,a,u,l){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,l))}return(0,f["default"])(t,e),t}(p["default"]),y=(t.MessageDataObjectSchema=function(e){function t(e,n,r,o,a,u,l){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,l))}return(0,f["default"])(t,e),t}(h),t.HypertyDataObjectSchema=function(e){function t(e,n,r,o,a,u,l,f,d){(0,s["default"])(this,t);var p=(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,l));return p._accessControlPolicy=f,p._scheme=d,p}return(0,f["default"])(t,e),t}(h));t.CommunicationDataObjectSchema=function(e){function t(e,n,r,o,a,u,l,f){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,l,f))}return(0,f["default"])(t,e),t}(y),t.ConnectionDataObjectSchema=function(e){function t(e,n,r,o,a,u,l,f){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,l,f))}return(0,f["default"])(t,e),t}(y),t.IdentityDataObjectSchema=function(e){function t(e,n,r,o,a,u,l,f){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,l,f))}return(0,f["default"])(t,e),t}(y),t.ContextDataObjectSchema=function(e){function t(e,n,r,o,a,u,l,f){return(0,s["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,l,f))}return(0,f["default"])(t,e),t}(y),t.DataUrlScheme={COMM:"COMM",CONNECTION:"CONNECTION",CTXT:"CTXT",IDENTITY:"IDENTITY"};t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),i=r(o),a=n(9),s=r(a),u=n(10),c=r(u),l=n(35),f=r(l),d=n(34),p=r(d),h=n(52),y=r(h),v=function(e){function t(e,n,r,o,a,u,c,l,d){(0,s["default"])(this,t);var p=(0,f["default"])(this,(t.__proto__||(0,i["default"])(t)).call(this,e,n,r,o,a,u,c));return p._configuration=l,p._policies=d,p}return(0,p["default"])(t,e),(0,c["default"])(t,[{key:"configuration",get:function(){return this._configuration},set:function(e){this._configuration=e}},{key:"policies",get:function(){return this._policies},set:function(e){this._policies=e}}]),t}(y["default"]);t["default"]=v,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeType=t.RuntimeProtocolCapability=t.RuntimeHypertyCapability=void 0;var o=n(39),i=r(o),a=n(31),s=r(a),u=n(9),c=r(u),l=n(10),f=r(l),d=n(35),p=r(d),h=n(34),y=r(h),v=n(52),g=r(v),m=function(e){function t(e,n,r,o,i,a,u,l,f,d,h,y){(0,c["default"])(this,t);var v=(0,p["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,n,r,o,i,a,u));return v._runtimeType=l,f?v._hypertyCapabilities=f:v._hypertyCapabilities=new _((!0),(!1),(!1),(!1),(!1)),d?v._protocolCapabilities=d:v._protocolCapabilities=new b((!0),(!1),(!0),(!1),(!1),(!1)),v._p2pHandlerStub=h,v._p2pRequesterStub=y,v}return(0,y["default"])(t,e),(0,f["default"])(t,[{key:"runtimeType",get:function(){return this._runtimeType},set:function(e){e&&(this._runtimeType=e)}},{key:"hypertyCapabilities",get:function(){return this._hypertyCapabilities},set:function(e){e&&(this._hypertyCapabilities=e)}},{key:"protocolCapabilities",get:function(){return this._hypertyCapabilities},set:function(e){e&&(this._protocolCapabilities=e)}},{key:"p2pHandlerStub",get:function(){return this._p2pHandlerStub},set:function(e){this._p2pHandlerStub=e}},{key:"p2pRequesterStub",get:function(){return this._p2pRequesterStub},set:function(e){this._p2pRequesterStub=e}}]),t}(g["default"]),_=t.RuntimeHypertyCapability=function(){function e(t,n,r,o,i){(0,c["default"])(this,e),this._isWebRTC=t,this._isMic=n,this._isCamera=r,this._isSensor=o,this._isORTC=i}return(0,f["default"])(e,[{key:"getCapabilitySet",value:function(){return(0,i["default"])(this)}},{key:"isMic",get:function(){return this._isMic}},{key:"isCamera",get:function(){return this._isCamera}},{key:"isSensor",get:function(){return this._isSensor}},{key:"isWebRTC",get:function(){return this._isWebRTC}},{key:"isORTCS",get:function(){return this._isORTC}}]),e}(),b=t.RuntimeProtocolCapability=function(){function e(t,n,r,o,i,a){(0,c["default"])(this,e),this._isHttp=t,this._isHttps=n,this._isWS=r,this._isWSS=o,this._isCoap=i,this._isDataChannel=a}return(0,f["default"])(e,[{key:"isHttp",value:function(){return this._isHttp}},{key:"isHttps",value:function(){return this._isHttps}},{key:"isWS",value:function(){return this._isWS}},{key:"isSensorSupported",value:function(){return this._isSensor}},{key:"isWSS",value:function(){return this._isWSS}},{key:"isCoap",value:function(){return this._isCoap}},{key:"isDataChannel",value:function(){return this._isDataChannel}},{key:"getCapabilitySet",value:function(){return(0,i["default"])(this)}}]),e}();t.RuntimeType={BROWSER:"browser",STANDALONE:"standalone",SERVER:"server",GATEWAY:"gateway"};t["default"]=m},,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(141),i=r(o),a=n(39),s=r(a),u=n(71),c=r(u),l=n(9),f=r(l),d=n(10),p=r(d),h=n(114),y=r(h),v=function(){function e(t){if((0,f["default"])(this,e),!t)throw Error("The catalogue needs the runtimeFactory");this._factory=new y["default"],this.httpRequest=t.createHttpRequest(),this.atob=t.atob?t.atob:atob,this.storageManager=t.storageManager()}return(0,p["default"])(e,[{key:"getDescriptor",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];console.log("getting descriptor from:",e),console.log("constraints:",o);var a=!1,u=!1,l=void 0;l=void 0!=o?c["default"].all([this.httpRequest.post(e+"/version",(0,s["default"])(o)),this.httpRequest.post(e+"/cguid",(0,s["default"])(o))]):c["default"].all([this.httpRequest.get(e+"/version"),this.httpRequest.get(e+"/cguid")]),l=l.then(function(t){var r=(0,i["default"])(t,2),u=r[0],c=r[1];return console.log("got version ("+u+") and cguid ("+c+") for descriptor "+e),n.storageManager.getVersion(c).then(function(t){if(t>=u)return console.log("storageManager contains saved version that is the same or newer than requested"),a=!0,n.storageManager.get(c);console.log("storageManager does not contain saved version");var r=void 0!=o?n.httpRequest.post(e,(0,s["default"])(o)):n.httpRequest.get(e);return r.then(function(e){if(e=JSON.parse(e),e.ERROR)throw new Error(e);return e})})})["catch"](function(t){var n="Unable to get descriptor for "+e+(void 0!=o?" with constraints "+o:"")+": "+t;throw console.error(n),new Error(n)});var f=l;return r&&(console.log("adding promise to attach sourcePackage"),f=l.then(function(e){return e.sourcePackage?(u=!0,e):(u=!1,n.attachRawSourcePackage(e,o))})),f=f.then(function(e){return(!a||a&&!u&&r)&&n.storageManager.set(e.cguid,e.version,e),t.apply(n,[e,o])})}},{key:"attachRawSourcePackage",value:function(e,t){var n=this;return console.log("attaching raw sourcePackage from:",e.sourcePackageURL),new c["default"](function(r,o){var i=void 0!=t?n.httpRequest.post(e.sourcePackageURL,(0,s["default"])(t)):n.httpRequest.get(e.sourcePackageURL);i.then(function(t){t=JSON.parse(t),e.sourcePackage=t,r(e)})["catch"](function(e){o(e)})})}},{key:"getHypertyDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];return this.getDescriptor(e,this.createHyperty,t,n)}},{key:"getStubDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];return this.getDescriptor(e,this.createStub,t,n)}},{key:"getRuntimeDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];return this.getDescriptor(e,this.createRuntimeDescriptor,t,n)}},{key:"getDataSchemaDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];return this.getDescriptor(e,this.createDataSchema,t,n)}},{key:"getIdpProxyDescriptor",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];return this.getDescriptor(e,this.createIdpProxy,t,n)}},{key:"createHyperty",value:function(e){var t=this._factory.createHypertyDescriptorObject(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.type||e.hypertyType,e.dataObjects);t.configuration=e.configuration,t.constraints=e.constraints,t.messageSchema=e.messageSchema,t.policies=e.policies,t.signature=e.signature;var n=e.sourcePackage;return n&&(t.sourcePackage=this.createSourcePackage(n)),t}},{key:"createStub",value:function(e){var t=this._factory.createProtoStubDescriptorObject(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.messageSchemas,e.configuration,e.constraints,e.hypertyType,e.dataObjects,e.interworking,e.idpProxy,e.mutualAuthentication);t.signature=e.signature;var n=e.sourcePackage;return n&&(t.sourcePackage=this.createSourcePackage(n)),t}},{key:"createRuntimeDescriptor",value:function(e){try{e.hypertyCapabilities=JSON.parse(e.hypertyCapabilities),e.protocolCapabilities=JSON.parse(e.protocolCapabilities)}catch(t){}var n=this._factory.createHypertyRuntimeDescriptorObject(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.type||e.runtimeType,e.hypertyCapabilities,e.protocolCapabilities,e.p2pHandlerStub,e.p2pRequesterStub);n.signature=e.signature;var r=e.sourcePackage;return r&&(n.sourcePackage=this.createSourcePackage(r)),n}},{key:"createDataSchema",value:function(e){var t=void 0;t=e.accessControlPolicy&&e.scheme?this._factory.createHypertyDataObjectSchema(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.accessControlPolicy,e.scheme):this._factory.createMessageDataObjectSchema(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL),t.signature=e.signature;var n=e.sourcePackage;if(n){t.sourcePackage=this.createSourcePackage(n);try{t.sourcePackage.sourceCode=JSON.parse(t.sourcePackage.sourceCode)}catch(r){console.log("DataSchema Source code is already parsed")}return t}return t}},{key:"createIdpProxy",value:function(e){var t=this._factory.createProtoStubDescriptorObject(e.cguid,e.version,e.objectName,e.description,e.language,e.sourcePackageURL,e.messageSchemas,e.configuration,e.constraints,e.hypertyType,e.dataObjects,e.interworking,e.idpProxy,e.mutualAuthentication);t.signature=e.signature;var n=e.sourcePackage;return n&&(n=this.createSourcePackage(n),t.sourcePackage=n),t}},{key:"createSourcePackage",value:function(e){"base64"===e.encoding&&(e.sourceCode=this.atob(e.sourceCode),e.encoding="utf-8");var t=this._factory.createSourcePackage(e.sourceCodeClassname,e.sourceCode);return e.encoding&&(t.encoding=e.encoding),e.signature&&(t.signature=e.signature),t}},{key:"getSourcePackageFromURL",value:function(e){var t=this;return console.log("getting sourcePackage from:",e),new c["default"](function(n,r){t.httpRequest.get(e).then(function(e){if(e.ERROR)r(e);else{e=JSON.parse(e);var o=t.createSourcePackage(e);n(o)}})["catch"](function(e){r(e)})})}},{key:"getSourceCodeFromDescriptor",value:function(e){var t=this;return new c["default"](function(n,r){e.sourcePackage?n(e.sourcePackage.sourceCode):t.storageManager.getVersion(e.sourcePackageURL+"/sourceCode").then(function(o){o>=e.version?(console.log("returning cached version from storageManager"),t.storageManager.get(e.sourcePackageURL+"/sourceCode").then(function(e){n(e)})["catch"](function(e){r(e)})):t.httpRequest.get(e.sourcePackageURL+"/sourceCode").then(function(o){o.ERROR?r(o):(t.storageManager.set(e.sourcePackageURL+"/sourceCode",e.version,o),n(o))})["catch"](function(e){r(e)})})["catch"](function(e){r(e)})})}},{key:"getTypeList",value:function(e,t){var n=this;return new c["default"](function(r,o){var i=void 0!=t?n.httpRequest.post(e,(0,s["default"])(t)):n.httpRequest.get(e);i.then(function(e){e=JSON.parse(e),r(e)})["catch"](function(e){o(e)})})}},{key:"deleteFromPM",value:function(e){return this.storageManager["delete"](e)}},{key:"runtimeURL",set:function(e){this._runtimeURL=e},get:function(){return this._runtimeURL}}]),e}();t["default"]=v,e.exports=t["default"]},,,,,,function(e,t,n){e.exports={"default":n(143),__esModule:!0}},function(e,t,n){e.exports={"default":n(144),__esModule:!0}},,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(137),i=r(o),a=n(136),s=r(a);t["default"]=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=(0,s["default"])(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,i["default"])(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},,function(e,t,n){n(51),n(50),e.exports=n(149)},function(e,t,n){n(51),n(50),e.exports=n(150)},,,,,function(e,t,n){var r=n(5),o=n(73);e.exports=n(0).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){var r=n(55),o=n(3)("iterator"),i=n(16);e.exports=n(0).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(r(t))}},,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeCatalogue=void 0;var o=n(130),i=r(o);t.RuntimeCatalogue=i["default"]}])})},{}],6:[function(t,n,r){!function(t,o){"object"==typeof r&&"object"==typeof n?n.exports=o():"function"==typeof e&&e.amd?e("StorageManager",[],o):"object"==typeof r?r.StorageManager=o():(t[""]=t[""]||{},t[""].StorageManager=o())}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=166)}({0:function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},1:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},10:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(33),i=r(o);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},11:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},14:function(e,t,n){var r=n(19);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},15:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},166:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i=r(o),a=n(10),s=r(a),u=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if((0,i["default"])(this,e),!t)throw Error("The Storage Manager needs the database instance");if(!n)throw Error("The Storage Manager needs the storage name");var o={};o[n]="key,version,value",t.version(r).stores(o),t.open().then(function(e){console.info("Found database name "+e.name+" with version no: "+e.verno)})["catch"](console.error),this.db=t,this.storageName=n}return(0,s["default"])(e,[{key:"_checkKey",value:function(e){return"string"!=typeof e?e.toString():e}},{key:"set",value:function(e,t,n){return console.info("[StorageManager] - set ",e),this.db[this.storageName].put({key:this._checkKey(e),version:t,value:n})}},{key:"get",value:function(e){return console.info("[StorageManager] - get ",e),this.db[this.storageName].where("key").equals(this._checkKey(e)).first().then(function(e){return e?e.value:e})["catch"](function(t){console.info("error getting the key ",e," with error: ",t)})}},{key:"getVersion",value:function(e){return console.info("[StorageManager] - getVersion for key ",e),this.db[this.storageName].where("key").equals(this._checkKey(e)).first().then(function(e){return e?e.version:e})["catch"](function(t){console.info("error getting the version for ",e," with error: ",t)})}},{key:"delete",value:function(e){return this.db[this.storageName].where("key").equals(this._checkKey(e))["delete"]()}}]),e}();t["default"]=u,e.exports=t["default"]},17:function(e,t,n){var r=n(6),o=n(1).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},19:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},2:function(e,t,n){e.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},21:function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},25:function(e,t,n){e.exports=!n(2)&&!n(11)(function(){return 7!=Object.defineProperty(n(17)("div"),"a",{get:function(){return 7}}).a})},33:function(e,t,n){e.exports={"default":n(36),__esModule:!0}},36:function(e,t,n){n(38);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},38:function(e,t,n){var r=n(8);r(r.S+r.F*!n(2),"Object",{defineProperty:n(4).f})},4:function(e,t,n){var r=n(5),o=n(25),i=n(21),a=Object.defineProperty;t.f=n(2)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},5:function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},6:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},7:function(e,t,n){var r=n(4),o=n(15);e.exports=n(2)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},8:function(e,t,n){var r=n(1),o=n(0),i=n(14),a=n(7),s="prototype",u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,v=e&u.B,g=e&u.W,m=p?o:o[t]||(o[t]={}),_=m[s],b=p?r:h?r[t]:(r[t]||{})[s];p&&(n=t);for(c in n)l=!d&&b&&void 0!==b[c],l&&c in m||(f=l?b[c]:n[c],m[c]=p&&"function"!=typeof b[c]?n[c]:v&&l?i(f,r):g&&b[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&_&&!_[c]&&a(_,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},9:function(e,t,n){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}})})},{}],7:[function(t,n,r){!function(t,r){"use strict";"object"==typeof n&&n.exports?n.exports=r():"function"==typeof e&&e.amd?e(r):t.IPv6=r(t)}(this,function(e){"use strict";function t(e){var t=e.toLowerCase(),n=t.split(":"),r=n.length,o=8;""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[r-1]&&""===n[r-2]&&n.pop(),r=n.length,n[r-1].indexOf(".")!==-1&&(o=7);var i;for(i=0;i<r&&""!==n[i];i++);if(i<o)for(n.splice(i,1,"0000");n.length<o;)n.splice(i,0,"0000");for(var a,s=0;s<o;s++){a=n[s].split("");for(var u=0;u<3&&("0"===a[0]&&a.length>1);u++)a.splice(0,1);n[s]=a.join("")}var c=-1,l=0,f=0,d=-1,p=!1;for(s=0;s<o;s++)p?"0"===n[s]?f+=1:(p=!1,f>l&&(c=d,l=f)):"0"===n[s]&&(p=!0,d=s,f=1);f>l&&(c=d,l=f),l>1&&n.splice(c,l,""),r=n.length;var h="";for(""===n[0]&&(h=":"),s=0;s<r&&(h+=n[s],s!==r-1);s++)h+=":";return""===n[r-1]&&(h+=":"),h}function n(){return e.IPv6===this&&(e.IPv6=r),this}var r=e&&e.IPv6;return{best:t,noConflict:n}})},{}],8:[function(t,n,r){!function(t,r){"use strict";"object"==typeof n&&n.exports?n.exports=r():"function"==typeof e&&e.amd?e(r):t.SecondLevelDomains=r(t)}(this,function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",
rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var r=e.lastIndexOf(".",t-1);if(r<=0||r>=t-1)return!1;var o=n.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(r+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var r=e.lastIndexOf(".",t-1);if(r>=0)return!1;var o=n.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var r=e.lastIndexOf(".",t-1);if(r<=0||r>=t-1)return null;var o=n.list[e.slice(t+1)];return o?o.indexOf(" "+e.slice(r+1,t)+" ")<0?null:e.slice(r+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n})},{}],9:[function(t,n,r){!function(r,o){"use strict";"object"==typeof n&&n.exports?n.exports=o(t("./punycode"),t("./IPv6"),t("./SecondLevelDomains")):"function"==typeof e&&e.amd?e(["./punycode","./IPv6","./SecondLevelDomains"],o):r.URI=o(r.punycode,r.IPv6,r.SecondLevelDomains,r)}(this,function(e,t,n,r){"use strict";function o(e,t){var n=arguments.length>=1,r=arguments.length>=2;if(!(this instanceof o))return n?r?new o(e,t):new o(e):new o;if(void 0===e){if(n)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&n)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}function i(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function a(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function s(e){return"Array"===a(e)}function u(e,t){var n,r,o={};if("RegExp"===a(t))o=null;else if(s(t))for(n=0,r=t.length;n<r;n++)o[t[n]]=!0;else o[t]=!0;for(n=0,r=e.length;n<r;n++){var i=o&&void 0!==o[e[n]]||!o&&t.test(e[n]);i&&(e.splice(n,1),r--,n--)}return e}function c(e,t){var n,r;if(s(t)){for(n=0,r=t.length;n<r;n++)if(!c(e,t[n]))return!1;return!0}var o=a(t);for(n=0,r=e.length;n<r;n++)if("RegExp"===o){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function l(e,t){if(!s(e)||!s(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function f(e){var t=/^\/+|\/+$/g;return e.replace(t,"")}function d(e){return escape(e)}function p(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}function h(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function y(e,t){return function(n,r){return void 0===n?this._parts[e]||"":(null!==n&&(n+="",n.charAt(0)===t&&(n=n.substring(1))),this._parts[e]=n,this.build(!r),this)}}var v=r&&r.URI;o.version="1.18.8";var g=o.prototype,m=Object.prototype.hasOwnProperty;o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\.-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return o.domAttributes[t]}},o.encode=p,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=p,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(e,t){var n=o.encode(e+"");return void 0===t&&(t=o.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},o.decodeQuery=function(e,t){e+="",void 0===t&&(t=o.escapeQuerySpace);try{return o.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}};var _,b={encode:"encode",decode:"decode"},w=function(e,t){return function(n){try{return o[t](n+"").replace(o.characters[e][t].expression,function(n){return o.characters[e][t].map[n]})}catch(r){return n}}};for(_ in b)o[_+"PathSegment"]=w("pathname",b[_]),o[_+"UrnPathSegment"]=w("urnpath",b[_]);var k=function(e,t,n){return function(r){var i;i=n?function(e){return o[t](o[n](e))}:o[t];for(var a=(r+"").split(e),s=0,u=a.length;s<u;s++)a[s]=i(a[s]);return a.join(e)}};o.decodePath=k("/","decodePathSegment"),o.decodeUrnPath=k(":","decodeUrnPathSegment"),o.recodePath=k("/","encodePathSegment","decode"),o.recodeUrnPath=k(":","encodeUrnPathSegment","decode"),o.encodeReserved=w("reserved","encode"),o.parse=function(e,t){var n;return t||(t={}),n=e.indexOf("#"),n>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),n=e.indexOf("?"),n>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=o.parseAuthority(e,t)):(n=e.indexOf(":"),n>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(o.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=o.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0))),t.path=e,t},o.parseHost=function(e,t){e=e.replace(/\\/g,"/");var n,r,o=e.indexOf("/");if(o===-1&&(o=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,o)||null,"/"===t.port&&(t.port=null);else{var i=e.indexOf(":"),a=e.indexOf("/"),s=e.indexOf(":",i+1);s!==-1&&(a===-1||s<a)?(t.hostname=e.substring(0,o)||null,t.port=null):(r=e.substring(0,o).split(":"),t.hostname=r[0]||null,t.port=r[1]||null)}return t.hostname&&"/"!==e.substring(o).charAt(0)&&(o++,e="/"+e),e.substring(o)||"/"},o.parseAuthority=function(e,t){return e=o.parseUserinfo(e,t),o.parseHost(e,t)},o.parseUserinfo=function(e,t){var n,r=e.indexOf("/"),i=e.lastIndexOf("@",r>-1?r:e.length-1);return i>-1&&(r===-1||i<r)?(n=e.substring(0,i).split(":"),t.username=n[0]?o.decode(n[0]):null,n.shift(),t.password=n[0]?o.decode(n.join(":")):null,e=e.substring(i+1)):(t.username=null,t.password=null),e},o.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var n,r,i,a={},s=e.split("&"),u=s.length,c=0;c<u;c++)n=s[c].split("="),r=o.decodeQuery(n.shift(),t),i=n.length?o.decodeQuery(n.join("="),t):null,m.call(a,r)?("string"!=typeof a[r]&&null!==a[r]||(a[r]=[a[r]]),a[r].push(i)):a[r]=i;return a},o.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=o.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},o.buildHost=function(e){var t="";return e.hostname?(t+=o.ip6_expression.test(e.hostname)?"["+e.hostname+"]":e.hostname,e.port&&(t+=":"+e.port),t):""},o.buildAuthority=function(e){return o.buildUserinfo(e)+o.buildHost(e)},o.buildUserinfo=function(e){var t="";return e.username&&(t+=o.encode(e.username)),e.password&&(t+=":"+o.encode(e.password)),t&&(t+="@"),t},o.buildQuery=function(e,t,n){var r,i,a,u,c="";for(i in e)if(m.call(e,i)&&i)if(s(e[i]))for(r={},a=0,u=e[i].length;a<u;a++)void 0!==e[i][a]&&void 0===r[e[i][a]+""]&&(c+="&"+o.buildQueryParameter(i,e[i][a],n),t!==!0&&(r[e[i][a]+""]=!0));else void 0!==e[i]&&(c+="&"+o.buildQueryParameter(i,e[i],n));return c.substring(1)},o.buildQueryParameter=function(e,t,n){return o.encodeQuery(e,n)+(null!==t?"="+o.encodeQuery(t,n):"")},o.addQuery=function(e,t,n){if("object"==typeof t)for(var r in t)m.call(t,r)&&o.addQuery(e,r,t[r]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),s(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}},o.removeQuery=function(e,t,n){var r,i,c;if(s(t))for(r=0,i=t.length;r<i;r++)e[t[r]]=void 0;else if("RegExp"===a(t))for(c in e)t.test(c)&&(e[c]=void 0);else if("object"==typeof t)for(c in t)m.call(t,c)&&o.removeQuery(e,c,t[c]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===a(n)?!s(e[t])&&n.test(e[t])?e[t]=void 0:e[t]=u(e[t],n):e[t]!==String(n)||s(n)&&1!==n.length?s(e[t])&&(e[t]=u(e[t],n)):e[t]=void 0:e[t]=void 0}},o.hasQuery=function(e,t,n,r){switch(a(t)){case"String":break;case"RegExp":for(var i in e)if(m.call(e,i)&&t.test(i)&&(void 0===n||o.hasQuery(e,i,n)))return!0;return!1;case"Object":for(var u in t)if(m.call(t,u)&&!o.hasQuery(e,u,t[u]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(a(n)){case"Undefined":return t in e;case"Boolean":var f=Boolean(s(e[t])?e[t].length:e[t]);return n===f;case"Function":return!!n(e[t],t,e);case"Array":if(!s(e[t]))return!1;var d=r?c:l;return d(e[t],n);case"RegExp":return s(e[t])?!!r&&c(e[t],n):Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return s(e[t])?!!r&&c(e[t],n):e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var e=[],t=[],n=0,r=0;r<arguments.length;r++){var i=new o(arguments[r]);e.push(i);for(var a=i.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&t.push(a[s]),a[s]&&n++}if(!t.length||!n)return new o("");var u=new o("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},o.commonPath=function(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return n<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(n)&&"/"===t.charAt(n)||(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},o.withinString=function(e,t,n){n||(n={});var r=n.start||o.findUri.start,i=n.end||o.findUri.end,a=n.trim||o.findUri.trim,s=n.parens||o.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var c=r.exec(e);if(!c)break;var l=c.index;if(n.ignoreHtml){var f=e.slice(Math.max(l-3,0),l);if(f&&u.test(f))continue}for(var d=l+e.slice(l).search(i),p=e.slice(l,d),h=-1;;){var y=s.exec(p);if(!y)break;var v=y.index+y[0].length;h=Math.max(h,v)}if(p=h>-1?p.slice(0,h)+p.slice(h).replace(a,""):p.replace(a,""),!(p.length<=c[0].length||n.ignore&&n.ignore.test(p))){d=l+p.length;var g=t(p,l,d,e);void 0!==g?(g=String(g),e=e.slice(0,l)+g+e.slice(d),r.lastIndex=l+g.length):r.lastIndex=d}}return r.lastIndex=0,e},o.ensureValidHostname=function(t){if(t.match(o.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(e.toASCII(t).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}},o.noConflict=function(e){if(e){var t={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(t.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(t.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=r.SecondLevelDomains.noConflict()),t}return r.URI===this&&(r.URI=v),this},g.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},g.clone=function(){return new o(this)},g.valueOf=g.toString=function(){return this.build(!1)._string},g.protocol=h("protocol"),g.username=h("username"),g.password=h("password"),g.hostname=h("hostname"),g.port=h("port"),g.query=y("query","?"),g.fragment=y("fragment","#"),g.search=function(e,t){var n=this.query(e,t);return"string"==typeof n&&n.length?"?"+n:n},g.hash=function(e,t){var n=this.fragment(e,t);return"string"==typeof n&&n.length?"#"+n:n},g.pathname=function(e,t){if(void 0===e||e===!0){var n=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?o.decodeUrnPath:o.decodePath)(n):n}return this._parts.urn?this._parts.path=e?o.recodeUrnPath(e):"":this._parts.path=e?o.recodePath(e):"/",this.build(!t),this},g.path=g.pathname,g.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=o._parts();var r=e instanceof o,i="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var a=o.getDomAttribute(e);e=e[a]||"",i=!1}if(!r&&i&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=o.parse(String(e),this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var s=r?e._parts:e;for(n in s)m.call(this._parts,n)&&(this._parts[n]=s[n])}return this.build(!t),this},g.is=function(e){var t=!1,r=!1,i=!1,a=!1,s=!1,u=!1,c=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,r=o.ip4_expression.test(this._parts.hostname),i=o.ip6_expression.test(this._parts.hostname),t=r||i,a=!t,s=a&&n&&n.has(this._parts.hostname),u=a&&o.idn_expression.test(this._parts.hostname),c=a&&o.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return a;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var x=g.protocol,j=g.port,O=g.hostname;g.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(o.protocol_expression)))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return x.call(this,e,t)},g.scheme=g.protocol,g.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError('Port "'+e+'" contains characters other than [0-9]');return j.call(this,e,t)},g.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={},r=o.parseHost(e,n);if("/"!==r)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=n.hostname}return O.call(this,e,t)},g.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=this.protocol(),r=this.authority();return r?(n?n+"://":"")+this.authority():""}var i=o(e);return this.protocol(i.protocol()).authority(i.authority()).build(!t),this},g.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?o.buildHost(this._parts):"";var n=o.parseHost(e,this._parts);if("/"!==n)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},g.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?o.buildAuthority(this._parts):"";var n=o.parseAuthority(e,this._parts);if("/"!==n)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},g.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=o.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==e[e.length-1]&&(e+="@"),o.parseUserinfo(e,this._parts),this.build(!t),this},g.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=o.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},g.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,r),s=new RegExp("^"+i(a));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&o.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(s,e),this.build(!t),this},g.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(t).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!e)throw new TypeError("cannot set domain empty");if(o.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=new RegExp(i(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},g.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(r+1);return t!==!0&&n&&n.list[o.toLowerCase()]?n.get(this._parts.hostname)||o:o}var a;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');a=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},g.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?o.decodePath(r):r}var a=this._parts.path.length-this.filename().length,s=this._parts.path.substring(0,a),u=new RegExp("^"+i(s));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=o.recodePath(e),this._parts.path=this._parts.path.replace(u,e),this.build(!t),this},g.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return e?o.decodePathSegment(r):r}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var s=new RegExp(i(this.filename())+"$");return e=o.recodePath(e),this._parts.path=this._parts.path.replace(s,e),a?this.normalizePath(t):this.build(!t),this},g.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var n,r,a=this.filename(),s=a.lastIndexOf(".");return s===-1?"":(n=a.substring(s+1),r=/^[a-z0-9%]+$/i.test(n)?n:"",e?o.decodePathSegment(r):r)}"."===e.charAt(0)&&(e=e.substring(1));var u,c=this.suffix();if(c)u=e?new RegExp(i(c)+"$"):new RegExp(i("."+c)+"$");else{if(!e)return this;this._parts.path+="."+o.recodePath(e)}return u&&(e=o.recodePath(e),this._parts.path=this._parts.path.replace(u,e)),this.build(!t),this},g.segment=function(e,t,n){var r=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),a=o.split(r);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(i&&a.shift(),e<0&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(s(t)){a=[];for(var u=0,c=t.length;u<c;u++)(t[u].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(f(t[u])))}else(t||"string"==typeof t)&&(t=f(t),""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t?a[e]=f(t):a.splice(e,1);return i&&a.unshift(""),this.path(a.join(r),n)},g.segmentCoded=function(e,t,n){var r,i,a;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(r=this.segment(e,t,n),s(r))for(i=0,a=r.length;i<a;i++)r[i]=o.decode(r[i]);else r=void 0!==r?o.decode(r):void 0;return r}if(s(t))for(i=0,a=t.length;i<a;i++)t[i]=o.encode(t[i]);else t="string"==typeof t||t instanceof String?o.encode(t):t;return this.segment(e,t,n)};var P=g.query;return g.query=function(e,t){if(e===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=e.call(this,n);return this._parts.query=o.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=o.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):P.call(this,e,t)},g.setQuery=function(e,t,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)r[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in e)m.call(e,i)&&(r[i]=e[i])}return this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},g.addQuery=function(e,t,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(r,e,void 0===t?null:t),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},g.removeQuery=function(e,t,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(r,e,t),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},g.hasQuery=function(e,t,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(r,e,t,n)},g.setSearch=g.setQuery,g.addSearch=g.addQuery,g.removeSearch=g.removeQuery,g.hasSearch=g.hasQuery,g.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},g.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},g.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},g.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},g.normalizePath=function(e){var t=this._parts.path;if(!t)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;t=o.recodePath(t);var n,r,i,a="";for("/"!==t.charAt(0)&&(n=!0,t="/"+t),"/.."!==t.slice(-3)&&"/."!==t.slice(-2)||(t+="/"),t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),n&&(a=t.substring(1).match(/^(\.\.\/)+/)||"",a&&(a=a[0]));;){if(r=t.search(/\/\.\.(\/|$)/),r===-1)break;0!==r?(i=t.substring(0,r).lastIndexOf("/"),i===-1&&(i=r),t=t.substring(0,i)+t.substring(r+3)):t=t.substring(3)}return n&&this.is("relative")&&(t=a+t.substring(1)),this._parts.path=t,this.build(!e),this},g.normalizePathname=g.normalizePath,g.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},g.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},g.normalizeSearch=g.normalizeQuery,g.normalizeHash=g.normalizeFragment,g.iso8859=function(){var e=o.encode,t=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=e,o.decode=t}return this},g.unicode=function(){var e=o.encode,t=o.decode;o.encode=p,o.decode=unescape;try{this.normalize()}finally{o.encode=e,o.decode=t}return this},g.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var r="",i=0,a=t._parts.query.split("&"),s=a.length;i<s;i++){var u=(a[i]||"").split("=");r+="&"+o.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(r+="="+o.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=o.decodeQuery(t.hash(),!0)},g.absoluteTo=function(e){var t,n,r,i=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof o||(e=new o(e)),i._parts.protocol)return i;if(i._parts.protocol=e._parts.protocol,this._parts.hostname)return i;for(n=0;r=a[n];n++)i._parts[r]=e._parts[r];return i._parts.path?(".."===i._parts.path.substring(-2)&&(i._parts.path+="/"),"/"!==i.path().charAt(0)&&(t=e.directory(),t=t?t:0===e.path().indexOf("/")?"/":"",i._parts.path=(t?t+"/":"")+i._parts.path,i.normalizePath())):(i._parts.path=e._parts.path,i._parts.query||(i._parts.query=e._parts.query)),i.build(),i},g.relativeTo=function(e){var t,n,r,i,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new o(e).normalize(),t=s._parts,n=e._parts,i=s.path(),a=e.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==n.hostname||t.port!==n.port)return s.build();if(t.hostname=null,t.port=null,i===a)return t.path="",s.build();if(r=o.commonPath(i,a),!r)return s.build();var u=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=u+t.path.substring(r.length)||"./",s.build()},g.equals=function(e){var t,n,r,i=this.clone(),a=new o(e),u={},c={},f={};if(i.normalize(),a.normalize(),i.toString()===a.toString())return!0;if(t=i.query(),n=a.query(),i.query(""),a.query(""),i.toString()!==a.toString())return!1;if(t.length!==n.length)return!1;u=o.parseQuery(t,this._parts.escapeQuerySpace),c=o.parseQuery(n,this._parts.escapeQuerySpace);for(r in u)if(m.call(u,r)){if(s(u[r])){if(!l(u[r],c[r]))return!1}else if(u[r]!==c[r])return!1;f[r]=!0}for(r in c)if(m.call(c,r)&&!f[r])return!1;return!0},g.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},g.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},o})},{"./IPv6":7,"./SecondLevelDomains":8,"./punycode":10}],10:[function(t,n,r){(function(t){!function(o){function i(e){throw new RangeError(I[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(A,".");var o=e.split("."),i=a(o,t).join(".");return r+i}function u(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function c(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=U(e>>>10&1023|55296),e=56320|1023&e),t+=U(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function f(e,t){
return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?D(e/E):e>>1,e+=D(e/t);e>N*O>>1;r+=x)e=D(e/N);return D(r+(N+1)*e/(e+P))}function p(e){var t,n,r,o,a,s,u,f,p,h,y=[],v=e.length,g=0,m=M,_=S;for(n=e.lastIndexOf(C),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),y.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(a=g,s=1,u=x;o>=v&&i("invalid-input"),f=l(e.charCodeAt(o++)),(f>=x||f>D((k-g)/s))&&i("overflow"),g+=f*s,p=u<=_?j:u>=_+O?O:u-_,!(f<p);u+=x)h=x-p,s>D(k/h)&&i("overflow"),s*=h;t=y.length+1,_=d(g-a,t,0==a),D(g/t)>k-m&&i("overflow"),m+=D(g/t),g%=t,y.splice(g++,0,m)}return c(y)}function h(e){var t,n,r,o,a,s,c,l,p,h,y,v,g,m,_,b=[];for(e=u(e),v=e.length,t=M,n=0,a=S,s=0;s<v;++s)y=e[s],y<128&&b.push(U(y));for(r=o=b.length,o&&b.push(C);r<v;){for(c=k,s=0;s<v;++s)y=e[s],y>=t&&y<c&&(c=y);for(g=r+1,c-t>D((k-n)/g)&&i("overflow"),n+=(c-t)*g,t=c,s=0;s<v;++s)if(y=e[s],y<t&&++n>k&&i("overflow"),y==t){for(l=n,p=x;h=p<=a?j:p>=a+O?O:p-a,!(l<h);p+=x)_=l-h,m=x-h,b.push(U(f(h+_%m,0))),l=D(_/m);b.push(U(f(l,0))),a=d(n,g,r==o),n=0,++r}++n,++t}return b.join("")}function y(e){return s(e,function(e){return T.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return s(e,function(e){return R.test(e)?"xn--"+h(e):e})}var g="object"==typeof r&&r&&!r.nodeType&&r,m="object"==typeof n&&n&&!n.nodeType&&n,_="object"==typeof t&&t;_.global!==_&&_.window!==_&&_.self!==_||(o=_);var b,w,k=2147483647,x=36,j=1,O=26,P=38,E=700,S=72,M=128,C="-",T=/^xn--/,R=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=x-j,D=Math.floor,U=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:u,encode:c},decode:p,encode:h,toASCII:v,toUnicode:y},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return b});else if(g&&m)if(n.exports==g)m.exports=b;else for(w in b)b.hasOwnProperty(w)&&(g[w]=b[w]);else o.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={GET:"get",POST:"post"},a=function(){function e(){r(this,e);var t=this;Object.keys(i).forEach(function(e){t[i[e]]=function(n,r){return new Promise(function(o,a){t._makeLocalRequest(i[e].toUpperCase(),n,r).then(function(e){o(e)})["catch"](function(e){a(e)})})}})}return o(e,[{key:"_makeLocalRequest",value:function(e,t,n){var r=this;return new Promise(function(o,i){t=r._mapProtocol(t);var a=new XMLHttpRequest;if(a.open(e,t,!0),a.onreadystatechange=function(e){var t=e.currentTarget;4===t.readyState&&(200===t.status?o(t.responseText):i(t.responseText))},n&&n.headers)for(var s in n.headers)a.setRequestHeader(s,n.headers[s]);a.send(n?n.body:null)})}},{key:"_mapProtocol",value:function(e){var t={"localhost://":"https://","undefined://":"https://","hyperty-catalogue://":"https://","https://":"https://","http://":"http://"},n=!1;for(var r in t)if(e.slice(0,r.length)===r){e=t[r]+e.slice(r.length,e.length),n=!0;break}if(!n)throw new Error("Invalid protocol of url: "+e);return e}}]),e}();n["default"]=a},{}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){if(r(this,e),!t)throw new Error("The Runtime Capabilities need the storageManager");this.storageManager=t}return i(e,[{key:"getRuntimeCapabilities",value:function(){var e=this;return new Promise(function(t,n){Promise.all([e._getEnvironment(),e._getMediaDevices()]).then(function(n){var r={};n.forEach(function(e){o(r,e)}),e.storageManager.set("capabilities","1",r),t(r)})["catch"](function(e){n(e)})})}},{key:"isAvailable",value:function(e){var t=this;return new Promise(function(n){t.storageManager.get("capabilities").then(function(t){console.log("Capability "+e+" is available? ",t.hasOwnProperty(e)&&t[e]),n(t.hasOwnProperty(e)&&t[e]?!0:!1)})})}},{key:"update",value:function(){var e=this;return new Promise(function(t,n){e.getRuntimeCapabilities().then(t)["catch"](n)})}},{key:"_getEnvironment",value:function(){return{browser:!(!window||!navigator),node:!(window&&navigator)}}},{key:"_getMediaDevices",value:function(){return new Promise(function(e){var t={};return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?void navigator.mediaDevices.enumerateDevices().then(function(n){n.forEach(function(e){"audioinput"===e.kind&&"default"===e.deviceId&&(t.mic=!0),"videoinput"===e.kind&&(t.camera=!0)}),e(t)})["catch"](function(n){e(t),console.log(n.name+": "+n.message)}):(console.log("enumerateDevices() not supported."),void e(t))})}}]),e}();n["default"]=a},{}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("service-framework/dist/PersistenceManager"),i=r(o),a=e("./Sandboxes"),s=e("./SandboxApp"),u=r(s),c=e("./Request"),l=r(c),f=e("./RuntimeCapabilities"),d=r(f),p=e("service-framework/dist/StorageManager"),h=r(p),y=e("dexie"),v=r(y),g=e("service-framework/dist/RuntimeCatalogue");n["default"]={createSandbox:function(e){return(0,a.createSandbox)(e)},createAppSandbox:function(){return new u["default"]},createHttpRequest:function(){var e=new l["default"];return e},createRuntimeCatalogue:function(){return this.catalogue||(this.catalogue=new g.RuntimeCatalogue(this)),this.catalogue},atob:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return atob(e)}),persistenceManager:function(){var e=window.localStorage;return new i["default"](e)},storageManager:function(){var e=new v["default"]("cache"),t="objects";return new h["default"](e,t)},runtimeCapabilities:function(e){return new d["default"](e)}}},{"./Request":11,"./RuntimeCapabilities":12,"./SandboxApp":14,"./Sandboxes":15,dexie:1,"service-framework/dist/PersistenceManager":4,"service-framework/dist/RuntimeCatalogue":5,"service-framework/dist/StorageManager":6}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("runtime-core/dist/sandbox"),c=e("runtime-core/dist/minibus"),l=(r(c),function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=u.SandboxType.NORMAL,window.addEventListener("message",function(e){this.origin||(this.origin=e.source),e.data.hasOwnProperty("to")&&e.data.to.startsWith("core:")||this._onMessage(JSON.parse(JSON.stringify(e.data)))}.bind(e)),window.addEventListener("error",function(e){throw console.error("[SANDBOX APP] - Error",e),e}.bind(e)),e}return a(t,e),s(t,[{key:"_onPostMessage",value:function(e){this.origin.postMessage(JSON.parse(JSON.stringify(e)),"*")}}]),t}(u.Sandbox));n["default"]=l},{"runtime-core/dist/minibus":2,"runtime-core/dist/sandbox":3}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=[h,y],n=function(e,t){return Object.keys(e).filter(function(n){return e[n]!==t[n]})};return Promise.all(t.map(function(e){return e.capabilities().then(function(t){return{capabilities:t,sandbox:e}})})).then(function(t){for(var r=0;r<t.length;){if(0===n(e,t[r].capabilities).length)return t[r].sandbox["new"]();r++}throw new Error("None of supported sandboxes match your constraints")})}Object.defineProperty(n,"__esModule",{value:!0}),n.SandboxWindow=n.SandboxWorker=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n.createSandbox=s;var l=e("runtime-core/dist/sandbox"),f=e("runtime-core/dist/minibus"),d=(r(f),e("./RuntimeFactory")),p=r(d),h=n.SandboxWorker=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.type=l.SandboxType.NORMAL,!Worker)throw new Error("Your environment does not support worker \n");return n._worker=new Worker(e),n._worker.addEventListener("message",function(e){this._onMessage(JSON.parse(JSON.stringify(e.data)))}.bind(n)),n._worker.addEventListener("error",function(e){throw console.log("[Sandbox Worker] - Error: ",e),JSON.stringify(e)}.bind(n)),n._worker.postMessage(""),n}return a(t,e),c(t,null,[{key:"capabilities",value:function(){return p["default"].runtimeCapabilities(p["default"].storageManager()).getRuntimeCapabilities().then(function(e){return u(e,{mic:!1,camera:!1})})}},{key:"new",value:function(){return new t("./context-service.js")}}]),c(t,[{key:"_onPostMessage",value:function(e){this._worker.postMessage(JSON.parse(JSON.stringify(e)))}}]),t}(l.Sandbox),y=n.SandboxWindow=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=l.SandboxType.NORMAL,e.channel=new MessageChannel,e.channel.port1.onmessage=function(e){this._onMessage(JSON.parse(JSON.stringify(e.data)))}.bind(e),parent.postMessage({to:"runtime:createSandboxWindow"},"*",[e.channel.port2]),e}return a(t,e),c(t,null,[{key:"capabilities",value:function(){return p["default"].runtimeCapabilities(p["default"].storageManager()).getRuntimeCapabilities()}},{key:"new",value:function(){return new t}}]),c(t,[{key:"_onPostMessage",value:function(e){this.channel.port1.postMessage(JSON.parse(JSON.stringify(e)))}}]),t}(l.Sandbox)},{"./RuntimeFactory":13,"runtime-core/dist/minibus":2,"runtime-core/dist/sandbox":3}],16:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){if(r(this,e),!t)throw Error("Identity Module not set!");var n=this,o=t._runtimeURL+"/identity-gui";n._guiURL=o,n.identityModule=t,n._messageBus=t.messageBus,n.identityModule.deployGUI(),n.resultURL=void 0,n._messageBus.addListener(o,function(e){var t=(e.body.value,void 0);document.getElementsByTagName("body")[0].style="background-color:white;",parent.postMessage({body:{method:"showAdminPage"},to:"runtime:gui-manager"},"*"),$(".admin-page").removeClass("hide"),n.showIdentitiesGUI(e.body.value).then(function(r){var o=void 0;switch(parent.postMessage({body:{method:"hideAdminPage"},to:"runtime:gui-manager"},"*"),$(".admin-page").addClass("hide"),document.getElementsByTagName("body")[0].style="background-color:transparent",$(".identities-section").addClass("hide"),$(".policies-section").addClass("hide"),r.type){case"idp":t={type:"idp",value:r.value,code:200},o={id:e.id,type:"response",to:e.from,from:e.to,body:t},n._messageBus.postMessage(o);break;case"identity":t={type:"identity",value:r.value,code:200},o={id:e.id,type:"response",to:e.from,from:e.to,body:t},n._messageBus.postMessage(o);break;default:t={type:"error",value:"Error on identity GUI",code:400},o={id:e.id,type:"response",to:e.from,from:e.to,body:t},n._messageBus.postMessage(o)}})}),$(".identities-page-show").on("click",function(){n.showIdentitiesGUI()})}return o(e,[{key:"showIdentitiesGUI",value:function(e){var t=this;return new Promise(function(n,r){var o=void 0,i=void 0;e?(o=e,i=!1):(i=!0,o=t.identityModule.getIdentitiesToChoose()),$(".policies-section").addClass("hide"),$(".graphConnector-section").addClass("hide"),$(".identities-section").removeClass("hide"),t.showMyIdentities(o.identities,i).then(function(e){console.log("chosen identity: ",e),n({type:"identity",value:e})});var a=function(e){console.log("chosen identity: ",e),n({type:"identity",value:e})},s=[],u=o.idps;u.forEach(function(e){s.push(e.domain)}),$("#idproviders").html(t._getList(s)),$("#idproviders").off(),$("#idproviders").on("click",function(e){return t.obtainNewIdentity(e,a,i)}),$(".identities-reset").off(),$(".identities-reset").on("click",function(e){return t._resetIdentities(a)})})}},{key:"showMyIdentities",value:function(e,t){var n=this;return new Promise(function(r,o){var i=[];for(var a in e){var s=e[a].split("@");i.push({email:e[a],domain:s[1]})}var u=document.getElementById("my-ids");u.innerHTML="";for(var c=n.createTable(),l=document.createElement("tbody"),f=i.length,d=0;d<f;d++){var p=n.createTableRow(i[d],t);l.appendChild(p)}c.appendChild(l),u.appendChild(c);var h=function(e){r(e)};t||$(".clickable-cell").on("click",function(e){return n.changeID(e,h)}),$(".remove-id").on("click",function(t){return n.removeID(t,e)})})}},{key:"createTable",value:function(){var e=document.createElement("table");e.className="centered";var t=document.createElement("thead"),n=document.createElement("tr"),r=document.createElement("th");return r.textContent="Email",n.appendChild(r),t.appendChild(n),e.appendChild(t),e}},{key:"createTableRow",value:function(e,t){var n=document.createElement("tr"),r=document.createElement("td");if(r.textContent=e.email,r.className="clickable-cell",r.style="cursor: pointer",n.appendChild(r),r=document.createElement("td"),t){var o=document.createElement("button");o.textContent="Remove",o.className="remove-id waves-effect waves-light btn",r.appendChild(o)}return n.appendChild(r),n}},{key:"changeID",value:function(e,t){var n=e.target.innerText;if("settings"!==n)return t(n),n}},{key:"removeID",value:function(e,t){var n=this,r=e.target.parentNode.parentNode,o=r.children[0].textContent;r.children[1].textContent;n.identityModule.unregisterIdentity(o);for(var i=t.length,a=0;a<i;a++)if(t[a].email===o){t.splice(a,1);break}n.showMyIdentities(t,!0)}},{key:"obtainNewIdentity",value:function(e,t,n){var r=this,o=e.target.textContent;e.target.text;r.identityModule.crypto.generateRSAKeyPair().then(function(e){var n=btoa(e["public"]);r.identityModule.sendGenerateMessage(n,"origin",void 0,o).then(function(i){console.log("receivedURL: "+i.loginUrl.substring(0,20)+"...");var a=i.loginUrl,s=void 0;if(a.indexOf("redirect_uri")!==-1){var u=a.substring(0,a.indexOf("redirect_uri")),c=a.substring(a.indexOf("redirect_uri"),a.length),l=c.substring(c.indexOf("&"),a.length);s=l.indexOf("&")!==-1?u+"redirect_uri="+location.origin+l:u+"redirect_uri="+location.origin}r.resultURL=s||a,$(".login-idp").html("<p>Chosen IDP: "+o+"</p>"),$(".login").removeClass("hide"),$(".login-btn").off(),$(".login-btn").on("click",function(a){$(".login").addClass("hide"),r._authenticateUser(e,n,i,"origin",o).then(function(e){t(e),r.showIdentitiesGUI()})})})})["catch"](function(e){return console.log("obtanin new identity",e)})}},{key:"_getList",value:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+='<li class="divider"></li>',t+='<li><a class="center-align">'+e[r]+"</a></li>";return t}},{key:"_authenticateUser",value:function(e,t,n,r,o){var i=this,a=i.resultURL;return new Promise(function(n,s){i.identityModule.openPopup(a).then(function(a){i.identityModule.sendGenerateMessage(t,r,a,o).then(function(t){t?i.identityModule.storeIdentity(t,e).then(function(e){n(e.userProfile.username)},function(e){s(e)}):s("error on obtaining identity information")})},function(e){s(e)})})}},{key:"_resetIdentities",value:function(){console.log("_resetIdentities")}}]),e}();n["default"]=i},{}],17:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./PoliciesManager"),s=r(a),u=function(){function e(t){if(o(this,e),!t)throw Error("Policy Engine is not set!");this.policiesManager=new s["default"](t),this.elements=this._setElements(),this._setListeners()}return i(e,[{key:"_addMember",value:function(e){var t=this,n=e.target.id;$(".member-new-intro").html('<h5>Add a member to a group</h5><p>Insert a user email below to add to the "'+n+'" group.</p>'),$(".member-new-modal").openModal(),$(".member-new-ok").off(),$(".member-new-ok").on("click",function(e){var r=$("#member-new").val();$("#member-new").val(""),t.policiesManager.addToGroup(n,r),$(".member-new-modal").closeModal(),t._manageGroups()})}},{key:"_createGroup",value:function(e){var t=this;$("#group-new-name").val(""),$(".group-new-modal").openModal(),$(".group-new-ok").on("click",function(e){var n=$("#group-new-name").val();t.policiesManager.createGroup(n),t._manageGroups()})}},{key:"_addPolicy",value:function(){var e=this;$("#policy-new-title").val(""),$(".combining").html("");var t=["Block overrides","Allow overrides","First applicable"];$(".combining").append(this._getOptions("comb-algorithm","Choose a combining algorithm",t)),$(".policy-new").openModal(),$(".policy-new-ok").off(),$(".policy-new-ok").on("click",function(t){var n=$("#policy-new-title").val();if(n){var r=$("#comb-algorithm").val();e.policiesManager.addPolicy(n,r),$(".help-menu").addClass("hide"),$(".policy-new").closeModal(),e._goHome()}else Materialize.toast("Invalid policy title",4e3)}),$(".help-btn").off(),$(".help-btn").on("click",function(e){$(".help-menu").removeClass("hide")})}},{key:"_decreaseRulePriority",value:function(e){var t=e.target.closest("tr").id,n=t.split(":"),r=parseInt(n[n.length-1]);n.pop();var o=n.join(":"),i=this.policiesManager.getPolicy(o).getLastPriority();if(i!=r){var a=parseInt(r+1);this.policiesManager.decreaseRulePriority(o,r,a),this._goHome()}}},{key:"_deleteMember",value:function(e){var t=e.target.closest("tr").id,n=t.split("::"),r=n[n.length-1];n.pop();var o=n.join("::");this.policiesManager.removeFromGroup(o,r),this._manageGroups()}},{key:"_deleteGroup",value:function(e){var t=e.target.closest("tr").children[0].id;this.policiesManager.deleteGroup(t),this._manageGroups()}},{key:"_deletePolicy",value:function(e){var t=e.target.closest("tr").id;this.policiesManager.deletePolicy(t),this._goHome()}},{key:"_deleteRule",value:function(e){var t=e.target.closest("tr").id,n=t.split(":"),r=n[n.length-1];n.pop();var o=n.join(":"),i=this.policiesManager.getRuleOfPolicy(o,r);this.policiesManager.deleteRule(o,i),this._goHome()}},{key:"_getActivePolicy",value:function(){var e=this;$(".policy-active").html("");var t=this.policiesManager.getActivePolicy(),n=this.policiesManager.getPoliciesTitles();n.push("Deactivate all policies"),$(".policy-active").append(this._getOptions("policies-list","Click to activate a policy",n,t)),$("#policies-list").on("click",function(t){var n=$("#policies-list").find(":selected")[0].textContent;"Deactivate all policies"===n&&(n=void 0),e.policiesManager.updateActivePolicy(n)})}},{key:"_getGroupOptions",value:function(e,t,n,r){var o="<option disabled selected>"+e+"</option>";for(var i in t){o+="<optgroup label="+t[i]+">";for(var a in r[i])o+='<option id="'+n[i]+'">'+r[i][a]+"</option>"}return o}},{key:"_getInfo",value:function(e){var t=void 0;switch(e){case"Date":if(t=$(".config").find("input").val(),t.indexOf(",")!==-1){var n=t.split(" ");n[1]=n[1].substring(0,n[1].length-1);var r=["January","February","March","April","May","June","July","August","September","October","November","December"];t=n[0]+"/"+(r.indexOf(n[1])+1)+"/"+n[2]}else{var o=t.split("-");t=o[2]+"/"+o[1]+"/"+o[0]}break;case"Group of users":t=$("#group").find(":selected").text();break;case"Subscription preferences":(t=void 0!==$("input[name='rule-new-subscription']:checked")[0])&&(t=$("input[name='rule-new-subscription']:checked")[0].id);break;case"Weekday":t=$("#weekday").find(":selected").text();break;default:t=$(".config").find("input").val()}return t}},{key:"_getList",value:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+='<li class="divider"></li>',t+='<li><a class="center-align">'+e[r]+"</a></li>";return t}},{key:"_getOptions",value:function(e,t,n,r){var o='<select id="'+e+'" class="browser-default"><option disabled selected>'+t+"</option>";for(var i in n)o+=void 0!==r&r===n[i]?'<option selected id="'+e+'">'+n[i]+"</option>":'<option id="'+e+'">'+n[i]+"</option>";return o+="</select>"}},{key:"_getPoliciesTable",value:function(){var e=this;$(".policies-no").addClass("hide"),$(".policies-current").html("");var t=this.policiesManager.getFormattedPolicies(),n=[],r=[],o=[];for(var i in t)n.push(t[i].title),r.push(t[i].rulesTitles),o.push(t[i].ids);var a="<table>",s=0===n.length;for(var u in n){a+='<thead><tr id="'+n[u]+'"><td></td><td></td><th class="center-align">'+n[u]+'</th><td><i class="material-icons clickable-cell policy-delete" style="cursor: pointer; vertical-align: middle">delete_forever</i></td></tr></thead><tbody>';for(var c in r[u])a+='<tr id="'+o[u][c]+'" ><td><i class="material-icons clickable-cell rule-priority-increase" style="cursor: pointer; vertical-align: middle">arrow_upward</i></td><td><i class="material-icons clickable-cell rule-priority-decrease" style="cursor: pointer; vertical-align: middle">arrow_downward</i></td><td class="rule-show clickable-cell" style="cursor: pointer">'+r[u][c]+'</td><td><i class="material-icons clickable-cell rule-delete" style="cursor: pointer; vertical-align: middle">clear</i></td></tr>';a+='<tr id="'+n[u]+'"></td><td></td><td></td><td style="text-align:center"><i class="material-icons clickable-cell center-align rule-add" style="cursor: pointer">add_circle</i></td></tr>'}s?$(".policies-no").removeClass("hide"):(a+="</tbody></table>",$(".policies-current").append(a)),$(".rule-add").on("click",function(t){e._showVariablesTypes(t)}),$(".rule-delete").on("click",function(t){e._deleteRule(t)}),$(".rule-show").on("click",function(t){e._showRule(t)}),$(".rule-priority-increase").on("click",function(t){e._increaseRulePriority(t)}),$(".rule-priority-decrease").on("click",function(t){e._decreaseRulePriority(t)}),$(".policy-add").off(),$(".policy-add").on("click",function(t){e._addPolicy(t)}),$(".policy-delete").on("click",function(t){e._deletePolicy(t)})}},{key:"_goHome",value:function(){this._getActivePolicy(),this._getPoliciesTable()}},{key:"_increaseRulePriority",value:function(e){var t=e.target.closest("tr").id,n=t.split(":"),r=parseInt(n[n.length-1]);if(0!==r){n.pop();var o=n.join(":"),i=r-1;this.policiesManager.increaseRulePriority(o,r,i),this._goHome()}}},{key:"_manageGroups",value:function(){var e=this;$(".groups-current").html("");var t=this.policiesManager.getGroups(),n=t.groupsNames,r=t.members,o=t.ids,i="<table>",a=0===n.length;for(var s in n){i+='<thead><tr><th id="'+n[s]+'">'+n[s]+'</th><td style="text-align:right"><i class="material-icons clickable-cell group-delete" style="cursor: pointer; vertical-align: middle">delete_forever</i></td></tr></thead><tbody>';for(var u in r[s])i+='<tr id="'+o[s][u]+'" ><td style="cursor: pointer">'+r[s][u]+'</td><td style="text-align:right"><i class="material-icons clickable-cell member-delete" style="cursor: pointer; vertical-align: middle">clear</i></td></tr>';i+='<tr id="'+n[s]+'"><td><i class="material-icons clickable-cell member-add" id="'+n[s]+'" style="cursor: pointer">add_circle</i></td></tr>'}a?$(".groups-current").append("<p>There are no groups set.</p>"):(i+="</tbody></table>",$(".groups-current").append(i)),$(".member-add").off(),$(".member-add").on("click",function(t){e._addMember(t)}),$(".member-delete").on("click",function(t){e._deleteMember(t)}),$(".group-add").off(),$(".group-add").on("click",function(t){e._createGroup(t)}),$(".group-delete").on("click",function(t){e._deleteGroup(t)})}},{key:"_parseFileContent",value:function(e){var t=JSON.parse(e);for(var n in t)this.policiesManager.addPolicy(n,void 0,t[n]);$(".policy-new").closeModal()}},{key:"_setElements",value:function(){var e=this;return{date:function(e){return'<input type="date" class="datepicker">'},select:function(t){return e._getOptions(t[0],t[1],t[2])},form:function(e){return'<form><input type="text" placeholder="'+e+'"></input></form>'}}}},{key:"_showNewConfigurationPanel",value:function(e){var t=event.target.text;$(".variable").html(this._getNewConfiguration(e,t)),$(".scopes").empty().html("");var n=["Email","Hyperty","All"],r=["identity","hyperty","global"],o=[];o.push(this.policiesManager.getMyEmails()),o.push(this.policiesManager.getMyHyperties()),o.push(["All identities and hyperties"]),$(".scopes").append(this._getGroupOptions("Apply this configuration to:",n,r,o)),$(".variable").removeClass("hide")}},{key:"_showVariablesTypes",value:function(e){var t=this,n=e.target.closest("tr").id;$("#variables-types").empty().html("");var r=this.policiesManager.getVariables();$("#variables-types").append(this._getList(r)),$(".variable").addClass("hide"),$(".rule-new").openModal(),$("#variables-types").off(),$("#variables-types").on("click",function(e){t._showNewConfigurationPanel(n)})}},{key:"_getNewConfiguration",value:function(e,t){var n=this,r=this.policiesManager.getVariableInfo(t);if($(".rule-new-title").html(r.title),$(".description").html(r.description),$(".config").html(""),"Subscription preferences"===t)$(".subscription-type").removeClass("hide");else{$(".subscription-type").addClass("hide");var o=r.input;for(var i in o)"Group of users"===t&&o[i][1].push(this.policiesManager.getGroupsNames()),$(".config").append(this.elements[o[i][0]](o[i][1])),"Group of users"===t&&o[i][1].pop();"date"===t&&$(".datepicker").pickadate({selectMonths:!0,selectYears:15})}document.getElementById("allow").checked=!1,document.getElementById("block").checked=!1,$(".ok-btn").off(),$(".ok-btn").on("click",function(r){if(void 0===$("input[name='rule-new-decision']:checked")[0])throw Error("INFORMATION MISSING: please specify an authorisation decision.");var o=n._getInfo(t),i=$("input[name='rule-new-decision']:checked")[0].id;i="allow"===i;var a=$(".scopes").find(":selected")[0].id,s=$(".scopes").find(":selected")[0].textContent;s="All identities and hyperties"===s?"global":s,n.policiesManager.setInfo(t,e,o,i,a,s),$(".rule-new").closeModal(),n._goHome()})}},{key:"_deleteInfo",value:function(e){var t=event.target.closest("tr").id,n=t.split(":"),r=n[0];n.shift();var o=n.join(""),i=event.target.closest("tr").children[0].id;this.policiesManager.deleteInfo(e,r,o,i),this._goHome()}},{key:"_setListeners",value:function(){var e=this;$(".settings-btn").on("click",function(e){parent.postMessage({body:{method:"showAdminPage"},to:"runtime:gui-manager"},"*"),$(".admin-page").removeClass("hide"),document.getElementsByTagName("body")[0].style="background-color:white;"}),$(".policies-page-show").on("click",function(t){$(".policies-section").removeClass("hide"),$(".identities-section").addClass("hide"),$(".graphConnector-section").addClass("hide"),e._goHome(),e._manageGroups()}),$(".admin-page-exit").on("click",function(e){parent.postMessage({body:{method:"hideAdminPage"},to:"runtime:gui-manager"},"*"),$(".admin-page").addClass("hide"),document.getElementsByTagName("body")[0].style="background-color:transparent;"}),$(".exit-btn").on("click",function(e){$(".subscription-type").addClass("hide"),$(".help-menu").addClass("hide")}),$("#policy-file").on("change",function(t){var n=t.target.files[0],r=new FileReader;r.readAsText(n,"UTF-8"),r.onload=function(t){e._parseFileContent(t.target.result),e._goHome()},r.onerror=function(e){throw Error("Error reading the file")}})}},{key:"_showRule",value:function(e){var t=this,n=e.target.textContent,r=e.target.closest("tr").id,o=r.split(":"),i=o[o.length-1];o.pop();var a=o.join(":"),s=this.policiesManager.getRuleOfPolicy(a,i);if("subscription"===s.condition.attribute&&"preauthorised"===s.condition.params)$(".authorise-btns").addClass("hide");else{var u=void 0;u=s.decision?document.getElementById("btn-allow"):document.getElementById("btn-block"),u.checked=!0,$(".authorise-btns").removeClass("hide")}$(".member-add").addClass("hide"),$(".member-new-btn").addClass("hide"),$(".rule-details").openModal(),$(".rule-title").html("<h5><b>"+n+"</b></h5>"),"subscription"===s.condition.attribute&&$(".subscription-type").removeClass("hide"),$(".subscription-decision").on("click",function(e){t._updateRule(e,"subscription",a,s)}),$(".decision").off(),$(".decision").on("click",function(e){t._updateRule("authorisation",a,s)})}},{key:"_updateRule",value:function(e,t,n,r){var o=$(".rule-title").text(),i=o.split(" "),a=i.indexOf("is");switch(a===-1&&(a=i.indexOf("are")),t){case"authorisation":var s=$("input[name='rule-update-decision']:checked")[0].id;"btn-allow"===s?(i[a+1]="allowed",s=!0):(i[a+1]="blocked",s=!1),o=i.join(" "),$(".rule-title").html("<h5><b>"+o+"</b></h5>"),this.policiesManager.updatePolicy(n,r,s);break;case"subscription":var u=e.target.labels[0].textContent;i[a+1];i=o.split("hyperties are"),"All subscribers"===u?($(".authorise-btns").removeClass("hide"),s=r.decision,u="*",o="Subscriptions from all hyperties are"+i[1]):($(".authorise-btns").addClass("hide"),s=!0,u="preauthorised",o="Subscriptions from previously authorised hyperties are"+i[1]),$(".rule-title").html("<h5><b>"+o+"</b></h5>"),this.policiesManager.updatePolicy(n,r,s,u)}this._goHome()}}]),e}();n["default"]=u},{"./PoliciesManager":18}],18:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}
}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.policyEngine=t,this.policies=this.policyEngine.context.userPolicies,this.variables=this.setVariables(),this.addition=this.setAdditionMethods(),this.validation=this.setValidationMethods()}return o(e,[{key:"addToGroup",value:function(e,t){this.policyEngine.context.addToGroup(e,t)}},{key:"createGroup",value:function(e){this.policyEngine.context.createGroup(e)}},{key:"addPolicy",value:function(e,t,n){if(void 0===n)switch(t){case"Block overrides":t="blockOverrides";break;case"Allow overrides":t="allowOverrides";break;case"First applicable":t="firstApplicable";break;default:t=void 0}this.policyEngine.addPolicy("USER",e,n,t)}},{key:"decreaseRulePriority",value:function(e,t,n){this.getRuleOfPolicy(e,n).priority=t,this.getRuleOfPolicy(e,t).priority=n,this.policyEngine.context.savePolicies("USER")}},{key:"deleteGroup",value:function(e){this.policyEngine.context.deleteGroup(e)}},{key:"deletePolicy",value:function(e){this.policyEngine.removePolicy("USER",e)}},{key:"deleteRule",value:function(e,t){var n=this.policyEngine.context.userPolicies;n[e].deleteRule(t),this.policyEngine.context.savePolicies("USER")}},{key:"getActivePolicy",value:function(){return this.policyEngine.context.activeUserPolicy}},{key:"getPolicy",value:function(e){return this.policyEngine.context.userPolicies[e]}},{key:"getPoliciesTitles",value:function(){var e=this.policyEngine.context.userPolicies,t=[];for(var n in e)t.push(n);return t}},{key:"getTargets",value:function(e){var t=[];for(var n in this.policies[e])t.indexOf(n)===-1&&t.push(n);return t}},{key:"increaseRulePriority",value:function(e,t,n){this.getRuleOfPolicy(e,t).priority=n,this.getRuleOfPolicy(e,n).priority=t,this.policyEngine.context.savePolicies("USER")}},{key:"setVariables",value:function(){return{Date:{title:"<br><h5>Updating date related configurations</h5><p>Incoming communications in the introduced date will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",description:"<p>Date:</p>",input:[["date",[]]]},Domain:{title:"<br><h5>Updating domain configurations</h5><p>Incoming communications from a user whose identity is from the introduced domain allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",description:"<p>Domain:</p>",input:[["form",[]]]},"Group of users":{title:"<br><h5>Updating groups configurations</h5><p>Incoming communications from a user whose identity is in the introduced group will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",description:"<p>Group name:</p>",input:[["select",["group","Select a group:"]]]},"Subscription preferences":{title:"<br><h5>Updating subscriptions configurations</h5><p>The acceptance of subscriptions to your hyperties will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",input:[]},"Time of the day":{title:'<br><h5>Updating time configurations</h5><p>Incoming communications in the introduced timeslot will be blocked, but this can be changed in the preferences page.</p><p>Please introduce a new timeslot in the following format:</p><p class="center-align">&lt;START-HOUR&gt;:&lt;START-MINUTES&gt; to &lt;END-HOUR&gt;:&lt;END-MINUTES&gt;</p><br>',description:"<p>Timeslot:</p>",input:[["form",[]]]},Weekday:{title:"<br><h5>Updating weekday configurations</h5><p>Incoming communications in the introduced weekday will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>",description:"<p>Weekday:</p>",input:[["select",["weekday","Select a weekday:",["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"]]]]}}}},{key:"setAdditionMethods",value:function(){var e=this;return{Date:function(t){var n=t[0],r=e.policyEngine.context.userPolicies;r[n].createRule(t[4],{attribute:"date",operator:"equals",params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},Domain:function(t){var n=t[0],r=e.policyEngine.context.userPolicies;r[n].createRule(t[4],{attribute:"domain",operator:"equals",params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},"Group of users":function(t){var n=t[0],r=e.policyEngine.context.userPolicies;r[n].createRule(t[4],{attribute:"source",operator:"in",params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},"Subscription preferences":function(t){var n=t[0],r=e.policyEngine.context.userPolicies,o="equals";"preauthorised"===t[3]&&(o="in"),r[n].createRule(t[4],{attribute:"subscription",operator:thisOperator,params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},"Time of the day":function(t){var n=t[0],r=e.policyEngine.context.userPolicies;t[3]=t[3].split(" to ");var o=t[3][0].split(":");o=o.join("");var i=t[3][1].split(":");i=i.join(""),r[n].createRule(t[4],{attribute:"time",operator:"between",params:[o,i]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")},Weekday:function(t){var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];t[3]=n.indexOf(t[3]);var r=t[0],o=e.policyEngine.context.userPolicies;o[r].createRule(t[4],{attribute:"weekday",operator:"equals",params:t[3]},t[1],t[2]),e.policyEngine.context.savePolicies("USER")}}}},{key:"setValidationMethods",value:function(){var e=this;return{Date:function(t,n){return e.isValidDate(n)&e.isValidScope(t)},"Group of users":function(t,n){return e.isValidString(n)&e.isValidScope(t)},Domain:function(t,n){return e.isValidDomain(n)&e.isValidScope(t)},Weekday:function(t,n){return!0&e.isValidScope(t)},"Subscription preferences":function(t,n){return e.isValidSubscriptionType(n)&e.isValidScope(t)},"Time of the day":function(t,n){return e.isValidTimeslot(n)&e.isValidScope(t)}}}},{key:"updateActivePolicy",value:function(e){this.policyEngine.context.activeUserPolicy=e,this.policyEngine.context.saveActivePolicy()}},{key:"isValidEmail",value:function(e){var t=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/;return t.test(e)}},{key:"isValidDomain",value:function(e){var t=/[a-z0-9.-]+\.[a-z]{2,3}$/;return t.test(e)}},{key:"isValidString",value:function(e){var t=/[a-z0-9.-]$/;return t.test(e)}},{key:"isValidSubscriptionType",value:function(e){return!0}},{key:"isValidDate",value:function(e){var t=e.split("/"),n=parseInt(t[0]),r=parseInt(t[1]),o=parseInt(t[2]),i=new Date(o,r-1,n),a=i.getFullYear()===o&&i.getMonth()+1===r&&i.getDate()===n,s=(i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear(),new Date),u=(s.getDate()+"/"+(s.getMonth()+1)+"/"+s.getFullYear(),!1);return i.getFullYear()>s.getFullYear()?u=!0:i.getFullYear()==s.getFullYear()&&(i.getMonth()+1>s.getMonth()+1?u=!0:i.getMonth()+1==s.getMonth()+1&&i.getDate()>=s.getDate()&&(u=!0)),a&&u}},{key:"isValidScope",value:function(e){return""!==e}},{key:"isValidTimeslot",value:function(e){if(!e)return!1;var t=e.split(" to "),n=2===t.length;if(!n)return!1;var r=t[0].split(":"),o=t[1].split(":");if(2!==r.length||2!==o.length)return!1;var i=2===r[0].length&&2===r[1].length&&2===o[0].length&&2===o[1].length,a=r[0]==parseInt(r[0],10)&&r[1]==parseInt(r[1],10)&&o[0]==parseInt(o[0],10)&&o[1]==parseInt(o[1],10);return n&&i&&a}},{key:"getFormattedPolicies",value:function(){var e=this.policyEngine.context.userPolicies,t=[];for(var n in e){var r={title:e[n].key,rulesTitles:[],ids:[]};if(0!==e[n].rules.length){e[n].rules=e[n].sortRules();for(var o in e[n].rules){var i=this._getTitle(e[n].rules[o]);r.rulesTitles.push(i),r.ids.push(r.title+":"+e[n].rules[o].priority)}}t.push(r)}return t}},{key:"getRuleOfPolicy",value:function(e,t){var n=this.policyEngine.context.userPolicies,r=n[e];return r.getRuleByPriority(t)}},{key:"_getTitle",value:function(e){var t=e.condition,n=e.decision?"allowed":"blocked",r="global"===e.target?"All identities and hyperties":e.target,o=t.attribute;switch(o){case"date":return"Date "+t.params+" is "+n+" ("+r+")";case"domain":return'Domain "'+t.params+'" is '+n+" ("+r+")";case"source":if("in"===t.operator)return'Group "'+t.params+'" is '+n+" ("+r+")";if("equals"===t.operator)return"User "+t.params+" is "+n+" ("+r+")";case"subscription":if("*"===t.params)return"Subscriptions from all hyperties are "+n+" ("+r+")";if("preauthorised"===t.params)return"Subscriptions from previously authorised hyperties are allowed ("+r+")";case"time":var i=t.params[0][0]+t.params[0][1]+":"+t.params[0][2]+t.params[0][3],a=t.params[1][0]+t.params[1][1]+":"+t.params[1][2]+t.params[1][3];return"Timeslot from "+i+" to "+a+" is "+n+" ("+r+")";case"weekday":var s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=t.params;return'Weekday "'+s[u]+'" is '+n+" ("+r+")";default:return"Rule "+e.priority+" is "+n+" ("+r+")"}}},{key:"getVariables",value:function(){var e=[];for(var t in this.variables)e.push(t);return e}},{key:"getVariableInfo",value:function(e){return this.variables[e]}},{key:"getMyEmails",value:function(){return this.policyEngine.context.getMyEmails()}},{key:"getMyHyperties",value:function(){return this.policyEngine.context.getMyHyperties()}},{key:"setInfo",value:function(e,t,n,r,o,i){if(!this.validation[e](o,n))throw Error("Invalid configuration");this.addition[e]([t,o,i,n,r])}},{key:"getInfo",value:function(e,t){var n=this.policies[e],r={};for(var o in n)n[o].condition===t&&(r=n[o]);if(r!=={}){var i=r.condition.split(" ");return this.policyEngine.getList(e,i[2])}throw Error("Policy <"+t+"> not found!")}},{key:"deleteInfo",value:function(e,t,n,r){var o=[t,n,r];if("member"===e){var i=r.split(" "),a=i[2];o=[t,a,r]}this.deletion[e](o)}},{key:"getGroup",value:function(e,t,n){return this.policyEngine.context.getGroup(e,t,n)}},{key:"getGroups",value:function(){var e=this.policyEngine.context.groups,t={groupsNames:[],members:[],ids:[]};for(var n in e){t.groupsNames.push(n),t.members.push(e[n]);var r=[];for(var o in e[n])r.push(n+"::"+e[n][o]);t.ids.push(r)}return t}},{key:"getGroupsNames",value:function(){return this.policyEngine.context.getGroupsNames()}},{key:"removeFromGroup",value:function(e,t){this.policyEngine.context.removeFromGroup(e,t)}},{key:"updatePolicy",value:function(e,t,n,r){var o=this.policyEngine.context.userPolicies;if(o[e].deleteRule(t),r){var i="*"===r?"equals":"in";o[e].createRule(n,[{attribute:"subscription",opeator:i,params:r}],t.scope,t.target,t.priority)}else o[e].createRule(n,t.condition,t.scope,t.target,t.priority);this.policyEngine.context.savePolicies("USER")}}]),e}();n["default"]=i},{}],19:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function i(e){if(r(this,i),!e)throw Error("graph Connector is not set!");var t="localhost";window.runtime={domain:t},window.runtime={runtime:e},$(".graphConnector-page-show").on("click",function(e){$(".policies-section").addClass("hide"),$(".identities-section").addClass("hide"),$(".graphConnector-section").removeClass("hide")})};n["default"]=o},{}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){e.postMessage({to:"runtime:loadedHyperty",body:t},"*")}function i(e,t){for(var n=void 0,r=0;!n&&r<e.registry.hypertiesList.length;)e.registry.hypertiesList[r].descriptor===t&&(n=e.registry.hypertiesList[r]),r++;return n}var a=e("urijs"),s=r(a),u=e("./admin/IdentitiesGUI"),c=r(u),l=e("./admin/PoliciesGUI"),f=r(l),d=e("./RuntimeFactory"),p=r(d),h=e("./admin/graphConnectorGUI"),y=r(h);try{window.cordova=void 0!==parent.cordova,window.cordova&&(window.open=function(e){return parent.cordova.InAppBrowser.open(e,"_blank","location=no,toolbar=no")})}catch(v){console.log("cordova not supported")}var g=new s["default"](window.location).search(!0),m=g.runtime,_="true"===g.development,b=p["default"].createRuntimeCatalogue(_),w=void 0;b.getRuntimeDescriptor(m).then(function(e){w=e;var t=e.sourcePackageURL;return"/sourcePackage"===t?e.sourcePackage:b.getSourcePackageFromURL(t)}).then(function(e){eval.apply(window,[e.sourceCode]);var t=new Runtime(w,p["default"],window.location.host);window.runtime=t,t.init().then(function(e){new f["default"](t.policyEngine),new y["default"](t.graphConnector);new c["default"](t.identityModule);window.addEventListener("message",function(e){if("core:loadHyperty"===e.data.to){var n=e.data.body.descriptor,r=e.data.body.reuseAddress,a=i(t,n);a?o(e.source,{runtimeHypertyURL:a.hypertyURL}):t.loadHyperty(n,r).then(o.bind(null,e.source))}else"core:loadStub"===e.data.to?t.loadStub(e.data.body.domain).then(function(e){console.log("Stub Loaded: ",e)})["catch"](function(e){console.error("Stub error:",e)}):"core:close"===e.data.to&&t.close().then(e.source.postMessage({to:"runtime:runtimeClosed",body:!0},"*"))["catch"](e.source.postMessage({to:"runtime:runtimeClosed",body:!1},"*"))},!1),window.addEventListener("beforeunload",function(e){t.close()}),parent.postMessage({to:"runtime:installed",body:{}},"*"),console.log("AFTER PARENT")})})},{"./RuntimeFactory":13,"./admin/IdentitiesGUI":16,"./admin/PoliciesGUI":17,"./admin/graphConnectorGUI":19,urijs:9}]},{},[20])(20)});
//# sourceMappingURL=core.js.map

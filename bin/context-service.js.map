{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/runtime-core/dist/minibus.js","node_modules/runtime-core/dist/sandbox.js","src/ContextServiceProvider.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChCA;;AACA;;;;;;AAvBA;;;;;;;;;;;;;;;;;;;;;;AAyBA,KAAK,QAAL,GAAgB,IAAI,iBAAJ,EAAhB;AACA,KAAK,QAAL,CAAc,cAAd,GAA+B,UAAS,GAAT,EAAc;AAC3C,OAAK,WAAL,CAAiB,GAAjB;AACD,CAFD;AAGA,KAAK,gBAAL,CAAsB,SAAtB,EAAiC,UAAS,KAAT,EAAgB;AAC/C,OAAK,QAAL,CAAc,UAAd,CAAyB,MAAM,IAA/B;AACD,CAFD;AAGA,KAAK,gBAAL,CAAsB,OAAtB,EAA+B,UAAS,MAAT,EAAiB;AAC9C,QAAM,MAAN;AACD,CAFD;;AAIA,KAAK,SAAL,GAAiB,IAAI,wBAAJ,CAAoB,KAAK,QAAzB,CAAjB;AACA,KAAK,SAAL,CAAe,OAAf,GAAyB,UAAS,GAAT,EAAc,UAAd,EAA0B,MAA1B,EAAkC,OAAlC,EAA2C;AAClE,UAAQ,GAAR,CAAY,yCAAZ,EAAuD,OAAvD;AACA,MAAI;AACF,SAAK,KAAL,CAAW,IAAX,EAAiB,CAAC,UAAD,CAAjB;;AAEA,QAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAClC,aAAO,SAAS,GAAT,EAAc,KAAK,QAAnB,EAA6B,MAA7B,EAAqC,OAArC,CAAP;AACD;;AAED,QAAI,OAAO,SAAS,OAAhB,KAA4B,UAAhC,EAA4C;AAC1C,aAAO,SAAS,OAAT,CAAiB,GAAjB,EAAsB,KAAK,QAA3B,EAAqC,MAArC,EAA6C,OAA7C,CAAP;AACD;AAEF,GAXD,CAWE,OAAO,KAAP,EAAc;AACd,YAAQ,KAAR,CAAc,sCAAd,EAAsD,KAAtD;AACA,UAAM,KAAK,SAAL,CAAe,MAAM,OAArB,CAAN;AACD;AACF,CAjBD","file":"context-service.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// version: 0.13.0\n// date: Fri Aug 31 2018 09:24:53 GMT+0100 (Western European Summer Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n// version: 0.13.0\n// date: Fri Aug 31 2018 09:24:53 GMT+0100 (Western European Summer Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"minibus\",[],e):\"object\"==typeof exports?exports.minibus=e():t.minibus=e()}(\"undefined\"!=typeof self?self:this,function(){return function(t){function __webpack_require__(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var e={};return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,\"a\",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=171)}([function(t,e){var n=t.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=n)},function(t,e){var n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(t,e,n){var r=n(30)(\"wks\"),o=n(21),i=n(1).Symbol,u=\"function\"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)(\"Symbol.\"+t))}).store=r},function(t,e,n){\"use strict\";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},function(t,e,n){\"use strict\";e.__esModule=!0;var r=n(60),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}()},function(t,e,n){var r=n(1),o=n(0),i=n(18),u=n(11),s=n(10),c=function(t,e,n){var f,a,l,p=t&c.F,v=t&c.G,d=t&c.S,h=t&c.P,y=t&c.B,_=t&c.W,b=v?o:o[e]||(o[e]={}),g=b.prototype,m=v?r:d?r[e]:(r[e]||{}).prototype;v&&(n=e);for(f in n)(a=!p&&m&&void 0!==m[f])&&s(b,f)||(l=a?m[f]:n[f],b[f]=v&&\"function\"!=typeof m[f]?n[f]:y&&a?i(l,r):_&&m[f]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):h&&\"function\"==typeof l?i(Function.call,l):l,h&&((b.virtual||(b.virtual={}))[f]=l,t&c.R&&g&&!g[f]&&u(g,f,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(9);t.exports=function(t){if(!r(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e,n){var r=n(7),o=n(41),i=n(28),u=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(8),o=n(20);t.exports=n(6)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(56),o=n(25);t.exports=function(t){return r(o(t))}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=!0},function(t,e){t.exports={}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){t.exports={default:n(88),__esModule:!0}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(42),o=n(31);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+r).toString(36))}},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,n){var r=n(8).f,o=n(10),i=n(2)(\"toStringTag\");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e,n){t.exports={default:n(102),__esModule:!0}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if(\"function\"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e,n){var r=n(30)(\"keys\"),o=n(21);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(0),o=n(1),i=o[\"__core-js_shared__\"]||(o[\"__core-js_shared__\"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})(\"versions\",[]).push({version:r.version,mode:n(14)?\"pure\":\"global\",copyright:\"© 2018 Denis Pushkarev (zloirock.ru)\"})},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e,n){var r=n(9),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(25);t.exports=function(t){return Object(r(t))}},function(t,e,n){\"use strict\";e.__esModule=!0;var r=n(53),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!==(void 0===e?\"undefined\":(0,o.default)(e))&&\"function\"!=typeof e?t:e}},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(104),o=_interopRequireDefault(r),i=n(108),u=_interopRequireDefault(i),s=n(53),c=_interopRequireDefault(s);e.default=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===e?\"undefined\":(0,c.default)(e)));t.prototype=(0,u.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){var r,o;!function(i,u){\"use strict\";r=u,void 0!==(o=\"function\"==typeof r?r.call(e,n,e,t):r)&&(t.exports=o)}(0,function(){\"use strict\";function bindMethod(t,e){var n=t[e];if(\"function\"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function realMethod(n){return\"debug\"===n&&(n=\"log\"),typeof console!==e&&(void 0!==console[n]?bindMethod(console,n):void 0!==console.log?bindMethod(console,\"log\"):t)}function replaceLoggingMethods(e,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<e?t:this.methodFactory(i,e,r)}this.log=this.debug}function enableLoggingWhenConsoleArrives(t,n,r){return function(){typeof console!==e&&(replaceLoggingMethods.call(this,n,r),this[t].apply(this,arguments))}}function defaultMethodFactory(t,e,n){return realMethod(t)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(t,r,o){function persistLevelIfPossible(t){var r=(n[t]||\"silent\").toUpperCase();if(typeof window!==e){try{return void(window.localStorage[s]=r)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+\"=\"+r+\";\"}catch(t){}}}function getPersistedLevel(){var t;if(typeof window!==e){try{t=window.localStorage[s]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(s)+\"=\");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===u.levels[t]&&(t=void 0),t}}var i,u=this,s=\"loglevel\";t&&(s+=\":\"+t),u.name=t,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=o||defaultMethodFactory,u.getLevel=function(){return i},u.setLevel=function(n,r){if(\"string\"==typeof n&&void 0!==u.levels[n.toUpperCase()]&&(n=u.levels[n.toUpperCase()]),!(\"number\"==typeof n&&n>=0&&n<=u.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+n;if(i=n,!1!==r&&persistLevelIfPossible(n),replaceLoggingMethods.call(u,n,t),typeof console===e&&n<u.levels.SILENT)return\"No console available for logging\"},u.setDefaultLevel=function(t){getPersistedLevel()||u.setLevel(t,!1)},u.enableAll=function(t){u.setLevel(u.levels.TRACE,t)},u.disableAll=function(t){u.setLevel(u.levels.SILENT,t)};var c=getPersistedLevel();null==c&&(c=null==r?\"WARN\":r),u.setLevel(c,!1)}var t=function(){},e=\"undefined\",n=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],r=new Logger,o={};r.getLogger=function(t){if(\"string\"!=typeof t||\"\"===t)throw new TypeError(\"You must supply a name when creating a logger.\");var e=o[t];return e||(e=o[t]=new Logger(t,r.getLevel(),r.methodFactory)),e};var i=typeof window!==e?window.log:void 0;return r.noConflict=function(){return typeof window!==e&&window.log===r&&(window.log=i),r},r.getLoggers=function(){return o},r})},function(t,e,n){e.f=n(2)},function(t,e,n){var r=n(1),o=n(0),i=n(14),u=n(37),s=n(8).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});\"_\"==t.charAt(0)||t in e||s(e,t,{value:u.f(t)})}},,function(t,e,n){var r=n(7),o=n(72),i=n(31),u=n(29)(\"IE_PROTO\"),s=function(){},c=function(){var t,e=n(32)(\"iframe\"),r=i.length;for(e.style.display=\"none\",n(57).appendChild(e),e.src=\"javascript:\",t=e.contentWindow.document,t.open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[u]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){t.exports=!n(6)&&!n(13)(function(){return 7!=Object.defineProperty(n(32)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(10),o=n(12),i=n(61)(!1),u=n(29)(\"IE_PROTO\");t.exports=function(t,e){var n,s=o(t),c=0,f=[];for(n in s)n!=u&&r(s,n)&&f.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(f,n)||f.push(n));return f}},function(t,e){e.f=Object.getOwnPropertySymbols},,function(t,e,n){\"use strict\";var r=n(70)(!0);n(51)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(24),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){n(73);for(var r=n(1),o=n(11),i=n(15),u=n(2)(\"toStringTag\"),s=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),c=0;c<s.length;c++){var f=s[c],a=r[f],l=a&&a.prototype;l&&!l[u]&&o(l,u,f),i[f]=i.Array}},function(t,e,n){\"use strict\";function PromiseCapability(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError(\"Bad Promise constructor\");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}var r=n(22);t.exports.f=function(t){return new PromiseCapability(t)}},function(t,e,n){var r=n(5),o=n(0),i=n(13);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*i(function(){n(1)}),\"Object\",u)}},function(t,e,n){var r=n(27),o=n(20),i=n(12),u=n(28),s=n(10),c=n(41),f=Object.getOwnPropertyDescriptor;e.f=n(6)?f:function(t,e){if(t=i(t),e=u(e,!0),c)try{return f(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){\"use strict\";var r=n(14),o=n(5),i=n(52),u=n(11),s=n(15),c=n(71),f=n(23),a=n(58),l=n(2)(\"iterator\"),p=!([].keys&&\"next\"in[].keys()),v=function(){return this};t.exports=function(t,e,n,d,h,y,_){c(n,e,d);var b,g,m,w=function(t){if(!p&&t in P)return P[t];switch(t){case\"keys\":case\"values\":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+\" Iterator\",O=\"values\"==h,M=!1,P=t.prototype,S=P[l]||P[\"@@iterator\"]||h&&P[h],L=S||w(h),j=h?O?w(\"entries\"):L:void 0,k=\"Array\"==e?P.entries||S:S;if(k&&(m=a(k.call(new t)))!==Object.prototype&&m.next&&(f(m,x,!0),r||\"function\"==typeof m[l]||u(m,l,v)),O&&S&&\"values\"!==S.name&&(M=!0,L=function(){return S.call(this)}),r&&!_||!p&&!M&&P[l]||u(P,l,L),s[e]=L,s[x]=v,h)if(b={values:O?L:w(\"values\"),keys:y?L:w(\"keys\"),entries:j},_)for(g in b)g in P||i(P,g,b[g]);else o(o.P+o.F*(p||M),e,b);return b}},function(t,e,n){t.exports=n(11)},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(76),o=_interopRequireDefault(r),i=n(78),u=_interopRequireDefault(i),s=\"function\"==typeof u.default&&\"symbol\"==typeof o.default?function(t){return typeof t}:function(t){return t&&\"function\"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?\"symbol\":typeof t};e.default=\"function\"==typeof u.default&&\"symbol\"===s(o.default)?function(t){return void 0===t?\"undefined\":s(t)}:function(t){return t&&\"function\"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?\"symbol\":void 0===t?\"undefined\":s(t)}},function(t,e,n){var r=n(42),o=n(31).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e){},function(t,e,n){var r=n(16);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==r(t)?t.split(\"\"):Object(t)}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(10),o=n(33),i=n(29)(\"IE_PROTO\"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(16),o=n(2)(\"toStringTag\"),i=\"Arguments\"==r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(n=u(e=Object(t),o))?n:i?r(e):\"Object\"==(s=r(e))&&\"function\"==typeof e.callee?\"Arguments\":s}},function(t,e,n){t.exports={default:n(67),__esModule:!0}},function(t,e,n){var r=n(12),o=n(46),i=n(62);t.exports=function(t){return function(e,n,u){var s,c=r(e),f=o(c.length),a=i(u,f);if(t&&n!=n){for(;f>a;)if((s=c[a++])!=s)return!0}else for(;f>a;a++)if((t||a in c)&&c[a]===n)return t||a||0;return!t&&-1}}},function(t,e,n){var r=n(24),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(7),o=n(22),i=n(2)(\"species\");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||void 0==(n=r(u)[i])?e:o(n)}},function(t,e,n){var r,o,i,u=n(18),s=n(94),c=n(57),f=n(32),a=n(1),l=a.process,p=a.setImmediate,v=a.clearImmediate,d=a.MessageChannel,h=a.Dispatch,y=0,_={},b=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},g=function(t){b.call(t.data)};p&&v||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++y]=function(){s(\"function\"==typeof t?t:Function(t),e)},r(y),y},v=function(t){delete _[t]},\"process\"==n(16)(l)?r=function(t){l.nextTick(u(b,t,1))}:h&&h.now?r=function(t){h.now(u(b,t,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=g,r=u(i.postMessage,i,1)):a.addEventListener&&\"function\"==typeof postMessage&&!a.importScripts?(r=function(t){a.postMessage(t+\"\",\"*\")},a.addEventListener(\"message\",g,!1)):r=\"onreadystatechange\"in f(\"script\")?function(t){c.appendChild(f(\"script\")).onreadystatechange=function(){c.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:p,clear:v}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(7),o=n(9),i=n(48);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){n(68);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(5);r(r.S+r.F*!n(6),\"Object\",{defineProperty:n(8).f})},,function(t,e,n){var r=n(24),o=n(25);t.exports=function(t){return function(e,n){var i,u,s=String(o(e)),c=r(n),f=s.length;return c<0||c>=f?t?\"\":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===f||(u=s.charCodeAt(c+1))<56320||u>57343?t?s.charAt(c):i:t?s.slice(c,c+2):u-56320+(i-55296<<10)+65536)}}},function(t,e,n){\"use strict\";var r=n(40),o=n(20),i=n(23),u={};n(11)(u,n(2)(\"iterator\"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+\" Iterator\")}},function(t,e,n){var r=n(8),o=n(7),i=n(19);t.exports=n(6)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),s=u.length,c=0;s>c;)r.f(t,n=u[c++],e[n]);return t}},function(t,e,n){\"use strict\";var r=n(74),o=n(75),i=n(15),u=n(12);t.exports=n(51)(Array,\"Array\",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):\"keys\"==e?o(0,n):\"values\"==e?o(0,t[n]):o(0,[n,t[n]])},\"values\"),i.Arguments=i.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(77),__esModule:!0}},function(t,e,n){n(45),n(47),t.exports=n(37).f(\"iterator\")},function(t,e,n){t.exports={default:n(79),__esModule:!0}},function(t,e,n){n(80),n(55),n(85),n(86),t.exports=n(0).Symbol},function(t,e,n){\"use strict\";var r=n(1),o=n(10),i=n(6),u=n(5),s=n(52),c=n(81).KEY,f=n(13),a=n(30),l=n(23),p=n(21),v=n(2),d=n(37),h=n(38),y=n(82),_=n(83),b=n(7),g=n(9),m=n(12),w=n(28),x=n(20),O=n(40),M=n(84),P=n(50),S=n(8),L=n(19),j=P.f,k=S.f,E=M.f,R=r.Symbol,T=r.JSON,C=T&&T.stringify,A=v(\"_hidden\"),D=v(\"toPrimitive\"),F={}.propertyIsEnumerable,q=a(\"symbol-registry\"),I=a(\"symbols\"),N=a(\"op-symbols\"),B=Object.prototype,W=\"function\"==typeof R,G=r.QObject,U=!G||!G.prototype||!G.prototype.findChild,V=i&&f(function(){return 7!=O(k({},\"a\",{get:function(){return k(this,\"a\",{value:7}).a}})).a})?function(t,e,n){var r=j(B,e);r&&delete B[e],k(t,e,n),r&&t!==B&&k(B,e,r)}:k,H=function(t){var e=I[t]=O(R.prototype);return e._k=t,e},K=W&&\"symbol\"==typeof R.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof R},J=function(t,e,n){return t===B&&J(N,e,n),b(t),e=w(e,!0),b(n),o(I,e)?(n.enumerable?(o(t,A)&&t[A][e]&&(t[A][e]=!1),n=O(n,{enumerable:x(0,!1)})):(o(t,A)||k(t,A,x(1,{})),t[A][e]=!0),V(t,e,n)):k(t,e,n)},z=function(t,e){b(t);for(var n,r=y(e=m(e)),o=0,i=r.length;i>o;)J(t,n=r[o++],e[n]);return t},Y=function(t,e){return void 0===e?O(t):z(O(t),e)},Q=function(t){var e=F.call(this,t=w(t,!0));return!(this===B&&o(I,t)&&!o(N,t))&&(!(e||!o(this,t)||!o(I,t)||o(this,A)&&this[A][t])||e)},X=function(t,e){if(t=m(t),e=w(e,!0),t!==B||!o(I,e)||o(N,e)){var n=j(t,e);return!n||!o(I,e)||o(t,A)&&t[A][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=E(m(t)),r=[],i=0;n.length>i;)o(I,e=n[i++])||e==A||e==c||r.push(e);return r},$=function(t){for(var e,n=t===B,r=E(n?N:m(t)),i=[],u=0;r.length>u;)!o(I,e=r[u++])||n&&!o(B,e)||i.push(I[e]);return i};W||(R=function(){if(this instanceof R)throw TypeError(\"Symbol is not a constructor!\");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(N,n),o(this,A)&&o(this[A],t)&&(this[A][t]=!1),V(this,t,x(1,n))};return i&&U&&V(B,t,{configurable:!0,set:e}),H(t)},s(R.prototype,\"toString\",function(){return this._k}),P.f=X,S.f=J,n(54).f=M.f=Z,n(27).f=Q,n(43).f=$,i&&!n(14)&&s(B,\"propertyIsEnumerable\",Q,!0),d.f=function(t){return H(v(t))}),u(u.G+u.W+u.F*!W,{Symbol:R});for(var tt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),et=0;tt.length>et;)v(tt[et++]);for(var nt=L(v.store),rt=0;nt.length>rt;)h(nt[rt++]);u(u.S+u.F*!W,\"Symbol\",{for:function(t){return o(q,t+=\"\")?q[t]:q[t]=R(t)},keyFor:function(t){if(!K(t))throw TypeError(t+\" is not a symbol!\");for(var e in q)if(q[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),u(u.S+u.F*!W,\"Object\",{create:Y,defineProperty:J,defineProperties:z,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),T&&u(u.S+u.F*(!W||f(function(){var t=R();return\"[null]\"!=C([t])||\"{}\"!=C({a:t})||\"{}\"!=C(Object(t))})),\"JSON\",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!K(t))return _(e)||(e=function(t,e){if(\"function\"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,C.apply(T,r)}}),R.prototype[D]||n(11)(R.prototype,D,R.prototype.valueOf),l(R,\"Symbol\"),l(Math,\"Math\",!0),l(r.JSON,\"JSON\",!0)},function(t,e,n){var r=n(21)(\"meta\"),o=n(9),i=n(10),u=n(8).f,s=0,c=Object.isExtensible||function(){return!0},f=!n(13)(function(){return c(Object.preventExtensions({}))}),a=function(t){u(t,r,{value:{i:\"O\"+ ++s,w:{}}})},l=function(t,e){if(!o(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!i(t,r)){if(!c(t))return\"F\";if(!e)return\"E\";a(t)}return t[r].i},p=function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;a(t)}return t[r].w},v=function(t){return f&&d.NEED&&c(t)&&!i(t,r)&&a(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:v}},function(t,e,n){var r=n(19),o=n(43),i=n(27);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,s=n(t),c=i.f,f=0;s.length>f;)c.call(t,u=s[f++])&&e.push(u);return e}},function(t,e,n){var r=n(16);t.exports=Array.isArray||function(t){return\"Array\"==r(t)}},function(t,e,n){var r=n(12),o=n(54).f,i={}.toString,u=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&\"[object Window]\"==i.call(t)?s(t):o(r(t))}},function(t,e,n){n(38)(\"asyncIterator\")},function(t,e,n){n(38)(\"observable\")},function(t,e,n){var r=n(59),o=n(2)(\"iterator\"),i=n(15);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t[\"@@iterator\"]||i[r(t)]}},function(t,e,n){n(55),n(45),n(47),n(89),n(100),n(101),t.exports=n(0).Promise},function(t,e,n){\"use strict\";var r,o,i,u,s=n(14),c=n(1),f=n(18),a=n(59),l=n(5),p=n(9),v=n(22),d=n(90),h=n(91),y=n(63),_=n(64).set,b=n(95)(),g=n(48),m=n(65),w=n(96),x=n(66),O=c.TypeError,M=c.process,P=M&&M.versions,S=P&&P.v8||\"\",L=c.Promise,j=\"process\"==a(M),k=function(){},E=o=g.f,R=!!function(){try{var t=L.resolve(1),e=(t.constructor={})[n(2)(\"species\")]=function(t){t(k,k)};return(j||\"function\"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==S.indexOf(\"6.6\")&&-1===w.indexOf(\"Chrome/66\")}catch(t){}}(),T=function(t){var e;return!(!p(t)||\"function\"!=typeof(e=t.then))&&e},C=function(t,e){if(!t._n){t._n=!0;var n=t._c;b(function(){for(var r=t._v,o=1==t._s,i=0;n.length>i;)!function(e){var n,i,u,s=o?e.ok:e.fail,c=e.resolve,f=e.reject,a=e.domain;try{s?(o||(2==t._h&&F(t),t._h=1),!0===s?n=r:(a&&a.enter(),n=s(r),a&&(a.exit(),u=!0)),n===e.promise?f(O(\"Promise-chain cycle\")):(i=T(n))?i.call(n,c,f):c(n)):f(r)}catch(t){a&&!u&&a.exit(),f(t)}}(n[i++]);t._c=[],t._n=!1,e&&!t._h&&A(t)})}},A=function(t){_.call(c,function(){var e,n,r,o=t._v,i=D(t);if(i&&(e=m(function(){j?M.emit(\"unhandledRejection\",o,t):(n=c.onunhandledrejection)?n({promise:t,reason:o}):(r=c.console)&&r.error&&r.error(\"Unhandled promise rejection\",o)}),t._h=j||D(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){_.call(c,function(){var e;j?M.emit(\"rejectionHandled\",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})})},q=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw O(\"Promise can't be resolved itself\");(e=T(t))?b(function(){var r={_w:n,_d:!1};try{e.call(t,f(I,r,1),f(q,r,1))}catch(t){q.call(r,t)}}):(n._v=t,n._s=1,C(n,!1))}catch(t){q.call({_w:n,_d:!1},t)}}};R||(L=function(t){d(this,L,\"Promise\",\"_h\"),v(t),r.call(this);try{t(f(I,this,1),f(q,this,1))}catch(t){q.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(97)(L.prototype,{then:function(t,e){var n=E(y(this,L));return n.ok=\"function\"!=typeof t||t,n.fail=\"function\"==typeof e&&e,n.domain=j?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=f(I,t,1),this.reject=f(q,t,1)},g.f=E=function(t){return t===L||t===u?new i(t):o(t)}),l(l.G+l.W+l.F*!R,{Promise:L}),n(23)(L,\"Promise\"),n(98)(\"Promise\"),u=n(0).Promise,l(l.S+l.F*!R,\"Promise\",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(s||!R),\"Promise\",{resolve:function(t){return x(s&&this===u?L:this,t)}}),l(l.S+l.F*!(R&&n(99)(function(t){L.all(t).catch(k)})),\"Promise\",{all:function(t){var e=this,n=E(e),r=n.resolve,o=n.reject,i=m(function(){var n=[],i=0,u=1;h(t,!1,function(t){var s=i++,c=!1;n.push(void 0),u++,e.resolve(t).then(function(t){c||(c=!0,n[s]=t,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=E(e),r=n.reject,o=m(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+\": incorrect invocation!\");return t}},function(t,e,n){var r=n(18),o=n(92),i=n(93),u=n(7),s=n(46),c=n(87),f={},a={},e=t.exports=function(t,e,n,l,p){var v,d,h,y,_=p?function(){return t}:c(t),b=r(n,l,e?2:1),g=0;if(\"function\"!=typeof _)throw TypeError(t+\" is not iterable!\");if(i(_)){for(v=s(t.length);v>g;g++)if((y=e?b(u(d=t[g])[0],d[1]):b(t[g]))===f||y===a)return y}else for(h=_.call(t);!(d=h.next()).done;)if((y=o(h,b,d.value,e))===f||y===a)return y};e.BREAK=f,e.RETURN=a},function(t,e,n){var r=n(7);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(15),o=n(2)(\"iterator\"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(1),o=n(64).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,s=r.Promise,c=\"process\"==n(16)(u);t.exports=function(){var t,e,n,f=function(){var r,o;for(c&&(r=u.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(c)n=function(){u.nextTick(f)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var a=s.resolve(void 0);n=function(){a.then(f)}}else n=function(){o.call(r,f)};else{var l=!0,p=document.createTextNode(\"\");new i(f).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var r=n(1),o=r.navigator;t.exports=o&&o.userAgent||\"\"},function(t,e,n){var r=n(11);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},function(t,e,n){\"use strict\";var r=n(1),o=n(0),i=n(8),u=n(6),s=n(2)(\"species\");t.exports=function(t){var e=\"function\"==typeof o[t]?o[t]:r[t];u&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(2)(\"iterator\"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(t){}return n}},function(t,e,n){\"use strict\";var r=n(5),o=n(0),i=n(1),u=n(63),s=n(66);r(r.P+r.R,\"Promise\",{finally:function(t){var e=u(this,o.Promise||i.Promise),n=\"function\"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){\"use strict\";var r=n(5),o=n(48),i=n(65);r(r.S,\"Promise\",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(103),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var r=n(33),o=n(58);n(49)(\"getPrototypeOf\",function(){return function(t){return o(r(t))}})},function(t,e,n){t.exports={default:n(105),__esModule:!0}},function(t,e,n){n(106),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var r=n(5);r(r.S,\"Object\",{setPrototypeOf:n(107).set})},function(t,e,n){var r=n(9),o=n(7),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,e,r){try{r=n(18)(Function.call,n(50).f(Object.prototype,\"__proto__\").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){t.exports={default:n(109),__esModule:!0}},function(t,e,n){n(110);var r=n(0).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(5);r(r.S,\"Object\",{create:n(40)})},,,,,,,,,,,,,,,,function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(26),o=_interopRequireDefault(r),i=n(3),u=_interopRequireDefault(i),s=n(4),c=_interopRequireDefault(s),f=n(34),a=_interopRequireDefault(f),l=n(35),p=_interopRequireDefault(l),v=n(127),d=_interopRequireDefault(v),h=function(t){function MiniBus(){return(0,u.default)(this,MiniBus),(0,a.default)(this,(MiniBus.__proto__||(0,o.default)(MiniBus)).call(this))}return(0,p.default)(MiniBus,t),(0,c.default)(MiniBus,[{key:\"postMessage\",value:function(t,e,n){var r=this;return r._genId(t),r._responseCallback(t,e,n),r._onPostMessage(t),t.id}},{key:\"_onMessage\",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?(e._publishOn(n,t),t.to.startsWith(\"hyperty\")||e._publishOnDefault(t)):e._publishOnDefault(t)}}}]),MiniBus}(d.default);e.default=h,t.exports=e.default},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(17),o=_interopRequireDefault(r),i=n(3),u=_interopRequireDefault(i),s=n(4),c=_interopRequireDefault(s),f=n(36),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(f),l=a.getLogger(\"Bus\"),p=function(){function Bus(){(0,u.default)(this,Bus);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=3e4,t._responseCallbacks={},t._registerExternalListener()}return(0,c.default)(Bus,[{key:\"addListener\",value:function(t,e){var n=this,r=new v(n._subscriptions,t,e),o=n._subscriptions[t];return o||(o=[],n._subscriptions[t]=o),o.push(r),r}},{key:\"addResponseListener\",value:function(t,e,n){this._responseCallbacks[t+e]=n}},{key:\"removeResponseListener\",value:function(t,e){delete this._responseCallbacks[t+e]}},{key:\"removeAllListenersOf\",value:function(t){delete this._subscriptions[t]}},{key:\"bind\",value:function(t,e,n){var r=this,o=this;return{thisListener:o.addListener(t,function(t){n.postMessage(t)}),targetListener:n.addListener(e,function(t){o.postMessage(t)}),unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:\"_publishOnDefault\",value:function(t){var e=this._subscriptions[\"*\"];e&&this._publishOn(e,t)}},{key:\"_publishOn\",value:function(t,e){t.forEach(function(t){t._callback(e)})}},{key:\"_responseCallback\",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;if(e){var o=t.from+t.id;r._responseCallbacks[o]=e,n&&setTimeout(function(){var e=r._responseCallbacks[o];if(delete r._responseCallbacks[o],e){e({id:t.id,type:\"response\",body:{code:408,desc:\"Response timeout!\",value:t}})}},r._responseTimeOut)}}},{key:\"_onResponse\",value:function(t){var e=this;if(\"response\"===t.type){var n=t.to+t.id,r=e._responseCallbacks[n];if(t.body.code>=200&&delete e._responseCallbacks[n],r)return r(t),!0}return!1}},{key:\"_onMessage\",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?e._publishOn(n,t):e._publishOnDefault(t)}}},{key:\"_genId\",value:function(t){t.id&&0!==t.id||(this._msgId++,t.id=this._msgId)}},{key:\"postMessage\",value:function(t,e){}},{key:\"postMessageWithRetries\",value:function(t,e,n){var r=this,i=0,u=function(){return new o.default(function(e,o){r.postMessage(t,function(r){408===r.body.code||500===r.body.code?o():(l.info(\"[Bus.postMessageWithRetries] msg delivered: \",t),n(r),e())})})};!function tryAgain(){u().then(function(){},function(){if(l.warn(\"[Bus.postMessageWithRetries] Message Bounced (retry \"+i+\"): '\",t),!(i++<e)){var n=\"[Error] Message Bounced (delivery attempts \"+e+\"): '\";throw new Error(n+t)}tryAgain()})}()}},{key:\"_onPostMessage\",value:function(t){}},{key:\"_registerExternalListener\",value:function(){}}]),Bus}(),v=function(){function MsgListener(t,e,n){(0,u.default)(this,MsgListener);var r=this;r._subscriptions=t,r._url=e,r._callback=n}return(0,c.default)(MsgListener,[{key:\"remove\",value:function(){var t=this,e=t._subscriptions[t._url];if(e){var n=e.indexOf(t);e.splice(n,1),0===e.length&&delete t._subscriptions[t._url]}}},{key:\"url\",get:function(){return this._url}}]),MsgListener}();e.default=p,t.exports=e.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(126),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default,t.exports=e.default}])});","// version: 0.13.0\n// date: Fri Aug 31 2018 09:24:53 GMT+0100 (Western European Summer Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n// version: 0.13.0\n// date: Fri Aug 31 2018 09:24:53 GMT+0100 (Western European Summer Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"sandbox\",[],t):\"object\"==typeof exports?exports.sandbox=t():e.sandbox=t()}(\"undefined\"!=typeof self?self:this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=151)}([function(e,t){var r=e.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=r)},function(e,t){var r=e.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=r)},function(e,t,r){var n=r(30)(\"wks\"),o=r(21),i=r(1).Symbol,a=\"function\"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)(\"Symbol.\"+e))}).store=n},function(e,t,r){\"use strict\";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(60),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}()},function(e,t,r){var n=r(1),o=r(0),i=r(18),a=r(11),s=r(10),u=function(e,t,r){var c,l,d,f=e&u.F,p=e&u.G,y=e&u.S,v=e&u.P,h=e&u.B,_=e&u.W,b=p?o:o[t]||(o[t]={}),m=b.prototype,g=p?n:y?n[t]:(n[t]||{}).prototype;p&&(r=t);for(c in r)(l=!f&&g&&void 0!==g[c])&&s(b,c)||(d=l?g[c]:r[c],b[c]=p&&\"function\"!=typeof g[c]?r[c]:h&&l?i(d,n):_&&g[c]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):v&&\"function\"==typeof d?i(Function.call,d):d,v&&((b.virtual||(b.virtual={}))[c]=d,e&u.R&&m&&!m[c]&&a(m,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){e.exports=!r(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(e,t,r){var n=r(9);e.exports=function(e){if(!n(e))throw TypeError(e+\" is not an object!\");return e}},function(e,t,r){var n=r(7),o=r(41),i=r(28),a=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if(\"get\"in r||\"set\"in r)throw TypeError(\"Accessors not supported!\");return\"value\"in r&&(e[t]=r.value),e}},function(e,t){e.exports=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(8),o=r(20);e.exports=r(6)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(56),o=r(25);e.exports=function(e){return n(o(e))}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){e.exports={default:r(88),__esModule:!0}},function(e,t,r){var n=r(22);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(42),o=r(31);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return\"Symbol(\".concat(void 0===e?\"\":e,\")_\",(++r+n).toString(36))}},function(e,t){e.exports=function(e){if(\"function\"!=typeof e)throw TypeError(e+\" is not a function!\");return e}},function(e,t,r){var n=r(8).f,o=r(10),i=r(2)(\"toStringTag\");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError(\"Can't call method on  \"+e);return e}},function(e,t,r){e.exports={default:r(102),__esModule:!0}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(9);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&\"function\"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if(\"function\"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&\"function\"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError(\"Can't convert object to primitive value\")}},function(e,t,r){var n=r(30)(\"keys\"),o=r(21);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,r){var n=r(0),o=r(1),i=o[\"__core-js_shared__\"]||(o[\"__core-js_shared__\"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:n.version,mode:r(14)?\"pure\":\"global\",copyright:\"© 2018 Denis Pushkarev (zloirock.ru)\"})},function(e,t){e.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(e,t,r){var n=r(9),o=r(1).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,r){var n=r(25);e.exports=function(e){return Object(n(e))}},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(53),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!==(void 0===t?\"undefined\":(0,o.default)(t))&&\"function\"!=typeof t?e:t}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(104),o=_interopRequireDefault(n),i=r(108),a=_interopRequireDefault(i),s=r(53),u=_interopRequireDefault(s);t.default=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===t?\"undefined\":(0,u.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,r){var n,o;!function(i,a){\"use strict\";n=a,void 0!==(o=\"function\"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o)}(0,function(){\"use strict\";function bindMethod(e,t){var r=e[t];if(\"function\"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function realMethod(r){return\"debug\"===r&&(r=\"log\"),typeof console!==t&&(void 0!==console[r]?bindMethod(console,r):void 0!==console.log?bindMethod(console,\"log\"):e)}function replaceLoggingMethods(t,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<t?e:this.methodFactory(i,t,n)}this.log=this.debug}function enableLoggingWhenConsoleArrives(e,r,n){return function(){typeof console!==t&&(replaceLoggingMethods.call(this,r,n),this[e].apply(this,arguments))}}function defaultMethodFactory(e,t,r){return realMethod(e)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(e,n,o){function persistLevelIfPossible(e){var n=(r[e]||\"silent\").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[s]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+\"=\"+n+\";\"}catch(e){}}}function getPersistedLevel(){var e;if(typeof window!==t){try{e=window.localStorage[s]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(s)+\"=\");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}var i,a=this,s=\"loglevel\";e&&(s+=\":\"+e),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||defaultMethodFactory,a.getLevel=function(){return i},a.setLevel=function(r,n){if(\"string\"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!(\"number\"==typeof r&&r>=0&&r<=a.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+r;if(i=r,!1!==n&&persistLevelIfPossible(r),replaceLoggingMethods.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return\"No console available for logging\"},a.setDefaultLevel=function(e){getPersistedLevel()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var u=getPersistedLevel();null==u&&(u=null==n?\"WARN\":n),a.setLevel(u,!1)}var e=function(){},t=\"undefined\",r=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],n=new Logger,o={};n.getLogger=function(e){if(\"string\"!=typeof e||\"\"===e)throw new TypeError(\"You must supply a name when creating a logger.\");var t=o[e];return t||(t=o[e]=new Logger(e,n.getLevel(),n.methodFactory)),t};var i=typeof window!==t?window.log:void 0;return n.noConflict=function(){return typeof window!==t&&window.log===n&&(window.log=i),n},n.getLoggers=function(){return o},n})},function(e,t,r){t.f=r(2)},function(e,t,r){var n=r(1),o=r(0),i=r(14),a=r(37),s=r(8).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});\"_\"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function divideURL(e){function recurse(e){var t=/([a-zA-Z-]*)(:\\/\\/(?:\\.)?|:)([-a-zA-Z0-9@:%._+~#=]{2,256})([-a-zA-Z0-9@:%._+~#=\\/]*)/gi;return e.replace(t,\"$1,$3,$4\").split(\",\")}var t=recurse(e);if(t[0]===e&&!t[0].includes(\"@\")){return{type:\"\",domain:e,identity:\"\"}}if(t[0]===e&&t[0].includes(\"@\")){t=recurse((t[0]===e?\"smtp\":t[0])+\"://\"+t[0])}return t[1].includes(\"@\")&&(t[2]=t[0]+\"://\"+t[1],t[1]=t[1].substr(t[1].indexOf(\"@\")+1)),{type:t[0],domain:t[1],identity:t[2]}}function emptyObject(e){return!((0,a.default)(e).length>0)}function secondsSinceEpoch(){return Math.floor(Date.now()/1e3)}function deepClone(e){if(e)return JSON.parse((0,o.default)(e))}function removePathFromURL(e){var t=e.split(\"/\");return t[0]+\"//\"+t[2]+\"/\"+t[3]}function getUserURLFromEmail(e){var t=e.indexOf(\"@\");return\"user://\"+e.substring(t+1,e.length)+\"/\"+e.substring(0,t)}function getUserEmailFromURL(e){var t=divideURL(e);return t.identity.replace(\"/\",\"\")+\"@\"+t.domain}function convertToUserURL(e){if(\"user://\"===e.substring(0,7)){var t=divideURL(e);if(t.domain&&t.identity)return e;throw\"userURL with wrong format\"}return getUserURLFromEmail(e)}function isDataObjectURL(e){var t=[\"domain-idp\",\"runtime\",\"domain\",\"hyperty\"],r=e.split(\"://\"),n=r[0];return-1===t.indexOf(n)}function isLegacy(e){return e.split(\"@\").length>1}function isURL(e){return e.split(\"/\").length>=3}function isUserURL(e){return\"user\"===divideURL(e).type}function isHypertyURL(e){return\"hyperty\"===divideURL(e).type}function getConfigurationResources(e,t,r){return e[t][r]}function buildURL(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e[t],s=void 0;if(!a.hasOwnProperty(r))throw Error(\"The configuration \"+(0,o.default)(a,\"\",2)+\" don't have the \"+r+\" resource you are looking for\");var u=a[r];return n?(s=u.prefix+e.domain+u.suffix+n,u.hasOwnProperty(\"fallback\")&&i&&(s=u.fallback.indexOf(\"%domain%\")?u.fallback.replace(/(%domain%)/g,e.domain)+n:u.fallback+n)):s=u.prefix+e.domain+u.suffix,s}function generateGUID(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return s4()+s4()+\"-\"+s4()+\"-\"+s4()+\"-\"+s4()+\"-\"+s4()+s4()+s4()}function getUserIdentityDomain(e){var t=divideURL(e),r=t.domain.split(\".\"),n=r.length;return 1==n?r[n-1]:r[n-2]+\".\"+r[n-1]}function isBackendServiceURL(e){var t=divideURL(e),r=t.domain.split(\".\"),n=[\"domain\",\"global\",\"domain-idp\"],o=[\"registry\",\"msg-node\"],i=void 0;return r.length>1&&(i=r.filter(function(e){return-1!==o.indexOf(e)})[0]),!(!i||-1===o.indexOf(i))||!!t.type&&-1!==n.indexOf(t.type)}function divideEmail(e){var t=e.indexOf(\"@\");return{username:e.substring(0,t),domain:e.substring(t+1,e.length)}}function assign(e,t,r){e||(e={}),\"string\"==typeof t&&(t=parseAttributes(t));for(var n=t.length-1,o=0;o<n;++o){var i=t[o];i in e||(e[i]={}),e=e[i]}e[t[n]]=r}function splitObjectURL(e){var t=e.split(\"/\"),r=t[0]+\"//\"+t[2]+\"/\"+t[3],n=t[5],o={url:r,resource:n};return o}function checkAttribute(e){var t=/((([a-zA-Z]+):\\/\\/([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})\\/[a-zA-Z0-9.]+@[a-zA-Z0-9]+(-)?[a-zA-Z0-9]+(\\.)?[a-zA-Z0-9]{2,10}?\\.[a-zA-Z]{2,10})(.+(?=.identity))?/gm,r=[],n=[];if(null==e.match(t))n=e.split(\".\");else{for(var o=void 0;null!==(o=t.exec(e));)o.index===t.lastIndex&&t.lastIndex++,o.forEach(function(e,t){0===t&&r.push(e)});var i=void 0;r.forEach(function(t){i=e.replace(t,\"*-*\"),n=i.split(\".\").map(function(e){return\"*-*\"===e?t:e})})}return n}function parseAttributes(e){var t=/([0-9a-zA-Z][-\\w]*):\\/\\//g;if(e.includes(\"://\")){var r=e.split(t)[0],n=r.split(\".\"),o=e.replace(r,\"\");if(e.includes(\"identity\")){var i=o.split(\"identity.\");o=i[0].slice(\".\",-1),i=i[1].split(\".\"),n.push(o,\"identity\"),n=n.concat(i)}else n.push(o);return n.filter(Boolean)}return e.split(\".\")}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return(0,o.default)(e)===(0,o.default)({})}function chatkeysToStringCloner(e){var t={},r=(0,a.default)(e);if(r)try{for(var n=0;n<r.length;n++){var o=r[n];t[o]={},t[o].sessionKey=e[o].sessionKey.toString(),t[o].isToEncrypt=e[o].isToEncrypt}}catch(e){}return t}function chatkeysToArrayCloner(e){var t={},r=(0,a.default)(e);if(r)try{for(var n=0;n<r.length;n++){var o=r[n];t[o]={};var i=JSON.parse(\"[\"+e[o].sessionKey+\"]\");t[o].sessionKey=new Uint8Array(i),t[o].isToEncrypt=e[o].isToEncrypt}}catch(e){}return t}function parseMessageURL(e){var t=e.split(\"/\");return t.length<=6?t[0]+\"//\"+t[2]+\"/\"+t[3]:t[0]+\"//\"+t[2]+\"/\"+t[3]+\"/\"+t[4]}function availableSpace(e,t){var r=(e/t).toFixed(2);return{quota:t,usage:e,percent:Number(r)}}function encode(e){try{var t=stringify(e);return btoa(t)}catch(e){throw e}}function decode(e){try{return JSON.parse(atob(e))}catch(e){throw e}}function decodeToUint8Array(e){try{return new Uint8Array(decode(e))}catch(e){throw e}}function stringify(e){try{return e.constructor===Uint8Array?\"[\"+e.toString()+\"]\":(0,o.default)(e)}catch(e){throw e}}function parse(e){try{return JSON.parse(e)}catch(e){throw e}}function parseToUint8Array(e){try{return new Uint8Array(parse(e))}catch(e){throw e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(69),o=_interopRequireDefault(n),i=r(44),a=_interopRequireDefault(i);t.divideURL=divideURL,t.emptyObject=emptyObject,t.secondsSinceEpoch=secondsSinceEpoch,t.deepClone=deepClone,t.removePathFromURL=removePathFromURL,t.getUserURLFromEmail=getUserURLFromEmail,t.getUserEmailFromURL=getUserEmailFromURL,t.convertToUserURL=convertToUserURL,t.isDataObjectURL=isDataObjectURL,t.isLegacy=isLegacy,t.isURL=isURL,t.isUserURL=isUserURL,t.isHypertyURL=isHypertyURL,t.getConfigurationResources=getConfigurationResources,t.buildURL=buildURL,t.generateGUID=generateGUID,t.getUserIdentityDomain=getUserIdentityDomain,t.isBackendServiceURL=isBackendServiceURL,t.divideEmail=divideEmail,t.assign=assign,t.splitObjectURL=splitObjectURL,t.checkAttribute=checkAttribute,t.parseAttributes=parseAttributes,t.isEmpty=isEmpty,t.chatkeysToStringCloner=chatkeysToStringCloner,t.chatkeysToArrayCloner=chatkeysToArrayCloner,t.parseMessageURL=parseMessageURL,t.availableSpace=availableSpace,t.encode=encode,t.decode=decode,t.decodeToUint8Array=decodeToUint8Array,t.stringify=stringify,t.parse=parse,t.parseToUint8Array=parseToUint8Array},function(e,t,r){var n=r(7),o=r(72),i=r(31),a=r(29)(\"IE_PROTO\"),s=function(){},u=function(){var e,t=r(32)(\"iframe\"),n=i.length;for(t.style.display=\"none\",r(57).appendChild(t),t.src=\"javascript:\",e=t.contentWindow.document,e.open(),e.write(\"<script>document.F=Object<\\/script>\"),e.close(),u=e.F;n--;)delete u.prototype[i[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:o(r,t)}},function(e,t,r){e.exports=!r(6)&&!r(13)(function(){return 7!=Object.defineProperty(r(32)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(e,t,r){var n=r(10),o=r(12),i=r(61)(!1),a=r(29)(\"IE_PROTO\");e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){e.exports={default:r(112),__esModule:!0}},function(e,t,r){\"use strict\";var n=r(70)(!0);r(51)(String,\"String\",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(24),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){r(73);for(var n=r(1),o=r(11),i=r(15),a=r(2)(\"toStringTag\"),s=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),u=0;u<s.length;u++){var c=s[u],l=n[c],d=l&&l.prototype;d&&!d[a]&&o(d,a,c),i[c]=i.Array}},function(e,t,r){\"use strict\";function PromiseCapability(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError(\"Bad Promise constructor\");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}var n=r(22);e.exports.f=function(e){return new PromiseCapability(e)}},function(e,t,r){var n=r(5),o=r(0),i=r(13);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),\"Object\",a)}},function(e,t,r){var n=r(27),o=r(20),i=r(12),a=r(28),s=r(10),u=r(41),c=Object.getOwnPropertyDescriptor;t.f=r(6)?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,r){\"use strict\";var n=r(14),o=r(5),i=r(52),a=r(11),s=r(15),u=r(71),c=r(23),l=r(58),d=r(2)(\"iterator\"),f=!([].keys&&\"next\"in[].keys()),p=function(){return this};e.exports=function(e,t,r,y,v,h,_){u(r,t,y);var b,m,g,R=function(e){if(!f&&e in j)return j[e];switch(e){case\"keys\":case\"values\":return function(){return new r(this,e)}}return function(){return new r(this,e)}},O=t+\" Iterator\",D=\"values\"==v,w=!1,j=e.prototype,L=j[d]||j[\"@@iterator\"]||v&&j[v],k=L||R(v),U=v?D?R(\"entries\"):k:void 0,M=\"Array\"==t?j.entries||L:L;if(M&&(g=l(M.call(new e)))!==Object.prototype&&g.next&&(c(g,O,!0),n||\"function\"==typeof g[d]||a(g,d,p)),D&&L&&\"values\"!==L.name&&(w=!0,k=function(){return L.call(this)}),n&&!_||!f&&!w&&j[d]||a(j,d,k),s[t]=k,s[O]=p,v)if(b={values:D?k:R(\"values\"),keys:h?k:R(\"keys\"),entries:U},_)for(m in b)m in j||i(j,m,b[m]);else o(o.P+o.F*(f||w),t,b);return b}},function(e,t,r){e.exports=r(11)},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(76),o=_interopRequireDefault(n),i=r(78),a=_interopRequireDefault(i),s=\"function\"==typeof a.default&&\"symbol\"==typeof o.default?function(e){return typeof e}:function(e){return e&&\"function\"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?\"symbol\":typeof e};t.default=\"function\"==typeof a.default&&\"symbol\"===s(o.default)?function(e){return void 0===e?\"undefined\":s(e)}:function(e){return e&&\"function\"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?\"symbol\":void 0===e?\"undefined\":s(e)}},function(e,t,r){var n=r(42),o=r(31).concat(\"length\",\"prototype\");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t){},function(e,t,r){var n=r(16);e.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(e){return\"String\"==n(e)?e.split(\"\"):Object(e)}},function(e,t,r){var n=r(1).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(10),o=r(33),i=r(29)(\"IE_PROTO\"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(16),o=r(2)(\"toStringTag\"),i=\"Arguments\"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(r=a(t=Object(e),o))?r:i?n(t):\"Object\"==(s=n(t))&&\"function\"==typeof t.callee?\"Arguments\":s}},function(e,t,r){e.exports={default:r(67),__esModule:!0}},function(e,t,r){var n=r(12),o=r(46),i=r(62);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),l=i(a,c);if(e&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(24),o=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},function(e,t,r){var n=r(7),o=r(22),i=r(2)(\"species\");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},function(e,t,r){var n,o,i,a=r(18),s=r(94),u=r(57),c=r(32),l=r(1),d=l.process,f=l.setImmediate,p=l.clearImmediate,y=l.MessageChannel,v=l.Dispatch,h=0,_={},b=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},m=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++h]=function(){s(\"function\"==typeof e?e:Function(e),t)},n(h),h},p=function(e){delete _[e]},\"process\"==r(16)(d)?n=function(e){d.nextTick(a(b,e,1))}:v&&v.now?n=function(e){v.now(a(b,e,1))}:y?(o=new y,i=o.port2,o.port1.onmessage=m,n=a(i.postMessage,i,1)):l.addEventListener&&\"function\"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+\"\",\"*\")},l.addEventListener(\"message\",m,!1)):n=\"onreadystatechange\"in c(\"script\")?function(e){u.appendChild(c(\"script\")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(7),o=r(9),i=r(48);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){r(68);var n=r(0).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(5);n(n.S+n.F*!r(6),\"Object\",{defineProperty:r(8).f})},function(e,t,r){e.exports={default:r(111),__esModule:!0}},function(e,t,r){var n=r(24),o=r(25);e.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?\"\":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,r){\"use strict\";var n=r(40),o=r(20),i=r(23),a={};r(11)(a,r(2)(\"iterator\"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+\" Iterator\")}},function(e,t,r){var n=r(8),o=r(7),i=r(19);e.exports=r(6)?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){\"use strict\";var n=r(74),o=r(75),i=r(15),a=r(12);e.exports=r(51)(Array,\"Array\",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):\"keys\"==t?o(0,r):\"values\"==t?o(0,e[r]):o(0,[r,e[r]])},\"values\"),i.Arguments=i.Array,n(\"keys\"),n(\"values\"),n(\"entries\")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports={default:r(77),__esModule:!0}},function(e,t,r){r(45),r(47),e.exports=r(37).f(\"iterator\")},function(e,t,r){e.exports={default:r(79),__esModule:!0}},function(e,t,r){r(80),r(55),r(85),r(86),e.exports=r(0).Symbol},function(e,t,r){\"use strict\";var n=r(1),o=r(10),i=r(6),a=r(5),s=r(52),u=r(81).KEY,c=r(13),l=r(30),d=r(23),f=r(21),p=r(2),y=r(37),v=r(38),h=r(82),_=r(83),b=r(7),m=r(9),g=r(12),R=r(28),O=r(20),D=r(40),w=r(84),j=r(50),L=r(8),k=r(19),U=j.f,M=L.f,x=w.f,C=n.Symbol,P=n.JSON,E=P&&P.stringify,S=p(\"_hidden\"),q=p(\"toPrimitive\"),I={}.propertyIsEnumerable,T=l(\"symbol-registry\"),H=l(\"symbols\"),A=l(\"op-symbols\"),N=Object.prototype,F=\"function\"==typeof C,B=n.QObject,V=!B||!B.prototype||!B.prototype.findChild,z=i&&c(function(){return 7!=D(M({},\"a\",{get:function(){return M(this,\"a\",{value:7}).a}})).a})?function(e,t,r){var n=U(N,t);n&&delete N[t],M(e,t,r),n&&e!==N&&M(N,t,n)}:M,G=function(e){var t=H[e]=D(C.prototype);return t._k=e,t},W=F&&\"symbol\"==typeof C.iterator?function(e){return\"symbol\"==typeof e}:function(e){return e instanceof C},J=function(e,t,r){return e===N&&J(A,t,r),b(e),t=R(t,!0),b(r),o(H,t)?(r.enumerable?(o(e,S)&&e[S][t]&&(e[S][t]=!1),r=D(r,{enumerable:O(0,!1)})):(o(e,S)||M(e,S,O(1,{})),e[S][t]=!0),z(e,t,r)):M(e,t,r)},Y=function(e,t){b(e);for(var r,n=h(t=g(t)),o=0,i=n.length;i>o;)J(e,r=n[o++],t[r]);return e},Z=function(e,t){return void 0===t?D(e):Y(D(e),t)},K=function(e){var t=I.call(this,e=R(e,!0));return!(this===N&&o(H,e)&&!o(A,e))&&(!(t||!o(this,e)||!o(H,e)||o(this,S)&&this[S][e])||t)},X=function(e,t){if(e=g(e),t=R(t,!0),e!==N||!o(H,t)||o(A,t)){var r=U(e,t);return!r||!o(H,t)||o(e,S)&&e[S][t]||(r.enumerable=!0),r}},$=function(e){for(var t,r=x(g(e)),n=[],i=0;r.length>i;)o(H,t=r[i++])||t==S||t==u||n.push(t);return n},Q=function(e){for(var t,r=e===N,n=x(r?A:g(e)),i=[],a=0;n.length>a;)!o(H,t=n[a++])||r&&!o(N,t)||i.push(H[t]);return i};F||(C=function(){if(this instanceof C)throw TypeError(\"Symbol is not a constructor!\");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===N&&t.call(A,r),o(this,S)&&o(this[S],e)&&(this[S][e]=!1),z(this,e,O(1,r))};return i&&V&&z(N,e,{configurable:!0,set:t}),G(e)},s(C.prototype,\"toString\",function(){return this._k}),j.f=X,L.f=J,r(54).f=w.f=$,r(27).f=K,r(43).f=Q,i&&!r(14)&&s(N,\"propertyIsEnumerable\",K,!0),y.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!F,{Symbol:C});for(var ee=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),te=0;ee.length>te;)p(ee[te++]);for(var re=k(p.store),ne=0;re.length>ne;)v(re[ne++]);a(a.S+a.F*!F,\"Symbol\",{for:function(e){return o(T,e+=\"\")?T[e]:T[e]=C(e)},keyFor:function(e){if(!W(e))throw TypeError(e+\" is not a symbol!\");for(var t in T)if(T[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!F,\"Object\",{create:Z,defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),P&&a(a.S+a.F*(!F||c(function(){var e=C();return\"[null]\"!=E([e])||\"{}\"!=E({a:e})||\"{}\"!=E(Object(e))})),\"JSON\",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(m(t)||void 0!==e)&&!W(e))return _(t)||(t=function(e,t){if(\"function\"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,E.apply(P,n)}}),C.prototype[q]||r(11)(C.prototype,q,C.prototype.valueOf),d(C,\"Symbol\"),d(Math,\"Math\",!0),d(n.JSON,\"JSON\",!0)},function(e,t,r){var n=r(21)(\"meta\"),o=r(9),i=r(10),a=r(8).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(13)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,n,{value:{i:\"O\"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!i(e,n)){if(!u(e))return\"F\";if(!t)return\"E\";l(e)}return e[n].i},f=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},p=function(e){return c&&y.NEED&&u(e)&&!i(e,n)&&l(e),e},y=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(e,t,r){var n=r(19),o=r(43),i=r(27);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var a,s=r(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,r){var n=r(16);e.exports=Array.isArray||function(e){return\"Array\"==n(e)}},function(e,t,r){var n=r(12),o=r(54).f,i={}.toString,a=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&\"[object Window]\"==i.call(e)?s(e):o(n(e))}},function(e,t,r){r(38)(\"asyncIterator\")},function(e,t,r){r(38)(\"observable\")},function(e,t,r){var n=r(59),o=r(2)(\"iterator\"),i=r(15);e.exports=r(0).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e[\"@@iterator\"]||i[n(e)]}},function(e,t,r){r(55),r(45),r(47),r(89),r(100),r(101),e.exports=r(0).Promise},function(e,t,r){\"use strict\";var n,o,i,a,s=r(14),u=r(1),c=r(18),l=r(59),d=r(5),f=r(9),p=r(22),y=r(90),v=r(91),h=r(63),_=r(64).set,b=r(95)(),m=r(48),g=r(65),R=r(96),O=r(66),D=u.TypeError,w=u.process,j=w&&w.versions,L=j&&j.v8||\"\",k=u.Promise,U=\"process\"==l(w),M=function(){},x=o=m.f,C=!!function(){try{var e=k.resolve(1),t=(e.constructor={})[r(2)(\"species\")]=function(e){e(M,M)};return(U||\"function\"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==L.indexOf(\"6.6\")&&-1===R.indexOf(\"Chrome/66\")}catch(e){}}(),P=function(e){var t;return!(!f(e)||\"function\"!=typeof(t=e.then))&&t},E=function(e,t){if(!e._n){e._n=!0;var r=e._c;b(function(){for(var n=e._v,o=1==e._s,i=0;r.length>i;)!function(t){var r,i,a,s=o?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(o||(2==e._h&&I(e),e._h=1),!0===s?r=n:(l&&l.enter(),r=s(n),l&&(l.exit(),a=!0)),r===t.promise?c(D(\"Promise-chain cycle\")):(i=P(r))?i.call(r,u,c):u(r)):c(n)}catch(e){l&&!a&&l.exit(),c(e)}}(r[i++]);e._c=[],e._n=!1,t&&!e._h&&S(e)})}},S=function(e){_.call(u,function(){var t,r,n,o=e._v,i=q(e);if(i&&(t=g(function(){U?w.emit(\"unhandledRejection\",o,e):(r=u.onunhandledrejection)?r({promise:e,reason:o}):(n=u.console)&&n.error&&n.error(\"Unhandled promise rejection\",o)}),e._h=U||q(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},q=function(e){return 1!==e._h&&0===(e._a||e._c).length},I=function(e){_.call(u,function(){var t;U?w.emit(\"rejectionHandled\",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},T=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},H=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw D(\"Promise can't be resolved itself\");(t=P(e))?b(function(){var n={_w:r,_d:!1};try{t.call(e,c(H,n,1),c(T,n,1))}catch(e){T.call(n,e)}}):(r._v=e,r._s=1,E(r,!1))}catch(e){T.call({_w:r,_d:!1},e)}}};C||(k=function(e){y(this,k,\"Promise\",\"_h\"),p(e),n.call(this);try{e(c(H,this,1),c(T,this,1))}catch(e){T.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(97)(k.prototype,{then:function(e,t){var r=x(h(this,k));return r.ok=\"function\"!=typeof e||e,r.fail=\"function\"==typeof t&&t,r.domain=U?w.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&E(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=c(H,e,1),this.reject=c(T,e,1)},m.f=x=function(e){return e===k||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!C,{Promise:k}),r(23)(k,\"Promise\"),r(98)(\"Promise\"),a=r(0).Promise,d(d.S+d.F*!C,\"Promise\",{reject:function(e){var t=x(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!C),\"Promise\",{resolve:function(e){return O(s&&this===a?k:this,e)}}),d(d.S+d.F*!(C&&r(99)(function(e){k.all(e).catch(M)})),\"Promise\",{all:function(e){var t=this,r=x(t),n=r.resolve,o=r.reject,i=g(function(){var r=[],i=0,a=1;v(e,!1,function(e){var s=i++,u=!1;r.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=x(t),n=r.reject,o=g(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+\": incorrect invocation!\");return e}},function(e,t,r){var n=r(18),o=r(92),i=r(93),a=r(7),s=r(46),u=r(87),c={},l={},t=e.exports=function(e,t,r,d,f){var p,y,v,h,_=f?function(){return e}:u(e),b=n(r,d,t?2:1),m=0;if(\"function\"!=typeof _)throw TypeError(e+\" is not iterable!\");if(i(_)){for(p=s(e.length);p>m;m++)if((h=t?b(a(y=e[m])[0],y[1]):b(e[m]))===c||h===l)return h}else for(v=_.call(e);!(y=v.next()).done;)if((h=o(v,b,y.value,t))===c||h===l)return h};t.BREAK=c,t.RETURN=l},function(e,t,r){var n=r(7);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){var n=r(15),o=r(2)(\"iterator\"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(1),o=r(64).set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u=\"process\"==r(16)(a);e.exports=function(){var e,t,r,c=function(){var n,o;for(u&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(!i||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);r=function(){l.then(c)}}else r=function(){o.call(n,c)};else{var d=!0,f=document.createTextNode(\"\");new i(c).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){var n=r(1),o=n.navigator;e.exports=o&&o.userAgent||\"\"},function(e,t,r){var n=r(11);e.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},function(e,t,r){\"use strict\";var n=r(1),o=r(0),i=r(8),a=r(6),s=r(2)(\"species\");e.exports=function(e){var t=\"function\"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(2)(\"iterator\"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},function(e,t,r){\"use strict\";var n=r(5),o=r(0),i=r(1),a=r(63),s=r(66);n(n.P+n.R,\"Promise\",{finally:function(e){var t=a(this,o.Promise||i.Promise),r=\"function\"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){\"use strict\";var n=r(5),o=r(48),i=r(65);n(n.S,\"Promise\",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){r(103),e.exports=r(0).Object.getPrototypeOf},function(e,t,r){var n=r(33),o=r(58);r(49)(\"getPrototypeOf\",function(){return function(e){return o(n(e))}})},function(e,t,r){e.exports={default:r(105),__esModule:!0}},function(e,t,r){r(106),e.exports=r(0).Object.setPrototypeOf},function(e,t,r){var n=r(5);n(n.S,\"Object\",{setPrototypeOf:r(107).set})},function(e,t,r){var n=r(9),o=r(7),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+\": can't set as prototype!\")};e.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(e,t,n){try{n=r(18)(Function.call,r(50).f(Object.prototype,\"__proto__\").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},function(e,t,r){e.exports={default:r(109),__esModule:!0}},function(e,t,r){r(110);var n=r(0).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(5);n(n.S,\"Object\",{create:r(40)})},function(e,t,r){var n=r(0),o=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,r){r(113),e.exports=r(0).Object.keys},function(e,t,r){var n=r(33),o=r(19);r(49)(\"keys\",function(){return function(e){return o(n(e))}})},function(e,t,r){e.exports={default:r(122),__esModule:!0}},,function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(26),o=_interopRequireDefault(n),i=r(119),a=_interopRequireDefault(i);t.default=function get(e,t,r){null===e&&(e=Function.prototype);var n=(0,a.default)(e,t);if(void 0===n){var i=(0,o.default)(e);return null===i?void 0:get(i,t,r)}if(\"value\"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)}},,,function(e,t,r){e.exports={default:r(120),__esModule:!0}},function(e,t,r){r(121);var n=r(0).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,r){var n=r(12),o=r(50).f;r(49)(\"getOwnPropertyDescriptor\",function(){return function(e,t){return o(n(e),t)}})},function(e,t,r){r(123),e.exports=r(0).Object.assign},function(e,t,r){var n=r(5);n(n.S+n.F,\"Object\",{assign:r(124)})},function(e,t,r){\"use strict\";var n=r(19),o=r(43),i=r(27),a=r(33),s=r(56),u=Object.assign;e.exports=!u||r(13)(function(){var e={},t={},r=Symbol(),n=\"abcdefghijklmnopqrst\";return e[r]=7,n.split(\"\").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join(\"\")!=n})?function(e,t){for(var r=a(e),u=arguments.length,c=1,l=o.f,d=i.f;u>c;)for(var f,p=s(arguments[c++]),y=l?n(p).concat(l(p)):n(p),v=y.length,h=0;v>h;)d.call(p,f=y[h++])&&(r[f]=p[f]);return r}:u},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(36),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),p=r(39),y=f.getLogger(\"RegistrationStatus\"),v=function(){function RegistrationStatus(e,t,r,n){(0,u.default)(this,RegistrationStatus),this._registryObjectURL=e,this._runtimeURL=t,this._domain=(0,p.divideURL)(t).domain,this._discoveredObjectURL=r,this._messageBus=n,this._subscriptionSet=!1,this._subscribers={live:{},disconnected:{}}}return(0,l.default)(RegistrationStatus,[{key:\"onLive\",value:function(e,t){var r=this;return new a.default(function(n,o){r._subscriptionSet?(r._subscribers.live[e]=t,n()):r._subscribe().then(function(){r._subscribers.live[e]=t,n()}).catch(function(e){return o(e)})})}},{key:\"onDisconnected\",value:function(e,t){var r=this;return new a.default(function(n,o){r._subscriptionSet?(r._subscribers.disconnected[e]=t,n()):r._subscribe().then(function(){r._subscribers.disconnected[e]=t,n()}).catch(function(e){return o(e)})})}},{key:\"_subscribe\",value:function(){var e=this,t={type:\"subscribe\",from:this._discoveredObjectURL,to:this._runtimeURL+\"/subscriptions\",body:{resources:[this._registryObjectURL+\"/registration\"]}};return new a.default(function(r,n){e._messageBus.postMessage(t,function(t){y.log(\"[DiscoveredObject.subscribe] \"+e._registryObjectURL+\" rcved reply \",t),200===t.body.code?(e._generateListener(e._registryObjectURL+\"/registration\"),e._subscriptionSet=!0,r()):(y.error(\"Error subscribing \",e._registryObjectURL),n(\"Error subscribing \"+e._registryObjectURL))})})}},{key:\"_generateListener\",value:function(e){var t=this;this._messageBus.addListener(e,function(e){y.log(\"[DiscoveredObject.notification] \"+t._registryObjectURL+\": \",e),t._processNotification(e)})}},{key:\"_processNotification\",value:function(e){var t=this,r=e.body.value;setTimeout(function(){(0,o.default)(t._subscribers[r]).forEach(function(e){return t._subscribers[r][e]()})},5e3)}},{key:\"_unsubscribe\",value:function(){var e=this,t={type:\"unsubscribe\",from:this._discoveredObjectURL,to:this._runtimeURL+\"/subscriptions\",body:{resource:this._registryObjectURL+\"/registration\"}};return new a.default(function(r,n){e._messageBus.postMessage(t,function(t){y.log(\"[DiscoveredObject.unsubscribe] \"+e._registryObjectURL+\" rcved reply \",t),200===t.body.code?r():(y.error(\"Error unsubscribing \",e._registryObjectURL),n(\"Error unsubscribing \"+e._registryObjectURL))})})}},{key:\"unsubscribeLive\",value:function(e){var t=this;return new a.default(function(r,n){e in t._subscribers.live&&delete t._subscribers.live[e],t._areSubscriptionsEmpty()?t._unsubscribe().then(function(){return r()}).catch(function(e){return n(e)}):r()})}},{key:\"unsubscribeDisconnected\",value:function(e){var t=this;return new a.default(function(r,n){e in t._subscribers.disconnected?(delete t._subscribers.disconnected[e],t._areSubscriptionsEmpty()?t._unsubscribe().then(function(){return r()}).catch(function(e){return n(e)}):r()):n(e+\" doesn't subscribe onDisconnected for \"+t._registryObjectURL)})}},{key:\"_areSubscriptionsEmpty\",value:function(){return 0===(0,o.default)(this._subscribers.live).length&&0===(0,o.default)(this._subscribers.disconnected).length}}]),RegistrationStatus}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(26),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(34),l=_interopRequireDefault(c),d=r(35),f=_interopRequireDefault(d),p=r(127),y=_interopRequireDefault(p),v=function(e){function MiniBus(){return(0,a.default)(this,MiniBus),(0,l.default)(this,(MiniBus.__proto__||(0,o.default)(MiniBus)).call(this))}return(0,f.default)(MiniBus,e),(0,u.default)(MiniBus,[{key:\"postMessage\",value:function(e,t,r){var n=this;return n._genId(e),n._responseCallback(e,t,r),n._onPostMessage(e),e.id}},{key:\"_onMessage\",value:function(e){var t=this;if(!t._onResponse(e)){var r=t._subscriptions[e.to];r?(t._publishOn(r,e),e.to.startsWith(\"hyperty\")||t._publishOnDefault(e)):t._publishOnDefault(e)}}}]),MiniBus}(y.default);t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(36),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=l.getLogger(\"Bus\"),f=function(){function Bus(){(0,a.default)(this,Bus);var e=this;e._msgId=0,e._subscriptions={},e._responseTimeOut=3e4,e._responseCallbacks={},e._registerExternalListener()}return(0,u.default)(Bus,[{key:\"addListener\",value:function(e,t){var r=this,n=new p(r._subscriptions,e,t),o=r._subscriptions[e];return o||(o=[],r._subscriptions[e]=o),o.push(n),n}},{key:\"addResponseListener\",value:function(e,t,r){this._responseCallbacks[e+t]=r}},{key:\"removeResponseListener\",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:\"removeAllListenersOf\",value:function(e){delete this._subscriptions[e]}},{key:\"bind\",value:function(e,t,r){var n=this,o=this;return{thisListener:o.addListener(e,function(e){r.postMessage(e)}),targetListener:r.addListener(t,function(e){o.postMessage(e)}),unbind:function(){n.thisListener.remove(),n.targetListener.remove()}}}},{key:\"_publishOnDefault\",value:function(e){var t=this._subscriptions[\"*\"];t&&this._publishOn(t,e)}},{key:\"_publishOn\",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:\"_responseCallback\",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this;if(t){var o=e.from+e.id;n._responseCallbacks[o]=t,r&&setTimeout(function(){var t=n._responseCallbacks[o];if(delete n._responseCallbacks[o],t){t({id:e.id,type:\"response\",body:{code:408,desc:\"Response timeout!\",value:e}})}},n._responseTimeOut)}}},{key:\"_onResponse\",value:function(e){var t=this;if(\"response\"===e.type){var r=e.to+e.id,n=t._responseCallbacks[r];if(e.body.code>=200&&delete t._responseCallbacks[r],n)return n(e),!0}return!1}},{key:\"_onMessage\",value:function(e){var t=this;if(!t._onResponse(e)){var r=t._subscriptions[e.to];r?t._publishOn(r,e):t._publishOnDefault(e)}}},{key:\"_genId\",value:function(e){e.id&&0!==e.id||(this._msgId++,e.id=this._msgId)}},{key:\"postMessage\",value:function(e,t){}},{key:\"postMessageWithRetries\",value:function(e,t,r){var n=this,i=0,a=function(){return new o.default(function(t,o){n.postMessage(e,function(n){408===n.body.code||500===n.body.code?o():(d.info(\"[Bus.postMessageWithRetries] msg delivered: \",e),r(n),t())})})};!function tryAgain(){a().then(function(){},function(){if(d.warn(\"[Bus.postMessageWithRetries] Message Bounced (retry \"+i+\"): '\",e),!(i++<t)){var r=\"[Error] Message Bounced (delivery attempts \"+t+\"): '\";throw new Error(r+e)}tryAgain()})}()}},{key:\"_onPostMessage\",value:function(e){}},{key:\"_registerExternalListener\",value:function(){}}]),Bus}(),p=function(){function MsgListener(e,t,r){(0,a.default)(this,MsgListener);var n=this;n._subscriptions=e,n._url=t,n._callback=r}return(0,u.default)(MsgListener,[{key:\"remove\",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var r=t.indexOf(e);t.splice(r,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:\"url\",get:function(){return this._url}}]),MsgListener}();t.default=f,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(129),u=_interopRequireDefault(s),c=function(){function SandboxRegistry(e){(0,o.default)(this,SandboxRegistry);var t=this;t._bus=e,t._factory=new u.default(e),t._components={},e.addListener(SandboxRegistry.InternalDeployAddress,function(e){switch(e.type){case\"create\":t._onDeploy(e);break;case\"delete\":t._onRemove(e)}})}return(0,a.default)(SandboxRegistry,[{key:\"_responseMsg\",value:function(e,t,r){var n={id:e.id,type:\"response\",from:SandboxRegistry.InternalDeployAddress,to:SandboxRegistry.ExternalDeployAddress},o={};return t&&(o.code=t),r&&(o.desc=r),n.body=o,n}},{key:\"_onDeploy\",value:function(e){var t=this,r=e.body.config,n=e.body.url,o=e.body.sourceCode,i=void 0,a=void 0;if(t._components.hasOwnProperty(n))i=500,a=\"Instance \"+n+\" already exist!\";else try{t._components[n]=t._create(n,o,r,t._factory),i=200}catch(e){i=500,a=e}var s=t._responseMsg(e,i,a);t._bus.postMessage(s)}},{key:\"_onRemove\",value:function(e){var t=this,r=e.body.url,n=void 0,o=void 0;t._components.hasOwnProperty(r)?(delete t._components[r],t._bus.removeAllListenersOf(r),n=200):(n=500,o=\"Instance \"+r+\" doesn't exist!\");var i=t._responseMsg(e,n,o);t._bus.postMessage(i)}},{key:\"_create\",value:function(e,t,r,n){}},{key:\"components\",get:function(){return this._components}}]),SandboxRegistry}();c.ExternalDeployAddress=\"hyperty-runtime://sandbox/external\",c.InternalDeployAddress=\"hyperty-runtime://sandbox/internal\",t.default=c,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(130),u=_interopRequireDefault(s),c=r(161),l=_interopRequireDefault(c),d=r(39),f=r(134),p=_interopRequireDefault(f),y=r(135),v=_interopRequireDefault(y),h=r(125),_=_interopRequireDefault(h),b=r(163),m=_interopRequireDefault(b),g=r(136),R=_interopRequireDefault(g),O=r(138),D=_interopRequireDefault(O),w=r(164),j=_interopRequireDefault(w),L=r(166),k=_interopRequireDefault(L),U=r(139),M=_interopRequireDefault(U),x=function(){function SandboxFactory(e){(0,o.default)(this,SandboxFactory);var t=this;t._bus=e,t._divideURL=d.divideURL}return(0,a.default)(SandboxFactory,[{key:\"createSyncher\",value:function(e,t,r){return new u.default(e,t,r)}},{key:\"createIdentityManager\",value:function(e,t,r){return new p.default(e,t,r)}},{key:\"createDiscovery\",value:function(e,t,r){return new v.default(e,t,r)}},{key:\"createSearch\",value:function(e,t){return new m.default(e,t)}},{key:\"createContextObserver\",value:function(e,t,r,n){return new R.default(e,t,r,n,this)}},{key:\"createContextReporter\",value:function(e,t,r){return new D.default(e,t,r,this)}},{key:\"createNotificationHandler\",value:function(e){return new l.default(e)}},{key:\"createMessageBodyIdentity\",value:function(e,t,r,n,o,i,a,s){return new j.default(e,t,r,n,o,i,a,s)}},{key:\"createChatManager\",value:function(e,t,r,n){return new k.default(e,t,r,n,this)}},{key:\"createChatController\",value:function(e,t,r,n,o,i){return new M.default(e,t,r,n,o,i)}},{key:\"createRegistrationStatus\",value:function(e,t,r,n){return new _.default(e,t,r,n)}},{key:\"divideURL\",get:function(){return this._divideURL}}]),SandboxFactory}();t.default=x,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(114),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(36),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),p=r(39),y=r(153),v=_interopRequireDefault(y),h=r(159),_=_interopRequireDefault(h),b=r(160),m=_interopRequireDefault(b),g=f.getLogger(\"Syncher\"),R=function(){function Syncher(e,t,r){(0,u.default)(this,Syncher);var n=this;n._owner=e,n._bus=t,n._subURL=r.runtimeURL+\"/sm\",n._runtimeUrl=r.runtimeURL,n._p2pHandler=r.p2pHandler,n._p2pRequester=r.p2pRequester,n._reporters={},n._observers={},n._provisionals={},t.addListener(e,function(t){if(t.from!==e)switch(g.info(\"[Syncher] Syncher-RCV: \",t,n),t.type){case\"forward\":n._onForward(t);break;case\"create\":n._onRemoteCreate(t);break;case\"delete\":n._onRemoteDelete(t);break;case\"execute\":n._onExecute(t)}})}return(0,l.default)(Syncher,[{key:\"create\",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:\"no name\",s=arguments[6],u=arguments[7];if(!e)throw Error(\"[Syncher - Create] - You need specify the data object schema\");if(!t)throw Error(\"[Syncher - Create] -The observers should be defined\");var c=this;u=u||{};var l=(0,a.default)({},u);return l.p2p=o,l.store=n,l.schema=e,l.authorise=t,l.p2pHandler=c._p2pHandler,l.p2pRequester=c._p2pRequester,l.data=r?(0,p.deepClone)(r):{},l.name=0===i.length?\"no name\":i,l.reporter=u.hasOwnProperty(\"reporter\")&&\"boolean\"!=typeof u.reporter?u.reporter:c._owner,l.resume=!1,u?(l.mutual=!u.hasOwnProperty(\"mutual\")||u.mutual,l.name=u.hasOwnProperty(\"name\")?u.name:l.name):l.mutual=!0,u.hasOwnProperty(\"reuseURL\")&&(l.resource=u.reuseURL),s&&(l.identity=s),g.log(\"[syncher - create] - create Reporter - createInput: \",l),c._create(l)}},{key:\"resumeReporters\",value:function(e){var t=this;return g.log(\"[syncher - create] - resume Reporter - criteria: \",e),(0,a.default)(e,{resume:!0}),t._resumeCreate(e)}},{key:\"subscribe\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments[6],u=this,c={};return c.p2p=n,c.store=r,c.schema=e,c.domain_subscription=i,c.resource=t,s&&(c.identity=s),c.mutual=o,g.log(\"[syncher - subscribe] - subscribe criteria: \",c),(0,a.default)(c,{resume:!1}),u._subscribe(c)}},{key:\"resumeObservers\",value:function(e){var t=this,r=e||{};return(0,a.default)(r,{resume:!0}),t._resumeSubscribe(r)}},{key:\"read\",value:function(e){var t=this,r={type:\"read\",from:t._owner,to:e};return new o.default(function(e,n){var o=function(o){g.log(\"[Syncher.read] reply: \",o);var i={},s={},u=0;if(o.body.code<300)if(o.body.value.hasOwnProperty(\"responses\"))if(0===u)s=o.body.value,++u;else{delete o.body.value.responses;var c=void 0;for(c in o.body.value)i.hasOwnProperty(c)||(i[c]={}),(0,a.default)(i[c],o.body.value[c]);++u,u===s.responses&&(s.childrenObjects=i,delete s.responses,t._bus.removeResponseListener(r.from,o.id),e(s))}else t._bus.removeResponseListener(r.from,o.id),e(o.body.value);else n(o.body.desc)};t._bus.postMessage(r,o,!1)})}},{key:\"onNotification\",value:function(e){this._onNotificationHandler=e}},{key:\"onClose\",value:function(e){this._onClose=e}},{key:\"_create\",value:function(e){var t=this;return new o.default(function(r,n){var o=(0,a.default)({},e),i=e.resume;o.created=(new Date).toISOString(),o.runtime=t._runtimeUrl;var s=(0,p.deepClone)(o);delete s.p2p,delete s.store,delete s.observers,delete s.identity;var u={type:\"create\",from:t._owner,to:t._subURL,body:{resume:i,value:s}};u.body.schema=o.schema,o.p2p&&(u.body.p2p=o.p2p),o.store&&(u.body.store=o.store),o.identity&&(u.body.identity=o.identity),g.log(\"[syncher._create]: \",o,u),t._bus.postMessage(u,function(i){if(g.log(\"[syncher - create] - create-response: \",i),200===i.body.code){o.url=i.body.resource,o.status=\"live\",o.syncher=t,o.childrens=i.body.childrenResources;var a=t._reporters[o.url];a||(a=new v.default(o),t._reporters[o.url]=a),a.inviteObservers(e.authorise,e.p2p),r(a)}else n(i.body.desc)})})}},{key:\"_resumeCreate\",value:function(e){var t=this,r=this;return new o.default(function(n,o){var i=e.resume,a={type:\"create\",from:r._owner,to:r._subURL,body:{resume:i}};g.log(\"[syncher - create]: \",e,a),e&&(a.body.value=e,e.hasOwnProperty(\"reporter\")?a.body.value.reporter=e.reporter:a.body.value.reporter=r._owner),e.p2p&&(a.body.p2p=e.p2p),e.store&&(a.body.store=e.store),e.observers&&(a.body.authorise=e.observers),e.identity&&(a.body.identity=e.identity),g.log(\"[syncher._resumeCreate] - resume message: \",a),r._bus.postMessage(a,function(e){if(g.log(\"[syncher._resumeCreate] - create-resumed-response: \",e),200===e.body.code){var i=e.body.value;for(var a in i){var s=i[a];s.data=(0,p.deepClone)(s.data)||{},s.childrenObjects&&(s.childrenObjects=(0,p.deepClone)(s.childrenObjects)),s.mutual=!1,s.resume=!0,s.status=\"live\",s.syncher=r,g.log(\"[syncher._resumeCreate] - create-resumed-dataObjectReporter\",s);var u=new v.default(s);s.childrenObjects&&u.resumeChildrens(s.childrenObjects),r._reporters[s.url]=u}n(r._reporters),t._onReportersResume&&t._onReportersResume(t._reporters)}else 404===e.body.code?n({}):o(e.body.desc)})})}},{key:\"_subscribe\",value:function(e){var t=this;return new o.default(function(r,n){var o={type:\"subscribe\",from:t._owner,to:t._subURL,body:{}};e&&(e.hasOwnProperty(\"p2p\")&&(o.body.p2p=e.p2p),e.hasOwnProperty(\"store\")&&(o.body.store=e.store),e.hasOwnProperty(\"schema\")&&(o.body.schema=e.schema),e.hasOwnProperty(\"identity\")&&(o.body.identity=e.identity),e.hasOwnProperty(\"resource\")&&(o.body.resource=e.resource),e.hasOwnProperty(\"domain_subscription\")&&(o.body.domain_subscription=e.domain_subscription)),o.body.resume=e.resume,e.hasOwnProperty(\"mutual\")&&(o.body.mutual=e.mutual),g.log(\"[syncher_subscribe] - subscribe message: \",e,o),t._bus.postMessage(o,function(o){g.log(\"[syncher] - subscribe-response: \",o);var i=o.body.resource,a=t._provisionals[i];if(delete t._provisionals[i],a&&a._releaseListeners(),o.body.code<200)g.log(\"[syncher] - new DataProvisional: \",o.body.childrenResources,i),a=new m.default(t._owner,i,t._bus,o.body.childrenResources),t._provisionals[i]=a;else if(200===o.body.code){g.log(\"[syncher] - new Data Object Observer: \",o,t._provisionals);var s=o.body.value;s.syncher=t,s.p2p=e.p2p,s.store=e.store,s.identity=e.identity,s.resume=!1,s.mutual=e.mutual;var u=t._observers[i];u?u.sync():(u=new _.default(s),t._observers[i]=u),g.log(\"[syncher] - new Data Object Observer already exist: \",u),r(u),a&&a.apply(u)}else n(o.body.desc)})})}},{key:\"_resumeSubscribe\",value:function(e){var t=this,r=this;return new o.default(function(n,o){var i={type:\"subscribe\",from:r._owner,to:r._subURL,body:{}};e&&(e.hasOwnProperty(\"p2p\")&&(i.body.p2p=e.p2p),e.hasOwnProperty(\"store\")&&(i.body.store=e.store),e.hasOwnProperty(\"schema\")&&(i.body.schema=e.schema),e.hasOwnProperty(\"identity\")&&(i.body.identity=e.identity),e.hasOwnProperty(\"resource\")&&(i.body.resource=e.url)),i.body.resume=e.resume;var a=e.mutual;e.hasOwnProperty(\"mutual\")&&(i.body.mutual=a),g.log(\"[syncher] - subscribe message: \",e,i),r._bus.postMessage(i,function(e){g.log(\"[syncher] - subscribe-resumed-response: \",e);var i=e.body.resource,a=r._provisionals[i];if(delete r._provisionals[i],a&&a._releaseListeners(),e.body.code<200)g.log(\"[syncher] - resume new DataProvisional: \",e,i),a=new m.default(r._owner,i,r._bus,e.body.childrenResources),r._provisionals[i]=a;else if(200===e.body.code){var s=e.body.value;for(var u in s){var c=s[u];g.log(\"[syncher] - Resume Object Observer: \",e,c,r._provisionals),c.childrenObjects&&(c.childrenObjects=(0,p.deepClone)(c.childrenObjects)),c.data=(0,p.deepClone)(c.data)||{},c.resume=!0,c.syncher=r,g.log(\"[syncher._resumeSubscribe] - create new dataObject: \",c);var l=new _.default(c);c.childrenObjects&&l.resumeChildrens(c.childrenObjects),g.log(\"[syncher._resumeSubscribe] - new dataObject\",l),r._observers[l.url]=l,r._provisionals[l.url]&&r._provisionals[l.url].apply(l)}n(r._observers),t._onObserversResume&&t._onObserversResume(r._observers)}else 404===e.body.code?n({}):o(e.body.desc)})})}},{key:\"_onForward\",value:function(e){this._reporters[e.body.to]._onForward(e)}},{key:\"_onRemoteCreate\",value:function(e){var t=this,r=e.from.slice(0,-13),n=(0,p.divideURL)(r),o=n.domain,i={type:e.type,from:e.body.source,url:r,domain:o,schema:e.body.schema,value:e.body.value,identity:e.body.identity,ack:function(r){var n=200;r&&(n=r),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:n}})}};t._onNotificationHandler&&(g.info(\"[Syncher] NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}},{key:\"_onRemoteDelete\",value:function(e){var t=this,r=e.body.resource,n=t._observers[r],o={from:t.owner,to:t._subURL,id:e.id,type:\"unsubscribe\",body:{resource:e.body.resource}};if(t._bus.postMessage(o),delete t._observers[r],n){var i={type:e.type,url:r,identity:e.body.identity,ack:function(r){var o=200;r&&(o=r),200===o&&n.delete(),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:o,source:t._owner}})}};t._onNotificationHandler&&(g.log(\"NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}else t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:404,source:t._owner}})}},{key:\"_onExecute\",value:function(e){var t=this,r={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200}};if((e.from===t._runtimeUrl+\"/registry/\"||e.from===t._runtimeUrl+\"/registry\")&&e.body&&e.body.method&&\"close\"===e.body.method&&t._onClose){var n={type:\"close\",ack:function(e){e&&(r.body.code=e),t._bus.postMessage(r)}};g.info(\"[Syncher] Close-EVENT: \",n),t._onClose(n)}else t._bus.postMessage(r)}},{key:\"onReportersResume\",value:function(e){this._onReportersResume=e}},{key:\"onObserversResume\",value:function(e){this._onObserversResume=e}},{key:\"owner\",get:function(){return this._owner}},{key:\"reporters\",get:function(){return this._reporters}},{key:\"observers\",get:function(){return this._observers}}]),Syncher}();t.default=R,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(53),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(44),u=_interopRequireDefault(s),c=r(114),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(36),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),_=r(132),b=_interopRequireDefault(_),m=r(133),g=_interopRequireDefault(m),R=r(39),O=r(155),D=_interopRequireDefault(O),w=h.getLogger(\"DataObject\"),j=function(){function DataObject(e){function throwMandatoryParmMissingError(e){throw\"[DataObject] \"+e+\" mandatory parameter is missing\"}(0,f.default)(this,DataObject);var t=this;e.syncher?t._syncher=e.syncher:throwMandatoryParmMissingError(\"syncher\"),e.url?t._url=e.url:throwMandatoryParmMissingError(\"url\"),e.created?t._created=e.created:throwMandatoryParmMissingError(\"created\"),e.reporter?t._reporter=e.reporter:throwMandatoryParmMissingError(\"reporter\"),e.runtime?t._runtime=e.runtime:throwMandatoryParmMissingError(\"runtime\"),e.schema?t._schema=e.schema:throwMandatoryParmMissingError(\"schema\"),e.name?t._name=e.name:throwMandatoryParmMissingError(\"name\"),t._status=e.status,e.data?t._syncObj=new b.default(e.data):t._syncObj=new b.default({}),t._childrens=e.childrens,t._mutual=e.mutual,t._version=0,t._childId=0,t._childrenListeners=[],t._onAddChildrenHandler,t._resumed=e.resume,e.resume&&(t._version=e.version),t._owner=e.syncher._owner,t._bus=e.syncher._bus,e.description&&(t._description=e.description),e.tags&&(t._tags=e.tags),e.resources&&(t._resources=e.resources),e.observerStorage&&(t._observerStorage=e.observerStorage),e.publicObservation&&(t._publicObservation=e.publicObservation),t._metadata=(0,l.default)(e),(!e.hasOwnProperty(\"resume\")||e.hasOwnProperty(\"resume\")&&!e.resume)&&(t._metadata.lastModified=t._metadata.created),delete t._metadata.data,delete t._metadata.syncher,delete t._metadata.authorise,t._hypertyResourceFactory=new D.default,t._childrenObjects={},t._sharedChilds=[]}return(0,y.default)(DataObject,[{key:\"_getLastChildId\",value:function(){var e=this,t=0,r=e._owner+\"#\"+t;return(0,u.default)(e._childrens).filter(function(t){e._childrens[t].childId>r&&(r=e._childrens[t].childId)}),t=Number(r.split(\"#\")[1])}},{key:\"_allocateListeners\",value:function(){var e=this,t=this,r=t._url+\"/children/\";w.log(\"[Data Object - AllocateListeners] - \",t._childrens),t._childrens&&t._childrens.forEach(function(n){var o=r+n,i=t._bus.addListener(o,function(r){if(r.from!==e._owner)switch(w.log(\"DataObject-Children-RCV: \",r),r.type){case\"create\":t._onChildCreate(r);break;case\"delete\":w.log(r);break;default:t._changeChildren(r)}});t._childrenListeners.push(i)})}},{key:\"_releaseListeners\",value:function(){var e=this;e._childrenListeners.forEach(function(e){e.remove()}),(0,u.default)(e._childrenObjects).forEach(function(t){(0,u.default)(e._childrenObjects[t]).forEach(function(r){e._childrenObjects[t][r]._releaseListeners()})})}},{key:\"resumeChildrens\",value:function(e){var t=this,r=this,n=this._owner+\"#\"+this._childId;(0,u.default)(e).forEach(function(o){var i=e[o];(0,u.default)(i).forEach(function(e){var a=!1;r._childrenObjects.hasOwnProperty(o)||(r._childrenObjects[o]={}),i[e].value.resourceType&&!r._childrenObjects[o].hasOwnProperty(e)?(r._childrenObjects[o][e]=r._resumeHypertyResource(i[e]),a=!0):r._childrenObjects[o].hasOwnProperty(e)||(r._childrenObjects[o][e]=r._resumeChild(i[e]),w.log(\"[DataObject.resumeChildrens] new DataObjectChild: \",r._childrenObjects[o][e]),a=!0),a&&e>n&&(n=e,w.log(\"[DataObjectReporter.resumeChildrens] - resuming: \",t._childrenObjects[o][e]))})}),this._childId=Number(n.split(\"#\")[1])}},{key:\"_resumeChild\",value:function(e){var t=this,r=e.value;r.parentObject=t,r.parent=t._url;var n=new g.default(r);n.identity=e.identity;var o={type:\"create\",from:n.reporter,url:n.parent,value:n.data,childId:n.url,identity:n.identity,child:n};return n.resourceType&&(o.resource=n),t._onAddChildrenHandler&&t._onAddChildrenHandler(o),n}},{key:\"_resumeHypertyResource\",value:function(e){var t=this,r=e.value;r.parentObject=t,r.parent=t._url;var n=t._hypertyResourceFactory.createHypertyResource(!1,r.resourceType,r);n.identity=e.identity;var o={type:\"create\",from:n.reporter,url:n.parent,value:n.data,childId:n.url,identity:n.identity,child:n};return n.resourceType&&(o.resource=n),t._onAddChildrenHandler&&t._onAddChildrenHandler(o),n}},{key:\"pause\",value:function(){throw\"Not implemented\"}},{key:\"resume\",value:function(){throw\"Not implemented\"}},{key:\"stop\",value:function(){throw\"Not implemented\"}},{key:\"addChild\",value:function(e,t,r,n){var o=this,i=void 0;return new a.default(function(a){var s=o._url+\"/children/\"+e,u=o._getChildInput(n);u.data=t,u.children=e,i=new g.default(u),r&&(i.identity=r),i.share(),w.log(\"[DataObject.addChild] added \",i),i.onChange(function(e){o._onChange(e,{path:s,childId:u.url})}),o._childrenObjects.hasOwnProperty(e)||(o._childrenObjects[e]={}),o._childrenObjects[e][u.url]=i,a(i)})}},{key:\"_deleteChildrens\",value:function(){var e=this,t=[];return new a.default(function(r){if(e.childrens){w.log(\"[DataObject.deleteChildrens]\",e.childrens);var n=void 0;for(n in e.childrens){var o=void 0;for(o in e.childrens[n]){var i=e.childrens[n][o];w.log(\"[DataObject._deleteChildrens] child\",i),i.metadata.hasOwnProperty(\"resourceType\")&&t.push(e.childrens[n][o].delete())}}}w.log(\"[DataObject._deleteChildrens] promises \",t),t.length>0?a.default.all(t).then(function(){r(\"[DataObject._deleteChildrens] done\")}):r(\"[DataObject._deleteChildrens] nothing to delete\")})}},{key:\"_getChildInput\",value:function(e){var t=this,r=(0,l.default)({},e);return t._childId++,r.url=t._owner+\"#\"+t._childId,r.parentObject=t,r.reporter=t._owner,r.created=(new Date).toISOString(),r.runtime=t._syncher._runtimeUrl,r.p2pHandler=t._syncher._p2pHandler,r.p2pRequester=t._syncher._p2pRequester,r.schema=t._schema,r.parent=t.url,r}},{key:\"addHypertyResource\",value:function(e,t,r,n,o){var i=this;return new a.default(function(a){var s=void 0,u=i._url+\"/children/\"+e,c=i._getChildInput(o);c.children=e,i._hypertyResourceFactory.createHypertyResourceWithContent(!0,t,r,c).then(function(t){s=t,n&&(s.identity=n),s.share(),w.log(\"[DataObject.addHypertyResource] added \",s),s.onChange(function(e){i._onChange(e,{path:u,childId:s.childId})}),i._childrenObjects.hasOwnProperty(e)||(i._childrenObjects[e]={}),i._childrenObjects[e][s.childId]=s,a(s)})})}},{key:\"onAddChild\",value:function(e){this._onAddChildrenHandler=e}},{key:\"_onChildCreate\",value:function(e){var t=this;w.log(\"[DataObject._onChildCreate] receivedBy \"+t._owner+\" : \",e);var r={from:e.to,to:e.from,type:\"response\",id:e.id,body:{code:100}};t._bus.postMessage(r),e.body.value.resourceType?t._onHypertyResourceAdded(e):t._onChildAdded(e)}},{key:\"_onChildAdded\",value:function(e){var t=this,r=(0,R.deepClone)(e.body.value);r.parentObject=t;var n=r.children,o=new g.default(r);o.identity=e.body.identity,t._childrenObjects.hasOwnProperty(n)||(t._childrenObjects[n]={}),t._childrenObjects[n][r.url]=o,e.to===t.metadata.url&&o.store(),t._hypertyEvt(e,o)}},{key:\"_onHypertyResourceAdded\",value:function(e){var t=this,r=e.body.value,n=void 0,o=r.children;r.parentObject=t,n=t._hypertyResourceFactory.createHypertyResource(!1,r.resourceType,r),n.identity=e.body.identity,t._childrenObjects.hasOwnProperty(o)||(t._childrenObjects[o]={}),t._childrenObjects[o][n.childId]=n,t._hypertyEvt(e,n),e.to===t.metadata.url&&n.store()}},{key:\"_hypertyEvt\",value:function(e,t){var r=this,n={type:e.type,from:e.from,url:e.to,value:t.data,childId:t.url,identity:e.body.identity,child:t};t.resourceType&&(n.resource=t),r._onAddChildrenHandler&&r._onAddChildrenHandler(n)}},{key:\"_onChange\",value:function(e,t){var r=this;if(r._metadata.lastModified=(new Date).toISOString(),r._version++,\"live\"===r._status){var n={type:\"update\",from:r._url,to:r._url+\"/changes\",body:{version:r._version,source:r._owner,attribute:e.field,lastModified:r._metadata.lastModified}};w.log(\"[DataObject - _onChange] - \",e,t,n),e.oType===_.ObjectType.OBJECT?e.cType!==_.ChangeType.REMOVE&&(n.body.value=(0,R.deepClone)(e.data)):(n.body.attributeType=e.oType,n.body.value=e.data,e.cType!==_.ChangeType.UPDATE&&(n.body.operation=e.cType)),t&&(n.to=t.path,n.body.resource=t.childId),r.data._mutual||(n.body.mutual=r._mutual),r._bus.postMessage(n)}}},{key:\"_changeObject\",value:function(e,t){var r=this;if(r._version+1<=t.body.version){r._version=t.body.version;var n=t.body.attribute,i=void 0;i=\"object\"===(0,o.default)(t.body.value)?(0,R.deepClone)(t.body.value):t.body.value;var a=e.findBefore(n);if(t.body.lastModified?r._metadata.lastModified=t.body.lastModified:r._metadata.lastModified=(new Date).toISOString(),t.body.attributeType===_.ObjectType.ARRAY)if(t.body.operation===_.ChangeType.ADD){var s=a.obj,u=a.last;Array.prototype.splice.apply(s,[u,0].concat(i))}else if(t.body.operation===_.ChangeType.REMOVE){var c=a.obj,l=a.last;c.splice(l,i)}else a.obj[a.last]=i;else t.body.hasOwnProperty(\"value\")?a.obj[a.last]=i:delete a.obj[a.last]}else w.log(\"UNSYNCHRONIZED VERSION: (data => \"+r._version+\", msg => \"+t.body.version+\")\")}},{key:\"_changeChildren\",value:function(e){var t=this,r=(0,R.divideURL)(e.to),n=r.identity,o=n?n.substring(n.lastIndexOf(\"/\")+1):void 0,i=e.body.resource,a=t._childrenObjects[o][i];w.log(\"Change children: \",t._owner,e,o),a?t._changeObject(a._syncObj,e):w.warn(\"No children found for: \",i)}},{key:\"metadata\",get:function(){return this._metadata}},{key:\"url\",get:function(){return this._url}},{key:\"schema\",get:function(){return this._schema}},{key:\"status\",get:function(){return this._status}},{key:\"data\",get:function(){return this._syncObj.data}},{key:\"childrens\",get:function(){return this._childrenObjects}}]),DataObject}();t.default=j,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.ObjectType=t.ChangeType=void 0;var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i);r(154);var s=r(39),u=function(){function SyncObject(e){(0,o.default)(this,SyncObject);var t=this;t._observers=[],t._filters={},this._data=e||{},this._internalObserve(this._data)}return(0,a.default)(SyncObject,[{key:\"observe\",value:function(e){this._observers.push(e)}},{key:\"find\",value:function(e){var t=(0,s.parseAttributes)(e);return this._findWithSplit(t)}},{key:\"findBefore\",value:function(e){var t={},r=(0,s.parseAttributes)(e);return t.last=r.pop(),t.obj=this._findWithSplit(r),t}},{key:\"_findWithSplit\",value:function(e){var t=this._data;return e.forEach(function(e){t=t[e]}),t}},{key:\"_internalObserve\",value:function(e){var t=this,r=function(e){e.every(function(e){t._onChanges(e)})};this._data=Object.deepObserve(e,r)}},{key:\"_fireEvent\",value:function(e){this._observers.forEach(function(t){t(e)})}},{key:\"_onChanges\",value:function(e){var t=e.object,r=void 0;t.constructor===Object&&(r=l.OBJECT),t.constructor===Array&&(r=l.ARRAY);var n=e.keypath,o=t[e.name];\"update\"!==e.type||n.includes(\".length\")||this._fireEvent({cType:c.UPDATE,oType:r,field:n,data:o}),\"add\"===e.type&&this._fireEvent({cType:c.ADD,oType:r,field:n,data:o}),\"delete\"===e.type&&this._fireEvent({cType:c.REMOVE,oType:r,field:n})}},{key:\"data\",get:function(){return this._data}}]),SyncObject}(),c=t.ChangeType={UPDATE:\"update\",ADD:\"add\",REMOVE:\"remove\"},l=t.ObjectType={OBJECT:\"object\",ARRAY:\"array\"};t.default=u},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(36),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(132),f=_interopRequireDefault(d),p=r(39),y=l.getLogger(\"DataObjectChild\"),v=function(){function DataObjectChild(e){function throwMandatoryParmMissingError(e){throw\"[DataObjectChild] \"+e+\" mandatory parameter is missing\"}(0,a.default)(this,DataObjectChild);var t=this;e.parent?t._parent=e.parent:throwMandatoryParmMissingError(\"parent\"),e.url?t._url=e.url:throwMandatoryParmMissingError(\"url\"),e.created?t._created=e.created:throwMandatoryParmMissingError(\"created\"),e.reporter?t._reporter=e.reporter:throwMandatoryParmMissingError(\"reporter\"),e.runtime?t._runtime=e.runtime:throwMandatoryParmMissingError(\"runtime\"),e.schema?t._schema=e.schema:throwMandatoryParmMissingError(\"schema\"),e.parentObject?t._parentObject=e.parentObject:throwMandatoryParmMissingError(\"parentObject\"),e.name&&(t._name=e.name),e.description&&(t._description=e.description),e.tags&&(t._tags=e.tags),e.resources&&(t._resources=e.resources),e.observerStorage&&(t._observerStorage=e.observerStorage),e.publicObservation&&(t._publicObservation=e.publicObservation),t._childId=e.url,e.data?t._syncObj=new f.default(e.data):t._syncObj=new f.default({}),y.log(\"[DataObjectChild -  Constructor] - \",t._syncObj),t._bus=t._parentObject._bus,t._owner=t._parentObject._owner,t._allocateListeners(),t._metadata=e,delete t._metadata.parentObject,t._sharingStatus=!1}return(0,u.default)(DataObjectChild,[{key:\"share\",value:function(e){var t=this;t._sharingStatus=new o.default(function(r,n){var o=void 0;o=e?t.metadata.parent:t.metadata.parent+\"/children/\"+t.metadata.children;var i=t.metadata;i.data=t.data;var a={type:\"create\",from:t.metadata.reporter,to:o,body:{resource:i.url,value:i}};if(t.identity&&(a.body.identity=t.identity),t._parentObject.data.hasOwnProperty(\"mutual\")&&(a.body.mutual=t._parentObject.data.mutual),t._parentObject.metadata.reporter===t.metadata.reporter)return t._bus.postMessage((0,p.deepClone)(a)),r();var s=function(e){if(e.to===t._reporter){t._bus.removeResponseListener(a.from,e.id),y.log(\"[Syncher.DataObjectChild.share] Parent reporter reply \",e);var o={code:e.body&&e.body.code?e.body.code:500,desc:e.body&&e.body.desc?e.body.desc:\"Unknown\"};return e.body.code<300?r(o):n(o)}},u=t._bus.postMessage((0,p.deepClone)(a),s,!1);setTimeout(function(){return t._bus.removeResponseListener(a.from,u),n({code:408,desc:\"timout\"})},3e3)})}},{key:\"store\",value:function(){var e=this,t={},r=e.metadata.children+\".\"+e.metadata.url;t.value=e.metadata,t.identity=e.identity;var n={from:e.metadata.reporter,to:e._parentObject._syncher._subURL,type:\"create\",body:{resource:e.metadata.parent,attribute:r,value:t}};y.log(\"[DataObjectChild.store]:\",n),e._bus.postMessage(n)}},{key:\"_allocateListeners\",value:function(){var e=this;e._reporter===e._owner&&(e._listener=e._bus.addListener(e._reporter,function(t){\"response\"===t.type&&t.id===e._msgId&&(y.log(\"DataObjectChild.onResponse:\",t),e._onResponse(t))}))}},{key:\"_releaseListeners\",value:function(){var e=this;e._listener&&e._listener.remove()}},{key:\"delete\",value:function(){this._releaseListeners()}},{key:\"onChange\",value:function(e){this._syncObj.observe(function(t){y.log(\"[DataObjectChild - observer] - \",t),e(t)})}},{key:\"onResponse\",value:function(e){this._onResponseHandler=e}},{key:\"_onResponse\",value:function(e){var t=this,r={type:e.type,url:e.body.source,code:e.body.code};t._onResponseHandler&&t._onResponseHandler(r)}},{key:\"shareable\",get:function(){var e=this.metadata;return e.data=this.data,e}},{key:\"metadata\",get:function(){return this._metadata}},{key:\"childId\",get:function(){return this._childId}},{key:\"sharingStatus\",get:function(){return this._sharingStatus}},{key:\"data\",get:function(){return this._syncObj.data}},{key:\"identity\",set:function(e){this._identity=e},get:function(){return this._identity}}]),DataObjectChild}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(39),l=function(){function IdentityManager(e,t,r){(0,a.default)(this,IdentityManager);var n=this;n.messageBus=r,n.domain=(0,c.divideURL)(e).domain,n.owner=e,n.runtimeURL=t}return(0,u.default)(IdentityManager,[{key:\"discoverUserRegistered\",value:function(e,t){var r=this;return new o.default(function(n,o){var i=void 0,a=e||\".\";i=t||r.owner;var s={type:\"read\",from:i,to:r.runtimeURL+\"/registry/\",body:{resource:a,criteria:i}};r.messageBus.postMessage(s,function(e){var t=e.body.resource;t&&200===e.body.code?n(t):o(\"code: \"+e.body.code+\" No user was found\")})})}},{key:\"discoverIdentityPerIdP\",value:function(e){var t=this;return new o.default(function(r,n){var o={type:\"read\",from:this.owner,to:t.runtimeURL+\"/idm\",body:{resource:e,criteria:\"idp\"}};t.messageBus.postMessage(o,function(e){200===e.body.code?r(e.body.value):n(e.body.code+\" \"+e.body.desc)})})}}]),IdentityManager}();t.default=l,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(36),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(39),f=r(162),p=_interopRequireDefault(f),y=l.getLogger(\"Discovery\"),v=function(){function Discovery(e,t,r){(0,a.default)(this,Discovery);var n=this;n.messageBus=r,n.runtimeURL=t,n.domain=(0,d.divideURL)(e).domain,n.discoveryURL=e}return(0,u.default)(Discovery,[{key:\"_isLegacyUser\",value:function(e){return!(!e.includes(\":\")||e.includes(\"user://\"))}},{key:\"discoverHypertiesPerUserProfileData\",value:function(e,t,r){var n=this,i=[],a={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/userprofile/\"+e}};return(t||r)&&(a.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):n.messageBus.postMessage(a,function(r){200===r.body.code?(r.body.value.map(function(e){e.hypertyID!=n.discoveryURL&&i.push(e)}),0===i.length?t([]):(y.log(\"[Discovery.discoverHypertiesPerUserProfileData] Reply log: \",i),t(i))):(y.warn(\"[Discovery.discoverHypertiesPerUserProfileData] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverHypertiesPerUserProfileDataDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverHypertiesPerUserProfileData.apply(n,i).then(function(t){e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerUserProfileData\",value:function(e,t,r){var n=this,i={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/userprofile/\"+e}};return(t||r)&&(i.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):n.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerUserProfileData] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerUserProfileDataDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverDataObjectsPerUserProfileData.apply(n,i).then(function(t){return e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHypertiesPerGUID\",value:function(e,t,r){var n=this,i=[],a={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/guid/\"+e}};return(t||r)&&(a.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n.messageBus.postMessage(a,function(o){200===o.body.code?(o.body.value.map(function(e){e.hypertyID!=n.discoveryURL&&i.push(e)}),0===i.length?r(\"No Hyperty was found\"):(y.log(\"Reply log: \",i),t(i))):(y.warn(\"[Discovery.discoverHypertiesPerGUID] Error Reply for \"+e+\" Reason: \",o.body.description),t([]))})})}},{key:\"discoverHypertiesPerGUIDDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverHypertiesPerGUID.apply(n,i).then(function(t){e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerGUID\",value:function(e,t,r){var n=this,i={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/guid/\"+e}};return(t||r)&&(i.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerGUID] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerGUIDDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverDataObjectsPerGUID.apply(n,i).then(function(t){return e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHyperties\",value:function(e,t,r,n){var i=this,a=void 0,s=[];a=n||i.domain;var u={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/user/\"+e}};return u.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):i.messageBus.postMessage(u,function(r){200===r.body.code||500===r.body.code?(r.body.value.map(function(e){e.hypertyID!=i.discoveryURL&&s.push(e)}),y.log(\"[Discovery.discoverHyperties] Reply : \",s),t(s)):(y.warn(\"[Discovery.discoverHyperties] Error Reply for \"+e+\" Reason: \",r.body.description),t(s))})})}},{key:\"discoverHypertiesDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverHyperties.apply(i,a).then(function(t){e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjects\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/user/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjects] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjects.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHypertyPerURL\",value:function(e,t){var r=this,n=void 0;n=t||r.domain;var i={type:\"read\",from:r.discoveryURL,to:r.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/url/\"+e,criteria:{domain:n}}};return new o.default(function(t,n){r.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverHypertyPerURL] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverHypertyPerURLDO\",value:function(e,t){var r=this,n=arguments;return new o.default(function(e,t){r.discoverHypertyPerURL.apply(r,n).then(function(t){return e(new p.default(t,r.runtimeURL,r.discoveryURL,r.messageBus,r))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectPerURL\",value:function(e,t){var r=this,n=void 0;n=t||r.domain;var i={type:\"read\",from:r.discoveryURL,to:r.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/url/\"+e,criteria:{domain:n}}};return new o.default(function(t,n){r.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectPerURL] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectPerURLDO\",value:function(e,t){var r=this,n=arguments;return new o.default(function(e,t){r.discoverDataObjectPerURL.apply(r,n).then(function(t){return e(new p.default(t,r.runtimeURL,r.discoveryURL,r.messageBus,r))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerName\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/name/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerName] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerNameDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjectsPerName.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerReporter\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/reporter/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerName] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerReporterDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjectsPerReporter.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"_convertToDiscoveredObject\",value:function(e){var t=this;return e.map(function(e){return new p.default(e,t.runtimeURL,t.discoveryURL,t.messageBus,t)})}},{key:\"discoverDataObject\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:\"domain://registry.\"+a,body:{resource:e,criteria:{resources:r,dataSchemes:t}}};return new o.default(function(t,r){i.messageBus.postMessage(s,function(r){if(y.log(\"[Discovery]\",r),r.body.code>299)return y.warn(\"[Discovery.discoverDataObject] Error Reply for \"+e+\" Reason: \",r.body.description),t([]);var n=r.body.value;t(n||[])})})}},{key:\"discoverHyperty\",value:function(e,t,r,n){var i=this,a=void 0,s=(0,d.convertToUserURL)(e);return a=n||i.domain,new o.default(function(o,u){if(y.log(\"[Discovery.discoverHyperty] ACTIVE DOMAIN -> \",a,\"user->\",e,\"schema->\",t,\"resources->\",r,\"domain->\",n),e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] \"+e+\" is legacy domain\");return o({userID:e,hypertyID:e,schema:t,resources:r})}var c={type:\"read\",from:i.discoveryURL,to:\"domain://registry.\"+a,body:{resource:s,criteria:{resources:r,dataSchemes:t}}};y.info(\"[Discovery] msg to send->\",c),i.messageBus.postMessage(c,function(e){y.info(\"[Discovery] ON discoverHyperty->\",e);var t=e.body.value;t?o(t):u(\"No Hyperty was found\")})})}},{key:\"discoverHypertyPerUser\",value:function(e,t){var r=this,n=void 0;return new o.default(function(o,i){if(e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] \"+e+\"is legacy domain\");return o({id:e,hypertyURL:e,descriptor:\"unknown\"})}n=t||r.domain;var a=\"user://\"+e.substring(e.indexOf(\"@\")+1,e.length)+\"/\"+e.substring(0,e.indexOf(\"@\")),s={type:\"read\",from:r.discoveryURL,to:\"domain://registry.\"+n,body:{resource:a}};y.info(\"[Discovery] Message: \",s,n,a),r.messageBus.postMessage(s,function(t){y.info(\"[Discovery] message reply\",t);var r=void 0,n=void 0,a=void 0,s=t.body.value;for(r in s)if(void 0!==s[r].lastModified)if(void 0===n)n=new Date(s[r].lastModified),a=r;else{var u=new Date(s[r].lastModified);n.getTime()<u.getTime()&&(n=u,a=r)}y.info(\"[Discovery] Last Hyperty: \",a,n);var c=a;if(void 0===c)return i(\"User Hyperty not found\");var l={id:e,descriptor:s[c].descriptor,hypertyURL:c};y.info(\"[Discovery] ===> hypertyDiscovery messageBundle: \",l),o(l)})})}},{key:\"discoverHypertiesPerUser\",value:function(e,t){var r=this,n=void 0;return y.log(\"on Function->\",e),new o.default(function(o,i){if(e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] is legacy domain\");var a={userID:e,hypertyID:e,schema:schema,resources:resources};return o(a)}n=t||r.domain;var s=\"user://\"+e.substring(e.indexOf(\"@\")+1,e.length)+\"/\"+e.substring(0,e.indexOf(\"@\")),u={type:\"read\",from:r.discoveryURL,to:\"domain://registry.\"+n,body:{resource:s}};y.log(\"[Discovery] Message discoverHypertiesPerUser: \",u,n,s),r.messageBus.postMessage(u,function(e){y.info(\"[Discovery] discoverHypertiesPerUser reply\",e);var t=e.body.value;if(!t)return i(\"User Hyperty not found\");o(t)})})}},{key:\"resumeDiscoveries\",value:function(){var e=this;return y.log(\"[Discovery] resumeDiscoveries\"),new o.default(function(t,r){var n={type:\"read\",from:e.discoveryURL,to:e.runtimeURL+\"/subscriptions\",body:{resource:e.discoveryURL}};e.messageBus.postMessage(n,function(r){y.log(\"[Discovery.resumeDiscoveries] reply: \",r);var n=[];if(200===r.body.code){r.body.value.forEach(function(t){var r=t.split(\"/registration\")[0];({}).url=r,y.log(\"[Discovery.resumeDiscoveries] adding listener to: \",r),r.includes(\"hyperty://\")?n.push(e.discoverHypertyPerURLDO(r)):n.push(e.discoverDataObjectPerURLDO(r))}),o.default.all(n).then(function(e){t(e)})}else t([])})})}}]),Discovery}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(137),b=_interopRequireDefault(_),m=function(e){function ContextObserver(e,t,r,n,o,i){if((0,l.default)(this,ContextObserver),!e)throw new Error(\"The hypertyURL is a needed parameter\");if(!t)throw new Error(\"The MiniBus is a needed parameter\");if(!r)throw new Error(\"The configuration is a needed parameter \");if(!o)throw new Error(\"The factory is a needed parameter \");var a=(0,y.default)(this,(ContextObserver.__proto__||(0,u.default)(ContextObserver)).call(this)),s=a;s._contextResourceTypes=n,s._url=e,s._discoverUsersPromises={},s._observePromises={},s._domain=o.divideURL(r.runtimeURL).domain,s._objectDescURL=\"hyperty-catalogue://catalogue.\"+s._domain+\"/.well-known/dataschema/Context\",s._users2observe=[],s._observers={},a._syncher=i||o.createSyncher(e,t,r);var c=o.createDiscovery(e,r.runtimeURL,t);return s._discovery=c,s._discoveries={},window.discovery=s._discovery,a}return(0,h.default)(ContextObserver,e),(0,f.default)(ContextObserver,[{key:\"start\",value:function(e,t){var r=this;return new a.default(function(n,i){r._syncher.resumeObservers({store:!0}).then(function(i){var a=(0,o.default)(i);a.length>0?(r._observers=i,n(i),a.forEach(function(r){var n=i[r];e&&(context.data.values=e),n.sync(),t&&n.onDisconnected(t)})):n(!1)}).catch(function(e){n(!1)})}).catch(function(e){reject(\"[ContextObserver] Start failed | \",e)})}},{key:\"resumeDiscoveries\",value:function(){var e=this;return new a.default(function(t,r){e._discovery.resumeDiscoveries().then(function(r){r.forEach(function(r){r.data.resources&&r.data.resources[0]===e._contextResourceTypes[0]&&(\"live\"===r.data.status?(t([r.data]),r.unsubscribeLive(e._url)):r.onLive(e._url,function(){t([r.data]),r.unsubscribeLive(e._url)}))})})}).catch(function(e){reject(\"[ContextObserver] resumeDiscoveries failed | \",e)})}},{key:\"onResumeObserver\",value:function(e){this._onResumeObserver=e}},{key:\"discoverUsers\",value:function(e,t){var r=this,n=e+\"@\"+t;return r._discoverUsersPromises[n]||(r._discoverUsersPromises[n]=new a.default(function(n,o){r._discovery.discoverHypertiesDO(e,[\"context\"],r._contextResourceTypes,t).then(function(e){var t=[],o=[];e.forEach(function(e){r._discoveries[e.data.hypertyID]=e,\"live\"===e.data.status?t.push(e.data):o.push(e)}),t.length>0?n(t):o.length>0&&o[0].onLive(r._url,function(){t.push(o[0].data),n(t),o[0].unsubscribeLive(r._url)})})})),r._discoverUsersPromises[n]}},{key:\"observe\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return r._observePromises[e.hypertyID]||(r._observePromises[e.hypertyID]=new a.default(function(n,o){r._users2observe.forEach(function(t){if(t._reporter===e.hypertyID)return n(t)}),r._discovery.discoverDataObjectsPerReporter(e.hypertyID,[\"context\"],r._contextResourceTypes,r._domain).then(function(i){var a=0,s=void 0;i.forEach(function(e){e.hasOwnProperty(\"lastModified\")&&e.hasOwnProperty(\"url\")&&Date.parse(e.lastModified)>a&&(a=e.lastModified,s=e.url)}),0!=a&&s?n(r._subscribeContext(e,s,t)):o(\"[ContextObserver.observe] discovered DataObjecs are invalid\",i)})})),r._observePromises[e.hypertyID]}},{key:\"_subscribeContext\",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this;return new a.default(function(e,o){n._users2observe.forEach(function(r){if(r.url===t)return e(r)}),n._syncher.subscribe(n._objectDescURL,t,null,null,null,r).then(function(t){n._users2observe.push(t),t.onDisconnected(function(){t.data.values[0].value=\"unavailable\",t.sync()}),e(t)})})}},{key:\"_discoverAndSubscribeLegacyUsers\",value:function(e){var t=this;return new a.default(function(r,n){t._discovery.discoverDataObjectsPerName(e).then(function(e){e.forEach(function(e){\"live\"===e.status&&(e.hypertyID||(e.hypertyID=e.reporter),t._subscribeContext(e.schema,e.url).then(function(e){return r(e)}))})}).catch(function(e){})})}},{key:\"unobserve\",value:function(e){var t=this;t._users2observe.forEach(function(r,n){r.url===e&&(r.unsubscribe(),t._users2observe.splice(n,1))})}}]),ContextObserver}(b.default);t.default=m,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=function(){function EventEmitter(){(0,o.default)(this,EventEmitter)}return(0,a.default)(EventEmitter,[{key:\"addEventListener\",value:function(e,t){this[e]=t}},{key:\"trigger\",value:function(e,t){var r=this;r[e]&&r[e](t)}}]),EventEmitter}();t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(137),b=_interopRequireDefault(_),m=function(e){function ContextReporter(e,t,r,n,o){if((0,l.default)(this,ContextReporter),!e)throw new Error(\"The hypertyURL is a needed parameter\");if(!t)throw new Error(\"The MiniBus is a needed parameter\");if(!r)throw new Error(\"The configuration is a needed parameter\");var i=(0,y.default)(this,(ContextReporter.__proto__||(0,u.default)(ContextReporter)).call(this,e,t,r));return i.syncher=o||n.createSyncher(e,t,r),i.domain=n.divideURL(r.runtimeURL).domain,i.contexts={},i.contextDescURL=\"hyperty-catalogue://catalogue.\"+i.domain+\"/.well-known/dataschema/Context\",i.syncher.onNotification(function(e){i.onNotification(e)}),i.syncher.onClose(function(e){i.setStatus(e.id,\"unavailable\"),e.ack()}),i}return(0,h.default)(ContextReporter,e),(0,f.default)(ContextReporter,[{key:\"start\",value:function(){var e=this,t=this;return new a.default(function(r,n){e.syncher.resumeReporters({store:!0}).then(function(e){var n=(0,o.default)(e);n.length>0?(t.contexts=e,n.forEach(function(e){t._onSubscription(t.contexts[e])}),r(t.contexts)):r(!1)}).catch(function(e){})}).catch(function(e){reject(\"[ContextReporter] Start failed | \",e)})}},{key:\"processNotification\",value:function(e){e.ack()}},{key:\"create\",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"myContext\",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=this,u=void 0;return new a.default(function(a,c){u=o||i?o&&!i?{resources:r,expires:30,reporter:o}:!o&&i?{resources:r,expires:30,reuseURL:i}:{resources:r,expires:30,reuseURL:i,reporter:o}:{resources:r,expires:30},s.syncher.create(s.contextDescURL,[],t,!0,!1,n,null,u).then(function(t){s.contexts[e]=t,s._onSubscription(t),a(t)}).catch(function(e){c(e)})})}},{key:\"_onSubscription\",value:function(e){e.onSubscription(function(e){e.accept()})}},{key:\"setContext\",value:function(e,t){var r=this;r.contexts[e].data.values=t,r.trigger(e+\"-context-update\",t)}}]),ContextReporter}(b.default);t.default=m,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(69),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(125),f=_interopRequireDefault(d),p=r(168),y=_interopRequireDefault(p),v=function(){function ChatController(e,t,r,n,o,i){if((0,u.default)(this,ChatController),!e)throw Error(\"Syncher is a necessary dependecy\");if(!t)throw Error(\"Discover is a necessary dependecy\");if(!r)throw Error(\"Domain is a necessary dependecy\");if(!n)throw Error(\"Search is a necessary dependecy\");var a=this;a._syncher=e,a.discovery=t,a.search=n,a.myIdentity=o,a.controllerMode=\"reporter\",a.child_cseq=0,a.domain=r,a._manager=i;var s=e.owner;a._objectDescURL=\"hyperty-catalogue://catalogue.\"+r+\"/.well-known/dataschema/Communication\",a._invitationsHandler=new y.default(s)}return(0,l.default)(ChatController,[{key:\"_setOnAddChildListener\",value:function(e){var t=this;e.onAddChild(function(e){t.child_cseq+=1,t._onMessage&&t._onMessage(e)})}},{key:\"_onSubscribe\",value:function(e){var t=this._dataObjectReporter;e.accept();var r=JSON.parse((0,a.default)(e.identity));r.hasOwnProperty(\"assertion\")&&delete r.assertion;var n={hypertyURL:e.url,domain:e.domain,identity:r},o=e.identity.userProfile.userURL;e.identity.legacy&&(n.legacy=e.identity.legacy),t.data.participants[o]=n,this._onUserAdded&&this._onUserAdded(n)}},{key:\"_onUnsubscribe\",value:function(e){var t=this._dataObjectReporter,r=e.identity.userProfile;e.identity.legacy&&(r.legacy=e.identity.legacy),delete t.data.participants[r.userURL],this._onUserRemoved&&this._onUserRemoved(r)}},{key:\"sendFile\",value:function(e){var t=this,r=t.controllerMode,n=\"reporter\"===r?t.dataObjectReporter:t.dataObjectObserver;return new o.default(function(r,o){var i={userProfile:t.myIdentity};n.addHypertyResource(\"resources\",\"file\",e,i).then(function(e){var o={userProfile:t.myIdentity},i={value:e,identity:o,resource:e},a=new f.default(n.url,t._manager._runtimeURL,t._manager._hypertyURL,t._manager._bus);!function share2Reporter(e,t,n,o){var i=o;e.sharingStatus.then(r(n)).catch(function(r){i.onLive(t,function(){i.unsubscribeLive(t),e.share(!0),share2Reporter(e,t,n,i)})})}(e,t._manager._hypertyURL,i,a)})}).catch(function(e){reject(e)})}},{key:\"send\",value:function(e,t){var r=this,n=r.controllerMode,i=\"reporter\"===n?r.dataObjectReporter:r.dataObjectObserver;return new o.default(function(n,o){r.child_cseq+=1;var a={type:\"chat\",content:e},s=t||{userProfile:r.myIdentity};i.addChild(\"resources\",a,s).then(function(e){var t={childId:e._childId,from:e._owner,value:e.data,type:\"create\",identity:s},o=new f.default(i.url,r._manager._runtimeURL,r._manager._hypertyURL,r._manager._bus);!function share2Reporter(e,t,r,o){var i=o;e.sharingStatus.then(n(r)).catch(function(n){i.onLive(t,function(){i.unsubscribeLive(t),e.share(!0),share2Reporter(e,t,r,i)})})}(e,r._manager._hypertyURL,t,o)}).catch(function(e){o(e)})})}},{key:\"onChange\",value:function(e){this._onChange=e}},{key:\"onMessage\",value:function(e){this._onMessage=e}},{key:\"onUserAdded\",value:function(e){this._onUserAdded=e}},{key:\"onUserRemoved\",value:function(e){this._onUserRemoved=e}},{key:\"onClose\",value:function(e){this._onClose=e}},{key:\"onResponse\",value:function(e){this._onResponse=e}},{key:\"addUser\",value:function(e){var t=this,r=function(e){return 0!==e.length};return new o.default(function(n,i){if(0===e.filter(r).length)return i(\"Don't have users to invite\");var a=[],s=[],u={};e.forEach(function(e){var r=t.discovery.discoverHypertiesDO(e.user,[\"comm\"],[\"chat\"],e.domain);a.push(r)}),o.default.all(a).then(function(e){var r=[];e.forEach(function(e){e.forEach(function(e){\"live\"===e.data.status?(r.push(e.data.hypertyID),u[e.data.hypertyID]=e):s.length<5&&s.push(e)})});var n=\"reporter\"===t.controllerMode?t.dataObjectReporter:t.dataObjectObserver;s.length>0&&t._invitationsHandler.inviteDisconnectedHyperties(s,n),n.inviteObservers(r),n.invitations.length>0&&t._invitationsHandler.processInvitations(u,n)}).then(function(){n(!0)}).catch(function(e){i(e)})})}},{key:\"addUserReq\",value:function(e){var t=this,r=function(e){return 0!==e.length};return new o.default(function(n,o){if(0===e.filter(r).length)return o(\"[ChatManager.ChatController.addUserReq] Don't have users to add\");if(\"observer\"===!t.controllerMode){return o(\"[ChatManager.ChatController.addUserReq] only allowed to Chat Observer\")}})}},{key:\"onInvitationResponse\",value:function(e){var t=this;t._onInvitationResponse=e,t._invitationsHandler.invitationResponse=e}},{key:\"removeUser\",value:function(e){}},{key:\"close\",value:function(){var e=this;return new o.default(function(t,r){if(\"reporter\"===e.controllerMode)e._invitationsHandler.cleanInvitations(e.dataObjectReporter).then(function(){try{delete e._manager._reportersControllers[e.dataObjectReporter.url],e.dataObjectReporter.delete(),t(!0),e._onClose&&e._onClose({code:200,desc:\"deleted\",url:e.dataObjectReporter.url})}catch(e){r(!1)}});else try{delete e._manager._observersControllers[e.dataObjectObserver.url],e.dataObjectObserver.unsubscribe(),t(!0)}catch(e){r(!1)}})}},{key:\"invitationsHandler\",get:function(){return this._invitationsHandler}},{key:\"url\",get:function(){return\"reporter\"===this.controllerMode?this.dataObjectReporter.url:this.dataObjectObserver.url}},{key:\"dataObjectReporter\",set:function(e){if(!e)throw new Error(\"[ChatController] The data object reporter is necessary parameter \");var t=this;t.controllerMode=\"reporter\",e.onSubscription(function(e){switch(e.type){case\"subscribe\":t._onSubscribe(e);break;case\"unsubscribe\":t._onUnsubscribe(e)}}),t._setOnAddChildListener(e),e.onRead(function(e){e.accept()}),e.onExecute(function(e){switch(e.method){case\"addUser\":t.addUser(e.params[0]).then(function(){e.accept()}).catch(function(t){e.reject(t)});break;case\"removeUser\":t.removeUser(e.params).then(function(){e.accept()}).catch(function(t){e.reject(t)});break;default:e.reject(\"[ChatController.onExecute] Chat method execution not accepted by Reporter\")}}),t._dataObjectReporter=e},get:function(){return this._dataObjectReporter}},{key:\"messages\",get:function(){return\"reporter\"===this.controllerMode?this._dataObjectReporter._childrenObjects.resources:this._dataObjectObserver._childrenObjects.resources}},{key:\"dataObjectObserver\",set:function(e){var t=this;t.controllerMode=\"observer\",t._dataObjectObserver=e,e.onChange(\"*\",function(e){if(e.field.includes(\"participants\"))switch(e.cType){case\"add\":t._onUserAdded&&t._onUserAdded(e);break;case\"remove\":t._onUserRemoved&&t._onUserRemoved(e)}t._onChange&&t._onChange(e)}),t._setOnAddChildListener(e)},get:function(){return this._dataObjectObserver}},{key:\"dataObject\",get:function(){return\"reporter\"===this.controllerMode?this.dataObjectReporter:this.dataObjectObserver}},{key:\"closeEvent\",set:function(e){var t=this;t._closeEvent=e,t._onClose&&t._onClose(e)},get:function(){return this._closeEvent}}]),ChatController}();t.default=v,e.exports=t.default},,,,,,,,,,,,function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.ContextReporter=t.ContextObserver=t.IdentityManager=t.Discovery=t.Syncher=t.SandboxFactory=t.SandboxRegistry=t.SandboxType=t.Sandbox=void 0;var n=r(152),o=_interopRequireDefault(n),i=r(128),a=_interopRequireDefault(i),s=r(129),u=_interopRequireDefault(s),c=r(130),l=_interopRequireDefault(c),d=r(135),f=_interopRequireDefault(d),p=r(134),y=_interopRequireDefault(p),v=r(136),h=_interopRequireDefault(v),_=r(138),b=_interopRequireDefault(_);t.Sandbox=o.default,t.SandboxType=n.SandboxType,t.SandboxRegistry=a.default,t.SandboxFactory=u.default,t.Syncher=l.default,t.Discovery=f.default,t.IdentityManager=y.default,t.ContextObserver=h.default,t.ContextReporter=b.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.SandboxType=void 0;var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(128),b=_interopRequireDefault(_),m=r(126),g=_interopRequireDefault(m),R=(t.SandboxType={APP:\"app\",NORMAL:\"normal\",WINDOW:\"window\"},function(e){function Sandbox(e){(0,l.default)(this,Sandbox);var t=(0,y.default)(this,(Sandbox.__proto__||(0,u.default)(Sandbox)).call(this)),r=t;return e&&(r.capabilities=e),t}return(0,h.default)(Sandbox,e),(0,f.default)(Sandbox,[{key:\"deployComponent\",value:function(e,t,r){var n=this;return new a.default(function(o,i){var a={type:\"create\",from:b.default.ExternalDeployAddress,to:b.default.InternalDeployAddress,body:{url:t,sourceCode:e,config:r}};n.postMessage(a,function(e){200===e.body.code?o(\"deployed\"):i(e.body.desc)})})}},{key:\"removeComponent\",value:function(e){var t=this;return new a.default(function(r,n){var o={type:\"delete\",from:b.default.ExternalDeployAddress,to:b.default.InternalDeployAddress,body:{url:e}};t.postMessage(o,function(e){200===e.body.code?r(\"undeployed\"):n(e.body.desc)})})}},{key:\"matches\",value:function(e){var t=this,r=(0,o.default)(e).filter(function(r){return!(t.capabilities[r]&&t.capabilities[r]===e[r])});return 0===r.length||!e[r]}}]),Sandbox}(g.default));t.default=R},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(69),a=_interopRequireDefault(i),s=r(17),u=_interopRequireDefault(s),c=r(26),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(34),h=_interopRequireDefault(v),_=r(116),b=_interopRequireDefault(_),m=r(35),g=_interopRequireDefault(m),R=r(36),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(R),D=r(131),w=_interopRequireDefault(D),j=r(39),L=O.getLogger(\"DataObjectReporter\"),k=function(e){function DataObjectReporter(e){(0,f.default)(this,DataObjectReporter);var t=(0,h.default)(this,(DataObjectReporter.__proto__||(0,l.default)(DataObjectReporter)).call(this,e)),r=t;return r._subscriptions={},r._syncObj.observe(function(e){L.log(\"[Syncher.DataObjectReporter] \"+r.url+\" publish change: \",e),r._onChange(e)}),r._allocateListeners(),r.invitations=[],r._childrenSizeThreshold=5e4,t}return(0,g.default)(DataObjectReporter,e),(0,y.default)(DataObjectReporter,[{key:\"_allocateListeners\",value:function(){(0,b.default)(DataObjectReporter.prototype.__proto__||(0,l.default)(DataObjectReporter.prototype),\"_allocateListeners\",this).call(this);var e=this;e._objectListener=e._bus.addListener(e._url,function(t){switch(L.log(\"[Syncher.DataObjectReporter] listener \"+e._url+\" Received: \",t),t.type){case\"response\":e._onResponse(t);break;case\"read\":e._onRead(t);break;case\"execute\":e._onExecute(t);break;case\"create\":e._onChildCreate(t)}})}},{key:\"_releaseListeners\",value:function(){(0,b.default)(DataObjectReporter.prototype.__proto__||(0,l.default)(DataObjectReporter.prototype),\"_releaseListeners\",this).call(this),this._objectListener.remove()}},{key:\"inviteObservers\",value:function(e,t){var r=this,n=e;n.length>0&&(L.log(\"[Syncher.DataObjectReporter] InviteObservers \",n,r._metadata),n.forEach(function(e){var n=new u.default(function(n,o){var i={type:\"create\",from:r._syncher._owner,to:r._syncher._subURL,body:{resume:!1,resource:r._url,schema:r._schema,value:r._metadata,authorise:[e]}};t&&(i.body.p2p=t),r.data.mutual||(i.body.mutual=r.data.mutual),r._bus.postMessage(i,function(t){L.log(\"[Syncher.DataObjectReporter] Invitation reply \",t);var r={invited:e,code:t.body&&t.body.code?t.body.code:500,desc:t.body&&t.body.desc?t.body.desc:\"Unknown\"};r.code<300?n(r):r.code>=300&&o(r)})});r.invitations.push(n)}))}},{key:\"delete\",value:function(){var e=this;e._deleteChildrens().then(function(t){L.log(t);var r={type:\"delete\",from:e._owner,to:e._syncher._subURL,body:{resource:e._url}};e._bus.postMessage(r,function(t){L.log(\"DataObjectReporter-DELETE: \",t),200===t.body.code&&(e._releaseListeners(),delete e._syncher._reporters[e._url],e._syncObj={})})})}},{key:\"onSubscription\",value:function(e){this._onSubscriptionHandler=e}},{key:\"onResponse\",value:function(e){this._onResponseHandler=e}},{key:\"onRead\",value:function(e){this._onReadHandler=e}},{key:\"onExecute\",value:function(e){this._onExecuteHandler=e}},{key:\"_onForward\",value:function(e){var t=this;switch(L.log(\"DataObjectReporter-RCV: \",e),e.body.type){case\"subscribe\":t._onSubscribe(e);break;case\"unsubscribe\":t._onUnSubscribe(e)}}},{key:\"_onSubscribe\",value:function(e){var t=this,r=e.body.from,n=(0,j.divideURL)(r),o=n.domain,i=!0;e.body.hasOwnProperty(\"mutual\")&&!e.body.mutual&&(i=!1),L.log(\"[DataObjectReporter._onSubscribe]\",e,o,n);var a={type:e.body.type,url:r,domain:o,identity:e.body.identity,nutual:i,accept:function(){var n={url:r,status:\"live\"};t._subscriptions[r]=n,t.metadata.subscriptions&&t.metadata.subscriptions.push(n.url);var o=(0,j.deepClone)(t._metadata);o.data=(0,j.deepClone)(t.data),o.version=t._version;var i={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200,schema:t._schema,value:o}};return e.body.hasOwnProperty(\"mutual\")&&!e.body.mutual&&(i.body.mutual=e.body.mutual,t.data.mutual=!1),t._bus.postMessage(i),n},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:403,desc:r}})}};t._onSubscriptionHandler&&(L.log(\"SUBSCRIPTION-EVENT: \",a),t._onSubscriptionHandler(a))}},{key:\"_onUnSubscribe\",value:function(e){var t=this,r=e.body.from,n=(0,j.divideURL)(r),o=n.domain;L.log(\"[DataObjectReporter._onUnSubscribe]\",e,o,n),delete t._subscriptions[r],delete t.invitations[r];var i={type:e.body.type,url:r,domain:o,identity:e.body.identity};t._onSubscriptionHandler&&(L.log(\"UN-SUBSCRIPTION-EVENT: \",i),t._onSubscriptionHandler(i))}},{key:\"_onResponse\",value:function(e){var t=this,r={type:e.type,url:e.from,code:e.body.code};t._onResponseHandler&&(L.log(\"RESPONSE-EVENT: \",r),t._onResponseHandler(r))}},{key:\"_onRead\",value:function(e){var t=this,r=(0,a.default)(t.childrensJSON).length,n=r>t._childrenSizeThreshold,i={type:e.type,url:e.from,accept:function(){n?t._syncReplyForLargeData(e):t._syncReply(e)},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:401,desc:r}})}},s=[];t.metadata.subscriptions?s=t.metadata.subscriptions:t._subscriptions&&(s=(0,o.default)(t._subscriptions).map(function(e){return t._subscriptions[e].url})),-1!=s.indexOf(e.from)?n?t._syncReplyForLargeData(e):t._syncReply(e):t._onReadHandler&&(L.log(\"READ-EVENT: \",i),t._onReadHandler(i))}},{key:\"_syncReply\",value:function(e){var t=this,r=(0,j.deepClone)(t.metadata);r.data=(0,j.deepClone)(t.data),r.childrenObjects=(0,j.deepClone)(t.childrensJSON),r.version=t._version;var n={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200,value:r}};t._bus.postMessage(n)}},{key:\"_syncReplyForLargeData\",value:function(e){var t=this,r=(0,j.deepClone)(t.metadata);r.data=(0,j.deepClone)(t.data),r.version=t._version,delete r.childrenObjects;var n=void 0,o=[],i={};for(n in t._childrenObjects){var s=void 0;i[n]={};for(s in t._childrenObjects[n])(0,a.default)(i).length>t._childrenSizeThreshold&&(o.push(i),i={},i[n]={}),i[n][s]={},i[n][s].value=t._childrenObjects[n][s].metadata,i[n][s].identity=t._childrenObjects[n][s].identity}o.push(i),r.responses=o.length+1;var u={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:100,value:r}};t._bus.postMessage(u),o.forEach(function(e){var n=(0,j.deepClone)(u);n.body.value=e,n.body.value.responses=r.responses,setTimeout(function(){t._bus.postMessage(n)},50)})}},{key:\"_onExecute\",value:function(e){var t=this;if(!e.body.method)throw e;var r={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200}},n={type:e.type,url:e.from,method:e.body.method,params:e.body.params,accept:function(){t._bus.postMessage(r)},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:401,desc:r}})}};t._onExecuteHandler&&(L.log(\"[DataObjectReporter] EXECUTE-EVENT: \",n),t._onExecuteHandler(n))}},{key:\"subscriptions\",get:function(){return this._subscriptions}},{key:\"childrensJSON\",get:function(){var e=this,t={},r=void 0;for(r in e._childrenObjects){var n=void 0;t[r]={};for(n in e._childrenObjects[r])t[r][n]={},t[r][n].value=e._childrenObjects[r][n].metadata,t[r][n].identity=e._childrenObjects[r][n].identity}return t}}]),DataObjectReporter}(w.default);t.default=k,e.exports=t.default},function(e,t){!function(){\"use strict\";function Observer(e,t,r,n,o,i){function deliver(e,n){if(deliver.delay=n,!deliver.pause&&s.changeset.length>0){if(!e){var o=s.changeset.filter(function(e){return!r||r.indexOf(e.type)>=0});o.length>0&&t(o)}s.changeset=[]}}var a,s=this;return deliver.pause=o,deliver.delay=i,s.get=function(e,t){return\"__observer__\"===t?s:\"unobserve\"===t?function(){return Object.unobserve(e),e}:\"deliver\"===t?deliver:e[t]},s.target=e,s.changeset=[],s.target.__observerCallbacks__||(Object.defineProperty(e,\"__observerCallbacks__\",{enumerable:!1,configurable:!0,writable:!1,value:[]}),Object.defineProperty(e,\"__observers__\",{enumerable:!1,configurable:!0,writable:!1,value:[]})),s.target.__observerCallbacks__.push(t),s.target.__observers__.push(this),a=new Proxy(e,s),deliver(!1,i),a}Object.observe||\"function\"!=typeof Proxy||(Observer.prototype.deliver=function(){return this.get(null,\"deliver\")},Observer.prototype.set=function(e,t,r){var n=e[t],o=void 0===n?\"add\":\"update\";if(e[t]=r,e.__observers__.indexOf(this)>=0&&(!this.acceptlist||this.acceptlist.indexOf(o)>=0)){var i={object:e,name:t,type:o},a=0===this.changeset.length,s=this.deliver();\"update\"===o&&(i.oldValue=n),this.changeset.push(i),a&&s(!1,\"number\"==typeof s.delay?s.delay:10)}return!0},Observer.prototype.deleteProperty=function(e,t){var r=e[t];if(delete e[t],e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"delete\")>=0){var n={object:e,name:t,type:\"delete\",oldValue:r},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.defineProperty=function(e,t,r){if(Object.defineProperty(e,t,r),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"reconfigure\")>=0){var n={object:e,name:t,type:\"reconfigure\"},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.setPrototypeOf=function(e,t){var r=Object.getPrototypeOf(e);if(Object.setPrototypeOf(e,t),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"setPrototype\")>=0){var n={object:e,name:\"__proto__\",type:\"setPrototype\",oldValue:r},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.preventExtensions=function(e){if(Object.preventExtensions(e),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"preventExtensions\")>=0){var t={object:e,type:\"preventExtensions\"},r=0===this.changeset.length,n=this.deliver();this.changeset.push(t),r&&n(!1,\"number\"==typeof n.delay?n.delay:10)}return!0},Object.observe=function(e,t,r,n,o,i){return new Observer(e,t,r,n,o,i)},Object.unobserve=function(e,t){if(e.__observerCallbacks__){if(!t)return e.__observerCallbacks__.splice(0,e.__observerCallbacks__.length),void e.__observers__.splice(0,e.__observers__.length);e.__observerCallbacks__.forEach(function(r,n){t===r&&(e.__observerCallbacks__.splice(n,1),delete e.__observers__[n].callback,e.__observers__.splice(n,1))})}},Array.observe=function(e,t,r,n,o,i){if(!(e instanceof Array||Array.isArray(e)))throw new TypeError(\"First argument to Array.observer is not an Array\");r=r||[\"add\",\"update\",\"delete\",\"splice\"];var a=new Proxy(e,{get:function(t,n){return\"unobserve\"===n?function(e){return e?Object.unobserve(t,e):t.unobserve()}:\"splice\"===n?function(n,o){if(\"number\"!=typeof n||\"number\"!=typeof o)throw new TypeError(\"First two arguments to Array splice are not number, number\");var i=this.slice(n,n+o),a=arguments.length>1?arguments.length-2:0,u={object:e,type:\"splice\",index:n,removed:i,addedCount:a};if(t.splice.apply(t,arguments),r.indexOf(\"splice\")>=0){var n=0===s.__observer__.changeset.length,c=s.__observer__.deliver();s.__observer__.changeset.push(u),n&&c(!1,\"number\"==typeof c.delay?c.delay:10)}}:\"push\"===n?function(e){return this.splice(this.length,0,e)}:\"pop\"===n?function(){return this.splice(this.length-1,1)}:\"unshift\"===n?function(e){return this.splice(0,0,e)}:\"shift\"===n?function(){return this.splice(0,1)}:t[n]}}),s=Object.observe(a,function(e){var n=e.filter(function(e){return\"length\"!==e.name&&\"add\"!==e.name&&(!r||r.indexOf(e.type)>=0)});n.length>0&&t(n)},r,n,o,i);return s},Array.unobserve=function(e,t){return e.unobserve(t)}),Object.deepObserve=function(e,t,r){function reobserve(e,r){Object.keys(e).forEach(function(o){if((\"object\"===n(e[o])||\"array\"===n(e[o]))&&!e[o].hasOwnProperty(\"__observers__\")){var i=r.slice(0);i.push(o),e[o]=Object.deepObserve(e[o],t,i)}})}r=r||[];var n=function(e){return{}.toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()};return reobserve(e,r),Object.observe(e,function(e){function recurse(e,t,r,o,i){if(o instanceof Object){Object.keys(o).forEach(function(a){if(!r||r[a]!==o[a]){var s=r&&void 0!==r[a]?r[a]:void 0,u=void 0===s?\"add\":\"update\",c=i+\".\"+a;n.push({name:e,object:t,type:u,oldValue:s,newValue:o[a],keypath:c}),recurse(e,t,s,o[a],c)}})}else if(r instanceof Object){var a=Object.keys(r);a.forEach(function(a){var s=null===o?\"update\":\"delete\",u=i+\".\"+a;n.push({name:e,object:t,type:s,oldValue:r[a],newValue:o,keypath:u}),recurse(e,t,r[a],void 0,u)})}}var n=[];e.forEach(function(e){var t=(r.length>0?r.join(\".\")+\".\":\"\")+e.name;\"update\"!==e.type&&\"add\"!==e.type||reobserve(e.object,r),n.push({name:e.name,object:e.object,type:e.type,oldValue:e.oldValue,newValue:e.object[e.name],keypath:t}),recurse(e.name,e.object,e.oldValue,e.object[e.name],t)}),t(n)})}}()},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(156),l=_interopRequireDefault(c),d=function(){function HypertyResourceFactory(){(0,a.default)(this,HypertyResourceFactory)}return(0,u.default)(HypertyResourceFactory,[{key:\"createHypertyResource\",value:function(e,t,r){var n=void 0;switch(t){case\"file\":n=new l.default(e,r);break;default:throw new Error(\"[HypertyResourceFactory.createHypertyResource] not supported type: \",t)}return n}},{key:\"createHypertyResourceWithContent\",value:function(e,t,r,n){var i=void 0;return new o.default(function(o){switch(t){case\"file\":i=new l.default(e,n);break;default:reject()}i.init(r).then(function(){return i.save()}).then(function(){o(i)})})}}]),HypertyResourceFactory}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(26),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(34),f=_interopRequireDefault(d),p=r(35),y=_interopRequireDefault(p),v=r(36),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),_=r(157),b=_interopRequireDefault(_),m=(r(39),r(158)),g=_interopRequireDefault(m),R=h.getLogger(\"FileHypertyResource\"),O=function(e){function FileHypertyResource(e,t){(0,u.default)(this,FileHypertyResource);var r=(0,f.default)(this,(FileHypertyResource.__proto__||(0,a.default)(FileHypertyResource)).call(this,e,t));return r.metadata.resourceType=\"file\",r}return(0,y.default)(FileHypertyResource,e),(0,l.default)(FileHypertyResource,[{key:\"init\",value:function(e){var t=this;if(!e)throw new Error(\"[FileHypertyResource.constructor] missing mandatory *file* input \");return new o.default(function(r,n){if(t._metadata.name=e.name,t._metadata.lastModified=e.lastModified,t._metadata.size=e.size,t._metadata.mimetype=e.type,R.log(\"[FileHypertyResource.init] file: \",e),t._isSender){switch(e.type.split(\"/\")[0]){case\"image\":t._getImagePreview(e).then(function(n){t._metadata.preview=n,t._content=e,r()});break;default:t._content=e,r()}}else t._content=e.content,e.preview&&(t._metadata.preview=e.preview),r()})}},{key:\"_getImagePreview\",value:function(e){var t=new FileReader;return new o.default(function(r,n){g.default.resize(e,{width:100,height:100},function(e,n){n?(t.readAsDataURL(e),t.onload=function(e){r(e.target.result)}):(R.warn(\"[FileHypertyResource._getImagePreview] unable to create image preview from original image \"),r(void 0))})})}},{key:\"toMessage\",value:function(){}},{key:\"name\",get:function(){return this._metadata.name}},{key:\"preview\",get:function(){return this._metadata.preview}}]),FileHypertyResource}(b.default);t.default=O,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(26),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(34),f=_interopRequireDefault(d),p=r(116),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(36),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(_),m=r(39),g=r(133),R=_interopRequireDefault(g),O=b.getLogger(\"HypertyResource\"),D=function(e){function HypertyResource(e,t){(0,u.default)(this,HypertyResource);var r=(0,f.default)(this,(HypertyResource.__proto__||(0,a.default)(HypertyResource)).call(this,t)),n=r;return n.arraybufferSizeLimit=5242880,n._isSender=e,n._localStorageURL=n._parentObject._syncher._runtimeUrl+\"/storage\",r}return(0,h.default)(HypertyResource,e),(0,l.default)(HypertyResource,[{key:\"save\",value:function(){var e=this;return new o.default(function(t,r){var n={from:e._owner,to:e._localStorageURL,type:\"create\",body:{value:(0,m.deepClone)(e._metadata)}},o=function(n){O.info(\"[HypertyResource.save] reply: \",n),e._bus.removeResponseListener(e._owner,n.id),200===n.body.code?(n.body.value&&(e._metadata.contentURL||(e._metadata.contentURL=[]),e._metadata.contentURL.push(n.body.value)),t()):r(n.body.code+\" \"+n.body.desc)};n.body.value.content=e._content,e._bus.postMessage(n,o,!1)})}},{key:\"read\",value:function(e){var t=this;return O.info(\"[HypertyResource.read] \",this),new o.default(function(r,n){if(t.content)r(t);else{var o=t._getBestContentURL(t._metadata.contentURL);O.log(\"Storage:\",o);var i={from:t._owner,to:o.url,type:\"read\",body:{resource:o.url+\"/\"+o.resource,p2p:!0}};t.metadata.p2pRequester&&t.metadata.p2pHandler&&(i.body.p2pRequester=t.metadata.p2pRequester,i.body.p2pHandler=t.metadata.p2pHandler),t._getBestResource(i,e).then(function(e){O.info(\"[HypertyResource] - get locally the resource:\",e),r(t)}).catch(function(i){O.warn(\"[HypertyResource] - get locally the resource fail\",i);var a={from:t._owner,to:o.remoteURL,type:\"read\",body:{resource:o.remoteURL+\"/\"+o.resource,p2p:!0}};t.metadata.p2pRequester&&t.metadata.p2pHandler&&(a.body.p2pRequester=t.metadata.p2pRequester,a.body.p2pHandler=t.metadata.p2pHandler),t._getBestResource(a,e).then(function(e){O.warn(\"[HypertyResource] - get remotely the resource\",e),r(t)}).catch(function(e){O.warn(\"[HypertyResource] - get remotely the resource fail\",e),n(e.body.code+\" \"+e.body.desc)})})}})}},{key:\"_getBestResource\",value:function(e,t){var r=this;return new o.default(function(n,o){var i=setTimeout(function(){return r._bus.removeResponseListener(r._owner,s),e.body.code=408,e.body.desc=\"Response timeout\",o(e)},3e3),a=function(e){O.log(\"[HypertyResource.read] reply: \",e);var a=e.id;switch(clearTimeout(i),e.body.code){case 200:r._content=e.body.value.content,e.body.value.size<r.arraybufferSizeLimit&&r.save(),r._bus.removeResponseListener(r._owner,a),n(e);break;case 183:t(e.body.value);break;default:r._bus.removeResponseListener(r._owner,a),o(e)}},s=r._bus.postMessage(e,a,!1)})}},{key:\"delete\",value:function(){var e=this;O.info(\"[HypertyResource.delete]\",e.metadata);var t={from:e._owner,to:e._localStorageURL,type:\"delete\",body:{resources:e.metadata.contentURL}};return new o.default(function(r){e._bus.postMessage(t,function(e){r(e.body.code<300?!0:!1)})})}},{key:\"_getBestContentURL\",value:function(e){var t=this,r=e[0],n=r.substr(r.lastIndexOf(\"/\")+1);return{url:t._localStorageURL,resource:n,remoteURL:r.substr(0,r.lastIndexOf(\"/\"))}}},{key:\"resourceType\",get:function(){return this.metadata.resourceType}},{key:\"mimetype\",get:function(){return this._metadata.type}},{key:\"content\",get:function(){return this._content}},{key:\"contentURL\",get:function(){return this._metadata.contentURL}},{key:\"shareable\",get:function(){var e=this,t=(0,y.default)(HypertyResource.prototype.__proto__||(0,a.default)(HypertyResource.prototype),\"metadata\",this);return t.resourceType=e.resourceType,t}}]),HypertyResource}(R.default);t.default=D,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=\"undefined\"!=typeof Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),u=s&&\"undefined\"!=typeof Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),c=\"undefined\"!=typeof HTMLCanvasElement&&HTMLCanvasElement.prototype.toBlob,l=c||\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof atob,d=\"undefined\"!=typeof FileReader||\"undefined\"!=typeof URL,f=function(){function ImageTools(){(0,o.default)(this,ImageTools)}return(0,a.default)(ImageTools,null,[{key:\"resize\",value:function(e,t,r){\"function\"==typeof t&&(r=t,t={width:640,height:480});t.width,t.height;if(!ImageTools.isSupported()||!e.type.match(/image.*/))return r(e,!1),!1;if(e.type.match(/image\\/gif/))return r(e,!1),!1;var n=document.createElement(\"img\");return n.onload=function(o){var i=n.width,a=n.height,s=!1;if(i>=a&&i>t.width?(a*=t.width/i,i=t.width,s=!0):a>t.height&&(i*=t.height/a,a=t.height,s=!0),!s)return void r(e,!1);var u=document.createElement(\"canvas\");if(u.width=i,u.height=a,u.getContext(\"2d\").drawImage(n,0,0,i,a),c)u.toBlob(function(e){r(e,!0)},e.type);else{var l=ImageTools._toBlob(u,e.type);r(l,!0)}},ImageTools._loadImage(n,e),!0}},{key:\"_toBlob\",value:function(e,t){var r=e.toDataURL(t),n=r.split(\",\"),o=void 0;o=n[0].indexOf(\"base64\")>=0?atob(n[1]):decodeURIComponent(n[1]);for(var i=new ArrayBuffer(o.length),a=new Uint8Array(i),c=0;c<o.length;c+=1)a[c]=o.charCodeAt(c);var l=n[0].split(\":\")[1].split(\";\")[0],d=null;if(s)d=new Blob([u?a:i],{type:l});else{var f=new BlobBuilder;f.append(i),d=f.getBlob(l)}return d}},{key:\"_loadImage\",value:function(e,t,r){if(\"undefined\"==typeof URL){var n=new FileReader;n.onload=function(t){e.src=t.target.result,r&&r()},n.readAsDataURL(t)}else e.src=URL.createObjectURL(t),r&&r()}},{key:\"isSupported\",value:function(){return\"undefined\"!=typeof HTMLCanvasElement&&l&&d}}]),ImageTools}();t.default=f,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(114),a=_interopRequireDefault(i),s=r(17),u=_interopRequireDefault(s),c=r(26),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(34),h=_interopRequireDefault(v),_=r(116),b=_interopRequireDefault(_),m=r(35),g=_interopRequireDefault(m),R=r(36),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(R),D=r(39),w=r(131),j=_interopRequireDefault(w),L=O.getLogger(\"DataObjectObserver\"),k={ANY:\"any\",START:\"start\",EXACT:\"exact\"},U=function(e){function DataObjectObserver(e){(0,f.default)(this,DataObjectObserver);var t=(0,h.default)(this,(DataObjectObserver.__proto__||(0,l.default)(DataObjectObserver)).call(this,e)),r=t;return r._version=e.version,r._filters={},r._syncObj.observe(function(e){r._onFilter(e)}),r._allocateListeners(),t}return(0,g.default)(DataObjectObserver,e),(0,y.default)(DataObjectObserver,[{key:\"sync\",value:function(){var e=this;return L.info(\"[DataObjectObserver_sync] synchronising \"),new u.default(function(t,r){e._syncher.read(e._metadata.url).then(function(r){L.info(\"[DataObjectObserver_sync] value to sync: \",r),(0,a.default)(e.data,(0,D.deepClone)(r.data)),e._version=r.version,e._metadata.lastModified=r.lastModified,r.childrenObjects?(e.resumeChildrens(r.childrenObjects),e._storeChildrens(),t(!0)):t(!0)}).catch(function(e){L.info(\"[DataObjectObserver_sync] sync failed: \",e),t(!1)})})}},{key:\"_storeChildrens\",value:function(){var e=this,t={};(0,o.default)(e._childrenObjects).forEach(function(r){var n=e._childrenObjects[r];t[r]={},(0,o.default)(n).forEach(function(e){t[r][e]={},t[r][e].value=n[e].metadata,t[r][e].identity=n[e].identity})});var r={from:e._owner,to:e._syncher._subURL,type:\"create\",body:{resource:e._url,attribute:\"childrenObjects\",value:t}};e._bus.postMessage(r)}},{key:\"_allocateListeners\",value:function(){(0,b.default)(DataObjectObserver.prototype.__proto__||(0,l.default)(DataObjectObserver.prototype),\"_allocateListeners\",this).call(this);var e=this;e._changeListener=e._bus.addListener(e._url+\"/changes\",function(t){\"update\"===t.type&&(L.log(\"DataObjectObserver-\"+e._url+\"-RCV: \",t),e._changeObject(e._syncObj,t))})}},{key:\"_releaseListeners\",value:function(){(0,b.default)(DataObjectObserver.prototype.__proto__||(0,l.default)(DataObjectObserver.prototype),\"_releaseListeners\",this).call(this),this._changeListener.remove()}},{key:\"delete\",value:function(){var e=this;e._deleteChildrens().then(function(){e.unsubscribe(),e._releaseListeners(),delete e._syncher._observers[e._url]})}},{key:\"unsubscribe\",value:function(){var e=this,t={type:\"unsubscribe\",from:e._owner,to:e._syncher._subURL,body:{resource:e._url}};e._bus.postMessage(t,function(t){L.log(\"DataObjectObserver-UNSUBSCRIBE: \",t),200===t.body.code&&(e._releaseListeners(),delete e._syncher._observers[e._url])})}},{key:\"onChange\",value:function(e,t){var r=e,n={type:k.EXACT,callback:t},o=e.indexOf(\"*\");o===e.length-1&&(0===o?n.type=k.ANY:(n.type=k.START,r=e.substr(0,e.length-1))),this._filters[r]=n}},{key:\"_onFilter\",value:function(e){var t=this;(0,o.default)(t._filters).forEach(function(r){var n=t._filters[r];n.type===k.ANY?n.callback(e):n.type===k.START?0===e.field.indexOf(r)&&n.callback(e):n.type===k.EXACT&&e.field===r&&n.callback(e)})}},{key:\"onDisconnected\",value:function(e){var t=this;return new u.default(function(r,n){t._subscribeRegistration().then(function(){t._onDisconnected=e,r()}).catch(function(e){return n(e)})})}},{key:\"_subscribeRegistration\",value:function(){var e=this,t={type:\"subscribe\",from:this._owner,to:this._syncher._runtimeUrl+\"/subscriptions\",body:{resources:[this._url+\"/registration\"]}};return new u.default(function(r,n){e._bus.postMessage(t,function(t){L.log(\"[DataObjectObserver._subscribeRegistration] \"+e._url+\" rcved reply \",t),200===t.body.code?(e._generateListener(e._url+\"/registration\"),r()):(L.error(\"Error subscribing registration status for \",e._url),n(\"Error subscribing registration status for \"+e._url))})})}},{key:\"_generateListener\",value:function(e){var t=this;t._bus.addListener(e,function(e){L.log(\"[DataObjectObserver.registrationNotification] \"+t._url+\": \",e),e.body.value&&\"disconnected\"===e.body.value&&t._onDisconnected&&(L.log(\"[DataObjectObserver] \"+t._url+\": was disconnected \",e),t._onDisconnected())})}},{key:\"execute\",value:function(e,t){var r=this,n=this;return new u.default(function(o,i){var a={type:\"execute\",from:r._owner,to:n._url,body:{method:e,params:t}};n._bus.postMessage(a,function(t){L.log(\"[DataObjectObserver.execute] \"+n._url+\" rcved reply \",t),200===t.body.code?o():(L.warn(\"[DataObjectObserver.execute] execution of method \"+e+\" was reject by reporter\"),i(\"[DataObjectObserver.execute] execution of method \"+e+\" was reject by reporter\"))})})}}]),DataObjectObserver}(j.default);t.default=U,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(36),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),c=u.getLogger(\"DataProvisional\"),l=function(){function DataProvisional(e,t,r,n){(0,o.default)(this,DataProvisional);var i=this;i._owner=e,i._url=t,i._bus=r,i._children=n,i._changes=[],i._allocateListeners()}return(0,a.default)(DataProvisional,[{key:\"_allocateListeners\",value:function(){var e=this;e._listener=e._bus.addListener(e._url,function(t){c.log(\"DataProvisional-\"+e._url+\"-RCV: \",t),e._changes.push(t)})}},{key:\"_releaseListeners\",value:function(){this._listener.remove()}},{key:\"apply\",value:function(e){this._changes.forEach(function(t){e._changeObject(e._syncObj,t)})}},{key:\"children\",get:function(){return this._children}}]),DataProvisional}();t.default=l,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(39),u=function(){function NotificationHandler(e){if((0,o.default)(this,NotificationHandler),!e)throw Error(\"[NotificationHandler Constructor] bus input is mandatory\");this._bus=e,this._onNotificationHandler={}}return(0,a.default)(NotificationHandler,[{key:\"onNotification\",value:function(e,t){this._onNotificationHandler[e]=t}},{key:\"onCreate\",value:function(e){var t=this,r=e.body.hasOwnProperty(\"resource\")?e.body.resource:e.from.slice(0,-13),n=(0,s.divideURL)(r),o=n.domain,i=r.split(\"://\")[0],a=function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:400,desc:\"Bad Request: \"+r}})};e.body.hasOwnProperty(\"source\")||a(\"Missing source\"),e.body.hasOwnProperty(\"schema\")||a(\"Missing schema\"),e.body.hasOwnProperty(\"value\")||a(\"Missing value\"),e.body.hasOwnProperty(\"identity\")||a(\"Missing identity\");var u={type:e.type,from:e.body.source,url:r,domain:o,schema:e.body.schema,value:e.body.value,identity:e.body.identity,to:e.to,via:e.body.via,ack:function(r){var n=200;r&&(n=r),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:n}})},error:function(e){a(e)}};t._onNotificationHandler[i]&&t._onNotificationHandler[i](u)}},{key:\"onDelete\",value:function(e){var t=this,r=e.body.resource,n=t._observers[r],o={from:t.owner,to:t._subURL,id:e.id,type:\"unsubscribe\",body:{resource:e.body.resource}};if(t._bus.postMessage(o),delete t._observers[r],n){var i={type:e.type,url:r,identity:e.body.identity,ack:function(r){var o=200;r&&(o=r),200===o&&n.delete(),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:o,source:t._owner}})}};t._onNotificationHandler&&(log.log(\"NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}else t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:404,source:t._owner}})}}]),NotificationHandler}();t.default=u,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(26),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(34),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(35),f=_interopRequireDefault(d),p=r(125),y=_interopRequireDefault(p),v=function(e){function DiscoveredObject(e,t,r,n,i){(0,a.default)(this,DiscoveredObject);var s=(0,u.default)(this,(DiscoveredObject.__proto__||(0,o.default)(DiscoveredObject)).call(this,e.hypertyID||e.url,t,r,n));return s._data=e,s._discovery=i,s}return(0,f.default)(DiscoveredObject,e),(0,l.default)(DiscoveredObject,[{key:\"data\",get:function(){return this._data}}]),(0,l.default)(DiscoveredObject,[{key:\"check\",value:function(){var e=this,t={body:{}};e._discoveredObjectURL.startsWith(\"hyperty://\")?e._discovery.discoverHypertyPerURL(e._discoveredObjectURL).then(function(r){t.body.status=r.status,e._processNotification(t)}):e._discovery.discoverDataObjectsPerURL(e._discoveredObjectURL).then(function(r){t.body.status=r.status,e._processNotification(t)})}}]),DiscoveredObject}(y.default);t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=function(){function Search(e,t){if((0,u.default)(this,Search),!e)throw new Error(\"The discovery component is a needed parameter\");if(!t)throw new Error(\"The identityManager component is a needed parameter\");var r=this;r.discovery=e,r.identityManager=t}return(0,l.default)(Search,[{key:\"myIdentity\",value:function(){var e=this;return new a.default(function(t,r){e.identityManager.discoverUserRegistered().then(function(e){t(e)}).catch(function(e){r(e)})})}},{key:\"hyperties\",value:function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:\"users\",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)throw new Error(\"You need to provide a list of users\");if(!t)throw new Error(\"You need to provide a list of domains\");if(!n)throw new Error(\"You need to provide a list of resources\");if(!r)throw new Error(\"You need to provide a list of schemes\");var s=this;return new a.default(function(u,c){if(0===e.length)u(e);else{var l=[];e.forEach(function(e,o){var a=t[o];i?l.push(s.discovery.discoverHypertiesPerUserProfileData(e,r,n)):l.push(s.discovery.discoverHyperties(e,r,n,a))}),a.default.all(l.map(function(e){return e.then(function(e){return e},function(e){return e})})).then(function(e){var t=e.map(function(e){if(e.hasOwnProperty(\"hypertyID\"))return e;var t=(0,o.default)(e).reduceRight(function(t,r){var n=new Date(e[r].lastModified);return new Date(e[t].lastModified).getTime()<n.getTime()?r:t});return e[t]}),r=t.filter(function(e){return e.hasOwnProperty(\"hypertyID\")});e.forEach(function(e){if(\"No Hyperty was found\"!==e)return u(r)}),c(\"No Hyperty was found\")}).catch(function(t){u(e)})}})}}]),Search}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(165),a=_interopRequireDefault(i),s=function MessageBodyIdentity(e,t,r,n,i,s,u,c){if((0,o.default)(this,MessageBodyIdentity),!s)throw new Error(\"IDP should be a parameter\");if(!e)throw new Error(\"username should be a parameter\");this.idp=s,u&&(this.assertion=u),this.userProfile=new a.default(e,t,r,n,i,c)};t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(114),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=function UserProfile(e,t,r,n,i,s){(0,a.default)(this,UserProfile),e&&(this.preferred_username=e),r&&(this.picture=r),n&&(this.name=n),i&&(this.locale=i),t&&(this.userURL=t),s&&(0,o.default)(this,s)};t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(114),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(167),f=r(139),p=_interopRequireDefault(f),y=r(169),v=function(){function ChatManager(e,t,r,n,o){if((0,u.default)(this,ChatManager),!e)throw new Error(\"[ChatManager.constructor] The myUrl is a needed parameter\");if(!t)throw new Error(\"[ChatManager.constructor] The MiniBus is a needed parameter\");if(!r)throw new Error(\"[ChatManager.constructor] The configuration is a needed parameter\");var i=this;n||(n=o.createSyncher(e,t,r)),i._runtimeURL=r.runtimeURL;var a=o.divideURL(i._runtimeURL).domain,s=o.createDiscovery(e,r.runtimeURL,t),c=o.createIdentityManager(e,r.runtimeURL,t);i._objectDescURL=\"hyperty-catalogue://catalogue.\"+a+\"/.well-known/dataschema/Communication\",i._reportersControllers={},i._observersControllers={},i._myUrl=e,i._bus=t,i._syncher=n,i._domain=a,i.discovery=s,i.identityManager=c,i.currentIdentity,i.search=o.createSearch(s,c),i.communicationObject=d.communicationObject,i.communicationChildren=d.communicationChildren}return(0,l.default)(ChatManager,[{key:\"processNotification\",value:function(e){var t=this;if(\"create\"===e.type&&t._onInvitation&&t._onInvitation(e),\"delete\"===e.type){e.ack(200),t._observersControllers[e.url].closeEvent=e,delete t._observersControllers[e.url],t._observersControllers.closeEvent=e,t.communicationObject=d.communicationObject;for(var r in this._reportersControllers)this._reportersControllers[r].close(e);for(var n in this._observersControllers)this._observersControllers[n].close(e)}}},{key:\"myIdentity\",value:function(e){var t=this;return new a.default(function(r,n){if(e)return r(e);t._myUrl.includes(\"hyperty://\")?t.identityManager.discoverUserRegistered().then(function(e){r(e)}).catch(function(e){n(e)}):t.identityManager.discoverIdentityPerIdP().then(function(e){r(e)}).catch(function(e){n(e)})})}},{key:\"create\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,i=n._syncher;return new a.default(function(s,u){n.communicationObject=d.communicationObject,n.communicationObject.cseq=1,n.communicationObject.startingTime=(new Date).toJSON(),n.communicationObject.status=d.CommunicationStatus.OPEN;var c=void 0;n.myIdentity().then(function(l){c=l;var d=new y.UserInfo(n._myUrl,n._domain,l);n.communicationObject.participants[l.userURL]=d;var f=[],v=[],h={};t.forEach(function(e){var t=n.discovery.discoverHypertiesDO(e.user,[\"comm\"],[\"chat\"],e.domain);f.push(t)}),a.default.all(f).then(function(t){var a=[];t.forEach(function(e){e.forEach(function(e){\"live\"===e.data.status?(a.push(e.data.hypertyID),h[e.data.hypertyID]=e):v.length<5&&v.push(e)})});var s=(0,o.default)({resources:[\"chat\"],mutual:!0},r);return delete s.name,i.create(n._objectDescURL,a,n.communicationObject,!0,!1,e,{},s)}).then(function(e){var t=new p.default(i,n.discovery,n._domain,n.search,c,n);t.dataObjectReporter=e,n._reportersControllers[e.url]=t,e.invitations.length>0&&t.invitationsHandler.processInvitations(h,e),v.length>0&&t.invitationsHandler.inviteDisconnectedHyperties(v,e),s(t)}).catch(function(e){u(e)})}).catch(function(e){return u(e)})})}},{key:\"onInvitation\",value:function(e){this._onInvitation=e}},{key:\"join\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2],n=this;return new a.default(function(o,i){var a=n._syncher,s=void 0;n.myIdentity(r).then(function(r){return s=r,a.subscribe(n._objectDescURL,e,!0,!1,t,!0,r)}).then(function(e){var t=new p.default(a,n.discovery,n._domain,n.search,s,n);o(t),t.dataObjectObserver=e,n._observersControllers[e.url]=t}).catch(function(e){i(e)})})}}]),ChatManager}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.CommunicationStatus={OPEN:\"open\",PENDING:\"pending\",CLOSED:\"closed\",PAUSED:\"paused\",FAILED:\"failed\"},t.communicationObject={startingTime:\"\",status:\"\",participants:{}},t.communicationChildren={parent:\"communication\",listener:\"resources\",type:\"HypertyResource\"}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=function(){function InvitationsHandler(e){if((0,u.default)(this,InvitationsHandler),!e)throw Error(\"hypertyURL is a necessary dependecy\");var t=this;t._hypertyURL=e,t._pending={}}return(0,l.default)(InvitationsHandler,[{key:\"inviteDisconnectedHyperties\",value:function(e,t){var r=this;e.forEach(function(e){r._pending[t]||(r._pending[t]={}),r._pending[t][e.data.hypertyID]=e,e.onLive(r._hypertyURL,function(){t.inviteObservers([e.data.hypertyID]),e.unsubscribeLive(r._hypertyURL),delete r._pending[t][e.data.hypertyID]})})}},{key:\"processInvitations\",value:function(e,t){var r=this,n=this,o=t.invitations||[];o.forEach(function(o){o.then(function(e){r._invitationsResponse&&r._invitationsResponse(e)}).catch(function(o){r._invitationsResponse&&r._invitationsResponse(o),n.inviteDisconnectedHyperties([e[o.invited]],t)})})}},{key:\"resumeDiscoveries\",value:function(e,t){var r=this;return new a.default(function(n,i){var s={},u=[],c=[],l=[];e.resumeDiscoveries().then(function(e){e.forEach(function(e){e.data.resources&&\"chat\"===e.data.resources[0]&&(\"live\"===e.data.status?(s[e.data.hypertyID]=e,u.push(e.data.hypertyID),l.push(e.unsubscribeLive(r._hypertyURL))):c.push(e))}),c.length>0&&r.inviteDisconnectedHyperties(c,t),(0,o.default)(s).length>0?(t.inviteObservers(u),t.invitations.length>0&&r.processInvitations(s,t),a.default.all(l).then(function(){n()})):n()})}).catch(function(e){reject(\"[GroupChatManager.InvitationsHandler.resumeDiscoveries] failed | \",e)})}},{key:\"cleanInvitations\",value:function(e){var t=this,r=t._pending[e];return r?new a.default(function(e,n){var i=(0,o.default)(r),s=[];i.forEach(function(e){s.push(r[e].unsubscribeLive(t._hypertyURL))}),a.default.all(i).then(function(){e()})}):a.default.resolve()}},{key:\"invitationResponse\",set:function(e){this._invitationsResponse=e}}]),InvitationsHandler}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.UserInfo=void 0;var n=r(170),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(39);t.UserInfo=function UserInfo(e,t,r){var n;(0,a.default)(this,UserInfo);var i=(0,s.deepClone)(r);return r.hasOwnProperty(\"userProfile\")||(i.userProfile=r),n={hypertyURL:e,domain:t},(0,o.default)(n,\"domain\",t),(0,o.default)(n,\"identity\",i),n}},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(60),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}}])});","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\nimport { Sandbox, SandboxRegistry } from 'runtime-core/dist/sandbox';\nimport MiniBus from 'runtime-core/dist/minibus';\n\nself._miniBus = new MiniBus();\nself._miniBus._onPostMessage = function(msg) {\n  self.postMessage(msg);\n};\nself.addEventListener('message', function(event) {\n  self._miniBus._onMessage(event.data);\n});\nself.addEventListener('error', function(reason) {\n  throw reason;\n});\n\nself._registry = new SandboxRegistry(self._miniBus);\nself._registry._create = function(url, sourceCode, config, factory) {\n  console.log('ContextServiceProvider: create factory:', factory);\n  try {\n    eval.apply(self, [sourceCode]);\n\n    if (typeof activate === 'function') {\n      return activate(url, self._miniBus, config, factory);\n    }\n\n    if (typeof activate.default === 'function') {\n      return activate.default(url, self._miniBus, config, factory);\n    }\n\n  } catch (error) {\n    console.error('[Context Service Provider] - Error: ', error);\n    throw JSON.stringify(error.message);\n  }\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvcnVudGltZS1jb3JlL2Rpc3QvbWluaWJ1cy5qcyIsIm5vZGVfbW9kdWxlcy9ydW50aW1lLWNvcmUvZGlzdC9zYW5kYm94LmpzIiwic3JjL0NvbnRleHRTZXJ2aWNlUHJvdmlkZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNoQ0E7O0FBQ0E7Ozs7OztBQXZCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlCQSxLQUFLLFFBQUwsR0FBZ0IsSUFBSSxpQkFBSixFQUFoQjtBQUNBLEtBQUssUUFBTCxDQUFjLGNBQWQsR0FBK0IsVUFBUyxHQUFULEVBQWM7QUFDM0MsT0FBSyxXQUFMLENBQWlCLEdBQWpCO0FBQ0QsQ0FGRDtBQUdBLEtBQUssZ0JBQUwsQ0FBc0IsU0FBdEIsRUFBaUMsVUFBUyxLQUFULEVBQWdCO0FBQy9DLE9BQUssUUFBTCxDQUFjLFVBQWQsQ0FBeUIsTUFBTSxJQUEvQjtBQUNELENBRkQ7QUFHQSxLQUFLLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFVBQVMsTUFBVCxFQUFpQjtBQUM5QyxRQUFNLE1BQU47QUFDRCxDQUZEOztBQUlBLEtBQUssU0FBTCxHQUFpQixJQUFJLHdCQUFKLENBQW9CLEtBQUssUUFBekIsQ0FBakI7QUFDQSxLQUFLLFNBQUwsQ0FBZSxPQUFmLEdBQXlCLFVBQVMsR0FBVCxFQUFjLFVBQWQsRUFBMEIsTUFBMUIsRUFBa0MsT0FBbEMsRUFBMkM7QUFDbEUsVUFBUSxHQUFSLENBQVkseUNBQVosRUFBdUQsT0FBdkQ7QUFDQSxNQUFJO0FBQ0YsU0FBSyxLQUFMLENBQVcsSUFBWCxFQUFpQixDQUFDLFVBQUQsQ0FBakI7O0FBRUEsUUFBSSxPQUFPLFFBQVAsS0FBb0IsVUFBeEIsRUFBb0M7QUFDbEMsYUFBTyxTQUFTLEdBQVQsRUFBYyxLQUFLLFFBQW5CLEVBQTZCLE1BQTdCLEVBQXFDLE9BQXJDLENBQVA7QUFDRDs7QUFFRCxRQUFJLE9BQU8sU0FBUyxPQUFoQixLQUE0QixVQUFoQyxFQUE0QztBQUMxQyxhQUFPLFNBQVMsT0FBVCxDQUFpQixHQUFqQixFQUFzQixLQUFLLFFBQTNCLEVBQXFDLE1BQXJDLEVBQTZDLE9BQTdDLENBQVA7QUFDRDtBQUVGLEdBWEQsQ0FXRSxPQUFPLEtBQVAsRUFBYztBQUNkLFlBQVEsS0FBUixDQUFjLHNDQUFkLEVBQXNELEtBQXREO0FBQ0EsVUFBTSxLQUFLLFNBQUwsQ0FBZSxNQUFNLE9BQXJCLENBQU47QUFDRDtBQUNGLENBakJEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLy8gdmVyc2lvbjogMC4xMy4wXG4vLyBkYXRlOiBGcmkgQXVnIDMxIDIwMTggMDk6MjQ6NTMgR01UKzAxMDAgKFdlc3Rlcm4gRXVyb3BlYW4gU3VtbWVyIFRpbWUpXG4vLyBsaWNlbmNlOiBcbi8qKlxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxuKlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKi9cblxuXG4vLyB2ZXJzaW9uOiAwLjEzLjBcbi8vIGRhdGU6IEZyaSBBdWcgMzEgMjAxOCAwOToyNDo1MyBHTVQrMDEwMCAoV2VzdGVybiBFdXJvcGVhbiBTdW1tZXIgVGltZSlcbi8vIGxpY2VuY2U6IFxuLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG5cbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwibWluaWJ1c1wiLFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMubWluaWJ1cz1lKCk6dC5taW5pYnVzPWUoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obil7aWYoZVtuXSlyZXR1cm4gZVtuXS5leHBvcnRzO3ZhciByPWVbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W25dLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLHIubD0hMCxyLmV4cG9ydHN9dmFyIGU9e307cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT10LF9fd2VicGFja19yZXF1aXJlX18uYz1lLF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbih0LGUsbil7X193ZWJwYWNrX3JlcXVpcmVfXy5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpufSl9LF9fd2VicGFja19yZXF1aXJlX18ubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5kKGUsXCJhXCIsZSksZX0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9XCJcIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0xNzEpfShbZnVuY3Rpb24odCxlKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246XCIyLjUuN1wifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPW4pfSxmdW5jdGlvbih0LGUpe3ZhciBuPXQuZXhwb3J0cz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcIm51bWJlclwiPT10eXBlb2YgX19nJiYoX19nPW4pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigzMCkoXCJ3a3NcIiksbz1uKDIxKSxpPW4oMSkuU3ltYm9sLHU9XCJmdW5jdGlvblwiPT10eXBlb2YgaTsodC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByW3RdfHwoclt0XT11JiZpW3RdfHwodT9pOm8pKFwiU3ltYm9sLlwiK3QpKX0pLnN0b3JlPXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITAsZS5kZWZhdWx0PWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITA7dmFyIHI9big2MCksbz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHIpO2UuZGVmYXVsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksKDAsby5kZWZhdWx0KSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxlLG4pe3JldHVybiBlJiZkZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLGUpLG4mJmRlZmluZVByb3BlcnRpZXModCxuKSx0fX0oKX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1uKDApLGk9bigxOCksdT1uKDExKSxzPW4oMTApLGM9ZnVuY3Rpb24odCxlLG4pe3ZhciBmLGEsbCxwPXQmYy5GLHY9dCZjLkcsZD10JmMuUyxoPXQmYy5QLHk9dCZjLkIsXz10JmMuVyxiPXY/bzpvW2VdfHwob1tlXT17fSksZz1iLnByb3RvdHlwZSxtPXY/cjpkP3JbZV06KHJbZV18fHt9KS5wcm90b3R5cGU7diYmKG49ZSk7Zm9yKGYgaW4gbikoYT0hcCYmbSYmdm9pZCAwIT09bVtmXSkmJnMoYixmKXx8KGw9YT9tW2ZdOm5bZl0sYltmXT12JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBtW2ZdP25bZl06eSYmYT9pKGwscik6XyYmbVtmXT09bD9mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlLG4scil7aWYodGhpcyBpbnN0YW5jZW9mIHQpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyB0O2Nhc2UgMTpyZXR1cm4gbmV3IHQoZSk7Y2FzZSAyOnJldHVybiBuZXcgdChlLG4pfXJldHVybiBuZXcgdChlLG4scil9cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gZS5wcm90b3R5cGU9dC5wcm90b3R5cGUsZX0obCk6aCYmXCJmdW5jdGlvblwiPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxoJiYoKGIudmlydHVhbHx8KGIudmlydHVhbD17fSkpW2ZdPWwsdCZjLlImJmcmJiFnW2ZdJiZ1KGcsZixsKSkpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLGMuVT02NCxjLlI9MTI4LHQuZXhwb3J0cz1jfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPSFuKDEzKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFyKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhbiBvYmplY3QhXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNyksbz1uKDQxKSxpPW4oMjgpLHU9T2JqZWN0LmRlZmluZVByb3BlcnR5O2UuZj1uKDYpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbih0LGUsbil7aWYocih0KSxlPWkoZSwhMCkscihuKSxvKXRyeXtyZXR1cm4gdSh0LGUsbil9Y2F0Y2godCl7fWlmKFwiZ2V0XCJpbiBufHxcInNldFwiaW4gbil0aHJvdyBUeXBlRXJyb3IoXCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCFcIik7cmV0dXJuXCJ2YWx1ZVwiaW4gbiYmKHRbZV09bi52YWx1ZSksdH19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0P251bGwhPT10OlwiZnVuY3Rpb25cIj09dHlwZW9mIHR9fSxmdW5jdGlvbih0LGUpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBuLmNhbGwodCxlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDgpLG89bigyMCk7dC5leHBvcnRzPW4oNik/ZnVuY3Rpb24odCxlLG4pe3JldHVybiByLmYodCxlLG8oMSxuKSl9OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdFtlXT1uLHR9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big1Niksbz1uKDI1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHIobyh0KSl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuISF0KCl9Y2F0Y2godCl7cmV0dXJuITB9fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ITB9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXt9fSxmdW5jdGlvbih0LGUpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHQpLnNsaWNlKDgsLTEpfX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDg4KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7aWYocih0KSx2b2lkIDA9PT1lKXJldHVybiB0O3N3aXRjaChuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiB0LmNhbGwoZSxuLHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4scixvKXtyZXR1cm4gdC5jYWxsKGUsbixyLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNDIpLG89bigzMSk7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LG8pfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm57ZW51bWVyYWJsZTohKDEmdCksY29uZmlndXJhYmxlOiEoMiZ0KSx3cml0YWJsZTohKDQmdCksdmFsdWU6ZX19fSxmdW5jdGlvbih0LGUpe3ZhciBuPTAscj1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm5cIlN5bWJvbChcIi5jb25jYXQodm9pZCAwPT09dD9cIlwiOnQsXCIpX1wiLCgrK24rcikudG9TdHJpbmcoMzYpKX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOCkuZixvPW4oMTApLGk9bigyKShcInRvU3RyaW5nVGFnXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dCYmIW8odD1uP3Q6dC5wcm90b3R5cGUsaSkmJnIodCxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6ZX0pfX0sZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLmNlaWwscj1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP3I6bikodCl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK3QpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDEwMiksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSl7ZS5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighcih0KSlyZXR1cm4gdDt2YXIgbixvO2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudmFsdWVPZikmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZighZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDMwKShcImtleXNcIiksbz1uKDIxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHJbdF18fChyW3RdPW8odCkpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMCksbz1uKDEpLGk9b1tcIl9fY29yZS1qc19zaGFyZWRfX1wiXXx8KG9bXCJfX2NvcmUtanNfc2hhcmVkX19cIl09e30pOyh0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gaVt0XXx8KGlbdF09dm9pZCAwIT09ZT9lOnt9KX0pKFwidmVyc2lvbnNcIixbXSkucHVzaCh7dmVyc2lvbjpyLnZlcnNpb24sbW9kZTpuKDE0KT9cInB1cmVcIjpcImdsb2JhbFwiLGNvcHlyaWdodDpcIsKpIDIwMTggRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSlcIn0pfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZlwiLnNwbGl0KFwiLFwiKX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOSksbz1uKDEpLmRvY3VtZW50LGk9cihvKSYmcihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQodCk6e319fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Qocih0KSl9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZS5fX2VzTW9kdWxlPSEwO3ZhciByPW4oNTMpLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShyKTtlLmRlZmF1bHQ9ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOigwLG8uZGVmYXVsdCkoZSkpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1lLl9fZXNNb2R1bGU9ITA7dmFyIHI9bigxMDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oMTA4KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1uKDUzKSxjPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyk7ZS5kZWZhdWx0PWZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrKHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjooMCxjLmRlZmF1bHQpKGUpKSk7dC5wcm90b3R5cGU9KDAsdS5kZWZhdWx0KShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKG8uZGVmYXVsdD8oMCxvLmRlZmF1bHQpKHQsZSk6dC5fX3Byb3RvX189ZSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHIsbzshZnVuY3Rpb24oaSx1KXtcInVzZSBzdHJpY3RcIjtyPXUsdm9pZCAwIT09KG89XCJmdW5jdGlvblwiPT10eXBlb2Ygcj9yLmNhbGwoZSxuLGUsdCk6cikmJih0LmV4cG9ydHM9byl9KDAsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiaW5kTWV0aG9kKHQsZSl7dmFyIG49dFtlXTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLmJpbmQpcmV0dXJuIG4uYmluZCh0KTt0cnl7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwobix0KX1jYXRjaChlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KG4sW3QsYXJndW1lbnRzXSl9fX1mdW5jdGlvbiByZWFsTWV0aG9kKG4pe3JldHVyblwiZGVidWdcIj09PW4mJihuPVwibG9nXCIpLHR5cGVvZiBjb25zb2xlIT09ZSYmKHZvaWQgMCE9PWNvbnNvbGVbbl0/YmluZE1ldGhvZChjb25zb2xlLG4pOnZvaWQgMCE9PWNvbnNvbGUubG9nP2JpbmRNZXRob2QoY29uc29sZSxcImxvZ1wiKTp0KX1mdW5jdGlvbiByZXBsYWNlTG9nZ2luZ01ldGhvZHMoZSxyKXtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIGk9bltvXTt0aGlzW2ldPW88ZT90OnRoaXMubWV0aG9kRmFjdG9yeShpLGUscil9dGhpcy5sb2c9dGhpcy5kZWJ1Z31mdW5jdGlvbiBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzKHQsbixyKXtyZXR1cm4gZnVuY3Rpb24oKXt0eXBlb2YgY29uc29sZSE9PWUmJihyZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh0aGlzLG4sciksdGhpc1t0XS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeSh0LGUsbil7cmV0dXJuIHJlYWxNZXRob2QodCl8fGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIExvZ2dlcih0LHIsbyl7ZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZSh0KXt2YXIgcj0oblt0XXx8XCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtpZih0eXBlb2Ygd2luZG93IT09ZSl7dHJ5e3JldHVybiB2b2lkKHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc109cil9Y2F0Y2godCl7fXRyeXt3aW5kb3cuZG9jdW1lbnQuY29va2llPWVuY29kZVVSSUNvbXBvbmVudChzKStcIj1cIityK1wiO1wifWNhdGNoKHQpe319fWZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCl7dmFyIHQ7aWYodHlwZW9mIHdpbmRvdyE9PWUpe3RyeXt0PXdpbmRvdy5sb2NhbFN0b3JhZ2Vbc119Y2F0Y2godCl7fWlmKHR5cGVvZiB0PT09ZSl0cnl7dmFyIG49d2luZG93LmRvY3VtZW50LmNvb2tpZSxyPW4uaW5kZXhPZihlbmNvZGVVUklDb21wb25lbnQocykrXCI9XCIpOy0xIT09ciYmKHQ9L14oW147XSspLy5leGVjKG4uc2xpY2UocikpWzFdKX1jYXRjaCh0KXt9cmV0dXJuIHZvaWQgMD09PXUubGV2ZWxzW3RdJiYodD12b2lkIDApLHR9fXZhciBpLHU9dGhpcyxzPVwibG9nbGV2ZWxcIjt0JiYocys9XCI6XCIrdCksdS5uYW1lPXQsdS5sZXZlbHM9e1RSQUNFOjAsREVCVUc6MSxJTkZPOjIsV0FSTjozLEVSUk9SOjQsU0lMRU5UOjV9LHUubWV0aG9kRmFjdG9yeT1vfHxkZWZhdWx0TWV0aG9kRmFjdG9yeSx1LmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGl9LHUuc2V0TGV2ZWw9ZnVuY3Rpb24obixyKXtpZihcInN0cmluZ1wiPT10eXBlb2YgbiYmdm9pZCAwIT09dS5sZXZlbHNbbi50b1VwcGVyQ2FzZSgpXSYmKG49dS5sZXZlbHNbbi50b1VwcGVyQ2FzZSgpXSksIShcIm51bWJlclwiPT10eXBlb2YgbiYmbj49MCYmbjw9dS5sZXZlbHMuU0lMRU5UKSl0aHJvd1wibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIrbjtpZihpPW4sITEhPT1yJiZwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKG4pLHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHUsbix0KSx0eXBlb2YgY29uc29sZT09PWUmJm48dS5sZXZlbHMuU0lMRU5UKXJldHVyblwiTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmdcIn0sdS5zZXREZWZhdWx0TGV2ZWw9ZnVuY3Rpb24odCl7Z2V0UGVyc2lzdGVkTGV2ZWwoKXx8dS5zZXRMZXZlbCh0LCExKX0sdS5lbmFibGVBbGw9ZnVuY3Rpb24odCl7dS5zZXRMZXZlbCh1LmxldmVscy5UUkFDRSx0KX0sdS5kaXNhYmxlQWxsPWZ1bmN0aW9uKHQpe3Uuc2V0TGV2ZWwodS5sZXZlbHMuU0lMRU5ULHQpfTt2YXIgYz1nZXRQZXJzaXN0ZWRMZXZlbCgpO251bGw9PWMmJihjPW51bGw9PXI/XCJXQVJOXCI6ciksdS5zZXRMZXZlbChjLCExKX12YXIgdD1mdW5jdGlvbigpe30sZT1cInVuZGVmaW5lZFwiLG49W1widHJhY2VcIixcImRlYnVnXCIsXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiXSxyPW5ldyBMb2dnZXIsbz17fTtyLmdldExvZ2dlcj1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgdHx8XCJcIj09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci5cIik7dmFyIGU9b1t0XTtyZXR1cm4gZXx8KGU9b1t0XT1uZXcgTG9nZ2VyKHQsci5nZXRMZXZlbCgpLHIubWV0aG9kRmFjdG9yeSkpLGV9O3ZhciBpPXR5cGVvZiB3aW5kb3chPT1lP3dpbmRvdy5sb2c6dm9pZCAwO3JldHVybiByLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdyE9PWUmJndpbmRvdy5sb2c9PT1yJiYod2luZG93LmxvZz1pKSxyfSxyLmdldExvZ2dlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gb30scn0pfSxmdW5jdGlvbih0LGUsbil7ZS5mPW4oMil9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEpLG89bigwKSxpPW4oMTQpLHU9bigzNykscz1uKDgpLmY7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPW8uU3ltYm9sfHwoby5TeW1ib2w9aT97fTpyLlN5bWJvbHx8e30pO1wiX1wiPT10LmNoYXJBdCgwKXx8dCBpbiBlfHxzKGUsdCx7dmFsdWU6dS5mKHQpfSl9fSwsZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNyksbz1uKDcyKSxpPW4oMzEpLHU9bigyOSkoXCJJRV9QUk9UT1wiKSxzPWZ1bmN0aW9uKCl7fSxjPWZ1bmN0aW9uKCl7dmFyIHQsZT1uKDMyKShcImlmcmFtZVwiKSxyPWkubGVuZ3RoO2ZvcihlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbig1NykuYXBwZW5kQ2hpbGQoZSksZS5zcmM9XCJqYXZhc2NyaXB0OlwiLHQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50LHQub3BlbigpLHQud3JpdGUoXCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFxcL3NjcmlwdD5cIiksdC5jbG9zZSgpLGM9dC5GO3ItLTspZGVsZXRlIGMucHJvdG90eXBlW2lbcl1dO3JldHVybiBjKCl9O3QuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiBudWxsIT09dD8ocy5wcm90b3R5cGU9cih0KSxuPW5ldyBzLHMucHJvdG90eXBlPW51bGwsblt1XT10KTpuPWMoKSx2b2lkIDA9PT1lP246byhuLGUpfX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz0hbig2KSYmIW4oMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuKDMyKShcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxMCksbz1uKDEyKSxpPW4oNjEpKCExKSx1PW4oMjkpKFwiSUVfUFJPVE9cIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG4scz1vKHQpLGM9MCxmPVtdO2ZvcihuIGluIHMpbiE9dSYmcihzLG4pJiZmLnB1c2gobik7Zm9yKDtlLmxlbmd0aD5jOylyKHMsbj1lW2MrK10pJiYofmkoZixuKXx8Zi5wdXNoKG4pKTtyZXR1cm4gZn19LGZ1bmN0aW9uKHQsZSl7ZS5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LCxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big3MCkoITApO24oNTEpKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKHQpe3RoaXMuX3Q9U3RyaW5nKHQpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX3Qsbj10aGlzLl9pO3JldHVybiBuPj1lLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9Oih0PXIoZSxuKSx0aGlzLl9pKz10Lmxlbmd0aCx7dmFsdWU6dCxkb25lOiExfSl9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjQpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0PjA/byhyKHQpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSxmdW5jdGlvbih0LGUsbil7big3Myk7Zm9yKHZhciByPW4oMSksbz1uKDExKSxpPW4oMTUpLHU9bigyKShcInRvU3RyaW5nVGFnXCIpLHM9XCJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdFwiLnNwbGl0KFwiLFwiKSxjPTA7YzxzLmxlbmd0aDtjKyspe3ZhciBmPXNbY10sYT1yW2ZdLGw9YSYmYS5wcm90b3R5cGU7bCYmIWxbdV0mJm8obCx1LGYpLGlbZl09aS5BcnJheX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBQcm9taXNlQ2FwYWJpbGl0eSh0KXt2YXIgZSxuO3RoaXMucHJvbWlzZT1uZXcgdChmdW5jdGlvbih0LHIpe2lmKHZvaWQgMCE9PWV8fHZvaWQgMCE9PW4pdGhyb3cgVHlwZUVycm9yKFwiQmFkIFByb21pc2UgY29uc3RydWN0b3JcIik7ZT10LG49cn0pLHRoaXMucmVzb2x2ZT1yKGUpLHRoaXMucmVqZWN0PXIobil9dmFyIHI9bigyMik7dC5leHBvcnRzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlQ2FwYWJpbGl0eSh0KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDUpLG89bigwKSxpPW4oMTMpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPShvLk9iamVjdHx8e30pW3RdfHxPYmplY3RbdF0sdT17fTt1W3RdPWUobikscihyLlMrci5GKmkoZnVuY3Rpb24oKXtuKDEpfSksXCJPYmplY3RcIix1KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDI3KSxvPW4oMjApLGk9bigxMiksdT1uKDI4KSxzPW4oMTApLGM9big0MSksZj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2UuZj1uKDYpP2Y6ZnVuY3Rpb24odCxlKXtpZih0PWkodCksZT11KGUsITApLGMpdHJ5e3JldHVybiBmKHQsZSl9Y2F0Y2godCl7fWlmKHModCxlKSlyZXR1cm4gbyghci5mLmNhbGwodCxlKSx0W2VdKX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDE0KSxvPW4oNSksaT1uKDUyKSx1PW4oMTEpLHM9bigxNSksYz1uKDcxKSxmPW4oMjMpLGE9big1OCksbD1uKDIpKFwiaXRlcmF0b3JcIikscD0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLHY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGQsaCx5LF8pe2MobixlLGQpO3ZhciBiLGcsbSx3PWZ1bmN0aW9uKHQpe2lmKCFwJiZ0IGluIFApcmV0dXJuIFBbdF07c3dpdGNoKHQpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fSx4PWUrXCIgSXRlcmF0b3JcIixPPVwidmFsdWVzXCI9PWgsTT0hMSxQPXQucHJvdG90eXBlLFM9UFtsXXx8UFtcIkBAaXRlcmF0b3JcIl18fGgmJlBbaF0sTD1TfHx3KGgpLGo9aD9PP3coXCJlbnRyaWVzXCIpOkw6dm9pZCAwLGs9XCJBcnJheVwiPT1lP1AuZW50cmllc3x8UzpTO2lmKGsmJihtPWEoay5jYWxsKG5ldyB0KSkpIT09T2JqZWN0LnByb3RvdHlwZSYmbS5uZXh0JiYoZihtLHgsITApLHJ8fFwiZnVuY3Rpb25cIj09dHlwZW9mIG1bbF18fHUobSxsLHYpKSxPJiZTJiZcInZhbHVlc1wiIT09Uy5uYW1lJiYoTT0hMCxMPWZ1bmN0aW9uKCl7cmV0dXJuIFMuY2FsbCh0aGlzKX0pLHImJiFffHwhcCYmIU0mJlBbbF18fHUoUCxsLEwpLHNbZV09TCxzW3hdPXYsaClpZihiPXt2YWx1ZXM6Tz9MOncoXCJ2YWx1ZXNcIiksa2V5czp5P0w6dyhcImtleXNcIiksZW50cmllczpqfSxfKWZvcihnIGluIGIpZyBpbiBQfHxpKFAsZyxiW2ddKTtlbHNlIG8oby5QK28uRioocHx8TSksZSxiKTtyZXR1cm4gYn19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigxMSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1lLl9fZXNNb2R1bGU9ITA7dmFyIHI9big3Niksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9big3OCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9XCJmdW5jdGlvblwiPT10eXBlb2YgdS5kZWZhdWx0JiZcInN5bWJvbFwiPT10eXBlb2Ygby5kZWZhdWx0P2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHUuZGVmYXVsdCYmdC5jb25zdHJ1Y3Rvcj09PXUuZGVmYXVsdCYmdCE9PXUuZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH07ZS5kZWZhdWx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIHUuZGVmYXVsdCYmXCJzeW1ib2xcIj09PXMoby5kZWZhdWx0KT9mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOnModCl9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB1LmRlZmF1bHQmJnQuY29uc3RydWN0b3I9PT11LmRlZmF1bHQmJnQhPT11LmRlZmF1bHQucHJvdG90eXBlP1wic3ltYm9sXCI6dm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOnModCl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big0Miksbz1uKDMxKS5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKTtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKHQpe3JldHVybiByKHQsbyl9fSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTYpO3QuZXhwb3J0cz1PYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbih0KXtyZXR1cm5cIlN0cmluZ1wiPT1yKHQpP3Quc3BsaXQoXCJcIik6T2JqZWN0KHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSkuZG9jdW1lbnQ7dC5leHBvcnRzPXImJnIuZG9jdW1lbnRFbGVtZW50fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxMCksbz1uKDMzKSxpPW4oMjkpKFwiSUVfUFJPVE9cIiksdT1PYmplY3QucHJvdG90eXBlO3QuZXhwb3J0cz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQpe3JldHVybiB0PW8odCkscih0LGkpP3RbaV06XCJmdW5jdGlvblwiPT10eXBlb2YgdC5jb25zdHJ1Y3RvciYmdCBpbnN0YW5jZW9mIHQuY29uc3RydWN0b3I/dC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6dCBpbnN0YW5jZW9mIE9iamVjdD91Om51bGx9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxNiksbz1uKDIpKFwidG9TdHJpbmdUYWdcIiksaT1cIkFyZ3VtZW50c1wiPT1yKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksdT1mdW5jdGlvbih0LGUpe3RyeXtyZXR1cm4gdFtlXX1jYXRjaCh0KXt9fTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUsbixzO3JldHVybiB2b2lkIDA9PT10P1wiVW5kZWZpbmVkXCI6bnVsbD09PXQ/XCJOdWxsXCI6XCJzdHJpbmdcIj09dHlwZW9mKG49dShlPU9iamVjdCh0KSxvKSk/bjppP3IoZSk6XCJPYmplY3RcIj09KHM9cihlKSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY2FsbGVlP1wiQXJndW1lbnRzXCI6c319LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9e2RlZmF1bHQ6big2NyksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEyKSxvPW4oNDYpLGk9big2Mik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4sdSl7dmFyIHMsYz1yKGUpLGY9byhjLmxlbmd0aCksYT1pKHUsZik7aWYodCYmbiE9bil7Zm9yKDtmPmE7KWlmKChzPWNbYSsrXSkhPXMpcmV0dXJuITB9ZWxzZSBmb3IoO2Y+YTthKyspaWYoKHR8fGEgaW4gYykmJmNbYV09PT1uKXJldHVybiB0fHxhfHwwO3JldHVybiF0JiYtMX19fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyNCksbz1NYXRoLm1heCxpPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXIodCksdDwwP28odCtlLDApOmkodCxlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDcpLG89bigyMiksaT1uKDIpKFwic3BlY2llc1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbix1PXIodCkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PXV8fHZvaWQgMD09KG49cih1KVtpXSk/ZTpvKG4pfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByLG8saSx1PW4oMTgpLHM9big5NCksYz1uKDU3KSxmPW4oMzIpLGE9bigxKSxsPWEucHJvY2VzcyxwPWEuc2V0SW1tZWRpYXRlLHY9YS5jbGVhckltbWVkaWF0ZSxkPWEuTWVzc2FnZUNoYW5uZWwsaD1hLkRpc3BhdGNoLHk9MCxfPXt9LGI9ZnVuY3Rpb24oKXt2YXIgdD0rdGhpcztpZihfLmhhc093blByb3BlcnR5KHQpKXt2YXIgZT1fW3RdO2RlbGV0ZSBfW3RdLGUoKX19LGc9ZnVuY3Rpb24odCl7Yi5jYWxsKHQuZGF0YSl9O3AmJnZ8fChwPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTE7YXJndW1lbnRzLmxlbmd0aD5uOyllLnB1c2goYXJndW1lbnRzW24rK10pO3JldHVybiBfWysreV09ZnVuY3Rpb24oKXtzKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpGdW5jdGlvbih0KSxlKX0scih5KSx5fSx2PWZ1bmN0aW9uKHQpe2RlbGV0ZSBfW3RdfSxcInByb2Nlc3NcIj09bigxNikobCk/cj1mdW5jdGlvbih0KXtsLm5leHRUaWNrKHUoYix0LDEpKX06aCYmaC5ub3c/cj1mdW5jdGlvbih0KXtoLm5vdyh1KGIsdCwxKSl9OmQ/KG89bmV3IGQsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcscj11KGkucG9zdE1lc3NhZ2UsaSwxKSk6YS5hZGRFdmVudExpc3RlbmVyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWEuaW1wb3J0U2NyaXB0cz8ocj1mdW5jdGlvbih0KXthLnBvc3RNZXNzYWdlKHQrXCJcIixcIipcIil9LGEuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixnLCExKSk6cj1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4gZihcInNjcmlwdFwiKT9mdW5jdGlvbih0KXtjLmFwcGVuZENoaWxkKGYoXCJzY3JpcHRcIikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2MucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKHQpfX06ZnVuY3Rpb24odCl7c2V0VGltZW91dCh1KGIsdCwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OnAsY2xlYXI6dn19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm57ZTohMSx2OnQoKX19Y2F0Y2godCl7cmV0dXJue2U6ITAsdjp0fX19fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big3KSxvPW4oOSksaT1uKDQ4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZihyKHQpLG8oZSkmJmUuY29uc3RydWN0b3I9PT10KXJldHVybiBlO3ZhciBuPWkuZih0KTtyZXR1cm4oMCxuLnJlc29sdmUpKGUpLG4ucHJvbWlzZX19LGZ1bmN0aW9uKHQsZSxuKXtuKDY4KTt2YXIgcj1uKDApLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3JldHVybiByLmRlZmluZVByb3BlcnR5KHQsZSxuKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDUpO3Ioci5TK3IuRiohbig2KSxcIk9iamVjdFwiLHtkZWZpbmVQcm9wZXJ0eTpuKDgpLmZ9KX0sLGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDI0KSxvPW4oMjUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaSx1LHM9U3RyaW5nKG8oZSkpLGM9cihuKSxmPXMubGVuZ3RoO3JldHVybiBjPDB8fGM+PWY/dD9cIlwiOnZvaWQgMDooaT1zLmNoYXJDb2RlQXQoYyksaTw1NTI5Nnx8aT41NjMxOXx8YysxPT09Znx8KHU9cy5jaGFyQ29kZUF0KGMrMSkpPDU2MzIwfHx1PjU3MzQzP3Q/cy5jaGFyQXQoYyk6aTp0P3Muc2xpY2UoYyxjKzIpOnUtNTYzMjArKGktNTUyOTY8PDEwKSs2NTUzNil9fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oNDApLG89bigyMCksaT1uKDIzKSx1PXt9O24oMTEpKHUsbigyKShcIml0ZXJhdG9yXCIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3QucHJvdG90eXBlPXIodSx7bmV4dDpvKDEsbil9KSxpKHQsZStcIiBJdGVyYXRvclwiKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDgpLG89big3KSxpPW4oMTkpO3QuZXhwb3J0cz1uKDYpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKHQsZSl7byh0KTtmb3IodmFyIG4sdT1pKGUpLHM9dS5sZW5ndGgsYz0wO3M+Yzspci5mKHQsbj11W2MrK10sZVtuXSk7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big3NCksbz1uKDc1KSxpPW4oMTUpLHU9bigxMik7dC5leHBvcnRzPW4oNTEpKEFycmF5LFwiQXJyYXlcIixmdW5jdGlvbih0LGUpe3RoaXMuX3Q9dSh0KSx0aGlzLl9pPTAsdGhpcy5faz1lfSxmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3QsZT10aGlzLl9rLG49dGhpcy5faSsrO3JldHVybiF0fHxuPj10Lmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6XCJrZXlzXCI9PWU/bygwLG4pOlwidmFsdWVzXCI9PWU/bygwLHRbbl0pOm8oMCxbbix0W25dXSl9LFwidmFsdWVzXCIpLGkuQXJndW1lbnRzPWkuQXJyYXkscihcImtleXNcIikscihcInZhbHVlc1wiKSxyKFwiZW50cmllc1wiKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybnt2YWx1ZTplLGRvbmU6ISF0fX19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9e2RlZmF1bHQ6big3NyksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSxuKXtuKDQ1KSxuKDQ3KSx0LmV4cG9ydHM9bigzNykuZihcIml0ZXJhdG9yXCIpfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oNzkpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUsbil7big4MCksbig1NSksbig4NSksbig4NiksdC5leHBvcnRzPW4oMCkuU3ltYm9sfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9bigxKSxvPW4oMTApLGk9big2KSx1PW4oNSkscz1uKDUyKSxjPW4oODEpLktFWSxmPW4oMTMpLGE9bigzMCksbD1uKDIzKSxwPW4oMjEpLHY9bigyKSxkPW4oMzcpLGg9bigzOCkseT1uKDgyKSxfPW4oODMpLGI9big3KSxnPW4oOSksbT1uKDEyKSx3PW4oMjgpLHg9bigyMCksTz1uKDQwKSxNPW4oODQpLFA9big1MCksUz1uKDgpLEw9bigxOSksaj1QLmYsaz1TLmYsRT1NLmYsUj1yLlN5bWJvbCxUPXIuSlNPTixDPVQmJlQuc3RyaW5naWZ5LEE9dihcIl9oaWRkZW5cIiksRD12KFwidG9QcmltaXRpdmVcIiksRj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxxPWEoXCJzeW1ib2wtcmVnaXN0cnlcIiksST1hKFwic3ltYm9sc1wiKSxOPWEoXCJvcC1zeW1ib2xzXCIpLEI9T2JqZWN0LnByb3RvdHlwZSxXPVwiZnVuY3Rpb25cIj09dHlwZW9mIFIsRz1yLlFPYmplY3QsVT0hR3x8IUcucHJvdG90eXBlfHwhRy5wcm90b3R5cGUuZmluZENoaWxkLFY9aSYmZihmdW5jdGlvbigpe3JldHVybiA3IT1PKGsoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBrKHRoaXMsXCJhXCIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24odCxlLG4pe3ZhciByPWooQixlKTtyJiZkZWxldGUgQltlXSxrKHQsZSxuKSxyJiZ0IT09QiYmayhCLGUscil9OmssSD1mdW5jdGlvbih0KXt2YXIgZT1JW3RdPU8oUi5wcm90b3R5cGUpO3JldHVybiBlLl9rPXQsZX0sSz1XJiZcInN5bWJvbFwiPT10eXBlb2YgUi5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBSfSxKPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD09PUImJkooTixlLG4pLGIodCksZT13KGUsITApLGIobiksbyhJLGUpPyhuLmVudW1lcmFibGU/KG8odCxBKSYmdFtBXVtlXSYmKHRbQV1bZV09ITEpLG49TyhuLHtlbnVtZXJhYmxlOngoMCwhMSl9KSk6KG8odCxBKXx8ayh0LEEseCgxLHt9KSksdFtBXVtlXT0hMCksVih0LGUsbikpOmsodCxlLG4pfSx6PWZ1bmN0aW9uKHQsZSl7Yih0KTtmb3IodmFyIG4scj15KGU9bShlKSksbz0wLGk9ci5sZW5ndGg7aT5vOylKKHQsbj1yW28rK10sZVtuXSk7cmV0dXJuIHR9LFk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZT9PKHQpOnooTyh0KSxlKX0sUT1mdW5jdGlvbih0KXt2YXIgZT1GLmNhbGwodGhpcyx0PXcodCwhMCkpO3JldHVybiEodGhpcz09PUImJm8oSSx0KSYmIW8oTix0KSkmJighKGV8fCFvKHRoaXMsdCl8fCFvKEksdCl8fG8odGhpcyxBKSYmdGhpc1tBXVt0XSl8fGUpfSxYPWZ1bmN0aW9uKHQsZSl7aWYodD1tKHQpLGU9dyhlLCEwKSx0IT09Qnx8IW8oSSxlKXx8byhOLGUpKXt2YXIgbj1qKHQsZSk7cmV0dXJuIW58fCFvKEksZSl8fG8odCxBKSYmdFtBXVtlXXx8KG4uZW51bWVyYWJsZT0hMCksbn19LFo9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49RShtKHQpKSxyPVtdLGk9MDtuLmxlbmd0aD5pOylvKEksZT1uW2krK10pfHxlPT1BfHxlPT1jfHxyLnB1c2goZSk7cmV0dXJuIHJ9LCQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49dD09PUIscj1FKG4/TjptKHQpKSxpPVtdLHU9MDtyLmxlbmd0aD51OykhbyhJLGU9clt1KytdKXx8biYmIW8oQixlKXx8aS5wdXNoKElbZV0pO3JldHVybiBpfTtXfHwoUj1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBSKXRocm93IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciFcIik7dmFyIHQ9cChhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCksZT1mdW5jdGlvbihuKXt0aGlzPT09QiYmZS5jYWxsKE4sbiksbyh0aGlzLEEpJiZvKHRoaXNbQV0sdCkmJih0aGlzW0FdW3RdPSExKSxWKHRoaXMsdCx4KDEsbikpfTtyZXR1cm4gaSYmVSYmVihCLHQse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZX0pLEgodCl9LHMoUi5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxQLmY9WCxTLmY9SixuKDU0KS5mPU0uZj1aLG4oMjcpLmY9USxuKDQzKS5mPSQsaSYmIW4oMTQpJiZzKEIsXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLFEsITApLGQuZj1mdW5jdGlvbih0KXtyZXR1cm4gSCh2KHQpKX0pLHUodS5HK3UuVyt1LkYqIVcse1N5bWJvbDpSfSk7Zm9yKHZhciB0dD1cImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzXCIuc3BsaXQoXCIsXCIpLGV0PTA7dHQubGVuZ3RoPmV0Oyl2KHR0W2V0KytdKTtmb3IodmFyIG50PUwodi5zdG9yZSkscnQ9MDtudC5sZW5ndGg+cnQ7KWgobnRbcnQrK10pO3UodS5TK3UuRiohVyxcIlN5bWJvbFwiLHtmb3I6ZnVuY3Rpb24odCl7cmV0dXJuIG8ocSx0Kz1cIlwiKT9xW3RdOnFbdF09Uih0KX0sa2V5Rm9yOmZ1bmN0aW9uKHQpe2lmKCFLKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhIHN5bWJvbCFcIik7Zm9yKHZhciBlIGluIHEpaWYocVtlXT09PXQpcmV0dXJuIGV9LHVzZVNldHRlcjpmdW5jdGlvbigpe1U9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe1U9ITF9fSksdSh1LlMrdS5GKiFXLFwiT2JqZWN0XCIse2NyZWF0ZTpZLGRlZmluZVByb3BlcnR5OkosZGVmaW5lUHJvcGVydGllczp6LGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpYLGdldE93blByb3BlcnR5TmFtZXM6WixnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6JH0pLFQmJnUodS5TK3UuRiooIVd8fGYoZnVuY3Rpb24oKXt2YXIgdD1SKCk7cmV0dXJuXCJbbnVsbF1cIiE9QyhbdF0pfHxcInt9XCIhPUMoe2E6dH0pfHxcInt9XCIhPUMoT2JqZWN0KHQpKX0pKSxcIkpTT05cIix7c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9W3RdLG89MTthcmd1bWVudHMubGVuZ3RoPm87KXIucHVzaChhcmd1bWVudHNbbysrXSk7aWYobj1lPXJbMV0sKGcoZSl8fHZvaWQgMCE9PXQpJiYhSyh0KSlyZXR1cm4gXyhlKXx8KGU9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYoZT1uLmNhbGwodGhpcyx0LGUpKSwhSyhlKSlyZXR1cm4gZX0pLHJbMV09ZSxDLmFwcGx5KFQscil9fSksUi5wcm90b3R5cGVbRF18fG4oMTEpKFIucHJvdG90eXBlLEQsUi5wcm90b3R5cGUudmFsdWVPZiksbChSLFwiU3ltYm9sXCIpLGwoTWF0aCxcIk1hdGhcIiwhMCksbChyLkpTT04sXCJKU09OXCIsITApfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyMSkoXCJtZXRhXCIpLG89big5KSxpPW4oMTApLHU9big4KS5mLHM9MCxjPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGY9IW4oMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIGMoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxhPWZ1bmN0aW9uKHQpe3UodCxyLHt2YWx1ZTp7aTpcIk9cIisgKytzLHc6e319fSl9LGw9ZnVuY3Rpb24odCxlKXtpZighbyh0KSlyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdD90OihcInN0cmluZ1wiPT10eXBlb2YgdD9cIlNcIjpcIlBcIikrdDtpZighaSh0LHIpKXtpZighYyh0KSlyZXR1cm5cIkZcIjtpZighZSlyZXR1cm5cIkVcIjthKHQpfXJldHVybiB0W3JdLml9LHA9ZnVuY3Rpb24odCxlKXtpZighaSh0LHIpKXtpZighYyh0KSlyZXR1cm4hMDtpZighZSlyZXR1cm4hMTthKHQpfXJldHVybiB0W3JdLnd9LHY9ZnVuY3Rpb24odCl7cmV0dXJuIGYmJmQuTkVFRCYmYyh0KSYmIWkodCxyKSYmYSh0KSx0fSxkPXQuZXhwb3J0cz17S0VZOnIsTkVFRDohMSxmYXN0S2V5OmwsZ2V0V2VhazpwLG9uRnJlZXplOnZ9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxOSksbz1uKDQzKSxpPW4oMjcpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1yKHQpLG49by5mO2lmKG4pZm9yKHZhciB1LHM9bih0KSxjPWkuZixmPTA7cy5sZW5ndGg+ZjspYy5jYWxsKHQsdT1zW2YrK10pJiZlLnB1c2godSk7cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxNik7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiQXJyYXlcIj09cih0KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEyKSxvPW4oNTQpLmYsaT17fS50b1N0cmluZyx1PVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gbyh0KX1jYXRjaCh0KXtyZXR1cm4gdS5zbGljZSgpfX07dC5leHBvcnRzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIHUmJlwiW29iamVjdCBXaW5kb3ddXCI9PWkuY2FsbCh0KT9zKHQpOm8ocih0KSl9fSxmdW5jdGlvbih0LGUsbil7bigzOCkoXCJhc3luY0l0ZXJhdG9yXCIpfSxmdW5jdGlvbih0LGUsbil7bigzOCkoXCJvYnNlcnZhYmxlXCIpfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big1OSksbz1uKDIpKFwiaXRlcmF0b3JcIiksaT1uKDE1KTt0LmV4cG9ydHM9bigwKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbih0KXtpZih2b2lkIDAhPXQpcmV0dXJuIHRbb118fHRbXCJAQGl0ZXJhdG9yXCJdfHxpW3IodCldfX0sZnVuY3Rpb24odCxlLG4pe24oNTUpLG4oNDUpLG4oNDcpLG4oODkpLG4oMTAwKSxuKDEwMSksdC5leHBvcnRzPW4oMCkuUHJvbWlzZX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByLG8saSx1LHM9bigxNCksYz1uKDEpLGY9bigxOCksYT1uKDU5KSxsPW4oNSkscD1uKDkpLHY9bigyMiksZD1uKDkwKSxoPW4oOTEpLHk9big2MyksXz1uKDY0KS5zZXQsYj1uKDk1KSgpLGc9big0OCksbT1uKDY1KSx3PW4oOTYpLHg9big2NiksTz1jLlR5cGVFcnJvcixNPWMucHJvY2VzcyxQPU0mJk0udmVyc2lvbnMsUz1QJiZQLnY4fHxcIlwiLEw9Yy5Qcm9taXNlLGo9XCJwcm9jZXNzXCI9PWEoTSksaz1mdW5jdGlvbigpe30sRT1vPWcuZixSPSEhZnVuY3Rpb24oKXt0cnl7dmFyIHQ9TC5yZXNvbHZlKDEpLGU9KHQuY29uc3RydWN0b3I9e30pW24oMikoXCJzcGVjaWVzXCIpXT1mdW5jdGlvbih0KXt0KGssayl9O3JldHVybihqfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZ0LnRoZW4oaylpbnN0YW5jZW9mIGUmJjAhPT1TLmluZGV4T2YoXCI2LjZcIikmJi0xPT09dy5pbmRleE9mKFwiQ2hyb21lLzY2XCIpfWNhdGNoKHQpe319KCksVD1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4hKCFwKHQpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZihlPXQudGhlbikpJiZlfSxDPWZ1bmN0aW9uKHQsZSl7aWYoIXQuX24pe3QuX249ITA7dmFyIG49dC5fYztiKGZ1bmN0aW9uKCl7Zm9yKHZhciByPXQuX3Ysbz0xPT10Ll9zLGk9MDtuLmxlbmd0aD5pOykhZnVuY3Rpb24oZSl7dmFyIG4saSx1LHM9bz9lLm9rOmUuZmFpbCxjPWUucmVzb2x2ZSxmPWUucmVqZWN0LGE9ZS5kb21haW47dHJ5e3M/KG98fCgyPT10Ll9oJiZGKHQpLHQuX2g9MSksITA9PT1zP249cjooYSYmYS5lbnRlcigpLG49cyhyKSxhJiYoYS5leGl0KCksdT0hMCkpLG49PT1lLnByb21pc2U/ZihPKFwiUHJvbWlzZS1jaGFpbiBjeWNsZVwiKSk6KGk9VChuKSk/aS5jYWxsKG4sYyxmKTpjKG4pKTpmKHIpfWNhdGNoKHQpe2EmJiF1JiZhLmV4aXQoKSxmKHQpfX0obltpKytdKTt0Ll9jPVtdLHQuX249ITEsZSYmIXQuX2gmJkEodCl9KX19LEE9ZnVuY3Rpb24odCl7Xy5jYWxsKGMsZnVuY3Rpb24oKXt2YXIgZSxuLHIsbz10Ll92LGk9RCh0KTtpZihpJiYoZT1tKGZ1bmN0aW9uKCl7aj9NLmVtaXQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixvLHQpOihuPWMub251bmhhbmRsZWRyZWplY3Rpb24pP24oe3Byb21pc2U6dCxyZWFzb246b30pOihyPWMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoXCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25cIixvKX0pLHQuX2g9anx8RCh0KT8yOjEpLHQuX2E9dm9pZCAwLGkmJmUuZSl0aHJvdyBlLnZ9KX0sRD1mdW5jdGlvbih0KXtyZXR1cm4gMSE9PXQuX2gmJjA9PT0odC5fYXx8dC5fYykubGVuZ3RofSxGPWZ1bmN0aW9uKHQpe18uY2FsbChjLGZ1bmN0aW9uKCl7dmFyIGU7aj9NLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsdCk6KGU9Yy5vbnJlamVjdGlvbmhhbmRsZWQpJiZlKHtwcm9taXNlOnQscmVhc29uOnQuX3Z9KX0pfSxxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7ZS5fZHx8KGUuX2Q9ITAsZT1lLl93fHxlLGUuX3Y9dCxlLl9zPTIsZS5fYXx8KGUuX2E9ZS5fYy5zbGljZSgpKSxDKGUsITApKX0sST1mdW5jdGlvbih0KXt2YXIgZSxuPXRoaXM7aWYoIW4uX2Qpe24uX2Q9ITAsbj1uLl93fHxuO3RyeXtpZihuPT09dCl0aHJvdyBPKFwiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGZcIik7KGU9VCh0KSk/YihmdW5jdGlvbigpe3ZhciByPXtfdzpuLF9kOiExfTt0cnl7ZS5jYWxsKHQsZihJLHIsMSksZihxLHIsMSkpfWNhdGNoKHQpe3EuY2FsbChyLHQpfX0pOihuLl92PXQsbi5fcz0xLEMobiwhMSkpfWNhdGNoKHQpe3EuY2FsbCh7X3c6bixfZDohMX0sdCl9fX07Unx8KEw9ZnVuY3Rpb24odCl7ZCh0aGlzLEwsXCJQcm9taXNlXCIsXCJfaFwiKSx2KHQpLHIuY2FsbCh0aGlzKTt0cnl7dChmKEksdGhpcywxKSxmKHEsdGhpcywxKSl9Y2F0Y2godCl7cS5jYWxsKHRoaXMsdCl9fSxyPWZ1bmN0aW9uKHQpe3RoaXMuX2M9W10sdGhpcy5fYT12b2lkIDAsdGhpcy5fcz0wLHRoaXMuX2Q9ITEsdGhpcy5fdj12b2lkIDAsdGhpcy5faD0wLHRoaXMuX249ITF9LHIucHJvdG90eXBlPW4oOTcpKEwucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKHQsZSl7dmFyIG49RSh5KHRoaXMsTCkpO3JldHVybiBuLm9rPVwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fHQsbi5mYWlsPVwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUsbi5kb21haW49aj9NLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKG4pLHRoaXMuX2EmJnRoaXMuX2EucHVzaChuKSx0aGlzLl9zJiZDKHRoaXMsITEpLG4ucHJvbWlzZX0sY2F0Y2g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsdCl9fSksaT1mdW5jdGlvbigpe3ZhciB0PW5ldyByO3RoaXMucHJvbWlzZT10LHRoaXMucmVzb2x2ZT1mKEksdCwxKSx0aGlzLnJlamVjdD1mKHEsdCwxKX0sZy5mPUU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1MfHx0PT09dT9uZXcgaSh0KTpvKHQpfSksbChsLkcrbC5XK2wuRiohUix7UHJvbWlzZTpMfSksbigyMykoTCxcIlByb21pc2VcIiksbig5OCkoXCJQcm9taXNlXCIpLHU9bigwKS5Qcm9taXNlLGwobC5TK2wuRiohUixcIlByb21pc2VcIix7cmVqZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPUUodGhpcyk7cmV0dXJuKDAsZS5yZWplY3QpKHQpLGUucHJvbWlzZX19KSxsKGwuUytsLkYqKHN8fCFSKSxcIlByb21pc2VcIix7cmVzb2x2ZTpmdW5jdGlvbih0KXtyZXR1cm4geChzJiZ0aGlzPT09dT9MOnRoaXMsdCl9fSksbChsLlMrbC5GKiEoUiYmbig5OSkoZnVuY3Rpb24odCl7TC5hbGwodCkuY2F0Y2goayl9KSksXCJQcm9taXNlXCIse2FsbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49RShlKSxyPW4ucmVzb2x2ZSxvPW4ucmVqZWN0LGk9bShmdW5jdGlvbigpe3ZhciBuPVtdLGk9MCx1PTE7aCh0LCExLGZ1bmN0aW9uKHQpe3ZhciBzPWkrKyxjPSExO24ucHVzaCh2b2lkIDApLHUrKyxlLnJlc29sdmUodCkudGhlbihmdW5jdGlvbih0KXtjfHwoYz0hMCxuW3NdPXQsLS11fHxyKG4pKX0sbyl9KSwtLXV8fHIobil9KTtyZXR1cm4gaS5lJiZvKGkudiksbi5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1FKGUpLHI9bi5yZWplY3Qsbz1tKGZ1bmN0aW9uKCl7aCh0LCExLGZ1bmN0aW9uKHQpe2UucmVzb2x2ZSh0KS50aGVuKG4ucmVzb2x2ZSxyKX0pfSk7cmV0dXJuIG8uZSYmcihvLnYpLG4ucHJvbWlzZX19KX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4scil7aWYoISh0IGluc3RhbmNlb2YgZSl8fHZvaWQgMCE9PXImJnIgaW4gdCl0aHJvdyBUeXBlRXJyb3IobitcIjogaW5jb3JyZWN0IGludm9jYXRpb24hXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTgpLG89big5MiksaT1uKDkzKSx1PW4oNykscz1uKDQ2KSxjPW4oODcpLGY9e30sYT17fSxlPXQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixsLHApe3ZhciB2LGQsaCx5LF89cD9mdW5jdGlvbigpe3JldHVybiB0fTpjKHQpLGI9cihuLGwsZT8yOjEpLGc9MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBfKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7aWYoaShfKSl7Zm9yKHY9cyh0Lmxlbmd0aCk7dj5nO2crKylpZigoeT1lP2IodShkPXRbZ10pWzBdLGRbMV0pOmIodFtnXSkpPT09Znx8eT09PWEpcmV0dXJuIHl9ZWxzZSBmb3IoaD1fLmNhbGwodCk7IShkPWgubmV4dCgpKS5kb25lOylpZigoeT1vKGgsYixkLnZhbHVlLGUpKT09PWZ8fHk9PT1hKXJldHVybiB5fTtlLkJSRUFLPWYsZS5SRVRVUk49YX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLG8pe3RyeXtyZXR1cm4gbz9lKHIobilbMF0sblsxXSk6ZShuKX1jYXRjaChlKXt2YXIgaT10LnJldHVybjt0aHJvdyB2b2lkIDAhPT1pJiZyKGkuY2FsbCh0KSksZX19fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxNSksbz1uKDIpKFwiaXRlcmF0b3JcIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiYoci5BcnJheT09PXR8fGlbb109PT10KX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj12b2lkIDA9PT1uO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOnJldHVybiByP3QoKTp0LmNhbGwobik7Y2FzZSAxOnJldHVybiByP3QoZVswXSk6dC5jYWxsKG4sZVswXSk7Y2FzZSAyOnJldHVybiByP3QoZVswXSxlWzFdKTp0LmNhbGwobixlWzBdLGVbMV0pO2Nhc2UgMzpyZXR1cm4gcj90KGVbMF0sZVsxXSxlWzJdKTp0LmNhbGwobixlWzBdLGVbMV0sZVsyXSk7Y2FzZSA0OnJldHVybiByP3QoZVswXSxlWzFdLGVbMl0sZVszXSk6dC5jYWxsKG4sZVswXSxlWzFdLGVbMl0sZVszXSl9cmV0dXJuIHQuYXBwbHkobixlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEpLG89big2NCkuc2V0LGk9ci5NdXRhdGlvbk9ic2VydmVyfHxyLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsdT1yLnByb2Nlc3Mscz1yLlByb21pc2UsYz1cInByb2Nlc3NcIj09bigxNikodSk7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxuLGY9ZnVuY3Rpb24oKXt2YXIgcixvO2ZvcihjJiYocj11LmRvbWFpbikmJnIuZXhpdCgpO3Q7KXtvPXQuZm4sdD10Lm5leHQ7dHJ5e28oKX1jYXRjaChyKXt0aHJvdyB0P24oKTplPXZvaWQgMCxyfX1lPXZvaWQgMCxyJiZyLmVudGVyKCl9O2lmKGMpbj1mdW5jdGlvbigpe3UubmV4dFRpY2soZil9O2Vsc2UgaWYoIWl8fHIubmF2aWdhdG9yJiZyLm5hdmlnYXRvci5zdGFuZGFsb25lKWlmKHMmJnMucmVzb2x2ZSl7dmFyIGE9cy5yZXNvbHZlKHZvaWQgMCk7bj1mdW5jdGlvbigpe2EudGhlbihmKX19ZWxzZSBuPWZ1bmN0aW9uKCl7by5jYWxsKHIsZil9O2Vsc2V7dmFyIGw9ITAscD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtuZXcgaShmKS5vYnNlcnZlKHAse2NoYXJhY3RlckRhdGE6ITB9KSxuPWZ1bmN0aW9uKCl7cC5kYXRhPWw9IWx9fXJldHVybiBmdW5jdGlvbihyKXt2YXIgbz17Zm46cixuZXh0OnZvaWQgMH07ZSYmKGUubmV4dD1vKSx0fHwodD1vLG4oKSksZT1vfX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEpLG89ci5uYXZpZ2F0b3I7dC5leHBvcnRzPW8mJm8udXNlckFnZW50fHxcIlwifSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxMSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIG8gaW4gZSluJiZ0W29dP3Rbb109ZVtvXTpyKHQsbyxlW29dKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDEpLG89bigwKSxpPW4oOCksdT1uKDYpLHM9bigyKShcInNwZWNpZXNcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPVwiZnVuY3Rpb25cIj09dHlwZW9mIG9bdF0/b1t0XTpyW3RdO3UmJmUmJiFlW3NdJiZpLmYoZSxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyKShcIml0ZXJhdG9yXCIpLG89ITE7dHJ5e3ZhciBpPVs3XVtyXSgpO2kucmV0dXJuPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHQpe310LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighZSYmIW8pcmV0dXJuITE7dmFyIG49ITE7dHJ5e3ZhciBpPVs3XSx1PWlbcl0oKTt1Lm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpuPSEwfX0saVtyXT1mdW5jdGlvbigpe3JldHVybiB1fSx0KGkpfWNhdGNoKHQpe31yZXR1cm4gbn19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDUpLG89bigwKSxpPW4oMSksdT1uKDYzKSxzPW4oNjYpO3Ioci5QK3IuUixcIlByb21pc2VcIix7ZmluYWxseTpmdW5jdGlvbih0KXt2YXIgZT11KHRoaXMsby5Qcm9taXNlfHxpLlByb21pc2UpLG49XCJmdW5jdGlvblwiPT10eXBlb2YgdDtyZXR1cm4gdGhpcy50aGVuKG4/ZnVuY3Rpb24obil7cmV0dXJuIHMoZSx0KCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbn0pfTp0LG4/ZnVuY3Rpb24obil7cmV0dXJuIHMoZSx0KCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBufSl9OnQpfX0pfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big1KSxvPW4oNDgpLGk9big2NSk7cihyLlMsXCJQcm9taXNlXCIse3RyeTpmdW5jdGlvbih0KXt2YXIgZT1vLmYodGhpcyksbj1pKHQpO3JldHVybihuLmU/ZS5yZWplY3Q6ZS5yZXNvbHZlKShuLnYpLGUucHJvbWlzZX19KX0sZnVuY3Rpb24odCxlLG4pe24oMTAzKSx0LmV4cG9ydHM9bigwKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDMzKSxvPW4oNTgpO24oNDkpKFwiZ2V0UHJvdG90eXBlT2ZcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbyhyKHQpKX19KX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDEwNSksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSxuKXtuKDEwNiksdC5leHBvcnRzPW4oMCkuT2JqZWN0LnNldFByb3RvdHlwZU9mfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big1KTtyKHIuUyxcIk9iamVjdFwiLHtzZXRQcm90b3R5cGVPZjpuKDEwNykuc2V0fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDkpLG89big3KSxpPWZ1bmN0aW9uKHQsZSl7aWYobyh0KSwhcihlKSYmbnVsbCE9PWUpdGhyb3cgVHlwZUVycm9yKGUrXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbih0LGUscil7dHJ5e3I9bigxOCkoRnVuY3Rpb24uY2FsbCxuKDUwKS5mKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIikuc2V0LDIpLHIodCxbXSksZT0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2godCl7ZT0hMH1yZXR1cm4gZnVuY3Rpb24odCxuKXtyZXR1cm4gaSh0LG4pLGU/dC5fX3Byb3RvX189bjpyKHQsbiksdH19KHt9LCExKTp2b2lkIDApLGNoZWNrOml9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oMTA5KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe24oMTEwKTt2YXIgcj1uKDApLk9iamVjdDt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gci5jcmVhdGUodCxlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDUpO3Ioci5TLFwiT2JqZWN0XCIse2NyZWF0ZTpuKDQwKX0pfSwsLCwsLCwsLCwsLCwsLCxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigyNiksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9bigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1uKDQpLGM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxmPW4oMzQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChmKSxsPW4oMzUpLHA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSx2PW4oMTI3KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksaD1mdW5jdGlvbih0KXtmdW5jdGlvbiBNaW5pQnVzKCl7cmV0dXJuKDAsdS5kZWZhdWx0KSh0aGlzLE1pbmlCdXMpLCgwLGEuZGVmYXVsdCkodGhpcywoTWluaUJ1cy5fX3Byb3RvX198fCgwLG8uZGVmYXVsdCkoTWluaUJ1cykpLmNhbGwodGhpcykpfXJldHVybigwLHAuZGVmYXVsdCkoTWluaUJ1cyx0KSwoMCxjLmRlZmF1bHQpKE1pbmlCdXMsW3trZXk6XCJwb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3JldHVybiByLl9nZW5JZCh0KSxyLl9yZXNwb25zZUNhbGxiYWNrKHQsZSxuKSxyLl9vblBvc3RNZXNzYWdlKHQpLHQuaWR9fSx7a2V5OlwiX29uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoIWUuX29uUmVzcG9uc2UodCkpe3ZhciBuPWUuX3N1YnNjcmlwdGlvbnNbdC50b107bj8oZS5fcHVibGlzaE9uKG4sdCksdC50by5zdGFydHNXaXRoKFwiaHlwZXJ0eVwiKXx8ZS5fcHVibGlzaE9uRGVmYXVsdCh0KSk6ZS5fcHVibGlzaE9uRGVmYXVsdCh0KX19fV0pLE1pbmlCdXN9KGQuZGVmYXVsdCk7ZS5kZWZhdWx0PWgsdC5leHBvcnRzPWUuZGVmYXVsdH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMTcpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9big0KSxjPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksZj1uKDM2KSxhPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oZiksbD1hLmdldExvZ2dlcihcIkJ1c1wiKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQnVzKCl7KDAsdS5kZWZhdWx0KSh0aGlzLEJ1cyk7dmFyIHQ9dGhpczt0Ll9tc2dJZD0wLHQuX3N1YnNjcmlwdGlvbnM9e30sdC5fcmVzcG9uc2VUaW1lT3V0PTNlNCx0Ll9yZXNwb25zZUNhbGxiYWNrcz17fSx0Ll9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIoKX1yZXR1cm4oMCxjLmRlZmF1bHQpKEJ1cyxbe2tleTpcImFkZExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9bmV3IHYobi5fc3Vic2NyaXB0aW9ucyx0LGUpLG89bi5fc3Vic2NyaXB0aW9uc1t0XTtyZXR1cm4gb3x8KG89W10sbi5fc3Vic2NyaXB0aW9uc1t0XT1vKSxvLnB1c2gocikscn19LHtrZXk6XCJhZGRSZXNwb25zZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3QrZV09bn19LHtrZXk6XCJyZW1vdmVSZXNwb25zZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtkZWxldGUgdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbdCtlXX19LHtrZXk6XCJyZW1vdmVBbGxMaXN0ZW5lcnNPZlwiLHZhbHVlOmZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW3RdfX0se2tleTpcImJpbmRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcyxvPXRoaXM7cmV0dXJue3RoaXNMaXN0ZW5lcjpvLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24odCl7bi5wb3N0TWVzc2FnZSh0KX0pLHRhcmdldExpc3RlbmVyOm4uYWRkTGlzdGVuZXIoZSxmdW5jdGlvbih0KXtvLnBvc3RNZXNzYWdlKHQpfSksdW5iaW5kOmZ1bmN0aW9uKCl7ci50aGlzTGlzdGVuZXIucmVtb3ZlKCksci50YXJnZXRMaXN0ZW5lci5yZW1vdmUoKX19fX0se2tleTpcIl9wdWJsaXNoT25EZWZhdWx0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fc3Vic2NyaXB0aW9uc1tcIipcIl07ZSYmdGhpcy5fcHVibGlzaE9uKGUsdCl9fSx7a2V5OlwiX3B1Ymxpc2hPblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuX2NhbGxiYWNrKGUpfSl9fSx7a2V5OlwiX3Jlc3BvbnNlQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl0scj10aGlzO2lmKGUpe3ZhciBvPXQuZnJvbSt0LmlkO3IuX3Jlc3BvbnNlQ2FsbGJhY2tzW29dPWUsbiYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPXIuX3Jlc3BvbnNlQ2FsbGJhY2tzW29dO2lmKGRlbGV0ZSByLl9yZXNwb25zZUNhbGxiYWNrc1tvXSxlKXtlKHtpZDp0LmlkLHR5cGU6XCJyZXNwb25zZVwiLGJvZHk6e2NvZGU6NDA4LGRlc2M6XCJSZXNwb25zZSB0aW1lb3V0IVwiLHZhbHVlOnR9fSl9fSxyLl9yZXNwb25zZVRpbWVPdXQpfX19LHtrZXk6XCJfb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoXCJyZXNwb25zZVwiPT09dC50eXBlKXt2YXIgbj10LnRvK3QuaWQscj1lLl9yZXNwb25zZUNhbGxiYWNrc1tuXTtpZih0LmJvZHkuY29kZT49MjAwJiZkZWxldGUgZS5fcmVzcG9uc2VDYWxsYmFja3Nbbl0scilyZXR1cm4gcih0KSwhMH1yZXR1cm4hMX19LHtrZXk6XCJfb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighZS5fb25SZXNwb25zZSh0KSl7dmFyIG49ZS5fc3Vic2NyaXB0aW9uc1t0LnRvXTtuP2UuX3B1Ymxpc2hPbihuLHQpOmUuX3B1Ymxpc2hPbkRlZmF1bHQodCl9fX0se2tleTpcIl9nZW5JZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuaWQmJjAhPT10LmlkfHwodGhpcy5fbXNnSWQrKyx0LmlkPXRoaXMuX21zZ0lkKX19LHtrZXk6XCJwb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7fX0se2tleTpcInBvc3RNZXNzYWdlV2l0aFJldHJpZXNcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcyxpPTAsdT1mdW5jdGlvbigpe3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsbyl7ci5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHIpezQwOD09PXIuYm9keS5jb2RlfHw1MDA9PT1yLmJvZHkuY29kZT9vKCk6KGwuaW5mbyhcIltCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllc10gbXNnIGRlbGl2ZXJlZDogXCIsdCksbihyKSxlKCkpfSl9KX07IWZ1bmN0aW9uIHRyeUFnYWluKCl7dSgpLnRoZW4oZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7aWYobC53YXJuKFwiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBNZXNzYWdlIEJvdW5jZWQgKHJldHJ5IFwiK2krXCIpOiAnXCIsdCksIShpKys8ZSkpe3ZhciBuPVwiW0Vycm9yXSBNZXNzYWdlIEJvdW5jZWQgKGRlbGl2ZXJ5IGF0dGVtcHRzIFwiK2UrXCIpOiAnXCI7dGhyb3cgbmV3IEVycm9yKG4rdCl9dHJ5QWdhaW4oKX0pfSgpfX0se2tleTpcIl9vblBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7fX0se2tleTpcIl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbigpe319XSksQnVzfSgpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBNc2dMaXN0ZW5lcih0LGUsbil7KDAsdS5kZWZhdWx0KSh0aGlzLE1zZ0xpc3RlbmVyKTt2YXIgcj10aGlzO3IuX3N1YnNjcmlwdGlvbnM9dCxyLl91cmw9ZSxyLl9jYWxsYmFjaz1ufXJldHVybigwLGMuZGVmYXVsdCkoTXNnTGlzdGVuZXIsW3trZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10Ll9zdWJzY3JpcHRpb25zW3QuX3VybF07aWYoZSl7dmFyIG49ZS5pbmRleE9mKHQpO2Uuc3BsaWNlKG4sMSksMD09PWUubGVuZ3RoJiZkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1t0Ll91cmxdfX19LHtrZXk6XCJ1cmxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxNc2dMaXN0ZW5lcn0oKTtlLmRlZmF1bHQ9cCx0LmV4cG9ydHM9ZS5kZWZhdWx0fSwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMTI2KSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocik7ZS5kZWZhdWx0PW8uZGVmYXVsdCx0LmV4cG9ydHM9ZS5kZWZhdWx0fV0pfSk7IiwiLy8gdmVyc2lvbjogMC4xMy4wXG4vLyBkYXRlOiBGcmkgQXVnIDMxIDIwMTggMDk6MjQ6NTMgR01UKzAxMDAgKFdlc3Rlcm4gRXVyb3BlYW4gU3VtbWVyIFRpbWUpXG4vLyBsaWNlbmNlOiBcbi8qKlxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxuKlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKi9cblxuXG4vLyB2ZXJzaW9uOiAwLjEzLjBcbi8vIGRhdGU6IEZyaSBBdWcgMzEgMjAxOCAwOToyNDo1MyBHTVQrMDEwMCAoV2VzdGVybiBFdXJvcGVhbiBTdW1tZXIgVGltZSlcbi8vIGxpY2VuY2U6IFxuLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG5cbiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwic2FuZGJveFwiLFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuc2FuZGJveD10KCk6ZS5zYW5kYm94PXQoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18ocil7aWYodFtyXSlyZXR1cm4gdFtyXS5leHBvcnRzO3ZhciBuPXRbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3JdLmNhbGwobi5leHBvcnRzLG4sbi5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLG4ubD0hMCxuLmV4cG9ydHN9dmFyIHQ9e307cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT1lLF9fd2VicGFja19yZXF1aXJlX18uYz10LF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihlLHQscil7X193ZWJwYWNrX3JlcXVpcmVfXy5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpyfSl9LF9fd2VicGFja19yZXF1aXJlX18ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5kKHQsXCJhXCIsdCksdH0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9XCJcIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0xNTEpfShbZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmV4cG9ydHM9e3ZlcnNpb246XCIyLjUuN1wifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPXIpfSxmdW5jdGlvbihlLHQpe3ZhciByPWUuZXhwb3J0cz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcIm51bWJlclwiPT10eXBlb2YgX19nJiYoX19nPXIpfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigzMCkoXCJ3a3NcIiksbz1yKDIxKSxpPXIoMSkuU3ltYm9sLGE9XCJmdW5jdGlvblwiPT10eXBlb2YgaTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1hJiZpW2VdfHwoYT9pOm8pKFwiU3ltYm9sLlwiK2UpKX0pLnN0b3JlPW59LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0Ll9fZXNNb2R1bGU9ITAsdC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig2MCksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsby5kZWZhdWx0KShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0JiZkZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJmRlZmluZVByb3BlcnRpZXMoZSxyKSxlfX0oKX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSksbz1yKDApLGk9cigxOCksYT1yKDExKSxzPXIoMTApLHU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLGwsZCxmPWUmdS5GLHA9ZSZ1LkcseT1lJnUuUyx2PWUmdS5QLGg9ZSZ1LkIsXz1lJnUuVyxiPXA/bzpvW3RdfHwob1t0XT17fSksbT1iLnByb3RvdHlwZSxnPXA/bjp5P25bdF06KG5bdF18fHt9KS5wcm90b3R5cGU7cCYmKHI9dCk7Zm9yKGMgaW4gcikobD0hZiYmZyYmdm9pZCAwIT09Z1tjXSkmJnMoYixjKXx8KGQ9bD9nW2NdOnJbY10sYltjXT1wJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBnW2NdP3JbY106aCYmbD9pKGQsbik6XyYmZ1tjXT09ZD9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0LHIsbil7aWYodGhpcyBpbnN0YW5jZW9mIGUpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyBlO2Nhc2UgMTpyZXR1cm4gbmV3IGUodCk7Y2FzZSAyOnJldHVybiBuZXcgZSh0LHIpfXJldHVybiBuZXcgZSh0LHIsbil9cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gdC5wcm90b3R5cGU9ZS5wcm90b3R5cGUsdH0oZCk6diYmXCJmdW5jdGlvblwiPT10eXBlb2YgZD9pKEZ1bmN0aW9uLmNhbGwsZCk6ZCx2JiYoKGIudmlydHVhbHx8KGIudmlydHVhbD17fSkpW2NdPWQsZSZ1LlImJm0mJiFtW2NdJiZhKG0sYyxkKSkpfTt1LkY9MSx1Lkc9Mix1LlM9NCx1LlA9OCx1LkI9MTYsdS5XPTMyLHUuVT02NCx1LlI9MTI4LGUuZXhwb3J0cz11fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPSFyKDEzKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBhbiBvYmplY3QhXCIpO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNyksbz1yKDQxKSxpPXIoMjgpLGE9T2JqZWN0LmRlZmluZVByb3BlcnR5O3QuZj1yKDYpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7aWYobihlKSx0PWkodCwhMCksbihyKSxvKXRyeXtyZXR1cm4gYShlLHQscil9Y2F0Y2goZSl7fWlmKFwiZ2V0XCJpbiByfHxcInNldFwiaW4gcil0aHJvdyBUeXBlRXJyb3IoXCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCFcIik7cmV0dXJuXCJ2YWx1ZVwiaW4gciYmKGVbdF09ci52YWx1ZSksZX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlP251bGwhPT1lOlwiZnVuY3Rpb25cIj09dHlwZW9mIGV9fSxmdW5jdGlvbihlLHQpe3ZhciByPXt9Lmhhc093blByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiByLmNhbGwoZSx0KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDgpLG89cigyMCk7ZS5leHBvcnRzPXIoNik/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmYoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig1Niksbz1yKDI1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4obyhlKSl9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2goZSl7cmV0dXJuITB9fX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ITB9LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPXt9fSxmdW5jdGlvbihlLHQpe3ZhciByPXt9LnRvU3RyaW5nO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gci5jYWxsKGUpLnNsaWNlKDgsLTEpfX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDg4KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDIpLG89cigzMSk7ZS5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLG8pfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSxmdW5jdGlvbihlLHQpe3ZhciByPTAsbj1NYXRoLnJhbmRvbSgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm5cIlN5bWJvbChcIi5jb25jYXQodm9pZCAwPT09ZT9cIlwiOmUsXCIpX1wiLCgrK3IrbikudG9TdHJpbmcoMzYpKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOCkuZixvPXIoMTApLGk9cigyKShcInRvU3RyaW5nVGFnXCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIW8oZT1yP2U6ZS5wcm90b3R5cGUsaSkmJm4oZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0sZnVuY3Rpb24oZSx0KXt2YXIgcj1NYXRoLmNlaWwsbj1NYXRoLmZsb29yO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP246cikoZSl9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PWUpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK2UpO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDEwMiksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCl7dC5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighbihlKSlyZXR1cm4gZTt2YXIgcixvO2lmKHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKG89ci5jYWxsKGUpKSlyZXR1cm4gbztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihyPWUudmFsdWVPZikmJiFuKG89ci5jYWxsKGUpKSlyZXR1cm4gbztpZighdCYmXCJmdW5jdGlvblwiPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDMwKShcImtleXNcIiksbz1yKDIxKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPW8oZSkpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksbz1yKDEpLGk9b1tcIl9fY29yZS1qc19zaGFyZWRfX1wiXXx8KG9bXCJfX2NvcmUtanNfc2hhcmVkX19cIl09e30pOyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaVtlXXx8KGlbZV09dm9pZCAwIT09dD90Ont9KX0pKFwidmVyc2lvbnNcIixbXSkucHVzaCh7dmVyc2lvbjpuLnZlcnNpb24sbW9kZTpyKDE0KT9cInB1cmVcIjpcImdsb2JhbFwiLGNvcHlyaWdodDpcIsKpIDIwMTggRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSlcIn0pfSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1cImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZlwiLnNwbGl0KFwiLFwiKX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSksbz1yKDEpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyNSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoNTMpLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXR8fFwib2JqZWN0XCIhPT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOigwLG8uZGVmYXVsdCkodCkpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P2U6dH19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIG49cigxMDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTA4KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDUzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyk7dC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrKHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjooMCx1LmRlZmF1bHQpKHQpKSk7ZS5wcm90b3R5cGU9KDAsYS5kZWZhdWx0KSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKG8uZGVmYXVsdD8oMCxvLmRlZmF1bHQpKGUsdCk6ZS5fX3Byb3RvX189dCl9fSxmdW5jdGlvbihlLHQscil7dmFyIG4sbzshZnVuY3Rpb24oaSxhKXtcInVzZSBzdHJpY3RcIjtuPWEsdm9pZCAwIT09KG89XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uLmNhbGwodCxyLHQsZSk6bikmJihlLmV4cG9ydHM9byl9KDAsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiaW5kTWV0aG9kKGUsdCl7dmFyIHI9ZVt0XTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByLmJpbmQpcmV0dXJuIHIuYmluZChlKTt0cnl7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwocixlKX1jYXRjaCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KHIsW2UsYXJndW1lbnRzXSl9fX1mdW5jdGlvbiByZWFsTWV0aG9kKHIpe3JldHVyblwiZGVidWdcIj09PXImJihyPVwibG9nXCIpLHR5cGVvZiBjb25zb2xlIT09dCYmKHZvaWQgMCE9PWNvbnNvbGVbcl0/YmluZE1ldGhvZChjb25zb2xlLHIpOnZvaWQgMCE9PWNvbnNvbGUubG9nP2JpbmRNZXRob2QoY29uc29sZSxcImxvZ1wiKTplKX1mdW5jdGlvbiByZXBsYWNlTG9nZ2luZ01ldGhvZHModCxuKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTt0aGlzW2ldPW88dD9lOnRoaXMubWV0aG9kRmFjdG9yeShpLHQsbil9dGhpcy5sb2c9dGhpcy5kZWJ1Z31mdW5jdGlvbiBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzKGUscixuKXtyZXR1cm4gZnVuY3Rpb24oKXt0eXBlb2YgY29uc29sZSE9PXQmJihyZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh0aGlzLHIsbiksdGhpc1tlXS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeShlLHQscil7cmV0dXJuIHJlYWxNZXRob2QoZSl8fGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIExvZ2dlcihlLG4sbyl7ZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZShlKXt2YXIgbj0ocltlXXx8XCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtpZih0eXBlb2Ygd2luZG93IT09dCl7dHJ5e3JldHVybiB2b2lkKHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc109bil9Y2F0Y2goZSl7fXRyeXt3aW5kb3cuZG9jdW1lbnQuY29va2llPWVuY29kZVVSSUNvbXBvbmVudChzKStcIj1cIituK1wiO1wifWNhdGNoKGUpe319fWZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCl7dmFyIGU7aWYodHlwZW9mIHdpbmRvdyE9PXQpe3RyeXtlPXdpbmRvdy5sb2NhbFN0b3JhZ2Vbc119Y2F0Y2goZSl7fWlmKHR5cGVvZiBlPT09dCl0cnl7dmFyIHI9d2luZG93LmRvY3VtZW50LmNvb2tpZSxuPXIuaW5kZXhPZihlbmNvZGVVUklDb21wb25lbnQocykrXCI9XCIpOy0xIT09biYmKGU9L14oW147XSspLy5leGVjKHIuc2xpY2UobikpWzFdKX1jYXRjaChlKXt9cmV0dXJuIHZvaWQgMD09PWEubGV2ZWxzW2VdJiYoZT12b2lkIDApLGV9fXZhciBpLGE9dGhpcyxzPVwibG9nbGV2ZWxcIjtlJiYocys9XCI6XCIrZSksYS5uYW1lPWUsYS5sZXZlbHM9e1RSQUNFOjAsREVCVUc6MSxJTkZPOjIsV0FSTjozLEVSUk9SOjQsU0lMRU5UOjV9LGEubWV0aG9kRmFjdG9yeT1vfHxkZWZhdWx0TWV0aG9kRmFjdG9yeSxhLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGl9LGEuc2V0TGV2ZWw9ZnVuY3Rpb24ocixuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgciYmdm9pZCAwIT09YS5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSYmKHI9YS5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSksIShcIm51bWJlclwiPT10eXBlb2YgciYmcj49MCYmcjw9YS5sZXZlbHMuU0lMRU5UKSl0aHJvd1wibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIrcjtpZihpPXIsITEhPT1uJiZwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKHIpLHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKGEscixlKSx0eXBlb2YgY29uc29sZT09PXQmJnI8YS5sZXZlbHMuU0lMRU5UKXJldHVyblwiTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmdcIn0sYS5zZXREZWZhdWx0TGV2ZWw9ZnVuY3Rpb24oZSl7Z2V0UGVyc2lzdGVkTGV2ZWwoKXx8YS5zZXRMZXZlbChlLCExKX0sYS5lbmFibGVBbGw9ZnVuY3Rpb24oZSl7YS5zZXRMZXZlbChhLmxldmVscy5UUkFDRSxlKX0sYS5kaXNhYmxlQWxsPWZ1bmN0aW9uKGUpe2Euc2V0TGV2ZWwoYS5sZXZlbHMuU0lMRU5ULGUpfTt2YXIgdT1nZXRQZXJzaXN0ZWRMZXZlbCgpO251bGw9PXUmJih1PW51bGw9PW4/XCJXQVJOXCI6biksYS5zZXRMZXZlbCh1LCExKX12YXIgZT1mdW5jdGlvbigpe30sdD1cInVuZGVmaW5lZFwiLHI9W1widHJhY2VcIixcImRlYnVnXCIsXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiXSxuPW5ldyBMb2dnZXIsbz17fTtuLmdldExvZ2dlcj1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8XCJcIj09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci5cIik7dmFyIHQ9b1tlXTtyZXR1cm4gdHx8KHQ9b1tlXT1uZXcgTG9nZ2VyKGUsbi5nZXRMZXZlbCgpLG4ubWV0aG9kRmFjdG9yeSkpLHR9O3ZhciBpPXR5cGVvZiB3aW5kb3chPT10P3dpbmRvdy5sb2c6dm9pZCAwO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdyE9PXQmJndpbmRvdy5sb2c9PT1uJiYod2luZG93LmxvZz1pKSxufSxuLmdldExvZ2dlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gb30sbn0pfSxmdW5jdGlvbihlLHQscil7dC5mPXIoMil9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEpLG89cigwKSxpPXIoMTQpLGE9cigzNykscz1yKDgpLmY7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW8uU3ltYm9sfHwoby5TeW1ib2w9aT97fTpuLlN5bWJvbHx8e30pO1wiX1wiPT1lLmNoYXJBdCgwKXx8ZSBpbiB0fHxzKHQsZSx7dmFsdWU6YS5mKGUpfSl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gZGl2aWRlVVJMKGUpe2Z1bmN0aW9uIHJlY3Vyc2UoZSl7dmFyIHQ9LyhbYS16QS1aLV0qKSg6XFwvXFwvKD86XFwuKT98OikoWy1hLXpBLVowLTlAOiUuXyt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuXyt+Iz1cXC9dKikvZ2k7cmV0dXJuIGUucmVwbGFjZSh0LFwiJDEsJDMsJDRcIikuc3BsaXQoXCIsXCIpfXZhciB0PXJlY3Vyc2UoZSk7aWYodFswXT09PWUmJiF0WzBdLmluY2x1ZGVzKFwiQFwiKSl7cmV0dXJue3R5cGU6XCJcIixkb21haW46ZSxpZGVudGl0eTpcIlwifX1pZih0WzBdPT09ZSYmdFswXS5pbmNsdWRlcyhcIkBcIikpe3Q9cmVjdXJzZSgodFswXT09PWU/XCJzbXRwXCI6dFswXSkrXCI6Ly9cIit0WzBdKX1yZXR1cm4gdFsxXS5pbmNsdWRlcyhcIkBcIikmJih0WzJdPXRbMF0rXCI6Ly9cIit0WzFdLHRbMV09dFsxXS5zdWJzdHIodFsxXS5pbmRleE9mKFwiQFwiKSsxKSkse3R5cGU6dFswXSxkb21haW46dFsxXSxpZGVudGl0eTp0WzJdfX1mdW5jdGlvbiBlbXB0eU9iamVjdChlKXtyZXR1cm4hKCgwLGEuZGVmYXVsdCkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIHNlY29uZHNTaW5jZUVwb2NoKCl7cmV0dXJuIE1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpfWZ1bmN0aW9uIGRlZXBDbG9uZShlKXtpZihlKXJldHVybiBKU09OLnBhcnNlKCgwLG8uZGVmYXVsdCkoZSkpfWZ1bmN0aW9uIHJlbW92ZVBhdGhGcm9tVVJMKGUpe3ZhciB0PWUuc3BsaXQoXCIvXCIpO3JldHVybiB0WzBdK1wiLy9cIit0WzJdK1wiL1wiK3RbM119ZnVuY3Rpb24gZ2V0VXNlclVSTEZyb21FbWFpbChlKXt2YXIgdD1lLmluZGV4T2YoXCJAXCIpO3JldHVyblwidXNlcjovL1wiK2Uuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCkrXCIvXCIrZS5zdWJzdHJpbmcoMCx0KX1mdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKGUpe3ZhciB0PWRpdmlkZVVSTChlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKFwiL1wiLFwiXCIpK1wiQFwiK3QuZG9tYWlufWZ1bmN0aW9uIGNvbnZlcnRUb1VzZXJVUkwoZSl7aWYoXCJ1c2VyOi8vXCI9PT1lLnN1YnN0cmluZygwLDcpKXt2YXIgdD1kaXZpZGVVUkwoZSk7aWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3dcInVzZXJVUkwgd2l0aCB3cm9uZyBmb3JtYXRcIn1yZXR1cm4gZ2V0VXNlclVSTEZyb21FbWFpbChlKX1mdW5jdGlvbiBpc0RhdGFPYmplY3RVUkwoZSl7dmFyIHQ9W1wiZG9tYWluLWlkcFwiLFwicnVudGltZVwiLFwiZG9tYWluXCIsXCJoeXBlcnR5XCJdLHI9ZS5zcGxpdChcIjovL1wiKSxuPXJbMF07cmV0dXJuLTE9PT10LmluZGV4T2Yobil9ZnVuY3Rpb24gaXNMZWdhY3koZSl7cmV0dXJuIGUuc3BsaXQoXCJAXCIpLmxlbmd0aD4xfWZ1bmN0aW9uIGlzVVJMKGUpe3JldHVybiBlLnNwbGl0KFwiL1wiKS5sZW5ndGg+PTN9ZnVuY3Rpb24gaXNVc2VyVVJMKGUpe3JldHVyblwidXNlclwiPT09ZGl2aWRlVVJMKGUpLnR5cGV9ZnVuY3Rpb24gaXNIeXBlcnR5VVJMKGUpe3JldHVyblwiaHlwZXJ0eVwiPT09ZGl2aWRlVVJMKGUpLnR5cGV9ZnVuY3Rpb24gZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcyhlLHQscil7cmV0dXJuIGVbdF1bcl19ZnVuY3Rpb24gYnVpbGRVUkwoZSx0LHIsbil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0mJmFyZ3VtZW50c1s0XSxhPWVbdF0scz12b2lkIDA7aWYoIWEuaGFzT3duUHJvcGVydHkocikpdGhyb3cgRXJyb3IoXCJUaGUgY29uZmlndXJhdGlvbiBcIisoMCxvLmRlZmF1bHQpKGEsXCJcIiwyKStcIiBkb24ndCBoYXZlIHRoZSBcIityK1wiIHJlc291cmNlIHlvdSBhcmUgbG9va2luZyBmb3JcIik7dmFyIHU9YVtyXTtyZXR1cm4gbj8ocz11LnByZWZpeCtlLmRvbWFpbit1LnN1ZmZpeCtuLHUuaGFzT3duUHJvcGVydHkoXCJmYWxsYmFja1wiKSYmaSYmKHM9dS5mYWxsYmFjay5pbmRleE9mKFwiJWRvbWFpbiVcIik/dS5mYWxsYmFjay5yZXBsYWNlKC8oJWRvbWFpbiUpL2csZS5kb21haW4pK246dS5mYWxsYmFjaytuKSk6cz11LnByZWZpeCtlLmRvbWFpbit1LnN1ZmZpeCxzfWZ1bmN0aW9uIGdlbmVyYXRlR1VJRCgpe2Z1bmN0aW9uIHM0KCl7cmV0dXJuIE1hdGguZmxvb3IoNjU1MzYqKDErTWF0aC5yYW5kb20oKSkpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9cmV0dXJuIHM0KCkrczQoKStcIi1cIitzNCgpK1wiLVwiK3M0KCkrXCItXCIrczQoKStcIi1cIitzNCgpK3M0KCkrczQoKX1mdW5jdGlvbiBnZXRVc2VySWRlbnRpdHlEb21haW4oZSl7dmFyIHQ9ZGl2aWRlVVJMKGUpLHI9dC5kb21haW4uc3BsaXQoXCIuXCIpLG49ci5sZW5ndGg7cmV0dXJuIDE9PW4/cltuLTFdOnJbbi0yXStcIi5cIityW24tMV19ZnVuY3Rpb24gaXNCYWNrZW5kU2VydmljZVVSTChlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdChcIi5cIiksbj1bXCJkb21haW5cIixcImdsb2JhbFwiLFwiZG9tYWluLWlkcFwiXSxvPVtcInJlZ2lzdHJ5XCIsXCJtc2ctbm9kZVwiXSxpPXZvaWQgMDtyZXR1cm4gci5sZW5ndGg+MSYmKGk9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1vLmluZGV4T2YoZSl9KVswXSksISghaXx8LTE9PT1vLmluZGV4T2YoaSkpfHwhIXQudHlwZSYmLTEhPT1uLmluZGV4T2YodC50eXBlKX1mdW5jdGlvbiBkaXZpZGVFbWFpbChlKXt2YXIgdD1lLmluZGV4T2YoXCJAXCIpO3JldHVybnt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfX1mdW5jdGlvbiBhc3NpZ24oZSx0LHIpe2V8fChlPXt9KSxcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9cGFyc2VBdHRyaWJ1dGVzKHQpKTtmb3IodmFyIG49dC5sZW5ndGgtMSxvPTA7bzxuOysrbyl7dmFyIGk9dFtvXTtpIGluIGV8fChlW2ldPXt9KSxlPWVbaV19ZVt0W25dXT1yfWZ1bmN0aW9uIHNwbGl0T2JqZWN0VVJMKGUpe3ZhciB0PWUuc3BsaXQoXCIvXCIpLHI9dFswXStcIi8vXCIrdFsyXStcIi9cIit0WzNdLG49dFs1XSxvPXt1cmw6cixyZXNvdXJjZTpufTtyZXR1cm4gb31mdW5jdGlvbiBjaGVja0F0dHJpYnV0ZShlKXt2YXIgdD0vKCgoW2EtekEtWl0rKTpcXC9cXC8oWzAtOWEtekEtWl1bLVxcd10qWzAtOWEtekEtWl1cXC4pK1thLXpBLVpdezIsOX0pXFwvW2EtekEtWjAtOS5dK0BbYS16QS1aMC05XSsoLSk/W2EtekEtWjAtOV0rKFxcLik/W2EtekEtWjAtOV17MiwxMH0/XFwuW2EtekEtWl17MiwxMH0pKC4rKD89LmlkZW50aXR5KSk/L2dtLHI9W10sbj1bXTtpZihudWxsPT1lLm1hdGNoKHQpKW49ZS5zcGxpdChcIi5cIik7ZWxzZXtmb3IodmFyIG89dm9pZCAwO251bGwhPT0obz10LmV4ZWMoZSkpOylvLmluZGV4PT09dC5sYXN0SW5kZXgmJnQubGFzdEluZGV4Kyssby5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7MD09PXQmJnIucHVzaChlKX0pO3ZhciBpPXZvaWQgMDtyLmZvckVhY2goZnVuY3Rpb24odCl7aT1lLnJlcGxhY2UodCxcIiotKlwiKSxuPWkuc3BsaXQoXCIuXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm5cIiotKlwiPT09ZT90OmV9KX0pfXJldHVybiBufWZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlcyhlKXt2YXIgdD0vKFswLTlhLXpBLVpdWy1cXHddKik6XFwvXFwvL2c7aWYoZS5pbmNsdWRlcyhcIjovL1wiKSl7dmFyIHI9ZS5zcGxpdCh0KVswXSxuPXIuc3BsaXQoXCIuXCIpLG89ZS5yZXBsYWNlKHIsXCJcIik7aWYoZS5pbmNsdWRlcyhcImlkZW50aXR5XCIpKXt2YXIgaT1vLnNwbGl0KFwiaWRlbnRpdHkuXCIpO289aVswXS5zbGljZShcIi5cIiwtMSksaT1pWzFdLnNwbGl0KFwiLlwiKSxuLnB1c2gobyxcImlkZW50aXR5XCIpLG49bi5jb25jYXQoaSl9ZWxzZSBuLnB1c2gobyk7cmV0dXJuIG4uZmlsdGVyKEJvb2xlYW4pfXJldHVybiBlLnNwbGl0KFwiLlwiKX1mdW5jdGlvbiBpc0VtcHR5KGUpe2Zvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuITE7cmV0dXJuKDAsby5kZWZhdWx0KShlKT09PSgwLG8uZGVmYXVsdCkoe30pfWZ1bmN0aW9uIGNoYXRrZXlzVG9TdHJpbmdDbG9uZXIoZSl7dmFyIHQ9e30scj0oMCxhLmRlZmF1bHQpKGUpO2lmKHIpdHJ5e2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bisrKXt2YXIgbz1yW25dO3Rbb109e30sdFtvXS5zZXNzaW9uS2V5PWVbb10uc2Vzc2lvbktleS50b1N0cmluZygpLHRbb10uaXNUb0VuY3J5cHQ9ZVtvXS5pc1RvRW5jcnlwdH19Y2F0Y2goZSl7fXJldHVybiB0fWZ1bmN0aW9uIGNoYXRrZXlzVG9BcnJheUNsb25lcihlKXt2YXIgdD17fSxyPSgwLGEuZGVmYXVsdCkoZSk7aWYocil0cnl7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDtuKyspe3ZhciBvPXJbbl07dFtvXT17fTt2YXIgaT1KU09OLnBhcnNlKFwiW1wiK2Vbb10uc2Vzc2lvbktleStcIl1cIik7dFtvXS5zZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KGkpLHRbb10uaXNUb0VuY3J5cHQ9ZVtvXS5pc1RvRW5jcnlwdH19Y2F0Y2goZSl7fXJldHVybiB0fWZ1bmN0aW9uIHBhcnNlTWVzc2FnZVVSTChlKXt2YXIgdD1lLnNwbGl0KFwiL1wiKTtyZXR1cm4gdC5sZW5ndGg8PTY/dFswXStcIi8vXCIrdFsyXStcIi9cIit0WzNdOnRbMF0rXCIvL1wiK3RbMl0rXCIvXCIrdFszXStcIi9cIit0WzRdfWZ1bmN0aW9uIGF2YWlsYWJsZVNwYWNlKGUsdCl7dmFyIHI9KGUvdCkudG9GaXhlZCgyKTtyZXR1cm57cXVvdGE6dCx1c2FnZTplLHBlcmNlbnQ6TnVtYmVyKHIpfX1mdW5jdGlvbiBlbmNvZGUoZSl7dHJ5e3ZhciB0PXN0cmluZ2lmeShlKTtyZXR1cm4gYnRvYSh0KX1jYXRjaChlKXt0aHJvdyBlfX1mdW5jdGlvbiBkZWNvZGUoZSl7dHJ5e3JldHVybiBKU09OLnBhcnNlKGF0b2IoZSkpfWNhdGNoKGUpe3Rocm93IGV9fWZ1bmN0aW9uIGRlY29kZVRvVWludDhBcnJheShlKXt0cnl7cmV0dXJuIG5ldyBVaW50OEFycmF5KGRlY29kZShlKSl9Y2F0Y2goZSl7dGhyb3cgZX19ZnVuY3Rpb24gc3RyaW5naWZ5KGUpe3RyeXtyZXR1cm4gZS5jb25zdHJ1Y3Rvcj09PVVpbnQ4QXJyYXk/XCJbXCIrZS50b1N0cmluZygpK1wiXVwiOigwLG8uZGVmYXVsdCkoZSl9Y2F0Y2goZSl7dGhyb3cgZX19ZnVuY3Rpb24gcGFyc2UoZSl7dHJ5e3JldHVybiBKU09OLnBhcnNlKGUpfWNhdGNoKGUpe3Rocm93IGV9fWZ1bmN0aW9uIHBhcnNlVG9VaW50OEFycmF5KGUpe3RyeXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkocGFyc2UoZSkpfWNhdGNoKGUpe3Rocm93IGV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNjkpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNDQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKTt0LmRpdmlkZVVSTD1kaXZpZGVVUkwsdC5lbXB0eU9iamVjdD1lbXB0eU9iamVjdCx0LnNlY29uZHNTaW5jZUVwb2NoPXNlY29uZHNTaW5jZUVwb2NoLHQuZGVlcENsb25lPWRlZXBDbG9uZSx0LnJlbW92ZVBhdGhGcm9tVVJMPXJlbW92ZVBhdGhGcm9tVVJMLHQuZ2V0VXNlclVSTEZyb21FbWFpbD1nZXRVc2VyVVJMRnJvbUVtYWlsLHQuZ2V0VXNlckVtYWlsRnJvbVVSTD1nZXRVc2VyRW1haWxGcm9tVVJMLHQuY29udmVydFRvVXNlclVSTD1jb252ZXJ0VG9Vc2VyVVJMLHQuaXNEYXRhT2JqZWN0VVJMPWlzRGF0YU9iamVjdFVSTCx0LmlzTGVnYWN5PWlzTGVnYWN5LHQuaXNVUkw9aXNVUkwsdC5pc1VzZXJVUkw9aXNVc2VyVVJMLHQuaXNIeXBlcnR5VVJMPWlzSHlwZXJ0eVVSTCx0LmdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXM9Z2V0Q29uZmlndXJhdGlvblJlc291cmNlcyx0LmJ1aWxkVVJMPWJ1aWxkVVJMLHQuZ2VuZXJhdGVHVUlEPWdlbmVyYXRlR1VJRCx0LmdldFVzZXJJZGVudGl0eURvbWFpbj1nZXRVc2VySWRlbnRpdHlEb21haW4sdC5pc0JhY2tlbmRTZXJ2aWNlVVJMPWlzQmFja2VuZFNlcnZpY2VVUkwsdC5kaXZpZGVFbWFpbD1kaXZpZGVFbWFpbCx0LmFzc2lnbj1hc3NpZ24sdC5zcGxpdE9iamVjdFVSTD1zcGxpdE9iamVjdFVSTCx0LmNoZWNrQXR0cmlidXRlPWNoZWNrQXR0cmlidXRlLHQucGFyc2VBdHRyaWJ1dGVzPXBhcnNlQXR0cmlidXRlcyx0LmlzRW1wdHk9aXNFbXB0eSx0LmNoYXRrZXlzVG9TdHJpbmdDbG9uZXI9Y2hhdGtleXNUb1N0cmluZ0Nsb25lcix0LmNoYXRrZXlzVG9BcnJheUNsb25lcj1jaGF0a2V5c1RvQXJyYXlDbG9uZXIsdC5wYXJzZU1lc3NhZ2VVUkw9cGFyc2VNZXNzYWdlVVJMLHQuYXZhaWxhYmxlU3BhY2U9YXZhaWxhYmxlU3BhY2UsdC5lbmNvZGU9ZW5jb2RlLHQuZGVjb2RlPWRlY29kZSx0LmRlY29kZVRvVWludDhBcnJheT1kZWNvZGVUb1VpbnQ4QXJyYXksdC5zdHJpbmdpZnk9c3RyaW5naWZ5LHQucGFyc2U9cGFyc2UsdC5wYXJzZVRvVWludDhBcnJheT1wYXJzZVRvVWludDhBcnJheX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNyksbz1yKDcyKSxpPXIoMzEpLGE9cigyOSkoXCJJRV9QUk9UT1wiKSxzPWZ1bmN0aW9uKCl7fSx1PWZ1bmN0aW9uKCl7dmFyIGUsdD1yKDMyKShcImlmcmFtZVwiKSxuPWkubGVuZ3RoO2Zvcih0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIscig1NykuYXBwZW5kQ2hpbGQodCksdC5zcmM9XCJqYXZhc2NyaXB0OlwiLGU9dC5jb250ZW50V2luZG93LmRvY3VtZW50LGUub3BlbigpLGUud3JpdGUoXCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFxcL3NjcmlwdD5cIiksZS5jbG9zZSgpLHU9ZS5GO24tLTspZGVsZXRlIHUucHJvdG90eXBlW2lbbl1dO3JldHVybiB1KCl9O2UuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiBudWxsIT09ZT8ocy5wcm90b3R5cGU9bihlKSxyPW5ldyBzLHMucHJvdG90eXBlPW51bGwsclthXT1lKTpyPXUoKSx2b2lkIDA9PT10P3I6byhyLHQpfX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz0hcig2KSYmIXIoMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyKDMyKShcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxMCksbz1yKDEyKSxpPXIoNjEpKCExKSxhPXIoMjkpKFwiSUVfUFJPVE9cIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1vKGUpLHU9MCxjPVtdO2ZvcihyIGluIHMpciE9YSYmbihzLHIpJiZjLnB1c2gocik7Zm9yKDt0Lmxlbmd0aD51OyluKHMscj10W3UrK10pJiYofmkoYyxyKXx8Yy5wdXNoKHIpKTtyZXR1cm4gY319LGZ1bmN0aW9uKGUsdCl7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cigxMTIpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig3MCkoITApO3IoNTEpKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjQpLG89TWF0aC5taW47ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSxmdW5jdGlvbihlLHQscil7cig3Myk7Zm9yKHZhciBuPXIoMSksbz1yKDExKSxpPXIoMTUpLGE9cigyKShcInRvU3RyaW5nVGFnXCIpLHM9XCJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdFwiLnNwbGl0KFwiLFwiKSx1PTA7dTxzLmxlbmd0aDt1Kyspe3ZhciBjPXNbdV0sbD1uW2NdLGQ9bCYmbC5wcm90b3R5cGU7ZCYmIWRbYV0mJm8oZCxhLGMpLGlbY109aS5BcnJheX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBQcm9taXNlQ2FwYWJpbGl0eShlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKFwiQmFkIFByb21pc2UgY29uc3RydWN0b3JcIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1uKHQpLHRoaXMucmVqZWN0PW4ocil9dmFyIG49cigyMik7ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlQ2FwYWJpbGl0eShlKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDUpLG89cigwKSxpPXIoMTMpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShvLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0sYT17fTthW2VdPXQociksbihuLlMrbi5GKmkoZnVuY3Rpb24oKXtyKDEpfSksXCJPYmplY3RcIixhKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI3KSxvPXIoMjApLGk9cigxMiksYT1yKDI4KSxzPXIoMTApLHU9cig0MSksYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3QuZj1yKDYpP2M6ZnVuY3Rpb24oZSx0KXtpZihlPWkoZSksdD1hKHQsITApLHUpdHJ5e3JldHVybiBjKGUsdCl9Y2F0Y2goZSl7fWlmKHMoZSx0KSlyZXR1cm4gbyghbi5mLmNhbGwoZSx0KSxlW3RdKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDE0KSxvPXIoNSksaT1yKDUyKSxhPXIoMTEpLHM9cigxNSksdT1yKDcxKSxjPXIoMjMpLGw9cig1OCksZD1yKDIpKFwiaXRlcmF0b3JcIiksZj0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLHA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLHksdixoLF8pe3Uocix0LHkpO3ZhciBiLG0sZyxSPWZ1bmN0aW9uKGUpe2lmKCFmJiZlIGluIGopcmV0dXJuIGpbZV07c3dpdGNoKGUpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxPPXQrXCIgSXRlcmF0b3JcIixEPVwidmFsdWVzXCI9PXYsdz0hMSxqPWUucHJvdG90eXBlLEw9altkXXx8altcIkBAaXRlcmF0b3JcIl18fHYmJmpbdl0saz1MfHxSKHYpLFU9dj9EP1IoXCJlbnRyaWVzXCIpOms6dm9pZCAwLE09XCJBcnJheVwiPT10P2ouZW50cmllc3x8TDpMO2lmKE0mJihnPWwoTS5jYWxsKG5ldyBlKSkpIT09T2JqZWN0LnByb3RvdHlwZSYmZy5uZXh0JiYoYyhnLE8sITApLG58fFwiZnVuY3Rpb25cIj09dHlwZW9mIGdbZF18fGEoZyxkLHApKSxEJiZMJiZcInZhbHVlc1wiIT09TC5uYW1lJiYodz0hMCxrPWZ1bmN0aW9uKCl7cmV0dXJuIEwuY2FsbCh0aGlzKX0pLG4mJiFffHwhZiYmIXcmJmpbZF18fGEoaixkLGspLHNbdF09ayxzW09dPXAsdilpZihiPXt2YWx1ZXM6RD9rOlIoXCJ2YWx1ZXNcIiksa2V5czpoP2s6UihcImtleXNcIiksZW50cmllczpVfSxfKWZvcihtIGluIGIpbSBpbiBqfHxpKGosbSxiW21dKTtlbHNlIG8oby5QK28uRiooZnx8dyksdCxiKTtyZXR1cm4gYn19LGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9cigxMSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig3Niksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig3OCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9XCJmdW5jdGlvblwiPT10eXBlb2YgYS5kZWZhdWx0JiZcInN5bWJvbFwiPT10eXBlb2Ygby5kZWZhdWx0P2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZGVmYXVsdCYmZS5jb25zdHJ1Y3Rvcj09PWEuZGVmYXVsdCYmZSE9PWEuZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX07dC5kZWZhdWx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZGVmYXVsdCYmXCJzeW1ib2xcIj09PXMoby5kZWZhdWx0KT9mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOnMoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT1hLmRlZmF1bHQmJmUhPT1hLmRlZmF1bHQucHJvdG90eXBlP1wic3ltYm9sXCI6dm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOnMoZSl9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig0Miksbz1yKDMxKS5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKTt0LmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsbyl9fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTYpO2UuZXhwb3J0cz1PYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm5cIlN0cmluZ1wiPT1uKGUpP2Uuc3BsaXQoXCJcIik6T2JqZWN0KGUpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSkuZG9jdW1lbnQ7ZS5leHBvcnRzPW4mJm4uZG9jdW1lbnRFbGVtZW50fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxMCksbz1yKDMzKSxpPXIoMjkpKFwiSUVfUFJPVE9cIiksYT1PYmplY3QucHJvdG90eXBlO2UuZXhwb3J0cz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUpe3JldHVybiBlPW8oZSksbihlLGkpP2VbaV06XCJmdW5jdGlvblwiPT10eXBlb2YgZS5jb25zdHJ1Y3RvciYmZSBpbnN0YW5jZW9mIGUuY29uc3RydWN0b3I/ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6ZSBpbnN0YW5jZW9mIE9iamVjdD9hOm51bGx9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxNiksbz1yKDIpKFwidG9TdHJpbmdUYWdcIiksaT1cIkFyZ3VtZW50c1wiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksYT1mdW5jdGlvbihlLHQpe3RyeXtyZXR1cm4gZVt0XX1jYXRjaChlKXt9fTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lP1wiVW5kZWZpbmVkXCI6bnVsbD09PWU/XCJOdWxsXCI6XCJzdHJpbmdcIj09dHlwZW9mKHI9YSh0PU9iamVjdChlKSxvKSk/cjppP24odCk6XCJPYmplY3RcIj09KHM9bih0KSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY2FsbGVlP1wiQXJndW1lbnRzXCI6c319LGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig2NyksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEyKSxvPXIoNDYpLGk9cig2Mik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsYSl7dmFyIHMsdT1uKHQpLGM9byh1Lmxlbmd0aCksbD1pKGEsYyk7aWYoZSYmciE9cil7Zm9yKDtjPmw7KWlmKChzPXVbbCsrXSkhPXMpcmV0dXJuITB9ZWxzZSBmb3IoO2M+bDtsKyspaWYoKGV8fGwgaW4gdSkmJnVbbF09PT1yKXJldHVybiBlfHxsfHwwO3JldHVybiFlJiYtMX19fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyNCksbz1NYXRoLm1heCxpPU1hdGgubWluO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBlPW4oZSksZTwwP28oZSt0LDApOmkoZSx0KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpLG89cigyMiksaT1yKDIpKFwic3BlY2llc1wiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixhPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PWF8fHZvaWQgMD09KHI9bihhKVtpXSk/dDpvKHIpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxhPXIoMTgpLHM9cig5NCksdT1yKDU3KSxjPXIoMzIpLGw9cigxKSxkPWwucHJvY2VzcyxmPWwuc2V0SW1tZWRpYXRlLHA9bC5jbGVhckltbWVkaWF0ZSx5PWwuTWVzc2FnZUNoYW5uZWwsdj1sLkRpc3BhdGNoLGg9MCxfPXt9LGI9ZnVuY3Rpb24oKXt2YXIgZT0rdGhpcztpZihfLmhhc093blByb3BlcnR5KGUpKXt2YXIgdD1fW2VdO2RlbGV0ZSBfW2VdLHQoKX19LG09ZnVuY3Rpb24oZSl7Yi5jYWxsKGUuZGF0YSl9O2YmJnB8fChmPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7YXJndW1lbnRzLmxlbmd0aD5yOyl0LnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBfWysraF09ZnVuY3Rpb24oKXtzKFwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpGdW5jdGlvbihlKSx0KX0sbihoKSxofSxwPWZ1bmN0aW9uKGUpe2RlbGV0ZSBfW2VdfSxcInByb2Nlc3NcIj09cigxNikoZCk/bj1mdW5jdGlvbihlKXtkLm5leHRUaWNrKGEoYixlLDEpKX06diYmdi5ub3c/bj1mdW5jdGlvbihlKXt2Lm5vdyhhKGIsZSwxKSl9Onk/KG89bmV3IHksaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPW0sbj1hKGkucG9zdE1lc3NhZ2UsaSwxKSk6bC5hZGRFdmVudExpc3RlbmVyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWwuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtsLnBvc3RNZXNzYWdlKGUrXCJcIixcIipcIil9LGwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixtLCExKSk6bj1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4gYyhcInNjcmlwdFwiKT9mdW5jdGlvbihlKXt1LmFwcGVuZENoaWxkKGMoXCJzY3JpcHRcIikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChhKGIsZSwxKSwwKX0pLGUuZXhwb3J0cz17c2V0OmYsY2xlYXI6cH19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm57ZTohMSx2OmUoKX19Y2F0Y2goZSl7cmV0dXJue2U6ITAsdjplfX19fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig3KSxvPXIoOSksaT1yKDQ4KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZihuKGUpLG8odCkmJnQuY29uc3RydWN0b3I9PT1lKXJldHVybiB0O3ZhciByPWkuZihlKTtyZXR1cm4oMCxyLnJlc29sdmUpKHQpLHIucHJvbWlzZX19LGZ1bmN0aW9uKGUsdCxyKXtyKDY4KTt2YXIgbj1yKDApLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDUpO24obi5TK24uRiohcig2KSxcIk9iamVjdFwiLHtkZWZpbmVQcm9wZXJ0eTpyKDgpLmZ9KX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDExMSksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI0KSxvPXIoMjUpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxhLHM9U3RyaW5nKG8odCkpLHU9bihyKSxjPXMubGVuZ3RoO3JldHVybiB1PDB8fHU+PWM/ZT9cIlwiOnZvaWQgMDooaT1zLmNoYXJDb2RlQXQodSksaTw1NTI5Nnx8aT41NjMxOXx8dSsxPT09Y3x8KGE9cy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxhPjU3MzQzP2U/cy5jaGFyQXQodSk6aTplP3Muc2xpY2UodSx1KzIpOmEtNTYzMjArKGktNTUyOTY8PDEwKSs2NTUzNil9fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNDApLG89cigyMCksaT1yKDIzKSxhPXt9O3IoMTEpKGEscigyKShcIml0ZXJhdG9yXCIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4oYSx7bmV4dDpvKDEscil9KSxpKGUsdCtcIiBJdGVyYXRvclwiKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDgpLG89cig3KSxpPXIoMTkpO2UuZXhwb3J0cz1yKDYpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUsdCl7byhlKTtmb3IodmFyIHIsYT1pKHQpLHM9YS5sZW5ndGgsdT0wO3M+dTspbi5mKGUscj1hW3UrK10sdFtyXSk7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig3NCksbz1yKDc1KSxpPXIoMTUpLGE9cigxMik7ZS5leHBvcnRzPXIoNTEpKEFycmF5LFwiQXJyYXlcIixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9YShlKSx0aGlzLl9pPTAsdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6XCJrZXlzXCI9PXQ/bygwLHIpOlwidmFsdWVzXCI9PXQ/bygwLGVbcl0pOm8oMCxbcixlW3JdXSl9LFwidmFsdWVzXCIpLGkuQXJndW1lbnRzPWkuQXJyYXksbihcImtleXNcIiksbihcInZhbHVlc1wiKSxuKFwiZW50cmllc1wiKX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig3NyksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCxyKXtyKDQ1KSxyKDQ3KSxlLmV4cG9ydHM9cigzNykuZihcIml0ZXJhdG9yXCIpfSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNzkpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbihlLHQscil7cig4MCkscig1NSkscig4NSkscig4NiksZS5leHBvcnRzPXIoMCkuU3ltYm9sfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigxKSxvPXIoMTApLGk9cig2KSxhPXIoNSkscz1yKDUyKSx1PXIoODEpLktFWSxjPXIoMTMpLGw9cigzMCksZD1yKDIzKSxmPXIoMjEpLHA9cigyKSx5PXIoMzcpLHY9cigzOCksaD1yKDgyKSxfPXIoODMpLGI9cig3KSxtPXIoOSksZz1yKDEyKSxSPXIoMjgpLE89cigyMCksRD1yKDQwKSx3PXIoODQpLGo9cig1MCksTD1yKDgpLGs9cigxOSksVT1qLmYsTT1MLmYseD13LmYsQz1uLlN5bWJvbCxQPW4uSlNPTixFPVAmJlAuc3RyaW5naWZ5LFM9cChcIl9oaWRkZW5cIikscT1wKFwidG9QcmltaXRpdmVcIiksST17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxUPWwoXCJzeW1ib2wtcmVnaXN0cnlcIiksSD1sKFwic3ltYm9sc1wiKSxBPWwoXCJvcC1zeW1ib2xzXCIpLE49T2JqZWN0LnByb3RvdHlwZSxGPVwiZnVuY3Rpb25cIj09dHlwZW9mIEMsQj1uLlFPYmplY3QsVj0hQnx8IUIucHJvdG90eXBlfHwhQi5wcm90b3R5cGUuZmluZENoaWxkLHo9aSYmYyhmdW5jdGlvbigpe3JldHVybiA3IT1EKE0oe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBNKHRoaXMsXCJhXCIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVUoTix0KTtuJiZkZWxldGUgTlt0XSxNKGUsdCxyKSxuJiZlIT09TiYmTShOLHQsbil9Ok0sRz1mdW5jdGlvbihlKXt2YXIgdD1IW2VdPUQoQy5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUsdH0sVz1GJiZcInN5bWJvbFwiPT10eXBlb2YgQy5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBDfSxKPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT09PU4mJkooQSx0LHIpLGIoZSksdD1SKHQsITApLGIociksbyhILHQpPyhyLmVudW1lcmFibGU/KG8oZSxTKSYmZVtTXVt0XSYmKGVbU11bdF09ITEpLHI9RChyLHtlbnVtZXJhYmxlOk8oMCwhMSl9KSk6KG8oZSxTKXx8TShlLFMsTygxLHt9KSksZVtTXVt0XT0hMCkseihlLHQscikpOk0oZSx0LHIpfSxZPWZ1bmN0aW9uKGUsdCl7YihlKTtmb3IodmFyIHIsbj1oKHQ9Zyh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylKKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LFo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9EKGUpOlkoRChlKSx0KX0sSz1mdW5jdGlvbihlKXt2YXIgdD1JLmNhbGwodGhpcyxlPVIoZSwhMCkpO3JldHVybiEodGhpcz09PU4mJm8oSCxlKSYmIW8oQSxlKSkmJighKHR8fCFvKHRoaXMsZSl8fCFvKEgsZSl8fG8odGhpcyxTKSYmdGhpc1tTXVtlXSl8fHQpfSxYPWZ1bmN0aW9uKGUsdCl7aWYoZT1nKGUpLHQ9Uih0LCEwKSxlIT09Tnx8IW8oSCx0KXx8byhBLHQpKXt2YXIgcj1VKGUsdCk7cmV0dXJuIXJ8fCFvKEgsdCl8fG8oZSxTKSYmZVtTXVt0XXx8KHIuZW51bWVyYWJsZT0hMCkscn19LCQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9eChnKGUpKSxuPVtdLGk9MDtyLmxlbmd0aD5pOylvKEgsdD1yW2krK10pfHx0PT1TfHx0PT11fHxuLnB1c2godCk7cmV0dXJuIG59LFE9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9ZT09PU4sbj14KHI/QTpnKGUpKSxpPVtdLGE9MDtuLmxlbmd0aD5hOykhbyhILHQ9blthKytdKXx8ciYmIW8oTix0KXx8aS5wdXNoKEhbdF0pO3JldHVybiBpfTtGfHwoQz1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBDKXRocm93IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciFcIik7dmFyIGU9Zihhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCksdD1mdW5jdGlvbihyKXt0aGlzPT09TiYmdC5jYWxsKEEsciksbyh0aGlzLFMpJiZvKHRoaXNbU10sZSkmJih0aGlzW1NdW2VdPSExKSx6KHRoaXMsZSxPKDEscikpfTtyZXR1cm4gaSYmViYmeihOLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6dH0pLEcoZSl9LHMoQy5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxqLmY9WCxMLmY9SixyKDU0KS5mPXcuZj0kLHIoMjcpLmY9SyxyKDQzKS5mPVEsaSYmIXIoMTQpJiZzKE4sXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLEssITApLHkuZj1mdW5jdGlvbihlKXtyZXR1cm4gRyhwKGUpKX0pLGEoYS5HK2EuVythLkYqIUYse1N5bWJvbDpDfSk7Zm9yKHZhciBlZT1cImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzXCIuc3BsaXQoXCIsXCIpLHRlPTA7ZWUubGVuZ3RoPnRlOylwKGVlW3RlKytdKTtmb3IodmFyIHJlPWsocC5zdG9yZSksbmU9MDtyZS5sZW5ndGg+bmU7KXYocmVbbmUrK10pO2EoYS5TK2EuRiohRixcIlN5bWJvbFwiLHtmb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oVCxlKz1cIlwiKT9UW2VdOlRbZV09QyhlKX0sa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKCFXKGUpKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBhIHN5bWJvbCFcIik7Zm9yKHZhciB0IGluIFQpaWYoVFt0XT09PWUpcmV0dXJuIHR9LHVzZVNldHRlcjpmdW5jdGlvbigpe1Y9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe1Y9ITF9fSksYShhLlMrYS5GKiFGLFwiT2JqZWN0XCIse2NyZWF0ZTpaLGRlZmluZVByb3BlcnR5OkosZGVmaW5lUHJvcGVydGllczpZLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpYLGdldE93blByb3BlcnR5TmFtZXM6JCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6UX0pLFAmJmEoYS5TK2EuRiooIUZ8fGMoZnVuY3Rpb24oKXt2YXIgZT1DKCk7cmV0dXJuXCJbbnVsbF1cIiE9RShbZV0pfHxcInt9XCIhPUUoe2E6ZX0pfHxcInt9XCIhPUUoT2JqZWN0KGUpKX0pKSxcIkpTT05cIix7c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyLG49W2VdLG89MTthcmd1bWVudHMubGVuZ3RoPm87KW4ucHVzaChhcmd1bWVudHNbbysrXSk7aWYocj10PW5bMV0sKG0odCl8fHZvaWQgMCE9PWUpJiYhVyhlKSlyZXR1cm4gXyh0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYodD1yLmNhbGwodGhpcyxlLHQpKSwhVyh0KSlyZXR1cm4gdH0pLG5bMV09dCxFLmFwcGx5KFAsbil9fSksQy5wcm90b3R5cGVbcV18fHIoMTEpKEMucHJvdG90eXBlLHEsQy5wcm90b3R5cGUudmFsdWVPZiksZChDLFwiU3ltYm9sXCIpLGQoTWF0aCxcIk1hdGhcIiwhMCksZChuLkpTT04sXCJKU09OXCIsITApfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyMSkoXCJtZXRhXCIpLG89cig5KSxpPXIoMTApLGE9cig4KS5mLHM9MCx1PU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGM9IXIoMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxsPWZ1bmN0aW9uKGUpe2EoZSxuLHt2YWx1ZTp7aTpcIk9cIisgKytzLHc6e319fSl9LGQ9ZnVuY3Rpb24oZSx0KXtpZighbyhlKSlyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZT9lOihcInN0cmluZ1wiPT10eXBlb2YgZT9cIlNcIjpcIlBcIikrZTtpZighaShlLG4pKXtpZighdShlKSlyZXR1cm5cIkZcIjtpZighdClyZXR1cm5cIkVcIjtsKGUpfXJldHVybiBlW25dLml9LGY9ZnVuY3Rpb24oZSx0KXtpZighaShlLG4pKXtpZighdShlKSlyZXR1cm4hMDtpZighdClyZXR1cm4hMTtsKGUpfXJldHVybiBlW25dLnd9LHA9ZnVuY3Rpb24oZSl7cmV0dXJuIGMmJnkuTkVFRCYmdShlKSYmIWkoZSxuKSYmbChlKSxlfSx5PWUuZXhwb3J0cz17S0VZOm4sTkVFRDohMSxmYXN0S2V5OmQsZ2V0V2VhazpmLG9uRnJlZXplOnB9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxOSksbz1yKDQzKSxpPXIoMjcpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uKGUpLHI9by5mO2lmKHIpZm9yKHZhciBhLHM9cihlKSx1PWkuZixjPTA7cy5sZW5ndGg+YzspdS5jYWxsKGUsYT1zW2MrK10pJiZ0LnB1c2goYSk7cmV0dXJuIHR9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxNik7ZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiQXJyYXlcIj09bihlKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEyKSxvPXIoNTQpLmYsaT17fS50b1N0cmluZyxhPVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaChlKXtyZXR1cm4gYS5zbGljZSgpfX07ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIGEmJlwiW29iamVjdCBXaW5kb3ddXCI9PWkuY2FsbChlKT9zKGUpOm8obihlKSl9fSxmdW5jdGlvbihlLHQscil7cigzOCkoXCJhc3luY0l0ZXJhdG9yXCIpfSxmdW5jdGlvbihlLHQscil7cigzOCkoXCJvYnNlcnZhYmxlXCIpfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig1OSksbz1yKDIpKFwiaXRlcmF0b3JcIiksaT1yKDE1KTtlLmV4cG9ydHM9cigwKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbihlKXtpZih2b2lkIDAhPWUpcmV0dXJuIGVbb118fGVbXCJAQGl0ZXJhdG9yXCJdfHxpW24oZSldfX0sZnVuY3Rpb24oZSx0LHIpe3IoNTUpLHIoNDUpLHIoNDcpLHIoODkpLHIoMTAwKSxyKDEwMSksZS5leHBvcnRzPXIoMCkuUHJvbWlzZX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuLG8saSxhLHM9cigxNCksdT1yKDEpLGM9cigxOCksbD1yKDU5KSxkPXIoNSksZj1yKDkpLHA9cigyMikseT1yKDkwKSx2PXIoOTEpLGg9cig2MyksXz1yKDY0KS5zZXQsYj1yKDk1KSgpLG09cig0OCksZz1yKDY1KSxSPXIoOTYpLE89cig2NiksRD11LlR5cGVFcnJvcix3PXUucHJvY2VzcyxqPXcmJncudmVyc2lvbnMsTD1qJiZqLnY4fHxcIlwiLGs9dS5Qcm9taXNlLFU9XCJwcm9jZXNzXCI9PWwodyksTT1mdW5jdGlvbigpe30seD1vPW0uZixDPSEhZnVuY3Rpb24oKXt0cnl7dmFyIGU9ay5yZXNvbHZlKDEpLHQ9KGUuY29uc3RydWN0b3I9e30pW3IoMikoXCJzcGVjaWVzXCIpXT1mdW5jdGlvbihlKXtlKE0sTSl9O3JldHVybihVfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZlLnRoZW4oTSlpbnN0YW5jZW9mIHQmJjAhPT1MLmluZGV4T2YoXCI2LjZcIikmJi0xPT09Ui5pbmRleE9mKFwiQ2hyb21lLzY2XCIpfWNhdGNoKGUpe319KCksUD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4hKCFmKGUpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZih0PWUudGhlbikpJiZ0fSxFPWZ1bmN0aW9uKGUsdCl7aWYoIWUuX24pe2UuX249ITA7dmFyIHI9ZS5fYztiKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUuX3Ysbz0xPT1lLl9zLGk9MDtyLmxlbmd0aD5pOykhZnVuY3Rpb24odCl7dmFyIHIsaSxhLHM9bz90Lm9rOnQuZmFpbCx1PXQucmVzb2x2ZSxjPXQucmVqZWN0LGw9dC5kb21haW47dHJ5e3M/KG98fCgyPT1lLl9oJiZJKGUpLGUuX2g9MSksITA9PT1zP3I9bjoobCYmbC5lbnRlcigpLHI9cyhuKSxsJiYobC5leGl0KCksYT0hMCkpLHI9PT10LnByb21pc2U/YyhEKFwiUHJvbWlzZS1jaGFpbiBjeWNsZVwiKSk6KGk9UChyKSk/aS5jYWxsKHIsdSxjKTp1KHIpKTpjKG4pfWNhdGNoKGUpe2wmJiFhJiZsLmV4aXQoKSxjKGUpfX0ocltpKytdKTtlLl9jPVtdLGUuX249ITEsdCYmIWUuX2gmJlMoZSl9KX19LFM9ZnVuY3Rpb24oZSl7Xy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdCxyLG4sbz1lLl92LGk9cShlKTtpZihpJiYodD1nKGZ1bmN0aW9uKCl7VT93LmVtaXQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixvLGUpOihyPXUub251bmhhbmRsZWRyZWplY3Rpb24pP3Ioe3Byb21pc2U6ZSxyZWFzb246b30pOihuPXUuY29uc29sZSkmJm4uZXJyb3ImJm4uZXJyb3IoXCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25cIixvKX0pLGUuX2g9VXx8cShlKT8yOjEpLGUuX2E9dm9pZCAwLGkmJnQuZSl0aHJvdyB0LnZ9KX0scT1mdW5jdGlvbihlKXtyZXR1cm4gMSE9PWUuX2gmJjA9PT0oZS5fYXx8ZS5fYykubGVuZ3RofSxJPWZ1bmN0aW9uKGUpe18uY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIHQ7VT93LmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsZSk6KHQ9dS5vbnJlamVjdGlvbmhhbmRsZWQpJiZ0KHtwcm9taXNlOmUscmVhc29uOmUuX3Z9KX0pfSxUPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fZHx8KHQuX2Q9ITAsdD10Ll93fHx0LHQuX3Y9ZSx0Ll9zPTIsdC5fYXx8KHQuX2E9dC5fYy5zbGljZSgpKSxFKHQsITApKX0sSD1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuX2Qpe3IuX2Q9ITAscj1yLl93fHxyO3RyeXtpZihyPT09ZSl0aHJvdyBEKFwiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGZcIik7KHQ9UChlKSk/YihmdW5jdGlvbigpe3ZhciBuPXtfdzpyLF9kOiExfTt0cnl7dC5jYWxsKGUsYyhILG4sMSksYyhULG4sMSkpfWNhdGNoKGUpe1QuY2FsbChuLGUpfX0pOihyLl92PWUsci5fcz0xLEUociwhMSkpfWNhdGNoKGUpe1QuY2FsbCh7X3c6cixfZDohMX0sZSl9fX07Q3x8KGs9ZnVuY3Rpb24oZSl7eSh0aGlzLGssXCJQcm9taXNlXCIsXCJfaFwiKSxwKGUpLG4uY2FsbCh0aGlzKTt0cnl7ZShjKEgsdGhpcywxKSxjKFQsdGhpcywxKSl9Y2F0Y2goZSl7VC5jYWxsKHRoaXMsZSl9fSxuPWZ1bmN0aW9uKGUpe3RoaXMuX2M9W10sdGhpcy5fYT12b2lkIDAsdGhpcy5fcz0wLHRoaXMuX2Q9ITEsdGhpcy5fdj12b2lkIDAsdGhpcy5faD0wLHRoaXMuX249ITF9LG4ucHJvdG90eXBlPXIoOTcpKGsucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9eChoKHRoaXMsaykpO3JldHVybiByLm9rPVwiZnVuY3Rpb25cIiE9dHlwZW9mIGV8fGUsci5mYWlsPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQsci5kb21haW49VT93LmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKHIpLHRoaXMuX2EmJnRoaXMuX2EucHVzaChyKSx0aGlzLl9zJiZFKHRoaXMsITEpLHIucHJvbWlzZX0sY2F0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSksaT1mdW5jdGlvbigpe3ZhciBlPW5ldyBuO3RoaXMucHJvbWlzZT1lLHRoaXMucmVzb2x2ZT1jKEgsZSwxKSx0aGlzLnJlamVjdD1jKFQsZSwxKX0sbS5mPXg9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1rfHxlPT09YT9uZXcgaShlKTpvKGUpfSksZChkLkcrZC5XK2QuRiohQyx7UHJvbWlzZTprfSkscigyMykoayxcIlByb21pc2VcIikscig5OCkoXCJQcm9taXNlXCIpLGE9cigwKS5Qcm9taXNlLGQoZC5TK2QuRiohQyxcIlByb21pc2VcIix7cmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PXgodGhpcyk7cmV0dXJuKDAsdC5yZWplY3QpKGUpLHQucHJvbWlzZX19KSxkKGQuUytkLkYqKHN8fCFDKSxcIlByb21pc2VcIix7cmVzb2x2ZTpmdW5jdGlvbihlKXtyZXR1cm4gTyhzJiZ0aGlzPT09YT9rOnRoaXMsZSl9fSksZChkLlMrZC5GKiEoQyYmcig5OSkoZnVuY3Rpb24oZSl7ay5hbGwoZSkuY2F0Y2goTSl9KSksXCJQcm9taXNlXCIse2FsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9eCh0KSxuPXIucmVzb2x2ZSxvPXIucmVqZWN0LGk9ZyhmdW5jdGlvbigpe3ZhciByPVtdLGk9MCxhPTE7dihlLCExLGZ1bmN0aW9uKGUpe3ZhciBzPWkrKyx1PSExO3IucHVzaCh2b2lkIDApLGErKyx0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXt1fHwodT0hMCxyW3NdPWUsLS1hfHxuKHIpKX0sbyl9KSwtLWF8fG4ocil9KTtyZXR1cm4gaS5lJiZvKGkudiksci5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj14KHQpLG49ci5yZWplY3Qsbz1nKGZ1bmN0aW9uKCl7dihlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8uZSYmbihvLnYpLHIucHJvbWlzZX19KX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbil7aWYoIShlIGluc3RhbmNlb2YgdCl8fHZvaWQgMCE9PW4mJm4gaW4gZSl0aHJvdyBUeXBlRXJyb3IocitcIjogaW5jb3JyZWN0IGludm9jYXRpb24hXCIpO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTgpLG89cig5MiksaT1yKDkzKSxhPXIoNykscz1yKDQ2KSx1PXIoODcpLGM9e30sbD17fSx0PWUuZXhwb3J0cz1mdW5jdGlvbihlLHQscixkLGYpe3ZhciBwLHksdixoLF89Zj9mdW5jdGlvbigpe3JldHVybiBlfTp1KGUpLGI9bihyLGQsdD8yOjEpLG09MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBfKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7aWYoaShfKSl7Zm9yKHA9cyhlLmxlbmd0aCk7cD5tO20rKylpZigoaD10P2IoYSh5PWVbbV0pWzBdLHlbMV0pOmIoZVttXSkpPT09Y3x8aD09PWwpcmV0dXJuIGh9ZWxzZSBmb3Iodj1fLmNhbGwoZSk7ISh5PXYubmV4dCgpKS5kb25lOylpZigoaD1vKHYsYix5LnZhbHVlLHQpKT09PWN8fGg9PT1sKXJldHVybiBofTt0LkJSRUFLPWMsdC5SRVRVUk49bH0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG8pe3RyeXtyZXR1cm4gbz90KG4ocilbMF0sclsxXSk6dChyKX1jYXRjaCh0KXt2YXIgaT1lLnJldHVybjt0aHJvdyB2b2lkIDAhPT1pJiZuKGkuY2FsbChlKSksdH19fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxNSksbz1yKDIpKFwiaXRlcmF0b3JcIiksaT1BcnJheS5wcm90b3R5cGU7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fGlbb109PT1lKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA9PT1yO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuP2UoKTplLmNhbGwocik7Y2FzZSAxOnJldHVybiBuP2UodFswXSk6ZS5jYWxsKHIsdFswXSk7Y2FzZSAyOnJldHVybiBuP2UodFswXSx0WzFdKTplLmNhbGwocix0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0sdFszXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0sdFszXSl9cmV0dXJuIGUuYXBwbHkocix0KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEpLG89cig2NCkuc2V0LGk9bi5NdXRhdGlvbk9ic2VydmVyfHxuLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsYT1uLnByb2Nlc3Mscz1uLlByb21pc2UsdT1cInByb2Nlc3NcIj09cigxNikoYSk7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdCxyLGM9ZnVuY3Rpb24oKXt2YXIgbixvO2Zvcih1JiYobj1hLmRvbWFpbikmJm4uZXhpdCgpO2U7KXtvPWUuZm4sZT1lLm5leHQ7dHJ5e28oKX1jYXRjaChuKXt0aHJvdyBlP3IoKTp0PXZvaWQgMCxufX10PXZvaWQgMCxuJiZuLmVudGVyKCl9O2lmKHUpcj1mdW5jdGlvbigpe2EubmV4dFRpY2soYyl9O2Vsc2UgaWYoIWl8fG4ubmF2aWdhdG9yJiZuLm5hdmlnYXRvci5zdGFuZGFsb25lKWlmKHMmJnMucmVzb2x2ZSl7dmFyIGw9cy5yZXNvbHZlKHZvaWQgMCk7cj1mdW5jdGlvbigpe2wudGhlbihjKX19ZWxzZSByPWZ1bmN0aW9uKCl7by5jYWxsKG4sYyl9O2Vsc2V7dmFyIGQ9ITAsZj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtuZXcgaShjKS5vYnNlcnZlKGYse2NoYXJhY3RlckRhdGE6ITB9KSxyPWZ1bmN0aW9uKCl7Zi5kYXRhPWQ9IWR9fXJldHVybiBmdW5jdGlvbihuKXt2YXIgbz17Zm46bixuZXh0OnZvaWQgMH07dCYmKHQubmV4dD1vKSxlfHwoZT1vLHIoKSksdD1vfX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEpLG89bi5uYXZpZ2F0b3I7ZS5leHBvcnRzPW8mJm8udXNlckFnZW50fHxcIlwifSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxMSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG8gaW4gdClyJiZlW29dP2Vbb109dFtvXTpuKGUsbyx0W29dKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDEpLG89cigwKSxpPXIoOCksYT1yKDYpLHM9cigyKShcInNwZWNpZXNcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIG9bZV0/b1tlXTpuW2VdO2EmJnQmJiF0W3NdJiZpLmYodCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyKShcIml0ZXJhdG9yXCIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2kucmV0dXJuPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKGUpe31lLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIW8pcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBpPVs3XSxhPWlbbl0oKTthLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpyPSEwfX0saVtuXT1mdW5jdGlvbigpe3JldHVybiBhfSxlKGkpfWNhdGNoKGUpe31yZXR1cm4gcn19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDUpLG89cigwKSxpPXIoMSksYT1yKDYzKSxzPXIoNjYpO24obi5QK24uUixcIlByb21pc2VcIix7ZmluYWxseTpmdW5jdGlvbihlKXt2YXIgdD1hKHRoaXMsby5Qcm9taXNlfHxpLlByb21pc2UpLHI9XCJmdW5jdGlvblwiPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKHI/ZnVuY3Rpb24ocil7cmV0dXJuIHModCxlKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcn0pfTplLHI/ZnVuY3Rpb24ocil7cmV0dXJuIHModCxlKCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyByfSl9OmUpfX0pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig1KSxvPXIoNDgpLGk9cig2NSk7bihuLlMsXCJQcm9taXNlXCIse3RyeTpmdW5jdGlvbihlKXt2YXIgdD1vLmYodGhpcykscj1pKGUpO3JldHVybihyLmU/dC5yZWplY3Q6dC5yZXNvbHZlKShyLnYpLHQucHJvbWlzZX19KX0sZnVuY3Rpb24oZSx0LHIpe3IoMTAzKSxlLmV4cG9ydHM9cigwKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDMzKSxvPXIoNTgpO3IoNDkpKFwiZ2V0UHJvdG90eXBlT2ZcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDEwNSksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCxyKXtyKDEwNiksZS5leHBvcnRzPXIoMCkuT2JqZWN0LnNldFByb3RvdHlwZU9mfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig1KTtuKG4uUyxcIk9iamVjdFwiLHtzZXRQcm90b3R5cGVPZjpyKDEwNykuc2V0fSl9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpLG89cig3KSxpPWZ1bmN0aW9uKGUsdCl7aWYobyhlKSwhbih0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfTtlLmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbihlLHQsbil7dHJ5e249cigxOCkoRnVuY3Rpb24uY2FsbCxyKDUwKS5mKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIikuc2V0LDIpLG4oZSxbXSksdD0hKGUgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goZSl7dD0hMH1yZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gaShlLHIpLHQ/ZS5fX3Byb3RvX189cjpuKGUsciksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOml9fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTA5KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3IoMTEwKTt2YXIgbj1yKDApLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDUpO24obi5TLFwiT2JqZWN0XCIse2NyZWF0ZTpyKDQwKX0pfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxvPW4uSlNPTnx8KG4uSlNPTj17c3RyaW5naWZ5OkpTT04uc3RyaW5naWZ5fSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvLnN0cmluZ2lmeS5hcHBseShvLGFyZ3VtZW50cyl9fSxmdW5jdGlvbihlLHQscil7cigxMTMpLGUuZXhwb3J0cz1yKDApLk9iamVjdC5rZXlzfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigzMyksbz1yKDE5KTtyKDQ5KShcImtleXNcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDEyMiksX19lc01vZHVsZTohMH19LCxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoMjYpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTE5KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSk7dC5kZWZhdWx0PWZ1bmN0aW9uIGdldChlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAsYS5kZWZhdWx0KShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBpPSgwLG8uZGVmYXVsdCkoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDpnZXQoaSx0LHIpfWlmKFwidmFsdWVcImluIG4pcmV0dXJuIG4udmFsdWU7dmFyIHM9bi5nZXQ7aWYodm9pZCAwIT09cylyZXR1cm4gcy5jYWxsKHIpfX0sLCxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTIwKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3IoMTIxKTt2YXIgbj1yKDApLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEyKSxvPXIoNTApLmY7cig0OSkoXCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBvKG4oZSksdCl9fSl9LGZ1bmN0aW9uKGUsdCxyKXtyKDEyMyksZS5leHBvcnRzPXIoMCkuT2JqZWN0LmFzc2lnbn0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNSk7bihuLlMrbi5GLFwiT2JqZWN0XCIse2Fzc2lnbjpyKDEyNCl9KX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMTkpLG89cig0MyksaT1yKDI3KSxhPXIoMzMpLHM9cig1NiksdT1PYmplY3QuYXNzaWduO2UuZXhwb3J0cz0hdXx8cigxMykoZnVuY3Rpb24oKXt2YXIgZT17fSx0PXt9LHI9U3ltYm9sKCksbj1cImFiY2RlZmdoaWprbG1ub3BxcnN0XCI7cmV0dXJuIGVbcl09NyxuLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT1lfSksNyE9dSh7fSxlKVtyXXx8T2JqZWN0LmtleXModSh7fSx0KSkuam9pbihcIlwiKSE9bn0pP2Z1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWEoZSksdT1hcmd1bWVudHMubGVuZ3RoLGM9MSxsPW8uZixkPWkuZjt1PmM7KWZvcih2YXIgZixwPXMoYXJndW1lbnRzW2MrK10pLHk9bD9uKHApLmNvbmNhdChsKHApKTpuKHApLHY9eS5sZW5ndGgsaD0wO3Y+aDspZC5jYWxsKHAsZj15W2grK10pJiYocltmXT1wW2ZdKTtyZXR1cm4gcn06dX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDM2KSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oZCkscD1yKDM5KSx5PWYuZ2V0TG9nZ2VyKFwiUmVnaXN0cmF0aW9uU3RhdHVzXCIpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBSZWdpc3RyYXRpb25TdGF0dXMoZSx0LHIsbil7KDAsdS5kZWZhdWx0KSh0aGlzLFJlZ2lzdHJhdGlvblN0YXR1cyksdGhpcy5fcmVnaXN0cnlPYmplY3RVUkw9ZSx0aGlzLl9ydW50aW1lVVJMPXQsdGhpcy5fZG9tYWluPSgwLHAuZGl2aWRlVVJMKSh0KS5kb21haW4sdGhpcy5fZGlzY292ZXJlZE9iamVjdFVSTD1yLHRoaXMuX21lc3NhZ2VCdXM9bix0aGlzLl9zdWJzY3JpcHRpb25TZXQ9ITEsdGhpcy5fc3Vic2NyaWJlcnM9e2xpdmU6e30sZGlzY29ubmVjdGVkOnt9fX1yZXR1cm4oMCxsLmRlZmF1bHQpKFJlZ2lzdHJhdGlvblN0YXR1cyxbe2tleTpcIm9uTGl2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuX3N1YnNjcmlwdGlvblNldD8oci5fc3Vic2NyaWJlcnMubGl2ZVtlXT10LG4oKSk6ci5fc3Vic2NyaWJlKCkudGhlbihmdW5jdGlvbigpe3IuX3N1YnNjcmliZXJzLmxpdmVbZV09dCxuKCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX0pfSl9fSx7a2V5Olwib25EaXNjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixvKXtyLl9zdWJzY3JpcHRpb25TZXQ/KHIuX3N1YnNjcmliZXJzLmRpc2Nvbm5lY3RlZFtlXT10LG4oKSk6ci5fc3Vic2NyaWJlKCkudGhlbihmdW5jdGlvbigpe3IuX3N1YnNjcmliZXJzLmRpc2Nvbm5lY3RlZFtlXT10LG4oKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSl9KX19LHtrZXk6XCJfc3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6XCJzdWJzY3JpYmVcIixmcm9tOnRoaXMuX2Rpc2NvdmVyZWRPYmplY3RVUkwsdG86dGhpcy5fcnVudGltZVVSTCtcIi9zdWJzY3JpcHRpb25zXCIsYm9keTp7cmVzb3VyY2VzOlt0aGlzLl9yZWdpc3RyeU9iamVjdFVSTCtcIi9yZWdpc3RyYXRpb25cIl19fTtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXt5LmxvZyhcIltEaXNjb3ZlcmVkT2JqZWN0LnN1YnNjcmliZV0gXCIrZS5fcmVnaXN0cnlPYmplY3RVUkwrXCIgcmN2ZWQgcmVwbHkgXCIsdCksMjAwPT09dC5ib2R5LmNvZGU/KGUuX2dlbmVyYXRlTGlzdGVuZXIoZS5fcmVnaXN0cnlPYmplY3RVUkwrXCIvcmVnaXN0cmF0aW9uXCIpLGUuX3N1YnNjcmlwdGlvblNldD0hMCxyKCkpOih5LmVycm9yKFwiRXJyb3Igc3Vic2NyaWJpbmcgXCIsZS5fcmVnaXN0cnlPYmplY3RVUkwpLG4oXCJFcnJvciBzdWJzY3JpYmluZyBcIitlLl9yZWdpc3RyeU9iamVjdFVSTCkpfSl9KX19LHtrZXk6XCJfZ2VuZXJhdGVMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKGUpe3kubG9nKFwiW0Rpc2NvdmVyZWRPYmplY3Qubm90aWZpY2F0aW9uXSBcIit0Ll9yZWdpc3RyeU9iamVjdFVSTCtcIjogXCIsZSksdC5fcHJvY2Vzc05vdGlmaWNhdGlvbihlKX0pfX0se2tleTpcIl9wcm9jZXNzTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS52YWx1ZTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7KDAsby5kZWZhdWx0KSh0Ll9zdWJzY3JpYmVyc1tyXSkuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc3Vic2NyaWJlcnNbcl1bZV0oKX0pfSw1ZTMpfX0se2tleTpcIl91bnN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOlwidW5zdWJzY3JpYmVcIixmcm9tOnRoaXMuX2Rpc2NvdmVyZWRPYmplY3RVUkwsdG86dGhpcy5fcnVudGltZVVSTCtcIi9zdWJzY3JpcHRpb25zXCIsYm9keTp7cmVzb3VyY2U6dGhpcy5fcmVnaXN0cnlPYmplY3RVUkwrXCIvcmVnaXN0cmF0aW9uXCJ9fTtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXt5LmxvZyhcIltEaXNjb3ZlcmVkT2JqZWN0LnVuc3Vic2NyaWJlXSBcIitlLl9yZWdpc3RyeU9iamVjdFVSTCtcIiByY3ZlZCByZXBseSBcIix0KSwyMDA9PT10LmJvZHkuY29kZT9yKCk6KHkuZXJyb3IoXCJFcnJvciB1bnN1YnNjcmliaW5nIFwiLGUuX3JlZ2lzdHJ5T2JqZWN0VVJMKSxuKFwiRXJyb3IgdW5zdWJzY3JpYmluZyBcIitlLl9yZWdpc3RyeU9iamVjdFVSTCkpfSl9KX19LHtrZXk6XCJ1bnN1YnNjcmliZUxpdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZSBpbiB0Ll9zdWJzY3JpYmVycy5saXZlJiZkZWxldGUgdC5fc3Vic2NyaWJlcnMubGl2ZVtlXSx0Ll9hcmVTdWJzY3JpcHRpb25zRW1wdHkoKT90Ll91bnN1YnNjcmliZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcigpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KTpyKCl9KX19LHtrZXk6XCJ1bnN1YnNjcmliZURpc2Nvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlIGluIHQuX3N1YnNjcmliZXJzLmRpc2Nvbm5lY3RlZD8oZGVsZXRlIHQuX3N1YnNjcmliZXJzLmRpc2Nvbm5lY3RlZFtlXSx0Ll9hcmVTdWJzY3JpcHRpb25zRW1wdHkoKT90Ll91bnN1YnNjcmliZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcigpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KTpyKCkpOm4oZStcIiBkb2Vzbid0IHN1YnNjcmliZSBvbkRpc2Nvbm5lY3RlZCBmb3IgXCIrdC5fcmVnaXN0cnlPYmplY3RVUkwpfSl9fSx7a2V5OlwiX2FyZVN1YnNjcmlwdGlvbnNFbXB0eVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT0oMCxvLmRlZmF1bHQpKHRoaXMuX3N1YnNjcmliZXJzLmxpdmUpLmxlbmd0aCYmMD09PSgwLG8uZGVmYXVsdCkodGhpcy5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkKS5sZW5ndGh9fV0pLFJlZ2lzdHJhdGlvblN0YXR1c30oKTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigyNiksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMzQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMzUpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMTI3KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1mdW5jdGlvbihlKXtmdW5jdGlvbiBNaW5pQnVzKCl7cmV0dXJuKDAsYS5kZWZhdWx0KSh0aGlzLE1pbmlCdXMpLCgwLGwuZGVmYXVsdCkodGhpcywoTWluaUJ1cy5fX3Byb3RvX198fCgwLG8uZGVmYXVsdCkoTWluaUJ1cykpLmNhbGwodGhpcykpfXJldHVybigwLGYuZGVmYXVsdCkoTWluaUJ1cyxlKSwoMCx1LmRlZmF1bHQpKE1pbmlCdXMsW3trZXk6XCJwb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuLl9nZW5JZChlKSxuLl9yZXNwb25zZUNhbGxiYWNrKGUsdCxyKSxuLl9vblBvc3RNZXNzYWdlKGUpLGUuaWR9fSx7a2V5OlwiX29uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIXQuX29uUmVzcG9uc2UoZSkpe3ZhciByPXQuX3N1YnNjcmlwdGlvbnNbZS50b107cj8odC5fcHVibGlzaE9uKHIsZSksZS50by5zdGFydHNXaXRoKFwiaHlwZXJ0eVwiKXx8dC5fcHVibGlzaE9uRGVmYXVsdChlKSk6dC5fcHVibGlzaE9uRGVmYXVsdChlKX19fV0pLE1pbmlCdXN9KHkuZGVmYXVsdCk7dC5kZWZhdWx0PXYsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTcpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cig0KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDM2KSxsPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksZD1sLmdldExvZ2dlcihcIkJ1c1wiKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQnVzKCl7KDAsYS5kZWZhdWx0KSh0aGlzLEJ1cyk7dmFyIGU9dGhpcztlLl9tc2dJZD0wLGUuX3N1YnNjcmlwdGlvbnM9e30sZS5fcmVzcG9uc2VUaW1lT3V0PTNlNCxlLl9yZXNwb25zZUNhbGxiYWNrcz17fSxlLl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIoKX1yZXR1cm4oMCx1LmRlZmF1bHQpKEJ1cyxbe2tleTpcImFkZExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49bmV3IHAoci5fc3Vic2NyaXB0aW9ucyxlLHQpLG89ci5fc3Vic2NyaXB0aW9uc1tlXTtyZXR1cm4gb3x8KG89W10sci5fc3Vic2NyaXB0aW9uc1tlXT1vKSxvLnB1c2gobiksbn19LHtrZXk6XCJhZGRSZXNwb25zZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW2UrdF09cn19LHtrZXk6XCJyZW1vdmVSZXNwb25zZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtkZWxldGUgdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbZSt0XX19LHtrZXk6XCJyZW1vdmVBbGxMaXN0ZW5lcnNPZlwiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW2VdfX0se2tleTpcImJpbmRcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxvPXRoaXM7cmV0dXJue3RoaXNMaXN0ZW5lcjpvLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7ci5wb3N0TWVzc2FnZShlKX0pLHRhcmdldExpc3RlbmVyOnIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtvLnBvc3RNZXNzYWdlKGUpfSksdW5iaW5kOmZ1bmN0aW9uKCl7bi50aGlzTGlzdGVuZXIucmVtb3ZlKCksbi50YXJnZXRMaXN0ZW5lci5yZW1vdmUoKX19fX0se2tleTpcIl9wdWJsaXNoT25EZWZhdWx0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3Vic2NyaXB0aW9uc1tcIipcIl07dCYmdGhpcy5fcHVibGlzaE9uKHQsZSl9fSx7a2V5OlwiX3B1Ymxpc2hPblwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuX2NhbGxiYWNrKHQpfSl9fSx7a2V5OlwiX3Jlc3BvbnNlQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl0sbj10aGlzO2lmKHQpe3ZhciBvPWUuZnJvbStlLmlkO24uX3Jlc3BvbnNlQ2FsbGJhY2tzW29dPXQsciYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PW4uX3Jlc3BvbnNlQ2FsbGJhY2tzW29dO2lmKGRlbGV0ZSBuLl9yZXNwb25zZUNhbGxiYWNrc1tvXSx0KXt0KHtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGJvZHk6e2NvZGU6NDA4LGRlc2M6XCJSZXNwb25zZSB0aW1lb3V0IVwiLHZhbHVlOmV9fSl9fSxuLl9yZXNwb25zZVRpbWVPdXQpfX19LHtrZXk6XCJfb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoXCJyZXNwb25zZVwiPT09ZS50eXBlKXt2YXIgcj1lLnRvK2UuaWQsbj10Ll9yZXNwb25zZUNhbGxiYWNrc1tyXTtpZihlLmJvZHkuY29kZT49MjAwJiZkZWxldGUgdC5fcmVzcG9uc2VDYWxsYmFja3Nbcl0sbilyZXR1cm4gbihlKSwhMH1yZXR1cm4hMX19LHtrZXk6XCJfb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC5fb25SZXNwb25zZShlKSl7dmFyIHI9dC5fc3Vic2NyaXB0aW9uc1tlLnRvXTtyP3QuX3B1Ymxpc2hPbihyLGUpOnQuX3B1Ymxpc2hPbkRlZmF1bHQoZSl9fX0se2tleTpcIl9nZW5JZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UuaWQmJjAhPT1lLmlkfHwodGhpcy5fbXNnSWQrKyxlLmlkPXRoaXMuX21zZ0lkKX19LHtrZXk6XCJwb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7fX0se2tleTpcInBvc3RNZXNzYWdlV2l0aFJldHJpZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPTAsYT1mdW5jdGlvbigpe3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQsbyl7bi5wb3N0TWVzc2FnZShlLGZ1bmN0aW9uKG4pezQwOD09PW4uYm9keS5jb2RlfHw1MDA9PT1uLmJvZHkuY29kZT9vKCk6KGQuaW5mbyhcIltCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllc10gbXNnIGRlbGl2ZXJlZDogXCIsZSkscihuKSx0KCkpfSl9KX07IWZ1bmN0aW9uIHRyeUFnYWluKCl7YSgpLnRoZW4oZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7aWYoZC53YXJuKFwiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBNZXNzYWdlIEJvdW5jZWQgKHJldHJ5IFwiK2krXCIpOiAnXCIsZSksIShpKys8dCkpe3ZhciByPVwiW0Vycm9yXSBNZXNzYWdlIEJvdW5jZWQgKGRlbGl2ZXJ5IGF0dGVtcHRzIFwiK3QrXCIpOiAnXCI7dGhyb3cgbmV3IEVycm9yKHIrZSl9dHJ5QWdhaW4oKX0pfSgpfX0se2tleTpcIl9vblBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7fX0se2tleTpcIl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbigpe319XSksQnVzfSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBNc2dMaXN0ZW5lcihlLHQscil7KDAsYS5kZWZhdWx0KSh0aGlzLE1zZ0xpc3RlbmVyKTt2YXIgbj10aGlzO24uX3N1YnNjcmlwdGlvbnM9ZSxuLl91cmw9dCxuLl9jYWxsYmFjaz1yfXJldHVybigwLHUuZGVmYXVsdCkoTXNnTGlzdGVuZXIsW3trZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9zdWJzY3JpcHRpb25zW2UuX3VybF07aWYodCl7dmFyIHI9dC5pbmRleE9mKGUpO3Quc3BsaWNlKHIsMSksMD09PXQubGVuZ3RoJiZkZWxldGUgZS5fc3Vic2NyaXB0aW9uc1tlLl91cmxdfX19LHtrZXk6XCJ1cmxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxNc2dMaXN0ZW5lcn0oKTt0LmRlZmF1bHQ9ZixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMTI5KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIFNhbmRib3hSZWdpc3RyeShlKXsoMCxvLmRlZmF1bHQpKHRoaXMsU2FuZGJveFJlZ2lzdHJ5KTt2YXIgdD10aGlzO3QuX2J1cz1lLHQuX2ZhY3Rvcnk9bmV3IHUuZGVmYXVsdChlKSx0Ll9jb21wb25lbnRzPXt9LGUuYWRkTGlzdGVuZXIoU2FuZGJveFJlZ2lzdHJ5LkludGVybmFsRGVwbG95QWRkcmVzcyxmdW5jdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJjcmVhdGVcIjp0Ll9vbkRlcGxveShlKTticmVhaztjYXNlXCJkZWxldGVcIjp0Ll9vblJlbW92ZShlKX19KX1yZXR1cm4oMCxhLmRlZmF1bHQpKFNhbmRib3hSZWdpc3RyeSxbe2tleTpcIl9yZXNwb25zZU1zZ1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOlNhbmRib3hSZWdpc3RyeS5JbnRlcm5hbERlcGxveUFkZHJlc3MsdG86U2FuZGJveFJlZ2lzdHJ5LkV4dGVybmFsRGVwbG95QWRkcmVzc30sbz17fTtyZXR1cm4gdCYmKG8uY29kZT10KSxyJiYoby5kZXNjPXIpLG4uYm9keT1vLG59fSx7a2V5OlwiX29uRGVwbG95XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5jb25maWcsbj1lLmJvZHkudXJsLG89ZS5ib2R5LnNvdXJjZUNvZGUsaT12b2lkIDAsYT12b2lkIDA7aWYodC5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShuKSlpPTUwMCxhPVwiSW5zdGFuY2UgXCIrbitcIiBhbHJlYWR5IGV4aXN0IVwiO2Vsc2UgdHJ5e3QuX2NvbXBvbmVudHNbbl09dC5fY3JlYXRlKG4sbyxyLHQuX2ZhY3RvcnkpLGk9MjAwfWNhdGNoKGUpe2k9NTAwLGE9ZX12YXIgcz10Ll9yZXNwb25zZU1zZyhlLGksYSk7dC5fYnVzLnBvc3RNZXNzYWdlKHMpfX0se2tleTpcIl9vblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkudXJsLG49dm9pZCAwLG89dm9pZCAwO3QuX2NvbXBvbmVudHMuaGFzT3duUHJvcGVydHkocik/KGRlbGV0ZSB0Ll9jb21wb25lbnRzW3JdLHQuX2J1cy5yZW1vdmVBbGxMaXN0ZW5lcnNPZihyKSxuPTIwMCk6KG49NTAwLG89XCJJbnN0YW5jZSBcIityK1wiIGRvZXNuJ3QgZXhpc3QhXCIpO3ZhciBpPXQuX3Jlc3BvbnNlTXNnKGUsbixvKTt0Ll9idXMucG9zdE1lc3NhZ2UoaSl9fSx7a2V5OlwiX2NyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe319LHtrZXk6XCJjb21wb25lbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHN9fV0pLFNhbmRib3hSZWdpc3RyeX0oKTtjLkV4dGVybmFsRGVwbG95QWRkcmVzcz1cImh5cGVydHktcnVudGltZTovL3NhbmRib3gvZXh0ZXJuYWxcIixjLkludGVybmFsRGVwbG95QWRkcmVzcz1cImh5cGVydHktcnVudGltZTovL3NhbmRib3gvaW50ZXJuYWxcIix0LmRlZmF1bHQ9YyxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMTMwKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDE2MSksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzOSksZj1yKDEzNCkscD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGYpLHk9cigxMzUpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSxoPXIoMTI1KSxfPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksYj1yKDE2MyksbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGIpLGc9cigxMzYpLFI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChnKSxPPXIoMTM4KSxEPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoTyksdz1yKDE2NCksaj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHcpLEw9cigxNjYpLGs9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChMKSxVPXIoMTM5KSxNPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoVSkseD1mdW5jdGlvbigpe2Z1bmN0aW9uIFNhbmRib3hGYWN0b3J5KGUpeygwLG8uZGVmYXVsdCkodGhpcyxTYW5kYm94RmFjdG9yeSk7dmFyIHQ9dGhpczt0Ll9idXM9ZSx0Ll9kaXZpZGVVUkw9ZC5kaXZpZGVVUkx9cmV0dXJuKDAsYS5kZWZhdWx0KShTYW5kYm94RmFjdG9yeSxbe2tleTpcImNyZWF0ZVN5bmNoZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZSx0LHIpfX0se2tleTpcImNyZWF0ZUlkZW50aXR5TWFuYWdlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IHAuZGVmYXVsdChlLHQscil9fSx7a2V5OlwiY3JlYXRlRGlzY292ZXJ5XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgdi5kZWZhdWx0KGUsdCxyKX19LHtrZXk6XCJjcmVhdGVTZWFyY2hcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgbS5kZWZhdWx0KGUsdCl9fSx7a2V5OlwiY3JlYXRlQ29udGV4dE9ic2VydmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7cmV0dXJuIG5ldyBSLmRlZmF1bHQoZSx0LHIsbix0aGlzKX19LHtrZXk6XCJjcmVhdGVDb250ZXh0UmVwb3J0ZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7cmV0dXJuIG5ldyBELmRlZmF1bHQoZSx0LHIsdGhpcyl9fSx7a2V5OlwiY3JlYXRlTm90aWZpY2F0aW9uSGFuZGxlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbC5kZWZhdWx0KGUpfX0se2tleTpcImNyZWF0ZU1lc3NhZ2VCb2R5SWRlbnRpdHlcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSxhLHMpe3JldHVybiBuZXcgai5kZWZhdWx0KGUsdCxyLG4sbyxpLGEscyl9fSx7a2V5OlwiY3JlYXRlQ2hhdE1hbmFnZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtyZXR1cm4gbmV3IGsuZGVmYXVsdChlLHQscixuLHRoaXMpfX0se2tleTpcImNyZWF0ZUNoYXRDb250cm9sbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvLGkpe3JldHVybiBuZXcgTS5kZWZhdWx0KGUsdCxyLG4sbyxpKX19LHtrZXk6XCJjcmVhdGVSZWdpc3RyYXRpb25TdGF0dXNcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtyZXR1cm4gbmV3IF8uZGVmYXVsdChlLHQscixuKX19LHtrZXk6XCJkaXZpZGVVUkxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGl2aWRlVVJMfX1dKSxTYW5kYm94RmFjdG9yeX0oKTt0LmRlZmF1bHQ9eCxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxMTQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDM2KSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oZCkscD1yKDM5KSx5PXIoMTUzKSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoeSksaD1yKDE1OSksXz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGI9cigxNjApLG09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChiKSxnPWYuZ2V0TG9nZ2VyKFwiU3luY2hlclwiKSxSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU3luY2hlcihlLHQscil7KDAsdS5kZWZhdWx0KSh0aGlzLFN5bmNoZXIpO3ZhciBuPXRoaXM7bi5fb3duZXI9ZSxuLl9idXM9dCxuLl9zdWJVUkw9ci5ydW50aW1lVVJMK1wiL3NtXCIsbi5fcnVudGltZVVybD1yLnJ1bnRpbWVVUkwsbi5fcDJwSGFuZGxlcj1yLnAycEhhbmRsZXIsbi5fcDJwUmVxdWVzdGVyPXIucDJwUmVxdWVzdGVyLG4uX3JlcG9ydGVycz17fSxuLl9vYnNlcnZlcnM9e30sbi5fcHJvdmlzaW9uYWxzPXt9LHQuYWRkTGlzdGVuZXIoZSxmdW5jdGlvbih0KXtpZih0LmZyb20hPT1lKXN3aXRjaChnLmluZm8oXCJbU3luY2hlcl0gU3luY2hlci1SQ1Y6IFwiLHQsbiksdC50eXBlKXtjYXNlXCJmb3J3YXJkXCI6bi5fb25Gb3J3YXJkKHQpO2JyZWFrO2Nhc2VcImNyZWF0ZVwiOm4uX29uUmVtb3RlQ3JlYXRlKHQpO2JyZWFrO2Nhc2VcImRlbGV0ZVwiOm4uX29uUmVtb3RlRGVsZXRlKHQpO2JyZWFrO2Nhc2VcImV4ZWN1dGVcIjpuLl9vbkV4ZWN1dGUodCl9fSl9cmV0dXJuKDAsbC5kZWZhdWx0KShTeW5jaGVyLFt7a2V5OlwiY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdJiZhcmd1bWVudHNbM10sbz1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSYmYXJndW1lbnRzWzRdLGk9YXJndW1lbnRzLmxlbmd0aD41JiZ2b2lkIDAhPT1hcmd1bWVudHNbNV0/YXJndW1lbnRzWzVdOlwibm8gbmFtZVwiLHM9YXJndW1lbnRzWzZdLHU9YXJndW1lbnRzWzddO2lmKCFlKXRocm93IEVycm9yKFwiW1N5bmNoZXIgLSBDcmVhdGVdIC0gWW91IG5lZWQgc3BlY2lmeSB0aGUgZGF0YSBvYmplY3Qgc2NoZW1hXCIpO2lmKCF0KXRocm93IEVycm9yKFwiW1N5bmNoZXIgLSBDcmVhdGVdIC1UaGUgb2JzZXJ2ZXJzIHNob3VsZCBiZSBkZWZpbmVkXCIpO3ZhciBjPXRoaXM7dT11fHx7fTt2YXIgbD0oMCxhLmRlZmF1bHQpKHt9LHUpO3JldHVybiBsLnAycD1vLGwuc3RvcmU9bixsLnNjaGVtYT1lLGwuYXV0aG9yaXNlPXQsbC5wMnBIYW5kbGVyPWMuX3AycEhhbmRsZXIsbC5wMnBSZXF1ZXN0ZXI9Yy5fcDJwUmVxdWVzdGVyLGwuZGF0YT1yPygwLHAuZGVlcENsb25lKShyKTp7fSxsLm5hbWU9MD09PWkubGVuZ3RoP1wibm8gbmFtZVwiOmksbC5yZXBvcnRlcj11Lmhhc093blByb3BlcnR5KFwicmVwb3J0ZXJcIikmJlwiYm9vbGVhblwiIT10eXBlb2YgdS5yZXBvcnRlcj91LnJlcG9ydGVyOmMuX293bmVyLGwucmVzdW1lPSExLHU/KGwubXV0dWFsPSF1Lmhhc093blByb3BlcnR5KFwibXV0dWFsXCIpfHx1Lm11dHVhbCxsLm5hbWU9dS5oYXNPd25Qcm9wZXJ0eShcIm5hbWVcIik/dS5uYW1lOmwubmFtZSk6bC5tdXR1YWw9ITAsdS5oYXNPd25Qcm9wZXJ0eShcInJldXNlVVJMXCIpJiYobC5yZXNvdXJjZT11LnJldXNlVVJMKSxzJiYobC5pZGVudGl0eT1zKSxnLmxvZyhcIltzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBSZXBvcnRlciAtIGNyZWF0ZUlucHV0OiBcIixsKSxjLl9jcmVhdGUobCl9fSx7a2V5OlwicmVzdW1lUmVwb3J0ZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZy5sb2coXCJbc3luY2hlciAtIGNyZWF0ZV0gLSByZXN1bWUgUmVwb3J0ZXIgLSBjcml0ZXJpYTogXCIsZSksKDAsYS5kZWZhdWx0KShlLHtyZXN1bWU6ITB9KSx0Ll9yZXN1bWVDcmVhdGUoZSl9fSx7a2V5Olwic3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdLG49YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10mJmFyZ3VtZW50c1szXSxvPSEoYXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0pfHxhcmd1bWVudHNbNF0saT0hKGFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdKXx8YXJndW1lbnRzWzVdLHM9YXJndW1lbnRzWzZdLHU9dGhpcyxjPXt9O3JldHVybiBjLnAycD1uLGMuc3RvcmU9cixjLnNjaGVtYT1lLGMuZG9tYWluX3N1YnNjcmlwdGlvbj1pLGMucmVzb3VyY2U9dCxzJiYoYy5pZGVudGl0eT1zKSxjLm11dHVhbD1vLGcubG9nKFwiW3N5bmNoZXIgLSBzdWJzY3JpYmVdIC0gc3Vic2NyaWJlIGNyaXRlcmlhOiBcIixjKSwoMCxhLmRlZmF1bHQpKGMse3Jlc3VtZTohMX0pLHUuX3N1YnNjcmliZShjKX19LHtrZXk6XCJyZXN1bWVPYnNlcnZlcnNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZXx8e307cmV0dXJuKDAsYS5kZWZhdWx0KShyLHtyZXN1bWU6ITB9KSx0Ll9yZXN1bWVTdWJzY3JpYmUocil9fSx7a2V5OlwicmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTpcInJlYWRcIixmcm9tOnQuX293bmVyLHRvOmV9O3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsbil7dmFyIG89ZnVuY3Rpb24obyl7Zy5sb2coXCJbU3luY2hlci5yZWFkXSByZXBseTogXCIsbyk7dmFyIGk9e30scz17fSx1PTA7aWYoby5ib2R5LmNvZGU8MzAwKWlmKG8uYm9keS52YWx1ZS5oYXNPd25Qcm9wZXJ0eShcInJlc3BvbnNlc1wiKSlpZigwPT09dSlzPW8uYm9keS52YWx1ZSwrK3U7ZWxzZXtkZWxldGUgby5ib2R5LnZhbHVlLnJlc3BvbnNlczt2YXIgYz12b2lkIDA7Zm9yKGMgaW4gby5ib2R5LnZhbHVlKWkuaGFzT3duUHJvcGVydHkoYyl8fChpW2NdPXt9KSwoMCxhLmRlZmF1bHQpKGlbY10sby5ib2R5LnZhbHVlW2NdKTsrK3UsdT09PXMucmVzcG9uc2VzJiYocy5jaGlsZHJlbk9iamVjdHM9aSxkZWxldGUgcy5yZXNwb25zZXMsdC5fYnVzLnJlbW92ZVJlc3BvbnNlTGlzdGVuZXIoci5mcm9tLG8uaWQpLGUocykpfWVsc2UgdC5fYnVzLnJlbW92ZVJlc3BvbnNlTGlzdGVuZXIoci5mcm9tLG8uaWQpLGUoby5ib2R5LnZhbHVlKTtlbHNlIG4oby5ib2R5LmRlc2MpfTt0Ll9idXMucG9zdE1lc3NhZ2UocixvLCExKX0pfX0se2tleTpcIm9uTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyPWV9fSx7a2V5Olwib25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uQ2xvc2U9ZX19LHtrZXk6XCJfY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPSgwLGEuZGVmYXVsdCkoe30sZSksaT1lLnJlc3VtZTtvLmNyZWF0ZWQ9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLG8ucnVudGltZT10Ll9ydW50aW1lVXJsO3ZhciBzPSgwLHAuZGVlcENsb25lKShvKTtkZWxldGUgcy5wMnAsZGVsZXRlIHMuc3RvcmUsZGVsZXRlIHMub2JzZXJ2ZXJzLGRlbGV0ZSBzLmlkZW50aXR5O3ZhciB1PXt0eXBlOlwiY3JlYXRlXCIsZnJvbTp0Ll9vd25lcix0bzp0Ll9zdWJVUkwsYm9keTp7cmVzdW1lOmksdmFsdWU6c319O3UuYm9keS5zY2hlbWE9by5zY2hlbWEsby5wMnAmJih1LmJvZHkucDJwPW8ucDJwKSxvLnN0b3JlJiYodS5ib2R5LnN0b3JlPW8uc3RvcmUpLG8uaWRlbnRpdHkmJih1LmJvZHkuaWRlbnRpdHk9by5pZGVudGl0eSksZy5sb2coXCJbc3luY2hlci5fY3JlYXRlXTogXCIsbyx1KSx0Ll9idXMucG9zdE1lc3NhZ2UodSxmdW5jdGlvbihpKXtpZihnLmxvZyhcIltzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZS1yZXNwb25zZTogXCIsaSksMjAwPT09aS5ib2R5LmNvZGUpe28udXJsPWkuYm9keS5yZXNvdXJjZSxvLnN0YXR1cz1cImxpdmVcIixvLnN5bmNoZXI9dCxvLmNoaWxkcmVucz1pLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXM7dmFyIGE9dC5fcmVwb3J0ZXJzW28udXJsXTthfHwoYT1uZXcgdi5kZWZhdWx0KG8pLHQuX3JlcG9ydGVyc1tvLnVybF09YSksYS5pbnZpdGVPYnNlcnZlcnMoZS5hdXRob3Jpc2UsZS5wMnApLHIoYSl9ZWxzZSBuKGkuYm9keS5kZXNjKX0pfSl9fSx7a2V5OlwiX3Jlc3VtZUNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9ZS5yZXN1bWUsYT17dHlwZTpcImNyZWF0ZVwiLGZyb206ci5fb3duZXIsdG86ci5fc3ViVVJMLGJvZHk6e3Jlc3VtZTppfX07Zy5sb2coXCJbc3luY2hlciAtIGNyZWF0ZV06IFwiLGUsYSksZSYmKGEuYm9keS52YWx1ZT1lLGUuaGFzT3duUHJvcGVydHkoXCJyZXBvcnRlclwiKT9hLmJvZHkudmFsdWUucmVwb3J0ZXI9ZS5yZXBvcnRlcjphLmJvZHkudmFsdWUucmVwb3J0ZXI9ci5fb3duZXIpLGUucDJwJiYoYS5ib2R5LnAycD1lLnAycCksZS5zdG9yZSYmKGEuYm9keS5zdG9yZT1lLnN0b3JlKSxlLm9ic2VydmVycyYmKGEuYm9keS5hdXRob3Jpc2U9ZS5vYnNlcnZlcnMpLGUuaWRlbnRpdHkmJihhLmJvZHkuaWRlbnRpdHk9ZS5pZGVudGl0eSksZy5sb2coXCJbc3luY2hlci5fcmVzdW1lQ3JlYXRlXSAtIHJlc3VtZSBtZXNzYWdlOiBcIixhKSxyLl9idXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihlKXtpZihnLmxvZyhcIltzeW5jaGVyLl9yZXN1bWVDcmVhdGVdIC0gY3JlYXRlLXJlc3VtZWQtcmVzcG9uc2U6IFwiLGUpLDIwMD09PWUuYm9keS5jb2RlKXt2YXIgaT1lLmJvZHkudmFsdWU7Zm9yKHZhciBhIGluIGkpe3ZhciBzPWlbYV07cy5kYXRhPSgwLHAuZGVlcENsb25lKShzLmRhdGEpfHx7fSxzLmNoaWxkcmVuT2JqZWN0cyYmKHMuY2hpbGRyZW5PYmplY3RzPSgwLHAuZGVlcENsb25lKShzLmNoaWxkcmVuT2JqZWN0cykpLHMubXV0dWFsPSExLHMucmVzdW1lPSEwLHMuc3RhdHVzPVwibGl2ZVwiLHMuc3luY2hlcj1yLGcubG9nKFwiW3N5bmNoZXIuX3Jlc3VtZUNyZWF0ZV0gLSBjcmVhdGUtcmVzdW1lZC1kYXRhT2JqZWN0UmVwb3J0ZXJcIixzKTt2YXIgdT1uZXcgdi5kZWZhdWx0KHMpO3MuY2hpbGRyZW5PYmplY3RzJiZ1LnJlc3VtZUNoaWxkcmVucyhzLmNoaWxkcmVuT2JqZWN0cyksci5fcmVwb3J0ZXJzW3MudXJsXT11fW4oci5fcmVwb3J0ZXJzKSx0Ll9vblJlcG9ydGVyc1Jlc3VtZSYmdC5fb25SZXBvcnRlcnNSZXN1bWUodC5fcmVwb3J0ZXJzKX1lbHNlIDQwND09PWUuYm9keS5jb2RlP24oe30pOm8oZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6XCJfc3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPXt0eXBlOlwic3Vic2NyaWJlXCIsZnJvbTp0Ll9vd25lcix0bzp0Ll9zdWJVUkwsYm9keTp7fX07ZSYmKGUuaGFzT3duUHJvcGVydHkoXCJwMnBcIikmJihvLmJvZHkucDJwPWUucDJwKSxlLmhhc093blByb3BlcnR5KFwic3RvcmVcIikmJihvLmJvZHkuc3RvcmU9ZS5zdG9yZSksZS5oYXNPd25Qcm9wZXJ0eShcInNjaGVtYVwiKSYmKG8uYm9keS5zY2hlbWE9ZS5zY2hlbWEpLGUuaGFzT3duUHJvcGVydHkoXCJpZGVudGl0eVwiKSYmKG8uYm9keS5pZGVudGl0eT1lLmlkZW50aXR5KSxlLmhhc093blByb3BlcnR5KFwicmVzb3VyY2VcIikmJihvLmJvZHkucmVzb3VyY2U9ZS5yZXNvdXJjZSksZS5oYXNPd25Qcm9wZXJ0eShcImRvbWFpbl9zdWJzY3JpcHRpb25cIikmJihvLmJvZHkuZG9tYWluX3N1YnNjcmlwdGlvbj1lLmRvbWFpbl9zdWJzY3JpcHRpb24pKSxvLmJvZHkucmVzdW1lPWUucmVzdW1lLGUuaGFzT3duUHJvcGVydHkoXCJtdXR1YWxcIikmJihvLmJvZHkubXV0dWFsPWUubXV0dWFsKSxnLmxvZyhcIltzeW5jaGVyX3N1YnNjcmliZV0gLSBzdWJzY3JpYmUgbWVzc2FnZTogXCIsZSxvKSx0Ll9idXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihvKXtnLmxvZyhcIltzeW5jaGVyXSAtIHN1YnNjcmliZS1yZXNwb25zZTogXCIsbyk7dmFyIGk9by5ib2R5LnJlc291cmNlLGE9dC5fcHJvdmlzaW9uYWxzW2ldO2lmKGRlbGV0ZSB0Ll9wcm92aXNpb25hbHNbaV0sYSYmYS5fcmVsZWFzZUxpc3RlbmVycygpLG8uYm9keS5jb2RlPDIwMClnLmxvZyhcIltzeW5jaGVyXSAtIG5ldyBEYXRhUHJvdmlzaW9uYWw6IFwiLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyxpKSxhPW5ldyBtLmRlZmF1bHQodC5fb3duZXIsaSx0Ll9idXMsby5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKSx0Ll9wcm92aXNpb25hbHNbaV09YTtlbHNlIGlmKDIwMD09PW8uYm9keS5jb2RlKXtnLmxvZyhcIltzeW5jaGVyXSAtIG5ldyBEYXRhIE9iamVjdCBPYnNlcnZlcjogXCIsbyx0Ll9wcm92aXNpb25hbHMpO3ZhciBzPW8uYm9keS52YWx1ZTtzLnN5bmNoZXI9dCxzLnAycD1lLnAycCxzLnN0b3JlPWUuc3RvcmUscy5pZGVudGl0eT1lLmlkZW50aXR5LHMucmVzdW1lPSExLHMubXV0dWFsPWUubXV0dWFsO3ZhciB1PXQuX29ic2VydmVyc1tpXTt1P3Uuc3luYygpOih1PW5ldyBfLmRlZmF1bHQocyksdC5fb2JzZXJ2ZXJzW2ldPXUpLGcubG9nKFwiW3N5bmNoZXJdIC0gbmV3IERhdGEgT2JqZWN0IE9ic2VydmVyIGFscmVhZHkgZXhpc3Q6IFwiLHUpLHIodSksYSYmYS5hcHBseSh1KX1lbHNlIG4oby5ib2R5LmRlc2MpfSl9KX19LHtrZXk6XCJfcmVzdW1lU3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT17dHlwZTpcInN1YnNjcmliZVwiLGZyb206ci5fb3duZXIsdG86ci5fc3ViVVJMLGJvZHk6e319O2UmJihlLmhhc093blByb3BlcnR5KFwicDJwXCIpJiYoaS5ib2R5LnAycD1lLnAycCksZS5oYXNPd25Qcm9wZXJ0eShcInN0b3JlXCIpJiYoaS5ib2R5LnN0b3JlPWUuc3RvcmUpLGUuaGFzT3duUHJvcGVydHkoXCJzY2hlbWFcIikmJihpLmJvZHkuc2NoZW1hPWUuc2NoZW1hKSxlLmhhc093blByb3BlcnR5KFwiaWRlbnRpdHlcIikmJihpLmJvZHkuaWRlbnRpdHk9ZS5pZGVudGl0eSksZS5oYXNPd25Qcm9wZXJ0eShcInJlc291cmNlXCIpJiYoaS5ib2R5LnJlc291cmNlPWUudXJsKSksaS5ib2R5LnJlc3VtZT1lLnJlc3VtZTt2YXIgYT1lLm11dHVhbDtlLmhhc093blByb3BlcnR5KFwibXV0dWFsXCIpJiYoaS5ib2R5Lm11dHVhbD1hKSxnLmxvZyhcIltzeW5jaGVyXSAtIHN1YnNjcmliZSBtZXNzYWdlOiBcIixlLGkpLHIuX2J1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKGUpe2cubG9nKFwiW3N5bmNoZXJdIC0gc3Vic2NyaWJlLXJlc3VtZWQtcmVzcG9uc2U6IFwiLGUpO3ZhciBpPWUuYm9keS5yZXNvdXJjZSxhPXIuX3Byb3Zpc2lvbmFsc1tpXTtpZihkZWxldGUgci5fcHJvdmlzaW9uYWxzW2ldLGEmJmEuX3JlbGVhc2VMaXN0ZW5lcnMoKSxlLmJvZHkuY29kZTwyMDApZy5sb2coXCJbc3luY2hlcl0gLSByZXN1bWUgbmV3IERhdGFQcm92aXNpb25hbDogXCIsZSxpKSxhPW5ldyBtLmRlZmF1bHQoci5fb3duZXIsaSxyLl9idXMsZS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKSxyLl9wcm92aXNpb25hbHNbaV09YTtlbHNlIGlmKDIwMD09PWUuYm9keS5jb2RlKXt2YXIgcz1lLmJvZHkudmFsdWU7Zm9yKHZhciB1IGluIHMpe3ZhciBjPXNbdV07Zy5sb2coXCJbc3luY2hlcl0gLSBSZXN1bWUgT2JqZWN0IE9ic2VydmVyOiBcIixlLGMsci5fcHJvdmlzaW9uYWxzKSxjLmNoaWxkcmVuT2JqZWN0cyYmKGMuY2hpbGRyZW5PYmplY3RzPSgwLHAuZGVlcENsb25lKShjLmNoaWxkcmVuT2JqZWN0cykpLGMuZGF0YT0oMCxwLmRlZXBDbG9uZSkoYy5kYXRhKXx8e30sYy5yZXN1bWU9ITAsYy5zeW5jaGVyPXIsZy5sb2coXCJbc3luY2hlci5fcmVzdW1lU3Vic2NyaWJlXSAtIGNyZWF0ZSBuZXcgZGF0YU9iamVjdDogXCIsYyk7dmFyIGw9bmV3IF8uZGVmYXVsdChjKTtjLmNoaWxkcmVuT2JqZWN0cyYmbC5yZXN1bWVDaGlsZHJlbnMoYy5jaGlsZHJlbk9iamVjdHMpLGcubG9nKFwiW3N5bmNoZXIuX3Jlc3VtZVN1YnNjcmliZV0gLSBuZXcgZGF0YU9iamVjdFwiLGwpLHIuX29ic2VydmVyc1tsLnVybF09bCxyLl9wcm92aXNpb25hbHNbbC51cmxdJiZyLl9wcm92aXNpb25hbHNbbC51cmxdLmFwcGx5KGwpfW4oci5fb2JzZXJ2ZXJzKSx0Ll9vbk9ic2VydmVyc1Jlc3VtZSYmdC5fb25PYnNlcnZlcnNSZXN1bWUoci5fb2JzZXJ2ZXJzKX1lbHNlIDQwND09PWUuYm9keS5jb2RlP24oe30pOm8oZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6XCJfb25Gb3J3YXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fcmVwb3J0ZXJzW2UuYm9keS50b10uX29uRm9yd2FyZChlKX19LHtrZXk6XCJfb25SZW1vdGVDcmVhdGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tLnNsaWNlKDAsLTEzKSxuPSgwLHAuZGl2aWRlVVJMKShyKSxvPW4uZG9tYWluLGk9e3R5cGU6ZS50eXBlLGZyb206ZS5ib2R5LnNvdXJjZSx1cmw6cixkb21haW46byxzY2hlbWE6ZS5ib2R5LnNjaGVtYSx2YWx1ZTplLmJvZHkudmFsdWUsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbj0yMDA7ciYmKG49ciksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoZy5pbmZvKFwiW1N5bmNoZXJdIE5PVElGSUNBVElPTi1FVkVOVDogXCIsaSksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGkpKX19LHtrZXk6XCJfb25SZW1vdGVEZWxldGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdLG89e2Zyb206dC5vd25lcix0bzp0Ll9zdWJVUkwsaWQ6ZS5pZCx0eXBlOlwidW5zdWJzY3JpYmVcIixib2R5OntyZXNvdXJjZTplLmJvZHkucmVzb3VyY2V9fTtpZih0Ll9idXMucG9zdE1lc3NhZ2UobyksZGVsZXRlIHQuX29ic2VydmVyc1tyXSxuKXt2YXIgaT17dHlwZTplLnR5cGUsdXJsOnIsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbz0yMDA7ciYmKG89ciksMjAwPT09byYmbi5kZWxldGUoKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYoZy5sb2coXCJOT1RJRklDQVRJT04tRVZFTlQ6IFwiLGkpLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihpKSl9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fSx7a2V5OlwiX29uRXhlY3V0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwfX07aWYoKGUuZnJvbT09PXQuX3J1bnRpbWVVcmwrXCIvcmVnaXN0cnkvXCJ8fGUuZnJvbT09PXQuX3J1bnRpbWVVcmwrXCIvcmVnaXN0cnlcIikmJmUuYm9keSYmZS5ib2R5Lm1ldGhvZCYmXCJjbG9zZVwiPT09ZS5ib2R5Lm1ldGhvZCYmdC5fb25DbG9zZSl7dmFyIG49e3R5cGU6XCJjbG9zZVwiLGFjazpmdW5jdGlvbihlKXtlJiYoci5ib2R5LmNvZGU9ZSksdC5fYnVzLnBvc3RNZXNzYWdlKHIpfX07Zy5pbmZvKFwiW1N5bmNoZXJdIENsb3NlLUVWRU5UOiBcIixuKSx0Ll9vbkNsb3NlKG4pfWVsc2UgdC5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleTpcIm9uUmVwb3J0ZXJzUmVzdW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXBvcnRlcnNSZXN1bWU9ZX19LHtrZXk6XCJvbk9ic2VydmVyc1Jlc3VtZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uT2JzZXJ2ZXJzUmVzdW1lPWV9fSx7a2V5Olwib3duZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXJ9fSx7a2V5OlwicmVwb3J0ZXJzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcG9ydGVyc319LHtrZXk6XCJvYnNlcnZlcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzfX1dKSxTeW5jaGVyfSgpO3QuZGVmYXVsdD1SLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDUzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDE3KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDQ0KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDExNCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDQpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMzYpLGg9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fSh2KSxfPXIoMTMyKSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksbT1yKDEzMyksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9cigzOSksTz1yKDE1NSksRD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KE8pLHc9aC5nZXRMb2dnZXIoXCJEYXRhT2JqZWN0XCIpLGo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBEYXRhT2JqZWN0KGUpe2Z1bmN0aW9uIHRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihlKXt0aHJvd1wiW0RhdGFPYmplY3RdIFwiK2UrXCIgbWFuZGF0b3J5IHBhcmFtZXRlciBpcyBtaXNzaW5nXCJ9KDAsZi5kZWZhdWx0KSh0aGlzLERhdGFPYmplY3QpO3ZhciB0PXRoaXM7ZS5zeW5jaGVyP3QuX3N5bmNoZXI9ZS5zeW5jaGVyOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInN5bmNoZXJcIiksZS51cmw/dC5fdXJsPWUudXJsOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInVybFwiKSxlLmNyZWF0ZWQ/dC5fY3JlYXRlZD1lLmNyZWF0ZWQ6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwiY3JlYXRlZFwiKSxlLnJlcG9ydGVyP3QuX3JlcG9ydGVyPWUucmVwb3J0ZXI6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwicmVwb3J0ZXJcIiksZS5ydW50aW1lP3QuX3J1bnRpbWU9ZS5ydW50aW1lOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInJ1bnRpbWVcIiksZS5zY2hlbWE/dC5fc2NoZW1hPWUuc2NoZW1hOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInNjaGVtYVwiKSxlLm5hbWU/dC5fbmFtZT1lLm5hbWU6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwibmFtZVwiKSx0Ll9zdGF0dXM9ZS5zdGF0dXMsZS5kYXRhP3QuX3N5bmNPYmo9bmV3IGIuZGVmYXVsdChlLmRhdGEpOnQuX3N5bmNPYmo9bmV3IGIuZGVmYXVsdCh7fSksdC5fY2hpbGRyZW5zPWUuY2hpbGRyZW5zLHQuX211dHVhbD1lLm11dHVhbCx0Ll92ZXJzaW9uPTAsdC5fY2hpbGRJZD0wLHQuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyLHQuX3Jlc3VtZWQ9ZS5yZXN1bWUsZS5yZXN1bWUmJih0Ll92ZXJzaW9uPWUudmVyc2lvbiksdC5fb3duZXI9ZS5zeW5jaGVyLl9vd25lcix0Ll9idXM9ZS5zeW5jaGVyLl9idXMsZS5kZXNjcmlwdGlvbiYmKHQuX2Rlc2NyaXB0aW9uPWUuZGVzY3JpcHRpb24pLGUudGFncyYmKHQuX3RhZ3M9ZS50YWdzKSxlLnJlc291cmNlcyYmKHQuX3Jlc291cmNlcz1lLnJlc291cmNlcyksZS5vYnNlcnZlclN0b3JhZ2UmJih0Ll9vYnNlcnZlclN0b3JhZ2U9ZS5vYnNlcnZlclN0b3JhZ2UpLGUucHVibGljT2JzZXJ2YXRpb24mJih0Ll9wdWJsaWNPYnNlcnZhdGlvbj1lLnB1YmxpY09ic2VydmF0aW9uKSx0Ll9tZXRhZGF0YT0oMCxsLmRlZmF1bHQpKGUpLCghZS5oYXNPd25Qcm9wZXJ0eShcInJlc3VtZVwiKXx8ZS5oYXNPd25Qcm9wZXJ0eShcInJlc3VtZVwiKSYmIWUucmVzdW1lKSYmKHQuX21ldGFkYXRhLmxhc3RNb2RpZmllZD10Ll9tZXRhZGF0YS5jcmVhdGVkKSxkZWxldGUgdC5fbWV0YWRhdGEuZGF0YSxkZWxldGUgdC5fbWV0YWRhdGEuc3luY2hlcixkZWxldGUgdC5fbWV0YWRhdGEuYXV0aG9yaXNlLHQuX2h5cGVydHlSZXNvdXJjZUZhY3Rvcnk9bmV3IEQuZGVmYXVsdCx0Ll9jaGlsZHJlbk9iamVjdHM9e30sdC5fc2hhcmVkQ2hpbGRzPVtdfXJldHVybigwLHkuZGVmYXVsdCkoRGF0YU9iamVjdCxbe2tleTpcIl9nZXRMYXN0Q2hpbGRJZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PTAscj1lLl9vd25lcitcIiNcIit0O3JldHVybigwLHUuZGVmYXVsdCkoZS5fY2hpbGRyZW5zKS5maWx0ZXIoZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5zW3RdLmNoaWxkSWQ+ciYmKHI9ZS5fY2hpbGRyZW5zW3RdLmNoaWxkSWQpfSksdD1OdW1iZXIoci5zcGxpdChcIiNcIilbMV0pfX0se2tleTpcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrXCIvY2hpbGRyZW4vXCI7dy5sb2coXCJbRGF0YSBPYmplY3QgLSBBbGxvY2F0ZUxpc3RlbmVyc10gLSBcIix0Ll9jaGlsZHJlbnMpLHQuX2NoaWxkcmVucyYmdC5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24obil7dmFyIG89cituLGk9dC5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24ocil7aWYoci5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKHcubG9nKFwiRGF0YU9iamVjdC1DaGlsZHJlbi1SQ1Y6IFwiLHIpLHIudHlwZSl7Y2FzZVwiY3JlYXRlXCI6dC5fb25DaGlsZENyZWF0ZShyKTticmVhaztjYXNlXCJkZWxldGVcIjp3LmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfX0pO3QuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KX19LHtrZXk6XCJfcmVsZWFzZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSwoMCx1LmRlZmF1bHQpKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbih0KXsoMCx1LmRlZmF1bHQpKGUuX2NoaWxkcmVuT2JqZWN0c1t0XSkuZm9yRWFjaChmdW5jdGlvbihyKXtlLl9jaGlsZHJlbk9iamVjdHNbdF1bcl0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfSl9fSx7a2V5OlwicmVzdW1lQ2hpbGRyZW5zXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMsbj10aGlzLl9vd25lcitcIiNcIit0aGlzLl9jaGlsZElkOygwLHUuZGVmYXVsdCkoZSkuZm9yRWFjaChmdW5jdGlvbihvKXt2YXIgaT1lW29dOygwLHUuZGVmYXVsdCkoaSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgYT0hMTtyLl9jaGlsZHJlbk9iamVjdHMuaGFzT3duUHJvcGVydHkobyl8fChyLl9jaGlsZHJlbk9iamVjdHNbb109e30pLGlbZV0udmFsdWUucmVzb3VyY2VUeXBlJiYhci5fY2hpbGRyZW5PYmplY3RzW29dLmhhc093blByb3BlcnR5KGUpPyhyLl9jaGlsZHJlbk9iamVjdHNbb11bZV09ci5fcmVzdW1lSHlwZXJ0eVJlc291cmNlKGlbZV0pLGE9ITApOnIuX2NoaWxkcmVuT2JqZWN0c1tvXS5oYXNPd25Qcm9wZXJ0eShlKXx8KHIuX2NoaWxkcmVuT2JqZWN0c1tvXVtlXT1yLl9yZXN1bWVDaGlsZChpW2VdKSx3LmxvZyhcIltEYXRhT2JqZWN0LnJlc3VtZUNoaWxkcmVuc10gbmV3IERhdGFPYmplY3RDaGlsZDogXCIsci5fY2hpbGRyZW5PYmplY3RzW29dW2VdKSxhPSEwKSxhJiZlPm4mJihuPWUsdy5sb2coXCJbRGF0YU9iamVjdFJlcG9ydGVyLnJlc3VtZUNoaWxkcmVuc10gLSByZXN1bWluZzogXCIsdC5fY2hpbGRyZW5PYmplY3RzW29dW2VdKSl9KX0pLHRoaXMuX2NoaWxkSWQ9TnVtYmVyKG4uc3BsaXQoXCIjXCIpWzFdKX19LHtrZXk6XCJfcmVzdW1lQ2hpbGRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS52YWx1ZTtyLnBhcmVudE9iamVjdD10LHIucGFyZW50PXQuX3VybDt2YXIgbj1uZXcgZy5kZWZhdWx0KHIpO24uaWRlbnRpdHk9ZS5pZGVudGl0eTt2YXIgbz17dHlwZTpcImNyZWF0ZVwiLGZyb206bi5yZXBvcnRlcix1cmw6bi5wYXJlbnQsdmFsdWU6bi5kYXRhLGNoaWxkSWQ6bi51cmwsaWRlbnRpdHk6bi5pZGVudGl0eSxjaGlsZDpufTtyZXR1cm4gbi5yZXNvdXJjZVR5cGUmJihvLnJlc291cmNlPW4pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiZ0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSxufX0se2tleTpcIl9yZXN1bWVIeXBlcnR5UmVzb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS52YWx1ZTtyLnBhcmVudE9iamVjdD10LHIucGFyZW50PXQuX3VybDt2YXIgbj10Ll9oeXBlcnR5UmVzb3VyY2VGYWN0b3J5LmNyZWF0ZUh5cGVydHlSZXNvdXJjZSghMSxyLnJlc291cmNlVHlwZSxyKTtuLmlkZW50aXR5PWUuaWRlbnRpdHk7dmFyIG89e3R5cGU6XCJjcmVhdGVcIixmcm9tOm4ucmVwb3J0ZXIsdXJsOm4ucGFyZW50LHZhbHVlOm4uZGF0YSxjaGlsZElkOm4udXJsLGlkZW50aXR5Om4uaWRlbnRpdHksY2hpbGQ6bn07cmV0dXJuIG4ucmVzb3VyY2VUeXBlJiYoby5yZXNvdXJjZT1uKSx0Ll9vbkFkZENoaWxkcmVuSGFuZGxlciYmdC5fb25BZGRDaGlsZHJlbkhhbmRsZXIobyksbn19LHtrZXk6XCJwYXVzZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3dcIk5vdCBpbXBsZW1lbnRlZFwifX0se2tleTpcInJlc3VtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3dcIk5vdCBpbXBsZW1lbnRlZFwifX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe3Rocm93XCJOb3QgaW1wbGVtZW50ZWRcIn19LHtrZXk6XCJhZGRDaGlsZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXMsaT12b2lkIDA7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oYSl7dmFyIHM9by5fdXJsK1wiL2NoaWxkcmVuL1wiK2UsdT1vLl9nZXRDaGlsZElucHV0KG4pO3UuZGF0YT10LHUuY2hpbGRyZW49ZSxpPW5ldyBnLmRlZmF1bHQodSksciYmKGkuaWRlbnRpdHk9ciksaS5zaGFyZSgpLHcubG9nKFwiW0RhdGFPYmplY3QuYWRkQ2hpbGRdIGFkZGVkIFwiLGkpLGkub25DaGFuZ2UoZnVuY3Rpb24oZSl7by5fb25DaGFuZ2UoZSx7cGF0aDpzLGNoaWxkSWQ6dS51cmx9KX0pLG8uX2NoaWxkcmVuT2JqZWN0cy5oYXNPd25Qcm9wZXJ0eShlKXx8KG8uX2NoaWxkcmVuT2JqZWN0c1tlXT17fSksby5fY2hpbGRyZW5PYmplY3RzW2VdW3UudXJsXT1pLGEoaSl9KX19LHtrZXk6XCJfZGVsZXRlQ2hpbGRyZW5zXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9W107cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocil7aWYoZS5jaGlsZHJlbnMpe3cubG9nKFwiW0RhdGFPYmplY3QuZGVsZXRlQ2hpbGRyZW5zXVwiLGUuY2hpbGRyZW5zKTt2YXIgbj12b2lkIDA7Zm9yKG4gaW4gZS5jaGlsZHJlbnMpe3ZhciBvPXZvaWQgMDtmb3IobyBpbiBlLmNoaWxkcmVuc1tuXSl7dmFyIGk9ZS5jaGlsZHJlbnNbbl1bb107dy5sb2coXCJbRGF0YU9iamVjdC5fZGVsZXRlQ2hpbGRyZW5zXSBjaGlsZFwiLGkpLGkubWV0YWRhdGEuaGFzT3duUHJvcGVydHkoXCJyZXNvdXJjZVR5cGVcIikmJnQucHVzaChlLmNoaWxkcmVuc1tuXVtvXS5kZWxldGUoKSl9fX13LmxvZyhcIltEYXRhT2JqZWN0Ll9kZWxldGVDaGlsZHJlbnNdIHByb21pc2VzIFwiLHQpLHQubGVuZ3RoPjA/YS5kZWZhdWx0LmFsbCh0KS50aGVuKGZ1bmN0aW9uKCl7cihcIltEYXRhT2JqZWN0Ll9kZWxldGVDaGlsZHJlbnNdIGRvbmVcIil9KTpyKFwiW0RhdGFPYmplY3QuX2RlbGV0ZUNoaWxkcmVuc10gbm90aGluZyB0byBkZWxldGVcIil9KX19LHtrZXk6XCJfZ2V0Q2hpbGRJbnB1dFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxsLmRlZmF1bHQpKHt9LGUpO3JldHVybiB0Ll9jaGlsZElkKyssci51cmw9dC5fb3duZXIrXCIjXCIrdC5fY2hpbGRJZCxyLnBhcmVudE9iamVjdD10LHIucmVwb3J0ZXI9dC5fb3duZXIsci5jcmVhdGVkPShuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSxyLnJ1bnRpbWU9dC5fc3luY2hlci5fcnVudGltZVVybCxyLnAycEhhbmRsZXI9dC5fc3luY2hlci5fcDJwSGFuZGxlcixyLnAycFJlcXVlc3Rlcj10Ll9zeW5jaGVyLl9wMnBSZXF1ZXN0ZXIsci5zY2hlbWE9dC5fc2NoZW1hLHIucGFyZW50PXQudXJsLHJ9fSx7a2V5OlwiYWRkSHlwZXJ0eVJlc291cmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaT10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKGEpe3ZhciBzPXZvaWQgMCx1PWkuX3VybCtcIi9jaGlsZHJlbi9cIitlLGM9aS5fZ2V0Q2hpbGRJbnB1dChvKTtjLmNoaWxkcmVuPWUsaS5faHlwZXJ0eVJlc291cmNlRmFjdG9yeS5jcmVhdGVIeXBlcnR5UmVzb3VyY2VXaXRoQ29udGVudCghMCx0LHIsYykudGhlbihmdW5jdGlvbih0KXtzPXQsbiYmKHMuaWRlbnRpdHk9bikscy5zaGFyZSgpLHcubG9nKFwiW0RhdGFPYmplY3QuYWRkSHlwZXJ0eVJlc291cmNlXSBhZGRlZCBcIixzKSxzLm9uQ2hhbmdlKGZ1bmN0aW9uKGUpe2kuX29uQ2hhbmdlKGUse3BhdGg6dSxjaGlsZElkOnMuY2hpbGRJZH0pfSksaS5fY2hpbGRyZW5PYmplY3RzLmhhc093blByb3BlcnR5KGUpfHwoaS5fY2hpbGRyZW5PYmplY3RzW2VdPXt9KSxpLl9jaGlsZHJlbk9iamVjdHNbZV1bcy5jaGlsZElkXT1zLGEocyl9KX0pfX0se2tleTpcIm9uQWRkQ2hpbGRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcj1lfX0se2tleTpcIl9vbkNoaWxkQ3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt3LmxvZyhcIltEYXRhT2JqZWN0Ll9vbkNoaWxkQ3JlYXRlXSByZWNlaXZlZEJ5IFwiK3QuX293bmVyK1wiIDogXCIsZSk7dmFyIHI9e2Zyb206ZS50byx0bzplLmZyb20sdHlwZTpcInJlc3BvbnNlXCIsaWQ6ZS5pZCxib2R5Ontjb2RlOjEwMH19O3QuX2J1cy5wb3N0TWVzc2FnZShyKSxlLmJvZHkudmFsdWUucmVzb3VyY2VUeXBlP3QuX29uSHlwZXJ0eVJlc291cmNlQWRkZWQoZSk6dC5fb25DaGlsZEFkZGVkKGUpfX0se2tleTpcIl9vbkNoaWxkQWRkZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsUi5kZWVwQ2xvbmUpKGUuYm9keS52YWx1ZSk7ci5wYXJlbnRPYmplY3Q9dDt2YXIgbj1yLmNoaWxkcmVuLG89bmV3IGcuZGVmYXVsdChyKTtvLmlkZW50aXR5PWUuYm9keS5pZGVudGl0eSx0Ll9jaGlsZHJlbk9iamVjdHMuaGFzT3duUHJvcGVydHkobil8fCh0Ll9jaGlsZHJlbk9iamVjdHNbbl09e30pLHQuX2NoaWxkcmVuT2JqZWN0c1tuXVtyLnVybF09byxlLnRvPT09dC5tZXRhZGF0YS51cmwmJm8uc3RvcmUoKSx0Ll9oeXBlcnR5RXZ0KGUsbyl9fSx7a2V5OlwiX29uSHlwZXJ0eVJlc291cmNlQWRkZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnZhbHVlLG49dm9pZCAwLG89ci5jaGlsZHJlbjtyLnBhcmVudE9iamVjdD10LG49dC5faHlwZXJ0eVJlc291cmNlRmFjdG9yeS5jcmVhdGVIeXBlcnR5UmVzb3VyY2UoITEsci5yZXNvdXJjZVR5cGUsciksbi5pZGVudGl0eT1lLmJvZHkuaWRlbnRpdHksdC5fY2hpbGRyZW5PYmplY3RzLmhhc093blByb3BlcnR5KG8pfHwodC5fY2hpbGRyZW5PYmplY3RzW29dPXt9KSx0Ll9jaGlsZHJlbk9iamVjdHNbb11bbi5jaGlsZElkXT1uLHQuX2h5cGVydHlFdnQoZSxuKSxlLnRvPT09dC5tZXRhZGF0YS51cmwmJm4uc3RvcmUoKX19LHtrZXk6XCJfaHlwZXJ0eUV2dFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx1cmw6ZS50byx2YWx1ZTp0LmRhdGEsY2hpbGRJZDp0LnVybCxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksY2hpbGQ6dH07dC5yZXNvdXJjZVR5cGUmJihuLnJlc291cmNlPXQpLHIuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiZyLl9vbkFkZENoaWxkcmVuSGFuZGxlcihuKX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fbWV0YWRhdGEubGFzdE1vZGlmaWVkPShuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSxyLl92ZXJzaW9uKyssXCJsaXZlXCI9PT1yLl9zdGF0dXMpe3ZhciBuPXt0eXBlOlwidXBkYXRlXCIsZnJvbTpyLl91cmwsdG86ci5fdXJsK1wiL2NoYW5nZXNcIixib2R5Ont2ZXJzaW9uOnIuX3ZlcnNpb24sc291cmNlOnIuX293bmVyLGF0dHJpYnV0ZTplLmZpZWxkLGxhc3RNb2RpZmllZDpyLl9tZXRhZGF0YS5sYXN0TW9kaWZpZWR9fTt3LmxvZyhcIltEYXRhT2JqZWN0IC0gX29uQ2hhbmdlXSAtIFwiLGUsdCxuKSxlLm9UeXBlPT09Xy5PYmplY3RUeXBlLk9CSkVDVD9lLmNUeXBlIT09Xy5DaGFuZ2VUeXBlLlJFTU9WRSYmKG4uYm9keS52YWx1ZT0oMCxSLmRlZXBDbG9uZSkoZS5kYXRhKSk6KG4uYm9keS5hdHRyaWJ1dGVUeXBlPWUub1R5cGUsbi5ib2R5LnZhbHVlPWUuZGF0YSxlLmNUeXBlIT09Xy5DaGFuZ2VUeXBlLlVQREFURSYmKG4uYm9keS5vcGVyYXRpb249ZS5jVHlwZSkpLHQmJihuLnRvPXQucGF0aCxuLmJvZHkucmVzb3VyY2U9dC5jaGlsZElkKSxyLmRhdGEuX211dHVhbHx8KG4uYm9keS5tdXR1YWw9ci5fbXV0dWFsKSxyLl9idXMucG9zdE1lc3NhZ2Uobil9fX0se2tleTpcIl9jaGFuZ2VPYmplY3RcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoci5fdmVyc2lvbisxPD10LmJvZHkudmVyc2lvbil7ci5fdmVyc2lvbj10LmJvZHkudmVyc2lvbjt2YXIgbj10LmJvZHkuYXR0cmlidXRlLGk9dm9pZCAwO2k9XCJvYmplY3RcIj09PSgwLG8uZGVmYXVsdCkodC5ib2R5LnZhbHVlKT8oMCxSLmRlZXBDbG9uZSkodC5ib2R5LnZhbHVlKTp0LmJvZHkudmFsdWU7dmFyIGE9ZS5maW5kQmVmb3JlKG4pO2lmKHQuYm9keS5sYXN0TW9kaWZpZWQ/ci5fbWV0YWRhdGEubGFzdE1vZGlmaWVkPXQuYm9keS5sYXN0TW9kaWZpZWQ6ci5fbWV0YWRhdGEubGFzdE1vZGlmaWVkPShuZXcgRGF0ZSkudG9JU09TdHJpbmcoKSx0LmJvZHkuYXR0cmlidXRlVHlwZT09PV8uT2JqZWN0VHlwZS5BUlJBWSlpZih0LmJvZHkub3BlcmF0aW9uPT09Xy5DaGFuZ2VUeXBlLkFERCl7dmFyIHM9YS5vYmosdT1hLmxhc3Q7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShzLFt1LDBdLmNvbmNhdChpKSl9ZWxzZSBpZih0LmJvZHkub3BlcmF0aW9uPT09Xy5DaGFuZ2VUeXBlLlJFTU9WRSl7dmFyIGM9YS5vYmosbD1hLmxhc3Q7Yy5zcGxpY2UobCxpKX1lbHNlIGEub2JqW2EubGFzdF09aTtlbHNlIHQuYm9keS5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpP2Eub2JqW2EubGFzdF09aTpkZWxldGUgYS5vYmpbYS5sYXN0XX1lbHNlIHcubG9nKFwiVU5TWU5DSFJPTklaRUQgVkVSU0lPTjogKGRhdGEgPT4gXCIrci5fdmVyc2lvbitcIiwgbXNnID0+IFwiK3QuYm9keS52ZXJzaW9uK1wiKVwiKX19LHtrZXk6XCJfY2hhbmdlQ2hpbGRyZW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsUi5kaXZpZGVVUkwpKGUudG8pLG49ci5pZGVudGl0eSxvPW4/bi5zdWJzdHJpbmcobi5sYXN0SW5kZXhPZihcIi9cIikrMSk6dm9pZCAwLGk9ZS5ib2R5LnJlc291cmNlLGE9dC5fY2hpbGRyZW5PYmplY3RzW29dW2ldO3cubG9nKFwiQ2hhbmdlIGNoaWxkcmVuOiBcIix0Ll9vd25lcixlLG8pLGE/dC5fY2hhbmdlT2JqZWN0KGEuX3N5bmNPYmosZSk6dy53YXJuKFwiTm8gY2hpbGRyZW4gZm91bmQgZm9yOiBcIixpKX19LHtrZXk6XCJtZXRhZGF0YVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhZGF0YX19LHtrZXk6XCJ1cmxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX0se2tleTpcInNjaGVtYVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWF9fSx7a2V5Olwic3RhdHVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXR1c319LHtrZXk6XCJkYXRhXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19LHtrZXk6XCJjaGlsZHJlbnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzfX1dKSxEYXRhT2JqZWN0fSgpO3QuZGVmYXVsdD1qLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lk9iamVjdFR5cGU9dC5DaGFuZ2VUeXBlPXZvaWQgMDt2YXIgbj1yKDMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpO3IoMTU0KTt2YXIgcz1yKDM5KSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU3luY09iamVjdChlKXsoMCxvLmRlZmF1bHQpKHRoaXMsU3luY09iamVjdCk7dmFyIHQ9dGhpczt0Ll9vYnNlcnZlcnM9W10sdC5fZmlsdGVycz17fSx0aGlzLl9kYXRhPWV8fHt9LHRoaXMuX2ludGVybmFsT2JzZXJ2ZSh0aGlzLl9kYXRhKX1yZXR1cm4oMCxhLmRlZmF1bHQpKFN5bmNPYmplY3QsW3trZXk6XCJvYnNlcnZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goZSl9fSx7a2V5OlwiZmluZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSgwLHMucGFyc2VBdHRyaWJ1dGVzKShlKTtyZXR1cm4gdGhpcy5fZmluZFdpdGhTcGxpdCh0KX19LHtrZXk6XCJmaW5kQmVmb3JlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9e30scj0oMCxzLnBhcnNlQXR0cmlidXRlcykoZSk7cmV0dXJuIHQubGFzdD1yLnBvcCgpLHQub2JqPXRoaXMuX2ZpbmRXaXRoU3BsaXQociksdH19LHtrZXk6XCJfZmluZFdpdGhTcGxpdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGE7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt0PXRbZV19KSx0fX0se2tleTpcIl9pbnRlcm5hbE9ic2VydmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZnVuY3Rpb24oZSl7ZS5ldmVyeShmdW5jdGlvbihlKXt0Ll9vbkNoYW5nZXMoZSl9KX07dGhpcy5fZGF0YT1PYmplY3QuZGVlcE9ic2VydmUoZSxyKX19LHtrZXk6XCJfZmlyZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfX0se2tleTpcIl9vbkNoYW5nZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm9iamVjdCxyPXZvaWQgMDt0LmNvbnN0cnVjdG9yPT09T2JqZWN0JiYocj1sLk9CSkVDVCksdC5jb25zdHJ1Y3Rvcj09PUFycmF5JiYocj1sLkFSUkFZKTt2YXIgbj1lLmtleXBhdGgsbz10W2UubmFtZV07XCJ1cGRhdGVcIiE9PWUudHlwZXx8bi5pbmNsdWRlcyhcIi5sZW5ndGhcIil8fHRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yy5VUERBVEUsb1R5cGU6cixmaWVsZDpuLGRhdGE6b30pLFwiYWRkXCI9PT1lLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yy5BREQsb1R5cGU6cixmaWVsZDpuLGRhdGE6b30pLFwiZGVsZXRlXCI9PT1lLnR5cGUmJnRoaXMuX2ZpcmVFdmVudCh7Y1R5cGU6Yy5SRU1PVkUsb1R5cGU6cixmaWVsZDpufSl9fSx7a2V5OlwiZGF0YVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhfX1dKSxTeW5jT2JqZWN0fSgpLGM9dC5DaGFuZ2VUeXBlPXtVUERBVEU6XCJ1cGRhdGVcIixBREQ6XCJhZGRcIixSRU1PVkU6XCJyZW1vdmVcIn0sbD10Lk9iamVjdFR5cGU9e09CSkVDVDpcIm9iamVjdFwiLEFSUkFZOlwiYXJyYXlcIn07dC5kZWZhdWx0PXV9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE3KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzNiksbD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGQ9cigxMzIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMzkpLHk9bC5nZXRMb2dnZXIoXCJEYXRhT2JqZWN0Q2hpbGRcIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIERhdGFPYmplY3RDaGlsZChlKXtmdW5jdGlvbiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoZSl7dGhyb3dcIltEYXRhT2JqZWN0Q2hpbGRdIFwiK2UrXCIgbWFuZGF0b3J5IHBhcmFtZXRlciBpcyBtaXNzaW5nXCJ9KDAsYS5kZWZhdWx0KSh0aGlzLERhdGFPYmplY3RDaGlsZCk7dmFyIHQ9dGhpcztlLnBhcmVudD90Ll9wYXJlbnQ9ZS5wYXJlbnQ6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwicGFyZW50XCIpLGUudXJsP3QuX3VybD1lLnVybDp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJ1cmxcIiksZS5jcmVhdGVkP3QuX2NyZWF0ZWQ9ZS5jcmVhdGVkOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcImNyZWF0ZWRcIiksZS5yZXBvcnRlcj90Ll9yZXBvcnRlcj1lLnJlcG9ydGVyOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInJlcG9ydGVyXCIpLGUucnVudGltZT90Ll9ydW50aW1lPWUucnVudGltZTp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJydW50aW1lXCIpLGUuc2NoZW1hP3QuX3NjaGVtYT1lLnNjaGVtYTp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJzY2hlbWFcIiksZS5wYXJlbnRPYmplY3Q/dC5fcGFyZW50T2JqZWN0PWUucGFyZW50T2JqZWN0OnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInBhcmVudE9iamVjdFwiKSxlLm5hbWUmJih0Ll9uYW1lPWUubmFtZSksZS5kZXNjcmlwdGlvbiYmKHQuX2Rlc2NyaXB0aW9uPWUuZGVzY3JpcHRpb24pLGUudGFncyYmKHQuX3RhZ3M9ZS50YWdzKSxlLnJlc291cmNlcyYmKHQuX3Jlc291cmNlcz1lLnJlc291cmNlcyksZS5vYnNlcnZlclN0b3JhZ2UmJih0Ll9vYnNlcnZlclN0b3JhZ2U9ZS5vYnNlcnZlclN0b3JhZ2UpLGUucHVibGljT2JzZXJ2YXRpb24mJih0Ll9wdWJsaWNPYnNlcnZhdGlvbj1lLnB1YmxpY09ic2VydmF0aW9uKSx0Ll9jaGlsZElkPWUudXJsLGUuZGF0YT90Ll9zeW5jT2JqPW5ldyBmLmRlZmF1bHQoZS5kYXRhKTp0Ll9zeW5jT2JqPW5ldyBmLmRlZmF1bHQoe30pLHkubG9nKFwiW0RhdGFPYmplY3RDaGlsZCAtICBDb25zdHJ1Y3Rvcl0gLSBcIix0Ll9zeW5jT2JqKSx0Ll9idXM9dC5fcGFyZW50T2JqZWN0Ll9idXMsdC5fb3duZXI9dC5fcGFyZW50T2JqZWN0Ll9vd25lcix0Ll9hbGxvY2F0ZUxpc3RlbmVycygpLHQuX21ldGFkYXRhPWUsZGVsZXRlIHQuX21ldGFkYXRhLnBhcmVudE9iamVjdCx0Ll9zaGFyaW5nU3RhdHVzPSExfXJldHVybigwLHUuZGVmYXVsdCkoRGF0YU9iamVjdENoaWxkLFt7a2V5Olwic2hhcmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX3NoYXJpbmdTdGF0dXM9bmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPXZvaWQgMDtvPWU/dC5tZXRhZGF0YS5wYXJlbnQ6dC5tZXRhZGF0YS5wYXJlbnQrXCIvY2hpbGRyZW4vXCIrdC5tZXRhZGF0YS5jaGlsZHJlbjt2YXIgaT10Lm1ldGFkYXRhO2kuZGF0YT10LmRhdGE7dmFyIGE9e3R5cGU6XCJjcmVhdGVcIixmcm9tOnQubWV0YWRhdGEucmVwb3J0ZXIsdG86byxib2R5OntyZXNvdXJjZTppLnVybCx2YWx1ZTppfX07aWYodC5pZGVudGl0eSYmKGEuYm9keS5pZGVudGl0eT10LmlkZW50aXR5KSx0Ll9wYXJlbnRPYmplY3QuZGF0YS5oYXNPd25Qcm9wZXJ0eShcIm11dHVhbFwiKSYmKGEuYm9keS5tdXR1YWw9dC5fcGFyZW50T2JqZWN0LmRhdGEubXV0dWFsKSx0Ll9wYXJlbnRPYmplY3QubWV0YWRhdGEucmVwb3J0ZXI9PT10Lm1ldGFkYXRhLnJlcG9ydGVyKXJldHVybiB0Ll9idXMucG9zdE1lc3NhZ2UoKDAscC5kZWVwQ2xvbmUpKGEpKSxyKCk7dmFyIHM9ZnVuY3Rpb24oZSl7aWYoZS50bz09PXQuX3JlcG9ydGVyKXt0Ll9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihhLmZyb20sZS5pZCkseS5sb2coXCJbU3luY2hlci5EYXRhT2JqZWN0Q2hpbGQuc2hhcmVdIFBhcmVudCByZXBvcnRlciByZXBseSBcIixlKTt2YXIgbz17Y29kZTplLmJvZHkmJmUuYm9keS5jb2RlP2UuYm9keS5jb2RlOjUwMCxkZXNjOmUuYm9keSYmZS5ib2R5LmRlc2M/ZS5ib2R5LmRlc2M6XCJVbmtub3duXCJ9O3JldHVybiBlLmJvZHkuY29kZTwzMDA/cihvKTpuKG8pfX0sdT10Ll9idXMucG9zdE1lc3NhZ2UoKDAscC5kZWVwQ2xvbmUpKGEpLHMsITEpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gdC5fYnVzLnJlbW92ZVJlc3BvbnNlTGlzdGVuZXIoYS5mcm9tLHUpLG4oe2NvZGU6NDA4LGRlc2M6XCJ0aW1vdXRcIn0pfSwzZTMpfSl9fSx7a2V5Olwic3RvcmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17fSxyPWUubWV0YWRhdGEuY2hpbGRyZW4rXCIuXCIrZS5tZXRhZGF0YS51cmw7dC52YWx1ZT1lLm1ldGFkYXRhLHQuaWRlbnRpdHk9ZS5pZGVudGl0eTt2YXIgbj17ZnJvbTplLm1ldGFkYXRhLnJlcG9ydGVyLHRvOmUuX3BhcmVudE9iamVjdC5fc3luY2hlci5fc3ViVVJMLHR5cGU6XCJjcmVhdGVcIixib2R5OntyZXNvdXJjZTplLm1ldGFkYXRhLnBhcmVudCxhdHRyaWJ1dGU6cix2YWx1ZTp0fX07eS5sb2coXCJbRGF0YU9iamVjdENoaWxkLnN0b3JlXTpcIixuKSxlLl9idXMucG9zdE1lc3NhZ2Uobil9fSx7a2V5OlwiX2FsbG9jYXRlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3JlcG9ydGVyPT09ZS5fb3duZXImJihlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fcmVwb3J0ZXIsZnVuY3Rpb24odCl7XCJyZXNwb25zZVwiPT09dC50eXBlJiZ0LmlkPT09ZS5fbXNnSWQmJih5LmxvZyhcIkRhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOlwiLHQpLGUuX29uUmVzcG9uc2UodCkpfSkpfX0se2tleTpcIl9yZWxlYXNlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2xpc3RlbmVyJiZlLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6XCJkZWxldGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKX19LHtrZXk6XCJvbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbih0KXt5LmxvZyhcIltEYXRhT2JqZWN0Q2hpbGQgLSBvYnNlcnZlcl0gLSBcIix0KSxlKHQpfSl9fSx7a2V5Olwib25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5OlwiX29uUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmJvZHkuc291cmNlLGNvZGU6ZS5ib2R5LmNvZGV9O3QuX29uUmVzcG9uc2VIYW5kbGVyJiZ0Ll9vblJlc3BvbnNlSGFuZGxlcihyKX19LHtrZXk6XCJzaGFyZWFibGVcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1ldGFkYXRhO3JldHVybiBlLmRhdGE9dGhpcy5kYXRhLGV9fSx7a2V5OlwibWV0YWRhdGFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGF9fSx7a2V5OlwiY2hpbGRJZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZElkfX0se2tleTpcInNoYXJpbmdTdGF0dXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcmluZ1N0YXR1c319LHtrZXk6XCJkYXRhXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YX19LHtrZXk6XCJpZGVudGl0eVwiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9pZGVudGl0eT1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWRlbnRpdHl9fV0pLERhdGFPYmplY3RDaGlsZH0oKTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMzkpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBJZGVudGl0eU1hbmFnZXIoZSx0LHIpeygwLGEuZGVmYXVsdCkodGhpcyxJZGVudGl0eU1hbmFnZXIpO3ZhciBuPXRoaXM7bi5tZXNzYWdlQnVzPXIsbi5kb21haW49KDAsYy5kaXZpZGVVUkwpKGUpLmRvbWFpbixuLm93bmVyPWUsbi5ydW50aW1lVVJMPXR9cmV0dXJuKDAsdS5kZWZhdWx0KShJZGVudGl0eU1hbmFnZXIsW3trZXk6XCJkaXNjb3ZlclVzZXJSZWdpc3RlcmVkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9dm9pZCAwLGE9ZXx8XCIuXCI7aT10fHxyLm93bmVyO3ZhciBzPXt0eXBlOlwicmVhZFwiLGZyb206aSx0bzpyLnJ1bnRpbWVVUkwrXCIvcmVnaXN0cnkvXCIsYm9keTp7cmVzb3VyY2U6YSxjcml0ZXJpYTppfX07ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5LnJlc291cmNlO3QmJjIwMD09PWUuYm9keS5jb2RlP24odCk6byhcImNvZGU6IFwiK2UuYm9keS5jb2RlK1wiIE5vIHVzZXIgd2FzIGZvdW5kXCIpfSl9KX19LHtrZXk6XCJkaXNjb3ZlcklkZW50aXR5UGVySWRQXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPXt0eXBlOlwicmVhZFwiLGZyb206dGhpcy5vd25lcix0bzp0LnJ1bnRpbWVVUkwrXCIvaWRtXCIsYm9keTp7cmVzb3VyY2U6ZSxjcml0ZXJpYTpcImlkcFwifX07dC5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24oZSl7MjAwPT09ZS5ib2R5LmNvZGU/cihlLmJvZHkudmFsdWUpOm4oZS5ib2R5LmNvZGUrXCIgXCIrZS5ib2R5LmRlc2MpfSl9KX19XSksSWRlbnRpdHlNYW5hZ2VyfSgpO3QuZGVmYXVsdD1sLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE3KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzNiksbD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGQ9cigzOSksZj1yKDE2MikscD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGYpLHk9bC5nZXRMb2dnZXIoXCJEaXNjb3ZlcnlcIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIERpc2NvdmVyeShlLHQscil7KDAsYS5kZWZhdWx0KSh0aGlzLERpc2NvdmVyeSk7dmFyIG49dGhpcztuLm1lc3NhZ2VCdXM9cixuLnJ1bnRpbWVVUkw9dCxuLmRvbWFpbj0oMCxkLmRpdmlkZVVSTCkoZSkuZG9tYWluLG4uZGlzY292ZXJ5VVJMPWV9cmV0dXJuKDAsdS5kZWZhdWx0KShEaXNjb3ZlcnksW3trZXk6XCJfaXNMZWdhY3lVc2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuISghZS5pbmNsdWRlcyhcIjpcIil8fGUuaW5jbHVkZXMoXCJ1c2VyOi8vXCIpKX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXJQcm9maWxlRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9W10sYT17dHlwZTpcInJlYWRcIixmcm9tOm4uZGlzY292ZXJ5VVJMLHRvOm4ucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvaHlwZXJ0eS91c2VycHJvZmlsZS9cIitlfX07cmV0dXJuKHR8fHIpJiYoYS5ib2R5LmNyaXRlcmlhPXtyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0fSksbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe24uX2lzTGVnYWN5VXNlcihlKT90KFt7aHlwZXJ0eUlEOmUsc3RhdHVzOlwibGl2ZVwifV0pOm4ubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyhyLmJvZHkudmFsdWUubWFwKGZ1bmN0aW9uKGUpe2UuaHlwZXJ0eUlEIT1uLmRpc2NvdmVyeVVSTCYmaS5wdXNoKGUpfSksMD09PWkubGVuZ3RoP3QoW10pOih5LmxvZyhcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGFdIFJlcGx5IGxvZzogXCIsaSksdChpKSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlclByb2ZpbGVEYXRhXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXJQcm9maWxlRGF0YURPXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtuLmRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlclByb2ZpbGVEYXRhLmFwcGx5KG4saSkudGhlbihmdW5jdGlvbih0KXtlKG4uX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNQZXJVc2VyUHJvZmlsZURhdGFcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPXt0eXBlOlwicmVhZFwiLGZyb206bi5kaXNjb3ZlcnlVUkwsdG86bi5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L3VzZXJwcm9maWxlL1wiK2V9fTtyZXR1cm4odHx8cikmJihpLmJvZHkuY3JpdGVyaWE9e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnR9KSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7bi5faXNMZWdhY3lVc2VyKGUpP3QoW3toeXBlcnR5SUQ6ZSxzdGF0dXM6XCJsaXZlXCJ9XSk6bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24ocil7MjAwPT09ci5ib2R5LmNvZGU/KHkubG9nKFwiUmVwbHkgbG9nOiBcIixyLmJvZHkudmFsdWUpLHQoci5ib2R5LnZhbHVlKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YV0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YURPXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtuLmRpc2NvdmVyRGF0YU9iamVjdHNQZXJVc2VyUHJvZmlsZURhdGEuYXBwbHkobixpKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKG4uX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0aWVzUGVyR1VJRFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9W10sYT17dHlwZTpcInJlYWRcIixmcm9tOm4uZGlzY292ZXJ5VVJMLHRvOm4ucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvaHlwZXJ0eS9ndWlkL1wiK2V9fTtyZXR1cm4odHx8cikmJihhLmJvZHkuY3JpdGVyaWE9e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnR9KSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24obyl7MjAwPT09by5ib2R5LmNvZGU/KG8uYm9keS52YWx1ZS5tYXAoZnVuY3Rpb24oZSl7ZS5oeXBlcnR5SUQhPW4uZGlzY292ZXJ5VVJMJiZpLnB1c2goZSl9KSwwPT09aS5sZW5ndGg/cihcIk5vIEh5cGVydHkgd2FzIGZvdW5kXCIpOih5LmxvZyhcIlJlcGx5IGxvZzogXCIsaSksdChpKSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzUGVyR1VJRF0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixvLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlERE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe24uZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlELmFwcGx5KG4saSkudGhlbihmdW5jdGlvbih0KXtlKG4uX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNQZXJHVUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT17dHlwZTpcInJlYWRcIixmcm9tOm4uZGlzY292ZXJ5VVJMLHRvOm4ucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvZGF0YU9iamVjdC9ndWlkL1wiK2V9fTtyZXR1cm4odHx8cikmJihpLmJvZHkuY3JpdGVyaWE9e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnR9KSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24ocil7MjAwPT09ci5ib2R5LmNvZGU/KHkubG9nKFwiUmVwbHkgbG9nOiBcIixyLmJvZHkudmFsdWUpLHQoci5ib2R5LnZhbHVlKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSURdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNQZXJHVUlERE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe24uZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSUQuYXBwbHkobixpKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKG4uX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0aWVzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPXZvaWQgMCxzPVtdO2E9bnx8aS5kb21haW47dmFyIHU9e3R5cGU6XCJyZWFkXCIsZnJvbTppLmRpc2NvdmVyeVVSTCx0bzppLnJ1bnRpbWVVUkwrXCIvZGlzY292ZXJ5L1wiLGJvZHk6e3Jlc291cmNlOlwiL2h5cGVydHkvdXNlci9cIitlfX07cmV0dXJuIHUuYm9keS5jcml0ZXJpYT10fHxyP3tyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0LGRvbWFpbjphfTp7ZG9tYWluOmF9LG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtpLl9pc0xlZ2FjeVVzZXIoZSk/dChbe2h5cGVydHlJRDplLHN0YXR1czpcImxpdmVcIn1dKTppLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodSxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZXx8NTAwPT09ci5ib2R5LmNvZGU/KHIuYm9keS52YWx1ZS5tYXAoZnVuY3Rpb24oZSl7ZS5oeXBlcnR5SUQhPWkuZGlzY292ZXJ5VVJMJiZzLnB1c2goZSl9KSx5LmxvZyhcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNdIFJlcGx5IDogXCIscyksdChzKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KHMpKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnRpZXNET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtpLmRpc2NvdmVySHlwZXJ0aWVzLmFwcGx5KGksYSkudGhlbihmdW5jdGlvbih0KXtlKGkuX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9dm9pZCAwO2E9bnx8aS5kb21haW47dmFyIHM9e3R5cGU6XCJyZWFkXCIsZnJvbTppLmRpc2NvdmVyeVVSTCx0bzppLnJ1bnRpbWVVUkwrXCIvZGlzY292ZXJ5L1wiLGJvZHk6e3Jlc291cmNlOlwiL2RhdGFPYmplY3QvdXNlci9cIitlfX07cmV0dXJuIHMuYm9keS5jcml0ZXJpYT10fHxyP3tyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0LGRvbWFpbjphfTp7ZG9tYWluOmF9LG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtpLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT8oeS5sb2coXCJSZXBseSBWYWx1ZSBMb2c6IFwiLHIuYm9keS52YWx1ZSksdChyLmJvZHkudmFsdWUpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RzRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7aS5kaXNjb3ZlckRhdGFPYmplY3RzLmFwcGx5KGksYSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZShpLl9jb252ZXJ0VG9EaXNjb3ZlcmVkT2JqZWN0KHQpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydHlQZXJVUkxcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10fHxyLmRvbWFpbjt2YXIgaT17dHlwZTpcInJlYWRcIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOnIucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvaHlwZXJ0eS91cmwvXCIrZSxjcml0ZXJpYTp7ZG9tYWluOm59fX07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxuKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT8oeS5sb2coXCJSZXBseSBWYWx1ZSBMb2c6IFwiLHIuYm9keS52YWx1ZSksdChyLmJvZHkudmFsdWUpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHlQZXJVUkxdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0eVBlclVSTERPXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7ci5kaXNjb3Zlckh5cGVydHlQZXJVUkwuYXBwbHkocixuKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKG5ldyBwLmRlZmF1bHQodCxyLnJ1bnRpbWVVUkwsci5kaXNjb3ZlcnlVUkwsci5tZXNzYWdlQnVzLHIpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfSl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RQZXJVUkxcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10fHxyLmRvbWFpbjt2YXIgaT17dHlwZTpcInJlYWRcIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOnIucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvZGF0YU9iamVjdC91cmwvXCIrZSxjcml0ZXJpYTp7ZG9tYWluOm59fX07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxuKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT8oeS5sb2coXCJSZXBseSBWYWx1ZSBMb2c6IFwiLHIuYm9keS52YWx1ZSksdChyLmJvZHkudmFsdWUpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RQZXJVUkxdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdFBlclVSTERPXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7ci5kaXNjb3ZlckRhdGFPYmplY3RQZXJVUkwuYXBwbHkocixuKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKG5ldyBwLmRlZmF1bHQodCxyLnJ1bnRpbWVVUkwsci5kaXNjb3ZlcnlVUkwsci5tZXNzYWdlQnVzLHIpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfSl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT12b2lkIDA7YT1ufHxpLmRvbWFpbjt2YXIgcz17dHlwZTpcInJlYWRcIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOmkucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvZGF0YU9iamVjdC9uYW1lL1wiK2V9fTtyZXR1cm4gcy5ib2R5LmNyaXRlcmlhPXR8fHI/e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnQsZG9tYWluOmF9Ontkb21haW46YX0sbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZURPXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe2kuZGlzY292ZXJEYXRhT2JqZWN0c1Blck5hbWUuYXBwbHkoaSxhKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKGkuX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNQZXJSZXBvcnRlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT12b2lkIDA7YT1ufHxpLmRvbWFpbjt2YXIgcz17dHlwZTpcInJlYWRcIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOmkucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvZGF0YU9iamVjdC9yZXBvcnRlci9cIitlfX07cmV0dXJuIHMuYm9keS5jcml0ZXJpYT10fHxyP3tyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0LGRvbWFpbjphfTp7ZG9tYWluOmF9LG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtpLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT8oeS5sb2coXCJSZXBseSBWYWx1ZSBMb2c6IFwiLHIuYm9keS52YWx1ZSksdChyLmJvZHkudmFsdWUpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZV0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7aS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXIuYXBwbHkoaSxhKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKGkuX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcIl9jb252ZXJ0VG9EaXNjb3ZlcmVkT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBwLmRlZmF1bHQoZSx0LnJ1bnRpbWVVUkwsdC5kaXNjb3ZlcnlVUkwsdC5tZXNzYWdlQnVzLHQpfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPXZvaWQgMDthPW58fGkuZG9tYWluO3ZhciBzPXt0eXBlOlwicmVhZFwiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86XCJkb21haW46Ly9yZWdpc3RyeS5cIithLGJvZHk6e3Jlc291cmNlOmUsY3JpdGVyaWE6e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnR9fX07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtpLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXtpZih5LmxvZyhcIltEaXNjb3ZlcnldXCIsciksci5ib2R5LmNvZGU+Mjk5KXJldHVybiB5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdF0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pO3ZhciBuPXIuYm9keS52YWx1ZTt0KG58fFtdKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnR5XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPXZvaWQgMCxzPSgwLGQuY29udmVydFRvVXNlclVSTCkoZSk7cmV0dXJuIGE9bnx8aS5kb21haW4sbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLHUpe2lmKHkubG9nKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHldIEFDVElWRSBET01BSU4gLT4gXCIsYSxcInVzZXItPlwiLGUsXCJzY2hlbWEtPlwiLHQsXCJyZXNvdXJjZXMtPlwiLHIsXCJkb21haW4tPlwiLG4pLGUuaW5jbHVkZXMoXCI6XCIpJiYhZS5pbmNsdWRlcyhcInVzZXI6Ly9cIikpe3kubG9nKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHldIFwiK2UrXCIgaXMgbGVnYWN5IGRvbWFpblwiKTtyZXR1cm4gbyh7dXNlcklEOmUsaHlwZXJ0eUlEOmUsc2NoZW1hOnQscmVzb3VyY2VzOnJ9KX12YXIgYz17dHlwZTpcInJlYWRcIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOlwiZG9tYWluOi8vcmVnaXN0cnkuXCIrYSxib2R5OntyZXNvdXJjZTpzLGNyaXRlcmlhOntyZXNvdXJjZXM6cixkYXRhU2NoZW1lczp0fX19O3kuaW5mbyhcIltEaXNjb3ZlcnldIG1zZyB0byBzZW5kLT5cIixjKSxpLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoYyxmdW5jdGlvbihlKXt5LmluZm8oXCJbRGlzY292ZXJ5XSBPTiBkaXNjb3Zlckh5cGVydHktPlwiLGUpO3ZhciB0PWUuYm9keS52YWx1ZTt0P28odCk6dShcIk5vIEh5cGVydHkgd2FzIGZvdW5kXCIpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydHlQZXJVc2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7aWYoZS5pbmNsdWRlcyhcIjpcIikmJiFlLmluY2x1ZGVzKFwidXNlcjovL1wiKSl7eS5sb2coXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eV0gXCIrZStcImlzIGxlZ2FjeSBkb21haW5cIik7cmV0dXJuIG8oe2lkOmUsaHlwZXJ0eVVSTDplLGRlc2NyaXB0b3I6XCJ1bmtub3duXCJ9KX1uPXR8fHIuZG9tYWluO3ZhciBhPVwidXNlcjovL1wiK2Uuc3Vic3RyaW5nKGUuaW5kZXhPZihcIkBcIikrMSxlLmxlbmd0aCkrXCIvXCIrZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoXCJAXCIpKSxzPXt0eXBlOlwicmVhZFwiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86XCJkb21haW46Ly9yZWdpc3RyeS5cIituLGJvZHk6e3Jlc291cmNlOmF9fTt5LmluZm8oXCJbRGlzY292ZXJ5XSBNZXNzYWdlOiBcIixzLG4sYSksci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24odCl7eS5pbmZvKFwiW0Rpc2NvdmVyeV0gbWVzc2FnZSByZXBseVwiLHQpO3ZhciByPXZvaWQgMCxuPXZvaWQgMCxhPXZvaWQgMCxzPXQuYm9keS52YWx1ZTtmb3IociBpbiBzKWlmKHZvaWQgMCE9PXNbcl0ubGFzdE1vZGlmaWVkKWlmKHZvaWQgMD09PW4pbj1uZXcgRGF0ZShzW3JdLmxhc3RNb2RpZmllZCksYT1yO2Vsc2V7dmFyIHU9bmV3IERhdGUoc1tyXS5sYXN0TW9kaWZpZWQpO24uZ2V0VGltZSgpPHUuZ2V0VGltZSgpJiYobj11LGE9cil9eS5pbmZvKFwiW0Rpc2NvdmVyeV0gTGFzdCBIeXBlcnR5OiBcIixhLG4pO3ZhciBjPWE7aWYodm9pZCAwPT09YylyZXR1cm4gaShcIlVzZXIgSHlwZXJ0eSBub3QgZm91bmRcIik7dmFyIGw9e2lkOmUsZGVzY3JpcHRvcjpzW2NdLmRlc2NyaXB0b3IsaHlwZXJ0eVVSTDpjfTt5LmluZm8oXCJbRGlzY292ZXJ5XSA9PT0+IGh5cGVydHlEaXNjb3ZlcnkgbWVzc2FnZUJ1bmRsZTogXCIsbCksbyhsKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO3JldHVybiB5LmxvZyhcIm9uIEZ1bmN0aW9uLT5cIixlKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7aWYoZS5pbmNsdWRlcyhcIjpcIikmJiFlLmluY2x1ZGVzKFwidXNlcjovL1wiKSl7eS5sb2coXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eV0gaXMgbGVnYWN5IGRvbWFpblwiKTt2YXIgYT17dXNlcklEOmUsaHlwZXJ0eUlEOmUsc2NoZW1hOnNjaGVtYSxyZXNvdXJjZXM6cmVzb3VyY2VzfTtyZXR1cm4gbyhhKX1uPXR8fHIuZG9tYWluO3ZhciBzPVwidXNlcjovL1wiK2Uuc3Vic3RyaW5nKGUuaW5kZXhPZihcIkBcIikrMSxlLmxlbmd0aCkrXCIvXCIrZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoXCJAXCIpKSx1PXt0eXBlOlwicmVhZFwiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86XCJkb21haW46Ly9yZWdpc3RyeS5cIituLGJvZHk6e3Jlc291cmNlOnN9fTt5LmxvZyhcIltEaXNjb3ZlcnldIE1lc3NhZ2UgZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyOiBcIix1LG4scyksci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHUsZnVuY3Rpb24oZSl7eS5pbmZvKFwiW0Rpc2NvdmVyeV0gZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyIHJlcGx5XCIsZSk7dmFyIHQ9ZS5ib2R5LnZhbHVlO2lmKCF0KXJldHVybiBpKFwiVXNlciBIeXBlcnR5IG5vdCBmb3VuZFwiKTtvKHQpfSl9KX19LHtrZXk6XCJyZXN1bWVEaXNjb3Zlcmllc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4geS5sb2coXCJbRGlzY292ZXJ5XSByZXN1bWVEaXNjb3Zlcmllc1wiKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7dmFyIG49e3R5cGU6XCJyZWFkXCIsZnJvbTplLmRpc2NvdmVyeVVSTCx0bzplLnJ1bnRpbWVVUkwrXCIvc3Vic2NyaXB0aW9uc1wiLGJvZHk6e3Jlc291cmNlOmUuZGlzY292ZXJ5VVJMfX07ZS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24ocil7eS5sb2coXCJbRGlzY292ZXJ5LnJlc3VtZURpc2NvdmVyaWVzXSByZXBseTogXCIscik7dmFyIG49W107aWYoMjAwPT09ci5ib2R5LmNvZGUpe3IuYm9keS52YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciByPXQuc3BsaXQoXCIvcmVnaXN0cmF0aW9uXCIpWzBdOyh7fSkudXJsPXIseS5sb2coXCJbRGlzY292ZXJ5LnJlc3VtZURpc2NvdmVyaWVzXSBhZGRpbmcgbGlzdGVuZXIgdG86IFwiLHIpLHIuaW5jbHVkZXMoXCJoeXBlcnR5Oi8vXCIpP24ucHVzaChlLmRpc2NvdmVySHlwZXJ0eVBlclVSTERPKHIpKTpuLnB1c2goZS5kaXNjb3ZlckRhdGFPYmplY3RQZXJVUkxETyhyKSl9KSxvLmRlZmF1bHQuYWxsKG4pLnRoZW4oZnVuY3Rpb24oZSl7dChlKX0pfWVsc2UgdChbXSl9KX0pfX1dKSxEaXNjb3Zlcnl9KCk7dC5kZWZhdWx0PXYsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMjYpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMyksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cig0KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDM0KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDM1KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDEzNyksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLG09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gQ29udGV4dE9ic2VydmVyKGUsdCxyLG4sbyxpKXtpZigoMCxsLmRlZmF1bHQpKHRoaXMsQ29udGV4dE9ic2VydmVyKSwhZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgaHlwZXJ0eVVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiVGhlIE1pbmlCdXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIlRoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlciBcIik7aWYoIW8pdGhyb3cgbmV3IEVycm9yKFwiVGhlIGZhY3RvcnkgaXMgYSBuZWVkZWQgcGFyYW1ldGVyIFwiKTt2YXIgYT0oMCx5LmRlZmF1bHQpKHRoaXMsKENvbnRleHRPYnNlcnZlci5fX3Byb3RvX198fCgwLHUuZGVmYXVsdCkoQ29udGV4dE9ic2VydmVyKSkuY2FsbCh0aGlzKSkscz1hO3MuX2NvbnRleHRSZXNvdXJjZVR5cGVzPW4scy5fdXJsPWUscy5fZGlzY292ZXJVc2Vyc1Byb21pc2VzPXt9LHMuX29ic2VydmVQcm9taXNlcz17fSxzLl9kb21haW49by5kaXZpZGVVUkwoci5ydW50aW1lVVJMKS5kb21haW4scy5fb2JqZWN0RGVzY1VSTD1cImh5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLlwiK3MuX2RvbWFpbitcIi8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0NvbnRleHRcIixzLl91c2VyczJvYnNlcnZlPVtdLHMuX29ic2VydmVycz17fSxhLl9zeW5jaGVyPWl8fG8uY3JlYXRlU3luY2hlcihlLHQscik7dmFyIGM9by5jcmVhdGVEaXNjb3ZlcnkoZSxyLnJ1bnRpbWVVUkwsdCk7cmV0dXJuIHMuX2Rpc2NvdmVyeT1jLHMuX2Rpc2NvdmVyaWVzPXt9LHdpbmRvdy5kaXNjb3Zlcnk9cy5fZGlzY292ZXJ5LGF9cmV0dXJuKDAsaC5kZWZhdWx0KShDb250ZXh0T2JzZXJ2ZXIsZSksKDAsZi5kZWZhdWx0KShDb250ZXh0T2JzZXJ2ZXIsW3trZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLGkpe3IuX3N5bmNoZXIucmVzdW1lT2JzZXJ2ZXJzKHtzdG9yZTohMH0pLnRoZW4oZnVuY3Rpb24oaSl7dmFyIGE9KDAsby5kZWZhdWx0KShpKTthLmxlbmd0aD4wPyhyLl9vYnNlcnZlcnM9aSxuKGkpLGEuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj1pW3JdO2UmJihjb250ZXh0LmRhdGEudmFsdWVzPWUpLG4uc3luYygpLHQmJm4ub25EaXNjb25uZWN0ZWQodCl9KSk6bighMSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKCExKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmVqZWN0KFwiW0NvbnRleHRPYnNlcnZlcl0gU3RhcnQgZmFpbGVkIHwgXCIsZSl9KX19LHtrZXk6XCJyZXN1bWVEaXNjb3Zlcmllc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbih0LHIpe2UuX2Rpc2NvdmVyeS5yZXN1bWVEaXNjb3ZlcmllcygpLnRoZW4oZnVuY3Rpb24ocil7ci5mb3JFYWNoKGZ1bmN0aW9uKHIpe3IuZGF0YS5yZXNvdXJjZXMmJnIuZGF0YS5yZXNvdXJjZXNbMF09PT1lLl9jb250ZXh0UmVzb3VyY2VUeXBlc1swXSYmKFwibGl2ZVwiPT09ci5kYXRhLnN0YXR1cz8odChbci5kYXRhXSksci51bnN1YnNjcmliZUxpdmUoZS5fdXJsKSk6ci5vbkxpdmUoZS5fdXJsLGZ1bmN0aW9uKCl7dChbci5kYXRhXSksci51bnN1YnNjcmliZUxpdmUoZS5fdXJsKX0pKX0pfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZWplY3QoXCJbQ29udGV4dE9ic2VydmVyXSByZXN1bWVEaXNjb3ZlcmllcyBmYWlsZWQgfCBcIixlKX0pfX0se2tleTpcIm9uUmVzdW1lT2JzZXJ2ZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3VtZU9ic2VydmVyPWV9fSx7a2V5OlwiZGlzY292ZXJVc2Vyc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPWUrXCJAXCIrdDtyZXR1cm4gci5fZGlzY292ZXJVc2Vyc1Byb21pc2VzW25dfHwoci5fZGlzY292ZXJVc2Vyc1Byb21pc2VzW25dPW5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixvKXtyLl9kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNETyhlLFtcImNvbnRleHRcIl0sci5fY29udGV4dFJlc291cmNlVHlwZXMsdCkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1bXSxvPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXtyLl9kaXNjb3Zlcmllc1tlLmRhdGEuaHlwZXJ0eUlEXT1lLFwibGl2ZVwiPT09ZS5kYXRhLnN0YXR1cz90LnB1c2goZS5kYXRhKTpvLnB1c2goZSl9KSx0Lmxlbmd0aD4wP24odCk6by5sZW5ndGg+MCYmb1swXS5vbkxpdmUoci5fdXJsLGZ1bmN0aW9uKCl7dC5wdXNoKG9bMF0uZGF0YSksbih0KSxvWzBdLnVuc3Vic2NyaWJlTGl2ZShyLl91cmwpfSl9KX0pKSxyLl9kaXNjb3ZlclVzZXJzUHJvbWlzZXNbbl19fSx7a2V5Olwib2JzZXJ2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0scj10aGlzO3JldHVybiByLl9vYnNlcnZlUHJvbWlzZXNbZS5oeXBlcnR5SURdfHwoci5fb2JzZXJ2ZVByb21pc2VzW2UuaHlwZXJ0eUlEXT1uZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7ci5fdXNlcnMyb2JzZXJ2ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQuX3JlcG9ydGVyPT09ZS5oeXBlcnR5SUQpcmV0dXJuIG4odCl9KSxyLl9kaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyKGUuaHlwZXJ0eUlELFtcImNvbnRleHRcIl0sci5fY29udGV4dFJlc291cmNlVHlwZXMsci5fZG9tYWluKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBhPTAscz12b2lkIDA7aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaGFzT3duUHJvcGVydHkoXCJsYXN0TW9kaWZpZWRcIikmJmUuaGFzT3duUHJvcGVydHkoXCJ1cmxcIikmJkRhdGUucGFyc2UoZS5sYXN0TW9kaWZpZWQpPmEmJihhPWUubGFzdE1vZGlmaWVkLHM9ZS51cmwpfSksMCE9YSYmcz9uKHIuX3N1YnNjcmliZUNvbnRleHQoZSxzLHQpKTpvKFwiW0NvbnRleHRPYnNlcnZlci5vYnNlcnZlXSBkaXNjb3ZlcmVkIERhdGFPYmplY3MgYXJlIGludmFsaWRcIixpKX0pfSkpLHIuX29ic2VydmVQcm9taXNlc1tlLmh5cGVydHlJRF19fSx7a2V5OlwiX3N1YnNjcmliZUNvbnRleHRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl0sbj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKGUsbyl7bi5fdXNlcnMyb2JzZXJ2ZS5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKHIudXJsPT09dClyZXR1cm4gZShyKX0pLG4uX3N5bmNoZXIuc3Vic2NyaWJlKG4uX29iamVjdERlc2NVUkwsdCxudWxsLG51bGwsbnVsbCxyKS50aGVuKGZ1bmN0aW9uKHQpe24uX3VzZXJzMm9ic2VydmUucHVzaCh0KSx0Lm9uRGlzY29ubmVjdGVkKGZ1bmN0aW9uKCl7dC5kYXRhLnZhbHVlc1swXS52YWx1ZT1cInVuYXZhaWxhYmxlXCIsdC5zeW5jKCl9KSxlKHQpfSl9KX19LHtrZXk6XCJfZGlzY292ZXJBbmRTdWJzY3JpYmVMZWdhY3lVc2Vyc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9kaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0c1Blck5hbWUoZSkudGhlbihmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7XCJsaXZlXCI9PT1lLnN0YXR1cyYmKGUuaHlwZXJ0eUlEfHwoZS5oeXBlcnR5SUQ9ZS5yZXBvcnRlciksdC5fc3Vic2NyaWJlQ29udGV4dChlLnNjaGVtYSxlLnVybCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gcihlKX0pKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7fSl9KX19LHtrZXk6XCJ1bm9ic2VydmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX3VzZXJzMm9ic2VydmUuZm9yRWFjaChmdW5jdGlvbihyLG4pe3IudXJsPT09ZSYmKHIudW5zdWJzY3JpYmUoKSx0Ll91c2VyczJvYnNlcnZlLnNwbGljZShuLDEpKX0pfX1dKSxDb250ZXh0T2JzZXJ2ZXJ9KGIuZGVmYXVsdCk7dC5kZWZhdWx0PW0sZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIEV2ZW50RW1pdHRlcigpeygwLG8uZGVmYXVsdCkodGhpcyxFdmVudEVtaXR0ZXIpfXJldHVybigwLGEuZGVmYXVsdCkoRXZlbnRFbWl0dGVyLFt7a2V5OlwiYWRkRXZlbnRMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpc1tlXT10fX0se2tleTpcInRyaWdnZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cltlXSYmcltlXSh0KX19XSksRXZlbnRFbWl0dGVyfSgpO3QuZGVmYXVsdD1zLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ0KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDE3KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDI2KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDMpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoNCksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigzNCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigzNSksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLF89cigxMzcpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxtPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIENvbnRleHRSZXBvcnRlcihlLHQscixuLG8pe2lmKCgwLGwuZGVmYXVsdCkodGhpcyxDb250ZXh0UmVwb3J0ZXIpLCFlKXRocm93IG5ldyBFcnJvcihcIlRoZSBoeXBlcnR5VVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlclwiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO3ZhciBpPSgwLHkuZGVmYXVsdCkodGhpcywoQ29udGV4dFJlcG9ydGVyLl9fcHJvdG9fX3x8KDAsdS5kZWZhdWx0KShDb250ZXh0UmVwb3J0ZXIpKS5jYWxsKHRoaXMsZSx0LHIpKTtyZXR1cm4gaS5zeW5jaGVyPW98fG4uY3JlYXRlU3luY2hlcihlLHQsciksaS5kb21haW49bi5kaXZpZGVVUkwoci5ydW50aW1lVVJMKS5kb21haW4saS5jb250ZXh0cz17fSxpLmNvbnRleHREZXNjVVJMPVwiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuXCIraS5kb21haW4rXCIvLndlbGwta25vd24vZGF0YXNjaGVtYS9Db250ZXh0XCIsaS5zeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uKGUpe2kub25Ob3RpZmljYXRpb24oZSl9KSxpLnN5bmNoZXIub25DbG9zZShmdW5jdGlvbihlKXtpLnNldFN0YXR1cyhlLmlkLFwidW5hdmFpbGFibGVcIiksZS5hY2soKX0pLGl9cmV0dXJuKDAsaC5kZWZhdWx0KShDb250ZXh0UmVwb3J0ZXIsZSksKDAsZi5kZWZhdWx0KShDb250ZXh0UmVwb3J0ZXIsW3trZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlLnN5bmNoZXIucmVzdW1lUmVwb3J0ZXJzKHtzdG9yZTohMH0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG49KDAsby5kZWZhdWx0KShlKTtuLmxlbmd0aD4wPyh0LmNvbnRleHRzPWUsbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX29uU3Vic2NyaXB0aW9uKHQuY29udGV4dHNbZV0pfSkscih0LmNvbnRleHRzKSk6cighMSl9KS5jYXRjaChmdW5jdGlvbihlKXt9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JlamVjdChcIltDb250ZXh0UmVwb3J0ZXJdIFN0YXJ0IGZhaWxlZCB8IFwiLGUpfSl9fSx7a2V5OlwicHJvY2Vzc05vdGlmaWNhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UuYWNrKCl9fSx7a2V5OlwiY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXTpcIm15Q29udGV4dFwiLG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOm51bGwsaT1hcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XT9hcmd1bWVudHNbNV06bnVsbCxzPXRoaXMsdT12b2lkIDA7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oYSxjKXt1PW98fGk/byYmIWk/e3Jlc291cmNlczpyLGV4cGlyZXM6MzAscmVwb3J0ZXI6b306IW8mJmk/e3Jlc291cmNlczpyLGV4cGlyZXM6MzAscmV1c2VVUkw6aX06e3Jlc291cmNlczpyLGV4cGlyZXM6MzAscmV1c2VVUkw6aSxyZXBvcnRlcjpvfTp7cmVzb3VyY2VzOnIsZXhwaXJlczozMH0scy5zeW5jaGVyLmNyZWF0ZShzLmNvbnRleHREZXNjVVJMLFtdLHQsITAsITEsbixudWxsLHUpLnRoZW4oZnVuY3Rpb24odCl7cy5jb250ZXh0c1tlXT10LHMuX29uU3Vic2NyaXB0aW9uKHQpLGEodCl9KS5jYXRjaChmdW5jdGlvbihlKXtjKGUpfSl9KX19LHtrZXk6XCJfb25TdWJzY3JpcHRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXtlLm9uU3Vic2NyaXB0aW9uKGZ1bmN0aW9uKGUpe2UuYWNjZXB0KCl9KX19LHtrZXk6XCJzZXRDb250ZXh0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3IuY29udGV4dHNbZV0uZGF0YS52YWx1ZXM9dCxyLnRyaWdnZXIoZStcIi1jb250ZXh0LXVwZGF0ZVwiLHQpfX1dKSxDb250ZXh0UmVwb3J0ZXJ9KGIuZGVmYXVsdCk7dC5kZWZhdWx0PW0sZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTcpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNjkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDEyNSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigxNjgpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQ2hhdENvbnRyb2xsZXIoZSx0LHIsbixvLGkpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxDaGF0Q29udHJvbGxlciksIWUpdGhyb3cgRXJyb3IoXCJTeW5jaGVyIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeVwiKTtpZighdCl0aHJvdyBFcnJvcihcIkRpc2NvdmVyIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeVwiKTtpZighcil0aHJvdyBFcnJvcihcIkRvbWFpbiBpcyBhIG5lY2Vzc2FyeSBkZXBlbmRlY3lcIik7aWYoIW4pdGhyb3cgRXJyb3IoXCJTZWFyY2ggaXMgYSBuZWNlc3NhcnkgZGVwZW5kZWN5XCIpO3ZhciBhPXRoaXM7YS5fc3luY2hlcj1lLGEuZGlzY292ZXJ5PXQsYS5zZWFyY2g9bixhLm15SWRlbnRpdHk9byxhLmNvbnRyb2xsZXJNb2RlPVwicmVwb3J0ZXJcIixhLmNoaWxkX2NzZXE9MCxhLmRvbWFpbj1yLGEuX21hbmFnZXI9aTt2YXIgcz1lLm93bmVyO2EuX29iamVjdERlc2NVUkw9XCJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS5cIityK1wiLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29tbXVuaWNhdGlvblwiLGEuX2ludml0YXRpb25zSGFuZGxlcj1uZXcgeS5kZWZhdWx0KHMpfXJldHVybigwLGwuZGVmYXVsdCkoQ2hhdENvbnRyb2xsZXIsW3trZXk6XCJfc2V0T25BZGRDaGlsZExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLm9uQWRkQ2hpbGQoZnVuY3Rpb24oZSl7dC5jaGlsZF9jc2VxKz0xLHQuX29uTWVzc2FnZSYmdC5fb25NZXNzYWdlKGUpfSl9fSx7a2V5OlwiX29uU3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyO2UuYWNjZXB0KCk7dmFyIHI9SlNPTi5wYXJzZSgoMCxhLmRlZmF1bHQpKGUuaWRlbnRpdHkpKTtyLmhhc093blByb3BlcnR5KFwiYXNzZXJ0aW9uXCIpJiZkZWxldGUgci5hc3NlcnRpb247dmFyIG49e2h5cGVydHlVUkw6ZS51cmwsZG9tYWluOmUuZG9tYWluLGlkZW50aXR5OnJ9LG89ZS5pZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMO2UuaWRlbnRpdHkubGVnYWN5JiYobi5sZWdhY3k9ZS5pZGVudGl0eS5sZWdhY3kpLHQuZGF0YS5wYXJ0aWNpcGFudHNbb109bix0aGlzLl9vblVzZXJBZGRlZCYmdGhpcy5fb25Vc2VyQWRkZWQobil9fSx7a2V5OlwiX29uVW5zdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXIscj1lLmlkZW50aXR5LnVzZXJQcm9maWxlO2UuaWRlbnRpdHkubGVnYWN5JiYoci5sZWdhY3k9ZS5pZGVudGl0eS5sZWdhY3kpLGRlbGV0ZSB0LmRhdGEucGFydGljaXBhbnRzW3IudXNlclVSTF0sdGhpcy5fb25Vc2VyUmVtb3ZlZCYmdGhpcy5fb25Vc2VyUmVtb3ZlZChyKX19LHtrZXk6XCJzZW5kRmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LmNvbnRyb2xsZXJNb2RlLG49XCJyZXBvcnRlclwiPT09cj90LmRhdGFPYmplY3RSZXBvcnRlcjp0LmRhdGFPYmplY3RPYnNlcnZlcjtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG8pe3ZhciBpPXt1c2VyUHJvZmlsZTp0Lm15SWRlbnRpdHl9O24uYWRkSHlwZXJ0eVJlc291cmNlKFwicmVzb3VyY2VzXCIsXCJmaWxlXCIsZSxpKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBvPXt1c2VyUHJvZmlsZTp0Lm15SWRlbnRpdHl9LGk9e3ZhbHVlOmUsaWRlbnRpdHk6byxyZXNvdXJjZTplfSxhPW5ldyBmLmRlZmF1bHQobi51cmwsdC5fbWFuYWdlci5fcnVudGltZVVSTCx0Ll9tYW5hZ2VyLl9oeXBlcnR5VVJMLHQuX21hbmFnZXIuX2J1cyk7IWZ1bmN0aW9uIHNoYXJlMlJlcG9ydGVyKGUsdCxuLG8pe3ZhciBpPW87ZS5zaGFyaW5nU3RhdHVzLnRoZW4ocihuKSkuY2F0Y2goZnVuY3Rpb24ocil7aS5vbkxpdmUodCxmdW5jdGlvbigpe2kudW5zdWJzY3JpYmVMaXZlKHQpLGUuc2hhcmUoITApLHNoYXJlMlJlcG9ydGVyKGUsdCxuLGkpfSl9KX0oZSx0Ll9tYW5hZ2VyLl9oeXBlcnR5VVJMLGksYSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JlamVjdChlKX0pfX0se2tleTpcInNlbmRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1yLmNvbnRyb2xsZXJNb2RlLGk9XCJyZXBvcnRlclwiPT09bj9yLmRhdGFPYmplY3RSZXBvcnRlcjpyLmRhdGFPYmplY3RPYnNlcnZlcjtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuY2hpbGRfY3NlcSs9MTt2YXIgYT17dHlwZTpcImNoYXRcIixjb250ZW50OmV9LHM9dHx8e3VzZXJQcm9maWxlOnIubXlJZGVudGl0eX07aS5hZGRDaGlsZChcInJlc291cmNlc1wiLGEscykudGhlbihmdW5jdGlvbihlKXt2YXIgdD17Y2hpbGRJZDplLl9jaGlsZElkLGZyb206ZS5fb3duZXIsdmFsdWU6ZS5kYXRhLHR5cGU6XCJjcmVhdGVcIixpZGVudGl0eTpzfSxvPW5ldyBmLmRlZmF1bHQoaS51cmwsci5fbWFuYWdlci5fcnVudGltZVVSTCxyLl9tYW5hZ2VyLl9oeXBlcnR5VVJMLHIuX21hbmFnZXIuX2J1cyk7IWZ1bmN0aW9uIHNoYXJlMlJlcG9ydGVyKGUsdCxyLG8pe3ZhciBpPW87ZS5zaGFyaW5nU3RhdHVzLnRoZW4obihyKSkuY2F0Y2goZnVuY3Rpb24obil7aS5vbkxpdmUodCxmdW5jdGlvbigpe2kudW5zdWJzY3JpYmVMaXZlKHQpLGUuc2hhcmUoITApLHNoYXJlMlJlcG9ydGVyKGUsdCxyLGkpfSl9KX0oZSxyLl9tYW5hZ2VyLl9oeXBlcnR5VVJMLHQsbyl9KS5jYXRjaChmdW5jdGlvbihlKXtvKGUpfSl9KX19LHtrZXk6XCJvbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uQ2hhbmdlPWV9fSx7a2V5Olwib25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25NZXNzYWdlPWV9fSx7a2V5Olwib25Vc2VyQWRkZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblVzZXJBZGRlZD1lfX0se2tleTpcIm9uVXNlclJlbW92ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblVzZXJSZW1vdmVkPWV9fSx7a2V5Olwib25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uQ2xvc2U9ZX19LHtrZXk6XCJvblJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZT1lfX0se2tleTpcImFkZFVzZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZnVuY3Rpb24oZSl7cmV0dXJuIDAhPT1lLmxlbmd0aH07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixpKXtpZigwPT09ZS5maWx0ZXIocikubGVuZ3RoKXJldHVybiBpKFwiRG9uJ3QgaGF2ZSB1c2VycyB0byBpbnZpdGVcIik7dmFyIGE9W10scz1bXSx1PXt9O2UuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10LmRpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc0RPKGUudXNlcixbXCJjb21tXCJdLFtcImNoYXRcIl0sZS5kb21haW4pO2EucHVzaChyKX0pLG8uZGVmYXVsdC5hbGwoYSkudGhlbihmdW5jdGlvbihlKXt2YXIgcj1bXTtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wibGl2ZVwiPT09ZS5kYXRhLnN0YXR1cz8oci5wdXNoKGUuZGF0YS5oeXBlcnR5SUQpLHVbZS5kYXRhLmh5cGVydHlJRF09ZSk6cy5sZW5ndGg8NSYmcy5wdXNoKGUpfSl9KTt2YXIgbj1cInJlcG9ydGVyXCI9PT10LmNvbnRyb2xsZXJNb2RlP3QuZGF0YU9iamVjdFJlcG9ydGVyOnQuZGF0YU9iamVjdE9ic2VydmVyO3MubGVuZ3RoPjAmJnQuX2ludml0YXRpb25zSGFuZGxlci5pbnZpdGVEaXNjb25uZWN0ZWRIeXBlcnRpZXMocyxuKSxuLmludml0ZU9ic2VydmVycyhyKSxuLmludml0YXRpb25zLmxlbmd0aD4wJiZ0Ll9pbnZpdGF0aW9uc0hhbmRsZXIucHJvY2Vzc0ludml0YXRpb25zKHUsbil9KS50aGVuKGZ1bmN0aW9uKCl7bighMCl9KS5jYXRjaChmdW5jdGlvbihlKXtpKGUpfSl9KX19LHtrZXk6XCJhZGRVc2VyUmVxXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWZ1bmN0aW9uKGUpe3JldHVybiAwIT09ZS5sZW5ndGh9O3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7aWYoMD09PWUuZmlsdGVyKHIpLmxlbmd0aClyZXR1cm4gbyhcIltDaGF0TWFuYWdlci5DaGF0Q29udHJvbGxlci5hZGRVc2VyUmVxXSBEb24ndCBoYXZlIHVzZXJzIHRvIGFkZFwiKTtpZihcIm9ic2VydmVyXCI9PT0hdC5jb250cm9sbGVyTW9kZSl7cmV0dXJuIG8oXCJbQ2hhdE1hbmFnZXIuQ2hhdENvbnRyb2xsZXIuYWRkVXNlclJlcV0gb25seSBhbGxvd2VkIHRvIENoYXQgT2JzZXJ2ZXJcIil9fSl9fSx7a2V5Olwib25JbnZpdGF0aW9uUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX29uSW52aXRhdGlvblJlc3BvbnNlPWUsdC5faW52aXRhdGlvbnNIYW5kbGVyLmludml0YXRpb25SZXNwb25zZT1lfX0se2tleTpcInJlbW92ZVVzZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtpZihcInJlcG9ydGVyXCI9PT1lLmNvbnRyb2xsZXJNb2RlKWUuX2ludml0YXRpb25zSGFuZGxlci5jbGVhbkludml0YXRpb25zKGUuZGF0YU9iamVjdFJlcG9ydGVyKS50aGVuKGZ1bmN0aW9uKCl7dHJ5e2RlbGV0ZSBlLl9tYW5hZ2VyLl9yZXBvcnRlcnNDb250cm9sbGVyc1tlLmRhdGFPYmplY3RSZXBvcnRlci51cmxdLGUuZGF0YU9iamVjdFJlcG9ydGVyLmRlbGV0ZSgpLHQoITApLGUuX29uQ2xvc2UmJmUuX29uQ2xvc2Uoe2NvZGU6MjAwLGRlc2M6XCJkZWxldGVkXCIsdXJsOmUuZGF0YU9iamVjdFJlcG9ydGVyLnVybH0pfWNhdGNoKGUpe3IoITEpfX0pO2Vsc2UgdHJ5e2RlbGV0ZSBlLl9tYW5hZ2VyLl9vYnNlcnZlcnNDb250cm9sbGVyc1tlLmRhdGFPYmplY3RPYnNlcnZlci51cmxdLGUuZGF0YU9iamVjdE9ic2VydmVyLnVuc3Vic2NyaWJlKCksdCghMCl9Y2F0Y2goZSl7cighMSl9fSl9fSx7a2V5OlwiaW52aXRhdGlvbnNIYW5kbGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ludml0YXRpb25zSGFuZGxlcn19LHtrZXk6XCJ1cmxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJlcG9ydGVyXCI9PT10aGlzLmNvbnRyb2xsZXJNb2RlP3RoaXMuZGF0YU9iamVjdFJlcG9ydGVyLnVybDp0aGlzLmRhdGFPYmplY3RPYnNlcnZlci51cmx9fSx7a2V5OlwiZGF0YU9iamVjdFJlcG9ydGVyXCIsc2V0OmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcihcIltDaGF0Q29udHJvbGxlcl0gVGhlIGRhdGEgb2JqZWN0IHJlcG9ydGVyIGlzIG5lY2Vzc2FyeSBwYXJhbWV0ZXIgXCIpO3ZhciB0PXRoaXM7dC5jb250cm9sbGVyTW9kZT1cInJlcG9ydGVyXCIsZS5vblN1YnNjcmlwdGlvbihmdW5jdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJzdWJzY3JpYmVcIjp0Ll9vblN1YnNjcmliZShlKTticmVhaztjYXNlXCJ1bnN1YnNjcmliZVwiOnQuX29uVW5zdWJzY3JpYmUoZSl9fSksdC5fc2V0T25BZGRDaGlsZExpc3RlbmVyKGUpLGUub25SZWFkKGZ1bmN0aW9uKGUpe2UuYWNjZXB0KCl9KSxlLm9uRXhlY3V0ZShmdW5jdGlvbihlKXtzd2l0Y2goZS5tZXRob2Qpe2Nhc2VcImFkZFVzZXJcIjp0LmFkZFVzZXIoZS5wYXJhbXNbMF0pLnRoZW4oZnVuY3Rpb24oKXtlLmFjY2VwdCgpfSkuY2F0Y2goZnVuY3Rpb24odCl7ZS5yZWplY3QodCl9KTticmVhaztjYXNlXCJyZW1vdmVVc2VyXCI6dC5yZW1vdmVVc2VyKGUucGFyYW1zKS50aGVuKGZ1bmN0aW9uKCl7ZS5hY2NlcHQoKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UucmVqZWN0KHQpfSk7YnJlYWs7ZGVmYXVsdDplLnJlamVjdChcIltDaGF0Q29udHJvbGxlci5vbkV4ZWN1dGVdIENoYXQgbWV0aG9kIGV4ZWN1dGlvbiBub3QgYWNjZXB0ZWQgYnkgUmVwb3J0ZXJcIil9fSksdC5fZGF0YU9iamVjdFJlcG9ydGVyPWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXJ9fSx7a2V5OlwibWVzc2FnZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJlcG9ydGVyXCI9PT10aGlzLmNvbnRyb2xsZXJNb2RlP3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlci5fY2hpbGRyZW5PYmplY3RzLnJlc291cmNlczp0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIuX2NoaWxkcmVuT2JqZWN0cy5yZXNvdXJjZXN9fSx7a2V5OlwiZGF0YU9iamVjdE9ic2VydmVyXCIsc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5jb250cm9sbGVyTW9kZT1cIm9ic2VydmVyXCIsdC5fZGF0YU9iamVjdE9ic2VydmVyPWUsZS5vbkNoYW5nZShcIipcIixmdW5jdGlvbihlKXtpZihlLmZpZWxkLmluY2x1ZGVzKFwicGFydGljaXBhbnRzXCIpKXN3aXRjaChlLmNUeXBlKXtjYXNlXCJhZGRcIjp0Ll9vblVzZXJBZGRlZCYmdC5fb25Vc2VyQWRkZWQoZSk7YnJlYWs7Y2FzZVwicmVtb3ZlXCI6dC5fb25Vc2VyUmVtb3ZlZCYmdC5fb25Vc2VyUmVtb3ZlZChlKX10Ll9vbkNoYW5nZSYmdC5fb25DaGFuZ2UoZSl9KSx0Ll9zZXRPbkFkZENoaWxkTGlzdGVuZXIoZSl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXJ9fSx7a2V5OlwiZGF0YU9iamVjdFwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmVwb3J0ZXJcIj09PXRoaXMuY29udHJvbGxlck1vZGU/dGhpcy5kYXRhT2JqZWN0UmVwb3J0ZXI6dGhpcy5kYXRhT2JqZWN0T2JzZXJ2ZXJ9fSx7a2V5OlwiY2xvc2VFdmVudFwiLHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2Nsb3NlRXZlbnQ9ZSx0Ll9vbkNsb3NlJiZ0Ll9vbkNsb3NlKGUpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvc2VFdmVudH19XSksQ2hhdENvbnRyb2xsZXJ9KCk7dC5kZWZhdWx0PXYsZS5leHBvcnRzPXQuZGVmYXVsdH0sLCwsLCwsLCwsLCxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5Db250ZXh0UmVwb3J0ZXI9dC5Db250ZXh0T2JzZXJ2ZXI9dC5JZGVudGl0eU1hbmFnZXI9dC5EaXNjb3Zlcnk9dC5TeW5jaGVyPXQuU2FuZGJveEZhY3Rvcnk9dC5TYW5kYm94UmVnaXN0cnk9dC5TYW5kYm94VHlwZT10LlNhbmRib3g9dm9pZCAwO3ZhciBuPXIoMTUyKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEyOCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigxMjkpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTMwKSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDEzNSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigxMzQpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMTM2KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDEzOCksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pO3QuU2FuZGJveD1vLmRlZmF1bHQsdC5TYW5kYm94VHlwZT1uLlNhbmRib3hUeXBlLHQuU2FuZGJveFJlZ2lzdHJ5PWEuZGVmYXVsdCx0LlNhbmRib3hGYWN0b3J5PXUuZGVmYXVsdCx0LlN5bmNoZXI9bC5kZWZhdWx0LHQuRGlzY292ZXJ5PWYuZGVmYXVsdCx0LklkZW50aXR5TWFuYWdlcj15LmRlZmF1bHQsdC5Db250ZXh0T2JzZXJ2ZXI9aC5kZWZhdWx0LHQuQ29udGV4dFJlcG9ydGVyPWIuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuU2FuZGJveFR5cGU9dm9pZCAwO3ZhciBuPXIoNDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMjYpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMyksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cig0KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDM0KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDM1KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDEyOCksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLG09cigxMjYpLGc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSxSPSh0LlNhbmRib3hUeXBlPXtBUFA6XCJhcHBcIixOT1JNQUw6XCJub3JtYWxcIixXSU5ET1c6XCJ3aW5kb3dcIn0sZnVuY3Rpb24oZSl7ZnVuY3Rpb24gU2FuZGJveChlKXsoMCxsLmRlZmF1bHQpKHRoaXMsU2FuZGJveCk7dmFyIHQ9KDAseS5kZWZhdWx0KSh0aGlzLChTYW5kYm94Ll9fcHJvdG9fX3x8KDAsdS5kZWZhdWx0KShTYW5kYm94KSkuY2FsbCh0aGlzKSkscj10O3JldHVybiBlJiYoci5jYXBhYmlsaXRpZXM9ZSksdH1yZXR1cm4oMCxoLmRlZmF1bHQpKFNhbmRib3gsZSksKDAsZi5kZWZhdWx0KShTYW5kYm94LFt7a2V5OlwiZGVwbG95Q29tcG9uZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obyxpKXt2YXIgYT17dHlwZTpcImNyZWF0ZVwiLGZyb206Yi5kZWZhdWx0LkV4dGVybmFsRGVwbG95QWRkcmVzcyx0bzpiLmRlZmF1bHQuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLGJvZHk6e3VybDp0LHNvdXJjZUNvZGU6ZSxjb25maWc6cn19O24ucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT9vKFwiZGVwbG95ZWRcIik6aShlLmJvZHkuZGVzYyl9KX0pfX0se2tleTpcInJlbW92ZUNvbXBvbmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz17dHlwZTpcImRlbGV0ZVwiLGZyb206Yi5kZWZhdWx0LkV4dGVybmFsRGVwbG95QWRkcmVzcyx0bzpiLmRlZmF1bHQuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLGJvZHk6e3VybDplfX07dC5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKGUpezIwMD09PWUuYm9keS5jb2RlP3IoXCJ1bmRlcGxveWVkXCIpOm4oZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6XCJtYXRjaGVzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLG8uZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiEodC5jYXBhYmlsaXRpZXNbcl0mJnQuY2FwYWJpbGl0aWVzW3JdPT09ZVtyXSl9KTtyZXR1cm4gMD09PXIubGVuZ3RofHwhZVtyXX19XSksU2FuZGJveH0oZy5kZWZhdWx0KSk7dC5kZWZhdWx0PVJ9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ0KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDY5KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDE3KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDI2KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDMpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoNCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigzNCksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLF89cigxMTYpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxtPXIoMzUpLGc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSxSPXIoMzYpLE89ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShSKSxEPXIoMTMxKSx3PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoRCksaj1yKDM5KSxMPU8uZ2V0TG9nZ2VyKFwiRGF0YU9iamVjdFJlcG9ydGVyXCIpLGs9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gRGF0YU9iamVjdFJlcG9ydGVyKGUpeygwLGYuZGVmYXVsdCkodGhpcyxEYXRhT2JqZWN0UmVwb3J0ZXIpO3ZhciB0PSgwLGguZGVmYXVsdCkodGhpcywoRGF0YU9iamVjdFJlcG9ydGVyLl9fcHJvdG9fX3x8KDAsbC5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIpKS5jYWxsKHRoaXMsZSkpLHI9dDtyZXR1cm4gci5fc3Vic2NyaXB0aW9ucz17fSxyLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24oZSl7TC5sb2coXCJbU3luY2hlci5EYXRhT2JqZWN0UmVwb3J0ZXJdIFwiK3IudXJsK1wiIHB1Ymxpc2ggY2hhbmdlOiBcIixlKSxyLl9vbkNoYW5nZShlKX0pLHIuX2FsbG9jYXRlTGlzdGVuZXJzKCksci5pbnZpdGF0aW9ucz1bXSxyLl9jaGlsZHJlblNpemVUaHJlc2hvbGQ9NWU0LHR9cmV0dXJuKDAsZy5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsZSksKDAseS5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsW3trZXk6XCJfYWxsb2NhdGVMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpeygwLGIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZSksXCJfYWxsb2NhdGVMaXN0ZW5lcnNcIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fb2JqZWN0TGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCxmdW5jdGlvbih0KXtzd2l0Y2goTC5sb2coXCJbU3luY2hlci5EYXRhT2JqZWN0UmVwb3J0ZXJdIGxpc3RlbmVyIFwiK2UuX3VybCtcIiBSZWNlaXZlZDogXCIsdCksdC50eXBlKXtjYXNlXCJyZXNwb25zZVwiOmUuX29uUmVzcG9uc2UodCk7YnJlYWs7Y2FzZVwicmVhZFwiOmUuX29uUmVhZCh0KTticmVhaztjYXNlXCJleGVjdXRlXCI6ZS5fb25FeGVjdXRlKHQpO2JyZWFrO2Nhc2VcImNyZWF0ZVwiOmUuX29uQ2hpbGRDcmVhdGUodCl9fSl9fSx7a2V5OlwiX3JlbGVhc2VMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpeygwLGIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZSksXCJfcmVsZWFzZUxpc3RlbmVyc1wiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OlwiaW52aXRlT2JzZXJ2ZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49ZTtuLmxlbmd0aD4wJiYoTC5sb2coXCJbU3luY2hlci5EYXRhT2JqZWN0UmVwb3J0ZXJdIEludml0ZU9ic2VydmVycyBcIixuLHIuX21ldGFkYXRhKSxuLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49bmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXt0eXBlOlwiY3JlYXRlXCIsZnJvbTpyLl9zeW5jaGVyLl9vd25lcix0bzpyLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzdW1lOiExLHJlc291cmNlOnIuX3VybCxzY2hlbWE6ci5fc2NoZW1hLHZhbHVlOnIuX21ldGFkYXRhLGF1dGhvcmlzZTpbZV19fTt0JiYoaS5ib2R5LnAycD10KSxyLmRhdGEubXV0dWFsfHwoaS5ib2R5Lm11dHVhbD1yLmRhdGEubXV0dWFsKSxyLl9idXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbih0KXtMLmxvZyhcIltTeW5jaGVyLkRhdGFPYmplY3RSZXBvcnRlcl0gSW52aXRhdGlvbiByZXBseSBcIix0KTt2YXIgcj17aW52aXRlZDplLGNvZGU6dC5ib2R5JiZ0LmJvZHkuY29kZT90LmJvZHkuY29kZTo1MDAsZGVzYzp0LmJvZHkmJnQuYm9keS5kZXNjP3QuYm9keS5kZXNjOlwiVW5rbm93blwifTtyLmNvZGU8MzAwP24ocik6ci5jb2RlPj0zMDAmJm8ocil9KX0pO3IuaW52aXRhdGlvbnMucHVzaChuKX0pKX19LHtrZXk6XCJkZWxldGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fZGVsZXRlQ2hpbGRyZW5zKCkudGhlbihmdW5jdGlvbih0KXtMLmxvZyh0KTt2YXIgcj17dHlwZTpcImRlbGV0ZVwiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKHQpe0wubG9nKFwiRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogXCIsdCksMjAwPT09dC5ib2R5LmNvZGUmJihlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX3JlcG9ydGVyc1tlLl91cmxdLGUuX3N5bmNPYmo9e30pfSl9KX19LHtrZXk6XCJvblN1YnNjcmlwdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcj1lfX0se2tleTpcIm9uUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleTpcIm9uUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVhZEhhbmRsZXI9ZX19LHtrZXk6XCJvbkV4ZWN1dGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkV4ZWN1dGVIYW5kbGVyPWV9fSx7a2V5OlwiX29uRm9yd2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKEwubG9nKFwiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogXCIsZSksZS5ib2R5LnR5cGUpe2Nhc2VcInN1YnNjcmliZVwiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2VcInVuc3Vic2NyaWJlXCI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OlwiX29uU3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5mcm9tLG49KDAsai5kaXZpZGVVUkwpKHIpLG89bi5kb21haW4saT0hMDtlLmJvZHkuaGFzT3duUHJvcGVydHkoXCJtdXR1YWxcIikmJiFlLmJvZHkubXV0dWFsJiYoaT0hMSksTC5sb2coXCJbRGF0YU9iamVjdFJlcG9ydGVyLl9vblN1YnNjcmliZV1cIixlLG8sbik7dmFyIGE9e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsZG9tYWluOm8saWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LG51dHVhbDppLGFjY2VwdDpmdW5jdGlvbigpe3ZhciBuPXt1cmw6cixzdGF0dXM6XCJsaXZlXCJ9O3QuX3N1YnNjcmlwdGlvbnNbcl09bix0Lm1ldGFkYXRhLnN1YnNjcmlwdGlvbnMmJnQubWV0YWRhdGEuc3Vic2NyaXB0aW9ucy5wdXNoKG4udXJsKTt2YXIgbz0oMCxqLmRlZXBDbG9uZSkodC5fbWV0YWRhdGEpO28uZGF0YT0oMCxqLmRlZXBDbG9uZSkodC5kYXRhKSxvLnZlcnNpb249dC5fdmVyc2lvbjt2YXIgaT17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNjaGVtYTp0Ll9zY2hlbWEsdmFsdWU6b319O3JldHVybiBlLmJvZHkuaGFzT3duUHJvcGVydHkoXCJtdXR1YWxcIikmJiFlLmJvZHkubXV0dWFsJiYoaS5ib2R5Lm11dHVhbD1lLmJvZHkubXV0dWFsLHQuZGF0YS5tdXR1YWw9ITEpLHQuX2J1cy5wb3N0TWVzc2FnZShpKSxufSxyZWplY3Q6ZnVuY3Rpb24ocil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDMsZGVzYzpyfX0pfX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoTC5sb2coXCJTVUJTQ1JJUFRJT04tRVZFTlQ6IFwiLGEpLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihhKSl9fSx7a2V5OlwiX29uVW5TdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj0oMCxqLmRpdmlkZVVSTCkociksbz1uLmRvbWFpbjtMLmxvZyhcIltEYXRhT2JqZWN0UmVwb3J0ZXIuX29uVW5TdWJzY3JpYmVdXCIsZSxvLG4pLGRlbGV0ZSB0Ll9zdWJzY3JpcHRpb25zW3JdLGRlbGV0ZSB0Lmludml0YXRpb25zW3JdO3ZhciBpPXt0eXBlOmUuYm9keS50eXBlLHVybDpyLGRvbWFpbjpvLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX07dC5fb25TdWJzY3JpcHRpb25IYW5kbGVyJiYoTC5sb2coXCJVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6IFwiLGkpLHQuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihpKSl9fSx7a2V5OlwiX29uUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ZS50eXBlLHVybDplLmZyb20sY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJihMLmxvZyhcIlJFU1BPTlNFLUVWRU5UOiBcIixyKSx0Ll9vblJlc3BvbnNlSGFuZGxlcihyKSl9fSx7a2V5OlwiX29uUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxhLmRlZmF1bHQpKHQuY2hpbGRyZW5zSlNPTikubGVuZ3RoLG49cj50Ll9jaGlsZHJlblNpemVUaHJlc2hvbGQsaT17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxhY2NlcHQ6ZnVuY3Rpb24oKXtuP3QuX3N5bmNSZXBseUZvckxhcmdlRGF0YShlKTp0Ll9zeW5jUmVwbHkoZSl9LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMSxkZXNjOnJ9fSl9fSxzPVtdO3QubWV0YWRhdGEuc3Vic2NyaXB0aW9ucz9zPXQubWV0YWRhdGEuc3Vic2NyaXB0aW9uczp0Ll9zdWJzY3JpcHRpb25zJiYocz0oMCxvLmRlZmF1bHQpKHQuX3N1YnNjcmlwdGlvbnMpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc3Vic2NyaXB0aW9uc1tlXS51cmx9KSksLTEhPXMuaW5kZXhPZihlLmZyb20pP24/dC5fc3luY1JlcGx5Rm9yTGFyZ2VEYXRhKGUpOnQuX3N5bmNSZXBseShlKTp0Ll9vblJlYWRIYW5kbGVyJiYoTC5sb2coXCJSRUFELUVWRU5UOiBcIixpKSx0Ll9vblJlYWRIYW5kbGVyKGkpKX19LHtrZXk6XCJfc3luY1JlcGx5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLGouZGVlcENsb25lKSh0Lm1ldGFkYXRhKTtyLmRhdGE9KDAsai5kZWVwQ2xvbmUpKHQuZGF0YSksci5jaGlsZHJlbk9iamVjdHM9KDAsai5kZWVwQ2xvbmUpKHQuY2hpbGRyZW5zSlNPTiksci52ZXJzaW9uPXQuX3ZlcnNpb247dmFyIG49e2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTpyfX07dC5fYnVzLnBvc3RNZXNzYWdlKG4pfX0se2tleTpcIl9zeW5jUmVwbHlGb3JMYXJnZURhdGFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsai5kZWVwQ2xvbmUpKHQubWV0YWRhdGEpO3IuZGF0YT0oMCxqLmRlZXBDbG9uZSkodC5kYXRhKSxyLnZlcnNpb249dC5fdmVyc2lvbixkZWxldGUgci5jaGlsZHJlbk9iamVjdHM7dmFyIG49dm9pZCAwLG89W10saT17fTtmb3IobiBpbiB0Ll9jaGlsZHJlbk9iamVjdHMpe3ZhciBzPXZvaWQgMDtpW25dPXt9O2ZvcihzIGluIHQuX2NoaWxkcmVuT2JqZWN0c1tuXSkoMCxhLmRlZmF1bHQpKGkpLmxlbmd0aD50Ll9jaGlsZHJlblNpemVUaHJlc2hvbGQmJihvLnB1c2goaSksaT17fSxpW25dPXt9KSxpW25dW3NdPXt9LGlbbl1bc10udmFsdWU9dC5fY2hpbGRyZW5PYmplY3RzW25dW3NdLm1ldGFkYXRhLGlbbl1bc10uaWRlbnRpdHk9dC5fY2hpbGRyZW5PYmplY3RzW25dW3NdLmlkZW50aXR5fW8ucHVzaChpKSxyLnJlc3BvbnNlcz1vLmxlbmd0aCsxO3ZhciB1PXtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToxMDAsdmFsdWU6cn19O3QuX2J1cy5wb3N0TWVzc2FnZSh1KSxvLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49KDAsai5kZWVwQ2xvbmUpKHUpO24uYm9keS52YWx1ZT1lLG4uYm9keS52YWx1ZS5yZXNwb25zZXM9ci5yZXNwb25zZXMsc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZShuKX0sNTApfSl9fSx7a2V5OlwiX29uRXhlY3V0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUuYm9keS5tZXRob2QpdGhyb3cgZTt2YXIgcj17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwfX0sbj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxtZXRob2Q6ZS5ib2R5Lm1ldGhvZCxwYXJhbXM6ZS5ib2R5LnBhcmFtcyxhY2NlcHQ6ZnVuY3Rpb24oKXt0Ll9idXMucG9zdE1lc3NhZ2Uocil9LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMSxkZXNjOnJ9fSl9fTt0Ll9vbkV4ZWN1dGVIYW5kbGVyJiYoTC5sb2coXCJbRGF0YU9iamVjdFJlcG9ydGVyXSBFWEVDVVRFLUVWRU5UOiBcIixuKSx0Ll9vbkV4ZWN1dGVIYW5kbGVyKG4pKX19LHtrZXk6XCJzdWJzY3JpcHRpb25zXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnN9fSx7a2V5OlwiY2hpbGRyZW5zSlNPTlwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17fSxyPXZvaWQgMDtmb3IociBpbiBlLl9jaGlsZHJlbk9iamVjdHMpe3ZhciBuPXZvaWQgMDt0W3JdPXt9O2ZvcihuIGluIGUuX2NoaWxkcmVuT2JqZWN0c1tyXSl0W3JdW25dPXt9LHRbcl1bbl0udmFsdWU9ZS5fY2hpbGRyZW5PYmplY3RzW3JdW25dLm1ldGFkYXRhLHRbcl1bbl0uaWRlbnRpdHk9ZS5fY2hpbGRyZW5PYmplY3RzW3JdW25dLmlkZW50aXR5fXJldHVybiB0fX1dKSxEYXRhT2JqZWN0UmVwb3J0ZXJ9KHcuZGVmYXVsdCk7dC5kZWZhdWx0PWssZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0KXshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBPYnNlcnZlcihlLHQscixuLG8saSl7ZnVuY3Rpb24gZGVsaXZlcihlLG4pe2lmKGRlbGl2ZXIuZGVsYXk9biwhZGVsaXZlci5wYXVzZSYmcy5jaGFuZ2VzZXQubGVuZ3RoPjApe2lmKCFlKXt2YXIgbz1zLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wfSk7by5sZW5ndGg+MCYmdChvKX1zLmNoYW5nZXNldD1bXX19dmFyIGEscz10aGlzO3JldHVybiBkZWxpdmVyLnBhdXNlPW8sZGVsaXZlci5kZWxheT1pLHMuZ2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJfX29ic2VydmVyX19cIj09PXQ/czpcInVub2JzZXJ2ZVwiPT09dD9mdW5jdGlvbigpe3JldHVybiBPYmplY3QudW5vYnNlcnZlKGUpLGV9OlwiZGVsaXZlclwiPT09dD9kZWxpdmVyOmVbdF19LHMudGFyZ2V0PWUscy5jaGFuZ2VzZXQ9W10scy50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19ffHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX29ic2VydmVyQ2FsbGJhY2tzX19cIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITEsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fb2JzZXJ2ZXJzX19cIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITEsdmFsdWU6W119KSkscy50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19fLnB1c2godCkscy50YXJnZXQuX19vYnNlcnZlcnNfXy5wdXNoKHRoaXMpLGE9bmV3IFByb3h5KGUscyksZGVsaXZlcighMSxpKSxhfU9iamVjdC5vYnNlcnZlfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBQcm94eXx8KE9ic2VydmVyLnByb3RvdHlwZS5kZWxpdmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KG51bGwsXCJkZWxpdmVyXCIpfSxPYnNlcnZlci5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1lW3RdLG89dm9pZCAwPT09bj9cImFkZFwiOlwidXBkYXRlXCI7aWYoZVt0XT1yLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYoIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2Yobyk+PTApKXt2YXIgaT17b2JqZWN0OmUsbmFtZTp0LHR5cGU6b30sYT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLHM9dGhpcy5kZWxpdmVyKCk7XCJ1cGRhdGVcIj09PW8mJihpLm9sZFZhbHVlPW4pLHRoaXMuY2hhbmdlc2V0LnB1c2goaSksYSYmcyghMSxcIm51bWJlclwiPT10eXBlb2Ygcy5kZWxheT9zLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGV0ZVByb3BlcnR5PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVt0XTtpZihkZWxldGUgZVt0XSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoXCJkZWxldGVcIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZTpcImRlbGV0ZVwiLG9sZFZhbHVlOnJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSxcIm51bWJlclwiPT10eXBlb2YgaS5kZWxheT9pLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGUsdCxyKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHIpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZihcInJlY29uZmlndXJlXCIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZTp0LHR5cGU6XCJyZWNvbmZpZ3VyZVwifSxvPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsaT10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLG8mJmkoITEsXCJudW1iZXJcIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5zZXRQcm90b3R5cGVPZj1mdW5jdGlvbihlLHQpe3ZhciByPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtpZihPYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoXCJzZXRQcm90b3R5cGVcIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOlwiX19wcm90b19fXCIsdHlwZTpcInNldFByb3RvdHlwZVwiLG9sZFZhbHVlOnJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSxcIm51bWJlclwiPT10eXBlb2YgaS5kZWxheT9pLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLnByZXZlbnRFeHRlbnNpb25zPWZ1bmN0aW9uKGUpe2lmKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhlKSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoXCJwcmV2ZW50RXh0ZW5zaW9uc1wiKT49MCl7dmFyIHQ9e29iamVjdDplLHR5cGU6XCJwcmV2ZW50RXh0ZW5zaW9uc1wifSxyPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsbj10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKHQpLHImJm4oITEsXCJudW1iZXJcIj09dHlwZW9mIG4uZGVsYXk/bi5kZWxheToxMCl9cmV0dXJuITB9LE9iamVjdC5vYnNlcnZlPWZ1bmN0aW9uKGUsdCxyLG4sbyxpKXtyZXR1cm4gbmV3IE9ic2VydmVyKGUsdCxyLG4sbyxpKX0sT2JqZWN0LnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe2lmKGUuX19vYnNlcnZlckNhbGxiYWNrc19fKXtpZighdClyZXR1cm4gZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsZS5fX29ic2VydmVyQ2FsbGJhY2tzX18ubGVuZ3RoKSx2b2lkIGUuX19vYnNlcnZlcnNfXy5zcGxpY2UoMCxlLl9fb2JzZXJ2ZXJzX18ubGVuZ3RoKTtlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7dD09PXImJihlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UobiwxKSxkZWxldGUgZS5fX29ic2VydmVyc19fW25dLmNhbGxiYWNrLGUuX19vYnNlcnZlcnNfXy5zcGxpY2UobiwxKSl9KX19LEFycmF5Lm9ic2VydmU9ZnVuY3Rpb24oZSx0LHIsbixvLGkpe2lmKCEoZSBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5KGUpKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5XCIpO3I9cnx8W1wiYWRkXCIsXCJ1cGRhdGVcIixcImRlbGV0ZVwiLFwic3BsaWNlXCJdO3ZhciBhPW5ldyBQcm94eShlLHtnZXQ6ZnVuY3Rpb24odCxuKXtyZXR1cm5cInVub2JzZXJ2ZVwiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gZT9PYmplY3QudW5vYnNlcnZlKHQsZSk6dC51bm9ic2VydmUoKX06XCJzcGxpY2VcIj09PW4/ZnVuY3Rpb24obixvKXtpZihcIm51bWJlclwiIT10eXBlb2Ygbnx8XCJudW1iZXJcIiE9dHlwZW9mIG8pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZpcnN0IHR3byBhcmd1bWVudHMgdG8gQXJyYXkgc3BsaWNlIGFyZSBub3QgbnVtYmVyLCBudW1iZXJcIik7dmFyIGk9dGhpcy5zbGljZShuLG4rbyksYT1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzLmxlbmd0aC0yOjAsdT17b2JqZWN0OmUsdHlwZTpcInNwbGljZVwiLGluZGV4Om4scmVtb3ZlZDppLGFkZGVkQ291bnQ6YX07aWYodC5zcGxpY2UuYXBwbHkodCxhcmd1bWVudHMpLHIuaW5kZXhPZihcInNwbGljZVwiKT49MCl7dmFyIG49MD09PXMuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5sZW5ndGgsYz1zLl9fb2JzZXJ2ZXJfXy5kZWxpdmVyKCk7cy5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2godSksbiYmYyghMSxcIm51bWJlclwiPT10eXBlb2YgYy5kZWxheT9jLmRlbGF5OjEwKX19OlwicHVzaFwiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgsMCxlKX06XCJwb3BcIj09PW4/ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgtMSwxKX06XCJ1bnNoaWZ0XCI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwbGljZSgwLDAsZSl9Olwic2hpZnRcIj09PW4/ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpY2UoMCwxKX06dFtuXX19KSxzPU9iamVjdC5vYnNlcnZlKGEsZnVuY3Rpb24oZSl7dmFyIG49ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJsZW5ndGhcIiE9PWUubmFtZSYmXCJhZGRcIiE9PWUubmFtZSYmKCFyfHxyLmluZGV4T2YoZS50eXBlKT49MCl9KTtuLmxlbmd0aD4wJiZ0KG4pfSxyLG4sbyxpKTtyZXR1cm4gc30sQXJyYXkudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudW5vYnNlcnZlKHQpfSksT2JqZWN0LmRlZXBPYnNlcnZlPWZ1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiByZW9ic2VydmUoZSxyKXtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe2lmKChcIm9iamVjdFwiPT09bihlW29dKXx8XCJhcnJheVwiPT09bihlW29dKSkmJiFlW29dLmhhc093blByb3BlcnR5KFwiX19vYnNlcnZlcnNfX1wiKSl7dmFyIGk9ci5zbGljZSgwKTtpLnB1c2gobyksZVtvXT1PYmplY3QuZGVlcE9ic2VydmUoZVtvXSx0LGkpfX0pfXI9cnx8W107dmFyIG49ZnVuY3Rpb24oZSl7cmV0dXJue30udG9TdHJpbmcuY2FsbChlKS5tYXRjaCgvXFxzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gcmVvYnNlcnZlKGUsciksT2JqZWN0Lm9ic2VydmUoZSxmdW5jdGlvbihlKXtmdW5jdGlvbiByZWN1cnNlKGUsdCxyLG8saSl7aWYobyBpbnN0YW5jZW9mIE9iamVjdCl7T2JqZWN0LmtleXMobykuZm9yRWFjaChmdW5jdGlvbihhKXtpZighcnx8clthXSE9PW9bYV0pe3ZhciBzPXImJnZvaWQgMCE9PXJbYV0/clthXTp2b2lkIDAsdT12b2lkIDA9PT1zP1wiYWRkXCI6XCJ1cGRhdGVcIixjPWkrXCIuXCIrYTtuLnB1c2goe25hbWU6ZSxvYmplY3Q6dCx0eXBlOnUsb2xkVmFsdWU6cyxuZXdWYWx1ZTpvW2FdLGtleXBhdGg6Y30pLHJlY3Vyc2UoZSx0LHMsb1thXSxjKX19KX1lbHNlIGlmKHIgaW5zdGFuY2VvZiBPYmplY3Qpe3ZhciBhPU9iamVjdC5rZXlzKHIpO2EuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgcz1udWxsPT09bz9cInVwZGF0ZVwiOlwiZGVsZXRlXCIsdT1pK1wiLlwiK2E7bi5wdXNoKHtuYW1lOmUsb2JqZWN0OnQsdHlwZTpzLG9sZFZhbHVlOnJbYV0sbmV3VmFsdWU6byxrZXlwYXRoOnV9KSxyZWN1cnNlKGUsdCxyW2FdLHZvaWQgMCx1KX0pfX12YXIgbj1bXTtlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9KHIubGVuZ3RoPjA/ci5qb2luKFwiLlwiKStcIi5cIjpcIlwiKStlLm5hbWU7XCJ1cGRhdGVcIiE9PWUudHlwZSYmXCJhZGRcIiE9PWUudHlwZXx8cmVvYnNlcnZlKGUub2JqZWN0LHIpLG4ucHVzaCh7bmFtZTplLm5hbWUsb2JqZWN0OmUub2JqZWN0LHR5cGU6ZS50eXBlLG9sZFZhbHVlOmUub2xkVmFsdWUsbmV3VmFsdWU6ZS5vYmplY3RbZS5uYW1lXSxrZXlwYXRoOnR9KSxyZWN1cnNlKGUubmFtZSxlLm9iamVjdCxlLm9sZFZhbHVlLGUub2JqZWN0W2UubmFtZV0sdCl9KSx0KG4pfSl9fSgpfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTU2KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIEh5cGVydHlSZXNvdXJjZUZhY3RvcnkoKXsoMCxhLmRlZmF1bHQpKHRoaXMsSHlwZXJ0eVJlc291cmNlRmFjdG9yeSl9cmV0dXJuKDAsdS5kZWZhdWx0KShIeXBlcnR5UmVzb3VyY2VGYWN0b3J5LFt7a2V5OlwiY3JlYXRlSHlwZXJ0eVJlc291cmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMDtzd2l0Y2godCl7Y2FzZVwiZmlsZVwiOm49bmV3IGwuZGVmYXVsdChlLHIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiW0h5cGVydHlSZXNvdXJjZUZhY3RvcnkuY3JlYXRlSHlwZXJ0eVJlc291cmNlXSBub3Qgc3VwcG9ydGVkIHR5cGU6IFwiLHQpfXJldHVybiBufX0se2tleTpcImNyZWF0ZUh5cGVydHlSZXNvdXJjZVdpdGhDb250ZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dm9pZCAwO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8pe3N3aXRjaCh0KXtjYXNlXCJmaWxlXCI6aT1uZXcgbC5kZWZhdWx0KGUsbik7YnJlYWs7ZGVmYXVsdDpyZWplY3QoKX1pLmluaXQocikudGhlbihmdW5jdGlvbigpe3JldHVybiBpLnNhdmUoKX0pLnRoZW4oZnVuY3Rpb24oKXtvKGkpfSl9KX19XSksSHlwZXJ0eVJlc291cmNlRmFjdG9yeX0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyNiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMzQpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMzUpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMzYpLGg9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fSh2KSxfPXIoMTU3KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksbT0ocigzOSkscigxNTgpKSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj1oLmdldExvZ2dlcihcIkZpbGVIeXBlcnR5UmVzb3VyY2VcIiksTz1mdW5jdGlvbihlKXtmdW5jdGlvbiBGaWxlSHlwZXJ0eVJlc291cmNlKGUsdCl7KDAsdS5kZWZhdWx0KSh0aGlzLEZpbGVIeXBlcnR5UmVzb3VyY2UpO3ZhciByPSgwLGYuZGVmYXVsdCkodGhpcywoRmlsZUh5cGVydHlSZXNvdXJjZS5fX3Byb3RvX198fCgwLGEuZGVmYXVsdCkoRmlsZUh5cGVydHlSZXNvdXJjZSkpLmNhbGwodGhpcyxlLHQpKTtyZXR1cm4gci5tZXRhZGF0YS5yZXNvdXJjZVR5cGU9XCJmaWxlXCIscn1yZXR1cm4oMCx5LmRlZmF1bHQpKEZpbGVIeXBlcnR5UmVzb3VyY2UsZSksKDAsbC5kZWZhdWx0KShGaWxlSHlwZXJ0eVJlc291cmNlLFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiW0ZpbGVIeXBlcnR5UmVzb3VyY2UuY29uc3RydWN0b3JdIG1pc3NpbmcgbWFuZGF0b3J5ICpmaWxlKiBpbnB1dCBcIik7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtpZih0Ll9tZXRhZGF0YS5uYW1lPWUubmFtZSx0Ll9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9ZS5sYXN0TW9kaWZpZWQsdC5fbWV0YWRhdGEuc2l6ZT1lLnNpemUsdC5fbWV0YWRhdGEubWltZXR5cGU9ZS50eXBlLFIubG9nKFwiW0ZpbGVIeXBlcnR5UmVzb3VyY2UuaW5pdF0gZmlsZTogXCIsZSksdC5faXNTZW5kZXIpe3N3aXRjaChlLnR5cGUuc3BsaXQoXCIvXCIpWzBdKXtjYXNlXCJpbWFnZVwiOnQuX2dldEltYWdlUHJldmlldyhlKS50aGVuKGZ1bmN0aW9uKG4pe3QuX21ldGFkYXRhLnByZXZpZXc9bix0Ll9jb250ZW50PWUscigpfSk7YnJlYWs7ZGVmYXVsdDp0Ll9jb250ZW50PWUscigpfX1lbHNlIHQuX2NvbnRlbnQ9ZS5jb250ZW50LGUucHJldmlldyYmKHQuX21ldGFkYXRhLnByZXZpZXc9ZS5wcmV2aWV3KSxyKCl9KX19LHtrZXk6XCJfZ2V0SW1hZ2VQcmV2aWV3XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEZpbGVSZWFkZXI7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtnLmRlZmF1bHQucmVzaXplKGUse3dpZHRoOjEwMCxoZWlnaHQ6MTAwfSxmdW5jdGlvbihlLG4pe24/KHQucmVhZEFzRGF0YVVSTChlKSx0Lm9ubG9hZD1mdW5jdGlvbihlKXtyKGUudGFyZ2V0LnJlc3VsdCl9KTooUi53YXJuKFwiW0ZpbGVIeXBlcnR5UmVzb3VyY2UuX2dldEltYWdlUHJldmlld10gdW5hYmxlIHRvIGNyZWF0ZSBpbWFnZSBwcmV2aWV3IGZyb20gb3JpZ2luYWwgaW1hZ2UgXCIpLHIodm9pZCAwKSl9KX0pfX0se2tleTpcInRvTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm5hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGEubmFtZX19LHtrZXk6XCJwcmV2aWV3XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21ldGFkYXRhLnByZXZpZXd9fV0pLEZpbGVIeXBlcnR5UmVzb3VyY2V9KGIuZGVmYXVsdCk7dC5kZWZhdWx0PU8sZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTcpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMjYpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDM0KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDExNikseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigzNSksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLF89cigzNiksYj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KF8pLG09cigzOSksZz1yKDEzMyksUj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGcpLE89Yi5nZXRMb2dnZXIoXCJIeXBlcnR5UmVzb3VyY2VcIiksRD1mdW5jdGlvbihlKXtmdW5jdGlvbiBIeXBlcnR5UmVzb3VyY2UoZSx0KXsoMCx1LmRlZmF1bHQpKHRoaXMsSHlwZXJ0eVJlc291cmNlKTt2YXIgcj0oMCxmLmRlZmF1bHQpKHRoaXMsKEh5cGVydHlSZXNvdXJjZS5fX3Byb3RvX198fCgwLGEuZGVmYXVsdCkoSHlwZXJ0eVJlc291cmNlKSkuY2FsbCh0aGlzLHQpKSxuPXI7cmV0dXJuIG4uYXJyYXlidWZmZXJTaXplTGltaXQ9NTI0Mjg4MCxuLl9pc1NlbmRlcj1lLG4uX2xvY2FsU3RvcmFnZVVSTD1uLl9wYXJlbnRPYmplY3QuX3N5bmNoZXIuX3J1bnRpbWVVcmwrXCIvc3RvcmFnZVwiLHJ9cmV0dXJuKDAsaC5kZWZhdWx0KShIeXBlcnR5UmVzb3VyY2UsZSksKDAsbC5kZWZhdWx0KShIeXBlcnR5UmVzb3VyY2UsW3trZXk6XCJzYXZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7dmFyIG49e2Zyb206ZS5fb3duZXIsdG86ZS5fbG9jYWxTdG9yYWdlVVJMLHR5cGU6XCJjcmVhdGVcIixib2R5Ont2YWx1ZTooMCxtLmRlZXBDbG9uZSkoZS5fbWV0YWRhdGEpfX0sbz1mdW5jdGlvbihuKXtPLmluZm8oXCJbSHlwZXJ0eVJlc291cmNlLnNhdmVdIHJlcGx5OiBcIixuKSxlLl9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihlLl9vd25lcixuLmlkKSwyMDA9PT1uLmJvZHkuY29kZT8obi5ib2R5LnZhbHVlJiYoZS5fbWV0YWRhdGEuY29udGVudFVSTHx8KGUuX21ldGFkYXRhLmNvbnRlbnRVUkw9W10pLGUuX21ldGFkYXRhLmNvbnRlbnRVUkwucHVzaChuLmJvZHkudmFsdWUpKSx0KCkpOnIobi5ib2R5LmNvZGUrXCIgXCIrbi5ib2R5LmRlc2MpfTtuLmJvZHkudmFsdWUuY29udGVudD1lLl9jb250ZW50LGUuX2J1cy5wb3N0TWVzc2FnZShuLG8sITEpfSl9fSx7a2V5OlwicmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIE8uaW5mbyhcIltIeXBlcnR5UmVzb3VyY2UucmVhZF0gXCIsdGhpcyksbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKHQuY29udGVudClyKHQpO2Vsc2V7dmFyIG89dC5fZ2V0QmVzdENvbnRlbnRVUkwodC5fbWV0YWRhdGEuY29udGVudFVSTCk7Ty5sb2coXCJTdG9yYWdlOlwiLG8pO3ZhciBpPXtmcm9tOnQuX293bmVyLHRvOm8udXJsLHR5cGU6XCJyZWFkXCIsYm9keTp7cmVzb3VyY2U6by51cmwrXCIvXCIrby5yZXNvdXJjZSxwMnA6ITB9fTt0Lm1ldGFkYXRhLnAycFJlcXVlc3RlciYmdC5tZXRhZGF0YS5wMnBIYW5kbGVyJiYoaS5ib2R5LnAycFJlcXVlc3Rlcj10Lm1ldGFkYXRhLnAycFJlcXVlc3RlcixpLmJvZHkucDJwSGFuZGxlcj10Lm1ldGFkYXRhLnAycEhhbmRsZXIpLHQuX2dldEJlc3RSZXNvdXJjZShpLGUpLnRoZW4oZnVuY3Rpb24oZSl7Ty5pbmZvKFwiW0h5cGVydHlSZXNvdXJjZV0gLSBnZXQgbG9jYWxseSB0aGUgcmVzb3VyY2U6XCIsZSkscih0KX0pLmNhdGNoKGZ1bmN0aW9uKGkpe08ud2FybihcIltIeXBlcnR5UmVzb3VyY2VdIC0gZ2V0IGxvY2FsbHkgdGhlIHJlc291cmNlIGZhaWxcIixpKTt2YXIgYT17ZnJvbTp0Ll9vd25lcix0bzpvLnJlbW90ZVVSTCx0eXBlOlwicmVhZFwiLGJvZHk6e3Jlc291cmNlOm8ucmVtb3RlVVJMK1wiL1wiK28ucmVzb3VyY2UscDJwOiEwfX07dC5tZXRhZGF0YS5wMnBSZXF1ZXN0ZXImJnQubWV0YWRhdGEucDJwSGFuZGxlciYmKGEuYm9keS5wMnBSZXF1ZXN0ZXI9dC5tZXRhZGF0YS5wMnBSZXF1ZXN0ZXIsYS5ib2R5LnAycEhhbmRsZXI9dC5tZXRhZGF0YS5wMnBIYW5kbGVyKSx0Ll9nZXRCZXN0UmVzb3VyY2UoYSxlKS50aGVuKGZ1bmN0aW9uKGUpe08ud2FybihcIltIeXBlcnR5UmVzb3VyY2VdIC0gZ2V0IHJlbW90ZWx5IHRoZSByZXNvdXJjZVwiLGUpLHIodCl9KS5jYXRjaChmdW5jdGlvbihlKXtPLndhcm4oXCJbSHlwZXJ0eVJlc291cmNlXSAtIGdldCByZW1vdGVseSB0aGUgcmVzb3VyY2UgZmFpbFwiLGUpLG4oZS5ib2R5LmNvZGUrXCIgXCIrZS5ib2R5LmRlc2MpfSl9KX19KX19LHtrZXk6XCJfZ2V0QmVzdFJlc291cmNlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiByLl9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihyLl9vd25lcixzKSxlLmJvZHkuY29kZT00MDgsZS5ib2R5LmRlc2M9XCJSZXNwb25zZSB0aW1lb3V0XCIsbyhlKX0sM2UzKSxhPWZ1bmN0aW9uKGUpe08ubG9nKFwiW0h5cGVydHlSZXNvdXJjZS5yZWFkXSByZXBseTogXCIsZSk7dmFyIGE9ZS5pZDtzd2l0Y2goY2xlYXJUaW1lb3V0KGkpLGUuYm9keS5jb2RlKXtjYXNlIDIwMDpyLl9jb250ZW50PWUuYm9keS52YWx1ZS5jb250ZW50LGUuYm9keS52YWx1ZS5zaXplPHIuYXJyYXlidWZmZXJTaXplTGltaXQmJnIuc2F2ZSgpLHIuX2J1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKHIuX293bmVyLGEpLG4oZSk7YnJlYWs7Y2FzZSAxODM6dChlLmJvZHkudmFsdWUpO2JyZWFrO2RlZmF1bHQ6ci5fYnVzLnJlbW92ZVJlc3BvbnNlTGlzdGVuZXIoci5fb3duZXIsYSksbyhlKX19LHM9ci5fYnVzLnBvc3RNZXNzYWdlKGUsYSwhMSl9KX19LHtrZXk6XCJkZWxldGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Ty5pbmZvKFwiW0h5cGVydHlSZXNvdXJjZS5kZWxldGVdXCIsZS5tZXRhZGF0YSk7dmFyIHQ9e2Zyb206ZS5fb3duZXIsdG86ZS5fbG9jYWxTdG9yYWdlVVJMLHR5cGU6XCJkZWxldGVcIixib2R5OntyZXNvdXJjZXM6ZS5tZXRhZGF0YS5jb250ZW50VVJMfX07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocil7ZS5fYnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24oZSl7cihlLmJvZHkuY29kZTwzMDA/ITA6ITEpfSl9KX19LHtrZXk6XCJfZ2V0QmVzdENvbnRlbnRVUkxcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZVswXSxuPXIuc3Vic3RyKHIubGFzdEluZGV4T2YoXCIvXCIpKzEpO3JldHVybnt1cmw6dC5fbG9jYWxTdG9yYWdlVVJMLHJlc291cmNlOm4scmVtb3RlVVJMOnIuc3Vic3RyKDAsci5sYXN0SW5kZXhPZihcIi9cIikpfX19LHtrZXk6XCJyZXNvdXJjZVR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZXRhZGF0YS5yZXNvdXJjZVR5cGV9fSx7a2V5OlwibWltZXR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGEudHlwZX19LHtrZXk6XCJjb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnR9fSx7a2V5OlwiY29udGVudFVSTFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhZGF0YS5jb250ZW50VVJMfX0se2tleTpcInNoYXJlYWJsZVwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD0oMCx5LmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZS5wcm90b3R5cGUuX19wcm90b19ffHwoMCxhLmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZS5wcm90b3R5cGUpLFwibWV0YWRhdGFcIix0aGlzKTtyZXR1cm4gdC5yZXNvdXJjZVR5cGU9ZS5yZXNvdXJjZVR5cGUsdH19XSksSHlwZXJ0eVJlc291cmNlfShSLmRlZmF1bHQpO3QuZGVmYXVsdD1ELGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJsb2ImJmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBCb29sZWFuKG5ldyBCbG9iKX1jYXRjaChlKXtyZXR1cm4hMX19KCksdT1zJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIDEwMD09PW5ldyBCbG9iKFtuZXcgVWludDhBcnJheSgxMDApXSkuc2l6ZX1jYXRjaChlKXtyZXR1cm4hMX19KCksYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQmJkhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZS50b0Jsb2IsbD1jfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYXRvYixkPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBGaWxlUmVhZGVyfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgVVJMLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBJbWFnZVRvb2xzKCl7KDAsby5kZWZhdWx0KSh0aGlzLEltYWdlVG9vbHMpfXJldHVybigwLGEuZGVmYXVsdCkoSW1hZ2VUb29scyxudWxsLFt7a2V5OlwicmVzaXplXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHQmJihyPXQsdD17d2lkdGg6NjQwLGhlaWdodDo0ODB9KTt0LndpZHRoLHQuaGVpZ2h0O2lmKCFJbWFnZVRvb2xzLmlzU3VwcG9ydGVkKCl8fCFlLnR5cGUubWF0Y2goL2ltYWdlLiovKSlyZXR1cm4gcihlLCExKSwhMTtpZihlLnR5cGUubWF0Y2goL2ltYWdlXFwvZ2lmLykpcmV0dXJuIHIoZSwhMSksITE7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtyZXR1cm4gbi5vbmxvYWQ9ZnVuY3Rpb24obyl7dmFyIGk9bi53aWR0aCxhPW4uaGVpZ2h0LHM9ITE7aWYoaT49YSYmaT50LndpZHRoPyhhKj10LndpZHRoL2ksaT10LndpZHRoLHM9ITApOmE+dC5oZWlnaHQmJihpKj10LmhlaWdodC9hLGE9dC5oZWlnaHQscz0hMCksIXMpcmV0dXJuIHZvaWQgcihlLCExKTt2YXIgdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2lmKHUud2lkdGg9aSx1LmhlaWdodD1hLHUuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShuLDAsMCxpLGEpLGMpdS50b0Jsb2IoZnVuY3Rpb24oZSl7cihlLCEwKX0sZS50eXBlKTtlbHNle3ZhciBsPUltYWdlVG9vbHMuX3RvQmxvYih1LGUudHlwZSk7cihsLCEwKX19LEltYWdlVG9vbHMuX2xvYWRJbWFnZShuLGUpLCEwfX0se2tleTpcIl90b0Jsb2JcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUudG9EYXRhVVJMKHQpLG49ci5zcGxpdChcIixcIiksbz12b2lkIDA7bz1uWzBdLmluZGV4T2YoXCJiYXNlNjRcIik+PTA/YXRvYihuWzFdKTpkZWNvZGVVUklDb21wb25lbnQoblsxXSk7Zm9yKHZhciBpPW5ldyBBcnJheUJ1ZmZlcihvLmxlbmd0aCksYT1uZXcgVWludDhBcnJheShpKSxjPTA7YzxvLmxlbmd0aDtjKz0xKWFbY109by5jaGFyQ29kZUF0KGMpO3ZhciBsPW5bMF0uc3BsaXQoXCI6XCIpWzFdLnNwbGl0KFwiO1wiKVswXSxkPW51bGw7aWYocylkPW5ldyBCbG9iKFt1P2E6aV0se3R5cGU6bH0pO2Vsc2V7dmFyIGY9bmV3IEJsb2JCdWlsZGVyO2YuYXBwZW5kKGkpLGQ9Zi5nZXRCbG9iKGwpfXJldHVybiBkfX0se2tleTpcIl9sb2FkSW1hZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFVSTCl7dmFyIG49bmV3IEZpbGVSZWFkZXI7bi5vbmxvYWQ9ZnVuY3Rpb24odCl7ZS5zcmM9dC50YXJnZXQucmVzdWx0LHImJnIoKX0sbi5yZWFkQXNEYXRhVVJMKHQpfWVsc2UgZS5zcmM9VVJMLmNyZWF0ZU9iamVjdFVSTCh0KSxyJiZyKCl9fSx7a2V5OlwiaXNTdXBwb3J0ZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudCYmbCYmZH19XSksSW1hZ2VUb29sc30oKTt0LmRlZmF1bHQ9ZixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0NCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxMTQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMTcpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMjYpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMyksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cig0KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDM0KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDExNiksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLG09cigzNSksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9cigzNiksTz1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KFIpLEQ9cigzOSksdz1yKDEzMSksaj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHcpLEw9Ty5nZXRMb2dnZXIoXCJEYXRhT2JqZWN0T2JzZXJ2ZXJcIiksaz17QU5ZOlwiYW55XCIsU1RBUlQ6XCJzdGFydFwiLEVYQUNUOlwiZXhhY3RcIn0sVT1mdW5jdGlvbihlKXtmdW5jdGlvbiBEYXRhT2JqZWN0T2JzZXJ2ZXIoZSl7KDAsZi5kZWZhdWx0KSh0aGlzLERhdGFPYmplY3RPYnNlcnZlcik7dmFyIHQ9KDAsaC5kZWZhdWx0KSh0aGlzLChEYXRhT2JqZWN0T2JzZXJ2ZXIuX19wcm90b19ffHwoMCxsLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlcikpLmNhbGwodGhpcyxlKSkscj10O3JldHVybiByLl92ZXJzaW9uPWUudmVyc2lvbixyLl9maWx0ZXJzPXt9LHIuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtyLl9vbkZpbHRlcihlKX0pLHIuX2FsbG9jYXRlTGlzdGVuZXJzKCksdH1yZXR1cm4oMCxnLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlcixlKSwoMCx5LmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlcixbe2tleTpcInN5bmNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIEwuaW5mbyhcIltEYXRhT2JqZWN0T2JzZXJ2ZXJfc3luY10gc3luY2hyb25pc2luZyBcIiksbmV3IHUuZGVmYXVsdChmdW5jdGlvbih0LHIpe2UuX3N5bmNoZXIucmVhZChlLl9tZXRhZGF0YS51cmwpLnRoZW4oZnVuY3Rpb24ocil7TC5pbmZvKFwiW0RhdGFPYmplY3RPYnNlcnZlcl9zeW5jXSB2YWx1ZSB0byBzeW5jOiBcIixyKSwoMCxhLmRlZmF1bHQpKGUuZGF0YSwoMCxELmRlZXBDbG9uZSkoci5kYXRhKSksZS5fdmVyc2lvbj1yLnZlcnNpb24sZS5fbWV0YWRhdGEubGFzdE1vZGlmaWVkPXIubGFzdE1vZGlmaWVkLHIuY2hpbGRyZW5PYmplY3RzPyhlLnJlc3VtZUNoaWxkcmVucyhyLmNoaWxkcmVuT2JqZWN0cyksZS5fc3RvcmVDaGlsZHJlbnMoKSx0KCEwKSk6dCghMCl9KS5jYXRjaChmdW5jdGlvbihlKXtMLmluZm8oXCJbRGF0YU9iamVjdE9ic2VydmVyX3N5bmNdIHN5bmMgZmFpbGVkOiBcIixlKSx0KCExKX0pfSl9fSx7a2V5OlwiX3N0b3JlQ2hpbGRyZW5zXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e307KDAsby5kZWZhdWx0KShlLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49ZS5fY2hpbGRyZW5PYmplY3RzW3JdO3Rbcl09e30sKDAsby5kZWZhdWx0KShuKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Rbcl1bZV09e30sdFtyXVtlXS52YWx1ZT1uW2VdLm1ldGFkYXRhLHRbcl1bZV0uaWRlbnRpdHk9bltlXS5pZGVudGl0eX0pfSk7dmFyIHI9e2Zyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLHR5cGU6XCJjcmVhdGVcIixib2R5OntyZXNvdXJjZTplLl91cmwsYXR0cmlidXRlOlwiY2hpbGRyZW5PYmplY3RzXCIsdmFsdWU6dH19O2UuX2J1cy5wb3N0TWVzc2FnZShyKX19LHtrZXk6XCJfYWxsb2NhdGVMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpeygwLGIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZSksXCJfYWxsb2NhdGVMaXN0ZW5lcnNcIix0aGlzKS5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7ZS5fY2hhbmdlTGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCtcIi9jaGFuZ2VzXCIsZnVuY3Rpb24odCl7XCJ1cGRhdGVcIj09PXQudHlwZSYmKEwubG9nKFwiRGF0YU9iamVjdE9ic2VydmVyLVwiK2UuX3VybCtcIi1SQ1Y6IFwiLHQpLGUuX2NoYW5nZU9iamVjdChlLl9zeW5jT2JqLHQpKX0pfX0se2tleTpcIl9yZWxlYXNlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxiLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19ffHwoMCxsLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLFwiX3JlbGVhc2VMaXN0ZW5lcnNcIix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9kZWxldGVDaGlsZHJlbnMoKS50aGVuKGZ1bmN0aW9uKCl7ZS51bnN1YnNjcmliZSgpLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19KX19LHtrZXk6XCJ1bnN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOlwidW5zdWJzY3JpYmVcIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtMLmxvZyhcIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogXCIsdCksMjAwPT09dC5ib2R5LmNvZGUmJihlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdKX0pfX0se2tleTpcIm9uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLG49e3R5cGU6ay5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZihcIipcIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9ay5BTlk6KG4udHlwZT1rLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6XCJfb25GaWx0ZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOygwLG8uZGVmYXVsdCkodC5fZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj10Ll9maWx0ZXJzW3JdO24udHlwZT09PWsuQU5ZP24uY2FsbGJhY2soZSk6bi50eXBlPT09ay5TVEFSVD8wPT09ZS5maWVsZC5pbmRleE9mKHIpJiZuLmNhbGxiYWNrKGUpOm4udHlwZT09PWsuRVhBQ1QmJmUuZmllbGQ9PT1yJiZuLmNhbGxiYWNrKGUpfSl9fSx7a2V5Olwib25EaXNjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5fc3Vic2NyaWJlUmVnaXN0cmF0aW9uKCkudGhlbihmdW5jdGlvbigpe3QuX29uRGlzY29ubmVjdGVkPWUscigpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KX0pfX0se2tleTpcIl9zdWJzY3JpYmVSZWdpc3RyYXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZTpcInN1YnNjcmliZVwiLGZyb206dGhpcy5fb3duZXIsdG86dGhpcy5fc3luY2hlci5fcnVudGltZVVybCtcIi9zdWJzY3JpcHRpb25zXCIsYm9keTp7cmVzb3VyY2VzOlt0aGlzLl91cmwrXCIvcmVnaXN0cmF0aW9uXCJdfX07cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtMLmxvZyhcIltEYXRhT2JqZWN0T2JzZXJ2ZXIuX3N1YnNjcmliZVJlZ2lzdHJhdGlvbl0gXCIrZS5fdXJsK1wiIHJjdmVkIHJlcGx5IFwiLHQpLDIwMD09PXQuYm9keS5jb2RlPyhlLl9nZW5lcmF0ZUxpc3RlbmVyKGUuX3VybCtcIi9yZWdpc3RyYXRpb25cIikscigpKTooTC5lcnJvcihcIkVycm9yIHN1YnNjcmliaW5nIHJlZ2lzdHJhdGlvbiBzdGF0dXMgZm9yIFwiLGUuX3VybCksbihcIkVycm9yIHN1YnNjcmliaW5nIHJlZ2lzdHJhdGlvbiBzdGF0dXMgZm9yIFwiK2UuX3VybCkpfSl9KX19LHtrZXk6XCJfZ2VuZXJhdGVMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fYnVzLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7TC5sb2coXCJbRGF0YU9iamVjdE9ic2VydmVyLnJlZ2lzdHJhdGlvbk5vdGlmaWNhdGlvbl0gXCIrdC5fdXJsK1wiOiBcIixlKSxlLmJvZHkudmFsdWUmJlwiZGlzY29ubmVjdGVkXCI9PT1lLmJvZHkudmFsdWUmJnQuX29uRGlzY29ubmVjdGVkJiYoTC5sb2coXCJbRGF0YU9iamVjdE9ic2VydmVyXSBcIit0Ll91cmwrXCI6IHdhcyBkaXNjb25uZWN0ZWQgXCIsZSksdC5fb25EaXNjb25uZWN0ZWQoKSl9KX19LHtrZXk6XCJleGVjdXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihvLGkpe3ZhciBhPXt0eXBlOlwiZXhlY3V0ZVwiLGZyb206ci5fb3duZXIsdG86bi5fdXJsLGJvZHk6e21ldGhvZDplLHBhcmFtczp0fX07bi5fYnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24odCl7TC5sb2coXCJbRGF0YU9iamVjdE9ic2VydmVyLmV4ZWN1dGVdIFwiK24uX3VybCtcIiByY3ZlZCByZXBseSBcIix0KSwyMDA9PT10LmJvZHkuY29kZT9vKCk6KEwud2FybihcIltEYXRhT2JqZWN0T2JzZXJ2ZXIuZXhlY3V0ZV0gZXhlY3V0aW9uIG9mIG1ldGhvZCBcIitlK1wiIHdhcyByZWplY3QgYnkgcmVwb3J0ZXJcIiksaShcIltEYXRhT2JqZWN0T2JzZXJ2ZXIuZXhlY3V0ZV0gZXhlY3V0aW9uIG9mIG1ldGhvZCBcIitlK1wiIHdhcyByZWplY3QgYnkgcmVwb3J0ZXJcIikpfSl9KX19XSksRGF0YU9iamVjdE9ic2VydmVyfShqLmRlZmF1bHQpO3QuZGVmYXVsdD1VLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzNiksdT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHMpLGM9dS5nZXRMb2dnZXIoXCJEYXRhUHJvdmlzaW9uYWxcIiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIERhdGFQcm92aXNpb25hbChlLHQscixuKXsoMCxvLmRlZmF1bHQpKHRoaXMsRGF0YVByb3Zpc2lvbmFsKTt2YXIgaT10aGlzO2kuX293bmVyPWUsaS5fdXJsPXQsaS5fYnVzPXIsaS5fY2hpbGRyZW49bixpLl9jaGFuZ2VzPVtdLGkuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYS5kZWZhdWx0KShEYXRhUHJvdmlzaW9uYWwsW3trZXk6XCJfYWxsb2NhdGVMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCxmdW5jdGlvbih0KXtjLmxvZyhcIkRhdGFQcm92aXNpb25hbC1cIitlLl91cmwrXCItUkNWOiBcIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6XCJfcmVsZWFzZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OlwiYXBwbHlcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6XCJjaGlsZHJlblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbn19XSksRGF0YVByb3Zpc2lvbmFsfSgpO3QuZGVmYXVsdD1sLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzOSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIE5vdGlmaWNhdGlvbkhhbmRsZXIoZSl7aWYoKDAsby5kZWZhdWx0KSh0aGlzLE5vdGlmaWNhdGlvbkhhbmRsZXIpLCFlKXRocm93IEVycm9yKFwiW05vdGlmaWNhdGlvbkhhbmRsZXIgQ29uc3RydWN0b3JdIGJ1cyBpbnB1dCBpcyBtYW5kYXRvcnlcIik7dGhpcy5fYnVzPWUsdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyPXt9fXJldHVybigwLGEuZGVmYXVsdCkoTm90aWZpY2F0aW9uSGFuZGxlcixbe2tleTpcIm9uTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXJbZV09dH19LHtrZXk6XCJvbkNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuaGFzT3duUHJvcGVydHkoXCJyZXNvdXJjZVwiKT9lLmJvZHkucmVzb3VyY2U6ZS5mcm9tLnNsaWNlKDAsLTEzKSxuPSgwLHMuZGl2aWRlVVJMKShyKSxvPW4uZG9tYWluLGk9ci5zcGxpdChcIjovL1wiKVswXSxhPWZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAwLGRlc2M6XCJCYWQgUmVxdWVzdDogXCIrcn19KX07ZS5ib2R5Lmhhc093blByb3BlcnR5KFwic291cmNlXCIpfHxhKFwiTWlzc2luZyBzb3VyY2VcIiksZS5ib2R5Lmhhc093blByb3BlcnR5KFwic2NoZW1hXCIpfHxhKFwiTWlzc2luZyBzY2hlbWFcIiksZS5ib2R5Lmhhc093blByb3BlcnR5KFwidmFsdWVcIil8fGEoXCJNaXNzaW5nIHZhbHVlXCIpLGUuYm9keS5oYXNPd25Qcm9wZXJ0eShcImlkZW50aXR5XCIpfHxhKFwiTWlzc2luZyBpZGVudGl0eVwiKTt2YXIgdT17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLGRvbWFpbjpvLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksdG86ZS50byx2aWE6ZS5ib2R5LnZpYSxhY2s6ZnVuY3Rpb24ocil7dmFyIG49MjAwO3ImJihuPXIpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bn19KX0sZXJyb3I6ZnVuY3Rpb24oZSl7YShlKX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlcltpXSYmdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyW2ldKHUpfX0se2tleTpcIm9uRGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXQuX29ic2VydmVyc1tyXSxvPXtmcm9tOnQub3duZXIsdG86dC5fc3ViVVJMLGlkOmUuaWQsdHlwZTpcInVuc3Vic2NyaWJlXCIsYm9keTp7cmVzb3VyY2U6ZS5ib2R5LnJlc291cmNlfX07aWYodC5fYnVzLnBvc3RNZXNzYWdlKG8pLGRlbGV0ZSB0Ll9vYnNlcnZlcnNbcl0sbil7dmFyIGk9e3R5cGU6ZS50eXBlLHVybDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2s6ZnVuY3Rpb24ocil7dmFyIG89MjAwO3ImJihvPXIpLDIwMD09PW8mJm4uZGVsZXRlKCksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpvLHNvdXJjZTp0Ll9vd25lcn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGxvZy5sb2coXCJOT1RJRklDQVRJT04tRVZFTlQ6IFwiLGkpLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihpKSl9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fV0pLE5vdGlmaWNhdGlvbkhhbmRsZXJ9KCk7dC5kZWZhdWx0PXUsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMjYpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDM1KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDEyNSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gRGlzY292ZXJlZE9iamVjdChlLHQscixuLGkpeygwLGEuZGVmYXVsdCkodGhpcyxEaXNjb3ZlcmVkT2JqZWN0KTt2YXIgcz0oMCx1LmRlZmF1bHQpKHRoaXMsKERpc2NvdmVyZWRPYmplY3QuX19wcm90b19ffHwoMCxvLmRlZmF1bHQpKERpc2NvdmVyZWRPYmplY3QpKS5jYWxsKHRoaXMsZS5oeXBlcnR5SUR8fGUudXJsLHQscixuKSk7cmV0dXJuIHMuX2RhdGE9ZSxzLl9kaXNjb3Zlcnk9aSxzfXJldHVybigwLGYuZGVmYXVsdCkoRGlzY292ZXJlZE9iamVjdCxlKSwoMCxsLmRlZmF1bHQpKERpc2NvdmVyZWRPYmplY3QsW3trZXk6XCJkYXRhXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLCgwLGwuZGVmYXVsdCkoRGlzY292ZXJlZE9iamVjdCxbe2tleTpcImNoZWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e2JvZHk6e319O2UuX2Rpc2NvdmVyZWRPYmplY3RVUkwuc3RhcnRzV2l0aChcImh5cGVydHk6Ly9cIik/ZS5fZGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eVBlclVSTChlLl9kaXNjb3ZlcmVkT2JqZWN0VVJMKS50aGVuKGZ1bmN0aW9uKHIpe3QuYm9keS5zdGF0dXM9ci5zdGF0dXMsZS5fcHJvY2Vzc05vdGlmaWNhdGlvbih0KX0pOmUuX2Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyVVJMKGUuX2Rpc2NvdmVyZWRPYmplY3RVUkwpLnRoZW4oZnVuY3Rpb24ocil7dC5ib2R5LnN0YXR1cz1yLnN0YXR1cyxlLl9wcm9jZXNzTm90aWZpY2F0aW9uKHQpfSl9fV0pLERpc2NvdmVyZWRPYmplY3R9KHkuZGVmYXVsdCk7dC5kZWZhdWx0PXYsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIFNlYXJjaChlLHQpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxTZWFyY2gpLCFlKXRocm93IG5ldyBFcnJvcihcIlRoZSBkaXNjb3ZlcnkgY29tcG9uZW50IGlzIGEgbmVlZGVkIHBhcmFtZXRlclwiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgaWRlbnRpdHlNYW5hZ2VyIGNvbXBvbmVudCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7dmFyIHI9dGhpcztyLmRpc2NvdmVyeT1lLHIuaWRlbnRpdHlNYW5hZ2VyPXR9cmV0dXJuKDAsbC5kZWZhdWx0KShTZWFyY2gsW3trZXk6XCJteUlkZW50aXR5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7ZS5pZGVudGl0eU1hbmFnZXIuZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCgpLnRoZW4oZnVuY3Rpb24oZSl7dChlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KX0pfX0se2tleTpcImh5cGVydGllc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXthcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSYmYXJndW1lbnRzWzNdfX0se2tleTpcInVzZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0mJmFyZ3VtZW50c1s0XTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbmVlZCB0byBwcm92aWRlIGEgbGlzdCBvZiB1c2Vyc1wiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbmVlZCB0byBwcm92aWRlIGEgbGlzdCBvZiBkb21haW5zXCIpO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIllvdSBuZWVkIHRvIHByb3ZpZGUgYSBsaXN0IG9mIHJlc291cmNlc1wiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbmVlZCB0byBwcm92aWRlIGEgbGlzdCBvZiBzY2hlbWVzXCIpO3ZhciBzPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24odSxjKXtpZigwPT09ZS5sZW5ndGgpdShlKTtlbHNle3ZhciBsPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlLG8pe3ZhciBhPXRbb107aT9sLnB1c2gocy5kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGEoZSxyLG4pKTpsLnB1c2gocy5kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXMoZSxyLG4sYSkpfSksYS5kZWZhdWx0LmFsbChsLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlfSxmdW5jdGlvbihlKXtyZXR1cm4gZX0pfSkpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tYXAoZnVuY3Rpb24oZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShcImh5cGVydHlJRFwiKSlyZXR1cm4gZTt2YXIgdD0oMCxvLmRlZmF1bHQpKGUpLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uKHQscil7dmFyIG49bmV3IERhdGUoZVtyXS5sYXN0TW9kaWZpZWQpO3JldHVybiBuZXcgRGF0ZShlW3RdLmxhc3RNb2RpZmllZCkuZ2V0VGltZSgpPG4uZ2V0VGltZSgpP3I6dH0pO3JldHVybiBlW3RdfSkscj10LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eShcImh5cGVydHlJRFwiKX0pO2UuZm9yRWFjaChmdW5jdGlvbihlKXtpZihcIk5vIEh5cGVydHkgd2FzIGZvdW5kXCIhPT1lKXJldHVybiB1KHIpfSksYyhcIk5vIEh5cGVydHkgd2FzIGZvdW5kXCIpfSkuY2F0Y2goZnVuY3Rpb24odCl7dShlKX0pfX0pfX1dKSxTZWFyY2h9KCk7dC5kZWZhdWx0PWQsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNjUpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPWZ1bmN0aW9uIE1lc3NhZ2VCb2R5SWRlbnRpdHkoZSx0LHIsbixpLHMsdSxjKXtpZigoMCxvLmRlZmF1bHQpKHRoaXMsTWVzc2FnZUJvZHlJZGVudGl0eSksIXMpdGhyb3cgbmV3IEVycm9yKFwiSURQIHNob3VsZCBiZSBhIHBhcmFtZXRlclwiKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJ1c2VybmFtZSBzaG91bGQgYmUgYSBwYXJhbWV0ZXJcIik7dGhpcy5pZHA9cyx1JiYodGhpcy5hc3NlcnRpb249dSksdGhpcy51c2VyUHJvZmlsZT1uZXcgYS5kZWZhdWx0KGUsdCxyLG4saSxjKX07dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTE0KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPWZ1bmN0aW9uIFVzZXJQcm9maWxlKGUsdCxyLG4saSxzKXsoMCxhLmRlZmF1bHQpKHRoaXMsVXNlclByb2ZpbGUpLGUmJih0aGlzLnByZWZlcnJlZF91c2VybmFtZT1lKSxyJiYodGhpcy5waWN0dXJlPXIpLG4mJih0aGlzLm5hbWU9biksaSYmKHRoaXMubG9jYWxlPWkpLHQmJih0aGlzLnVzZXJVUkw9dCkscyYmKDAsby5kZWZhdWx0KSh0aGlzLHMpfTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxMTQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDE2NyksZj1yKDEzOSkscD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGYpLHk9cigxNjkpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBDaGF0TWFuYWdlcihlLHQscixuLG8pe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxDaGF0TWFuYWdlciksIWUpdGhyb3cgbmV3IEVycm9yKFwiW0NoYXRNYW5hZ2VyLmNvbnN0cnVjdG9yXSBUaGUgbXlVcmwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIltDaGF0TWFuYWdlci5jb25zdHJ1Y3Rvcl0gVGhlIE1pbmlCdXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIltDaGF0TWFuYWdlci5jb25zdHJ1Y3Rvcl0gVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO3ZhciBpPXRoaXM7bnx8KG49by5jcmVhdGVTeW5jaGVyKGUsdCxyKSksaS5fcnVudGltZVVSTD1yLnJ1bnRpbWVVUkw7dmFyIGE9by5kaXZpZGVVUkwoaS5fcnVudGltZVVSTCkuZG9tYWluLHM9by5jcmVhdGVEaXNjb3ZlcnkoZSxyLnJ1bnRpbWVVUkwsdCksYz1vLmNyZWF0ZUlkZW50aXR5TWFuYWdlcihlLHIucnVudGltZVVSTCx0KTtpLl9vYmplY3REZXNjVVJMPVwiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuXCIrYStcIi8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0NvbW11bmljYXRpb25cIixpLl9yZXBvcnRlcnNDb250cm9sbGVycz17fSxpLl9vYnNlcnZlcnNDb250cm9sbGVycz17fSxpLl9teVVybD1lLGkuX2J1cz10LGkuX3N5bmNoZXI9bixpLl9kb21haW49YSxpLmRpc2NvdmVyeT1zLGkuaWRlbnRpdHlNYW5hZ2VyPWMsaS5jdXJyZW50SWRlbnRpdHksaS5zZWFyY2g9by5jcmVhdGVTZWFyY2gocyxjKSxpLmNvbW11bmljYXRpb25PYmplY3Q9ZC5jb21tdW5pY2F0aW9uT2JqZWN0LGkuY29tbXVuaWNhdGlvbkNoaWxkcmVuPWQuY29tbXVuaWNhdGlvbkNoaWxkcmVufXJldHVybigwLGwuZGVmYXVsdCkoQ2hhdE1hbmFnZXIsW3trZXk6XCJwcm9jZXNzTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihcImNyZWF0ZVwiPT09ZS50eXBlJiZ0Ll9vbkludml0YXRpb24mJnQuX29uSW52aXRhdGlvbihlKSxcImRlbGV0ZVwiPT09ZS50eXBlKXtlLmFjaygyMDApLHQuX29ic2VydmVyc0NvbnRyb2xsZXJzW2UudXJsXS5jbG9zZUV2ZW50PWUsZGVsZXRlIHQuX29ic2VydmVyc0NvbnRyb2xsZXJzW2UudXJsXSx0Ll9vYnNlcnZlcnNDb250cm9sbGVycy5jbG9zZUV2ZW50PWUsdC5jb21tdW5pY2F0aW9uT2JqZWN0PWQuY29tbXVuaWNhdGlvbk9iamVjdDtmb3IodmFyIHIgaW4gdGhpcy5fcmVwb3J0ZXJzQ29udHJvbGxlcnMpdGhpcy5fcmVwb3J0ZXJzQ29udHJvbGxlcnNbcl0uY2xvc2UoZSk7Zm9yKHZhciBuIGluIHRoaXMuX29ic2VydmVyc0NvbnRyb2xsZXJzKXRoaXMuX29ic2VydmVyc0NvbnRyb2xsZXJzW25dLmNsb3NlKGUpfX19LHtrZXk6XCJteUlkZW50aXR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKGUpcmV0dXJuIHIoZSk7dC5fbXlVcmwuaW5jbHVkZXMoXCJoeXBlcnR5Oi8vXCIpP3QuaWRlbnRpdHlNYW5hZ2VyLmRpc2NvdmVyVXNlclJlZ2lzdGVyZWQoKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSk6dC5pZGVudGl0eU1hbmFnZXIuZGlzY292ZXJJZGVudGl0eVBlcklkUCgpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleTpcImNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LG49dGhpcyxpPW4uX3N5bmNoZXI7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocyx1KXtuLmNvbW11bmljYXRpb25PYmplY3Q9ZC5jb21tdW5pY2F0aW9uT2JqZWN0LG4uY29tbXVuaWNhdGlvbk9iamVjdC5jc2VxPTEsbi5jb21tdW5pY2F0aW9uT2JqZWN0LnN0YXJ0aW5nVGltZT0obmV3IERhdGUpLnRvSlNPTigpLG4uY29tbXVuaWNhdGlvbk9iamVjdC5zdGF0dXM9ZC5Db21tdW5pY2F0aW9uU3RhdHVzLk9QRU47dmFyIGM9dm9pZCAwO24ubXlJZGVudGl0eSgpLnRoZW4oZnVuY3Rpb24obCl7Yz1sO3ZhciBkPW5ldyB5LlVzZXJJbmZvKG4uX215VXJsLG4uX2RvbWFpbixsKTtuLmNvbW11bmljYXRpb25PYmplY3QucGFydGljaXBhbnRzW2wudXNlclVSTF09ZDt2YXIgZj1bXSx2PVtdLGg9e307dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW4uZGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzRE8oZS51c2VyLFtcImNvbW1cIl0sW1wiY2hhdFwiXSxlLmRvbWFpbik7Zi5wdXNoKHQpfSksYS5kZWZhdWx0LmFsbChmKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBhPVtdO3QuZm9yRWFjaChmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7XCJsaXZlXCI9PT1lLmRhdGEuc3RhdHVzPyhhLnB1c2goZS5kYXRhLmh5cGVydHlJRCksaFtlLmRhdGEuaHlwZXJ0eUlEXT1lKTp2Lmxlbmd0aDw1JiZ2LnB1c2goZSl9KX0pO3ZhciBzPSgwLG8uZGVmYXVsdCkoe3Jlc291cmNlczpbXCJjaGF0XCJdLG11dHVhbDohMH0scik7cmV0dXJuIGRlbGV0ZSBzLm5hbWUsaS5jcmVhdGUobi5fb2JqZWN0RGVzY1VSTCxhLG4uY29tbXVuaWNhdGlvbk9iamVjdCwhMCwhMSxlLHt9LHMpfSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1uZXcgcC5kZWZhdWx0KGksbi5kaXNjb3Zlcnksbi5fZG9tYWluLG4uc2VhcmNoLGMsbik7dC5kYXRhT2JqZWN0UmVwb3J0ZXI9ZSxuLl9yZXBvcnRlcnNDb250cm9sbGVyc1tlLnVybF09dCxlLmludml0YXRpb25zLmxlbmd0aD4wJiZ0Lmludml0YXRpb25zSGFuZGxlci5wcm9jZXNzSW52aXRhdGlvbnMoaCxlKSx2Lmxlbmd0aD4wJiZ0Lmludml0YXRpb25zSGFuZGxlci5pbnZpdGVEaXNjb25uZWN0ZWRIeXBlcnRpZXModixlKSxzKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7dShlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHUoZSl9KX0pfX0se2tleTpcIm9uSW52aXRhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uSW52aXRhdGlvbj1lfX0se2tleTpcImpvaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdLG49dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihvLGkpe3ZhciBhPW4uX3N5bmNoZXIscz12b2lkIDA7bi5teUlkZW50aXR5KHIpLnRoZW4oZnVuY3Rpb24ocil7cmV0dXJuIHM9cixhLnN1YnNjcmliZShuLl9vYmplY3REZXNjVVJMLGUsITAsITEsdCwhMCxyKX0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHAuZGVmYXVsdChhLG4uZGlzY292ZXJ5LG4uX2RvbWFpbixuLnNlYXJjaCxzLG4pO28odCksdC5kYXRhT2JqZWN0T2JzZXJ2ZXI9ZSxuLl9vYnNlcnZlcnNDb250cm9sbGVyc1tlLnVybF09dH0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koZSl9KX0pfX1dKSxDaGF0TWFuYWdlcn0oKTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dC5Db21tdW5pY2F0aW9uU3RhdHVzPXtPUEVOOlwib3BlblwiLFBFTkRJTkc6XCJwZW5kaW5nXCIsQ0xPU0VEOlwiY2xvc2VkXCIsUEFVU0VEOlwicGF1c2VkXCIsRkFJTEVEOlwiZmFpbGVkXCJ9LHQuY29tbXVuaWNhdGlvbk9iamVjdD17c3RhcnRpbmdUaW1lOlwiXCIsc3RhdHVzOlwiXCIscGFydGljaXBhbnRzOnt9fSx0LmNvbW11bmljYXRpb25DaGlsZHJlbj17cGFyZW50OlwiY29tbXVuaWNhdGlvblwiLGxpc3RlbmVyOlwicmVzb3VyY2VzXCIsdHlwZTpcIkh5cGVydHlSZXNvdXJjZVwifX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIEludml0YXRpb25zSGFuZGxlcihlKXtpZigoMCx1LmRlZmF1bHQpKHRoaXMsSW52aXRhdGlvbnNIYW5kbGVyKSwhZSl0aHJvdyBFcnJvcihcImh5cGVydHlVUkwgaXMgYSBuZWNlc3NhcnkgZGVwZW5kZWN5XCIpO3ZhciB0PXRoaXM7dC5faHlwZXJ0eVVSTD1lLHQuX3BlbmRpbmc9e319cmV0dXJuKDAsbC5kZWZhdWx0KShJbnZpdGF0aW9uc0hhbmRsZXIsW3trZXk6XCJpbnZpdGVEaXNjb25uZWN0ZWRIeXBlcnRpZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX3BlbmRpbmdbdF18fChyLl9wZW5kaW5nW3RdPXt9KSxyLl9wZW5kaW5nW3RdW2UuZGF0YS5oeXBlcnR5SURdPWUsZS5vbkxpdmUoci5faHlwZXJ0eVVSTCxmdW5jdGlvbigpe3QuaW52aXRlT2JzZXJ2ZXJzKFtlLmRhdGEuaHlwZXJ0eUlEXSksZS51bnN1YnNjcmliZUxpdmUoci5faHlwZXJ0eVVSTCksZGVsZXRlIHIuX3BlbmRpbmdbdF1bZS5kYXRhLmh5cGVydHlJRF19KX0pfX0se2tleTpcInByb2Nlc3NJbnZpdGF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXRoaXMsbz10Lmludml0YXRpb25zfHxbXTtvLmZvckVhY2goZnVuY3Rpb24obyl7by50aGVuKGZ1bmN0aW9uKGUpe3IuX2ludml0YXRpb25zUmVzcG9uc2UmJnIuX2ludml0YXRpb25zUmVzcG9uc2UoZSl9KS5jYXRjaChmdW5jdGlvbihvKXtyLl9pbnZpdGF0aW9uc1Jlc3BvbnNlJiZyLl9pbnZpdGF0aW9uc1Jlc3BvbnNlKG8pLG4uaW52aXRlRGlzY29ubmVjdGVkSHlwZXJ0aWVzKFtlW28uaW52aXRlZF1dLHQpfSl9KX19LHtrZXk6XCJyZXN1bWVEaXNjb3Zlcmllc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLGkpe3ZhciBzPXt9LHU9W10sYz1bXSxsPVtdO2UucmVzdW1lRGlzY292ZXJpZXMoKS50aGVuKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLmRhdGEucmVzb3VyY2VzJiZcImNoYXRcIj09PWUuZGF0YS5yZXNvdXJjZXNbMF0mJihcImxpdmVcIj09PWUuZGF0YS5zdGF0dXM/KHNbZS5kYXRhLmh5cGVydHlJRF09ZSx1LnB1c2goZS5kYXRhLmh5cGVydHlJRCksbC5wdXNoKGUudW5zdWJzY3JpYmVMaXZlKHIuX2h5cGVydHlVUkwpKSk6Yy5wdXNoKGUpKX0pLGMubGVuZ3RoPjAmJnIuaW52aXRlRGlzY29ubmVjdGVkSHlwZXJ0aWVzKGMsdCksKDAsby5kZWZhdWx0KShzKS5sZW5ndGg+MD8odC5pbnZpdGVPYnNlcnZlcnModSksdC5pbnZpdGF0aW9ucy5sZW5ndGg+MCYmci5wcm9jZXNzSW52aXRhdGlvbnMocyx0KSxhLmRlZmF1bHQuYWxsKGwpLnRoZW4oZnVuY3Rpb24oKXtuKCl9KSk6bigpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZWplY3QoXCJbR3JvdXBDaGF0TWFuYWdlci5JbnZpdGF0aW9uc0hhbmRsZXIucmVzdW1lRGlzY292ZXJpZXNdIGZhaWxlZCB8IFwiLGUpfSl9fSx7a2V5OlwiY2xlYW5JbnZpdGF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10Ll9wZW5kaW5nW2VdO3JldHVybiByP25ldyBhLmRlZmF1bHQoZnVuY3Rpb24oZSxuKXt2YXIgaT0oMCxvLmRlZmF1bHQpKHIpLHM9W107aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3MucHVzaChyW2VdLnVuc3Vic2NyaWJlTGl2ZSh0Ll9oeXBlcnR5VVJMKSl9KSxhLmRlZmF1bHQuYWxsKGkpLnRoZW4oZnVuY3Rpb24oKXtlKCl9KX0pOmEuZGVmYXVsdC5yZXNvbHZlKCl9fSx7a2V5OlwiaW52aXRhdGlvblJlc3BvbnNlXCIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2ludml0YXRpb25zUmVzcG9uc2U9ZX19XSksSW52aXRhdGlvbnNIYW5kbGVyfSgpO3QuZGVmYXVsdD1kLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlVzZXJJbmZvPXZvaWQgMDt2YXIgbj1yKDE3MCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDM5KTt0LlVzZXJJbmZvPWZ1bmN0aW9uIFVzZXJJbmZvKGUsdCxyKXt2YXIgbjsoMCxhLmRlZmF1bHQpKHRoaXMsVXNlckluZm8pO3ZhciBpPSgwLHMuZGVlcENsb25lKShyKTtyZXR1cm4gci5oYXNPd25Qcm9wZXJ0eShcInVzZXJQcm9maWxlXCIpfHwoaS51c2VyUHJvZmlsZT1yKSxuPXtoeXBlcnR5VVJMOmUsZG9tYWluOnR9LCgwLG8uZGVmYXVsdCkobixcImRvbWFpblwiLHQpLCgwLG8uZGVmYXVsdCkobixcImlkZW50aXR5XCIsaSksbn19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig2MCksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIHQgaW4gZT8oMCxvLmRlZmF1bHQpKGUsdCx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOmVbdF09cixlfX1dKX0pOyIsIi8qKlxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxuKlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKi9cbmltcG9ydCB7IFNhbmRib3gsIFNhbmRib3hSZWdpc3RyeSB9IGZyb20gJ3J1bnRpbWUtY29yZS9kaXN0L3NhbmRib3gnO1xuaW1wb3J0IE1pbmlCdXMgZnJvbSAncnVudGltZS1jb3JlL2Rpc3QvbWluaWJ1cyc7XG5cbnNlbGYuX21pbmlCdXMgPSBuZXcgTWluaUJ1cygpO1xuc2VsZi5fbWluaUJ1cy5fb25Qb3N0TWVzc2FnZSA9IGZ1bmN0aW9uKG1zZykge1xuICBzZWxmLnBvc3RNZXNzYWdlKG1zZyk7XG59O1xuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgc2VsZi5fbWluaUJ1cy5fb25NZXNzYWdlKGV2ZW50LmRhdGEpO1xufSk7XG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24ocmVhc29uKSB7XG4gIHRocm93IHJlYXNvbjtcbn0pO1xuXG5zZWxmLl9yZWdpc3RyeSA9IG5ldyBTYW5kYm94UmVnaXN0cnkoc2VsZi5fbWluaUJ1cyk7XG5zZWxmLl9yZWdpc3RyeS5fY3JlYXRlID0gZnVuY3Rpb24odXJsLCBzb3VyY2VDb2RlLCBjb25maWcsIGZhY3RvcnkpIHtcbiAgY29uc29sZS5sb2coJ0NvbnRleHRTZXJ2aWNlUHJvdmlkZXI6IGNyZWF0ZSBmYWN0b3J5OicsIGZhY3RvcnkpO1xuICB0cnkge1xuICAgIGV2YWwuYXBwbHkoc2VsZiwgW3NvdXJjZUNvZGVdKTtcblxuICAgIGlmICh0eXBlb2YgYWN0aXZhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBhY3RpdmF0ZSh1cmwsIHNlbGYuX21pbmlCdXMsIGNvbmZpZywgZmFjdG9yeSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBhY3RpdmF0ZS5kZWZhdWx0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gYWN0aXZhdGUuZGVmYXVsdCh1cmwsIHNlbGYuX21pbmlCdXMsIGNvbmZpZywgZmFjdG9yeSk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0NvbnRleHQgU2VydmljZSBQcm92aWRlcl0gLSBFcnJvcjogJywgZXJyb3IpO1xuICAgIHRocm93IEpTT04uc3RyaW5naWZ5KGVycm9yLm1lc3NhZ2UpO1xuICB9XG59O1xuIl19"}
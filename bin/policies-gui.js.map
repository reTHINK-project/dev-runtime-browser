{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/admin/PoliciesGUI.js","src/admin/PoliciesManager.js"],"names":[],"mappings":"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","file":"policies-gui.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import PoliciesManager from './PoliciesManager';\r\n\r\nclass PoliciesGUI {\r\n\r\n  constructor(pepGuiURL, pepURL, messageBus) {\r\n    let _this = this;\r\n    _this.policiesManager = new PoliciesManager(pepGuiURL, pepURL, messageBus);\r\n    // assume prepareAttributes is called after this\r\n  }\r\n\r\n  prepareAttributes() {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.policiesManager.prepareAttributes().then(() => {\r\n        _this.elements = _this._setElements();\r\n        _this._setListeners();\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  _addMember() {\r\n    let _this = this;\r\n    let group = event.target.id;\r\n    $('.member-new-intro').html('<h5>Add a member to a group</h5><p>Insert a user email below to add to the \"' + group + '\" group.</p>');\r\n    $('.member-new-modal').openModal();\r\n    $('.member-new-ok').off();\r\n    $('.member-new-ok').on('click', (event) => {\r\n      let member = $('#member-new').val();\r\n      $('#member-new').val('');\r\n      _this.policiesManager.addToGroup(group, member).then(() => {\r\n        $('.member-new-modal').closeModal();\r\n        _this._manageGroups();\r\n      });\r\n    });\r\n  }\r\n\r\n  _createGroup() {\r\n    let _this = this;\r\n    $('#group-new-name').val('');\r\n    $('.group-new-modal').openModal();\r\n    $('.group-new-ok').on('click', (event) => {\r\n      let groupName = $('#group-new-name').val();\r\n      _this.policiesManager.createGroup(groupName).then(() => {\r\n        _this._manageGroups();\r\n      });\r\n    });\r\n  }\r\n\r\n  _addPolicy() {\r\n    let _this = this;\r\n    $('#policy-new-title').val('');\r\n    $('.combining').html('');\r\n    let algorithms = ['Block overrides', 'Allow overrides', 'First applicable'];\r\n    $('.combining').append(this._getOptions('comb-algorithm', 'Choose a combining algorithm', algorithms));\r\n    $('.policy-new').openModal();\r\n\r\n    $('.policy-new-ok').off();\r\n    $('.policy-new-ok').on('click', (event) => {\r\n      let policyTitle = $('#policy-new-title').val();\r\n      if (!policyTitle) {\r\n        Materialize.toast('Invalid policy title', 4000);\r\n      } else {\r\n        let combiningAlgorithm = $('#comb-algorithm').val();\r\n        _this.policiesManager.addPolicy(policyTitle, combiningAlgorithm).then(() => {\r\n          $('.help-menu').addClass('hide');\r\n          $('.policy-new').closeModal();\r\n          _this._goHome();\r\n        });\r\n      }\r\n    });\r\n    $('.help-btn').off();\r\n    $('.help-btn').on('click', (event) => {\r\n      $('.help-menu').removeClass('hide');\r\n    });\r\n  }\r\n\r\n  _decreaseRulePriority() {\r\n    let _this = this;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let thisPriority = parseInt(splitId[splitId.length - 1]);\r\n    splitId.pop();\r\n    let policyTitle = splitId.join(':');\r\n    _this.policiesManager.getPolicy(policyTitle).then((policy) => {\r\n      let lastPriority = policy.getLastPriority();\r\n      if (lastPriority != thisPriority) {\r\n        let newPriority = parseInt(thisPriority + 1);\r\n        _this.policiesManager.decreaseRulePriority(policyTitle, thisPriority, newPriority).then(() => {\r\n          _this._goHome();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  _deleteMember() {\r\n    let _this = this;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split('::');\r\n    let member = splitId[splitId.length - 1];\r\n    splitId.pop();\r\n    let group = splitId.join('::');\r\n    _this.policiesManager.removeFromGroup(group, member).then(() => {\r\n      _this._manageGroups();\r\n    });\r\n  }\r\n\r\n  _deleteGroup() {\r\n    let _this = this;\r\n    let groupName = event.target.closest('tr').children[0].id;\r\n    _this.policiesManager.deleteGroup(groupName).then(() => {\r\n      _this._manageGroups();\r\n    });\r\n  }\r\n\r\n  _deletePolicy() {\r\n    let _this = this;\r\n    let policyTitle = event.target.closest('tr').id;\r\n    _this.policiesManager.deletePolicy(policyTitle).then(() => {\r\n      _this._goHome();\r\n    });\r\n  }\r\n\r\n  _deleteRule() {\r\n    let _this = this;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let priority = splitId[splitId.length - 1];\r\n    splitId.pop();\r\n    let policyTitle = splitId.join(':');\r\n    let rule = _this.policiesManager.getRuleOfPolicy(policyTitle, priority);\r\n\r\n    _this.policiesManager.deleteRule(policyTitle, rule).then(() => {\r\n      _this._goHome();\r\n    });\r\n  }\r\n\r\n  _getActivePolicy() {\r\n    let _this = this;\r\n    _this.policiesManager.getActivePolicy().then((activeUserPolicy) => {\r\n      $('.policy-active').html('');\r\n      _this.policiesManager.getPoliciesTitles().then((policies) => {\r\n        policies.push('Deactivate all policies');\r\n\r\n        $('.policy-active').append(_this._getOptions('policies-list', 'Click to activate a policy', policies, activeUserPolicy));\r\n\r\n        $('#policies-list').on('click', (event) => {\r\n          let policyTitle = $('#policies-list').find(\":selected\")[0].textContent;\r\n          if (policyTitle === 'Deactivate all policies') {\r\n            policyTitle = undefined;\r\n          }\r\n          _this.policiesManager.updateActivePolicy(policyTitle);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  _getGroupOptions(title, keys, scopes, lists) {\r\n    let list = '<option disabled selected>' + title + '</option>';\r\n\r\n    for (let i in keys) {\r\n      list += '<optgroup label=' + keys[i] + '>';\r\n      for (let j in lists[i]) {\r\n        list += '<option id=\"' + scopes[i] + '\">' + lists[i][j] + '</option>';\r\n      }\r\n    }\r\n\r\n    return list;\r\n  }\r\n\r\n  _getInfo(variable) {\r\n    let info;\r\n\r\n    switch(variable) {\r\n      case 'Date':\r\n        info = $('.config').find('input').val();\r\n        if (info.indexOf(',') !== -1) { //20 July, 2016\r\n          let splitInfo = info.split(' '); //['20', 'July,',' '2016']\r\n          splitInfo[1] = splitInfo[1].substring(0, splitInfo[1].length - 1); //'July'\r\n          let months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n          info = splitInfo[0] + '/' + (months.indexOf(splitInfo[1]) + 1) + '/' + splitInfo[2];\r\n        } else { // 2016-07-20\r\n          let splitInfo = info.split('-');\r\n          info = splitInfo[2] + '/' + splitInfo[1] + '/' + splitInfo[0];\r\n        }\r\n        break;\r\n      case 'Group of users':\r\n        info = $('#group').find(\":selected\").text();\r\n        break;\r\n      case 'Subscription preferences':\r\n        if (info = $(\"input[name='rule-new-subscription']:checked\")[0] !== undefined) {\r\n          info = $(\"input[name='rule-new-subscription']:checked\")[0].id;\r\n        }\r\n        break;\r\n      case 'Weekday':\r\n        info = $('#weekday').find(\":selected\").text();\r\n        break;\r\n      default:\r\n        info = $('.config').find('input').val();\r\n        break;\r\n    }\r\n\r\n    return info;\r\n  }\r\n\r\n  _getList(items) {\r\n      let list = '';\r\n      let numItems = items.length;\r\n\r\n      for (let i = 0; i < numItems; i++) {\r\n        list += '<li class=\"divider\"></li>';\r\n        list += '<li><a class=\"center-align\">' + items[i] + '</a></li>';\r\n      }\r\n\r\n      return list;\r\n    }\r\n\r\n  _getOptions(id, title, list, selected) {\r\n    let options = '<select id=\"' + id + '\" class=\"browser-default\"><option disabled selected>' + title + '</option>';\r\n    for (let i in list) {\r\n      if (selected !== undefined & selected === list[i]) {\r\n        options += '<option selected id=\"' + id + '\">' + list[i] + '</option>';\r\n      } else {\r\n        options += '<option id=\"' + id + '\">' + list[i] + '</option>';\r\n      }\r\n    }\r\n    options += '</select>';\r\n\r\n    return options;\r\n  }\r\n\r\n  _getPoliciesTable() {\r\n    let _this = this;\r\n\r\n    _this.policiesManager.getFormattedPolicies().then((policies) => {\r\n      $('.policies-no').addClass('hide');\r\n      $('.policies-current').html('');\r\n\r\n      let policiesTitles = [];\r\n      let rulesTitles = [];\r\n      let ids = [];\r\n\r\n      for (let i in policies) {\r\n        policiesTitles.push(policies[i].title);\r\n        rulesTitles.push(policies[i].rulesTitles);\r\n        ids.push(policies[i].ids);\r\n      }\r\n\r\n      let table = '<table>';\r\n      let isEmpty = policiesTitles.length === 0;\r\n\r\n      for (let i in policiesTitles) {\r\n        table += '<thead><tr id=\"' + policiesTitles[i] + '\"><td></td><td></td><th class=\"center-align\">' + policiesTitles[i] + '</th><td><i class=\"material-icons clickable-cell policy-delete\" style=\"cursor: pointer; vertical-align: middle\">delete_forever</i></td></tr></thead><tbody>';\r\n\r\n        for (let j in rulesTitles[i]) {\r\n          table += '<tr id=\"' + ids[i][j] + '\" ><td><i class=\"material-icons clickable-cell rule-priority-increase\" style=\"cursor: pointer; vertical-align: middle\">arrow_upward</i></td><td><i class=\"material-icons clickable-cell rule-priority-decrease\" style=\"cursor: pointer; vertical-align: middle\">arrow_downward</i></td><td class=\"rule-show clickable-cell\" style=\"cursor: pointer\">' + rulesTitles[i][j] + '</td><td><i class=\"material-icons clickable-cell rule-delete\" style=\"cursor: pointer; vertical-align: middle\">clear</i></td></tr>';\r\n        }\r\n        table += '<tr id=\"' + policiesTitles[i] + '\"></td><td></td><td></td><td style=\"text-align:center\"><i class=\"material-icons clickable-cell center-align rule-add\" style=\"cursor: pointer\">add_circle</i></td></tr>';\r\n      }\r\n      if (!isEmpty) {\r\n        table += '</tbody></table>';\r\n        $('.policies-current').append(table);\r\n      } else {\r\n        $('.policies-no').removeClass('hide');\r\n      }\r\n      $('.rule-add').on('click', (event) => { _this._showVariablesTypes(); });\r\n      $('.rule-delete').on('click', (event) => { _this._deleteRule(); });\r\n      $('.rule-show').on('click', (event) => { _this._showRule(); });\r\n      $('.rule-priority-increase').on('click', (event) => { _this._increaseRulePriority(); });\r\n      $('.rule-priority-decrease').on('click', (event) => { _this._decreaseRulePriority(); });\r\n      $('.policy-add').off();\r\n      $('.policy-add').on('click', (event) => { _this._addPolicy(); });\r\n      $('.policy-delete').on('click', (event) => { _this._deletePolicy(); });\r\n    });\r\n  }\r\n\r\n  _goHome() {\r\n    this._getActivePolicy();\r\n    this._getPoliciesTable();\r\n  }\r\n\r\n  _increaseRulePriority() {\r\n    let _this = this;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let thisPriority = parseInt(splitId[splitId.length - 1]);\r\n    if (thisPriority !== 0) {\r\n      splitId.pop();\r\n      let policyTitle = splitId.join(':');\r\n      let newPriority = thisPriority - 1;\r\n\r\n      _this.policiesManager.increaseRulePriority(policyTitle, thisPriority, newPriority).then(() => {\r\n        _this._goHome();\r\n      });\r\n    }\r\n  }\r\n\r\n  _manageGroups() {\r\n    let _this = this;\r\n    _this.policiesManager.getGroups().then((groupsPE) => {\r\n      $('.groups-current').html('');\r\n      let groups = groupsPE.groupsNames;\r\n      let members = groupsPE.members;\r\n      let ids = groupsPE.ids;\r\n\r\n      let table = '<table>';\r\n      let isEmpty = groups.length === 0;\r\n\r\n      for (let i in groups) {\r\n        table += '<thead><tr><th id=\"' + groups[i] + '\">' + groups[i] + '</th><td style=\"text-align:right\"><i class=\"material-icons clickable-cell group-delete\" style=\"cursor: pointer; vertical-align: middle\">delete_forever</i></td></tr></thead><tbody>';\r\n        for (let j in members[i]) {\r\n          table += '<tr id=\"' + ids[i][j] + '\" ><td style=\"cursor: pointer\">' + members[i][j] + '</td><td style=\"text-align:right\"><i class=\"material-icons clickable-cell member-delete\" style=\"cursor: pointer; vertical-align: middle\">clear</i></td></tr>';\r\n        }\r\n\r\n        table += '<tr id=\"' + groups[i] + '\"><td><i class=\"material-icons clickable-cell member-add\" id=\"' + groups[i] + '\" style=\"cursor: pointer\">add_circle</i></td></tr>';\r\n      }\r\n\r\n      if (!isEmpty) {\r\n        table += '</tbody></table>';\r\n        $('.groups-current').append(table);\r\n      } else {\r\n        $('.groups-current').append('<p>There are no groups set.</p>');\r\n      }\r\n\r\n      $('.member-add').off();\r\n      $('.member-add').on('click', (event) => { _this._addMember(); });\r\n      $('.member-delete').on('click', (event) => { _this._deleteMember(); });\r\n      $('.group-add').off();\r\n      $('.group-add').on('click', (event) => { _this._createGroup(); });\r\n      $('.group-delete').on('click', (event) => { _this._deleteGroup(); });\r\n    });\r\n  }\r\n\r\n  _parseFileContent(content) {\r\n    let parsedContent = JSON.parse(content);\r\n    for (let i in parsedContent) {\r\n      this.policiesManager.addPolicy(i, undefined, parsedContent[i]);\r\n    }\r\n    $('.policy-new').closeModal();\r\n  }\r\n\r\n  _setElements() {\r\n    return {\r\n      date: (params) => { return '<input type=\"date\" class=\"datepicker\">'; },\r\n      select: (params) => { return this._getOptions(params[0], params[1], params[2]); },\r\n      form: (params) => { return '<form><input type=\"text\" placeholder=\"' + params + '\"></input></form>'; }\r\n    };\r\n  }\r\n\r\n  _showNewConfigurationPanel(policyTitle) {\r\n    let variable = event.target.text;\r\n    $('.variable').html(this._getNewConfiguration(policyTitle, variable));\r\n    $('.scopes').empty().html('');\r\n\r\n    let keys = ['Email', 'Hyperty', 'All'];\r\n    let scopes = ['identity', 'hyperty', 'global'];\r\n    let lists = [];\r\n\r\n    this.policiesManager.getMyEmails().then((emails) => {\r\n      lists.push(emails);\r\n      this.policiesManager.getMyHyperties().then((hyperties) => {\r\n        lists.push(hyperties);\r\n        lists.push(['All identities and hyperties']);\r\n        $('.scopes').append(this._getGroupOptions('Apply this configuration to:', keys, scopes, lists));\r\n        $('.variable').removeClass('hide');\r\n      });\r\n    });\r\n  }\r\n\r\n  _showVariablesTypes(event) {\r\n    let policyTitle = event.target.closest('tr').id;\r\n\r\n    $('#variables-types').empty().html('');\r\n    let variables = this.policiesManager.getVariables();\r\n    $('#variables-types').append(this._getList(variables));\r\n    $('.variable').addClass('hide');\r\n    $('.rule-new').openModal();\r\n    $('#variables-types').off();\r\n    $('#variables-types').on('click', (event) => { this._showNewConfigurationPanel(policyTitle); });\r\n  }\r\n\r\n  _getNewConfiguration(policyTitle, variable) {\r\n    let _this = this;\r\n    let info = _this.policiesManager.getVariableInfo(variable);\r\n    $('.rule-new-title').html(info.title);\r\n    $('.description').html(info.description);\r\n    $('.config').html('');\r\n\r\n    if (variable === 'Subscription preferences') {\r\n      $('.subscription-type').removeClass('hide');\r\n    } else {\r\n      $('.subscription-type').addClass('hide');\r\n      let tags = info.input;\r\n      for (let i in tags) {\r\n        _this.policiesManager.getGroupsNames().then((groupsNames) => {\r\n          if (variable === 'Group of users') {\r\n            tags[i][1].push(groupsNames);\r\n          }\r\n          $('.config').append(_this.elements[tags[i][0]](tags[i][1]));\r\n          if (variable === 'Group of users') {\r\n            tags[i][1].pop();\r\n          }\r\n        });\r\n      }\r\n      if (variable ==='date') {\r\n        $('.datepicker').pickadate({\r\n          selectMonths: true,\r\n          selectYears: 15\r\n        });\r\n      }\r\n    }\r\n    document.getElementById('allow').checked = false;\r\n    document.getElementById('block').checked = false;\r\n    $('.ok-btn').off();\r\n    $('.ok-btn').on('click', (event) => {\r\n      if ($(\"input[name='rule-new-decision']:checked\")[0] !== undefined) {\r\n        let info = _this._getInfo(variable);\r\n        let decision = $(\"input[name='rule-new-decision']:checked\")[0].id;\r\n        decision = decision === 'allow';\r\n        let scope = $('.scopes').find(\":selected\")[0].id;\r\n        let target = $('.scopes').find(\":selected\")[0].textContent;\r\n        target = (target === 'All identities and hyperties') ? 'global' : target;\r\n        _this.policiesManager.setInfo(variable, policyTitle, info, decision, scope, target).then(() => {\r\n          $('.rule-new').closeModal();\r\n          _this._goHome();\r\n        });\r\n      } else {\r\n        throw Error('INFORMATION MISSING: please specify an authorisation decision.');\r\n      }\r\n    });\r\n  }\r\n\r\n  _deleteInfo(resourceType) {\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let scope = splitId[0];\r\n    splitId.shift();\r\n    let target = splitId.join('');\r\n    let condition = event.target.closest('tr').children[0].id;\r\n    this.policiesManager.deleteInfo(resourceType, scope, target, condition);\r\n    this._goHome();\r\n  }\r\n\r\n  _setListeners() {\r\n    $('.settings-btn').on('click', (event) => {\r\n      parent.postMessage({ body: { method: 'showAdminPage' }, to: 'runtime:gui-manager' }, '*');\r\n      $('.admin-page').removeClass('hide');\r\n      // document.getElementsByTagName('body')[0].style = 'background-color:white;';\r\n    });\r\n\r\n    $('.policies-page-show').on('click', (event) => {\r\n      $('.policies-section').removeClass('hide');\r\n      $('.identities-section').addClass('hide');\r\n      this._goHome();\r\n      this._manageGroups();\r\n    });\r\n\r\n    $('.admin-page-exit').on('click', (event) => {\r\n      parent.postMessage({ body: { method: 'hideAdminPage' }, to: 'runtime:gui-manager' }, '*');\r\n      $('.admin-page').addClass('hide');\r\n      // document.getElementsByTagName('body')[0].style = 'background-color:transparent;';\r\n    });\r\n\r\n    $('.exit-btn').on('click', (event) => {\r\n      $('.subscription-type').addClass('hide');\r\n      $('.help-menu').addClass('hide');\r\n    });\r\n\r\n    $('#policy-file').on('change', (event) => {\r\n      let file = event.target.files[0];\r\n      let reader = new FileReader();\r\n      reader.readAsText(file, \"UTF-8\");\r\n      reader.onload = (event) => {\r\n        this._parseFileContent(event.target.result);\r\n        this._goHome();\r\n      }\r\n      reader.onerror = (event) => {\r\n        throw Error(\"Error reading the file\");\r\n      }\r\n    });\r\n  }\r\n\r\n  _showRule(event) {\r\n    let ruleTitle = event.target.textContent;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let priority = splitId[splitId.length - 1];\r\n    splitId.pop();\r\n    let policyTitle = splitId.join(':');\r\n    this.policiesManager.getRuleOfPolicy(policyTitle, priority).then((rule) => {\r\n      if (rule.condition.attribute === 'subscription' && rule.condition.params === 'preauthorised') {\r\n        $('.authorise-btns').addClass('hide');\r\n      } else {\r\n        let element;\r\n        if (rule.decision) {\r\n          element = document.getElementById('btn-allow');\r\n        } else {\r\n          element = document.getElementById('btn-block');\r\n        }\r\n        element.checked = true;\r\n        $('.authorise-btns').removeClass('hide');\r\n      }\r\n      $('.member-add').addClass('hide');\r\n      $('.member-new-btn').addClass('hide');\r\n\r\n      $('.rule-details').openModal();\r\n      $('.rule-title').html('<h5><b>' + ruleTitle + '</b></h5>');\r\n      if (rule.condition.attribute === 'subscription') {\r\n        $('.subscription-type').removeClass('hide');\r\n      }\r\n      $('.subscription-decision').on('click', (event) => { this._updateRule('subscription', policyTitle, rule); });\r\n      $('.decision').off();\r\n      $('.decision').on('click', (event) => { this._updateRule('authorisation', policyTitle, rule);});\r\n    });\r\n  }\r\n\r\n  _updateRule(type, policyTitle, rule) {\r\n    let _this = this;\r\n    let title = $('.rule-title').text();\r\n    let splitTitle = title.split(' ');\r\n    let index = splitTitle.indexOf('is');\r\n    if (index === -1) {\r\n      index = splitTitle.indexOf('are');\r\n    }\r\n    switch (type) {\r\n      case 'authorisation':\r\n        let newDecision = $(\"input[name='rule-update-decision']:checked\")[0].id;\r\n\r\n        if (newDecision === 'btn-allow') {\r\n          splitTitle[index + 1] = 'allowed';\r\n          newDecision = true;\r\n        } else {\r\n          splitTitle[index + 1] = 'blocked';\r\n          newDecision = false;\r\n        }\r\n        title = splitTitle.join(' ');\r\n        $('.rule-title').html('<h5><b>' + title + '</b></h5>');\r\n        _this.policiesManager.updatePolicy(policyTitle, rule, newDecision).then(() => {\r\n          _this._goHome();\r\n        });\r\n        break;\r\n      case 'subscription':\r\n        let newSubscriptionType = event.target.labels[0].textContent;\r\n\r\n        let decision = splitTitle[index + 1];\r\n        splitTitle = title.split('hyperties are');\r\n        if (newSubscriptionType === 'All subscribers') {\r\n          $('.authorise-btns').removeClass('hide');\r\n          newDecision = rule.decision;\r\n          newSubscriptionType = '*';\r\n          title = 'Subscriptions from all hyperties are' + splitTitle[1];\r\n        } else {\r\n          $('.authorise-btns').addClass('hide');\r\n          newDecision = true;\r\n          newSubscriptionType = 'preauthorised';\r\n          title = 'Subscriptions from previously authorised hyperties are' + splitTitle[1];\r\n        }\r\n\r\n        $('.rule-title').html('<h5><b>' + title + '</b></h5>');\r\n        _this.policiesManager.updatePolicy(policyTitle, rule, newDecision, newSubscriptionType).then(() => {\r\n          _this._goHome();\r\n        });\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nexport default PoliciesGUI;\r\n","class PoliciesManager {\r\n\r\n  constructor(pepGuiURL, pepURL, messageBus) {\r\n    let _this = this;\r\n    _this._guiURL = pepGuiURL;\r\n    _this._pepURL = pepURL;\r\n    _this._messageBus = messageBus;\r\n\r\n    // assume prepare attributes is called after this\r\n  }\r\n\r\n  callPolicyEngineFunc(methodName, parameters) {\r\n    let _this = this;\r\n    let message;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      message = { type: 'execute', to: _this._pepURL, from: _this._guiURL,\r\n        body: { resource: 'policy', method: methodName, params: parameters }, };\r\n      _this._messageBus.postMessage(message, (res) => {\r\n        let result = res.body.value;\r\n        resolve(result);\r\n      });\r\n    });\r\n  }\r\n\r\n  prepareAttributes() {\r\n    return new Promise((resolve, reject) => {\r\n      let _this = this;\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n        _this.policies = userPolicies;\r\n        _this.variables = _this.setVariables();\r\n        _this.addition = _this.setAdditionMethods();\r\n        _this.validation = _this.setValidationMethods();\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  addToGroup(groupName, user) {\r\n    return this.callPolicyEngineFunc('addToGroup', {groupName: groupName, userEmail: user});\r\n  }\r\n\r\n  createGroup(groupName) {\r\n    return this.callPolicyEngineFunc('createGroup', {groupName: groupName});\r\n  }\r\n\r\n  addPolicy(title, combiningAlgorithm, policy) {\r\n    if (policy === undefined) {\r\n      switch (combiningAlgorithm) {\r\n        case 'Block overrides':\r\n          combiningAlgorithm = 'blockOverrides';\r\n          break;\r\n        case 'Allow overrides':\r\n          combiningAlgorithm = 'allowOverrides';\r\n          break;\r\n        case 'First applicable':\r\n          combiningAlgorithm = 'firstApplicable';\r\n          break;\r\n        default:\r\n          combiningAlgorithm = undefined;\r\n      }\r\n    }\r\n\r\n    return this.callPolicyEngineFunc('addPolicy',\r\n      {source: 'USER', key: title, policy: policy, combiningAlgorithm: combiningAlgorithm});\r\n  }\r\n\r\n  decreaseRulePriority(policyTitle, thisPriority, newPriority) {\r\n    this.getRuleOfPolicy(policyTitle, newPriority).priority = thisPriority;\r\n    this.getRuleOfPolicy(policyTitle, thisPriority).priority = newPriority;\r\n    return this.callPolicyEngineFunc('savePolicies', {source: 'USER'});\r\n  }\r\n\r\n  deleteGroup(groupName) {\r\n    return this.callPolicyEngineFunc('deleteGroup', {groupName: groupName});\r\n  }\r\n\r\n  deletePolicy(title) {\r\n    return this.callPolicyEngineFunc('removePolicy', {source: 'USER', key: title});\r\n  }\r\n\r\n  deleteRule(policyTitle, rule) {\r\n    let _this = this;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n        userPolicies[policyTitle].deleteRule(rule);\r\n        _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n          resolve();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  getActivePolicy() {\r\n    return this.callPolicyEngineFunc('activeUserPolicy', {});\r\n  }\r\n\r\n  getPolicy(key) {\r\n    return this.callPolicyEngineFunc('userPolicy', {key: key});\r\n  }\r\n\r\n  getPoliciesTitles() {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((policies) => {\r\n        let titles = [];\r\n\r\n        for (let i in policies) {\r\n          titles.push(i);\r\n        }\r\n\r\n        resolve(titles);\r\n      });\r\n    });\r\n  }\r\n\r\n  getTargets(scope) {\r\n    let targets = [];\r\n\r\n    for (let i in this.policies[scope]) {\r\n      if (targets.indexOf(i) === -1) {\r\n        targets.push(i);\r\n      }\r\n    }\r\n\r\n    return targets;\r\n  }\r\n\r\n  increaseRulePriority(policyTitle, thisPriority, newPriority) {\r\n    let _this = this;\r\n    _this.getRuleOfPolicy(policyTitle, thisPriority).priority = newPriority;\r\n    _this.getRuleOfPolicy(policyTitle, newPriority).priority = thisPriority;\r\n    return _this.callPolicyEngineFunc('savePolicies', {source: 'USER'});\r\n  }\r\n\r\n  setVariables() {\r\n    return {\r\n      'Date': {\r\n        title: '<br><h5>Updating date related configurations</h5><p>Incoming communications in the introduced date will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        description: '<p>Date:</p>',\r\n        input: [\r\n          ['date', []]\r\n        ]\r\n      },\r\n      'Domain': {\r\n        title: '<br><h5>Updating domain configurations</h5><p>Incoming communications from a user whose identity is from the introduced domain allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        description: '<p>Domain:</p>',\r\n        input: [\r\n          ['form', []]\r\n        ]\r\n      },\r\n      'Group of users': {\r\n        title: '<br><h5>Updating groups configurations</h5><p>Incoming communications from a user whose identity is in the introduced group will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        description: '<p>Group name:</p>',\r\n        input: [\r\n          ['select', ['group', 'Select a group:']]\r\n        ]\r\n      },\r\n      'Subscription preferences': {\r\n        title: '<br><h5>Updating subscriptions configurations</h5><p>The acceptance of subscriptions to your hyperties will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        input: []\r\n      },\r\n      'Time of the day': {\r\n        title: '<br><h5>Updating time configurations</h5><p>Incoming communications in the introduced timeslot will be blocked, but this can be changed in the preferences page.</p><p>Please introduce a new timeslot in the following format:</p><p class=\"center-align\">&lt;START-HOUR&gt;:&lt;START-MINUTES&gt; to &lt;END-HOUR&gt;:&lt;END-MINUTES&gt;</p><br>',\r\n        description: '<p>Timeslot:</p>',\r\n        input: [\r\n          ['form', []]\r\n        ]\r\n      },\r\n      Weekday: {\r\n        title: '<br><h5>Updating weekday configurations</h5><p>Incoming communications in the introduced weekday will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        description: '<p>Weekday:</p>',\r\n        input: [\r\n          ['select', ['weekday', 'Select a weekday:', ['Saturday', 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']]]\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  setAdditionMethods() {\r\n    let _this = this;\r\n    return {\r\n      Date: (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'date', operator: 'equals', params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n      Domain: (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'domain', operator: 'equals', params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n      'Group of users': (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'source', operator: 'in', params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n      'Subscription preferences': (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            let operator = 'equals';\r\n            if (params[3] === 'preauthorised') {\r\n              operator = 'in';\r\n            }\r\n\r\n            // TIAGO: this is giving me an error...\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'subscription', operator: operator, params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n      'Time of the day': (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            params[3] = params[3].split(' to ');\r\n            let start = params[3][0].split(':');\r\n            start = start.join('');\r\n            let end = params[3][1].split(':');\r\n            end = end.join('');\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'time', operator: 'between', params: [start, end] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n\r\n      Weekday: (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n          params[3] = weekdays.indexOf(params[3]);\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'weekday', operator: 'equals', params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  setValidationMethods() {\r\n    return {\r\n      Date: (scope, info) => { return this.isValidDate(info) & this.isValidScope(scope); },\r\n      'Group of users': (scope, info) => { return this.isValidString(info) & this.isValidScope(scope); },\r\n      Domain: (scope, info) => { return this.isValidDomain(info) & this.isValidScope(scope); },\r\n      Weekday: (scope, info) => { return true & this.isValidScope(scope); },\r\n      'Subscription preferences': (scope, info) => { return this.isValidSubscriptionType(info) & this.isValidScope(scope); },\r\n      'Time of the day': (scope, info) => { return this.isValidTimeslot(info) & this.isValidScope(scope); }\r\n    };\r\n  }\r\n\r\n  updateActivePolicy(title) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('activeUserPolicy', {userPolicy: title}).then(() => {\r\n        _this.callPolicyEngineFunc('saveActivePolicy', {}).then(() => {\r\n          resolve();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  isValidEmail(info) {\r\n    let pattern = /[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$/;\r\n    return pattern.test(info);\r\n  }\r\n\r\n  isValidDomain(info) {\r\n    let pattern = /[a-z0-9.-]+\\.[a-z]{2,3}$/;\r\n    return pattern.test(info);\r\n  }\r\n\r\n  isValidString(info) {\r\n    let pattern = /[a-z0-9.-]$/;\r\n    return pattern.test(info);\r\n  }\r\n\r\n  isValidSubscriptionType(info) {\r\n    return true;\r\n  }\r\n\r\n  isValidDate(info) {\r\n    let infoSplit = info.split('/');\r\n    let day = parseInt(infoSplit[0]);\r\n    let month = parseInt(infoSplit[1]);\r\n    let year = parseInt(infoSplit[2]);\r\n\r\n    let date = new Date(year, month-1, day);\r\n    let isValidFormat = date.getFullYear() === year && date.getMonth() + 1 === month && date.getDate() === day;\r\n    let formattedDate = date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear()\r\n    let now = new Date();\r\n    let today = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear();\r\n\r\n    let isFuture = false;\r\n    if (date.getFullYear() > now.getFullYear()) {\r\n      isFuture = true;\r\n    } else {\r\n      if (date.getFullYear() == now.getFullYear()) {\r\n        if ((date.getMonth() + 1) > (now.getMonth() + 1)) {\r\n          isFuture = true;\r\n        } else {\r\n          if ((date.getMonth() + 1) == (now.getMonth() + 1)) {\r\n            if (date.getDate() >= (now.getDate())) {\r\n              isFuture = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return (isValidFormat && isFuture);\r\n  }\r\n\r\n  isValidScope(scope) {\r\n    return scope !== '';\r\n  }\r\n\r\n  isValidTimeslot(info) {\r\n    if (!info) {\r\n      return false;\r\n    }\r\n    let splitInfo = info.split(' to '); // [12:00, 13:00]\r\n    let twoTimes = splitInfo.length === 2;\r\n    if (!twoTimes) {\r\n      return false;\r\n    }\r\n    let splitStart = splitInfo[0].split(':'); // [12, 00]\r\n    let splitEnd = splitInfo[1].split(':'); // [13, 00]\r\n    if (splitStart.length !== 2 || splitEnd.length !== 2) {\r\n      return false;\r\n    }\r\n    let okSize = (splitStart[0].length === 2) && (splitStart[1].length === 2) && (splitEnd[0].length === 2) && (splitEnd[1].length === 2);\r\n    let areIntegers = (splitStart[0] == parseInt(splitStart[0], 10)) && (splitStart[1] == parseInt(splitStart[1], 10)) && (splitEnd[0] == parseInt(splitEnd[0], 10)) && (splitEnd[1] == parseInt(splitEnd[1], 10));\r\n    return twoTimes && okSize && areIntegers;\r\n  }\r\n\r\n  getFormattedPolicies() {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((policiesPE) => {\r\n        let policiesGUI = [];\r\n\r\n        for (let i in policiesPE) {\r\n          let policy = {\r\n            title: policiesPE[i].key,\r\n            rulesTitles: [],\r\n            ids: []\r\n          }\r\n\r\n          if (policiesPE[i].rules.length !== 0) {\r\n            policiesPE[i].rules = policiesPE[i].sortRules();\r\n            for (let j in policiesPE[i].rules) {\r\n              let title = _this._getTitle(policiesPE[i].rules[j]);\r\n              policy.rulesTitles.push(title);\r\n              policy.ids.push(policy.title + ':' + policiesPE[i].rules[j].priority);\r\n            }\r\n          }\r\n\r\n          policiesGUI.push(policy);\r\n        }\r\n\r\n        resolve(policiesGUI);\r\n      });\r\n    });\r\n  }\r\n\r\n  getRuleOfPolicy(title, priority) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((policies) => {\r\n        let policy = policies[title];\r\n        resolve(policy.getRuleByPriority(priority));\r\n      });\r\n    });\r\n  }\r\n\r\n  _getTitle(rule) {\r\n    let condition = rule.condition;\r\n    let authorise = (rule.decision) ? 'allowed' : 'blocked';\r\n    let target = rule.target === 'global' ? 'All identities and hyperties' : rule.target;\r\n    let attribute = condition.attribute;\r\n    switch(attribute) {\r\n      case 'date':\r\n        return 'Date ' + condition.params + ' is ' + authorise + ' (' + target + ')';\r\n      case 'domain':\r\n        return 'Domain \\\"' + condition.params + '\\\" is ' + authorise + ' (' + target + ')';\r\n      case 'source':\r\n        if (condition.operator === 'in') {\r\n          return 'Group \\\"' + condition.params + '\\\" is ' + authorise + ' (' + target + ')';\r\n        } else {\r\n          if (condition.operator === 'equals') {\r\n            return 'User ' + condition.params + ' is ' + authorise + ' (' + target + ')';\r\n          }\r\n        }\r\n      case 'subscription':\r\n        if (condition.params === '*') {\r\n          return 'Subscriptions from all hyperties are ' + authorise + ' (' + target + ')';\r\n        } else {\r\n          if (condition.params === 'preauthorised') {\r\n            return 'Subscriptions from previously authorised hyperties are allowed (' + target + ')';\r\n          }\r\n        }\r\n      case 'time':\r\n        let start = condition.params[0][0] + condition.params[0][1] + ':' + condition.params[0][2] + condition.params[0][3];\r\n        let end = condition.params[1][0] + condition.params[1][1] + ':' + condition.params[1][2] + condition.params[1][3];\r\n        return 'Timeslot from ' + start + ' to ' + end + ' is ' + authorise + ' (' + target + ')';\r\n      case 'weekday':\r\n        let weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n        let weekdayID = condition.params;\r\n        return 'Weekday \\\"' + weekdays[weekdayID] + '\\\" is ' + authorise + ' (' + target + ')';\r\n      default:\r\n        return 'Rule ' + rule.priority + ' is ' + authorise + ' (' + target + ')';\r\n    }\r\n  }\r\n\r\n  getVariables() {\r\n    let variablesTitles = [];\r\n    for (let i in this.variables) {\r\n      variablesTitles.push(i);\r\n    }\r\n    return variablesTitles;\r\n  }\r\n\r\n  getVariableInfo(variable) {\r\n    return this.variables[variable];\r\n  }\r\n\r\n  getMyEmails() {\r\n    return this.callPolicyEngineFunc('getMyEmails', {});\r\n  }\r\n\r\n  getMyHyperties() {\r\n    return this.callPolicyEngineFunc('getMyHyperties', {});\r\n  }\r\n\r\n  //TODO If there is a problem with the input, show it to the user\r\n  setInfo(variable, policyTitle, info, authorise, scope, target) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      if (_this.validation[variable](scope, info)) {\r\n        _this.addition[variable]([policyTitle, scope, target, info, authorise]).then(() => {\r\n          resolve();\r\n        });\r\n      } else {\r\n        reject('Invalid configuration');\r\n      }\r\n    });\r\n  }\r\n\r\n  deleteInfo(variable, scope, target, info) {\r\n    let params = [scope, target, info];\r\n    if (variable === 'member') {\r\n      let conditionSplit = info.split(' ');\r\n      let groupName = conditionSplit[2];\r\n      params = [scope, groupName, info];\r\n    }\r\n    this.deletion[variable](params);\r\n  }\r\n\r\n  getGroups() {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('groups', {}).then((groups) => {\r\n        let groupsGUI = {\r\n          groupsNames: [],\r\n          members: [],\r\n          ids: []\r\n        };\r\n\r\n        for (let i in groups) {\r\n          groupsGUI.groupsNames.push(i);\r\n          groupsGUI.members.push(groups[i]);\r\n          let ids = [];\r\n          for (let j in groups[i]) {\r\n            ids.push(i + '::' + groups[i][j]);\r\n          }\r\n          groupsGUI.ids.push(ids);\r\n        }\r\n\r\n        //console.log('TIAGO groups', groupsGUI)\r\n        resolve(groupsGUI);\r\n      });\r\n    });\r\n  }\r\n\r\n  getGroupsNames() {\r\n    return this.callPolicyEngineFunc('getGroupsNames', {});\r\n  }\r\n\r\n  removeFromGroup(groupName, user) {\r\n    return this.callPolicyEngineFunc('removeFromGroup', {groupName: groupName, userEmail: user});\r\n  }\r\n\r\n  updatePolicy(policyTitle, rule, newDecision, newSubscriptionType) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n        userPolicies[policyTitle].deleteRule(rule);\r\n        if (!newSubscriptionType) {\r\n          userPolicies[policyTitle].createRule(newDecision, rule.condition, rule.scope, rule.target, rule.priority);\r\n        } else {\r\n          let operator = (newSubscriptionType === '*') ? 'equals' : 'in';\r\n          userPolicies[policyTitle].createRule(newDecision, [{ attribute: 'subscription', opeator: operator, params: newSubscriptionType }], rule.scope, rule.target, rule.priority);\r\n        }\r\n\r\n        _this.callPolicyEngineFunc('saveActivePolicy', {}).then(() => {\r\n          resolve();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default PoliciesManager;\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYWRtaW4vUG9saWNpZXNHVUkuanMiLCJzcmMvYWRtaW4vUG9saWNpZXNNYW5hZ2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7SUFFTSxXO0FBRUosdUJBQVksU0FBWixFQUF1QixNQUF2QixFQUErQixVQUEvQixFQUEyQztBQUFBOztBQUN6QyxRQUFJLFFBQVEsSUFBWjtBQUNBLFVBQU0sZUFBTixHQUF3Qiw4QkFBb0IsU0FBcEIsRUFBK0IsTUFBL0IsRUFBdUMsVUFBdkMsQ0FBeEI7QUFDQTtBQUNEOzs7O3dDQUVtQjtBQUNsQixVQUFJLFFBQVEsSUFBWjtBQUNBLGFBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxjQUFNLGVBQU4sQ0FBc0IsaUJBQXRCLEdBQTBDLElBQTFDLENBQStDLFlBQU07QUFDbkQsZ0JBQU0sUUFBTixHQUFpQixNQUFNLFlBQU4sRUFBakI7QUFDQSxnQkFBTSxhQUFOO0FBQ0E7QUFDRCxTQUpEO0FBS0QsT0FOTSxDQUFQO0FBT0Q7OztpQ0FFWTtBQUNYLFVBQUksUUFBUSxJQUFaO0FBQ0EsVUFBSSxRQUFRLE1BQU0sTUFBTixDQUFhLEVBQXpCO0FBQ0EsUUFBRSxtQkFBRixFQUF1QixJQUF2QixDQUE0QixpRkFBaUYsS0FBakYsR0FBeUYsY0FBckg7QUFDQSxRQUFFLG1CQUFGLEVBQXVCLFNBQXZCO0FBQ0EsUUFBRSxnQkFBRixFQUFvQixHQUFwQjtBQUNBLFFBQUUsZ0JBQUYsRUFBb0IsRUFBcEIsQ0FBdUIsT0FBdkIsRUFBZ0MsVUFBQyxLQUFELEVBQVc7QUFDekMsWUFBSSxTQUFTLEVBQUUsYUFBRixFQUFpQixHQUFqQixFQUFiO0FBQ0EsVUFBRSxhQUFGLEVBQWlCLEdBQWpCLENBQXFCLEVBQXJCO0FBQ0EsY0FBTSxlQUFOLENBQXNCLFVBQXRCLENB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LENBQW9ELFVBQUMsWUFBRCxFQUFrQjtBQUNwRSx1QkFBYSxXQUFiLEVBQTBCLFVBQTFCLENBQXFDLElBQXJDO0FBQ0EsY0FBSSxDQUFDLG1CQUFMLEVBQTBCO0FBQ3hCLHlCQUFhLFdBQWIsRUFBMEIsVUFBMUIsQ0FBcUMsV0FBckMsRUFBa0QsS0FBSyxTQUF2RCxFQUFrRSxLQUFLLEtBQXZFLEVBQThFLEtBQUssTUFBbkYsRUFBMkYsS0FBSyxRQUFoRztBQUNELFdBRkQsTUFFTztBQUNMLGdCQUFJLFdBQVksd0JBQXdCLEdBQXpCLEdBQWdDLFFBQWhDLEdBQTJDLElBQTFEO0FBQ0EseUJBQWEsV0FBYixFQUEwQixVQUExQixDQUFxQyxXQUFyQyxFQUFrRCxDQUFDLEVBQUUsV0FBVyxjQUFiLEVBQTZCLFNBQVMsUUFBdEMsRUFBZ0QsUUFBUSxtQkFBeEQsRUFBRCxDQUFsRCxFQUFtSSxLQUFLLEtBQXhJLEVBQStJLEtBQUssTUFBcEosRUFBNEosS0FBSyxRQUFqSztBQUNEOztBQUVELGdCQUFNLG9CQUFOLENBQTJCLGtCQUEzQixFQUErQyxFQUEvQyxFQUFtRCxJQUFuRCxDQUF3RCxZQUFNO0FBQzVEO0FBQ0QsV0FGRDtBQUdELFNBWkQ7QUFhRCxPQWRNLENBQVA7QUFlRDs7Ozs7O2tCQUlZLGUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IFBvbGljaWVzTWFuYWdlciBmcm9tICcuL1BvbGljaWVzTWFuYWdlcic7XHJcblxyXG5jbGFzcyBQb2xpY2llc0dVSSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBlcEd1aVVSTCwgcGVwVVJMLCBtZXNzYWdlQnVzKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgX3RoaXMucG9saWNpZXNNYW5hZ2VyID0gbmV3IFBvbGljaWVzTWFuYWdlcihwZXBHdWlVUkwsIHBlcFVSTCwgbWVzc2FnZUJ1cyk7XHJcbiAgICAvLyBhc3N1bWUgcHJlcGFyZUF0dHJpYnV0ZXMgaXMgY2FsbGVkIGFmdGVyIHRoaXNcclxuICB9XHJcblxyXG4gIHByZXBhcmVBdHRyaWJ1dGVzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5wcmVwYXJlQXR0cmlidXRlcygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzID0gX3RoaXMuX3NldEVsZW1lbnRzKCk7XHJcbiAgICAgICAgX3RoaXMuX3NldExpc3RlbmVycygpO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9hZGRNZW1iZXIoKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGdyb3VwID0gZXZlbnQudGFyZ2V0LmlkO1xyXG4gICAgJCgnLm1lbWJlci1uZXctaW50cm8nKS5odG1sKCc8aDU+QWRkIGEgbWVtYmVyIHRvIGEgZ3JvdXA8L2g1PjxwPkluc2VydCBhIHVzZXIgZW1haWwgYmVsb3cgdG8gYWRkIHRvIHRoZSBcIicgKyBncm91cCArICdcIiBncm91cC48L3A+Jyk7XHJcbiAgICAkKCcubWVtYmVyLW5ldy1tb2RhbCcpLm9wZW5Nb2RhbCgpO1xyXG4gICAgJCgnLm1lbWJlci1uZXctb2snKS5vZmYoKTtcclxuICAgICQoJy5tZW1iZXItbmV3LW9rJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGxldCBtZW1iZXIgPSAkKCcjbWVtYmVyLW5ldycpLnZhbCgpO1xyXG4gICAgICAkKCcjbWVtYmVyLW5ldycpLnZhbCgnJyk7XHJcbiAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5hZGRUb0dyb3VwKGdyb3VwLCBtZW1iZXIpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICQoJy5tZW1iZXItbmV3LW1vZGFsJykuY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgIF90aGlzLl9tYW5hZ2VHcm91cHMoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jcmVhdGVHcm91cCgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICAkKCcjZ3JvdXAtbmV3LW5hbWUnKS52YWwoJycpO1xyXG4gICAgJCgnLmdyb3VwLW5ldy1tb2RhbCcpLm9wZW5Nb2RhbCgpO1xyXG4gICAgJCgnLmdyb3VwLW5ldy1vaycpLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICBsZXQgZ3JvdXBOYW1lID0gJCgnI2dyb3VwLW5ldy1uYW1lJykudmFsKCk7XHJcbiAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5jcmVhdGVHcm91cChncm91cE5hbWUpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIF90aGlzLl9tYW5hZ2VHcm91cHMoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9hZGRQb2xpY3koKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgJCgnI3BvbGljeS1uZXctdGl0bGUnKS52YWwoJycpO1xyXG4gICAgJCgnLmNvbWJpbmluZycpLmh0bWwoJycpO1xyXG4gICAgbGV0IGFsZ29yaXRobXMgPSBbJ0Jsb2NrIG92ZXJyaWRlcycsICdBbGxvdyBvdmVycmlkZXMnLCAnRmlyc3QgYXBwbGljYWJsZSddO1xyXG4gICAgJCgnLmNvbWJpbmluZycpLmFwcGVuZCh0aGlzLl9nZXRPcHRpb25zKCdjb21iLWFsZ29yaXRobScsICdDaG9vc2UgYSBjb21iaW5pbmcgYWxnb3JpdGhtJywgYWxnb3JpdGhtcykpO1xyXG4gICAgJCgnLnBvbGljeS1uZXcnKS5vcGVuTW9kYWwoKTtcclxuXHJcbiAgICAkKCcucG9saWN5LW5ldy1vaycpLm9mZigpO1xyXG4gICAgJCgnLnBvbGljeS1uZXctb2snKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgbGV0IHBvbGljeVRpdGxlID0gJCgnI3BvbGljeS1uZXctdGl0bGUnKS52YWwoKTtcclxuICAgICAgaWYgKCFwb2xpY3lUaXRsZSkge1xyXG4gICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdJbnZhbGlkIHBvbGljeSB0aXRsZScsIDQwMDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBjb21iaW5pbmdBbGdvcml0aG0gPSAkKCcjY29tYi1hbGdvcml0aG0nKS52YWwoKTtcclxuICAgICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuYWRkUG9saWN5KHBvbGljeVRpdGxlLCBjb21iaW5pbmdBbGdvcml0aG0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgJCgnLmhlbHAtbWVudScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAkKCcucG9saWN5LW5ldycpLmNsb3NlTW9kYWwoKTtcclxuICAgICAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCcuaGVscC1idG4nKS5vZmYoKTtcclxuICAgICQoJy5oZWxwLWJ0bicpLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAkKCcuaGVscC1tZW51JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2RlY3JlYXNlUnVsZVByaW9yaXR5KCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIGxldCBpZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCd0cicpLmlkO1xyXG4gICAgbGV0IHNwbGl0SWQgPSBpZC5zcGxpdCgnOicpO1xyXG4gICAgbGV0IHRoaXNQcmlvcml0eSA9IHBhcnNlSW50KHNwbGl0SWRbc3BsaXRJZC5sZW5ndGggLSAxXSk7XHJcbiAgICBzcGxpdElkLnBvcCgpO1xyXG4gICAgbGV0IHBvbGljeVRpdGxlID0gc3BsaXRJZC5qb2luKCc6Jyk7XHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZ2V0UG9saWN5KHBvbGljeVRpdGxlKS50aGVuKChwb2xpY3kpID0+IHtcclxuICAgICAgbGV0IGxhc3RQcmlvcml0eSA9IHBvbGljeS5nZXRMYXN0UHJpb3JpdHkoKTtcclxuICAgICAgaWYgKGxhc3RQcmlvcml0eSAhPSB0aGlzUHJpb3JpdHkpIHtcclxuICAgICAgICBsZXQgbmV3UHJpb3JpdHkgPSBwYXJzZUludCh0aGlzUHJpb3JpdHkgKyAxKTtcclxuICAgICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZGVjcmVhc2VSdWxlUHJpb3JpdHkocG9saWN5VGl0bGUsIHRoaXNQcmlvcml0eSwgbmV3UHJpb3JpdHkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgX3RoaXMuX2dvSG9tZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVNZW1iZXIoKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6OicpO1xyXG4gICAgbGV0IG1lbWJlciA9IHNwbGl0SWRbc3BsaXRJZC5sZW5ndGggLSAxXTtcclxuICAgIHNwbGl0SWQucG9wKCk7XHJcbiAgICBsZXQgZ3JvdXAgPSBzcGxpdElkLmpvaW4oJzo6Jyk7XHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIucmVtb3ZlRnJvbUdyb3VwKGdyb3VwLCBtZW1iZXIpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBfdGhpcy5fbWFuYWdlR3JvdXBzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVHcm91cCgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBsZXQgZ3JvdXBOYW1lID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuY2hpbGRyZW5bMF0uaWQ7XHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZGVsZXRlR3JvdXAoZ3JvdXBOYW1lKS50aGVuKCgpID0+IHtcclxuICAgICAgX3RoaXMuX21hbmFnZUdyb3VwcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlUG9saWN5KCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIGxldCBwb2xpY3lUaXRsZSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCd0cicpLmlkO1xyXG4gICAgX3RoaXMucG9saWNpZXNNYW5hZ2VyLmRlbGV0ZVBvbGljeShwb2xpY3lUaXRsZSkudGhlbigoKSA9PiB7XHJcbiAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZVJ1bGUoKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgcHJpb3JpdHkgPSBzcGxpdElkW3NwbGl0SWQubGVuZ3RoIC0gMV07XHJcbiAgICBzcGxpdElkLnBvcCgpO1xyXG4gICAgbGV0IHBvbGljeVRpdGxlID0gc3BsaXRJZC5qb2luKCc6Jyk7XHJcbiAgICBsZXQgcnVsZSA9IF90aGlzLnBvbGljaWVzTWFuYWdlci5nZXRSdWxlT2ZQb2xpY3kocG9saWN5VGl0bGUsIHByaW9yaXR5KTtcclxuXHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZGVsZXRlUnVsZShwb2xpY3lUaXRsZSwgcnVsZSkudGhlbigoKSA9PiB7XHJcbiAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldEFjdGl2ZVBvbGljeSgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZ2V0QWN0aXZlUG9saWN5KCkudGhlbigoYWN0aXZlVXNlclBvbGljeSkgPT4ge1xyXG4gICAgICAkKCcucG9saWN5LWFjdGl2ZScpLmh0bWwoJycpO1xyXG4gICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZ2V0UG9saWNpZXNUaXRsZXMoKS50aGVuKChwb2xpY2llcykgPT4ge1xyXG4gICAgICAgIHBvbGljaWVzLnB1c2goJ0RlYWN0aXZhdGUgYWxsIHBvbGljaWVzJyk7XHJcblxyXG4gICAgICAgICQoJy5wb2xpY3ktYWN0aXZlJykuYXBwZW5kKF90aGlzLl9nZXRPcHRpb25zKCdwb2xpY2llcy1saXN0JywgJ0NsaWNrIHRvIGFjdGl2YXRlIGEgcG9saWN5JywgcG9saWNpZXMsIGFjdGl2ZVVzZXJQb2xpY3kpKTtcclxuXHJcbiAgICAgICAgJCgnI3BvbGljaWVzLWxpc3QnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGxldCBwb2xpY3lUaXRsZSA9ICQoJyNwb2xpY2llcy1saXN0JykuZmluZChcIjpzZWxlY3RlZFwiKVswXS50ZXh0Q29udGVudDtcclxuICAgICAgICAgIGlmIChwb2xpY3lUaXRsZSA9PT0gJ0RlYWN0aXZhdGUgYWxsIHBvbGljaWVzJykge1xyXG4gICAgICAgICAgICBwb2xpY3lUaXRsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci51cGRhdGVBY3RpdmVQb2xpY3kocG9saWN5VGl0bGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldEdyb3VwT3B0aW9ucyh0aXRsZSwga2V5cywgc2NvcGVzLCBsaXN0cykge1xyXG4gICAgbGV0IGxpc3QgPSAnPG9wdGlvbiBkaXNhYmxlZCBzZWxlY3RlZD4nICsgdGl0bGUgKyAnPC9vcHRpb24+JztcclxuXHJcbiAgICBmb3IgKGxldCBpIGluIGtleXMpIHtcclxuICAgICAgbGlzdCArPSAnPG9wdGdyb3VwIGxhYmVsPScgKyBrZXlzW2ldICsgJz4nO1xyXG4gICAgICBmb3IgKGxldCBqIGluIGxpc3RzW2ldKSB7XHJcbiAgICAgICAgbGlzdCArPSAnPG9wdGlvbiBpZD1cIicgKyBzY29wZXNbaV0gKyAnXCI+JyArIGxpc3RzW2ldW2pdICsgJzwvb3B0aW9uPic7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGlzdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbmZvKHZhcmlhYmxlKSB7XHJcbiAgICBsZXQgaW5mbztcclxuXHJcbiAgICBzd2l0Y2godmFyaWFibGUpIHtcclxuICAgICAgY2FzZSAnRGF0ZSc6XHJcbiAgICAgICAgaW5mbyA9ICQoJy5jb25maWcnKS5maW5kKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgIGlmIChpbmZvLmluZGV4T2YoJywnKSAhPT0gLTEpIHsgLy8yMCBKdWx5LCAyMDE2XHJcbiAgICAgICAgICBsZXQgc3BsaXRJbmZvID0gaW5mby5zcGxpdCgnICcpOyAvL1snMjAnLCAnSnVseSwnLCcgJzIwMTYnXVxyXG4gICAgICAgICAgc3BsaXRJbmZvWzFdID0gc3BsaXRJbmZvWzFdLnN1YnN0cmluZygwLCBzcGxpdEluZm9bMV0ubGVuZ3RoIC0gMSk7IC8vJ0p1bHknXHJcbiAgICAgICAgICBsZXQgbW9udGhzID0gWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ107XHJcbiAgICAgICAgICBpbmZvID0gc3BsaXRJbmZvWzBdICsgJy8nICsgKG1vbnRocy5pbmRleE9mKHNwbGl0SW5mb1sxXSkgKyAxKSArICcvJyArIHNwbGl0SW5mb1syXTtcclxuICAgICAgICB9IGVsc2UgeyAvLyAyMDE2LTA3LTIwXHJcbiAgICAgICAgICBsZXQgc3BsaXRJbmZvID0gaW5mby5zcGxpdCgnLScpO1xyXG4gICAgICAgICAgaW5mbyA9IHNwbGl0SW5mb1syXSArICcvJyArIHNwbGl0SW5mb1sxXSArICcvJyArIHNwbGl0SW5mb1swXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0dyb3VwIG9mIHVzZXJzJzpcclxuICAgICAgICBpbmZvID0gJCgnI2dyb3VwJykuZmluZChcIjpzZWxlY3RlZFwiKS50ZXh0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcyc6XHJcbiAgICAgICAgaWYgKGluZm8gPSAkKFwiaW5wdXRbbmFtZT0ncnVsZS1uZXctc3Vic2NyaXB0aW9uJ106Y2hlY2tlZFwiKVswXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBpbmZvID0gJChcImlucHV0W25hbWU9J3J1bGUtbmV3LXN1YnNjcmlwdGlvbiddOmNoZWNrZWRcIilbMF0uaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdXZWVrZGF5JzpcclxuICAgICAgICBpbmZvID0gJCgnI3dlZWtkYXknKS5maW5kKFwiOnNlbGVjdGVkXCIpLnRleHQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBpbmZvID0gJCgnLmNvbmZpZycpLmZpbmQoJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZm87XHJcbiAgfVxyXG5cclxuICBfZ2V0TGlzdChpdGVtcykge1xyXG4gICAgICBsZXQgbGlzdCA9ICcnO1xyXG4gICAgICBsZXQgbnVtSXRlbXMgPSBpdGVtcy5sZW5ndGg7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUl0ZW1zOyBpKyspIHtcclxuICAgICAgICBsaXN0ICs9ICc8bGkgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT4nO1xyXG4gICAgICAgIGxpc3QgKz0gJzxsaT48YSBjbGFzcz1cImNlbnRlci1hbGlnblwiPicgKyBpdGVtc1tpXSArICc8L2E+PC9saT4nO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbGlzdDtcclxuICAgIH1cclxuXHJcbiAgX2dldE9wdGlvbnMoaWQsIHRpdGxlLCBsaXN0LCBzZWxlY3RlZCkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSAnPHNlbGVjdCBpZD1cIicgKyBpZCArICdcIiBjbGFzcz1cImJyb3dzZXItZGVmYXVsdFwiPjxvcHRpb24gZGlzYWJsZWQgc2VsZWN0ZWQ+JyArIHRpdGxlICsgJzwvb3B0aW9uPic7XHJcbiAgICBmb3IgKGxldCBpIGluIGxpc3QpIHtcclxuICAgICAgaWYgKHNlbGVjdGVkICE9PSB1bmRlZmluZWQgJiBzZWxlY3RlZCA9PT0gbGlzdFtpXSkge1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJzxvcHRpb24gc2VsZWN0ZWQgaWQ9XCInICsgaWQgKyAnXCI+JyArIGxpc3RbaV0gKyAnPC9vcHRpb24+JztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvcHRpb25zICs9ICc8b3B0aW9uIGlkPVwiJyArIGlkICsgJ1wiPicgKyBsaXN0W2ldICsgJzwvb3B0aW9uPic7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG9wdGlvbnMgKz0gJzwvc2VsZWN0Pic7XHJcblxyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBfZ2V0UG9saWNpZXNUYWJsZSgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgX3RoaXMucG9saWNpZXNNYW5hZ2VyLmdldEZvcm1hdHRlZFBvbGljaWVzKCkudGhlbigocG9saWNpZXMpID0+IHtcclxuICAgICAgJCgnLnBvbGljaWVzLW5vJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgJCgnLnBvbGljaWVzLWN1cnJlbnQnKS5odG1sKCcnKTtcclxuXHJcbiAgICAgIGxldCBwb2xpY2llc1RpdGxlcyA9IFtdO1xyXG4gICAgICBsZXQgcnVsZXNUaXRsZXMgPSBbXTtcclxuICAgICAgbGV0IGlkcyA9IFtdO1xyXG5cclxuICAgICAgZm9yIChsZXQgaSBpbiBwb2xpY2llcykge1xyXG4gICAgICAgIHBvbGljaWVzVGl0bGVzLnB1c2gocG9saWNpZXNbaV0udGl0bGUpO1xyXG4gICAgICAgIHJ1bGVzVGl0bGVzLnB1c2gocG9saWNpZXNbaV0ucnVsZXNUaXRsZXMpO1xyXG4gICAgICAgIGlkcy5wdXNoKHBvbGljaWVzW2ldLmlkcyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB0YWJsZSA9ICc8dGFibGU+JztcclxuICAgICAgbGV0IGlzRW1wdHkgPSBwb2xpY2llc1RpdGxlcy5sZW5ndGggPT09IDA7XHJcblxyXG4gICAgICBmb3IgKGxldCBpIGluIHBvbGljaWVzVGl0bGVzKSB7XHJcbiAgICAgICAgdGFibGUgKz0gJzx0aGVhZD48dHIgaWQ9XCInICsgcG9saWNpZXNUaXRsZXNbaV0gKyAnXCI+PHRkPjwvdGQ+PHRkPjwvdGQ+PHRoIGNsYXNzPVwiY2VudGVyLWFsaWduXCI+JyArIHBvbGljaWVzVGl0bGVzW2ldICsgJzwvdGg+PHRkPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xpY2thYmxlLWNlbGwgcG9saWN5LWRlbGV0ZVwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlXCI+ZGVsZXRlX2ZvcmV2ZXI8L2k+PC90ZD48L3RyPjwvdGhlYWQ+PHRib2R5Pic7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGogaW4gcnVsZXNUaXRsZXNbaV0pIHtcclxuICAgICAgICAgIHRhYmxlICs9ICc8dHIgaWQ9XCInICsgaWRzW2ldW2pdICsgJ1wiID48dGQ+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbGlja2FibGUtY2VsbCBydWxlLXByaW9yaXR5LWluY3JlYXNlXCIgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGVcIj5hcnJvd191cHdhcmQ8L2k+PC90ZD48dGQ+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbGlja2FibGUtY2VsbCBydWxlLXByaW9yaXR5LWRlY3JlYXNlXCIgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGVcIj5hcnJvd19kb3dud2FyZDwvaT48L3RkPjx0ZCBjbGFzcz1cInJ1bGUtc2hvdyBjbGlja2FibGUtY2VsbFwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyXCI+JyArIHJ1bGVzVGl0bGVzW2ldW2pdICsgJzwvdGQ+PHRkPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xpY2thYmxlLWNlbGwgcnVsZS1kZWxldGVcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlcjsgdmVydGljYWwtYWxpZ246IG1pZGRsZVwiPmNsZWFyPC9pPjwvdGQ+PC90cj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YWJsZSArPSAnPHRyIGlkPVwiJyArIHBvbGljaWVzVGl0bGVzW2ldICsgJ1wiPjwvdGQ+PHRkPjwvdGQ+PHRkPjwvdGQ+PHRkIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXJcIj48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsaWNrYWJsZS1jZWxsIGNlbnRlci1hbGlnbiBydWxlLWFkZFwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyXCI+YWRkX2NpcmNsZTwvaT48L3RkPjwvdHI+JztcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWlzRW1wdHkpIHtcclxuICAgICAgICB0YWJsZSArPSAnPC90Ym9keT48L3RhYmxlPic7XHJcbiAgICAgICAgJCgnLnBvbGljaWVzLWN1cnJlbnQnKS5hcHBlbmQodGFibGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy5wb2xpY2llcy1ubycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgIH1cclxuICAgICAgJCgnLnJ1bGUtYWRkJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7IF90aGlzLl9zaG93VmFyaWFibGVzVHlwZXMoKTsgfSk7XHJcbiAgICAgICQoJy5ydWxlLWRlbGV0ZScpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fZGVsZXRlUnVsZSgpOyB9KTtcclxuICAgICAgJCgnLnJ1bGUtc2hvdycpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fc2hvd1J1bGUoKTsgfSk7XHJcbiAgICAgICQoJy5ydWxlLXByaW9yaXR5LWluY3JlYXNlJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7IF90aGlzLl9pbmNyZWFzZVJ1bGVQcmlvcml0eSgpOyB9KTtcclxuICAgICAgJCgnLnJ1bGUtcHJpb3JpdHktZGVjcmVhc2UnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHsgX3RoaXMuX2RlY3JlYXNlUnVsZVByaW9yaXR5KCk7IH0pO1xyXG4gICAgICAkKCcucG9saWN5LWFkZCcpLm9mZigpO1xyXG4gICAgICAkKCcucG9saWN5LWFkZCcpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fYWRkUG9saWN5KCk7IH0pO1xyXG4gICAgICAkKCcucG9saWN5LWRlbGV0ZScpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fZGVsZXRlUG9saWN5KCk7IH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZ29Ib21lKCkge1xyXG4gICAgdGhpcy5fZ2V0QWN0aXZlUG9saWN5KCk7XHJcbiAgICB0aGlzLl9nZXRQb2xpY2llc1RhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBfaW5jcmVhc2VSdWxlUHJpb3JpdHkoKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgdGhpc1ByaW9yaXR5ID0gcGFyc2VJbnQoc3BsaXRJZFtzcGxpdElkLmxlbmd0aCAtIDFdKTtcclxuICAgIGlmICh0aGlzUHJpb3JpdHkgIT09IDApIHtcclxuICAgICAgc3BsaXRJZC5wb3AoKTtcclxuICAgICAgbGV0IHBvbGljeVRpdGxlID0gc3BsaXRJZC5qb2luKCc6Jyk7XHJcbiAgICAgIGxldCBuZXdQcmlvcml0eSA9IHRoaXNQcmlvcml0eSAtIDE7XHJcblxyXG4gICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuaW5jcmVhc2VSdWxlUHJpb3JpdHkocG9saWN5VGl0bGUsIHRoaXNQcmlvcml0eSwgbmV3UHJpb3JpdHkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfbWFuYWdlR3JvdXBzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5nZXRHcm91cHMoKS50aGVuKChncm91cHNQRSkgPT4ge1xyXG4gICAgICAkKCcuZ3JvdXBzLWN1cnJlbnQnKS5odG1sKCcnKTtcclxuICAgICAgbGV0IGdyb3VwcyA9IGdyb3Vwc1BFLmdyb3Vwc05hbWVzO1xyXG4gICAgICBsZXQgbWVtYmVycyA9IGdyb3Vwc1BFLm1lbWJlcnM7XHJcbiAgICAgIGxldCBpZHMgPSBncm91cHNQRS5pZHM7XHJcblxyXG4gICAgICBsZXQgdGFibGUgPSAnPHRhYmxlPic7XHJcbiAgICAgIGxldCBpc0VtcHR5ID0gZ3JvdXBzLmxlbmd0aCA9PT0gMDtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgaW4gZ3JvdXBzKSB7XHJcbiAgICAgICAgdGFibGUgKz0gJzx0aGVhZD48dHI+PHRoIGlkPVwiJyArIGdyb3Vwc1tpXSArICdcIj4nICsgZ3JvdXBzW2ldICsgJzwvdGg+PHRkIHN0eWxlPVwidGV4dC1hbGlnbjpyaWdodFwiPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xpY2thYmxlLWNlbGwgZ3JvdXAtZGVsZXRlXCIgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGVcIj5kZWxldGVfZm9yZXZlcjwvaT48L3RkPjwvdHI+PC90aGVhZD48dGJvZHk+JztcclxuICAgICAgICBmb3IgKGxldCBqIGluIG1lbWJlcnNbaV0pIHtcclxuICAgICAgICAgIHRhYmxlICs9ICc8dHIgaWQ9XCInICsgaWRzW2ldW2pdICsgJ1wiID48dGQgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXJcIj4nICsgbWVtYmVyc1tpXVtqXSArICc8L3RkPjx0ZCBzdHlsZT1cInRleHQtYWxpZ246cmlnaHRcIj48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsaWNrYWJsZS1jZWxsIG1lbWJlci1kZWxldGVcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlcjsgdmVydGljYWwtYWxpZ246IG1pZGRsZVwiPmNsZWFyPC9pPjwvdGQ+PC90cj4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGFibGUgKz0gJzx0ciBpZD1cIicgKyBncm91cHNbaV0gKyAnXCI+PHRkPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xpY2thYmxlLWNlbGwgbWVtYmVyLWFkZFwiIGlkPVwiJyArIGdyb3Vwc1tpXSArICdcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlclwiPmFkZF9jaXJjbGU8L2k+PC90ZD48L3RyPic7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghaXNFbXB0eSkge1xyXG4gICAgICAgIHRhYmxlICs9ICc8L3Rib2R5PjwvdGFibGU+JztcclxuICAgICAgICAkKCcuZ3JvdXBzLWN1cnJlbnQnKS5hcHBlbmQodGFibGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy5ncm91cHMtY3VycmVudCcpLmFwcGVuZCgnPHA+VGhlcmUgYXJlIG5vIGdyb3VwcyBzZXQuPC9wPicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkKCcubWVtYmVyLWFkZCcpLm9mZigpO1xyXG4gICAgICAkKCcubWVtYmVyLWFkZCcpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fYWRkTWVtYmVyKCk7IH0pO1xyXG4gICAgICAkKCcubWVtYmVyLWRlbGV0ZScpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fZGVsZXRlTWVtYmVyKCk7IH0pO1xyXG4gICAgICAkKCcuZ3JvdXAtYWRkJykub2ZmKCk7XHJcbiAgICAgICQoJy5ncm91cC1hZGQnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHsgX3RoaXMuX2NyZWF0ZUdyb3VwKCk7IH0pO1xyXG4gICAgICAkKCcuZ3JvdXAtZGVsZXRlJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7IF90aGlzLl9kZWxldGVHcm91cCgpOyB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3BhcnNlRmlsZUNvbnRlbnQoY29udGVudCkge1xyXG4gICAgbGV0IHBhcnNlZENvbnRlbnQgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgZm9yIChsZXQgaSBpbiBwYXJzZWRDb250ZW50KSB7XHJcbiAgICAgIHRoaXMucG9saWNpZXNNYW5hZ2VyLmFkZFBvbGljeShpLCB1bmRlZmluZWQsIHBhcnNlZENvbnRlbnRbaV0pO1xyXG4gICAgfVxyXG4gICAgJCgnLnBvbGljeS1uZXcnKS5jbG9zZU1vZGFsKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RWxlbWVudHMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRlOiAocGFyYW1zKSA9PiB7IHJldHVybiAnPGlucHV0IHR5cGU9XCJkYXRlXCIgY2xhc3M9XCJkYXRlcGlja2VyXCI+JzsgfSxcclxuICAgICAgc2VsZWN0OiAocGFyYW1zKSA9PiB7IHJldHVybiB0aGlzLl9nZXRPcHRpb25zKHBhcmFtc1swXSwgcGFyYW1zWzFdLCBwYXJhbXNbMl0pOyB9LFxyXG4gICAgICBmb3JtOiAocGFyYW1zKSA9PiB7IHJldHVybiAnPGZvcm0+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCInICsgcGFyYW1zICsgJ1wiPjwvaW5wdXQ+PC9mb3JtPic7IH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBfc2hvd05ld0NvbmZpZ3VyYXRpb25QYW5lbChwb2xpY3lUaXRsZSkge1xyXG4gICAgbGV0IHZhcmlhYmxlID0gZXZlbnQudGFyZ2V0LnRleHQ7XHJcbiAgICAkKCcudmFyaWFibGUnKS5odG1sKHRoaXMuX2dldE5ld0NvbmZpZ3VyYXRpb24ocG9saWN5VGl0bGUsIHZhcmlhYmxlKSk7XHJcbiAgICAkKCcuc2NvcGVzJykuZW1wdHkoKS5odG1sKCcnKTtcclxuXHJcbiAgICBsZXQga2V5cyA9IFsnRW1haWwnLCAnSHlwZXJ0eScsICdBbGwnXTtcclxuICAgIGxldCBzY29wZXMgPSBbJ2lkZW50aXR5JywgJ2h5cGVydHknLCAnZ2xvYmFsJ107XHJcbiAgICBsZXQgbGlzdHMgPSBbXTtcclxuXHJcbiAgICB0aGlzLnBvbGljaWVzTWFuYWdlci5nZXRNeUVtYWlscygpLnRoZW4oKGVtYWlscykgPT4ge1xyXG4gICAgICBsaXN0cy5wdXNoKGVtYWlscyk7XHJcbiAgICAgIHRoaXMucG9saWNpZXNNYW5hZ2VyLmdldE15SHlwZXJ0aWVzKCkudGhlbigoaHlwZXJ0aWVzKSA9PiB7XHJcbiAgICAgICAgbGlzdHMucHVzaChoeXBlcnRpZXMpO1xyXG4gICAgICAgIGxpc3RzLnB1c2goWydBbGwgaWRlbnRpdGllcyBhbmQgaHlwZXJ0aWVzJ10pO1xyXG4gICAgICAgICQoJy5zY29wZXMnKS5hcHBlbmQodGhpcy5fZ2V0R3JvdXBPcHRpb25zKCdBcHBseSB0aGlzIGNvbmZpZ3VyYXRpb24gdG86Jywga2V5cywgc2NvcGVzLCBsaXN0cykpO1xyXG4gICAgICAgICQoJy52YXJpYWJsZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd1ZhcmlhYmxlc1R5cGVzKGV2ZW50KSB7XHJcbiAgICBsZXQgcG9saWN5VGl0bGUgPSBldmVudC50YXJnZXQuY2xvc2VzdCgndHInKS5pZDtcclxuXHJcbiAgICAkKCcjdmFyaWFibGVzLXR5cGVzJykuZW1wdHkoKS5odG1sKCcnKTtcclxuICAgIGxldCB2YXJpYWJsZXMgPSB0aGlzLnBvbGljaWVzTWFuYWdlci5nZXRWYXJpYWJsZXMoKTtcclxuICAgICQoJyN2YXJpYWJsZXMtdHlwZXMnKS5hcHBlbmQodGhpcy5fZ2V0TGlzdCh2YXJpYWJsZXMpKTtcclxuICAgICQoJy52YXJpYWJsZScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAkKCcucnVsZS1uZXcnKS5vcGVuTW9kYWwoKTtcclxuICAgICQoJyN2YXJpYWJsZXMtdHlwZXMnKS5vZmYoKTtcclxuICAgICQoJyN2YXJpYWJsZXMtdHlwZXMnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHsgdGhpcy5fc2hvd05ld0NvbmZpZ3VyYXRpb25QYW5lbChwb2xpY3lUaXRsZSk7IH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldE5ld0NvbmZpZ3VyYXRpb24ocG9saWN5VGl0bGUsIHZhcmlhYmxlKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGluZm8gPSBfdGhpcy5wb2xpY2llc01hbmFnZXIuZ2V0VmFyaWFibGVJbmZvKHZhcmlhYmxlKTtcclxuICAgICQoJy5ydWxlLW5ldy10aXRsZScpLmh0bWwoaW5mby50aXRsZSk7XHJcbiAgICAkKCcuZGVzY3JpcHRpb24nKS5odG1sKGluZm8uZGVzY3JpcHRpb24pO1xyXG4gICAgJCgnLmNvbmZpZycpLmh0bWwoJycpO1xyXG5cclxuICAgIGlmICh2YXJpYWJsZSA9PT0gJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcycpIHtcclxuICAgICAgJCgnLnN1YnNjcmlwdGlvbi10eXBlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoJy5zdWJzY3JpcHRpb24tdHlwZScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgIGxldCB0YWdzID0gaW5mby5pbnB1dDtcclxuICAgICAgZm9yIChsZXQgaSBpbiB0YWdzKSB7XHJcbiAgICAgICAgX3RoaXMucG9saWNpZXNNYW5hZ2VyLmdldEdyb3Vwc05hbWVzKCkudGhlbigoZ3JvdXBzTmFtZXMpID0+IHtcclxuICAgICAgICAgIGlmICh2YXJpYWJsZSA9PT0gJ0dyb3VwIG9mIHVzZXJzJykge1xyXG4gICAgICAgICAgICB0YWdzW2ldWzFdLnB1c2goZ3JvdXBzTmFtZXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnLmNvbmZpZycpLmFwcGVuZChfdGhpcy5lbGVtZW50c1t0YWdzW2ldWzBdXSh0YWdzW2ldWzFdKSk7XHJcbiAgICAgICAgICBpZiAodmFyaWFibGUgPT09ICdHcm91cCBvZiB1c2VycycpIHtcclxuICAgICAgICAgICAgdGFnc1tpXVsxXS5wb3AoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodmFyaWFibGUgPT09J2RhdGUnKSB7XHJcbiAgICAgICAgJCgnLmRhdGVwaWNrZXInKS5waWNrYWRhdGUoe1xyXG4gICAgICAgICAgc2VsZWN0TW9udGhzOiB0cnVlLFxyXG4gICAgICAgICAgc2VsZWN0WWVhcnM6IDE1XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxvdycpLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibG9jaycpLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICQoJy5vay1idG4nKS5vZmYoKTtcclxuICAgICQoJy5vay1idG4nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKCQoXCJpbnB1dFtuYW1lPSdydWxlLW5ldy1kZWNpc2lvbiddOmNoZWNrZWRcIilbMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGxldCBpbmZvID0gX3RoaXMuX2dldEluZm8odmFyaWFibGUpO1xyXG4gICAgICAgIGxldCBkZWNpc2lvbiA9ICQoXCJpbnB1dFtuYW1lPSdydWxlLW5ldy1kZWNpc2lvbiddOmNoZWNrZWRcIilbMF0uaWQ7XHJcbiAgICAgICAgZGVjaXNpb24gPSBkZWNpc2lvbiA9PT0gJ2FsbG93JztcclxuICAgICAgICBsZXQgc2NvcGUgPSAkKCcuc2NvcGVzJykuZmluZChcIjpzZWxlY3RlZFwiKVswXS5pZDtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gJCgnLnNjb3BlcycpLmZpbmQoXCI6c2VsZWN0ZWRcIilbMF0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGFyZ2V0ID0gKHRhcmdldCA9PT0gJ0FsbCBpZGVudGl0aWVzIGFuZCBoeXBlcnRpZXMnKSA/ICdnbG9iYWwnIDogdGFyZ2V0O1xyXG4gICAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5zZXRJbmZvKHZhcmlhYmxlLCBwb2xpY3lUaXRsZSwgaW5mbywgZGVjaXNpb24sIHNjb3BlLCB0YXJnZXQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgJCgnLnJ1bGUtbmV3JykuY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgICAgX3RoaXMuX2dvSG9tZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IEVycm9yKCdJTkZPUk1BVElPTiBNSVNTSU5HOiBwbGVhc2Ugc3BlY2lmeSBhbiBhdXRob3Jpc2F0aW9uIGRlY2lzaW9uLicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVJbmZvKHJlc291cmNlVHlwZSkge1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgc2NvcGUgPSBzcGxpdElkWzBdO1xyXG4gICAgc3BsaXRJZC5zaGlmdCgpO1xyXG4gICAgbGV0IHRhcmdldCA9IHNwbGl0SWQuam9pbignJyk7XHJcbiAgICBsZXQgY29uZGl0aW9uID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuY2hpbGRyZW5bMF0uaWQ7XHJcbiAgICB0aGlzLnBvbGljaWVzTWFuYWdlci5kZWxldGVJbmZvKHJlc291cmNlVHlwZSwgc2NvcGUsIHRhcmdldCwgY29uZGl0aW9uKTtcclxuICAgIHRoaXMuX2dvSG9tZSgpO1xyXG4gIH1cclxuXHJcbiAgX3NldExpc3RlbmVycygpIHtcclxuICAgICQoJy5zZXR0aW5ncy1idG4nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgYm9keTogeyBtZXRob2Q6ICdzaG93QWRtaW5QYWdlJyB9LCB0bzogJ3J1bnRpbWU6Z3VpLW1hbmFnZXInIH0sICcqJyk7XHJcbiAgICAgICQoJy5hZG1pbi1wYWdlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5zdHlsZSA9ICdiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyc7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucG9saWNpZXMtcGFnZS1zaG93Jykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICQoJy5wb2xpY2llcy1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgJCgnLmlkZW50aXRpZXMtc2VjdGlvbicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgIHRoaXMuX2dvSG9tZSgpO1xyXG4gICAgICB0aGlzLl9tYW5hZ2VHcm91cHMoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5hZG1pbi1wYWdlLWV4aXQnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgYm9keTogeyBtZXRob2Q6ICdoaWRlQWRtaW5QYWdlJyB9LCB0bzogJ3J1bnRpbWU6Z3VpLW1hbmFnZXInIH0sICcqJyk7XHJcbiAgICAgICQoJy5hZG1pbi1wYWdlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5zdHlsZSA9ICdiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50Oyc7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuZXhpdC1idG4nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgJCgnLnN1YnNjcmlwdGlvbi10eXBlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgJCgnLmhlbHAtbWVudScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjcG9saWN5LWZpbGUnKS5vbignY2hhbmdlJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGxldCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xyXG4gICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSwgXCJVVEYtOFwiKTtcclxuICAgICAgcmVhZGVyLm9ubG9hZCA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3BhcnNlRmlsZUNvbnRlbnQoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgdGhpcy5fZ29Ib21lKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICB0aHJvdyBFcnJvcihcIkVycm9yIHJlYWRpbmcgdGhlIGZpbGVcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dSdWxlKGV2ZW50KSB7XHJcbiAgICBsZXQgcnVsZVRpdGxlID0gZXZlbnQudGFyZ2V0LnRleHRDb250ZW50O1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgcHJpb3JpdHkgPSBzcGxpdElkW3NwbGl0SWQubGVuZ3RoIC0gMV07XHJcbiAgICBzcGxpdElkLnBvcCgpO1xyXG4gICAgbGV0IHBvbGljeVRpdGxlID0gc3BsaXRJZC5qb2luKCc6Jyk7XHJcbiAgICB0aGlzLnBvbGljaWVzTWFuYWdlci5nZXRSdWxlT2ZQb2xpY3kocG9saWN5VGl0bGUsIHByaW9yaXR5KS50aGVuKChydWxlKSA9PiB7XHJcbiAgICAgIGlmIChydWxlLmNvbmRpdGlvbi5hdHRyaWJ1dGUgPT09ICdzdWJzY3JpcHRpb24nICYmIHJ1bGUuY29uZGl0aW9uLnBhcmFtcyA9PT0gJ3ByZWF1dGhvcmlzZWQnKSB7XHJcbiAgICAgICAgJCgnLmF1dGhvcmlzZS1idG5zJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgZWxlbWVudDtcclxuICAgICAgICBpZiAocnVsZS5kZWNpc2lvbikge1xyXG4gICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYWxsb3cnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYmxvY2snKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAkKCcuYXV0aG9yaXNlLWJ0bnMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICB9XHJcbiAgICAgICQoJy5tZW1iZXItYWRkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgJCgnLm1lbWJlci1uZXctYnRuJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgICAgICQoJy5ydWxlLWRldGFpbHMnKS5vcGVuTW9kYWwoKTtcclxuICAgICAgJCgnLnJ1bGUtdGl0bGUnKS5odG1sKCc8aDU+PGI+JyArIHJ1bGVUaXRsZSArICc8L2I+PC9oNT4nKTtcclxuICAgICAgaWYgKHJ1bGUuY29uZGl0aW9uLmF0dHJpYnV0ZSA9PT0gJ3N1YnNjcmlwdGlvbicpIHtcclxuICAgICAgICAkKCcuc3Vic2NyaXB0aW9uLXR5cGUnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICB9XHJcbiAgICAgICQoJy5zdWJzY3JpcHRpb24tZGVjaXNpb24nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHsgdGhpcy5fdXBkYXRlUnVsZSgnc3Vic2NyaXB0aW9uJywgcG9saWN5VGl0bGUsIHJ1bGUpOyB9KTtcclxuICAgICAgJCgnLmRlY2lzaW9uJykub2ZmKCk7XHJcbiAgICAgICQoJy5kZWNpc2lvbicpLm9uKCdjbGljaycsIChldmVudCkgPT4geyB0aGlzLl91cGRhdGVSdWxlKCdhdXRob3Jpc2F0aW9uJywgcG9saWN5VGl0bGUsIHJ1bGUpO30pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdXBkYXRlUnVsZSh0eXBlLCBwb2xpY3lUaXRsZSwgcnVsZSkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIGxldCB0aXRsZSA9ICQoJy5ydWxlLXRpdGxlJykudGV4dCgpO1xyXG4gICAgbGV0IHNwbGl0VGl0bGUgPSB0aXRsZS5zcGxpdCgnICcpO1xyXG4gICAgbGV0IGluZGV4ID0gc3BsaXRUaXRsZS5pbmRleE9mKCdpcycpO1xyXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICBpbmRleCA9IHNwbGl0VGl0bGUuaW5kZXhPZignYXJlJyk7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSAnYXV0aG9yaXNhdGlvbic6XHJcbiAgICAgICAgbGV0IG5ld0RlY2lzaW9uID0gJChcImlucHV0W25hbWU9J3J1bGUtdXBkYXRlLWRlY2lzaW9uJ106Y2hlY2tlZFwiKVswXS5pZDtcclxuXHJcbiAgICAgICAgaWYgKG5ld0RlY2lzaW9uID09PSAnYnRuLWFsbG93Jykge1xyXG4gICAgICAgICAgc3BsaXRUaXRsZVtpbmRleCArIDFdID0gJ2FsbG93ZWQnO1xyXG4gICAgICAgICAgbmV3RGVjaXNpb24gPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzcGxpdFRpdGxlW2luZGV4ICsgMV0gPSAnYmxvY2tlZCc7XHJcbiAgICAgICAgICBuZXdEZWNpc2lvbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aXRsZSA9IHNwbGl0VGl0bGUuam9pbignICcpO1xyXG4gICAgICAgICQoJy5ydWxlLXRpdGxlJykuaHRtbCgnPGg1PjxiPicgKyB0aXRsZSArICc8L2I+PC9oNT4nKTtcclxuICAgICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIudXBkYXRlUG9saWN5KHBvbGljeVRpdGxlLCBydWxlLCBuZXdEZWNpc2lvbikudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBfdGhpcy5fZ29Ib21lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3N1YnNjcmlwdGlvbic6XHJcbiAgICAgICAgbGV0IG5ld1N1YnNjcmlwdGlvblR5cGUgPSBldmVudC50YXJnZXQubGFiZWxzWzBdLnRleHRDb250ZW50O1xyXG5cclxuICAgICAgICBsZXQgZGVjaXNpb24gPSBzcGxpdFRpdGxlW2luZGV4ICsgMV07XHJcbiAgICAgICAgc3BsaXRUaXRsZSA9IHRpdGxlLnNwbGl0KCdoeXBlcnRpZXMgYXJlJyk7XHJcbiAgICAgICAgaWYgKG5ld1N1YnNjcmlwdGlvblR5cGUgPT09ICdBbGwgc3Vic2NyaWJlcnMnKSB7XHJcbiAgICAgICAgICAkKCcuYXV0aG9yaXNlLWJ0bnMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgbmV3RGVjaXNpb24gPSBydWxlLmRlY2lzaW9uO1xyXG4gICAgICAgICAgbmV3U3Vic2NyaXB0aW9uVHlwZSA9ICcqJztcclxuICAgICAgICAgIHRpdGxlID0gJ1N1YnNjcmlwdGlvbnMgZnJvbSBhbGwgaHlwZXJ0aWVzIGFyZScgKyBzcGxpdFRpdGxlWzFdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKCcuYXV0aG9yaXNlLWJ0bnMnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgbmV3RGVjaXNpb24gPSB0cnVlO1xyXG4gICAgICAgICAgbmV3U3Vic2NyaXB0aW9uVHlwZSA9ICdwcmVhdXRob3Jpc2VkJztcclxuICAgICAgICAgIHRpdGxlID0gJ1N1YnNjcmlwdGlvbnMgZnJvbSBwcmV2aW91c2x5IGF1dGhvcmlzZWQgaHlwZXJ0aWVzIGFyZScgKyBzcGxpdFRpdGxlWzFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLnJ1bGUtdGl0bGUnKS5odG1sKCc8aDU+PGI+JyArIHRpdGxlICsgJzwvYj48L2g1PicpO1xyXG4gICAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci51cGRhdGVQb2xpY3kocG9saWN5VGl0bGUsIHJ1bGUsIG5ld0RlY2lzaW9uLCBuZXdTdWJzY3JpcHRpb25UeXBlKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvbGljaWVzR1VJO1xyXG4iLCJjbGFzcyBQb2xpY2llc01hbmFnZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcihwZXBHdWlVUkwsIHBlcFVSTCwgbWVzc2FnZUJ1cykge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIF90aGlzLl9ndWlVUkwgPSBwZXBHdWlVUkw7XHJcbiAgICBfdGhpcy5fcGVwVVJMID0gcGVwVVJMO1xyXG4gICAgX3RoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzO1xyXG5cclxuICAgIC8vIGFzc3VtZSBwcmVwYXJlIGF0dHJpYnV0ZXMgaXMgY2FsbGVkIGFmdGVyIHRoaXNcclxuICB9XHJcblxyXG4gIGNhbGxQb2xpY3lFbmdpbmVGdW5jKG1ldGhvZE5hbWUsIHBhcmFtZXRlcnMpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBsZXQgbWVzc2FnZTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBtZXNzYWdlID0geyB0eXBlOiAnZXhlY3V0ZScsIHRvOiBfdGhpcy5fcGVwVVJMLCBmcm9tOiBfdGhpcy5fZ3VpVVJMLFxyXG4gICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6ICdwb2xpY3knLCBtZXRob2Q6IG1ldGhvZE5hbWUsIHBhcmFtczogcGFyYW1ldGVycyB9LCB9O1xyXG4gICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtZXNzYWdlLCAocmVzKSA9PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHJlcy5ib2R5LnZhbHVlO1xyXG4gICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByZXBhcmVBdHRyaWJ1dGVzKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICBfdGhpcy5wb2xpY2llcyA9IHVzZXJQb2xpY2llcztcclxuICAgICAgICBfdGhpcy52YXJpYWJsZXMgPSBfdGhpcy5zZXRWYXJpYWJsZXMoKTtcclxuICAgICAgICBfdGhpcy5hZGRpdGlvbiA9IF90aGlzLnNldEFkZGl0aW9uTWV0aG9kcygpO1xyXG4gICAgICAgIF90aGlzLnZhbGlkYXRpb24gPSBfdGhpcy5zZXRWYWxpZGF0aW9uTWV0aG9kcygpO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZFRvR3JvdXAoZ3JvdXBOYW1lLCB1c2VyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnYWRkVG9Hcm91cCcsIHtncm91cE5hbWU6IGdyb3VwTmFtZSwgdXNlckVtYWlsOiB1c2VyfSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVHcm91cChncm91cE5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdjcmVhdGVHcm91cCcsIHtncm91cE5hbWU6IGdyb3VwTmFtZX0pO1xyXG4gIH1cclxuXHJcbiAgYWRkUG9saWN5KHRpdGxlLCBjb21iaW5pbmdBbGdvcml0aG0sIHBvbGljeSkge1xyXG4gICAgaWYgKHBvbGljeSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHN3aXRjaCAoY29tYmluaW5nQWxnb3JpdGhtKSB7XHJcbiAgICAgICAgY2FzZSAnQmxvY2sgb3ZlcnJpZGVzJzpcclxuICAgICAgICAgIGNvbWJpbmluZ0FsZ29yaXRobSA9ICdibG9ja092ZXJyaWRlcyc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBbGxvdyBvdmVycmlkZXMnOlxyXG4gICAgICAgICAgY29tYmluaW5nQWxnb3JpdGhtID0gJ2FsbG93T3ZlcnJpZGVzJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0ZpcnN0IGFwcGxpY2FibGUnOlxyXG4gICAgICAgICAgY29tYmluaW5nQWxnb3JpdGhtID0gJ2ZpcnN0QXBwbGljYWJsZSc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgY29tYmluaW5nQWxnb3JpdGhtID0gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ2FkZFBvbGljeScsXHJcbiAgICAgIHtzb3VyY2U6ICdVU0VSJywga2V5OiB0aXRsZSwgcG9saWN5OiBwb2xpY3ksIGNvbWJpbmluZ0FsZ29yaXRobTogY29tYmluaW5nQWxnb3JpdGhtfSk7XHJcbiAgfVxyXG5cclxuICBkZWNyZWFzZVJ1bGVQcmlvcml0eShwb2xpY3lUaXRsZSwgdGhpc1ByaW9yaXR5LCBuZXdQcmlvcml0eSkge1xyXG4gICAgdGhpcy5nZXRSdWxlT2ZQb2xpY3kocG9saWN5VGl0bGUsIG5ld1ByaW9yaXR5KS5wcmlvcml0eSA9IHRoaXNQcmlvcml0eTtcclxuICAgIHRoaXMuZ2V0UnVsZU9mUG9saWN5KHBvbGljeVRpdGxlLCB0aGlzUHJpb3JpdHkpLnByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnc2F2ZVBvbGljaWVzJywge3NvdXJjZTogJ1VTRVInfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVHcm91cChncm91cE5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdkZWxldGVHcm91cCcsIHtncm91cE5hbWU6IGdyb3VwTmFtZX0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlUG9saWN5KHRpdGxlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygncmVtb3ZlUG9saWN5Jywge3NvdXJjZTogJ1VTRVInLCBrZXk6IHRpdGxlfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVSdWxlKHBvbGljeVRpdGxlLCBydWxlKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigodXNlclBvbGljaWVzKSA9PiB7XHJcbiAgICAgICAgdXNlclBvbGljaWVzW3BvbGljeVRpdGxlXS5kZWxldGVSdWxlKHJ1bGUpO1xyXG4gICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlUG9saWNpZXMnLCB7c291cmNlOiAnVVNFUid9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEFjdGl2ZVBvbGljeSgpIHtcclxuICAgIHJldHVybiB0aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdhY3RpdmVVc2VyUG9saWN5Jywge30pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9saWN5KGtleSkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY3knLCB7a2V5OiBrZXl9KTtcclxuICB9XHJcblxyXG4gIGdldFBvbGljaWVzVGl0bGVzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigocG9saWNpZXMpID0+IHtcclxuICAgICAgICBsZXQgdGl0bGVzID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgaW4gcG9saWNpZXMpIHtcclxuICAgICAgICAgIHRpdGxlcy5wdXNoKGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzb2x2ZSh0aXRsZXMpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGFyZ2V0cyhzY29wZSkge1xyXG4gICAgbGV0IHRhcmdldHMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBpIGluIHRoaXMucG9saWNpZXNbc2NvcGVdKSB7XHJcbiAgICAgIGlmICh0YXJnZXRzLmluZGV4T2YoaSkgPT09IC0xKSB7XHJcbiAgICAgICAgdGFyZ2V0cy5wdXNoKGkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRhcmdldHM7XHJcbiAgfVxyXG5cclxuICBpbmNyZWFzZVJ1bGVQcmlvcml0eShwb2xpY3lUaXRsZSwgdGhpc1ByaW9yaXR5LCBuZXdQcmlvcml0eSkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIF90aGlzLmdldFJ1bGVPZlBvbGljeShwb2xpY3lUaXRsZSwgdGhpc1ByaW9yaXR5KS5wcmlvcml0eSA9IG5ld1ByaW9yaXR5O1xyXG4gICAgX3RoaXMuZ2V0UnVsZU9mUG9saWN5KHBvbGljeVRpdGxlLCBuZXdQcmlvcml0eSkucHJpb3JpdHkgPSB0aGlzUHJpb3JpdHk7XHJcbiAgICByZXR1cm4gX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3NhdmVQb2xpY2llcycsIHtzb3VyY2U6ICdVU0VSJ30pO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFyaWFibGVzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgJ0RhdGUnOiB7XHJcbiAgICAgICAgdGl0bGU6ICc8YnI+PGg1PlVwZGF0aW5nIGRhdGUgcmVsYXRlZCBjb25maWd1cmF0aW9uczwvaDU+PHA+SW5jb21pbmcgY29tbXVuaWNhdGlvbnMgaW4gdGhlIGludHJvZHVjZWQgZGF0ZSB3aWxsIGJlIGFsbG93ZWQgb3IgYmxvY2tlZCBhY2NvcmRpbmcgdG8geW91ciBjb25maWd1cmF0aW9ucywgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaW4gdGhlIHByZWZlcmVuY2VzIHBhZ2UuPC9wPjxicj4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnPHA+RGF0ZTo8L3A+JyxcclxuICAgICAgICBpbnB1dDogW1xyXG4gICAgICAgICAgWydkYXRlJywgW11dXHJcbiAgICAgICAgXVxyXG4gICAgICB9LFxyXG4gICAgICAnRG9tYWluJzoge1xyXG4gICAgICAgIHRpdGxlOiAnPGJyPjxoNT5VcGRhdGluZyBkb21haW4gY29uZmlndXJhdGlvbnM8L2g1PjxwPkluY29taW5nIGNvbW11bmljYXRpb25zIGZyb20gYSB1c2VyIHdob3NlIGlkZW50aXR5IGlzIGZyb20gdGhlIGludHJvZHVjZWQgZG9tYWluIGFsbG93ZWQgb3IgYmxvY2tlZCBhY2NvcmRpbmcgdG8geW91ciBjb25maWd1cmF0aW9ucywgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaW4gdGhlIHByZWZlcmVuY2VzIHBhZ2UuPC9wPjxicj4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnPHA+RG9tYWluOjwvcD4nLFxyXG4gICAgICAgIGlucHV0OiBbXHJcbiAgICAgICAgICBbJ2Zvcm0nLCBbXV1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgICdHcm91cCBvZiB1c2Vycyc6IHtcclxuICAgICAgICB0aXRsZTogJzxicj48aDU+VXBkYXRpbmcgZ3JvdXBzIGNvbmZpZ3VyYXRpb25zPC9oNT48cD5JbmNvbWluZyBjb21tdW5pY2F0aW9ucyBmcm9tIGEgdXNlciB3aG9zZSBpZGVudGl0eSBpcyBpbiB0aGUgaW50cm9kdWNlZCBncm91cCB3aWxsIGJlIGFsbG93ZWQgb3IgYmxvY2tlZCBhY2NvcmRpbmcgdG8geW91ciBjb25maWd1cmF0aW9ucywgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaW4gdGhlIHByZWZlcmVuY2VzIHBhZ2UuPC9wPjxicj4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnPHA+R3JvdXAgbmFtZTo8L3A+JyxcclxuICAgICAgICBpbnB1dDogW1xyXG4gICAgICAgICAgWydzZWxlY3QnLCBbJ2dyb3VwJywgJ1NlbGVjdCBhIGdyb3VwOiddXVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcyc6IHtcclxuICAgICAgICB0aXRsZTogJzxicj48aDU+VXBkYXRpbmcgc3Vic2NyaXB0aW9ucyBjb25maWd1cmF0aW9uczwvaDU+PHA+VGhlIGFjY2VwdGFuY2Ugb2Ygc3Vic2NyaXB0aW9ucyB0byB5b3VyIGh5cGVydGllcyB3aWxsIGJlIGFsbG93ZWQgb3IgYmxvY2tlZCBhY2NvcmRpbmcgdG8geW91ciBjb25maWd1cmF0aW9ucywgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaW4gdGhlIHByZWZlcmVuY2VzIHBhZ2UuPC9wPjxicj4nLFxyXG4gICAgICAgIGlucHV0OiBbXVxyXG4gICAgICB9LFxyXG4gICAgICAnVGltZSBvZiB0aGUgZGF5Jzoge1xyXG4gICAgICAgIHRpdGxlOiAnPGJyPjxoNT5VcGRhdGluZyB0aW1lIGNvbmZpZ3VyYXRpb25zPC9oNT48cD5JbmNvbWluZyBjb21tdW5pY2F0aW9ucyBpbiB0aGUgaW50cm9kdWNlZCB0aW1lc2xvdCB3aWxsIGJlIGJsb2NrZWQsIGJ1dCB0aGlzIGNhbiBiZSBjaGFuZ2VkIGluIHRoZSBwcmVmZXJlbmNlcyBwYWdlLjwvcD48cD5QbGVhc2UgaW50cm9kdWNlIGEgbmV3IHRpbWVzbG90IGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0OjwvcD48cCBjbGFzcz1cImNlbnRlci1hbGlnblwiPiZsdDtTVEFSVC1IT1VSJmd0OzombHQ7U1RBUlQtTUlOVVRFUyZndDsgdG8gJmx0O0VORC1IT1VSJmd0OzombHQ7RU5ELU1JTlVURVMmZ3Q7PC9wPjxicj4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnPHA+VGltZXNsb3Q6PC9wPicsXHJcbiAgICAgICAgaW5wdXQ6IFtcclxuICAgICAgICAgIFsnZm9ybScsIFtdXVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgV2Vla2RheToge1xyXG4gICAgICAgIHRpdGxlOiAnPGJyPjxoNT5VcGRhdGluZyB3ZWVrZGF5IGNvbmZpZ3VyYXRpb25zPC9oNT48cD5JbmNvbWluZyBjb21tdW5pY2F0aW9ucyBpbiB0aGUgaW50cm9kdWNlZCB3ZWVrZGF5IHdpbGwgYmUgYWxsb3dlZCBvciBibG9ja2VkIGFjY29yZGluZyB0byB5b3VyIGNvbmZpZ3VyYXRpb25zLCB3aGljaCBjYW4gYmUgY2hhbmdlZCBpbiB0aGUgcHJlZmVyZW5jZXMgcGFnZS48L3A+PGJyPicsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICc8cD5XZWVrZGF5OjwvcD4nLFxyXG4gICAgICAgIGlucHV0OiBbXHJcbiAgICAgICAgICBbJ3NlbGVjdCcsIFsnd2Vla2RheScsICdTZWxlY3QgYSB3ZWVrZGF5OicsIFsnU2F0dXJkYXknLCAnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknXV1dXHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0QWRkaXRpb25NZXRob2RzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiB7XHJcbiAgICAgIERhdGU6IChwYXJhbXMpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHBvbGljeVRpdGxlID0gcGFyYW1zWzBdO1xyXG4gICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICAgICAgdXNlclBvbGljaWVzW3BvbGljeVRpdGxlXS5jcmVhdGVSdWxlKHBhcmFtc1s0XSwgeyBhdHRyaWJ1dGU6ICdkYXRlJywgb3BlcmF0b3I6ICdlcXVhbHMnLCBwYXJhbXM6IHBhcmFtc1szXSB9LCBwYXJhbXNbMV0sIHBhcmFtc1syXSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlUG9saWNpZXMnLCB7c291cmNlOiAnVVNFUid9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIERvbWFpbjogKHBhcmFtcykgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBsZXQgcG9saWN5VGl0bGUgPSBwYXJhbXNbMF07XHJcbiAgICAgICAgICBfdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygndXNlclBvbGljaWVzJywge30pLnRoZW4oKHVzZXJQb2xpY2llcykgPT4ge1xyXG4gICAgICAgICAgICB1c2VyUG9saWNpZXNbcG9saWN5VGl0bGVdLmNyZWF0ZVJ1bGUocGFyYW1zWzRdLCB7IGF0dHJpYnV0ZTogJ2RvbWFpbicsIG9wZXJhdG9yOiAnZXF1YWxzJywgcGFyYW1zOiBwYXJhbXNbM10gfSwgcGFyYW1zWzFdLCBwYXJhbXNbMl0pO1xyXG4gICAgICAgICAgICBfdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnc2F2ZVBvbGljaWVzJywge3NvdXJjZTogJ1VTRVInfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICAnR3JvdXAgb2YgdXNlcnMnOiAocGFyYW1zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIGxldCBwb2xpY3lUaXRsZSA9IHBhcmFtc1swXTtcclxuICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigodXNlclBvbGljaWVzKSA9PiB7XHJcbiAgICAgICAgICAgIHVzZXJQb2xpY2llc1twb2xpY3lUaXRsZV0uY3JlYXRlUnVsZShwYXJhbXNbNF0sIHsgYXR0cmlidXRlOiAnc291cmNlJywgb3BlcmF0b3I6ICdpbicsIHBhcmFtczogcGFyYW1zWzNdIH0sIHBhcmFtc1sxXSwgcGFyYW1zWzJdKTtcclxuICAgICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3NhdmVQb2xpY2llcycsIHtzb3VyY2U6ICdVU0VSJ30pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcyc6IChwYXJhbXMpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHBvbGljeVRpdGxlID0gcGFyYW1zWzBdO1xyXG4gICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICAgICAgbGV0IG9wZXJhdG9yID0gJ2VxdWFscyc7XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXNbM10gPT09ICdwcmVhdXRob3Jpc2VkJykge1xyXG4gICAgICAgICAgICAgIG9wZXJhdG9yID0gJ2luJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVElBR086IHRoaXMgaXMgZ2l2aW5nIG1lIGFuIGVycm9yLi4uXHJcbiAgICAgICAgICAgIHVzZXJQb2xpY2llc1twb2xpY3lUaXRsZV0uY3JlYXRlUnVsZShwYXJhbXNbNF0sIHsgYXR0cmlidXRlOiAnc3Vic2NyaXB0aW9uJywgb3BlcmF0b3I6IG9wZXJhdG9yLCBwYXJhbXM6IHBhcmFtc1szXSB9LCBwYXJhbXNbMV0sIHBhcmFtc1syXSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlUG9saWNpZXMnLCB7c291cmNlOiAnVVNFUid9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgICdUaW1lIG9mIHRoZSBkYXknOiAocGFyYW1zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIGxldCBwb2xpY3lUaXRsZSA9IHBhcmFtc1swXTtcclxuICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigodXNlclBvbGljaWVzKSA9PiB7XHJcbiAgICAgICAgICAgIHBhcmFtc1szXSA9IHBhcmFtc1szXS5zcGxpdCgnIHRvICcpO1xyXG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBwYXJhbXNbM11bMF0uc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgc3RhcnQgPSBzdGFydC5qb2luKCcnKTtcclxuICAgICAgICAgICAgbGV0IGVuZCA9IHBhcmFtc1szXVsxXS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICBlbmQgPSBlbmQuam9pbignJyk7XHJcbiAgICAgICAgICAgIHVzZXJQb2xpY2llc1twb2xpY3lUaXRsZV0uY3JlYXRlUnVsZShwYXJhbXNbNF0sIHsgYXR0cmlidXRlOiAndGltZScsIG9wZXJhdG9yOiAnYmV0d2VlbicsIHBhcmFtczogW3N0YXJ0LCBlbmRdIH0sIHBhcmFtc1sxXSwgcGFyYW1zWzJdKTtcclxuICAgICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3NhdmVQb2xpY2llcycsIHtzb3VyY2U6ICdVU0VSJ30pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIFdlZWtkYXk6IChwYXJhbXMpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHdlZWtkYXlzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddO1xyXG4gICAgICAgICAgcGFyYW1zWzNdID0gd2Vla2RheXMuaW5kZXhPZihwYXJhbXNbM10pO1xyXG4gICAgICAgICAgbGV0IHBvbGljeVRpdGxlID0gcGFyYW1zWzBdO1xyXG4gICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICAgICAgdXNlclBvbGljaWVzW3BvbGljeVRpdGxlXS5jcmVhdGVSdWxlKHBhcmFtc1s0XSwgeyBhdHRyaWJ1dGU6ICd3ZWVrZGF5Jywgb3BlcmF0b3I6ICdlcXVhbHMnLCBwYXJhbXM6IHBhcmFtc1szXSB9LCBwYXJhbXNbMV0sIHBhcmFtc1syXSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlUG9saWNpZXMnLCB7c291cmNlOiAnVVNFUid9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRWYWxpZGF0aW9uTWV0aG9kcygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIERhdGU6IChzY29wZSwgaW5mbykgPT4geyByZXR1cm4gdGhpcy5pc1ZhbGlkRGF0ZShpbmZvKSAmIHRoaXMuaXNWYWxpZFNjb3BlKHNjb3BlKTsgfSxcclxuICAgICAgJ0dyb3VwIG9mIHVzZXJzJzogKHNjb3BlLCBpbmZvKSA9PiB7IHJldHVybiB0aGlzLmlzVmFsaWRTdHJpbmcoaW5mbykgJiB0aGlzLmlzVmFsaWRTY29wZShzY29wZSk7IH0sXHJcbiAgICAgIERvbWFpbjogKHNjb3BlLCBpbmZvKSA9PiB7IHJldHVybiB0aGlzLmlzVmFsaWREb21haW4oaW5mbykgJiB0aGlzLmlzVmFsaWRTY29wZShzY29wZSk7IH0sXHJcbiAgICAgIFdlZWtkYXk6IChzY29wZSwgaW5mbykgPT4geyByZXR1cm4gdHJ1ZSAmIHRoaXMuaXNWYWxpZFNjb3BlKHNjb3BlKTsgfSxcclxuICAgICAgJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcyc6IChzY29wZSwgaW5mbykgPT4geyByZXR1cm4gdGhpcy5pc1ZhbGlkU3Vic2NyaXB0aW9uVHlwZShpbmZvKSAmIHRoaXMuaXNWYWxpZFNjb3BlKHNjb3BlKTsgfSxcclxuICAgICAgJ1RpbWUgb2YgdGhlIGRheSc6IChzY29wZSwgaW5mbykgPT4geyByZXR1cm4gdGhpcy5pc1ZhbGlkVGltZXNsb3QoaW5mbykgJiB0aGlzLmlzVmFsaWRTY29wZShzY29wZSk7IH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBY3RpdmVQb2xpY3kodGl0bGUpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBfdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnYWN0aXZlVXNlclBvbGljeScsIHt1c2VyUG9saWN5OiB0aXRsZX0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlQWN0aXZlUG9saWN5Jywge30pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZEVtYWlsKGluZm8pIHtcclxuICAgIGxldCBwYXR0ZXJuID0gL1thLXowLTkuXyUrLV0rQFthLXowLTkuLV0rXFwuW2Etel17MiwzfSQvO1xyXG4gICAgcmV0dXJuIHBhdHRlcm4udGVzdChpbmZvKTtcclxuICB9XHJcblxyXG4gIGlzVmFsaWREb21haW4oaW5mbykge1xyXG4gICAgbGV0IHBhdHRlcm4gPSAvW2EtejAtOS4tXStcXC5bYS16XXsyLDN9JC87XHJcbiAgICByZXR1cm4gcGF0dGVybi50ZXN0KGluZm8pO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZFN0cmluZyhpbmZvKSB7XHJcbiAgICBsZXQgcGF0dGVybiA9IC9bYS16MC05Li1dJC87XHJcbiAgICByZXR1cm4gcGF0dGVybi50ZXN0KGluZm8pO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZFN1YnNjcmlwdGlvblR5cGUoaW5mbykge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBpc1ZhbGlkRGF0ZShpbmZvKSB7XHJcbiAgICBsZXQgaW5mb1NwbGl0ID0gaW5mby5zcGxpdCgnLycpO1xyXG4gICAgbGV0IGRheSA9IHBhcnNlSW50KGluZm9TcGxpdFswXSk7XHJcbiAgICBsZXQgbW9udGggPSBwYXJzZUludChpbmZvU3BsaXRbMV0pO1xyXG4gICAgbGV0IHllYXIgPSBwYXJzZUludChpbmZvU3BsaXRbMl0pO1xyXG5cclxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgtMSwgZGF5KTtcclxuICAgIGxldCBpc1ZhbGlkRm9ybWF0ID0gZGF0ZS5nZXRGdWxsWWVhcigpID09PSB5ZWFyICYmIGRhdGUuZ2V0TW9udGgoKSArIDEgPT09IG1vbnRoICYmIGRhdGUuZ2V0RGF0ZSgpID09PSBkYXk7XHJcbiAgICBsZXQgZm9ybWF0dGVkRGF0ZSA9IGRhdGUuZ2V0RGF0ZSgpICsgJy8nICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy8nICsgZGF0ZS5nZXRGdWxsWWVhcigpXHJcbiAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGxldCB0b2RheSA9IG5vdy5nZXREYXRlKCkgKyAnLycgKyAobm93LmdldE1vbnRoKCkgKyAxKSArICcvJyArIG5vdy5nZXRGdWxsWWVhcigpO1xyXG5cclxuICAgIGxldCBpc0Z1dHVyZSA9IGZhbHNlO1xyXG4gICAgaWYgKGRhdGUuZ2V0RnVsbFllYXIoKSA+IG5vdy5nZXRGdWxsWWVhcigpKSB7XHJcbiAgICAgIGlzRnV0dXJlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChkYXRlLmdldEZ1bGxZZWFyKCkgPT0gbm93LmdldEZ1bGxZZWFyKCkpIHtcclxuICAgICAgICBpZiAoKGRhdGUuZ2V0TW9udGgoKSArIDEpID4gKG5vdy5nZXRNb250aCgpICsgMSkpIHtcclxuICAgICAgICAgIGlzRnV0dXJlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKChkYXRlLmdldE1vbnRoKCkgKyAxKSA9PSAobm93LmdldE1vbnRoKCkgKyAxKSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0ZS5nZXREYXRlKCkgPj0gKG5vdy5nZXREYXRlKCkpKSB7XHJcbiAgICAgICAgICAgICAgaXNGdXR1cmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChpc1ZhbGlkRm9ybWF0ICYmIGlzRnV0dXJlKTtcclxuICB9XHJcblxyXG4gIGlzVmFsaWRTY29wZShzY29wZSkge1xyXG4gICAgcmV0dXJuIHNjb3BlICE9PSAnJztcclxuICB9XHJcblxyXG4gIGlzVmFsaWRUaW1lc2xvdChpbmZvKSB7XHJcbiAgICBpZiAoIWluZm8pIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IHNwbGl0SW5mbyA9IGluZm8uc3BsaXQoJyB0byAnKTsgLy8gWzEyOjAwLCAxMzowMF1cclxuICAgIGxldCB0d29UaW1lcyA9IHNwbGl0SW5mby5sZW5ndGggPT09IDI7XHJcbiAgICBpZiAoIXR3b1RpbWVzKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGxldCBzcGxpdFN0YXJ0ID0gc3BsaXRJbmZvWzBdLnNwbGl0KCc6Jyk7IC8vIFsxMiwgMDBdXHJcbiAgICBsZXQgc3BsaXRFbmQgPSBzcGxpdEluZm9bMV0uc3BsaXQoJzonKTsgLy8gWzEzLCAwMF1cclxuICAgIGlmIChzcGxpdFN0YXJ0Lmxlbmd0aCAhPT0gMiB8fCBzcGxpdEVuZC5sZW5ndGggIT09IDIpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IG9rU2l6ZSA9IChzcGxpdFN0YXJ0WzBdLmxlbmd0aCA9PT0gMikgJiYgKHNwbGl0U3RhcnRbMV0ubGVuZ3RoID09PSAyKSAmJiAoc3BsaXRFbmRbMF0ubGVuZ3RoID09PSAyKSAmJiAoc3BsaXRFbmRbMV0ubGVuZ3RoID09PSAyKTtcclxuICAgIGxldCBhcmVJbnRlZ2VycyA9IChzcGxpdFN0YXJ0WzBdID09IHBhcnNlSW50KHNwbGl0U3RhcnRbMF0sIDEwKSkgJiYgKHNwbGl0U3RhcnRbMV0gPT0gcGFyc2VJbnQoc3BsaXRTdGFydFsxXSwgMTApKSAmJiAoc3BsaXRFbmRbMF0gPT0gcGFyc2VJbnQoc3BsaXRFbmRbMF0sIDEwKSkgJiYgKHNwbGl0RW5kWzFdID09IHBhcnNlSW50KHNwbGl0RW5kWzFdLCAxMCkpO1xyXG4gICAgcmV0dXJuIHR3b1RpbWVzICYmIG9rU2l6ZSAmJiBhcmVJbnRlZ2VycztcclxuICB9XHJcblxyXG4gIGdldEZvcm1hdHRlZFBvbGljaWVzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigocG9saWNpZXNQRSkgPT4ge1xyXG4gICAgICAgIGxldCBwb2xpY2llc0dVSSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpIGluIHBvbGljaWVzUEUpIHtcclxuICAgICAgICAgIGxldCBwb2xpY3kgPSB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBwb2xpY2llc1BFW2ldLmtleSxcclxuICAgICAgICAgICAgcnVsZXNUaXRsZXM6IFtdLFxyXG4gICAgICAgICAgICBpZHM6IFtdXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHBvbGljaWVzUEVbaV0ucnVsZXMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHBvbGljaWVzUEVbaV0ucnVsZXMgPSBwb2xpY2llc1BFW2ldLnNvcnRSdWxlcygpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqIGluIHBvbGljaWVzUEVbaV0ucnVsZXMpIHtcclxuICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBfdGhpcy5fZ2V0VGl0bGUocG9saWNpZXNQRVtpXS5ydWxlc1tqXSk7XHJcbiAgICAgICAgICAgICAgcG9saWN5LnJ1bGVzVGl0bGVzLnB1c2godGl0bGUpO1xyXG4gICAgICAgICAgICAgIHBvbGljeS5pZHMucHVzaChwb2xpY3kudGl0bGUgKyAnOicgKyBwb2xpY2llc1BFW2ldLnJ1bGVzW2pdLnByaW9yaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHBvbGljaWVzR1VJLnB1c2gocG9saWN5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc29sdmUocG9saWNpZXNHVUkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UnVsZU9mUG9saWN5KHRpdGxlLCBwcmlvcml0eSkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigocG9saWNpZXMpID0+IHtcclxuICAgICAgICBsZXQgcG9saWN5ID0gcG9saWNpZXNbdGl0bGVdO1xyXG4gICAgICAgIHJlc29sdmUocG9saWN5LmdldFJ1bGVCeVByaW9yaXR5KHByaW9yaXR5KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGl0bGUocnVsZSkge1xyXG4gICAgbGV0IGNvbmRpdGlvbiA9IHJ1bGUuY29uZGl0aW9uO1xyXG4gICAgbGV0IGF1dGhvcmlzZSA9IChydWxlLmRlY2lzaW9uKSA/ICdhbGxvd2VkJyA6ICdibG9ja2VkJztcclxuICAgIGxldCB0YXJnZXQgPSBydWxlLnRhcmdldCA9PT0gJ2dsb2JhbCcgPyAnQWxsIGlkZW50aXRpZXMgYW5kIGh5cGVydGllcycgOiBydWxlLnRhcmdldDtcclxuICAgIGxldCBhdHRyaWJ1dGUgPSBjb25kaXRpb24uYXR0cmlidXRlO1xyXG4gICAgc3dpdGNoKGF0dHJpYnV0ZSkge1xyXG4gICAgICBjYXNlICdkYXRlJzpcclxuICAgICAgICByZXR1cm4gJ0RhdGUgJyArIGNvbmRpdGlvbi5wYXJhbXMgKyAnIGlzICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICBjYXNlICdkb21haW4nOlxyXG4gICAgICAgIHJldHVybiAnRG9tYWluIFxcXCInICsgY29uZGl0aW9uLnBhcmFtcyArICdcXFwiIGlzICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICBjYXNlICdzb3VyY2UnOlxyXG4gICAgICAgIGlmIChjb25kaXRpb24ub3BlcmF0b3IgPT09ICdpbicpIHtcclxuICAgICAgICAgIHJldHVybiAnR3JvdXAgXFxcIicgKyBjb25kaXRpb24ucGFyYW1zICsgJ1xcXCIgaXMgJyArIGF1dGhvcmlzZSArICcgKCcgKyB0YXJnZXQgKyAnKSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChjb25kaXRpb24ub3BlcmF0b3IgPT09ICdlcXVhbHMnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnVXNlciAnICsgY29uZGl0aW9uLnBhcmFtcyArICcgaXMgJyArIGF1dGhvcmlzZSArICcgKCcgKyB0YXJnZXQgKyAnKSc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdzdWJzY3JpcHRpb24nOlxyXG4gICAgICAgIGlmIChjb25kaXRpb24ucGFyYW1zID09PSAnKicpIHtcclxuICAgICAgICAgIHJldHVybiAnU3Vic2NyaXB0aW9ucyBmcm9tIGFsbCBoeXBlcnRpZXMgYXJlICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoY29uZGl0aW9uLnBhcmFtcyA9PT0gJ3ByZWF1dGhvcmlzZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnU3Vic2NyaXB0aW9ucyBmcm9tIHByZXZpb3VzbHkgYXV0aG9yaXNlZCBoeXBlcnRpZXMgYXJlIGFsbG93ZWQgKCcgKyB0YXJnZXQgKyAnKSc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICd0aW1lJzpcclxuICAgICAgICBsZXQgc3RhcnQgPSBjb25kaXRpb24ucGFyYW1zWzBdWzBdICsgY29uZGl0aW9uLnBhcmFtc1swXVsxXSArICc6JyArIGNvbmRpdGlvbi5wYXJhbXNbMF1bMl0gKyBjb25kaXRpb24ucGFyYW1zWzBdWzNdO1xyXG4gICAgICAgIGxldCBlbmQgPSBjb25kaXRpb24ucGFyYW1zWzFdWzBdICsgY29uZGl0aW9uLnBhcmFtc1sxXVsxXSArICc6JyArIGNvbmRpdGlvbi5wYXJhbXNbMV1bMl0gKyBjb25kaXRpb24ucGFyYW1zWzFdWzNdO1xyXG4gICAgICAgIHJldHVybiAnVGltZXNsb3QgZnJvbSAnICsgc3RhcnQgKyAnIHRvICcgKyBlbmQgKyAnIGlzICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICBjYXNlICd3ZWVrZGF5JzpcclxuICAgICAgICBsZXQgd2Vla2RheXMgPSBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J107XHJcbiAgICAgICAgbGV0IHdlZWtkYXlJRCA9IGNvbmRpdGlvbi5wYXJhbXM7XHJcbiAgICAgICAgcmV0dXJuICdXZWVrZGF5IFxcXCInICsgd2Vla2RheXNbd2Vla2RheUlEXSArICdcXFwiIGlzICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiAnUnVsZSAnICsgcnVsZS5wcmlvcml0eSArICcgaXMgJyArIGF1dGhvcmlzZSArICcgKCcgKyB0YXJnZXQgKyAnKSc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRWYXJpYWJsZXMoKSB7XHJcbiAgICBsZXQgdmFyaWFibGVzVGl0bGVzID0gW107XHJcbiAgICBmb3IgKGxldCBpIGluIHRoaXMudmFyaWFibGVzKSB7XHJcbiAgICAgIHZhcmlhYmxlc1RpdGxlcy5wdXNoKGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhcmlhYmxlc1RpdGxlcztcclxuICB9XHJcblxyXG4gIGdldFZhcmlhYmxlSW5mbyh2YXJpYWJsZSkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFyaWFibGVzW3ZhcmlhYmxlXTtcclxuICB9XHJcblxyXG4gIGdldE15RW1haWxzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ2dldE15RW1haWxzJywge30pO1xyXG4gIH1cclxuXHJcbiAgZ2V0TXlIeXBlcnRpZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnZ2V0TXlIeXBlcnRpZXMnLCB7fSk7XHJcbiAgfVxyXG5cclxuICAvL1RPRE8gSWYgdGhlcmUgaXMgYSBwcm9ibGVtIHdpdGggdGhlIGlucHV0LCBzaG93IGl0IHRvIHRoZSB1c2VyXHJcbiAgc2V0SW5mbyh2YXJpYWJsZSwgcG9saWN5VGl0bGUsIGluZm8sIGF1dGhvcmlzZSwgc2NvcGUsIHRhcmdldCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmIChfdGhpcy52YWxpZGF0aW9uW3ZhcmlhYmxlXShzY29wZSwgaW5mbykpIHtcclxuICAgICAgICBfdGhpcy5hZGRpdGlvblt2YXJpYWJsZV0oW3BvbGljeVRpdGxlLCBzY29wZSwgdGFyZ2V0LCBpbmZvLCBhdXRob3Jpc2VdKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZWplY3QoJ0ludmFsaWQgY29uZmlndXJhdGlvbicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUluZm8odmFyaWFibGUsIHNjb3BlLCB0YXJnZXQsIGluZm8pIHtcclxuICAgIGxldCBwYXJhbXMgPSBbc2NvcGUsIHRhcmdldCwgaW5mb107XHJcbiAgICBpZiAodmFyaWFibGUgPT09ICdtZW1iZXInKSB7XHJcbiAgICAgIGxldCBjb25kaXRpb25TcGxpdCA9IGluZm8uc3BsaXQoJyAnKTtcclxuICAgICAgbGV0IGdyb3VwTmFtZSA9IGNvbmRpdGlvblNwbGl0WzJdO1xyXG4gICAgICBwYXJhbXMgPSBbc2NvcGUsIGdyb3VwTmFtZSwgaW5mb107XHJcbiAgICB9XHJcbiAgICB0aGlzLmRlbGV0aW9uW3ZhcmlhYmxlXShwYXJhbXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0R3JvdXBzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdncm91cHMnLCB7fSkudGhlbigoZ3JvdXBzKSA9PiB7XHJcbiAgICAgICAgbGV0IGdyb3Vwc0dVSSA9IHtcclxuICAgICAgICAgIGdyb3Vwc05hbWVzOiBbXSxcclxuICAgICAgICAgIG1lbWJlcnM6IFtdLFxyXG4gICAgICAgICAgaWRzOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgaW4gZ3JvdXBzKSB7XHJcbiAgICAgICAgICBncm91cHNHVUkuZ3JvdXBzTmFtZXMucHVzaChpKTtcclxuICAgICAgICAgIGdyb3Vwc0dVSS5tZW1iZXJzLnB1c2goZ3JvdXBzW2ldKTtcclxuICAgICAgICAgIGxldCBpZHMgPSBbXTtcclxuICAgICAgICAgIGZvciAobGV0IGogaW4gZ3JvdXBzW2ldKSB7XHJcbiAgICAgICAgICAgIGlkcy5wdXNoKGkgKyAnOjonICsgZ3JvdXBzW2ldW2pdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGdyb3Vwc0dVSS5pZHMucHVzaChpZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnVElBR08gZ3JvdXBzJywgZ3JvdXBzR1VJKVxyXG4gICAgICAgIHJlc29sdmUoZ3JvdXBzR1VJKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEdyb3Vwc05hbWVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ2dldEdyb3Vwc05hbWVzJywge30pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRnJvbUdyb3VwKGdyb3VwTmFtZSwgdXNlcikge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3JlbW92ZUZyb21Hcm91cCcsIHtncm91cE5hbWU6IGdyb3VwTmFtZSwgdXNlckVtYWlsOiB1c2VyfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQb2xpY3kocG9saWN5VGl0bGUsIHJ1bGUsIG5ld0RlY2lzaW9uLCBuZXdTdWJzY3JpcHRpb25UeXBlKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICB1c2VyUG9saWNpZXNbcG9saWN5VGl0bGVdLmRlbGV0ZVJ1bGUocnVsZSk7XHJcbiAgICAgICAgaWYgKCFuZXdTdWJzY3JpcHRpb25UeXBlKSB7XHJcbiAgICAgICAgICB1c2VyUG9saWNpZXNbcG9saWN5VGl0bGVdLmNyZWF0ZVJ1bGUobmV3RGVjaXNpb24sIHJ1bGUuY29uZGl0aW9uLCBydWxlLnNjb3BlLCBydWxlLnRhcmdldCwgcnVsZS5wcmlvcml0eSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxldCBvcGVyYXRvciA9IChuZXdTdWJzY3JpcHRpb25UeXBlID09PSAnKicpID8gJ2VxdWFscycgOiAnaW4nO1xyXG4gICAgICAgICAgdXNlclBvbGljaWVzW3BvbGljeVRpdGxlXS5jcmVhdGVSdWxlKG5ld0RlY2lzaW9uLCBbeyBhdHRyaWJ1dGU6ICdzdWJzY3JpcHRpb24nLCBvcGVhdG9yOiBvcGVyYXRvciwgcGFyYW1zOiBuZXdTdWJzY3JpcHRpb25UeXBlIH1dLCBydWxlLnNjb3BlLCBydWxlLnRhcmdldCwgcnVsZS5wcmlvcml0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnc2F2ZUFjdGl2ZVBvbGljeScsIHt9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb2xpY2llc01hbmFnZXI7XHJcbiJdfQ=="}
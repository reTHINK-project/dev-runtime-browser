{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/dexie/dist/dexie.js","node_modules/runtime-core/dist/minibus.js","node_modules/runtime-core/dist/sandbox.js","node_modules/service-framework/dist/PersistenceManager.js","node_modules/service-framework/dist/RuntimeCatalogue.js","node_modules/service-framework/dist/StorageManager.js","node_modules/urijs/src/IPv6.js","node_modules/urijs/src/SecondLevelDomains.js","node_modules/urijs/src/URI.js","node_modules/urijs/src/punycode.js","src/Request.js","src/RuntimeCapabilities.js","src/RuntimeFactory.js","src/SandboxApp.js","src/Sandboxes.js","src/admin/IdentitiesGUI.js","src/admin/PoliciesGUI.js","src/admin/PoliciesManager.js","src/core.js"],"names":[],"mappings":"AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC5/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9xEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrhBA;;;;;;;;;;;;;;;;;;;;;;AAsBA,IAAM,UAAU,EAAC,KAAK,KAAN,EAAa,MAAM;AACnC;;;;;;;AAOA;;;AARgB,CAAhB;IAWM,O;AAEL,oBAAc;AAAA;;AACb,MAAI,QAAQ,IAAZ;;AAEA,SAAO,IAAP,CAAY,OAAZ,EAAqB,OAArB,CAA6B,UAAS,MAAT,EAAiB;AAC7C,SAAM,QAAQ,MAAR,CAAN,IAAyB,UAAS,GAAT,EAAc,OAAd,EAAuB;AAC/C,WAAO,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAA0B;AAC5C,WAAM,iBAAN,CAAwB,QAAQ,MAAR,EAAgB,WAAhB,EAAxB,EAAuD,GAAvD,EAA4D,OAA5D,EAAqE,IAArE,CAA0E,UAAS,MAAT,EAAiB;AAC1F,cAAQ,MAAR;AACA,MAFD,EAEG,KAFH,CAES,UAAS,MAAT,EAAiB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","file":"core.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function (global, factory) {\n   typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n   typeof define === 'function' && define.amd ? define(factory) :\n   (global.Dexie = factory());\n}(this, (function () { 'use strict';\n\n/*\r\n* Dexie.js - a minimalistic wrapper for IndexedDB\r\n* ===============================================\r\n*\r\n* By David Fahlander, david.fahlander@gmail.com\r\n*\r\n* Version 1.5.1, Tue Nov 01 2016\r\n* www.dexie.com\r\n* Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\r\n*/\nvar keys = Object.keys;\nvar isArray = Array.isArray;\nvar _global = typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : global;\n\nfunction extend(obj, extension) {\n    if (typeof extension !== 'object') return obj;\n    keys(extension).forEach(function (key) {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\n\nvar getProto = Object.getPrototypeOf;\nvar _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n    return _hasOwn.call(obj, prop);\n}\n\nfunction props(proto, extension) {\n    if (typeof extension === 'function') extension = extension(getProto(proto));\n    keys(extension).forEach(function (key) {\n        setProp(proto, key, extension[key]);\n    });\n}\n\nfunction setProp(obj, prop, functionOrGetSet, options) {\n    Object.defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ? { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } : { value: functionOrGetSet, configurable: true, writable: true }, options));\n}\n\nfunction derive(Child) {\n    return {\n        from: function (Parent) {\n            Child.prototype = Object.create(Parent.prototype);\n            setProp(Child.prototype, \"constructor\", Child);\n            return {\n                extend: props.bind(null, Child.prototype)\n            };\n        }\n    };\n}\n\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\nfunction getPropertyDescriptor(obj, prop) {\n    var pd = getOwnPropertyDescriptor(obj, prop),\n        proto;\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\n\nvar _slice = [].slice;\nfunction slice(args, start, end) {\n    return _slice.call(args, start, end);\n}\n\nfunction override(origFunc, overridedFactory) {\n    return overridedFactory(origFunc);\n}\n\nfunction doFakeAutoComplete(fn) {\n    var to = setTimeout(fn, 1000);\n    clearTimeout(to);\n}\n\nfunction assert(b) {\n    if (!b) throw new Error(\"Assertion Failed\");\n}\n\nfunction asap(fn) {\n    if (_global.setImmediate) setImmediate(fn);else setTimeout(fn, 0);\n}\n\n\n\n/** Generate an object (hash map) based on given array.\r\n * @param extractor Function taking an array item and its index and returning an array of 2 items ([key, value]) to\r\n *        instert on the resulting object for each item in the array. If this function returns a falsy value, the\r\n *        current item wont affect the resulting object.\r\n */\nfunction arrayToObject(array, extractor) {\n    return array.reduce(function (result, item, i) {\n        var nameAndValue = extractor(item, i);\n        if (nameAndValue) result[nameAndValue[0]] = nameAndValue[1];\n        return result;\n    }, {});\n}\n\nfunction trycatcher(fn, reject) {\n    return function () {\n        try {\n            fn.apply(this, arguments);\n        } catch (e) {\n            reject(e);\n        }\n    };\n}\n\nfunction tryCatch(fn, onerror, args) {\n    try {\n        fn.apply(null, args);\n    } catch (ex) {\n        onerror && onerror(ex);\n    }\n}\n\nfunction getByKeyPath(obj, keyPath) {\n    // http://www.w3.org/TR/IndexedDB/#steps-for-extracting-a-key-from-a-value-using-a-key-path\n    if (hasOwn(obj, keyPath)) return obj[keyPath]; // This line is moved from last to first for optimization purpose.\n    if (!keyPath) return obj;\n    if (typeof keyPath !== 'string') {\n        var rv = [];\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            var val = getByKeyPath(obj, keyPath[i]);\n            rv.push(val);\n        }\n        return rv;\n    }\n    var period = keyPath.indexOf('.');\n    if (period !== -1) {\n        var innerObj = obj[keyPath.substr(0, period)];\n        return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n    }\n    return undefined;\n}\n\nfunction setByKeyPath(obj, keyPath, value) {\n    if (!obj || keyPath === undefined) return;\n    if ('isFrozen' in Object && Object.isFrozen(obj)) return;\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\n        assert(typeof value !== 'string' && 'length' in value);\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            setByKeyPath(obj, keyPath[i], value[i]);\n        }\n    } else {\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var currentKeyPath = keyPath.substr(0, period);\n            var remainingKeyPath = keyPath.substr(period + 1);\n            if (remainingKeyPath === \"\") {\n                if (value === undefined) delete obj[currentKeyPath];else obj[currentKeyPath] = value;\n            } else {\n                var innerObj = obj[currentKeyPath];\n                if (!innerObj) innerObj = obj[currentKeyPath] = {};\n                setByKeyPath(innerObj, remainingKeyPath, value);\n            }\n        } else {\n            if (value === undefined) delete obj[keyPath];else obj[keyPath] = value;\n        }\n    }\n}\n\nfunction delByKeyPath(obj, keyPath) {\n    if (typeof keyPath === 'string') setByKeyPath(obj, keyPath, undefined);else if ('length' in keyPath) [].map.call(keyPath, function (kp) {\n        setByKeyPath(obj, kp, undefined);\n    });\n}\n\nfunction shallowClone(obj) {\n    var rv = {};\n    for (var m in obj) {\n        if (hasOwn(obj, m)) rv[m] = obj[m];\n    }\n    return rv;\n}\n\nfunction deepClone(any) {\n    if (!any || typeof any !== 'object') return any;\n    var rv;\n    if (isArray(any)) {\n        rv = [];\n        for (var i = 0, l = any.length; i < l; ++i) {\n            rv.push(deepClone(any[i]));\n        }\n    } else if (any instanceof Date) {\n        rv = new Date();\n        rv.setTime(any.getTime());\n    } else {\n        rv = any.constructor ? Object.create(any.constructor.prototype) : {};\n        for (var prop in any) {\n            if (hasOwn(any, prop)) {\n                rv[prop] = deepClone(any[prop]);\n            }\n        }\n    }\n    return rv;\n}\n\nfunction getObjectDiff(a, b, rv, prfx) {\n    // Compares objects a and b and produces a diff object.\n    rv = rv || {};\n    prfx = prfx || '';\n    keys(a).forEach(function (prop) {\n        if (!hasOwn(b, prop)) rv[prfx + prop] = undefined; // Property removed\n        else {\n                var ap = a[prop],\n                    bp = b[prop];\n                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp && ap.constructor === bp.constructor)\n                    // Same type of object but its properties may have changed\n                    getObjectDiff(ap, bp, rv, prfx + prop + \".\");else if (ap !== bp) rv[prfx + prop] = b[prop]; // Primitive value changed\n            }\n    });\n    keys(b).forEach(function (prop) {\n        if (!hasOwn(a, prop)) {\n            rv[prfx + prop] = b[prop]; // Property added\n        }\n    });\n    return rv;\n}\n\n// If first argument is iterable or array-like, return it as an array\nvar iteratorSymbol = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar getIteratorOf = iteratorSymbol ? function (x) {\n    var i;\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () {\n    return null;\n};\n\nvar NO_CHAR_ARRAY = {};\n// Takes one or several arguments and returns an array based on the following criteras:\n// * If several arguments provided, return arguments converted to an array in a way that\n//   still allows javascript engine to optimize the code.\n// * If single argument is an array, return a clone of it.\n// * If this-pointer equals NO_CHAR_ARRAY, don't accept strings as valid iterables as a special\n//   case to the two bullets below.\n// * If single argument is an iterable, convert it to an array and return the resulting array.\n// * If single argument is array-like (has length of type number), convert it to an array.\nfunction getArrayOf(arrayLike) {\n    var i, a, x, it;\n    if (arguments.length === 1) {\n        if (isArray(arrayLike)) return arrayLike.slice();\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string') return [arrayLike];\n        if (it = getIteratorOf(arrayLike)) {\n            a = [];\n            while (x = it.next(), !x.done) {\n                a.push(x.value);\n            }return a;\n        }\n        if (arrayLike == null) return [arrayLike];\n        i = arrayLike.length;\n        if (typeof i === 'number') {\n            a = new Array(i);\n            while (i--) {\n                a[i] = arrayLike[i];\n            }return a;\n        }\n        return [arrayLike];\n    }\n    i = arguments.length;\n    a = new Array(i);\n    while (i--) {\n        a[i] = arguments[i];\n    }return a;\n}\n\nvar concat = [].concat;\nfunction flatten(a) {\n    return concat.apply([], a);\n}\n\nfunction nop() {}\nfunction mirror(val) {\n    return val;\n}\nfunction pureFunctionChain(f1, f2) {\n    // Enables chained events that takes ONE argument and returns it to the next function in chain.\n    // This pattern is used in the hook(\"reading\") event.\n    if (f1 == null || f1 === mirror) return f2;\n    return function (val) {\n        return f2(f1(val));\n    };\n}\n\nfunction callBoth(on1, on2) {\n    return function () {\n        on1.apply(this, arguments);\n        on2.apply(this, arguments);\n    };\n}\n\nfunction hookCreatingChain(f1, f2) {\n    // Enables chained events that takes several arguments and may modify first argument by making a modification and then returning the same instance.\n    // This pattern is used in the hook(\"creating\") event.\n    if (f1 === nop) return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res !== undefined) arguments[0] = res;\n        var onsuccess = this.onsuccess,\n            // In case event listener has set this.onsuccess\n        onerror = this.onerror; // In case event listener has set this.onerror\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess) this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror) this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res2 !== undefined ? res2 : res;\n    };\n}\n\nfunction hookDeletingChain(f1, f2) {\n    if (f1 === nop) return f2;\n    return function () {\n        f1.apply(this, arguments);\n        var onsuccess = this.onsuccess,\n            // In case event listener has set this.onsuccess\n        onerror = this.onerror; // In case event listener has set this.onerror\n        this.onsuccess = this.onerror = null;\n        f2.apply(this, arguments);\n        if (onsuccess) this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror) this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    };\n}\n\nfunction hookUpdatingChain(f1, f2) {\n    if (f1 === nop) return f2;\n    return function (modifications) {\n        var res = f1.apply(this, arguments);\n        extend(modifications, res); // If f1 returns new modifications, extend caller's modifications with the result before calling next in chain.\n        var onsuccess = this.onsuccess,\n            // In case event listener has set this.onsuccess\n        onerror = this.onerror; // In case event listener has set this.onerror\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess) this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror) this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res === undefined ? res2 === undefined ? undefined : res2 : extend(res, res2);\n    };\n}\n\nfunction reverseStoppableEventChain(f1, f2) {\n    if (f1 === nop) return f2;\n    return function () {\n        if (f2.apply(this, arguments) === false) return false;\n        return f1.apply(this, arguments);\n    };\n}\n\n\n\nfunction promisableChain(f1, f2) {\n    if (f1 === nop) return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this,\n                i = arguments.length,\n                args = new Array(i);\n            while (i--) {\n                args[i] = arguments[i];\n            }return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\n\n// By default, debug will be true only if platform is a web platform and its page is served from localhost.\n// When debug = true, error's stacks will contain asyncronic long stacks.\nvar debug = typeof location !== 'undefined' &&\n// By default, use debug mode if served from localhost.\n/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n\nfunction setDebug(value, filter) {\n    debug = value;\n    libraryFilter = filter;\n}\n\nvar libraryFilter = function () {\n    return true;\n};\n\nvar NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\n\nfunction getErrorWithStack() {\n    \"use strict\";\n\n    if (NEEDS_THROW_FOR_STACK) try {\n        // Doing something naughty in strict mode here to trigger a specific error\n        // that can be explicitely ignored in debugger's exception settings.\n        // If we'd just throw new Error() here, IE's debugger's exception settings\n        // will just consider it as \"exception thrown by javascript code\" which is\n        // something you wouldn't want it to ignore.\n        getErrorWithStack.arguments;\n        throw new Error(); // Fallback if above line don't throw.\n    } catch (e) {\n        return e;\n    }\n    return new Error();\n}\n\nfunction prettyStack(exception, numIgnoredFrames) {\n    var stack = exception.stack;\n    if (!stack) return \"\";\n    numIgnoredFrames = numIgnoredFrames || 0;\n    if (stack.indexOf(exception.name) === 0) numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n    return stack.split('\\n').slice(numIgnoredFrames).filter(libraryFilter).map(function (frame) {\n        return \"\\n\" + frame;\n    }).join('');\n}\n\nfunction deprecated(what, fn) {\n    return function () {\n        console.warn(what + \" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. \" + prettyStack(getErrorWithStack(), 1));\n        return fn.apply(this, arguments);\n    };\n}\n\nvar dexieErrorNames = ['Modify', 'Bulk', 'OpenFailed', 'VersionChange', 'Schema', 'Upgrade', 'InvalidTable', 'MissingAPI', 'NoSuchDatabase', 'InvalidArgument', 'SubTransaction', 'Unsupported', 'Internal', 'DatabaseClosed', 'IncompatiblePromise'];\n\nvar idbDomErrorNames = ['Unknown', 'Constraint', 'Data', 'TransactionInactive', 'ReadOnly', 'Version', 'NotFound', 'InvalidState', 'InvalidAccess', 'Abort', 'Timeout', 'QuotaExceeded', 'Syntax', 'DataClone'];\n\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\n\nvar defaultTexts = {\n    VersionChanged: \"Database version changed by other database connection\",\n    DatabaseClosed: \"Database has been closed\",\n    Abort: \"Transaction aborted\",\n    TransactionInactive: \"Transaction has already completed or failed\"\n};\n\n//\n// DexieError - base class of all out exceptions.\n//\nfunction DexieError(name, msg) {\n    // Reason we don't use ES6 classes is because:\n    // 1. It bloats transpiled code and increases size of minified code.\n    // 2. It doesn't give us much in this case.\n    // 3. It would require sub classes to call super(), which\n    //    is not needed when deriving from Error.\n    this._e = getErrorWithStack();\n    this.name = name;\n    this.message = msg;\n}\n\nderive(DexieError).from(Error).extend({\n    stack: {\n        get: function () {\n            return this._stack || (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n        }\n    },\n    toString: function () {\n        return this.name + \": \" + this.message;\n    }\n});\n\nfunction getMultiErrorMessage(msg, failures) {\n    return msg + \". Errors: \" + failures.map(function (f) {\n        return f.toString();\n    }).filter(function (v, i, s) {\n        return s.indexOf(v) === i;\n    }) // Only unique error strings\n    .join('\\n');\n}\n\n//\n// ModifyError - thrown in WriteableCollection.modify()\n// Specific constructor because it contains members failures and failedKeys.\n//\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n    this._e = getErrorWithStack();\n    this.failures = failures;\n    this.failedKeys = failedKeys;\n    this.successCount = successCount;\n}\nderive(ModifyError).from(DexieError);\n\nfunction BulkError(msg, failures) {\n    this._e = getErrorWithStack();\n    this.name = \"BulkError\";\n    this.failures = failures;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\n\n//\n//\n// Dynamically generate error names and exception classes based\n// on the names in errorList.\n//\n//\n\n// Map of {ErrorName -> ErrorName + \"Error\"}\nvar errnames = errorList.reduce(function (obj, name) {\n    return obj[name] = name + \"Error\", obj;\n}, {});\n\n// Need an alias for DexieError because we're gonna create subclasses with the same name.\nvar BaseException = DexieError;\n// Map of {ErrorName -> exception constructor}\nvar exceptions = errorList.reduce(function (obj, name) {\n    // Let the name be \"DexieError\" because this name may\n    // be shown in call stack and when debugging. DexieError is\n    // the most true name because it derives from DexieError,\n    // and we cannot change Function.name programatically without\n    // dynamically create a Function object, which would be considered\n    // 'eval-evil'.\n    var fullName = name + \"Error\";\n    function DexieError(msgOrInner, inner) {\n        this._e = getErrorWithStack();\n        this.name = fullName;\n        if (!msgOrInner) {\n            this.message = defaultTexts[name] || fullName;\n            this.inner = null;\n        } else if (typeof msgOrInner === 'string') {\n            this.message = msgOrInner;\n            this.inner = inner || null;\n        } else if (typeof msgOrInner === 'object') {\n            this.message = msgOrInner.name + ' ' + msgOrInner.message;\n            this.inner = msgOrInner;\n        }\n    }\n    derive(DexieError).from(BaseException);\n    obj[name] = DexieError;\n    return obj;\n}, {});\n\n// Use ECMASCRIPT standard exceptions where applicable:\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\n\nvar exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n    obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\n\nfunction mapError(domError, message) {\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name]) return domError;\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\n    if (\"stack\" in domError) {\n        // Derive stack from inner exception if it has a stack\n        setProp(rv, \"stack\", { get: function () {\n                return this.inner.stack;\n            } });\n    }\n    return rv;\n}\n\nvar fullNameExceptions = errorList.reduce(function (obj, name) {\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1) obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\n\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction Events(ctx) {\n    var evs = {};\n    var rv = function (eventName, subscriber) {\n        if (subscriber) {\n            // Subscribe. If additional arguments than just the subscriber was provided, forward them as well.\n            var i = arguments.length,\n                args = new Array(i - 1);\n            while (--i) {\n                args[i - 1] = arguments[i];\n            }evs[eventName].subscribe.apply(null, args);\n            return ctx;\n        } else if (typeof eventName === 'string') {\n            // Return interface allowing to fire or unsubscribe from event\n            return evs[eventName];\n        }\n    };\n    rv.addEventType = add;\n\n    for (var i = 1, l = arguments.length; i < l; ++i) {\n        add(arguments[i]);\n    }\n\n    return rv;\n\n    function add(eventName, chainFunction, defaultFunction) {\n        if (typeof eventName === 'object') return addConfiguredEvents(eventName);\n        if (!chainFunction) chainFunction = reverseStoppableEventChain;\n        if (!defaultFunction) defaultFunction = nop;\n\n        var context = {\n            subscribers: [],\n            fire: defaultFunction,\n            subscribe: function (cb) {\n                if (context.subscribers.indexOf(cb) === -1) {\n                    context.subscribers.push(cb);\n                    context.fire = chainFunction(context.fire, cb);\n                }\n            },\n            unsubscribe: function (cb) {\n                context.subscribers = context.subscribers.filter(function (fn) {\n                    return fn !== cb;\n                });\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n            }\n        };\n        evs[eventName] = rv[eventName] = context;\n        return context;\n    }\n\n    function addConfiguredEvents(cfg) {\n        // events(this, {reading: [functionChain, nop]});\n        keys(cfg).forEach(function (eventName) {\n            var args = cfg[eventName];\n            if (isArray(args)) {\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\n            } else if (args === 'asap') {\n                // Rather than approaching event subscription using a functional approach, we here do it in a for-loop where subscriber is executed in its own stack\n                // enabling that any exception that occur wont disturb the initiator and also not nescessary be catched and forgotten.\n                var context = add(eventName, mirror, function fire() {\n                    // Optimazation-safe cloning of arguments into args.\n                    var i = arguments.length,\n                        args = new Array(i);\n                    while (i--) {\n                        args[i] = arguments[i];\n                    } // All each subscriber:\n                    context.subscribers.forEach(function (fn) {\n                        asap(function fireEvent() {\n                            fn.apply(null, args);\n                        });\n                    });\n                });\n            } else throw new exceptions.InvalidArgument(\"Invalid event config\");\n        });\n    }\n}\n\n//\n// Promise Class for Dexie library\n//\n// I started out writing this Promise class by copying promise-light (https://github.com/taylorhakes/promise-light) by\n// https://github.com/taylorhakes - an A+ and ECMASCRIPT 6 compliant Promise implementation.\n//\n// Modifications needed to be done to support indexedDB because it wont accept setTimeout()\n// (See discussion: https://github.com/promises-aplus/promises-spec/issues/45) .\n// This topic was also discussed in the following thread: https://github.com/promises-aplus/promises-spec/issues/45\n//\n// This implementation will not use setTimeout or setImmediate when it's not needed. The behavior is 100% Promise/A+ compliant since\n// the caller of new Promise() can be certain that the promise wont be triggered the lines after constructing the promise.\n//\n// In previous versions this was fixed by not calling setTimeout when knowing that the resolve() or reject() came from another\n// tick. In Dexie v1.4.0, I've rewritten the Promise class entirely. Just some fragments of promise-light is left. I use\n// another strategy now that simplifies everything a lot: to always execute callbacks in a new tick, but have an own microTick\n// engine that is used instead of setImmediate() or setTimeout().\n// Promise class has also been optimized a lot with inspiration from bluebird - to avoid closures as much as possible.\n// Also with inspiration from bluebird, asyncronic stacks in debug mode.\n//\n// Specific non-standard features of this Promise class:\n// * Async static context support (Promise.PSD)\n// * Promise.follow() method built upon PSD, that allows user to track all promises created from current stack frame\n//   and below + all promises that those promises creates or awaits.\n// * Detect any unhandled promise in a PSD-scope (PSD.onunhandled). \n//\n// David Fahlander, https://github.com/dfahlander\n//\n\n// Just a pointer that only this module knows about.\n// Used in Promise constructor to emulate a private constructor.\nvar INTERNAL = {};\n\n// Async stacks (long stacks) must not grow infinitely.\nvar LONG_STACKS_CLIP_LIMIT = 100;\nvar MAX_LONG_STACKS = 20;\nvar stack_being_generated = false;\n\n/* The default \"nextTick\" function used only for the very first promise in a promise chain.\r\n   As soon as then promise is resolved or rejected, all next tasks will be executed in micro ticks\r\n   emulated in this module. For indexedDB compatibility, this means that every method needs to \r\n   execute at least one promise before doing an indexedDB operation. Dexie will always call \r\n   db.ready().then() for every operation to make sure the indexedDB event is started in an\r\n   emulated micro tick.\r\n*/\nvar schedulePhysicalTick = _global.setImmediate ?\n// setImmediate supported. Those modern platforms also supports Function.bind().\nsetImmediate.bind(null, physicalTick) : _global.MutationObserver ?\n// MutationObserver supported\nfunction () {\n    var hiddenDiv = document.createElement(\"div\");\n    new MutationObserver(function () {\n        physicalTick();\n        hiddenDiv = null;\n    }).observe(hiddenDiv, { attributes: true });\n    hiddenDiv.setAttribute('i', '1');\n} :\n// No support for setImmediate or MutationObserver. No worry, setTimeout is only called\n// once time. Every tick that follows will be our emulated micro tick.\n// Could have uses setTimeout.bind(null, 0, physicalTick) if it wasnt for that FF13 and below has a bug \nfunction () {\n    setTimeout(physicalTick, 0);\n};\n\n// Confifurable through Promise.scheduler.\n// Don't export because it would be unsafe to let unknown\n// code call it unless they do try..catch within their callback.\n// This function can be retrieved through getter of Promise.scheduler though,\n// but users must not do Promise.scheduler (myFuncThatThrows exception)!\nvar asap$1 = function (callback, args) {\n    microtickQueue.push([callback, args]);\n    if (needsNewPhysicalTick) {\n        schedulePhysicalTick();\n        needsNewPhysicalTick = false;\n    }\n};\n\nvar isOutsideMicroTick = true;\nvar needsNewPhysicalTick = true;\nvar unhandledErrors = [];\nvar rejectingErrors = [];\nvar currentFulfiller = null;\nvar rejectionMapper = mirror; // Remove in next major when removing error mapping of DOMErrors and DOMExceptions\n\nvar globalPSD = {\n    global: true,\n    ref: 0,\n    unhandleds: [],\n    onunhandled: globalError,\n    //env: null, // Will be set whenever leaving a scope using wrappers.snapshot()\n    finalize: function () {\n        this.unhandleds.forEach(function (uh) {\n            try {\n                globalError(uh[0], uh[1]);\n            } catch (e) {}\n        });\n    }\n};\n\nvar PSD = globalPSD;\n\nvar microtickQueue = []; // Callbacks to call in this or next physical tick.\nvar numScheduledCalls = 0; // Number of listener-calls left to do in this physical tick.\nvar tickFinalizers = []; // Finalizers to call when there are no more async calls scheduled within current physical tick.\n\n// Wrappers are not being used yet. Their framework is functioning and can be used\n// to replace environment during a PSD scope (a.k.a. 'zone').\n/* **KEEP** export var wrappers = (() => {\r\n    var wrappers = [];\r\n\r\n    return {\r\n        snapshot: () => {\r\n            var i = wrappers.length,\r\n                result = new Array(i);\r\n            while (i--) result[i] = wrappers[i].snapshot();\r\n            return result;\r\n        },\r\n        restore: values => {\r\n            var i = wrappers.length;\r\n            while (i--) wrappers[i].restore(values[i]);\r\n        },\r\n        wrap: () => wrappers.map(w => w.wrap()),\r\n        add: wrapper => {\r\n            wrappers.push(wrapper);\r\n        }\r\n    };\r\n})();\r\n*/\n\nfunction Promise(fn) {\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n    this._listeners = [];\n    this.onuncatched = nop; // Deprecate in next major. Not needed. Better to use global error handler.\n\n    // A library may set `promise._lib = true;` after promise is created to make resolve() or reject()\n    // execute the microtask engine implicitely within the call to resolve() or reject().\n    // To remain A+ compliant, a library must only set `_lib=true` if it can guarantee that the stack\n    // only contains library code when calling resolve() or reject().\n    // RULE OF THUMB: ONLY set _lib = true for promises explicitely resolving/rejecting directly from\n    // global scope (event handler, timer etc)!\n    this._lib = false;\n    // Current async scope\n    var psd = this._PSD = PSD;\n\n    if (debug) {\n        this._stackHolder = getErrorWithStack();\n        this._prev = null;\n        this._numPrev = 0; // Number of previous promises (for long stacks)\n        linkToPreviousPromise(this, currentFulfiller);\n    }\n\n    if (typeof fn !== 'function') {\n        if (fn !== INTERNAL) throw new TypeError('Not a function');\n        // Private constructor (INTERNAL, state, value).\n        // Used internally by Promise.resolve() and Promise.reject().\n        this._state = arguments[1];\n        this._value = arguments[2];\n        if (this._state === false) handleRejection(this, this._value); // Map error, set stack and addPossiblyUnhandledError().\n        return;\n    }\n\n    this._state = null; // null (=pending), false (=rejected) or true (=resolved)\n    this._value = null; // error or result\n    ++psd.ref; // Refcounting current scope\n    executePromiseTask(this, fn);\n}\n\nprops(Promise.prototype, {\n\n    then: function (onFulfilled, onRejected) {\n        var _this = this;\n\n        var rv = new Promise(function (resolve, reject) {\n            propagateToListener(_this, new Listener(onFulfilled, onRejected, resolve, reject));\n        });\n        debug && (!this._prev || this._state === null) && linkToPreviousPromise(rv, this);\n        return rv;\n    },\n\n    _then: function (onFulfilled, onRejected) {\n        // A little tinier version of then() that don't have to create a resulting promise.\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected));\n    },\n\n    catch: function (onRejected) {\n        if (arguments.length === 1) return this.then(null, onRejected);\n        // First argument is the Error type to catch\n        var type = arguments[0],\n            handler = arguments[1];\n        return typeof type === 'function' ? this.then(null, function (err) {\n            return (\n                // Catching errors by its constructor type (similar to java / c++ / c#)\n                // Sample: promise.catch(TypeError, function (e) { ... });\n                err instanceof type ? handler(err) : PromiseReject(err)\n            );\n        }) : this.then(null, function (err) {\n            return (\n                // Catching errors by the error.name property. Makes sense for indexedDB where error type\n                // is always DOMError but where e.name tells the actual error type.\n                // Sample: promise.catch('ConstraintError', function (e) { ... });\n                err && err.name === type ? handler(err) : PromiseReject(err)\n            );\n        });\n    },\n\n    finally: function (onFinally) {\n        return this.then(function (value) {\n            onFinally();\n            return value;\n        }, function (err) {\n            onFinally();\n            return PromiseReject(err);\n        });\n    },\n\n    // Deprecate in next major. Needed only for db.on.error.\n    uncaught: function (uncaughtHandler) {\n        var _this2 = this;\n\n        // Be backward compatible and use \"onuncatched\" as the event name on this.\n        // Handle multiple subscribers through reverseStoppableEventChain(). If a handler returns `false`, bubbling stops.\n        this.onuncatched = reverseStoppableEventChain(this.onuncatched, uncaughtHandler);\n        // In case caller does this on an already rejected promise, assume caller wants to point out the error to this promise and not\n        // a previous promise. Reason: the prevous promise may lack onuncatched handler. \n        if (this._state === false && unhandledErrors.indexOf(this) === -1) {\n            // Replace unhandled error's destinaion promise with this one!\n            unhandledErrors.some(function (p, i, l) {\n                return p._value === _this2._value && (l[i] = _this2);\n            });\n            // Actually we do this shit because we need to support db.on.error() correctly during db.open(). If we deprecate db.on.error, we could\n            // take away this piece of code as well as the onuncatched and uncaught() method.\n        }\n        return this;\n    },\n\n    stack: {\n        get: function () {\n            if (this._stack) return this._stack;\n            try {\n                stack_being_generated = true;\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\n                var stack = stacks.join(\"\\nFrom previous: \");\n                if (this._state !== null) this._stack = stack; // Stack may be updated on reject.\n                return stack;\n            } finally {\n                stack_being_generated = false;\n            }\n        }\n    }\n});\n\nfunction Listener(onFulfilled, onRejected, resolve, reject) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n    this.psd = PSD;\n}\n\n// Promise Static Properties\nprops(Promise, {\n    all: function () {\n        var values = getArrayOf.apply(null, arguments); // Supports iterables, implicit arguments and array-like.\n        return new Promise(function (resolve, reject) {\n            if (values.length === 0) resolve([]);\n            var remaining = values.length;\n            values.forEach(function (a, i) {\n                return Promise.resolve(a).then(function (x) {\n                    values[i] = x;\n                    if (! --remaining) resolve(values);\n                }, reject);\n            });\n        });\n    },\n\n    resolve: function (value) {\n        if (value instanceof Promise) return value;\n        if (value && typeof value.then === 'function') return new Promise(function (resolve, reject) {\n            value.then(resolve, reject);\n        });\n        return new Promise(INTERNAL, true, value);\n    },\n\n    reject: PromiseReject,\n\n    race: function () {\n        var values = getArrayOf.apply(null, arguments);\n        return new Promise(function (resolve, reject) {\n            values.map(function (value) {\n                return Promise.resolve(value).then(resolve, reject);\n            });\n        });\n    },\n\n    PSD: {\n        get: function () {\n            return PSD;\n        },\n        set: function (value) {\n            return PSD = value;\n        }\n    },\n\n    newPSD: newScope,\n\n    usePSD: usePSD,\n\n    scheduler: {\n        get: function () {\n            return asap$1;\n        },\n        set: function (value) {\n            asap$1 = value;\n        }\n    },\n\n    rejectionMapper: {\n        get: function () {\n            return rejectionMapper;\n        },\n        set: function (value) {\n            rejectionMapper = value;\n        } // Map reject failures\n    },\n\n    follow: function (fn) {\n        return new Promise(function (resolve, reject) {\n            return newScope(function (resolve, reject) {\n                var psd = PSD;\n                psd.unhandleds = []; // For unhandled standard- or 3rd party Promises. Checked at psd.finalize()\n                psd.onunhandled = reject; // Triggered directly on unhandled promises of this library.\n                psd.finalize = callBoth(function () {\n                    var _this3 = this;\n\n                    // Unhandled standard or 3rd part promises are put in PSD.unhandleds and\n                    // examined upon scope completion while unhandled rejections in this Promise\n                    // will trigger directly through psd.onunhandled\n                    run_at_end_of_this_or_next_physical_tick(function () {\n                        _this3.unhandleds.length === 0 ? resolve() : reject(_this3.unhandleds[0]);\n                    });\n                }, psd.finalize);\n                fn();\n            }, resolve, reject);\n        });\n    },\n\n    on: Events(null, { \"error\": [reverseStoppableEventChain, defaultErrorHandler] // Default to defaultErrorHandler\n    })\n\n});\n\nvar PromiseOnError = Promise.on.error;\nPromiseOnError.subscribe = deprecated(\"Promise.on('error')\", PromiseOnError.subscribe);\nPromiseOnError.unsubscribe = deprecated(\"Promise.on('error').unsubscribe\", PromiseOnError.unsubscribe);\n\n/**\r\n* Take a potentially misbehaving resolver function and make sure\r\n* onFulfilled and onRejected are only called once.\r\n*\r\n* Makes no guarantees about asynchrony.\r\n*/\nfunction executePromiseTask(promise, fn) {\n    // Promise Resolution Procedure:\n    // https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    try {\n        fn(function (value) {\n            if (promise._state !== null) return;\n            if (value === promise) throw new TypeError('A promise cannot be resolved with itself.');\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\n            if (value && typeof value.then === 'function') {\n                executePromiseTask(promise, function (resolve, reject) {\n                    value instanceof Promise ? value._then(resolve, reject) : value.then(resolve, reject);\n                });\n            } else {\n                promise._state = true;\n                promise._value = value;\n                propagateAllListeners(promise);\n            }\n            if (shouldExecuteTick) endMicroTickScope();\n        }, handleRejection.bind(null, promise)); // If Function.bind is not supported. Exception is handled in catch below\n    } catch (ex) {\n        handleRejection(promise, ex);\n    }\n}\n\nfunction handleRejection(promise, reason) {\n    rejectingErrors.push(reason);\n    if (promise._state !== null) return;\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\n    reason = rejectionMapper(reason);\n    promise._state = false;\n    promise._value = reason;\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n        var origProp = getPropertyDescriptor(reason, \"stack\");\n        reason._promise = promise;\n        setProp(reason, \"stack\", {\n            get: function () {\n                return stack_being_generated ? origProp && (origProp.get ? origProp.get.apply(reason) : origProp.value) : promise.stack;\n            }\n        });\n    });\n    // Add the failure to a list of possibly uncaught errors\n    addPossiblyUnhandledError(promise);\n    propagateAllListeners(promise);\n    if (shouldExecuteTick) endMicroTickScope();\n}\n\nfunction propagateAllListeners(promise) {\n    //debug && linkToPreviousPromise(promise);\n    var listeners = promise._listeners;\n    promise._listeners = [];\n    for (var i = 0, len = listeners.length; i < len; ++i) {\n        propagateToListener(promise, listeners[i]);\n    }\n    var psd = promise._PSD;\n    --psd.ref || psd.finalize(); // if psd.ref reaches zero, call psd.finalize();\n    if (numScheduledCalls === 0) {\n        // If numScheduledCalls is 0, it means that our stack is not in a callback of a scheduled call,\n        // and that no deferreds where listening to this rejection or success.\n        // Since there is a risk that our stack can contain application code that may\n        // do stuff after this code is finished that may generate new calls, we cannot\n        // call finalizers here.\n        ++numScheduledCalls;\n        asap$1(function () {\n            if (--numScheduledCalls === 0) finalizePhysicalTick(); // Will detect unhandled errors\n        }, []);\n    }\n}\n\nfunction propagateToListener(promise, listener) {\n    if (promise._state === null) {\n        promise._listeners.push(listener);\n        return;\n    }\n\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n    if (cb === null) {\n        // This Listener doesnt have a listener for the event being triggered (onFulfilled or onReject) so lets forward the event to any eventual listeners on the Promise instance returned by then() or catch()\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\n    }\n    var psd = listener.psd;\n    ++psd.ref;\n    ++numScheduledCalls;\n    asap$1(callListener, [cb, promise, listener]);\n}\n\nfunction callListener(cb, promise, listener) {\n    var outerScope = PSD;\n    var psd = listener.psd;\n    try {\n        if (psd !== outerScope) {\n            // **KEEP** outerScope.env = wrappers.snapshot(); // Snapshot outerScope's environment.\n            PSD = psd;\n            // **KEEP** wrappers.restore(psd.env); // Restore PSD's environment.\n        }\n\n        // Set static variable currentFulfiller to the promise that is being fullfilled,\n        // so that we connect the chain of promises (for long stacks support)\n        currentFulfiller = promise;\n\n        // Call callback and resolve our listener with it's return value.\n        var value = promise._value,\n            ret;\n        if (promise._state) {\n            ret = cb(value);\n        } else {\n            if (rejectingErrors.length) rejectingErrors = [];\n            ret = cb(value);\n            if (rejectingErrors.indexOf(value) === -1) markErrorAsHandled(promise); // Callback didnt do Promise.reject(err) nor reject(err) onto another promise.\n        }\n        listener.resolve(ret);\n    } catch (e) {\n        // Exception thrown in callback. Reject our listener.\n        listener.reject(e);\n    } finally {\n        // Restore PSD, env and currentFulfiller.\n        if (psd !== outerScope) {\n            PSD = outerScope;\n            // **KEEP** wrappers.restore(outerScope.env); // Restore outerScope's environment\n        }\n        currentFulfiller = null;\n        if (--numScheduledCalls === 0) finalizePhysicalTick();\n        --psd.ref || psd.finalize();\n    }\n}\n\nfunction getStack(promise, stacks, limit) {\n    if (stacks.length === limit) return stacks;\n    var stack = \"\";\n    if (promise._state === false) {\n        var failure = promise._value,\n            errorName,\n            message;\n\n        if (failure != null) {\n            errorName = failure.name || \"Error\";\n            message = failure.message || failure;\n            stack = prettyStack(failure, 0);\n        } else {\n            errorName = failure; // If error is undefined or null, show that.\n            message = \"\";\n        }\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n    }\n    if (debug) {\n        stack = prettyStack(promise._stackHolder, 2);\n        if (stack && stacks.indexOf(stack) === -1) stacks.push(stack);\n        if (promise._prev) getStack(promise._prev, stacks, limit);\n    }\n    return stacks;\n}\n\nfunction linkToPreviousPromise(promise, prev) {\n    // Support long stacks by linking to previous completed promise.\n    var numPrev = prev ? prev._numPrev + 1 : 0;\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n        // Prohibit infinite Promise loops to get an infinite long memory consuming \"tail\".\n        promise._prev = prev;\n        promise._numPrev = numPrev;\n    }\n}\n\n/* The callback to schedule with setImmediate() or setTimeout().\r\n   It runs a virtual microtick and executes any callback registered in microtickQueue.\r\n */\nfunction physicalTick() {\n    beginMicroTickScope() && endMicroTickScope();\n}\n\nfunction beginMicroTickScope() {\n    var wasRootExec = isOutsideMicroTick;\n    isOutsideMicroTick = false;\n    needsNewPhysicalTick = false;\n    return wasRootExec;\n}\n\n/* Executes micro-ticks without doing try..catch.\r\n   This can be possible because we only use this internally and\r\n   the registered functions are exception-safe (they do try..catch\r\n   internally before calling any external method). If registering\r\n   functions in the microtickQueue that are not exception-safe, this\r\n   would destroy the framework and make it instable. So we don't export\r\n   our asap method.\r\n*/\nfunction endMicroTickScope() {\n    var callbacks, i, l;\n    do {\n        while (microtickQueue.length > 0) {\n            callbacks = microtickQueue;\n            microtickQueue = [];\n            l = callbacks.length;\n            for (i = 0; i < l; ++i) {\n                var item = callbacks[i];\n                item[0].apply(null, item[1]);\n            }\n        }\n    } while (microtickQueue.length > 0);\n    isOutsideMicroTick = true;\n    needsNewPhysicalTick = true;\n}\n\nfunction finalizePhysicalTick() {\n    var unhandledErrs = unhandledErrors;\n    unhandledErrors = [];\n    unhandledErrs.forEach(function (p) {\n        p._PSD.onunhandled.call(null, p._value, p);\n    });\n    var finalizers = tickFinalizers.slice(0); // Clone first because finalizer may remove itself from list.\n    var i = finalizers.length;\n    while (i) {\n        finalizers[--i]();\n    }\n}\n\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n    function finalizer() {\n        fn();\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n    }\n    tickFinalizers.push(finalizer);\n    ++numScheduledCalls;\n    asap$1(function () {\n        if (--numScheduledCalls === 0) finalizePhysicalTick();\n    }, []);\n}\n\nfunction addPossiblyUnhandledError(promise) {\n    // Only add to unhandledErrors if not already there. The first one to add to this list\n    // will be upon the first rejection so that the root cause (first promise in the\n    // rejection chain) is the one listed.\n    if (!unhandledErrors.some(function (p) {\n        return p._value === promise._value;\n    })) unhandledErrors.push(promise);\n}\n\nfunction markErrorAsHandled(promise) {\n    // Called when a reject handled is actually being called.\n    // Search in unhandledErrors for any promise whos _value is this promise_value (list\n    // contains only rejected promises, and only one item per error)\n    var i = unhandledErrors.length;\n    while (i) {\n        if (unhandledErrors[--i]._value === promise._value) {\n            // Found a promise that failed with this same error object pointer,\n            // Remove that since there is a listener that actually takes care of it.\n            unhandledErrors.splice(i, 1);\n            return;\n        }\n    }\n}\n\n// By default, log uncaught errors to the console\nfunction defaultErrorHandler(e) {\n    console.warn('Unhandled rejection: ' + (e.stack || e));\n}\n\nfunction PromiseReject(reason) {\n    return new Promise(INTERNAL, false, reason);\n}\n\nfunction wrap(fn, errorCatcher) {\n    var psd = PSD;\n    return function () {\n        var wasRootExec = beginMicroTickScope(),\n            outerScope = PSD;\n\n        try {\n            if (outerScope !== psd) {\n                // **KEEP** outerScope.env = wrappers.snapshot(); // Snapshot outerScope's environment\n                PSD = psd;\n                // **KEEP** wrappers.restore(psd.env); // Restore PSD's environment.\n            }\n            return fn.apply(this, arguments);\n        } catch (e) {\n            errorCatcher && errorCatcher(e);\n        } finally {\n            if (outerScope !== psd) {\n                PSD = outerScope;\n                // **KEEP** wrappers.restore(outerScope.env); // Restore outerScope's environment\n            }\n            if (wasRootExec) endMicroTickScope();\n        }\n    };\n}\n\nfunction newScope(fn, a1, a2, a3) {\n    var parent = PSD,\n        psd = Object.create(parent);\n    psd.parent = parent;\n    psd.ref = 0;\n    psd.global = false;\n    // **KEEP** psd.env = wrappers.wrap(psd);\n\n    // unhandleds and onunhandled should not be specifically set here.\n    // Leave them on parent prototype.\n    // unhandleds.push(err) will push to parent's prototype\n    // onunhandled() will call parents onunhandled (with this scope's this-pointer though!)\n    ++parent.ref;\n    psd.finalize = function () {\n        --this.parent.ref || this.parent.finalize();\n    };\n    var rv = usePSD(psd, fn, a1, a2, a3);\n    if (psd.ref === 0) psd.finalize();\n    return rv;\n}\n\nfunction usePSD(psd, fn, a1, a2, a3) {\n    var outerScope = PSD;\n    try {\n        if (psd !== outerScope) {\n            // **KEEP** outerScope.env = wrappers.snapshot(); // snapshot outerScope's environment.\n            PSD = psd;\n            // **KEEP** wrappers.restore(psd.env); // Restore PSD's environment.\n        }\n        return fn(a1, a2, a3);\n    } finally {\n        if (psd !== outerScope) {\n            PSD = outerScope;\n            // **KEEP** wrappers.restore(outerScope.env); // Restore outerScope's environment.\n        }\n    }\n}\n\nvar UNHANDLEDREJECTION = \"unhandledrejection\";\n\nfunction globalError(err, promise) {\n    var rv;\n    try {\n        rv = promise.onuncatched(err);\n    } catch (e) {}\n    if (rv !== false) try {\n        var event,\n            eventData = { promise: promise, reason: err };\n        if (_global.document && document.createEvent) {\n            event = document.createEvent('Event');\n            event.initEvent(UNHANDLEDREJECTION, true, true);\n            extend(event, eventData);\n        } else if (_global.CustomEvent) {\n            event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n            extend(event, eventData);\n        }\n        if (event && _global.dispatchEvent) {\n            dispatchEvent(event);\n            if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                // No native support for PromiseRejectionEvent but user has set window.onunhandledrejection. Manually call it.\n                try {\n                    _global.onunhandledrejection(event);\n                } catch (_) {}\n        }\n        if (!event.defaultPrevented) {\n            // Backward compatibility: fire to events registered at Promise.on.error\n            Promise.on.error.fire(err, promise);\n        }\n    } catch (e) {}\n}\n\n/* **KEEP** \r\n\r\nexport function wrapPromise(PromiseClass) {\r\n    var proto = PromiseClass.prototype;\r\n    var origThen = proto.then;\r\n    \r\n    wrappers.add({\r\n        snapshot: () => proto.then,\r\n        restore: value => {proto.then = value;},\r\n        wrap: () => patchedThen\r\n    });\r\n\r\n    function patchedThen (onFulfilled, onRejected) {\r\n        var promise = this;\r\n        var onFulfilledProxy = wrap(function(value){\r\n            var rv = value;\r\n            if (onFulfilled) {\r\n                rv = onFulfilled(rv);\r\n                if (rv && typeof rv.then === 'function') rv.then(); // Intercept that promise as well.\r\n            }\r\n            --PSD.ref || PSD.finalize();\r\n            return rv;\r\n        });\r\n        var onRejectedProxy = wrap(function(err){\r\n            promise._$err = err;\r\n            var unhandleds = PSD.unhandleds;\r\n            var idx = unhandleds.length,\r\n                rv;\r\n            while (idx--) if (unhandleds[idx]._$err === err) break;\r\n            if (onRejected) {\r\n                if (idx !== -1) unhandleds.splice(idx, 1); // Mark as handled.\r\n                rv = onRejected(err);\r\n                if (rv && typeof rv.then === 'function') rv.then(); // Intercept that promise as well.\r\n            } else {\r\n                if (idx === -1) unhandleds.push(promise);\r\n                rv = PromiseClass.reject(err);\r\n                rv._$nointercept = true; // Prohibit eternal loop.\r\n            }\r\n            --PSD.ref || PSD.finalize();\r\n            return rv;\r\n        });\r\n        \r\n        if (this._$nointercept) return origThen.apply(this, arguments);\r\n        ++PSD.ref;\r\n        return origThen.call(this, onFulfilledProxy, onRejectedProxy);\r\n    }\r\n}\r\n\r\n// Global Promise wrapper\r\nif (_global.Promise) wrapPromise(_global.Promise);\r\n\r\n*/\n\ndoFakeAutoComplete(function () {\n    // Simplify the job for VS Intellisense. This piece of code is one of the keys to the new marvellous intellisense support in Dexie.\n    asap$1 = function (fn, args) {\n        setTimeout(function () {\n            fn.apply(null, args);\n        }, 0);\n    };\n});\n\nfunction rejection(err, uncaughtHandler) {\n    // Get the call stack and return a rejected promise.\n    var rv = Promise.reject(err);\n    return uncaughtHandler ? rv.uncaught(uncaughtHandler) : rv;\n}\n\n/*\r\n * Dexie.js - a minimalistic wrapper for IndexedDB\r\n * ===============================================\r\n *\r\n * By David Fahlander, david.fahlander@gmail.com\r\n *\r\n * Version 1.5.1, Tue Nov 01 2016\r\n *\r\n * http://dexie.org\r\n *\r\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\r\n */\n\nvar DEXIE_VERSION = '1.5.1';\nvar maxString = String.fromCharCode(65535);\nvar maxKey = function () {\n    try {\n        IDBKeyRange.only([[]]);return [[]];\n    } catch (e) {\n        return maxString;\n    }\n}();\nvar INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nvar STRING_EXPECTED = \"String expected.\";\nvar connections = [];\nvar isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nvar hasIEDeleteObjectStoreBug = isIEOrEdge;\nvar hangsOnDeleteLargeKeyRange = isIEOrEdge;\nvar dexieStackFrameFilter = function (frame) {\n    return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame);\n};\n\nsetDebug(debug, dexieStackFrameFilter);\n\nfunction Dexie(dbName, options) {\n    /// <param name=\"options\" type=\"Object\" optional=\"true\">Specify only if you wich to control which addons that should run on this instance</param>\n    var deps = Dexie.dependencies;\n    var opts = extend({\n        // Default Options\n        addons: Dexie.addons, // Pick statically registered addons by default\n        autoOpen: true, // Don't require db.open() explicitely.\n        indexedDB: deps.indexedDB, // Backend IndexedDB api. Default to IDBShim or browser env.\n        IDBKeyRange: deps.IDBKeyRange // Backend IDBKeyRange api. Default to IDBShim or browser env.\n    }, options);\n    var addons = opts.addons,\n        autoOpen = opts.autoOpen,\n        indexedDB = opts.indexedDB,\n        IDBKeyRange = opts.IDBKeyRange;\n\n    var globalSchema = this._dbSchema = {};\n    var versions = [];\n    var dbStoreNames = [];\n    var allTables = {};\n    ///<var type=\"IDBDatabase\" />\n    var idbdb = null; // Instance of IDBDatabase\n    var dbOpenError = null;\n    var isBeingOpened = false;\n    var openComplete = false;\n    var READONLY = \"readonly\",\n        READWRITE = \"readwrite\";\n    var db = this;\n    var dbReadyResolve,\n        dbReadyPromise = new Promise(function (resolve) {\n        dbReadyResolve = resolve;\n    }),\n        cancelOpen,\n        openCanceller = new Promise(function (_, reject) {\n        cancelOpen = reject;\n    });\n    var autoSchema = true;\n    var hasNativeGetDatabaseNames = !!getNativeGetDatabaseNamesFn(indexedDB),\n        hasGetAll;\n\n    function init() {\n        // Default subscribers to \"versionchange\" and \"blocked\".\n        // Can be overridden by custom handlers. If custom handlers return false, these default\n        // behaviours will be prevented.\n        db.on(\"versionchange\", function (ev) {\n            // Default behavior for versionchange event is to close database connection.\n            // Caller can override this behavior by doing db.on(\"versionchange\", function(){ return false; });\n            // Let's not block the other window from making it's delete() or open() call.\n            // NOTE! This event is never fired in IE,Edge or Safari.\n            if (ev.newVersion > 0) console.warn('Another connection wants to upgrade database \\'' + db.name + '\\'. Closing db now to resume the upgrade.');else console.warn('Another connection wants to delete database \\'' + db.name + '\\'. Closing db now to resume the delete request.');\n            db.close();\n            // In many web applications, it would be recommended to force window.reload()\n            // when this event occurs. To do that, subscribe to the versionchange event\n            // and call window.location.reload(true) if ev.newVersion > 0 (not a deletion)\n            // The reason for this is that your current web app obviously has old schema code that needs\n            // to be updated. Another window got a newer version of the app and needs to upgrade DB but\n            // your window is blocking it unless we close it here.\n        });\n        db.on(\"blocked\", function (ev) {\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion) console.warn('Dexie.delete(\\'' + db.name + '\\') was blocked');else console.warn('Upgrade \\'' + db.name + '\\' blocked by other connection holding version ' + ev.oldVersion / 10);\n        });\n    }\n\n    //\n    //\n    //\n    // ------------------------- Versioning Framework---------------------------\n    //\n    //\n    //\n\n    this.version = function (versionNumber) {\n        /// <param name=\"versionNumber\" type=\"Number\"></param>\n        /// <returns type=\"Version\"></returns>\n        if (idbdb || isBeingOpened) throw new exceptions.Schema(\"Cannot add version when database is open\");\n        this.verno = Math.max(this.verno, versionNumber);\n        var versionInstance = versions.filter(function (v) {\n            return v._cfg.version === versionNumber;\n        })[0];\n        if (versionInstance) return versionInstance;\n        versionInstance = new Version(versionNumber);\n        versions.push(versionInstance);\n        versions.sort(lowerVersionFirst);\n        return versionInstance;\n    };\n\n    function Version(versionNumber) {\n        this._cfg = {\n            version: versionNumber,\n            storesSource: null,\n            dbschema: {},\n            tables: {},\n            contentUpgrade: null\n        };\n        this.stores({}); // Derive earlier schemas by default.\n    }\n\n    extend(Version.prototype, {\n        stores: function (stores) {\n            /// <summary>\n            ///   Defines the schema for a particular version\n            /// </summary>\n            /// <param name=\"stores\" type=\"Object\">\n            /// Example: <br/>\n            ///   {users: \"id++,first,last,&amp;username,*email\", <br/>\n            ///   passwords: \"id++,&amp;username\"}<br/>\n            /// <br/>\n            /// Syntax: {Table: \"[primaryKey][++],[&amp;][*]index1,[&amp;][*]index2,...\"}<br/><br/>\n            /// Special characters:<br/>\n            ///  \"&amp;\"  means unique key, <br/>\n            ///  \"*\"  means value is multiEntry, <br/>\n            ///  \"++\" means auto-increment and only applicable for primary key <br/>\n            /// </param>\n            this._cfg.storesSource = this._cfg.storesSource ? extend(this._cfg.storesSource, stores) : stores;\n\n            // Derive stores from earlier versions if they are not explicitely specified as null or a new syntax.\n            var storesSpec = {};\n            versions.forEach(function (version) {\n                // 'versions' is always sorted by lowest version first.\n                extend(storesSpec, version._cfg.storesSource);\n            });\n\n            var dbschema = this._cfg.dbschema = {};\n            this._parseStoresSpec(storesSpec, dbschema);\n            // Update the latest schema to this version\n            // Update API\n            globalSchema = db._dbSchema = dbschema;\n            removeTablesApi([allTables, db, Transaction.prototype]);\n            setApiOnPlace([allTables, db, Transaction.prototype, this._cfg.tables], keys(dbschema), READWRITE, dbschema);\n            dbStoreNames = keys(dbschema);\n            return this;\n        },\n        upgrade: function (upgradeFunction) {\n            /// <param name=\"upgradeFunction\" optional=\"true\">Function that performs upgrading actions.</param>\n            var self = this;\n            fakeAutoComplete(function () {\n                upgradeFunction(db._createTransaction(READWRITE, keys(self._cfg.dbschema), self._cfg.dbschema)); // BUGBUG: No code completion for prev version's tables wont appear.\n            });\n            this._cfg.contentUpgrade = upgradeFunction;\n            return this;\n        },\n        _parseStoresSpec: function (stores, outSchema) {\n            keys(stores).forEach(function (tableName) {\n                if (stores[tableName] !== null) {\n                    var instanceTemplate = {};\n                    var indexes = parseIndexSyntax(stores[tableName]);\n                    var primKey = indexes.shift();\n                    if (primKey.multi) throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                    if (primKey.keyPath) setByKeyPath(instanceTemplate, primKey.keyPath, primKey.auto ? 0 : primKey.keyPath);\n                    indexes.forEach(function (idx) {\n                        if (idx.auto) throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                        if (!idx.keyPath) throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                        setByKeyPath(instanceTemplate, idx.keyPath, idx.compound ? idx.keyPath.map(function () {\n                            return \"\";\n                        }) : \"\");\n                    });\n                    outSchema[tableName] = new TableSchema(tableName, primKey, indexes, instanceTemplate);\n                }\n            });\n        }\n    });\n\n    function runUpgraders(oldVersion, idbtrans, reject) {\n        var trans = db._createTransaction(READWRITE, dbStoreNames, globalSchema);\n        trans.create(idbtrans);\n        trans._completion.catch(reject);\n        var rejectTransaction = trans._reject.bind(trans);\n        newScope(function () {\n            PSD.trans = trans;\n            if (oldVersion === 0) {\n                // Create tables:\n                keys(globalSchema).forEach(function (tableName) {\n                    createTable(idbtrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n                });\n                Promise.follow(function () {\n                    return db.on.populate.fire(trans);\n                }).catch(rejectTransaction);\n            } else updateTablesAndIndexes(oldVersion, trans, idbtrans).catch(rejectTransaction);\n        });\n    }\n\n    function updateTablesAndIndexes(oldVersion, trans, idbtrans) {\n        // Upgrade version to version, step-by-step from oldest to newest version.\n        // Each transaction object will contain the table set that was current in that version (but also not-yet-deleted tables from its previous version)\n        var queue = [];\n        var oldVersionStruct = versions.filter(function (version) {\n            return version._cfg.version === oldVersion;\n        })[0];\n        if (!oldVersionStruct) throw new exceptions.Upgrade(\"Dexie specification of currently installed DB version is missing\");\n        globalSchema = db._dbSchema = oldVersionStruct._cfg.dbschema;\n        var anyContentUpgraderHasRun = false;\n\n        var versToRun = versions.filter(function (v) {\n            return v._cfg.version > oldVersion;\n        });\n        versToRun.forEach(function (version) {\n            /// <param name=\"version\" type=\"Version\"></param>\n            queue.push(function () {\n                var oldSchema = globalSchema;\n                var newSchema = version._cfg.dbschema;\n                adjustToExistingIndexNames(oldSchema, idbtrans);\n                adjustToExistingIndexNames(newSchema, idbtrans);\n                globalSchema = db._dbSchema = newSchema;\n                var diff = getSchemaDiff(oldSchema, newSchema);\n                // Add tables           \n                diff.add.forEach(function (tuple) {\n                    createTable(idbtrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n                });\n                // Change tables\n                diff.change.forEach(function (change) {\n                    if (change.recreate) {\n                        throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                    } else {\n                        var store = idbtrans.objectStore(change.name);\n                        // Add indexes\n                        change.add.forEach(function (idx) {\n                            addIndex(store, idx);\n                        });\n                        // Update indexes\n                        change.change.forEach(function (idx) {\n                            store.deleteIndex(idx.name);\n                            addIndex(store, idx);\n                        });\n                        // Delete indexes\n                        change.del.forEach(function (idxName) {\n                            store.deleteIndex(idxName);\n                        });\n                    }\n                });\n                if (version._cfg.contentUpgrade) {\n                    anyContentUpgraderHasRun = true;\n                    return Promise.follow(function () {\n                        version._cfg.contentUpgrade(trans);\n                    });\n                }\n            });\n            queue.push(function (idbtrans) {\n                if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                    // Dont delete old tables if ieBug is present and a content upgrader has run. Let tables be left in DB so far. This needs to be taken care of.\n                    var newSchema = version._cfg.dbschema;\n                    // Delete old tables\n                    deleteRemovedTables(newSchema, idbtrans);\n                }\n            });\n        });\n\n        // Now, create a queue execution engine\n        function runQueue() {\n            return queue.length ? Promise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) : Promise.resolve();\n        }\n\n        return runQueue().then(function () {\n            createMissingTables(globalSchema, idbtrans); // At last, make sure to create any missing tables. (Needed by addons that add stores to DB without specifying version)\n        });\n    }\n\n    function getSchemaDiff(oldSchema, newSchema) {\n        var diff = {\n            del: [], // Array of table names\n            add: [], // Array of [tableName, newDefinition]\n            change: [] // Array of {name: tableName, recreate: newDefinition, del: delIndexNames, add: newIndexDefs, change: changedIndexDefs}\n        };\n        for (var table in oldSchema) {\n            if (!newSchema[table]) diff.del.push(table);\n        }\n        for (table in newSchema) {\n            var oldDef = oldSchema[table],\n                newDef = newSchema[table];\n            if (!oldDef) {\n                diff.add.push([table, newDef]);\n            } else {\n                var change = {\n                    name: table,\n                    def: newDef,\n                    recreate: false,\n                    del: [],\n                    add: [],\n                    change: []\n                };\n                if (oldDef.primKey.src !== newDef.primKey.src) {\n                    // Primary key has changed. Remove and re-add table.\n                    change.recreate = true;\n                    diff.change.push(change);\n                } else {\n                    // Same primary key. Just find out what differs:\n                    var oldIndexes = oldDef.idxByName;\n                    var newIndexes = newDef.idxByName;\n                    for (var idxName in oldIndexes) {\n                        if (!newIndexes[idxName]) change.del.push(idxName);\n                    }\n                    for (idxName in newIndexes) {\n                        var oldIdx = oldIndexes[idxName],\n                            newIdx = newIndexes[idxName];\n                        if (!oldIdx) change.add.push(newIdx);else if (oldIdx.src !== newIdx.src) change.change.push(newIdx);\n                    }\n                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                        diff.change.push(change);\n                    }\n                }\n            }\n        }\n        return diff;\n    }\n\n    function createTable(idbtrans, tableName, primKey, indexes) {\n        /// <param name=\"idbtrans\" type=\"IDBTransaction\"></param>\n        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ? { keyPath: primKey.keyPath, autoIncrement: primKey.auto } : { autoIncrement: primKey.auto });\n        indexes.forEach(function (idx) {\n            addIndex(store, idx);\n        });\n        return store;\n    }\n\n    function createMissingTables(newSchema, idbtrans) {\n        keys(newSchema).forEach(function (tableName) {\n            if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n            }\n        });\n    }\n\n    function deleteRemovedTables(newSchema, idbtrans) {\n        for (var i = 0; i < idbtrans.db.objectStoreNames.length; ++i) {\n            var storeName = idbtrans.db.objectStoreNames[i];\n            if (newSchema[storeName] == null) {\n                idbtrans.db.deleteObjectStore(storeName);\n            }\n        }\n    }\n\n    function addIndex(store, idx) {\n        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n    }\n\n    function dbUncaught(err) {\n        return db.on.error.fire(err);\n    }\n\n    //\n    //\n    //      Dexie Protected API\n    //\n    //\n\n    this._allTables = allTables;\n\n    this._tableFactory = function createTable(mode, tableSchema) {\n        /// <param name=\"tableSchema\" type=\"TableSchema\"></param>\n        if (mode === READONLY) return new Table(tableSchema.name, tableSchema, Collection);else return new WriteableTable(tableSchema.name, tableSchema);\n    };\n\n    this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) {\n        return new Transaction(mode, storeNames, dbschema, parentTransaction);\n    };\n\n    /* Generate a temporary transaction when db operations are done outside a transactino scope.\r\n    */\n    function tempTransaction(mode, storeNames, fn) {\n        // Last argument is \"writeLocked\". But this doesnt apply to oneshot direct db operations, so we ignore it.\n        if (!openComplete && !PSD.letThrough) {\n            if (!isBeingOpened) {\n                if (!autoOpen) return rejection(new exceptions.DatabaseClosed(), dbUncaught);\n                db.open().catch(nop); // Open in background. If if fails, it will be catched by the final promise anyway.\n            }\n            return dbReadyPromise.then(function () {\n                return tempTransaction(mode, storeNames, fn);\n            });\n        } else {\n            var trans = db._createTransaction(mode, storeNames, globalSchema);\n            return trans._promise(mode, function (resolve, reject) {\n                newScope(function () {\n                    // OPTIMIZATION POSSIBLE? newScope() not needed because it's already done in _promise.\n                    PSD.trans = trans;\n                    fn(resolve, reject, trans);\n                });\n            }).then(function (result) {\n                // Instead of resolving value directly, wait with resolving it until transaction has completed.\n                // Otherwise the data would not be in the DB if requesting it in the then() operation.\n                // Specifically, to ensure that the following expression will work:\n                //\n                //   db.friends.put({name: \"Arne\"}).then(function () {\n                //       db.friends.where(\"name\").equals(\"Arne\").count(function(count) {\n                //           assert (count === 1);\n                //       });\n                //   });\n                //\n                return trans._completion.then(function () {\n                    return result;\n                });\n            }); /*.catch(err => { // Don't do this as of now. If would affect bulk- and modify methods in a way that could be more intuitive. But wait! Maybe change in next major.\r\n                 trans._reject(err);\r\n                 return rejection(err);\r\n                });*/\n        }\n    }\n\n    this._whenReady = function (fn) {\n        return new Promise(fake || openComplete || PSD.letThrough ? fn : function (resolve, reject) {\n            if (!isBeingOpened) {\n                if (!autoOpen) {\n                    reject(new exceptions.DatabaseClosed());\n                    return;\n                }\n                db.open().catch(nop); // Open in background. If if fails, it will be catched by the final promise anyway.\n            }\n            dbReadyPromise.then(function () {\n                fn(resolve, reject);\n            });\n        }).uncaught(dbUncaught);\n    };\n\n    //\n    //\n    //\n    //\n    //      Dexie API\n    //\n    //\n    //\n\n    this.verno = 0;\n\n    this.open = function () {\n        if (isBeingOpened || idbdb) return dbReadyPromise.then(function () {\n            return dbOpenError ? rejection(dbOpenError, dbUncaught) : db;\n        });\n        debug && (openCanceller._stackHolder = getErrorWithStack()); // Let stacks point to when open() was called rather than where new Dexie() was called.\n        isBeingOpened = true;\n        dbOpenError = null;\n        openComplete = false;\n\n        // Function pointers to call when the core opening process completes.\n        var resolveDbReady = dbReadyResolve,\n\n        // upgradeTransaction to abort on failure.\n        upgradeTransaction = null;\n\n        return Promise.race([openCanceller, new Promise(function (resolve, reject) {\n            doFakeAutoComplete(function () {\n                return resolve();\n            });\n\n            // Make sure caller has specified at least one version\n            if (versions.length > 0) autoSchema = false;\n\n            // Multiply db.verno with 10 will be needed to workaround upgrading bug in IE:\n            // IE fails when deleting objectStore after reading from it.\n            // A future version of Dexie.js will stopover an intermediate version to workaround this.\n            // At that point, we want to be backward compatible. Could have been multiplied with 2, but by using 10, it is easier to map the number to the real version number.\n\n            // If no API, throw!\n            if (!indexedDB) throw new exceptions.MissingAPI(\"indexedDB API not found. If using IE10+, make sure to run your code on a server URL \" + \"(not locally). If using old Safari versions, make sure to include indexedDB polyfill.\");\n\n            var req = autoSchema ? indexedDB.open(dbName) : indexedDB.open(dbName, Math.round(db.verno * 10));\n            if (!req) throw new exceptions.MissingAPI(\"IndexedDB API not available\"); // May happen in Safari private mode, see https://github.com/dfahlander/Dexie.js/issues/134\n            req.onerror = wrap(eventRejectHandler(reject));\n            req.onblocked = wrap(fireOnBlocked);\n            req.onupgradeneeded = wrap(function (e) {\n                upgradeTransaction = req.transaction;\n                if (autoSchema && !db._allowEmptyDB) {\n                    // Unless an addon has specified db._allowEmptyDB, lets make the call fail.\n                    // Caller did not specify a version or schema. Doing that is only acceptable for opening alread existing databases.\n                    // If onupgradeneeded is called it means database did not exist. Reject the open() promise and make sure that we\n                    // do not create a new database by accident here.\n                    req.onerror = preventDefault; // Prohibit onabort error from firing before we're done!\n                    upgradeTransaction.abort(); // Abort transaction (would hope that this would make DB disappear but it doesnt.)\n                    // Close database and delete it.\n                    req.result.close();\n                    var delreq = indexedDB.deleteDatabase(dbName); // The upgrade transaction is atomic, and javascript is single threaded - meaning that there is no risk that we delete someone elses database here!\n                    delreq.onsuccess = delreq.onerror = wrap(function () {\n                        reject(new exceptions.NoSuchDatabase('Database ' + dbName + ' doesnt exist'));\n                    });\n                } else {\n                    upgradeTransaction.onerror = wrap(eventRejectHandler(reject));\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion; // Safari 8 fix.\n                    runUpgraders(oldVer / 10, upgradeTransaction, reject, req);\n                }\n            }, reject);\n\n            req.onsuccess = wrap(function () {\n                // Core opening procedure complete. Now let's just record some stuff.\n                upgradeTransaction = null;\n                idbdb = req.result;\n                connections.push(db); // Used for emulating versionchange event on IE/Edge/Safari.\n\n                if (autoSchema) readGlobalSchema();else if (idbdb.objectStoreNames.length > 0) {\n                    try {\n                        adjustToExistingIndexNames(globalSchema, idbdb.transaction(safariMultiStoreFix(idbdb.objectStoreNames), READONLY));\n                    } catch (e) {\n                        // Safari may bail out if > 1 store names. However, this shouldnt be a showstopper. Issue #120.\n                    }\n                }\n\n                idbdb.onversionchange = wrap(function (ev) {\n                    db._vcFired = true; // detect implementations that not support versionchange (IE/Edge/Safari)\n                    db.on(\"versionchange\").fire(ev);\n                });\n\n                if (!hasNativeGetDatabaseNames) {\n                    // Update localStorage with list of database names\n                    globalDatabaseList(function (databaseNames) {\n                        if (databaseNames.indexOf(dbName) === -1) return databaseNames.push(dbName);\n                    });\n                }\n\n                resolve();\n            }, reject);\n        })]).then(function () {\n            // Before finally resolving the dbReadyPromise and this promise,\n            // call and await all on('ready') subscribers:\n            // Dexie.vip() makes subscribers able to use the database while being opened.\n            // This is a must since these subscribers take part of the opening procedure.\n            return Dexie.vip(db.on.ready.fire);\n        }).then(function () {\n            // Resolve the db.open() with the db instance.\n            isBeingOpened = false;\n            return db;\n        }).catch(function (err) {\n            try {\n                // Did we fail within onupgradeneeded? Make sure to abort the upgrade transaction so it doesnt commit.\n                upgradeTransaction && upgradeTransaction.abort();\n            } catch (e) {}\n            isBeingOpened = false; // Set before calling db.close() so that it doesnt reject openCanceller again (leads to unhandled rejection event).\n            db.close(); // Closes and resets idbdb, removes connections, resets dbReadyPromise and openCanceller so that a later db.open() is fresh.\n            // A call to db.close() may have made on-ready subscribers fail. Use dbOpenError if set, since err could be a follow-up error on that.\n            dbOpenError = err; // Record the error. It will be used to reject further promises of db operations.\n            return rejection(dbOpenError, dbUncaught); // dbUncaught will make sure any error that happened in any operation before will now bubble to db.on.error() thanks to the special handling in Promise.uncaught().\n        }).finally(function () {\n            openComplete = true;\n            resolveDbReady(); // dbReadyPromise is resolved no matter if open() rejects or resolved. It's just to wake up waiters.\n        });\n    };\n\n    this.close = function () {\n        var idx = connections.indexOf(db);\n        if (idx >= 0) connections.splice(idx, 1);\n        if (idbdb) {\n            try {\n                idbdb.close();\n            } catch (e) {}\n            idbdb = null;\n        }\n        autoOpen = false;\n        dbOpenError = new exceptions.DatabaseClosed();\n        if (isBeingOpened) cancelOpen(dbOpenError);\n        // Reset dbReadyPromise promise:\n        dbReadyPromise = new Promise(function (resolve) {\n            dbReadyResolve = resolve;\n        });\n        openCanceller = new Promise(function (_, reject) {\n            cancelOpen = reject;\n        });\n    };\n\n    this.delete = function () {\n        var hasArguments = arguments.length > 0;\n        return new Promise(function (resolve, reject) {\n            if (hasArguments) throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n            if (isBeingOpened) {\n                dbReadyPromise.then(doDelete);\n            } else {\n                doDelete();\n            }\n            function doDelete() {\n                db.close();\n                var req = indexedDB.deleteDatabase(dbName);\n                req.onsuccess = wrap(function () {\n                    if (!hasNativeGetDatabaseNames) {\n                        globalDatabaseList(function (databaseNames) {\n                            var pos = databaseNames.indexOf(dbName);\n                            if (pos >= 0) return databaseNames.splice(pos, 1);\n                        });\n                    }\n                    resolve();\n                });\n                req.onerror = wrap(eventRejectHandler(reject));\n                req.onblocked = fireOnBlocked;\n            }\n        }).uncaught(dbUncaught);\n    };\n\n    this.backendDB = function () {\n        return idbdb;\n    };\n\n    this.isOpen = function () {\n        return idbdb !== null;\n    };\n    this.hasFailed = function () {\n        return dbOpenError !== null;\n    };\n    this.dynamicallyOpened = function () {\n        return autoSchema;\n    };\n\n    //\n    // Properties\n    //\n    this.name = dbName;\n\n    // db.tables - an array of all Table instances.\n    setProp(this, \"tables\", {\n        get: function () {\n            /// <returns type=\"Array\" elementType=\"WriteableTable\" />\n            return keys(allTables).map(function (name) {\n                return allTables[name];\n            });\n        }\n    });\n\n    //\n    // Events\n    //\n    this.on = Events(this, \"error\", \"populate\", \"blocked\", \"versionchange\", { ready: [promisableChain, nop] });\n    this.on.error.subscribe = deprecated(\"Dexie.on.error\", this.on.error.subscribe);\n    this.on.error.unsubscribe = deprecated(\"Dexie.on.error.unsubscribe\", this.on.error.unsubscribe);\n\n    this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n        return function (subscriber, bSticky) {\n            Dexie.vip(function () {\n                if (openComplete) {\n                    // Database already open. Call subscriber asap.\n                    if (!dbOpenError) Promise.resolve().then(subscriber);\n                    // bSticky: Also subscribe to future open sucesses (after close / reopen) \n                    if (bSticky) subscribe(subscriber);\n                } else {\n                    // Database not yet open. Subscribe to it.\n                    subscribe(subscriber);\n                    // If bSticky is falsy, make sure to unsubscribe subscriber when fired once.\n                    if (!bSticky) subscribe(function unsubscribe() {\n                        db.on.ready.unsubscribe(subscriber);\n                        db.on.ready.unsubscribe(unsubscribe);\n                    });\n                }\n            });\n        };\n    });\n\n    fakeAutoComplete(function () {\n        db.on(\"populate\").fire(db._createTransaction(READWRITE, dbStoreNames, globalSchema));\n        db.on(\"error\").fire(new Error());\n    });\n\n    this.transaction = function (mode, tableInstances, scopeFunc) {\n        /// <summary>\n        ///\n        /// </summary>\n        /// <param name=\"mode\" type=\"String\">\"r\" for readonly, or \"rw\" for readwrite</param>\n        /// <param name=\"tableInstances\">Table instance, Array of Table instances, String or String Array of object stores to include in the transaction</param>\n        /// <param name=\"scopeFunc\" type=\"Function\">Function to execute with transaction</param>\n\n        // Let table arguments be all arguments between mode and last argument.\n        var i = arguments.length;\n        if (i < 2) throw new exceptions.InvalidArgument(\"Too few arguments\");\n        // Prevent optimzation killer (https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments)\n        // and clone arguments except the first one into local var 'args'.\n        var args = new Array(i - 1);\n        while (--i) {\n            args[i - 1] = arguments[i];\n        } // Let scopeFunc be the last argument and pop it so that args now only contain the table arguments.\n        scopeFunc = args.pop();\n        var tables = flatten(args); // Support using array as middle argument, or a mix of arrays and non-arrays.\n        var parentTransaction = PSD.trans;\n        // Check if parent transactions is bound to this db instance, and if caller wants to reuse it\n        if (!parentTransaction || parentTransaction.db !== db || mode.indexOf('!') !== -1) parentTransaction = null;\n        var onlyIfCompatible = mode.indexOf('?') !== -1;\n        mode = mode.replace('!', '').replace('?', ''); // Ok. Will change arguments[0] as well but we wont touch arguments henceforth.\n\n        try {\n            //\n            // Get storeNames from arguments. Either through given table instances, or through given table names.\n            //\n            var storeNames = tables.map(function (table) {\n                var storeName = table instanceof Table ? table.name : table;\n                if (typeof storeName !== 'string') throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                return storeName;\n            });\n\n            //\n            // Resolve mode. Allow shortcuts \"r\" and \"rw\".\n            //\n            if (mode == \"r\" || mode == READONLY) mode = READONLY;else if (mode == \"rw\" || mode == READWRITE) mode = READWRITE;else throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n\n            if (parentTransaction) {\n                // Basic checks\n                if (parentTransaction.mode === READONLY && mode === READWRITE) {\n                    if (onlyIfCompatible) {\n                        // Spawn new transaction instead.\n                        parentTransaction = null;\n                    } else throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                }\n                if (parentTransaction) {\n                    storeNames.forEach(function (storeName) {\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                            if (onlyIfCompatible) {\n                                // Spawn new transaction instead.\n                                parentTransaction = null;\n                            } else throw new exceptions.SubTransaction(\"Table \" + storeName + \" not included in parent transaction.\");\n                        }\n                    });\n                }\n            }\n        } catch (e) {\n            return parentTransaction ? parentTransaction._promise(null, function (_, reject) {\n                reject(e);\n            }) : rejection(e, dbUncaught);\n        }\n        // If this is a sub-transaction, lock the parent and then launch the sub-transaction.\n        return parentTransaction ? parentTransaction._promise(mode, enterTransactionScope, \"lock\") : db._whenReady(enterTransactionScope);\n\n        function enterTransactionScope(resolve) {\n            var parentPSD = PSD;\n            resolve(Promise.resolve().then(function () {\n                return newScope(function () {\n                    // Keep a pointer to last non-transactional PSD to use if someone calls Dexie.ignoreTransaction().\n                    PSD.transless = PSD.transless || parentPSD;\n                    // Our transaction.\n                    //return new Promise((resolve, reject) => {\n                    var trans = db._createTransaction(mode, storeNames, globalSchema, parentTransaction);\n                    // Let the transaction instance be part of a Promise-specific data (PSD) value.\n                    PSD.trans = trans;\n\n                    if (parentTransaction) {\n                        // Emulate transaction commit awareness for inner transaction (must 'commit' when the inner transaction has no more operations ongoing)\n                        trans.idbtrans = parentTransaction.idbtrans;\n                    } else {\n                        trans.create(); // Create the backend transaction so that complete() or error() will trigger even if no operation is made upon it.\n                    }\n\n                    // Provide arguments to the scope function (for backward compatibility)\n                    var tableArgs = storeNames.map(function (name) {\n                        return allTables[name];\n                    });\n                    tableArgs.push(trans);\n\n                    var returnValue;\n                    return Promise.follow(function () {\n                        // Finally, call the scope function with our table and transaction arguments.\n                        returnValue = scopeFunc.apply(trans, tableArgs); // NOTE: returnValue is used in trans.on.complete() not as a returnValue to this func.\n                        if (returnValue) {\n                            if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                                // scopeFunc returned an iterator with throw-support. Handle yield as await.\n                                returnValue = awaitIterator(returnValue);\n                            } else if (typeof returnValue.then === 'function' && !hasOwn(returnValue, '_PSD')) {\n                                throw new exceptions.IncompatiblePromise(\"Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: \" + scopeFunc.toString());\n                            }\n                        }\n                    }).uncaught(dbUncaught).then(function () {\n                        if (parentTransaction) trans._resolve(); // sub transactions don't react to idbtrans.oncomplete. We must trigger a acompletion.\n                        return trans._completion; // Even if WE believe everything is fine. Await IDBTransaction's oncomplete or onerror as well.\n                    }).then(function () {\n                        return returnValue;\n                    }).catch(function (e) {\n                        //reject(e);\n                        trans._reject(e); // Yes, above then-handler were maybe not called because of an unhandled rejection in scopeFunc!\n                        return rejection(e);\n                    });\n                    //});\n                });\n            }));\n        }\n    };\n\n    this.table = function (tableName) {\n        /// <returns type=\"WriteableTable\"></returns>\n        if (fake && autoSchema) return new WriteableTable(tableName);\n        if (!hasOwn(allTables, tableName)) {\n            throw new exceptions.InvalidTable('Table ' + tableName + ' does not exist');\n        }\n        return allTables[tableName];\n    };\n\n    //\n    //\n    //\n    // Table Class\n    //\n    //\n    //\n    function Table(name, tableSchema, collClass) {\n        /// <param name=\"name\" type=\"String\"></param>\n        this.name = name;\n        this.schema = tableSchema;\n        this.hook = allTables[name] ? allTables[name].hook : Events(null, {\n            \"creating\": [hookCreatingChain, nop],\n            \"reading\": [pureFunctionChain, mirror],\n            \"updating\": [hookUpdatingChain, nop],\n            \"deleting\": [hookDeletingChain, nop]\n        });\n        this._collClass = collClass || Collection;\n    }\n\n    props(Table.prototype, {\n\n        //\n        // Table Protected Methods\n        //\n\n        _trans: function getTransaction(mode, fn, writeLocked) {\n            var trans = PSD.trans;\n            return trans && trans.db === db ? trans._promise(mode, fn, writeLocked) : tempTransaction(mode, [this.name], fn);\n        },\n        _idbstore: function getIDBObjectStore(mode, fn, writeLocked) {\n            if (fake) return new Promise(fn); // Simplify the work for Intellisense/Code completion.\n            var trans = PSD.trans,\n                tableName = this.name;\n            function supplyIdbStore(resolve, reject, trans) {\n                fn(resolve, reject, trans.idbtrans.objectStore(tableName), trans);\n            }\n            return trans && trans.db === db ? trans._promise(mode, supplyIdbStore, writeLocked) : tempTransaction(mode, [this.name], supplyIdbStore);\n        },\n\n        //\n        // Table Public Methods\n        //\n        get: function (key, cb) {\n            var self = this;\n            return this._idbstore(READONLY, function (resolve, reject, idbstore) {\n                fake && resolve(self.schema.instanceTemplate);\n                var req = idbstore.get(key);\n                req.onerror = eventRejectHandler(reject);\n                req.onsuccess = wrap(function () {\n                    resolve(self.hook.reading.fire(req.result));\n                }, reject);\n            }).then(cb);\n        },\n        where: function (indexName) {\n            return new WhereClause(this, indexName);\n        },\n        count: function (cb) {\n            return this.toCollection().count(cb);\n        },\n        offset: function (offset) {\n            return this.toCollection().offset(offset);\n        },\n        limit: function (numRows) {\n            return this.toCollection().limit(numRows);\n        },\n        reverse: function () {\n            return this.toCollection().reverse();\n        },\n        filter: function (filterFunction) {\n            return this.toCollection().and(filterFunction);\n        },\n        each: function (fn) {\n            return this.toCollection().each(fn);\n        },\n        toArray: function (cb) {\n            return this.toCollection().toArray(cb);\n        },\n        orderBy: function (index) {\n            return new this._collClass(new WhereClause(this, index));\n        },\n\n        toCollection: function () {\n            return new this._collClass(new WhereClause(this));\n        },\n\n        mapToClass: function (constructor, structure) {\n            /// <summary>\n            ///     Map table to a javascript constructor function. Objects returned from the database will be instances of this class, making\n            ///     it possible to the instanceOf operator as well as extending the class using constructor.prototype.method = function(){...}.\n            /// </summary>\n            /// <param name=\"constructor\">Constructor function representing the class.</param>\n            /// <param name=\"structure\" optional=\"true\">Helps IDE code completion by knowing the members that objects contain and not just the indexes. Also\n            /// know what type each member has. Example: {name: String, emailAddresses: [String], password}</param>\n            this.schema.mappedClass = constructor;\n            var instanceTemplate = Object.create(constructor.prototype);\n            if (structure) {\n                // structure and instanceTemplate is for IDE code competion only while constructor.prototype is for actual inheritance.\n                applyStructure(instanceTemplate, structure);\n            }\n            this.schema.instanceTemplate = instanceTemplate;\n\n            // Now, subscribe to the when(\"reading\") event to make all objects that come out from this table inherit from given class\n            // no matter which method to use for reading (Table.get() or Table.where(...)... )\n            var readHook = function (obj) {\n                if (!obj) return obj; // No valid object. (Value is null). Return as is.\n                // Create a new object that derives from constructor:\n                var res = Object.create(constructor.prototype);\n                // Clone members:\n                for (var m in obj) {\n                    if (hasOwn(obj, m)) try {\n                        res[m] = obj[m];\n                    } catch (_) {}\n                }return res;\n            };\n\n            if (this.schema.readHook) {\n                this.hook.reading.unsubscribe(this.schema.readHook);\n            }\n            this.schema.readHook = readHook;\n            this.hook(\"reading\", readHook);\n            return constructor;\n        },\n        defineClass: function (structure) {\n            /// <summary>\n            ///     Define all members of the class that represents the table. This will help code completion of when objects are read from the database\n            ///     as well as making it possible to extend the prototype of the returned constructor function.\n            /// </summary>\n            /// <param name=\"structure\">Helps IDE code completion by knowing the members that objects contain and not just the indexes. Also\n            /// know what type each member has. Example: {name: String, emailAddresses: [String], properties: {shoeSize: Number}}</param>\n            return this.mapToClass(Dexie.defineClass(structure), structure);\n        }\n    });\n\n    //\n    //\n    //\n    // WriteableTable Class (extends Table)\n    //\n    //\n    //\n    function WriteableTable(name, tableSchema, collClass) {\n        Table.call(this, name, tableSchema, collClass || WriteableCollection);\n    }\n\n    function BulkErrorHandlerCatchAll(errorList, done, supportHooks) {\n        return (supportHooks ? hookedEventRejectHandler : eventRejectHandler)(function (e) {\n            errorList.push(e);\n            done && done();\n        });\n    }\n\n    function bulkDelete(idbstore, trans, keysOrTuples, hasDeleteHook, deletingHook) {\n        // If hasDeleteHook, keysOrTuples must be an array of tuples: [[key1, value2],[key2,value2],...],\n        // else keysOrTuples must be just an array of keys: [key1, key2, ...].\n        return new Promise(function (resolve, reject) {\n            var len = keysOrTuples.length,\n                lastItem = len - 1;\n            if (len === 0) return resolve();\n            if (!hasDeleteHook) {\n                for (var i = 0; i < len; ++i) {\n                    var req = idbstore.delete(keysOrTuples[i]);\n                    req.onerror = wrap(eventRejectHandler(reject));\n                    if (i === lastItem) req.onsuccess = wrap(function () {\n                        return resolve();\n                    });\n                }\n            } else {\n                var hookCtx,\n                    errorHandler = hookedEventRejectHandler(reject),\n                    successHandler = hookedEventSuccessHandler(null);\n                tryCatch(function () {\n                    for (var i = 0; i < len; ++i) {\n                        hookCtx = { onsuccess: null, onerror: null };\n                        var tuple = keysOrTuples[i];\n                        deletingHook.call(hookCtx, tuple[0], tuple[1], trans);\n                        var req = idbstore.delete(tuple[0]);\n                        req._hookCtx = hookCtx;\n                        req.onerror = errorHandler;\n                        if (i === lastItem) req.onsuccess = hookedEventSuccessHandler(resolve);else req.onsuccess = successHandler;\n                    }\n                }, function (err) {\n                    hookCtx.onerror && hookCtx.onerror(err);\n                    throw err;\n                });\n            }\n        }).uncaught(dbUncaught);\n    }\n\n    derive(WriteableTable).from(Table).extend({\n        bulkDelete: function (keys$$1) {\n            if (this.hook.deleting.fire === nop) {\n                return this._idbstore(READWRITE, function (resolve, reject, idbstore, trans) {\n                    resolve(bulkDelete(idbstore, trans, keys$$1, false, nop));\n                });\n            } else {\n                return this.where(':id').anyOf(keys$$1).delete().then(function () {}); // Resolve with undefined.\n            }\n        },\n        bulkPut: function (objects, keys$$1) {\n            var _this = this;\n\n            return this._idbstore(READWRITE, function (resolve, reject, idbstore) {\n                if (!idbstore.keyPath && !_this.schema.primKey.auto && !keys$$1) throw new exceptions.InvalidArgument(\"bulkPut() with non-inbound keys requires keys array in second argument\");\n                if (idbstore.keyPath && keys$$1) throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n                if (keys$$1 && keys$$1.length !== objects.length) throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                if (objects.length === 0) return resolve(); // Caller provided empty list.\n                var done = function (result) {\n                    if (errorList.length === 0) resolve(result);else reject(new BulkError(_this.name + '.bulkPut(): ' + errorList.length + ' of ' + numObjs + ' operations failed', errorList));\n                };\n                var req,\n                    errorList = [],\n                    errorHandler,\n                    numObjs = objects.length,\n                    table = _this;\n                if (_this.hook.creating.fire === nop && _this.hook.updating.fire === nop) {\n                    //\n                    // Standard Bulk (no 'creating' or 'updating' hooks to care about)\n                    //\n                    errorHandler = BulkErrorHandlerCatchAll(errorList);\n                    for (var i = 0, l = objects.length; i < l; ++i) {\n                        req = keys$$1 ? idbstore.put(objects[i], keys$$1[i]) : idbstore.put(objects[i]);\n                        req.onerror = errorHandler;\n                    }\n                    // Only need to catch success or error on the last operation\n                    // according to the IDB spec.\n                    req.onerror = BulkErrorHandlerCatchAll(errorList, done);\n                    req.onsuccess = eventSuccessHandler(done);\n                } else {\n                    var effectiveKeys = keys$$1 || idbstore.keyPath && objects.map(function (o) {\n                        return getByKeyPath(o, idbstore.keyPath);\n                    });\n                    // Generate map of {[key]: object}\n                    var objectLookup = effectiveKeys && arrayToObject(effectiveKeys, function (key, i) {\n                        return key != null && [key, objects[i]];\n                    });\n                    var promise = !effectiveKeys ?\n\n                    // Auto-incremented key-less objects only without any keys argument.\n                    table.bulkAdd(objects) :\n\n                    // Keys provided. Either as inbound in provided objects, or as a keys argument.\n                    // Begin with updating those that exists in DB:\n                    table.where(':id').anyOf(effectiveKeys.filter(function (key) {\n                        return key != null;\n                    })).modify(function () {\n                        this.value = objectLookup[this.primKey];\n                        objectLookup[this.primKey] = null; // Mark as \"don't add this\"\n                    }).catch(ModifyError, function (e) {\n                        errorList = e.failures; // No need to concat here. These are the first errors added.\n                    }).then(function () {\n                        // Now, let's examine which items didnt exist so we can add them:\n                        var objsToAdd = [],\n                            keysToAdd = keys$$1 && [];\n                        // Iterate backwards. Why? Because if same key was used twice, just add the last one.\n                        for (var i = effectiveKeys.length - 1; i >= 0; --i) {\n                            var key = effectiveKeys[i];\n                            if (key == null || objectLookup[key]) {\n                                objsToAdd.push(objects[i]);\n                                keys$$1 && keysToAdd.push(key);\n                                if (key != null) objectLookup[key] = null; // Mark as \"dont add again\"\n                            }\n                        }\n                        // The items are in reverse order so reverse them before adding.\n                        // Could be important in order to get auto-incremented keys the way the caller\n                        // would expect. Could have used unshift instead of push()/reverse(),\n                        // but: http://jsperf.com/unshift-vs-reverse\n                        objsToAdd.reverse();\n                        keys$$1 && keysToAdd.reverse();\n                        return table.bulkAdd(objsToAdd, keysToAdd);\n                    }).then(function (lastAddedKey) {\n                        // Resolve with key of the last object in given arguments to bulkPut():\n                        var lastEffectiveKey = effectiveKeys[effectiveKeys.length - 1]; // Key was provided.\n                        return lastEffectiveKey != null ? lastEffectiveKey : lastAddedKey;\n                    });\n\n                    promise.then(done).catch(BulkError, function (e) {\n                        // Concat failure from ModifyError and reject using our 'done' method.\n                        errorList = errorList.concat(e.failures);\n                        done();\n                    }).catch(reject);\n                }\n            }, \"locked\"); // If called from transaction scope, lock transaction til all steps are done.\n        },\n        bulkAdd: function (objects, keys$$1) {\n            var self = this,\n                creatingHook = this.hook.creating.fire;\n            return this._idbstore(READWRITE, function (resolve, reject, idbstore, trans) {\n                if (!idbstore.keyPath && !self.schema.primKey.auto && !keys$$1) throw new exceptions.InvalidArgument(\"bulkAdd() with non-inbound keys requires keys array in second argument\");\n                if (idbstore.keyPath && keys$$1) throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n                if (keys$$1 && keys$$1.length !== objects.length) throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                if (objects.length === 0) return resolve(); // Caller provided empty list.\n                function done(result) {\n                    if (errorList.length === 0) resolve(result);else reject(new BulkError(self.name + '.bulkAdd(): ' + errorList.length + ' of ' + numObjs + ' operations failed', errorList));\n                }\n                var req,\n                    errorList = [],\n                    errorHandler,\n                    successHandler,\n                    numObjs = objects.length;\n                if (creatingHook !== nop) {\n                    //\n                    // There are subscribers to hook('creating')\n                    // Must behave as documented.\n                    //\n                    var keyPath = idbstore.keyPath,\n                        hookCtx;\n                    errorHandler = BulkErrorHandlerCatchAll(errorList, null, true);\n                    successHandler = hookedEventSuccessHandler(null);\n\n                    tryCatch(function () {\n                        for (var i = 0, l = objects.length; i < l; ++i) {\n                            hookCtx = { onerror: null, onsuccess: null };\n                            var key = keys$$1 && keys$$1[i];\n                            var obj = objects[i],\n                                effectiveKey = keys$$1 ? key : keyPath ? getByKeyPath(obj, keyPath) : undefined,\n                                keyToUse = creatingHook.call(hookCtx, effectiveKey, obj, trans);\n                            if (effectiveKey == null && keyToUse != null) {\n                                if (keyPath) {\n                                    obj = deepClone(obj);\n                                    setByKeyPath(obj, keyPath, keyToUse);\n                                } else {\n                                    key = keyToUse;\n                                }\n                            }\n                            req = key != null ? idbstore.add(obj, key) : idbstore.add(obj);\n                            req._hookCtx = hookCtx;\n                            if (i < l - 1) {\n                                req.onerror = errorHandler;\n                                if (hookCtx.onsuccess) req.onsuccess = successHandler;\n                            }\n                        }\n                    }, function (err) {\n                        hookCtx.onerror && hookCtx.onerror(err);\n                        throw err;\n                    });\n\n                    req.onerror = BulkErrorHandlerCatchAll(errorList, done, true);\n                    req.onsuccess = hookedEventSuccessHandler(done);\n                } else {\n                    //\n                    // Standard Bulk (no 'creating' hook to care about)\n                    //\n                    errorHandler = BulkErrorHandlerCatchAll(errorList);\n                    for (var i = 0, l = objects.length; i < l; ++i) {\n                        req = keys$$1 ? idbstore.add(objects[i], keys$$1[i]) : idbstore.add(objects[i]);\n                        req.onerror = errorHandler;\n                    }\n                    // Only need to catch success or error on the last operation\n                    // according to the IDB spec.\n                    req.onerror = BulkErrorHandlerCatchAll(errorList, done);\n                    req.onsuccess = eventSuccessHandler(done);\n                }\n            });\n        },\n        add: function (obj, key) {\n            /// <summary>\n            ///   Add an object to the database. In case an object with same primary key already exists, the object will not be added.\n            /// </summary>\n            /// <param name=\"obj\" type=\"Object\">A javascript object to insert</param>\n            /// <param name=\"key\" optional=\"true\">Primary key</param>\n            var creatingHook = this.hook.creating.fire;\n            return this._idbstore(READWRITE, function (resolve, reject, idbstore, trans) {\n                var hookCtx = { onsuccess: null, onerror: null };\n                if (creatingHook !== nop) {\n                    var effectiveKey = key != null ? key : idbstore.keyPath ? getByKeyPath(obj, idbstore.keyPath) : undefined;\n                    var keyToUse = creatingHook.call(hookCtx, effectiveKey, obj, trans); // Allow subscribers to when(\"creating\") to generate the key.\n                    if (effectiveKey == null && keyToUse != null) {\n                        // Using \"==\" and \"!=\" to check for either null or undefined!\n                        if (idbstore.keyPath) setByKeyPath(obj, idbstore.keyPath, keyToUse);else key = keyToUse;\n                    }\n                }\n                try {\n                    var req = key != null ? idbstore.add(obj, key) : idbstore.add(obj);\n                    req._hookCtx = hookCtx;\n                    req.onerror = hookedEventRejectHandler(reject);\n                    req.onsuccess = hookedEventSuccessHandler(function (result) {\n                        // TODO: Remove these two lines in next major release (2.0?)\n                        // It's no good practice to have side effects on provided parameters\n                        var keyPath = idbstore.keyPath;\n                        if (keyPath) setByKeyPath(obj, keyPath, result);\n                        resolve(result);\n                    });\n                } catch (e) {\n                    if (hookCtx.onerror) hookCtx.onerror(e);\n                    throw e;\n                }\n            });\n        },\n\n        put: function (obj, key) {\n            /// <summary>\n            ///   Add an object to the database but in case an object with same primary key alread exists, the existing one will get updated.\n            /// </summary>\n            /// <param name=\"obj\" type=\"Object\">A javascript object to insert or update</param>\n            /// <param name=\"key\" optional=\"true\">Primary key</param>\n            var self = this,\n                creatingHook = this.hook.creating.fire,\n                updatingHook = this.hook.updating.fire;\n            if (creatingHook !== nop || updatingHook !== nop) {\n                //\n                // People listens to when(\"creating\") or when(\"updating\") events!\n                // We must know whether the put operation results in an CREATE or UPDATE.\n                //\n                return this._trans(READWRITE, function (resolve, reject, trans) {\n                    // Since key is optional, make sure we get it from obj if not provided\n                    var effectiveKey = key !== undefined ? key : self.schema.primKey.keyPath && getByKeyPath(obj, self.schema.primKey.keyPath);\n                    if (effectiveKey == null) {\n                        // \"== null\" means checking for either null or undefined.\n                        // No primary key. Must use add().\n                        self.add(obj).then(resolve, reject);\n                    } else {\n                        // Primary key exist. Lock transaction and try modifying existing. If nothing modified, call add().\n                        trans._lock(); // Needed because operation is splitted into modify() and add().\n                        // clone obj before this async call. If caller modifies obj the line after put(), the IDB spec requires that it should not affect operation.\n                        obj = deepClone(obj);\n                        self.where(\":id\").equals(effectiveKey).modify(function () {\n                            // Replace extisting value with our object\n                            // CRUD event firing handled in WriteableCollection.modify()\n                            this.value = obj;\n                        }).then(function (count) {\n                            if (count === 0) {\n                                // Object's key was not found. Add the object instead.\n                                // CRUD event firing will be done in add()\n                                return self.add(obj, key); // Resolving with another Promise. Returned Promise will then resolve with the new key.\n                            } else {\n                                return effectiveKey; // Resolve with the provided key.\n                            }\n                        }).finally(function () {\n                            trans._unlock();\n                        }).then(resolve, reject);\n                    }\n                });\n            } else {\n                // Use the standard IDB put() method.\n                return this._idbstore(READWRITE, function (resolve, reject, idbstore) {\n                    var req = key !== undefined ? idbstore.put(obj, key) : idbstore.put(obj);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = function (ev) {\n                        var keyPath = idbstore.keyPath;\n                        if (keyPath) setByKeyPath(obj, keyPath, ev.target.result);\n                        resolve(req.result);\n                    };\n                });\n            }\n        },\n\n        'delete': function (key) {\n            /// <param name=\"key\">Primary key of the object to delete</param>\n            if (this.hook.deleting.subscribers.length) {\n                // People listens to when(\"deleting\") event. Must implement delete using WriteableCollection.delete() that will\n                // call the CRUD event. Only WriteableCollection.delete() will know whether an object was actually deleted.\n                return this.where(\":id\").equals(key).delete();\n            } else {\n                // No one listens. Use standard IDB delete() method.\n                return this._idbstore(READWRITE, function (resolve, reject, idbstore) {\n                    var req = idbstore.delete(key);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = function () {\n                        resolve(req.result);\n                    };\n                });\n            }\n        },\n\n        clear: function () {\n            if (this.hook.deleting.subscribers.length) {\n                // People listens to when(\"deleting\") event. Must implement delete using WriteableCollection.delete() that will\n                // call the CRUD event. Only WriteableCollection.delete() will knows which objects that are actually deleted.\n                return this.toCollection().delete();\n            } else {\n                return this._idbstore(READWRITE, function (resolve, reject, idbstore) {\n                    var req = idbstore.clear();\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = function () {\n                        resolve(req.result);\n                    };\n                });\n            }\n        },\n\n        update: function (keyOrObject, modifications) {\n            if (typeof modifications !== 'object' || isArray(modifications)) throw new exceptions.InvalidArgument(\"Modifications must be an object.\");\n            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n                // object to modify. Also modify given object with the modifications:\n                keys(modifications).forEach(function (keyPath) {\n                    setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                });\n                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n                if (key === undefined) return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"), dbUncaught);\n                return this.where(\":id\").equals(key).modify(modifications);\n            } else {\n                // key to modify\n                return this.where(\":id\").equals(keyOrObject).modify(modifications);\n            }\n        }\n    });\n\n    //\n    //\n    //\n    // Transaction Class\n    //\n    //\n    //\n    function Transaction(mode, storeNames, dbschema, parent) {\n        var _this2 = this;\n\n        /// <summary>\n        ///    Transaction class. Represents a database transaction. All operations on db goes through a Transaction.\n        /// </summary>\n        /// <param name=\"mode\" type=\"String\">Any of \"readwrite\" or \"readonly\"</param>\n        /// <param name=\"storeNames\" type=\"Array\">Array of table names to operate on</param>\n        this.db = db;\n        this.mode = mode;\n        this.storeNames = storeNames;\n        this.idbtrans = null;\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\n        this.parent = parent || null;\n        this.active = true;\n        this._tables = null;\n        this._reculock = 0;\n        this._blockedFuncs = [];\n        this._psd = null;\n        this._dbschema = dbschema;\n        this._resolve = null;\n        this._reject = null;\n        this._completion = new Promise(function (resolve, reject) {\n            _this2._resolve = resolve;\n            _this2._reject = reject;\n        }).uncaught(dbUncaught);\n\n        this._completion.then(function () {\n            _this2.on.complete.fire();\n        }, function (e) {\n            _this2.on.error.fire(e);\n            _this2.parent ? _this2.parent._reject(e) : _this2.active && _this2.idbtrans && _this2.idbtrans.abort();\n            _this2.active = false;\n            return rejection(e); // Indicate we actually DO NOT catch this error.\n        });\n    }\n\n    props(Transaction.prototype, {\n        //\n        // Transaction Protected Methods (not required by API users, but needed internally and eventually by dexie extensions)\n        //\n        _lock: function () {\n            assert(!PSD.global); // Locking and unlocking reuires to be within a PSD scope.\n            // Temporary set all requests into a pending queue if they are called before database is ready.\n            ++this._reculock; // Recursive read/write lock pattern using PSD (Promise Specific Data) instead of TLS (Thread Local Storage)\n            if (this._reculock === 1 && !PSD.global) PSD.lockOwnerFor = this;\n            return this;\n        },\n        _unlock: function () {\n            assert(!PSD.global); // Locking and unlocking reuires to be within a PSD scope.\n            if (--this._reculock === 0) {\n                if (!PSD.global) PSD.lockOwnerFor = null;\n                while (this._blockedFuncs.length > 0 && !this._locked()) {\n                    var fnAndPSD = this._blockedFuncs.shift();\n                    try {\n                        usePSD(fnAndPSD[1], fnAndPSD[0]);\n                    } catch (e) {}\n                }\n            }\n            return this;\n        },\n        _locked: function () {\n            // Checks if any write-lock is applied on this transaction.\n            // To simplify the Dexie API for extension implementations, we support recursive locks.\n            // This is accomplished by using \"Promise Specific Data\" (PSD).\n            // PSD data is bound to a Promise and any child Promise emitted through then() or resolve( new Promise() ).\n            // PSD is local to code executing on top of the call stacks of any of any code executed by Promise():\n            //         * callback given to the Promise() constructor  (function (resolve, reject){...})\n            //         * callbacks given to then()/catch()/finally() methods (function (value){...})\n            // If creating a new independant Promise instance from within a Promise call stack, the new Promise will derive the PSD from the call stack of the parent Promise.\n            // Derivation is done so that the inner PSD __proto__ points to the outer PSD.\n            // PSD.lockOwnerFor will point to current transaction object if the currently executing PSD scope owns the lock.\n            return this._reculock && PSD.lockOwnerFor !== this;\n        },\n        create: function (idbtrans) {\n            var _this3 = this;\n\n            assert(!this.idbtrans);\n            if (!idbtrans && !idbdb) {\n                switch (dbOpenError && dbOpenError.name) {\n                    case \"DatabaseClosedError\":\n                        // Errors where it is no difference whether it was caused by the user operation or an earlier call to db.open()\n                        throw new exceptions.DatabaseClosed(dbOpenError);\n                    case \"MissingAPIError\":\n                        // Errors where it is no difference whether it was caused by the user operation or an earlier call to db.open()\n                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                    default:\n                        // Make it clear that the user operation was not what caused the error - the error had occurred earlier on db.open()!\n                        throw new exceptions.OpenFailed(dbOpenError);\n                }\n            }\n            if (!this.active) throw new exceptions.TransactionInactive();\n            assert(this._completion._state === null);\n\n            idbtrans = this.idbtrans = idbtrans || idbdb.transaction(safariMultiStoreFix(this.storeNames), this.mode);\n            idbtrans.onerror = wrap(function (ev) {\n                preventDefault(ev); // Prohibit default bubbling to window.error\n                _this3._reject(idbtrans.error);\n            });\n            idbtrans.onabort = wrap(function (ev) {\n                preventDefault(ev);\n                _this3.active && _this3._reject(new exceptions.Abort());\n                _this3.active = false;\n                _this3.on(\"abort\").fire(ev);\n            });\n            idbtrans.oncomplete = wrap(function () {\n                _this3.active = false;\n                _this3._resolve();\n            });\n            return this;\n        },\n        _promise: function (mode, fn, bWriteLock) {\n            var self = this;\n            var p = self._locked() ?\n            // Read lock always. Transaction is write-locked. Wait for mutex.\n            new Promise(function (resolve, reject) {\n                self._blockedFuncs.push([function () {\n                    self._promise(mode, fn, bWriteLock).then(resolve, reject);\n                }, PSD]);\n            }) : newScope(function () {\n                var p_ = self.active ? new Promise(function (resolve, reject) {\n                    if (mode === READWRITE && self.mode !== READWRITE) throw new exceptions.ReadOnly(\"Transaction is readonly\");\n                    if (!self.idbtrans && mode) self.create();\n                    if (bWriteLock) self._lock(); // Write lock if write operation is requested\n                    fn(resolve, reject, self);\n                }) : rejection(new exceptions.TransactionInactive());\n                if (self.active && bWriteLock) p_.finally(function () {\n                    self._unlock();\n                });\n                return p_;\n            });\n\n            p._lib = true;\n            return p.uncaught(dbUncaught);\n        },\n\n        //\n        // Transaction Public Properties and Methods\n        //\n        abort: function () {\n            this.active && this._reject(new exceptions.Abort());\n            this.active = false;\n        },\n\n        tables: {\n            get: deprecated(\"Transaction.tables\", function () {\n                return arrayToObject(this.storeNames, function (name) {\n                    return [name, allTables[name]];\n                });\n            }, \"Use db.tables()\")\n        },\n\n        complete: deprecated(\"Transaction.complete()\", function (cb) {\n            return this.on(\"complete\", cb);\n        }),\n\n        error: deprecated(\"Transaction.error()\", function (cb) {\n            return this.on(\"error\", cb);\n        }),\n\n        table: deprecated(\"Transaction.table()\", function (name) {\n            if (this.storeNames.indexOf(name) === -1) throw new exceptions.InvalidTable(\"Table \" + name + \" not in transaction\");\n            return allTables[name];\n        })\n\n    });\n\n    //\n    //\n    //\n    // WhereClause\n    //\n    //\n    //\n    function WhereClause(table, index, orCollection) {\n        /// <param name=\"table\" type=\"Table\"></param>\n        /// <param name=\"index\" type=\"String\" optional=\"true\"></param>\n        /// <param name=\"orCollection\" type=\"Collection\" optional=\"true\"></param>\n        this._ctx = {\n            table: table,\n            index: index === \":id\" ? null : index,\n            collClass: table._collClass,\n            or: orCollection\n        };\n    }\n\n    props(WhereClause.prototype, function () {\n\n        // WhereClause private methods\n\n        function fail(collectionOrWhereClause, err, T) {\n            var collection = collectionOrWhereClause instanceof WhereClause ? new collectionOrWhereClause._ctx.collClass(collectionOrWhereClause) : collectionOrWhereClause;\n\n            collection._ctx.error = T ? new T(err) : new TypeError(err);\n            return collection;\n        }\n\n        function emptyCollection(whereClause) {\n            return new whereClause._ctx.collClass(whereClause, function () {\n                return IDBKeyRange.only(\"\");\n            }).limit(0);\n        }\n\n        function upperFactory(dir) {\n            return dir === \"next\" ? function (s) {\n                return s.toUpperCase();\n            } : function (s) {\n                return s.toLowerCase();\n            };\n        }\n        function lowerFactory(dir) {\n            return dir === \"next\" ? function (s) {\n                return s.toLowerCase();\n            } : function (s) {\n                return s.toUpperCase();\n            };\n        }\n        function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n            var length = Math.min(key.length, lowerNeedle.length);\n            var llp = -1;\n            for (var i = 0; i < length; ++i) {\n                var lwrKeyChar = lowerKey[i];\n                if (lwrKeyChar !== lowerNeedle[i]) {\n                    if (cmp(key[i], upperNeedle[i]) < 0) return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n                    if (cmp(key[i], lowerNeedle[i]) < 0) return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n                    if (llp >= 0) return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n                    return null;\n                }\n                if (cmp(key[i], lwrKeyChar) < 0) llp = i;\n            }\n            if (length < lowerNeedle.length && dir === \"next\") return key + upperNeedle.substr(key.length);\n            if (length < key.length && dir === \"prev\") return key.substr(0, upperNeedle.length);\n            return llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1);\n        }\n\n        function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n            /// <param name=\"needles\" type=\"Array\" elementType=\"String\"></param>\n            var upper,\n                lower,\n                compare,\n                upperNeedles,\n                lowerNeedles,\n                direction,\n                nextKeySuffix,\n                needlesLen = needles.length;\n            if (!needles.every(function (s) {\n                return typeof s === 'string';\n            })) {\n                return fail(whereClause, STRING_EXPECTED);\n            }\n            function initDirection(dir) {\n                upper = upperFactory(dir);\n                lower = lowerFactory(dir);\n                compare = dir === \"next\" ? simpleCompare : simpleCompareReverse;\n                var needleBounds = needles.map(function (needle) {\n                    return { lower: lower(needle), upper: upper(needle) };\n                }).sort(function (a, b) {\n                    return compare(a.lower, b.lower);\n                });\n                upperNeedles = needleBounds.map(function (nb) {\n                    return nb.upper;\n                });\n                lowerNeedles = needleBounds.map(function (nb) {\n                    return nb.lower;\n                });\n                direction = dir;\n                nextKeySuffix = dir === \"next\" ? \"\" : suffix;\n            }\n            initDirection(\"next\");\n\n            var c = new whereClause._ctx.collClass(whereClause, function () {\n                return IDBKeyRange.bound(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix);\n            });\n\n            c._ondirectionchange = function (direction) {\n                // This event onlys occur before filter is called the first time.\n                initDirection(direction);\n            };\n\n            var firstPossibleNeedle = 0;\n\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                /// <param name=\"cursor\" type=\"IDBCursor\"></param>\n                /// <param name=\"advance\" type=\"Function\"></param>\n                /// <param name=\"resolve\" type=\"Function\"></param>\n                var key = cursor.key;\n                if (typeof key !== 'string') return false;\n                var lowerKey = lower(key);\n                if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n                    return true;\n                } else {\n                    var lowestPossibleCasing = null;\n                    for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                        var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                        if (casing === null && lowestPossibleCasing === null) firstPossibleNeedle = i + 1;else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                            lowestPossibleCasing = casing;\n                        }\n                    }\n                    if (lowestPossibleCasing !== null) {\n                        advance(function () {\n                            cursor.continue(lowestPossibleCasing + nextKeySuffix);\n                        });\n                    } else {\n                        advance(resolve);\n                    }\n                    return false;\n                }\n            });\n            return c;\n        }\n\n        //\n        // WhereClause public methods\n        //\n        return {\n            between: function (lower, upper, includeLower, includeUpper) {\n                /// <summary>\n                ///     Filter out records whose where-field lays between given lower and upper values. Applies to Strings, Numbers and Dates.\n                /// </summary>\n                /// <param name=\"lower\"></param>\n                /// <param name=\"upper\"></param>\n                /// <param name=\"includeLower\" optional=\"true\">Whether items that equals lower should be included. Default true.</param>\n                /// <param name=\"includeUpper\" optional=\"true\">Whether items that equals upper should be included. Default false.</param>\n                /// <returns type=\"Collection\"></returns>\n                includeLower = includeLower !== false; // Default to true\n                includeUpper = includeUpper === true; // Default to false\n                try {\n                    if (cmp(lower, upper) > 0 || cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)) return emptyCollection(this); // Workaround for idiotic W3C Specification that DataError must be thrown if lower > upper. The natural result would be to return an empty collection.\n                    return new this._ctx.collClass(this, function () {\n                        return IDBKeyRange.bound(lower, upper, !includeLower, !includeUpper);\n                    });\n                } catch (e) {\n                    return fail(this, INVALID_KEY_ARGUMENT);\n                }\n            },\n            equals: function (value) {\n                return new this._ctx.collClass(this, function () {\n                    return IDBKeyRange.only(value);\n                });\n            },\n            above: function (value) {\n                return new this._ctx.collClass(this, function () {\n                    return IDBKeyRange.lowerBound(value, true);\n                });\n            },\n            aboveOrEqual: function (value) {\n                return new this._ctx.collClass(this, function () {\n                    return IDBKeyRange.lowerBound(value);\n                });\n            },\n            below: function (value) {\n                return new this._ctx.collClass(this, function () {\n                    return IDBKeyRange.upperBound(value, true);\n                });\n            },\n            belowOrEqual: function (value) {\n                return new this._ctx.collClass(this, function () {\n                    return IDBKeyRange.upperBound(value);\n                });\n            },\n            startsWith: function (str) {\n                /// <param name=\"str\" type=\"String\"></param>\n                if (typeof str !== 'string') return fail(this, STRING_EXPECTED);\n                return this.between(str, str + maxString, true, true);\n            },\n            startsWithIgnoreCase: function (str) {\n                /// <param name=\"str\" type=\"String\"></param>\n                if (str === \"\") return this.startsWith(str);\n                return addIgnoreCaseAlgorithm(this, function (x, a) {\n                    return x.indexOf(a[0]) === 0;\n                }, [str], maxString);\n            },\n            equalsIgnoreCase: function (str) {\n                /// <param name=\"str\" type=\"String\"></param>\n                return addIgnoreCaseAlgorithm(this, function (x, a) {\n                    return x === a[0];\n                }, [str], \"\");\n            },\n            anyOfIgnoreCase: function () {\n                var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n                if (set.length === 0) return emptyCollection(this);\n                return addIgnoreCaseAlgorithm(this, function (x, a) {\n                    return a.indexOf(x) !== -1;\n                }, set, \"\");\n            },\n            startsWithAnyOfIgnoreCase: function () {\n                var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n                if (set.length === 0) return emptyCollection(this);\n                return addIgnoreCaseAlgorithm(this, function (x, a) {\n                    return a.some(function (n) {\n                        return x.indexOf(n) === 0;\n                    });\n                }, set, maxString);\n            },\n            anyOf: function () {\n                var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n                var compare = ascending;\n                try {\n                    set.sort(compare);\n                } catch (e) {\n                    return fail(this, INVALID_KEY_ARGUMENT);\n                }\n                if (set.length === 0) return emptyCollection(this);\n                var c = new this._ctx.collClass(this, function () {\n                    return IDBKeyRange.bound(set[0], set[set.length - 1]);\n                });\n\n                c._ondirectionchange = function (direction) {\n                    compare = direction === \"next\" ? ascending : descending;\n                    set.sort(compare);\n                };\n                var i = 0;\n                c._addAlgorithm(function (cursor, advance, resolve) {\n                    var key = cursor.key;\n                    while (compare(key, set[i]) > 0) {\n                        // The cursor has passed beyond this key. Check next.\n                        ++i;\n                        if (i === set.length) {\n                            // There is no next. Stop searching.\n                            advance(resolve);\n                            return false;\n                        }\n                    }\n                    if (compare(key, set[i]) === 0) {\n                        // The current cursor value should be included and we should continue a single step in case next item has the same key or possibly our next key in set.\n                        return true;\n                    } else {\n                        // cursor.key not yet at set[i]. Forward cursor to the next key to hunt for.\n                        advance(function () {\n                            cursor.continue(set[i]);\n                        });\n                        return false;\n                    }\n                });\n                return c;\n            },\n\n            notEqual: function (value) {\n                return this.inAnyRange([[-Infinity, value], [value, maxKey]], { includeLowers: false, includeUppers: false });\n            },\n\n            noneOf: function () {\n                var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n                if (set.length === 0) return new this._ctx.collClass(this); // Return entire collection.\n                try {\n                    set.sort(ascending);\n                } catch (e) {\n                    return fail(this, INVALID_KEY_ARGUMENT);\n                }\n                // Transform [\"a\",\"b\",\"c\"] to a set of ranges for between/above/below: [[-Infinity,\"a\"], [\"a\",\"b\"], [\"b\",\"c\"], [\"c\",maxKey]]\n                var ranges = set.reduce(function (res, val) {\n                    return res ? res.concat([[res[res.length - 1][1], val]]) : [[-Infinity, val]];\n                }, null);\n                ranges.push([set[set.length - 1], maxKey]);\n                return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n            },\n\n            /** Filter out values withing given set of ranges.\r\n            * Example, give children and elders a rebate of 50%:\r\n            *\r\n            *   db.friends.where('age').inAnyRange([[0,18],[65,Infinity]]).modify({Rebate: 1/2});\r\n            *\r\n            * @param {(string|number|Date|Array)[][]} ranges\r\n            * @param {{includeLowers: boolean, includeUppers: boolean}} options\r\n            */\n            inAnyRange: function (ranges, options) {\n                var ctx = this._ctx;\n                if (ranges.length === 0) return emptyCollection(this);\n                if (!ranges.every(function (range) {\n                    return range[0] !== undefined && range[1] !== undefined && ascending(range[0], range[1]) <= 0;\n                })) {\n                    return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n                }\n                var includeLowers = !options || options.includeLowers !== false; // Default to true\n                var includeUppers = options && options.includeUppers === true; // Default to false\n\n                function addRange(ranges, newRange) {\n                    for (var i = 0, l = ranges.length; i < l; ++i) {\n                        var range = ranges[i];\n                        if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                            range[0] = min(range[0], newRange[0]);\n                            range[1] = max(range[1], newRange[1]);\n                            break;\n                        }\n                    }\n                    if (i === l) ranges.push(newRange);\n                    return ranges;\n                }\n\n                var sortDirection = ascending;\n                function rangeSorter(a, b) {\n                    return sortDirection(a[0], b[0]);\n                }\n\n                // Join overlapping ranges\n                var set;\n                try {\n                    set = ranges.reduce(addRange, []);\n                    set.sort(rangeSorter);\n                } catch (ex) {\n                    return fail(this, INVALID_KEY_ARGUMENT);\n                }\n\n                var i = 0;\n                var keyIsBeyondCurrentEntry = includeUppers ? function (key) {\n                    return ascending(key, set[i][1]) > 0;\n                } : function (key) {\n                    return ascending(key, set[i][1]) >= 0;\n                };\n\n                var keyIsBeforeCurrentEntry = includeLowers ? function (key) {\n                    return descending(key, set[i][0]) > 0;\n                } : function (key) {\n                    return descending(key, set[i][0]) >= 0;\n                };\n\n                function keyWithinCurrentRange(key) {\n                    return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n                }\n\n                var checkKey = keyIsBeyondCurrentEntry;\n\n                var c = new ctx.collClass(this, function () {\n                    return IDBKeyRange.bound(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers);\n                });\n\n                c._ondirectionchange = function (direction) {\n                    if (direction === \"next\") {\n                        checkKey = keyIsBeyondCurrentEntry;\n                        sortDirection = ascending;\n                    } else {\n                        checkKey = keyIsBeforeCurrentEntry;\n                        sortDirection = descending;\n                    }\n                    set.sort(rangeSorter);\n                };\n\n                c._addAlgorithm(function (cursor, advance, resolve) {\n                    var key = cursor.key;\n                    while (checkKey(key)) {\n                        // The cursor has passed beyond this key. Check next.\n                        ++i;\n                        if (i === set.length) {\n                            // There is no next. Stop searching.\n                            advance(resolve);\n                            return false;\n                        }\n                    }\n                    if (keyWithinCurrentRange(key)) {\n                        // The current cursor value should be included and we should continue a single step in case next item has the same key or possibly our next key in set.\n                        return true;\n                    } else if (cmp(key, set[i][1]) === 0 || cmp(key, set[i][0]) === 0) {\n                        // includeUpper or includeLower is false so keyWithinCurrentRange() returns false even though we are at range border.\n                        // Continue to next key but don't include this one.\n                        return false;\n                    } else {\n                        // cursor.key not yet at set[i]. Forward cursor to the next key to hunt for.\n                        advance(function () {\n                            if (sortDirection === ascending) cursor.continue(set[i][0]);else cursor.continue(set[i][1]);\n                        });\n                        return false;\n                    }\n                });\n                return c;\n            },\n            startsWithAnyOf: function () {\n                var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n\n                if (!set.every(function (s) {\n                    return typeof s === 'string';\n                })) {\n                    return fail(this, \"startsWithAnyOf() only works with strings\");\n                }\n                if (set.length === 0) return emptyCollection(this);\n\n                return this.inAnyRange(set.map(function (str) {\n                    return [str, str + maxString];\n                }));\n            }\n        };\n    });\n\n    //\n    //\n    //\n    // Collection Class\n    //\n    //\n    //\n    function Collection(whereClause, keyRangeGenerator) {\n        /// <summary>\n        ///\n        /// </summary>\n        /// <param name=\"whereClause\" type=\"WhereClause\">Where clause instance</param>\n        /// <param name=\"keyRangeGenerator\" value=\"function(){ return IDBKeyRange.bound(0,1);}\" optional=\"true\"></param>\n        var keyRange = null,\n            error = null;\n        if (keyRangeGenerator) try {\n            keyRange = keyRangeGenerator();\n        } catch (ex) {\n            error = ex;\n        }\n\n        var whereCtx = whereClause._ctx,\n            table = whereCtx.table;\n        this._ctx = {\n            table: table,\n            index: whereCtx.index,\n            isPrimKey: !whereCtx.index || table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name,\n            range: keyRange,\n            keysOnly: false,\n            dir: \"next\",\n            unique: \"\",\n            algorithm: null,\n            filter: null,\n            replayFilter: null,\n            justLimit: true, // True if a replayFilter is just a filter that performs a \"limit\" operation (or none at all)\n            isMatch: null,\n            offset: 0,\n            limit: Infinity,\n            error: error, // If set, any promise must be rejected with this error\n            or: whereCtx.or,\n            valueMapper: table.hook.reading.fire\n        };\n    }\n\n    function isPlainKeyRange(ctx, ignoreLimitFilter) {\n        return !(ctx.filter || ctx.algorithm || ctx.or) && (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n    }\n\n    props(Collection.prototype, function () {\n\n        //\n        // Collection Private Functions\n        //\n\n        function addFilter(ctx, fn) {\n            ctx.filter = combine(ctx.filter, fn);\n        }\n\n        function addReplayFilter(ctx, factory, isLimitFilter) {\n            var curr = ctx.replayFilter;\n            ctx.replayFilter = curr ? function () {\n                return combine(curr(), factory());\n            } : factory;\n            ctx.justLimit = isLimitFilter && !curr;\n        }\n\n        function addMatchFilter(ctx, fn) {\n            ctx.isMatch = combine(ctx.isMatch, fn);\n        }\n\n        /** @param ctx {\r\n         *      isPrimKey: boolean,\r\n         *      table: Table,\r\n         *      index: string\r\n         * }\r\n         * @param store IDBObjectStore\r\n         **/\n        function getIndexOrStore(ctx, store) {\n            if (ctx.isPrimKey) return store;\n            var indexSpec = ctx.table.schema.idxByName[ctx.index];\n            if (!indexSpec) throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + store.name + \" is not indexed\");\n            return store.index(indexSpec.name);\n        }\n\n        /** @param ctx {\r\n         *      isPrimKey: boolean,\r\n         *      table: Table,\r\n         *      index: string,\r\n         *      keysOnly: boolean,\r\n         *      range?: IDBKeyRange,\r\n         *      dir: \"next\" | \"prev\"\r\n         * }\r\n         */\n        function openCursor(ctx, store) {\n            var idxOrStore = getIndexOrStore(ctx, store);\n            return ctx.keysOnly && 'openKeyCursor' in idxOrStore ? idxOrStore.openKeyCursor(ctx.range || null, ctx.dir + ctx.unique) : idxOrStore.openCursor(ctx.range || null, ctx.dir + ctx.unique);\n        }\n\n        function iter(ctx, fn, resolve, reject, idbstore) {\n            var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n            if (!ctx.or) {\n                iterate(openCursor(ctx, idbstore), combine(ctx.algorithm, filter), fn, resolve, reject, !ctx.keysOnly && ctx.valueMapper);\n            } else (function () {\n                var set = {};\n                var resolved = 0;\n\n                function resolveboth() {\n                    if (++resolved === 2) resolve(); // Seems like we just support or btwn max 2 expressions, but there are no limit because we do recursion.\n                }\n\n                function union(item, cursor, advance) {\n                    if (!filter || filter(cursor, advance, resolveboth, reject)) {\n                        var key = cursor.primaryKey.toString(); // Converts any Date to String, String to String, Number to String and Array to comma-separated string\n                        if (!hasOwn(set, key)) {\n                            set[key] = true;\n                            fn(item, cursor, advance);\n                        }\n                    }\n                }\n\n                ctx.or._iterate(union, resolveboth, reject, idbstore);\n                iterate(openCursor(ctx, idbstore), ctx.algorithm, union, resolveboth, reject, !ctx.keysOnly && ctx.valueMapper);\n            })();\n        }\n        function getInstanceTemplate(ctx) {\n            return ctx.table.schema.instanceTemplate;\n        }\n\n        return {\n\n            //\n            // Collection Protected Functions\n            //\n\n            _read: function (fn, cb) {\n                var ctx = this._ctx;\n                if (ctx.error) return ctx.table._trans(null, function rejector(resolve, reject) {\n                    reject(ctx.error);\n                });else return ctx.table._idbstore(READONLY, fn).then(cb);\n            },\n            _write: function (fn) {\n                var ctx = this._ctx;\n                if (ctx.error) return ctx.table._trans(null, function rejector(resolve, reject) {\n                    reject(ctx.error);\n                });else return ctx.table._idbstore(READWRITE, fn, \"locked\"); // When doing write operations on collections, always lock the operation so that upcoming operations gets queued.\n            },\n            _addAlgorithm: function (fn) {\n                var ctx = this._ctx;\n                ctx.algorithm = combine(ctx.algorithm, fn);\n            },\n\n            _iterate: function (fn, resolve, reject, idbstore) {\n                return iter(this._ctx, fn, resolve, reject, idbstore);\n            },\n\n            clone: function (props$$1) {\n                var rv = Object.create(this.constructor.prototype),\n                    ctx = Object.create(this._ctx);\n                if (props$$1) extend(ctx, props$$1);\n                rv._ctx = ctx;\n                return rv;\n            },\n\n            raw: function () {\n                this._ctx.valueMapper = null;\n                return this;\n            },\n\n            //\n            // Collection Public methods\n            //\n\n            each: function (fn) {\n                var ctx = this._ctx;\n\n                if (fake) {\n                    var item = getInstanceTemplate(ctx),\n                        primKeyPath = ctx.table.schema.primKey.keyPath,\n                        key = getByKeyPath(item, ctx.index ? ctx.table.schema.idxByName[ctx.index].keyPath : primKeyPath),\n                        primaryKey = getByKeyPath(item, primKeyPath);\n                    fn(item, { key: key, primaryKey: primaryKey });\n                }\n\n                return this._read(function (resolve, reject, idbstore) {\n                    iter(ctx, fn, resolve, reject, idbstore);\n                });\n            },\n\n            count: function (cb) {\n                if (fake) return Promise.resolve(0).then(cb);\n                var ctx = this._ctx;\n\n                if (isPlainKeyRange(ctx, true)) {\n                    // This is a plain key range. We can use the count() method if the index.\n                    return this._read(function (resolve, reject, idbstore) {\n                        var idx = getIndexOrStore(ctx, idbstore);\n                        var req = ctx.range ? idx.count(ctx.range) : idx.count();\n                        req.onerror = eventRejectHandler(reject);\n                        req.onsuccess = function (e) {\n                            resolve(Math.min(e.target.result, ctx.limit));\n                        };\n                    }, cb);\n                } else {\n                    // Algorithms, filters or expressions are applied. Need to count manually.\n                    var count = 0;\n                    return this._read(function (resolve, reject, idbstore) {\n                        iter(ctx, function () {\n                            ++count;return false;\n                        }, function () {\n                            resolve(count);\n                        }, reject, idbstore);\n                    }, cb);\n                }\n            },\n\n            sortBy: function (keyPath, cb) {\n                /// <param name=\"keyPath\" type=\"String\"></param>\n                var parts = keyPath.split('.').reverse(),\n                    lastPart = parts[0],\n                    lastIndex = parts.length - 1;\n                function getval(obj, i) {\n                    if (i) return getval(obj[parts[i]], i - 1);\n                    return obj[lastPart];\n                }\n                var order = this._ctx.dir === \"next\" ? 1 : -1;\n\n                function sorter(a, b) {\n                    var aVal = getval(a, lastIndex),\n                        bVal = getval(b, lastIndex);\n                    return aVal < bVal ? -order : aVal > bVal ? order : 0;\n                }\n                return this.toArray(function (a) {\n                    return a.sort(sorter);\n                }).then(cb);\n            },\n\n            toArray: function (cb) {\n                var ctx = this._ctx;\n                return this._read(function (resolve, reject, idbstore) {\n                    fake && resolve([getInstanceTemplate(ctx)]);\n                    if (hasGetAll && ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                        // Special optimation if we could use IDBObjectStore.getAll() or\n                        // IDBKeyRange.getAll():\n                        var readingHook = ctx.table.hook.reading.fire;\n                        var idxOrStore = getIndexOrStore(ctx, idbstore);\n                        var req = ctx.limit < Infinity ? idxOrStore.getAll(ctx.range, ctx.limit) : idxOrStore.getAll(ctx.range);\n                        req.onerror = eventRejectHandler(reject);\n                        req.onsuccess = readingHook === mirror ? eventSuccessHandler(resolve) : wrap(eventSuccessHandler(function (res) {\n                            try {\n                                resolve(res.map(readingHook));\n                            } catch (e) {\n                                reject(e);\n                            }\n                        }));\n                    } else {\n                        // Getting array through a cursor.\n                        var a = [];\n                        iter(ctx, function (item) {\n                            a.push(item);\n                        }, function arrayComplete() {\n                            resolve(a);\n                        }, reject, idbstore);\n                    }\n                }, cb);\n            },\n\n            offset: function (offset) {\n                var ctx = this._ctx;\n                if (offset <= 0) return this;\n                ctx.offset += offset; // For count()\n                if (isPlainKeyRange(ctx)) {\n                    addReplayFilter(ctx, function () {\n                        var offsetLeft = offset;\n                        return function (cursor, advance) {\n                            if (offsetLeft === 0) return true;\n                            if (offsetLeft === 1) {\n                                --offsetLeft;return false;\n                            }\n                            advance(function () {\n                                cursor.advance(offsetLeft);\n                                offsetLeft = 0;\n                            });\n                            return false;\n                        };\n                    });\n                } else {\n                    addReplayFilter(ctx, function () {\n                        var offsetLeft = offset;\n                        return function () {\n                            return --offsetLeft < 0;\n                        };\n                    });\n                }\n                return this;\n            },\n\n            limit: function (numRows) {\n                this._ctx.limit = Math.min(this._ctx.limit, numRows); // For count()\n                addReplayFilter(this._ctx, function () {\n                    var rowsLeft = numRows;\n                    return function (cursor, advance, resolve) {\n                        if (--rowsLeft <= 0) advance(resolve); // Stop after this item has been included\n                        return rowsLeft >= 0; // If numRows is already below 0, return false because then 0 was passed to numRows initially. Otherwise we wouldnt come here.\n                    };\n                }, true);\n                return this;\n            },\n\n            until: function (filterFunction, bIncludeStopEntry) {\n                var ctx = this._ctx;\n                fake && filterFunction(getInstanceTemplate(ctx));\n                addFilter(this._ctx, function (cursor, advance, resolve) {\n                    if (filterFunction(cursor.value)) {\n                        advance(resolve);\n                        return bIncludeStopEntry;\n                    } else {\n                        return true;\n                    }\n                });\n                return this;\n            },\n\n            first: function (cb) {\n                return this.limit(1).toArray(function (a) {\n                    return a[0];\n                }).then(cb);\n            },\n\n            last: function (cb) {\n                return this.reverse().first(cb);\n            },\n\n            filter: function (filterFunction) {\n                /// <param name=\"jsFunctionFilter\" type=\"Function\">function(val){return true/false}</param>\n                fake && filterFunction(getInstanceTemplate(this._ctx));\n                addFilter(this._ctx, function (cursor) {\n                    return filterFunction(cursor.value);\n                });\n                // match filters not used in Dexie.js but can be used by 3rd part libraries to test a\n                // collection for a match without querying DB. Used by Dexie.Observable.\n                addMatchFilter(this._ctx, filterFunction);\n                return this;\n            },\n\n            and: function (filterFunction) {\n                return this.filter(filterFunction);\n            },\n\n            or: function (indexName) {\n                return new WhereClause(this._ctx.table, indexName, this);\n            },\n\n            reverse: function () {\n                this._ctx.dir = this._ctx.dir === \"prev\" ? \"next\" : \"prev\";\n                if (this._ondirectionchange) this._ondirectionchange(this._ctx.dir);\n                return this;\n            },\n\n            desc: function () {\n                return this.reverse();\n            },\n\n            eachKey: function (cb) {\n                var ctx = this._ctx;\n                ctx.keysOnly = !ctx.isMatch;\n                return this.each(function (val, cursor) {\n                    cb(cursor.key, cursor);\n                });\n            },\n\n            eachUniqueKey: function (cb) {\n                this._ctx.unique = \"unique\";\n                return this.eachKey(cb);\n            },\n\n            eachPrimaryKey: function (cb) {\n                var ctx = this._ctx;\n                ctx.keysOnly = !ctx.isMatch;\n                return this.each(function (val, cursor) {\n                    cb(cursor.primaryKey, cursor);\n                });\n            },\n\n            keys: function (cb) {\n                var ctx = this._ctx;\n                ctx.keysOnly = !ctx.isMatch;\n                var a = [];\n                return this.each(function (item, cursor) {\n                    a.push(cursor.key);\n                }).then(function () {\n                    return a;\n                }).then(cb);\n            },\n\n            primaryKeys: function (cb) {\n                var ctx = this._ctx;\n                if (hasGetAll && ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                    // Special optimation if we could use IDBObjectStore.getAllKeys() or\n                    // IDBKeyRange.getAllKeys():\n                    return this._read(function (resolve, reject, idbstore) {\n                        var idxOrStore = getIndexOrStore(ctx, idbstore);\n                        var req = ctx.limit < Infinity ? idxOrStore.getAllKeys(ctx.range, ctx.limit) : idxOrStore.getAllKeys(ctx.range);\n                        req.onerror = eventRejectHandler(reject);\n                        req.onsuccess = eventSuccessHandler(resolve);\n                    }).then(cb);\n                }\n                ctx.keysOnly = !ctx.isMatch;\n                var a = [];\n                return this.each(function (item, cursor) {\n                    a.push(cursor.primaryKey);\n                }).then(function () {\n                    return a;\n                }).then(cb);\n            },\n\n            uniqueKeys: function (cb) {\n                this._ctx.unique = \"unique\";\n                return this.keys(cb);\n            },\n\n            firstKey: function (cb) {\n                return this.limit(1).keys(function (a) {\n                    return a[0];\n                }).then(cb);\n            },\n\n            lastKey: function (cb) {\n                return this.reverse().firstKey(cb);\n            },\n\n            distinct: function () {\n                var ctx = this._ctx,\n                    idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n                if (!idx || !idx.multi) return this; // distinct() only makes differencies on multiEntry indexes.\n                var set = {};\n                addFilter(this._ctx, function (cursor) {\n                    var strKey = cursor.primaryKey.toString(); // Converts any Date to String, String to String, Number to String and Array to comma-separated string\n                    var found = hasOwn(set, strKey);\n                    set[strKey] = true;\n                    return !found;\n                });\n                return this;\n            }\n        };\n    });\n\n    //\n    //\n    // WriteableCollection Class\n    //\n    //\n    function WriteableCollection() {\n        Collection.apply(this, arguments);\n    }\n\n    derive(WriteableCollection).from(Collection).extend({\n\n        //\n        // WriteableCollection Public Methods\n        //\n\n        modify: function (changes) {\n            var self = this,\n                ctx = this._ctx,\n                hook = ctx.table.hook,\n                updatingHook = hook.updating.fire,\n                deletingHook = hook.deleting.fire;\n\n            fake && typeof changes === 'function' && changes.call({ value: ctx.table.schema.instanceTemplate }, ctx.table.schema.instanceTemplate);\n\n            return this._write(function (resolve, reject, idbstore, trans) {\n                var modifyer;\n                if (typeof changes === 'function') {\n                    // Changes is a function that may update, add or delete propterties or even require a deletion the object itself (delete this.item)\n                    if (updatingHook === nop && deletingHook === nop) {\n                        // Noone cares about what is being changed. Just let the modifier function be the given argument as is.\n                        modifyer = changes;\n                    } else {\n                        // People want to know exactly what is being modified or deleted.\n                        // Let modifyer be a proxy function that finds out what changes the caller is actually doing\n                        // and call the hooks accordingly!\n                        modifyer = function (item) {\n                            var origItem = deepClone(item); // Clone the item first so we can compare laters.\n                            if (changes.call(this, item, this) === false) return false; // Call the real modifyer function (If it returns false explicitely, it means it dont want to modify anyting on this object)\n                            if (!hasOwn(this, \"value\")) {\n                                // The real modifyer function requests a deletion of the object. Inform the deletingHook that a deletion is taking place.\n                                deletingHook.call(this, this.primKey, item, trans);\n                            } else {\n                                // No deletion. Check what was changed\n                                var objectDiff = getObjectDiff(origItem, this.value);\n                                var additionalChanges = updatingHook.call(this, objectDiff, this.primKey, origItem, trans);\n                                if (additionalChanges) {\n                                    // Hook want to apply additional modifications. Make sure to fullfill the will of the hook.\n                                    item = this.value;\n                                    keys(additionalChanges).forEach(function (keyPath) {\n                                        setByKeyPath(item, keyPath, additionalChanges[keyPath]); // Adding {keyPath: undefined} means that the keyPath should be deleted. Handled by setByKeyPath\n                                    });\n                                }\n                            }\n                        };\n                    }\n                } else if (updatingHook === nop) {\n                    // changes is a set of {keyPath: value} and no one is listening to the updating hook.\n                    var keyPaths = keys(changes);\n                    var numKeys = keyPaths.length;\n                    modifyer = function (item) {\n                        var anythingModified = false;\n                        for (var i = 0; i < numKeys; ++i) {\n                            var keyPath = keyPaths[i],\n                                val = changes[keyPath];\n                            if (getByKeyPath(item, keyPath) !== val) {\n                                setByKeyPath(item, keyPath, val); // Adding {keyPath: undefined} means that the keyPath should be deleted. Handled by setByKeyPath\n                                anythingModified = true;\n                            }\n                        }\n                        return anythingModified;\n                    };\n                } else {\n                    // changes is a set of {keyPath: value} and people are listening to the updating hook so we need to call it and\n                    // allow it to add additional modifications to make.\n                    var origChanges = changes;\n                    changes = shallowClone(origChanges); // Let's work with a clone of the changes keyPath/value set so that we can restore it in case a hook extends it.\n                    modifyer = function (item) {\n                        var anythingModified = false;\n                        var additionalChanges = updatingHook.call(this, changes, this.primKey, deepClone(item), trans);\n                        if (additionalChanges) extend(changes, additionalChanges);\n                        keys(changes).forEach(function (keyPath) {\n                            var val = changes[keyPath];\n                            if (getByKeyPath(item, keyPath) !== val) {\n                                setByKeyPath(item, keyPath, val);\n                                anythingModified = true;\n                            }\n                        });\n                        if (additionalChanges) changes = shallowClone(origChanges); // Restore original changes for next iteration\n                        return anythingModified;\n                    };\n                }\n\n                var count = 0;\n                var successCount = 0;\n                var iterationComplete = false;\n                var failures = [];\n                var failKeys = [];\n                var currentKey = null;\n\n                function modifyItem(item, cursor) {\n                    currentKey = cursor.primaryKey;\n                    var thisContext = {\n                        primKey: cursor.primaryKey,\n                        value: item,\n                        onsuccess: null,\n                        onerror: null\n                    };\n\n                    function onerror(e) {\n                        failures.push(e);\n                        failKeys.push(thisContext.primKey);\n                        checkFinished();\n                        return true; // Catch these errors and let a final rejection decide whether or not to abort entire transaction\n                    }\n\n                    if (modifyer.call(thisContext, item, thisContext) !== false) {\n                        // If a callback explicitely returns false, do not perform the update!\n                        var bDelete = !hasOwn(thisContext, \"value\");\n                        ++count;\n                        tryCatch(function () {\n                            var req = bDelete ? cursor.delete() : cursor.update(thisContext.value);\n                            req._hookCtx = thisContext;\n                            req.onerror = hookedEventRejectHandler(onerror);\n                            req.onsuccess = hookedEventSuccessHandler(function () {\n                                ++successCount;\n                                checkFinished();\n                            });\n                        }, onerror);\n                    } else if (thisContext.onsuccess) {\n                        // Hook will expect either onerror or onsuccess to always be called!\n                        thisContext.onsuccess(thisContext.value);\n                    }\n                }\n\n                function doReject(e) {\n                    if (e) {\n                        failures.push(e);\n                        failKeys.push(currentKey);\n                    }\n                    return reject(new ModifyError(\"Error modifying one or more objects\", failures, successCount, failKeys));\n                }\n\n                function checkFinished() {\n                    if (iterationComplete && successCount + failures.length === count) {\n                        if (failures.length > 0) doReject();else resolve(successCount);\n                    }\n                }\n                self.clone().raw()._iterate(modifyItem, function () {\n                    iterationComplete = true;\n                    checkFinished();\n                }, doReject, idbstore);\n            });\n        },\n\n        'delete': function () {\n            var _this4 = this;\n\n            var ctx = this._ctx,\n                range = ctx.range,\n                deletingHook = ctx.table.hook.deleting.fire,\n                hasDeleteHook = deletingHook !== nop;\n            if (!hasDeleteHook && isPlainKeyRange(ctx) && (ctx.isPrimKey && !hangsOnDeleteLargeKeyRange || !range)) // if no range, we'll use clear().\n                {\n                    // May use IDBObjectStore.delete(IDBKeyRange) in this case (Issue #208)\n                    // For chromium, this is the way most optimized version.\n                    // For IE/Edge, this could hang the indexedDB engine and make operating system instable\n                    // (https://gist.github.com/dfahlander/5a39328f029de18222cf2125d56c38f7)\n                    return this._write(function (resolve, reject, idbstore) {\n                        // Our API contract is to return a count of deleted items, so we have to count() before delete().\n                        var onerror = eventRejectHandler(reject),\n                            countReq = range ? idbstore.count(range) : idbstore.count();\n                        countReq.onerror = onerror;\n                        countReq.onsuccess = function () {\n                            var count = countReq.result;\n                            tryCatch(function () {\n                                var delReq = range ? idbstore.delete(range) : idbstore.clear();\n                                delReq.onerror = onerror;\n                                delReq.onsuccess = function () {\n                                    return resolve(count);\n                                };\n                            }, function (err) {\n                                return reject(err);\n                            });\n                        };\n                    });\n                }\n\n            // Default version to use when collection is not a vanilla IDBKeyRange on the primary key.\n            // Divide into chunks to not starve RAM.\n            // If has delete hook, we will have to collect not just keys but also objects, so it will use\n            // more memory and need lower chunk size.\n            var CHUNKSIZE = hasDeleteHook ? 2000 : 10000;\n\n            return this._write(function (resolve, reject, idbstore, trans) {\n                var totalCount = 0;\n                // Clone collection and change its table and set a limit of CHUNKSIZE on the cloned Collection instance.\n                var collection = _this4.clone({\n                    keysOnly: !ctx.isMatch && !hasDeleteHook }) // load just keys (unless filter() or and() or deleteHook has subscribers)\n                .distinct() // In case multiEntry is used, never delete same key twice because resulting count\n                // would become larger than actual delete count.\n                .limit(CHUNKSIZE).raw(); // Don't filter through reading-hooks (like mapped classes etc)\n\n                var keysOrTuples = [];\n\n                // We're gonna do things on as many chunks that are needed.\n                // Use recursion of nextChunk function:\n                var nextChunk = function () {\n                    return collection.each(hasDeleteHook ? function (val, cursor) {\n                        // Somebody subscribes to hook('deleting'). Collect all primary keys and their values,\n                        // so that the hook can be called with its values in bulkDelete().\n                        keysOrTuples.push([cursor.primaryKey, cursor.value]);\n                    } : function (val, cursor) {\n                        // No one subscribes to hook('deleting'). Collect only primary keys:\n                        keysOrTuples.push(cursor.primaryKey);\n                    }).then(function () {\n                        // Chromium deletes faster when doing it in sort order.\n                        hasDeleteHook ? keysOrTuples.sort(function (a, b) {\n                            return ascending(a[0], b[0]);\n                        }) : keysOrTuples.sort(ascending);\n                        return bulkDelete(idbstore, trans, keysOrTuples, hasDeleteHook, deletingHook);\n                    }).then(function () {\n                        var count = keysOrTuples.length;\n                        totalCount += count;\n                        keysOrTuples = [];\n                        return count < CHUNKSIZE ? totalCount : nextChunk();\n                    });\n                };\n\n                resolve(nextChunk());\n            });\n        }\n    });\n\n    //\n    //\n    //\n    // ------------------------- Help functions ---------------------------\n    //\n    //\n    //\n\n    function lowerVersionFirst(a, b) {\n        return a._cfg.version - b._cfg.version;\n    }\n\n    function setApiOnPlace(objs, tableNames, mode, dbschema) {\n        tableNames.forEach(function (tableName) {\n            var tableInstance = db._tableFactory(mode, dbschema[tableName]);\n            objs.forEach(function (obj) {\n                tableName in obj || (obj[tableName] = tableInstance);\n            });\n        });\n    }\n\n    function removeTablesApi(objs) {\n        objs.forEach(function (obj) {\n            for (var key in obj) {\n                if (obj[key] instanceof Table) delete obj[key];\n            }\n        });\n    }\n\n    function iterate(req, filter, fn, resolve, reject, valueMapper) {\n\n        // Apply valueMapper (hook('reading') or mappped class)\n        var mappedFn = valueMapper ? function (x, c, a) {\n            return fn(valueMapper(x), c, a);\n        } : fn;\n        // Wrap fn with PSD and microtick stuff from Promise.\n        var wrappedFn = wrap(mappedFn, reject);\n\n        if (!req.onerror) req.onerror = eventRejectHandler(reject);\n        if (filter) {\n            req.onsuccess = trycatcher(function filter_record() {\n                var cursor = req.result;\n                if (cursor) {\n                    var c = function () {\n                        cursor.continue();\n                    };\n                    if (filter(cursor, function (advancer) {\n                        c = advancer;\n                    }, resolve, reject)) wrappedFn(cursor.value, cursor, function (advancer) {\n                        c = advancer;\n                    });\n                    c();\n                } else {\n                    resolve();\n                }\n            }, reject);\n        } else {\n            req.onsuccess = trycatcher(function filter_record() {\n                var cursor = req.result;\n                if (cursor) {\n                    var c = function () {\n                        cursor.continue();\n                    };\n                    wrappedFn(cursor.value, cursor, function (advancer) {\n                        c = advancer;\n                    });\n                    c();\n                } else {\n                    resolve();\n                }\n            }, reject);\n        }\n    }\n\n    function parseIndexSyntax(indexes) {\n        /// <param name=\"indexes\" type=\"String\"></param>\n        /// <returns type=\"Array\" elementType=\"IndexSpec\"></returns>\n        var rv = [];\n        indexes.split(',').forEach(function (index) {\n            index = index.trim();\n            var name = index.replace(/([&*]|\\+\\+)/g, \"\"); // Remove \"&\", \"++\" and \"*\"\n            // Let keyPath of \"[a+b]\" be [\"a\",\"b\"]:\n            var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n\n            rv.push(new IndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), /\\./.test(index)));\n        });\n        return rv;\n    }\n\n    function cmp(key1, key2) {\n        return indexedDB.cmp(key1, key2);\n    }\n\n    function min(a, b) {\n        return cmp(a, b) < 0 ? a : b;\n    }\n\n    function max(a, b) {\n        return cmp(a, b) > 0 ? a : b;\n    }\n\n    function ascending(a, b) {\n        return indexedDB.cmp(a, b);\n    }\n\n    function descending(a, b) {\n        return indexedDB.cmp(b, a);\n    }\n\n    function simpleCompare(a, b) {\n        return a < b ? -1 : a === b ? 0 : 1;\n    }\n\n    function simpleCompareReverse(a, b) {\n        return a > b ? -1 : a === b ? 0 : 1;\n    }\n\n    function combine(filter1, filter2) {\n        return filter1 ? filter2 ? function () {\n            return filter1.apply(this, arguments) && filter2.apply(this, arguments);\n        } : filter1 : filter2;\n    }\n\n    function readGlobalSchema() {\n        db.verno = idbdb.version / 10;\n        db._dbSchema = globalSchema = {};\n        dbStoreNames = slice(idbdb.objectStoreNames, 0);\n        if (dbStoreNames.length === 0) return; // Database contains no stores.\n        var trans = idbdb.transaction(safariMultiStoreFix(dbStoreNames), 'readonly');\n        dbStoreNames.forEach(function (storeName) {\n            var store = trans.objectStore(storeName),\n                keyPath = store.keyPath,\n                dotted = keyPath && typeof keyPath === 'string' && keyPath.indexOf('.') !== -1;\n            var primKey = new IndexSpec(keyPath, keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== 'string', dotted);\n            var indexes = [];\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var idbindex = store.index(store.indexNames[j]);\n                keyPath = idbindex.keyPath;\n                dotted = keyPath && typeof keyPath === 'string' && keyPath.indexOf('.') !== -1;\n                var index = new IndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== 'string', dotted);\n                indexes.push(index);\n            }\n            globalSchema[storeName] = new TableSchema(storeName, primKey, indexes, {});\n        });\n        setApiOnPlace([allTables, Transaction.prototype], keys(globalSchema), READWRITE, globalSchema);\n    }\n\n    function adjustToExistingIndexNames(schema, idbtrans) {\n        /// <summary>\n        /// Issue #30 Problem with existing db - adjust to existing index names when migrating from non-dexie db\n        /// </summary>\n        /// <param name=\"schema\" type=\"Object\">Map between name and TableSchema</param>\n        /// <param name=\"idbtrans\" type=\"IDBTransaction\"></param>\n        var storeNames = idbtrans.db.objectStoreNames;\n        for (var i = 0; i < storeNames.length; ++i) {\n            var storeName = storeNames[i];\n            var store = idbtrans.objectStore(storeName);\n            hasGetAll = 'getAll' in store;\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var indexName = store.indexNames[j];\n                var keyPath = store.index(indexName).keyPath;\n                var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n                if (schema[storeName]) {\n                    var indexSpec = schema[storeName].idxByName[dexieName];\n                    if (indexSpec) indexSpec.name = indexName;\n                }\n            }\n        }\n    }\n\n    function fireOnBlocked(ev) {\n        db.on(\"blocked\").fire(ev);\n        // Workaround (not fully*) for missing \"versionchange\" event in IE,Edge and Safari:\n        connections.filter(function (c) {\n            return c.name === db.name && c !== db && !c._vcFired;\n        }).map(function (c) {\n            return c.on(\"versionchange\").fire(ev);\n        });\n    }\n\n    extend(this, {\n        Collection: Collection,\n        Table: Table,\n        Transaction: Transaction,\n        Version: Version,\n        WhereClause: WhereClause,\n        WriteableCollection: WriteableCollection,\n        WriteableTable: WriteableTable\n    });\n\n    init();\n\n    addons.forEach(function (fn) {\n        fn(db);\n    });\n}\n\nvar fakeAutoComplete = function () {}; // Will never be changed. We just fake for the IDE that we change it (see doFakeAutoComplete())\nvar fake = false; // Will never be changed. We just fake for the IDE that we change it (see doFakeAutoComplete())\n\nfunction parseType(type) {\n    if (typeof type === 'function') {\n        return new type();\n    } else if (isArray(type)) {\n        return [parseType(type[0])];\n    } else if (type && typeof type === 'object') {\n        var rv = {};\n        applyStructure(rv, type);\n        return rv;\n    } else {\n        return type;\n    }\n}\n\nfunction applyStructure(obj, structure) {\n    keys(structure).forEach(function (member) {\n        var value = parseType(structure[member]);\n        obj[member] = value;\n    });\n    return obj;\n}\n\nfunction eventSuccessHandler(done) {\n    return function (ev) {\n        done(ev.target.result);\n    };\n}\n\nfunction hookedEventSuccessHandler(resolve) {\n    // wrap() is needed when calling hooks because the rare scenario of:\n    //  * hook does a db operation that fails immediately (IDB throws exception)\n    //    For calling db operations on correct transaction, wrap makes sure to set PSD correctly.\n    //    wrap() will also execute in a virtual tick.\n    //  * If not wrapped in a virtual tick, direct exception will launch a new physical tick.\n    //  * If this was the last event in the bulk, the promise will resolve after a physical tick\n    //    and the transaction will have committed already.\n    // If no hook, the virtual tick will be executed in the reject()/resolve of the final promise,\n    // because it is always marked with _lib = true when created using Transaction._promise().\n    return wrap(function (event) {\n        var req = event.target,\n            result = req.result,\n            ctx = req._hookCtx,\n            // Contains the hook error handler. Put here instead of closure to boost performance.\n        hookSuccessHandler = ctx && ctx.onsuccess;\n        hookSuccessHandler && hookSuccessHandler(result);\n        resolve && resolve(result);\n    }, resolve);\n}\n\nfunction eventRejectHandler(reject) {\n    return function (event) {\n        preventDefault(event);\n        reject(event.target.error);\n        return false;\n    };\n}\n\nfunction hookedEventRejectHandler(reject) {\n    return wrap(function (event) {\n        // See comment on hookedEventSuccessHandler() why wrap() is needed only when supporting hooks.\n\n        var req = event.target,\n            err = req.error,\n            ctx = req._hookCtx,\n            // Contains the hook error handler. Put here instead of closure to boost performance.\n        hookErrorHandler = ctx && ctx.onerror;\n        hookErrorHandler && hookErrorHandler(err);\n        preventDefault(event);\n        reject(err);\n        return false;\n    });\n}\n\nfunction preventDefault(event) {\n    if (event.stopPropagation) // IndexedDBShim doesnt support this on Safari 8 and below.\n        event.stopPropagation();\n    if (event.preventDefault) // IndexedDBShim doesnt support this on Safari 8 and below.\n        event.preventDefault();\n}\n\nfunction globalDatabaseList(cb) {\n    var val,\n        localStorage = Dexie.dependencies.localStorage;\n    if (!localStorage) return cb([]); // Envs without localStorage support\n    try {\n        val = JSON.parse(localStorage.getItem('Dexie.DatabaseNames') || \"[]\");\n    } catch (e) {\n        val = [];\n    }\n    if (cb(val)) {\n        localStorage.setItem('Dexie.DatabaseNames', JSON.stringify(val));\n    }\n}\n\nfunction awaitIterator(iterator) {\n    var callNext = function (result) {\n        return iterator.next(result);\n    },\n        doThrow = function (error) {\n        return iterator.throw(error);\n    },\n        onSuccess = step(callNext),\n        onError = step(doThrow);\n\n    function step(getNext) {\n        return function (val) {\n            var next = getNext(val),\n                value = next.value;\n\n            return next.done ? value : !value || typeof value.then !== 'function' ? isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) : value.then(onSuccess, onError);\n        };\n    }\n\n    return step(callNext)();\n}\n\n//\n// IndexSpec struct\n//\nfunction IndexSpec(name, keyPath, unique, multi, auto, compound, dotted) {\n    /// <param name=\"name\" type=\"String\"></param>\n    /// <param name=\"keyPath\" type=\"String\"></param>\n    /// <param name=\"unique\" type=\"Boolean\"></param>\n    /// <param name=\"multi\" type=\"Boolean\"></param>\n    /// <param name=\"auto\" type=\"Boolean\"></param>\n    /// <param name=\"compound\" type=\"Boolean\"></param>\n    /// <param name=\"dotted\" type=\"Boolean\"></param>\n    this.name = name;\n    this.keyPath = keyPath;\n    this.unique = unique;\n    this.multi = multi;\n    this.auto = auto;\n    this.compound = compound;\n    this.dotted = dotted;\n    var keyPathSrc = typeof keyPath === 'string' ? keyPath : keyPath && '[' + [].join.call(keyPath, '+') + ']';\n    this.src = (unique ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + keyPathSrc;\n}\n\n//\n// TableSchema struct\n//\nfunction TableSchema(name, primKey, indexes, instanceTemplate) {\n    /// <param name=\"name\" type=\"String\"></param>\n    /// <param name=\"primKey\" type=\"IndexSpec\"></param>\n    /// <param name=\"indexes\" type=\"Array\" elementType=\"IndexSpec\"></param>\n    /// <param name=\"instanceTemplate\" type=\"Object\"></param>\n    this.name = name;\n    this.primKey = primKey || new IndexSpec();\n    this.indexes = indexes || [new IndexSpec()];\n    this.instanceTemplate = instanceTemplate;\n    this.mappedClass = null;\n    this.idxByName = arrayToObject(indexes, function (index) {\n        return [index.name, index];\n    });\n}\n\n// Used in when defining dependencies later...\n// (If IndexedDBShim is loaded, prefer it before standard indexedDB)\nvar idbshim = _global.idbModules && _global.idbModules.shimIndexedDB ? _global.idbModules : {};\n\nfunction safariMultiStoreFix(storeNames) {\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\n\nfunction getNativeGetDatabaseNamesFn(indexedDB) {\n    var fn = indexedDB && (indexedDB.getDatabaseNames || indexedDB.webkitGetDatabaseNames);\n    return fn && fn.bind(indexedDB);\n}\n\n// Export Error classes\nprops(Dexie, fullNameExceptions); // Dexie.XXXError = class XXXError {...};\n\n//\n// Static methods and properties\n// \nprops(Dexie, {\n\n    //\n    // Static delete() method.\n    //\n    delete: function (databaseName) {\n        var db = new Dexie(databaseName),\n            promise = db.delete();\n        promise.onblocked = function (fn) {\n            db.on(\"blocked\", fn);\n            return this;\n        };\n        return promise;\n    },\n\n    //\n    // Static exists() method.\n    //\n    exists: function (name) {\n        return new Dexie(name).open().then(function (db) {\n            db.close();\n            return true;\n        }).catch(Dexie.NoSuchDatabaseError, function () {\n            return false;\n        });\n    },\n\n    //\n    // Static method for retrieving a list of all existing databases at current host.\n    //\n    getDatabaseNames: function (cb) {\n        return new Promise(function (resolve, reject) {\n            var getDatabaseNames = getNativeGetDatabaseNamesFn(indexedDB);\n            if (getDatabaseNames) {\n                // In case getDatabaseNames() becomes standard, let's prepare to support it:\n                var req = getDatabaseNames();\n                req.onsuccess = function (event) {\n                    resolve(slice(event.target.result, 0)); // Converst DOMStringList to Array<String>\n                };\n                req.onerror = eventRejectHandler(reject);\n            } else {\n                globalDatabaseList(function (val) {\n                    resolve(val);\n                    return false;\n                });\n            }\n        }).then(cb);\n    },\n\n    defineClass: function (structure) {\n        /// <summary>\n        ///     Create a javascript constructor based on given template for which properties to expect in the class.\n        ///     Any property that is a constructor function will act as a type. So {name: String} will be equal to {name: new String()}.\n        /// </summary>\n        /// <param name=\"structure\">Helps IDE code completion by knowing the members that objects contain and not just the indexes. Also\n        /// know what type each member has. Example: {name: String, emailAddresses: [String], properties: {shoeSize: Number}}</param>\n\n        // Default constructor able to copy given properties into this object.\n        function Class(properties) {\n            /// <param name=\"properties\" type=\"Object\" optional=\"true\">Properties to initialize object with.\n            /// </param>\n            properties ? extend(this, properties) : fake && applyStructure(this, structure);\n        }\n        return Class;\n    },\n\n    applyStructure: applyStructure,\n\n    ignoreTransaction: function (scopeFunc) {\n        // In case caller is within a transaction but needs to create a separate transaction.\n        // Example of usage:\n        //\n        // Let's say we have a logger function in our app. Other application-logic should be unaware of the\n        // logger function and not need to include the 'logentries' table in all transaction it performs.\n        // The logging should always be done in a separate transaction and not be dependant on the current\n        // running transaction context. Then you could use Dexie.ignoreTransaction() to run code that starts a new transaction.\n        //\n        //     Dexie.ignoreTransaction(function() {\n        //         db.logentries.add(newLogEntry);\n        //     });\n        //\n        // Unless using Dexie.ignoreTransaction(), the above example would try to reuse the current transaction\n        // in current Promise-scope.\n        //\n        // An alternative to Dexie.ignoreTransaction() would be setImmediate() or setTimeout(). The reason we still provide an\n        // API for this because\n        //  1) The intention of writing the statement could be unclear if using setImmediate() or setTimeout().\n        //  2) setTimeout() would wait unnescessary until firing. This is however not the case with setImmediate().\n        //  3) setImmediate() is not supported in the ES standard.\n        //  4) You might want to keep other PSD state that was set in a parent PSD, such as PSD.letThrough.\n        return PSD.trans ? usePSD(PSD.transless, scopeFunc) : // Use the closest parent that was non-transactional.\n        scopeFunc(); // No need to change scope because there is no ongoing transaction.\n    },\n\n    vip: function (fn) {\n        // To be used by subscribers to the on('ready') event.\n        // This will let caller through to access DB even when it is blocked while the db.ready() subscribers are firing.\n        // This would have worked automatically if we were certain that the Provider was using Dexie.Promise for all asyncronic operations. The promise PSD\n        // from the provider.connect() call would then be derived all the way to when provider would call localDatabase.applyChanges(). But since\n        // the provider more likely is using non-promise async APIs or other thenable implementations, we cannot assume that.\n        // Note that this method is only useful for on('ready') subscribers that is returning a Promise from the event. If not using vip()\n        // the database could deadlock since it wont open until the returned Promise is resolved, and any non-VIPed operation started by\n        // the caller will not resolve until database is opened.\n        return newScope(function () {\n            PSD.letThrough = true; // Make sure we are let through if still blocking db due to onready is firing.\n            return fn();\n        });\n    },\n\n    async: function (generatorFn) {\n        return function () {\n            try {\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\n                if (!rv || typeof rv.then !== 'function') return Promise.resolve(rv);\n                return rv;\n            } catch (e) {\n                return rejection(e);\n            }\n        };\n    },\n\n    spawn: function (generatorFn, args, thiz) {\n        try {\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n            if (!rv || typeof rv.then !== 'function') return Promise.resolve(rv);\n            return rv;\n        } catch (e) {\n            return rejection(e);\n        }\n    },\n\n    // Dexie.currentTransaction property\n    currentTransaction: {\n        get: function () {\n            return PSD.trans || null;\n        }\n    },\n\n    // Export our Promise implementation since it can be handy as a standalone Promise implementation\n    Promise: Promise,\n\n    // Dexie.debug proptery:\n    // Dexie.debug = false\n    // Dexie.debug = true\n    // Dexie.debug = \"dexie\" - don't hide dexie's stack frames.\n    debug: {\n        get: function () {\n            return debug;\n        },\n        set: function (value) {\n            setDebug(value, value === 'dexie' ? function () {\n                return true;\n            } : dexieStackFrameFilter);\n        }\n    },\n\n    // Export our derive/extend/override methodology\n    derive: derive,\n    extend: extend,\n    props: props,\n    override: override,\n    // Export our Events() function - can be handy as a toolkit\n    Events: Events,\n    events: { get: deprecated(function () {\n            return Events;\n        }) }, // Backward compatible lowercase version.\n    // Utilities\n    getByKeyPath: getByKeyPath,\n    setByKeyPath: setByKeyPath,\n    delByKeyPath: delByKeyPath,\n    shallowClone: shallowClone,\n    deepClone: deepClone,\n    getObjectDiff: getObjectDiff,\n    asap: asap,\n    maxKey: maxKey,\n    // Addon registry\n    addons: [],\n    // Global DB connection list\n    connections: connections,\n\n    MultiModifyError: exceptions.Modify, // Backward compatibility 0.9.8. Deprecate.\n    errnames: errnames,\n\n    // Export other static classes\n    IndexSpec: IndexSpec,\n    TableSchema: TableSchema,\n\n    //\n    // Dependencies\n    //\n    // These will automatically work in browsers with indexedDB support, or where an indexedDB polyfill has been included.\n    //\n    // In node.js, however, these properties must be set \"manually\" before instansiating a new Dexie().\n    // For node.js, you need to require indexeddb-js or similar and then set these deps.\n    //\n    dependencies: {\n        // Required:\n        indexedDB: idbshim.shimIndexedDB || _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n        IDBKeyRange: idbshim.IDBKeyRange || _global.IDBKeyRange || _global.webkitIDBKeyRange\n    },\n\n    // API Version Number: Type Number, make sure to always set a version number that can be comparable correctly. Example: 0.9, 0.91, 0.92, 1.0, 1.01, 1.1, 1.2, 1.21, etc.\n    semVer: DEXIE_VERSION,\n    version: DEXIE_VERSION.split('.').map(function (n) {\n        return parseInt(n);\n    }).reduce(function (p, c, i) {\n        return p + c / Math.pow(10, i * 2);\n    }),\n    fakeAutoComplete: fakeAutoComplete,\n\n    // https://github.com/dfahlander/Dexie.js/issues/186\n    // typescript compiler tsc in mode ts-->es5 & commonJS, will expect require() to return\n    // x.default. Workaround: Set Dexie.default = Dexie.\n    default: Dexie\n});\n\ntryCatch(function () {\n    // Optional dependencies\n    // localStorage\n    Dexie.dependencies.localStorage = (typeof chrome !== \"undefined\" && chrome !== null ? chrome.storage : void 0) != null ? null : _global.localStorage;\n});\n\n// Map DOMErrors and DOMExceptions to corresponding Dexie errors. May change in Dexie v2.0.\nPromise.rejectionMapper = mapError;\n\n// Fool IDE to improve autocomplete. Tested with Visual Studio 2013 and 2015.\ndoFakeAutoComplete(function () {\n    Dexie.fakeAutoComplete = fakeAutoComplete = doFakeAutoComplete;\n    Dexie.fake = fake = true;\n});\n\nreturn Dexie;\n\n})));\n//# sourceMappingURL=dexie.js.map\n","// version: 0.11.1\r\n// date: Fri Jan 12 2018 12:42:38 GMT+0000 (WET)\r\n// licence: \r\n/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\n\r\n\r\n// version: 0.11.1\r\n// date: Fri Jan 12 2018 12:42:38 GMT+0000 (WET)\r\n// licence: \r\n/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\n\r\n\r\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"minibus\",[],e):\"object\"==typeof exports?exports.minibus=e():t.minibus=e()}(\"undefined\"!=typeof self?self:this,function(){/******/\r\nreturn function(t){/******/\r\n/******/\r\n// The require function\r\n/******/\r\nfunction __webpack_require__(n){/******/\r\n/******/\r\n// Check if module is in cache\r\n/******/\r\nif(e[n])/******/\r\nreturn e[n].exports;/******/\r\n// Create a new module (and put it into the cache)\r\n/******/\r\nvar r=e[n]={/******/\r\ni:n,/******/\r\nl:!1,/******/\r\nexports:{}};/******/\r\n/******/\r\n// Return the exports of the module\r\n/******/\r\n/******/\r\n/******/\r\n// Execute the module function\r\n/******/\r\n/******/\r\n/******/\r\n// Flag the module as loaded\r\n/******/\r\nreturn t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}// webpackBootstrap\r\n/******/\r\n// The module cache\r\n/******/\r\nvar e={};/******/\r\n/******/\r\n// Load entry module and return exports\r\n/******/\r\n/******/\r\n/******/\r\n/******/\r\n// expose the modules object (__webpack_modules__)\r\n/******/\r\n/******/\r\n/******/\r\n// expose the module cache\r\n/******/\r\n/******/\r\n/******/\r\n// define getter function for harmony exports\r\n/******/\r\n/******/\r\n/******/\r\n// getDefaultExport function for compatibility with non-harmony modules\r\n/******/\r\n/******/\r\n/******/\r\n// Object.prototype.hasOwnProperty.call\r\n/******/\r\n/******/\r\n/******/\r\n// __webpack_public_path__\r\n/******/\r\nreturn __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){/******/\r\n__webpack_require__.o(t,e)||/******/\r\nObject.defineProperty(t,e,{/******/\r\nconfigurable:!1,/******/\r\nenumerable:!0,/******/\r\nget:n})},__webpack_require__.n=function(t){/******/\r\nvar e=t&&t.__esModule?/******/\r\nfunction(){return t.default}:/******/\r\nfunction(){return t};/******/\r\n/******/\r\nreturn __webpack_require__.d(e,\"a\",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=135)}([/* 0 */\r\n/***/\r\nfunction(t,e){var n=t.exports={version:\"2.5.3\"};\"number\"==typeof __e&&(__e=n)},/* 1 */\r\n/***/\r\nfunction(t,e){\r\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\r\nvar n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},/* 2 */\r\n/***/\r\nfunction(t,e,n){var r=n(28)(\"wks\"),o=n(19),i=n(1).Symbol,u=\"function\"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)(\"Symbol.\"+t))}).store=r},/* 3 */\r\n/***/\r\nfunction(t,e,n){var r=n(1),o=n(0),i=n(14),u=n(8),c=function(t,e,n){var s,f,a,l=t&c.F,p=t&c.G,v=t&c.S,d=t&c.P,h=t&c.B,_=t&c.W,y=p?o:o[e]||(o[e]={}),b=y.prototype,g=p?r:v?r[e]:(r[e]||{}).prototype;p&&(n=e);for(s in n)\r\n// contains in native\r\n(f=!l&&g&&void 0!==g[s])&&s in y||(\r\n// export native or passed\r\na=f?g[s]:n[s],\r\n// prevent global pollution for namespaces\r\ny[s]=p&&\"function\"!=typeof g[s]?n[s]:h&&f?i(a,r):_&&g[s]==a?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(a):d&&\"function\"==typeof a?i(Function.call,a):a,\r\n// export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\r\nd&&((y.virtual||(y.virtual={}))[s]=a,\r\n// export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\r\nt&c.R&&b&&!b[s]&&u(b,s,a)))};\r\n// type bitmap\r\nc.F=1,// forced\r\nc.G=2,// global\r\nc.S=4,// static\r\nc.P=8,// proto\r\nc.B=16,// bind\r\nc.W=32,// wrap\r\nc.U=64,// safe\r\nc.R=128,// real proto method for `library`\r\nt.exports=c},/* 4 */\r\n/***/\r\nfunction(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(t+\" is not an object!\");return t}},/* 5 */\r\n/***/\r\nfunction(t,e,n){\r\n// Thank's IE8 for his funny defineProperty\r\nt.exports=!n(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},/* 6 */\r\n/***/\r\nfunction(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},/* 7 */\r\n/***/\r\nfunction(t,e,n){var r=n(4),o=n(36),i=n(26),u=Object.defineProperty;e.f=n(5)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},/* 8 */\r\n/***/\r\nfunction(t,e,n){var r=n(7),o=n(18);t.exports=n(5)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},/* 9 */\r\n/***/\r\nfunction(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},/* 10 */\r\n/***/\r\nfunction(t,e,n){\r\n// to indexed object, toObject with fallback for non-array-like ES3 strings\r\nvar r=n(57),o=n(22);t.exports=function(t){return r(o(t))}},/* 11 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},/* 12 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";e.__esModule=!0;var r=n(60),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}()},/* 13 */\r\n/***/\r\nfunction(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},/* 14 */\r\n/***/\r\nfunction(t,e,n){\r\n// optional / simple context binding\r\nvar r=n(17);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},/* 15 */\r\n/***/\r\nfunction(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},/* 16 */\r\n/***/\r\nfunction(t,e){t.exports={}},/* 17 */\r\n/***/\r\nfunction(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},/* 18 */\r\n/***/\r\nfunction(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},/* 19 */\r\n/***/\r\nfunction(t,e){var n=0,r=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+r).toString(36))}},/* 20 */\r\n/***/\r\nfunction(t,e,n){\r\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\nvar r=n(37),o=n(29);t.exports=Object.keys||function(t){return r(t,o)}},/* 21 */\r\n/***/\r\nfunction(t,e){\r\n// 7.1.4 ToInteger\r\nvar n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},/* 22 */\r\n/***/\r\nfunction(t,e){\r\n// 7.2.1 RequireObjectCoercible(argument)\r\nt.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},/* 23 */\r\n/***/\r\nfunction(t,e){t.exports=!0},/* 24 */\r\n/***/\r\nfunction(t,e,n){var r=n(7).f,o=n(9),i=n(2)(\"toStringTag\");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},/* 25 */\r\n/***/\r\nfunction(t,e,n){var r=n(6),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},/* 26 */\r\n/***/\r\nfunction(t,e,n){\r\n// 7.1.1 ToPrimitive(input [, PreferredType])\r\nvar r=n(6);\r\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\r\n// and the second argument - flag - preferred type is a string\r\nt.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if(\"function\"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError(\"Can't convert object to primitive value\")}},/* 27 */\r\n/***/\r\nfunction(t,e,n){var r=n(28)(\"keys\"),o=n(19);t.exports=function(t){return r[t]||(r[t]=o(t))}},/* 28 */\r\n/***/\r\nfunction(t,e,n){var r=n(1),o=r[\"__core-js_shared__\"]||(r[\"__core-js_shared__\"]={});t.exports=function(t){return o[t]||(o[t]={})}},/* 29 */\r\n/***/\r\nfunction(t,e){\r\n// IE 8- don't enum bug keys\r\nt.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},/* 30 */\r\n/***/\r\nfunction(t,e,n){\r\n// 7.1.13 ToObject(argument)\r\nvar r=n(22);t.exports=function(t){return Object(r(t))}},/* 31 */\r\n/***/\r\nfunction(t,e,n){\r\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nvar r=n(4),o=n(69),i=n(29),u=n(27)(\"IE_PROTO\"),c=function(){},s=function(){\r\n// Thrash, waste and sodomy: IE GC bug\r\nvar t,e=n(25)(\"iframe\"),r=i.length;for(e.style.display=\"none\",n(46).appendChild(e),e.src=\"javascript:\",// eslint-disable-line no-script-url\r\n// createDict = iframe.contentWindow.Object;\r\n// html.removeChild(iframe);\r\nt=e.contentWindow.document,t.open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),s=t.F;r--;)delete s.prototype[i[r]];return s()};t.exports=Object.create||function(t,e){var n;\r\n// add \"__proto__\" for Object.getPrototypeOf polyfill\r\nreturn null!==t?(c.prototype=r(t),n=new c,c.prototype=null,n[u]=t):n=s(),void 0===e?n:o(n,e)}},/* 32 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";function PromiseCapability(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError(\"Bad Promise constructor\");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}\r\n// 25.4.1.5 NewPromiseCapability(C)\r\nvar r=n(17);t.exports.f=function(t){return new PromiseCapability(t)}},/* 33 */\r\n/***/\r\nfunction(t,e,n){e.f=n(2)},/* 34 */\r\n/***/\r\nfunction(t,e,n){var r=n(1),o=n(0),i=n(23),u=n(33),c=n(7).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});\"_\"==t.charAt(0)||t in e||c(e,t,{value:u.f(t)})}},/* 35 */\r\n/***/\r\nfunction(t,e){e.f={}.propertyIsEnumerable},/* 36 */\r\n/***/\r\nfunction(t,e,n){t.exports=!n(5)&&!n(13)(function(){return 7!=Object.defineProperty(n(25)(\"div\"),\"a\",{get:function(){return 7}}).a})},/* 37 */\r\n/***/\r\nfunction(t,e,n){var r=n(9),o=n(10),i=n(58)(!1),u=n(27)(\"IE_PROTO\");t.exports=function(t,e){var n,c=o(t),s=0,f=[];for(n in c)n!=u&&r(c,n)&&f.push(n);\r\n// Don't enum bug & hidden keys\r\nfor(;e.length>s;)r(c,n=e[s++])&&(~i(f,n)||f.push(n));return f}},/* 38 */\r\n/***/\r\nfunction(t,e,n){\r\n// 7.1.15 ToLength\r\nvar r=n(21),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},/* 39 */\r\n/***/\r\nfunction(t,e,n){\r\n// most Object methods by ES6 should accept primitives\r\nvar r=n(3),o=n(0),i=n(13);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*i(function(){n(1)}),\"Object\",u)}},/* 40 */\r\n/***/\r\nfunction(t,e,n){var r=n(35),o=n(18),i=n(10),u=n(26),c=n(9),s=n(36),f=Object.getOwnPropertyDescriptor;e.f=n(5)?f:function(t,e){if(t=i(t),e=u(e,!0),s)try{return f(t,e)}catch(t){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},/* 41 */\r\n/***/\r\nfunction(t,e,n){t.exports={default:n(66),__esModule:!0}},/* 42 */\r\n/***/\r\nfunction(t,e){},/* 43 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";var r=n(67)(!0);\r\n// 21.1.3.27 String.prototype[@@iterator]()\r\nn(44)(String,\"String\",function(t){this._t=String(t),// target\r\nthis._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},/* 44 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";var r=n(23),o=n(3),i=n(45),u=n(8),c=n(9),s=n(16),f=n(68),a=n(24),l=n(47),p=n(2)(\"iterator\"),v=!([].keys&&\"next\"in[].keys()),d=function(){return this};t.exports=function(t,e,n,h,_,y,b){f(n,e,h);var g,m,w,x=function(t){if(!v&&t in P)return P[t];switch(t){case\"keys\":case\"values\":return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+\" Iterator\",M=\"values\"==_,S=!1,P=t.prototype,L=P[p]||P[\"@@iterator\"]||_&&P[_],j=!v&&L||x(_),k=_?M?x(\"entries\"):j:void 0,E=\"Array\"==e?P.entries||L:L;if(\r\n// Fix native\r\nE&&(w=l(E.call(new t)))!==Object.prototype&&w.next&&(\r\n// Set @@toStringTag to native iterators\r\na(w,O,!0),\r\n// fix for some old engines\r\nr||c(w,p)||u(w,p,d)),\r\n// fix Array#{values, @@iterator}.name in V8 / FF\r\nM&&L&&\"values\"!==L.name&&(S=!0,j=function(){return L.call(this)}),\r\n// Define iterator\r\nr&&!b||!v&&!S&&P[p]||u(P,p,j),\r\n// Plug for library\r\ns[e]=j,s[O]=d,_)if(g={values:M?j:x(\"values\"),keys:y?j:x(\"keys\"),entries:k},b)for(m in g)m in P||i(P,m,g[m]);else o(o.P+o.F*(v||S),e,g);return g}},/* 45 */\r\n/***/\r\nfunction(t,e,n){t.exports=n(8)},/* 46 */\r\n/***/\r\nfunction(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},/* 47 */\r\n/***/\r\nfunction(t,e,n){\r\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\nvar r=n(9),o=n(30),i=n(27)(\"IE_PROTO\"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},/* 48 */\r\n/***/\r\nfunction(t,e,n){n(70);for(var r=n(1),o=n(8),i=n(16),u=n(2)(\"toStringTag\"),c=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),s=0;s<c.length;s++){var f=c[s],a=r[f],l=a&&a.prototype;l&&!l[u]&&o(l,u,f),i[f]=i.Array}},/* 49 */\r\n/***/\r\nfunction(t,e,n){\r\n// getting tag from 19.1.3.6 Object.prototype.toString()\r\nvar r=n(15),o=n(2)(\"toStringTag\"),i=\"Arguments\"==r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,c;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(n=u(e=Object(t),o))?n:i?r(e):\"Object\"==(c=r(e))&&\"function\"==typeof e.callee?\"Arguments\":c}},/* 50 */\r\n/***/\r\nfunction(t,e,n){\r\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\r\nvar r=n(4),o=n(17),i=n(2)(\"species\");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||void 0==(n=r(u)[i])?e:o(n)}},/* 51 */\r\n/***/\r\nfunction(t,e,n){var r,o,i,u=n(14),c=n(79),s=n(46),f=n(25),a=n(1),l=a.process,p=a.setImmediate,v=a.clearImmediate,d=a.MessageChannel,h=a.Dispatch,_=0,y={},b=function(){var t=+this;\r\n// eslint-disable-next-line no-prototype-builtins\r\nif(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},g=function(t){b.call(t.data)};\r\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\r\np&&v||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++_]=function(){\r\n// eslint-disable-next-line no-new-func\r\nc(\"function\"==typeof t?t:Function(t),e)},r(_),_},v=function(t){delete y[t]},\r\n// Node.js 0.8-\r\n\"process\"==n(15)(l)?r=function(t){l.nextTick(u(b,t,1))}:h&&h.now?r=function(t){h.now(u(b,t,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=g,r=u(i.postMessage,i,1)):a.addEventListener&&\"function\"==typeof postMessage&&!a.importScripts?(r=function(t){a.postMessage(t+\"\",\"*\")},a.addEventListener(\"message\",g,!1)):r=\"onreadystatechange\"in f(\"script\")?function(t){s.appendChild(f(\"script\")).onreadystatechange=function(){s.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:p,clear:v}},/* 52 */\r\n/***/\r\nfunction(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},/* 53 */\r\n/***/\r\nfunction(t,e,n){var r=n(4),o=n(6),i=n(32);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},/* 54 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(89),o=_interopRequireDefault(r),i=n(91),u=_interopRequireDefault(i),c=\"function\"==typeof u.default&&\"symbol\"==typeof o.default?function(t){return typeof t}:function(t){return t&&\"function\"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?\"symbol\":typeof t};e.default=\"function\"==typeof u.default&&\"symbol\"===c(o.default)?function(t){return void 0===t?\"undefined\":c(t)}:function(t){return t&&\"function\"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?\"symbol\":void 0===t?\"undefined\":c(t)}},/* 55 */\r\n/***/\r\nfunction(t,e){e.f=Object.getOwnPropertySymbols},/* 56 */\r\n/***/\r\nfunction(t,e,n){\r\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\r\nvar r=n(37),o=n(29).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},/* 57 */\r\n/***/\r\nfunction(t,e,n){\r\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\r\nvar r=n(15);\r\n// eslint-disable-next-line no-prototype-builtins\r\nt.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==r(t)?t.split(\"\"):Object(t)}},/* 58 */\r\n/***/\r\nfunction(t,e,n){\r\n// false -> Array#indexOf\r\n// true  -> Array#includes\r\nvar r=n(10),o=n(38),i=n(59);t.exports=function(t){return function(e,n,u){var c,s=r(e),f=o(s.length),a=i(u,f);\r\n// Array#includes uses SameValueZero equality algorithm\r\n// eslint-disable-next-line no-self-compare\r\nif(t&&n!=n){for(;f>a;)\r\n// eslint-disable-next-line no-self-compare\r\nif((c=s[a++])!=c)return!0}else for(;f>a;a++)if((t||a in s)&&s[a]===n)return t||a||0;return!t&&-1}}},/* 59 */\r\n/***/\r\nfunction(t,e,n){var r=n(21),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},/* 60 */\r\n/***/\r\nfunction(t,e,n){t.exports={default:n(61),__esModule:!0}},/* 61 */\r\n/***/\r\nfunction(t,e,n){n(62);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},/* 62 */\r\n/***/\r\nfunction(t,e,n){var r=n(3);\r\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\nr(r.S+r.F*!n(5),\"Object\",{defineProperty:n(7).f})},/* 63 */\r\n/***/\r\nfunction(t,e,n){t.exports={default:n(87),__esModule:!0}},/* 64 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";e.__esModule=!0;var r=n(54),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!==(void 0===e?\"undefined\":(0,o.default)(e))&&\"function\"!=typeof e?t:e}},/* 65 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(100),o=_interopRequireDefault(r),i=n(104),u=_interopRequireDefault(i),c=n(54),s=_interopRequireDefault(c);e.default=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===e?\"undefined\":(0,s.default)(e)));t.prototype=(0,u.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},/* 66 */\r\n/***/\r\nfunction(t,e,n){n(42),n(43),n(48),n(73),n(84),n(85),t.exports=n(0).Promise},/* 67 */\r\n/***/\r\nfunction(t,e,n){var r=n(21),o=n(22);\r\n// true  -> String#at\r\n// false -> String#codePointAt\r\nt.exports=function(t){return function(e,n){var i,u,c=String(o(e)),s=r(n),f=c.length;return s<0||s>=f?t?\"\":void 0:(i=c.charCodeAt(s),i<55296||i>56319||s+1===f||(u=c.charCodeAt(s+1))<56320||u>57343?t?c.charAt(s):i:t?c.slice(s,s+2):u-56320+(i-55296<<10)+65536)}}},/* 68 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";var r=n(31),o=n(18),i=n(24),u={};\r\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\r\nn(8)(u,n(2)(\"iterator\"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+\" Iterator\")}},/* 69 */\r\n/***/\r\nfunction(t,e,n){var r=n(7),o=n(4),i=n(20);t.exports=n(5)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),c=u.length,s=0;c>s;)r.f(t,n=u[s++],e[n]);return t}},/* 70 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";var r=n(71),o=n(72),i=n(16),u=n(10);\r\n// 22.1.3.4 Array.prototype.entries()\r\n// 22.1.3.13 Array.prototype.keys()\r\n// 22.1.3.29 Array.prototype.values()\r\n// 22.1.3.30 Array.prototype[@@iterator]()\r\nt.exports=n(44)(Array,\"Array\",function(t,e){this._t=u(t),// target\r\nthis._i=0,// next index\r\nthis._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):\"keys\"==e?o(0,n):\"values\"==e?o(0,t[n]):o(0,[n,t[n]])},\"values\"),\r\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\r\ni.Arguments=i.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},/* 71 */\r\n/***/\r\nfunction(t,e){t.exports=function(){}},/* 72 */\r\n/***/\r\nfunction(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},/* 73 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";var r,o,i,u,c=n(23),s=n(1),f=n(14),a=n(49),l=n(3),p=n(6),v=n(17),d=n(74),h=n(75),_=n(50),y=n(51).set,b=n(80)(),g=n(32),m=n(52),w=n(53),x=s.TypeError,O=s.process,M=s.Promise,S=\"process\"==a(O),P=function(){},L=o=g.f,j=!!function(){try{\r\n// correct subclassing with @@species support\r\nvar t=M.resolve(1),e=(t.constructor={})[n(2)(\"species\")]=function(t){t(P,P)};\r\n// unhandled rejections tracking support, NodeJS Promise without it fails @@species test\r\nreturn(S||\"function\"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e}catch(t){}}(),k=function(t){var e;return!(!p(t)||\"function\"!=typeof(e=t.then))&&e},E=function(t,e){if(!t._n){t._n=!0;var n=t._c;b(function(){for(var r=t._v,o=1==t._s,i=0;n.length>i;)!function(e){var n,i,u=o?e.ok:e.fail,c=e.resolve,s=e.reject,f=e.domain;try{u?(o||(2==t._h&&C(t),t._h=1),!0===u?n=r:(f&&f.enter(),n=u(r),f&&f.exit()),n===e.promise?s(x(\"Promise-chain cycle\")):(i=k(n))?i.call(n,c,s):c(n)):s(r)}catch(t){s(t)}}(n[i++]);// variable length - can't use forEach\r\nt._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){y.call(s,function(){var e,n,r,o=t._v,i=T(t);if(i&&(e=m(function(){S?O.emit(\"unhandledRejection\",o,t):(n=s.onunhandledrejection)?n({promise:t,reason:o}):(r=s.console)&&r.error&&r.error(\"Unhandled promise rejection\",o)}),\r\n// Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\r\nt._h=S||T(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},T=function(t){return 1!==t._h&&0===(t._a||t._c).length},C=function(t){y.call(s,function(){var e;S?O.emit(\"rejectionHandled\",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},A=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,// unwrap\r\ne._v=t,e._s=2,e._a||(e._a=e._c.slice()),E(e,!0))},D=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;// unwrap\r\ntry{if(n===t)throw x(\"Promise can't be resolved itself\");(e=k(t))?b(function(){var r={_w:n,_d:!1};// wrap\r\ntry{e.call(t,f(D,r,1),f(A,r,1))}catch(t){A.call(r,t)}}):(n._v=t,n._s=1,E(n,!1))}catch(t){A.call({_w:n,_d:!1},t)}}};\r\n// constructor polyfill\r\nj||(\r\n// 25.4.3.1 Promise(executor)\r\nM=function(t){d(this,M,\"Promise\",\"_h\"),v(t),r.call(this);try{t(f(D,this,1),f(A,this,1))}catch(t){A.call(this,t)}},\r\n// eslint-disable-next-line no-unused-vars\r\nr=function(t){this._c=[],// <- awaiting reactions\r\nthis._a=void 0,// <- checked in isUnhandled reactions\r\nthis._s=0,// <- state\r\nthis._d=!1,// <- done\r\nthis._v=void 0,// <- value\r\nthis._h=0,// <- rejection state, 0 - default, 1 - handled, 2 - unhandled\r\nthis._n=!1},r.prototype=n(81)(M.prototype,{\r\n// 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\r\nthen:function(t,e){var n=L(_(this,M));return n.ok=\"function\"!=typeof t||t,n.fail=\"function\"==typeof e&&e,n.domain=S?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},\r\n// 25.4.5.1 Promise.prototype.catch(onRejected)\r\ncatch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=f(D,t,1),this.reject=f(A,t,1)},g.f=L=function(t){return t===M||t===u?new i(t):o(t)}),l(l.G+l.W+l.F*!j,{Promise:M}),n(24)(M,\"Promise\"),n(82)(\"Promise\"),u=n(0).Promise,\r\n// statics\r\nl(l.S+l.F*!j,\"Promise\",{\r\n// 25.4.4.5 Promise.reject(r)\r\nreject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(c||!j),\"Promise\",{\r\n// 25.4.4.6 Promise.resolve(x)\r\nresolve:function(t){return w(c&&this===u?M:this,t)}}),l(l.S+l.F*!(j&&n(83)(function(t){M.all(t).catch(P)})),\"Promise\",{\r\n// 25.4.4.1 Promise.all(iterable)\r\nall:function(t){var e=this,n=L(e),r=n.resolve,o=n.reject,i=m(function(){var n=[],i=0,u=1;h(t,!1,function(t){var c=i++,s=!1;n.push(void 0),u++,e.resolve(t).then(function(t){s||(s=!0,n[c]=t,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},\r\n// 25.4.4.4 Promise.race(iterable)\r\nrace:function(t){var e=this,n=L(e),r=n.reject,o=m(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},/* 74 */\r\n/***/\r\nfunction(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+\": incorrect invocation!\");return t}},/* 75 */\r\n/***/\r\nfunction(t,e,n){var r=n(14),o=n(76),i=n(77),u=n(4),c=n(38),s=n(78),f={},a={},e=t.exports=function(t,e,n,l,p){var v,d,h,_,y=p?function(){return t}:s(t),b=r(n,l,e?2:1),g=0;if(\"function\"!=typeof y)throw TypeError(t+\" is not iterable!\");\r\n// fast case for arrays with default iterator\r\nif(i(y)){for(v=c(t.length);v>g;g++)if((_=e?b(u(d=t[g])[0],d[1]):b(t[g]))===f||_===a)return _}else for(h=y.call(t);!(d=h.next()).done;)if((_=o(h,b,d.value,e))===f||_===a)return _};e.BREAK=f,e.RETURN=a},/* 76 */\r\n/***/\r\nfunction(t,e,n){\r\n// call something on iterator step with safe closing on error\r\nvar r=n(4);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},/* 77 */\r\n/***/\r\nfunction(t,e,n){\r\n// check on default Array iterator\r\nvar r=n(16),o=n(2)(\"iterator\"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},/* 78 */\r\n/***/\r\nfunction(t,e,n){var r=n(49),o=n(2)(\"iterator\"),i=n(16);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t[\"@@iterator\"]||i[r(t)]}},/* 79 */\r\n/***/\r\nfunction(t,e){\r\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\r\nt.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},/* 80 */\r\n/***/\r\nfunction(t,e,n){var r=n(1),o=n(51).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,c=r.Promise,s=\"process\"==n(15)(u);t.exports=function(){var t,e,n,f=function(){var r,o;for(s&&(r=u.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};\r\n// Node.js\r\nif(s)n=function(){u.nextTick(f)};else if(!i||r.navigator&&r.navigator.standalone)if(c&&c.resolve){var a=c.resolve();n=function(){a.then(f)}}else n=function(){\r\n// strange IE + webpack dev server bug - use .call(global)\r\no.call(r,f)};else{var l=!0,p=document.createTextNode(\"\");new i(f).observe(p,{characterData:!0}),// eslint-disable-line no-new\r\nn=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},/* 81 */\r\n/***/\r\nfunction(t,e,n){var r=n(8);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},/* 82 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";var r=n(1),o=n(0),i=n(7),u=n(5),c=n(2)(\"species\");t.exports=function(t){var e=\"function\"==typeof o[t]?o[t]:r[t];u&&e&&!e[c]&&i.f(e,c,{configurable:!0,get:function(){return this}})}},/* 83 */\r\n/***/\r\nfunction(t,e,n){var r=n(2)(\"iterator\"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},\r\n// eslint-disable-next-line no-throw-literal\r\nArray.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(t){}return n}},/* 84 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";\r\n// https://github.com/tc39/proposal-promise-finally\r\nvar r=n(3),o=n(0),i=n(1),u=n(50),c=n(53);r(r.P+r.R,\"Promise\",{finally:function(t){var e=u(this,o.Promise||i.Promise),n=\"function\"==typeof t;return this.then(n?function(n){return c(e,t()).then(function(){return n})}:t,n?function(n){return c(e,t()).then(function(){throw n})}:t)}})},/* 85 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";\r\n// https://github.com/tc39/proposal-promise-try\r\nvar r=n(3),o=n(32),i=n(52);r(r.S,\"Promise\",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},/* 86 */\r\n/***/\r\nfunction(t,e,n){var r,o;/*\r\n* loglevel - https://github.com/pimterry/loglevel\r\n*\r\n* Copyright (c) 2013 Tim Perry\r\n* Licensed under the MIT license.\r\n*/\r\n!function(i,u){\"use strict\";r=u,void 0!==(o=\"function\"==typeof r?r.call(e,n,e,t):r)&&(t.exports=o)}(0,function(){\"use strict\";\r\n// Cross-browser bind equivalent that works at least back to IE6\r\nfunction bindMethod(t,e){var n=t[e];if(\"function\"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){\r\n// Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\nreturn function(){return Function.prototype.apply.apply(n,[t,arguments])}}}\r\n// Build the best logging method possible for this env\r\n// Wherever possible we want to bind, not wrap, to preserve stack traces\r\nfunction realMethod(n){return\"debug\"===n&&(n=\"log\"),typeof console!==e&&(void 0!==console[n]?bindMethod(console,n):void 0!==console.log?bindMethod(console,\"log\"):t)}\r\n// These private functions always need `this` to be set properly\r\nfunction replaceLoggingMethods(e,r){/*jshint validthis:true */\r\nfor(var o=0;o<n.length;o++){var i=n[o];this[i]=o<e?t:this.methodFactory(i,e,r)}\r\n// Define log.log as an alias for log.debug\r\nthis.log=this.debug}\r\n// In old IE versions, the console isn't present until you first open it.\r\n// We build realMethod() replacements here that regenerate logging methods\r\nfunction enableLoggingWhenConsoleArrives(t,n,r){return function(){typeof console!==e&&(replaceLoggingMethods.call(this,n,r),this[t].apply(this,arguments))}}\r\n// By default, we use closely bound real methods wherever possible, and\r\n// otherwise we wait for a console to appear, and then try again.\r\nfunction defaultMethodFactory(t,e,n){/*jshint validthis:true */\r\nreturn realMethod(t)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(t,r,o){function persistLevelIfPossible(t){var r=(n[t]||\"silent\").toUpperCase();if(typeof window!==e){\r\n// Use localStorage if available\r\ntry{return void(window.localStorage[c]=r)}catch(t){}\r\n// Use session cookie as fallback\r\ntry{window.document.cookie=encodeURIComponent(c)+\"=\"+r+\";\"}catch(t){}}}function getPersistedLevel(){var t;if(typeof window!==e){try{t=window.localStorage[c]}catch(t){}\r\n// Fallback to cookies if local storage gives us nothing\r\nif(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+\"=\");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}\r\n// If the stored level is not valid, treat it as if nothing was stored.\r\nreturn void 0===u.levels[t]&&(t=void 0),t}}var i,u=this,c=\"loglevel\";t&&(c+=\":\"+t),/*\r\n       *\r\n       * Public logger API - see https://github.com/pimterry/loglevel for details\r\n       *\r\n       */\r\nu.name=t,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=o||defaultMethodFactory,u.getLevel=function(){return i},u.setLevel=function(n,r){if(\"string\"==typeof n&&void 0!==u.levels[n.toUpperCase()]&&(n=u.levels[n.toUpperCase()]),!(\"number\"==typeof n&&n>=0&&n<=u.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+n;if(i=n,!1!==r&&// defaults to true\r\npersistLevelIfPossible(n),replaceLoggingMethods.call(u,n,t),typeof console===e&&n<u.levels.SILENT)return\"No console available for logging\"},u.setDefaultLevel=function(t){getPersistedLevel()||u.setLevel(t,!1)},u.enableAll=function(t){u.setLevel(u.levels.TRACE,t)},u.disableAll=function(t){u.setLevel(u.levels.SILENT,t)};\r\n// Initialize with the right level\r\nvar s=getPersistedLevel();null==s&&(s=null==r?\"WARN\":r),u.setLevel(s,!1)}\r\n// Slightly dubious tricks to cut down minimized file size\r\nvar t=function(){},e=\"undefined\",n=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],r=new Logger,o={};r.getLogger=function(t){if(\"string\"!=typeof t||\"\"===t)throw new TypeError(\"You must supply a name when creating a logger.\");var e=o[t];return e||(e=o[t]=new Logger(t,r.getLevel(),r.methodFactory)),e};\r\n// Grab the current global log variable in case of overwrite\r\nvar i=typeof window!==e?window.log:void 0;return r.noConflict=function(){return typeof window!==e&&window.log===r&&(window.log=i),r},r.getLoggers=function(){return o},r})},/* 87 */\r\n/***/\r\nfunction(t,e,n){n(88),t.exports=n(0).Object.getPrototypeOf},/* 88 */\r\n/***/\r\nfunction(t,e,n){\r\n// 19.1.2.9 Object.getPrototypeOf(O)\r\nvar r=n(30),o=n(47);n(39)(\"getPrototypeOf\",function(){return function(t){return o(r(t))}})},/* 89 */\r\n/***/\r\nfunction(t,e,n){t.exports={default:n(90),__esModule:!0}},/* 90 */\r\n/***/\r\nfunction(t,e,n){n(43),n(48),t.exports=n(33).f(\"iterator\")},/* 91 */\r\n/***/\r\nfunction(t,e,n){t.exports={default:n(92),__esModule:!0}},/* 92 */\r\n/***/\r\nfunction(t,e,n){n(93),n(42),n(98),n(99),t.exports=n(0).Symbol},/* 93 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";\r\n// ECMAScript 6 symbols shim\r\nvar r=n(1),o=n(9),i=n(5),u=n(3),c=n(45),s=n(94).KEY,f=n(13),a=n(28),l=n(24),p=n(19),v=n(2),d=n(33),h=n(34),_=n(95),y=n(96),b=n(4),g=n(6),m=n(10),w=n(26),x=n(18),O=n(31),M=n(97),S=n(40),P=n(7),L=n(20),j=S.f,k=P.f,E=M.f,R=r.Symbol,T=r.JSON,C=T&&T.stringify,A=v(\"_hidden\"),D=v(\"toPrimitive\"),F={}.propertyIsEnumerable,q=a(\"symbol-registry\"),I=a(\"symbols\"),N=a(\"op-symbols\"),B=Object.prototype,W=\"function\"==typeof R,G=r.QObject,U=!G||!G.prototype||!G.prototype.findChild,V=i&&f(function(){return 7!=O(k({},\"a\",{get:function(){return k(this,\"a\",{value:7}).a}})).a})?function(t,e,n){var r=j(B,e);r&&delete B[e],k(t,e,n),r&&t!==B&&k(B,e,r)}:k,H=function(t){var e=I[t]=O(R.prototype);return e._k=t,e},K=W&&\"symbol\"==typeof R.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof R},J=function(t,e,n){return t===B&&J(N,e,n),b(t),e=w(e,!0),b(n),o(I,e)?(n.enumerable?(o(t,A)&&t[A][e]&&(t[A][e]=!1),n=O(n,{enumerable:x(0,!1)})):(o(t,A)||k(t,A,x(1,{})),t[A][e]=!0),V(t,e,n)):k(t,e,n)},Y=function(t,e){b(t);for(var n,r=_(e=m(e)),o=0,i=r.length;i>o;)J(t,n=r[o++],e[n]);return t},z=function(t,e){return void 0===e?O(t):Y(O(t),e)},Q=function(t){var e=F.call(this,t=w(t,!0));return!(this===B&&o(I,t)&&!o(N,t))&&(!(e||!o(this,t)||!o(I,t)||o(this,A)&&this[A][t])||e)},X=function(t,e){if(t=m(t),e=w(e,!0),t!==B||!o(I,e)||o(N,e)){var n=j(t,e);return!n||!o(I,e)||o(t,A)&&t[A][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=E(m(t)),r=[],i=0;n.length>i;)o(I,e=n[i++])||e==A||e==s||r.push(e);return r},$=function(t){for(var e,n=t===B,r=E(n?N:m(t)),i=[],u=0;r.length>u;)!o(I,e=r[u++])||n&&!o(B,e)||i.push(I[e]);return i};\r\n// 19.4.1.1 Symbol([description])\r\nW||(R=function(){if(this instanceof R)throw TypeError(\"Symbol is not a constructor!\");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(N,n),o(this,A)&&o(this[A],t)&&(this[A][t]=!1),V(this,t,x(1,n))};return i&&U&&V(B,t,{configurable:!0,set:e}),H(t)},c(R.prototype,\"toString\",function(){return this._k}),S.f=X,P.f=J,n(56).f=M.f=Z,n(35).f=Q,n(55).f=$,i&&!n(23)&&c(B,\"propertyIsEnumerable\",Q,!0),d.f=function(t){return H(v(t))}),u(u.G+u.W+u.F*!W,{Symbol:R});for(var tt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),et=0;tt.length>et;)v(tt[et++]);for(var nt=L(v.store),rt=0;nt.length>rt;)h(nt[rt++]);u(u.S+u.F*!W,\"Symbol\",{\r\n// 19.4.2.1 Symbol.for(key)\r\nfor:function(t){return o(q,t+=\"\")?q[t]:q[t]=R(t)},\r\n// 19.4.2.5 Symbol.keyFor(sym)\r\nkeyFor:function(t){if(!K(t))throw TypeError(t+\" is not a symbol!\");for(var e in q)if(q[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),u(u.S+u.F*!W,\"Object\",{\r\n// 19.1.2.2 Object.create(O [, Properties])\r\ncreate:z,\r\n// 19.1.2.4 Object.defineProperty(O, P, Attributes)\r\ndefineProperty:J,\r\n// 19.1.2.3 Object.defineProperties(O, Properties)\r\ndefineProperties:Y,\r\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\r\ngetOwnPropertyDescriptor:X,\r\n// 19.1.2.7 Object.getOwnPropertyNames(O)\r\ngetOwnPropertyNames:Z,\r\n// 19.1.2.8 Object.getOwnPropertySymbols(O)\r\ngetOwnPropertySymbols:$}),\r\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\r\nT&&u(u.S+u.F*(!W||f(function(){var t=R();\r\n// MS Edge converts symbol values to JSON as {}\r\n// WebKit converts symbol values to JSON as null\r\n// V8 throws on boxed symbols\r\nreturn\"[null]\"!=C([t])||\"{}\"!=C({a:t})||\"{}\"!=C(Object(t))})),\"JSON\",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!K(t))// IE8 returns string on undefined\r\nreturn y(e)||(e=function(t,e){if(\"function\"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,C.apply(T,r)}}),\r\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\r\nR.prototype[D]||n(8)(R.prototype,D,R.prototype.valueOf),\r\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\r\nl(R,\"Symbol\"),\r\n// 20.2.1.9 Math[@@toStringTag]\r\nl(Math,\"Math\",!0),\r\n// 24.3.3 JSON[@@toStringTag]\r\nl(r.JSON,\"JSON\",!0)},/* 94 */\r\n/***/\r\nfunction(t,e,n){var r=n(19)(\"meta\"),o=n(6),i=n(9),u=n(7).f,c=0,s=Object.isExtensible||function(){return!0},f=!n(13)(function(){return s(Object.preventExtensions({}))}),a=function(t){u(t,r,{value:{i:\"O\"+ ++c,// object ID\r\nw:{}}})},l=function(t,e){\r\n// return primitive with prefix\r\nif(!o(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!i(t,r)){\r\n// can't set metadata to uncaught frozen object\r\nif(!s(t))return\"F\";\r\n// not necessary to add metadata\r\nif(!e)return\"E\";\r\n// add missing metadata\r\na(t)}return t[r].i},p=function(t,e){if(!i(t,r)){\r\n// can't set metadata to uncaught frozen object\r\nif(!s(t))return!0;\r\n// not necessary to add metadata\r\nif(!e)return!1;\r\n// add missing metadata\r\na(t)}return t[r].w},v=function(t){return f&&d.NEED&&s(t)&&!i(t,r)&&a(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:v}},/* 95 */\r\n/***/\r\nfunction(t,e,n){\r\n// all enumerable object keys, includes symbols\r\nvar r=n(20),o=n(55),i=n(35);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,c=n(t),s=i.f,f=0;c.length>f;)s.call(t,u=c[f++])&&e.push(u);return e}},/* 96 */\r\n/***/\r\nfunction(t,e,n){\r\n// 7.2.2 IsArray(argument)\r\nvar r=n(15);t.exports=Array.isArray||function(t){return\"Array\"==r(t)}},/* 97 */\r\n/***/\r\nfunction(t,e,n){\r\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\r\nvar r=n(10),o=n(56).f,i={}.toString,u=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&\"[object Window]\"==i.call(t)?c(t):o(r(t))}},/* 98 */\r\n/***/\r\nfunction(t,e,n){n(34)(\"asyncIterator\")},/* 99 */\r\n/***/\r\nfunction(t,e,n){n(34)(\"observable\")},/* 100 */\r\n/***/\r\nfunction(t,e,n){t.exports={default:n(101),__esModule:!0}},/* 101 */\r\n/***/\r\nfunction(t,e,n){n(102),t.exports=n(0).Object.setPrototypeOf},/* 102 */\r\n/***/\r\nfunction(t,e,n){\r\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\r\nvar r=n(3);r(r.S,\"Object\",{setPrototypeOf:n(103).set})},/* 103 */\r\n/***/\r\nfunction(t,e,n){\r\n// Works with __proto__ only. Old v8 can't work with null proto objects.\r\n/* eslint-disable no-proto */\r\nvar r=n(6),o=n(4),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?// eslint-disable-line\r\nfunction(t,e,r){try{r=n(14)(Function.call,n(40).f(Object.prototype,\"__proto__\").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},/* 104 */\r\n/***/\r\nfunction(t,e,n){t.exports={default:n(105),__esModule:!0}},/* 105 */\r\n/***/\r\nfunction(t,e,n){n(106);var r=n(0).Object;t.exports=function(t,e){return r.create(t,e)}},/* 106 */\r\n/***/\r\nfunction(t,e,n){var r=n(3);\r\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nr(r.S,\"Object\",{create:n(31)})},/* 107 */\r\n,/* 108 */\r\n,/* 109 */\r\n,/* 110 */\r\n,/* 111 */\r\n,/* 112 */\r\n,/* 113 */\r\n,/* 114 */\r\n,/* 115 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(63),o=_interopRequireDefault(r),i=n(11),u=_interopRequireDefault(i),c=n(12),s=_interopRequireDefault(c),f=n(64),a=_interopRequireDefault(f),l=n(65),p=_interopRequireDefault(l),v=n(116),d=_interopRequireDefault(v),h=function(t){function MiniBus(){return(0,u.default)(this,MiniBus),(0,a.default)(this,(MiniBus.__proto__||(0,o.default)(MiniBus)).call(this))}/**\r\n   * Post a message for routing. Message is routed directly to the external routing _onPostMessage.\r\n   * @param  {Message} inMsg            JSON with mandatory Message structure {id, type, from, to}\r\n   * @param  {Callback} responseCallback Optional callback if a response is expected from the request. A response will be always sent, even if it is a \"Timeout\".\r\n   * @return {number}                  the Message id\r\n   */\r\nreturn(0,p.default)(MiniBus,t),(0,s.default)(MiniBus,[{key:\"postMessage\",value:function(t,e,n){var r=this;\r\n//always send to external (to core MessageBus)\r\nreturn r._genId(t),r._responseCallback(t,e,n),r._onPostMessage(t),t.id}},{key:\"_onMessage\",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?(e._publishOn(n,t),t.to.startsWith(\"hyperty\")||e._publishOnDefault(t)):e._publishOnDefault(t)}}}]),MiniBus}(d.default);/**\r\n                  * Copyright 2016 PT Inovao e Sistemas SA\r\n                  * Copyright 2016 INESC-ID\r\n                  * Copyright 2016 QUOBIS NETWORKS SL\r\n                  * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n                  * Copyright 2016 ORANGE SA\r\n                  * Copyright 2016 Deutsche Telekom AG\r\n                  * Copyright 2016 Apizee\r\n                  * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n                  *\r\n                  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n                  * you may not use this file except in compliance with the License.\r\n                  * You may obtain a copy of the License at\r\n                  *\r\n                  *   http://www.apache.org/licenses/LICENSE-2.0\r\n                  *\r\n                  * Unless required by applicable law or agreed to in writing, software\r\n                  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n                  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n                  * See the License for the specific language governing permissions and\r\n                  * limitations under the License.\r\n                  **/\r\ne.default=h,t.exports=e.default},/* 116 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(41),o=_interopRequireDefault(r),i=n(11),u=_interopRequireDefault(i),c=n(12),s=_interopRequireDefault(c),f=n(86),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(f),l=a.getLogger(\"Bus\"),p=function(){/* private\r\n  _msgId: number;\r\n  _subscriptions: <url: MsgListener[]>\r\n   _responseTimeOut: number\r\n  _responseCallbacks: <url+id: (msg) => void>\r\n   */\r\nfunction Bus(){(0,u.default)(this,Bus);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=15e3,//default to 3s\r\nt._responseCallbacks={},t._registerExternalListener()}/**\r\n  * Register listener to receive message when \"msg.to === url\".\r\n  * Special url \"*\" for default listener is accepted to intercept all messages.\r\n  * @param {URL} url Address to intercept, tha is in the message \"to\"\r\n  * @param {Listener} listener listener\r\n  * @return {MsgListener} instance of MsgListener\r\n  */\r\nreturn(0,s.default)(Bus,[{key:\"addListener\",value:function(t,e){var n=this,r=new v(n._subscriptions,t,e),o=n._subscriptions[t];return o||(o=[],n._subscriptions[t]=o),o.push(r),r}},{key:\"addResponseListener\",value:function(t,e,n){this._responseCallbacks[t+e]=n}},{key:\"removeResponseListener\",value:function(t,e){delete this._responseCallbacks[t+e]}},{key:\"removeAllListenersOf\",value:function(t){delete this._subscriptions[t]}},{key:\"bind\",value:function(t,e,n){var r=this,o=this;return{thisListener:o.addListener(t,function(t){n.postMessage(t)}),targetListener:n.addListener(e,function(t){o.postMessage(t)}),unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:\"_publishOnDefault\",value:function(t){\r\n//is there any \"*\" (default) listeners?\r\nvar e=this._subscriptions[\"*\"];e&&this._publishOn(e,t)}},{key:\"_publishOn\",value:function(t,e){t.forEach(function(t){t._callback(e)})}},{key:\"_responseCallback\",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;\r\n//automatic management of response handlers\r\nif(e){var o=t.from+t.id;r._responseCallbacks[o]=e,n&&setTimeout(function(){var e=r._responseCallbacks[o];if(delete r._responseCallbacks[o],e){e({id:t.id,type:\"response\",body:{code:408,desc:\"Response timeout!\",value:t}})}},r._responseTimeOut)}}},{key:\"_onResponse\",value:function(t){var e=this;if(\"response\"===t.type){var n=t.to+t.id,r=e._responseCallbacks[n];if(t.body.code>=200&&\r\n//if it's a provisional response, don't delete response listener\r\ndelete e._responseCallbacks[n],r)return r(t),!0}return!1}},{key:\"_onMessage\",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?e._publishOn(n,t):e._publishOnDefault(t)}}},{key:\"_genId\",value:function(t){\r\n//TODO: how do we manage message ID's? Should it be a global runtime counter, or per URL address?\r\n//Global counter will not work, because there will be multiple MiniBus instances!\r\n//Per URL, can be a lot of data to maintain!\r\n//Maybe a counter per MiniBus instance. This is the assumed solution for now.\r\nt.id&&0!==t.id||(this._msgId++,t.id=this._msgId)}},{key:\"postMessage\",value:function(t,e){}},{key:\"postMessageWithRetries\",value:function(t,e,n){var r=this,i=0,u=function(){return new o.default(function(e,o){r.postMessage(t,function(r){408===r.body.code||500===r.body.code?o():(l.info(\"[Bus.postMessageWithRetries] msg delivered: \",t),n(r),e())})})};!function tryAgain(){u().then(function(){},function(){if(l.warn(\"[Bus.postMessageWithRetries] Message Bounced (retry \"+i+\"): '\",t),!(i++<e)){var n=\"[Error] Message Bounced (delivery attempts \"+e+\"): '\";throw new Error(n+t)}tryAgain()})}()}},{key:\"_onPostMessage\",value:function(t){}},{key:\"_registerExternalListener\",value:function(){}}]),Bus}(),v=function(){/* private\r\n  _subscriptions: <string: MsgListener[]>;\r\n  _url: string;\r\n  _callback: (msg) => void;\r\n  */\r\nfunction MsgListener(t,e,n){(0,u.default)(this,MsgListener);var r=this;r._subscriptions=t,r._url=e,r._callback=n}return(0,s.default)(MsgListener,[{key:\"remove\",/**\r\n     * Remove this listener from the Bus\r\n     */\r\nvalue:function(){var t=this,e=t._subscriptions[t._url];if(e){var n=e.indexOf(t);e.splice(n,1),\r\n//if there are no listeners, remove the subscription entirely.\r\n0===e.length&&delete t._subscriptions[t._url]}}},{key:\"url\",get:function(){return this._url}}]),MsgListener}();e.default=p,t.exports=e.default},/* 117 */\r\n,/* 118 */\r\n,/* 119 */\r\n,/* 120 */\r\n,/* 121 */\r\n,/* 122 */\r\n,/* 123 */\r\n,/* 124 */\r\n,/* 125 */\r\n,/* 126 */\r\n,/* 127 */\r\n,/* 128 */\r\n,/* 129 */\r\n,/* 130 */\r\n,/* 131 */\r\n,/* 132 */\r\n,/* 133 */\r\n,/* 134 */\r\n,/* 135 */\r\n/***/\r\nfunction(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(115),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default,/**\r\n                                     * Copyright 2016 PT Inovao e Sistemas SA\r\n                                     * Copyright 2016 INESC-ID\r\n                                     * Copyright 2016 QUOBIS NETWORKS SL\r\n                                     * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n                                     * Copyright 2016 ORANGE SA\r\n                                     * Copyright 2016 Deutsche Telekom AG\r\n                                     * Copyright 2016 Apizee\r\n                                     * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n                                     *\r\n                                     * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n                                     * you may not use this file except in compliance with the License.\r\n                                     * You may obtain a copy of the License at\r\n                                     *\r\n                                     *   http://www.apache.org/licenses/LICENSE-2.0\r\n                                     *\r\n                                     * Unless required by applicable law or agreed to in writing, software\r\n                                     * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n                                     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n                                     * See the License for the specific language governing permissions and\r\n                                     * limitations under the License.\r\n                                     **/\r\nt.exports=e.default}])});","// version: 0.11.1\r\n// date: Fri Jan 12 2018 12:42:38 GMT+0000 (WET)\r\n// licence: \r\n/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\n\r\n\r\n// version: 0.11.1\r\n// date: Fri Jan 12 2018 12:42:38 GMT+0000 (WET)\r\n// licence: \r\n/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\n\r\n\r\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"sandbox\",[],t):\"object\"==typeof exports?exports.sandbox=t():e.sandbox=t()}(\"undefined\"!=typeof self?self:this,function(){/******/\r\nreturn function(e){/******/\r\n/******/\r\n// The require function\r\n/******/\r\nfunction __webpack_require__(n){/******/\r\n/******/\r\n// Check if module is in cache\r\n/******/\r\nif(t[n])/******/\r\nreturn t[n].exports;/******/\r\n// Create a new module (and put it into the cache)\r\n/******/\r\nvar r=t[n]={/******/\r\ni:n,/******/\r\nl:!1,/******/\r\nexports:{}};/******/\r\n/******/\r\n// Return the exports of the module\r\n/******/\r\n/******/\r\n/******/\r\n// Execute the module function\r\n/******/\r\n/******/\r\n/******/\r\n// Flag the module as loaded\r\n/******/\r\nreturn e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}// webpackBootstrap\r\n/******/\r\n// The module cache\r\n/******/\r\nvar t={};/******/\r\n/******/\r\n// Load entry module and return exports\r\n/******/\r\n/******/\r\n/******/\r\n/******/\r\n// expose the modules object (__webpack_modules__)\r\n/******/\r\n/******/\r\n/******/\r\n// expose the module cache\r\n/******/\r\n/******/\r\n/******/\r\n// define getter function for harmony exports\r\n/******/\r\n/******/\r\n/******/\r\n// getDefaultExport function for compatibility with non-harmony modules\r\n/******/\r\n/******/\r\n/******/\r\n// Object.prototype.hasOwnProperty.call\r\n/******/\r\n/******/\r\n/******/\r\n// __webpack_public_path__\r\n/******/\r\nreturn __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){/******/\r\n__webpack_require__.o(e,t)||/******/\r\nObject.defineProperty(e,t,{/******/\r\nconfigurable:!1,/******/\r\nenumerable:!0,/******/\r\nget:n})},__webpack_require__.n=function(e){/******/\r\nvar t=e&&e.__esModule?/******/\r\nfunction(){return e.default}:/******/\r\nfunction(){return e};/******/\r\n/******/\r\nreturn __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=133)}([/* 0 */\r\n/***/\r\nfunction(e,t){var n=e.exports={version:\"2.5.3\"};\"number\"==typeof __e&&(__e=n)},/* 1 */\r\n/***/\r\nfunction(e,t){\r\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\r\nvar n=e.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},/* 2 */\r\n/***/\r\nfunction(e,t,n){var r=n(28)(\"wks\"),o=n(19),i=n(1).Symbol,u=\"function\"==typeof i;(e.exports=function(e){return r[e]||(r[e]=u&&i[e]||(u?i:o)(\"Symbol.\"+e))}).store=r},/* 3 */\r\n/***/\r\nfunction(e,t,n){var r=n(1),o=n(0),i=n(14),u=n(8),s=function(e,t,n){var c,a,f,l=e&s.F,p=e&s.G,d=e&s.S,v=e&s.P,y=e&s.B,_=e&s.W,h=p?o:o[t]||(o[t]={}),b=h.prototype,g=p?r:d?r[t]:(r[t]||{}).prototype;p&&(n=t);for(c in n)\r\n// contains in native\r\n(a=!l&&g&&void 0!==g[c])&&c in h||(\r\n// export native or passed\r\nf=a?g[c]:n[c],\r\n// prevent global pollution for namespaces\r\nh[c]=p&&\"function\"!=typeof g[c]?n[c]:y&&a?i(f,r):_&&g[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):v&&\"function\"==typeof f?i(Function.call,f):f,\r\n// export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\r\nv&&((h.virtual||(h.virtual={}))[c]=f,\r\n// export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\r\ne&s.R&&b&&!b[c]&&u(b,c,f)))};\r\n// type bitmap\r\ns.F=1,// forced\r\ns.G=2,// global\r\ns.S=4,// static\r\ns.P=8,// proto\r\ns.B=16,// bind\r\ns.W=32,// wrap\r\ns.U=64,// safe\r\ns.R=128,// real proto method for `library`\r\ne.exports=s},/* 4 */\r\n/***/\r\nfunction(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+\" is not an object!\");return e}},/* 5 */\r\n/***/\r\nfunction(e,t,n){\r\n// Thank's IE8 for his funny defineProperty\r\ne.exports=!n(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},/* 6 */\r\n/***/\r\nfunction(e,t){e.exports=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e}},/* 7 */\r\n/***/\r\nfunction(e,t,n){var r=n(4),o=n(36),i=n(26),u=Object.defineProperty;t.f=n(5)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return u(e,t,n)}catch(e){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(e[t]=n.value),e}},/* 8 */\r\n/***/\r\nfunction(e,t,n){var r=n(7),o=n(18);e.exports=n(5)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},/* 9 */\r\n/***/\r\nfunction(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},/* 10 */\r\n/***/\r\nfunction(e,t,n){\r\n// to indexed object, toObject with fallback for non-array-like ES3 strings\r\nvar r=n(57),o=n(22);e.exports=function(e){return r(o(e))}},/* 11 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}},/* 12 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";t.__esModule=!0;var r=n(60),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}()},/* 13 */\r\n/***/\r\nfunction(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},/* 14 */\r\n/***/\r\nfunction(e,t,n){\r\n// optional / simple context binding\r\nvar r=n(17);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},/* 15 */\r\n/***/\r\nfunction(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},/* 16 */\r\n/***/\r\nfunction(e,t){e.exports={}},/* 17 */\r\n/***/\r\nfunction(e,t){e.exports=function(e){if(\"function\"!=typeof e)throw TypeError(e+\" is not a function!\");return e}},/* 18 */\r\n/***/\r\nfunction(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},/* 19 */\r\n/***/\r\nfunction(e,t){var n=0,r=Math.random();e.exports=function(e){return\"Symbol(\".concat(void 0===e?\"\":e,\")_\",(++n+r).toString(36))}},/* 20 */\r\n/***/\r\nfunction(e,t,n){\r\n// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\nvar r=n(37),o=n(29);e.exports=Object.keys||function(e){return r(e,o)}},/* 21 */\r\n/***/\r\nfunction(e,t){\r\n// 7.1.4 ToInteger\r\nvar n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},/* 22 */\r\n/***/\r\nfunction(e,t){\r\n// 7.2.1 RequireObjectCoercible(argument)\r\ne.exports=function(e){if(void 0==e)throw TypeError(\"Can't call method on  \"+e);return e}},/* 23 */\r\n/***/\r\nfunction(e,t){e.exports=!0},/* 24 */\r\n/***/\r\nfunction(e,t,n){var r=n(7).f,o=n(9),i=n(2)(\"toStringTag\");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},/* 25 */\r\n/***/\r\nfunction(e,t,n){var r=n(6),o=n(1).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},/* 26 */\r\n/***/\r\nfunction(e,t,n){\r\n// 7.1.1 ToPrimitive(input [, PreferredType])\r\nvar r=n(6);\r\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\r\n// and the second argument - flag - preferred type is a string\r\ne.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&\"function\"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if(\"function\"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&\"function\"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError(\"Can't convert object to primitive value\")}},/* 27 */\r\n/***/\r\nfunction(e,t,n){var r=n(28)(\"keys\"),o=n(19);e.exports=function(e){return r[e]||(r[e]=o(e))}},/* 28 */\r\n/***/\r\nfunction(e,t,n){var r=n(1),o=r[\"__core-js_shared__\"]||(r[\"__core-js_shared__\"]={});e.exports=function(e){return o[e]||(o[e]={})}},/* 29 */\r\n/***/\r\nfunction(e,t){\r\n// IE 8- don't enum bug keys\r\ne.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},/* 30 */\r\n/***/\r\nfunction(e,t,n){\r\n// 7.1.13 ToObject(argument)\r\nvar r=n(22);e.exports=function(e){return Object(r(e))}},/* 31 */\r\n/***/\r\nfunction(e,t,n){\r\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nvar r=n(4),o=n(69),i=n(29),u=n(27)(\"IE_PROTO\"),s=function(){},c=function(){\r\n// Thrash, waste and sodomy: IE GC bug\r\nvar e,t=n(25)(\"iframe\"),r=i.length;for(t.style.display=\"none\",n(46).appendChild(t),t.src=\"javascript:\",// eslint-disable-line no-script-url\r\n// createDict = iframe.contentWindow.Object;\r\n// html.removeChild(iframe);\r\ne=t.contentWindow.document,e.open(),e.write(\"<script>document.F=Object<\\/script>\"),e.close(),c=e.F;r--;)delete c.prototype[i[r]];return c()};e.exports=Object.create||function(e,t){var n;\r\n// add \"__proto__\" for Object.getPrototypeOf polyfill\r\nreturn null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[u]=e):n=c(),void 0===t?n:o(n,t)}},/* 32 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";function PromiseCapability(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError(\"Bad Promise constructor\");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}\r\n// 25.4.1.5 NewPromiseCapability(C)\r\nvar r=n(17);e.exports.f=function(e){return new PromiseCapability(e)}},/* 33 */\r\n/***/\r\nfunction(e,t,n){t.f=n(2)},/* 34 */\r\n/***/\r\nfunction(e,t,n){var r=n(1),o=n(0),i=n(23),u=n(33),s=n(7).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});\"_\"==e.charAt(0)||e in t||s(t,e,{value:u.f(e)})}},/* 35 */\r\n/***/\r\nfunction(e,t){t.f={}.propertyIsEnumerable},/* 36 */\r\n/***/\r\nfunction(e,t,n){e.exports=!n(5)&&!n(13)(function(){return 7!=Object.defineProperty(n(25)(\"div\"),\"a\",{get:function(){return 7}}).a})},/* 37 */\r\n/***/\r\nfunction(e,t,n){var r=n(9),o=n(10),i=n(58)(!1),u=n(27)(\"IE_PROTO\");e.exports=function(e,t){var n,s=o(e),c=0,a=[];for(n in s)n!=u&&r(s,n)&&a.push(n);\r\n// Don't enum bug & hidden keys\r\nfor(;t.length>c;)r(s,n=t[c++])&&(~i(a,n)||a.push(n));return a}},/* 38 */\r\n/***/\r\nfunction(e,t,n){\r\n// 7.1.15 ToLength\r\nvar r=n(21),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},/* 39 */\r\n/***/\r\nfunction(e,t,n){\r\n// most Object methods by ES6 should accept primitives\r\nvar r=n(3),o=n(0),i=n(13);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],u={};u[e]=t(n),r(r.S+r.F*i(function(){n(1)}),\"Object\",u)}},/* 40 */\r\n/***/\r\nfunction(e,t,n){var r=n(35),o=n(18),i=n(10),u=n(26),s=n(9),c=n(36),a=Object.getOwnPropertyDescriptor;t.f=n(5)?a:function(e,t){if(e=i(e),t=u(t,!0),c)try{return a(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},/* 41 */\r\n/***/\r\nfunction(e,t,n){e.exports={default:n(66),__esModule:!0}},/* 42 */\r\n/***/\r\nfunction(e,t){},/* 43 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";var r=n(67)(!0);\r\n// 21.1.3.27 String.prototype[@@iterator]()\r\nn(44)(String,\"String\",function(e){this._t=String(e),// target\r\nthis._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},/* 44 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";var r=n(23),o=n(3),i=n(45),u=n(8),s=n(9),c=n(16),a=n(68),f=n(24),l=n(47),p=n(2)(\"iterator\"),d=!([].keys&&\"next\"in[].keys()),v=function(){return this};e.exports=function(e,t,n,y,_,h,b){a(n,t,y);var g,m,x,w=function(e){if(!d&&e in P)return P[e];switch(e){case\"keys\":case\"values\":return function(){return new n(this,e)}}return function(){return new n(this,e)}},O=t+\" Iterator\",S=\"values\"==_,M=!1,P=e.prototype,k=P[p]||P[\"@@iterator\"]||_&&P[_],R=!d&&k||w(_),L=_?S?w(\"entries\"):R:void 0,j=\"Array\"==t?P.entries||k:k;if(\r\n// Fix native\r\nj&&(x=l(j.call(new e)))!==Object.prototype&&x.next&&(\r\n// Set @@toStringTag to native iterators\r\nf(x,O,!0),\r\n// fix for some old engines\r\nr||s(x,p)||u(x,p,v)),\r\n// fix Array#{values, @@iterator}.name in V8 / FF\r\nS&&k&&\"values\"!==k.name&&(M=!0,R=function(){return k.call(this)}),\r\n// Define iterator\r\nr&&!b||!d&&!M&&P[p]||u(P,p,R),\r\n// Plug for library\r\nc[t]=R,c[O]=v,_)if(g={values:S?R:w(\"values\"),keys:h?R:w(\"keys\"),entries:L},b)for(m in g)m in P||i(P,m,g[m]);else o(o.P+o.F*(d||M),t,g);return g}},/* 45 */\r\n/***/\r\nfunction(e,t,n){e.exports=n(8)},/* 46 */\r\n/***/\r\nfunction(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},/* 47 */\r\n/***/\r\nfunction(e,t,n){\r\n// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\nvar r=n(9),o=n(30),i=n(27)(\"IE_PROTO\"),u=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},/* 48 */\r\n/***/\r\nfunction(e,t,n){n(70);for(var r=n(1),o=n(8),i=n(16),u=n(2)(\"toStringTag\"),s=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),c=0;c<s.length;c++){var a=s[c],f=r[a],l=f&&f.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},/* 49 */\r\n/***/\r\nfunction(e,t,n){\r\n// getting tag from 19.1.3.6 Object.prototype.toString()\r\nvar r=n(15),o=n(2)(\"toStringTag\"),i=\"Arguments\"==r(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(n=u(t=Object(e),o))?n:i?r(t):\"Object\"==(s=r(t))&&\"function\"==typeof t.callee?\"Arguments\":s}},/* 50 */\r\n/***/\r\nfunction(e,t,n){\r\n// 7.3.20 SpeciesConstructor(O, defaultConstructor)\r\nvar r=n(4),o=n(17),i=n(2)(\"species\");e.exports=function(e,t){var n,u=r(e).constructor;return void 0===u||void 0==(n=r(u)[i])?t:o(n)}},/* 51 */\r\n/***/\r\nfunction(e,t,n){var r,o,i,u=n(14),s=n(79),c=n(46),a=n(25),f=n(1),l=f.process,p=f.setImmediate,d=f.clearImmediate,v=f.MessageChannel,y=f.Dispatch,_=0,h={},b=function(){var e=+this;\r\n// eslint-disable-next-line no-prototype-builtins\r\nif(h.hasOwnProperty(e)){var t=h[e];delete h[e],t()}},g=function(e){b.call(e.data)};\r\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\r\np&&d||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return h[++_]=function(){\r\n// eslint-disable-next-line no-new-func\r\ns(\"function\"==typeof e?e:Function(e),t)},r(_),_},d=function(e){delete h[e]},\r\n// Node.js 0.8-\r\n\"process\"==n(15)(l)?r=function(e){l.nextTick(u(b,e,1))}:y&&y.now?r=function(e){y.now(u(b,e,1))}:v?(o=new v,i=o.port2,o.port1.onmessage=g,r=u(i.postMessage,i,1)):f.addEventListener&&\"function\"==typeof postMessage&&!f.importScripts?(r=function(e){f.postMessage(e+\"\",\"*\")},f.addEventListener(\"message\",g,!1)):r=\"onreadystatechange\"in a(\"script\")?function(e){c.appendChild(a(\"script\")).onreadystatechange=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(u(b,e,1),0)}),e.exports={set:p,clear:d}},/* 52 */\r\n/***/\r\nfunction(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},/* 53 */\r\n/***/\r\nfunction(e,t,n){var r=n(4),o=n(6),i=n(32);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},/* 54 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(89),o=_interopRequireDefault(r),i=n(91),u=_interopRequireDefault(i),s=\"function\"==typeof u.default&&\"symbol\"==typeof o.default?function(e){return typeof e}:function(e){return e&&\"function\"==typeof u.default&&e.constructor===u.default&&e!==u.default.prototype?\"symbol\":typeof e};t.default=\"function\"==typeof u.default&&\"symbol\"===s(o.default)?function(e){return void 0===e?\"undefined\":s(e)}:function(e){return e&&\"function\"==typeof u.default&&e.constructor===u.default&&e!==u.default.prototype?\"symbol\":void 0===e?\"undefined\":s(e)}},/* 55 */\r\n/***/\r\nfunction(e,t){t.f=Object.getOwnPropertySymbols},/* 56 */\r\n/***/\r\nfunction(e,t,n){\r\n// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\r\nvar r=n(37),o=n(29).concat(\"length\",\"prototype\");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},/* 57 */\r\n/***/\r\nfunction(e,t,n){\r\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\r\nvar r=n(15);\r\n// eslint-disable-next-line no-prototype-builtins\r\ne.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(e){return\"String\"==r(e)?e.split(\"\"):Object(e)}},/* 58 */\r\n/***/\r\nfunction(e,t,n){\r\n// false -> Array#indexOf\r\n// true  -> Array#includes\r\nvar r=n(10),o=n(38),i=n(59);e.exports=function(e){return function(t,n,u){var s,c=r(t),a=o(c.length),f=i(u,a);\r\n// Array#includes uses SameValueZero equality algorithm\r\n// eslint-disable-next-line no-self-compare\r\nif(e&&n!=n){for(;a>f;)\r\n// eslint-disable-next-line no-self-compare\r\nif((s=c[f++])!=s)return!0}else for(;a>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},/* 59 */\r\n/***/\r\nfunction(e,t,n){var r=n(21),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},/* 60 */\r\n/***/\r\nfunction(e,t,n){e.exports={default:n(61),__esModule:!0}},/* 61 */\r\n/***/\r\nfunction(e,t,n){n(62);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},/* 62 */\r\n/***/\r\nfunction(e,t,n){var r=n(3);\r\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\nr(r.S+r.F*!n(5),\"Object\",{defineProperty:n(7).f})},/* 63 */\r\n/***/\r\nfunction(e,t,n){e.exports={default:n(87),__esModule:!0}},/* 64 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";t.__esModule=!0;var r=n(54),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!==(void 0===t?\"undefined\":(0,o.default)(t))&&\"function\"!=typeof t?e:t}},/* 65 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(100),o=_interopRequireDefault(r),i=n(104),u=_interopRequireDefault(i),s=n(54),c=_interopRequireDefault(s);t.default=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===t?\"undefined\":(0,c.default)(t)));e.prototype=(0,u.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},/* 66 */\r\n/***/\r\nfunction(e,t,n){n(42),n(43),n(48),n(73),n(84),n(85),e.exports=n(0).Promise},/* 67 */\r\n/***/\r\nfunction(e,t,n){var r=n(21),o=n(22);\r\n// true  -> String#at\r\n// false -> String#codePointAt\r\ne.exports=function(e){return function(t,n){var i,u,s=String(o(t)),c=r(n),a=s.length;return c<0||c>=a?e?\"\":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===a||(u=s.charCodeAt(c+1))<56320||u>57343?e?s.charAt(c):i:e?s.slice(c,c+2):u-56320+(i-55296<<10)+65536)}}},/* 68 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";var r=n(31),o=n(18),i=n(24),u={};\r\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\r\nn(8)(u,n(2)(\"iterator\"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(u,{next:o(1,n)}),i(e,t+\" Iterator\")}},/* 69 */\r\n/***/\r\nfunction(e,t,n){var r=n(7),o=n(4),i=n(20);e.exports=n(5)?Object.defineProperties:function(e,t){o(e);for(var n,u=i(t),s=u.length,c=0;s>c;)r.f(e,n=u[c++],t[n]);return e}},/* 70 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";var r=n(71),o=n(72),i=n(16),u=n(10);\r\n// 22.1.3.4 Array.prototype.entries()\r\n// 22.1.3.13 Array.prototype.keys()\r\n// 22.1.3.29 Array.prototype.values()\r\n// 22.1.3.30 Array.prototype[@@iterator]()\r\ne.exports=n(44)(Array,\"Array\",function(e,t){this._t=u(e),// target\r\nthis._i=0,// next index\r\nthis._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):\"keys\"==t?o(0,n):\"values\"==t?o(0,e[n]):o(0,[n,e[n]])},\"values\"),\r\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\r\ni.Arguments=i.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},/* 71 */\r\n/***/\r\nfunction(e,t){e.exports=function(){}},/* 72 */\r\n/***/\r\nfunction(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},/* 73 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";var r,o,i,u,s=n(23),c=n(1),a=n(14),f=n(49),l=n(3),p=n(6),d=n(17),v=n(74),y=n(75),_=n(50),h=n(51).set,b=n(80)(),g=n(32),m=n(52),x=n(53),w=c.TypeError,O=c.process,S=c.Promise,M=\"process\"==f(O),P=function(){},k=o=g.f,R=!!function(){try{\r\n// correct subclassing with @@species support\r\nvar e=S.resolve(1),t=(e.constructor={})[n(2)(\"species\")]=function(e){e(P,P)};\r\n// unhandled rejections tracking support, NodeJS Promise without it fails @@species test\r\nreturn(M||\"function\"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(e){}}(),L=function(e){var t;return!(!p(e)||\"function\"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,o=1==e._s,i=0;n.length>i;)!function(t){var n,i,u=o?t.ok:t.fail,s=t.resolve,c=t.reject,a=t.domain;try{u?(o||(2==e._h&&T(e),e._h=1),!0===u?n=r:(a&&a.enter(),n=u(r),a&&a.exit()),n===t.promise?c(w(\"Promise-chain cycle\")):(i=L(n))?i.call(n,s,c):s(n)):c(r)}catch(e){c(e)}}(n[i++]);// variable length - can't use forEach\r\ne._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){h.call(c,function(){var t,n,r,o=e._v,i=E(e);if(i&&(t=m(function(){M?O.emit(\"unhandledRejection\",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error(\"Unhandled promise rejection\",o)}),\r\n// Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\r\ne._h=M||E(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},E=function(e){return 1!==e._h&&0===(e._a||e._c).length},T=function(e){h.call(c,function(){var t;M?O.emit(\"rejectionHandled\",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},q=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,// unwrap\r\nt._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},A=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;// unwrap\r\ntry{if(n===e)throw w(\"Promise can't be resolved itself\");(t=L(e))?b(function(){var r={_w:n,_d:!1};// wrap\r\ntry{t.call(e,a(A,r,1),a(q,r,1))}catch(e){q.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){q.call({_w:n,_d:!1},e)}}};\r\n// constructor polyfill\r\nR||(\r\n// 25.4.3.1 Promise(executor)\r\nS=function(e){v(this,S,\"Promise\",\"_h\"),d(e),r.call(this);try{e(a(A,this,1),a(q,this,1))}catch(e){q.call(this,e)}},\r\n// eslint-disable-next-line no-unused-vars\r\nr=function(e){this._c=[],// <- awaiting reactions\r\nthis._a=void 0,// <- checked in isUnhandled reactions\r\nthis._s=0,// <- state\r\nthis._d=!1,// <- done\r\nthis._v=void 0,// <- value\r\nthis._h=0,// <- rejection state, 0 - default, 1 - handled, 2 - unhandled\r\nthis._n=!1},r.prototype=n(81)(S.prototype,{\r\n// 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\r\nthen:function(e,t){var n=k(_(this,S));return n.ok=\"function\"!=typeof e||e,n.fail=\"function\"==typeof t&&t,n.domain=M?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},\r\n// 25.4.5.1 Promise.prototype.catch(onRejected)\r\ncatch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=a(A,e,1),this.reject=a(q,e,1)},g.f=k=function(e){return e===S||e===u?new i(e):o(e)}),l(l.G+l.W+l.F*!R,{Promise:S}),n(24)(S,\"Promise\"),n(82)(\"Promise\"),u=n(0).Promise,\r\n// statics\r\nl(l.S+l.F*!R,\"Promise\",{\r\n// 25.4.4.5 Promise.reject(r)\r\nreject:function(e){var t=k(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(s||!R),\"Promise\",{\r\n// 25.4.4.6 Promise.resolve(x)\r\nresolve:function(e){return x(s&&this===u?S:this,e)}}),l(l.S+l.F*!(R&&n(83)(function(e){S.all(e).catch(P)})),\"Promise\",{\r\n// 25.4.4.1 Promise.all(iterable)\r\nall:function(e){var t=this,n=k(t),r=n.resolve,o=n.reject,i=m(function(){var n=[],i=0,u=1;y(e,!1,function(e){var s=i++,c=!1;n.push(void 0),u++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},\r\n// 25.4.4.4 Promise.race(iterable)\r\nrace:function(e){var t=this,n=k(t),r=n.reject,o=m(function(){y(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},/* 74 */\r\n/***/\r\nfunction(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+\": incorrect invocation!\");return e}},/* 75 */\r\n/***/\r\nfunction(e,t,n){var r=n(14),o=n(76),i=n(77),u=n(4),s=n(38),c=n(78),a={},f={},t=e.exports=function(e,t,n,l,p){var d,v,y,_,h=p?function(){return e}:c(e),b=r(n,l,t?2:1),g=0;if(\"function\"!=typeof h)throw TypeError(e+\" is not iterable!\");\r\n// fast case for arrays with default iterator\r\nif(i(h)){for(d=s(e.length);d>g;g++)if((_=t?b(u(v=e[g])[0],v[1]):b(e[g]))===a||_===f)return _}else for(y=h.call(e);!(v=y.next()).done;)if((_=o(y,b,v.value,t))===a||_===f)return _};t.BREAK=a,t.RETURN=f},/* 76 */\r\n/***/\r\nfunction(e,t,n){\r\n// call something on iterator step with safe closing on error\r\nvar r=n(4);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},/* 77 */\r\n/***/\r\nfunction(e,t,n){\r\n// check on default Array iterator\r\nvar r=n(16),o=n(2)(\"iterator\"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},/* 78 */\r\n/***/\r\nfunction(e,t,n){var r=n(49),o=n(2)(\"iterator\"),i=n(16);e.exports=n(0).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e[\"@@iterator\"]||i[r(e)]}},/* 79 */\r\n/***/\r\nfunction(e,t){\r\n// fast apply, http://jsperf.lnkit.com/fast-apply/5\r\ne.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},/* 80 */\r\n/***/\r\nfunction(e,t,n){var r=n(1),o=n(51).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,s=r.Promise,c=\"process\"==n(15)(u);e.exports=function(){var e,t,n,a=function(){var r,o;for(c&&(r=u.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};\r\n// Node.js\r\nif(c)n=function(){u.nextTick(a)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var f=s.resolve();n=function(){f.then(a)}}else n=function(){\r\n// strange IE + webpack dev server bug - use .call(global)\r\no.call(r,a)};else{var l=!0,p=document.createTextNode(\"\");new i(a).observe(p,{characterData:!0}),// eslint-disable-line no-new\r\nn=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},/* 81 */\r\n/***/\r\nfunction(e,t,n){var r=n(8);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},/* 82 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";var r=n(1),o=n(0),i=n(7),u=n(5),s=n(2)(\"species\");e.exports=function(e){var t=\"function\"==typeof o[e]?o[e]:r[e];u&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},/* 83 */\r\n/***/\r\nfunction(e,t,n){var r=n(2)(\"iterator\"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},\r\n// eslint-disable-next-line no-throw-literal\r\nArray.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},e(i)}catch(e){}return n}},/* 84 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";\r\n// https://github.com/tc39/proposal-promise-finally\r\nvar r=n(3),o=n(0),i=n(1),u=n(50),s=n(53);r(r.P+r.R,\"Promise\",{finally:function(e){var t=u(this,o.Promise||i.Promise),n=\"function\"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},/* 85 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";\r\n// https://github.com/tc39/proposal-promise-try\r\nvar r=n(3),o=n(32),i=n(52);r(r.S,\"Promise\",{try:function(e){var t=o.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},/* 86 */\r\n/***/\r\nfunction(e,t,n){var r,o;/*\r\n* loglevel - https://github.com/pimterry/loglevel\r\n*\r\n* Copyright (c) 2013 Tim Perry\r\n* Licensed under the MIT license.\r\n*/\r\n!function(i,u){\"use strict\";r=u,void 0!==(o=\"function\"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}(0,function(){\"use strict\";\r\n// Cross-browser bind equivalent that works at least back to IE6\r\nfunction bindMethod(e,t){var n=e[t];if(\"function\"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){\r\n// Missing bind shim or IE8 + Modernizr, fallback to wrapping\r\nreturn function(){return Function.prototype.apply.apply(n,[e,arguments])}}}\r\n// Build the best logging method possible for this env\r\n// Wherever possible we want to bind, not wrap, to preserve stack traces\r\nfunction realMethod(n){return\"debug\"===n&&(n=\"log\"),typeof console!==t&&(void 0!==console[n]?bindMethod(console,n):void 0!==console.log?bindMethod(console,\"log\"):e)}\r\n// These private functions always need `this` to be set properly\r\nfunction replaceLoggingMethods(t,r){/*jshint validthis:true */\r\nfor(var o=0;o<n.length;o++){var i=n[o];this[i]=o<t?e:this.methodFactory(i,t,r)}\r\n// Define log.log as an alias for log.debug\r\nthis.log=this.debug}\r\n// In old IE versions, the console isn't present until you first open it.\r\n// We build realMethod() replacements here that regenerate logging methods\r\nfunction enableLoggingWhenConsoleArrives(e,n,r){return function(){typeof console!==t&&(replaceLoggingMethods.call(this,n,r),this[e].apply(this,arguments))}}\r\n// By default, we use closely bound real methods wherever possible, and\r\n// otherwise we wait for a console to appear, and then try again.\r\nfunction defaultMethodFactory(e,t,n){/*jshint validthis:true */\r\nreturn realMethod(e)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(e,r,o){function persistLevelIfPossible(e){var r=(n[e]||\"silent\").toUpperCase();if(typeof window!==t){\r\n// Use localStorage if available\r\ntry{return void(window.localStorage[s]=r)}catch(e){}\r\n// Use session cookie as fallback\r\ntry{window.document.cookie=encodeURIComponent(s)+\"=\"+r+\";\"}catch(e){}}}function getPersistedLevel(){var e;if(typeof window!==t){try{e=window.localStorage[s]}catch(e){}\r\n// Fallback to cookies if local storage gives us nothing\r\nif(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(s)+\"=\");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}\r\n// If the stored level is not valid, treat it as if nothing was stored.\r\nreturn void 0===u.levels[e]&&(e=void 0),e}}var i,u=this,s=\"loglevel\";e&&(s+=\":\"+e),/*\r\n       *\r\n       * Public logger API - see https://github.com/pimterry/loglevel for details\r\n       *\r\n       */\r\nu.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=o||defaultMethodFactory,u.getLevel=function(){return i},u.setLevel=function(n,r){if(\"string\"==typeof n&&void 0!==u.levels[n.toUpperCase()]&&(n=u.levels[n.toUpperCase()]),!(\"number\"==typeof n&&n>=0&&n<=u.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+n;if(i=n,!1!==r&&// defaults to true\r\npersistLevelIfPossible(n),replaceLoggingMethods.call(u,n,e),typeof console===t&&n<u.levels.SILENT)return\"No console available for logging\"},u.setDefaultLevel=function(e){getPersistedLevel()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};\r\n// Initialize with the right level\r\nvar c=getPersistedLevel();null==c&&(c=null==r?\"WARN\":r),u.setLevel(c,!1)}\r\n// Slightly dubious tricks to cut down minimized file size\r\nvar e=function(){},t=\"undefined\",n=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],r=new Logger,o={};r.getLogger=function(e){if(\"string\"!=typeof e||\"\"===e)throw new TypeError(\"You must supply a name when creating a logger.\");var t=o[e];return t||(t=o[e]=new Logger(e,r.getLevel(),r.methodFactory)),t};\r\n// Grab the current global log variable in case of overwrite\r\nvar i=typeof window!==t?window.log:void 0;return r.noConflict=function(){return typeof window!==t&&window.log===r&&(window.log=i),r},r.getLoggers=function(){return o},r})},/* 87 */\r\n/***/\r\nfunction(e,t,n){n(88),e.exports=n(0).Object.getPrototypeOf},/* 88 */\r\n/***/\r\nfunction(e,t,n){\r\n// 19.1.2.9 Object.getPrototypeOf(O)\r\nvar r=n(30),o=n(47);n(39)(\"getPrototypeOf\",function(){return function(e){return o(r(e))}})},/* 89 */\r\n/***/\r\nfunction(e,t,n){e.exports={default:n(90),__esModule:!0}},/* 90 */\r\n/***/\r\nfunction(e,t,n){n(43),n(48),e.exports=n(33).f(\"iterator\")},/* 91 */\r\n/***/\r\nfunction(e,t,n){e.exports={default:n(92),__esModule:!0}},/* 92 */\r\n/***/\r\nfunction(e,t,n){n(93),n(42),n(98),n(99),e.exports=n(0).Symbol},/* 93 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";\r\n// ECMAScript 6 symbols shim\r\nvar r=n(1),o=n(9),i=n(5),u=n(3),s=n(45),c=n(94).KEY,a=n(13),f=n(28),l=n(24),p=n(19),d=n(2),v=n(33),y=n(34),_=n(95),h=n(96),b=n(4),g=n(6),m=n(10),x=n(26),w=n(18),O=n(31),S=n(97),M=n(40),P=n(7),k=n(20),R=M.f,L=P.f,j=S.f,D=r.Symbol,E=r.JSON,T=E&&E.stringify,q=d(\"_hidden\"),A=d(\"toPrimitive\"),C={}.propertyIsEnumerable,I=f(\"symbol-registry\"),F=f(\"symbols\"),N=f(\"op-symbols\"),B=Object.prototype,W=\"function\"==typeof D,G=r.QObject,U=!G||!G.prototype||!G.prototype.findChild,V=i&&a(function(){return 7!=O(L({},\"a\",{get:function(){return L(this,\"a\",{value:7}).a}})).a})?function(e,t,n){var r=R(B,t);r&&delete B[t],L(e,t,n),r&&e!==B&&L(B,t,r)}:L,H=function(e){var t=F[e]=O(D.prototype);return t._k=e,t},K=W&&\"symbol\"==typeof D.iterator?function(e){return\"symbol\"==typeof e}:function(e){return e instanceof D},J=function(e,t,n){return e===B&&J(N,t,n),b(e),t=x(t,!0),b(n),o(F,t)?(n.enumerable?(o(e,q)&&e[q][t]&&(e[q][t]=!1),n=O(n,{enumerable:w(0,!1)})):(o(e,q)||L(e,q,w(1,{})),e[q][t]=!0),V(e,t,n)):L(e,t,n)},Y=function(e,t){b(e);for(var n,r=_(t=m(t)),o=0,i=r.length;i>o;)J(e,n=r[o++],t[n]);return e},z=function(e,t){return void 0===t?O(e):Y(O(e),t)},Q=function(e){var t=C.call(this,e=x(e,!0));return!(this===B&&o(F,e)&&!o(N,e))&&(!(t||!o(this,e)||!o(F,e)||o(this,q)&&this[q][e])||t)},X=function(e,t){if(e=m(e),t=x(t,!0),e!==B||!o(F,t)||o(N,t)){var n=R(e,t);return!n||!o(F,t)||o(e,q)&&e[q][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=j(m(e)),r=[],i=0;n.length>i;)o(F,t=n[i++])||t==q||t==c||r.push(t);return r},$=function(e){for(var t,n=e===B,r=j(n?N:m(e)),i=[],u=0;r.length>u;)!o(F,t=r[u++])||n&&!o(B,t)||i.push(F[t]);return i};\r\n// 19.4.1.1 Symbol([description])\r\nW||(D=function(){if(this instanceof D)throw TypeError(\"Symbol is not a constructor!\");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(N,n),o(this,q)&&o(this[q],e)&&(this[q][e]=!1),V(this,e,w(1,n))};return i&&U&&V(B,e,{configurable:!0,set:t}),H(e)},s(D.prototype,\"toString\",function(){return this._k}),M.f=X,P.f=J,n(56).f=S.f=Z,n(35).f=Q,n(55).f=$,i&&!n(23)&&s(B,\"propertyIsEnumerable\",Q,!0),v.f=function(e){return H(d(e))}),u(u.G+u.W+u.F*!W,{Symbol:D});for(var ee=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),te=0;ee.length>te;)d(ee[te++]);for(var ne=k(d.store),re=0;ne.length>re;)y(ne[re++]);u(u.S+u.F*!W,\"Symbol\",{\r\n// 19.4.2.1 Symbol.for(key)\r\nfor:function(e){return o(I,e+=\"\")?I[e]:I[e]=D(e)},\r\n// 19.4.2.5 Symbol.keyFor(sym)\r\nkeyFor:function(e){if(!K(e))throw TypeError(e+\" is not a symbol!\");for(var t in I)if(I[t]===e)return t},useSetter:function(){U=!0},useSimple:function(){U=!1}}),u(u.S+u.F*!W,\"Object\",{\r\n// 19.1.2.2 Object.create(O [, Properties])\r\ncreate:z,\r\n// 19.1.2.4 Object.defineProperty(O, P, Attributes)\r\ndefineProperty:J,\r\n// 19.1.2.3 Object.defineProperties(O, Properties)\r\ndefineProperties:Y,\r\n// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\r\ngetOwnPropertyDescriptor:X,\r\n// 19.1.2.7 Object.getOwnPropertyNames(O)\r\ngetOwnPropertyNames:Z,\r\n// 19.1.2.8 Object.getOwnPropertySymbols(O)\r\ngetOwnPropertySymbols:$}),\r\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\r\nE&&u(u.S+u.F*(!W||a(function(){var e=D();\r\n// MS Edge converts symbol values to JSON as {}\r\n// WebKit converts symbol values to JSON as null\r\n// V8 throws on boxed symbols\r\nreturn\"[null]\"!=T([e])||\"{}\"!=T({a:e})||\"{}\"!=T(Object(e))})),\"JSON\",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(g(t)||void 0!==e)&&!K(e))// IE8 returns string on undefined\r\nreturn h(t)||(t=function(e,t){if(\"function\"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,T.apply(E,r)}}),\r\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\r\nD.prototype[A]||n(8)(D.prototype,A,D.prototype.valueOf),\r\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\r\nl(D,\"Symbol\"),\r\n// 20.2.1.9 Math[@@toStringTag]\r\nl(Math,\"Math\",!0),\r\n// 24.3.3 JSON[@@toStringTag]\r\nl(r.JSON,\"JSON\",!0)},/* 94 */\r\n/***/\r\nfunction(e,t,n){var r=n(19)(\"meta\"),o=n(6),i=n(9),u=n(7).f,s=0,c=Object.isExtensible||function(){return!0},a=!n(13)(function(){return c(Object.preventExtensions({}))}),f=function(e){u(e,r,{value:{i:\"O\"+ ++s,// object ID\r\nw:{}}})},l=function(e,t){\r\n// return primitive with prefix\r\nif(!o(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!i(e,r)){\r\n// can't set metadata to uncaught frozen object\r\nif(!c(e))return\"F\";\r\n// not necessary to add metadata\r\nif(!t)return\"E\";\r\n// add missing metadata\r\nf(e)}return e[r].i},p=function(e,t){if(!i(e,r)){\r\n// can't set metadata to uncaught frozen object\r\nif(!c(e))return!0;\r\n// not necessary to add metadata\r\nif(!t)return!1;\r\n// add missing metadata\r\nf(e)}return e[r].w},d=function(e){return a&&v.NEED&&c(e)&&!i(e,r)&&f(e),e},v=e.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},/* 95 */\r\n/***/\r\nfunction(e,t,n){\r\n// all enumerable object keys, includes symbols\r\nvar r=n(20),o=n(55),i=n(35);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var u,s=n(e),c=i.f,a=0;s.length>a;)c.call(e,u=s[a++])&&t.push(u);return t}},/* 96 */\r\n/***/\r\nfunction(e,t,n){\r\n// 7.2.2 IsArray(argument)\r\nvar r=n(15);e.exports=Array.isArray||function(e){return\"Array\"==r(e)}},/* 97 */\r\n/***/\r\nfunction(e,t,n){\r\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\r\nvar r=n(10),o=n(56).f,i={}.toString,u=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return u.slice()}};e.exports.f=function(e){return u&&\"[object Window]\"==i.call(e)?s(e):o(r(e))}},/* 98 */\r\n/***/\r\nfunction(e,t,n){n(34)(\"asyncIterator\")},/* 99 */\r\n/***/\r\nfunction(e,t,n){n(34)(\"observable\")},/* 100 */\r\n/***/\r\nfunction(e,t,n){e.exports={default:n(101),__esModule:!0}},/* 101 */\r\n/***/\r\nfunction(e,t,n){n(102),e.exports=n(0).Object.setPrototypeOf},/* 102 */\r\n/***/\r\nfunction(e,t,n){\r\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\r\nvar r=n(3);r(r.S,\"Object\",{setPrototypeOf:n(103).set})},/* 103 */\r\n/***/\r\nfunction(e,t,n){\r\n// Works with __proto__ only. Old v8 can't work with null proto objects.\r\n/* eslint-disable no-proto */\r\nvar r=n(6),o=n(4),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+\": can't set as prototype!\")};e.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?// eslint-disable-line\r\nfunction(e,t,r){try{r=n(14)(Function.call,n(40).f(Object.prototype,\"__proto__\").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},/* 104 */\r\n/***/\r\nfunction(e,t,n){e.exports={default:n(105),__esModule:!0}},/* 105 */\r\n/***/\r\nfunction(e,t,n){n(106);var r=n(0).Object;e.exports=function(e,t){return r.create(e,t)}},/* 106 */\r\n/***/\r\nfunction(e,t,n){var r=n(3);\r\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nr(r.S,\"Object\",{create:n(31)})},/* 107 */\r\n/***/\r\nfunction(e,t,n){e.exports={default:n(108),__esModule:!0}},/* 108 */\r\n/***/\r\nfunction(e,t,n){n(109),e.exports=n(0).Object.keys},/* 109 */\r\n/***/\r\nfunction(e,t,n){\r\n// 19.1.2.14 Object.keys(O)\r\nvar r=n(30),o=n(20);n(39)(\"keys\",function(){return function(e){return o(r(e))}})},/* 110 */\r\n,/* 111 */\r\n,/* 112 */\r\n,/* 113 */\r\n,/* 114 */\r\n,/* 115 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(63),o=_interopRequireDefault(r),i=n(11),u=_interopRequireDefault(i),s=n(12),c=_interopRequireDefault(s),a=n(64),f=_interopRequireDefault(a),l=n(65),p=_interopRequireDefault(l),d=n(116),v=_interopRequireDefault(d),y=function(e){function MiniBus(){return(0,u.default)(this,MiniBus),(0,f.default)(this,(MiniBus.__proto__||(0,o.default)(MiniBus)).call(this))}/**\r\n   * Post a message for routing. Message is routed directly to the external routing _onPostMessage.\r\n   * @param  {Message} inMsg            JSON with mandatory Message structure {id, type, from, to}\r\n   * @param  {Callback} responseCallback Optional callback if a response is expected from the request. A response will be always sent, even if it is a \"Timeout\".\r\n   * @return {number}                  the Message id\r\n   */\r\nreturn(0,p.default)(MiniBus,e),(0,c.default)(MiniBus,[{key:\"postMessage\",value:function(e,t,n){var r=this;\r\n//always send to external (to core MessageBus)\r\nreturn r._genId(e),r._responseCallback(e,t,n),r._onPostMessage(e),e.id}},{key:\"_onMessage\",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?(t._publishOn(n,e),e.to.startsWith(\"hyperty\")||t._publishOnDefault(e)):t._publishOnDefault(e)}}}]),MiniBus}(v.default);/**\r\n                  * Copyright 2016 PT Inovao e Sistemas SA\r\n                  * Copyright 2016 INESC-ID\r\n                  * Copyright 2016 QUOBIS NETWORKS SL\r\n                  * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n                  * Copyright 2016 ORANGE SA\r\n                  * Copyright 2016 Deutsche Telekom AG\r\n                  * Copyright 2016 Apizee\r\n                  * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n                  *\r\n                  * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n                  * you may not use this file except in compliance with the License.\r\n                  * You may obtain a copy of the License at\r\n                  *\r\n                  *   http://www.apache.org/licenses/LICENSE-2.0\r\n                  *\r\n                  * Unless required by applicable law or agreed to in writing, software\r\n                  * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n                  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n                  * See the License for the specific language governing permissions and\r\n                  * limitations under the License.\r\n                  **/\r\nt.default=y,e.exports=t.default},/* 116 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(41),o=_interopRequireDefault(r),i=n(11),u=_interopRequireDefault(i),s=n(12),c=_interopRequireDefault(s),a=n(86),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),l=f.getLogger(\"Bus\"),p=function(){/* private\r\n  _msgId: number;\r\n  _subscriptions: <url: MsgListener[]>\r\n   _responseTimeOut: number\r\n  _responseCallbacks: <url+id: (msg) => void>\r\n   */\r\nfunction Bus(){(0,u.default)(this,Bus);var e=this;e._msgId=0,e._subscriptions={},e._responseTimeOut=15e3,//default to 3s\r\ne._responseCallbacks={},e._registerExternalListener()}/**\r\n  * Register listener to receive message when \"msg.to === url\".\r\n  * Special url \"*\" for default listener is accepted to intercept all messages.\r\n  * @param {URL} url Address to intercept, tha is in the message \"to\"\r\n  * @param {Listener} listener listener\r\n  * @return {MsgListener} instance of MsgListener\r\n  */\r\nreturn(0,c.default)(Bus,[{key:\"addListener\",value:function(e,t){var n=this,r=new d(n._subscriptions,e,t),o=n._subscriptions[e];return o||(o=[],n._subscriptions[e]=o),o.push(r),r}},{key:\"addResponseListener\",value:function(e,t,n){this._responseCallbacks[e+t]=n}},{key:\"removeResponseListener\",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:\"removeAllListenersOf\",value:function(e){delete this._subscriptions[e]}},{key:\"bind\",value:function(e,t,n){var r=this,o=this;return{thisListener:o.addListener(e,function(e){n.postMessage(e)}),targetListener:n.addListener(t,function(e){o.postMessage(e)}),unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:\"_publishOnDefault\",value:function(e){\r\n//is there any \"*\" (default) listeners?\r\nvar t=this._subscriptions[\"*\"];t&&this._publishOn(t,e)}},{key:\"_publishOn\",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:\"_responseCallback\",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;\r\n//automatic management of response handlers\r\nif(t){var o=e.from+e.id;r._responseCallbacks[o]=t,n&&setTimeout(function(){var t=r._responseCallbacks[o];if(delete r._responseCallbacks[o],t){t({id:e.id,type:\"response\",body:{code:408,desc:\"Response timeout!\",value:e}})}},r._responseTimeOut)}}},{key:\"_onResponse\",value:function(e){var t=this;if(\"response\"===e.type){var n=e.to+e.id,r=t._responseCallbacks[n];if(e.body.code>=200&&\r\n//if it's a provisional response, don't delete response listener\r\ndelete t._responseCallbacks[n],r)return r(e),!0}return!1}},{key:\"_onMessage\",value:function(e){var t=this;if(!t._onResponse(e)){var n=t._subscriptions[e.to];n?t._publishOn(n,e):t._publishOnDefault(e)}}},{key:\"_genId\",value:function(e){\r\n//TODO: how do we manage message ID's? Should it be a global runtime counter, or per URL address?\r\n//Global counter will not work, because there will be multiple MiniBus instances!\r\n//Per URL, can be a lot of data to maintain!\r\n//Maybe a counter per MiniBus instance. This is the assumed solution for now.\r\ne.id&&0!==e.id||(this._msgId++,e.id=this._msgId)}},{key:\"postMessage\",value:function(e,t){}},{key:\"postMessageWithRetries\",value:function(e,t,n){var r=this,i=0,u=function(){return new o.default(function(t,o){r.postMessage(e,function(r){408===r.body.code||500===r.body.code?o():(l.info(\"[Bus.postMessageWithRetries] msg delivered: \",e),n(r),t())})})};!function tryAgain(){u().then(function(){},function(){if(l.warn(\"[Bus.postMessageWithRetries] Message Bounced (retry \"+i+\"): '\",e),!(i++<t)){var n=\"[Error] Message Bounced (delivery attempts \"+t+\"): '\";throw new Error(n+e)}tryAgain()})}()}},{key:\"_onPostMessage\",value:function(e){}},{key:\"_registerExternalListener\",value:function(){}}]),Bus}(),d=function(){/* private\r\n  _subscriptions: <string: MsgListener[]>;\r\n  _url: string;\r\n  _callback: (msg) => void;\r\n  */\r\nfunction MsgListener(e,t,n){(0,u.default)(this,MsgListener);var r=this;r._subscriptions=e,r._url=t,r._callback=n}return(0,c.default)(MsgListener,[{key:\"remove\",/**\r\n     * Remove this listener from the Bus\r\n     */\r\nvalue:function(){var e=this,t=e._subscriptions[e._url];if(t){var n=t.indexOf(e);t.splice(n,1),\r\n//if there are no listeners, remove the subscription entirely.\r\n0===t.length&&delete e._subscriptions[e._url]}}},{key:\"url\",get:function(){return this._url}}]),MsgListener}();t.default=p,e.exports=t.default},/* 117 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(11),o=_interopRequireDefault(r),i=n(12),u=_interopRequireDefault(i),s=function(){/* private\r\n  _components: <url: instance>\r\n  */\r\nfunction SandboxRegistry(e){(0,o.default)(this,SandboxRegistry);var t=this;t._bus=e,t._components={},e.addListener(SandboxRegistry.InternalDeployAddress,function(e){\r\n//console.log('SandboxRegistry-RCV: ', msg);\r\n// let responseMsg = {\r\n//   id: msg.id, type: 'response', from: SandboxRegistry.InternalDeployAddress, to: SandboxRegistry.ExternalDeployAddress\r\n// };\r\nswitch(e.type){case\"create\":t._onDeploy(e);break;case\"delete\":t._onRemove(e)}})}return(0,u.default)(SandboxRegistry,[{key:\"_responseMsg\",value:function(e,t,n){var r={id:e.id,type:\"response\",from:SandboxRegistry.InternalDeployAddress,to:SandboxRegistry.ExternalDeployAddress},o={};\r\n// return messageFactory.createResponse(msg, code, value);\r\nreturn t&&(o.code=t),n&&(o.desc=n),r.body=o,r}},{key:\"_onDeploy\",value:function(e){var t=this,n=e.body.config,r=e.body.url,o=e.body.sourceCode,i=void 0,u=void 0;if(t._components.hasOwnProperty(r))i=500,u=\"Instance \"+r+\" already exist!\";else try{t._components[r]=t._create(r,o,n),i=200}catch(e){i=500,u=e}var s=t._responseMsg(e,i,u);t._bus.postMessage(s)}},{key:\"_onRemove\",value:function(e){var t=this,n=e.body.url,r=void 0,o=void 0;t._components.hasOwnProperty(n)?(\r\n//remove component from the pool and all listeners\r\ndelete t._components[n],t._bus.removeAllListenersOf(n),r=200):(r=500,o=\"Instance \"+n+\" doesn't exist!\");var i=t._responseMsg(e,r,o);t._bus.postMessage(i)}},{key:\"_create\",value:function(e,t,n){}},{key:\"components\",get:function(){return this._components}}]),SandboxRegistry}();s.ExternalDeployAddress=\"hyperty-runtime://sandbox/external\",s.InternalDeployAddress=\"hyperty-runtime://sandbox/internal\",t.default=s,e.exports=t.default},/* 118 */\r\n,/* 119 */\r\n,/* 120 */\r\n,/* 121 */\r\n,/* 122 */\r\n,/* 123 */\r\n,/* 124 */\r\n,/* 125 */\r\n,/* 126 */\r\n,/* 127 */\r\n,/* 128 */\r\n,/* 129 */\r\n,/* 130 */\r\n,/* 131 */\r\n,/* 132 */\r\n,/* 133 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.SandboxRegistry=t.SandboxType=t.Sandbox=void 0;var r=n(134),o=_interopRequireDefault(r),i=n(117),u=_interopRequireDefault(i);t.Sandbox=o.default,t.SandboxType=r.SandboxType,t.SandboxRegistry=u.default},/* 134 */\r\n/***/\r\nfunction(e,t,n){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.SandboxType=void 0;var r=n(107),o=_interopRequireDefault(r),i=n(41),u=_interopRequireDefault(i),s=n(63),c=_interopRequireDefault(s),a=n(11),f=_interopRequireDefault(a),l=n(12),p=_interopRequireDefault(l),d=n(64),v=_interopRequireDefault(d),y=n(65),_=_interopRequireDefault(y),h=n(117),b=_interopRequireDefault(h),g=n(115),m=_interopRequireDefault(g),x=(t.SandboxType={APP:\"app\",NORMAL:\"normal\",WINDOW:\"window\"},function(e){function Sandbox(e){(0,f.default)(this,Sandbox);var t=(0,v.default)(this,(Sandbox.__proto__||(0,c.default)(Sandbox)).call(this)),n=t;return e&&(n.capabilities=e),t}/**\r\n   * Deploy an instance of the component into the sandbox.\r\n   * @param  {string} componentSourceCode Component source code (Hyperty, ProtoStub, etc)\r\n   * @param  {URL} componentURL Hyperty, ProtoStub, or any other component address.\r\n   * @param  {Config} configuration Config parameters of the component\r\n   * @return {Promise<string>} return deployed if successful, or any other string with an error\r\n   */\r\nreturn(0,_.default)(Sandbox,e),(0,p.default)(Sandbox,[{key:\"deployComponent\",value:function(e,t,n){var r=this;\r\n// let messageFactory = _this.messageFactory;\r\nreturn new u.default(function(o,i){\r\n//FLOW-OUT: deploy message for the internal SandboxRegistry -> _onDeploy\r\nvar u={type:\"create\",from:b.default.ExternalDeployAddress,to:b.default.InternalDeployAddress,body:{url:t,sourceCode:e,config:n}};\r\n//send message into the sandbox internals and wait for reply\r\nr.postMessage(u,function(e){200===e.body.code?\r\n//is this response complaint with the spec?\r\no(\"deployed\"):i(e.body.desc)})})}},{key:\"removeComponent\",value:function(e){var t=this;return new u.default(function(n,r){\r\n//FLOW-OUT: un-deploy message for the internal SandboxRegistry -> _onRemove\r\nvar o={type:\"delete\",from:b.default.ExternalDeployAddress,to:b.default.InternalDeployAddress,body:{url:e}};\r\n//send message into the sandbox internals and wait for reply\r\nt.postMessage(o,function(e){200===e.body.code?\r\n//is this response complaint with the spec?\r\nn(\"undeployed\"):r(e.body.desc)})})}},{key:\"matches\",value:function(e){var t=this,n=(0,o.default)(e).filter(function(n){return!(t.capabilities[n]&&t.capabilities[n]===e[n])});return 0===n.length||!e[n]}}]),Sandbox}(m.default));t.default=x}])});","// version: 0.8.0\r\n// date: Tue Jan 09 2018 17:01:37 GMT+0000 (WET)\r\n// licence: \r\n/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\n\r\n\r\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"PersistenceManager\",[],t):\"object\"==typeof exports?exports.PersistenceManager=t():(e[\"\"]=e[\"\"]||{},e[\"\"].PersistenceManager=t())}(\"undefined\"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=180)}({0:function(e,t){var n=e.exports={version:\"2.5.3\"};\"number\"==typeof __e&&(__e=n)},1:function(e,t){var n=e.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},10:function(e,t,n){var r=n(8),o=n(15);e.exports=n(3)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},12:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},14:function(e,t,n){var r=n(22);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},15:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},180:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,o=n(181),u=(r=o)&&r.__esModule?r:{default:r};t.default=u.default,e.exports=t.default},181:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(n(59)),o=i(n(4)),u=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){if((0,o.default)(this,e),!t)throw Error(\"The Persistence Manager needs the localStorage\");this.localStorage=t}return(0,u.default)(e,[{key:\"set\",value:function(e,t,n){this.localStorage.setItem(e,(0,r.default)({version:t,value:n}))}},{key:\"get\",value:function(e){try{return JSON.parse(this.localStorage.getItem(e)).value}catch(e){}}},{key:\"getVersion\",value:function(e){try{return JSON.parse(this.localStorage.getItem(e)).version}catch(e){}}},{key:\"delete\",value:function(e){this.localStorage.removeItem(e)}}]),e}();t.default=f,e.exports=t.default},22:function(e,t){e.exports=function(e){if(\"function\"!=typeof e)throw TypeError(e+\" is not a function!\");return e}},24:function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&\"function\"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if(\"function\"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&\"function\"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError(\"Can't convert object to primitive value\")}},26:function(e,t,n){var r=n(6),o=n(1).document,u=r(o)&&r(o.createElement);e.exports=function(e){return u?o.createElement(e):{}}},3:function(e,t,n){e.exports=!n(12)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},38:function(e,t,n){e.exports=!n(3)&&!n(12)(function(){return 7!=Object.defineProperty(n(26)(\"div\"),\"a\",{get:function(){return 7}}).a})},4:function(e,t,n){\"use strict\";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}},5:function(e,t,n){var r=n(1),o=n(0),u=n(14),i=n(10),f=\"prototype\",c=function(e,t,n){var a,l,s,p=e&c.F,d=e&c.G,y=e&c.S,v=e&c.P,h=e&c.B,g=e&c.W,x=d?o:o[t]||(o[t]={}),_=x[f],b=d?r:y?r[t]:(r[t]||{})[f];d&&(n=t);for(a in n)(l=!p&&b&&void 0!==b[a])&&a in x||(s=l?b[a]:n[a],x[a]=d&&\"function\"!=typeof b[a]?n[a]:h&&l?u(s,r):g&&b[a]==s?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[f]=e[f],t}(s):v&&\"function\"==typeof s?u(Function.call,s):s,v&&((x.virtual||(x.virtual={}))[a]=s,e&c.R&&_&&!_[a]&&i(_,a,s)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},55:function(e,t,n){e.exports={default:n(60),__esModule:!0}},59:function(e,t,n){e.exports={default:n(76),__esModule:!0}},6:function(e,t){e.exports=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e}},60:function(e,t,n){n(61);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},61:function(e,t,n){var r=n(5);r(r.S+r.F*!n(3),\"Object\",{defineProperty:n(8).f})},7:function(e,t,n){\"use strict\";t.__esModule=!0;var r,o=n(55),u=(r=o)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,u.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},76:function(e,t,n){var r=n(0),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},8:function(e,t,n){var r=n(9),o=n(38),u=n(24),i=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=u(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(e[t]=n.value),e}},9:function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+\" is not an object!\");return e}}})});","// version: 0.8.0\r\n// date: Tue Jan 09 2018 17:01:37 GMT+0000 (WET)\r\n// licence: \r\n/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\n\r\n\r\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"RuntimeCatalogue\",[],e):\"object\"==typeof exports?exports.RuntimeCatalogue=e():(t[\"\"]=t[\"\"]||{},t[\"\"].RuntimeCatalogue=e())}(\"undefined\"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=182)}([function(t,e){var r=t.exports={version:\"2.5.3\"};\"number\"==typeof __e&&(__e=r)},function(t,e){var r=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=r)},function(t,e,r){var n=r(34)(\"wks\"),i=r(19),o=r(1).Symbol,a=\"function\"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)(\"Symbol.\"+t))}).store=n},function(t,e,r){t.exports=!r(12)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e,r){\"use strict\";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},function(t,e,r){var n=r(1),i=r(0),o=r(14),a=r(10),u=\"prototype\",s=function(t,e,r){var c,l,f,h=t&s.F,p=t&s.G,d=t&s.S,v=t&s.P,y=t&s.B,m=t&s.W,g=p?i:i[e]||(i[e]={}),_=g[u],O=p?n:d?n[e]:(n[e]||{})[u];p&&(r=e);for(c in r)(l=!h&&O&&void 0!==O[c])&&c in g||(f=l?O[c]:r[c],g[c]=p&&\"function\"!=typeof O[c]?r[c]:y&&l?o(f,n):m&&O[c]==f?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[u]=t[u],e}(f):v&&\"function\"==typeof f?o(Function.call,f):f,v&&((g.virtual||(g.virtual={}))[c]=f,t&s.R&&_&&!_[c]&&a(_,c,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},function(t,e,r){\"use strict\";e.__esModule=!0;var n,i=r(55),o=(n=i)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),(0,o.default)(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()},function(t,e,r){var n=r(9),i=r(38),o=r(24),a=Object.defineProperty;e.f=r(3)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(t){}if(\"get\"in r||\"set\"in r)throw TypeError(\"Accessors not supported!\");return\"value\"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(6);t.exports=function(t){if(!n(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e,r){var n=r(8),i=r(15);t.exports=r(3)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(56),i=r(29);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(22);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports={}},function(t,e,r){var n=r(44),i=r(35);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++r+n).toString(36))}},function(t,e,r){t.exports={default:r(102),__esModule:!0}},,function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,r){var n,i;!function(o,a){\"use strict\";void 0===(i=\"function\"==typeof(n=a)?n.call(e,r,e,t):n)||(t.exports=i)}(0,function(){\"use strict\";var t=function(){},e=\"undefined\",r=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"];function n(t,e){var r=t[e];if(\"function\"==typeof r.bind)return r.bind(t);try{return Function.prototype.bind.call(r,t)}catch(e){return function(){return Function.prototype.apply.apply(r,[t,arguments])}}}function i(e,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<e?t:this.methodFactory(o,e,n)}this.log=this.debug}function o(r,o,a){return\"debug\"===(u=r)&&(u=\"log\"),typeof console!==e&&(void 0!==console[u]?n(console,u):void 0!==console.log?n(console,\"log\"):t)||function(t,r,n){return function(){typeof console!==e&&(i.call(this,r,n),this[t].apply(this,arguments))}}.apply(this,arguments);var u}function a(t,n,a){var u,s=this,c=\"loglevel\";function l(){var t;if(typeof window!==e){try{t=window.localStorage[c]}catch(t){}if(typeof t===e)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(c)+\"=\");-1!==n&&(t=/^([^;]+)/.exec(r.slice(n))[1])}catch(t){}return void 0===s.levels[t]&&(t=void 0),t}}t&&(c+=\":\"+t),s.name=t,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=a||o,s.getLevel=function(){return u},s.setLevel=function(n,o){if(\"string\"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!(\"number\"==typeof n&&n>=0&&n<=s.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+n;if(u=n,!1!==o&&function(t){var n=(r[t]||\"silent\").toUpperCase();if(typeof window!==e){try{return void(window.localStorage[c]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+\"=\"+n+\";\"}catch(t){}}}(n),i.call(s,n,t),typeof console===e&&n<s.levels.SILENT)return\"No console available for logging\"},s.setDefaultLevel=function(t){l()||s.setLevel(t,!1)},s.enableAll=function(t){s.setLevel(s.levels.TRACE,t)},s.disableAll=function(t){s.setLevel(s.levels.SILENT,t)};var f=l();null==f&&(f=null==n?\"WARN\":n),s.setLevel(f,!1)}var u=new a,s={};u.getLogger=function(t){if(\"string\"!=typeof t||\"\"===t)throw new TypeError(\"You must supply a name when creating a logger.\");var e=s[t];return e||(e=s[t]=new a(t,u.getLevel(),u.methodFactory)),e};var c=typeof window!==e?window.log:void 0;return u.noConflict=function(){return typeof window!==e&&window.log===u&&(window.log=c),u},u.getLoggers=function(){return s},u})},function(t,e,r){var n=r(6);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&\"function\"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if(\"function\"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&\"function\"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e,r){var n=r(8).f,i=r(11),o=r(2)(\"toStringTag\");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(6),i=r(1).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=!0},function(t,e,r){t.exports={default:r(91),__esModule:!0}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(34)(\"keys\"),i=r(19);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(29);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(1),i=n[\"__core-js_shared__\"]||(n[\"__core-js_shared__\"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e,r){\"use strict\";e.__esModule=!0;var n,i=r(49),o=(n=i)&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!==(void 0===e?\"undefined\":(0,o.default)(e))&&\"function\"!=typeof e?t:e}},function(t,e,r){\"use strict\";e.__esModule=!0;var n=a(r(93)),i=a(r(97)),o=a(r(49));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===e?\"undefined\":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}},function(t,e,r){t.exports=!r(3)&&!r(12)(function(){return 7!=Object.defineProperty(r(26)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,r){var n=r(9),i=r(72),o=r(35),a=r(32)(\"IE_PROTO\"),u=function(){},s=function(){var t,e=r(26)(\"iframe\"),n=o.length;for(e.style.display=\"none\",r(57).appendChild(e),e.src=\"javascript:\",(t=e.contentWindow.document).open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),s=t.F;n--;)delete s.prototype[o[n]];return s()};t.exports=Object.create||function(t,e){var r;return null!==t?(u.prototype=n(t),r=new u,u.prototype=null,r[a]=t):r=s(),void 0===e?r:i(r,e)}},function(t,e,r){e.f=r(2)},function(t,e,r){var n=r(1),i=r(0),o=r(27),a=r(40),u=r(8).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});\"_\"==t.charAt(0)||t in e||u(e,t,{value:a.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},,function(t,e,r){var n=r(11),i=r(13),o=r(63)(!1),a=r(32)(\"IE_PROTO\");t.exports=function(t,e){var r,u=i(t),s=0,c=[];for(r in u)r!=a&&n(u,r)&&c.push(r);for(;e.length>s;)n(u,r=e[s++])&&(~o(c,r)||c.push(r));return c}},function(t,e,r){var n=r(5),i=r(0),o=r(12);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o(function(){r(1)}),\"Object\",a)}},function(t,e,r){\"use strict\";var n=r(27),i=r(5),o=r(50),a=r(10),u=r(11),s=r(16),c=r(71),l=r(25),f=r(52),h=r(2)(\"iterator\"),p=!([].keys&&\"next\"in[].keys()),d=function(){return this};t.exports=function(t,e,r,v,y,m,g){c(r,e,v);var _,O,b,E=function(t){if(!p&&t in R)return R[t];switch(t){case\"keys\":case\"values\":return function(){return new r(this,t)}}return function(){return new r(this,t)}},P=e+\" Iterator\",S=\"values\"==y,w=!1,R=t.prototype,T=R[h]||R[\"@@iterator\"]||y&&R[y],k=!p&&T||E(y),M=y?S?E(\"entries\"):k:void 0,x=\"Array\"==e?R.entries||T:T;if(x&&(b=f(x.call(new t)))!==Object.prototype&&b.next&&(l(b,P,!0),n||u(b,h)||a(b,h,d)),S&&T&&\"values\"!==T.name&&(w=!0,k=function(){return T.call(this)}),n&&!g||!p&&!w&&R[h]||a(R,h,k),s[e]=k,s[P]=d,y)if(_={values:S?k:E(\"values\"),keys:m?k:E(\"keys\"),entries:M},g)for(O in _)O in R||o(R,O,_[O]);else i(i.P+i.F*(p||w),e,_);return _}},function(t,e,r){var n=r(31),i=r(15),o=r(13),a=r(24),u=r(11),s=r(38),c=Object.getOwnPropertyDescriptor;e.f=r(3)?c:function(t,e){if(t=o(t),e=a(e,!0),s)try{return c(t,e)}catch(t){}if(u(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(30),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){\"use strict\";e.__esModule=!0;var n=a(r(78)),i=a(r(80)),o=\"function\"==typeof i.default&&\"symbol\"==typeof n.default?function(t){return typeof t}:function(t){return t&&\"function\"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?\"symbol\":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default=\"function\"==typeof i.default&&\"symbol\"===o(n.default)?function(t){return void 0===t?\"undefined\":o(t)}:function(t){return t&&\"function\"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?\"symbol\":void 0===t?\"undefined\":o(t)}},function(t,e,r){t.exports=r(10)},function(t,e,r){\"use strict\";var n=r(70)(!0);r(46)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){var n=r(11),i=r(33),o=r(32)(\"IE_PROTO\"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,r){r(73);for(var n=r(1),i=r(10),o=r(16),a=r(2)(\"toStringTag\"),u=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),s=0;s<u.length;s++){var c=u[s],l=n[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(t,e,r){\"use strict\";var n=r(22);t.exports.f=function(t){return new function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError(\"Bad Promise constructor\");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}(t)}},function(t,e,r){t.exports={default:r(60),__esModule:!0}},function(t,e,r){var n=r(18);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==n(t)?t.split(\"\"):Object(t)}},function(t,e,r){var n=r(1).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(44),i=r(35).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){t.exports={default:r(76),__esModule:!0}},function(t,e,r){r(61);var n=r(0).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e,r){var n=r(5);n(n.S+n.F*!r(3),\"Object\",{defineProperty:r(8).f})},function(t,e){},function(t,e,r){var n=r(13),i=r(48),o=r(64);t.exports=function(t){return function(e,r,a){var u,s=n(e),c=i(s.length),l=o(a,c);if(t&&r!=r){for(;c>l;)if((u=s[l++])!=u)return!0}else for(;c>l;l++)if((t||l in s)&&s[l]===r)return t||l||0;return!t&&-1}}},function(t,e,r){var n=r(30),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(18),i=r(2)(\"toStringTag\"),o=\"Arguments\"==n(function(){return arguments}());t.exports=function(t){var e,r,a;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?r:o?n(e):\"Object\"==(a=n(e))&&\"function\"==typeof e.callee?\"Arguments\":a}},function(t,e,r){var n=r(9),i=r(22),o=r(2)(\"species\");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||void 0==(r=n(a)[o])?e:i(r)}},function(t,e,r){var n,i,o,a=r(14),u=r(108),s=r(57),c=r(26),l=r(1),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=l.Dispatch,y=0,m={},g=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){g.call(t.data)};h&&p||(h=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return m[++y]=function(){u(\"function\"==typeof t?t:Function(t),e)},n(y),y},p=function(t){delete m[t]},\"process\"==r(18)(f)?n=function(t){f.nextTick(a(g,t,1))}:v&&v.now?n=function(t){v.now(a(g,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=_,n=a(o.postMessage,o,1)):l.addEventListener&&\"function\"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+\"\",\"*\")},l.addEventListener(\"message\",_,!1)):n=\"onreadystatechange\"in c(\"script\")?function(t){s.appendChild(c(\"script\")).onreadystatechange=function(){s.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:h,clear:p}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){var n=r(9),i=r(6),o=r(54);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){var n=r(30),i=r(29);t.exports=function(t){return function(e,r){var o,a,u=String(i(e)),s=n(r),c=u.length;return s<0||s>=c?t?\"\":void 0:(o=u.charCodeAt(s))<55296||o>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):o:t?u.slice(s,s+2):a-56320+(o-55296<<10)+65536}}},function(t,e,r){\"use strict\";var n=r(39),i=r(15),o=r(25),a={};r(10)(a,r(2)(\"iterator\"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+\" Iterator\")}},function(t,e,r){var n=r(8),i=r(9),o=r(17);t.exports=r(3)?Object.defineProperties:function(t,e){i(t);for(var r,a=o(e),u=a.length,s=0;u>s;)n.f(t,r=a[s++],e[r]);return t}},function(t,e,r){\"use strict\";var n=r(74),i=r(75),o=r(16),a=r(13);t.exports=r(46)(Array,\"Array\",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,\"keys\"==e?r:\"values\"==e?t[r]:[r,t[r]])},\"values\"),o.Arguments=o.Array,n(\"keys\"),n(\"values\"),n(\"entries\")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(0),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,r){var n=r(19)(\"meta\"),i=r(6),o=r(11),a=r(8).f,u=0,s=Object.isExtensible||function(){return!0},c=!r(12)(function(){return s(Object.preventExtensions({}))}),l=function(t){a(t,n,{value:{i:\"O\"+ ++u,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!i(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!o(t,n)){if(!s(t))return\"F\";if(!e)return\"E\";l(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!s(t))return!0;if(!e)return!1;l(t)}return t[n].w},onFreeze:function(t){return c&&f.NEED&&s(t)&&!o(t,n)&&l(t),t}}},function(t,e,r){t.exports={default:r(79),__esModule:!0}},function(t,e,r){r(51),r(53),t.exports=r(40).f(\"iterator\")},function(t,e,r){t.exports={default:r(81),__esModule:!0}},function(t,e,r){r(82),r(62),r(86),r(87),t.exports=r(0).Symbol},function(t,e,r){\"use strict\";var n=r(1),i=r(11),o=r(3),a=r(5),u=r(50),s=r(77).KEY,c=r(12),l=r(34),f=r(25),h=r(19),p=r(2),d=r(40),v=r(41),y=r(83),m=r(84),g=r(9),_=r(6),O=r(13),b=r(24),E=r(15),P=r(39),S=r(85),w=r(47),R=r(8),T=r(17),k=w.f,M=R.f,x=S.f,C=n.Symbol,j=n.JSON,A=j&&j.stringify,N=\"prototype\",I=p(\"_hidden\"),U=p(\"toPrimitive\"),L={}.propertyIsEnumerable,D=l(\"symbol-registry\"),F=l(\"symbols\"),H=l(\"op-symbols\"),Y=Object[N],B=\"function\"==typeof C,K=n.QObject,G=!K||!K[N]||!K[N].findChild,J=o&&c(function(){return 7!=P(M({},\"a\",{get:function(){return M(this,\"a\",{value:7}).a}})).a})?function(t,e,r){var n=k(Y,e);n&&delete Y[e],M(t,e,r),n&&t!==Y&&M(Y,e,n)}:M,W=function(t){var e=F[t]=P(C[N]);return e._k=t,e},V=B&&\"symbol\"==typeof C.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof C},q=function(t,e,r){return t===Y&&q(H,e,r),g(t),e=b(e,!0),g(r),i(F,e)?(r.enumerable?(i(t,I)&&t[I][e]&&(t[I][e]=!1),r=P(r,{enumerable:E(0,!1)})):(i(t,I)||M(t,I,E(1,{})),t[I][e]=!0),J(t,e,r)):M(t,e,r)},z=function(t,e){g(t);for(var r,n=y(e=O(e)),i=0,o=n.length;o>i;)q(t,r=n[i++],e[r]);return t},X=function(t){var e=L.call(this,t=b(t,!0));return!(this===Y&&i(F,t)&&!i(H,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,I)&&this[I][t])||e)},$=function(t,e){if(t=O(t),e=b(e,!0),t!==Y||!i(F,e)||i(H,e)){var r=k(t,e);return!r||!i(F,e)||i(t,I)&&t[I][e]||(r.enumerable=!0),r}},Q=function(t){for(var e,r=x(O(t)),n=[],o=0;r.length>o;)i(F,e=r[o++])||e==I||e==s||n.push(e);return n},Z=function(t){for(var e,r=t===Y,n=x(r?H:O(t)),o=[],a=0;n.length>a;)!i(F,e=n[a++])||r&&!i(Y,e)||o.push(F[e]);return o};B||(u((C=function(){if(this instanceof C)throw TypeError(\"Symbol is not a constructor!\");var t=h(arguments.length>0?arguments[0]:void 0),e=function(r){this===Y&&e.call(H,r),i(this,I)&&i(this[I],t)&&(this[I][t]=!1),J(this,t,E(1,r))};return o&&G&&J(Y,t,{configurable:!0,set:e}),W(t)})[N],\"toString\",function(){return this._k}),w.f=$,R.f=q,r(58).f=S.f=Q,r(31).f=X,r(42).f=Z,o&&!r(27)&&u(Y,\"propertyIsEnumerable\",X,!0),d.f=function(t){return W(p(t))}),a(a.G+a.W+a.F*!B,{Symbol:C});for(var tt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),et=0;tt.length>et;)p(tt[et++]);for(var rt=T(p.store),nt=0;rt.length>nt;)v(rt[nt++]);a(a.S+a.F*!B,\"Symbol\",{for:function(t){return i(D,t+=\"\")?D[t]:D[t]=C(t)},keyFor:function(t){if(!V(t))throw TypeError(t+\" is not a symbol!\");for(var e in D)if(D[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!B,\"Object\",{create:function(t,e){return void 0===e?P(t):z(P(t),e)},defineProperty:q,defineProperties:z,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),j&&a(a.S+a.F*(!B||c(function(){var t=C();return\"[null]\"!=A([t])||\"{}\"!=A({a:t})||\"{}\"!=A(Object(t))})),\"JSON\",{stringify:function(t){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=e=n[1],(_(e)||void 0!==t)&&!V(t))return m(e)||(e=function(t,e){if(\"function\"==typeof r&&(e=r.call(this,t,e)),!V(e))return e}),n[1]=e,A.apply(j,n)}}),C[N][U]||r(10)(C[N],U,C[N].valueOf),f(C,\"Symbol\"),f(Math,\"Math\",!0),f(n.JSON,\"JSON\",!0)},function(t,e,r){var n=r(17),i=r(42),o=r(31);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var a,u=r(t),s=o.f,c=0;u.length>c;)s.call(t,a=u[c++])&&e.push(a);return e}},function(t,e,r){var n=r(18);t.exports=Array.isArray||function(t){return\"Array\"==n(t)}},function(t,e,r){var n=r(13),i=r(58).f,o={}.toString,a=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&\"[object Window]\"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(n(t))}},function(t,e,r){r(41)(\"asyncIterator\")},function(t,e,r){r(41)(\"observable\")},,,,function(t,e,r){r(92),t.exports=r(0).Object.getPrototypeOf},function(t,e,r){var n=r(33),i=r(52);r(45)(\"getPrototypeOf\",function(){return function(t){return i(n(t))}})},function(t,e,r){t.exports={default:r(94),__esModule:!0}},function(t,e,r){r(95),t.exports=r(0).Object.setPrototypeOf},function(t,e,r){var n=r(5);n(n.S,\"Object\",{setPrototypeOf:r(96).set})},function(t,e,r){var n=r(6),i=r(9),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,e,n){try{(n=r(14)(Function.call,r(47).f(Object.prototype,\"__proto__\").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},function(t,e,r){t.exports={default:r(98),__esModule:!0}},function(t,e,r){r(99);var n=r(0).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){var n=r(5);n(n.S,\"Object\",{create:r(39)})},function(t,e,r){var n=r(65),i=r(2)(\"iterator\"),o=r(16);t.exports=r(0).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t[\"@@iterator\"]||o[n(t)]}},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.DataObjectSourceLanguage=e.CatalogueObjectType=void 0;var n=s(r(28)),i=s(r(4)),o=s(r(7)),a=s(r(36)),u=s(r(37));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,r,o,u,s,c,l){(0,i.default)(this,e);var f=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this));return f._guid=t,f._type=r,f._version=o,f._objectName=u,f._description=s,f._language=c,f._sourcePackageURL=l,f._signature=null,f._sourcePackage=null,f}return(0,u.default)(e,t),(0,o.default)(e,[{key:\"guid\",get:function(){return this._guid},set:function(t){t&&(this._guid=t)}},{key:\"type\",get:function(){return this._type},set:function(t){t&&(this._type=t)}},{key:\"version\",get:function(){return this._version},set:function(t){t&&(this._version=t)}},{key:\"objectName\",get:function(){return this._objectName},set:function(t){t&&(this._objectName=t)}},{key:\"description\",get:function(){return this._description},set:function(t){t&&(this._description=t)}},{key:\"language\",get:function(){return this._language},set:function(t){t&&(this._language=t)}},{key:\"signature\",get:function(){return this._signature},set:function(t){t&&(this._signature=t)}},{key:\"sourcePackage\",get:function(){return this._sourcePackage},set:function(t){t&&(this._sourcePackage=t)}},{key:\"sourcePackageURL\",get:function(){return this._sourcePackageURL},set:function(t){t&&(this._sourcePackageURL=t)}}]),e}(s(r(131)).default);e.CatalogueObjectType={HYPERTY:\"hyperty\",PROTOSTUB:\"protostub\",HYPERTY_RUNTIME:\"hyperty_runtime\",HYPERTY_INTERCEPTOR:\"hyperty_inspector\",HYPERTY_DATA_OBJECT:\"hyperty_data_object\"},e.DataObjectSourceLanguage={JAVASCRIPT_ECMA6:\"javascript_ecma6\",JAVASCRIPT_ECMA5:\"javascript_ecma5\",JSON_SCHEMA_V4:\"json_schema_v4\",PYTHON:\"python\",TYPESCRIPT:\"typescript\"};e.default=c},function(t,e,r){r(62),r(51),r(53),r(103),r(113),r(114),t.exports=r(0).Promise},function(t,e,r){\"use strict\";var n,i,o,a,u=r(27),s=r(1),c=r(14),l=r(65),f=r(5),h=r(6),p=r(22),d=r(104),v=r(105),y=r(66),m=r(67).set,g=r(109)(),_=r(54),O=r(68),b=r(69),E=\"Promise\",P=s.TypeError,S=s.process,w=s.Promise,R=\"process\"==l(S),T=function(){},k=i=_.f,M=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[r(2)(\"species\")]=function(t){t(T,T)};return(R||\"function\"==typeof PromiseRejectionEvent)&&t.then(T)instanceof e}catch(t){}}(),x=function(t){var e;return!(!h(t)||\"function\"!=typeof(e=t.then))&&e},C=function(t,e){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a=i?e.ok:e.fail,u=e.resolve,s=e.reject,c=e.domain;try{a?(i||(2==t._h&&N(t),t._h=1),!0===a?r=n:(c&&c.enter(),r=a(n),c&&c.exit()),r===e.promise?s(P(\"Promise-chain cycle\")):(o=x(r))?o.call(r,u,s):u(r)):s(n)}catch(t){s(t)}};r.length>o;)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){m.call(s,function(){var e,r,n,i=t._v,o=A(t);if(o&&(e=O(function(){R?S.emit(\"unhandledRejection\",i,t):(r=s.onunhandledrejection)?r({promise:t,reason:i}):(n=s.console)&&n.error&&n.error(\"Unhandled promise rejection\",i)}),t._h=R||A(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},A=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){m.call(s,function(){var e;R?S.emit(\"rejectionHandled\",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},U=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw P(\"Promise can't be resolved itself\");(e=x(t))?g(function(){var n={_w:r,_d:!1};try{e.call(t,c(U,n,1),c(I,n,1))}catch(t){I.call(n,t)}}):(r._v=t,r._s=1,C(r,!1))}catch(t){I.call({_w:r,_d:!1},t)}}};M||(w=function(t){d(this,w,E,\"_h\"),p(t),n.call(this);try{t(c(U,this,1),c(I,this,1))}catch(t){I.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(110)(w.prototype,{then:function(t,e){var r=k(y(this,w));return r.ok=\"function\"!=typeof t||t,r.fail=\"function\"==typeof e&&e,r.domain=R?S.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&C(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=c(U,t,1),this.reject=c(I,t,1)},_.f=k=function(t){return t===w||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!M,{Promise:w}),r(25)(w,E),r(111)(E),a=r(0).Promise,f(f.S+f.F*!M,E,{reject:function(t){var e=k(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(u||!M),E,{resolve:function(t){return b(u&&this===a?w:this,t)}}),f(f.S+f.F*!(M&&r(112)(function(t){w.all(t).catch(T)})),E,{all:function(t){var e=this,r=k(e),n=r.resolve,i=r.reject,o=O(function(){var r=[],o=0,a=1;v(t,!1,function(t){var u=o++,s=!1;r.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,r[u]=t,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=k(e),n=r.reject,i=O(function(){v(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+\": incorrect invocation!\");return t}},function(t,e,r){var n=r(14),i=r(106),o=r(107),a=r(9),u=r(48),s=r(100),c={},l={};(e=t.exports=function(t,e,r,f,h){var p,d,v,y,m=h?function(){return t}:s(t),g=n(r,f,e?2:1),_=0;if(\"function\"!=typeof m)throw TypeError(t+\" is not iterable!\");if(o(m)){for(p=u(t.length);p>_;_++)if((y=e?g(a(d=t[_])[0],d[1]):g(t[_]))===c||y===l)return y}else for(v=m.call(t);!(d=v.next()).done;)if((y=i(v,g,d.value,e))===c||y===l)return y}).BREAK=c,e.RETURN=l},function(t,e,r){var n=r(9);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,r){var n=r(16),i=r(2)(\"iterator\"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(1),i=r(67).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,u=n.Promise,s=\"process\"==r(18)(a);t.exports=function(){var t,e,r,c=function(){var n,i;for(s&&(n=a.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(s)r=function(){a.nextTick(c)};else if(!o||n.navigator&&n.navigator.standalone)if(u&&u.resolve){var l=u.resolve();r=function(){l.then(c)}}else r=function(){i.call(n,c)};else{var f=!0,h=document.createTextNode(\"\");new o(c).observe(h,{characterData:!0}),r=function(){h.data=f=!f}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},function(t,e,r){var n=r(10);t.exports=function(t,e,r){for(var i in e)r&&t[i]?t[i]=e[i]:n(t,i,e[i]);return t}},function(t,e,r){\"use strict\";var n=r(1),i=r(0),o=r(8),a=r(3),u=r(2)(\"species\");t.exports=function(t){var e=\"function\"==typeof i[t]?i[t]:n[t];a&&e&&!e[u]&&o.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,r){var n=r(2)(\"iterator\"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},t(o)}catch(t){}return r}},function(t,e,r){\"use strict\";var n=r(5),i=r(0),o=r(1),a=r(66),u=r(69);n(n.P+n.R,\"Promise\",{finally:function(t){var e=a(this,i.Promise||o.Promise),r=\"function\"==typeof t;return this.then(r?function(r){return u(e,t()).then(function(){return r})}:t,r?function(r){return u(e,t()).then(function(){throw r})}:t)}})},function(t,e,r){\"use strict\";var n=r(5),i=r(54),o=r(68);n(n.S,\"Promise\",{try:function(t){var e=i.f(this),r=o(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}})},,,,,,,,,,,,,,,,,function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.RethinkObject=void 0;var n=u(r(59)),i=u(r(4)),o=u(r(7)),a=u(r(135));function u(t){return t&&t.__esModule?t:{default:t}}var s=e.RethinkObject=function(){function t(){(0,i.default)(this,t)}return(0,o.default)(t,[{key:\"validate\",value:function(t){a.default.addSchema(t.id,t);var e=a.default.validateMultiple(JSON.parse((0,n.default)(this)),t);return e.errors.forEach(function(t){delete t.stack}),(!e.valid||e.missing.length>0)&&(console.warn(\"Object validation \"+(e.valid?\"succeeded, but schema contained references:\":\"failed:\"),(0,n.default)(e,null,2)),console.log(\"Object:\",(0,n.default)(this,null,2))),e.valid}}]),t}();e.default=s},,,,function(t,e,r){var n,i,o;i=[],void 0===(o=\"function\"==typeof(n=function(){var t,e,r,n;Object.keys||(Object.keys=(t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable(\"toString\"),n=(r=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"]).length,function(i){if(\"object\"!=typeof i&&\"function\"!=typeof i||null===i)throw new TypeError(\"Object.keys called on non-object\");var o=[];for(var a in i)t.call(i,a)&&o.push(a);if(e)for(var u=0;u<n;u++)t.call(i,r[u])&&o.push(r[u]);return o})),Object.create||(Object.create=function(){function t(){}return function(e){if(1!==arguments.length)throw new Error(\"Object.create implementation only accepts one parameter.\");return t.prototype=e,new t}}()),Array.isArray||(Array.isArray=function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),r=e.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);i<r;i++)if(i in e&&e[i]===t)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(t){for(var e=\"tv4_test_frozen_key\";t.hasOwnProperty(e);)e+=Math.random();try{return t[e]=!0,delete t[e],!1}catch(t){return!0}});var i={\"+\":!0,\"#\":!0,\".\":!0,\"/\":!0,\";\":!0,\"?\":!0,\"&\":!0},o={\"*\":!0};function a(t){return encodeURI(t).replace(/%25[0-9][0-9]/g,function(t){return\"%\"+t.substring(3)})}function u(t){var e=\"\";i[t.charAt(0)]&&(e=t.charAt(0),t=t.substring(1));var r=\"\",n=\"\",u=!0,s=!1,c=!1;\"+\"===e?u=!1:\".\"===e?(n=\".\",r=\".\"):\"/\"===e?(n=\"/\",r=\"/\"):\"#\"===e?(n=\"#\",u=!1):\";\"===e?(n=\";\",r=\";\",s=!0,c=!0):\"?\"===e?(n=\"?\",r=\"&\",s=!0):\"&\"===e&&(n=\"&\",r=\"&\",s=!0);for(var l=[],f=t.split(\",\"),h=[],p={},d=0;d<f.length;d++){var v=f[d],y=null;if(-1!==v.indexOf(\":\")){var m=v.split(\":\");v=m[0],y=parseInt(m[1],10)}for(var g={};o[v.charAt(v.length-1)];)g[v.charAt(v.length-1)]=!0,v=v.substring(0,v.length-1);var _={truncate:y,name:v,suffices:g};h.push(_),p[v]=_,l.push(v)}var O=function(t){for(var e=\"\",i=0,o=0;o<h.length;o++){var l=h[o],f=t(l.name);if(null===f||void 0===f||Array.isArray(f)&&0===f.length||\"object\"==typeof f&&0===Object.keys(f).length)i++;else if(e+=o===i?n:r||\",\",Array.isArray(f)){s&&(e+=l.name+\"=\");for(var p=0;p<f.length;p++)p>0&&(e+=l.suffices[\"*\"]?r||\",\":\",\",l.suffices[\"*\"]&&s&&(e+=l.name+\"=\")),e+=u?encodeURIComponent(f[p]).replace(/!/g,\"%21\"):a(f[p])}else if(\"object\"==typeof f){s&&!l.suffices[\"*\"]&&(e+=l.name+\"=\");var d=!0;for(var v in f)d||(e+=l.suffices[\"*\"]?r||\",\":\",\"),d=!1,e+=u?encodeURIComponent(v).replace(/!/g,\"%21\"):a(v),e+=l.suffices[\"*\"]?\"=\":\",\",e+=u?encodeURIComponent(f[v]).replace(/!/g,\"%21\"):a(f[v])}else s&&(e+=l.name,c&&\"\"===f||(e+=\"=\")),null!=l.truncate&&(f=f.substring(0,l.truncate)),e+=u?encodeURIComponent(f).replace(/!/g,\"%21\"):a(f)}return e};return O.varNames=l,{prefix:n,substitution:O}}function s(t){if(!(this instanceof s))return new s(t);for(var e=t.split(\"{\"),r=[e.shift()],n=[],i=[],o=[];e.length>0;){var a=e.shift(),c=a.split(\"}\")[0],l=a.substring(c.length+1),f=u(c);i.push(f.substitution),n.push(f.prefix),r.push(l),o=o.concat(f.substitution.varNames)}this.fill=function(t){for(var e=r[0],n=0;n<i.length;n++){e+=(0,i[n])(t),e+=r[n+1]}return e},this.varNames=o,this.template=t}s.prototype={toString:function(){return this.template},fillFromObject:function(t){return this.fill(function(e){return t[e]})}};var c=function(t,e,r,n,i){if(this.missing=[],this.missingMap={},this.formatValidators=t?Object.create(t.formatValidators):{},this.schemas=t?Object.create(t.schemas):{},this.collectMultiple=e,this.errors=[],this.handleError=e?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey=\"tv4_validation_id\",this.validationErrorsKey=\"tv4_validation_errors_id\"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=r||m(\"en\"),\"string\"==typeof this.errorReporter)throw new Error(\"debug\");if(this.definedKeywords={},t)for(var o in t.definedKeywords)this.definedKeywords[o]=t.definedKeywords[o].slice(0)};function l(t,e){if(t===e)return!0;if(t&&e&&\"object\"==typeof t&&\"object\"==typeof e){if(Array.isArray(t)!==Array.isArray(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!l(t[r],e[r]))return!1}else{var n;for(n in t)if(void 0===e[n]&&void 0!==t[n])return!1;for(n in e)if(void 0===t[n]&&void 0!==e[n])return!1;for(n in t)if(!l(t[n],e[n]))return!1}return!0}return!1}c.prototype.defineKeyword=function(t,e){this.definedKeywords[t]=this.definedKeywords[t]||[],this.definedKeywords[t].push(e)},c.prototype.createError=function(t,e,r,n,i,o,a){var u=new E(t,e,r,n,i);return u.message=this.errorReporter(u,o,a),u},c.prototype.returnError=function(t){return t},c.prototype.collectError=function(t){return t&&this.errors.push(t),null},c.prototype.prefixErrors=function(t,e,r){for(var n=t;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(e,r);return this},c.prototype.banUnknownProperties=function(t,e){for(var r in this.unknownPropertyPaths){var n=this.createError(g.UNKNOWN_PROPERTY,{path:r},r,\"\",null,t,e),i=this.handleError(n);if(i)return i}return null},c.prototype.addFormat=function(t,e){if(\"object\"==typeof t){for(var r in t)this.addFormat(r,t[r]);return this}this.formatValidators[t]=e},c.prototype.resolveRefs=function(t,e){if(void 0!==t.$ref){if((e=e||{})[t.$ref])return this.createError(g.CIRCULAR_REFERENCE,{urls:Object.keys(e).join(\", \")},\"\",\"\",null,void 0,t);e[t.$ref]=!0,t=this.getSchema(t.$ref,e)}return t},c.prototype.getSchema=function(t,e){var r;if(void 0!==this.schemas[t])return r=this.schemas[t],this.resolveRefs(r,e);var n=t,i=\"\";if(-1!==t.indexOf(\"#\")&&(i=t.substring(t.indexOf(\"#\")+1),n=t.substring(0,t.indexOf(\"#\"))),\"object\"==typeof this.schemas[n]){r=this.schemas[n];var o=decodeURIComponent(i);if(\"\"===o)return this.resolveRefs(r,e);if(\"/\"!==o.charAt(0))return;for(var a=o.split(\"/\").slice(1),u=0;u<a.length;u++){var s=a[u].replace(/~1/g,\"/\").replace(/~0/g,\"~\");if(void 0===r[s]){r=void 0;break}r=r[s]}if(void 0!==r)return this.resolveRefs(r,e)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},c.prototype.searchSchemas=function(t,e){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.searchSchemas(t[r],e);else if(t&&\"object\"==typeof t){\"string\"==typeof t.id&&function(t,e){if(e.substring(0,t.length)===t){var r=e.substring(t.length);if(e.length>0&&\"/\"===e.charAt(t.length-1)||\"#\"===r.charAt(0)||\"?\"===r.charAt(0))return!0}return!1}(e,t.id)&&void 0===this.schemas[t.id]&&(this.schemas[t.id]=t);for(var n in t)if(\"enum\"!==n)if(\"object\"==typeof t[n])this.searchSchemas(t[n],e);else if(\"$ref\"===n){var i=v(t[n]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}}},c.prototype.addSchema=function(t,e){if(\"string\"!=typeof t||void 0===e){if(\"object\"!=typeof t||\"string\"!=typeof t.id)return;t=(e=t).id}t===v(t)+\"#\"&&(t=v(t)),this.schemas[t]=e,delete this.missingMap[t],y(e,t),this.searchSchemas(e,t)},c.prototype.getSchemaMap=function(){var t={};for(var e in this.schemas)t[e]=this.schemas[e];return t},c.prototype.getSchemaUris=function(t){var e=[];for(var r in this.schemas)t&&!t.test(r)||e.push(r);return e},c.prototype.getMissingUris=function(t){var e=[];for(var r in this.missingMap)t&&!t.test(r)||e.push(r);return e},c.prototype.dropSchemas=function(){this.schemas={},this.reset()},c.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},c.prototype.validateAll=function(t,e,r,n,i){var o;if(!(e=this.resolveRefs(e)))return null;if(e instanceof E)return this.errors.push(e),e;var a,u=this.errors.length,s=null,c=null;if(this.checkRecursive&&t&&\"object\"==typeof t){if(o=!this.scanned.length,t[this.validatedSchemasKey]){var l=t[this.validatedSchemasKey].indexOf(e);if(-1!==l)return this.errors=this.errors.concat(t[this.validationErrorsKey][l]),null}if(Object.isFrozen(t)&&-1!==(a=this.scannedFrozen.indexOf(t))){var f=this.scannedFrozenSchemas[a].indexOf(e);if(-1!==f)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[a][f]),null}if(this.scanned.push(t),Object.isFrozen(t))-1===a&&(a=this.scannedFrozen.length,this.scannedFrozen.push(t),this.scannedFrozenSchemas.push([])),s=this.scannedFrozenSchemas[a].length,this.scannedFrozenSchemas[a][s]=e,this.scannedFrozenValidationErrors[a][s]=[];else{if(!t[this.validatedSchemasKey])try{Object.defineProperty(t,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(t,this.validationErrorsKey,{value:[],configurable:!0})}catch(e){t[this.validatedSchemasKey]=[],t[this.validationErrorsKey]=[]}c=t[this.validatedSchemasKey].length,t[this.validatedSchemasKey][c]=e,t[this.validationErrorsKey][c]=[]}}var h=this.errors.length,p=this.validateBasic(t,e,i)||this.validateNumeric(t,e,i)||this.validateString(t,e,i)||this.validateArray(t,e,i)||this.validateObject(t,e,i)||this.validateCombinations(t,e,i)||this.validateHypermedia(t,e,i)||this.validateFormat(t,e,i)||this.validateDefinedKeywords(t,e,i)||null;if(o){for(;this.scanned.length;){delete this.scanned.pop()[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(p||h!==this.errors.length)for(;r&&r.length||n&&n.length;){var d=r&&r.length?\"\"+r.pop():null,v=n&&n.length?\"\"+n.pop():null;p&&(p=p.prefixWith(d,v)),this.prefixErrors(h,d,v)}return null!==s?this.scannedFrozenValidationErrors[a][s]=this.errors.slice(u):null!==c&&(t[this.validationErrorsKey][c]=this.errors.slice(u)),this.handleError(p)},c.prototype.validateFormat=function(t,e){if(\"string\"!=typeof e.format||!this.formatValidators[e.format])return null;var r=this.formatValidators[e.format].call(null,t,e);return\"string\"==typeof r||\"number\"==typeof r?this.createError(g.FORMAT_CUSTOM,{message:r},\"\",\"/format\",null,t,e):r&&\"object\"==typeof r?this.createError(g.FORMAT_CUSTOM,{message:r.message||\"?\"},r.dataPath||\"\",r.schemaPath||\"/format\",null,t,e):null},c.prototype.validateDefinedKeywords=function(t,e,r){for(var n in this.definedKeywords)if(void 0!==e[n])for(var i=this.definedKeywords[n],o=0;o<i.length;o++){var a=(0,i[o])(t,e[n],e,r);if(\"string\"==typeof a||\"number\"==typeof a)return this.createError(g.KEYWORD_CUSTOM,{key:n,message:a},\"\",\"\",null,t,e).prefixWith(null,n);if(a&&\"object\"==typeof a){var u=a.code;if(\"string\"==typeof u){if(!g[u])throw new Error(\"Undefined error code (use defineError): \"+u);u=g[u]}else\"number\"!=typeof u&&(u=g.KEYWORD_CUSTOM);var s=\"object\"==typeof a.message?a.message:{key:n,message:a.message||\"?\"},c=a.schemaPath||\"/\"+n.replace(/~/g,\"~0\").replace(/\\//g,\"~1\");return this.createError(u,s,a.dataPath||null,c,null,t,e)}}return null},c.prototype.validateBasic=function(t,e,r){var n;return(n=this.validateType(t,e,r))?n.prefixWith(null,\"type\"):(n=this.validateEnum(t,e,r))?n.prefixWith(null,\"type\"):null},c.prototype.validateType=function(t,e){if(void 0===e.type)return null;var r=typeof t;null===t?r=\"null\":Array.isArray(t)&&(r=\"array\");var n=e.type;Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var o=n[i];if(o===r||\"integer\"===o&&\"number\"===r&&t%1==0)return null}return this.createError(g.INVALID_TYPE,{type:r,expected:n.join(\"/\")},\"\",\"\",null,t,e)},c.prototype.validateEnum=function(t,e){if(void 0===e.enum)return null;for(var r=0;r<e.enum.length;r++){if(l(t,e.enum[r]))return null}return this.createError(g.ENUM_MISMATCH,{value:\"undefined\"!=typeof JSON?JSON.stringify(t):t},\"\",\"\",null,t,e)},c.prototype.validateNumeric=function(t,e,r){return this.validateMultipleOf(t,e,r)||this.validateMinMax(t,e,r)||this.validateNaN(t,e,r)||null};var f=Math.pow(2,-51),h=1-f;function p(t){var e=String(t).replace(/^\\s+|\\s+$/g,\"\").match(/^([^:\\/?#]+:)?(\\/\\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\\/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/);return e?{href:e[0]||\"\",protocol:e[1]||\"\",authority:e[2]||\"\",host:e[3]||\"\",hostname:e[4]||\"\",port:e[5]||\"\",pathname:e[6]||\"\",search:e[7]||\"\",hash:e[8]||\"\"}:null}function d(t,e){return e=p(e||\"\"),t=p(t||\"\"),e&&t?(e.protocol||t.protocol)+(e.protocol||e.authority?e.authority:t.authority)+(r=e.protocol||e.authority||\"/\"===e.pathname.charAt(0)?e.pathname:e.pathname?(t.authority&&!t.pathname?\"/\":\"\")+t.pathname.slice(0,t.pathname.lastIndexOf(\"/\")+1)+e.pathname:t.pathname,n=[],r.replace(/^(\\.\\.?(\\/|$))+/,\"\").replace(/\\/(\\.(\\/|$))+/g,\"/\").replace(/\\/\\.\\.$/,\"/../\").replace(/\\/?[^\\/]*/g,function(t){\"/..\"===t?n.pop():n.push(t)}),n.join(\"\").replace(/^\\//,\"/\"===r.charAt(0)?\"/\":\"\"))+(e.protocol||e.authority||e.pathname?e.search:e.search||t.search)+e.hash:null;var r,n}function v(t){return t.split(\"#\")[0]}function y(t,e){if(t&&\"object\"==typeof t)if(void 0===e?e=t.id:\"string\"==typeof t.id&&(e=d(e,t.id),t.id=e),Array.isArray(t))for(var r=0;r<t.length;r++)y(t[r],e);else{\"string\"==typeof t.$ref&&(t.$ref=d(e,t.$ref));for(var n in t)\"enum\"!==n&&y(t[n],e)}}function m(t){var e=P[t=t||\"en\"];return function(t){var r=e[t.code]||b[t.code];if(\"string\"!=typeof r)return\"Unknown error code \"+t.code+\": \"+JSON.stringify(t.messageParams);var n=t.params;return r.replace(/\\{([^{}]*)\\}/g,function(t,e){var r=n[e];return\"string\"==typeof r||\"number\"==typeof r?r:t})}}c.prototype.validateMultipleOf=function(t,e){var r=e.multipleOf||e.divisibleBy;if(void 0===r)return null;if(\"number\"==typeof t){var n=t/r%1;if(n>=f&&n<h)return this.createError(g.NUMBER_MULTIPLE_OF,{value:t,multipleOf:r},\"\",\"\",null,t,e)}return null},c.prototype.validateMinMax=function(t,e){if(\"number\"!=typeof t)return null;if(void 0!==e.minimum){if(t<e.minimum)return this.createError(g.NUMBER_MINIMUM,{value:t,minimum:e.minimum},\"\",\"/minimum\",null,t,e);if(e.exclusiveMinimum&&t===e.minimum)return this.createError(g.NUMBER_MINIMUM_EXCLUSIVE,{value:t,minimum:e.minimum},\"\",\"/exclusiveMinimum\",null,t,e)}if(void 0!==e.maximum){if(t>e.maximum)return this.createError(g.NUMBER_MAXIMUM,{value:t,maximum:e.maximum},\"\",\"/maximum\",null,t,e);if(e.exclusiveMaximum&&t===e.maximum)return this.createError(g.NUMBER_MAXIMUM_EXCLUSIVE,{value:t,maximum:e.maximum},\"\",\"/exclusiveMaximum\",null,t,e)}return null},c.prototype.validateNaN=function(t,e){return\"number\"!=typeof t?null:!0===isNaN(t)||t===1/0||t===-1/0?this.createError(g.NUMBER_NOT_A_NUMBER,{value:t},\"\",\"/type\",null,t,e):null},c.prototype.validateString=function(t,e,r){return this.validateStringLength(t,e,r)||this.validateStringPattern(t,e,r)||null},c.prototype.validateStringLength=function(t,e){return\"string\"!=typeof t?null:void 0!==e.minLength&&t.length<e.minLength?this.createError(g.STRING_LENGTH_SHORT,{length:t.length,minimum:e.minLength},\"\",\"/minLength\",null,t,e):void 0!==e.maxLength&&t.length>e.maxLength?this.createError(g.STRING_LENGTH_LONG,{length:t.length,maximum:e.maxLength},\"\",\"/maxLength\",null,t,e):null},c.prototype.validateStringPattern=function(t,e){if(\"string\"!=typeof t||\"string\"!=typeof e.pattern&&!(e.pattern instanceof RegExp))return null;var r;if(e.pattern instanceof RegExp)r=e.pattern;else{var n,i=\"\",o=e.pattern.match(/^\\/(.+)\\/([img]*)$/);o?(n=o[1],i=o[2]):n=e.pattern,r=new RegExp(n,i)}return r.test(t)?null:this.createError(g.STRING_PATTERN,{pattern:e.pattern},\"\",\"/pattern\",null,t,e)},c.prototype.validateArray=function(t,e,r){return Array.isArray(t)?this.validateArrayLength(t,e,r)||this.validateArrayUniqueItems(t,e,r)||this.validateArrayItems(t,e,r)||null:null},c.prototype.validateArrayLength=function(t,e){var r;return void 0!==e.minItems&&t.length<e.minItems&&(r=this.createError(g.ARRAY_LENGTH_SHORT,{length:t.length,minimum:e.minItems},\"\",\"/minItems\",null,t,e),this.handleError(r))?r:void 0!==e.maxItems&&t.length>e.maxItems&&(r=this.createError(g.ARRAY_LENGTH_LONG,{length:t.length,maximum:e.maxItems},\"\",\"/maxItems\",null,t,e),this.handleError(r))?r:null},c.prototype.validateArrayUniqueItems=function(t,e){if(e.uniqueItems)for(var r=0;r<t.length;r++)for(var n=r+1;n<t.length;n++)if(l(t[r],t[n])){var i=this.createError(g.ARRAY_UNIQUE,{match1:r,match2:n},\"\",\"/uniqueItems\",null,t,e);if(this.handleError(i))return i}return null},c.prototype.validateArrayItems=function(t,e,r){if(void 0===e.items)return null;var n,i;if(Array.isArray(e.items)){for(i=0;i<t.length;i++)if(i<e.items.length){if(n=this.validateAll(t[i],e.items[i],[i],[\"items\",i],r+\"/\"+i))return n}else if(void 0!==e.additionalItems)if(\"boolean\"==typeof e.additionalItems){if(!e.additionalItems&&(n=this.createError(g.ARRAY_ADDITIONAL_ITEMS,{},\"/\"+i,\"/additionalItems\",null,t,e),this.handleError(n)))return n}else if(n=this.validateAll(t[i],e.additionalItems,[i],[\"additionalItems\"],r+\"/\"+i))return n}else for(i=0;i<t.length;i++)if(n=this.validateAll(t[i],e.items,[i],[\"items\"],r+\"/\"+i))return n;return null},c.prototype.validateObject=function(t,e,r){return\"object\"!=typeof t||null===t||Array.isArray(t)?null:this.validateObjectMinMaxProperties(t,e,r)||this.validateObjectRequiredProperties(t,e,r)||this.validateObjectProperties(t,e,r)||this.validateObjectDependencies(t,e,r)||null},c.prototype.validateObjectMinMaxProperties=function(t,e){var r,n=Object.keys(t);return void 0!==e.minProperties&&n.length<e.minProperties&&(r=this.createError(g.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:e.minProperties},\"\",\"/minProperties\",null,t,e),this.handleError(r))?r:void 0!==e.maxProperties&&n.length>e.maxProperties&&(r=this.createError(g.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:e.maxProperties},\"\",\"/maxProperties\",null,t,e),this.handleError(r))?r:null},c.prototype.validateObjectRequiredProperties=function(t,e){if(void 0!==e.required)for(var r=0;r<e.required.length;r++){var n=e.required[r];if(void 0===t[n]){var i=this.createError(g.OBJECT_REQUIRED,{key:n},\"\",\"/required/\"+r,null,t,e);if(this.handleError(i))return i}}return null},c.prototype.validateObjectProperties=function(t,e,r){var n;for(var i in t){var o=r+\"/\"+i.replace(/~/g,\"~0\").replace(/\\//g,\"~1\"),a=!1;if(void 0!==e.properties&&void 0!==e.properties[i]&&(a=!0,n=this.validateAll(t[i],e.properties[i],[i],[\"properties\",i],o)))return n;if(void 0!==e.patternProperties)for(var u in e.patternProperties){if(new RegExp(u).test(i)&&(a=!0,n=this.validateAll(t[i],e.patternProperties[u],[i],[\"patternProperties\",u],o)))return n}if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==e.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),\"boolean\"==typeof e.additionalProperties){if(!e.additionalProperties&&(n=this.createError(g.OBJECT_ADDITIONAL_PROPERTIES,{key:i},\"\",\"/additionalProperties\",null,t,e).prefixWith(i,null),this.handleError(n)))return n}else if(n=this.validateAll(t[i],e.additionalProperties,[i],[\"additionalProperties\"],o))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null},c.prototype.validateObjectDependencies=function(t,e,r){var n;if(void 0!==e.dependencies)for(var i in e.dependencies)if(void 0!==t[i]){var o=e.dependencies[i];if(\"string\"==typeof o){if(void 0===t[o]&&(n=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:i,missing:o},\"\",\"\",null,t,e).prefixWith(null,i).prefixWith(null,\"dependencies\"),this.handleError(n)))return n}else if(Array.isArray(o))for(var a=0;a<o.length;a++){var u=o[a];if(void 0===t[u]&&(n=this.createError(g.OBJECT_DEPENDENCY_KEY,{key:i,missing:u},\"\",\"/\"+a,null,t,e).prefixWith(null,i).prefixWith(null,\"dependencies\"),this.handleError(n)))return n}else if(n=this.validateAll(t,o,[],[\"dependencies\",i],r))return n}return null},c.prototype.validateCombinations=function(t,e,r){return this.validateAllOf(t,e,r)||this.validateAnyOf(t,e,r)||this.validateOneOf(t,e,r)||this.validateNot(t,e,r)||null},c.prototype.validateAllOf=function(t,e,r){if(void 0===e.allOf)return null;for(var n,i=0;i<e.allOf.length;i++){var o=e.allOf[i];if(n=this.validateAll(t,o,[],[\"allOf\",i],r))return n}return null},c.prototype.validateAnyOf=function(t,e,r){if(void 0===e.anyOf)return null;var n,i,o=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var u=!0,s=0;s<e.anyOf.length;s++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=e.anyOf[s],l=this.errors.length,f=this.validateAll(t,c,[],[\"anyOf\",s],r);if(null===f&&l===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var h in this.knownPropertyPaths)i[h]=!0,delete n[h];for(var p in this.unknownPropertyPaths)i[p]||(n[p]=!0);u=!1;continue}return null}f&&o.push(f.prefixWith(null,\"\"+s).prefixWith(null,\"anyOf\"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),u?(o=o.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(g.ANY_OF_MISSING,{},\"\",\"/anyOf\",o,t,e)):void 0},c.prototype.validateOneOf=function(t,e,r){if(void 0===e.oneOf)return null;var n,i,o=null,a=[],u=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=0;s<e.oneOf.length;s++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=e.oneOf[s],l=this.errors.length,f=this.validateAll(t,c,[],[\"oneOf\",s],r);if(null===f&&l===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,u),this.createError(g.ONE_OF_MULTIPLE,{index1:o,index2:s},\"\",\"/oneOf\",null,t,e);if(o=s,this.trackUnknownProperties){for(var h in this.knownPropertyPaths)i[h]=!0,delete n[h];for(var p in this.unknownPropertyPaths)i[p]||(n[p]=!0)}}else f&&a.push(f)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===o?(a=a.concat(this.errors.slice(u)),this.errors=this.errors.slice(0,u),this.createError(g.ONE_OF_MISSING,{},\"\",\"/oneOf\",a,t,e)):(this.errors=this.errors.slice(0,u),null)},c.prototype.validateNot=function(t,e,r){if(void 0===e.not)return null;var n,i,o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(t,e.not,null,null,r),u=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===a&&0===u.length?this.createError(g.NOT_PASSED,{},\"\",\"/not\",null,t,e):null},c.prototype.validateHypermedia=function(t,e,r){if(!e.links)return null;for(var n,i=0;i<e.links.length;i++){var o=e.links[i];if(\"describedby\"===o.rel){for(var a=new s(o.href),u=!0,c=0;c<a.varNames.length;c++)if(!(a.varNames[c]in t)){u=!1;break}if(u){var l={$ref:a.fillFromObject(t)};if(n=this.validateAll(t,l,[],[\"links\",i],r))return n}}}};var g={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},_={};for(var O in g)_[g[O]]=O;var b={INVALID_TYPE:\"Invalid type: {type} (expected {expected})\",ENUM_MISMATCH:\"No enum match for: {value}\",ANY_OF_MISSING:'Data does not match any schemas from \"anyOf\"',ONE_OF_MISSING:'Data does not match any schemas from \"oneOf\"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from \"oneOf\": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from \"not\"',NUMBER_MULTIPLE_OF:\"Value {value} is not a multiple of {multipleOf}\",NUMBER_MINIMUM:\"Value {value} is less than minimum {minimum}\",NUMBER_MINIMUM_EXCLUSIVE:\"Value {value} is equal to exclusive minimum {minimum}\",NUMBER_MAXIMUM:\"Value {value} is greater than maximum {maximum}\",NUMBER_MAXIMUM_EXCLUSIVE:\"Value {value} is equal to exclusive maximum {maximum}\",NUMBER_NOT_A_NUMBER:\"Value {value} is not a valid number\",STRING_LENGTH_SHORT:\"String is too short ({length} chars), minimum {minimum}\",STRING_LENGTH_LONG:\"String is too long ({length} chars), maximum {maximum}\",STRING_PATTERN:\"String does not match pattern: {pattern}\",OBJECT_PROPERTIES_MINIMUM:\"Too few properties defined ({propertyCount}), minimum {minimum}\",OBJECT_PROPERTIES_MAXIMUM:\"Too many properties defined ({propertyCount}), maximum {maximum}\",OBJECT_REQUIRED:\"Missing required property: {key}\",OBJECT_ADDITIONAL_PROPERTIES:\"Additional properties not allowed\",OBJECT_DEPENDENCY_KEY:\"Dependency failed - key must exist: {missing} (due to key: {key})\",ARRAY_LENGTH_SHORT:\"Array is too short ({length}), minimum {minimum}\",ARRAY_LENGTH_LONG:\"Array is too long ({length}), maximum {maximum}\",ARRAY_UNIQUE:\"Array items are not unique (indices {match1} and {match2})\",ARRAY_ADDITIONAL_ITEMS:\"Additional items not allowed\",FORMAT_CUSTOM:\"Format validation failed ({message})\",KEYWORD_CUSTOM:\"Keyword failed: {key} ({message})\",CIRCULAR_REFERENCE:\"Circular $refs: {urls}\",UNKNOWN_PROPERTY:\"Unknown property (not in schema)\"};function E(t,e,r,n,i){if(Error.call(this),void 0===t)throw new Error(\"No error code supplied: \"+n);this.message=\"\",this.params=e,this.code=t,this.dataPath=r||\"\",this.schemaPath=n||\"\",this.subErrors=i||null;var o=new Error(this.message);if(this.stack=o.stack||o.stacktrace,!this.stack)try{throw o}catch(o){this.stack=o.stack||o.stacktrace}}E.prototype=Object.create(Error.prototype),E.prototype.constructor=E,E.prototype.name=\"ValidationError\",E.prototype.prefixWith=function(t,e){if(null!==t&&(t=t.replace(/~/g,\"~0\").replace(/\\//g,\"~1\"),this.dataPath=\"/\"+t+this.dataPath),null!==e&&(e=e.replace(/~/g,\"~0\").replace(/\\//g,\"~1\"),this.schemaPath=\"/\"+e+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(t,e);return this};var P={};var S=function t(e){var r,n,i=new c,o={setErrorReporter:function(t){return\"string\"==typeof t?this.language(t):(n=t,!0)},addFormat:function(){i.addFormat.apply(i,arguments)},language:function(t){return t?(P[t]||(t=t.split(\"-\")[0]),!!P[t]&&(r=t,t)):r},addLanguage:function(t,e){var r;for(r in g)e[r]&&!e[g[r]]&&(e[g[r]]=e[r]);var n=t.split(\"-\")[0];if(P[n]){P[t]=Object.create(P[n]);for(r in e)void 0===P[n][r]&&(P[n][r]=e[r]),P[t][r]=e[r]}else P[t]=e,P[n]=e;return this},freshApi:function(e){var r=t();return e&&r.language(e),r},validate:function(t,e,o,a){var u=m(r),s=new c(i,!1,n?function(t,e,r){return n(t,e,r)||u(t,e,r)}:u,o,a);\"string\"==typeof e&&(e={$ref:e}),s.addSchema(\"\",e);var l=s.validateAll(t,e,null,null,\"\");return!l&&a&&(l=s.banUnknownProperties(t,e)),this.error=l,this.missing=s.missing,this.valid=null===l,this.valid},validateResult:function(){var t={toString:function(){return this.valid?\"valid\":this.error.message}};return this.validate.apply(t,arguments),t},validateMultiple:function(t,e,o,a){var u=m(r),s=new c(i,!0,n?function(t,e,r){return n(t,e,r)||u(t,e,r)}:u,o,a);\"string\"==typeof e&&(e={$ref:e}),s.addSchema(\"\",e),s.validateAll(t,e,null,null,\"\"),a&&s.banUnknownProperties(t,e);var l={toString:function(){return this.valid?\"valid\":this.error.message}};return l.errors=s.errors,l.missing=s.missing,l.valid=0===l.errors.length,l},addSchema:function(){return i.addSchema.apply(i,arguments)},getSchema:function(){return i.getSchema.apply(i,arguments)},getSchemaMap:function(){return i.getSchemaMap.apply(i,arguments)},getSchemaUris:function(){return i.getSchemaUris.apply(i,arguments)},getMissingUris:function(){return i.getMissingUris.apply(i,arguments)},dropSchemas:function(){i.dropSchemas.apply(i,arguments)},defineKeyword:function(){i.defineKeyword.apply(i,arguments)},defineError:function(t,e,r){if(\"string\"!=typeof t||!/^[A-Z]+(_[A-Z]+)*$/.test(t))throw new Error(\"Code name must be a string in UPPER_CASE_WITH_UNDERSCORES\");if(\"number\"!=typeof e||e%1!=0||e<1e4)throw new Error(\"Code number must be an integer > 10000\");if(void 0!==g[t])throw new Error(\"Error already defined: \"+t+\" as \"+g[t]);if(void 0!==_[e])throw new Error(\"Error code already used: \"+_[e]+\" as \"+e);g[t]=e,_[e]=t,b[t]=b[e]=r;for(var n in P){var i=P[n];i[t]&&(i[e]=i[e]||i[t])}},reset:function(){i.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:y,resolveUrl:d,getDocumentUri:v,errorCodes:g};return o.language(e||\"en\"),o}();return S.addLanguage(\"en-gb\",b),S.tv4=S,S})?n.apply(e,i):n)||(t.exports=o)},,,,function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=o(r(4)),i=o(r(7));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,r){(0,n.default)(this,t),this._sourceCode=r,this._sourceCodeClassname=e,this._encoding=null,this._signature=null}return(0,i.default)(t,[{key:\"sourceCode\",get:function(){return this._sourceCode},set:function(t){t&&(this._sourceCode=t)}},{key:\"sourceCodeClassname\",get:function(){return this._sourceCodeClassname},set:function(t){t&&(this._sourceCodeClassname=t)}},{key:\"encoding\",get:function(){return this._encoding},set:function(t){t&&(this._encoding=t)}},{key:\"signature\",get:function(){return this._signature},set:function(t){t&&(this._signature=t)}}]),t}();e.default=a,t.exports=e.default},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.HypertyResourceType=e.HypertyType=e.RuntimeHypertyCapabilityType=void 0;var n=s(r(28)),i=s(r(4)),o=s(r(7)),a=s(r(36)),u=s(r(37));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,r,o,u,s,c,l,f,h){(0,i.default)(this,e);var p=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,o,u,s,c,l));return p._configuration={},p._constraints={},p._policies={},p._messageSchema=null,p._hypertyType=f,p._dataObjects=h,p}return(0,u.default)(e,t),(0,o.default)(e,[{key:\"hypertyType\",get:function(){return this._hypertyType},set:function(t){t&&(this._hypertyType=t)}},{key:\"dataObjects\",get:function(){return this._dataObjects},set:function(t){t&&(this._dataObjects=t)}},{key:\"configuration\",get:function(){return this._configuration},set:function(t){t&&(this._configuration=t)}},{key:\"constraints\",get:function(){return this._constraints},set:function(t){t&&(this._constraints=t)}},{key:\"messageSchema\",get:function(){return this._messageSchema},set:function(t){t&&(this._messageSchema=t)}},{key:\"policies\",get:function(){return this._policies},set:function(t){t&&(this._policies=t)}}]),e}(s(r(101)).default);e.RuntimeHypertyCapabilityType={},e.HypertyType={COMMUNICATOR:\"communicator\",IDENTITY:\"identity\",CONTEXT:\"context\"},e.HypertyResourceType={chat:\"CHAT\",audio:\"Audio\",video:\"Video\",av:\"AV\",screen:\"SCREEN\",file:\"FILe\",midi:\"MIDI\"};e.default=c},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=s(r(28)),i=s(r(4)),o=s(r(7)),a=s(r(36)),u=s(r(37));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,r,o,u,s,c,l,f,h,p,d,v,y,m,g){(0,i.default)(this,e);var _=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,o,u,s,c,l));return _._messageSchemas=f,_._configuration=h||{},_._constraints=p||{},_._hypertyType=d,_._dataObjects=v||[],_._interworking=y,_._idpProxy=m,_._mutualAuthentication=g,_}return(0,u.default)(e,t),(0,o.default)(e,[{key:\"messageSchemas\",get:function(){return this._messageSchemas},set:function(t){t&&(this._messageSchemas=t)}},{key:\"constraints\",get:function(){return this._constraints},set:function(t){t&&(this._constraints=t)}},{key:\"configuration\",get:function(){return this._configuration},set:function(t){t&&(this._configuration=t)}},{key:\"hypertyType\",get:function(){return this._hypertyType},set:function(t){this._hypertyType=t}},{key:\"dataObjects\",get:function(){return this._dataObjects},set:function(t){this._dataObjects=t}},{key:\"interworking\",get:function(){return this._interworking},set:function(t){this._interworking=t}},{key:\"idpProxy\",get:function(){return this._idpProxy},set:function(t){this._idpProxy=t}},{key:\"mutualAuthentication\",get:function(){return this._mutualAuthentication},set:function(t){this._mutualAuthentication=t}}]),e}(s(r(101)).default);e.default=c,t.exports=e.default},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=p(r(4)),i=p(r(7)),o=r(101),a=p(o),u=p(r(139)),s=p(r(140)),c=p(r(141)),l=p(r(143)),f=p(r(144)),h=r(145);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(){(0,n.default)(this,t)}return(0,i.default)(t,[{key:\"createCatalogueDataObject\",value:function(t,e,r,n,i,o,u){if(void 0===t||void 0===e||void 0===r||void 0===n||void 0===i||void 0===o||void 0===u)throw new Error(\"Invalid parameters!\");return new a.default(t,e,r,n,i,o,u)}},{key:\"createHypertyDescriptorObject\",value:function(t,e,r,n,i,a,u,c){if(void 0===t||void 0===e||void 0===r||void 0===n||void 0===i||void 0===a||void 0===u||void 0===c)throw new Error(\"Invalid parameters!\");return new s.default(t,o.CatalogueObjectType.HYPERTY,e,r,n,i,a,u,c)}},{key:\"createProtoStubDescriptorObject\",value:function(t,e,r,n,i,a,u,s,l,f,h,p,d,v){if(void 0===t||void 0===e||void 0===r||void 0===n||void 0===i||void 0===a||void 0===u||void 0===s||void 0===l)throw new Error(\"Invalid parameters!\");return new c.default(t,o.CatalogueObjectType.PROTOSTUB,e,r,n,i,a,u,s,l,f,h,p,d,v)}},{key:\"createHypertyRuntimeDescriptorObject\",value:function(t,e,r,n,i,a,u,s,c,f,h){if(void 0===t||void 0===e||void 0===r||void 0===n||void 0===i||void 0===a||void 0===u)throw new Error(\"Invalid parameters!\");return new l.default(t,o.CatalogueObjectType.HYPERTY_RUNTIME,e,r,n,i,a,u,s,c,f,h)}},{key:\"createHypertyInterceptorDescriptorObject\",value:function(t,e,r,n,i,a,u,s){if(void 0===t||void 0===e||void 0===r||void 0===n||void 0===i||void 0===a)throw new Error(\"Invalid parameters!\");return new f.default(t,o.CatalogueObjectType.HYPERTY_INTERCEPTOR,e,r,n,i,a,u,s)}},{key:\"createDataObjectSchema\",value:function(t,e,r,n,i,a){if(void 0===t||void 0===e||void 0===r||void 0===n||void 0===i||void 0===a)throw new Error(\"Invalid parameters!\");return new h.DataObjectSchema(t,o.CatalogueObjectType.HYPERTY_DATA_OBJECT,e,r,n,i,a)}},{key:\"createMessageDataObjectSchema\",value:function(t,e,r,n,i,a){if(void 0===t||void 0===e||void 0===r||void 0===n||void 0===i||void 0===a)throw new Error(\"Invalid parameters!\");return new h.DataObjectSchema(t,o.CatalogueObjectType.HYPERTY_DATA_OBJECT,e,r,n,i,a)}},{key:\"createHypertyDataObjectSchema\",value:function(t,e,r,n,i,a,u,s){if(void 0===t||void 0===e||void 0===r||void 0===n||void 0===i||void 0===a||void 0===s||void 0===u)throw new Error(\"Invalid parameters!\");return s===h.DataUrlScheme.COMM?new h.CommunicationDataObjectSchema(t,o.CatalogueObjectType.HYPERTY_DATA_OBJECT,e,r,n,i,a,s,u):s===h.DataUrlScheme.CONNECTION?new h.ConnectionDataObjectSchema(t,o.CatalogueObjectType.HYPERTY_DATA_OBJECT,e,r,n,i,a,s,u):s===h.DataUrlScheme.CTXT?new h.ContextDataObjectSchema(t,o.CatalogueObjectType.HYPERTY_DATA_OBJECT,e,r,n,i,a,s,u):s===h.DataUrlScheme.IDENTITY?new h.IdentityDataObjectSchema(t,o.CatalogueObjectType.HYPERTY_DATA_OBJECT,e,r,n,i,a,s,u):void 0}},{key:\"createSourcePackage\",value:function(t,e){if(void 0===e||void 0===t)throw new Error(\"Invalid parameters!\");return new u.default(t,e)}}]),t}();e.default=d,t.exports=e.default},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.RuntimeType=e.RuntimeProtocolCapability=e.RuntimeHypertyCapability=void 0;var n=c(r(59)),i=c(r(28)),o=c(r(4)),a=c(r(7)),u=c(r(36)),s=c(r(37));function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r,n,a,s,c,l,p,d,v,y,m){(0,o.default)(this,e);var g=(0,u.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,n,a,s,c,l));return g._runtimeType=p,g._hypertyCapabilities=d||new f(!0,!1,!1,!1,!1),g._protocolCapabilities=v||new h(!0,!1,!0,!1,!1,!1),g._p2pHandlerStub=y,g._p2pRequesterStub=m,g}return(0,s.default)(e,t),(0,a.default)(e,[{key:\"runtimeType\",get:function(){return this._runtimeType},set:function(t){t&&(this._runtimeType=t)}},{key:\"hypertyCapabilities\",get:function(){return this._hypertyCapabilities},set:function(t){t&&(this._hypertyCapabilities=t)}},{key:\"protocolCapabilities\",get:function(){return this._hypertyCapabilities},set:function(t){t&&(this._protocolCapabilities=t)}},{key:\"p2pHandlerStub\",get:function(){return this._p2pHandlerStub},set:function(t){this._p2pHandlerStub=t}},{key:\"p2pRequesterStub\",get:function(){return this._p2pRequesterStub},set:function(t){this._p2pRequesterStub=t}}]),e}(c(r(101)).default),f=e.RuntimeHypertyCapability=function(){function t(e,r,n,i,a){(0,o.default)(this,t),this._isWebRTC=e,this._isMic=r,this._isCamera=n,this._isSensor=i,this._isORTC=a}return(0,a.default)(t,[{key:\"getCapabilitySet\",value:function(){return(0,n.default)(this)}},{key:\"isMic\",get:function(){return this._isMic}},{key:\"isCamera\",get:function(){return this._isCamera}},{key:\"isSensor\",get:function(){return this._isSensor}},{key:\"isWebRTC\",get:function(){return this._isWebRTC}},{key:\"isORTCS\",get:function(){return this._isORTC}}]),t}(),h=e.RuntimeProtocolCapability=function(){function t(e,r,n,i,a,u){(0,o.default)(this,t),this._isHttp=e,this._isHttps=r,this._isWS=n,this._isWSS=i,this._isCoap=a,this._isDataChannel=u}return(0,a.default)(t,[{key:\"isHttp\",value:function(){return this._isHttp}},{key:\"isHttps\",value:function(){return this._isHttps}},{key:\"isWS\",value:function(){return this._isWS}},{key:\"isSensorSupported\",value:function(){return this._isSensor}},{key:\"isWSS\",value:function(){return this._isWSS}},{key:\"isCoap\",value:function(){return this._isCoap}},{key:\"isDataChannel\",value:function(){return this._isDataChannel}},{key:\"getCapabilitySet\",value:function(){return(0,n.default)(this)}}]),t}();e.RuntimeType={BROWSER:\"browser\",STANDALONE:\"standalone\",SERVER:\"server\",GATEWAY:\"gateway\"};e.default=l},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=s(r(28)),i=s(r(4)),o=s(r(7)),a=s(r(36)),u=s(r(37));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,r,o,u,s,c,l,f,h){(0,i.default)(this,e);var p=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,o,u,s,c,l));return p._configuration=f,p._policies=h,p}return(0,u.default)(e,t),(0,o.default)(e,[{key:\"configuration\",get:function(){return this._configuration},set:function(t){this._configuration=t}},{key:\"policies\",get:function(){return this._policies},set:function(t){this._policies=t}}]),e}(s(r(101)).default);e.default=c,t.exports=e.default},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.DataUrlScheme=e.ContextDataObjectSchema=e.IdentityDataObjectSchema=e.ConnectionDataObjectSchema=e.CommunicationDataObjectSchema=e.HypertyDataObjectSchema=e.MessageDataObjectSchema=e.DataObjectSchema=void 0;var n=s(r(28)),i=s(r(4)),o=s(r(36)),a=s(r(37)),u=s(r(101));function s(t){return t&&t.__esModule?t:{default:t}}var c=e.DataObjectSchema=function(t){function e(t,r,a,u,s,c,l){return(0,i.default)(this,e),(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,a,u,s,c,l))}return(0,a.default)(e,t),e}(u.default),l=(e.MessageDataObjectSchema=function(t){function e(t,r,a,u,s,c,l){return(0,i.default)(this,e),(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,a,u,s,c,l))}return(0,a.default)(e,t),e}(c),e.HypertyDataObjectSchema=function(t){function e(t,r,a,u,s,c,l,f,h){(0,i.default)(this,e);var p=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,a,u,s,c,l));return p._accessControlPolicy=f,p._scheme=h,p}return(0,a.default)(e,t),e}(c));e.CommunicationDataObjectSchema=function(t){function e(t,r,a,u,s,c,l,f){return(0,i.default)(this,e),(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,a,u,s,c,l,f))}return(0,a.default)(e,t),e}(l),e.ConnectionDataObjectSchema=function(t){function e(t,r,a,u,s,c,l,f){return(0,i.default)(this,e),(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,a,u,s,c,l,f))}return(0,a.default)(e,t),e}(l),e.IdentityDataObjectSchema=function(t){function e(t,r,a,u,s,c,l,f){return(0,i.default)(this,e),(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,a,u,s,c,l,f))}return(0,a.default)(e,t),e}(l),e.ContextDataObjectSchema=function(t){function e(t,r,a,u,s,c,l,f){return(0,i.default)(this,e),(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,r,a,u,s,c,l,f))}return(0,a.default)(e,t),e}(l),e.DataUrlScheme={COMM:\"COMM\",CONNECTION:\"CONNECTION\",CTXT:\"CTXT\",IDENTITY:\"IDENTITY\"};e.default=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.RuntimeCatalogue=void 0;var n,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(23)),o=r(183),a=(n=o)&&n.__esModule?n:{default:n};i.getLogger(\"RuntimeCatalogue\").setLevel(0),e.RuntimeCatalogue=a.default},function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=l(r(184)),i=l(r(59)),o=l(r(20)),a=l(r(4)),u=l(r(7)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(23)),c=l(r(142));function l(t){return t&&t.__esModule?t:{default:t}}var f=s.getLogger(\"RuntimeCatalogue\"),h=function(){function t(e,r,n){if((0,a.default)(this,t),!e)throw Error(\"The catalogue needs the runtimeFactory\");this._factory=new c.default,this.httpRequest=e.createHttpRequest(),this.atob=e.atob?e.atob:atob;var i=r||\"runtimeCatalogue\",o=n||\"&cguid, accessControlPolicy, constraints, dataObjects, hypertyType, objectName, sourcePackage, version\",u={};u[i]=o,this.storageManager=e.storageManager(i,u)}return(0,u.default)(t,[{key:\"getDescriptor\",value:function(t,e){var r=this,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=arguments[3];f.info(\"[RuntimeCatalogue] - getting descriptor from: \",t,\" with constraints: \",u);var s=!1,c=!1,l=void 0,h=l=(l=void 0!=u?o.default.all([this.httpRequest.post(t+\"/version\",{body:(0,i.default)(u)}),this.httpRequest.post(t+\"/cguid\",{body:(0,i.default)(u)})]):o.default.all([this.httpRequest.get(t+\"/version\"),this.httpRequest.get(t+\"/cguid\")])).then(function(e){var o=(0,n.default)(e,2),a=o[0],c=o[1];return f.info(\"[RuntimeCatalogue] - got version (\"+a+\") and cguid (\"+c+\") for descriptor \"+t),r.storageManager.getVersion(\"cguid\",c).then(function(e){return e>=a?(f.warn(\"storageManager contains saved version that is the same or newer than requested\"),s=!0,r.storageManager.get(\"cguid\",c)):(f.warn(\"storageManager does not contain saved version\"),(void 0!=u?r.httpRequest.post(t,{body:(0,i.default)(u)}):r.httpRequest.get(t)).then(function(t){if((t=JSON.parse(t)).ERROR)throw new Error(t);return t}))})}).catch(function(e){var r=\"Unable to get descriptor for \"+t+(void 0!=u?\" with constraints \"+u:\"\")+\": \"+e;throw f.error(r),new Error(r)});return a&&(f.log(\"adding promise to attach sourcePackage\"),h=l.then(function(t){return t.sourcePackage?(c=!0,t):(c=!1,r.attachRawSourcePackage(t))})),h=h.then(function(t){return(!s||s&&!c&&a)&&r.storageManager.set(t.cguid,t.version,t),e.apply(r,[t,u])})}},{key:\"attachRawSourcePackage\",value:function(t,e){var r=this;return f.log(\"attaching raw sourcePackage from:\",t.sourcePackageURL),new o.default(function(n,o){(void 0!=e?r.httpRequest.post(t.sourcePackageURL,{body:(0,i.default)(e)}):r.httpRequest.get(t.sourcePackageURL)).then(function(e){e=JSON.parse(e),t.sourcePackage=e,n(t)}).catch(function(t){o(t)})})}},{key:\"getHypertyDescriptor\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2];return this.getDescriptor(t,this.createHyperty,e,r)}},{key:\"getStubDescriptor\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2];return this.getDescriptor(t,this.createStub,e,r)}},{key:\"getRuntimeDescriptor\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2];return this.getDescriptor(t,this.createRuntimeDescriptor,e,r)}},{key:\"getDataSchemaDescriptor\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2];return this.getDescriptor(t,this.createDataSchema,e,r)}},{key:\"getIdpProxyDescriptor\",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2];return this.getDescriptor(t,this.createIdpProxy,e,r)}},{key:\"createHyperty\",value:function(t){var e=this._factory.createHypertyDescriptorObject(t.cguid,t.version,t.objectName,t.description,t.language,t.sourcePackageURL,t.type||t.hypertyType,t.dataObjects);e.configuration=t.configuration,e.constraints=t.constraints,e.messageSchema=t.messageSchema,e.policies=t.policies,e.signature=t.signature;var r=t.sourcePackage;return r&&(e.sourcePackage=this.createSourcePackage(r)),e}},{key:\"createStub\",value:function(t){var e=this._factory.createProtoStubDescriptorObject(t.cguid,t.version,t.objectName,t.description,t.language,t.sourcePackageURL,t.messageSchemas,t.configuration,t.constraints,t.hypertyType,t.dataObjects,t.interworking,t.idpProxy,t.mutualAuthentication);e.signature=t.signature;var r=t.sourcePackage;return r&&(e.sourcePackage=this.createSourcePackage(r)),e}},{key:\"createRuntimeDescriptor\",value:function(t){try{t.hypertyCapabilities=JSON.parse(t.hypertyCapabilities),t.protocolCapabilities=JSON.parse(t.protocolCapabilities)}catch(t){}var e=this._factory.createHypertyRuntimeDescriptorObject(t.cguid,t.version,t.objectName,t.description,t.language,t.sourcePackageURL,t.type||t.runtimeType,t.hypertyCapabilities,t.protocolCapabilities,t.p2pHandlerStub,t.p2pRequesterStub);e.signature=t.signature;var r=t.sourcePackage;return r&&(e.sourcePackage=this.createSourcePackage(r)),e}},{key:\"createDataSchema\",value:function(t){var e=void 0;(e=t.accessControlPolicy&&t.scheme?this._factory.createHypertyDataObjectSchema(t.cguid,t.version,t.objectName,t.description,t.language,t.sourcePackageURL,t.accessControlPolicy,t.scheme):this._factory.createMessageDataObjectSchema(t.cguid,t.version,t.objectName,t.description,t.language,t.sourcePackageURL)).signature=t.signature;var r=t.sourcePackage;if(r){e.sourcePackage=this.createSourcePackage(r);try{e.sourcePackage.sourceCode=JSON.parse(e.sourcePackage.sourceCode)}catch(t){f.log(\"DataSchema Source code is already parsed\")}return e}return e}},{key:\"createIdpProxy\",value:function(t){var e=this._factory.createProtoStubDescriptorObject(t.cguid,t.version,t.objectName,t.description,t.language,t.sourcePackageURL,t.messageSchemas,t.configuration,t.constraints,t.hypertyType,t.dataObjects,t.interworking,t.idpProxy,t.mutualAuthentication);e.signature=t.signature;var r=t.sourcePackage;return r&&(r=this.createSourcePackage(r),e.sourcePackage=r),e}},{key:\"createSourcePackage\",value:function(t){\"base64\"===t.encoding&&(t.sourceCode=this.atob(t.sourceCode),t.encoding=\"utf-8\");var e=this._factory.createSourcePackage(t.sourceCodeClassname,t.sourceCode);return t.encoding&&(e.encoding=t.encoding),t.signature&&(e.signature=t.signature),e}},{key:\"getSourcePackageFromURL\",value:function(t){var e=this;return f.log(\"getting sourcePackage from:\",t),new o.default(function(r,n){e.httpRequest.get(t).then(function(t){if(t.ERROR)n(t);else{t=JSON.parse(t);var i=e.createSourcePackage(t);r(i)}}).catch(function(t){n(t)})})}},{key:\"getSourceCodeFromDescriptor\",value:function(t){var e=this;return new o.default(function(r,n){t.sourcePackage?r(t.sourcePackage.sourceCode):e.storageManager.getVersion(t.sourcePackageURL+\"/sourceCode\").then(function(i){i>=t.version?(f.log(\"returning cached version from storageManager\"),e.storageManager.get(t.sourcePackageURL+\"/sourceCode\").then(function(t){r(t)}).catch(function(t){n(t)})):e.httpRequest.get(t.sourcePackageURL+\"/sourceCode\").then(function(i){i.ERROR?n(i):(e.storageManager.set(t.sourcePackageURL+\"/sourceCode\",t.version,i),r(i))}).catch(function(t){n(t)})}).catch(function(t){n(t)})})}},{key:\"getTypeList\",value:function(t,e){var r=this;return new o.default(function(n,o){(void 0!=e?r.httpRequest.post(t,{body:(0,i.default)(e)}):r.httpRequest.get(t)).then(function(t){t=JSON.parse(t),n(t)}).catch(function(t){o(t)})})}},{key:\"deleteFromPM\",value:function(t){return this.storageManager.delete(t)}},{key:\"runtimeURL\",set:function(t){this._runtimeURL=t},get:function(){return this._runtimeURL}}]),t}();e.default=h,t.exports=e.default},function(t,e,r){\"use strict\";e.__esModule=!0;var n=o(r(185)),i=o(r(188));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var u,s=(0,i.default)(t);!(n=(u=s.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}()},function(t,e,r){t.exports={default:r(186),__esModule:!0}},function(t,e,r){r(53),r(51),t.exports=r(187)},function(t,e,r){var n=r(65),i=r(2)(\"iterator\"),o=r(16);t.exports=r(0).isIterable=function(t){var e=Object(t);return void 0!==e[i]||\"@@iterator\"in e||o.hasOwnProperty(n(e))}},function(t,e,r){t.exports={default:r(189),__esModule:!0}},function(t,e,r){r(53),r(51),t.exports=r(190)},function(t,e,r){var n=r(9),i=r(100);t.exports=r(0).getIterator=function(t){var e=i(t);if(\"function\"!=typeof e)throw TypeError(t+\" is not iterable!\");return n(e.call(t))}}])});","// version: 0.8.0\r\n// date: Tue Jan 09 2018 17:01:37 GMT+0000 (WET)\r\n// licence: \r\n/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\n\r\n\r\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"StorageManager\",[],e):\"object\"==typeof exports?exports.StorageManager=e():(t[\"\"]=t[\"\"]||{},t[\"\"].StorageManager=e())}(\"undefined\"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=152)}([function(t,e){var n=t.exports={version:\"2.5.3\"};\"number\"==typeof __e&&(__e=n)},function(t,e){var n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(t,e,n){var r=n(34)(\"wks\"),o=n(19),i=n(1).Symbol,u=\"function\"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)(\"Symbol.\"+t))}).store=r},function(t,e,n){t.exports=!n(12)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e,n){\"use strict\";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},function(t,e,n){var r=n(1),o=n(0),i=n(14),u=n(10),f=\"prototype\",c=function(t,e,n){var a,s,l,p=t&c.F,v=t&c.G,y=t&c.S,d=t&c.P,h=t&c.B,g=t&c.W,b=v?o:o[e]||(o[e]={}),m=b[f],w=v?r:y?r[e]:(r[e]||{})[f];v&&(n=e);for(a in n)(s=!p&&w&&void 0!==w[a])&&a in b||(l=s?w[a]:n[a],b[a]=v&&\"function\"!=typeof w[a]?n[a]:h&&s?i(l,r):g&&w[a]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[f]=t[f],e}(l):d&&\"function\"==typeof l?i(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},function(t,e,n){\"use strict\";e.__esModule=!0;var r,o=n(55),i=(r=o)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){var r=n(9),o=n(38),i=n(24),u=Object.defineProperty;e.f=n(3)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(6);t.exports=function(t){if(!r(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e,n){var r=n(8),o=n(15);t.exports=n(3)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(56),o=n(29);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports={}},function(t,e,n){var r=n(44),o=n(35);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+r).toString(36))}},,,function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,n){var r,o;!function(i,u){\"use strict\";void 0===(o=\"function\"==typeof(r=u)?r.call(e,n,e,t):r)||(t.exports=o)}(0,function(){\"use strict\";var t=function(){},e=\"undefined\",n=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"];function r(t,e){var n=t[e];if(\"function\"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function o(e,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<e?t:this.methodFactory(i,e,r)}this.log=this.debug}function i(n,i,u){return\"debug\"===(f=n)&&(f=\"log\"),typeof console!==e&&(void 0!==console[f]?r(console,f):void 0!==console.log?r(console,\"log\"):t)||function(t,n,r){return function(){typeof console!==e&&(o.call(this,n,r),this[t].apply(this,arguments))}}.apply(this,arguments);var f}function u(t,r,u){var f,c=this,a=\"loglevel\";function s(){var t;if(typeof window!==e){try{t=window.localStorage[a]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(a)+\"=\");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===c.levels[t]&&(t=void 0),t}}t&&(a+=\":\"+t),c.name=t,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=u||i,c.getLevel=function(){return f},c.setLevel=function(r,i){if(\"string\"==typeof r&&void 0!==c.levels[r.toUpperCase()]&&(r=c.levels[r.toUpperCase()]),!(\"number\"==typeof r&&r>=0&&r<=c.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+r;if(f=r,!1!==i&&function(t){var r=(n[t]||\"silent\").toUpperCase();if(typeof window!==e){try{return void(window.localStorage[a]=r)}catch(t){}try{window.document.cookie=encodeURIComponent(a)+\"=\"+r+\";\"}catch(t){}}}(r),o.call(c,r,t),typeof console===e&&r<c.levels.SILENT)return\"No console available for logging\"},c.setDefaultLevel=function(t){s()||c.setLevel(t,!1)},c.enableAll=function(t){c.setLevel(c.levels.TRACE,t)},c.disableAll=function(t){c.setLevel(c.levels.SILENT,t)};var l=s();null==l&&(l=null==r?\"WARN\":r),c.setLevel(l,!1)}var f=new u,c={};f.getLogger=function(t){if(\"string\"!=typeof t||\"\"===t)throw new TypeError(\"You must supply a name when creating a logger.\");var e=c[t];return e||(e=c[t]=new u(t,f.getLevel(),f.methodFactory)),e};var a=typeof window!==e?window.log:void 0;return f.noConflict=function(){return typeof window!==e&&window.log===f&&(window.log=a),f},f.getLoggers=function(){return c},f})},function(t,e,n){var r=n(6);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if(\"function\"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e,n){var r=n(8).f,o=n(11),i=n(2)(\"toStringTag\");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(6),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e){t.exports=!0},,function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(34)(\"keys\"),o=n(19);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(29);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(1),o=r[\"__core-js_shared__\"]||(r[\"__core-js_shared__\"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},,,function(t,e,n){t.exports=!n(3)&&!n(12)(function(){return 7!=Object.defineProperty(n(26)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(9),o=n(72),i=n(35),u=n(32)(\"IE_PROTO\"),f=function(){},c=function(){var t,e=n(26)(\"iframe\"),r=i.length;for(e.style.display=\"none\",n(57).appendChild(e),e.src=\"javascript:\",(t=e.contentWindow.document).open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(f.prototype=r(t),n=new f,f.prototype=null,n[u]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){e.f=n(2)},function(t,e,n){var r=n(1),o=n(0),i=n(27),u=n(40),f=n(8).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});\"_\"==t.charAt(0)||t in e||f(e,t,{value:u.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){t.exports={default:n(89),__esModule:!0}},function(t,e,n){var r=n(11),o=n(13),i=n(63)(!1),u=n(32)(\"IE_PROTO\");t.exports=function(t,e){var n,f=o(t),c=0,a=[];for(n in f)n!=u&&r(f,n)&&a.push(n);for(;e.length>c;)r(f,n=e[c++])&&(~i(a,n)||a.push(n));return a}},function(t,e,n){var r=n(5),o=n(0),i=n(12);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*i(function(){n(1)}),\"Object\",u)}},function(t,e,n){\"use strict\";var r=n(27),o=n(5),i=n(50),u=n(10),f=n(11),c=n(16),a=n(71),s=n(25),l=n(52),p=n(2)(\"iterator\"),v=!([].keys&&\"next\"in[].keys()),y=function(){return this};t.exports=function(t,e,n,d,h,g,b){a(n,e,d);var m,w,O,S=function(t){if(!v&&t in P)return P[t];switch(t){case\"keys\":case\"values\":return function(){return new n(this,t)}}return function(){return new n(this,t)}},_=e+\" Iterator\",x=\"values\"==h,j=!1,P=t.prototype,M=P[p]||P[\"@@iterator\"]||h&&P[h],L=!v&&M||S(h),T=h?x?S(\"entries\"):L:void 0,E=\"Array\"==e?P.entries||M:M;if(E&&(O=l(E.call(new t)))!==Object.prototype&&O.next&&(s(O,_,!0),r||f(O,p)||u(O,p,y)),x&&M&&\"values\"!==M.name&&(j=!0,L=function(){return M.call(this)}),r&&!b||!v&&!j&&P[p]||u(P,p,L),c[e]=L,c[_]=y,h)if(m={values:x?L:S(\"values\"),keys:g?L:S(\"keys\"),entries:T},b)for(w in m)w in P||i(P,w,m[w]);else o(o.P+o.F*(v||j),e,m);return m}},function(t,e,n){var r=n(31),o=n(15),i=n(13),u=n(24),f=n(11),c=n(38),a=Object.getOwnPropertyDescriptor;e.f=n(3)?a:function(t,e){if(t=i(t),e=u(e,!0),c)try{return a(t,e)}catch(t){}if(f(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(30),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){\"use strict\";e.__esModule=!0;var r=u(n(78)),o=u(n(80)),i=\"function\"==typeof o.default&&\"symbol\"==typeof r.default?function(t){return typeof t}:function(t){return t&&\"function\"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?\"symbol\":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}e.default=\"function\"==typeof o.default&&\"symbol\"===i(r.default)?function(t){return void 0===t?\"undefined\":i(t)}:function(t){return t&&\"function\"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?\"symbol\":void 0===t?\"undefined\":i(t)}},function(t,e,n){t.exports=n(10)},function(t,e,n){\"use strict\";var r=n(70)(!0);n(46)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(11),o=n(33),i=n(32)(\"IE_PROTO\"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){n(73);for(var r=n(1),o=n(10),i=n(16),u=n(2)(\"toStringTag\"),f=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),c=0;c<f.length;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},,function(t,e,n){t.exports={default:n(60),__esModule:!0}},function(t,e,n){var r=n(18);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==r(t)?t.split(\"\"):Object(t)}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(44),o=n(35).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},,function(t,e,n){n(61);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(5);r(r.S+r.F*!n(3),\"Object\",{defineProperty:n(8).f})},function(t,e){},function(t,e,n){var r=n(13),o=n(48),i=n(64);t.exports=function(t){return function(e,n,u){var f,c=r(e),a=o(c.length),s=i(u,a);if(t&&n!=n){for(;a>s;)if((f=c[s++])!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===n)return t||s||0;return!t&&-1}}},function(t,e,n){var r=n(30),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},,,,,,function(t,e,n){var r=n(30),o=n(29);t.exports=function(t){return function(e,n){var i,u,f=String(o(e)),c=r(n),a=f.length;return c<0||c>=a?t?\"\":void 0:(i=f.charCodeAt(c))<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):u-56320+(i-55296<<10)+65536}}},function(t,e,n){\"use strict\";var r=n(39),o=n(15),i=n(25),u={};n(10)(u,n(2)(\"iterator\"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+\" Iterator\")}},function(t,e,n){var r=n(8),o=n(9),i=n(17);t.exports=n(3)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),f=u.length,c=0;f>c;)r.f(t,n=u[c++],e[n]);return t}},function(t,e,n){\"use strict\";var r=n(74),o=n(75),i=n(16),u=n(13);t.exports=n(46)(Array,\"Array\",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,\"keys\"==e?n:\"values\"==e?t[n]:[n,t[n]])},\"values\"),i.Arguments=i.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},,function(t,e,n){var r=n(19)(\"meta\"),o=n(6),i=n(11),u=n(8).f,f=0,c=Object.isExtensible||function(){return!0},a=!n(12)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:\"O\"+ ++f,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!i(t,r)){if(!c(t))return\"F\";if(!e)return\"E\";s(t)}return t[r].i},getWeak:function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;s(t)}return t[r].w},onFreeze:function(t){return a&&l.NEED&&c(t)&&!i(t,r)&&s(t),t}}},function(t,e,n){t.exports={default:n(79),__esModule:!0}},function(t,e,n){n(51),n(53),t.exports=n(40).f(\"iterator\")},function(t,e,n){t.exports={default:n(81),__esModule:!0}},function(t,e,n){n(82),n(62),n(86),n(87),t.exports=n(0).Symbol},function(t,e,n){\"use strict\";var r=n(1),o=n(11),i=n(3),u=n(5),f=n(50),c=n(77).KEY,a=n(12),s=n(34),l=n(25),p=n(19),v=n(2),y=n(40),d=n(41),h=n(83),g=n(84),b=n(9),m=n(6),w=n(13),O=n(24),S=n(15),_=n(39),x=n(85),j=n(47),P=n(8),M=n(17),L=j.f,T=P.f,E=x.f,k=r.Symbol,A=r.JSON,F=A&&A.stringify,N=\"prototype\",C=v(\"_hidden\"),I=v(\"toPrimitive\"),R={}.propertyIsEnumerable,D=s(\"symbol-registry\"),G=s(\"symbols\"),K=s(\"op-symbols\"),V=Object[N],W=\"function\"==typeof k,U=r.QObject,q=!U||!U[N]||!U[N].findChild,B=i&&a(function(){return 7!=_(T({},\"a\",{get:function(){return T(this,\"a\",{value:7}).a}})).a})?function(t,e,n){var r=L(V,e);r&&delete V[e],T(t,e,n),r&&t!==V&&T(V,e,r)}:T,H=function(t){var e=G[t]=_(k[N]);return e._k=t,e},J=W&&\"symbol\"==typeof k.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof k},Y=function(t,e,n){return t===V&&Y(K,e,n),b(t),e=O(e,!0),b(n),o(G,e)?(n.enumerable?(o(t,C)&&t[C][e]&&(t[C][e]=!1),n=_(n,{enumerable:S(0,!1)})):(o(t,C)||T(t,C,S(1,{})),t[C][e]=!0),B(t,e,n)):T(t,e,n)},z=function(t,e){b(t);for(var n,r=h(e=w(e)),o=0,i=r.length;i>o;)Y(t,n=r[o++],e[n]);return t},Q=function(t){var e=R.call(this,t=O(t,!0));return!(this===V&&o(G,t)&&!o(K,t))&&(!(e||!o(this,t)||!o(G,t)||o(this,C)&&this[C][t])||e)},X=function(t,e){if(t=w(t),e=O(e,!0),t!==V||!o(G,e)||o(K,e)){var n=L(t,e);return!n||!o(G,e)||o(t,C)&&t[C][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=E(w(t)),r=[],i=0;n.length>i;)o(G,e=n[i++])||e==C||e==c||r.push(e);return r},$=function(t){for(var e,n=t===V,r=E(n?K:w(t)),i=[],u=0;r.length>u;)!o(G,e=r[u++])||n&&!o(V,e)||i.push(G[e]);return i};W||(f((k=function(){if(this instanceof k)throw TypeError(\"Symbol is not a constructor!\");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(K,n),o(this,C)&&o(this[C],t)&&(this[C][t]=!1),B(this,t,S(1,n))};return i&&q&&B(V,t,{configurable:!0,set:e}),H(t)})[N],\"toString\",function(){return this._k}),j.f=X,P.f=Y,n(58).f=x.f=Z,n(31).f=Q,n(42).f=$,i&&!n(27)&&f(V,\"propertyIsEnumerable\",Q,!0),y.f=function(t){return H(v(t))}),u(u.G+u.W+u.F*!W,{Symbol:k});for(var tt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),et=0;tt.length>et;)v(tt[et++]);for(var nt=M(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!W,\"Symbol\",{for:function(t){return o(D,t+=\"\")?D[t]:D[t]=k(t)},keyFor:function(t){if(!J(t))throw TypeError(t+\" is not a symbol!\");for(var e in D)if(D[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),u(u.S+u.F*!W,\"Object\",{create:function(t,e){return void 0===e?_(t):z(_(t),e)},defineProperty:Y,defineProperties:z,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),A&&u(u.S+u.F*(!W||a(function(){var t=k();return\"[null]\"!=F([t])||\"{}\"!=F({a:t})||\"{}\"!=F(Object(t))})),\"JSON\",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(m(e)||void 0!==t)&&!J(t))return g(e)||(e=function(t,e){if(\"function\"==typeof n&&(e=n.call(this,t,e)),!J(e))return e}),r[1]=e,F.apply(A,r)}}),k[N][I]||n(10)(k[N],I,k[N].valueOf),l(k,\"Symbol\"),l(Math,\"Math\",!0),l(r.JSON,\"JSON\",!0)},function(t,e,n){var r=n(17),o=n(42),i=n(31);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,f=n(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&e.push(u);return e}},function(t,e,n){var r=n(18);t.exports=Array.isArray||function(t){return\"Array\"==r(t)}},function(t,e,n){var r=n(13),o=n(58).f,i={}.toString,u=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&\"[object Window]\"==i.call(t)?function(t){try{return o(t)}catch(t){return u.slice()}}(t):o(r(t))}},function(t,e,n){n(41)(\"asyncIterator\")},function(t,e,n){n(41)(\"observable\")},function(t,e,n){t.exports={default:n(118),__esModule:!0}},function(t,e,n){n(90),t.exports=n(0).Object.keys},function(t,e,n){var r=n(33),o=n(17);n(45)(\"keys\",function(){return function(t){return o(r(t))}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n(119),t.exports=n(0).Object.assign},function(t,e,n){var r=n(5);r(r.S+r.F,\"Object\",{assign:n(120)})},function(t,e,n){\"use strict\";var r=n(17),o=n(42),i=n(31),u=n(33),f=n(56),c=Object.assign;t.exports=!c||n(12)(function(){var t={},e={},n=Symbol(),r=\"abcdefghijklmnopqrst\";return t[n]=7,r.split(\"\").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join(\"\")!=r})?function(t,e){for(var n=u(t),c=arguments.length,a=1,s=o.f,l=i.f;c>a;)for(var p,v=f(arguments[a++]),y=s?r(v).concat(s(v)):r(v),d=y.length,h=0;d>h;)l.call(v,p=y[h++])&&(n[p]=v[p]);return n}:c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(23)),i=n(153),u=(r=i)&&r.__esModule?r:{default:r};o.getLogger(\"StorageManager\").setLevel(0),e.default=u.default,t.exports=e.default},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=a(n(154)),o=a(n(43)),i=a(n(49)),u=a(n(88)),f=a(n(4)),c=a(n(7));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(23)).getLogger(\"StorageManager\"),l=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if((0,f.default)(this,t),!e)throw Error(\"The Storage Manager needs the database instance\");if(!n)throw Error(\"The Storage Manager needs the storage name\");var i={};r?i=r:i[n]=\"key,version,value\",e.version(o).stores(i),e.open().then(function(t){s.info(\"Found database name \"+t.name+\" with version no: \"+t.verno)}).catch(s.error),this.db=e,this.storageName=n}return(0,c.default)(t,[{key:\"_checkKey\",value:function(t){return\"string\"!=typeof t?t.toString():t}},{key:\"_getTable\",value:function(t){var e=void 0;try{e=this.db.table(this.storageName).name}catch(n){e=this.db.table(t).name}return e}},{key:\"_getPrimaryKey\",value:function(t){return this.db.table(t).schema.primKey.name}},{key:\"_isDefaultSchema\",value:function(t){var e=this._getTable(t),n=this.db[e].schema.instanceTemplate;return n.hasOwnProperty(\"value\")&&n.hasOwnProperty(\"version\")&&n.hasOwnProperty(\"key\")}},{key:\"set\",value:function(t,e,n,r){s.info(\"[StorageManager] - set \",t,n),r=r||t;var o=this._getTable(r),i=this._getPrimaryKey(o),f=n;if(this._isDefaultSchema(r))f={key:t,version:e,value:n};else{var c={};c[i]=t,(0,u.default)(f,c)}return this.db[o].put(f)}},{key:\"get\",value:function(t,e,n){var u=this;console.info(\"[StorageManager] - get \",t,e),n=n||t;var f=this._getTable(n),c=this._getPrimaryKey(f);return this.db.transaction(\"rw!\",this.db[f],function(){if(!t&&!e)return u.db[f].toArray().then(function(t){return t.reduce(function(t,e){return t[e[c]]=e,t},{})});if(!e)return u.db[f].where(c).equals(t).first().then(function(t){return t&&t.hasOwnProperty(\"value\")?t.value:t});var n=void 0===e?\"undefined\":(0,i.default)(e);switch(Array.isArray(e)&&(n=\"array\"),n){case\"string\":return u.db[f].where(t).equals(e).first().then(function(t){return t&&t.hasOwnProperty(\"value\")?t.value:t});case\"object\":var a=\"value.\"+(0,o.default)(e).toString(),s=(0,r.default)(e);return console.log(a,s),u.db[f].where(a).anyOf(s).first().then(function(t){return t&&t.hasOwnProperty(\"value\")?t.value:t});case\"array\":return console.log(\"ARRAY:\",e),u.db[f].where(e).then(function(t){return t&&t.hasOwnProperty(\"value\")?t.value:t})}})}},{key:\"getVersion\",value:function(t,e,n){var r=this;s.info(\"[StorageManager] - getVersion for key \",t),n=n||t;var o=this._getTable(n),i=this._getPrimaryKey(o),u=e;return e||(u=t),this.db.transaction(\"rw!\",this.db[o],function(){return r.db[o].where(i).equals(u).first().then(function(t){return t&&t.hasOwnProperty(\"version\")?t.version:t}).catch(function(e){s.info(\"error getting the version for \",t,\" with error: \",e)})})}},{key:\"delete\",value:function(t,e,n){n=n||t;var r=this._getTable(n),o=this._getPrimaryKey(r),i=e;return e||(i=t),this.db[r].where(o).equals(i).delete()}}]),t}();e.default=l,t.exports=e.default},function(t,e,n){t.exports={default:n(155),__esModule:!0}},function(t,e,n){n(156),t.exports=n(0).Object.values},function(t,e,n){var r=n(5),o=n(157)(!1);r(r.S,\"Object\",{values:function(t){return o(t)}})},function(t,e,n){var r=n(17),o=n(13),i=n(31).f;t.exports=function(t){return function(e){for(var n,u=o(e),f=r(u),c=f.length,a=0,s=[];c>a;)i.call(u,n=f[a++])&&s.push(t?[n,u[n]]:u[n]);return s}}}])});","/*!\n * URI.js - Mutating URLs\n * IPv6 Support\n *\n * Version: 1.19.0\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.IPv6 = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  /*\n  var _in = \"fe80:0000:0000:0000:0204:61ff:fe9d:f156\";\n  var _out = IPv6.best(_in);\n  var _expected = \"fe80::204:61ff:fe9d:f156\";\n\n  console.log(_in, _out, _expected, _out === _expected);\n  */\n\n  // save current IPv6 variable, if any\n  var _IPv6 = root && root.IPv6;\n\n  function bestPresentation(address) {\n    // based on:\n    // Javascript to test an IPv6 address for proper format, and to\n    // present the \"best text representation\" according to IETF Draft RFC at\n    // http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04\n    // 8 Feb 2010 Rich Brown, Dartware, LLC\n    // Please feel free to use this code as long as you provide a link to\n    // http://www.intermapper.com\n    // http://intermapper.com/support/tools/IPV6-Validator.aspx\n    // http://download.dartware.com/thirdparty/ipv6validator.js\n\n    var _address = address.toLowerCase();\n    var segments = _address.split(':');\n    var length = segments.length;\n    var total = 8;\n\n    // trim colons (:: or ::a:b:c or a:b:c::)\n    if (segments[0] === '' && segments[1] === '' && segments[2] === '') {\n      // must have been ::\n      // remove first two items\n      segments.shift();\n      segments.shift();\n    } else if (segments[0] === '' && segments[1] === '') {\n      // must have been ::xxxx\n      // remove the first item\n      segments.shift();\n    } else if (segments[length - 1] === '' && segments[length - 2] === '') {\n      // must have been xxxx::\n      segments.pop();\n    }\n\n    length = segments.length;\n\n    // adjust total segments for IPv4 trailer\n    if (segments[length - 1].indexOf('.') !== -1) {\n      // found a \".\" which means IPv4\n      total = 7;\n    }\n\n    // fill empty segments them with \"0000\"\n    var pos;\n    for (pos = 0; pos < length; pos++) {\n      if (segments[pos] === '') {\n        break;\n      }\n    }\n\n    if (pos < total) {\n      segments.splice(pos, 1, '0000');\n      while (segments.length < total) {\n        segments.splice(pos, 0, '0000');\n      }\n    }\n\n    // strip leading zeros\n    var _segments;\n    for (var i = 0; i < total; i++) {\n      _segments = segments[i].split('');\n      for (var j = 0; j < 3 ; j++) {\n        if (_segments[0] === '0' && _segments.length > 1) {\n          _segments.splice(0,1);\n        } else {\n          break;\n        }\n      }\n\n      segments[i] = _segments.join('');\n    }\n\n    // find longest sequence of zeroes and coalesce them into one segment\n    var best = -1;\n    var _best = 0;\n    var _current = 0;\n    var current = -1;\n    var inzeroes = false;\n    // i; already declared\n\n    for (i = 0; i < total; i++) {\n      if (inzeroes) {\n        if (segments[i] === '0') {\n          _current += 1;\n        } else {\n          inzeroes = false;\n          if (_current > _best) {\n            best = current;\n            _best = _current;\n          }\n        }\n      } else {\n        if (segments[i] === '0') {\n          inzeroes = true;\n          current = i;\n          _current = 1;\n        }\n      }\n    }\n\n    if (_current > _best) {\n      best = current;\n      _best = _current;\n    }\n\n    if (_best > 1) {\n      segments.splice(best, _best, '');\n    }\n\n    length = segments.length;\n\n    // assemble remaining segments\n    var result = '';\n    if (segments[0] === '')  {\n      result = ':';\n    }\n\n    for (i = 0; i < length; i++) {\n      result += segments[i];\n      if (i === length - 1) {\n        break;\n      }\n\n      result += ':';\n    }\n\n    if (segments[length - 1] === '') {\n      result += ':';\n    }\n\n    return result;\n  }\n\n  function noConflict() {\n    /*jshint validthis: true */\n    if (root.IPv6 === this) {\n      root.IPv6 = _IPv6;\n    }\n\n    return this;\n  }\n\n  return {\n    best: bestPresentation,\n    noConflict: noConflict\n  };\n}));\n","/*!\n * URI.js - Mutating URLs\n * Second Level Domain (SLD) Support\n *\n * Version: 1.19.0\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.SecondLevelDomains = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  // save current SecondLevelDomains variable, if any\n  var _SecondLevelDomains = root && root.SecondLevelDomains;\n\n  var SLD = {\n    // list of known Second Level Domains\n    // converted list of SLDs from https://github.com/gavingmiller/second-level-domains\n    // ----\n    // publicsuffix.org is more current and actually used by a couple of browsers internally.\n    // downside is it also contains domains like \"dyndns.org\" - which is fine for the security\n    // issues browser have to deal with (SOP for cookies, etc) - but is way overboard for URI.js\n    // ----\n    list: {\n      'ac':' com gov mil net org ',\n      'ae':' ac co gov mil name net org pro sch ',\n      'af':' com edu gov net org ',\n      'al':' com edu gov mil net org ',\n      'ao':' co ed gv it og pb ',\n      'ar':' com edu gob gov int mil net org tur ',\n      'at':' ac co gv or ',\n      'au':' asn com csiro edu gov id net org ',\n      'ba':' co com edu gov mil net org rs unbi unmo unsa untz unze ',\n      'bb':' biz co com edu gov info net org store tv ',\n      'bh':' biz cc com edu gov info net org ',\n      'bn':' com edu gov net org ',\n      'bo':' com edu gob gov int mil net org tv ',\n      'br':' adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ',\n      'bs':' com edu gov net org ',\n      'bz':' du et om ov rg ',\n      'ca':' ab bc mb nb nf nl ns nt nu on pe qc sk yk ',\n      'ck':' biz co edu gen gov info net org ',\n      'cn':' ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ',\n      'co':' com edu gov mil net nom org ',\n      'cr':' ac c co ed fi go or sa ',\n      'cy':' ac biz com ekloges gov ltd name net org parliament press pro tm ',\n      'do':' art com edu gob gov mil net org sld web ',\n      'dz':' art asso com edu gov net org pol ',\n      'ec':' com edu fin gov info med mil net org pro ',\n      'eg':' com edu eun gov mil name net org sci ',\n      'er':' com edu gov ind mil net org rochest w ',\n      'es':' com edu gob nom org ',\n      'et':' biz com edu gov info name net org ',\n      'fj':' ac biz com info mil name net org pro ',\n      'fk':' ac co gov net nom org ',\n      'fr':' asso com f gouv nom prd presse tm ',\n      'gg':' co net org ',\n      'gh':' com edu gov mil org ',\n      'gn':' ac com gov net org ',\n      'gr':' com edu gov mil net org ',\n      'gt':' com edu gob ind mil net org ',\n      'gu':' com edu gov net org ',\n      'hk':' com edu gov idv net org ',\n      'hu':' 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ',\n      'id':' ac co go mil net or sch web ',\n      'il':' ac co gov idf k12 muni net org ',\n      'in':' ac co edu ernet firm gen gov i ind mil net nic org res ',\n      'iq':' com edu gov i mil net org ',\n      'ir':' ac co dnssec gov i id net org sch ',\n      'it':' edu gov ',\n      'je':' co net org ',\n      'jo':' com edu gov mil name net org sch ',\n      'jp':' ac ad co ed go gr lg ne or ',\n      'ke':' ac co go info me mobi ne or sc ',\n      'kh':' com edu gov mil net org per ',\n      'ki':' biz com de edu gov info mob net org tel ',\n      'km':' asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ',\n      'kn':' edu gov net org ',\n      'kr':' ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ',\n      'kw':' com edu gov net org ',\n      'ky':' com edu gov net org ',\n      'kz':' com edu gov mil net org ',\n      'lb':' com edu gov net org ',\n      'lk':' assn com edu gov grp hotel int ltd net ngo org sch soc web ',\n      'lr':' com edu gov net org ',\n      'lv':' asn com conf edu gov id mil net org ',\n      'ly':' com edu gov id med net org plc sch ',\n      'ma':' ac co gov m net org press ',\n      'mc':' asso tm ',\n      'me':' ac co edu gov its net org priv ',\n      'mg':' com edu gov mil nom org prd tm ',\n      'mk':' com edu gov inf name net org pro ',\n      'ml':' com edu gov net org presse ',\n      'mn':' edu gov org ',\n      'mo':' com edu gov net org ',\n      'mt':' com edu gov net org ',\n      'mv':' aero biz com coop edu gov info int mil museum name net org pro ',\n      'mw':' ac co com coop edu gov int museum net org ',\n      'mx':' com edu gob net org ',\n      'my':' com edu gov mil name net org sch ',\n      'nf':' arts com firm info net other per rec store web ',\n      'ng':' biz com edu gov mil mobi name net org sch ',\n      'ni':' ac co com edu gob mil net nom org ',\n      'np':' com edu gov mil net org ',\n      'nr':' biz com edu gov info net org ',\n      'om':' ac biz co com edu gov med mil museum net org pro sch ',\n      'pe':' com edu gob mil net nom org sld ',\n      'ph':' com edu gov i mil net ngo org ',\n      'pk':' biz com edu fam gob gok gon gop gos gov net org web ',\n      'pl':' art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ',\n      'pr':' ac biz com edu est gov info isla name net org pro prof ',\n      'ps':' com edu gov net org plo sec ',\n      'pw':' belau co ed go ne or ',\n      'ro':' arts com firm info nom nt org rec store tm www ',\n      'rs':' ac co edu gov in org ',\n      'sb':' com edu gov net org ',\n      'sc':' com edu gov net org ',\n      'sh':' co com edu gov net nom org ',\n      'sl':' com edu gov net org ',\n      'st':' co com consulado edu embaixada gov mil net org principe saotome store ',\n      'sv':' com edu gob org red ',\n      'sz':' ac co org ',\n      'tr':' av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ',\n      'tt':' aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ',\n      'tw':' club com ebiz edu game gov idv mil net org ',\n      'mu':' ac co com gov net or org ',\n      'mz':' ac co edu gov org ',\n      'na':' co com ',\n      'nz':' ac co cri geek gen govt health iwi maori mil net org parliament school ',\n      'pa':' abo ac com edu gob ing med net nom org sld ',\n      'pt':' com edu gov int net nome org publ ',\n      'py':' com edu gov mil net org ',\n      'qa':' com edu gov mil net org ',\n      're':' asso com nom ',\n      'ru':' ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ',\n      'rw':' ac co com edu gouv gov int mil net ',\n      'sa':' com edu gov med net org pub sch ',\n      'sd':' com edu gov info med net org tv ',\n      'se':' a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ',\n      'sg':' com edu gov idn net org per ',\n      'sn':' art com edu gouv org perso univ ',\n      'sy':' com edu gov mil net news org ',\n      'th':' ac co go in mi net or ',\n      'tj':' ac biz co com edu go gov info int mil name net nic org test web ',\n      'tn':' agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ',\n      'tz':' ac co go ne or ',\n      'ua':' biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ',\n      'ug':' ac co go ne or org sc ',\n      'uk':' ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ',\n      'us':' dni fed isa kids nsn ',\n      'uy':' com edu gub mil net org ',\n      've':' co com edu gob info mil net org web ',\n      'vi':' co com k12 net org ',\n      'vn':' ac biz com edu gov health info int name net org pro ',\n      'ye':' co com gov ltd me net org plc ',\n      'yu':' ac co edu gov org ',\n      'za':' ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ',\n      'zm':' ac co com edu gov net org sch ',\n      // https://en.wikipedia.org/wiki/CentralNic#Second-level_domains\n      'com': 'ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ',\n      'net': 'gb jp se uk ',\n      'org': 'ae',\n      'de': 'com '\n    },\n    // gorhill 2013-10-25: Using indexOf() instead Regexp(). Significant boost\n    // in both performance and memory footprint. No initialization required.\n    // http://jsperf.com/uri-js-sld-regex-vs-binary-search/4\n    // Following methods use lastIndexOf() rather than array.split() in order\n    // to avoid any memory allocations.\n    has: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') >= 0;\n    },\n    is: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset >= 0) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(0, tldOffset) + ' ') >= 0;\n    },\n    get: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return null;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return null;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return null;\n      }\n      if (sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') < 0) {\n        return null;\n      }\n      return domain.slice(sldOffset+1);\n    },\n    noConflict: function(){\n      if (root.SecondLevelDomains === this) {\n        root.SecondLevelDomains = _SecondLevelDomains;\n      }\n      return this;\n    }\n  };\n\n  return SLD;\n}));\n","/*!\n * URI.js - Mutating URLs\n *\n * Version: 1.19.0\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory(require('./punycode'), require('./IPv6'), require('./SecondLevelDomains'));\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['./punycode', './IPv6', './SecondLevelDomains'], factory);\n  } else {\n    // Browser globals (root is window)\n    root.URI = factory(root.punycode, root.IPv6, root.SecondLevelDomains, root);\n  }\n}(this, function (punycode, IPv6, SLD, root) {\n  'use strict';\n  /*global location, escape, unescape */\n  // FIXME: v2.0.0 renamce non-camelCase properties to uppercase\n  /*jshint camelcase: false */\n\n  // save current URI variable, if any\n  var _URI = root && root.URI;\n\n  function URI(url, base) {\n    var _urlSupplied = arguments.length >= 1;\n    var _baseSupplied = arguments.length >= 2;\n\n    // Allow instantiation without the 'new' keyword\n    if (!(this instanceof URI)) {\n      if (_urlSupplied) {\n        if (_baseSupplied) {\n          return new URI(url, base);\n        }\n\n        return new URI(url);\n      }\n\n      return new URI();\n    }\n\n    if (url === undefined) {\n      if (_urlSupplied) {\n        throw new TypeError('undefined is not a valid argument for URI');\n      }\n\n      if (typeof location !== 'undefined') {\n        url = location.href + '';\n      } else {\n        url = '';\n      }\n    }\n\n    if (url === null) {\n      if (_urlSupplied) {\n        throw new TypeError('null is not a valid argument for URI');\n      }\n    }\n\n    this.href(url);\n\n    // resolve to base according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#constructor\n    if (base !== undefined) {\n      return this.absoluteTo(base);\n    }\n\n    return this;\n  }\n\n  function isInteger(value) {\n    return /^[0-9]+$/.test(value);\n  }\n\n  URI.version = '1.19.0';\n\n  var p = URI.prototype;\n  var hasOwn = Object.prototype.hasOwnProperty;\n\n  function escapeRegEx(string) {\n    // https://github.com/medialize/URI.js/commit/85ac21783c11f8ccab06106dba9735a31a86924d#commitcomment-821963\n    return string.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  }\n\n  function getType(value) {\n    // IE8 doesn't return [Object Undefined] but [Object Object] for undefined value\n    if (value === undefined) {\n      return 'Undefined';\n    }\n\n    return String(Object.prototype.toString.call(value)).slice(8, -1);\n  }\n\n  function isArray(obj) {\n    return getType(obj) === 'Array';\n  }\n\n  function filterArrayValues(data, value) {\n    var lookup = {};\n    var i, length;\n\n    if (getType(value) === 'RegExp') {\n      lookup = null;\n    } else if (isArray(value)) {\n      for (i = 0, length = value.length; i < length; i++) {\n        lookup[value[i]] = true;\n      }\n    } else {\n      lookup[value] = true;\n    }\n\n    for (i = 0, length = data.length; i < length; i++) {\n      /*jshint laxbreak: true */\n      var _match = lookup && lookup[data[i]] !== undefined\n        || !lookup && value.test(data[i]);\n      /*jshint laxbreak: false */\n      if (_match) {\n        data.splice(i, 1);\n        length--;\n        i--;\n      }\n    }\n\n    return data;\n  }\n\n  function arrayContains(list, value) {\n    var i, length;\n\n    // value may be string, number, array, regexp\n    if (isArray(value)) {\n      // Note: this can be optimized to O(n) (instead of current O(m * n))\n      for (i = 0, length = value.length; i < length; i++) {\n        if (!arrayContains(list, value[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var _type = getType(value);\n    for (i = 0, length = list.length; i < length; i++) {\n      if (_type === 'RegExp') {\n        if (typeof list[i] === 'string' && list[i].match(value)) {\n          return true;\n        }\n      } else if (list[i] === value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function arraysEqual(one, two) {\n    if (!isArray(one) || !isArray(two)) {\n      return false;\n    }\n\n    // arrays can't be equal if they have different amount of content\n    if (one.length !== two.length) {\n      return false;\n    }\n\n    one.sort();\n    two.sort();\n\n    for (var i = 0, l = one.length; i < l; i++) {\n      if (one[i] !== two[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function trimSlashes(text) {\n    var trim_expression = /^\\/+|\\/+$/g;\n    return text.replace(trim_expression, '');\n  }\n\n  URI._parts = function() {\n    return {\n      protocol: null,\n      username: null,\n      password: null,\n      hostname: null,\n      urn: null,\n      port: null,\n      path: null,\n      query: null,\n      fragment: null,\n      // state\n      preventInvalidHostname: URI.preventInvalidHostname,\n      duplicateQueryParameters: URI.duplicateQueryParameters,\n      escapeQuerySpace: URI.escapeQuerySpace\n    };\n  };\n  // state: throw on invalid hostname\n  // see https://github.com/medialize/URI.js/pull/345\n  // and https://github.com/medialize/URI.js/issues/354\n  URI.preventInvalidHostname = false;\n  // state: allow duplicate query parameters (a=1&a=1)\n  URI.duplicateQueryParameters = false;\n  // state: replaces + with %20 (space in query strings)\n  URI.escapeQuerySpace = true;\n  // static properties\n  URI.protocol_expression = /^[a-z][a-z0-9.+-]*$/i;\n  URI.idn_expression = /[^a-z0-9\\._-]/i;\n  URI.punycode_expression = /(xn--)/i;\n  // well, 333.444.555.666 matches, but it sure ain't no IPv4 - do we care?\n  URI.ip4_expression = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\n  // credits to Rich Brown\n  // source: http://forums.intermapper.com/viewtopic.php?p=1096#1096\n  // specification: http://www.ietf.org/rfc/rfc4291.txt\n  URI.ip6_expression = /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n  // expression used is \"gruber revised\" (@gruber v2) determined to be the\n  // best solution in a regex-golf we did a couple of ages ago at\n  // * http://mathiasbynens.be/demo/url-regex\n  // * http://rodneyrehm.de/t/url-regex.html\n  URI.find_uri_expression = /\\b((?:[a-z][\\w-]+:(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?]))/ig;\n  URI.findUri = {\n    // valid \"scheme://\" or \"www.\"\n    start: /\\b(?:([a-z][a-z0-9.+-]*:\\/\\/)|www\\.)/gi,\n    // everything up to the next whitespace\n    end: /[\\s\\r\\n]|$/,\n    // trim trailing punctuation captured by end RegExp\n    trim: /[`!()\\[\\]{};:'\".,<>?]+$/,\n    // balanced parens inclusion (), [], {}, <>\n    parens: /(\\([^\\)]*\\)|\\[[^\\]]*\\]|\\{[^}]*\\}|<[^>]*>)/g,\n  };\n  // http://www.iana.org/assignments/uri-schemes.html\n  // http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers#Well-known_ports\n  URI.defaultPorts = {\n    http: '80',\n    https: '443',\n    ftp: '21',\n    gopher: '70',\n    ws: '80',\n    wss: '443'\n  };\n  // list of protocols which always require a hostname\n  URI.hostProtocols = [\n    'http',\n    'https'\n  ];\n\n  // allowed hostname characters according to RFC 3986\n  // ALPHA DIGIT \"-\" \".\" \"_\" \"~\" \"!\" \"$\" \"&\" \"'\" \"(\" \")\" \"*\" \"+\" \",\" \";\" \"=\" %encoded\n  // I've never seen a (non-IDN) hostname other than: ALPHA DIGIT . - _\n  URI.invalid_hostname_characters = /[^a-zA-Z0-9\\.\\-:_]/;\n  // map DOM Elements to their URI attribute\n  URI.domAttributes = {\n    'a': 'href',\n    'blockquote': 'cite',\n    'link': 'href',\n    'base': 'href',\n    'script': 'src',\n    'form': 'action',\n    'img': 'src',\n    'area': 'href',\n    'iframe': 'src',\n    'embed': 'src',\n    'source': 'src',\n    'track': 'src',\n    'input': 'src', // but only if type=\"image\"\n    'audio': 'src',\n    'video': 'src'\n  };\n  URI.getDomAttribute = function(node) {\n    if (!node || !node.nodeName) {\n      return undefined;\n    }\n\n    var nodeName = node.nodeName.toLowerCase();\n    // <input> should only expose src for type=\"image\"\n    if (nodeName === 'input' && node.type !== 'image') {\n      return undefined;\n    }\n\n    return URI.domAttributes[nodeName];\n  };\n\n  function escapeForDumbFirefox36(value) {\n    // https://github.com/medialize/URI.js/issues/91\n    return escape(value);\n  }\n\n  // encoding / decoding according to RFC3986\n  function strictEncodeURIComponent(string) {\n    // see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent\n    return encodeURIComponent(string)\n      .replace(/[!'()*]/g, escapeForDumbFirefox36)\n      .replace(/\\*/g, '%2A');\n  }\n  URI.encode = strictEncodeURIComponent;\n  URI.decode = decodeURIComponent;\n  URI.iso8859 = function() {\n    URI.encode = escape;\n    URI.decode = unescape;\n  };\n  URI.unicode = function() {\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = decodeURIComponent;\n  };\n  URI.characters = {\n    pathname: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,\n        map: {\n          // -._~!'()*\n          '%24': '$',\n          '%26': '&',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%3A': ':',\n          '%40': '@'\n        }\n      },\n      decode: {\n        expression: /[\\/\\?#]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23'\n        }\n      }\n    },\n    reserved: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,\n        map: {\n          // gen-delims\n          '%3A': ':',\n          '%2F': '/',\n          '%3F': '?',\n          '%23': '#',\n          '%5B': '[',\n          '%5D': ']',\n          '%40': '@',\n          // sub-delims\n          '%21': '!',\n          '%24': '$',\n          '%26': '&',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '='\n        }\n      }\n    },\n    urnpath: {\n      // The characters under `encode` are the characters called out by RFC 2141 as being acceptable\n      // for usage in a URN. RFC2141 also calls out \"-\", \".\", and \"_\" as acceptable characters, but\n      // these aren't encoded by encodeURIComponent, so we don't have to call them out here. Also\n      // note that the colon character is not featured in the encoding map; this is because URI.js\n      // gives the colons in URNs semantic meaning as the delimiters of path segements, and so it\n      // should not appear unencoded in a segment itself.\n      // See also the note above about RFC3986 and capitalalized hex digits.\n      encode: {\n        expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,\n        map: {\n          '%21': '!',\n          '%24': '$',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%40': '@'\n        }\n      },\n      // These characters are the characters called out by RFC2141 as \"reserved\" characters that\n      // should never appear in a URN, plus the colon character (see note above).\n      decode: {\n        expression: /[\\/\\?#:]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23',\n          ':': '%3A'\n        }\n      }\n    }\n  };\n  URI.encodeQuery = function(string, escapeQuerySpace) {\n    var escaped = URI.encode(string + '');\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    return escapeQuerySpace ? escaped.replace(/%20/g, '+') : escaped;\n  };\n  URI.decodeQuery = function(string, escapeQuerySpace) {\n    string += '';\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    try {\n      return URI.decode(escapeQuerySpace ? string.replace(/\\+/g, '%20') : string);\n    } catch(e) {\n      // we're not going to mess with weird encodings,\n      // give up and return the undecoded original string\n      // see https://github.com/medialize/URI.js/issues/87\n      // see https://github.com/medialize/URI.js/issues/92\n      return string;\n    }\n  };\n  // generate encode/decode path functions\n  var _parts = {'encode':'encode', 'decode':'decode'};\n  var _part;\n  var generateAccessor = function(_group, _part) {\n    return function(string) {\n      try {\n        return URI[_part](string + '').replace(URI.characters[_group][_part].expression, function(c) {\n          return URI.characters[_group][_part].map[c];\n        });\n      } catch (e) {\n        // we're not going to mess with weird encodings,\n        // give up and return the undecoded original string\n        // see https://github.com/medialize/URI.js/issues/87\n        // see https://github.com/medialize/URI.js/issues/92\n        return string;\n      }\n    };\n  };\n\n  for (_part in _parts) {\n    URI[_part + 'PathSegment'] = generateAccessor('pathname', _parts[_part]);\n    URI[_part + 'UrnPathSegment'] = generateAccessor('urnpath', _parts[_part]);\n  }\n\n  var generateSegmentedPathFunction = function(_sep, _codingFuncName, _innerCodingFuncName) {\n    return function(string) {\n      // Why pass in names of functions, rather than the function objects themselves? The\n      // definitions of some functions (but in particular, URI.decode) will occasionally change due\n      // to URI.js having ISO8859 and Unicode modes. Passing in the name and getting it will ensure\n      // that the functions we use here are \"fresh\".\n      var actualCodingFunc;\n      if (!_innerCodingFuncName) {\n        actualCodingFunc = URI[_codingFuncName];\n      } else {\n        actualCodingFunc = function(string) {\n          return URI[_codingFuncName](URI[_innerCodingFuncName](string));\n        };\n      }\n\n      var segments = (string + '').split(_sep);\n\n      for (var i = 0, length = segments.length; i < length; i++) {\n        segments[i] = actualCodingFunc(segments[i]);\n      }\n\n      return segments.join(_sep);\n    };\n  };\n\n  // This takes place outside the above loop because we don't want, e.g., encodeUrnPath functions.\n  URI.decodePath = generateSegmentedPathFunction('/', 'decodePathSegment');\n  URI.decodeUrnPath = generateSegmentedPathFunction(':', 'decodeUrnPathSegment');\n  URI.recodePath = generateSegmentedPathFunction('/', 'encodePathSegment', 'decode');\n  URI.recodeUrnPath = generateSegmentedPathFunction(':', 'encodeUrnPathSegment', 'decode');\n\n  URI.encodeReserved = generateAccessor('reserved', 'encode');\n\n  URI.parse = function(string, parts) {\n    var pos;\n    if (!parts) {\n      parts = {\n        preventInvalidHostname: URI.preventInvalidHostname\n      };\n    }\n    // [protocol\"://\"[username[\":\"password]\"@\"]hostname[\":\"port]\"/\"?][path][\"?\"querystring][\"#\"fragment]\n\n    // extract fragment\n    pos = string.indexOf('#');\n    if (pos > -1) {\n      // escaping?\n      parts.fragment = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract query\n    pos = string.indexOf('?');\n    if (pos > -1) {\n      // escaping?\n      parts.query = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract protocol\n    if (string.substring(0, 2) === '//') {\n      // relative-scheme\n      parts.protocol = null;\n      string = string.substring(2);\n      // extract \"user:pass@host:port\"\n      string = URI.parseAuthority(string, parts);\n    } else {\n      pos = string.indexOf(':');\n      if (pos > -1) {\n        parts.protocol = string.substring(0, pos) || null;\n        if (parts.protocol && !parts.protocol.match(URI.protocol_expression)) {\n          // : may be within the path\n          parts.protocol = undefined;\n        } else if (string.substring(pos + 1, pos + 3) === '//') {\n          string = string.substring(pos + 3);\n\n          // extract \"user:pass@host:port\"\n          string = URI.parseAuthority(string, parts);\n        } else {\n          string = string.substring(pos + 1);\n          parts.urn = true;\n        }\n      }\n    }\n\n    // what's left must be the path\n    parts.path = string;\n\n    // and we're done\n    return parts;\n  };\n  URI.parseHost = function(string, parts) {\n    if (!string) {\n      string = '';\n    }\n\n    // Copy chrome, IE, opera backslash-handling behavior.\n    // Back slashes before the query string get converted to forward slashes\n    // See: https://github.com/joyent/node/blob/386fd24f49b0e9d1a8a076592a404168faeecc34/lib/url.js#L115-L124\n    // See: https://code.google.com/p/chromium/issues/detail?id=25916\n    // https://github.com/medialize/URI.js/pull/233\n    string = string.replace(/\\\\/g, '/');\n\n    // extract host:port\n    var pos = string.indexOf('/');\n    var bracketPos;\n    var t;\n\n    if (pos === -1) {\n      pos = string.length;\n    }\n\n    if (string.charAt(0) === '[') {\n      // IPv6 host - http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04#section-6\n      // I claim most client software breaks on IPv6 anyways. To simplify things, URI only accepts\n      // IPv6+port in the format [2001:db8::1]:80 (for the time being)\n      bracketPos = string.indexOf(']');\n      parts.hostname = string.substring(1, bracketPos) || null;\n      parts.port = string.substring(bracketPos + 2, pos) || null;\n      if (parts.port === '/') {\n        parts.port = null;\n      }\n    } else {\n      var firstColon = string.indexOf(':');\n      var firstSlash = string.indexOf('/');\n      var nextColon = string.indexOf(':', firstColon + 1);\n      if (nextColon !== -1 && (firstSlash === -1 || nextColon < firstSlash)) {\n        // IPv6 host contains multiple colons - but no port\n        // this notation is actually not allowed by RFC 3986, but we're a liberal parser\n        parts.hostname = string.substring(0, pos) || null;\n        parts.port = null;\n      } else {\n        t = string.substring(0, pos).split(':');\n        parts.hostname = t[0] || null;\n        parts.port = t[1] || null;\n      }\n    }\n\n    if (parts.hostname && string.substring(pos).charAt(0) !== '/') {\n      pos++;\n      string = '/' + string;\n    }\n\n    if (parts.preventInvalidHostname) {\n      URI.ensureValidHostname(parts.hostname, parts.protocol);\n    }\n\n    if (parts.port) {\n      URI.ensureValidPort(parts.port);\n    }\n\n    return string.substring(pos) || '/';\n  };\n  URI.parseAuthority = function(string, parts) {\n    string = URI.parseUserinfo(string, parts);\n    return URI.parseHost(string, parts);\n  };\n  URI.parseUserinfo = function(string, parts) {\n    // extract username:password\n    var firstSlash = string.indexOf('/');\n    var pos = string.lastIndexOf('@', firstSlash > -1 ? firstSlash : string.length - 1);\n    var t;\n\n    // authority@ must come before /path\n    if (pos > -1 && (firstSlash === -1 || pos < firstSlash)) {\n      t = string.substring(0, pos).split(':');\n      parts.username = t[0] ? URI.decode(t[0]) : null;\n      t.shift();\n      parts.password = t[0] ? URI.decode(t.join(':')) : null;\n      string = string.substring(pos + 1);\n    } else {\n      parts.username = null;\n      parts.password = null;\n    }\n\n    return string;\n  };\n  URI.parseQuery = function(string, escapeQuerySpace) {\n    if (!string) {\n      return {};\n    }\n\n    // throw out the funky business - \"?\"[name\"=\"value\"&\"]+\n    string = string.replace(/&+/g, '&').replace(/^\\?*&*|&+$/g, '');\n\n    if (!string) {\n      return {};\n    }\n\n    var items = {};\n    var splits = string.split('&');\n    var length = splits.length;\n    var v, name, value;\n\n    for (var i = 0; i < length; i++) {\n      v = splits[i].split('=');\n      name = URI.decodeQuery(v.shift(), escapeQuerySpace);\n      // no \"=\" is null according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#collect-url-parameters\n      value = v.length ? URI.decodeQuery(v.join('='), escapeQuerySpace) : null;\n\n      if (hasOwn.call(items, name)) {\n        if (typeof items[name] === 'string' || items[name] === null) {\n          items[name] = [items[name]];\n        }\n\n        items[name].push(value);\n      } else {\n        items[name] = value;\n      }\n    }\n\n    return items;\n  };\n\n  URI.build = function(parts) {\n    var t = '';\n\n    if (parts.protocol) {\n      t += parts.protocol + ':';\n    }\n\n    if (!parts.urn && (t || parts.hostname)) {\n      t += '//';\n    }\n\n    t += (URI.buildAuthority(parts) || '');\n\n    if (typeof parts.path === 'string') {\n      if (parts.path.charAt(0) !== '/' && typeof parts.hostname === 'string') {\n        t += '/';\n      }\n\n      t += parts.path;\n    }\n\n    if (typeof parts.query === 'string' && parts.query) {\n      t += '?' + parts.query;\n    }\n\n    if (typeof parts.fragment === 'string' && parts.fragment) {\n      t += '#' + parts.fragment;\n    }\n    return t;\n  };\n  URI.buildHost = function(parts) {\n    var t = '';\n\n    if (!parts.hostname) {\n      return '';\n    } else if (URI.ip6_expression.test(parts.hostname)) {\n      t += '[' + parts.hostname + ']';\n    } else {\n      t += parts.hostname;\n    }\n\n    if (parts.port) {\n      t += ':' + parts.port;\n    }\n\n    return t;\n  };\n  URI.buildAuthority = function(parts) {\n    return URI.buildUserinfo(parts) + URI.buildHost(parts);\n  };\n  URI.buildUserinfo = function(parts) {\n    var t = '';\n\n    if (parts.username) {\n      t += URI.encode(parts.username);\n    }\n\n    if (parts.password) {\n      t += ':' + URI.encode(parts.password);\n    }\n\n    if (t) {\n      t += '@';\n    }\n\n    return t;\n  };\n  URI.buildQuery = function(data, duplicateQueryParameters, escapeQuerySpace) {\n    // according to http://tools.ietf.org/html/rfc3986 or http://labs.apache.org/webarch/uri/rfc/rfc3986.html\n    // being -._~!$&'()*+,;=:@/? %HEX and alnum are allowed\n    // the RFC explicitly states ?/foo being a valid use case, no mention of parameter syntax!\n    // URI.js treats the query string as being application/x-www-form-urlencoded\n    // see http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type\n\n    var t = '';\n    var unique, key, i, length;\n    for (key in data) {\n      if (hasOwn.call(data, key) && key) {\n        if (isArray(data[key])) {\n          unique = {};\n          for (i = 0, length = data[key].length; i < length; i++) {\n            if (data[key][i] !== undefined && unique[data[key][i] + ''] === undefined) {\n              t += '&' + URI.buildQueryParameter(key, data[key][i], escapeQuerySpace);\n              if (duplicateQueryParameters !== true) {\n                unique[data[key][i] + ''] = true;\n              }\n            }\n          }\n        } else if (data[key] !== undefined) {\n          t += '&' + URI.buildQueryParameter(key, data[key], escapeQuerySpace);\n        }\n      }\n    }\n\n    return t.substring(1);\n  };\n  URI.buildQueryParameter = function(name, value, escapeQuerySpace) {\n    // http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type -- application/x-www-form-urlencoded\n    // don't append \"=\" for null values, according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#url-parameter-serialization\n    return URI.encodeQuery(name, escapeQuerySpace) + (value !== null ? '=' + URI.encodeQuery(value, escapeQuerySpace) : '');\n  };\n\n  URI.addQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.addQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (data[name] === undefined) {\n        data[name] = value;\n        return;\n      } else if (typeof data[name] === 'string') {\n        data[name] = [data[name]];\n      }\n\n      if (!isArray(value)) {\n        value = [value];\n      }\n\n      data[name] = (data[name] || []).concat(value);\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.setQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.setQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      data[name] = value === undefined ? null : value;\n    } else {\n      throw new TypeError('URI.setQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.removeQuery = function(data, name, value) {\n    var i, length, key;\n\n    if (isArray(name)) {\n      for (i = 0, length = name.length; i < length; i++) {\n        data[name[i]] = undefined;\n      }\n    } else if (getType(name) === 'RegExp') {\n      for (key in data) {\n        if (name.test(key)) {\n          data[key] = undefined;\n        }\n      }\n    } else if (typeof name === 'object') {\n      for (key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.removeQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (value !== undefined) {\n        if (getType(value) === 'RegExp') {\n          if (!isArray(data[name]) && value.test(data[name])) {\n            data[name] = undefined;\n          } else {\n            data[name] = filterArrayValues(data[name], value);\n          }\n        } else if (data[name] === String(value) && (!isArray(value) || value.length === 1)) {\n          data[name] = undefined;\n        } else if (isArray(data[name])) {\n          data[name] = filterArrayValues(data[name], value);\n        }\n      } else {\n        data[name] = undefined;\n      }\n    } else {\n      throw new TypeError('URI.removeQuery() accepts an object, string, RegExp as the first parameter');\n    }\n  };\n  URI.hasQuery = function(data, name, value, withinArray) {\n    switch (getType(name)) {\n      case 'String':\n        // Nothing to do here\n        break;\n\n      case 'RegExp':\n        for (var key in data) {\n          if (hasOwn.call(data, key)) {\n            if (name.test(key) && (value === undefined || URI.hasQuery(data, key, value))) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n\n      case 'Object':\n        for (var _key in name) {\n          if (hasOwn.call(name, _key)) {\n            if (!URI.hasQuery(data, _key, name[_key])) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts a string, regular expression or object as the name parameter');\n    }\n\n    switch (getType(value)) {\n      case 'Undefined':\n        // true if exists (but may be empty)\n        return name in data; // data[name] !== undefined;\n\n      case 'Boolean':\n        // true if exists and non-empty\n        var _booly = Boolean(isArray(data[name]) ? data[name].length : data[name]);\n        return value === _booly;\n\n      case 'Function':\n        // allow complex comparison\n        return !!value(data[name], name, data);\n\n      case 'Array':\n        if (!isArray(data[name])) {\n          return false;\n        }\n\n        var op = withinArray ? arrayContains : arraysEqual;\n        return op(data[name], value);\n\n      case 'RegExp':\n        if (!isArray(data[name])) {\n          return Boolean(data[name] && data[name].match(value));\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      case 'Number':\n        value = String(value);\n        /* falls through */\n      case 'String':\n        if (!isArray(data[name])) {\n          return data[name] === value;\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter');\n    }\n  };\n\n\n  URI.joinPaths = function() {\n    var input = [];\n    var segments = [];\n    var nonEmptySegments = 0;\n\n    for (var i = 0; i < arguments.length; i++) {\n      var url = new URI(arguments[i]);\n      input.push(url);\n      var _segments = url.segment();\n      for (var s = 0; s < _segments.length; s++) {\n        if (typeof _segments[s] === 'string') {\n          segments.push(_segments[s]);\n        }\n\n        if (_segments[s]) {\n          nonEmptySegments++;\n        }\n      }\n    }\n\n    if (!segments.length || !nonEmptySegments) {\n      return new URI('');\n    }\n\n    var uri = new URI('').segment(segments);\n\n    if (input[0].path() === '' || input[0].path().slice(0, 1) === '/') {\n      uri.path('/' + uri.path());\n    }\n\n    return uri.normalize();\n  };\n\n  URI.commonPath = function(one, two) {\n    var length = Math.min(one.length, two.length);\n    var pos;\n\n    // find first non-matching character\n    for (pos = 0; pos < length; pos++) {\n      if (one.charAt(pos) !== two.charAt(pos)) {\n        pos--;\n        break;\n      }\n    }\n\n    if (pos < 1) {\n      return one.charAt(0) === two.charAt(0) && one.charAt(0) === '/' ? '/' : '';\n    }\n\n    // revert to last /\n    if (one.charAt(pos) !== '/' || two.charAt(pos) !== '/') {\n      pos = one.substring(0, pos).lastIndexOf('/');\n    }\n\n    return one.substring(0, pos + 1);\n  };\n\n  URI.withinString = function(string, callback, options) {\n    options || (options = {});\n    var _start = options.start || URI.findUri.start;\n    var _end = options.end || URI.findUri.end;\n    var _trim = options.trim || URI.findUri.trim;\n    var _parens = options.parens || URI.findUri.parens;\n    var _attributeOpen = /[a-z0-9-]=[\"']?$/i;\n\n    _start.lastIndex = 0;\n    while (true) {\n      var match = _start.exec(string);\n      if (!match) {\n        break;\n      }\n\n      var start = match.index;\n      if (options.ignoreHtml) {\n        // attribut(e=[\"']?$)\n        var attributeOpen = string.slice(Math.max(start - 3, 0), start);\n        if (attributeOpen && _attributeOpen.test(attributeOpen)) {\n          continue;\n        }\n      }\n\n      var end = start + string.slice(start).search(_end);\n      var slice = string.slice(start, end);\n      // make sure we include well balanced parens\n      var parensEnd = -1;\n      while (true) {\n        var parensMatch = _parens.exec(slice);\n        if (!parensMatch) {\n          break;\n        }\n\n        var parensMatchEnd = parensMatch.index + parensMatch[0].length;\n        parensEnd = Math.max(parensEnd, parensMatchEnd);\n      }\n\n      if (parensEnd > -1) {\n        slice = slice.slice(0, parensEnd) + slice.slice(parensEnd).replace(_trim, '');\n      } else {\n        slice = slice.replace(_trim, '');\n      }\n\n      if (slice.length <= match[0].length) {\n        // the extract only contains the starting marker of a URI,\n        // e.g. \"www\" or \"http://\"\n        continue;\n      }\n\n      if (options.ignore && options.ignore.test(slice)) {\n        continue;\n      }\n\n      end = start + slice.length;\n      var result = callback(slice, start, end, string);\n      if (result === undefined) {\n        _start.lastIndex = end;\n        continue;\n      }\n\n      result = String(result);\n      string = string.slice(0, start) + result + string.slice(end);\n      _start.lastIndex = start + result.length;\n    }\n\n    _start.lastIndex = 0;\n    return string;\n  };\n\n  URI.ensureValidHostname = function(v, protocol) {\n    // Theoretically URIs allow percent-encoding in Hostnames (according to RFC 3986)\n    // they are not part of DNS and therefore ignored by URI.js\n\n    var hasHostname = !!v; // not null and not an empty string\n    var hasProtocol = !!protocol;\n    var rejectEmptyHostname = false;\n\n    if (hasProtocol) {\n      rejectEmptyHostname = arrayContains(URI.hostProtocols, protocol);\n    }\n\n    if (rejectEmptyHostname && !hasHostname) {\n      throw new TypeError('Hostname cannot be empty, if protocol is ' + protocol);\n    } else if (v && v.match(URI.invalid_hostname_characters)) {\n      // test punycode\n      if (!punycode) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');\n      }\n      if (punycode.toASCII(v).match(URI.invalid_hostname_characters)) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_]');\n      }\n    }\n  };\n\n  URI.ensureValidPort = function (v) {\n    if (!v) {\n      return;\n    }\n\n    var port = Number(v);\n    if (isInteger(port) && (port > 0) && (port < 65536)) {\n      return;\n    }\n\n    throw new TypeError('Port \"' + v + '\" is not a valid port');\n  };\n\n  // noConflict\n  URI.noConflict = function(removeAll) {\n    if (removeAll) {\n      var unconflicted = {\n        URI: this.noConflict()\n      };\n\n      if (root.URITemplate && typeof root.URITemplate.noConflict === 'function') {\n        unconflicted.URITemplate = root.URITemplate.noConflict();\n      }\n\n      if (root.IPv6 && typeof root.IPv6.noConflict === 'function') {\n        unconflicted.IPv6 = root.IPv6.noConflict();\n      }\n\n      if (root.SecondLevelDomains && typeof root.SecondLevelDomains.noConflict === 'function') {\n        unconflicted.SecondLevelDomains = root.SecondLevelDomains.noConflict();\n      }\n\n      return unconflicted;\n    } else if (root.URI === this) {\n      root.URI = _URI;\n    }\n\n    return this;\n  };\n\n  p.build = function(deferBuild) {\n    if (deferBuild === true) {\n      this._deferred_build = true;\n    } else if (deferBuild === undefined || this._deferred_build) {\n      this._string = URI.build(this._parts);\n      this._deferred_build = false;\n    }\n\n    return this;\n  };\n\n  p.clone = function() {\n    return new URI(this);\n  };\n\n  p.valueOf = p.toString = function() {\n    return this.build(false)._string;\n  };\n\n\n  function generateSimpleAccessor(_part){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        this._parts[_part] = v || null;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  function generatePrefixAccessor(_part, _key){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        if (v !== null) {\n          v = v + '';\n          if (v.charAt(0) === _key) {\n            v = v.substring(1);\n          }\n        }\n\n        this._parts[_part] = v;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  p.protocol = generateSimpleAccessor('protocol');\n  p.username = generateSimpleAccessor('username');\n  p.password = generateSimpleAccessor('password');\n  p.hostname = generateSimpleAccessor('hostname');\n  p.port = generateSimpleAccessor('port');\n  p.query = generatePrefixAccessor('query', '?');\n  p.fragment = generatePrefixAccessor('fragment', '#');\n\n  p.search = function(v, build) {\n    var t = this.query(v, build);\n    return typeof t === 'string' && t.length ? ('?' + t) : t;\n  };\n  p.hash = function(v, build) {\n    var t = this.fragment(v, build);\n    return typeof t === 'string' && t.length ? ('#' + t) : t;\n  };\n\n  p.pathname = function(v, build) {\n    if (v === undefined || v === true) {\n      var res = this._parts.path || (this._parts.hostname ? '/' : '');\n      return v ? (this._parts.urn ? URI.decodeUrnPath : URI.decodePath)(res) : res;\n    } else {\n      if (this._parts.urn) {\n        this._parts.path = v ? URI.recodeUrnPath(v) : '';\n      } else {\n        this._parts.path = v ? URI.recodePath(v) : '/';\n      }\n      this.build(!build);\n      return this;\n    }\n  };\n  p.path = p.pathname;\n  p.href = function(href, build) {\n    var key;\n\n    if (href === undefined) {\n      return this.toString();\n    }\n\n    this._string = '';\n    this._parts = URI._parts();\n\n    var _URI = href instanceof URI;\n    var _object = typeof href === 'object' && (href.hostname || href.path || href.pathname);\n    if (href.nodeName) {\n      var attribute = URI.getDomAttribute(href);\n      href = href[attribute] || '';\n      _object = false;\n    }\n\n    // window.location is reported to be an object, but it's not the sort\n    // of object we're looking for:\n    // * location.protocol ends with a colon\n    // * location.query != object.search\n    // * location.hash != object.fragment\n    // simply serializing the unknown object should do the trick\n    // (for location, not for everything...)\n    if (!_URI && _object && href.pathname !== undefined) {\n      href = href.toString();\n    }\n\n    if (typeof href === 'string' || href instanceof String) {\n      this._parts = URI.parse(String(href), this._parts);\n    } else if (_URI || _object) {\n      var src = _URI ? href._parts : href;\n      for (key in src) {\n        if (hasOwn.call(this._parts, key)) {\n          this._parts[key] = src[key];\n        }\n      }\n    } else {\n      throw new TypeError('invalid input');\n    }\n\n    this.build(!build);\n    return this;\n  };\n\n  // identification accessors\n  p.is = function(what) {\n    var ip = false;\n    var ip4 = false;\n    var ip6 = false;\n    var name = false;\n    var sld = false;\n    var idn = false;\n    var punycode = false;\n    var relative = !this._parts.urn;\n\n    if (this._parts.hostname) {\n      relative = false;\n      ip4 = URI.ip4_expression.test(this._parts.hostname);\n      ip6 = URI.ip6_expression.test(this._parts.hostname);\n      ip = ip4 || ip6;\n      name = !ip;\n      sld = name && SLD && SLD.has(this._parts.hostname);\n      idn = name && URI.idn_expression.test(this._parts.hostname);\n      punycode = name && URI.punycode_expression.test(this._parts.hostname);\n    }\n\n    switch (what.toLowerCase()) {\n      case 'relative':\n        return relative;\n\n      case 'absolute':\n        return !relative;\n\n      // hostname identification\n      case 'domain':\n      case 'name':\n        return name;\n\n      case 'sld':\n        return sld;\n\n      case 'ip':\n        return ip;\n\n      case 'ip4':\n      case 'ipv4':\n      case 'inet4':\n        return ip4;\n\n      case 'ip6':\n      case 'ipv6':\n      case 'inet6':\n        return ip6;\n\n      case 'idn':\n        return idn;\n\n      case 'url':\n        return !this._parts.urn;\n\n      case 'urn':\n        return !!this._parts.urn;\n\n      case 'punycode':\n        return punycode;\n    }\n\n    return null;\n  };\n\n  // component specific input validation\n  var _protocol = p.protocol;\n  var _port = p.port;\n  var _hostname = p.hostname;\n\n  p.protocol = function(v, build) {\n    if (v) {\n      // accept trailing ://\n      v = v.replace(/:(\\/\\/)?$/, '');\n\n      if (!v.match(URI.protocol_expression)) {\n        throw new TypeError('Protocol \"' + v + '\" contains characters other than [A-Z0-9.+-] or doesn\\'t start with [A-Z]');\n      }\n    }\n\n    return _protocol.call(this, v, build);\n  };\n  p.scheme = p.protocol;\n  p.port = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      if (v === 0) {\n        v = null;\n      }\n\n      if (v) {\n        v += '';\n        if (v.charAt(0) === ':') {\n          v = v.substring(1);\n        }\n\n        URI.ensureValidPort(v);\n      }\n    }\n    return _port.call(this, v, build);\n  };\n  p.hostname = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      var x = { preventInvalidHostname: this._parts.preventInvalidHostname };\n      var res = URI.parseHost(v, x);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      v = x.hostname;\n      if (this._parts.preventInvalidHostname) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n    }\n\n    return _hostname.call(this, v, build);\n  };\n\n  // compound accessors\n  p.origin = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var protocol = this.protocol();\n      var authority = this.authority();\n      if (!authority) {\n        return '';\n      }\n\n      return (protocol ? protocol + '://' : '') + this.authority();\n    } else {\n      var origin = URI(v);\n      this\n        .protocol(origin.protocol())\n        .authority(origin.authority())\n        .build(!build);\n      return this;\n    }\n  };\n  p.host = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildHost(this._parts) : '';\n    } else {\n      var res = URI.parseHost(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.authority = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildAuthority(this._parts) : '';\n    } else {\n      var res = URI.parseAuthority(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.userinfo = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var t = URI.buildUserinfo(this._parts);\n      return t ? t.substring(0, t.length -1) : t;\n    } else {\n      if (v[v.length-1] !== '@') {\n        v += '@';\n      }\n\n      URI.parseUserinfo(v, this._parts);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.resource = function(v, build) {\n    var parts;\n\n    if (v === undefined) {\n      return this.path() + this.search() + this.hash();\n    }\n\n    parts = URI.parse(v);\n    this._parts.path = parts.path;\n    this._parts.query = parts.query;\n    this._parts.fragment = parts.fragment;\n    this.build(!build);\n    return this;\n  };\n\n  // fraction accessors\n  p.subdomain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    // convenience, return \"www\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // grab domain and add another segment\n      var end = this._parts.hostname.length - this.domain().length - 1;\n      return this._parts.hostname.substring(0, end) || '';\n    } else {\n      var e = this._parts.hostname.length - this.domain().length;\n      var sub = this._parts.hostname.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(sub));\n\n      if (v && v.charAt(v.length - 1) !== '.') {\n        v += '.';\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      if (v) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n\n      this._parts.hostname = this._parts.hostname.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.domain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // convenience, return \"example.org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // if hostname consists of 1 or 2 segments, it must be the domain\n      var t = this._parts.hostname.match(/\\./g);\n      if (t && t.length < 2) {\n        return this._parts.hostname;\n      }\n\n      // grab tld and add another segment\n      var end = this._parts.hostname.length - this.tld(build).length - 1;\n      end = this._parts.hostname.lastIndexOf('.', end -1) + 1;\n      return this._parts.hostname.substring(end) || '';\n    } else {\n      if (!v) {\n        throw new TypeError('cannot set domain empty');\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      URI.ensureValidHostname(v, this._parts.protocol);\n\n      if (!this._parts.hostname || this.is('IP')) {\n        this._parts.hostname = v;\n      } else {\n        var replace = new RegExp(escapeRegEx(this.domain()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.tld = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // return \"org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      var pos = this._parts.hostname.lastIndexOf('.');\n      var tld = this._parts.hostname.substring(pos + 1);\n\n      if (build !== true && SLD && SLD.list[tld.toLowerCase()]) {\n        return SLD.get(this._parts.hostname) || tld;\n      }\n\n      return tld;\n    } else {\n      var replace;\n\n      if (!v) {\n        throw new TypeError('cannot set TLD empty');\n      } else if (v.match(/[^a-zA-Z0-9-]/)) {\n        if (SLD && SLD.is(v)) {\n          replace = new RegExp(escapeRegEx(this.tld()) + '$');\n          this._parts.hostname = this._parts.hostname.replace(replace, v);\n        } else {\n          throw new TypeError('TLD \"' + v + '\" contains characters other than [A-Z0-9]');\n        }\n      } else if (!this._parts.hostname || this.is('IP')) {\n        throw new ReferenceError('cannot set TLD on non-domain host');\n      } else {\n        replace = new RegExp(escapeRegEx(this.tld()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.directory = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path && !this._parts.hostname) {\n        return '';\n      }\n\n      if (this._parts.path === '/') {\n        return '/';\n      }\n\n      var end = this._parts.path.length - this.filename().length - 1;\n      var res = this._parts.path.substring(0, end) || (this._parts.hostname ? '/' : '');\n\n      return v ? URI.decodePath(res) : res;\n\n    } else {\n      var e = this._parts.path.length - this.filename().length;\n      var directory = this._parts.path.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(directory));\n\n      // fully qualifier directories begin with a slash\n      if (!this.is('relative')) {\n        if (!v) {\n          v = '/';\n        }\n\n        if (v.charAt(0) !== '/') {\n          v = '/' + v;\n        }\n      }\n\n      // directories always end with a slash\n      if (v && v.charAt(v.length - 1) !== '/') {\n        v += '/';\n      }\n\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.filename = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v !== 'string') {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var pos = this._parts.path.lastIndexOf('/');\n      var res = this._parts.path.substring(pos+1);\n\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      var mutatedDirectory = false;\n\n      if (v.charAt(0) === '/') {\n        v = v.substring(1);\n      }\n\n      if (v.match(/\\.?\\//)) {\n        mutatedDirectory = true;\n      }\n\n      var replace = new RegExp(escapeRegEx(this.filename()) + '$');\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n\n      if (mutatedDirectory) {\n        this.normalizePath(build);\n      } else {\n        this.build(!build);\n      }\n\n      return this;\n    }\n  };\n  p.suffix = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var filename = this.filename();\n      var pos = filename.lastIndexOf('.');\n      var s, res;\n\n      if (pos === -1) {\n        return '';\n      }\n\n      // suffix may only contain alnum characters (yup, I made this up.)\n      s = filename.substring(pos+1);\n      res = (/^[a-z0-9%]+$/i).test(s) ? s : '';\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      if (v.charAt(0) === '.') {\n        v = v.substring(1);\n      }\n\n      var suffix = this.suffix();\n      var replace;\n\n      if (!suffix) {\n        if (!v) {\n          return this;\n        }\n\n        this._parts.path += '.' + URI.recodePath(v);\n      } else if (!v) {\n        replace = new RegExp(escapeRegEx('.' + suffix) + '$');\n      } else {\n        replace = new RegExp(escapeRegEx(suffix) + '$');\n      }\n\n      if (replace) {\n        v = URI.recodePath(v);\n        this._parts.path = this._parts.path.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.segment = function(segment, v, build) {\n    var separator = this._parts.urn ? ':' : '/';\n    var path = this.path();\n    var absolute = path.substring(0, 1) === '/';\n    var segments = path.split(separator);\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      throw new Error('Bad segment \"' + segment + '\", must be 0-based integer');\n    }\n\n    if (absolute) {\n      segments.shift();\n    }\n\n    if (segment < 0) {\n      // allow negative indexes to address from the end\n      segment = Math.max(segments.length + segment, 0);\n    }\n\n    if (v === undefined) {\n      /*jshint laxbreak: true */\n      return segment === undefined\n        ? segments\n        : segments[segment];\n      /*jshint laxbreak: false */\n    } else if (segment === null || segments[segment] === undefined) {\n      if (isArray(v)) {\n        segments = [];\n        // collapse empty elements within array\n        for (var i=0, l=v.length; i < l; i++) {\n          if (!v[i].length && (!segments.length || !segments[segments.length -1].length)) {\n            continue;\n          }\n\n          if (segments.length && !segments[segments.length -1].length) {\n            segments.pop();\n          }\n\n          segments.push(trimSlashes(v[i]));\n        }\n      } else if (v || typeof v === 'string') {\n        v = trimSlashes(v);\n        if (segments[segments.length -1] === '') {\n          // empty trailing elements have to be overwritten\n          // to prevent results such as /foo//bar\n          segments[segments.length -1] = v;\n        } else {\n          segments.push(v);\n        }\n      }\n    } else {\n      if (v) {\n        segments[segment] = trimSlashes(v);\n      } else {\n        segments.splice(segment, 1);\n      }\n    }\n\n    if (absolute) {\n      segments.unshift('');\n    }\n\n    return this.path(segments.join(separator), build);\n  };\n  p.segmentCoded = function(segment, v, build) {\n    var segments, i, l;\n\n    if (typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (v === undefined) {\n      segments = this.segment(segment, v, build);\n      if (!isArray(segments)) {\n        segments = segments !== undefined ? URI.decode(segments) : undefined;\n      } else {\n        for (i = 0, l = segments.length; i < l; i++) {\n          segments[i] = URI.decode(segments[i]);\n        }\n      }\n\n      return segments;\n    }\n\n    if (!isArray(v)) {\n      v = (typeof v === 'string' || v instanceof String) ? URI.encode(v) : v;\n    } else {\n      for (i = 0, l = v.length; i < l; i++) {\n        v[i] = URI.encode(v[i]);\n      }\n    }\n\n    return this.segment(segment, v, build);\n  };\n\n  // mutating query string\n  var q = p.query;\n  p.query = function(v, build) {\n    if (v === true) {\n      return URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    } else if (typeof v === 'function') {\n      var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n      var result = v.call(this, data);\n      this._parts.query = URI.buildQuery(result || data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else if (v !== undefined && typeof v !== 'string') {\n      this._parts.query = URI.buildQuery(v, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else {\n      return q.call(this, v, build);\n    }\n  };\n  p.setQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n\n    if (typeof name === 'string' || name instanceof String) {\n      data[name] = value !== undefined ? value : null;\n    } else if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          data[key] = name[key];\n        }\n      }\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.addQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.addQuery(data, name, value === undefined ? null : value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.removeQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.removeQuery(data, name, value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.hasQuery = function(name, value, withinArray) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    return URI.hasQuery(data, name, value, withinArray);\n  };\n  p.setSearch = p.setQuery;\n  p.addSearch = p.addQuery;\n  p.removeSearch = p.removeQuery;\n  p.hasSearch = p.hasQuery;\n\n  // sanitizing URLs\n  p.normalize = function() {\n    if (this._parts.urn) {\n      return this\n        .normalizeProtocol(false)\n        .normalizePath(false)\n        .normalizeQuery(false)\n        .normalizeFragment(false)\n        .build();\n    }\n\n    return this\n      .normalizeProtocol(false)\n      .normalizeHostname(false)\n      .normalizePort(false)\n      .normalizePath(false)\n      .normalizeQuery(false)\n      .normalizeFragment(false)\n      .build();\n  };\n  p.normalizeProtocol = function(build) {\n    if (typeof this._parts.protocol === 'string') {\n      this._parts.protocol = this._parts.protocol.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeHostname = function(build) {\n    if (this._parts.hostname) {\n      if (this.is('IDN') && punycode) {\n        this._parts.hostname = punycode.toASCII(this._parts.hostname);\n      } else if (this.is('IPv6') && IPv6) {\n        this._parts.hostname = IPv6.best(this._parts.hostname);\n      }\n\n      this._parts.hostname = this._parts.hostname.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePort = function(build) {\n    // remove port of it's the protocol's default\n    if (typeof this._parts.protocol === 'string' && this._parts.port === URI.defaultPorts[this._parts.protocol]) {\n      this._parts.port = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePath = function(build) {\n    var _path = this._parts.path;\n    if (!_path) {\n      return this;\n    }\n\n    if (this._parts.urn) {\n      this._parts.path = URI.recodeUrnPath(this._parts.path);\n      this.build(!build);\n      return this;\n    }\n\n    if (this._parts.path === '/') {\n      return this;\n    }\n\n    _path = URI.recodePath(_path);\n\n    var _was_relative;\n    var _leadingParents = '';\n    var _parent, _pos;\n\n    // handle relative paths\n    if (_path.charAt(0) !== '/') {\n      _was_relative = true;\n      _path = '/' + _path;\n    }\n\n    // handle relative files (as opposed to directories)\n    if (_path.slice(-3) === '/..' || _path.slice(-2) === '/.') {\n      _path += '/';\n    }\n\n    // resolve simples\n    _path = _path\n      .replace(/(\\/(\\.\\/)+)|(\\/\\.$)/g, '/')\n      .replace(/\\/{2,}/g, '/');\n\n    // remember leading parents\n    if (_was_relative) {\n      _leadingParents = _path.substring(1).match(/^(\\.\\.\\/)+/) || '';\n      if (_leadingParents) {\n        _leadingParents = _leadingParents[0];\n      }\n    }\n\n    // resolve parents\n    while (true) {\n      _parent = _path.search(/\\/\\.\\.(\\/|$)/);\n      if (_parent === -1) {\n        // no more ../ to resolve\n        break;\n      } else if (_parent === 0) {\n        // top level cannot be relative, skip it\n        _path = _path.substring(3);\n        continue;\n      }\n\n      _pos = _path.substring(0, _parent).lastIndexOf('/');\n      if (_pos === -1) {\n        _pos = _parent;\n      }\n      _path = _path.substring(0, _pos) + _path.substring(_parent + 3);\n    }\n\n    // revert to relative\n    if (_was_relative && this.is('relative')) {\n      _path = _leadingParents + _path.substring(1);\n    }\n\n    this._parts.path = _path;\n    this.build(!build);\n    return this;\n  };\n  p.normalizePathname = p.normalizePath;\n  p.normalizeQuery = function(build) {\n    if (typeof this._parts.query === 'string') {\n      if (!this._parts.query.length) {\n        this._parts.query = null;\n      } else {\n        this.query(URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace));\n      }\n\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeFragment = function(build) {\n    if (!this._parts.fragment) {\n      this._parts.fragment = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeSearch = p.normalizeQuery;\n  p.normalizeHash = p.normalizeFragment;\n\n  p.iso8859 = function() {\n    // expect unicode input, iso8859 output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = escape;\n    URI.decode = decodeURIComponent;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.unicode = function() {\n    // expect iso8859 input, unicode output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = unescape;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.readable = function() {\n    var uri = this.clone();\n    // removing username, password, because they shouldn't be displayed according to RFC 3986\n    uri.username('').password('').normalize();\n    var t = '';\n    if (uri._parts.protocol) {\n      t += uri._parts.protocol + '://';\n    }\n\n    if (uri._parts.hostname) {\n      if (uri.is('punycode') && punycode) {\n        t += punycode.toUnicode(uri._parts.hostname);\n        if (uri._parts.port) {\n          t += ':' + uri._parts.port;\n        }\n      } else {\n        t += uri.host();\n      }\n    }\n\n    if (uri._parts.hostname && uri._parts.path && uri._parts.path.charAt(0) !== '/') {\n      t += '/';\n    }\n\n    t += uri.path(true);\n    if (uri._parts.query) {\n      var q = '';\n      for (var i = 0, qp = uri._parts.query.split('&'), l = qp.length; i < l; i++) {\n        var kv = (qp[i] || '').split('=');\n        q += '&' + URI.decodeQuery(kv[0], this._parts.escapeQuerySpace)\n          .replace(/&/g, '%26');\n\n        if (kv[1] !== undefined) {\n          q += '=' + URI.decodeQuery(kv[1], this._parts.escapeQuerySpace)\n            .replace(/&/g, '%26');\n        }\n      }\n      t += '?' + q.substring(1);\n    }\n\n    t += URI.decodeQuery(uri.hash(), true);\n    return t;\n  };\n\n  // resolving relative and absolute URLs\n  p.absoluteTo = function(base) {\n    var resolved = this.clone();\n    var properties = ['protocol', 'username', 'password', 'hostname', 'port'];\n    var basedir, i, p;\n\n    if (this._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    if (!(base instanceof URI)) {\n      base = new URI(base);\n    }\n\n    if (resolved._parts.protocol) {\n      // Directly returns even if this._parts.hostname is empty.\n      return resolved;\n    } else {\n      resolved._parts.protocol = base._parts.protocol;\n    }\n\n    if (this._parts.hostname) {\n      return resolved;\n    }\n\n    for (i = 0; (p = properties[i]); i++) {\n      resolved._parts[p] = base._parts[p];\n    }\n\n    if (!resolved._parts.path) {\n      resolved._parts.path = base._parts.path;\n      if (!resolved._parts.query) {\n        resolved._parts.query = base._parts.query;\n      }\n    } else {\n      if (resolved._parts.path.substring(-2) === '..') {\n        resolved._parts.path += '/';\n      }\n\n      if (resolved.path().charAt(0) !== '/') {\n        basedir = base.directory();\n        basedir = basedir ? basedir : base.path().indexOf('/') === 0 ? '/' : '';\n        resolved._parts.path = (basedir ? (basedir + '/') : '') + resolved._parts.path;\n        resolved.normalizePath();\n      }\n    }\n\n    resolved.build();\n    return resolved;\n  };\n  p.relativeTo = function(base) {\n    var relative = this.clone().normalize();\n    var relativeParts, baseParts, common, relativePath, basePath;\n\n    if (relative._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    base = new URI(base).normalize();\n    relativeParts = relative._parts;\n    baseParts = base._parts;\n    relativePath = relative.path();\n    basePath = base.path();\n\n    if (relativePath.charAt(0) !== '/') {\n      throw new Error('URI is already relative');\n    }\n\n    if (basePath.charAt(0) !== '/') {\n      throw new Error('Cannot calculate a URI relative to another relative URI');\n    }\n\n    if (relativeParts.protocol === baseParts.protocol) {\n      relativeParts.protocol = null;\n    }\n\n    if (relativeParts.username !== baseParts.username || relativeParts.password !== baseParts.password) {\n      return relative.build();\n    }\n\n    if (relativeParts.protocol !== null || relativeParts.username !== null || relativeParts.password !== null) {\n      return relative.build();\n    }\n\n    if (relativeParts.hostname === baseParts.hostname && relativeParts.port === baseParts.port) {\n      relativeParts.hostname = null;\n      relativeParts.port = null;\n    } else {\n      return relative.build();\n    }\n\n    if (relativePath === basePath) {\n      relativeParts.path = '';\n      return relative.build();\n    }\n\n    // determine common sub path\n    common = URI.commonPath(relativePath, basePath);\n\n    // If the paths have nothing in common, return a relative URL with the absolute path.\n    if (!common) {\n      return relative.build();\n    }\n\n    var parents = baseParts.path\n      .substring(common.length)\n      .replace(/[^\\/]*$/, '')\n      .replace(/.*?\\//g, '../');\n\n    relativeParts.path = (parents + relativeParts.path.substring(common.length)) || './';\n\n    return relative.build();\n  };\n\n  // comparing URIs\n  p.equals = function(uri) {\n    var one = this.clone();\n    var two = new URI(uri);\n    var one_map = {};\n    var two_map = {};\n    var checked = {};\n    var one_query, two_query, key;\n\n    one.normalize();\n    two.normalize();\n\n    // exact match\n    if (one.toString() === two.toString()) {\n      return true;\n    }\n\n    // extract query string\n    one_query = one.query();\n    two_query = two.query();\n    one.query('');\n    two.query('');\n\n    // definitely not equal if not even non-query parts match\n    if (one.toString() !== two.toString()) {\n      return false;\n    }\n\n    // query parameters have the same length, even if they're permuted\n    if (one_query.length !== two_query.length) {\n      return false;\n    }\n\n    one_map = URI.parseQuery(one_query, this._parts.escapeQuerySpace);\n    two_map = URI.parseQuery(two_query, this._parts.escapeQuerySpace);\n\n    for (key in one_map) {\n      if (hasOwn.call(one_map, key)) {\n        if (!isArray(one_map[key])) {\n          if (one_map[key] !== two_map[key]) {\n            return false;\n          }\n        } else if (!arraysEqual(one_map[key], two_map[key])) {\n          return false;\n        }\n\n        checked[key] = true;\n      }\n    }\n\n    for (key in two_map) {\n      if (hasOwn.call(two_map, key)) {\n        if (!checked[key]) {\n          // two contains a parameter not present in one\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  // state\n  p.preventInvalidHostname = function(v) {\n    this._parts.preventInvalidHostname = !!v;\n    return this;\n  };\n\n  p.duplicateQueryParameters = function(v) {\n    this._parts.duplicateQueryParameters = !!v;\n    return this;\n  };\n\n  p.escapeQuerySpace = function(v) {\n    this._parts.escapeQuerySpace = !!v;\n    return this;\n  };\n\n  return URI;\n}));\n","/*! https://mths.be/punycode v1.4.0 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","/**\r\n * Copyright 2016 PT Inovao e Sistemas SA\r\n * Copyright 2016 INESC-ID\r\n * Copyright 2016 QUOBIS NETWORKS SL\r\n * Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n * Copyright 2016 ORANGE SA\r\n * Copyright 2016 Deutsche Telekom AG\r\n * Copyright 2016 Apizee\r\n * Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\r\nconst methods = {GET: 'get', POST: 'post'}\r\n/**\r\n * @typedef {Object} Request\r\n * @desc Bridge to make HTTP requests\r\n * @property {function(url:string, options:Object):string} get\r\n * @property {function(url:string, options:Object):string} post\r\n */\r\n\r\n/**\r\n * Bridge to make HTTP requests\r\n */\r\nclass Request {\r\n\r\n\tconstructor() {\r\n\t\tlet _this = this\r\n\r\n\t\tObject.keys(methods).forEach(function(method) {\r\n\t\t\t_this[methods[method]] = function(url, options) {\r\n\t\t\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\t\t\t_this._makeLocalRequest(methods[method].toUpperCase(), url, options).then(function(result) {\r\n\t\t\t\t\t\tresolve(result)\r\n\t\t\t\t\t}).catch(function(reason) {\r\n\t\t\t\t\t\treject(reason)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t_makeLocalRequest(method, url, options) {\r\n\t\tlet _this = this\r\n\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\turl = _this._mapProtocol(url)\r\n\t\t\tlet xhr = new XMLHttpRequest()\r\n\r\n\t\t\txhr.open(method, url, true)\r\n\r\n\t\t\txhr.onreadystatechange = function(event) {\r\n\t\t\t\tlet xhr = event.currentTarget\r\n\t\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t\tif (xhr.status >= 200 || xhr.status <= 299) {\r\n\t\t\t\t\t\tresolve(xhr.responseText)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(xhr.responseText)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(options && options.headers) {\r\n\t\t\t\tfor(let prop in options.headers) {\r\n\t\t\t\t\txhr.setRequestHeader(prop, options.headers[prop])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\txhr.send(options?options.body:null)\r\n\t\t})\r\n\r\n\t}\r\n\r\n\t_mapProtocol(url) {\r\n\t\tlet protocolmap = {\r\n\t\t\t'localhost://': 'https://',\r\n\t\t\t'undefined://': 'https://',\r\n\t\t\t'hyperty-catalogue://': 'https://',\r\n\t\t\t'https://': 'https://',\r\n\t\t\t'http://': 'http://'\r\n\t\t}\r\n\r\n\t\tlet foundProtocol = false\r\n\t\tfor (let protocol in protocolmap) {\r\n\t\t\tif (url.slice(0, protocol.length) === protocol) {\r\n\t\t\t\turl = protocolmap[protocol] + url.slice(protocol.length, url.length)\r\n\t\t\t\tfoundProtocol = true\r\n\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!foundProtocol) {\r\n\t\t\tthrow new Error('Invalid protocol of url: ' + url)\r\n\t\t}\r\n\r\n\t\treturn url\r\n\t}\r\n}\r\n\r\nexport default Request\r\n","// TODO: import and extend the class of the service-framework\r\n// service-framework/dist/RuntimeCapabilities;\r\n\r\nclass RuntimeCapabilities {\r\n\r\n  constructor(storageManager) {\r\n    if (!storageManager) throw new Error('The Runtime Capabilities need the storageManager');\r\n\r\n    this.storageManager = storageManager;\r\n  }\r\n\r\n  /**\r\n   * Returns as a promise RuntimeCapabilities json object with all available capabilities of the runtime.\r\n   * If it was not yet persisted in the Storage Manager it collects all required info from the platform and saves in the storage manager.\r\n   * @returns {Promise<object>}\r\n   */\r\n  getRuntimeCapabilities() {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      Promise.all([this._getEnvironment(), this._getMediaDevices()]).then((result) => {\r\n        let capabilities = {};\r\n        result.forEach((capability) => {\r\n          Object.assign(capabilities, capability);\r\n        });\r\n\r\n        this.storageManager.set('capabilities', '1', capabilities);\r\n\r\n        resolve(capabilities);\r\n      }).catch((error) => {\r\n        reject(error);\r\n      });\r\n\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * returns as a promise a boolean according to available capabilities.\r\n   * @returns {Promise<boolean>}\r\n   */\r\n  isAvailable(capability) {\r\n    return new Promise((resolve) => {\r\n\r\n      this.storageManager.get('capabilities').then((capabilities) => {\r\n\r\n        console.log('Capability ' + capability + ' is available? ', capabilities.hasOwnProperty(capability) && capabilities[capability]);\r\n        if (capabilities.hasOwnProperty(capability) && capabilities[capability]) {\r\n          resolve(true);\r\n        } else {\r\n          resolve(false);\r\n        }\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  /**\r\n   * it refreshes previously collected capabilities and updates the storage manager\r\n   */\r\n  update() {\r\n    return new Promise((resolve, reject) => {\r\n      this.getRuntimeCapabilities().then(resolve).catch(reject);\r\n    });\r\n  }\r\n\r\n  // TODO: organize the code in separated files\r\n  _getEnvironment() {\r\n\r\n    // TODO: this should be more effective and check the environment\r\n    return {\r\n      browser: !!(window && navigator),\r\n      node: !!!(window && navigator)\r\n    };\r\n  }\r\n\r\n  // TODO: organize the code in separated files\r\n  _getMediaDevices() {\r\n    return new Promise((resolve) => {\r\n\r\n      let capability = {};\r\n\r\n      if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\r\n        console.log('enumerateDevices() not supported.');\r\n        resolve(capability);\r\n        return;\r\n      }\r\n\r\n      // List cameras and microphones.\r\n      navigator.mediaDevices.enumerateDevices()\r\n      .then((devices) => {\r\n        devices.forEach((device) => {\r\n          // console.log('Devices:', device.kind, device.label, device.deviceId);\r\n          if (device.kind === 'audioinput') {\r\n            capability.mic = true;\r\n          }\r\n\r\n          if (device.kind === 'videoinput') {\r\n            capability.camera = true;\r\n\t    capability.windowSandbox = true;\r\n          }\r\n        });\r\n        resolve(capability);\r\n      })\r\n      .catch((err) => {\r\n        resolve(capability);\r\n        console.log(err.name + ': ' + err.message);\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default RuntimeCapabilities;\r\n","/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\nimport PersistenceManager from 'service-framework/dist/PersistenceManager';\r\nimport { createSandbox } from './Sandboxes';\r\nimport SandboxApp from './SandboxApp';\r\nimport Request from './Request';\r\nimport RuntimeCapabilities from './RuntimeCapabilities';\r\nimport StorageManager from 'service-framework/dist/StorageManager';\r\nimport Dexie from 'dexie';\r\nimport { RuntimeCatalogue } from 'service-framework/dist/RuntimeCatalogue';\r\n\r\n/**\r\n * Is a bridge to isolate the runtime from the specific platform\r\n * @typedef {Object} RuntimeFactory\r\n * @property {function():Sandbox} createSandbox Creates a new Sandbox\r\n * @property {function():SandboxApp} createAppSandbox Creates a new SandboxApp\r\n * @property {function():Request} createHttpRequest Creates a new Request object\r\n * @property {function():RuntimeCatalogue} createRuntimeCatalogue Creates a new RuntimeCatalogue\r\n * @property {function(Encoded data: string):string} atob Returns the string decoded\r\n * @property {function():PersistenceManager} persistenceManager Returns a new PersistenceManager\r\n * @property {function():StorageManager} storageManager Returns a new StorageManager\r\n * @property {function():RuntimeCapabilities} runtimeCapabilities Returns a new RuntimeCapabilities\r\n */\r\nexport default {\r\n  createSandbox(constraints) {\r\n    return createSandbox(constraints);\r\n  },\r\n\r\n  createAppSandbox() {\r\n    return new SandboxApp();\r\n  },\r\n\r\n  createHttpRequest() {\r\n    let request = new Request();\r\n    return request;\r\n  },\r\n\r\n  createRuntimeCatalogue() {\r\n    if (!this.catalogue) { this.catalogue = new RuntimeCatalogue(this); }\r\n\r\n    return this.catalogue;\r\n  },\r\n\r\n  atob(b64) {\r\n    return atob(b64);\r\n  },\r\n\r\n  persistenceManager() {\r\n    let localStorage = window.localStorage;\r\n    return new PersistenceManager(localStorage);\r\n  },\r\n  storageManager(name, schemas) {\r\n\r\n    if (!this.databases) { this.databases = {}; }\r\n    if (!this.storeManager) { this.storeManager = {}; }\r\n\r\n    // To make the storage persitent and now allow the system clear the storage when is under pressure;\r\n    if (navigator && navigator.storage && navigator.storage.persist) {\r\n      navigator.storage.persist().then(function(persistent) {\r\n        if (persistent) { console.log('Storage will not be cleared except by explicit user action'); } else { console.log('Storage may be cleared by the UA under storage pressure.'); }\r\n      });\r\n    }\r\n\r\n    // Using the implementation of Service Framework\r\n    // Dexie is the IndexDB Wrapper\r\n    if (!this.databases.hasOwnProperty(name)) {\r\n      this.databases[name] = new Dexie(name);\r\n    }\r\n\r\n    if (!this.storeManager.hasOwnProperty(name)) {\r\n      this.storeManager[name] = new StorageManager(this.databases[name], name, schemas);\r\n    }\r\n\r\n    return this.storeManager[name];\r\n  },\r\n\r\n  runtimeCapabilities() {\r\n\r\n    if (!this.capabilitiesManager) {\r\n      let storageManager = this.storageManager('capabilities');\r\n      this.capabilitiesManager = new RuntimeCapabilities(storageManager);\r\n    }\r\n\r\n    return this.capabilitiesManager;\r\n  }\r\n};\r\n","/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\nimport { Sandbox, SandboxType } from 'runtime-core/dist/sandbox';\r\nimport MiniBus from 'runtime-core/dist/minibus';\r\n\r\n/**\r\n * Proxy for the Application context\r\n * */\r\nexport default class SandboxApp extends Sandbox {\r\n  constructor() {\r\n    super();\r\n\r\n    /**\r\n\t\t * @type {runtime-core/dist/sandbox/SandboxType}\r\n\t\t */\r\n    this.type = SandboxType.NORMAL;\r\n    window.addEventListener('message', function(e) {\r\n      if (!this.origin) {\r\n        /**\r\n\t\t\t\t * @type {Window}\r\n\t\t\t\t */\r\n        this.origin = e.source;\r\n      }\r\n\r\n      if (typeof e.data === 'string') {\r\n        return;\r\n      }\r\n\r\n      if (e.data.hasOwnProperty('to') && e.data.to.startsWith('core:')) { return; }\r\n\r\n      // this._onMessage(JSON.parse(JSON.stringify(e.data)));\r\n      this._onMessage(e.data);\r\n    }.bind(this));\r\n\r\n    window.addEventListener('error', function(error) {\r\n      console.error('[SANDBOX APP] - Error', error);\r\n      throw error;\r\n    }.bind(this));\r\n\r\n  }\r\n\r\n  _onPostMessage(msg) {\r\n    this.origin.postMessage(msg, '*');\r\n  }\r\n}\r\n","/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\nimport { Sandbox, SandboxType } from 'runtime-core/dist/sandbox';\r\nimport MiniBus from 'runtime-core/dist/minibus';\r\nimport RuntimeFactory from './RuntimeFactory';\r\n\r\n/**\r\n * Proxy for a WebWorker\r\n * */\r\nexport class SandboxWorker extends Sandbox {\r\n  static capabilities() {\r\n    return RuntimeFactory.runtimeCapabilities().getRuntimeCapabilities()\r\n      .then(capabilities =>Object.assign(capabilities, { mic: false, camera: false, windowSandbox: false }));\r\n  }\r\n\r\n  static new(capabilities) {\r\n    return new SandboxWorker(capabilities, './context-service.js');\r\n  }\r\n\r\n  /**\r\n\t * @param {string} script - Script that will be loaded in the web worker\r\n\t */\r\n  constructor(capabilities, script) {\r\n    super(capabilities);\r\n\r\n    /**\r\n\t\t * @type {runtime-core/dist/sandbox/SandboxType}\r\n\t\t */\r\n    this.type = SandboxType.NORMAL;\r\n    if (Worker) {\r\n      this._worker = new Worker(script);\r\n      this._worker.addEventListener('message', function(e) {\r\n        this._onMessage(e.data);\r\n      }.bind(this));\r\n\r\n      this._worker.addEventListener('error', function(error) {\r\n        console.log('[Sandbox Worker] - Error: ', error);\r\n        throw JSON.stringify(error);\r\n      }.bind(this));\r\n\r\n      this._worker.postMessage('');\r\n    } else {\r\n      throw new Error('Your environment does not support worker \\n');\r\n    }\r\n  }\r\n\r\n  _onPostMessage(msg) {\r\n    this._worker.postMessage(msg);\r\n  }\r\n}\r\n\r\nexport class SandboxWindow extends Sandbox {\r\n  static capabilities() {\r\n    return RuntimeFactory.runtimeCapabilities().getRuntimeCapabilities();\r\n  }\r\n\r\n  static new(capabilities) {\r\n    return new SandboxWindow(capabilities);\r\n  }\r\n\r\n  constructor(capabilities) {\r\n    super(capabilities);\r\n\r\n    this.type = SandboxType.WINDOW;\r\n    this.channel = new MessageChannel();\r\n\r\n    this.channel.port1.onmessage = function(e) {\r\n      this._onMessage(e.data);\r\n    }.bind(this);\r\n\r\n    parent.postMessage({ to: 'runtime:createSandboxWindow' }, '*', [this.channel.port2]);\r\n  }\r\n\r\n  _onPostMessage(msg) {\r\n    this.channel.port1.postMessage(msg);\r\n  }\r\n}\r\n\r\nexport function createSandbox(constraints) {\r\n  const sandboxes = [SandboxWorker, SandboxWindow];\r\n  let diff = (a, b) => Object.keys(a).filter(x => a[x] !== b[x]);\r\n\r\n  return Promise.all(sandboxes.map(s => s.capabilities().then(c=>{ return {capabilities: c, sandbox: s}; })))\r\n    .then(sbs => {\r\n      let i = 0;\r\n      while (i < sbs.length) {\r\n        if (diff(constraints, sbs[i].capabilities).length === 0) {\r\n          let capabilities = sbs[i].capabilities;\r\n          let sandbox = sbs[i].sandbox.new(capabilities);\r\n          return sandbox;\r\n        }\r\n\r\n        i++;\r\n      }\r\n      throw new Error('None of supported sandboxes match your constraints');\r\n    });\r\n}\r\n","// jshint browser:true, jquery: true\r\n\r\nclass IdentitiesGUI {\r\n\r\n  constructor(guiURL, idmURL, messageBus) {\r\n    console.log('IdentitiesGUI', this);\r\n    //if (!identityModule) throw Error('Identity Module not set!');\r\n    if (!messageBus) throw Error('Message Bus not set!');\r\n    let _this = this;\r\n    _this._guiURL = guiURL;\r\n    _this._idmURL = idmURL;\r\n    _this._messageBus = messageBus;\r\n    _this._alreadyReLogin = false;\r\n    _this._alreadyLogin = false;\r\n\r\n    this.callIdentityModuleFunc('deployGUI', {}).then((result) => {\r\n      return this._buildDrawer();\r\n    }).then((result) => {\r\n      console.log('READY:', result);\r\n    });\r\n\r\n    this.isLogged = false;\r\n\r\n    const drawerEl = document.querySelector('.mdc-temporary-drawer');\r\n    const MDCTemporaryDrawer = mdc.drawer.MDCTemporaryDrawer;\r\n    const drawer = new MDCTemporaryDrawer(drawerEl);\r\n\r\n    this._drawerEl = drawerEl;\r\n    this._drawer = drawer;\r\n\r\n    document.querySelector('.settings-btn').addEventListener('click', function() {\r\n      drawer.open = true;\r\n    });\r\n\r\n    drawerEl.addEventListener('MDCTemporaryDrawer:open', () => {\r\n      console.log('Received MDCTemporaryDrawer:open');\r\n      this._isDrawerOpen = true;\r\n      parent.postMessage({ body: { method: 'showAdminPage' }, to: 'runtime:gui-manager' }, '*');\r\n    });\r\n\r\n    drawerEl.addEventListener('MDCTemporaryDrawer:close', () => {\r\n      console.log('Received MDCTemporaryDrawer:close');\r\n      this._isDrawerOpen = false;\r\n      parent.postMessage({ body: { method: 'hideAdminPage' }, to: 'runtime:gui-manager' }, '*');\r\n    });\r\n\r\n  }\r\n\r\n  logOut() {\r\n    let _this = this;\r\n    console.log('IdentitiesGUI: logging out');\r\n    return new Promise((resolve, reject) => {\r\n\r\n      console.log('Building drawer');\r\n      _this._buildDrawer();\r\n\r\n      resolve('Gui reset');\r\n\r\n\r\n    });\r\n  }\r\n\r\n  _buildDrawer() {\r\n\r\n    const guiURL = this._guiURL;\r\n\r\n    this._messageBus.addListener(guiURL, msg => {\r\n\r\n      const funcName = msg.body.method;\r\n\r\n      if (msg.type !== 'response') {\r\n\r\n\r\n        if (!this.isLogged) {\r\n\r\n          const clickClose = new MouseEvent('click');\r\n          document.querySelector('.settings-btn').dispatchEvent(clickClose);\r\n\r\n        }\r\n\r\n      }\r\n\r\n      if (funcName === 'openPopup') {\r\n\r\n        this.openPopup().then(() => {\r\n\r\n          let urlreceived = msg.body.params.urlreceived;\r\n          this.openPopup(urlreceived).then((returnedValue) => {\r\n            let value = {type: 'execute', value: returnedValue, code: 200};\r\n            let replyMsg = {id: msg.id, type: 'response', to: msg.from, from: msg.to, body: value};\r\n            this._messageBus.postMessage(replyMsg);\r\n          });\r\n\r\n        });\r\n\r\n        return;\r\n\r\n      }\r\n\r\n      const callback = (identityInfo) => {\r\n\r\n        this.isLogged = true;\r\n\r\n        this._buildMessage(msg, identityInfo);\r\n\r\n      };\r\n\r\n      this.callback = callback;\r\n\r\n      this._getIdentities(callback, true);\r\n\r\n    });\r\n\r\n    this._getIdentities();\r\n\r\n  }\r\n\r\n  _buildMessage(msg, identityInfo) {\r\n    let replyMsg;\r\n    let value;\r\n\r\n    const from = msg ? msg.from : this._guiURL;\r\n    const to = msg ? msg.to : this._idmURL;\r\n\r\n    console.log('chosen identity: ', identityInfo);\r\n\r\n    switch (identityInfo.type) {\r\n      case 'idp':\r\n        value = { type: 'idp', value: identityInfo.value, code: 200 };\r\n        break;\r\n\r\n      case 'identity':\r\n        value = { type: 'identity', value: identityInfo.value, code: 200 };\r\n        break;\r\n\r\n      default:\r\n        value = { type: 'error', value: 'Error on identity GUI', code: 400 };\r\n    }\r\n\r\n    replyMsg = {id: msg.id, type: 'response', to: from, from: to, body: value };\r\n\r\n    this._messageBus.postMessage(replyMsg);\r\n  }\r\n\r\n  _getIdentities(callback, oPenDrawer) {\r\n\r\n    return this.callIdentityModuleFunc('getIdentitiesToChoose', {}).then((resultObject) => {\r\n      if (callback) {\r\n        return Promise.all([this.showIdps(resultObject.idps, callback), this.showDefaultIdentity(resultObject.defaultIdentity), this.showIdentities(resultObject, callback, oPenDrawer)]);\r\n      } else {\r\n        return Promise.all([this.showIdps(resultObject.idps), this.showDefaultIdentity(resultObject.defaultIdentity), this.showIdentities(resultObject)]);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  // _openDrawer() {\r\n\r\n  //   let _this = this;\r\n  //   const guiURL = _this._guiURL;\r\n\r\n  //   _this.resultURL  = undefined;\r\n\r\n  //   _this._messageBus.addListener(guiURL, msg => {\r\n  //     let identityInfo = msg.body.value;\r\n  //     let funcName = msg.body.method;\r\n  //     let value;\r\n  //     console.log('[IdentitiesGUI] received msg: ', msg);\r\n\r\n  //     _this.showIdentitiesGUI(msg.body.value).then((identityInfo) => {\r\n\r\n  //       let replyMsg;\r\n  //       console.log('[IdentitiesGUI] identityInfo from GUI: ', identityInfo);\r\n\r\n  //       //hide config page with the identity GUI\r\n  //       parent.postMessage({ body: { method: 'hideAdminPage' }, to: 'runtime:gui-manager' }, '*');\r\n  //       $('.admin-page').addClass('hide');\r\n\r\n  //       // document.getElementsByTagName('body')[0].style = 'background-color:transparent';\r\n  //       $('.identities-section').addClass('hide');\r\n  //       $('.policies-section').addClass('hide');\r\n\r\n  //       switch (identityInfo.type) {\r\n  //         case 'idp':\r\n  //           value = { type: 'idp', value: identityInfo.value, code: 200 };\r\n  //           replyMsg = { id: msg.id, type: 'response', to: msg.from, from: msg.to, body: value };\r\n  //           _this._messageBus.postMessage(replyMsg);\r\n  //           break;\r\n\r\n  //         case 'identity':\r\n  //           value = { type: 'identity', value: identityInfo.value, code: 200 };\r\n  //           replyMsg = { id: msg.id, type: 'response', to: msg.from, from: msg.to, body: value };\r\n  //           _this._messageBus.postMessage(replyMsg);\r\n  //           break;\r\n\r\n  //         default:\r\n  //           value = { type: 'error', value: 'Error on identity GUI', code: 400 };\r\n  //           replyMsg = { id: msg.id, type: 'response', to: msg.from, from: msg.to, body: value };\r\n  //           _this._messageBus.postMessage(replyMsg);\r\n  //       }\r\n  //     });\r\n\r\n  //     if (funcName === 'openPopup') {\r\n  //       let urlreceived = msg.body.params.urlreceived;\r\n  //       _this.openPopup(urlreceived).then((returnedValue) => {\r\n  //         let value = {type: 'execute', value: returnedValue, code: 200};\r\n  //         let replyMsg = {id: msg.id, type: 'response', to: msg.from, from: msg.to, body: value};\r\n  //         _this._messageBus.postMessage(replyMsg);\r\n  //       });\r\n  //       return; // this avoids getting stuck in the identities page\r\n  //     }\r\n\r\n  //     // unhide the config page with the identity GUI\r\n  //     // document.getElementsByTagName('body')[0].style = 'background-color:white;';\r\n  //     parent.postMessage({ body: { method: 'showAdminPage' }, to: 'runtime:gui-manager' }, '*');\r\n\r\n  //     const clickOpen = new MouseEvent('click');\r\n  //     document.querySelector('.settings-btn').dispatchEvent(clickOpen);\r\n\r\n  //     $('.admin-page').removeClass('hide');\r\n\r\n  //   });\r\n  // }\r\n\r\n  callIdentityModuleFunc(methodName, parameters) {\r\n    let _this = this;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const message = { type: 'execute', to: _this._idmURL, from: _this._guiURL,\r\n        body: { resource: 'identity', method: methodName, params: parameters }};\r\n\r\n      this._messageBus.postMessage(message, (res) => {\r\n        let result = res.body.value;\r\n        resolve(result);\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  openPopup(urlreceived) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let win;\r\n      if (!urlreceived) {\r\n        win = window.open('', 'openIDrequest', 'location=1,status=1');\r\n        this.win = win;\r\n        resolve();\r\n      } else {\r\n        win = this.win;\r\n        win.location.href = urlreceived;\r\n      }\r\n\r\n      // let win = window.open(urlreceived, 'openIDrequest', 'location=1,status=1,scrollbars=1');\r\n      if (window.cordova) {\r\n        win.addEventListener('loadstart', function(e) {\r\n          let url = e.url;\r\n          let code = /\\&code=(.+)$/.exec(url);\r\n          let error = /\\&error=(.+)$/.exec(url);\r\n\r\n          if (code || error) {\r\n            win.close();\r\n            return resolve(url);\r\n          } else {\r\n            return reject('openPopup error 1 - should not happen');\r\n          }\r\n        });\r\n      } else {\r\n\r\n        let pollTimer = setInterval(function() {\r\n          try {\r\n            if (win.closed) {\r\n              clearInterval(pollTimer);\r\n\r\n              // return reject('Some error occured when trying to get identity.');\r\n            }\r\n\r\n            if ((win.document.URL.indexOf('access_token') !== -1 || win.document.URL.indexOf('code') !== -1) && win.document.URL.indexOf(location.origin) !== -1) {\r\n              window.clearInterval(pollTimer);\r\n              let url =   win.document.URL;\r\n\r\n              resolve(url);\r\n              return win.close();\r\n            }\r\n          } catch (e) {\r\n            //return reject('openPopup error 2 - should not happen');\r\n            // console.log(e);\r\n          }\r\n\r\n        }, 500);\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  // showIdentitiesGUI(receivedInfo) {\r\n  //   let _this = this;\r\n\r\n  //   return new Promise((resolve, reject) => {\r\n  //     console.log('[IdentitiesGUI.showIdentitiesGUI] receivedInfo: ', receivedInfo);\r\n\r\n  //     let identityInfo;\r\n  //     let toRemoveID;\r\n\r\n  //     let callback = (value) => {\r\n  //       console.log('chosen identity: ', value);\r\n\r\n  //       const clickClose = new MouseEvent('click');\r\n  //       document.querySelector('.settings-btn').dispatchEvent(clickClose);\r\n\r\n  //       resolve({type: 'identity', value: value});\r\n  //     };\r\n\r\n  //     _this._checkReceivedInfo(receivedInfo).then((resultObject) => {\r\n  //       identityInfo = resultObject.identityInfo;\r\n  //       toRemoveID = resultObject.toRemoveID;\r\n\r\n  //       $('.policies-section').addClass('hide');\r\n  //       $('.identities-section').removeClass('hide');\r\n\r\n  //       _this.showIdps(receivedInfo.idps, callback);\r\n\r\n  //       _this.showIdentities(identityInfo.identities, toRemoveID).then((identity) => {\r\n  //         console.log('chosen identity: ', identity);\r\n  //         resolve({type: 'identity', value: identity});\r\n  //       });\r\n\r\n  //       let idps = [];\r\n  //       let idpsObjects = identityInfo.idps;\r\n\r\n  //       idpsObjects.forEach(function(entry) {\r\n  //         if(entry.type && entry.type == 'idToken') {\r\n  //           idps.push(entry.domain);\r\n  //         }\r\n  //       });\r\n\r\n  //       $('#idproviders').html(_this._getList(idps));\r\n  //       $('#idproviders').off();\r\n  //       // $('#idproviders').on('click', (event) => _this.obtainNewIdentity(event, callback, toRemoveID));\r\n  //       //$('.back').on('click', (event) => _this.goHome());\r\n  //       $('.identities-reset').off();\r\n  //       // $('.identities-reset').on('click', (event) => _this._resetIdentities(callback));\r\n  //     });\r\n  //   });\r\n  // }\r\n\r\n  _checkReceivedInfo(receivedInfo) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let identityInfo;\r\n      let toRemoveID;\r\n\r\n      if (receivedInfo) {\r\n        identityInfo = receivedInfo;\r\n        toRemoveID = false;\r\n        resolve({identityInfo: identityInfo, toRemoveID: toRemoveID});\r\n      } else {\r\n        toRemoveID = true;\r\n        _this.callIdentityModuleFunc('getIdentitiesToChoose', {}).then((result) => {\r\n          resolve({identityInfo: result, toRemoveID: toRemoveID});\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  showIdps(idps) {\r\n\r\n    console.log('[IdentitiesGUI.showIdps] : ', idps);\r\n\r\n    let idpsListEl = document.getElementById('idps-list');\r\n\r\n    const clickEvent = (event) => {\r\n      const el = event.currentTarget;\r\n      const idp = el.getAttribute('data-idp');\r\n\r\n      this.loginWithIDP(idp).then((result) => {\r\n        // console.log('value here: ', result.value);\r\n        // result.value = result.value.userURL\r\n\r\n        if (this.callback) {\r\n          this.callback(result);\r\n        }\r\n\r\n      });\r\n    };\r\n\r\n    idps.forEach((key) => {\r\n\r\n      let linkEl = document.getElementById('link-' + key.domain);\r\n\r\n      if (!linkEl) {\r\n        linkEl = document.createElement('a');\r\n        linkEl.setAttribute('id', 'link-' + key.domain);\r\n        linkEl.setAttribute('data-idp', key.domain);\r\n        linkEl.classList = 'mdc-list-item link-' + key.domain;\r\n        linkEl.href = '#';\r\n\r\n        const linkElText = document.createTextNode(key.domain);\r\n\r\n        let name = key.domain;\r\n        if (name.indexOf('.') !== -1) {\r\n          name = name.substring(0, name.indexOf('.'));\r\n        } else {\r\n          name = 'question';\r\n        }\r\n\r\n        const imgEl = document.createElement('img');\r\n        imgEl.classList = 'mdc-list-item__start-detail';\r\n        imgEl.src = './assets/' + name + '.svg';\r\n        imgEl.width = 30;\r\n        imgEl.height = 30;\r\n\r\n        imgEl.onerror = (e) => { e.srcElement.src = './assets/question.svg'; };\r\n\r\n        linkEl.appendChild(imgEl);\r\n        linkEl.appendChild(linkElText);\r\n\r\n        idpsListEl.appendChild(linkEl);\r\n      } else {\r\n        linkEl.removeEventListener('click', clickEvent);\r\n      }\r\n\r\n      linkEl.addEventListener('click', clickEvent);\r\n\r\n    });\r\n\r\n  }\r\n\r\n  showDefaultIdentity(identity) {\r\n\r\n    if (identity) {\r\n\r\n      this.isLogged = true;\r\n\r\n      const header = document.querySelector('.mdc-list--avatar-list');\r\n\r\n      let itemEl = document.getElementById('item-' + identity.userProfile.userURL);\r\n\r\n      if (!itemEl) {\r\n\r\n        itemEl = document.createElement('li');\r\n        itemEl.id = 'item-' + identity.userProfile.userURL;\r\n        itemEl.classList = 'mdc-list-item item-' + identity.userProfile.userURL;\r\n        itemEl.setAttribute('data-userURL', identity.userProfile.userURL);\r\n\r\n        const profileImage = document.createElement('img');\r\n        profileImage.classList = 'mdc-list-item__start-detail';\r\n        profileImage.width = 56;\r\n        profileImage.height = 56;\r\n        profileImage.alt = identity.userProfile.name;\r\n        profileImage.src = identity.userProfile.picture;\r\n        itemEl.appendChild(profileImage);\r\n\r\n        const text1 = document.createElement('span');\r\n        text1.classList = 'name mdc-list-item__text';\r\n        text1.textContent = identity.userProfile.name;\r\n\r\n        const text2 = document.createElement('span');\r\n        text2.classList = 'email mdc-list-item__secondary-text';\r\n        text2.textContent = identity.userProfile.email;\r\n\r\n        text1.appendChild(text2);\r\n        itemEl.appendChild(text1);\r\n        header.appendChild(itemEl);\r\n\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  showIdentities(iDs, callback, oPenDrawer = false) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      console.log('[IdentitiesGUI.showMyIdentities] : ', iDs.identities, iDs.defaultIdentity);\r\n\r\n      const identities = iDs.identities;\r\n      const current = iDs.defaultIdentity ? iDs.defaultIdentity.userURL : '';\r\n\r\n      let activeIdentities = document.getElementById('active-identities');\r\n\r\n      Object.keys(identities).forEach((key) => {\r\n\r\n        const exist = document.getElementById('link-' + key);\r\n        if (exist) { return; }\r\n\r\n        const linkEl = document.createElement('a');\r\n        linkEl.href = '#';\r\n        linkEl.id = 'link-' + key;\r\n        linkEl.classList = 'mdc-list-item';\r\n        linkEl.setAttribute('data-userURL', key);\r\n\r\n        if (key === current) {\r\n          linkEl.classList += ' mdc-temporary-drawer--selected';\r\n        }\r\n\r\n        linkEl.addEventListener('click', (event) => {\r\n\r\n          event.preventDefault();\r\n\r\n          const el = event.currentTarget;\r\n          const userURL = el.getAttribute('data-userURL');\r\n\r\n          console.log('userURL:', userURL, callback, el);\r\n\r\n          if (callback) {\r\n            callback(userURL);\r\n          }\r\n\r\n        });\r\n\r\n        const profileImage = document.createElement('img');\r\n        profileImage.classList = 'mdc-list-item__start-detail';\r\n        profileImage.width = 40;\r\n        profileImage.height = 40;\r\n        profileImage.alt = identities[key].userProfile.name;\r\n        profileImage.src = identities[key].userProfile.picture;\r\n        profileImage.onerror = (e) => { e.srcElement.src = './assets/question.svg'; };\r\n\r\n        const text1 = document.createElement('span');\r\n        text1.classList = 'name mdc-list-item__text';\r\n        text1.textContent = identities[key].userProfile.name;\r\n\r\n        const text2 = document.createElement('span');\r\n        text2.classList = 'email mdc-list-item__secondary-text';\r\n        text2.textContent = identities[key].userProfile.email;\r\n\r\n        text1.appendChild(text2);\r\n\r\n        linkEl.appendChild(profileImage);\r\n        linkEl.appendChild(text1);\r\n\r\n        activeIdentities.appendChild(linkEl);\r\n\r\n      });\r\n\r\n      if (oPenDrawer && (!this._alreadyReLogin)) {\r\n        this._drawer.open = true\r\n      }\r\n\r\n      if (oPenDrawer && (!this._alreadyReLogin) && (!this._alreadyLogin)) {\r\n        this._alreadyReLogin = true;\r\n        parent.postMessage({ body: { method: 'tokenExpired' }, to: 'runtime:gui-manager' }, '*');\r\n      }\r\n\r\n\r\n\r\n\r\n/*\r\n      if (Object.keys(identities).length === 1) {\r\n\r\n        if (callback) {\r\n          callback({type: 'identity', value: current});\r\n        }\r\n\r\n        return resolve({type: 'identity', value: current});\r\n      }*/\r\n\r\n\r\n      // let callback = (identity) => {\r\n      //   resolve(identity);\r\n      // };\r\n\r\n      // if (!toRemoveID) {\r\n      //   $('.clickable-cell').on('click', (event) => _this.changeID(event, callback));\r\n      // }\r\n\r\n      // $('.remove-id').on('click', (event) => _this.removeID(iDs));\r\n\r\n    });\r\n  }\r\n\r\n  removeID(event, emails) {\r\n    let _this = this;\r\n    let row = event.target.parentNode.parentNode;\r\n    let idToRemove = row.children[0].textContent;\r\n    let domain = row.children[1].textContent;\r\n\r\n    _this.callIdentityModuleFunc('unregisterIdentity', { email: idToRemove }).then(() => {\r\n      let numEmails = emails.length;\r\n      for (let i = 0; i < numEmails; i++) {\r\n        if (emails[i].email === idToRemove) {\r\n          emails.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n\r\n      // -------------------------------------------------------------------------//\r\n      _this.showIdentities(emails, true);\r\n    });\r\n\r\n    //_this.identityModule.unregisterIdentity(idToRemove);\r\n\r\n  }\r\n\r\n  authorise(idp, resource) {\r\n\r\n\r\n    return this.openPopup()\r\n      .then((res) => {\r\n        const data = { scope: resource, idpDomain: idp };\r\n        return this.callIdentityModuleFunc('getAccessTokenAuthorisationEndpoint', data);\r\n      })\r\n      .then((value) => {\r\n        console.log('[IdentitiesGUI.authorise] receivedURL from idp Proxy: ' + value);\r\n\r\n        return this.openPopup(value);\r\n      }).then((result) => {\r\n\r\n        console.log('[IdentitiesGUI.authorise.openPopup.result]', result);\r\n\r\n        // resource as array\r\n\r\n\r\n        const data = { resources: [resource], idpDomain: idp, login: result };\r\n        return this.callIdentityModuleFunc('getAccessToken', data);\r\n      }).then((result) => {\r\n\r\n        console.log('[IdentitiesGUI.authorise.getAccessToken.result]', result);\r\n        return this.callIdentityModuleFunc('addAccessToken', result);\r\n      }).then((value) => {\r\n        this._drawer.open = false;\r\n        return value;\r\n      });\r\n\r\n  }\r\n\r\n  loginWithIDP(idp) {\r\n\r\n\r\n    let _publicKey;\r\n\r\n    return this.openPopup()\r\n      .then((result) => {\r\n        return this.callIdentityModuleFunc('getMyPublicKey', {});\r\n      }).then((publicKey) => {\r\n        _publicKey = publicKey;\r\n        const data = { contents: publicKey, origin: 'origin', usernameHint: undefined, idpDomain: idp };\r\n        return this.callIdentityModuleFunc('sendGenerateMessage', data);\r\n      })\r\n      .then((value) => {\r\n        console.log('[IdentitiesGUI.obtainNewIdentity] receivedURL from idp Proxy: ' + value.loginUrl.substring(0, 20) + '...');\r\n\r\n        let url = value.loginUrl;\r\n        let finalURL;\r\n\r\n        //check if the receivedURL contains the redirect field and replace it\r\n        if (url.indexOf('redirect_uri') !== -1) {\r\n          let firstPart = url.substring(0, url.indexOf('redirect_uri'));\r\n          let secondAuxPart = url.substring(url.indexOf('redirect_uri'), url.length);\r\n\r\n          let secondPart = secondAuxPart.substring(secondAuxPart.indexOf('&'), url.length);\r\n\r\n          //check if the reddirect field is the last field of the URL\r\n          if (secondPart.indexOf('&') !== -1) {\r\n            finalURL = firstPart + 'redirect_uri=' + location.origin + secondPart;\r\n          } else {\r\n            finalURL = firstPart + 'redirect_uri=' + location.origin;\r\n          }\r\n        }\r\n\r\n        this.resultURL = finalURL || url;\r\n\r\n        console.log('[IdentitiesGUI.openPopup]', this.resultURL);\r\n        return this.openPopup(this.resultURL);\r\n      }).then((identity) => {\r\n\r\n        console.log('[IdentitiesGUI.openPopup.result]', identity);\r\n\r\n        const data = { contents: _publicKey, origin: 'origin', usernameHint: identity, idpDomain: idp };\r\n        return this.callIdentityModuleFunc('sendGenerateMessage', data);\r\n      }).then((result) => {\r\n\r\n        console.log('[IdentitiesGUI.sendGenerateMessage.result]', result);\r\n        return this.callIdentityModuleFunc('addAssertion', result);\r\n      }).then((value) => {\r\n\r\n        this._drawer.open = false;\r\n        const userURL = {type: 'identity', value: value.userProfile.userURL};\r\n        // const userIdentity = {type: 'identity', value: value.userProfile};\r\n\r\n        console.log('[IdentitiesGUI.loginWithIDP final]', value);\r\n        this._alreadyLogin = true;\r\n        return userURL;\r\n        // return userIdentity;\r\n      });\r\n\r\n  }\r\n\r\n  // obtainNewIdentity(event, callback, toRemoveID) {\r\n  //   let _this = this;\r\n  //   let idProvider = event.target.textContent;\r\n  //   let idProvider2 = event.target.text;\r\n\r\n  //   _this.callIdentityModuleFunc('getMyPublicKey', {}).then((publicKey) => {\r\n  //     // let publicKey = btoa(keyPair.public);\r\n\r\n  //     _this.callIdentityModuleFunc('sendGenerateMessage',\r\n  //       { contents: publicKey, origin: 'origin', usernameHint: undefined, idpDomain: idProvider, }).then((value) => {\r\n  //       console.log('[IdentitiesGUI.obtainNewIdentity] receivedURL from idp Proxy: ' + value.loginUrl.substring(0, 20) + '...');\r\n\r\n  //       let url = value.loginUrl;\r\n  //       let finalURL;\r\n\r\n  //       //check if the receivedURL contains the redirect field and replace it\r\n  //       if (url.indexOf('redirect_uri') !== -1) {\r\n  //         let firstPart = url.substring(0, url.indexOf('redirect_uri'));\r\n  //         let secondAuxPart = url.substring(url.indexOf('redirect_uri'), url.length);\r\n\r\n  //         let secondPart = secondAuxPart.substring(secondAuxPart.indexOf('&'), url.length);\r\n\r\n  //         //check if the reddirect field is the last field of the URL\r\n  //         if (secondPart.indexOf('&') !== -1) {\r\n  //           finalURL = firstPart + 'redirect_uri=' + location.origin + secondPart;\r\n  //         } else {\r\n  //           finalURL = firstPart + 'redirect_uri=' + location.origin;\r\n  //         }\r\n  //       }\r\n\r\n  //       _this.resultURL = finalURL || url;\r\n\r\n  //       $('.login-idp').html('<p>Chosen IDP: ' + idProvider + '</p>');\r\n  //       $('.login').removeClass('hide');\r\n  //       $('.login-btn').off();\r\n  //       $('.login-btn').on('click', (event) => {\r\n  //         $('.login').addClass('hide');\r\n  //         // _this._authenticateUser(publicKey, value, 'origin', idProvider).then((email) => {\r\n  //         //   callback(email);\r\n  //         //   _this.showIdentitiesGUI();\r\n  //         // });\r\n  //       });\r\n  //     });\r\n  //   }).catch(err => console.log('obtanin new identity', err));\r\n\r\n  // }\r\n\r\n  _getList(items) {\r\n    let list = '';\r\n    let numItems = items.length;\r\n\r\n    for (let i = 0; i < numItems; i++) {\r\n      list += '<li class=\"divider\"></li>';\r\n      list += '<li><a class=\"center-align\">' + items[i] + '</a></li>';\r\n    }\r\n\r\n    return list;\r\n  }\r\n\r\n  _authenticateUser(publicKey, value, origin, idProvider) {\r\n    let _this = this;\r\n    let url = _this.resultURL;\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      _this.openPopup(url).then((identity) => {\r\n\r\n        _this.callIdentityModuleFunc('sendGenerateMessage',\r\n          { contents: publicKey, origin: origin, usernameHint: identity, idpDomain: idProvider }).then((result) => {\r\n\r\n          if (result) {\r\n\r\n            //_this.identityModule.storeIdentity(result, keyPair).then((value) => {\r\n            _this.callIdentityModuleFunc('addAssertion', result).then((value) => {\r\n              resolve(value.userProfile.userURL);\r\n            }, (err) => {\r\n              reject(err);\r\n            });\r\n\r\n          } else {\r\n            reject('error on obtaining identity information');\r\n          }\r\n\r\n        });\r\n      }, (err) => {\r\n        reject(err);\r\n      });\r\n    });\r\n  }\r\n\r\n  _resetIdentities() {\r\n    console.log('_resetIdentities');\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default IdentitiesGUI;\r\n","import PoliciesManager from './PoliciesManager';\r\n\r\nclass PoliciesGUI {\r\n\r\n  constructor(pepGuiURL, pepURL, messageBus) {\r\n    let _this = this;\r\n    _this.policiesManager = new PoliciesManager(pepGuiURL, pepURL, messageBus);\r\n    // assume prepareAttributes is called after this\r\n  }\r\n\r\n  prepareAttributes() {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.policiesManager.prepareAttributes().then(() => {\r\n        _this.elements = _this._setElements();\r\n        _this._setListeners();\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  _addMember() {\r\n    let _this = this;\r\n    let group = event.target.id;\r\n    $('.member-new-intro').html('<h5>Add a member to a group</h5><p>Insert a user email below to add to the \"' + group + '\" group.</p>');\r\n    $('.member-new-modal').openModal();\r\n    $('.member-new-ok').off();\r\n    $('.member-new-ok').on('click', (event) => {\r\n      let member = $('#member-new').val();\r\n      $('#member-new').val('');\r\n      _this.policiesManager.addToGroup(group, member).then(() => {\r\n        $('.member-new-modal').closeModal();\r\n        _this._manageGroups();\r\n      });\r\n    });\r\n  }\r\n\r\n  _createGroup() {\r\n    let _this = this;\r\n    $('#group-new-name').val('');\r\n    $('.group-new-modal').openModal();\r\n    $('.group-new-ok').on('click', (event) => {\r\n      let groupName = $('#group-new-name').val();\r\n      _this.policiesManager.createGroup(groupName).then(() => {\r\n        _this._manageGroups();\r\n      });\r\n    });\r\n  }\r\n\r\n  _addPolicy() {\r\n    let _this = this;\r\n    $('#policy-new-title').val('');\r\n    $('.combining').html('');\r\n    let algorithms = ['Block overrides', 'Allow overrides', 'First applicable'];\r\n    $('.combining').append(this._getOptions('comb-algorithm', 'Choose a combining algorithm', algorithms));\r\n    $('.policy-new').openModal();\r\n\r\n    $('.policy-new-ok').off();\r\n    $('.policy-new-ok').on('click', (event) => {\r\n      let policyTitle = $('#policy-new-title').val();\r\n      if (!policyTitle) {\r\n        Materialize.toast('Invalid policy title', 4000);\r\n      } else {\r\n        let combiningAlgorithm = $('#comb-algorithm').val();\r\n        _this.policiesManager.addPolicy(policyTitle, combiningAlgorithm).then(() => {\r\n          $('.help-menu').addClass('hide');\r\n          $('.policy-new').closeModal();\r\n          _this._goHome();\r\n        });\r\n      }\r\n    });\r\n    $('.help-btn').off();\r\n    $('.help-btn').on('click', (event) => {\r\n      $('.help-menu').removeClass('hide');\r\n    });\r\n  }\r\n\r\n  _decreaseRulePriority() {\r\n    let _this = this;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let thisPriority = parseInt(splitId[splitId.length - 1]);\r\n    splitId.pop();\r\n    let policyTitle = splitId.join(':');\r\n    _this.policiesManager.getPolicy(policyTitle).then((policy) => {\r\n      let lastPriority = policy.getLastPriority();\r\n      if (lastPriority != thisPriority) {\r\n        let newPriority = parseInt(thisPriority + 1);\r\n        _this.policiesManager.decreaseRulePriority(policyTitle, thisPriority, newPriority).then(() => {\r\n          _this._goHome();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  _deleteMember() {\r\n    let _this = this;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split('::');\r\n    let member = splitId[splitId.length - 1];\r\n    splitId.pop();\r\n    let group = splitId.join('::');\r\n    _this.policiesManager.removeFromGroup(group, member).then(() => {\r\n      _this._manageGroups();\r\n    });\r\n  }\r\n\r\n  _deleteGroup() {\r\n    let _this = this;\r\n    let groupName = event.target.closest('tr').children[0].id;\r\n    _this.policiesManager.deleteGroup(groupName).then(() => {\r\n      _this._manageGroups();\r\n    });\r\n  }\r\n\r\n  _deletePolicy() {\r\n    let _this = this;\r\n    let policyTitle = event.target.closest('tr').id;\r\n    _this.policiesManager.deletePolicy(policyTitle).then(() => {\r\n      _this._goHome();\r\n    });\r\n  }\r\n\r\n  _deleteRule() {\r\n    let _this = this;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let priority = splitId[splitId.length - 1];\r\n    splitId.pop();\r\n    let policyTitle = splitId.join(':');\r\n    let rule = _this.policiesManager.getRuleOfPolicy(policyTitle, priority);\r\n\r\n    _this.policiesManager.deleteRule(policyTitle, rule).then(() => {\r\n      _this._goHome();\r\n    });\r\n  }\r\n\r\n  _getActivePolicy() {\r\n    let _this = this;\r\n    _this.policiesManager.getActivePolicy().then((activeUserPolicy) => {\r\n      $('.policy-active').html('');\r\n      _this.policiesManager.getPoliciesTitles().then((policies) => {\r\n        policies.push('Deactivate all policies');\r\n\r\n        $('.policy-active').append(_this._getOptions('policies-list', 'Click to activate a policy', policies, activeUserPolicy));\r\n\r\n        $('#policies-list').on('click', (event) => {\r\n          let policyTitle = $('#policies-list').find(\":selected\")[0].textContent;\r\n          if (policyTitle === 'Deactivate all policies') {\r\n            policyTitle = undefined;\r\n          }\r\n          _this.policiesManager.updateActivePolicy(policyTitle);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  _getGroupOptions(title, keys, scopes, lists) {\r\n    let list = '<option disabled selected>' + title + '</option>';\r\n\r\n    for (let i in keys) {\r\n      list += '<optgroup label=' + keys[i] + '>';\r\n      for (let j in lists[i]) {\r\n        list += '<option id=\"' + scopes[i] + '\">' + lists[i][j] + '</option>';\r\n      }\r\n    }\r\n\r\n    return list;\r\n  }\r\n\r\n  _getInfo(variable) {\r\n    let info;\r\n\r\n    switch(variable) {\r\n      case 'Date':\r\n        info = $('.config').find('input').val();\r\n        if (info.indexOf(',') !== -1) { //20 July, 2016\r\n          let splitInfo = info.split(' '); //['20', 'July,',' '2016']\r\n          splitInfo[1] = splitInfo[1].substring(0, splitInfo[1].length - 1); //'July'\r\n          let months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n          info = splitInfo[0] + '/' + (months.indexOf(splitInfo[1]) + 1) + '/' + splitInfo[2];\r\n        } else { // 2016-07-20\r\n          let splitInfo = info.split('-');\r\n          info = splitInfo[2] + '/' + splitInfo[1] + '/' + splitInfo[0];\r\n        }\r\n        break;\r\n      case 'Group of users':\r\n        info = $('#group').find(\":selected\").text();\r\n        break;\r\n      case 'Subscription preferences':\r\n        if (info = $(\"input[name='rule-new-subscription']:checked\")[0] !== undefined) {\r\n          info = $(\"input[name='rule-new-subscription']:checked\")[0].id;\r\n        }\r\n        break;\r\n      case 'Weekday':\r\n        info = $('#weekday').find(\":selected\").text();\r\n        break;\r\n      default:\r\n        info = $('.config').find('input').val();\r\n        break;\r\n    }\r\n\r\n    return info;\r\n  }\r\n\r\n  _getList(items) {\r\n      let list = '';\r\n      let numItems = items.length;\r\n\r\n      for (let i = 0; i < numItems; i++) {\r\n        list += '<li class=\"divider\"></li>';\r\n        list += '<li><a class=\"center-align\">' + items[i] + '</a></li>';\r\n      }\r\n\r\n      return list;\r\n    }\r\n\r\n  _getOptions(id, title, list, selected) {\r\n    let options = '<select id=\"' + id + '\" class=\"browser-default\"><option disabled selected>' + title + '</option>';\r\n    for (let i in list) {\r\n      if (selected !== undefined & selected === list[i]) {\r\n        options += '<option selected id=\"' + id + '\">' + list[i] + '</option>';\r\n      } else {\r\n        options += '<option id=\"' + id + '\">' + list[i] + '</option>';\r\n      }\r\n    }\r\n    options += '</select>';\r\n\r\n    return options;\r\n  }\r\n\r\n  _getPoliciesTable() {\r\n    let _this = this;\r\n\r\n    _this.policiesManager.getFormattedPolicies().then((policies) => {\r\n      $('.policies-no').addClass('hide');\r\n      $('.policies-current').html('');\r\n\r\n      let policiesTitles = [];\r\n      let rulesTitles = [];\r\n      let ids = [];\r\n\r\n      for (let i in policies) {\r\n        policiesTitles.push(policies[i].title);\r\n        rulesTitles.push(policies[i].rulesTitles);\r\n        ids.push(policies[i].ids);\r\n      }\r\n\r\n      let table = '<table>';\r\n      let isEmpty = policiesTitles.length === 0;\r\n\r\n      for (let i in policiesTitles) {\r\n        table += '<thead><tr id=\"' + policiesTitles[i] + '\"><td></td><td></td><th class=\"center-align\">' + policiesTitles[i] + '</th><td><i class=\"material-icons clickable-cell policy-delete\" style=\"cursor: pointer; vertical-align: middle\">delete_forever</i></td></tr></thead><tbody>';\r\n\r\n        for (let j in rulesTitles[i]) {\r\n          table += '<tr id=\"' + ids[i][j] + '\" ><td><i class=\"material-icons clickable-cell rule-priority-increase\" style=\"cursor: pointer; vertical-align: middle\">arrow_upward</i></td><td><i class=\"material-icons clickable-cell rule-priority-decrease\" style=\"cursor: pointer; vertical-align: middle\">arrow_downward</i></td><td class=\"rule-show clickable-cell\" style=\"cursor: pointer\">' + rulesTitles[i][j] + '</td><td><i class=\"material-icons clickable-cell rule-delete\" style=\"cursor: pointer; vertical-align: middle\">clear</i></td></tr>';\r\n        }\r\n        table += '<tr id=\"' + policiesTitles[i] + '\"></td><td></td><td></td><td style=\"text-align:center\"><i class=\"material-icons clickable-cell center-align rule-add\" style=\"cursor: pointer\">add_circle</i></td></tr>';\r\n      }\r\n      if (!isEmpty) {\r\n        table += '</tbody></table>';\r\n        $('.policies-current').append(table);\r\n      } else {\r\n        $('.policies-no').removeClass('hide');\r\n      }\r\n      $('.rule-add').on('click', (event) => { _this._showVariablesTypes(); });\r\n      $('.rule-delete').on('click', (event) => { _this._deleteRule(); });\r\n      $('.rule-show').on('click', (event) => { _this._showRule(); });\r\n      $('.rule-priority-increase').on('click', (event) => { _this._increaseRulePriority(); });\r\n      $('.rule-priority-decrease').on('click', (event) => { _this._decreaseRulePriority(); });\r\n      $('.policy-add').off();\r\n      $('.policy-add').on('click', (event) => { _this._addPolicy(); });\r\n      $('.policy-delete').on('click', (event) => { _this._deletePolicy(); });\r\n    });\r\n  }\r\n\r\n  _goHome() {\r\n    this._getActivePolicy();\r\n    this._getPoliciesTable();\r\n  }\r\n\r\n  _increaseRulePriority() {\r\n    let _this = this;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let thisPriority = parseInt(splitId[splitId.length - 1]);\r\n    if (thisPriority !== 0) {\r\n      splitId.pop();\r\n      let policyTitle = splitId.join(':');\r\n      let newPriority = thisPriority - 1;\r\n\r\n      _this.policiesManager.increaseRulePriority(policyTitle, thisPriority, newPriority).then(() => {\r\n        _this._goHome();\r\n      });\r\n    }\r\n  }\r\n\r\n  _manageGroups() {\r\n    let _this = this;\r\n    _this.policiesManager.getGroups().then((groupsPE) => {\r\n      $('.groups-current').html('');\r\n      let groups = groupsPE.groupsNames;\r\n      let members = groupsPE.members;\r\n      let ids = groupsPE.ids;\r\n\r\n      let table = '<table>';\r\n      let isEmpty = groups.length === 0;\r\n\r\n      for (let i in groups) {\r\n        table += '<thead><tr><th id=\"' + groups[i] + '\">' + groups[i] + '</th><td style=\"text-align:right\"><i class=\"material-icons clickable-cell group-delete\" style=\"cursor: pointer; vertical-align: middle\">delete_forever</i></td></tr></thead><tbody>';\r\n        for (let j in members[i]) {\r\n          table += '<tr id=\"' + ids[i][j] + '\" ><td style=\"cursor: pointer\">' + members[i][j] + '</td><td style=\"text-align:right\"><i class=\"material-icons clickable-cell member-delete\" style=\"cursor: pointer; vertical-align: middle\">clear</i></td></tr>';\r\n        }\r\n\r\n        table += '<tr id=\"' + groups[i] + '\"><td><i class=\"material-icons clickable-cell member-add\" id=\"' + groups[i] + '\" style=\"cursor: pointer\">add_circle</i></td></tr>';\r\n      }\r\n\r\n      if (!isEmpty) {\r\n        table += '</tbody></table>';\r\n        $('.groups-current').append(table);\r\n      } else {\r\n        $('.groups-current').append('<p>There are no groups set.</p>');\r\n      }\r\n\r\n      $('.member-add').off();\r\n      $('.member-add').on('click', (event) => { _this._addMember(); });\r\n      $('.member-delete').on('click', (event) => { _this._deleteMember(); });\r\n      $('.group-add').off();\r\n      $('.group-add').on('click', (event) => { _this._createGroup(); });\r\n      $('.group-delete').on('click', (event) => { _this._deleteGroup(); });\r\n    });\r\n  }\r\n\r\n  _parseFileContent(content) {\r\n    let parsedContent = JSON.parse(content);\r\n    for (let i in parsedContent) {\r\n      this.policiesManager.addPolicy(i, undefined, parsedContent[i]);\r\n    }\r\n    $('.policy-new').closeModal();\r\n  }\r\n\r\n  _setElements() {\r\n    return {\r\n      date: (params) => { return '<input type=\"date\" class=\"datepicker\">'; },\r\n      select: (params) => { return this._getOptions(params[0], params[1], params[2]); },\r\n      form: (params) => { return '<form><input type=\"text\" placeholder=\"' + params + '\"></input></form>'; }\r\n    };\r\n  }\r\n\r\n  _showNewConfigurationPanel(policyTitle) {\r\n    let variable = event.target.text;\r\n    $('.variable').html(this._getNewConfiguration(policyTitle, variable));\r\n    $('.scopes').empty().html('');\r\n\r\n    let keys = ['Email', 'Hyperty', 'All'];\r\n    let scopes = ['identity', 'hyperty', 'global'];\r\n    let lists = [];\r\n\r\n    this.policiesManager.getMyEmails().then((emails) => {\r\n      lists.push(emails);\r\n      this.policiesManager.getMyHyperties().then((hyperties) => {\r\n        lists.push(hyperties);\r\n        lists.push(['All identities and hyperties']);\r\n        $('.scopes').append(this._getGroupOptions('Apply this configuration to:', keys, scopes, lists));\r\n        $('.variable').removeClass('hide');\r\n      });\r\n    });\r\n  }\r\n\r\n  _showVariablesTypes(event) {\r\n    let policyTitle = event.target.closest('tr').id;\r\n\r\n    $('#variables-types').empty().html('');\r\n    let variables = this.policiesManager.getVariables();\r\n    $('#variables-types').append(this._getList(variables));\r\n    $('.variable').addClass('hide');\r\n    $('.rule-new').openModal();\r\n    $('#variables-types').off();\r\n    $('#variables-types').on('click', (event) => { this._showNewConfigurationPanel(policyTitle); });\r\n  }\r\n\r\n  _getNewConfiguration(policyTitle, variable) {\r\n    let _this = this;\r\n    let info = _this.policiesManager.getVariableInfo(variable);\r\n    $('.rule-new-title').html(info.title);\r\n    $('.description').html(info.description);\r\n    $('.config').html('');\r\n\r\n    if (variable === 'Subscription preferences') {\r\n      $('.subscription-type').removeClass('hide');\r\n    } else {\r\n      $('.subscription-type').addClass('hide');\r\n      let tags = info.input;\r\n      for (let i in tags) {\r\n        _this.policiesManager.getGroupsNames().then((groupsNames) => {\r\n          if (variable === 'Group of users') {\r\n            tags[i][1].push(groupsNames);\r\n          }\r\n          $('.config').append(_this.elements[tags[i][0]](tags[i][1]));\r\n          if (variable === 'Group of users') {\r\n            tags[i][1].pop();\r\n          }\r\n        });\r\n      }\r\n      if (variable ==='date') {\r\n        $('.datepicker').pickadate({\r\n          selectMonths: true,\r\n          selectYears: 15\r\n        });\r\n      }\r\n    }\r\n    document.getElementById('allow').checked = false;\r\n    document.getElementById('block').checked = false;\r\n    $('.ok-btn').off();\r\n    $('.ok-btn').on('click', (event) => {\r\n      if ($(\"input[name='rule-new-decision']:checked\")[0] !== undefined) {\r\n        let info = _this._getInfo(variable);\r\n        let decision = $(\"input[name='rule-new-decision']:checked\")[0].id;\r\n        decision = decision === 'allow';\r\n        let scope = $('.scopes').find(\":selected\")[0].id;\r\n        let target = $('.scopes').find(\":selected\")[0].textContent;\r\n        target = (target === 'All identities and hyperties') ? 'global' : target;\r\n        _this.policiesManager.setInfo(variable, policyTitle, info, decision, scope, target).then(() => {\r\n          $('.rule-new').closeModal();\r\n          _this._goHome();\r\n        });\r\n      } else {\r\n        throw Error('INFORMATION MISSING: please specify an authorisation decision.');\r\n      }\r\n    });\r\n  }\r\n\r\n  _deleteInfo(resourceType) {\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let scope = splitId[0];\r\n    splitId.shift();\r\n    let target = splitId.join('');\r\n    let condition = event.target.closest('tr').children[0].id;\r\n    this.policiesManager.deleteInfo(resourceType, scope, target, condition);\r\n    this._goHome();\r\n  }\r\n\r\n  _setListeners() {\r\n    $('.settings-btn').on('click', (event) => {\r\n      parent.postMessage({ body: { method: 'showAdminPage' }, to: 'runtime:gui-manager' }, '*');\r\n      $('.admin-page').removeClass('hide');\r\n      // document.getElementsByTagName('body')[0].style = 'background-color:white;';\r\n    });\r\n\r\n    $('.policies-page-show').on('click', (event) => {\r\n      $('.policies-section').removeClass('hide');\r\n      $('.identities-section').addClass('hide');\r\n      this._goHome();\r\n      this._manageGroups();\r\n    });\r\n\r\n    $('.admin-page-exit').on('click', (event) => {\r\n      parent.postMessage({ body: { method: 'hideAdminPage' }, to: 'runtime:gui-manager' }, '*');\r\n      $('.admin-page').addClass('hide');\r\n      // document.getElementsByTagName('body')[0].style = 'background-color:transparent;';\r\n    });\r\n\r\n    $('.exit-btn').on('click', (event) => {\r\n      $('.subscription-type').addClass('hide');\r\n      $('.help-menu').addClass('hide');\r\n    });\r\n\r\n    $('#policy-file').on('change', (event) => {\r\n      let file = event.target.files[0];\r\n      let reader = new FileReader();\r\n      reader.readAsText(file, \"UTF-8\");\r\n      reader.onload = (event) => {\r\n        this._parseFileContent(event.target.result);\r\n        this._goHome();\r\n      }\r\n      reader.onerror = (event) => {\r\n        throw Error(\"Error reading the file\");\r\n      }\r\n    });\r\n  }\r\n\r\n  _showRule(event) {\r\n    let ruleTitle = event.target.textContent;\r\n    let id = event.target.closest('tr').id;\r\n    let splitId = id.split(':');\r\n    let priority = splitId[splitId.length - 1];\r\n    splitId.pop();\r\n    let policyTitle = splitId.join(':');\r\n    this.policiesManager.getRuleOfPolicy(policyTitle, priority).then((rule) => {\r\n      if (rule.condition.attribute === 'subscription' && rule.condition.params === 'preauthorised') {\r\n        $('.authorise-btns').addClass('hide');\r\n      } else {\r\n        let element;\r\n        if (rule.decision) {\r\n          element = document.getElementById('btn-allow');\r\n        } else {\r\n          element = document.getElementById('btn-block');\r\n        }\r\n        element.checked = true;\r\n        $('.authorise-btns').removeClass('hide');\r\n      }\r\n      $('.member-add').addClass('hide');\r\n      $('.member-new-btn').addClass('hide');\r\n\r\n      $('.rule-details').openModal();\r\n      $('.rule-title').html('<h5><b>' + ruleTitle + '</b></h5>');\r\n      if (rule.condition.attribute === 'subscription') {\r\n        $('.subscription-type').removeClass('hide');\r\n      }\r\n      $('.subscription-decision').on('click', (event) => { this._updateRule('subscription', policyTitle, rule); });\r\n      $('.decision').off();\r\n      $('.decision').on('click', (event) => { this._updateRule('authorisation', policyTitle, rule);});\r\n    });\r\n  }\r\n\r\n  _updateRule(type, policyTitle, rule) {\r\n    let _this = this;\r\n    let title = $('.rule-title').text();\r\n    let splitTitle = title.split(' ');\r\n    let index = splitTitle.indexOf('is');\r\n    if (index === -1) {\r\n      index = splitTitle.indexOf('are');\r\n    }\r\n    switch (type) {\r\n      case 'authorisation':\r\n        let newDecision = $(\"input[name='rule-update-decision']:checked\")[0].id;\r\n\r\n        if (newDecision === 'btn-allow') {\r\n          splitTitle[index + 1] = 'allowed';\r\n          newDecision = true;\r\n        } else {\r\n          splitTitle[index + 1] = 'blocked';\r\n          newDecision = false;\r\n        }\r\n        title = splitTitle.join(' ');\r\n        $('.rule-title').html('<h5><b>' + title + '</b></h5>');\r\n        _this.policiesManager.updatePolicy(policyTitle, rule, newDecision).then(() => {\r\n          _this._goHome();\r\n        });\r\n        break;\r\n      case 'subscription':\r\n        let newSubscriptionType = event.target.labels[0].textContent;\r\n\r\n        let decision = splitTitle[index + 1];\r\n        splitTitle = title.split('hyperties are');\r\n        if (newSubscriptionType === 'All subscribers') {\r\n          $('.authorise-btns').removeClass('hide');\r\n          newDecision = rule.decision;\r\n          newSubscriptionType = '*';\r\n          title = 'Subscriptions from all hyperties are' + splitTitle[1];\r\n        } else {\r\n          $('.authorise-btns').addClass('hide');\r\n          newDecision = true;\r\n          newSubscriptionType = 'preauthorised';\r\n          title = 'Subscriptions from previously authorised hyperties are' + splitTitle[1];\r\n        }\r\n\r\n        $('.rule-title').html('<h5><b>' + title + '</b></h5>');\r\n        _this.policiesManager.updatePolicy(policyTitle, rule, newDecision, newSubscriptionType).then(() => {\r\n          _this._goHome();\r\n        });\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nexport default PoliciesGUI;\r\n","class PoliciesManager {\r\n\r\n  constructor(pepGuiURL, pepURL, messageBus) {\r\n    let _this = this;\r\n    _this._guiURL = pepGuiURL;\r\n    _this._pepURL = pepURL;\r\n    _this._messageBus = messageBus;\r\n\r\n    // assume prepare attributes is called after this\r\n  }\r\n\r\n  callPolicyEngineFunc(methodName, parameters) {\r\n    let _this = this;\r\n    let message;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      message = { type: 'execute', to: _this._pepURL, from: _this._guiURL,\r\n        body: { resource: 'policy', method: methodName, params: parameters }, };\r\n      _this._messageBus.postMessage(message, (res) => {\r\n        let result = res.body.value;\r\n        resolve(result);\r\n      });\r\n    });\r\n  }\r\n\r\n  prepareAttributes() {\r\n    return new Promise((resolve, reject) => {\r\n      let _this = this;\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n        _this.policies = userPolicies;\r\n        _this.variables = _this.setVariables();\r\n        _this.addition = _this.setAdditionMethods();\r\n        _this.validation = _this.setValidationMethods();\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n\r\n  addToGroup(groupName, user) {\r\n    return this.callPolicyEngineFunc('addToGroup', {groupName: groupName, userEmail: user});\r\n  }\r\n\r\n  createGroup(groupName) {\r\n    return this.callPolicyEngineFunc('createGroup', {groupName: groupName});\r\n  }\r\n\r\n  addPolicy(title, combiningAlgorithm, policy) {\r\n    if (policy === undefined) {\r\n      switch (combiningAlgorithm) {\r\n        case 'Block overrides':\r\n          combiningAlgorithm = 'blockOverrides';\r\n          break;\r\n        case 'Allow overrides':\r\n          combiningAlgorithm = 'allowOverrides';\r\n          break;\r\n        case 'First applicable':\r\n          combiningAlgorithm = 'firstApplicable';\r\n          break;\r\n        default:\r\n          combiningAlgorithm = undefined;\r\n      }\r\n    }\r\n\r\n    return this.callPolicyEngineFunc('addPolicy',\r\n      {source: 'USER', key: title, policy: policy, combiningAlgorithm: combiningAlgorithm});\r\n  }\r\n\r\n  decreaseRulePriority(policyTitle, thisPriority, newPriority) {\r\n    this.getRuleOfPolicy(policyTitle, newPriority).priority = thisPriority;\r\n    this.getRuleOfPolicy(policyTitle, thisPriority).priority = newPriority;\r\n    return this.callPolicyEngineFunc('savePolicies', {source: 'USER'});\r\n  }\r\n\r\n  deleteGroup(groupName) {\r\n    return this.callPolicyEngineFunc('deleteGroup', {groupName: groupName});\r\n  }\r\n\r\n  deletePolicy(title) {\r\n    return this.callPolicyEngineFunc('removePolicy', {source: 'USER', key: title});\r\n  }\r\n\r\n  deleteRule(policyTitle, rule) {\r\n    let _this = this;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n        userPolicies[policyTitle].deleteRule(rule);\r\n        _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n          resolve();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  getActivePolicy() {\r\n    return this.callPolicyEngineFunc('activeUserPolicy', {});\r\n  }\r\n\r\n  getPolicy(key) {\r\n    return this.callPolicyEngineFunc('userPolicy', {key: key});\r\n  }\r\n\r\n  getPoliciesTitles() {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((policies) => {\r\n        let titles = [];\r\n\r\n        for (let i in policies) {\r\n          titles.push(i);\r\n        }\r\n\r\n        resolve(titles);\r\n      });\r\n    });\r\n  }\r\n\r\n  getTargets(scope) {\r\n    let targets = [];\r\n\r\n    for (let i in this.policies[scope]) {\r\n      if (targets.indexOf(i) === -1) {\r\n        targets.push(i);\r\n      }\r\n    }\r\n\r\n    return targets;\r\n  }\r\n\r\n  increaseRulePriority(policyTitle, thisPriority, newPriority) {\r\n    let _this = this;\r\n    _this.getRuleOfPolicy(policyTitle, thisPriority).priority = newPriority;\r\n    _this.getRuleOfPolicy(policyTitle, newPriority).priority = thisPriority;\r\n    return _this.callPolicyEngineFunc('savePolicies', {source: 'USER'});\r\n  }\r\n\r\n  setVariables() {\r\n    return {\r\n      'Date': {\r\n        title: '<br><h5>Updating date related configurations</h5><p>Incoming communications in the introduced date will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        description: '<p>Date:</p>',\r\n        input: [\r\n          ['date', []]\r\n        ]\r\n      },\r\n      'Domain': {\r\n        title: '<br><h5>Updating domain configurations</h5><p>Incoming communications from a user whose identity is from the introduced domain allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        description: '<p>Domain:</p>',\r\n        input: [\r\n          ['form', []]\r\n        ]\r\n      },\r\n      'Group of users': {\r\n        title: '<br><h5>Updating groups configurations</h5><p>Incoming communications from a user whose identity is in the introduced group will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        description: '<p>Group name:</p>',\r\n        input: [\r\n          ['select', ['group', 'Select a group:']]\r\n        ]\r\n      },\r\n      'Subscription preferences': {\r\n        title: '<br><h5>Updating subscriptions configurations</h5><p>The acceptance of subscriptions to your hyperties will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        input: []\r\n      },\r\n      'Time of the day': {\r\n        title: '<br><h5>Updating time configurations</h5><p>Incoming communications in the introduced timeslot will be blocked, but this can be changed in the preferences page.</p><p>Please introduce a new timeslot in the following format:</p><p class=\"center-align\">&lt;START-HOUR&gt;:&lt;START-MINUTES&gt; to &lt;END-HOUR&gt;:&lt;END-MINUTES&gt;</p><br>',\r\n        description: '<p>Timeslot:</p>',\r\n        input: [\r\n          ['form', []]\r\n        ]\r\n      },\r\n      Weekday: {\r\n        title: '<br><h5>Updating weekday configurations</h5><p>Incoming communications in the introduced weekday will be allowed or blocked according to your configurations, which can be changed in the preferences page.</p><br>',\r\n        description: '<p>Weekday:</p>',\r\n        input: [\r\n          ['select', ['weekday', 'Select a weekday:', ['Saturday', 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']]]\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  setAdditionMethods() {\r\n    let _this = this;\r\n    return {\r\n      Date: (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'date', operator: 'equals', params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n      Domain: (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'domain', operator: 'equals', params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n      'Group of users': (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'source', operator: 'in', params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n      'Subscription preferences': (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            let operator = 'equals';\r\n            if (params[3] === 'preauthorised') {\r\n              operator = 'in';\r\n            }\r\n\r\n            // TIAGO: this is giving me an error...\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'subscription', operator: operator, params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n      'Time of the day': (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            params[3] = params[3].split(' to ');\r\n            let start = params[3][0].split(':');\r\n            start = start.join('');\r\n            let end = params[3][1].split(':');\r\n            end = end.join('');\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'time', operator: 'between', params: [start, end] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      },\r\n\r\n      Weekday: (params) => {\r\n        return new Promise((resolve, reject) => {\r\n          let weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n          params[3] = weekdays.indexOf(params[3]);\r\n          let policyTitle = params[0];\r\n          _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n            userPolicies[policyTitle].createRule(params[4], { attribute: 'weekday', operator: 'equals', params: params[3] }, params[1], params[2]);\r\n            _this.callPolicyEngineFunc('savePolicies', {source: 'USER'}).then(() => {\r\n              resolve();\r\n            });\r\n          });\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  setValidationMethods() {\r\n    return {\r\n      Date: (scope, info) => { return this.isValidDate(info) & this.isValidScope(scope); },\r\n      'Group of users': (scope, info) => { return this.isValidString(info) & this.isValidScope(scope); },\r\n      Domain: (scope, info) => { return this.isValidDomain(info) & this.isValidScope(scope); },\r\n      Weekday: (scope, info) => { return true & this.isValidScope(scope); },\r\n      'Subscription preferences': (scope, info) => { return this.isValidSubscriptionType(info) & this.isValidScope(scope); },\r\n      'Time of the day': (scope, info) => { return this.isValidTimeslot(info) & this.isValidScope(scope); }\r\n    };\r\n  }\r\n\r\n  updateActivePolicy(title) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('activeUserPolicy', {userPolicy: title}).then(() => {\r\n        _this.callPolicyEngineFunc('saveActivePolicy', {}).then(() => {\r\n          resolve();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  isValidEmail(info) {\r\n    let pattern = /[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,3}$/;\r\n    return pattern.test(info);\r\n  }\r\n\r\n  isValidDomain(info) {\r\n    let pattern = /[a-z0-9.-]+\\.[a-z]{2,3}$/;\r\n    return pattern.test(info);\r\n  }\r\n\r\n  isValidString(info) {\r\n    let pattern = /[a-z0-9.-]$/;\r\n    return pattern.test(info);\r\n  }\r\n\r\n  isValidSubscriptionType(info) {\r\n    return true;\r\n  }\r\n\r\n  isValidDate(info) {\r\n    let infoSplit = info.split('/');\r\n    let day = parseInt(infoSplit[0]);\r\n    let month = parseInt(infoSplit[1]);\r\n    let year = parseInt(infoSplit[2]);\r\n\r\n    let date = new Date(year, month-1, day);\r\n    let isValidFormat = date.getFullYear() === year && date.getMonth() + 1 === month && date.getDate() === day;\r\n    let formattedDate = date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear()\r\n    let now = new Date();\r\n    let today = now.getDate() + '/' + (now.getMonth() + 1) + '/' + now.getFullYear();\r\n\r\n    let isFuture = false;\r\n    if (date.getFullYear() > now.getFullYear()) {\r\n      isFuture = true;\r\n    } else {\r\n      if (date.getFullYear() == now.getFullYear()) {\r\n        if ((date.getMonth() + 1) > (now.getMonth() + 1)) {\r\n          isFuture = true;\r\n        } else {\r\n          if ((date.getMonth() + 1) == (now.getMonth() + 1)) {\r\n            if (date.getDate() >= (now.getDate())) {\r\n              isFuture = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return (isValidFormat && isFuture);\r\n  }\r\n\r\n  isValidScope(scope) {\r\n    return scope !== '';\r\n  }\r\n\r\n  isValidTimeslot(info) {\r\n    if (!info) {\r\n      return false;\r\n    }\r\n    let splitInfo = info.split(' to '); // [12:00, 13:00]\r\n    let twoTimes = splitInfo.length === 2;\r\n    if (!twoTimes) {\r\n      return false;\r\n    }\r\n    let splitStart = splitInfo[0].split(':'); // [12, 00]\r\n    let splitEnd = splitInfo[1].split(':'); // [13, 00]\r\n    if (splitStart.length !== 2 || splitEnd.length !== 2) {\r\n      return false;\r\n    }\r\n    let okSize = (splitStart[0].length === 2) && (splitStart[1].length === 2) && (splitEnd[0].length === 2) && (splitEnd[1].length === 2);\r\n    let areIntegers = (splitStart[0] == parseInt(splitStart[0], 10)) && (splitStart[1] == parseInt(splitStart[1], 10)) && (splitEnd[0] == parseInt(splitEnd[0], 10)) && (splitEnd[1] == parseInt(splitEnd[1], 10));\r\n    return twoTimes && okSize && areIntegers;\r\n  }\r\n\r\n  getFormattedPolicies() {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((policiesPE) => {\r\n        let policiesGUI = [];\r\n\r\n        for (let i in policiesPE) {\r\n          let policy = {\r\n            title: policiesPE[i].key,\r\n            rulesTitles: [],\r\n            ids: []\r\n          }\r\n\r\n          if (policiesPE[i].rules.length !== 0) {\r\n            policiesPE[i].rules = policiesPE[i].sortRules();\r\n            for (let j in policiesPE[i].rules) {\r\n              let title = _this._getTitle(policiesPE[i].rules[j]);\r\n              policy.rulesTitles.push(title);\r\n              policy.ids.push(policy.title + ':' + policiesPE[i].rules[j].priority);\r\n            }\r\n          }\r\n\r\n          policiesGUI.push(policy);\r\n        }\r\n\r\n        resolve(policiesGUI);\r\n      });\r\n    });\r\n  }\r\n\r\n  getRuleOfPolicy(title, priority) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((policies) => {\r\n        let policy = policies[title];\r\n        resolve(policy.getRuleByPriority(priority));\r\n      });\r\n    });\r\n  }\r\n\r\n  _getTitle(rule) {\r\n    let condition = rule.condition;\r\n    let authorise = (rule.decision) ? 'allowed' : 'blocked';\r\n    let target = rule.target === 'global' ? 'All identities and hyperties' : rule.target;\r\n    let attribute = condition.attribute;\r\n    switch(attribute) {\r\n      case 'date':\r\n        return 'Date ' + condition.params + ' is ' + authorise + ' (' + target + ')';\r\n      case 'domain':\r\n        return 'Domain \\\"' + condition.params + '\\\" is ' + authorise + ' (' + target + ')';\r\n      case 'source':\r\n        if (condition.operator === 'in') {\r\n          return 'Group \\\"' + condition.params + '\\\" is ' + authorise + ' (' + target + ')';\r\n        } else {\r\n          if (condition.operator === 'equals') {\r\n            return 'User ' + condition.params + ' is ' + authorise + ' (' + target + ')';\r\n          }\r\n        }\r\n      case 'subscription':\r\n        if (condition.params === '*') {\r\n          return 'Subscriptions from all hyperties are ' + authorise + ' (' + target + ')';\r\n        } else {\r\n          if (condition.params === 'preauthorised') {\r\n            return 'Subscriptions from previously authorised hyperties are allowed (' + target + ')';\r\n          }\r\n        }\r\n      case 'time':\r\n        let start = condition.params[0][0] + condition.params[0][1] + ':' + condition.params[0][2] + condition.params[0][3];\r\n        let end = condition.params[1][0] + condition.params[1][1] + ':' + condition.params[1][2] + condition.params[1][3];\r\n        return 'Timeslot from ' + start + ' to ' + end + ' is ' + authorise + ' (' + target + ')';\r\n      case 'weekday':\r\n        let weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n        let weekdayID = condition.params;\r\n        return 'Weekday \\\"' + weekdays[weekdayID] + '\\\" is ' + authorise + ' (' + target + ')';\r\n      default:\r\n        return 'Rule ' + rule.priority + ' is ' + authorise + ' (' + target + ')';\r\n    }\r\n  }\r\n\r\n  getVariables() {\r\n    let variablesTitles = [];\r\n    for (let i in this.variables) {\r\n      variablesTitles.push(i);\r\n    }\r\n    return variablesTitles;\r\n  }\r\n\r\n  getVariableInfo(variable) {\r\n    return this.variables[variable];\r\n  }\r\n\r\n  getMyEmails() {\r\n    return this.callPolicyEngineFunc('getMyEmails', {});\r\n  }\r\n\r\n  getMyHyperties() {\r\n    return this.callPolicyEngineFunc('getMyHyperties', {});\r\n  }\r\n\r\n  //TODO If there is a problem with the input, show it to the user\r\n  setInfo(variable, policyTitle, info, authorise, scope, target) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      if (_this.validation[variable](scope, info)) {\r\n        _this.addition[variable]([policyTitle, scope, target, info, authorise]).then(() => {\r\n          resolve();\r\n        });\r\n      } else {\r\n        reject('Invalid configuration');\r\n      }\r\n    });\r\n  }\r\n\r\n  deleteInfo(variable, scope, target, info) {\r\n    let params = [scope, target, info];\r\n    if (variable === 'member') {\r\n      let conditionSplit = info.split(' ');\r\n      let groupName = conditionSplit[2];\r\n      params = [scope, groupName, info];\r\n    }\r\n    this.deletion[variable](params);\r\n  }\r\n\r\n  getGroups() {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('groups', {}).then((groups) => {\r\n        let groupsGUI = {\r\n          groupsNames: [],\r\n          members: [],\r\n          ids: []\r\n        };\r\n\r\n        for (let i in groups) {\r\n          groupsGUI.groupsNames.push(i);\r\n          groupsGUI.members.push(groups[i]);\r\n          let ids = [];\r\n          for (let j in groups[i]) {\r\n            ids.push(i + '::' + groups[i][j]);\r\n          }\r\n          groupsGUI.ids.push(ids);\r\n        }\r\n\r\n        //console.log('TIAGO groups', groupsGUI)\r\n        resolve(groupsGUI);\r\n      });\r\n    });\r\n  }\r\n\r\n  getGroupsNames() {\r\n    return this.callPolicyEngineFunc('getGroupsNames', {});\r\n  }\r\n\r\n  removeFromGroup(groupName, user) {\r\n    return this.callPolicyEngineFunc('removeFromGroup', {groupName: groupName, userEmail: user});\r\n  }\r\n\r\n  updatePolicy(policyTitle, rule, newDecision, newSubscriptionType) {\r\n    let _this = this;\r\n    return new Promise((resolve, reject) => {\r\n      _this.callPolicyEngineFunc('userPolicies', {}).then((userPolicies) => {\r\n        userPolicies[policyTitle].deleteRule(rule);\r\n        if (!newSubscriptionType) {\r\n          userPolicies[policyTitle].createRule(newDecision, rule.condition, rule.scope, rule.target, rule.priority);\r\n        } else {\r\n          let operator = (newSubscriptionType === '*') ? 'equals' : 'in';\r\n          userPolicies[policyTitle].createRule(newDecision, [{ attribute: 'subscription', opeator: operator, params: newSubscriptionType }], rule.scope, rule.target, rule.priority);\r\n        }\r\n\r\n        _this.callPolicyEngineFunc('saveActivePolicy', {}).then(() => {\r\n          resolve();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default PoliciesManager;\r\n","/**\r\n* Copyright 2016 PT Inovao e Sistemas SA\r\n* Copyright 2016 INESC-ID\r\n* Copyright 2016 QUOBIS NETWORKS SL\r\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\r\n* Copyright 2016 ORANGE SA\r\n* Copyright 2016 Deutsche Telekom AG\r\n* Copyright 2016 Apizee\r\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\r\n*\r\n* Licensed under the Apache License, Version 2.0 (the \"License\");\r\n* you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing, software\r\n* distributed under the License is distributed on an \"AS IS\" BASIS,\r\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n* See the License for the specific language governing permissions and\r\n* limitations under the License.\r\n**/\r\nimport URI from 'urijs';\r\nimport IdentitiesGUI from './admin/IdentitiesGUI';\r\nimport PoliciesGUI from './admin/PoliciesGUI';\r\nimport RuntimeFactory from './RuntimeFactory';\r\n\r\ntry {\r\n  window.cordova = parent.cordova !== undefined;\r\n  if (window.cordova) { window.open = function(url) { return parent.cordova.InAppBrowser.open(url, '_blank', 'location=no,toolbar=no'); }; }\r\n} catch (err) { console.log('cordova not supported'); }\r\n\r\nfunction returnHyperty(source, hyperty) {\r\n  source.postMessage({to: 'runtime:loadedHyperty', body: hyperty}, '*');\r\n}\r\n\r\nfunction searchHyperty(runtime, descriptor) {\r\n  let hyperty = undefined;\r\n  let index = 0;\r\n  while (!hyperty && index < runtime.registry.hypertiesList.length) {\r\n    if (runtime.registry.hypertiesList[index].descriptor === descriptor) { hyperty = runtime.registry.hypertiesList[index]; }\r\n\r\n    index++;\r\n  }\r\n\r\n  return hyperty;\r\n}\r\n\r\nlet parameters = new URI(window.location).search(true);\r\nlet runtimeURL = parameters.runtime;\r\nlet domain = parameters.domain;\r\nlet development = parameters.development === 'true';\r\nlet catalogue = RuntimeFactory.createRuntimeCatalogue(development);\r\nlet runtimeDescriptor;\r\ncatalogue.getRuntimeDescriptor(runtimeURL)\r\n  .then(function(descriptor) {\r\n    runtimeDescriptor = descriptor;\r\n    let sourcePackageURL = descriptor.sourcePackageURL;\r\n    if (sourcePackageURL === '/sourcePackage') {\r\n      return descriptor.sourcePackage;\r\n    }\r\n    return catalogue.getSourcePackageFromURL(sourcePackageURL);\r\n  })\r\n  .then(function(sourcePackage) {\r\n    eval.apply(window, [sourcePackage.sourceCode]);\r\n\r\n    //let runtime = new Runtime(RuntimeFactory, window.location.host);\r\n    if (!domain) domain = window.location.host;\r\n    let runtime = new Runtime(runtimeDescriptor, RuntimeFactory, domain);\r\n    window.runtime = runtime;\r\n    runtime.init().then(function(result) {\r\n\r\n      // TIAGO\r\n      if (!runtime.policyEngine) throw Error('Policy Engine is not set!');\r\n      let pepGuiURL = runtime.policyEngine.context.guiURL;\r\n      let pepURL = runtime.policyEngine.context.pepURL;\r\n      let pepGUI = new PoliciesGUI(pepGuiURL, pepURL, runtime.policyEngine.messageBus, runtime.policyEngine);\r\n\r\n      pepGUI.prepareAttributes().then(() => {\r\n        let idmGuiURL = runtime.identityModule._runtimeURL + '/identity-gui';\r\n        let idmURL = runtime.identityModule._runtimeURL + '/idm';\r\n        let identitiesGUI = new IdentitiesGUI(idmGuiURL, idmURL, runtime.identityModule.messageBus);\r\n\r\n        window.addEventListener('message', function(event) {\r\n          if (event.data.to === 'core:loadHyperty') {\r\n            let descriptor = event.data.body.descriptor;\r\n            let reuseAddress = event.data.body.reuseAddress;\r\n            let hyperty = searchHyperty(runtime, descriptor);\r\n\r\n            if (hyperty) {\r\n              returnHyperty(event.source, {runtimeHypertyURL: hyperty.hypertyURL});\r\n            } else {\r\n              runtime.loadHyperty(descriptor, reuseAddress).then(returnHyperty.bind(null, event.source));\r\n            }\r\n          } else if (event.data.to === 'core:loadStub') {\r\n            runtime.loadStub(event.data.body.domain).then((result) => {\r\n              console.log('Stub Loaded: ', result);\r\n            }).catch((error) => {\r\n              console.error('Stub error:', error);\r\n            });\r\n          } else if (event.data.to === 'core:close') {\r\n            runtime.close(event.data.body.logOut)\r\n              .then(event.source.postMessage({to: 'runtime:runtimeClosed', body: true}, '*'))\r\n              .catch(event.source.postMessage({to: 'runtime:runtimeClosed', body: false}, '*'));\r\n\r\n            //  send logout\r\n            identitiesGUI.logOut().then((result) => {\r\n              console.log(result);\r\n            });\r\n\r\n          } else if (event.data.to === 'core:login') {\r\n            console.log('core: logging with ', event.data.body.idp);\r\n            identitiesGUI.loginWithIDP(event.data.body.idp).then((result) => {\r\n              event.source.postMessage({to: 'runtime:loggedIn', body: result}, '*');\r\n            });\r\n          } else if (event.data.to === 'core:authorise') {\r\n            console.log('core:authorise ', event.data.body.idp, event.data.body.scope);\r\n            identitiesGUI.authorise(event.data.body.idp, event.data.body.scope).then((result) => {\r\n              event.source.postMessage({ to: 'runtime:authorised', body: JSON.stringify(result) }, '*');\r\n            });\r\n          }\r\n\r\n\r\n        }, false);\r\n\r\n        window.addEventListener('beforeunload', (e) => {\r\n          runtime.close();\r\n        });\r\n\r\n        parent.postMessage({to: 'runtime:installed', body: {}}, '*');\r\n\r\n      });\r\n    });\r\n  });\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZGV4aWUvZGlzdC9kZXhpZS5qcyIsIm5vZGVfbW9kdWxlcy9ydW50aW1lLWNvcmUvZGlzdC9taW5pYnVzLmpzIiwibm9kZV9tb2R1bGVzL3J1bnRpbWUtY29yZS9kaXN0L3NhbmRib3guanMiLCJub2RlX21vZHVsZXMvc2VydmljZS1mcmFtZXdvcmsvZGlzdC9QZXJzaXN0ZW5jZU1hbmFnZXIuanMiLCJub2RlX21vZHVsZXMvc2VydmljZS1mcmFtZXdvcmsvZGlzdC9SdW50aW1lQ2F0YWxvZ3VlLmpzIiwibm9kZV9tb2R1bGVzL3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3RvcmFnZU1hbmFnZXIuanMiLCJub2RlX21vZHVsZXMvdXJpanMvc3JjL0lQdjYuanMiLCJub2RlX21vZHVsZXMvdXJpanMvc3JjL1NlY29uZExldmVsRG9tYWlucy5qcyIsIm5vZGVfbW9kdWxlcy91cmlqcy9zcmMvVVJJLmpzIiwibm9kZV9tb2R1bGVzL3VyaWpzL3NyYy9wdW55Y29kZS5qcyIsInNyYy9SZXF1ZXN0LmpzIiwic3JjL1J1bnRpbWVDYXBhYmlsaXRpZXMuanMiLCJzcmMvUnVudGltZUZhY3RvcnkuanMiLCJzcmMvU2FuZGJveEFwcC5qcyIsInNyYy9TYW5kYm94ZXMuanMiLCJzcmMvYWRtaW4vSWRlbnRpdGllc0dVSS5qcyIsInNyYy9hZG1pbi9Qb2xpY2llc0dVSS5qcyIsInNyYy9hZG1pbi9Qb2xpY2llc01hbmFnZXIuanMiLCJzcmMvY29yZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM1L0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2dUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeHZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzl4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QkFBdEIsRUFBd0M7QUFDN0Msa0JBQVEsR0FBUixDQUFZLGlCQUFaLEVBQStCLE1BQU0sSUFBTixDQUFXLElBQVgsQ0FBZ0IsR0FBL0MsRUFBb0QsTUFBTSxJQUFOLENBQVcsSUFBWCxDQUFnQixLQUFwRTtBQUNBLHdCQUFjLFNBQWQsQ0FBd0IsTUFBTSxJQUFOLENBQVcsSUFBWCxDQUFnQixHQUF4QyxFQUE2QyxNQUFNLElBQU4sQ0FBVyxJQUFYLENBQWdCLEtBQTdELEVBQW9FLElBQXBFLENBQXlFLFVBQUMsTUFBRCxFQUFZO0FBQ25GLGtCQUFNLE1BQU4sQ0FBYSxXQUFiLENBQXlCLEVBQUUsSUFBSSxvQkFBTixFQUE0QixNQUFNLEtBQUssU0FBTCxDQUFlLE1BQWYsQ0FBbEMsRUFBekIsRUFBcUYsR0FBckY7QUFDRCxXQUZEO0FBR0Q7QUFHRixPQXhDRCxFQXdDRyxLQXhDSDs7QUEwQ0EsYUFBTyxnQkFBUCxDQUF3QixjQUF4QixFQUF3QyxVQUFDLENBQUQsRUFBTztBQUM3QyxnQkFBUSxLQUFSO0FBQ0QsT0FGRDs7QUFJQSxhQUFPLFdBQVAsQ0FBbUIsRUFBQyxJQUFJLG1CQUFMLEVBQTBCLE1BQU0sRUFBaEMsRUFBbkIsRUFBd0QsR0FBeEQ7QUFFRCxLQXJERDtBQXNERCxHQTlERDtBQStERCxDQS9FSCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgIChnbG9iYWwuRGV4aWUgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbi8qXHJcbiogRGV4aWUuanMgLSBhIG1pbmltYWxpc3RpYyB3cmFwcGVyIGZvciBJbmRleGVkREJcclxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4qXHJcbiogQnkgRGF2aWQgRmFobGFuZGVyLCBkYXZpZC5mYWhsYW5kZXJAZ21haWwuY29tXHJcbipcclxuKiBWZXJzaW9uIDEuNS4xLCBUdWUgTm92IDAxIDIwMTZcclxuKiB3d3cuZGV4aWUuY29tXHJcbiogQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAsIEphbnVhcnkgMjAwNCwgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL1xyXG4qL1xudmFyIGtleXMgPSBPYmplY3Qua2V5cztcbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbnZhciBfZ2xvYmFsID0gdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsO1xuXG5mdW5jdGlvbiBleHRlbmQob2JqLCBleHRlbnNpb24pIHtcbiAgICBpZiAodHlwZW9mIGV4dGVuc2lvbiAhPT0gJ29iamVjdCcpIHJldHVybiBvYmo7XG4gICAga2V5cyhleHRlbnNpb24pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBvYmpba2V5XSA9IGV4dGVuc2lvbltrZXldO1xuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5cbnZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5mdW5jdGlvbiBoYXNPd24ob2JqLCBwcm9wKSB7XG4gICAgcmV0dXJuIF9oYXNPd24uY2FsbChvYmosIHByb3ApO1xufVxuXG5mdW5jdGlvbiBwcm9wcyhwcm90bywgZXh0ZW5zaW9uKSB7XG4gICAgaWYgKHR5cGVvZiBleHRlbnNpb24gPT09ICdmdW5jdGlvbicpIGV4dGVuc2lvbiA9IGV4dGVuc2lvbihnZXRQcm90byhwcm90bykpO1xuICAgIGtleXMoZXh0ZW5zaW9uKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgc2V0UHJvcChwcm90bywga2V5LCBleHRlbnNpb25ba2V5XSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldFByb3Aob2JqLCBwcm9wLCBmdW5jdGlvbk9yR2V0U2V0LCBvcHRpb25zKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZXh0ZW5kKGZ1bmN0aW9uT3JHZXRTZXQgJiYgaGFzT3duKGZ1bmN0aW9uT3JHZXRTZXQsIFwiZ2V0XCIpICYmIHR5cGVvZiBmdW5jdGlvbk9yR2V0U2V0LmdldCA9PT0gJ2Z1bmN0aW9uJyA/IHsgZ2V0OiBmdW5jdGlvbk9yR2V0U2V0LmdldCwgc2V0OiBmdW5jdGlvbk9yR2V0U2V0LnNldCwgY29uZmlndXJhYmxlOiB0cnVlIH0gOiB7IHZhbHVlOiBmdW5jdGlvbk9yR2V0U2V0LCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0sIG9wdGlvbnMpKTtcbn1cblxuZnVuY3Rpb24gZGVyaXZlKENoaWxkKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZnJvbTogZnVuY3Rpb24gKFBhcmVudCkge1xuICAgICAgICAgICAgQ2hpbGQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQYXJlbnQucHJvdG90eXBlKTtcbiAgICAgICAgICAgIHNldFByb3AoQ2hpbGQucHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kOiBwcm9wcy5iaW5kKG51bGwsIENoaWxkLnByb3RvdHlwZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblxuZnVuY3Rpb24gZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCkge1xuICAgIHZhciBwZCA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIHByb3ApLFxuICAgICAgICBwcm90bztcbiAgICByZXR1cm4gcGQgfHwgKHByb3RvID0gZ2V0UHJvdG8ob2JqKSkgJiYgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBwcm9wKTtcbn1cblxudmFyIF9zbGljZSA9IFtdLnNsaWNlO1xuZnVuY3Rpb24gc2xpY2UoYXJncywgc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBfc2xpY2UuY2FsbChhcmdzLCBzdGFydCwgZW5kKTtcbn1cblxuZnVuY3Rpb24gb3ZlcnJpZGUob3JpZ0Z1bmMsIG92ZXJyaWRlZEZhY3RvcnkpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVkRmFjdG9yeShvcmlnRnVuYyk7XG59XG5cbmZ1bmN0aW9uIGRvRmFrZUF1dG9Db21wbGV0ZShmbikge1xuICAgIHZhciB0byA9IHNldFRpbWVvdXQoZm4sIDEwMDApO1xuICAgIGNsZWFyVGltZW91dCh0byk7XG59XG5cbmZ1bmN0aW9uIGFzc2VydChiKSB7XG4gICAgaWYgKCFiKSB0aHJvdyBuZXcgRXJyb3IoXCJBc3NlcnRpb24gRmFpbGVkXCIpO1xufVxuXG5mdW5jdGlvbiBhc2FwKGZuKSB7XG4gICAgaWYgKF9nbG9iYWwuc2V0SW1tZWRpYXRlKSBzZXRJbW1lZGlhdGUoZm4pO2Vsc2Ugc2V0VGltZW91dChmbiwgMCk7XG59XG5cblxuXG4vKiogR2VuZXJhdGUgYW4gb2JqZWN0IChoYXNoIG1hcCkgYmFzZWQgb24gZ2l2ZW4gYXJyYXkuXHJcbiAqIEBwYXJhbSBleHRyYWN0b3IgRnVuY3Rpb24gdGFraW5nIGFuIGFycmF5IGl0ZW0gYW5kIGl0cyBpbmRleCBhbmQgcmV0dXJuaW5nIGFuIGFycmF5IG9mIDIgaXRlbXMgKFtrZXksIHZhbHVlXSkgdG9cclxuICogICAgICAgIGluc3RlcnQgb24gdGhlIHJlc3VsdGluZyBvYmplY3QgZm9yIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkuIElmIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCB0aGVcclxuICogICAgICAgIGN1cnJlbnQgaXRlbSB3b250IGFmZmVjdCB0aGUgcmVzdWx0aW5nIG9iamVjdC5cclxuICovXG5mdW5jdGlvbiBhcnJheVRvT2JqZWN0KGFycmF5LCBleHRyYWN0b3IpIHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGl0ZW0sIGkpIHtcbiAgICAgICAgdmFyIG5hbWVBbmRWYWx1ZSA9IGV4dHJhY3RvcihpdGVtLCBpKTtcbiAgICAgICAgaWYgKG5hbWVBbmRWYWx1ZSkgcmVzdWx0W25hbWVBbmRWYWx1ZVswXV0gPSBuYW1lQW5kVmFsdWVbMV07XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwge30pO1xufVxuXG5mdW5jdGlvbiB0cnljYXRjaGVyKGZuLCByZWplY3QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9uZXJyb3IsIGFyZ3MpIHtcbiAgICB0cnkge1xuICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBvbmVycm9yICYmIG9uZXJyb3IoZXgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCkge1xuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0luZGV4ZWREQi8jc3RlcHMtZm9yLWV4dHJhY3RpbmctYS1rZXktZnJvbS1hLXZhbHVlLXVzaW5nLWEta2V5LXBhdGhcbiAgICBpZiAoaGFzT3duKG9iaiwga2V5UGF0aCkpIHJldHVybiBvYmpba2V5UGF0aF07IC8vIFRoaXMgbGluZSBpcyBtb3ZlZCBmcm9tIGxhc3QgdG8gZmlyc3QgZm9yIG9wdGltaXphdGlvbiBwdXJwb3NlLlxuICAgIGlmICgha2V5UGF0aCkgcmV0dXJuIG9iajtcbiAgICBpZiAodHlwZW9mIGtleVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleVBhdGgubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gZ2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aFtpXSk7XG4gICAgICAgICAgICBydi5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICB2YXIgcGVyaW9kID0ga2V5UGF0aC5pbmRleE9mKCcuJyk7XG4gICAgaWYgKHBlcmlvZCAhPT0gLTEpIHtcbiAgICAgICAgdmFyIGlubmVyT2JqID0gb2JqW2tleVBhdGguc3Vic3RyKDAsIHBlcmlvZCldO1xuICAgICAgICByZXR1cm4gaW5uZXJPYmogPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IGdldEJ5S2V5UGF0aChpbm5lck9iaiwga2V5UGF0aC5zdWJzdHIocGVyaW9kICsgMSkpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB2YWx1ZSkge1xuICAgIGlmICghb2JqIHx8IGtleVBhdGggPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIGlmICgnaXNGcm96ZW4nIGluIE9iamVjdCAmJiBPYmplY3QuaXNGcm96ZW4ob2JqKSkgcmV0dXJuO1xuICAgIGlmICh0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycgJiYgJ2xlbmd0aCcgaW4ga2V5UGF0aCkge1xuICAgICAgICBhc3NlcnQodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiAnbGVuZ3RoJyBpbiB2YWx1ZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5UGF0aC5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGhbaV0sIHZhbHVlW2ldKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwZXJpb2QgPSBrZXlQYXRoLmluZGV4T2YoJy4nKTtcbiAgICAgICAgaWYgKHBlcmlvZCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50S2V5UGF0aCA9IGtleVBhdGguc3Vic3RyKDAsIHBlcmlvZCk7XG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nS2V5UGF0aCA9IGtleVBhdGguc3Vic3RyKHBlcmlvZCArIDEpO1xuICAgICAgICAgICAgaWYgKHJlbWFpbmluZ0tleVBhdGggPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgZGVsZXRlIG9ialtjdXJyZW50S2V5UGF0aF07ZWxzZSBvYmpbY3VycmVudEtleVBhdGhdID0gdmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBpbm5lck9iaiA9IG9ialtjdXJyZW50S2V5UGF0aF07XG4gICAgICAgICAgICAgICAgaWYgKCFpbm5lck9iaikgaW5uZXJPYmogPSBvYmpbY3VycmVudEtleVBhdGhdID0ge307XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGlubmVyT2JqLCByZW1haW5pbmdLZXlQYXRoLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgZGVsZXRlIG9ialtrZXlQYXRoXTtlbHNlIG9ialtrZXlQYXRoXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZWxCeUtleVBhdGgob2JqLCBrZXlQYXRoKSB7XG4gICAgaWYgKHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJykgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgdW5kZWZpbmVkKTtlbHNlIGlmICgnbGVuZ3RoJyBpbiBrZXlQYXRoKSBbXS5tYXAuY2FsbChrZXlQYXRoLCBmdW5jdGlvbiAoa3ApIHtcbiAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga3AsIHVuZGVmaW5lZCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dDbG9uZShvYmopIHtcbiAgICB2YXIgcnYgPSB7fTtcbiAgICBmb3IgKHZhciBtIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzT3duKG9iaiwgbSkpIHJ2W21dID0gb2JqW21dO1xuICAgIH1cbiAgICByZXR1cm4gcnY7XG59XG5cbmZ1bmN0aW9uIGRlZXBDbG9uZShhbnkpIHtcbiAgICBpZiAoIWFueSB8fCB0eXBlb2YgYW55ICE9PSAnb2JqZWN0JykgcmV0dXJuIGFueTtcbiAgICB2YXIgcnY7XG4gICAgaWYgKGlzQXJyYXkoYW55KSkge1xuICAgICAgICBydiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFueS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIHJ2LnB1c2goZGVlcENsb25lKGFueVtpXSkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChhbnkgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIHJ2ID0gbmV3IERhdGUoKTtcbiAgICAgICAgcnYuc2V0VGltZShhbnkuZ2V0VGltZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBydiA9IGFueS5jb25zdHJ1Y3RvciA/IE9iamVjdC5jcmVhdGUoYW55LmNvbnN0cnVjdG9yLnByb3RvdHlwZSkgOiB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBhbnkpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24oYW55LCBwcm9wKSkge1xuICAgICAgICAgICAgICAgIHJ2W3Byb3BdID0gZGVlcENsb25lKGFueVtwcm9wXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJ2O1xufVxuXG5mdW5jdGlvbiBnZXRPYmplY3REaWZmKGEsIGIsIHJ2LCBwcmZ4KSB7XG4gICAgLy8gQ29tcGFyZXMgb2JqZWN0cyBhIGFuZCBiIGFuZCBwcm9kdWNlcyBhIGRpZmYgb2JqZWN0LlxuICAgIHJ2ID0gcnYgfHwge307XG4gICAgcHJmeCA9IHByZnggfHwgJyc7XG4gICAga2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgIGlmICghaGFzT3duKGIsIHByb3ApKSBydltwcmZ4ICsgcHJvcF0gPSB1bmRlZmluZWQ7IC8vIFByb3BlcnR5IHJlbW92ZWRcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGFwID0gYVtwcm9wXSxcbiAgICAgICAgICAgICAgICAgICAgYnAgPSBiW3Byb3BdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXAgPT09ICdvYmplY3QnICYmIHR5cGVvZiBicCA9PT0gJ29iamVjdCcgJiYgYXAgJiYgYnAgJiYgYXAuY29uc3RydWN0b3IgPT09IGJwLmNvbnN0cnVjdG9yKVxuICAgICAgICAgICAgICAgICAgICAvLyBTYW1lIHR5cGUgb2Ygb2JqZWN0IGJ1dCBpdHMgcHJvcGVydGllcyBtYXkgaGF2ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgIGdldE9iamVjdERpZmYoYXAsIGJwLCBydiwgcHJmeCArIHByb3AgKyBcIi5cIik7ZWxzZSBpZiAoYXAgIT09IGJwKSBydltwcmZ4ICsgcHJvcF0gPSBiW3Byb3BdOyAvLyBQcmltaXRpdmUgdmFsdWUgY2hhbmdlZFxuICAgICAgICAgICAgfVxuICAgIH0pO1xuICAgIGtleXMoYikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICBpZiAoIWhhc093bihhLCBwcm9wKSkge1xuICAgICAgICAgICAgcnZbcHJmeCArIHByb3BdID0gYltwcm9wXTsgLy8gUHJvcGVydHkgYWRkZWRcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBydjtcbn1cblxuLy8gSWYgZmlyc3QgYXJndW1lbnQgaXMgaXRlcmFibGUgb3IgYXJyYXktbGlrZSwgcmV0dXJuIGl0IGFzIGFuIGFycmF5XG52YXIgaXRlcmF0b3JTeW1ib2wgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuaXRlcmF0b3I7XG52YXIgZ2V0SXRlcmF0b3JPZiA9IGl0ZXJhdG9yU3ltYm9sID8gZnVuY3Rpb24gKHgpIHtcbiAgICB2YXIgaTtcbiAgICByZXR1cm4geCAhPSBudWxsICYmIChpID0geFtpdGVyYXRvclN5bWJvbF0pICYmIGkuYXBwbHkoeCk7XG59IDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBudWxsO1xufTtcblxudmFyIE5PX0NIQVJfQVJSQVkgPSB7fTtcbi8vIFRha2VzIG9uZSBvciBzZXZlcmFsIGFyZ3VtZW50cyBhbmQgcmV0dXJucyBhbiBhcnJheSBiYXNlZCBvbiB0aGUgZm9sbG93aW5nIGNyaXRlcmFzOlxuLy8gKiBJZiBzZXZlcmFsIGFyZ3VtZW50cyBwcm92aWRlZCwgcmV0dXJuIGFyZ3VtZW50cyBjb252ZXJ0ZWQgdG8gYW4gYXJyYXkgaW4gYSB3YXkgdGhhdFxuLy8gICBzdGlsbCBhbGxvd3MgamF2YXNjcmlwdCBlbmdpbmUgdG8gb3B0aW1pemUgdGhlIGNvZGUuXG4vLyAqIElmIHNpbmdsZSBhcmd1bWVudCBpcyBhbiBhcnJheSwgcmV0dXJuIGEgY2xvbmUgb2YgaXQuXG4vLyAqIElmIHRoaXMtcG9pbnRlciBlcXVhbHMgTk9fQ0hBUl9BUlJBWSwgZG9uJ3QgYWNjZXB0IHN0cmluZ3MgYXMgdmFsaWQgaXRlcmFibGVzIGFzIGEgc3BlY2lhbFxuLy8gICBjYXNlIHRvIHRoZSB0d28gYnVsbGV0cyBiZWxvdy5cbi8vICogSWYgc2luZ2xlIGFyZ3VtZW50IGlzIGFuIGl0ZXJhYmxlLCBjb252ZXJ0IGl0IHRvIGFuIGFycmF5IGFuZCByZXR1cm4gdGhlIHJlc3VsdGluZyBhcnJheS5cbi8vICogSWYgc2luZ2xlIGFyZ3VtZW50IGlzIGFycmF5LWxpa2UgKGhhcyBsZW5ndGggb2YgdHlwZSBudW1iZXIpLCBjb252ZXJ0IGl0IHRvIGFuIGFycmF5LlxuZnVuY3Rpb24gZ2V0QXJyYXlPZihhcnJheUxpa2UpIHtcbiAgICB2YXIgaSwgYSwgeCwgaXQ7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkoYXJyYXlMaWtlKSkgcmV0dXJuIGFycmF5TGlrZS5zbGljZSgpO1xuICAgICAgICBpZiAodGhpcyA9PT0gTk9fQ0hBUl9BUlJBWSAmJiB0eXBlb2YgYXJyYXlMaWtlID09PSAnc3RyaW5nJykgcmV0dXJuIFthcnJheUxpa2VdO1xuICAgICAgICBpZiAoaXQgPSBnZXRJdGVyYXRvck9mKGFycmF5TGlrZSkpIHtcbiAgICAgICAgICAgIGEgPSBbXTtcbiAgICAgICAgICAgIHdoaWxlICh4ID0gaXQubmV4dCgpLCAheC5kb25lKSB7XG4gICAgICAgICAgICAgICAgYS5wdXNoKHgudmFsdWUpO1xuICAgICAgICAgICAgfXJldHVybiBhO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJheUxpa2UgPT0gbnVsbCkgcmV0dXJuIFthcnJheUxpa2VdO1xuICAgICAgICBpID0gYXJyYXlMaWtlLmxlbmd0aDtcbiAgICAgICAgaWYgKHR5cGVvZiBpID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgYSA9IG5ldyBBcnJheShpKTtcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICBhW2ldID0gYXJyYXlMaWtlW2ldO1xuICAgICAgICAgICAgfXJldHVybiBhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbYXJyYXlMaWtlXTtcbiAgICB9XG4gICAgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgYSA9IG5ldyBBcnJheShpKTtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGFbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfXJldHVybiBhO1xufVxuXG52YXIgY29uY2F0ID0gW10uY29uY2F0O1xuZnVuY3Rpb24gZmxhdHRlbihhKSB7XG4gICAgcmV0dXJuIGNvbmNhdC5hcHBseShbXSwgYSk7XG59XG5cbmZ1bmN0aW9uIG5vcCgpIHt9XG5mdW5jdGlvbiBtaXJyb3IodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbn1cbmZ1bmN0aW9uIHB1cmVGdW5jdGlvbkNoYWluKGYxLCBmMikge1xuICAgIC8vIEVuYWJsZXMgY2hhaW5lZCBldmVudHMgdGhhdCB0YWtlcyBPTkUgYXJndW1lbnQgYW5kIHJldHVybnMgaXQgdG8gdGhlIG5leHQgZnVuY3Rpb24gaW4gY2hhaW4uXG4gICAgLy8gVGhpcyBwYXR0ZXJuIGlzIHVzZWQgaW4gdGhlIGhvb2soXCJyZWFkaW5nXCIpIGV2ZW50LlxuICAgIGlmIChmMSA9PSBudWxsIHx8IGYxID09PSBtaXJyb3IpIHJldHVybiBmMjtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gZjIoZjEodmFsKSk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gY2FsbEJvdGgob24xLCBvbjIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBvbjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgb24yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaG9va0NyZWF0aW5nQ2hhaW4oZjEsIGYyKSB7XG4gICAgLy8gRW5hYmxlcyBjaGFpbmVkIGV2ZW50cyB0aGF0IHRha2VzIHNldmVyYWwgYXJndW1lbnRzIGFuZCBtYXkgbW9kaWZ5IGZpcnN0IGFyZ3VtZW50IGJ5IG1ha2luZyBhIG1vZGlmaWNhdGlvbiBhbmQgdGhlbiByZXR1cm5pbmcgdGhlIHNhbWUgaW5zdGFuY2UuXG4gICAgLy8gVGhpcyBwYXR0ZXJuIGlzIHVzZWQgaW4gdGhlIGhvb2soXCJjcmVhdGluZ1wiKSBldmVudC5cbiAgICBpZiAoZjEgPT09IG5vcCkgcmV0dXJuIGYyO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXMgPSBmMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAocmVzICE9PSB1bmRlZmluZWQpIGFyZ3VtZW50c1swXSA9IHJlcztcbiAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgLy8gSW4gY2FzZSBldmVudCBsaXN0ZW5lciBoYXMgc2V0IHRoaXMub25zdWNjZXNzXG4gICAgICAgIG9uZXJyb3IgPSB0aGlzLm9uZXJyb3I7IC8vIEluIGNhc2UgZXZlbnQgbGlzdGVuZXIgaGFzIHNldCB0aGlzLm9uZXJyb3JcbiAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSBudWxsO1xuICAgICAgICB0aGlzLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICB2YXIgcmVzMiA9IGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChvbnN1Y2Nlc3MpIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgaWYgKG9uZXJyb3IpIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICByZXR1cm4gcmVzMiAhPT0gdW5kZWZpbmVkID8gcmVzMiA6IHJlcztcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBob29rRGVsZXRpbmdDaGFpbihmMSwgZjIpIHtcbiAgICBpZiAoZjEgPT09IG5vcCkgcmV0dXJuIGYyO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBvbnN1Y2Nlc3MgPSB0aGlzLm9uc3VjY2VzcyxcbiAgICAgICAgICAgIC8vIEluIGNhc2UgZXZlbnQgbGlzdGVuZXIgaGFzIHNldCB0aGlzLm9uc3VjY2Vzc1xuICAgICAgICBvbmVycm9yID0gdGhpcy5vbmVycm9yOyAvLyBJbiBjYXNlIGV2ZW50IGxpc3RlbmVyIGhhcyBzZXQgdGhpcy5vbmVycm9yXG4gICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKG9uc3VjY2VzcykgdGhpcy5vbnN1Y2Nlc3MgPSB0aGlzLm9uc3VjY2VzcyA/IGNhbGxCb3RoKG9uc3VjY2VzcywgdGhpcy5vbnN1Y2Nlc3MpIDogb25zdWNjZXNzO1xuICAgICAgICBpZiAob25lcnJvcikgdGhpcy5vbmVycm9yID0gdGhpcy5vbmVycm9yID8gY2FsbEJvdGgob25lcnJvciwgdGhpcy5vbmVycm9yKSA6IG9uZXJyb3I7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaG9va1VwZGF0aW5nQ2hhaW4oZjEsIGYyKSB7XG4gICAgaWYgKGYxID09PSBub3ApIHJldHVybiBmMjtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1vZGlmaWNhdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlcyA9IGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGV4dGVuZChtb2RpZmljYXRpb25zLCByZXMpOyAvLyBJZiBmMSByZXR1cm5zIG5ldyBtb2RpZmljYXRpb25zLCBleHRlbmQgY2FsbGVyJ3MgbW9kaWZpY2F0aW9ucyB3aXRoIHRoZSByZXN1bHQgYmVmb3JlIGNhbGxpbmcgbmV4dCBpbiBjaGFpbi5cbiAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLFxuICAgICAgICAgICAgLy8gSW4gY2FzZSBldmVudCBsaXN0ZW5lciBoYXMgc2V0IHRoaXMub25zdWNjZXNzXG4gICAgICAgIG9uZXJyb3IgPSB0aGlzLm9uZXJyb3I7IC8vIEluIGNhc2UgZXZlbnQgbGlzdGVuZXIgaGFzIHNldCB0aGlzLm9uZXJyb3JcbiAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSBudWxsO1xuICAgICAgICB0aGlzLm9uZXJyb3IgPSBudWxsO1xuICAgICAgICB2YXIgcmVzMiA9IGYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChvbnN1Y2Nlc3MpIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgaWYgKG9uZXJyb3IpIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICByZXR1cm4gcmVzID09PSB1bmRlZmluZWQgPyByZXMyID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiByZXMyIDogZXh0ZW5kKHJlcywgcmVzMik7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gcmV2ZXJzZVN0b3BwYWJsZUV2ZW50Q2hhaW4oZjEsIGYyKSB7XG4gICAgaWYgKGYxID09PSBub3ApIHJldHVybiBmMjtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuXG5cbmZ1bmN0aW9uIHByb21pc2FibGVDaGFpbihmMSwgZjIpIHtcbiAgICBpZiAoZjEgPT09IG5vcCkgcmV0dXJuIGYyO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXMgPSBmMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAocmVzICYmIHR5cGVvZiByZXMudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdmFyIHRoaXogPSB0aGlzLFxuICAgICAgICAgICAgICAgIGkgPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIH1yZXR1cm4gcmVzLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmMi5hcHBseSh0aGl6LCBhcmdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8vIEJ5IGRlZmF1bHQsIGRlYnVnIHdpbGwgYmUgdHJ1ZSBvbmx5IGlmIHBsYXRmb3JtIGlzIGEgd2ViIHBsYXRmb3JtIGFuZCBpdHMgcGFnZSBpcyBzZXJ2ZWQgZnJvbSBsb2NhbGhvc3QuXG4vLyBXaGVuIGRlYnVnID0gdHJ1ZSwgZXJyb3IncyBzdGFja3Mgd2lsbCBjb250YWluIGFzeW5jcm9uaWMgbG9uZyBzdGFja3MuXG52YXIgZGVidWcgPSB0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnICYmXG4vLyBCeSBkZWZhdWx0LCB1c2UgZGVidWcgbW9kZSBpZiBzZXJ2ZWQgZnJvbSBsb2NhbGhvc3QuXG4vXihodHRwfGh0dHBzKTpcXC9cXC8obG9jYWxob3N0fDEyN1xcLjBcXC4wXFwuMSkvLnRlc3QobG9jYXRpb24uaHJlZik7XG5cbmZ1bmN0aW9uIHNldERlYnVnKHZhbHVlLCBmaWx0ZXIpIHtcbiAgICBkZWJ1ZyA9IHZhbHVlO1xuICAgIGxpYnJhcnlGaWx0ZXIgPSBmaWx0ZXI7XG59XG5cbnZhciBsaWJyYXJ5RmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cnVlO1xufTtcblxudmFyIE5FRURTX1RIUk9XX0ZPUl9TVEFDSyA9ICFuZXcgRXJyb3IoXCJcIikuc3RhY2s7XG5cbmZ1bmN0aW9uIGdldEVycm9yV2l0aFN0YWNrKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKE5FRURTX1RIUk9XX0ZPUl9TVEFDSykgdHJ5IHtcbiAgICAgICAgLy8gRG9pbmcgc29tZXRoaW5nIG5hdWdodHkgaW4gc3RyaWN0IG1vZGUgaGVyZSB0byB0cmlnZ2VyIGEgc3BlY2lmaWMgZXJyb3JcbiAgICAgICAgLy8gdGhhdCBjYW4gYmUgZXhwbGljaXRlbHkgaWdub3JlZCBpbiBkZWJ1Z2dlcidzIGV4Y2VwdGlvbiBzZXR0aW5ncy5cbiAgICAgICAgLy8gSWYgd2UnZCBqdXN0IHRocm93IG5ldyBFcnJvcigpIGhlcmUsIElFJ3MgZGVidWdnZXIncyBleGNlcHRpb24gc2V0dGluZ3NcbiAgICAgICAgLy8gd2lsbCBqdXN0IGNvbnNpZGVyIGl0IGFzIFwiZXhjZXB0aW9uIHRocm93biBieSBqYXZhc2NyaXB0IGNvZGVcIiB3aGljaCBpc1xuICAgICAgICAvLyBzb21ldGhpbmcgeW91IHdvdWxkbid0IHdhbnQgaXQgdG8gaWdub3JlLlxuICAgICAgICBnZXRFcnJvcldpdGhTdGFjay5hcmd1bWVudHM7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpOyAvLyBGYWxsYmFjayBpZiBhYm92ZSBsaW5lIGRvbid0IHRocm93LlxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRXJyb3IoKTtcbn1cblxuZnVuY3Rpb24gcHJldHR5U3RhY2soZXhjZXB0aW9uLCBudW1JZ25vcmVkRnJhbWVzKSB7XG4gICAgdmFyIHN0YWNrID0gZXhjZXB0aW9uLnN0YWNrO1xuICAgIGlmICghc3RhY2spIHJldHVybiBcIlwiO1xuICAgIG51bUlnbm9yZWRGcmFtZXMgPSBudW1JZ25vcmVkRnJhbWVzIHx8IDA7XG4gICAgaWYgKHN0YWNrLmluZGV4T2YoZXhjZXB0aW9uLm5hbWUpID09PSAwKSBudW1JZ25vcmVkRnJhbWVzICs9IChleGNlcHRpb24ubmFtZSArIGV4Y2VwdGlvbi5tZXNzYWdlKS5zcGxpdCgnXFxuJykubGVuZ3RoO1xuICAgIHJldHVybiBzdGFjay5zcGxpdCgnXFxuJykuc2xpY2UobnVtSWdub3JlZEZyYW1lcykuZmlsdGVyKGxpYnJhcnlGaWx0ZXIpLm1hcChmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICAgICAgcmV0dXJuIFwiXFxuXCIgKyBmcmFtZTtcbiAgICB9KS5qb2luKCcnKTtcbn1cblxuZnVuY3Rpb24gZGVwcmVjYXRlZCh3aGF0LCBmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybih3aGF0ICsgXCIgaXMgZGVwcmVjYXRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kZmFobGFuZGVyL0RleGllLmpzL3dpa2kvRGVwcmVjYXRpb25zLiBcIiArIHByZXR0eVN0YWNrKGdldEVycm9yV2l0aFN0YWNrKCksIDEpKTtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxudmFyIGRleGllRXJyb3JOYW1lcyA9IFsnTW9kaWZ5JywgJ0J1bGsnLCAnT3BlbkZhaWxlZCcsICdWZXJzaW9uQ2hhbmdlJywgJ1NjaGVtYScsICdVcGdyYWRlJywgJ0ludmFsaWRUYWJsZScsICdNaXNzaW5nQVBJJywgJ05vU3VjaERhdGFiYXNlJywgJ0ludmFsaWRBcmd1bWVudCcsICdTdWJUcmFuc2FjdGlvbicsICdVbnN1cHBvcnRlZCcsICdJbnRlcm5hbCcsICdEYXRhYmFzZUNsb3NlZCcsICdJbmNvbXBhdGlibGVQcm9taXNlJ107XG5cbnZhciBpZGJEb21FcnJvck5hbWVzID0gWydVbmtub3duJywgJ0NvbnN0cmFpbnQnLCAnRGF0YScsICdUcmFuc2FjdGlvbkluYWN0aXZlJywgJ1JlYWRPbmx5JywgJ1ZlcnNpb24nLCAnTm90Rm91bmQnLCAnSW52YWxpZFN0YXRlJywgJ0ludmFsaWRBY2Nlc3MnLCAnQWJvcnQnLCAnVGltZW91dCcsICdRdW90YUV4Y2VlZGVkJywgJ1N5bnRheCcsICdEYXRhQ2xvbmUnXTtcblxudmFyIGVycm9yTGlzdCA9IGRleGllRXJyb3JOYW1lcy5jb25jYXQoaWRiRG9tRXJyb3JOYW1lcyk7XG5cbnZhciBkZWZhdWx0VGV4dHMgPSB7XG4gICAgVmVyc2lvbkNoYW5nZWQ6IFwiRGF0YWJhc2UgdmVyc2lvbiBjaGFuZ2VkIGJ5IG90aGVyIGRhdGFiYXNlIGNvbm5lY3Rpb25cIixcbiAgICBEYXRhYmFzZUNsb3NlZDogXCJEYXRhYmFzZSBoYXMgYmVlbiBjbG9zZWRcIixcbiAgICBBYm9ydDogXCJUcmFuc2FjdGlvbiBhYm9ydGVkXCIsXG4gICAgVHJhbnNhY3Rpb25JbmFjdGl2ZTogXCJUcmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBjb21wbGV0ZWQgb3IgZmFpbGVkXCJcbn07XG5cbi8vXG4vLyBEZXhpZUVycm9yIC0gYmFzZSBjbGFzcyBvZiBhbGwgb3V0IGV4Y2VwdGlvbnMuXG4vL1xuZnVuY3Rpb24gRGV4aWVFcnJvcihuYW1lLCBtc2cpIHtcbiAgICAvLyBSZWFzb24gd2UgZG9uJ3QgdXNlIEVTNiBjbGFzc2VzIGlzIGJlY2F1c2U6XG4gICAgLy8gMS4gSXQgYmxvYXRzIHRyYW5zcGlsZWQgY29kZSBhbmQgaW5jcmVhc2VzIHNpemUgb2YgbWluaWZpZWQgY29kZS5cbiAgICAvLyAyLiBJdCBkb2Vzbid0IGdpdmUgdXMgbXVjaCBpbiB0aGlzIGNhc2UuXG4gICAgLy8gMy4gSXQgd291bGQgcmVxdWlyZSBzdWIgY2xhc3NlcyB0byBjYWxsIHN1cGVyKCksIHdoaWNoXG4gICAgLy8gICAgaXMgbm90IG5lZWRlZCB3aGVuIGRlcml2aW5nIGZyb20gRXJyb3IuXG4gICAgdGhpcy5fZSA9IGdldEVycm9yV2l0aFN0YWNrKCk7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtc2c7XG59XG5cbmRlcml2ZShEZXhpZUVycm9yKS5mcm9tKEVycm9yKS5leHRlbmQoe1xuICAgIHN0YWNrOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YWNrIHx8ICh0aGlzLl9zdGFjayA9IHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZSArIHByZXR0eVN0YWNrKHRoaXMuX2UsIDIpKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gZ2V0TXVsdGlFcnJvck1lc3NhZ2UobXNnLCBmYWlsdXJlcykge1xuICAgIHJldHVybiBtc2cgKyBcIi4gRXJyb3JzOiBcIiArIGZhaWx1cmVzLm1hcChmdW5jdGlvbiAoZikge1xuICAgICAgICByZXR1cm4gZi50b1N0cmluZygpO1xuICAgIH0pLmZpbHRlcihmdW5jdGlvbiAodiwgaSwgcykge1xuICAgICAgICByZXR1cm4gcy5pbmRleE9mKHYpID09PSBpO1xuICAgIH0pIC8vIE9ubHkgdW5pcXVlIGVycm9yIHN0cmluZ3NcbiAgICAuam9pbignXFxuJyk7XG59XG5cbi8vXG4vLyBNb2RpZnlFcnJvciAtIHRocm93biBpbiBXcml0ZWFibGVDb2xsZWN0aW9uLm1vZGlmeSgpXG4vLyBTcGVjaWZpYyBjb25zdHJ1Y3RvciBiZWNhdXNlIGl0IGNvbnRhaW5zIG1lbWJlcnMgZmFpbHVyZXMgYW5kIGZhaWxlZEtleXMuXG4vL1xuZnVuY3Rpb24gTW9kaWZ5RXJyb3IobXNnLCBmYWlsdXJlcywgc3VjY2Vzc0NvdW50LCBmYWlsZWRLZXlzKSB7XG4gICAgdGhpcy5fZSA9IGdldEVycm9yV2l0aFN0YWNrKCk7XG4gICAgdGhpcy5mYWlsdXJlcyA9IGZhaWx1cmVzO1xuICAgIHRoaXMuZmFpbGVkS2V5cyA9IGZhaWxlZEtleXM7XG4gICAgdGhpcy5zdWNjZXNzQ291bnQgPSBzdWNjZXNzQ291bnQ7XG59XG5kZXJpdmUoTW9kaWZ5RXJyb3IpLmZyb20oRGV4aWVFcnJvcik7XG5cbmZ1bmN0aW9uIEJ1bGtFcnJvcihtc2csIGZhaWx1cmVzKSB7XG4gICAgdGhpcy5fZSA9IGdldEVycm9yV2l0aFN0YWNrKCk7XG4gICAgdGhpcy5uYW1lID0gXCJCdWxrRXJyb3JcIjtcbiAgICB0aGlzLmZhaWx1cmVzID0gZmFpbHVyZXM7XG4gICAgdGhpcy5tZXNzYWdlID0gZ2V0TXVsdGlFcnJvck1lc3NhZ2UobXNnLCBmYWlsdXJlcyk7XG59XG5kZXJpdmUoQnVsa0Vycm9yKS5mcm9tKERleGllRXJyb3IpO1xuXG4vL1xuLy9cbi8vIER5bmFtaWNhbGx5IGdlbmVyYXRlIGVycm9yIG5hbWVzIGFuZCBleGNlcHRpb24gY2xhc3NlcyBiYXNlZFxuLy8gb24gdGhlIG5hbWVzIGluIGVycm9yTGlzdC5cbi8vXG4vL1xuXG4vLyBNYXAgb2Yge0Vycm9yTmFtZSAtPiBFcnJvck5hbWUgKyBcIkVycm9yXCJ9XG52YXIgZXJybmFtZXMgPSBlcnJvckxpc3QucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHtcbiAgICByZXR1cm4gb2JqW25hbWVdID0gbmFtZSArIFwiRXJyb3JcIiwgb2JqO1xufSwge30pO1xuXG4vLyBOZWVkIGFuIGFsaWFzIGZvciBEZXhpZUVycm9yIGJlY2F1c2Ugd2UncmUgZ29ubmEgY3JlYXRlIHN1YmNsYXNzZXMgd2l0aCB0aGUgc2FtZSBuYW1lLlxudmFyIEJhc2VFeGNlcHRpb24gPSBEZXhpZUVycm9yO1xuLy8gTWFwIG9mIHtFcnJvck5hbWUgLT4gZXhjZXB0aW9uIGNvbnN0cnVjdG9yfVxudmFyIGV4Y2VwdGlvbnMgPSBlcnJvckxpc3QucmVkdWNlKGZ1bmN0aW9uIChvYmosIG5hbWUpIHtcbiAgICAvLyBMZXQgdGhlIG5hbWUgYmUgXCJEZXhpZUVycm9yXCIgYmVjYXVzZSB0aGlzIG5hbWUgbWF5XG4gICAgLy8gYmUgc2hvd24gaW4gY2FsbCBzdGFjayBhbmQgd2hlbiBkZWJ1Z2dpbmcuIERleGllRXJyb3IgaXNcbiAgICAvLyB0aGUgbW9zdCB0cnVlIG5hbWUgYmVjYXVzZSBpdCBkZXJpdmVzIGZyb20gRGV4aWVFcnJvcixcbiAgICAvLyBhbmQgd2UgY2Fubm90IGNoYW5nZSBGdW5jdGlvbi5uYW1lIHByb2dyYW1hdGljYWxseSB3aXRob3V0XG4gICAgLy8gZHluYW1pY2FsbHkgY3JlYXRlIGEgRnVuY3Rpb24gb2JqZWN0LCB3aGljaCB3b3VsZCBiZSBjb25zaWRlcmVkXG4gICAgLy8gJ2V2YWwtZXZpbCcuXG4gICAgdmFyIGZ1bGxOYW1lID0gbmFtZSArIFwiRXJyb3JcIjtcbiAgICBmdW5jdGlvbiBEZXhpZUVycm9yKG1zZ09ySW5uZXIsIGlubmVyKSB7XG4gICAgICAgIHRoaXMuX2UgPSBnZXRFcnJvcldpdGhTdGFjaygpO1xuICAgICAgICB0aGlzLm5hbWUgPSBmdWxsTmFtZTtcbiAgICAgICAgaWYgKCFtc2dPcklubmVyKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBkZWZhdWx0VGV4dHNbbmFtZV0gfHwgZnVsbE5hbWU7XG4gICAgICAgICAgICB0aGlzLmlubmVyID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbXNnT3JJbm5lciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1zZ09ySW5uZXI7XG4gICAgICAgICAgICB0aGlzLmlubmVyID0gaW5uZXIgfHwgbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbXNnT3JJbm5lciA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1zZ09ySW5uZXIubmFtZSArICcgJyArIG1zZ09ySW5uZXIubWVzc2FnZTtcbiAgICAgICAgICAgIHRoaXMuaW5uZXIgPSBtc2dPcklubmVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlcml2ZShEZXhpZUVycm9yKS5mcm9tKEJhc2VFeGNlcHRpb24pO1xuICAgIG9ialtuYW1lXSA9IERleGllRXJyb3I7XG4gICAgcmV0dXJuIG9iajtcbn0sIHt9KTtcblxuLy8gVXNlIEVDTUFTQ1JJUFQgc3RhbmRhcmQgZXhjZXB0aW9ucyB3aGVyZSBhcHBsaWNhYmxlOlxuZXhjZXB0aW9ucy5TeW50YXggPSBTeW50YXhFcnJvcjtcbmV4Y2VwdGlvbnMuVHlwZSA9IFR5cGVFcnJvcjtcbmV4Y2VwdGlvbnMuUmFuZ2UgPSBSYW5nZUVycm9yO1xuXG52YXIgZXhjZXB0aW9uTWFwID0gaWRiRG9tRXJyb3JOYW1lcy5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkge1xuICAgIG9ialtuYW1lICsgXCJFcnJvclwiXSA9IGV4Y2VwdGlvbnNbbmFtZV07XG4gICAgcmV0dXJuIG9iajtcbn0sIHt9KTtcblxuZnVuY3Rpb24gbWFwRXJyb3IoZG9tRXJyb3IsIG1lc3NhZ2UpIHtcbiAgICBpZiAoIWRvbUVycm9yIHx8IGRvbUVycm9yIGluc3RhbmNlb2YgRGV4aWVFcnJvciB8fCBkb21FcnJvciBpbnN0YW5jZW9mIFR5cGVFcnJvciB8fCBkb21FcnJvciBpbnN0YW5jZW9mIFN5bnRheEVycm9yIHx8ICFkb21FcnJvci5uYW1lIHx8ICFleGNlcHRpb25NYXBbZG9tRXJyb3IubmFtZV0pIHJldHVybiBkb21FcnJvcjtcbiAgICB2YXIgcnYgPSBuZXcgZXhjZXB0aW9uTWFwW2RvbUVycm9yLm5hbWVdKG1lc3NhZ2UgfHwgZG9tRXJyb3IubWVzc2FnZSwgZG9tRXJyb3IpO1xuICAgIGlmIChcInN0YWNrXCIgaW4gZG9tRXJyb3IpIHtcbiAgICAgICAgLy8gRGVyaXZlIHN0YWNrIGZyb20gaW5uZXIgZXhjZXB0aW9uIGlmIGl0IGhhcyBhIHN0YWNrXG4gICAgICAgIHNldFByb3AocnYsIFwic3RhY2tcIiwgeyBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbm5lci5zdGFjaztcbiAgICAgICAgICAgIH0gfSk7XG4gICAgfVxuICAgIHJldHVybiBydjtcbn1cblxudmFyIGZ1bGxOYW1lRXhjZXB0aW9ucyA9IGVycm9yTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkge1xuICAgIGlmIChbXCJTeW50YXhcIiwgXCJUeXBlXCIsIFwiUmFuZ2VcIl0uaW5kZXhPZihuYW1lKSA9PT0gLTEpIG9ialtuYW1lICsgXCJFcnJvclwiXSA9IGV4Y2VwdGlvbnNbbmFtZV07XG4gICAgcmV0dXJuIG9iajtcbn0sIHt9KTtcblxuZnVsbE5hbWVFeGNlcHRpb25zLk1vZGlmeUVycm9yID0gTW9kaWZ5RXJyb3I7XG5mdWxsTmFtZUV4Y2VwdGlvbnMuRGV4aWVFcnJvciA9IERleGllRXJyb3I7XG5mdWxsTmFtZUV4Y2VwdGlvbnMuQnVsa0Vycm9yID0gQnVsa0Vycm9yO1xuXG5mdW5jdGlvbiBFdmVudHMoY3R4KSB7XG4gICAgdmFyIGV2cyA9IHt9O1xuICAgIHZhciBydiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIC8vIFN1YnNjcmliZS4gSWYgYWRkaXRpb25hbCBhcmd1bWVudHMgdGhhbiBqdXN0IHRoZSBzdWJzY3JpYmVyIHdhcyBwcm92aWRlZCwgZm9yd2FyZCB0aGVtIGFzIHdlbGwuXG4gICAgICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgYXJncyA9IG5ldyBBcnJheShpIC0gMSk7XG4gICAgICAgICAgICB3aGlsZSAoLS1pKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICB9ZXZzW2V2ZW50TmFtZV0uc3Vic2NyaWJlLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXZlbnROYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gUmV0dXJuIGludGVyZmFjZSBhbGxvd2luZyB0byBmaXJlIG9yIHVuc3Vic2NyaWJlIGZyb20gZXZlbnRcbiAgICAgICAgICAgIHJldHVybiBldnNbZXZlbnROYW1lXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcnYuYWRkRXZlbnRUeXBlID0gYWRkO1xuXG4gICAgZm9yICh2YXIgaSA9IDEsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgIGFkZChhcmd1bWVudHNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBydjtcblxuICAgIGZ1bmN0aW9uIGFkZChldmVudE5hbWUsIGNoYWluRnVuY3Rpb24sIGRlZmF1bHRGdW5jdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGV2ZW50TmFtZSA9PT0gJ29iamVjdCcpIHJldHVybiBhZGRDb25maWd1cmVkRXZlbnRzKGV2ZW50TmFtZSk7XG4gICAgICAgIGlmICghY2hhaW5GdW5jdGlvbikgY2hhaW5GdW5jdGlvbiA9IHJldmVyc2VTdG9wcGFibGVFdmVudENoYWluO1xuICAgICAgICBpZiAoIWRlZmF1bHRGdW5jdGlvbikgZGVmYXVsdEZ1bmN0aW9uID0gbm9wO1xuXG4gICAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICAgICAgc3Vic2NyaWJlcnM6IFtdLFxuICAgICAgICAgICAgZmlyZTogZGVmYXVsdEZ1bmN0aW9uLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5zdWJzY3JpYmVycy5pbmRleE9mKGNiKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycy5wdXNoKGNiKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maXJlID0gY2hhaW5GdW5jdGlvbihjb250ZXh0LmZpcmUsIGNiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaWJlcnMgPSBjb250ZXh0LnN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuICE9PSBjYjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpcmUgPSBjb250ZXh0LnN1YnNjcmliZXJzLnJlZHVjZShjaGFpbkZ1bmN0aW9uLCBkZWZhdWx0RnVuY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBldnNbZXZlbnROYW1lXSA9IHJ2W2V2ZW50TmFtZV0gPSBjb250ZXh0O1xuICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRDb25maWd1cmVkRXZlbnRzKGNmZykge1xuICAgICAgICAvLyBldmVudHModGhpcywge3JlYWRpbmc6IFtmdW5jdGlvbkNoYWluLCBub3BdfSk7XG4gICAgICAgIGtleXMoY2ZnKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gY2ZnW2V2ZW50TmFtZV07XG4gICAgICAgICAgICBpZiAoaXNBcnJheShhcmdzKSkge1xuICAgICAgICAgICAgICAgIGFkZChldmVudE5hbWUsIGNmZ1tldmVudE5hbWVdWzBdLCBjZmdbZXZlbnROYW1lXVsxXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3MgPT09ICdhc2FwJykge1xuICAgICAgICAgICAgICAgIC8vIFJhdGhlciB0aGFuIGFwcHJvYWNoaW5nIGV2ZW50IHN1YnNjcmlwdGlvbiB1c2luZyBhIGZ1bmN0aW9uYWwgYXBwcm9hY2gsIHdlIGhlcmUgZG8gaXQgaW4gYSBmb3ItbG9vcCB3aGVyZSBzdWJzY3JpYmVyIGlzIGV4ZWN1dGVkIGluIGl0cyBvd24gc3RhY2tcbiAgICAgICAgICAgICAgICAvLyBlbmFibGluZyB0aGF0IGFueSBleGNlcHRpb24gdGhhdCBvY2N1ciB3b250IGRpc3R1cmIgdGhlIGluaXRpYXRvciBhbmQgYWxzbyBub3QgbmVzY2Vzc2FyeSBiZSBjYXRjaGVkIGFuZCBmb3Jnb3R0ZW4uXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBhZGQoZXZlbnROYW1lLCBtaXJyb3IsIGZ1bmN0aW9uIGZpcmUoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9wdGltYXphdGlvbi1zYWZlIGNsb25pbmcgb2YgYXJndW1lbnRzIGludG8gYXJncy5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IG5ldyBBcnJheShpKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBBbGwgZWFjaCBzdWJzY3JpYmVyOlxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc2FwKGZ1bmN0aW9uIGZpcmVFdmVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJJbnZhbGlkIGV2ZW50IGNvbmZpZ1wiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vL1xuLy8gUHJvbWlzZSBDbGFzcyBmb3IgRGV4aWUgbGlicmFyeVxuLy9cbi8vIEkgc3RhcnRlZCBvdXQgd3JpdGluZyB0aGlzIFByb21pc2UgY2xhc3MgYnkgY29weWluZyBwcm9taXNlLWxpZ2h0IChodHRwczovL2dpdGh1Yi5jb20vdGF5bG9yaGFrZXMvcHJvbWlzZS1saWdodCkgYnlcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YXlsb3JoYWtlcyAtIGFuIEErIGFuZCBFQ01BU0NSSVBUIDYgY29tcGxpYW50IFByb21pc2UgaW1wbGVtZW50YXRpb24uXG4vL1xuLy8gTW9kaWZpY2F0aW9ucyBuZWVkZWQgdG8gYmUgZG9uZSB0byBzdXBwb3J0IGluZGV4ZWREQiBiZWNhdXNlIGl0IHdvbnQgYWNjZXB0IHNldFRpbWVvdXQoKVxuLy8gKFNlZSBkaXNjdXNzaW9uOiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYy9pc3N1ZXMvNDUpIC5cbi8vIFRoaXMgdG9waWMgd2FzIGFsc28gZGlzY3Vzc2VkIGluIHRoZSBmb2xsb3dpbmcgdGhyZWFkOiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYy9pc3N1ZXMvNDVcbi8vXG4vLyBUaGlzIGltcGxlbWVudGF0aW9uIHdpbGwgbm90IHVzZSBzZXRUaW1lb3V0IG9yIHNldEltbWVkaWF0ZSB3aGVuIGl0J3Mgbm90IG5lZWRlZC4gVGhlIGJlaGF2aW9yIGlzIDEwMCUgUHJvbWlzZS9BKyBjb21wbGlhbnQgc2luY2Vcbi8vIHRoZSBjYWxsZXIgb2YgbmV3IFByb21pc2UoKSBjYW4gYmUgY2VydGFpbiB0aGF0IHRoZSBwcm9taXNlIHdvbnQgYmUgdHJpZ2dlcmVkIHRoZSBsaW5lcyBhZnRlciBjb25zdHJ1Y3RpbmcgdGhlIHByb21pc2UuXG4vL1xuLy8gSW4gcHJldmlvdXMgdmVyc2lvbnMgdGhpcyB3YXMgZml4ZWQgYnkgbm90IGNhbGxpbmcgc2V0VGltZW91dCB3aGVuIGtub3dpbmcgdGhhdCB0aGUgcmVzb2x2ZSgpIG9yIHJlamVjdCgpIGNhbWUgZnJvbSBhbm90aGVyXG4vLyB0aWNrLiBJbiBEZXhpZSB2MS40LjAsIEkndmUgcmV3cml0dGVuIHRoZSBQcm9taXNlIGNsYXNzIGVudGlyZWx5LiBKdXN0IHNvbWUgZnJhZ21lbnRzIG9mIHByb21pc2UtbGlnaHQgaXMgbGVmdC4gSSB1c2Vcbi8vIGFub3RoZXIgc3RyYXRlZ3kgbm93IHRoYXQgc2ltcGxpZmllcyBldmVyeXRoaW5nIGEgbG90OiB0byBhbHdheXMgZXhlY3V0ZSBjYWxsYmFja3MgaW4gYSBuZXcgdGljaywgYnV0IGhhdmUgYW4gb3duIG1pY3JvVGlja1xuLy8gZW5naW5lIHRoYXQgaXMgdXNlZCBpbnN0ZWFkIG9mIHNldEltbWVkaWF0ZSgpIG9yIHNldFRpbWVvdXQoKS5cbi8vIFByb21pc2UgY2xhc3MgaGFzIGFsc28gYmVlbiBvcHRpbWl6ZWQgYSBsb3Qgd2l0aCBpbnNwaXJhdGlvbiBmcm9tIGJsdWViaXJkIC0gdG8gYXZvaWQgY2xvc3VyZXMgYXMgbXVjaCBhcyBwb3NzaWJsZS5cbi8vIEFsc28gd2l0aCBpbnNwaXJhdGlvbiBmcm9tIGJsdWViaXJkLCBhc3luY3JvbmljIHN0YWNrcyBpbiBkZWJ1ZyBtb2RlLlxuLy9cbi8vIFNwZWNpZmljIG5vbi1zdGFuZGFyZCBmZWF0dXJlcyBvZiB0aGlzIFByb21pc2UgY2xhc3M6XG4vLyAqIEFzeW5jIHN0YXRpYyBjb250ZXh0IHN1cHBvcnQgKFByb21pc2UuUFNEKVxuLy8gKiBQcm9taXNlLmZvbGxvdygpIG1ldGhvZCBidWlsdCB1cG9uIFBTRCwgdGhhdCBhbGxvd3MgdXNlciB0byB0cmFjayBhbGwgcHJvbWlzZXMgY3JlYXRlZCBmcm9tIGN1cnJlbnQgc3RhY2sgZnJhbWVcbi8vICAgYW5kIGJlbG93ICsgYWxsIHByb21pc2VzIHRoYXQgdGhvc2UgcHJvbWlzZXMgY3JlYXRlcyBvciBhd2FpdHMuXG4vLyAqIERldGVjdCBhbnkgdW5oYW5kbGVkIHByb21pc2UgaW4gYSBQU0Qtc2NvcGUgKFBTRC5vbnVuaGFuZGxlZCkuIFxuLy9cbi8vIERhdmlkIEZhaGxhbmRlciwgaHR0cHM6Ly9naXRodWIuY29tL2RmYWhsYW5kZXJcbi8vXG5cbi8vIEp1c3QgYSBwb2ludGVyIHRoYXQgb25seSB0aGlzIG1vZHVsZSBrbm93cyBhYm91dC5cbi8vIFVzZWQgaW4gUHJvbWlzZSBjb25zdHJ1Y3RvciB0byBlbXVsYXRlIGEgcHJpdmF0ZSBjb25zdHJ1Y3Rvci5cbnZhciBJTlRFUk5BTCA9IHt9O1xuXG4vLyBBc3luYyBzdGFja3MgKGxvbmcgc3RhY2tzKSBtdXN0IG5vdCBncm93IGluZmluaXRlbHkuXG52YXIgTE9OR19TVEFDS1NfQ0xJUF9MSU1JVCA9IDEwMDtcbnZhciBNQVhfTE9OR19TVEFDS1MgPSAyMDtcbnZhciBzdGFja19iZWluZ19nZW5lcmF0ZWQgPSBmYWxzZTtcblxuLyogVGhlIGRlZmF1bHQgXCJuZXh0VGlja1wiIGZ1bmN0aW9uIHVzZWQgb25seSBmb3IgdGhlIHZlcnkgZmlyc3QgcHJvbWlzZSBpbiBhIHByb21pc2UgY2hhaW4uXHJcbiAgIEFzIHNvb24gYXMgdGhlbiBwcm9taXNlIGlzIHJlc29sdmVkIG9yIHJlamVjdGVkLCBhbGwgbmV4dCB0YXNrcyB3aWxsIGJlIGV4ZWN1dGVkIGluIG1pY3JvIHRpY2tzXHJcbiAgIGVtdWxhdGVkIGluIHRoaXMgbW9kdWxlLiBGb3IgaW5kZXhlZERCIGNvbXBhdGliaWxpdHksIHRoaXMgbWVhbnMgdGhhdCBldmVyeSBtZXRob2QgbmVlZHMgdG8gXHJcbiAgIGV4ZWN1dGUgYXQgbGVhc3Qgb25lIHByb21pc2UgYmVmb3JlIGRvaW5nIGFuIGluZGV4ZWREQiBvcGVyYXRpb24uIERleGllIHdpbGwgYWx3YXlzIGNhbGwgXHJcbiAgIGRiLnJlYWR5KCkudGhlbigpIGZvciBldmVyeSBvcGVyYXRpb24gdG8gbWFrZSBzdXJlIHRoZSBpbmRleGVkREIgZXZlbnQgaXMgc3RhcnRlZCBpbiBhblxyXG4gICBlbXVsYXRlZCBtaWNybyB0aWNrLlxyXG4qL1xudmFyIHNjaGVkdWxlUGh5c2ljYWxUaWNrID0gX2dsb2JhbC5zZXRJbW1lZGlhdGUgP1xuLy8gc2V0SW1tZWRpYXRlIHN1cHBvcnRlZC4gVGhvc2UgbW9kZXJuIHBsYXRmb3JtcyBhbHNvIHN1cHBvcnRzIEZ1bmN0aW9uLmJpbmQoKS5cbnNldEltbWVkaWF0ZS5iaW5kKG51bGwsIHBoeXNpY2FsVGljaykgOiBfZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgP1xuLy8gTXV0YXRpb25PYnNlcnZlciBzdXBwb3J0ZWRcbmZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGlkZGVuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBoeXNpY2FsVGljaygpO1xuICAgICAgICBoaWRkZW5EaXYgPSBudWxsO1xuICAgIH0pLm9ic2VydmUoaGlkZGVuRGl2LCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG4gICAgaGlkZGVuRGl2LnNldEF0dHJpYnV0ZSgnaScsICcxJyk7XG59IDpcbi8vIE5vIHN1cHBvcnQgZm9yIHNldEltbWVkaWF0ZSBvciBNdXRhdGlvbk9ic2VydmVyLiBObyB3b3JyeSwgc2V0VGltZW91dCBpcyBvbmx5IGNhbGxlZFxuLy8gb25jZSB0aW1lLiBFdmVyeSB0aWNrIHRoYXQgZm9sbG93cyB3aWxsIGJlIG91ciBlbXVsYXRlZCBtaWNybyB0aWNrLlxuLy8gQ291bGQgaGF2ZSB1c2VzIHNldFRpbWVvdXQuYmluZChudWxsLCAwLCBwaHlzaWNhbFRpY2spIGlmIGl0IHdhc250IGZvciB0aGF0IEZGMTMgYW5kIGJlbG93IGhhcyBhIGJ1ZyBcbmZ1bmN0aW9uICgpIHtcbiAgICBzZXRUaW1lb3V0KHBoeXNpY2FsVGljaywgMCk7XG59O1xuXG4vLyBDb25maWZ1cmFibGUgdGhyb3VnaCBQcm9taXNlLnNjaGVkdWxlci5cbi8vIERvbid0IGV4cG9ydCBiZWNhdXNlIGl0IHdvdWxkIGJlIHVuc2FmZSB0byBsZXQgdW5rbm93blxuLy8gY29kZSBjYWxsIGl0IHVubGVzcyB0aGV5IGRvIHRyeS4uY2F0Y2ggd2l0aGluIHRoZWlyIGNhbGxiYWNrLlxuLy8gVGhpcyBmdW5jdGlvbiBjYW4gYmUgcmV0cmlldmVkIHRocm91Z2ggZ2V0dGVyIG9mIFByb21pc2Uuc2NoZWR1bGVyIHRob3VnaCxcbi8vIGJ1dCB1c2VycyBtdXN0IG5vdCBkbyBQcm9taXNlLnNjaGVkdWxlciAobXlGdW5jVGhhdFRocm93cyBleGNlcHRpb24pIVxudmFyIGFzYXAkMSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgYXJncykge1xuICAgIG1pY3JvdGlja1F1ZXVlLnB1c2goW2NhbGxiYWNrLCBhcmdzXSk7XG4gICAgaWYgKG5lZWRzTmV3UGh5c2ljYWxUaWNrKSB7XG4gICAgICAgIHNjaGVkdWxlUGh5c2ljYWxUaWNrKCk7XG4gICAgICAgIG5lZWRzTmV3UGh5c2ljYWxUaWNrID0gZmFsc2U7XG4gICAgfVxufTtcblxudmFyIGlzT3V0c2lkZU1pY3JvVGljayA9IHRydWU7XG52YXIgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSB0cnVlO1xudmFyIHVuaGFuZGxlZEVycm9ycyA9IFtdO1xudmFyIHJlamVjdGluZ0Vycm9ycyA9IFtdO1xudmFyIGN1cnJlbnRGdWxmaWxsZXIgPSBudWxsO1xudmFyIHJlamVjdGlvbk1hcHBlciA9IG1pcnJvcjsgLy8gUmVtb3ZlIGluIG5leHQgbWFqb3Igd2hlbiByZW1vdmluZyBlcnJvciBtYXBwaW5nIG9mIERPTUVycm9ycyBhbmQgRE9NRXhjZXB0aW9uc1xuXG52YXIgZ2xvYmFsUFNEID0ge1xuICAgIGdsb2JhbDogdHJ1ZSxcbiAgICByZWY6IDAsXG4gICAgdW5oYW5kbGVkczogW10sXG4gICAgb251bmhhbmRsZWQ6IGdsb2JhbEVycm9yLFxuICAgIC8vZW52OiBudWxsLCAvLyBXaWxsIGJlIHNldCB3aGVuZXZlciBsZWF2aW5nIGEgc2NvcGUgdXNpbmcgd3JhcHBlcnMuc25hcHNob3QoKVxuICAgIGZpbmFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5oYW5kbGVkcy5mb3JFYWNoKGZ1bmN0aW9uICh1aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBnbG9iYWxFcnJvcih1aFswXSwgdWhbMV0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxudmFyIFBTRCA9IGdsb2JhbFBTRDtcblxudmFyIG1pY3JvdGlja1F1ZXVlID0gW107IC8vIENhbGxiYWNrcyB0byBjYWxsIGluIHRoaXMgb3IgbmV4dCBwaHlzaWNhbCB0aWNrLlxudmFyIG51bVNjaGVkdWxlZENhbGxzID0gMDsgLy8gTnVtYmVyIG9mIGxpc3RlbmVyLWNhbGxzIGxlZnQgdG8gZG8gaW4gdGhpcyBwaHlzaWNhbCB0aWNrLlxudmFyIHRpY2tGaW5hbGl6ZXJzID0gW107IC8vIEZpbmFsaXplcnMgdG8gY2FsbCB3aGVuIHRoZXJlIGFyZSBubyBtb3JlIGFzeW5jIGNhbGxzIHNjaGVkdWxlZCB3aXRoaW4gY3VycmVudCBwaHlzaWNhbCB0aWNrLlxuXG4vLyBXcmFwcGVycyBhcmUgbm90IGJlaW5nIHVzZWQgeWV0LiBUaGVpciBmcmFtZXdvcmsgaXMgZnVuY3Rpb25pbmcgYW5kIGNhbiBiZSB1c2VkXG4vLyB0byByZXBsYWNlIGVudmlyb25tZW50IGR1cmluZyBhIFBTRCBzY29wZSAoYS5rLmEuICd6b25lJykuXG4vKiAqKktFRVAqKiBleHBvcnQgdmFyIHdyYXBwZXJzID0gKCgpID0+IHtcclxuICAgIHZhciB3cmFwcGVycyA9IFtdO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc25hcHNob3Q6ICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIGkgPSB3cmFwcGVycy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgQXJyYXkoaSk7XHJcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHJlc3VsdFtpXSA9IHdyYXBwZXJzW2ldLnNuYXBzaG90KCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXN0b3JlOiB2YWx1ZXMgPT4ge1xyXG4gICAgICAgICAgICB2YXIgaSA9IHdyYXBwZXJzLmxlbmd0aDtcclxuICAgICAgICAgICAgd2hpbGUgKGktLSkgd3JhcHBlcnNbaV0ucmVzdG9yZSh2YWx1ZXNbaV0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd3JhcDogKCkgPT4gd3JhcHBlcnMubWFwKHcgPT4gdy53cmFwKCkpLFxyXG4gICAgICAgIGFkZDogd3JhcHBlciA9PiB7XHJcbiAgICAgICAgICAgIHdyYXBwZXJzLnB1c2god3JhcHBlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkoKTtcclxuKi9cblxuZnVuY3Rpb24gUHJvbWlzZShmbikge1xuICAgIGlmICh0eXBlb2YgdGhpcyAhPT0gJ29iamVjdCcpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2VzIG11c3QgYmUgY29uc3RydWN0ZWQgdmlhIG5ldycpO1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMub251bmNhdGNoZWQgPSBub3A7IC8vIERlcHJlY2F0ZSBpbiBuZXh0IG1ham9yLiBOb3QgbmVlZGVkLiBCZXR0ZXIgdG8gdXNlIGdsb2JhbCBlcnJvciBoYW5kbGVyLlxuXG4gICAgLy8gQSBsaWJyYXJ5IG1heSBzZXQgYHByb21pc2UuX2xpYiA9IHRydWU7YCBhZnRlciBwcm9taXNlIGlzIGNyZWF0ZWQgdG8gbWFrZSByZXNvbHZlKCkgb3IgcmVqZWN0KClcbiAgICAvLyBleGVjdXRlIHRoZSBtaWNyb3Rhc2sgZW5naW5lIGltcGxpY2l0ZWx5IHdpdGhpbiB0aGUgY2FsbCB0byByZXNvbHZlKCkgb3IgcmVqZWN0KCkuXG4gICAgLy8gVG8gcmVtYWluIEErIGNvbXBsaWFudCwgYSBsaWJyYXJ5IG11c3Qgb25seSBzZXQgYF9saWI9dHJ1ZWAgaWYgaXQgY2FuIGd1YXJhbnRlZSB0aGF0IHRoZSBzdGFja1xuICAgIC8vIG9ubHkgY29udGFpbnMgbGlicmFyeSBjb2RlIHdoZW4gY2FsbGluZyByZXNvbHZlKCkgb3IgcmVqZWN0KCkuXG4gICAgLy8gUlVMRSBPRiBUSFVNQjogT05MWSBzZXQgX2xpYiA9IHRydWUgZm9yIHByb21pc2VzIGV4cGxpY2l0ZWx5IHJlc29sdmluZy9yZWplY3RpbmcgZGlyZWN0bHkgZnJvbVxuICAgIC8vIGdsb2JhbCBzY29wZSAoZXZlbnQgaGFuZGxlciwgdGltZXIgZXRjKSFcbiAgICB0aGlzLl9saWIgPSBmYWxzZTtcbiAgICAvLyBDdXJyZW50IGFzeW5jIHNjb3BlXG4gICAgdmFyIHBzZCA9IHRoaXMuX1BTRCA9IFBTRDtcblxuICAgIGlmIChkZWJ1Zykge1xuICAgICAgICB0aGlzLl9zdGFja0hvbGRlciA9IGdldEVycm9yV2l0aFN0YWNrKCk7XG4gICAgICAgIHRoaXMuX3ByZXYgPSBudWxsO1xuICAgICAgICB0aGlzLl9udW1QcmV2ID0gMDsgLy8gTnVtYmVyIG9mIHByZXZpb3VzIHByb21pc2VzIChmb3IgbG9uZyBzdGFja3MpXG4gICAgICAgIGxpbmtUb1ByZXZpb3VzUHJvbWlzZSh0aGlzLCBjdXJyZW50RnVsZmlsbGVyKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmIChmbiAhPT0gSU5URVJOQUwpIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIC8vIFByaXZhdGUgY29uc3RydWN0b3IgKElOVEVSTkFMLCBzdGF0ZSwgdmFsdWUpLlxuICAgICAgICAvLyBVc2VkIGludGVybmFsbHkgYnkgUHJvbWlzZS5yZXNvbHZlKCkgYW5kIFByb21pc2UucmVqZWN0KCkuXG4gICAgICAgIHRoaXMuX3N0YXRlID0gYXJndW1lbnRzWzFdO1xuICAgICAgICB0aGlzLl92YWx1ZSA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSBmYWxzZSkgaGFuZGxlUmVqZWN0aW9uKHRoaXMsIHRoaXMuX3ZhbHVlKTsgLy8gTWFwIGVycm9yLCBzZXQgc3RhY2sgYW5kIGFkZFBvc3NpYmx5VW5oYW5kbGVkRXJyb3IoKS5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3N0YXRlID0gbnVsbDsgLy8gbnVsbCAoPXBlbmRpbmcpLCBmYWxzZSAoPXJlamVjdGVkKSBvciB0cnVlICg9cmVzb2x2ZWQpXG4gICAgdGhpcy5fdmFsdWUgPSBudWxsOyAvLyBlcnJvciBvciByZXN1bHRcbiAgICArK3BzZC5yZWY7IC8vIFJlZmNvdW50aW5nIGN1cnJlbnQgc2NvcGVcbiAgICBleGVjdXRlUHJvbWlzZVRhc2sodGhpcywgZm4pO1xufVxuXG5wcm9wcyhQcm9taXNlLnByb3RvdHlwZSwge1xuXG4gICAgdGhlbjogZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHJ2ID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgcHJvcGFnYXRlVG9MaXN0ZW5lcihfdGhpcywgbmV3IExpc3RlbmVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXNvbHZlLCByZWplY3QpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRlYnVnICYmICghdGhpcy5fcHJldiB8fCB0aGlzLl9zdGF0ZSA9PT0gbnVsbCkgJiYgbGlua1RvUHJldmlvdXNQcm9taXNlKHJ2LCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH0sXG5cbiAgICBfdGhlbjogZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gICAgICAgIC8vIEEgbGl0dGxlIHRpbmllciB2ZXJzaW9uIG9mIHRoZW4oKSB0aGF0IGRvbid0IGhhdmUgdG8gY3JlYXRlIGEgcmVzdWx0aW5nIHByb21pc2UuXG4gICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIodGhpcywgbmV3IExpc3RlbmVyKG51bGwsIG51bGwsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSk7XG4gICAgfSxcblxuICAgIGNhdGNoOiBmdW5jdGlvbiAob25SZWplY3RlZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcbiAgICAgICAgLy8gRmlyc3QgYXJndW1lbnQgaXMgdGhlIEVycm9yIHR5cGUgdG8gY2F0Y2hcbiAgICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF0sXG4gICAgICAgICAgICBoYW5kbGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicgPyB0aGlzLnRoZW4obnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAvLyBDYXRjaGluZyBlcnJvcnMgYnkgaXRzIGNvbnN0cnVjdG9yIHR5cGUgKHNpbWlsYXIgdG8gamF2YSAvIGMrKyAvIGMjKVxuICAgICAgICAgICAgICAgIC8vIFNhbXBsZTogcHJvbWlzZS5jYXRjaChUeXBlRXJyb3IsIGZ1bmN0aW9uIChlKSB7IC4uLiB9KTtcbiAgICAgICAgICAgICAgICBlcnIgaW5zdGFuY2VvZiB0eXBlID8gaGFuZGxlcihlcnIpIDogUHJvbWlzZVJlamVjdChlcnIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9KSA6IHRoaXMudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIC8vIENhdGNoaW5nIGVycm9ycyBieSB0aGUgZXJyb3IubmFtZSBwcm9wZXJ0eS4gTWFrZXMgc2Vuc2UgZm9yIGluZGV4ZWREQiB3aGVyZSBlcnJvciB0eXBlXG4gICAgICAgICAgICAgICAgLy8gaXMgYWx3YXlzIERPTUVycm9yIGJ1dCB3aGVyZSBlLm5hbWUgdGVsbHMgdGhlIGFjdHVhbCBlcnJvciB0eXBlLlxuICAgICAgICAgICAgICAgIC8vIFNhbXBsZTogcHJvbWlzZS5jYXRjaCgnQ29uc3RyYWludEVycm9yJywgZnVuY3Rpb24gKGUpIHsgLi4uIH0pO1xuICAgICAgICAgICAgICAgIGVyciAmJiBlcnIubmFtZSA9PT0gdHlwZSA/IGhhbmRsZXIoZXJyKSA6IFByb21pc2VSZWplY3QoZXJyKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGZpbmFsbHk6IGZ1bmN0aW9uIChvbkZpbmFsbHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIG9uRmluYWxseSgpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBvbkZpbmFsbHkoKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlUmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBEZXByZWNhdGUgaW4gbmV4dCBtYWpvci4gTmVlZGVkIG9ubHkgZm9yIGRiLm9uLmVycm9yLlxuICAgIHVuY2F1Z2h0OiBmdW5jdGlvbiAodW5jYXVnaHRIYW5kbGVyKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIC8vIEJlIGJhY2t3YXJkIGNvbXBhdGlibGUgYW5kIHVzZSBcIm9udW5jYXRjaGVkXCIgYXMgdGhlIGV2ZW50IG5hbWUgb24gdGhpcy5cbiAgICAgICAgLy8gSGFuZGxlIG11bHRpcGxlIHN1YnNjcmliZXJzIHRocm91Z2ggcmV2ZXJzZVN0b3BwYWJsZUV2ZW50Q2hhaW4oKS4gSWYgYSBoYW5kbGVyIHJldHVybnMgYGZhbHNlYCwgYnViYmxpbmcgc3RvcHMuXG4gICAgICAgIHRoaXMub251bmNhdGNoZWQgPSByZXZlcnNlU3RvcHBhYmxlRXZlbnRDaGFpbih0aGlzLm9udW5jYXRjaGVkLCB1bmNhdWdodEhhbmRsZXIpO1xuICAgICAgICAvLyBJbiBjYXNlIGNhbGxlciBkb2VzIHRoaXMgb24gYW4gYWxyZWFkeSByZWplY3RlZCBwcm9taXNlLCBhc3N1bWUgY2FsbGVyIHdhbnRzIHRvIHBvaW50IG91dCB0aGUgZXJyb3IgdG8gdGhpcyBwcm9taXNlIGFuZCBub3RcbiAgICAgICAgLy8gYSBwcmV2aW91cyBwcm9taXNlLiBSZWFzb246IHRoZSBwcmV2b3VzIHByb21pc2UgbWF5IGxhY2sgb251bmNhdGNoZWQgaGFuZGxlci4gXG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gZmFsc2UgJiYgdW5oYW5kbGVkRXJyb3JzLmluZGV4T2YodGhpcykgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBSZXBsYWNlIHVuaGFuZGxlZCBlcnJvcidzIGRlc3RpbmFpb24gcHJvbWlzZSB3aXRoIHRoaXMgb25lIVxuICAgICAgICAgICAgdW5oYW5kbGVkRXJyb3JzLnNvbWUoZnVuY3Rpb24gKHAsIGksIGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcC5fdmFsdWUgPT09IF90aGlzMi5fdmFsdWUgJiYgKGxbaV0gPSBfdGhpczIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBBY3R1YWxseSB3ZSBkbyB0aGlzIHNoaXQgYmVjYXVzZSB3ZSBuZWVkIHRvIHN1cHBvcnQgZGIub24uZXJyb3IoKSBjb3JyZWN0bHkgZHVyaW5nIGRiLm9wZW4oKS4gSWYgd2UgZGVwcmVjYXRlIGRiLm9uLmVycm9yLCB3ZSBjb3VsZFxuICAgICAgICAgICAgLy8gdGFrZSBhd2F5IHRoaXMgcGllY2Ugb2YgY29kZSBhcyB3ZWxsIGFzIHRoZSBvbnVuY2F0Y2hlZCBhbmQgdW5jYXVnaHQoKSBtZXRob2QuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIHN0YWNrOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3N0YWNrKSByZXR1cm4gdGhpcy5fc3RhY2s7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0YWNrX2JlaW5nX2dlbmVyYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHN0YWNrcyA9IGdldFN0YWNrKHRoaXMsIFtdLCBNQVhfTE9OR19TVEFDS1MpO1xuICAgICAgICAgICAgICAgIHZhciBzdGFjayA9IHN0YWNrcy5qb2luKFwiXFxuRnJvbSBwcmV2aW91czogXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gbnVsbCkgdGhpcy5fc3RhY2sgPSBzdGFjazsgLy8gU3RhY2sgbWF5IGJlIHVwZGF0ZWQgb24gcmVqZWN0LlxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFjaztcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgc3RhY2tfYmVpbmdfZ2VuZXJhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZnVuY3Rpb24gTGlzdGVuZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHJlc29sdmUsIHJlamVjdCkge1xuICAgIHRoaXMub25GdWxmaWxsZWQgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IG51bGw7XG4gICAgdGhpcy5vblJlamVjdGVkID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicgPyBvblJlamVjdGVkIDogbnVsbDtcbiAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xuICAgIHRoaXMucHNkID0gUFNEO1xufVxuXG4vLyBQcm9taXNlIFN0YXRpYyBQcm9wZXJ0aWVzXG5wcm9wcyhQcm9taXNlLCB7XG4gICAgYWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBnZXRBcnJheU9mLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7IC8vIFN1cHBvcnRzIGl0ZXJhYmxlcywgaW1wbGljaXQgYXJndW1lbnRzIGFuZCBhcnJheS1saWtlLlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDApIHJlc29sdmUoW10pO1xuICAgICAgICAgICAgdmFyIHJlbWFpbmluZyA9IHZhbHVlcy5sZW5ndGg7XG4gICAgICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYSkudGhlbihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbaV0gPSB4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoISAtLXJlbWFpbmluZykgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSByZXR1cm4gdmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShJTlRFUk5BTCwgdHJ1ZSwgdmFsdWUpO1xuICAgIH0sXG5cbiAgICByZWplY3Q6IFByb21pc2VSZWplY3QsXG5cbiAgICByYWNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBnZXRBcnJheU9mLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgUFNEOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFBTRDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBQU0QgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBuZXdQU0Q6IG5ld1Njb3BlLFxuXG4gICAgdXNlUFNEOiB1c2VQU0QsXG5cbiAgICBzY2hlZHVsZXI6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXNhcCQxO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgYXNhcCQxID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVqZWN0aW9uTWFwcGVyOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbk1hcHBlcjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJlamVjdGlvbk1hcHBlciA9IHZhbHVlO1xuICAgICAgICB9IC8vIE1hcCByZWplY3QgZmFpbHVyZXNcbiAgICB9LFxuXG4gICAgZm9sbG93OiBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBzZCA9IFBTRDtcbiAgICAgICAgICAgICAgICBwc2QudW5oYW5kbGVkcyA9IFtdOyAvLyBGb3IgdW5oYW5kbGVkIHN0YW5kYXJkLSBvciAzcmQgcGFydHkgUHJvbWlzZXMuIENoZWNrZWQgYXQgcHNkLmZpbmFsaXplKClcbiAgICAgICAgICAgICAgICBwc2Qub251bmhhbmRsZWQgPSByZWplY3Q7IC8vIFRyaWdnZXJlZCBkaXJlY3RseSBvbiB1bmhhbmRsZWQgcHJvbWlzZXMgb2YgdGhpcyBsaWJyYXJ5LlxuICAgICAgICAgICAgICAgIHBzZC5maW5hbGl6ZSA9IGNhbGxCb3RoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVW5oYW5kbGVkIHN0YW5kYXJkIG9yIDNyZCBwYXJ0IHByb21pc2VzIGFyZSBwdXQgaW4gUFNELnVuaGFuZGxlZHMgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4YW1pbmVkIHVwb24gc2NvcGUgY29tcGxldGlvbiB3aGlsZSB1bmhhbmRsZWQgcmVqZWN0aW9ucyBpbiB0aGlzIFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCB0cmlnZ2VyIGRpcmVjdGx5IHRocm91Z2ggcHNkLm9udW5oYW5kbGVkXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9hdF9lbmRfb2ZfdGhpc19vcl9uZXh0X3BoeXNpY2FsX3RpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnVuaGFuZGxlZHMubGVuZ3RoID09PSAwID8gcmVzb2x2ZSgpIDogcmVqZWN0KF90aGlzMy51bmhhbmRsZWRzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgcHNkLmZpbmFsaXplKTtcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgfSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIG9uOiBFdmVudHMobnVsbCwgeyBcImVycm9yXCI6IFtyZXZlcnNlU3RvcHBhYmxlRXZlbnRDaGFpbiwgZGVmYXVsdEVycm9ySGFuZGxlcl0gLy8gRGVmYXVsdCB0byBkZWZhdWx0RXJyb3JIYW5kbGVyXG4gICAgfSlcblxufSk7XG5cbnZhciBQcm9taXNlT25FcnJvciA9IFByb21pc2Uub24uZXJyb3I7XG5Qcm9taXNlT25FcnJvci5zdWJzY3JpYmUgPSBkZXByZWNhdGVkKFwiUHJvbWlzZS5vbignZXJyb3InKVwiLCBQcm9taXNlT25FcnJvci5zdWJzY3JpYmUpO1xuUHJvbWlzZU9uRXJyb3IudW5zdWJzY3JpYmUgPSBkZXByZWNhdGVkKFwiUHJvbWlzZS5vbignZXJyb3InKS51bnN1YnNjcmliZVwiLCBQcm9taXNlT25FcnJvci51bnN1YnNjcmliZSk7XG5cbi8qKlxyXG4qIFRha2UgYSBwb3RlbnRpYWxseSBtaXNiZWhhdmluZyByZXNvbHZlciBmdW5jdGlvbiBhbmQgbWFrZSBzdXJlXHJcbiogb25GdWxmaWxsZWQgYW5kIG9uUmVqZWN0ZWQgYXJlIG9ubHkgY2FsbGVkIG9uY2UuXHJcbipcclxuKiBNYWtlcyBubyBndWFyYW50ZWVzIGFib3V0IGFzeW5jaHJvbnkuXHJcbiovXG5mdW5jdGlvbiBleGVjdXRlUHJvbWlzZVRhc2socHJvbWlzZSwgZm4pIHtcbiAgICAvLyBQcm9taXNlIFJlc29sdXRpb24gUHJvY2VkdXJlOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9taXNlcy1hcGx1cy9wcm9taXNlcy1zcGVjI3RoZS1wcm9taXNlLXJlc29sdXRpb24tcHJvY2VkdXJlXG4gICAgdHJ5IHtcbiAgICAgICAgZm4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gcHJvbWlzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQSBwcm9taXNlIGNhbm5vdCBiZSByZXNvbHZlZCB3aXRoIGl0c2VsZi4nKTtcbiAgICAgICAgICAgIHZhciBzaG91bGRFeGVjdXRlVGljayA9IHByb21pc2UuX2xpYiAmJiBiZWdpbk1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBleGVjdXRlUHJvbWlzZVRhc2socHJvbWlzZSwgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UgPyB2YWx1ZS5fdGhlbihyZXNvbHZlLCByZWplY3QpIDogdmFsdWUudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl9zdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVBbGxMaXN0ZW5lcnMocHJvbWlzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hvdWxkRXhlY3V0ZVRpY2spIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgIH0sIGhhbmRsZVJlamVjdGlvbi5iaW5kKG51bGwsIHByb21pc2UpKTsgLy8gSWYgRnVuY3Rpb24uYmluZCBpcyBub3Qgc3VwcG9ydGVkLiBFeGNlcHRpb24gaXMgaGFuZGxlZCBpbiBjYXRjaCBiZWxvd1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIGhhbmRsZVJlamVjdGlvbihwcm9taXNlLCBleCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVSZWplY3Rpb24ocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgcmVqZWN0aW5nRXJyb3JzLnB1c2gocmVhc29uKTtcbiAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IG51bGwpIHJldHVybjtcbiAgICB2YXIgc2hvdWxkRXhlY3V0ZVRpY2sgPSBwcm9taXNlLl9saWIgJiYgYmVnaW5NaWNyb1RpY2tTY29wZSgpO1xuICAgIHJlYXNvbiA9IHJlamVjdGlvbk1hcHBlcihyZWFzb24pO1xuICAgIHByb21pc2UuX3N0YXRlID0gZmFsc2U7XG4gICAgcHJvbWlzZS5fdmFsdWUgPSByZWFzb247XG4gICAgZGVidWcgJiYgcmVhc29uICE9PSBudWxsICYmIHR5cGVvZiByZWFzb24gPT09ICdvYmplY3QnICYmICFyZWFzb24uX3Byb21pc2UgJiYgdHJ5Q2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3JpZ1Byb3AgPSBnZXRQcm9wZXJ0eURlc2NyaXB0b3IocmVhc29uLCBcInN0YWNrXCIpO1xuICAgICAgICByZWFzb24uX3Byb21pc2UgPSBwcm9taXNlO1xuICAgICAgICBzZXRQcm9wKHJlYXNvbiwgXCJzdGFja1wiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2tfYmVpbmdfZ2VuZXJhdGVkID8gb3JpZ1Byb3AgJiYgKG9yaWdQcm9wLmdldCA/IG9yaWdQcm9wLmdldC5hcHBseShyZWFzb24pIDogb3JpZ1Byb3AudmFsdWUpIDogcHJvbWlzZS5zdGFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgLy8gQWRkIHRoZSBmYWlsdXJlIHRvIGEgbGlzdCBvZiBwb3NzaWJseSB1bmNhdWdodCBlcnJvcnNcbiAgICBhZGRQb3NzaWJseVVuaGFuZGxlZEVycm9yKHByb21pc2UpO1xuICAgIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKTtcbiAgICBpZiAoc2hvdWxkRXhlY3V0ZVRpY2spIGVuZE1pY3JvVGlja1Njb3BlKCk7XG59XG5cbmZ1bmN0aW9uIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKSB7XG4gICAgLy9kZWJ1ZyAmJiBsaW5rVG9QcmV2aW91c1Byb21pc2UocHJvbWlzZSk7XG4gICAgdmFyIGxpc3RlbmVycyA9IHByb21pc2UuX2xpc3RlbmVycztcbiAgICBwcm9taXNlLl9saXN0ZW5lcnMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIocHJvbWlzZSwgbGlzdGVuZXJzW2ldKTtcbiAgICB9XG4gICAgdmFyIHBzZCA9IHByb21pc2UuX1BTRDtcbiAgICAtLXBzZC5yZWYgfHwgcHNkLmZpbmFsaXplKCk7IC8vIGlmIHBzZC5yZWYgcmVhY2hlcyB6ZXJvLCBjYWxsIHBzZC5maW5hbGl6ZSgpO1xuICAgIGlmIChudW1TY2hlZHVsZWRDYWxscyA9PT0gMCkge1xuICAgICAgICAvLyBJZiBudW1TY2hlZHVsZWRDYWxscyBpcyAwLCBpdCBtZWFucyB0aGF0IG91ciBzdGFjayBpcyBub3QgaW4gYSBjYWxsYmFjayBvZiBhIHNjaGVkdWxlZCBjYWxsLFxuICAgICAgICAvLyBhbmQgdGhhdCBubyBkZWZlcnJlZHMgd2hlcmUgbGlzdGVuaW5nIHRvIHRoaXMgcmVqZWN0aW9uIG9yIHN1Y2Nlc3MuXG4gICAgICAgIC8vIFNpbmNlIHRoZXJlIGlzIGEgcmlzayB0aGF0IG91ciBzdGFjayBjYW4gY29udGFpbiBhcHBsaWNhdGlvbiBjb2RlIHRoYXQgbWF5XG4gICAgICAgIC8vIGRvIHN0dWZmIGFmdGVyIHRoaXMgY29kZSBpcyBmaW5pc2hlZCB0aGF0IG1heSBnZW5lcmF0ZSBuZXcgY2FsbHMsIHdlIGNhbm5vdFxuICAgICAgICAvLyBjYWxsIGZpbmFsaXplcnMgaGVyZS5cbiAgICAgICAgKytudW1TY2hlZHVsZWRDYWxscztcbiAgICAgICAgYXNhcCQxKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKSBmaW5hbGl6ZVBoeXNpY2FsVGljaygpOyAvLyBXaWxsIGRldGVjdCB1bmhhbmRsZWQgZXJyb3JzXG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHByb3BhZ2F0ZVRvTGlzdGVuZXIocHJvbWlzZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgcHJvbWlzZS5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNiID0gcHJvbWlzZS5fc3RhdGUgPyBsaXN0ZW5lci5vbkZ1bGZpbGxlZCA6IGxpc3RlbmVyLm9uUmVqZWN0ZWQ7XG4gICAgaWYgKGNiID09PSBudWxsKSB7XG4gICAgICAgIC8vIFRoaXMgTGlzdGVuZXIgZG9lc250IGhhdmUgYSBsaXN0ZW5lciBmb3IgdGhlIGV2ZW50IGJlaW5nIHRyaWdnZXJlZCAob25GdWxmaWxsZWQgb3Igb25SZWplY3QpIHNvIGxldHMgZm9yd2FyZCB0aGUgZXZlbnQgdG8gYW55IGV2ZW50dWFsIGxpc3RlbmVycyBvbiB0aGUgUHJvbWlzZSBpbnN0YW5jZSByZXR1cm5lZCBieSB0aGVuKCkgb3IgY2F0Y2goKVxuICAgICAgICByZXR1cm4gKHByb21pc2UuX3N0YXRlID8gbGlzdGVuZXIucmVzb2x2ZSA6IGxpc3RlbmVyLnJlamVjdCkocHJvbWlzZS5fdmFsdWUpO1xuICAgIH1cbiAgICB2YXIgcHNkID0gbGlzdGVuZXIucHNkO1xuICAgICsrcHNkLnJlZjtcbiAgICArK251bVNjaGVkdWxlZENhbGxzO1xuICAgIGFzYXAkMShjYWxsTGlzdGVuZXIsIFtjYiwgcHJvbWlzZSwgbGlzdGVuZXJdKTtcbn1cblxuZnVuY3Rpb24gY2FsbExpc3RlbmVyKGNiLCBwcm9taXNlLCBsaXN0ZW5lcikge1xuICAgIHZhciBvdXRlclNjb3BlID0gUFNEO1xuICAgIHZhciBwc2QgPSBsaXN0ZW5lci5wc2Q7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHBzZCAhPT0gb3V0ZXJTY29wZSkge1xuICAgICAgICAgICAgLy8gKipLRUVQKiogb3V0ZXJTY29wZS5lbnYgPSB3cmFwcGVycy5zbmFwc2hvdCgpOyAvLyBTbmFwc2hvdCBvdXRlclNjb3BlJ3MgZW52aXJvbm1lbnQuXG4gICAgICAgICAgICBQU0QgPSBwc2Q7XG4gICAgICAgICAgICAvLyAqKktFRVAqKiB3cmFwcGVycy5yZXN0b3JlKHBzZC5lbnYpOyAvLyBSZXN0b3JlIFBTRCdzIGVudmlyb25tZW50LlxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHN0YXRpYyB2YXJpYWJsZSBjdXJyZW50RnVsZmlsbGVyIHRvIHRoZSBwcm9taXNlIHRoYXQgaXMgYmVpbmcgZnVsbGZpbGxlZCxcbiAgICAgICAgLy8gc28gdGhhdCB3ZSBjb25uZWN0IHRoZSBjaGFpbiBvZiBwcm9taXNlcyAoZm9yIGxvbmcgc3RhY2tzIHN1cHBvcnQpXG4gICAgICAgIGN1cnJlbnRGdWxmaWxsZXIgPSBwcm9taXNlO1xuXG4gICAgICAgIC8vIENhbGwgY2FsbGJhY2sgYW5kIHJlc29sdmUgb3VyIGxpc3RlbmVyIHdpdGggaXQncyByZXR1cm4gdmFsdWUuXG4gICAgICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3ZhbHVlLFxuICAgICAgICAgICAgcmV0O1xuICAgICAgICBpZiAocHJvbWlzZS5fc3RhdGUpIHtcbiAgICAgICAgICAgIHJldCA9IGNiKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyZWplY3RpbmdFcnJvcnMubGVuZ3RoKSByZWplY3RpbmdFcnJvcnMgPSBbXTtcbiAgICAgICAgICAgIHJldCA9IGNiKHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZWplY3RpbmdFcnJvcnMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSBtYXJrRXJyb3JBc0hhbmRsZWQocHJvbWlzZSk7IC8vIENhbGxiYWNrIGRpZG50IGRvIFByb21pc2UucmVqZWN0KGVycikgbm9yIHJlamVjdChlcnIpIG9udG8gYW5vdGhlciBwcm9taXNlLlxuICAgICAgICB9XG4gICAgICAgIGxpc3RlbmVyLnJlc29sdmUocmV0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gaW4gY2FsbGJhY2suIFJlamVjdCBvdXIgbGlzdGVuZXIuXG4gICAgICAgIGxpc3RlbmVyLnJlamVjdChlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyBSZXN0b3JlIFBTRCwgZW52IGFuZCBjdXJyZW50RnVsZmlsbGVyLlxuICAgICAgICBpZiAocHNkICE9PSBvdXRlclNjb3BlKSB7XG4gICAgICAgICAgICBQU0QgPSBvdXRlclNjb3BlO1xuICAgICAgICAgICAgLy8gKipLRUVQKiogd3JhcHBlcnMucmVzdG9yZShvdXRlclNjb3BlLmVudik7IC8vIFJlc3RvcmUgb3V0ZXJTY29wZSdzIGVudmlyb25tZW50XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEZ1bGZpbGxlciA9IG51bGw7XG4gICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKSBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgICAgICAtLXBzZC5yZWYgfHwgcHNkLmZpbmFsaXplKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRTdGFjayhwcm9taXNlLCBzdGFja3MsIGxpbWl0KSB7XG4gICAgaWYgKHN0YWNrcy5sZW5ndGggPT09IGxpbWl0KSByZXR1cm4gc3RhY2tzO1xuICAgIHZhciBzdGFjayA9IFwiXCI7XG4gICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBmYWxzZSkge1xuICAgICAgICB2YXIgZmFpbHVyZSA9IHByb21pc2UuX3ZhbHVlLFxuICAgICAgICAgICAgZXJyb3JOYW1lLFxuICAgICAgICAgICAgbWVzc2FnZTtcblxuICAgICAgICBpZiAoZmFpbHVyZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBlcnJvck5hbWUgPSBmYWlsdXJlLm5hbWUgfHwgXCJFcnJvclwiO1xuICAgICAgICAgICAgbWVzc2FnZSA9IGZhaWx1cmUubWVzc2FnZSB8fCBmYWlsdXJlO1xuICAgICAgICAgICAgc3RhY2sgPSBwcmV0dHlTdGFjayhmYWlsdXJlLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yTmFtZSA9IGZhaWx1cmU7IC8vIElmIGVycm9yIGlzIHVuZGVmaW5lZCBvciBudWxsLCBzaG93IHRoYXQuXG4gICAgICAgICAgICBtZXNzYWdlID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBzdGFja3MucHVzaChlcnJvck5hbWUgKyAobWVzc2FnZSA/IFwiOiBcIiArIG1lc3NhZ2UgOiBcIlwiKSArIHN0YWNrKTtcbiAgICB9XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIHN0YWNrID0gcHJldHR5U3RhY2socHJvbWlzZS5fc3RhY2tIb2xkZXIsIDIpO1xuICAgICAgICBpZiAoc3RhY2sgJiYgc3RhY2tzLmluZGV4T2Yoc3RhY2spID09PSAtMSkgc3RhY2tzLnB1c2goc3RhY2spO1xuICAgICAgICBpZiAocHJvbWlzZS5fcHJldikgZ2V0U3RhY2socHJvbWlzZS5fcHJldiwgc3RhY2tzLCBsaW1pdCk7XG4gICAgfVxuICAgIHJldHVybiBzdGFja3M7XG59XG5cbmZ1bmN0aW9uIGxpbmtUb1ByZXZpb3VzUHJvbWlzZShwcm9taXNlLCBwcmV2KSB7XG4gICAgLy8gU3VwcG9ydCBsb25nIHN0YWNrcyBieSBsaW5raW5nIHRvIHByZXZpb3VzIGNvbXBsZXRlZCBwcm9taXNlLlxuICAgIHZhciBudW1QcmV2ID0gcHJldiA/IHByZXYuX251bVByZXYgKyAxIDogMDtcbiAgICBpZiAobnVtUHJldiA8IExPTkdfU1RBQ0tTX0NMSVBfTElNSVQpIHtcbiAgICAgICAgLy8gUHJvaGliaXQgaW5maW5pdGUgUHJvbWlzZSBsb29wcyB0byBnZXQgYW4gaW5maW5pdGUgbG9uZyBtZW1vcnkgY29uc3VtaW5nIFwidGFpbFwiLlxuICAgICAgICBwcm9taXNlLl9wcmV2ID0gcHJldjtcbiAgICAgICAgcHJvbWlzZS5fbnVtUHJldiA9IG51bVByZXY7XG4gICAgfVxufVxuXG4vKiBUaGUgY2FsbGJhY2sgdG8gc2NoZWR1bGUgd2l0aCBzZXRJbW1lZGlhdGUoKSBvciBzZXRUaW1lb3V0KCkuXHJcbiAgIEl0IHJ1bnMgYSB2aXJ0dWFsIG1pY3JvdGljayBhbmQgZXhlY3V0ZXMgYW55IGNhbGxiYWNrIHJlZ2lzdGVyZWQgaW4gbWljcm90aWNrUXVldWUuXHJcbiAqL1xuZnVuY3Rpb24gcGh5c2ljYWxUaWNrKCkge1xuICAgIGJlZ2luTWljcm9UaWNrU2NvcGUoKSAmJiBlbmRNaWNyb1RpY2tTY29wZSgpO1xufVxuXG5mdW5jdGlvbiBiZWdpbk1pY3JvVGlja1Njb3BlKCkge1xuICAgIHZhciB3YXNSb290RXhlYyA9IGlzT3V0c2lkZU1pY3JvVGljaztcbiAgICBpc091dHNpZGVNaWNyb1RpY2sgPSBmYWxzZTtcbiAgICBuZWVkc05ld1BoeXNpY2FsVGljayA9IGZhbHNlO1xuICAgIHJldHVybiB3YXNSb290RXhlYztcbn1cblxuLyogRXhlY3V0ZXMgbWljcm8tdGlja3Mgd2l0aG91dCBkb2luZyB0cnkuLmNhdGNoLlxyXG4gICBUaGlzIGNhbiBiZSBwb3NzaWJsZSBiZWNhdXNlIHdlIG9ubHkgdXNlIHRoaXMgaW50ZXJuYWxseSBhbmRcclxuICAgdGhlIHJlZ2lzdGVyZWQgZnVuY3Rpb25zIGFyZSBleGNlcHRpb24tc2FmZSAodGhleSBkbyB0cnkuLmNhdGNoXHJcbiAgIGludGVybmFsbHkgYmVmb3JlIGNhbGxpbmcgYW55IGV4dGVybmFsIG1ldGhvZCkuIElmIHJlZ2lzdGVyaW5nXHJcbiAgIGZ1bmN0aW9ucyBpbiB0aGUgbWljcm90aWNrUXVldWUgdGhhdCBhcmUgbm90IGV4Y2VwdGlvbi1zYWZlLCB0aGlzXHJcbiAgIHdvdWxkIGRlc3Ryb3kgdGhlIGZyYW1ld29yayBhbmQgbWFrZSBpdCBpbnN0YWJsZS4gU28gd2UgZG9uJ3QgZXhwb3J0XHJcbiAgIG91ciBhc2FwIG1ldGhvZC5cclxuKi9cbmZ1bmN0aW9uIGVuZE1pY3JvVGlja1Njb3BlKCkge1xuICAgIHZhciBjYWxsYmFja3MsIGksIGw7XG4gICAgZG8ge1xuICAgICAgICB3aGlsZSAobWljcm90aWNrUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2FsbGJhY2tzID0gbWljcm90aWNrUXVldWU7XG4gICAgICAgICAgICBtaWNyb3RpY2tRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgbCA9IGNhbGxiYWNrcy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYWxsYmFja3NbaV07XG4gICAgICAgICAgICAgICAgaXRlbVswXS5hcHBseShudWxsLCBpdGVtWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gd2hpbGUgKG1pY3JvdGlja1F1ZXVlLmxlbmd0aCA+IDApO1xuICAgIGlzT3V0c2lkZU1pY3JvVGljayA9IHRydWU7XG4gICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBmaW5hbGl6ZVBoeXNpY2FsVGljaygpIHtcbiAgICB2YXIgdW5oYW5kbGVkRXJycyA9IHVuaGFuZGxlZEVycm9ycztcbiAgICB1bmhhbmRsZWRFcnJvcnMgPSBbXTtcbiAgICB1bmhhbmRsZWRFcnJzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgcC5fUFNELm9udW5oYW5kbGVkLmNhbGwobnVsbCwgcC5fdmFsdWUsIHApO1xuICAgIH0pO1xuICAgIHZhciBmaW5hbGl6ZXJzID0gdGlja0ZpbmFsaXplcnMuc2xpY2UoMCk7IC8vIENsb25lIGZpcnN0IGJlY2F1c2UgZmluYWxpemVyIG1heSByZW1vdmUgaXRzZWxmIGZyb20gbGlzdC5cbiAgICB2YXIgaSA9IGZpbmFsaXplcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpKSB7XG4gICAgICAgIGZpbmFsaXplcnNbLS1pXSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcnVuX2F0X2VuZF9vZl90aGlzX29yX25leHRfcGh5c2ljYWxfdGljayhmbikge1xuICAgIGZ1bmN0aW9uIGZpbmFsaXplcigpIHtcbiAgICAgICAgZm4oKTtcbiAgICAgICAgdGlja0ZpbmFsaXplcnMuc3BsaWNlKHRpY2tGaW5hbGl6ZXJzLmluZGV4T2YoZmluYWxpemVyKSwgMSk7XG4gICAgfVxuICAgIHRpY2tGaW5hbGl6ZXJzLnB1c2goZmluYWxpemVyKTtcbiAgICArK251bVNjaGVkdWxlZENhbGxzO1xuICAgIGFzYXAkMShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgtLW51bVNjaGVkdWxlZENhbGxzID09PSAwKSBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgIH0sIFtdKTtcbn1cblxuZnVuY3Rpb24gYWRkUG9zc2libHlVbmhhbmRsZWRFcnJvcihwcm9taXNlKSB7XG4gICAgLy8gT25seSBhZGQgdG8gdW5oYW5kbGVkRXJyb3JzIGlmIG5vdCBhbHJlYWR5IHRoZXJlLiBUaGUgZmlyc3Qgb25lIHRvIGFkZCB0byB0aGlzIGxpc3RcbiAgICAvLyB3aWxsIGJlIHVwb24gdGhlIGZpcnN0IHJlamVjdGlvbiBzbyB0aGF0IHRoZSByb290IGNhdXNlIChmaXJzdCBwcm9taXNlIGluIHRoZVxuICAgIC8vIHJlamVjdGlvbiBjaGFpbikgaXMgdGhlIG9uZSBsaXN0ZWQuXG4gICAgaWYgKCF1bmhhbmRsZWRFcnJvcnMuc29tZShmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gcC5fdmFsdWUgPT09IHByb21pc2UuX3ZhbHVlO1xuICAgIH0pKSB1bmhhbmRsZWRFcnJvcnMucHVzaChwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gbWFya0Vycm9yQXNIYW5kbGVkKHByb21pc2UpIHtcbiAgICAvLyBDYWxsZWQgd2hlbiBhIHJlamVjdCBoYW5kbGVkIGlzIGFjdHVhbGx5IGJlaW5nIGNhbGxlZC5cbiAgICAvLyBTZWFyY2ggaW4gdW5oYW5kbGVkRXJyb3JzIGZvciBhbnkgcHJvbWlzZSB3aG9zIF92YWx1ZSBpcyB0aGlzIHByb21pc2VfdmFsdWUgKGxpc3RcbiAgICAvLyBjb250YWlucyBvbmx5IHJlamVjdGVkIHByb21pc2VzLCBhbmQgb25seSBvbmUgaXRlbSBwZXIgZXJyb3IpXG4gICAgdmFyIGkgPSB1bmhhbmRsZWRFcnJvcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpKSB7XG4gICAgICAgIGlmICh1bmhhbmRsZWRFcnJvcnNbLS1pXS5fdmFsdWUgPT09IHByb21pc2UuX3ZhbHVlKSB7XG4gICAgICAgICAgICAvLyBGb3VuZCBhIHByb21pc2UgdGhhdCBmYWlsZWQgd2l0aCB0aGlzIHNhbWUgZXJyb3Igb2JqZWN0IHBvaW50ZXIsXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhhdCBzaW5jZSB0aGVyZSBpcyBhIGxpc3RlbmVyIHRoYXQgYWN0dWFsbHkgdGFrZXMgY2FyZSBvZiBpdC5cbiAgICAgICAgICAgIHVuaGFuZGxlZEVycm9ycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEJ5IGRlZmF1bHQsIGxvZyB1bmNhdWdodCBlcnJvcnMgdG8gdGhlIGNvbnNvbGVcbmZ1bmN0aW9uIGRlZmF1bHRFcnJvckhhbmRsZXIoZSkge1xuICAgIGNvbnNvbGUud2FybignVW5oYW5kbGVkIHJlamVjdGlvbjogJyArIChlLnN0YWNrIHx8IGUpKTtcbn1cblxuZnVuY3Rpb24gUHJvbWlzZVJlamVjdChyZWFzb24pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoSU5URVJOQUwsIGZhbHNlLCByZWFzb24pO1xufVxuXG5mdW5jdGlvbiB3cmFwKGZuLCBlcnJvckNhdGNoZXIpIHtcbiAgICB2YXIgcHNkID0gUFNEO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3YXNSb290RXhlYyA9IGJlZ2luTWljcm9UaWNrU2NvcGUoKSxcbiAgICAgICAgICAgIG91dGVyU2NvcGUgPSBQU0Q7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChvdXRlclNjb3BlICE9PSBwc2QpIHtcbiAgICAgICAgICAgICAgICAvLyAqKktFRVAqKiBvdXRlclNjb3BlLmVudiA9IHdyYXBwZXJzLnNuYXBzaG90KCk7IC8vIFNuYXBzaG90IG91dGVyU2NvcGUncyBlbnZpcm9ubWVudFxuICAgICAgICAgICAgICAgIFBTRCA9IHBzZDtcbiAgICAgICAgICAgICAgICAvLyAqKktFRVAqKiB3cmFwcGVycy5yZXN0b3JlKHBzZC5lbnYpOyAvLyBSZXN0b3JlIFBTRCdzIGVudmlyb25tZW50LlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVycm9yQ2F0Y2hlciAmJiBlcnJvckNhdGNoZXIoZSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAob3V0ZXJTY29wZSAhPT0gcHNkKSB7XG4gICAgICAgICAgICAgICAgUFNEID0gb3V0ZXJTY29wZTtcbiAgICAgICAgICAgICAgICAvLyAqKktFRVAqKiB3cmFwcGVycy5yZXN0b3JlKG91dGVyU2NvcGUuZW52KTsgLy8gUmVzdG9yZSBvdXRlclNjb3BlJ3MgZW52aXJvbm1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3YXNSb290RXhlYykgZW5kTWljcm9UaWNrU2NvcGUoKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIG5ld1Njb3BlKGZuLCBhMSwgYTIsIGEzKSB7XG4gICAgdmFyIHBhcmVudCA9IFBTRCxcbiAgICAgICAgcHNkID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQpO1xuICAgIHBzZC5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgcHNkLnJlZiA9IDA7XG4gICAgcHNkLmdsb2JhbCA9IGZhbHNlO1xuICAgIC8vICoqS0VFUCoqIHBzZC5lbnYgPSB3cmFwcGVycy53cmFwKHBzZCk7XG5cbiAgICAvLyB1bmhhbmRsZWRzIGFuZCBvbnVuaGFuZGxlZCBzaG91bGQgbm90IGJlIHNwZWNpZmljYWxseSBzZXQgaGVyZS5cbiAgICAvLyBMZWF2ZSB0aGVtIG9uIHBhcmVudCBwcm90b3R5cGUuXG4gICAgLy8gdW5oYW5kbGVkcy5wdXNoKGVycikgd2lsbCBwdXNoIHRvIHBhcmVudCdzIHByb3RvdHlwZVxuICAgIC8vIG9udW5oYW5kbGVkKCkgd2lsbCBjYWxsIHBhcmVudHMgb251bmhhbmRsZWQgKHdpdGggdGhpcyBzY29wZSdzIHRoaXMtcG9pbnRlciB0aG91Z2ghKVxuICAgICsrcGFyZW50LnJlZjtcbiAgICBwc2QuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC0tdGhpcy5wYXJlbnQucmVmIHx8IHRoaXMucGFyZW50LmZpbmFsaXplKCk7XG4gICAgfTtcbiAgICB2YXIgcnYgPSB1c2VQU0QocHNkLCBmbiwgYTEsIGEyLCBhMyk7XG4gICAgaWYgKHBzZC5yZWYgPT09IDApIHBzZC5maW5hbGl6ZSgpO1xuICAgIHJldHVybiBydjtcbn1cblxuZnVuY3Rpb24gdXNlUFNEKHBzZCwgZm4sIGExLCBhMiwgYTMpIHtcbiAgICB2YXIgb3V0ZXJTY29wZSA9IFBTRDtcbiAgICB0cnkge1xuICAgICAgICBpZiAocHNkICE9PSBvdXRlclNjb3BlKSB7XG4gICAgICAgICAgICAvLyAqKktFRVAqKiBvdXRlclNjb3BlLmVudiA9IHdyYXBwZXJzLnNuYXBzaG90KCk7IC8vIHNuYXBzaG90IG91dGVyU2NvcGUncyBlbnZpcm9ubWVudC5cbiAgICAgICAgICAgIFBTRCA9IHBzZDtcbiAgICAgICAgICAgIC8vICoqS0VFUCoqIHdyYXBwZXJzLnJlc3RvcmUocHNkLmVudik7IC8vIFJlc3RvcmUgUFNEJ3MgZW52aXJvbm1lbnQuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZuKGExLCBhMiwgYTMpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChwc2QgIT09IG91dGVyU2NvcGUpIHtcbiAgICAgICAgICAgIFBTRCA9IG91dGVyU2NvcGU7XG4gICAgICAgICAgICAvLyAqKktFRVAqKiB3cmFwcGVycy5yZXN0b3JlKG91dGVyU2NvcGUuZW52KTsgLy8gUmVzdG9yZSBvdXRlclNjb3BlJ3MgZW52aXJvbm1lbnQuXG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciBVTkhBTkRMRURSRUpFQ1RJT04gPSBcInVuaGFuZGxlZHJlamVjdGlvblwiO1xuXG5mdW5jdGlvbiBnbG9iYWxFcnJvcihlcnIsIHByb21pc2UpIHtcbiAgICB2YXIgcnY7XG4gICAgdHJ5IHtcbiAgICAgICAgcnYgPSBwcm9taXNlLm9udW5jYXRjaGVkKGVycik7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICBpZiAocnYgIT09IGZhbHNlKSB0cnkge1xuICAgICAgICB2YXIgZXZlbnQsXG4gICAgICAgICAgICBldmVudERhdGEgPSB7IHByb21pc2U6IHByb21pc2UsIHJlYXNvbjogZXJyIH07XG4gICAgICAgIGlmIChfZ2xvYmFsLmRvY3VtZW50ICYmIGRvY3VtZW50LmNyZWF0ZUV2ZW50KSB7XG4gICAgICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgICAgICAgZXZlbnQuaW5pdEV2ZW50KFVOSEFORExFRFJFSkVDVElPTiwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBleHRlbmQoZXZlbnQsIGV2ZW50RGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoX2dsb2JhbC5DdXN0b21FdmVudCkge1xuICAgICAgICAgICAgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoVU5IQU5ETEVEUkVKRUNUSU9OLCB7IGRldGFpbDogZXZlbnREYXRhIH0pO1xuICAgICAgICAgICAgZXh0ZW5kKGV2ZW50LCBldmVudERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudCAmJiBfZ2xvYmFsLmRpc3BhdGNoRXZlbnQpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCFfZ2xvYmFsLlByb21pc2VSZWplY3Rpb25FdmVudCAmJiBfZ2xvYmFsLm9udW5oYW5kbGVkcmVqZWN0aW9uKVxuICAgICAgICAgICAgICAgIC8vIE5vIG5hdGl2ZSBzdXBwb3J0IGZvciBQcm9taXNlUmVqZWN0aW9uRXZlbnQgYnV0IHVzZXIgaGFzIHNldCB3aW5kb3cub251bmhhbmRsZWRyZWplY3Rpb24uIE1hbnVhbGx5IGNhbGwgaXQuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgX2dsb2JhbC5vbnVuaGFuZGxlZHJlamVjdGlvbihldmVudCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoXykge31cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgIC8vIEJhY2t3YXJkIGNvbXBhdGliaWxpdHk6IGZpcmUgdG8gZXZlbnRzIHJlZ2lzdGVyZWQgYXQgUHJvbWlzZS5vbi5lcnJvclxuICAgICAgICAgICAgUHJvbWlzZS5vbi5lcnJvci5maXJlKGVyciwgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxufVxuXG4vKiAqKktFRVAqKiBcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3cmFwUHJvbWlzZShQcm9taXNlQ2xhc3MpIHtcclxuICAgIHZhciBwcm90byA9IFByb21pc2VDbGFzcy5wcm90b3R5cGU7XHJcbiAgICB2YXIgb3JpZ1RoZW4gPSBwcm90by50aGVuO1xyXG4gICAgXHJcbiAgICB3cmFwcGVycy5hZGQoe1xyXG4gICAgICAgIHNuYXBzaG90OiAoKSA9PiBwcm90by50aGVuLFxyXG4gICAgICAgIHJlc3RvcmU6IHZhbHVlID0+IHtwcm90by50aGVuID0gdmFsdWU7fSxcclxuICAgICAgICB3cmFwOiAoKSA9PiBwYXRjaGVkVGhlblxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gcGF0Y2hlZFRoZW4gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XHJcbiAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzO1xyXG4gICAgICAgIHZhciBvbkZ1bGZpbGxlZFByb3h5ID0gd3JhcChmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgIHZhciBydiA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAob25GdWxmaWxsZWQpIHtcclxuICAgICAgICAgICAgICAgIHJ2ID0gb25GdWxmaWxsZWQocnYpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJ2ICYmIHR5cGVvZiBydi50aGVuID09PSAnZnVuY3Rpb24nKSBydi50aGVuKCk7IC8vIEludGVyY2VwdCB0aGF0IHByb21pc2UgYXMgd2VsbC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAtLVBTRC5yZWYgfHwgUFNELmZpbmFsaXplKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBydjtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgb25SZWplY3RlZFByb3h5ID0gd3JhcChmdW5jdGlvbihlcnIpe1xyXG4gICAgICAgICAgICBwcm9taXNlLl8kZXJyID0gZXJyO1xyXG4gICAgICAgICAgICB2YXIgdW5oYW5kbGVkcyA9IFBTRC51bmhhbmRsZWRzO1xyXG4gICAgICAgICAgICB2YXIgaWR4ID0gdW5oYW5kbGVkcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBydjtcclxuICAgICAgICAgICAgd2hpbGUgKGlkeC0tKSBpZiAodW5oYW5kbGVkc1tpZHhdLl8kZXJyID09PSBlcnIpIGJyZWFrO1xyXG4gICAgICAgICAgICBpZiAob25SZWplY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHVuaGFuZGxlZHMuc3BsaWNlKGlkeCwgMSk7IC8vIE1hcmsgYXMgaGFuZGxlZC5cclxuICAgICAgICAgICAgICAgIHJ2ID0gb25SZWplY3RlZChlcnIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJ2ICYmIHR5cGVvZiBydi50aGVuID09PSAnZnVuY3Rpb24nKSBydi50aGVuKCk7IC8vIEludGVyY2VwdCB0aGF0IHByb21pc2UgYXMgd2VsbC5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpZHggPT09IC0xKSB1bmhhbmRsZWRzLnB1c2gocHJvbWlzZSk7XHJcbiAgICAgICAgICAgICAgICBydiA9IFByb21pc2VDbGFzcy5yZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIHJ2Ll8kbm9pbnRlcmNlcHQgPSB0cnVlOyAvLyBQcm9oaWJpdCBldGVybmFsIGxvb3AuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLS1QU0QucmVmIHx8IFBTRC5maW5hbGl6ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcnY7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuXyRub2ludGVyY2VwdCkgcmV0dXJuIG9yaWdUaGVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgKytQU0QucmVmO1xyXG4gICAgICAgIHJldHVybiBvcmlnVGhlbi5jYWxsKHRoaXMsIG9uRnVsZmlsbGVkUHJveHksIG9uUmVqZWN0ZWRQcm94eSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEdsb2JhbCBQcm9taXNlIHdyYXBwZXJcclxuaWYgKF9nbG9iYWwuUHJvbWlzZSkgd3JhcFByb21pc2UoX2dsb2JhbC5Qcm9taXNlKTtcclxuXHJcbiovXG5cbmRvRmFrZUF1dG9Db21wbGV0ZShmdW5jdGlvbiAoKSB7XG4gICAgLy8gU2ltcGxpZnkgdGhlIGpvYiBmb3IgVlMgSW50ZWxsaXNlbnNlLiBUaGlzIHBpZWNlIG9mIGNvZGUgaXMgb25lIG9mIHRoZSBrZXlzIHRvIHRoZSBuZXcgbWFydmVsbG91cyBpbnRlbGxpc2Vuc2Ugc3VwcG9ydCBpbiBEZXhpZS5cbiAgICBhc2FwJDEgPSBmdW5jdGlvbiAoZm4sIGFyZ3MpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfTtcbn0pO1xuXG5mdW5jdGlvbiByZWplY3Rpb24oZXJyLCB1bmNhdWdodEhhbmRsZXIpIHtcbiAgICAvLyBHZXQgdGhlIGNhbGwgc3RhY2sgYW5kIHJldHVybiBhIHJlamVjdGVkIHByb21pc2UuXG4gICAgdmFyIHJ2ID0gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICByZXR1cm4gdW5jYXVnaHRIYW5kbGVyID8gcnYudW5jYXVnaHQodW5jYXVnaHRIYW5kbGVyKSA6IHJ2O1xufVxuXG4vKlxyXG4gKiBEZXhpZS5qcyAtIGEgbWluaW1hbGlzdGljIHdyYXBwZXIgZm9yIEluZGV4ZWREQlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKlxyXG4gKiBCeSBEYXZpZCBGYWhsYW5kZXIsIGRhdmlkLmZhaGxhbmRlckBnbWFpbC5jb21cclxuICpcclxuICogVmVyc2lvbiAxLjUuMSwgVHVlIE5vdiAwMSAyMDE2XHJcbiAqXHJcbiAqIGh0dHA6Ly9kZXhpZS5vcmdcclxuICpcclxuICogQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAsIEphbnVhcnkgMjAwNCwgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL1xyXG4gKi9cblxudmFyIERFWElFX1ZFUlNJT04gPSAnMS41LjEnO1xudmFyIG1heFN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoNjU1MzUpO1xudmFyIG1heEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBJREJLZXlSYW5nZS5vbmx5KFtbXV0pO3JldHVybiBbW11dO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG1heFN0cmluZztcbiAgICB9XG59KCk7XG52YXIgSU5WQUxJRF9LRVlfQVJHVU1FTlQgPSBcIkludmFsaWQga2V5IHByb3ZpZGVkLiBLZXlzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgRGF0ZSBvciBBcnJheTxzdHJpbmcgfCBudW1iZXIgfCBEYXRlPi5cIjtcbnZhciBTVFJJTkdfRVhQRUNURUQgPSBcIlN0cmluZyBleHBlY3RlZC5cIjtcbnZhciBjb25uZWN0aW9ucyA9IFtdO1xudmFyIGlzSUVPckVkZ2UgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvKE1TSUV8VHJpZGVudHxFZGdlKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbnZhciBoYXNJRURlbGV0ZU9iamVjdFN0b3JlQnVnID0gaXNJRU9yRWRnZTtcbnZhciBoYW5nc09uRGVsZXRlTGFyZ2VLZXlSYW5nZSA9IGlzSUVPckVkZ2U7XG52YXIgZGV4aWVTdGFja0ZyYW1lRmlsdGVyID0gZnVuY3Rpb24gKGZyYW1lKSB7XG4gICAgcmV0dXJuICEvKGRleGllXFwuanN8ZGV4aWVcXC5taW5cXC5qcykvLnRlc3QoZnJhbWUpO1xufTtcblxuc2V0RGVidWcoZGVidWcsIGRleGllU3RhY2tGcmFtZUZpbHRlcik7XG5cbmZ1bmN0aW9uIERleGllKGRiTmFtZSwgb3B0aW9ucykge1xuICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9wdGlvbnNcIiB0eXBlPVwiT2JqZWN0XCIgb3B0aW9uYWw9XCJ0cnVlXCI+U3BlY2lmeSBvbmx5IGlmIHlvdSB3aWNoIHRvIGNvbnRyb2wgd2hpY2ggYWRkb25zIHRoYXQgc2hvdWxkIHJ1biBvbiB0aGlzIGluc3RhbmNlPC9wYXJhbT5cbiAgICB2YXIgZGVwcyA9IERleGllLmRlcGVuZGVuY2llcztcbiAgICB2YXIgb3B0cyA9IGV4dGVuZCh7XG4gICAgICAgIC8vIERlZmF1bHQgT3B0aW9uc1xuICAgICAgICBhZGRvbnM6IERleGllLmFkZG9ucywgLy8gUGljayBzdGF0aWNhbGx5IHJlZ2lzdGVyZWQgYWRkb25zIGJ5IGRlZmF1bHRcbiAgICAgICAgYXV0b09wZW46IHRydWUsIC8vIERvbid0IHJlcXVpcmUgZGIub3BlbigpIGV4cGxpY2l0ZWx5LlxuICAgICAgICBpbmRleGVkREI6IGRlcHMuaW5kZXhlZERCLCAvLyBCYWNrZW5kIEluZGV4ZWREQiBhcGkuIERlZmF1bHQgdG8gSURCU2hpbSBvciBicm93c2VyIGVudi5cbiAgICAgICAgSURCS2V5UmFuZ2U6IGRlcHMuSURCS2V5UmFuZ2UgLy8gQmFja2VuZCBJREJLZXlSYW5nZSBhcGkuIERlZmF1bHQgdG8gSURCU2hpbSBvciBicm93c2VyIGVudi5cbiAgICB9LCBvcHRpb25zKTtcbiAgICB2YXIgYWRkb25zID0gb3B0cy5hZGRvbnMsXG4gICAgICAgIGF1dG9PcGVuID0gb3B0cy5hdXRvT3BlbixcbiAgICAgICAgaW5kZXhlZERCID0gb3B0cy5pbmRleGVkREIsXG4gICAgICAgIElEQktleVJhbmdlID0gb3B0cy5JREJLZXlSYW5nZTtcblxuICAgIHZhciBnbG9iYWxTY2hlbWEgPSB0aGlzLl9kYlNjaGVtYSA9IHt9O1xuICAgIHZhciB2ZXJzaW9ucyA9IFtdO1xuICAgIHZhciBkYlN0b3JlTmFtZXMgPSBbXTtcbiAgICB2YXIgYWxsVGFibGVzID0ge307XG4gICAgLy8vPHZhciB0eXBlPVwiSURCRGF0YWJhc2VcIiAvPlxuICAgIHZhciBpZGJkYiA9IG51bGw7IC8vIEluc3RhbmNlIG9mIElEQkRhdGFiYXNlXG4gICAgdmFyIGRiT3BlbkVycm9yID0gbnVsbDtcbiAgICB2YXIgaXNCZWluZ09wZW5lZCA9IGZhbHNlO1xuICAgIHZhciBvcGVuQ29tcGxldGUgPSBmYWxzZTtcbiAgICB2YXIgUkVBRE9OTFkgPSBcInJlYWRvbmx5XCIsXG4gICAgICAgIFJFQURXUklURSA9IFwicmVhZHdyaXRlXCI7XG4gICAgdmFyIGRiID0gdGhpcztcbiAgICB2YXIgZGJSZWFkeVJlc29sdmUsXG4gICAgICAgIGRiUmVhZHlQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgZGJSZWFkeVJlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pLFxuICAgICAgICBjYW5jZWxPcGVuLFxuICAgICAgICBvcGVuQ2FuY2VsbGVyID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgICBjYW5jZWxPcGVuID0gcmVqZWN0O1xuICAgIH0pO1xuICAgIHZhciBhdXRvU2NoZW1hID0gdHJ1ZTtcbiAgICB2YXIgaGFzTmF0aXZlR2V0RGF0YWJhc2VOYW1lcyA9ICEhZ2V0TmF0aXZlR2V0RGF0YWJhc2VOYW1lc0ZuKGluZGV4ZWREQiksXG4gICAgICAgIGhhc0dldEFsbDtcblxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIC8vIERlZmF1bHQgc3Vic2NyaWJlcnMgdG8gXCJ2ZXJzaW9uY2hhbmdlXCIgYW5kIFwiYmxvY2tlZFwiLlxuICAgICAgICAvLyBDYW4gYmUgb3ZlcnJpZGRlbiBieSBjdXN0b20gaGFuZGxlcnMuIElmIGN1c3RvbSBoYW5kbGVycyByZXR1cm4gZmFsc2UsIHRoZXNlIGRlZmF1bHRcbiAgICAgICAgLy8gYmVoYXZpb3VycyB3aWxsIGJlIHByZXZlbnRlZC5cbiAgICAgICAgZGIub24oXCJ2ZXJzaW9uY2hhbmdlXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgLy8gRGVmYXVsdCBiZWhhdmlvciBmb3IgdmVyc2lvbmNoYW5nZSBldmVudCBpcyB0byBjbG9zZSBkYXRhYmFzZSBjb25uZWN0aW9uLlxuICAgICAgICAgICAgLy8gQ2FsbGVyIGNhbiBvdmVycmlkZSB0aGlzIGJlaGF2aW9yIGJ5IGRvaW5nIGRiLm9uKFwidmVyc2lvbmNoYW5nZVwiLCBmdW5jdGlvbigpeyByZXR1cm4gZmFsc2U7IH0pO1xuICAgICAgICAgICAgLy8gTGV0J3Mgbm90IGJsb2NrIHRoZSBvdGhlciB3aW5kb3cgZnJvbSBtYWtpbmcgaXQncyBkZWxldGUoKSBvciBvcGVuKCkgY2FsbC5cbiAgICAgICAgICAgIC8vIE5PVEUhIFRoaXMgZXZlbnQgaXMgbmV2ZXIgZmlyZWQgaW4gSUUsRWRnZSBvciBTYWZhcmkuXG4gICAgICAgICAgICBpZiAoZXYubmV3VmVyc2lvbiA+IDApIGNvbnNvbGUud2FybignQW5vdGhlciBjb25uZWN0aW9uIHdhbnRzIHRvIHVwZ3JhZGUgZGF0YWJhc2UgXFwnJyArIGRiLm5hbWUgKyAnXFwnLiBDbG9zaW5nIGRiIG5vdyB0byByZXN1bWUgdGhlIHVwZ3JhZGUuJyk7ZWxzZSBjb25zb2xlLndhcm4oJ0Fub3RoZXIgY29ubmVjdGlvbiB3YW50cyB0byBkZWxldGUgZGF0YWJhc2UgXFwnJyArIGRiLm5hbWUgKyAnXFwnLiBDbG9zaW5nIGRiIG5vdyB0byByZXN1bWUgdGhlIGRlbGV0ZSByZXF1ZXN0LicpO1xuICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgIC8vIEluIG1hbnkgd2ViIGFwcGxpY2F0aW9ucywgaXQgd291bGQgYmUgcmVjb21tZW5kZWQgdG8gZm9yY2Ugd2luZG93LnJlbG9hZCgpXG4gICAgICAgICAgICAvLyB3aGVuIHRoaXMgZXZlbnQgb2NjdXJzLiBUbyBkbyB0aGF0LCBzdWJzY3JpYmUgdG8gdGhlIHZlcnNpb25jaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgIC8vIGFuZCBjYWxsIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSkgaWYgZXYubmV3VmVyc2lvbiA+IDAgKG5vdCBhIGRlbGV0aW9uKVxuICAgICAgICAgICAgLy8gVGhlIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGF0IHlvdXIgY3VycmVudCB3ZWIgYXBwIG9idmlvdXNseSBoYXMgb2xkIHNjaGVtYSBjb2RlIHRoYXQgbmVlZHNcbiAgICAgICAgICAgIC8vIHRvIGJlIHVwZGF0ZWQuIEFub3RoZXIgd2luZG93IGdvdCBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIGFwcCBhbmQgbmVlZHMgdG8gdXBncmFkZSBEQiBidXRcbiAgICAgICAgICAgIC8vIHlvdXIgd2luZG93IGlzIGJsb2NraW5nIGl0IHVubGVzcyB3ZSBjbG9zZSBpdCBoZXJlLlxuICAgICAgICB9KTtcbiAgICAgICAgZGIub24oXCJibG9ja2VkXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgaWYgKCFldi5uZXdWZXJzaW9uIHx8IGV2Lm5ld1ZlcnNpb24gPCBldi5vbGRWZXJzaW9uKSBjb25zb2xlLndhcm4oJ0RleGllLmRlbGV0ZShcXCcnICsgZGIubmFtZSArICdcXCcpIHdhcyBibG9ja2VkJyk7ZWxzZSBjb25zb2xlLndhcm4oJ1VwZ3JhZGUgXFwnJyArIGRiLm5hbWUgKyAnXFwnIGJsb2NrZWQgYnkgb3RoZXIgY29ubmVjdGlvbiBob2xkaW5nIHZlcnNpb24gJyArIGV2Lm9sZFZlcnNpb24gLyAxMCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gVmVyc2lvbmluZyBGcmFtZXdvcmstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cblxuICAgIHRoaXMudmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyKSB7XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZlcnNpb25OdW1iZXJcIiB0eXBlPVwiTnVtYmVyXCI+PC9wYXJhbT5cbiAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJWZXJzaW9uXCI+PC9yZXR1cm5zPlxuICAgICAgICBpZiAoaWRiZGIgfHwgaXNCZWluZ09wZW5lZCkgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiQ2Fubm90IGFkZCB2ZXJzaW9uIHdoZW4gZGF0YWJhc2UgaXMgb3BlblwiKTtcbiAgICAgICAgdGhpcy52ZXJubyA9IE1hdGgubWF4KHRoaXMudmVybm8sIHZlcnNpb25OdW1iZXIpO1xuICAgICAgICB2YXIgdmVyc2lvbkluc3RhbmNlID0gdmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICByZXR1cm4gdi5fY2ZnLnZlcnNpb24gPT09IHZlcnNpb25OdW1iZXI7XG4gICAgICAgIH0pWzBdO1xuICAgICAgICBpZiAodmVyc2lvbkluc3RhbmNlKSByZXR1cm4gdmVyc2lvbkluc3RhbmNlO1xuICAgICAgICB2ZXJzaW9uSW5zdGFuY2UgPSBuZXcgVmVyc2lvbih2ZXJzaW9uTnVtYmVyKTtcbiAgICAgICAgdmVyc2lvbnMucHVzaCh2ZXJzaW9uSW5zdGFuY2UpO1xuICAgICAgICB2ZXJzaW9ucy5zb3J0KGxvd2VyVmVyc2lvbkZpcnN0KTtcbiAgICAgICAgcmV0dXJuIHZlcnNpb25JbnN0YW5jZTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2NmZyA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb25OdW1iZXIsXG4gICAgICAgICAgICBzdG9yZXNTb3VyY2U6IG51bGwsXG4gICAgICAgICAgICBkYnNjaGVtYToge30sXG4gICAgICAgICAgICB0YWJsZXM6IHt9LFxuICAgICAgICAgICAgY29udGVudFVwZ3JhZGU6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yZXMoe30pOyAvLyBEZXJpdmUgZWFybGllciBzY2hlbWFzIGJ5IGRlZmF1bHQuXG4gICAgfVxuXG4gICAgZXh0ZW5kKFZlcnNpb24ucHJvdG90eXBlLCB7XG4gICAgICAgIHN0b3JlczogZnVuY3Rpb24gKHN0b3Jlcykge1xuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PlxuICAgICAgICAgICAgLy8vICAgRGVmaW5lcyB0aGUgc2NoZW1hIGZvciBhIHBhcnRpY3VsYXIgdmVyc2lvblxuICAgICAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0b3Jlc1wiIHR5cGU9XCJPYmplY3RcIj5cbiAgICAgICAgICAgIC8vLyBFeGFtcGxlOiA8YnIvPlxuICAgICAgICAgICAgLy8vICAge3VzZXJzOiBcImlkKyssZmlyc3QsbGFzdCwmYW1wO3VzZXJuYW1lLCplbWFpbFwiLCA8YnIvPlxuICAgICAgICAgICAgLy8vICAgcGFzc3dvcmRzOiBcImlkKyssJmFtcDt1c2VybmFtZVwifTxici8+XG4gICAgICAgICAgICAvLy8gPGJyLz5cbiAgICAgICAgICAgIC8vLyBTeW50YXg6IHtUYWJsZTogXCJbcHJpbWFyeUtleV1bKytdLFsmYW1wO11bKl1pbmRleDEsWyZhbXA7XVsqXWluZGV4MiwuLi5cIn08YnIvPjxici8+XG4gICAgICAgICAgICAvLy8gU3BlY2lhbCBjaGFyYWN0ZXJzOjxici8+XG4gICAgICAgICAgICAvLy8gIFwiJmFtcDtcIiAgbWVhbnMgdW5pcXVlIGtleSwgPGJyLz5cbiAgICAgICAgICAgIC8vLyAgXCIqXCIgIG1lYW5zIHZhbHVlIGlzIG11bHRpRW50cnksIDxici8+XG4gICAgICAgICAgICAvLy8gIFwiKytcIiBtZWFucyBhdXRvLWluY3JlbWVudCBhbmQgb25seSBhcHBsaWNhYmxlIGZvciBwcmltYXJ5IGtleSA8YnIvPlxuICAgICAgICAgICAgLy8vIDwvcGFyYW0+XG4gICAgICAgICAgICB0aGlzLl9jZmcuc3RvcmVzU291cmNlID0gdGhpcy5fY2ZnLnN0b3Jlc1NvdXJjZSA/IGV4dGVuZCh0aGlzLl9jZmcuc3RvcmVzU291cmNlLCBzdG9yZXMpIDogc3RvcmVzO1xuXG4gICAgICAgICAgICAvLyBEZXJpdmUgc3RvcmVzIGZyb20gZWFybGllciB2ZXJzaW9ucyBpZiB0aGV5IGFyZSBub3QgZXhwbGljaXRlbHkgc3BlY2lmaWVkIGFzIG51bGwgb3IgYSBuZXcgc3ludGF4LlxuICAgICAgICAgICAgdmFyIHN0b3Jlc1NwZWMgPSB7fTtcbiAgICAgICAgICAgIHZlcnNpb25zLmZvckVhY2goZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAvLyAndmVyc2lvbnMnIGlzIGFsd2F5cyBzb3J0ZWQgYnkgbG93ZXN0IHZlcnNpb24gZmlyc3QuXG4gICAgICAgICAgICAgICAgZXh0ZW5kKHN0b3Jlc1NwZWMsIHZlcnNpb24uX2NmZy5zdG9yZXNTb3VyY2UpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBkYnNjaGVtYSA9IHRoaXMuX2NmZy5kYnNjaGVtYSA9IHt9O1xuICAgICAgICAgICAgdGhpcy5fcGFyc2VTdG9yZXNTcGVjKHN0b3Jlc1NwZWMsIGRic2NoZW1hKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGF0ZXN0IHNjaGVtYSB0byB0aGlzIHZlcnNpb25cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBBUElcbiAgICAgICAgICAgIGdsb2JhbFNjaGVtYSA9IGRiLl9kYlNjaGVtYSA9IGRic2NoZW1hO1xuICAgICAgICAgICAgcmVtb3ZlVGFibGVzQXBpKFthbGxUYWJsZXMsIGRiLCBUcmFuc2FjdGlvbi5wcm90b3R5cGVdKTtcbiAgICAgICAgICAgIHNldEFwaU9uUGxhY2UoW2FsbFRhYmxlcywgZGIsIFRyYW5zYWN0aW9uLnByb3RvdHlwZSwgdGhpcy5fY2ZnLnRhYmxlc10sIGtleXMoZGJzY2hlbWEpLCBSRUFEV1JJVEUsIGRic2NoZW1hKTtcbiAgICAgICAgICAgIGRiU3RvcmVOYW1lcyA9IGtleXMoZGJzY2hlbWEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIHVwZ3JhZGU6IGZ1bmN0aW9uICh1cGdyYWRlRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInVwZ3JhZGVGdW5jdGlvblwiIG9wdGlvbmFsPVwidHJ1ZVwiPkZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgdXBncmFkaW5nIGFjdGlvbnMuPC9wYXJhbT5cbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIGZha2VBdXRvQ29tcGxldGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHVwZ3JhZGVGdW5jdGlvbihkYi5fY3JlYXRlVHJhbnNhY3Rpb24oUkVBRFdSSVRFLCBrZXlzKHNlbGYuX2NmZy5kYnNjaGVtYSksIHNlbGYuX2NmZy5kYnNjaGVtYSkpOyAvLyBCVUdCVUc6IE5vIGNvZGUgY29tcGxldGlvbiBmb3IgcHJldiB2ZXJzaW9uJ3MgdGFibGVzIHdvbnQgYXBwZWFyLlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9jZmcuY29udGVudFVwZ3JhZGUgPSB1cGdyYWRlRnVuY3Rpb247XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgX3BhcnNlU3RvcmVzU3BlYzogZnVuY3Rpb24gKHN0b3Jlcywgb3V0U2NoZW1hKSB7XG4gICAgICAgICAgICBrZXlzKHN0b3JlcykuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3Jlc1t0YWJsZU5hbWVdICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZVRlbXBsYXRlID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleGVzID0gcGFyc2VJbmRleFN5bnRheChzdG9yZXNbdGFibGVOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmltS2V5ID0gaW5kZXhlcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJpbUtleS5tdWx0aSkgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiUHJpbWFyeSBrZXkgY2Fubm90IGJlIG11bHRpLXZhbHVlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1LZXkua2V5UGF0aCkgc2V0QnlLZXlQYXRoKGluc3RhbmNlVGVtcGxhdGUsIHByaW1LZXkua2V5UGF0aCwgcHJpbUtleS5hdXRvID8gMCA6IHByaW1LZXkua2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4LmF1dG8pIHRocm93IG5ldyBleGNlcHRpb25zLlNjaGVtYShcIk9ubHkgcHJpbWFyeSBrZXkgY2FuIGJlIG1hcmtlZCBhcyBhdXRvSW5jcmVtZW50ICgrKylcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlkeC5rZXlQYXRoKSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TY2hlbWEoXCJJbmRleCBtdXN0IGhhdmUgYSBuYW1lIGFuZCBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGluc3RhbmNlVGVtcGxhdGUsIGlkeC5rZXlQYXRoLCBpZHguY29tcG91bmQgPyBpZHgua2V5UGF0aC5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG91dFNjaGVtYVt0YWJsZU5hbWVdID0gbmV3IFRhYmxlU2NoZW1hKHRhYmxlTmFtZSwgcHJpbUtleSwgaW5kZXhlcywgaW5zdGFuY2VUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHJ1blVwZ3JhZGVycyhvbGRWZXJzaW9uLCBpZGJ0cmFucywgcmVqZWN0KSB7XG4gICAgICAgIHZhciB0cmFucyA9IGRiLl9jcmVhdGVUcmFuc2FjdGlvbihSRUFEV1JJVEUsIGRiU3RvcmVOYW1lcywgZ2xvYmFsU2NoZW1hKTtcbiAgICAgICAgdHJhbnMuY3JlYXRlKGlkYnRyYW5zKTtcbiAgICAgICAgdHJhbnMuX2NvbXBsZXRpb24uY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgdmFyIHJlamVjdFRyYW5zYWN0aW9uID0gdHJhbnMuX3JlamVjdC5iaW5kKHRyYW5zKTtcbiAgICAgICAgbmV3U2NvcGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgUFNELnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICBpZiAob2xkVmVyc2lvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0YWJsZXM6XG4gICAgICAgICAgICAgICAga2V5cyhnbG9iYWxTY2hlbWEpLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWJsZShpZGJ0cmFucywgdGFibGVOYW1lLCBnbG9iYWxTY2hlbWFbdGFibGVOYW1lXS5wcmltS2V5LCBnbG9iYWxTY2hlbWFbdGFibGVOYW1lXS5pbmRleGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBQcm9taXNlLmZvbGxvdyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYi5vbi5wb3B1bGF0ZS5maXJlKHRyYW5zKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChyZWplY3RUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICB9IGVsc2UgdXBkYXRlVGFibGVzQW5kSW5kZXhlcyhvbGRWZXJzaW9uLCB0cmFucywgaWRidHJhbnMpLmNhdGNoKHJlamVjdFRyYW5zYWN0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVGFibGVzQW5kSW5kZXhlcyhvbGRWZXJzaW9uLCB0cmFucywgaWRidHJhbnMpIHtcbiAgICAgICAgLy8gVXBncmFkZSB2ZXJzaW9uIHRvIHZlcnNpb24sIHN0ZXAtYnktc3RlcCBmcm9tIG9sZGVzdCB0byBuZXdlc3QgdmVyc2lvbi5cbiAgICAgICAgLy8gRWFjaCB0cmFuc2FjdGlvbiBvYmplY3Qgd2lsbCBjb250YWluIHRoZSB0YWJsZSBzZXQgdGhhdCB3YXMgY3VycmVudCBpbiB0aGF0IHZlcnNpb24gKGJ1dCBhbHNvIG5vdC15ZXQtZGVsZXRlZCB0YWJsZXMgZnJvbSBpdHMgcHJldmlvdXMgdmVyc2lvbilcbiAgICAgICAgdmFyIHF1ZXVlID0gW107XG4gICAgICAgIHZhciBvbGRWZXJzaW9uU3RydWN0ID0gdmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbi5fY2ZnLnZlcnNpb24gPT09IG9sZFZlcnNpb247XG4gICAgICAgIH0pWzBdO1xuICAgICAgICBpZiAoIW9sZFZlcnNpb25TdHJ1Y3QpIHRocm93IG5ldyBleGNlcHRpb25zLlVwZ3JhZGUoXCJEZXhpZSBzcGVjaWZpY2F0aW9uIG9mIGN1cnJlbnRseSBpbnN0YWxsZWQgREIgdmVyc2lvbiBpcyBtaXNzaW5nXCIpO1xuICAgICAgICBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWEgPSBvbGRWZXJzaW9uU3RydWN0Ll9jZmcuZGJzY2hlbWE7XG4gICAgICAgIHZhciBhbnlDb250ZW50VXBncmFkZXJIYXNSdW4gPSBmYWxzZTtcblxuICAgICAgICB2YXIgdmVyc1RvUnVuID0gdmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICByZXR1cm4gdi5fY2ZnLnZlcnNpb24gPiBvbGRWZXJzaW9uO1xuICAgICAgICB9KTtcbiAgICAgICAgdmVyc1RvUnVuLmZvckVhY2goZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInZlcnNpb25cIiB0eXBlPVwiVmVyc2lvblwiPjwvcGFyYW0+XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkU2NoZW1hID0gZ2xvYmFsU2NoZW1hO1xuICAgICAgICAgICAgICAgIHZhciBuZXdTY2hlbWEgPSB2ZXJzaW9uLl9jZmcuZGJzY2hlbWE7XG4gICAgICAgICAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMob2xkU2NoZW1hLCBpZGJ0cmFucyk7XG4gICAgICAgICAgICAgICAgYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMobmV3U2NoZW1hLCBpZGJ0cmFucyk7XG4gICAgICAgICAgICAgICAgZ2xvYmFsU2NoZW1hID0gZGIuX2RiU2NoZW1hID0gbmV3U2NoZW1hO1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gZ2V0U2NoZW1hRGlmZihvbGRTY2hlbWEsIG5ld1NjaGVtYSk7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRhYmxlcyAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGlmZi5hZGQuZm9yRWFjaChmdW5jdGlvbiAodHVwbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFibGUoaWRidHJhbnMsIHR1cGxlWzBdLCB0dXBsZVsxXS5wcmltS2V5LCB0dXBsZVsxXS5pbmRleGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBDaGFuZ2UgdGFibGVzXG4gICAgICAgICAgICAgICAgZGlmZi5jaGFuZ2UuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2UucmVjcmVhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlVwZ3JhZGUoXCJOb3QgeWV0IHN1cHBvcnQgZm9yIGNoYW5naW5nIHByaW1hcnkga2V5XCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gaWRidHJhbnMub2JqZWN0U3RvcmUoY2hhbmdlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGluZGV4ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5hZGQuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkSW5kZXgoc3RvcmUsIGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBpbmRleGVzXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuY2hhbmdlLmZvckVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmRlbGV0ZUluZGV4KGlkeC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRJbmRleChzdG9yZSwgaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIGluZGV4ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5kZWwuZm9yRWFjaChmdW5jdGlvbiAoaWR4TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmRlbGV0ZUluZGV4KGlkeE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodmVyc2lvbi5fY2ZnLmNvbnRlbnRVcGdyYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFueUNvbnRlbnRVcGdyYWRlckhhc1J1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmZvbGxvdyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uLl9jZmcuY29udGVudFVwZ3JhZGUodHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZnVuY3Rpb24gKGlkYnRyYW5zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhbnlDb250ZW50VXBncmFkZXJIYXNSdW4gfHwgIWhhc0lFRGVsZXRlT2JqZWN0U3RvcmVCdWcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9udCBkZWxldGUgb2xkIHRhYmxlcyBpZiBpZUJ1ZyBpcyBwcmVzZW50IGFuZCBhIGNvbnRlbnQgdXBncmFkZXIgaGFzIHJ1bi4gTGV0IHRhYmxlcyBiZSBsZWZ0IGluIERCIHNvIGZhci4gVGhpcyBuZWVkcyB0byBiZSB0YWtlbiBjYXJlIG9mLlxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2NoZW1hID0gdmVyc2lvbi5fY2ZnLmRic2NoZW1hO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgb2xkIHRhYmxlc1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVSZW1vdmVkVGFibGVzKG5ld1NjaGVtYSwgaWRidHJhbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBOb3csIGNyZWF0ZSBhIHF1ZXVlIGV4ZWN1dGlvbiBlbmdpbmVcbiAgICAgICAgZnVuY3Rpb24gcnVuUXVldWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gcXVldWUubGVuZ3RoID8gUHJvbWlzZS5yZXNvbHZlKHF1ZXVlLnNoaWZ0KCkodHJhbnMuaWRidHJhbnMpKS50aGVuKHJ1blF1ZXVlKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJ1blF1ZXVlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjcmVhdGVNaXNzaW5nVGFibGVzKGdsb2JhbFNjaGVtYSwgaWRidHJhbnMpOyAvLyBBdCBsYXN0LCBtYWtlIHN1cmUgdG8gY3JlYXRlIGFueSBtaXNzaW5nIHRhYmxlcy4gKE5lZWRlZCBieSBhZGRvbnMgdGhhdCBhZGQgc3RvcmVzIHRvIERCIHdpdGhvdXQgc3BlY2lmeWluZyB2ZXJzaW9uKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTY2hlbWFEaWZmKG9sZFNjaGVtYSwgbmV3U2NoZW1hKSB7XG4gICAgICAgIHZhciBkaWZmID0ge1xuICAgICAgICAgICAgZGVsOiBbXSwgLy8gQXJyYXkgb2YgdGFibGUgbmFtZXNcbiAgICAgICAgICAgIGFkZDogW10sIC8vIEFycmF5IG9mIFt0YWJsZU5hbWUsIG5ld0RlZmluaXRpb25dXG4gICAgICAgICAgICBjaGFuZ2U6IFtdIC8vIEFycmF5IG9mIHtuYW1lOiB0YWJsZU5hbWUsIHJlY3JlYXRlOiBuZXdEZWZpbml0aW9uLCBkZWw6IGRlbEluZGV4TmFtZXMsIGFkZDogbmV3SW5kZXhEZWZzLCBjaGFuZ2U6IGNoYW5nZWRJbmRleERlZnN9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIHRhYmxlIGluIG9sZFNjaGVtYSkge1xuICAgICAgICAgICAgaWYgKCFuZXdTY2hlbWFbdGFibGVdKSBkaWZmLmRlbC5wdXNoKHRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHRhYmxlIGluIG5ld1NjaGVtYSkge1xuICAgICAgICAgICAgdmFyIG9sZERlZiA9IG9sZFNjaGVtYVt0YWJsZV0sXG4gICAgICAgICAgICAgICAgbmV3RGVmID0gbmV3U2NoZW1hW3RhYmxlXTtcbiAgICAgICAgICAgIGlmICghb2xkRGVmKSB7XG4gICAgICAgICAgICAgICAgZGlmZi5hZGQucHVzaChbdGFibGUsIG5ld0RlZl0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZGVmOiBuZXdEZWYsXG4gICAgICAgICAgICAgICAgICAgIHJlY3JlYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGVsOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgYWRkOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKG9sZERlZi5wcmltS2V5LnNyYyAhPT0gbmV3RGVmLnByaW1LZXkuc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFByaW1hcnkga2V5IGhhcyBjaGFuZ2VkLiBSZW1vdmUgYW5kIHJlLWFkZCB0YWJsZS5cbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlLnJlY3JlYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGlmZi5jaGFuZ2UucHVzaChjaGFuZ2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNhbWUgcHJpbWFyeSBrZXkuIEp1c3QgZmluZCBvdXQgd2hhdCBkaWZmZXJzOlxuICAgICAgICAgICAgICAgICAgICB2YXIgb2xkSW5kZXhlcyA9IG9sZERlZi5pZHhCeU5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdJbmRleGVzID0gbmV3RGVmLmlkeEJ5TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaWR4TmFtZSBpbiBvbGRJbmRleGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld0luZGV4ZXNbaWR4TmFtZV0pIGNoYW5nZS5kZWwucHVzaChpZHhOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGlkeE5hbWUgaW4gbmV3SW5kZXhlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZElkeCA9IG9sZEluZGV4ZXNbaWR4TmFtZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SWR4ID0gbmV3SW5kZXhlc1tpZHhOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2xkSWR4KSBjaGFuZ2UuYWRkLnB1c2gobmV3SWR4KTtlbHNlIGlmIChvbGRJZHguc3JjICE9PSBuZXdJZHguc3JjKSBjaGFuZ2UuY2hhbmdlLnB1c2gobmV3SWR4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlLmRlbC5sZW5ndGggPiAwIHx8IGNoYW5nZS5hZGQubGVuZ3RoID4gMCB8fCBjaGFuZ2UuY2hhbmdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYuY2hhbmdlLnB1c2goY2hhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlmZjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZShpZGJ0cmFucywgdGFibGVOYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImlkYnRyYW5zXCIgdHlwZT1cIklEQlRyYW5zYWN0aW9uXCI+PC9wYXJhbT5cbiAgICAgICAgdmFyIHN0b3JlID0gaWRidHJhbnMuZGIuY3JlYXRlT2JqZWN0U3RvcmUodGFibGVOYW1lLCBwcmltS2V5LmtleVBhdGggPyB7IGtleVBhdGg6IHByaW1LZXkua2V5UGF0aCwgYXV0b0luY3JlbWVudDogcHJpbUtleS5hdXRvIH0gOiB7IGF1dG9JbmNyZW1lbnQ6IHByaW1LZXkuYXV0byB9KTtcbiAgICAgICAgaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgIGFkZEluZGV4KHN0b3JlLCBpZHgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pc3NpbmdUYWJsZXMobmV3U2NoZW1hLCBpZGJ0cmFucykge1xuICAgICAgICBrZXlzKG5ld1NjaGVtYSkuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnModGFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZVRhYmxlKGlkYnRyYW5zLCB0YWJsZU5hbWUsIG5ld1NjaGVtYVt0YWJsZU5hbWVdLnByaW1LZXksIG5ld1NjaGVtYVt0YWJsZU5hbWVdLmluZGV4ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWxldGVSZW1vdmVkVGFibGVzKG5ld1NjaGVtYSwgaWRidHJhbnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZGJ0cmFucy5kYi5vYmplY3RTdG9yZU5hbWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc3RvcmVOYW1lID0gaWRidHJhbnMuZGIub2JqZWN0U3RvcmVOYW1lc1tpXTtcbiAgICAgICAgICAgIGlmIChuZXdTY2hlbWFbc3RvcmVOYW1lXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWRidHJhbnMuZGIuZGVsZXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEluZGV4KHN0b3JlLCBpZHgpIHtcbiAgICAgICAgc3RvcmUuY3JlYXRlSW5kZXgoaWR4Lm5hbWUsIGlkeC5rZXlQYXRoLCB7IHVuaXF1ZTogaWR4LnVuaXF1ZSwgbXVsdGlFbnRyeTogaWR4Lm11bHRpIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRiVW5jYXVnaHQoZXJyKSB7XG4gICAgICAgIHJldHVybiBkYi5vbi5lcnJvci5maXJlKGVycik7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vICAgICAgRGV4aWUgUHJvdGVjdGVkIEFQSVxuICAgIC8vXG4gICAgLy9cblxuICAgIHRoaXMuX2FsbFRhYmxlcyA9IGFsbFRhYmxlcztcblxuICAgIHRoaXMuX3RhYmxlRmFjdG9yeSA9IGZ1bmN0aW9uIGNyZWF0ZVRhYmxlKG1vZGUsIHRhYmxlU2NoZW1hKSB7XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRhYmxlU2NoZW1hXCIgdHlwZT1cIlRhYmxlU2NoZW1hXCI+PC9wYXJhbT5cbiAgICAgICAgaWYgKG1vZGUgPT09IFJFQURPTkxZKSByZXR1cm4gbmV3IFRhYmxlKHRhYmxlU2NoZW1hLm5hbWUsIHRhYmxlU2NoZW1hLCBDb2xsZWN0aW9uKTtlbHNlIHJldHVybiBuZXcgV3JpdGVhYmxlVGFibGUodGFibGVTY2hlbWEubmFtZSwgdGFibGVTY2hlbWEpO1xuICAgIH07XG5cbiAgICB0aGlzLl9jcmVhdGVUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uIChtb2RlLCBzdG9yZU5hbWVzLCBkYnNjaGVtYSwgcGFyZW50VHJhbnNhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbihtb2RlLCBzdG9yZU5hbWVzLCBkYnNjaGVtYSwgcGFyZW50VHJhbnNhY3Rpb24pO1xuICAgIH07XG5cbiAgICAvKiBHZW5lcmF0ZSBhIHRlbXBvcmFyeSB0cmFuc2FjdGlvbiB3aGVuIGRiIG9wZXJhdGlvbnMgYXJlIGRvbmUgb3V0c2lkZSBhIHRyYW5zYWN0aW5vIHNjb3BlLlxyXG4gICAgKi9cbiAgICBmdW5jdGlvbiB0ZW1wVHJhbnNhY3Rpb24obW9kZSwgc3RvcmVOYW1lcywgZm4pIHtcbiAgICAgICAgLy8gTGFzdCBhcmd1bWVudCBpcyBcIndyaXRlTG9ja2VkXCIuIEJ1dCB0aGlzIGRvZXNudCBhcHBseSB0byBvbmVzaG90IGRpcmVjdCBkYiBvcGVyYXRpb25zLCBzbyB3ZSBpZ25vcmUgaXQuXG4gICAgICAgIGlmICghb3BlbkNvbXBsZXRlICYmICFQU0QubGV0VGhyb3VnaCkge1xuICAgICAgICAgICAgaWYgKCFpc0JlaW5nT3BlbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhdXRvT3BlbikgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5EYXRhYmFzZUNsb3NlZCgpLCBkYlVuY2F1Z2h0KTtcbiAgICAgICAgICAgICAgICBkYi5vcGVuKCkuY2F0Y2gobm9wKTsgLy8gT3BlbiBpbiBiYWNrZ3JvdW5kLiBJZiBpZiBmYWlscywgaXQgd2lsbCBiZSBjYXRjaGVkIGJ5IHRoZSBmaW5hbCBwcm9taXNlIGFueXdheS5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYlJlYWR5UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGVtcFRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGZuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRyYW5zID0gZGIuX2NyZWF0ZVRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGdsb2JhbFNjaGVtYSk7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnMuX3Byb21pc2UobW9kZSwgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT1BUSU1JWkFUSU9OIFBPU1NJQkxFPyBuZXdTY29wZSgpIG5vdCBuZWVkZWQgYmVjYXVzZSBpdCdzIGFscmVhZHkgZG9uZSBpbiBfcHJvbWlzZS5cbiAgICAgICAgICAgICAgICAgICAgUFNELnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICAgICAgICAgIGZuKHJlc29sdmUsIHJlamVjdCwgdHJhbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgLy8gSW5zdGVhZCBvZiByZXNvbHZpbmcgdmFsdWUgZGlyZWN0bHksIHdhaXQgd2l0aCByZXNvbHZpbmcgaXQgdW50aWwgdHJhbnNhY3Rpb24gaGFzIGNvbXBsZXRlZC5cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgdGhlIGRhdGEgd291bGQgbm90IGJlIGluIHRoZSBEQiBpZiByZXF1ZXN0aW5nIGl0IGluIHRoZSB0aGVuKCkgb3BlcmF0aW9uLlxuICAgICAgICAgICAgICAgIC8vIFNwZWNpZmljYWxseSwgdG8gZW5zdXJlIHRoYXQgdGhlIGZvbGxvd2luZyBleHByZXNzaW9uIHdpbGwgd29yazpcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgZGIuZnJpZW5kcy5wdXQoe25hbWU6IFwiQXJuZVwifSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgZGIuZnJpZW5kcy53aGVyZShcIm5hbWVcIikuZXF1YWxzKFwiQXJuZVwiKS5jb3VudChmdW5jdGlvbihjb3VudCkge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICBhc3NlcnQgKGNvdW50ID09PSAxKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyAgIH0pO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zLl9jb21wbGV0aW9uLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7IC8qLmNhdGNoKGVyciA9PiB7IC8vIERvbid0IGRvIHRoaXMgYXMgb2Ygbm93LiBJZiB3b3VsZCBhZmZlY3QgYnVsay0gYW5kIG1vZGlmeSBtZXRob2RzIGluIGEgd2F5IHRoYXQgY291bGQgYmUgbW9yZSBpbnR1aXRpdmUuIEJ1dCB3YWl0ISBNYXliZSBjaGFuZ2UgaW4gbmV4dCBtYWpvci5cclxuICAgICAgICAgICAgICAgICB0cmFucy5fcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7Ki9cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3doZW5SZWFkeSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZmFrZSB8fCBvcGVuQ29tcGxldGUgfHwgUFNELmxldFRocm91Z2ggPyBmbiA6IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmICghaXNCZWluZ09wZW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICghYXV0b09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRiLm9wZW4oKS5jYXRjaChub3ApOyAvLyBPcGVuIGluIGJhY2tncm91bmQuIElmIGlmIGZhaWxzLCBpdCB3aWxsIGJlIGNhdGNoZWQgYnkgdGhlIGZpbmFsIHByb21pc2UgYW55d2F5LlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGJSZWFkeVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZm4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS51bmNhdWdodChkYlVuY2F1Z2h0KTtcbiAgICB9O1xuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICAvLyAgICAgIERleGllIEFQSVxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuXG4gICAgdGhpcy52ZXJubyA9IDA7XG5cbiAgICB0aGlzLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpc0JlaW5nT3BlbmVkIHx8IGlkYmRiKSByZXR1cm4gZGJSZWFkeVByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGJPcGVuRXJyb3IgPyByZWplY3Rpb24oZGJPcGVuRXJyb3IsIGRiVW5jYXVnaHQpIDogZGI7XG4gICAgICAgIH0pO1xuICAgICAgICBkZWJ1ZyAmJiAob3BlbkNhbmNlbGxlci5fc3RhY2tIb2xkZXIgPSBnZXRFcnJvcldpdGhTdGFjaygpKTsgLy8gTGV0IHN0YWNrcyBwb2ludCB0byB3aGVuIG9wZW4oKSB3YXMgY2FsbGVkIHJhdGhlciB0aGFuIHdoZXJlIG5ldyBEZXhpZSgpIHdhcyBjYWxsZWQuXG4gICAgICAgIGlzQmVpbmdPcGVuZWQgPSB0cnVlO1xuICAgICAgICBkYk9wZW5FcnJvciA9IG51bGw7XG4gICAgICAgIG9wZW5Db21wbGV0ZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIEZ1bmN0aW9uIHBvaW50ZXJzIHRvIGNhbGwgd2hlbiB0aGUgY29yZSBvcGVuaW5nIHByb2Nlc3MgY29tcGxldGVzLlxuICAgICAgICB2YXIgcmVzb2x2ZURiUmVhZHkgPSBkYlJlYWR5UmVzb2x2ZSxcblxuICAgICAgICAvLyB1cGdyYWRlVHJhbnNhY3Rpb24gdG8gYWJvcnQgb24gZmFpbHVyZS5cbiAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtvcGVuQ2FuY2VsbGVyLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBkb0Zha2VBdXRvQ29tcGxldGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGNhbGxlciBoYXMgc3BlY2lmaWVkIGF0IGxlYXN0IG9uZSB2ZXJzaW9uXG4gICAgICAgICAgICBpZiAodmVyc2lvbnMubGVuZ3RoID4gMCkgYXV0b1NjaGVtYSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBNdWx0aXBseSBkYi52ZXJubyB3aXRoIDEwIHdpbGwgYmUgbmVlZGVkIHRvIHdvcmthcm91bmQgdXBncmFkaW5nIGJ1ZyBpbiBJRTpcbiAgICAgICAgICAgIC8vIElFIGZhaWxzIHdoZW4gZGVsZXRpbmcgb2JqZWN0U3RvcmUgYWZ0ZXIgcmVhZGluZyBmcm9tIGl0LlxuICAgICAgICAgICAgLy8gQSBmdXR1cmUgdmVyc2lvbiBvZiBEZXhpZS5qcyB3aWxsIHN0b3BvdmVyIGFuIGludGVybWVkaWF0ZSB2ZXJzaW9uIHRvIHdvcmthcm91bmQgdGhpcy5cbiAgICAgICAgICAgIC8vIEF0IHRoYXQgcG9pbnQsIHdlIHdhbnQgdG8gYmUgYmFja3dhcmQgY29tcGF0aWJsZS4gQ291bGQgaGF2ZSBiZWVuIG11bHRpcGxpZWQgd2l0aCAyLCBidXQgYnkgdXNpbmcgMTAsIGl0IGlzIGVhc2llciB0byBtYXAgdGhlIG51bWJlciB0byB0aGUgcmVhbCB2ZXJzaW9uIG51bWJlci5cblxuICAgICAgICAgICAgLy8gSWYgbm8gQVBJLCB0aHJvdyFcbiAgICAgICAgICAgIGlmICghaW5kZXhlZERCKSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5NaXNzaW5nQVBJKFwiaW5kZXhlZERCIEFQSSBub3QgZm91bmQuIElmIHVzaW5nIElFMTArLCBtYWtlIHN1cmUgdG8gcnVuIHlvdXIgY29kZSBvbiBhIHNlcnZlciBVUkwgXCIgKyBcIihub3QgbG9jYWxseSkuIElmIHVzaW5nIG9sZCBTYWZhcmkgdmVyc2lvbnMsIG1ha2Ugc3VyZSB0byBpbmNsdWRlIGluZGV4ZWREQiBwb2x5ZmlsbC5cIik7XG5cbiAgICAgICAgICAgIHZhciByZXEgPSBhdXRvU2NoZW1hID8gaW5kZXhlZERCLm9wZW4oZGJOYW1lKSA6IGluZGV4ZWREQi5vcGVuKGRiTmFtZSwgTWF0aC5yb3VuZChkYi52ZXJubyAqIDEwKSk7XG4gICAgICAgICAgICBpZiAoIXJlcSkgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTWlzc2luZ0FQSShcIkluZGV4ZWREQiBBUEkgbm90IGF2YWlsYWJsZVwiKTsgLy8gTWF5IGhhcHBlbiBpbiBTYWZhcmkgcHJpdmF0ZSBtb2RlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2RmYWhsYW5kZXIvRGV4aWUuanMvaXNzdWVzLzEzNFxuICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSB3cmFwKGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpKTtcbiAgICAgICAgICAgIHJlcS5vbmJsb2NrZWQgPSB3cmFwKGZpcmVPbkJsb2NrZWQpO1xuICAgICAgICAgICAgcmVxLm9udXBncmFkZW5lZWRlZCA9IHdyYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gPSByZXEudHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgaWYgKGF1dG9TY2hlbWEgJiYgIWRiLl9hbGxvd0VtcHR5REIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVW5sZXNzIGFuIGFkZG9uIGhhcyBzcGVjaWZpZWQgZGIuX2FsbG93RW1wdHlEQiwgbGV0cyBtYWtlIHRoZSBjYWxsIGZhaWwuXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGxlciBkaWQgbm90IHNwZWNpZnkgYSB2ZXJzaW9uIG9yIHNjaGVtYS4gRG9pbmcgdGhhdCBpcyBvbmx5IGFjY2VwdGFibGUgZm9yIG9wZW5pbmcgYWxyZWFkIGV4aXN0aW5nIGRhdGFiYXNlcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgb251cGdyYWRlbmVlZGVkIGlzIGNhbGxlZCBpdCBtZWFucyBkYXRhYmFzZSBkaWQgbm90IGV4aXN0LiBSZWplY3QgdGhlIG9wZW4oKSBwcm9taXNlIGFuZCBtYWtlIHN1cmUgdGhhdCB3ZVxuICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgY3JlYXRlIGEgbmV3IGRhdGFiYXNlIGJ5IGFjY2lkZW50IGhlcmUuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gcHJldmVudERlZmF1bHQ7IC8vIFByb2hpYml0IG9uYWJvcnQgZXJyb3IgZnJvbSBmaXJpbmcgYmVmb3JlIHdlJ3JlIGRvbmUhXG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbi5hYm9ydCgpOyAvLyBBYm9ydCB0cmFuc2FjdGlvbiAod291bGQgaG9wZSB0aGF0IHRoaXMgd291bGQgbWFrZSBEQiBkaXNhcHBlYXIgYnV0IGl0IGRvZXNudC4pXG4gICAgICAgICAgICAgICAgICAgIC8vIENsb3NlIGRhdGFiYXNlIGFuZCBkZWxldGUgaXQuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5yZXN1bHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHJlcSA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShkYk5hbWUpOyAvLyBUaGUgdXBncmFkZSB0cmFuc2FjdGlvbiBpcyBhdG9taWMsIGFuZCBqYXZhc2NyaXB0IGlzIHNpbmdsZSB0aHJlYWRlZCAtIG1lYW5pbmcgdGhhdCB0aGVyZSBpcyBubyByaXNrIHRoYXQgd2UgZGVsZXRlIHNvbWVvbmUgZWxzZXMgZGF0YWJhc2UgaGVyZSFcbiAgICAgICAgICAgICAgICAgICAgZGVscmVxLm9uc3VjY2VzcyA9IGRlbHJlcS5vbmVycm9yID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IGV4Y2VwdGlvbnMuTm9TdWNoRGF0YWJhc2UoJ0RhdGFiYXNlICcgKyBkYk5hbWUgKyAnIGRvZXNudCBleGlzdCcpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uLm9uZXJyb3IgPSB3cmFwKGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFZlciA9IGUub2xkVmVyc2lvbiA+IE1hdGgucG93KDIsIDYyKSA/IDAgOiBlLm9sZFZlcnNpb247IC8vIFNhZmFyaSA4IGZpeC5cbiAgICAgICAgICAgICAgICAgICAgcnVuVXBncmFkZXJzKG9sZFZlciAvIDEwLCB1cGdyYWRlVHJhbnNhY3Rpb24sIHJlamVjdCwgcmVxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuXG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29yZSBvcGVuaW5nIHByb2NlZHVyZSBjb21wbGV0ZS4gTm93IGxldCdzIGp1c3QgcmVjb3JkIHNvbWUgc3R1ZmYuXG4gICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZGJkYiA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbnMucHVzaChkYik7IC8vIFVzZWQgZm9yIGVtdWxhdGluZyB2ZXJzaW9uY2hhbmdlIGV2ZW50IG9uIElFL0VkZ2UvU2FmYXJpLlxuXG4gICAgICAgICAgICAgICAgaWYgKGF1dG9TY2hlbWEpIHJlYWRHbG9iYWxTY2hlbWEoKTtlbHNlIGlmIChpZGJkYi5vYmplY3RTdG9yZU5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkanVzdFRvRXhpc3RpbmdJbmRleE5hbWVzKGdsb2JhbFNjaGVtYSwgaWRiZGIudHJhbnNhY3Rpb24oc2FmYXJpTXVsdGlTdG9yZUZpeChpZGJkYi5vYmplY3RTdG9yZU5hbWVzKSwgUkVBRE9OTFkpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2FmYXJpIG1heSBiYWlsIG91dCBpZiA+IDEgc3RvcmUgbmFtZXMuIEhvd2V2ZXIsIHRoaXMgc2hvdWxkbnQgYmUgYSBzaG93c3RvcHBlci4gSXNzdWUgIzEyMC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlkYmRiLm9udmVyc2lvbmNoYW5nZSA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLl92Y0ZpcmVkID0gdHJ1ZTsgLy8gZGV0ZWN0IGltcGxlbWVudGF0aW9ucyB0aGF0IG5vdCBzdXBwb3J0IHZlcnNpb25jaGFuZ2UgKElFL0VkZ2UvU2FmYXJpKVxuICAgICAgICAgICAgICAgICAgICBkYi5vbihcInZlcnNpb25jaGFuZ2VcIikuZmlyZShldik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWhhc05hdGl2ZUdldERhdGFiYXNlTmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsU3RvcmFnZSB3aXRoIGxpc3Qgb2YgZGF0YWJhc2UgbmFtZXNcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRGF0YWJhc2VMaXN0KGZ1bmN0aW9uIChkYXRhYmFzZU5hbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YWJhc2VOYW1lcy5pbmRleE9mKGRiTmFtZSkgPT09IC0xKSByZXR1cm4gZGF0YWJhc2VOYW1lcy5wdXNoKGRiTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH0pXSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBCZWZvcmUgZmluYWxseSByZXNvbHZpbmcgdGhlIGRiUmVhZHlQcm9taXNlIGFuZCB0aGlzIHByb21pc2UsXG4gICAgICAgICAgICAvLyBjYWxsIGFuZCBhd2FpdCBhbGwgb24oJ3JlYWR5Jykgc3Vic2NyaWJlcnM6XG4gICAgICAgICAgICAvLyBEZXhpZS52aXAoKSBtYWtlcyBzdWJzY3JpYmVycyBhYmxlIHRvIHVzZSB0aGUgZGF0YWJhc2Ugd2hpbGUgYmVpbmcgb3BlbmVkLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIG11c3Qgc2luY2UgdGhlc2Ugc3Vic2NyaWJlcnMgdGFrZSBwYXJ0IG9mIHRoZSBvcGVuaW5nIHByb2NlZHVyZS5cbiAgICAgICAgICAgIHJldHVybiBEZXhpZS52aXAoZGIub24ucmVhZHkuZmlyZSk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gUmVzb2x2ZSB0aGUgZGIub3BlbigpIHdpdGggdGhlIGRiIGluc3RhbmNlLlxuICAgICAgICAgICAgaXNCZWluZ09wZW5lZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGRiO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIERpZCB3ZSBmYWlsIHdpdGhpbiBvbnVwZ3JhZGVuZWVkZWQ/IE1ha2Ugc3VyZSB0byBhYm9ydCB0aGUgdXBncmFkZSB0cmFuc2FjdGlvbiBzbyBpdCBkb2VzbnQgY29tbWl0LlxuICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbiAmJiB1cGdyYWRlVHJhbnNhY3Rpb24uYWJvcnQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICBpc0JlaW5nT3BlbmVkID0gZmFsc2U7IC8vIFNldCBiZWZvcmUgY2FsbGluZyBkYi5jbG9zZSgpIHNvIHRoYXQgaXQgZG9lc250IHJlamVjdCBvcGVuQ2FuY2VsbGVyIGFnYWluIChsZWFkcyB0byB1bmhhbmRsZWQgcmVqZWN0aW9uIGV2ZW50KS5cbiAgICAgICAgICAgIGRiLmNsb3NlKCk7IC8vIENsb3NlcyBhbmQgcmVzZXRzIGlkYmRiLCByZW1vdmVzIGNvbm5lY3Rpb25zLCByZXNldHMgZGJSZWFkeVByb21pc2UgYW5kIG9wZW5DYW5jZWxsZXIgc28gdGhhdCBhIGxhdGVyIGRiLm9wZW4oKSBpcyBmcmVzaC5cbiAgICAgICAgICAgIC8vIEEgY2FsbCB0byBkYi5jbG9zZSgpIG1heSBoYXZlIG1hZGUgb24tcmVhZHkgc3Vic2NyaWJlcnMgZmFpbC4gVXNlIGRiT3BlbkVycm9yIGlmIHNldCwgc2luY2UgZXJyIGNvdWxkIGJlIGEgZm9sbG93LXVwIGVycm9yIG9uIHRoYXQuXG4gICAgICAgICAgICBkYk9wZW5FcnJvciA9IGVycjsgLy8gUmVjb3JkIHRoZSBlcnJvci4gSXQgd2lsbCBiZSB1c2VkIHRvIHJlamVjdCBmdXJ0aGVyIHByb21pc2VzIG9mIGRiIG9wZXJhdGlvbnMuXG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGRiT3BlbkVycm9yLCBkYlVuY2F1Z2h0KTsgLy8gZGJVbmNhdWdodCB3aWxsIG1ha2Ugc3VyZSBhbnkgZXJyb3IgdGhhdCBoYXBwZW5lZCBpbiBhbnkgb3BlcmF0aW9uIGJlZm9yZSB3aWxsIG5vdyBidWJibGUgdG8gZGIub24uZXJyb3IoKSB0aGFua3MgdG8gdGhlIHNwZWNpYWwgaGFuZGxpbmcgaW4gUHJvbWlzZS51bmNhdWdodCgpLlxuICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9wZW5Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlRGJSZWFkeSgpOyAvLyBkYlJlYWR5UHJvbWlzZSBpcyByZXNvbHZlZCBubyBtYXR0ZXIgaWYgb3BlbigpIHJlamVjdHMgb3IgcmVzb2x2ZWQuIEl0J3MganVzdCB0byB3YWtlIHVwIHdhaXRlcnMuXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaWR4ID0gY29ubmVjdGlvbnMuaW5kZXhPZihkYik7XG4gICAgICAgIGlmIChpZHggPj0gMCkgY29ubmVjdGlvbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIGlmIChpZGJkYikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZGJkYi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIGlkYmRiID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBhdXRvT3BlbiA9IGZhbHNlO1xuICAgICAgICBkYk9wZW5FcnJvciA9IG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCk7XG4gICAgICAgIGlmIChpc0JlaW5nT3BlbmVkKSBjYW5jZWxPcGVuKGRiT3BlbkVycm9yKTtcbiAgICAgICAgLy8gUmVzZXQgZGJSZWFkeVByb21pc2UgcHJvbWlzZTpcbiAgICAgICAgZGJSZWFkeVByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgZGJSZWFkeVJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICAgICAgb3BlbkNhbmNlbGxlciA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgICAgICAgIGNhbmNlbE9wZW4gPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhc0FyZ3VtZW50cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKGhhc0FyZ3VtZW50cykgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiQXJndW1lbnRzIG5vdCBhbGxvd2VkIGluIGRiLmRlbGV0ZSgpXCIpO1xuICAgICAgICAgICAgaWYgKGlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICBkYlJlYWR5UHJvbWlzZS50aGVuKGRvRGVsZXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9EZWxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvRGVsZXRlKCkge1xuICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlcSA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShkYk5hbWUpO1xuICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNOYXRpdmVHZXREYXRhYmFzZU5hbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxEYXRhYmFzZUxpc3QoZnVuY3Rpb24gKGRhdGFiYXNlTmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gZGF0YWJhc2VOYW1lcy5pbmRleE9mKGRiTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA+PSAwKSByZXR1cm4gZGF0YWJhc2VOYW1lcy5zcGxpY2UocG9zLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IHdyYXAoZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCkpO1xuICAgICAgICAgICAgICAgIHJlcS5vbmJsb2NrZWQgPSBmaXJlT25CbG9ja2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS51bmNhdWdodChkYlVuY2F1Z2h0KTtcbiAgICB9O1xuXG4gICAgdGhpcy5iYWNrZW5kREIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpZGJkYjtcbiAgICB9O1xuXG4gICAgdGhpcy5pc09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpZGJkYiAhPT0gbnVsbDtcbiAgICB9O1xuICAgIHRoaXMuaGFzRmFpbGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZGJPcGVuRXJyb3IgIT09IG51bGw7XG4gICAgfTtcbiAgICB0aGlzLmR5bmFtaWNhbGx5T3BlbmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYXV0b1NjaGVtYTtcbiAgICB9O1xuXG4gICAgLy9cbiAgICAvLyBQcm9wZXJ0aWVzXG4gICAgLy9cbiAgICB0aGlzLm5hbWUgPSBkYk5hbWU7XG5cbiAgICAvLyBkYi50YWJsZXMgLSBhbiBhcnJheSBvZiBhbGwgVGFibGUgaW5zdGFuY2VzLlxuICAgIHNldFByb3AodGhpcywgXCJ0YWJsZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPVwiQXJyYXlcIiBlbGVtZW50VHlwZT1cIldyaXRlYWJsZVRhYmxlXCIgLz5cbiAgICAgICAgICAgIHJldHVybiBrZXlzKGFsbFRhYmxlcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbFRhYmxlc1tuYW1lXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL1xuICAgIC8vIEV2ZW50c1xuICAgIC8vXG4gICAgdGhpcy5vbiA9IEV2ZW50cyh0aGlzLCBcImVycm9yXCIsIFwicG9wdWxhdGVcIiwgXCJibG9ja2VkXCIsIFwidmVyc2lvbmNoYW5nZVwiLCB7IHJlYWR5OiBbcHJvbWlzYWJsZUNoYWluLCBub3BdIH0pO1xuICAgIHRoaXMub24uZXJyb3Iuc3Vic2NyaWJlID0gZGVwcmVjYXRlZChcIkRleGllLm9uLmVycm9yXCIsIHRoaXMub24uZXJyb3Iuc3Vic2NyaWJlKTtcbiAgICB0aGlzLm9uLmVycm9yLnVuc3Vic2NyaWJlID0gZGVwcmVjYXRlZChcIkRleGllLm9uLmVycm9yLnVuc3Vic2NyaWJlXCIsIHRoaXMub24uZXJyb3IudW5zdWJzY3JpYmUpO1xuXG4gICAgdGhpcy5vbi5yZWFkeS5zdWJzY3JpYmUgPSBvdmVycmlkZSh0aGlzLm9uLnJlYWR5LnN1YnNjcmliZSwgZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN1YnNjcmliZXIsIGJTdGlja3kpIHtcbiAgICAgICAgICAgIERleGllLnZpcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wZW5Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEYXRhYmFzZSBhbHJlYWR5IG9wZW4uIENhbGwgc3Vic2NyaWJlciBhc2FwLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRiT3BlbkVycm9yKSBQcm9taXNlLnJlc29sdmUoKS50aGVuKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAvLyBiU3RpY2t5OiBBbHNvIHN1YnNjcmliZSB0byBmdXR1cmUgb3BlbiBzdWNlc3NlcyAoYWZ0ZXIgY2xvc2UgLyByZW9wZW4pIFxuICAgICAgICAgICAgICAgICAgICBpZiAoYlN0aWNreSkgc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERhdGFiYXNlIG5vdCB5ZXQgb3Blbi4gU3Vic2NyaWJlIHRvIGl0LlxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGJTdGlja3kgaXMgZmFsc3ksIG1ha2Ugc3VyZSB0byB1bnN1YnNjcmliZSBzdWJzY3JpYmVyIHdoZW4gZmlyZWQgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiU3RpY2t5KSBzdWJzY3JpYmUoZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5vbi5yZWFkeS51bnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLm9uLnJlYWR5LnVuc3Vic2NyaWJlKHVuc3Vic2NyaWJlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICBmYWtlQXV0b0NvbXBsZXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGIub24oXCJwb3B1bGF0ZVwiKS5maXJlKGRiLl9jcmVhdGVUcmFuc2FjdGlvbihSRUFEV1JJVEUsIGRiU3RvcmVOYW1lcywgZ2xvYmFsU2NoZW1hKSk7XG4gICAgICAgIGRiLm9uKFwiZXJyb3JcIikuZmlyZShuZXcgRXJyb3IoKSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKG1vZGUsIHRhYmxlSW5zdGFuY2VzLCBzY29wZUZ1bmMpIHtcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxuICAgICAgICAvLy9cbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibW9kZVwiIHR5cGU9XCJTdHJpbmdcIj5cInJcIiBmb3IgcmVhZG9ubHksIG9yIFwicndcIiBmb3IgcmVhZHdyaXRlPC9wYXJhbT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGFibGVJbnN0YW5jZXNcIj5UYWJsZSBpbnN0YW5jZSwgQXJyYXkgb2YgVGFibGUgaW5zdGFuY2VzLCBTdHJpbmcgb3IgU3RyaW5nIEFycmF5IG9mIG9iamVjdCBzdG9yZXMgdG8gaW5jbHVkZSBpbiB0aGUgdHJhbnNhY3Rpb248L3BhcmFtPlxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzY29wZUZ1bmNcIiB0eXBlPVwiRnVuY3Rpb25cIj5GdW5jdGlvbiB0byBleGVjdXRlIHdpdGggdHJhbnNhY3Rpb248L3BhcmFtPlxuXG4gICAgICAgIC8vIExldCB0YWJsZSBhcmd1bWVudHMgYmUgYWxsIGFyZ3VtZW50cyBiZXR3ZWVuIG1vZGUgYW5kIGxhc3QgYXJndW1lbnQuXG4gICAgICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKGkgPCAyKSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJUb28gZmV3IGFyZ3VtZW50c1wiKTtcbiAgICAgICAgLy8gUHJldmVudCBvcHRpbXphdGlvbiBraWxsZXIgKGh0dHBzOi8vZ2l0aHViLmNvbS9wZXRrYWFudG9ub3YvYmx1ZWJpcmQvd2lraS9PcHRpbWl6YXRpb24ta2lsbGVycyMzMi1sZWFraW5nLWFyZ3VtZW50cylcbiAgICAgICAgLy8gYW5kIGNsb25lIGFyZ3VtZW50cyBleGNlcHQgdGhlIGZpcnN0IG9uZSBpbnRvIGxvY2FsIHZhciAnYXJncycuXG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkgLSAxKTtcbiAgICAgICAgd2hpbGUgKC0taSkge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH0gLy8gTGV0IHNjb3BlRnVuYyBiZSB0aGUgbGFzdCBhcmd1bWVudCBhbmQgcG9wIGl0IHNvIHRoYXQgYXJncyBub3cgb25seSBjb250YWluIHRoZSB0YWJsZSBhcmd1bWVudHMuXG4gICAgICAgIHNjb3BlRnVuYyA9IGFyZ3MucG9wKCk7XG4gICAgICAgIHZhciB0YWJsZXMgPSBmbGF0dGVuKGFyZ3MpOyAvLyBTdXBwb3J0IHVzaW5nIGFycmF5IGFzIG1pZGRsZSBhcmd1bWVudCwgb3IgYSBtaXggb2YgYXJyYXlzIGFuZCBub24tYXJyYXlzLlxuICAgICAgICB2YXIgcGFyZW50VHJhbnNhY3Rpb24gPSBQU0QudHJhbnM7XG4gICAgICAgIC8vIENoZWNrIGlmIHBhcmVudCB0cmFuc2FjdGlvbnMgaXMgYm91bmQgdG8gdGhpcyBkYiBpbnN0YW5jZSwgYW5kIGlmIGNhbGxlciB3YW50cyB0byByZXVzZSBpdFxuICAgICAgICBpZiAoIXBhcmVudFRyYW5zYWN0aW9uIHx8IHBhcmVudFRyYW5zYWN0aW9uLmRiICE9PSBkYiB8fCBtb2RlLmluZGV4T2YoJyEnKSAhPT0gLTEpIHBhcmVudFRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgdmFyIG9ubHlJZkNvbXBhdGlibGUgPSBtb2RlLmluZGV4T2YoJz8nKSAhPT0gLTE7XG4gICAgICAgIG1vZGUgPSBtb2RlLnJlcGxhY2UoJyEnLCAnJykucmVwbGFjZSgnPycsICcnKTsgLy8gT2suIFdpbGwgY2hhbmdlIGFyZ3VtZW50c1swXSBhcyB3ZWxsIGJ1dCB3ZSB3b250IHRvdWNoIGFyZ3VtZW50cyBoZW5jZWZvcnRoLlxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gR2V0IHN0b3JlTmFtZXMgZnJvbSBhcmd1bWVudHMuIEVpdGhlciB0aHJvdWdoIGdpdmVuIHRhYmxlIGluc3RhbmNlcywgb3IgdGhyb3VnaCBnaXZlbiB0YWJsZSBuYW1lcy5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB2YXIgc3RvcmVOYW1lcyA9IHRhYmxlcy5tYXAoZnVuY3Rpb24gKHRhYmxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHRhYmxlIGluc3RhbmNlb2YgVGFibGUgPyB0YWJsZS5uYW1lIDogdGFibGU7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdG9yZU5hbWUgIT09ICdzdHJpbmcnKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0YWJsZSBhcmd1bWVudCB0byBEZXhpZS50cmFuc2FjdGlvbigpLiBPbmx5IFRhYmxlIG9yIFN0cmluZyBhcmUgYWxsb3dlZFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVOYW1lO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBSZXNvbHZlIG1vZGUuIEFsbG93IHNob3J0Y3V0cyBcInJcIiBhbmQgXCJyd1wiLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGlmIChtb2RlID09IFwiclwiIHx8IG1vZGUgPT0gUkVBRE9OTFkpIG1vZGUgPSBSRUFET05MWTtlbHNlIGlmIChtb2RlID09IFwicndcIiB8fCBtb2RlID09IFJFQURXUklURSkgbW9kZSA9IFJFQURXUklURTtlbHNlIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkludmFsaWQgdHJhbnNhY3Rpb24gbW9kZTogXCIgKyBtb2RlKTtcblxuICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gQmFzaWMgY2hlY2tzXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uLm1vZGUgPT09IFJFQURPTkxZICYmIG1vZGUgPT09IFJFQURXUklURSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob25seUlmQ29tcGF0aWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3Bhd24gbmV3IHRyYW5zYWN0aW9uIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TdWJUcmFuc2FjdGlvbihcIkNhbm5vdCBlbnRlciBhIHN1Yi10cmFuc2FjdGlvbiB3aXRoIFJFQURXUklURSBtb2RlIHdoZW4gcGFyZW50IHRyYW5zYWN0aW9uIGlzIFJFQURPTkxZXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFyZW50VHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbiAmJiBwYXJlbnRUcmFuc2FjdGlvbi5zdG9yZU5hbWVzLmluZGV4T2Yoc3RvcmVOYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25seUlmQ29tcGF0aWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTcGF3biBuZXcgdHJhbnNhY3Rpb24gaW5zdGVhZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50VHJhbnNhY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5TdWJUcmFuc2FjdGlvbihcIlRhYmxlIFwiICsgc3RvcmVOYW1lICsgXCIgbm90IGluY2x1ZGVkIGluIHBhcmVudCB0cmFuc2FjdGlvbi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudFRyYW5zYWN0aW9uID8gcGFyZW50VHJhbnNhY3Rpb24uX3Byb21pc2UobnVsbCwgZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgIH0pIDogcmVqZWN0aW9uKGUsIGRiVW5jYXVnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoaXMgaXMgYSBzdWItdHJhbnNhY3Rpb24sIGxvY2sgdGhlIHBhcmVudCBhbmQgdGhlbiBsYXVuY2ggdGhlIHN1Yi10cmFuc2FjdGlvbi5cbiAgICAgICAgcmV0dXJuIHBhcmVudFRyYW5zYWN0aW9uID8gcGFyZW50VHJhbnNhY3Rpb24uX3Byb21pc2UobW9kZSwgZW50ZXJUcmFuc2FjdGlvblNjb3BlLCBcImxvY2tcIikgOiBkYi5fd2hlblJlYWR5KGVudGVyVHJhbnNhY3Rpb25TY29wZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZW50ZXJUcmFuc2FjdGlvblNjb3BlKHJlc29sdmUpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRQU0QgPSBQU0Q7XG4gICAgICAgICAgICByZXNvbHZlKFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgYSBwb2ludGVyIHRvIGxhc3Qgbm9uLXRyYW5zYWN0aW9uYWwgUFNEIHRvIHVzZSBpZiBzb21lb25lIGNhbGxzIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKCkuXG4gICAgICAgICAgICAgICAgICAgIFBTRC50cmFuc2xlc3MgPSBQU0QudHJhbnNsZXNzIHx8IHBhcmVudFBTRDtcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFucyA9IGRiLl9jcmVhdGVUcmFuc2FjdGlvbihtb2RlLCBzdG9yZU5hbWVzLCBnbG9iYWxTY2hlbWEsIHBhcmVudFRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gTGV0IHRoZSB0cmFuc2FjdGlvbiBpbnN0YW5jZSBiZSBwYXJ0IG9mIGEgUHJvbWlzZS1zcGVjaWZpYyBkYXRhIChQU0QpIHZhbHVlLlxuICAgICAgICAgICAgICAgICAgICBQU0QudHJhbnMgPSB0cmFucztcblxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50VHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVtdWxhdGUgdHJhbnNhY3Rpb24gY29tbWl0IGF3YXJlbmVzcyBmb3IgaW5uZXIgdHJhbnNhY3Rpb24gKG11c3QgJ2NvbW1pdCcgd2hlbiB0aGUgaW5uZXIgdHJhbnNhY3Rpb24gaGFzIG5vIG1vcmUgb3BlcmF0aW9ucyBvbmdvaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuaWRidHJhbnMgPSBwYXJlbnRUcmFuc2FjdGlvbi5pZGJ0cmFucztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLmNyZWF0ZSgpOyAvLyBDcmVhdGUgdGhlIGJhY2tlbmQgdHJhbnNhY3Rpb24gc28gdGhhdCBjb21wbGV0ZSgpIG9yIGVycm9yKCkgd2lsbCB0cmlnZ2VyIGV2ZW4gaWYgbm8gb3BlcmF0aW9uIGlzIG1hZGUgdXBvbiBpdC5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFByb3ZpZGUgYXJndW1lbnRzIHRvIHRoZSBzY29wZSBmdW5jdGlvbiAoZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZUFyZ3MgPSBzdG9yZU5hbWVzLm1hcChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFsbFRhYmxlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhYmxlQXJncy5wdXNoKHRyYW5zKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmZvbGxvdyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBjYWxsIHRoZSBzY29wZSBmdW5jdGlvbiB3aXRoIG91ciB0YWJsZSBhbmQgdHJhbnNhY3Rpb24gYXJndW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBzY29wZUZ1bmMuYXBwbHkodHJhbnMsIHRhYmxlQXJncyk7IC8vIE5PVEU6IHJldHVyblZhbHVlIGlzIHVzZWQgaW4gdHJhbnMub24uY29tcGxldGUoKSBub3QgYXMgYSByZXR1cm5WYWx1ZSB0byB0aGlzIGZ1bmMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJldHVyblZhbHVlLm5leHQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHJldHVyblZhbHVlLnRocm93ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjb3BlRnVuYyByZXR1cm5lZCBhbiBpdGVyYXRvciB3aXRoIHRocm93LXN1cHBvcnQuIEhhbmRsZSB5aWVsZCBhcyBhd2FpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhd2FpdEl0ZXJhdG9yKHJldHVyblZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXR1cm5WYWx1ZS50aGVuID09PSAnZnVuY3Rpb24nICYmICFoYXNPd24ocmV0dXJuVmFsdWUsICdfUFNEJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW5jb21wYXRpYmxlUHJvbWlzZShcIkluY29tcGF0aWJsZSBQcm9taXNlIHJldHVybmVkIGZyb20gdHJhbnNhY3Rpb24gc2NvcGUgKHJlYWQgbW9yZSBhdCBodHRwOi8vdGlueXVybC5jb20vem55cWpxYykuIFRyYW5zYWN0aW9uIHNjb3BlOiBcIiArIHNjb3BlRnVuYy50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLnVuY2F1Z2h0KGRiVW5jYXVnaHQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKSB0cmFucy5fcmVzb2x2ZSgpOyAvLyBzdWIgdHJhbnNhY3Rpb25zIGRvbid0IHJlYWN0IHRvIGlkYnRyYW5zLm9uY29tcGxldGUuIFdlIG11c3QgdHJpZ2dlciBhIGFjb21wbGV0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zLl9jb21wbGV0aW9uOyAvLyBFdmVuIGlmIFdFIGJlbGlldmUgZXZlcnl0aGluZyBpcyBmaW5lLiBBd2FpdCBJREJUcmFuc2FjdGlvbidzIG9uY29tcGxldGUgb3Igb25lcnJvciBhcyB3ZWxsLlxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuX3JlamVjdChlKTsgLy8gWWVzLCBhYm92ZSB0aGVuLWhhbmRsZXIgd2VyZSBtYXliZSBub3QgY2FsbGVkIGJlY2F1c2Ugb2YgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBpbiBzY29wZUZ1bmMhXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy99KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnRhYmxlID0gZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAvLy8gPHJldHVybnMgdHlwZT1cIldyaXRlYWJsZVRhYmxlXCI+PC9yZXR1cm5zPlxuICAgICAgICBpZiAoZmFrZSAmJiBhdXRvU2NoZW1hKSByZXR1cm4gbmV3IFdyaXRlYWJsZVRhYmxlKHRhYmxlTmFtZSk7XG4gICAgICAgIGlmICghaGFzT3duKGFsbFRhYmxlcywgdGFibGVOYW1lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZFRhYmxlKCdUYWJsZSAnICsgdGFibGVOYW1lICsgJyBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGxUYWJsZXNbdGFibGVOYW1lXTtcbiAgICB9O1xuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgLy8gVGFibGUgQ2xhc3NcbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICBmdW5jdGlvbiBUYWJsZShuYW1lLCB0YWJsZVNjaGVtYSwgY29sbENsYXNzKSB7XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5hbWVcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSB0YWJsZVNjaGVtYTtcbiAgICAgICAgdGhpcy5ob29rID0gYWxsVGFibGVzW25hbWVdID8gYWxsVGFibGVzW25hbWVdLmhvb2sgOiBFdmVudHMobnVsbCwge1xuICAgICAgICAgICAgXCJjcmVhdGluZ1wiOiBbaG9va0NyZWF0aW5nQ2hhaW4sIG5vcF0sXG4gICAgICAgICAgICBcInJlYWRpbmdcIjogW3B1cmVGdW5jdGlvbkNoYWluLCBtaXJyb3JdLFxuICAgICAgICAgICAgXCJ1cGRhdGluZ1wiOiBbaG9va1VwZGF0aW5nQ2hhaW4sIG5vcF0sXG4gICAgICAgICAgICBcImRlbGV0aW5nXCI6IFtob29rRGVsZXRpbmdDaGFpbiwgbm9wXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY29sbENsYXNzID0gY29sbENsYXNzIHx8IENvbGxlY3Rpb247XG4gICAgfVxuXG4gICAgcHJvcHMoVGFibGUucHJvdG90eXBlLCB7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGFibGUgUHJvdGVjdGVkIE1ldGhvZHNcbiAgICAgICAgLy9cblxuICAgICAgICBfdHJhbnM6IGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9uKG1vZGUsIGZuLCB3cml0ZUxvY2tlZCkge1xuICAgICAgICAgICAgdmFyIHRyYW5zID0gUFNELnRyYW5zO1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zICYmIHRyYW5zLmRiID09PSBkYiA/IHRyYW5zLl9wcm9taXNlKG1vZGUsIGZuLCB3cml0ZUxvY2tlZCkgOiB0ZW1wVHJhbnNhY3Rpb24obW9kZSwgW3RoaXMubmFtZV0sIGZuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2lkYnN0b3JlOiBmdW5jdGlvbiBnZXRJREJPYmplY3RTdG9yZShtb2RlLCBmbiwgd3JpdGVMb2NrZWQpIHtcbiAgICAgICAgICAgIGlmIChmYWtlKSByZXR1cm4gbmV3IFByb21pc2UoZm4pOyAvLyBTaW1wbGlmeSB0aGUgd29yayBmb3IgSW50ZWxsaXNlbnNlL0NvZGUgY29tcGxldGlvbi5cbiAgICAgICAgICAgIHZhciB0cmFucyA9IFBTRC50cmFucyxcbiAgICAgICAgICAgICAgICB0YWJsZU5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgICAgICBmdW5jdGlvbiBzdXBwbHlJZGJTdG9yZShyZXNvbHZlLCByZWplY3QsIHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgZm4ocmVzb2x2ZSwgcmVqZWN0LCB0cmFucy5pZGJ0cmFucy5vYmplY3RTdG9yZSh0YWJsZU5hbWUpLCB0cmFucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJhbnMgJiYgdHJhbnMuZGIgPT09IGRiID8gdHJhbnMuX3Byb21pc2UobW9kZSwgc3VwcGx5SWRiU3RvcmUsIHdyaXRlTG9ja2VkKSA6IHRlbXBUcmFuc2FjdGlvbihtb2RlLCBbdGhpcy5uYW1lXSwgc3VwcGx5SWRiU3RvcmUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRhYmxlIFB1YmxpYyBNZXRob2RzXG4gICAgICAgIC8vXG4gICAgICAgIGdldDogZnVuY3Rpb24gKGtleSwgY2IpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZGJzdG9yZShSRUFET05MWSwgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUpIHtcbiAgICAgICAgICAgICAgICBmYWtlICYmIHJlc29sdmUoc2VsZi5zY2hlbWEuaW5zdGFuY2VUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgdmFyIHJlcSA9IGlkYnN0b3JlLmdldChrZXkpO1xuICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHdyYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNlbGYuaG9vay5yZWFkaW5nLmZpcmUocmVxLnJlc3VsdCkpO1xuICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgfSxcbiAgICAgICAgd2hlcmU6IGZ1bmN0aW9uIChpbmRleE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgV2hlcmVDbGF1c2UodGhpcywgaW5kZXhOYW1lKTtcbiAgICAgICAgfSxcbiAgICAgICAgY291bnQ6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkuY291bnQoY2IpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLm9mZnNldChvZmZzZXQpO1xuICAgICAgICB9LFxuICAgICAgICBsaW1pdDogZnVuY3Rpb24gKG51bVJvd3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmxpbWl0KG51bVJvd3MpO1xuICAgICAgICB9LFxuICAgICAgICByZXZlcnNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5yZXZlcnNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZpbHRlcjogZnVuY3Rpb24gKGZpbHRlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5hbmQoZmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICB9LFxuICAgICAgICBlYWNoOiBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmVhY2goZm4pO1xuICAgICAgICB9LFxuICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLnRvQXJyYXkoY2IpO1xuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5fY29sbENsYXNzKG5ldyBXaGVyZUNsYXVzZSh0aGlzLCBpbmRleCkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvQ29sbGVjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLl9jb2xsQ2xhc3MobmV3IFdoZXJlQ2xhdXNlKHRoaXMpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBtYXBUb0NsYXNzOiBmdW5jdGlvbiAoY29uc3RydWN0b3IsIHN0cnVjdHVyZSkge1xuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PlxuICAgICAgICAgICAgLy8vICAgICBNYXAgdGFibGUgdG8gYSBqYXZhc2NyaXB0IGNvbnN0cnVjdG9yIGZ1bmN0aW9uLiBPYmplY3RzIHJldHVybmVkIGZyb20gdGhlIGRhdGFiYXNlIHdpbGwgYmUgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MsIG1ha2luZ1xuICAgICAgICAgICAgLy8vICAgICBpdCBwb3NzaWJsZSB0byB0aGUgaW5zdGFuY2VPZiBvcGVyYXRvciBhcyB3ZWxsIGFzIGV4dGVuZGluZyB0aGUgY2xhc3MgdXNpbmcgY29uc3RydWN0b3IucHJvdG90eXBlLm1ldGhvZCA9IGZ1bmN0aW9uKCl7Li4ufS5cbiAgICAgICAgICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJjb25zdHJ1Y3RvclwiPkNvbnN0cnVjdG9yIGZ1bmN0aW9uIHJlcHJlc2VudGluZyB0aGUgY2xhc3MuPC9wYXJhbT5cbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0cnVjdHVyZVwiIG9wdGlvbmFsPVwidHJ1ZVwiPkhlbHBzIElERSBjb2RlIGNvbXBsZXRpb24gYnkga25vd2luZyB0aGUgbWVtYmVycyB0aGF0IG9iamVjdHMgY29udGFpbiBhbmQgbm90IGp1c3QgdGhlIGluZGV4ZXMuIEFsc29cbiAgICAgICAgICAgIC8vLyBrbm93IHdoYXQgdHlwZSBlYWNoIG1lbWJlciBoYXMuIEV4YW1wbGU6IHtuYW1lOiBTdHJpbmcsIGVtYWlsQWRkcmVzc2VzOiBbU3RyaW5nXSwgcGFzc3dvcmR9PC9wYXJhbT5cbiAgICAgICAgICAgIHRoaXMuc2NoZW1hLm1hcHBlZENsYXNzID0gY29uc3RydWN0b3I7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VUZW1wbGF0ZSA9IE9iamVjdC5jcmVhdGUoY29uc3RydWN0b3IucHJvdG90eXBlKTtcbiAgICAgICAgICAgIGlmIChzdHJ1Y3R1cmUpIHtcbiAgICAgICAgICAgICAgICAvLyBzdHJ1Y3R1cmUgYW5kIGluc3RhbmNlVGVtcGxhdGUgaXMgZm9yIElERSBjb2RlIGNvbXBldGlvbiBvbmx5IHdoaWxlIGNvbnN0cnVjdG9yLnByb3RvdHlwZSBpcyBmb3IgYWN0dWFsIGluaGVyaXRhbmNlLlxuICAgICAgICAgICAgICAgIGFwcGx5U3RydWN0dXJlKGluc3RhbmNlVGVtcGxhdGUsIHN0cnVjdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjaGVtYS5pbnN0YW5jZVRlbXBsYXRlID0gaW5zdGFuY2VUZW1wbGF0ZTtcblxuICAgICAgICAgICAgLy8gTm93LCBzdWJzY3JpYmUgdG8gdGhlIHdoZW4oXCJyZWFkaW5nXCIpIGV2ZW50IHRvIG1ha2UgYWxsIG9iamVjdHMgdGhhdCBjb21lIG91dCBmcm9tIHRoaXMgdGFibGUgaW5oZXJpdCBmcm9tIGdpdmVuIGNsYXNzXG4gICAgICAgICAgICAvLyBubyBtYXR0ZXIgd2hpY2ggbWV0aG9kIHRvIHVzZSBmb3IgcmVhZGluZyAoVGFibGUuZ2V0KCkgb3IgVGFibGUud2hlcmUoLi4uKS4uLiApXG4gICAgICAgICAgICB2YXIgcmVhZEhvb2sgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmopIHJldHVybiBvYmo7IC8vIE5vIHZhbGlkIG9iamVjdC4gKFZhbHVlIGlzIG51bGwpLiBSZXR1cm4gYXMgaXMuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IG9iamVjdCB0aGF0IGRlcml2ZXMgZnJvbSBjb25zdHJ1Y3RvcjpcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShjb25zdHJ1Y3Rvci5wcm90b3R5cGUpO1xuICAgICAgICAgICAgICAgIC8vIENsb25lIG1lbWJlcnM6XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc093bihvYmosIG0pKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzW21dID0gb2JqW21dO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChfKSB7fVxuICAgICAgICAgICAgICAgIH1yZXR1cm4gcmVzO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2NoZW1hLnJlYWRIb29rKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ob29rLnJlYWRpbmcudW5zdWJzY3JpYmUodGhpcy5zY2hlbWEucmVhZEhvb2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zY2hlbWEucmVhZEhvb2sgPSByZWFkSG9vaztcbiAgICAgICAgICAgIHRoaXMuaG9vayhcInJlYWRpbmdcIiwgcmVhZEhvb2spO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yO1xuICAgICAgICB9LFxuICAgICAgICBkZWZpbmVDbGFzczogZnVuY3Rpb24gKHN0cnVjdHVyZSkge1xuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PlxuICAgICAgICAgICAgLy8vICAgICBEZWZpbmUgYWxsIG1lbWJlcnMgb2YgdGhlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyB0aGUgdGFibGUuIFRoaXMgd2lsbCBoZWxwIGNvZGUgY29tcGxldGlvbiBvZiB3aGVuIG9iamVjdHMgYXJlIHJlYWQgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgIC8vLyAgICAgYXMgd2VsbCBhcyBtYWtpbmcgaXQgcG9zc2libGUgdG8gZXh0ZW5kIHRoZSBwcm90b3R5cGUgb2YgdGhlIHJldHVybmVkIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0cnVjdHVyZVwiPkhlbHBzIElERSBjb2RlIGNvbXBsZXRpb24gYnkga25vd2luZyB0aGUgbWVtYmVycyB0aGF0IG9iamVjdHMgY29udGFpbiBhbmQgbm90IGp1c3QgdGhlIGluZGV4ZXMuIEFsc29cbiAgICAgICAgICAgIC8vLyBrbm93IHdoYXQgdHlwZSBlYWNoIG1lbWJlciBoYXMuIEV4YW1wbGU6IHtuYW1lOiBTdHJpbmcsIGVtYWlsQWRkcmVzc2VzOiBbU3RyaW5nXSwgcHJvcGVydGllczoge3Nob2VTaXplOiBOdW1iZXJ9fTwvcGFyYW0+XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXBUb0NsYXNzKERleGllLmRlZmluZUNsYXNzKHN0cnVjdHVyZSksIHN0cnVjdHVyZSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIC8vIFdyaXRlYWJsZVRhYmxlIENsYXNzIChleHRlbmRzIFRhYmxlKVxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIGZ1bmN0aW9uIFdyaXRlYWJsZVRhYmxlKG5hbWUsIHRhYmxlU2NoZW1hLCBjb2xsQ2xhc3MpIHtcbiAgICAgICAgVGFibGUuY2FsbCh0aGlzLCBuYW1lLCB0YWJsZVNjaGVtYSwgY29sbENsYXNzIHx8IFdyaXRlYWJsZUNvbGxlY3Rpb24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIEJ1bGtFcnJvckhhbmRsZXJDYXRjaEFsbChlcnJvckxpc3QsIGRvbmUsIHN1cHBvcnRIb29rcykge1xuICAgICAgICByZXR1cm4gKHN1cHBvcnRIb29rcyA/IGhvb2tlZEV2ZW50UmVqZWN0SGFuZGxlciA6IGV2ZW50UmVqZWN0SGFuZGxlcikoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGVycm9yTGlzdC5wdXNoKGUpO1xuICAgICAgICAgICAgZG9uZSAmJiBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1bGtEZWxldGUoaWRic3RvcmUsIHRyYW5zLCBrZXlzT3JUdXBsZXMsIGhhc0RlbGV0ZUhvb2ssIGRlbGV0aW5nSG9vaykge1xuICAgICAgICAvLyBJZiBoYXNEZWxldGVIb29rLCBrZXlzT3JUdXBsZXMgbXVzdCBiZSBhbiBhcnJheSBvZiB0dXBsZXM6IFtba2V5MSwgdmFsdWUyXSxba2V5Mix2YWx1ZTJdLC4uLl0sXG4gICAgICAgIC8vIGVsc2Uga2V5c09yVHVwbGVzIG11c3QgYmUganVzdCBhbiBhcnJheSBvZiBrZXlzOiBba2V5MSwga2V5MiwgLi4uXS5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBrZXlzT3JUdXBsZXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGxhc3RJdGVtID0gbGVuIC0gMTtcbiAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICBpZiAoIWhhc0RlbGV0ZUhvb2spIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBpZGJzdG9yZS5kZWxldGUoa2V5c09yVHVwbGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSB3cmFwKGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGxhc3RJdGVtKSByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBob29rQ3R4LFxuICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIgPSBob29rZWRFdmVudFJlamVjdEhhbmRsZXIocmVqZWN0KSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0hhbmRsZXIgPSBob29rZWRFdmVudFN1Y2Nlc3NIYW5kbGVyKG51bGwpO1xuICAgICAgICAgICAgICAgIHRyeUNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9va0N0eCA9IHsgb25zdWNjZXNzOiBudWxsLCBvbmVycm9yOiBudWxsIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHVwbGUgPSBrZXlzT3JUdXBsZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGluZ0hvb2suY2FsbChob29rQ3R4LCB0dXBsZVswXSwgdHVwbGVbMV0sIHRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBpZGJzdG9yZS5kZWxldGUodHVwbGVbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLl9ob29rQ3R4ID0gaG9va0N0eDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXJyb3JIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGxhc3RJdGVtKSByZXEub25zdWNjZXNzID0gaG9va2VkRXZlbnRTdWNjZXNzSGFuZGxlcihyZXNvbHZlKTtlbHNlIHJlcS5vbnN1Y2Nlc3MgPSBzdWNjZXNzSGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9va0N0eC5vbmVycm9yICYmIGhvb2tDdHgub25lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnVuY2F1Z2h0KGRiVW5jYXVnaHQpO1xuICAgIH1cblxuICAgIGRlcml2ZShXcml0ZWFibGVUYWJsZSkuZnJvbShUYWJsZSkuZXh0ZW5kKHtcbiAgICAgICAgYnVsa0RlbGV0ZTogZnVuY3Rpb24gKGtleXMkJDEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhvb2suZGVsZXRpbmcuZmlyZSA9PT0gbm9wKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkYnN0b3JlKFJFQURXUklURSwgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUsIHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYnVsa0RlbGV0ZShpZGJzdG9yZSwgdHJhbnMsIGtleXMkJDEsIGZhbHNlLCBub3ApKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoJzppZCcpLmFueU9mKGtleXMkJDEpLmRlbGV0ZSgpLnRoZW4oZnVuY3Rpb24gKCkge30pOyAvLyBSZXNvbHZlIHdpdGggdW5kZWZpbmVkLlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBidWxrUHV0OiBmdW5jdGlvbiAob2JqZWN0cywga2V5cyQkMSkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkYnN0b3JlKFJFQURXUklURSwgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlkYnN0b3JlLmtleVBhdGggJiYgIV90aGlzLnNjaGVtYS5wcmltS2V5LmF1dG8gJiYgIWtleXMkJDEpIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcImJ1bGtQdXQoKSB3aXRoIG5vbi1pbmJvdW5kIGtleXMgcmVxdWlyZXMga2V5cyBhcnJheSBpbiBzZWNvbmQgYXJndW1lbnRcIik7XG4gICAgICAgICAgICAgICAgaWYgKGlkYnN0b3JlLmtleVBhdGggJiYga2V5cyQkMSkgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiYnVsa1B1dCgpOiBrZXlzIGFyZ3VtZW50IGludmFsaWQgb24gdGFibGVzIHdpdGggaW5ib3VuZCBrZXlzXCIpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlzJCQxICYmIGtleXMkJDEubGVuZ3RoICE9PSBvYmplY3RzLmxlbmd0aCkgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiQXJndW1lbnRzIG9iamVjdHMgYW5kIGtleXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aFwiKTtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0cy5sZW5ndGggPT09IDApIHJldHVybiByZXNvbHZlKCk7IC8vIENhbGxlciBwcm92aWRlZCBlbXB0eSBsaXN0LlxuICAgICAgICAgICAgICAgIHZhciBkb25lID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JMaXN0Lmxlbmd0aCA9PT0gMCkgcmVzb2x2ZShyZXN1bHQpO2Vsc2UgcmVqZWN0KG5ldyBCdWxrRXJyb3IoX3RoaXMubmFtZSArICcuYnVsa1B1dCgpOiAnICsgZXJyb3JMaXN0Lmxlbmd0aCArICcgb2YgJyArIG51bU9ianMgKyAnIG9wZXJhdGlvbnMgZmFpbGVkJywgZXJyb3JMaXN0KSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgcmVxLFxuICAgICAgICAgICAgICAgICAgICBlcnJvckxpc3QgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBudW1PYmpzID0gb2JqZWN0cy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHRhYmxlID0gX3RoaXM7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmhvb2suY3JlYXRpbmcuZmlyZSA9PT0gbm9wICYmIF90aGlzLmhvb2sudXBkYXRpbmcuZmlyZSA9PT0gbm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0YW5kYXJkIEJ1bGsgKG5vICdjcmVhdGluZycgb3IgJ3VwZGF0aW5nJyBob29rcyB0byBjYXJlIGFib3V0KVxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIgPSBCdWxrRXJyb3JIYW5kbGVyQ2F0Y2hBbGwoZXJyb3JMaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmplY3RzLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxID0ga2V5cyQkMSA/IGlkYnN0b3JlLnB1dChvYmplY3RzW2ldLCBrZXlzJCQxW2ldKSA6IGlkYnN0b3JlLnB1dChvYmplY3RzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXJyb3JIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgbmVlZCB0byBjYXRjaCBzdWNjZXNzIG9yIGVycm9yIG9uIHRoZSBsYXN0IG9wZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBhY2NvcmRpbmcgdG8gdGhlIElEQiBzcGVjLlxuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IEJ1bGtFcnJvckhhbmRsZXJDYXRjaEFsbChlcnJvckxpc3QsIGRvbmUpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZXZlbnRTdWNjZXNzSGFuZGxlcihkb25lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWZmZWN0aXZlS2V5cyA9IGtleXMkJDEgfHwgaWRic3RvcmUua2V5UGF0aCAmJiBvYmplY3RzLm1hcChmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEJ5S2V5UGF0aChvLCBpZGJzdG9yZS5rZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIG1hcCBvZiB7W2tleV06IG9iamVjdH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdExvb2t1cCA9IGVmZmVjdGl2ZUtleXMgJiYgYXJyYXlUb09iamVjdChlZmZlY3RpdmVLZXlzLCBmdW5jdGlvbiAoa2V5LCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5ICE9IG51bGwgJiYgW2tleSwgb2JqZWN0c1tpXV07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9ICFlZmZlY3RpdmVLZXlzID9cblxuICAgICAgICAgICAgICAgICAgICAvLyBBdXRvLWluY3JlbWVudGVkIGtleS1sZXNzIG9iamVjdHMgb25seSB3aXRob3V0IGFueSBrZXlzIGFyZ3VtZW50LlxuICAgICAgICAgICAgICAgICAgICB0YWJsZS5idWxrQWRkKG9iamVjdHMpIDpcblxuICAgICAgICAgICAgICAgICAgICAvLyBLZXlzIHByb3ZpZGVkLiBFaXRoZXIgYXMgaW5ib3VuZCBpbiBwcm92aWRlZCBvYmplY3RzLCBvciBhcyBhIGtleXMgYXJndW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIC8vIEJlZ2luIHdpdGggdXBkYXRpbmcgdGhvc2UgdGhhdCBleGlzdHMgaW4gREI6XG4gICAgICAgICAgICAgICAgICAgIHRhYmxlLndoZXJlKCc6aWQnKS5hbnlPZihlZmZlY3RpdmVLZXlzLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5ICE9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0pKS5tb2RpZnkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG9iamVjdExvb2t1cFt0aGlzLnByaW1LZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0TG9va3VwW3RoaXMucHJpbUtleV0gPSBudWxsOyAvLyBNYXJrIGFzIFwiZG9uJ3QgYWRkIHRoaXNcIlxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChNb2RpZnlFcnJvciwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTGlzdCA9IGUuZmFpbHVyZXM7IC8vIE5vIG5lZWQgdG8gY29uY2F0IGhlcmUuIFRoZXNlIGFyZSB0aGUgZmlyc3QgZXJyb3JzIGFkZGVkLlxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdywgbGV0J3MgZXhhbWluZSB3aGljaCBpdGVtcyBkaWRudCBleGlzdCBzbyB3ZSBjYW4gYWRkIHRoZW06XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Jqc1RvQWRkID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5c1RvQWRkID0ga2V5cyQkMSAmJiBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgYmFja3dhcmRzLiBXaHk/IEJlY2F1c2UgaWYgc2FtZSBrZXkgd2FzIHVzZWQgdHdpY2UsIGp1c3QgYWRkIHRoZSBsYXN0IG9uZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBlZmZlY3RpdmVLZXlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGVmZmVjdGl2ZUtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSBudWxsIHx8IG9iamVjdExvb2t1cFtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ianNUb0FkZC5wdXNoKG9iamVjdHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzJCQxICYmIGtleXNUb0FkZC5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgIT0gbnVsbCkgb2JqZWN0TG9va3VwW2tleV0gPSBudWxsOyAvLyBNYXJrIGFzIFwiZG9udCBhZGQgYWdhaW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBpdGVtcyBhcmUgaW4gcmV2ZXJzZSBvcmRlciBzbyByZXZlcnNlIHRoZW0gYmVmb3JlIGFkZGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvdWxkIGJlIGltcG9ydGFudCBpbiBvcmRlciB0byBnZXQgYXV0by1pbmNyZW1lbnRlZCBrZXlzIHRoZSB3YXkgdGhlIGNhbGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd291bGQgZXhwZWN0LiBDb3VsZCBoYXZlIHVzZWQgdW5zaGlmdCBpbnN0ZWFkIG9mIHB1c2goKS9yZXZlcnNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQ6IGh0dHA6Ly9qc3BlcmYuY29tL3Vuc2hpZnQtdnMtcmV2ZXJzZVxuICAgICAgICAgICAgICAgICAgICAgICAgb2Jqc1RvQWRkLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMkJDEgJiYga2V5c1RvQWRkLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZS5idWxrQWRkKG9ianNUb0FkZCwga2V5c1RvQWRkKTtcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAobGFzdEFkZGVkS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHdpdGgga2V5IG9mIHRoZSBsYXN0IG9iamVjdCBpbiBnaXZlbiBhcmd1bWVudHMgdG8gYnVsa1B1dCgpOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RFZmZlY3RpdmVLZXkgPSBlZmZlY3RpdmVLZXlzW2VmZmVjdGl2ZUtleXMubGVuZ3RoIC0gMV07IC8vIEtleSB3YXMgcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdEVmZmVjdGl2ZUtleSAhPSBudWxsID8gbGFzdEVmZmVjdGl2ZUtleSA6IGxhc3RBZGRlZEtleTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGRvbmUpLmNhdGNoKEJ1bGtFcnJvciwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbmNhdCBmYWlsdXJlIGZyb20gTW9kaWZ5RXJyb3IgYW5kIHJlamVjdCB1c2luZyBvdXIgJ2RvbmUnIG1ldGhvZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTGlzdCA9IGVycm9yTGlzdC5jb25jYXQoZS5mYWlsdXJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgXCJsb2NrZWRcIik7IC8vIElmIGNhbGxlZCBmcm9tIHRyYW5zYWN0aW9uIHNjb3BlLCBsb2NrIHRyYW5zYWN0aW9uIHRpbCBhbGwgc3RlcHMgYXJlIGRvbmUuXG4gICAgICAgIH0sXG4gICAgICAgIGJ1bGtBZGQ6IGZ1bmN0aW9uIChvYmplY3RzLCBrZXlzJCQxKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICAgICAgY3JlYXRpbmdIb29rID0gdGhpcy5ob29rLmNyZWF0aW5nLmZpcmU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faWRic3RvcmUoUkVBRFdSSVRFLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSwgdHJhbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlkYnN0b3JlLmtleVBhdGggJiYgIXNlbGYuc2NoZW1hLnByaW1LZXkuYXV0byAmJiAha2V5cyQkMSkgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiYnVsa0FkZCgpIHdpdGggbm9uLWluYm91bmQga2V5cyByZXF1aXJlcyBrZXlzIGFycmF5IGluIHNlY29uZCBhcmd1bWVudFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaWRic3RvcmUua2V5UGF0aCAmJiBrZXlzJCQxKSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJidWxrQWRkKCk6IGtleXMgYXJndW1lbnQgaW52YWxpZCBvbiB0YWJsZXMgd2l0aCBpbmJvdW5kIGtleXNcIik7XG4gICAgICAgICAgICAgICAgaWYgKGtleXMkJDEgJiYga2V5cyQkMS5sZW5ndGggIT09IG9iamVjdHMubGVuZ3RoKSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJBcmd1bWVudHMgb2JqZWN0cyBhbmQga2V5cyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoXCIpO1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3RzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHJlc29sdmUoKTsgLy8gQ2FsbGVyIHByb3ZpZGVkIGVtcHR5IGxpc3QuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZG9uZShyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yTGlzdC5sZW5ndGggPT09IDApIHJlc29sdmUocmVzdWx0KTtlbHNlIHJlamVjdChuZXcgQnVsa0Vycm9yKHNlbGYubmFtZSArICcuYnVsa0FkZCgpOiAnICsgZXJyb3JMaXN0Lmxlbmd0aCArICcgb2YgJyArIG51bU9ianMgKyAnIG9wZXJhdGlvbnMgZmFpbGVkJywgZXJyb3JMaXN0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZXEsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTGlzdCA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBudW1PYmpzID0gb2JqZWN0cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGNyZWF0aW5nSG9vayAhPT0gbm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBzdWJzY3JpYmVycyB0byBob29rKCdjcmVhdGluZycpXG4gICAgICAgICAgICAgICAgICAgIC8vIE11c3QgYmVoYXZlIGFzIGRvY3VtZW50ZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlQYXRoID0gaWRic3RvcmUua2V5UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tDdHg7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlciA9IEJ1bGtFcnJvckhhbmRsZXJDYXRjaEFsbChlcnJvckxpc3QsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzSGFuZGxlciA9IGhvb2tlZEV2ZW50U3VjY2Vzc0hhbmRsZXIobnVsbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5Q2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmplY3RzLmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tDdHggPSB7IG9uZXJyb3I6IG51bGwsIG9uc3VjY2VzczogbnVsbCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzJCQxICYmIGtleXMkJDFbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IG9iamVjdHNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdGl2ZUtleSA9IGtleXMkJDEgPyBrZXkgOiBrZXlQYXRoID8gZ2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleVRvVXNlID0gY3JlYXRpbmdIb29rLmNhbGwoaG9va0N0eCwgZWZmZWN0aXZlS2V5LCBvYmosIHRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWZmZWN0aXZlS2V5ID09IG51bGwgJiYga2V5VG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gZGVlcENsb25lKG9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCBrZXlUb1VzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBrZXlUb1VzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEgPSBrZXkgIT0gbnVsbCA/IGlkYnN0b3JlLmFkZChvYmosIGtleSkgOiBpZGJzdG9yZS5hZGQob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEuX2hvb2tDdHggPSBob29rQ3R4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgbCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBlcnJvckhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob29rQ3R4Lm9uc3VjY2VzcykgcmVxLm9uc3VjY2VzcyA9IHN1Y2Nlc3NIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9va0N0eC5vbmVycm9yICYmIGhvb2tDdHgub25lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IEJ1bGtFcnJvckhhbmRsZXJDYXRjaEFsbChlcnJvckxpc3QsIGRvbmUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gaG9va2VkRXZlbnRTdWNjZXNzSGFuZGxlcihkb25lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBTdGFuZGFyZCBCdWxrIChubyAnY3JlYXRpbmcnIGhvb2sgdG8gY2FyZSBhYm91dClcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyID0gQnVsa0Vycm9ySGFuZGxlckNhdGNoQWxsKGVycm9yTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqZWN0cy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcSA9IGtleXMkJDEgPyBpZGJzdG9yZS5hZGQob2JqZWN0c1tpXSwga2V5cyQkMVtpXSkgOiBpZGJzdG9yZS5hZGQob2JqZWN0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGVycm9ySGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IG5lZWQgdG8gY2F0Y2ggc3VjY2VzcyBvciBlcnJvciBvbiB0aGUgbGFzdCBvcGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3JkaW5nIHRvIHRoZSBJREIgc3BlYy5cbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBCdWxrRXJyb3JIYW5kbGVyQ2F0Y2hBbGwoZXJyb3JMaXN0LCBkb25lKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGV2ZW50U3VjY2Vzc0hhbmRsZXIoZG9uZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZDogZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+XG4gICAgICAgICAgICAvLy8gICBBZGQgYW4gb2JqZWN0IHRvIHRoZSBkYXRhYmFzZS4gSW4gY2FzZSBhbiBvYmplY3Qgd2l0aCBzYW1lIHByaW1hcnkga2V5IGFscmVhZHkgZXhpc3RzLCB0aGUgb2JqZWN0IHdpbGwgbm90IGJlIGFkZGVkLlxuICAgICAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9ialwiIHR5cGU9XCJPYmplY3RcIj5BIGphdmFzY3JpcHQgb2JqZWN0IHRvIGluc2VydDwvcGFyYW0+XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJrZXlcIiBvcHRpb25hbD1cInRydWVcIj5QcmltYXJ5IGtleTwvcGFyYW0+XG4gICAgICAgICAgICB2YXIgY3JlYXRpbmdIb29rID0gdGhpcy5ob29rLmNyZWF0aW5nLmZpcmU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faWRic3RvcmUoUkVBRFdSSVRFLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSwgdHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaG9va0N0eCA9IHsgb25zdWNjZXNzOiBudWxsLCBvbmVycm9yOiBudWxsIH07XG4gICAgICAgICAgICAgICAgaWYgKGNyZWF0aW5nSG9vayAhPT0gbm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlZmZlY3RpdmVLZXkgPSBrZXkgIT0gbnVsbCA/IGtleSA6IGlkYnN0b3JlLmtleVBhdGggPyBnZXRCeUtleVBhdGgob2JqLCBpZGJzdG9yZS5rZXlQYXRoKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleVRvVXNlID0gY3JlYXRpbmdIb29rLmNhbGwoaG9va0N0eCwgZWZmZWN0aXZlS2V5LCBvYmosIHRyYW5zKTsgLy8gQWxsb3cgc3Vic2NyaWJlcnMgdG8gd2hlbihcImNyZWF0aW5nXCIpIHRvIGdlbmVyYXRlIHRoZSBrZXkuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZmZlY3RpdmVLZXkgPT0gbnVsbCAmJiBrZXlUb1VzZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2luZyBcIj09XCIgYW5kIFwiIT1cIiB0byBjaGVjayBmb3IgZWl0aGVyIG51bGwgb3IgdW5kZWZpbmVkIVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkYnN0b3JlLmtleVBhdGgpIHNldEJ5S2V5UGF0aChvYmosIGlkYnN0b3JlLmtleVBhdGgsIGtleVRvVXNlKTtlbHNlIGtleSA9IGtleVRvVXNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBrZXkgIT0gbnVsbCA/IGlkYnN0b3JlLmFkZChvYmosIGtleSkgOiBpZGJzdG9yZS5hZGQob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLl9ob29rQ3R4ID0gaG9va0N0eDtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBob29rZWRFdmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGhvb2tlZEV2ZW50U3VjY2Vzc0hhbmRsZXIoZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIHRoZXNlIHR3byBsaW5lcyBpbiBuZXh0IG1ham9yIHJlbGVhc2UgKDIuMD8pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIG5vIGdvb2QgcHJhY3RpY2UgdG8gaGF2ZSBzaWRlIGVmZmVjdHMgb24gcHJvdmlkZWQgcGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBpZGJzdG9yZS5rZXlQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleVBhdGgpIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvb2tDdHgub25lcnJvcikgaG9va0N0eC5vbmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHB1dDogZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+XG4gICAgICAgICAgICAvLy8gICBBZGQgYW4gb2JqZWN0IHRvIHRoZSBkYXRhYmFzZSBidXQgaW4gY2FzZSBhbiBvYmplY3Qgd2l0aCBzYW1lIHByaW1hcnkga2V5IGFscmVhZCBleGlzdHMsIHRoZSBleGlzdGluZyBvbmUgd2lsbCBnZXQgdXBkYXRlZC5cbiAgICAgICAgICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJvYmpcIiB0eXBlPVwiT2JqZWN0XCI+QSBqYXZhc2NyaXB0IG9iamVjdCB0byBpbnNlcnQgb3IgdXBkYXRlPC9wYXJhbT5cbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImtleVwiIG9wdGlvbmFsPVwidHJ1ZVwiPlByaW1hcnkga2V5PC9wYXJhbT5cbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICBjcmVhdGluZ0hvb2sgPSB0aGlzLmhvb2suY3JlYXRpbmcuZmlyZSxcbiAgICAgICAgICAgICAgICB1cGRhdGluZ0hvb2sgPSB0aGlzLmhvb2sudXBkYXRpbmcuZmlyZTtcbiAgICAgICAgICAgIGlmIChjcmVhdGluZ0hvb2sgIT09IG5vcCB8fCB1cGRhdGluZ0hvb2sgIT09IG5vcCkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gUGVvcGxlIGxpc3RlbnMgdG8gd2hlbihcImNyZWF0aW5nXCIpIG9yIHdoZW4oXCJ1cGRhdGluZ1wiKSBldmVudHMhXG4gICAgICAgICAgICAgICAgLy8gV2UgbXVzdCBrbm93IHdoZXRoZXIgdGhlIHB1dCBvcGVyYXRpb24gcmVzdWx0cyBpbiBhbiBDUkVBVEUgb3IgVVBEQVRFLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zKFJFQURXUklURSwgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgdHJhbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luY2Uga2V5IGlzIG9wdGlvbmFsLCBtYWtlIHN1cmUgd2UgZ2V0IGl0IGZyb20gb2JqIGlmIG5vdCBwcm92aWRlZFxuICAgICAgICAgICAgICAgICAgICB2YXIgZWZmZWN0aXZlS2V5ID0ga2V5ICE9PSB1bmRlZmluZWQgPyBrZXkgOiBzZWxmLnNjaGVtYS5wcmltS2V5LmtleVBhdGggJiYgZ2V0QnlLZXlQYXRoKG9iaiwgc2VsZi5zY2hlbWEucHJpbUtleS5rZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZUtleSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcIj09IG51bGxcIiBtZWFucyBjaGVja2luZyBmb3IgZWl0aGVyIG51bGwgb3IgdW5kZWZpbmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gcHJpbWFyeSBrZXkuIE11c3QgdXNlIGFkZCgpLlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGQob2JqKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmltYXJ5IGtleSBleGlzdC4gTG9jayB0cmFuc2FjdGlvbiBhbmQgdHJ5IG1vZGlmeWluZyBleGlzdGluZy4gSWYgbm90aGluZyBtb2RpZmllZCwgY2FsbCBhZGQoKS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLl9sb2NrKCk7IC8vIE5lZWRlZCBiZWNhdXNlIG9wZXJhdGlvbiBpcyBzcGxpdHRlZCBpbnRvIG1vZGlmeSgpIGFuZCBhZGQoKS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIG9iaiBiZWZvcmUgdGhpcyBhc3luYyBjYWxsLiBJZiBjYWxsZXIgbW9kaWZpZXMgb2JqIHRoZSBsaW5lIGFmdGVyIHB1dCgpLCB0aGUgSURCIHNwZWMgcmVxdWlyZXMgdGhhdCBpdCBzaG91bGQgbm90IGFmZmVjdCBvcGVyYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBkZWVwQ2xvbmUob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud2hlcmUoXCI6aWRcIikuZXF1YWxzKGVmZmVjdGl2ZUtleSkubW9kaWZ5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIGV4dGlzdGluZyB2YWx1ZSB3aXRoIG91ciBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDUlVEIGV2ZW50IGZpcmluZyBoYW5kbGVkIGluIFdyaXRlYWJsZUNvbGxlY3Rpb24ubW9kaWZ5KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gb2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2JqZWN0J3Mga2V5IHdhcyBub3QgZm91bmQuIEFkZCB0aGUgb2JqZWN0IGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENSVUQgZXZlbnQgZmlyaW5nIHdpbGwgYmUgZG9uZSBpbiBhZGQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5hZGQob2JqLCBrZXkpOyAvLyBSZXNvbHZpbmcgd2l0aCBhbm90aGVyIFByb21pc2UuIFJldHVybmVkIFByb21pc2Ugd2lsbCB0aGVuIHJlc29sdmUgd2l0aCB0aGUgbmV3IGtleS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWZmZWN0aXZlS2V5OyAvLyBSZXNvbHZlIHdpdGggdGhlIHByb3ZpZGVkIGtleS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFucy5fdW5sb2NrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBzdGFuZGFyZCBJREIgcHV0KCkgbWV0aG9kLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZGJzdG9yZShSRUFEV1JJVEUsIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBrZXkgIT09IHVuZGVmaW5lZCA/IGlkYnN0b3JlLnB1dChvYmosIGtleSkgOiBpZGJzdG9yZS5wdXQob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBpZGJzdG9yZS5rZXlQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleVBhdGgpIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIGV2LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXEucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAnZGVsZXRlJzogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwia2V5XCI+UHJpbWFyeSBrZXkgb2YgdGhlIG9iamVjdCB0byBkZWxldGU8L3BhcmFtPlxuICAgICAgICAgICAgaWYgKHRoaXMuaG9vay5kZWxldGluZy5zdWJzY3JpYmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBQZW9wbGUgbGlzdGVucyB0byB3aGVuKFwiZGVsZXRpbmdcIikgZXZlbnQuIE11c3QgaW1wbGVtZW50IGRlbGV0ZSB1c2luZyBXcml0ZWFibGVDb2xsZWN0aW9uLmRlbGV0ZSgpIHRoYXQgd2lsbFxuICAgICAgICAgICAgICAgIC8vIGNhbGwgdGhlIENSVUQgZXZlbnQuIE9ubHkgV3JpdGVhYmxlQ29sbGVjdGlvbi5kZWxldGUoKSB3aWxsIGtub3cgd2hldGhlciBhbiBvYmplY3Qgd2FzIGFjdHVhbGx5IGRlbGV0ZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoXCI6aWRcIikuZXF1YWxzKGtleSkuZGVsZXRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5vIG9uZSBsaXN0ZW5zLiBVc2Ugc3RhbmRhcmQgSURCIGRlbGV0ZSgpIG1ldGhvZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faWRic3RvcmUoUkVBRFdSSVRFLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gaWRic3RvcmUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ob29rLmRlbGV0aW5nLnN1YnNjcmliZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIFBlb3BsZSBsaXN0ZW5zIHRvIHdoZW4oXCJkZWxldGluZ1wiKSBldmVudC4gTXVzdCBpbXBsZW1lbnQgZGVsZXRlIHVzaW5nIFdyaXRlYWJsZUNvbGxlY3Rpb24uZGVsZXRlKCkgdGhhdCB3aWxsXG4gICAgICAgICAgICAgICAgLy8gY2FsbCB0aGUgQ1JVRCBldmVudC4gT25seSBXcml0ZWFibGVDb2xsZWN0aW9uLmRlbGV0ZSgpIHdpbGwga25vd3Mgd2hpY2ggb2JqZWN0cyB0aGF0IGFyZSBhY3R1YWxseSBkZWxldGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmRlbGV0ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faWRic3RvcmUoUkVBRFdSSVRFLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gaWRic3RvcmUuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVxLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoa2V5T3JPYmplY3QsIG1vZGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kaWZpY2F0aW9ucyAhPT0gJ29iamVjdCcgfHwgaXNBcnJheShtb2RpZmljYXRpb25zKSkgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiTW9kaWZpY2F0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC5cIik7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGtleU9yT2JqZWN0ID09PSAnb2JqZWN0JyAmJiAhaXNBcnJheShrZXlPck9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICAvLyBvYmplY3QgdG8gbW9kaWZ5LiBBbHNvIG1vZGlmeSBnaXZlbiBvYmplY3Qgd2l0aCB0aGUgbW9kaWZpY2F0aW9uczpcbiAgICAgICAgICAgICAgICBrZXlzKG1vZGlmaWNhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGtleU9yT2JqZWN0LCBrZXlQYXRoLCBtb2RpZmljYXRpb25zW2tleVBhdGhdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gZ2V0QnlLZXlQYXRoKGtleU9yT2JqZWN0LCB0aGlzLnNjaGVtYS5wcmltS2V5LmtleVBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJHaXZlbiBvYmplY3QgZG9lcyBub3QgY29udGFpbiBpdHMgcHJpbWFyeSBrZXlcIiksIGRiVW5jYXVnaHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKFwiOmlkXCIpLmVxdWFscyhrZXkpLm1vZGlmeShtb2RpZmljYXRpb25zKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8ga2V5IHRvIG1vZGlmeVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKFwiOmlkXCIpLmVxdWFscyhrZXlPck9iamVjdCkubW9kaWZ5KG1vZGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICAvLyBUcmFuc2FjdGlvbiBDbGFzc1xuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGRic2NoZW1hLCBwYXJlbnQpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxuICAgICAgICAvLy8gICAgVHJhbnNhY3Rpb24gY2xhc3MuIFJlcHJlc2VudHMgYSBkYXRhYmFzZSB0cmFuc2FjdGlvbi4gQWxsIG9wZXJhdGlvbnMgb24gZGIgZ29lcyB0aHJvdWdoIGEgVHJhbnNhY3Rpb24uXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm1vZGVcIiB0eXBlPVwiU3RyaW5nXCI+QW55IG9mIFwicmVhZHdyaXRlXCIgb3IgXCJyZWFkb25seVwiPC9wYXJhbT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic3RvcmVOYW1lc1wiIHR5cGU9XCJBcnJheVwiPkFycmF5IG9mIHRhYmxlIG5hbWVzIHRvIG9wZXJhdGUgb248L3BhcmFtPlxuICAgICAgICB0aGlzLmRiID0gZGI7XG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICAgIHRoaXMuc3RvcmVOYW1lcyA9IHN0b3JlTmFtZXM7XG4gICAgICAgIHRoaXMuaWRidHJhbnMgPSBudWxsO1xuICAgICAgICB0aGlzLm9uID0gRXZlbnRzKHRoaXMsIFwiY29tcGxldGVcIiwgXCJlcnJvclwiLCBcImFib3J0XCIpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudCB8fCBudWxsO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3RhYmxlcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlY3Vsb2NrID0gMDtcbiAgICAgICAgdGhpcy5fYmxvY2tlZEZ1bmNzID0gW107XG4gICAgICAgIHRoaXMuX3BzZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2Ric2NoZW1hID0gZGJzY2hlbWE7XG4gICAgICAgIHRoaXMuX3Jlc29sdmUgPSBudWxsO1xuICAgICAgICB0aGlzLl9yZWplY3QgPSBudWxsO1xuICAgICAgICB0aGlzLl9jb21wbGV0aW9uID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgX3RoaXMyLl9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIF90aGlzMi5fcmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KS51bmNhdWdodChkYlVuY2F1Z2h0KTtcblxuICAgICAgICB0aGlzLl9jb21wbGV0aW9uLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMyLm9uLmNvbXBsZXRlLmZpcmUoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIF90aGlzMi5vbi5lcnJvci5maXJlKGUpO1xuICAgICAgICAgICAgX3RoaXMyLnBhcmVudCA/IF90aGlzMi5wYXJlbnQuX3JlamVjdChlKSA6IF90aGlzMi5hY3RpdmUgJiYgX3RoaXMyLmlkYnRyYW5zICYmIF90aGlzMi5pZGJ0cmFucy5hYm9ydCgpO1xuICAgICAgICAgICAgX3RoaXMyLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTsgLy8gSW5kaWNhdGUgd2UgYWN0dWFsbHkgRE8gTk9UIGNhdGNoIHRoaXMgZXJyb3IuXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3BzKFRyYW5zYWN0aW9uLnByb3RvdHlwZSwge1xuICAgICAgICAvL1xuICAgICAgICAvLyBUcmFuc2FjdGlvbiBQcm90ZWN0ZWQgTWV0aG9kcyAobm90IHJlcXVpcmVkIGJ5IEFQSSB1c2VycywgYnV0IG5lZWRlZCBpbnRlcm5hbGx5IGFuZCBldmVudHVhbGx5IGJ5IGRleGllIGV4dGVuc2lvbnMpXG4gICAgICAgIC8vXG4gICAgICAgIF9sb2NrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhc3NlcnQoIVBTRC5nbG9iYWwpOyAvLyBMb2NraW5nIGFuZCB1bmxvY2tpbmcgcmV1aXJlcyB0byBiZSB3aXRoaW4gYSBQU0Qgc2NvcGUuXG4gICAgICAgICAgICAvLyBUZW1wb3Jhcnkgc2V0IGFsbCByZXF1ZXN0cyBpbnRvIGEgcGVuZGluZyBxdWV1ZSBpZiB0aGV5IGFyZSBjYWxsZWQgYmVmb3JlIGRhdGFiYXNlIGlzIHJlYWR5LlxuICAgICAgICAgICAgKyt0aGlzLl9yZWN1bG9jazsgLy8gUmVjdXJzaXZlIHJlYWQvd3JpdGUgbG9jayBwYXR0ZXJuIHVzaW5nIFBTRCAoUHJvbWlzZSBTcGVjaWZpYyBEYXRhKSBpbnN0ZWFkIG9mIFRMUyAoVGhyZWFkIExvY2FsIFN0b3JhZ2UpXG4gICAgICAgICAgICBpZiAodGhpcy5fcmVjdWxvY2sgPT09IDEgJiYgIVBTRC5nbG9iYWwpIFBTRC5sb2NrT3duZXJGb3IgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIF91bmxvY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFzc2VydCghUFNELmdsb2JhbCk7IC8vIExvY2tpbmcgYW5kIHVubG9ja2luZyByZXVpcmVzIHRvIGJlIHdpdGhpbiBhIFBTRCBzY29wZS5cbiAgICAgICAgICAgIGlmICgtLXRoaXMuX3JlY3Vsb2NrID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFQU0QuZ2xvYmFsKSBQU0QubG9ja093bmVyRm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5fYmxvY2tlZEZ1bmNzLmxlbmd0aCA+IDAgJiYgIXRoaXMuX2xvY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbkFuZFBTRCA9IHRoaXMuX2Jsb2NrZWRGdW5jcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlUFNEKGZuQW5kUFNEWzFdLCBmbkFuZFBTRFswXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIF9sb2NrZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIENoZWNrcyBpZiBhbnkgd3JpdGUtbG9jayBpcyBhcHBsaWVkIG9uIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUbyBzaW1wbGlmeSB0aGUgRGV4aWUgQVBJIGZvciBleHRlbnNpb24gaW1wbGVtZW50YXRpb25zLCB3ZSBzdXBwb3J0IHJlY3Vyc2l2ZSBsb2Nrcy5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYWNjb21wbGlzaGVkIGJ5IHVzaW5nIFwiUHJvbWlzZSBTcGVjaWZpYyBEYXRhXCIgKFBTRCkuXG4gICAgICAgICAgICAvLyBQU0QgZGF0YSBpcyBib3VuZCB0byBhIFByb21pc2UgYW5kIGFueSBjaGlsZCBQcm9taXNlIGVtaXR0ZWQgdGhyb3VnaCB0aGVuKCkgb3IgcmVzb2x2ZSggbmV3IFByb21pc2UoKSApLlxuICAgICAgICAgICAgLy8gUFNEIGlzIGxvY2FsIHRvIGNvZGUgZXhlY3V0aW5nIG9uIHRvcCBvZiB0aGUgY2FsbCBzdGFja3Mgb2YgYW55IG9mIGFueSBjb2RlIGV4ZWN1dGVkIGJ5IFByb21pc2UoKTpcbiAgICAgICAgICAgIC8vICAgICAgICAgKiBjYWxsYmFjayBnaXZlbiB0byB0aGUgUHJvbWlzZSgpIGNvbnN0cnVjdG9yICAoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCl7Li4ufSlcbiAgICAgICAgICAgIC8vICAgICAgICAgKiBjYWxsYmFja3MgZ2l2ZW4gdG8gdGhlbigpL2NhdGNoKCkvZmluYWxseSgpIG1ldGhvZHMgKGZ1bmN0aW9uICh2YWx1ZSl7Li4ufSlcbiAgICAgICAgICAgIC8vIElmIGNyZWF0aW5nIGEgbmV3IGluZGVwZW5kYW50IFByb21pc2UgaW5zdGFuY2UgZnJvbSB3aXRoaW4gYSBQcm9taXNlIGNhbGwgc3RhY2ssIHRoZSBuZXcgUHJvbWlzZSB3aWxsIGRlcml2ZSB0aGUgUFNEIGZyb20gdGhlIGNhbGwgc3RhY2sgb2YgdGhlIHBhcmVudCBQcm9taXNlLlxuICAgICAgICAgICAgLy8gRGVyaXZhdGlvbiBpcyBkb25lIHNvIHRoYXQgdGhlIGlubmVyIFBTRCBfX3Byb3RvX18gcG9pbnRzIHRvIHRoZSBvdXRlciBQU0QuXG4gICAgICAgICAgICAvLyBQU0QubG9ja093bmVyRm9yIHdpbGwgcG9pbnQgdG8gY3VycmVudCB0cmFuc2FjdGlvbiBvYmplY3QgaWYgdGhlIGN1cnJlbnRseSBleGVjdXRpbmcgUFNEIHNjb3BlIG93bnMgdGhlIGxvY2suXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjdWxvY2sgJiYgUFNELmxvY2tPd25lckZvciAhPT0gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAoaWRidHJhbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICBhc3NlcnQoIXRoaXMuaWRidHJhbnMpO1xuICAgICAgICAgICAgaWYgKCFpZGJ0cmFucyAmJiAhaWRiZGIpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRiT3BlbkVycm9yICYmIGRiT3BlbkVycm9yLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkRhdGFiYXNlQ2xvc2VkRXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVycm9ycyB3aGVyZSBpdCBpcyBubyBkaWZmZXJlbmNlIHdoZXRoZXIgaXQgd2FzIGNhdXNlZCBieSB0aGUgdXNlciBvcGVyYXRpb24gb3IgYW4gZWFybGllciBjYWxsIHRvIGRiLm9wZW4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoZGJPcGVuRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTWlzc2luZ0FQSUVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFcnJvcnMgd2hlcmUgaXQgaXMgbm8gZGlmZmVyZW5jZSB3aGV0aGVyIGl0IHdhcyBjYXVzZWQgYnkgdGhlIHVzZXIgb3BlcmF0aW9uIG9yIGFuIGVhcmxpZXIgY2FsbCB0byBkYi5vcGVuKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoZGJPcGVuRXJyb3IubWVzc2FnZSwgZGJPcGVuRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBpdCBjbGVhciB0aGF0IHRoZSB1c2VyIG9wZXJhdGlvbiB3YXMgbm90IHdoYXQgY2F1c2VkIHRoZSBlcnJvciAtIHRoZSBlcnJvciBoYWQgb2NjdXJyZWQgZWFybGllciBvbiBkYi5vcGVuKCkhXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5PcGVuRmFpbGVkKGRiT3BlbkVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5UcmFuc2FjdGlvbkluYWN0aXZlKCk7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5fY29tcGxldGlvbi5fc3RhdGUgPT09IG51bGwpO1xuXG4gICAgICAgICAgICBpZGJ0cmFucyA9IHRoaXMuaWRidHJhbnMgPSBpZGJ0cmFucyB8fCBpZGJkYi50cmFuc2FjdGlvbihzYWZhcmlNdWx0aVN0b3JlRml4KHRoaXMuc3RvcmVOYW1lcyksIHRoaXMubW9kZSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmVycm9yID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7IC8vIFByb2hpYml0IGRlZmF1bHQgYnViYmxpbmcgdG8gd2luZG93LmVycm9yXG4gICAgICAgICAgICAgICAgX3RoaXMzLl9yZWplY3QoaWRidHJhbnMuZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmFib3J0ID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7XG4gICAgICAgICAgICAgICAgX3RoaXMzLmFjdGl2ZSAmJiBfdGhpczMuX3JlamVjdChuZXcgZXhjZXB0aW9ucy5BYm9ydCgpKTtcbiAgICAgICAgICAgICAgICBfdGhpczMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMzLm9uKFwiYWJvcnRcIikuZmlyZShldik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlkYnRyYW5zLm9uY29tcGxldGUgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMzLl9yZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgICAgICBfcHJvbWlzZTogZnVuY3Rpb24gKG1vZGUsIGZuLCBiV3JpdGVMb2NrKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcCA9IHNlbGYuX2xvY2tlZCgpID9cbiAgICAgICAgICAgIC8vIFJlYWQgbG9jayBhbHdheXMuIFRyYW5zYWN0aW9uIGlzIHdyaXRlLWxvY2tlZC4gV2FpdCBmb3IgbXV0ZXguXG4gICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fYmxvY2tlZEZ1bmNzLnB1c2goW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcHJvbWlzZShtb2RlLCBmbiwgYldyaXRlTG9jaykudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgIH0sIFBTRF0pO1xuICAgICAgICAgICAgfSkgOiBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBfID0gc2VsZi5hY3RpdmUgPyBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSBSRUFEV1JJVEUgJiYgc2VsZi5tb2RlICE9PSBSRUFEV1JJVEUpIHRocm93IG5ldyBleGNlcHRpb25zLlJlYWRPbmx5KFwiVHJhbnNhY3Rpb24gaXMgcmVhZG9ubHlcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5pZGJ0cmFucyAmJiBtb2RlKSBzZWxmLmNyZWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYldyaXRlTG9jaykgc2VsZi5fbG9jaygpOyAvLyBXcml0ZSBsb2NrIGlmIHdyaXRlIG9wZXJhdGlvbiBpcyByZXF1ZXN0ZWRcbiAgICAgICAgICAgICAgICAgICAgZm4ocmVzb2x2ZSwgcmVqZWN0LCBzZWxmKTtcbiAgICAgICAgICAgICAgICB9KSA6IHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5UcmFuc2FjdGlvbkluYWN0aXZlKCkpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmFjdGl2ZSAmJiBiV3JpdGVMb2NrKSBwXy5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fdW5sb2NrKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBfO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHAuX2xpYiA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gcC51bmNhdWdodChkYlVuY2F1Z2h0KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvL1xuICAgICAgICAvLyBUcmFuc2FjdGlvbiBQdWJsaWMgUHJvcGVydGllcyBhbmQgTWV0aG9kc1xuICAgICAgICAvL1xuICAgICAgICBhYm9ydDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgJiYgdGhpcy5fcmVqZWN0KG5ldyBleGNlcHRpb25zLkFib3J0KCkpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICB0YWJsZXM6IHtcbiAgICAgICAgICAgIGdldDogZGVwcmVjYXRlZChcIlRyYW5zYWN0aW9uLnRhYmxlc1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5VG9PYmplY3QodGhpcy5zdG9yZU5hbWVzLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW25hbWUsIGFsbFRhYmxlc1tuYW1lXV07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBcIlVzZSBkYi50YWJsZXMoKVwiKVxuICAgICAgICB9LFxuXG4gICAgICAgIGNvbXBsZXRlOiBkZXByZWNhdGVkKFwiVHJhbnNhY3Rpb24uY29tcGxldGUoKVwiLCBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKFwiY29tcGxldGVcIiwgY2IpO1xuICAgICAgICB9KSxcblxuICAgICAgICBlcnJvcjogZGVwcmVjYXRlZChcIlRyYW5zYWN0aW9uLmVycm9yKClcIiwgZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbihcImVycm9yXCIsIGNiKTtcbiAgICAgICAgfSksXG5cbiAgICAgICAgdGFibGU6IGRlcHJlY2F0ZWQoXCJUcmFuc2FjdGlvbi50YWJsZSgpXCIsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9yZU5hbWVzLmluZGV4T2YobmFtZSkgPT09IC0xKSB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkVGFibGUoXCJUYWJsZSBcIiArIG5hbWUgKyBcIiBub3QgaW4gdHJhbnNhY3Rpb25cIik7XG4gICAgICAgICAgICByZXR1cm4gYWxsVGFibGVzW25hbWVdO1xuICAgICAgICB9KVxuXG4gICAgfSk7XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICAvLyBXaGVyZUNsYXVzZVxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIGZ1bmN0aW9uIFdoZXJlQ2xhdXNlKHRhYmxlLCBpbmRleCwgb3JDb2xsZWN0aW9uKSB7XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRhYmxlXCIgdHlwZT1cIlRhYmxlXCI+PC9wYXJhbT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiaW5kZXhcIiB0eXBlPVwiU3RyaW5nXCIgb3B0aW9uYWw9XCJ0cnVlXCI+PC9wYXJhbT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwib3JDb2xsZWN0aW9uXCIgdHlwZT1cIkNvbGxlY3Rpb25cIiBvcHRpb25hbD1cInRydWVcIj48L3BhcmFtPlxuICAgICAgICB0aGlzLl9jdHggPSB7XG4gICAgICAgICAgICB0YWJsZTogdGFibGUsXG4gICAgICAgICAgICBpbmRleDogaW5kZXggPT09IFwiOmlkXCIgPyBudWxsIDogaW5kZXgsXG4gICAgICAgICAgICBjb2xsQ2xhc3M6IHRhYmxlLl9jb2xsQ2xhc3MsXG4gICAgICAgICAgICBvcjogb3JDb2xsZWN0aW9uXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJvcHMoV2hlcmVDbGF1c2UucHJvdG90eXBlLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy8gV2hlcmVDbGF1c2UgcHJpdmF0ZSBtZXRob2RzXG5cbiAgICAgICAgZnVuY3Rpb24gZmFpbChjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZSwgZXJyLCBUKSB7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlIGluc3RhbmNlb2YgV2hlcmVDbGF1c2UgPyBuZXcgY29sbGVjdGlvbk9yV2hlcmVDbGF1c2UuX2N0eC5jb2xsQ2xhc3MoY29sbGVjdGlvbk9yV2hlcmVDbGF1c2UpIDogY29sbGVjdGlvbk9yV2hlcmVDbGF1c2U7XG5cbiAgICAgICAgICAgIGNvbGxlY3Rpb24uX2N0eC5lcnJvciA9IFQgPyBuZXcgVChlcnIpIDogbmV3IFR5cGVFcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBlbXB0eUNvbGxlY3Rpb24od2hlcmVDbGF1c2UpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgd2hlcmVDbGF1c2UuX2N0eC5jb2xsQ2xhc3Mod2hlcmVDbGF1c2UsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSURCS2V5UmFuZ2Uub25seShcIlwiKTtcbiAgICAgICAgICAgIH0pLmxpbWl0KDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBwZXJGYWN0b3J5KGRpcikge1xuICAgICAgICAgICAgcmV0dXJuIGRpciA9PT0gXCJuZXh0XCIgPyBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9IDogZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBsb3dlckZhY3RvcnkoZGlyKSB7XG4gICAgICAgICAgICByZXR1cm4gZGlyID09PSBcIm5leHRcIiA/IGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHMudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH0gOiBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG5leHRDYXNpbmcoa2V5LCBsb3dlcktleSwgdXBwZXJOZWVkbGUsIGxvd2VyTmVlZGxlLCBjbXAsIGRpcikge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGtleS5sZW5ndGgsIGxvd2VyTmVlZGxlLmxlbmd0aCk7XG4gICAgICAgICAgICB2YXIgbGxwID0gLTE7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGx3cktleUNoYXIgPSBsb3dlcktleVtpXTtcbiAgICAgICAgICAgICAgICBpZiAobHdyS2V5Q2hhciAhPT0gbG93ZXJOZWVkbGVbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcChrZXlbaV0sIHVwcGVyTmVlZGxlW2ldKSA8IDApIHJldHVybiBrZXkuc3Vic3RyKDAsIGkpICsgdXBwZXJOZWVkbGVbaV0gKyB1cHBlck5lZWRsZS5zdWJzdHIoaSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY21wKGtleVtpXSwgbG93ZXJOZWVkbGVbaV0pIDwgMCkgcmV0dXJuIGtleS5zdWJzdHIoMCwgaSkgKyBsb3dlck5lZWRsZVtpXSArIHVwcGVyTmVlZGxlLnN1YnN0cihpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsbHAgPj0gMCkgcmV0dXJuIGtleS5zdWJzdHIoMCwgbGxwKSArIGxvd2VyS2V5W2xscF0gKyB1cHBlck5lZWRsZS5zdWJzdHIobGxwICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY21wKGtleVtpXSwgbHdyS2V5Q2hhcikgPCAwKSBsbHAgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlbmd0aCA8IGxvd2VyTmVlZGxlLmxlbmd0aCAmJiBkaXIgPT09IFwibmV4dFwiKSByZXR1cm4ga2V5ICsgdXBwZXJOZWVkbGUuc3Vic3RyKGtleS5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA8IGtleS5sZW5ndGggJiYgZGlyID09PSBcInByZXZcIikgcmV0dXJuIGtleS5zdWJzdHIoMCwgdXBwZXJOZWVkbGUubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiBsbHAgPCAwID8gbnVsbCA6IGtleS5zdWJzdHIoMCwgbGxwKSArIGxvd2VyTmVlZGxlW2xscF0gKyB1cHBlck5lZWRsZS5zdWJzdHIobGxwICsgMSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGRJZ25vcmVDYXNlQWxnb3JpdGhtKHdoZXJlQ2xhdXNlLCBtYXRjaCwgbmVlZGxlcywgc3VmZml4KSB7XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJuZWVkbGVzXCIgdHlwZT1cIkFycmF5XCIgZWxlbWVudFR5cGU9XCJTdHJpbmdcIj48L3BhcmFtPlxuICAgICAgICAgICAgdmFyIHVwcGVyLFxuICAgICAgICAgICAgICAgIGxvd2VyLFxuICAgICAgICAgICAgICAgIGNvbXBhcmUsXG4gICAgICAgICAgICAgICAgdXBwZXJOZWVkbGVzLFxuICAgICAgICAgICAgICAgIGxvd2VyTmVlZGxlcyxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgbmV4dEtleVN1ZmZpeCxcbiAgICAgICAgICAgICAgICBuZWVkbGVzTGVuID0gbmVlZGxlcy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIW5lZWRsZXMuZXZlcnkoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHMgPT09ICdzdHJpbmcnO1xuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh3aGVyZUNsYXVzZSwgU1RSSU5HX0VYUEVDVEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXREaXJlY3Rpb24oZGlyKSB7XG4gICAgICAgICAgICAgICAgdXBwZXIgPSB1cHBlckZhY3RvcnkoZGlyKTtcbiAgICAgICAgICAgICAgICBsb3dlciA9IGxvd2VyRmFjdG9yeShkaXIpO1xuICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBkaXIgPT09IFwibmV4dFwiID8gc2ltcGxlQ29tcGFyZSA6IHNpbXBsZUNvbXBhcmVSZXZlcnNlO1xuICAgICAgICAgICAgICAgIHZhciBuZWVkbGVCb3VuZHMgPSBuZWVkbGVzLm1hcChmdW5jdGlvbiAobmVlZGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGxvd2VyOiBsb3dlcihuZWVkbGUpLCB1cHBlcjogdXBwZXIobmVlZGxlKSB9O1xuICAgICAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmUoYS5sb3dlciwgYi5sb3dlcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdXBwZXJOZWVkbGVzID0gbmVlZGxlQm91bmRzLm1hcChmdW5jdGlvbiAobmIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5iLnVwcGVyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxvd2VyTmVlZGxlcyA9IG5lZWRsZUJvdW5kcy5tYXAoZnVuY3Rpb24gKG5iKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuYi5sb3dlcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXI7XG4gICAgICAgICAgICAgICAgbmV4dEtleVN1ZmZpeCA9IGRpciA9PT0gXCJuZXh0XCIgPyBcIlwiIDogc3VmZml4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5pdERpcmVjdGlvbihcIm5leHRcIik7XG5cbiAgICAgICAgICAgIHZhciBjID0gbmV3IHdoZXJlQ2xhdXNlLl9jdHguY29sbENsYXNzKHdoZXJlQ2xhdXNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElEQktleVJhbmdlLmJvdW5kKHVwcGVyTmVlZGxlc1swXSwgbG93ZXJOZWVkbGVzW25lZWRsZXNMZW4gLSAxXSArIHN1ZmZpeCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYy5fb25kaXJlY3Rpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBldmVudCBvbmx5cyBvY2N1ciBiZWZvcmUgZmlsdGVyIGlzIGNhbGxlZCB0aGUgZmlyc3QgdGltZS5cbiAgICAgICAgICAgICAgICBpbml0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZmlyc3RQb3NzaWJsZU5lZWRsZSA9IDA7XG5cbiAgICAgICAgICAgIGMuX2FkZEFsZ29yaXRobShmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cIklEQkN1cnNvclwiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYWR2YW5jZVwiIHR5cGU9XCJGdW5jdGlvblwiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicmVzb2x2ZVwiIHR5cGU9XCJGdW5jdGlvblwiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGN1cnNvci5rZXk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGxvd2VyS2V5ID0gbG93ZXIoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gobG93ZXJLZXksIGxvd2VyTmVlZGxlcywgZmlyc3RQb3NzaWJsZU5lZWRsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvd2VzdFBvc3NpYmxlQ2FzaW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0UG9zc2libGVOZWVkbGU7IGkgPCBuZWVkbGVzTGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXNpbmcgPSBuZXh0Q2FzaW5nKGtleSwgbG93ZXJLZXksIHVwcGVyTmVlZGxlc1tpXSwgbG93ZXJOZWVkbGVzW2ldLCBjb21wYXJlLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhc2luZyA9PT0gbnVsbCAmJiBsb3dlc3RQb3NzaWJsZUNhc2luZyA9PT0gbnVsbCkgZmlyc3RQb3NzaWJsZU5lZWRsZSA9IGkgKyAxO2Vsc2UgaWYgKGxvd2VzdFBvc3NpYmxlQ2FzaW5nID09PSBudWxsIHx8IGNvbXBhcmUobG93ZXN0UG9zc2libGVDYXNpbmcsIGNhc2luZykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXN0UG9zc2libGVDYXNpbmcgPSBjYXNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VzdFBvc3NpYmxlQ2FzaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUobG93ZXN0UG9zc2libGVDYXNpbmcgKyBuZXh0S2V5U3VmZml4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdoZXJlQ2xhdXNlIHB1YmxpYyBtZXRob2RzXG4gICAgICAgIC8vXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZXR3ZWVuOiBmdW5jdGlvbiAobG93ZXIsIHVwcGVyLCBpbmNsdWRlTG93ZXIsIGluY2x1ZGVVcHBlcikge1xuICAgICAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5cbiAgICAgICAgICAgICAgICAvLy8gICAgIEZpbHRlciBvdXQgcmVjb3JkcyB3aG9zZSB3aGVyZS1maWVsZCBsYXlzIGJldHdlZW4gZ2l2ZW4gbG93ZXIgYW5kIHVwcGVyIHZhbHVlcy4gQXBwbGllcyB0byBTdHJpbmdzLCBOdW1iZXJzIGFuZCBEYXRlcy5cbiAgICAgICAgICAgICAgICAvLy8gPC9zdW1tYXJ5PlxuICAgICAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImxvd2VyXCI+PC9wYXJhbT5cbiAgICAgICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJ1cHBlclwiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiaW5jbHVkZUxvd2VyXCIgb3B0aW9uYWw9XCJ0cnVlXCI+V2hldGhlciBpdGVtcyB0aGF0IGVxdWFscyBsb3dlciBzaG91bGQgYmUgaW5jbHVkZWQuIERlZmF1bHQgdHJ1ZS48L3BhcmFtPlxuICAgICAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImluY2x1ZGVVcHBlclwiIG9wdGlvbmFsPVwidHJ1ZVwiPldoZXRoZXIgaXRlbXMgdGhhdCBlcXVhbHMgdXBwZXIgc2hvdWxkIGJlIGluY2x1ZGVkLiBEZWZhdWx0IGZhbHNlLjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJDb2xsZWN0aW9uXCI+PC9yZXR1cm5zPlxuICAgICAgICAgICAgICAgIGluY2x1ZGVMb3dlciA9IGluY2x1ZGVMb3dlciAhPT0gZmFsc2U7IC8vIERlZmF1bHQgdG8gdHJ1ZVxuICAgICAgICAgICAgICAgIGluY2x1ZGVVcHBlciA9IGluY2x1ZGVVcHBlciA9PT0gdHJ1ZTsgLy8gRGVmYXVsdCB0byBmYWxzZVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbXAobG93ZXIsIHVwcGVyKSA+IDAgfHwgY21wKGxvd2VyLCB1cHBlcikgPT09IDAgJiYgKGluY2x1ZGVMb3dlciB8fCBpbmNsdWRlVXBwZXIpICYmICEoaW5jbHVkZUxvd2VyICYmIGluY2x1ZGVVcHBlcikpIHJldHVybiBlbXB0eUNvbGxlY3Rpb24odGhpcyk7IC8vIFdvcmthcm91bmQgZm9yIGlkaW90aWMgVzNDIFNwZWNpZmljYXRpb24gdGhhdCBEYXRhRXJyb3IgbXVzdCBiZSB0aHJvd24gaWYgbG93ZXIgPiB1cHBlci4gVGhlIG5hdHVyYWwgcmVzdWx0IHdvdWxkIGJlIHRvIHJldHVybiBhbiBlbXB0eSBjb2xsZWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuX2N0eC5jb2xsQ2xhc3ModGhpcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElEQktleVJhbmdlLmJvdW5kKGxvd2VyLCB1cHBlciwgIWluY2x1ZGVMb3dlciwgIWluY2x1ZGVVcHBlcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcXVhbHM6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5fY3R4LmNvbGxDbGFzcyh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJREJLZXlSYW5nZS5vbmx5KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhYm92ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLl9jdHguY29sbENsYXNzKHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElEQktleVJhbmdlLmxvd2VyQm91bmQodmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFib3ZlT3JFcXVhbDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLl9jdHguY29sbENsYXNzKHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElEQktleVJhbmdlLmxvd2VyQm91bmQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJlbG93OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuX2N0eC5jb2xsQ2xhc3ModGhpcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSURCS2V5UmFuZ2UudXBwZXJCb3VuZCh2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmVsb3dPckVxdWFsOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuX2N0eC5jb2xsQ2xhc3ModGhpcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSURCS2V5UmFuZ2UudXBwZXJCb3VuZCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhcnRzV2l0aDogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0clwiIHR5cGU9XCJTdHJpbmdcIj48L3BhcmFtPlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhaWwodGhpcywgU1RSSU5HX0VYUEVDVEVEKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iZXR3ZWVuKHN0ciwgc3RyICsgbWF4U3RyaW5nLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGFydHNXaXRoSWdub3JlQ2FzZTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0clwiIHR5cGU9XCJTdHJpbmdcIj48L3BhcmFtPlxuICAgICAgICAgICAgICAgIGlmIChzdHIgPT09IFwiXCIpIHJldHVybiB0aGlzLnN0YXJ0c1dpdGgoc3RyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5pbmRleE9mKGFbMF0pID09PSAwO1xuICAgICAgICAgICAgICAgIH0sIFtzdHJdLCBtYXhTdHJpbmcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVxdWFsc0lnbm9yZUNhc2U6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzdHJcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geCA9PT0gYVswXTtcbiAgICAgICAgICAgICAgICB9LCBbc3RyXSwgXCJcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW55T2ZJZ25vcmVDYXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5pbmRleE9mKHgpICE9PSAtMTtcbiAgICAgICAgICAgICAgICB9LCBzZXQsIFwiXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXJ0c1dpdGhBbnlPZklnbm9yZUNhc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKSByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhZGRJZ25vcmVDYXNlQWxnb3JpdGhtKHRoaXMsIGZ1bmN0aW9uICh4LCBhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnNvbWUoZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4LmluZGV4T2YobikgPT09IDA7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIHNldCwgbWF4U3RyaW5nKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbnlPZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZXQgPSBnZXRBcnJheU9mLmFwcGx5KE5PX0NIQVJfQVJSQVksIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBhcmUgPSBhc2NlbmRpbmc7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0LnNvcnQoY29tcGFyZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKSByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciBjID0gbmV3IHRoaXMuX2N0eC5jb2xsQ2xhc3ModGhpcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSURCS2V5UmFuZ2UuYm91bmQoc2V0WzBdLCBzZXRbc2V0Lmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGMuX29uZGlyZWN0aW9uY2hhbmdlID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb21wYXJlID0gZGlyZWN0aW9uID09PSBcIm5leHRcIiA/IGFzY2VuZGluZyA6IGRlc2NlbmRpbmc7XG4gICAgICAgICAgICAgICAgICAgIHNldC5zb3J0KGNvbXBhcmUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIGMuX2FkZEFsZ29yaXRobShmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjdXJzb3Iua2V5O1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY29tcGFyZShrZXksIHNldFtpXSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY3Vyc29yIGhhcyBwYXNzZWQgYmV5b25kIHRoaXMga2V5LiBDaGVjayBuZXh0LlxuICAgICAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IHNldC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBuZXh0LiBTdG9wIHNlYXJjaGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGFyZShrZXksIHNldFtpXSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBzaG91bGQgYmUgaW5jbHVkZWQgYW5kIHdlIHNob3VsZCBjb250aW51ZSBhIHNpbmdsZSBzdGVwIGluIGNhc2UgbmV4dCBpdGVtIGhhcyB0aGUgc2FtZSBrZXkgb3IgcG9zc2libHkgb3VyIG5leHQga2V5IGluIHNldC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3Vyc29yLmtleSBub3QgeWV0IGF0IHNldFtpXS4gRm9yd2FyZCBjdXJzb3IgdG8gdGhlIG5leHQga2V5IHRvIGh1bnQgZm9yLlxuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKHNldFtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbm90RXF1YWw6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluQW55UmFuZ2UoW1stSW5maW5pdHksIHZhbHVlXSwgW3ZhbHVlLCBtYXhLZXldXSwgeyBpbmNsdWRlTG93ZXJzOiBmYWxzZSwgaW5jbHVkZVVwcGVyczogZmFsc2UgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBub25lT2Y6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKSByZXR1cm4gbmV3IHRoaXMuX2N0eC5jb2xsQ2xhc3ModGhpcyk7IC8vIFJldHVybiBlbnRpcmUgY29sbGVjdGlvbi5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzZXQuc29ydChhc2NlbmRpbmcpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2Zvcm0gW1wiYVwiLFwiYlwiLFwiY1wiXSB0byBhIHNldCBvZiByYW5nZXMgZm9yIGJldHdlZW4vYWJvdmUvYmVsb3c6IFtbLUluZmluaXR5LFwiYVwiXSwgW1wiYVwiLFwiYlwiXSwgW1wiYlwiLFwiY1wiXSwgW1wiY1wiLG1heEtleV1dXG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlcyA9IHNldC5yZWR1Y2UoZnVuY3Rpb24gKHJlcywgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMgPyByZXMuY29uY2F0KFtbcmVzW3Jlcy5sZW5ndGggLSAxXVsxXSwgdmFsXV0pIDogW1stSW5maW5pdHksIHZhbF1dO1xuICAgICAgICAgICAgICAgIH0sIG51bGwpO1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKFtzZXRbc2V0Lmxlbmd0aCAtIDFdLCBtYXhLZXldKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbkFueVJhbmdlKHJhbmdlcywgeyBpbmNsdWRlTG93ZXJzOiBmYWxzZSwgaW5jbHVkZVVwcGVyczogZmFsc2UgfSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKiogRmlsdGVyIG91dCB2YWx1ZXMgd2l0aGluZyBnaXZlbiBzZXQgb2YgcmFuZ2VzLlxyXG4gICAgICAgICAgICAqIEV4YW1wbGUsIGdpdmUgY2hpbGRyZW4gYW5kIGVsZGVycyBhIHJlYmF0ZSBvZiA1MCU6XHJcbiAgICAgICAgICAgICpcclxuICAgICAgICAgICAgKiAgIGRiLmZyaWVuZHMud2hlcmUoJ2FnZScpLmluQW55UmFuZ2UoW1swLDE4XSxbNjUsSW5maW5pdHldXSkubW9kaWZ5KHtSZWJhdGU6IDEvMn0pO1xyXG4gICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcnxEYXRlfEFycmF5KVtdW119IHJhbmdlc1xyXG4gICAgICAgICAgICAqIEBwYXJhbSB7e2luY2x1ZGVMb3dlcnM6IGJvb2xlYW4sIGluY2x1ZGVVcHBlcnM6IGJvb2xlYW59fSBvcHRpb25zXHJcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBpbkFueVJhbmdlOiBmdW5jdGlvbiAocmFuZ2VzLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJhbmdlcy5ldmVyeShmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlWzBdICE9PSB1bmRlZmluZWQgJiYgcmFuZ2VbMV0gIT09IHVuZGVmaW5lZCAmJiBhc2NlbmRpbmcocmFuZ2VbMF0sIHJhbmdlWzFdKSA8PSAwO1xuICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFwiRmlyc3QgYXJndW1lbnQgdG8gaW5BbnlSYW5nZSgpIG11c3QgYmUgYW4gQXJyYXkgb2YgdHdvLXZhbHVlIEFycmF5cyBbbG93ZXIsdXBwZXJdIHdoZXJlIHVwcGVyIG11c3Qgbm90IGJlIGxvd2VyIHRoYW4gbG93ZXJcIiwgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZUxvd2VycyA9ICFvcHRpb25zIHx8IG9wdGlvbnMuaW5jbHVkZUxvd2VycyAhPT0gZmFsc2U7IC8vIERlZmF1bHQgdG8gdHJ1ZVxuICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlVXBwZXJzID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGVVcHBlcnMgPT09IHRydWU7IC8vIERlZmF1bHQgdG8gZmFsc2VcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFJhbmdlKHJhbmdlcywgbmV3UmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByYW5nZXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21wKG5ld1JhbmdlWzBdLCByYW5nZVsxXSkgPCAwICYmIGNtcChuZXdSYW5nZVsxXSwgcmFuZ2VbMF0pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlWzBdID0gbWluKHJhbmdlWzBdLCBuZXdSYW5nZVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VbMV0gPSBtYXgocmFuZ2VbMV0sIG5ld1JhbmdlWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbCkgcmFuZ2VzLnB1c2gobmV3UmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzb3J0RGlyZWN0aW9uID0gYXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJhbmdlU29ydGVyKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvcnREaXJlY3Rpb24oYVswXSwgYlswXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSm9pbiBvdmVybGFwcGluZyByYW5nZXNcbiAgICAgICAgICAgICAgICB2YXIgc2V0O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHNldCA9IHJhbmdlcy5yZWR1Y2UoYWRkUmFuZ2UsIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0LnNvcnQocmFuZ2VTb3J0ZXIpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIElOVkFMSURfS0VZX0FSR1VNRU5UKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGtleUlzQmV5b25kQ3VycmVudEVudHJ5ID0gaW5jbHVkZVVwcGVycyA/IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFzY2VuZGluZyhrZXksIHNldFtpXVsxXSkgPiAwO1xuICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhc2NlbmRpbmcoa2V5LCBzZXRbaV1bMV0pID49IDA7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHZhciBrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeSA9IGluY2x1ZGVMb3dlcnMgPyBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXNjZW5kaW5nKGtleSwgc2V0W2ldWzBdKSA+IDA7XG4gICAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NlbmRpbmcoa2V5LCBzZXRbaV1bMF0pID49IDA7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtleVdpdGhpbkN1cnJlbnRSYW5nZShrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFrZXlJc0JleW9uZEN1cnJlbnRFbnRyeShrZXkpICYmICFrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeShrZXkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjaGVja0tleSA9IGtleUlzQmV5b25kQ3VycmVudEVudHJ5O1xuXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBuZXcgY3R4LmNvbGxDbGFzcyh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJREJLZXlSYW5nZS5ib3VuZChzZXRbMF1bMF0sIHNldFtzZXQubGVuZ3RoIC0gMV1bMV0sICFpbmNsdWRlTG93ZXJzLCAhaW5jbHVkZVVwcGVycyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjLl9vbmRpcmVjdGlvbmNoYW5nZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrS2V5ID0ga2V5SXNCZXlvbmRDdXJyZW50RW50cnk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0RGlyZWN0aW9uID0gYXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tLZXkgPSBrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb24gPSBkZXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldC5zb3J0KHJhbmdlU29ydGVyKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgYy5fYWRkQWxnb3JpdGhtKGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGN1cnNvci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjaGVja0tleShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY3Vyc29yIGhhcyBwYXNzZWQgYmV5b25kIHRoaXMga2V5LiBDaGVjayBuZXh0LlxuICAgICAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IHNldC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBuZXh0LiBTdG9wIHNlYXJjaGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5V2l0aGluQ3VycmVudFJhbmdlKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBzaG91bGQgYmUgaW5jbHVkZWQgYW5kIHdlIHNob3VsZCBjb250aW51ZSBhIHNpbmdsZSBzdGVwIGluIGNhc2UgbmV4dCBpdGVtIGhhcyB0aGUgc2FtZSBrZXkgb3IgcG9zc2libHkgb3VyIG5leHQga2V5IGluIHNldC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNtcChrZXksIHNldFtpXVsxXSkgPT09IDAgfHwgY21wKGtleSwgc2V0W2ldWzBdKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5jbHVkZVVwcGVyIG9yIGluY2x1ZGVMb3dlciBpcyBmYWxzZSBzbyBrZXlXaXRoaW5DdXJyZW50UmFuZ2UoKSByZXR1cm5zIGZhbHNlIGV2ZW4gdGhvdWdoIHdlIGFyZSBhdCByYW5nZSBib3JkZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSB0byBuZXh0IGtleSBidXQgZG9uJ3QgaW5jbHVkZSB0aGlzIG9uZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnNvci5rZXkgbm90IHlldCBhdCBzZXRbaV0uIEZvcndhcmQgY3Vyc29yIHRvIHRoZSBuZXh0IGtleSB0byBodW50IGZvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3J0RGlyZWN0aW9uID09PSBhc2NlbmRpbmcpIGN1cnNvci5jb250aW51ZShzZXRbaV1bMF0pO2Vsc2UgY3Vyc29yLmNvbnRpbnVlKHNldFtpXVsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXJ0c1dpdGhBbnlPZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZXQgPSBnZXRBcnJheU9mLmFwcGx5KE5PX0NIQVJfQVJSQVksIGFyZ3VtZW50cyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXNldC5ldmVyeShmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHMgPT09ICdzdHJpbmcnO1xuICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFwic3RhcnRzV2l0aEFueU9mKCkgb25seSB3b3JrcyB3aXRoIHN0cmluZ3NcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKSByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5BbnlSYW5nZShzZXQubWFwKGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtzdHIsIHN0ciArIG1heFN0cmluZ107XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgLy8gQ29sbGVjdGlvbiBDbGFzc1xuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24od2hlcmVDbGF1c2UsIGtleVJhbmdlR2VuZXJhdG9yKSB7XG4gICAgICAgIC8vLyA8c3VtbWFyeT5cbiAgICAgICAgLy8vXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIndoZXJlQ2xhdXNlXCIgdHlwZT1cIldoZXJlQ2xhdXNlXCI+V2hlcmUgY2xhdXNlIGluc3RhbmNlPC9wYXJhbT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwia2V5UmFuZ2VHZW5lcmF0b3JcIiB2YWx1ZT1cImZ1bmN0aW9uKCl7IHJldHVybiBJREJLZXlSYW5nZS5ib3VuZCgwLDEpO31cIiBvcHRpb25hbD1cInRydWVcIj48L3BhcmFtPlxuICAgICAgICB2YXIga2V5UmFuZ2UgPSBudWxsLFxuICAgICAgICAgICAgZXJyb3IgPSBudWxsO1xuICAgICAgICBpZiAoa2V5UmFuZ2VHZW5lcmF0b3IpIHRyeSB7XG4gICAgICAgICAgICBrZXlSYW5nZSA9IGtleVJhbmdlR2VuZXJhdG9yKCk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHdoZXJlQ3R4ID0gd2hlcmVDbGF1c2UuX2N0eCxcbiAgICAgICAgICAgIHRhYmxlID0gd2hlcmVDdHgudGFibGU7XG4gICAgICAgIHRoaXMuX2N0eCA9IHtcbiAgICAgICAgICAgIHRhYmxlOiB0YWJsZSxcbiAgICAgICAgICAgIGluZGV4OiB3aGVyZUN0eC5pbmRleCxcbiAgICAgICAgICAgIGlzUHJpbUtleTogIXdoZXJlQ3R4LmluZGV4IHx8IHRhYmxlLnNjaGVtYS5wcmltS2V5LmtleVBhdGggJiYgd2hlcmVDdHguaW5kZXggPT09IHRhYmxlLnNjaGVtYS5wcmltS2V5Lm5hbWUsXG4gICAgICAgICAgICByYW5nZToga2V5UmFuZ2UsXG4gICAgICAgICAgICBrZXlzT25seTogZmFsc2UsXG4gICAgICAgICAgICBkaXI6IFwibmV4dFwiLFxuICAgICAgICAgICAgdW5pcXVlOiBcIlwiLFxuICAgICAgICAgICAgYWxnb3JpdGhtOiBudWxsLFxuICAgICAgICAgICAgZmlsdGVyOiBudWxsLFxuICAgICAgICAgICAgcmVwbGF5RmlsdGVyOiBudWxsLFxuICAgICAgICAgICAganVzdExpbWl0OiB0cnVlLCAvLyBUcnVlIGlmIGEgcmVwbGF5RmlsdGVyIGlzIGp1c3QgYSBmaWx0ZXIgdGhhdCBwZXJmb3JtcyBhIFwibGltaXRcIiBvcGVyYXRpb24gKG9yIG5vbmUgYXQgYWxsKVxuICAgICAgICAgICAgaXNNYXRjaDogbnVsbCxcbiAgICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICAgIGxpbWl0OiBJbmZpbml0eSxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciwgLy8gSWYgc2V0LCBhbnkgcHJvbWlzZSBtdXN0IGJlIHJlamVjdGVkIHdpdGggdGhpcyBlcnJvclxuICAgICAgICAgICAgb3I6IHdoZXJlQ3R4Lm9yLFxuICAgICAgICAgICAgdmFsdWVNYXBwZXI6IHRhYmxlLmhvb2sucmVhZGluZy5maXJlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNQbGFpbktleVJhbmdlKGN0eCwgaWdub3JlTGltaXRGaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuICEoY3R4LmZpbHRlciB8fCBjdHguYWxnb3JpdGhtIHx8IGN0eC5vcikgJiYgKGlnbm9yZUxpbWl0RmlsdGVyID8gY3R4Lmp1c3RMaW1pdCA6ICFjdHgucmVwbGF5RmlsdGVyKTtcbiAgICB9XG5cbiAgICBwcm9wcyhDb2xsZWN0aW9uLnByb3RvdHlwZSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIENvbGxlY3Rpb24gUHJpdmF0ZSBGdW5jdGlvbnNcbiAgICAgICAgLy9cblxuICAgICAgICBmdW5jdGlvbiBhZGRGaWx0ZXIoY3R4LCBmbikge1xuICAgICAgICAgICAgY3R4LmZpbHRlciA9IGNvbWJpbmUoY3R4LmZpbHRlciwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkUmVwbGF5RmlsdGVyKGN0eCwgZmFjdG9yeSwgaXNMaW1pdEZpbHRlcikge1xuICAgICAgICAgICAgdmFyIGN1cnIgPSBjdHgucmVwbGF5RmlsdGVyO1xuICAgICAgICAgICAgY3R4LnJlcGxheUZpbHRlciA9IGN1cnIgPyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbWJpbmUoY3VycigpLCBmYWN0b3J5KCkpO1xuICAgICAgICAgICAgfSA6IGZhY3Rvcnk7XG4gICAgICAgICAgICBjdHguanVzdExpbWl0ID0gaXNMaW1pdEZpbHRlciAmJiAhY3VycjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1hdGNoRmlsdGVyKGN0eCwgZm4pIHtcbiAgICAgICAgICAgIGN0eC5pc01hdGNoID0gY29tYmluZShjdHguaXNNYXRjaCwgZm4pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEBwYXJhbSBjdHgge1xyXG4gICAgICAgICAqICAgICAgaXNQcmltS2V5OiBib29sZWFuLFxyXG4gICAgICAgICAqICAgICAgdGFibGU6IFRhYmxlLFxyXG4gICAgICAgICAqICAgICAgaW5kZXg6IHN0cmluZ1xyXG4gICAgICAgICAqIH1cclxuICAgICAgICAgKiBAcGFyYW0gc3RvcmUgSURCT2JqZWN0U3RvcmVcclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldEluZGV4T3JTdG9yZShjdHgsIHN0b3JlKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmlzUHJpbUtleSkgcmV0dXJuIHN0b3JlO1xuICAgICAgICAgICAgdmFyIGluZGV4U3BlYyA9IGN0eC50YWJsZS5zY2hlbWEuaWR4QnlOYW1lW2N0eC5pbmRleF07XG4gICAgICAgICAgICBpZiAoIWluZGV4U3BlYykgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiS2V5UGF0aCBcIiArIGN0eC5pbmRleCArIFwiIG9uIG9iamVjdCBzdG9yZSBcIiArIHN0b3JlLm5hbWUgKyBcIiBpcyBub3QgaW5kZXhlZFwiKTtcbiAgICAgICAgICAgIHJldHVybiBzdG9yZS5pbmRleChpbmRleFNwZWMubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogQHBhcmFtIGN0eCB7XHJcbiAgICAgICAgICogICAgICBpc1ByaW1LZXk6IGJvb2xlYW4sXHJcbiAgICAgICAgICogICAgICB0YWJsZTogVGFibGUsXHJcbiAgICAgICAgICogICAgICBpbmRleDogc3RyaW5nLFxyXG4gICAgICAgICAqICAgICAga2V5c09ubHk6IGJvb2xlYW4sXHJcbiAgICAgICAgICogICAgICByYW5nZT86IElEQktleVJhbmdlLFxyXG4gICAgICAgICAqICAgICAgZGlyOiBcIm5leHRcIiB8IFwicHJldlwiXHJcbiAgICAgICAgICogfVxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBvcGVuQ3Vyc29yKGN0eCwgc3RvcmUpIHtcbiAgICAgICAgICAgIHZhciBpZHhPclN0b3JlID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgc3RvcmUpO1xuICAgICAgICAgICAgcmV0dXJuIGN0eC5rZXlzT25seSAmJiAnb3BlbktleUN1cnNvcicgaW4gaWR4T3JTdG9yZSA/IGlkeE9yU3RvcmUub3BlbktleUN1cnNvcihjdHgucmFuZ2UgfHwgbnVsbCwgY3R4LmRpciArIGN0eC51bmlxdWUpIDogaWR4T3JTdG9yZS5vcGVuQ3Vyc29yKGN0eC5yYW5nZSB8fCBudWxsLCBjdHguZGlyICsgY3R4LnVuaXF1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpdGVyKGN0eCwgZm4sIHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUpIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBjdHgucmVwbGF5RmlsdGVyID8gY29tYmluZShjdHguZmlsdGVyLCBjdHgucmVwbGF5RmlsdGVyKCkpIDogY3R4LmZpbHRlcjtcbiAgICAgICAgICAgIGlmICghY3R4Lm9yKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0ZShvcGVuQ3Vyc29yKGN0eCwgaWRic3RvcmUpLCBjb21iaW5lKGN0eC5hbGdvcml0aG0sIGZpbHRlciksIGZuLCByZXNvbHZlLCByZWplY3QsICFjdHgua2V5c09ubHkgJiYgY3R4LnZhbHVlTWFwcGVyKTtcbiAgICAgICAgICAgIH0gZWxzZSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZXQgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZWQgPSAwO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZWJvdGgoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgrK3Jlc29sdmVkID09PSAyKSByZXNvbHZlKCk7IC8vIFNlZW1zIGxpa2Ugd2UganVzdCBzdXBwb3J0IG9yIGJ0d24gbWF4IDIgZXhwcmVzc2lvbnMsIGJ1dCB0aGVyZSBhcmUgbm8gbGltaXQgYmVjYXVzZSB3ZSBkbyByZWN1cnNpb24uXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdW5pb24oaXRlbSwgY3Vyc29yLCBhZHZhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyIHx8IGZpbHRlcihjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmVib3RoLCByZWplY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY3Vyc29yLnByaW1hcnlLZXkudG9TdHJpbmcoKTsgLy8gQ29udmVydHMgYW55IERhdGUgdG8gU3RyaW5nLCBTdHJpbmcgdG8gU3RyaW5nLCBOdW1iZXIgdG8gU3RyaW5nIGFuZCBBcnJheSB0byBjb21tYS1zZXBhcmF0ZWQgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc093bihzZXQsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oaXRlbSwgY3Vyc29yLCBhZHZhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN0eC5vci5faXRlcmF0ZSh1bmlvbiwgcmVzb2x2ZWJvdGgsIHJlamVjdCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgICAgIGl0ZXJhdGUob3BlbkN1cnNvcihjdHgsIGlkYnN0b3JlKSwgY3R4LmFsZ29yaXRobSwgdW5pb24sIHJlc29sdmVib3RoLCByZWplY3QsICFjdHgua2V5c09ubHkgJiYgY3R4LnZhbHVlTWFwcGVyKTtcbiAgICAgICAgICAgIH0pKCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0SW5zdGFuY2VUZW1wbGF0ZShjdHgpIHtcbiAgICAgICAgICAgIHJldHVybiBjdHgudGFibGUuc2NoZW1hLmluc3RhbmNlVGVtcGxhdGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gQ29sbGVjdGlvbiBQcm90ZWN0ZWQgRnVuY3Rpb25zXG4gICAgICAgICAgICAvL1xuXG4gICAgICAgICAgICBfcmVhZDogZnVuY3Rpb24gKGZuLCBjYikge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5lcnJvcikgcmV0dXJuIGN0eC50YWJsZS5fdHJhbnMobnVsbCwgZnVuY3Rpb24gcmVqZWN0b3IocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChjdHguZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO2Vsc2UgcmV0dXJuIGN0eC50YWJsZS5faWRic3RvcmUoUkVBRE9OTFksIGZuKS50aGVuKGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGU6IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgaWYgKGN0eC5lcnJvcikgcmV0dXJuIGN0eC50YWJsZS5fdHJhbnMobnVsbCwgZnVuY3Rpb24gcmVqZWN0b3IocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChjdHguZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO2Vsc2UgcmV0dXJuIGN0eC50YWJsZS5faWRic3RvcmUoUkVBRFdSSVRFLCBmbiwgXCJsb2NrZWRcIik7IC8vIFdoZW4gZG9pbmcgd3JpdGUgb3BlcmF0aW9ucyBvbiBjb2xsZWN0aW9ucywgYWx3YXlzIGxvY2sgdGhlIG9wZXJhdGlvbiBzbyB0aGF0IHVwY29taW5nIG9wZXJhdGlvbnMgZ2V0cyBxdWV1ZWQuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZEFsZ29yaXRobTogZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICBjdHguYWxnb3JpdGhtID0gY29tYmluZShjdHguYWxnb3JpdGhtLCBmbik7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBfaXRlcmF0ZTogZnVuY3Rpb24gKGZuLCByZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXIodGhpcy5fY3R4LCBmbiwgcmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24gKHByb3BzJCQxKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gT2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZSksXG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IE9iamVjdC5jcmVhdGUodGhpcy5fY3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMkJDEpIGV4dGVuZChjdHgsIHByb3BzJCQxKTtcbiAgICAgICAgICAgICAgICBydi5fY3R4ID0gY3R4O1xuICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJhdzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2N0eC52YWx1ZU1hcHBlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gQ29sbGVjdGlvbiBQdWJsaWMgbWV0aG9kc1xuICAgICAgICAgICAgLy9cblxuICAgICAgICAgICAgZWFjaDogZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcblxuICAgICAgICAgICAgICAgIGlmIChmYWtlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0SW5zdGFuY2VUZW1wbGF0ZShjdHgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbUtleVBhdGggPSBjdHgudGFibGUuc2NoZW1hLnByaW1LZXkua2V5UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGdldEJ5S2V5UGF0aChpdGVtLCBjdHguaW5kZXggPyBjdHgudGFibGUuc2NoZW1hLmlkeEJ5TmFtZVtjdHguaW5kZXhdLmtleVBhdGggOiBwcmltS2V5UGF0aCksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmltYXJ5S2V5ID0gZ2V0QnlLZXlQYXRoKGl0ZW0sIHByaW1LZXlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgZm4oaXRlbSwgeyBrZXk6IGtleSwgcHJpbWFyeUtleTogcHJpbWFyeUtleSB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVyKGN0eCwgZm4sIHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY291bnQ6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIGlmIChmYWtlKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKDApLnRoZW4oY2IpO1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNQbGFpbktleVJhbmdlKGN0eCwgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHBsYWluIGtleSByYW5nZS4gV2UgY2FuIHVzZSB0aGUgY291bnQoKSBtZXRob2QgaWYgdGhlIGluZGV4LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IGdldEluZGV4T3JTdG9yZShjdHgsIGlkYnN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBjdHgucmFuZ2UgPyBpZHguY291bnQoY3R4LnJhbmdlKSA6IGlkeC5jb3VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoTWF0aC5taW4oZS50YXJnZXQucmVzdWx0LCBjdHgubGltaXQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sIGNiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbGdvcml0aG1zLCBmaWx0ZXJzIG9yIGV4cHJlc3Npb25zIGFyZSBhcHBsaWVkLiBOZWVkIHRvIGNvdW50IG1hbnVhbGx5LlxuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlcihjdHgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2NvdW50O3JldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgICAgICAgICB9LCBjYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgc29ydEJ5OiBmdW5jdGlvbiAoa2V5UGF0aCwgY2IpIHtcbiAgICAgICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJrZXlQYXRoXCIgdHlwZT1cIlN0cmluZ1wiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0ga2V5UGF0aC5zcGxpdCgnLicpLnJldmVyc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcnQgPSBwYXJ0c1swXSxcbiAgICAgICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gcGFydHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXR2YWwob2JqLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpKSByZXR1cm4gZ2V0dmFsKG9ialtwYXJ0c1tpXV0sIGkgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialtsYXN0UGFydF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBvcmRlciA9IHRoaXMuX2N0eC5kaXIgPT09IFwibmV4dFwiID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc29ydGVyKGEsIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFWYWwgPSBnZXR2YWwoYSwgbGFzdEluZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJWYWwgPSBnZXR2YWwoYiwgbGFzdEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFWYWwgPCBiVmFsID8gLW9yZGVyIDogYVZhbCA+IGJWYWwgPyBvcmRlciA6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuc29ydChzb3J0ZXIpO1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgdG9BcnJheTogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICBmYWtlICYmIHJlc29sdmUoW2dldEluc3RhbmNlVGVtcGxhdGUoY3R4KV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzR2V0QWxsICYmIGN0eC5kaXIgPT09ICduZXh0JyAmJiBpc1BsYWluS2V5UmFuZ2UoY3R4LCB0cnVlKSAmJiBjdHgubGltaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIG9wdGltYXRpb24gaWYgd2UgY291bGQgdXNlIElEQk9iamVjdFN0b3JlLmdldEFsbCgpIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJREJLZXlSYW5nZS5nZXRBbGwoKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkaW5nSG9vayA9IGN0eC50YWJsZS5ob29rLnJlYWRpbmcuZmlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHhPclN0b3JlID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IGN0eC5saW1pdCA8IEluZmluaXR5ID8gaWR4T3JTdG9yZS5nZXRBbGwoY3R4LnJhbmdlLCBjdHgubGltaXQpIDogaWR4T3JTdG9yZS5nZXRBbGwoY3R4LnJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gcmVhZGluZ0hvb2sgPT09IG1pcnJvciA/IGV2ZW50U3VjY2Vzc0hhbmRsZXIocmVzb2x2ZSkgOiB3cmFwKGV2ZW50U3VjY2Vzc0hhbmRsZXIoZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLm1hcChyZWFkaW5nSG9vaykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldHRpbmcgYXJyYXkgdGhyb3VnaCBhIGN1cnNvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVyKGN0eCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiBhcnJheUNvbXBsZXRlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QsIGlkYnN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGNiKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG9mZnNldDogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldCA8PSAwKSByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICBjdHgub2Zmc2V0ICs9IG9mZnNldDsgLy8gRm9yIGNvdW50KClcbiAgICAgICAgICAgICAgICBpZiAoaXNQbGFpbktleVJhbmdlKGN0eCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUmVwbGF5RmlsdGVyKGN0eCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldExlZnQgPSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXRMZWZ0ID09PSAwKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0TGVmdCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLW9mZnNldExlZnQ7cmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmFkdmFuY2Uob2Zmc2V0TGVmdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldExlZnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFJlcGxheUZpbHRlcihjdHgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gb2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLS1vZmZzZXRMZWZ0IDwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxpbWl0OiBmdW5jdGlvbiAobnVtUm93cykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2N0eC5saW1pdCA9IE1hdGgubWluKHRoaXMuX2N0eC5saW1pdCwgbnVtUm93cyk7IC8vIEZvciBjb3VudCgpXG4gICAgICAgICAgICAgICAgYWRkUmVwbGF5RmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93c0xlZnQgPSBudW1Sb3dzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC0tcm93c0xlZnQgPD0gMCkgYWR2YW5jZShyZXNvbHZlKTsgLy8gU3RvcCBhZnRlciB0aGlzIGl0ZW0gaGFzIGJlZW4gaW5jbHVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3dzTGVmdCA+PSAwOyAvLyBJZiBudW1Sb3dzIGlzIGFscmVhZHkgYmVsb3cgMCwgcmV0dXJuIGZhbHNlIGJlY2F1c2UgdGhlbiAwIHdhcyBwYXNzZWQgdG8gbnVtUm93cyBpbml0aWFsbHkuIE90aGVyd2lzZSB3ZSB3b3VsZG50IGNvbWUgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHVudGlsOiBmdW5jdGlvbiAoZmlsdGVyRnVuY3Rpb24sIGJJbmNsdWRlU3RvcEVudHJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICBmYWtlICYmIGZpbHRlckZ1bmN0aW9uKGdldEluc3RhbmNlVGVtcGxhdGUoY3R4KSk7XG4gICAgICAgICAgICAgICAgYWRkRmlsdGVyKHRoaXMuX2N0eCwgZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyRnVuY3Rpb24oY3Vyc29yLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiSW5jbHVkZVN0b3BFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBmaXJzdDogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGltaXQoMSkudG9BcnJheShmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYVswXTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxhc3Q6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKS5maXJzdChjYik7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uIChmaWx0ZXJGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImpzRnVuY3Rpb25GaWx0ZXJcIiB0eXBlPVwiRnVuY3Rpb25cIj5mdW5jdGlvbih2YWwpe3JldHVybiB0cnVlL2ZhbHNlfTwvcGFyYW0+XG4gICAgICAgICAgICAgICAgZmFrZSAmJiBmaWx0ZXJGdW5jdGlvbihnZXRJbnN0YW5jZVRlbXBsYXRlKHRoaXMuX2N0eCkpO1xuICAgICAgICAgICAgICAgIGFkZEZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlckZ1bmN0aW9uKGN1cnNvci52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gbWF0Y2ggZmlsdGVycyBub3QgdXNlZCBpbiBEZXhpZS5qcyBidXQgY2FuIGJlIHVzZWQgYnkgM3JkIHBhcnQgbGlicmFyaWVzIHRvIHRlc3QgYVxuICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gZm9yIGEgbWF0Y2ggd2l0aG91dCBxdWVyeWluZyBEQi4gVXNlZCBieSBEZXhpZS5PYnNlcnZhYmxlLlxuICAgICAgICAgICAgICAgIGFkZE1hdGNoRmlsdGVyKHRoaXMuX2N0eCwgZmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgYW5kOiBmdW5jdGlvbiAoZmlsdGVyRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgb3I6IGZ1bmN0aW9uIChpbmRleE5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFdoZXJlQ2xhdXNlKHRoaXMuX2N0eC50YWJsZSwgaW5kZXhOYW1lLCB0aGlzKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJldmVyc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdHguZGlyID0gdGhpcy5fY3R4LmRpciA9PT0gXCJwcmV2XCIgPyBcIm5leHRcIiA6IFwicHJldlwiO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vbmRpcmVjdGlvbmNoYW5nZSkgdGhpcy5fb25kaXJlY3Rpb25jaGFuZ2UodGhpcy5fY3R4LmRpcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBkZXNjOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZWFjaEtleTogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodmFsLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoY3Vyc29yLmtleSwgY3Vyc29yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGVhY2hVbmlxdWVLZXk6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIHRoaXMuX2N0eC51bmlxdWUgPSBcInVuaXF1ZVwiO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2hLZXkoY2IpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZWFjaFByaW1hcnlLZXk6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgY3R4LmtleXNPbmx5ID0gIWN0eC5pc01hdGNoO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHZhbCwgY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKGN1cnNvci5wcmltYXJ5S2V5LCBjdXJzb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAga2V5czogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKGN1cnNvci5rZXkpO1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGNiKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHByaW1hcnlLZXlzOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgICAgIGlmIChoYXNHZXRBbGwgJiYgY3R4LmRpciA9PT0gJ25leHQnICYmIGlzUGxhaW5LZXlSYW5nZShjdHgsIHRydWUpICYmIGN0eC5saW1pdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBvcHRpbWF0aW9uIGlmIHdlIGNvdWxkIHVzZSBJREJPYmplY3RTdG9yZS5nZXRBbGxLZXlzKCkgb3JcbiAgICAgICAgICAgICAgICAgICAgLy8gSURCS2V5UmFuZ2UuZ2V0QWxsS2V5cygpOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeE9yU3RvcmUgPSBnZXRJbmRleE9yU3RvcmUoY3R4LCBpZGJzdG9yZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gY3R4LmxpbWl0IDwgSW5maW5pdHkgPyBpZHhPclN0b3JlLmdldEFsbEtleXMoY3R4LnJhbmdlLCBjdHgubGltaXQpIDogaWR4T3JTdG9yZS5nZXRBbGxLZXlzKGN0eC5yYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGV2ZW50U3VjY2Vzc0hhbmRsZXIocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKGN1cnNvci5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB1bmlxdWVLZXlzOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdHgudW5pcXVlID0gXCJ1bmlxdWVcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5rZXlzKGNiKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGZpcnN0S2V5OiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5saW1pdCgxKS5rZXlzKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhWzBdO1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbGFzdEtleTogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2ZXJzZSgpLmZpcnN0S2V5KGNiKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGRpc3RpbmN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eCxcbiAgICAgICAgICAgICAgICAgICAgaWR4ID0gY3R4LmluZGV4ICYmIGN0eC50YWJsZS5zY2hlbWEuaWR4QnlOYW1lW2N0eC5pbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKCFpZHggfHwgIWlkeC5tdWx0aSkgcmV0dXJuIHRoaXM7IC8vIGRpc3RpbmN0KCkgb25seSBtYWtlcyBkaWZmZXJlbmNpZXMgb24gbXVsdGlFbnRyeSBpbmRleGVzLlxuICAgICAgICAgICAgICAgIHZhciBzZXQgPSB7fTtcbiAgICAgICAgICAgICAgICBhZGRGaWx0ZXIodGhpcy5fY3R4LCBmdW5jdGlvbiAoY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdHJLZXkgPSBjdXJzb3IucHJpbWFyeUtleS50b1N0cmluZygpOyAvLyBDb252ZXJ0cyBhbnkgRGF0ZSB0byBTdHJpbmcsIFN0cmluZyB0byBTdHJpbmcsIE51bWJlciB0byBTdHJpbmcgYW5kIEFycmF5IHRvIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gaGFzT3duKHNldCwgc3RyS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0W3N0cktleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWZvdW5kO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy9cbiAgICAvL1xuICAgIC8vIFdyaXRlYWJsZUNvbGxlY3Rpb24gQ2xhc3NcbiAgICAvL1xuICAgIC8vXG4gICAgZnVuY3Rpb24gV3JpdGVhYmxlQ29sbGVjdGlvbigpIHtcbiAgICAgICAgQ29sbGVjdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIGRlcml2ZShXcml0ZWFibGVDb2xsZWN0aW9uKS5mcm9tKENvbGxlY3Rpb24pLmV4dGVuZCh7XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gV3JpdGVhYmxlQ29sbGVjdGlvbiBQdWJsaWMgTWV0aG9kc1xuICAgICAgICAvL1xuXG4gICAgICAgIG1vZGlmeTogZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9jdHgsXG4gICAgICAgICAgICAgICAgaG9vayA9IGN0eC50YWJsZS5ob29rLFxuICAgICAgICAgICAgICAgIHVwZGF0aW5nSG9vayA9IGhvb2sudXBkYXRpbmcuZmlyZSxcbiAgICAgICAgICAgICAgICBkZWxldGluZ0hvb2sgPSBob29rLmRlbGV0aW5nLmZpcmU7XG5cbiAgICAgICAgICAgIGZha2UgJiYgdHlwZW9mIGNoYW5nZXMgPT09ICdmdW5jdGlvbicgJiYgY2hhbmdlcy5jYWxsKHsgdmFsdWU6IGN0eC50YWJsZS5zY2hlbWEuaW5zdGFuY2VUZW1wbGF0ZSB9LCBjdHgudGFibGUuc2NoZW1hLmluc3RhbmNlVGVtcGxhdGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd3JpdGUoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUsIHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGlmeWVyO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2hhbmdlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGFuZ2VzIGlzIGEgZnVuY3Rpb24gdGhhdCBtYXkgdXBkYXRlLCBhZGQgb3IgZGVsZXRlIHByb3B0ZXJ0aWVzIG9yIGV2ZW4gcmVxdWlyZSBhIGRlbGV0aW9uIHRoZSBvYmplY3QgaXRzZWxmIChkZWxldGUgdGhpcy5pdGVtKVxuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRpbmdIb29rID09PSBub3AgJiYgZGVsZXRpbmdIb29rID09PSBub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vb25lIGNhcmVzIGFib3V0IHdoYXQgaXMgYmVpbmcgY2hhbmdlZC4gSnVzdCBsZXQgdGhlIG1vZGlmaWVyIGZ1bmN0aW9uIGJlIHRoZSBnaXZlbiBhcmd1bWVudCBhcyBpcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmeWVyID0gY2hhbmdlcztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlb3BsZSB3YW50IHRvIGtub3cgZXhhY3RseSB3aGF0IGlzIGJlaW5nIG1vZGlmaWVkIG9yIGRlbGV0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMZXQgbW9kaWZ5ZXIgYmUgYSBwcm94eSBmdW5jdGlvbiB0aGF0IGZpbmRzIG91dCB3aGF0IGNoYW5nZXMgdGhlIGNhbGxlciBpcyBhY3R1YWxseSBkb2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGNhbGwgdGhlIGhvb2tzIGFjY29yZGluZ2x5IVxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZ5ZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnSXRlbSA9IGRlZXBDbG9uZShpdGVtKTsgLy8gQ2xvbmUgdGhlIGl0ZW0gZmlyc3Qgc28gd2UgY2FuIGNvbXBhcmUgbGF0ZXJzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VzLmNhbGwodGhpcywgaXRlbSwgdGhpcykgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7IC8vIENhbGwgdGhlIHJlYWwgbW9kaWZ5ZXIgZnVuY3Rpb24gKElmIGl0IHJldHVybnMgZmFsc2UgZXhwbGljaXRlbHksIGl0IG1lYW5zIGl0IGRvbnQgd2FudCB0byBtb2RpZnkgYW55dGluZyBvbiB0aGlzIG9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc093bih0aGlzLCBcInZhbHVlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZWFsIG1vZGlmeWVyIGZ1bmN0aW9uIHJlcXVlc3RzIGEgZGVsZXRpb24gb2YgdGhlIG9iamVjdC4gSW5mb3JtIHRoZSBkZWxldGluZ0hvb2sgdGhhdCBhIGRlbGV0aW9uIGlzIHRha2luZyBwbGFjZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRpbmdIb29rLmNhbGwodGhpcywgdGhpcy5wcmltS2V5LCBpdGVtLCB0cmFucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZGVsZXRpb24uIENoZWNrIHdoYXQgd2FzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdERpZmYgPSBnZXRPYmplY3REaWZmKG9yaWdJdGVtLCB0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZGl0aW9uYWxDaGFuZ2VzID0gdXBkYXRpbmdIb29rLmNhbGwodGhpcywgb2JqZWN0RGlmZiwgdGhpcy5wcmltS2V5LCBvcmlnSXRlbSwgdHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbENoYW5nZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvb2sgd2FudCB0byBhcHBseSBhZGRpdGlvbmFsIG1vZGlmaWNhdGlvbnMuIE1ha2Ugc3VyZSB0byBmdWxsZmlsbCB0aGUgd2lsbCBvZiB0aGUgaG9vay5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cyhhZGRpdGlvbmFsQ2hhbmdlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoLCBhZGRpdGlvbmFsQ2hhbmdlc1trZXlQYXRoXSk7IC8vIEFkZGluZyB7a2V5UGF0aDogdW5kZWZpbmVkfSBtZWFucyB0aGF0IHRoZSBrZXlQYXRoIHNob3VsZCBiZSBkZWxldGVkLiBIYW5kbGVkIGJ5IHNldEJ5S2V5UGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1cGRhdGluZ0hvb2sgPT09IG5vcCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGFuZ2VzIGlzIGEgc2V0IG9mIHtrZXlQYXRoOiB2YWx1ZX0gYW5kIG5vIG9uZSBpcyBsaXN0ZW5pbmcgdG8gdGhlIHVwZGF0aW5nIGhvb2suXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlQYXRocyA9IGtleXMoY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBudW1LZXlzID0ga2V5UGF0aHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBtb2RpZnllciA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW55dGhpbmdNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1LZXlzOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5UGF0aCA9IGtleVBhdGhzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBjaGFuZ2VzW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRCeUtleVBhdGgoaXRlbSwga2V5UGF0aCkgIT09IHZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgoaXRlbSwga2V5UGF0aCwgdmFsKTsgLy8gQWRkaW5nIHtrZXlQYXRoOiB1bmRlZmluZWR9IG1lYW5zIHRoYXQgdGhlIGtleVBhdGggc2hvdWxkIGJlIGRlbGV0ZWQuIEhhbmRsZWQgYnkgc2V0QnlLZXlQYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFueXRoaW5nTW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbnl0aGluZ01vZGlmaWVkO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoYW5nZXMgaXMgYSBzZXQgb2Yge2tleVBhdGg6IHZhbHVlfSBhbmQgcGVvcGxlIGFyZSBsaXN0ZW5pbmcgdG8gdGhlIHVwZGF0aW5nIGhvb2sgc28gd2UgbmVlZCB0byBjYWxsIGl0IGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBpdCB0byBhZGQgYWRkaXRpb25hbCBtb2RpZmljYXRpb25zIHRvIG1ha2UuXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnQ2hhbmdlcyA9IGNoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgPSBzaGFsbG93Q2xvbmUob3JpZ0NoYW5nZXMpOyAvLyBMZXQncyB3b3JrIHdpdGggYSBjbG9uZSBvZiB0aGUgY2hhbmdlcyBrZXlQYXRoL3ZhbHVlIHNldCBzbyB0aGF0IHdlIGNhbiByZXN0b3JlIGl0IGluIGNhc2UgYSBob29rIGV4dGVuZHMgaXQuXG4gICAgICAgICAgICAgICAgICAgIG1vZGlmeWVyID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnl0aGluZ01vZGlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRkaXRpb25hbENoYW5nZXMgPSB1cGRhdGluZ0hvb2suY2FsbCh0aGlzLCBjaGFuZ2VzLCB0aGlzLnByaW1LZXksIGRlZXBDbG9uZShpdGVtKSwgdHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxDaGFuZ2VzKSBleHRlbmQoY2hhbmdlcywgYWRkaXRpb25hbENoYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5cyhjaGFuZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IGNoYW5nZXNba2V5UGF0aF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoKSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoLCB2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnl0aGluZ01vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsQ2hhbmdlcykgY2hhbmdlcyA9IHNoYWxsb3dDbG9uZShvcmlnQ2hhbmdlcyk7IC8vIFJlc3RvcmUgb3JpZ2luYWwgY2hhbmdlcyBmb3IgbmV4dCBpdGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbnl0aGluZ01vZGlmaWVkO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZXJhdGlvbkNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGZhaWxLZXlzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbW9kaWZ5SXRlbShpdGVtLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEtleSA9IGN1cnNvci5wcmltYXJ5S2V5O1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc0NvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmltS2V5OiBjdXJzb3IucHJpbWFyeUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25zdWNjZXNzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uZXJyb3IoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXMucHVzaChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxLZXlzLnB1c2godGhpc0NvbnRleHQucHJpbUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0ZpbmlzaGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQ2F0Y2ggdGhlc2UgZXJyb3JzIGFuZCBsZXQgYSBmaW5hbCByZWplY3Rpb24gZGVjaWRlIHdoZXRoZXIgb3Igbm90IHRvIGFib3J0IGVudGlyZSB0cmFuc2FjdGlvblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGlmeWVyLmNhbGwodGhpc0NvbnRleHQsIGl0ZW0sIHRoaXNDb250ZXh0KSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGEgY2FsbGJhY2sgZXhwbGljaXRlbHkgcmV0dXJucyBmYWxzZSwgZG8gbm90IHBlcmZvcm0gdGhlIHVwZGF0ZSFcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiRGVsZXRlID0gIWhhc093bih0aGlzQ29udGV4dCwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrY291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnlDYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IGJEZWxldGUgPyBjdXJzb3IuZGVsZXRlKCkgOiBjdXJzb3IudXBkYXRlKHRoaXNDb250ZXh0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEuX2hvb2tDdHggPSB0aGlzQ29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGhvb2tlZEV2ZW50UmVqZWN0SGFuZGxlcihvbmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gaG9va2VkRXZlbnRTdWNjZXNzSGFuZGxlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsrc3VjY2Vzc0NvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja0ZpbmlzaGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBvbmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzQ29udGV4dC5vbnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvb2sgd2lsbCBleHBlY3QgZWl0aGVyIG9uZXJyb3Igb3Igb25zdWNjZXNzIHRvIGFsd2F5cyBiZSBjYWxsZWQhXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQ29udGV4dC5vbnN1Y2Nlc3ModGhpc0NvbnRleHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZG9SZWplY3QoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbHVyZXMucHVzaChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxLZXlzLnB1c2goY3VycmVudEtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgTW9kaWZ5RXJyb3IoXCJFcnJvciBtb2RpZnlpbmcgb25lIG9yIG1vcmUgb2JqZWN0c1wiLCBmYWlsdXJlcywgc3VjY2Vzc0NvdW50LCBmYWlsS2V5cykpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrRmluaXNoZWQoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVyYXRpb25Db21wbGV0ZSAmJiBzdWNjZXNzQ291bnQgKyBmYWlsdXJlcy5sZW5ndGggPT09IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbHVyZXMubGVuZ3RoID4gMCkgZG9SZWplY3QoKTtlbHNlIHJlc29sdmUoc3VjY2Vzc0NvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWxmLmNsb25lKCkucmF3KCkuX2l0ZXJhdGUobW9kaWZ5SXRlbSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrRmluaXNoZWQoKTtcbiAgICAgICAgICAgICAgICB9LCBkb1JlamVjdCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgJ2RlbGV0ZSc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4LFxuICAgICAgICAgICAgICAgIHJhbmdlID0gY3R4LnJhbmdlLFxuICAgICAgICAgICAgICAgIGRlbGV0aW5nSG9vayA9IGN0eC50YWJsZS5ob29rLmRlbGV0aW5nLmZpcmUsXG4gICAgICAgICAgICAgICAgaGFzRGVsZXRlSG9vayA9IGRlbGV0aW5nSG9vayAhPT0gbm9wO1xuICAgICAgICAgICAgaWYgKCFoYXNEZWxldGVIb29rICYmIGlzUGxhaW5LZXlSYW5nZShjdHgpICYmIChjdHguaXNQcmltS2V5ICYmICFoYW5nc09uRGVsZXRlTGFyZ2VLZXlSYW5nZSB8fCAhcmFuZ2UpKSAvLyBpZiBubyByYW5nZSwgd2UnbGwgdXNlIGNsZWFyKCkuXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBNYXkgdXNlIElEQk9iamVjdFN0b3JlLmRlbGV0ZShJREJLZXlSYW5nZSkgaW4gdGhpcyBjYXNlIChJc3N1ZSAjMjA4KVxuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgY2hyb21pdW0sIHRoaXMgaXMgdGhlIHdheSBtb3N0IG9wdGltaXplZCB2ZXJzaW9uLlxuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgSUUvRWRnZSwgdGhpcyBjb3VsZCBoYW5nIHRoZSBpbmRleGVkREIgZW5naW5lIGFuZCBtYWtlIG9wZXJhdGluZyBzeXN0ZW0gaW5zdGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2RmYWhsYW5kZXIvNWEzOTMyOGYwMjlkZTE4MjIyY2YyMTI1ZDU2YzM4ZjcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl93cml0ZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3VyIEFQSSBjb250cmFjdCBpcyB0byByZXR1cm4gYSBjb3VudCBvZiBkZWxldGVkIGl0ZW1zLCBzbyB3ZSBoYXZlIHRvIGNvdW50KCkgYmVmb3JlIGRlbGV0ZSgpLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudFJlcSA9IHJhbmdlID8gaWRic3RvcmUuY291bnQocmFuZ2UpIDogaWRic3RvcmUuY291bnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50UmVxLm9uZXJyb3IgPSBvbmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRSZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGNvdW50UmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnlDYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWxSZXEgPSByYW5nZSA/IGlkYnN0b3JlLmRlbGV0ZShyYW5nZSkgOiBpZGJzdG9yZS5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxSZXEub25lcnJvciA9IG9uZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbFJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShjb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERlZmF1bHQgdmVyc2lvbiB0byB1c2Ugd2hlbiBjb2xsZWN0aW9uIGlzIG5vdCBhIHZhbmlsbGEgSURCS2V5UmFuZ2Ugb24gdGhlIHByaW1hcnkga2V5LlxuICAgICAgICAgICAgLy8gRGl2aWRlIGludG8gY2h1bmtzIHRvIG5vdCBzdGFydmUgUkFNLlxuICAgICAgICAgICAgLy8gSWYgaGFzIGRlbGV0ZSBob29rLCB3ZSB3aWxsIGhhdmUgdG8gY29sbGVjdCBub3QganVzdCBrZXlzIGJ1dCBhbHNvIG9iamVjdHMsIHNvIGl0IHdpbGwgdXNlXG4gICAgICAgICAgICAvLyBtb3JlIG1lbW9yeSBhbmQgbmVlZCBsb3dlciBjaHVuayBzaXplLlxuICAgICAgICAgICAgdmFyIENIVU5LU0laRSA9IGhhc0RlbGV0ZUhvb2sgPyAyMDAwIDogMTAwMDA7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93cml0ZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSwgdHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG90YWxDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgLy8gQ2xvbmUgY29sbGVjdGlvbiBhbmQgY2hhbmdlIGl0cyB0YWJsZSBhbmQgc2V0IGEgbGltaXQgb2YgQ0hVTktTSVpFIG9uIHRoZSBjbG9uZWQgQ29sbGVjdGlvbiBpbnN0YW5jZS5cbiAgICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IF90aGlzNC5jbG9uZSh7XG4gICAgICAgICAgICAgICAgICAgIGtleXNPbmx5OiAhY3R4LmlzTWF0Y2ggJiYgIWhhc0RlbGV0ZUhvb2sgfSkgLy8gbG9hZCBqdXN0IGtleXMgKHVubGVzcyBmaWx0ZXIoKSBvciBhbmQoKSBvciBkZWxldGVIb29rIGhhcyBzdWJzY3JpYmVycylcbiAgICAgICAgICAgICAgICAuZGlzdGluY3QoKSAvLyBJbiBjYXNlIG11bHRpRW50cnkgaXMgdXNlZCwgbmV2ZXIgZGVsZXRlIHNhbWUga2V5IHR3aWNlIGJlY2F1c2UgcmVzdWx0aW5nIGNvdW50XG4gICAgICAgICAgICAgICAgLy8gd291bGQgYmVjb21lIGxhcmdlciB0aGFuIGFjdHVhbCBkZWxldGUgY291bnQuXG4gICAgICAgICAgICAgICAgLmxpbWl0KENIVU5LU0laRSkucmF3KCk7IC8vIERvbid0IGZpbHRlciB0aHJvdWdoIHJlYWRpbmctaG9va3MgKGxpa2UgbWFwcGVkIGNsYXNzZXMgZXRjKVxuXG4gICAgICAgICAgICAgICAgdmFyIGtleXNPclR1cGxlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLy8gV2UncmUgZ29ubmEgZG8gdGhpbmdzIG9uIGFzIG1hbnkgY2h1bmtzIHRoYXQgYXJlIG5lZWRlZC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgcmVjdXJzaW9uIG9mIG5leHRDaHVuayBmdW5jdGlvbjpcbiAgICAgICAgICAgICAgICB2YXIgbmV4dENodW5rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5lYWNoKGhhc0RlbGV0ZUhvb2sgPyBmdW5jdGlvbiAodmFsLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvbWVib2R5IHN1YnNjcmliZXMgdG8gaG9vaygnZGVsZXRpbmcnKS4gQ29sbGVjdCBhbGwgcHJpbWFyeSBrZXlzIGFuZCB0aGVpciB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IHRoZSBob29rIGNhbiBiZSBjYWxsZWQgd2l0aCBpdHMgdmFsdWVzIGluIGJ1bGtEZWxldGUoKS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXNPclR1cGxlcy5wdXNoKFtjdXJzb3IucHJpbWFyeUtleSwgY3Vyc29yLnZhbHVlXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gOiBmdW5jdGlvbiAodmFsLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIG9uZSBzdWJzY3JpYmVzIHRvIGhvb2soJ2RlbGV0aW5nJykuIENvbGxlY3Qgb25seSBwcmltYXJ5IGtleXM6XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzT3JUdXBsZXMucHVzaChjdXJzb3IucHJpbWFyeUtleSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21pdW0gZGVsZXRlcyBmYXN0ZXIgd2hlbiBkb2luZyBpdCBpbiBzb3J0IG9yZGVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRGVsZXRlSG9vayA/IGtleXNPclR1cGxlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFzY2VuZGluZyhhWzBdLCBiWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIDoga2V5c09yVHVwbGVzLnNvcnQoYXNjZW5kaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidWxrRGVsZXRlKGlkYnN0b3JlLCB0cmFucywga2V5c09yVHVwbGVzLCBoYXNEZWxldGVIb29rLCBkZWxldGluZ0hvb2spO1xuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGtleXNPclR1cGxlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50ICs9IGNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5c09yVHVwbGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnQgPCBDSFVOS1NJWkUgPyB0b3RhbENvdW50IDogbmV4dENodW5rKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKG5leHRDaHVuaygpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEhlbHAgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuXG4gICAgZnVuY3Rpb24gbG93ZXJWZXJzaW9uRmlyc3QoYSwgYikge1xuICAgICAgICByZXR1cm4gYS5fY2ZnLnZlcnNpb24gLSBiLl9jZmcudmVyc2lvbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRBcGlPblBsYWNlKG9ianMsIHRhYmxlTmFtZXMsIG1vZGUsIGRic2NoZW1hKSB7XG4gICAgICAgIHRhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgdGFibGVJbnN0YW5jZSA9IGRiLl90YWJsZUZhY3RvcnkobW9kZSwgZGJzY2hlbWFbdGFibGVOYW1lXSk7XG4gICAgICAgICAgICBvYmpzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHRhYmxlTmFtZSBpbiBvYmogfHwgKG9ialt0YWJsZU5hbWVdID0gdGFibGVJbnN0YW5jZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlVGFibGVzQXBpKG9ianMpIHtcbiAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqW2tleV0gaW5zdGFuY2VvZiBUYWJsZSkgZGVsZXRlIG9ialtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpdGVyYXRlKHJlcSwgZmlsdGVyLCBmbiwgcmVzb2x2ZSwgcmVqZWN0LCB2YWx1ZU1hcHBlcikge1xuXG4gICAgICAgIC8vIEFwcGx5IHZhbHVlTWFwcGVyIChob29rKCdyZWFkaW5nJykgb3IgbWFwcHBlZCBjbGFzcylcbiAgICAgICAgdmFyIG1hcHBlZEZuID0gdmFsdWVNYXBwZXIgPyBmdW5jdGlvbiAoeCwgYywgYSkge1xuICAgICAgICAgICAgcmV0dXJuIGZuKHZhbHVlTWFwcGVyKHgpLCBjLCBhKTtcbiAgICAgICAgfSA6IGZuO1xuICAgICAgICAvLyBXcmFwIGZuIHdpdGggUFNEIGFuZCBtaWNyb3RpY2sgc3R1ZmYgZnJvbSBQcm9taXNlLlxuICAgICAgICB2YXIgd3JhcHBlZEZuID0gd3JhcChtYXBwZWRGbiwgcmVqZWN0KTtcblxuICAgICAgICBpZiAoIXJlcS5vbmVycm9yKSByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICBpZiAoZmlsdGVyKSB7XG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gdHJ5Y2F0Y2hlcihmdW5jdGlvbiBmaWx0ZXJfcmVjb3JkKCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcihjdXJzb3IsIGZ1bmN0aW9uIChhZHZhbmNlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGFkdmFuY2VyO1xuICAgICAgICAgICAgICAgICAgICB9LCByZXNvbHZlLCByZWplY3QpKSB3cmFwcGVkRm4oY3Vyc29yLnZhbHVlLCBjdXJzb3IsIGZ1bmN0aW9uIChhZHZhbmNlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGFkdmFuY2VyO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHRyeWNhdGNoZXIoZnVuY3Rpb24gZmlsdGVyX3JlY29yZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZWRGbihjdXJzb3IudmFsdWUsIGN1cnNvciwgZnVuY3Rpb24gKGFkdmFuY2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjID0gYWR2YW5jZXI7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUluZGV4U3ludGF4KGluZGV4ZXMpIHtcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiaW5kZXhlc1wiIHR5cGU9XCJTdHJpbmdcIj48L3BhcmFtPlxuICAgICAgICAvLy8gPHJldHVybnMgdHlwZT1cIkFycmF5XCIgZWxlbWVudFR5cGU9XCJJbmRleFNwZWNcIj48L3JldHVybnM+XG4gICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICBpbmRleGVzLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIGluZGV4ID0gaW5kZXgudHJpbSgpO1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBpbmRleC5yZXBsYWNlKC8oWyYqXXxcXCtcXCspL2csIFwiXCIpOyAvLyBSZW1vdmUgXCImXCIsIFwiKytcIiBhbmQgXCIqXCJcbiAgICAgICAgICAgIC8vIExldCBrZXlQYXRoIG9mIFwiW2ErYl1cIiBiZSBbXCJhXCIsXCJiXCJdOlxuICAgICAgICAgICAgdmFyIGtleVBhdGggPSAvXlxcWy8udGVzdChuYW1lKSA/IG5hbWUubWF0Y2goL15cXFsoLiopXFxdJC8pWzFdLnNwbGl0KCcrJykgOiBuYW1lO1xuXG4gICAgICAgICAgICBydi5wdXNoKG5ldyBJbmRleFNwZWMobmFtZSwga2V5UGF0aCB8fCBudWxsLCAvXFwmLy50ZXN0KGluZGV4KSwgL1xcKi8udGVzdChpbmRleCksIC9cXCtcXCsvLnRlc3QoaW5kZXgpLCBpc0FycmF5KGtleVBhdGgpLCAvXFwuLy50ZXN0KGluZGV4KSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNtcChrZXkxLCBrZXkyKSB7XG4gICAgICAgIHJldHVybiBpbmRleGVkREIuY21wKGtleTEsIGtleTIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1pbihhLCBiKSB7XG4gICAgICAgIHJldHVybiBjbXAoYSwgYikgPCAwID8gYSA6IGI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWF4KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGNtcChhLCBiKSA+IDAgPyBhIDogYjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICAgICAgICByZXR1cm4gaW5kZXhlZERCLmNtcChhLCBiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZXNjZW5kaW5nKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ZWREQi5jbXAoYiwgYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2ltcGxlQ29tcGFyZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNpbXBsZUNvbXBhcmVSZXZlcnNlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tYmluZShmaWx0ZXIxLCBmaWx0ZXIyKSB7XG4gICAgICAgIHJldHVybiBmaWx0ZXIxID8gZmlsdGVyMiA/IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXIxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgJiYgZmlsdGVyMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9IDogZmlsdGVyMSA6IGZpbHRlcjI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVhZEdsb2JhbFNjaGVtYSgpIHtcbiAgICAgICAgZGIudmVybm8gPSBpZGJkYi52ZXJzaW9uIC8gMTA7XG4gICAgICAgIGRiLl9kYlNjaGVtYSA9IGdsb2JhbFNjaGVtYSA9IHt9O1xuICAgICAgICBkYlN0b3JlTmFtZXMgPSBzbGljZShpZGJkYi5vYmplY3RTdG9yZU5hbWVzLCAwKTtcbiAgICAgICAgaWYgKGRiU3RvcmVOYW1lcy5sZW5ndGggPT09IDApIHJldHVybjsgLy8gRGF0YWJhc2UgY29udGFpbnMgbm8gc3RvcmVzLlxuICAgICAgICB2YXIgdHJhbnMgPSBpZGJkYi50cmFuc2FjdGlvbihzYWZhcmlNdWx0aVN0b3JlRml4KGRiU3RvcmVOYW1lcyksICdyZWFkb25seScpO1xuICAgICAgICBkYlN0b3JlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFucy5vYmplY3RTdG9yZShzdG9yZU5hbWUpLFxuICAgICAgICAgICAgICAgIGtleVBhdGggPSBzdG9yZS5rZXlQYXRoLFxuICAgICAgICAgICAgICAgIGRvdHRlZCA9IGtleVBhdGggJiYgdHlwZW9mIGtleVBhdGggPT09ICdzdHJpbmcnICYmIGtleVBhdGguaW5kZXhPZignLicpICE9PSAtMTtcbiAgICAgICAgICAgIHZhciBwcmltS2V5ID0gbmV3IEluZGV4U3BlYyhrZXlQYXRoLCBrZXlQYXRoIHx8IFwiXCIsIGZhbHNlLCBmYWxzZSwgISFzdG9yZS5hdXRvSW5jcmVtZW50LCBrZXlQYXRoICYmIHR5cGVvZiBrZXlQYXRoICE9PSAnc3RyaW5nJywgZG90dGVkKTtcbiAgICAgICAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0b3JlLmluZGV4TmFtZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgaWRiaW5kZXggPSBzdG9yZS5pbmRleChzdG9yZS5pbmRleE5hbWVzW2pdKTtcbiAgICAgICAgICAgICAgICBrZXlQYXRoID0gaWRiaW5kZXgua2V5UGF0aDtcbiAgICAgICAgICAgICAgICBkb3R0ZWQgPSBrZXlQYXRoICYmIHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyAmJiBrZXlQYXRoLmluZGV4T2YoJy4nKSAhPT0gLTE7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gbmV3IEluZGV4U3BlYyhpZGJpbmRleC5uYW1lLCBrZXlQYXRoLCAhIWlkYmluZGV4LnVuaXF1ZSwgISFpZGJpbmRleC5tdWx0aUVudHJ5LCBmYWxzZSwga2V5UGF0aCAmJiB0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycsIGRvdHRlZCk7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsb2JhbFNjaGVtYVtzdG9yZU5hbWVdID0gbmV3IFRhYmxlU2NoZW1hKHN0b3JlTmFtZSwgcHJpbUtleSwgaW5kZXhlcywge30pO1xuICAgICAgICB9KTtcbiAgICAgICAgc2V0QXBpT25QbGFjZShbYWxsVGFibGVzLCBUcmFuc2FjdGlvbi5wcm90b3R5cGVdLCBrZXlzKGdsb2JhbFNjaGVtYSksIFJFQURXUklURSwgZ2xvYmFsU2NoZW1hKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhzY2hlbWEsIGlkYnRyYW5zKSB7XG4gICAgICAgIC8vLyA8c3VtbWFyeT5cbiAgICAgICAgLy8vIElzc3VlICMzMCBQcm9ibGVtIHdpdGggZXhpc3RpbmcgZGIgLSBhZGp1c3QgdG8gZXhpc3RpbmcgaW5kZXggbmFtZXMgd2hlbiBtaWdyYXRpbmcgZnJvbSBub24tZGV4aWUgZGJcbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2NoZW1hXCIgdHlwZT1cIk9iamVjdFwiPk1hcCBiZXR3ZWVuIG5hbWUgYW5kIFRhYmxlU2NoZW1hPC9wYXJhbT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiaWRidHJhbnNcIiB0eXBlPVwiSURCVHJhbnNhY3Rpb25cIj48L3BhcmFtPlxuICAgICAgICB2YXIgc3RvcmVOYW1lcyA9IGlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RvcmVOYW1lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IHN0b3JlTmFtZXNbaV07XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBpZGJ0cmFucy5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgICAgICAgaGFzR2V0QWxsID0gJ2dldEFsbCcgaW4gc3RvcmU7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0b3JlLmluZGV4TmFtZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhOYW1lID0gc3RvcmUuaW5kZXhOYW1lc1tqXTtcbiAgICAgICAgICAgICAgICB2YXIga2V5UGF0aCA9IHN0b3JlLmluZGV4KGluZGV4TmFtZSkua2V5UGF0aDtcbiAgICAgICAgICAgICAgICB2YXIgZGV4aWVOYW1lID0gdHlwZW9mIGtleVBhdGggPT09ICdzdHJpbmcnID8ga2V5UGF0aCA6IFwiW1wiICsgc2xpY2Uoa2V5UGF0aCkuam9pbignKycpICsgXCJdXCI7XG4gICAgICAgICAgICAgICAgaWYgKHNjaGVtYVtzdG9yZU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleFNwZWMgPSBzY2hlbWFbc3RvcmVOYW1lXS5pZHhCeU5hbWVbZGV4aWVOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4U3BlYykgaW5kZXhTcGVjLm5hbWUgPSBpbmRleE5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlyZU9uQmxvY2tlZChldikge1xuICAgICAgICBkYi5vbihcImJsb2NrZWRcIikuZmlyZShldik7XG4gICAgICAgIC8vIFdvcmthcm91bmQgKG5vdCBmdWxseSopIGZvciBtaXNzaW5nIFwidmVyc2lvbmNoYW5nZVwiIGV2ZW50IGluIElFLEVkZ2UgYW5kIFNhZmFyaTpcbiAgICAgICAgY29ubmVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICByZXR1cm4gYy5uYW1lID09PSBkYi5uYW1lICYmIGMgIT09IGRiICYmICFjLl92Y0ZpcmVkO1xuICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIHJldHVybiBjLm9uKFwidmVyc2lvbmNoYW5nZVwiKS5maXJlKGV2KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXh0ZW5kKHRoaXMsIHtcbiAgICAgICAgQ29sbGVjdGlvbjogQ29sbGVjdGlvbixcbiAgICAgICAgVGFibGU6IFRhYmxlLFxuICAgICAgICBUcmFuc2FjdGlvbjogVHJhbnNhY3Rpb24sXG4gICAgICAgIFZlcnNpb246IFZlcnNpb24sXG4gICAgICAgIFdoZXJlQ2xhdXNlOiBXaGVyZUNsYXVzZSxcbiAgICAgICAgV3JpdGVhYmxlQ29sbGVjdGlvbjogV3JpdGVhYmxlQ29sbGVjdGlvbixcbiAgICAgICAgV3JpdGVhYmxlVGFibGU6IFdyaXRlYWJsZVRhYmxlXG4gICAgfSk7XG5cbiAgICBpbml0KCk7XG5cbiAgICBhZGRvbnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgZm4oZGIpO1xuICAgIH0pO1xufVxuXG52YXIgZmFrZUF1dG9Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHt9OyAvLyBXaWxsIG5ldmVyIGJlIGNoYW5nZWQuIFdlIGp1c3QgZmFrZSBmb3IgdGhlIElERSB0aGF0IHdlIGNoYW5nZSBpdCAoc2VlIGRvRmFrZUF1dG9Db21wbGV0ZSgpKVxudmFyIGZha2UgPSBmYWxzZTsgLy8gV2lsbCBuZXZlciBiZSBjaGFuZ2VkLiBXZSBqdXN0IGZha2UgZm9yIHRoZSBJREUgdGhhdCB3ZSBjaGFuZ2UgaXQgKHNlZSBkb0Zha2VBdXRvQ29tcGxldGUoKSlcblxuZnVuY3Rpb24gcGFyc2VUeXBlKHR5cGUpIHtcbiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0eXBlKCk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHR5cGUpKSB7XG4gICAgICAgIHJldHVybiBbcGFyc2VUeXBlKHR5cGVbMF0pXTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgJiYgdHlwZW9mIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHZhciBydiA9IHt9O1xuICAgICAgICBhcHBseVN0cnVjdHVyZShydiwgdHlwZSk7XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5U3RydWN0dXJlKG9iaiwgc3RydWN0dXJlKSB7XG4gICAga2V5cyhzdHJ1Y3R1cmUpLmZvckVhY2goZnVuY3Rpb24gKG1lbWJlcikge1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZVR5cGUoc3RydWN0dXJlW21lbWJlcl0pO1xuICAgICAgICBvYmpbbWVtYmVyXSA9IHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIGV2ZW50U3VjY2Vzc0hhbmRsZXIoZG9uZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgZG9uZShldi50YXJnZXQucmVzdWx0KTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBob29rZWRFdmVudFN1Y2Nlc3NIYW5kbGVyKHJlc29sdmUpIHtcbiAgICAvLyB3cmFwKCkgaXMgbmVlZGVkIHdoZW4gY2FsbGluZyBob29rcyBiZWNhdXNlIHRoZSByYXJlIHNjZW5hcmlvIG9mOlxuICAgIC8vICAqIGhvb2sgZG9lcyBhIGRiIG9wZXJhdGlvbiB0aGF0IGZhaWxzIGltbWVkaWF0ZWx5IChJREIgdGhyb3dzIGV4Y2VwdGlvbilcbiAgICAvLyAgICBGb3IgY2FsbGluZyBkYiBvcGVyYXRpb25zIG9uIGNvcnJlY3QgdHJhbnNhY3Rpb24sIHdyYXAgbWFrZXMgc3VyZSB0byBzZXQgUFNEIGNvcnJlY3RseS5cbiAgICAvLyAgICB3cmFwKCkgd2lsbCBhbHNvIGV4ZWN1dGUgaW4gYSB2aXJ0dWFsIHRpY2suXG4gICAgLy8gICogSWYgbm90IHdyYXBwZWQgaW4gYSB2aXJ0dWFsIHRpY2ssIGRpcmVjdCBleGNlcHRpb24gd2lsbCBsYXVuY2ggYSBuZXcgcGh5c2ljYWwgdGljay5cbiAgICAvLyAgKiBJZiB0aGlzIHdhcyB0aGUgbGFzdCBldmVudCBpbiB0aGUgYnVsaywgdGhlIHByb21pc2Ugd2lsbCByZXNvbHZlIGFmdGVyIGEgcGh5c2ljYWwgdGlja1xuICAgIC8vICAgIGFuZCB0aGUgdHJhbnNhY3Rpb24gd2lsbCBoYXZlIGNvbW1pdHRlZCBhbHJlYWR5LlxuICAgIC8vIElmIG5vIGhvb2ssIHRoZSB2aXJ0dWFsIHRpY2sgd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUgcmVqZWN0KCkvcmVzb2x2ZSBvZiB0aGUgZmluYWwgcHJvbWlzZSxcbiAgICAvLyBiZWNhdXNlIGl0IGlzIGFsd2F5cyBtYXJrZWQgd2l0aCBfbGliID0gdHJ1ZSB3aGVuIGNyZWF0ZWQgdXNpbmcgVHJhbnNhY3Rpb24uX3Byb21pc2UoKS5cbiAgICByZXR1cm4gd3JhcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHJlcSA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlcS5yZXN1bHQsXG4gICAgICAgICAgICBjdHggPSByZXEuX2hvb2tDdHgsXG4gICAgICAgICAgICAvLyBDb250YWlucyB0aGUgaG9vayBlcnJvciBoYW5kbGVyLiBQdXQgaGVyZSBpbnN0ZWFkIG9mIGNsb3N1cmUgdG8gYm9vc3QgcGVyZm9ybWFuY2UuXG4gICAgICAgIGhvb2tTdWNjZXNzSGFuZGxlciA9IGN0eCAmJiBjdHgub25zdWNjZXNzO1xuICAgICAgICBob29rU3VjY2Vzc0hhbmRsZXIgJiYgaG9va1N1Y2Nlc3NIYW5kbGVyKHJlc3VsdCk7XG4gICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShyZXN1bHQpO1xuICAgIH0sIHJlc29sdmUpO1xufVxuXG5mdW5jdGlvbiBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBwcmV2ZW50RGVmYXVsdChldmVudCk7XG4gICAgICAgIHJlamVjdChldmVudC50YXJnZXQuZXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaG9va2VkRXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCkge1xuICAgIHJldHVybiB3cmFwKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBTZWUgY29tbWVudCBvbiBob29rZWRFdmVudFN1Y2Nlc3NIYW5kbGVyKCkgd2h5IHdyYXAoKSBpcyBuZWVkZWQgb25seSB3aGVuIHN1cHBvcnRpbmcgaG9va3MuXG5cbiAgICAgICAgdmFyIHJlcSA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgIGVyciA9IHJlcS5lcnJvcixcbiAgICAgICAgICAgIGN0eCA9IHJlcS5faG9va0N0eCxcbiAgICAgICAgICAgIC8vIENvbnRhaW5zIHRoZSBob29rIGVycm9yIGhhbmRsZXIuIFB1dCBoZXJlIGluc3RlYWQgb2YgY2xvc3VyZSB0byBib29zdCBwZXJmb3JtYW5jZS5cbiAgICAgICAgaG9va0Vycm9ySGFuZGxlciA9IGN0eCAmJiBjdHgub25lcnJvcjtcbiAgICAgICAgaG9va0Vycm9ySGFuZGxlciAmJiBob29rRXJyb3JIYW5kbGVyKGVycik7XG4gICAgICAgIHByZXZlbnREZWZhdWx0KGV2ZW50KTtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSAvLyBJbmRleGVkREJTaGltIGRvZXNudCBzdXBwb3J0IHRoaXMgb24gU2FmYXJpIDggYW5kIGJlbG93LlxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpIC8vIEluZGV4ZWREQlNoaW0gZG9lc250IHN1cHBvcnQgdGhpcyBvbiBTYWZhcmkgOCBhbmQgYmVsb3cuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59XG5cbmZ1bmN0aW9uIGdsb2JhbERhdGFiYXNlTGlzdChjYikge1xuICAgIHZhciB2YWwsXG4gICAgICAgIGxvY2FsU3RvcmFnZSA9IERleGllLmRlcGVuZGVuY2llcy5sb2NhbFN0b3JhZ2U7XG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UpIHJldHVybiBjYihbXSk7IC8vIEVudnMgd2l0aG91dCBsb2NhbFN0b3JhZ2Ugc3VwcG9ydFxuICAgIHRyeSB7XG4gICAgICAgIHZhbCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0RleGllLkRhdGFiYXNlTmFtZXMnKSB8fCBcIltdXCIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdmFsID0gW107XG4gICAgfVxuICAgIGlmIChjYih2YWwpKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdEZXhpZS5EYXRhYmFzZU5hbWVzJywgSlNPTi5zdHJpbmdpZnkodmFsKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhd2FpdEl0ZXJhdG9yKGl0ZXJhdG9yKSB7XG4gICAgdmFyIGNhbGxOZXh0ID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3IubmV4dChyZXN1bHQpO1xuICAgIH0sXG4gICAgICAgIGRvVGhyb3cgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yLnRocm93KGVycm9yKTtcbiAgICB9LFxuICAgICAgICBvblN1Y2Nlc3MgPSBzdGVwKGNhbGxOZXh0KSxcbiAgICAgICAgb25FcnJvciA9IHN0ZXAoZG9UaHJvdyk7XG5cbiAgICBmdW5jdGlvbiBzdGVwKGdldE5leHQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHZhciBuZXh0ID0gZ2V0TmV4dCh2YWwpLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV4dC52YWx1ZTtcblxuICAgICAgICAgICAgcmV0dXJuIG5leHQuZG9uZSA/IHZhbHVlIDogIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZS50aGVuICE9PSAnZnVuY3Rpb24nID8gaXNBcnJheSh2YWx1ZSkgPyBQcm9taXNlLmFsbCh2YWx1ZSkudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpIDogb25TdWNjZXNzKHZhbHVlKSA6IHZhbHVlLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RlcChjYWxsTmV4dCkoKTtcbn1cblxuLy9cbi8vIEluZGV4U3BlYyBzdHJ1Y3Rcbi8vXG5mdW5jdGlvbiBJbmRleFNwZWMobmFtZSwga2V5UGF0aCwgdW5pcXVlLCBtdWx0aSwgYXV0bywgY29tcG91bmQsIGRvdHRlZCkge1xuICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5hbWVcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJrZXlQYXRoXCIgdHlwZT1cIlN0cmluZ1wiPjwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwidW5pcXVlXCIgdHlwZT1cIkJvb2xlYW5cIj48L3BhcmFtPlxuICAgIC8vLyA8cGFyYW0gbmFtZT1cIm11bHRpXCIgdHlwZT1cIkJvb2xlYW5cIj48L3BhcmFtPlxuICAgIC8vLyA8cGFyYW0gbmFtZT1cImF1dG9cIiB0eXBlPVwiQm9vbGVhblwiPjwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiY29tcG91bmRcIiB0eXBlPVwiQm9vbGVhblwiPjwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiZG90dGVkXCIgdHlwZT1cIkJvb2xlYW5cIj48L3BhcmFtPlxuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5rZXlQYXRoID0ga2V5UGF0aDtcbiAgICB0aGlzLnVuaXF1ZSA9IHVuaXF1ZTtcbiAgICB0aGlzLm11bHRpID0gbXVsdGk7XG4gICAgdGhpcy5hdXRvID0gYXV0bztcbiAgICB0aGlzLmNvbXBvdW5kID0gY29tcG91bmQ7XG4gICAgdGhpcy5kb3R0ZWQgPSBkb3R0ZWQ7XG4gICAgdmFyIGtleVBhdGhTcmMgPSB0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycgPyBrZXlQYXRoIDoga2V5UGF0aCAmJiAnWycgKyBbXS5qb2luLmNhbGwoa2V5UGF0aCwgJysnKSArICddJztcbiAgICB0aGlzLnNyYyA9ICh1bmlxdWUgPyAnJicgOiAnJykgKyAobXVsdGkgPyAnKicgOiAnJykgKyAoYXV0byA/IFwiKytcIiA6IFwiXCIpICsga2V5UGF0aFNyYztcbn1cblxuLy9cbi8vIFRhYmxlU2NoZW1hIHN0cnVjdFxuLy9cbmZ1bmN0aW9uIFRhYmxlU2NoZW1hKG5hbWUsIHByaW1LZXksIGluZGV4ZXMsIGluc3RhbmNlVGVtcGxhdGUpIHtcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJuYW1lXCIgdHlwZT1cIlN0cmluZ1wiPjwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwicHJpbUtleVwiIHR5cGU9XCJJbmRleFNwZWNcIj48L3BhcmFtPlxuICAgIC8vLyA8cGFyYW0gbmFtZT1cImluZGV4ZXNcIiB0eXBlPVwiQXJyYXlcIiBlbGVtZW50VHlwZT1cIkluZGV4U3BlY1wiPjwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiaW5zdGFuY2VUZW1wbGF0ZVwiIHR5cGU9XCJPYmplY3RcIj48L3BhcmFtPlxuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5wcmltS2V5ID0gcHJpbUtleSB8fCBuZXcgSW5kZXhTcGVjKCk7XG4gICAgdGhpcy5pbmRleGVzID0gaW5kZXhlcyB8fCBbbmV3IEluZGV4U3BlYygpXTtcbiAgICB0aGlzLmluc3RhbmNlVGVtcGxhdGUgPSBpbnN0YW5jZVRlbXBsYXRlO1xuICAgIHRoaXMubWFwcGVkQ2xhc3MgPSBudWxsO1xuICAgIHRoaXMuaWR4QnlOYW1lID0gYXJyYXlUb09iamVjdChpbmRleGVzLCBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIFtpbmRleC5uYW1lLCBpbmRleF07XG4gICAgfSk7XG59XG5cbi8vIFVzZWQgaW4gd2hlbiBkZWZpbmluZyBkZXBlbmRlbmNpZXMgbGF0ZXIuLi5cbi8vIChJZiBJbmRleGVkREJTaGltIGlzIGxvYWRlZCwgcHJlZmVyIGl0IGJlZm9yZSBzdGFuZGFyZCBpbmRleGVkREIpXG52YXIgaWRic2hpbSA9IF9nbG9iYWwuaWRiTW9kdWxlcyAmJiBfZ2xvYmFsLmlkYk1vZHVsZXMuc2hpbUluZGV4ZWREQiA/IF9nbG9iYWwuaWRiTW9kdWxlcyA6IHt9O1xuXG5mdW5jdGlvbiBzYWZhcmlNdWx0aVN0b3JlRml4KHN0b3JlTmFtZXMpIHtcbiAgICByZXR1cm4gc3RvcmVOYW1lcy5sZW5ndGggPT09IDEgPyBzdG9yZU5hbWVzWzBdIDogc3RvcmVOYW1lcztcbn1cblxuZnVuY3Rpb24gZ2V0TmF0aXZlR2V0RGF0YWJhc2VOYW1lc0ZuKGluZGV4ZWREQikge1xuICAgIHZhciBmbiA9IGluZGV4ZWREQiAmJiAoaW5kZXhlZERCLmdldERhdGFiYXNlTmFtZXMgfHwgaW5kZXhlZERCLndlYmtpdEdldERhdGFiYXNlTmFtZXMpO1xuICAgIHJldHVybiBmbiAmJiBmbi5iaW5kKGluZGV4ZWREQik7XG59XG5cbi8vIEV4cG9ydCBFcnJvciBjbGFzc2VzXG5wcm9wcyhEZXhpZSwgZnVsbE5hbWVFeGNlcHRpb25zKTsgLy8gRGV4aWUuWFhYRXJyb3IgPSBjbGFzcyBYWFhFcnJvciB7Li4ufTtcblxuLy9cbi8vIFN0YXRpYyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzXG4vLyBcbnByb3BzKERleGllLCB7XG5cbiAgICAvL1xuICAgIC8vIFN0YXRpYyBkZWxldGUoKSBtZXRob2QuXG4gICAgLy9cbiAgICBkZWxldGU6IGZ1bmN0aW9uIChkYXRhYmFzZU5hbWUpIHtcbiAgICAgICAgdmFyIGRiID0gbmV3IERleGllKGRhdGFiYXNlTmFtZSksXG4gICAgICAgICAgICBwcm9taXNlID0gZGIuZGVsZXRlKCk7XG4gICAgICAgIHByb21pc2Uub25ibG9ja2VkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICBkYi5vbihcImJsb2NrZWRcIiwgZm4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG5cbiAgICAvL1xuICAgIC8vIFN0YXRpYyBleGlzdHMoKSBtZXRob2QuXG4gICAgLy9cbiAgICBleGlzdHM6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGV4aWUobmFtZSkub3BlbigpLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pLmNhdGNoKERleGllLk5vU3VjaERhdGFiYXNlRXJyb3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vXG4gICAgLy8gU3RhdGljIG1ldGhvZCBmb3IgcmV0cmlldmluZyBhIGxpc3Qgb2YgYWxsIGV4aXN0aW5nIGRhdGFiYXNlcyBhdCBjdXJyZW50IGhvc3QuXG4gICAgLy9cbiAgICBnZXREYXRhYmFzZU5hbWVzOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBnZXREYXRhYmFzZU5hbWVzID0gZ2V0TmF0aXZlR2V0RGF0YWJhc2VOYW1lc0ZuKGluZGV4ZWREQik7XG4gICAgICAgICAgICBpZiAoZ2V0RGF0YWJhc2VOYW1lcykge1xuICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgZ2V0RGF0YWJhc2VOYW1lcygpIGJlY29tZXMgc3RhbmRhcmQsIGxldCdzIHByZXBhcmUgdG8gc3VwcG9ydCBpdDpcbiAgICAgICAgICAgICAgICB2YXIgcmVxID0gZ2V0RGF0YWJhc2VOYW1lcygpO1xuICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzbGljZShldmVudC50YXJnZXQucmVzdWx0LCAwKSk7IC8vIENvbnZlcnN0IERPTVN0cmluZ0xpc3QgdG8gQXJyYXk8U3RyaW5nPlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsRGF0YWJhc2VMaXN0KGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLnRoZW4oY2IpO1xuICAgIH0sXG5cbiAgICBkZWZpbmVDbGFzczogZnVuY3Rpb24gKHN0cnVjdHVyZSkge1xuICAgICAgICAvLy8gPHN1bW1hcnk+XG4gICAgICAgIC8vLyAgICAgQ3JlYXRlIGEgamF2YXNjcmlwdCBjb25zdHJ1Y3RvciBiYXNlZCBvbiBnaXZlbiB0ZW1wbGF0ZSBmb3Igd2hpY2ggcHJvcGVydGllcyB0byBleHBlY3QgaW4gdGhlIGNsYXNzLlxuICAgICAgICAvLy8gICAgIEFueSBwcm9wZXJ0eSB0aGF0IGlzIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gd2lsbCBhY3QgYXMgYSB0eXBlLiBTbyB7bmFtZTogU3RyaW5nfSB3aWxsIGJlIGVxdWFsIHRvIHtuYW1lOiBuZXcgU3RyaW5nKCl9LlxuICAgICAgICAvLy8gPC9zdW1tYXJ5PlxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzdHJ1Y3R1cmVcIj5IZWxwcyBJREUgY29kZSBjb21wbGV0aW9uIGJ5IGtub3dpbmcgdGhlIG1lbWJlcnMgdGhhdCBvYmplY3RzIGNvbnRhaW4gYW5kIG5vdCBqdXN0IHRoZSBpbmRleGVzLiBBbHNvXG4gICAgICAgIC8vLyBrbm93IHdoYXQgdHlwZSBlYWNoIG1lbWJlciBoYXMuIEV4YW1wbGU6IHtuYW1lOiBTdHJpbmcsIGVtYWlsQWRkcmVzc2VzOiBbU3RyaW5nXSwgcHJvcGVydGllczoge3Nob2VTaXplOiBOdW1iZXJ9fTwvcGFyYW0+XG5cbiAgICAgICAgLy8gRGVmYXVsdCBjb25zdHJ1Y3RvciBhYmxlIHRvIGNvcHkgZ2l2ZW4gcHJvcGVydGllcyBpbnRvIHRoaXMgb2JqZWN0LlxuICAgICAgICBmdW5jdGlvbiBDbGFzcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcm9wZXJ0aWVzXCIgdHlwZT1cIk9iamVjdFwiIG9wdGlvbmFsPVwidHJ1ZVwiPlByb3BlcnRpZXMgdG8gaW5pdGlhbGl6ZSBvYmplY3Qgd2l0aC5cbiAgICAgICAgICAgIC8vLyA8L3BhcmFtPlxuICAgICAgICAgICAgcHJvcGVydGllcyA/IGV4dGVuZCh0aGlzLCBwcm9wZXJ0aWVzKSA6IGZha2UgJiYgYXBwbHlTdHJ1Y3R1cmUodGhpcywgc3RydWN0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ2xhc3M7XG4gICAgfSxcblxuICAgIGFwcGx5U3RydWN0dXJlOiBhcHBseVN0cnVjdHVyZSxcblxuICAgIGlnbm9yZVRyYW5zYWN0aW9uOiBmdW5jdGlvbiAoc2NvcGVGdW5jKSB7XG4gICAgICAgIC8vIEluIGNhc2UgY2FsbGVyIGlzIHdpdGhpbiBhIHRyYW5zYWN0aW9uIGJ1dCBuZWVkcyB0byBjcmVhdGUgYSBzZXBhcmF0ZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgLy8gRXhhbXBsZSBvZiB1c2FnZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gTGV0J3Mgc2F5IHdlIGhhdmUgYSBsb2dnZXIgZnVuY3Rpb24gaW4gb3VyIGFwcC4gT3RoZXIgYXBwbGljYXRpb24tbG9naWMgc2hvdWxkIGJlIHVuYXdhcmUgb2YgdGhlXG4gICAgICAgIC8vIGxvZ2dlciBmdW5jdGlvbiBhbmQgbm90IG5lZWQgdG8gaW5jbHVkZSB0aGUgJ2xvZ2VudHJpZXMnIHRhYmxlIGluIGFsbCB0cmFuc2FjdGlvbiBpdCBwZXJmb3Jtcy5cbiAgICAgICAgLy8gVGhlIGxvZ2dpbmcgc2hvdWxkIGFsd2F5cyBiZSBkb25lIGluIGEgc2VwYXJhdGUgdHJhbnNhY3Rpb24gYW5kIG5vdCBiZSBkZXBlbmRhbnQgb24gdGhlIGN1cnJlbnRcbiAgICAgICAgLy8gcnVubmluZyB0cmFuc2FjdGlvbiBjb250ZXh0LiBUaGVuIHlvdSBjb3VsZCB1c2UgRGV4aWUuaWdub3JlVHJhbnNhY3Rpb24oKSB0byBydW4gY29kZSB0aGF0IHN0YXJ0cyBhIG5ldyB0cmFuc2FjdGlvbi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gICAgIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAgICAgIGRiLmxvZ2VudHJpZXMuYWRkKG5ld0xvZ0VudHJ5KTtcbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAvL1xuICAgICAgICAvLyBVbmxlc3MgdXNpbmcgRGV4aWUuaWdub3JlVHJhbnNhY3Rpb24oKSwgdGhlIGFib3ZlIGV4YW1wbGUgd291bGQgdHJ5IHRvIHJldXNlIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uXG4gICAgICAgIC8vIGluIGN1cnJlbnQgUHJvbWlzZS1zY29wZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQW4gYWx0ZXJuYXRpdmUgdG8gRGV4aWUuaWdub3JlVHJhbnNhY3Rpb24oKSB3b3VsZCBiZSBzZXRJbW1lZGlhdGUoKSBvciBzZXRUaW1lb3V0KCkuIFRoZSByZWFzb24gd2Ugc3RpbGwgcHJvdmlkZSBhblxuICAgICAgICAvLyBBUEkgZm9yIHRoaXMgYmVjYXVzZVxuICAgICAgICAvLyAgMSkgVGhlIGludGVudGlvbiBvZiB3cml0aW5nIHRoZSBzdGF0ZW1lbnQgY291bGQgYmUgdW5jbGVhciBpZiB1c2luZyBzZXRJbW1lZGlhdGUoKSBvciBzZXRUaW1lb3V0KCkuXG4gICAgICAgIC8vICAyKSBzZXRUaW1lb3V0KCkgd291bGQgd2FpdCB1bm5lc2Nlc3NhcnkgdW50aWwgZmlyaW5nLiBUaGlzIGlzIGhvd2V2ZXIgbm90IHRoZSBjYXNlIHdpdGggc2V0SW1tZWRpYXRlKCkuXG4gICAgICAgIC8vICAzKSBzZXRJbW1lZGlhdGUoKSBpcyBub3Qgc3VwcG9ydGVkIGluIHRoZSBFUyBzdGFuZGFyZC5cbiAgICAgICAgLy8gIDQpIFlvdSBtaWdodCB3YW50IHRvIGtlZXAgb3RoZXIgUFNEIHN0YXRlIHRoYXQgd2FzIHNldCBpbiBhIHBhcmVudCBQU0QsIHN1Y2ggYXMgUFNELmxldFRocm91Z2guXG4gICAgICAgIHJldHVybiBQU0QudHJhbnMgPyB1c2VQU0QoUFNELnRyYW5zbGVzcywgc2NvcGVGdW5jKSA6IC8vIFVzZSB0aGUgY2xvc2VzdCBwYXJlbnQgdGhhdCB3YXMgbm9uLXRyYW5zYWN0aW9uYWwuXG4gICAgICAgIHNjb3BlRnVuYygpOyAvLyBObyBuZWVkIHRvIGNoYW5nZSBzY29wZSBiZWNhdXNlIHRoZXJlIGlzIG5vIG9uZ29pbmcgdHJhbnNhY3Rpb24uXG4gICAgfSxcblxuICAgIHZpcDogZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIC8vIFRvIGJlIHVzZWQgYnkgc3Vic2NyaWJlcnMgdG8gdGhlIG9uKCdyZWFkeScpIGV2ZW50LlxuICAgICAgICAvLyBUaGlzIHdpbGwgbGV0IGNhbGxlciB0aHJvdWdoIHRvIGFjY2VzcyBEQiBldmVuIHdoZW4gaXQgaXMgYmxvY2tlZCB3aGlsZSB0aGUgZGIucmVhZHkoKSBzdWJzY3JpYmVycyBhcmUgZmlyaW5nLlxuICAgICAgICAvLyBUaGlzIHdvdWxkIGhhdmUgd29ya2VkIGF1dG9tYXRpY2FsbHkgaWYgd2Ugd2VyZSBjZXJ0YWluIHRoYXQgdGhlIFByb3ZpZGVyIHdhcyB1c2luZyBEZXhpZS5Qcm9taXNlIGZvciBhbGwgYXN5bmNyb25pYyBvcGVyYXRpb25zLiBUaGUgcHJvbWlzZSBQU0RcbiAgICAgICAgLy8gZnJvbSB0aGUgcHJvdmlkZXIuY29ubmVjdCgpIGNhbGwgd291bGQgdGhlbiBiZSBkZXJpdmVkIGFsbCB0aGUgd2F5IHRvIHdoZW4gcHJvdmlkZXIgd291bGQgY2FsbCBsb2NhbERhdGFiYXNlLmFwcGx5Q2hhbmdlcygpLiBCdXQgc2luY2VcbiAgICAgICAgLy8gdGhlIHByb3ZpZGVyIG1vcmUgbGlrZWx5IGlzIHVzaW5nIG5vbi1wcm9taXNlIGFzeW5jIEFQSXMgb3Igb3RoZXIgdGhlbmFibGUgaW1wbGVtZW50YXRpb25zLCB3ZSBjYW5ub3QgYXNzdW1lIHRoYXQuXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBvbmx5IHVzZWZ1bCBmb3Igb24oJ3JlYWR5Jykgc3Vic2NyaWJlcnMgdGhhdCBpcyByZXR1cm5pbmcgYSBQcm9taXNlIGZyb20gdGhlIGV2ZW50LiBJZiBub3QgdXNpbmcgdmlwKClcbiAgICAgICAgLy8gdGhlIGRhdGFiYXNlIGNvdWxkIGRlYWRsb2NrIHNpbmNlIGl0IHdvbnQgb3BlbiB1bnRpbCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgYW5kIGFueSBub24tVklQZWQgb3BlcmF0aW9uIHN0YXJ0ZWQgYnlcbiAgICAgICAgLy8gdGhlIGNhbGxlciB3aWxsIG5vdCByZXNvbHZlIHVudGlsIGRhdGFiYXNlIGlzIG9wZW5lZC5cbiAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFBTRC5sZXRUaHJvdWdoID0gdHJ1ZTsgLy8gTWFrZSBzdXJlIHdlIGFyZSBsZXQgdGhyb3VnaCBpZiBzdGlsbCBibG9ja2luZyBkYiBkdWUgdG8gb25yZWFkeSBpcyBmaXJpbmcuXG4gICAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIGFzeW5jOiBmdW5jdGlvbiAoZ2VuZXJhdG9yRm4pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gYXdhaXRJdGVyYXRvcihnZW5lcmF0b3JGbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJ2IHx8IHR5cGVvZiBydi50aGVuICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgc3Bhd246IGZ1bmN0aW9uIChnZW5lcmF0b3JGbiwgYXJncywgdGhpeikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJ2ID0gYXdhaXRJdGVyYXRvcihnZW5lcmF0b3JGbi5hcHBseSh0aGl6LCBhcmdzIHx8IFtdKSk7XG4gICAgICAgICAgICBpZiAoIXJ2IHx8IHR5cGVvZiBydi50aGVuICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBEZXhpZS5jdXJyZW50VHJhbnNhY3Rpb24gcHJvcGVydHlcbiAgICBjdXJyZW50VHJhbnNhY3Rpb246IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gUFNELnRyYW5zIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gRXhwb3J0IG91ciBQcm9taXNlIGltcGxlbWVudGF0aW9uIHNpbmNlIGl0IGNhbiBiZSBoYW5keSBhcyBhIHN0YW5kYWxvbmUgUHJvbWlzZSBpbXBsZW1lbnRhdGlvblxuICAgIFByb21pc2U6IFByb21pc2UsXG5cbiAgICAvLyBEZXhpZS5kZWJ1ZyBwcm9wdGVyeTpcbiAgICAvLyBEZXhpZS5kZWJ1ZyA9IGZhbHNlXG4gICAgLy8gRGV4aWUuZGVidWcgPSB0cnVlXG4gICAgLy8gRGV4aWUuZGVidWcgPSBcImRleGllXCIgLSBkb24ndCBoaWRlIGRleGllJ3Mgc3RhY2sgZnJhbWVzLlxuICAgIGRlYnVnOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlYnVnO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgc2V0RGVidWcodmFsdWUsIHZhbHVlID09PSAnZGV4aWUnID8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSA6IGRleGllU3RhY2tGcmFtZUZpbHRlcik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gRXhwb3J0IG91ciBkZXJpdmUvZXh0ZW5kL292ZXJyaWRlIG1ldGhvZG9sb2d5XG4gICAgZGVyaXZlOiBkZXJpdmUsXG4gICAgZXh0ZW5kOiBleHRlbmQsXG4gICAgcHJvcHM6IHByb3BzLFxuICAgIG92ZXJyaWRlOiBvdmVycmlkZSxcbiAgICAvLyBFeHBvcnQgb3VyIEV2ZW50cygpIGZ1bmN0aW9uIC0gY2FuIGJlIGhhbmR5IGFzIGEgdG9vbGtpdFxuICAgIEV2ZW50czogRXZlbnRzLFxuICAgIGV2ZW50czogeyBnZXQ6IGRlcHJlY2F0ZWQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIEV2ZW50cztcbiAgICAgICAgfSkgfSwgLy8gQmFja3dhcmQgY29tcGF0aWJsZSBsb3dlcmNhc2UgdmVyc2lvbi5cbiAgICAvLyBVdGlsaXRpZXNcbiAgICBnZXRCeUtleVBhdGg6IGdldEJ5S2V5UGF0aCxcbiAgICBzZXRCeUtleVBhdGg6IHNldEJ5S2V5UGF0aCxcbiAgICBkZWxCeUtleVBhdGg6IGRlbEJ5S2V5UGF0aCxcbiAgICBzaGFsbG93Q2xvbmU6IHNoYWxsb3dDbG9uZSxcbiAgICBkZWVwQ2xvbmU6IGRlZXBDbG9uZSxcbiAgICBnZXRPYmplY3REaWZmOiBnZXRPYmplY3REaWZmLFxuICAgIGFzYXA6IGFzYXAsXG4gICAgbWF4S2V5OiBtYXhLZXksXG4gICAgLy8gQWRkb24gcmVnaXN0cnlcbiAgICBhZGRvbnM6IFtdLFxuICAgIC8vIEdsb2JhbCBEQiBjb25uZWN0aW9uIGxpc3RcbiAgICBjb25uZWN0aW9uczogY29ubmVjdGlvbnMsXG5cbiAgICBNdWx0aU1vZGlmeUVycm9yOiBleGNlcHRpb25zLk1vZGlmeSwgLy8gQmFja3dhcmQgY29tcGF0aWJpbGl0eSAwLjkuOC4gRGVwcmVjYXRlLlxuICAgIGVycm5hbWVzOiBlcnJuYW1lcyxcblxuICAgIC8vIEV4cG9ydCBvdGhlciBzdGF0aWMgY2xhc3Nlc1xuICAgIEluZGV4U3BlYzogSW5kZXhTcGVjLFxuICAgIFRhYmxlU2NoZW1hOiBUYWJsZVNjaGVtYSxcblxuICAgIC8vXG4gICAgLy8gRGVwZW5kZW5jaWVzXG4gICAgLy9cbiAgICAvLyBUaGVzZSB3aWxsIGF1dG9tYXRpY2FsbHkgd29yayBpbiBicm93c2VycyB3aXRoIGluZGV4ZWREQiBzdXBwb3J0LCBvciB3aGVyZSBhbiBpbmRleGVkREIgcG9seWZpbGwgaGFzIGJlZW4gaW5jbHVkZWQuXG4gICAgLy9cbiAgICAvLyBJbiBub2RlLmpzLCBob3dldmVyLCB0aGVzZSBwcm9wZXJ0aWVzIG11c3QgYmUgc2V0IFwibWFudWFsbHlcIiBiZWZvcmUgaW5zdGFuc2lhdGluZyBhIG5ldyBEZXhpZSgpLlxuICAgIC8vIEZvciBub2RlLmpzLCB5b3UgbmVlZCB0byByZXF1aXJlIGluZGV4ZWRkYi1qcyBvciBzaW1pbGFyIGFuZCB0aGVuIHNldCB0aGVzZSBkZXBzLlxuICAgIC8vXG4gICAgZGVwZW5kZW5jaWVzOiB7XG4gICAgICAgIC8vIFJlcXVpcmVkOlxuICAgICAgICBpbmRleGVkREI6IGlkYnNoaW0uc2hpbUluZGV4ZWREQiB8fCBfZ2xvYmFsLmluZGV4ZWREQiB8fCBfZ2xvYmFsLm1vekluZGV4ZWREQiB8fCBfZ2xvYmFsLndlYmtpdEluZGV4ZWREQiB8fCBfZ2xvYmFsLm1zSW5kZXhlZERCLFxuICAgICAgICBJREJLZXlSYW5nZTogaWRic2hpbS5JREJLZXlSYW5nZSB8fCBfZ2xvYmFsLklEQktleVJhbmdlIHx8IF9nbG9iYWwud2Via2l0SURCS2V5UmFuZ2VcbiAgICB9LFxuXG4gICAgLy8gQVBJIFZlcnNpb24gTnVtYmVyOiBUeXBlIE51bWJlciwgbWFrZSBzdXJlIHRvIGFsd2F5cyBzZXQgYSB2ZXJzaW9uIG51bWJlciB0aGF0IGNhbiBiZSBjb21wYXJhYmxlIGNvcnJlY3RseS4gRXhhbXBsZTogMC45LCAwLjkxLCAwLjkyLCAxLjAsIDEuMDEsIDEuMSwgMS4yLCAxLjIxLCBldGMuXG4gICAgc2VtVmVyOiBERVhJRV9WRVJTSU9OLFxuICAgIHZlcnNpb246IERFWElFX1ZFUlNJT04uc3BsaXQoJy4nKS5tYXAoZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KG4pO1xuICAgIH0pLnJlZHVjZShmdW5jdGlvbiAocCwgYywgaSkge1xuICAgICAgICByZXR1cm4gcCArIGMgLyBNYXRoLnBvdygxMCwgaSAqIDIpO1xuICAgIH0pLFxuICAgIGZha2VBdXRvQ29tcGxldGU6IGZha2VBdXRvQ29tcGxldGUsXG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZGZhaGxhbmRlci9EZXhpZS5qcy9pc3N1ZXMvMTg2XG4gICAgLy8gdHlwZXNjcmlwdCBjb21waWxlciB0c2MgaW4gbW9kZSB0cy0tPmVzNSAmIGNvbW1vbkpTLCB3aWxsIGV4cGVjdCByZXF1aXJlKCkgdG8gcmV0dXJuXG4gICAgLy8geC5kZWZhdWx0LiBXb3JrYXJvdW5kOiBTZXQgRGV4aWUuZGVmYXVsdCA9IERleGllLlxuICAgIGRlZmF1bHQ6IERleGllXG59KTtcblxudHJ5Q2F0Y2goZnVuY3Rpb24gKCkge1xuICAgIC8vIE9wdGlvbmFsIGRlcGVuZGVuY2llc1xuICAgIC8vIGxvY2FsU3RvcmFnZVxuICAgIERleGllLmRlcGVuZGVuY2llcy5sb2NhbFN0b3JhZ2UgPSAodHlwZW9mIGNocm9tZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjaHJvbWUgIT09IG51bGwgPyBjaHJvbWUuc3RvcmFnZSA6IHZvaWQgMCkgIT0gbnVsbCA/IG51bGwgOiBfZ2xvYmFsLmxvY2FsU3RvcmFnZTtcbn0pO1xuXG4vLyBNYXAgRE9NRXJyb3JzIGFuZCBET01FeGNlcHRpb25zIHRvIGNvcnJlc3BvbmRpbmcgRGV4aWUgZXJyb3JzLiBNYXkgY2hhbmdlIGluIERleGllIHYyLjAuXG5Qcm9taXNlLnJlamVjdGlvbk1hcHBlciA9IG1hcEVycm9yO1xuXG4vLyBGb29sIElERSB0byBpbXByb3ZlIGF1dG9jb21wbGV0ZS4gVGVzdGVkIHdpdGggVmlzdWFsIFN0dWRpbyAyMDEzIGFuZCAyMDE1LlxuZG9GYWtlQXV0b0NvbXBsZXRlKGZ1bmN0aW9uICgpIHtcbiAgICBEZXhpZS5mYWtlQXV0b0NvbXBsZXRlID0gZmFrZUF1dG9Db21wbGV0ZSA9IGRvRmFrZUF1dG9Db21wbGV0ZTtcbiAgICBEZXhpZS5mYWtlID0gZmFrZSA9IHRydWU7XG59KTtcblxucmV0dXJuIERleGllO1xuXG59KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGV4aWUuanMubWFwXG4iLCIvLyB2ZXJzaW9uOiAwLjExLjFcclxuLy8gZGF0ZTogRnJpIEphbiAxMiAyMDE4IDEyOjQyOjM4IEdNVCswMDAwIChXRVQpXHJcbi8vIGxpY2VuY2U6IFxyXG4vKipcclxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcclxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxyXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxyXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXHJcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXHJcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xyXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxyXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXHJcbipcclxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKiovXHJcblxyXG5cclxuLy8gdmVyc2lvbjogMC4xMS4xXHJcbi8vIGRhdGU6IEZyaSBKYW4gMTIgMjAxOCAxMjo0MjozOCBHTVQrMDAwMCAoV0VUKVxyXG4vLyBsaWNlbmNlOiBcclxuLyoqXHJcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXHJcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcclxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcclxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxyXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxyXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcclxuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcclxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxyXG4qXHJcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqL1xyXG5cclxuXHJcbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwibWluaWJ1c1wiLFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMubWluaWJ1cz1lKCk6dC5taW5pYnVzPWUoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7LyoqKioqKi9cclxucmV0dXJuIGZ1bmN0aW9uKHQpey8qKioqKiovXHJcbi8qKioqKiovXHJcbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXHJcbi8qKioqKiovXHJcbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obil7LyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXHJcbi8qKioqKiovXHJcbmlmKGVbbl0pLyoqKioqKi9cclxucmV0dXJuIGVbbl0uZXhwb3J0czsvKioqKioqL1xyXG4vLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxyXG4vKioqKioqL1xyXG52YXIgcj1lW25dPXsvKioqKioqL1xyXG5pOm4sLyoqKioqKi9cclxubDohMSwvKioqKioqL1xyXG5leHBvcnRzOnt9fTsvKioqKioqL1xyXG4vKioqKioqL1xyXG4vLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxyXG4vKioqKioqL1xyXG4vKioqKioqL1xyXG4vKioqKioqL1xyXG4vLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxyXG4vKioqKioqL1xyXG5yZXR1cm4gdFtuXS5jYWxsKHIuZXhwb3J0cyxyLHIuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxyLmw9ITAsci5leHBvcnRzfS8vIHdlYnBhY2tCb290c3RyYXBcclxuLyoqKioqKi9cclxuLy8gVGhlIG1vZHVsZSBjYWNoZVxyXG4vKioqKioqL1xyXG52YXIgZT17fTsvKioqKioqL1xyXG4vKioqKioqL1xyXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxyXG4vKioqKioqL1xyXG4vKioqKioqL1xyXG4vKioqKioqL1xyXG4vLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xyXG4vKioqKioqL1xyXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPXQsX193ZWJwYWNrX3JlcXVpcmVfXy5jPWUsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKHQsZSxuKXsvKioqKioqL1xyXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm8odCxlKXx8LyoqKioqKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7LyoqKioqKi9cclxuY29uZmlndXJhYmxlOiExLC8qKioqKiovXHJcbmVudW1lcmFibGU6ITAsLyoqKioqKi9cclxuZ2V0Om59KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKHQpey8qKioqKiovXHJcbnZhciBlPXQmJnQuX19lc01vZHVsZT8vKioqKioqL1xyXG5mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9Oi8qKioqKiovXHJcbmZ1bmN0aW9uKCl7cmV0dXJuIHR9Oy8qKioqKiovXHJcbi8qKioqKiovXHJcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZSxcImFcIixlKSxlfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LF9fd2VicGFja19yZXF1aXJlX18ucD1cIlwiLF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTEzNSl9KFsvKiAwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5leHBvcnRzPXt2ZXJzaW9uOlwiMi41LjNcIn07XCJudW1iZXJcIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0sLyogMSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe1xyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxyXG52YXIgbj10LmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XCJudW1iZXJcIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0sLyogMiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dmFyIHI9bigyOCkoXCJ3a3NcIiksbz1uKDE5KSxpPW4oMSkuU3ltYm9sLHU9XCJmdW5jdGlvblwiPT10eXBlb2YgaTsodC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByW3RdfHwoclt0XT11JiZpW3RdfHwodT9pOm8pKFwiU3ltYm9sLlwiK3QpKX0pLnN0b3JlPXJ9LC8qIDMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1uKDApLGk9bigxNCksdT1uKDgpLGM9ZnVuY3Rpb24odCxlLG4pe3ZhciBzLGYsYSxsPXQmYy5GLHA9dCZjLkcsdj10JmMuUyxkPXQmYy5QLGg9dCZjLkIsXz10JmMuVyx5PXA/bzpvW2VdfHwob1tlXT17fSksYj15LnByb3RvdHlwZSxnPXA/cjp2P3JbZV06KHJbZV18fHt9KS5wcm90b3R5cGU7cCYmKG49ZSk7Zm9yKHMgaW4gbilcclxuLy8gY29udGFpbnMgaW4gbmF0aXZlXHJcbihmPSFsJiZnJiZ2b2lkIDAhPT1nW3NdKSYmcyBpbiB5fHwoXHJcbi8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkXHJcbmE9Zj9nW3NdOm5bc10sXHJcbi8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlc1xyXG55W3NdPXAmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGdbc10/bltzXTpoJiZmP2koYSxyKTpfJiZnW3NdPT1hP2Z1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUsbixyKXtpZih0aGlzIGluc3RhbmNlb2YgdCl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IHQ7Y2FzZSAxOnJldHVybiBuZXcgdChlKTtjYXNlIDI6cmV0dXJuIG5ldyB0KGUsbil9cmV0dXJuIG5ldyB0KGUsbixyKX1yZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBlLnByb3RvdHlwZT10LnByb3RvdHlwZSxlfShhKTpkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2koRnVuY3Rpb24uY2FsbCxhKTphLFxyXG4vLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSVcclxuZCYmKCh5LnZpcnR1YWx8fCh5LnZpcnR1YWw9e30pKVtzXT1hLFxyXG4vLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJVxyXG50JmMuUiYmYiYmIWJbc10mJnUoYixzLGEpKSl9O1xyXG4vLyB0eXBlIGJpdG1hcFxyXG5jLkY9MSwvLyBmb3JjZWRcclxuYy5HPTIsLy8gZ2xvYmFsXHJcbmMuUz00LC8vIHN0YXRpY1xyXG5jLlA9OCwvLyBwcm90b1xyXG5jLkI9MTYsLy8gYmluZFxyXG5jLlc9MzIsLy8gd3JhcFxyXG5jLlU9NjQsLy8gc2FmZVxyXG5jLlI9MTI4LC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWBcclxudC5leHBvcnRzPWN9LC8qIDQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFyKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhbiBvYmplY3QhXCIpO3JldHVybiB0fX0sLyogNSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XHJcbi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcclxudC5leHBvcnRzPSFuKDEzKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sLyogNiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdD9udWxsIT09dDpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0fX0sLyogNyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dmFyIHI9big0KSxvPW4oMzYpLGk9bigyNiksdT1PYmplY3QuZGVmaW5lUHJvcGVydHk7ZS5mPW4oNSk/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXtpZihyKHQpLGU9aShlLCEwKSxyKG4pLG8pdHJ5e3JldHVybiB1KHQsZSxuKX1jYXRjaCh0KXt9aWYoXCJnZXRcImluIG58fFwic2V0XCJpbiBuKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiBuJiYodFtlXT1uLnZhbHVlKSx0fX0sLyogOCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dmFyIHI9big3KSxvPW4oMTgpO3QuZXhwb3J0cz1uKDUpP2Z1bmN0aW9uKHQsZSxuKXtyZXR1cm4gci5mKHQsZSxvKDEsbikpfTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRbZV09bix0fX0sLyogOSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBuLmNhbGwodCxlKX19LC8qIDEwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXHJcbnZhciByPW4oNTcpLG89bigyMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByKG8odCkpfX0sLyogMTEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2UuX19lc01vZHVsZT0hMCxlLmRlZmF1bHQ9ZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfX0sLyogMTIgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2UuX19lc01vZHVsZT0hMDt2YXIgcj1uKDYwKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocik7ZS5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSwoMCxvLmRlZmF1bHQpKHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LGUsbil7cmV0dXJuIGUmJmRlZmluZVByb3BlcnRpZXModC5wcm90b3R5cGUsZSksbiYmZGVmaW5lUHJvcGVydGllcyh0LG4pLHR9fSgpfSwvKiAxMyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuISF0KCl9Y2F0Y2godCl7cmV0dXJuITB9fX0sLyogMTQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1xyXG4vLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcclxudmFyIHI9bigxNyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtpZihyKHQpLHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG4pe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIHQuY2FsbChlLG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19fSwvKiAxNSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHQpLnNsaWNlKDgsLTEpfX0sLyogMTYgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e319LC8qIDE3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiB0fX0sLyogMTggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm57ZW51bWVyYWJsZTohKDEmdCksY29uZmlndXJhYmxlOiEoMiZ0KSx3cml0YWJsZTohKDQmdCksdmFsdWU6ZX19fSwvKiAxOSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe3ZhciBuPTAscj1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm5cIlN5bWJvbChcIi5jb25jYXQodm9pZCAwPT09dD9cIlwiOnQsXCIpX1wiLCgrK24rcikudG9TdHJpbmcoMzYpKX19LC8qIDIwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pXHJcbnZhciByPW4oMzcpLG89bigyOSk7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LG8pfX0sLyogMjEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlKXtcclxuLy8gNy4xLjQgVG9JbnRlZ2VyXHJcbnZhciBuPU1hdGguY2VpbCxyPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpc05hTih0PSt0KT8wOih0PjA/cjpuKSh0KX19LC8qIDIyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSl7XHJcbi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpXHJcbnQuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK3QpO3JldHVybiB0fX0sLyogMjMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ITB9LC8qIDI0ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDcpLmYsbz1uKDkpLGk9bigyKShcInRvU3RyaW5nVGFnXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dCYmIW8odD1uP3Q6dC5wcm90b3R5cGUsaSkmJnIodCxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6ZX0pfX0sLyogMjUgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNiksbz1uKDEpLmRvY3VtZW50LGk9cihvKSYmcihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQodCk6e319fSwvKiAyNiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XHJcbi8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKVxyXG52YXIgcj1uKDYpO1xyXG4vLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZVxyXG4vLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZ1xyXG50LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighcih0KSlyZXR1cm4gdDt2YXIgbixvO2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudmFsdWVPZikmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZighZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX19LC8qIDI3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDI4KShcImtleXNcIiksbz1uKDE5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHJbdF18fChyW3RdPW8odCkpfX0sLyogMjggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1yW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHwocltcIl9fY29yZS1qc19zaGFyZWRfX1wiXT17fSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBvW3RdfHwob1t0XT17fSl9fSwvKiAyOSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe1xyXG4vLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzXHJcbnQuZXhwb3J0cz1cImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZlwiLnNwbGl0KFwiLFwiKX0sLyogMzAgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1xyXG4vLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpXHJcbnZhciByPW4oMjIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KHIodCkpfX0sLyogMzEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1xyXG4vLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSlcclxudmFyIHI9big0KSxvPW4oNjkpLGk9bigyOSksdT1uKDI3KShcIklFX1BST1RPXCIpLGM9ZnVuY3Rpb24oKXt9LHM9ZnVuY3Rpb24oKXtcclxuLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWdcclxudmFyIHQsZT1uKDI1KShcImlmcmFtZVwiKSxyPWkubGVuZ3RoO2ZvcihlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbig0NikuYXBwZW5kQ2hpbGQoZSksZS5zcmM9XCJqYXZhc2NyaXB0OlwiLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybFxyXG4vLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0O1xyXG4vLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7XHJcbnQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50LHQub3BlbigpLHQud3JpdGUoXCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFxcL3NjcmlwdD5cIiksdC5jbG9zZSgpLHM9dC5GO3ItLTspZGVsZXRlIHMucHJvdG90eXBlW2lbcl1dO3JldHVybiBzKCl9O3QuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LGUpe3ZhciBuO1xyXG4vLyBhZGQgXCJfX3Byb3RvX19cIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsXHJcbnJldHVybiBudWxsIT09dD8oYy5wcm90b3R5cGU9cih0KSxuPW5ldyBjLGMucHJvdG90eXBlPW51bGwsblt1XT10KTpuPXMoKSx2b2lkIDA9PT1lP246byhuLGUpfX0sLyogMzIgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KHQpe3ZhciBlLG47dGhpcy5wcm9taXNlPW5ldyB0KGZ1bmN0aW9uKHQscil7aWYodm9pZCAwIT09ZXx8dm9pZCAwIT09bil0aHJvdyBUeXBlRXJyb3IoXCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvclwiKTtlPXQsbj1yfSksdGhpcy5yZXNvbHZlPXIoZSksdGhpcy5yZWplY3Q9cihuKX1cclxuLy8gMjUuNC4xLjUgTmV3UHJvbWlzZUNhcGFiaWxpdHkoQylcclxudmFyIHI9bigxNyk7dC5leHBvcnRzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlQ2FwYWJpbGl0eSh0KX19LC8qIDMzICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtlLmY9bigyKX0sLyogMzQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1uKDApLGk9bigyMyksdT1uKDMzKSxjPW4oNykuZjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9by5TeW1ib2x8fChvLlN5bWJvbD1pP3t9OnIuU3ltYm9sfHx7fSk7XCJfXCI9PXQuY2hhckF0KDApfHx0IGluIGV8fGMoZSx0LHt2YWx1ZTp1LmYodCl9KX19LC8qIDM1ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSl7ZS5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSwvKiAzNiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPSFuKDUpJiYhbigxMykoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4oMjUpKFwiZGl2XCIpLFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LC8qIDM3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDkpLG89bigxMCksaT1uKDU4KSghMSksdT1uKDI3KShcIklFX1BST1RPXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuLGM9byh0KSxzPTAsZj1bXTtmb3IobiBpbiBjKW4hPXUmJnIoYyxuKSYmZi5wdXNoKG4pO1xyXG4vLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzXHJcbmZvcig7ZS5sZW5ndGg+czspcihjLG49ZVtzKytdKSYmKH5pKGYsbil8fGYucHVzaChuKSk7cmV0dXJuIGZ9fSwvKiAzOCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XHJcbi8vIDcuMS4xNSBUb0xlbmd0aFxyXG52YXIgcj1uKDIxKSxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdD4wP28ocih0KSw5MDA3MTk5MjU0NzQwOTkxKTowfX0sLyogMzkgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1xyXG4vLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXNcclxudmFyIHI9bigzKSxvPW4oMCksaT1uKDEzKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj0oby5PYmplY3R8fHt9KVt0XXx8T2JqZWN0W3RdLHU9e307dVt0XT1lKG4pLHIoci5TK3IuRippKGZ1bmN0aW9uKCl7bigxKX0pLFwiT2JqZWN0XCIsdSl9fSwvKiA0MCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dmFyIHI9bigzNSksbz1uKDE4KSxpPW4oMTApLHU9bigyNiksYz1uKDkpLHM9bigzNiksZj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2UuZj1uKDUpP2Y6ZnVuY3Rpb24odCxlKXtpZih0PWkodCksZT11KGUsITApLHMpdHJ5e3JldHVybiBmKHQsZSl9Y2F0Y2godCl7fWlmKGModCxlKSlyZXR1cm4gbyghci5mLmNhbGwodCxlKSx0W2VdKX19LC8qIDQxICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9e2RlZmF1bHQ6big2NiksX19lc01vZHVsZTohMH19LC8qIDQyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSl7fSwvKiA0MyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big2NykoITApO1xyXG4vLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXHJcbm4oNDQpKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKHQpe3RoaXMuX3Q9U3RyaW5nKHQpLC8vIHRhcmdldFxyXG50aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLl90LG49dGhpcy5faTtyZXR1cm4gbj49ZS5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfToodD1yKGUsbiksdGhpcy5faSs9dC5sZW5ndGgse3ZhbHVlOnQsZG9uZTohMX0pfSl9LC8qIDQ0ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDIzKSxvPW4oMyksaT1uKDQ1KSx1PW4oOCksYz1uKDkpLHM9bigxNiksZj1uKDY4KSxhPW4oMjQpLGw9big0NykscD1uKDIpKFwiaXRlcmF0b3JcIiksdj0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGgsXyx5LGIpe2YobixlLGgpO3ZhciBnLG0sdyx4PWZ1bmN0aW9uKHQpe2lmKCF2JiZ0IGluIFApcmV0dXJuIFBbdF07c3dpdGNoKHQpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fSxPPWUrXCIgSXRlcmF0b3JcIixNPVwidmFsdWVzXCI9PV8sUz0hMSxQPXQucHJvdG90eXBlLEw9UFtwXXx8UFtcIkBAaXRlcmF0b3JcIl18fF8mJlBbX10saj0hdiYmTHx8eChfKSxrPV8/TT94KFwiZW50cmllc1wiKTpqOnZvaWQgMCxFPVwiQXJyYXlcIj09ZT9QLmVudHJpZXN8fEw6TDtpZihcclxuLy8gRml4IG5hdGl2ZVxyXG5FJiYodz1sKEUuY2FsbChuZXcgdCkpKSE9PU9iamVjdC5wcm90b3R5cGUmJncubmV4dCYmKFxyXG4vLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzXHJcbmEodyxPLCEwKSxcclxuLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzXHJcbnJ8fGModyxwKXx8dSh3LHAsZCkpLFxyXG4vLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGXHJcbk0mJkwmJlwidmFsdWVzXCIhPT1MLm5hbWUmJihTPSEwLGo9ZnVuY3Rpb24oKXtyZXR1cm4gTC5jYWxsKHRoaXMpfSksXHJcbi8vIERlZmluZSBpdGVyYXRvclxyXG5yJiYhYnx8IXYmJiFTJiZQW3BdfHx1KFAscCxqKSxcclxuLy8gUGx1ZyBmb3IgbGlicmFyeVxyXG5zW2VdPWosc1tPXT1kLF8paWYoZz17dmFsdWVzOk0/ajp4KFwidmFsdWVzXCIpLGtleXM6eT9qOngoXCJrZXlzXCIpLGVudHJpZXM6a30sYilmb3IobSBpbiBnKW0gaW4gUHx8aShQLG0sZ1ttXSk7ZWxzZSBvKG8uUCtvLkYqKHZ8fFMpLGUsZyk7cmV0dXJuIGd9fSwvKiA0NSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oOCl9LC8qIDQ2ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEpLmRvY3VtZW50O3QuZXhwb3J0cz1yJiZyLmRvY3VtZW50RWxlbWVudH0sLyogNDcgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1xyXG4vLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKVxyXG52YXIgcj1uKDkpLG89bigzMCksaT1uKDI3KShcIklFX1BST1RPXCIpLHU9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbih0KXtyZXR1cm4gdD1vKHQpLHIodCxpKT90W2ldOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY29uc3RydWN0b3ImJnQgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yP3QuY29uc3RydWN0b3IucHJvdG90eXBlOnQgaW5zdGFuY2VvZiBPYmplY3Q/dTpudWxsfX0sLyogNDggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe24oNzApO2Zvcih2YXIgcj1uKDEpLG89big4KSxpPW4oMTYpLHU9bigyKShcInRvU3RyaW5nVGFnXCIpLGM9XCJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdFwiLnNwbGl0KFwiLFwiKSxzPTA7czxjLmxlbmd0aDtzKyspe3ZhciBmPWNbc10sYT1yW2ZdLGw9YSYmYS5wcm90b3R5cGU7bCYmIWxbdV0mJm8obCx1LGYpLGlbZl09aS5BcnJheX19LC8qIDQ5ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKClcclxudmFyIHI9bigxNSksbz1uKDIpKFwidG9TdHJpbmdUYWdcIiksaT1cIkFyZ3VtZW50c1wiPT1yKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksdT1mdW5jdGlvbih0LGUpe3RyeXtyZXR1cm4gdFtlXX1jYXRjaCh0KXt9fTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUsbixjO3JldHVybiB2b2lkIDA9PT10P1wiVW5kZWZpbmVkXCI6bnVsbD09PXQ/XCJOdWxsXCI6XCJzdHJpbmdcIj09dHlwZW9mKG49dShlPU9iamVjdCh0KSxvKSk/bjppP3IoZSk6XCJPYmplY3RcIj09KGM9cihlKSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY2FsbGVlP1wiQXJndW1lbnRzXCI6Y319LC8qIDUwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpXHJcbnZhciByPW4oNCksbz1uKDE3KSxpPW4oMikoXCJzcGVjaWVzXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuLHU9cih0KS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09dXx8dm9pZCAwPT0obj1yKHUpW2ldKT9lOm8obil9fSwvKiA1MSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dmFyIHIsbyxpLHU9bigxNCksYz1uKDc5KSxzPW4oNDYpLGY9bigyNSksYT1uKDEpLGw9YS5wcm9jZXNzLHA9YS5zZXRJbW1lZGlhdGUsdj1hLmNsZWFySW1tZWRpYXRlLGQ9YS5NZXNzYWdlQ2hhbm5lbCxoPWEuRGlzcGF0Y2gsXz0wLHk9e30sYj1mdW5jdGlvbigpe3ZhciB0PSt0aGlzO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXHJcbmlmKHkuaGFzT3duUHJvcGVydHkodCkpe3ZhciBlPXlbdF07ZGVsZXRlIHlbdF0sZSgpfX0sZz1mdW5jdGlvbih0KXtiLmNhbGwodC5kYXRhKX07XHJcbi8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZTpcclxucCYmdnx8KHA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTthcmd1bWVudHMubGVuZ3RoPm47KWUucHVzaChhcmd1bWVudHNbbisrXSk7cmV0dXJuIHlbKytfXT1mdW5jdGlvbigpe1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcclxuYyhcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCksZSl9LHIoXyksX30sdj1mdW5jdGlvbih0KXtkZWxldGUgeVt0XX0sXHJcbi8vIE5vZGUuanMgMC44LVxyXG5cInByb2Nlc3NcIj09bigxNSkobCk/cj1mdW5jdGlvbih0KXtsLm5leHRUaWNrKHUoYix0LDEpKX06aCYmaC5ub3c/cj1mdW5jdGlvbih0KXtoLm5vdyh1KGIsdCwxKSl9OmQ/KG89bmV3IGQsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcscj11KGkucG9zdE1lc3NhZ2UsaSwxKSk6YS5hZGRFdmVudExpc3RlbmVyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWEuaW1wb3J0U2NyaXB0cz8ocj1mdW5jdGlvbih0KXthLnBvc3RNZXNzYWdlKHQrXCJcIixcIipcIil9LGEuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixnLCExKSk6cj1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4gZihcInNjcmlwdFwiKT9mdW5jdGlvbih0KXtzLmFwcGVuZENoaWxkKGYoXCJzY3JpcHRcIikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3MucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKHQpfX06ZnVuY3Rpb24odCl7c2V0VGltZW91dCh1KGIsdCwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OnAsY2xlYXI6dn19LC8qIDUyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm57ZTohMSx2OnQoKX19Y2F0Y2godCl7cmV0dXJue2U6ITAsdjp0fX19fSwvKiA1MyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dmFyIHI9big0KSxvPW4oNiksaT1uKDMyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZihyKHQpLG8oZSkmJmUuY29uc3RydWN0b3I9PT10KXJldHVybiBlO3ZhciBuPWkuZih0KTtyZXR1cm4oMCxuLnJlc29sdmUpKGUpLG4ucHJvbWlzZX19LC8qIDU0ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1lLl9fZXNNb2R1bGU9ITA7dmFyIHI9big4OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9big5MSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGM9XCJmdW5jdGlvblwiPT10eXBlb2YgdS5kZWZhdWx0JiZcInN5bWJvbFwiPT10eXBlb2Ygby5kZWZhdWx0P2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHUuZGVmYXVsdCYmdC5jb25zdHJ1Y3Rvcj09PXUuZGVmYXVsdCYmdCE9PXUuZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH07ZS5kZWZhdWx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIHUuZGVmYXVsdCYmXCJzeW1ib2xcIj09PWMoby5kZWZhdWx0KT9mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmModCl9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB1LmRlZmF1bHQmJnQuY29uc3RydWN0b3I9PT11LmRlZmF1bHQmJnQhPT11LmRlZmF1bHQucHJvdG90eXBlP1wic3ltYm9sXCI6dm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmModCl9fSwvKiA1NSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe2UuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSwvKiA1NiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XHJcbi8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTylcclxudmFyIHI9bigzNyksbz1uKDI5KS5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKTtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKHQpe3JldHVybiByKHQsbyl9fSwvKiA1NyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XHJcbi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXHJcbnZhciByPW4oMTUpO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXHJcbnQuZXhwb3J0cz1PYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbih0KXtyZXR1cm5cIlN0cmluZ1wiPT1yKHQpP3Quc3BsaXQoXCJcIik6T2JqZWN0KHQpfX0sLyogNTggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1xyXG4vLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mXHJcbi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzXHJcbnZhciByPW4oMTApLG89bigzOCksaT1uKDU5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbix1KXt2YXIgYyxzPXIoZSksZj1vKHMubGVuZ3RoKSxhPWkodSxmKTtcclxuLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXHJcbmlmKHQmJm4hPW4pe2Zvcig7Zj5hOylcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxyXG5pZigoYz1zW2ErK10pIT1jKXJldHVybiEwfWVsc2UgZm9yKDtmPmE7YSsrKWlmKCh0fHxhIGluIHMpJiZzW2FdPT09bilyZXR1cm4gdHx8YXx8MDtyZXR1cm4hdCYmLTF9fX0sLyogNTkgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjEpLG89TWF0aC5tYXgsaT1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD1yKHQpLHQ8MD9vKHQrZSwwKTppKHQsZSl9fSwvKiA2MCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oNjEpLF9fZXNNb2R1bGU6ITB9fSwvKiA2MSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7big2Mik7dmFyIHI9bigwKS5PYmplY3Q7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gci5kZWZpbmVQcm9wZXJ0eSh0LGUsbil9fSwvKiA2MiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dmFyIHI9bigzKTtcclxuLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcylcclxucihyLlMrci5GKiFuKDUpLFwiT2JqZWN0XCIse2RlZmluZVByb3BlcnR5Om4oNykuZn0pfSwvKiA2MyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oODcpLF9fZXNNb2R1bGU6ITB9fSwvKiA2NCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZS5fX2VzTW9kdWxlPSEwO3ZhciByPW4oNTQpLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShyKTtlLmRlZmF1bHQ9ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOigwLG8uZGVmYXVsdCkoZSkpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX19LC8qIDY1ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1lLl9fZXNNb2R1bGU9ITA7dmFyIHI9bigxMDApLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oMTA0KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYz1uKDU0KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyk7ZS5kZWZhdWx0PWZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrKHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjooMCxzLmRlZmF1bHQpKGUpKSk7dC5wcm90b3R5cGU9KDAsdS5kZWZhdWx0KShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKG8uZGVmYXVsdD8oMCxvLmRlZmF1bHQpKHQsZSk6dC5fX3Byb3RvX189ZSl9fSwvKiA2NiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7big0Miksbig0Myksbig0OCksbig3Myksbig4NCksbig4NSksdC5leHBvcnRzPW4oMCkuUHJvbWlzZX0sLyogNjcgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjEpLG89bigyMik7XHJcbi8vIHRydWUgIC0+IFN0cmluZyNhdFxyXG4vLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXRcclxudC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpLHUsYz1TdHJpbmcobyhlKSkscz1yKG4pLGY9Yy5sZW5ndGg7cmV0dXJuIHM8MHx8cz49Zj90P1wiXCI6dm9pZCAwOihpPWMuY2hhckNvZGVBdChzKSxpPDU1Mjk2fHxpPjU2MzE5fHxzKzE9PT1mfHwodT1jLmNoYXJDb2RlQXQocysxKSk8NTYzMjB8fHU+NTczNDM/dD9jLmNoYXJBdChzKTppOnQ/Yy5zbGljZShzLHMrMik6dS01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2KX19fSwvKiA2OCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9bigzMSksbz1uKDE4KSxpPW4oMjQpLHU9e307XHJcbi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpXHJcbm4oOCkodSxuKDIpKFwiaXRlcmF0b3JcIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dC5wcm90b3R5cGU9cih1LHtuZXh0Om8oMSxuKX0pLGkodCxlK1wiIEl0ZXJhdG9yXCIpfX0sLyogNjkgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNyksbz1uKDQpLGk9bigyMCk7dC5leHBvcnRzPW4oNSk/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24odCxlKXtvKHQpO2Zvcih2YXIgbix1PWkoZSksYz11Lmxlbmd0aCxzPTA7Yz5zOylyLmYodCxuPXVbcysrXSxlW25dKTtyZXR1cm4gdH19LC8qIDcwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDcxKSxvPW4oNzIpLGk9bigxNiksdT1uKDEwKTtcclxuLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKVxyXG4vLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKVxyXG4vLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpXHJcbi8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxyXG50LmV4cG9ydHM9big0NCkoQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKHQsZSl7dGhpcy5fdD11KHQpLC8vIHRhcmdldFxyXG50aGlzLl9pPTAsLy8gbmV4dCBpbmRleFxyXG50aGlzLl9rPWV9LGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdCxlPXRoaXMuX2ssbj10aGlzLl9pKys7cmV0dXJuIXR8fG4+PXQubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKTpcImtleXNcIj09ZT9vKDAsbik6XCJ2YWx1ZXNcIj09ZT9vKDAsdFtuXSk6bygwLFtuLHRbbl1dKX0sXCJ2YWx1ZXNcIiksXHJcbi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNylcclxuaS5Bcmd1bWVudHM9aS5BcnJheSxyKFwia2V5c1wiKSxyKFwidmFsdWVzXCIpLHIoXCJlbnRyaWVzXCIpfSwvKiA3MSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LC8qIDcyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue3ZhbHVlOmUsZG9uZTohIXR9fX0sLyogNzMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByLG8saSx1LGM9bigyMykscz1uKDEpLGY9bigxNCksYT1uKDQ5KSxsPW4oMykscD1uKDYpLHY9bigxNyksZD1uKDc0KSxoPW4oNzUpLF89big1MCkseT1uKDUxKS5zZXQsYj1uKDgwKSgpLGc9bigzMiksbT1uKDUyKSx3PW4oNTMpLHg9cy5UeXBlRXJyb3IsTz1zLnByb2Nlc3MsTT1zLlByb21pc2UsUz1cInByb2Nlc3NcIj09YShPKSxQPWZ1bmN0aW9uKCl7fSxMPW89Zy5mLGo9ISFmdW5jdGlvbigpe3RyeXtcclxuLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0XHJcbnZhciB0PU0ucmVzb2x2ZSgxKSxlPSh0LmNvbnN0cnVjdG9yPXt9KVtuKDIpKFwic3BlY2llc1wiKV09ZnVuY3Rpb24odCl7dChQLFApfTtcclxuLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdFxyXG5yZXR1cm4oU3x8XCJmdW5jdGlvblwiPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmdC50aGVuKFApaW5zdGFuY2VvZiBlfWNhdGNoKHQpe319KCksaz1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4hKCFwKHQpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZihlPXQudGhlbikpJiZlfSxFPWZ1bmN0aW9uKHQsZSl7aWYoIXQuX24pe3QuX249ITA7dmFyIG49dC5fYztiKGZ1bmN0aW9uKCl7Zm9yKHZhciByPXQuX3Ysbz0xPT10Ll9zLGk9MDtuLmxlbmd0aD5pOykhZnVuY3Rpb24oZSl7dmFyIG4saSx1PW8/ZS5vazplLmZhaWwsYz1lLnJlc29sdmUscz1lLnJlamVjdCxmPWUuZG9tYWluO3RyeXt1PyhvfHwoMj09dC5faCYmQyh0KSx0Ll9oPTEpLCEwPT09dT9uPXI6KGYmJmYuZW50ZXIoKSxuPXUociksZiYmZi5leGl0KCkpLG49PT1lLnByb21pc2U/cyh4KFwiUHJvbWlzZS1jaGFpbiBjeWNsZVwiKSk6KGk9ayhuKSk/aS5jYWxsKG4sYyxzKTpjKG4pKTpzKHIpfWNhdGNoKHQpe3ModCl9fShuW2krK10pOy8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoXHJcbnQuX2M9W10sdC5fbj0hMSxlJiYhdC5faCYmUih0KX0pfX0sUj1mdW5jdGlvbih0KXt5LmNhbGwocyxmdW5jdGlvbigpe3ZhciBlLG4scixvPXQuX3YsaT1UKHQpO2lmKGkmJihlPW0oZnVuY3Rpb24oKXtTP08uZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLG8sdCk6KG49cy5vbnVuaGFuZGxlZHJlamVjdGlvbik/bih7cHJvbWlzZTp0LHJlYXNvbjpvfSk6KHI9cy5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcihcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLG8pfSksXHJcbi8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkXHJcbnQuX2g9U3x8VCh0KT8yOjEpLHQuX2E9dm9pZCAwLGkmJmUuZSl0aHJvdyBlLnZ9KX0sVD1mdW5jdGlvbih0KXtyZXR1cm4gMSE9PXQuX2gmJjA9PT0odC5fYXx8dC5fYykubGVuZ3RofSxDPWZ1bmN0aW9uKHQpe3kuY2FsbChzLGZ1bmN0aW9uKCl7dmFyIGU7Uz9PLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsdCk6KGU9cy5vbnJlamVjdGlvbmhhbmRsZWQpJiZlKHtwcm9taXNlOnQscmVhc29uOnQuX3Z9KX0pfSxBPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7ZS5fZHx8KGUuX2Q9ITAsZT1lLl93fHxlLC8vIHVud3JhcFxyXG5lLl92PXQsZS5fcz0yLGUuX2F8fChlLl9hPWUuX2Muc2xpY2UoKSksRShlLCEwKSl9LEQ9ZnVuY3Rpb24odCl7dmFyIGUsbj10aGlzO2lmKCFuLl9kKXtuLl9kPSEwLG49bi5fd3x8bjsvLyB1bndyYXBcclxudHJ5e2lmKG49PT10KXRocm93IHgoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTsoZT1rKHQpKT9iKGZ1bmN0aW9uKCl7dmFyIHI9e193Om4sX2Q6ITF9Oy8vIHdyYXBcclxudHJ5e2UuY2FsbCh0LGYoRCxyLDEpLGYoQSxyLDEpKX1jYXRjaCh0KXtBLmNhbGwocix0KX19KToobi5fdj10LG4uX3M9MSxFKG4sITEpKX1jYXRjaCh0KXtBLmNhbGwoe193Om4sX2Q6ITF9LHQpfX19O1xyXG4vLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbFxyXG5qfHwoXHJcbi8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpXHJcbk09ZnVuY3Rpb24odCl7ZCh0aGlzLE0sXCJQcm9taXNlXCIsXCJfaFwiKSx2KHQpLHIuY2FsbCh0aGlzKTt0cnl7dChmKEQsdGhpcywxKSxmKEEsdGhpcywxKSl9Y2F0Y2godCl7QS5jYWxsKHRoaXMsdCl9fSxcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbnI9ZnVuY3Rpb24odCl7dGhpcy5fYz1bXSwvLyA8LSBhd2FpdGluZyByZWFjdGlvbnNcclxudGhpcy5fYT12b2lkIDAsLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnNcclxudGhpcy5fcz0wLC8vIDwtIHN0YXRlXHJcbnRoaXMuX2Q9ITEsLy8gPC0gZG9uZVxyXG50aGlzLl92PXZvaWQgMCwvLyA8LSB2YWx1ZVxyXG50aGlzLl9oPTAsLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWRcclxudGhpcy5fbj0hMX0sci5wcm90b3R5cGU9big4MSkoTS5wcm90b3R5cGUse1xyXG4vLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKVxyXG50aGVuOmZ1bmN0aW9uKHQsZSl7dmFyIG49TChfKHRoaXMsTSkpO3JldHVybiBuLm9rPVwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fHQsbi5mYWlsPVwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUsbi5kb21haW49Uz9PLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKG4pLHRoaXMuX2EmJnRoaXMuX2EucHVzaChuKSx0aGlzLl9zJiZFKHRoaXMsITEpLG4ucHJvbWlzZX0sXHJcbi8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpXHJcbmNhdGNoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLHQpfX0pLGk9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgcjt0aGlzLnByb21pc2U9dCx0aGlzLnJlc29sdmU9ZihELHQsMSksdGhpcy5yZWplY3Q9ZihBLHQsMSl9LGcuZj1MPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09TXx8dD09PXU/bmV3IGkodCk6byh0KX0pLGwobC5HK2wuVytsLkYqIWose1Byb21pc2U6TX0pLG4oMjQpKE0sXCJQcm9taXNlXCIpLG4oODIpKFwiUHJvbWlzZVwiKSx1PW4oMCkuUHJvbWlzZSxcclxuLy8gc3RhdGljc1xyXG5sKGwuUytsLkYqIWosXCJQcm9taXNlXCIse1xyXG4vLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKVxyXG5yZWplY3Q6ZnVuY3Rpb24odCl7dmFyIGU9TCh0aGlzKTtyZXR1cm4oMCxlLnJlamVjdCkodCksZS5wcm9taXNlfX0pLGwobC5TK2wuRiooY3x8IWopLFwiUHJvbWlzZVwiLHtcclxuLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpXHJcbnJlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIHcoYyYmdGhpcz09PXU/TTp0aGlzLHQpfX0pLGwobC5TK2wuRiohKGomJm4oODMpKGZ1bmN0aW9uKHQpe00uYWxsKHQpLmNhdGNoKFApfSkpLFwiUHJvbWlzZVwiLHtcclxuLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpXHJcbmFsbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49TChlKSxyPW4ucmVzb2x2ZSxvPW4ucmVqZWN0LGk9bShmdW5jdGlvbigpe3ZhciBuPVtdLGk9MCx1PTE7aCh0LCExLGZ1bmN0aW9uKHQpe3ZhciBjPWkrKyxzPSExO24ucHVzaCh2b2lkIDApLHUrKyxlLnJlc29sdmUodCkudGhlbihmdW5jdGlvbih0KXtzfHwocz0hMCxuW2NdPXQsLS11fHxyKG4pKX0sbyl9KSwtLXV8fHIobil9KTtyZXR1cm4gaS5lJiZvKGkudiksbi5wcm9taXNlfSxcclxuLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKVxyXG5yYWNlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1MKGUpLHI9bi5yZWplY3Qsbz1tKGZ1bmN0aW9uKCl7aCh0LCExLGZ1bmN0aW9uKHQpe2UucmVzb2x2ZSh0KS50aGVuKG4ucmVzb2x2ZSxyKX0pfSk7cmV0dXJuIG8uZSYmcihvLnYpLG4ucHJvbWlzZX19KX0sLyogNzQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4scil7aWYoISh0IGluc3RhbmNlb2YgZSl8fHZvaWQgMCE9PXImJnIgaW4gdCl0aHJvdyBUeXBlRXJyb3IobitcIjogaW5jb3JyZWN0IGludm9jYXRpb24hXCIpO3JldHVybiB0fX0sLyogNzUgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTQpLG89big3NiksaT1uKDc3KSx1PW4oNCksYz1uKDM4KSxzPW4oNzgpLGY9e30sYT17fSxlPXQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixsLHApe3ZhciB2LGQsaCxfLHk9cD9mdW5jdGlvbigpe3JldHVybiB0fTpzKHQpLGI9cihuLGwsZT8yOjEpLGc9MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB5KXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7XHJcbi8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvclxyXG5pZihpKHkpKXtmb3Iodj1jKHQubGVuZ3RoKTt2Pmc7ZysrKWlmKChfPWU/Yih1KGQ9dFtnXSlbMF0sZFsxXSk6Yih0W2ddKSk9PT1mfHxfPT09YSlyZXR1cm4gX31lbHNlIGZvcihoPXkuY2FsbCh0KTshKGQ9aC5uZXh0KCkpLmRvbmU7KWlmKChfPW8oaCxiLGQudmFsdWUsZSkpPT09Znx8Xz09PWEpcmV0dXJuIF99O2UuQlJFQUs9ZixlLlJFVFVSTj1hfSwvKiA3NiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XHJcbi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3JcclxudmFyIHI9big0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4sbyl7dHJ5e3JldHVybiBvP2UocihuKVswXSxuWzFdKTplKG4pfWNhdGNoKGUpe3ZhciBpPXQucmV0dXJuO3Rocm93IHZvaWQgMCE9PWkmJnIoaS5jYWxsKHQpKSxlfX19LC8qIDc3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvclxyXG52YXIgcj1uKDE2KSxvPW4oMikoXCJpdGVyYXRvclwiKSxpPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJihyLkFycmF5PT09dHx8aVtvXT09PXQpfX0sLyogNzggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNDkpLG89bigyKShcIml0ZXJhdG9yXCIpLGk9bigxNik7dC5leHBvcnRzPW4oMCkuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24odCl7aWYodm9pZCAwIT10KXJldHVybiB0W29dfHx0W1wiQEBpdGVyYXRvclwiXXx8aVtyKHQpXX19LC8qIDc5ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSl7XHJcbi8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNVxyXG50LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXZvaWQgMD09PW47c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHI/dCgpOnQuY2FsbChuKTtjYXNlIDE6cmV0dXJuIHI/dChlWzBdKTp0LmNhbGwobixlWzBdKTtjYXNlIDI6cmV0dXJuIHI/dChlWzBdLGVbMV0pOnQuY2FsbChuLGVbMF0sZVsxXSk7Y2FzZSAzOnJldHVybiByP3QoZVswXSxlWzFdLGVbMl0pOnQuY2FsbChuLGVbMF0sZVsxXSxlWzJdKTtjYXNlIDQ6cmV0dXJuIHI/dChlWzBdLGVbMV0sZVsyXSxlWzNdKTp0LmNhbGwobixlWzBdLGVbMV0sZVsyXSxlWzNdKX1yZXR1cm4gdC5hcHBseShuLGUpfX0sLyogODAgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1uKDUxKS5zZXQsaT1yLk11dGF0aW9uT2JzZXJ2ZXJ8fHIuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXIucHJvY2VzcyxjPXIuUHJvbWlzZSxzPVwicHJvY2Vzc1wiPT1uKDE1KSh1KTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdCxlLG4sZj1mdW5jdGlvbigpe3ZhciByLG87Zm9yKHMmJihyPXUuZG9tYWluKSYmci5leGl0KCk7dDspe289dC5mbix0PXQubmV4dDt0cnl7bygpfWNhdGNoKHIpe3Rocm93IHQ/bigpOmU9dm9pZCAwLHJ9fWU9dm9pZCAwLHImJnIuZW50ZXIoKX07XHJcbi8vIE5vZGUuanNcclxuaWYocyluPWZ1bmN0aW9uKCl7dS5uZXh0VGljayhmKX07ZWxzZSBpZighaXx8ci5uYXZpZ2F0b3ImJnIubmF2aWdhdG9yLnN0YW5kYWxvbmUpaWYoYyYmYy5yZXNvbHZlKXt2YXIgYT1jLnJlc29sdmUoKTtuPWZ1bmN0aW9uKCl7YS50aGVuKGYpfX1lbHNlIG49ZnVuY3Rpb24oKXtcclxuLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKVxyXG5vLmNhbGwocixmKX07ZWxzZXt2YXIgbD0hMCxwPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO25ldyBpKGYpLm9ic2VydmUocCx7Y2hhcmFjdGVyRGF0YTohMH0pLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XHJcbm49ZnVuY3Rpb24oKXtwLmRhdGE9bD0hbH19cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXtmbjpyLG5leHQ6dm9pZCAwfTtlJiYoZS5uZXh0PW8pLHR8fCh0PW8sbigpKSxlPW99fX0sLyogODEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIG8gaW4gZSluJiZ0W29dP3Rbb109ZVtvXTpyKHQsbyxlW29dKTtyZXR1cm4gdH19LC8qIDgyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDEpLG89bigwKSxpPW4oNyksdT1uKDUpLGM9bigyKShcInNwZWNpZXNcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPVwiZnVuY3Rpb25cIj09dHlwZW9mIG9bdF0/b1t0XTpyW3RdO3UmJmUmJiFlW2NdJiZpLmYoZSxjLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSwvKiA4MyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dmFyIHI9bigyKShcIml0ZXJhdG9yXCIpLG89ITE7dHJ5e3ZhciBpPVs3XVtyXSgpO2kucmV0dXJuPWZ1bmN0aW9uKCl7bz0hMH0sXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsXHJcbkFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaCh0KXt9dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYoIWUmJiFvKXJldHVybiExO3ZhciBuPSExO3RyeXt2YXIgaT1bN10sdT1pW3JdKCk7dS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6bj0hMH19LGlbcl09ZnVuY3Rpb24oKXtyZXR1cm4gdX0sdChpKX1jYXRjaCh0KXt9cmV0dXJuIG59fSwvKiA4NCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtZmluYWxseVxyXG52YXIgcj1uKDMpLG89bigwKSxpPW4oMSksdT1uKDUwKSxjPW4oNTMpO3Ioci5QK3IuUixcIlByb21pc2VcIix7ZmluYWxseTpmdW5jdGlvbih0KXt2YXIgZT11KHRoaXMsby5Qcm9taXNlfHxpLlByb21pc2UpLG49XCJmdW5jdGlvblwiPT10eXBlb2YgdDtyZXR1cm4gdGhpcy50aGVuKG4/ZnVuY3Rpb24obil7cmV0dXJuIGMoZSx0KCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbn0pfTp0LG4/ZnVuY3Rpb24obil7cmV0dXJuIGMoZSx0KCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBufSl9OnQpfX0pfSwvKiA4NSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtdHJ5XHJcbnZhciByPW4oMyksbz1uKDMyKSxpPW4oNTIpO3Ioci5TLFwiUHJvbWlzZVwiLHt0cnk6ZnVuY3Rpb24odCl7dmFyIGU9by5mKHRoaXMpLG49aSh0KTtyZXR1cm4obi5lP2UucmVqZWN0OmUucmVzb2x2ZSkobi52KSxlLnByb21pc2V9fSl9LC8qIDg2ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvOy8qXHJcbiogbG9nbGV2ZWwgLSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWxcclxuKlxyXG4qIENvcHlyaWdodCAoYykgMjAxMyBUaW0gUGVycnlcclxuKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiovXHJcbiFmdW5jdGlvbihpLHUpe1widXNlIHN0cmljdFwiO3I9dSx2b2lkIDAhPT0obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByP3IuY2FsbChlLG4sZSx0KTpyKSYmKHQuZXhwb3J0cz1vKX0oMCxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO1xyXG4vLyBDcm9zcy1icm93c2VyIGJpbmQgZXF1aXZhbGVudCB0aGF0IHdvcmtzIGF0IGxlYXN0IGJhY2sgdG8gSUU2XHJcbmZ1bmN0aW9uIGJpbmRNZXRob2QodCxlKXt2YXIgbj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4uYmluZClyZXR1cm4gbi5iaW5kKHQpO3RyeXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChuLHQpfWNhdGNoKGUpe1xyXG4vLyBNaXNzaW5nIGJpbmQgc2hpbSBvciBJRTggKyBNb2Rlcm5penIsIGZhbGxiYWNrIHRvIHdyYXBwaW5nXHJcbnJldHVybiBmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkobixbdCxhcmd1bWVudHNdKX19fVxyXG4vLyBCdWlsZCB0aGUgYmVzdCBsb2dnaW5nIG1ldGhvZCBwb3NzaWJsZSBmb3IgdGhpcyBlbnZcclxuLy8gV2hlcmV2ZXIgcG9zc2libGUgd2Ugd2FudCB0byBiaW5kLCBub3Qgd3JhcCwgdG8gcHJlc2VydmUgc3RhY2sgdHJhY2VzXHJcbmZ1bmN0aW9uIHJlYWxNZXRob2Qobil7cmV0dXJuXCJkZWJ1Z1wiPT09biYmKG49XCJsb2dcIiksdHlwZW9mIGNvbnNvbGUhPT1lJiYodm9pZCAwIT09Y29uc29sZVtuXT9iaW5kTWV0aG9kKGNvbnNvbGUsbik6dm9pZCAwIT09Y29uc29sZS5sb2c/YmluZE1ldGhvZChjb25zb2xlLFwibG9nXCIpOnQpfVxyXG4vLyBUaGVzZSBwcml2YXRlIGZ1bmN0aW9ucyBhbHdheXMgbmVlZCBgdGhpc2AgdG8gYmUgc2V0IHByb3Blcmx5XHJcbmZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyhlLHIpey8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXHJcbmZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXt2YXIgaT1uW29dO3RoaXNbaV09bzxlP3Q6dGhpcy5tZXRob2RGYWN0b3J5KGksZSxyKX1cclxuLy8gRGVmaW5lIGxvZy5sb2cgYXMgYW4gYWxpYXMgZm9yIGxvZy5kZWJ1Z1xyXG50aGlzLmxvZz10aGlzLmRlYnVnfVxyXG4vLyBJbiBvbGQgSUUgdmVyc2lvbnMsIHRoZSBjb25zb2xlIGlzbid0IHByZXNlbnQgdW50aWwgeW91IGZpcnN0IG9wZW4gaXQuXHJcbi8vIFdlIGJ1aWxkIHJlYWxNZXRob2QoKSByZXBsYWNlbWVudHMgaGVyZSB0aGF0IHJlZ2VuZXJhdGUgbG9nZ2luZyBtZXRob2RzXHJcbmZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXModCxuLHIpe3JldHVybiBmdW5jdGlvbigpe3R5cGVvZiBjb25zb2xlIT09ZSYmKHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHRoaXMsbixyKSx0aGlzW3RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fVxyXG4vLyBCeSBkZWZhdWx0LCB3ZSB1c2UgY2xvc2VseSBib3VuZCByZWFsIG1ldGhvZHMgd2hlcmV2ZXIgcG9zc2libGUsIGFuZFxyXG4vLyBvdGhlcndpc2Ugd2Ugd2FpdCBmb3IgYSBjb25zb2xlIHRvIGFwcGVhciwgYW5kIHRoZW4gdHJ5IGFnYWluLlxyXG5mdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeSh0LGUsbil7Lypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxucmV0dXJuIHJlYWxNZXRob2QodCl8fGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIExvZ2dlcih0LHIsbyl7ZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZSh0KXt2YXIgcj0oblt0XXx8XCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtpZih0eXBlb2Ygd2luZG93IT09ZSl7XHJcbi8vIFVzZSBsb2NhbFN0b3JhZ2UgaWYgYXZhaWxhYmxlXHJcbnRyeXtyZXR1cm4gdm9pZCh3aW5kb3cubG9jYWxTdG9yYWdlW2NdPXIpfWNhdGNoKHQpe31cclxuLy8gVXNlIHNlc3Npb24gY29va2llIGFzIGZhbGxiYWNrXHJcbnRyeXt3aW5kb3cuZG9jdW1lbnQuY29va2llPWVuY29kZVVSSUNvbXBvbmVudChjKStcIj1cIityK1wiO1wifWNhdGNoKHQpe319fWZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCl7dmFyIHQ7aWYodHlwZW9mIHdpbmRvdyE9PWUpe3RyeXt0PXdpbmRvdy5sb2NhbFN0b3JhZ2VbY119Y2F0Y2godCl7fVxyXG4vLyBGYWxsYmFjayB0byBjb29raWVzIGlmIGxvY2FsIHN0b3JhZ2UgZ2l2ZXMgdXMgbm90aGluZ1xyXG5pZih0eXBlb2YgdD09PWUpdHJ5e3ZhciBuPXdpbmRvdy5kb2N1bWVudC5jb29raWUscj1uLmluZGV4T2YoZW5jb2RlVVJJQ29tcG9uZW50KGMpK1wiPVwiKTstMSE9PXImJih0PS9eKFteO10rKS8uZXhlYyhuLnNsaWNlKHIpKVsxXSl9Y2F0Y2godCl7fVxyXG4vLyBJZiB0aGUgc3RvcmVkIGxldmVsIGlzIG5vdCB2YWxpZCwgdHJlYXQgaXQgYXMgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxyXG5yZXR1cm4gdm9pZCAwPT09dS5sZXZlbHNbdF0mJih0PXZvaWQgMCksdH19dmFyIGksdT10aGlzLGM9XCJsb2dsZXZlbFwiO3QmJihjKz1cIjpcIit0KSwvKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBQdWJsaWMgbG9nZ2VyIEFQSSAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwgZm9yIGRldGFpbHNcclxuICAgICAgICpcclxuICAgICAgICovXHJcbnUubmFtZT10LHUubGV2ZWxzPXtUUkFDRTowLERFQlVHOjEsSU5GTzoyLFdBUk46MyxFUlJPUjo0LFNJTEVOVDo1fSx1Lm1ldGhvZEZhY3Rvcnk9b3x8ZGVmYXVsdE1ldGhvZEZhY3RvcnksdS5nZXRMZXZlbD1mdW5jdGlvbigpe3JldHVybiBpfSx1LnNldExldmVsPWZ1bmN0aW9uKG4scil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4mJnZvaWQgMCE9PXUubGV2ZWxzW24udG9VcHBlckNhc2UoKV0mJihuPXUubGV2ZWxzW24udG9VcHBlckNhc2UoKV0pLCEoXCJudW1iZXJcIj09dHlwZW9mIG4mJm4+PTAmJm48PXUubGV2ZWxzLlNJTEVOVCkpdGhyb3dcImxvZy5zZXRMZXZlbCgpIGNhbGxlZCB3aXRoIGludmFsaWQgbGV2ZWw6IFwiK247aWYoaT1uLCExIT09ciYmLy8gZGVmYXVsdHMgdG8gdHJ1ZVxyXG5wZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKG4pLHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHUsbix0KSx0eXBlb2YgY29uc29sZT09PWUmJm48dS5sZXZlbHMuU0lMRU5UKXJldHVyblwiTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmdcIn0sdS5zZXREZWZhdWx0TGV2ZWw9ZnVuY3Rpb24odCl7Z2V0UGVyc2lzdGVkTGV2ZWwoKXx8dS5zZXRMZXZlbCh0LCExKX0sdS5lbmFibGVBbGw9ZnVuY3Rpb24odCl7dS5zZXRMZXZlbCh1LmxldmVscy5UUkFDRSx0KX0sdS5kaXNhYmxlQWxsPWZ1bmN0aW9uKHQpe3Uuc2V0TGV2ZWwodS5sZXZlbHMuU0lMRU5ULHQpfTtcclxuLy8gSW5pdGlhbGl6ZSB3aXRoIHRoZSByaWdodCBsZXZlbFxyXG52YXIgcz1nZXRQZXJzaXN0ZWRMZXZlbCgpO251bGw9PXMmJihzPW51bGw9PXI/XCJXQVJOXCI6ciksdS5zZXRMZXZlbChzLCExKX1cclxuLy8gU2xpZ2h0bHkgZHViaW91cyB0cmlja3MgdG8gY3V0IGRvd24gbWluaW1pemVkIGZpbGUgc2l6ZVxyXG52YXIgdD1mdW5jdGlvbigpe30sZT1cInVuZGVmaW5lZFwiLG49W1widHJhY2VcIixcImRlYnVnXCIsXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiXSxyPW5ldyBMb2dnZXIsbz17fTtyLmdldExvZ2dlcj1mdW5jdGlvbih0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgdHx8XCJcIj09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci5cIik7dmFyIGU9b1t0XTtyZXR1cm4gZXx8KGU9b1t0XT1uZXcgTG9nZ2VyKHQsci5nZXRMZXZlbCgpLHIubWV0aG9kRmFjdG9yeSkpLGV9O1xyXG4vLyBHcmFiIHRoZSBjdXJyZW50IGdsb2JhbCBsb2cgdmFyaWFibGUgaW4gY2FzZSBvZiBvdmVyd3JpdGVcclxudmFyIGk9dHlwZW9mIHdpbmRvdyE9PWU/d2luZG93LmxvZzp2b2lkIDA7cmV0dXJuIHIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT09ZSYmd2luZG93LmxvZz09PXImJih3aW5kb3cubG9nPWkpLHJ9LHIuZ2V0TG9nZ2Vycz1mdW5jdGlvbigpe3JldHVybiBvfSxyfSl9LC8qIDg3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtuKDg4KSx0LmV4cG9ydHM9bigwKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LC8qIDg4ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pXHJcbnZhciByPW4oMzApLG89big0Nyk7bigzOSkoXCJnZXRQcm90b3R5cGVPZlwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBvKHIodCkpfX0pfSwvKiA4OSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oOTApLF9fZXNNb2R1bGU6ITB9fSwvKiA5MCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7big0Myksbig0OCksdC5leHBvcnRzPW4oMzMpLmYoXCJpdGVyYXRvclwiKX0sLyogOTEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDkyKSxfX2VzTW9kdWxlOiEwfX0sLyogOTIgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe24oOTMpLG4oNDIpLG4oOTgpLG4oOTkpLHQuZXhwb3J0cz1uKDApLlN5bWJvbH0sLyogOTMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO1xyXG4vLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltXHJcbnZhciByPW4oMSksbz1uKDkpLGk9big1KSx1PW4oMyksYz1uKDQ1KSxzPW4oOTQpLktFWSxmPW4oMTMpLGE9bigyOCksbD1uKDI0KSxwPW4oMTkpLHY9bigyKSxkPW4oMzMpLGg9bigzNCksXz1uKDk1KSx5PW4oOTYpLGI9big0KSxnPW4oNiksbT1uKDEwKSx3PW4oMjYpLHg9bigxOCksTz1uKDMxKSxNPW4oOTcpLFM9big0MCksUD1uKDcpLEw9bigyMCksaj1TLmYsaz1QLmYsRT1NLmYsUj1yLlN5bWJvbCxUPXIuSlNPTixDPVQmJlQuc3RyaW5naWZ5LEE9dihcIl9oaWRkZW5cIiksRD12KFwidG9QcmltaXRpdmVcIiksRj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxxPWEoXCJzeW1ib2wtcmVnaXN0cnlcIiksST1hKFwic3ltYm9sc1wiKSxOPWEoXCJvcC1zeW1ib2xzXCIpLEI9T2JqZWN0LnByb3RvdHlwZSxXPVwiZnVuY3Rpb25cIj09dHlwZW9mIFIsRz1yLlFPYmplY3QsVT0hR3x8IUcucHJvdG90eXBlfHwhRy5wcm90b3R5cGUuZmluZENoaWxkLFY9aSYmZihmdW5jdGlvbigpe3JldHVybiA3IT1PKGsoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBrKHRoaXMsXCJhXCIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24odCxlLG4pe3ZhciByPWooQixlKTtyJiZkZWxldGUgQltlXSxrKHQsZSxuKSxyJiZ0IT09QiYmayhCLGUscil9OmssSD1mdW5jdGlvbih0KXt2YXIgZT1JW3RdPU8oUi5wcm90b3R5cGUpO3JldHVybiBlLl9rPXQsZX0sSz1XJiZcInN5bWJvbFwiPT10eXBlb2YgUi5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBSfSxKPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdD09PUImJkooTixlLG4pLGIodCksZT13KGUsITApLGIobiksbyhJLGUpPyhuLmVudW1lcmFibGU/KG8odCxBKSYmdFtBXVtlXSYmKHRbQV1bZV09ITEpLG49TyhuLHtlbnVtZXJhYmxlOngoMCwhMSl9KSk6KG8odCxBKXx8ayh0LEEseCgxLHt9KSksdFtBXVtlXT0hMCksVih0LGUsbikpOmsodCxlLG4pfSxZPWZ1bmN0aW9uKHQsZSl7Yih0KTtmb3IodmFyIG4scj1fKGU9bShlKSksbz0wLGk9ci5sZW5ndGg7aT5vOylKKHQsbj1yW28rK10sZVtuXSk7cmV0dXJuIHR9LHo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZT9PKHQpOlkoTyh0KSxlKX0sUT1mdW5jdGlvbih0KXt2YXIgZT1GLmNhbGwodGhpcyx0PXcodCwhMCkpO3JldHVybiEodGhpcz09PUImJm8oSSx0KSYmIW8oTix0KSkmJighKGV8fCFvKHRoaXMsdCl8fCFvKEksdCl8fG8odGhpcyxBKSYmdGhpc1tBXVt0XSl8fGUpfSxYPWZ1bmN0aW9uKHQsZSl7aWYodD1tKHQpLGU9dyhlLCEwKSx0IT09Qnx8IW8oSSxlKXx8byhOLGUpKXt2YXIgbj1qKHQsZSk7cmV0dXJuIW58fCFvKEksZSl8fG8odCxBKSYmdFtBXVtlXXx8KG4uZW51bWVyYWJsZT0hMCksbn19LFo9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49RShtKHQpKSxyPVtdLGk9MDtuLmxlbmd0aD5pOylvKEksZT1uW2krK10pfHxlPT1BfHxlPT1zfHxyLnB1c2goZSk7cmV0dXJuIHJ9LCQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49dD09PUIscj1FKG4/TjptKHQpKSxpPVtdLHU9MDtyLmxlbmd0aD51OykhbyhJLGU9clt1KytdKXx8biYmIW8oQixlKXx8aS5wdXNoKElbZV0pO3JldHVybiBpfTtcclxuLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pXHJcbld8fChSPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIFIpdGhyb3cgVHlwZUVycm9yKFwiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIVwiKTt2YXIgdD1wKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSxlPWZ1bmN0aW9uKG4pe3RoaXM9PT1CJiZlLmNhbGwoTixuKSxvKHRoaXMsQSkmJm8odGhpc1tBXSx0KSYmKHRoaXNbQV1bdF09ITEpLFYodGhpcyx0LHgoMSxuKSl9O3JldHVybiBpJiZVJiZWKEIsdCx7Y29uZmlndXJhYmxlOiEwLHNldDplfSksSCh0KX0sYyhSLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLFMuZj1YLFAuZj1KLG4oNTYpLmY9TS5mPVosbigzNSkuZj1RLG4oNTUpLmY9JCxpJiYhbigyMykmJmMoQixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsUSwhMCksZC5mPWZ1bmN0aW9uKHQpe3JldHVybiBIKHYodCkpfSksdSh1LkcrdS5XK3UuRiohVyx7U3ltYm9sOlJ9KTtmb3IodmFyIHR0PVwiaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXNcIi5zcGxpdChcIixcIiksZXQ9MDt0dC5sZW5ndGg+ZXQ7KXYodHRbZXQrK10pO2Zvcih2YXIgbnQ9TCh2LnN0b3JlKSxydD0wO250Lmxlbmd0aD5ydDspaChudFtydCsrXSk7dSh1LlMrdS5GKiFXLFwiU3ltYm9sXCIse1xyXG4vLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSlcclxuZm9yOmZ1bmN0aW9uKHQpe3JldHVybiBvKHEsdCs9XCJcIik/cVt0XTpxW3RdPVIodCl9LFxyXG4vLyAxOS40LjIuNSBTeW1ib2wua2V5Rm9yKHN5bSlcclxua2V5Rm9yOmZ1bmN0aW9uKHQpe2lmKCFLKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhIHN5bWJvbCFcIik7Zm9yKHZhciBlIGluIHEpaWYocVtlXT09PXQpcmV0dXJuIGV9LHVzZVNldHRlcjpmdW5jdGlvbigpe1U9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe1U9ITF9fSksdSh1LlMrdS5GKiFXLFwiT2JqZWN0XCIse1xyXG4vLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXHJcbmNyZWF0ZTp6LFxyXG4vLyAxOS4xLjIuNCBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcylcclxuZGVmaW5lUHJvcGVydHk6SixcclxuLy8gMTkuMS4yLjMgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcylcclxuZGVmaW5lUHJvcGVydGllczpZLFxyXG4vLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApXHJcbmdldE93blByb3BlcnR5RGVzY3JpcHRvcjpYLFxyXG4vLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKVxyXG5nZXRPd25Qcm9wZXJ0eU5hbWVzOlosXHJcbi8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTylcclxuZ2V0T3duUHJvcGVydHlTeW1ib2xzOiR9KSxcclxuLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pXHJcblQmJnUodS5TK3UuRiooIVd8fGYoZnVuY3Rpb24oKXt2YXIgdD1SKCk7XHJcbi8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9XHJcbi8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbFxyXG4vLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9sc1xyXG5yZXR1cm5cIltudWxsXVwiIT1DKFt0XSl8fFwie31cIiE9Qyh7YTp0fSl8fFwie31cIiE9QyhPYmplY3QodCkpfSkpLFwiSlNPTlwiLHtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj1bdF0sbz0xO2FyZ3VtZW50cy5sZW5ndGg+bzspci5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZihuPWU9clsxXSwoZyhlKXx8dm9pZCAwIT09dCkmJiFLKHQpKS8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWRcclxucmV0dXJuIHkoZSl8fChlPWZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKGU9bi5jYWxsKHRoaXMsdCxlKSksIUsoZSkpcmV0dXJuIGV9KSxyWzFdPWUsQy5hcHBseShULHIpfX0pLFxyXG4vLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpXHJcblIucHJvdG90eXBlW0RdfHxuKDgpKFIucHJvdG90eXBlLEQsUi5wcm90b3R5cGUudmFsdWVPZiksXHJcbi8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ11cclxubChSLFwiU3ltYm9sXCIpLFxyXG4vLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddXHJcbmwoTWF0aCxcIk1hdGhcIiwhMCksXHJcbi8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddXHJcbmwoci5KU09OLFwiSlNPTlwiLCEwKX0sLyogOTQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTkpKFwibWV0YVwiKSxvPW4oNiksaT1uKDkpLHU9big3KS5mLGM9MCxzPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGY9IW4oMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIHMoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxhPWZ1bmN0aW9uKHQpe3UodCxyLHt2YWx1ZTp7aTpcIk9cIisgKytjLC8vIG9iamVjdCBJRFxyXG53Ont9fX0pfSxsPWZ1bmN0aW9uKHQsZSl7XHJcbi8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXhcclxuaWYoIW8odCkpcmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHQ/dDooXCJzdHJpbmdcIj09dHlwZW9mIHQ/XCJTXCI6XCJQXCIpK3Q7aWYoIWkodCxyKSl7XHJcbi8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0XHJcbmlmKCFzKHQpKXJldHVyblwiRlwiO1xyXG4vLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxyXG5pZighZSlyZXR1cm5cIkVcIjtcclxuLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcclxuYSh0KX1yZXR1cm4gdFtyXS5pfSxwPWZ1bmN0aW9uKHQsZSl7aWYoIWkodCxyKSl7XHJcbi8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0XHJcbmlmKCFzKHQpKXJldHVybiEwO1xyXG4vLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxyXG5pZighZSlyZXR1cm4hMTtcclxuLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcclxuYSh0KX1yZXR1cm4gdFtyXS53fSx2PWZ1bmN0aW9uKHQpe3JldHVybiBmJiZkLk5FRUQmJnModCkmJiFpKHQscikmJmEodCksdH0sZD10LmV4cG9ydHM9e0tFWTpyLE5FRUQ6ITEsZmFzdEtleTpsLGdldFdlYWs6cCxvbkZyZWV6ZTp2fX0sLyogOTUgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1xyXG4vLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9sc1xyXG52YXIgcj1uKDIwKSxvPW4oNTUpLGk9bigzNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXIodCksbj1vLmY7aWYobilmb3IodmFyIHUsYz1uKHQpLHM9aS5mLGY9MDtjLmxlbmd0aD5mOylzLmNhbGwodCx1PWNbZisrXSkmJmUucHVzaCh1KTtyZXR1cm4gZX19LC8qIDk2ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudClcclxudmFyIHI9bigxNSk7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiQXJyYXlcIj09cih0KX19LC8qIDk3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvd1xyXG52YXIgcj1uKDEwKSxvPW4oNTYpLmYsaT17fS50b1N0cmluZyx1PVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxjPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gbyh0KX1jYXRjaCh0KXtyZXR1cm4gdS5zbGljZSgpfX07dC5leHBvcnRzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIHUmJlwiW29iamVjdCBXaW5kb3ddXCI9PWkuY2FsbCh0KT9jKHQpOm8ocih0KSl9fSwvKiA5OCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7bigzNCkoXCJhc3luY0l0ZXJhdG9yXCIpfSwvKiA5OSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7bigzNCkoXCJvYnNlcnZhYmxlXCIpfSwvKiAxMDAgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDEwMSksX19lc01vZHVsZTohMH19LC8qIDEwMSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7bigxMDIpLHQuZXhwb3J0cz1uKDApLk9iamVjdC5zZXRQcm90b3R5cGVPZn0sLyogMTAyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtcclxuLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bylcclxudmFyIHI9bigzKTtyKHIuUyxcIk9iamVjdFwiLHtzZXRQcm90b3R5cGVPZjpuKDEwMykuc2V0fSl9LC8qIDEwMyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XHJcbi8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLlxyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xyXG52YXIgcj1uKDYpLG89big0KSxpPWZ1bmN0aW9uKHQsZSl7aWYobyh0KSwhcihlKSYmbnVsbCE9PWUpdGhyb3cgVHlwZUVycm9yKGUrXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT8vLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbmZ1bmN0aW9uKHQsZSxyKXt0cnl7cj1uKDE0KShGdW5jdGlvbi5jYWxsLG4oNDApLmYoT2JqZWN0LnByb3RvdHlwZSxcIl9fcHJvdG9fX1wiKS5zZXQsMikscih0LFtdKSxlPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaCh0KXtlPSEwfXJldHVybiBmdW5jdGlvbih0LG4pe3JldHVybiBpKHQsbiksZT90Ll9fcHJvdG9fXz1uOnIodCxuKSx0fX0oe30sITEpOnZvaWQgMCksY2hlY2s6aX19LC8qIDEwNCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oMTA1KSxfX2VzTW9kdWxlOiEwfX0sLyogMTA1ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKHQsZSxuKXtuKDEwNik7dmFyIHI9bigwKS5PYmplY3Q7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIuY3JlYXRlKHQsZSl9fSwvKiAxMDYgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMyk7XHJcbi8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxyXG5yKHIuUyxcIk9iamVjdFwiLHtjcmVhdGU6bigzMSl9KX0sLyogMTA3ICovXHJcbiwvKiAxMDggKi9cclxuLC8qIDEwOSAqL1xyXG4sLyogMTEwICovXHJcbiwvKiAxMTEgKi9cclxuLC8qIDExMiAqL1xyXG4sLyogMTEzICovXHJcbiwvKiAxMTQgKi9cclxuLC8qIDExNSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9big2Myksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9bigxMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGM9bigxMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGY9big2NCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGYpLGw9big2NSkscD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHY9bigxMTYpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxoPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIE1pbmlCdXMoKXtyZXR1cm4oMCx1LmRlZmF1bHQpKHRoaXMsTWluaUJ1cyksKDAsYS5kZWZhdWx0KSh0aGlzLChNaW5pQnVzLl9fcHJvdG9fX3x8KDAsby5kZWZhdWx0KShNaW5pQnVzKSkuY2FsbCh0aGlzKSl9LyoqXHJcbiAgICogUG9zdCBhIG1lc3NhZ2UgZm9yIHJvdXRpbmcuIE1lc3NhZ2UgaXMgcm91dGVkIGRpcmVjdGx5IHRvIHRoZSBleHRlcm5hbCByb3V0aW5nIF9vblBvc3RNZXNzYWdlLlxyXG4gICAqIEBwYXJhbSAge01lc3NhZ2V9IGluTXNnICAgICAgICAgICAgSlNPTiB3aXRoIG1hbmRhdG9yeSBNZXNzYWdlIHN0cnVjdHVyZSB7aWQsIHR5cGUsIGZyb20sIHRvfVxyXG4gICAqIEBwYXJhbSAge0NhbGxiYWNrfSByZXNwb25zZUNhbGxiYWNrIE9wdGlvbmFsIGNhbGxiYWNrIGlmIGEgcmVzcG9uc2UgaXMgZXhwZWN0ZWQgZnJvbSB0aGUgcmVxdWVzdC4gQSByZXNwb25zZSB3aWxsIGJlIGFsd2F5cyBzZW50LCBldmVuIGlmIGl0IGlzIGEgXCJUaW1lb3V0XCIuXHJcbiAgICogQHJldHVybiB7bnVtYmVyfSAgICAgICAgICAgICAgICAgIHRoZSBNZXNzYWdlIGlkXHJcbiAgICovXHJcbnJldHVybigwLHAuZGVmYXVsdCkoTWluaUJ1cyx0KSwoMCxzLmRlZmF1bHQpKE1pbmlCdXMsW3trZXk6XCJwb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO1xyXG4vL2Fsd2F5cyBzZW5kIHRvIGV4dGVybmFsICh0byBjb3JlIE1lc3NhZ2VCdXMpXHJcbnJldHVybiByLl9nZW5JZCh0KSxyLl9yZXNwb25zZUNhbGxiYWNrKHQsZSxuKSxyLl9vblBvc3RNZXNzYWdlKHQpLHQuaWR9fSx7a2V5OlwiX29uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoIWUuX29uUmVzcG9uc2UodCkpe3ZhciBuPWUuX3N1YnNjcmlwdGlvbnNbdC50b107bj8oZS5fcHVibGlzaE9uKG4sdCksdC50by5zdGFydHNXaXRoKFwiaHlwZXJ0eVwiKXx8ZS5fcHVibGlzaE9uRGVmYXVsdCh0KSk6ZS5fcHVibGlzaE9uRGVmYXVsdCh0KX19fV0pLE1pbmlCdXN9KGQuZGVmYXVsdCk7LyoqXHJcbiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXHJcbiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcclxuICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcclxuICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxyXG4gICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxyXG4gICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcclxuICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcclxuICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxyXG4gICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAgICAgICAgICAgICAgICAgICoqL1xyXG5lLmRlZmF1bHQ9aCx0LmV4cG9ydHM9ZS5kZWZhdWx0fSwvKiAxMTYgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oNDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oMTEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxjPW4oMTIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxmPW4oODYpLGE9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShmKSxsPWEuZ2V0TG9nZ2VyKFwiQnVzXCIpLHA9ZnVuY3Rpb24oKXsvKiBwcml2YXRlXHJcbiAgX21zZ0lkOiBudW1iZXI7XHJcbiAgX3N1YnNjcmlwdGlvbnM6IDx1cmw6IE1zZ0xpc3RlbmVyW10+XHJcbiAgIF9yZXNwb25zZVRpbWVPdXQ6IG51bWJlclxyXG4gIF9yZXNwb25zZUNhbGxiYWNrczogPHVybCtpZDogKG1zZykgPT4gdm9pZD5cclxuICAgKi9cclxuZnVuY3Rpb24gQnVzKCl7KDAsdS5kZWZhdWx0KSh0aGlzLEJ1cyk7dmFyIHQ9dGhpczt0Ll9tc2dJZD0wLHQuX3N1YnNjcmlwdGlvbnM9e30sdC5fcmVzcG9uc2VUaW1lT3V0PTE1ZTMsLy9kZWZhdWx0IHRvIDNzXHJcbnQuX3Jlc3BvbnNlQ2FsbGJhY2tzPXt9LHQuX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcigpfS8qKlxyXG4gICogUmVnaXN0ZXIgbGlzdGVuZXIgdG8gcmVjZWl2ZSBtZXNzYWdlIHdoZW4gXCJtc2cudG8gPT09IHVybFwiLlxyXG4gICogU3BlY2lhbCB1cmwgXCIqXCIgZm9yIGRlZmF1bHQgbGlzdGVuZXIgaXMgYWNjZXB0ZWQgdG8gaW50ZXJjZXB0IGFsbCBtZXNzYWdlcy5cclxuICAqIEBwYXJhbSB7VVJMfSB1cmwgQWRkcmVzcyB0byBpbnRlcmNlcHQsIHRoYSBpcyBpbiB0aGUgbWVzc2FnZSBcInRvXCJcclxuICAqIEBwYXJhbSB7TGlzdGVuZXJ9IGxpc3RlbmVyIGxpc3RlbmVyXHJcbiAgKiBAcmV0dXJuIHtNc2dMaXN0ZW5lcn0gaW5zdGFuY2Ugb2YgTXNnTGlzdGVuZXJcclxuICAqL1xyXG5yZXR1cm4oMCxzLmRlZmF1bHQpKEJ1cyxbe2tleTpcImFkZExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9bmV3IHYobi5fc3Vic2NyaXB0aW9ucyx0LGUpLG89bi5fc3Vic2NyaXB0aW9uc1t0XTtyZXR1cm4gb3x8KG89W10sbi5fc3Vic2NyaXB0aW9uc1t0XT1vKSxvLnB1c2gocikscn19LHtrZXk6XCJhZGRSZXNwb25zZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3QrZV09bn19LHtrZXk6XCJyZW1vdmVSZXNwb25zZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtkZWxldGUgdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbdCtlXX19LHtrZXk6XCJyZW1vdmVBbGxMaXN0ZW5lcnNPZlwiLHZhbHVlOmZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW3RdfX0se2tleTpcImJpbmRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcyxvPXRoaXM7cmV0dXJue3RoaXNMaXN0ZW5lcjpvLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24odCl7bi5wb3N0TWVzc2FnZSh0KX0pLHRhcmdldExpc3RlbmVyOm4uYWRkTGlzdGVuZXIoZSxmdW5jdGlvbih0KXtvLnBvc3RNZXNzYWdlKHQpfSksdW5iaW5kOmZ1bmN0aW9uKCl7ci50aGlzTGlzdGVuZXIucmVtb3ZlKCksci50YXJnZXRMaXN0ZW5lci5yZW1vdmUoKX19fX0se2tleTpcIl9wdWJsaXNoT25EZWZhdWx0XCIsdmFsdWU6ZnVuY3Rpb24odCl7XHJcbi8vaXMgdGhlcmUgYW55IFwiKlwiIChkZWZhdWx0KSBsaXN0ZW5lcnM/XHJcbnZhciBlPXRoaXMuX3N1YnNjcmlwdGlvbnNbXCIqXCJdO2UmJnRoaXMuX3B1Ymxpc2hPbihlLHQpfX0se2tleTpcIl9wdWJsaXNoT25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0Ll9jYWxsYmFjayhlKX0pfX0se2tleTpcIl9yZXNwb25zZUNhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLHI9dGhpcztcclxuLy9hdXRvbWF0aWMgbWFuYWdlbWVudCBvZiByZXNwb25zZSBoYW5kbGVyc1xyXG5pZihlKXt2YXIgbz10LmZyb20rdC5pZDtyLl9yZXNwb25zZUNhbGxiYWNrc1tvXT1lLG4mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1yLl9yZXNwb25zZUNhbGxiYWNrc1tvXTtpZihkZWxldGUgci5fcmVzcG9uc2VDYWxsYmFja3Nbb10sZSl7ZSh7aWQ6dC5pZCx0eXBlOlwicmVzcG9uc2VcIixib2R5Ontjb2RlOjQwOCxkZXNjOlwiUmVzcG9uc2UgdGltZW91dCFcIix2YWx1ZTp0fX0pfX0sci5fcmVzcG9uc2VUaW1lT3V0KX19fSx7a2V5OlwiX29uUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKFwicmVzcG9uc2VcIj09PXQudHlwZSl7dmFyIG49dC50byt0LmlkLHI9ZS5fcmVzcG9uc2VDYWxsYmFja3Nbbl07aWYodC5ib2R5LmNvZGU+PTIwMCYmXHJcbi8vaWYgaXQncyBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlLCBkb24ndCBkZWxldGUgcmVzcG9uc2UgbGlzdGVuZXJcclxuZGVsZXRlIGUuX3Jlc3BvbnNlQ2FsbGJhY2tzW25dLHIpcmV0dXJuIHIodCksITB9cmV0dXJuITF9fSx7a2V5OlwiX29uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoIWUuX29uUmVzcG9uc2UodCkpe3ZhciBuPWUuX3N1YnNjcmlwdGlvbnNbdC50b107bj9lLl9wdWJsaXNoT24obix0KTplLl9wdWJsaXNoT25EZWZhdWx0KHQpfX19LHtrZXk6XCJfZ2VuSWRcIix2YWx1ZTpmdW5jdGlvbih0KXtcclxuLy9UT0RPOiBob3cgZG8gd2UgbWFuYWdlIG1lc3NhZ2UgSUQncz8gU2hvdWxkIGl0IGJlIGEgZ2xvYmFsIHJ1bnRpbWUgY291bnRlciwgb3IgcGVyIFVSTCBhZGRyZXNzP1xyXG4vL0dsb2JhbCBjb3VudGVyIHdpbGwgbm90IHdvcmssIGJlY2F1c2UgdGhlcmUgd2lsbCBiZSBtdWx0aXBsZSBNaW5pQnVzIGluc3RhbmNlcyFcclxuLy9QZXIgVVJMLCBjYW4gYmUgYSBsb3Qgb2YgZGF0YSB0byBtYWludGFpbiFcclxuLy9NYXliZSBhIGNvdW50ZXIgcGVyIE1pbmlCdXMgaW5zdGFuY2UuIFRoaXMgaXMgdGhlIGFzc3VtZWQgc29sdXRpb24gZm9yIG5vdy5cclxudC5pZCYmMCE9PXQuaWR8fCh0aGlzLl9tc2dJZCsrLHQuaWQ9dGhpcy5fbXNnSWQpfX0se2tleTpcInBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt9fSx7a2V5OlwicG9zdE1lc3NhZ2VXaXRoUmV0cmllc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLGk9MCx1PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSxvKXtyLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24ocil7NDA4PT09ci5ib2R5LmNvZGV8fDUwMD09PXIuYm9keS5jb2RlP28oKToobC5pbmZvKFwiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBtc2cgZGVsaXZlcmVkOiBcIix0KSxuKHIpLGUoKSl9KX0pfTshZnVuY3Rpb24gdHJ5QWdhaW4oKXt1KCkudGhlbihmdW5jdGlvbigpe30sZnVuY3Rpb24oKXtpZihsLndhcm4oXCJbQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXNdIE1lc3NhZ2UgQm91bmNlZCAocmV0cnkgXCIraStcIik6ICdcIix0KSwhKGkrKzxlKSl7dmFyIG49XCJbRXJyb3JdIE1lc3NhZ2UgQm91bmNlZCAoZGVsaXZlcnkgYXR0ZW1wdHMgXCIrZStcIik6ICdcIjt0aHJvdyBuZXcgRXJyb3Iobit0KX10cnlBZ2FpbigpfSl9KCl9fSx7a2V5OlwiX29uUG9zdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt9fSx7a2V5OlwiX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSxCdXN9KCksdj1mdW5jdGlvbigpey8qIHByaXZhdGVcclxuICBfc3Vic2NyaXB0aW9uczogPHN0cmluZzogTXNnTGlzdGVuZXJbXT47XHJcbiAgX3VybDogc3RyaW5nO1xyXG4gIF9jYWxsYmFjazogKG1zZykgPT4gdm9pZDtcclxuICAqL1xyXG5mdW5jdGlvbiBNc2dMaXN0ZW5lcih0LGUsbil7KDAsdS5kZWZhdWx0KSh0aGlzLE1zZ0xpc3RlbmVyKTt2YXIgcj10aGlzO3IuX3N1YnNjcmlwdGlvbnM9dCxyLl91cmw9ZSxyLl9jYWxsYmFjaz1ufXJldHVybigwLHMuZGVmYXVsdCkoTXNnTGlzdGVuZXIsW3trZXk6XCJyZW1vdmVcIiwvKipcclxuICAgICAqIFJlbW92ZSB0aGlzIGxpc3RlbmVyIGZyb20gdGhlIEJ1c1xyXG4gICAgICovXHJcbnZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuX3N1YnNjcmlwdGlvbnNbdC5fdXJsXTtpZihlKXt2YXIgbj1lLmluZGV4T2YodCk7ZS5zcGxpY2UobiwxKSxcclxuLy9pZiB0aGVyZSBhcmUgbm8gbGlzdGVuZXJzLCByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBlbnRpcmVseS5cclxuMD09PWUubGVuZ3RoJiZkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1t0Ll91cmxdfX19LHtrZXk6XCJ1cmxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxNc2dMaXN0ZW5lcn0oKTtlLmRlZmF1bHQ9cCx0LmV4cG9ydHM9ZS5kZWZhdWx0fSwvKiAxMTcgKi9cclxuLC8qIDExOCAqL1xyXG4sLyogMTE5ICovXHJcbiwvKiAxMjAgKi9cclxuLC8qIDEyMSAqL1xyXG4sLyogMTIyICovXHJcbiwvKiAxMjMgKi9cclxuLC8qIDEyNCAqL1xyXG4sLyogMTI1ICovXHJcbiwvKiAxMjYgKi9cclxuLC8qIDEyNyAqL1xyXG4sLyogMTI4ICovXHJcbiwvKiAxMjkgKi9cclxuLC8qIDEzMCAqL1xyXG4sLyogMTMxICovXHJcbiwvKiAxMzIgKi9cclxuLC8qIDEzMyAqL1xyXG4sLyogMTM0ICovXHJcbiwvKiAxMzUgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMTE1KSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocik7ZS5kZWZhdWx0PW8uZGVmYXVsdCwvKipcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiovXHJcbnQuZXhwb3J0cz1lLmRlZmF1bHR9XSl9KTsiLCIvLyB2ZXJzaW9uOiAwLjExLjFcclxuLy8gZGF0ZTogRnJpIEphbiAxMiAyMDE4IDEyOjQyOjM4IEdNVCswMDAwIChXRVQpXHJcbi8vIGxpY2VuY2U6IFxyXG4vKipcclxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcclxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxyXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxyXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXHJcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXHJcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xyXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxyXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXHJcbipcclxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKiovXHJcblxyXG5cclxuLy8gdmVyc2lvbjogMC4xMS4xXHJcbi8vIGRhdGU6IEZyaSBKYW4gMTIgMjAxOCAxMjo0MjozOCBHTVQrMDAwMCAoV0VUKVxyXG4vLyBsaWNlbmNlOiBcclxuLyoqXHJcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXHJcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcclxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcclxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxyXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxyXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcclxuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcclxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxyXG4qXHJcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqL1xyXG5cclxuXHJcbiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwic2FuZGJveFwiLFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuc2FuZGJveD10KCk6ZS5zYW5kYm94PXQoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7LyoqKioqKi9cclxucmV0dXJuIGZ1bmN0aW9uKGUpey8qKioqKiovXHJcbi8qKioqKiovXHJcbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXHJcbi8qKioqKiovXHJcbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obil7LyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXHJcbi8qKioqKiovXHJcbmlmKHRbbl0pLyoqKioqKi9cclxucmV0dXJuIHRbbl0uZXhwb3J0czsvKioqKioqL1xyXG4vLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxyXG4vKioqKioqL1xyXG52YXIgcj10W25dPXsvKioqKioqL1xyXG5pOm4sLyoqKioqKi9cclxubDohMSwvKioqKioqL1xyXG5leHBvcnRzOnt9fTsvKioqKioqL1xyXG4vKioqKioqL1xyXG4vLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxyXG4vKioqKioqL1xyXG4vKioqKioqL1xyXG4vKioqKioqL1xyXG4vLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxyXG4vKioqKioqL1xyXG5yZXR1cm4gZVtuXS5jYWxsKHIuZXhwb3J0cyxyLHIuZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxyLmw9ITAsci5leHBvcnRzfS8vIHdlYnBhY2tCb290c3RyYXBcclxuLyoqKioqKi9cclxuLy8gVGhlIG1vZHVsZSBjYWNoZVxyXG4vKioqKioqL1xyXG52YXIgdD17fTsvKioqKioqL1xyXG4vKioqKioqL1xyXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLyoqKioqKi9cclxuLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8qKioqKiovXHJcbi8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxyXG4vKioqKioqL1xyXG4vKioqKioqL1xyXG4vKioqKioqL1xyXG4vLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xyXG4vKioqKioqL1xyXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPWUsX193ZWJwYWNrX3JlcXVpcmVfXy5jPXQsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGUsdCxuKXsvKioqKioqL1xyXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm8oZSx0KXx8LyoqKioqKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7LyoqKioqKi9cclxuY29uZmlndXJhYmxlOiExLC8qKioqKiovXHJcbmVudW1lcmFibGU6ITAsLyoqKioqKi9cclxuZ2V0Om59KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKGUpey8qKioqKiovXHJcbnZhciB0PWUmJmUuX19lc01vZHVsZT8vKioqKioqL1xyXG5mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9Oi8qKioqKiovXHJcbmZ1bmN0aW9uKCl7cmV0dXJuIGV9Oy8qKioqKiovXHJcbi8qKioqKiovXHJcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQodCxcImFcIix0KSx0fSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LF9fd2VicGFja19yZXF1aXJlX18ucD1cIlwiLF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTEzMyl9KFsvKiAwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5leHBvcnRzPXt2ZXJzaW9uOlwiMi41LjNcIn07XCJudW1iZXJcIj09dHlwZW9mIF9fZSYmKF9fZT1uKX0sLyogMSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe1xyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxyXG52YXIgbj1lLmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XCJudW1iZXJcIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0sLyogMiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7dmFyIHI9bigyOCkoXCJ3a3NcIiksbz1uKDE5KSxpPW4oMSkuU3ltYm9sLHU9XCJmdW5jdGlvblwiPT10eXBlb2YgaTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiByW2VdfHwocltlXT11JiZpW2VdfHwodT9pOm8pKFwiU3ltYm9sLlwiK2UpKX0pLnN0b3JlPXJ9LC8qIDMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMSksbz1uKDApLGk9bigxNCksdT1uKDgpLHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBjLGEsZixsPWUmcy5GLHA9ZSZzLkcsZD1lJnMuUyx2PWUmcy5QLHk9ZSZzLkIsXz1lJnMuVyxoPXA/bzpvW3RdfHwob1t0XT17fSksYj1oLnByb3RvdHlwZSxnPXA/cjpkP3JbdF06KHJbdF18fHt9KS5wcm90b3R5cGU7cCYmKG49dCk7Zm9yKGMgaW4gbilcclxuLy8gY29udGFpbnMgaW4gbmF0aXZlXHJcbihhPSFsJiZnJiZ2b2lkIDAhPT1nW2NdKSYmYyBpbiBofHwoXHJcbi8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkXHJcbmY9YT9nW2NdOm5bY10sXHJcbi8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlc1xyXG5oW2NdPXAmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGdbY10/bltjXTp5JiZhP2koZixyKTpfJiZnW2NdPT1mP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQsbixyKXtpZih0aGlzIGluc3RhbmNlb2YgZSl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IGU7Y2FzZSAxOnJldHVybiBuZXcgZSh0KTtjYXNlIDI6cmV0dXJuIG5ldyBlKHQsbil9cmV0dXJuIG5ldyBlKHQsbixyKX1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiB0LnByb3RvdHlwZT1lLnByb3RvdHlwZSx0fShmKTp2JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBmP2koRnVuY3Rpb24uY2FsbCxmKTpmLFxyXG4vLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSVcclxudiYmKChoLnZpcnR1YWx8fChoLnZpcnR1YWw9e30pKVtjXT1mLFxyXG4vLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJVxyXG5lJnMuUiYmYiYmIWJbY10mJnUoYixjLGYpKSl9O1xyXG4vLyB0eXBlIGJpdG1hcFxyXG5zLkY9MSwvLyBmb3JjZWRcclxucy5HPTIsLy8gZ2xvYmFsXHJcbnMuUz00LC8vIHN0YXRpY1xyXG5zLlA9OCwvLyBwcm90b1xyXG5zLkI9MTYsLy8gYmluZFxyXG5zLlc9MzIsLy8gd3JhcFxyXG5zLlU9NjQsLy8gc2FmZVxyXG5zLlI9MTI4LC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWBcclxuZS5leHBvcnRzPXN9LC8qIDQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFyKGUpKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBhbiBvYmplY3QhXCIpO3JldHVybiBlfX0sLyogNSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XHJcbi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHlcclxuZS5leHBvcnRzPSFuKDEzKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sLyogNiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZT9udWxsIT09ZTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlfX0sLyogNyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7dmFyIHI9big0KSxvPW4oMzYpLGk9bigyNiksdT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dC5mPW4oNSk/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCxuKXtpZihyKGUpLHQ9aSh0LCEwKSxyKG4pLG8pdHJ5e3JldHVybiB1KGUsdCxuKX1jYXRjaChlKXt9aWYoXCJnZXRcImluIG58fFwic2V0XCJpbiBuKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiBuJiYoZVt0XT1uLnZhbHVlKSxlfX0sLyogOCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7dmFyIHI9big3KSxvPW4oMTgpO2UuZXhwb3J0cz1uKDUpP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm4gci5mKGUsdCxvKDEsbikpfTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGVbdF09bixlfX0sLyogOSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0KX19LC8qIDEwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzXHJcbnZhciByPW4oNTcpLG89bigyMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiByKG8oZSkpfX0sLyogMTEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3QuX19lc01vZHVsZT0hMCx0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfX0sLyogMTIgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3QuX19lc01vZHVsZT0hMDt2YXIgcj1uKDYwKSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0ocik7dC5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSwoMCxvLmRlZmF1bHQpKGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQmJmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksbiYmZGVmaW5lUHJvcGVydGllcyhlLG4pLGV9fSgpfSwvKiAxMyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2goZSl7cmV0dXJuITB9fX0sLyogMTQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1xyXG4vLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmdcclxudmFyIHI9bigxNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuKXtpZihyKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKG4pe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGUuY2FsbCh0LG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIGUuY2FsbCh0LG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLG8pe3JldHVybiBlLmNhbGwodCxuLHIsbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSwvKiAxNSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe3ZhciBuPXt9LnRvU3RyaW5nO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKGUpLnNsaWNlKDgsLTEpfX0sLyogMTYgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9e319LC8qIDE3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiBlfX0sLyogMTggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSwvKiAxOSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe3ZhciBuPTAscj1NYXRoLnJhbmRvbSgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm5cIlN5bWJvbChcIi5jb25jYXQodm9pZCAwPT09ZT9cIlwiOmUsXCIpX1wiLCgrK24rcikudG9TdHJpbmcoMzYpKX19LC8qIDIwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pXHJcbnZhciByPW4oMzcpLG89bigyOSk7ZS5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbihlKXtyZXR1cm4gcihlLG8pfX0sLyogMjEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0KXtcclxuLy8gNy4xLjQgVG9JbnRlZ2VyXHJcbnZhciBuPU1hdGguY2VpbCxyPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/cjpuKShlKX19LC8qIDIyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCl7XHJcbi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpXHJcbmUuZXhwb3J0cz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PWUpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK2UpO3JldHVybiBlfX0sLyogMjMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ITB9LC8qIDI0ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDcpLmYsbz1uKDkpLGk9bigyKShcInRvU3RyaW5nVGFnXCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQsbil7ZSYmIW8oZT1uP2U6ZS5wcm90b3R5cGUsaSkmJnIoZSxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0sLyogMjUgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oNiksbz1uKDEpLmRvY3VtZW50LGk9cihvKSYmcihvLmNyZWF0ZUVsZW1lbnQpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSwvKiAyNiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XHJcbi8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKVxyXG52YXIgcj1uKDYpO1xyXG4vLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZVxyXG4vLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZ1xyXG5lLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighcihlKSlyZXR1cm4gZTt2YXIgbixvO2lmKHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49ZS50b1N0cmluZykmJiFyKG89bi5jYWxsKGUpKSlyZXR1cm4gbztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihuPWUudmFsdWVPZikmJiFyKG89bi5jYWxsKGUpKSlyZXR1cm4gbztpZighdCYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj1lLnRvU3RyaW5nKSYmIXIobz1uLmNhbGwoZSkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX19LC8qIDI3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDI4KShcImtleXNcIiksbz1uKDE5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHJbZV18fChyW2VdPW8oZSkpfX0sLyogMjggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMSksbz1yW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHwocltcIl9fY29yZS1qc19zaGFyZWRfX1wiXT17fSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvW2VdfHwob1tlXT17fSl9fSwvKiAyOSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe1xyXG4vLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzXHJcbmUuZXhwb3J0cz1cImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZlwiLnNwbGl0KFwiLFwiKX0sLyogMzAgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1xyXG4vLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpXHJcbnZhciByPW4oMjIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KHIoZSkpfX0sLyogMzEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1xyXG4vLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSlcclxudmFyIHI9big0KSxvPW4oNjkpLGk9bigyOSksdT1uKDI3KShcIklFX1BST1RPXCIpLHM9ZnVuY3Rpb24oKXt9LGM9ZnVuY3Rpb24oKXtcclxuLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWdcclxudmFyIGUsdD1uKDI1KShcImlmcmFtZVwiKSxyPWkubGVuZ3RoO2Zvcih0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbig0NikuYXBwZW5kQ2hpbGQodCksdC5zcmM9XCJqYXZhc2NyaXB0OlwiLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybFxyXG4vLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0O1xyXG4vLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7XHJcbmU9dC5jb250ZW50V2luZG93LmRvY3VtZW50LGUub3BlbigpLGUud3JpdGUoXCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFxcL3NjcmlwdD5cIiksZS5jbG9zZSgpLGM9ZS5GO3ItLTspZGVsZXRlIGMucHJvdG90eXBlW2lbcl1dO3JldHVybiBjKCl9O2UuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihlLHQpe3ZhciBuO1xyXG4vLyBhZGQgXCJfX3Byb3RvX19cIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsXHJcbnJldHVybiBudWxsIT09ZT8ocy5wcm90b3R5cGU9cihlKSxuPW5ldyBzLHMucHJvdG90eXBlPW51bGwsblt1XT1lKTpuPWMoKSx2b2lkIDA9PT10P246byhuLHQpfX0sLyogMzIgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KGUpe3ZhciB0LG47dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUscil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09bil0aHJvdyBUeXBlRXJyb3IoXCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvclwiKTt0PWUsbj1yfSksdGhpcy5yZXNvbHZlPXIodCksdGhpcy5yZWplY3Q9cihuKX1cclxuLy8gMjUuNC4xLjUgTmV3UHJvbWlzZUNhcGFiaWxpdHkoQylcclxudmFyIHI9bigxNyk7ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlQ2FwYWJpbGl0eShlKX19LC8qIDMzICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXt0LmY9bigyKX0sLyogMzQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMSksbz1uKDApLGk9bigyMyksdT1uKDMzKSxzPW4oNykuZjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9by5TeW1ib2x8fChvLlN5bWJvbD1pP3t9OnIuU3ltYm9sfHx7fSk7XCJfXCI9PWUuY2hhckF0KDApfHxlIGluIHR8fHModCxlLHt2YWx1ZTp1LmYoZSl9KX19LC8qIDM1ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCl7dC5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSwvKiAzNiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7ZS5leHBvcnRzPSFuKDUpJiYhbigxMykoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4oMjUpKFwiZGl2XCIpLFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LC8qIDM3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDkpLG89bigxMCksaT1uKDU4KSghMSksdT1uKDI3KShcIklFX1BST1RPXCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciBuLHM9byhlKSxjPTAsYT1bXTtmb3IobiBpbiBzKW4hPXUmJnIocyxuKSYmYS5wdXNoKG4pO1xyXG4vLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzXHJcbmZvcig7dC5sZW5ndGg+YzspcihzLG49dFtjKytdKSYmKH5pKGEsbil8fGEucHVzaChuKSk7cmV0dXJuIGF9fSwvKiAzOCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XHJcbi8vIDcuMS4xNSBUb0xlbmd0aFxyXG52YXIgcj1uKDIxKSxvPU1hdGgubWluO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP28ocihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0sLyogMzkgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1xyXG4vLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXNcclxudmFyIHI9bigzKSxvPW4oMCksaT1uKDEzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHU9e307dVtlXT10KG4pLHIoci5TK3IuRippKGZ1bmN0aW9uKCl7bigxKX0pLFwiT2JqZWN0XCIsdSl9fSwvKiA0MCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7dmFyIHI9bigzNSksbz1uKDE4KSxpPW4oMTApLHU9bigyNikscz1uKDkpLGM9bigzNiksYT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3QuZj1uKDUpP2E6ZnVuY3Rpb24oZSx0KXtpZihlPWkoZSksdD11KHQsITApLGMpdHJ5e3JldHVybiBhKGUsdCl9Y2F0Y2goZSl7fWlmKHMoZSx0KSlyZXR1cm4gbyghci5mLmNhbGwoZSx0KSxlW3RdKX19LC8qIDQxICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtlLmV4cG9ydHM9e2RlZmF1bHQ6big2NiksX19lc01vZHVsZTohMH19LC8qIDQyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCl7fSwvKiA0MyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big2NykoITApO1xyXG4vLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpXHJcbm4oNDQpKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLC8vIHRhcmdldFxyXG50aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LG49dGhpcy5faTtyZXR1cm4gbj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1yKHQsbiksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LC8qIDQ0ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDIzKSxvPW4oMyksaT1uKDQ1KSx1PW4oOCkscz1uKDkpLGM9bigxNiksYT1uKDY4KSxmPW4oMjQpLGw9big0NykscD1uKDIpKFwiaXRlcmF0b3JcIiksZD0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLHY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuLHksXyxoLGIpe2Eobix0LHkpO3ZhciBnLG0seCx3PWZ1bmN0aW9uKGUpe2lmKCFkJiZlIGluIFApcmV0dXJuIFBbZV07c3dpdGNoKGUpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsZSl9fSxPPXQrXCIgSXRlcmF0b3JcIixTPVwidmFsdWVzXCI9PV8sTT0hMSxQPWUucHJvdG90eXBlLGs9UFtwXXx8UFtcIkBAaXRlcmF0b3JcIl18fF8mJlBbX10sUj0hZCYma3x8dyhfKSxMPV8/Uz93KFwiZW50cmllc1wiKTpSOnZvaWQgMCxqPVwiQXJyYXlcIj09dD9QLmVudHJpZXN8fGs6aztpZihcclxuLy8gRml4IG5hdGl2ZVxyXG5qJiYoeD1sKGouY2FsbChuZXcgZSkpKSE9PU9iamVjdC5wcm90b3R5cGUmJngubmV4dCYmKFxyXG4vLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzXHJcbmYoeCxPLCEwKSxcclxuLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzXHJcbnJ8fHMoeCxwKXx8dSh4LHAsdikpLFxyXG4vLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGXHJcblMmJmsmJlwidmFsdWVzXCIhPT1rLm5hbWUmJihNPSEwLFI9ZnVuY3Rpb24oKXtyZXR1cm4gay5jYWxsKHRoaXMpfSksXHJcbi8vIERlZmluZSBpdGVyYXRvclxyXG5yJiYhYnx8IWQmJiFNJiZQW3BdfHx1KFAscCxSKSxcclxuLy8gUGx1ZyBmb3IgbGlicmFyeVxyXG5jW3RdPVIsY1tPXT12LF8paWYoZz17dmFsdWVzOlM/Ujp3KFwidmFsdWVzXCIpLGtleXM6aD9SOncoXCJrZXlzXCIpLGVudHJpZXM6TH0sYilmb3IobSBpbiBnKW0gaW4gUHx8aShQLG0sZ1ttXSk7ZWxzZSBvKG8uUCtvLkYqKGR8fE0pLHQsZyk7cmV0dXJuIGd9fSwvKiA0NSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7ZS5leHBvcnRzPW4oOCl9LC8qIDQ2ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDEpLmRvY3VtZW50O2UuZXhwb3J0cz1yJiZyLmRvY3VtZW50RWxlbWVudH0sLyogNDcgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1xyXG4vLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKVxyXG52YXIgcj1uKDkpLG89bigzMCksaT1uKDI3KShcIklFX1BST1RPXCIpLHU9T2JqZWN0LnByb3RvdHlwZTtlLmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlKXtyZXR1cm4gZT1vKGUpLHIoZSxpKT9lW2ldOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY29uc3RydWN0b3ImJmUgaW5zdGFuY2VvZiBlLmNvbnN0cnVjdG9yP2UuY29uc3RydWN0b3IucHJvdG90eXBlOmUgaW5zdGFuY2VvZiBPYmplY3Q/dTpudWxsfX0sLyogNDggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe24oNzApO2Zvcih2YXIgcj1uKDEpLG89big4KSxpPW4oMTYpLHU9bigyKShcInRvU3RyaW5nVGFnXCIpLHM9XCJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdFwiLnNwbGl0KFwiLFwiKSxjPTA7YzxzLmxlbmd0aDtjKyspe3ZhciBhPXNbY10sZj1yW2FdLGw9ZiYmZi5wcm90b3R5cGU7bCYmIWxbdV0mJm8obCx1LGEpLGlbYV09aS5BcnJheX19LC8qIDQ5ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKClcclxudmFyIHI9bigxNSksbz1uKDIpKFwidG9TdHJpbmdUYWdcIiksaT1cIkFyZ3VtZW50c1wiPT1yKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksdT1mdW5jdGlvbihlLHQpe3RyeXtyZXR1cm4gZVt0XX1jYXRjaChlKXt9fTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQsbixzO3JldHVybiB2b2lkIDA9PT1lP1wiVW5kZWZpbmVkXCI6bnVsbD09PWU/XCJOdWxsXCI6XCJzdHJpbmdcIj09dHlwZW9mKG49dSh0PU9iamVjdChlKSxvKSk/bjppP3IodCk6XCJPYmplY3RcIj09KHM9cih0KSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY2FsbGVlP1wiQXJndW1lbnRzXCI6c319LC8qIDUwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpXHJcbnZhciByPW4oNCksbz1uKDE3KSxpPW4oMikoXCJzcGVjaWVzXCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciBuLHU9cihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09dXx8dm9pZCAwPT0obj1yKHUpW2ldKT90Om8obil9fSwvKiA1MSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7dmFyIHIsbyxpLHU9bigxNCkscz1uKDc5KSxjPW4oNDYpLGE9bigyNSksZj1uKDEpLGw9Zi5wcm9jZXNzLHA9Zi5zZXRJbW1lZGlhdGUsZD1mLmNsZWFySW1tZWRpYXRlLHY9Zi5NZXNzYWdlQ2hhbm5lbCx5PWYuRGlzcGF0Y2gsXz0wLGg9e30sYj1mdW5jdGlvbigpe3ZhciBlPSt0aGlzO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXHJcbmlmKGguaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PWhbZV07ZGVsZXRlIGhbZV0sdCgpfX0sZz1mdW5jdGlvbihlKXtiLmNhbGwoZS5kYXRhKX07XHJcbi8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZTpcclxucCYmZHx8KHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MTthcmd1bWVudHMubGVuZ3RoPm47KXQucHVzaChhcmd1bWVudHNbbisrXSk7cmV0dXJuIGhbKytfXT1mdW5jdGlvbigpe1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcclxucyhcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LHIoXyksX30sZD1mdW5jdGlvbihlKXtkZWxldGUgaFtlXX0sXHJcbi8vIE5vZGUuanMgMC44LVxyXG5cInByb2Nlc3NcIj09bigxNSkobCk/cj1mdW5jdGlvbihlKXtsLm5leHRUaWNrKHUoYixlLDEpKX06eSYmeS5ub3c/cj1mdW5jdGlvbihlKXt5Lm5vdyh1KGIsZSwxKSl9OnY/KG89bmV3IHYsaT1vLnBvcnQyLG8ucG9ydDEub25tZXNzYWdlPWcscj11KGkucG9zdE1lc3NhZ2UsaSwxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8ocj1mdW5jdGlvbihlKXtmLnBvc3RNZXNzYWdlKGUrXCJcIixcIipcIil9LGYuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixnLCExKSk6cj1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiaW4gYShcInNjcmlwdFwiKT9mdW5jdGlvbihlKXtjLmFwcGVuZENoaWxkKGEoXCJzY3JpcHRcIikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2MucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dCh1KGIsZSwxKSwwKX0pLGUuZXhwb3J0cz17c2V0OnAsY2xlYXI6ZH19LC8qIDUyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm57ZTohMSx2OmUoKX19Y2F0Y2goZSl7cmV0dXJue2U6ITAsdjplfX19fSwvKiA1MyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7dmFyIHI9big0KSxvPW4oNiksaT1uKDMyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZihyKGUpLG8odCkmJnQuY29uc3RydWN0b3I9PT1lKXJldHVybiB0O3ZhciBuPWkuZihlKTtyZXR1cm4oMCxuLnJlc29sdmUpKHQpLG4ucHJvbWlzZX19LC8qIDU0ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIHI9big4OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9big5MSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9XCJmdW5jdGlvblwiPT10eXBlb2YgdS5kZWZhdWx0JiZcInN5bWJvbFwiPT10eXBlb2Ygby5kZWZhdWx0P2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHUuZGVmYXVsdCYmZS5jb25zdHJ1Y3Rvcj09PXUuZGVmYXVsdCYmZSE9PXUuZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgZX07dC5kZWZhdWx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIHUuZGVmYXVsdCYmXCJzeW1ib2xcIj09PXMoby5kZWZhdWx0KT9mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOnMoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB1LmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT11LmRlZmF1bHQmJmUhPT11LmRlZmF1bHQucHJvdG90eXBlP1wic3ltYm9sXCI6dm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOnMoZSl9fSwvKiA1NSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe3QuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSwvKiA1NiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XHJcbi8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTylcclxudmFyIHI9bigzNyksbz1uKDI5KS5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKTt0LmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKGUpe3JldHVybiByKGUsbyl9fSwvKiA1NyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XHJcbi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzXHJcbnZhciByPW4oMTUpO1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXHJcbmUuZXhwb3J0cz1PYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm5cIlN0cmluZ1wiPT1yKGUpP2Uuc3BsaXQoXCJcIik6T2JqZWN0KGUpfX0sLyogNTggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1xyXG4vLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mXHJcbi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzXHJcbnZhciByPW4oMTApLG89bigzOCksaT1uKDU5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbix1KXt2YXIgcyxjPXIodCksYT1vKGMubGVuZ3RoKSxmPWkodSxhKTtcclxuLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXHJcbmlmKGUmJm4hPW4pe2Zvcig7YT5mOylcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxyXG5pZigocz1jW2YrK10pIT1zKXJldHVybiEwfWVsc2UgZm9yKDthPmY7ZisrKWlmKChlfHxmIGluIGMpJiZjW2ZdPT09bilyZXR1cm4gZXx8Znx8MDtyZXR1cm4hZSYmLTF9fX0sLyogNTkgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMjEpLG89TWF0aC5tYXgsaT1NYXRoLm1pbjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1yKGUpLGU8MD9vKGUrdCwwKTppKGUsdCl9fSwvKiA2MCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7ZS5leHBvcnRzPXtkZWZhdWx0Om4oNjEpLF9fZXNNb2R1bGU6ITB9fSwvKiA2MSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7big2Mik7dmFyIHI9bigwKS5PYmplY3Q7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gci5kZWZpbmVQcm9wZXJ0eShlLHQsbil9fSwvKiA2MiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7dmFyIHI9bigzKTtcclxuLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcylcclxucihyLlMrci5GKiFuKDUpLFwiT2JqZWN0XCIse2RlZmluZVByb3BlcnR5Om4oNykuZn0pfSwvKiA2MyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7ZS5leHBvcnRzPXtkZWZhdWx0Om4oODcpLF9fZXNNb2R1bGU6ITB9fSwvKiA2NCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dC5fX2VzTW9kdWxlPSEwO3ZhciByPW4oNTQpLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShyKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXR8fFwib2JqZWN0XCIhPT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOigwLG8uZGVmYXVsdCkodCkpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P2U6dH19LC8qIDY1ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIHI9bigxMDApLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oMTA0KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1uKDU0KSxjPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyk7dC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrKHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjooMCxjLmRlZmF1bHQpKHQpKSk7ZS5wcm90b3R5cGU9KDAsdS5kZWZhdWx0KSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKG8uZGVmYXVsdD8oMCxvLmRlZmF1bHQpKGUsdCk6ZS5fX3Byb3RvX189dCl9fSwvKiA2NiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7big0Miksbig0Myksbig0OCksbig3Myksbig4NCksbig4NSksZS5leHBvcnRzPW4oMCkuUHJvbWlzZX0sLyogNjcgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMjEpLG89bigyMik7XHJcbi8vIHRydWUgIC0+IFN0cmluZyNhdFxyXG4vLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXRcclxuZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe3ZhciBpLHUscz1TdHJpbmcobyh0KSksYz1yKG4pLGE9cy5sZW5ndGg7cmV0dXJuIGM8MHx8Yz49YT9lP1wiXCI6dm9pZCAwOihpPXMuY2hhckNvZGVBdChjKSxpPDU1Mjk2fHxpPjU2MzE5fHxjKzE9PT1hfHwodT1zLmNoYXJDb2RlQXQoYysxKSk8NTYzMjB8fHU+NTczNDM/ZT9zLmNoYXJBdChjKTppOmU/cy5zbGljZShjLGMrMik6dS01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2KX19fSwvKiA2OCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9bigzMSksbz1uKDE4KSxpPW4oMjQpLHU9e307XHJcbi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpXHJcbm4oOCkodSxuKDIpKFwiaXRlcmF0b3JcIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLGUuZXhwb3J0cz1mdW5jdGlvbihlLHQsbil7ZS5wcm90b3R5cGU9cih1LHtuZXh0Om8oMSxuKX0pLGkoZSx0K1wiIEl0ZXJhdG9yXCIpfX0sLyogNjkgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oNyksbz1uKDQpLGk9bigyMCk7ZS5leHBvcnRzPW4oNSk/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSx0KXtvKGUpO2Zvcih2YXIgbix1PWkodCkscz11Lmxlbmd0aCxjPTA7cz5jOylyLmYoZSxuPXVbYysrXSx0W25dKTtyZXR1cm4gZX19LC8qIDcwICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDcxKSxvPW4oNzIpLGk9bigxNiksdT1uKDEwKTtcclxuLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKVxyXG4vLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKVxyXG4vLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpXHJcbi8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKVxyXG5lLmV4cG9ydHM9big0NCkoQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD11KGUpLC8vIHRhcmdldFxyXG50aGlzLl9pPTAsLy8gbmV4dCBpbmRleFxyXG50aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2ssbj10aGlzLl9pKys7cmV0dXJuIWV8fG4+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKTpcImtleXNcIj09dD9vKDAsbik6XCJ2YWx1ZXNcIj09dD9vKDAsZVtuXSk6bygwLFtuLGVbbl1dKX0sXCJ2YWx1ZXNcIiksXHJcbi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNylcclxuaS5Bcmd1bWVudHM9aS5BcnJheSxyKFwia2V5c1wiKSxyKFwidmFsdWVzXCIpLHIoXCJlbnRyaWVzXCIpfSwvKiA3MSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbigpe319LC8qIDcyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0sLyogNzMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciByLG8saSx1LHM9bigyMyksYz1uKDEpLGE9bigxNCksZj1uKDQ5KSxsPW4oMykscD1uKDYpLGQ9bigxNyksdj1uKDc0KSx5PW4oNzUpLF89big1MCksaD1uKDUxKS5zZXQsYj1uKDgwKSgpLGc9bigzMiksbT1uKDUyKSx4PW4oNTMpLHc9Yy5UeXBlRXJyb3IsTz1jLnByb2Nlc3MsUz1jLlByb21pc2UsTT1cInByb2Nlc3NcIj09ZihPKSxQPWZ1bmN0aW9uKCl7fSxrPW89Zy5mLFI9ISFmdW5jdGlvbigpe3RyeXtcclxuLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0XHJcbnZhciBlPVMucmVzb2x2ZSgxKSx0PShlLmNvbnN0cnVjdG9yPXt9KVtuKDIpKFwic3BlY2llc1wiKV09ZnVuY3Rpb24oZSl7ZShQLFApfTtcclxuLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdFxyXG5yZXR1cm4oTXx8XCJmdW5jdGlvblwiPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmZS50aGVuKFApaW5zdGFuY2VvZiB0fWNhdGNoKGUpe319KCksTD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4hKCFwKGUpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZih0PWUudGhlbikpJiZ0fSxqPWZ1bmN0aW9uKGUsdCl7aWYoIWUuX24pe2UuX249ITA7dmFyIG49ZS5fYztiKGZ1bmN0aW9uKCl7Zm9yKHZhciByPWUuX3Ysbz0xPT1lLl9zLGk9MDtuLmxlbmd0aD5pOykhZnVuY3Rpb24odCl7dmFyIG4saSx1PW8/dC5vazp0LmZhaWwscz10LnJlc29sdmUsYz10LnJlamVjdCxhPXQuZG9tYWluO3RyeXt1PyhvfHwoMj09ZS5faCYmVChlKSxlLl9oPTEpLCEwPT09dT9uPXI6KGEmJmEuZW50ZXIoKSxuPXUociksYSYmYS5leGl0KCkpLG49PT10LnByb21pc2U/Yyh3KFwiUHJvbWlzZS1jaGFpbiBjeWNsZVwiKSk6KGk9TChuKSk/aS5jYWxsKG4scyxjKTpzKG4pKTpjKHIpfWNhdGNoKGUpe2MoZSl9fShuW2krK10pOy8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoXHJcbmUuX2M9W10sZS5fbj0hMSx0JiYhZS5faCYmRChlKX0pfX0sRD1mdW5jdGlvbihlKXtoLmNhbGwoYyxmdW5jdGlvbigpe3ZhciB0LG4scixvPWUuX3YsaT1FKGUpO2lmKGkmJih0PW0oZnVuY3Rpb24oKXtNP08uZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLG8sZSk6KG49Yy5vbnVuaGFuZGxlZHJlamVjdGlvbik/bih7cHJvbWlzZTplLHJlYXNvbjpvfSk6KHI9Yy5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcihcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLG8pfSksXHJcbi8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkXHJcbmUuX2g9TXx8RShlKT8yOjEpLGUuX2E9dm9pZCAwLGkmJnQuZSl0aHJvdyB0LnZ9KX0sRT1mdW5jdGlvbihlKXtyZXR1cm4gMSE9PWUuX2gmJjA9PT0oZS5fYXx8ZS5fYykubGVuZ3RofSxUPWZ1bmN0aW9uKGUpe2guY2FsbChjLGZ1bmN0aW9uKCl7dmFyIHQ7TT9PLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsZSk6KHQ9Yy5vbnJlamVjdGlvbmhhbmRsZWQpJiZ0KHtwcm9taXNlOmUscmVhc29uOmUuX3Z9KX0pfSxxPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fZHx8KHQuX2Q9ITAsdD10Ll93fHx0LC8vIHVud3JhcFxyXG50Ll92PWUsdC5fcz0yLHQuX2F8fCh0Ll9hPXQuX2Muc2xpY2UoKSksaih0LCEwKSl9LEE9ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzO2lmKCFuLl9kKXtuLl9kPSEwLG49bi5fd3x8bjsvLyB1bndyYXBcclxudHJ5e2lmKG49PT1lKXRocm93IHcoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTsodD1MKGUpKT9iKGZ1bmN0aW9uKCl7dmFyIHI9e193Om4sX2Q6ITF9Oy8vIHdyYXBcclxudHJ5e3QuY2FsbChlLGEoQSxyLDEpLGEocSxyLDEpKX1jYXRjaChlKXtxLmNhbGwocixlKX19KToobi5fdj1lLG4uX3M9MSxqKG4sITEpKX1jYXRjaChlKXtxLmNhbGwoe193Om4sX2Q6ITF9LGUpfX19O1xyXG4vLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbFxyXG5SfHwoXHJcbi8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpXHJcblM9ZnVuY3Rpb24oZSl7dih0aGlzLFMsXCJQcm9taXNlXCIsXCJfaFwiKSxkKGUpLHIuY2FsbCh0aGlzKTt0cnl7ZShhKEEsdGhpcywxKSxhKHEsdGhpcywxKSl9Y2F0Y2goZSl7cS5jYWxsKHRoaXMsZSl9fSxcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXHJcbnI9ZnVuY3Rpb24oZSl7dGhpcy5fYz1bXSwvLyA8LSBhd2FpdGluZyByZWFjdGlvbnNcclxudGhpcy5fYT12b2lkIDAsLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnNcclxudGhpcy5fcz0wLC8vIDwtIHN0YXRlXHJcbnRoaXMuX2Q9ITEsLy8gPC0gZG9uZVxyXG50aGlzLl92PXZvaWQgMCwvLyA8LSB2YWx1ZVxyXG50aGlzLl9oPTAsLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWRcclxudGhpcy5fbj0hMX0sci5wcm90b3R5cGU9big4MSkoUy5wcm90b3R5cGUse1xyXG4vLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKVxyXG50aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIG49ayhfKHRoaXMsUykpO3JldHVybiBuLm9rPVwiZnVuY3Rpb25cIiE9dHlwZW9mIGV8fGUsbi5mYWlsPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQsbi5kb21haW49TT9PLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKG4pLHRoaXMuX2EmJnRoaXMuX2EucHVzaChuKSx0aGlzLl9zJiZqKHRoaXMsITEpLG4ucHJvbWlzZX0sXHJcbi8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpXHJcbmNhdGNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pLGk9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgcjt0aGlzLnByb21pc2U9ZSx0aGlzLnJlc29sdmU9YShBLGUsMSksdGhpcy5yZWplY3Q9YShxLGUsMSl9LGcuZj1rPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09U3x8ZT09PXU/bmV3IGkoZSk6byhlKX0pLGwobC5HK2wuVytsLkYqIVIse1Byb21pc2U6U30pLG4oMjQpKFMsXCJQcm9taXNlXCIpLG4oODIpKFwiUHJvbWlzZVwiKSx1PW4oMCkuUHJvbWlzZSxcclxuLy8gc3RhdGljc1xyXG5sKGwuUytsLkYqIVIsXCJQcm9taXNlXCIse1xyXG4vLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKVxyXG5yZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9ayh0aGlzKTtyZXR1cm4oMCx0LnJlamVjdCkoZSksdC5wcm9taXNlfX0pLGwobC5TK2wuRiooc3x8IVIpLFwiUHJvbWlzZVwiLHtcclxuLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpXHJcbnJlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIHgocyYmdGhpcz09PXU/Uzp0aGlzLGUpfX0pLGwobC5TK2wuRiohKFImJm4oODMpKGZ1bmN0aW9uKGUpe1MuYWxsKGUpLmNhdGNoKFApfSkpLFwiUHJvbWlzZVwiLHtcclxuLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpXHJcbmFsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ayh0KSxyPW4ucmVzb2x2ZSxvPW4ucmVqZWN0LGk9bShmdW5jdGlvbigpe3ZhciBuPVtdLGk9MCx1PTE7eShlLCExLGZ1bmN0aW9uKGUpe3ZhciBzPWkrKyxjPSExO24ucHVzaCh2b2lkIDApLHUrKyx0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXtjfHwoYz0hMCxuW3NdPWUsLS11fHxyKG4pKX0sbyl9KSwtLXV8fHIobil9KTtyZXR1cm4gaS5lJiZvKGkudiksbi5wcm9taXNlfSxcclxuLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKVxyXG5yYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1rKHQpLHI9bi5yZWplY3Qsbz1tKGZ1bmN0aW9uKCl7eShlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKG4ucmVzb2x2ZSxyKX0pfSk7cmV0dXJuIG8uZSYmcihvLnYpLG4ucHJvbWlzZX19KX0sLyogNzQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LG4scil7aWYoIShlIGluc3RhbmNlb2YgdCl8fHZvaWQgMCE9PXImJnIgaW4gZSl0aHJvdyBUeXBlRXJyb3IobitcIjogaW5jb3JyZWN0IGludm9jYXRpb24hXCIpO3JldHVybiBlfX0sLyogNzUgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMTQpLG89big3NiksaT1uKDc3KSx1PW4oNCkscz1uKDM4KSxjPW4oNzgpLGE9e30sZj17fSx0PWUuZXhwb3J0cz1mdW5jdGlvbihlLHQsbixsLHApe3ZhciBkLHYseSxfLGg9cD9mdW5jdGlvbigpe3JldHVybiBlfTpjKGUpLGI9cihuLGwsdD8yOjEpLGc9MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBoKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7XHJcbi8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvclxyXG5pZihpKGgpKXtmb3IoZD1zKGUubGVuZ3RoKTtkPmc7ZysrKWlmKChfPXQ/Yih1KHY9ZVtnXSlbMF0sdlsxXSk6YihlW2ddKSk9PT1hfHxfPT09ZilyZXR1cm4gX31lbHNlIGZvcih5PWguY2FsbChlKTshKHY9eS5uZXh0KCkpLmRvbmU7KWlmKChfPW8oeSxiLHYudmFsdWUsdCkpPT09YXx8Xz09PWYpcmV0dXJuIF99O3QuQlJFQUs9YSx0LlJFVFVSTj1mfSwvKiA3NiAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XHJcbi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3JcclxudmFyIHI9big0KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LG4sbyl7dHJ5e3JldHVybiBvP3QocihuKVswXSxuWzFdKTp0KG4pfWNhdGNoKHQpe3ZhciBpPWUucmV0dXJuO3Rocm93IHZvaWQgMCE9PWkmJnIoaS5jYWxsKGUpKSx0fX19LC8qIDc3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvclxyXG52YXIgcj1uKDE2KSxvPW4oMikoXCJpdGVyYXRvclwiKSxpPUFycmF5LnByb3RvdHlwZTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihyLkFycmF5PT09ZXx8aVtvXT09PWUpfX0sLyogNzggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oNDkpLG89bigyKShcIml0ZXJhdG9yXCIpLGk9bigxNik7ZS5leHBvcnRzPW4oMCkuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT1lKXJldHVybiBlW29dfHxlW1wiQEBpdGVyYXRvclwiXXx8aVtyKGUpXX19LC8qIDc5ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCl7XHJcbi8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNVxyXG5lLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXZvaWQgMD09PW47c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHI/ZSgpOmUuY2FsbChuKTtjYXNlIDE6cmV0dXJuIHI/ZSh0WzBdKTplLmNhbGwobix0WzBdKTtjYXNlIDI6cmV0dXJuIHI/ZSh0WzBdLHRbMV0pOmUuY2FsbChuLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiByP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChuLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIHI/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwobix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShuLHQpfX0sLyogODAgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMSksbz1uKDUxKS5zZXQsaT1yLk11dGF0aW9uT2JzZXJ2ZXJ8fHIuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXIucHJvY2VzcyxzPXIuUHJvbWlzZSxjPVwicHJvY2Vzc1wiPT1uKDE1KSh1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LG4sYT1mdW5jdGlvbigpe3ZhciByLG87Zm9yKGMmJihyPXUuZG9tYWluKSYmci5leGl0KCk7ZTspe289ZS5mbixlPWUubmV4dDt0cnl7bygpfWNhdGNoKHIpe3Rocm93IGU/bigpOnQ9dm9pZCAwLHJ9fXQ9dm9pZCAwLHImJnIuZW50ZXIoKX07XHJcbi8vIE5vZGUuanNcclxuaWYoYyluPWZ1bmN0aW9uKCl7dS5uZXh0VGljayhhKX07ZWxzZSBpZighaXx8ci5uYXZpZ2F0b3ImJnIubmF2aWdhdG9yLnN0YW5kYWxvbmUpaWYocyYmcy5yZXNvbHZlKXt2YXIgZj1zLnJlc29sdmUoKTtuPWZ1bmN0aW9uKCl7Zi50aGVuKGEpfX1lbHNlIG49ZnVuY3Rpb24oKXtcclxuLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKVxyXG5vLmNhbGwocixhKX07ZWxzZXt2YXIgbD0hMCxwPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO25ldyBpKGEpLm9ic2VydmUocCx7Y2hhcmFjdGVyRGF0YTohMH0pLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XHJcbm49ZnVuY3Rpb24oKXtwLmRhdGE9bD0hbH19cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXtmbjpyLG5leHQ6dm9pZCAwfTt0JiYodC5uZXh0PW8pLGV8fChlPW8sbigpKSx0PW99fX0sLyogODEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oOCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIG8gaW4gdCluJiZlW29dP2Vbb109dFtvXTpyKGUsbyx0W29dKTtyZXR1cm4gZX19LC8qIDgyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDEpLG89bigwKSxpPW4oNyksdT1uKDUpLHM9bigyKShcInNwZWNpZXNcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIG9bZV0/b1tlXTpyW2VdO3UmJnQmJiF0W3NdJiZpLmYodCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSwvKiA4MyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7dmFyIHI9bigyKShcIml0ZXJhdG9yXCIpLG89ITE7dHJ5e3ZhciBpPVs3XVtyXSgpO2kucmV0dXJuPWZ1bmN0aW9uKCl7bz0hMH0sXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsXHJcbkFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChlKXt9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciBuPSExO3RyeXt2YXIgaT1bN10sdT1pW3JdKCk7dS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6bj0hMH19LGlbcl09ZnVuY3Rpb24oKXtyZXR1cm4gdX0sZShpKX1jYXRjaChlKXt9cmV0dXJuIG59fSwvKiA4NCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtZmluYWxseVxyXG52YXIgcj1uKDMpLG89bigwKSxpPW4oMSksdT1uKDUwKSxzPW4oNTMpO3Ioci5QK3IuUixcIlByb21pc2VcIix7ZmluYWxseTpmdW5jdGlvbihlKXt2YXIgdD11KHRoaXMsby5Qcm9taXNlfHxpLlByb21pc2UpLG49XCJmdW5jdGlvblwiPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKG4/ZnVuY3Rpb24obil7cmV0dXJuIHModCxlKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbn0pfTplLG4/ZnVuY3Rpb24obil7cmV0dXJuIHModCxlKCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBufSl9OmUpfX0pfSwvKiA4NSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7XHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtdHJ5XHJcbnZhciByPW4oMyksbz1uKDMyKSxpPW4oNTIpO3Ioci5TLFwiUHJvbWlzZVwiLHt0cnk6ZnVuY3Rpb24oZSl7dmFyIHQ9by5mKHRoaXMpLG49aShlKTtyZXR1cm4obi5lP3QucmVqZWN0OnQucmVzb2x2ZSkobi52KSx0LnByb21pc2V9fSl9LC8qIDg2ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixvOy8qXHJcbiogbG9nbGV2ZWwgLSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWxcclxuKlxyXG4qIENvcHlyaWdodCAoYykgMjAxMyBUaW0gUGVycnlcclxuKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiovXHJcbiFmdW5jdGlvbihpLHUpe1widXNlIHN0cmljdFwiO3I9dSx2b2lkIDAhPT0obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByP3IuY2FsbCh0LG4sdCxlKTpyKSYmKGUuZXhwb3J0cz1vKX0oMCxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO1xyXG4vLyBDcm9zcy1icm93c2VyIGJpbmQgZXF1aXZhbGVudCB0aGF0IHdvcmtzIGF0IGxlYXN0IGJhY2sgdG8gSUU2XHJcbmZ1bmN0aW9uIGJpbmRNZXRob2QoZSx0KXt2YXIgbj1lW3RdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4uYmluZClyZXR1cm4gbi5iaW5kKGUpO3RyeXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChuLGUpfWNhdGNoKHQpe1xyXG4vLyBNaXNzaW5nIGJpbmQgc2hpbSBvciBJRTggKyBNb2Rlcm5penIsIGZhbGxiYWNrIHRvIHdyYXBwaW5nXHJcbnJldHVybiBmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkobixbZSxhcmd1bWVudHNdKX19fVxyXG4vLyBCdWlsZCB0aGUgYmVzdCBsb2dnaW5nIG1ldGhvZCBwb3NzaWJsZSBmb3IgdGhpcyBlbnZcclxuLy8gV2hlcmV2ZXIgcG9zc2libGUgd2Ugd2FudCB0byBiaW5kLCBub3Qgd3JhcCwgdG8gcHJlc2VydmUgc3RhY2sgdHJhY2VzXHJcbmZ1bmN0aW9uIHJlYWxNZXRob2Qobil7cmV0dXJuXCJkZWJ1Z1wiPT09biYmKG49XCJsb2dcIiksdHlwZW9mIGNvbnNvbGUhPT10JiYodm9pZCAwIT09Y29uc29sZVtuXT9iaW5kTWV0aG9kKGNvbnNvbGUsbik6dm9pZCAwIT09Y29uc29sZS5sb2c/YmluZE1ldGhvZChjb25zb2xlLFwibG9nXCIpOmUpfVxyXG4vLyBUaGVzZSBwcml2YXRlIGZ1bmN0aW9ucyBhbHdheXMgbmVlZCBgdGhpc2AgdG8gYmUgc2V0IHByb3Blcmx5XHJcbmZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyh0LHIpey8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXHJcbmZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXt2YXIgaT1uW29dO3RoaXNbaV09bzx0P2U6dGhpcy5tZXRob2RGYWN0b3J5KGksdCxyKX1cclxuLy8gRGVmaW5lIGxvZy5sb2cgYXMgYW4gYWxpYXMgZm9yIGxvZy5kZWJ1Z1xyXG50aGlzLmxvZz10aGlzLmRlYnVnfVxyXG4vLyBJbiBvbGQgSUUgdmVyc2lvbnMsIHRoZSBjb25zb2xlIGlzbid0IHByZXNlbnQgdW50aWwgeW91IGZpcnN0IG9wZW4gaXQuXHJcbi8vIFdlIGJ1aWxkIHJlYWxNZXRob2QoKSByZXBsYWNlbWVudHMgaGVyZSB0aGF0IHJlZ2VuZXJhdGUgbG9nZ2luZyBtZXRob2RzXHJcbmZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMoZSxuLHIpe3JldHVybiBmdW5jdGlvbigpe3R5cGVvZiBjb25zb2xlIT09dCYmKHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHRoaXMsbixyKSx0aGlzW2VdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fVxyXG4vLyBCeSBkZWZhdWx0LCB3ZSB1c2UgY2xvc2VseSBib3VuZCByZWFsIG1ldGhvZHMgd2hlcmV2ZXIgcG9zc2libGUsIGFuZFxyXG4vLyBvdGhlcndpc2Ugd2Ugd2FpdCBmb3IgYSBjb25zb2xlIHRvIGFwcGVhciwgYW5kIHRoZW4gdHJ5IGFnYWluLlxyXG5mdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeShlLHQsbil7Lypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cclxucmV0dXJuIHJlYWxNZXRob2QoZSl8fGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIExvZ2dlcihlLHIsbyl7ZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZShlKXt2YXIgcj0obltlXXx8XCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtpZih0eXBlb2Ygd2luZG93IT09dCl7XHJcbi8vIFVzZSBsb2NhbFN0b3JhZ2UgaWYgYXZhaWxhYmxlXHJcbnRyeXtyZXR1cm4gdm9pZCh3aW5kb3cubG9jYWxTdG9yYWdlW3NdPXIpfWNhdGNoKGUpe31cclxuLy8gVXNlIHNlc3Npb24gY29va2llIGFzIGZhbGxiYWNrXHJcbnRyeXt3aW5kb3cuZG9jdW1lbnQuY29va2llPWVuY29kZVVSSUNvbXBvbmVudChzKStcIj1cIityK1wiO1wifWNhdGNoKGUpe319fWZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCl7dmFyIGU7aWYodHlwZW9mIHdpbmRvdyE9PXQpe3RyeXtlPXdpbmRvdy5sb2NhbFN0b3JhZ2Vbc119Y2F0Y2goZSl7fVxyXG4vLyBGYWxsYmFjayB0byBjb29raWVzIGlmIGxvY2FsIHN0b3JhZ2UgZ2l2ZXMgdXMgbm90aGluZ1xyXG5pZih0eXBlb2YgZT09PXQpdHJ5e3ZhciBuPXdpbmRvdy5kb2N1bWVudC5jb29raWUscj1uLmluZGV4T2YoZW5jb2RlVVJJQ29tcG9uZW50KHMpK1wiPVwiKTstMSE9PXImJihlPS9eKFteO10rKS8uZXhlYyhuLnNsaWNlKHIpKVsxXSl9Y2F0Y2goZSl7fVxyXG4vLyBJZiB0aGUgc3RvcmVkIGxldmVsIGlzIG5vdCB2YWxpZCwgdHJlYXQgaXQgYXMgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxyXG5yZXR1cm4gdm9pZCAwPT09dS5sZXZlbHNbZV0mJihlPXZvaWQgMCksZX19dmFyIGksdT10aGlzLHM9XCJsb2dsZXZlbFwiO2UmJihzKz1cIjpcIitlKSwvKlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBQdWJsaWMgbG9nZ2VyIEFQSSAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwgZm9yIGRldGFpbHNcclxuICAgICAgICpcclxuICAgICAgICovXHJcbnUubmFtZT1lLHUubGV2ZWxzPXtUUkFDRTowLERFQlVHOjEsSU5GTzoyLFdBUk46MyxFUlJPUjo0LFNJTEVOVDo1fSx1Lm1ldGhvZEZhY3Rvcnk9b3x8ZGVmYXVsdE1ldGhvZEZhY3RvcnksdS5nZXRMZXZlbD1mdW5jdGlvbigpe3JldHVybiBpfSx1LnNldExldmVsPWZ1bmN0aW9uKG4scil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4mJnZvaWQgMCE9PXUubGV2ZWxzW24udG9VcHBlckNhc2UoKV0mJihuPXUubGV2ZWxzW24udG9VcHBlckNhc2UoKV0pLCEoXCJudW1iZXJcIj09dHlwZW9mIG4mJm4+PTAmJm48PXUubGV2ZWxzLlNJTEVOVCkpdGhyb3dcImxvZy5zZXRMZXZlbCgpIGNhbGxlZCB3aXRoIGludmFsaWQgbGV2ZWw6IFwiK247aWYoaT1uLCExIT09ciYmLy8gZGVmYXVsdHMgdG8gdHJ1ZVxyXG5wZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKG4pLHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHUsbixlKSx0eXBlb2YgY29uc29sZT09PXQmJm48dS5sZXZlbHMuU0lMRU5UKXJldHVyblwiTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmdcIn0sdS5zZXREZWZhdWx0TGV2ZWw9ZnVuY3Rpb24oZSl7Z2V0UGVyc2lzdGVkTGV2ZWwoKXx8dS5zZXRMZXZlbChlLCExKX0sdS5lbmFibGVBbGw9ZnVuY3Rpb24oZSl7dS5zZXRMZXZlbCh1LmxldmVscy5UUkFDRSxlKX0sdS5kaXNhYmxlQWxsPWZ1bmN0aW9uKGUpe3Uuc2V0TGV2ZWwodS5sZXZlbHMuU0lMRU5ULGUpfTtcclxuLy8gSW5pdGlhbGl6ZSB3aXRoIHRoZSByaWdodCBsZXZlbFxyXG52YXIgYz1nZXRQZXJzaXN0ZWRMZXZlbCgpO251bGw9PWMmJihjPW51bGw9PXI/XCJXQVJOXCI6ciksdS5zZXRMZXZlbChjLCExKX1cclxuLy8gU2xpZ2h0bHkgZHViaW91cyB0cmlja3MgdG8gY3V0IGRvd24gbWluaW1pemVkIGZpbGUgc2l6ZVxyXG52YXIgZT1mdW5jdGlvbigpe30sdD1cInVuZGVmaW5lZFwiLG49W1widHJhY2VcIixcImRlYnVnXCIsXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiXSxyPW5ldyBMb2dnZXIsbz17fTtyLmdldExvZ2dlcj1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8XCJcIj09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci5cIik7dmFyIHQ9b1tlXTtyZXR1cm4gdHx8KHQ9b1tlXT1uZXcgTG9nZ2VyKGUsci5nZXRMZXZlbCgpLHIubWV0aG9kRmFjdG9yeSkpLHR9O1xyXG4vLyBHcmFiIHRoZSBjdXJyZW50IGdsb2JhbCBsb2cgdmFyaWFibGUgaW4gY2FzZSBvZiBvdmVyd3JpdGVcclxudmFyIGk9dHlwZW9mIHdpbmRvdyE9PXQ/d2luZG93LmxvZzp2b2lkIDA7cmV0dXJuIHIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT09dCYmd2luZG93LmxvZz09PXImJih3aW5kb3cubG9nPWkpLHJ9LHIuZ2V0TG9nZ2Vycz1mdW5jdGlvbigpe3JldHVybiBvfSxyfSl9LC8qIDg3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtuKDg4KSxlLmV4cG9ydHM9bigwKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LC8qIDg4ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pXHJcbnZhciByPW4oMzApLG89big0Nyk7bigzOSkoXCJnZXRQcm90b3R5cGVPZlwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBvKHIoZSkpfX0pfSwvKiA4OSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7ZS5leHBvcnRzPXtkZWZhdWx0Om4oOTApLF9fZXNNb2R1bGU6ITB9fSwvKiA5MCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7big0Myksbig0OCksZS5leHBvcnRzPW4oMzMpLmYoXCJpdGVyYXRvclwiKX0sLyogOTEgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe2UuZXhwb3J0cz17ZGVmYXVsdDpuKDkyKSxfX2VzTW9kdWxlOiEwfX0sLyogOTIgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe24oOTMpLG4oNDIpLG4oOTgpLG4oOTkpLGUuZXhwb3J0cz1uKDApLlN5bWJvbH0sLyogOTMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO1xyXG4vLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltXHJcbnZhciByPW4oMSksbz1uKDkpLGk9big1KSx1PW4oMykscz1uKDQ1KSxjPW4oOTQpLktFWSxhPW4oMTMpLGY9bigyOCksbD1uKDI0KSxwPW4oMTkpLGQ9bigyKSx2PW4oMzMpLHk9bigzNCksXz1uKDk1KSxoPW4oOTYpLGI9big0KSxnPW4oNiksbT1uKDEwKSx4PW4oMjYpLHc9bigxOCksTz1uKDMxKSxTPW4oOTcpLE09big0MCksUD1uKDcpLGs9bigyMCksUj1NLmYsTD1QLmYsaj1TLmYsRD1yLlN5bWJvbCxFPXIuSlNPTixUPUUmJkUuc3RyaW5naWZ5LHE9ZChcIl9oaWRkZW5cIiksQT1kKFwidG9QcmltaXRpdmVcIiksQz17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxJPWYoXCJzeW1ib2wtcmVnaXN0cnlcIiksRj1mKFwic3ltYm9sc1wiKSxOPWYoXCJvcC1zeW1ib2xzXCIpLEI9T2JqZWN0LnByb3RvdHlwZSxXPVwiZnVuY3Rpb25cIj09dHlwZW9mIEQsRz1yLlFPYmplY3QsVT0hR3x8IUcucHJvdG90eXBlfHwhRy5wcm90b3R5cGUuZmluZENoaWxkLFY9aSYmYShmdW5jdGlvbigpe3JldHVybiA3IT1PKEwoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBMKHRoaXMsXCJhXCIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVIoQix0KTtyJiZkZWxldGUgQlt0XSxMKGUsdCxuKSxyJiZlIT09QiYmTChCLHQscil9OkwsSD1mdW5jdGlvbihlKXt2YXIgdD1GW2VdPU8oRC5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUsdH0sSz1XJiZcInN5bWJvbFwiPT10eXBlb2YgRC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBEfSxKPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT09PUImJkooTix0LG4pLGIoZSksdD14KHQsITApLGIobiksbyhGLHQpPyhuLmVudW1lcmFibGU/KG8oZSxxKSYmZVtxXVt0XSYmKGVbcV1bdF09ITEpLG49TyhuLHtlbnVtZXJhYmxlOncoMCwhMSl9KSk6KG8oZSxxKXx8TChlLHEsdygxLHt9KSksZVtxXVt0XT0hMCksVihlLHQsbikpOkwoZSx0LG4pfSxZPWZ1bmN0aW9uKGUsdCl7YihlKTtmb3IodmFyIG4scj1fKHQ9bSh0KSksbz0wLGk9ci5sZW5ndGg7aT5vOylKKGUsbj1yW28rK10sdFtuXSk7cmV0dXJuIGV9LHo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9PKGUpOlkoTyhlKSx0KX0sUT1mdW5jdGlvbihlKXt2YXIgdD1DLmNhbGwodGhpcyxlPXgoZSwhMCkpO3JldHVybiEodGhpcz09PUImJm8oRixlKSYmIW8oTixlKSkmJighKHR8fCFvKHRoaXMsZSl8fCFvKEYsZSl8fG8odGhpcyxxKSYmdGhpc1txXVtlXSl8fHQpfSxYPWZ1bmN0aW9uKGUsdCl7aWYoZT1tKGUpLHQ9eCh0LCEwKSxlIT09Qnx8IW8oRix0KXx8byhOLHQpKXt2YXIgbj1SKGUsdCk7cmV0dXJuIW58fCFvKEYsdCl8fG8oZSxxKSYmZVtxXVt0XXx8KG4uZW51bWVyYWJsZT0hMCksbn19LFo9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49aihtKGUpKSxyPVtdLGk9MDtuLmxlbmd0aD5pOylvKEYsdD1uW2krK10pfHx0PT1xfHx0PT1jfHxyLnB1c2godCk7cmV0dXJuIHJ9LCQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49ZT09PUIscj1qKG4/TjptKGUpKSxpPVtdLHU9MDtyLmxlbmd0aD51OykhbyhGLHQ9clt1KytdKXx8biYmIW8oQix0KXx8aS5wdXNoKEZbdF0pO3JldHVybiBpfTtcclxuLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pXHJcbld8fChEPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIEQpdGhyb3cgVHlwZUVycm9yKFwiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIVwiKTt2YXIgZT1wKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSx0PWZ1bmN0aW9uKG4pe3RoaXM9PT1CJiZ0LmNhbGwoTixuKSxvKHRoaXMscSkmJm8odGhpc1txXSxlKSYmKHRoaXNbcV1bZV09ITEpLFYodGhpcyxlLHcoMSxuKSl9O3JldHVybiBpJiZVJiZWKEIsZSx7Y29uZmlndXJhYmxlOiEwLHNldDp0fSksSChlKX0scyhELnByb3RvdHlwZSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLE0uZj1YLFAuZj1KLG4oNTYpLmY9Uy5mPVosbigzNSkuZj1RLG4oNTUpLmY9JCxpJiYhbigyMykmJnMoQixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsUSwhMCksdi5mPWZ1bmN0aW9uKGUpe3JldHVybiBIKGQoZSkpfSksdSh1LkcrdS5XK3UuRiohVyx7U3ltYm9sOkR9KTtmb3IodmFyIGVlPVwiaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXNcIi5zcGxpdChcIixcIiksdGU9MDtlZS5sZW5ndGg+dGU7KWQoZWVbdGUrK10pO2Zvcih2YXIgbmU9ayhkLnN0b3JlKSxyZT0wO25lLmxlbmd0aD5yZTspeShuZVtyZSsrXSk7dSh1LlMrdS5GKiFXLFwiU3ltYm9sXCIse1xyXG4vLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSlcclxuZm9yOmZ1bmN0aW9uKGUpe3JldHVybiBvKEksZSs9XCJcIik/SVtlXTpJW2VdPUQoZSl9LFxyXG4vLyAxOS40LjIuNSBTeW1ib2wua2V5Rm9yKHN5bSlcclxua2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKCFLKGUpKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBhIHN5bWJvbCFcIik7Zm9yKHZhciB0IGluIEkpaWYoSVt0XT09PWUpcmV0dXJuIHR9LHVzZVNldHRlcjpmdW5jdGlvbigpe1U9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe1U9ITF9fSksdSh1LlMrdS5GKiFXLFwiT2JqZWN0XCIse1xyXG4vLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pXHJcbmNyZWF0ZTp6LFxyXG4vLyAxOS4xLjIuNCBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcylcclxuZGVmaW5lUHJvcGVydHk6SixcclxuLy8gMTkuMS4yLjMgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcylcclxuZGVmaW5lUHJvcGVydGllczpZLFxyXG4vLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApXHJcbmdldE93blByb3BlcnR5RGVzY3JpcHRvcjpYLFxyXG4vLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKVxyXG5nZXRPd25Qcm9wZXJ0eU5hbWVzOlosXHJcbi8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTylcclxuZ2V0T3duUHJvcGVydHlTeW1ib2xzOiR9KSxcclxuLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pXHJcbkUmJnUodS5TK3UuRiooIVd8fGEoZnVuY3Rpb24oKXt2YXIgZT1EKCk7XHJcbi8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9XHJcbi8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbFxyXG4vLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9sc1xyXG5yZXR1cm5cIltudWxsXVwiIT1UKFtlXSl8fFwie31cIiE9VCh7YTplfSl8fFwie31cIiE9VChPYmplY3QoZSkpfSkpLFwiSlNPTlwiLHtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4scj1bZV0sbz0xO2FyZ3VtZW50cy5sZW5ndGg+bzspci5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZihuPXQ9clsxXSwoZyh0KXx8dm9pZCAwIT09ZSkmJiFLKGUpKS8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWRcclxucmV0dXJuIGgodCl8fCh0PWZ1bmN0aW9uKGUsdCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKHQ9bi5jYWxsKHRoaXMsZSx0KSksIUsodCkpcmV0dXJuIHR9KSxyWzFdPXQsVC5hcHBseShFLHIpfX0pLFxyXG4vLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpXHJcbkQucHJvdG90eXBlW0FdfHxuKDgpKEQucHJvdG90eXBlLEEsRC5wcm90b3R5cGUudmFsdWVPZiksXHJcbi8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ11cclxubChELFwiU3ltYm9sXCIpLFxyXG4vLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddXHJcbmwoTWF0aCxcIk1hdGhcIiwhMCksXHJcbi8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddXHJcbmwoci5KU09OLFwiSlNPTlwiLCEwKX0sLyogOTQgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMTkpKFwibWV0YVwiKSxvPW4oNiksaT1uKDkpLHU9big3KS5mLHM9MCxjPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGE9IW4oMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIGMoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxmPWZ1bmN0aW9uKGUpe3UoZSxyLHt2YWx1ZTp7aTpcIk9cIisgKytzLC8vIG9iamVjdCBJRFxyXG53Ont9fX0pfSxsPWZ1bmN0aW9uKGUsdCl7XHJcbi8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXhcclxuaWYoIW8oZSkpcmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGU/ZTooXCJzdHJpbmdcIj09dHlwZW9mIGU/XCJTXCI6XCJQXCIpK2U7aWYoIWkoZSxyKSl7XHJcbi8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0XHJcbmlmKCFjKGUpKXJldHVyblwiRlwiO1xyXG4vLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxyXG5pZighdClyZXR1cm5cIkVcIjtcclxuLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcclxuZihlKX1yZXR1cm4gZVtyXS5pfSxwPWZ1bmN0aW9uKGUsdCl7aWYoIWkoZSxyKSl7XHJcbi8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0XHJcbmlmKCFjKGUpKXJldHVybiEwO1xyXG4vLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YVxyXG5pZighdClyZXR1cm4hMTtcclxuLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGFcclxuZihlKX1yZXR1cm4gZVtyXS53fSxkPWZ1bmN0aW9uKGUpe3JldHVybiBhJiZ2Lk5FRUQmJmMoZSkmJiFpKGUscikmJmYoZSksZX0sdj1lLmV4cG9ydHM9e0tFWTpyLE5FRUQ6ITEsZmFzdEtleTpsLGdldFdlYWs6cCxvbkZyZWV6ZTpkfX0sLyogOTUgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1xyXG4vLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9sc1xyXG52YXIgcj1uKDIwKSxvPW4oNTUpLGk9bigzNSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXIoZSksbj1vLmY7aWYobilmb3IodmFyIHUscz1uKGUpLGM9aS5mLGE9MDtzLmxlbmd0aD5hOyljLmNhbGwoZSx1PXNbYSsrXSkmJnQucHVzaCh1KTtyZXR1cm4gdH19LC8qIDk2ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudClcclxudmFyIHI9bigxNSk7ZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiQXJyYXlcIj09cihlKX19LC8qIDk3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvd1xyXG52YXIgcj1uKDEwKSxvPW4oNTYpLmYsaT17fS50b1N0cmluZyx1PVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaChlKXtyZXR1cm4gdS5zbGljZSgpfX07ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIHUmJlwiW29iamVjdCBXaW5kb3ddXCI9PWkuY2FsbChlKT9zKGUpOm8ocihlKSl9fSwvKiA5OCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7bigzNCkoXCJhc3luY0l0ZXJhdG9yXCIpfSwvKiA5OSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7bigzNCkoXCJvYnNlcnZhYmxlXCIpfSwvKiAxMDAgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe2UuZXhwb3J0cz17ZGVmYXVsdDpuKDEwMSksX19lc01vZHVsZTohMH19LC8qIDEwMSAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7bigxMDIpLGUuZXhwb3J0cz1uKDApLk9iamVjdC5zZXRQcm90b3R5cGVPZn0sLyogMTAyICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bylcclxudmFyIHI9bigzKTtyKHIuUyxcIk9iamVjdFwiLHtzZXRQcm90b3R5cGVPZjpuKDEwMykuc2V0fSl9LC8qIDEwMyAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XHJcbi8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLlxyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xyXG52YXIgcj1uKDYpLG89big0KSxpPWZ1bmN0aW9uKGUsdCl7aWYobyhlKSwhcih0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfTtlLmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT8vLyBlc2xpbnQtZGlzYWJsZS1saW5lXHJcbmZ1bmN0aW9uKGUsdCxyKXt0cnl7cj1uKDE0KShGdW5jdGlvbi5jYWxsLG4oNDApLmYoT2JqZWN0LnByb3RvdHlwZSxcIl9fcHJvdG9fX1wiKS5zZXQsMikscihlLFtdKSx0PSEoZSBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChlKXt0PSEwfXJldHVybiBmdW5jdGlvbihlLG4pe3JldHVybiBpKGUsbiksdD9lLl9fcHJvdG9fXz1uOnIoZSxuKSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6aX19LC8qIDEwNCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7ZS5leHBvcnRzPXtkZWZhdWx0Om4oMTA1KSxfX2VzTW9kdWxlOiEwfX0sLyogMTA1ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtuKDEwNik7dmFyIHI9bigwKS5PYmplY3Q7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuY3JlYXRlKGUsdCl9fSwvKiAxMDYgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMyk7XHJcbi8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKVxyXG5yKHIuUyxcIk9iamVjdFwiLHtjcmVhdGU6bigzMSl9KX0sLyogMTA3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtlLmV4cG9ydHM9e2RlZmF1bHQ6bigxMDgpLF9fZXNNb2R1bGU6ITB9fSwvKiAxMDggKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe24oMTA5KSxlLmV4cG9ydHM9bigwKS5PYmplY3Qua2V5c30sLyogMTA5ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcclxuLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pXHJcbnZhciByPW4oMzApLG89bigyMCk7bigzOSkoXCJrZXlzXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG8ocihlKSl9fSl9LC8qIDExMCAqL1xyXG4sLyogMTExICovXHJcbiwvKiAxMTIgKi9cclxuLC8qIDExMyAqL1xyXG4sLyogMTE0ICovXHJcbiwvKiAxMTUgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oNjMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oMTEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPW4oMTIpLGM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxhPW4oNjQpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxsPW4oNjUpLHA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxkPW4oMTE2KSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkseT1mdW5jdGlvbihlKXtmdW5jdGlvbiBNaW5pQnVzKCl7cmV0dXJuKDAsdS5kZWZhdWx0KSh0aGlzLE1pbmlCdXMpLCgwLGYuZGVmYXVsdCkodGhpcywoTWluaUJ1cy5fX3Byb3RvX198fCgwLG8uZGVmYXVsdCkoTWluaUJ1cykpLmNhbGwodGhpcykpfS8qKlxyXG4gICAqIFBvc3QgYSBtZXNzYWdlIGZvciByb3V0aW5nLiBNZXNzYWdlIGlzIHJvdXRlZCBkaXJlY3RseSB0byB0aGUgZXh0ZXJuYWwgcm91dGluZyBfb25Qb3N0TWVzc2FnZS5cclxuICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBpbk1zZyAgICAgICAgICAgIEpTT04gd2l0aCBtYW5kYXRvcnkgTWVzc2FnZSBzdHJ1Y3R1cmUge2lkLCB0eXBlLCBmcm9tLCB0b31cclxuICAgKiBAcGFyYW0gIHtDYWxsYmFja30gcmVzcG9uc2VDYWxsYmFjayBPcHRpb25hbCBjYWxsYmFjayBpZiBhIHJlc3BvbnNlIGlzIGV4cGVjdGVkIGZyb20gdGhlIHJlcXVlc3QuIEEgcmVzcG9uc2Ugd2lsbCBiZSBhbHdheXMgc2VudCwgZXZlbiBpZiBpdCBpcyBhIFwiVGltZW91dFwiLlxyXG4gICAqIEByZXR1cm4ge251bWJlcn0gICAgICAgICAgICAgICAgICB0aGUgTWVzc2FnZSBpZFxyXG4gICAqL1xyXG5yZXR1cm4oMCxwLmRlZmF1bHQpKE1pbmlCdXMsZSksKDAsYy5kZWZhdWx0KShNaW5pQnVzLFt7a2V5OlwicG9zdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcztcclxuLy9hbHdheXMgc2VuZCB0byBleHRlcm5hbCAodG8gY29yZSBNZXNzYWdlQnVzKVxyXG5yZXR1cm4gci5fZ2VuSWQoZSksci5fcmVzcG9uc2VDYWxsYmFjayhlLHQsbiksci5fb25Qb3N0TWVzc2FnZShlKSxlLmlkfX0se2tleTpcIl9vbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0Ll9vblJlc3BvbnNlKGUpKXt2YXIgbj10Ll9zdWJzY3JpcHRpb25zW2UudG9dO24/KHQuX3B1Ymxpc2hPbihuLGUpLGUudG8uc3RhcnRzV2l0aChcImh5cGVydHlcIil8fHQuX3B1Ymxpc2hPbkRlZmF1bHQoZSkpOnQuX3B1Ymxpc2hPbkRlZmF1bHQoZSl9fX1dKSxNaW5pQnVzfSh2LmRlZmF1bHQpOy8qKlxyXG4gICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxyXG4gICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlEXHJcbiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXHJcbiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcclxuICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcclxuICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXHJcbiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlXHJcbiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cclxuICAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gICAgICAgICAgICAgICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gICAgICAgICAgICAgICAgICAqKi9cclxudC5kZWZhdWx0PXksZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMTE2ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDQxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQociksaT1uKDExKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1uKDEyKSxjPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYT1uKDg2KSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgbiBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiYodFtuXT1lW25dKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYSksbD1mLmdldExvZ2dlcihcIkJ1c1wiKSxwPWZ1bmN0aW9uKCl7LyogcHJpdmF0ZVxyXG4gIF9tc2dJZDogbnVtYmVyO1xyXG4gIF9zdWJzY3JpcHRpb25zOiA8dXJsOiBNc2dMaXN0ZW5lcltdPlxyXG4gICBfcmVzcG9uc2VUaW1lT3V0OiBudW1iZXJcclxuICBfcmVzcG9uc2VDYWxsYmFja3M6IDx1cmwraWQ6IChtc2cpID0+IHZvaWQ+XHJcbiAgICovXHJcbmZ1bmN0aW9uIEJ1cygpeygwLHUuZGVmYXVsdCkodGhpcyxCdXMpO3ZhciBlPXRoaXM7ZS5fbXNnSWQ9MCxlLl9zdWJzY3JpcHRpb25zPXt9LGUuX3Jlc3BvbnNlVGltZU91dD0xNWUzLC8vZGVmYXVsdCB0byAzc1xyXG5lLl9yZXNwb25zZUNhbGxiYWNrcz17fSxlLl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIoKX0vKipcclxuICAqIFJlZ2lzdGVyIGxpc3RlbmVyIHRvIHJlY2VpdmUgbWVzc2FnZSB3aGVuIFwibXNnLnRvID09PSB1cmxcIi5cclxuICAqIFNwZWNpYWwgdXJsIFwiKlwiIGZvciBkZWZhdWx0IGxpc3RlbmVyIGlzIGFjY2VwdGVkIHRvIGludGVyY2VwdCBhbGwgbWVzc2FnZXMuXHJcbiAgKiBAcGFyYW0ge1VSTH0gdXJsIEFkZHJlc3MgdG8gaW50ZXJjZXB0LCB0aGEgaXMgaW4gdGhlIG1lc3NhZ2UgXCJ0b1wiXHJcbiAgKiBAcGFyYW0ge0xpc3RlbmVyfSBsaXN0ZW5lciBsaXN0ZW5lclxyXG4gICogQHJldHVybiB7TXNnTGlzdGVuZXJ9IGluc3RhbmNlIG9mIE1zZ0xpc3RlbmVyXHJcbiAgKi9cclxucmV0dXJuKDAsYy5kZWZhdWx0KShCdXMsW3trZXk6XCJhZGRMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxyPW5ldyBkKG4uX3N1YnNjcmlwdGlvbnMsZSx0KSxvPW4uX3N1YnNjcmlwdGlvbnNbZV07cmV0dXJuIG98fChvPVtdLG4uX3N1YnNjcmlwdGlvbnNbZV09byksby5wdXNoKHIpLHJ9fSx7a2V5OlwiYWRkUmVzcG9uc2VMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tlK3RdPW59fSx7a2V5OlwicmVtb3ZlUmVzcG9uc2VMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZGVsZXRlIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW2UrdF19fSx7a2V5OlwicmVtb3ZlQWxsTGlzdGVuZXJzT2ZcIix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fc3Vic2NyaXB0aW9uc1tlXX19LHtrZXk6XCJiaW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMsbz10aGlzO3JldHVybnt0aGlzTGlzdGVuZXI6by5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKGUpe24ucG9zdE1lc3NhZ2UoZSl9KSx0YXJnZXRMaXN0ZW5lcjpuLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7by5wb3N0TWVzc2FnZShlKX0pLHVuYmluZDpmdW5jdGlvbigpe3IudGhpc0xpc3RlbmVyLnJlbW92ZSgpLHIudGFyZ2V0TGlzdGVuZXIucmVtb3ZlKCl9fX19LHtrZXk6XCJfcHVibGlzaE9uRGVmYXVsdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe1xyXG4vL2lzIHRoZXJlIGFueSBcIipcIiAoZGVmYXVsdCkgbGlzdGVuZXJzP1xyXG52YXIgdD10aGlzLl9zdWJzY3JpcHRpb25zW1wiKlwiXTt0JiZ0aGlzLl9wdWJsaXNoT24odCxlKX19LHtrZXk6XCJfcHVibGlzaE9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5fY2FsbGJhY2sodCl9KX19LHtrZXk6XCJfcmVzcG9uc2VDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSxyPXRoaXM7XHJcbi8vYXV0b21hdGljIG1hbmFnZW1lbnQgb2YgcmVzcG9uc2UgaGFuZGxlcnNcclxuaWYodCl7dmFyIG89ZS5mcm9tK2UuaWQ7ci5fcmVzcG9uc2VDYWxsYmFja3Nbb109dCxuJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9ci5fcmVzcG9uc2VDYWxsYmFja3Nbb107aWYoZGVsZXRlIHIuX3Jlc3BvbnNlQ2FsbGJhY2tzW29dLHQpe3Qoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsYm9keTp7Y29kZTo0MDgsZGVzYzpcIlJlc3BvbnNlIHRpbWVvdXQhXCIsdmFsdWU6ZX19KX19LHIuX3Jlc3BvbnNlVGltZU91dCl9fX0se2tleTpcIl9vblJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihcInJlc3BvbnNlXCI9PT1lLnR5cGUpe3ZhciBuPWUudG8rZS5pZCxyPXQuX3Jlc3BvbnNlQ2FsbGJhY2tzW25dO2lmKGUuYm9keS5jb2RlPj0yMDAmJlxyXG4vL2lmIGl0J3MgYSBwcm92aXNpb25hbCByZXNwb25zZSwgZG9uJ3QgZGVsZXRlIHJlc3BvbnNlIGxpc3RlbmVyXHJcbmRlbGV0ZSB0Ll9yZXNwb25zZUNhbGxiYWNrc1tuXSxyKXJldHVybiByKGUpLCEwfXJldHVybiExfX0se2tleTpcIl9vbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0Ll9vblJlc3BvbnNlKGUpKXt2YXIgbj10Ll9zdWJzY3JpcHRpb25zW2UudG9dO24/dC5fcHVibGlzaE9uKG4sZSk6dC5fcHVibGlzaE9uRGVmYXVsdChlKX19fSx7a2V5OlwiX2dlbklkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7XHJcbi8vVE9ETzogaG93IGRvIHdlIG1hbmFnZSBtZXNzYWdlIElEJ3M/IFNob3VsZCBpdCBiZSBhIGdsb2JhbCBydW50aW1lIGNvdW50ZXIsIG9yIHBlciBVUkwgYWRkcmVzcz9cclxuLy9HbG9iYWwgY291bnRlciB3aWxsIG5vdCB3b3JrLCBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbXVsdGlwbGUgTWluaUJ1cyBpbnN0YW5jZXMhXHJcbi8vUGVyIFVSTCwgY2FuIGJlIGEgbG90IG9mIGRhdGEgdG8gbWFpbnRhaW4hXHJcbi8vTWF5YmUgYSBjb3VudGVyIHBlciBNaW5pQnVzIGluc3RhbmNlLiBUaGlzIGlzIHRoZSBhc3N1bWVkIHNvbHV0aW9uIGZvciBub3cuXHJcbmUuaWQmJjAhPT1lLmlkfHwodGhpcy5fbXNnSWQrKyxlLmlkPXRoaXMuX21zZ0lkKX19LHtrZXk6XCJwb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7fX0se2tleTpcInBvc3RNZXNzYWdlV2l0aFJldHJpZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcyxpPTAsdT1mdW5jdGlvbigpe3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQsbyl7ci5wb3N0TWVzc2FnZShlLGZ1bmN0aW9uKHIpezQwOD09PXIuYm9keS5jb2RlfHw1MDA9PT1yLmJvZHkuY29kZT9vKCk6KGwuaW5mbyhcIltCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllc10gbXNnIGRlbGl2ZXJlZDogXCIsZSksbihyKSx0KCkpfSl9KX07IWZ1bmN0aW9uIHRyeUFnYWluKCl7dSgpLnRoZW4oZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7aWYobC53YXJuKFwiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBNZXNzYWdlIEJvdW5jZWQgKHJldHJ5IFwiK2krXCIpOiAnXCIsZSksIShpKys8dCkpe3ZhciBuPVwiW0Vycm9yXSBNZXNzYWdlIEJvdW5jZWQgKGRlbGl2ZXJ5IGF0dGVtcHRzIFwiK3QrXCIpOiAnXCI7dGhyb3cgbmV3IEVycm9yKG4rZSl9dHJ5QWdhaW4oKX0pfSgpfX0se2tleTpcIl9vblBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7fX0se2tleTpcIl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbigpe319XSksQnVzfSgpLGQ9ZnVuY3Rpb24oKXsvKiBwcml2YXRlXHJcbiAgX3N1YnNjcmlwdGlvbnM6IDxzdHJpbmc6IE1zZ0xpc3RlbmVyW10+O1xyXG4gIF91cmw6IHN0cmluZztcclxuICBfY2FsbGJhY2s6IChtc2cpID0+IHZvaWQ7XHJcbiAgKi9cclxuZnVuY3Rpb24gTXNnTGlzdGVuZXIoZSx0LG4peygwLHUuZGVmYXVsdCkodGhpcyxNc2dMaXN0ZW5lcik7dmFyIHI9dGhpcztyLl9zdWJzY3JpcHRpb25zPWUsci5fdXJsPXQsci5fY2FsbGJhY2s9bn1yZXR1cm4oMCxjLmRlZmF1bHQpKE1zZ0xpc3RlbmVyLFt7a2V5OlwicmVtb3ZlXCIsLyoqXHJcbiAgICAgKiBSZW1vdmUgdGhpcyBsaXN0ZW5lciBmcm9tIHRoZSBCdXNcclxuICAgICAqL1xyXG52YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9zdWJzY3JpcHRpb25zW2UuX3VybF07aWYodCl7dmFyIG49dC5pbmRleE9mKGUpO3Quc3BsaWNlKG4sMSksXHJcbi8vaWYgdGhlcmUgYXJlIG5vIGxpc3RlbmVycywgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gZW50aXJlbHkuXHJcbjA9PT10Lmxlbmd0aCYmZGVsZXRlIGUuX3N1YnNjcmlwdGlvbnNbZS5fdXJsXX19fSx7a2V5OlwidXJsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19XSksTXNnTGlzdGVuZXJ9KCk7dC5kZWZhdWx0PXAsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMTE3ICovXHJcbi8qKiovXHJcbmZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDExKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQociksaT1uKDEyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1mdW5jdGlvbigpey8qIHByaXZhdGVcclxuICBfY29tcG9uZW50czogPHVybDogaW5zdGFuY2U+XHJcbiAgKi9cclxuZnVuY3Rpb24gU2FuZGJveFJlZ2lzdHJ5KGUpeygwLG8uZGVmYXVsdCkodGhpcyxTYW5kYm94UmVnaXN0cnkpO3ZhciB0PXRoaXM7dC5fYnVzPWUsdC5fY29tcG9uZW50cz17fSxlLmFkZExpc3RlbmVyKFNhbmRib3hSZWdpc3RyeS5JbnRlcm5hbERlcGxveUFkZHJlc3MsZnVuY3Rpb24oZSl7XHJcbi8vY29uc29sZS5sb2coJ1NhbmRib3hSZWdpc3RyeS1SQ1Y6ICcsIG1zZyk7XHJcbi8vIGxldCByZXNwb25zZU1zZyA9IHtcclxuLy8gICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBTYW5kYm94UmVnaXN0cnkuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLCB0bzogU2FuZGJveFJlZ2lzdHJ5LkV4dGVybmFsRGVwbG95QWRkcmVzc1xyXG4vLyB9O1xyXG5zd2l0Y2goZS50eXBlKXtjYXNlXCJjcmVhdGVcIjp0Ll9vbkRlcGxveShlKTticmVhaztjYXNlXCJkZWxldGVcIjp0Ll9vblJlbW92ZShlKX19KX1yZXR1cm4oMCx1LmRlZmF1bHQpKFNhbmRib3hSZWdpc3RyeSxbe2tleTpcIl9yZXNwb25zZU1zZ1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOlNhbmRib3hSZWdpc3RyeS5JbnRlcm5hbERlcGxveUFkZHJlc3MsdG86U2FuZGJveFJlZ2lzdHJ5LkV4dGVybmFsRGVwbG95QWRkcmVzc30sbz17fTtcclxuLy8gcmV0dXJuIG1lc3NhZ2VGYWN0b3J5LmNyZWF0ZVJlc3BvbnNlKG1zZywgY29kZSwgdmFsdWUpO1xyXG5yZXR1cm4gdCYmKG8uY29kZT10KSxuJiYoby5kZXNjPW4pLHIuYm9keT1vLHJ9fSx7a2V5OlwiX29uRGVwbG95XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuYm9keS5jb25maWcscj1lLmJvZHkudXJsLG89ZS5ib2R5LnNvdXJjZUNvZGUsaT12b2lkIDAsdT12b2lkIDA7aWYodC5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShyKSlpPTUwMCx1PVwiSW5zdGFuY2UgXCIrcitcIiBhbHJlYWR5IGV4aXN0IVwiO2Vsc2UgdHJ5e3QuX2NvbXBvbmVudHNbcl09dC5fY3JlYXRlKHIsbyxuKSxpPTIwMH1jYXRjaChlKXtpPTUwMCx1PWV9dmFyIHM9dC5fcmVzcG9uc2VNc2coZSxpLHUpO3QuX2J1cy5wb3N0TWVzc2FnZShzKX19LHtrZXk6XCJfb25SZW1vdmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5ib2R5LnVybCxyPXZvaWQgMCxvPXZvaWQgMDt0Ll9jb21wb25lbnRzLmhhc093blByb3BlcnR5KG4pPyhcclxuLy9yZW1vdmUgY29tcG9uZW50IGZyb20gdGhlIHBvb2wgYW5kIGFsbCBsaXN0ZW5lcnNcclxuZGVsZXRlIHQuX2NvbXBvbmVudHNbbl0sdC5fYnVzLnJlbW92ZUFsbExpc3RlbmVyc09mKG4pLHI9MjAwKToocj01MDAsbz1cIkluc3RhbmNlIFwiK24rXCIgZG9lc24ndCBleGlzdCFcIik7dmFyIGk9dC5fcmVzcG9uc2VNc2coZSxyLG8pO3QuX2J1cy5wb3N0TWVzc2FnZShpKX19LHtrZXk6XCJfY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe319LHtrZXk6XCJjb21wb25lbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHN9fV0pLFNhbmRib3hSZWdpc3RyeX0oKTtzLkV4dGVybmFsRGVwbG95QWRkcmVzcz1cImh5cGVydHktcnVudGltZTovL3NhbmRib3gvZXh0ZXJuYWxcIixzLkludGVybmFsRGVwbG95QWRkcmVzcz1cImh5cGVydHktcnVudGltZTovL3NhbmRib3gvaW50ZXJuYWxcIix0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAxMTggKi9cclxuLC8qIDExOSAqL1xyXG4sLyogMTIwICovXHJcbiwvKiAxMjEgKi9cclxuLC8qIDEyMiAqL1xyXG4sLyogMTIzICovXHJcbiwvKiAxMjQgKi9cclxuLC8qIDEyNSAqL1xyXG4sLyogMTI2ICovXHJcbiwvKiAxMjcgKi9cclxuLC8qIDEyOCAqL1xyXG4sLyogMTI5ICovXHJcbiwvKiAxMzAgKi9cclxuLC8qIDEzMSAqL1xyXG4sLyogMTMyICovXHJcbiwvKiAxMzMgKi9cclxuLyoqKi9cclxuZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuU2FuZGJveFJlZ2lzdHJ5PXQuU2FuZGJveFR5cGU9dC5TYW5kYm94PXZvaWQgMDt2YXIgcj1uKDEzNCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9bigxMTcpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKTt0LlNhbmRib3g9by5kZWZhdWx0LHQuU2FuZGJveFR5cGU9ci5TYW5kYm94VHlwZSx0LlNhbmRib3hSZWdpc3RyeT11LmRlZmF1bHR9LC8qIDEzNCAqL1xyXG4vKioqL1xyXG5mdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5TYW5kYm94VHlwZT12b2lkIDA7dmFyIHI9bigxMDcpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oNDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPW4oNjMpLGM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxhPW4oMTEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxsPW4oMTIpLHA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxkPW4oNjQpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSx5PW4oNjUpLF89X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSxoPW4oMTE3KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1uKDExNSksbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGcpLHg9KHQuU2FuZGJveFR5cGU9e0FQUDpcImFwcFwiLE5PUk1BTDpcIm5vcm1hbFwiLFdJTkRPVzpcIndpbmRvd1wifSxmdW5jdGlvbihlKXtmdW5jdGlvbiBTYW5kYm94KGUpeygwLGYuZGVmYXVsdCkodGhpcyxTYW5kYm94KTt2YXIgdD0oMCx2LmRlZmF1bHQpKHRoaXMsKFNhbmRib3guX19wcm90b19ffHwoMCxjLmRlZmF1bHQpKFNhbmRib3gpKS5jYWxsKHRoaXMpKSxuPXQ7cmV0dXJuIGUmJihuLmNhcGFiaWxpdGllcz1lKSx0fS8qKlxyXG4gICAqIERlcGxveSBhbiBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50IGludG8gdGhlIHNhbmRib3guXHJcbiAgICogQHBhcmFtICB7c3RyaW5nfSBjb21wb25lbnRTb3VyY2VDb2RlIENvbXBvbmVudCBzb3VyY2UgY29kZSAoSHlwZXJ0eSwgUHJvdG9TdHViLCBldGMpXHJcbiAgICogQHBhcmFtICB7VVJMfSBjb21wb25lbnRVUkwgSHlwZXJ0eSwgUHJvdG9TdHViLCBvciBhbnkgb3RoZXIgY29tcG9uZW50IGFkZHJlc3MuXHJcbiAgICogQHBhcmFtICB7Q29uZmlnfSBjb25maWd1cmF0aW9uIENvbmZpZyBwYXJhbWV0ZXJzIG9mIHRoZSBjb21wb25lbnRcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlPHN0cmluZz59IHJldHVybiBkZXBsb3llZCBpZiBzdWNjZXNzZnVsLCBvciBhbnkgb3RoZXIgc3RyaW5nIHdpdGggYW4gZXJyb3JcclxuICAgKi9cclxucmV0dXJuKDAsXy5kZWZhdWx0KShTYW5kYm94LGUpLCgwLHAuZGVmYXVsdCkoU2FuZGJveCxbe2tleTpcImRlcGxveUNvbXBvbmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzO1xyXG4vLyBsZXQgbWVzc2FnZUZhY3RvcnkgPSBfdGhpcy5tZXNzYWdlRmFjdG9yeTtcclxucmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obyxpKXtcclxuLy9GTE9XLU9VVDogZGVwbG95IG1lc3NhZ2UgZm9yIHRoZSBpbnRlcm5hbCBTYW5kYm94UmVnaXN0cnkgLT4gX29uRGVwbG95XHJcbnZhciB1PXt0eXBlOlwiY3JlYXRlXCIsZnJvbTpiLmRlZmF1bHQuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzLHRvOmIuZGVmYXVsdC5JbnRlcm5hbERlcGxveUFkZHJlc3MsYm9keTp7dXJsOnQsc291cmNlQ29kZTplLGNvbmZpZzpufX07XHJcbi8vc2VuZCBtZXNzYWdlIGludG8gdGhlIHNhbmRib3ggaW50ZXJuYWxzIGFuZCB3YWl0IGZvciByZXBseVxyXG5yLnBvc3RNZXNzYWdlKHUsZnVuY3Rpb24oZSl7MjAwPT09ZS5ib2R5LmNvZGU/XHJcbi8vaXMgdGhpcyByZXNwb25zZSBjb21wbGFpbnQgd2l0aCB0aGUgc3BlYz9cclxubyhcImRlcGxveWVkXCIpOmkoZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6XCJyZW1vdmVDb21wb25lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4scil7XHJcbi8vRkxPVy1PVVQ6IHVuLWRlcGxveSBtZXNzYWdlIGZvciB0aGUgaW50ZXJuYWwgU2FuZGJveFJlZ2lzdHJ5IC0+IF9vblJlbW92ZVxyXG52YXIgbz17dHlwZTpcImRlbGV0ZVwiLGZyb206Yi5kZWZhdWx0LkV4dGVybmFsRGVwbG95QWRkcmVzcyx0bzpiLmRlZmF1bHQuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLGJvZHk6e3VybDplfX07XHJcbi8vc2VuZCBtZXNzYWdlIGludG8gdGhlIHNhbmRib3ggaW50ZXJuYWxzIGFuZCB3YWl0IGZvciByZXBseVxyXG50LnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24oZSl7MjAwPT09ZS5ib2R5LmNvZGU/XHJcbi8vaXMgdGhpcyByZXNwb25zZSBjb21wbGFpbnQgd2l0aCB0aGUgc3BlYz9cclxubihcInVuZGVwbG95ZWRcIik6cihlLmJvZHkuZGVzYyl9KX0pfX0se2tleTpcIm1hdGNoZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLG49KDAsby5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuISh0LmNhcGFiaWxpdGllc1tuXSYmdC5jYXBhYmlsaXRpZXNbbl09PT1lW25dKX0pO3JldHVybiAwPT09bi5sZW5ndGh8fCFlW25dfX1dKSxTYW5kYm94fShtLmRlZmF1bHQpKTt0LmRlZmF1bHQ9eH1dKX0pOyIsIi8vIHZlcnNpb246IDAuOC4wXHJcbi8vIGRhdGU6IFR1ZSBKYW4gMDkgMjAxOCAxNzowMTozNyBHTVQrMDAwMCAoV0VUKVxyXG4vLyBsaWNlbmNlOiBcclxuLyoqXHJcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXHJcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcclxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcclxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxyXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxyXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcclxuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcclxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxyXG4qXHJcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbipcclxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4qXHJcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqL1xyXG5cclxuXHJcbiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiUGVyc2lzdGVuY2VNYW5hZ2VyXCIsW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5QZXJzaXN0ZW5jZU1hbmFnZXI9dCgpOihlW1wiXCJdPWVbXCJcIl18fHt9LGVbXCJcIl0uUGVyc2lzdGVuY2VNYW5hZ2VyPXQoKSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD17fTtmdW5jdGlvbiBuKHIpe2lmKHRbcl0pcmV0dXJuIHRbcl0uZXhwb3J0czt2YXIgbz10W3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtyXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxuKSxvLmw9ITAsby5leHBvcnRzfXJldHVybiBuLm09ZSxuLmM9dCxuLmQ9ZnVuY3Rpb24oZSx0LHIpe24ubyhlLHQpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6cn0pfSxuLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIG4uZCh0LFwiYVwiLHQpLHR9LG4ubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sbi5wPVwiXCIsbihuLnM9MTgwKX0oezA6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmV4cG9ydHM9e3ZlcnNpb246XCIyLjUuM1wifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPW4pfSwxOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1wibnVtYmVyXCI9PXR5cGVvZiBfX2cmJihfX2c9bil9LDEwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDgpLG89bigxNSk7ZS5leHBvcnRzPW4oMyk/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByLmYoZSx0LG8oMSxuKSl9OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZVt0XT1uLGV9fSwxMjpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2goZSl7cmV0dXJuITB9fX0sMTQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oMjIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQsbil7aWYocihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBlLmNhbGwodCxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiBlLmNhbGwodCxuLHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4scixvKXtyZXR1cm4gZS5jYWxsKHQsbixyLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sMTU6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSwxODA6ZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByLG89bigxODEpLHU9KHI9bykmJnIuX19lc01vZHVsZT9yOntkZWZhdWx0OnJ9O3QuZGVmYXVsdD11LmRlZmF1bHQsZS5leHBvcnRzPXQuZGVmYXVsdH0sMTgxOmZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1pKG4oNTkpKSxvPWkobig0KSksdT1pKG4oNykpO2Z1bmN0aW9uIGkoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtpZigoMCxvLmRlZmF1bHQpKHRoaXMsZSksIXQpdGhyb3cgRXJyb3IoXCJUaGUgUGVyc2lzdGVuY2UgTWFuYWdlciBuZWVkcyB0aGUgbG9jYWxTdG9yYWdlXCIpO3RoaXMubG9jYWxTdG9yYWdlPXR9cmV0dXJuKDAsdS5kZWZhdWx0KShlLFt7a2V5Olwic2V0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3RoaXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oZSwoMCxyLmRlZmF1bHQpKHt2ZXJzaW9uOnQsdmFsdWU6bn0pKX19LHtrZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbihlKXt0cnl7cmV0dXJuIEpTT04ucGFyc2UodGhpcy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKSkudmFsdWV9Y2F0Y2goZSl7fX19LHtrZXk6XCJnZXRWZXJzaW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBKU09OLnBhcnNlKHRoaXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oZSkpLnZlcnNpb259Y2F0Y2goZSl7fX19LHtrZXk6XCJkZWxldGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUpfX1dKSxlfSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LDIyOmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiBlfX0sMjQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXIoZSkpcmV0dXJuIGU7dmFyIG4sbztpZih0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZihuPWUudG9TdHJpbmcpJiYhcihvPW4uY2FsbChlKSkpcmV0dXJuIG87aWYoXCJmdW5jdGlvblwiPT10eXBlb2Yobj1lLnZhbHVlT2YpJiYhcihvPW4uY2FsbChlKSkpcmV0dXJuIG87aWYoIXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49ZS50b1N0cmluZykmJiFyKG89bi5jYWxsKGUpKSlyZXR1cm4gbzt0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIil9fSwyNjpmdW5jdGlvbihlLHQsbil7dmFyIHI9big2KSxvPW4oMSkuZG9jdW1lbnQsdT1yKG8pJiZyKG8uY3JlYXRlRWxlbWVudCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB1P28uY3JlYXRlRWxlbWVudChlKTp7fX19LDM6ZnVuY3Rpb24oZSx0LG4pe2UuZXhwb3J0cz0hbigxMikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LDM4OmZ1bmN0aW9uKGUsdCxuKXtlLmV4cG9ydHM9IW4oMykmJiFuKDEyKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkobigyNikoXCJkaXZcIiksXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sNDpmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dC5fX2VzTW9kdWxlPSEwLHQuZGVmYXVsdD1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9fSw1OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDEpLG89bigwKSx1PW4oMTQpLGk9bigxMCksZj1cInByb3RvdHlwZVwiLGM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBhLGwscyxwPWUmYy5GLGQ9ZSZjLkcseT1lJmMuUyx2PWUmYy5QLGg9ZSZjLkIsZz1lJmMuVyx4PWQ/bzpvW3RdfHwob1t0XT17fSksXz14W2ZdLGI9ZD9yOnk/clt0XTooclt0XXx8e30pW2ZdO2QmJihuPXQpO2ZvcihhIGluIG4pKGw9IXAmJmImJnZvaWQgMCE9PWJbYV0pJiZhIGluIHh8fChzPWw/YlthXTpuW2FdLHhbYV09ZCYmXCJmdW5jdGlvblwiIT10eXBlb2YgYlthXT9uW2FdOmgmJmw/dShzLHIpOmcmJmJbYV09PXM/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCxuLHIpe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHQpO2Nhc2UgMjpyZXR1cm4gbmV3IGUodCxuKX1yZXR1cm4gbmV3IGUodCxuLHIpfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHRbZl09ZVtmXSx0fShzKTp2JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBzP3UoRnVuY3Rpb24uY2FsbCxzKTpzLHYmJigoeC52aXJ0dWFsfHwoeC52aXJ0dWFsPXt9KSlbYV09cyxlJmMuUiYmXyYmIV9bYV0mJmkoXyxhLHMpKSl9O2MuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsYy5VPTY0LGMuUj0xMjgsZS5leHBvcnRzPWN9LDU1OmZ1bmN0aW9uKGUsdCxuKXtlLmV4cG9ydHM9e2RlZmF1bHQ6big2MCksX19lc01vZHVsZTohMH19LDU5OmZ1bmN0aW9uKGUsdCxuKXtlLmV4cG9ydHM9e2RlZmF1bHQ6big3NiksX19lc01vZHVsZTohMH19LDY6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGU/bnVsbCE9PWU6XCJmdW5jdGlvblwiPT10eXBlb2YgZX19LDYwOmZ1bmN0aW9uKGUsdCxuKXtuKDYxKTt2YXIgcj1uKDApLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByLmRlZmluZVByb3BlcnR5KGUsdCxuKX19LDYxOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDUpO3Ioci5TK3IuRiohbigzKSxcIk9iamVjdFwiLHtkZWZpbmVQcm9wZXJ0eTpuKDgpLmZ9KX0sNzpmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dC5fX2VzTW9kdWxlPSEwO3ZhciByLG89big1NSksdT0ocj1vKSYmci5fX2VzTW9kdWxlP3I6e2RlZmF1bHQ6cn07dC5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSwoMCx1LmRlZmF1bHQpKGUsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksciYmZSh0LHIpLHR9fSgpfSw3NjpmdW5jdGlvbihlLHQsbil7dmFyIHI9bigwKSxvPXIuSlNPTnx8KHIuSlNPTj17c3RyaW5naWZ5OkpTT04uc3RyaW5naWZ5fSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvLnN0cmluZ2lmeS5hcHBseShvLGFyZ3VtZW50cyl9fSw4OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDkpLG89bigzOCksdT1uKDI0KSxpPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt0LmY9bigzKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oZSx0LG4pe2lmKHIoZSksdD11KHQsITApLHIobiksbyl0cnl7cmV0dXJuIGkoZSx0LG4pfWNhdGNoKGUpe31pZihcImdldFwiaW4gbnx8XCJzZXRcImluIG4pdGhyb3cgVHlwZUVycm9yKFwiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhXCIpO3JldHVyblwidmFsdWVcImluIG4mJihlW3RdPW4udmFsdWUpLGV9fSw5OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDYpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighcihlKSl0aHJvdyBUeXBlRXJyb3IoZStcIiBpcyBub3QgYW4gb2JqZWN0IVwiKTtyZXR1cm4gZX19fSl9KTsiLCIvLyB2ZXJzaW9uOiAwLjguMFxyXG4vLyBkYXRlOiBUdWUgSmFuIDA5IDIwMTggMTc6MDE6MzcgR01UKzAwMDAgKFdFVClcclxuLy8gbGljZW5jZTogXHJcbi8qKlxyXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxyXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXHJcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXHJcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcclxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcclxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXHJcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXHJcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cclxuKlxyXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKi9cclxuXHJcblxyXG4hZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIlJ1bnRpbWVDYXRhbG9ndWVcIixbXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlJ1bnRpbWVDYXRhbG9ndWU9ZSgpOih0W1wiXCJdPXRbXCJcIl18fHt9LHRbXCJcIl0uUnVudGltZUNhdGFsb2d1ZT1lKCkpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gcihuKXtpZihlW25dKXJldHVybiBlW25dLmV4cG9ydHM7dmFyIGk9ZVtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbbl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsciksaS5sPSEwLGkuZXhwb3J0c31yZXR1cm4gci5tPXQsci5jPWUsci5kPWZ1bmN0aW9uKHQsZSxuKXtyLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0sci5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiByLmQoZSxcImFcIixlKSxlfSxyLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LHIucD1cIlwiLHIoci5zPTE4Mil9KFtmdW5jdGlvbih0LGUpe3ZhciByPXQuZXhwb3J0cz17dmVyc2lvbjpcIjIuNS4zXCJ9O1wibnVtYmVyXCI9PXR5cGVvZiBfX2UmJihfX2U9cil9LGZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1wibnVtYmVyXCI9PXR5cGVvZiBfX2cmJihfX2c9cil9LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDM0KShcIndrc1wiKSxpPXIoMTkpLG89cigxKS5TeW1ib2wsYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBvOyh0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG5bdF18fChuW3RdPWEmJm9bdF18fChhP286aSkoXCJTeW1ib2wuXCIrdCkpfSkuc3RvcmU9bn0sZnVuY3Rpb24odCxlLHIpe3QuZXhwb3J0cz0hcigxMikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITAsZS5kZWZhdWx0PWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDEpLGk9cigwKSxvPXIoMTQpLGE9cigxMCksdT1cInByb3RvdHlwZVwiLHM9ZnVuY3Rpb24odCxlLHIpe3ZhciBjLGwsZixoPXQmcy5GLHA9dCZzLkcsZD10JnMuUyx2PXQmcy5QLHk9dCZzLkIsbT10JnMuVyxnPXA/aTppW2VdfHwoaVtlXT17fSksXz1nW3VdLE89cD9uOmQ/bltlXToobltlXXx8e30pW3VdO3AmJihyPWUpO2ZvcihjIGluIHIpKGw9IWgmJk8mJnZvaWQgMCE9PU9bY10pJiZjIGluIGd8fChmPWw/T1tjXTpyW2NdLGdbY109cCYmXCJmdW5jdGlvblwiIT10eXBlb2YgT1tjXT9yW2NdOnkmJmw/byhmLG4pOm0mJk9bY109PWY/ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSxyLG4pe2lmKHRoaXMgaW5zdGFuY2VvZiB0KXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgdDtjYXNlIDE6cmV0dXJuIG5ldyB0KGUpO2Nhc2UgMjpyZXR1cm4gbmV3IHQoZSxyKX1yZXR1cm4gbmV3IHQoZSxyLG4pfXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIGVbdV09dFt1XSxlfShmKTp2JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBmP28oRnVuY3Rpb24uY2FsbCxmKTpmLHYmJigoZy52aXJ0dWFsfHwoZy52aXJ0dWFsPXt9KSlbY109Zix0JnMuUiYmXyYmIV9bY10mJmEoXyxjLGYpKSl9O3MuRj0xLHMuRz0yLHMuUz00LHMuUD04LHMuQj0xNixzLlc9MzIscy5VPTY0LHMuUj0xMjgsdC5leHBvcnRzPXN9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0P251bGwhPT10OlwiZnVuY3Rpb25cIj09dHlwZW9mIHR9fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZS5fX2VzTW9kdWxlPSEwO3ZhciBuLGk9cig1NSksbz0obj1pKSYmbi5fX2VzTW9kdWxlP246e2RlZmF1bHQ6bn07ZS5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbj1lW3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxvLmRlZmF1bHQpKHQsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHIsbil7cmV0dXJuIHImJnQoZS5wcm90b3R5cGUsciksbiYmdChlLG4pLGV9fSgpfSxmdW5jdGlvbih0LGUscil7dmFyIG49cig5KSxpPXIoMzgpLG89cigyNCksYT1PYmplY3QuZGVmaW5lUHJvcGVydHk7ZS5mPXIoMyk/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxyKXtpZihuKHQpLGU9byhlLCEwKSxuKHIpLGkpdHJ5e3JldHVybiBhKHQsZSxyKX1jYXRjaCh0KXt9aWYoXCJnZXRcImluIHJ8fFwic2V0XCJpbiByKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiByJiYodFtlXT1yLnZhbHVlKSx0fX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoNik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFuKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhbiBvYmplY3QhXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoOCksaT1yKDE1KTt0LmV4cG9ydHM9cigzKT9mdW5jdGlvbih0LGUscil7cmV0dXJuIG4uZih0LGUsaSgxLHIpKX06ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0W2VdPXIsdH19LGZ1bmN0aW9uKHQsZSl7dmFyIHI9e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIuY2FsbCh0LGUpfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiEhdCgpfWNhdGNoKHQpe3JldHVybiEwfX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDU2KSxpPXIoMjkpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbihpKHQpKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDIyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLHIpe2lmKG4odCksdm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gdC5jYWxsKGUscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gdC5jYWxsKGUscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4saSl7cmV0dXJuIHQuY2FsbChlLHIsbixpKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue2VudW1lcmFibGU6ISgxJnQpLGNvbmZpZ3VyYWJsZTohKDImdCksd3JpdGFibGU6ISg0JnQpLHZhbHVlOmV9fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e319LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDQ0KSxpPXIoMzUpO3QuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7cmV0dXJuIG4odCxpKX19LGZ1bmN0aW9uKHQsZSl7dmFyIHI9e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByLmNhbGwodCkuc2xpY2UoOCwtMSl9fSxmdW5jdGlvbih0LGUpe3ZhciByPTAsbj1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm5cIlN5bWJvbChcIi5jb25jYXQodm9pZCAwPT09dD9cIlwiOnQsXCIpX1wiLCgrK3IrbikudG9TdHJpbmcoMzYpKX19LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9e2RlZmF1bHQ6cigxMDIpLF9fZXNNb2R1bGU6ITB9fSwsZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUscil7dmFyIG4saTshZnVuY3Rpb24obyxhKXtcInVzZSBzdHJpY3RcIjt2b2lkIDA9PT0oaT1cImZ1bmN0aW9uXCI9PXR5cGVvZihuPWEpP24uY2FsbChlLHIsZSx0KTpuKXx8KHQuZXhwb3J0cz1pKX0oMCxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PWZ1bmN0aW9uKCl7fSxlPVwidW5kZWZpbmVkXCIscj1bXCJ0cmFjZVwiLFwiZGVidWdcIixcImluZm9cIixcIndhcm5cIixcImVycm9yXCJdO2Z1bmN0aW9uIG4odCxlKXt2YXIgcj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHIuYmluZClyZXR1cm4gci5iaW5kKHQpO3RyeXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChyLHQpfWNhdGNoKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkocixbdCxhcmd1bWVudHNdKX19fWZ1bmN0aW9uIGkoZSxuKXtmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTt0aGlzW29dPWk8ZT90OnRoaXMubWV0aG9kRmFjdG9yeShvLGUsbil9dGhpcy5sb2c9dGhpcy5kZWJ1Z31mdW5jdGlvbiBvKHIsbyxhKXtyZXR1cm5cImRlYnVnXCI9PT0odT1yKSYmKHU9XCJsb2dcIiksdHlwZW9mIGNvbnNvbGUhPT1lJiYodm9pZCAwIT09Y29uc29sZVt1XT9uKGNvbnNvbGUsdSk6dm9pZCAwIT09Y29uc29sZS5sb2c/bihjb25zb2xlLFwibG9nXCIpOnQpfHxmdW5jdGlvbih0LHIsbil7cmV0dXJuIGZ1bmN0aW9uKCl7dHlwZW9mIGNvbnNvbGUhPT1lJiYoaS5jYWxsKHRoaXMscixuKSx0aGlzW3RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHV9ZnVuY3Rpb24gYSh0LG4sYSl7dmFyIHUscz10aGlzLGM9XCJsb2dsZXZlbFwiO2Z1bmN0aW9uIGwoKXt2YXIgdDtpZih0eXBlb2Ygd2luZG93IT09ZSl7dHJ5e3Q9d2luZG93LmxvY2FsU3RvcmFnZVtjXX1jYXRjaCh0KXt9aWYodHlwZW9mIHQ9PT1lKXRyeXt2YXIgcj13aW5kb3cuZG9jdW1lbnQuY29va2llLG49ci5pbmRleE9mKGVuY29kZVVSSUNvbXBvbmVudChjKStcIj1cIik7LTEhPT1uJiYodD0vXihbXjtdKykvLmV4ZWMoci5zbGljZShuKSlbMV0pfWNhdGNoKHQpe31yZXR1cm4gdm9pZCAwPT09cy5sZXZlbHNbdF0mJih0PXZvaWQgMCksdH19dCYmKGMrPVwiOlwiK3QpLHMubmFtZT10LHMubGV2ZWxzPXtUUkFDRTowLERFQlVHOjEsSU5GTzoyLFdBUk46MyxFUlJPUjo0LFNJTEVOVDo1fSxzLm1ldGhvZEZhY3Rvcnk9YXx8byxzLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHV9LHMuc2V0TGV2ZWw9ZnVuY3Rpb24obixvKXtpZihcInN0cmluZ1wiPT10eXBlb2YgbiYmdm9pZCAwIT09cy5sZXZlbHNbbi50b1VwcGVyQ2FzZSgpXSYmKG49cy5sZXZlbHNbbi50b1VwcGVyQ2FzZSgpXSksIShcIm51bWJlclwiPT10eXBlb2YgbiYmbj49MCYmbjw9cy5sZXZlbHMuU0lMRU5UKSl0aHJvd1wibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIrbjtpZih1PW4sITEhPT1vJiZmdW5jdGlvbih0KXt2YXIgbj0oclt0XXx8XCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtpZih0eXBlb2Ygd2luZG93IT09ZSl7dHJ5e3JldHVybiB2b2lkKHdpbmRvdy5sb2NhbFN0b3JhZ2VbY109bil9Y2F0Y2godCl7fXRyeXt3aW5kb3cuZG9jdW1lbnQuY29va2llPWVuY29kZVVSSUNvbXBvbmVudChjKStcIj1cIituK1wiO1wifWNhdGNoKHQpe319fShuKSxpLmNhbGwocyxuLHQpLHR5cGVvZiBjb25zb2xlPT09ZSYmbjxzLmxldmVscy5TSUxFTlQpcmV0dXJuXCJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZ1wifSxzLnNldERlZmF1bHRMZXZlbD1mdW5jdGlvbih0KXtsKCl8fHMuc2V0TGV2ZWwodCwhMSl9LHMuZW5hYmxlQWxsPWZ1bmN0aW9uKHQpe3Muc2V0TGV2ZWwocy5sZXZlbHMuVFJBQ0UsdCl9LHMuZGlzYWJsZUFsbD1mdW5jdGlvbih0KXtzLnNldExldmVsKHMubGV2ZWxzLlNJTEVOVCx0KX07dmFyIGY9bCgpO251bGw9PWYmJihmPW51bGw9PW4/XCJXQVJOXCI6bikscy5zZXRMZXZlbChmLCExKX12YXIgdT1uZXcgYSxzPXt9O3UuZ2V0TG9nZ2VyPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0fHxcIlwiPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTt2YXIgZT1zW3RdO3JldHVybiBlfHwoZT1zW3RdPW5ldyBhKHQsdS5nZXRMZXZlbCgpLHUubWV0aG9kRmFjdG9yeSkpLGV9O3ZhciBjPXR5cGVvZiB3aW5kb3chPT1lP3dpbmRvdy5sb2c6dm9pZCAwO3JldHVybiB1Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdyE9PWUmJndpbmRvdy5sb2c9PT11JiYod2luZG93LmxvZz1jKSx1fSx1LmdldExvZ2dlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gc30sdX0pfSxmdW5jdGlvbih0LGUscil7dmFyIG49cig2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighbih0KSlyZXR1cm4gdDt2YXIgcixpO2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKHI9dC50b1N0cmluZykmJiFuKGk9ci5jYWxsKHQpKSlyZXR1cm4gaTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihyPXQudmFsdWVPZikmJiFuKGk9ci5jYWxsKHQpKSlyZXR1cm4gaTtpZighZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yocj10LnRvU3RyaW5nKSYmIW4oaT1yLmNhbGwodCkpKXJldHVybiBpO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDgpLmYsaT1yKDExKSxvPXIoMikoXCJ0b1N0cmluZ1RhZ1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLHIpe3QmJiFpKHQ9cj90OnQucHJvdG90eXBlLG8pJiZuKHQsbyx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOmV9KX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDYpLGk9cigxKS5kb2N1bWVudCxvPW4oaSkmJm4oaS5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG8/aS5jcmVhdGVFbGVtZW50KHQpOnt9fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ITB9LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9e2RlZmF1bHQ6cig5MSksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09dCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIrdCk7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUpe3ZhciByPU1hdGguY2VpbCxuPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpc05hTih0PSt0KT8wOih0PjA/bjpyKSh0KX19LGZ1bmN0aW9uKHQsZSl7ZS5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSxmdW5jdGlvbih0LGUscil7dmFyIG49cigzNCkoXCJrZXlzXCIpLGk9cigxOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfHwoblt0XT1pKHQpKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDI5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdChuKHQpKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDEpLGk9bltcIl9fY29yZS1qc19zaGFyZWRfX1wiXXx8KG5bXCJfX2NvcmUtanNfc2hhcmVkX19cIl09e30pO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaVt0XXx8KGlbdF09e30pfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9XCJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2ZcIi5zcGxpdChcIixcIil9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITA7dmFyIG4saT1yKDQ5KSxvPShuPWkpJiZuLl9fZXNNb2R1bGU/bjp7ZGVmYXVsdDpufTtlLmRlZmF1bHQ9ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOigwLG8uZGVmYXVsdCkoZSkpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX19LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITA7dmFyIG49YShyKDkzKSksaT1hKHIoOTcpKSxvPWEocig0OSkpO2Z1bmN0aW9uIGEodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWUuZGVmYXVsdD1mdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiKyh2b2lkIDA9PT1lP1widW5kZWZpbmVkXCI6KDAsby5kZWZhdWx0KShlKSkpO3QucHJvdG90eXBlPSgwLGkuZGVmYXVsdCkoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihuLmRlZmF1bHQ/KDAsbi5kZWZhdWx0KSh0LGUpOnQuX19wcm90b19fPWUpfX0sZnVuY3Rpb24odCxlLHIpe3QuZXhwb3J0cz0hcigzKSYmIXIoMTIpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyKDI2KShcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbih0LGUscil7dmFyIG49cig5KSxpPXIoNzIpLG89cigzNSksYT1yKDMyKShcIklFX1BST1RPXCIpLHU9ZnVuY3Rpb24oKXt9LHM9ZnVuY3Rpb24oKXt2YXIgdCxlPXIoMjYpKFwiaWZyYW1lXCIpLG49by5sZW5ndGg7Zm9yKGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixyKDU3KS5hcHBlbmRDaGlsZChlKSxlLnNyYz1cImphdmFzY3JpcHQ6XCIsKHQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50KS5vcGVuKCksdC53cml0ZShcIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XFwvc2NyaXB0PlwiKSx0LmNsb3NlKCkscz10LkY7bi0tOylkZWxldGUgcy5wcm90b3R5cGVbb1tuXV07cmV0dXJuIHMoKX07dC5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKHQsZSl7dmFyIHI7cmV0dXJuIG51bGwhPT10Pyh1LnByb3RvdHlwZT1uKHQpLHI9bmV3IHUsdS5wcm90b3R5cGU9bnVsbCxyW2FdPXQpOnI9cygpLHZvaWQgMD09PWU/cjppKHIsZSl9fSxmdW5jdGlvbih0LGUscil7ZS5mPXIoMil9LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDEpLGk9cigwKSxvPXIoMjcpLGE9cig0MCksdT1yKDgpLmY7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPWkuU3ltYm9sfHwoaS5TeW1ib2w9bz97fTpuLlN5bWJvbHx8e30pO1wiX1wiPT10LmNoYXJBdCgwKXx8dCBpbiBlfHx1KGUsdCx7dmFsdWU6YS5mKHQpfSl9fSxmdW5jdGlvbih0LGUpe2UuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSwsZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMTEpLGk9cigxMyksbz1yKDYzKSghMSksYT1yKDMyKShcIklFX1BST1RPXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciByLHU9aSh0KSxzPTAsYz1bXTtmb3IociBpbiB1KXIhPWEmJm4odSxyKSYmYy5wdXNoKHIpO2Zvcig7ZS5sZW5ndGg+czspbih1LHI9ZVtzKytdKSYmKH5vKGMscil8fGMucHVzaChyKSk7cmV0dXJuIGN9fSxmdW5jdGlvbih0LGUscil7dmFyIG49cig1KSxpPXIoMCksbz1yKDEyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgcj0oaS5PYmplY3R8fHt9KVt0XXx8T2JqZWN0W3RdLGE9e307YVt0XT1lKHIpLG4obi5TK24uRipvKGZ1bmN0aW9uKCl7cigxKX0pLFwiT2JqZWN0XCIsYSl9fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigyNyksaT1yKDUpLG89cig1MCksYT1yKDEwKSx1PXIoMTEpLHM9cigxNiksYz1yKDcxKSxsPXIoMjUpLGY9cig1MiksaD1yKDIpKFwiaXRlcmF0b3JcIikscD0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxyLHYseSxtLGcpe2MocixlLHYpO3ZhciBfLE8sYixFPWZ1bmN0aW9uKHQpe2lmKCFwJiZ0IGluIFIpcmV0dXJuIFJbdF07c3dpdGNoKHQpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyx0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsdCl9fSxQPWUrXCIgSXRlcmF0b3JcIixTPVwidmFsdWVzXCI9PXksdz0hMSxSPXQucHJvdG90eXBlLFQ9UltoXXx8UltcIkBAaXRlcmF0b3JcIl18fHkmJlJbeV0saz0hcCYmVHx8RSh5KSxNPXk/Uz9FKFwiZW50cmllc1wiKTprOnZvaWQgMCx4PVwiQXJyYXlcIj09ZT9SLmVudHJpZXN8fFQ6VDtpZih4JiYoYj1mKHguY2FsbChuZXcgdCkpKSE9PU9iamVjdC5wcm90b3R5cGUmJmIubmV4dCYmKGwoYixQLCEwKSxufHx1KGIsaCl8fGEoYixoLGQpKSxTJiZUJiZcInZhbHVlc1wiIT09VC5uYW1lJiYodz0hMCxrPWZ1bmN0aW9uKCl7cmV0dXJuIFQuY2FsbCh0aGlzKX0pLG4mJiFnfHwhcCYmIXcmJlJbaF18fGEoUixoLGspLHNbZV09ayxzW1BdPWQseSlpZihfPXt2YWx1ZXM6Uz9rOkUoXCJ2YWx1ZXNcIiksa2V5czptP2s6RShcImtleXNcIiksZW50cmllczpNfSxnKWZvcihPIGluIF8pTyBpbiBSfHxvKFIsTyxfW09dKTtlbHNlIGkoaS5QK2kuRioocHx8dyksZSxfKTtyZXR1cm4gX319LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDMxKSxpPXIoMTUpLG89cigxMyksYT1yKDI0KSx1PXIoMTEpLHM9cigzOCksYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2UuZj1yKDMpP2M6ZnVuY3Rpb24odCxlKXtpZih0PW8odCksZT1hKGUsITApLHMpdHJ5e3JldHVybiBjKHQsZSl9Y2F0Y2godCl7fWlmKHUodCxlKSlyZXR1cm4gaSghbi5mLmNhbGwodCxlKSx0W2VdKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDMwKSxpPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdD4wP2kobih0KSw5MDA3MTk5MjU0NzQwOTkxKTowfX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO2UuX19lc01vZHVsZT0hMDt2YXIgbj1hKHIoNzgpKSxpPWEocig4MCkpLG89XCJmdW5jdGlvblwiPT10eXBlb2YgaS5kZWZhdWx0JiZcInN5bWJvbFwiPT10eXBlb2Ygbi5kZWZhdWx0P2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGkuZGVmYXVsdCYmdC5jb25zdHJ1Y3Rvcj09PWkuZGVmYXVsdCYmdCE9PWkuZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH07ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZS5kZWZhdWx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIGkuZGVmYXVsdCYmXCJzeW1ib2xcIj09PW8obi5kZWZhdWx0KT9mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOm8odCl9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLmRlZmF1bHQmJnQuY29uc3RydWN0b3I9PT1pLmRlZmF1bHQmJnQhPT1pLmRlZmF1bHQucHJvdG90eXBlP1wic3ltYm9sXCI6dm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOm8odCl9fSxmdW5jdGlvbih0LGUscil7dC5leHBvcnRzPXIoMTApfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig3MCkoITApO3IoNDYpKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKHQpe3RoaXMuX3Q9U3RyaW5nKHQpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj1lLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9Oih0PW4oZSxyKSx0aGlzLl9pKz10Lmxlbmd0aCx7dmFsdWU6dCxkb25lOiExfSl9KX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMTEpLGk9cigzMyksbz1yKDMyKShcIklFX1BST1RPXCIpLGE9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbih0KXtyZXR1cm4gdD1pKHQpLG4odCxvKT90W29dOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY29uc3RydWN0b3ImJnQgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yP3QuY29uc3RydWN0b3IucHJvdG90eXBlOnQgaW5zdGFuY2VvZiBPYmplY3Q/YTpudWxsfX0sZnVuY3Rpb24odCxlLHIpe3IoNzMpO2Zvcih2YXIgbj1yKDEpLGk9cigxMCksbz1yKDE2KSxhPXIoMikoXCJ0b1N0cmluZ1RhZ1wiKSx1PVwiQ1NTUnVsZUxpc3QsQ1NTU3R5bGVEZWNsYXJhdGlvbixDU1NWYWx1ZUxpc3QsQ2xpZW50UmVjdExpc3QsRE9NUmVjdExpc3QsRE9NU3RyaW5nTGlzdCxET01Ub2tlbkxpc3QsRGF0YVRyYW5zZmVySXRlbUxpc3QsRmlsZUxpc3QsSFRNTEFsbENvbGxlY3Rpb24sSFRNTENvbGxlY3Rpb24sSFRNTEZvcm1FbGVtZW50LEhUTUxTZWxlY3RFbGVtZW50LE1lZGlhTGlzdCxNaW1lVHlwZUFycmF5LE5hbWVkTm9kZU1hcCxOb2RlTGlzdCxQYWludFJlcXVlc3RMaXN0LFBsdWdpbixQbHVnaW5BcnJheSxTVkdMZW5ndGhMaXN0LFNWR051bWJlckxpc3QsU1ZHUGF0aFNlZ0xpc3QsU1ZHUG9pbnRMaXN0LFNWR1N0cmluZ0xpc3QsU1ZHVHJhbnNmb3JtTGlzdCxTb3VyY2VCdWZmZXJMaXN0LFN0eWxlU2hlZXRMaXN0LFRleHRUcmFja0N1ZUxpc3QsVGV4dFRyYWNrTGlzdCxUb3VjaExpc3RcIi5zcGxpdChcIixcIikscz0wO3M8dS5sZW5ndGg7cysrKXt2YXIgYz11W3NdLGw9bltjXSxmPWwmJmwucHJvdG90eXBlO2YmJiFmW2FdJiZpKGYsYSxjKSxvW2NdPW8uQXJyYXl9fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigyMik7dC5leHBvcnRzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBmdW5jdGlvbih0KXt2YXIgZSxyO3RoaXMucHJvbWlzZT1uZXcgdChmdW5jdGlvbih0LG4pe2lmKHZvaWQgMCE9PWV8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKFwiQmFkIFByb21pc2UgY29uc3RydWN0b3JcIik7ZT10LHI9bn0pLHRoaXMucmVzb2x2ZT1uKGUpLHRoaXMucmVqZWN0PW4ocil9KHQpfX0sZnVuY3Rpb24odCxlLHIpe3QuZXhwb3J0cz17ZGVmYXVsdDpyKDYwKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMTgpO3QuZXhwb3J0cz1PYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbih0KXtyZXR1cm5cIlN0cmluZ1wiPT1uKHQpP3Quc3BsaXQoXCJcIik6T2JqZWN0KHQpfX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMSkuZG9jdW1lbnQ7dC5leHBvcnRzPW4mJm4uZG9jdW1lbnRFbGVtZW50fSxmdW5jdGlvbih0LGUscil7dmFyIG49cig0NCksaT1yKDM1KS5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKTtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKHQpe3JldHVybiBuKHQsaSl9fSxmdW5jdGlvbih0LGUscil7dC5leHBvcnRzPXtkZWZhdWx0OnIoNzYpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUscil7cig2MSk7dmFyIG49cigwKS5PYmplY3Q7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gbi5kZWZpbmVQcm9wZXJ0eSh0LGUscil9fSxmdW5jdGlvbih0LGUscil7dmFyIG49cig1KTtuKG4uUytuLkYqIXIoMyksXCJPYmplY3RcIix7ZGVmaW5lUHJvcGVydHk6cig4KS5mfSl9LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUscil7dmFyIG49cigxMyksaT1yKDQ4KSxvPXIoNjQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyLGEpe3ZhciB1LHM9bihlKSxjPWkocy5sZW5ndGgpLGw9byhhLGMpO2lmKHQmJnIhPXIpe2Zvcig7Yz5sOylpZigodT1zW2wrK10pIT11KXJldHVybiEwfWVsc2UgZm9yKDtjPmw7bCsrKWlmKCh0fHxsIGluIHMpJiZzW2xdPT09cilyZXR1cm4gdHx8bHx8MDtyZXR1cm4hdCYmLTF9fX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMzApLGk9TWF0aC5tYXgsbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4odD1uKHQpKTwwP2kodCtlLDApOm8odCxlKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDE4KSxpPXIoMikoXCJ0b1N0cmluZ1RhZ1wiKSxvPVwiQXJndW1lbnRzXCI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUscixhO3JldHVybiB2b2lkIDA9PT10P1wiVW5kZWZpbmVkXCI6bnVsbD09PXQ/XCJOdWxsXCI6XCJzdHJpbmdcIj09dHlwZW9mKHI9ZnVuY3Rpb24odCxlKXt0cnl7cmV0dXJuIHRbZV19Y2F0Y2godCl7fX0oZT1PYmplY3QodCksaSkpP3I6bz9uKGUpOlwiT2JqZWN0XCI9PShhPW4oZSkpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNhbGxlZT9cIkFyZ3VtZW50c1wiOmF9fSxmdW5jdGlvbih0LGUscil7dmFyIG49cig5KSxpPXIoMjIpLG89cigyKShcInNwZWNpZXNcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIHIsYT1uKHQpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1hfHx2b2lkIDA9PShyPW4oYSlbb10pP2U6aShyKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbixpLG8sYT1yKDE0KSx1PXIoMTA4KSxzPXIoNTcpLGM9cigyNiksbD1yKDEpLGY9bC5wcm9jZXNzLGg9bC5zZXRJbW1lZGlhdGUscD1sLmNsZWFySW1tZWRpYXRlLGQ9bC5NZXNzYWdlQ2hhbm5lbCx2PWwuRGlzcGF0Y2gseT0wLG09e30sZz1mdW5jdGlvbigpe3ZhciB0PSt0aGlzO2lmKG0uaGFzT3duUHJvcGVydHkodCkpe3ZhciBlPW1bdF07ZGVsZXRlIG1bdF0sZSgpfX0sXz1mdW5jdGlvbih0KXtnLmNhbGwodC5kYXRhKX07aCYmcHx8KGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KWUucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIG1bKyt5XT1mdW5jdGlvbigpe3UoXCJmdW5jdGlvblwiPT10eXBlb2YgdD90OkZ1bmN0aW9uKHQpLGUpfSxuKHkpLHl9LHA9ZnVuY3Rpb24odCl7ZGVsZXRlIG1bdF19LFwicHJvY2Vzc1wiPT1yKDE4KShmKT9uPWZ1bmN0aW9uKHQpe2YubmV4dFRpY2soYShnLHQsMSkpfTp2JiZ2Lm5vdz9uPWZ1bmN0aW9uKHQpe3Yubm93KGEoZyx0LDEpKX06ZD8obz0oaT1uZXcgZCkucG9ydDIsaS5wb3J0MS5vbm1lc3NhZ2U9XyxuPWEoby5wb3N0TWVzc2FnZSxvLDEpKTpsLmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhbC5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKHQpe2wucG9zdE1lc3NhZ2UodCtcIlwiLFwiKlwiKX0sbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLF8sITEpKTpuPVwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBjKFwic2NyaXB0XCIpP2Z1bmN0aW9uKHQpe3MuYXBwZW5kQ2hpbGQoYyhcInNjcmlwdFwiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7cy5yZW1vdmVDaGlsZCh0aGlzKSxnLmNhbGwodCl9fTpmdW5jdGlvbih0KXtzZXRUaW1lb3V0KGEoZyx0LDEpLDApfSksdC5leHBvcnRzPXtzZXQ6aCxjbGVhcjpwfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybntlOiExLHY6dCgpfX1jYXRjaCh0KXtyZXR1cm57ZTohMCx2OnR9fX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDkpLGk9cig2KSxvPXIoNTQpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKG4odCksaShlKSYmZS5jb25zdHJ1Y3Rvcj09PXQpcmV0dXJuIGU7dmFyIHI9by5mKHQpO3JldHVybigwLHIucmVzb2x2ZSkoZSksci5wcm9taXNlfX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMzApLGk9cigyOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3ZhciBvLGEsdT1TdHJpbmcoaShlKSkscz1uKHIpLGM9dS5sZW5ndGg7cmV0dXJuIHM8MHx8cz49Yz90P1wiXCI6dm9pZCAwOihvPXUuY2hhckNvZGVBdChzKSk8NTUyOTZ8fG8+NTYzMTl8fHMrMT09PWN8fChhPXUuY2hhckNvZGVBdChzKzEpKTw1NjMyMHx8YT41NzM0Mz90P3UuY2hhckF0KHMpOm86dD91LnNsaWNlKHMscysyKTphLTU2MzIwKyhvLTU1Mjk2PDwxMCkrNjU1MzZ9fX0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMzkpLGk9cigxNSksbz1yKDI1KSxhPXt9O3IoMTApKGEscigyKShcIml0ZXJhdG9yXCIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLHIpe3QucHJvdG90eXBlPW4oYSx7bmV4dDppKDEscil9KSxvKHQsZStcIiBJdGVyYXRvclwiKX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDgpLGk9cig5KSxvPXIoMTcpO3QuZXhwb3J0cz1yKDMpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKHQsZSl7aSh0KTtmb3IodmFyIHIsYT1vKGUpLHU9YS5sZW5ndGgscz0wO3U+czspbi5mKHQscj1hW3MrK10sZVtyXSk7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig3NCksaT1yKDc1KSxvPXIoMTYpLGE9cigxMyk7dC5leHBvcnRzPXIoNDYpKEFycmF5LFwiQXJyYXlcIixmdW5jdGlvbih0LGUpe3RoaXMuX3Q9YSh0KSx0aGlzLl9pPTAsdGhpcy5faz1lfSxmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3QsZT10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiF0fHxyPj10Lmxlbmd0aD8odGhpcy5fdD12b2lkIDAsaSgxKSk6aSgwLFwia2V5c1wiPT1lP3I6XCJ2YWx1ZXNcIj09ZT90W3JdOltyLHRbcl1dKX0sXCJ2YWx1ZXNcIiksby5Bcmd1bWVudHM9by5BcnJheSxuKFwia2V5c1wiKSxuKFwidmFsdWVzXCIpLG4oXCJlbnRyaWVzXCIpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue3ZhbHVlOmUsZG9uZTohIXR9fX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMCksaT1uLkpTT058fChuLkpTT049e3N0cmluZ2lmeTpKU09OLnN0cmluZ2lmeX0pO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaS5zdHJpbmdpZnkuYXBwbHkoaSxhcmd1bWVudHMpfX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMTkpKFwibWV0YVwiKSxpPXIoNiksbz1yKDExKSxhPXIoOCkuZix1PTAscz1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxjPSFyKDEyKShmdW5jdGlvbigpe3JldHVybiBzKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpfSksbD1mdW5jdGlvbih0KXthKHQsbix7dmFsdWU6e2k6XCJPXCIrICsrdSx3Ont9fX0pfSxmPXQuZXhwb3J0cz17S0VZOm4sTkVFRDohMSxmYXN0S2V5OmZ1bmN0aW9uKHQsZSl7aWYoIWkodCkpcmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHQ/dDooXCJzdHJpbmdcIj09dHlwZW9mIHQ/XCJTXCI6XCJQXCIpK3Q7aWYoIW8odCxuKSl7aWYoIXModCkpcmV0dXJuXCJGXCI7aWYoIWUpcmV0dXJuXCJFXCI7bCh0KX1yZXR1cm4gdFtuXS5pfSxnZXRXZWFrOmZ1bmN0aW9uKHQsZSl7aWYoIW8odCxuKSl7aWYoIXModCkpcmV0dXJuITA7aWYoIWUpcmV0dXJuITE7bCh0KX1yZXR1cm4gdFtuXS53fSxvbkZyZWV6ZTpmdW5jdGlvbih0KXtyZXR1cm4gYyYmZi5ORUVEJiZzKHQpJiYhbyh0LG4pJiZsKHQpLHR9fX0sZnVuY3Rpb24odCxlLHIpe3QuZXhwb3J0cz17ZGVmYXVsdDpyKDc5KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLHIpe3IoNTEpLHIoNTMpLHQuZXhwb3J0cz1yKDQwKS5mKFwiaXRlcmF0b3JcIil9LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9e2RlZmF1bHQ6cig4MSksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSxyKXtyKDgyKSxyKDYyKSxyKDg2KSxyKDg3KSx0LmV4cG9ydHM9cigwKS5TeW1ib2x9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDEpLGk9cigxMSksbz1yKDMpLGE9cig1KSx1PXIoNTApLHM9cig3NykuS0VZLGM9cigxMiksbD1yKDM0KSxmPXIoMjUpLGg9cigxOSkscD1yKDIpLGQ9cig0MCksdj1yKDQxKSx5PXIoODMpLG09cig4NCksZz1yKDkpLF89cig2KSxPPXIoMTMpLGI9cigyNCksRT1yKDE1KSxQPXIoMzkpLFM9cig4NSksdz1yKDQ3KSxSPXIoOCksVD1yKDE3KSxrPXcuZixNPVIuZix4PVMuZixDPW4uU3ltYm9sLGo9bi5KU09OLEE9aiYmai5zdHJpbmdpZnksTj1cInByb3RvdHlwZVwiLEk9cChcIl9oaWRkZW5cIiksVT1wKFwidG9QcmltaXRpdmVcIiksTD17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxEPWwoXCJzeW1ib2wtcmVnaXN0cnlcIiksRj1sKFwic3ltYm9sc1wiKSxIPWwoXCJvcC1zeW1ib2xzXCIpLFk9T2JqZWN0W05dLEI9XCJmdW5jdGlvblwiPT10eXBlb2YgQyxLPW4uUU9iamVjdCxHPSFLfHwhS1tOXXx8IUtbTl0uZmluZENoaWxkLEo9byYmYyhmdW5jdGlvbigpe3JldHVybiA3IT1QKE0oe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBNKHRoaXMsXCJhXCIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24odCxlLHIpe3ZhciBuPWsoWSxlKTtuJiZkZWxldGUgWVtlXSxNKHQsZSxyKSxuJiZ0IT09WSYmTShZLGUsbil9Ok0sVz1mdW5jdGlvbih0KXt2YXIgZT1GW3RdPVAoQ1tOXSk7cmV0dXJuIGUuX2s9dCxlfSxWPUImJlwic3ltYm9sXCI9PXR5cGVvZiBDLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEN9LHE9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0PT09WSYmcShILGUsciksZyh0KSxlPWIoZSwhMCksZyhyKSxpKEYsZSk/KHIuZW51bWVyYWJsZT8oaSh0LEkpJiZ0W0ldW2VdJiYodFtJXVtlXT0hMSkscj1QKHIse2VudW1lcmFibGU6RSgwLCExKX0pKTooaSh0LEkpfHxNKHQsSSxFKDEse30pKSx0W0ldW2VdPSEwKSxKKHQsZSxyKSk6TSh0LGUscil9LHo9ZnVuY3Rpb24odCxlKXtnKHQpO2Zvcih2YXIgcixuPXkoZT1PKGUpKSxpPTAsbz1uLmxlbmd0aDtvPmk7KXEodCxyPW5baSsrXSxlW3JdKTtyZXR1cm4gdH0sWD1mdW5jdGlvbih0KXt2YXIgZT1MLmNhbGwodGhpcyx0PWIodCwhMCkpO3JldHVybiEodGhpcz09PVkmJmkoRix0KSYmIWkoSCx0KSkmJighKGV8fCFpKHRoaXMsdCl8fCFpKEYsdCl8fGkodGhpcyxJKSYmdGhpc1tJXVt0XSl8fGUpfSwkPWZ1bmN0aW9uKHQsZSl7aWYodD1PKHQpLGU9YihlLCEwKSx0IT09WXx8IWkoRixlKXx8aShILGUpKXt2YXIgcj1rKHQsZSk7cmV0dXJuIXJ8fCFpKEYsZSl8fGkodCxJKSYmdFtJXVtlXXx8KHIuZW51bWVyYWJsZT0hMCkscn19LFE9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9eChPKHQpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKEYsZT1yW28rK10pfHxlPT1JfHxlPT1zfHxuLnB1c2goZSk7cmV0dXJuIG59LFo9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9dD09PVksbj14KHI/SDpPKHQpKSxvPVtdLGE9MDtuLmxlbmd0aD5hOykhaShGLGU9blthKytdKXx8ciYmIWkoWSxlKXx8by5wdXNoKEZbZV0pO3JldHVybiBvfTtCfHwodSgoQz1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBDKXRocm93IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciFcIik7dmFyIHQ9aChhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCksZT1mdW5jdGlvbihyKXt0aGlzPT09WSYmZS5jYWxsKEgsciksaSh0aGlzLEkpJiZpKHRoaXNbSV0sdCkmJih0aGlzW0ldW3RdPSExKSxKKHRoaXMsdCxFKDEscikpfTtyZXR1cm4gbyYmRyYmSihZLHQse2NvbmZpZ3VyYWJsZTohMCxzZXQ6ZX0pLFcodCl9KVtOXSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLHcuZj0kLFIuZj1xLHIoNTgpLmY9Uy5mPVEscigzMSkuZj1YLHIoNDIpLmY9WixvJiYhcigyNykmJnUoWSxcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsWCwhMCksZC5mPWZ1bmN0aW9uKHQpe3JldHVybiBXKHAodCkpfSksYShhLkcrYS5XK2EuRiohQix7U3ltYm9sOkN9KTtmb3IodmFyIHR0PVwiaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXNcIi5zcGxpdChcIixcIiksZXQ9MDt0dC5sZW5ndGg+ZXQ7KXAodHRbZXQrK10pO2Zvcih2YXIgcnQ9VChwLnN0b3JlKSxudD0wO3J0Lmxlbmd0aD5udDspdihydFtudCsrXSk7YShhLlMrYS5GKiFCLFwiU3ltYm9sXCIse2ZvcjpmdW5jdGlvbih0KXtyZXR1cm4gaShELHQrPVwiXCIpP0RbdF06RFt0XT1DKHQpfSxrZXlGb3I6ZnVuY3Rpb24odCl7aWYoIVYodCkpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgc3ltYm9sIVwiKTtmb3IodmFyIGUgaW4gRClpZihEW2VdPT09dClyZXR1cm4gZX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7Rz0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7Rz0hMX19KSxhKGEuUythLkYqIUIsXCJPYmplY3RcIix7Y3JlYXRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWU/UCh0KTp6KFAodCksZSl9LGRlZmluZVByb3BlcnR5OnEsZGVmaW5lUHJvcGVydGllczp6LGdldE93blByb3BlcnR5RGVzY3JpcHRvcjokLGdldE93blByb3BlcnR5TmFtZXM6USxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Wn0pLGomJmEoYS5TK2EuRiooIUJ8fGMoZnVuY3Rpb24oKXt2YXIgdD1DKCk7cmV0dXJuXCJbbnVsbF1cIiE9QShbdF0pfHxcInt9XCIhPUEoe2E6dH0pfHxcInt9XCIhPUEoT2JqZWN0KHQpKX0pKSxcIkpTT05cIix7c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyLG49W3RdLGk9MTthcmd1bWVudHMubGVuZ3RoPmk7KW4ucHVzaChhcmd1bWVudHNbaSsrXSk7aWYocj1lPW5bMV0sKF8oZSl8fHZvaWQgMCE9PXQpJiYhVih0KSlyZXR1cm4gbShlKXx8KGU9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYoZT1yLmNhbGwodGhpcyx0LGUpKSwhVihlKSlyZXR1cm4gZX0pLG5bMV09ZSxBLmFwcGx5KGosbil9fSksQ1tOXVtVXXx8cigxMCkoQ1tOXSxVLENbTl0udmFsdWVPZiksZihDLFwiU3ltYm9sXCIpLGYoTWF0aCxcIk1hdGhcIiwhMCksZihuLkpTT04sXCJKU09OXCIsITApfSxmdW5jdGlvbih0LGUscil7dmFyIG49cigxNyksaT1yKDQyKSxvPXIoMzEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1uKHQpLHI9aS5mO2lmKHIpZm9yKHZhciBhLHU9cih0KSxzPW8uZixjPTA7dS5sZW5ndGg+Yzspcy5jYWxsKHQsYT11W2MrK10pJiZlLnB1c2goYSk7cmV0dXJuIGV9fSxmdW5jdGlvbih0LGUscil7dmFyIG49cigxOCk7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiQXJyYXlcIj09bih0KX19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDEzKSxpPXIoNTgpLmYsbz17fS50b1N0cmluZyxhPVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gYSYmXCJbb2JqZWN0IFdpbmRvd11cIj09by5jYWxsKHQpP2Z1bmN0aW9uKHQpe3RyeXtyZXR1cm4gaSh0KX1jYXRjaCh0KXtyZXR1cm4gYS5zbGljZSgpfX0odCk6aShuKHQpKX19LGZ1bmN0aW9uKHQsZSxyKXtyKDQxKShcImFzeW5jSXRlcmF0b3JcIil9LGZ1bmN0aW9uKHQsZSxyKXtyKDQxKShcIm9ic2VydmFibGVcIil9LCwsLGZ1bmN0aW9uKHQsZSxyKXtyKDkyKSx0LmV4cG9ydHM9cigwKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDMzKSxpPXIoNTIpO3IoNDUpKFwiZ2V0UHJvdG90eXBlT2ZcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gaShuKHQpKX19KX0sZnVuY3Rpb24odCxlLHIpe3QuZXhwb3J0cz17ZGVmYXVsdDpyKDk0KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLHIpe3IoOTUpLHQuZXhwb3J0cz1yKDApLk9iamVjdC5zZXRQcm90b3R5cGVPZn0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoNSk7bihuLlMsXCJPYmplY3RcIix7c2V0UHJvdG90eXBlT2Y6cig5Nikuc2V0fSl9LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDYpLGk9cig5KSxvPWZ1bmN0aW9uKHQsZSl7aWYoaSh0KSwhbihlKSYmbnVsbCE9PWUpdGhyb3cgVHlwZUVycm9yKGUrXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbih0LGUsbil7dHJ5eyhuPXIoMTQpKEZ1bmN0aW9uLmNhbGwscig0NykuZihPYmplY3QucHJvdG90eXBlLFwiX19wcm90b19fXCIpLnNldCwyKSkodCxbXSksZT0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2godCl7ZT0hMH1yZXR1cm4gZnVuY3Rpb24odCxyKXtyZXR1cm4gbyh0LHIpLGU/dC5fX3Byb3RvX189cjpuKHQsciksdH19KHt9LCExKTp2b2lkIDApLGNoZWNrOm99fSxmdW5jdGlvbih0LGUscil7dC5leHBvcnRzPXtkZWZhdWx0OnIoOTgpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUscil7cig5OSk7dmFyIG49cigwKS5PYmplY3Q7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uY3JlYXRlKHQsZSl9fSxmdW5jdGlvbih0LGUscil7dmFyIG49cig1KTtuKG4uUyxcIk9iamVjdFwiLHtjcmVhdGU6cigzOSl9KX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoNjUpLGk9cigyKShcIml0ZXJhdG9yXCIpLG89cigxNik7dC5leHBvcnRzPXIoMCkuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24odCl7aWYodm9pZCAwIT10KXJldHVybiB0W2ldfHx0W1wiQEBpdGVyYXRvclwiXXx8b1tuKHQpXX19LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkRhdGFPYmplY3RTb3VyY2VMYW5ndWFnZT1lLkNhdGFsb2d1ZU9iamVjdFR5cGU9dm9pZCAwO3ZhciBuPXMocigyOCkpLGk9cyhyKDQpKSxvPXMocig3KSksYT1zKHIoMzYpKSx1PXMocigzNykpO2Z1bmN0aW9uIHModCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fXZhciBjPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxyLG8sdSxzLGMsbCl7KDAsaS5kZWZhdWx0KSh0aGlzLGUpO3ZhciBmPSgwLGEuZGVmYXVsdCkodGhpcywoZS5fX3Byb3RvX198fCgwLG4uZGVmYXVsdCkoZSkpLmNhbGwodGhpcykpO3JldHVybiBmLl9ndWlkPXQsZi5fdHlwZT1yLGYuX3ZlcnNpb249byxmLl9vYmplY3ROYW1lPXUsZi5fZGVzY3JpcHRpb249cyxmLl9sYW5ndWFnZT1jLGYuX3NvdXJjZVBhY2thZ2VVUkw9bCxmLl9zaWduYXR1cmU9bnVsbCxmLl9zb3VyY2VQYWNrYWdlPW51bGwsZn1yZXR1cm4oMCx1LmRlZmF1bHQpKGUsdCksKDAsby5kZWZhdWx0KShlLFt7a2V5OlwiZ3VpZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ndWlkfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX2d1aWQ9dCl9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX3R5cGU9dCl9fSx7a2V5OlwidmVyc2lvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJzaW9ufSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX3ZlcnNpb249dCl9fSx7a2V5Olwib2JqZWN0TmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3ROYW1lfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX29iamVjdE5hbWU9dCl9fSx7a2V5OlwiZGVzY3JpcHRpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRpb259LHNldDpmdW5jdGlvbih0KXt0JiYodGhpcy5fZGVzY3JpcHRpb249dCl9fSx7a2V5OlwibGFuZ3VhZ2VcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFuZ3VhZ2V9LHNldDpmdW5jdGlvbih0KXt0JiYodGhpcy5fbGFuZ3VhZ2U9dCl9fSx7a2V5Olwic2lnbmF0dXJlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpZ25hdHVyZX0sc2V0OmZ1bmN0aW9uKHQpe3QmJih0aGlzLl9zaWduYXR1cmU9dCl9fSx7a2V5Olwic291cmNlUGFja2FnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VQYWNrYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX3NvdXJjZVBhY2thZ2U9dCl9fSx7a2V5Olwic291cmNlUGFja2FnZVVSTFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VQYWNrYWdlVVJMfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX3NvdXJjZVBhY2thZ2VVUkw9dCl9fV0pLGV9KHMocigxMzEpKS5kZWZhdWx0KTtlLkNhdGFsb2d1ZU9iamVjdFR5cGU9e0hZUEVSVFk6XCJoeXBlcnR5XCIsUFJPVE9TVFVCOlwicHJvdG9zdHViXCIsSFlQRVJUWV9SVU5USU1FOlwiaHlwZXJ0eV9ydW50aW1lXCIsSFlQRVJUWV9JTlRFUkNFUFRPUjpcImh5cGVydHlfaW5zcGVjdG9yXCIsSFlQRVJUWV9EQVRBX09CSkVDVDpcImh5cGVydHlfZGF0YV9vYmplY3RcIn0sZS5EYXRhT2JqZWN0U291cmNlTGFuZ3VhZ2U9e0pBVkFTQ1JJUFRfRUNNQTY6XCJqYXZhc2NyaXB0X2VjbWE2XCIsSkFWQVNDUklQVF9FQ01BNTpcImphdmFzY3JpcHRfZWNtYTVcIixKU09OX1NDSEVNQV9WNDpcImpzb25fc2NoZW1hX3Y0XCIsUFlUSE9OOlwicHl0aG9uXCIsVFlQRVNDUklQVDpcInR5cGVzY3JpcHRcIn07ZS5kZWZhdWx0PWN9LGZ1bmN0aW9uKHQsZSxyKXtyKDYyKSxyKDUxKSxyKDUzKSxyKDEwMykscigxMTMpLHIoMTE0KSx0LmV4cG9ydHM9cigwKS5Qcm9taXNlfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4saSxvLGEsdT1yKDI3KSxzPXIoMSksYz1yKDE0KSxsPXIoNjUpLGY9cig1KSxoPXIoNikscD1yKDIyKSxkPXIoMTA0KSx2PXIoMTA1KSx5PXIoNjYpLG09cig2Nykuc2V0LGc9cigxMDkpKCksXz1yKDU0KSxPPXIoNjgpLGI9cig2OSksRT1cIlByb21pc2VcIixQPXMuVHlwZUVycm9yLFM9cy5wcm9jZXNzLHc9cy5Qcm9taXNlLFI9XCJwcm9jZXNzXCI9PWwoUyksVD1mdW5jdGlvbigpe30saz1pPV8uZixNPSEhZnVuY3Rpb24oKXt0cnl7dmFyIHQ9dy5yZXNvbHZlKDEpLGU9KHQuY29uc3RydWN0b3I9e30pW3IoMikoXCJzcGVjaWVzXCIpXT1mdW5jdGlvbih0KXt0KFQsVCl9O3JldHVybihSfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZ0LnRoZW4oVClpbnN0YW5jZW9mIGV9Y2F0Y2godCl7fX0oKSx4PWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiEoIWgodCl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mKGU9dC50aGVuKSkmJmV9LEM9ZnVuY3Rpb24odCxlKXtpZighdC5fbil7dC5fbj0hMDt2YXIgcj10Ll9jO2coZnVuY3Rpb24oKXtmb3IodmFyIG49dC5fdixpPTE9PXQuX3Msbz0wLGE9ZnVuY3Rpb24oZSl7dmFyIHIsbyxhPWk/ZS5vazplLmZhaWwsdT1lLnJlc29sdmUscz1lLnJlamVjdCxjPWUuZG9tYWluO3RyeXthPyhpfHwoMj09dC5faCYmTih0KSx0Ll9oPTEpLCEwPT09YT9yPW46KGMmJmMuZW50ZXIoKSxyPWEobiksYyYmYy5leGl0KCkpLHI9PT1lLnByb21pc2U/cyhQKFwiUHJvbWlzZS1jaGFpbiBjeWNsZVwiKSk6KG89eChyKSk/by5jYWxsKHIsdSxzKTp1KHIpKTpzKG4pfWNhdGNoKHQpe3ModCl9fTtyLmxlbmd0aD5vOylhKHJbbysrXSk7dC5fYz1bXSx0Ll9uPSExLGUmJiF0Ll9oJiZqKHQpfSl9fSxqPWZ1bmN0aW9uKHQpe20uY2FsbChzLGZ1bmN0aW9uKCl7dmFyIGUscixuLGk9dC5fdixvPUEodCk7aWYobyYmKGU9TyhmdW5jdGlvbigpe1I/Uy5lbWl0KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsaSx0KToocj1zLm9udW5oYW5kbGVkcmVqZWN0aW9uKT9yKHtwcm9taXNlOnQscmVhc29uOml9KToobj1zLmNvbnNvbGUpJiZuLmVycm9yJiZuLmVycm9yKFwiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uXCIsaSl9KSx0Ll9oPVJ8fEEodCk/MjoxKSx0Ll9hPXZvaWQgMCxvJiZlLmUpdGhyb3cgZS52fSl9LEE9ZnVuY3Rpb24odCl7cmV0dXJuIDEhPT10Ll9oJiYwPT09KHQuX2F8fHQuX2MpLmxlbmd0aH0sTj1mdW5jdGlvbih0KXttLmNhbGwocyxmdW5jdGlvbigpe3ZhciBlO1I/Uy5lbWl0KFwicmVqZWN0aW9uSGFuZGxlZFwiLHQpOihlPXMub25yZWplY3Rpb25oYW5kbGVkKSYmZSh7cHJvbWlzZTp0LHJlYXNvbjp0Ll92fSl9KX0sST1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2UuX2R8fChlLl9kPSEwLChlPWUuX3d8fGUpLl92PXQsZS5fcz0yLGUuX2F8fChlLl9hPWUuX2Muc2xpY2UoKSksQyhlLCEwKSl9LFU9ZnVuY3Rpb24odCl7dmFyIGUscj10aGlzO2lmKCFyLl9kKXtyLl9kPSEwLHI9ci5fd3x8cjt0cnl7aWYocj09PXQpdGhyb3cgUChcIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmXCIpOyhlPXgodCkpP2coZnVuY3Rpb24oKXt2YXIgbj17X3c6cixfZDohMX07dHJ5e2UuY2FsbCh0LGMoVSxuLDEpLGMoSSxuLDEpKX1jYXRjaCh0KXtJLmNhbGwobix0KX19KTooci5fdj10LHIuX3M9MSxDKHIsITEpKX1jYXRjaCh0KXtJLmNhbGwoe193OnIsX2Q6ITF9LHQpfX19O018fCh3PWZ1bmN0aW9uKHQpe2QodGhpcyx3LEUsXCJfaFwiKSxwKHQpLG4uY2FsbCh0aGlzKTt0cnl7dChjKFUsdGhpcywxKSxjKEksdGhpcywxKSl9Y2F0Y2godCl7SS5jYWxsKHRoaXMsdCl9fSwobj1mdW5jdGlvbih0KXt0aGlzLl9jPVtdLHRoaXMuX2E9dm9pZCAwLHRoaXMuX3M9MCx0aGlzLl9kPSExLHRoaXMuX3Y9dm9pZCAwLHRoaXMuX2g9MCx0aGlzLl9uPSExfSkucHJvdG90eXBlPXIoMTEwKSh3LnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbih0LGUpe3ZhciByPWsoeSh0aGlzLHcpKTtyZXR1cm4gci5vaz1cImZ1bmN0aW9uXCIhPXR5cGVvZiB0fHx0LHIuZmFpbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLHIuZG9tYWluPVI/Uy5kb21haW46dm9pZCAwLHRoaXMuX2MucHVzaChyKSx0aGlzLl9hJiZ0aGlzLl9hLnB1c2gociksdGhpcy5fcyYmQyh0aGlzLCExKSxyLnByb21pc2V9LGNhdGNoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLHQpfX0pLG89ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbjt0aGlzLnByb21pc2U9dCx0aGlzLnJlc29sdmU9YyhVLHQsMSksdGhpcy5yZWplY3Q9YyhJLHQsMSl9LF8uZj1rPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09d3x8dD09PWE/bmV3IG8odCk6aSh0KX0pLGYoZi5HK2YuVytmLkYqIU0se1Byb21pc2U6d30pLHIoMjUpKHcsRSkscigxMTEpKEUpLGE9cigwKS5Qcm9taXNlLGYoZi5TK2YuRiohTSxFLHtyZWplY3Q6ZnVuY3Rpb24odCl7dmFyIGU9ayh0aGlzKTtyZXR1cm4oMCxlLnJlamVjdCkodCksZS5wcm9taXNlfX0pLGYoZi5TK2YuRioodXx8IU0pLEUse3Jlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIGIodSYmdGhpcz09PWE/dzp0aGlzLHQpfX0pLGYoZi5TK2YuRiohKE0mJnIoMTEyKShmdW5jdGlvbih0KXt3LmFsbCh0KS5jYXRjaChUKX0pKSxFLHthbGw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxyPWsoZSksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxvPU8oZnVuY3Rpb24oKXt2YXIgcj1bXSxvPTAsYT0xO3YodCwhMSxmdW5jdGlvbih0KXt2YXIgdT1vKysscz0hMTtyLnB1c2godm9pZCAwKSxhKyssZS5yZXNvbHZlKHQpLnRoZW4oZnVuY3Rpb24odCl7c3x8KHM9ITAsclt1XT10LC0tYXx8bihyKSl9LGkpfSksLS1hfHxuKHIpfSk7cmV0dXJuIG8uZSYmaShvLnYpLHIucHJvbWlzZX0scmFjZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLHI9ayhlKSxuPXIucmVqZWN0LGk9TyhmdW5jdGlvbigpe3YodCwhMSxmdW5jdGlvbih0KXtlLnJlc29sdmUodCkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBpLmUmJm4oaS52KSxyLnByb21pc2V9fSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxyLG4pe2lmKCEodCBpbnN0YW5jZW9mIGUpfHx2b2lkIDAhPT1uJiZuIGluIHQpdGhyb3cgVHlwZUVycm9yKHIrXCI6IGluY29ycmVjdCBpbnZvY2F0aW9uIVwiKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDE0KSxpPXIoMTA2KSxvPXIoMTA3KSxhPXIoOSksdT1yKDQ4KSxzPXIoMTAwKSxjPXt9LGw9e307KGU9dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxyLGYsaCl7dmFyIHAsZCx2LHksbT1oP2Z1bmN0aW9uKCl7cmV0dXJuIHR9OnModCksZz1uKHIsZixlPzI6MSksXz0wO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIG0pdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGl0ZXJhYmxlIVwiKTtpZihvKG0pKXtmb3IocD11KHQubGVuZ3RoKTtwPl87XysrKWlmKCh5PWU/ZyhhKGQ9dFtfXSlbMF0sZFsxXSk6Zyh0W19dKSk9PT1jfHx5PT09bClyZXR1cm4geX1lbHNlIGZvcih2PW0uY2FsbCh0KTshKGQ9di5uZXh0KCkpLmRvbmU7KWlmKCh5PWkodixnLGQudmFsdWUsZSkpPT09Y3x8eT09PWwpcmV0dXJuIHl9KS5CUkVBSz1jLGUuUkVUVVJOPWx9LGZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1yKDkpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUscixpKXt0cnl7cmV0dXJuIGk/ZShuKHIpWzBdLHJbMV0pOmUocil9Y2F0Y2goZSl7dmFyIG89dC5yZXR1cm47dGhyb3cgdm9pZCAwIT09byYmbihvLmNhbGwodCkpLGV9fX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoMTYpLGk9cigyKShcIml0ZXJhdG9yXCIpLG89QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmKG4uQXJyYXk9PT10fHxvW2ldPT09dCl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj90KCk6dC5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj90KGVbMF0pOnQuY2FsbChyLGVbMF0pO2Nhc2UgMjpyZXR1cm4gbj90KGVbMF0sZVsxXSk6dC5jYWxsKHIsZVswXSxlWzFdKTtjYXNlIDM6cmV0dXJuIG4/dChlWzBdLGVbMV0sZVsyXSk6dC5jYWxsKHIsZVswXSxlWzFdLGVbMl0pO2Nhc2UgNDpyZXR1cm4gbj90KGVbMF0sZVsxXSxlWzJdLGVbM10pOnQuY2FsbChyLGVbMF0sZVsxXSxlWzJdLGVbM10pfXJldHVybiB0LmFwcGx5KHIsZSl9fSxmdW5jdGlvbih0LGUscil7dmFyIG49cigxKSxpPXIoNjcpLnNldCxvPW4uTXV0YXRpb25PYnNlcnZlcnx8bi5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGE9bi5wcm9jZXNzLHU9bi5Qcm9taXNlLHM9XCJwcm9jZXNzXCI9PXIoMTgpKGEpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0LGUscixjPWZ1bmN0aW9uKCl7dmFyIG4saTtmb3IocyYmKG49YS5kb21haW4pJiZuLmV4aXQoKTt0Oyl7aT10LmZuLHQ9dC5uZXh0O3RyeXtpKCl9Y2F0Y2gobil7dGhyb3cgdD9yKCk6ZT12b2lkIDAsbn19ZT12b2lkIDAsbiYmbi5lbnRlcigpfTtpZihzKXI9ZnVuY3Rpb24oKXthLm5leHRUaWNrKGMpfTtlbHNlIGlmKCFvfHxuLm5hdmlnYXRvciYmbi5uYXZpZ2F0b3Iuc3RhbmRhbG9uZSlpZih1JiZ1LnJlc29sdmUpe3ZhciBsPXUucmVzb2x2ZSgpO3I9ZnVuY3Rpb24oKXtsLnRoZW4oYyl9fWVsc2Ugcj1mdW5jdGlvbigpe2kuY2FsbChuLGMpfTtlbHNle3ZhciBmPSEwLGg9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7bmV3IG8oYykub2JzZXJ2ZShoLHtjaGFyYWN0ZXJEYXRhOiEwfSkscj1mdW5jdGlvbigpe2guZGF0YT1mPSFmfX1yZXR1cm4gZnVuY3Rpb24obil7dmFyIGk9e2ZuOm4sbmV4dDp2b2lkIDB9O2UmJihlLm5leHQ9aSksdHx8KHQ9aSxyKCkpLGU9aX19fSxmdW5jdGlvbih0LGUscil7dmFyIG49cigxMCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIGkgaW4gZSlyJiZ0W2ldP3RbaV09ZVtpXTpuKHQsaSxlW2ldKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDEpLGk9cigwKSxvPXIoOCksYT1yKDMpLHU9cigyKShcInNwZWNpZXNcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPVwiZnVuY3Rpb25cIj09dHlwZW9mIGlbdF0/aVt0XTpuW3RdO2EmJmUmJiFlW3VdJiZvLmYoZSx1LHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSxmdW5jdGlvbih0LGUscil7dmFyIG49cigyKShcIml0ZXJhdG9yXCIpLGk9ITE7dHJ5e3ZhciBvPVs3XVtuXSgpO28ucmV0dXJuPWZ1bmN0aW9uKCl7aT0hMH0sQXJyYXkuZnJvbShvLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHQpe310LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighZSYmIWkpcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBvPVs3XSxhPW9bbl0oKTthLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpyPSEwfX0sb1tuXT1mdW5jdGlvbigpe3JldHVybiBhfSx0KG8pfWNhdGNoKHQpe31yZXR1cm4gcn19LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDUpLGk9cigwKSxvPXIoMSksYT1yKDY2KSx1PXIoNjkpO24obi5QK24uUixcIlByb21pc2VcIix7ZmluYWxseTpmdW5jdGlvbih0KXt2YXIgZT1hKHRoaXMsaS5Qcm9taXNlfHxvLlByb21pc2UpLHI9XCJmdW5jdGlvblwiPT10eXBlb2YgdDtyZXR1cm4gdGhpcy50aGVuKHI/ZnVuY3Rpb24ocil7cmV0dXJuIHUoZSx0KCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcn0pfTp0LHI/ZnVuY3Rpb24ocil7cmV0dXJuIHUoZSx0KCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyByfSl9OnQpfX0pfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig1KSxpPXIoNTQpLG89cig2OCk7bihuLlMsXCJQcm9taXNlXCIse3RyeTpmdW5jdGlvbih0KXt2YXIgZT1pLmYodGhpcykscj1vKHQpO3JldHVybihyLmU/ZS5yZWplY3Q6ZS5yZXNvbHZlKShyLnYpLGUucHJvbWlzZX19KX0sLCwsLCwsLCwsLCwsLCwsLGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlJldGhpbmtPYmplY3Q9dm9pZCAwO3ZhciBuPXUocig1OSkpLGk9dShyKDQpKSxvPXUocig3KSksYT11KHIoMTM1KSk7ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19dmFyIHM9ZS5SZXRoaW5rT2JqZWN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpeygwLGkuZGVmYXVsdCkodGhpcyx0KX1yZXR1cm4oMCxvLmRlZmF1bHQpKHQsW3trZXk6XCJ2YWxpZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2EuZGVmYXVsdC5hZGRTY2hlbWEodC5pZCx0KTt2YXIgZT1hLmRlZmF1bHQudmFsaWRhdGVNdWx0aXBsZShKU09OLnBhcnNlKCgwLG4uZGVmYXVsdCkodGhpcykpLHQpO3JldHVybiBlLmVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2RlbGV0ZSB0LnN0YWNrfSksKCFlLnZhbGlkfHxlLm1pc3NpbmcubGVuZ3RoPjApJiYoY29uc29sZS53YXJuKFwiT2JqZWN0IHZhbGlkYXRpb24gXCIrKGUudmFsaWQ/XCJzdWNjZWVkZWQsIGJ1dCBzY2hlbWEgY29udGFpbmVkIHJlZmVyZW5jZXM6XCI6XCJmYWlsZWQ6XCIpLCgwLG4uZGVmYXVsdCkoZSxudWxsLDIpKSxjb25zb2xlLmxvZyhcIk9iamVjdDpcIiwoMCxuLmRlZmF1bHQpKHRoaXMsbnVsbCwyKSkpLGUudmFsaWR9fV0pLHR9KCk7ZS5kZWZhdWx0PXN9LCwsLGZ1bmN0aW9uKHQsZSxyKXt2YXIgbixpLG87aT1bXSx2b2lkIDA9PT0obz1cImZ1bmN0aW9uXCI9PXR5cGVvZihuPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG47T2JqZWN0LmtleXN8fChPYmplY3Qua2V5cz0odD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGU9IXt0b1N0cmluZzpudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZShcInRvU3RyaW5nXCIpLG49KHI9W1widG9TdHJpbmdcIixcInRvTG9jYWxlU3RyaW5nXCIsXCJ2YWx1ZU9mXCIsXCJoYXNPd25Qcm9wZXJ0eVwiLFwiaXNQcm90b3R5cGVPZlwiLFwicHJvcGVydHlJc0VudW1lcmFibGVcIixcImNvbnN0cnVjdG9yXCJdKS5sZW5ndGgsZnVuY3Rpb24oaSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGl8fG51bGw9PT1pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdFwiKTt2YXIgbz1bXTtmb3IodmFyIGEgaW4gaSl0LmNhbGwoaSxhKSYmby5wdXNoKGEpO2lmKGUpZm9yKHZhciB1PTA7dTxuO3UrKyl0LmNhbGwoaSxyW3VdKSYmby5wdXNoKHJbdV0pO3JldHVybiBvfSkpLE9iamVjdC5jcmVhdGV8fChPYmplY3QuY3JlYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiT2JqZWN0LmNyZWF0ZSBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgb25lIHBhcmFtZXRlci5cIik7cmV0dXJuIHQucHJvdG90eXBlPWUsbmV3IHR9fSgpKSxBcnJheS5pc0FycmF5fHwoQXJyYXkuaXNBcnJheT1mdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9KSxBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIGU9T2JqZWN0KHRoaXMpLHI9ZS5sZW5ndGg+Pj4wO2lmKDA9PT1yKXJldHVybi0xO3ZhciBuPTA7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYoKG49TnVtYmVyKGFyZ3VtZW50c1sxXSkpIT1uP249MDowIT09biYmbiE9PTEvMCYmbiE9PS0xLzAmJihuPShuPjB8fC0xKSpNYXRoLmZsb29yKE1hdGguYWJzKG4pKSkpLG4+PXIpcmV0dXJuLTE7Zm9yKHZhciBpPW4+PTA/bjpNYXRoLm1heChyLU1hdGguYWJzKG4pLDApO2k8cjtpKyspaWYoaSBpbiBlJiZlW2ldPT09dClyZXR1cm4gaTtyZXR1cm4tMX0pLE9iamVjdC5pc0Zyb3plbnx8KE9iamVjdC5pc0Zyb3plbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9XCJ0djRfdGVzdF9mcm96ZW5fa2V5XCI7dC5oYXNPd25Qcm9wZXJ0eShlKTspZSs9TWF0aC5yYW5kb20oKTt0cnl7cmV0dXJuIHRbZV09ITAsZGVsZXRlIHRbZV0sITF9Y2F0Y2godCl7cmV0dXJuITB9fSk7dmFyIGk9e1wiK1wiOiEwLFwiI1wiOiEwLFwiLlwiOiEwLFwiL1wiOiEwLFwiO1wiOiEwLFwiP1wiOiEwLFwiJlwiOiEwfSxvPXtcIipcIjohMH07ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZW5jb2RlVVJJKHQpLnJlcGxhY2UoLyUyNVswLTldWzAtOV0vZyxmdW5jdGlvbih0KXtyZXR1cm5cIiVcIit0LnN1YnN0cmluZygzKX0pfWZ1bmN0aW9uIHUodCl7dmFyIGU9XCJcIjtpW3QuY2hhckF0KDApXSYmKGU9dC5jaGFyQXQoMCksdD10LnN1YnN0cmluZygxKSk7dmFyIHI9XCJcIixuPVwiXCIsdT0hMCxzPSExLGM9ITE7XCIrXCI9PT1lP3U9ITE6XCIuXCI9PT1lPyhuPVwiLlwiLHI9XCIuXCIpOlwiL1wiPT09ZT8obj1cIi9cIixyPVwiL1wiKTpcIiNcIj09PWU/KG49XCIjXCIsdT0hMSk6XCI7XCI9PT1lPyhuPVwiO1wiLHI9XCI7XCIscz0hMCxjPSEwKTpcIj9cIj09PWU/KG49XCI/XCIscj1cIiZcIixzPSEwKTpcIiZcIj09PWUmJihuPVwiJlwiLHI9XCImXCIscz0hMCk7Zm9yKHZhciBsPVtdLGY9dC5zcGxpdChcIixcIiksaD1bXSxwPXt9LGQ9MDtkPGYubGVuZ3RoO2QrKyl7dmFyIHY9ZltkXSx5PW51bGw7aWYoLTEhPT12LmluZGV4T2YoXCI6XCIpKXt2YXIgbT12LnNwbGl0KFwiOlwiKTt2PW1bMF0seT1wYXJzZUludChtWzFdLDEwKX1mb3IodmFyIGc9e307b1t2LmNoYXJBdCh2Lmxlbmd0aC0xKV07KWdbdi5jaGFyQXQodi5sZW5ndGgtMSldPSEwLHY9di5zdWJzdHJpbmcoMCx2Lmxlbmd0aC0xKTt2YXIgXz17dHJ1bmNhdGU6eSxuYW1lOnYsc3VmZmljZXM6Z307aC5wdXNoKF8pLHBbdl09XyxsLnB1c2godil9dmFyIE89ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVwiXCIsaT0wLG89MDtvPGgubGVuZ3RoO28rKyl7dmFyIGw9aFtvXSxmPXQobC5uYW1lKTtpZihudWxsPT09Znx8dm9pZCAwPT09Znx8QXJyYXkuaXNBcnJheShmKSYmMD09PWYubGVuZ3RofHxcIm9iamVjdFwiPT10eXBlb2YgZiYmMD09PU9iamVjdC5rZXlzKGYpLmxlbmd0aClpKys7ZWxzZSBpZihlKz1vPT09aT9uOnJ8fFwiLFwiLEFycmF5LmlzQXJyYXkoZikpe3MmJihlKz1sLm5hbWUrXCI9XCIpO2Zvcih2YXIgcD0wO3A8Zi5sZW5ndGg7cCsrKXA+MCYmKGUrPWwuc3VmZmljZXNbXCIqXCJdP3J8fFwiLFwiOlwiLFwiLGwuc3VmZmljZXNbXCIqXCJdJiZzJiYoZSs9bC5uYW1lK1wiPVwiKSksZSs9dT9lbmNvZGVVUklDb21wb25lbnQoZltwXSkucmVwbGFjZSgvIS9nLFwiJTIxXCIpOmEoZltwXSl9ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgZil7cyYmIWwuc3VmZmljZXNbXCIqXCJdJiYoZSs9bC5uYW1lK1wiPVwiKTt2YXIgZD0hMDtmb3IodmFyIHYgaW4gZilkfHwoZSs9bC5zdWZmaWNlc1tcIipcIl0/cnx8XCIsXCI6XCIsXCIpLGQ9ITEsZSs9dT9lbmNvZGVVUklDb21wb25lbnQodikucmVwbGFjZSgvIS9nLFwiJTIxXCIpOmEodiksZSs9bC5zdWZmaWNlc1tcIipcIl0/XCI9XCI6XCIsXCIsZSs9dT9lbmNvZGVVUklDb21wb25lbnQoZlt2XSkucmVwbGFjZSgvIS9nLFwiJTIxXCIpOmEoZlt2XSl9ZWxzZSBzJiYoZSs9bC5uYW1lLGMmJlwiXCI9PT1mfHwoZSs9XCI9XCIpKSxudWxsIT1sLnRydW5jYXRlJiYoZj1mLnN1YnN0cmluZygwLGwudHJ1bmNhdGUpKSxlKz11P2VuY29kZVVSSUNvbXBvbmVudChmKS5yZXBsYWNlKC8hL2csXCIlMjFcIik6YShmKX1yZXR1cm4gZX07cmV0dXJuIE8udmFyTmFtZXM9bCx7cHJlZml4Om4sc3Vic3RpdHV0aW9uOk99fWZ1bmN0aW9uIHModCl7aWYoISh0aGlzIGluc3RhbmNlb2YgcykpcmV0dXJuIG5ldyBzKHQpO2Zvcih2YXIgZT10LnNwbGl0KFwie1wiKSxyPVtlLnNoaWZ0KCldLG49W10saT1bXSxvPVtdO2UubGVuZ3RoPjA7KXt2YXIgYT1lLnNoaWZ0KCksYz1hLnNwbGl0KFwifVwiKVswXSxsPWEuc3Vic3RyaW5nKGMubGVuZ3RoKzEpLGY9dShjKTtpLnB1c2goZi5zdWJzdGl0dXRpb24pLG4ucHVzaChmLnByZWZpeCksci5wdXNoKGwpLG89by5jb25jYXQoZi5zdWJzdGl0dXRpb24udmFyTmFtZXMpfXRoaXMuZmlsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9clswXSxuPTA7bjxpLmxlbmd0aDtuKyspe2UrPSgwLGlbbl0pKHQpLGUrPXJbbisxXX1yZXR1cm4gZX0sdGhpcy52YXJOYW1lcz1vLHRoaXMudGVtcGxhdGU9dH1zLnByb3RvdHlwZT17dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZW1wbGF0ZX0sZmlsbEZyb21PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZmlsbChmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pfX07dmFyIGM9ZnVuY3Rpb24odCxlLHIsbixpKXtpZih0aGlzLm1pc3Npbmc9W10sdGhpcy5taXNzaW5nTWFwPXt9LHRoaXMuZm9ybWF0VmFsaWRhdG9ycz10P09iamVjdC5jcmVhdGUodC5mb3JtYXRWYWxpZGF0b3JzKTp7fSx0aGlzLnNjaGVtYXM9dD9PYmplY3QuY3JlYXRlKHQuc2NoZW1hcyk6e30sdGhpcy5jb2xsZWN0TXVsdGlwbGU9ZSx0aGlzLmVycm9ycz1bXSx0aGlzLmhhbmRsZUVycm9yPWU/dGhpcy5jb2xsZWN0RXJyb3I6dGhpcy5yZXR1cm5FcnJvcixuJiYodGhpcy5jaGVja1JlY3Vyc2l2ZT0hMCx0aGlzLnNjYW5uZWQ9W10sdGhpcy5zY2FubmVkRnJvemVuPVtdLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXM9W10sdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9ycz1bXSx0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXk9XCJ0djRfdmFsaWRhdGlvbl9pZFwiLHRoaXMudmFsaWRhdGlvbkVycm9yc0tleT1cInR2NF92YWxpZGF0aW9uX2Vycm9yc19pZFwiKSxpJiYodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzPSEwLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30pLHRoaXMuZXJyb3JSZXBvcnRlcj1yfHxtKFwiZW5cIiksXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuZXJyb3JSZXBvcnRlcil0aHJvdyBuZXcgRXJyb3IoXCJkZWJ1Z1wiKTtpZih0aGlzLmRlZmluZWRLZXl3b3Jkcz17fSx0KWZvcih2YXIgbyBpbiB0LmRlZmluZWRLZXl3b3Jkcyl0aGlzLmRlZmluZWRLZXl3b3Jkc1tvXT10LmRlZmluZWRLZXl3b3Jkc1tvXS5zbGljZSgwKX07ZnVuY3Rpb24gbCh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKHQmJmUmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZcIm9iamVjdFwiPT10eXBlb2YgZSl7aWYoQXJyYXkuaXNBcnJheSh0KSE9PUFycmF5LmlzQXJyYXkoZSkpcmV0dXJuITE7aWYoQXJyYXkuaXNBcnJheSh0KSl7aWYodC5sZW5ndGghPT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighbCh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7dmFyIG47Zm9yKG4gaW4gdClpZih2b2lkIDA9PT1lW25dJiZ2b2lkIDAhPT10W25dKXJldHVybiExO2ZvcihuIGluIGUpaWYodm9pZCAwPT09dFtuXSYmdm9pZCAwIT09ZVtuXSlyZXR1cm4hMTtmb3IobiBpbiB0KWlmKCFsKHRbbl0sZVtuXSkpcmV0dXJuITF9cmV0dXJuITB9cmV0dXJuITF9Yy5wcm90b3R5cGUuZGVmaW5lS2V5d29yZD1mdW5jdGlvbih0LGUpe3RoaXMuZGVmaW5lZEtleXdvcmRzW3RdPXRoaXMuZGVmaW5lZEtleXdvcmRzW3RdfHxbXSx0aGlzLmRlZmluZWRLZXl3b3Jkc1t0XS5wdXNoKGUpfSxjLnByb3RvdHlwZS5jcmVhdGVFcnJvcj1mdW5jdGlvbih0LGUscixuLGksbyxhKXt2YXIgdT1uZXcgRSh0LGUscixuLGkpO3JldHVybiB1Lm1lc3NhZ2U9dGhpcy5lcnJvclJlcG9ydGVyKHUsbyxhKSx1fSxjLnByb3RvdHlwZS5yZXR1cm5FcnJvcj1mdW5jdGlvbih0KXtyZXR1cm4gdH0sYy5wcm90b3R5cGUuY29sbGVjdEVycm9yPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLmVycm9ycy5wdXNoKHQpLG51bGx9LGMucHJvdG90eXBlLnByZWZpeEVycm9ycz1mdW5jdGlvbih0LGUscil7Zm9yKHZhciBuPXQ7bjx0aGlzLmVycm9ycy5sZW5ndGg7bisrKXRoaXMuZXJyb3JzW25dPXRoaXMuZXJyb3JzW25dLnByZWZpeFdpdGgoZSxyKTtyZXR1cm4gdGhpc30sYy5wcm90b3R5cGUuYmFuVW5rbm93blByb3BlcnRpZXM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocyl7dmFyIG49dGhpcy5jcmVhdGVFcnJvcihnLlVOS05PV05fUFJPUEVSVFkse3BhdGg6cn0scixcIlwiLG51bGwsdCxlKSxpPXRoaXMuaGFuZGxlRXJyb3Iobik7aWYoaSlyZXR1cm4gaX1yZXR1cm4gbnVsbH0sYy5wcm90b3R5cGUuYWRkRm9ybWF0PWZ1bmN0aW9uKHQsZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpe2Zvcih2YXIgciBpbiB0KXRoaXMuYWRkRm9ybWF0KHIsdFtyXSk7cmV0dXJuIHRoaXN9dGhpcy5mb3JtYXRWYWxpZGF0b3JzW3RdPWV9LGMucHJvdG90eXBlLnJlc29sdmVSZWZzPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwIT09dC4kcmVmKXtpZigoZT1lfHx7fSlbdC4kcmVmXSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLkNJUkNVTEFSX1JFRkVSRU5DRSx7dXJsczpPYmplY3Qua2V5cyhlKS5qb2luKFwiLCBcIil9LFwiXCIsXCJcIixudWxsLHZvaWQgMCx0KTtlW3QuJHJlZl09ITAsdD10aGlzLmdldFNjaGVtYSh0LiRyZWYsZSl9cmV0dXJuIHR9LGMucHJvdG90eXBlLmdldFNjaGVtYT1mdW5jdGlvbih0LGUpe3ZhciByO2lmKHZvaWQgMCE9PXRoaXMuc2NoZW1hc1t0XSlyZXR1cm4gcj10aGlzLnNjaGVtYXNbdF0sdGhpcy5yZXNvbHZlUmVmcyhyLGUpO3ZhciBuPXQsaT1cIlwiO2lmKC0xIT09dC5pbmRleE9mKFwiI1wiKSYmKGk9dC5zdWJzdHJpbmcodC5pbmRleE9mKFwiI1wiKSsxKSxuPXQuc3Vic3RyaW5nKDAsdC5pbmRleE9mKFwiI1wiKSkpLFwib2JqZWN0XCI9PXR5cGVvZiB0aGlzLnNjaGVtYXNbbl0pe3I9dGhpcy5zY2hlbWFzW25dO3ZhciBvPWRlY29kZVVSSUNvbXBvbmVudChpKTtpZihcIlwiPT09bylyZXR1cm4gdGhpcy5yZXNvbHZlUmVmcyhyLGUpO2lmKFwiL1wiIT09by5jaGFyQXQoMCkpcmV0dXJuO2Zvcih2YXIgYT1vLnNwbGl0KFwiL1wiKS5zbGljZSgxKSx1PTA7dTxhLmxlbmd0aDt1Kyspe3ZhciBzPWFbdV0ucmVwbGFjZSgvfjEvZyxcIi9cIikucmVwbGFjZSgvfjAvZyxcIn5cIik7aWYodm9pZCAwPT09cltzXSl7cj12b2lkIDA7YnJlYWt9cj1yW3NdfWlmKHZvaWQgMCE9PXIpcmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMocixlKX12b2lkIDA9PT10aGlzLm1pc3Npbmdbbl0mJih0aGlzLm1pc3NpbmcucHVzaChuKSx0aGlzLm1pc3Npbmdbbl09bix0aGlzLm1pc3NpbmdNYXBbbl09bil9LGMucHJvdG90eXBlLnNlYXJjaFNjaGVtYXM9ZnVuY3Rpb24odCxlKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXRoaXMuc2VhcmNoU2NoZW1hcyh0W3JdLGUpO2Vsc2UgaWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHQpe1wic3RyaW5nXCI9PXR5cGVvZiB0LmlkJiZmdW5jdGlvbih0LGUpe2lmKGUuc3Vic3RyaW5nKDAsdC5sZW5ndGgpPT09dCl7dmFyIHI9ZS5zdWJzdHJpbmcodC5sZW5ndGgpO2lmKGUubGVuZ3RoPjAmJlwiL1wiPT09ZS5jaGFyQXQodC5sZW5ndGgtMSl8fFwiI1wiPT09ci5jaGFyQXQoMCl8fFwiP1wiPT09ci5jaGFyQXQoMCkpcmV0dXJuITB9cmV0dXJuITF9KGUsdC5pZCkmJnZvaWQgMD09PXRoaXMuc2NoZW1hc1t0LmlkXSYmKHRoaXMuc2NoZW1hc1t0LmlkXT10KTtmb3IodmFyIG4gaW4gdClpZihcImVudW1cIiE9PW4paWYoXCJvYmplY3RcIj09dHlwZW9mIHRbbl0pdGhpcy5zZWFyY2hTY2hlbWFzKHRbbl0sZSk7ZWxzZSBpZihcIiRyZWZcIj09PW4pe3ZhciBpPXYodFtuXSk7aSYmdm9pZCAwPT09dGhpcy5zY2hlbWFzW2ldJiZ2b2lkIDA9PT10aGlzLm1pc3NpbmdNYXBbaV0mJih0aGlzLm1pc3NpbmdNYXBbaV09aSl9fX0sYy5wcm90b3R5cGUuYWRkU2NoZW1hPWZ1bmN0aW9uKHQsZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHR8fHZvaWQgMD09PWUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiB0fHxcInN0cmluZ1wiIT10eXBlb2YgdC5pZClyZXR1cm47dD0oZT10KS5pZH10PT09dih0KStcIiNcIiYmKHQ9dih0KSksdGhpcy5zY2hlbWFzW3RdPWUsZGVsZXRlIHRoaXMubWlzc2luZ01hcFt0XSx5KGUsdCksdGhpcy5zZWFyY2hTY2hlbWFzKGUsdCl9LGMucHJvdG90eXBlLmdldFNjaGVtYU1hcD1mdW5jdGlvbigpe3ZhciB0PXt9O2Zvcih2YXIgZSBpbiB0aGlzLnNjaGVtYXMpdFtlXT10aGlzLnNjaGVtYXNbZV07cmV0dXJuIHR9LGMucHJvdG90eXBlLmdldFNjaGVtYVVyaXM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciByIGluIHRoaXMuc2NoZW1hcyl0JiYhdC50ZXN0KHIpfHxlLnB1c2gocik7cmV0dXJuIGV9LGMucHJvdG90eXBlLmdldE1pc3NpbmdVcmlzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgciBpbiB0aGlzLm1pc3NpbmdNYXApdCYmIXQudGVzdChyKXx8ZS5wdXNoKHIpO3JldHVybiBlfSxjLnByb3RvdHlwZS5kcm9wU2NoZW1hcz1mdW5jdGlvbigpe3RoaXMuc2NoZW1hcz17fSx0aGlzLnJlc2V0KCl9LGMucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmVycm9ycz1bXX0sYy5wcm90b3R5cGUudmFsaWRhdGVBbGw9ZnVuY3Rpb24odCxlLHIsbixpKXt2YXIgbztpZighKGU9dGhpcy5yZXNvbHZlUmVmcyhlKSkpcmV0dXJuIG51bGw7aWYoZSBpbnN0YW5jZW9mIEUpcmV0dXJuIHRoaXMuZXJyb3JzLnB1c2goZSksZTt2YXIgYSx1PXRoaXMuZXJyb3JzLmxlbmd0aCxzPW51bGwsYz1udWxsO2lmKHRoaXMuY2hlY2tSZWN1cnNpdmUmJnQmJlwib2JqZWN0XCI9PXR5cGVvZiB0KXtpZihvPSF0aGlzLnNjYW5uZWQubGVuZ3RoLHRbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XSl7dmFyIGw9dFt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmluZGV4T2YoZSk7aWYoLTEhPT1sKXJldHVybiB0aGlzLmVycm9ycz10aGlzLmVycm9ycy5jb25jYXQodFt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2xdKSxudWxsfWlmKE9iamVjdC5pc0Zyb3plbih0KSYmLTEhPT0oYT10aGlzLnNjYW5uZWRGcm96ZW4uaW5kZXhPZih0KSkpe3ZhciBmPXRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbYV0uaW5kZXhPZihlKTtpZigtMSE9PWYpcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLmNvbmNhdCh0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW2FdW2ZdKSxudWxsfWlmKHRoaXMuc2Nhbm5lZC5wdXNoKHQpLE9iamVjdC5pc0Zyb3plbih0KSktMT09PWEmJihhPXRoaXMuc2Nhbm5lZEZyb3plbi5sZW5ndGgsdGhpcy5zY2FubmVkRnJvemVuLnB1c2godCksdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcy5wdXNoKFtdKSkscz10aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2FdLmxlbmd0aCx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW2FdW3NdPWUsdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1thXVtzXT1bXTtlbHNle2lmKCF0W3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pdHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHRoaXMudmFsaWRhdGVkU2NoZW1hc0tleSx7dmFsdWU6W10sY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KX1jYXRjaChlKXt0W3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV09W10sdFt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldPVtdfWM9dFt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmxlbmd0aCx0W3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV1bY109ZSx0W3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bY109W119fXZhciBoPXRoaXMuZXJyb3JzLmxlbmd0aCxwPXRoaXMudmFsaWRhdGVCYXNpYyh0LGUsaSl8fHRoaXMudmFsaWRhdGVOdW1lcmljKHQsZSxpKXx8dGhpcy52YWxpZGF0ZVN0cmluZyh0LGUsaSl8fHRoaXMudmFsaWRhdGVBcnJheSh0LGUsaSl8fHRoaXMudmFsaWRhdGVPYmplY3QodCxlLGkpfHx0aGlzLnZhbGlkYXRlQ29tYmluYXRpb25zKHQsZSxpKXx8dGhpcy52YWxpZGF0ZUh5cGVybWVkaWEodCxlLGkpfHx0aGlzLnZhbGlkYXRlRm9ybWF0KHQsZSxpKXx8dGhpcy52YWxpZGF0ZURlZmluZWRLZXl3b3Jkcyh0LGUsaSl8fG51bGw7aWYobyl7Zm9yKDt0aGlzLnNjYW5uZWQubGVuZ3RoOyl7ZGVsZXRlIHRoaXMuc2Nhbm5lZC5wb3AoKVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldfXRoaXMuc2Nhbm5lZEZyb3plbj1bXSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzPVtdfWlmKHB8fGghPT10aGlzLmVycm9ycy5sZW5ndGgpZm9yKDtyJiZyLmxlbmd0aHx8biYmbi5sZW5ndGg7KXt2YXIgZD1yJiZyLmxlbmd0aD9cIlwiK3IucG9wKCk6bnVsbCx2PW4mJm4ubGVuZ3RoP1wiXCIrbi5wb3AoKTpudWxsO3AmJihwPXAucHJlZml4V2l0aChkLHYpKSx0aGlzLnByZWZpeEVycm9ycyhoLGQsdil9cmV0dXJuIG51bGwhPT1zP3RoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbYV1bc109dGhpcy5lcnJvcnMuc2xpY2UodSk6bnVsbCE9PWMmJih0W3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bY109dGhpcy5lcnJvcnMuc2xpY2UodSkpLHRoaXMuaGFuZGxlRXJyb3IocCl9LGMucHJvdG90eXBlLnZhbGlkYXRlRm9ybWF0PWZ1bmN0aW9uKHQsZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUuZm9ybWF0fHwhdGhpcy5mb3JtYXRWYWxpZGF0b3JzW2UuZm9ybWF0XSlyZXR1cm4gbnVsbDt2YXIgcj10aGlzLmZvcm1hdFZhbGlkYXRvcnNbZS5mb3JtYXRdLmNhbGwobnVsbCx0LGUpO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiByfHxcIm51bWJlclwiPT10eXBlb2Ygcj90aGlzLmNyZWF0ZUVycm9yKGcuRk9STUFUX0NVU1RPTSx7bWVzc2FnZTpyfSxcIlwiLFwiL2Zvcm1hdFwiLG51bGwsdCxlKTpyJiZcIm9iamVjdFwiPT10eXBlb2Ygcj90aGlzLmNyZWF0ZUVycm9yKGcuRk9STUFUX0NVU1RPTSx7bWVzc2FnZTpyLm1lc3NhZ2V8fFwiP1wifSxyLmRhdGFQYXRofHxcIlwiLHIuc2NoZW1hUGF0aHx8XCIvZm9ybWF0XCIsbnVsbCx0LGUpOm51bGx9LGMucHJvdG90eXBlLnZhbGlkYXRlRGVmaW5lZEtleXdvcmRzPWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG4gaW4gdGhpcy5kZWZpbmVkS2V5d29yZHMpaWYodm9pZCAwIT09ZVtuXSlmb3IodmFyIGk9dGhpcy5kZWZpbmVkS2V5d29yZHNbbl0sbz0wO288aS5sZW5ndGg7bysrKXt2YXIgYT0oMCxpW29dKSh0LGVbbl0sZSxyKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYXx8XCJudW1iZXJcIj09dHlwZW9mIGEpcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5LRVlXT1JEX0NVU1RPTSx7a2V5Om4sbWVzc2FnZTphfSxcIlwiLFwiXCIsbnVsbCx0LGUpLnByZWZpeFdpdGgobnVsbCxuKTtpZihhJiZcIm9iamVjdFwiPT10eXBlb2YgYSl7dmFyIHU9YS5jb2RlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB1KXtpZighZ1t1XSl0aHJvdyBuZXcgRXJyb3IoXCJVbmRlZmluZWQgZXJyb3IgY29kZSAodXNlIGRlZmluZUVycm9yKTogXCIrdSk7dT1nW3VdfWVsc2VcIm51bWJlclwiIT10eXBlb2YgdSYmKHU9Zy5LRVlXT1JEX0NVU1RPTSk7dmFyIHM9XCJvYmplY3RcIj09dHlwZW9mIGEubWVzc2FnZT9hLm1lc3NhZ2U6e2tleTpuLG1lc3NhZ2U6YS5tZXNzYWdlfHxcIj9cIn0sYz1hLnNjaGVtYVBhdGh8fFwiL1wiK24ucmVwbGFjZSgvfi9nLFwifjBcIikucmVwbGFjZSgvXFwvL2csXCJ+MVwiKTtyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih1LHMsYS5kYXRhUGF0aHx8bnVsbCxjLG51bGwsdCxlKX19cmV0dXJuIG51bGx9LGMucHJvdG90eXBlLnZhbGlkYXRlQmFzaWM9ZnVuY3Rpb24odCxlLHIpe3ZhciBuO3JldHVybihuPXRoaXMudmFsaWRhdGVUeXBlKHQsZSxyKSk/bi5wcmVmaXhXaXRoKG51bGwsXCJ0eXBlXCIpOihuPXRoaXMudmFsaWRhdGVFbnVtKHQsZSxyKSk/bi5wcmVmaXhXaXRoKG51bGwsXCJ0eXBlXCIpOm51bGx9LGMucHJvdG90eXBlLnZhbGlkYXRlVHlwZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUudHlwZSlyZXR1cm4gbnVsbDt2YXIgcj10eXBlb2YgdDtudWxsPT09dD9yPVwibnVsbFwiOkFycmF5LmlzQXJyYXkodCkmJihyPVwiYXJyYXlcIik7dmFyIG49ZS50eXBlO0FycmF5LmlzQXJyYXkobil8fChuPVtuXSk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV07aWYobz09PXJ8fFwiaW50ZWdlclwiPT09byYmXCJudW1iZXJcIj09PXImJnQlMT09MClyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLklOVkFMSURfVFlQRSx7dHlwZTpyLGV4cGVjdGVkOm4uam9pbihcIi9cIil9LFwiXCIsXCJcIixudWxsLHQsZSl9LGMucHJvdG90eXBlLnZhbGlkYXRlRW51bT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUuZW51bSlyZXR1cm4gbnVsbDtmb3IodmFyIHI9MDtyPGUuZW51bS5sZW5ndGg7cisrKXtpZihsKHQsZS5lbnVtW3JdKSlyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihnLkVOVU1fTUlTTUFUQ0gse3ZhbHVlOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBKU09OP0pTT04uc3RyaW5naWZ5KHQpOnR9LFwiXCIsXCJcIixudWxsLHQsZSl9LGMucHJvdG90eXBlLnZhbGlkYXRlTnVtZXJpYz1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMudmFsaWRhdGVNdWx0aXBsZU9mKHQsZSxyKXx8dGhpcy52YWxpZGF0ZU1pbk1heCh0LGUscil8fHRoaXMudmFsaWRhdGVOYU4odCxlLHIpfHxudWxsfTt2YXIgZj1NYXRoLnBvdygyLC01MSksaD0xLWY7ZnVuY3Rpb24gcCh0KXt2YXIgZT1TdHJpbmcodCkucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKS5tYXRjaCgvXihbXjpcXC8/I10rOik/KFxcL1xcLyg/OlteOkBdKig/OjpbXjpAXSopP0ApPygoW146XFwvPyNdKikoPzo6KFxcZCopKT8pKT8oW14/I10qKShcXD9bXiNdKik/KCNbXFxzXFxTXSopPy8pO3JldHVybiBlP3tocmVmOmVbMF18fFwiXCIscHJvdG9jb2w6ZVsxXXx8XCJcIixhdXRob3JpdHk6ZVsyXXx8XCJcIixob3N0OmVbM118fFwiXCIsaG9zdG5hbWU6ZVs0XXx8XCJcIixwb3J0OmVbNV18fFwiXCIscGF0aG5hbWU6ZVs2XXx8XCJcIixzZWFyY2g6ZVs3XXx8XCJcIixoYXNoOmVbOF18fFwiXCJ9Om51bGx9ZnVuY3Rpb24gZCh0LGUpe3JldHVybiBlPXAoZXx8XCJcIiksdD1wKHR8fFwiXCIpLGUmJnQ/KGUucHJvdG9jb2x8fHQucHJvdG9jb2wpKyhlLnByb3RvY29sfHxlLmF1dGhvcml0eT9lLmF1dGhvcml0eTp0LmF1dGhvcml0eSkrKHI9ZS5wcm90b2NvbHx8ZS5hdXRob3JpdHl8fFwiL1wiPT09ZS5wYXRobmFtZS5jaGFyQXQoMCk/ZS5wYXRobmFtZTplLnBhdGhuYW1lPyh0LmF1dGhvcml0eSYmIXQucGF0aG5hbWU/XCIvXCI6XCJcIikrdC5wYXRobmFtZS5zbGljZSgwLHQucGF0aG5hbWUubGFzdEluZGV4T2YoXCIvXCIpKzEpK2UucGF0aG5hbWU6dC5wYXRobmFtZSxuPVtdLHIucmVwbGFjZSgvXihcXC5cXC4/KFxcL3wkKSkrLyxcIlwiKS5yZXBsYWNlKC9cXC8oXFwuKFxcL3wkKSkrL2csXCIvXCIpLnJlcGxhY2UoL1xcL1xcLlxcLiQvLFwiLy4uL1wiKS5yZXBsYWNlKC9cXC8/W15cXC9dKi9nLGZ1bmN0aW9uKHQpe1wiLy4uXCI9PT10P24ucG9wKCk6bi5wdXNoKHQpfSksbi5qb2luKFwiXCIpLnJlcGxhY2UoL15cXC8vLFwiL1wiPT09ci5jaGFyQXQoMCk/XCIvXCI6XCJcIikpKyhlLnByb3RvY29sfHxlLmF1dGhvcml0eXx8ZS5wYXRobmFtZT9lLnNlYXJjaDplLnNlYXJjaHx8dC5zZWFyY2gpK2UuaGFzaDpudWxsO3ZhciByLG59ZnVuY3Rpb24gdih0KXtyZXR1cm4gdC5zcGxpdChcIiNcIilbMF19ZnVuY3Rpb24geSh0LGUpe2lmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0KWlmKHZvaWQgMD09PWU/ZT10LmlkOlwic3RyaW5nXCI9PXR5cGVvZiB0LmlkJiYoZT1kKGUsdC5pZCksdC5pZD1lKSxBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXkodFtyXSxlKTtlbHNle1wic3RyaW5nXCI9PXR5cGVvZiB0LiRyZWYmJih0LiRyZWY9ZChlLHQuJHJlZikpO2Zvcih2YXIgbiBpbiB0KVwiZW51bVwiIT09biYmeSh0W25dLGUpfX1mdW5jdGlvbiBtKHQpe3ZhciBlPVBbdD10fHxcImVuXCJdO3JldHVybiBmdW5jdGlvbih0KXt2YXIgcj1lW3QuY29kZV18fGJbdC5jb2RlXTtpZihcInN0cmluZ1wiIT10eXBlb2YgcilyZXR1cm5cIlVua25vd24gZXJyb3IgY29kZSBcIit0LmNvZGUrXCI6IFwiK0pTT04uc3RyaW5naWZ5KHQubWVzc2FnZVBhcmFtcyk7dmFyIG49dC5wYXJhbXM7cmV0dXJuIHIucmVwbGFjZSgvXFx7KFtee31dKilcXH0vZyxmdW5jdGlvbih0LGUpe3ZhciByPW5bZV07cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHJ8fFwibnVtYmVyXCI9PXR5cGVvZiByP3I6dH0pfX1jLnByb3RvdHlwZS52YWxpZGF0ZU11bHRpcGxlT2Y9ZnVuY3Rpb24odCxlKXt2YXIgcj1lLm11bHRpcGxlT2Z8fGUuZGl2aXNpYmxlQnk7aWYodm9pZCAwPT09cilyZXR1cm4gbnVsbDtpZihcIm51bWJlclwiPT10eXBlb2YgdCl7dmFyIG49dC9yJTE7aWYobj49ZiYmbjxoKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuTlVNQkVSX01VTFRJUExFX09GLHt2YWx1ZTp0LG11bHRpcGxlT2Y6cn0sXCJcIixcIlwiLG51bGwsdCxlKX1yZXR1cm4gbnVsbH0sYy5wcm90b3R5cGUudmFsaWRhdGVNaW5NYXg9ZnVuY3Rpb24odCxlKXtpZihcIm51bWJlclwiIT10eXBlb2YgdClyZXR1cm4gbnVsbDtpZih2b2lkIDAhPT1lLm1pbmltdW0pe2lmKHQ8ZS5taW5pbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuTlVNQkVSX01JTklNVU0se3ZhbHVlOnQsbWluaW11bTplLm1pbmltdW19LFwiXCIsXCIvbWluaW11bVwiLG51bGwsdCxlKTtpZihlLmV4Y2x1c2l2ZU1pbmltdW0mJnQ9PT1lLm1pbmltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5OVU1CRVJfTUlOSU1VTV9FWENMVVNJVkUse3ZhbHVlOnQsbWluaW11bTplLm1pbmltdW19LFwiXCIsXCIvZXhjbHVzaXZlTWluaW11bVwiLG51bGwsdCxlKX1pZih2b2lkIDAhPT1lLm1heGltdW0pe2lmKHQ+ZS5tYXhpbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKGcuTlVNQkVSX01BWElNVU0se3ZhbHVlOnQsbWF4aW11bTplLm1heGltdW19LFwiXCIsXCIvbWF4aW11bVwiLG51bGwsdCxlKTtpZihlLmV4Y2x1c2l2ZU1heGltdW0mJnQ9PT1lLm1heGltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoZy5OVU1CRVJfTUFYSU1VTV9FWENMVVNJVkUse3ZhbHVlOnQsbWF4aW11bTplLm1heGltdW19LFwiXCIsXCIvZXhjbHVzaXZlTWF4aW11bVwiLG51bGwsdCxlKX1yZXR1cm4gbnVsbH0sYy5wcm90b3R5cGUudmFsaWRhdGVOYU49ZnVuY3Rpb24odCxlKXtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgdD9udWxsOiEwPT09aXNOYU4odCl8fHQ9PT0xLzB8fHQ9PT0tMS8wP3RoaXMuY3JlYXRlRXJyb3IoZy5OVU1CRVJfTk9UX0FfTlVNQkVSLHt2YWx1ZTp0fSxcIlwiLFwiL3R5cGVcIixudWxsLHQsZSk6bnVsbH0sYy5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmc9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0aGlzLnZhbGlkYXRlU3RyaW5nTGVuZ3RoKHQsZSxyKXx8dGhpcy52YWxpZGF0ZVN0cmluZ1BhdHRlcm4odCxlLHIpfHxudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ0xlbmd0aD1mdW5jdGlvbih0LGUpe3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiB0P251bGw6dm9pZCAwIT09ZS5taW5MZW5ndGgmJnQubGVuZ3RoPGUubWluTGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IoZy5TVFJJTkdfTEVOR1RIX1NIT1JULHtsZW5ndGg6dC5sZW5ndGgsbWluaW11bTplLm1pbkxlbmd0aH0sXCJcIixcIi9taW5MZW5ndGhcIixudWxsLHQsZSk6dm9pZCAwIT09ZS5tYXhMZW5ndGgmJnQubGVuZ3RoPmUubWF4TGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IoZy5TVFJJTkdfTEVOR1RIX0xPTkcse2xlbmd0aDp0Lmxlbmd0aCxtYXhpbXVtOmUubWF4TGVuZ3RofSxcIlwiLFwiL21heExlbmd0aFwiLG51bGwsdCxlKTpudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ1BhdHRlcm49ZnVuY3Rpb24odCxlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgdHx8XCJzdHJpbmdcIiE9dHlwZW9mIGUucGF0dGVybiYmIShlLnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApKXJldHVybiBudWxsO3ZhciByO2lmKGUucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cClyPWUucGF0dGVybjtlbHNle3ZhciBuLGk9XCJcIixvPWUucGF0dGVybi5tYXRjaCgvXlxcLyguKylcXC8oW2ltZ10qKSQvKTtvPyhuPW9bMV0saT1vWzJdKTpuPWUucGF0dGVybixyPW5ldyBSZWdFeHAobixpKX1yZXR1cm4gci50ZXN0KHQpP251bGw6dGhpcy5jcmVhdGVFcnJvcihnLlNUUklOR19QQVRURVJOLHtwYXR0ZXJuOmUucGF0dGVybn0sXCJcIixcIi9wYXR0ZXJuXCIsbnVsbCx0LGUpfSxjLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5PWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90aGlzLnZhbGlkYXRlQXJyYXlMZW5ndGgodCxlLHIpfHx0aGlzLnZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcyh0LGUscil8fHRoaXMudmFsaWRhdGVBcnJheUl0ZW1zKHQsZSxyKXx8bnVsbDpudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5TGVuZ3RoPWZ1bmN0aW9uKHQsZSl7dmFyIHI7cmV0dXJuIHZvaWQgMCE9PWUubWluSXRlbXMmJnQubGVuZ3RoPGUubWluSXRlbXMmJihyPXRoaXMuY3JlYXRlRXJyb3IoZy5BUlJBWV9MRU5HVEhfU0hPUlQse2xlbmd0aDp0Lmxlbmd0aCxtaW5pbXVtOmUubWluSXRlbXN9LFwiXCIsXCIvbWluSXRlbXNcIixudWxsLHQsZSksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjp2b2lkIDAhPT1lLm1heEl0ZW1zJiZ0Lmxlbmd0aD5lLm1heEl0ZW1zJiYocj10aGlzLmNyZWF0ZUVycm9yKGcuQVJSQVlfTEVOR1RIX0xPTkcse2xlbmd0aDp0Lmxlbmd0aCxtYXhpbXVtOmUubWF4SXRlbXN9LFwiXCIsXCIvbWF4SXRlbXNcIixudWxsLHQsZSksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjpudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXM9ZnVuY3Rpb24odCxlKXtpZihlLnVuaXF1ZUl0ZW1zKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWZvcih2YXIgbj1yKzE7bjx0Lmxlbmd0aDtuKyspaWYobCh0W3JdLHRbbl0pKXt2YXIgaT10aGlzLmNyZWF0ZUVycm9yKGcuQVJSQVlfVU5JUVVFLHttYXRjaDE6cixtYXRjaDI6bn0sXCJcIixcIi91bmlxdWVJdGVtc1wiLG51bGwsdCxlKTtpZih0aGlzLmhhbmRsZUVycm9yKGkpKXJldHVybiBpfXJldHVybiBudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5SXRlbXM9ZnVuY3Rpb24odCxlLHIpe2lmKHZvaWQgMD09PWUuaXRlbXMpcmV0dXJuIG51bGw7dmFyIG4saTtpZihBcnJheS5pc0FycmF5KGUuaXRlbXMpKXtmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKWlmKGk8ZS5pdGVtcy5sZW5ndGgpe2lmKG49dGhpcy52YWxpZGF0ZUFsbCh0W2ldLGUuaXRlbXNbaV0sW2ldLFtcIml0ZW1zXCIsaV0scitcIi9cIitpKSlyZXR1cm4gbn1lbHNlIGlmKHZvaWQgMCE9PWUuYWRkaXRpb25hbEl0ZW1zKWlmKFwiYm9vbGVhblwiPT10eXBlb2YgZS5hZGRpdGlvbmFsSXRlbXMpe2lmKCFlLmFkZGl0aW9uYWxJdGVtcyYmKG49dGhpcy5jcmVhdGVFcnJvcihnLkFSUkFZX0FERElUSU9OQUxfSVRFTVMse30sXCIvXCIraSxcIi9hZGRpdGlvbmFsSXRlbXNcIixudWxsLHQsZSksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwodFtpXSxlLmFkZGl0aW9uYWxJdGVtcyxbaV0sW1wiYWRkaXRpb25hbEl0ZW1zXCJdLHIrXCIvXCIraSkpcmV0dXJuIG59ZWxzZSBmb3IoaT0wO2k8dC5sZW5ndGg7aSsrKWlmKG49dGhpcy52YWxpZGF0ZUFsbCh0W2ldLGUuaXRlbXMsW2ldLFtcIml0ZW1zXCJdLHIrXCIvXCIraSkpcmV0dXJuIG47cmV0dXJuIG51bGx9LGMucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0PWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm5cIm9iamVjdFwiIT10eXBlb2YgdHx8bnVsbD09PXR8fEFycmF5LmlzQXJyYXkodCk/bnVsbDp0aGlzLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcyh0LGUscil8fHRoaXMudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXModCxlLHIpfHx0aGlzLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyh0LGUscil8fHRoaXMudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXModCxlLHIpfHxudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdE1pbk1heFByb3BlcnRpZXM9ZnVuY3Rpb24odCxlKXt2YXIgcixuPU9iamVjdC5rZXlzKHQpO3JldHVybiB2b2lkIDAhPT1lLm1pblByb3BlcnRpZXMmJm4ubGVuZ3RoPGUubWluUHJvcGVydGllcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihnLk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU0se3Byb3BlcnR5Q291bnQ6bi5sZW5ndGgsbWluaW11bTplLm1pblByb3BlcnRpZXN9LFwiXCIsXCIvbWluUHJvcGVydGllc1wiLG51bGwsdCxlKSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOnZvaWQgMCE9PWUubWF4UHJvcGVydGllcyYmbi5sZW5ndGg+ZS5tYXhQcm9wZXJ0aWVzJiYocj10aGlzLmNyZWF0ZUVycm9yKGcuT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTSx7cHJvcGVydHlDb3VudDpuLmxlbmd0aCxtYXhpbXVtOmUubWF4UHJvcGVydGllc30sXCJcIixcIi9tYXhQcm9wZXJ0aWVzXCIsbnVsbCx0LGUpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6bnVsbH0sYy5wcm90b3R5cGUudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXM9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDAhPT1lLnJlcXVpcmVkKWZvcih2YXIgcj0wO3I8ZS5yZXF1aXJlZC5sZW5ndGg7cisrKXt2YXIgbj1lLnJlcXVpcmVkW3JdO2lmKHZvaWQgMD09PXRbbl0pe3ZhciBpPXRoaXMuY3JlYXRlRXJyb3IoZy5PQkpFQ1RfUkVRVUlSRUQse2tleTpufSxcIlwiLFwiL3JlcXVpcmVkL1wiK3IsbnVsbCx0LGUpO2lmKHRoaXMuaGFuZGxlRXJyb3IoaSkpcmV0dXJuIGl9fXJldHVybiBudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFByb3BlcnRpZXM9ZnVuY3Rpb24odCxlLHIpe3ZhciBuO2Zvcih2YXIgaSBpbiB0KXt2YXIgbz1yK1wiL1wiK2kucmVwbGFjZSgvfi9nLFwifjBcIikucmVwbGFjZSgvXFwvL2csXCJ+MVwiKSxhPSExO2lmKHZvaWQgMCE9PWUucHJvcGVydGllcyYmdm9pZCAwIT09ZS5wcm9wZXJ0aWVzW2ldJiYoYT0hMCxuPXRoaXMudmFsaWRhdGVBbGwodFtpXSxlLnByb3BlcnRpZXNbaV0sW2ldLFtcInByb3BlcnRpZXNcIixpXSxvKSkpcmV0dXJuIG47aWYodm9pZCAwIT09ZS5wYXR0ZXJuUHJvcGVydGllcylmb3IodmFyIHUgaW4gZS5wYXR0ZXJuUHJvcGVydGllcyl7aWYobmV3IFJlZ0V4cCh1KS50ZXN0KGkpJiYoYT0hMCxuPXRoaXMudmFsaWRhdGVBbGwodFtpXSxlLnBhdHRlcm5Qcm9wZXJ0aWVzW3VdLFtpXSxbXCJwYXR0ZXJuUHJvcGVydGllc1wiLHVdLG8pKSlyZXR1cm4gbn1pZihhKXRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW29dPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW29dKTtlbHNlIGlmKHZvaWQgMCE9PWUuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW29dPSEwLGRlbGV0ZSB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzW29dKSxcImJvb2xlYW5cIj09dHlwZW9mIGUuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKCFlLmFkZGl0aW9uYWxQcm9wZXJ0aWVzJiYobj10aGlzLmNyZWF0ZUVycm9yKGcuT0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUyx7a2V5Oml9LFwiXCIsXCIvYWRkaXRpb25hbFByb3BlcnRpZXNcIixudWxsLHQsZSkucHJlZml4V2l0aChpLG51bGwpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKHRbaV0sZS5hZGRpdGlvbmFsUHJvcGVydGllcyxbaV0sW1wiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sbykpcmV0dXJuIG59ZWxzZSB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJiF0aGlzLmtub3duUHJvcGVydHlQYXRoc1tvXSYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNbb109ITApfXJldHVybiBudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcz1mdW5jdGlvbih0LGUscil7dmFyIG47aWYodm9pZCAwIT09ZS5kZXBlbmRlbmNpZXMpZm9yKHZhciBpIGluIGUuZGVwZW5kZW5jaWVzKWlmKHZvaWQgMCE9PXRbaV0pe3ZhciBvPWUuZGVwZW5kZW5jaWVzW2ldO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBvKXtpZih2b2lkIDA9PT10W29dJiYobj10aGlzLmNyZWF0ZUVycm9yKGcuT0JKRUNUX0RFUEVOREVOQ1lfS0VZLHtrZXk6aSxtaXNzaW5nOm99LFwiXCIsXCJcIixudWxsLHQsZSkucHJlZml4V2l0aChudWxsLGkpLnByZWZpeFdpdGgobnVsbCxcImRlcGVuZGVuY2llc1wiKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKEFycmF5LmlzQXJyYXkobykpZm9yKHZhciBhPTA7YTxvLmxlbmd0aDthKyspe3ZhciB1PW9bYV07aWYodm9pZCAwPT09dFt1XSYmKG49dGhpcy5jcmVhdGVFcnJvcihnLk9CSkVDVF9ERVBFTkRFTkNZX0tFWSx7a2V5OmksbWlzc2luZzp1fSxcIlwiLFwiL1wiK2EsbnVsbCx0LGUpLnByZWZpeFdpdGgobnVsbCxpKS5wcmVmaXhXaXRoKG51bGwsXCJkZXBlbmRlbmNpZXNcIiksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwodCxvLFtdLFtcImRlcGVuZGVuY2llc1wiLGldLHIpKXJldHVybiBufXJldHVybiBudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZUNvbWJpbmF0aW9ucz1mdW5jdGlvbih0LGUscil7cmV0dXJuIHRoaXMudmFsaWRhdGVBbGxPZih0LGUscil8fHRoaXMudmFsaWRhdGVBbnlPZih0LGUscil8fHRoaXMudmFsaWRhdGVPbmVPZih0LGUscil8fHRoaXMudmFsaWRhdGVOb3QodCxlLHIpfHxudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZUFsbE9mPWZ1bmN0aW9uKHQsZSxyKXtpZih2b2lkIDA9PT1lLmFsbE9mKXJldHVybiBudWxsO2Zvcih2YXIgbixpPTA7aTxlLmFsbE9mLmxlbmd0aDtpKyspe3ZhciBvPWUuYWxsT2ZbaV07aWYobj10aGlzLnZhbGlkYXRlQWxsKHQsbyxbXSxbXCJhbGxPZlwiLGldLHIpKXJldHVybiBufXJldHVybiBudWxsfSxjLnByb3RvdHlwZS52YWxpZGF0ZUFueU9mPWZ1bmN0aW9uKHQsZSxyKXtpZih2b2lkIDA9PT1lLmFueU9mKXJldHVybiBudWxsO3ZhciBuLGksbz1bXSxhPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsaT10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciB1PSEwLHM9MDtzPGUuYW55T2YubGVuZ3RoO3MrKyl7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSk7dmFyIGM9ZS5hbnlPZltzXSxsPXRoaXMuZXJyb3JzLmxlbmd0aCxmPXRoaXMudmFsaWRhdGVBbGwodCxjLFtdLFtcImFueU9mXCIsc10scik7aWYobnVsbD09PWYmJmw9PT10aGlzLmVycm9ycy5sZW5ndGgpe2lmKHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIGggaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpaVtoXT0hMCxkZWxldGUgbltoXTtmb3IodmFyIHAgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylpW3BdfHwobltwXT0hMCk7dT0hMTtjb250aW51ZX1yZXR1cm4gbnVsbH1mJiZvLnB1c2goZi5wcmVmaXhXaXRoKG51bGwsXCJcIitzKS5wcmVmaXhXaXRoKG51bGwsXCJhbnlPZlwiKSl9cmV0dXJuIHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9bix0aGlzLmtub3duUHJvcGVydHlQYXRocz1pKSx1PyhvPW8uY29uY2F0KHRoaXMuZXJyb3JzLnNsaWNlKGEpKSx0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLGEpLHRoaXMuY3JlYXRlRXJyb3IoZy5BTllfT0ZfTUlTU0lORyx7fSxcIlwiLFwiL2FueU9mXCIsbyx0LGUpKTp2b2lkIDB9LGMucHJvdG90eXBlLnZhbGlkYXRlT25lT2Y9ZnVuY3Rpb24odCxlLHIpe2lmKHZvaWQgMD09PWUub25lT2YpcmV0dXJuIG51bGw7dmFyIG4saSxvPW51bGwsYT1bXSx1PXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsaT10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciBzPTA7czxlLm9uZU9mLmxlbmd0aDtzKyspe3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9e30pO3ZhciBjPWUub25lT2Zbc10sbD10aGlzLmVycm9ycy5sZW5ndGgsZj10aGlzLnZhbGlkYXRlQWxsKHQsYyxbXSxbXCJvbmVPZlwiLHNdLHIpO2lmKG51bGw9PT1mJiZsPT09dGhpcy5lcnJvcnMubGVuZ3RoKXtpZihudWxsIT09bylyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCx1KSx0aGlzLmNyZWF0ZUVycm9yKGcuT05FX09GX01VTFRJUExFLHtpbmRleDE6byxpbmRleDI6c30sXCJcIixcIi9vbmVPZlwiLG51bGwsdCxlKTtpZihvPXMsdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIGggaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpaVtoXT0hMCxkZWxldGUgbltoXTtmb3IodmFyIHAgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylpW3BdfHwobltwXT0hMCl9fWVsc2UgZiYmYS5wdXNoKGYpfXJldHVybiB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPW4sdGhpcy5rbm93blByb3BlcnR5UGF0aHM9aSksbnVsbD09PW8/KGE9YS5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2UodSkpLHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsdSksdGhpcy5jcmVhdGVFcnJvcihnLk9ORV9PRl9NSVNTSU5HLHt9LFwiXCIsXCIvb25lT2ZcIixhLHQsZSkpOih0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLHUpLG51bGwpfSxjLnByb3RvdHlwZS52YWxpZGF0ZU5vdD1mdW5jdGlvbih0LGUscil7aWYodm9pZCAwPT09ZS5ub3QpcmV0dXJuIG51bGw7dmFyIG4saSxvPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsaT10aGlzLmtub3duUHJvcGVydHlQYXRocyx0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9KTt2YXIgYT10aGlzLnZhbGlkYXRlQWxsKHQsZS5ub3QsbnVsbCxudWxsLHIpLHU9dGhpcy5lcnJvcnMuc2xpY2Uobyk7cmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsbyksdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz1uLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPWkpLG51bGw9PT1hJiYwPT09dS5sZW5ndGg/dGhpcy5jcmVhdGVFcnJvcihnLk5PVF9QQVNTRUQse30sXCJcIixcIi9ub3RcIixudWxsLHQsZSk6bnVsbH0sYy5wcm90b3R5cGUudmFsaWRhdGVIeXBlcm1lZGlhPWZ1bmN0aW9uKHQsZSxyKXtpZighZS5saW5rcylyZXR1cm4gbnVsbDtmb3IodmFyIG4saT0wO2k8ZS5saW5rcy5sZW5ndGg7aSsrKXt2YXIgbz1lLmxpbmtzW2ldO2lmKFwiZGVzY3JpYmVkYnlcIj09PW8ucmVsKXtmb3IodmFyIGE9bmV3IHMoby5ocmVmKSx1PSEwLGM9MDtjPGEudmFyTmFtZXMubGVuZ3RoO2MrKylpZighKGEudmFyTmFtZXNbY11pbiB0KSl7dT0hMTticmVha31pZih1KXt2YXIgbD17JHJlZjphLmZpbGxGcm9tT2JqZWN0KHQpfTtpZihuPXRoaXMudmFsaWRhdGVBbGwodCxsLFtdLFtcImxpbmtzXCIsaV0scikpcmV0dXJuIG59fX19O3ZhciBnPXtJTlZBTElEX1RZUEU6MCxFTlVNX01JU01BVENIOjEsQU5ZX09GX01JU1NJTkc6MTAsT05FX09GX01JU1NJTkc6MTEsT05FX09GX01VTFRJUExFOjEyLE5PVF9QQVNTRUQ6MTMsTlVNQkVSX01VTFRJUExFX09GOjEwMCxOVU1CRVJfTUlOSU1VTToxMDEsTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOjEwMixOVU1CRVJfTUFYSU1VTToxMDMsTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFOjEwNCxOVU1CRVJfTk9UX0FfTlVNQkVSOjEwNSxTVFJJTkdfTEVOR1RIX1NIT1JUOjIwMCxTVFJJTkdfTEVOR1RIX0xPTkc6MjAxLFNUUklOR19QQVRURVJOOjIwMixPQkpFQ1RfUFJPUEVSVElFU19NSU5JTVVNOjMwMCxPQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNOjMwMSxPQkpFQ1RfUkVRVUlSRUQ6MzAyLE9CSkVDVF9BRERJVElPTkFMX1BST1BFUlRJRVM6MzAzLE9CSkVDVF9ERVBFTkRFTkNZX0tFWTozMDQsQVJSQVlfTEVOR1RIX1NIT1JUOjQwMCxBUlJBWV9MRU5HVEhfTE9ORzo0MDEsQVJSQVlfVU5JUVVFOjQwMixBUlJBWV9BRERJVElPTkFMX0lURU1TOjQwMyxGT1JNQVRfQ1VTVE9NOjUwMCxLRVlXT1JEX0NVU1RPTTo1MDEsQ0lSQ1VMQVJfUkVGRVJFTkNFOjYwMCxVTktOT1dOX1BST1BFUlRZOjFlM30sXz17fTtmb3IodmFyIE8gaW4gZylfW2dbT11dPU87dmFyIGI9e0lOVkFMSURfVFlQRTpcIkludmFsaWQgdHlwZToge3R5cGV9IChleHBlY3RlZCB7ZXhwZWN0ZWR9KVwiLEVOVU1fTUlTTUFUQ0g6XCJObyBlbnVtIG1hdGNoIGZvcjoge3ZhbHVlfVwiLEFOWV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gXCJhbnlPZlwiJyxPTkVfT0ZfTUlTU0lORzonRGF0YSBkb2VzIG5vdCBtYXRjaCBhbnkgc2NoZW1hcyBmcm9tIFwib25lT2ZcIicsT05FX09GX01VTFRJUExFOidEYXRhIGlzIHZhbGlkIGFnYWluc3QgbW9yZSB0aGFuIG9uZSBzY2hlbWEgZnJvbSBcIm9uZU9mXCI6IGluZGljZXMge2luZGV4MX0gYW5kIHtpbmRleDJ9JyxOT1RfUEFTU0VEOidEYXRhIG1hdGNoZXMgc2NoZW1hIGZyb20gXCJub3RcIicsTlVNQkVSX01VTFRJUExFX09GOlwiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSBtdWx0aXBsZSBvZiB7bXVsdGlwbGVPZn1cIixOVU1CRVJfTUlOSU1VTTpcIlZhbHVlIHt2YWx1ZX0gaXMgbGVzcyB0aGFuIG1pbmltdW0ge21pbmltdW19XCIsTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFOlwiVmFsdWUge3ZhbHVlfSBpcyBlcXVhbCB0byBleGNsdXNpdmUgbWluaW11bSB7bWluaW11bX1cIixOVU1CRVJfTUFYSU1VTTpcIlZhbHVlIHt2YWx1ZX0gaXMgZ3JlYXRlciB0aGFuIG1heGltdW0ge21heGltdW19XCIsTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFOlwiVmFsdWUge3ZhbHVlfSBpcyBlcXVhbCB0byBleGNsdXNpdmUgbWF4aW11bSB7bWF4aW11bX1cIixOVU1CRVJfTk9UX0FfTlVNQkVSOlwiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSB2YWxpZCBudW1iZXJcIixTVFJJTkdfTEVOR1RIX1NIT1JUOlwiU3RyaW5nIGlzIHRvbyBzaG9ydCAoe2xlbmd0aH0gY2hhcnMpLCBtaW5pbXVtIHttaW5pbXVtfVwiLFNUUklOR19MRU5HVEhfTE9ORzpcIlN0cmluZyBpcyB0b28gbG9uZyAoe2xlbmd0aH0gY2hhcnMpLCBtYXhpbXVtIHttYXhpbXVtfVwiLFNUUklOR19QQVRURVJOOlwiU3RyaW5nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm46IHtwYXR0ZXJufVwiLE9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU06XCJUb28gZmV3IHByb3BlcnRpZXMgZGVmaW5lZCAoe3Byb3BlcnR5Q291bnR9KSwgbWluaW11bSB7bWluaW11bX1cIixPQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNOlwiVG9vIG1hbnkgcHJvcGVydGllcyBkZWZpbmVkICh7cHJvcGVydHlDb3VudH0pLCBtYXhpbXVtIHttYXhpbXVtfVwiLE9CSkVDVF9SRVFVSVJFRDpcIk1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6IHtrZXl9XCIsT0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUzpcIkFkZGl0aW9uYWwgcHJvcGVydGllcyBub3QgYWxsb3dlZFwiLE9CSkVDVF9ERVBFTkRFTkNZX0tFWTpcIkRlcGVuZGVuY3kgZmFpbGVkIC0ga2V5IG11c3QgZXhpc3Q6IHttaXNzaW5nfSAoZHVlIHRvIGtleToge2tleX0pXCIsQVJSQVlfTEVOR1RIX1NIT1JUOlwiQXJyYXkgaXMgdG9vIHNob3J0ICh7bGVuZ3RofSksIG1pbmltdW0ge21pbmltdW19XCIsQVJSQVlfTEVOR1RIX0xPTkc6XCJBcnJheSBpcyB0b28gbG9uZyAoe2xlbmd0aH0pLCBtYXhpbXVtIHttYXhpbXVtfVwiLEFSUkFZX1VOSVFVRTpcIkFycmF5IGl0ZW1zIGFyZSBub3QgdW5pcXVlIChpbmRpY2VzIHttYXRjaDF9IGFuZCB7bWF0Y2gyfSlcIixBUlJBWV9BRERJVElPTkFMX0lURU1TOlwiQWRkaXRpb25hbCBpdGVtcyBub3QgYWxsb3dlZFwiLEZPUk1BVF9DVVNUT006XCJGb3JtYXQgdmFsaWRhdGlvbiBmYWlsZWQgKHttZXNzYWdlfSlcIixLRVlXT1JEX0NVU1RPTTpcIktleXdvcmQgZmFpbGVkOiB7a2V5fSAoe21lc3NhZ2V9KVwiLENJUkNVTEFSX1JFRkVSRU5DRTpcIkNpcmN1bGFyICRyZWZzOiB7dXJsc31cIixVTktOT1dOX1BST1BFUlRZOlwiVW5rbm93biBwcm9wZXJ0eSAobm90IGluIHNjaGVtYSlcIn07ZnVuY3Rpb24gRSh0LGUscixuLGkpe2lmKEVycm9yLmNhbGwodGhpcyksdm9pZCAwPT09dCl0aHJvdyBuZXcgRXJyb3IoXCJObyBlcnJvciBjb2RlIHN1cHBsaWVkOiBcIituKTt0aGlzLm1lc3NhZ2U9XCJcIix0aGlzLnBhcmFtcz1lLHRoaXMuY29kZT10LHRoaXMuZGF0YVBhdGg9cnx8XCJcIix0aGlzLnNjaGVtYVBhdGg9bnx8XCJcIix0aGlzLnN1YkVycm9ycz1pfHxudWxsO3ZhciBvPW5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpO2lmKHRoaXMuc3RhY2s9by5zdGFja3x8by5zdGFja3RyYWNlLCF0aGlzLnN0YWNrKXRyeXt0aHJvdyBvfWNhdGNoKG8pe3RoaXMuc3RhY2s9by5zdGFja3x8by5zdGFja3RyYWNlfX1FLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksRS5wcm90b3R5cGUuY29uc3RydWN0b3I9RSxFLnByb3RvdHlwZS5uYW1lPVwiVmFsaWRhdGlvbkVycm9yXCIsRS5wcm90b3R5cGUucHJlZml4V2l0aD1mdW5jdGlvbih0LGUpe2lmKG51bGwhPT10JiYodD10LnJlcGxhY2UoL34vZyxcIn4wXCIpLnJlcGxhY2UoL1xcLy9nLFwifjFcIiksdGhpcy5kYXRhUGF0aD1cIi9cIit0K3RoaXMuZGF0YVBhdGgpLG51bGwhPT1lJiYoZT1lLnJlcGxhY2UoL34vZyxcIn4wXCIpLnJlcGxhY2UoL1xcLy9nLFwifjFcIiksdGhpcy5zY2hlbWFQYXRoPVwiL1wiK2UrdGhpcy5zY2hlbWFQYXRoKSxudWxsIT09dGhpcy5zdWJFcnJvcnMpZm9yKHZhciByPTA7cjx0aGlzLnN1YkVycm9ycy5sZW5ndGg7cisrKXRoaXMuc3ViRXJyb3JzW3JdLnByZWZpeFdpdGgodCxlKTtyZXR1cm4gdGhpc307dmFyIFA9e307dmFyIFM9ZnVuY3Rpb24gdChlKXt2YXIgcixuLGk9bmV3IGMsbz17c2V0RXJyb3JSZXBvcnRlcjpmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLmxhbmd1YWdlKHQpOihuPXQsITApfSxhZGRGb3JtYXQ6ZnVuY3Rpb24oKXtpLmFkZEZvcm1hdC5hcHBseShpLGFyZ3VtZW50cyl9LGxhbmd1YWdlOmZ1bmN0aW9uKHQpe3JldHVybiB0PyhQW3RdfHwodD10LnNwbGl0KFwiLVwiKVswXSksISFQW3RdJiYocj10LHQpKTpyfSxhZGRMYW5ndWFnZTpmdW5jdGlvbih0LGUpe3ZhciByO2ZvcihyIGluIGcpZVtyXSYmIWVbZ1tyXV0mJihlW2dbcl1dPWVbcl0pO3ZhciBuPXQuc3BsaXQoXCItXCIpWzBdO2lmKFBbbl0pe1BbdF09T2JqZWN0LmNyZWF0ZShQW25dKTtmb3IociBpbiBlKXZvaWQgMD09PVBbbl1bcl0mJihQW25dW3JdPWVbcl0pLFBbdF1bcl09ZVtyXX1lbHNlIFBbdF09ZSxQW25dPWU7cmV0dXJuIHRoaXN9LGZyZXNoQXBpOmZ1bmN0aW9uKGUpe3ZhciByPXQoKTtyZXR1cm4gZSYmci5sYW5ndWFnZShlKSxyfSx2YWxpZGF0ZTpmdW5jdGlvbih0LGUsbyxhKXt2YXIgdT1tKHIpLHM9bmV3IGMoaSwhMSxuP2Z1bmN0aW9uKHQsZSxyKXtyZXR1cm4gbih0LGUscil8fHUodCxlLHIpfTp1LG8sYSk7XCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPXskcmVmOmV9KSxzLmFkZFNjaGVtYShcIlwiLGUpO3ZhciBsPXMudmFsaWRhdGVBbGwodCxlLG51bGwsbnVsbCxcIlwiKTtyZXR1cm4hbCYmYSYmKGw9cy5iYW5Vbmtub3duUHJvcGVydGllcyh0LGUpKSx0aGlzLmVycm9yPWwsdGhpcy5taXNzaW5nPXMubWlzc2luZyx0aGlzLnZhbGlkPW51bGw9PT1sLHRoaXMudmFsaWR9LHZhbGlkYXRlUmVzdWx0OmZ1bmN0aW9uKCl7dmFyIHQ9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsaWQ/XCJ2YWxpZFwiOnRoaXMuZXJyb3IubWVzc2FnZX19O3JldHVybiB0aGlzLnZhbGlkYXRlLmFwcGx5KHQsYXJndW1lbnRzKSx0fSx2YWxpZGF0ZU11bHRpcGxlOmZ1bmN0aW9uKHQsZSxvLGEpe3ZhciB1PW0ocikscz1uZXcgYyhpLCEwLG4/ZnVuY3Rpb24odCxlLHIpe3JldHVybiBuKHQsZSxyKXx8dSh0LGUscil9OnUsbyxhKTtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9eyRyZWY6ZX0pLHMuYWRkU2NoZW1hKFwiXCIsZSkscy52YWxpZGF0ZUFsbCh0LGUsbnVsbCxudWxsLFwiXCIpLGEmJnMuYmFuVW5rbm93blByb3BlcnRpZXModCxlKTt2YXIgbD17dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWxpZD9cInZhbGlkXCI6dGhpcy5lcnJvci5tZXNzYWdlfX07cmV0dXJuIGwuZXJyb3JzPXMuZXJyb3JzLGwubWlzc2luZz1zLm1pc3NpbmcsbC52YWxpZD0wPT09bC5lcnJvcnMubGVuZ3RoLGx9LGFkZFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiBpLmFkZFNjaGVtYS5hcHBseShpLGFyZ3VtZW50cyl9LGdldFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiBpLmdldFNjaGVtYS5hcHBseShpLGFyZ3VtZW50cyl9LGdldFNjaGVtYU1hcDpmdW5jdGlvbigpe3JldHVybiBpLmdldFNjaGVtYU1hcC5hcHBseShpLGFyZ3VtZW50cyl9LGdldFNjaGVtYVVyaXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXRTY2hlbWFVcmlzLmFwcGx5KGksYXJndW1lbnRzKX0sZ2V0TWlzc2luZ1VyaXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXRNaXNzaW5nVXJpcy5hcHBseShpLGFyZ3VtZW50cyl9LGRyb3BTY2hlbWFzOmZ1bmN0aW9uKCl7aS5kcm9wU2NoZW1hcy5hcHBseShpLGFyZ3VtZW50cyl9LGRlZmluZUtleXdvcmQ6ZnVuY3Rpb24oKXtpLmRlZmluZUtleXdvcmQuYXBwbHkoaSxhcmd1bWVudHMpfSxkZWZpbmVFcnJvcjpmdW5jdGlvbih0LGUscil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHR8fCEvXltBLVpdKyhfW0EtWl0rKSokLy50ZXN0KHQpKXRocm93IG5ldyBFcnJvcihcIkNvZGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nIGluIFVQUEVSX0NBU0VfV0lUSF9VTkRFUlNDT1JFU1wiKTtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wfHxlPDFlNCl0aHJvdyBuZXcgRXJyb3IoXCJDb2RlIG51bWJlciBtdXN0IGJlIGFuIGludGVnZXIgPiAxMDAwMFwiKTtpZih2b2lkIDAhPT1nW3RdKXRocm93IG5ldyBFcnJvcihcIkVycm9yIGFscmVhZHkgZGVmaW5lZDogXCIrdCtcIiBhcyBcIitnW3RdKTtpZih2b2lkIDAhPT1fW2VdKXRocm93IG5ldyBFcnJvcihcIkVycm9yIGNvZGUgYWxyZWFkeSB1c2VkOiBcIitfW2VdK1wiIGFzIFwiK2UpO2dbdF09ZSxfW2VdPXQsYlt0XT1iW2VdPXI7Zm9yKHZhciBuIGluIFApe3ZhciBpPVBbbl07aVt0XSYmKGlbZV09aVtlXXx8aVt0XSl9fSxyZXNldDpmdW5jdGlvbigpe2kucmVzZXQoKSx0aGlzLmVycm9yPW51bGwsdGhpcy5taXNzaW5nPVtdLHRoaXMudmFsaWQ9ITB9LG1pc3Npbmc6W10sZXJyb3I6bnVsbCx2YWxpZDohMCxub3JtU2NoZW1hOnkscmVzb2x2ZVVybDpkLGdldERvY3VtZW50VXJpOnYsZXJyb3JDb2RlczpnfTtyZXR1cm4gby5sYW5ndWFnZShlfHxcImVuXCIpLG99KCk7cmV0dXJuIFMuYWRkTGFuZ3VhZ2UoXCJlbi1nYlwiLGIpLFMudHY0PVMsU30pP24uYXBwbHkoZSxpKTpuKXx8KHQuZXhwb3J0cz1vKX0sLCwsZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPW8ocig0KSksaT1vKHIoNykpO2Z1bmN0aW9uIG8odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fXZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLHIpeygwLG4uZGVmYXVsdCkodGhpcyx0KSx0aGlzLl9zb3VyY2VDb2RlPXIsdGhpcy5fc291cmNlQ29kZUNsYXNzbmFtZT1lLHRoaXMuX2VuY29kaW5nPW51bGwsdGhpcy5fc2lnbmF0dXJlPW51bGx9cmV0dXJuKDAsaS5kZWZhdWx0KSh0LFt7a2V5Olwic291cmNlQ29kZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VDb2RlfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX3NvdXJjZUNvZGU9dCl9fSx7a2V5Olwic291cmNlQ29kZUNsYXNzbmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VDb2RlQ2xhc3NuYW1lfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX3NvdXJjZUNvZGVDbGFzc25hbWU9dCl9fSx7a2V5OlwiZW5jb2RpbmdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5jb2Rpbmd9LHNldDpmdW5jdGlvbih0KXt0JiYodGhpcy5fZW5jb2Rpbmc9dCl9fSx7a2V5Olwic2lnbmF0dXJlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpZ25hdHVyZX0sc2V0OmZ1bmN0aW9uKHQpe3QmJih0aGlzLl9zaWduYXR1cmU9dCl9fV0pLHR9KCk7ZS5kZWZhdWx0PWEsdC5leHBvcnRzPWUuZGVmYXVsdH0sZnVuY3Rpb24odCxlLHIpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuSHlwZXJ0eVJlc291cmNlVHlwZT1lLkh5cGVydHlUeXBlPWUuUnVudGltZUh5cGVydHlDYXBhYmlsaXR5VHlwZT12b2lkIDA7dmFyIG49cyhyKDI4KSksaT1zKHIoNCkpLG89cyhyKDcpKSxhPXMocigzNikpLHU9cyhyKDM3KSk7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19dmFyIGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LHIsbyx1LHMsYyxsLGYsaCl7KDAsaS5kZWZhdWx0KSh0aGlzLGUpO3ZhciBwPSgwLGEuZGVmYXVsdCkodGhpcywoZS5fX3Byb3RvX198fCgwLG4uZGVmYXVsdCkoZSkpLmNhbGwodGhpcyx0LHIsbyx1LHMsYyxsKSk7cmV0dXJuIHAuX2NvbmZpZ3VyYXRpb249e30scC5fY29uc3RyYWludHM9e30scC5fcG9saWNpZXM9e30scC5fbWVzc2FnZVNjaGVtYT1udWxsLHAuX2h5cGVydHlUeXBlPWYscC5fZGF0YU9iamVjdHM9aCxwfXJldHVybigwLHUuZGVmYXVsdCkoZSx0KSwoMCxvLmRlZmF1bHQpKGUsW3trZXk6XCJoeXBlcnR5VHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5VHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3QmJih0aGlzLl9oeXBlcnR5VHlwZT10KX19LHtrZXk6XCJkYXRhT2JqZWN0c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhT2JqZWN0c30sc2V0OmZ1bmN0aW9uKHQpe3QmJih0aGlzLl9kYXRhT2JqZWN0cz10KX19LHtrZXk6XCJjb25maWd1cmF0aW9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ3VyYXRpb259LHNldDpmdW5jdGlvbih0KXt0JiYodGhpcy5fY29uZmlndXJhdGlvbj10KX19LHtrZXk6XCJjb25zdHJhaW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25zdHJhaW50c30sc2V0OmZ1bmN0aW9uKHQpe3QmJih0aGlzLl9jb25zdHJhaW50cz10KX19LHtrZXk6XCJtZXNzYWdlU2NoZW1hXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VTY2hlbWF9LHNldDpmdW5jdGlvbih0KXt0JiYodGhpcy5fbWVzc2FnZVNjaGVtYT10KX19LHtrZXk6XCJwb2xpY2llc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xpY2llc30sc2V0OmZ1bmN0aW9uKHQpe3QmJih0aGlzLl9wb2xpY2llcz10KX19XSksZX0ocyhyKDEwMSkpLmRlZmF1bHQpO2UuUnVudGltZUh5cGVydHlDYXBhYmlsaXR5VHlwZT17fSxlLkh5cGVydHlUeXBlPXtDT01NVU5JQ0FUT1I6XCJjb21tdW5pY2F0b3JcIixJREVOVElUWTpcImlkZW50aXR5XCIsQ09OVEVYVDpcImNvbnRleHRcIn0sZS5IeXBlcnR5UmVzb3VyY2VUeXBlPXtjaGF0OlwiQ0hBVFwiLGF1ZGlvOlwiQXVkaW9cIix2aWRlbzpcIlZpZGVvXCIsYXY6XCJBVlwiLHNjcmVlbjpcIlNDUkVFTlwiLGZpbGU6XCJGSUxlXCIsbWlkaTpcIk1JRElcIn07ZS5kZWZhdWx0PWN9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1zKHIoMjgpKSxpPXMocig0KSksbz1zKHIoNykpLGE9cyhyKDM2KSksdT1zKHIoMzcpKTtmdW5jdGlvbiBzKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX12YXIgYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQscixvLHUscyxjLGwsZixoLHAsZCx2LHksbSxnKXsoMCxpLmRlZmF1bHQpKHRoaXMsZSk7dmFyIF89KDAsYS5kZWZhdWx0KSh0aGlzLChlLl9fcHJvdG9fX3x8KDAsbi5kZWZhdWx0KShlKSkuY2FsbCh0aGlzLHQscixvLHUscyxjLGwpKTtyZXR1cm4gXy5fbWVzc2FnZVNjaGVtYXM9ZixfLl9jb25maWd1cmF0aW9uPWh8fHt9LF8uX2NvbnN0cmFpbnRzPXB8fHt9LF8uX2h5cGVydHlUeXBlPWQsXy5fZGF0YU9iamVjdHM9dnx8W10sXy5faW50ZXJ3b3JraW5nPXksXy5faWRwUHJveHk9bSxfLl9tdXR1YWxBdXRoZW50aWNhdGlvbj1nLF99cmV0dXJuKDAsdS5kZWZhdWx0KShlLHQpLCgwLG8uZGVmYXVsdCkoZSxbe2tleTpcIm1lc3NhZ2VTY2hlbWFzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VTY2hlbWFzfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX21lc3NhZ2VTY2hlbWFzPXQpfX0se2tleTpcImNvbnN0cmFpbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnN0cmFpbnRzfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX2NvbnN0cmFpbnRzPXQpfX0se2tleTpcImNvbmZpZ3VyYXRpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3QmJih0aGlzLl9jb25maWd1cmF0aW9uPXQpfX0se2tleTpcImh5cGVydHlUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h5cGVydHlUeXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faHlwZXJ0eVR5cGU9dH19LHtrZXk6XCJkYXRhT2JqZWN0c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhT2JqZWN0c30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2RhdGFPYmplY3RzPXR9fSx7a2V5OlwiaW50ZXJ3b3JraW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ludGVyd29ya2luZ30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ludGVyd29ya2luZz10fX0se2tleTpcImlkcFByb3h5XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkcFByb3h5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faWRwUHJveHk9dH19LHtrZXk6XCJtdXR1YWxBdXRoZW50aWNhdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX211dHVhbEF1dGhlbnRpY2F0aW9uPXR9fV0pLGV9KHMocigxMDEpKS5kZWZhdWx0KTtlLmRlZmF1bHQ9Yyx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cChyKDQpKSxpPXAocig3KSksbz1yKDEwMSksYT1wKG8pLHU9cChyKDEzOSkpLHM9cChyKDE0MCkpLGM9cChyKDE0MSkpLGw9cChyKDE0MykpLGY9cChyKDE0NCkpLGg9cigxNDUpO2Z1bmN0aW9uIHAodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fXZhciBkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpeygwLG4uZGVmYXVsdCkodGhpcyx0KX1yZXR1cm4oMCxpLmRlZmF1bHQpKHQsW3trZXk6XCJjcmVhdGVDYXRhbG9ndWVEYXRhT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLHIsbixpLG8sdSl7aWYodm9pZCAwPT09dHx8dm9pZCAwPT09ZXx8dm9pZCAwPT09cnx8dm9pZCAwPT09bnx8dm9pZCAwPT09aXx8dm9pZCAwPT09b3x8dm9pZCAwPT09dSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlcnMhXCIpO3JldHVybiBuZXcgYS5kZWZhdWx0KHQsZSxyLG4saSxvLHUpfX0se2tleTpcImNyZWF0ZUh5cGVydHlEZXNjcmlwdG9yT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLHIsbixpLGEsdSxjKXtpZih2b2lkIDA9PT10fHx2b2lkIDA9PT1lfHx2b2lkIDA9PT1yfHx2b2lkIDA9PT1ufHx2b2lkIDA9PT1pfHx2b2lkIDA9PT1hfHx2b2lkIDA9PT11fHx2b2lkIDA9PT1jKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVycyFcIik7cmV0dXJuIG5ldyBzLmRlZmF1bHQodCxvLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWSxlLHIsbixpLGEsdSxjKX19LHtrZXk6XCJjcmVhdGVQcm90b1N0dWJEZXNjcmlwdG9yT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLHIsbixpLGEsdSxzLGwsZixoLHAsZCx2KXtpZih2b2lkIDA9PT10fHx2b2lkIDA9PT1lfHx2b2lkIDA9PT1yfHx2b2lkIDA9PT1ufHx2b2lkIDA9PT1pfHx2b2lkIDA9PT1hfHx2b2lkIDA9PT11fHx2b2lkIDA9PT1zfHx2b2lkIDA9PT1sKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVycyFcIik7cmV0dXJuIG5ldyBjLmRlZmF1bHQodCxvLkNhdGFsb2d1ZU9iamVjdFR5cGUuUFJPVE9TVFVCLGUscixuLGksYSx1LHMsbCxmLGgscCxkLHYpfX0se2tleTpcImNyZWF0ZUh5cGVydHlSdW50aW1lRGVzY3JpcHRvck9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxyLG4saSxhLHUscyxjLGYsaCl7aWYodm9pZCAwPT09dHx8dm9pZCAwPT09ZXx8dm9pZCAwPT09cnx8dm9pZCAwPT09bnx8dm9pZCAwPT09aXx8dm9pZCAwPT09YXx8dm9pZCAwPT09dSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlcnMhXCIpO3JldHVybiBuZXcgbC5kZWZhdWx0KHQsby5DYXRhbG9ndWVPYmplY3RUeXBlLkhZUEVSVFlfUlVOVElNRSxlLHIsbixpLGEsdSxzLGMsZixoKX19LHtrZXk6XCJjcmVhdGVIeXBlcnR5SW50ZXJjZXB0b3JEZXNjcmlwdG9yT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLHIsbixpLGEsdSxzKXtpZih2b2lkIDA9PT10fHx2b2lkIDA9PT1lfHx2b2lkIDA9PT1yfHx2b2lkIDA9PT1ufHx2b2lkIDA9PT1pfHx2b2lkIDA9PT1hKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVycyFcIik7cmV0dXJuIG5ldyBmLmRlZmF1bHQodCxvLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWV9JTlRFUkNFUFRPUixlLHIsbixpLGEsdSxzKX19LHtrZXk6XCJjcmVhdGVEYXRhT2JqZWN0U2NoZW1hXCIsdmFsdWU6ZnVuY3Rpb24odCxlLHIsbixpLGEpe2lmKHZvaWQgMD09PXR8fHZvaWQgMD09PWV8fHZvaWQgMD09PXJ8fHZvaWQgMD09PW58fHZvaWQgMD09PWl8fHZvaWQgMD09PWEpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbWV0ZXJzIVwiKTtyZXR1cm4gbmV3IGguRGF0YU9iamVjdFNjaGVtYSh0LG8uQ2F0YWxvZ3VlT2JqZWN0VHlwZS5IWVBFUlRZX0RBVEFfT0JKRUNULGUscixuLGksYSl9fSx7a2V5OlwiY3JlYXRlTWVzc2FnZURhdGFPYmplY3RTY2hlbWFcIix2YWx1ZTpmdW5jdGlvbih0LGUscixuLGksYSl7aWYodm9pZCAwPT09dHx8dm9pZCAwPT09ZXx8dm9pZCAwPT09cnx8dm9pZCAwPT09bnx8dm9pZCAwPT09aXx8dm9pZCAwPT09YSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlcnMhXCIpO3JldHVybiBuZXcgaC5EYXRhT2JqZWN0U2NoZW1hKHQsby5DYXRhbG9ndWVPYmplY3RUeXBlLkhZUEVSVFlfREFUQV9PQkpFQ1QsZSxyLG4saSxhKX19LHtrZXk6XCJjcmVhdGVIeXBlcnR5RGF0YU9iamVjdFNjaGVtYVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxyLG4saSxhLHUscyl7aWYodm9pZCAwPT09dHx8dm9pZCAwPT09ZXx8dm9pZCAwPT09cnx8dm9pZCAwPT09bnx8dm9pZCAwPT09aXx8dm9pZCAwPT09YXx8dm9pZCAwPT09c3x8dm9pZCAwPT09dSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlcnMhXCIpO3JldHVybiBzPT09aC5EYXRhVXJsU2NoZW1lLkNPTU0/bmV3IGguQ29tbXVuaWNhdGlvbkRhdGFPYmplY3RTY2hlbWEodCxvLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWV9EQVRBX09CSkVDVCxlLHIsbixpLGEscyx1KTpzPT09aC5EYXRhVXJsU2NoZW1lLkNPTk5FQ1RJT04/bmV3IGguQ29ubmVjdGlvbkRhdGFPYmplY3RTY2hlbWEodCxvLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWV9EQVRBX09CSkVDVCxlLHIsbixpLGEscyx1KTpzPT09aC5EYXRhVXJsU2NoZW1lLkNUWFQ/bmV3IGguQ29udGV4dERhdGFPYmplY3RTY2hlbWEodCxvLkNhdGFsb2d1ZU9iamVjdFR5cGUuSFlQRVJUWV9EQVRBX09CSkVDVCxlLHIsbixpLGEscyx1KTpzPT09aC5EYXRhVXJsU2NoZW1lLklERU5USVRZP25ldyBoLklkZW50aXR5RGF0YU9iamVjdFNjaGVtYSh0LG8uQ2F0YWxvZ3VlT2JqZWN0VHlwZS5IWVBFUlRZX0RBVEFfT0JKRUNULGUscixuLGksYSxzLHUpOnZvaWQgMH19LHtrZXk6XCJjcmVhdGVTb3VyY2VQYWNrYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lfHx2b2lkIDA9PT10KXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVycyFcIik7cmV0dXJuIG5ldyB1LmRlZmF1bHQodCxlKX19XSksdH0oKTtlLmRlZmF1bHQ9ZCx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5SdW50aW1lVHlwZT1lLlJ1bnRpbWVQcm90b2NvbENhcGFiaWxpdHk9ZS5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHk9dm9pZCAwO3ZhciBuPWMocig1OSkpLGk9YyhyKDI4KSksbz1jKHIoNCkpLGE9YyhyKDcpKSx1PWMocigzNikpLHM9YyhyKDM3KSk7ZnVuY3Rpb24gYyh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19dmFyIGw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LHIsbixhLHMsYyxsLHAsZCx2LHksbSl7KDAsby5kZWZhdWx0KSh0aGlzLGUpO3ZhciBnPSgwLHUuZGVmYXVsdCkodGhpcywoZS5fX3Byb3RvX198fCgwLGkuZGVmYXVsdCkoZSkpLmNhbGwodGhpcyx0LHIsbixhLHMsYyxsKSk7cmV0dXJuIGcuX3J1bnRpbWVUeXBlPXAsZy5faHlwZXJ0eUNhcGFiaWxpdGllcz1kfHxuZXcgZighMCwhMSwhMSwhMSwhMSksZy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9dnx8bmV3IGgoITAsITEsITAsITEsITEsITEpLGcuX3AycEhhbmRsZXJTdHViPXksZy5fcDJwUmVxdWVzdGVyU3R1Yj1tLGd9cmV0dXJuKDAscy5kZWZhdWx0KShlLHQpLCgwLGEuZGVmYXVsdCkoZSxbe2tleTpcInJ1bnRpbWVUeXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3J1bnRpbWVUeXBlfSxzZXQ6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX3J1bnRpbWVUeXBlPXQpfX0se2tleTpcImh5cGVydHlDYXBhYmlsaXRpZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHlwZXJ0eUNhcGFiaWxpdGllc30sc2V0OmZ1bmN0aW9uKHQpe3QmJih0aGlzLl9oeXBlcnR5Q2FwYWJpbGl0aWVzPXQpfX0se2tleTpcInByb3RvY29sQ2FwYWJpbGl0aWVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h5cGVydHlDYXBhYmlsaXRpZXN9LHNldDpmdW5jdGlvbih0KXt0JiYodGhpcy5fcHJvdG9jb2xDYXBhYmlsaXRpZXM9dCl9fSx7a2V5OlwicDJwSGFuZGxlclN0dWJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcDJwSGFuZGxlclN0dWJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wMnBIYW5kbGVyU3R1Yj10fX0se2tleTpcInAycFJlcXVlc3RlclN0dWJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcDJwUmVxdWVzdGVyU3R1Yn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3AycFJlcXVlc3RlclN0dWI9dH19XSksZX0oYyhyKDEwMSkpLmRlZmF1bHQpLGY9ZS5SdW50aW1lSHlwZXJ0eUNhcGFiaWxpdHk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUscixuLGksYSl7KDAsby5kZWZhdWx0KSh0aGlzLHQpLHRoaXMuX2lzV2ViUlRDPWUsdGhpcy5faXNNaWM9cix0aGlzLl9pc0NhbWVyYT1uLHRoaXMuX2lzU2Vuc29yPWksdGhpcy5faXNPUlRDPWF9cmV0dXJuKDAsYS5kZWZhdWx0KSh0LFt7a2V5OlwiZ2V0Q2FwYWJpbGl0eVNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuKDAsbi5kZWZhdWx0KSh0aGlzKX19LHtrZXk6XCJpc01pY1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc01pY319LHtrZXk6XCJpc0NhbWVyYVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NhbWVyYX19LHtrZXk6XCJpc1NlbnNvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1NlbnNvcn19LHtrZXk6XCJpc1dlYlJUQ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1dlYlJUQ319LHtrZXk6XCJpc09SVENTXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzT1JUQ319XSksdH0oKSxoPWUuUnVudGltZVByb3RvY29sQ2FwYWJpbGl0eT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyLG4saSxhLHUpeygwLG8uZGVmYXVsdCkodGhpcyx0KSx0aGlzLl9pc0h0dHA9ZSx0aGlzLl9pc0h0dHBzPXIsdGhpcy5faXNXUz1uLHRoaXMuX2lzV1NTPWksdGhpcy5faXNDb2FwPWEsdGhpcy5faXNEYXRhQ2hhbm5lbD11fXJldHVybigwLGEuZGVmYXVsdCkodCxbe2tleTpcImlzSHR0cFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSHR0cH19LHtrZXk6XCJpc0h0dHBzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNIdHRwc319LHtrZXk6XCJpc1dTXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNXU319LHtrZXk6XCJpc1NlbnNvclN1cHBvcnRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzU2Vuc29yfX0se2tleTpcImlzV1NTXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNXU1N9fSx7a2V5OlwiaXNDb2FwXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNDb2FwfX0se2tleTpcImlzRGF0YUNoYW5uZWxcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0RhdGFDaGFubmVsfX0se2tleTpcImdldENhcGFiaWxpdHlTZXRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybigwLG4uZGVmYXVsdCkodGhpcyl9fV0pLHR9KCk7ZS5SdW50aW1lVHlwZT17QlJPV1NFUjpcImJyb3dzZXJcIixTVEFOREFMT05FOlwic3RhbmRhbG9uZVwiLFNFUlZFUjpcInNlcnZlclwiLEdBVEVXQVk6XCJnYXRld2F5XCJ9O2UuZGVmYXVsdD1sfSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cyhyKDI4KSksaT1zKHIoNCkpLG89cyhyKDcpKSxhPXMocigzNikpLHU9cyhyKDM3KSk7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19dmFyIGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LHIsbyx1LHMsYyxsLGYsaCl7KDAsaS5kZWZhdWx0KSh0aGlzLGUpO3ZhciBwPSgwLGEuZGVmYXVsdCkodGhpcywoZS5fX3Byb3RvX198fCgwLG4uZGVmYXVsdCkoZSkpLmNhbGwodGhpcyx0LHIsbyx1LHMsYyxsKSk7cmV0dXJuIHAuX2NvbmZpZ3VyYXRpb249ZixwLl9wb2xpY2llcz1oLHB9cmV0dXJuKDAsdS5kZWZhdWx0KShlLHQpLCgwLG8uZGVmYXVsdCkoZSxbe2tleTpcImNvbmZpZ3VyYXRpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29uZmlndXJhdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbmZpZ3VyYXRpb249dH19LHtrZXk6XCJwb2xpY2llc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb2xpY2llc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BvbGljaWVzPXR9fV0pLGV9KHMocigxMDEpKS5kZWZhdWx0KTtlLmRlZmF1bHQ9Yyx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5EYXRhVXJsU2NoZW1lPWUuQ29udGV4dERhdGFPYmplY3RTY2hlbWE9ZS5JZGVudGl0eURhdGFPYmplY3RTY2hlbWE9ZS5Db25uZWN0aW9uRGF0YU9iamVjdFNjaGVtYT1lLkNvbW11bmljYXRpb25EYXRhT2JqZWN0U2NoZW1hPWUuSHlwZXJ0eURhdGFPYmplY3RTY2hlbWE9ZS5NZXNzYWdlRGF0YU9iamVjdFNjaGVtYT1lLkRhdGFPYmplY3RTY2hlbWE9dm9pZCAwO3ZhciBuPXMocigyOCkpLGk9cyhyKDQpKSxvPXMocigzNikpLGE9cyhyKDM3KSksdT1zKHIoMTAxKSk7ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19dmFyIGM9ZS5EYXRhT2JqZWN0U2NoZW1hPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxyLGEsdSxzLGMsbCl7cmV0dXJuKDAsaS5kZWZhdWx0KSh0aGlzLGUpLCgwLG8uZGVmYXVsdCkodGhpcywoZS5fX3Byb3RvX198fCgwLG4uZGVmYXVsdCkoZSkpLmNhbGwodGhpcyx0LHIsYSx1LHMsYyxsKSl9cmV0dXJuKDAsYS5kZWZhdWx0KShlLHQpLGV9KHUuZGVmYXVsdCksbD0oZS5NZXNzYWdlRGF0YU9iamVjdFNjaGVtYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQscixhLHUscyxjLGwpe3JldHVybigwLGkuZGVmYXVsdCkodGhpcyxlKSwoMCxvLmRlZmF1bHQpKHRoaXMsKGUuX19wcm90b19ffHwoMCxuLmRlZmF1bHQpKGUpKS5jYWxsKHRoaXMsdCxyLGEsdSxzLGMsbCkpfXJldHVybigwLGEuZGVmYXVsdCkoZSx0KSxlfShjKSxlLkh5cGVydHlEYXRhT2JqZWN0U2NoZW1hPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxyLGEsdSxzLGMsbCxmLGgpeygwLGkuZGVmYXVsdCkodGhpcyxlKTt2YXIgcD0oMCxvLmRlZmF1bHQpKHRoaXMsKGUuX19wcm90b19ffHwoMCxuLmRlZmF1bHQpKGUpKS5jYWxsKHRoaXMsdCxyLGEsdSxzLGMsbCkpO3JldHVybiBwLl9hY2Nlc3NDb250cm9sUG9saWN5PWYscC5fc2NoZW1lPWgscH1yZXR1cm4oMCxhLmRlZmF1bHQpKGUsdCksZX0oYykpO2UuQ29tbXVuaWNhdGlvbkRhdGFPYmplY3RTY2hlbWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LHIsYSx1LHMsYyxsLGYpe3JldHVybigwLGkuZGVmYXVsdCkodGhpcyxlKSwoMCxvLmRlZmF1bHQpKHRoaXMsKGUuX19wcm90b19ffHwoMCxuLmRlZmF1bHQpKGUpKS5jYWxsKHRoaXMsdCxyLGEsdSxzLGMsbCxmKSl9cmV0dXJuKDAsYS5kZWZhdWx0KShlLHQpLGV9KGwpLGUuQ29ubmVjdGlvbkRhdGFPYmplY3RTY2hlbWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LHIsYSx1LHMsYyxsLGYpe3JldHVybigwLGkuZGVmYXVsdCkodGhpcyxlKSwoMCxvLmRlZmF1bHQpKHRoaXMsKGUuX19wcm90b19ffHwoMCxuLmRlZmF1bHQpKGUpKS5jYWxsKHRoaXMsdCxyLGEsdSxzLGMsbCxmKSl9cmV0dXJuKDAsYS5kZWZhdWx0KShlLHQpLGV9KGwpLGUuSWRlbnRpdHlEYXRhT2JqZWN0U2NoZW1hPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxyLGEsdSxzLGMsbCxmKXtyZXR1cm4oMCxpLmRlZmF1bHQpKHRoaXMsZSksKDAsby5kZWZhdWx0KSh0aGlzLChlLl9fcHJvdG9fX3x8KDAsbi5kZWZhdWx0KShlKSkuY2FsbCh0aGlzLHQscixhLHUscyxjLGwsZikpfXJldHVybigwLGEuZGVmYXVsdCkoZSx0KSxlfShsKSxlLkNvbnRleHREYXRhT2JqZWN0U2NoZW1hPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxyLGEsdSxzLGMsbCxmKXtyZXR1cm4oMCxpLmRlZmF1bHQpKHRoaXMsZSksKDAsby5kZWZhdWx0KSh0aGlzLChlLl9fcHJvdG9fX3x8KDAsbi5kZWZhdWx0KShlKSkuY2FsbCh0aGlzLHQscixhLHUscyxjLGwsZikpfXJldHVybigwLGEuZGVmYXVsdCkoZSx0KSxlfShsKSxlLkRhdGFVcmxTY2hlbWU9e0NPTU06XCJDT01NXCIsQ09OTkVDVElPTjpcIkNPTk5FQ1RJT05cIixDVFhUOlwiQ1RYVFwiLElERU5USVRZOlwiSURFTlRJVFlcIn07ZS5kZWZhdWx0PWN9LCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlJ1bnRpbWVDYXRhbG9ndWU9dm9pZCAwO3ZhciBuLGk9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShyKDIzKSksbz1yKDE4MyksYT0obj1vKSYmbi5fX2VzTW9kdWxlP246e2RlZmF1bHQ6bn07aS5nZXRMb2dnZXIoXCJSdW50aW1lQ2F0YWxvZ3VlXCIpLnNldExldmVsKDApLGUuUnVudGltZUNhdGFsb2d1ZT1hLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1sKHIoMTg0KSksaT1sKHIoNTkpKSxvPWwocigyMCkpLGE9bChyKDQpKSx1PWwocig3KSkscz1mdW5jdGlvbih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9KHIoMjMpKSxjPWwocigxNDIpKTtmdW5jdGlvbiBsKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX12YXIgZj1zLmdldExvZ2dlcihcIlJ1bnRpbWVDYXRhbG9ndWVcIiksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyLG4pe2lmKCgwLGEuZGVmYXVsdCkodGhpcyx0KSwhZSl0aHJvdyBFcnJvcihcIlRoZSBjYXRhbG9ndWUgbmVlZHMgdGhlIHJ1bnRpbWVGYWN0b3J5XCIpO3RoaXMuX2ZhY3Rvcnk9bmV3IGMuZGVmYXVsdCx0aGlzLmh0dHBSZXF1ZXN0PWUuY3JlYXRlSHR0cFJlcXVlc3QoKSx0aGlzLmF0b2I9ZS5hdG9iP2UuYXRvYjphdG9iO3ZhciBpPXJ8fFwicnVudGltZUNhdGFsb2d1ZVwiLG89bnx8XCImY2d1aWQsIGFjY2Vzc0NvbnRyb2xQb2xpY3ksIGNvbnN0cmFpbnRzLCBkYXRhT2JqZWN0cywgaHlwZXJ0eVR5cGUsIG9iamVjdE5hbWUsIHNvdXJjZVBhY2thZ2UsIHZlcnNpb25cIix1PXt9O3VbaV09byx0aGlzLnN0b3JhZ2VNYW5hZ2VyPWUuc3RvcmFnZU1hbmFnZXIoaSx1KX1yZXR1cm4oMCx1LmRlZmF1bHQpKHQsW3trZXk6XCJnZXREZXNjcmlwdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLGE9IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSx1PWFyZ3VtZW50c1szXTtmLmluZm8oXCJbUnVudGltZUNhdGFsb2d1ZV0gLSBnZXR0aW5nIGRlc2NyaXB0b3IgZnJvbTogXCIsdCxcIiB3aXRoIGNvbnN0cmFpbnRzOiBcIix1KTt2YXIgcz0hMSxjPSExLGw9dm9pZCAwLGg9bD0obD12b2lkIDAhPXU/by5kZWZhdWx0LmFsbChbdGhpcy5odHRwUmVxdWVzdC5wb3N0KHQrXCIvdmVyc2lvblwiLHtib2R5OigwLGkuZGVmYXVsdCkodSl9KSx0aGlzLmh0dHBSZXF1ZXN0LnBvc3QodCtcIi9jZ3VpZFwiLHtib2R5OigwLGkuZGVmYXVsdCkodSl9KV0pOm8uZGVmYXVsdC5hbGwoW3RoaXMuaHR0cFJlcXVlc3QuZ2V0KHQrXCIvdmVyc2lvblwiKSx0aGlzLmh0dHBSZXF1ZXN0LmdldCh0K1wiL2NndWlkXCIpXSkpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG89KDAsbi5kZWZhdWx0KShlLDIpLGE9b1swXSxjPW9bMV07cmV0dXJuIGYuaW5mbyhcIltSdW50aW1lQ2F0YWxvZ3VlXSAtIGdvdCB2ZXJzaW9uIChcIithK1wiKSBhbmQgY2d1aWQgKFwiK2MrXCIpIGZvciBkZXNjcmlwdG9yIFwiK3QpLHIuc3RvcmFnZU1hbmFnZXIuZ2V0VmVyc2lvbihcImNndWlkXCIsYykudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZT49YT8oZi53YXJuKFwic3RvcmFnZU1hbmFnZXIgY29udGFpbnMgc2F2ZWQgdmVyc2lvbiB0aGF0IGlzIHRoZSBzYW1lIG9yIG5ld2VyIHRoYW4gcmVxdWVzdGVkXCIpLHM9ITAsci5zdG9yYWdlTWFuYWdlci5nZXQoXCJjZ3VpZFwiLGMpKTooZi53YXJuKFwic3RvcmFnZU1hbmFnZXIgZG9lcyBub3QgY29udGFpbiBzYXZlZCB2ZXJzaW9uXCIpLCh2b2lkIDAhPXU/ci5odHRwUmVxdWVzdC5wb3N0KHQse2JvZHk6KDAsaS5kZWZhdWx0KSh1KX0pOnIuaHR0cFJlcXVlc3QuZ2V0KHQpKS50aGVuKGZ1bmN0aW9uKHQpe2lmKCh0PUpTT04ucGFyc2UodCkpLkVSUk9SKXRocm93IG5ldyBFcnJvcih0KTtyZXR1cm4gdH0pKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7dmFyIHI9XCJVbmFibGUgdG8gZ2V0IGRlc2NyaXB0b3IgZm9yIFwiK3QrKHZvaWQgMCE9dT9cIiB3aXRoIGNvbnN0cmFpbnRzIFwiK3U6XCJcIikrXCI6IFwiK2U7dGhyb3cgZi5lcnJvcihyKSxuZXcgRXJyb3Iocil9KTtyZXR1cm4gYSYmKGYubG9nKFwiYWRkaW5nIHByb21pc2UgdG8gYXR0YWNoIHNvdXJjZVBhY2thZ2VcIiksaD1sLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuc291cmNlUGFja2FnZT8oYz0hMCx0KTooYz0hMSxyLmF0dGFjaFJhd1NvdXJjZVBhY2thZ2UodCkpfSkpLGg9aC50aGVuKGZ1bmN0aW9uKHQpe3JldHVybighc3x8cyYmIWMmJmEpJiZyLnN0b3JhZ2VNYW5hZ2VyLnNldCh0LmNndWlkLHQudmVyc2lvbix0KSxlLmFwcGx5KHIsW3QsdV0pfSl9fSx7a2V5OlwiYXR0YWNoUmF3U291cmNlUGFja2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcztyZXR1cm4gZi5sb2coXCJhdHRhY2hpbmcgcmF3IHNvdXJjZVBhY2thZ2UgZnJvbTpcIix0LnNvdXJjZVBhY2thZ2VVUkwpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXsodm9pZCAwIT1lP3IuaHR0cFJlcXVlc3QucG9zdCh0LnNvdXJjZVBhY2thZ2VVUkwse2JvZHk6KDAsaS5kZWZhdWx0KShlKX0pOnIuaHR0cFJlcXVlc3QuZ2V0KHQuc291cmNlUGFja2FnZVVSTCkpLnRoZW4oZnVuY3Rpb24oZSl7ZT1KU09OLnBhcnNlKGUpLHQuc291cmNlUGFja2FnZT1lLG4odCl9KS5jYXRjaChmdW5jdGlvbih0KXtvKHQpfSl9KX19LHtrZXk6XCJnZXRIeXBlcnR5RGVzY3JpcHRvclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl07cmV0dXJuIHRoaXMuZ2V0RGVzY3JpcHRvcih0LHRoaXMuY3JlYXRlSHlwZXJ0eSxlLHIpfX0se2tleTpcImdldFN0dWJEZXNjcmlwdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXTtyZXR1cm4gdGhpcy5nZXREZXNjcmlwdG9yKHQsdGhpcy5jcmVhdGVTdHViLGUscil9fSx7a2V5OlwiZ2V0UnVudGltZURlc2NyaXB0b3JcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO3JldHVybiB0aGlzLmdldERlc2NyaXB0b3IodCx0aGlzLmNyZWF0ZVJ1bnRpbWVEZXNjcmlwdG9yLGUscil9fSx7a2V5OlwiZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3JcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO3JldHVybiB0aGlzLmdldERlc2NyaXB0b3IodCx0aGlzLmNyZWF0ZURhdGFTY2hlbWEsZSxyKX19LHtrZXk6XCJnZXRJZHBQcm94eURlc2NyaXB0b3JcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO3JldHVybiB0aGlzLmdldERlc2NyaXB0b3IodCx0aGlzLmNyZWF0ZUlkcFByb3h5LGUscil9fSx7a2V5OlwiY3JlYXRlSHlwZXJ0eVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2ZhY3RvcnkuY3JlYXRlSHlwZXJ0eURlc2NyaXB0b3JPYmplY3QodC5jZ3VpZCx0LnZlcnNpb24sdC5vYmplY3ROYW1lLHQuZGVzY3JpcHRpb24sdC5sYW5ndWFnZSx0LnNvdXJjZVBhY2thZ2VVUkwsdC50eXBlfHx0Lmh5cGVydHlUeXBlLHQuZGF0YU9iamVjdHMpO2UuY29uZmlndXJhdGlvbj10LmNvbmZpZ3VyYXRpb24sZS5jb25zdHJhaW50cz10LmNvbnN0cmFpbnRzLGUubWVzc2FnZVNjaGVtYT10Lm1lc3NhZ2VTY2hlbWEsZS5wb2xpY2llcz10LnBvbGljaWVzLGUuc2lnbmF0dXJlPXQuc2lnbmF0dXJlO3ZhciByPXQuc291cmNlUGFja2FnZTtyZXR1cm4gciYmKGUuc291cmNlUGFja2FnZT10aGlzLmNyZWF0ZVNvdXJjZVBhY2thZ2UocikpLGV9fSx7a2V5OlwiY3JlYXRlU3R1YlwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2ZhY3RvcnkuY3JlYXRlUHJvdG9TdHViRGVzY3JpcHRvck9iamVjdCh0LmNndWlkLHQudmVyc2lvbix0Lm9iamVjdE5hbWUsdC5kZXNjcmlwdGlvbix0Lmxhbmd1YWdlLHQuc291cmNlUGFja2FnZVVSTCx0Lm1lc3NhZ2VTY2hlbWFzLHQuY29uZmlndXJhdGlvbix0LmNvbnN0cmFpbnRzLHQuaHlwZXJ0eVR5cGUsdC5kYXRhT2JqZWN0cyx0LmludGVyd29ya2luZyx0LmlkcFByb3h5LHQubXV0dWFsQXV0aGVudGljYXRpb24pO2Uuc2lnbmF0dXJlPXQuc2lnbmF0dXJlO3ZhciByPXQuc291cmNlUGFja2FnZTtyZXR1cm4gciYmKGUuc291cmNlUGFja2FnZT10aGlzLmNyZWF0ZVNvdXJjZVBhY2thZ2UocikpLGV9fSx7a2V5OlwiY3JlYXRlUnVudGltZURlc2NyaXB0b3JcIix2YWx1ZTpmdW5jdGlvbih0KXt0cnl7dC5oeXBlcnR5Q2FwYWJpbGl0aWVzPUpTT04ucGFyc2UodC5oeXBlcnR5Q2FwYWJpbGl0aWVzKSx0LnByb3RvY29sQ2FwYWJpbGl0aWVzPUpTT04ucGFyc2UodC5wcm90b2NvbENhcGFiaWxpdGllcyl9Y2F0Y2godCl7fXZhciBlPXRoaXMuX2ZhY3RvcnkuY3JlYXRlSHlwZXJ0eVJ1bnRpbWVEZXNjcmlwdG9yT2JqZWN0KHQuY2d1aWQsdC52ZXJzaW9uLHQub2JqZWN0TmFtZSx0LmRlc2NyaXB0aW9uLHQubGFuZ3VhZ2UsdC5zb3VyY2VQYWNrYWdlVVJMLHQudHlwZXx8dC5ydW50aW1lVHlwZSx0Lmh5cGVydHlDYXBhYmlsaXRpZXMsdC5wcm90b2NvbENhcGFiaWxpdGllcyx0LnAycEhhbmRsZXJTdHViLHQucDJwUmVxdWVzdGVyU3R1Yik7ZS5zaWduYXR1cmU9dC5zaWduYXR1cmU7dmFyIHI9dC5zb3VyY2VQYWNrYWdlO3JldHVybiByJiYoZS5zb3VyY2VQYWNrYWdlPXRoaXMuY3JlYXRlU291cmNlUGFja2FnZShyKSksZX19LHtrZXk6XCJjcmVhdGVEYXRhU2NoZW1hXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwOyhlPXQuYWNjZXNzQ29udHJvbFBvbGljeSYmdC5zY2hlbWU/dGhpcy5fZmFjdG9yeS5jcmVhdGVIeXBlcnR5RGF0YU9iamVjdFNjaGVtYSh0LmNndWlkLHQudmVyc2lvbix0Lm9iamVjdE5hbWUsdC5kZXNjcmlwdGlvbix0Lmxhbmd1YWdlLHQuc291cmNlUGFja2FnZVVSTCx0LmFjY2Vzc0NvbnRyb2xQb2xpY3ksdC5zY2hlbWUpOnRoaXMuX2ZhY3RvcnkuY3JlYXRlTWVzc2FnZURhdGFPYmplY3RTY2hlbWEodC5jZ3VpZCx0LnZlcnNpb24sdC5vYmplY3ROYW1lLHQuZGVzY3JpcHRpb24sdC5sYW5ndWFnZSx0LnNvdXJjZVBhY2thZ2VVUkwpKS5zaWduYXR1cmU9dC5zaWduYXR1cmU7dmFyIHI9dC5zb3VyY2VQYWNrYWdlO2lmKHIpe2Uuc291cmNlUGFja2FnZT10aGlzLmNyZWF0ZVNvdXJjZVBhY2thZ2Uocik7dHJ5e2Uuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlPUpTT04ucGFyc2UoZS5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUpfWNhdGNoKHQpe2YubG9nKFwiRGF0YVNjaGVtYSBTb3VyY2UgY29kZSBpcyBhbHJlYWR5IHBhcnNlZFwiKX1yZXR1cm4gZX1yZXR1cm4gZX19LHtrZXk6XCJjcmVhdGVJZHBQcm94eVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2ZhY3RvcnkuY3JlYXRlUHJvdG9TdHViRGVzY3JpcHRvck9iamVjdCh0LmNndWlkLHQudmVyc2lvbix0Lm9iamVjdE5hbWUsdC5kZXNjcmlwdGlvbix0Lmxhbmd1YWdlLHQuc291cmNlUGFja2FnZVVSTCx0Lm1lc3NhZ2VTY2hlbWFzLHQuY29uZmlndXJhdGlvbix0LmNvbnN0cmFpbnRzLHQuaHlwZXJ0eVR5cGUsdC5kYXRhT2JqZWN0cyx0LmludGVyd29ya2luZyx0LmlkcFByb3h5LHQubXV0dWFsQXV0aGVudGljYXRpb24pO2Uuc2lnbmF0dXJlPXQuc2lnbmF0dXJlO3ZhciByPXQuc291cmNlUGFja2FnZTtyZXR1cm4gciYmKHI9dGhpcy5jcmVhdGVTb3VyY2VQYWNrYWdlKHIpLGUuc291cmNlUGFja2FnZT1yKSxlfX0se2tleTpcImNyZWF0ZVNvdXJjZVBhY2thZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXtcImJhc2U2NFwiPT09dC5lbmNvZGluZyYmKHQuc291cmNlQ29kZT10aGlzLmF0b2IodC5zb3VyY2VDb2RlKSx0LmVuY29kaW5nPVwidXRmLThcIik7dmFyIGU9dGhpcy5fZmFjdG9yeS5jcmVhdGVTb3VyY2VQYWNrYWdlKHQuc291cmNlQ29kZUNsYXNzbmFtZSx0LnNvdXJjZUNvZGUpO3JldHVybiB0LmVuY29kaW5nJiYoZS5lbmNvZGluZz10LmVuY29kaW5nKSx0LnNpZ25hdHVyZSYmKGUuc2lnbmF0dXJlPXQuc2lnbmF0dXJlKSxlfX0se2tleTpcImdldFNvdXJjZVBhY2thZ2VGcm9tVVJMXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gZi5sb2coXCJnZXR0aW5nIHNvdXJjZVBhY2thZ2UgZnJvbTpcIix0KSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZS5odHRwUmVxdWVzdC5nZXQodCkudGhlbihmdW5jdGlvbih0KXtpZih0LkVSUk9SKW4odCk7ZWxzZXt0PUpTT04ucGFyc2UodCk7dmFyIGk9ZS5jcmVhdGVTb3VyY2VQYWNrYWdlKHQpO3IoaSl9fSkuY2F0Y2goZnVuY3Rpb24odCl7bih0KX0pfSl9fSx7a2V5OlwiZ2V0U291cmNlQ29kZUZyb21EZXNjcmlwdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3Quc291cmNlUGFja2FnZT9yKHQuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlKTplLnN0b3JhZ2VNYW5hZ2VyLmdldFZlcnNpb24odC5zb3VyY2VQYWNrYWdlVVJMK1wiL3NvdXJjZUNvZGVcIikudGhlbihmdW5jdGlvbihpKXtpPj10LnZlcnNpb24/KGYubG9nKFwicmV0dXJuaW5nIGNhY2hlZCB2ZXJzaW9uIGZyb20gc3RvcmFnZU1hbmFnZXJcIiksZS5zdG9yYWdlTWFuYWdlci5nZXQodC5zb3VyY2VQYWNrYWdlVVJMK1wiL3NvdXJjZUNvZGVcIikudGhlbihmdW5jdGlvbih0KXtyKHQpfSkuY2F0Y2goZnVuY3Rpb24odCl7bih0KX0pKTplLmh0dHBSZXF1ZXN0LmdldCh0LnNvdXJjZVBhY2thZ2VVUkwrXCIvc291cmNlQ29kZVwiKS50aGVuKGZ1bmN0aW9uKGkpe2kuRVJST1I/bihpKTooZS5zdG9yYWdlTWFuYWdlci5zZXQodC5zb3VyY2VQYWNrYWdlVVJMK1wiL3NvdXJjZUNvZGVcIix0LnZlcnNpb24saSkscihpKSl9KS5jYXRjaChmdW5jdGlvbih0KXtuKHQpfSl9KS5jYXRjaChmdW5jdGlvbih0KXtuKHQpfSl9KX19LHtrZXk6XCJnZXRUeXBlTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8peyh2b2lkIDAhPWU/ci5odHRwUmVxdWVzdC5wb3N0KHQse2JvZHk6KDAsaS5kZWZhdWx0KShlKX0pOnIuaHR0cFJlcXVlc3QuZ2V0KHQpKS50aGVuKGZ1bmN0aW9uKHQpe3Q9SlNPTi5wYXJzZSh0KSxuKHQpfSkuY2F0Y2goZnVuY3Rpb24odCl7byh0KX0pfSl9fSx7a2V5OlwiZGVsZXRlRnJvbVBNXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RvcmFnZU1hbmFnZXIuZGVsZXRlKHQpfX0se2tleTpcInJ1bnRpbWVVUkxcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcnVudGltZVVSTD10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZVVSTH19XSksdH0oKTtlLmRlZmF1bHQ9aCx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUscil7XCJ1c2Ugc3RyaWN0XCI7ZS5fX2VzTW9kdWxlPSEwO3ZhciBuPW8ocigxODUpKSxpPW8ocigxODgpKTtmdW5jdGlvbiBvKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1lLmRlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0O2lmKCgwLG4uZGVmYXVsdCkoT2JqZWN0KHQpKSlyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgcj1bXSxuPSEwLG89ITEsYT12b2lkIDA7dHJ5e2Zvcih2YXIgdSxzPSgwLGkuZGVmYXVsdCkodCk7IShuPSh1PXMubmV4dCgpKS5kb25lKSYmKHIucHVzaCh1LnZhbHVlKSwhZXx8ci5sZW5ndGghPT1lKTtuPSEwKTt9Y2F0Y2godCl7bz0hMCxhPXR9ZmluYWxseXt0cnl7IW4mJnMucmV0dXJuJiZzLnJldHVybigpfWZpbmFsbHl7aWYobyl0aHJvdyBhfX1yZXR1cm4gcn0odCxlKTt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKX19KCl9LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9e2RlZmF1bHQ6cigxODYpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUscil7cig1Mykscig1MSksdC5leHBvcnRzPXIoMTg3KX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoNjUpLGk9cigyKShcIml0ZXJhdG9yXCIpLG89cigxNik7dC5leHBvcnRzPXIoMCkuaXNJdGVyYWJsZT1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QodCk7cmV0dXJuIHZvaWQgMCE9PWVbaV18fFwiQEBpdGVyYXRvclwiaW4gZXx8by5oYXNPd25Qcm9wZXJ0eShuKGUpKX19LGZ1bmN0aW9uKHQsZSxyKXt0LmV4cG9ydHM9e2RlZmF1bHQ6cigxODkpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUscil7cig1Mykscig1MSksdC5leHBvcnRzPXIoMTkwKX0sZnVuY3Rpb24odCxlLHIpe3ZhciBuPXIoOSksaT1yKDEwMCk7dC5leHBvcnRzPXIoMCkuZ2V0SXRlcmF0b3I9ZnVuY3Rpb24odCl7dmFyIGU9aSh0KTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7cmV0dXJuIG4oZS5jYWxsKHQpKX19XSl9KTsiLCIvLyB2ZXJzaW9uOiAwLjguMFxyXG4vLyBkYXRlOiBUdWUgSmFuIDA5IDIwMTggMTc6MDE6MzcgR01UKzAwMDAgKFdFVClcclxuLy8gbGljZW5jZTogXHJcbi8qKlxyXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxyXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXHJcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXHJcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcclxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcclxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXHJcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXHJcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cclxuKlxyXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKi9cclxuXHJcblxyXG4hZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIlN0b3JhZ2VNYW5hZ2VyXCIsW10sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5TdG9yYWdlTWFuYWdlcj1lKCk6KHRbXCJcIl09dFtcIlwiXXx8e30sdFtcIlwiXS5TdG9yYWdlTWFuYWdlcj1lKCkpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gbihyKXtpZihlW3JdKXJldHVybiBlW3JdLmV4cG9ydHM7dmFyIG89ZVtyXT17aTpyLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbcl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsbiksby5sPSEwLG8uZXhwb3J0c31yZXR1cm4gbi5tPXQsbi5jPWUsbi5kPWZ1bmN0aW9uKHQsZSxyKXtuLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0OnJ9KX0sbi5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiBuLmQoZSxcImFcIixlKSxlfSxuLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LG4ucD1cIlwiLG4obi5zPTE1Mil9KFtmdW5jdGlvbih0LGUpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjpcIjIuNS4zXCJ9O1wibnVtYmVyXCI9PXR5cGVvZiBfX2UmJihfX2U9bil9LGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1wibnVtYmVyXCI9PXR5cGVvZiBfX2cmJihfX2c9bil9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDM0KShcIndrc1wiKSxvPW4oMTkpLGk9bigxKS5TeW1ib2wsdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpOyh0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHJbdF18fChyW3RdPXUmJmlbdF18fCh1P2k6bykoXCJTeW1ib2wuXCIrdCkpfSkuc3RvcmU9cn0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz0hbigxMikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITAsZS5kZWZhdWx0PWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEpLG89bigwKSxpPW4oMTQpLHU9bigxMCksZj1cInByb3RvdHlwZVwiLGM9ZnVuY3Rpb24odCxlLG4pe3ZhciBhLHMsbCxwPXQmYy5GLHY9dCZjLkcseT10JmMuUyxkPXQmYy5QLGg9dCZjLkIsZz10JmMuVyxiPXY/bzpvW2VdfHwob1tlXT17fSksbT1iW2ZdLHc9dj9yOnk/cltlXToocltlXXx8e30pW2ZdO3YmJihuPWUpO2ZvcihhIGluIG4pKHM9IXAmJncmJnZvaWQgMCE9PXdbYV0pJiZhIGluIGJ8fChsPXM/d1thXTpuW2FdLGJbYV09diYmXCJmdW5jdGlvblwiIT10eXBlb2Ygd1thXT9uW2FdOmgmJnM/aShsLHIpOmcmJndbYV09PWw/ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSxuLHIpe2lmKHRoaXMgaW5zdGFuY2VvZiB0KXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgdDtjYXNlIDE6cmV0dXJuIG5ldyB0KGUpO2Nhc2UgMjpyZXR1cm4gbmV3IHQoZSxuKX1yZXR1cm4gbmV3IHQoZSxuLHIpfXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIGVbZl09dFtmXSxlfShsKTpkJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBsP2koRnVuY3Rpb24uY2FsbCxsKTpsLGQmJigoYi52aXJ0dWFsfHwoYi52aXJ0dWFsPXt9KSlbYV09bCx0JmMuUiYmbSYmIW1bYV0mJnUobSxhLGwpKSl9O2MuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsYy5VPTY0LGMuUj0xMjgsdC5leHBvcnRzPWN9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0P251bGwhPT10OlwiZnVuY3Rpb25cIj09dHlwZW9mIHR9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZS5fX2VzTW9kdWxlPSEwO3ZhciByLG89big1NSksaT0ocj1vKSYmci5fX2VzTW9kdWxlP3I6e2RlZmF1bHQ6cn07ZS5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSwoMCxpLmRlZmF1bHQpKHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksciYmdChlLHIpLGV9fSgpfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big5KSxvPW4oMzgpLGk9bigyNCksdT1PYmplY3QuZGVmaW5lUHJvcGVydHk7ZS5mPW4oMyk/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXtpZihyKHQpLGU9aShlLCEwKSxyKG4pLG8pdHJ5e3JldHVybiB1KHQsZSxuKX1jYXRjaCh0KXt9aWYoXCJnZXRcImluIG58fFwic2V0XCJpbiBuKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiBuJiYodFtlXT1uLnZhbHVlKSx0fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFyKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhbiBvYmplY3QhXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOCksbz1uKDE1KTt0LmV4cG9ydHM9bigzKT9mdW5jdGlvbih0LGUsbil7cmV0dXJuIHIuZih0LGUsbygxLG4pKX06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0W2VdPW4sdH19LGZ1bmN0aW9uKHQsZSl7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uY2FsbCh0LGUpfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiEhdCgpfWNhdGNoKHQpe3JldHVybiEwfX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDU2KSxvPW4oMjkpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gcihvKHQpKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDIyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe2lmKHIodCksdm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gobil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdC5jYWxsKGUsbil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24obixyKXtyZXR1cm4gdC5jYWxsKGUsbixyKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihuLHIsbyl7cmV0dXJuIHQuY2FsbChlLG4scixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue2VudW1lcmFibGU6ISgxJnQpLGNvbmZpZ3VyYWJsZTohKDImdCksd3JpdGFibGU6ISg0JnQpLHZhbHVlOmV9fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e319LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDQ0KSxvPW4oMzUpO3QuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7cmV0dXJuIHIodCxvKX19LGZ1bmN0aW9uKHQsZSl7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCkuc2xpY2UoOCwtMSl9fSxmdW5jdGlvbih0LGUpe3ZhciBuPTAscj1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm5cIlN5bWJvbChcIi5jb25jYXQodm9pZCAwPT09dD9cIlwiOnQsXCIpX1wiLCgrK24rcikudG9TdHJpbmcoMzYpKX19LCwsZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUsbil7dmFyIHIsbzshZnVuY3Rpb24oaSx1KXtcInVzZSBzdHJpY3RcIjt2b2lkIDA9PT0obz1cImZ1bmN0aW9uXCI9PXR5cGVvZihyPXUpP3IuY2FsbChlLG4sZSx0KTpyKXx8KHQuZXhwb3J0cz1vKX0oMCxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PWZ1bmN0aW9uKCl7fSxlPVwidW5kZWZpbmVkXCIsbj1bXCJ0cmFjZVwiLFwiZGVidWdcIixcImluZm9cIixcIndhcm5cIixcImVycm9yXCJdO2Z1bmN0aW9uIHIodCxlKXt2YXIgbj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4uYmluZClyZXR1cm4gbi5iaW5kKHQpO3RyeXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChuLHQpfWNhdGNoKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkobixbdCxhcmd1bWVudHNdKX19fWZ1bmN0aW9uIG8oZSxyKXtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIGk9bltvXTt0aGlzW2ldPW88ZT90OnRoaXMubWV0aG9kRmFjdG9yeShpLGUscil9dGhpcy5sb2c9dGhpcy5kZWJ1Z31mdW5jdGlvbiBpKG4saSx1KXtyZXR1cm5cImRlYnVnXCI9PT0oZj1uKSYmKGY9XCJsb2dcIiksdHlwZW9mIGNvbnNvbGUhPT1lJiYodm9pZCAwIT09Y29uc29sZVtmXT9yKGNvbnNvbGUsZik6dm9pZCAwIT09Y29uc29sZS5sb2c/cihjb25zb2xlLFwibG9nXCIpOnQpfHxmdW5jdGlvbih0LG4scil7cmV0dXJuIGZ1bmN0aW9uKCl7dHlwZW9mIGNvbnNvbGUhPT1lJiYoby5jYWxsKHRoaXMsbixyKSx0aGlzW3RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGZ9ZnVuY3Rpb24gdSh0LHIsdSl7dmFyIGYsYz10aGlzLGE9XCJsb2dsZXZlbFwiO2Z1bmN0aW9uIHMoKXt2YXIgdDtpZih0eXBlb2Ygd2luZG93IT09ZSl7dHJ5e3Q9d2luZG93LmxvY2FsU3RvcmFnZVthXX1jYXRjaCh0KXt9aWYodHlwZW9mIHQ9PT1lKXRyeXt2YXIgbj13aW5kb3cuZG9jdW1lbnQuY29va2llLHI9bi5pbmRleE9mKGVuY29kZVVSSUNvbXBvbmVudChhKStcIj1cIik7LTEhPT1yJiYodD0vXihbXjtdKykvLmV4ZWMobi5zbGljZShyKSlbMV0pfWNhdGNoKHQpe31yZXR1cm4gdm9pZCAwPT09Yy5sZXZlbHNbdF0mJih0PXZvaWQgMCksdH19dCYmKGErPVwiOlwiK3QpLGMubmFtZT10LGMubGV2ZWxzPXtUUkFDRTowLERFQlVHOjEsSU5GTzoyLFdBUk46MyxFUlJPUjo0LFNJTEVOVDo1fSxjLm1ldGhvZEZhY3Rvcnk9dXx8aSxjLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGZ9LGMuc2V0TGV2ZWw9ZnVuY3Rpb24ocixpKXtpZihcInN0cmluZ1wiPT10eXBlb2YgciYmdm9pZCAwIT09Yy5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSYmKHI9Yy5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSksIShcIm51bWJlclwiPT10eXBlb2YgciYmcj49MCYmcjw9Yy5sZXZlbHMuU0lMRU5UKSl0aHJvd1wibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIrcjtpZihmPXIsITEhPT1pJiZmdW5jdGlvbih0KXt2YXIgcj0oblt0XXx8XCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtpZih0eXBlb2Ygd2luZG93IT09ZSl7dHJ5e3JldHVybiB2b2lkKHdpbmRvdy5sb2NhbFN0b3JhZ2VbYV09cil9Y2F0Y2godCl7fXRyeXt3aW5kb3cuZG9jdW1lbnQuY29va2llPWVuY29kZVVSSUNvbXBvbmVudChhKStcIj1cIityK1wiO1wifWNhdGNoKHQpe319fShyKSxvLmNhbGwoYyxyLHQpLHR5cGVvZiBjb25zb2xlPT09ZSYmcjxjLmxldmVscy5TSUxFTlQpcmV0dXJuXCJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZ1wifSxjLnNldERlZmF1bHRMZXZlbD1mdW5jdGlvbih0KXtzKCl8fGMuc2V0TGV2ZWwodCwhMSl9LGMuZW5hYmxlQWxsPWZ1bmN0aW9uKHQpe2Muc2V0TGV2ZWwoYy5sZXZlbHMuVFJBQ0UsdCl9LGMuZGlzYWJsZUFsbD1mdW5jdGlvbih0KXtjLnNldExldmVsKGMubGV2ZWxzLlNJTEVOVCx0KX07dmFyIGw9cygpO251bGw9PWwmJihsPW51bGw9PXI/XCJXQVJOXCI6ciksYy5zZXRMZXZlbChsLCExKX12YXIgZj1uZXcgdSxjPXt9O2YuZ2V0TG9nZ2VyPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0fHxcIlwiPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTt2YXIgZT1jW3RdO3JldHVybiBlfHwoZT1jW3RdPW5ldyB1KHQsZi5nZXRMZXZlbCgpLGYubWV0aG9kRmFjdG9yeSkpLGV9O3ZhciBhPXR5cGVvZiB3aW5kb3chPT1lP3dpbmRvdy5sb2c6dm9pZCAwO3JldHVybiBmLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdyE9PWUmJndpbmRvdy5sb2c9PT1mJiYod2luZG93LmxvZz1hKSxmfSxmLmdldExvZ2dlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gY30sZn0pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighcih0KSlyZXR1cm4gdDt2YXIgbixvO2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudmFsdWVPZikmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZighZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDgpLmYsbz1uKDExKSxpPW4oMikoXCJ0b1N0cmluZ1RhZ1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3QmJiFvKHQ9bj90OnQucHJvdG90eXBlLGkpJiZyKHQsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOmV9KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDYpLG89bigxKS5kb2N1bWVudCxpPXIobykmJnIoby5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGk/by5jcmVhdGVFbGVtZW50KHQpOnt9fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ITB9LCxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK3QpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLmNlaWwscj1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP3I6bikodCl9fSxmdW5jdGlvbih0LGUpe2UuZj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMzQpKFwia2V5c1wiKSxvPW4oMTkpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gclt0XXx8KHJbdF09byh0KSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Qocih0KSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxKSxvPXJbXCJfX2NvcmUtanNfc2hhcmVkX19cIl18fChyW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG9bdF18fChvW3RdPXt9KX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mXCIuc3BsaXQoXCIsXCIpfSwsLGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9IW4oMykmJiFuKDEyKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkobigyNikoXCJkaXZcIiksXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOSksbz1uKDcyKSxpPW4oMzUpLHU9bigzMikoXCJJRV9QUk9UT1wiKSxmPWZ1bmN0aW9uKCl7fSxjPWZ1bmN0aW9uKCl7dmFyIHQsZT1uKDI2KShcImlmcmFtZVwiKSxyPWkubGVuZ3RoO2ZvcihlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbig1NykuYXBwZW5kQ2hpbGQoZSksZS5zcmM9XCJqYXZhc2NyaXB0OlwiLCh0PWUuY29udGVudFdpbmRvdy5kb2N1bWVudCkub3BlbigpLHQud3JpdGUoXCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFxcL3NjcmlwdD5cIiksdC5jbG9zZSgpLGM9dC5GO3ItLTspZGVsZXRlIGMucHJvdG90eXBlW2lbcl1dO3JldHVybiBjKCl9O3QuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiBudWxsIT09dD8oZi5wcm90b3R5cGU9cih0KSxuPW5ldyBmLGYucHJvdG90eXBlPW51bGwsblt1XT10KTpuPWMoKSx2b2lkIDA9PT1lP246byhuLGUpfX0sZnVuY3Rpb24odCxlLG4pe2UuZj1uKDIpfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxKSxvPW4oMCksaT1uKDI3KSx1PW4oNDApLGY9big4KS5mO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1vLlN5bWJvbHx8KG8uU3ltYm9sPWk/e306ci5TeW1ib2x8fHt9KTtcIl9cIj09dC5jaGFyQXQoMCl8fHQgaW4gZXx8ZihlLHQse3ZhbHVlOnUuZih0KX0pfX0sZnVuY3Rpb24odCxlKXtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDg5KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTEpLG89bigxMyksaT1uKDYzKSghMSksdT1uKDMyKShcIklFX1BST1RPXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuLGY9byh0KSxjPTAsYT1bXTtmb3IobiBpbiBmKW4hPXUmJnIoZixuKSYmYS5wdXNoKG4pO2Zvcig7ZS5sZW5ndGg+YzspcihmLG49ZVtjKytdKSYmKH5pKGEsbil8fGEucHVzaChuKSk7cmV0dXJuIGF9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big1KSxvPW4oMCksaT1uKDEyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbj0oby5PYmplY3R8fHt9KVt0XXx8T2JqZWN0W3RdLHU9e307dVt0XT1lKG4pLHIoci5TK3IuRippKGZ1bmN0aW9uKCl7bigxKX0pLFwiT2JqZWN0XCIsdSl9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9bigyNyksbz1uKDUpLGk9big1MCksdT1uKDEwKSxmPW4oMTEpLGM9bigxNiksYT1uKDcxKSxzPW4oMjUpLGw9big1MikscD1uKDIpKFwiaXRlcmF0b3JcIiksdj0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGQsaCxnLGIpe2EobixlLGQpO3ZhciBtLHcsTyxTPWZ1bmN0aW9uKHQpe2lmKCF2JiZ0IGluIFApcmV0dXJuIFBbdF07c3dpdGNoKHQpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fSxfPWUrXCIgSXRlcmF0b3JcIix4PVwidmFsdWVzXCI9PWgsaj0hMSxQPXQucHJvdG90eXBlLE09UFtwXXx8UFtcIkBAaXRlcmF0b3JcIl18fGgmJlBbaF0sTD0hdiYmTXx8UyhoKSxUPWg/eD9TKFwiZW50cmllc1wiKTpMOnZvaWQgMCxFPVwiQXJyYXlcIj09ZT9QLmVudHJpZXN8fE06TTtpZihFJiYoTz1sKEUuY2FsbChuZXcgdCkpKSE9PU9iamVjdC5wcm90b3R5cGUmJk8ubmV4dCYmKHMoTyxfLCEwKSxyfHxmKE8scCl8fHUoTyxwLHkpKSx4JiZNJiZcInZhbHVlc1wiIT09TS5uYW1lJiYoaj0hMCxMPWZ1bmN0aW9uKCl7cmV0dXJuIE0uY2FsbCh0aGlzKX0pLHImJiFifHwhdiYmIWomJlBbcF18fHUoUCxwLEwpLGNbZV09TCxjW19dPXksaClpZihtPXt2YWx1ZXM6eD9MOlMoXCJ2YWx1ZXNcIiksa2V5czpnP0w6UyhcImtleXNcIiksZW50cmllczpUfSxiKWZvcih3IGluIG0pdyBpbiBQfHxpKFAsdyxtW3ddKTtlbHNlIG8oby5QK28uRioodnx8aiksZSxtKTtyZXR1cm4gbX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDMxKSxvPW4oMTUpLGk9bigxMyksdT1uKDI0KSxmPW4oMTEpLGM9bigzOCksYT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2UuZj1uKDMpP2E6ZnVuY3Rpb24odCxlKXtpZih0PWkodCksZT11KGUsITApLGMpdHJ5e3JldHVybiBhKHQsZSl9Y2F0Y2godCl7fWlmKGYodCxlKSlyZXR1cm4gbyghci5mLmNhbGwodCxlKSx0W2VdKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDMwKSxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdD4wP28ocih0KSw5MDA3MTk5MjU0NzQwOTkxKTowfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2UuX19lc01vZHVsZT0hMDt2YXIgcj11KG4oNzgpKSxvPXUobig4MCkpLGk9XCJmdW5jdGlvblwiPT10eXBlb2Ygby5kZWZhdWx0JiZcInN5bWJvbFwiPT10eXBlb2Ygci5kZWZhdWx0P2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIG8uZGVmYXVsdCYmdC5jb25zdHJ1Y3Rvcj09PW8uZGVmYXVsdCYmdCE9PW8uZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH07ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZS5kZWZhdWx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIG8uZGVmYXVsdCYmXCJzeW1ib2xcIj09PWkoci5kZWZhdWx0KT9mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmkodCl9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBvLmRlZmF1bHQmJnQuY29uc3RydWN0b3I9PT1vLmRlZmF1bHQmJnQhPT1vLmRlZmF1bHQucHJvdG90eXBlP1wic3ltYm9sXCI6dm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmkodCl9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oMTApfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big3MCkoITApO24oNDYpKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKHQpe3RoaXMuX3Q9U3RyaW5nKHQpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX3Qsbj10aGlzLl9pO3JldHVybiBuPj1lLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9Oih0PXIoZSxuKSx0aGlzLl9pKz10Lmxlbmd0aCx7dmFsdWU6dCxkb25lOiExfSl9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTEpLG89bigzMyksaT1uKDMyKShcIklFX1BST1RPXCIpLHU9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbih0KXtyZXR1cm4gdD1vKHQpLHIodCxpKT90W2ldOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY29uc3RydWN0b3ImJnQgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yP3QuY29uc3RydWN0b3IucHJvdG90eXBlOnQgaW5zdGFuY2VvZiBPYmplY3Q/dTpudWxsfX0sZnVuY3Rpb24odCxlLG4pe24oNzMpO2Zvcih2YXIgcj1uKDEpLG89bigxMCksaT1uKDE2KSx1PW4oMikoXCJ0b1N0cmluZ1RhZ1wiKSxmPVwiQ1NTUnVsZUxpc3QsQ1NTU3R5bGVEZWNsYXJhdGlvbixDU1NWYWx1ZUxpc3QsQ2xpZW50UmVjdExpc3QsRE9NUmVjdExpc3QsRE9NU3RyaW5nTGlzdCxET01Ub2tlbkxpc3QsRGF0YVRyYW5zZmVySXRlbUxpc3QsRmlsZUxpc3QsSFRNTEFsbENvbGxlY3Rpb24sSFRNTENvbGxlY3Rpb24sSFRNTEZvcm1FbGVtZW50LEhUTUxTZWxlY3RFbGVtZW50LE1lZGlhTGlzdCxNaW1lVHlwZUFycmF5LE5hbWVkTm9kZU1hcCxOb2RlTGlzdCxQYWludFJlcXVlc3RMaXN0LFBsdWdpbixQbHVnaW5BcnJheSxTVkdMZW5ndGhMaXN0LFNWR051bWJlckxpc3QsU1ZHUGF0aFNlZ0xpc3QsU1ZHUG9pbnRMaXN0LFNWR1N0cmluZ0xpc3QsU1ZHVHJhbnNmb3JtTGlzdCxTb3VyY2VCdWZmZXJMaXN0LFN0eWxlU2hlZXRMaXN0LFRleHRUcmFja0N1ZUxpc3QsVGV4dFRyYWNrTGlzdCxUb3VjaExpc3RcIi5zcGxpdChcIixcIiksYz0wO2M8Zi5sZW5ndGg7YysrKXt2YXIgYT1mW2NdLHM9clthXSxsPXMmJnMucHJvdG90eXBlO2wmJiFsW3VdJiZvKGwsdSxhKSxpW2FdPWkuQXJyYXl9fSwsZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDYwKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTgpO3QuZXhwb3J0cz1PYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbih0KXtyZXR1cm5cIlN0cmluZ1wiPT1yKHQpP3Quc3BsaXQoXCJcIik6T2JqZWN0KHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSkuZG9jdW1lbnQ7dC5leHBvcnRzPXImJnIuZG9jdW1lbnRFbGVtZW50fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big0NCksbz1uKDM1KS5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKTtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKHQpe3JldHVybiByKHQsbyl9fSwsZnVuY3Rpb24odCxlLG4pe24oNjEpO3ZhciByPW4oMCkuT2JqZWN0O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHIuZGVmaW5lUHJvcGVydHkodCxlLG4pfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNSk7cihyLlMrci5GKiFuKDMpLFwiT2JqZWN0XCIse2RlZmluZVByb3BlcnR5Om4oOCkuZn0pfSxmdW5jdGlvbih0LGUpe30sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTMpLG89big0OCksaT1uKDY0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbix1KXt2YXIgZixjPXIoZSksYT1vKGMubGVuZ3RoKSxzPWkodSxhKTtpZih0JiZuIT1uKXtmb3IoO2E+czspaWYoKGY9Y1tzKytdKSE9ZilyZXR1cm4hMH1lbHNlIGZvcig7YT5zO3MrKylpZigodHx8cyBpbiBjKSYmY1tzXT09PW4pcmV0dXJuIHR8fHN8fDA7cmV0dXJuIXQmJi0xfX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDMwKSxvPU1hdGgubWF4LGk9TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQ9cih0KSk8MD9vKHQrZSwwKTppKHQsZSl9fSwsLCwsLGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDMwKSxvPW4oMjkpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaSx1LGY9U3RyaW5nKG8oZSkpLGM9cihuKSxhPWYubGVuZ3RoO3JldHVybiBjPDB8fGM+PWE/dD9cIlwiOnZvaWQgMDooaT1mLmNoYXJDb2RlQXQoYykpPDU1Mjk2fHxpPjU2MzE5fHxjKzE9PT1hfHwodT1mLmNoYXJDb2RlQXQoYysxKSk8NTYzMjB8fHU+NTczNDM/dD9mLmNoYXJBdChjKTppOnQ/Zi5zbGljZShjLGMrMik6dS01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2fX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDM5KSxvPW4oMTUpLGk9bigyNSksdT17fTtuKDEwKSh1LG4oMikoXCJpdGVyYXRvclwiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt0LnByb3RvdHlwZT1yKHUse25leHQ6bygxLG4pfSksaSh0LGUrXCIgSXRlcmF0b3JcIil9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big4KSxvPW4oOSksaT1uKDE3KTt0LmV4cG9ydHM9bigzKT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbih0LGUpe28odCk7Zm9yKHZhciBuLHU9aShlKSxmPXUubGVuZ3RoLGM9MDtmPmM7KXIuZih0LG49dVtjKytdLGVbbl0pO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oNzQpLG89big3NSksaT1uKDE2KSx1PW4oMTMpO3QuZXhwb3J0cz1uKDQ2KShBcnJheSxcIkFycmF5XCIsZnVuY3Rpb24odCxlKXt0aGlzLl90PXUodCksdGhpcy5faT0wLHRoaXMuX2s9ZX0sZnVuY3Rpb24oKXt2YXIgdD10aGlzLl90LGU9dGhpcy5fayxuPXRoaXMuX2krKztyZXR1cm4hdHx8bj49dC5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOm8oMCxcImtleXNcIj09ZT9uOlwidmFsdWVzXCI9PWU/dFtuXTpbbix0W25dXSl9LFwidmFsdWVzXCIpLGkuQXJndW1lbnRzPWkuQXJyYXkscihcImtleXNcIikscihcInZhbHVlc1wiKSxyKFwiZW50cmllc1wiKX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybnt2YWx1ZTplLGRvbmU6ISF0fX19LCxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxOSkoXCJtZXRhXCIpLG89big2KSxpPW4oMTEpLHU9big4KS5mLGY9MCxjPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGE9IW4oMTIpKGZ1bmN0aW9uKCl7cmV0dXJuIGMoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxzPWZ1bmN0aW9uKHQpe3UodCxyLHt2YWx1ZTp7aTpcIk9cIisgKytmLHc6e319fSl9LGw9dC5leHBvcnRzPXtLRVk6cixORUVEOiExLGZhc3RLZXk6ZnVuY3Rpb24odCxlKXtpZighbyh0KSlyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdD90OihcInN0cmluZ1wiPT10eXBlb2YgdD9cIlNcIjpcIlBcIikrdDtpZighaSh0LHIpKXtpZighYyh0KSlyZXR1cm5cIkZcIjtpZighZSlyZXR1cm5cIkVcIjtzKHQpfXJldHVybiB0W3JdLml9LGdldFdlYWs6ZnVuY3Rpb24odCxlKXtpZighaSh0LHIpKXtpZighYyh0KSlyZXR1cm4hMDtpZighZSlyZXR1cm4hMTtzKHQpfXJldHVybiB0W3JdLnd9LG9uRnJlZXplOmZ1bmN0aW9uKHQpe3JldHVybiBhJiZsLk5FRUQmJmModCkmJiFpKHQscikmJnModCksdH19fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oNzkpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUsbil7big1MSksbig1MyksdC5leHBvcnRzPW4oNDApLmYoXCJpdGVyYXRvclwiKX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDgxKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe24oODIpLG4oNjIpLG4oODYpLG4oODcpLHQuZXhwb3J0cz1uKDApLlN5bWJvbH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oMSksbz1uKDExKSxpPW4oMyksdT1uKDUpLGY9big1MCksYz1uKDc3KS5LRVksYT1uKDEyKSxzPW4oMzQpLGw9bigyNSkscD1uKDE5KSx2PW4oMikseT1uKDQwKSxkPW4oNDEpLGg9big4MyksZz1uKDg0KSxiPW4oOSksbT1uKDYpLHc9bigxMyksTz1uKDI0KSxTPW4oMTUpLF89bigzOSkseD1uKDg1KSxqPW4oNDcpLFA9big4KSxNPW4oMTcpLEw9ai5mLFQ9UC5mLEU9eC5mLGs9ci5TeW1ib2wsQT1yLkpTT04sRj1BJiZBLnN0cmluZ2lmeSxOPVwicHJvdG90eXBlXCIsQz12KFwiX2hpZGRlblwiKSxJPXYoXCJ0b1ByaW1pdGl2ZVwiKSxSPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLEQ9cyhcInN5bWJvbC1yZWdpc3RyeVwiKSxHPXMoXCJzeW1ib2xzXCIpLEs9cyhcIm9wLXN5bWJvbHNcIiksVj1PYmplY3RbTl0sVz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBrLFU9ci5RT2JqZWN0LHE9IVV8fCFVW05dfHwhVVtOXS5maW5kQ2hpbGQsQj1pJiZhKGZ1bmN0aW9uKCl7cmV0dXJuIDchPV8oVCh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFQodGhpcyxcImFcIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbih0LGUsbil7dmFyIHI9TChWLGUpO3ImJmRlbGV0ZSBWW2VdLFQodCxlLG4pLHImJnQhPT1WJiZUKFYsZSxyKX06VCxIPWZ1bmN0aW9uKHQpe3ZhciBlPUdbdF09XyhrW05dKTtyZXR1cm4gZS5faz10LGV9LEo9VyYmXCJzeW1ib2xcIj09dHlwZW9mIGsuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Yga30sWT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9PT1WJiZZKEssZSxuKSxiKHQpLGU9TyhlLCEwKSxiKG4pLG8oRyxlKT8obi5lbnVtZXJhYmxlPyhvKHQsQykmJnRbQ11bZV0mJih0W0NdW2VdPSExKSxuPV8obix7ZW51bWVyYWJsZTpTKDAsITEpfSkpOihvKHQsQyl8fFQodCxDLFMoMSx7fSkpLHRbQ11bZV09ITApLEIodCxlLG4pKTpUKHQsZSxuKX0sej1mdW5jdGlvbih0LGUpe2IodCk7Zm9yKHZhciBuLHI9aChlPXcoZSkpLG89MCxpPXIubGVuZ3RoO2k+bzspWSh0LG49cltvKytdLGVbbl0pO3JldHVybiB0fSxRPWZ1bmN0aW9uKHQpe3ZhciBlPVIuY2FsbCh0aGlzLHQ9Tyh0LCEwKSk7cmV0dXJuISh0aGlzPT09ViYmbyhHLHQpJiYhbyhLLHQpKSYmKCEoZXx8IW8odGhpcyx0KXx8IW8oRyx0KXx8byh0aGlzLEMpJiZ0aGlzW0NdW3RdKXx8ZSl9LFg9ZnVuY3Rpb24odCxlKXtpZih0PXcodCksZT1PKGUsITApLHQhPT1WfHwhbyhHLGUpfHxvKEssZSkpe3ZhciBuPUwodCxlKTtyZXR1cm4hbnx8IW8oRyxlKXx8byh0LEMpJiZ0W0NdW2VdfHwobi5lbnVtZXJhYmxlPSEwKSxufX0sWj1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj1FKHcodCkpLHI9W10saT0wO24ubGVuZ3RoPmk7KW8oRyxlPW5baSsrXSl8fGU9PUN8fGU9PWN8fHIucHVzaChlKTtyZXR1cm4gcn0sJD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10PT09VixyPUUobj9LOncodCkpLGk9W10sdT0wO3IubGVuZ3RoPnU7KSFvKEcsZT1yW3UrK10pfHxuJiYhbyhWLGUpfHxpLnB1c2goR1tlXSk7cmV0dXJuIGl9O1d8fChmKChrPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIGspdGhyb3cgVHlwZUVycm9yKFwiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIVwiKTt2YXIgdD1wKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSxlPWZ1bmN0aW9uKG4pe3RoaXM9PT1WJiZlLmNhbGwoSyxuKSxvKHRoaXMsQykmJm8odGhpc1tDXSx0KSYmKHRoaXNbQ11bdF09ITEpLEIodGhpcyx0LFMoMSxuKSl9O3JldHVybiBpJiZxJiZCKFYsdCx7Y29uZmlndXJhYmxlOiEwLHNldDplfSksSCh0KX0pW05dLFwidG9TdHJpbmdcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksai5mPVgsUC5mPVksbig1OCkuZj14LmY9WixuKDMxKS5mPVEsbig0MikuZj0kLGkmJiFuKDI3KSYmZihWLFwicHJvcGVydHlJc0VudW1lcmFibGVcIixRLCEwKSx5LmY9ZnVuY3Rpb24odCl7cmV0dXJuIEgodih0KSl9KSx1KHUuRyt1LlcrdS5GKiFXLHtTeW1ib2w6a30pO2Zvcih2YXIgdHQ9XCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlc1wiLnNwbGl0KFwiLFwiKSxldD0wO3R0Lmxlbmd0aD5ldDspdih0dFtldCsrXSk7Zm9yKHZhciBudD1NKHYuc3RvcmUpLHJ0PTA7bnQubGVuZ3RoPnJ0OylkKG50W3J0KytdKTt1KHUuUyt1LkYqIVcsXCJTeW1ib2xcIix7Zm9yOmZ1bmN0aW9uKHQpe3JldHVybiBvKEQsdCs9XCJcIik/RFt0XTpEW3RdPWsodCl9LGtleUZvcjpmdW5jdGlvbih0KXtpZighSih0KSl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBzeW1ib2whXCIpO2Zvcih2YXIgZSBpbiBEKWlmKERbZV09PT10KXJldHVybiBlfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtxPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtxPSExfX0pLHUodS5TK3UuRiohVyxcIk9iamVjdFwiLHtjcmVhdGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZT9fKHQpOnooXyh0KSxlKX0sZGVmaW5lUHJvcGVydHk6WSxkZWZpbmVQcm9wZXJ0aWVzOnosZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOlgsZ2V0T3duUHJvcGVydHlOYW1lczpaLGdldE93blByb3BlcnR5U3ltYm9sczokfSksQSYmdSh1LlMrdS5GKighV3x8YShmdW5jdGlvbigpe3ZhciB0PWsoKTtyZXR1cm5cIltudWxsXVwiIT1GKFt0XSl8fFwie31cIiE9Rih7YTp0fSl8fFwie31cIiE9RihPYmplY3QodCkpfSkpLFwiSlNPTlwiLHtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj1bdF0sbz0xO2FyZ3VtZW50cy5sZW5ndGg+bzspci5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZihuPWU9clsxXSwobShlKXx8dm9pZCAwIT09dCkmJiFKKHQpKXJldHVybiBnKGUpfHwoZT1mdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJihlPW4uY2FsbCh0aGlzLHQsZSkpLCFKKGUpKXJldHVybiBlfSksclsxXT1lLEYuYXBwbHkoQSxyKX19KSxrW05dW0ldfHxuKDEwKShrW05dLEksa1tOXS52YWx1ZU9mKSxsKGssXCJTeW1ib2xcIiksbChNYXRoLFwiTWF0aFwiLCEwKSxsKHIuSlNPTixcIkpTT05cIiwhMCl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDE3KSxvPW4oNDIpLGk9bigzMSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXIodCksbj1vLmY7aWYobilmb3IodmFyIHUsZj1uKHQpLGM9aS5mLGE9MDtmLmxlbmd0aD5hOyljLmNhbGwodCx1PWZbYSsrXSkmJmUucHVzaCh1KTtyZXR1cm4gZX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDE4KTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJBcnJheVwiPT1yKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTMpLG89big1OCkuZixpPXt9LnRvU3RyaW5nLHU9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdO3QuZXhwb3J0cy5mPWZ1bmN0aW9uKHQpe3JldHVybiB1JiZcIltvYmplY3QgV2luZG93XVwiPT1pLmNhbGwodCk/ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBvKHQpfWNhdGNoKHQpe3JldHVybiB1LnNsaWNlKCl9fSh0KTpvKHIodCkpfX0sZnVuY3Rpb24odCxlLG4pe24oNDEpKFwiYXN5bmNJdGVyYXRvclwiKX0sZnVuY3Rpb24odCxlLG4pe24oNDEpKFwib2JzZXJ2YWJsZVwiKX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDExOCksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSxuKXtuKDkwKSx0LmV4cG9ydHM9bigwKS5PYmplY3Qua2V5c30sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMzMpLG89bigxNyk7big0NSkoXCJrZXlzXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG8ocih0KSl9fSl9LCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLGZ1bmN0aW9uKHQsZSxuKXtuKDExOSksdC5leHBvcnRzPW4oMCkuT2JqZWN0LmFzc2lnbn0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNSk7cihyLlMrci5GLFwiT2JqZWN0XCIse2Fzc2lnbjpuKDEyMCl9KX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oMTcpLG89big0MiksaT1uKDMxKSx1PW4oMzMpLGY9big1NiksYz1PYmplY3QuYXNzaWduO3QuZXhwb3J0cz0hY3x8bigxMikoZnVuY3Rpb24oKXt2YXIgdD17fSxlPXt9LG49U3ltYm9sKCkscj1cImFiY2RlZmdoaWprbG1ub3BxcnN0XCI7cmV0dXJuIHRbbl09NyxyLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT10fSksNyE9Yyh7fSx0KVtuXXx8T2JqZWN0LmtleXMoYyh7fSxlKSkuam9pbihcIlwiKSE9cn0pP2Z1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXUodCksYz1hcmd1bWVudHMubGVuZ3RoLGE9MSxzPW8uZixsPWkuZjtjPmE7KWZvcih2YXIgcCx2PWYoYXJndW1lbnRzW2ErK10pLHk9cz9yKHYpLmNvbmNhdChzKHYpKTpyKHYpLGQ9eS5sZW5ndGgsaD0wO2Q+aDspbC5jYWxsKHYscD15W2grK10pJiYobltwXT12W3BdKTtyZXR1cm4gbn06Y30sLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcixvPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0obigyMykpLGk9bigxNTMpLHU9KHI9aSkmJnIuX19lc01vZHVsZT9yOntkZWZhdWx0OnJ9O28uZ2V0TG9nZ2VyKFwiU3RvcmFnZU1hbmFnZXJcIikuc2V0TGV2ZWwoMCksZS5kZWZhdWx0PXUuZGVmYXVsdCx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9YShuKDE1NCkpLG89YShuKDQzKSksaT1hKG4oNDkpKSx1PWEobig4OCkpLGY9YShuKDQpKSxjPWEobig3KSk7ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19dmFyIHM9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShuKDIzKSkuZ2V0TG9nZ2VyKFwiU3RvcmFnZU1hbmFnZXJcIiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuLHIpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXToxO2lmKCgwLGYuZGVmYXVsdCkodGhpcyx0KSwhZSl0aHJvdyBFcnJvcihcIlRoZSBTdG9yYWdlIE1hbmFnZXIgbmVlZHMgdGhlIGRhdGFiYXNlIGluc3RhbmNlXCIpO2lmKCFuKXRocm93IEVycm9yKFwiVGhlIFN0b3JhZ2UgTWFuYWdlciBuZWVkcyB0aGUgc3RvcmFnZSBuYW1lXCIpO3ZhciBpPXt9O3I/aT1yOmlbbl09XCJrZXksdmVyc2lvbix2YWx1ZVwiLGUudmVyc2lvbihvKS5zdG9yZXMoaSksZS5vcGVuKCkudGhlbihmdW5jdGlvbih0KXtzLmluZm8oXCJGb3VuZCBkYXRhYmFzZSBuYW1lIFwiK3QubmFtZStcIiB3aXRoIHZlcnNpb24gbm86IFwiK3QudmVybm8pfSkuY2F0Y2gocy5lcnJvciksdGhpcy5kYj1lLHRoaXMuc3RvcmFnZU5hbWU9bn1yZXR1cm4oMCxjLmRlZmF1bHQpKHQsW3trZXk6XCJfY2hlY2tLZXlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdD90LnRvU3RyaW5nKCk6dH19LHtrZXk6XCJfZ2V0VGFibGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT12b2lkIDA7dHJ5e2U9dGhpcy5kYi50YWJsZSh0aGlzLnN0b3JhZ2VOYW1lKS5uYW1lfWNhdGNoKG4pe2U9dGhpcy5kYi50YWJsZSh0KS5uYW1lfXJldHVybiBlfX0se2tleTpcIl9nZXRQcmltYXJ5S2V5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGIudGFibGUodCkuc2NoZW1hLnByaW1LZXkubmFtZX19LHtrZXk6XCJfaXNEZWZhdWx0U2NoZW1hXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZ2V0VGFibGUodCksbj10aGlzLmRiW2VdLnNjaGVtYS5pbnN0YW5jZVRlbXBsYXRlO3JldHVybiBuLmhhc093blByb3BlcnR5KFwidmFsdWVcIikmJm4uaGFzT3duUHJvcGVydHkoXCJ2ZXJzaW9uXCIpJiZuLmhhc093blByb3BlcnR5KFwia2V5XCIpfX0se2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLHIpe3MuaW5mbyhcIltTdG9yYWdlTWFuYWdlcl0gLSBzZXQgXCIsdCxuKSxyPXJ8fHQ7dmFyIG89dGhpcy5fZ2V0VGFibGUociksaT10aGlzLl9nZXRQcmltYXJ5S2V5KG8pLGY9bjtpZih0aGlzLl9pc0RlZmF1bHRTY2hlbWEocikpZj17a2V5OnQsdmVyc2lvbjplLHZhbHVlOm59O2Vsc2V7dmFyIGM9e307Y1tpXT10LCgwLHUuZGVmYXVsdCkoZixjKX1yZXR1cm4gdGhpcy5kYltvXS5wdXQoZil9fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciB1PXRoaXM7Y29uc29sZS5pbmZvKFwiW1N0b3JhZ2VNYW5hZ2VyXSAtIGdldCBcIix0LGUpLG49bnx8dDt2YXIgZj10aGlzLl9nZXRUYWJsZShuKSxjPXRoaXMuX2dldFByaW1hcnlLZXkoZik7cmV0dXJuIHRoaXMuZGIudHJhbnNhY3Rpb24oXCJydyFcIix0aGlzLmRiW2ZdLGZ1bmN0aW9uKCl7aWYoIXQmJiFlKXJldHVybiB1LmRiW2ZdLnRvQXJyYXkoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0W2VbY11dPWUsdH0se30pfSk7aWYoIWUpcmV0dXJuIHUuZGJbZl0ud2hlcmUoYykuZXF1YWxzKHQpLmZpcnN0KCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpP3QudmFsdWU6dH0pO3ZhciBuPXZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjooMCxpLmRlZmF1bHQpKGUpO3N3aXRjaChBcnJheS5pc0FycmF5KGUpJiYobj1cImFycmF5XCIpLG4pe2Nhc2VcInN0cmluZ1wiOnJldHVybiB1LmRiW2ZdLndoZXJlKHQpLmVxdWFscyhlKS5maXJzdCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKT90LnZhbHVlOnR9KTtjYXNlXCJvYmplY3RcIjp2YXIgYT1cInZhbHVlLlwiKygwLG8uZGVmYXVsdCkoZSkudG9TdHJpbmcoKSxzPSgwLHIuZGVmYXVsdCkoZSk7cmV0dXJuIGNvbnNvbGUubG9nKGEscyksdS5kYltmXS53aGVyZShhKS5hbnlPZihzKS5maXJzdCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKT90LnZhbHVlOnR9KTtjYXNlXCJhcnJheVwiOnJldHVybiBjb25zb2xlLmxvZyhcIkFSUkFZOlwiLGUpLHUuZGJbZl0ud2hlcmUoZSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5oYXNPd25Qcm9wZXJ0eShcInZhbHVlXCIpP3QudmFsdWU6dH0pfX0pfX0se2tleTpcImdldFZlcnNpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcztzLmluZm8oXCJbU3RvcmFnZU1hbmFnZXJdIC0gZ2V0VmVyc2lvbiBmb3Iga2V5IFwiLHQpLG49bnx8dDt2YXIgbz10aGlzLl9nZXRUYWJsZShuKSxpPXRoaXMuX2dldFByaW1hcnlLZXkobyksdT1lO3JldHVybiBlfHwodT10KSx0aGlzLmRiLnRyYW5zYWN0aW9uKFwicnchXCIsdGhpcy5kYltvXSxmdW5jdGlvbigpe3JldHVybiByLmRiW29dLndoZXJlKGkpLmVxdWFscyh1KS5maXJzdCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuaGFzT3duUHJvcGVydHkoXCJ2ZXJzaW9uXCIpP3QudmVyc2lvbjp0fSkuY2F0Y2goZnVuY3Rpb24oZSl7cy5pbmZvKFwiZXJyb3IgZ2V0dGluZyB0aGUgdmVyc2lvbiBmb3IgXCIsdCxcIiB3aXRoIGVycm9yOiBcIixlKX0pfSl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe249bnx8dDt2YXIgcj10aGlzLl9nZXRUYWJsZShuKSxvPXRoaXMuX2dldFByaW1hcnlLZXkociksaT1lO3JldHVybiBlfHwoaT10KSx0aGlzLmRiW3JdLndoZXJlKG8pLmVxdWFscyhpKS5kZWxldGUoKX19XSksdH0oKTtlLmRlZmF1bHQ9bCx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oMTU1KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe24oMTU2KSx0LmV4cG9ydHM9bigwKS5PYmplY3QudmFsdWVzfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big1KSxvPW4oMTU3KSghMSk7cihyLlMsXCJPYmplY3RcIix7dmFsdWVzOmZ1bmN0aW9uKHQpe3JldHVybiBvKHQpfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxNyksbz1uKDEzKSxpPW4oMzEpLmY7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG4sdT1vKGUpLGY9cih1KSxjPWYubGVuZ3RoLGE9MCxzPVtdO2M+YTspaS5jYWxsKHUsbj1mW2ErK10pJiZzLnB1c2godD9bbix1W25dXTp1W25dKTtyZXR1cm4gc319fV0pfSk7IiwiLyohXG4gKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzXG4gKiBJUHY2IFN1cHBvcnRcbiAqXG4gKiBWZXJzaW9uOiAxLjE5LjBcbiAqXG4gKiBBdXRob3I6IFJvZG5leSBSZWhtXG4gKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy9cbiAqXG4gKiBMaWNlbnNlZCB1bmRlclxuICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKlxuICovXG5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAndXNlIHN0cmljdCc7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qc1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAvLyBOb2RlXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgIHJvb3QuSVB2NiA9IGZhY3Rvcnkocm9vdCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKHJvb3QpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qXG4gIHZhciBfaW4gPSBcImZlODA6MDAwMDowMDAwOjAwMDA6MDIwNDo2MWZmOmZlOWQ6ZjE1NlwiO1xuICB2YXIgX291dCA9IElQdjYuYmVzdChfaW4pO1xuICB2YXIgX2V4cGVjdGVkID0gXCJmZTgwOjoyMDQ6NjFmZjpmZTlkOmYxNTZcIjtcblxuICBjb25zb2xlLmxvZyhfaW4sIF9vdXQsIF9leHBlY3RlZCwgX291dCA9PT0gX2V4cGVjdGVkKTtcbiAgKi9cblxuICAvLyBzYXZlIGN1cnJlbnQgSVB2NiB2YXJpYWJsZSwgaWYgYW55XG4gIHZhciBfSVB2NiA9IHJvb3QgJiYgcm9vdC5JUHY2O1xuXG4gIGZ1bmN0aW9uIGJlc3RQcmVzZW50YXRpb24oYWRkcmVzcykge1xuICAgIC8vIGJhc2VkIG9uOlxuICAgIC8vIEphdmFzY3JpcHQgdG8gdGVzdCBhbiBJUHY2IGFkZHJlc3MgZm9yIHByb3BlciBmb3JtYXQsIGFuZCB0b1xuICAgIC8vIHByZXNlbnQgdGhlIFwiYmVzdCB0ZXh0IHJlcHJlc2VudGF0aW9uXCIgYWNjb3JkaW5nIHRvIElFVEYgRHJhZnQgUkZDIGF0XG4gICAgLy8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi02bWFuLXRleHQtYWRkci1yZXByZXNlbnRhdGlvbi0wNFxuICAgIC8vIDggRmViIDIwMTAgUmljaCBCcm93biwgRGFydHdhcmUsIExMQ1xuICAgIC8vIFBsZWFzZSBmZWVsIGZyZWUgdG8gdXNlIHRoaXMgY29kZSBhcyBsb25nIGFzIHlvdSBwcm92aWRlIGEgbGluayB0b1xuICAgIC8vIGh0dHA6Ly93d3cuaW50ZXJtYXBwZXIuY29tXG4gICAgLy8gaHR0cDovL2ludGVybWFwcGVyLmNvbS9zdXBwb3J0L3Rvb2xzL0lQVjYtVmFsaWRhdG9yLmFzcHhcbiAgICAvLyBodHRwOi8vZG93bmxvYWQuZGFydHdhcmUuY29tL3RoaXJkcGFydHkvaXB2NnZhbGlkYXRvci5qc1xuXG4gICAgdmFyIF9hZGRyZXNzID0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpO1xuICAgIHZhciBzZWdtZW50cyA9IF9hZGRyZXNzLnNwbGl0KCc6Jyk7XG4gICAgdmFyIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDtcbiAgICB2YXIgdG90YWwgPSA4O1xuXG4gICAgLy8gdHJpbSBjb2xvbnMgKDo6IG9yIDo6YTpiOmPigKYgb3Ig4oCmYTpiOmM6OilcbiAgICBpZiAoc2VnbWVudHNbMF0gPT09ICcnICYmIHNlZ21lbnRzWzFdID09PSAnJyAmJiBzZWdtZW50c1syXSA9PT0gJycpIHtcbiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIDo6XG4gICAgICAvLyByZW1vdmUgZmlyc3QgdHdvIGl0ZW1zXG4gICAgICBzZWdtZW50cy5zaGlmdCgpO1xuICAgICAgc2VnbWVudHMuc2hpZnQoKTtcbiAgICB9IGVsc2UgaWYgKHNlZ21lbnRzWzBdID09PSAnJyAmJiBzZWdtZW50c1sxXSA9PT0gJycpIHtcbiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIDo6eHh4eFxuICAgICAgLy8gcmVtb3ZlIHRoZSBmaXJzdCBpdGVtXG4gICAgICBzZWdtZW50cy5zaGlmdCgpO1xuICAgIH0gZWxzZSBpZiAoc2VnbWVudHNbbGVuZ3RoIC0gMV0gPT09ICcnICYmIHNlZ21lbnRzW2xlbmd0aCAtIDJdID09PSAnJykge1xuICAgICAgLy8gbXVzdCBoYXZlIGJlZW4geHh4eDo6XG4gICAgICBzZWdtZW50cy5wb3AoKTtcbiAgICB9XG5cbiAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7XG5cbiAgICAvLyBhZGp1c3QgdG90YWwgc2VnbWVudHMgZm9yIElQdjQgdHJhaWxlclxuICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXS5pbmRleE9mKCcuJykgIT09IC0xKSB7XG4gICAgICAvLyBmb3VuZCBhIFwiLlwiIHdoaWNoIG1lYW5zIElQdjRcbiAgICAgIHRvdGFsID0gNztcbiAgICB9XG5cbiAgICAvLyBmaWxsIGVtcHR5IHNlZ21lbnRzIHRoZW0gd2l0aCBcIjAwMDBcIlxuICAgIHZhciBwb3M7XG4gICAgZm9yIChwb3MgPSAwOyBwb3MgPCBsZW5ndGg7IHBvcysrKSB7XG4gICAgICBpZiAoc2VnbWVudHNbcG9zXSA9PT0gJycpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvcyA8IHRvdGFsKSB7XG4gICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAxLCAnMDAwMCcpO1xuICAgICAgd2hpbGUgKHNlZ21lbnRzLmxlbmd0aCA8IHRvdGFsKSB7XG4gICAgICAgIHNlZ21lbnRzLnNwbGljZShwb3MsIDAsICcwMDAwJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gc3RyaXAgbGVhZGluZyB6ZXJvc1xuICAgIHZhciBfc2VnbWVudHM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICBfc2VnbWVudHMgPSBzZWdtZW50c1tpXS5zcGxpdCgnJyk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDMgOyBqKyspIHtcbiAgICAgICAgaWYgKF9zZWdtZW50c1swXSA9PT0gJzAnICYmIF9zZWdtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgX3NlZ21lbnRzLnNwbGljZSgwLDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNlZ21lbnRzW2ldID0gX3NlZ21lbnRzLmpvaW4oJycpO1xuICAgIH1cblxuICAgIC8vIGZpbmQgbG9uZ2VzdCBzZXF1ZW5jZSBvZiB6ZXJvZXMgYW5kIGNvYWxlc2NlIHRoZW0gaW50byBvbmUgc2VnbWVudFxuICAgIHZhciBiZXN0ID0gLTE7XG4gICAgdmFyIF9iZXN0ID0gMDtcbiAgICB2YXIgX2N1cnJlbnQgPSAwO1xuICAgIHZhciBjdXJyZW50ID0gLTE7XG4gICAgdmFyIGluemVyb2VzID0gZmFsc2U7XG4gICAgLy8gaTsgYWxyZWFkeSBkZWNsYXJlZFxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcbiAgICAgIGlmIChpbnplcm9lcykge1xuICAgICAgICBpZiAoc2VnbWVudHNbaV0gPT09ICcwJykge1xuICAgICAgICAgIF9jdXJyZW50ICs9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW56ZXJvZXMgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoX2N1cnJlbnQgPiBfYmVzdCkge1xuICAgICAgICAgICAgYmVzdCA9IGN1cnJlbnQ7XG4gICAgICAgICAgICBfYmVzdCA9IF9jdXJyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNlZ21lbnRzW2ldID09PSAnMCcpIHtcbiAgICAgICAgICBpbnplcm9lcyA9IHRydWU7XG4gICAgICAgICAgY3VycmVudCA9IGk7XG4gICAgICAgICAgX2N1cnJlbnQgPSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKF9jdXJyZW50ID4gX2Jlc3QpIHtcbiAgICAgIGJlc3QgPSBjdXJyZW50O1xuICAgICAgX2Jlc3QgPSBfY3VycmVudDtcbiAgICB9XG5cbiAgICBpZiAoX2Jlc3QgPiAxKSB7XG4gICAgICBzZWdtZW50cy5zcGxpY2UoYmVzdCwgX2Jlc3QsICcnKTtcbiAgICB9XG5cbiAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7XG5cbiAgICAvLyBhc3NlbWJsZSByZW1haW5pbmcgc2VnbWVudHNcbiAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgaWYgKHNlZ21lbnRzWzBdID09PSAnJykgIHtcbiAgICAgIHJlc3VsdCA9ICc6JztcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdCArPSBzZWdtZW50c1tpXTtcbiAgICAgIGlmIChpID09PSBsZW5ndGggLSAxKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgKz0gJzonO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXSA9PT0gJycpIHtcbiAgICAgIHJlc3VsdCArPSAnOic7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgaWYgKHJvb3QuSVB2NiA9PT0gdGhpcykge1xuICAgICAgcm9vdC5JUHY2ID0gX0lQdjY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGJlc3Q6IGJlc3RQcmVzZW50YXRpb24sXG4gICAgbm9Db25mbGljdDogbm9Db25mbGljdFxuICB9O1xufSkpO1xuIiwiLyohXG4gKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzXG4gKiBTZWNvbmQgTGV2ZWwgRG9tYWluIChTTEQpIFN1cHBvcnRcbiAqXG4gKiBWZXJzaW9uOiAxLjE5LjBcbiAqXG4gKiBBdXRob3I6IFJvZG5leSBSZWhtXG4gKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy9cbiAqXG4gKiBMaWNlbnNlZCB1bmRlclxuICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKlxuICovXG5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAndXNlIHN0cmljdCc7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qc1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAvLyBOb2RlXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgIHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zID0gZmFjdG9yeShyb290KTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAocm9vdCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gc2F2ZSBjdXJyZW50IFNlY29uZExldmVsRG9tYWlucyB2YXJpYWJsZSwgaWYgYW55XG4gIHZhciBfU2Vjb25kTGV2ZWxEb21haW5zID0gcm9vdCAmJiByb290LlNlY29uZExldmVsRG9tYWlucztcblxuICB2YXIgU0xEID0ge1xuICAgIC8vIGxpc3Qgb2Yga25vd24gU2Vjb25kIExldmVsIERvbWFpbnNcbiAgICAvLyBjb252ZXJ0ZWQgbGlzdCBvZiBTTERzIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dhdmluZ21pbGxlci9zZWNvbmQtbGV2ZWwtZG9tYWluc1xuICAgIC8vIC0tLS1cbiAgICAvLyBwdWJsaWNzdWZmaXgub3JnIGlzIG1vcmUgY3VycmVudCBhbmQgYWN0dWFsbHkgdXNlZCBieSBhIGNvdXBsZSBvZiBicm93c2VycyBpbnRlcm5hbGx5LlxuICAgIC8vIGRvd25zaWRlIGlzIGl0IGFsc28gY29udGFpbnMgZG9tYWlucyBsaWtlIFwiZHluZG5zLm9yZ1wiIC0gd2hpY2ggaXMgZmluZSBmb3IgdGhlIHNlY3VyaXR5XG4gICAgLy8gaXNzdWVzIGJyb3dzZXIgaGF2ZSB0byBkZWFsIHdpdGggKFNPUCBmb3IgY29va2llcywgZXRjKSAtIGJ1dCBpcyB3YXkgb3ZlcmJvYXJkIGZvciBVUkkuanNcbiAgICAvLyAtLS0tXG4gICAgbGlzdDoge1xuICAgICAgJ2FjJzonIGNvbSBnb3YgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdhZSc6JyBhYyBjbyBnb3YgbWlsIG5hbWUgbmV0IG9yZyBwcm8gc2NoICcsXG4gICAgICAnYWYnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2FsJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsXG4gICAgICAnYW8nOicgY28gZWQgZ3YgaXQgb2cgcGIgJyxcbiAgICAgICdhcic6JyBjb20gZWR1IGdvYiBnb3YgaW50IG1pbCBuZXQgb3JnIHR1ciAnLFxuICAgICAgJ2F0JzonIGFjIGNvIGd2IG9yICcsXG4gICAgICAnYXUnOicgYXNuIGNvbSBjc2lybyBlZHUgZ292IGlkIG5ldCBvcmcgJyxcbiAgICAgICdiYSc6JyBjbyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyBycyB1bmJpIHVubW8gdW5zYSB1bnR6IHVuemUgJyxcbiAgICAgICdiYic6JyBiaXogY28gY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnIHN0b3JlIHR2ICcsXG4gICAgICAnYmgnOicgYml6IGNjIGNvbSBlZHUgZ292IGluZm8gbmV0IG9yZyAnLFxuICAgICAgJ2JuJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdibyc6JyBjb20gZWR1IGdvYiBnb3YgaW50IG1pbCBuZXQgb3JnIHR2ICcsXG4gICAgICAnYnInOicgYWRtIGFkdiBhZ3IgYW0gYXJxIGFydCBhdG8gYiBiaW8gYmxvZyBibWQgY2ltIGNuZyBjbnQgY29tIGNvb3AgZWNuIGVkdSBlbmcgZXNwIGV0YyBldGkgZmFyIGZsb2cgZm0gZm5kIGZvdCBmc3QgZzEyIGdnZiBnb3YgaW1iIGluZCBpbmYgam9yIGp1cyBsZWwgbWF0IG1lZCBtaWwgbXVzIG5ldCBub20gbm90IG50ciBvZG8gb3JnIHBwZyBwcm8gcHNjIHBzaSBxc2wgcmVjIHNsZyBzcnYgdG1wIHRyZCB0dXIgdHYgdmV0IHZsb2cgd2lraSB6bGcgJyxcbiAgICAgICdicyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnYnonOicgZHUgZXQgb20gb3YgcmcgJyxcbiAgICAgICdjYSc6JyBhYiBiYyBtYiBuYiBuZiBubCBucyBudCBudSBvbiBwZSBxYyBzayB5ayAnLFxuICAgICAgJ2NrJzonIGJpeiBjbyBlZHUgZ2VuIGdvdiBpbmZvIG5ldCBvcmcgJyxcbiAgICAgICdjbic6JyBhYyBhaCBiaiBjb20gY3EgZWR1IGZqIGdkIGdvdiBncyBneCBneiBoYSBoYiBoZSBoaSBobCBobiBqbCBqcyBqeCBsbiBtaWwgbmV0IG5tIG54IG9yZyBxaCBzYyBzZCBzaCBzbiBzeCB0aiB0dyB4aiB4eiB5biB6aiAnLFxuICAgICAgJ2NvJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgbm9tIG9yZyAnLFxuICAgICAgJ2NyJzonIGFjIGMgY28gZWQgZmkgZ28gb3Igc2EgJyxcbiAgICAgICdjeSc6JyBhYyBiaXogY29tIGVrbG9nZXMgZ292IGx0ZCBuYW1lIG5ldCBvcmcgcGFybGlhbWVudCBwcmVzcyBwcm8gdG0gJyxcbiAgICAgICdkbyc6JyBhcnQgY29tIGVkdSBnb2IgZ292IG1pbCBuZXQgb3JnIHNsZCB3ZWIgJyxcbiAgICAgICdkeic6JyBhcnQgYXNzbyBjb20gZWR1IGdvdiBuZXQgb3JnIHBvbCAnLFxuICAgICAgJ2VjJzonIGNvbSBlZHUgZmluIGdvdiBpbmZvIG1lZCBtaWwgbmV0IG9yZyBwcm8gJyxcbiAgICAgICdlZyc6JyBjb20gZWR1IGV1biBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2kgJyxcbiAgICAgICdlcic6JyBjb20gZWR1IGdvdiBpbmQgbWlsIG5ldCBvcmcgcm9jaGVzdCB3ICcsXG4gICAgICAnZXMnOicgY29tIGVkdSBnb2Igbm9tIG9yZyAnLFxuICAgICAgJ2V0JzonIGJpeiBjb20gZWR1IGdvdiBpbmZvIG5hbWUgbmV0IG9yZyAnLFxuICAgICAgJ2ZqJzonIGFjIGJpeiBjb20gaW5mbyBtaWwgbmFtZSBuZXQgb3JnIHBybyAnLFxuICAgICAgJ2ZrJzonIGFjIGNvIGdvdiBuZXQgbm9tIG9yZyAnLFxuICAgICAgJ2ZyJzonIGFzc28gY29tIGYgZ291diBub20gcHJkIHByZXNzZSB0bSAnLFxuICAgICAgJ2dnJzonIGNvIG5ldCBvcmcgJyxcbiAgICAgICdnaCc6JyBjb20gZWR1IGdvdiBtaWwgb3JnICcsXG4gICAgICAnZ24nOicgYWMgY29tIGdvdiBuZXQgb3JnICcsXG4gICAgICAnZ3InOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdndCc6JyBjb20gZWR1IGdvYiBpbmQgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdndSc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnaGsnOicgY29tIGVkdSBnb3YgaWR2IG5ldCBvcmcgJyxcbiAgICAgICdodSc6JyAyMDAwIGFncmFyIGJvbHQgY2FzaW5vIGNpdHkgY28gZXJvdGljYSBlcm90aWthIGZpbG0gZm9ydW0gZ2FtZXMgaG90ZWwgaW5mbyBpbmdhdGxhbiBqb2dhc3oga29ueXZlbG8gbGFrYXMgbWVkaWEgbmV3cyBvcmcgcHJpdiByZWtsYW0gc2V4IHNob3Agc3BvcnQgc3VsaSBzemV4IHRtIHRvenNkZSB1dGF6YXMgdmlkZW8gJyxcbiAgICAgICdpZCc6JyBhYyBjbyBnbyBtaWwgbmV0IG9yIHNjaCB3ZWIgJyxcbiAgICAgICdpbCc6JyBhYyBjbyBnb3YgaWRmIGsxMiBtdW5pIG5ldCBvcmcgJyxcbiAgICAgICdpbic6JyBhYyBjbyBlZHUgZXJuZXQgZmlybSBnZW4gZ292IGkgaW5kIG1pbCBuZXQgbmljIG9yZyByZXMgJyxcbiAgICAgICdpcSc6JyBjb20gZWR1IGdvdiBpIG1pbCBuZXQgb3JnICcsXG4gICAgICAnaXInOicgYWMgY28gZG5zc2VjIGdvdiBpIGlkIG5ldCBvcmcgc2NoICcsXG4gICAgICAnaXQnOicgZWR1IGdvdiAnLFxuICAgICAgJ2plJzonIGNvIG5ldCBvcmcgJyxcbiAgICAgICdqbyc6JyBjb20gZWR1IGdvdiBtaWwgbmFtZSBuZXQgb3JnIHNjaCAnLFxuICAgICAgJ2pwJzonIGFjIGFkIGNvIGVkIGdvIGdyIGxnIG5lIG9yICcsXG4gICAgICAna2UnOicgYWMgY28gZ28gaW5mbyBtZSBtb2JpIG5lIG9yIHNjICcsXG4gICAgICAna2gnOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgcGVyICcsXG4gICAgICAna2knOicgYml6IGNvbSBkZSBlZHUgZ292IGluZm8gbW9iIG5ldCBvcmcgdGVsICcsXG4gICAgICAna20nOicgYXNzbyBjb20gY29vcCBlZHUgZ291diBrIG1lZGVjaW4gbWlsIG5vbSBub3RhaXJlcyBwaGFybWFjaWVucyBwcmVzc2UgdG0gdmV0ZXJpbmFpcmUgJyxcbiAgICAgICdrbic6JyBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdrcic6JyBhYyBidXNhbiBjaHVuZ2J1ayBjaHVuZ25hbSBjbyBkYWVndSBkYWVqZW9uIGVzIGdhbmd3b24gZ28gZ3dhbmdqdSBneWVvbmdidWsgZ3llb25nZ2kgZ3llb25nbmFtIGhzIGluY2hlb24gamVqdSBqZW9uYnVrIGplb25uYW0gayBrZyBtaWwgbXMgbmUgb3IgcGUgcmUgc2Mgc2VvdWwgdWxzYW4gJyxcbiAgICAgICdrdyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAna3knOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2t6JzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsXG4gICAgICAnbGInOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2xrJzonIGFzc24gY29tIGVkdSBnb3YgZ3JwIGhvdGVsIGludCBsdGQgbmV0IG5nbyBvcmcgc2NoIHNvYyB3ZWIgJyxcbiAgICAgICdscic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnbHYnOicgYXNuIGNvbSBjb25mIGVkdSBnb3YgaWQgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdseSc6JyBjb20gZWR1IGdvdiBpZCBtZWQgbmV0IG9yZyBwbGMgc2NoICcsXG4gICAgICAnbWEnOicgYWMgY28gZ292IG0gbmV0IG9yZyBwcmVzcyAnLFxuICAgICAgJ21jJzonIGFzc28gdG0gJyxcbiAgICAgICdtZSc6JyBhYyBjbyBlZHUgZ292IGl0cyBuZXQgb3JnIHByaXYgJyxcbiAgICAgICdtZyc6JyBjb20gZWR1IGdvdiBtaWwgbm9tIG9yZyBwcmQgdG0gJyxcbiAgICAgICdtayc6JyBjb20gZWR1IGdvdiBpbmYgbmFtZSBuZXQgb3JnIHBybyAnLFxuICAgICAgJ21sJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgcHJlc3NlICcsXG4gICAgICAnbW4nOicgZWR1IGdvdiBvcmcgJyxcbiAgICAgICdtbyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnbXQnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ212JzonIGFlcm8gYml6IGNvbSBjb29wIGVkdSBnb3YgaW5mbyBpbnQgbWlsIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvICcsXG4gICAgICAnbXcnOicgYWMgY28gY29tIGNvb3AgZWR1IGdvdiBpbnQgbXVzZXVtIG5ldCBvcmcgJyxcbiAgICAgICdteCc6JyBjb20gZWR1IGdvYiBuZXQgb3JnICcsXG4gICAgICAnbXknOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJyxcbiAgICAgICduZic6JyBhcnRzIGNvbSBmaXJtIGluZm8gbmV0IG90aGVyIHBlciByZWMgc3RvcmUgd2ViICcsXG4gICAgICAnbmcnOicgYml6IGNvbSBlZHUgZ292IG1pbCBtb2JpIG5hbWUgbmV0IG9yZyBzY2ggJyxcbiAgICAgICduaSc6JyBhYyBjbyBjb20gZWR1IGdvYiBtaWwgbmV0IG5vbSBvcmcgJyxcbiAgICAgICducCc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLFxuICAgICAgJ25yJzonIGJpeiBjb20gZWR1IGdvdiBpbmZvIG5ldCBvcmcgJyxcbiAgICAgICdvbSc6JyBhYyBiaXogY28gY29tIGVkdSBnb3YgbWVkIG1pbCBtdXNldW0gbmV0IG9yZyBwcm8gc2NoICcsXG4gICAgICAncGUnOicgY29tIGVkdSBnb2IgbWlsIG5ldCBub20gb3JnIHNsZCAnLFxuICAgICAgJ3BoJzonIGNvbSBlZHUgZ292IGkgbWlsIG5ldCBuZ28gb3JnICcsXG4gICAgICAncGsnOicgYml6IGNvbSBlZHUgZmFtIGdvYiBnb2sgZ29uIGdvcCBnb3MgZ292IG5ldCBvcmcgd2ViICcsXG4gICAgICAncGwnOicgYXJ0IGJpYWx5c3RvayBiaXogY29tIGVkdSBnZGEgZ2RhbnNrIGdvcnpvdyBnb3YgaW5mbyBrYXRvd2ljZSBrcmFrb3cgbG9keiBsdWJsaW4gbWlsIG5ldCBuZ28gb2xzenR5biBvcmcgcG96bmFuIHB3ciByYWRvbSBzbHVwc2sgc3pjemVjaW4gdG9ydW4gd2Fyc3phd2Egd2F3IHdyb2Mgd3JvY2xhdyB6Z29yYSAnLFxuICAgICAgJ3ByJzonIGFjIGJpeiBjb20gZWR1IGVzdCBnb3YgaW5mbyBpc2xhIG5hbWUgbmV0IG9yZyBwcm8gcHJvZiAnLFxuICAgICAgJ3BzJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgcGxvIHNlYyAnLFxuICAgICAgJ3B3JzonIGJlbGF1IGNvIGVkIGdvIG5lIG9yICcsXG4gICAgICAncm8nOicgYXJ0cyBjb20gZmlybSBpbmZvIG5vbSBudCBvcmcgcmVjIHN0b3JlIHRtIHd3dyAnLFxuICAgICAgJ3JzJzonIGFjIGNvIGVkdSBnb3YgaW4gb3JnICcsXG4gICAgICAnc2InOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ3NjJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdzaCc6JyBjbyBjb20gZWR1IGdvdiBuZXQgbm9tIG9yZyAnLFxuICAgICAgJ3NsJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdzdCc6JyBjbyBjb20gY29uc3VsYWRvIGVkdSBlbWJhaXhhZGEgZ292IG1pbCBuZXQgb3JnIHByaW5jaXBlIHNhb3RvbWUgc3RvcmUgJyxcbiAgICAgICdzdic6JyBjb20gZWR1IGdvYiBvcmcgcmVkICcsXG4gICAgICAnc3onOicgYWMgY28gb3JnICcsXG4gICAgICAndHInOicgYXYgYmJzIGJlbCBiaXogY29tIGRyIGVkdSBnZW4gZ292IGluZm8gazEyIG5hbWUgbmV0IG9yZyBwb2wgdGVsIHRzayB0diB3ZWIgJyxcbiAgICAgICd0dCc6JyBhZXJvIGJpeiBjYXQgY28gY29tIGNvb3AgZWR1IGdvdiBpbmZvIGludCBqb2JzIG1pbCBtb2JpIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvIHRlbCB0cmF2ZWwgJyxcbiAgICAgICd0dyc6JyBjbHViIGNvbSBlYml6IGVkdSBnYW1lIGdvdiBpZHYgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdtdSc6JyBhYyBjbyBjb20gZ292IG5ldCBvciBvcmcgJyxcbiAgICAgICdteic6JyBhYyBjbyBlZHUgZ292IG9yZyAnLFxuICAgICAgJ25hJzonIGNvIGNvbSAnLFxuICAgICAgJ256JzonIGFjIGNvIGNyaSBnZWVrIGdlbiBnb3Z0IGhlYWx0aCBpd2kgbWFvcmkgbWlsIG5ldCBvcmcgcGFybGlhbWVudCBzY2hvb2wgJyxcbiAgICAgICdwYSc6JyBhYm8gYWMgY29tIGVkdSBnb2IgaW5nIG1lZCBuZXQgbm9tIG9yZyBzbGQgJyxcbiAgICAgICdwdCc6JyBjb20gZWR1IGdvdiBpbnQgbmV0IG5vbWUgb3JnIHB1YmwgJyxcbiAgICAgICdweSc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLFxuICAgICAgJ3FhJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsXG4gICAgICAncmUnOicgYXNzbyBjb20gbm9tICcsXG4gICAgICAncnUnOicgYWMgYWR5Z2V5YSBhbHRhaSBhbXVyIGFya2hhbmdlbHNrIGFzdHJha2hhbiBiYXNoa2lyaWEgYmVsZ29yb2QgYmlyIGJyeWFuc2sgYnVyeWF0aWEgY2JnIGNoZWwgY2hlbHlhYmluc2sgY2hpdGEgY2h1a290a2EgY2h1dmFzaGlhIGNvbSBkYWdlc3RhbiBlLWJ1cmcgZWR1IGdvdiBncm96bnkgaW50IGlya3V0c2sgaXZhbm92byBpemhldnNrIGphciBqb3Noa2FyLW9sYSBrYWxteWtpYSBrYWx1Z2Ega2FtY2hhdGthIGthcmVsaWEga2F6YW4ga2NociBrZW1lcm92byBraGFiYXJvdnNrIGtoYWthc3NpYSBraHYga2lyb3Yga29lbmlnIGtvbWkga29zdHJvbWEga3Jhbm95YXJzayBrdWJhbiBrdXJnYW4ga3Vyc2sgbGlwZXRzayBtYWdhZGFuIG1hcmkgbWFyaS1lbCBtYXJpbmUgbWlsIG1vcmRvdmlhIG1vc3JlZyBtc2sgbXVybWFuc2sgbmFsY2hpayBuZXQgbm5vdiBub3Ygbm92b3NpYmlyc2sgbnNrIG9tc2sgb3JlbmJ1cmcgb3JnIG9yeW9sIHBlbnphIHBlcm0gcHAgcHNrb3YgcHR6IHJuZCByeWF6YW4gc2FraGFsaW4gc2FtYXJhIHNhcmF0b3Ygc2ltYmlyc2sgc21vbGVuc2sgc3BiIHN0YXZyb3BvbCBzdHYgc3VyZ3V0IHRhbWJvdiB0YXRhcnN0YW4gdG9tIHRvbXNrIHRzYXJpdHN5biB0c2sgdHVsYSB0dXZhIHR2ZXIgdHl1bWVuIHVkbSB1ZG11cnRpYSB1bGFuLXVkZSB2bGFkaWthdmtheiB2bGFkaW1pciB2bGFkaXZvc3RvayB2b2xnb2dyYWQgdm9sb2dkYSB2b3JvbmV6aCB2cm4gdnlhdGthIHlha3V0aWEgeWFtYWwgeWVrYXRlcmluYnVyZyB5dXpobm8tc2FraGFsaW5zayAnLFxuICAgICAgJ3J3JzonIGFjIGNvIGNvbSBlZHUgZ291diBnb3YgaW50IG1pbCBuZXQgJyxcbiAgICAgICdzYSc6JyBjb20gZWR1IGdvdiBtZWQgbmV0IG9yZyBwdWIgc2NoICcsXG4gICAgICAnc2QnOicgY29tIGVkdSBnb3YgaW5mbyBtZWQgbmV0IG9yZyB0diAnLFxuICAgICAgJ3NlJzonIGEgYWMgYiBiZCBjIGQgZSBmIGcgaCBpIGsgbCBtIG4gbyBvcmcgcCBwYXJ0aSBwcCBwcmVzcyByIHMgdCB0bSB1IHcgeCB5IHogJyxcbiAgICAgICdzZyc6JyBjb20gZWR1IGdvdiBpZG4gbmV0IG9yZyBwZXIgJyxcbiAgICAgICdzbic6JyBhcnQgY29tIGVkdSBnb3V2IG9yZyBwZXJzbyB1bml2ICcsXG4gICAgICAnc3knOicgY29tIGVkdSBnb3YgbWlsIG5ldCBuZXdzIG9yZyAnLFxuICAgICAgJ3RoJzonIGFjIGNvIGdvIGluIG1pIG5ldCBvciAnLFxuICAgICAgJ3RqJzonIGFjIGJpeiBjbyBjb20gZWR1IGdvIGdvdiBpbmZvIGludCBtaWwgbmFtZSBuZXQgbmljIG9yZyB0ZXN0IHdlYiAnLFxuICAgICAgJ3RuJzonIGFncmluZXQgY29tIGRlZmVuc2UgZWR1bmV0IGVucyBmaW4gZ292IGluZCBpbmZvIGludGwgbWluY29tIG5hdCBuZXQgb3JnIHBlcnNvIHJucnQgcm5zIHJudSB0b3VyaXNtICcsXG4gICAgICAndHonOicgYWMgY28gZ28gbmUgb3IgJyxcbiAgICAgICd1YSc6JyBiaXogY2hlcmthc3N5IGNoZXJuaWdvdiBjaGVybm92dHN5IGNrIGNuIGNvIGNvbSBjcmltZWEgY3YgZG4gZG5lcHJvcGV0cm92c2sgZG9uZXRzayBkcCBlZHUgZ292IGlmIGluIGl2YW5vLWZyYW5raXZzayBraCBraGFya292IGtoZXJzb24ga2htZWxuaXRza2l5IGtpZXYga2lyb3ZvZ3JhZCBrbSBrciBrcyBrdiBsZyBsdWdhbnNrIGx1dHNrIGx2aXYgbWUgbWsgbmV0IG5pa29sYWV2IG9kIG9kZXNzYSBvcmcgcGwgcG9sdGF2YSBwcCByb3ZubyBydiBzZWJhc3RvcG9sIHN1bXkgdGUgdGVybm9waWwgdXpoZ29yb2QgdmlubmljYSB2biB6YXBvcml6aHpoZSB6aGl0b21pciB6cCB6dCAnLFxuICAgICAgJ3VnJzonIGFjIGNvIGdvIG5lIG9yIG9yZyBzYyAnLFxuICAgICAgJ3VrJzonIGFjIGJsIGJyaXRpc2gtbGlicmFyeSBjbyBjeW0gZ292IGdvdnQgaWNuZXQgamV0IGxlYSBsdGQgbWUgbWlsIG1vZCBuYXRpb25hbC1saWJyYXJ5LXNjb3RsYW5kIG5lbCBuZXQgbmhzIG5pYyBubHMgb3JnIG9yZ24gcGFybGlhbWVudCBwbGMgcG9saWNlIHNjaCBzY290IHNvYyAnLFxuICAgICAgJ3VzJzonIGRuaSBmZWQgaXNhIGtpZHMgbnNuICcsXG4gICAgICAndXknOicgY29tIGVkdSBndWIgbWlsIG5ldCBvcmcgJyxcbiAgICAgICd2ZSc6JyBjbyBjb20gZWR1IGdvYiBpbmZvIG1pbCBuZXQgb3JnIHdlYiAnLFxuICAgICAgJ3ZpJzonIGNvIGNvbSBrMTIgbmV0IG9yZyAnLFxuICAgICAgJ3ZuJzonIGFjIGJpeiBjb20gZWR1IGdvdiBoZWFsdGggaW5mbyBpbnQgbmFtZSBuZXQgb3JnIHBybyAnLFxuICAgICAgJ3llJzonIGNvIGNvbSBnb3YgbHRkIG1lIG5ldCBvcmcgcGxjICcsXG4gICAgICAneXUnOicgYWMgY28gZWR1IGdvdiBvcmcgJyxcbiAgICAgICd6YSc6JyBhYyBhZ3JpYyBhbHQgYm91cnNlIGNpdHkgY28gY3liZXJuZXQgZGIgZWR1IGdvdiBncm9uZGFyIGlhY2Nlc3MgaW10IGluY2EgbGFuZGVzaWduIGxhdyBtaWwgbmV0IG5nbyBuaXMgbm9tIG9saXZldHRpIG9yZyBwaXggc2Nob29sIHRtIHdlYiAnLFxuICAgICAgJ3ptJzonIGFjIGNvIGNvbSBlZHUgZ292IG5ldCBvcmcgc2NoICcsXG4gICAgICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DZW50cmFsTmljI1NlY29uZC1sZXZlbF9kb21haW5zXG4gICAgICAnY29tJzogJ2FyIGJyIGNuIGRlIGV1IGdiIGdyIGh1IGpwbiBrciBubyBxYyBydSBzYSBzZSB1ayB1cyB1eSB6YSAnLFxuICAgICAgJ25ldCc6ICdnYiBqcCBzZSB1ayAnLFxuICAgICAgJ29yZyc6ICdhZScsXG4gICAgICAnZGUnOiAnY29tICdcbiAgICB9LFxuICAgIC8vIGdvcmhpbGwgMjAxMy0xMC0yNTogVXNpbmcgaW5kZXhPZigpIGluc3RlYWQgUmVnZXhwKCkuIFNpZ25pZmljYW50IGJvb3N0XG4gICAgLy8gaW4gYm90aCBwZXJmb3JtYW5jZSBhbmQgbWVtb3J5IGZvb3RwcmludC4gTm8gaW5pdGlhbGl6YXRpb24gcmVxdWlyZWQuXG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vdXJpLWpzLXNsZC1yZWdleC12cy1iaW5hcnktc2VhcmNoLzRcbiAgICAvLyBGb2xsb3dpbmcgbWV0aG9kcyB1c2UgbGFzdEluZGV4T2YoKSByYXRoZXIgdGhhbiBhcnJheS5zcGxpdCgpIGluIG9yZGVyXG4gICAgLy8gdG8gYXZvaWQgYW55IG1lbW9yeSBhbGxvY2F0aW9ucy5cbiAgICBoYXM6IGZ1bmN0aW9uKGRvbWFpbikge1xuICAgICAgdmFyIHRsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicpO1xuICAgICAgaWYgKHRsZE9mZnNldCA8PSAwIHx8IHRsZE9mZnNldCA+PSAoZG9tYWluLmxlbmd0aC0xKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgc2xkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJywgdGxkT2Zmc2V0LTEpO1xuICAgICAgaWYgKHNsZE9mZnNldCA8PSAwIHx8IHNsZE9mZnNldCA+PSAodGxkT2Zmc2V0LTEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07XG4gICAgICBpZiAoIXNsZExpc3QpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNsZExpc3QuaW5kZXhPZignICcgKyBkb21haW4uc2xpY2Uoc2xkT2Zmc2V0KzEsIHRsZE9mZnNldCkgKyAnICcpID49IDA7XG4gICAgfSxcbiAgICBpczogZnVuY3Rpb24oZG9tYWluKSB7XG4gICAgICB2YXIgdGxkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICBpZiAodGxkT2Zmc2V0IDw9IDAgfHwgdGxkT2Zmc2V0ID49IChkb21haW4ubGVuZ3RoLTEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7XG4gICAgICBpZiAoc2xkT2Zmc2V0ID49IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHNsZExpc3QgPSBTTEQubGlzdFtkb21haW4uc2xpY2UodGxkT2Zmc2V0KzEpXTtcbiAgICAgIGlmICghc2xkTGlzdCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2xkTGlzdC5pbmRleE9mKCcgJyArIGRvbWFpbi5zbGljZSgwLCB0bGRPZmZzZXQpICsgJyAnKSA+PSAwO1xuICAgIH0sXG4gICAgZ2V0OiBmdW5jdGlvbihkb21haW4pIHtcbiAgICAgIHZhciB0bGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nKTtcbiAgICAgIGlmICh0bGRPZmZzZXQgPD0gMCB8fCB0bGRPZmZzZXQgPj0gKGRvbWFpbi5sZW5ndGgtMSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICB2YXIgc2xkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJywgdGxkT2Zmc2V0LTEpO1xuICAgICAgaWYgKHNsZE9mZnNldCA8PSAwIHx8IHNsZE9mZnNldCA+PSAodGxkT2Zmc2V0LTEpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdmFyIHNsZExpc3QgPSBTTEQubGlzdFtkb21haW4uc2xpY2UodGxkT2Zmc2V0KzEpXTtcbiAgICAgIGlmICghc2xkTGlzdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChzbGRMaXN0LmluZGV4T2YoJyAnICsgZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxLCB0bGRPZmZzZXQpICsgJyAnKSA8IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxKTtcbiAgICB9LFxuICAgIG5vQ29uZmxpY3Q6IGZ1bmN0aW9uKCl7XG4gICAgICBpZiAocm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPT09IHRoaXMpIHtcbiAgICAgICAgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPSBfU2Vjb25kTGV2ZWxEb21haW5zO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBTTEQ7XG59KSk7XG4iLCIvKiFcbiAqIFVSSS5qcyAtIE11dGF0aW5nIFVSTHNcbiAqXG4gKiBWZXJzaW9uOiAxLjE5LjBcbiAqXG4gKiBBdXRob3I6IFJvZG5leSBSZWhtXG4gKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy9cbiAqXG4gKiBMaWNlbnNlZCB1bmRlclxuICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKlxuICovXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanNcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgLy8gTm9kZVxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCcuL3B1bnljb2RlJyksIHJlcXVpcmUoJy4vSVB2NicpLCByZXF1aXJlKCcuL1NlY29uZExldmVsRG9tYWlucycpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgZGVmaW5lKFsnLi9wdW55Y29kZScsICcuL0lQdjYnLCAnLi9TZWNvbmRMZXZlbERvbWFpbnMnXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICByb290LlVSSSA9IGZhY3Rvcnkocm9vdC5wdW55Y29kZSwgcm9vdC5JUHY2LCByb290LlNlY29uZExldmVsRG9tYWlucywgcm9vdCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKHB1bnljb2RlLCBJUHY2LCBTTEQsIHJvb3QpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKmdsb2JhbCBsb2NhdGlvbiwgZXNjYXBlLCB1bmVzY2FwZSAqL1xuICAvLyBGSVhNRTogdjIuMC4wIHJlbmFtY2Ugbm9uLWNhbWVsQ2FzZSBwcm9wZXJ0aWVzIHRvIHVwcGVyY2FzZVxuICAvKmpzaGludCBjYW1lbGNhc2U6IGZhbHNlICovXG5cbiAgLy8gc2F2ZSBjdXJyZW50IFVSSSB2YXJpYWJsZSwgaWYgYW55XG4gIHZhciBfVVJJID0gcm9vdCAmJiByb290LlVSSTtcblxuICBmdW5jdGlvbiBVUkkodXJsLCBiYXNlKSB7XG4gICAgdmFyIF91cmxTdXBwbGllZCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMTtcbiAgICB2YXIgX2Jhc2VTdXBwbGllZCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMjtcblxuICAgIC8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZFxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBVUkkpKSB7XG4gICAgICBpZiAoX3VybFN1cHBsaWVkKSB7XG4gICAgICAgIGlmIChfYmFzZVN1cHBsaWVkKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVUkkodXJsLCBiYXNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgVVJJKHVybCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgVVJJKCk7XG4gICAgfVxuXG4gICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoX3VybFN1cHBsaWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3VuZGVmaW5lZCBpcyBub3QgYSB2YWxpZCBhcmd1bWVudCBmb3IgVVJJJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYgKyAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVybCA9ICcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1cmwgPT09IG51bGwpIHtcbiAgICAgIGlmIChfdXJsU3VwcGxpZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbnVsbCBpcyBub3QgYSB2YWxpZCBhcmd1bWVudCBmb3IgVVJJJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5ocmVmKHVybCk7XG5cbiAgICAvLyByZXNvbHZlIHRvIGJhc2UgYWNjb3JkaW5nIHRvIGh0dHA6Ly9kdmNzLnczLm9yZy9oZy91cmwvcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWwjY29uc3RydWN0b3JcbiAgICBpZiAoYmFzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hYnNvbHV0ZVRvKGJhc2UpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7XG4gICAgcmV0dXJuIC9eWzAtOV0rJC8udGVzdCh2YWx1ZSk7XG4gIH1cblxuICBVUkkudmVyc2lvbiA9ICcxLjE5LjAnO1xuXG4gIHZhciBwID0gVVJJLnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbiAgZnVuY3Rpb24gZXNjYXBlUmVnRXgoc3RyaW5nKSB7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvY29tbWl0Lzg1YWMyMTc4M2MxMWY4Y2NhYjA2MTA2ZGJhOTczNWEzMWE4NjkyNGQjY29tbWl0Y29tbWVudC04MjE5NjNcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFR5cGUodmFsdWUpIHtcbiAgICAvLyBJRTggZG9lc24ndCByZXR1cm4gW09iamVjdCBVbmRlZmluZWRdIGJ1dCBbT2JqZWN0IE9iamVjdF0gZm9yIHVuZGVmaW5lZCB2YWx1ZVxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gJ1VuZGVmaW5lZCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIFN0cmluZyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpKS5zbGljZSg4LCAtMSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0FycmF5KG9iaikge1xuICAgIHJldHVybiBnZXRUeXBlKG9iaikgPT09ICdBcnJheSc7XG4gIH1cblxuICBmdW5jdGlvbiBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhLCB2YWx1ZSkge1xuICAgIHZhciBsb29rdXAgPSB7fTtcbiAgICB2YXIgaSwgbGVuZ3RoO1xuXG4gICAgaWYgKGdldFR5cGUodmFsdWUpID09PSAnUmVnRXhwJykge1xuICAgICAgbG9va3VwID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBsb29rdXBbdmFsdWVbaV1dID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9va3VwW3ZhbHVlXSA9IHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZGF0YS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IHRydWUgKi9cbiAgICAgIHZhciBfbWF0Y2ggPSBsb29rdXAgJiYgbG9va3VwW2RhdGFbaV1dICE9PSB1bmRlZmluZWRcbiAgICAgICAgfHwgIWxvb2t1cCAmJiB2YWx1ZS50ZXN0KGRhdGFbaV0pO1xuICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IGZhbHNlICovXG4gICAgICBpZiAoX21hdGNoKSB7XG4gICAgICAgIGRhdGEuc3BsaWNlKGksIDEpO1xuICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlDb250YWlucyhsaXN0LCB2YWx1ZSkge1xuICAgIHZhciBpLCBsZW5ndGg7XG5cbiAgICAvLyB2YWx1ZSBtYXkgYmUgc3RyaW5nLCBudW1iZXIsIGFycmF5LCByZWdleHBcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGJlIG9wdGltaXplZCB0byBPKG4pIChpbnN0ZWFkIG9mIGN1cnJlbnQgTyhtICogbikpXG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWFycmF5Q29udGFpbnMobGlzdCwgdmFsdWVbaV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBfdHlwZSA9IGdldFR5cGUodmFsdWUpO1xuICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChfdHlwZSA9PT0gJ1JlZ0V4cCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0W2ldID09PSAnc3RyaW5nJyAmJiBsaXN0W2ldLm1hdGNoKHZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGxpc3RbaV0gPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFycmF5c0VxdWFsKG9uZSwgdHdvKSB7XG4gICAgaWYgKCFpc0FycmF5KG9uZSkgfHwgIWlzQXJyYXkodHdvKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGFycmF5cyBjYW4ndCBiZSBlcXVhbCBpZiB0aGV5IGhhdmUgZGlmZmVyZW50IGFtb3VudCBvZiBjb250ZW50XG4gICAgaWYgKG9uZS5sZW5ndGggIT09IHR3by5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBvbmUuc29ydCgpO1xuICAgIHR3by5zb3J0KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9uZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmIChvbmVbaV0gIT09IHR3b1tpXSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiB0cmltU2xhc2hlcyh0ZXh0KSB7XG4gICAgdmFyIHRyaW1fZXhwcmVzc2lvbiA9IC9eXFwvK3xcXC8rJC9nO1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UodHJpbV9leHByZXNzaW9uLCAnJyk7XG4gIH1cblxuICBVUkkuX3BhcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3RvY29sOiBudWxsLFxuICAgICAgdXNlcm5hbWU6IG51bGwsXG4gICAgICBwYXNzd29yZDogbnVsbCxcbiAgICAgIGhvc3RuYW1lOiBudWxsLFxuICAgICAgdXJuOiBudWxsLFxuICAgICAgcG9ydDogbnVsbCxcbiAgICAgIHBhdGg6IG51bGwsXG4gICAgICBxdWVyeTogbnVsbCxcbiAgICAgIGZyYWdtZW50OiBudWxsLFxuICAgICAgLy8gc3RhdGVcbiAgICAgIHByZXZlbnRJbnZhbGlkSG9zdG5hbWU6IFVSSS5wcmV2ZW50SW52YWxpZEhvc3RuYW1lLFxuICAgICAgZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzOiBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgZXNjYXBlUXVlcnlTcGFjZTogVVJJLmVzY2FwZVF1ZXJ5U3BhY2VcbiAgICB9O1xuICB9O1xuICAvLyBzdGF0ZTogdGhyb3cgb24gaW52YWxpZCBob3N0bmFtZVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvcHVsbC8zNDVcbiAgLy8gYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy8zNTRcbiAgVVJJLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUgPSBmYWxzZTtcbiAgLy8gc3RhdGU6IGFsbG93IGR1cGxpY2F0ZSBxdWVyeSBwYXJhbWV0ZXJzIChhPTEmYT0xKVxuICBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzID0gZmFsc2U7XG4gIC8vIHN0YXRlOiByZXBsYWNlcyArIHdpdGggJTIwIChzcGFjZSBpbiBxdWVyeSBzdHJpbmdzKVxuICBVUkkuZXNjYXBlUXVlcnlTcGFjZSA9IHRydWU7XG4gIC8vIHN0YXRpYyBwcm9wZXJ0aWVzXG4gIFVSSS5wcm90b2NvbF9leHByZXNzaW9uID0gL15bYS16XVthLXowLTkuKy1dKiQvaTtcbiAgVVJJLmlkbl9leHByZXNzaW9uID0gL1teYS16MC05XFwuXy1dL2k7XG4gIFVSSS5wdW55Y29kZV9leHByZXNzaW9uID0gLyh4bi0tKS9pO1xuICAvLyB3ZWxsLCAzMzMuNDQ0LjU1NS42NjYgbWF0Y2hlcywgYnV0IGl0IHN1cmUgYWluJ3Qgbm8gSVB2NCAtIGRvIHdlIGNhcmU/XG4gIFVSSS5pcDRfZXhwcmVzc2lvbiA9IC9eXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM30kLztcbiAgLy8gY3JlZGl0cyB0byBSaWNoIEJyb3duXG4gIC8vIHNvdXJjZTogaHR0cDovL2ZvcnVtcy5pbnRlcm1hcHBlci5jb20vdmlld3RvcGljLnBocD9wPTEwOTYjMTA5NlxuICAvLyBzcGVjaWZpY2F0aW9uOiBodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmM0MjkxLnR4dFxuICBVUkkuaXA2X2V4cHJlc3Npb24gPSAvXlxccyooKChbMC05QS1GYS1mXXsxLDR9Oil7N30oWzAtOUEtRmEtZl17MSw0fXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Nn0oOlswLTlBLUZhLWZdezEsNH18KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs1fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDJ9KXw6KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs0fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDN9KXwoKDpbMC05QS1GYS1mXXsxLDR9KT86KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7M30oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw0fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwyfTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsyfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDV9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDN9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezF9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNn0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNH06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KDooKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw3fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw1fTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKSkoJS4rKT9cXHMqJC87XG4gIC8vIGV4cHJlc3Npb24gdXNlZCBpcyBcImdydWJlciByZXZpc2VkXCIgKEBncnViZXIgdjIpIGRldGVybWluZWQgdG8gYmUgdGhlXG4gIC8vIGJlc3Qgc29sdXRpb24gaW4gYSByZWdleC1nb2xmIHdlIGRpZCBhIGNvdXBsZSBvZiBhZ2VzIGFnbyBhdFxuICAvLyAqIGh0dHA6Ly9tYXRoaWFzYnluZW5zLmJlL2RlbW8vdXJsLXJlZ2V4XG4gIC8vICogaHR0cDovL3JvZG5leXJlaG0uZGUvdC91cmwtcmVnZXguaHRtbFxuICBVUkkuZmluZF91cmlfZXhwcmVzc2lvbiA9IC9cXGIoKD86W2Etel1bXFx3LV0rOig/OlxcL3sxLDN9fFthLXowLTklXSl8d3d3XFxkezAsM31bLl18W2EtejAtOS5cXC1dK1suXVthLXpdezIsNH1cXC8pKD86W15cXHMoKTw+XSt8XFwoKFteXFxzKCk8Pl0rfChcXChbXlxccygpPD5dK1xcKSkpKlxcKSkrKD86XFwoKFteXFxzKCk8Pl0rfChcXChbXlxccygpPD5dK1xcKSkpKlxcKXxbXlxcc2AhKClcXFtcXF17fTs6J1wiLiw8Pj/Cq8K74oCc4oCd4oCY4oCZXSkpL2lnO1xuICBVUkkuZmluZFVyaSA9IHtcbiAgICAvLyB2YWxpZCBcInNjaGVtZTovL1wiIG9yIFwid3d3LlwiXG4gICAgc3RhcnQ6IC9cXGIoPzooW2Etel1bYS16MC05ListXSo6XFwvXFwvKXx3d3dcXC4pL2dpLFxuICAgIC8vIGV2ZXJ5dGhpbmcgdXAgdG8gdGhlIG5leHQgd2hpdGVzcGFjZVxuICAgIGVuZDogL1tcXHNcXHJcXG5dfCQvLFxuICAgIC8vIHRyaW0gdHJhaWxpbmcgcHVuY3R1YXRpb24gY2FwdHVyZWQgYnkgZW5kIFJlZ0V4cFxuICAgIHRyaW06IC9bYCEoKVxcW1xcXXt9OzonXCIuLDw+P8KrwrvigJzigJ3igJ7igJjigJldKyQvLFxuICAgIC8vIGJhbGFuY2VkIHBhcmVucyBpbmNsdXNpb24gKCksIFtdLCB7fSwgPD5cbiAgICBwYXJlbnM6IC8oXFwoW15cXCldKlxcKXxcXFtbXlxcXV0qXFxdfFxce1tefV0qXFx9fDxbXj5dKj4pL2csXG4gIH07XG4gIC8vIGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvdXJpLXNjaGVtZXMuaHRtbFxuICAvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfVENQX2FuZF9VRFBfcG9ydF9udW1iZXJzI1dlbGwta25vd25fcG9ydHNcbiAgVVJJLmRlZmF1bHRQb3J0cyA9IHtcbiAgICBodHRwOiAnODAnLFxuICAgIGh0dHBzOiAnNDQzJyxcbiAgICBmdHA6ICcyMScsXG4gICAgZ29waGVyOiAnNzAnLFxuICAgIHdzOiAnODAnLFxuICAgIHdzczogJzQ0MydcbiAgfTtcbiAgLy8gbGlzdCBvZiBwcm90b2NvbHMgd2hpY2ggYWx3YXlzIHJlcXVpcmUgYSBob3N0bmFtZVxuICBVUkkuaG9zdFByb3RvY29scyA9IFtcbiAgICAnaHR0cCcsXG4gICAgJ2h0dHBzJ1xuICBdO1xuXG4gIC8vIGFsbG93ZWQgaG9zdG5hbWUgY2hhcmFjdGVycyBhY2NvcmRpbmcgdG8gUkZDIDM5ODZcbiAgLy8gQUxQSEEgRElHSVQgXCItXCIgXCIuXCIgXCJfXCIgXCJ+XCIgXCIhXCIgXCIkXCIgXCImXCIgXCInXCIgXCIoXCIgXCIpXCIgXCIqXCIgXCIrXCIgXCIsXCIgXCI7XCIgXCI9XCIgJWVuY29kZWRcbiAgLy8gSSd2ZSBuZXZlciBzZWVuIGEgKG5vbi1JRE4pIGhvc3RuYW1lIG90aGVyIHRoYW46IEFMUEhBIERJR0lUIC4gLSBfXG4gIFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMgPSAvW15hLXpBLVowLTlcXC5cXC06X10vO1xuICAvLyBtYXAgRE9NIEVsZW1lbnRzIHRvIHRoZWlyIFVSSSBhdHRyaWJ1dGVcbiAgVVJJLmRvbUF0dHJpYnV0ZXMgPSB7XG4gICAgJ2EnOiAnaHJlZicsXG4gICAgJ2Jsb2NrcXVvdGUnOiAnY2l0ZScsXG4gICAgJ2xpbmsnOiAnaHJlZicsXG4gICAgJ2Jhc2UnOiAnaHJlZicsXG4gICAgJ3NjcmlwdCc6ICdzcmMnLFxuICAgICdmb3JtJzogJ2FjdGlvbicsXG4gICAgJ2ltZyc6ICdzcmMnLFxuICAgICdhcmVhJzogJ2hyZWYnLFxuICAgICdpZnJhbWUnOiAnc3JjJyxcbiAgICAnZW1iZWQnOiAnc3JjJyxcbiAgICAnc291cmNlJzogJ3NyYycsXG4gICAgJ3RyYWNrJzogJ3NyYycsXG4gICAgJ2lucHV0JzogJ3NyYycsIC8vIGJ1dCBvbmx5IGlmIHR5cGU9XCJpbWFnZVwiXG4gICAgJ2F1ZGlvJzogJ3NyYycsXG4gICAgJ3ZpZGVvJzogJ3NyYydcbiAgfTtcbiAgVVJJLmdldERvbUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICBpZiAoIW5vZGUgfHwgIW5vZGUubm9kZU5hbWUpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIG5vZGVOYW1lID0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIDxpbnB1dD4gc2hvdWxkIG9ubHkgZXhwb3NlIHNyYyBmb3IgdHlwZT1cImltYWdlXCJcbiAgICBpZiAobm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgbm9kZS50eXBlICE9PSAnaW1hZ2UnKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBVUkkuZG9tQXR0cmlidXRlc1tub2RlTmFtZV07XG4gIH07XG5cbiAgZnVuY3Rpb24gZXNjYXBlRm9yRHVtYkZpcmVmb3gzNih2YWx1ZSkge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MVxuICAgIHJldHVybiBlc2NhcGUodmFsdWUpO1xuICB9XG5cbiAgLy8gZW5jb2RpbmcgLyBkZWNvZGluZyBhY2NvcmRpbmcgdG8gUkZDMzk4NlxuICBmdW5jdGlvbiBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKSB7XG4gICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvZW5jb2RlVVJJQ29tcG9uZW50XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmcpXG4gICAgICAucmVwbGFjZSgvWyEnKCkqXS9nLCBlc2NhcGVGb3JEdW1iRmlyZWZveDM2KVxuICAgICAgLnJlcGxhY2UoL1xcKi9nLCAnJTJBJyk7XG4gIH1cbiAgVVJJLmVuY29kZSA9IHN0cmljdEVuY29kZVVSSUNvbXBvbmVudDtcbiAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDtcbiAgVVJJLmlzbzg4NTkgPSBmdW5jdGlvbigpIHtcbiAgICBVUkkuZW5jb2RlID0gZXNjYXBlO1xuICAgIFVSSS5kZWNvZGUgPSB1bmVzY2FwZTtcbiAgfTtcbiAgVVJJLnVuaWNvZGUgPSBmdW5jdGlvbigpIHtcbiAgICBVUkkuZW5jb2RlID0gc3RyaWN0RW5jb2RlVVJJQ29tcG9uZW50O1xuICAgIFVSSS5kZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG4gIH07XG4gIFVSSS5jaGFyYWN0ZXJzID0ge1xuICAgIHBhdGhuYW1lOiB7XG4gICAgICBlbmNvZGU6IHtcbiAgICAgICAgLy8gUkZDMzk4NiAyLjE6IEZvciBjb25zaXN0ZW5jeSwgVVJJIHByb2R1Y2VycyBhbmQgbm9ybWFsaXplcnMgc2hvdWxkXG4gICAgICAgIC8vIHVzZSB1cHBlcmNhc2UgaGV4YWRlY2ltYWwgZGlnaXRzIGZvciBhbGwgcGVyY2VudC1lbmNvZGluZ3MuXG4gICAgICAgIGV4cHJlc3Npb246IC8lKDI0fDI2fDJCfDJDfDNCfDNEfDNBfDQwKS9pZyxcbiAgICAgICAgbWFwOiB7XG4gICAgICAgICAgLy8gLS5ffiEnKCkqXG4gICAgICAgICAgJyUyNCc6ICckJyxcbiAgICAgICAgICAnJTI2JzogJyYnLFxuICAgICAgICAgICclMkInOiAnKycsXG4gICAgICAgICAgJyUyQyc6ICcsJyxcbiAgICAgICAgICAnJTNCJzogJzsnLFxuICAgICAgICAgICclM0QnOiAnPScsXG4gICAgICAgICAgJyUzQSc6ICc6JyxcbiAgICAgICAgICAnJTQwJzogJ0AnXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWNvZGU6IHtcbiAgICAgICAgZXhwcmVzc2lvbjogL1tcXC9cXD8jXS9nLFxuICAgICAgICBtYXA6IHtcbiAgICAgICAgICAnLyc6ICclMkYnLFxuICAgICAgICAgICc/JzogJyUzRicsXG4gICAgICAgICAgJyMnOiAnJTIzJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICByZXNlcnZlZDoge1xuICAgICAgZW5jb2RlOiB7XG4gICAgICAgIC8vIFJGQzM5ODYgMi4xOiBGb3IgY29uc2lzdGVuY3ksIFVSSSBwcm9kdWNlcnMgYW5kIG5vcm1hbGl6ZXJzIHNob3VsZFxuICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLlxuICAgICAgICBleHByZXNzaW9uOiAvJSgyMXwyM3wyNHwyNnwyN3wyOHwyOXwyQXwyQnwyQ3wyRnwzQXwzQnwzRHwzRnw0MHw1Qnw1RCkvaWcsXG4gICAgICAgIG1hcDoge1xuICAgICAgICAgIC8vIGdlbi1kZWxpbXNcbiAgICAgICAgICAnJTNBJzogJzonLFxuICAgICAgICAgICclMkYnOiAnLycsXG4gICAgICAgICAgJyUzRic6ICc/JyxcbiAgICAgICAgICAnJTIzJzogJyMnLFxuICAgICAgICAgICclNUInOiAnWycsXG4gICAgICAgICAgJyU1RCc6ICddJyxcbiAgICAgICAgICAnJTQwJzogJ0AnLFxuICAgICAgICAgIC8vIHN1Yi1kZWxpbXNcbiAgICAgICAgICAnJTIxJzogJyEnLFxuICAgICAgICAgICclMjQnOiAnJCcsXG4gICAgICAgICAgJyUyNic6ICcmJyxcbiAgICAgICAgICAnJTI3JzogJ1xcJycsXG4gICAgICAgICAgJyUyOCc6ICcoJyxcbiAgICAgICAgICAnJTI5JzogJyknLFxuICAgICAgICAgICclMkEnOiAnKicsXG4gICAgICAgICAgJyUyQic6ICcrJyxcbiAgICAgICAgICAnJTJDJzogJywnLFxuICAgICAgICAgICclM0InOiAnOycsXG4gICAgICAgICAgJyUzRCc6ICc9J1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB1cm5wYXRoOiB7XG4gICAgICAvLyBUaGUgY2hhcmFjdGVycyB1bmRlciBgZW5jb2RlYCBhcmUgdGhlIGNoYXJhY3RlcnMgY2FsbGVkIG91dCBieSBSRkMgMjE0MSBhcyBiZWluZyBhY2NlcHRhYmxlXG4gICAgICAvLyBmb3IgdXNhZ2UgaW4gYSBVUk4uIFJGQzIxNDEgYWxzbyBjYWxscyBvdXQgXCItXCIsIFwiLlwiLCBhbmQgXCJfXCIgYXMgYWNjZXB0YWJsZSBjaGFyYWN0ZXJzLCBidXRcbiAgICAgIC8vIHRoZXNlIGFyZW4ndCBlbmNvZGVkIGJ5IGVuY29kZVVSSUNvbXBvbmVudCwgc28gd2UgZG9uJ3QgaGF2ZSB0byBjYWxsIHRoZW0gb3V0IGhlcmUuIEFsc29cbiAgICAgIC8vIG5vdGUgdGhhdCB0aGUgY29sb24gY2hhcmFjdGVyIGlzIG5vdCBmZWF0dXJlZCBpbiB0aGUgZW5jb2RpbmcgbWFwOyB0aGlzIGlzIGJlY2F1c2UgVVJJLmpzXG4gICAgICAvLyBnaXZlcyB0aGUgY29sb25zIGluIFVSTnMgc2VtYW50aWMgbWVhbmluZyBhcyB0aGUgZGVsaW1pdGVycyBvZiBwYXRoIHNlZ2VtZW50cywgYW5kIHNvIGl0XG4gICAgICAvLyBzaG91bGQgbm90IGFwcGVhciB1bmVuY29kZWQgaW4gYSBzZWdtZW50IGl0c2VsZi5cbiAgICAgIC8vIFNlZSBhbHNvIHRoZSBub3RlIGFib3ZlIGFib3V0IFJGQzM5ODYgYW5kIGNhcGl0YWxhbGl6ZWQgaGV4IGRpZ2l0cy5cbiAgICAgIGVuY29kZToge1xuICAgICAgICBleHByZXNzaW9uOiAvJSgyMXwyNHwyN3wyOHwyOXwyQXwyQnwyQ3wzQnwzRHw0MCkvaWcsXG4gICAgICAgIG1hcDoge1xuICAgICAgICAgICclMjEnOiAnIScsXG4gICAgICAgICAgJyUyNCc6ICckJyxcbiAgICAgICAgICAnJTI3JzogJ1xcJycsXG4gICAgICAgICAgJyUyOCc6ICcoJyxcbiAgICAgICAgICAnJTI5JzogJyknLFxuICAgICAgICAgICclMkEnOiAnKicsXG4gICAgICAgICAgJyUyQic6ICcrJyxcbiAgICAgICAgICAnJTJDJzogJywnLFxuICAgICAgICAgICclM0InOiAnOycsXG4gICAgICAgICAgJyUzRCc6ICc9JyxcbiAgICAgICAgICAnJTQwJzogJ0AnXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBUaGVzZSBjaGFyYWN0ZXJzIGFyZSB0aGUgY2hhcmFjdGVycyBjYWxsZWQgb3V0IGJ5IFJGQzIxNDEgYXMgXCJyZXNlcnZlZFwiIGNoYXJhY3RlcnMgdGhhdFxuICAgICAgLy8gc2hvdWxkIG5ldmVyIGFwcGVhciBpbiBhIFVSTiwgcGx1cyB0aGUgY29sb24gY2hhcmFjdGVyIChzZWUgbm90ZSBhYm92ZSkuXG4gICAgICBkZWNvZGU6IHtcbiAgICAgICAgZXhwcmVzc2lvbjogL1tcXC9cXD8jOl0vZyxcbiAgICAgICAgbWFwOiB7XG4gICAgICAgICAgJy8nOiAnJTJGJyxcbiAgICAgICAgICAnPyc6ICclM0YnLFxuICAgICAgICAgICcjJzogJyUyMycsXG4gICAgICAgICAgJzonOiAnJTNBJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBVUkkuZW5jb2RlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICB2YXIgZXNjYXBlZCA9IFVSSS5lbmNvZGUoc3RyaW5nICsgJycpO1xuICAgIGlmIChlc2NhcGVRdWVyeVNwYWNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXNjYXBlUXVlcnlTcGFjZSA/IGVzY2FwZWQucmVwbGFjZSgvJTIwL2csICcrJykgOiBlc2NhcGVkO1xuICB9O1xuICBVUkkuZGVjb2RlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICBzdHJpbmcgKz0gJyc7XG4gICAgaWYgKGVzY2FwZVF1ZXJ5U3BhY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXNjYXBlUXVlcnlTcGFjZSA9IFVSSS5lc2NhcGVRdWVyeVNwYWNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gVVJJLmRlY29kZShlc2NhcGVRdWVyeVNwYWNlID8gc3RyaW5nLnJlcGxhY2UoL1xcKy9nLCAnJTIwJykgOiBzdHJpbmcpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgLy8gd2UncmUgbm90IGdvaW5nIHRvIG1lc3Mgd2l0aCB3ZWlyZCBlbmNvZGluZ3MsXG4gICAgICAvLyBnaXZlIHVwIGFuZCByZXR1cm4gdGhlIHVuZGVjb2RlZCBvcmlnaW5hbCBzdHJpbmdcbiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvODdcbiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvOTJcbiAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICB9O1xuICAvLyBnZW5lcmF0ZSBlbmNvZGUvZGVjb2RlIHBhdGggZnVuY3Rpb25zXG4gIHZhciBfcGFydHMgPSB7J2VuY29kZSc6J2VuY29kZScsICdkZWNvZGUnOidkZWNvZGUnfTtcbiAgdmFyIF9wYXJ0O1xuICB2YXIgZ2VuZXJhdGVBY2Nlc3NvciA9IGZ1bmN0aW9uKF9ncm91cCwgX3BhcnQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gVVJJW19wYXJ0XShzdHJpbmcgKyAnJykucmVwbGFjZShVUkkuY2hhcmFjdGVyc1tfZ3JvdXBdW19wYXJ0XS5leHByZXNzaW9uLCBmdW5jdGlvbihjKSB7XG4gICAgICAgICAgcmV0dXJuIFVSSS5jaGFyYWN0ZXJzW19ncm91cF1bX3BhcnRdLm1hcFtjXTtcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIHdlJ3JlIG5vdCBnb2luZyB0byBtZXNzIHdpdGggd2VpcmQgZW5jb2RpbmdzLFxuICAgICAgICAvLyBnaXZlIHVwIGFuZCByZXR1cm4gdGhlIHVuZGVjb2RlZCBvcmlnaW5hbCBzdHJpbmdcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy84N1xuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzkyXG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBmb3IgKF9wYXJ0IGluIF9wYXJ0cykge1xuICAgIFVSSVtfcGFydCArICdQYXRoU2VnbWVudCddID0gZ2VuZXJhdGVBY2Nlc3NvcigncGF0aG5hbWUnLCBfcGFydHNbX3BhcnRdKTtcbiAgICBVUklbX3BhcnQgKyAnVXJuUGF0aFNlZ21lbnQnXSA9IGdlbmVyYXRlQWNjZXNzb3IoJ3VybnBhdGgnLCBfcGFydHNbX3BhcnRdKTtcbiAgfVxuXG4gIHZhciBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbiA9IGZ1bmN0aW9uKF9zZXAsIF9jb2RpbmdGdW5jTmFtZSwgX2lubmVyQ29kaW5nRnVuY05hbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICAvLyBXaHkgcGFzcyBpbiBuYW1lcyBvZiBmdW5jdGlvbnMsIHJhdGhlciB0aGFuIHRoZSBmdW5jdGlvbiBvYmplY3RzIHRoZW1zZWx2ZXM/IFRoZVxuICAgICAgLy8gZGVmaW5pdGlvbnMgb2Ygc29tZSBmdW5jdGlvbnMgKGJ1dCBpbiBwYXJ0aWN1bGFyLCBVUkkuZGVjb2RlKSB3aWxsIG9jY2FzaW9uYWxseSBjaGFuZ2UgZHVlXG4gICAgICAvLyB0byBVUkkuanMgaGF2aW5nIElTTzg4NTkgYW5kIFVuaWNvZGUgbW9kZXMuIFBhc3NpbmcgaW4gdGhlIG5hbWUgYW5kIGdldHRpbmcgaXQgd2lsbCBlbnN1cmVcbiAgICAgIC8vIHRoYXQgdGhlIGZ1bmN0aW9ucyB3ZSB1c2UgaGVyZSBhcmUgXCJmcmVzaFwiLlxuICAgICAgdmFyIGFjdHVhbENvZGluZ0Z1bmM7XG4gICAgICBpZiAoIV9pbm5lckNvZGluZ0Z1bmNOYW1lKSB7XG4gICAgICAgIGFjdHVhbENvZGluZ0Z1bmMgPSBVUklbX2NvZGluZ0Z1bmNOYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdHVhbENvZGluZ0Z1bmMgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gVVJJW19jb2RpbmdGdW5jTmFtZV0oVVJJW19pbm5lckNvZGluZ0Z1bmNOYW1lXShzdHJpbmcpKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRzID0gKHN0cmluZyArICcnKS5zcGxpdChfc2VwKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlZ21lbnRzW2ldID0gYWN0dWFsQ29kaW5nRnVuYyhzZWdtZW50c1tpXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKF9zZXApO1xuICAgIH07XG4gIH07XG5cbiAgLy8gVGhpcyB0YWtlcyBwbGFjZSBvdXRzaWRlIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCwgZS5nLiwgZW5jb2RlVXJuUGF0aCBmdW5jdGlvbnMuXG4gIFVSSS5kZWNvZGVQYXRoID0gZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24oJy8nLCAnZGVjb2RlUGF0aFNlZ21lbnQnKTtcbiAgVVJJLmRlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdkZWNvZGVVcm5QYXRoU2VnbWVudCcpO1xuICBVUkkucmVjb2RlUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCcvJywgJ2VuY29kZVBhdGhTZWdtZW50JywgJ2RlY29kZScpO1xuICBVUkkucmVjb2RlVXJuUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCc6JywgJ2VuY29kZVVyblBhdGhTZWdtZW50JywgJ2RlY29kZScpO1xuXG4gIFVSSS5lbmNvZGVSZXNlcnZlZCA9IGdlbmVyYXRlQWNjZXNzb3IoJ3Jlc2VydmVkJywgJ2VuY29kZScpO1xuXG4gIFVSSS5wYXJzZSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHtcbiAgICB2YXIgcG9zO1xuICAgIGlmICghcGFydHMpIHtcbiAgICAgIHBhcnRzID0ge1xuICAgICAgICBwcmV2ZW50SW52YWxpZEhvc3RuYW1lOiBVUkkucHJldmVudEludmFsaWRIb3N0bmFtZVxuICAgICAgfTtcbiAgICB9XG4gICAgLy8gW3Byb3RvY29sXCI6Ly9cIlt1c2VybmFtZVtcIjpcInBhc3N3b3JkXVwiQFwiXWhvc3RuYW1lW1wiOlwicG9ydF1cIi9cIj9dW3BhdGhdW1wiP1wicXVlcnlzdHJpbmddW1wiI1wiZnJhZ21lbnRdXG5cbiAgICAvLyBleHRyYWN0IGZyYWdtZW50XG4gICAgcG9zID0gc3RyaW5nLmluZGV4T2YoJyMnKTtcbiAgICBpZiAocG9zID4gLTEpIHtcbiAgICAgIC8vIGVzY2FwaW5nP1xuICAgICAgcGFydHMuZnJhZ21lbnQgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpIHx8IG51bGw7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcyk7XG4gICAgfVxuXG4gICAgLy8gZXh0cmFjdCBxdWVyeVxuICAgIHBvcyA9IHN0cmluZy5pbmRleE9mKCc/Jyk7XG4gICAgaWYgKHBvcyA+IC0xKSB7XG4gICAgICAvLyBlc2NhcGluZz9cbiAgICAgIHBhcnRzLnF1ZXJ5ID0gc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxKSB8fCBudWxsO1xuICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpO1xuICAgIH1cblxuICAgIC8vIGV4dHJhY3QgcHJvdG9jb2xcbiAgICBpZiAoc3RyaW5nLnN1YnN0cmluZygwLCAyKSA9PT0gJy8vJykge1xuICAgICAgLy8gcmVsYXRpdmUtc2NoZW1lXG4gICAgICBwYXJ0cy5wcm90b2NvbCA9IG51bGw7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKDIpO1xuICAgICAgLy8gZXh0cmFjdCBcInVzZXI6cGFzc0Bob3N0OnBvcnRcIlxuICAgICAgc3RyaW5nID0gVVJJLnBhcnNlQXV0aG9yaXR5KHN0cmluZywgcGFydHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3MgPSBzdHJpbmcuaW5kZXhPZignOicpO1xuICAgICAgaWYgKHBvcyA+IC0xKSB7XG4gICAgICAgIHBhcnRzLnByb3RvY29sID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpIHx8IG51bGw7XG4gICAgICAgIGlmIChwYXJ0cy5wcm90b2NvbCAmJiAhcGFydHMucHJvdG9jb2wubWF0Y2goVVJJLnByb3RvY29sX2V4cHJlc3Npb24pKSB7XG4gICAgICAgICAgLy8gOiBtYXkgYmUgd2l0aGluIHRoZSBwYXRoXG4gICAgICAgICAgcGFydHMucHJvdG9jb2wgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxLCBwb3MgKyAzKSA9PT0gJy8vJykge1xuICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMyk7XG5cbiAgICAgICAgICAvLyBleHRyYWN0IFwidXNlcjpwYXNzQGhvc3Q6cG9ydFwiXG4gICAgICAgICAgc3RyaW5nID0gVVJJLnBhcnNlQXV0aG9yaXR5KHN0cmluZywgcGFydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSk7XG4gICAgICAgICAgcGFydHMudXJuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHdoYXQncyBsZWZ0IG11c3QgYmUgdGhlIHBhdGhcbiAgICBwYXJ0cy5wYXRoID0gc3RyaW5nO1xuXG4gICAgLy8gYW5kIHdlJ3JlIGRvbmVcbiAgICByZXR1cm4gcGFydHM7XG4gIH07XG4gIFVSSS5wYXJzZUhvc3QgPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7XG4gICAgaWYgKCFzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9ICcnO1xuICAgIH1cblxuICAgIC8vIENvcHkgY2hyb21lLCBJRSwgb3BlcmEgYmFja3NsYXNoLWhhbmRsaW5nIGJlaGF2aW9yLlxuICAgIC8vIEJhY2sgc2xhc2hlcyBiZWZvcmUgdGhlIHF1ZXJ5IHN0cmluZyBnZXQgY29udmVydGVkIHRvIGZvcndhcmQgc2xhc2hlc1xuICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2Jsb2IvMzg2ZmQyNGY0OWIwZTlkMWE4YTA3NjU5MmE0MDQxNjhmYWVlY2MzNC9saWIvdXJsLmpzI0wxMTUtTDEyNFxuICAgIC8vIFNlZTogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI1OTE2XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvcHVsbC8yMzNcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuXG4gICAgLy8gZXh0cmFjdCBob3N0OnBvcnRcbiAgICB2YXIgcG9zID0gc3RyaW5nLmluZGV4T2YoJy8nKTtcbiAgICB2YXIgYnJhY2tldFBvcztcbiAgICB2YXIgdDtcblxuICAgIGlmIChwb3MgPT09IC0xKSB7XG4gICAgICBwb3MgPSBzdHJpbmcubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmIChzdHJpbmcuY2hhckF0KDApID09PSAnWycpIHtcbiAgICAgIC8vIElQdjYgaG9zdCAtIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtNm1hbi10ZXh0LWFkZHItcmVwcmVzZW50YXRpb24tMDQjc2VjdGlvbi02XG4gICAgICAvLyBJIGNsYWltIG1vc3QgY2xpZW50IHNvZnR3YXJlIGJyZWFrcyBvbiBJUHY2IGFueXdheXMuIFRvIHNpbXBsaWZ5IHRoaW5ncywgVVJJIG9ubHkgYWNjZXB0c1xuICAgICAgLy8gSVB2Nitwb3J0IGluIHRoZSBmb3JtYXQgWzIwMDE6ZGI4OjoxXTo4MCAoZm9yIHRoZSB0aW1lIGJlaW5nKVxuICAgICAgYnJhY2tldFBvcyA9IHN0cmluZy5pbmRleE9mKCddJyk7XG4gICAgICBwYXJ0cy5ob3N0bmFtZSA9IHN0cmluZy5zdWJzdHJpbmcoMSwgYnJhY2tldFBvcykgfHwgbnVsbDtcbiAgICAgIHBhcnRzLnBvcnQgPSBzdHJpbmcuc3Vic3RyaW5nKGJyYWNrZXRQb3MgKyAyLCBwb3MpIHx8IG51bGw7XG4gICAgICBpZiAocGFydHMucG9ydCA9PT0gJy8nKSB7XG4gICAgICAgIHBhcnRzLnBvcnQgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZmlyc3RDb2xvbiA9IHN0cmluZy5pbmRleE9mKCc6Jyk7XG4gICAgICB2YXIgZmlyc3RTbGFzaCA9IHN0cmluZy5pbmRleE9mKCcvJyk7XG4gICAgICB2YXIgbmV4dENvbG9uID0gc3RyaW5nLmluZGV4T2YoJzonLCBmaXJzdENvbG9uICsgMSk7XG4gICAgICBpZiAobmV4dENvbG9uICE9PSAtMSAmJiAoZmlyc3RTbGFzaCA9PT0gLTEgfHwgbmV4dENvbG9uIDwgZmlyc3RTbGFzaCkpIHtcbiAgICAgICAgLy8gSVB2NiBob3N0IGNvbnRhaW5zIG11bHRpcGxlIGNvbG9ucyAtIGJ1dCBubyBwb3J0XG4gICAgICAgIC8vIHRoaXMgbm90YXRpb24gaXMgYWN0dWFsbHkgbm90IGFsbG93ZWQgYnkgUkZDIDM5ODYsIGJ1dCB3ZSdyZSBhIGxpYmVyYWwgcGFyc2VyXG4gICAgICAgIHBhcnRzLmhvc3RuYW1lID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpIHx8IG51bGw7XG4gICAgICAgIHBhcnRzLnBvcnQgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdCA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKS5zcGxpdCgnOicpO1xuICAgICAgICBwYXJ0cy5ob3N0bmFtZSA9IHRbMF0gfHwgbnVsbDtcbiAgICAgICAgcGFydHMucG9ydCA9IHRbMV0gfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocGFydHMuaG9zdG5hbWUgJiYgc3RyaW5nLnN1YnN0cmluZyhwb3MpLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBwb3MrKztcbiAgICAgIHN0cmluZyA9ICcvJyArIHN0cmluZztcbiAgICB9XG5cbiAgICBpZiAocGFydHMucHJldmVudEludmFsaWRIb3N0bmFtZSkge1xuICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUocGFydHMuaG9zdG5hbWUsIHBhcnRzLnByb3RvY29sKTtcbiAgICB9XG5cbiAgICBpZiAocGFydHMucG9ydCkge1xuICAgICAgVVJJLmVuc3VyZVZhbGlkUG9ydChwYXJ0cy5wb3J0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyaW5nLnN1YnN0cmluZyhwb3MpIHx8ICcvJztcbiAgfTtcbiAgVVJJLnBhcnNlQXV0aG9yaXR5ID0gZnVuY3Rpb24oc3RyaW5nLCBwYXJ0cykge1xuICAgIHN0cmluZyA9IFVSSS5wYXJzZVVzZXJpbmZvKHN0cmluZywgcGFydHMpO1xuICAgIHJldHVybiBVUkkucGFyc2VIb3N0KHN0cmluZywgcGFydHMpO1xuICB9O1xuICBVUkkucGFyc2VVc2VyaW5mbyA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHtcbiAgICAvLyBleHRyYWN0IHVzZXJuYW1lOnBhc3N3b3JkXG4gICAgdmFyIGZpcnN0U2xhc2ggPSBzdHJpbmcuaW5kZXhPZignLycpO1xuICAgIHZhciBwb3MgPSBzdHJpbmcubGFzdEluZGV4T2YoJ0AnLCBmaXJzdFNsYXNoID4gLTEgPyBmaXJzdFNsYXNoIDogc3RyaW5nLmxlbmd0aCAtIDEpO1xuICAgIHZhciB0O1xuXG4gICAgLy8gYXV0aG9yaXR5QCBtdXN0IGNvbWUgYmVmb3JlIC9wYXRoXG4gICAgaWYgKHBvcyA+IC0xICYmIChmaXJzdFNsYXNoID09PSAtMSB8fCBwb3MgPCBmaXJzdFNsYXNoKSkge1xuICAgICAgdCA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKS5zcGxpdCgnOicpO1xuICAgICAgcGFydHMudXNlcm5hbWUgPSB0WzBdID8gVVJJLmRlY29kZSh0WzBdKSA6IG51bGw7XG4gICAgICB0LnNoaWZ0KCk7XG4gICAgICBwYXJ0cy5wYXNzd29yZCA9IHRbMF0gPyBVUkkuZGVjb2RlKHQuam9pbignOicpKSA6IG51bGw7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJ0cy51c2VybmFtZSA9IG51bGw7XG4gICAgICBwYXJ0cy5wYXNzd29yZCA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcbiAgVVJJLnBhcnNlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICBpZiAoIXN0cmluZykge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIC8vIHRocm93IG91dCB0aGUgZnVua3kgYnVzaW5lc3MgLSBcIj9cIltuYW1lXCI9XCJ2YWx1ZVwiJlwiXStcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvJisvZywgJyYnKS5yZXBsYWNlKC9eXFw/KiYqfCYrJC9nLCAnJyk7XG5cbiAgICBpZiAoIXN0cmluZykge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHZhciBpdGVtcyA9IHt9O1xuICAgIHZhciBzcGxpdHMgPSBzdHJpbmcuc3BsaXQoJyYnKTtcbiAgICB2YXIgbGVuZ3RoID0gc3BsaXRzLmxlbmd0aDtcbiAgICB2YXIgdiwgbmFtZSwgdmFsdWU7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2ID0gc3BsaXRzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICBuYW1lID0gVVJJLmRlY29kZVF1ZXJ5KHYuc2hpZnQoKSwgZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgICAvLyBubyBcIj1cIiBpcyBudWxsIGFjY29yZGluZyB0byBodHRwOi8vZHZjcy53My5vcmcvaGcvdXJsL3Jhdy1maWxlL3RpcC9PdmVydmlldy5odG1sI2NvbGxlY3QtdXJsLXBhcmFtZXRlcnNcbiAgICAgIHZhbHVlID0gdi5sZW5ndGggPyBVUkkuZGVjb2RlUXVlcnkodi5qb2luKCc9JyksIGVzY2FwZVF1ZXJ5U3BhY2UpIDogbnVsbDtcblxuICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZW1zLCBuYW1lKSkge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW1zW25hbWVdID09PSAnc3RyaW5nJyB8fCBpdGVtc1tuYW1lXSA9PT0gbnVsbCkge1xuICAgICAgICAgIGl0ZW1zW25hbWVdID0gW2l0ZW1zW25hbWVdXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0ZW1zW25hbWVdLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXM7XG4gIH07XG5cbiAgVVJJLmJ1aWxkID0gZnVuY3Rpb24ocGFydHMpIHtcbiAgICB2YXIgdCA9ICcnO1xuXG4gICAgaWYgKHBhcnRzLnByb3RvY29sKSB7XG4gICAgICB0ICs9IHBhcnRzLnByb3RvY29sICsgJzonO1xuICAgIH1cblxuICAgIGlmICghcGFydHMudXJuICYmICh0IHx8IHBhcnRzLmhvc3RuYW1lKSkge1xuICAgICAgdCArPSAnLy8nO1xuICAgIH1cblxuICAgIHQgKz0gKFVSSS5idWlsZEF1dGhvcml0eShwYXJ0cykgfHwgJycpO1xuXG4gICAgaWYgKHR5cGVvZiBwYXJ0cy5wYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHBhcnRzLnBhdGguY2hhckF0KDApICE9PSAnLycgJiYgdHlwZW9mIHBhcnRzLmhvc3RuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICB0ICs9ICcvJztcbiAgICAgIH1cblxuICAgICAgdCArPSBwYXJ0cy5wYXRoO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcGFydHMucXVlcnkgPT09ICdzdHJpbmcnICYmIHBhcnRzLnF1ZXJ5KSB7XG4gICAgICB0ICs9ICc/JyArIHBhcnRzLnF1ZXJ5O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcGFydHMuZnJhZ21lbnQgPT09ICdzdHJpbmcnICYmIHBhcnRzLmZyYWdtZW50KSB7XG4gICAgICB0ICs9ICcjJyArIHBhcnRzLmZyYWdtZW50O1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfTtcbiAgVVJJLmJ1aWxkSG9zdCA9IGZ1bmN0aW9uKHBhcnRzKSB7XG4gICAgdmFyIHQgPSAnJztcblxuICAgIGlmICghcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9IGVsc2UgaWYgKFVSSS5pcDZfZXhwcmVzc2lvbi50ZXN0KHBhcnRzLmhvc3RuYW1lKSkge1xuICAgICAgdCArPSAnWycgKyBwYXJ0cy5ob3N0bmFtZSArICddJztcbiAgICB9IGVsc2Uge1xuICAgICAgdCArPSBwYXJ0cy5ob3N0bmFtZTtcbiAgICB9XG5cbiAgICBpZiAocGFydHMucG9ydCkge1xuICAgICAgdCArPSAnOicgKyBwYXJ0cy5wb3J0O1xuICAgIH1cblxuICAgIHJldHVybiB0O1xuICB9O1xuICBVUkkuYnVpbGRBdXRob3JpdHkgPSBmdW5jdGlvbihwYXJ0cykge1xuICAgIHJldHVybiBVUkkuYnVpbGRVc2VyaW5mbyhwYXJ0cykgKyBVUkkuYnVpbGRIb3N0KHBhcnRzKTtcbiAgfTtcbiAgVVJJLmJ1aWxkVXNlcmluZm8gPSBmdW5jdGlvbihwYXJ0cykge1xuICAgIHZhciB0ID0gJyc7XG5cbiAgICBpZiAocGFydHMudXNlcm5hbWUpIHtcbiAgICAgIHQgKz0gVVJJLmVuY29kZShwYXJ0cy51c2VybmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcnRzLnBhc3N3b3JkKSB7XG4gICAgICB0ICs9ICc6JyArIFVSSS5lbmNvZGUocGFydHMucGFzc3dvcmQpO1xuICAgIH1cblxuICAgIGlmICh0KSB7XG4gICAgICB0ICs9ICdAJztcbiAgICB9XG5cbiAgICByZXR1cm4gdDtcbiAgfTtcbiAgVVJJLmJ1aWxkUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBkdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICAvLyBhY2NvcmRpbmcgdG8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NiBvciBodHRwOi8vbGFicy5hcGFjaGUub3JnL3dlYmFyY2gvdXJpL3JmYy9yZmMzOTg2Lmh0bWxcbiAgICAvLyBiZWluZyDCuy0uX34hJCYnKCkqKyw7PTpALz/CqyAlSEVYIGFuZCBhbG51bSBhcmUgYWxsb3dlZFxuICAgIC8vIHRoZSBSRkMgZXhwbGljaXRseSBzdGF0ZXMgPy9mb28gYmVpbmcgYSB2YWxpZCB1c2UgY2FzZSwgbm8gbWVudGlvbiBvZiBwYXJhbWV0ZXIgc3ludGF4IVxuICAgIC8vIFVSSS5qcyB0cmVhdHMgdGhlIHF1ZXJ5IHN0cmluZyBhcyBiZWluZyBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcbiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MC9pbnRlcmFjdC9mb3Jtcy5odG1sI2Zvcm0tY29udGVudC10eXBlXG5cbiAgICB2YXIgdCA9ICcnO1xuICAgIHZhciB1bmlxdWUsIGtleSwgaSwgbGVuZ3RoO1xuICAgIGZvciAoa2V5IGluIGRhdGEpIHtcbiAgICAgIGlmIChoYXNPd24uY2FsbChkYXRhLCBrZXkpICYmIGtleSkge1xuICAgICAgICBpZiAoaXNBcnJheShkYXRhW2tleV0pKSB7XG4gICAgICAgICAgdW5pcXVlID0ge307XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZGF0YVtrZXldLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZGF0YVtrZXldW2ldICE9PSB1bmRlZmluZWQgJiYgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHQgKz0gJyYnICsgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIoa2V5LCBkYXRhW2tleV1baV0sIGVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgICAgICAgICAgICBpZiAoZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0ICs9ICcmJyArIFVSSS5idWlsZFF1ZXJ5UGFyYW1ldGVyKGtleSwgZGF0YVtrZXldLCBlc2NhcGVRdWVyeVNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0LnN1YnN0cmluZygxKTtcbiAgfTtcbiAgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkge1xuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy1odG1sNDAvaW50ZXJhY3QvZm9ybXMuaHRtbCNmb3JtLWNvbnRlbnQtdHlwZSAtLSBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcbiAgICAvLyBkb24ndCBhcHBlbmQgXCI9XCIgZm9yIG51bGwgdmFsdWVzLCBhY2NvcmRpbmcgdG8gaHR0cDovL2R2Y3MudzMub3JnL2hnL3VybC9yYXctZmlsZS90aXAvT3ZlcnZpZXcuaHRtbCN1cmwtcGFyYW1ldGVyLXNlcmlhbGl6YXRpb25cbiAgICByZXR1cm4gVVJJLmVuY29kZVF1ZXJ5KG5hbWUsIGVzY2FwZVF1ZXJ5U3BhY2UpICsgKHZhbHVlICE9PSBudWxsID8gJz0nICsgVVJJLmVuY29kZVF1ZXJ5KHZhbHVlLCBlc2NhcGVRdWVyeVNwYWNlKSA6ICcnKTtcbiAgfTtcblxuICBVUkkuYWRkUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7XG4gICAgICAgICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoZGF0YVtuYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRhdGFbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YVtuYW1lXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGF0YVtuYW1lXSA9IFtkYXRhW25hbWVdXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgICB9XG5cbiAgICAgIGRhdGFbbmFtZV0gPSAoZGF0YVtuYW1lXSB8fCBbXSkuY29uY2F0KHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXInKTtcbiAgICB9XG4gIH07XG5cbiAgVVJJLnNldFF1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkge1xuICAgICAgICAgIFVSSS5zZXRRdWVyeShkYXRhLCBrZXksIG5hbWVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgZGF0YVtuYW1lXSA9IHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5zZXRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7XG4gICAgfVxuICB9O1xuXG4gIFVSSS5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIGksIGxlbmd0aCwga2V5O1xuXG4gICAgaWYgKGlzQXJyYXkobmFtZSkpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG5hbWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGF0YVtuYW1lW2ldXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGdldFR5cGUobmFtZSkgPT09ICdSZWdFeHAnKSB7XG4gICAgICBmb3IgKGtleSBpbiBkYXRhKSB7XG4gICAgICAgIGlmIChuYW1lLnRlc3Qoa2V5KSkge1xuICAgICAgICAgIGRhdGFba2V5XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKGtleSBpbiBuYW1lKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7XG4gICAgICAgICAgVVJJLnJlbW92ZVF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZ2V0VHlwZSh2YWx1ZSkgPT09ICdSZWdFeHAnKSB7XG4gICAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pICYmIHZhbHVlLnRlc3QoZGF0YVtuYW1lXSkpIHtcbiAgICAgICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFbbmFtZV0gPT09IFN0cmluZyh2YWx1ZSkgJiYgKCFpc0FycmF5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KGRhdGFbbmFtZV0pKSB7XG4gICAgICAgICAgZGF0YVtuYW1lXSA9IGZpbHRlckFycmF5VmFsdWVzKGRhdGFbbmFtZV0sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVVJJLnJlbW92ZVF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZywgUmVnRXhwIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXInKTtcbiAgICB9XG4gIH07XG4gIFVSSS5oYXNRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSkge1xuICAgIHN3aXRjaCAoZ2V0VHlwZShuYW1lKSkge1xuICAgICAgY2FzZSAnU3RyaW5nJzpcbiAgICAgICAgLy8gTm90aGluZyB0byBkbyBoZXJlXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdSZWdFeHAnOlxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgIGlmIChoYXNPd24uY2FsbChkYXRhLCBrZXkpKSB7XG4gICAgICAgICAgICBpZiAobmFtZS50ZXN0KGtleSkgJiYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgVVJJLmhhc1F1ZXJ5KGRhdGEsIGtleSwgdmFsdWUpKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgIGNhc2UgJ09iamVjdCc6XG4gICAgICAgIGZvciAodmFyIF9rZXkgaW4gbmFtZSkge1xuICAgICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBfa2V5KSkge1xuICAgICAgICAgICAgaWYgKCFVUkkuaGFzUXVlcnkoZGF0YSwgX2tleSwgbmFtZVtfa2V5XSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIGEgc3RyaW5nLCByZWd1bGFyIGV4cHJlc3Npb24gb3Igb2JqZWN0IGFzIHRoZSBuYW1lIHBhcmFtZXRlcicpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZ2V0VHlwZSh2YWx1ZSkpIHtcbiAgICAgIGNhc2UgJ1VuZGVmaW5lZCc6XG4gICAgICAgIC8vIHRydWUgaWYgZXhpc3RzIChidXQgbWF5IGJlIGVtcHR5KVxuICAgICAgICByZXR1cm4gbmFtZSBpbiBkYXRhOyAvLyBkYXRhW25hbWVdICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgIGNhc2UgJ0Jvb2xlYW4nOlxuICAgICAgICAvLyB0cnVlIGlmIGV4aXN0cyBhbmQgbm9uLWVtcHR5XG4gICAgICAgIHZhciBfYm9vbHkgPSBCb29sZWFuKGlzQXJyYXkoZGF0YVtuYW1lXSkgPyBkYXRhW25hbWVdLmxlbmd0aCA6IGRhdGFbbmFtZV0pO1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IF9ib29seTtcblxuICAgICAgY2FzZSAnRnVuY3Rpb24nOlxuICAgICAgICAvLyBhbGxvdyBjb21wbGV4IGNvbXBhcmlzb25cbiAgICAgICAgcmV0dXJuICEhdmFsdWUoZGF0YVtuYW1lXSwgbmFtZSwgZGF0YSk7XG5cbiAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9wID0gd2l0aGluQXJyYXkgPyBhcnJheUNvbnRhaW5zIDogYXJyYXlzRXF1YWw7XG4gICAgICAgIHJldHVybiBvcChkYXRhW25hbWVdLCB2YWx1ZSk7XG5cbiAgICAgIGNhc2UgJ1JlZ0V4cCc6XG4gICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSkge1xuICAgICAgICAgIHJldHVybiBCb29sZWFuKGRhdGFbbmFtZV0gJiYgZGF0YVtuYW1lXS5tYXRjaCh2YWx1ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF3aXRoaW5BcnJheSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcnJheUNvbnRhaW5zKGRhdGFbbmFtZV0sIHZhbHVlKTtcblxuICAgICAgY2FzZSAnTnVtYmVyJzpcbiAgICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlICdTdHJpbmcnOlxuICAgICAgICBpZiAoIWlzQXJyYXkoZGF0YVtuYW1lXSkpIHtcbiAgICAgICAgICByZXR1cm4gZGF0YVtuYW1lXSA9PT0gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXdpdGhpbkFycmF5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFycmF5Q29udGFpbnMoZGF0YVtuYW1lXSwgdmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIHVuZGVmaW5lZCwgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIsIFJlZ0V4cCwgRnVuY3Rpb24gYXMgdGhlIHZhbHVlIHBhcmFtZXRlcicpO1xuICAgIH1cbiAgfTtcblxuXG4gIFVSSS5qb2luUGF0aHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5wdXQgPSBbXTtcbiAgICB2YXIgc2VnbWVudHMgPSBbXTtcbiAgICB2YXIgbm9uRW1wdHlTZWdtZW50cyA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHVybCA9IG5ldyBVUkkoYXJndW1lbnRzW2ldKTtcbiAgICAgIGlucHV0LnB1c2godXJsKTtcbiAgICAgIHZhciBfc2VnbWVudHMgPSB1cmwuc2VnbWVudCgpO1xuICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBfc2VnbWVudHMubGVuZ3RoOyBzKyspIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfc2VnbWVudHNbc10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgc2VnbWVudHMucHVzaChfc2VnbWVudHNbc10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9zZWdtZW50c1tzXSkge1xuICAgICAgICAgIG5vbkVtcHR5U2VnbWVudHMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghc2VnbWVudHMubGVuZ3RoIHx8ICFub25FbXB0eVNlZ21lbnRzKSB7XG4gICAgICByZXR1cm4gbmV3IFVSSSgnJyk7XG4gICAgfVxuXG4gICAgdmFyIHVyaSA9IG5ldyBVUkkoJycpLnNlZ21lbnQoc2VnbWVudHMpO1xuXG4gICAgaWYgKGlucHV0WzBdLnBhdGgoKSA9PT0gJycgfHwgaW5wdXRbMF0ucGF0aCgpLnNsaWNlKDAsIDEpID09PSAnLycpIHtcbiAgICAgIHVyaS5wYXRoKCcvJyArIHVyaS5wYXRoKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB1cmkubm9ybWFsaXplKCk7XG4gIH07XG5cbiAgVVJJLmNvbW1vblBhdGggPSBmdW5jdGlvbihvbmUsIHR3bykge1xuICAgIHZhciBsZW5ndGggPSBNYXRoLm1pbihvbmUubGVuZ3RoLCB0d28ubGVuZ3RoKTtcbiAgICB2YXIgcG9zO1xuXG4gICAgLy8gZmluZCBmaXJzdCBub24tbWF0Y2hpbmcgY2hhcmFjdGVyXG4gICAgZm9yIChwb3MgPSAwOyBwb3MgPCBsZW5ndGg7IHBvcysrKSB7XG4gICAgICBpZiAob25lLmNoYXJBdChwb3MpICE9PSB0d28uY2hhckF0KHBvcykpIHtcbiAgICAgICAgcG9zLS07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3MgPCAxKSB7XG4gICAgICByZXR1cm4gb25lLmNoYXJBdCgwKSA9PT0gdHdvLmNoYXJBdCgwKSAmJiBvbmUuY2hhckF0KDApID09PSAnLycgPyAnLycgOiAnJztcbiAgICB9XG5cbiAgICAvLyByZXZlcnQgdG8gbGFzdCAvXG4gICAgaWYgKG9uZS5jaGFyQXQocG9zKSAhPT0gJy8nIHx8IHR3by5jaGFyQXQocG9zKSAhPT0gJy8nKSB7XG4gICAgICBwb3MgPSBvbmUuc3Vic3RyaW5nKDAsIHBvcykubGFzdEluZGV4T2YoJy8nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb25lLnN1YnN0cmluZygwLCBwb3MgKyAxKTtcbiAgfTtcblxuICBVUkkud2l0aGluU3RyaW5nID0gZnVuY3Rpb24oc3RyaW5nLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgdmFyIF9zdGFydCA9IG9wdGlvbnMuc3RhcnQgfHwgVVJJLmZpbmRVcmkuc3RhcnQ7XG4gICAgdmFyIF9lbmQgPSBvcHRpb25zLmVuZCB8fCBVUkkuZmluZFVyaS5lbmQ7XG4gICAgdmFyIF90cmltID0gb3B0aW9ucy50cmltIHx8IFVSSS5maW5kVXJpLnRyaW07XG4gICAgdmFyIF9wYXJlbnMgPSBvcHRpb25zLnBhcmVucyB8fCBVUkkuZmluZFVyaS5wYXJlbnM7XG4gICAgdmFyIF9hdHRyaWJ1dGVPcGVuID0gL1thLXowLTktXT1bXCInXT8kL2k7XG5cbiAgICBfc3RhcnQubGFzdEluZGV4ID0gMDtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgdmFyIG1hdGNoID0gX3N0YXJ0LmV4ZWMoc3RyaW5nKTtcbiAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydCA9IG1hdGNoLmluZGV4O1xuICAgICAgaWYgKG9wdGlvbnMuaWdub3JlSHRtbCkge1xuICAgICAgICAvLyBhdHRyaWJ1dChlPVtcIiddPyQpXG4gICAgICAgIHZhciBhdHRyaWJ1dGVPcGVuID0gc3RyaW5nLnNsaWNlKE1hdGgubWF4KHN0YXJ0IC0gMywgMCksIHN0YXJ0KTtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZU9wZW4gJiYgX2F0dHJpYnV0ZU9wZW4udGVzdChhdHRyaWJ1dGVPcGVuKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBlbmQgPSBzdGFydCArIHN0cmluZy5zbGljZShzdGFydCkuc2VhcmNoKF9lbmQpO1xuICAgICAgdmFyIHNsaWNlID0gc3RyaW5nLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgLy8gbWFrZSBzdXJlIHdlIGluY2x1ZGUgd2VsbCBiYWxhbmNlZCBwYXJlbnNcbiAgICAgIHZhciBwYXJlbnNFbmQgPSAtMTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBwYXJlbnNNYXRjaCA9IF9wYXJlbnMuZXhlYyhzbGljZSk7XG4gICAgICAgIGlmICghcGFyZW5zTWF0Y2gpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnNNYXRjaEVuZCA9IHBhcmVuc01hdGNoLmluZGV4ICsgcGFyZW5zTWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICBwYXJlbnNFbmQgPSBNYXRoLm1heChwYXJlbnNFbmQsIHBhcmVuc01hdGNoRW5kKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVuc0VuZCA+IC0xKSB7XG4gICAgICAgIHNsaWNlID0gc2xpY2Uuc2xpY2UoMCwgcGFyZW5zRW5kKSArIHNsaWNlLnNsaWNlKHBhcmVuc0VuZCkucmVwbGFjZShfdHJpbSwgJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpY2UgPSBzbGljZS5yZXBsYWNlKF90cmltLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzbGljZS5sZW5ndGggPD0gbWF0Y2hbMF0ubGVuZ3RoKSB7XG4gICAgICAgIC8vIHRoZSBleHRyYWN0IG9ubHkgY29udGFpbnMgdGhlIHN0YXJ0aW5nIG1hcmtlciBvZiBhIFVSSSxcbiAgICAgICAgLy8gZS5nLiBcInd3d1wiIG9yIFwiaHR0cDovL1wiXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5pZ25vcmUgJiYgb3B0aW9ucy5pZ25vcmUudGVzdChzbGljZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGVuZCA9IHN0YXJ0ICsgc2xpY2UubGVuZ3RoO1xuICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKHNsaWNlLCBzdGFydCwgZW5kLCBzdHJpbmcpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIF9zdGFydC5sYXN0SW5kZXggPSBlbmQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSBTdHJpbmcocmVzdWx0KTtcbiAgICAgIHN0cmluZyA9IHN0cmluZy5zbGljZSgwLCBzdGFydCkgKyByZXN1bHQgKyBzdHJpbmcuc2xpY2UoZW5kKTtcbiAgICAgIF9zdGFydC5sYXN0SW5kZXggPSBzdGFydCArIHJlc3VsdC5sZW5ndGg7XG4gICAgfVxuXG4gICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSA9IGZ1bmN0aW9uKHYsIHByb3RvY29sKSB7XG4gICAgLy8gVGhlb3JldGljYWxseSBVUklzIGFsbG93IHBlcmNlbnQtZW5jb2RpbmcgaW4gSG9zdG5hbWVzIChhY2NvcmRpbmcgdG8gUkZDIDM5ODYpXG4gICAgLy8gdGhleSBhcmUgbm90IHBhcnQgb2YgRE5TIGFuZCB0aGVyZWZvcmUgaWdub3JlZCBieSBVUkkuanNcblxuICAgIHZhciBoYXNIb3N0bmFtZSA9ICEhdjsgLy8gbm90IG51bGwgYW5kIG5vdCBhbiBlbXB0eSBzdHJpbmdcbiAgICB2YXIgaGFzUHJvdG9jb2wgPSAhIXByb3RvY29sO1xuICAgIHZhciByZWplY3RFbXB0eUhvc3RuYW1lID0gZmFsc2U7XG5cbiAgICBpZiAoaGFzUHJvdG9jb2wpIHtcbiAgICAgIHJlamVjdEVtcHR5SG9zdG5hbWUgPSBhcnJheUNvbnRhaW5zKFVSSS5ob3N0UHJvdG9jb2xzLCBwcm90b2NvbCk7XG4gICAgfVxuXG4gICAgaWYgKHJlamVjdEVtcHR5SG9zdG5hbWUgJiYgIWhhc0hvc3RuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBjYW5ub3QgYmUgZW1wdHksIGlmIHByb3RvY29sIGlzICcgKyBwcm90b2NvbCk7XG4gICAgfSBlbHNlIGlmICh2ICYmIHYubWF0Y2goVVJJLmludmFsaWRfaG9zdG5hbWVfY2hhcmFjdGVycykpIHtcbiAgICAgIC8vIHRlc3QgcHVueWNvZGVcbiAgICAgIGlmICghcHVueWNvZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgXCInICsgdiArICdcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tOl9dIGFuZCBQdW55Y29kZS5qcyBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgICB9XG4gICAgICBpZiAocHVueWNvZGUudG9BU0NJSSh2KS5tYXRjaChVUkkuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBcIicgKyB2ICsgJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li06X10nKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgVVJJLmVuc3VyZVZhbGlkUG9ydCA9IGZ1bmN0aW9uICh2KSB7XG4gICAgaWYgKCF2KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBvcnQgPSBOdW1iZXIodik7XG4gICAgaWYgKGlzSW50ZWdlcihwb3J0KSAmJiAocG9ydCA+IDApICYmIChwb3J0IDwgNjU1MzYpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUG9ydCBcIicgKyB2ICsgJ1wiIGlzIG5vdCBhIHZhbGlkIHBvcnQnKTtcbiAgfTtcblxuICAvLyBub0NvbmZsaWN0XG4gIFVSSS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24ocmVtb3ZlQWxsKSB7XG4gICAgaWYgKHJlbW92ZUFsbCkge1xuICAgICAgdmFyIHVuY29uZmxpY3RlZCA9IHtcbiAgICAgICAgVVJJOiB0aGlzLm5vQ29uZmxpY3QoKVxuICAgICAgfTtcblxuICAgICAgaWYgKHJvb3QuVVJJVGVtcGxhdGUgJiYgdHlwZW9mIHJvb3QuVVJJVGVtcGxhdGUubm9Db25mbGljdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB1bmNvbmZsaWN0ZWQuVVJJVGVtcGxhdGUgPSByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvb3QuSVB2NiAmJiB0eXBlb2Ygcm9vdC5JUHY2Lm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdW5jb25mbGljdGVkLklQdjYgPSByb290LklQdjYubm9Db25mbGljdCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAocm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgJiYgdHlwZW9mIHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdW5jb25mbGljdGVkLlNlY29uZExldmVsRG9tYWlucyA9IHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3QoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuY29uZmxpY3RlZDtcbiAgICB9IGVsc2UgaWYgKHJvb3QuVVJJID09PSB0aGlzKSB7XG4gICAgICByb290LlVSSSA9IF9VUkk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC5idWlsZCA9IGZ1bmN0aW9uKGRlZmVyQnVpbGQpIHtcbiAgICBpZiAoZGVmZXJCdWlsZCA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoZGVmZXJCdWlsZCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX2RlZmVycmVkX2J1aWxkKSB7XG4gICAgICB0aGlzLl9zdHJpbmcgPSBVUkkuYnVpbGQodGhpcy5fcGFydHMpO1xuICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBwLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBVUkkodGhpcyk7XG4gIH07XG5cbiAgcC52YWx1ZU9mID0gcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkKGZhbHNlKS5fc3RyaW5nO1xuICB9O1xuXG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcihfcGFydCl7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJ0c1tfcGFydF0gfHwgJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9wYXJ0c1tfcGFydF0gPSB2IHx8IG51bGw7XG4gICAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlUHJlZml4QWNjZXNzb3IoX3BhcnQsIF9rZXkpe1xuICAgIHJldHVybiBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFydHNbX3BhcnRdIHx8ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHYgIT09IG51bGwpIHtcbiAgICAgICAgICB2ID0gdiArICcnO1xuICAgICAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gX2tleSkge1xuICAgICAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BhcnRzW19wYXJ0XSA9IHY7XG4gICAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHAucHJvdG9jb2wgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdwcm90b2NvbCcpO1xuICBwLnVzZXJuYW1lID0gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcigndXNlcm5hbWUnKTtcbiAgcC5wYXNzd29yZCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3Bhc3N3b3JkJyk7XG4gIHAuaG9zdG5hbWUgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdob3N0bmFtZScpO1xuICBwLnBvcnQgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdwb3J0Jyk7XG4gIHAucXVlcnkgPSBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKCdxdWVyeScsICc/Jyk7XG4gIHAuZnJhZ21lbnQgPSBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKCdmcmFnbWVudCcsICcjJyk7XG5cbiAgcC5zZWFyY2ggPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIHZhciB0ID0gdGhpcy5xdWVyeSh2LCBidWlsZCk7XG4gICAgcmV0dXJuIHR5cGVvZiB0ID09PSAnc3RyaW5nJyAmJiB0Lmxlbmd0aCA/ICgnPycgKyB0KSA6IHQ7XG4gIH07XG4gIHAuaGFzaCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgdmFyIHQgPSB0aGlzLmZyYWdtZW50KHYsIGJ1aWxkKTtcbiAgICByZXR1cm4gdHlwZW9mIHQgPT09ICdzdHJpbmcnICYmIHQubGVuZ3RoID8gKCcjJyArIHQpIDogdDtcbiAgfTtcblxuICBwLnBhdGhuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHtcbiAgICAgIHZhciByZXMgPSB0aGlzLl9wYXJ0cy5wYXRoIHx8ICh0aGlzLl9wYXJ0cy5ob3N0bmFtZSA/ICcvJyA6ICcnKTtcbiAgICAgIHJldHVybiB2ID8gKHRoaXMuX3BhcnRzLnVybiA/IFVSSS5kZWNvZGVVcm5QYXRoIDogVVJJLmRlY29kZVBhdGgpKHJlcykgOiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHYgPyBVUkkucmVjb2RlVXJuUGF0aCh2KSA6ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHYgPyBVUkkucmVjb2RlUGF0aCh2KSA6ICcvJztcbiAgICAgIH1cbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgcC5wYXRoID0gcC5wYXRobmFtZTtcbiAgcC5ocmVmID0gZnVuY3Rpb24oaHJlZiwgYnVpbGQpIHtcbiAgICB2YXIga2V5O1xuXG4gICAgaWYgKGhyZWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zdHJpbmcgPSAnJztcbiAgICB0aGlzLl9wYXJ0cyA9IFVSSS5fcGFydHMoKTtcblxuICAgIHZhciBfVVJJID0gaHJlZiBpbnN0YW5jZW9mIFVSSTtcbiAgICB2YXIgX29iamVjdCA9IHR5cGVvZiBocmVmID09PSAnb2JqZWN0JyAmJiAoaHJlZi5ob3N0bmFtZSB8fCBocmVmLnBhdGggfHwgaHJlZi5wYXRobmFtZSk7XG4gICAgaWYgKGhyZWYubm9kZU5hbWUpIHtcbiAgICAgIHZhciBhdHRyaWJ1dGUgPSBVUkkuZ2V0RG9tQXR0cmlidXRlKGhyZWYpO1xuICAgICAgaHJlZiA9IGhyZWZbYXR0cmlidXRlXSB8fCAnJztcbiAgICAgIF9vYmplY3QgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyB3aW5kb3cubG9jYXRpb24gaXMgcmVwb3J0ZWQgdG8gYmUgYW4gb2JqZWN0LCBidXQgaXQncyBub3QgdGhlIHNvcnRcbiAgICAvLyBvZiBvYmplY3Qgd2UncmUgbG9va2luZyBmb3I6XG4gICAgLy8gKiBsb2NhdGlvbi5wcm90b2NvbCBlbmRzIHdpdGggYSBjb2xvblxuICAgIC8vICogbG9jYXRpb24ucXVlcnkgIT0gb2JqZWN0LnNlYXJjaFxuICAgIC8vICogbG9jYXRpb24uaGFzaCAhPSBvYmplY3QuZnJhZ21lbnRcbiAgICAvLyBzaW1wbHkgc2VyaWFsaXppbmcgdGhlIHVua25vd24gb2JqZWN0IHNob3VsZCBkbyB0aGUgdHJpY2tcbiAgICAvLyAoZm9yIGxvY2F0aW9uLCBub3QgZm9yIGV2ZXJ5dGhpbmcuLi4pXG4gICAgaWYgKCFfVVJJICYmIF9vYmplY3QgJiYgaHJlZi5wYXRobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBocmVmID0gaHJlZi50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaHJlZiA9PT0gJ3N0cmluZycgfHwgaHJlZiBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgdGhpcy5fcGFydHMgPSBVUkkucGFyc2UoU3RyaW5nKGhyZWYpLCB0aGlzLl9wYXJ0cyk7XG4gICAgfSBlbHNlIGlmIChfVVJJIHx8IF9vYmplY3QpIHtcbiAgICAgIHZhciBzcmMgPSBfVVJJID8gaHJlZi5fcGFydHMgOiBocmVmO1xuICAgICAgZm9yIChrZXkgaW4gc3JjKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLl9wYXJ0cywga2V5KSkge1xuICAgICAgICAgIHRoaXMuX3BhcnRzW2tleV0gPSBzcmNba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGlucHV0Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIGlkZW50aWZpY2F0aW9uIGFjY2Vzc29yc1xuICBwLmlzID0gZnVuY3Rpb24od2hhdCkge1xuICAgIHZhciBpcCA9IGZhbHNlO1xuICAgIHZhciBpcDQgPSBmYWxzZTtcbiAgICB2YXIgaXA2ID0gZmFsc2U7XG4gICAgdmFyIG5hbWUgPSBmYWxzZTtcbiAgICB2YXIgc2xkID0gZmFsc2U7XG4gICAgdmFyIGlkbiA9IGZhbHNlO1xuICAgIHZhciBwdW55Y29kZSA9IGZhbHNlO1xuICAgIHZhciByZWxhdGl2ZSA9ICF0aGlzLl9wYXJ0cy51cm47XG5cbiAgICBpZiAodGhpcy5fcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgIHJlbGF0aXZlID0gZmFsc2U7XG4gICAgICBpcDQgPSBVUkkuaXA0X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICBpcDYgPSBVUkkuaXA2X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICBpcCA9IGlwNCB8fCBpcDY7XG4gICAgICBuYW1lID0gIWlwO1xuICAgICAgc2xkID0gbmFtZSAmJiBTTEQgJiYgU0xELmhhcyh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICBpZG4gPSBuYW1lICYmIFVSSS5pZG5fZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICAgIHB1bnljb2RlID0gbmFtZSAmJiBVUkkucHVueWNvZGVfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHdoYXQudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAncmVsYXRpdmUnOlxuICAgICAgICByZXR1cm4gcmVsYXRpdmU7XG5cbiAgICAgIGNhc2UgJ2Fic29sdXRlJzpcbiAgICAgICAgcmV0dXJuICFyZWxhdGl2ZTtcblxuICAgICAgLy8gaG9zdG5hbWUgaWRlbnRpZmljYXRpb25cbiAgICAgIGNhc2UgJ2RvbWFpbic6XG4gICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgcmV0dXJuIG5hbWU7XG5cbiAgICAgIGNhc2UgJ3NsZCc6XG4gICAgICAgIHJldHVybiBzbGQ7XG5cbiAgICAgIGNhc2UgJ2lwJzpcbiAgICAgICAgcmV0dXJuIGlwO1xuXG4gICAgICBjYXNlICdpcDQnOlxuICAgICAgY2FzZSAnaXB2NCc6XG4gICAgICBjYXNlICdpbmV0NCc6XG4gICAgICAgIHJldHVybiBpcDQ7XG5cbiAgICAgIGNhc2UgJ2lwNic6XG4gICAgICBjYXNlICdpcHY2JzpcbiAgICAgIGNhc2UgJ2luZXQ2JzpcbiAgICAgICAgcmV0dXJuIGlwNjtcblxuICAgICAgY2FzZSAnaWRuJzpcbiAgICAgICAgcmV0dXJuIGlkbjtcblxuICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgcmV0dXJuICF0aGlzLl9wYXJ0cy51cm47XG5cbiAgICAgIGNhc2UgJ3Vybic6XG4gICAgICAgIHJldHVybiAhIXRoaXMuX3BhcnRzLnVybjtcblxuICAgICAgY2FzZSAncHVueWNvZGUnOlxuICAgICAgICByZXR1cm4gcHVueWNvZGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gY29tcG9uZW50IHNwZWNpZmljIGlucHV0IHZhbGlkYXRpb25cbiAgdmFyIF9wcm90b2NvbCA9IHAucHJvdG9jb2w7XG4gIHZhciBfcG9ydCA9IHAucG9ydDtcbiAgdmFyIF9ob3N0bmFtZSA9IHAuaG9zdG5hbWU7XG5cbiAgcC5wcm90b2NvbCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHYpIHtcbiAgICAgIC8vIGFjY2VwdCB0cmFpbGluZyA6Ly9cbiAgICAgIHYgPSB2LnJlcGxhY2UoLzooXFwvXFwvKT8kLywgJycpO1xuXG4gICAgICBpZiAoIXYubWF0Y2goVVJJLnByb3RvY29sX2V4cHJlc3Npb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb3RvY29sIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIG9yIGRvZXNuXFwndCBzdGFydCB3aXRoIFtBLVpdJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF9wcm90b2NvbC5jYWxsKHRoaXMsIHYsIGJ1aWxkKTtcbiAgfTtcbiAgcC5zY2hlbWUgPSBwLnByb3RvY29sO1xuICBwLnBvcnQgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHYgPT09IDApIHtcbiAgICAgICAgdiA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh2KSB7XG4gICAgICAgIHYgKz0gJyc7XG4gICAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJzonKSB7XG4gICAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgVVJJLmVuc3VyZVZhbGlkUG9ydCh2KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIF9wb3J0LmNhbGwodGhpcywgdiwgYnVpbGQpO1xuICB9O1xuICBwLmhvc3RuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciB4ID0geyBwcmV2ZW50SW52YWxpZEhvc3RuYW1lOiB0aGlzLl9wYXJ0cy5wcmV2ZW50SW52YWxpZEhvc3RuYW1lIH07XG4gICAgICB2YXIgcmVzID0gVVJJLnBhcnNlSG9zdCh2LCB4KTtcbiAgICAgIGlmIChyZXMgIT09ICcvJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBcIicgKyB2ICsgJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dJyk7XG4gICAgICB9XG5cbiAgICAgIHYgPSB4Lmhvc3RuYW1lO1xuICAgICAgaWYgKHRoaXMuX3BhcnRzLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUpIHtcbiAgICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodiwgdGhpcy5fcGFydHMucHJvdG9jb2wpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfaG9zdG5hbWUuY2FsbCh0aGlzLCB2LCBidWlsZCk7XG4gIH07XG5cbiAgLy8gY29tcG91bmQgYWNjZXNzb3JzXG4gIHAub3JpZ2luID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2woKTtcbiAgICAgIHZhciBhdXRob3JpdHkgPSB0aGlzLmF1dGhvcml0eSgpO1xuICAgICAgaWYgKCFhdXRob3JpdHkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKHByb3RvY29sID8gcHJvdG9jb2wgKyAnOi8vJyA6ICcnKSArIHRoaXMuYXV0aG9yaXR5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBvcmlnaW4gPSBVUkkodik7XG4gICAgICB0aGlzXG4gICAgICAgIC5wcm90b2NvbChvcmlnaW4ucHJvdG9jb2woKSlcbiAgICAgICAgLmF1dGhvcml0eShvcmlnaW4uYXV0aG9yaXR5KCkpXG4gICAgICAgIC5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLmhvc3QgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gVVJJLmJ1aWxkSG9zdCh0aGlzLl9wYXJ0cykgOiAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUhvc3QodiwgdGhpcy5fcGFydHMpO1xuICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLmF1dGhvcml0eSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcztcbiAgICB9XG5cbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUgPyBVUkkuYnVpbGRBdXRob3JpdHkodGhpcy5fcGFydHMpIDogJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByZXMgPSBVUkkucGFyc2VBdXRob3JpdHkodiwgdGhpcy5fcGFydHMpO1xuICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLnVzZXJpbmZvID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciB0ID0gVVJJLmJ1aWxkVXNlcmluZm8odGhpcy5fcGFydHMpO1xuICAgICAgcmV0dXJuIHQgPyB0LnN1YnN0cmluZygwLCB0Lmxlbmd0aCAtMSkgOiB0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodlt2Lmxlbmd0aC0xXSAhPT0gJ0AnKSB7XG4gICAgICAgIHYgKz0gJ0AnO1xuICAgICAgfVxuXG4gICAgICBVUkkucGFyc2VVc2VyaW5mbyh2LCB0aGlzLl9wYXJ0cyk7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAucmVzb3VyY2UgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIHZhciBwYXJ0cztcblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhdGgoKSArIHRoaXMuc2VhcmNoKCkgKyB0aGlzLmhhc2goKTtcbiAgICB9XG5cbiAgICBwYXJ0cyA9IFVSSS5wYXJzZSh2KTtcbiAgICB0aGlzLl9wYXJ0cy5wYXRoID0gcGFydHMucGF0aDtcbiAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IHBhcnRzLnF1ZXJ5O1xuICAgIHRoaXMuX3BhcnRzLmZyYWdtZW50ID0gcGFydHMuZnJhZ21lbnQ7XG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIGZyYWN0aW9uIGFjY2Vzc29yc1xuICBwLnN1YmRvbWFpbiA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcztcbiAgICB9XG5cbiAgICAvLyBjb252ZW5pZW5jZSwgcmV0dXJuIFwid3d3XCIgZnJvbSBcInd3dy5leGFtcGxlLm9yZ1wiXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgLy8gZ3JhYiBkb21haW4gYW5kIGFkZCBhbm90aGVyIHNlZ21lbnRcbiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGggLSB0aGlzLmRvbWFpbigpLmxlbmd0aCAtIDE7XG4gICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGVuZCkgfHwgJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoIC0gdGhpcy5kb21haW4oKS5sZW5ndGg7XG4gICAgICB2YXIgc3ViID0gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGUpO1xuICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKCdeJyArIGVzY2FwZVJlZ0V4KHN1YikpO1xuXG4gICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLicpIHtcbiAgICAgICAgdiArPSAnLic7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmluZGV4T2YoJzonKSAhPT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRG9tYWlucyBjYW5ub3QgY29udGFpbiBjb2xvbnMnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYpIHtcbiAgICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodiwgdGhpcy5fcGFydHMucHJvdG9jb2wpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAuZG9tYWluID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBidWlsZCA9IHY7XG4gICAgICB2ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIGNvbnZlbmllbmNlLCByZXR1cm4gXCJleGFtcGxlLm9yZ1wiIGZyb20gXCJ3d3cuZXhhbXBsZS5vcmdcIlxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIGhvc3RuYW1lIGNvbnNpc3RzIG9mIDEgb3IgMiBzZWdtZW50cywgaXQgbXVzdCBiZSB0aGUgZG9tYWluXG4gICAgICB2YXIgdCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLm1hdGNoKC9cXC4vZyk7XG4gICAgICBpZiAodCAmJiB0Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lO1xuICAgICAgfVxuXG4gICAgICAvLyBncmFiIHRsZCBhbmQgYWRkIGFub3RoZXIgc2VnbWVudFxuICAgICAgdmFyIGVuZCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aCAtIHRoaXMudGxkKGJ1aWxkKS5sZW5ndGggLSAxO1xuICAgICAgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGFzdEluZGV4T2YoJy4nLCBlbmQgLTEpICsgMTtcbiAgICAgIHJldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoZW5kKSB8fCAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF2KSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Nhbm5vdCBzZXQgZG9tYWluIGVtcHR5Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmluZGV4T2YoJzonKSAhPT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRG9tYWlucyBjYW5ub3QgY29udGFpbiBjb2xvbnMnKTtcbiAgICAgIH1cblxuICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodiwgdGhpcy5fcGFydHMucHJvdG9jb2wpO1xuXG4gICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHtcbiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB2O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMuZG9tYWluKCkpICsgJyQnKTtcbiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAudGxkID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBidWlsZCA9IHY7XG4gICAgICB2ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIHJldHVybiBcIm9yZ1wiIGZyb20gXCJ3d3cuZXhhbXBsZS5vcmdcIlxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHZhciBwb3MgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sYXN0SW5kZXhPZignLicpO1xuICAgICAgdmFyIHRsZCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhwb3MgKyAxKTtcblxuICAgICAgaWYgKGJ1aWxkICE9PSB0cnVlICYmIFNMRCAmJiBTTEQubGlzdFt0bGQudG9Mb3dlckNhc2UoKV0pIHtcbiAgICAgICAgcmV0dXJuIFNMRC5nZXQodGhpcy5fcGFydHMuaG9zdG5hbWUpIHx8IHRsZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRsZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJlcGxhY2U7XG5cbiAgICAgIGlmICghdikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjYW5ub3Qgc2V0IFRMRCBlbXB0eScpO1xuICAgICAgfSBlbHNlIGlmICh2Lm1hdGNoKC9bXmEtekEtWjAtOS1dLykpIHtcbiAgICAgICAgaWYgKFNMRCAmJiBTTEQuaXModikpIHtcbiAgICAgICAgICByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCh0aGlzLnRsZCgpKSArICckJyk7XG4gICAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RMRCBcIicgKyB2ICsgJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05XScpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7XG4gICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignY2Fubm90IHNldCBUTEQgb24gbm9uLWRvbWFpbiBob3N0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCh0aGlzLnRsZCgpKSArICckJyk7XG4gICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLmRpcmVjdG9yeSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcztcbiAgICB9XG5cbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMucGF0aCAmJiAhdGhpcy5fcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7XG4gICAgICAgIHJldHVybiAnLyc7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGggLSAxO1xuICAgICAgdmFyIHJlcyA9IHRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKDAsIGVuZCkgfHwgKHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gJy8nIDogJycpO1xuXG4gICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoKHJlcykgOiByZXM7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGUgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGg7XG4gICAgICB2YXIgZGlyZWN0b3J5ID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCwgZSk7XG4gICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoJ14nICsgZXNjYXBlUmVnRXgoZGlyZWN0b3J5KSk7XG5cbiAgICAgIC8vIGZ1bGx5IHF1YWxpZmllciBkaXJlY3RvcmllcyBiZWdpbiB3aXRoIGEgc2xhc2hcbiAgICAgIGlmICghdGhpcy5pcygncmVsYXRpdmUnKSkge1xuICAgICAgICBpZiAoIXYpIHtcbiAgICAgICAgICB2ID0gJy8nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHYuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICB2ID0gJy8nICsgdjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBkaXJlY3RvcmllcyBhbHdheXMgZW5kIHdpdGggYSBzbGFzaFxuICAgICAgaWYgKHYgJiYgdi5jaGFyQXQodi5sZW5ndGggLSAxKSAhPT0gJy8nKSB7XG4gICAgICAgIHYgKz0gJy8nO1xuICAgICAgfVxuXG4gICAgICB2ID0gVVJJLnJlY29kZVBhdGgodik7XG4gICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLmZpbGVuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMucGF0aCB8fCB0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICB2YXIgcG9zID0gdGhpcy5fcGFydHMucGF0aC5sYXN0SW5kZXhPZignLycpO1xuICAgICAgdmFyIHJlcyA9IHRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKHBvcysxKTtcblxuICAgICAgcmV0dXJuIHYgPyBVUkkuZGVjb2RlUGF0aFNlZ21lbnQocmVzKSA6IHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG11dGF0ZWREaXJlY3RvcnkgPSBmYWxzZTtcblxuICAgICAgaWYgKHYuY2hhckF0KDApID09PSAnLycpIHtcbiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAodi5tYXRjaCgvXFwuP1xcLy8pKSB7XG4gICAgICAgIG11dGF0ZWREaXJlY3RvcnkgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy5maWxlbmFtZSgpKSArICckJyk7XG4gICAgICB2ID0gVVJJLnJlY29kZVBhdGgodik7XG4gICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuXG4gICAgICBpZiAobXV0YXRlZERpcmVjdG9yeSkge1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZVBhdGgoYnVpbGQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAuc3VmZml4ID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5wYXRoIHx8IHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHZhciBmaWxlbmFtZSA9IHRoaXMuZmlsZW5hbWUoKTtcbiAgICAgIHZhciBwb3MgPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpO1xuICAgICAgdmFyIHMsIHJlcztcblxuICAgICAgaWYgKHBvcyA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICAvLyBzdWZmaXggbWF5IG9ubHkgY29udGFpbiBhbG51bSBjaGFyYWN0ZXJzICh5dXAsIEkgbWFkZSB0aGlzIHVwLilcbiAgICAgIHMgPSBmaWxlbmFtZS5zdWJzdHJpbmcocG9zKzEpO1xuICAgICAgcmVzID0gKC9eW2EtejAtOSVdKyQvaSkudGVzdChzKSA/IHMgOiAnJztcbiAgICAgIHJldHVybiB2ID8gVVJJLmRlY29kZVBhdGhTZWdtZW50KHJlcykgOiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJy4nKSB7XG4gICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN1ZmZpeCA9IHRoaXMuc3VmZml4KCk7XG4gICAgICB2YXIgcmVwbGFjZTtcblxuICAgICAgaWYgKCFzdWZmaXgpIHtcbiAgICAgICAgaWYgKCF2KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wYXJ0cy5wYXRoICs9ICcuJyArIFVSSS5yZWNvZGVQYXRoKHYpO1xuICAgICAgfSBlbHNlIGlmICghdikge1xuICAgICAgICByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCgnLicgKyBzdWZmaXgpICsgJyQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHN1ZmZpeCkgKyAnJCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICB2ID0gVVJJLnJlY29kZVBhdGgodik7XG4gICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB0aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UocmVwbGFjZSwgdik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgcC5zZWdtZW50ID0gZnVuY3Rpb24oc2VnbWVudCwgdiwgYnVpbGQpIHtcbiAgICB2YXIgc2VwYXJhdG9yID0gdGhpcy5fcGFydHMudXJuID8gJzonIDogJy8nO1xuICAgIHZhciBwYXRoID0gdGhpcy5wYXRoKCk7XG4gICAgdmFyIGFic29sdXRlID0gcGF0aC5zdWJzdHJpbmcoMCwgMSkgPT09ICcvJztcbiAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KHNlcGFyYXRvcik7XG5cbiAgICBpZiAoc2VnbWVudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzZWdtZW50ICE9PSAnbnVtYmVyJykge1xuICAgICAgYnVpbGQgPSB2O1xuICAgICAgdiA9IHNlZ21lbnQ7XG4gICAgICBzZWdtZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHNlZ21lbnQgIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCBzZWdtZW50IFwiJyArIHNlZ21lbnQgKyAnXCIsIG11c3QgYmUgMC1iYXNlZCBpbnRlZ2VyJyk7XG4gICAgfVxuXG4gICAgaWYgKGFic29sdXRlKSB7XG4gICAgICBzZWdtZW50cy5zaGlmdCgpO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50IDwgMCkge1xuICAgICAgLy8gYWxsb3cgbmVnYXRpdmUgaW5kZXhlcyB0byBhZGRyZXNzIGZyb20gdGhlIGVuZFxuICAgICAgc2VnbWVudCA9IE1hdGgubWF4KHNlZ21lbnRzLmxlbmd0aCArIHNlZ21lbnQsIDApO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8qanNoaW50IGxheGJyZWFrOiB0cnVlICovXG4gICAgICByZXR1cm4gc2VnbWVudCA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gc2VnbWVudHNcbiAgICAgICAgOiBzZWdtZW50c1tzZWdtZW50XTtcbiAgICAgIC8qanNoaW50IGxheGJyZWFrOiBmYWxzZSAqL1xuICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gbnVsbCB8fCBzZWdtZW50c1tzZWdtZW50XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoaXNBcnJheSh2KSkge1xuICAgICAgICBzZWdtZW50cyA9IFtdO1xuICAgICAgICAvLyBjb2xsYXBzZSBlbXB0eSBlbGVtZW50cyB3aXRoaW4gYXJyYXlcbiAgICAgICAgZm9yICh2YXIgaT0wLCBsPXYubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCF2W2ldLmxlbmd0aCAmJiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXS5sZW5ndGgpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VnbWVudHMubGVuZ3RoICYmICFzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLTFdLmxlbmd0aCkge1xuICAgICAgICAgICAgc2VnbWVudHMucG9wKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VnbWVudHMucHVzaCh0cmltU2xhc2hlcyh2W2ldKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodiB8fCB0eXBlb2YgdiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdiA9IHRyaW1TbGFzaGVzKHYpO1xuICAgICAgICBpZiAoc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9PT0gJycpIHtcbiAgICAgICAgICAvLyBlbXB0eSB0cmFpbGluZyBlbGVtZW50cyBoYXZlIHRvIGJlIG92ZXJ3cml0dGVuXG4gICAgICAgICAgLy8gdG8gcHJldmVudCByZXN1bHRzIHN1Y2ggYXMgL2Zvby8vYmFyXG4gICAgICAgICAgc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9IHY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VnbWVudHMucHVzaCh2KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodikge1xuICAgICAgICBzZWdtZW50c1tzZWdtZW50XSA9IHRyaW1TbGFzaGVzKHYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VnbWVudHMuc3BsaWNlKHNlZ21lbnQsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhYnNvbHV0ZSkge1xuICAgICAgc2VnbWVudHMudW5zaGlmdCgnJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGF0aChzZWdtZW50cy5qb2luKHNlcGFyYXRvciksIGJ1aWxkKTtcbiAgfTtcbiAgcC5zZWdtZW50Q29kZWQgPSBmdW5jdGlvbihzZWdtZW50LCB2LCBidWlsZCkge1xuICAgIHZhciBzZWdtZW50cywgaSwgbDtcblxuICAgIGlmICh0eXBlb2Ygc2VnbWVudCAhPT0gJ251bWJlcicpIHtcbiAgICAgIGJ1aWxkID0gdjtcbiAgICAgIHYgPSBzZWdtZW50O1xuICAgICAgc2VnbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZWdtZW50cyA9IHRoaXMuc2VnbWVudChzZWdtZW50LCB2LCBidWlsZCk7XG4gICAgICBpZiAoIWlzQXJyYXkoc2VnbWVudHMpKSB7XG4gICAgICAgIHNlZ21lbnRzID0gc2VnbWVudHMgIT09IHVuZGVmaW5lZCA/IFVSSS5kZWNvZGUoc2VnbWVudHMpIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHNlZ21lbnRzW2ldID0gVVJJLmRlY29kZShzZWdtZW50c1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIGlmICghaXNBcnJheSh2KSkge1xuICAgICAgdiA9ICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgfHwgdiBpbnN0YW5jZW9mIFN0cmluZykgPyBVUkkuZW5jb2RlKHYpIDogdjtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gMCwgbCA9IHYubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZbaV0gPSBVUkkuZW5jb2RlKHZbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlZ21lbnQoc2VnbWVudCwgdiwgYnVpbGQpO1xuICB9O1xuXG4gIC8vIG11dGF0aW5nIHF1ZXJ5IHN0cmluZ1xuICB2YXIgcSA9IHAucXVlcnk7XG4gIHAucXVlcnkgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh2ID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgICAgdmFyIHJlc3VsdCA9IHYuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkocmVzdWx0IHx8IGRhdGEsIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKHYgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkodiwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcS5jYWxsKHRoaXMsIHYsIGJ1aWxkKTtcbiAgICB9XG4gIH07XG4gIHAuc2V0UXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYnVpbGQpIHtcbiAgICB2YXIgZGF0YSA9IFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcblxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgfHwgbmFtZSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgZGF0YVtuYW1lXSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IG51bGw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7XG4gICAgICAgICAgZGF0YVtrZXldID0gbmFtZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGJ1aWxkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLmFkZFF1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGJ1aWxkKSB7XG4gICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWUpO1xuICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkoZGF0YSwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICBidWlsZCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcC5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBidWlsZCkge1xuICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIFVSSS5yZW1vdmVRdWVyeShkYXRhLCBuYW1lLCB2YWx1ZSk7XG4gICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGJ1aWxkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLmhhc1F1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIHdpdGhpbkFycmF5KSB7XG4gICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgcmV0dXJuIFVSSS5oYXNRdWVyeShkYXRhLCBuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpO1xuICB9O1xuICBwLnNldFNlYXJjaCA9IHAuc2V0UXVlcnk7XG4gIHAuYWRkU2VhcmNoID0gcC5hZGRRdWVyeTtcbiAgcC5yZW1vdmVTZWFyY2ggPSBwLnJlbW92ZVF1ZXJ5O1xuICBwLmhhc1NlYXJjaCA9IHAuaGFzUXVlcnk7XG5cbiAgLy8gc2FuaXRpemluZyBVUkxzXG4gIHAubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKVxuICAgICAgICAubm9ybWFsaXplUGF0aChmYWxzZSlcbiAgICAgICAgLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKVxuICAgICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpXG4gICAgICAgIC5idWlsZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gICAgICAubm9ybWFsaXplUHJvdG9jb2woZmFsc2UpXG4gICAgICAubm9ybWFsaXplSG9zdG5hbWUoZmFsc2UpXG4gICAgICAubm9ybWFsaXplUG9ydChmYWxzZSlcbiAgICAgIC5ub3JtYWxpemVQYXRoKGZhbHNlKVxuICAgICAgLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKVxuICAgICAgLm5vcm1hbGl6ZUZyYWdtZW50KGZhbHNlKVxuICAgICAgLmJ1aWxkKCk7XG4gIH07XG4gIHAubm9ybWFsaXplUHJvdG9jb2wgPSBmdW5jdGlvbihidWlsZCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fcGFydHMucHJvdG9jb2wgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9IHRoaXMuX3BhcnRzLnByb3RvY29sLnRvTG93ZXJDYXNlKCk7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHAubm9ybWFsaXplSG9zdG5hbWUgPSBmdW5jdGlvbihidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy5ob3N0bmFtZSkge1xuICAgICAgaWYgKHRoaXMuaXMoJ0lETicpICYmIHB1bnljb2RlKSB7XG4gICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXMoJ0lQdjYnKSAmJiBJUHY2KSB7XG4gICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gSVB2Ni5iZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLm5vcm1hbGl6ZVBvcnQgPSBmdW5jdGlvbihidWlsZCkge1xuICAgIC8vIHJlbW92ZSBwb3J0IG9mIGl0J3MgdGhlIHByb3RvY29sJ3MgZGVmYXVsdFxuICAgIGlmICh0eXBlb2YgdGhpcy5fcGFydHMucHJvdG9jb2wgPT09ICdzdHJpbmcnICYmIHRoaXMuX3BhcnRzLnBvcnQgPT09IFVSSS5kZWZhdWx0UG9ydHNbdGhpcy5fcGFydHMucHJvdG9jb2xdKSB7XG4gICAgICB0aGlzLl9wYXJ0cy5wb3J0ID0gbnVsbDtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcC5ub3JtYWxpemVQYXRoID0gZnVuY3Rpb24oYnVpbGQpIHtcbiAgICB2YXIgX3BhdGggPSB0aGlzLl9wYXJ0cy5wYXRoO1xuICAgIGlmICghX3BhdGgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSBVUkkucmVjb2RlVXJuUGF0aCh0aGlzLl9wYXJ0cy5wYXRoKTtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIF9wYXRoID0gVVJJLnJlY29kZVBhdGgoX3BhdGgpO1xuXG4gICAgdmFyIF93YXNfcmVsYXRpdmU7XG4gICAgdmFyIF9sZWFkaW5nUGFyZW50cyA9ICcnO1xuICAgIHZhciBfcGFyZW50LCBfcG9zO1xuXG4gICAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzXG4gICAgaWYgKF9wYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBfd2FzX3JlbGF0aXZlID0gdHJ1ZTtcbiAgICAgIF9wYXRoID0gJy8nICsgX3BhdGg7XG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIHJlbGF0aXZlIGZpbGVzIChhcyBvcHBvc2VkIHRvIGRpcmVjdG9yaWVzKVxuICAgIGlmIChfcGF0aC5zbGljZSgtMykgPT09ICcvLi4nIHx8IF9wYXRoLnNsaWNlKC0yKSA9PT0gJy8uJykge1xuICAgICAgX3BhdGggKz0gJy8nO1xuICAgIH1cblxuICAgIC8vIHJlc29sdmUgc2ltcGxlc1xuICAgIF9wYXRoID0gX3BhdGhcbiAgICAgIC5yZXBsYWNlKC8oXFwvKFxcLlxcLykrKXwoXFwvXFwuJCkvZywgJy8nKVxuICAgICAgLnJlcGxhY2UoL1xcL3syLH0vZywgJy8nKTtcblxuICAgIC8vIHJlbWVtYmVyIGxlYWRpbmcgcGFyZW50c1xuICAgIGlmIChfd2FzX3JlbGF0aXZlKSB7XG4gICAgICBfbGVhZGluZ1BhcmVudHMgPSBfcGF0aC5zdWJzdHJpbmcoMSkubWF0Y2goL14oXFwuXFwuXFwvKSsvKSB8fCAnJztcbiAgICAgIGlmIChfbGVhZGluZ1BhcmVudHMpIHtcbiAgICAgICAgX2xlYWRpbmdQYXJlbnRzID0gX2xlYWRpbmdQYXJlbnRzWzBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlc29sdmUgcGFyZW50c1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBfcGFyZW50ID0gX3BhdGguc2VhcmNoKC9cXC9cXC5cXC4oXFwvfCQpLyk7XG4gICAgICBpZiAoX3BhcmVudCA9PT0gLTEpIHtcbiAgICAgICAgLy8gbm8gbW9yZSAuLi8gdG8gcmVzb2x2ZVxuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAoX3BhcmVudCA9PT0gMCkge1xuICAgICAgICAvLyB0b3AgbGV2ZWwgY2Fubm90IGJlIHJlbGF0aXZlLCBza2lwIGl0XG4gICAgICAgIF9wYXRoID0gX3BhdGguc3Vic3RyaW5nKDMpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgX3BvcyA9IF9wYXRoLnN1YnN0cmluZygwLCBfcGFyZW50KS5sYXN0SW5kZXhPZignLycpO1xuICAgICAgaWYgKF9wb3MgPT09IC0xKSB7XG4gICAgICAgIF9wb3MgPSBfcGFyZW50O1xuICAgICAgfVxuICAgICAgX3BhdGggPSBfcGF0aC5zdWJzdHJpbmcoMCwgX3BvcykgKyBfcGF0aC5zdWJzdHJpbmcoX3BhcmVudCArIDMpO1xuICAgIH1cblxuICAgIC8vIHJldmVydCB0byByZWxhdGl2ZVxuICAgIGlmIChfd2FzX3JlbGF0aXZlICYmIHRoaXMuaXMoJ3JlbGF0aXZlJykpIHtcbiAgICAgIF9wYXRoID0gX2xlYWRpbmdQYXJlbnRzICsgX3BhdGguc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIHRoaXMuX3BhcnRzLnBhdGggPSBfcGF0aDtcbiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHAubm9ybWFsaXplUGF0aG5hbWUgPSBwLm5vcm1hbGl6ZVBhdGg7XG4gIHAubm9ybWFsaXplUXVlcnkgPSBmdW5jdGlvbihidWlsZCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fcGFydHMucXVlcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoIXRoaXMuX3BhcnRzLnF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1ZXJ5KFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcC5ub3JtYWxpemVGcmFnbWVudCA9IGZ1bmN0aW9uKGJ1aWxkKSB7XG4gICAgaWYgKCF0aGlzLl9wYXJ0cy5mcmFnbWVudCkge1xuICAgICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLm5vcm1hbGl6ZVNlYXJjaCA9IHAubm9ybWFsaXplUXVlcnk7XG4gIHAubm9ybWFsaXplSGFzaCA9IHAubm9ybWFsaXplRnJhZ21lbnQ7XG5cbiAgcC5pc284ODU5ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gZXhwZWN0IHVuaWNvZGUgaW5wdXQsIGlzbzg4NTkgb3V0cHV0XG4gICAgdmFyIGUgPSBVUkkuZW5jb2RlO1xuICAgIHZhciBkID0gVVJJLmRlY29kZTtcblxuICAgIFVSSS5lbmNvZGUgPSBlc2NhcGU7XG4gICAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDtcbiAgICB0cnkge1xuICAgICAgdGhpcy5ub3JtYWxpemUoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgVVJJLmVuY29kZSA9IGU7XG4gICAgICBVUkkuZGVjb2RlID0gZDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC51bmljb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gZXhwZWN0IGlzbzg4NTkgaW5wdXQsIHVuaWNvZGUgb3V0cHV0XG4gICAgdmFyIGUgPSBVUkkuZW5jb2RlO1xuICAgIHZhciBkID0gVVJJLmRlY29kZTtcblxuICAgIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7XG4gICAgVVJJLmRlY29kZSA9IHVuZXNjYXBlO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBVUkkuZW5jb2RlID0gZTtcbiAgICAgIFVSSS5kZWNvZGUgPSBkO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBwLnJlYWRhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVyaSA9IHRoaXMuY2xvbmUoKTtcbiAgICAvLyByZW1vdmluZyB1c2VybmFtZSwgcGFzc3dvcmQsIGJlY2F1c2UgdGhleSBzaG91bGRuJ3QgYmUgZGlzcGxheWVkIGFjY29yZGluZyB0byBSRkMgMzk4NlxuICAgIHVyaS51c2VybmFtZSgnJykucGFzc3dvcmQoJycpLm5vcm1hbGl6ZSgpO1xuICAgIHZhciB0ID0gJyc7XG4gICAgaWYgKHVyaS5fcGFydHMucHJvdG9jb2wpIHtcbiAgICAgIHQgKz0gdXJpLl9wYXJ0cy5wcm90b2NvbCArICc6Ly8nO1xuICAgIH1cblxuICAgIGlmICh1cmkuX3BhcnRzLmhvc3RuYW1lKSB7XG4gICAgICBpZiAodXJpLmlzKCdwdW55Y29kZScpICYmIHB1bnljb2RlKSB7XG4gICAgICAgIHQgKz0gcHVueWNvZGUudG9Vbmljb2RlKHVyaS5fcGFydHMuaG9zdG5hbWUpO1xuICAgICAgICBpZiAodXJpLl9wYXJ0cy5wb3J0KSB7XG4gICAgICAgICAgdCArPSAnOicgKyB1cmkuX3BhcnRzLnBvcnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHQgKz0gdXJpLmhvc3QoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXJpLl9wYXJ0cy5ob3N0bmFtZSAmJiB1cmkuX3BhcnRzLnBhdGggJiYgdXJpLl9wYXJ0cy5wYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICB0ICs9ICcvJztcbiAgICB9XG5cbiAgICB0ICs9IHVyaS5wYXRoKHRydWUpO1xuICAgIGlmICh1cmkuX3BhcnRzLnF1ZXJ5KSB7XG4gICAgICB2YXIgcSA9ICcnO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIHFwID0gdXJpLl9wYXJ0cy5xdWVyeS5zcGxpdCgnJicpLCBsID0gcXAubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBrdiA9IChxcFtpXSB8fCAnJykuc3BsaXQoJz0nKTtcbiAgICAgICAgcSArPSAnJicgKyBVUkkuZGVjb2RlUXVlcnkoa3ZbMF0sIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpXG4gICAgICAgICAgLnJlcGxhY2UoLyYvZywgJyUyNicpO1xuXG4gICAgICAgIGlmIChrdlsxXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcSArPSAnPScgKyBVUkkuZGVjb2RlUXVlcnkoa3ZbMV0sIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpXG4gICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJTI2Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHQgKz0gJz8nICsgcS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgdCArPSBVUkkuZGVjb2RlUXVlcnkodXJpLmhhc2goKSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHQ7XG4gIH07XG5cbiAgLy8gcmVzb2x2aW5nIHJlbGF0aXZlIGFuZCBhYnNvbHV0ZSBVUkxzXG4gIHAuYWJzb2x1dGVUbyA9IGZ1bmN0aW9uKGJhc2UpIHtcbiAgICB2YXIgcmVzb2x2ZWQgPSB0aGlzLmNsb25lKCk7XG4gICAgdmFyIHByb3BlcnRpZXMgPSBbJ3Byb3RvY29sJywgJ3VzZXJuYW1lJywgJ3Bhc3N3b3JkJywgJ2hvc3RuYW1lJywgJ3BvcnQnXTtcbiAgICB2YXIgYmFzZWRpciwgaSwgcDtcblxuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVVJOcyBkbyBub3QgaGF2ZSBhbnkgZ2VuZXJhbGx5IGRlZmluZWQgaGllcmFyY2hpY2FsIGNvbXBvbmVudHMnKTtcbiAgICB9XG5cbiAgICBpZiAoIShiYXNlIGluc3RhbmNlb2YgVVJJKSkge1xuICAgICAgYmFzZSA9IG5ldyBVUkkoYmFzZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlc29sdmVkLl9wYXJ0cy5wcm90b2NvbCkge1xuICAgICAgLy8gRGlyZWN0bHkgcmV0dXJucyBldmVuIGlmIHRoaXMuX3BhcnRzLmhvc3RuYW1lIGlzIGVtcHR5LlxuICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlZC5fcGFydHMucHJvdG9jb2wgPSBiYXNlLl9wYXJ0cy5wcm90b2NvbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlZDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyAocCA9IHByb3BlcnRpZXNbaV0pOyBpKyspIHtcbiAgICAgIHJlc29sdmVkLl9wYXJ0c1twXSA9IGJhc2UuX3BhcnRzW3BdO1xuICAgIH1cblxuICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnBhdGgpIHtcbiAgICAgIHJlc29sdmVkLl9wYXJ0cy5wYXRoID0gYmFzZS5fcGFydHMucGF0aDtcbiAgICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5KSB7XG4gICAgICAgIHJlc29sdmVkLl9wYXJ0cy5xdWVyeSA9IGJhc2UuX3BhcnRzLnF1ZXJ5O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocmVzb2x2ZWQuX3BhcnRzLnBhdGguc3Vic3RyaW5nKC0yKSA9PT0gJy4uJykge1xuICAgICAgICByZXNvbHZlZC5fcGFydHMucGF0aCArPSAnLyc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNvbHZlZC5wYXRoKCkuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgYmFzZWRpciA9IGJhc2UuZGlyZWN0b3J5KCk7XG4gICAgICAgIGJhc2VkaXIgPSBiYXNlZGlyID8gYmFzZWRpciA6IGJhc2UucGF0aCgpLmluZGV4T2YoJy8nKSA9PT0gMCA/ICcvJyA6ICcnO1xuICAgICAgICByZXNvbHZlZC5fcGFydHMucGF0aCA9IChiYXNlZGlyID8gKGJhc2VkaXIgKyAnLycpIDogJycpICsgcmVzb2x2ZWQuX3BhcnRzLnBhdGg7XG4gICAgICAgIHJlc29sdmVkLm5vcm1hbGl6ZVBhdGgoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXNvbHZlZC5idWlsZCgpO1xuICAgIHJldHVybiByZXNvbHZlZDtcbiAgfTtcbiAgcC5yZWxhdGl2ZVRvID0gZnVuY3Rpb24oYmFzZSkge1xuICAgIHZhciByZWxhdGl2ZSA9IHRoaXMuY2xvbmUoKS5ub3JtYWxpemUoKTtcbiAgICB2YXIgcmVsYXRpdmVQYXJ0cywgYmFzZVBhcnRzLCBjb21tb24sIHJlbGF0aXZlUGF0aCwgYmFzZVBhdGg7XG5cbiAgICBpZiAocmVsYXRpdmUuX3BhcnRzLnVybikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpO1xuICAgIH1cblxuICAgIGJhc2UgPSBuZXcgVVJJKGJhc2UpLm5vcm1hbGl6ZSgpO1xuICAgIHJlbGF0aXZlUGFydHMgPSByZWxhdGl2ZS5fcGFydHM7XG4gICAgYmFzZVBhcnRzID0gYmFzZS5fcGFydHM7XG4gICAgcmVsYXRpdmVQYXRoID0gcmVsYXRpdmUucGF0aCgpO1xuICAgIGJhc2VQYXRoID0gYmFzZS5wYXRoKCk7XG5cbiAgICBpZiAocmVsYXRpdmVQYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSSSBpcyBhbHJlYWR5IHJlbGF0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKGJhc2VQYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjYWxjdWxhdGUgYSBVUkkgcmVsYXRpdmUgdG8gYW5vdGhlciByZWxhdGl2ZSBVUkknKTtcbiAgICB9XG5cbiAgICBpZiAocmVsYXRpdmVQYXJ0cy5wcm90b2NvbCA9PT0gYmFzZVBhcnRzLnByb3RvY29sKSB7XG4gICAgICByZWxhdGl2ZVBhcnRzLnByb3RvY29sID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAocmVsYXRpdmVQYXJ0cy51c2VybmFtZSAhPT0gYmFzZVBhcnRzLnVzZXJuYW1lIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IGJhc2VQYXJ0cy5wYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7XG4gICAgfVxuXG4gICAgaWYgKHJlbGF0aXZlUGFydHMucHJvdG9jb2wgIT09IG51bGwgfHwgcmVsYXRpdmVQYXJ0cy51c2VybmFtZSAhPT0gbnVsbCB8fCByZWxhdGl2ZVBhcnRzLnBhc3N3b3JkICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTtcbiAgICB9XG5cbiAgICBpZiAocmVsYXRpdmVQYXJ0cy5ob3N0bmFtZSA9PT0gYmFzZVBhcnRzLmhvc3RuYW1lICYmIHJlbGF0aXZlUGFydHMucG9ydCA9PT0gYmFzZVBhcnRzLnBvcnQpIHtcbiAgICAgIHJlbGF0aXZlUGFydHMuaG9zdG5hbWUgPSBudWxsO1xuICAgICAgcmVsYXRpdmVQYXJ0cy5wb3J0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7XG4gICAgfVxuXG4gICAgaWYgKHJlbGF0aXZlUGF0aCA9PT0gYmFzZVBhdGgpIHtcbiAgICAgIHJlbGF0aXZlUGFydHMucGF0aCA9ICcnO1xuICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7XG4gICAgfVxuXG4gICAgLy8gZGV0ZXJtaW5lIGNvbW1vbiBzdWIgcGF0aFxuICAgIGNvbW1vbiA9IFVSSS5jb21tb25QYXRoKHJlbGF0aXZlUGF0aCwgYmFzZVBhdGgpO1xuXG4gICAgLy8gSWYgdGhlIHBhdGhzIGhhdmUgbm90aGluZyBpbiBjb21tb24sIHJldHVybiBhIHJlbGF0aXZlIFVSTCB3aXRoIHRoZSBhYnNvbHV0ZSBwYXRoLlxuICAgIGlmICghY29tbW9uKSB7XG4gICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTtcbiAgICB9XG5cbiAgICB2YXIgcGFyZW50cyA9IGJhc2VQYXJ0cy5wYXRoXG4gICAgICAuc3Vic3RyaW5nKGNvbW1vbi5sZW5ndGgpXG4gICAgICAucmVwbGFjZSgvW15cXC9dKiQvLCAnJylcbiAgICAgIC5yZXBsYWNlKC8uKj9cXC8vZywgJy4uLycpO1xuXG4gICAgcmVsYXRpdmVQYXJ0cy5wYXRoID0gKHBhcmVudHMgKyByZWxhdGl2ZVBhcnRzLnBhdGguc3Vic3RyaW5nKGNvbW1vbi5sZW5ndGgpKSB8fCAnLi8nO1xuXG4gICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7XG4gIH07XG5cbiAgLy8gY29tcGFyaW5nIFVSSXNcbiAgcC5lcXVhbHMgPSBmdW5jdGlvbih1cmkpIHtcbiAgICB2YXIgb25lID0gdGhpcy5jbG9uZSgpO1xuICAgIHZhciB0d28gPSBuZXcgVVJJKHVyaSk7XG4gICAgdmFyIG9uZV9tYXAgPSB7fTtcbiAgICB2YXIgdHdvX21hcCA9IHt9O1xuICAgIHZhciBjaGVja2VkID0ge307XG4gICAgdmFyIG9uZV9xdWVyeSwgdHdvX3F1ZXJ5LCBrZXk7XG5cbiAgICBvbmUubm9ybWFsaXplKCk7XG4gICAgdHdvLm5vcm1hbGl6ZSgpO1xuXG4gICAgLy8gZXhhY3QgbWF0Y2hcbiAgICBpZiAob25lLnRvU3RyaW5nKCkgPT09IHR3by50b1N0cmluZygpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBleHRyYWN0IHF1ZXJ5IHN0cmluZ1xuICAgIG9uZV9xdWVyeSA9IG9uZS5xdWVyeSgpO1xuICAgIHR3b19xdWVyeSA9IHR3by5xdWVyeSgpO1xuICAgIG9uZS5xdWVyeSgnJyk7XG4gICAgdHdvLnF1ZXJ5KCcnKTtcblxuICAgIC8vIGRlZmluaXRlbHkgbm90IGVxdWFsIGlmIG5vdCBldmVuIG5vbi1xdWVyeSBwYXJ0cyBtYXRjaFxuICAgIGlmIChvbmUudG9TdHJpbmcoKSAhPT0gdHdvLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBxdWVyeSBwYXJhbWV0ZXJzIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLCBldmVuIGlmIHRoZXkncmUgcGVybXV0ZWRcbiAgICBpZiAob25lX3F1ZXJ5Lmxlbmd0aCAhPT0gdHdvX3F1ZXJ5Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIG9uZV9tYXAgPSBVUkkucGFyc2VRdWVyeShvbmVfcXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIHR3b19tYXAgPSBVUkkucGFyc2VRdWVyeSh0d29fcXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuXG4gICAgZm9yIChrZXkgaW4gb25lX21hcCkge1xuICAgICAgaWYgKGhhc093bi5jYWxsKG9uZV9tYXAsIGtleSkpIHtcbiAgICAgICAgaWYgKCFpc0FycmF5KG9uZV9tYXBba2V5XSkpIHtcbiAgICAgICAgICBpZiAob25lX21hcFtrZXldICE9PSB0d29fbWFwW2tleV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWFycmF5c0VxdWFsKG9uZV9tYXBba2V5XSwgdHdvX21hcFtrZXldKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoZWNrZWRba2V5XSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChrZXkgaW4gdHdvX21hcCkge1xuICAgICAgaWYgKGhhc093bi5jYWxsKHR3b19tYXAsIGtleSkpIHtcbiAgICAgICAgaWYgKCFjaGVja2VkW2tleV0pIHtcbiAgICAgICAgICAvLyB0d28gY29udGFpbnMgYSBwYXJhbWV0ZXIgbm90IHByZXNlbnQgaW4gb25lXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gc3RhdGVcbiAgcC5wcmV2ZW50SW52YWxpZEhvc3RuYW1lID0gZnVuY3Rpb24odikge1xuICAgIHRoaXMuX3BhcnRzLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUgPSAhIXY7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMgPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzID0gISF2O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHAuZXNjYXBlUXVlcnlTcGFjZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlID0gISF2O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBVUkk7XG59KSk7XG4iLCIvKiEgaHR0cHM6Ly9tdGhzLmJlL3B1bnljb2RlIHYxLjQuMCBieSBAbWF0aGlhcyAqL1xuOyhmdW5jdGlvbihyb290KSB7XG5cblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlcyAqL1xuXHR2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmXG5cdFx0IWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblx0dmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdCFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXHR2YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsO1xuXHRpZiAoXG5cdFx0ZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdGZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbFxuXHQpIHtcblx0XHRyb290ID0gZnJlZUdsb2JhbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYHB1bnljb2RlYCBvYmplY3QuXG5cdCAqIEBuYW1lIHB1bnljb2RlXG5cdCAqIEB0eXBlIE9iamVjdFxuXHQgKi9cblx0dmFyIHB1bnljb2RlLFxuXG5cdC8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi9cblx0bWF4SW50ID0gMjE0NzQ4MzY0NywgLy8gYWthLiAweDdGRkZGRkZGIG9yIDJeMzEtMVxuXG5cdC8qKiBCb290c3RyaW5nIHBhcmFtZXRlcnMgKi9cblx0YmFzZSA9IDM2LFxuXHR0TWluID0gMSxcblx0dE1heCA9IDI2LFxuXHRza2V3ID0gMzgsXG5cdGRhbXAgPSA3MDAsXG5cdGluaXRpYWxCaWFzID0gNzIsXG5cdGluaXRpYWxOID0gMTI4LCAvLyAweDgwXG5cdGRlbGltaXRlciA9ICctJywgLy8gJ1xceDJEJ1xuXG5cdC8qKiBSZWd1bGFyIGV4cHJlc3Npb25zICovXG5cdHJlZ2V4UHVueWNvZGUgPSAvXnhuLS0vLFxuXHRyZWdleE5vbkFTQ0lJID0gL1teXFx4MjAtXFx4N0VdLywgLy8gdW5wcmludGFibGUgQVNDSUkgY2hhcnMgKyBub24tQVNDSUkgY2hhcnNcblx0cmVnZXhTZXBhcmF0b3JzID0gL1tcXHgyRVxcdTMwMDJcXHVGRjBFXFx1RkY2MV0vZywgLy8gUkZDIDM0OTAgc2VwYXJhdG9yc1xuXG5cdC8qKiBFcnJvciBtZXNzYWdlcyAqL1xuXHRlcnJvcnMgPSB7XG5cdFx0J292ZXJmbG93JzogJ092ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzJyxcblx0XHQnbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLFxuXHRcdCdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnXG5cdH0sXG5cblx0LyoqIENvbnZlbmllbmNlIHNob3J0Y3V0cyAqL1xuXHRiYXNlTWludXNUTWluID0gYmFzZSAtIHRNaW4sXG5cdGZsb29yID0gTWF0aC5mbG9vcixcblx0c3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZSxcblxuXHQvKiogVGVtcG9yYXJ5IHZhcmlhYmxlICovXG5cdGtleTtcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQvKipcblx0ICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBlcnJvciB0eXBlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcnJvcih0eXBlKSB7XG5cdFx0dGhyb3cgbmV3IFJhbmdlRXJyb3IoZXJyb3JzW3R5cGVdKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgYEFycmF5I21hcGAgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IGFycmF5XG5cdCAqIGl0ZW0uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHtcblx0XHR2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR3aGlsZSAobGVuZ3RoLS0pIHtcblx0XHRcdHJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsXG5cdCAqIGFkZHJlc3Nlcy5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAqIGNoYXJhY3Rlci5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tcblx0ICogZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikge1xuXHRcdHZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpO1xuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHRpZiAocGFydHMubGVuZ3RoID4gMSkge1xuXHRcdFx0Ly8gSW4gZW1haWwgYWRkcmVzc2VzLCBvbmx5IHRoZSBkb21haW4gbmFtZSBzaG91bGQgYmUgcHVueWNvZGVkLiBMZWF2ZVxuXHRcdFx0Ly8gdGhlIGxvY2FsIHBhcnQgKGkuZS4gZXZlcnl0aGluZyB1cCB0byBgQGApIGludGFjdC5cblx0XHRcdHJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnO1xuXHRcdFx0c3RyaW5nID0gcGFydHNbMV07XG5cdFx0fVxuXHRcdC8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy5cblx0XHRzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShyZWdleFNlcGFyYXRvcnMsICdcXHgyRScpO1xuXHRcdHZhciBsYWJlbHMgPSBzdHJpbmcuc3BsaXQoJy4nKTtcblx0XHR2YXIgZW5jb2RlZCA9IG1hcChsYWJlbHMsIGZuKS5qb2luKCcuJyk7XG5cdFx0cmV0dXJuIHJlc3VsdCArIGVuY29kZWQ7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZVxuXHQgKiBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZy4gV2hpbGUgSmF2YVNjcmlwdCB1c2VzIFVDUy0yIGludGVybmFsbHksXG5cdCAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoXG5cdCAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LFxuXHQgKiBtYXRjaGluZyBVVEYtMTYuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZW5jb2RlYFxuXHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0ICogQG5hbWUgZGVjb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gVGhlIG5ldyBhcnJheSBvZiBjb2RlIHBvaW50cy5cblx0ICovXG5cdGZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7XG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBjb3VudGVyID0gMCxcblx0XHQgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcblx0XHQgICAgdmFsdWUsXG5cdFx0ICAgIGV4dHJhO1xuXHRcdHdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHR2YWx1ZSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHRcdC8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlclxuXHRcdFx0XHRleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRcdGlmICgoZXh0cmEgJiAweEZDMDApID09IDB4REMwMCkgeyAvLyBsb3cgc3Vycm9nYXRlXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dFxuXHRcdFx0XHRcdC8vIGNvZGUgdW5pdCBpcyB0aGUgaGlnaCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpclxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRjb3VudGVyLS07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RyaW5nIGJhc2VkIG9uIGFuIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZGVjb2RlYFxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBlbmNvZGVcblx0ICogQHBhcmFtIHtBcnJheX0gY29kZVBvaW50cyBUaGUgYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkge1xuXHRcdHJldHVybiBtYXAoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR2YXIgb3V0cHV0ID0gJyc7XG5cdFx0XHRpZiAodmFsdWUgPiAweEZGRkYpIHtcblx0XHRcdFx0dmFsdWUgLT0gMHgxMDAwMDtcblx0XHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG5cdFx0XHRcdHZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjtcblx0XHRcdH1cblx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO1xuXHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHR9KS5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGJhc2ljIGNvZGUgcG9pbnQgaW50byBhIGRpZ2l0L2ludGVnZXIuXG5cdCAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29kZVBvaW50IFRoZSBiYXNpYyBudW1lcmljIGNvZGUgcG9pbnQgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpblxuXHQgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGluIHRoZSByYW5nZSBgMGAgdG8gYGJhc2UgLSAxYCwgb3IgYGJhc2VgIGlmXG5cdCAqIHRoZSBjb2RlIHBvaW50IGRvZXMgbm90IHJlcHJlc2VudCBhIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzaWNUb0RpZ2l0KGNvZGVQb2ludCkge1xuXHRcdGlmIChjb2RlUG9pbnQgLSA0OCA8IDEwKSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gMjI7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gNjU7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA5NyA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gOTc7XG5cdFx0fVxuXHRcdHJldHVybiBiYXNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHNlZSBgYmFzaWNUb0RpZ2l0KClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBiYXNpYyBjb2RlIHBvaW50IHdob3NlIHZhbHVlICh3aGVuIHVzZWQgZm9yXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaXMgYGRpZ2l0YCwgd2hpY2ggbmVlZHMgdG8gYmUgaW4gdGhlIHJhbmdlXG5cdCAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpc1xuXHQgKiB1c2VkOyBlbHNlLCB0aGUgbG93ZXJjYXNlIGZvcm0gaXMgdXNlZC4gVGhlIGJlaGF2aW9yIGlzIHVuZGVmaW5lZFxuXHQgKiBpZiBgZmxhZ2AgaXMgbm9uLXplcm8gYW5kIGBkaWdpdGAgaGFzIG5vIHVwcGVyY2FzZSBmb3JtLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGlnaXRUb0Jhc2ljKGRpZ2l0LCBmbGFnKSB7XG5cdFx0Ly8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLlpcblx0XHQvLyAyNi4uMzUgbWFwIHRvIEFTQ0lJIDAuLjlcblx0XHRyZXR1cm4gZGlnaXQgKyAyMiArIDc1ICogKGRpZ2l0IDwgMjYpIC0gKChmbGFnICE9IDApIDw8IDUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuXG5cdCAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNDkyI3NlY3Rpb24tMy40XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGFwdChkZWx0YSwgbnVtUG9pbnRzLCBmaXJzdFRpbWUpIHtcblx0XHR2YXIgayA9IDA7XG5cdFx0ZGVsdGEgPSBmaXJzdFRpbWUgPyBmbG9vcihkZWx0YSAvIGRhbXApIDogZGVsdGEgPj4gMTtcblx0XHRkZWx0YSArPSBmbG9vcihkZWx0YSAvIG51bVBvaW50cyk7XG5cdFx0Zm9yICgvKiBubyBpbml0aWFsaXphdGlvbiAqLzsgZGVsdGEgPiBiYXNlTWludXNUTWluICogdE1heCA+PiAxOyBrICs9IGJhc2UpIHtcblx0XHRcdGRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZsb29yKGsgKyAoYmFzZU1pbnVzVE1pbiArIDEpICogZGVsdGEgLyAoZGVsdGEgKyBza2V3KSk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzIHRvIGEgc3RyaW5nIG9mIFVuaWNvZGVcblx0ICogc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7XG5cdFx0Ly8gRG9uJ3QgdXNlIFVDUy0yXG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aCxcblx0XHQgICAgb3V0LFxuXHRcdCAgICBpID0gMCxcblx0XHQgICAgbiA9IGluaXRpYWxOLFxuXHRcdCAgICBiaWFzID0gaW5pdGlhbEJpYXMsXG5cdFx0ICAgIGJhc2ljLFxuXHRcdCAgICBqLFxuXHRcdCAgICBpbmRleCxcblx0XHQgICAgb2xkaSxcblx0XHQgICAgdyxcblx0XHQgICAgayxcblx0XHQgICAgZGlnaXQsXG5cdFx0ICAgIHQsXG5cdFx0ICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqL1xuXHRcdCAgICBiYXNlTWludXNUO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50czogbGV0IGBiYXNpY2AgYmUgdGhlIG51bWJlciBvZiBpbnB1dCBjb2RlXG5cdFx0Ly8gcG9pbnRzIGJlZm9yZSB0aGUgbGFzdCBkZWxpbWl0ZXIsIG9yIGAwYCBpZiB0aGVyZSBpcyBub25lLCB0aGVuIGNvcHlcblx0XHQvLyB0aGUgZmlyc3QgYmFzaWMgY29kZSBwb2ludHMgdG8gdGhlIG91dHB1dC5cblxuXHRcdGJhc2ljID0gaW5wdXQubGFzdEluZGV4T2YoZGVsaW1pdGVyKTtcblx0XHRpZiAoYmFzaWMgPCAwKSB7XG5cdFx0XHRiYXNpYyA9IDA7XG5cdFx0fVxuXG5cdFx0Zm9yIChqID0gMDsgaiA8IGJhc2ljOyArK2opIHtcblx0XHRcdC8vIGlmIGl0J3Mgbm90IGEgYmFzaWMgY29kZSBwb2ludFxuXHRcdFx0aWYgKGlucHV0LmNoYXJDb2RlQXQoaikgPj0gMHg4MCkge1xuXHRcdFx0XHRlcnJvcignbm90LWJhc2ljJyk7XG5cdFx0XHR9XG5cdFx0XHRvdXRwdXQucHVzaChpbnB1dC5jaGFyQ29kZUF0KGopKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGRlY29kaW5nIGxvb3A6IHN0YXJ0IGp1c3QgYWZ0ZXIgdGhlIGxhc3QgZGVsaW1pdGVyIGlmIGFueSBiYXNpYyBjb2RlXG5cdFx0Ly8gcG9pbnRzIHdlcmUgY29waWVkOyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nIG90aGVyd2lzZS5cblxuXHRcdGZvciAoaW5kZXggPSBiYXNpYyA+IDAgPyBiYXNpYyArIDEgOiAwOyBpbmRleCA8IGlucHV0TGVuZ3RoOyAvKiBubyBmaW5hbCBleHByZXNzaW9uICovKSB7XG5cblx0XHRcdC8vIGBpbmRleGAgaXMgdGhlIGluZGV4IG9mIHRoZSBuZXh0IGNoYXJhY3RlciB0byBiZSBjb25zdW1lZC5cblx0XHRcdC8vIERlY29kZSBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyIGludG8gYGRlbHRhYCxcblx0XHRcdC8vIHdoaWNoIGdldHMgYWRkZWQgdG8gYGlgLiBUaGUgb3ZlcmZsb3cgY2hlY2tpbmcgaXMgZWFzaWVyXG5cdFx0XHQvLyBpZiB3ZSBpbmNyZWFzZSBgaWAgYXMgd2UgZ28sIHRoZW4gc3VidHJhY3Qgb2ZmIGl0cyBzdGFydGluZ1xuXHRcdFx0Ly8gdmFsdWUgYXQgdGhlIGVuZCB0byBvYnRhaW4gYGRlbHRhYC5cblx0XHRcdGZvciAob2xkaSA9IGksIHcgPSAxLCBrID0gYmFzZTsgLyogbm8gY29uZGl0aW9uICovOyBrICs9IGJhc2UpIHtcblxuXHRcdFx0XHRpZiAoaW5kZXggPj0gaW5wdXRMZW5ndGgpIHtcblx0XHRcdFx0XHRlcnJvcignaW52YWxpZC1pbnB1dCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGlnaXQgPSBiYXNpY1RvRGlnaXQoaW5wdXQuY2hhckNvZGVBdChpbmRleCsrKSk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0ID49IGJhc2UgfHwgZGlnaXQgPiBmbG9vcigobWF4SW50IC0gaSkgLyB3KSkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aSArPSBkaWdpdCAqIHc7XG5cdFx0XHRcdHQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpO1xuXG5cdFx0XHRcdGlmIChkaWdpdCA8IHQpIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGJhc2VNaW51c1QgPSBiYXNlIC0gdDtcblx0XHRcdFx0aWYgKHcgPiBmbG9vcihtYXhJbnQgLyBiYXNlTWludXNUKSkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dyAqPSBiYXNlTWludXNUO1xuXG5cdFx0XHR9XG5cblx0XHRcdG91dCA9IG91dHB1dC5sZW5ndGggKyAxO1xuXHRcdFx0YmlhcyA9IGFkYXB0KGkgLSBvbGRpLCBvdXQsIG9sZGkgPT0gMCk7XG5cblx0XHRcdC8vIGBpYCB3YXMgc3VwcG9zZWQgdG8gd3JhcCBhcm91bmQgZnJvbSBgb3V0YCB0byBgMGAsXG5cdFx0XHQvLyBpbmNyZW1lbnRpbmcgYG5gIGVhY2ggdGltZSwgc28gd2UnbGwgZml4IHRoYXQgbm93OlxuXHRcdFx0aWYgKGZsb29yKGkgLyBvdXQpID4gbWF4SW50IC0gbikge1xuXHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdH1cblxuXHRcdFx0biArPSBmbG9vcihpIC8gb3V0KTtcblx0XHRcdGkgJT0gb3V0O1xuXG5cdFx0XHQvLyBJbnNlcnQgYG5gIGF0IHBvc2l0aW9uIGBpYCBvZiB0aGUgb3V0cHV0XG5cdFx0XHRvdXRwdXQuc3BsaWNlKGkrKywgMCwgbik7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdWNzMmVuY29kZShvdXRwdXQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scyAoZS5nLiBhIGRvbWFpbiBuYW1lIGxhYmVsKSB0byBhXG5cdCAqIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICovXG5cdGZ1bmN0aW9uIGVuY29kZShpbnB1dCkge1xuXHRcdHZhciBuLFxuXHRcdCAgICBkZWx0YSxcblx0XHQgICAgaGFuZGxlZENQQ291bnQsXG5cdFx0ICAgIGJhc2ljTGVuZ3RoLFxuXHRcdCAgICBiaWFzLFxuXHRcdCAgICBqLFxuXHRcdCAgICBtLFxuXHRcdCAgICBxLFxuXHRcdCAgICBrLFxuXHRcdCAgICB0LFxuXHRcdCAgICBjdXJyZW50VmFsdWUsXG5cdFx0ICAgIG91dHB1dCA9IFtdLFxuXHRcdCAgICAvKiogYGlucHV0TGVuZ3RoYCB3aWxsIGhvbGQgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyBpbiBgaW5wdXRgLiAqL1xuXHRcdCAgICBpbnB1dExlbmd0aCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGhhbmRsZWRDUENvdW50UGx1c09uZSxcblx0XHQgICAgYmFzZU1pbnVzVCxcblx0XHQgICAgcU1pbnVzVDtcblxuXHRcdC8vIENvbnZlcnQgdGhlIGlucHV0IGluIFVDUy0yIHRvIFVuaWNvZGVcblx0XHRpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpO1xuXG5cdFx0Ly8gQ2FjaGUgdGhlIGxlbmd0aFxuXHRcdGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSB0aGUgc3RhdGVcblx0XHRuID0gaW5pdGlhbE47XG5cdFx0ZGVsdGEgPSAwO1xuXHRcdGJpYXMgPSBpbml0aWFsQmlhcztcblxuXHRcdC8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHNcblx0XHRmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cdFx0XHRpZiAoY3VycmVudFZhbHVlIDwgMHg4MCkge1xuXHRcdFx0XHRvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoY3VycmVudFZhbHVlKSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aGFuZGxlZENQQ291bnQgPSBiYXNpY0xlbmd0aCA9IG91dHB1dC5sZW5ndGg7XG5cblx0XHQvLyBgaGFuZGxlZENQQ291bnRgIGlzIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgdGhhdCBoYXZlIGJlZW4gaGFuZGxlZDtcblx0XHQvLyBgYmFzaWNMZW5ndGhgIGlzIHRoZSBudW1iZXIgb2YgYmFzaWMgY29kZSBwb2ludHMuXG5cblx0XHQvLyBGaW5pc2ggdGhlIGJhc2ljIHN0cmluZyAtIGlmIGl0IGlzIG5vdCBlbXB0eSAtIHdpdGggYSBkZWxpbWl0ZXJcblx0XHRpZiAoYmFzaWNMZW5ndGgpIHtcblx0XHRcdG91dHB1dC5wdXNoKGRlbGltaXRlcik7XG5cdFx0fVxuXG5cdFx0Ly8gTWFpbiBlbmNvZGluZyBsb29wOlxuXHRcdHdoaWxlIChoYW5kbGVkQ1BDb3VudCA8IGlucHV0TGVuZ3RoKSB7XG5cblx0XHRcdC8vIEFsbCBub24tYmFzaWMgY29kZSBwb2ludHMgPCBuIGhhdmUgYmVlbiBoYW5kbGVkIGFscmVhZHkuIEZpbmQgdGhlIG5leHRcblx0XHRcdC8vIGxhcmdlciBvbmU6XG5cdFx0XHRmb3IgKG0gPSBtYXhJbnQsIGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA+PSBuICYmIGN1cnJlbnRWYWx1ZSA8IG0pIHtcblx0XHRcdFx0XHRtID0gY3VycmVudFZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEluY3JlYXNlIGBkZWx0YWAgZW5vdWdoIHRvIGFkdmFuY2UgdGhlIGRlY29kZXIncyA8bixpPiBzdGF0ZSB0byA8bSwwPixcblx0XHRcdC8vIGJ1dCBndWFyZCBhZ2FpbnN0IG92ZXJmbG93XG5cdFx0XHRoYW5kbGVkQ1BDb3VudFBsdXNPbmUgPSBoYW5kbGVkQ1BDb3VudCArIDE7XG5cdFx0XHRpZiAobSAtIG4gPiBmbG9vcigobWF4SW50IC0gZGVsdGEpIC8gaGFuZGxlZENQQ291bnRQbHVzT25lKSkge1xuXHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVsdGEgKz0gKG0gLSBuKSAqIGhhbmRsZWRDUENvdW50UGx1c09uZTtcblx0XHRcdG4gPSBtO1xuXG5cdFx0XHRmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblxuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlIDwgbiAmJiArK2RlbHRhID4gbWF4SW50KSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID09IG4pIHtcblx0XHRcdFx0XHQvLyBSZXByZXNlbnQgZGVsdGEgYXMgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlclxuXHRcdFx0XHRcdGZvciAocSA9IGRlbHRhLCBrID0gYmFzZTsgLyogbm8gY29uZGl0aW9uICovOyBrICs9IGJhc2UpIHtcblx0XHRcdFx0XHRcdHQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpO1xuXHRcdFx0XHRcdFx0aWYgKHEgPCB0KSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cU1pbnVzVCA9IHEgLSB0O1xuXHRcdFx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRcdFx0b3V0cHV0LnB1c2goXG5cdFx0XHRcdFx0XHRcdHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNULCAwKSlcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRxID0gZmxvb3IocU1pbnVzVCAvIGJhc2VNaW51c1QpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSwgMCkpKTtcblx0XHRcdFx0XHRiaWFzID0gYWRhcHQoZGVsdGEsIGhhbmRsZWRDUENvdW50UGx1c09uZSwgaGFuZGxlZENQQ291bnQgPT0gYmFzaWNMZW5ndGgpO1xuXHRcdFx0XHRcdGRlbHRhID0gMDtcblx0XHRcdFx0XHQrK2hhbmRsZWRDUENvdW50O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdCsrZGVsdGE7XG5cdFx0XHQrK247XG5cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dC5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzXG5cdCAqIHRvIFVuaWNvZGUuIE9ubHkgdGhlIFB1bnljb2RlZCBwYXJ0cyBvZiB0aGUgaW5wdXQgd2lsbCBiZSBjb252ZXJ0ZWQsIGkuZS5cblx0ICogaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgb24gYSBzdHJpbmcgdGhhdCBoYXMgYWxyZWFkeSBiZWVuXG5cdCAqIGNvbnZlcnRlZCB0byBVbmljb2RlLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZWQgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0b1xuXHQgKiBjb252ZXJ0IHRvIFVuaWNvZGUuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBVbmljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBQdW55Y29kZVxuXHQgKiBzdHJpbmcuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b1VuaWNvZGUoaW5wdXQpIHtcblx0XHRyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHtcblx0XHRcdHJldHVybiByZWdleFB1bnljb2RlLnRlc3Qoc3RyaW5nKVxuXHRcdFx0XHQ/IGRlY29kZShzdHJpbmcuc2xpY2UoNCkudG9Mb3dlckNhc2UoKSlcblx0XHRcdFx0OiBzdHJpbmc7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBVbmljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIFB1bnljb2RlLiBPbmx5IHRoZSBub24tQVNDSUkgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHdpbGwgYmUgY29udmVydGVkLFxuXHQgKiBpLmUuIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCdzIGFscmVhZHkgaW5cblx0ICogQVNDSUkuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG8gY29udmVydCwgYXMgYVxuXHQgKiBVbmljb2RlIHN0cmluZy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFB1bnljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBkb21haW4gbmFtZSBvclxuXHQgKiBlbWFpbCBhZGRyZXNzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9BU0NJSShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4Tm9uQVNDSUkudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gJ3huLS0nICsgZW5jb2RlKHN0cmluZylcblx0XHRcdFx0OiBzdHJpbmc7XG5cdFx0fSk7XG5cdH1cblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQvKiogRGVmaW5lIHRoZSBwdWJsaWMgQVBJICovXG5cdHB1bnljb2RlID0ge1xuXHRcdC8qKlxuXHRcdCAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBQdW55Y29kZS5qcyB2ZXJzaW9uIG51bWJlci5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAdHlwZSBTdHJpbmdcblx0XHQgKi9cblx0XHQndmVyc2lvbic6ICcxLjMuMicsXG5cdFx0LyoqXG5cdFx0ICogQW4gb2JqZWN0IG9mIG1ldGhvZHMgdG8gY29udmVydCBmcm9tIEphdmFTY3JpcHQncyBpbnRlcm5hbCBjaGFyYWN0ZXJcblx0XHQgKiByZXByZXNlbnRhdGlvbiAoVUNTLTIpIHRvIFVuaWNvZGUgY29kZSBwb2ludHMsIGFuZCBiYWNrLlxuXHRcdCAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIE9iamVjdFxuXHRcdCAqL1xuXHRcdCd1Y3MyJzoge1xuXHRcdFx0J2RlY29kZSc6IHVjczJkZWNvZGUsXG5cdFx0XHQnZW5jb2RlJzogdWNzMmVuY29kZVxuXHRcdH0sXG5cdFx0J2RlY29kZSc6IGRlY29kZSxcblx0XHQnZW5jb2RlJzogZW5jb2RlLFxuXHRcdCd0b0FTQ0lJJzogdG9BU0NJSSxcblx0XHQndG9Vbmljb2RlJzogdG9Vbmljb2RlXG5cdH07XG5cblx0LyoqIEV4cG9zZSBgcHVueWNvZGVgICovXG5cdC8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMsIGxpa2Ugci5qcywgY2hlY2sgZm9yIHNwZWNpZmljIGNvbmRpdGlvbiBwYXR0ZXJuc1xuXHQvLyBsaWtlIHRoZSBmb2xsb3dpbmc6XG5cdGlmIChcblx0XHR0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiZcblx0XHR0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJlxuXHRcdGRlZmluZS5hbWRcblx0KSB7XG5cdFx0ZGVmaW5lKCdwdW55Y29kZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHB1bnljb2RlO1xuXHRcdH0pO1xuXHR9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcblx0XHRpZiAobW9kdWxlLmV4cG9ydHMgPT0gZnJlZUV4cG9ydHMpIHtcblx0XHRcdC8vIGluIE5vZGUuanMsIGlvLmpzLCBvciBSaW5nb0pTIHYwLjguMCtcblx0XHRcdGZyZWVNb2R1bGUuZXhwb3J0cyA9IHB1bnljb2RlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLVxuXHRcdFx0Zm9yIChrZXkgaW4gcHVueWNvZGUpIHtcblx0XHRcdFx0cHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIHtcblx0XHQvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyXG5cdFx0cm9vdC5wdW55Y29kZSA9IHB1bnljb2RlO1xuXHR9XG5cbn0odGhpcykpO1xuIiwiLyoqXHJcbiAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxyXG4gKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxyXG4gKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcclxuICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcclxuICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXHJcbiAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcclxuICogQ29weXJpZ2h0IDIwMTYgQXBpemVlXHJcbiAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICoqL1xyXG5jb25zdCBtZXRob2RzID0ge0dFVDogJ2dldCcsIFBPU1Q6ICdwb3N0J31cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFJlcXVlc3RcclxuICogQGRlc2MgQnJpZGdlIHRvIG1ha2UgSFRUUCByZXF1ZXN0c1xyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKHVybDpzdHJpbmcsIG9wdGlvbnM6T2JqZWN0KTpzdHJpbmd9IGdldFxyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKHVybDpzdHJpbmcsIG9wdGlvbnM6T2JqZWN0KTpzdHJpbmd9IHBvc3RcclxuICovXHJcblxyXG4vKipcclxuICogQnJpZGdlIHRvIG1ha2UgSFRUUCByZXF1ZXN0c1xyXG4gKi9cclxuY2xhc3MgUmVxdWVzdCB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0bGV0IF90aGlzID0gdGhpc1xyXG5cclxuXHRcdE9iamVjdC5rZXlzKG1ldGhvZHMpLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XHJcblx0XHRcdF90aGlzW21ldGhvZHNbbWV0aG9kXV0gPSBmdW5jdGlvbih1cmwsIG9wdGlvbnMpIHtcclxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcblx0XHRcdFx0XHRfdGhpcy5fbWFrZUxvY2FsUmVxdWVzdChtZXRob2RzW21ldGhvZF0udG9VcHBlckNhc2UoKSwgdXJsLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHRyZXNvbHZlKHJlc3VsdClcclxuXHRcdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbikge1xyXG5cdFx0XHRcdFx0XHRyZWplY3QocmVhc29uKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdH1cclxuXHJcblx0X21ha2VMb2NhbFJlcXVlc3QobWV0aG9kLCB1cmwsIG9wdGlvbnMpIHtcclxuXHRcdGxldCBfdGhpcyA9IHRoaXNcclxuXHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcblx0XHRcdHVybCA9IF90aGlzLl9tYXBQcm90b2NvbCh1cmwpXHJcblx0XHRcdGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxyXG5cclxuXHRcdFx0eGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpXHJcblxyXG5cdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRsZXQgeGhyID0gZXZlbnQuY3VycmVudFRhcmdldFxyXG5cdFx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xyXG5cdFx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPj0gMjAwIHx8IHhoci5zdGF0dXMgPD0gMjk5KSB7XHJcblx0XHRcdFx0XHRcdHJlc29sdmUoeGhyLnJlc3BvbnNlVGV4dClcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHJlamVjdCh4aHIucmVzcG9uc2VUZXh0KVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYob3B0aW9ucyAmJiBvcHRpb25zLmhlYWRlcnMpIHtcclxuXHRcdFx0XHRmb3IobGV0IHByb3AgaW4gb3B0aW9ucy5oZWFkZXJzKSB7XHJcblx0XHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcihwcm9wLCBvcHRpb25zLmhlYWRlcnNbcHJvcF0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR4aHIuc2VuZChvcHRpb25zP29wdGlvbnMuYm9keTpudWxsKVxyXG5cdFx0fSlcclxuXHJcblx0fVxyXG5cclxuXHRfbWFwUHJvdG9jb2wodXJsKSB7XHJcblx0XHRsZXQgcHJvdG9jb2xtYXAgPSB7XHJcblx0XHRcdCdsb2NhbGhvc3Q6Ly8nOiAnaHR0cHM6Ly8nLFxyXG5cdFx0XHQndW5kZWZpbmVkOi8vJzogJ2h0dHBzOi8vJyxcclxuXHRcdFx0J2h5cGVydHktY2F0YWxvZ3VlOi8vJzogJ2h0dHBzOi8vJyxcclxuXHRcdFx0J2h0dHBzOi8vJzogJ2h0dHBzOi8vJyxcclxuXHRcdFx0J2h0dHA6Ly8nOiAnaHR0cDovLydcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgZm91bmRQcm90b2NvbCA9IGZhbHNlXHJcblx0XHRmb3IgKGxldCBwcm90b2NvbCBpbiBwcm90b2NvbG1hcCkge1xyXG5cdFx0XHRpZiAodXJsLnNsaWNlKDAsIHByb3RvY29sLmxlbmd0aCkgPT09IHByb3RvY29sKSB7XHJcblx0XHRcdFx0dXJsID0gcHJvdG9jb2xtYXBbcHJvdG9jb2xdICsgdXJsLnNsaWNlKHByb3RvY29sLmxlbmd0aCwgdXJsLmxlbmd0aClcclxuXHRcdFx0XHRmb3VuZFByb3RvY29sID0gdHJ1ZVxyXG5cdFx0XHRcdGJyZWFrXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIWZvdW5kUHJvdG9jb2wpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByb3RvY29sIG9mIHVybDogJyArIHVybClcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdXJsXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZXF1ZXN0XHJcbiIsIi8vIFRPRE86IGltcG9ydCBhbmQgZXh0ZW5kIHRoZSBjbGFzcyBvZiB0aGUgc2VydmljZS1mcmFtZXdvcmtcclxuLy8gc2VydmljZS1mcmFtZXdvcmsvZGlzdC9SdW50aW1lQ2FwYWJpbGl0aWVzO1xyXG5cclxuY2xhc3MgUnVudGltZUNhcGFiaWxpdGllcyB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHN0b3JhZ2VNYW5hZ2VyKSB7XHJcbiAgICBpZiAoIXN0b3JhZ2VNYW5hZ2VyKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBSdW50aW1lIENhcGFiaWxpdGllcyBuZWVkIHRoZSBzdG9yYWdlTWFuYWdlcicpO1xyXG5cclxuICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIgPSBzdG9yYWdlTWFuYWdlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYXMgYSBwcm9taXNlIFJ1bnRpbWVDYXBhYmlsaXRpZXMganNvbiBvYmplY3Qgd2l0aCBhbGwgYXZhaWxhYmxlIGNhcGFiaWxpdGllcyBvZiB0aGUgcnVudGltZS5cclxuICAgKiBJZiBpdCB3YXMgbm90IHlldCBwZXJzaXN0ZWQgaW4gdGhlIFN0b3JhZ2UgTWFuYWdlciBpdCBjb2xsZWN0cyBhbGwgcmVxdWlyZWQgaW5mbyBmcm9tIHRoZSBwbGF0Zm9ybSBhbmQgc2F2ZXMgaW4gdGhlIHN0b3JhZ2UgbWFuYWdlci5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fVxyXG4gICAqL1xyXG4gIGdldFJ1bnRpbWVDYXBhYmlsaXRpZXMoKSB7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgIFByb21pc2UuYWxsKFt0aGlzLl9nZXRFbnZpcm9ubWVudCgpLCB0aGlzLl9nZXRNZWRpYURldmljZXMoKV0pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIGxldCBjYXBhYmlsaXRpZXMgPSB7fTtcclxuICAgICAgICByZXN1bHQuZm9yRWFjaCgoY2FwYWJpbGl0eSkgPT4ge1xyXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihjYXBhYmlsaXRpZXMsIGNhcGFiaWxpdHkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNldCgnY2FwYWJpbGl0aWVzJywgJzEnLCBjYXBhYmlsaXRpZXMpO1xyXG5cclxuICAgICAgICByZXNvbHZlKGNhcGFiaWxpdGllcyk7XHJcbiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHJldHVybnMgYXMgYSBwcm9taXNlIGEgYm9vbGVhbiBhY2NvcmRpbmcgdG8gYXZhaWxhYmxlIGNhcGFiaWxpdGllcy5cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn1cclxuICAgKi9cclxuICBpc0F2YWlsYWJsZShjYXBhYmlsaXR5KSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuXHJcbiAgICAgIHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2V0KCdjYXBhYmlsaXRpZXMnKS50aGVuKChjYXBhYmlsaXRpZXMpID0+IHtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0NhcGFiaWxpdHkgJyArIGNhcGFiaWxpdHkgKyAnIGlzIGF2YWlsYWJsZT8gJywgY2FwYWJpbGl0aWVzLmhhc093blByb3BlcnR5KGNhcGFiaWxpdHkpICYmIGNhcGFiaWxpdGllc1tjYXBhYmlsaXR5XSk7XHJcbiAgICAgICAgaWYgKGNhcGFiaWxpdGllcy5oYXNPd25Qcm9wZXJ0eShjYXBhYmlsaXR5KSAmJiBjYXBhYmlsaXRpZXNbY2FwYWJpbGl0eV0pIHtcclxuICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBpdCByZWZyZXNoZXMgcHJldmlvdXNseSBjb2xsZWN0ZWQgY2FwYWJpbGl0aWVzIGFuZCB1cGRhdGVzIHRoZSBzdG9yYWdlIG1hbmFnZXJcclxuICAgKi9cclxuICB1cGRhdGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLmdldFJ1bnRpbWVDYXBhYmlsaXRpZXMoKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIFRPRE86IG9yZ2FuaXplIHRoZSBjb2RlIGluIHNlcGFyYXRlZCBmaWxlc1xyXG4gIF9nZXRFbnZpcm9ubWVudCgpIHtcclxuXHJcbiAgICAvLyBUT0RPOiB0aGlzIHNob3VsZCBiZSBtb3JlIGVmZmVjdGl2ZSBhbmQgY2hlY2sgdGhlIGVudmlyb25tZW50XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBicm93c2VyOiAhISh3aW5kb3cgJiYgbmF2aWdhdG9yKSxcclxuICAgICAgbm9kZTogISEhKHdpbmRvdyAmJiBuYXZpZ2F0b3IpXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gVE9ETzogb3JnYW5pemUgdGhlIGNvZGUgaW4gc2VwYXJhdGVkIGZpbGVzXHJcbiAgX2dldE1lZGlhRGV2aWNlcygpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG5cclxuICAgICAgbGV0IGNhcGFiaWxpdHkgPSB7fTtcclxuXHJcbiAgICAgIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyB8fCAhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2VudW1lcmF0ZURldmljZXMoKSBub3Qgc3VwcG9ydGVkLicpO1xyXG4gICAgICAgIHJlc29sdmUoY2FwYWJpbGl0eSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBMaXN0IGNhbWVyYXMgYW5kIG1pY3JvcGhvbmVzLlxyXG4gICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKVxyXG4gICAgICAudGhlbigoZGV2aWNlcykgPT4ge1xyXG4gICAgICAgIGRldmljZXMuZm9yRWFjaCgoZGV2aWNlKSA9PiB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRGV2aWNlczonLCBkZXZpY2Uua2luZCwgZGV2aWNlLmxhYmVsLCBkZXZpY2UuZGV2aWNlSWQpO1xyXG4gICAgICAgICAgaWYgKGRldmljZS5raW5kID09PSAnYXVkaW9pbnB1dCcpIHtcclxuICAgICAgICAgICAgY2FwYWJpbGl0eS5taWMgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChkZXZpY2Uua2luZCA9PT0gJ3ZpZGVvaW5wdXQnKSB7XHJcbiAgICAgICAgICAgIGNhcGFiaWxpdHkuY2FtZXJhID0gdHJ1ZTtcclxuXHQgICAgY2FwYWJpbGl0eS53aW5kb3dTYW5kYm94ID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXNvbHZlKGNhcGFiaWxpdHkpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIHJlc29sdmUoY2FwYWJpbGl0eSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyLm5hbWUgKyAnOiAnICsgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJ1bnRpbWVDYXBhYmlsaXRpZXM7XHJcbiIsIi8qKlxyXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxyXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXHJcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXHJcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcclxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcclxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXHJcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXHJcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cclxuKlxyXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKi9cclxuaW1wb3J0IFBlcnNpc3RlbmNlTWFuYWdlciBmcm9tICdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1BlcnNpc3RlbmNlTWFuYWdlcic7XHJcbmltcG9ydCB7IGNyZWF0ZVNhbmRib3ggfSBmcm9tICcuL1NhbmRib3hlcyc7XHJcbmltcG9ydCBTYW5kYm94QXBwIGZyb20gJy4vU2FuZGJveEFwcCc7XHJcbmltcG9ydCBSZXF1ZXN0IGZyb20gJy4vUmVxdWVzdCc7XHJcbmltcG9ydCBSdW50aW1lQ2FwYWJpbGl0aWVzIGZyb20gJy4vUnVudGltZUNhcGFiaWxpdGllcyc7XHJcbmltcG9ydCBTdG9yYWdlTWFuYWdlciBmcm9tICdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N0b3JhZ2VNYW5hZ2VyJztcclxuaW1wb3J0IERleGllIGZyb20gJ2RleGllJztcclxuaW1wb3J0IHsgUnVudGltZUNhdGFsb2d1ZSB9IGZyb20gJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvUnVudGltZUNhdGFsb2d1ZSc7XHJcblxyXG4vKipcclxuICogSXMgYSBicmlkZ2UgdG8gaXNvbGF0ZSB0aGUgcnVudGltZSBmcm9tIHRoZSBzcGVjaWZpYyBwbGF0Zm9ybVxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBSdW50aW1lRmFjdG9yeVxyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKCk6U2FuZGJveH0gY3JlYXRlU2FuZGJveCBDcmVhdGVzIGEgbmV3IFNhbmRib3hcclxuICogQHByb3BlcnR5IHtmdW5jdGlvbigpOlNhbmRib3hBcHB9IGNyZWF0ZUFwcFNhbmRib3ggQ3JlYXRlcyBhIG5ldyBTYW5kYm94QXBwXHJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTpSZXF1ZXN0fSBjcmVhdGVIdHRwUmVxdWVzdCBDcmVhdGVzIGEgbmV3IFJlcXVlc3Qgb2JqZWN0XHJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTpSdW50aW1lQ2F0YWxvZ3VlfSBjcmVhdGVSdW50aW1lQ2F0YWxvZ3VlIENyZWF0ZXMgYSBuZXcgUnVudGltZUNhdGFsb2d1ZVxyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEVuY29kZWQgZGF0YTogc3RyaW5nKTpzdHJpbmd9IGF0b2IgUmV0dXJucyB0aGUgc3RyaW5nIGRlY29kZWRcclxuICogQHByb3BlcnR5IHtmdW5jdGlvbigpOlBlcnNpc3RlbmNlTWFuYWdlcn0gcGVyc2lzdGVuY2VNYW5hZ2VyIFJldHVybnMgYSBuZXcgUGVyc2lzdGVuY2VNYW5hZ2VyXHJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTpTdG9yYWdlTWFuYWdlcn0gc3RvcmFnZU1hbmFnZXIgUmV0dXJucyBhIG5ldyBTdG9yYWdlTWFuYWdlclxyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKCk6UnVudGltZUNhcGFiaWxpdGllc30gcnVudGltZUNhcGFiaWxpdGllcyBSZXR1cm5zIGEgbmV3IFJ1bnRpbWVDYXBhYmlsaXRpZXNcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBjcmVhdGVTYW5kYm94KGNvbnN0cmFpbnRzKSB7XHJcbiAgICByZXR1cm4gY3JlYXRlU2FuZGJveChjb25zdHJhaW50cyk7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlQXBwU2FuZGJveCgpIHtcclxuICAgIHJldHVybiBuZXcgU2FuZGJveEFwcCgpO1xyXG4gIH0sXHJcblxyXG4gIGNyZWF0ZUh0dHBSZXF1ZXN0KCkge1xyXG4gICAgbGV0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCgpO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlUnVudGltZUNhdGFsb2d1ZSgpIHtcclxuICAgIGlmICghdGhpcy5jYXRhbG9ndWUpIHsgdGhpcy5jYXRhbG9ndWUgPSBuZXcgUnVudGltZUNhdGFsb2d1ZSh0aGlzKTsgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmNhdGFsb2d1ZTtcclxuICB9LFxyXG5cclxuICBhdG9iKGI2NCkge1xyXG4gICAgcmV0dXJuIGF0b2IoYjY0KTtcclxuICB9LFxyXG5cclxuICBwZXJzaXN0ZW5jZU1hbmFnZXIoKSB7XHJcbiAgICBsZXQgbG9jYWxTdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcclxuICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VNYW5hZ2VyKGxvY2FsU3RvcmFnZSk7XHJcbiAgfSxcclxuICBzdG9yYWdlTWFuYWdlcihuYW1lLCBzY2hlbWFzKSB7XHJcblxyXG4gICAgaWYgKCF0aGlzLmRhdGFiYXNlcykgeyB0aGlzLmRhdGFiYXNlcyA9IHt9OyB9XHJcbiAgICBpZiAoIXRoaXMuc3RvcmVNYW5hZ2VyKSB7IHRoaXMuc3RvcmVNYW5hZ2VyID0ge307IH1cclxuXHJcbiAgICAvLyBUbyBtYWtlIHRoZSBzdG9yYWdlIHBlcnNpdGVudCBhbmQgbm93IGFsbG93IHRoZSBzeXN0ZW0gY2xlYXIgdGhlIHN0b3JhZ2Ugd2hlbiBpcyB1bmRlciBwcmVzc3VyZTtcclxuICAgIGlmIChuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnN0b3JhZ2UgJiYgbmF2aWdhdG9yLnN0b3JhZ2UucGVyc2lzdCkge1xyXG4gICAgICBuYXZpZ2F0b3Iuc3RvcmFnZS5wZXJzaXN0KCkudGhlbihmdW5jdGlvbihwZXJzaXN0ZW50KSB7XHJcbiAgICAgICAgaWYgKHBlcnNpc3RlbnQpIHsgY29uc29sZS5sb2coJ1N0b3JhZ2Ugd2lsbCBub3QgYmUgY2xlYXJlZCBleGNlcHQgYnkgZXhwbGljaXQgdXNlciBhY3Rpb24nKTsgfSBlbHNlIHsgY29uc29sZS5sb2coJ1N0b3JhZ2UgbWF5IGJlIGNsZWFyZWQgYnkgdGhlIFVBIHVuZGVyIHN0b3JhZ2UgcHJlc3N1cmUuJyk7IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNpbmcgdGhlIGltcGxlbWVudGF0aW9uIG9mIFNlcnZpY2UgRnJhbWV3b3JrXHJcbiAgICAvLyBEZXhpZSBpcyB0aGUgSW5kZXhEQiBXcmFwcGVyXHJcbiAgICBpZiAoIXRoaXMuZGF0YWJhc2VzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgIHRoaXMuZGF0YWJhc2VzW25hbWVdID0gbmV3IERleGllKG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5zdG9yZU1hbmFnZXIuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgdGhpcy5zdG9yZU1hbmFnZXJbbmFtZV0gPSBuZXcgU3RvcmFnZU1hbmFnZXIodGhpcy5kYXRhYmFzZXNbbmFtZV0sIG5hbWUsIHNjaGVtYXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLnN0b3JlTWFuYWdlcltuYW1lXTtcclxuICB9LFxyXG5cclxuICBydW50aW1lQ2FwYWJpbGl0aWVzKCkge1xyXG5cclxuICAgIGlmICghdGhpcy5jYXBhYmlsaXRpZXNNYW5hZ2VyKSB7XHJcbiAgICAgIGxldCBzdG9yYWdlTWFuYWdlciA9IHRoaXMuc3RvcmFnZU1hbmFnZXIoJ2NhcGFiaWxpdGllcycpO1xyXG4gICAgICB0aGlzLmNhcGFiaWxpdGllc01hbmFnZXIgPSBuZXcgUnVudGltZUNhcGFiaWxpdGllcyhzdG9yYWdlTWFuYWdlcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuY2FwYWJpbGl0aWVzTWFuYWdlcjtcclxuICB9XHJcbn07XHJcbiIsIi8qKlxyXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxyXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXHJcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXHJcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcclxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcclxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXHJcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXHJcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cclxuKlxyXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKi9cclxuaW1wb3J0IHsgU2FuZGJveCwgU2FuZGJveFR5cGUgfSBmcm9tICdydW50aW1lLWNvcmUvZGlzdC9zYW5kYm94JztcclxuaW1wb3J0IE1pbmlCdXMgZnJvbSAncnVudGltZS1jb3JlL2Rpc3QvbWluaWJ1cyc7XHJcblxyXG4vKipcclxuICogUHJveHkgZm9yIHRoZSBBcHBsaWNhdGlvbiBjb250ZXh0XHJcbiAqICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNhbmRib3hBcHAgZXh0ZW5kcyBTYW5kYm94IHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgLyoqXHJcblx0XHQgKiBAdHlwZSB7cnVudGltZS1jb3JlL2Rpc3Qvc2FuZGJveC9TYW5kYm94VHlwZX1cclxuXHRcdCAqL1xyXG4gICAgdGhpcy50eXBlID0gU2FuZGJveFR5cGUuTk9STUFMO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGlmICghdGhpcy5vcmlnaW4pIHtcclxuICAgICAgICAvKipcclxuXHRcdFx0XHQgKiBAdHlwZSB7V2luZG93fVxyXG5cdFx0XHRcdCAqL1xyXG4gICAgICAgIHRoaXMub3JpZ2luID0gZS5zb3VyY2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0eXBlb2YgZS5kYXRhID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGUuZGF0YS5oYXNPd25Qcm9wZXJ0eSgndG8nKSAmJiBlLmRhdGEudG8uc3RhcnRzV2l0aCgnY29yZTonKSkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgIC8vIHRoaXMuX29uTWVzc2FnZShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUuZGF0YSkpKTtcclxuICAgICAgdGhpcy5fb25NZXNzYWdlKGUuZGF0YSk7XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTQU5EQk9YIEFQUF0gLSBFcnJvcicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICB9XHJcblxyXG4gIF9vblBvc3RNZXNzYWdlKG1zZykge1xyXG4gICAgdGhpcy5vcmlnaW4ucG9zdE1lc3NhZ2UobXNnLCAnKicpO1xyXG4gIH1cclxufVxyXG4iLCIvKipcclxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcclxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxyXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxyXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXHJcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXHJcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xyXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxyXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXHJcbipcclxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuKlxyXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbipcclxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKiovXHJcbmltcG9ydCB7IFNhbmRib3gsIFNhbmRib3hUeXBlIH0gZnJvbSAncnVudGltZS1jb3JlL2Rpc3Qvc2FuZGJveCc7XHJcbmltcG9ydCBNaW5pQnVzIGZyb20gJ3J1bnRpbWUtY29yZS9kaXN0L21pbmlidXMnO1xyXG5pbXBvcnQgUnVudGltZUZhY3RvcnkgZnJvbSAnLi9SdW50aW1lRmFjdG9yeSc7XHJcblxyXG4vKipcclxuICogUHJveHkgZm9yIGEgV2ViV29ya2VyXHJcbiAqICovXHJcbmV4cG9ydCBjbGFzcyBTYW5kYm94V29ya2VyIGV4dGVuZHMgU2FuZGJveCB7XHJcbiAgc3RhdGljIGNhcGFiaWxpdGllcygpIHtcclxuICAgIHJldHVybiBSdW50aW1lRmFjdG9yeS5ydW50aW1lQ2FwYWJpbGl0aWVzKCkuZ2V0UnVudGltZUNhcGFiaWxpdGllcygpXHJcbiAgICAgIC50aGVuKGNhcGFiaWxpdGllcyA9Pk9iamVjdC5hc3NpZ24oY2FwYWJpbGl0aWVzLCB7IG1pYzogZmFsc2UsIGNhbWVyYTogZmFsc2UsIHdpbmRvd1NhbmRib3g6IGZhbHNlIH0pKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBuZXcoY2FwYWJpbGl0aWVzKSB7XHJcbiAgICByZXR1cm4gbmV3IFNhbmRib3hXb3JrZXIoY2FwYWJpbGl0aWVzLCAnLi9jb250ZXh0LXNlcnZpY2UuanMnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHQgLSBTY3JpcHQgdGhhdCB3aWxsIGJlIGxvYWRlZCBpbiB0aGUgd2ViIHdvcmtlclxyXG5cdCAqL1xyXG4gIGNvbnN0cnVjdG9yKGNhcGFiaWxpdGllcywgc2NyaXB0KSB7XHJcbiAgICBzdXBlcihjYXBhYmlsaXRpZXMpO1xyXG5cclxuICAgIC8qKlxyXG5cdFx0ICogQHR5cGUge3J1bnRpbWUtY29yZS9kaXN0L3NhbmRib3gvU2FuZGJveFR5cGV9XHJcblx0XHQgKi9cclxuICAgIHRoaXMudHlwZSA9IFNhbmRib3hUeXBlLk5PUk1BTDtcclxuICAgIGlmIChXb3JrZXIpIHtcclxuICAgICAgdGhpcy5fd29ya2VyID0gbmV3IFdvcmtlcihzY3JpcHQpO1xyXG4gICAgICB0aGlzLl93b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICB0aGlzLl9vbk1lc3NhZ2UoZS5kYXRhKTtcclxuICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgIHRoaXMuX3dvcmtlci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tTYW5kYm94IFdvcmtlcl0gLSBFcnJvcjogJywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IEpTT04uc3RyaW5naWZ5KGVycm9yKTtcclxuICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgIHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZSgnJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdXIgZW52aXJvbm1lbnQgZG9lcyBub3Qgc3VwcG9ydCB3b3JrZXIgXFxuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25Qb3N0TWVzc2FnZShtc2cpIHtcclxuICAgIHRoaXMuX3dvcmtlci5wb3N0TWVzc2FnZShtc2cpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNhbmRib3hXaW5kb3cgZXh0ZW5kcyBTYW5kYm94IHtcclxuICBzdGF0aWMgY2FwYWJpbGl0aWVzKCkge1xyXG4gICAgcmV0dXJuIFJ1bnRpbWVGYWN0b3J5LnJ1bnRpbWVDYXBhYmlsaXRpZXMoKS5nZXRSdW50aW1lQ2FwYWJpbGl0aWVzKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbmV3KGNhcGFiaWxpdGllcykge1xyXG4gICAgcmV0dXJuIG5ldyBTYW5kYm94V2luZG93KGNhcGFiaWxpdGllcyk7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihjYXBhYmlsaXRpZXMpIHtcclxuICAgIHN1cGVyKGNhcGFiaWxpdGllcyk7XHJcblxyXG4gICAgdGhpcy50eXBlID0gU2FuZGJveFR5cGUuV0lORE9XO1xyXG4gICAgdGhpcy5jaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XHJcblxyXG4gICAgdGhpcy5jaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdGhpcy5fb25NZXNzYWdlKGUuZGF0YSk7XHJcbiAgICB9LmJpbmQodGhpcyk7XHJcblxyXG4gICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgdG86ICdydW50aW1lOmNyZWF0ZVNhbmRib3hXaW5kb3cnIH0sICcqJywgW3RoaXMuY2hhbm5lbC5wb3J0Ml0pO1xyXG4gIH1cclxuXHJcbiAgX29uUG9zdE1lc3NhZ2UobXNnKSB7XHJcbiAgICB0aGlzLmNoYW5uZWwucG9ydDEucG9zdE1lc3NhZ2UobXNnKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTYW5kYm94KGNvbnN0cmFpbnRzKSB7XHJcbiAgY29uc3Qgc2FuZGJveGVzID0gW1NhbmRib3hXb3JrZXIsIFNhbmRib3hXaW5kb3ddO1xyXG4gIGxldCBkaWZmID0gKGEsIGIpID0+IE9iamVjdC5rZXlzKGEpLmZpbHRlcih4ID0+IGFbeF0gIT09IGJbeF0pO1xyXG5cclxuICByZXR1cm4gUHJvbWlzZS5hbGwoc2FuZGJveGVzLm1hcChzID0+IHMuY2FwYWJpbGl0aWVzKCkudGhlbihjPT57IHJldHVybiB7Y2FwYWJpbGl0aWVzOiBjLCBzYW5kYm94OiBzfTsgfSkpKVxyXG4gICAgLnRoZW4oc2JzID0+IHtcclxuICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICB3aGlsZSAoaSA8IHNicy5sZW5ndGgpIHtcclxuICAgICAgICBpZiAoZGlmZihjb25zdHJhaW50cywgc2JzW2ldLmNhcGFiaWxpdGllcykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICBsZXQgY2FwYWJpbGl0aWVzID0gc2JzW2ldLmNhcGFiaWxpdGllcztcclxuICAgICAgICAgIGxldCBzYW5kYm94ID0gc2JzW2ldLnNhbmRib3gubmV3KGNhcGFiaWxpdGllcyk7XHJcbiAgICAgICAgICByZXR1cm4gc2FuZGJveDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGkrKztcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vbmUgb2Ygc3VwcG9ydGVkIHNhbmRib3hlcyBtYXRjaCB5b3VyIGNvbnN0cmFpbnRzJyk7XHJcbiAgICB9KTtcclxufVxyXG4iLCIvLyBqc2hpbnQgYnJvd3Nlcjp0cnVlLCBqcXVlcnk6IHRydWVcclxuXHJcbmNsYXNzIElkZW50aXRpZXNHVUkge1xyXG5cclxuICBjb25zdHJ1Y3RvcihndWlVUkwsIGlkbVVSTCwgbWVzc2FnZUJ1cykge1xyXG4gICAgY29uc29sZS5sb2coJ0lkZW50aXRpZXNHVUknLCB0aGlzKTtcclxuICAgIC8vaWYgKCFpZGVudGl0eU1vZHVsZSkgdGhyb3cgRXJyb3IoJ0lkZW50aXR5IE1vZHVsZSBub3Qgc2V0IScpO1xyXG4gICAgaWYgKCFtZXNzYWdlQnVzKSB0aHJvdyBFcnJvcignTWVzc2FnZSBCdXMgbm90IHNldCEnKTtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBfdGhpcy5fZ3VpVVJMID0gZ3VpVVJMO1xyXG4gICAgX3RoaXMuX2lkbVVSTCA9IGlkbVVSTDtcclxuICAgIF90aGlzLl9tZXNzYWdlQnVzID0gbWVzc2FnZUJ1cztcclxuICAgIF90aGlzLl9hbHJlYWR5UmVMb2dpbiA9IGZhbHNlO1xyXG4gICAgX3RoaXMuX2FscmVhZHlMb2dpbiA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuY2FsbElkZW50aXR5TW9kdWxlRnVuYygnZGVwbG95R1VJJywge30pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fYnVpbGREcmF3ZXIoKTtcclxuICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnUkVBRFk6JywgcmVzdWx0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuaXNMb2dnZWQgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdCBkcmF3ZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZGMtdGVtcG9yYXJ5LWRyYXdlcicpO1xyXG4gICAgY29uc3QgTURDVGVtcG9yYXJ5RHJhd2VyID0gbWRjLmRyYXdlci5NRENUZW1wb3JhcnlEcmF3ZXI7XHJcbiAgICBjb25zdCBkcmF3ZXIgPSBuZXcgTURDVGVtcG9yYXJ5RHJhd2VyKGRyYXdlckVsKTtcclxuXHJcbiAgICB0aGlzLl9kcmF3ZXJFbCA9IGRyYXdlckVsO1xyXG4gICAgdGhpcy5fZHJhd2VyID0gZHJhd2VyO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZXR0aW5ncy1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBkcmF3ZXIub3BlbiA9IHRydWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkcmF3ZXJFbC5hZGRFdmVudExpc3RlbmVyKCdNRENUZW1wb3JhcnlEcmF3ZXI6b3BlbicsICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIE1EQ1RlbXBvcmFyeURyYXdlcjpvcGVuJyk7XHJcbiAgICAgIHRoaXMuX2lzRHJhd2VyT3BlbiA9IHRydWU7XHJcbiAgICAgIHBhcmVudC5wb3N0TWVzc2FnZSh7IGJvZHk6IHsgbWV0aG9kOiAnc2hvd0FkbWluUGFnZScgfSwgdG86ICdydW50aW1lOmd1aS1tYW5hZ2VyJyB9LCAnKicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZHJhd2VyRWwuYWRkRXZlbnRMaXN0ZW5lcignTURDVGVtcG9yYXJ5RHJhd2VyOmNsb3NlJywgKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgTURDVGVtcG9yYXJ5RHJhd2VyOmNsb3NlJyk7XHJcbiAgICAgIHRoaXMuX2lzRHJhd2VyT3BlbiA9IGZhbHNlO1xyXG4gICAgICBwYXJlbnQucG9zdE1lc3NhZ2UoeyBib2R5OiB7IG1ldGhvZDogJ2hpZGVBZG1pblBhZ2UnIH0sIHRvOiAncnVudGltZTpndWktbWFuYWdlcicgfSwgJyonKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIGxvZ091dCgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBjb25zb2xlLmxvZygnSWRlbnRpdGllc0dVSTogbG9nZ2luZyBvdXQnKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnQnVpbGRpbmcgZHJhd2VyJyk7XHJcbiAgICAgIF90aGlzLl9idWlsZERyYXdlcigpO1xyXG5cclxuICAgICAgcmVzb2x2ZSgnR3VpIHJlc2V0Jyk7XHJcblxyXG5cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2J1aWxkRHJhd2VyKCkge1xyXG5cclxuICAgIGNvbnN0IGd1aVVSTCA9IHRoaXMuX2d1aVVSTDtcclxuXHJcbiAgICB0aGlzLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGd1aVVSTCwgbXNnID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IGZ1bmNOYW1lID0gbXNnLmJvZHkubWV0aG9kO1xyXG5cclxuICAgICAgaWYgKG1zZy50eXBlICE9PSAncmVzcG9uc2UnKSB7XHJcblxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNMb2dnZWQpIHtcclxuXHJcbiAgICAgICAgICBjb25zdCBjbGlja0Nsb3NlID0gbmV3IE1vdXNlRXZlbnQoJ2NsaWNrJyk7XHJcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MtYnRuJykuZGlzcGF0Y2hFdmVudChjbGlja0Nsb3NlKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGZ1bmNOYW1lID09PSAnb3BlblBvcHVwJykge1xyXG5cclxuICAgICAgICB0aGlzLm9wZW5Qb3B1cCgpLnRoZW4oKCkgPT4ge1xyXG5cclxuICAgICAgICAgIGxldCB1cmxyZWNlaXZlZCA9IG1zZy5ib2R5LnBhcmFtcy51cmxyZWNlaXZlZDtcclxuICAgICAgICAgIHRoaXMub3BlblBvcHVwKHVybHJlY2VpdmVkKS50aGVuKChyZXR1cm5lZFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHt0eXBlOiAnZXhlY3V0ZScsIHZhbHVlOiByZXR1cm5lZFZhbHVlLCBjb2RlOiAyMDB9O1xyXG4gICAgICAgICAgICBsZXQgcmVwbHlNc2cgPSB7aWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sIGJvZHk6IHZhbHVlfTtcclxuICAgICAgICAgICAgdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyZXBseU1zZyk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gKGlkZW50aXR5SW5mbykgPT4ge1xyXG5cclxuICAgICAgICB0aGlzLmlzTG9nZ2VkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5fYnVpbGRNZXNzYWdlKG1zZywgaWRlbnRpdHlJbmZvKTtcclxuXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblxyXG4gICAgICB0aGlzLl9nZXRJZGVudGl0aWVzKGNhbGxiYWNrLCB0cnVlKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9nZXRJZGVudGl0aWVzKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgX2J1aWxkTWVzc2FnZShtc2csIGlkZW50aXR5SW5mbykge1xyXG4gICAgbGV0IHJlcGx5TXNnO1xyXG4gICAgbGV0IHZhbHVlO1xyXG5cclxuICAgIGNvbnN0IGZyb20gPSBtc2cgPyBtc2cuZnJvbSA6IHRoaXMuX2d1aVVSTDtcclxuICAgIGNvbnN0IHRvID0gbXNnID8gbXNnLnRvIDogdGhpcy5faWRtVVJMO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdjaG9zZW4gaWRlbnRpdHk6ICcsIGlkZW50aXR5SW5mbyk7XHJcblxyXG4gICAgc3dpdGNoIChpZGVudGl0eUluZm8udHlwZSkge1xyXG4gICAgICBjYXNlICdpZHAnOlxyXG4gICAgICAgIHZhbHVlID0geyB0eXBlOiAnaWRwJywgdmFsdWU6IGlkZW50aXR5SW5mby52YWx1ZSwgY29kZTogMjAwIH07XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdpZGVudGl0eSc6XHJcbiAgICAgICAgdmFsdWUgPSB7IHR5cGU6ICdpZGVudGl0eScsIHZhbHVlOiBpZGVudGl0eUluZm8udmFsdWUsIGNvZGU6IDIwMCB9O1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB2YWx1ZSA9IHsgdHlwZTogJ2Vycm9yJywgdmFsdWU6ICdFcnJvciBvbiBpZGVudGl0eSBHVUknLCBjb2RlOiA0MDAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXBseU1zZyA9IHtpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogZnJvbSwgZnJvbTogdG8sIGJvZHk6IHZhbHVlIH07XHJcblxyXG4gICAgdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyZXBseU1zZyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SWRlbnRpdGllcyhjYWxsYmFjaywgb1BlbkRyYXdlcikge1xyXG5cclxuICAgIHJldHVybiB0aGlzLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoJ2dldElkZW50aXRpZXNUb0Nob29zZScsIHt9KS50aGVuKChyZXN1bHRPYmplY3QpID0+IHtcclxuICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLnNob3dJZHBzKHJlc3VsdE9iamVjdC5pZHBzLCBjYWxsYmFjayksIHRoaXMuc2hvd0RlZmF1bHRJZGVudGl0eShyZXN1bHRPYmplY3QuZGVmYXVsdElkZW50aXR5KSwgdGhpcy5zaG93SWRlbnRpdGllcyhyZXN1bHRPYmplY3QsIGNhbGxiYWNrLCBvUGVuRHJhd2VyKV0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5zaG93SWRwcyhyZXN1bHRPYmplY3QuaWRwcyksIHRoaXMuc2hvd0RlZmF1bHRJZGVudGl0eShyZXN1bHRPYmplY3QuZGVmYXVsdElkZW50aXR5KSwgdGhpcy5zaG93SWRlbnRpdGllcyhyZXN1bHRPYmplY3QpXSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIC8vIF9vcGVuRHJhd2VyKCkge1xyXG5cclxuICAvLyAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgLy8gICBjb25zdCBndWlVUkwgPSBfdGhpcy5fZ3VpVVJMO1xyXG5cclxuICAvLyAgIF90aGlzLnJlc3VsdFVSTCAgPSB1bmRlZmluZWQ7XHJcblxyXG4gIC8vICAgX3RoaXMuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoZ3VpVVJMLCBtc2cgPT4ge1xyXG4gIC8vICAgICBsZXQgaWRlbnRpdHlJbmZvID0gbXNnLmJvZHkudmFsdWU7XHJcbiAgLy8gICAgIGxldCBmdW5jTmFtZSA9IG1zZy5ib2R5Lm1ldGhvZDtcclxuICAvLyAgICAgbGV0IHZhbHVlO1xyXG4gIC8vICAgICBjb25zb2xlLmxvZygnW0lkZW50aXRpZXNHVUldIHJlY2VpdmVkIG1zZzogJywgbXNnKTtcclxuXHJcbiAgLy8gICAgIF90aGlzLnNob3dJZGVudGl0aWVzR1VJKG1zZy5ib2R5LnZhbHVlKS50aGVuKChpZGVudGl0eUluZm8pID0+IHtcclxuXHJcbiAgLy8gICAgICAgbGV0IHJlcGx5TXNnO1xyXG4gIC8vICAgICAgIGNvbnNvbGUubG9nKCdbSWRlbnRpdGllc0dVSV0gaWRlbnRpdHlJbmZvIGZyb20gR1VJOiAnLCBpZGVudGl0eUluZm8pO1xyXG5cclxuICAvLyAgICAgICAvL2hpZGUgY29uZmlnIHBhZ2Ugd2l0aCB0aGUgaWRlbnRpdHkgR1VJXHJcbiAgLy8gICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgYm9keTogeyBtZXRob2Q6ICdoaWRlQWRtaW5QYWdlJyB9LCB0bzogJ3J1bnRpbWU6Z3VpLW1hbmFnZXInIH0sICcqJyk7XHJcbiAgLy8gICAgICAgJCgnLmFkbWluLXBhZ2UnKS5hZGRDbGFzcygnaGlkZScpO1xyXG5cclxuICAvLyAgICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLnN0eWxlID0gJ2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQnO1xyXG4gIC8vICAgICAgICQoJy5pZGVudGl0aWVzLXNlY3Rpb24nKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gIC8vICAgICAgICQoJy5wb2xpY2llcy1zZWN0aW9uJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgLy8gICAgICAgc3dpdGNoIChpZGVudGl0eUluZm8udHlwZSkge1xyXG4gIC8vICAgICAgICAgY2FzZSAnaWRwJzpcclxuICAvLyAgICAgICAgICAgdmFsdWUgPSB7IHR5cGU6ICdpZHAnLCB2YWx1ZTogaWRlbnRpdHlJbmZvLnZhbHVlLCBjb2RlOiAyMDAgfTtcclxuICAvLyAgICAgICAgICAgcmVwbHlNc2cgPSB7IGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIHRvOiBtc2cuZnJvbSwgZnJvbTogbXNnLnRvLCBib2R5OiB2YWx1ZSB9O1xyXG4gIC8vICAgICAgICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyZXBseU1zZyk7XHJcbiAgLy8gICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAvLyAgICAgICAgIGNhc2UgJ2lkZW50aXR5JzpcclxuICAvLyAgICAgICAgICAgdmFsdWUgPSB7IHR5cGU6ICdpZGVudGl0eScsIHZhbHVlOiBpZGVudGl0eUluZm8udmFsdWUsIGNvZGU6IDIwMCB9O1xyXG4gIC8vICAgICAgICAgICByZXBseU1zZyA9IHsgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sIGJvZHk6IHZhbHVlIH07XHJcbiAgLy8gICAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHJlcGx5TXNnKTtcclxuICAvLyAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gIC8vICAgICAgICAgZGVmYXVsdDpcclxuICAvLyAgICAgICAgICAgdmFsdWUgPSB7IHR5cGU6ICdlcnJvcicsIHZhbHVlOiAnRXJyb3Igb24gaWRlbnRpdHkgR1VJJywgY29kZTogNDAwIH07XHJcbiAgLy8gICAgICAgICAgIHJlcGx5TXNnID0geyBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogbXNnLmZyb20sIGZyb206IG1zZy50bywgYm9keTogdmFsdWUgfTtcclxuICAvLyAgICAgICAgICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocmVwbHlNc2cpO1xyXG4gIC8vICAgICAgIH1cclxuICAvLyAgICAgfSk7XHJcblxyXG4gIC8vICAgICBpZiAoZnVuY05hbWUgPT09ICdvcGVuUG9wdXAnKSB7XHJcbiAgLy8gICAgICAgbGV0IHVybHJlY2VpdmVkID0gbXNnLmJvZHkucGFyYW1zLnVybHJlY2VpdmVkO1xyXG4gIC8vICAgICAgIF90aGlzLm9wZW5Qb3B1cCh1cmxyZWNlaXZlZCkudGhlbigocmV0dXJuZWRWYWx1ZSkgPT4ge1xyXG4gIC8vICAgICAgICAgbGV0IHZhbHVlID0ge3R5cGU6ICdleGVjdXRlJywgdmFsdWU6IHJldHVybmVkVmFsdWUsIGNvZGU6IDIwMH07XHJcbiAgLy8gICAgICAgICBsZXQgcmVwbHlNc2cgPSB7aWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sIGJvZHk6IHZhbHVlfTtcclxuICAvLyAgICAgICAgIF90aGlzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHJlcGx5TXNnKTtcclxuICAvLyAgICAgICB9KTtcclxuICAvLyAgICAgICByZXR1cm47IC8vIHRoaXMgYXZvaWRzIGdldHRpbmcgc3R1Y2sgaW4gdGhlIGlkZW50aXRpZXMgcGFnZVxyXG4gIC8vICAgICB9XHJcblxyXG4gIC8vICAgICAvLyB1bmhpZGUgdGhlIGNvbmZpZyBwYWdlIHdpdGggdGhlIGlkZW50aXR5IEdVSVxyXG4gIC8vICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLnN0eWxlID0gJ2JhY2tncm91bmQtY29sb3I6d2hpdGU7JztcclxuICAvLyAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgYm9keTogeyBtZXRob2Q6ICdzaG93QWRtaW5QYWdlJyB9LCB0bzogJ3J1bnRpbWU6Z3VpLW1hbmFnZXInIH0sICcqJyk7XHJcblxyXG4gIC8vICAgICBjb25zdCBjbGlja09wZW4gPSBuZXcgTW91c2VFdmVudCgnY2xpY2snKTtcclxuICAvLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWJ0bicpLmRpc3BhdGNoRXZlbnQoY2xpY2tPcGVuKTtcclxuXHJcbiAgLy8gICAgICQoJy5hZG1pbi1wYWdlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgLy8gICB9KTtcclxuICAvLyB9XHJcblxyXG4gIGNhbGxJZGVudGl0eU1vZHVsZUZ1bmMobWV0aG9kTmFtZSwgcGFyYW1ldGVycykge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0geyB0eXBlOiAnZXhlY3V0ZScsIHRvOiBfdGhpcy5faWRtVVJMLCBmcm9tOiBfdGhpcy5fZ3VpVVJMLFxyXG4gICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6ICdpZGVudGl0eScsIG1ldGhvZDogbWV0aG9kTmFtZSwgcGFyYW1zOiBwYXJhbWV0ZXJzIH19O1xyXG5cclxuICAgICAgdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtZXNzYWdlLCAocmVzKSA9PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHJlcy5ib2R5LnZhbHVlO1xyXG4gICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuUG9wdXAodXJscmVjZWl2ZWQpIHtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cclxuICAgICAgbGV0IHdpbjtcclxuICAgICAgaWYgKCF1cmxyZWNlaXZlZCkge1xyXG4gICAgICAgIHdpbiA9IHdpbmRvdy5vcGVuKCcnLCAnb3BlbklEcmVxdWVzdCcsICdsb2NhdGlvbj0xLHN0YXR1cz0xJyk7XHJcbiAgICAgICAgdGhpcy53aW4gPSB3aW47XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdpbiA9IHRoaXMud2luO1xyXG4gICAgICAgIHdpbi5sb2NhdGlvbi5ocmVmID0gdXJscmVjZWl2ZWQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGxldCB3aW4gPSB3aW5kb3cub3Blbih1cmxyZWNlaXZlZCwgJ29wZW5JRHJlcXVlc3QnLCAnbG9jYXRpb249MSxzdGF0dXM9MSxzY3JvbGxiYXJzPTEnKTtcclxuICAgICAgaWYgKHdpbmRvdy5jb3Jkb3ZhKSB7XHJcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRzdGFydCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIGxldCB1cmwgPSBlLnVybDtcclxuICAgICAgICAgIGxldCBjb2RlID0gL1xcJmNvZGU9KC4rKSQvLmV4ZWModXJsKTtcclxuICAgICAgICAgIGxldCBlcnJvciA9IC9cXCZlcnJvcj0oLispJC8uZXhlYyh1cmwpO1xyXG5cclxuICAgICAgICAgIGlmIChjb2RlIHx8IGVycm9yKSB7XHJcbiAgICAgICAgICAgIHdpbi5jbG9zZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh1cmwpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgnb3BlblBvcHVwIGVycm9yIDEgLSBzaG91bGQgbm90IGhhcHBlbicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBsZXQgcG9sbFRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAod2luLmNsb3NlZCkge1xyXG4gICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocG9sbFRpbWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gcmV0dXJuIHJlamVjdCgnU29tZSBlcnJvciBvY2N1cmVkIHdoZW4gdHJ5aW5nIHRvIGdldCBpZGVudGl0eS4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCh3aW4uZG9jdW1lbnQuVVJMLmluZGV4T2YoJ2FjY2Vzc190b2tlbicpICE9PSAtMSB8fCB3aW4uZG9jdW1lbnQuVVJMLmluZGV4T2YoJ2NvZGUnKSAhPT0gLTEpICYmIHdpbi5kb2N1bWVudC5VUkwuaW5kZXhPZihsb2NhdGlvbi5vcmlnaW4pICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHBvbGxUaW1lcik7XHJcbiAgICAgICAgICAgICAgbGV0IHVybCA9ICAgd2luLmRvY3VtZW50LlVSTDtcclxuXHJcbiAgICAgICAgICAgICAgcmVzb2x2ZSh1cmwpO1xyXG4gICAgICAgICAgICAgIHJldHVybiB3aW4uY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvL3JldHVybiByZWplY3QoJ29wZW5Qb3B1cCBlcnJvciAyIC0gc2hvdWxkIG5vdCBoYXBwZW4nKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIHNob3dJZGVudGl0aWVzR1VJKHJlY2VpdmVkSW5mbykge1xyXG4gIC8vICAgbGV0IF90aGlzID0gdGhpcztcclxuXHJcbiAgLy8gICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gIC8vICAgICBjb25zb2xlLmxvZygnW0lkZW50aXRpZXNHVUkuc2hvd0lkZW50aXRpZXNHVUldIHJlY2VpdmVkSW5mbzogJywgcmVjZWl2ZWRJbmZvKTtcclxuXHJcbiAgLy8gICAgIGxldCBpZGVudGl0eUluZm87XHJcbiAgLy8gICAgIGxldCB0b1JlbW92ZUlEO1xyXG5cclxuICAvLyAgICAgbGV0IGNhbGxiYWNrID0gKHZhbHVlKSA9PiB7XHJcbiAgLy8gICAgICAgY29uc29sZS5sb2coJ2Nob3NlbiBpZGVudGl0eTogJywgdmFsdWUpO1xyXG5cclxuICAvLyAgICAgICBjb25zdCBjbGlja0Nsb3NlID0gbmV3IE1vdXNlRXZlbnQoJ2NsaWNrJyk7XHJcbiAgLy8gICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNldHRpbmdzLWJ0bicpLmRpc3BhdGNoRXZlbnQoY2xpY2tDbG9zZSk7XHJcblxyXG4gIC8vICAgICAgIHJlc29sdmUoe3R5cGU6ICdpZGVudGl0eScsIHZhbHVlOiB2YWx1ZX0pO1xyXG4gIC8vICAgICB9O1xyXG5cclxuICAvLyAgICAgX3RoaXMuX2NoZWNrUmVjZWl2ZWRJbmZvKHJlY2VpdmVkSW5mbykudGhlbigocmVzdWx0T2JqZWN0KSA9PiB7XHJcbiAgLy8gICAgICAgaWRlbnRpdHlJbmZvID0gcmVzdWx0T2JqZWN0LmlkZW50aXR5SW5mbztcclxuICAvLyAgICAgICB0b1JlbW92ZUlEID0gcmVzdWx0T2JqZWN0LnRvUmVtb3ZlSUQ7XHJcblxyXG4gIC8vICAgICAgICQoJy5wb2xpY2llcy1zZWN0aW9uJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAvLyAgICAgICAkKCcuaWRlbnRpdGllcy1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgLy8gICAgICAgX3RoaXMuc2hvd0lkcHMocmVjZWl2ZWRJbmZvLmlkcHMsIGNhbGxiYWNrKTtcclxuXHJcbiAgLy8gICAgICAgX3RoaXMuc2hvd0lkZW50aXRpZXMoaWRlbnRpdHlJbmZvLmlkZW50aXRpZXMsIHRvUmVtb3ZlSUQpLnRoZW4oKGlkZW50aXR5KSA9PiB7XHJcbiAgLy8gICAgICAgICBjb25zb2xlLmxvZygnY2hvc2VuIGlkZW50aXR5OiAnLCBpZGVudGl0eSk7XHJcbiAgLy8gICAgICAgICByZXNvbHZlKHt0eXBlOiAnaWRlbnRpdHknLCB2YWx1ZTogaWRlbnRpdHl9KTtcclxuICAvLyAgICAgICB9KTtcclxuXHJcbiAgLy8gICAgICAgbGV0IGlkcHMgPSBbXTtcclxuICAvLyAgICAgICBsZXQgaWRwc09iamVjdHMgPSBpZGVudGl0eUluZm8uaWRwcztcclxuXHJcbiAgLy8gICAgICAgaWRwc09iamVjdHMuZm9yRWFjaChmdW5jdGlvbihlbnRyeSkge1xyXG4gIC8vICAgICAgICAgaWYoZW50cnkudHlwZSAmJiBlbnRyeS50eXBlID09ICdpZFRva2VuJykge1xyXG4gIC8vICAgICAgICAgICBpZHBzLnB1c2goZW50cnkuZG9tYWluKTtcclxuICAvLyAgICAgICAgIH1cclxuICAvLyAgICAgICB9KTtcclxuXHJcbiAgLy8gICAgICAgJCgnI2lkcHJvdmlkZXJzJykuaHRtbChfdGhpcy5fZ2V0TGlzdChpZHBzKSk7XHJcbiAgLy8gICAgICAgJCgnI2lkcHJvdmlkZXJzJykub2ZmKCk7XHJcbiAgLy8gICAgICAgLy8gJCgnI2lkcHJvdmlkZXJzJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiBfdGhpcy5vYnRhaW5OZXdJZGVudGl0eShldmVudCwgY2FsbGJhY2ssIHRvUmVtb3ZlSUQpKTtcclxuICAvLyAgICAgICAvLyQoJy5iYWNrJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiBfdGhpcy5nb0hvbWUoKSk7XHJcbiAgLy8gICAgICAgJCgnLmlkZW50aXRpZXMtcmVzZXQnKS5vZmYoKTtcclxuICAvLyAgICAgICAvLyAkKCcuaWRlbnRpdGllcy1yZXNldCcpLm9uKCdjbGljaycsIChldmVudCkgPT4gX3RoaXMuX3Jlc2V0SWRlbnRpdGllcyhjYWxsYmFjaykpO1xyXG4gIC8vICAgICB9KTtcclxuICAvLyAgIH0pO1xyXG4gIC8vIH1cclxuXHJcbiAgX2NoZWNrUmVjZWl2ZWRJbmZvKHJlY2VpdmVkSW5mbykge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblxyXG4gICAgICBsZXQgaWRlbnRpdHlJbmZvO1xyXG4gICAgICBsZXQgdG9SZW1vdmVJRDtcclxuXHJcbiAgICAgIGlmIChyZWNlaXZlZEluZm8pIHtcclxuICAgICAgICBpZGVudGl0eUluZm8gPSByZWNlaXZlZEluZm87XHJcbiAgICAgICAgdG9SZW1vdmVJRCA9IGZhbHNlO1xyXG4gICAgICAgIHJlc29sdmUoe2lkZW50aXR5SW5mbzogaWRlbnRpdHlJbmZvLCB0b1JlbW92ZUlEOiB0b1JlbW92ZUlEfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9SZW1vdmVJRCA9IHRydWU7XHJcbiAgICAgICAgX3RoaXMuY2FsbElkZW50aXR5TW9kdWxlRnVuYygnZ2V0SWRlbnRpdGllc1RvQ2hvb3NlJywge30pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSh7aWRlbnRpdHlJbmZvOiByZXN1bHQsIHRvUmVtb3ZlSUQ6IHRvUmVtb3ZlSUR9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzaG93SWRwcyhpZHBzKSB7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1tJZGVudGl0aWVzR1VJLnNob3dJZHBzXSA6ICcsIGlkcHMpO1xyXG5cclxuICAgIGxldCBpZHBzTGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkcHMtbGlzdCcpO1xyXG5cclxuICAgIGNvbnN0IGNsaWNrRXZlbnQgPSAoZXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgZWwgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICBjb25zdCBpZHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWRwJyk7XHJcblxyXG4gICAgICB0aGlzLmxvZ2luV2l0aElEUChpZHApLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd2YWx1ZSBoZXJlOiAnLCByZXN1bHQudmFsdWUpO1xyXG4gICAgICAgIC8vIHJlc3VsdC52YWx1ZSA9IHJlc3VsdC52YWx1ZS51c2VyVVJMXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICB0aGlzLmNhbGxiYWNrKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlkcHMuZm9yRWFjaCgoa2V5KSA9PiB7XHJcblxyXG4gICAgICBsZXQgbGlua0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmstJyArIGtleS5kb21haW4pO1xyXG5cclxuICAgICAgaWYgKCFsaW5rRWwpIHtcclxuICAgICAgICBsaW5rRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgbGlua0VsLnNldEF0dHJpYnV0ZSgnaWQnLCAnbGluay0nICsga2V5LmRvbWFpbik7XHJcbiAgICAgICAgbGlua0VsLnNldEF0dHJpYnV0ZSgnZGF0YS1pZHAnLCBrZXkuZG9tYWluKTtcclxuICAgICAgICBsaW5rRWwuY2xhc3NMaXN0ID0gJ21kYy1saXN0LWl0ZW0gbGluay0nICsga2V5LmRvbWFpbjtcclxuICAgICAgICBsaW5rRWwuaHJlZiA9ICcjJztcclxuXHJcbiAgICAgICAgY29uc3QgbGlua0VsVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGtleS5kb21haW4pO1xyXG5cclxuICAgICAgICBsZXQgbmFtZSA9IGtleS5kb21haW47XHJcbiAgICAgICAgaWYgKG5hbWUuaW5kZXhPZignLicpICE9PSAtMSkge1xyXG4gICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUuaW5kZXhPZignLicpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbmFtZSA9ICdxdWVzdGlvbic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpbWdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIGltZ0VsLmNsYXNzTGlzdCA9ICdtZGMtbGlzdC1pdGVtX19zdGFydC1kZXRhaWwnO1xyXG4gICAgICAgIGltZ0VsLnNyYyA9ICcuL2Fzc2V0cy8nICsgbmFtZSArICcuc3ZnJztcclxuICAgICAgICBpbWdFbC53aWR0aCA9IDMwO1xyXG4gICAgICAgIGltZ0VsLmhlaWdodCA9IDMwO1xyXG5cclxuICAgICAgICBpbWdFbC5vbmVycm9yID0gKGUpID0+IHsgZS5zcmNFbGVtZW50LnNyYyA9ICcuL2Fzc2V0cy9xdWVzdGlvbi5zdmcnOyB9O1xyXG5cclxuICAgICAgICBsaW5rRWwuYXBwZW5kQ2hpbGQoaW1nRWwpO1xyXG4gICAgICAgIGxpbmtFbC5hcHBlbmRDaGlsZChsaW5rRWxUZXh0KTtcclxuXHJcbiAgICAgICAgaWRwc0xpc3RFbC5hcHBlbmRDaGlsZChsaW5rRWwpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxpbmtFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrRXZlbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsaW5rRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0V2ZW50KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBzaG93RGVmYXVsdElkZW50aXR5KGlkZW50aXR5KSB7XHJcblxyXG4gICAgaWYgKGlkZW50aXR5KSB7XHJcblxyXG4gICAgICB0aGlzLmlzTG9nZ2VkID0gdHJ1ZTtcclxuXHJcbiAgICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZGMtbGlzdC0tYXZhdGFyLWxpc3QnKTtcclxuXHJcbiAgICAgIGxldCBpdGVtRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS0nICsgaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCk7XHJcblxyXG4gICAgICBpZiAoIWl0ZW1FbCkge1xyXG5cclxuICAgICAgICBpdGVtRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgIGl0ZW1FbC5pZCA9ICdpdGVtLScgKyBpZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMO1xyXG4gICAgICAgIGl0ZW1FbC5jbGFzc0xpc3QgPSAnbWRjLWxpc3QtaXRlbSBpdGVtLScgKyBpZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMO1xyXG4gICAgICAgIGl0ZW1FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdXNlclVSTCcsIGlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwpO1xyXG5cclxuICAgICAgICBjb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICBwcm9maWxlSW1hZ2UuY2xhc3NMaXN0ID0gJ21kYy1saXN0LWl0ZW1fX3N0YXJ0LWRldGFpbCc7XHJcbiAgICAgICAgcHJvZmlsZUltYWdlLndpZHRoID0gNTY7XHJcbiAgICAgICAgcHJvZmlsZUltYWdlLmhlaWdodCA9IDU2O1xyXG4gICAgICAgIHByb2ZpbGVJbWFnZS5hbHQgPSBpZGVudGl0eS51c2VyUHJvZmlsZS5uYW1lO1xyXG4gICAgICAgIHByb2ZpbGVJbWFnZS5zcmMgPSBpZGVudGl0eS51c2VyUHJvZmlsZS5waWN0dXJlO1xyXG4gICAgICAgIGl0ZW1FbC5hcHBlbmRDaGlsZChwcm9maWxlSW1hZ2UpO1xyXG5cclxuICAgICAgICBjb25zdCB0ZXh0MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICB0ZXh0MS5jbGFzc0xpc3QgPSAnbmFtZSBtZGMtbGlzdC1pdGVtX190ZXh0JztcclxuICAgICAgICB0ZXh0MS50ZXh0Q29udGVudCA9IGlkZW50aXR5LnVzZXJQcm9maWxlLm5hbWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIHRleHQyLmNsYXNzTGlzdCA9ICdlbWFpbCBtZGMtbGlzdC1pdGVtX19zZWNvbmRhcnktdGV4dCc7XHJcbiAgICAgICAgdGV4dDIudGV4dENvbnRlbnQgPSBpZGVudGl0eS51c2VyUHJvZmlsZS5lbWFpbDtcclxuXHJcbiAgICAgICAgdGV4dDEuYXBwZW5kQ2hpbGQodGV4dDIpO1xyXG4gICAgICAgIGl0ZW1FbC5hcHBlbmRDaGlsZCh0ZXh0MSk7XHJcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGl0ZW1FbCk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHNob3dJZGVudGl0aWVzKGlEcywgY2FsbGJhY2ssIG9QZW5EcmF3ZXIgPSBmYWxzZSkge1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnW0lkZW50aXRpZXNHVUkuc2hvd015SWRlbnRpdGllc10gOiAnLCBpRHMuaWRlbnRpdGllcywgaURzLmRlZmF1bHRJZGVudGl0eSk7XHJcblxyXG4gICAgICBjb25zdCBpZGVudGl0aWVzID0gaURzLmlkZW50aXRpZXM7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBpRHMuZGVmYXVsdElkZW50aXR5ID8gaURzLmRlZmF1bHRJZGVudGl0eS51c2VyVVJMIDogJyc7XHJcblxyXG4gICAgICBsZXQgYWN0aXZlSWRlbnRpdGllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmUtaWRlbnRpdGllcycpO1xyXG5cclxuICAgICAgT2JqZWN0LmtleXMoaWRlbnRpdGllcykuZm9yRWFjaCgoa2V5KSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGV4aXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmstJyArIGtleSk7XHJcbiAgICAgICAgaWYgKGV4aXN0KSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgICBjb25zdCBsaW5rRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgbGlua0VsLmhyZWYgPSAnIyc7XHJcbiAgICAgICAgbGlua0VsLmlkID0gJ2xpbmstJyArIGtleTtcclxuICAgICAgICBsaW5rRWwuY2xhc3NMaXN0ID0gJ21kYy1saXN0LWl0ZW0nO1xyXG4gICAgICAgIGxpbmtFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdXNlclVSTCcsIGtleSk7XHJcblxyXG4gICAgICAgIGlmIChrZXkgPT09IGN1cnJlbnQpIHtcclxuICAgICAgICAgIGxpbmtFbC5jbGFzc0xpc3QgKz0gJyBtZGMtdGVtcG9yYXJ5LWRyYXdlci0tc2VsZWN0ZWQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGlua0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcblxyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBlbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgICBjb25zdCB1c2VyVVJMID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXVzZXJVUkwnKTtcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygndXNlclVSTDonLCB1c2VyVVJMLCBjYWxsYmFjaywgZWwpO1xyXG5cclxuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayh1c2VyVVJMKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByb2ZpbGVJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgIHByb2ZpbGVJbWFnZS5jbGFzc0xpc3QgPSAnbWRjLWxpc3QtaXRlbV9fc3RhcnQtZGV0YWlsJztcclxuICAgICAgICBwcm9maWxlSW1hZ2Uud2lkdGggPSA0MDtcclxuICAgICAgICBwcm9maWxlSW1hZ2UuaGVpZ2h0ID0gNDA7XHJcbiAgICAgICAgcHJvZmlsZUltYWdlLmFsdCA9IGlkZW50aXRpZXNba2V5XS51c2VyUHJvZmlsZS5uYW1lO1xyXG4gICAgICAgIHByb2ZpbGVJbWFnZS5zcmMgPSBpZGVudGl0aWVzW2tleV0udXNlclByb2ZpbGUucGljdHVyZTtcclxuICAgICAgICBwcm9maWxlSW1hZ2Uub25lcnJvciA9IChlKSA9PiB7IGUuc3JjRWxlbWVudC5zcmMgPSAnLi9hc3NldHMvcXVlc3Rpb24uc3ZnJzsgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdGV4dDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgdGV4dDEuY2xhc3NMaXN0ID0gJ25hbWUgbWRjLWxpc3QtaXRlbV9fdGV4dCc7XHJcbiAgICAgICAgdGV4dDEudGV4dENvbnRlbnQgPSBpZGVudGl0aWVzW2tleV0udXNlclByb2ZpbGUubmFtZTtcclxuXHJcbiAgICAgICAgY29uc3QgdGV4dDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgdGV4dDIuY2xhc3NMaXN0ID0gJ2VtYWlsIG1kYy1saXN0LWl0ZW1fX3NlY29uZGFyeS10ZXh0JztcclxuICAgICAgICB0ZXh0Mi50ZXh0Q29udGVudCA9IGlkZW50aXRpZXNba2V5XS51c2VyUHJvZmlsZS5lbWFpbDtcclxuXHJcbiAgICAgICAgdGV4dDEuYXBwZW5kQ2hpbGQodGV4dDIpO1xyXG5cclxuICAgICAgICBsaW5rRWwuYXBwZW5kQ2hpbGQocHJvZmlsZUltYWdlKTtcclxuICAgICAgICBsaW5rRWwuYXBwZW5kQ2hpbGQodGV4dDEpO1xyXG5cclxuICAgICAgICBhY3RpdmVJZGVudGl0aWVzLmFwcGVuZENoaWxkKGxpbmtFbCk7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChvUGVuRHJhd2VyICYmICghdGhpcy5fYWxyZWFkeVJlTG9naW4pKSB7XHJcbiAgICAgICAgdGhpcy5fZHJhd2VyLm9wZW4gPSB0cnVlXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChvUGVuRHJhd2VyICYmICghdGhpcy5fYWxyZWFkeVJlTG9naW4pICYmICghdGhpcy5fYWxyZWFkeUxvZ2luKSkge1xyXG4gICAgICAgIHRoaXMuX2FscmVhZHlSZUxvZ2luID0gdHJ1ZTtcclxuICAgICAgICBwYXJlbnQucG9zdE1lc3NhZ2UoeyBib2R5OiB7IG1ldGhvZDogJ3Rva2VuRXhwaXJlZCcgfSwgdG86ICdydW50aW1lOmd1aS1tYW5hZ2VyJyB9LCAnKicpO1xyXG4gICAgICB9XHJcblxyXG5cclxuXHJcblxyXG4vKlxyXG4gICAgICBpZiAoT2JqZWN0LmtleXMoaWRlbnRpdGllcykubGVuZ3RoID09PSAxKSB7XHJcblxyXG4gICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgY2FsbGJhY2soe3R5cGU6ICdpZGVudGl0eScsIHZhbHVlOiBjdXJyZW50fSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZSh7dHlwZTogJ2lkZW50aXR5JywgdmFsdWU6IGN1cnJlbnR9KTtcclxuICAgICAgfSovXHJcblxyXG5cclxuICAgICAgLy8gbGV0IGNhbGxiYWNrID0gKGlkZW50aXR5KSA9PiB7XHJcbiAgICAgIC8vICAgcmVzb2x2ZShpZGVudGl0eSk7XHJcbiAgICAgIC8vIH07XHJcblxyXG4gICAgICAvLyBpZiAoIXRvUmVtb3ZlSUQpIHtcclxuICAgICAgLy8gICAkKCcuY2xpY2thYmxlLWNlbGwnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IF90aGlzLmNoYW5nZUlEKGV2ZW50LCBjYWxsYmFjaykpO1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgICAvLyAkKCcucmVtb3ZlLWlkJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiBfdGhpcy5yZW1vdmVJRChpRHMpKTtcclxuXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUlEKGV2ZW50LCBlbWFpbHMpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBsZXQgcm93ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcclxuICAgIGxldCBpZFRvUmVtb3ZlID0gcm93LmNoaWxkcmVuWzBdLnRleHRDb250ZW50O1xyXG4gICAgbGV0IGRvbWFpbiA9IHJvdy5jaGlsZHJlblsxXS50ZXh0Q29udGVudDtcclxuXHJcbiAgICBfdGhpcy5jYWxsSWRlbnRpdHlNb2R1bGVGdW5jKCd1bnJlZ2lzdGVySWRlbnRpdHknLCB7IGVtYWlsOiBpZFRvUmVtb3ZlIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICBsZXQgbnVtRW1haWxzID0gZW1haWxzLmxlbmd0aDtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1FbWFpbHM7IGkrKykge1xyXG4gICAgICAgIGlmIChlbWFpbHNbaV0uZW1haWwgPT09IGlkVG9SZW1vdmUpIHtcclxuICAgICAgICAgIGVtYWlscy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG4gICAgICBfdGhpcy5zaG93SWRlbnRpdGllcyhlbWFpbHMsIHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy9fdGhpcy5pZGVudGl0eU1vZHVsZS51bnJlZ2lzdGVySWRlbnRpdHkoaWRUb1JlbW92ZSk7XHJcblxyXG4gIH1cclxuXHJcbiAgYXV0aG9yaXNlKGlkcCwgcmVzb3VyY2UpIHtcclxuXHJcblxyXG4gICAgcmV0dXJuIHRoaXMub3BlblBvcHVwKClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7IHNjb3BlOiByZXNvdXJjZSwgaWRwRG9tYWluOiBpZHAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsSWRlbnRpdHlNb2R1bGVGdW5jKCdnZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludCcsIGRhdGEpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0lkZW50aXRpZXNHVUkuYXV0aG9yaXNlXSByZWNlaXZlZFVSTCBmcm9tIGlkcCBQcm94eTogJyArIHZhbHVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlblBvcHVwKHZhbHVlKTtcclxuICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbSWRlbnRpdGllc0dVSS5hdXRob3Jpc2Uub3BlblBvcHVwLnJlc3VsdF0nLCByZXN1bHQpO1xyXG5cclxuICAgICAgICAvLyByZXNvdXJjZSBhcyBhcnJheVxyXG5cclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHsgcmVzb3VyY2VzOiBbcmVzb3VyY2VdLCBpZHBEb21haW46IGlkcCwgbG9naW46IHJlc3VsdCB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoJ2dldEFjY2Vzc1Rva2VuJywgZGF0YSk7XHJcbiAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnW0lkZW50aXRpZXNHVUkuYXV0aG9yaXNlLmdldEFjY2Vzc1Rva2VuLnJlc3VsdF0nLCByZXN1bHQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoJ2FkZEFjY2Vzc1Rva2VuJywgcmVzdWx0KTtcclxuICAgICAgfSkudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICB0aGlzLl9kcmF3ZXIub3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgbG9naW5XaXRoSURQKGlkcCkge1xyXG5cclxuXHJcbiAgICBsZXQgX3B1YmxpY0tleTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5vcGVuUG9wdXAoKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbElkZW50aXR5TW9kdWxlRnVuYygnZ2V0TXlQdWJsaWNLZXknLCB7fSk7XHJcbiAgICAgIH0pLnRoZW4oKHB1YmxpY0tleSkgPT4ge1xyXG4gICAgICAgIF9wdWJsaWNLZXkgPSBwdWJsaWNLZXk7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHsgY29udGVudHM6IHB1YmxpY0tleSwgb3JpZ2luOiAnb3JpZ2luJywgdXNlcm5hbWVIaW50OiB1bmRlZmluZWQsIGlkcERvbWFpbjogaWRwIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbElkZW50aXR5TW9kdWxlRnVuYygnc2VuZEdlbmVyYXRlTWVzc2FnZScsIGRhdGEpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0lkZW50aXRpZXNHVUkub2J0YWluTmV3SWRlbnRpdHldIHJlY2VpdmVkVVJMIGZyb20gaWRwIFByb3h5OiAnICsgdmFsdWUubG9naW5Vcmwuc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nKTtcclxuXHJcbiAgICAgICAgbGV0IHVybCA9IHZhbHVlLmxvZ2luVXJsO1xyXG4gICAgICAgIGxldCBmaW5hbFVSTDtcclxuXHJcbiAgICAgICAgLy9jaGVjayBpZiB0aGUgcmVjZWl2ZWRVUkwgY29udGFpbnMgdGhlIHJlZGlyZWN0IGZpZWxkIGFuZCByZXBsYWNlIGl0XHJcbiAgICAgICAgaWYgKHVybC5pbmRleE9mKCdyZWRpcmVjdF91cmknKSAhPT0gLTEpIHtcclxuICAgICAgICAgIGxldCBmaXJzdFBhcnQgPSB1cmwuc3Vic3RyaW5nKDAsIHVybC5pbmRleE9mKCdyZWRpcmVjdF91cmknKSk7XHJcbiAgICAgICAgICBsZXQgc2Vjb25kQXV4UGFydCA9IHVybC5zdWJzdHJpbmcodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaScpLCB1cmwubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICBsZXQgc2Vjb25kUGFydCA9IHNlY29uZEF1eFBhcnQuc3Vic3RyaW5nKHNlY29uZEF1eFBhcnQuaW5kZXhPZignJicpLCB1cmwubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAvL2NoZWNrIGlmIHRoZSByZWRkaXJlY3QgZmllbGQgaXMgdGhlIGxhc3QgZmllbGQgb2YgdGhlIFVSTFxyXG4gICAgICAgICAgaWYgKHNlY29uZFBhcnQuaW5kZXhPZignJicpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBmaW5hbFVSTCA9IGZpcnN0UGFydCArICdyZWRpcmVjdF91cmk9JyArIGxvY2F0aW9uLm9yaWdpbiArIHNlY29uZFBhcnQ7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmaW5hbFVSTCA9IGZpcnN0UGFydCArICdyZWRpcmVjdF91cmk9JyArIGxvY2F0aW9uLm9yaWdpbjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVzdWx0VVJMID0gZmluYWxVUkwgfHwgdXJsO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnW0lkZW50aXRpZXNHVUkub3BlblBvcHVwXScsIHRoaXMucmVzdWx0VVJMKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVuUG9wdXAodGhpcy5yZXN1bHRVUkwpO1xyXG4gICAgICB9KS50aGVuKChpZGVudGl0eSkgPT4ge1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnW0lkZW50aXRpZXNHVUkub3BlblBvcHVwLnJlc3VsdF0nLCBpZGVudGl0eSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7IGNvbnRlbnRzOiBfcHVibGljS2V5LCBvcmlnaW46ICdvcmlnaW4nLCB1c2VybmFtZUhpbnQ6IGlkZW50aXR5LCBpZHBEb21haW46IGlkcCB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoJ3NlbmRHZW5lcmF0ZU1lc3NhZ2UnLCBkYXRhKTtcclxuICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbSWRlbnRpdGllc0dVSS5zZW5kR2VuZXJhdGVNZXNzYWdlLnJlc3VsdF0nLCByZXN1bHQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoJ2FkZEFzc2VydGlvbicsIHJlc3VsdCk7XHJcbiAgICAgIH0pLnRoZW4oKHZhbHVlKSA9PiB7XHJcblxyXG4gICAgICAgIHRoaXMuX2RyYXdlci5vcGVuID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgdXNlclVSTCA9IHt0eXBlOiAnaWRlbnRpdHknLCB2YWx1ZTogdmFsdWUudXNlclByb2ZpbGUudXNlclVSTH07XHJcbiAgICAgICAgLy8gY29uc3QgdXNlcklkZW50aXR5ID0ge3R5cGU6ICdpZGVudGl0eScsIHZhbHVlOiB2YWx1ZS51c2VyUHJvZmlsZX07XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbSWRlbnRpdGllc0dVSS5sb2dpbldpdGhJRFAgZmluYWxdJywgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuX2FscmVhZHlMb2dpbiA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJVUkw7XHJcbiAgICAgICAgLy8gcmV0dXJuIHVzZXJJZGVudGl0eTtcclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgLy8gb2J0YWluTmV3SWRlbnRpdHkoZXZlbnQsIGNhbGxiYWNrLCB0b1JlbW92ZUlEKSB7XHJcbiAgLy8gICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gIC8vICAgbGV0IGlkUHJvdmlkZXIgPSBldmVudC50YXJnZXQudGV4dENvbnRlbnQ7XHJcbiAgLy8gICBsZXQgaWRQcm92aWRlcjIgPSBldmVudC50YXJnZXQudGV4dDtcclxuXHJcbiAgLy8gICBfdGhpcy5jYWxsSWRlbnRpdHlNb2R1bGVGdW5jKCdnZXRNeVB1YmxpY0tleScsIHt9KS50aGVuKChwdWJsaWNLZXkpID0+IHtcclxuICAvLyAgICAgLy8gbGV0IHB1YmxpY0tleSA9IGJ0b2Eoa2V5UGFpci5wdWJsaWMpO1xyXG5cclxuICAvLyAgICAgX3RoaXMuY2FsbElkZW50aXR5TW9kdWxlRnVuYygnc2VuZEdlbmVyYXRlTWVzc2FnZScsXHJcbiAgLy8gICAgICAgeyBjb250ZW50czogcHVibGljS2V5LCBvcmlnaW46ICdvcmlnaW4nLCB1c2VybmFtZUhpbnQ6IHVuZGVmaW5lZCwgaWRwRG9tYWluOiBpZFByb3ZpZGVyLCB9KS50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gIC8vICAgICAgIGNvbnNvbGUubG9nKCdbSWRlbnRpdGllc0dVSS5vYnRhaW5OZXdJZGVudGl0eV0gcmVjZWl2ZWRVUkwgZnJvbSBpZHAgUHJveHk6ICcgKyB2YWx1ZS5sb2dpblVybC5zdWJzdHJpbmcoMCwgMjApICsgJy4uLicpO1xyXG5cclxuICAvLyAgICAgICBsZXQgdXJsID0gdmFsdWUubG9naW5Vcmw7XHJcbiAgLy8gICAgICAgbGV0IGZpbmFsVVJMO1xyXG5cclxuICAvLyAgICAgICAvL2NoZWNrIGlmIHRoZSByZWNlaXZlZFVSTCBjb250YWlucyB0aGUgcmVkaXJlY3QgZmllbGQgYW5kIHJlcGxhY2UgaXRcclxuICAvLyAgICAgICBpZiAodXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaScpICE9PSAtMSkge1xyXG4gIC8vICAgICAgICAgbGV0IGZpcnN0UGFydCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmluZGV4T2YoJ3JlZGlyZWN0X3VyaScpKTtcclxuICAvLyAgICAgICAgIGxldCBzZWNvbmRBdXhQYXJ0ID0gdXJsLnN1YnN0cmluZyh1cmwuaW5kZXhPZigncmVkaXJlY3RfdXJpJyksIHVybC5sZW5ndGgpO1xyXG5cclxuICAvLyAgICAgICAgIGxldCBzZWNvbmRQYXJ0ID0gc2Vjb25kQXV4UGFydC5zdWJzdHJpbmcoc2Vjb25kQXV4UGFydC5pbmRleE9mKCcmJyksIHVybC5sZW5ndGgpO1xyXG5cclxuICAvLyAgICAgICAgIC8vY2hlY2sgaWYgdGhlIHJlZGRpcmVjdCBmaWVsZCBpcyB0aGUgbGFzdCBmaWVsZCBvZiB0aGUgVVJMXHJcbiAgLy8gICAgICAgICBpZiAoc2Vjb25kUGFydC5pbmRleE9mKCcmJykgIT09IC0xKSB7XHJcbiAgLy8gICAgICAgICAgIGZpbmFsVVJMID0gZmlyc3RQYXJ0ICsgJ3JlZGlyZWN0X3VyaT0nICsgbG9jYXRpb24ub3JpZ2luICsgc2Vjb25kUGFydDtcclxuICAvLyAgICAgICAgIH0gZWxzZSB7XHJcbiAgLy8gICAgICAgICAgIGZpbmFsVVJMID0gZmlyc3RQYXJ0ICsgJ3JlZGlyZWN0X3VyaT0nICsgbG9jYXRpb24ub3JpZ2luO1xyXG4gIC8vICAgICAgICAgfVxyXG4gIC8vICAgICAgIH1cclxuXHJcbiAgLy8gICAgICAgX3RoaXMucmVzdWx0VVJMID0gZmluYWxVUkwgfHwgdXJsO1xyXG5cclxuICAvLyAgICAgICAkKCcubG9naW4taWRwJykuaHRtbCgnPHA+Q2hvc2VuIElEUDogJyArIGlkUHJvdmlkZXIgKyAnPC9wPicpO1xyXG4gIC8vICAgICAgICQoJy5sb2dpbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgLy8gICAgICAgJCgnLmxvZ2luLWJ0bicpLm9mZigpO1xyXG4gIC8vICAgICAgICQoJy5sb2dpbi1idG4nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAvLyAgICAgICAgICQoJy5sb2dpbicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgLy8gICAgICAgICAvLyBfdGhpcy5fYXV0aGVudGljYXRlVXNlcihwdWJsaWNLZXksIHZhbHVlLCAnb3JpZ2luJywgaWRQcm92aWRlcikudGhlbigoZW1haWwpID0+IHtcclxuICAvLyAgICAgICAgIC8vICAgY2FsbGJhY2soZW1haWwpO1xyXG4gIC8vICAgICAgICAgLy8gICBfdGhpcy5zaG93SWRlbnRpdGllc0dVSSgpO1xyXG4gIC8vICAgICAgICAgLy8gfSk7XHJcbiAgLy8gICAgICAgfSk7XHJcbiAgLy8gICAgIH0pO1xyXG4gIC8vICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKCdvYnRhbmluIG5ldyBpZGVudGl0eScsIGVycikpO1xyXG5cclxuICAvLyB9XHJcblxyXG4gIF9nZXRMaXN0KGl0ZW1zKSB7XHJcbiAgICBsZXQgbGlzdCA9ICcnO1xyXG4gICAgbGV0IG51bUl0ZW1zID0gaXRlbXMubGVuZ3RoO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtSXRlbXM7IGkrKykge1xyXG4gICAgICBsaXN0ICs9ICc8bGkgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT4nO1xyXG4gICAgICBsaXN0ICs9ICc8bGk+PGEgY2xhc3M9XCJjZW50ZXItYWxpZ25cIj4nICsgaXRlbXNbaV0gKyAnPC9hPjwvbGk+JztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGlzdDtcclxuICB9XHJcblxyXG4gIF9hdXRoZW50aWNhdGVVc2VyKHB1YmxpY0tleSwgdmFsdWUsIG9yaWdpbiwgaWRQcm92aWRlcikge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIGxldCB1cmwgPSBfdGhpcy5yZXN1bHRVUkw7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgIF90aGlzLm9wZW5Qb3B1cCh1cmwpLnRoZW4oKGlkZW50aXR5KSA9PiB7XHJcblxyXG4gICAgICAgIF90aGlzLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoJ3NlbmRHZW5lcmF0ZU1lc3NhZ2UnLFxyXG4gICAgICAgICAgeyBjb250ZW50czogcHVibGljS2V5LCBvcmlnaW46IG9yaWdpbiwgdXNlcm5hbWVIaW50OiBpZGVudGl0eSwgaWRwRG9tYWluOiBpZFByb3ZpZGVyIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG5cclxuICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuXHJcbiAgICAgICAgICAgIC8vX3RoaXMuaWRlbnRpdHlNb2R1bGUuc3RvcmVJZGVudGl0eShyZXN1bHQsIGtleVBhaXIpLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIF90aGlzLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoJ2FkZEFzc2VydGlvbicsIHJlc3VsdCkudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlLnVzZXJQcm9maWxlLnVzZXJVUkwpO1xyXG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlamVjdCgnZXJyb3Igb24gb2J0YWluaW5nIGlkZW50aXR5IGluZm9ybWF0aW9uJyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfcmVzZXRJZGVudGl0aWVzKCkge1xyXG4gICAgY29uc29sZS5sb2coJ19yZXNldElkZW50aXRpZXMnKTtcclxuICB9XHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSWRlbnRpdGllc0dVSTtcclxuIiwiaW1wb3J0IFBvbGljaWVzTWFuYWdlciBmcm9tICcuL1BvbGljaWVzTWFuYWdlcic7XHJcblxyXG5jbGFzcyBQb2xpY2llc0dVSSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBlcEd1aVVSTCwgcGVwVVJMLCBtZXNzYWdlQnVzKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgX3RoaXMucG9saWNpZXNNYW5hZ2VyID0gbmV3IFBvbGljaWVzTWFuYWdlcihwZXBHdWlVUkwsIHBlcFVSTCwgbWVzc2FnZUJ1cyk7XHJcbiAgICAvLyBhc3N1bWUgcHJlcGFyZUF0dHJpYnV0ZXMgaXMgY2FsbGVkIGFmdGVyIHRoaXNcclxuICB9XHJcblxyXG4gIHByZXBhcmVBdHRyaWJ1dGVzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5wcmVwYXJlQXR0cmlidXRlcygpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzID0gX3RoaXMuX3NldEVsZW1lbnRzKCk7XHJcbiAgICAgICAgX3RoaXMuX3NldExpc3RlbmVycygpO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9hZGRNZW1iZXIoKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGdyb3VwID0gZXZlbnQudGFyZ2V0LmlkO1xyXG4gICAgJCgnLm1lbWJlci1uZXctaW50cm8nKS5odG1sKCc8aDU+QWRkIGEgbWVtYmVyIHRvIGEgZ3JvdXA8L2g1PjxwPkluc2VydCBhIHVzZXIgZW1haWwgYmVsb3cgdG8gYWRkIHRvIHRoZSBcIicgKyBncm91cCArICdcIiBncm91cC48L3A+Jyk7XHJcbiAgICAkKCcubWVtYmVyLW5ldy1tb2RhbCcpLm9wZW5Nb2RhbCgpO1xyXG4gICAgJCgnLm1lbWJlci1uZXctb2snKS5vZmYoKTtcclxuICAgICQoJy5tZW1iZXItbmV3LW9rJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGxldCBtZW1iZXIgPSAkKCcjbWVtYmVyLW5ldycpLnZhbCgpO1xyXG4gICAgICAkKCcjbWVtYmVyLW5ldycpLnZhbCgnJyk7XHJcbiAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5hZGRUb0dyb3VwKGdyb3VwLCBtZW1iZXIpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICQoJy5tZW1iZXItbmV3LW1vZGFsJykuY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgIF90aGlzLl9tYW5hZ2VHcm91cHMoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jcmVhdGVHcm91cCgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICAkKCcjZ3JvdXAtbmV3LW5hbWUnKS52YWwoJycpO1xyXG4gICAgJCgnLmdyb3VwLW5ldy1tb2RhbCcpLm9wZW5Nb2RhbCgpO1xyXG4gICAgJCgnLmdyb3VwLW5ldy1vaycpLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICBsZXQgZ3JvdXBOYW1lID0gJCgnI2dyb3VwLW5ldy1uYW1lJykudmFsKCk7XHJcbiAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5jcmVhdGVHcm91cChncm91cE5hbWUpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIF90aGlzLl9tYW5hZ2VHcm91cHMoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9hZGRQb2xpY3koKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgJCgnI3BvbGljeS1uZXctdGl0bGUnKS52YWwoJycpO1xyXG4gICAgJCgnLmNvbWJpbmluZycpLmh0bWwoJycpO1xyXG4gICAgbGV0IGFsZ29yaXRobXMgPSBbJ0Jsb2NrIG92ZXJyaWRlcycsICdBbGxvdyBvdmVycmlkZXMnLCAnRmlyc3QgYXBwbGljYWJsZSddO1xyXG4gICAgJCgnLmNvbWJpbmluZycpLmFwcGVuZCh0aGlzLl9nZXRPcHRpb25zKCdjb21iLWFsZ29yaXRobScsICdDaG9vc2UgYSBjb21iaW5pbmcgYWxnb3JpdGhtJywgYWxnb3JpdGhtcykpO1xyXG4gICAgJCgnLnBvbGljeS1uZXcnKS5vcGVuTW9kYWwoKTtcclxuXHJcbiAgICAkKCcucG9saWN5LW5ldy1vaycpLm9mZigpO1xyXG4gICAgJCgnLnBvbGljeS1uZXctb2snKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgbGV0IHBvbGljeVRpdGxlID0gJCgnI3BvbGljeS1uZXctdGl0bGUnKS52YWwoKTtcclxuICAgICAgaWYgKCFwb2xpY3lUaXRsZSkge1xyXG4gICAgICAgIE1hdGVyaWFsaXplLnRvYXN0KCdJbnZhbGlkIHBvbGljeSB0aXRsZScsIDQwMDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBjb21iaW5pbmdBbGdvcml0aG0gPSAkKCcjY29tYi1hbGdvcml0aG0nKS52YWwoKTtcclxuICAgICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuYWRkUG9saWN5KHBvbGljeVRpdGxlLCBjb21iaW5pbmdBbGdvcml0aG0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgJCgnLmhlbHAtbWVudScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAkKCcucG9saWN5LW5ldycpLmNsb3NlTW9kYWwoKTtcclxuICAgICAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCcuaGVscC1idG4nKS5vZmYoKTtcclxuICAgICQoJy5oZWxwLWJ0bicpLm9uKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAkKCcuaGVscC1tZW51JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2RlY3JlYXNlUnVsZVByaW9yaXR5KCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIGxldCBpZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCd0cicpLmlkO1xyXG4gICAgbGV0IHNwbGl0SWQgPSBpZC5zcGxpdCgnOicpO1xyXG4gICAgbGV0IHRoaXNQcmlvcml0eSA9IHBhcnNlSW50KHNwbGl0SWRbc3BsaXRJZC5sZW5ndGggLSAxXSk7XHJcbiAgICBzcGxpdElkLnBvcCgpO1xyXG4gICAgbGV0IHBvbGljeVRpdGxlID0gc3BsaXRJZC5qb2luKCc6Jyk7XHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZ2V0UG9saWN5KHBvbGljeVRpdGxlKS50aGVuKChwb2xpY3kpID0+IHtcclxuICAgICAgbGV0IGxhc3RQcmlvcml0eSA9IHBvbGljeS5nZXRMYXN0UHJpb3JpdHkoKTtcclxuICAgICAgaWYgKGxhc3RQcmlvcml0eSAhPSB0aGlzUHJpb3JpdHkpIHtcclxuICAgICAgICBsZXQgbmV3UHJpb3JpdHkgPSBwYXJzZUludCh0aGlzUHJpb3JpdHkgKyAxKTtcclxuICAgICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZGVjcmVhc2VSdWxlUHJpb3JpdHkocG9saWN5VGl0bGUsIHRoaXNQcmlvcml0eSwgbmV3UHJpb3JpdHkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgX3RoaXMuX2dvSG9tZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVNZW1iZXIoKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6OicpO1xyXG4gICAgbGV0IG1lbWJlciA9IHNwbGl0SWRbc3BsaXRJZC5sZW5ndGggLSAxXTtcclxuICAgIHNwbGl0SWQucG9wKCk7XHJcbiAgICBsZXQgZ3JvdXAgPSBzcGxpdElkLmpvaW4oJzo6Jyk7XHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIucmVtb3ZlRnJvbUdyb3VwKGdyb3VwLCBtZW1iZXIpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBfdGhpcy5fbWFuYWdlR3JvdXBzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVHcm91cCgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBsZXQgZ3JvdXBOYW1lID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuY2hpbGRyZW5bMF0uaWQ7XHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZGVsZXRlR3JvdXAoZ3JvdXBOYW1lKS50aGVuKCgpID0+IHtcclxuICAgICAgX3RoaXMuX21hbmFnZUdyb3VwcygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlUG9saWN5KCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIGxldCBwb2xpY3lUaXRsZSA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCd0cicpLmlkO1xyXG4gICAgX3RoaXMucG9saWNpZXNNYW5hZ2VyLmRlbGV0ZVBvbGljeShwb2xpY3lUaXRsZSkudGhlbigoKSA9PiB7XHJcbiAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZVJ1bGUoKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgcHJpb3JpdHkgPSBzcGxpdElkW3NwbGl0SWQubGVuZ3RoIC0gMV07XHJcbiAgICBzcGxpdElkLnBvcCgpO1xyXG4gICAgbGV0IHBvbGljeVRpdGxlID0gc3BsaXRJZC5qb2luKCc6Jyk7XHJcbiAgICBsZXQgcnVsZSA9IF90aGlzLnBvbGljaWVzTWFuYWdlci5nZXRSdWxlT2ZQb2xpY3kocG9saWN5VGl0bGUsIHByaW9yaXR5KTtcclxuXHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZGVsZXRlUnVsZShwb2xpY3lUaXRsZSwgcnVsZSkudGhlbigoKSA9PiB7XHJcbiAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldEFjdGl2ZVBvbGljeSgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZ2V0QWN0aXZlUG9saWN5KCkudGhlbigoYWN0aXZlVXNlclBvbGljeSkgPT4ge1xyXG4gICAgICAkKCcucG9saWN5LWFjdGl2ZScpLmh0bWwoJycpO1xyXG4gICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuZ2V0UG9saWNpZXNUaXRsZXMoKS50aGVuKChwb2xpY2llcykgPT4ge1xyXG4gICAgICAgIHBvbGljaWVzLnB1c2goJ0RlYWN0aXZhdGUgYWxsIHBvbGljaWVzJyk7XHJcblxyXG4gICAgICAgICQoJy5wb2xpY3ktYWN0aXZlJykuYXBwZW5kKF90aGlzLl9nZXRPcHRpb25zKCdwb2xpY2llcy1saXN0JywgJ0NsaWNrIHRvIGFjdGl2YXRlIGEgcG9saWN5JywgcG9saWNpZXMsIGFjdGl2ZVVzZXJQb2xpY3kpKTtcclxuXHJcbiAgICAgICAgJCgnI3BvbGljaWVzLWxpc3QnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgIGxldCBwb2xpY3lUaXRsZSA9ICQoJyNwb2xpY2llcy1saXN0JykuZmluZChcIjpzZWxlY3RlZFwiKVswXS50ZXh0Q29udGVudDtcclxuICAgICAgICAgIGlmIChwb2xpY3lUaXRsZSA9PT0gJ0RlYWN0aXZhdGUgYWxsIHBvbGljaWVzJykge1xyXG4gICAgICAgICAgICBwb2xpY3lUaXRsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci51cGRhdGVBY3RpdmVQb2xpY3kocG9saWN5VGl0bGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldEdyb3VwT3B0aW9ucyh0aXRsZSwga2V5cywgc2NvcGVzLCBsaXN0cykge1xyXG4gICAgbGV0IGxpc3QgPSAnPG9wdGlvbiBkaXNhYmxlZCBzZWxlY3RlZD4nICsgdGl0bGUgKyAnPC9vcHRpb24+JztcclxuXHJcbiAgICBmb3IgKGxldCBpIGluIGtleXMpIHtcclxuICAgICAgbGlzdCArPSAnPG9wdGdyb3VwIGxhYmVsPScgKyBrZXlzW2ldICsgJz4nO1xyXG4gICAgICBmb3IgKGxldCBqIGluIGxpc3RzW2ldKSB7XHJcbiAgICAgICAgbGlzdCArPSAnPG9wdGlvbiBpZD1cIicgKyBzY29wZXNbaV0gKyAnXCI+JyArIGxpc3RzW2ldW2pdICsgJzwvb3B0aW9uPic7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbGlzdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbmZvKHZhcmlhYmxlKSB7XHJcbiAgICBsZXQgaW5mbztcclxuXHJcbiAgICBzd2l0Y2godmFyaWFibGUpIHtcclxuICAgICAgY2FzZSAnRGF0ZSc6XHJcbiAgICAgICAgaW5mbyA9ICQoJy5jb25maWcnKS5maW5kKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgIGlmIChpbmZvLmluZGV4T2YoJywnKSAhPT0gLTEpIHsgLy8yMCBKdWx5LCAyMDE2XHJcbiAgICAgICAgICBsZXQgc3BsaXRJbmZvID0gaW5mby5zcGxpdCgnICcpOyAvL1snMjAnLCAnSnVseSwnLCcgJzIwMTYnXVxyXG4gICAgICAgICAgc3BsaXRJbmZvWzFdID0gc3BsaXRJbmZvWzFdLnN1YnN0cmluZygwLCBzcGxpdEluZm9bMV0ubGVuZ3RoIC0gMSk7IC8vJ0p1bHknXHJcbiAgICAgICAgICBsZXQgbW9udGhzID0gWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ107XHJcbiAgICAgICAgICBpbmZvID0gc3BsaXRJbmZvWzBdICsgJy8nICsgKG1vbnRocy5pbmRleE9mKHNwbGl0SW5mb1sxXSkgKyAxKSArICcvJyArIHNwbGl0SW5mb1syXTtcclxuICAgICAgICB9IGVsc2UgeyAvLyAyMDE2LTA3LTIwXHJcbiAgICAgICAgICBsZXQgc3BsaXRJbmZvID0gaW5mby5zcGxpdCgnLScpO1xyXG4gICAgICAgICAgaW5mbyA9IHNwbGl0SW5mb1syXSArICcvJyArIHNwbGl0SW5mb1sxXSArICcvJyArIHNwbGl0SW5mb1swXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ0dyb3VwIG9mIHVzZXJzJzpcclxuICAgICAgICBpbmZvID0gJCgnI2dyb3VwJykuZmluZChcIjpzZWxlY3RlZFwiKS50ZXh0KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcyc6XHJcbiAgICAgICAgaWYgKGluZm8gPSAkKFwiaW5wdXRbbmFtZT0ncnVsZS1uZXctc3Vic2NyaXB0aW9uJ106Y2hlY2tlZFwiKVswXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBpbmZvID0gJChcImlucHV0W25hbWU9J3J1bGUtbmV3LXN1YnNjcmlwdGlvbiddOmNoZWNrZWRcIilbMF0uaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdXZWVrZGF5JzpcclxuICAgICAgICBpbmZvID0gJCgnI3dlZWtkYXknKS5maW5kKFwiOnNlbGVjdGVkXCIpLnRleHQoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBpbmZvID0gJCgnLmNvbmZpZycpLmZpbmQoJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZm87XHJcbiAgfVxyXG5cclxuICBfZ2V0TGlzdChpdGVtcykge1xyXG4gICAgICBsZXQgbGlzdCA9ICcnO1xyXG4gICAgICBsZXQgbnVtSXRlbXMgPSBpdGVtcy5sZW5ndGg7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUl0ZW1zOyBpKyspIHtcclxuICAgICAgICBsaXN0ICs9ICc8bGkgY2xhc3M9XCJkaXZpZGVyXCI+PC9saT4nO1xyXG4gICAgICAgIGxpc3QgKz0gJzxsaT48YSBjbGFzcz1cImNlbnRlci1hbGlnblwiPicgKyBpdGVtc1tpXSArICc8L2E+PC9saT4nO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbGlzdDtcclxuICAgIH1cclxuXHJcbiAgX2dldE9wdGlvbnMoaWQsIHRpdGxlLCBsaXN0LCBzZWxlY3RlZCkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSAnPHNlbGVjdCBpZD1cIicgKyBpZCArICdcIiBjbGFzcz1cImJyb3dzZXItZGVmYXVsdFwiPjxvcHRpb24gZGlzYWJsZWQgc2VsZWN0ZWQ+JyArIHRpdGxlICsgJzwvb3B0aW9uPic7XHJcbiAgICBmb3IgKGxldCBpIGluIGxpc3QpIHtcclxuICAgICAgaWYgKHNlbGVjdGVkICE9PSB1bmRlZmluZWQgJiBzZWxlY3RlZCA9PT0gbGlzdFtpXSkge1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJzxvcHRpb24gc2VsZWN0ZWQgaWQ9XCInICsgaWQgKyAnXCI+JyArIGxpc3RbaV0gKyAnPC9vcHRpb24+JztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvcHRpb25zICs9ICc8b3B0aW9uIGlkPVwiJyArIGlkICsgJ1wiPicgKyBsaXN0W2ldICsgJzwvb3B0aW9uPic7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG9wdGlvbnMgKz0gJzwvc2VsZWN0Pic7XHJcblxyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBfZ2V0UG9saWNpZXNUYWJsZSgpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgX3RoaXMucG9saWNpZXNNYW5hZ2VyLmdldEZvcm1hdHRlZFBvbGljaWVzKCkudGhlbigocG9saWNpZXMpID0+IHtcclxuICAgICAgJCgnLnBvbGljaWVzLW5vJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgJCgnLnBvbGljaWVzLWN1cnJlbnQnKS5odG1sKCcnKTtcclxuXHJcbiAgICAgIGxldCBwb2xpY2llc1RpdGxlcyA9IFtdO1xyXG4gICAgICBsZXQgcnVsZXNUaXRsZXMgPSBbXTtcclxuICAgICAgbGV0IGlkcyA9IFtdO1xyXG5cclxuICAgICAgZm9yIChsZXQgaSBpbiBwb2xpY2llcykge1xyXG4gICAgICAgIHBvbGljaWVzVGl0bGVzLnB1c2gocG9saWNpZXNbaV0udGl0bGUpO1xyXG4gICAgICAgIHJ1bGVzVGl0bGVzLnB1c2gocG9saWNpZXNbaV0ucnVsZXNUaXRsZXMpO1xyXG4gICAgICAgIGlkcy5wdXNoKHBvbGljaWVzW2ldLmlkcyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB0YWJsZSA9ICc8dGFibGU+JztcclxuICAgICAgbGV0IGlzRW1wdHkgPSBwb2xpY2llc1RpdGxlcy5sZW5ndGggPT09IDA7XHJcblxyXG4gICAgICBmb3IgKGxldCBpIGluIHBvbGljaWVzVGl0bGVzKSB7XHJcbiAgICAgICAgdGFibGUgKz0gJzx0aGVhZD48dHIgaWQ9XCInICsgcG9saWNpZXNUaXRsZXNbaV0gKyAnXCI+PHRkPjwvdGQ+PHRkPjwvdGQ+PHRoIGNsYXNzPVwiY2VudGVyLWFsaWduXCI+JyArIHBvbGljaWVzVGl0bGVzW2ldICsgJzwvdGg+PHRkPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xpY2thYmxlLWNlbGwgcG9saWN5LWRlbGV0ZVwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlXCI+ZGVsZXRlX2ZvcmV2ZXI8L2k+PC90ZD48L3RyPjwvdGhlYWQ+PHRib2R5Pic7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGogaW4gcnVsZXNUaXRsZXNbaV0pIHtcclxuICAgICAgICAgIHRhYmxlICs9ICc8dHIgaWQ9XCInICsgaWRzW2ldW2pdICsgJ1wiID48dGQ+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbGlja2FibGUtY2VsbCBydWxlLXByaW9yaXR5LWluY3JlYXNlXCIgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGVcIj5hcnJvd191cHdhcmQ8L2k+PC90ZD48dGQ+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbGlja2FibGUtY2VsbCBydWxlLXByaW9yaXR5LWRlY3JlYXNlXCIgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGVcIj5hcnJvd19kb3dud2FyZDwvaT48L3RkPjx0ZCBjbGFzcz1cInJ1bGUtc2hvdyBjbGlja2FibGUtY2VsbFwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyXCI+JyArIHJ1bGVzVGl0bGVzW2ldW2pdICsgJzwvdGQ+PHRkPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xpY2thYmxlLWNlbGwgcnVsZS1kZWxldGVcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlcjsgdmVydGljYWwtYWxpZ246IG1pZGRsZVwiPmNsZWFyPC9pPjwvdGQ+PC90cj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YWJsZSArPSAnPHRyIGlkPVwiJyArIHBvbGljaWVzVGl0bGVzW2ldICsgJ1wiPjwvdGQ+PHRkPjwvdGQ+PHRkPjwvdGQ+PHRkIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXJcIj48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsaWNrYWJsZS1jZWxsIGNlbnRlci1hbGlnbiBydWxlLWFkZFwiIHN0eWxlPVwiY3Vyc29yOiBwb2ludGVyXCI+YWRkX2NpcmNsZTwvaT48L3RkPjwvdHI+JztcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWlzRW1wdHkpIHtcclxuICAgICAgICB0YWJsZSArPSAnPC90Ym9keT48L3RhYmxlPic7XHJcbiAgICAgICAgJCgnLnBvbGljaWVzLWN1cnJlbnQnKS5hcHBlbmQodGFibGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy5wb2xpY2llcy1ubycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgIH1cclxuICAgICAgJCgnLnJ1bGUtYWRkJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7IF90aGlzLl9zaG93VmFyaWFibGVzVHlwZXMoKTsgfSk7XHJcbiAgICAgICQoJy5ydWxlLWRlbGV0ZScpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fZGVsZXRlUnVsZSgpOyB9KTtcclxuICAgICAgJCgnLnJ1bGUtc2hvdycpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fc2hvd1J1bGUoKTsgfSk7XHJcbiAgICAgICQoJy5ydWxlLXByaW9yaXR5LWluY3JlYXNlJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7IF90aGlzLl9pbmNyZWFzZVJ1bGVQcmlvcml0eSgpOyB9KTtcclxuICAgICAgJCgnLnJ1bGUtcHJpb3JpdHktZGVjcmVhc2UnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHsgX3RoaXMuX2RlY3JlYXNlUnVsZVByaW9yaXR5KCk7IH0pO1xyXG4gICAgICAkKCcucG9saWN5LWFkZCcpLm9mZigpO1xyXG4gICAgICAkKCcucG9saWN5LWFkZCcpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fYWRkUG9saWN5KCk7IH0pO1xyXG4gICAgICAkKCcucG9saWN5LWRlbGV0ZScpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fZGVsZXRlUG9saWN5KCk7IH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZ29Ib21lKCkge1xyXG4gICAgdGhpcy5fZ2V0QWN0aXZlUG9saWN5KCk7XHJcbiAgICB0aGlzLl9nZXRQb2xpY2llc1RhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBfaW5jcmVhc2VSdWxlUHJpb3JpdHkoKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgdGhpc1ByaW9yaXR5ID0gcGFyc2VJbnQoc3BsaXRJZFtzcGxpdElkLmxlbmd0aCAtIDFdKTtcclxuICAgIGlmICh0aGlzUHJpb3JpdHkgIT09IDApIHtcclxuICAgICAgc3BsaXRJZC5wb3AoKTtcclxuICAgICAgbGV0IHBvbGljeVRpdGxlID0gc3BsaXRJZC5qb2luKCc6Jyk7XHJcbiAgICAgIGxldCBuZXdQcmlvcml0eSA9IHRoaXNQcmlvcml0eSAtIDE7XHJcblxyXG4gICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIuaW5jcmVhc2VSdWxlUHJpb3JpdHkocG9saWN5VGl0bGUsIHRoaXNQcmlvcml0eSwgbmV3UHJpb3JpdHkpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfbWFuYWdlR3JvdXBzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5nZXRHcm91cHMoKS50aGVuKChncm91cHNQRSkgPT4ge1xyXG4gICAgICAkKCcuZ3JvdXBzLWN1cnJlbnQnKS5odG1sKCcnKTtcclxuICAgICAgbGV0IGdyb3VwcyA9IGdyb3Vwc1BFLmdyb3Vwc05hbWVzO1xyXG4gICAgICBsZXQgbWVtYmVycyA9IGdyb3Vwc1BFLm1lbWJlcnM7XHJcbiAgICAgIGxldCBpZHMgPSBncm91cHNQRS5pZHM7XHJcblxyXG4gICAgICBsZXQgdGFibGUgPSAnPHRhYmxlPic7XHJcbiAgICAgIGxldCBpc0VtcHR5ID0gZ3JvdXBzLmxlbmd0aCA9PT0gMDtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgaW4gZ3JvdXBzKSB7XHJcbiAgICAgICAgdGFibGUgKz0gJzx0aGVhZD48dHI+PHRoIGlkPVwiJyArIGdyb3Vwc1tpXSArICdcIj4nICsgZ3JvdXBzW2ldICsgJzwvdGg+PHRkIHN0eWxlPVwidGV4dC1hbGlnbjpyaWdodFwiPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xpY2thYmxlLWNlbGwgZ3JvdXAtZGVsZXRlXCIgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGVcIj5kZWxldGVfZm9yZXZlcjwvaT48L3RkPjwvdHI+PC90aGVhZD48dGJvZHk+JztcclxuICAgICAgICBmb3IgKGxldCBqIGluIG1lbWJlcnNbaV0pIHtcclxuICAgICAgICAgIHRhYmxlICs9ICc8dHIgaWQ9XCInICsgaWRzW2ldW2pdICsgJ1wiID48dGQgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXJcIj4nICsgbWVtYmVyc1tpXVtqXSArICc8L3RkPjx0ZCBzdHlsZT1cInRleHQtYWxpZ246cmlnaHRcIj48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsaWNrYWJsZS1jZWxsIG1lbWJlci1kZWxldGVcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlcjsgdmVydGljYWwtYWxpZ246IG1pZGRsZVwiPmNsZWFyPC9pPjwvdGQ+PC90cj4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGFibGUgKz0gJzx0ciBpZD1cIicgKyBncm91cHNbaV0gKyAnXCI+PHRkPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xpY2thYmxlLWNlbGwgbWVtYmVyLWFkZFwiIGlkPVwiJyArIGdyb3Vwc1tpXSArICdcIiBzdHlsZT1cImN1cnNvcjogcG9pbnRlclwiPmFkZF9jaXJjbGU8L2k+PC90ZD48L3RyPic7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghaXNFbXB0eSkge1xyXG4gICAgICAgIHRhYmxlICs9ICc8L3Rib2R5PjwvdGFibGU+JztcclxuICAgICAgICAkKCcuZ3JvdXBzLWN1cnJlbnQnKS5hcHBlbmQodGFibGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy5ncm91cHMtY3VycmVudCcpLmFwcGVuZCgnPHA+VGhlcmUgYXJlIG5vIGdyb3VwcyBzZXQuPC9wPicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkKCcubWVtYmVyLWFkZCcpLm9mZigpO1xyXG4gICAgICAkKCcubWVtYmVyLWFkZCcpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fYWRkTWVtYmVyKCk7IH0pO1xyXG4gICAgICAkKCcubWVtYmVyLWRlbGV0ZScpLm9uKCdjbGljaycsIChldmVudCkgPT4geyBfdGhpcy5fZGVsZXRlTWVtYmVyKCk7IH0pO1xyXG4gICAgICAkKCcuZ3JvdXAtYWRkJykub2ZmKCk7XHJcbiAgICAgICQoJy5ncm91cC1hZGQnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHsgX3RoaXMuX2NyZWF0ZUdyb3VwKCk7IH0pO1xyXG4gICAgICAkKCcuZ3JvdXAtZGVsZXRlJykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7IF90aGlzLl9kZWxldGVHcm91cCgpOyB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3BhcnNlRmlsZUNvbnRlbnQoY29udGVudCkge1xyXG4gICAgbGV0IHBhcnNlZENvbnRlbnQgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgZm9yIChsZXQgaSBpbiBwYXJzZWRDb250ZW50KSB7XHJcbiAgICAgIHRoaXMucG9saWNpZXNNYW5hZ2VyLmFkZFBvbGljeShpLCB1bmRlZmluZWQsIHBhcnNlZENvbnRlbnRbaV0pO1xyXG4gICAgfVxyXG4gICAgJCgnLnBvbGljeS1uZXcnKS5jbG9zZU1vZGFsKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RWxlbWVudHMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRlOiAocGFyYW1zKSA9PiB7IHJldHVybiAnPGlucHV0IHR5cGU9XCJkYXRlXCIgY2xhc3M9XCJkYXRlcGlja2VyXCI+JzsgfSxcclxuICAgICAgc2VsZWN0OiAocGFyYW1zKSA9PiB7IHJldHVybiB0aGlzLl9nZXRPcHRpb25zKHBhcmFtc1swXSwgcGFyYW1zWzFdLCBwYXJhbXNbMl0pOyB9LFxyXG4gICAgICBmb3JtOiAocGFyYW1zKSA9PiB7IHJldHVybiAnPGZvcm0+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCInICsgcGFyYW1zICsgJ1wiPjwvaW5wdXQ+PC9mb3JtPic7IH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBfc2hvd05ld0NvbmZpZ3VyYXRpb25QYW5lbChwb2xpY3lUaXRsZSkge1xyXG4gICAgbGV0IHZhcmlhYmxlID0gZXZlbnQudGFyZ2V0LnRleHQ7XHJcbiAgICAkKCcudmFyaWFibGUnKS5odG1sKHRoaXMuX2dldE5ld0NvbmZpZ3VyYXRpb24ocG9saWN5VGl0bGUsIHZhcmlhYmxlKSk7XHJcbiAgICAkKCcuc2NvcGVzJykuZW1wdHkoKS5odG1sKCcnKTtcclxuXHJcbiAgICBsZXQga2V5cyA9IFsnRW1haWwnLCAnSHlwZXJ0eScsICdBbGwnXTtcclxuICAgIGxldCBzY29wZXMgPSBbJ2lkZW50aXR5JywgJ2h5cGVydHknLCAnZ2xvYmFsJ107XHJcbiAgICBsZXQgbGlzdHMgPSBbXTtcclxuXHJcbiAgICB0aGlzLnBvbGljaWVzTWFuYWdlci5nZXRNeUVtYWlscygpLnRoZW4oKGVtYWlscykgPT4ge1xyXG4gICAgICBsaXN0cy5wdXNoKGVtYWlscyk7XHJcbiAgICAgIHRoaXMucG9saWNpZXNNYW5hZ2VyLmdldE15SHlwZXJ0aWVzKCkudGhlbigoaHlwZXJ0aWVzKSA9PiB7XHJcbiAgICAgICAgbGlzdHMucHVzaChoeXBlcnRpZXMpO1xyXG4gICAgICAgIGxpc3RzLnB1c2goWydBbGwgaWRlbnRpdGllcyBhbmQgaHlwZXJ0aWVzJ10pO1xyXG4gICAgICAgICQoJy5zY29wZXMnKS5hcHBlbmQodGhpcy5fZ2V0R3JvdXBPcHRpb25zKCdBcHBseSB0aGlzIGNvbmZpZ3VyYXRpb24gdG86Jywga2V5cywgc2NvcGVzLCBsaXN0cykpO1xyXG4gICAgICAgICQoJy52YXJpYWJsZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd1ZhcmlhYmxlc1R5cGVzKGV2ZW50KSB7XHJcbiAgICBsZXQgcG9saWN5VGl0bGUgPSBldmVudC50YXJnZXQuY2xvc2VzdCgndHInKS5pZDtcclxuXHJcbiAgICAkKCcjdmFyaWFibGVzLXR5cGVzJykuZW1wdHkoKS5odG1sKCcnKTtcclxuICAgIGxldCB2YXJpYWJsZXMgPSB0aGlzLnBvbGljaWVzTWFuYWdlci5nZXRWYXJpYWJsZXMoKTtcclxuICAgICQoJyN2YXJpYWJsZXMtdHlwZXMnKS5hcHBlbmQodGhpcy5fZ2V0TGlzdCh2YXJpYWJsZXMpKTtcclxuICAgICQoJy52YXJpYWJsZScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAkKCcucnVsZS1uZXcnKS5vcGVuTW9kYWwoKTtcclxuICAgICQoJyN2YXJpYWJsZXMtdHlwZXMnKS5vZmYoKTtcclxuICAgICQoJyN2YXJpYWJsZXMtdHlwZXMnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHsgdGhpcy5fc2hvd05ld0NvbmZpZ3VyYXRpb25QYW5lbChwb2xpY3lUaXRsZSk7IH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldE5ld0NvbmZpZ3VyYXRpb24ocG9saWN5VGl0bGUsIHZhcmlhYmxlKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgbGV0IGluZm8gPSBfdGhpcy5wb2xpY2llc01hbmFnZXIuZ2V0VmFyaWFibGVJbmZvKHZhcmlhYmxlKTtcclxuICAgICQoJy5ydWxlLW5ldy10aXRsZScpLmh0bWwoaW5mby50aXRsZSk7XHJcbiAgICAkKCcuZGVzY3JpcHRpb24nKS5odG1sKGluZm8uZGVzY3JpcHRpb24pO1xyXG4gICAgJCgnLmNvbmZpZycpLmh0bWwoJycpO1xyXG5cclxuICAgIGlmICh2YXJpYWJsZSA9PT0gJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcycpIHtcclxuICAgICAgJCgnLnN1YnNjcmlwdGlvbi10eXBlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoJy5zdWJzY3JpcHRpb24tdHlwZScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgIGxldCB0YWdzID0gaW5mby5pbnB1dDtcclxuICAgICAgZm9yIChsZXQgaSBpbiB0YWdzKSB7XHJcbiAgICAgICAgX3RoaXMucG9saWNpZXNNYW5hZ2VyLmdldEdyb3Vwc05hbWVzKCkudGhlbigoZ3JvdXBzTmFtZXMpID0+IHtcclxuICAgICAgICAgIGlmICh2YXJpYWJsZSA9PT0gJ0dyb3VwIG9mIHVzZXJzJykge1xyXG4gICAgICAgICAgICB0YWdzW2ldWzFdLnB1c2goZ3JvdXBzTmFtZXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgJCgnLmNvbmZpZycpLmFwcGVuZChfdGhpcy5lbGVtZW50c1t0YWdzW2ldWzBdXSh0YWdzW2ldWzFdKSk7XHJcbiAgICAgICAgICBpZiAodmFyaWFibGUgPT09ICdHcm91cCBvZiB1c2VycycpIHtcclxuICAgICAgICAgICAgdGFnc1tpXVsxXS5wb3AoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodmFyaWFibGUgPT09J2RhdGUnKSB7XHJcbiAgICAgICAgJCgnLmRhdGVwaWNrZXInKS5waWNrYWRhdGUoe1xyXG4gICAgICAgICAgc2VsZWN0TW9udGhzOiB0cnVlLFxyXG4gICAgICAgICAgc2VsZWN0WWVhcnM6IDE1XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxvdycpLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibG9jaycpLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICQoJy5vay1idG4nKS5vZmYoKTtcclxuICAgICQoJy5vay1idG4nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKCQoXCJpbnB1dFtuYW1lPSdydWxlLW5ldy1kZWNpc2lvbiddOmNoZWNrZWRcIilbMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGxldCBpbmZvID0gX3RoaXMuX2dldEluZm8odmFyaWFibGUpO1xyXG4gICAgICAgIGxldCBkZWNpc2lvbiA9ICQoXCJpbnB1dFtuYW1lPSdydWxlLW5ldy1kZWNpc2lvbiddOmNoZWNrZWRcIilbMF0uaWQ7XHJcbiAgICAgICAgZGVjaXNpb24gPSBkZWNpc2lvbiA9PT0gJ2FsbG93JztcclxuICAgICAgICBsZXQgc2NvcGUgPSAkKCcuc2NvcGVzJykuZmluZChcIjpzZWxlY3RlZFwiKVswXS5pZDtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gJCgnLnNjb3BlcycpLmZpbmQoXCI6c2VsZWN0ZWRcIilbMF0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGFyZ2V0ID0gKHRhcmdldCA9PT0gJ0FsbCBpZGVudGl0aWVzIGFuZCBoeXBlcnRpZXMnKSA/ICdnbG9iYWwnIDogdGFyZ2V0O1xyXG4gICAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci5zZXRJbmZvKHZhcmlhYmxlLCBwb2xpY3lUaXRsZSwgaW5mbywgZGVjaXNpb24sIHNjb3BlLCB0YXJnZXQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgJCgnLnJ1bGUtbmV3JykuY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgICAgX3RoaXMuX2dvSG9tZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IEVycm9yKCdJTkZPUk1BVElPTiBNSVNTSU5HOiBwbGVhc2Ugc3BlY2lmeSBhbiBhdXRob3Jpc2F0aW9uIGRlY2lzaW9uLicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVJbmZvKHJlc291cmNlVHlwZSkge1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgc2NvcGUgPSBzcGxpdElkWzBdO1xyXG4gICAgc3BsaXRJZC5zaGlmdCgpO1xyXG4gICAgbGV0IHRhcmdldCA9IHNwbGl0SWQuam9pbignJyk7XHJcbiAgICBsZXQgY29uZGl0aW9uID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuY2hpbGRyZW5bMF0uaWQ7XHJcbiAgICB0aGlzLnBvbGljaWVzTWFuYWdlci5kZWxldGVJbmZvKHJlc291cmNlVHlwZSwgc2NvcGUsIHRhcmdldCwgY29uZGl0aW9uKTtcclxuICAgIHRoaXMuX2dvSG9tZSgpO1xyXG4gIH1cclxuXHJcbiAgX3NldExpc3RlbmVycygpIHtcclxuICAgICQoJy5zZXR0aW5ncy1idG4nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgYm9keTogeyBtZXRob2Q6ICdzaG93QWRtaW5QYWdlJyB9LCB0bzogJ3J1bnRpbWU6Z3VpLW1hbmFnZXInIH0sICcqJyk7XHJcbiAgICAgICQoJy5hZG1pbi1wYWdlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5zdHlsZSA9ICdiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyc7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucG9saWNpZXMtcGFnZS1zaG93Jykub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICQoJy5wb2xpY2llcy1zZWN0aW9uJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgJCgnLmlkZW50aXRpZXMtc2VjdGlvbicpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgIHRoaXMuX2dvSG9tZSgpO1xyXG4gICAgICB0aGlzLl9tYW5hZ2VHcm91cHMoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5hZG1pbi1wYWdlLWV4aXQnKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgYm9keTogeyBtZXRob2Q6ICdoaWRlQWRtaW5QYWdlJyB9LCB0bzogJ3J1bnRpbWU6Z3VpLW1hbmFnZXInIH0sICcqJyk7XHJcbiAgICAgICQoJy5hZG1pbi1wYWdlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXS5zdHlsZSA9ICdiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50Oyc7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuZXhpdC1idG4nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgJCgnLnN1YnNjcmlwdGlvbi10eXBlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgJCgnLmhlbHAtbWVudScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjcG9saWN5LWZpbGUnKS5vbignY2hhbmdlJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGxldCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdO1xyXG4gICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSwgXCJVVEYtOFwiKTtcclxuICAgICAgcmVhZGVyLm9ubG9hZCA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3BhcnNlRmlsZUNvbnRlbnQoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgdGhpcy5fZ29Ib21lKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICB0aHJvdyBFcnJvcihcIkVycm9yIHJlYWRpbmcgdGhlIGZpbGVcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dSdWxlKGV2ZW50KSB7XHJcbiAgICBsZXQgcnVsZVRpdGxlID0gZXZlbnQudGFyZ2V0LnRleHRDb250ZW50O1xyXG4gICAgbGV0IGlkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuaWQ7XHJcbiAgICBsZXQgc3BsaXRJZCA9IGlkLnNwbGl0KCc6Jyk7XHJcbiAgICBsZXQgcHJpb3JpdHkgPSBzcGxpdElkW3NwbGl0SWQubGVuZ3RoIC0gMV07XHJcbiAgICBzcGxpdElkLnBvcCgpO1xyXG4gICAgbGV0IHBvbGljeVRpdGxlID0gc3BsaXRJZC5qb2luKCc6Jyk7XHJcbiAgICB0aGlzLnBvbGljaWVzTWFuYWdlci5nZXRSdWxlT2ZQb2xpY3kocG9saWN5VGl0bGUsIHByaW9yaXR5KS50aGVuKChydWxlKSA9PiB7XHJcbiAgICAgIGlmIChydWxlLmNvbmRpdGlvbi5hdHRyaWJ1dGUgPT09ICdzdWJzY3JpcHRpb24nICYmIHJ1bGUuY29uZGl0aW9uLnBhcmFtcyA9PT0gJ3ByZWF1dGhvcmlzZWQnKSB7XHJcbiAgICAgICAgJCgnLmF1dGhvcmlzZS1idG5zJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgZWxlbWVudDtcclxuICAgICAgICBpZiAocnVsZS5kZWNpc2lvbikge1xyXG4gICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYWxsb3cnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYmxvY2snKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAkKCcuYXV0aG9yaXNlLWJ0bnMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICB9XHJcbiAgICAgICQoJy5tZW1iZXItYWRkJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgJCgnLm1lbWJlci1uZXctYnRuJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgICAgICQoJy5ydWxlLWRldGFpbHMnKS5vcGVuTW9kYWwoKTtcclxuICAgICAgJCgnLnJ1bGUtdGl0bGUnKS5odG1sKCc8aDU+PGI+JyArIHJ1bGVUaXRsZSArICc8L2I+PC9oNT4nKTtcclxuICAgICAgaWYgKHJ1bGUuY29uZGl0aW9uLmF0dHJpYnV0ZSA9PT0gJ3N1YnNjcmlwdGlvbicpIHtcclxuICAgICAgICAkKCcuc3Vic2NyaXB0aW9uLXR5cGUnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICB9XHJcbiAgICAgICQoJy5zdWJzY3JpcHRpb24tZGVjaXNpb24nKS5vbignY2xpY2snLCAoZXZlbnQpID0+IHsgdGhpcy5fdXBkYXRlUnVsZSgnc3Vic2NyaXB0aW9uJywgcG9saWN5VGl0bGUsIHJ1bGUpOyB9KTtcclxuICAgICAgJCgnLmRlY2lzaW9uJykub2ZmKCk7XHJcbiAgICAgICQoJy5kZWNpc2lvbicpLm9uKCdjbGljaycsIChldmVudCkgPT4geyB0aGlzLl91cGRhdGVSdWxlKCdhdXRob3Jpc2F0aW9uJywgcG9saWN5VGl0bGUsIHJ1bGUpO30pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdXBkYXRlUnVsZSh0eXBlLCBwb2xpY3lUaXRsZSwgcnVsZSkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIGxldCB0aXRsZSA9ICQoJy5ydWxlLXRpdGxlJykudGV4dCgpO1xyXG4gICAgbGV0IHNwbGl0VGl0bGUgPSB0aXRsZS5zcGxpdCgnICcpO1xyXG4gICAgbGV0IGluZGV4ID0gc3BsaXRUaXRsZS5pbmRleE9mKCdpcycpO1xyXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICBpbmRleCA9IHNwbGl0VGl0bGUuaW5kZXhPZignYXJlJyk7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSAnYXV0aG9yaXNhdGlvbic6XHJcbiAgICAgICAgbGV0IG5ld0RlY2lzaW9uID0gJChcImlucHV0W25hbWU9J3J1bGUtdXBkYXRlLWRlY2lzaW9uJ106Y2hlY2tlZFwiKVswXS5pZDtcclxuXHJcbiAgICAgICAgaWYgKG5ld0RlY2lzaW9uID09PSAnYnRuLWFsbG93Jykge1xyXG4gICAgICAgICAgc3BsaXRUaXRsZVtpbmRleCArIDFdID0gJ2FsbG93ZWQnO1xyXG4gICAgICAgICAgbmV3RGVjaXNpb24gPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzcGxpdFRpdGxlW2luZGV4ICsgMV0gPSAnYmxvY2tlZCc7XHJcbiAgICAgICAgICBuZXdEZWNpc2lvbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aXRsZSA9IHNwbGl0VGl0bGUuam9pbignICcpO1xyXG4gICAgICAgICQoJy5ydWxlLXRpdGxlJykuaHRtbCgnPGg1PjxiPicgKyB0aXRsZSArICc8L2I+PC9oNT4nKTtcclxuICAgICAgICBfdGhpcy5wb2xpY2llc01hbmFnZXIudXBkYXRlUG9saWN5KHBvbGljeVRpdGxlLCBydWxlLCBuZXdEZWNpc2lvbikudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBfdGhpcy5fZ29Ib21lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3N1YnNjcmlwdGlvbic6XHJcbiAgICAgICAgbGV0IG5ld1N1YnNjcmlwdGlvblR5cGUgPSBldmVudC50YXJnZXQubGFiZWxzWzBdLnRleHRDb250ZW50O1xyXG5cclxuICAgICAgICBsZXQgZGVjaXNpb24gPSBzcGxpdFRpdGxlW2luZGV4ICsgMV07XHJcbiAgICAgICAgc3BsaXRUaXRsZSA9IHRpdGxlLnNwbGl0KCdoeXBlcnRpZXMgYXJlJyk7XHJcbiAgICAgICAgaWYgKG5ld1N1YnNjcmlwdGlvblR5cGUgPT09ICdBbGwgc3Vic2NyaWJlcnMnKSB7XHJcbiAgICAgICAgICAkKCcuYXV0aG9yaXNlLWJ0bnMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgbmV3RGVjaXNpb24gPSBydWxlLmRlY2lzaW9uO1xyXG4gICAgICAgICAgbmV3U3Vic2NyaXB0aW9uVHlwZSA9ICcqJztcclxuICAgICAgICAgIHRpdGxlID0gJ1N1YnNjcmlwdGlvbnMgZnJvbSBhbGwgaHlwZXJ0aWVzIGFyZScgKyBzcGxpdFRpdGxlWzFdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKCcuYXV0aG9yaXNlLWJ0bnMnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgbmV3RGVjaXNpb24gPSB0cnVlO1xyXG4gICAgICAgICAgbmV3U3Vic2NyaXB0aW9uVHlwZSA9ICdwcmVhdXRob3Jpc2VkJztcclxuICAgICAgICAgIHRpdGxlID0gJ1N1YnNjcmlwdGlvbnMgZnJvbSBwcmV2aW91c2x5IGF1dGhvcmlzZWQgaHlwZXJ0aWVzIGFyZScgKyBzcGxpdFRpdGxlWzFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLnJ1bGUtdGl0bGUnKS5odG1sKCc8aDU+PGI+JyArIHRpdGxlICsgJzwvYj48L2g1PicpO1xyXG4gICAgICAgIF90aGlzLnBvbGljaWVzTWFuYWdlci51cGRhdGVQb2xpY3kocG9saWN5VGl0bGUsIHJ1bGUsIG5ld0RlY2lzaW9uLCBuZXdTdWJzY3JpcHRpb25UeXBlKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIF90aGlzLl9nb0hvbWUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvbGljaWVzR1VJO1xyXG4iLCJjbGFzcyBQb2xpY2llc01hbmFnZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcihwZXBHdWlVUkwsIHBlcFVSTCwgbWVzc2FnZUJ1cykge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIF90aGlzLl9ndWlVUkwgPSBwZXBHdWlVUkw7XHJcbiAgICBfdGhpcy5fcGVwVVJMID0gcGVwVVJMO1xyXG4gICAgX3RoaXMuX21lc3NhZ2VCdXMgPSBtZXNzYWdlQnVzO1xyXG5cclxuICAgIC8vIGFzc3VtZSBwcmVwYXJlIGF0dHJpYnV0ZXMgaXMgY2FsbGVkIGFmdGVyIHRoaXNcclxuICB9XHJcblxyXG4gIGNhbGxQb2xpY3lFbmdpbmVGdW5jKG1ldGhvZE5hbWUsIHBhcmFtZXRlcnMpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICBsZXQgbWVzc2FnZTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBtZXNzYWdlID0geyB0eXBlOiAnZXhlY3V0ZScsIHRvOiBfdGhpcy5fcGVwVVJMLCBmcm9tOiBfdGhpcy5fZ3VpVVJMLFxyXG4gICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6ICdwb2xpY3knLCBtZXRob2Q6IG1ldGhvZE5hbWUsIHBhcmFtczogcGFyYW1ldGVycyB9LCB9O1xyXG4gICAgICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtZXNzYWdlLCAocmVzKSA9PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IHJlcy5ib2R5LnZhbHVlO1xyXG4gICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByZXBhcmVBdHRyaWJ1dGVzKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICBfdGhpcy5wb2xpY2llcyA9IHVzZXJQb2xpY2llcztcclxuICAgICAgICBfdGhpcy52YXJpYWJsZXMgPSBfdGhpcy5zZXRWYXJpYWJsZXMoKTtcclxuICAgICAgICBfdGhpcy5hZGRpdGlvbiA9IF90aGlzLnNldEFkZGl0aW9uTWV0aG9kcygpO1xyXG4gICAgICAgIF90aGlzLnZhbGlkYXRpb24gPSBfdGhpcy5zZXRWYWxpZGF0aW9uTWV0aG9kcygpO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZFRvR3JvdXAoZ3JvdXBOYW1lLCB1c2VyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnYWRkVG9Hcm91cCcsIHtncm91cE5hbWU6IGdyb3VwTmFtZSwgdXNlckVtYWlsOiB1c2VyfSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVHcm91cChncm91cE5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdjcmVhdGVHcm91cCcsIHtncm91cE5hbWU6IGdyb3VwTmFtZX0pO1xyXG4gIH1cclxuXHJcbiAgYWRkUG9saWN5KHRpdGxlLCBjb21iaW5pbmdBbGdvcml0aG0sIHBvbGljeSkge1xyXG4gICAgaWYgKHBvbGljeSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHN3aXRjaCAoY29tYmluaW5nQWxnb3JpdGhtKSB7XHJcbiAgICAgICAgY2FzZSAnQmxvY2sgb3ZlcnJpZGVzJzpcclxuICAgICAgICAgIGNvbWJpbmluZ0FsZ29yaXRobSA9ICdibG9ja092ZXJyaWRlcyc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdBbGxvdyBvdmVycmlkZXMnOlxyXG4gICAgICAgICAgY29tYmluaW5nQWxnb3JpdGhtID0gJ2FsbG93T3ZlcnJpZGVzJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ0ZpcnN0IGFwcGxpY2FibGUnOlxyXG4gICAgICAgICAgY29tYmluaW5nQWxnb3JpdGhtID0gJ2ZpcnN0QXBwbGljYWJsZSc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgY29tYmluaW5nQWxnb3JpdGhtID0gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ2FkZFBvbGljeScsXHJcbiAgICAgIHtzb3VyY2U6ICdVU0VSJywga2V5OiB0aXRsZSwgcG9saWN5OiBwb2xpY3ksIGNvbWJpbmluZ0FsZ29yaXRobTogY29tYmluaW5nQWxnb3JpdGhtfSk7XHJcbiAgfVxyXG5cclxuICBkZWNyZWFzZVJ1bGVQcmlvcml0eShwb2xpY3lUaXRsZSwgdGhpc1ByaW9yaXR5LCBuZXdQcmlvcml0eSkge1xyXG4gICAgdGhpcy5nZXRSdWxlT2ZQb2xpY3kocG9saWN5VGl0bGUsIG5ld1ByaW9yaXR5KS5wcmlvcml0eSA9IHRoaXNQcmlvcml0eTtcclxuICAgIHRoaXMuZ2V0UnVsZU9mUG9saWN5KHBvbGljeVRpdGxlLCB0aGlzUHJpb3JpdHkpLnByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnc2F2ZVBvbGljaWVzJywge3NvdXJjZTogJ1VTRVInfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVHcm91cChncm91cE5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdkZWxldGVHcm91cCcsIHtncm91cE5hbWU6IGdyb3VwTmFtZX0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlUG9saWN5KHRpdGxlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygncmVtb3ZlUG9saWN5Jywge3NvdXJjZTogJ1VTRVInLCBrZXk6IHRpdGxlfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVSdWxlKHBvbGljeVRpdGxlLCBydWxlKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigodXNlclBvbGljaWVzKSA9PiB7XHJcbiAgICAgICAgdXNlclBvbGljaWVzW3BvbGljeVRpdGxlXS5kZWxldGVSdWxlKHJ1bGUpO1xyXG4gICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlUG9saWNpZXMnLCB7c291cmNlOiAnVVNFUid9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEFjdGl2ZVBvbGljeSgpIHtcclxuICAgIHJldHVybiB0aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdhY3RpdmVVc2VyUG9saWN5Jywge30pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9saWN5KGtleSkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY3knLCB7a2V5OiBrZXl9KTtcclxuICB9XHJcblxyXG4gIGdldFBvbGljaWVzVGl0bGVzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigocG9saWNpZXMpID0+IHtcclxuICAgICAgICBsZXQgdGl0bGVzID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgaW4gcG9saWNpZXMpIHtcclxuICAgICAgICAgIHRpdGxlcy5wdXNoKGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzb2x2ZSh0aXRsZXMpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGFyZ2V0cyhzY29wZSkge1xyXG4gICAgbGV0IHRhcmdldHMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBpIGluIHRoaXMucG9saWNpZXNbc2NvcGVdKSB7XHJcbiAgICAgIGlmICh0YXJnZXRzLmluZGV4T2YoaSkgPT09IC0xKSB7XHJcbiAgICAgICAgdGFyZ2V0cy5wdXNoKGkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRhcmdldHM7XHJcbiAgfVxyXG5cclxuICBpbmNyZWFzZVJ1bGVQcmlvcml0eShwb2xpY3lUaXRsZSwgdGhpc1ByaW9yaXR5LCBuZXdQcmlvcml0eSkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIF90aGlzLmdldFJ1bGVPZlBvbGljeShwb2xpY3lUaXRsZSwgdGhpc1ByaW9yaXR5KS5wcmlvcml0eSA9IG5ld1ByaW9yaXR5O1xyXG4gICAgX3RoaXMuZ2V0UnVsZU9mUG9saWN5KHBvbGljeVRpdGxlLCBuZXdQcmlvcml0eSkucHJpb3JpdHkgPSB0aGlzUHJpb3JpdHk7XHJcbiAgICByZXR1cm4gX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3NhdmVQb2xpY2llcycsIHtzb3VyY2U6ICdVU0VSJ30pO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFyaWFibGVzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgJ0RhdGUnOiB7XHJcbiAgICAgICAgdGl0bGU6ICc8YnI+PGg1PlVwZGF0aW5nIGRhdGUgcmVsYXRlZCBjb25maWd1cmF0aW9uczwvaDU+PHA+SW5jb21pbmcgY29tbXVuaWNhdGlvbnMgaW4gdGhlIGludHJvZHVjZWQgZGF0ZSB3aWxsIGJlIGFsbG93ZWQgb3IgYmxvY2tlZCBhY2NvcmRpbmcgdG8geW91ciBjb25maWd1cmF0aW9ucywgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaW4gdGhlIHByZWZlcmVuY2VzIHBhZ2UuPC9wPjxicj4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnPHA+RGF0ZTo8L3A+JyxcclxuICAgICAgICBpbnB1dDogW1xyXG4gICAgICAgICAgWydkYXRlJywgW11dXHJcbiAgICAgICAgXVxyXG4gICAgICB9LFxyXG4gICAgICAnRG9tYWluJzoge1xyXG4gICAgICAgIHRpdGxlOiAnPGJyPjxoNT5VcGRhdGluZyBkb21haW4gY29uZmlndXJhdGlvbnM8L2g1PjxwPkluY29taW5nIGNvbW11bmljYXRpb25zIGZyb20gYSB1c2VyIHdob3NlIGlkZW50aXR5IGlzIGZyb20gdGhlIGludHJvZHVjZWQgZG9tYWluIGFsbG93ZWQgb3IgYmxvY2tlZCBhY2NvcmRpbmcgdG8geW91ciBjb25maWd1cmF0aW9ucywgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaW4gdGhlIHByZWZlcmVuY2VzIHBhZ2UuPC9wPjxicj4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnPHA+RG9tYWluOjwvcD4nLFxyXG4gICAgICAgIGlucHV0OiBbXHJcbiAgICAgICAgICBbJ2Zvcm0nLCBbXV1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgICdHcm91cCBvZiB1c2Vycyc6IHtcclxuICAgICAgICB0aXRsZTogJzxicj48aDU+VXBkYXRpbmcgZ3JvdXBzIGNvbmZpZ3VyYXRpb25zPC9oNT48cD5JbmNvbWluZyBjb21tdW5pY2F0aW9ucyBmcm9tIGEgdXNlciB3aG9zZSBpZGVudGl0eSBpcyBpbiB0aGUgaW50cm9kdWNlZCBncm91cCB3aWxsIGJlIGFsbG93ZWQgb3IgYmxvY2tlZCBhY2NvcmRpbmcgdG8geW91ciBjb25maWd1cmF0aW9ucywgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaW4gdGhlIHByZWZlcmVuY2VzIHBhZ2UuPC9wPjxicj4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnPHA+R3JvdXAgbmFtZTo8L3A+JyxcclxuICAgICAgICBpbnB1dDogW1xyXG4gICAgICAgICAgWydzZWxlY3QnLCBbJ2dyb3VwJywgJ1NlbGVjdCBhIGdyb3VwOiddXVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcyc6IHtcclxuICAgICAgICB0aXRsZTogJzxicj48aDU+VXBkYXRpbmcgc3Vic2NyaXB0aW9ucyBjb25maWd1cmF0aW9uczwvaDU+PHA+VGhlIGFjY2VwdGFuY2Ugb2Ygc3Vic2NyaXB0aW9ucyB0byB5b3VyIGh5cGVydGllcyB3aWxsIGJlIGFsbG93ZWQgb3IgYmxvY2tlZCBhY2NvcmRpbmcgdG8geW91ciBjb25maWd1cmF0aW9ucywgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaW4gdGhlIHByZWZlcmVuY2VzIHBhZ2UuPC9wPjxicj4nLFxyXG4gICAgICAgIGlucHV0OiBbXVxyXG4gICAgICB9LFxyXG4gICAgICAnVGltZSBvZiB0aGUgZGF5Jzoge1xyXG4gICAgICAgIHRpdGxlOiAnPGJyPjxoNT5VcGRhdGluZyB0aW1lIGNvbmZpZ3VyYXRpb25zPC9oNT48cD5JbmNvbWluZyBjb21tdW5pY2F0aW9ucyBpbiB0aGUgaW50cm9kdWNlZCB0aW1lc2xvdCB3aWxsIGJlIGJsb2NrZWQsIGJ1dCB0aGlzIGNhbiBiZSBjaGFuZ2VkIGluIHRoZSBwcmVmZXJlbmNlcyBwYWdlLjwvcD48cD5QbGVhc2UgaW50cm9kdWNlIGEgbmV3IHRpbWVzbG90IGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0OjwvcD48cCBjbGFzcz1cImNlbnRlci1hbGlnblwiPiZsdDtTVEFSVC1IT1VSJmd0OzombHQ7U1RBUlQtTUlOVVRFUyZndDsgdG8gJmx0O0VORC1IT1VSJmd0OzombHQ7RU5ELU1JTlVURVMmZ3Q7PC9wPjxicj4nLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnPHA+VGltZXNsb3Q6PC9wPicsXHJcbiAgICAgICAgaW5wdXQ6IFtcclxuICAgICAgICAgIFsnZm9ybScsIFtdXVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgV2Vla2RheToge1xyXG4gICAgICAgIHRpdGxlOiAnPGJyPjxoNT5VcGRhdGluZyB3ZWVrZGF5IGNvbmZpZ3VyYXRpb25zPC9oNT48cD5JbmNvbWluZyBjb21tdW5pY2F0aW9ucyBpbiB0aGUgaW50cm9kdWNlZCB3ZWVrZGF5IHdpbGwgYmUgYWxsb3dlZCBvciBibG9ja2VkIGFjY29yZGluZyB0byB5b3VyIGNvbmZpZ3VyYXRpb25zLCB3aGljaCBjYW4gYmUgY2hhbmdlZCBpbiB0aGUgcHJlZmVyZW5jZXMgcGFnZS48L3A+PGJyPicsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICc8cD5XZWVrZGF5OjwvcD4nLFxyXG4gICAgICAgIGlucHV0OiBbXHJcbiAgICAgICAgICBbJ3NlbGVjdCcsIFsnd2Vla2RheScsICdTZWxlY3QgYSB3ZWVrZGF5OicsIFsnU2F0dXJkYXknLCAnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknXV1dXHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0QWRkaXRpb25NZXRob2RzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiB7XHJcbiAgICAgIERhdGU6IChwYXJhbXMpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHBvbGljeVRpdGxlID0gcGFyYW1zWzBdO1xyXG4gICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICAgICAgdXNlclBvbGljaWVzW3BvbGljeVRpdGxlXS5jcmVhdGVSdWxlKHBhcmFtc1s0XSwgeyBhdHRyaWJ1dGU6ICdkYXRlJywgb3BlcmF0b3I6ICdlcXVhbHMnLCBwYXJhbXM6IHBhcmFtc1szXSB9LCBwYXJhbXNbMV0sIHBhcmFtc1syXSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlUG9saWNpZXMnLCB7c291cmNlOiAnVVNFUid9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIERvbWFpbjogKHBhcmFtcykgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBsZXQgcG9saWN5VGl0bGUgPSBwYXJhbXNbMF07XHJcbiAgICAgICAgICBfdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygndXNlclBvbGljaWVzJywge30pLnRoZW4oKHVzZXJQb2xpY2llcykgPT4ge1xyXG4gICAgICAgICAgICB1c2VyUG9saWNpZXNbcG9saWN5VGl0bGVdLmNyZWF0ZVJ1bGUocGFyYW1zWzRdLCB7IGF0dHJpYnV0ZTogJ2RvbWFpbicsIG9wZXJhdG9yOiAnZXF1YWxzJywgcGFyYW1zOiBwYXJhbXNbM10gfSwgcGFyYW1zWzFdLCBwYXJhbXNbMl0pO1xyXG4gICAgICAgICAgICBfdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnc2F2ZVBvbGljaWVzJywge3NvdXJjZTogJ1VTRVInfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICAnR3JvdXAgb2YgdXNlcnMnOiAocGFyYW1zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIGxldCBwb2xpY3lUaXRsZSA9IHBhcmFtc1swXTtcclxuICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigodXNlclBvbGljaWVzKSA9PiB7XHJcbiAgICAgICAgICAgIHVzZXJQb2xpY2llc1twb2xpY3lUaXRsZV0uY3JlYXRlUnVsZShwYXJhbXNbNF0sIHsgYXR0cmlidXRlOiAnc291cmNlJywgb3BlcmF0b3I6ICdpbicsIHBhcmFtczogcGFyYW1zWzNdIH0sIHBhcmFtc1sxXSwgcGFyYW1zWzJdKTtcclxuICAgICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3NhdmVQb2xpY2llcycsIHtzb3VyY2U6ICdVU0VSJ30pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcyc6IChwYXJhbXMpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHBvbGljeVRpdGxlID0gcGFyYW1zWzBdO1xyXG4gICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICAgICAgbGV0IG9wZXJhdG9yID0gJ2VxdWFscyc7XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXNbM10gPT09ICdwcmVhdXRob3Jpc2VkJykge1xyXG4gICAgICAgICAgICAgIG9wZXJhdG9yID0gJ2luJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVElBR086IHRoaXMgaXMgZ2l2aW5nIG1lIGFuIGVycm9yLi4uXHJcbiAgICAgICAgICAgIHVzZXJQb2xpY2llc1twb2xpY3lUaXRsZV0uY3JlYXRlUnVsZShwYXJhbXNbNF0sIHsgYXR0cmlidXRlOiAnc3Vic2NyaXB0aW9uJywgb3BlcmF0b3I6IG9wZXJhdG9yLCBwYXJhbXM6IHBhcmFtc1szXSB9LCBwYXJhbXNbMV0sIHBhcmFtc1syXSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlUG9saWNpZXMnLCB7c291cmNlOiAnVVNFUid9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgICdUaW1lIG9mIHRoZSBkYXknOiAocGFyYW1zKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIGxldCBwb2xpY3lUaXRsZSA9IHBhcmFtc1swXTtcclxuICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigodXNlclBvbGljaWVzKSA9PiB7XHJcbiAgICAgICAgICAgIHBhcmFtc1szXSA9IHBhcmFtc1szXS5zcGxpdCgnIHRvICcpO1xyXG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBwYXJhbXNbM11bMF0uc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgc3RhcnQgPSBzdGFydC5qb2luKCcnKTtcclxuICAgICAgICAgICAgbGV0IGVuZCA9IHBhcmFtc1szXVsxXS5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgICBlbmQgPSBlbmQuam9pbignJyk7XHJcbiAgICAgICAgICAgIHVzZXJQb2xpY2llc1twb2xpY3lUaXRsZV0uY3JlYXRlUnVsZShwYXJhbXNbNF0sIHsgYXR0cmlidXRlOiAndGltZScsIG9wZXJhdG9yOiAnYmV0d2VlbicsIHBhcmFtczogW3N0YXJ0LCBlbmRdIH0sIHBhcmFtc1sxXSwgcGFyYW1zWzJdKTtcclxuICAgICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3NhdmVQb2xpY2llcycsIHtzb3VyY2U6ICdVU0VSJ30pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIFdlZWtkYXk6IChwYXJhbXMpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHdlZWtkYXlzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddO1xyXG4gICAgICAgICAgcGFyYW1zWzNdID0gd2Vla2RheXMuaW5kZXhPZihwYXJhbXNbM10pO1xyXG4gICAgICAgICAgbGV0IHBvbGljeVRpdGxlID0gcGFyYW1zWzBdO1xyXG4gICAgICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICAgICAgdXNlclBvbGljaWVzW3BvbGljeVRpdGxlXS5jcmVhdGVSdWxlKHBhcmFtc1s0XSwgeyBhdHRyaWJ1dGU6ICd3ZWVrZGF5Jywgb3BlcmF0b3I6ICdlcXVhbHMnLCBwYXJhbXM6IHBhcmFtc1szXSB9LCBwYXJhbXNbMV0sIHBhcmFtc1syXSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlUG9saWNpZXMnLCB7c291cmNlOiAnVVNFUid9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRWYWxpZGF0aW9uTWV0aG9kcygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIERhdGU6IChzY29wZSwgaW5mbykgPT4geyByZXR1cm4gdGhpcy5pc1ZhbGlkRGF0ZShpbmZvKSAmIHRoaXMuaXNWYWxpZFNjb3BlKHNjb3BlKTsgfSxcclxuICAgICAgJ0dyb3VwIG9mIHVzZXJzJzogKHNjb3BlLCBpbmZvKSA9PiB7IHJldHVybiB0aGlzLmlzVmFsaWRTdHJpbmcoaW5mbykgJiB0aGlzLmlzVmFsaWRTY29wZShzY29wZSk7IH0sXHJcbiAgICAgIERvbWFpbjogKHNjb3BlLCBpbmZvKSA9PiB7IHJldHVybiB0aGlzLmlzVmFsaWREb21haW4oaW5mbykgJiB0aGlzLmlzVmFsaWRTY29wZShzY29wZSk7IH0sXHJcbiAgICAgIFdlZWtkYXk6IChzY29wZSwgaW5mbykgPT4geyByZXR1cm4gdHJ1ZSAmIHRoaXMuaXNWYWxpZFNjb3BlKHNjb3BlKTsgfSxcclxuICAgICAgJ1N1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcyc6IChzY29wZSwgaW5mbykgPT4geyByZXR1cm4gdGhpcy5pc1ZhbGlkU3Vic2NyaXB0aW9uVHlwZShpbmZvKSAmIHRoaXMuaXNWYWxpZFNjb3BlKHNjb3BlKTsgfSxcclxuICAgICAgJ1RpbWUgb2YgdGhlIGRheSc6IChzY29wZSwgaW5mbykgPT4geyByZXR1cm4gdGhpcy5pc1ZhbGlkVGltZXNsb3QoaW5mbykgJiB0aGlzLmlzVmFsaWRTY29wZShzY29wZSk7IH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBY3RpdmVQb2xpY3kodGl0bGUpIHtcclxuICAgIGxldCBfdGhpcyA9IHRoaXM7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBfdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnYWN0aXZlVXNlclBvbGljeScsIHt1c2VyUG9saWN5OiB0aXRsZX0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdzYXZlQWN0aXZlUG9saWN5Jywge30pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZEVtYWlsKGluZm8pIHtcclxuICAgIGxldCBwYXR0ZXJuID0gL1thLXowLTkuXyUrLV0rQFthLXowLTkuLV0rXFwuW2Etel17MiwzfSQvO1xyXG4gICAgcmV0dXJuIHBhdHRlcm4udGVzdChpbmZvKTtcclxuICB9XHJcblxyXG4gIGlzVmFsaWREb21haW4oaW5mbykge1xyXG4gICAgbGV0IHBhdHRlcm4gPSAvW2EtejAtOS4tXStcXC5bYS16XXsyLDN9JC87XHJcbiAgICByZXR1cm4gcGF0dGVybi50ZXN0KGluZm8pO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZFN0cmluZyhpbmZvKSB7XHJcbiAgICBsZXQgcGF0dGVybiA9IC9bYS16MC05Li1dJC87XHJcbiAgICByZXR1cm4gcGF0dGVybi50ZXN0KGluZm8pO1xyXG4gIH1cclxuXHJcbiAgaXNWYWxpZFN1YnNjcmlwdGlvblR5cGUoaW5mbykge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBpc1ZhbGlkRGF0ZShpbmZvKSB7XHJcbiAgICBsZXQgaW5mb1NwbGl0ID0gaW5mby5zcGxpdCgnLycpO1xyXG4gICAgbGV0IGRheSA9IHBhcnNlSW50KGluZm9TcGxpdFswXSk7XHJcbiAgICBsZXQgbW9udGggPSBwYXJzZUludChpbmZvU3BsaXRbMV0pO1xyXG4gICAgbGV0IHllYXIgPSBwYXJzZUludChpbmZvU3BsaXRbMl0pO1xyXG5cclxuICAgIGxldCBkYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGgtMSwgZGF5KTtcclxuICAgIGxldCBpc1ZhbGlkRm9ybWF0ID0gZGF0ZS5nZXRGdWxsWWVhcigpID09PSB5ZWFyICYmIGRhdGUuZ2V0TW9udGgoKSArIDEgPT09IG1vbnRoICYmIGRhdGUuZ2V0RGF0ZSgpID09PSBkYXk7XHJcbiAgICBsZXQgZm9ybWF0dGVkRGF0ZSA9IGRhdGUuZ2V0RGF0ZSgpICsgJy8nICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy8nICsgZGF0ZS5nZXRGdWxsWWVhcigpXHJcbiAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGxldCB0b2RheSA9IG5vdy5nZXREYXRlKCkgKyAnLycgKyAobm93LmdldE1vbnRoKCkgKyAxKSArICcvJyArIG5vdy5nZXRGdWxsWWVhcigpO1xyXG5cclxuICAgIGxldCBpc0Z1dHVyZSA9IGZhbHNlO1xyXG4gICAgaWYgKGRhdGUuZ2V0RnVsbFllYXIoKSA+IG5vdy5nZXRGdWxsWWVhcigpKSB7XHJcbiAgICAgIGlzRnV0dXJlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChkYXRlLmdldEZ1bGxZZWFyKCkgPT0gbm93LmdldEZ1bGxZZWFyKCkpIHtcclxuICAgICAgICBpZiAoKGRhdGUuZ2V0TW9udGgoKSArIDEpID4gKG5vdy5nZXRNb250aCgpICsgMSkpIHtcclxuICAgICAgICAgIGlzRnV0dXJlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKChkYXRlLmdldE1vbnRoKCkgKyAxKSA9PSAobm93LmdldE1vbnRoKCkgKyAxKSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0ZS5nZXREYXRlKCkgPj0gKG5vdy5nZXREYXRlKCkpKSB7XHJcbiAgICAgICAgICAgICAgaXNGdXR1cmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChpc1ZhbGlkRm9ybWF0ICYmIGlzRnV0dXJlKTtcclxuICB9XHJcblxyXG4gIGlzVmFsaWRTY29wZShzY29wZSkge1xyXG4gICAgcmV0dXJuIHNjb3BlICE9PSAnJztcclxuICB9XHJcblxyXG4gIGlzVmFsaWRUaW1lc2xvdChpbmZvKSB7XHJcbiAgICBpZiAoIWluZm8pIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IHNwbGl0SW5mbyA9IGluZm8uc3BsaXQoJyB0byAnKTsgLy8gWzEyOjAwLCAxMzowMF1cclxuICAgIGxldCB0d29UaW1lcyA9IHNwbGl0SW5mby5sZW5ndGggPT09IDI7XHJcbiAgICBpZiAoIXR3b1RpbWVzKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGxldCBzcGxpdFN0YXJ0ID0gc3BsaXRJbmZvWzBdLnNwbGl0KCc6Jyk7IC8vIFsxMiwgMDBdXHJcbiAgICBsZXQgc3BsaXRFbmQgPSBzcGxpdEluZm9bMV0uc3BsaXQoJzonKTsgLy8gWzEzLCAwMF1cclxuICAgIGlmIChzcGxpdFN0YXJ0Lmxlbmd0aCAhPT0gMiB8fCBzcGxpdEVuZC5sZW5ndGggIT09IDIpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IG9rU2l6ZSA9IChzcGxpdFN0YXJ0WzBdLmxlbmd0aCA9PT0gMikgJiYgKHNwbGl0U3RhcnRbMV0ubGVuZ3RoID09PSAyKSAmJiAoc3BsaXRFbmRbMF0ubGVuZ3RoID09PSAyKSAmJiAoc3BsaXRFbmRbMV0ubGVuZ3RoID09PSAyKTtcclxuICAgIGxldCBhcmVJbnRlZ2VycyA9IChzcGxpdFN0YXJ0WzBdID09IHBhcnNlSW50KHNwbGl0U3RhcnRbMF0sIDEwKSkgJiYgKHNwbGl0U3RhcnRbMV0gPT0gcGFyc2VJbnQoc3BsaXRTdGFydFsxXSwgMTApKSAmJiAoc3BsaXRFbmRbMF0gPT0gcGFyc2VJbnQoc3BsaXRFbmRbMF0sIDEwKSkgJiYgKHNwbGl0RW5kWzFdID09IHBhcnNlSW50KHNwbGl0RW5kWzFdLCAxMCkpO1xyXG4gICAgcmV0dXJuIHR3b1RpbWVzICYmIG9rU2l6ZSAmJiBhcmVJbnRlZ2VycztcclxuICB9XHJcblxyXG4gIGdldEZvcm1hdHRlZFBvbGljaWVzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigocG9saWNpZXNQRSkgPT4ge1xyXG4gICAgICAgIGxldCBwb2xpY2llc0dVSSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpIGluIHBvbGljaWVzUEUpIHtcclxuICAgICAgICAgIGxldCBwb2xpY3kgPSB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBwb2xpY2llc1BFW2ldLmtleSxcclxuICAgICAgICAgICAgcnVsZXNUaXRsZXM6IFtdLFxyXG4gICAgICAgICAgICBpZHM6IFtdXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHBvbGljaWVzUEVbaV0ucnVsZXMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHBvbGljaWVzUEVbaV0ucnVsZXMgPSBwb2xpY2llc1BFW2ldLnNvcnRSdWxlcygpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqIGluIHBvbGljaWVzUEVbaV0ucnVsZXMpIHtcclxuICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBfdGhpcy5fZ2V0VGl0bGUocG9saWNpZXNQRVtpXS5ydWxlc1tqXSk7XHJcbiAgICAgICAgICAgICAgcG9saWN5LnJ1bGVzVGl0bGVzLnB1c2godGl0bGUpO1xyXG4gICAgICAgICAgICAgIHBvbGljeS5pZHMucHVzaChwb2xpY3kudGl0bGUgKyAnOicgKyBwb2xpY2llc1BFW2ldLnJ1bGVzW2pdLnByaW9yaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHBvbGljaWVzR1VJLnB1c2gocG9saWN5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc29sdmUocG9saWNpZXNHVUkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UnVsZU9mUG9saWN5KHRpdGxlLCBwcmlvcml0eSkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCd1c2VyUG9saWNpZXMnLCB7fSkudGhlbigocG9saWNpZXMpID0+IHtcclxuICAgICAgICBsZXQgcG9saWN5ID0gcG9saWNpZXNbdGl0bGVdO1xyXG4gICAgICAgIHJlc29sdmUocG9saWN5LmdldFJ1bGVCeVByaW9yaXR5KHByaW9yaXR5KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGl0bGUocnVsZSkge1xyXG4gICAgbGV0IGNvbmRpdGlvbiA9IHJ1bGUuY29uZGl0aW9uO1xyXG4gICAgbGV0IGF1dGhvcmlzZSA9IChydWxlLmRlY2lzaW9uKSA/ICdhbGxvd2VkJyA6ICdibG9ja2VkJztcclxuICAgIGxldCB0YXJnZXQgPSBydWxlLnRhcmdldCA9PT0gJ2dsb2JhbCcgPyAnQWxsIGlkZW50aXRpZXMgYW5kIGh5cGVydGllcycgOiBydWxlLnRhcmdldDtcclxuICAgIGxldCBhdHRyaWJ1dGUgPSBjb25kaXRpb24uYXR0cmlidXRlO1xyXG4gICAgc3dpdGNoKGF0dHJpYnV0ZSkge1xyXG4gICAgICBjYXNlICdkYXRlJzpcclxuICAgICAgICByZXR1cm4gJ0RhdGUgJyArIGNvbmRpdGlvbi5wYXJhbXMgKyAnIGlzICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICBjYXNlICdkb21haW4nOlxyXG4gICAgICAgIHJldHVybiAnRG9tYWluIFxcXCInICsgY29uZGl0aW9uLnBhcmFtcyArICdcXFwiIGlzICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICBjYXNlICdzb3VyY2UnOlxyXG4gICAgICAgIGlmIChjb25kaXRpb24ub3BlcmF0b3IgPT09ICdpbicpIHtcclxuICAgICAgICAgIHJldHVybiAnR3JvdXAgXFxcIicgKyBjb25kaXRpb24ucGFyYW1zICsgJ1xcXCIgaXMgJyArIGF1dGhvcmlzZSArICcgKCcgKyB0YXJnZXQgKyAnKSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChjb25kaXRpb24ub3BlcmF0b3IgPT09ICdlcXVhbHMnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnVXNlciAnICsgY29uZGl0aW9uLnBhcmFtcyArICcgaXMgJyArIGF1dGhvcmlzZSArICcgKCcgKyB0YXJnZXQgKyAnKSc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICdzdWJzY3JpcHRpb24nOlxyXG4gICAgICAgIGlmIChjb25kaXRpb24ucGFyYW1zID09PSAnKicpIHtcclxuICAgICAgICAgIHJldHVybiAnU3Vic2NyaXB0aW9ucyBmcm9tIGFsbCBoeXBlcnRpZXMgYXJlICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoY29uZGl0aW9uLnBhcmFtcyA9PT0gJ3ByZWF1dGhvcmlzZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnU3Vic2NyaXB0aW9ucyBmcm9tIHByZXZpb3VzbHkgYXV0aG9yaXNlZCBoeXBlcnRpZXMgYXJlIGFsbG93ZWQgKCcgKyB0YXJnZXQgKyAnKSc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBjYXNlICd0aW1lJzpcclxuICAgICAgICBsZXQgc3RhcnQgPSBjb25kaXRpb24ucGFyYW1zWzBdWzBdICsgY29uZGl0aW9uLnBhcmFtc1swXVsxXSArICc6JyArIGNvbmRpdGlvbi5wYXJhbXNbMF1bMl0gKyBjb25kaXRpb24ucGFyYW1zWzBdWzNdO1xyXG4gICAgICAgIGxldCBlbmQgPSBjb25kaXRpb24ucGFyYW1zWzFdWzBdICsgY29uZGl0aW9uLnBhcmFtc1sxXVsxXSArICc6JyArIGNvbmRpdGlvbi5wYXJhbXNbMV1bMl0gKyBjb25kaXRpb24ucGFyYW1zWzFdWzNdO1xyXG4gICAgICAgIHJldHVybiAnVGltZXNsb3QgZnJvbSAnICsgc3RhcnQgKyAnIHRvICcgKyBlbmQgKyAnIGlzICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICBjYXNlICd3ZWVrZGF5JzpcclxuICAgICAgICBsZXQgd2Vla2RheXMgPSBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J107XHJcbiAgICAgICAgbGV0IHdlZWtkYXlJRCA9IGNvbmRpdGlvbi5wYXJhbXM7XHJcbiAgICAgICAgcmV0dXJuICdXZWVrZGF5IFxcXCInICsgd2Vla2RheXNbd2Vla2RheUlEXSArICdcXFwiIGlzICcgKyBhdXRob3Jpc2UgKyAnICgnICsgdGFyZ2V0ICsgJyknO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiAnUnVsZSAnICsgcnVsZS5wcmlvcml0eSArICcgaXMgJyArIGF1dGhvcmlzZSArICcgKCcgKyB0YXJnZXQgKyAnKSc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRWYXJpYWJsZXMoKSB7XHJcbiAgICBsZXQgdmFyaWFibGVzVGl0bGVzID0gW107XHJcbiAgICBmb3IgKGxldCBpIGluIHRoaXMudmFyaWFibGVzKSB7XHJcbiAgICAgIHZhcmlhYmxlc1RpdGxlcy5wdXNoKGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhcmlhYmxlc1RpdGxlcztcclxuICB9XHJcblxyXG4gIGdldFZhcmlhYmxlSW5mbyh2YXJpYWJsZSkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFyaWFibGVzW3ZhcmlhYmxlXTtcclxuICB9XHJcblxyXG4gIGdldE15RW1haWxzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ2dldE15RW1haWxzJywge30pO1xyXG4gIH1cclxuXHJcbiAgZ2V0TXlIeXBlcnRpZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnZ2V0TXlIeXBlcnRpZXMnLCB7fSk7XHJcbiAgfVxyXG5cclxuICAvL1RPRE8gSWYgdGhlcmUgaXMgYSBwcm9ibGVtIHdpdGggdGhlIGlucHV0LCBzaG93IGl0IHRvIHRoZSB1c2VyXHJcbiAgc2V0SW5mbyh2YXJpYWJsZSwgcG9saWN5VGl0bGUsIGluZm8sIGF1dGhvcmlzZSwgc2NvcGUsIHRhcmdldCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmIChfdGhpcy52YWxpZGF0aW9uW3ZhcmlhYmxlXShzY29wZSwgaW5mbykpIHtcclxuICAgICAgICBfdGhpcy5hZGRpdGlvblt2YXJpYWJsZV0oW3BvbGljeVRpdGxlLCBzY29wZSwgdGFyZ2V0LCBpbmZvLCBhdXRob3Jpc2VdKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZWplY3QoJ0ludmFsaWQgY29uZmlndXJhdGlvbicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUluZm8odmFyaWFibGUsIHNjb3BlLCB0YXJnZXQsIGluZm8pIHtcclxuICAgIGxldCBwYXJhbXMgPSBbc2NvcGUsIHRhcmdldCwgaW5mb107XHJcbiAgICBpZiAodmFyaWFibGUgPT09ICdtZW1iZXInKSB7XHJcbiAgICAgIGxldCBjb25kaXRpb25TcGxpdCA9IGluZm8uc3BsaXQoJyAnKTtcclxuICAgICAgbGV0IGdyb3VwTmFtZSA9IGNvbmRpdGlvblNwbGl0WzJdO1xyXG4gICAgICBwYXJhbXMgPSBbc2NvcGUsIGdyb3VwTmFtZSwgaW5mb107XHJcbiAgICB9XHJcbiAgICB0aGlzLmRlbGV0aW9uW3ZhcmlhYmxlXShwYXJhbXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0R3JvdXBzKCkge1xyXG4gICAgbGV0IF90aGlzID0gdGhpcztcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIF90aGlzLmNhbGxQb2xpY3lFbmdpbmVGdW5jKCdncm91cHMnLCB7fSkudGhlbigoZ3JvdXBzKSA9PiB7XHJcbiAgICAgICAgbGV0IGdyb3Vwc0dVSSA9IHtcclxuICAgICAgICAgIGdyb3Vwc05hbWVzOiBbXSxcclxuICAgICAgICAgIG1lbWJlcnM6IFtdLFxyXG4gICAgICAgICAgaWRzOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgaW4gZ3JvdXBzKSB7XHJcbiAgICAgICAgICBncm91cHNHVUkuZ3JvdXBzTmFtZXMucHVzaChpKTtcclxuICAgICAgICAgIGdyb3Vwc0dVSS5tZW1iZXJzLnB1c2goZ3JvdXBzW2ldKTtcclxuICAgICAgICAgIGxldCBpZHMgPSBbXTtcclxuICAgICAgICAgIGZvciAobGV0IGogaW4gZ3JvdXBzW2ldKSB7XHJcbiAgICAgICAgICAgIGlkcy5wdXNoKGkgKyAnOjonICsgZ3JvdXBzW2ldW2pdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGdyb3Vwc0dVSS5pZHMucHVzaChpZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnVElBR08gZ3JvdXBzJywgZ3JvdXBzR1VJKVxyXG4gICAgICAgIHJlc29sdmUoZ3JvdXBzR1VJKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEdyb3Vwc05hbWVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ2dldEdyb3Vwc05hbWVzJywge30pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRnJvbUdyb3VwKGdyb3VwTmFtZSwgdXNlcikge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3JlbW92ZUZyb21Hcm91cCcsIHtncm91cE5hbWU6IGdyb3VwTmFtZSwgdXNlckVtYWlsOiB1c2VyfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQb2xpY3kocG9saWN5VGl0bGUsIHJ1bGUsIG5ld0RlY2lzaW9uLCBuZXdTdWJzY3JpcHRpb25UeXBlKSB7XHJcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgX3RoaXMuY2FsbFBvbGljeUVuZ2luZUZ1bmMoJ3VzZXJQb2xpY2llcycsIHt9KS50aGVuKCh1c2VyUG9saWNpZXMpID0+IHtcclxuICAgICAgICB1c2VyUG9saWNpZXNbcG9saWN5VGl0bGVdLmRlbGV0ZVJ1bGUocnVsZSk7XHJcbiAgICAgICAgaWYgKCFuZXdTdWJzY3JpcHRpb25UeXBlKSB7XHJcbiAgICAgICAgICB1c2VyUG9saWNpZXNbcG9saWN5VGl0bGVdLmNyZWF0ZVJ1bGUobmV3RGVjaXNpb24sIHJ1bGUuY29uZGl0aW9uLCBydWxlLnNjb3BlLCBydWxlLnRhcmdldCwgcnVsZS5wcmlvcml0eSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxldCBvcGVyYXRvciA9IChuZXdTdWJzY3JpcHRpb25UeXBlID09PSAnKicpID8gJ2VxdWFscycgOiAnaW4nO1xyXG4gICAgICAgICAgdXNlclBvbGljaWVzW3BvbGljeVRpdGxlXS5jcmVhdGVSdWxlKG5ld0RlY2lzaW9uLCBbeyBhdHRyaWJ1dGU6ICdzdWJzY3JpcHRpb24nLCBvcGVhdG9yOiBvcGVyYXRvciwgcGFyYW1zOiBuZXdTdWJzY3JpcHRpb25UeXBlIH1dLCBydWxlLnNjb3BlLCBydWxlLnRhcmdldCwgcnVsZS5wcmlvcml0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfdGhpcy5jYWxsUG9saWN5RW5naW5lRnVuYygnc2F2ZUFjdGl2ZVBvbGljeScsIHt9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb2xpY2llc01hbmFnZXI7XHJcbiIsIi8qKlxyXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxyXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXHJcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXHJcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcclxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcclxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXHJcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXHJcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cclxuKlxyXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4qXHJcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuKlxyXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKi9cclxuaW1wb3J0IFVSSSBmcm9tICd1cmlqcyc7XHJcbmltcG9ydCBJZGVudGl0aWVzR1VJIGZyb20gJy4vYWRtaW4vSWRlbnRpdGllc0dVSSc7XHJcbmltcG9ydCBQb2xpY2llc0dVSSBmcm9tICcuL2FkbWluL1BvbGljaWVzR1VJJztcclxuaW1wb3J0IFJ1bnRpbWVGYWN0b3J5IGZyb20gJy4vUnVudGltZUZhY3RvcnknO1xyXG5cclxudHJ5IHtcclxuICB3aW5kb3cuY29yZG92YSA9IHBhcmVudC5jb3Jkb3ZhICE9PSB1bmRlZmluZWQ7XHJcbiAgaWYgKHdpbmRvdy5jb3Jkb3ZhKSB7IHdpbmRvdy5vcGVuID0gZnVuY3Rpb24odXJsKSB7IHJldHVybiBwYXJlbnQuY29yZG92YS5JbkFwcEJyb3dzZXIub3Blbih1cmwsICdfYmxhbmsnLCAnbG9jYXRpb249bm8sdG9vbGJhcj1ubycpOyB9OyB9XHJcbn0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmxvZygnY29yZG92YSBub3Qgc3VwcG9ydGVkJyk7IH1cclxuXHJcbmZ1bmN0aW9uIHJldHVybkh5cGVydHkoc291cmNlLCBoeXBlcnR5KSB7XHJcbiAgc291cmNlLnBvc3RNZXNzYWdlKHt0bzogJ3J1bnRpbWU6bG9hZGVkSHlwZXJ0eScsIGJvZHk6IGh5cGVydHl9LCAnKicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZWFyY2hIeXBlcnR5KHJ1bnRpbWUsIGRlc2NyaXB0b3IpIHtcclxuICBsZXQgaHlwZXJ0eSA9IHVuZGVmaW5lZDtcclxuICBsZXQgaW5kZXggPSAwO1xyXG4gIHdoaWxlICghaHlwZXJ0eSAmJiBpbmRleCA8IHJ1bnRpbWUucmVnaXN0cnkuaHlwZXJ0aWVzTGlzdC5sZW5ndGgpIHtcclxuICAgIGlmIChydW50aW1lLnJlZ2lzdHJ5Lmh5cGVydGllc0xpc3RbaW5kZXhdLmRlc2NyaXB0b3IgPT09IGRlc2NyaXB0b3IpIHsgaHlwZXJ0eSA9IHJ1bnRpbWUucmVnaXN0cnkuaHlwZXJ0aWVzTGlzdFtpbmRleF07IH1cclxuXHJcbiAgICBpbmRleCsrO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGh5cGVydHk7XHJcbn1cclxuXHJcbmxldCBwYXJhbWV0ZXJzID0gbmV3IFVSSSh3aW5kb3cubG9jYXRpb24pLnNlYXJjaCh0cnVlKTtcclxubGV0IHJ1bnRpbWVVUkwgPSBwYXJhbWV0ZXJzLnJ1bnRpbWU7XHJcbmxldCBkb21haW4gPSBwYXJhbWV0ZXJzLmRvbWFpbjtcclxubGV0IGRldmVsb3BtZW50ID0gcGFyYW1ldGVycy5kZXZlbG9wbWVudCA9PT0gJ3RydWUnO1xyXG5sZXQgY2F0YWxvZ3VlID0gUnVudGltZUZhY3RvcnkuY3JlYXRlUnVudGltZUNhdGFsb2d1ZShkZXZlbG9wbWVudCk7XHJcbmxldCBydW50aW1lRGVzY3JpcHRvcjtcclxuY2F0YWxvZ3VlLmdldFJ1bnRpbWVEZXNjcmlwdG9yKHJ1bnRpbWVVUkwpXHJcbiAgLnRoZW4oZnVuY3Rpb24oZGVzY3JpcHRvcikge1xyXG4gICAgcnVudGltZURlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xyXG4gICAgbGV0IHNvdXJjZVBhY2thZ2VVUkwgPSBkZXNjcmlwdG9yLnNvdXJjZVBhY2thZ2VVUkw7XHJcbiAgICBpZiAoc291cmNlUGFja2FnZVVSTCA9PT0gJy9zb3VyY2VQYWNrYWdlJykge1xyXG4gICAgICByZXR1cm4gZGVzY3JpcHRvci5zb3VyY2VQYWNrYWdlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNhdGFsb2d1ZS5nZXRTb3VyY2VQYWNrYWdlRnJvbVVSTChzb3VyY2VQYWNrYWdlVVJMKTtcclxuICB9KVxyXG4gIC50aGVuKGZ1bmN0aW9uKHNvdXJjZVBhY2thZ2UpIHtcclxuICAgIGV2YWwuYXBwbHkod2luZG93LCBbc291cmNlUGFja2FnZS5zb3VyY2VDb2RlXSk7XHJcblxyXG4gICAgLy9sZXQgcnVudGltZSA9IG5ldyBSdW50aW1lKFJ1bnRpbWVGYWN0b3J5LCB3aW5kb3cubG9jYXRpb24uaG9zdCk7XHJcbiAgICBpZiAoIWRvbWFpbikgZG9tYWluID0gd2luZG93LmxvY2F0aW9uLmhvc3Q7XHJcbiAgICBsZXQgcnVudGltZSA9IG5ldyBSdW50aW1lKHJ1bnRpbWVEZXNjcmlwdG9yLCBSdW50aW1lRmFjdG9yeSwgZG9tYWluKTtcclxuICAgIHdpbmRvdy5ydW50aW1lID0gcnVudGltZTtcclxuICAgIHJ1bnRpbWUuaW5pdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcblxyXG4gICAgICAvLyBUSUFHT1xyXG4gICAgICBpZiAoIXJ1bnRpbWUucG9saWN5RW5naW5lKSB0aHJvdyBFcnJvcignUG9saWN5IEVuZ2luZSBpcyBub3Qgc2V0IScpO1xyXG4gICAgICBsZXQgcGVwR3VpVVJMID0gcnVudGltZS5wb2xpY3lFbmdpbmUuY29udGV4dC5ndWlVUkw7XHJcbiAgICAgIGxldCBwZXBVUkwgPSBydW50aW1lLnBvbGljeUVuZ2luZS5jb250ZXh0LnBlcFVSTDtcclxuICAgICAgbGV0IHBlcEdVSSA9IG5ldyBQb2xpY2llc0dVSShwZXBHdWlVUkwsIHBlcFVSTCwgcnVudGltZS5wb2xpY3lFbmdpbmUubWVzc2FnZUJ1cywgcnVudGltZS5wb2xpY3lFbmdpbmUpO1xyXG5cclxuICAgICAgcGVwR1VJLnByZXBhcmVBdHRyaWJ1dGVzKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgbGV0IGlkbUd1aVVSTCA9IHJ1bnRpbWUuaWRlbnRpdHlNb2R1bGUuX3J1bnRpbWVVUkwgKyAnL2lkZW50aXR5LWd1aSc7XHJcbiAgICAgICAgbGV0IGlkbVVSTCA9IHJ1bnRpbWUuaWRlbnRpdHlNb2R1bGUuX3J1bnRpbWVVUkwgKyAnL2lkbSc7XHJcbiAgICAgICAgbGV0IGlkZW50aXRpZXNHVUkgPSBuZXcgSWRlbnRpdGllc0dVSShpZG1HdWlVUkwsIGlkbVVSTCwgcnVudGltZS5pZGVudGl0eU1vZHVsZS5tZXNzYWdlQnVzKTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgaWYgKGV2ZW50LmRhdGEudG8gPT09ICdjb3JlOmxvYWRIeXBlcnR5Jykge1xyXG4gICAgICAgICAgICBsZXQgZGVzY3JpcHRvciA9IGV2ZW50LmRhdGEuYm9keS5kZXNjcmlwdG9yO1xyXG4gICAgICAgICAgICBsZXQgcmV1c2VBZGRyZXNzID0gZXZlbnQuZGF0YS5ib2R5LnJldXNlQWRkcmVzcztcclxuICAgICAgICAgICAgbGV0IGh5cGVydHkgPSBzZWFyY2hIeXBlcnR5KHJ1bnRpbWUsIGRlc2NyaXB0b3IpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGh5cGVydHkpIHtcclxuICAgICAgICAgICAgICByZXR1cm5IeXBlcnR5KGV2ZW50LnNvdXJjZSwge3J1bnRpbWVIeXBlcnR5VVJMOiBoeXBlcnR5Lmh5cGVydHlVUkx9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBydW50aW1lLmxvYWRIeXBlcnR5KGRlc2NyaXB0b3IsIHJldXNlQWRkcmVzcykudGhlbihyZXR1cm5IeXBlcnR5LmJpbmQobnVsbCwgZXZlbnQuc291cmNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGF0YS50byA9PT0gJ2NvcmU6bG9hZFN0dWInKSB7XHJcbiAgICAgICAgICAgIHJ1bnRpbWUubG9hZFN0dWIoZXZlbnQuZGF0YS5ib2R5LmRvbWFpbikudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0dWIgTG9hZGVkOiAnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTdHViIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEudG8gPT09ICdjb3JlOmNsb3NlJykge1xyXG4gICAgICAgICAgICBydW50aW1lLmNsb3NlKGV2ZW50LmRhdGEuYm9keS5sb2dPdXQpXHJcbiAgICAgICAgICAgICAgLnRoZW4oZXZlbnQuc291cmNlLnBvc3RNZXNzYWdlKHt0bzogJ3J1bnRpbWU6cnVudGltZUNsb3NlZCcsIGJvZHk6IHRydWV9LCAnKicpKVxyXG4gICAgICAgICAgICAgIC5jYXRjaChldmVudC5zb3VyY2UucG9zdE1lc3NhZ2Uoe3RvOiAncnVudGltZTpydW50aW1lQ2xvc2VkJywgYm9keTogZmFsc2V9LCAnKicpKTtcclxuXHJcbiAgICAgICAgICAgIC8vICBzZW5kIGxvZ291dFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzR1VJLmxvZ091dCgpLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGF0YS50byA9PT0gJ2NvcmU6bG9naW4nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb3JlOiBsb2dnaW5nIHdpdGggJywgZXZlbnQuZGF0YS5ib2R5LmlkcCk7XHJcbiAgICAgICAgICAgIGlkZW50aXRpZXNHVUkubG9naW5XaXRoSURQKGV2ZW50LmRhdGEuYm9keS5pZHApLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgIGV2ZW50LnNvdXJjZS5wb3N0TWVzc2FnZSh7dG86ICdydW50aW1lOmxvZ2dlZEluJywgYm9keTogcmVzdWx0fSwgJyonKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEudG8gPT09ICdjb3JlOmF1dGhvcmlzZScpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvcmU6YXV0aG9yaXNlICcsIGV2ZW50LmRhdGEuYm9keS5pZHAsIGV2ZW50LmRhdGEuYm9keS5zY29wZSk7XHJcbiAgICAgICAgICAgIGlkZW50aXRpZXNHVUkuYXV0aG9yaXNlKGV2ZW50LmRhdGEuYm9keS5pZHAsIGV2ZW50LmRhdGEuYm9keS5zY29wZSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgZXZlbnQuc291cmNlLnBvc3RNZXNzYWdlKHsgdG86ICdydW50aW1lOmF1dGhvcmlzZWQnLCBib2R5OiBKU09OLnN0cmluZ2lmeShyZXN1bHQpIH0sICcqJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKGUpID0+IHtcclxuICAgICAgICAgIHJ1bnRpbWUuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHt0bzogJ3J1bnRpbWU6aW5zdGFsbGVkJywgYm9keToge319LCAnKicpO1xyXG5cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuIl19"}
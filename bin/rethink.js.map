{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/runtime-core/dist/minibus.js","node_modules/runtime-core/dist/sandbox.js","node_modules/urijs/src/IPv6.js","node_modules/urijs/src/SecondLevelDomains.js","node_modules/urijs/src/URI.js","node_modules/urijs/src/punycode.js","src/ContextApp.js","src/RuntimeLoader.js","src/RuntimeUAStub.js","src/iframe.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC/fA;;AACA;;;;;;AAvBA;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAS,MAAT,CAAgB,MAAhB,EAAwB;AACtB,SAAO,QAAP,GAAkB,IAAI,iBAAJ,EAAlB;AACA,SAAO,QAAP,CAAgB,cAAhB,GAAiC,UAAS,GAAT,EAAc;AAC7C,WAAO,aAAP,CAAqB,WAArB,CAAiC,GAAjC,EAAsC,GAAtC;AACD,GAFD;AAGA,SAAO,gBAAP,CAAwB,SAAxB,EAAmC,UAAS,KAAT,EAAgB;AACjD,QAAI,MAAM,IAAN,CAAW,EAAX,KAAkB,MAAM,IAAN,CAAW,EAAX,CAAc,UAAd,CAAyB,uBAAzB,KAAqD,MAAM,IAAN,CAAW,EAAX,CAAc,QAAd,CAAuB,aAAvB,CAAvE,CAAJ,EAAmH;AAAE;AAAS;;AAE9H,WAAO,QAAP,CAAgB,UAAhB,CAA2B,MAAM,IAAjC;AACD,GAJD,EAIG,KAJH;;AAMA,SAAO,SAAP,GAAmB,IAAI,wBAAJ,CAAoB,OAAO,QAA3B,CAAnB;AACA,SAAO,SAAP,CAAiB,OAAjB,GAA2B,UAAS,GAAT,EAAc,UAAd,EAA0B,MAA1B,EAAkC,OAAlC,EAA2C;AACpE,QAAI;AACF,WAAK,KAAL,CAAW,MAAX,EAAmB,CAAC,UAAD,CAAnB;;AAEA,UAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAClC,eAAO,SAAS,GAAT,EAAc,OAAO,QAArB,EAA+B,MAA/B,EAAuC,OAAvC,CAAP;AACD;;AAED,UAAI,OAAO,SAAS,OAAhB,KAA4B,UAAhC,EAA4C;AAC1C,eAAO,SAAS,OAAT,CAAiB,GAAjB,EAAsB,OAAO,QAA7B,EAAuC,MAAvC,EAA+C,OAA/C,CAAP;AACD;AAEF,KAXD,CAWE,OAAO,KAAP,EAAc;AACd,cAAQ,KAAR,CAAc,gCAAd,EAAgD,KAAhD;AACA,YAAM,KAAK,SAAL,CAAe,MAAM,OAArB,CAAN;AACD;AACF,GAhBD;AAiBD;;AAED,SAAS,UAAT,CAAoB,iBAApB,EAAuC;AACrC,SAAO,OAAO,SAAP,CAAiB,UAAjB,CAA4B,iBAA5B,CAAP;AACD;;AAED;;;;;;kBAMe,EAAE,cAAF,EAAU,sBAAV,E;;;;;;;;;8QClEf;;;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;;;;AAEA,IAAI,gBAAJ;;AAEA,IAAI,QAAO,MAAP,yCAAO,MAAP,MAAiB,SAAjB,IAA8B,UAAU,IAA5C,EAAkD;AAC9C,cAAU,uBAAV;AACH,CAFD,MAEK;AACD,cAAU,SAAV;AACH;;kBAEc,O;;;;;;;;;ACLf;;;;AACA;;;;AACA;;;;AAEA,IAAI,SAAS,SAAb;;AAEA;;;;;;;AAjCA;;;;;;;;;;;;;;;;;;;;;;;AAuBA;;;;AAiBA,IAAI,WAAW,SAAX,QAAW,CAAC,gBAAD,EAAmB,GAAnB,EAA2B;AACxC,SAAO;AACL,uBAAmB,IAAI,IAAJ,CAAS,iBADvB;AAEL,YAAQ,IAAI,IAAJ,CAAS,MAFZ;AAGL,cAAU,iBAAiB,QAHtB;AAIL,UAAM,iBAAiB;AAJlB,GAAP;AAMD,CAPD;;AASA,IAAI,mBAAmB,CAAvB;;AAEA;;;;;;AAMA,IAAI,iBAAiB;;AAEnB,kBAAgB,wBAAC,iBAAD,EAA6C;AAAA,QAAzB,YAAyB,uEAAV,KAAU;;AAC3D,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC;AACA,UAAM,aAAa,gBAAnB;AACA,0BAAoB,CAApB;AACA,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,uBAAlB,EAA2C;AACzC,cAAI,EAAE,IAAF,CAAO,IAAP,CAAY,EAAZ,KAAmB,UAAvB,EAAmC;AACjC,mBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACA,oBAAQ,SAAS,qBAAI,UAAJ,CAAe,EAAE,IAAF,CAAO,IAAP,CAAY,iBAA3B,CAAT,EAAwD,EAAE,IAA1D,CAAR;AACD;AACF;AACF,OAPD;AAQA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,kBAAN,EAA0B,MAAM,EAAE,YAAY,iBAAd,EAAiC,0BAAjC,EAA+C,IAAI,UAAnD,EAAhC,EAAjC,EAAoI,GAApI;AACD,KAdM,CAAP;AAeD,GAlBkB;;AAoBnB,aAAW,mBAAC,GAAD,EAAM,KAAN,EAAgB;;AAEzB,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,gBAAQ,GAAR,CAAY,iDAAZ,EAA+D,EAAE,IAAjE;AACA,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,oBAAlB,EAAwC;AACtC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;;AAEA,kBAAQ,EAAE,IAAF,CAAO,IAAf;AACD,SAJD,MAIO,IAAI,EAAE,IAAF,CAAO,EAAP,KAAc,wBAAlB,EAA4C;AACjD,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;;AAEA,kBAAQ,KAAR,CAAc,iDAAd,EAAiE,EAAE,IAAnE;AACA,iBAAO,EAAE,IAAF,CAAO,IAAd;AACD;AACF,OAZD;AAaA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACA,cAAQ,GAAR,CAAY,kBAAZ,EAAgC,GAAhC,EAAqC,cAArC,EAAqD,KAArD;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,gBAAN,EAAwB,MAAM,EAAE,KAAK,GAAP,EAAY,OAAO,KAAnB,EAA9B,EAAjC,EAA6F,GAA7F;AACD,KAjBM,CAAP;AAmBD,GAzCkB;;AA2CnB,SAAO,iBAAM;AACX,YAAQ,GAAR,CAAY,0BAAZ;AACA,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,WAAW,SAAX,QAAW,CAAC,CAAD,EAAO;AACpB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,sBAAlB,EAA0C;AACxC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,QAAtC;AACA,kBAAQ,EAAE,IAAF,CAAO,IAAf;AACD;AACF,OALD;AAMA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,QAAnC;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,YAAN,EAAoB,MAAM,EAA1B,EAAjC,EAAkE,GAAlE;AACD,KATM,CAAP;AAUD,GAvDkB;;AAyDnB,SAAO,eAAC,GAAD,EAAS;;AAEd,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,kBAAlB,EAAsC;AACpC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACA,kBAAQ,EAAE,IAAF,CAAO,IAAf;AACD;AACF,OALD;AAMA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACA,cAAQ,GAAR,CAAY,oBAAZ,EAAkC,GAAlC;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,YAAN,EAAoB,MAAM,EAAE,KAAK,GAAP,EAA1B,EAAjC,EAA2E,GAA3E;AACD,KAVM,CAAP;AAYD,GAvEkB;;AAyEnB,mBAAiB,2BAAM;AACrB,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,qBAAlB,EAAyC;AACvC,cAAI,EAAE,IAAF,CAAO,IAAP,CAAY,MAAZ,KAAuB,cAA3B,EAA2C;AACzC,mBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACA,oBAAQ,IAAR;AACD;AACF;AACF,OAPD;AAQA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACD,KAVM,CAAP;AAWD,GArFkB;;AAwFnB,oBAAkB,0BAAC,MAAD,EAAY;AAC5B,WAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,eAAN,EAAuB,MAAM,EAAE,QAAQ,MAAV,EAA7B,EAAjC,EAAoF,GAApF;AACD,GA1FkB;;AA4FnB,SAAO,iBAAoB;AAAA,QAAnB,MAAmB,uEAAV,KAAU;;AACzB,YAAQ,GAAR,CAAY,sBAAZ,EAAoC,MAApC;AACA,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,uBAAlB,EAA2C;AACzC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACA,kBAAQ,QAAQ,EAAE,IAAF,CAAO,IAAf,CAAR;AACD;AACF,OALD;AAMA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,YAAN,EAAoB,MAAM,EAAE,QAAQ,MAAV,EAA1B,EAAjC,EAAiF,GAAjF;AACD,KATM,CAAP;AAUD;AAxGkB,CAArB;;AA2GA,IAAI,aAAa,SAAb,UAAa,GAAY;AAC3B,SAAO,gBAAP,CAAwB,SAAxB,EAAmC,UAAC,CAAD,EAAO;AACxC,QAAI,EAAE,IAAF,CAAO,EAAP,KAAc,qBAAlB,EAAyC;;AAEvC,UAAI,EAAE,IAAF,CAAO,IAAP,CAAY,MAAZ,KAAuB,eAA3B,EAA4C;AAC1C,eAAO,KAAP,CAAa,KAAb,GAAqB,MAArB;AACA,eAAO,KAAP,CAAa,MAAb,GAAsB,MAAtB;AACA,eAAO,KAAP,CAAa,MAAb,GAAsB,KAAtB;AACD,OAJD,MAIO;AACL,YAAI,EAAE,IAAF,CAAO,IAAP,CAAY,MAAZ,KAAuB,eAA3B,EAA4C;AAC1C,iBAAO,KAAP,CAAa,KAAb,GAAqB,MAArB;AACA,iBAAO,KAAP,CAAa,MAAb,GAAsB,MAAtB;AACA,iBAAO,KAAP,CAAa,MAAb,GAAsB,CAAtB;AACD;AACF;AAEF;AACF,GAhBD;AAiBD,CAlBD;;AAoBA;;;;AAIA,IAAI,iBAAiB;AACnB,WAAS,mBAAqF;AAAA;;AAAA,mFAAJ,EAAI;AAAA,QAAzE,MAAyE,QAAzE,MAAyE;AAAA,QAAjE,UAAiE,QAAjE,UAAiE;AAAA,QAArD,WAAqD,QAArD,WAAqD;AAAA,QAAxC,QAAwC,QAAxC,QAAwC;AAAA,QAA9B,UAA8B,QAA9B,UAA8B;AAAA,QAAlB,SAAkB,QAAlB,SAAkB;;AAC5F,YAAQ,IAAR,CAAa,WAAb,EAA0B,MAA1B,EAAkC,UAAlC,EAA8C,WAA9C,EAA2D,QAA3D,EAAqE,UAArE,EAAiF,SAAjF;AACA,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,UAAU,MAAK,WAAL,CAAiB,UAAjB,EAA6B,MAA7B,EAAqC,WAArC,EAAkD,QAAlD,EAA4D,UAA5D,EAAwE,SAAxE,CAAd;AACA,eAAS,oBAAgB,QAAQ,QAAxB,gBAA2C,QAAQ,MAAnD,iBAAqE,QAAQ,GAA7E,qBAAgG,WAAhG,EAA+G,KAA/G,EAAsH,SAAtH,CAAT;AACA,UAAI,YAAY,SAAZ,SAAY,CAAC,CAAD,EAAO;AACrB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,mBAAlB,EAAuC;AACrC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,SAAtC;AACA,kBAAQ,cAAR;AACD;AACF,OALD;AAMA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,SAAnC;AACA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,UAAC,CAAD,EAAO;AACxC,YAAI,EAAE,IAAF,CAAO,EAAP,IAAa,EAAE,IAAF,CAAO,EAAP,KAAc,6BAA/B,EAA8D;AAC5D,cAAM,MAAM,oBAAa,QAAQ,UAArB,EAAiC,SAAjC,EAA4C,SAA5C,CAAZ;AACA,cAAI,gBAAJ,CAAqB,MAArB,EAA6B,YAAM;AACjC,gBAAI,aAAJ,CAAkB,WAAlB,CAA8B,EAAE,IAAhC,EAAsC,GAAtC,EAA2C,EAAE,KAA7C;AACD,WAFD,EAEG,KAFH;AAGD;AACF,OAPD;AAQA,2BAAI,MAAJ,CAAW,MAAX;AACA;AACD,KApBM,CAAP;AAqBD,GAxBkB;;AA0BnB,aA1BmB,uBA0BP,UA1BO,EA0BK,MA1BL,EA0Ba,WA1Bb,EA0B0B,QA1B1B,EA0BoC,UA1BpC,EA0BgD;AACjE,QAAI,WAAJ,EAAiB;AACf,mBAAa,cAAc,mCAAmC,MAAnC,GAA4C,8BAAvE;AACA,eAAS,UAAU,IAAI,eAAJ,CAAQ,UAAR,EAAoB,IAApB,EAAnB;AACA,iBAAW,YAAY,aAAa,MAAb,GAAsB,iCAA7C;AACA,mBAAa,cAAc,aAAa,MAAb,GAAsB,mCAAjD;AACD,KALD,MAKO;AACL,mBAAa,qCAAmC,MAAnC,iCAAb;AACA,eAAS,UAAU,IAAI,eAAJ,CAAQ,UAAR,EAAoB,IAApB,GAA2B,OAA3B,CAAmC,YAAnC,EAAiD,EAAjD,CAAnB;AACA,iBAAW,YAAY,aAAa,MAAb,GAAsB,iCAA7C;AACA,mBAAa,cAAc,aAAa,MAAb,GAAsB,mCAAjD;AACD;;AAED,YAAQ,IAAR,CAAa,eAAb,EAA8B,UAA9B,EAA0C,MAA1C,EAAkD,QAAlD,EAA4D,UAA5D;;AAEA,WAAO;AACL,WAAK,UADA;AAEL,cAAQ,MAFH;AAGL,gBAAU,QAHL;AAIL,kBAAY;AAJP,KAAP;AAMD;AA/CkB,CAArB;;kBAkDe,c;;;;;;;;QC9MC,M,GAAA,M;AAhChB;;;;;;;;;;;;;;;;;;;;;;;AAuBA;;;;AAIA;;;;;AAKO,SAAS,MAAT,CAAgB,GAAhB,EAAsD;AAAA,MAAjC,MAAiC,uEAAxB,CAAC,EAAuB;AAAA,MAAnB,SAAmB,uEAAP,KAAO;;AAC3D,MAAI,SAAS,SAAS,aAAT,CAAuB,QAAvB,CAAb;AACA,SAAO,YAAP,CAAoB,IAApB,EAA0B,SAA1B;AACA,SAAO,KAAP,CAAa,QAAb,GAAwB,UAAxB;AACA,SAAO,KAAP,CAAa,GAAb,GAAmB,GAAnB;AACA,SAAO,KAAP,CAAa,KAAb,GAAqB,GAArB;AACA,SAAO,KAAP,CAAa,MAAb,GAAsB,GAAtB;AACA,SAAO,KAAP,CAAa,MAAb,GAAsB,MAAtB;AACA,SAAO,KAAP,GAAe,MAAf;AACA,SAAO,MAAP,GAAgB,MAAhB;AACA,SAAO,KAAP,GAAe,iBAAf;AACA,SAAO,YAAP,CAAoB,UAApB,EAAgC,EAAhC;AACA,SAAO,YAAP,CAAoB,KAApB,EAA2B,GAA3B;AACA,SAAO,YAAP,CAAoB,SAApB,EAA+B,8GAA/B;AACA,SAAO,KAAP,CAAa,OAAb,GAAuB,OAAvB;AACA,MAAI,aAAa,IAAjB,EAAuB;AACrB,WAAO,KAAP,CAAa,OAAb,GAAuB,MAAvB;AACD;AACD,WAAS,aAAT,CAAuB,MAAvB,EAA+B,WAA/B,CAA2C,MAA3C;;AAEA,SAAO,MAAP;AACD","file":"rethink.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// version: 0.13.1\n// date: Fri Aug 31 2018 09:59:56 GMT+0100 (Western European Summer Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n// version: 0.13.1\n// date: Fri Aug 31 2018 09:59:56 GMT+0100 (Western European Summer Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"minibus\",[],e):\"object\"==typeof exports?exports.minibus=e():t.minibus=e()}(\"undefined\"!=typeof self?self:this,function(){return function(t){function __webpack_require__(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var e={};return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,\"a\",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=171)}([function(t,e){var n=t.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=n)},function(t,e){var n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(t,e,n){var r=n(30)(\"wks\"),o=n(21),i=n(1).Symbol,u=\"function\"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)(\"Symbol.\"+t))}).store=r},function(t,e,n){\"use strict\";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},function(t,e,n){\"use strict\";e.__esModule=!0;var r=n(60),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}()},function(t,e,n){var r=n(1),o=n(0),i=n(18),u=n(11),s=n(10),c=function(t,e,n){var f,a,l,p=t&c.F,v=t&c.G,d=t&c.S,h=t&c.P,y=t&c.B,_=t&c.W,b=v?o:o[e]||(o[e]={}),g=b.prototype,m=v?r:d?r[e]:(r[e]||{}).prototype;v&&(n=e);for(f in n)(a=!p&&m&&void 0!==m[f])&&s(b,f)||(l=a?m[f]:n[f],b[f]=v&&\"function\"!=typeof m[f]?n[f]:y&&a?i(l,r):_&&m[f]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):h&&\"function\"==typeof l?i(Function.call,l):l,h&&((b.virtual||(b.virtual={}))[f]=l,t&c.R&&g&&!g[f]&&u(g,f,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(9);t.exports=function(t){if(!r(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e,n){var r=n(7),o=n(41),i=n(28),u=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(8),o=n(20);t.exports=n(6)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(56),o=n(25);t.exports=function(t){return r(o(t))}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=!0},function(t,e){t.exports={}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){t.exports={default:n(88),__esModule:!0}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(42),o=n(31);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+r).toString(36))}},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e,n){var r=n(8).f,o=n(10),i=n(2)(\"toStringTag\");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e,n){t.exports={default:n(102),__esModule:!0}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if(\"function\"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e,n){var r=n(30)(\"keys\"),o=n(21);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(0),o=n(1),i=o[\"__core-js_shared__\"]||(o[\"__core-js_shared__\"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})(\"versions\",[]).push({version:r.version,mode:n(14)?\"pure\":\"global\",copyright:\"© 2018 Denis Pushkarev (zloirock.ru)\"})},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e,n){var r=n(9),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(25);t.exports=function(t){return Object(r(t))}},function(t,e,n){\"use strict\";e.__esModule=!0;var r=n(53),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!==(void 0===e?\"undefined\":(0,o.default)(e))&&\"function\"!=typeof e?t:e}},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(104),o=_interopRequireDefault(r),i=n(108),u=_interopRequireDefault(i),s=n(53),c=_interopRequireDefault(s);e.default=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===e?\"undefined\":(0,c.default)(e)));t.prototype=(0,u.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){var r,o;!function(i,u){\"use strict\";r=u,void 0!==(o=\"function\"==typeof r?r.call(e,n,e,t):r)&&(t.exports=o)}(0,function(){\"use strict\";function bindMethod(t,e){var n=t[e];if(\"function\"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function realMethod(n){return\"debug\"===n&&(n=\"log\"),typeof console!==e&&(void 0!==console[n]?bindMethod(console,n):void 0!==console.log?bindMethod(console,\"log\"):t)}function replaceLoggingMethods(e,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<e?t:this.methodFactory(i,e,r)}this.log=this.debug}function enableLoggingWhenConsoleArrives(t,n,r){return function(){typeof console!==e&&(replaceLoggingMethods.call(this,n,r),this[t].apply(this,arguments))}}function defaultMethodFactory(t,e,n){return realMethod(t)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(t,r,o){function persistLevelIfPossible(t){var r=(n[t]||\"silent\").toUpperCase();if(typeof window!==e){try{return void(window.localStorage[s]=r)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+\"=\"+r+\";\"}catch(t){}}}function getPersistedLevel(){var t;if(typeof window!==e){try{t=window.localStorage[s]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(s)+\"=\");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===u.levels[t]&&(t=void 0),t}}var i,u=this,s=\"loglevel\";t&&(s+=\":\"+t),u.name=t,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=o||defaultMethodFactory,u.getLevel=function(){return i},u.setLevel=function(n,r){if(\"string\"==typeof n&&void 0!==u.levels[n.toUpperCase()]&&(n=u.levels[n.toUpperCase()]),!(\"number\"==typeof n&&n>=0&&n<=u.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+n;if(i=n,!1!==r&&persistLevelIfPossible(n),replaceLoggingMethods.call(u,n,t),typeof console===e&&n<u.levels.SILENT)return\"No console available for logging\"},u.setDefaultLevel=function(t){getPersistedLevel()||u.setLevel(t,!1)},u.enableAll=function(t){u.setLevel(u.levels.TRACE,t)},u.disableAll=function(t){u.setLevel(u.levels.SILENT,t)};var c=getPersistedLevel();null==c&&(c=null==r?\"WARN\":r),u.setLevel(c,!1)}var t=function(){},e=\"undefined\",n=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],r=new Logger,o={};r.getLogger=function(t){if(\"string\"!=typeof t||\"\"===t)throw new TypeError(\"You must supply a name when creating a logger.\");var e=o[t];return e||(e=o[t]=new Logger(t,r.getLevel(),r.methodFactory)),e};var i=typeof window!==e?window.log:void 0;return r.noConflict=function(){return typeof window!==e&&window.log===r&&(window.log=i),r},r.getLoggers=function(){return o},r})},function(t,e,n){e.f=n(2)},function(t,e,n){var r=n(1),o=n(0),i=n(14),u=n(37),s=n(8).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});\"_\"==t.charAt(0)||t in e||s(e,t,{value:u.f(t)})}},,function(t,e,n){var r=n(7),o=n(72),i=n(31),u=n(29)(\"IE_PROTO\"),s=function(){},c=function(){var t,e=n(32)(\"iframe\"),r=i.length;for(e.style.display=\"none\",n(57).appendChild(e),e.src=\"javascript:\",t=e.contentWindow.document,t.open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[u]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){t.exports=!n(6)&&!n(13)(function(){return 7!=Object.defineProperty(n(32)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(10),o=n(12),i=n(61)(!1),u=n(29)(\"IE_PROTO\");t.exports=function(t,e){var n,s=o(t),c=0,f=[];for(n in s)n!=u&&r(s,n)&&f.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(f,n)||f.push(n));return f}},function(t,e){e.f=Object.getOwnPropertySymbols},,function(t,e,n){\"use strict\";var r=n(70)(!0);n(51)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(24),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){n(73);for(var r=n(1),o=n(11),i=n(15),u=n(2)(\"toStringTag\"),s=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),c=0;c<s.length;c++){var f=s[c],a=r[f],l=a&&a.prototype;l&&!l[u]&&o(l,u,f),i[f]=i.Array}},function(t,e,n){\"use strict\";function PromiseCapability(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError(\"Bad Promise constructor\");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}var r=n(22);t.exports.f=function(t){return new PromiseCapability(t)}},function(t,e,n){var r=n(5),o=n(0),i=n(13);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*i(function(){n(1)}),\"Object\",u)}},function(t,e,n){var r=n(27),o=n(20),i=n(12),u=n(28),s=n(10),c=n(41),f=Object.getOwnPropertyDescriptor;e.f=n(6)?f:function(t,e){if(t=i(t),e=u(e,!0),c)try{return f(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){\"use strict\";var r=n(14),o=n(5),i=n(52),u=n(11),s=n(15),c=n(71),f=n(23),a=n(58),l=n(2)(\"iterator\"),p=!([].keys&&\"next\"in[].keys()),v=function(){return this};t.exports=function(t,e,n,d,h,y,_){c(n,e,d);var b,g,m,w=function(t){if(!p&&t in P)return P[t];switch(t){case\"keys\":case\"values\":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+\" Iterator\",O=\"values\"==h,M=!1,P=t.prototype,S=P[l]||P[\"@@iterator\"]||h&&P[h],L=S||w(h),j=h?O?w(\"entries\"):L:void 0,k=\"Array\"==e?P.entries||S:S;if(k&&(m=a(k.call(new t)))!==Object.prototype&&m.next&&(f(m,x,!0),r||\"function\"==typeof m[l]||u(m,l,v)),O&&S&&\"values\"!==S.name&&(M=!0,L=function(){return S.call(this)}),r&&!_||!p&&!M&&P[l]||u(P,l,L),s[e]=L,s[x]=v,h)if(b={values:O?L:w(\"values\"),keys:y?L:w(\"keys\"),entries:j},_)for(g in b)g in P||i(P,g,b[g]);else o(o.P+o.F*(p||M),e,b);return b}},function(t,e,n){t.exports=n(11)},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(76),o=_interopRequireDefault(r),i=n(78),u=_interopRequireDefault(i),s=\"function\"==typeof u.default&&\"symbol\"==typeof o.default?function(t){return typeof t}:function(t){return t&&\"function\"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?\"symbol\":typeof t};e.default=\"function\"==typeof u.default&&\"symbol\"===s(o.default)?function(t){return void 0===t?\"undefined\":s(t)}:function(t){return t&&\"function\"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?\"symbol\":void 0===t?\"undefined\":s(t)}},function(t,e,n){var r=n(42),o=n(31).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e){},function(t,e,n){var r=n(16);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==r(t)?t.split(\"\"):Object(t)}},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(10),o=n(33),i=n(29)(\"IE_PROTO\"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(16),o=n(2)(\"toStringTag\"),i=\"Arguments\"==r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(n=u(e=Object(t),o))?n:i?r(e):\"Object\"==(s=r(e))&&\"function\"==typeof e.callee?\"Arguments\":s}},function(t,e,n){t.exports={default:n(67),__esModule:!0}},function(t,e,n){var r=n(12),o=n(46),i=n(62);t.exports=function(t){return function(e,n,u){var s,c=r(e),f=o(c.length),a=i(u,f);if(t&&n!=n){for(;f>a;)if((s=c[a++])!=s)return!0}else for(;f>a;a++)if((t||a in c)&&c[a]===n)return t||a||0;return!t&&-1}}},function(t,e,n){var r=n(24),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(7),o=n(22),i=n(2)(\"species\");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||void 0==(n=r(u)[i])?e:o(n)}},function(t,e,n){var r,o,i,u=n(18),s=n(94),c=n(57),f=n(32),a=n(1),l=a.process,p=a.setImmediate,v=a.clearImmediate,d=a.MessageChannel,h=a.Dispatch,y=0,_={},b=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},g=function(t){b.call(t.data)};p&&v||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++y]=function(){s(\"function\"==typeof t?t:Function(t),e)},r(y),y},v=function(t){delete _[t]},\"process\"==n(16)(l)?r=function(t){l.nextTick(u(b,t,1))}:h&&h.now?r=function(t){h.now(u(b,t,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=g,r=u(i.postMessage,i,1)):a.addEventListener&&\"function\"==typeof postMessage&&!a.importScripts?(r=function(t){a.postMessage(t+\"\",\"*\")},a.addEventListener(\"message\",g,!1)):r=\"onreadystatechange\"in f(\"script\")?function(t){c.appendChild(f(\"script\")).onreadystatechange=function(){c.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:p,clear:v}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(7),o=n(9),i=n(48);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){n(68);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(5);r(r.S+r.F*!n(6),\"Object\",{defineProperty:n(8).f})},,function(t,e,n){var r=n(24),o=n(25);t.exports=function(t){return function(e,n){var i,u,s=String(o(e)),c=r(n),f=s.length;return c<0||c>=f?t?\"\":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===f||(u=s.charCodeAt(c+1))<56320||u>57343?t?s.charAt(c):i:t?s.slice(c,c+2):u-56320+(i-55296<<10)+65536)}}},function(t,e,n){\"use strict\";var r=n(40),o=n(20),i=n(23),u={};n(11)(u,n(2)(\"iterator\"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+\" Iterator\")}},function(t,e,n){var r=n(8),o=n(7),i=n(19);t.exports=n(6)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),s=u.length,c=0;s>c;)r.f(t,n=u[c++],e[n]);return t}},function(t,e,n){\"use strict\";var r=n(74),o=n(75),i=n(15),u=n(12);t.exports=n(51)(Array,\"Array\",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):\"keys\"==e?o(0,n):\"values\"==e?o(0,t[n]):o(0,[n,t[n]])},\"values\"),i.Arguments=i.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(77),__esModule:!0}},function(t,e,n){n(45),n(47),t.exports=n(37).f(\"iterator\")},function(t,e,n){t.exports={default:n(79),__esModule:!0}},function(t,e,n){n(80),n(55),n(85),n(86),t.exports=n(0).Symbol},function(t,e,n){\"use strict\";var r=n(1),o=n(10),i=n(6),u=n(5),s=n(52),c=n(81).KEY,f=n(13),a=n(30),l=n(23),p=n(21),v=n(2),d=n(37),h=n(38),y=n(82),_=n(83),b=n(7),g=n(9),m=n(12),w=n(28),x=n(20),O=n(40),M=n(84),P=n(50),S=n(8),L=n(19),j=P.f,k=S.f,E=M.f,R=r.Symbol,T=r.JSON,C=T&&T.stringify,A=v(\"_hidden\"),D=v(\"toPrimitive\"),F={}.propertyIsEnumerable,q=a(\"symbol-registry\"),I=a(\"symbols\"),N=a(\"op-symbols\"),B=Object.prototype,W=\"function\"==typeof R,G=r.QObject,U=!G||!G.prototype||!G.prototype.findChild,V=i&&f(function(){return 7!=O(k({},\"a\",{get:function(){return k(this,\"a\",{value:7}).a}})).a})?function(t,e,n){var r=j(B,e);r&&delete B[e],k(t,e,n),r&&t!==B&&k(B,e,r)}:k,H=function(t){var e=I[t]=O(R.prototype);return e._k=t,e},K=W&&\"symbol\"==typeof R.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof R},J=function(t,e,n){return t===B&&J(N,e,n),b(t),e=w(e,!0),b(n),o(I,e)?(n.enumerable?(o(t,A)&&t[A][e]&&(t[A][e]=!1),n=O(n,{enumerable:x(0,!1)})):(o(t,A)||k(t,A,x(1,{})),t[A][e]=!0),V(t,e,n)):k(t,e,n)},z=function(t,e){b(t);for(var n,r=y(e=m(e)),o=0,i=r.length;i>o;)J(t,n=r[o++],e[n]);return t},Y=function(t,e){return void 0===e?O(t):z(O(t),e)},Q=function(t){var e=F.call(this,t=w(t,!0));return!(this===B&&o(I,t)&&!o(N,t))&&(!(e||!o(this,t)||!o(I,t)||o(this,A)&&this[A][t])||e)},X=function(t,e){if(t=m(t),e=w(e,!0),t!==B||!o(I,e)||o(N,e)){var n=j(t,e);return!n||!o(I,e)||o(t,A)&&t[A][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=E(m(t)),r=[],i=0;n.length>i;)o(I,e=n[i++])||e==A||e==c||r.push(e);return r},$=function(t){for(var e,n=t===B,r=E(n?N:m(t)),i=[],u=0;r.length>u;)!o(I,e=r[u++])||n&&!o(B,e)||i.push(I[e]);return i};W||(R=function(){if(this instanceof R)throw TypeError(\"Symbol is not a constructor!\");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(N,n),o(this,A)&&o(this[A],t)&&(this[A][t]=!1),V(this,t,x(1,n))};return i&&U&&V(B,t,{configurable:!0,set:e}),H(t)},s(R.prototype,\"toString\",function(){return this._k}),P.f=X,S.f=J,n(54).f=M.f=Z,n(27).f=Q,n(43).f=$,i&&!n(14)&&s(B,\"propertyIsEnumerable\",Q,!0),d.f=function(t){return H(v(t))}),u(u.G+u.W+u.F*!W,{Symbol:R});for(var tt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),et=0;tt.length>et;)v(tt[et++]);for(var nt=L(v.store),rt=0;nt.length>rt;)h(nt[rt++]);u(u.S+u.F*!W,\"Symbol\",{for:function(t){return o(q,t+=\"\")?q[t]:q[t]=R(t)},keyFor:function(t){if(!K(t))throw TypeError(t+\" is not a symbol!\");for(var e in q)if(q[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),u(u.S+u.F*!W,\"Object\",{create:Y,defineProperty:J,defineProperties:z,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),T&&u(u.S+u.F*(!W||f(function(){var t=R();return\"[null]\"!=C([t])||\"{}\"!=C({a:t})||\"{}\"!=C(Object(t))})),\"JSON\",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!K(t))return _(e)||(e=function(t,e){if(\"function\"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,C.apply(T,r)}}),R.prototype[D]||n(11)(R.prototype,D,R.prototype.valueOf),l(R,\"Symbol\"),l(Math,\"Math\",!0),l(r.JSON,\"JSON\",!0)},function(t,e,n){var r=n(21)(\"meta\"),o=n(9),i=n(10),u=n(8).f,s=0,c=Object.isExtensible||function(){return!0},f=!n(13)(function(){return c(Object.preventExtensions({}))}),a=function(t){u(t,r,{value:{i:\"O\"+ ++s,w:{}}})},l=function(t,e){if(!o(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!i(t,r)){if(!c(t))return\"F\";if(!e)return\"E\";a(t)}return t[r].i},p=function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;a(t)}return t[r].w},v=function(t){return f&&d.NEED&&c(t)&&!i(t,r)&&a(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:v}},function(t,e,n){var r=n(19),o=n(43),i=n(27);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,s=n(t),c=i.f,f=0;s.length>f;)c.call(t,u=s[f++])&&e.push(u);return e}},function(t,e,n){var r=n(16);t.exports=Array.isArray||function(t){return\"Array\"==r(t)}},function(t,e,n){var r=n(12),o=n(54).f,i={}.toString,u=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&\"[object Window]\"==i.call(t)?s(t):o(r(t))}},function(t,e,n){n(38)(\"asyncIterator\")},function(t,e,n){n(38)(\"observable\")},function(t,e,n){var r=n(59),o=n(2)(\"iterator\"),i=n(15);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t[\"@@iterator\"]||i[r(t)]}},function(t,e,n){n(55),n(45),n(47),n(89),n(100),n(101),t.exports=n(0).Promise},function(t,e,n){\"use strict\";var r,o,i,u,s=n(14),c=n(1),f=n(18),a=n(59),l=n(5),p=n(9),v=n(22),d=n(90),h=n(91),y=n(63),_=n(64).set,b=n(95)(),g=n(48),m=n(65),w=n(96),x=n(66),O=c.TypeError,M=c.process,P=M&&M.versions,S=P&&P.v8||\"\",L=c.Promise,j=\"process\"==a(M),k=function(){},E=o=g.f,R=!!function(){try{var t=L.resolve(1),e=(t.constructor={})[n(2)(\"species\")]=function(t){t(k,k)};return(j||\"function\"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==S.indexOf(\"6.6\")&&-1===w.indexOf(\"Chrome/66\")}catch(t){}}(),T=function(t){var e;return!(!p(t)||\"function\"!=typeof(e=t.then))&&e},C=function(t,e){if(!t._n){t._n=!0;var n=t._c;b(function(){for(var r=t._v,o=1==t._s,i=0;n.length>i;)!function(e){var n,i,u,s=o?e.ok:e.fail,c=e.resolve,f=e.reject,a=e.domain;try{s?(o||(2==t._h&&F(t),t._h=1),!0===s?n=r:(a&&a.enter(),n=s(r),a&&(a.exit(),u=!0)),n===e.promise?f(O(\"Promise-chain cycle\")):(i=T(n))?i.call(n,c,f):c(n)):f(r)}catch(t){a&&!u&&a.exit(),f(t)}}(n[i++]);t._c=[],t._n=!1,e&&!t._h&&A(t)})}},A=function(t){_.call(c,function(){var e,n,r,o=t._v,i=D(t);if(i&&(e=m(function(){j?M.emit(\"unhandledRejection\",o,t):(n=c.onunhandledrejection)?n({promise:t,reason:o}):(r=c.console)&&r.error&&r.error(\"Unhandled promise rejection\",o)}),t._h=j||D(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){_.call(c,function(){var e;j?M.emit(\"rejectionHandled\",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})})},q=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw O(\"Promise can't be resolved itself\");(e=T(t))?b(function(){var r={_w:n,_d:!1};try{e.call(t,f(I,r,1),f(q,r,1))}catch(t){q.call(r,t)}}):(n._v=t,n._s=1,C(n,!1))}catch(t){q.call({_w:n,_d:!1},t)}}};R||(L=function(t){d(this,L,\"Promise\",\"_h\"),v(t),r.call(this);try{t(f(I,this,1),f(q,this,1))}catch(t){q.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(97)(L.prototype,{then:function(t,e){var n=E(y(this,L));return n.ok=\"function\"!=typeof t||t,n.fail=\"function\"==typeof e&&e,n.domain=j?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=f(I,t,1),this.reject=f(q,t,1)},g.f=E=function(t){return t===L||t===u?new i(t):o(t)}),l(l.G+l.W+l.F*!R,{Promise:L}),n(23)(L,\"Promise\"),n(98)(\"Promise\"),u=n(0).Promise,l(l.S+l.F*!R,\"Promise\",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(s||!R),\"Promise\",{resolve:function(t){return x(s&&this===u?L:this,t)}}),l(l.S+l.F*!(R&&n(99)(function(t){L.all(t).catch(k)})),\"Promise\",{all:function(t){var e=this,n=E(e),r=n.resolve,o=n.reject,i=m(function(){var n=[],i=0,u=1;h(t,!1,function(t){var s=i++,c=!1;n.push(void 0),u++,e.resolve(t).then(function(t){c||(c=!0,n[s]=t,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=E(e),r=n.reject,o=m(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+\": incorrect invocation!\");return t}},function(t,e,n){var r=n(18),o=n(92),i=n(93),u=n(7),s=n(46),c=n(87),f={},a={},e=t.exports=function(t,e,n,l,p){var v,d,h,y,_=p?function(){return t}:c(t),b=r(n,l,e?2:1),g=0;if(\"function\"!=typeof _)throw TypeError(t+\" is not iterable!\");if(i(_)){for(v=s(t.length);v>g;g++)if((y=e?b(u(d=t[g])[0],d[1]):b(t[g]))===f||y===a)return y}else for(h=_.call(t);!(d=h.next()).done;)if((y=o(h,b,d.value,e))===f||y===a)return y};e.BREAK=f,e.RETURN=a},function(t,e,n){var r=n(7);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(15),o=n(2)(\"iterator\"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(1),o=n(64).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,s=r.Promise,c=\"process\"==n(16)(u);t.exports=function(){var t,e,n,f=function(){var r,o;for(c&&(r=u.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(c)n=function(){u.nextTick(f)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var a=s.resolve(void 0);n=function(){a.then(f)}}else n=function(){o.call(r,f)};else{var l=!0,p=document.createTextNode(\"\");new i(f).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var r=n(1),o=r.navigator;t.exports=o&&o.userAgent||\"\"},function(t,e,n){var r=n(11);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},function(t,e,n){\"use strict\";var r=n(1),o=n(0),i=n(8),u=n(6),s=n(2)(\"species\");t.exports=function(t){var e=\"function\"==typeof o[t]?o[t]:r[t];u&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(2)(\"iterator\"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(t){}return n}},function(t,e,n){\"use strict\";var r=n(5),o=n(0),i=n(1),u=n(63),s=n(66);r(r.P+r.R,\"Promise\",{finally:function(t){var e=u(this,o.Promise||i.Promise),n=\"function\"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){\"use strict\";var r=n(5),o=n(48),i=n(65);r(r.S,\"Promise\",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(103),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var r=n(33),o=n(58);n(49)(\"getPrototypeOf\",function(){return function(t){return o(r(t))}})},function(t,e,n){t.exports={default:n(105),__esModule:!0}},function(t,e,n){n(106),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var r=n(5);r(r.S,\"Object\",{setPrototypeOf:n(107).set})},function(t,e,n){var r=n(9),o=n(7),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,e,r){try{r=n(18)(Function.call,n(50).f(Object.prototype,\"__proto__\").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){t.exports={default:n(109),__esModule:!0}},function(t,e,n){n(110);var r=n(0).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(5);r(r.S,\"Object\",{create:n(40)})},,,,,,,,,,,,,,,,function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(26),o=_interopRequireDefault(r),i=n(3),u=_interopRequireDefault(i),s=n(4),c=_interopRequireDefault(s),f=n(34),a=_interopRequireDefault(f),l=n(35),p=_interopRequireDefault(l),v=n(127),d=_interopRequireDefault(v),h=function(t){function MiniBus(){return(0,u.default)(this,MiniBus),(0,a.default)(this,(MiniBus.__proto__||(0,o.default)(MiniBus)).call(this))}return(0,p.default)(MiniBus,t),(0,c.default)(MiniBus,[{key:\"postMessage\",value:function(t,e,n){var r=this;return r._genId(t),r._responseCallback(t,e,n),r._onPostMessage(t),t.id}},{key:\"_onMessage\",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?(e._publishOn(n,t),t.to.startsWith(\"hyperty\")||e._publishOnDefault(t)):e._publishOnDefault(t)}}}]),MiniBus}(d.default);e.default=h,t.exports=e.default},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(17),o=_interopRequireDefault(r),i=n(3),u=_interopRequireDefault(i),s=n(4),c=_interopRequireDefault(s),f=n(36),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(f),l=a.getLogger(\"Bus\"),p=function(){function Bus(){(0,u.default)(this,Bus);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=3e4,t._responseCallbacks={},t._registerExternalListener()}return(0,c.default)(Bus,[{key:\"addListener\",value:function(t,e){var n=this,r=new v(n._subscriptions,t,e),o=n._subscriptions[t];return o||(o=[],n._subscriptions[t]=o),o.push(r),r}},{key:\"addResponseListener\",value:function(t,e,n){this._responseCallbacks[t+e]=n}},{key:\"removeResponseListener\",value:function(t,e){delete this._responseCallbacks[t+e]}},{key:\"removeAllListenersOf\",value:function(t){delete this._subscriptions[t]}},{key:\"bind\",value:function(t,e,n){var r=this,o=this;return{thisListener:o.addListener(t,function(t){n.postMessage(t)}),targetListener:n.addListener(e,function(t){o.postMessage(t)}),unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:\"_publishOnDefault\",value:function(t){var e=this._subscriptions[\"*\"];e&&this._publishOn(e,t)}},{key:\"_publishOn\",value:function(t,e){t.forEach(function(t){t._callback(e)})}},{key:\"_responseCallback\",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;if(e){var o=t.from+t.id;r._responseCallbacks[o]=e,n&&setTimeout(function(){var e=r._responseCallbacks[o];if(delete r._responseCallbacks[o],e){e({id:t.id,type:\"response\",body:{code:408,desc:\"Response timeout!\",value:t}})}},r._responseTimeOut)}}},{key:\"_onResponse\",value:function(t){var e=this;if(\"response\"===t.type){var n=t.to+t.id,r=e._responseCallbacks[n];if(t.body.code>=200&&delete e._responseCallbacks[n],r)return r(t),!0}return!1}},{key:\"_onMessage\",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?e._publishOn(n,t):e._publishOnDefault(t)}}},{key:\"_genId\",value:function(t){t.id&&0!==t.id||(this._msgId++,t.id=this._msgId)}},{key:\"postMessage\",value:function(t,e){}},{key:\"postMessageWithRetries\",value:function(t,e,n){var r=this,i=0,u=function(){return new o.default(function(e,o){r.postMessage(t,function(r){408===r.body.code||500===r.body.code?o():(l.info(\"[Bus.postMessageWithRetries] msg delivered: \",t),n(r),e())})})};!function tryAgain(){u().then(function(){},function(){if(l.warn(\"[Bus.postMessageWithRetries] Message Bounced (retry \"+i+\"): '\",t),!(i++<e)){var n=\"[Error] Message Bounced (delivery attempts \"+e+\"): '\";throw new Error(n+t)}tryAgain()})}()}},{key:\"_onPostMessage\",value:function(t){}},{key:\"_registerExternalListener\",value:function(){}}]),Bus}(),v=function(){function MsgListener(t,e,n){(0,u.default)(this,MsgListener);var r=this;r._subscriptions=t,r._url=e,r._callback=n}return(0,c.default)(MsgListener,[{key:\"remove\",value:function(){var t=this,e=t._subscriptions[t._url];if(e){var n=e.indexOf(t);e.splice(n,1),0===e.length&&delete t._subscriptions[t._url]}}},{key:\"url\",get:function(){return this._url}}]),MsgListener}();e.default=p,t.exports=e.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(126),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default,t.exports=e.default}])});","// version: 0.13.1\n// date: Fri Aug 31 2018 09:59:56 GMT+0100 (Western European Summer Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n// version: 0.13.1\n// date: Fri Aug 31 2018 09:59:56 GMT+0100 (Western European Summer Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"sandbox\",[],t):\"object\"==typeof exports?exports.sandbox=t():e.sandbox=t()}(\"undefined\"!=typeof self?self:this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=151)}([function(e,t){var r=e.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=r)},function(e,t){var r=e.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=r)},function(e,t,r){var n=r(30)(\"wks\"),o=r(21),i=r(1).Symbol,a=\"function\"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)(\"Symbol.\"+e))}).store=n},function(e,t,r){\"use strict\";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(60),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}()},function(e,t,r){var n=r(1),o=r(0),i=r(18),a=r(11),s=r(10),u=function(e,t,r){var c,l,d,f=e&u.F,p=e&u.G,y=e&u.S,v=e&u.P,h=e&u.B,_=e&u.W,b=p?o:o[t]||(o[t]={}),m=b.prototype,g=p?n:y?n[t]:(n[t]||{}).prototype;p&&(r=t);for(c in r)(l=!f&&g&&void 0!==g[c])&&s(b,c)||(d=l?g[c]:r[c],b[c]=p&&\"function\"!=typeof g[c]?r[c]:h&&l?i(d,n):_&&g[c]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):v&&\"function\"==typeof d?i(Function.call,d):d,v&&((b.virtual||(b.virtual={}))[c]=d,e&u.R&&m&&!m[c]&&a(m,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){e.exports=!r(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(e,t,r){var n=r(9);e.exports=function(e){if(!n(e))throw TypeError(e+\" is not an object!\");return e}},function(e,t,r){var n=r(7),o=r(41),i=r(28),a=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if(\"get\"in r||\"set\"in r)throw TypeError(\"Accessors not supported!\");return\"value\"in r&&(e[t]=r.value),e}},function(e,t){e.exports=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(8),o=r(20);e.exports=r(6)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(56),o=r(25);e.exports=function(e){return n(o(e))}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){e.exports={default:r(88),__esModule:!0}},function(e,t,r){var n=r(22);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(42),o=r(31);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return\"Symbol(\".concat(void 0===e?\"\":e,\")_\",(++r+n).toString(36))}},function(e,t){e.exports=function(e){if(\"function\"!=typeof e)throw TypeError(e+\" is not a function!\");return e}},function(e,t,r){var n=r(8).f,o=r(10),i=r(2)(\"toStringTag\");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError(\"Can't call method on  \"+e);return e}},function(e,t,r){e.exports={default:r(102),__esModule:!0}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(9);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&\"function\"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if(\"function\"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&\"function\"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError(\"Can't convert object to primitive value\")}},function(e,t,r){var n=r(30)(\"keys\"),o=r(21);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,r){var n=r(0),o=r(1),i=o[\"__core-js_shared__\"]||(o[\"__core-js_shared__\"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:n.version,mode:r(14)?\"pure\":\"global\",copyright:\"© 2018 Denis Pushkarev (zloirock.ru)\"})},function(e,t){e.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(e,t,r){var n=r(9),o=r(1).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,r){var n=r(25);e.exports=function(e){return Object(n(e))}},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(53),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!==(void 0===t?\"undefined\":(0,o.default)(t))&&\"function\"!=typeof t?e:t}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(104),o=_interopRequireDefault(n),i=r(108),a=_interopRequireDefault(i),s=r(53),u=_interopRequireDefault(s);t.default=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===t?\"undefined\":(0,u.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,r){var n,o;!function(i,a){\"use strict\";n=a,void 0!==(o=\"function\"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o)}(0,function(){\"use strict\";function bindMethod(e,t){var r=e[t];if(\"function\"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function realMethod(r){return\"debug\"===r&&(r=\"log\"),typeof console!==t&&(void 0!==console[r]?bindMethod(console,r):void 0!==console.log?bindMethod(console,\"log\"):e)}function replaceLoggingMethods(t,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<t?e:this.methodFactory(i,t,n)}this.log=this.debug}function enableLoggingWhenConsoleArrives(e,r,n){return function(){typeof console!==t&&(replaceLoggingMethods.call(this,r,n),this[e].apply(this,arguments))}}function defaultMethodFactory(e,t,r){return realMethod(e)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(e,n,o){function persistLevelIfPossible(e){var n=(r[e]||\"silent\").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[s]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+\"=\"+n+\";\"}catch(e){}}}function getPersistedLevel(){var e;if(typeof window!==t){try{e=window.localStorage[s]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(s)+\"=\");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}var i,a=this,s=\"loglevel\";e&&(s+=\":\"+e),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||defaultMethodFactory,a.getLevel=function(){return i},a.setLevel=function(r,n){if(\"string\"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!(\"number\"==typeof r&&r>=0&&r<=a.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+r;if(i=r,!1!==n&&persistLevelIfPossible(r),replaceLoggingMethods.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return\"No console available for logging\"},a.setDefaultLevel=function(e){getPersistedLevel()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var u=getPersistedLevel();null==u&&(u=null==n?\"WARN\":n),a.setLevel(u,!1)}var e=function(){},t=\"undefined\",r=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],n=new Logger,o={};n.getLogger=function(e){if(\"string\"!=typeof e||\"\"===e)throw new TypeError(\"You must supply a name when creating a logger.\");var t=o[e];return t||(t=o[e]=new Logger(e,n.getLevel(),n.methodFactory)),t};var i=typeof window!==t?window.log:void 0;return n.noConflict=function(){return typeof window!==t&&window.log===n&&(window.log=i),n},n.getLoggers=function(){return o},n})},function(e,t,r){t.f=r(2)},function(e,t,r){var n=r(1),o=r(0),i=r(14),a=r(37),s=r(8).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});\"_\"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function divideURL(e){function recurse(e){var t=/([a-zA-Z-]*)(:\\/\\/(?:\\.)?|:)([-a-zA-Z0-9@:%._+~#=]{2,256})([-a-zA-Z0-9@:%._+~#=\\/]*)/gi;return e.replace(t,\"$1,$3,$4\").split(\",\")}var t=recurse(e);if(t[0]===e&&!t[0].includes(\"@\")){return{type:\"\",domain:e,identity:\"\"}}if(t[0]===e&&t[0].includes(\"@\")){t=recurse((t[0]===e?\"smtp\":t[0])+\"://\"+t[0])}return t[1].includes(\"@\")&&(t[2]=t[0]+\"://\"+t[1],t[1]=t[1].substr(t[1].indexOf(\"@\")+1)),{type:t[0],domain:t[1],identity:t[2]}}function emptyObject(e){return!((0,a.default)(e).length>0)}function secondsSinceEpoch(){return Math.floor(Date.now()/1e3)}function deepClone(e){if(e)return JSON.parse((0,o.default)(e))}function removePathFromURL(e){var t=e.split(\"/\");return t[0]+\"//\"+t[2]+\"/\"+t[3]}function getUserURLFromEmail(e){var t=e.indexOf(\"@\");return\"user://\"+e.substring(t+1,e.length)+\"/\"+e.substring(0,t)}function getUserEmailFromURL(e){var t=divideURL(e);return t.identity.replace(\"/\",\"\")+\"@\"+t.domain}function convertToUserURL(e){if(\"user://\"===e.substring(0,7)){var t=divideURL(e);if(t.domain&&t.identity)return e;throw\"userURL with wrong format\"}return getUserURLFromEmail(e)}function isDataObjectURL(e){var t=[\"domain-idp\",\"runtime\",\"domain\",\"hyperty\"],r=e.split(\"://\"),n=r[0];return-1===t.indexOf(n)}function isLegacy(e){return e.split(\"@\").length>1}function isURL(e){return e.split(\"/\").length>=3}function isUserURL(e){return\"user\"===divideURL(e).type}function isHypertyURL(e){return\"hyperty\"===divideURL(e).type}function getConfigurationResources(e,t,r){return e[t][r]}function buildURL(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e[t],s=void 0;if(!a.hasOwnProperty(r))throw Error(\"The configuration \"+(0,o.default)(a,\"\",2)+\" don't have the \"+r+\" resource you are looking for\");var u=a[r];return n?(s=u.prefix+e.domain+u.suffix+n,u.hasOwnProperty(\"fallback\")&&i&&(s=u.fallback.indexOf(\"%domain%\")?u.fallback.replace(/(%domain%)/g,e.domain)+n:u.fallback+n)):s=u.prefix+e.domain+u.suffix,s}function generateGUID(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return s4()+s4()+\"-\"+s4()+\"-\"+s4()+\"-\"+s4()+\"-\"+s4()+s4()+s4()}function getUserIdentityDomain(e){var t=divideURL(e),r=t.domain.split(\".\"),n=r.length;return 1==n?r[n-1]:r[n-2]+\".\"+r[n-1]}function isBackendServiceURL(e){var t=divideURL(e),r=t.domain.split(\".\"),n=[\"domain\",\"global\",\"domain-idp\"],o=[\"registry\",\"msg-node\"],i=void 0;return r.length>1&&(i=r.filter(function(e){return-1!==o.indexOf(e)})[0]),!(!i||-1===o.indexOf(i))||!!t.type&&-1!==n.indexOf(t.type)}function divideEmail(e){var t=e.indexOf(\"@\");return{username:e.substring(0,t),domain:e.substring(t+1,e.length)}}function assign(e,t,r){e||(e={}),\"string\"==typeof t&&(t=parseAttributes(t));for(var n=t.length-1,o=0;o<n;++o){var i=t[o];i in e||(e[i]={}),e=e[i]}e[t[n]]=r}function splitObjectURL(e){var t=e.split(\"/\"),r=t[0]+\"//\"+t[2]+\"/\"+t[3],n=t[5],o={url:r,resource:n};return o}function checkAttribute(e){var t=/((([a-zA-Z]+):\\/\\/([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})\\/[a-zA-Z0-9.]+@[a-zA-Z0-9]+(-)?[a-zA-Z0-9]+(\\.)?[a-zA-Z0-9]{2,10}?\\.[a-zA-Z]{2,10})(.+(?=.identity))?/gm,r=[],n=[];if(null==e.match(t))n=e.split(\".\");else{for(var o=void 0;null!==(o=t.exec(e));)o.index===t.lastIndex&&t.lastIndex++,o.forEach(function(e,t){0===t&&r.push(e)});var i=void 0;r.forEach(function(t){i=e.replace(t,\"*-*\"),n=i.split(\".\").map(function(e){return\"*-*\"===e?t:e})})}return n}function parseAttributes(e){var t=/([0-9a-zA-Z][-\\w]*):\\/\\//g;if(e.includes(\"://\")){var r=e.split(t)[0],n=r.split(\".\"),o=e.replace(r,\"\");if(e.includes(\"identity\")){var i=o.split(\"identity.\");o=i[0].slice(\".\",-1),i=i[1].split(\".\"),n.push(o,\"identity\"),n=n.concat(i)}else n.push(o);return n.filter(Boolean)}return e.split(\".\")}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return(0,o.default)(e)===(0,o.default)({})}function chatkeysToStringCloner(e){var t={},r=(0,a.default)(e);if(r)try{for(var n=0;n<r.length;n++){var o=r[n];t[o]={},t[o].sessionKey=e[o].sessionKey.toString(),t[o].isToEncrypt=e[o].isToEncrypt}}catch(e){}return t}function chatkeysToArrayCloner(e){var t={},r=(0,a.default)(e);if(r)try{for(var n=0;n<r.length;n++){var o=r[n];t[o]={};var i=JSON.parse(\"[\"+e[o].sessionKey+\"]\");t[o].sessionKey=new Uint8Array(i),t[o].isToEncrypt=e[o].isToEncrypt}}catch(e){}return t}function parseMessageURL(e){var t=e.split(\"/\");return t.length<=6?t[0]+\"//\"+t[2]+\"/\"+t[3]:t[0]+\"//\"+t[2]+\"/\"+t[3]+\"/\"+t[4]}function availableSpace(e,t){var r=(e/t).toFixed(2);return{quota:t,usage:e,percent:Number(r)}}function encode(e){try{var t=stringify(e);return btoa(t)}catch(e){throw e}}function decode(e){try{return JSON.parse(atob(e))}catch(e){throw e}}function decodeToUint8Array(e){try{return new Uint8Array(decode(e))}catch(e){throw e}}function stringify(e){try{return e.constructor===Uint8Array?\"[\"+e.toString()+\"]\":(0,o.default)(e)}catch(e){throw e}}function parse(e){try{return JSON.parse(e)}catch(e){throw e}}function parseToUint8Array(e){try{return new Uint8Array(parse(e))}catch(e){throw e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(69),o=_interopRequireDefault(n),i=r(44),a=_interopRequireDefault(i);t.divideURL=divideURL,t.emptyObject=emptyObject,t.secondsSinceEpoch=secondsSinceEpoch,t.deepClone=deepClone,t.removePathFromURL=removePathFromURL,t.getUserURLFromEmail=getUserURLFromEmail,t.getUserEmailFromURL=getUserEmailFromURL,t.convertToUserURL=convertToUserURL,t.isDataObjectURL=isDataObjectURL,t.isLegacy=isLegacy,t.isURL=isURL,t.isUserURL=isUserURL,t.isHypertyURL=isHypertyURL,t.getConfigurationResources=getConfigurationResources,t.buildURL=buildURL,t.generateGUID=generateGUID,t.getUserIdentityDomain=getUserIdentityDomain,t.isBackendServiceURL=isBackendServiceURL,t.divideEmail=divideEmail,t.assign=assign,t.splitObjectURL=splitObjectURL,t.checkAttribute=checkAttribute,t.parseAttributes=parseAttributes,t.isEmpty=isEmpty,t.chatkeysToStringCloner=chatkeysToStringCloner,t.chatkeysToArrayCloner=chatkeysToArrayCloner,t.parseMessageURL=parseMessageURL,t.availableSpace=availableSpace,t.encode=encode,t.decode=decode,t.decodeToUint8Array=decodeToUint8Array,t.stringify=stringify,t.parse=parse,t.parseToUint8Array=parseToUint8Array},function(e,t,r){var n=r(7),o=r(72),i=r(31),a=r(29)(\"IE_PROTO\"),s=function(){},u=function(){var e,t=r(32)(\"iframe\"),n=i.length;for(t.style.display=\"none\",r(57).appendChild(t),t.src=\"javascript:\",e=t.contentWindow.document,e.open(),e.write(\"<script>document.F=Object<\\/script>\"),e.close(),u=e.F;n--;)delete u.prototype[i[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:o(r,t)}},function(e,t,r){e.exports=!r(6)&&!r(13)(function(){return 7!=Object.defineProperty(r(32)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(e,t,r){var n=r(10),o=r(12),i=r(61)(!1),a=r(29)(\"IE_PROTO\");e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){e.exports={default:r(112),__esModule:!0}},function(e,t,r){\"use strict\";var n=r(70)(!0);r(51)(String,\"String\",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(24),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){r(73);for(var n=r(1),o=r(11),i=r(15),a=r(2)(\"toStringTag\"),s=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),u=0;u<s.length;u++){var c=s[u],l=n[c],d=l&&l.prototype;d&&!d[a]&&o(d,a,c),i[c]=i.Array}},function(e,t,r){\"use strict\";function PromiseCapability(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError(\"Bad Promise constructor\");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}var n=r(22);e.exports.f=function(e){return new PromiseCapability(e)}},function(e,t,r){var n=r(5),o=r(0),i=r(13);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),\"Object\",a)}},function(e,t,r){var n=r(27),o=r(20),i=r(12),a=r(28),s=r(10),u=r(41),c=Object.getOwnPropertyDescriptor;t.f=r(6)?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,r){\"use strict\";var n=r(14),o=r(5),i=r(52),a=r(11),s=r(15),u=r(71),c=r(23),l=r(58),d=r(2)(\"iterator\"),f=!([].keys&&\"next\"in[].keys()),p=function(){return this};e.exports=function(e,t,r,y,v,h,_){u(r,t,y);var b,m,g,R=function(e){if(!f&&e in j)return j[e];switch(e){case\"keys\":case\"values\":return function(){return new r(this,e)}}return function(){return new r(this,e)}},O=t+\" Iterator\",D=\"values\"==v,w=!1,j=e.prototype,L=j[d]||j[\"@@iterator\"]||v&&j[v],k=L||R(v),U=v?D?R(\"entries\"):k:void 0,M=\"Array\"==t?j.entries||L:L;if(M&&(g=l(M.call(new e)))!==Object.prototype&&g.next&&(c(g,O,!0),n||\"function\"==typeof g[d]||a(g,d,p)),D&&L&&\"values\"!==L.name&&(w=!0,k=function(){return L.call(this)}),n&&!_||!f&&!w&&j[d]||a(j,d,k),s[t]=k,s[O]=p,v)if(b={values:D?k:R(\"values\"),keys:h?k:R(\"keys\"),entries:U},_)for(m in b)m in j||i(j,m,b[m]);else o(o.P+o.F*(f||w),t,b);return b}},function(e,t,r){e.exports=r(11)},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(76),o=_interopRequireDefault(n),i=r(78),a=_interopRequireDefault(i),s=\"function\"==typeof a.default&&\"symbol\"==typeof o.default?function(e){return typeof e}:function(e){return e&&\"function\"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?\"symbol\":typeof e};t.default=\"function\"==typeof a.default&&\"symbol\"===s(o.default)?function(e){return void 0===e?\"undefined\":s(e)}:function(e){return e&&\"function\"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?\"symbol\":void 0===e?\"undefined\":s(e)}},function(e,t,r){var n=r(42),o=r(31).concat(\"length\",\"prototype\");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t){},function(e,t,r){var n=r(16);e.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(e){return\"String\"==n(e)?e.split(\"\"):Object(e)}},function(e,t,r){var n=r(1).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(10),o=r(33),i=r(29)(\"IE_PROTO\"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(16),o=r(2)(\"toStringTag\"),i=\"Arguments\"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(r=a(t=Object(e),o))?r:i?n(t):\"Object\"==(s=n(t))&&\"function\"==typeof t.callee?\"Arguments\":s}},function(e,t,r){e.exports={default:r(67),__esModule:!0}},function(e,t,r){var n=r(12),o=r(46),i=r(62);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),l=i(a,c);if(e&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(24),o=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},function(e,t,r){var n=r(7),o=r(22),i=r(2)(\"species\");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},function(e,t,r){var n,o,i,a=r(18),s=r(94),u=r(57),c=r(32),l=r(1),d=l.process,f=l.setImmediate,p=l.clearImmediate,y=l.MessageChannel,v=l.Dispatch,h=0,_={},b=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},m=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++h]=function(){s(\"function\"==typeof e?e:Function(e),t)},n(h),h},p=function(e){delete _[e]},\"process\"==r(16)(d)?n=function(e){d.nextTick(a(b,e,1))}:v&&v.now?n=function(e){v.now(a(b,e,1))}:y?(o=new y,i=o.port2,o.port1.onmessage=m,n=a(i.postMessage,i,1)):l.addEventListener&&\"function\"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+\"\",\"*\")},l.addEventListener(\"message\",m,!1)):n=\"onreadystatechange\"in c(\"script\")?function(e){u.appendChild(c(\"script\")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(7),o=r(9),i=r(48);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){r(68);var n=r(0).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(5);n(n.S+n.F*!r(6),\"Object\",{defineProperty:r(8).f})},function(e,t,r){e.exports={default:r(111),__esModule:!0}},function(e,t,r){var n=r(24),o=r(25);e.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?\"\":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,r){\"use strict\";var n=r(40),o=r(20),i=r(23),a={};r(11)(a,r(2)(\"iterator\"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+\" Iterator\")}},function(e,t,r){var n=r(8),o=r(7),i=r(19);e.exports=r(6)?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){\"use strict\";var n=r(74),o=r(75),i=r(15),a=r(12);e.exports=r(51)(Array,\"Array\",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):\"keys\"==t?o(0,r):\"values\"==t?o(0,e[r]):o(0,[r,e[r]])},\"values\"),i.Arguments=i.Array,n(\"keys\"),n(\"values\"),n(\"entries\")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports={default:r(77),__esModule:!0}},function(e,t,r){r(45),r(47),e.exports=r(37).f(\"iterator\")},function(e,t,r){e.exports={default:r(79),__esModule:!0}},function(e,t,r){r(80),r(55),r(85),r(86),e.exports=r(0).Symbol},function(e,t,r){\"use strict\";var n=r(1),o=r(10),i=r(6),a=r(5),s=r(52),u=r(81).KEY,c=r(13),l=r(30),d=r(23),f=r(21),p=r(2),y=r(37),v=r(38),h=r(82),_=r(83),b=r(7),m=r(9),g=r(12),R=r(28),O=r(20),D=r(40),w=r(84),j=r(50),L=r(8),k=r(19),U=j.f,M=L.f,x=w.f,C=n.Symbol,P=n.JSON,E=P&&P.stringify,S=p(\"_hidden\"),q=p(\"toPrimitive\"),I={}.propertyIsEnumerable,T=l(\"symbol-registry\"),H=l(\"symbols\"),A=l(\"op-symbols\"),N=Object.prototype,F=\"function\"==typeof C,B=n.QObject,V=!B||!B.prototype||!B.prototype.findChild,z=i&&c(function(){return 7!=D(M({},\"a\",{get:function(){return M(this,\"a\",{value:7}).a}})).a})?function(e,t,r){var n=U(N,t);n&&delete N[t],M(e,t,r),n&&e!==N&&M(N,t,n)}:M,G=function(e){var t=H[e]=D(C.prototype);return t._k=e,t},W=F&&\"symbol\"==typeof C.iterator?function(e){return\"symbol\"==typeof e}:function(e){return e instanceof C},J=function(e,t,r){return e===N&&J(A,t,r),b(e),t=R(t,!0),b(r),o(H,t)?(r.enumerable?(o(e,S)&&e[S][t]&&(e[S][t]=!1),r=D(r,{enumerable:O(0,!1)})):(o(e,S)||M(e,S,O(1,{})),e[S][t]=!0),z(e,t,r)):M(e,t,r)},Y=function(e,t){b(e);for(var r,n=h(t=g(t)),o=0,i=n.length;i>o;)J(e,r=n[o++],t[r]);return e},Z=function(e,t){return void 0===t?D(e):Y(D(e),t)},K=function(e){var t=I.call(this,e=R(e,!0));return!(this===N&&o(H,e)&&!o(A,e))&&(!(t||!o(this,e)||!o(H,e)||o(this,S)&&this[S][e])||t)},X=function(e,t){if(e=g(e),t=R(t,!0),e!==N||!o(H,t)||o(A,t)){var r=U(e,t);return!r||!o(H,t)||o(e,S)&&e[S][t]||(r.enumerable=!0),r}},$=function(e){for(var t,r=x(g(e)),n=[],i=0;r.length>i;)o(H,t=r[i++])||t==S||t==u||n.push(t);return n},Q=function(e){for(var t,r=e===N,n=x(r?A:g(e)),i=[],a=0;n.length>a;)!o(H,t=n[a++])||r&&!o(N,t)||i.push(H[t]);return i};F||(C=function(){if(this instanceof C)throw TypeError(\"Symbol is not a constructor!\");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===N&&t.call(A,r),o(this,S)&&o(this[S],e)&&(this[S][e]=!1),z(this,e,O(1,r))};return i&&V&&z(N,e,{configurable:!0,set:t}),G(e)},s(C.prototype,\"toString\",function(){return this._k}),j.f=X,L.f=J,r(54).f=w.f=$,r(27).f=K,r(43).f=Q,i&&!r(14)&&s(N,\"propertyIsEnumerable\",K,!0),y.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!F,{Symbol:C});for(var ee=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),te=0;ee.length>te;)p(ee[te++]);for(var re=k(p.store),ne=0;re.length>ne;)v(re[ne++]);a(a.S+a.F*!F,\"Symbol\",{for:function(e){return o(T,e+=\"\")?T[e]:T[e]=C(e)},keyFor:function(e){if(!W(e))throw TypeError(e+\" is not a symbol!\");for(var t in T)if(T[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!F,\"Object\",{create:Z,defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),P&&a(a.S+a.F*(!F||c(function(){var e=C();return\"[null]\"!=E([e])||\"{}\"!=E({a:e})||\"{}\"!=E(Object(e))})),\"JSON\",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(m(t)||void 0!==e)&&!W(e))return _(t)||(t=function(e,t){if(\"function\"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,E.apply(P,n)}}),C.prototype[q]||r(11)(C.prototype,q,C.prototype.valueOf),d(C,\"Symbol\"),d(Math,\"Math\",!0),d(n.JSON,\"JSON\",!0)},function(e,t,r){var n=r(21)(\"meta\"),o=r(9),i=r(10),a=r(8).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(13)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,n,{value:{i:\"O\"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!i(e,n)){if(!u(e))return\"F\";if(!t)return\"E\";l(e)}return e[n].i},f=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},p=function(e){return c&&y.NEED&&u(e)&&!i(e,n)&&l(e),e},y=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(e,t,r){var n=r(19),o=r(43),i=r(27);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var a,s=r(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,r){var n=r(16);e.exports=Array.isArray||function(e){return\"Array\"==n(e)}},function(e,t,r){var n=r(12),o=r(54).f,i={}.toString,a=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&\"[object Window]\"==i.call(e)?s(e):o(n(e))}},function(e,t,r){r(38)(\"asyncIterator\")},function(e,t,r){r(38)(\"observable\")},function(e,t,r){var n=r(59),o=r(2)(\"iterator\"),i=r(15);e.exports=r(0).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e[\"@@iterator\"]||i[n(e)]}},function(e,t,r){r(55),r(45),r(47),r(89),r(100),r(101),e.exports=r(0).Promise},function(e,t,r){\"use strict\";var n,o,i,a,s=r(14),u=r(1),c=r(18),l=r(59),d=r(5),f=r(9),p=r(22),y=r(90),v=r(91),h=r(63),_=r(64).set,b=r(95)(),m=r(48),g=r(65),R=r(96),O=r(66),D=u.TypeError,w=u.process,j=w&&w.versions,L=j&&j.v8||\"\",k=u.Promise,U=\"process\"==l(w),M=function(){},x=o=m.f,C=!!function(){try{var e=k.resolve(1),t=(e.constructor={})[r(2)(\"species\")]=function(e){e(M,M)};return(U||\"function\"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==L.indexOf(\"6.6\")&&-1===R.indexOf(\"Chrome/66\")}catch(e){}}(),P=function(e){var t;return!(!f(e)||\"function\"!=typeof(t=e.then))&&t},E=function(e,t){if(!e._n){e._n=!0;var r=e._c;b(function(){for(var n=e._v,o=1==e._s,i=0;r.length>i;)!function(t){var r,i,a,s=o?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(o||(2==e._h&&I(e),e._h=1),!0===s?r=n:(l&&l.enter(),r=s(n),l&&(l.exit(),a=!0)),r===t.promise?c(D(\"Promise-chain cycle\")):(i=P(r))?i.call(r,u,c):u(r)):c(n)}catch(e){l&&!a&&l.exit(),c(e)}}(r[i++]);e._c=[],e._n=!1,t&&!e._h&&S(e)})}},S=function(e){_.call(u,function(){var t,r,n,o=e._v,i=q(e);if(i&&(t=g(function(){U?w.emit(\"unhandledRejection\",o,e):(r=u.onunhandledrejection)?r({promise:e,reason:o}):(n=u.console)&&n.error&&n.error(\"Unhandled promise rejection\",o)}),e._h=U||q(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},q=function(e){return 1!==e._h&&0===(e._a||e._c).length},I=function(e){_.call(u,function(){var t;U?w.emit(\"rejectionHandled\",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},T=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},H=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw D(\"Promise can't be resolved itself\");(t=P(e))?b(function(){var n={_w:r,_d:!1};try{t.call(e,c(H,n,1),c(T,n,1))}catch(e){T.call(n,e)}}):(r._v=e,r._s=1,E(r,!1))}catch(e){T.call({_w:r,_d:!1},e)}}};C||(k=function(e){y(this,k,\"Promise\",\"_h\"),p(e),n.call(this);try{e(c(H,this,1),c(T,this,1))}catch(e){T.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(97)(k.prototype,{then:function(e,t){var r=x(h(this,k));return r.ok=\"function\"!=typeof e||e,r.fail=\"function\"==typeof t&&t,r.domain=U?w.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&E(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=c(H,e,1),this.reject=c(T,e,1)},m.f=x=function(e){return e===k||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!C,{Promise:k}),r(23)(k,\"Promise\"),r(98)(\"Promise\"),a=r(0).Promise,d(d.S+d.F*!C,\"Promise\",{reject:function(e){var t=x(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!C),\"Promise\",{resolve:function(e){return O(s&&this===a?k:this,e)}}),d(d.S+d.F*!(C&&r(99)(function(e){k.all(e).catch(M)})),\"Promise\",{all:function(e){var t=this,r=x(t),n=r.resolve,o=r.reject,i=g(function(){var r=[],i=0,a=1;v(e,!1,function(e){var s=i++,u=!1;r.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=x(t),n=r.reject,o=g(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+\": incorrect invocation!\");return e}},function(e,t,r){var n=r(18),o=r(92),i=r(93),a=r(7),s=r(46),u=r(87),c={},l={},t=e.exports=function(e,t,r,d,f){var p,y,v,h,_=f?function(){return e}:u(e),b=n(r,d,t?2:1),m=0;if(\"function\"!=typeof _)throw TypeError(e+\" is not iterable!\");if(i(_)){for(p=s(e.length);p>m;m++)if((h=t?b(a(y=e[m])[0],y[1]):b(e[m]))===c||h===l)return h}else for(v=_.call(e);!(y=v.next()).done;)if((h=o(v,b,y.value,t))===c||h===l)return h};t.BREAK=c,t.RETURN=l},function(e,t,r){var n=r(7);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){var n=r(15),o=r(2)(\"iterator\"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(1),o=r(64).set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u=\"process\"==r(16)(a);e.exports=function(){var e,t,r,c=function(){var n,o;for(u&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(!i||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);r=function(){l.then(c)}}else r=function(){o.call(n,c)};else{var d=!0,f=document.createTextNode(\"\");new i(c).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){var n=r(1),o=n.navigator;e.exports=o&&o.userAgent||\"\"},function(e,t,r){var n=r(11);e.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},function(e,t,r){\"use strict\";var n=r(1),o=r(0),i=r(8),a=r(6),s=r(2)(\"species\");e.exports=function(e){var t=\"function\"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(2)(\"iterator\"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},function(e,t,r){\"use strict\";var n=r(5),o=r(0),i=r(1),a=r(63),s=r(66);n(n.P+n.R,\"Promise\",{finally:function(e){var t=a(this,o.Promise||i.Promise),r=\"function\"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){\"use strict\";var n=r(5),o=r(48),i=r(65);n(n.S,\"Promise\",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){r(103),e.exports=r(0).Object.getPrototypeOf},function(e,t,r){var n=r(33),o=r(58);r(49)(\"getPrototypeOf\",function(){return function(e){return o(n(e))}})},function(e,t,r){e.exports={default:r(105),__esModule:!0}},function(e,t,r){r(106),e.exports=r(0).Object.setPrototypeOf},function(e,t,r){var n=r(5);n(n.S,\"Object\",{setPrototypeOf:r(107).set})},function(e,t,r){var n=r(9),o=r(7),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+\": can't set as prototype!\")};e.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(e,t,n){try{n=r(18)(Function.call,r(50).f(Object.prototype,\"__proto__\").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},function(e,t,r){e.exports={default:r(109),__esModule:!0}},function(e,t,r){r(110);var n=r(0).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(5);n(n.S,\"Object\",{create:r(40)})},function(e,t,r){var n=r(0),o=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,r){r(113),e.exports=r(0).Object.keys},function(e,t,r){var n=r(33),o=r(19);r(49)(\"keys\",function(){return function(e){return o(n(e))}})},function(e,t,r){e.exports={default:r(122),__esModule:!0}},,function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(26),o=_interopRequireDefault(n),i=r(119),a=_interopRequireDefault(i);t.default=function get(e,t,r){null===e&&(e=Function.prototype);var n=(0,a.default)(e,t);if(void 0===n){var i=(0,o.default)(e);return null===i?void 0:get(i,t,r)}if(\"value\"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)}},,,function(e,t,r){e.exports={default:r(120),__esModule:!0}},function(e,t,r){r(121);var n=r(0).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,r){var n=r(12),o=r(50).f;r(49)(\"getOwnPropertyDescriptor\",function(){return function(e,t){return o(n(e),t)}})},function(e,t,r){r(123),e.exports=r(0).Object.assign},function(e,t,r){var n=r(5);n(n.S+n.F,\"Object\",{assign:r(124)})},function(e,t,r){\"use strict\";var n=r(19),o=r(43),i=r(27),a=r(33),s=r(56),u=Object.assign;e.exports=!u||r(13)(function(){var e={},t={},r=Symbol(),n=\"abcdefghijklmnopqrst\";return e[r]=7,n.split(\"\").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join(\"\")!=n})?function(e,t){for(var r=a(e),u=arguments.length,c=1,l=o.f,d=i.f;u>c;)for(var f,p=s(arguments[c++]),y=l?n(p).concat(l(p)):n(p),v=y.length,h=0;v>h;)d.call(p,f=y[h++])&&(r[f]=p[f]);return r}:u},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(36),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),p=r(39),y=f.getLogger(\"RegistrationStatus\"),v=function(){function RegistrationStatus(e,t,r,n){(0,u.default)(this,RegistrationStatus),this._registryObjectURL=e,this._runtimeURL=t,this._domain=(0,p.divideURL)(t).domain,this._discoveredObjectURL=r,this._messageBus=n,this._subscriptionSet=!1,this._subscribers={live:{},disconnected:{}}}return(0,l.default)(RegistrationStatus,[{key:\"onLive\",value:function(e,t){var r=this;return new a.default(function(n,o){r._subscriptionSet?(r._subscribers.live[e]=t,n()):r._subscribe().then(function(){r._subscribers.live[e]=t,n()}).catch(function(e){return o(e)})})}},{key:\"onDisconnected\",value:function(e,t){var r=this;return new a.default(function(n,o){r._subscriptionSet?(r._subscribers.disconnected[e]=t,n()):r._subscribe().then(function(){r._subscribers.disconnected[e]=t,n()}).catch(function(e){return o(e)})})}},{key:\"_subscribe\",value:function(){var e=this,t={type:\"subscribe\",from:this._discoveredObjectURL,to:this._runtimeURL+\"/subscriptions\",body:{resources:[this._registryObjectURL+\"/registration\"]}};return new a.default(function(r,n){e._messageBus.postMessage(t,function(t){y.log(\"[DiscoveredObject.subscribe] \"+e._registryObjectURL+\" rcved reply \",t),200===t.body.code?(e._generateListener(e._registryObjectURL+\"/registration\"),e._subscriptionSet=!0,r()):(y.error(\"Error subscribing \",e._registryObjectURL),n(\"Error subscribing \"+e._registryObjectURL))})})}},{key:\"_generateListener\",value:function(e){var t=this;this._messageBus.addListener(e,function(e){y.log(\"[DiscoveredObject.notification] \"+t._registryObjectURL+\": \",e),t._processNotification(e)})}},{key:\"_processNotification\",value:function(e){var t=this,r=e.body.value;setTimeout(function(){(0,o.default)(t._subscribers[r]).forEach(function(e){return t._subscribers[r][e]()})},5e3)}},{key:\"_unsubscribe\",value:function(){var e=this,t={type:\"unsubscribe\",from:this._discoveredObjectURL,to:this._runtimeURL+\"/subscriptions\",body:{resource:this._registryObjectURL+\"/registration\"}};return new a.default(function(r,n){e._messageBus.postMessage(t,function(t){y.log(\"[DiscoveredObject.unsubscribe] \"+e._registryObjectURL+\" rcved reply \",t),200===t.body.code?r():(y.error(\"Error unsubscribing \",e._registryObjectURL),n(\"Error unsubscribing \"+e._registryObjectURL))})})}},{key:\"unsubscribeLive\",value:function(e){var t=this;return new a.default(function(r,n){e in t._subscribers.live&&delete t._subscribers.live[e],t._areSubscriptionsEmpty()?t._unsubscribe().then(function(){return r()}).catch(function(e){return n(e)}):r()})}},{key:\"unsubscribeDisconnected\",value:function(e){var t=this;return new a.default(function(r,n){e in t._subscribers.disconnected?(delete t._subscribers.disconnected[e],t._areSubscriptionsEmpty()?t._unsubscribe().then(function(){return r()}).catch(function(e){return n(e)}):r()):n(e+\" doesn't subscribe onDisconnected for \"+t._registryObjectURL)})}},{key:\"_areSubscriptionsEmpty\",value:function(){return 0===(0,o.default)(this._subscribers.live).length&&0===(0,o.default)(this._subscribers.disconnected).length}}]),RegistrationStatus}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(26),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(34),l=_interopRequireDefault(c),d=r(35),f=_interopRequireDefault(d),p=r(127),y=_interopRequireDefault(p),v=function(e){function MiniBus(){return(0,a.default)(this,MiniBus),(0,l.default)(this,(MiniBus.__proto__||(0,o.default)(MiniBus)).call(this))}return(0,f.default)(MiniBus,e),(0,u.default)(MiniBus,[{key:\"postMessage\",value:function(e,t,r){var n=this;return n._genId(e),n._responseCallback(e,t,r),n._onPostMessage(e),e.id}},{key:\"_onMessage\",value:function(e){var t=this;if(!t._onResponse(e)){var r=t._subscriptions[e.to];r?(t._publishOn(r,e),e.to.startsWith(\"hyperty\")||t._publishOnDefault(e)):t._publishOnDefault(e)}}}]),MiniBus}(y.default);t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(36),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=l.getLogger(\"Bus\"),f=function(){function Bus(){(0,a.default)(this,Bus);var e=this;e._msgId=0,e._subscriptions={},e._responseTimeOut=3e4,e._responseCallbacks={},e._registerExternalListener()}return(0,u.default)(Bus,[{key:\"addListener\",value:function(e,t){var r=this,n=new p(r._subscriptions,e,t),o=r._subscriptions[e];return o||(o=[],r._subscriptions[e]=o),o.push(n),n}},{key:\"addResponseListener\",value:function(e,t,r){this._responseCallbacks[e+t]=r}},{key:\"removeResponseListener\",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:\"removeAllListenersOf\",value:function(e){delete this._subscriptions[e]}},{key:\"bind\",value:function(e,t,r){var n=this,o=this;return{thisListener:o.addListener(e,function(e){r.postMessage(e)}),targetListener:r.addListener(t,function(e){o.postMessage(e)}),unbind:function(){n.thisListener.remove(),n.targetListener.remove()}}}},{key:\"_publishOnDefault\",value:function(e){var t=this._subscriptions[\"*\"];t&&this._publishOn(t,e)}},{key:\"_publishOn\",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:\"_responseCallback\",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this;if(t){var o=e.from+e.id;n._responseCallbacks[o]=t,r&&setTimeout(function(){var t=n._responseCallbacks[o];if(delete n._responseCallbacks[o],t){t({id:e.id,type:\"response\",body:{code:408,desc:\"Response timeout!\",value:e}})}},n._responseTimeOut)}}},{key:\"_onResponse\",value:function(e){var t=this;if(\"response\"===e.type){var r=e.to+e.id,n=t._responseCallbacks[r];if(e.body.code>=200&&delete t._responseCallbacks[r],n)return n(e),!0}return!1}},{key:\"_onMessage\",value:function(e){var t=this;if(!t._onResponse(e)){var r=t._subscriptions[e.to];r?t._publishOn(r,e):t._publishOnDefault(e)}}},{key:\"_genId\",value:function(e){e.id&&0!==e.id||(this._msgId++,e.id=this._msgId)}},{key:\"postMessage\",value:function(e,t){}},{key:\"postMessageWithRetries\",value:function(e,t,r){var n=this,i=0,a=function(){return new o.default(function(t,o){n.postMessage(e,function(n){408===n.body.code||500===n.body.code?o():(d.info(\"[Bus.postMessageWithRetries] msg delivered: \",e),r(n),t())})})};!function tryAgain(){a().then(function(){},function(){if(d.warn(\"[Bus.postMessageWithRetries] Message Bounced (retry \"+i+\"): '\",e),!(i++<t)){var r=\"[Error] Message Bounced (delivery attempts \"+t+\"): '\";throw new Error(r+e)}tryAgain()})}()}},{key:\"_onPostMessage\",value:function(e){}},{key:\"_registerExternalListener\",value:function(){}}]),Bus}(),p=function(){function MsgListener(e,t,r){(0,a.default)(this,MsgListener);var n=this;n._subscriptions=e,n._url=t,n._callback=r}return(0,u.default)(MsgListener,[{key:\"remove\",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var r=t.indexOf(e);t.splice(r,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:\"url\",get:function(){return this._url}}]),MsgListener}();t.default=f,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(129),u=_interopRequireDefault(s),c=function(){function SandboxRegistry(e){(0,o.default)(this,SandboxRegistry);var t=this;t._bus=e,t._factory=new u.default(e),t._components={},e.addListener(SandboxRegistry.InternalDeployAddress,function(e){switch(e.type){case\"create\":t._onDeploy(e);break;case\"delete\":t._onRemove(e)}})}return(0,a.default)(SandboxRegistry,[{key:\"_responseMsg\",value:function(e,t,r){var n={id:e.id,type:\"response\",from:SandboxRegistry.InternalDeployAddress,to:SandboxRegistry.ExternalDeployAddress},o={};return t&&(o.code=t),r&&(o.desc=r),n.body=o,n}},{key:\"_onDeploy\",value:function(e){var t=this,r=e.body.config,n=e.body.url,o=e.body.sourceCode,i=void 0,a=void 0;if(t._components.hasOwnProperty(n))i=500,a=\"Instance \"+n+\" already exist!\";else try{t._components[n]=t._create(n,o,r,t._factory),i=200}catch(e){i=500,a=e}var s=t._responseMsg(e,i,a);t._bus.postMessage(s)}},{key:\"_onRemove\",value:function(e){var t=this,r=e.body.url,n=void 0,o=void 0;t._components.hasOwnProperty(r)?(delete t._components[r],t._bus.removeAllListenersOf(r),n=200):(n=500,o=\"Instance \"+r+\" doesn't exist!\");var i=t._responseMsg(e,n,o);t._bus.postMessage(i)}},{key:\"_create\",value:function(e,t,r,n){}},{key:\"components\",get:function(){return this._components}}]),SandboxRegistry}();c.ExternalDeployAddress=\"hyperty-runtime://sandbox/external\",c.InternalDeployAddress=\"hyperty-runtime://sandbox/internal\",t.default=c,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(130),u=_interopRequireDefault(s),c=r(161),l=_interopRequireDefault(c),d=r(39),f=r(134),p=_interopRequireDefault(f),y=r(135),v=_interopRequireDefault(y),h=r(125),_=_interopRequireDefault(h),b=r(163),m=_interopRequireDefault(b),g=r(136),R=_interopRequireDefault(g),O=r(138),D=_interopRequireDefault(O),w=r(164),j=_interopRequireDefault(w),L=r(166),k=_interopRequireDefault(L),U=r(139),M=_interopRequireDefault(U),x=function(){function SandboxFactory(e){(0,o.default)(this,SandboxFactory);var t=this;t._bus=e,t._divideURL=d.divideURL}return(0,a.default)(SandboxFactory,[{key:\"createSyncher\",value:function(e,t,r){return new u.default(e,t,r)}},{key:\"createIdentityManager\",value:function(e,t,r){return new p.default(e,t,r)}},{key:\"createDiscovery\",value:function(e,t,r){return new v.default(e,t,r)}},{key:\"createSearch\",value:function(e,t){return new m.default(e,t)}},{key:\"createContextObserver\",value:function(e,t,r,n){return new R.default(e,t,r,n,this)}},{key:\"createContextReporter\",value:function(e,t,r){return new D.default(e,t,r,this)}},{key:\"createNotificationHandler\",value:function(e){return new l.default(e)}},{key:\"createMessageBodyIdentity\",value:function(e,t,r,n,o,i,a,s){return new j.default(e,t,r,n,o,i,a,s)}},{key:\"createChatManager\",value:function(e,t,r,n){return new k.default(e,t,r,n,this)}},{key:\"createChatController\",value:function(e,t,r,n,o,i){return new M.default(e,t,r,n,o,i)}},{key:\"createRegistrationStatus\",value:function(e,t,r,n){return new _.default(e,t,r,n)}},{key:\"divideURL\",get:function(){return this._divideURL}}]),SandboxFactory}();t.default=x,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(114),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(36),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),p=r(39),y=r(153),v=_interopRequireDefault(y),h=r(159),_=_interopRequireDefault(h),b=r(160),m=_interopRequireDefault(b),g=f.getLogger(\"Syncher\"),R=function(){function Syncher(e,t,r){(0,u.default)(this,Syncher);var n=this;n._owner=e,n._bus=t,n._subURL=r.runtimeURL+\"/sm\",n._runtimeUrl=r.runtimeURL,n._p2pHandler=r.p2pHandler,n._p2pRequester=r.p2pRequester,n._reporters={},n._observers={},n._provisionals={},t.addListener(e,function(t){if(t.from!==e)switch(g.info(\"[Syncher] Syncher-RCV: \",t,n),t.type){case\"forward\":n._onForward(t);break;case\"create\":n._onRemoteCreate(t);break;case\"delete\":n._onRemoteDelete(t);break;case\"execute\":n._onExecute(t)}})}return(0,l.default)(Syncher,[{key:\"create\",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:\"no name\",s=arguments[6],u=arguments[7];if(!e)throw Error(\"[Syncher - Create] - You need specify the data object schema\");if(!t)throw Error(\"[Syncher - Create] -The observers should be defined\");var c=this;u=u||{};var l=(0,a.default)({},u);return l.p2p=o,l.store=n,l.schema=e,l.authorise=t,l.p2pHandler=c._p2pHandler,l.p2pRequester=c._p2pRequester,l.data=r?(0,p.deepClone)(r):{},l.name=0===i.length?\"no name\":i,l.reporter=u.hasOwnProperty(\"reporter\")&&\"boolean\"!=typeof u.reporter?u.reporter:c._owner,l.resume=!1,u?(l.mutual=!u.hasOwnProperty(\"mutual\")||u.mutual,l.name=u.hasOwnProperty(\"name\")?u.name:l.name):l.mutual=!0,u.hasOwnProperty(\"reuseURL\")&&(l.resource=u.reuseURL),s&&(l.identity=s),g.log(\"[syncher - create] - create Reporter - createInput: \",l),c._create(l)}},{key:\"resumeReporters\",value:function(e){var t=this;return g.log(\"[syncher - create] - resume Reporter - criteria: \",e),(0,a.default)(e,{resume:!0}),t._resumeCreate(e)}},{key:\"subscribe\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments[6],u=this,c={};return c.p2p=n,c.store=r,c.schema=e,c.domain_subscription=i,c.resource=t,s&&(c.identity=s),c.mutual=o,g.log(\"[syncher - subscribe] - subscribe criteria: \",c),(0,a.default)(c,{resume:!1}),u._subscribe(c)}},{key:\"resumeObservers\",value:function(e){var t=this,r=e||{};return(0,a.default)(r,{resume:!0}),t._resumeSubscribe(r)}},{key:\"read\",value:function(e){var t=this,r={type:\"read\",from:t._owner,to:e};return new o.default(function(e,n){var o=function(o){g.log(\"[Syncher.read] reply: \",o);var i={},s={},u=0;if(o.body.code<300)if(o.body.value.hasOwnProperty(\"responses\"))if(0===u)s=o.body.value,++u;else{delete o.body.value.responses;var c=void 0;for(c in o.body.value)i.hasOwnProperty(c)||(i[c]={}),(0,a.default)(i[c],o.body.value[c]);++u,u===s.responses&&(s.childrenObjects=i,delete s.responses,t._bus.removeResponseListener(r.from,o.id),e(s))}else t._bus.removeResponseListener(r.from,o.id),e(o.body.value);else n(o.body.desc)};t._bus.postMessage(r,o,!1)})}},{key:\"onNotification\",value:function(e){this._onNotificationHandler=e}},{key:\"onClose\",value:function(e){this._onClose=e}},{key:\"_create\",value:function(e){var t=this;return new o.default(function(r,n){var o=(0,a.default)({},e),i=e.resume;o.created=(new Date).toISOString(),o.runtime=t._runtimeUrl;var s=(0,p.deepClone)(o);delete s.p2p,delete s.store,delete s.observers,delete s.identity;var u={type:\"create\",from:t._owner,to:t._subURL,body:{resume:i,value:s}};u.body.schema=o.schema,o.p2p&&(u.body.p2p=o.p2p),o.store&&(u.body.store=o.store),o.identity&&(u.body.identity=o.identity),g.log(\"[syncher._create]: \",o,u),t._bus.postMessage(u,function(i){if(g.log(\"[syncher - create] - create-response: \",i),200===i.body.code){o.url=i.body.resource,o.status=\"live\",o.syncher=t,o.childrens=i.body.childrenResources;var a=t._reporters[o.url];a||(a=new v.default(o),t._reporters[o.url]=a),a.inviteObservers(e.authorise,e.p2p),r(a)}else n(i.body.desc)})})}},{key:\"_resumeCreate\",value:function(e){var t=this,r=this;return new o.default(function(n,o){var i=e.resume,a={type:\"create\",from:r._owner,to:r._subURL,body:{resume:i}};g.log(\"[syncher - create]: \",e,a),e&&(a.body.value=e,e.hasOwnProperty(\"reporter\")?a.body.value.reporter=e.reporter:a.body.value.reporter=r._owner),e.p2p&&(a.body.p2p=e.p2p),e.store&&(a.body.store=e.store),e.observers&&(a.body.authorise=e.observers),e.identity&&(a.body.identity=e.identity),g.log(\"[syncher._resumeCreate] - resume message: \",a),r._bus.postMessage(a,function(e){if(g.log(\"[syncher._resumeCreate] - create-resumed-response: \",e),200===e.body.code){var i=e.body.value;for(var a in i){var s=i[a];s.data=(0,p.deepClone)(s.data)||{},s.childrenObjects&&(s.childrenObjects=(0,p.deepClone)(s.childrenObjects)),s.mutual=!1,s.resume=!0,s.status=\"live\",s.syncher=r,g.log(\"[syncher._resumeCreate] - create-resumed-dataObjectReporter\",s);var u=new v.default(s);s.childrenObjects&&u.resumeChildrens(s.childrenObjects),r._reporters[s.url]=u}n(r._reporters),t._onReportersResume&&t._onReportersResume(t._reporters)}else 404===e.body.code?n({}):o(e.body.desc)})})}},{key:\"_subscribe\",value:function(e){var t=this;return new o.default(function(r,n){var o={type:\"subscribe\",from:t._owner,to:t._subURL,body:{}};e&&(e.hasOwnProperty(\"p2p\")&&(o.body.p2p=e.p2p),e.hasOwnProperty(\"store\")&&(o.body.store=e.store),e.hasOwnProperty(\"schema\")&&(o.body.schema=e.schema),e.hasOwnProperty(\"identity\")&&(o.body.identity=e.identity),e.hasOwnProperty(\"resource\")&&(o.body.resource=e.resource),e.hasOwnProperty(\"domain_subscription\")&&(o.body.domain_subscription=e.domain_subscription)),o.body.resume=e.resume,e.hasOwnProperty(\"mutual\")&&(o.body.mutual=e.mutual),g.log(\"[syncher_subscribe] - subscribe message: \",e,o),t._bus.postMessage(o,function(o){g.log(\"[syncher] - subscribe-response: \",o);var i=o.body.resource,a=t._provisionals[i];if(delete t._provisionals[i],a&&a._releaseListeners(),o.body.code<200)g.log(\"[syncher] - new DataProvisional: \",o.body.childrenResources,i),a=new m.default(t._owner,i,t._bus,o.body.childrenResources),t._provisionals[i]=a;else if(200===o.body.code){g.log(\"[syncher] - new Data Object Observer: \",o,t._provisionals);var s=o.body.value;s.syncher=t,s.p2p=e.p2p,s.store=e.store,s.identity=e.identity,s.resume=!1,s.mutual=e.mutual;var u=t._observers[i];u?u.sync():(u=new _.default(s),t._observers[i]=u),g.log(\"[syncher] - new Data Object Observer already exist: \",u),r(u),a&&a.apply(u)}else n(o.body.desc)})})}},{key:\"_resumeSubscribe\",value:function(e){var t=this,r=this;return new o.default(function(n,o){var i={type:\"subscribe\",from:r._owner,to:r._subURL,body:{}};e&&(e.hasOwnProperty(\"p2p\")&&(i.body.p2p=e.p2p),e.hasOwnProperty(\"store\")&&(i.body.store=e.store),e.hasOwnProperty(\"schema\")&&(i.body.schema=e.schema),e.hasOwnProperty(\"identity\")&&(i.body.identity=e.identity),e.hasOwnProperty(\"resource\")&&(i.body.resource=e.url)),i.body.resume=e.resume;var a=e.mutual;e.hasOwnProperty(\"mutual\")&&(i.body.mutual=a),g.log(\"[syncher] - subscribe message: \",e,i),r._bus.postMessage(i,function(e){g.log(\"[syncher] - subscribe-resumed-response: \",e);var i=e.body.resource,a=r._provisionals[i];if(delete r._provisionals[i],a&&a._releaseListeners(),e.body.code<200)g.log(\"[syncher] - resume new DataProvisional: \",e,i),a=new m.default(r._owner,i,r._bus,e.body.childrenResources),r._provisionals[i]=a;else if(200===e.body.code){var s=e.body.value;for(var u in s){var c=s[u];g.log(\"[syncher] - Resume Object Observer: \",e,c,r._provisionals),c.childrenObjects&&(c.childrenObjects=(0,p.deepClone)(c.childrenObjects)),c.data=(0,p.deepClone)(c.data)||{},c.resume=!0,c.syncher=r,g.log(\"[syncher._resumeSubscribe] - create new dataObject: \",c);var l=new _.default(c);c.childrenObjects&&l.resumeChildrens(c.childrenObjects),g.log(\"[syncher._resumeSubscribe] - new dataObject\",l),r._observers[l.url]=l,r._provisionals[l.url]&&r._provisionals[l.url].apply(l)}n(r._observers),t._onObserversResume&&t._onObserversResume(r._observers)}else 404===e.body.code?n({}):o(e.body.desc)})})}},{key:\"_onForward\",value:function(e){this._reporters[e.body.to]._onForward(e)}},{key:\"_onRemoteCreate\",value:function(e){var t=this,r=e.from.slice(0,-13),n=(0,p.divideURL)(r),o=n.domain,i={type:e.type,from:e.body.source,url:r,domain:o,schema:e.body.schema,value:e.body.value,identity:e.body.identity,ack:function(r){var n=200;r&&(n=r),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:n}})}};t._onNotificationHandler&&(g.info(\"[Syncher] NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}},{key:\"_onRemoteDelete\",value:function(e){var t=this,r=e.body.resource,n=t._observers[r],o={from:t.owner,to:t._subURL,id:e.id,type:\"unsubscribe\",body:{resource:e.body.resource}};if(t._bus.postMessage(o),delete t._observers[r],n){var i={type:e.type,url:r,identity:e.body.identity,ack:function(r){var o=200;r&&(o=r),200===o&&n.delete(),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:o,source:t._owner}})}};t._onNotificationHandler&&(g.log(\"NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}else t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:404,source:t._owner}})}},{key:\"_onExecute\",value:function(e){var t=this,r={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200}};if((e.from===t._runtimeUrl+\"/registry/\"||e.from===t._runtimeUrl+\"/registry\")&&e.body&&e.body.method&&\"close\"===e.body.method&&t._onClose){var n={type:\"close\",ack:function(e){e&&(r.body.code=e),t._bus.postMessage(r)}};g.info(\"[Syncher] Close-EVENT: \",n),t._onClose(n)}else t._bus.postMessage(r)}},{key:\"onReportersResume\",value:function(e){this._onReportersResume=e}},{key:\"onObserversResume\",value:function(e){this._onObserversResume=e}},{key:\"owner\",get:function(){return this._owner}},{key:\"reporters\",get:function(){return this._reporters}},{key:\"observers\",get:function(){return this._observers}}]),Syncher}();t.default=R,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(53),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(44),u=_interopRequireDefault(s),c=r(114),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(36),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),_=r(132),b=_interopRequireDefault(_),m=r(133),g=_interopRequireDefault(m),R=r(39),O=r(155),D=_interopRequireDefault(O),w=h.getLogger(\"DataObject\"),j=function(){function DataObject(e){function throwMandatoryParmMissingError(e){throw\"[DataObject] \"+e+\" mandatory parameter is missing\"}(0,f.default)(this,DataObject);var t=this;e.syncher?t._syncher=e.syncher:throwMandatoryParmMissingError(\"syncher\"),e.url?t._url=e.url:throwMandatoryParmMissingError(\"url\"),e.created?t._created=e.created:throwMandatoryParmMissingError(\"created\"),e.reporter?t._reporter=e.reporter:throwMandatoryParmMissingError(\"reporter\"),e.runtime?t._runtime=e.runtime:throwMandatoryParmMissingError(\"runtime\"),e.schema?t._schema=e.schema:throwMandatoryParmMissingError(\"schema\"),e.name?t._name=e.name:throwMandatoryParmMissingError(\"name\"),t._status=e.status,e.data?t._syncObj=new b.default(e.data):t._syncObj=new b.default({}),t._childrens=e.childrens,t._mutual=e.mutual,t._version=0,t._childId=0,t._childrenListeners=[],t._onAddChildrenHandler,t._resumed=e.resume,e.resume&&(t._version=e.version),t._owner=e.syncher._owner,t._bus=e.syncher._bus,e.description&&(t._description=e.description),e.tags&&(t._tags=e.tags),e.resources&&(t._resources=e.resources),e.observerStorage&&(t._observerStorage=e.observerStorage),e.publicObservation&&(t._publicObservation=e.publicObservation),t._metadata=(0,l.default)(e),(!e.hasOwnProperty(\"resume\")||e.hasOwnProperty(\"resume\")&&!e.resume)&&(t._metadata.lastModified=t._metadata.created),delete t._metadata.data,delete t._metadata.syncher,delete t._metadata.authorise,t._hypertyResourceFactory=new D.default,t._childrenObjects={},t._sharedChilds=[]}return(0,y.default)(DataObject,[{key:\"_getLastChildId\",value:function(){var e=this,t=0,r=e._owner+\"#\"+t;return(0,u.default)(e._childrens).filter(function(t){e._childrens[t].childId>r&&(r=e._childrens[t].childId)}),t=Number(r.split(\"#\")[1])}},{key:\"_allocateListeners\",value:function(){var e=this,t=this,r=t._url+\"/children/\";w.log(\"[Data Object - AllocateListeners] - \",t._childrens),t._childrens&&t._childrens.forEach(function(n){var o=r+n,i=t._bus.addListener(o,function(r){if(r.from!==e._owner)switch(w.log(\"DataObject-Children-RCV: \",r),r.type){case\"create\":t._onChildCreate(r);break;case\"delete\":w.log(r);break;default:t._changeChildren(r)}});t._childrenListeners.push(i)})}},{key:\"_releaseListeners\",value:function(){var e=this;e._childrenListeners.forEach(function(e){e.remove()}),(0,u.default)(e._childrenObjects).forEach(function(t){(0,u.default)(e._childrenObjects[t]).forEach(function(r){e._childrenObjects[t][r]._releaseListeners()})})}},{key:\"resumeChildrens\",value:function(e){var t=this,r=this,n=this._owner+\"#\"+this._childId;(0,u.default)(e).forEach(function(o){var i=e[o];(0,u.default)(i).forEach(function(e){var a=!1;r._childrenObjects.hasOwnProperty(o)||(r._childrenObjects[o]={}),i[e].value.resourceType&&!r._childrenObjects[o].hasOwnProperty(e)?(r._childrenObjects[o][e]=r._resumeHypertyResource(i[e]),a=!0):r._childrenObjects[o].hasOwnProperty(e)||(r._childrenObjects[o][e]=r._resumeChild(i[e]),w.log(\"[DataObject.resumeChildrens] new DataObjectChild: \",r._childrenObjects[o][e]),a=!0),a&&e>n&&(n=e,w.log(\"[DataObjectReporter.resumeChildrens] - resuming: \",t._childrenObjects[o][e]))})}),this._childId=Number(n.split(\"#\")[1])}},{key:\"_resumeChild\",value:function(e){var t=this,r=e.value;r.parentObject=t,r.parent=t._url;var n=new g.default(r);n.identity=e.identity;var o={type:\"create\",from:n.reporter,url:n.parent,value:n.data,childId:n.url,identity:n.identity,child:n};return n.resourceType&&(o.resource=n),t._onAddChildrenHandler&&t._onAddChildrenHandler(o),n}},{key:\"_resumeHypertyResource\",value:function(e){var t=this,r=e.value;r.parentObject=t,r.parent=t._url;var n=t._hypertyResourceFactory.createHypertyResource(!1,r.resourceType,r);n.identity=e.identity;var o={type:\"create\",from:n.reporter,url:n.parent,value:n.data,childId:n.url,identity:n.identity,child:n};return n.resourceType&&(o.resource=n),t._onAddChildrenHandler&&t._onAddChildrenHandler(o),n}},{key:\"pause\",value:function(){throw\"Not implemented\"}},{key:\"resume\",value:function(){throw\"Not implemented\"}},{key:\"stop\",value:function(){throw\"Not implemented\"}},{key:\"addChild\",value:function(e,t,r,n){var o=this,i=void 0;return new a.default(function(a){var s=o._url+\"/children/\"+e,u=o._getChildInput(n);u.data=t,u.children=e,i=new g.default(u),r&&(i.identity=r),i.share(),w.log(\"[DataObject.addChild] added \",i),i.onChange(function(e){o._onChange(e,{path:s,childId:u.url})}),o._childrenObjects.hasOwnProperty(e)||(o._childrenObjects[e]={}),o._childrenObjects[e][u.url]=i,a(i)})}},{key:\"_deleteChildrens\",value:function(){var e=this,t=[];return new a.default(function(r){if(e.childrens){w.log(\"[DataObject.deleteChildrens]\",e.childrens);var n=void 0;for(n in e.childrens){var o=void 0;for(o in e.childrens[n]){var i=e.childrens[n][o];w.log(\"[DataObject._deleteChildrens] child\",i),i.metadata.hasOwnProperty(\"resourceType\")&&t.push(e.childrens[n][o].delete())}}}w.log(\"[DataObject._deleteChildrens] promises \",t),t.length>0?a.default.all(t).then(function(){r(\"[DataObject._deleteChildrens] done\")}):r(\"[DataObject._deleteChildrens] nothing to delete\")})}},{key:\"_getChildInput\",value:function(e){var t=this,r=(0,l.default)({},e);return t._childId++,r.url=t._owner+\"#\"+t._childId,r.parentObject=t,r.reporter=t._owner,r.created=(new Date).toISOString(),r.runtime=t._syncher._runtimeUrl,r.p2pHandler=t._syncher._p2pHandler,r.p2pRequester=t._syncher._p2pRequester,r.schema=t._schema,r.parent=t.url,r}},{key:\"addHypertyResource\",value:function(e,t,r,n,o){var i=this;return new a.default(function(a){var s=void 0,u=i._url+\"/children/\"+e,c=i._getChildInput(o);c.children=e,i._hypertyResourceFactory.createHypertyResourceWithContent(!0,t,r,c).then(function(t){s=t,n&&(s.identity=n),s.share(),w.log(\"[DataObject.addHypertyResource] added \",s),s.onChange(function(e){i._onChange(e,{path:u,childId:s.childId})}),i._childrenObjects.hasOwnProperty(e)||(i._childrenObjects[e]={}),i._childrenObjects[e][s.childId]=s,a(s)})})}},{key:\"onAddChild\",value:function(e){this._onAddChildrenHandler=e}},{key:\"_onChildCreate\",value:function(e){var t=this;w.log(\"[DataObject._onChildCreate] receivedBy \"+t._owner+\" : \",e);var r={from:e.to,to:e.from,type:\"response\",id:e.id,body:{code:100}};t._bus.postMessage(r),e.body.value.resourceType?t._onHypertyResourceAdded(e):t._onChildAdded(e)}},{key:\"_onChildAdded\",value:function(e){var t=this,r=(0,R.deepClone)(e.body.value);r.parentObject=t;var n=r.children,o=new g.default(r);o.identity=e.body.identity,t._childrenObjects.hasOwnProperty(n)||(t._childrenObjects[n]={}),t._childrenObjects[n][r.url]=o,e.to===t.metadata.url&&o.store(),t._hypertyEvt(e,o)}},{key:\"_onHypertyResourceAdded\",value:function(e){var t=this,r=e.body.value,n=void 0,o=r.children;r.parentObject=t,n=t._hypertyResourceFactory.createHypertyResource(!1,r.resourceType,r),n.identity=e.body.identity,t._childrenObjects.hasOwnProperty(o)||(t._childrenObjects[o]={}),t._childrenObjects[o][n.childId]=n,t._hypertyEvt(e,n),e.to===t.metadata.url&&n.store()}},{key:\"_hypertyEvt\",value:function(e,t){var r=this,n={type:e.type,from:e.from,url:e.to,value:t.data,childId:t.url,identity:e.body.identity,child:t};t.resourceType&&(n.resource=t),r._onAddChildrenHandler&&r._onAddChildrenHandler(n)}},{key:\"_onChange\",value:function(e,t){var r=this;if(r._metadata.lastModified=(new Date).toISOString(),r._version++,\"live\"===r._status){var n={type:\"update\",from:r._url,to:r._url+\"/changes\",body:{version:r._version,source:r._owner,attribute:e.field,lastModified:r._metadata.lastModified}};w.log(\"[DataObject - _onChange] - \",e,t,n),e.oType===_.ObjectType.OBJECT?e.cType!==_.ChangeType.REMOVE&&(n.body.value=(0,R.deepClone)(e.data)):(n.body.attributeType=e.oType,n.body.value=e.data,e.cType!==_.ChangeType.UPDATE&&(n.body.operation=e.cType)),t&&(n.to=t.path,n.body.resource=t.childId),r.data._mutual||(n.body.mutual=r._mutual),r._bus.postMessage(n)}}},{key:\"_changeObject\",value:function(e,t){var r=this;if(r._version+1<=t.body.version){r._version=t.body.version;var n=t.body.attribute,i=void 0;i=\"object\"===(0,o.default)(t.body.value)?(0,R.deepClone)(t.body.value):t.body.value;var a=e.findBefore(n);if(t.body.lastModified?r._metadata.lastModified=t.body.lastModified:r._metadata.lastModified=(new Date).toISOString(),t.body.attributeType===_.ObjectType.ARRAY)if(t.body.operation===_.ChangeType.ADD){var s=a.obj,u=a.last;Array.prototype.splice.apply(s,[u,0].concat(i))}else if(t.body.operation===_.ChangeType.REMOVE){var c=a.obj,l=a.last;c.splice(l,i)}else a.obj[a.last]=i;else t.body.hasOwnProperty(\"value\")?a.obj[a.last]=i:delete a.obj[a.last]}else w.log(\"UNSYNCHRONIZED VERSION: (data => \"+r._version+\", msg => \"+t.body.version+\")\")}},{key:\"_changeChildren\",value:function(e){var t=this,r=(0,R.divideURL)(e.to),n=r.identity,o=n?n.substring(n.lastIndexOf(\"/\")+1):void 0,i=e.body.resource,a=t._childrenObjects[o][i];w.log(\"Change children: \",t._owner,e,o),a?t._changeObject(a._syncObj,e):w.warn(\"No children found for: \",i)}},{key:\"metadata\",get:function(){return this._metadata}},{key:\"url\",get:function(){return this._url}},{key:\"schema\",get:function(){return this._schema}},{key:\"status\",get:function(){return this._status}},{key:\"data\",get:function(){return this._syncObj.data}},{key:\"childrens\",get:function(){return this._childrenObjects}}]),DataObject}();t.default=j,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.ObjectType=t.ChangeType=void 0;var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i);r(154);var s=r(39),u=function(){function SyncObject(e){(0,o.default)(this,SyncObject);var t=this;t._observers=[],t._filters={},this._data=e||{},this._internalObserve(this._data)}return(0,a.default)(SyncObject,[{key:\"observe\",value:function(e){this._observers.push(e)}},{key:\"find\",value:function(e){var t=(0,s.parseAttributes)(e);return this._findWithSplit(t)}},{key:\"findBefore\",value:function(e){var t={},r=(0,s.parseAttributes)(e);return t.last=r.pop(),t.obj=this._findWithSplit(r),t}},{key:\"_findWithSplit\",value:function(e){var t=this._data;return e.forEach(function(e){t=t[e]}),t}},{key:\"_internalObserve\",value:function(e){var t=this,r=function(e){e.every(function(e){t._onChanges(e)})};this._data=Object.deepObserve(e,r)}},{key:\"_fireEvent\",value:function(e){this._observers.forEach(function(t){t(e)})}},{key:\"_onChanges\",value:function(e){var t=e.object,r=void 0;t.constructor===Object&&(r=l.OBJECT),t.constructor===Array&&(r=l.ARRAY);var n=e.keypath,o=t[e.name];\"update\"!==e.type||n.includes(\".length\")||this._fireEvent({cType:c.UPDATE,oType:r,field:n,data:o}),\"add\"===e.type&&this._fireEvent({cType:c.ADD,oType:r,field:n,data:o}),\"delete\"===e.type&&this._fireEvent({cType:c.REMOVE,oType:r,field:n})}},{key:\"data\",get:function(){return this._data}}]),SyncObject}(),c=t.ChangeType={UPDATE:\"update\",ADD:\"add\",REMOVE:\"remove\"},l=t.ObjectType={OBJECT:\"object\",ARRAY:\"array\"};t.default=u},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(36),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(132),f=_interopRequireDefault(d),p=r(39),y=l.getLogger(\"DataObjectChild\"),v=function(){function DataObjectChild(e){function throwMandatoryParmMissingError(e){throw\"[DataObjectChild] \"+e+\" mandatory parameter is missing\"}(0,a.default)(this,DataObjectChild);var t=this;e.parent?t._parent=e.parent:throwMandatoryParmMissingError(\"parent\"),e.url?t._url=e.url:throwMandatoryParmMissingError(\"url\"),e.created?t._created=e.created:throwMandatoryParmMissingError(\"created\"),e.reporter?t._reporter=e.reporter:throwMandatoryParmMissingError(\"reporter\"),e.runtime?t._runtime=e.runtime:throwMandatoryParmMissingError(\"runtime\"),e.schema?t._schema=e.schema:throwMandatoryParmMissingError(\"schema\"),e.parentObject?t._parentObject=e.parentObject:throwMandatoryParmMissingError(\"parentObject\"),e.name&&(t._name=e.name),e.description&&(t._description=e.description),e.tags&&(t._tags=e.tags),e.resources&&(t._resources=e.resources),e.observerStorage&&(t._observerStorage=e.observerStorage),e.publicObservation&&(t._publicObservation=e.publicObservation),t._childId=e.url,e.data?t._syncObj=new f.default(e.data):t._syncObj=new f.default({}),y.log(\"[DataObjectChild -  Constructor] - \",t._syncObj),t._bus=t._parentObject._bus,t._owner=t._parentObject._owner,t._allocateListeners(),t._metadata=e,delete t._metadata.parentObject,t._sharingStatus=!1}return(0,u.default)(DataObjectChild,[{key:\"share\",value:function(e){var t=this;t._sharingStatus=new o.default(function(r,n){var o=void 0;o=e?t.metadata.parent:t.metadata.parent+\"/children/\"+t.metadata.children;var i=t.metadata;i.data=t.data;var a={type:\"create\",from:t.metadata.reporter,to:o,body:{resource:i.url,value:i}};if(t.identity&&(a.body.identity=t.identity),t._parentObject.data.hasOwnProperty(\"mutual\")&&(a.body.mutual=t._parentObject.data.mutual),t._parentObject.metadata.reporter===t.metadata.reporter)return t._bus.postMessage((0,p.deepClone)(a)),r();var s=function(e){if(e.to===t._reporter){t._bus.removeResponseListener(a.from,e.id),y.log(\"[Syncher.DataObjectChild.share] Parent reporter reply \",e);var o={code:e.body&&e.body.code?e.body.code:500,desc:e.body&&e.body.desc?e.body.desc:\"Unknown\"};return e.body.code<300?r(o):n(o)}},u=t._bus.postMessage((0,p.deepClone)(a),s,!1);setTimeout(function(){return t._bus.removeResponseListener(a.from,u),n({code:408,desc:\"timout\"})},3e3)})}},{key:\"store\",value:function(){var e=this,t={},r=e.metadata.children+\".\"+e.metadata.url;t.value=e.metadata,t.identity=e.identity;var n={from:e.metadata.reporter,to:e._parentObject._syncher._subURL,type:\"create\",body:{resource:e.metadata.parent,attribute:r,value:t}};y.log(\"[DataObjectChild.store]:\",n),e._bus.postMessage(n)}},{key:\"_allocateListeners\",value:function(){var e=this;e._reporter===e._owner&&(e._listener=e._bus.addListener(e._reporter,function(t){\"response\"===t.type&&t.id===e._msgId&&(y.log(\"DataObjectChild.onResponse:\",t),e._onResponse(t))}))}},{key:\"_releaseListeners\",value:function(){var e=this;e._listener&&e._listener.remove()}},{key:\"delete\",value:function(){this._releaseListeners()}},{key:\"onChange\",value:function(e){this._syncObj.observe(function(t){y.log(\"[DataObjectChild - observer] - \",t),e(t)})}},{key:\"onResponse\",value:function(e){this._onResponseHandler=e}},{key:\"_onResponse\",value:function(e){var t=this,r={type:e.type,url:e.body.source,code:e.body.code};t._onResponseHandler&&t._onResponseHandler(r)}},{key:\"shareable\",get:function(){var e=this.metadata;return e.data=this.data,e}},{key:\"metadata\",get:function(){return this._metadata}},{key:\"childId\",get:function(){return this._childId}},{key:\"sharingStatus\",get:function(){return this._sharingStatus}},{key:\"data\",get:function(){return this._syncObj.data}},{key:\"identity\",set:function(e){this._identity=e},get:function(){return this._identity}}]),DataObjectChild}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(39),l=function(){function IdentityManager(e,t,r){(0,a.default)(this,IdentityManager);var n=this;n.messageBus=r,n.domain=(0,c.divideURL)(e).domain,n.owner=e,n.runtimeURL=t}return(0,u.default)(IdentityManager,[{key:\"discoverUserRegistered\",value:function(e,t){var r=this;return new o.default(function(n,o){var i=void 0,a=e||\".\";i=t||r.owner;var s={type:\"read\",from:i,to:r.runtimeURL+\"/registry/\",body:{resource:a,criteria:i}};r.messageBus.postMessage(s,function(e){var t=e.body.resource;t&&200===e.body.code?n(t):o(\"code: \"+e.body.code+\" No user was found\")})})}},{key:\"discoverIdentityPerIdP\",value:function(e){var t=this;return new o.default(function(r,n){var o={type:\"read\",from:this.owner,to:t.runtimeURL+\"/idm\",body:{resource:e,criteria:\"idp\"}};t.messageBus.postMessage(o,function(e){200===e.body.code?r(e.body.value):n(e.body.code+\" \"+e.body.desc)})})}}]),IdentityManager}();t.default=l,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(36),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(39),f=r(162),p=_interopRequireDefault(f),y=l.getLogger(\"Discovery\"),v=function(){function Discovery(e,t,r){(0,a.default)(this,Discovery);var n=this;n.messageBus=r,n.runtimeURL=t,n.domain=(0,d.divideURL)(e).domain,n.discoveryURL=e}return(0,u.default)(Discovery,[{key:\"_isLegacyUser\",value:function(e){return!(!e.includes(\":\")||e.includes(\"user://\"))}},{key:\"discoverHypertiesPerUserProfileData\",value:function(e,t,r){var n=this,i=[],a={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/userprofile/\"+e}};return(t||r)&&(a.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):n.messageBus.postMessage(a,function(r){200===r.body.code?(r.body.value.map(function(e){e.hypertyID!=n.discoveryURL&&i.push(e)}),0===i.length?t([]):(y.log(\"[Discovery.discoverHypertiesPerUserProfileData] Reply log: \",i),t(i))):(y.warn(\"[Discovery.discoverHypertiesPerUserProfileData] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverHypertiesPerUserProfileDataDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverHypertiesPerUserProfileData.apply(n,i).then(function(t){e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerUserProfileData\",value:function(e,t,r){var n=this,i={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/userprofile/\"+e}};return(t||r)&&(i.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):n.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerUserProfileData] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerUserProfileDataDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverDataObjectsPerUserProfileData.apply(n,i).then(function(t){return e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHypertiesPerGUID\",value:function(e,t,r){var n=this,i=[],a={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/guid/\"+e}};return(t||r)&&(a.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n.messageBus.postMessage(a,function(o){200===o.body.code?(o.body.value.map(function(e){e.hypertyID!=n.discoveryURL&&i.push(e)}),0===i.length?r(\"No Hyperty was found\"):(y.log(\"Reply log: \",i),t(i))):(y.warn(\"[Discovery.discoverHypertiesPerGUID] Error Reply for \"+e+\" Reason: \",o.body.description),t([]))})})}},{key:\"discoverHypertiesPerGUIDDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverHypertiesPerGUID.apply(n,i).then(function(t){e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerGUID\",value:function(e,t,r){var n=this,i={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/guid/\"+e}};return(t||r)&&(i.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerGUID] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerGUIDDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverDataObjectsPerGUID.apply(n,i).then(function(t){return e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHyperties\",value:function(e,t,r,n){var i=this,a=void 0,s=[];a=n||i.domain;var u={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/user/\"+e}};return u.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):i.messageBus.postMessage(u,function(r){200===r.body.code||500===r.body.code?(r.body.value.map(function(e){e.hypertyID!=i.discoveryURL&&s.push(e)}),y.log(\"[Discovery.discoverHyperties] Reply : \",s),t(s)):(y.warn(\"[Discovery.discoverHyperties] Error Reply for \"+e+\" Reason: \",r.body.description),t(s))})})}},{key:\"discoverHypertiesDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverHyperties.apply(i,a).then(function(t){e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjects\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/user/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjects] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjects.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHypertyPerURL\",value:function(e,t){var r=this,n=void 0;n=t||r.domain;var i={type:\"read\",from:r.discoveryURL,to:r.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/url/\"+e,criteria:{domain:n}}};return new o.default(function(t,n){r.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverHypertyPerURL] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverHypertyPerURLDO\",value:function(e,t){var r=this,n=arguments;return new o.default(function(e,t){r.discoverHypertyPerURL.apply(r,n).then(function(t){return e(new p.default(t,r.runtimeURL,r.discoveryURL,r.messageBus,r))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectPerURL\",value:function(e,t){var r=this,n=void 0;n=t||r.domain;var i={type:\"read\",from:r.discoveryURL,to:r.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/url/\"+e,criteria:{domain:n}}};return new o.default(function(t,n){r.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectPerURL] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectPerURLDO\",value:function(e,t){var r=this,n=arguments;return new o.default(function(e,t){r.discoverDataObjectPerURL.apply(r,n).then(function(t){return e(new p.default(t,r.runtimeURL,r.discoveryURL,r.messageBus,r))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerName\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/name/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerName] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerNameDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjectsPerName.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerReporter\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/reporter/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerName] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerReporterDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjectsPerReporter.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"_convertToDiscoveredObject\",value:function(e){var t=this;return e.map(function(e){return new p.default(e,t.runtimeURL,t.discoveryURL,t.messageBus,t)})}},{key:\"discoverDataObject\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:\"domain://registry.\"+a,body:{resource:e,criteria:{resources:r,dataSchemes:t}}};return new o.default(function(t,r){i.messageBus.postMessage(s,function(r){if(y.log(\"[Discovery]\",r),r.body.code>299)return y.warn(\"[Discovery.discoverDataObject] Error Reply for \"+e+\" Reason: \",r.body.description),t([]);var n=r.body.value;t(n||[])})})}},{key:\"discoverHyperty\",value:function(e,t,r,n){var i=this,a=void 0,s=(0,d.convertToUserURL)(e);return a=n||i.domain,new o.default(function(o,u){if(y.log(\"[Discovery.discoverHyperty] ACTIVE DOMAIN -> \",a,\"user->\",e,\"schema->\",t,\"resources->\",r,\"domain->\",n),e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] \"+e+\" is legacy domain\");return o({userID:e,hypertyID:e,schema:t,resources:r})}var c={type:\"read\",from:i.discoveryURL,to:\"domain://registry.\"+a,body:{resource:s,criteria:{resources:r,dataSchemes:t}}};y.info(\"[Discovery] msg to send->\",c),i.messageBus.postMessage(c,function(e){y.info(\"[Discovery] ON discoverHyperty->\",e);var t=e.body.value;t?o(t):u(\"No Hyperty was found\")})})}},{key:\"discoverHypertyPerUser\",value:function(e,t){var r=this,n=void 0;return new o.default(function(o,i){if(e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] \"+e+\"is legacy domain\");return o({id:e,hypertyURL:e,descriptor:\"unknown\"})}n=t||r.domain;var a=\"user://\"+e.substring(e.indexOf(\"@\")+1,e.length)+\"/\"+e.substring(0,e.indexOf(\"@\")),s={type:\"read\",from:r.discoveryURL,to:\"domain://registry.\"+n,body:{resource:a}};y.info(\"[Discovery] Message: \",s,n,a),r.messageBus.postMessage(s,function(t){y.info(\"[Discovery] message reply\",t);var r=void 0,n=void 0,a=void 0,s=t.body.value;for(r in s)if(void 0!==s[r].lastModified)if(void 0===n)n=new Date(s[r].lastModified),a=r;else{var u=new Date(s[r].lastModified);n.getTime()<u.getTime()&&(n=u,a=r)}y.info(\"[Discovery] Last Hyperty: \",a,n);var c=a;if(void 0===c)return i(\"User Hyperty not found\");var l={id:e,descriptor:s[c].descriptor,hypertyURL:c};y.info(\"[Discovery] ===> hypertyDiscovery messageBundle: \",l),o(l)})})}},{key:\"discoverHypertiesPerUser\",value:function(e,t){var r=this,n=void 0;return y.log(\"on Function->\",e),new o.default(function(o,i){if(e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] is legacy domain\");var a={userID:e,hypertyID:e,schema:schema,resources:resources};return o(a)}n=t||r.domain;var s=\"user://\"+e.substring(e.indexOf(\"@\")+1,e.length)+\"/\"+e.substring(0,e.indexOf(\"@\")),u={type:\"read\",from:r.discoveryURL,to:\"domain://registry.\"+n,body:{resource:s}};y.log(\"[Discovery] Message discoverHypertiesPerUser: \",u,n,s),r.messageBus.postMessage(u,function(e){y.info(\"[Discovery] discoverHypertiesPerUser reply\",e);var t=e.body.value;if(!t)return i(\"User Hyperty not found\");o(t)})})}},{key:\"resumeDiscoveries\",value:function(){var e=this;return y.log(\"[Discovery] resumeDiscoveries\"),new o.default(function(t,r){var n={type:\"read\",from:e.discoveryURL,to:e.runtimeURL+\"/subscriptions\",body:{resource:e.discoveryURL}};e.messageBus.postMessage(n,function(r){y.log(\"[Discovery.resumeDiscoveries] reply: \",r);var n=[];if(200===r.body.code){r.body.value.forEach(function(t){var r=t.split(\"/registration\")[0];({}).url=r,y.log(\"[Discovery.resumeDiscoveries] adding listener to: \",r),r.includes(\"hyperty://\")?n.push(e.discoverHypertyPerURLDO(r)):n.push(e.discoverDataObjectPerURLDO(r))}),o.default.all(n).then(function(e){t(e)})}else t([])})})}}]),Discovery}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(137),b=_interopRequireDefault(_),m=function(e){function ContextObserver(e,t,r,n,o,i){if((0,l.default)(this,ContextObserver),!e)throw new Error(\"The hypertyURL is a needed parameter\");if(!t)throw new Error(\"The MiniBus is a needed parameter\");if(!r)throw new Error(\"The configuration is a needed parameter \");if(!o)throw new Error(\"The factory is a needed parameter \");var a=(0,y.default)(this,(ContextObserver.__proto__||(0,u.default)(ContextObserver)).call(this)),s=a;s._contextResourceTypes=n,s._url=e,s._discoverUsersPromises={},s._observePromises={},s._domain=o.divideURL(r.runtimeURL).domain,s._objectDescURL=\"hyperty-catalogue://catalogue.\"+s._domain+\"/.well-known/dataschema/Context\",s._users2observe=[],s._observers={},a._syncher=i||o.createSyncher(e,t,r);var c=o.createDiscovery(e,r.runtimeURL,t);return s._discovery=c,s._discoveries={},window.discovery=s._discovery,a}return(0,h.default)(ContextObserver,e),(0,f.default)(ContextObserver,[{key:\"start\",value:function(e,t){var r=this;return new a.default(function(n,i){r._syncher.resumeObservers({store:!0}).then(function(i){var a=(0,o.default)(i);a.length>0?(r._observers=i,n(i),a.forEach(function(r){var n=i[r];e&&(context.data.values=e),n.sync(),t&&n.onDisconnected(t)})):n(!1)}).catch(function(e){n(!1)})}).catch(function(e){reject(\"[ContextObserver] Start failed | \",e)})}},{key:\"resumeDiscoveries\",value:function(){var e=this;return new a.default(function(t,r){e._discovery.resumeDiscoveries().then(function(r){r.forEach(function(r){r.data.resources&&r.data.resources[0]===e._contextResourceTypes[0]&&(\"live\"===r.data.status?(t([r.data]),r.unsubscribeLive(e._url)):r.onLive(e._url,function(){t([r.data]),r.unsubscribeLive(e._url)}))})})}).catch(function(e){reject(\"[ContextObserver] resumeDiscoveries failed | \",e)})}},{key:\"onResumeObserver\",value:function(e){this._onResumeObserver=e}},{key:\"discoverUsers\",value:function(e,t){var r=this,n=e+\"@\"+t;return r._discoverUsersPromises[n]||(r._discoverUsersPromises[n]=new a.default(function(n,o){r._discovery.discoverHypertiesDO(e,[\"context\"],r._contextResourceTypes,t).then(function(e){var t=[],o=[];e.forEach(function(e){r._discoveries[e.data.hypertyID]=e,\"live\"===e.data.status?t.push(e.data):o.push(e)}),t.length>0?n(t):o.length>0&&o[0].onLive(r._url,function(){t.push(o[0].data),n(t),o[0].unsubscribeLive(r._url)})})})),r._discoverUsersPromises[n]}},{key:\"observe\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return r._observePromises[e.hypertyID]||(r._observePromises[e.hypertyID]=new a.default(function(n,o){r._users2observe.forEach(function(t){if(t._reporter===e.hypertyID)return n(t)}),r._discovery.discoverDataObjectsPerReporter(e.hypertyID,[\"context\"],r._contextResourceTypes,r._domain).then(function(i){var a=0,s=void 0;i.forEach(function(e){e.hasOwnProperty(\"lastModified\")&&e.hasOwnProperty(\"url\")&&Date.parse(e.lastModified)>a&&(a=e.lastModified,s=e.url)}),0!=a&&s?n(r._subscribeContext(e,s,t)):o(\"[ContextObserver.observe] discovered DataObjecs are invalid\",i)})})),r._observePromises[e.hypertyID]}},{key:\"_subscribeContext\",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this;return new a.default(function(e,o){n._users2observe.forEach(function(r){if(r.url===t)return e(r)}),n._syncher.subscribe(n._objectDescURL,t,null,null,null,r).then(function(t){n._users2observe.push(t),t.onDisconnected(function(){t.data.values[0].value=\"unavailable\",t.sync()}),e(t)})})}},{key:\"_discoverAndSubscribeLegacyUsers\",value:function(e){var t=this;return new a.default(function(r,n){t._discovery.discoverDataObjectsPerName(e).then(function(e){e.forEach(function(e){\"live\"===e.status&&(e.hypertyID||(e.hypertyID=e.reporter),t._subscribeContext(e.schema,e.url).then(function(e){return r(e)}))})}).catch(function(e){})})}},{key:\"unobserve\",value:function(e){var t=this;t._users2observe.forEach(function(r,n){r.url===e&&(r.unsubscribe(),t._users2observe.splice(n,1))})}}]),ContextObserver}(b.default);t.default=m,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=function(){function EventEmitter(){(0,o.default)(this,EventEmitter)}return(0,a.default)(EventEmitter,[{key:\"addEventListener\",value:function(e,t){this[e]=t}},{key:\"trigger\",value:function(e,t){var r=this;r[e]&&r[e](t)}}]),EventEmitter}();t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(137),b=_interopRequireDefault(_),m=function(e){function ContextReporter(e,t,r,n,o){if((0,l.default)(this,ContextReporter),!e)throw new Error(\"The hypertyURL is a needed parameter\");if(!t)throw new Error(\"The MiniBus is a needed parameter\");if(!r)throw new Error(\"The configuration is a needed parameter\");var i=(0,y.default)(this,(ContextReporter.__proto__||(0,u.default)(ContextReporter)).call(this,e,t,r));return i.syncher=o||n.createSyncher(e,t,r),i.domain=n.divideURL(r.runtimeURL).domain,i.contexts={},i.contextDescURL=\"hyperty-catalogue://catalogue.\"+i.domain+\"/.well-known/dataschema/Context\",i.syncher.onNotification(function(e){i.onNotification(e)}),i.syncher.onClose(function(e){i.setStatus(e.id,\"unavailable\"),e.ack()}),i}return(0,h.default)(ContextReporter,e),(0,f.default)(ContextReporter,[{key:\"start\",value:function(){var e=this,t=this;return new a.default(function(r,n){e.syncher.resumeReporters({store:!0}).then(function(e){var n=(0,o.default)(e);n.length>0?(t.contexts=e,n.forEach(function(e){t._onSubscription(t.contexts[e])}),r(t.contexts)):r(!1)}).catch(function(e){})}).catch(function(e){reject(\"[ContextReporter] Start failed | \",e)})}},{key:\"processNotification\",value:function(e){e.ack()}},{key:\"create\",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"myContext\",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=this,u=void 0;return new a.default(function(a,c){u=o||i?o&&!i?{resources:r,expires:30,reporter:o}:!o&&i?{resources:r,expires:30,reuseURL:i}:{resources:r,expires:30,reuseURL:i,reporter:o}:{resources:r,expires:30},s.syncher.create(s.contextDescURL,[],t,!0,!1,n,null,u).then(function(t){s.contexts[e]=t,s._onSubscription(t),a(t)}).catch(function(e){c(e)})})}},{key:\"_onSubscription\",value:function(e){e.onSubscription(function(e){e.accept()})}},{key:\"setContext\",value:function(e,t){var r=this;r.contexts[e].data.values=t,r.trigger(e+\"-context-update\",t)}}]),ContextReporter}(b.default);t.default=m,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(69),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(125),f=_interopRequireDefault(d),p=r(168),y=_interopRequireDefault(p),v=function(){function ChatController(e,t,r,n,o,i){if((0,u.default)(this,ChatController),!e)throw Error(\"Syncher is a necessary dependecy\");if(!t)throw Error(\"Discover is a necessary dependecy\");if(!r)throw Error(\"Domain is a necessary dependecy\");if(!n)throw Error(\"Search is a necessary dependecy\");var a=this;a._syncher=e,a.discovery=t,a.search=n,a.myIdentity=o,a.controllerMode=\"reporter\",a.child_cseq=0,a.domain=r,a._manager=i;var s=e.owner;a._objectDescURL=\"hyperty-catalogue://catalogue.\"+r+\"/.well-known/dataschema/Communication\",a._invitationsHandler=new y.default(s)}return(0,l.default)(ChatController,[{key:\"_setOnAddChildListener\",value:function(e){var t=this;e.onAddChild(function(e){t.child_cseq+=1,t._onMessage&&t._onMessage(e)})}},{key:\"_onSubscribe\",value:function(e){var t=this._dataObjectReporter;e.accept();var r=JSON.parse((0,a.default)(e.identity));r.hasOwnProperty(\"assertion\")&&delete r.assertion;var n={hypertyURL:e.url,domain:e.domain,identity:r},o=e.identity.userProfile.userURL;e.identity.legacy&&(n.legacy=e.identity.legacy),t.data.participants[o]=n,this._onUserAdded&&this._onUserAdded(n)}},{key:\"_onUnsubscribe\",value:function(e){var t=this._dataObjectReporter,r=e.identity.userProfile;e.identity.legacy&&(r.legacy=e.identity.legacy),delete t.data.participants[r.userURL],this._onUserRemoved&&this._onUserRemoved(r)}},{key:\"sendFile\",value:function(e){var t=this,r=t.controllerMode,n=\"reporter\"===r?t.dataObjectReporter:t.dataObjectObserver;return new o.default(function(r,o){var i={userProfile:t.myIdentity};n.addHypertyResource(\"resources\",\"file\",e,i).then(function(e){var o={userProfile:t.myIdentity},i={value:e,identity:o,resource:e},a=new f.default(n.url,t._manager._runtimeURL,t._manager._hypertyURL,t._manager._bus);!function share2Reporter(e,t,n,o){var i=o;e.sharingStatus.then(r(n)).catch(function(r){i.onLive(t,function(){i.unsubscribeLive(t),e.share(!0),share2Reporter(e,t,n,i)})})}(e,t._manager._hypertyURL,i,a)})}).catch(function(e){reject(e)})}},{key:\"send\",value:function(e,t){var r=this,n=r.controllerMode,i=\"reporter\"===n?r.dataObjectReporter:r.dataObjectObserver;return new o.default(function(n,o){r.child_cseq+=1;var a={type:\"chat\",content:e},s=t||{userProfile:r.myIdentity};i.addChild(\"resources\",a,s).then(function(e){var t={childId:e._childId,from:e._owner,value:e.data,type:\"create\",identity:s},o=new f.default(i.url,r._manager._runtimeURL,r._manager._hypertyURL,r._manager._bus);!function share2Reporter(e,t,r,o){var i=o;e.sharingStatus.then(n(r)).catch(function(n){i.onLive(t,function(){i.unsubscribeLive(t),e.share(!0),share2Reporter(e,t,r,i)})})}(e,r._manager._hypertyURL,t,o)}).catch(function(e){o(e)})})}},{key:\"onChange\",value:function(e){this._onChange=e}},{key:\"onMessage\",value:function(e){this._onMessage=e}},{key:\"onUserAdded\",value:function(e){this._onUserAdded=e}},{key:\"onUserRemoved\",value:function(e){this._onUserRemoved=e}},{key:\"onClose\",value:function(e){this._onClose=e}},{key:\"onResponse\",value:function(e){this._onResponse=e}},{key:\"addUser\",value:function(e){var t=this,r=function(e){return 0!==e.length};return new o.default(function(n,i){if(0===e.filter(r).length)return i(\"Don't have users to invite\");var a=[],s=[],u={};e.forEach(function(e){var r=t.discovery.discoverHypertiesDO(e.user,[\"comm\"],[\"chat\"],e.domain);a.push(r)}),o.default.all(a).then(function(e){var r=[];e.forEach(function(e){e.forEach(function(e){\"live\"===e.data.status?(r.push(e.data.hypertyID),u[e.data.hypertyID]=e):s.length<5&&s.push(e)})});var n=\"reporter\"===t.controllerMode?t.dataObjectReporter:t.dataObjectObserver;s.length>0&&t._invitationsHandler.inviteDisconnectedHyperties(s,n),n.inviteObservers(r),n.invitations.length>0&&t._invitationsHandler.processInvitations(u,n)}).then(function(){n(!0)}).catch(function(e){i(e)})})}},{key:\"addUserReq\",value:function(e){var t=this,r=function(e){return 0!==e.length};return new o.default(function(n,o){if(0===e.filter(r).length)return o(\"[ChatManager.ChatController.addUserReq] Don't have users to add\");if(\"observer\"===!t.controllerMode){return o(\"[ChatManager.ChatController.addUserReq] only allowed to Chat Observer\")}})}},{key:\"onInvitationResponse\",value:function(e){var t=this;t._onInvitationResponse=e,t._invitationsHandler.invitationResponse=e}},{key:\"removeUser\",value:function(e){}},{key:\"close\",value:function(){var e=this;return new o.default(function(t,r){if(\"reporter\"===e.controllerMode)e._invitationsHandler.cleanInvitations(e.dataObjectReporter).then(function(){try{delete e._manager._reportersControllers[e.dataObjectReporter.url],e.dataObjectReporter.delete(),t(!0),e._onClose&&e._onClose({code:200,desc:\"deleted\",url:e.dataObjectReporter.url})}catch(e){r(!1)}});else try{delete e._manager._observersControllers[e.dataObjectObserver.url],e.dataObjectObserver.unsubscribe(),t(!0)}catch(e){r(!1)}})}},{key:\"invitationsHandler\",get:function(){return this._invitationsHandler}},{key:\"url\",get:function(){return\"reporter\"===this.controllerMode?this.dataObjectReporter.url:this.dataObjectObserver.url}},{key:\"dataObjectReporter\",set:function(e){if(!e)throw new Error(\"[ChatController] The data object reporter is necessary parameter \");var t=this;t.controllerMode=\"reporter\",e.onSubscription(function(e){switch(e.type){case\"subscribe\":t._onSubscribe(e);break;case\"unsubscribe\":t._onUnsubscribe(e)}}),t._setOnAddChildListener(e),e.onRead(function(e){e.accept()}),e.onExecute(function(e){switch(e.method){case\"addUser\":t.addUser(e.params[0]).then(function(){e.accept()}).catch(function(t){e.reject(t)});break;case\"removeUser\":t.removeUser(e.params).then(function(){e.accept()}).catch(function(t){e.reject(t)});break;default:e.reject(\"[ChatController.onExecute] Chat method execution not accepted by Reporter\")}}),t._dataObjectReporter=e},get:function(){return this._dataObjectReporter}},{key:\"messages\",get:function(){return\"reporter\"===this.controllerMode?this._dataObjectReporter._childrenObjects.resources:this._dataObjectObserver._childrenObjects.resources}},{key:\"dataObjectObserver\",set:function(e){var t=this;t.controllerMode=\"observer\",t._dataObjectObserver=e,e.onChange(\"*\",function(e){if(e.field.includes(\"participants\"))switch(e.cType){case\"add\":t._onUserAdded&&t._onUserAdded(e);break;case\"remove\":t._onUserRemoved&&t._onUserRemoved(e)}t._onChange&&t._onChange(e)}),t._setOnAddChildListener(e)},get:function(){return this._dataObjectObserver}},{key:\"dataObject\",get:function(){return\"reporter\"===this.controllerMode?this.dataObjectReporter:this.dataObjectObserver}},{key:\"closeEvent\",set:function(e){var t=this;t._closeEvent=e,t._onClose&&t._onClose(e)},get:function(){return this._closeEvent}}]),ChatController}();t.default=v,e.exports=t.default},,,,,,,,,,,,function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.ContextReporter=t.ContextObserver=t.IdentityManager=t.Discovery=t.Syncher=t.SandboxFactory=t.SandboxRegistry=t.SandboxType=t.Sandbox=void 0;var n=r(152),o=_interopRequireDefault(n),i=r(128),a=_interopRequireDefault(i),s=r(129),u=_interopRequireDefault(s),c=r(130),l=_interopRequireDefault(c),d=r(135),f=_interopRequireDefault(d),p=r(134),y=_interopRequireDefault(p),v=r(136),h=_interopRequireDefault(v),_=r(138),b=_interopRequireDefault(_);t.Sandbox=o.default,t.SandboxType=n.SandboxType,t.SandboxRegistry=a.default,t.SandboxFactory=u.default,t.Syncher=l.default,t.Discovery=f.default,t.IdentityManager=y.default,t.ContextObserver=h.default,t.ContextReporter=b.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.SandboxType=void 0;var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(128),b=_interopRequireDefault(_),m=r(126),g=_interopRequireDefault(m),R=(t.SandboxType={APP:\"app\",NORMAL:\"normal\",WINDOW:\"window\"},function(e){function Sandbox(e){(0,l.default)(this,Sandbox);var t=(0,y.default)(this,(Sandbox.__proto__||(0,u.default)(Sandbox)).call(this)),r=t;return e&&(r.capabilities=e),t}return(0,h.default)(Sandbox,e),(0,f.default)(Sandbox,[{key:\"deployComponent\",value:function(e,t,r){var n=this;return new a.default(function(o,i){var a={type:\"create\",from:b.default.ExternalDeployAddress,to:b.default.InternalDeployAddress,body:{url:t,sourceCode:e,config:r}};n.postMessage(a,function(e){200===e.body.code?o(\"deployed\"):i(e.body.desc)})})}},{key:\"removeComponent\",value:function(e){var t=this;return new a.default(function(r,n){var o={type:\"delete\",from:b.default.ExternalDeployAddress,to:b.default.InternalDeployAddress,body:{url:e}};t.postMessage(o,function(e){200===e.body.code?r(\"undeployed\"):n(e.body.desc)})})}},{key:\"matches\",value:function(e){var t=this,r=(0,o.default)(e).filter(function(r){return!(t.capabilities[r]&&t.capabilities[r]===e[r])});return 0===r.length||!e[r]}}]),Sandbox}(g.default));t.default=R},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(69),a=_interopRequireDefault(i),s=r(17),u=_interopRequireDefault(s),c=r(26),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(34),h=_interopRequireDefault(v),_=r(116),b=_interopRequireDefault(_),m=r(35),g=_interopRequireDefault(m),R=r(36),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(R),D=r(131),w=_interopRequireDefault(D),j=r(39),L=O.getLogger(\"DataObjectReporter\"),k=function(e){function DataObjectReporter(e){(0,f.default)(this,DataObjectReporter);var t=(0,h.default)(this,(DataObjectReporter.__proto__||(0,l.default)(DataObjectReporter)).call(this,e)),r=t;return r._subscriptions={},r._syncObj.observe(function(e){L.log(\"[Syncher.DataObjectReporter] \"+r.url+\" publish change: \",e),r._onChange(e)}),r._allocateListeners(),r.invitations=[],r._childrenSizeThreshold=5e4,t}return(0,g.default)(DataObjectReporter,e),(0,y.default)(DataObjectReporter,[{key:\"_allocateListeners\",value:function(){(0,b.default)(DataObjectReporter.prototype.__proto__||(0,l.default)(DataObjectReporter.prototype),\"_allocateListeners\",this).call(this);var e=this;e._objectListener=e._bus.addListener(e._url,function(t){switch(L.log(\"[Syncher.DataObjectReporter] listener \"+e._url+\" Received: \",t),t.type){case\"response\":e._onResponse(t);break;case\"read\":e._onRead(t);break;case\"execute\":e._onExecute(t);break;case\"create\":e._onChildCreate(t)}})}},{key:\"_releaseListeners\",value:function(){(0,b.default)(DataObjectReporter.prototype.__proto__||(0,l.default)(DataObjectReporter.prototype),\"_releaseListeners\",this).call(this),this._objectListener.remove()}},{key:\"inviteObservers\",value:function(e,t){var r=this,n=e;n.length>0&&(L.log(\"[Syncher.DataObjectReporter] InviteObservers \",n,r._metadata),n.forEach(function(e){var n=new u.default(function(n,o){var i={type:\"create\",from:r._syncher._owner,to:r._syncher._subURL,body:{resume:!1,resource:r._url,schema:r._schema,value:r._metadata,authorise:[e]}};t&&(i.body.p2p=t),r.data.mutual||(i.body.mutual=r.data.mutual),r._bus.postMessage(i,function(t){L.log(\"[Syncher.DataObjectReporter] Invitation reply \",t);var r={invited:e,code:t.body&&t.body.code?t.body.code:500,desc:t.body&&t.body.desc?t.body.desc:\"Unknown\"};r.code<300?n(r):r.code>=300&&o(r)})});r.invitations.push(n)}))}},{key:\"delete\",value:function(){var e=this;e._deleteChildrens().then(function(t){L.log(t);var r={type:\"delete\",from:e._owner,to:e._syncher._subURL,body:{resource:e._url}};e._bus.postMessage(r,function(t){L.log(\"DataObjectReporter-DELETE: \",t),200===t.body.code&&(e._releaseListeners(),delete e._syncher._reporters[e._url],e._syncObj={})})})}},{key:\"onSubscription\",value:function(e){this._onSubscriptionHandler=e}},{key:\"onResponse\",value:function(e){this._onResponseHandler=e}},{key:\"onRead\",value:function(e){this._onReadHandler=e}},{key:\"onExecute\",value:function(e){this._onExecuteHandler=e}},{key:\"_onForward\",value:function(e){var t=this;switch(L.log(\"DataObjectReporter-RCV: \",e),e.body.type){case\"subscribe\":t._onSubscribe(e);break;case\"unsubscribe\":t._onUnSubscribe(e)}}},{key:\"_onSubscribe\",value:function(e){var t=this,r=e.body.from,n=(0,j.divideURL)(r),o=n.domain,i=!0;e.body.hasOwnProperty(\"mutual\")&&!e.body.mutual&&(i=!1),L.log(\"[DataObjectReporter._onSubscribe]\",e,o,n);var a={type:e.body.type,url:r,domain:o,identity:e.body.identity,nutual:i,accept:function(){var n={url:r,status:\"live\"};t._subscriptions[r]=n,t.metadata.subscriptions&&t.metadata.subscriptions.push(n.url);var o=(0,j.deepClone)(t._metadata);o.data=(0,j.deepClone)(t.data),o.version=t._version;var i={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200,schema:t._schema,value:o}};return e.body.hasOwnProperty(\"mutual\")&&!e.body.mutual&&(i.body.mutual=e.body.mutual,t.data.mutual=!1),t._bus.postMessage(i),n},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:403,desc:r}})}};t._onSubscriptionHandler&&(L.log(\"SUBSCRIPTION-EVENT: \",a),t._onSubscriptionHandler(a))}},{key:\"_onUnSubscribe\",value:function(e){var t=this,r=e.body.from,n=(0,j.divideURL)(r),o=n.domain;L.log(\"[DataObjectReporter._onUnSubscribe]\",e,o,n),delete t._subscriptions[r],delete t.invitations[r];var i={type:e.body.type,url:r,domain:o,identity:e.body.identity};t._onSubscriptionHandler&&(L.log(\"UN-SUBSCRIPTION-EVENT: \",i),t._onSubscriptionHandler(i))}},{key:\"_onResponse\",value:function(e){var t=this,r={type:e.type,url:e.from,code:e.body.code};t._onResponseHandler&&(L.log(\"RESPONSE-EVENT: \",r),t._onResponseHandler(r))}},{key:\"_onRead\",value:function(e){var t=this,r=(0,a.default)(t.childrensJSON).length,n=r>t._childrenSizeThreshold,i={type:e.type,url:e.from,accept:function(){n?t._syncReplyForLargeData(e):t._syncReply(e)},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:401,desc:r}})}},s=[];t.metadata.subscriptions?s=t.metadata.subscriptions:t._subscriptions&&(s=(0,o.default)(t._subscriptions).map(function(e){return t._subscriptions[e].url})),-1!=s.indexOf(e.from)?n?t._syncReplyForLargeData(e):t._syncReply(e):t._onReadHandler&&(L.log(\"READ-EVENT: \",i),t._onReadHandler(i))}},{key:\"_syncReply\",value:function(e){var t=this,r=(0,j.deepClone)(t.metadata);r.data=(0,j.deepClone)(t.data),r.childrenObjects=(0,j.deepClone)(t.childrensJSON),r.version=t._version;var n={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200,value:r}};t._bus.postMessage(n)}},{key:\"_syncReplyForLargeData\",value:function(e){var t=this,r=(0,j.deepClone)(t.metadata);r.data=(0,j.deepClone)(t.data),r.version=t._version,delete r.childrenObjects;var n=void 0,o=[],i={};for(n in t._childrenObjects){var s=void 0;i[n]={};for(s in t._childrenObjects[n])(0,a.default)(i).length>t._childrenSizeThreshold&&(o.push(i),i={},i[n]={}),i[n][s]={},i[n][s].value=t._childrenObjects[n][s].metadata,i[n][s].identity=t._childrenObjects[n][s].identity}o.push(i),r.responses=o.length+1;var u={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:100,value:r}};t._bus.postMessage(u),o.forEach(function(e){var n=(0,j.deepClone)(u);n.body.value=e,n.body.value.responses=r.responses,setTimeout(function(){t._bus.postMessage(n)},50)})}},{key:\"_onExecute\",value:function(e){var t=this;if(!e.body.method)throw e;var r={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200}},n={type:e.type,url:e.from,method:e.body.method,params:e.body.params,accept:function(){t._bus.postMessage(r)},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:401,desc:r}})}};t._onExecuteHandler&&(L.log(\"[DataObjectReporter] EXECUTE-EVENT: \",n),t._onExecuteHandler(n))}},{key:\"subscriptions\",get:function(){return this._subscriptions}},{key:\"childrensJSON\",get:function(){var e=this,t={},r=void 0;for(r in e._childrenObjects){var n=void 0;t[r]={};for(n in e._childrenObjects[r])t[r][n]={},t[r][n].value=e._childrenObjects[r][n].metadata,t[r][n].identity=e._childrenObjects[r][n].identity}return t}}]),DataObjectReporter}(w.default);t.default=k,e.exports=t.default},function(e,t){!function(){\"use strict\";function Observer(e,t,r,n,o,i){function deliver(e,n){if(deliver.delay=n,!deliver.pause&&s.changeset.length>0){if(!e){var o=s.changeset.filter(function(e){return!r||r.indexOf(e.type)>=0});o.length>0&&t(o)}s.changeset=[]}}var a,s=this;return deliver.pause=o,deliver.delay=i,s.get=function(e,t){return\"__observer__\"===t?s:\"unobserve\"===t?function(){return Object.unobserve(e),e}:\"deliver\"===t?deliver:e[t]},s.target=e,s.changeset=[],s.target.__observerCallbacks__||(Object.defineProperty(e,\"__observerCallbacks__\",{enumerable:!1,configurable:!0,writable:!1,value:[]}),Object.defineProperty(e,\"__observers__\",{enumerable:!1,configurable:!0,writable:!1,value:[]})),s.target.__observerCallbacks__.push(t),s.target.__observers__.push(this),a=new Proxy(e,s),deliver(!1,i),a}Object.observe||\"function\"!=typeof Proxy||(Observer.prototype.deliver=function(){return this.get(null,\"deliver\")},Observer.prototype.set=function(e,t,r){var n=e[t],o=void 0===n?\"add\":\"update\";if(e[t]=r,e.__observers__.indexOf(this)>=0&&(!this.acceptlist||this.acceptlist.indexOf(o)>=0)){var i={object:e,name:t,type:o},a=0===this.changeset.length,s=this.deliver();\"update\"===o&&(i.oldValue=n),this.changeset.push(i),a&&s(!1,\"number\"==typeof s.delay?s.delay:10)}return!0},Observer.prototype.deleteProperty=function(e,t){var r=e[t];if(delete e[t],e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"delete\")>=0){var n={object:e,name:t,type:\"delete\",oldValue:r},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.defineProperty=function(e,t,r){if(Object.defineProperty(e,t,r),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"reconfigure\")>=0){var n={object:e,name:t,type:\"reconfigure\"},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.setPrototypeOf=function(e,t){var r=Object.getPrototypeOf(e);if(Object.setPrototypeOf(e,t),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"setPrototype\")>=0){var n={object:e,name:\"__proto__\",type:\"setPrototype\",oldValue:r},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.preventExtensions=function(e){if(Object.preventExtensions(e),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"preventExtensions\")>=0){var t={object:e,type:\"preventExtensions\"},r=0===this.changeset.length,n=this.deliver();this.changeset.push(t),r&&n(!1,\"number\"==typeof n.delay?n.delay:10)}return!0},Object.observe=function(e,t,r,n,o,i){return new Observer(e,t,r,n,o,i)},Object.unobserve=function(e,t){if(e.__observerCallbacks__){if(!t)return e.__observerCallbacks__.splice(0,e.__observerCallbacks__.length),void e.__observers__.splice(0,e.__observers__.length);e.__observerCallbacks__.forEach(function(r,n){t===r&&(e.__observerCallbacks__.splice(n,1),delete e.__observers__[n].callback,e.__observers__.splice(n,1))})}},Array.observe=function(e,t,r,n,o,i){if(!(e instanceof Array||Array.isArray(e)))throw new TypeError(\"First argument to Array.observer is not an Array\");r=r||[\"add\",\"update\",\"delete\",\"splice\"];var a=new Proxy(e,{get:function(t,n){return\"unobserve\"===n?function(e){return e?Object.unobserve(t,e):t.unobserve()}:\"splice\"===n?function(n,o){if(\"number\"!=typeof n||\"number\"!=typeof o)throw new TypeError(\"First two arguments to Array splice are not number, number\");var i=this.slice(n,n+o),a=arguments.length>1?arguments.length-2:0,u={object:e,type:\"splice\",index:n,removed:i,addedCount:a};if(t.splice.apply(t,arguments),r.indexOf(\"splice\")>=0){var n=0===s.__observer__.changeset.length,c=s.__observer__.deliver();s.__observer__.changeset.push(u),n&&c(!1,\"number\"==typeof c.delay?c.delay:10)}}:\"push\"===n?function(e){return this.splice(this.length,0,e)}:\"pop\"===n?function(){return this.splice(this.length-1,1)}:\"unshift\"===n?function(e){return this.splice(0,0,e)}:\"shift\"===n?function(){return this.splice(0,1)}:t[n]}}),s=Object.observe(a,function(e){var n=e.filter(function(e){return\"length\"!==e.name&&\"add\"!==e.name&&(!r||r.indexOf(e.type)>=0)});n.length>0&&t(n)},r,n,o,i);return s},Array.unobserve=function(e,t){return e.unobserve(t)}),Object.deepObserve=function(e,t,r){function reobserve(e,r){Object.keys(e).forEach(function(o){if((\"object\"===n(e[o])||\"array\"===n(e[o]))&&!e[o].hasOwnProperty(\"__observers__\")){var i=r.slice(0);i.push(o),e[o]=Object.deepObserve(e[o],t,i)}})}r=r||[];var n=function(e){return{}.toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()};return reobserve(e,r),Object.observe(e,function(e){function recurse(e,t,r,o,i){if(o instanceof Object){Object.keys(o).forEach(function(a){if(!r||r[a]!==o[a]){var s=r&&void 0!==r[a]?r[a]:void 0,u=void 0===s?\"add\":\"update\",c=i+\".\"+a;n.push({name:e,object:t,type:u,oldValue:s,newValue:o[a],keypath:c}),recurse(e,t,s,o[a],c)}})}else if(r instanceof Object){var a=Object.keys(r);a.forEach(function(a){var s=null===o?\"update\":\"delete\",u=i+\".\"+a;n.push({name:e,object:t,type:s,oldValue:r[a],newValue:o,keypath:u}),recurse(e,t,r[a],void 0,u)})}}var n=[];e.forEach(function(e){var t=(r.length>0?r.join(\".\")+\".\":\"\")+e.name;\"update\"!==e.type&&\"add\"!==e.type||reobserve(e.object,r),n.push({name:e.name,object:e.object,type:e.type,oldValue:e.oldValue,newValue:e.object[e.name],keypath:t}),recurse(e.name,e.object,e.oldValue,e.object[e.name],t)}),t(n)})}}()},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(156),l=_interopRequireDefault(c),d=function(){function HypertyResourceFactory(){(0,a.default)(this,HypertyResourceFactory)}return(0,u.default)(HypertyResourceFactory,[{key:\"createHypertyResource\",value:function(e,t,r){var n=void 0;switch(t){case\"file\":n=new l.default(e,r);break;default:throw new Error(\"[HypertyResourceFactory.createHypertyResource] not supported type: \",t)}return n}},{key:\"createHypertyResourceWithContent\",value:function(e,t,r,n){var i=void 0;return new o.default(function(o){switch(t){case\"file\":i=new l.default(e,n);break;default:reject()}i.init(r).then(function(){return i.save()}).then(function(){o(i)})})}}]),HypertyResourceFactory}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(26),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(34),f=_interopRequireDefault(d),p=r(35),y=_interopRequireDefault(p),v=r(36),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),_=r(157),b=_interopRequireDefault(_),m=(r(39),r(158)),g=_interopRequireDefault(m),R=h.getLogger(\"FileHypertyResource\"),O=function(e){function FileHypertyResource(e,t){(0,u.default)(this,FileHypertyResource);var r=(0,f.default)(this,(FileHypertyResource.__proto__||(0,a.default)(FileHypertyResource)).call(this,e,t));return r.metadata.resourceType=\"file\",r}return(0,y.default)(FileHypertyResource,e),(0,l.default)(FileHypertyResource,[{key:\"init\",value:function(e){var t=this;if(!e)throw new Error(\"[FileHypertyResource.constructor] missing mandatory *file* input \");return new o.default(function(r,n){if(t._metadata.name=e.name,t._metadata.lastModified=e.lastModified,t._metadata.size=e.size,t._metadata.mimetype=e.type,R.log(\"[FileHypertyResource.init] file: \",e),t._isSender){switch(e.type.split(\"/\")[0]){case\"image\":t._getImagePreview(e).then(function(n){t._metadata.preview=n,t._content=e,r()});break;default:t._content=e,r()}}else t._content=e.content,e.preview&&(t._metadata.preview=e.preview),r()})}},{key:\"_getImagePreview\",value:function(e){var t=new FileReader;return new o.default(function(r,n){g.default.resize(e,{width:100,height:100},function(e,n){n?(t.readAsDataURL(e),t.onload=function(e){r(e.target.result)}):(R.warn(\"[FileHypertyResource._getImagePreview] unable to create image preview from original image \"),r(void 0))})})}},{key:\"toMessage\",value:function(){}},{key:\"name\",get:function(){return this._metadata.name}},{key:\"preview\",get:function(){return this._metadata.preview}}]),FileHypertyResource}(b.default);t.default=O,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(17),o=_interopRequireDefault(n),i=r(26),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(34),f=_interopRequireDefault(d),p=r(116),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(36),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(_),m=r(39),g=r(133),R=_interopRequireDefault(g),O=b.getLogger(\"HypertyResource\"),D=function(e){function HypertyResource(e,t){(0,u.default)(this,HypertyResource);var r=(0,f.default)(this,(HypertyResource.__proto__||(0,a.default)(HypertyResource)).call(this,t)),n=r;return n.arraybufferSizeLimit=5242880,n._isSender=e,n._localStorageURL=n._parentObject._syncher._runtimeUrl+\"/storage\",r}return(0,h.default)(HypertyResource,e),(0,l.default)(HypertyResource,[{key:\"save\",value:function(){var e=this;return new o.default(function(t,r){var n={from:e._owner,to:e._localStorageURL,type:\"create\",body:{value:(0,m.deepClone)(e._metadata)}},o=function(n){O.info(\"[HypertyResource.save] reply: \",n),e._bus.removeResponseListener(e._owner,n.id),200===n.body.code?(n.body.value&&(e._metadata.contentURL||(e._metadata.contentURL=[]),e._metadata.contentURL.push(n.body.value)),t()):r(n.body.code+\" \"+n.body.desc)};n.body.value.content=e._content,e._bus.postMessage(n,o,!1)})}},{key:\"read\",value:function(e){var t=this;return O.info(\"[HypertyResource.read] \",this),new o.default(function(r,n){if(t.content)r(t);else{var o=t._getBestContentURL(t._metadata.contentURL);O.log(\"Storage:\",o);var i={from:t._owner,to:o.url,type:\"read\",body:{resource:o.url+\"/\"+o.resource,p2p:!0}};t.metadata.p2pRequester&&t.metadata.p2pHandler&&(i.body.p2pRequester=t.metadata.p2pRequester,i.body.p2pHandler=t.metadata.p2pHandler),t._getBestResource(i,e).then(function(e){O.info(\"[HypertyResource] - get locally the resource:\",e),r(t)}).catch(function(i){O.warn(\"[HypertyResource] - get locally the resource fail\",i);var a={from:t._owner,to:o.remoteURL,type:\"read\",body:{resource:o.remoteURL+\"/\"+o.resource,p2p:!0}};t.metadata.p2pRequester&&t.metadata.p2pHandler&&(a.body.p2pRequester=t.metadata.p2pRequester,a.body.p2pHandler=t.metadata.p2pHandler),t._getBestResource(a,e).then(function(e){O.warn(\"[HypertyResource] - get remotely the resource\",e),r(t)}).catch(function(e){O.warn(\"[HypertyResource] - get remotely the resource fail\",e),n(e.body.code+\" \"+e.body.desc)})})}})}},{key:\"_getBestResource\",value:function(e,t){var r=this;return new o.default(function(n,o){var i=setTimeout(function(){return r._bus.removeResponseListener(r._owner,s),e.body.code=408,e.body.desc=\"Response timeout\",o(e)},3e3),a=function(e){O.log(\"[HypertyResource.read] reply: \",e);var a=e.id;switch(clearTimeout(i),e.body.code){case 200:r._content=e.body.value.content,e.body.value.size<r.arraybufferSizeLimit&&r.save(),r._bus.removeResponseListener(r._owner,a),n(e);break;case 183:t(e.body.value);break;default:r._bus.removeResponseListener(r._owner,a),o(e)}},s=r._bus.postMessage(e,a,!1)})}},{key:\"delete\",value:function(){var e=this;O.info(\"[HypertyResource.delete]\",e.metadata);var t={from:e._owner,to:e._localStorageURL,type:\"delete\",body:{resources:e.metadata.contentURL}};return new o.default(function(r){e._bus.postMessage(t,function(e){r(e.body.code<300?!0:!1)})})}},{key:\"_getBestContentURL\",value:function(e){var t=this,r=e[0],n=r.substr(r.lastIndexOf(\"/\")+1);return{url:t._localStorageURL,resource:n,remoteURL:r.substr(0,r.lastIndexOf(\"/\"))}}},{key:\"resourceType\",get:function(){return this.metadata.resourceType}},{key:\"mimetype\",get:function(){return this._metadata.type}},{key:\"content\",get:function(){return this._content}},{key:\"contentURL\",get:function(){return this._metadata.contentURL}},{key:\"shareable\",get:function(){var e=this,t=(0,y.default)(HypertyResource.prototype.__proto__||(0,a.default)(HypertyResource.prototype),\"metadata\",this);return t.resourceType=e.resourceType,t}}]),HypertyResource}(R.default);t.default=D,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=\"undefined\"!=typeof Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),u=s&&\"undefined\"!=typeof Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),c=\"undefined\"!=typeof HTMLCanvasElement&&HTMLCanvasElement.prototype.toBlob,l=c||\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof atob,d=\"undefined\"!=typeof FileReader||\"undefined\"!=typeof URL,f=function(){function ImageTools(){(0,o.default)(this,ImageTools)}return(0,a.default)(ImageTools,null,[{key:\"resize\",value:function(e,t,r){\"function\"==typeof t&&(r=t,t={width:640,height:480});t.width,t.height;if(!ImageTools.isSupported()||!e.type.match(/image.*/))return r(e,!1),!1;if(e.type.match(/image\\/gif/))return r(e,!1),!1;var n=document.createElement(\"img\");return n.onload=function(o){var i=n.width,a=n.height,s=!1;if(i>=a&&i>t.width?(a*=t.width/i,i=t.width,s=!0):a>t.height&&(i*=t.height/a,a=t.height,s=!0),!s)return void r(e,!1);var u=document.createElement(\"canvas\");if(u.width=i,u.height=a,u.getContext(\"2d\").drawImage(n,0,0,i,a),c)u.toBlob(function(e){r(e,!0)},e.type);else{var l=ImageTools._toBlob(u,e.type);r(l,!0)}},ImageTools._loadImage(n,e),!0}},{key:\"_toBlob\",value:function(e,t){var r=e.toDataURL(t),n=r.split(\",\"),o=void 0;o=n[0].indexOf(\"base64\")>=0?atob(n[1]):decodeURIComponent(n[1]);for(var i=new ArrayBuffer(o.length),a=new Uint8Array(i),c=0;c<o.length;c+=1)a[c]=o.charCodeAt(c);var l=n[0].split(\":\")[1].split(\";\")[0],d=null;if(s)d=new Blob([u?a:i],{type:l});else{var f=new BlobBuilder;f.append(i),d=f.getBlob(l)}return d}},{key:\"_loadImage\",value:function(e,t,r){if(\"undefined\"==typeof URL){var n=new FileReader;n.onload=function(t){e.src=t.target.result,r&&r()},n.readAsDataURL(t)}else e.src=URL.createObjectURL(t),r&&r()}},{key:\"isSupported\",value:function(){return\"undefined\"!=typeof HTMLCanvasElement&&l&&d}}]),ImageTools}();t.default=f,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(114),a=_interopRequireDefault(i),s=r(17),u=_interopRequireDefault(s),c=r(26),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(34),h=_interopRequireDefault(v),_=r(116),b=_interopRequireDefault(_),m=r(35),g=_interopRequireDefault(m),R=r(36),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(R),D=r(39),w=r(131),j=_interopRequireDefault(w),L=O.getLogger(\"DataObjectObserver\"),k={ANY:\"any\",START:\"start\",EXACT:\"exact\"},U=function(e){function DataObjectObserver(e){(0,f.default)(this,DataObjectObserver);var t=(0,h.default)(this,(DataObjectObserver.__proto__||(0,l.default)(DataObjectObserver)).call(this,e)),r=t;return r._version=e.version,r._filters={},r._syncObj.observe(function(e){r._onFilter(e)}),r._allocateListeners(),t}return(0,g.default)(DataObjectObserver,e),(0,y.default)(DataObjectObserver,[{key:\"sync\",value:function(){var e=this;return L.info(\"[DataObjectObserver_sync] synchronising \"),new u.default(function(t,r){e._syncher.read(e._metadata.url).then(function(r){L.info(\"[DataObjectObserver_sync] value to sync: \",r),(0,a.default)(e.data,(0,D.deepClone)(r.data)),e._version=r.version,e._metadata.lastModified=r.lastModified,r.childrenObjects?(e.resumeChildrens(r.childrenObjects),e._storeChildrens(),t(!0)):t(!0)}).catch(function(e){L.info(\"[DataObjectObserver_sync] sync failed: \",e),t(!1)})})}},{key:\"_storeChildrens\",value:function(){var e=this,t={};(0,o.default)(e._childrenObjects).forEach(function(r){var n=e._childrenObjects[r];t[r]={},(0,o.default)(n).forEach(function(e){t[r][e]={},t[r][e].value=n[e].metadata,t[r][e].identity=n[e].identity})});var r={from:e._owner,to:e._syncher._subURL,type:\"create\",body:{resource:e._url,attribute:\"childrenObjects\",value:t}};e._bus.postMessage(r)}},{key:\"_allocateListeners\",value:function(){(0,b.default)(DataObjectObserver.prototype.__proto__||(0,l.default)(DataObjectObserver.prototype),\"_allocateListeners\",this).call(this);var e=this;e._changeListener=e._bus.addListener(e._url+\"/changes\",function(t){\"update\"===t.type&&(L.log(\"DataObjectObserver-\"+e._url+\"-RCV: \",t),e._changeObject(e._syncObj,t))})}},{key:\"_releaseListeners\",value:function(){(0,b.default)(DataObjectObserver.prototype.__proto__||(0,l.default)(DataObjectObserver.prototype),\"_releaseListeners\",this).call(this),this._changeListener.remove()}},{key:\"delete\",value:function(){var e=this;e._deleteChildrens().then(function(){e.unsubscribe(),e._releaseListeners(),delete e._syncher._observers[e._url]})}},{key:\"unsubscribe\",value:function(){var e=this,t={type:\"unsubscribe\",from:e._owner,to:e._syncher._subURL,body:{resource:e._url}};e._bus.postMessage(t,function(t){L.log(\"DataObjectObserver-UNSUBSCRIBE: \",t),200===t.body.code&&(e._releaseListeners(),delete e._syncher._observers[e._url])})}},{key:\"onChange\",value:function(e,t){var r=e,n={type:k.EXACT,callback:t},o=e.indexOf(\"*\");o===e.length-1&&(0===o?n.type=k.ANY:(n.type=k.START,r=e.substr(0,e.length-1))),this._filters[r]=n}},{key:\"_onFilter\",value:function(e){var t=this;(0,o.default)(t._filters).forEach(function(r){var n=t._filters[r];n.type===k.ANY?n.callback(e):n.type===k.START?0===e.field.indexOf(r)&&n.callback(e):n.type===k.EXACT&&e.field===r&&n.callback(e)})}},{key:\"onDisconnected\",value:function(e){var t=this;return new u.default(function(r,n){t._subscribeRegistration().then(function(){t._onDisconnected=e,r()}).catch(function(e){return n(e)})})}},{key:\"_subscribeRegistration\",value:function(){var e=this,t={type:\"subscribe\",from:this._owner,to:this._syncher._runtimeUrl+\"/subscriptions\",body:{resources:[this._url+\"/registration\"]}};return new u.default(function(r,n){e._bus.postMessage(t,function(t){L.log(\"[DataObjectObserver._subscribeRegistration] \"+e._url+\" rcved reply \",t),200===t.body.code?(e._generateListener(e._url+\"/registration\"),r()):(L.error(\"Error subscribing registration status for \",e._url),n(\"Error subscribing registration status for \"+e._url))})})}},{key:\"_generateListener\",value:function(e){var t=this;t._bus.addListener(e,function(e){L.log(\"[DataObjectObserver.registrationNotification] \"+t._url+\": \",e),e.body.value&&\"disconnected\"===e.body.value&&t._onDisconnected&&(L.log(\"[DataObjectObserver] \"+t._url+\": was disconnected \",e),t._onDisconnected())})}},{key:\"execute\",value:function(e,t){var r=this,n=this;return new u.default(function(o,i){var a={type:\"execute\",from:r._owner,to:n._url,body:{method:e,params:t}};n._bus.postMessage(a,function(t){L.log(\"[DataObjectObserver.execute] \"+n._url+\" rcved reply \",t),200===t.body.code?o():(L.warn(\"[DataObjectObserver.execute] execution of method \"+e+\" was reject by reporter\"),i(\"[DataObjectObserver.execute] execution of method \"+e+\" was reject by reporter\"))})})}}]),DataObjectObserver}(j.default);t.default=U,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(36),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),c=u.getLogger(\"DataProvisional\"),l=function(){function DataProvisional(e,t,r,n){(0,o.default)(this,DataProvisional);var i=this;i._owner=e,i._url=t,i._bus=r,i._children=n,i._changes=[],i._allocateListeners()}return(0,a.default)(DataProvisional,[{key:\"_allocateListeners\",value:function(){var e=this;e._listener=e._bus.addListener(e._url,function(t){c.log(\"DataProvisional-\"+e._url+\"-RCV: \",t),e._changes.push(t)})}},{key:\"_releaseListeners\",value:function(){this._listener.remove()}},{key:\"apply\",value:function(e){this._changes.forEach(function(t){e._changeObject(e._syncObj,t)})}},{key:\"children\",get:function(){return this._children}}]),DataProvisional}();t.default=l,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(39),u=function(){function NotificationHandler(e){if((0,o.default)(this,NotificationHandler),!e)throw Error(\"[NotificationHandler Constructor] bus input is mandatory\");this._bus=e,this._onNotificationHandler={}}return(0,a.default)(NotificationHandler,[{key:\"onNotification\",value:function(e,t){this._onNotificationHandler[e]=t}},{key:\"onCreate\",value:function(e){var t=this,r=e.body.hasOwnProperty(\"resource\")?e.body.resource:e.from.slice(0,-13),n=(0,s.divideURL)(r),o=n.domain,i=r.split(\"://\")[0],a=function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:400,desc:\"Bad Request: \"+r}})};e.body.hasOwnProperty(\"source\")||a(\"Missing source\"),e.body.hasOwnProperty(\"schema\")||a(\"Missing schema\"),e.body.hasOwnProperty(\"value\")||a(\"Missing value\"),e.body.hasOwnProperty(\"identity\")||a(\"Missing identity\");var u={type:e.type,from:e.body.source,url:r,domain:o,schema:e.body.schema,value:e.body.value,identity:e.body.identity,to:e.to,via:e.body.via,ack:function(r){var n=200;r&&(n=r),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:n}})},error:function(e){a(e)}};t._onNotificationHandler[i]&&t._onNotificationHandler[i](u)}},{key:\"onDelete\",value:function(e){var t=this,r=e.body.resource,n=t._observers[r],o={from:t.owner,to:t._subURL,id:e.id,type:\"unsubscribe\",body:{resource:e.body.resource}};if(t._bus.postMessage(o),delete t._observers[r],n){var i={type:e.type,url:r,identity:e.body.identity,ack:function(r){var o=200;r&&(o=r),200===o&&n.delete(),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:o,source:t._owner}})}};t._onNotificationHandler&&(log.log(\"NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}else t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:404,source:t._owner}})}}]),NotificationHandler}();t.default=u,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(26),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(34),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(35),f=_interopRequireDefault(d),p=r(125),y=_interopRequireDefault(p),v=function(e){function DiscoveredObject(e,t,r,n,i){(0,a.default)(this,DiscoveredObject);var s=(0,u.default)(this,(DiscoveredObject.__proto__||(0,o.default)(DiscoveredObject)).call(this,e.hypertyID||e.url,t,r,n));return s._data=e,s._discovery=i,s}return(0,f.default)(DiscoveredObject,e),(0,l.default)(DiscoveredObject,[{key:\"data\",get:function(){return this._data}}]),(0,l.default)(DiscoveredObject,[{key:\"check\",value:function(){var e=this,t={body:{}};e._discoveredObjectURL.startsWith(\"hyperty://\")?e._discovery.discoverHypertyPerURL(e._discoveredObjectURL).then(function(r){t.body.status=r.status,e._processNotification(t)}):e._discovery.discoverDataObjectsPerURL(e._discoveredObjectURL).then(function(r){t.body.status=r.status,e._processNotification(t)})}}]),DiscoveredObject}(y.default);t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=function(){function Search(e,t){if((0,u.default)(this,Search),!e)throw new Error(\"The discovery component is a needed parameter\");if(!t)throw new Error(\"The identityManager component is a needed parameter\");var r=this;r.discovery=e,r.identityManager=t}return(0,l.default)(Search,[{key:\"myIdentity\",value:function(){var e=this;return new a.default(function(t,r){e.identityManager.discoverUserRegistered().then(function(e){t(e)}).catch(function(e){r(e)})})}},{key:\"hyperties\",value:function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:\"users\",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)throw new Error(\"You need to provide a list of users\");if(!t)throw new Error(\"You need to provide a list of domains\");if(!n)throw new Error(\"You need to provide a list of resources\");if(!r)throw new Error(\"You need to provide a list of schemes\");var s=this;return new a.default(function(u,c){if(0===e.length)u(e);else{var l=[];e.forEach(function(e,o){var a=t[o];i?l.push(s.discovery.discoverHypertiesPerUserProfileData(e,r,n)):l.push(s.discovery.discoverHyperties(e,r,n,a))}),a.default.all(l.map(function(e){return e.then(function(e){return e},function(e){return e})})).then(function(e){var t=e.map(function(e){if(e.hasOwnProperty(\"hypertyID\"))return e;var t=(0,o.default)(e).reduceRight(function(t,r){var n=new Date(e[r].lastModified);return new Date(e[t].lastModified).getTime()<n.getTime()?r:t});return e[t]}),r=t.filter(function(e){return e.hasOwnProperty(\"hypertyID\")});e.forEach(function(e){if(\"No Hyperty was found\"!==e)return u(r)}),c(\"No Hyperty was found\")}).catch(function(t){u(e)})}})}}]),Search}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(165),a=_interopRequireDefault(i),s=function MessageBodyIdentity(e,t,r,n,i,s,u,c){if((0,o.default)(this,MessageBodyIdentity),!s)throw new Error(\"IDP should be a parameter\");if(!e)throw new Error(\"username should be a parameter\");this.idp=s,u&&(this.assertion=u),this.userProfile=new a.default(e,t,r,n,i,c)};t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(114),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=function UserProfile(e,t,r,n,i,s){(0,a.default)(this,UserProfile),e&&(this.preferred_username=e),r&&(this.picture=r),n&&(this.name=n),i&&(this.locale=i),t&&(this.userURL=t),s&&(0,o.default)(this,s)};t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(114),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(167),f=r(139),p=_interopRequireDefault(f),y=r(169),v=function(){function ChatManager(e,t,r,n,o){if((0,u.default)(this,ChatManager),!e)throw new Error(\"[ChatManager.constructor] The myUrl is a needed parameter\");if(!t)throw new Error(\"[ChatManager.constructor] The MiniBus is a needed parameter\");if(!r)throw new Error(\"[ChatManager.constructor] The configuration is a needed parameter\");var i=this;n||(n=o.createSyncher(e,t,r)),i._runtimeURL=r.runtimeURL;var a=o.divideURL(i._runtimeURL).domain,s=o.createDiscovery(e,r.runtimeURL,t),c=o.createIdentityManager(e,r.runtimeURL,t);i._objectDescURL=\"hyperty-catalogue://catalogue.\"+a+\"/.well-known/dataschema/Communication\",i._reportersControllers={},i._observersControllers={},i._myUrl=e,i._bus=t,i._syncher=n,i._domain=a,i.discovery=s,i.identityManager=c,i.currentIdentity,i.search=o.createSearch(s,c),i.communicationObject=d.communicationObject,i.communicationChildren=d.communicationChildren}return(0,l.default)(ChatManager,[{key:\"processNotification\",value:function(e){var t=this;if(\"create\"===e.type&&t._onInvitation&&t._onInvitation(e),\"delete\"===e.type){e.ack(200),t._observersControllers[e.url].closeEvent=e,delete t._observersControllers[e.url],t._observersControllers.closeEvent=e,t.communicationObject=d.communicationObject;for(var r in this._reportersControllers)this._reportersControllers[r].close(e);for(var n in this._observersControllers)this._observersControllers[n].close(e)}}},{key:\"myIdentity\",value:function(e){var t=this;return new a.default(function(r,n){if(e)return r(e);t._myUrl.includes(\"hyperty://\")?t.identityManager.discoverUserRegistered().then(function(e){r(e)}).catch(function(e){n(e)}):t.identityManager.discoverIdentityPerIdP().then(function(e){r(e)}).catch(function(e){n(e)})})}},{key:\"create\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,i=n._syncher;return new a.default(function(s,u){n.communicationObject=d.communicationObject,n.communicationObject.cseq=1,n.communicationObject.startingTime=(new Date).toJSON(),n.communicationObject.status=d.CommunicationStatus.OPEN;var c=void 0;n.myIdentity().then(function(l){c=l;var d=new y.UserInfo(n._myUrl,n._domain,l);n.communicationObject.participants[l.userURL]=d;var f=[],v=[],h={};t.forEach(function(e){var t=n.discovery.discoverHypertiesDO(e.user,[\"comm\"],[\"chat\"],e.domain);f.push(t)}),a.default.all(f).then(function(t){var a=[];t.forEach(function(e){e.forEach(function(e){\"live\"===e.data.status?(a.push(e.data.hypertyID),h[e.data.hypertyID]=e):v.length<5&&v.push(e)})});var s=(0,o.default)({resources:[\"chat\"],mutual:!0},r);return delete s.name,i.create(n._objectDescURL,a,n.communicationObject,!0,!1,e,{},s)}).then(function(e){var t=new p.default(i,n.discovery,n._domain,n.search,c,n);t.dataObjectReporter=e,n._reportersControllers[e.url]=t,e.invitations.length>0&&t.invitationsHandler.processInvitations(h,e),v.length>0&&t.invitationsHandler.inviteDisconnectedHyperties(v,e),s(t)}).catch(function(e){u(e)})}).catch(function(e){return u(e)})})}},{key:\"onInvitation\",value:function(e){this._onInvitation=e}},{key:\"join\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2],n=this;return new a.default(function(o,i){var a=n._syncher,s=void 0;n.myIdentity(r).then(function(r){return s=r,a.subscribe(n._objectDescURL,e,!0,!1,t,!0,r)}).then(function(e){var t=new p.default(a,n.discovery,n._domain,n.search,s,n);o(t),t.dataObjectObserver=e,n._observersControllers[e.url]=t}).catch(function(e){i(e)})})}}]),ChatManager}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.CommunicationStatus={OPEN:\"open\",PENDING:\"pending\",CLOSED:\"closed\",PAUSED:\"paused\",FAILED:\"failed\"},t.communicationObject={startingTime:\"\",status:\"\",participants:{}},t.communicationChildren={parent:\"communication\",listener:\"resources\",type:\"HypertyResource\"}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(44),o=_interopRequireDefault(n),i=r(17),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=function(){function InvitationsHandler(e){if((0,u.default)(this,InvitationsHandler),!e)throw Error(\"hypertyURL is a necessary dependecy\");var t=this;t._hypertyURL=e,t._pending={}}return(0,l.default)(InvitationsHandler,[{key:\"inviteDisconnectedHyperties\",value:function(e,t){var r=this;e.forEach(function(e){r._pending[t]||(r._pending[t]={}),r._pending[t][e.data.hypertyID]=e,e.onLive(r._hypertyURL,function(){t.inviteObservers([e.data.hypertyID]),e.unsubscribeLive(r._hypertyURL),delete r._pending[t][e.data.hypertyID]})})}},{key:\"processInvitations\",value:function(e,t){var r=this,n=this,o=t.invitations||[];o.forEach(function(o){o.then(function(e){r._invitationsResponse&&r._invitationsResponse(e)}).catch(function(o){r._invitationsResponse&&r._invitationsResponse(o),n.inviteDisconnectedHyperties([e[o.invited]],t)})})}},{key:\"resumeDiscoveries\",value:function(e,t){var r=this;return new a.default(function(n,i){var s={},u=[],c=[],l=[];e.resumeDiscoveries().then(function(e){e.forEach(function(e){e.data.resources&&\"chat\"===e.data.resources[0]&&(\"live\"===e.data.status?(s[e.data.hypertyID]=e,u.push(e.data.hypertyID),l.push(e.unsubscribeLive(r._hypertyURL))):c.push(e))}),c.length>0&&r.inviteDisconnectedHyperties(c,t),(0,o.default)(s).length>0?(t.inviteObservers(u),t.invitations.length>0&&r.processInvitations(s,t),a.default.all(l).then(function(){n()})):n()})}).catch(function(e){reject(\"[GroupChatManager.InvitationsHandler.resumeDiscoveries] failed | \",e)})}},{key:\"cleanInvitations\",value:function(e){var t=this,r=t._pending[e];return r?new a.default(function(e,n){var i=(0,o.default)(r),s=[];i.forEach(function(e){s.push(r[e].unsubscribeLive(t._hypertyURL))}),a.default.all(i).then(function(){e()})}):a.default.resolve()}},{key:\"invitationResponse\",set:function(e){this._invitationsResponse=e}}]),InvitationsHandler}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.UserInfo=void 0;var n=r(170),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(39);t.UserInfo=function UserInfo(e,t,r){var n;(0,a.default)(this,UserInfo);var i=(0,s.deepClone)(r);return r.hasOwnProperty(\"userProfile\")||(i.userProfile=r),n={hypertyURL:e,domain:t},(0,o.default)(n,\"domain\",t),(0,o.default)(n,\"identity\",i),n}},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(60),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}}])});","/*!\n * URI.js - Mutating URLs\n * IPv6 Support\n *\n * Version: 1.19.1\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.IPv6 = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  /*\n  var _in = \"fe80:0000:0000:0000:0204:61ff:fe9d:f156\";\n  var _out = IPv6.best(_in);\n  var _expected = \"fe80::204:61ff:fe9d:f156\";\n\n  console.log(_in, _out, _expected, _out === _expected);\n  */\n\n  // save current IPv6 variable, if any\n  var _IPv6 = root && root.IPv6;\n\n  function bestPresentation(address) {\n    // based on:\n    // Javascript to test an IPv6 address for proper format, and to\n    // present the \"best text representation\" according to IETF Draft RFC at\n    // http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04\n    // 8 Feb 2010 Rich Brown, Dartware, LLC\n    // Please feel free to use this code as long as you provide a link to\n    // http://www.intermapper.com\n    // http://intermapper.com/support/tools/IPV6-Validator.aspx\n    // http://download.dartware.com/thirdparty/ipv6validator.js\n\n    var _address = address.toLowerCase();\n    var segments = _address.split(':');\n    var length = segments.length;\n    var total = 8;\n\n    // trim colons (:: or ::a:b:c… or …a:b:c::)\n    if (segments[0] === '' && segments[1] === '' && segments[2] === '') {\n      // must have been ::\n      // remove first two items\n      segments.shift();\n      segments.shift();\n    } else if (segments[0] === '' && segments[1] === '') {\n      // must have been ::xxxx\n      // remove the first item\n      segments.shift();\n    } else if (segments[length - 1] === '' && segments[length - 2] === '') {\n      // must have been xxxx::\n      segments.pop();\n    }\n\n    length = segments.length;\n\n    // adjust total segments for IPv4 trailer\n    if (segments[length - 1].indexOf('.') !== -1) {\n      // found a \".\" which means IPv4\n      total = 7;\n    }\n\n    // fill empty segments them with \"0000\"\n    var pos;\n    for (pos = 0; pos < length; pos++) {\n      if (segments[pos] === '') {\n        break;\n      }\n    }\n\n    if (pos < total) {\n      segments.splice(pos, 1, '0000');\n      while (segments.length < total) {\n        segments.splice(pos, 0, '0000');\n      }\n    }\n\n    // strip leading zeros\n    var _segments;\n    for (var i = 0; i < total; i++) {\n      _segments = segments[i].split('');\n      for (var j = 0; j < 3 ; j++) {\n        if (_segments[0] === '0' && _segments.length > 1) {\n          _segments.splice(0,1);\n        } else {\n          break;\n        }\n      }\n\n      segments[i] = _segments.join('');\n    }\n\n    // find longest sequence of zeroes and coalesce them into one segment\n    var best = -1;\n    var _best = 0;\n    var _current = 0;\n    var current = -1;\n    var inzeroes = false;\n    // i; already declared\n\n    for (i = 0; i < total; i++) {\n      if (inzeroes) {\n        if (segments[i] === '0') {\n          _current += 1;\n        } else {\n          inzeroes = false;\n          if (_current > _best) {\n            best = current;\n            _best = _current;\n          }\n        }\n      } else {\n        if (segments[i] === '0') {\n          inzeroes = true;\n          current = i;\n          _current = 1;\n        }\n      }\n    }\n\n    if (_current > _best) {\n      best = current;\n      _best = _current;\n    }\n\n    if (_best > 1) {\n      segments.splice(best, _best, '');\n    }\n\n    length = segments.length;\n\n    // assemble remaining segments\n    var result = '';\n    if (segments[0] === '')  {\n      result = ':';\n    }\n\n    for (i = 0; i < length; i++) {\n      result += segments[i];\n      if (i === length - 1) {\n        break;\n      }\n\n      result += ':';\n    }\n\n    if (segments[length - 1] === '') {\n      result += ':';\n    }\n\n    return result;\n  }\n\n  function noConflict() {\n    /*jshint validthis: true */\n    if (root.IPv6 === this) {\n      root.IPv6 = _IPv6;\n    }\n\n    return this;\n  }\n\n  return {\n    best: bestPresentation,\n    noConflict: noConflict\n  };\n}));\n","/*!\n * URI.js - Mutating URLs\n * Second Level Domain (SLD) Support\n *\n * Version: 1.19.1\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.SecondLevelDomains = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  // save current SecondLevelDomains variable, if any\n  var _SecondLevelDomains = root && root.SecondLevelDomains;\n\n  var SLD = {\n    // list of known Second Level Domains\n    // converted list of SLDs from https://github.com/gavingmiller/second-level-domains\n    // ----\n    // publicsuffix.org is more current and actually used by a couple of browsers internally.\n    // downside is it also contains domains like \"dyndns.org\" - which is fine for the security\n    // issues browser have to deal with (SOP for cookies, etc) - but is way overboard for URI.js\n    // ----\n    list: {\n      'ac':' com gov mil net org ',\n      'ae':' ac co gov mil name net org pro sch ',\n      'af':' com edu gov net org ',\n      'al':' com edu gov mil net org ',\n      'ao':' co ed gv it og pb ',\n      'ar':' com edu gob gov int mil net org tur ',\n      'at':' ac co gv or ',\n      'au':' asn com csiro edu gov id net org ',\n      'ba':' co com edu gov mil net org rs unbi unmo unsa untz unze ',\n      'bb':' biz co com edu gov info net org store tv ',\n      'bh':' biz cc com edu gov info net org ',\n      'bn':' com edu gov net org ',\n      'bo':' com edu gob gov int mil net org tv ',\n      'br':' adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ',\n      'bs':' com edu gov net org ',\n      'bz':' du et om ov rg ',\n      'ca':' ab bc mb nb nf nl ns nt nu on pe qc sk yk ',\n      'ck':' biz co edu gen gov info net org ',\n      'cn':' ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ',\n      'co':' com edu gov mil net nom org ',\n      'cr':' ac c co ed fi go or sa ',\n      'cy':' ac biz com ekloges gov ltd name net org parliament press pro tm ',\n      'do':' art com edu gob gov mil net org sld web ',\n      'dz':' art asso com edu gov net org pol ',\n      'ec':' com edu fin gov info med mil net org pro ',\n      'eg':' com edu eun gov mil name net org sci ',\n      'er':' com edu gov ind mil net org rochest w ',\n      'es':' com edu gob nom org ',\n      'et':' biz com edu gov info name net org ',\n      'fj':' ac biz com info mil name net org pro ',\n      'fk':' ac co gov net nom org ',\n      'fr':' asso com f gouv nom prd presse tm ',\n      'gg':' co net org ',\n      'gh':' com edu gov mil org ',\n      'gn':' ac com gov net org ',\n      'gr':' com edu gov mil net org ',\n      'gt':' com edu gob ind mil net org ',\n      'gu':' com edu gov net org ',\n      'hk':' com edu gov idv net org ',\n      'hu':' 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ',\n      'id':' ac co go mil net or sch web ',\n      'il':' ac co gov idf k12 muni net org ',\n      'in':' ac co edu ernet firm gen gov i ind mil net nic org res ',\n      'iq':' com edu gov i mil net org ',\n      'ir':' ac co dnssec gov i id net org sch ',\n      'it':' edu gov ',\n      'je':' co net org ',\n      'jo':' com edu gov mil name net org sch ',\n      'jp':' ac ad co ed go gr lg ne or ',\n      'ke':' ac co go info me mobi ne or sc ',\n      'kh':' com edu gov mil net org per ',\n      'ki':' biz com de edu gov info mob net org tel ',\n      'km':' asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ',\n      'kn':' edu gov net org ',\n      'kr':' ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ',\n      'kw':' com edu gov net org ',\n      'ky':' com edu gov net org ',\n      'kz':' com edu gov mil net org ',\n      'lb':' com edu gov net org ',\n      'lk':' assn com edu gov grp hotel int ltd net ngo org sch soc web ',\n      'lr':' com edu gov net org ',\n      'lv':' asn com conf edu gov id mil net org ',\n      'ly':' com edu gov id med net org plc sch ',\n      'ma':' ac co gov m net org press ',\n      'mc':' asso tm ',\n      'me':' ac co edu gov its net org priv ',\n      'mg':' com edu gov mil nom org prd tm ',\n      'mk':' com edu gov inf name net org pro ',\n      'ml':' com edu gov net org presse ',\n      'mn':' edu gov org ',\n      'mo':' com edu gov net org ',\n      'mt':' com edu gov net org ',\n      'mv':' aero biz com coop edu gov info int mil museum name net org pro ',\n      'mw':' ac co com coop edu gov int museum net org ',\n      'mx':' com edu gob net org ',\n      'my':' com edu gov mil name net org sch ',\n      'nf':' arts com firm info net other per rec store web ',\n      'ng':' biz com edu gov mil mobi name net org sch ',\n      'ni':' ac co com edu gob mil net nom org ',\n      'np':' com edu gov mil net org ',\n      'nr':' biz com edu gov info net org ',\n      'om':' ac biz co com edu gov med mil museum net org pro sch ',\n      'pe':' com edu gob mil net nom org sld ',\n      'ph':' com edu gov i mil net ngo org ',\n      'pk':' biz com edu fam gob gok gon gop gos gov net org web ',\n      'pl':' art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ',\n      'pr':' ac biz com edu est gov info isla name net org pro prof ',\n      'ps':' com edu gov net org plo sec ',\n      'pw':' belau co ed go ne or ',\n      'ro':' arts com firm info nom nt org rec store tm www ',\n      'rs':' ac co edu gov in org ',\n      'sb':' com edu gov net org ',\n      'sc':' com edu gov net org ',\n      'sh':' co com edu gov net nom org ',\n      'sl':' com edu gov net org ',\n      'st':' co com consulado edu embaixada gov mil net org principe saotome store ',\n      'sv':' com edu gob org red ',\n      'sz':' ac co org ',\n      'tr':' av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ',\n      'tt':' aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ',\n      'tw':' club com ebiz edu game gov idv mil net org ',\n      'mu':' ac co com gov net or org ',\n      'mz':' ac co edu gov org ',\n      'na':' co com ',\n      'nz':' ac co cri geek gen govt health iwi maori mil net org parliament school ',\n      'pa':' abo ac com edu gob ing med net nom org sld ',\n      'pt':' com edu gov int net nome org publ ',\n      'py':' com edu gov mil net org ',\n      'qa':' com edu gov mil net org ',\n      're':' asso com nom ',\n      'ru':' ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ',\n      'rw':' ac co com edu gouv gov int mil net ',\n      'sa':' com edu gov med net org pub sch ',\n      'sd':' com edu gov info med net org tv ',\n      'se':' a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ',\n      'sg':' com edu gov idn net org per ',\n      'sn':' art com edu gouv org perso univ ',\n      'sy':' com edu gov mil net news org ',\n      'th':' ac co go in mi net or ',\n      'tj':' ac biz co com edu go gov info int mil name net nic org test web ',\n      'tn':' agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ',\n      'tz':' ac co go ne or ',\n      'ua':' biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ',\n      'ug':' ac co go ne or org sc ',\n      'uk':' ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ',\n      'us':' dni fed isa kids nsn ',\n      'uy':' com edu gub mil net org ',\n      've':' co com edu gob info mil net org web ',\n      'vi':' co com k12 net org ',\n      'vn':' ac biz com edu gov health info int name net org pro ',\n      'ye':' co com gov ltd me net org plc ',\n      'yu':' ac co edu gov org ',\n      'za':' ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ',\n      'zm':' ac co com edu gov net org sch ',\n      // https://en.wikipedia.org/wiki/CentralNic#Second-level_domains\n      'com': 'ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ',\n      'net': 'gb jp se uk ',\n      'org': 'ae',\n      'de': 'com '\n    },\n    // gorhill 2013-10-25: Using indexOf() instead Regexp(). Significant boost\n    // in both performance and memory footprint. No initialization required.\n    // http://jsperf.com/uri-js-sld-regex-vs-binary-search/4\n    // Following methods use lastIndexOf() rather than array.split() in order\n    // to avoid any memory allocations.\n    has: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') >= 0;\n    },\n    is: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset >= 0) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(0, tldOffset) + ' ') >= 0;\n    },\n    get: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return null;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return null;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return null;\n      }\n      if (sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') < 0) {\n        return null;\n      }\n      return domain.slice(sldOffset+1);\n    },\n    noConflict: function(){\n      if (root.SecondLevelDomains === this) {\n        root.SecondLevelDomains = _SecondLevelDomains;\n      }\n      return this;\n    }\n  };\n\n  return SLD;\n}));\n","/*!\n * URI.js - Mutating URLs\n *\n * Version: 1.19.1\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory(require('./punycode'), require('./IPv6'), require('./SecondLevelDomains'));\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['./punycode', './IPv6', './SecondLevelDomains'], factory);\n  } else {\n    // Browser globals (root is window)\n    root.URI = factory(root.punycode, root.IPv6, root.SecondLevelDomains, root);\n  }\n}(this, function (punycode, IPv6, SLD, root) {\n  'use strict';\n  /*global location, escape, unescape */\n  // FIXME: v2.0.0 renamce non-camelCase properties to uppercase\n  /*jshint camelcase: false */\n\n  // save current URI variable, if any\n  var _URI = root && root.URI;\n\n  function URI(url, base) {\n    var _urlSupplied = arguments.length >= 1;\n    var _baseSupplied = arguments.length >= 2;\n\n    // Allow instantiation without the 'new' keyword\n    if (!(this instanceof URI)) {\n      if (_urlSupplied) {\n        if (_baseSupplied) {\n          return new URI(url, base);\n        }\n\n        return new URI(url);\n      }\n\n      return new URI();\n    }\n\n    if (url === undefined) {\n      if (_urlSupplied) {\n        throw new TypeError('undefined is not a valid argument for URI');\n      }\n\n      if (typeof location !== 'undefined') {\n        url = location.href + '';\n      } else {\n        url = '';\n      }\n    }\n\n    if (url === null) {\n      if (_urlSupplied) {\n        throw new TypeError('null is not a valid argument for URI');\n      }\n    }\n\n    this.href(url);\n\n    // resolve to base according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#constructor\n    if (base !== undefined) {\n      return this.absoluteTo(base);\n    }\n\n    return this;\n  }\n\n  function isInteger(value) {\n    return /^[0-9]+$/.test(value);\n  }\n\n  URI.version = '1.19.1';\n\n  var p = URI.prototype;\n  var hasOwn = Object.prototype.hasOwnProperty;\n\n  function escapeRegEx(string) {\n    // https://github.com/medialize/URI.js/commit/85ac21783c11f8ccab06106dba9735a31a86924d#commitcomment-821963\n    return string.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  }\n\n  function getType(value) {\n    // IE8 doesn't return [Object Undefined] but [Object Object] for undefined value\n    if (value === undefined) {\n      return 'Undefined';\n    }\n\n    return String(Object.prototype.toString.call(value)).slice(8, -1);\n  }\n\n  function isArray(obj) {\n    return getType(obj) === 'Array';\n  }\n\n  function filterArrayValues(data, value) {\n    var lookup = {};\n    var i, length;\n\n    if (getType(value) === 'RegExp') {\n      lookup = null;\n    } else if (isArray(value)) {\n      for (i = 0, length = value.length; i < length; i++) {\n        lookup[value[i]] = true;\n      }\n    } else {\n      lookup[value] = true;\n    }\n\n    for (i = 0, length = data.length; i < length; i++) {\n      /*jshint laxbreak: true */\n      var _match = lookup && lookup[data[i]] !== undefined\n        || !lookup && value.test(data[i]);\n      /*jshint laxbreak: false */\n      if (_match) {\n        data.splice(i, 1);\n        length--;\n        i--;\n      }\n    }\n\n    return data;\n  }\n\n  function arrayContains(list, value) {\n    var i, length;\n\n    // value may be string, number, array, regexp\n    if (isArray(value)) {\n      // Note: this can be optimized to O(n) (instead of current O(m * n))\n      for (i = 0, length = value.length; i < length; i++) {\n        if (!arrayContains(list, value[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var _type = getType(value);\n    for (i = 0, length = list.length; i < length; i++) {\n      if (_type === 'RegExp') {\n        if (typeof list[i] === 'string' && list[i].match(value)) {\n          return true;\n        }\n      } else if (list[i] === value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function arraysEqual(one, two) {\n    if (!isArray(one) || !isArray(two)) {\n      return false;\n    }\n\n    // arrays can't be equal if they have different amount of content\n    if (one.length !== two.length) {\n      return false;\n    }\n\n    one.sort();\n    two.sort();\n\n    for (var i = 0, l = one.length; i < l; i++) {\n      if (one[i] !== two[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function trimSlashes(text) {\n    var trim_expression = /^\\/+|\\/+$/g;\n    return text.replace(trim_expression, '');\n  }\n\n  URI._parts = function() {\n    return {\n      protocol: null,\n      username: null,\n      password: null,\n      hostname: null,\n      urn: null,\n      port: null,\n      path: null,\n      query: null,\n      fragment: null,\n      // state\n      preventInvalidHostname: URI.preventInvalidHostname,\n      duplicateQueryParameters: URI.duplicateQueryParameters,\n      escapeQuerySpace: URI.escapeQuerySpace\n    };\n  };\n  // state: throw on invalid hostname\n  // see https://github.com/medialize/URI.js/pull/345\n  // and https://github.com/medialize/URI.js/issues/354\n  URI.preventInvalidHostname = false;\n  // state: allow duplicate query parameters (a=1&a=1)\n  URI.duplicateQueryParameters = false;\n  // state: replaces + with %20 (space in query strings)\n  URI.escapeQuerySpace = true;\n  // static properties\n  URI.protocol_expression = /^[a-z][a-z0-9.+-]*$/i;\n  URI.idn_expression = /[^a-z0-9\\._-]/i;\n  URI.punycode_expression = /(xn--)/i;\n  // well, 333.444.555.666 matches, but it sure ain't no IPv4 - do we care?\n  URI.ip4_expression = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\n  // credits to Rich Brown\n  // source: http://forums.intermapper.com/viewtopic.php?p=1096#1096\n  // specification: http://www.ietf.org/rfc/rfc4291.txt\n  URI.ip6_expression = /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n  // expression used is \"gruber revised\" (@gruber v2) determined to be the\n  // best solution in a regex-golf we did a couple of ages ago at\n  // * http://mathiasbynens.be/demo/url-regex\n  // * http://rodneyrehm.de/t/url-regex.html\n  URI.find_uri_expression = /\\b((?:[a-z][\\w-]+:(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))/ig;\n  URI.findUri = {\n    // valid \"scheme://\" or \"www.\"\n    start: /\\b(?:([a-z][a-z0-9.+-]*:\\/\\/)|www\\.)/gi,\n    // everything up to the next whitespace\n    end: /[\\s\\r\\n]|$/,\n    // trim trailing punctuation captured by end RegExp\n    trim: /[`!()\\[\\]{};:'\".,<>?«»“”„‘’]+$/,\n    // balanced parens inclusion (), [], {}, <>\n    parens: /(\\([^\\)]*\\)|\\[[^\\]]*\\]|\\{[^}]*\\}|<[^>]*>)/g,\n  };\n  // http://www.iana.org/assignments/uri-schemes.html\n  // http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers#Well-known_ports\n  URI.defaultPorts = {\n    http: '80',\n    https: '443',\n    ftp: '21',\n    gopher: '70',\n    ws: '80',\n    wss: '443'\n  };\n  // list of protocols which always require a hostname\n  URI.hostProtocols = [\n    'http',\n    'https'\n  ];\n\n  // allowed hostname characters according to RFC 3986\n  // ALPHA DIGIT \"-\" \".\" \"_\" \"~\" \"!\" \"$\" \"&\" \"'\" \"(\" \")\" \"*\" \"+\" \",\" \";\" \"=\" %encoded\n  // I've never seen a (non-IDN) hostname other than: ALPHA DIGIT . - _\n  URI.invalid_hostname_characters = /[^a-zA-Z0-9\\.\\-:_]/;\n  // map DOM Elements to their URI attribute\n  URI.domAttributes = {\n    'a': 'href',\n    'blockquote': 'cite',\n    'link': 'href',\n    'base': 'href',\n    'script': 'src',\n    'form': 'action',\n    'img': 'src',\n    'area': 'href',\n    'iframe': 'src',\n    'embed': 'src',\n    'source': 'src',\n    'track': 'src',\n    'input': 'src', // but only if type=\"image\"\n    'audio': 'src',\n    'video': 'src'\n  };\n  URI.getDomAttribute = function(node) {\n    if (!node || !node.nodeName) {\n      return undefined;\n    }\n\n    var nodeName = node.nodeName.toLowerCase();\n    // <input> should only expose src for type=\"image\"\n    if (nodeName === 'input' && node.type !== 'image') {\n      return undefined;\n    }\n\n    return URI.domAttributes[nodeName];\n  };\n\n  function escapeForDumbFirefox36(value) {\n    // https://github.com/medialize/URI.js/issues/91\n    return escape(value);\n  }\n\n  // encoding / decoding according to RFC3986\n  function strictEncodeURIComponent(string) {\n    // see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent\n    return encodeURIComponent(string)\n      .replace(/[!'()*]/g, escapeForDumbFirefox36)\n      .replace(/\\*/g, '%2A');\n  }\n  URI.encode = strictEncodeURIComponent;\n  URI.decode = decodeURIComponent;\n  URI.iso8859 = function() {\n    URI.encode = escape;\n    URI.decode = unescape;\n  };\n  URI.unicode = function() {\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = decodeURIComponent;\n  };\n  URI.characters = {\n    pathname: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,\n        map: {\n          // -._~!'()*\n          '%24': '$',\n          '%26': '&',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%3A': ':',\n          '%40': '@'\n        }\n      },\n      decode: {\n        expression: /[\\/\\?#]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23'\n        }\n      }\n    },\n    reserved: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,\n        map: {\n          // gen-delims\n          '%3A': ':',\n          '%2F': '/',\n          '%3F': '?',\n          '%23': '#',\n          '%5B': '[',\n          '%5D': ']',\n          '%40': '@',\n          // sub-delims\n          '%21': '!',\n          '%24': '$',\n          '%26': '&',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '='\n        }\n      }\n    },\n    urnpath: {\n      // The characters under `encode` are the characters called out by RFC 2141 as being acceptable\n      // for usage in a URN. RFC2141 also calls out \"-\", \".\", and \"_\" as acceptable characters, but\n      // these aren't encoded by encodeURIComponent, so we don't have to call them out here. Also\n      // note that the colon character is not featured in the encoding map; this is because URI.js\n      // gives the colons in URNs semantic meaning as the delimiters of path segements, and so it\n      // should not appear unencoded in a segment itself.\n      // See also the note above about RFC3986 and capitalalized hex digits.\n      encode: {\n        expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,\n        map: {\n          '%21': '!',\n          '%24': '$',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%40': '@'\n        }\n      },\n      // These characters are the characters called out by RFC2141 as \"reserved\" characters that\n      // should never appear in a URN, plus the colon character (see note above).\n      decode: {\n        expression: /[\\/\\?#:]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23',\n          ':': '%3A'\n        }\n      }\n    }\n  };\n  URI.encodeQuery = function(string, escapeQuerySpace) {\n    var escaped = URI.encode(string + '');\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    return escapeQuerySpace ? escaped.replace(/%20/g, '+') : escaped;\n  };\n  URI.decodeQuery = function(string, escapeQuerySpace) {\n    string += '';\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    try {\n      return URI.decode(escapeQuerySpace ? string.replace(/\\+/g, '%20') : string);\n    } catch(e) {\n      // we're not going to mess with weird encodings,\n      // give up and return the undecoded original string\n      // see https://github.com/medialize/URI.js/issues/87\n      // see https://github.com/medialize/URI.js/issues/92\n      return string;\n    }\n  };\n  // generate encode/decode path functions\n  var _parts = {'encode':'encode', 'decode':'decode'};\n  var _part;\n  var generateAccessor = function(_group, _part) {\n    return function(string) {\n      try {\n        return URI[_part](string + '').replace(URI.characters[_group][_part].expression, function(c) {\n          return URI.characters[_group][_part].map[c];\n        });\n      } catch (e) {\n        // we're not going to mess with weird encodings,\n        // give up and return the undecoded original string\n        // see https://github.com/medialize/URI.js/issues/87\n        // see https://github.com/medialize/URI.js/issues/92\n        return string;\n      }\n    };\n  };\n\n  for (_part in _parts) {\n    URI[_part + 'PathSegment'] = generateAccessor('pathname', _parts[_part]);\n    URI[_part + 'UrnPathSegment'] = generateAccessor('urnpath', _parts[_part]);\n  }\n\n  var generateSegmentedPathFunction = function(_sep, _codingFuncName, _innerCodingFuncName) {\n    return function(string) {\n      // Why pass in names of functions, rather than the function objects themselves? The\n      // definitions of some functions (but in particular, URI.decode) will occasionally change due\n      // to URI.js having ISO8859 and Unicode modes. Passing in the name and getting it will ensure\n      // that the functions we use here are \"fresh\".\n      var actualCodingFunc;\n      if (!_innerCodingFuncName) {\n        actualCodingFunc = URI[_codingFuncName];\n      } else {\n        actualCodingFunc = function(string) {\n          return URI[_codingFuncName](URI[_innerCodingFuncName](string));\n        };\n      }\n\n      var segments = (string + '').split(_sep);\n\n      for (var i = 0, length = segments.length; i < length; i++) {\n        segments[i] = actualCodingFunc(segments[i]);\n      }\n\n      return segments.join(_sep);\n    };\n  };\n\n  // This takes place outside the above loop because we don't want, e.g., encodeUrnPath functions.\n  URI.decodePath = generateSegmentedPathFunction('/', 'decodePathSegment');\n  URI.decodeUrnPath = generateSegmentedPathFunction(':', 'decodeUrnPathSegment');\n  URI.recodePath = generateSegmentedPathFunction('/', 'encodePathSegment', 'decode');\n  URI.recodeUrnPath = generateSegmentedPathFunction(':', 'encodeUrnPathSegment', 'decode');\n\n  URI.encodeReserved = generateAccessor('reserved', 'encode');\n\n  URI.parse = function(string, parts) {\n    var pos;\n    if (!parts) {\n      parts = {\n        preventInvalidHostname: URI.preventInvalidHostname\n      };\n    }\n    // [protocol\"://\"[username[\":\"password]\"@\"]hostname[\":\"port]\"/\"?][path][\"?\"querystring][\"#\"fragment]\n\n    // extract fragment\n    pos = string.indexOf('#');\n    if (pos > -1) {\n      // escaping?\n      parts.fragment = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract query\n    pos = string.indexOf('?');\n    if (pos > -1) {\n      // escaping?\n      parts.query = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract protocol\n    if (string.substring(0, 2) === '//') {\n      // relative-scheme\n      parts.protocol = null;\n      string = string.substring(2);\n      // extract \"user:pass@host:port\"\n      string = URI.parseAuthority(string, parts);\n    } else {\n      pos = string.indexOf(':');\n      if (pos > -1) {\n        parts.protocol = string.substring(0, pos) || null;\n        if (parts.protocol && !parts.protocol.match(URI.protocol_expression)) {\n          // : may be within the path\n          parts.protocol = undefined;\n        } else if (string.substring(pos + 1, pos + 3) === '//') {\n          string = string.substring(pos + 3);\n\n          // extract \"user:pass@host:port\"\n          string = URI.parseAuthority(string, parts);\n        } else {\n          string = string.substring(pos + 1);\n          parts.urn = true;\n        }\n      }\n    }\n\n    // what's left must be the path\n    parts.path = string;\n\n    // and we're done\n    return parts;\n  };\n  URI.parseHost = function(string, parts) {\n    if (!string) {\n      string = '';\n    }\n\n    // Copy chrome, IE, opera backslash-handling behavior.\n    // Back slashes before the query string get converted to forward slashes\n    // See: https://github.com/joyent/node/blob/386fd24f49b0e9d1a8a076592a404168faeecc34/lib/url.js#L115-L124\n    // See: https://code.google.com/p/chromium/issues/detail?id=25916\n    // https://github.com/medialize/URI.js/pull/233\n    string = string.replace(/\\\\/g, '/');\n\n    // extract host:port\n    var pos = string.indexOf('/');\n    var bracketPos;\n    var t;\n\n    if (pos === -1) {\n      pos = string.length;\n    }\n\n    if (string.charAt(0) === '[') {\n      // IPv6 host - http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04#section-6\n      // I claim most client software breaks on IPv6 anyways. To simplify things, URI only accepts\n      // IPv6+port in the format [2001:db8::1]:80 (for the time being)\n      bracketPos = string.indexOf(']');\n      parts.hostname = string.substring(1, bracketPos) || null;\n      parts.port = string.substring(bracketPos + 2, pos) || null;\n      if (parts.port === '/') {\n        parts.port = null;\n      }\n    } else {\n      var firstColon = string.indexOf(':');\n      var firstSlash = string.indexOf('/');\n      var nextColon = string.indexOf(':', firstColon + 1);\n      if (nextColon !== -1 && (firstSlash === -1 || nextColon < firstSlash)) {\n        // IPv6 host contains multiple colons - but no port\n        // this notation is actually not allowed by RFC 3986, but we're a liberal parser\n        parts.hostname = string.substring(0, pos) || null;\n        parts.port = null;\n      } else {\n        t = string.substring(0, pos).split(':');\n        parts.hostname = t[0] || null;\n        parts.port = t[1] || null;\n      }\n    }\n\n    if (parts.hostname && string.substring(pos).charAt(0) !== '/') {\n      pos++;\n      string = '/' + string;\n    }\n\n    if (parts.preventInvalidHostname) {\n      URI.ensureValidHostname(parts.hostname, parts.protocol);\n    }\n\n    if (parts.port) {\n      URI.ensureValidPort(parts.port);\n    }\n\n    return string.substring(pos) || '/';\n  };\n  URI.parseAuthority = function(string, parts) {\n    string = URI.parseUserinfo(string, parts);\n    return URI.parseHost(string, parts);\n  };\n  URI.parseUserinfo = function(string, parts) {\n    // extract username:password\n    var firstSlash = string.indexOf('/');\n    var pos = string.lastIndexOf('@', firstSlash > -1 ? firstSlash : string.length - 1);\n    var t;\n\n    // authority@ must come before /path\n    if (pos > -1 && (firstSlash === -1 || pos < firstSlash)) {\n      t = string.substring(0, pos).split(':');\n      parts.username = t[0] ? URI.decode(t[0]) : null;\n      t.shift();\n      parts.password = t[0] ? URI.decode(t.join(':')) : null;\n      string = string.substring(pos + 1);\n    } else {\n      parts.username = null;\n      parts.password = null;\n    }\n\n    return string;\n  };\n  URI.parseQuery = function(string, escapeQuerySpace) {\n    if (!string) {\n      return {};\n    }\n\n    // throw out the funky business - \"?\"[name\"=\"value\"&\"]+\n    string = string.replace(/&+/g, '&').replace(/^\\?*&*|&+$/g, '');\n\n    if (!string) {\n      return {};\n    }\n\n    var items = {};\n    var splits = string.split('&');\n    var length = splits.length;\n    var v, name, value;\n\n    for (var i = 0; i < length; i++) {\n      v = splits[i].split('=');\n      name = URI.decodeQuery(v.shift(), escapeQuerySpace);\n      // no \"=\" is null according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#collect-url-parameters\n      value = v.length ? URI.decodeQuery(v.join('='), escapeQuerySpace) : null;\n\n      if (hasOwn.call(items, name)) {\n        if (typeof items[name] === 'string' || items[name] === null) {\n          items[name] = [items[name]];\n        }\n\n        items[name].push(value);\n      } else {\n        items[name] = value;\n      }\n    }\n\n    return items;\n  };\n\n  URI.build = function(parts) {\n    var t = '';\n\n    if (parts.protocol) {\n      t += parts.protocol + ':';\n    }\n\n    if (!parts.urn && (t || parts.hostname)) {\n      t += '//';\n    }\n\n    t += (URI.buildAuthority(parts) || '');\n\n    if (typeof parts.path === 'string') {\n      if (parts.path.charAt(0) !== '/' && typeof parts.hostname === 'string') {\n        t += '/';\n      }\n\n      t += parts.path;\n    }\n\n    if (typeof parts.query === 'string' && parts.query) {\n      t += '?' + parts.query;\n    }\n\n    if (typeof parts.fragment === 'string' && parts.fragment) {\n      t += '#' + parts.fragment;\n    }\n    return t;\n  };\n  URI.buildHost = function(parts) {\n    var t = '';\n\n    if (!parts.hostname) {\n      return '';\n    } else if (URI.ip6_expression.test(parts.hostname)) {\n      t += '[' + parts.hostname + ']';\n    } else {\n      t += parts.hostname;\n    }\n\n    if (parts.port) {\n      t += ':' + parts.port;\n    }\n\n    return t;\n  };\n  URI.buildAuthority = function(parts) {\n    return URI.buildUserinfo(parts) + URI.buildHost(parts);\n  };\n  URI.buildUserinfo = function(parts) {\n    var t = '';\n\n    if (parts.username) {\n      t += URI.encode(parts.username);\n    }\n\n    if (parts.password) {\n      t += ':' + URI.encode(parts.password);\n    }\n\n    if (t) {\n      t += '@';\n    }\n\n    return t;\n  };\n  URI.buildQuery = function(data, duplicateQueryParameters, escapeQuerySpace) {\n    // according to http://tools.ietf.org/html/rfc3986 or http://labs.apache.org/webarch/uri/rfc/rfc3986.html\n    // being »-._~!$&'()*+,;=:@/?« %HEX and alnum are allowed\n    // the RFC explicitly states ?/foo being a valid use case, no mention of parameter syntax!\n    // URI.js treats the query string as being application/x-www-form-urlencoded\n    // see http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type\n\n    var t = '';\n    var unique, key, i, length;\n    for (key in data) {\n      if (hasOwn.call(data, key) && key) {\n        if (isArray(data[key])) {\n          unique = {};\n          for (i = 0, length = data[key].length; i < length; i++) {\n            if (data[key][i] !== undefined && unique[data[key][i] + ''] === undefined) {\n              t += '&' + URI.buildQueryParameter(key, data[key][i], escapeQuerySpace);\n              if (duplicateQueryParameters !== true) {\n                unique[data[key][i] + ''] = true;\n              }\n            }\n          }\n        } else if (data[key] !== undefined) {\n          t += '&' + URI.buildQueryParameter(key, data[key], escapeQuerySpace);\n        }\n      }\n    }\n\n    return t.substring(1);\n  };\n  URI.buildQueryParameter = function(name, value, escapeQuerySpace) {\n    // http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type -- application/x-www-form-urlencoded\n    // don't append \"=\" for null values, according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#url-parameter-serialization\n    return URI.encodeQuery(name, escapeQuerySpace) + (value !== null ? '=' + URI.encodeQuery(value, escapeQuerySpace) : '');\n  };\n\n  URI.addQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.addQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (data[name] === undefined) {\n        data[name] = value;\n        return;\n      } else if (typeof data[name] === 'string') {\n        data[name] = [data[name]];\n      }\n\n      if (!isArray(value)) {\n        value = [value];\n      }\n\n      data[name] = (data[name] || []).concat(value);\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.setQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.setQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      data[name] = value === undefined ? null : value;\n    } else {\n      throw new TypeError('URI.setQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.removeQuery = function(data, name, value) {\n    var i, length, key;\n\n    if (isArray(name)) {\n      for (i = 0, length = name.length; i < length; i++) {\n        data[name[i]] = undefined;\n      }\n    } else if (getType(name) === 'RegExp') {\n      for (key in data) {\n        if (name.test(key)) {\n          data[key] = undefined;\n        }\n      }\n    } else if (typeof name === 'object') {\n      for (key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.removeQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (value !== undefined) {\n        if (getType(value) === 'RegExp') {\n          if (!isArray(data[name]) && value.test(data[name])) {\n            data[name] = undefined;\n          } else {\n            data[name] = filterArrayValues(data[name], value);\n          }\n        } else if (data[name] === String(value) && (!isArray(value) || value.length === 1)) {\n          data[name] = undefined;\n        } else if (isArray(data[name])) {\n          data[name] = filterArrayValues(data[name], value);\n        }\n      } else {\n        data[name] = undefined;\n      }\n    } else {\n      throw new TypeError('URI.removeQuery() accepts an object, string, RegExp as the first parameter');\n    }\n  };\n  URI.hasQuery = function(data, name, value, withinArray) {\n    switch (getType(name)) {\n      case 'String':\n        // Nothing to do here\n        break;\n\n      case 'RegExp':\n        for (var key in data) {\n          if (hasOwn.call(data, key)) {\n            if (name.test(key) && (value === undefined || URI.hasQuery(data, key, value))) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n\n      case 'Object':\n        for (var _key in name) {\n          if (hasOwn.call(name, _key)) {\n            if (!URI.hasQuery(data, _key, name[_key])) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts a string, regular expression or object as the name parameter');\n    }\n\n    switch (getType(value)) {\n      case 'Undefined':\n        // true if exists (but may be empty)\n        return name in data; // data[name] !== undefined;\n\n      case 'Boolean':\n        // true if exists and non-empty\n        var _booly = Boolean(isArray(data[name]) ? data[name].length : data[name]);\n        return value === _booly;\n\n      case 'Function':\n        // allow complex comparison\n        return !!value(data[name], name, data);\n\n      case 'Array':\n        if (!isArray(data[name])) {\n          return false;\n        }\n\n        var op = withinArray ? arrayContains : arraysEqual;\n        return op(data[name], value);\n\n      case 'RegExp':\n        if (!isArray(data[name])) {\n          return Boolean(data[name] && data[name].match(value));\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      case 'Number':\n        value = String(value);\n        /* falls through */\n      case 'String':\n        if (!isArray(data[name])) {\n          return data[name] === value;\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter');\n    }\n  };\n\n\n  URI.joinPaths = function() {\n    var input = [];\n    var segments = [];\n    var nonEmptySegments = 0;\n\n    for (var i = 0; i < arguments.length; i++) {\n      var url = new URI(arguments[i]);\n      input.push(url);\n      var _segments = url.segment();\n      for (var s = 0; s < _segments.length; s++) {\n        if (typeof _segments[s] === 'string') {\n          segments.push(_segments[s]);\n        }\n\n        if (_segments[s]) {\n          nonEmptySegments++;\n        }\n      }\n    }\n\n    if (!segments.length || !nonEmptySegments) {\n      return new URI('');\n    }\n\n    var uri = new URI('').segment(segments);\n\n    if (input[0].path() === '' || input[0].path().slice(0, 1) === '/') {\n      uri.path('/' + uri.path());\n    }\n\n    return uri.normalize();\n  };\n\n  URI.commonPath = function(one, two) {\n    var length = Math.min(one.length, two.length);\n    var pos;\n\n    // find first non-matching character\n    for (pos = 0; pos < length; pos++) {\n      if (one.charAt(pos) !== two.charAt(pos)) {\n        pos--;\n        break;\n      }\n    }\n\n    if (pos < 1) {\n      return one.charAt(0) === two.charAt(0) && one.charAt(0) === '/' ? '/' : '';\n    }\n\n    // revert to last /\n    if (one.charAt(pos) !== '/' || two.charAt(pos) !== '/') {\n      pos = one.substring(0, pos).lastIndexOf('/');\n    }\n\n    return one.substring(0, pos + 1);\n  };\n\n  URI.withinString = function(string, callback, options) {\n    options || (options = {});\n    var _start = options.start || URI.findUri.start;\n    var _end = options.end || URI.findUri.end;\n    var _trim = options.trim || URI.findUri.trim;\n    var _parens = options.parens || URI.findUri.parens;\n    var _attributeOpen = /[a-z0-9-]=[\"']?$/i;\n\n    _start.lastIndex = 0;\n    while (true) {\n      var match = _start.exec(string);\n      if (!match) {\n        break;\n      }\n\n      var start = match.index;\n      if (options.ignoreHtml) {\n        // attribut(e=[\"']?$)\n        var attributeOpen = string.slice(Math.max(start - 3, 0), start);\n        if (attributeOpen && _attributeOpen.test(attributeOpen)) {\n          continue;\n        }\n      }\n\n      var end = start + string.slice(start).search(_end);\n      var slice = string.slice(start, end);\n      // make sure we include well balanced parens\n      var parensEnd = -1;\n      while (true) {\n        var parensMatch = _parens.exec(slice);\n        if (!parensMatch) {\n          break;\n        }\n\n        var parensMatchEnd = parensMatch.index + parensMatch[0].length;\n        parensEnd = Math.max(parensEnd, parensMatchEnd);\n      }\n\n      if (parensEnd > -1) {\n        slice = slice.slice(0, parensEnd) + slice.slice(parensEnd).replace(_trim, '');\n      } else {\n        slice = slice.replace(_trim, '');\n      }\n\n      if (slice.length <= match[0].length) {\n        // the extract only contains the starting marker of a URI,\n        // e.g. \"www\" or \"http://\"\n        continue;\n      }\n\n      if (options.ignore && options.ignore.test(slice)) {\n        continue;\n      }\n\n      end = start + slice.length;\n      var result = callback(slice, start, end, string);\n      if (result === undefined) {\n        _start.lastIndex = end;\n        continue;\n      }\n\n      result = String(result);\n      string = string.slice(0, start) + result + string.slice(end);\n      _start.lastIndex = start + result.length;\n    }\n\n    _start.lastIndex = 0;\n    return string;\n  };\n\n  URI.ensureValidHostname = function(v, protocol) {\n    // Theoretically URIs allow percent-encoding in Hostnames (according to RFC 3986)\n    // they are not part of DNS and therefore ignored by URI.js\n\n    var hasHostname = !!v; // not null and not an empty string\n    var hasProtocol = !!protocol;\n    var rejectEmptyHostname = false;\n\n    if (hasProtocol) {\n      rejectEmptyHostname = arrayContains(URI.hostProtocols, protocol);\n    }\n\n    if (rejectEmptyHostname && !hasHostname) {\n      throw new TypeError('Hostname cannot be empty, if protocol is ' + protocol);\n    } else if (v && v.match(URI.invalid_hostname_characters)) {\n      // test punycode\n      if (!punycode) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');\n      }\n      if (punycode.toASCII(v).match(URI.invalid_hostname_characters)) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_]');\n      }\n    }\n  };\n\n  URI.ensureValidPort = function (v) {\n    if (!v) {\n      return;\n    }\n\n    var port = Number(v);\n    if (isInteger(port) && (port > 0) && (port < 65536)) {\n      return;\n    }\n\n    throw new TypeError('Port \"' + v + '\" is not a valid port');\n  };\n\n  // noConflict\n  URI.noConflict = function(removeAll) {\n    if (removeAll) {\n      var unconflicted = {\n        URI: this.noConflict()\n      };\n\n      if (root.URITemplate && typeof root.URITemplate.noConflict === 'function') {\n        unconflicted.URITemplate = root.URITemplate.noConflict();\n      }\n\n      if (root.IPv6 && typeof root.IPv6.noConflict === 'function') {\n        unconflicted.IPv6 = root.IPv6.noConflict();\n      }\n\n      if (root.SecondLevelDomains && typeof root.SecondLevelDomains.noConflict === 'function') {\n        unconflicted.SecondLevelDomains = root.SecondLevelDomains.noConflict();\n      }\n\n      return unconflicted;\n    } else if (root.URI === this) {\n      root.URI = _URI;\n    }\n\n    return this;\n  };\n\n  p.build = function(deferBuild) {\n    if (deferBuild === true) {\n      this._deferred_build = true;\n    } else if (deferBuild === undefined || this._deferred_build) {\n      this._string = URI.build(this._parts);\n      this._deferred_build = false;\n    }\n\n    return this;\n  };\n\n  p.clone = function() {\n    return new URI(this);\n  };\n\n  p.valueOf = p.toString = function() {\n    return this.build(false)._string;\n  };\n\n\n  function generateSimpleAccessor(_part){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        this._parts[_part] = v || null;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  function generatePrefixAccessor(_part, _key){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        if (v !== null) {\n          v = v + '';\n          if (v.charAt(0) === _key) {\n            v = v.substring(1);\n          }\n        }\n\n        this._parts[_part] = v;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  p.protocol = generateSimpleAccessor('protocol');\n  p.username = generateSimpleAccessor('username');\n  p.password = generateSimpleAccessor('password');\n  p.hostname = generateSimpleAccessor('hostname');\n  p.port = generateSimpleAccessor('port');\n  p.query = generatePrefixAccessor('query', '?');\n  p.fragment = generatePrefixAccessor('fragment', '#');\n\n  p.search = function(v, build) {\n    var t = this.query(v, build);\n    return typeof t === 'string' && t.length ? ('?' + t) : t;\n  };\n  p.hash = function(v, build) {\n    var t = this.fragment(v, build);\n    return typeof t === 'string' && t.length ? ('#' + t) : t;\n  };\n\n  p.pathname = function(v, build) {\n    if (v === undefined || v === true) {\n      var res = this._parts.path || (this._parts.hostname ? '/' : '');\n      return v ? (this._parts.urn ? URI.decodeUrnPath : URI.decodePath)(res) : res;\n    } else {\n      if (this._parts.urn) {\n        this._parts.path = v ? URI.recodeUrnPath(v) : '';\n      } else {\n        this._parts.path = v ? URI.recodePath(v) : '/';\n      }\n      this.build(!build);\n      return this;\n    }\n  };\n  p.path = p.pathname;\n  p.href = function(href, build) {\n    var key;\n\n    if (href === undefined) {\n      return this.toString();\n    }\n\n    this._string = '';\n    this._parts = URI._parts();\n\n    var _URI = href instanceof URI;\n    var _object = typeof href === 'object' && (href.hostname || href.path || href.pathname);\n    if (href.nodeName) {\n      var attribute = URI.getDomAttribute(href);\n      href = href[attribute] || '';\n      _object = false;\n    }\n\n    // window.location is reported to be an object, but it's not the sort\n    // of object we're looking for:\n    // * location.protocol ends with a colon\n    // * location.query != object.search\n    // * location.hash != object.fragment\n    // simply serializing the unknown object should do the trick\n    // (for location, not for everything...)\n    if (!_URI && _object && href.pathname !== undefined) {\n      href = href.toString();\n    }\n\n    if (typeof href === 'string' || href instanceof String) {\n      this._parts = URI.parse(String(href), this._parts);\n    } else if (_URI || _object) {\n      var src = _URI ? href._parts : href;\n      for (key in src) {\n        if (key === 'query') { continue; }\n        if (hasOwn.call(this._parts, key)) {\n          this._parts[key] = src[key];\n        }\n      }\n      if (src.query) {\n        this.query(src.query, false);\n      }\n    } else {\n      throw new TypeError('invalid input');\n    }\n\n    this.build(!build);\n    return this;\n  };\n\n  // identification accessors\n  p.is = function(what) {\n    var ip = false;\n    var ip4 = false;\n    var ip6 = false;\n    var name = false;\n    var sld = false;\n    var idn = false;\n    var punycode = false;\n    var relative = !this._parts.urn;\n\n    if (this._parts.hostname) {\n      relative = false;\n      ip4 = URI.ip4_expression.test(this._parts.hostname);\n      ip6 = URI.ip6_expression.test(this._parts.hostname);\n      ip = ip4 || ip6;\n      name = !ip;\n      sld = name && SLD && SLD.has(this._parts.hostname);\n      idn = name && URI.idn_expression.test(this._parts.hostname);\n      punycode = name && URI.punycode_expression.test(this._parts.hostname);\n    }\n\n    switch (what.toLowerCase()) {\n      case 'relative':\n        return relative;\n\n      case 'absolute':\n        return !relative;\n\n      // hostname identification\n      case 'domain':\n      case 'name':\n        return name;\n\n      case 'sld':\n        return sld;\n\n      case 'ip':\n        return ip;\n\n      case 'ip4':\n      case 'ipv4':\n      case 'inet4':\n        return ip4;\n\n      case 'ip6':\n      case 'ipv6':\n      case 'inet6':\n        return ip6;\n\n      case 'idn':\n        return idn;\n\n      case 'url':\n        return !this._parts.urn;\n\n      case 'urn':\n        return !!this._parts.urn;\n\n      case 'punycode':\n        return punycode;\n    }\n\n    return null;\n  };\n\n  // component specific input validation\n  var _protocol = p.protocol;\n  var _port = p.port;\n  var _hostname = p.hostname;\n\n  p.protocol = function(v, build) {\n    if (v) {\n      // accept trailing ://\n      v = v.replace(/:(\\/\\/)?$/, '');\n\n      if (!v.match(URI.protocol_expression)) {\n        throw new TypeError('Protocol \"' + v + '\" contains characters other than [A-Z0-9.+-] or doesn\\'t start with [A-Z]');\n      }\n    }\n\n    return _protocol.call(this, v, build);\n  };\n  p.scheme = p.protocol;\n  p.port = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      if (v === 0) {\n        v = null;\n      }\n\n      if (v) {\n        v += '';\n        if (v.charAt(0) === ':') {\n          v = v.substring(1);\n        }\n\n        URI.ensureValidPort(v);\n      }\n    }\n    return _port.call(this, v, build);\n  };\n  p.hostname = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      var x = { preventInvalidHostname: this._parts.preventInvalidHostname };\n      var res = URI.parseHost(v, x);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      v = x.hostname;\n      if (this._parts.preventInvalidHostname) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n    }\n\n    return _hostname.call(this, v, build);\n  };\n\n  // compound accessors\n  p.origin = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var protocol = this.protocol();\n      var authority = this.authority();\n      if (!authority) {\n        return '';\n      }\n\n      return (protocol ? protocol + '://' : '') + this.authority();\n    } else {\n      var origin = URI(v);\n      this\n        .protocol(origin.protocol())\n        .authority(origin.authority())\n        .build(!build);\n      return this;\n    }\n  };\n  p.host = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildHost(this._parts) : '';\n    } else {\n      var res = URI.parseHost(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.authority = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildAuthority(this._parts) : '';\n    } else {\n      var res = URI.parseAuthority(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.userinfo = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var t = URI.buildUserinfo(this._parts);\n      return t ? t.substring(0, t.length -1) : t;\n    } else {\n      if (v[v.length-1] !== '@') {\n        v += '@';\n      }\n\n      URI.parseUserinfo(v, this._parts);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.resource = function(v, build) {\n    var parts;\n\n    if (v === undefined) {\n      return this.path() + this.search() + this.hash();\n    }\n\n    parts = URI.parse(v);\n    this._parts.path = parts.path;\n    this._parts.query = parts.query;\n    this._parts.fragment = parts.fragment;\n    this.build(!build);\n    return this;\n  };\n\n  // fraction accessors\n  p.subdomain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    // convenience, return \"www\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // grab domain and add another segment\n      var end = this._parts.hostname.length - this.domain().length - 1;\n      return this._parts.hostname.substring(0, end) || '';\n    } else {\n      var e = this._parts.hostname.length - this.domain().length;\n      var sub = this._parts.hostname.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(sub));\n\n      if (v && v.charAt(v.length - 1) !== '.') {\n        v += '.';\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      if (v) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n\n      this._parts.hostname = this._parts.hostname.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.domain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // convenience, return \"example.org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // if hostname consists of 1 or 2 segments, it must be the domain\n      var t = this._parts.hostname.match(/\\./g);\n      if (t && t.length < 2) {\n        return this._parts.hostname;\n      }\n\n      // grab tld and add another segment\n      var end = this._parts.hostname.length - this.tld(build).length - 1;\n      end = this._parts.hostname.lastIndexOf('.', end -1) + 1;\n      return this._parts.hostname.substring(end) || '';\n    } else {\n      if (!v) {\n        throw new TypeError('cannot set domain empty');\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      URI.ensureValidHostname(v, this._parts.protocol);\n\n      if (!this._parts.hostname || this.is('IP')) {\n        this._parts.hostname = v;\n      } else {\n        var replace = new RegExp(escapeRegEx(this.domain()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.tld = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // return \"org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      var pos = this._parts.hostname.lastIndexOf('.');\n      var tld = this._parts.hostname.substring(pos + 1);\n\n      if (build !== true && SLD && SLD.list[tld.toLowerCase()]) {\n        return SLD.get(this._parts.hostname) || tld;\n      }\n\n      return tld;\n    } else {\n      var replace;\n\n      if (!v) {\n        throw new TypeError('cannot set TLD empty');\n      } else if (v.match(/[^a-zA-Z0-9-]/)) {\n        if (SLD && SLD.is(v)) {\n          replace = new RegExp(escapeRegEx(this.tld()) + '$');\n          this._parts.hostname = this._parts.hostname.replace(replace, v);\n        } else {\n          throw new TypeError('TLD \"' + v + '\" contains characters other than [A-Z0-9]');\n        }\n      } else if (!this._parts.hostname || this.is('IP')) {\n        throw new ReferenceError('cannot set TLD on non-domain host');\n      } else {\n        replace = new RegExp(escapeRegEx(this.tld()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.directory = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path && !this._parts.hostname) {\n        return '';\n      }\n\n      if (this._parts.path === '/') {\n        return '/';\n      }\n\n      var end = this._parts.path.length - this.filename().length - 1;\n      var res = this._parts.path.substring(0, end) || (this._parts.hostname ? '/' : '');\n\n      return v ? URI.decodePath(res) : res;\n\n    } else {\n      var e = this._parts.path.length - this.filename().length;\n      var directory = this._parts.path.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(directory));\n\n      // fully qualifier directories begin with a slash\n      if (!this.is('relative')) {\n        if (!v) {\n          v = '/';\n        }\n\n        if (v.charAt(0) !== '/') {\n          v = '/' + v;\n        }\n      }\n\n      // directories always end with a slash\n      if (v && v.charAt(v.length - 1) !== '/') {\n        v += '/';\n      }\n\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.filename = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v !== 'string') {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var pos = this._parts.path.lastIndexOf('/');\n      var res = this._parts.path.substring(pos+1);\n\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      var mutatedDirectory = false;\n\n      if (v.charAt(0) === '/') {\n        v = v.substring(1);\n      }\n\n      if (v.match(/\\.?\\//)) {\n        mutatedDirectory = true;\n      }\n\n      var replace = new RegExp(escapeRegEx(this.filename()) + '$');\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n\n      if (mutatedDirectory) {\n        this.normalizePath(build);\n      } else {\n        this.build(!build);\n      }\n\n      return this;\n    }\n  };\n  p.suffix = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var filename = this.filename();\n      var pos = filename.lastIndexOf('.');\n      var s, res;\n\n      if (pos === -1) {\n        return '';\n      }\n\n      // suffix may only contain alnum characters (yup, I made this up.)\n      s = filename.substring(pos+1);\n      res = (/^[a-z0-9%]+$/i).test(s) ? s : '';\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      if (v.charAt(0) === '.') {\n        v = v.substring(1);\n      }\n\n      var suffix = this.suffix();\n      var replace;\n\n      if (!suffix) {\n        if (!v) {\n          return this;\n        }\n\n        this._parts.path += '.' + URI.recodePath(v);\n      } else if (!v) {\n        replace = new RegExp(escapeRegEx('.' + suffix) + '$');\n      } else {\n        replace = new RegExp(escapeRegEx(suffix) + '$');\n      }\n\n      if (replace) {\n        v = URI.recodePath(v);\n        this._parts.path = this._parts.path.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.segment = function(segment, v, build) {\n    var separator = this._parts.urn ? ':' : '/';\n    var path = this.path();\n    var absolute = path.substring(0, 1) === '/';\n    var segments = path.split(separator);\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      throw new Error('Bad segment \"' + segment + '\", must be 0-based integer');\n    }\n\n    if (absolute) {\n      segments.shift();\n    }\n\n    if (segment < 0) {\n      // allow negative indexes to address from the end\n      segment = Math.max(segments.length + segment, 0);\n    }\n\n    if (v === undefined) {\n      /*jshint laxbreak: true */\n      return segment === undefined\n        ? segments\n        : segments[segment];\n      /*jshint laxbreak: false */\n    } else if (segment === null || segments[segment] === undefined) {\n      if (isArray(v)) {\n        segments = [];\n        // collapse empty elements within array\n        for (var i=0, l=v.length; i < l; i++) {\n          if (!v[i].length && (!segments.length || !segments[segments.length -1].length)) {\n            continue;\n          }\n\n          if (segments.length && !segments[segments.length -1].length) {\n            segments.pop();\n          }\n\n          segments.push(trimSlashes(v[i]));\n        }\n      } else if (v || typeof v === 'string') {\n        v = trimSlashes(v);\n        if (segments[segments.length -1] === '') {\n          // empty trailing elements have to be overwritten\n          // to prevent results such as /foo//bar\n          segments[segments.length -1] = v;\n        } else {\n          segments.push(v);\n        }\n      }\n    } else {\n      if (v) {\n        segments[segment] = trimSlashes(v);\n      } else {\n        segments.splice(segment, 1);\n      }\n    }\n\n    if (absolute) {\n      segments.unshift('');\n    }\n\n    return this.path(segments.join(separator), build);\n  };\n  p.segmentCoded = function(segment, v, build) {\n    var segments, i, l;\n\n    if (typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (v === undefined) {\n      segments = this.segment(segment, v, build);\n      if (!isArray(segments)) {\n        segments = segments !== undefined ? URI.decode(segments) : undefined;\n      } else {\n        for (i = 0, l = segments.length; i < l; i++) {\n          segments[i] = URI.decode(segments[i]);\n        }\n      }\n\n      return segments;\n    }\n\n    if (!isArray(v)) {\n      v = (typeof v === 'string' || v instanceof String) ? URI.encode(v) : v;\n    } else {\n      for (i = 0, l = v.length; i < l; i++) {\n        v[i] = URI.encode(v[i]);\n      }\n    }\n\n    return this.segment(segment, v, build);\n  };\n\n  // mutating query string\n  var q = p.query;\n  p.query = function(v, build) {\n    if (v === true) {\n      return URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    } else if (typeof v === 'function') {\n      var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n      var result = v.call(this, data);\n      this._parts.query = URI.buildQuery(result || data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else if (v !== undefined && typeof v !== 'string') {\n      this._parts.query = URI.buildQuery(v, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else {\n      return q.call(this, v, build);\n    }\n  };\n  p.setQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n\n    if (typeof name === 'string' || name instanceof String) {\n      data[name] = value !== undefined ? value : null;\n    } else if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          data[key] = name[key];\n        }\n      }\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.addQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.addQuery(data, name, value === undefined ? null : value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.removeQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.removeQuery(data, name, value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.hasQuery = function(name, value, withinArray) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    return URI.hasQuery(data, name, value, withinArray);\n  };\n  p.setSearch = p.setQuery;\n  p.addSearch = p.addQuery;\n  p.removeSearch = p.removeQuery;\n  p.hasSearch = p.hasQuery;\n\n  // sanitizing URLs\n  p.normalize = function() {\n    if (this._parts.urn) {\n      return this\n        .normalizeProtocol(false)\n        .normalizePath(false)\n        .normalizeQuery(false)\n        .normalizeFragment(false)\n        .build();\n    }\n\n    return this\n      .normalizeProtocol(false)\n      .normalizeHostname(false)\n      .normalizePort(false)\n      .normalizePath(false)\n      .normalizeQuery(false)\n      .normalizeFragment(false)\n      .build();\n  };\n  p.normalizeProtocol = function(build) {\n    if (typeof this._parts.protocol === 'string') {\n      this._parts.protocol = this._parts.protocol.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeHostname = function(build) {\n    if (this._parts.hostname) {\n      if (this.is('IDN') && punycode) {\n        this._parts.hostname = punycode.toASCII(this._parts.hostname);\n      } else if (this.is('IPv6') && IPv6) {\n        this._parts.hostname = IPv6.best(this._parts.hostname);\n      }\n\n      this._parts.hostname = this._parts.hostname.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePort = function(build) {\n    // remove port of it's the protocol's default\n    if (typeof this._parts.protocol === 'string' && this._parts.port === URI.defaultPorts[this._parts.protocol]) {\n      this._parts.port = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePath = function(build) {\n    var _path = this._parts.path;\n    if (!_path) {\n      return this;\n    }\n\n    if (this._parts.urn) {\n      this._parts.path = URI.recodeUrnPath(this._parts.path);\n      this.build(!build);\n      return this;\n    }\n\n    if (this._parts.path === '/') {\n      return this;\n    }\n\n    _path = URI.recodePath(_path);\n\n    var _was_relative;\n    var _leadingParents = '';\n    var _parent, _pos;\n\n    // handle relative paths\n    if (_path.charAt(0) !== '/') {\n      _was_relative = true;\n      _path = '/' + _path;\n    }\n\n    // handle relative files (as opposed to directories)\n    if (_path.slice(-3) === '/..' || _path.slice(-2) === '/.') {\n      _path += '/';\n    }\n\n    // resolve simples\n    _path = _path\n      .replace(/(\\/(\\.\\/)+)|(\\/\\.$)/g, '/')\n      .replace(/\\/{2,}/g, '/');\n\n    // remember leading parents\n    if (_was_relative) {\n      _leadingParents = _path.substring(1).match(/^(\\.\\.\\/)+/) || '';\n      if (_leadingParents) {\n        _leadingParents = _leadingParents[0];\n      }\n    }\n\n    // resolve parents\n    while (true) {\n      _parent = _path.search(/\\/\\.\\.(\\/|$)/);\n      if (_parent === -1) {\n        // no more ../ to resolve\n        break;\n      } else if (_parent === 0) {\n        // top level cannot be relative, skip it\n        _path = _path.substring(3);\n        continue;\n      }\n\n      _pos = _path.substring(0, _parent).lastIndexOf('/');\n      if (_pos === -1) {\n        _pos = _parent;\n      }\n      _path = _path.substring(0, _pos) + _path.substring(_parent + 3);\n    }\n\n    // revert to relative\n    if (_was_relative && this.is('relative')) {\n      _path = _leadingParents + _path.substring(1);\n    }\n\n    this._parts.path = _path;\n    this.build(!build);\n    return this;\n  };\n  p.normalizePathname = p.normalizePath;\n  p.normalizeQuery = function(build) {\n    if (typeof this._parts.query === 'string') {\n      if (!this._parts.query.length) {\n        this._parts.query = null;\n      } else {\n        this.query(URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace));\n      }\n\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeFragment = function(build) {\n    if (!this._parts.fragment) {\n      this._parts.fragment = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeSearch = p.normalizeQuery;\n  p.normalizeHash = p.normalizeFragment;\n\n  p.iso8859 = function() {\n    // expect unicode input, iso8859 output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = escape;\n    URI.decode = decodeURIComponent;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.unicode = function() {\n    // expect iso8859 input, unicode output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = unescape;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.readable = function() {\n    var uri = this.clone();\n    // removing username, password, because they shouldn't be displayed according to RFC 3986\n    uri.username('').password('').normalize();\n    var t = '';\n    if (uri._parts.protocol) {\n      t += uri._parts.protocol + '://';\n    }\n\n    if (uri._parts.hostname) {\n      if (uri.is('punycode') && punycode) {\n        t += punycode.toUnicode(uri._parts.hostname);\n        if (uri._parts.port) {\n          t += ':' + uri._parts.port;\n        }\n      } else {\n        t += uri.host();\n      }\n    }\n\n    if (uri._parts.hostname && uri._parts.path && uri._parts.path.charAt(0) !== '/') {\n      t += '/';\n    }\n\n    t += uri.path(true);\n    if (uri._parts.query) {\n      var q = '';\n      for (var i = 0, qp = uri._parts.query.split('&'), l = qp.length; i < l; i++) {\n        var kv = (qp[i] || '').split('=');\n        q += '&' + URI.decodeQuery(kv[0], this._parts.escapeQuerySpace)\n          .replace(/&/g, '%26');\n\n        if (kv[1] !== undefined) {\n          q += '=' + URI.decodeQuery(kv[1], this._parts.escapeQuerySpace)\n            .replace(/&/g, '%26');\n        }\n      }\n      t += '?' + q.substring(1);\n    }\n\n    t += URI.decodeQuery(uri.hash(), true);\n    return t;\n  };\n\n  // resolving relative and absolute URLs\n  p.absoluteTo = function(base) {\n    var resolved = this.clone();\n    var properties = ['protocol', 'username', 'password', 'hostname', 'port'];\n    var basedir, i, p;\n\n    if (this._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    if (!(base instanceof URI)) {\n      base = new URI(base);\n    }\n\n    if (resolved._parts.protocol) {\n      // Directly returns even if this._parts.hostname is empty.\n      return resolved;\n    } else {\n      resolved._parts.protocol = base._parts.protocol;\n    }\n\n    if (this._parts.hostname) {\n      return resolved;\n    }\n\n    for (i = 0; (p = properties[i]); i++) {\n      resolved._parts[p] = base._parts[p];\n    }\n\n    if (!resolved._parts.path) {\n      resolved._parts.path = base._parts.path;\n      if (!resolved._parts.query) {\n        resolved._parts.query = base._parts.query;\n      }\n    } else {\n      if (resolved._parts.path.substring(-2) === '..') {\n        resolved._parts.path += '/';\n      }\n\n      if (resolved.path().charAt(0) !== '/') {\n        basedir = base.directory();\n        basedir = basedir ? basedir : base.path().indexOf('/') === 0 ? '/' : '';\n        resolved._parts.path = (basedir ? (basedir + '/') : '') + resolved._parts.path;\n        resolved.normalizePath();\n      }\n    }\n\n    resolved.build();\n    return resolved;\n  };\n  p.relativeTo = function(base) {\n    var relative = this.clone().normalize();\n    var relativeParts, baseParts, common, relativePath, basePath;\n\n    if (relative._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    base = new URI(base).normalize();\n    relativeParts = relative._parts;\n    baseParts = base._parts;\n    relativePath = relative.path();\n    basePath = base.path();\n\n    if (relativePath.charAt(0) !== '/') {\n      throw new Error('URI is already relative');\n    }\n\n    if (basePath.charAt(0) !== '/') {\n      throw new Error('Cannot calculate a URI relative to another relative URI');\n    }\n\n    if (relativeParts.protocol === baseParts.protocol) {\n      relativeParts.protocol = null;\n    }\n\n    if (relativeParts.username !== baseParts.username || relativeParts.password !== baseParts.password) {\n      return relative.build();\n    }\n\n    if (relativeParts.protocol !== null || relativeParts.username !== null || relativeParts.password !== null) {\n      return relative.build();\n    }\n\n    if (relativeParts.hostname === baseParts.hostname && relativeParts.port === baseParts.port) {\n      relativeParts.hostname = null;\n      relativeParts.port = null;\n    } else {\n      return relative.build();\n    }\n\n    if (relativePath === basePath) {\n      relativeParts.path = '';\n      return relative.build();\n    }\n\n    // determine common sub path\n    common = URI.commonPath(relativePath, basePath);\n\n    // If the paths have nothing in common, return a relative URL with the absolute path.\n    if (!common) {\n      return relative.build();\n    }\n\n    var parents = baseParts.path\n      .substring(common.length)\n      .replace(/[^\\/]*$/, '')\n      .replace(/.*?\\//g, '../');\n\n    relativeParts.path = (parents + relativeParts.path.substring(common.length)) || './';\n\n    return relative.build();\n  };\n\n  // comparing URIs\n  p.equals = function(uri) {\n    var one = this.clone();\n    var two = new URI(uri);\n    var one_map = {};\n    var two_map = {};\n    var checked = {};\n    var one_query, two_query, key;\n\n    one.normalize();\n    two.normalize();\n\n    // exact match\n    if (one.toString() === two.toString()) {\n      return true;\n    }\n\n    // extract query string\n    one_query = one.query();\n    two_query = two.query();\n    one.query('');\n    two.query('');\n\n    // definitely not equal if not even non-query parts match\n    if (one.toString() !== two.toString()) {\n      return false;\n    }\n\n    // query parameters have the same length, even if they're permuted\n    if (one_query.length !== two_query.length) {\n      return false;\n    }\n\n    one_map = URI.parseQuery(one_query, this._parts.escapeQuerySpace);\n    two_map = URI.parseQuery(two_query, this._parts.escapeQuerySpace);\n\n    for (key in one_map) {\n      if (hasOwn.call(one_map, key)) {\n        if (!isArray(one_map[key])) {\n          if (one_map[key] !== two_map[key]) {\n            return false;\n          }\n        } else if (!arraysEqual(one_map[key], two_map[key])) {\n          return false;\n        }\n\n        checked[key] = true;\n      }\n    }\n\n    for (key in two_map) {\n      if (hasOwn.call(two_map, key)) {\n        if (!checked[key]) {\n          // two contains a parameter not present in one\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  // state\n  p.preventInvalidHostname = function(v) {\n    this._parts.preventInvalidHostname = !!v;\n    return this;\n  };\n\n  p.duplicateQueryParameters = function(v) {\n    this._parts.duplicateQueryParameters = !!v;\n    return this;\n  };\n\n  p.escapeQuerySpace = function(v) {\n    this._parts.escapeQuerySpace = !!v;\n    return this;\n  };\n\n  return URI;\n}));\n","/*! https://mths.be/punycode v1.4.0 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\nimport { Sandbox, SandboxRegistry } from 'runtime-core/dist/sandbox';\nimport MiniBus from 'runtime-core/dist/minibus';\n\nfunction create(iframe) {\n  window._miniBus = new MiniBus();\n  window._miniBus._onPostMessage = function(msg) {\n    iframe.contentWindow.postMessage(msg, '*');\n  };\n  window.addEventListener('message', function(event) {\n    if (event.data.to && (event.data.to.startsWith('runtime:loadedHyperty') || event.data.to.endsWith('gui-manager'))) { return; }\n\n    window._miniBus._onMessage(event.data);\n  }, false);\n\n  window._registry = new SandboxRegistry(window._miniBus);\n  window._registry._create = function(url, sourceCode, config, factory) {\n    try {\n      eval.apply(window, [sourceCode]);\n\n      if (typeof activate === 'function') {\n        return activate(url, window._miniBus, config, factory);\n      }\n\n      if (typeof activate.default === 'function') {\n        return activate.default(url, window._miniBus, config, factory);\n      }\n\n    } catch (error) {\n      console.error('[Context APP Create] - Error: ', error);\n      throw JSON.stringify(error.message);\n    }\n  };\n}\n\nfunction getHyperty(hypertyDescriptor) {\n  return window._registry.components[hypertyDescriptor];\n}\n\n/**\n * SandboxContext for application\n * @typedef ContextApp\n * @property {function(iFrame: iframe)} create Creates the context for the sandbox hosted in the iframe\n * @property {function(Hyperty descriptor: string):Hyperty} getHyperty Returns the hyperty for the given descriptor\n * */\nexport default { create, getHyperty };\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\nimport RethinkBrowser from './RuntimeUAStub'\n\nlet rethink;\n\nif( typeof window != undefined && window != null ){\n    rethink = RethinkBrowser\n}else{\n    rethink = undefined\n}\n\nexport default rethink\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n/**\n * @external {MSG_STATUS} https://github.com/reTHINK-project/core-framework/tree/master/docs/specs/service-framework\n */\n\nimport app from './ContextApp';\nimport URI from 'urijs';\nimport { create as createIframe } from './iframe';\n\nlet iframe = undefined;\n\n/**\n * @typedef {Object} Hyperty\n * @property {string} runtimeHypertyURL - Hyperty address\n * @property {MSG_STATUS} status - Hyperty status\n * @property {Object} instance - Hyperty object\n * @property {string} name - Hyperty name\n */\nlet buildMsg = (hypertyComponent, msg) => {\n  return {\n    runtimeHypertyURL: msg.body.runtimeHypertyURL,\n    status: msg.body.status,\n    instance: hypertyComponent.instance,\n    name: hypertyComponent.name\n  };\n};\n\nlet requireHypertyID = 0;\n\n/**\n * @typedef {Object} RuntimeAdapter\n * @property {function(Hyperty descriptor: string, Hyperty addresses to be reused or empty in other case: string): Promise<Hyperty>} requireHyperty - Loads and returns a Hyperty\n * @property {function(Domain: string)} requireProtostub - Loads a protostub from the given domain\n * @property {function(): Promise} close - Unloads and closes the installed runtime\n */\nlet runtimeAdapter = {\n\n  requireHyperty: (hypertyDescriptor, reuseAddress = false) => {\n    return new Promise((resolve, reject) => {\n      // keep current requireHypertyID\n      const callbackID = requireHypertyID;\n      requireHypertyID += 1;\n      let loaded = (e) => {\n        if (e.data.to === 'runtime:loadedHyperty') {\n          if (e.data.body.id === callbackID) {\n            window.removeEventListener('message', loaded);\n            resolve(buildMsg(app.getHyperty(e.data.body.runtimeHypertyURL), e.data));\n          }\n        }\n      };\n      window.addEventListener('message', loaded);\n      iframe.contentWindow.postMessage({ to: 'core:loadHyperty', body: { descriptor: hypertyDescriptor, reuseAddress, id: callbackID } }, '*');\n    });\n  },\n\n  authorise: (idp, scope) => {\n\n    return new Promise((resolve, reject) => {\n      let loaded = (e) => {\n        console.log('[RuntimeBrowser.RuntimeUAStub.Authorise] reply:', e.data);\n        if (e.data.to === 'runtime:authorised') {\n          window.removeEventListener('message', loaded);\n\n          resolve(e.data.body);\n        } else if (e.data.to === 'runtime:not-authorised') {\n          window.removeEventListener('message', loaded);\n\n          console.error('[RuntimeBrowser.RuntimeUAStub.Authorise] Error:', e.data);\n          reject(e.data.body);\n        }\n      };\n      window.addEventListener('message', loaded);\n      console.log('Authorising IDP ', idp, ' with scope ', scope);\n      iframe.contentWindow.postMessage({ to: 'core:authorise', body: { idp: idp, scope: scope } }, '*');\n    });\n\n  },\n\n  reset: () => {\n    console.log('Runtime Browser - reset ');\n    return new Promise((resolve, reject) => {\n      let resetEvt = (e) => {\n        if (e.data.to === 'runtime:runtimeReset') {\n          window.removeEventListener('message', resetEvt);\n          resolve(e.data.body);\n        }\n      };\n      window.addEventListener('message', resetEvt);\n      iframe.contentWindow.postMessage({ to: 'core:reset', body: { } }, '*');\n    });\n  },\n\n  login: (idp) => {\n\n    return new Promise((resolve, reject) => {\n      let loaded = (e) => {\n        if (e.data.to === 'runtime:loggedIn') {\n          window.removeEventListener('message', loaded);\n          resolve(e.data.body);\n        }\n      };\n      window.addEventListener('message', loaded);\n      console.log('Logging with IDP: ', idp);\n      iframe.contentWindow.postMessage({ to: 'core:login', body: { idp: idp } }, '*');\n    });\n\n  },\n\n  listenShowAdmin: () => {\n    return new Promise((resolve, reject) => {\n      let loaded = (e) => {\n        if (e.data.to === 'runtime:gui-manager') {\n          if (e.data.body.method === 'tokenExpired') {\n            window.removeEventListener('message', loaded);\n            resolve(true);\n          }\n        }\n      };\n      window.addEventListener('message', loaded);\n    });\n  },\n\n\n  requireProtostub: (domain) => {\n    iframe.contentWindow.postMessage({ to: 'core:loadStub', body: { domain: domain } }, '*');\n  },\n\n  close: (logOut = false) => {\n    console.log('Stub - logging out: ', logOut);\n    return new Promise((resolve, reject) => {\n      let loaded = (e) => {\n        if (e.data.to === 'runtime:runtimeClosed') {\n          window.removeEventListener('message', loaded);\n          resolve(resolve(e.data.body));\n        }\n      };\n      window.addEventListener('message', loaded);\n      iframe.contentWindow.postMessage({ to: 'core:close', body: { logOut: logOut } }, '*');\n    });\n  }\n};\n\nlet GuiManager = function () {\n  window.addEventListener('message', (e) => {\n    if (e.data.to === 'runtime:gui-manager') {\n\n      if (e.data.body.method === 'showAdminPage') {\n        iframe.style.width = '100%';\n        iframe.style.height = '100%';\n        iframe.style.zIndex = 99999;\n      } else {\n        if (e.data.body.method === 'hideAdminPage') {\n          iframe.style.width = '48px';\n          iframe.style.height = '48px';\n          iframe.style.zIndex = 1;\n        }\n      }\n\n    }\n  });\n};\n\n/**\n * @typedef {Object} RuntimeUA\n * @property {function(Runtime domain: string, Runtime url: string, Development mode: boolean): Promise<RuntimeAdapter>} install - Installs a runtime locally\n */\nlet RethinkBrowser = {\n  install: function ({ domain, runtimeURL, development, indexURL, sandboxURL, hideAdmin } = {}) {\n    console.info('Install: ', domain, runtimeURL, development, indexURL, sandboxURL, hideAdmin);\n    return new Promise((resolve, reject) => {\n      let runtime = this._getRuntime(runtimeURL, domain, development, indexURL, sandboxURL, hideAdmin);\n      iframe = createIframe(`${runtime.indexURL}?domain=${runtime.domain}&runtime=${runtime.url}&development=${development}`, 99999, hideAdmin);\n      let installed = (e) => {\n        if (e.data.to === 'runtime:installed') {\n          window.removeEventListener('message', installed);\n          resolve(runtimeAdapter);\n        }\n      };\n      window.addEventListener('message', installed);\n      window.addEventListener('message', (e) => {\n        if (e.data.to && e.data.to === 'runtime:createSandboxWindow') {\n          const ifr = createIframe(runtime.sandboxURL, undefined, hideAdmin);\n          ifr.addEventListener('load', () => {\n            ifr.contentWindow.postMessage(e.data, '*', e.ports);\n          }, false);\n        }\n      });\n      app.create(iframe);\n      GuiManager();\n    });\n  },\n\n  _getRuntime(runtimeURL, domain, development, indexURL, sandboxURL) {\n    if (development) {\n      runtimeURL = runtimeURL || 'hyperty-catalogue://catalogue.' + domain + '/.well-known/runtime/Runtime';\n      domain = domain || new URI(runtimeURL).host();\n      indexURL = indexURL || 'https://' + domain + '/.well-known/runtime/index.html';\n      sandboxURL = sandboxURL || 'https://' + domain + '/.well-known/runtime/sandbox.html';\n    } else {\n      runtimeURL = runtimeURL || `https://catalogue.${domain}/.well-known/runtime/default`;\n      domain = domain || new URI(runtimeURL).host().replace('catalogue.', '');\n      indexURL = indexURL || 'https://' + domain + '/.well-known/runtime/index.html';\n      sandboxURL = sandboxURL || 'https://' + domain + '/.well-known/runtime/sandbox.html';\n    }\n\n    console.info('get Runtime: ', runtimeURL, domain, indexURL, sandboxURL);\n\n    return {\n      url: runtimeURL,\n      domain: domain,\n      indexURL: indexURL,\n      sandboxURL: sandboxURL\n    };\n  }\n};\n\nexport default RethinkBrowser;\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n/**\n * @external {iframe} https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe\n */\n\n/**\n * Creates an iframe\n * @param {string} src - Url to load into the iframe\n * @return {iframe} - iFrame element\n */\nexport function create(src, zIndex = -10, hideAdmin = false) {\n  var iframe = document.createElement('iframe');\n  iframe.setAttribute('id', 'rethink');\n  iframe.style.position = 'absolute';\n  iframe.style.top = '0';\n  iframe.style.right = '0';\n  iframe.style.border = '0';\n  iframe.style.zIndex = zIndex;\n  iframe.width = '48px';\n  iframe.height = '48px';\n  iframe.title = 'reTHINK-project';\n  iframe.setAttribute('seamless', '');\n  iframe.setAttribute('src', src);\n  iframe.setAttribute('sandbox', 'allow-forms allow-scripts allow-popups-to-escape-sandbox allow-popups allow-same-origin allow-top-navigation');\n  iframe.style.display = 'block';\n  if (hideAdmin == true) {\n    iframe.style.display = 'none';\n  }\n  document.querySelector('body').appendChild(iframe);\n\n  return iframe;\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvcnVudGltZS1jb3JlL2Rpc3QvbWluaWJ1cy5qcyIsIm5vZGVfbW9kdWxlcy9ydW50aW1lLWNvcmUvZGlzdC9zYW5kYm94LmpzIiwibm9kZV9tb2R1bGVzL3VyaWpzL3NyYy9JUHY2LmpzIiwibm9kZV9tb2R1bGVzL3VyaWpzL3NyYy9TZWNvbmRMZXZlbERvbWFpbnMuanMiLCJub2RlX21vZHVsZXMvdXJpanMvc3JjL1VSSS5qcyIsIm5vZGVfbW9kdWxlcy91cmlqcy9zcmMvcHVueWNvZGUuanMiLCJzcmMvQ29udGV4dEFwcC5qcyIsInNyYy9SdW50aW1lTG9hZGVyLmpzIiwic3JjL1J1bnRpbWVVQVN0dWIuanMiLCJzcmMvaWZyYW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbHlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUMvZkE7O0FBQ0E7Ozs7OztBQXZCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlCQSxTQUFTLE1BQVQsQ0FBZ0IsTUFBaEIsRUFBd0I7QUFDdEIsU0FBTyxRQUFQLEdBQWtCLElBQUksaUJBQUosRUFBbEI7QUFDQSxTQUFPLFFBQVAsQ0FBZ0IsY0FBaEIsR0FBaUMsVUFBUyxHQUFULEVBQWM7QUFDN0MsV0FBTyxhQUFQLENBQXFCLFdBQXJCLENBQWlDLEdBQWpDLEVBQXNDLEdBQXRDO0FBQ0QsR0FGRDtBQUdBLFNBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsVUFBUyxLQUFULEVBQWdCO0FBQ2pELFFBQUksTUFBTSxJQUFOLENBQVcsRUFBWCxLQUFrQixNQUFNLElBQU4sQ0FBVyxFQUFYLENBQWMsVUFBZCxDQUF5Qix1QkFBekIsS0FBcUQsTUFBTSxJQUFOLENBQVcsRUFBWCxDQUFjLFFBQWQsQ0FBdUIsYUFBdkIsQ0FBdkUsQ0FBSixFQUFtSDtBQUFFO0FBQVM7O0FBRTlILFdBQU8sUUFBUCxDQUFnQixVQUFoQixDQUEyQixNQUFNLElBQWpDO0FBQ0QsR0FKRCxFQUlHLEtBSkg7O0FBTUEsU0FBTyxTQUFQLEdBQW1CLElBQUksd0JBQUosQ0FBb0IsT0FBTyxRQUEzQixDQUFuQjtBQUNBLFNBQU8sU0FBUCxDQUFpQixPQUFqQixHQUEyQixVQUFTLEdBQVQsRUFBYyxVQUFkLEVBQTBCLE1BQTFCLEVBQWtDLE9BQWxDLEVBQTJDO0FBQ3BFLFFBQUk7QUFDRixXQUFLLEtBQUwsQ0FBVyxNQUFYLEVBQW1CLENBQUMsVUFBRCxDQUFuQjs7QUFFQSxVQUFJLE9BQU8sUUFBUCxLQUFvQixVQUF4QixFQUFvQztBQUNsQyxlQUFPLFNBQVMsR0FBVCxFQUFjLE9BQU8sUUFBckIsRUFBK0IsTUFBL0IsRUFBdUMsT0FBdkMsQ0FBUDtBQUNEOztBQUVELFVBQUksT0FBTyxTQUFTLE9BQWhCLEtBQTRCLFVBQWhDLEVBQTRDO0FBQzFDLGVBQU8sU0FBUyxPQUFULENBQWlCLEdBQWpCLEVBQXNCLE9BQU8sUUFBN0IsRUFBdUMsTUFBdkMsRUFBK0MsT0FBL0MsQ0FBUDtBQUNEO0FBRUYsS0FYRCxDQVdFLE9BQU8sS0FBUCxFQUFjO0FBQ2QsY0FBUSxLQUFSLENBQWMsZ0NBQWQsRUFBZ0QsS0FBaEQ7QUFDQSxZQUFNLEtBQUssU0FBTCxDQUFlLE1BQU0sT0FBckIsQ0FBTjtBQUNEO0FBQ0YsR0FoQkQ7QUFpQkQ7O0FBRUQsU0FBUyxVQUFULENBQW9CLGlCQUFwQixFQUF1QztBQUNyQyxTQUFPLE9BQU8sU0FBUCxDQUFpQixVQUFqQixDQUE0QixpQkFBNUIsQ0FBUDtBQUNEOztBQUVEOzs7Ozs7a0JBTWUsRUFBRSxjQUFGLEVBQVUsc0JBQVYsRTs7Ozs7Ozs7OzhRQ2xFZjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0JBOzs7Ozs7QUFFQSxJQUFJLGdCQUFKOztBQUVBLElBQUksUUFBTyxNQUFQLHlDQUFPLE1BQVAsTUFBaUIsU0FBakIsSUFBOEIsVUFBVSxJQUE1QyxFQUFrRDtBQUM5QyxjQUFVLHVCQUFWO0FBQ0gsQ0FGRCxNQUVLO0FBQ0QsY0FBVSxTQUFWO0FBQ0g7O2tCQUVjLE87Ozs7Ozs7OztBQ0xmOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBLElBQUksU0FBUyxTQUFiOztBQUVBOzs7Ozs7O0FBakNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVCQTs7OztBQWlCQSxJQUFJLFdBQVcsU0FBWCxRQUFXLENBQUMsZ0JBQUQsRUFBbUIsR0FBbkIsRUFBMkI7QUFDeEMsU0FBTztBQUNMLHVCQUFtQixJQUFJLElBQUosQ0FBUyxpQkFEdkI7QUFFTCxZQUFRLElBQUksSUFBSixDQUFTLE1BRlo7QUFHTCxjQUFVLGlCQUFpQixRQUh0QjtBQUlMLFVBQU0saUJBQWlCO0FBSmxCLEdBQVA7QUFNRCxDQVBEOztBQVNBLElBQUksbUJBQW1CLENBQXZCOztBQUVBOzs7Ozs7QUFNQSxJQUFJLGlCQUFpQjs7QUFFbkIsa0JBQWdCLHdCQUFDLGlCQUFELEVBQTZDO0FBQUEsUUFBekIsWUFBeUIsdUVBQVYsS0FBVTs7QUFDM0QsV0FBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3RDO0FBQ0EsVUFBTSxhQUFhLGdCQUFuQjtBQUNBLDBCQUFvQixDQUFwQjtBQUNBLFVBQUksU0FBUyxTQUFULE1BQVMsQ0FBQyxDQUFELEVBQU87QUFDbEIsWUFBSSxFQUFFLElBQUYsQ0FBTyxFQUFQLEtBQWMsdUJBQWxCLEVBQTJDO0FBQ3pDLGNBQUksRUFBRSxJQUFGLENBQU8sSUFBUCxDQUFZLEVBQVosS0FBbUIsVUFBdkIsRUFBbUM7QUFDakMsbUJBQU8sbUJBQVAsQ0FBMkIsU0FBM0IsRUFBc0MsTUFBdEM7QUFDQSxvQkFBUSxTQUFTLHFCQUFJLFVBQUosQ0FBZSxFQUFFLElBQUYsQ0FBTyxJQUFQLENBQVksaUJBQTNCLENBQVQsRUFBd0QsRUFBRSxJQUExRCxDQUFSO0FBQ0Q7QUFDRjtBQUNGLE9BUEQ7QUFRQSxhQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLE1BQW5DO0FBQ0EsYUFBTyxhQUFQLENBQXFCLFdBQXJCLENBQWlDLEVBQUUsSUFBSSxrQkFBTixFQUEwQixNQUFNLEVBQUUsWUFBWSxpQkFBZCxFQUFpQywwQkFBakMsRUFBK0MsSUFBSSxVQUFuRCxFQUFoQyxFQUFqQyxFQUFvSSxHQUFwSTtBQUNELEtBZE0sQ0FBUDtBQWVELEdBbEJrQjs7QUFvQm5CLGFBQVcsbUJBQUMsR0FBRCxFQUFNLEtBQU4sRUFBZ0I7O0FBRXpCLFdBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxVQUFJLFNBQVMsU0FBVCxNQUFTLENBQUMsQ0FBRCxFQUFPO0FBQ2xCLGdCQUFRLEdBQVIsQ0FBWSxpREFBWixFQUErRCxFQUFFLElBQWpFO0FBQ0EsWUFBSSxFQUFFLElBQUYsQ0FBTyxFQUFQLEtBQWMsb0JBQWxCLEVBQXdDO0FBQ3RDLGlCQUFPLG1CQUFQLENBQTJCLFNBQTNCLEVBQXNDLE1BQXRDOztBQUVBLGtCQUFRLEVBQUUsSUFBRixDQUFPLElBQWY7QUFDRCxTQUpELE1BSU8sSUFBSSxFQUFFLElBQUYsQ0FBTyxFQUFQLEtBQWMsd0JBQWxCLEVBQTRDO0FBQ2pELGlCQUFPLG1CQUFQLENBQTJCLFNBQTNCLEVBQXNDLE1BQXRDOztBQUVBLGtCQUFRLEtBQVIsQ0FBYyxpREFBZCxFQUFpRSxFQUFFLElBQW5FO0FBQ0EsaUJBQU8sRUFBRSxJQUFGLENBQU8sSUFBZDtBQUNEO0FBQ0YsT0FaRDtBQWFBLGFBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsTUFBbkM7QUFDQSxjQUFRLEdBQVIsQ0FBWSxrQkFBWixFQUFnQyxHQUFoQyxFQUFxQyxjQUFyQyxFQUFxRCxLQUFyRDtBQUNBLGFBQU8sYUFBUCxDQUFxQixXQUFyQixDQUFpQyxFQUFFLElBQUksZ0JBQU4sRUFBd0IsTUFBTSxFQUFFLEtBQUssR0FBUCxFQUFZLE9BQU8sS0FBbkIsRUFBOUIsRUFBakMsRUFBNkYsR0FBN0Y7QUFDRCxLQWpCTSxDQUFQO0FBbUJELEdBekNrQjs7QUEyQ25CLFNBQU8saUJBQU07QUFDWCxZQUFRLEdBQVIsQ0FBWSwwQkFBWjtBQUNBLFdBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxVQUFJLFdBQVcsU0FBWCxRQUFXLENBQUMsQ0FBRCxFQUFPO0FBQ3BCLFlBQUksRUFBRSxJQUFGLENBQU8sRUFBUCxLQUFjLHNCQUFsQixFQUEwQztBQUN4QyxpQkFBTyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxRQUF0QztBQUNBLGtCQUFRLEVBQUUsSUFBRixDQUFPLElBQWY7QUFDRDtBQUNGLE9BTEQ7QUFNQSxhQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLFFBQW5DO0FBQ0EsYUFBTyxhQUFQLENBQXFCLFdBQXJCLENBQWlDLEVBQUUsSUFBSSxZQUFOLEVBQW9CLE1BQU0sRUFBMUIsRUFBakMsRUFBa0UsR0FBbEU7QUFDRCxLQVRNLENBQVA7QUFVRCxHQXZEa0I7O0FBeURuQixTQUFPLGVBQUMsR0FBRCxFQUFTOztBQUVkLFdBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxVQUFJLFNBQVMsU0FBVCxNQUFTLENBQUMsQ0FBRCxFQUFPO0FBQ2xCLFlBQUksRUFBRSxJQUFGLENBQU8sRUFBUCxLQUFjLGtCQUFsQixFQUFzQztBQUNwQyxpQkFBTyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxNQUF0QztBQUNBLGtCQUFRLEVBQUUsSUFBRixDQUFPLElBQWY7QUFDRDtBQUNGLE9BTEQ7QUFNQSxhQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLE1BQW5DO0FBQ0EsY0FBUSxHQUFSLENBQVksb0JBQVosRUFBa0MsR0FBbEM7QUFDQSxhQUFPLGFBQVAsQ0FBcUIsV0FBckIsQ0FBaUMsRUFBRSxJQUFJLFlBQU4sRUFBb0IsTUFBTSxFQUFFLEtBQUssR0FBUCxFQUExQixFQUFqQyxFQUEyRSxHQUEzRTtBQUNELEtBVk0sQ0FBUDtBQVlELEdBdkVrQjs7QUF5RW5CLG1CQUFpQiwyQkFBTTtBQUNyQixXQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDdEMsVUFBSSxTQUFTLFNBQVQsTUFBUyxDQUFDLENBQUQsRUFBTztBQUNsQixZQUFJLEVBQUUsSUFBRixDQUFPLEVBQVAsS0FBYyxxQkFBbEIsRUFBeUM7QUFDdkMsY0FBSSxFQUFFLElBQUYsQ0FBTyxJQUFQLENBQVksTUFBWixLQUF1QixjQUEzQixFQUEyQztBQUN6QyxtQkFBTyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxNQUF0QztBQUNBLG9CQUFRLElBQVI7QUFDRDtBQUNGO0FBQ0YsT0FQRDtBQVFBLGFBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsTUFBbkM7QUFDRCxLQVZNLENBQVA7QUFXRCxHQXJGa0I7O0FBd0ZuQixvQkFBa0IsMEJBQUMsTUFBRCxFQUFZO0FBQzVCLFdBQU8sYUFBUCxDQUFxQixXQUFyQixDQUFpQyxFQUFFLElBQUksZUFBTixFQUF1QixNQUFNLEVBQUUsUUFBUSxNQUFWLEVBQTdCLEVBQWpDLEVBQW9GLEdBQXBGO0FBQ0QsR0ExRmtCOztBQTRGbkIsU0FBTyxpQkFBb0I7QUFBQSxRQUFuQixNQUFtQix1RUFBVixLQUFVOztBQUN6QixZQUFRLEdBQVIsQ0FBWSxzQkFBWixFQUFvQyxNQUFwQztBQUNBLFdBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxVQUFJLFNBQVMsU0FBVCxNQUFTLENBQUMsQ0FBRCxFQUFPO0FBQ2xCLFlBQUksRUFBRSxJQUFGLENBQU8sRUFBUCxLQUFjLHVCQUFsQixFQUEyQztBQUN6QyxpQkFBTyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxNQUF0QztBQUNBLGtCQUFRLFFBQVEsRUFBRSxJQUFGLENBQU8sSUFBZixDQUFSO0FBQ0Q7QUFDRixPQUxEO0FBTUEsYUFBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxNQUFuQztBQUNBLGFBQU8sYUFBUCxDQUFxQixXQUFyQixDQUFpQyxFQUFFLElBQUksWUFBTixFQUFvQixNQUFNLEVBQUUsUUFBUSxNQUFWLEVBQTFCLEVBQWpDLEVBQWlGLEdBQWpGO0FBQ0QsS0FUTSxDQUFQO0FBVUQ7QUF4R2tCLENBQXJCOztBQTJHQSxJQUFJLGFBQWEsU0FBYixVQUFhLEdBQVk7QUFDM0IsU0FBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxVQUFDLENBQUQsRUFBTztBQUN4QyxRQUFJLEVBQUUsSUFBRixDQUFPLEVBQVAsS0FBYyxxQkFBbEIsRUFBeUM7O0FBRXZDLFVBQUksRUFBRSxJQUFGLENBQU8sSUFBUCxDQUFZLE1BQVosS0FBdUIsZUFBM0IsRUFBNEM7QUFDMUMsZUFBTyxLQUFQLENBQWEsS0FBYixHQUFxQixNQUFyQjtBQUNBLGVBQU8sS0FBUCxDQUFhLE1BQWIsR0FBc0IsTUFBdEI7QUFDQSxlQUFPLEtBQVAsQ0FBYSxNQUFiLEdBQXNCLEtBQXRCO0FBQ0QsT0FKRCxNQUlPO0FBQ0wsWUFBSSxFQUFFLElBQUYsQ0FBTyxJQUFQLENBQVksTUFBWixLQUF1QixlQUEzQixFQUE0QztBQUMxQyxpQkFBTyxLQUFQLENBQWEsS0FBYixHQUFxQixNQUFyQjtBQUNBLGlCQUFPLEtBQVAsQ0FBYSxNQUFiLEdBQXNCLE1BQXRCO0FBQ0EsaUJBQU8sS0FBUCxDQUFhLE1BQWIsR0FBc0IsQ0FBdEI7QUFDRDtBQUNGO0FBRUY7QUFDRixHQWhCRDtBQWlCRCxDQWxCRDs7QUFvQkE7Ozs7QUFJQSxJQUFJLGlCQUFpQjtBQUNuQixXQUFTLG1CQUFxRjtBQUFBOztBQUFBLG1GQUFKLEVBQUk7QUFBQSxRQUF6RSxNQUF5RSxRQUF6RSxNQUF5RTtBQUFBLFFBQWpFLFVBQWlFLFFBQWpFLFVBQWlFO0FBQUEsUUFBckQsV0FBcUQsUUFBckQsV0FBcUQ7QUFBQSxRQUF4QyxRQUF3QyxRQUF4QyxRQUF3QztBQUFBLFFBQTlCLFVBQThCLFFBQTlCLFVBQThCO0FBQUEsUUFBbEIsU0FBa0IsUUFBbEIsU0FBa0I7O0FBQzVGLFlBQVEsSUFBUixDQUFhLFdBQWIsRUFBMEIsTUFBMUIsRUFBa0MsVUFBbEMsRUFBOEMsV0FBOUMsRUFBMkQsUUFBM0QsRUFBcUUsVUFBckUsRUFBaUYsU0FBakY7QUFDQSxXQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDdEMsVUFBSSxVQUFVLE1BQUssV0FBTCxDQUFpQixVQUFqQixFQUE2QixNQUE3QixFQUFxQyxXQUFyQyxFQUFrRCxRQUFsRCxFQUE0RCxVQUE1RCxFQUF3RSxTQUF4RSxDQUFkO0FBQ0EsZUFBUyxvQkFBZ0IsUUFBUSxRQUF4QixnQkFBMkMsUUFBUSxNQUFuRCxpQkFBcUUsUUFBUSxHQUE3RSxxQkFBZ0csV0FBaEcsRUFBK0csS0FBL0csRUFBc0gsU0FBdEgsQ0FBVDtBQUNBLFVBQUksWUFBWSxTQUFaLFNBQVksQ0FBQyxDQUFELEVBQU87QUFDckIsWUFBSSxFQUFFLElBQUYsQ0FBTyxFQUFQLEtBQWMsbUJBQWxCLEVBQXVDO0FBQ3JDLGlCQUFPLG1CQUFQLENBQTJCLFNBQTNCLEVBQXNDLFNBQXRDO0FBQ0Esa0JBQVEsY0FBUjtBQUNEO0FBQ0YsT0FMRDtBQU1BLGFBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsU0FBbkM7QUFDQSxhQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLFVBQUMsQ0FBRCxFQUFPO0FBQ3hDLFlBQUksRUFBRSxJQUFGLENBQU8sRUFBUCxJQUFhLEVBQUUsSUFBRixDQUFPLEVBQVAsS0FBYyw2QkFBL0IsRUFBOEQ7QUFDNUQsY0FBTSxNQUFNLG9CQUFhLFFBQVEsVUFBckIsRUFBaUMsU0FBakMsRUFBNEMsU0FBNUMsQ0FBWjtBQUNBLGNBQUksZ0JBQUosQ0FBcUIsTUFBckIsRUFBNkIsWUFBTTtBQUNqQyxnQkFBSSxhQUFKLENBQWtCLFdBQWxCLENBQThCLEVBQUUsSUFBaEMsRUFBc0MsR0FBdEMsRUFBMkMsRUFBRSxLQUE3QztBQUNELFdBRkQsRUFFRyxLQUZIO0FBR0Q7QUFDRixPQVBEO0FBUUEsMkJBQUksTUFBSixDQUFXLE1BQVg7QUFDQTtBQUNELEtBcEJNLENBQVA7QUFxQkQsR0F4QmtCOztBQTBCbkIsYUExQm1CLHVCQTBCUCxVQTFCTyxFQTBCSyxNQTFCTCxFQTBCYSxXQTFCYixFQTBCMEIsUUExQjFCLEVBMEJvQyxVQTFCcEMsRUEwQmdEO0FBQ2pFLFFBQUksV0FBSixFQUFpQjtBQUNmLG1CQUFhLGNBQWMsbUNBQW1DLE1BQW5DLEdBQTRDLDhCQUF2RTtBQUNBLGVBQVMsVUFBVSxJQUFJLGVBQUosQ0FBUSxVQUFSLEVBQW9CLElBQXBCLEVBQW5CO0FBQ0EsaUJBQVcsWUFBWSxhQUFhLE1BQWIsR0FBc0IsaUNBQTdDO0FBQ0EsbUJBQWEsY0FBYyxhQUFhLE1BQWIsR0FBc0IsbUNBQWpEO0FBQ0QsS0FMRCxNQUtPO0FBQ0wsbUJBQWEscUNBQW1DLE1BQW5DLGlDQUFiO0FBQ0EsZUFBUyxVQUFVLElBQUksZUFBSixDQUFRLFVBQVIsRUFBb0IsSUFBcEIsR0FBMkIsT0FBM0IsQ0FBbUMsWUFBbkMsRUFBaUQsRUFBakQsQ0FBbkI7QUFDQSxpQkFBVyxZQUFZLGFBQWEsTUFBYixHQUFzQixpQ0FBN0M7QUFDQSxtQkFBYSxjQUFjLGFBQWEsTUFBYixHQUFzQixtQ0FBakQ7QUFDRDs7QUFFRCxZQUFRLElBQVIsQ0FBYSxlQUFiLEVBQThCLFVBQTlCLEVBQTBDLE1BQTFDLEVBQWtELFFBQWxELEVBQTRELFVBQTVEOztBQUVBLFdBQU87QUFDTCxXQUFLLFVBREE7QUFFTCxjQUFRLE1BRkg7QUFHTCxnQkFBVSxRQUhMO0FBSUwsa0JBQVk7QUFKUCxLQUFQO0FBTUQ7QUEvQ2tCLENBQXJCOztrQkFrRGUsYzs7Ozs7Ozs7UUM5TUMsTSxHQUFBLE07QUFoQ2hCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVCQTs7OztBQUlBOzs7OztBQUtPLFNBQVMsTUFBVCxDQUFnQixHQUFoQixFQUFzRDtBQUFBLE1BQWpDLE1BQWlDLHVFQUF4QixDQUFDLEVBQXVCO0FBQUEsTUFBbkIsU0FBbUIsdUVBQVAsS0FBTzs7QUFDM0QsTUFBSSxTQUFTLFNBQVMsYUFBVCxDQUF1QixRQUF2QixDQUFiO0FBQ0EsU0FBTyxZQUFQLENBQW9CLElBQXBCLEVBQTBCLFNBQTFCO0FBQ0EsU0FBTyxLQUFQLENBQWEsUUFBYixHQUF3QixVQUF4QjtBQUNBLFNBQU8sS0FBUCxDQUFhLEdBQWIsR0FBbUIsR0FBbkI7QUFDQSxTQUFPLEtBQVAsQ0FBYSxLQUFiLEdBQXFCLEdBQXJCO0FBQ0EsU0FBTyxLQUFQLENBQWEsTUFBYixHQUFzQixHQUF0QjtBQUNBLFNBQU8sS0FBUCxDQUFhLE1BQWIsR0FBc0IsTUFBdEI7QUFDQSxTQUFPLEtBQVAsR0FBZSxNQUFmO0FBQ0EsU0FBTyxNQUFQLEdBQWdCLE1BQWhCO0FBQ0EsU0FBTyxLQUFQLEdBQWUsaUJBQWY7QUFDQSxTQUFPLFlBQVAsQ0FBb0IsVUFBcEIsRUFBZ0MsRUFBaEM7QUFDQSxTQUFPLFlBQVAsQ0FBb0IsS0FBcEIsRUFBMkIsR0FBM0I7QUFDQSxTQUFPLFlBQVAsQ0FBb0IsU0FBcEIsRUFBK0IsOEdBQS9CO0FBQ0EsU0FBTyxLQUFQLENBQWEsT0FBYixHQUF1QixPQUF2QjtBQUNBLE1BQUksYUFBYSxJQUFqQixFQUF1QjtBQUNyQixXQUFPLEtBQVAsQ0FBYSxPQUFiLEdBQXVCLE1BQXZCO0FBQ0Q7QUFDRCxXQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0IsV0FBL0IsQ0FBMkMsTUFBM0M7O0FBRUEsU0FBTyxNQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvLyB2ZXJzaW9uOiAwLjEzLjFcbi8vIGRhdGU6IEZyaSBBdWcgMzEgMjAxOCAwOTo1OTo1NiBHTVQrMDEwMCAoV2VzdGVybiBFdXJvcGVhbiBTdW1tZXIgVGltZSlcbi8vIGxpY2VuY2U6IFxuLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG5cbi8vIHZlcnNpb246IDAuMTMuMVxuLy8gZGF0ZTogRnJpIEF1ZyAzMSAyMDE4IDA5OjU5OjU2IEdNVCswMTAwIChXZXN0ZXJuIEV1cm9wZWFuIFN1bW1lciBUaW1lKVxuLy8gbGljZW5jZTogXG4vKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5cblxuIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJtaW5pYnVzXCIsW10sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5taW5pYnVzPWUoKTp0Lm1pbmlidXM9ZSgpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhuKXtpZihlW25dKXJldHVybiBlW25dLmV4cG9ydHM7dmFyIHI9ZVtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbbl0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksci5sPSEwLHIuZXhwb3J0c312YXIgZT17fTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPXQsX193ZWJwYWNrX3JlcXVpcmVfXy5jPWUsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKHQsZSxuKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZSxcImFcIixlKSxlfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LF9fd2VicGFja19yZXF1aXJlX18ucD1cIlwiLF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTE3MSl9KFtmdW5jdGlvbih0LGUpe3ZhciBuPXQuZXhwb3J0cz17dmVyc2lvbjpcIjIuNS43XCJ9O1wibnVtYmVyXCI9PXR5cGVvZiBfX2UmJihfX2U9bil9LGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1wibnVtYmVyXCI9PXR5cGVvZiBfX2cmJihfX2c9bil9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDMwKShcIndrc1wiKSxvPW4oMjEpLGk9bigxKS5TeW1ib2wsdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpOyh0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHJbdF18fChyW3RdPXUmJmlbdF18fCh1P2k6bykoXCJTeW1ib2wuXCIrdCkpfSkuc3RvcmU9cn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2UuX19lc01vZHVsZT0hMCxlLmRlZmF1bHQ9ZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2UuX19lc01vZHVsZT0hMDt2YXIgcj1uKDYwKSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX0ocik7ZS5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSwoMCxvLmRlZmF1bHQpKHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbih0LGUsbil7cmV0dXJuIGUmJmRlZmluZVByb3BlcnRpZXModC5wcm90b3R5cGUsZSksbiYmZGVmaW5lUHJvcGVydGllcyh0LG4pLHR9fSgpfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxKSxvPW4oMCksaT1uKDE4KSx1PW4oMTEpLHM9bigxMCksYz1mdW5jdGlvbih0LGUsbil7dmFyIGYsYSxsLHA9dCZjLkYsdj10JmMuRyxkPXQmYy5TLGg9dCZjLlAseT10JmMuQixfPXQmYy5XLGI9dj9vOm9bZV18fChvW2VdPXt9KSxnPWIucHJvdG90eXBlLG09dj9yOmQ/cltlXToocltlXXx8e30pLnByb3RvdHlwZTt2JiYobj1lKTtmb3IoZiBpbiBuKShhPSFwJiZtJiZ2b2lkIDAhPT1tW2ZdKSYmcyhiLGYpfHwobD1hP21bZl06bltmXSxiW2ZdPXYmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIG1bZl0/bltmXTp5JiZhP2kobCxyKTpfJiZtW2ZdPT1sP2Z1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUsbixyKXtpZih0aGlzIGluc3RhbmNlb2YgdCl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IHQ7Y2FzZSAxOnJldHVybiBuZXcgdChlKTtjYXNlIDI6cmV0dXJuIG5ldyB0KGUsbil9cmV0dXJuIG5ldyB0KGUsbixyKX1yZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBlLnByb3RvdHlwZT10LnByb3RvdHlwZSxlfShsKTpoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBsP2koRnVuY3Rpb24uY2FsbCxsKTpsLGgmJigoYi52aXJ0dWFsfHwoYi52aXJ0dWFsPXt9KSlbZl09bCx0JmMuUiYmZyYmIWdbZl0mJnUoZyxmLGwpKSl9O2MuRj0xLGMuRz0yLGMuUz00LGMuUD04LGMuQj0xNixjLlc9MzIsYy5VPTY0LGMuUj0xMjgsdC5leHBvcnRzPWN9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9IW4oMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoIXIodCkpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGFuIG9iamVjdCFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big3KSxvPW4oNDEpLGk9bigyOCksdT1PYmplY3QuZGVmaW5lUHJvcGVydHk7ZS5mPW4oNik/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXtpZihyKHQpLGU9aShlLCEwKSxyKG4pLG8pdHJ5e3JldHVybiB1KHQsZSxuKX1jYXRjaCh0KXt9aWYoXCJnZXRcImluIG58fFwic2V0XCJpbiBuKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiBuJiYodFtlXT1uLnZhbHVlKSx0fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQ/bnVsbCE9PXQ6XCJmdW5jdGlvblwiPT10eXBlb2YgdH19LGZ1bmN0aW9uKHQsZSl7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uY2FsbCh0LGUpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOCksbz1uKDIwKTt0LmV4cG9ydHM9big2KT9mdW5jdGlvbih0LGUsbil7cmV0dXJuIHIuZih0LGUsbygxLG4pKX06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0W2VdPW4sdH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDU2KSxvPW4oMjUpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gcihvKHQpKX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4hIXQoKX1jYXRjaCh0KXtyZXR1cm4hMH19fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0hMH0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e319LGZ1bmN0aW9uKHQsZSl7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCkuc2xpY2UoOCwtMSl9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oODgpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtpZihyKHQpLHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG4pe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIHQuY2FsbChlLG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big0Miksbz1uKDMxKTt0LmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe3JldHVybiByKHQsbyl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTplfX19LGZ1bmN0aW9uKHQsZSl7dmFyIG49MCxyPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVyblwiU3ltYm9sKFwiLmNvbmNhdCh2b2lkIDA9PT10P1wiXCI6dCxcIilfXCIsKCsrbityKS50b1N0cmluZygzNikpfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big4KS5mLG89bigxMCksaT1uKDIpKFwidG9TdHJpbmdUYWdcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt0JiYhbyh0PW4/dDp0LnByb3RvdHlwZSxpKSYmcih0LGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTplfSl9fSxmdW5jdGlvbih0LGUpe3ZhciBuPU1hdGguY2VpbCxyPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpc05hTih0PSt0KT8wOih0PjA/cjpuKSh0KX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09dCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIrdCk7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oMTAyKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlKXtlLmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDkpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKCFyKHQpKXJldHVybiB0O3ZhciBuLG87aWYoZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC52YWx1ZU9mKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO2lmKCFlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudG9TdHJpbmcpJiYhcihvPW4uY2FsbCh0KSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMzApKFwia2V5c1wiKSxvPW4oMjEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gclt0XXx8KHJbdF09byh0KSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigwKSxvPW4oMSksaT1vW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHwob1tcIl9fY29yZS1qc19zaGFyZWRfX1wiXT17fSk7KHQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBpW3RdfHwoaVt0XT12b2lkIDAhPT1lP2U6e30pfSkoXCJ2ZXJzaW9uc1wiLFtdKS5wdXNoKHt2ZXJzaW9uOnIudmVyc2lvbixtb2RlOm4oMTQpP1wicHVyZVwiOlwiZ2xvYmFsXCIsY29weXJpZ2h0OlwiwqkgMjAxOCBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KVwifSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mXCIuc3BsaXQoXCIsXCIpfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big5KSxvPW4oMSkuZG9jdW1lbnQsaT1yKG8pJiZyKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudCh0KTp7fX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDI1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdChyKHQpKX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITA7dmFyIHI9big1Myksbz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHIpO2UuZGVmYXVsdD1mdW5jdGlvbih0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9PSh2b2lkIDA9PT1lP1widW5kZWZpbmVkXCI6KDAsby5kZWZhdWx0KShlKSkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWUuX19lc01vZHVsZT0hMDt2YXIgcj1uKDEwNCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9bigxMDgpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPW4oNTMpLGM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKTtlLmRlZmF1bHQ9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIisodm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOigwLGMuZGVmYXVsdCkoZSkpKTt0LnByb3RvdHlwZT0oMCx1LmRlZmF1bHQpKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoby5kZWZhdWx0PygwLG8uZGVmYXVsdCkodCxlKTp0Ll9fcHJvdG9fXz1lKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvOyFmdW5jdGlvbihpLHUpe1widXNlIHN0cmljdFwiO3I9dSx2b2lkIDAhPT0obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByP3IuY2FsbChlLG4sZSx0KTpyKSYmKHQuZXhwb3J0cz1vKX0oMCxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGJpbmRNZXRob2QodCxlKXt2YXIgbj10W2VdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4uYmluZClyZXR1cm4gbi5iaW5kKHQpO3RyeXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChuLHQpfWNhdGNoKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkobixbdCxhcmd1bWVudHNdKX19fWZ1bmN0aW9uIHJlYWxNZXRob2Qobil7cmV0dXJuXCJkZWJ1Z1wiPT09biYmKG49XCJsb2dcIiksdHlwZW9mIGNvbnNvbGUhPT1lJiYodm9pZCAwIT09Y29uc29sZVtuXT9iaW5kTWV0aG9kKGNvbnNvbGUsbik6dm9pZCAwIT09Y29uc29sZS5sb2c/YmluZE1ldGhvZChjb25zb2xlLFwibG9nXCIpOnQpfWZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyhlLHIpe2Zvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXt2YXIgaT1uW29dO3RoaXNbaV09bzxlP3Q6dGhpcy5tZXRob2RGYWN0b3J5KGksZSxyKX10aGlzLmxvZz10aGlzLmRlYnVnfWZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXModCxuLHIpe3JldHVybiBmdW5jdGlvbigpe3R5cGVvZiBjb25zb2xlIT09ZSYmKHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHRoaXMsbixyKSx0aGlzW3RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGRlZmF1bHRNZXRob2RGYWN0b3J5KHQsZSxuKXtyZXR1cm4gcmVhbE1ldGhvZCh0KXx8ZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlcy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gTG9nZ2VyKHQscixvKXtmdW5jdGlvbiBwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKHQpe3ZhciByPShuW3RdfHxcInNpbGVudFwiKS50b1VwcGVyQ2FzZSgpO2lmKHR5cGVvZiB3aW5kb3chPT1lKXt0cnl7cmV0dXJuIHZvaWQod2luZG93LmxvY2FsU3RvcmFnZVtzXT1yKX1jYXRjaCh0KXt9dHJ5e3dpbmRvdy5kb2N1bWVudC5jb29raWU9ZW5jb2RlVVJJQ29tcG9uZW50KHMpK1wiPVwiK3IrXCI7XCJ9Y2F0Y2godCl7fX19ZnVuY3Rpb24gZ2V0UGVyc2lzdGVkTGV2ZWwoKXt2YXIgdDtpZih0eXBlb2Ygd2luZG93IT09ZSl7dHJ5e3Q9d2luZG93LmxvY2FsU3RvcmFnZVtzXX1jYXRjaCh0KXt9aWYodHlwZW9mIHQ9PT1lKXRyeXt2YXIgbj13aW5kb3cuZG9jdW1lbnQuY29va2llLHI9bi5pbmRleE9mKGVuY29kZVVSSUNvbXBvbmVudChzKStcIj1cIik7LTEhPT1yJiYodD0vXihbXjtdKykvLmV4ZWMobi5zbGljZShyKSlbMV0pfWNhdGNoKHQpe31yZXR1cm4gdm9pZCAwPT09dS5sZXZlbHNbdF0mJih0PXZvaWQgMCksdH19dmFyIGksdT10aGlzLHM9XCJsb2dsZXZlbFwiO3QmJihzKz1cIjpcIit0KSx1Lm5hbWU9dCx1LmxldmVscz17VFJBQ0U6MCxERUJVRzoxLElORk86MixXQVJOOjMsRVJST1I6NCxTSUxFTlQ6NX0sdS5tZXRob2RGYWN0b3J5PW98fGRlZmF1bHRNZXRob2RGYWN0b3J5LHUuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gaX0sdS5zZXRMZXZlbD1mdW5jdGlvbihuLHIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuJiZ2b2lkIDAhPT11LmxldmVsc1tuLnRvVXBwZXJDYXNlKCldJiYobj11LmxldmVsc1tuLnRvVXBwZXJDYXNlKCldKSwhKFwibnVtYmVyXCI9PXR5cGVvZiBuJiZuPj0wJiZuPD11LmxldmVscy5TSUxFTlQpKXRocm93XCJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiBcIituO2lmKGk9biwhMSE9PXImJnBlcnNpc3RMZXZlbElmUG9zc2libGUobikscmVwbGFjZUxvZ2dpbmdNZXRob2RzLmNhbGwodSxuLHQpLHR5cGVvZiBjb25zb2xlPT09ZSYmbjx1LmxldmVscy5TSUxFTlQpcmV0dXJuXCJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZ1wifSx1LnNldERlZmF1bHRMZXZlbD1mdW5jdGlvbih0KXtnZXRQZXJzaXN0ZWRMZXZlbCgpfHx1LnNldExldmVsKHQsITEpfSx1LmVuYWJsZUFsbD1mdW5jdGlvbih0KXt1LnNldExldmVsKHUubGV2ZWxzLlRSQUNFLHQpfSx1LmRpc2FibGVBbGw9ZnVuY3Rpb24odCl7dS5zZXRMZXZlbCh1LmxldmVscy5TSUxFTlQsdCl9O3ZhciBjPWdldFBlcnNpc3RlZExldmVsKCk7bnVsbD09YyYmKGM9bnVsbD09cj9cIldBUk5cIjpyKSx1LnNldExldmVsKGMsITEpfXZhciB0PWZ1bmN0aW9uKCl7fSxlPVwidW5kZWZpbmVkXCIsbj1bXCJ0cmFjZVwiLFwiZGVidWdcIixcImluZm9cIixcIndhcm5cIixcImVycm9yXCJdLHI9bmV3IExvZ2dlcixvPXt9O3IuZ2V0TG9nZ2VyPWZ1bmN0aW9uKHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0fHxcIlwiPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTt2YXIgZT1vW3RdO3JldHVybiBlfHwoZT1vW3RdPW5ldyBMb2dnZXIodCxyLmdldExldmVsKCksci5tZXRob2RGYWN0b3J5KSksZX07dmFyIGk9dHlwZW9mIHdpbmRvdyE9PWU/d2luZG93LmxvZzp2b2lkIDA7cmV0dXJuIHIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT09ZSYmd2luZG93LmxvZz09PXImJih3aW5kb3cubG9nPWkpLHJ9LHIuZ2V0TG9nZ2Vycz1mdW5jdGlvbigpe3JldHVybiBvfSxyfSl9LGZ1bmN0aW9uKHQsZSxuKXtlLmY9bigyKX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1uKDApLGk9bigxNCksdT1uKDM3KSxzPW4oOCkuZjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9by5TeW1ib2x8fChvLlN5bWJvbD1pP3t9OnIuU3ltYm9sfHx7fSk7XCJfXCI9PXQuY2hhckF0KDApfHx0IGluIGV8fHMoZSx0LHt2YWx1ZTp1LmYodCl9KX19LCxmdW5jdGlvbih0LGUsbil7dmFyIHI9big3KSxvPW4oNzIpLGk9bigzMSksdT1uKDI5KShcIklFX1BST1RPXCIpLHM9ZnVuY3Rpb24oKXt9LGM9ZnVuY3Rpb24oKXt2YXIgdCxlPW4oMzIpKFwiaWZyYW1lXCIpLHI9aS5sZW5ndGg7Zm9yKGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixuKDU3KS5hcHBlbmRDaGlsZChlKSxlLnNyYz1cImphdmFzY3JpcHQ6XCIsdD1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQsdC5vcGVuKCksdC53cml0ZShcIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XFwvc2NyaXB0PlwiKSx0LmNsb3NlKCksYz10LkY7ci0tOylkZWxldGUgYy5wcm90b3R5cGVbaVtyXV07cmV0dXJuIGMoKX07dC5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIG51bGwhPT10PyhzLnByb3RvdHlwZT1yKHQpLG49bmV3IHMscy5wcm90b3R5cGU9bnVsbCxuW3VdPXQpOm49YygpLHZvaWQgMD09PWU/bjpvKG4sZSl9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPSFuKDYpJiYhbigxMykoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4oMzIpKFwiZGl2XCIpLFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEwKSxvPW4oMTIpLGk9big2MSkoITEpLHU9bigyOSkoXCJJRV9QUk9UT1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbixzPW8odCksYz0wLGY9W107Zm9yKG4gaW4gcyluIT11JiZyKHMsbikmJmYucHVzaChuKTtmb3IoO2UubGVuZ3RoPmM7KXIocyxuPWVbYysrXSkmJih+aShmLG4pfHxmLnB1c2gobikpO3JldHVybiBmfX0sZnVuY3Rpb24odCxlKXtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sLGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDcwKSghMCk7big1MSkoU3RyaW5nLFwiU3RyaW5nXCIsZnVuY3Rpb24odCl7dGhpcy5fdD1TdHJpbmcodCksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5fdCxuPXRoaXMuX2k7cmV0dXJuIG4+PWUubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KHQ9cihlLG4pLHRoaXMuX2krPXQubGVuZ3RoLHt2YWx1ZTp0LGRvbmU6ITF9KX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyNCksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9vKHIodCksOTAwNzE5OTI1NDc0MDk5MSk6MH19LGZ1bmN0aW9uKHQsZSxuKXtuKDczKTtmb3IodmFyIHI9bigxKSxvPW4oMTEpLGk9bigxNSksdT1uKDIpKFwidG9TdHJpbmdUYWdcIikscz1cIkNTU1J1bGVMaXN0LENTU1N0eWxlRGVjbGFyYXRpb24sQ1NTVmFsdWVMaXN0LENsaWVudFJlY3RMaXN0LERPTVJlY3RMaXN0LERPTVN0cmluZ0xpc3QsRE9NVG9rZW5MaXN0LERhdGFUcmFuc2Zlckl0ZW1MaXN0LEZpbGVMaXN0LEhUTUxBbGxDb2xsZWN0aW9uLEhUTUxDb2xsZWN0aW9uLEhUTUxGb3JtRWxlbWVudCxIVE1MU2VsZWN0RWxlbWVudCxNZWRpYUxpc3QsTWltZVR5cGVBcnJheSxOYW1lZE5vZGVNYXAsTm9kZUxpc3QsUGFpbnRSZXF1ZXN0TGlzdCxQbHVnaW4sUGx1Z2luQXJyYXksU1ZHTGVuZ3RoTGlzdCxTVkdOdW1iZXJMaXN0LFNWR1BhdGhTZWdMaXN0LFNWR1BvaW50TGlzdCxTVkdTdHJpbmdMaXN0LFNWR1RyYW5zZm9ybUxpc3QsU291cmNlQnVmZmVyTGlzdCxTdHlsZVNoZWV0TGlzdCxUZXh0VHJhY2tDdWVMaXN0LFRleHRUcmFja0xpc3QsVG91Y2hMaXN0XCIuc3BsaXQoXCIsXCIpLGM9MDtjPHMubGVuZ3RoO2MrKyl7dmFyIGY9c1tjXSxhPXJbZl0sbD1hJiZhLnByb3RvdHlwZTtsJiYhbFt1XSYmbyhsLHUsZiksaVtmXT1pLkFycmF5fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KHQpe3ZhciBlLG47dGhpcy5wcm9taXNlPW5ldyB0KGZ1bmN0aW9uKHQscil7aWYodm9pZCAwIT09ZXx8dm9pZCAwIT09bil0aHJvdyBUeXBlRXJyb3IoXCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvclwiKTtlPXQsbj1yfSksdGhpcy5yZXNvbHZlPXIoZSksdGhpcy5yZWplY3Q9cihuKX12YXIgcj1uKDIyKTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNSksbz1uKDApLGk9bigxMyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG49KG8uT2JqZWN0fHx7fSlbdF18fE9iamVjdFt0XSx1PXt9O3VbdF09ZShuKSxyKHIuUytyLkYqaShmdW5jdGlvbigpe24oMSl9KSxcIk9iamVjdFwiLHUpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjcpLG89bigyMCksaT1uKDEyKSx1PW4oMjgpLHM9bigxMCksYz1uKDQxKSxmPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7ZS5mPW4oNik/ZjpmdW5jdGlvbih0LGUpe2lmKHQ9aSh0KSxlPXUoZSwhMCksYyl0cnl7cmV0dXJuIGYodCxlKX1jYXRjaCh0KXt9aWYocyh0LGUpKXJldHVybiBvKCFyLmYuY2FsbCh0LGUpLHRbZV0pfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oMTQpLG89big1KSxpPW4oNTIpLHU9bigxMSkscz1uKDE1KSxjPW4oNzEpLGY9bigyMyksYT1uKDU4KSxsPW4oMikoXCJpdGVyYXRvclwiKSxwPSEoW10ua2V5cyYmXCJuZXh0XCJpbltdLmtleXMoKSksdj1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4sZCxoLHksXyl7YyhuLGUsZCk7dmFyIGIsZyxtLHc9ZnVuY3Rpb24odCl7aWYoIXAmJnQgaW4gUClyZXR1cm4gUFt0XTtzd2l0Y2godCl7Y2FzZVwia2V5c1wiOmNhc2VcInZhbHVlc1wiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19LHg9ZStcIiBJdGVyYXRvclwiLE89XCJ2YWx1ZXNcIj09aCxNPSExLFA9dC5wcm90b3R5cGUsUz1QW2xdfHxQW1wiQEBpdGVyYXRvclwiXXx8aCYmUFtoXSxMPVN8fHcoaCksaj1oP08/dyhcImVudHJpZXNcIik6TDp2b2lkIDAsaz1cIkFycmF5XCI9PWU/UC5lbnRyaWVzfHxTOlM7aWYoayYmKG09YShrLmNhbGwobmV3IHQpKSkhPT1PYmplY3QucHJvdG90eXBlJiZtLm5leHQmJihmKG0seCwhMCkscnx8XCJmdW5jdGlvblwiPT10eXBlb2YgbVtsXXx8dShtLGwsdikpLE8mJlMmJlwidmFsdWVzXCIhPT1TLm5hbWUmJihNPSEwLEw9ZnVuY3Rpb24oKXtyZXR1cm4gUy5jYWxsKHRoaXMpfSksciYmIV98fCFwJiYhTSYmUFtsXXx8dShQLGwsTCksc1tlXT1MLHNbeF09dixoKWlmKGI9e3ZhbHVlczpPP0w6dyhcInZhbHVlc1wiKSxrZXlzOnk/TDp3KFwia2V5c1wiKSxlbnRyaWVzOmp9LF8pZm9yKGcgaW4gYilnIGluIFB8fGkoUCxnLGJbZ10pO2Vsc2UgbyhvLlArby5GKihwfHxNKSxlLGIpO3JldHVybiBifX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDExKX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWUuX19lc01vZHVsZT0hMDt2YXIgcj1uKDc2KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQociksaT1uKDc4KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1cImZ1bmN0aW9uXCI9PXR5cGVvZiB1LmRlZmF1bHQmJlwic3ltYm9sXCI9PXR5cGVvZiBvLmRlZmF1bHQ/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdS5kZWZhdWx0JiZ0LmNvbnN0cnVjdG9yPT09dS5kZWZhdWx0JiZ0IT09dS5kZWZhdWx0LnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fTtlLmRlZmF1bHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgdS5kZWZhdWx0JiZcInN5bWJvbFwiPT09cyhvLmRlZmF1bHQpP2Z1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6cyh0KX06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHUuZGVmYXVsdCYmdC5jb25zdHJ1Y3Rvcj09PXUuZGVmYXVsdCYmdCE9PXUuZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6cyh0KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDQyKSxvPW4oMzEpLmNvbmNhdChcImxlbmd0aFwiLFwicHJvdG90eXBlXCIpO2UuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24odCl7cmV0dXJuIHIodCxvKX19LGZ1bmN0aW9uKHQsZSl7fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxNik7dC5leHBvcnRzPU9iamVjdChcInpcIikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVyblwiU3RyaW5nXCI9PXIodCk/dC5zcGxpdChcIlwiKTpPYmplY3QodCl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxKS5kb2N1bWVudDt0LmV4cG9ydHM9ciYmci5kb2N1bWVudEVsZW1lbnR9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEwKSxvPW4oMzMpLGk9bigyOSkoXCJJRV9QUk9UT1wiKSx1PU9iamVjdC5wcm90b3R5cGU7dC5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQ9byh0KSxyKHQsaSk/dFtpXTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNvbnN0cnVjdG9yJiZ0IGluc3RhbmNlb2YgdC5jb25zdHJ1Y3Rvcj90LmNvbnN0cnVjdG9yLnByb3RvdHlwZTp0IGluc3RhbmNlb2YgT2JqZWN0P3U6bnVsbH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDE2KSxvPW4oMikoXCJ0b1N0cmluZ1RhZ1wiKSxpPVwiQXJndW1lbnRzXCI9PXIoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSx1PWZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybiB0W2VdfWNhdGNoKHQpe319O3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZSxuLHM7cmV0dXJuIHZvaWQgMD09PXQ/XCJVbmRlZmluZWRcIjpudWxsPT09dD9cIk51bGxcIjpcInN0cmluZ1wiPT10eXBlb2Yobj11KGU9T2JqZWN0KHQpLG8pKT9uOmk/cihlKTpcIk9iamVjdFwiPT0ocz1yKGUpKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5jYWxsZWU/XCJBcmd1bWVudHNcIjpzfX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDY3KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTIpLG89big0NiksaT1uKDYyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbix1KXt2YXIgcyxjPXIoZSksZj1vKGMubGVuZ3RoKSxhPWkodSxmKTtpZih0JiZuIT1uKXtmb3IoO2Y+YTspaWYoKHM9Y1thKytdKSE9cylyZXR1cm4hMH1lbHNlIGZvcig7Zj5hO2ErKylpZigodHx8YSBpbiBjKSYmY1thXT09PW4pcmV0dXJuIHR8fGF8fDA7cmV0dXJuIXQmJi0xfX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDI0KSxvPU1hdGgubWF4LGk9TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9cih0KSx0PDA/byh0K2UsMCk6aSh0LGUpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNyksbz1uKDIyKSxpPW4oMikoXCJzcGVjaWVzXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuLHU9cih0KS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09dXx8dm9pZCAwPT0obj1yKHUpW2ldKT9lOm8obil9fSxmdW5jdGlvbih0LGUsbil7dmFyIHIsbyxpLHU9bigxOCkscz1uKDk0KSxjPW4oNTcpLGY9bigzMiksYT1uKDEpLGw9YS5wcm9jZXNzLHA9YS5zZXRJbW1lZGlhdGUsdj1hLmNsZWFySW1tZWRpYXRlLGQ9YS5NZXNzYWdlQ2hhbm5lbCxoPWEuRGlzcGF0Y2gseT0wLF89e30sYj1mdW5jdGlvbigpe3ZhciB0PSt0aGlzO2lmKF8uaGFzT3duUHJvcGVydHkodCkpe3ZhciBlPV9bdF07ZGVsZXRlIF9bdF0sZSgpfX0sZz1mdW5jdGlvbih0KXtiLmNhbGwodC5kYXRhKX07cCYmdnx8KHA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTthcmd1bWVudHMubGVuZ3RoPm47KWUucHVzaChhcmd1bWVudHNbbisrXSk7cmV0dXJuIF9bKyt5XT1mdW5jdGlvbigpe3MoXCJmdW5jdGlvblwiPT10eXBlb2YgdD90OkZ1bmN0aW9uKHQpLGUpfSxyKHkpLHl9LHY9ZnVuY3Rpb24odCl7ZGVsZXRlIF9bdF19LFwicHJvY2Vzc1wiPT1uKDE2KShsKT9yPWZ1bmN0aW9uKHQpe2wubmV4dFRpY2sodShiLHQsMSkpfTpoJiZoLm5vdz9yPWZ1bmN0aW9uKHQpe2gubm93KHUoYix0LDEpKX06ZD8obz1uZXcgZCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9ZyxyPXUoaS5wb3N0TWVzc2FnZSxpLDEpKTphLmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhYS5pbXBvcnRTY3JpcHRzPyhyPWZ1bmN0aW9uKHQpe2EucG9zdE1lc3NhZ2UodCtcIlwiLFwiKlwiKX0sYS5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGcsITEpKTpyPVwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBmKFwic2NyaXB0XCIpP2Z1bmN0aW9uKHQpe2MuYXBwZW5kQ2hpbGQoZihcInNjcmlwdFwiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7Yy5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwodCl9fTpmdW5jdGlvbih0KXtzZXRUaW1lb3V0KHUoYix0LDEpLDApfSksdC5leHBvcnRzPXtzZXQ6cCxjbGVhcjp2fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybntlOiExLHY6dCgpfX1jYXRjaCh0KXtyZXR1cm57ZTohMCx2OnR9fX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDcpLG89big5KSxpPW4oNDgpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKHIodCksbyhlKSYmZS5jb25zdHJ1Y3Rvcj09PXQpcmV0dXJuIGU7dmFyIG49aS5mKHQpO3JldHVybigwLG4ucmVzb2x2ZSkoZSksbi5wcm9taXNlfX0sZnVuY3Rpb24odCxlLG4pe24oNjgpO3ZhciByPW4oMCkuT2JqZWN0O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHIuZGVmaW5lUHJvcGVydHkodCxlLG4pfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNSk7cihyLlMrci5GKiFuKDYpLFwiT2JqZWN0XCIse2RlZmluZVByb3BlcnR5Om4oOCkuZn0pfSwsZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjQpLG89bigyNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpLHUscz1TdHJpbmcobyhlKSksYz1yKG4pLGY9cy5sZW5ndGg7cmV0dXJuIGM8MHx8Yz49Zj90P1wiXCI6dm9pZCAwOihpPXMuY2hhckNvZGVBdChjKSxpPDU1Mjk2fHxpPjU2MzE5fHxjKzE9PT1mfHwodT1zLmNoYXJDb2RlQXQoYysxKSk8NTYzMjB8fHU+NTczNDM/dD9zLmNoYXJBdChjKTppOnQ/cy5zbGljZShjLGMrMik6dS01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2KX19fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big0MCksbz1uKDIwKSxpPW4oMjMpLHU9e307bigxMSkodSxuKDIpKFwiaXRlcmF0b3JcIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dC5wcm90b3R5cGU9cih1LHtuZXh0Om8oMSxuKX0pLGkodCxlK1wiIEl0ZXJhdG9yXCIpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOCksbz1uKDcpLGk9bigxOSk7dC5leHBvcnRzPW4oNik/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24odCxlKXtvKHQpO2Zvcih2YXIgbix1PWkoZSkscz11Lmxlbmd0aCxjPTA7cz5jOylyLmYodCxuPXVbYysrXSxlW25dKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDc0KSxvPW4oNzUpLGk9bigxNSksdT1uKDEyKTt0LmV4cG9ydHM9big1MSkoQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKHQsZSl7dGhpcy5fdD11KHQpLHRoaXMuX2k9MCx0aGlzLl9rPWV9LGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdCxlPXRoaXMuX2ssbj10aGlzLl9pKys7cmV0dXJuIXR8fG4+PXQubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKTpcImtleXNcIj09ZT9vKDAsbik6XCJ2YWx1ZXNcIj09ZT9vKDAsdFtuXSk6bygwLFtuLHRbbl1dKX0sXCJ2YWx1ZXNcIiksaS5Bcmd1bWVudHM9aS5BcnJheSxyKFwia2V5c1wiKSxyKFwidmFsdWVzXCIpLHIoXCJlbnRyaWVzXCIpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue3ZhbHVlOmUsZG9uZTohIXR9fX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDc3KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe24oNDUpLG4oNDcpLHQuZXhwb3J0cz1uKDM3KS5mKFwiaXRlcmF0b3JcIil9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9e2RlZmF1bHQ6big3OSksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSxuKXtuKDgwKSxuKDU1KSxuKDg1KSxuKDg2KSx0LmV4cG9ydHM9bigwKS5TeW1ib2x9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDEpLG89bigxMCksaT1uKDYpLHU9big1KSxzPW4oNTIpLGM9big4MSkuS0VZLGY9bigxMyksYT1uKDMwKSxsPW4oMjMpLHA9bigyMSksdj1uKDIpLGQ9bigzNyksaD1uKDM4KSx5PW4oODIpLF89big4MyksYj1uKDcpLGc9big5KSxtPW4oMTIpLHc9bigyOCkseD1uKDIwKSxPPW4oNDApLE09big4NCksUD1uKDUwKSxTPW4oOCksTD1uKDE5KSxqPVAuZixrPVMuZixFPU0uZixSPXIuU3ltYm9sLFQ9ci5KU09OLEM9VCYmVC5zdHJpbmdpZnksQT12KFwiX2hpZGRlblwiKSxEPXYoXCJ0b1ByaW1pdGl2ZVwiKSxGPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLHE9YShcInN5bWJvbC1yZWdpc3RyeVwiKSxJPWEoXCJzeW1ib2xzXCIpLE49YShcIm9wLXN5bWJvbHNcIiksQj1PYmplY3QucHJvdG90eXBlLFc9XCJmdW5jdGlvblwiPT10eXBlb2YgUixHPXIuUU9iamVjdCxVPSFHfHwhRy5wcm90b3R5cGV8fCFHLnByb3RvdHlwZS5maW5kQ2hpbGQsVj1pJiZmKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU8oayh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGsodGhpcyxcImFcIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbih0LGUsbil7dmFyIHI9aihCLGUpO3ImJmRlbGV0ZSBCW2VdLGsodCxlLG4pLHImJnQhPT1CJiZrKEIsZSxyKX06ayxIPWZ1bmN0aW9uKHQpe3ZhciBlPUlbdF09TyhSLnByb3RvdHlwZSk7cmV0dXJuIGUuX2s9dCxlfSxLPVcmJlwic3ltYm9sXCI9PXR5cGVvZiBSLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFJ9LEo9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0PT09QiYmSihOLGUsbiksYih0KSxlPXcoZSwhMCksYihuKSxvKEksZSk/KG4uZW51bWVyYWJsZT8obyh0LEEpJiZ0W0FdW2VdJiYodFtBXVtlXT0hMSksbj1PKG4se2VudW1lcmFibGU6eCgwLCExKX0pKToobyh0LEEpfHxrKHQsQSx4KDEse30pKSx0W0FdW2VdPSEwKSxWKHQsZSxuKSk6ayh0LGUsbil9LHo9ZnVuY3Rpb24odCxlKXtiKHQpO2Zvcih2YXIgbixyPXkoZT1tKGUpKSxvPTAsaT1yLmxlbmd0aDtpPm87KUoodCxuPXJbbysrXSxlW25dKTtyZXR1cm4gdH0sWT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lP08odCk6eihPKHQpLGUpfSxRPWZ1bmN0aW9uKHQpe3ZhciBlPUYuY2FsbCh0aGlzLHQ9dyh0LCEwKSk7cmV0dXJuISh0aGlzPT09QiYmbyhJLHQpJiYhbyhOLHQpKSYmKCEoZXx8IW8odGhpcyx0KXx8IW8oSSx0KXx8byh0aGlzLEEpJiZ0aGlzW0FdW3RdKXx8ZSl9LFg9ZnVuY3Rpb24odCxlKXtpZih0PW0odCksZT13KGUsITApLHQhPT1CfHwhbyhJLGUpfHxvKE4sZSkpe3ZhciBuPWoodCxlKTtyZXR1cm4hbnx8IW8oSSxlKXx8byh0LEEpJiZ0W0FdW2VdfHwobi5lbnVtZXJhYmxlPSEwKSxufX0sWj1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj1FKG0odCkpLHI9W10saT0wO24ubGVuZ3RoPmk7KW8oSSxlPW5baSsrXSl8fGU9PUF8fGU9PWN8fHIucHVzaChlKTtyZXR1cm4gcn0sJD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10PT09QixyPUUobj9OOm0odCkpLGk9W10sdT0wO3IubGVuZ3RoPnU7KSFvKEksZT1yW3UrK10pfHxuJiYhbyhCLGUpfHxpLnB1c2goSVtlXSk7cmV0dXJuIGl9O1d8fChSPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIFIpdGhyb3cgVHlwZUVycm9yKFwiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIVwiKTt2YXIgdD1wKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSxlPWZ1bmN0aW9uKG4pe3RoaXM9PT1CJiZlLmNhbGwoTixuKSxvKHRoaXMsQSkmJm8odGhpc1tBXSx0KSYmKHRoaXNbQV1bdF09ITEpLFYodGhpcyx0LHgoMSxuKSl9O3JldHVybiBpJiZVJiZWKEIsdCx7Y29uZmlndXJhYmxlOiEwLHNldDplfSksSCh0KX0scyhSLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLFAuZj1YLFMuZj1KLG4oNTQpLmY9TS5mPVosbigyNykuZj1RLG4oNDMpLmY9JCxpJiYhbigxNCkmJnMoQixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsUSwhMCksZC5mPWZ1bmN0aW9uKHQpe3JldHVybiBIKHYodCkpfSksdSh1LkcrdS5XK3UuRiohVyx7U3ltYm9sOlJ9KTtmb3IodmFyIHR0PVwiaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXNcIi5zcGxpdChcIixcIiksZXQ9MDt0dC5sZW5ndGg+ZXQ7KXYodHRbZXQrK10pO2Zvcih2YXIgbnQ9TCh2LnN0b3JlKSxydD0wO250Lmxlbmd0aD5ydDspaChudFtydCsrXSk7dSh1LlMrdS5GKiFXLFwiU3ltYm9sXCIse2ZvcjpmdW5jdGlvbih0KXtyZXR1cm4gbyhxLHQrPVwiXCIpP3FbdF06cVt0XT1SKHQpfSxrZXlGb3I6ZnVuY3Rpb24odCl7aWYoIUsodCkpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgc3ltYm9sIVwiKTtmb3IodmFyIGUgaW4gcSlpZihxW2VdPT09dClyZXR1cm4gZX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7VT0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7VT0hMX19KSx1KHUuUyt1LkYqIVcsXCJPYmplY3RcIix7Y3JlYXRlOlksZGVmaW5lUHJvcGVydHk6SixkZWZpbmVQcm9wZXJ0aWVzOnosZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOlgsZ2V0T3duUHJvcGVydHlOYW1lczpaLGdldE93blByb3BlcnR5U3ltYm9sczokfSksVCYmdSh1LlMrdS5GKighV3x8ZihmdW5jdGlvbigpe3ZhciB0PVIoKTtyZXR1cm5cIltudWxsXVwiIT1DKFt0XSl8fFwie31cIiE9Qyh7YTp0fSl8fFwie31cIiE9QyhPYmplY3QodCkpfSkpLFwiSlNPTlwiLHtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj1bdF0sbz0xO2FyZ3VtZW50cy5sZW5ndGg+bzspci5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZihuPWU9clsxXSwoZyhlKXx8dm9pZCAwIT09dCkmJiFLKHQpKXJldHVybiBfKGUpfHwoZT1mdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJihlPW4uY2FsbCh0aGlzLHQsZSkpLCFLKGUpKXJldHVybiBlfSksclsxXT1lLEMuYXBwbHkoVCxyKX19KSxSLnByb3RvdHlwZVtEXXx8bigxMSkoUi5wcm90b3R5cGUsRCxSLnByb3RvdHlwZS52YWx1ZU9mKSxsKFIsXCJTeW1ib2xcIiksbChNYXRoLFwiTWF0aFwiLCEwKSxsKHIuSlNPTixcIkpTT05cIiwhMCl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDIxKShcIm1ldGFcIiksbz1uKDkpLGk9bigxMCksdT1uKDgpLmYscz0wLGM9T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZj0hbigxMykoZnVuY3Rpb24oKXtyZXR1cm4gYyhPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLGE9ZnVuY3Rpb24odCl7dSh0LHIse3ZhbHVlOntpOlwiT1wiKyArK3Msdzp7fX19KX0sbD1mdW5jdGlvbih0LGUpe2lmKCFvKHQpKXJldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0P3Q6KFwic3RyaW5nXCI9PXR5cGVvZiB0P1wiU1wiOlwiUFwiKSt0O2lmKCFpKHQscikpe2lmKCFjKHQpKXJldHVyblwiRlwiO2lmKCFlKXJldHVyblwiRVwiO2EodCl9cmV0dXJuIHRbcl0uaX0scD1mdW5jdGlvbih0LGUpe2lmKCFpKHQscikpe2lmKCFjKHQpKXJldHVybiEwO2lmKCFlKXJldHVybiExO2EodCl9cmV0dXJuIHRbcl0ud30sdj1mdW5jdGlvbih0KXtyZXR1cm4gZiYmZC5ORUVEJiZjKHQpJiYhaSh0LHIpJiZhKHQpLHR9LGQ9dC5leHBvcnRzPXtLRVk6cixORUVEOiExLGZhc3RLZXk6bCxnZXRXZWFrOnAsb25GcmVlemU6dn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDE5KSxvPW4oNDMpLGk9bigyNyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPXIodCksbj1vLmY7aWYobilmb3IodmFyIHUscz1uKHQpLGM9aS5mLGY9MDtzLmxlbmd0aD5mOyljLmNhbGwodCx1PXNbZisrXSkmJmUucHVzaCh1KTtyZXR1cm4gZX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDE2KTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJBcnJheVwiPT1yKHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTIpLG89big1NCkuZixpPXt9LnRvU3RyaW5nLHU9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBvKHQpfWNhdGNoKHQpe3JldHVybiB1LnNsaWNlKCl9fTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gdSYmXCJbb2JqZWN0IFdpbmRvd11cIj09aS5jYWxsKHQpP3ModCk6byhyKHQpKX19LGZ1bmN0aW9uKHQsZSxuKXtuKDM4KShcImFzeW5jSXRlcmF0b3JcIil9LGZ1bmN0aW9uKHQsZSxuKXtuKDM4KShcIm9ic2VydmFibGVcIil9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDU5KSxvPW4oMikoXCJpdGVyYXRvclwiKSxpPW4oMTUpO3QuZXhwb3J0cz1uKDApLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9dClyZXR1cm4gdFtvXXx8dFtcIkBAaXRlcmF0b3JcIl18fGlbcih0KV19fSxmdW5jdGlvbih0LGUsbil7big1NSksbig0NSksbig0Nyksbig4OSksbigxMDApLG4oMTAxKSx0LmV4cG9ydHM9bigwKS5Qcm9taXNlfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsbyxpLHUscz1uKDE0KSxjPW4oMSksZj1uKDE4KSxhPW4oNTkpLGw9big1KSxwPW4oOSksdj1uKDIyKSxkPW4oOTApLGg9big5MSkseT1uKDYzKSxfPW4oNjQpLnNldCxiPW4oOTUpKCksZz1uKDQ4KSxtPW4oNjUpLHc9big5NikseD1uKDY2KSxPPWMuVHlwZUVycm9yLE09Yy5wcm9jZXNzLFA9TSYmTS52ZXJzaW9ucyxTPVAmJlAudjh8fFwiXCIsTD1jLlByb21pc2Usaj1cInByb2Nlc3NcIj09YShNKSxrPWZ1bmN0aW9uKCl7fSxFPW89Zy5mLFI9ISFmdW5jdGlvbigpe3RyeXt2YXIgdD1MLnJlc29sdmUoMSksZT0odC5jb25zdHJ1Y3Rvcj17fSlbbigyKShcInNwZWNpZXNcIildPWZ1bmN0aW9uKHQpe3QoayxrKX07cmV0dXJuKGp8fFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCkmJnQudGhlbihrKWluc3RhbmNlb2YgZSYmMCE9PVMuaW5kZXhPZihcIjYuNlwiKSYmLTE9PT13LmluZGV4T2YoXCJDaHJvbWUvNjZcIil9Y2F0Y2godCl7fX0oKSxUPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiEoIXAodCl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mKGU9dC50aGVuKSkmJmV9LEM9ZnVuY3Rpb24odCxlKXtpZighdC5fbil7dC5fbj0hMDt2YXIgbj10Ll9jO2IoZnVuY3Rpb24oKXtmb3IodmFyIHI9dC5fdixvPTE9PXQuX3MsaT0wO24ubGVuZ3RoPmk7KSFmdW5jdGlvbihlKXt2YXIgbixpLHUscz1vP2Uub2s6ZS5mYWlsLGM9ZS5yZXNvbHZlLGY9ZS5yZWplY3QsYT1lLmRvbWFpbjt0cnl7cz8ob3x8KDI9PXQuX2gmJkYodCksdC5faD0xKSwhMD09PXM/bj1yOihhJiZhLmVudGVyKCksbj1zKHIpLGEmJihhLmV4aXQoKSx1PSEwKSksbj09PWUucHJvbWlzZT9mKE8oXCJQcm9taXNlLWNoYWluIGN5Y2xlXCIpKTooaT1UKG4pKT9pLmNhbGwobixjLGYpOmMobikpOmYocil9Y2F0Y2godCl7YSYmIXUmJmEuZXhpdCgpLGYodCl9fShuW2krK10pO3QuX2M9W10sdC5fbj0hMSxlJiYhdC5faCYmQSh0KX0pfX0sQT1mdW5jdGlvbih0KXtfLmNhbGwoYyxmdW5jdGlvbigpe3ZhciBlLG4scixvPXQuX3YsaT1EKHQpO2lmKGkmJihlPW0oZnVuY3Rpb24oKXtqP00uZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLG8sdCk6KG49Yy5vbnVuaGFuZGxlZHJlamVjdGlvbik/bih7cHJvbWlzZTp0LHJlYXNvbjpvfSk6KHI9Yy5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcihcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLG8pfSksdC5faD1qfHxEKHQpPzI6MSksdC5fYT12b2lkIDAsaSYmZS5lKXRocm93IGUudn0pfSxEPWZ1bmN0aW9uKHQpe3JldHVybiAxIT09dC5faCYmMD09PSh0Ll9hfHx0Ll9jKS5sZW5ndGh9LEY9ZnVuY3Rpb24odCl7Xy5jYWxsKGMsZnVuY3Rpb24oKXt2YXIgZTtqP00uZW1pdChcInJlamVjdGlvbkhhbmRsZWRcIix0KTooZT1jLm9ucmVqZWN0aW9uaGFuZGxlZCkmJmUoe3Byb21pc2U6dCxyZWFzb246dC5fdn0pfSl9LHE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztlLl9kfHwoZS5fZD0hMCxlPWUuX3d8fGUsZS5fdj10LGUuX3M9MixlLl9hfHwoZS5fYT1lLl9jLnNsaWNlKCkpLEMoZSwhMCkpfSxJPWZ1bmN0aW9uKHQpe3ZhciBlLG49dGhpcztpZighbi5fZCl7bi5fZD0hMCxuPW4uX3d8fG47dHJ5e2lmKG49PT10KXRocm93IE8oXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTsoZT1UKHQpKT9iKGZ1bmN0aW9uKCl7dmFyIHI9e193Om4sX2Q6ITF9O3RyeXtlLmNhbGwodCxmKEksciwxKSxmKHEsciwxKSl9Y2F0Y2godCl7cS5jYWxsKHIsdCl9fSk6KG4uX3Y9dCxuLl9zPTEsQyhuLCExKSl9Y2F0Y2godCl7cS5jYWxsKHtfdzpuLF9kOiExfSx0KX19fTtSfHwoTD1mdW5jdGlvbih0KXtkKHRoaXMsTCxcIlByb21pc2VcIixcIl9oXCIpLHYodCksci5jYWxsKHRoaXMpO3RyeXt0KGYoSSx0aGlzLDEpLGYocSx0aGlzLDEpKX1jYXRjaCh0KXtxLmNhbGwodGhpcyx0KX19LHI9ZnVuY3Rpb24odCl7dGhpcy5fYz1bXSx0aGlzLl9hPXZvaWQgMCx0aGlzLl9zPTAsdGhpcy5fZD0hMSx0aGlzLl92PXZvaWQgMCx0aGlzLl9oPTAsdGhpcy5fbj0hMX0sci5wcm90b3R5cGU9big5NykoTC5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24odCxlKXt2YXIgbj1FKHkodGhpcyxMKSk7cmV0dXJuIG4ub2s9XCJmdW5jdGlvblwiIT10eXBlb2YgdHx8dCxuLmZhaWw9XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZSxuLmRvbWFpbj1qP00uZG9tYWluOnZvaWQgMCx0aGlzLl9jLnB1c2gobiksdGhpcy5fYSYmdGhpcy5fYS5wdXNoKG4pLHRoaXMuX3MmJkModGhpcywhMSksbi5wcm9taXNlfSxjYXRjaDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx0KX19KSxpPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHI7dGhpcy5wcm9taXNlPXQsdGhpcy5yZXNvbHZlPWYoSSx0LDEpLHRoaXMucmVqZWN0PWYocSx0LDEpfSxnLmY9RT1mdW5jdGlvbih0KXtyZXR1cm4gdD09PUx8fHQ9PT11P25ldyBpKHQpOm8odCl9KSxsKGwuRytsLlcrbC5GKiFSLHtQcm9taXNlOkx9KSxuKDIzKShMLFwiUHJvbWlzZVwiKSxuKDk4KShcIlByb21pc2VcIiksdT1uKDApLlByb21pc2UsbChsLlMrbC5GKiFSLFwiUHJvbWlzZVwiLHtyZWplY3Q6ZnVuY3Rpb24odCl7dmFyIGU9RSh0aGlzKTtyZXR1cm4oMCxlLnJlamVjdCkodCksZS5wcm9taXNlfX0pLGwobC5TK2wuRiooc3x8IVIpLFwiUHJvbWlzZVwiLHtyZXNvbHZlOmZ1bmN0aW9uKHQpe3JldHVybiB4KHMmJnRoaXM9PT11P0w6dGhpcyx0KX19KSxsKGwuUytsLkYqIShSJiZuKDk5KShmdW5jdGlvbih0KXtMLmFsbCh0KS5jYXRjaChrKX0pKSxcIlByb21pc2VcIix7YWxsOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1FKGUpLHI9bi5yZXNvbHZlLG89bi5yZWplY3QsaT1tKGZ1bmN0aW9uKCl7dmFyIG49W10saT0wLHU9MTtoKHQsITEsZnVuY3Rpb24odCl7dmFyIHM9aSsrLGM9ITE7bi5wdXNoKHZvaWQgMCksdSsrLGUucmVzb2x2ZSh0KS50aGVuKGZ1bmN0aW9uKHQpe2N8fChjPSEwLG5bc109dCwtLXV8fHIobikpfSxvKX0pLC0tdXx8cihuKX0pO3JldHVybiBpLmUmJm8oaS52KSxuLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPUUoZSkscj1uLnJlamVjdCxvPW0oZnVuY3Rpb24oKXtoKHQsITEsZnVuY3Rpb24odCl7ZS5yZXNvbHZlKHQpLnRoZW4obi5yZXNvbHZlLHIpfSl9KTtyZXR1cm4gby5lJiZyKG8udiksbi5wcm9taXNlfX0pfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixyKXtpZighKHQgaW5zdGFuY2VvZiBlKXx8dm9pZCAwIT09ciYmciBpbiB0KXRocm93IFR5cGVFcnJvcihuK1wiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxOCksbz1uKDkyKSxpPW4oOTMpLHU9big3KSxzPW4oNDYpLGM9big4NyksZj17fSxhPXt9LGU9dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGwscCl7dmFyIHYsZCxoLHksXz1wP2Z1bmN0aW9uKCl7cmV0dXJuIHR9OmModCksYj1yKG4sbCxlPzI6MSksZz0wO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIF8pdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGl0ZXJhYmxlIVwiKTtpZihpKF8pKXtmb3Iodj1zKHQubGVuZ3RoKTt2Pmc7ZysrKWlmKCh5PWU/Yih1KGQ9dFtnXSlbMF0sZFsxXSk6Yih0W2ddKSk9PT1mfHx5PT09YSlyZXR1cm4geX1lbHNlIGZvcihoPV8uY2FsbCh0KTshKGQ9aC5uZXh0KCkpLmRvbmU7KWlmKCh5PW8oaCxiLGQudmFsdWUsZSkpPT09Znx8eT09PWEpcmV0dXJuIHl9O2UuQlJFQUs9ZixlLlJFVFVSTj1hfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4sbyl7dHJ5e3JldHVybiBvP2UocihuKVswXSxuWzFdKTplKG4pfWNhdGNoKGUpe3ZhciBpPXQucmV0dXJuO3Rocm93IHZvaWQgMCE9PWkmJnIoaS5jYWxsKHQpKSxlfX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDE1KSxvPW4oMikoXCJpdGVyYXRvclwiKSxpPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJihyLkFycmF5PT09dHx8aVtvXT09PXQpfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXZvaWQgMD09PW47c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHI/dCgpOnQuY2FsbChuKTtjYXNlIDE6cmV0dXJuIHI/dChlWzBdKTp0LmNhbGwobixlWzBdKTtjYXNlIDI6cmV0dXJuIHI/dChlWzBdLGVbMV0pOnQuY2FsbChuLGVbMF0sZVsxXSk7Y2FzZSAzOnJldHVybiByP3QoZVswXSxlWzFdLGVbMl0pOnQuY2FsbChuLGVbMF0sZVsxXSxlWzJdKTtjYXNlIDQ6cmV0dXJuIHI/dChlWzBdLGVbMV0sZVsyXSxlWzNdKTp0LmNhbGwobixlWzBdLGVbMV0sZVsyXSxlWzNdKX1yZXR1cm4gdC5hcHBseShuLGUpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1uKDY0KS5zZXQsaT1yLk11dGF0aW9uT2JzZXJ2ZXJ8fHIuV2ViS2l0TXV0YXRpb25PYnNlcnZlcix1PXIucHJvY2VzcyxzPXIuUHJvbWlzZSxjPVwicHJvY2Vzc1wiPT1uKDE2KSh1KTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdCxlLG4sZj1mdW5jdGlvbigpe3ZhciByLG87Zm9yKGMmJihyPXUuZG9tYWluKSYmci5leGl0KCk7dDspe289dC5mbix0PXQubmV4dDt0cnl7bygpfWNhdGNoKHIpe3Rocm93IHQ/bigpOmU9dm9pZCAwLHJ9fWU9dm9pZCAwLHImJnIuZW50ZXIoKX07aWYoYyluPWZ1bmN0aW9uKCl7dS5uZXh0VGljayhmKX07ZWxzZSBpZighaXx8ci5uYXZpZ2F0b3ImJnIubmF2aWdhdG9yLnN0YW5kYWxvbmUpaWYocyYmcy5yZXNvbHZlKXt2YXIgYT1zLnJlc29sdmUodm9pZCAwKTtuPWZ1bmN0aW9uKCl7YS50aGVuKGYpfX1lbHNlIG49ZnVuY3Rpb24oKXtvLmNhbGwocixmKX07ZWxzZXt2YXIgbD0hMCxwPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO25ldyBpKGYpLm9ic2VydmUocCx7Y2hhcmFjdGVyRGF0YTohMH0pLG49ZnVuY3Rpb24oKXtwLmRhdGE9bD0hbH19cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXtmbjpyLG5leHQ6dm9pZCAwfTtlJiYoZS5uZXh0PW8pLHR8fCh0PW8sbigpKSxlPW99fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1yLm5hdmlnYXRvcjt0LmV4cG9ydHM9byYmby51c2VyQWdlbnR8fFwiXCJ9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDExKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgbyBpbiBlKW4mJnRbb10/dFtvXT1lW29dOnIodCxvLGVbb10pO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oMSksbz1uKDApLGk9big4KSx1PW4oNikscz1uKDIpKFwic3BlY2llc1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9XCJmdW5jdGlvblwiPT10eXBlb2Ygb1t0XT9vW3RdOnJbdF07dSYmZSYmIWVbc10mJmkuZihlLHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDIpKFwiaXRlcmF0b3JcIiksbz0hMTt0cnl7dmFyIGk9WzddW3JdKCk7aS5yZXR1cm49ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2godCl7fXQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKCFlJiYhbylyZXR1cm4hMTt2YXIgbj0hMTt0cnl7dmFyIGk9WzddLHU9aVtyXSgpO3UubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOm49ITB9fSxpW3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHV9LHQoaSl9Y2F0Y2godCl7fXJldHVybiBufX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oNSksbz1uKDApLGk9bigxKSx1PW4oNjMpLHM9big2Nik7cihyLlArci5SLFwiUHJvbWlzZVwiLHtmaW5hbGx5OmZ1bmN0aW9uKHQpe3ZhciBlPXUodGhpcyxvLlByb21pc2V8fGkuUHJvbWlzZSksbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0O3JldHVybiB0aGlzLnRoZW4obj9mdW5jdGlvbihuKXtyZXR1cm4gcyhlLHQoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiBufSl9OnQsbj9mdW5jdGlvbihuKXtyZXR1cm4gcyhlLHQoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IG59KX06dCl9fSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDUpLG89big0OCksaT1uKDY1KTtyKHIuUyxcIlByb21pc2VcIix7dHJ5OmZ1bmN0aW9uKHQpe3ZhciBlPW8uZih0aGlzKSxuPWkodCk7cmV0dXJuKG4uZT9lLnJlamVjdDplLnJlc29sdmUpKG4udiksZS5wcm9taXNlfX0pfSxmdW5jdGlvbih0LGUsbil7bigxMDMpLHQuZXhwb3J0cz1uKDApLk9iamVjdC5nZXRQcm90b3R5cGVPZn0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMzMpLG89big1OCk7big0OSkoXCJnZXRQcm90b3R5cGVPZlwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBvKHIodCkpfX0pfSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPXtkZWZhdWx0Om4oMTA1KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe24oMTA2KSx0LmV4cG9ydHM9bigwKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDUpO3Ioci5TLFwiT2JqZWN0XCIse3NldFByb3RvdHlwZU9mOm4oMTA3KS5zZXR9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOSksbz1uKDcpLGk9ZnVuY3Rpb24odCxlKXtpZihvKHQpLCFyKGUpJiZudWxsIT09ZSl0aHJvdyBUeXBlRXJyb3IoZStcIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSFcIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KFwiX19wcm90b19fXCJpbnt9P2Z1bmN0aW9uKHQsZSxyKXt0cnl7cj1uKDE4KShGdW5jdGlvbi5jYWxsLG4oNTApLmYoT2JqZWN0LnByb3RvdHlwZSxcIl9fcHJvdG9fX1wiKS5zZXQsMikscih0LFtdKSxlPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaCh0KXtlPSEwfXJldHVybiBmdW5jdGlvbih0LG4pe3JldHVybiBpKHQsbiksZT90Ll9fcHJvdG9fXz1uOnIodCxuKSx0fX0oe30sITEpOnZvaWQgMCksY2hlY2s6aX19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9e2RlZmF1bHQ6bigxMDkpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUsbil7bigxMTApO3ZhciByPW4oMCkuT2JqZWN0O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiByLmNyZWF0ZSh0LGUpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNSk7cihyLlMsXCJPYmplY3RcIix7Y3JlYXRlOm4oNDApfSl9LCwsLCwsLCwsLCwsLCwsLGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDI2KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQociksaT1uKDMpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPW4oNCksYz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGY9bigzNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGYpLGw9bigzNSkscD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHY9bigxMjcpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxoPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIE1pbmlCdXMoKXtyZXR1cm4oMCx1LmRlZmF1bHQpKHRoaXMsTWluaUJ1cyksKDAsYS5kZWZhdWx0KSh0aGlzLChNaW5pQnVzLl9fcHJvdG9fX3x8KDAsby5kZWZhdWx0KShNaW5pQnVzKSkuY2FsbCh0aGlzKSl9cmV0dXJuKDAscC5kZWZhdWx0KShNaW5pQnVzLHQpLCgwLGMuZGVmYXVsdCkoTWluaUJ1cyxbe2tleTpcInBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7cmV0dXJuIHIuX2dlbklkKHQpLHIuX3Jlc3BvbnNlQ2FsbGJhY2sodCxlLG4pLHIuX29uUG9zdE1lc3NhZ2UodCksdC5pZH19LHtrZXk6XCJfb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighZS5fb25SZXNwb25zZSh0KSl7dmFyIG49ZS5fc3Vic2NyaXB0aW9uc1t0LnRvXTtuPyhlLl9wdWJsaXNoT24obix0KSx0LnRvLnN0YXJ0c1dpdGgoXCJoeXBlcnR5XCIpfHxlLl9wdWJsaXNoT25EZWZhdWx0KHQpKTplLl9wdWJsaXNoT25EZWZhdWx0KHQpfX19XSksTWluaUJ1c30oZC5kZWZhdWx0KTtlLmRlZmF1bHQ9aCx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigxNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9bigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1uKDQpLGM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxmPW4oMzYpLGE9ZnVuY3Rpb24odCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfShmKSxsPWEuZ2V0TG9nZ2VyKFwiQnVzXCIpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBCdXMoKXsoMCx1LmRlZmF1bHQpKHRoaXMsQnVzKTt2YXIgdD10aGlzO3QuX21zZ0lkPTAsdC5fc3Vic2NyaXB0aW9ucz17fSx0Ll9yZXNwb25zZVRpbWVPdXQ9M2U0LHQuX3Jlc3BvbnNlQ2FsbGJhY2tzPXt9LHQuX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcigpfXJldHVybigwLGMuZGVmYXVsdCkoQnVzLFt7a2V5OlwiYWRkTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1uZXcgdihuLl9zdWJzY3JpcHRpb25zLHQsZSksbz1uLl9zdWJzY3JpcHRpb25zW3RdO3JldHVybiBvfHwobz1bXSxuLl9zdWJzY3JpcHRpb25zW3RdPW8pLG8ucHVzaChyKSxyfX0se2tleTpcImFkZFJlc3BvbnNlTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbdCtlXT1ufX0se2tleTpcInJlbW92ZVJlc3BvbnNlTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2RlbGV0ZSB0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1t0K2VdfX0se2tleTpcInJlbW92ZUFsbExpc3RlbmVyc09mXCIsdmFsdWU6ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuX3N1YnNjcmlwdGlvbnNbdF19fSx7a2V5OlwiYmluZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89dGhpcztyZXR1cm57dGhpc0xpc3RlbmVyOm8uYWRkTGlzdGVuZXIodCxmdW5jdGlvbih0KXtuLnBvc3RNZXNzYWdlKHQpfSksdGFyZ2V0TGlzdGVuZXI6bi5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKHQpe28ucG9zdE1lc3NhZ2UodCl9KSx1bmJpbmQ6ZnVuY3Rpb24oKXtyLnRoaXNMaXN0ZW5lci5yZW1vdmUoKSxyLnRhcmdldExpc3RlbmVyLnJlbW92ZSgpfX19fSx7a2V5OlwiX3B1Ymxpc2hPbkRlZmF1bHRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9zdWJzY3JpcHRpb25zW1wiKlwiXTtlJiZ0aGlzLl9wdWJsaXNoT24oZSx0KX19LHtrZXk6XCJfcHVibGlzaE9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0LmZvckVhY2goZnVuY3Rpb24odCl7dC5fY2FsbGJhY2soZSl9KX19LHtrZXk6XCJfcmVzcG9uc2VDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSxyPXRoaXM7aWYoZSl7dmFyIG89dC5mcm9tK3QuaWQ7ci5fcmVzcG9uc2VDYWxsYmFja3Nbb109ZSxuJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9ci5fcmVzcG9uc2VDYWxsYmFja3Nbb107aWYoZGVsZXRlIHIuX3Jlc3BvbnNlQ2FsbGJhY2tzW29dLGUpe2Uoe2lkOnQuaWQsdHlwZTpcInJlc3BvbnNlXCIsYm9keTp7Y29kZTo0MDgsZGVzYzpcIlJlc3BvbnNlIHRpbWVvdXQhXCIsdmFsdWU6dH19KX19LHIuX3Jlc3BvbnNlVGltZU91dCl9fX0se2tleTpcIl9vblJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZihcInJlc3BvbnNlXCI9PT10LnR5cGUpe3ZhciBuPXQudG8rdC5pZCxyPWUuX3Jlc3BvbnNlQ2FsbGJhY2tzW25dO2lmKHQuYm9keS5jb2RlPj0yMDAmJmRlbGV0ZSBlLl9yZXNwb25zZUNhbGxiYWNrc1tuXSxyKXJldHVybiByKHQpLCEwfXJldHVybiExfX0se2tleTpcIl9vbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCFlLl9vblJlc3BvbnNlKHQpKXt2YXIgbj1lLl9zdWJzY3JpcHRpb25zW3QudG9dO24/ZS5fcHVibGlzaE9uKG4sdCk6ZS5fcHVibGlzaE9uRGVmYXVsdCh0KX19fSx7a2V5OlwiX2dlbklkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5pZCYmMCE9PXQuaWR8fCh0aGlzLl9tc2dJZCsrLHQuaWQ9dGhpcy5fbXNnSWQpfX0se2tleTpcInBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt9fSx7a2V5OlwicG9zdE1lc3NhZ2VXaXRoUmV0cmllc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLGk9MCx1PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSxvKXtyLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24ocil7NDA4PT09ci5ib2R5LmNvZGV8fDUwMD09PXIuYm9keS5jb2RlP28oKToobC5pbmZvKFwiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBtc2cgZGVsaXZlcmVkOiBcIix0KSxuKHIpLGUoKSl9KX0pfTshZnVuY3Rpb24gdHJ5QWdhaW4oKXt1KCkudGhlbihmdW5jdGlvbigpe30sZnVuY3Rpb24oKXtpZihsLndhcm4oXCJbQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXNdIE1lc3NhZ2UgQm91bmNlZCAocmV0cnkgXCIraStcIik6ICdcIix0KSwhKGkrKzxlKSl7dmFyIG49XCJbRXJyb3JdIE1lc3NhZ2UgQm91bmNlZCAoZGVsaXZlcnkgYXR0ZW1wdHMgXCIrZStcIik6ICdcIjt0aHJvdyBuZXcgRXJyb3Iobit0KX10cnlBZ2FpbigpfSl9KCl9fSx7a2V5OlwiX29uUG9zdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt9fSx7a2V5OlwiX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSxCdXN9KCksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIE1zZ0xpc3RlbmVyKHQsZSxuKXsoMCx1LmRlZmF1bHQpKHRoaXMsTXNnTGlzdGVuZXIpO3ZhciByPXRoaXM7ci5fc3Vic2NyaXB0aW9ucz10LHIuX3VybD1lLHIuX2NhbGxiYWNrPW59cmV0dXJuKDAsYy5kZWZhdWx0KShNc2dMaXN0ZW5lcixbe2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuX3N1YnNjcmlwdGlvbnNbdC5fdXJsXTtpZihlKXt2YXIgbj1lLmluZGV4T2YodCk7ZS5zcGxpY2UobiwxKSwwPT09ZS5sZW5ndGgmJmRlbGV0ZSB0Ll9zdWJzY3JpcHRpb25zW3QuX3VybF19fX0se2tleTpcInVybFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fV0pLE1zZ0xpc3RlbmVyfSgpO2UuZGVmYXVsdD1wLHQuZXhwb3J0cz1lLmRlZmF1bHR9LCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigxMjYpLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShyKTtlLmRlZmF1bHQ9by5kZWZhdWx0LHQuZXhwb3J0cz1lLmRlZmF1bHR9XSl9KTsiLCIvLyB2ZXJzaW9uOiAwLjEzLjFcbi8vIGRhdGU6IEZyaSBBdWcgMzEgMjAxOCAwOTo1OTo1NiBHTVQrMDEwMCAoV2VzdGVybiBFdXJvcGVhbiBTdW1tZXIgVGltZSlcbi8vIGxpY2VuY2U6IFxuLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG5cbi8vIHZlcnNpb246IDAuMTMuMVxuLy8gZGF0ZTogRnJpIEF1ZyAzMSAyMDE4IDA5OjU5OjU2IEdNVCswMTAwIChXZXN0ZXJuIEV1cm9wZWFuIFN1bW1lciBUaW1lKVxuLy8gbGljZW5jZTogXG4vKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5cblxuIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJzYW5kYm94XCIsW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5zYW5kYm94PXQoKTplLnNhbmRib3g9dCgpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhyKXtpZih0W3JdKXJldHVybiB0W3JdLmV4cG9ydHM7dmFyIG49dFtyXT17aTpyLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbcl0uY2FsbChuLmV4cG9ydHMsbixuLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksbi5sPSEwLG4uZXhwb3J0c312YXIgdD17fTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPWUsX193ZWJwYWNrX3JlcXVpcmVfXy5jPXQsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGUsdCxyKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0OnJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQodCxcImFcIix0KSx0fSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LF9fd2VicGFja19yZXF1aXJlX18ucD1cIlwiLF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTE1MSl9KFtmdW5jdGlvbihlLHQpe3ZhciByPWUuZXhwb3J0cz17dmVyc2lvbjpcIjIuNS43XCJ9O1wibnVtYmVyXCI9PXR5cGVvZiBfX2UmJihfX2U9cil9LGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1wibnVtYmVyXCI9PXR5cGVvZiBfX2cmJihfX2c9cil9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDMwKShcIndrc1wiKSxvPXIoMjEpLGk9cigxKS5TeW1ib2wsYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpOyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWEmJmlbZV18fChhP2k6bykoXCJTeW1ib2wuXCIrZSkpfSkuc3RvcmU9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuX19lc01vZHVsZT0hMCx0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuX19lc01vZHVsZT0hMDt2YXIgbj1yKDYwKSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxvLmRlZmF1bHQpKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHQscil7cmV0dXJuIHQmJmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksciYmZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9fSgpfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxKSxvPXIoMCksaT1yKDE4KSxhPXIoMTEpLHM9cigxMCksdT1mdW5jdGlvbihlLHQscil7dmFyIGMsbCxkLGY9ZSZ1LkYscD1lJnUuRyx5PWUmdS5TLHY9ZSZ1LlAsaD1lJnUuQixfPWUmdS5XLGI9cD9vOm9bdF18fChvW3RdPXt9KSxtPWIucHJvdG90eXBlLGc9cD9uOnk/blt0XTooblt0XXx8e30pLnByb3RvdHlwZTtwJiYocj10KTtmb3IoYyBpbiByKShsPSFmJiZnJiZ2b2lkIDAhPT1nW2NdKSYmcyhiLGMpfHwoZD1sP2dbY106cltjXSxiW2NdPXAmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGdbY10/cltjXTpoJiZsP2koZCxuKTpfJiZnW2NdPT1kP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQscixuKXtpZih0aGlzIGluc3RhbmNlb2YgZSl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IGU7Y2FzZSAxOnJldHVybiBuZXcgZSh0KTtjYXNlIDI6cmV0dXJuIG5ldyBlKHQscil9cmV0dXJuIG5ldyBlKHQscixuKX1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiB0LnByb3RvdHlwZT1lLnByb3RvdHlwZSx0fShkKTp2JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBkP2koRnVuY3Rpb24uY2FsbCxkKTpkLHYmJigoYi52aXJ0dWFsfHwoYi52aXJ0dWFsPXt9KSlbY109ZCxlJnUuUiYmbSYmIW1bY10mJmEobSxjLGQpKSl9O3UuRj0xLHUuRz0yLHUuUz00LHUuUD04LHUuQj0xNix1Llc9MzIsdS5VPTY0LHUuUj0xMjgsZS5leHBvcnRzPXV9LGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrXCIgaXMgbm90IGFuIG9iamVjdCFcIik7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig3KSxvPXIoNDEpLGk9cigyOCksYT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dC5mPXIoNik/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHQ9aSh0LCEwKSxuKHIpLG8pdHJ5e3JldHVybiBhKGUsdCxyKX1jYXRjaChlKXt9aWYoXCJnZXRcImluIHJ8fFwic2V0XCJpbiByKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGU/bnVsbCE9PWU6XCJmdW5jdGlvblwiPT10eXBlb2YgZX19LGZ1bmN0aW9uKGUsdCl7dmFyIHI9e30uaGFzT3duUHJvcGVydHk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuY2FsbChlLHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOCksbz1yKDIwKTtlLmV4cG9ydHM9cig2KT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDU2KSxvPXIoMjUpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaChlKXtyZXR1cm4hMH19fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz0hMH0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9e319LGZ1bmN0aW9uKGUsdCl7dmFyIHI9e30udG9TdHJpbmc7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiByLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoODgpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLG8pe3JldHVybiBlLmNhbGwodCxyLG4sbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig0Miksbz1yKDMxKTtlLmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsbyl9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LGZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPU1hdGgucmFuZG9tKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVyblwiU3ltYm9sKFwiLmNvbmNhdCh2b2lkIDA9PT1lP1wiXCI6ZSxcIilfXCIsKCsrcituKS50b1N0cmluZygzNikpfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZStcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig4KS5mLG89cigxMCksaT1yKDIpKFwidG9TdHJpbmdUYWdcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhbyhlPXI/ZTplLnByb3RvdHlwZSxpKSYmbihlLGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSxmdW5jdGlvbihlLHQpe3ZhciByPU1hdGguY2VpbCxuPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bjpyKShlKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIrZSk7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTAyKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0KXt0LmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpKXJldHVybiBlO3ZhciByLG87aWYodCYmXCJmdW5jdGlvblwiPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKHI9ZS52YWx1ZU9mKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO2lmKCF0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzApKFwia2V5c1wiKSxvPXIoMjEpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09byhlKSl9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxvPXIoMSksaT1vW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHwob1tcIl9fY29yZS1qc19zaGFyZWRfX1wiXT17fSk7KGUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBpW2VdfHwoaVtlXT12b2lkIDAhPT10P3Q6e30pfSkoXCJ2ZXJzaW9uc1wiLFtdKS5wdXNoKHt2ZXJzaW9uOm4udmVyc2lvbixtb2RlOnIoMTQpP1wicHVyZVwiOlwiZ2xvYmFsXCIsY29weXJpZ2h0OlwiwqkgMjAxOCBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KVwifSl9LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPVwiY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mXCIuc3BsaXQoXCIsXCIpfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig5KSxvPXIoMSkuZG9jdW1lbnQsaT1uKG8pJiZuKG8uY3JlYXRlRWxlbWVudCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudChlKTp7fX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig1Myksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PSh2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6KDAsby5kZWZhdWx0KSh0KSkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/ZTp0fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXQuX19lc01vZHVsZT0hMDt2YXIgbj1yKDEwNCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxMDgpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNTMpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIisodm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOigwLHUuZGVmYXVsdCkodCkpKTtlLnByb3RvdHlwZT0oMCxhLmRlZmF1bHQpKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoby5kZWZhdWx0PygwLG8uZGVmYXVsdCkoZSx0KTplLl9fcHJvdG9fXz10KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvOyFmdW5jdGlvbihpLGEpe1widXNlIHN0cmljdFwiO249YSx2b2lkIDAhPT0obz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP24uY2FsbCh0LHIsdCxlKTpuKSYmKGUuZXhwb3J0cz1vKX0oMCxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGJpbmRNZXRob2QoZSx0KXt2YXIgcj1lW3RdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHIuYmluZClyZXR1cm4gci5iaW5kKGUpO3RyeXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChyLGUpfWNhdGNoKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkocixbZSxhcmd1bWVudHNdKX19fWZ1bmN0aW9uIHJlYWxNZXRob2Qocil7cmV0dXJuXCJkZWJ1Z1wiPT09ciYmKHI9XCJsb2dcIiksdHlwZW9mIGNvbnNvbGUhPT10JiYodm9pZCAwIT09Y29uc29sZVtyXT9iaW5kTWV0aG9kKGNvbnNvbGUscik6dm9pZCAwIT09Y29uc29sZS5sb2c/YmluZE1ldGhvZChjb25zb2xlLFwibG9nXCIpOmUpfWZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyh0LG4pe2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO3RoaXNbaV09bzx0P2U6dGhpcy5tZXRob2RGYWN0b3J5KGksdCxuKX10aGlzLmxvZz10aGlzLmRlYnVnfWZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMoZSxyLG4pe3JldHVybiBmdW5jdGlvbigpe3R5cGVvZiBjb25zb2xlIT09dCYmKHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHRoaXMscixuKSx0aGlzW2VdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fWZ1bmN0aW9uIGRlZmF1bHRNZXRob2RGYWN0b3J5KGUsdCxyKXtyZXR1cm4gcmVhbE1ldGhvZChlKXx8ZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlcy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gTG9nZ2VyKGUsbixvKXtmdW5jdGlvbiBwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKGUpe3ZhciBuPShyW2VdfHxcInNpbGVudFwiKS50b1VwcGVyQ2FzZSgpO2lmKHR5cGVvZiB3aW5kb3chPT10KXt0cnl7cmV0dXJuIHZvaWQod2luZG93LmxvY2FsU3RvcmFnZVtzXT1uKX1jYXRjaChlKXt9dHJ5e3dpbmRvdy5kb2N1bWVudC5jb29raWU9ZW5jb2RlVVJJQ29tcG9uZW50KHMpK1wiPVwiK24rXCI7XCJ9Y2F0Y2goZSl7fX19ZnVuY3Rpb24gZ2V0UGVyc2lzdGVkTGV2ZWwoKXt2YXIgZTtpZih0eXBlb2Ygd2luZG93IT09dCl7dHJ5e2U9d2luZG93LmxvY2FsU3RvcmFnZVtzXX1jYXRjaChlKXt9aWYodHlwZW9mIGU9PT10KXRyeXt2YXIgcj13aW5kb3cuZG9jdW1lbnQuY29va2llLG49ci5pbmRleE9mKGVuY29kZVVSSUNvbXBvbmVudChzKStcIj1cIik7LTEhPT1uJiYoZT0vXihbXjtdKykvLmV4ZWMoci5zbGljZShuKSlbMV0pfWNhdGNoKGUpe31yZXR1cm4gdm9pZCAwPT09YS5sZXZlbHNbZV0mJihlPXZvaWQgMCksZX19dmFyIGksYT10aGlzLHM9XCJsb2dsZXZlbFwiO2UmJihzKz1cIjpcIitlKSxhLm5hbWU9ZSxhLmxldmVscz17VFJBQ0U6MCxERUJVRzoxLElORk86MixXQVJOOjMsRVJST1I6NCxTSUxFTlQ6NX0sYS5tZXRob2RGYWN0b3J5PW98fGRlZmF1bHRNZXRob2RGYWN0b3J5LGEuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gaX0sYS5zZXRMZXZlbD1mdW5jdGlvbihyLG4pe2lmKFwic3RyaW5nXCI9PXR5cGVvZiByJiZ2b2lkIDAhPT1hLmxldmVsc1tyLnRvVXBwZXJDYXNlKCldJiYocj1hLmxldmVsc1tyLnRvVXBwZXJDYXNlKCldKSwhKFwibnVtYmVyXCI9PXR5cGVvZiByJiZyPj0wJiZyPD1hLmxldmVscy5TSUxFTlQpKXRocm93XCJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiBcIityO2lmKGk9ciwhMSE9PW4mJnBlcnNpc3RMZXZlbElmUG9zc2libGUocikscmVwbGFjZUxvZ2dpbmdNZXRob2RzLmNhbGwoYSxyLGUpLHR5cGVvZiBjb25zb2xlPT09dCYmcjxhLmxldmVscy5TSUxFTlQpcmV0dXJuXCJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZ1wifSxhLnNldERlZmF1bHRMZXZlbD1mdW5jdGlvbihlKXtnZXRQZXJzaXN0ZWRMZXZlbCgpfHxhLnNldExldmVsKGUsITEpfSxhLmVuYWJsZUFsbD1mdW5jdGlvbihlKXthLnNldExldmVsKGEubGV2ZWxzLlRSQUNFLGUpfSxhLmRpc2FibGVBbGw9ZnVuY3Rpb24oZSl7YS5zZXRMZXZlbChhLmxldmVscy5TSUxFTlQsZSl9O3ZhciB1PWdldFBlcnNpc3RlZExldmVsKCk7bnVsbD09dSYmKHU9bnVsbD09bj9cIldBUk5cIjpuKSxhLnNldExldmVsKHUsITEpfXZhciBlPWZ1bmN0aW9uKCl7fSx0PVwidW5kZWZpbmVkXCIscj1bXCJ0cmFjZVwiLFwiZGVidWdcIixcImluZm9cIixcIndhcm5cIixcImVycm9yXCJdLG49bmV3IExvZ2dlcixvPXt9O24uZ2V0TG9nZ2VyPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlfHxcIlwiPT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTt2YXIgdD1vW2VdO3JldHVybiB0fHwodD1vW2VdPW5ldyBMb2dnZXIoZSxuLmdldExldmVsKCksbi5tZXRob2RGYWN0b3J5KSksdH07dmFyIGk9dHlwZW9mIHdpbmRvdyE9PXQ/d2luZG93LmxvZzp2b2lkIDA7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT09dCYmd2luZG93LmxvZz09PW4mJih3aW5kb3cubG9nPWkpLG59LG4uZ2V0TG9nZ2Vycz1mdW5jdGlvbigpe3JldHVybiBvfSxufSl9LGZ1bmN0aW9uKGUsdCxyKXt0LmY9cigyKX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSksbz1yKDApLGk9cigxNCksYT1yKDM3KSxzPXIoOCkuZjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9by5TeW1ib2x8fChvLlN5bWJvbD1pP3t9Om4uU3ltYm9sfHx7fSk7XCJfXCI9PWUuY2hhckF0KDApfHxlIGluIHR8fHModCxlLHt2YWx1ZTphLmYoZSl9KX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBkaXZpZGVVUkwoZSl7ZnVuY3Rpb24gcmVjdXJzZShlKXt2YXIgdD0vKFthLXpBLVotXSopKDpcXC9cXC8oPzpcXC4pP3w6KShbLWEtekEtWjAtOUA6JS5fK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fK34jPVxcL10qKS9naTtyZXR1cm4gZS5yZXBsYWNlKHQsXCIkMSwkMywkNFwiKS5zcGxpdChcIixcIil9dmFyIHQ9cmVjdXJzZShlKTtpZih0WzBdPT09ZSYmIXRbMF0uaW5jbHVkZXMoXCJAXCIpKXtyZXR1cm57dHlwZTpcIlwiLGRvbWFpbjplLGlkZW50aXR5OlwiXCJ9fWlmKHRbMF09PT1lJiZ0WzBdLmluY2x1ZGVzKFwiQFwiKSl7dD1yZWN1cnNlKCh0WzBdPT09ZT9cInNtdHBcIjp0WzBdKStcIjovL1wiK3RbMF0pfXJldHVybiB0WzFdLmluY2x1ZGVzKFwiQFwiKSYmKHRbMl09dFswXStcIjovL1wiK3RbMV0sdFsxXT10WzFdLnN1YnN0cih0WzFdLmluZGV4T2YoXCJAXCIpKzEpKSx7dHlwZTp0WzBdLGRvbWFpbjp0WzFdLGlkZW50aXR5OnRbMl19fWZ1bmN0aW9uIGVtcHR5T2JqZWN0KGUpe3JldHVybiEoKDAsYS5kZWZhdWx0KShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gc2Vjb25kc1NpbmNlRXBvY2goKXtyZXR1cm4gTWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyl9ZnVuY3Rpb24gZGVlcENsb25lKGUpe2lmKGUpcmV0dXJuIEpTT04ucGFyc2UoKDAsby5kZWZhdWx0KShlKSl9ZnVuY3Rpb24gcmVtb3ZlUGF0aEZyb21VUkwoZSl7dmFyIHQ9ZS5zcGxpdChcIi9cIik7cmV0dXJuIHRbMF0rXCIvL1wiK3RbMl0rXCIvXCIrdFszXX1mdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKGUpe3ZhciB0PWUuaW5kZXhPZihcIkBcIik7cmV0dXJuXCJ1c2VyOi8vXCIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKStcIi9cIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIGdldFVzZXJFbWFpbEZyb21VUkwoZSl7dmFyIHQ9ZGl2aWRlVVJMKGUpO3JldHVybiB0LmlkZW50aXR5LnJlcGxhY2UoXCIvXCIsXCJcIikrXCJAXCIrdC5kb21haW59ZnVuY3Rpb24gY29udmVydFRvVXNlclVSTChlKXtpZihcInVzZXI6Ly9cIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PWRpdmlkZVVSTChlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvd1widXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdFwifXJldHVybiBnZXRVc2VyVVJMRnJvbUVtYWlsKGUpfWZ1bmN0aW9uIGlzRGF0YU9iamVjdFVSTChlKXt2YXIgdD1bXCJkb21haW4taWRwXCIsXCJydW50aW1lXCIsXCJkb21haW5cIixcImh5cGVydHlcIl0scj1lLnNwbGl0KFwiOi8vXCIpLG49clswXTtyZXR1cm4tMT09PXQuaW5kZXhPZihuKX1mdW5jdGlvbiBpc0xlZ2FjeShlKXtyZXR1cm4gZS5zcGxpdChcIkBcIikubGVuZ3RoPjF9ZnVuY3Rpb24gaXNVUkwoZSl7cmV0dXJuIGUuc3BsaXQoXCIvXCIpLmxlbmd0aD49M31mdW5jdGlvbiBpc1VzZXJVUkwoZSl7cmV0dXJuXCJ1c2VyXCI9PT1kaXZpZGVVUkwoZSkudHlwZX1mdW5jdGlvbiBpc0h5cGVydHlVUkwoZSl7cmV0dXJuXCJoeXBlcnR5XCI9PT1kaXZpZGVVUkwoZSkudHlwZX1mdW5jdGlvbiBnZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzKGUsdCxyKXtyZXR1cm4gZVt0XVtyXX1mdW5jdGlvbiBidWlsZFVSTChlLHQscixuKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSYmYXJndW1lbnRzWzRdLGE9ZVt0XSxzPXZvaWQgMDtpZighYS5oYXNPd25Qcm9wZXJ0eShyKSl0aHJvdyBFcnJvcihcIlRoZSBjb25maWd1cmF0aW9uIFwiKygwLG8uZGVmYXVsdCkoYSxcIlwiLDIpK1wiIGRvbid0IGhhdmUgdGhlIFwiK3IrXCIgcmVzb3VyY2UgeW91IGFyZSBsb29raW5nIGZvclwiKTt2YXIgdT1hW3JdO3JldHVybiBuPyhzPXUucHJlZml4K2UuZG9tYWluK3Uuc3VmZml4K24sdS5oYXNPd25Qcm9wZXJ0eShcImZhbGxiYWNrXCIpJiZpJiYocz11LmZhbGxiYWNrLmluZGV4T2YoXCIlZG9tYWluJVwiKT91LmZhbGxiYWNrLnJlcGxhY2UoLyglZG9tYWluJSkvZyxlLmRvbWFpbikrbjp1LmZhbGxiYWNrK24pKTpzPXUucHJlZml4K2UuZG9tYWluK3Uuc3VmZml4LHN9ZnVuY3Rpb24gZ2VuZXJhdGVHVUlEKCl7ZnVuY3Rpb24gczQoKXtyZXR1cm4gTWF0aC5mbG9vcig2NTUzNiooMStNYXRoLnJhbmRvbSgpKSkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKX1yZXR1cm4gczQoKStzNCgpK1wiLVwiK3M0KCkrXCItXCIrczQoKStcIi1cIitzNCgpK1wiLVwiK3M0KCkrczQoKStzNCgpfWZ1bmN0aW9uIGdldFVzZXJJZGVudGl0eURvbWFpbihlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdChcIi5cIiksbj1yLmxlbmd0aDtyZXR1cm4gMT09bj9yW24tMV06cltuLTJdK1wiLlwiK3Jbbi0xXX1mdW5jdGlvbiBpc0JhY2tlbmRTZXJ2aWNlVVJMKGUpe3ZhciB0PWRpdmlkZVVSTChlKSxyPXQuZG9tYWluLnNwbGl0KFwiLlwiKSxuPVtcImRvbWFpblwiLFwiZ2xvYmFsXCIsXCJkb21haW4taWRwXCJdLG89W1wicmVnaXN0cnlcIixcIm1zZy1ub2RlXCJdLGk9dm9pZCAwO3JldHVybiByLmxlbmd0aD4xJiYoaT1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4tMSE9PW8uaW5kZXhPZihlKX0pWzBdKSwhKCFpfHwtMT09PW8uaW5kZXhPZihpKSl8fCEhdC50eXBlJiYtMSE9PW4uaW5kZXhPZih0LnR5cGUpfWZ1bmN0aW9uIGRpdmlkZUVtYWlsKGUpe3ZhciB0PWUuaW5kZXhPZihcIkBcIik7cmV0dXJue3VzZXJuYW1lOmUuc3Vic3RyaW5nKDAsdCksZG9tYWluOmUuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCl9fWZ1bmN0aW9uIGFzc2lnbihlLHQscil7ZXx8KGU9e30pLFwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1wYXJzZUF0dHJpYnV0ZXModCkpO2Zvcih2YXIgbj10Lmxlbmd0aC0xLG89MDtvPG47KytvKXt2YXIgaT10W29dO2kgaW4gZXx8KGVbaV09e30pLGU9ZVtpXX1lW3Rbbl1dPXJ9ZnVuY3Rpb24gc3BsaXRPYmplY3RVUkwoZSl7dmFyIHQ9ZS5zcGxpdChcIi9cIikscj10WzBdK1wiLy9cIit0WzJdK1wiL1wiK3RbM10sbj10WzVdLG89e3VybDpyLHJlc291cmNlOm59O3JldHVybiBvfWZ1bmN0aW9uIGNoZWNrQXR0cmlidXRlKGUpe3ZhciB0PS8oKChbYS16QS1aXSspOlxcL1xcLyhbMC05YS16QS1aXVstXFx3XSpbMC05YS16QS1aXVxcLikrW2EtekEtWl17Miw5fSlcXC9bYS16QS1aMC05Ll0rQFthLXpBLVowLTldKygtKT9bYS16QS1aMC05XSsoXFwuKT9bYS16QS1aMC05XXsyLDEwfT9cXC5bYS16QS1aXXsyLDEwfSkoLisoPz0uaWRlbnRpdHkpKT8vZ20scj1bXSxuPVtdO2lmKG51bGw9PWUubWF0Y2godCkpbj1lLnNwbGl0KFwiLlwiKTtlbHNle2Zvcih2YXIgbz12b2lkIDA7bnVsbCE9PShvPXQuZXhlYyhlKSk7KW8uaW5kZXg9PT10Lmxhc3RJbmRleCYmdC5sYXN0SW5kZXgrKyxvLmZvckVhY2goZnVuY3Rpb24oZSx0KXswPT09dCYmci5wdXNoKGUpfSk7dmFyIGk9dm9pZCAwO3IuZm9yRWFjaChmdW5jdGlvbih0KXtpPWUucmVwbGFjZSh0LFwiKi0qXCIpLG49aS5zcGxpdChcIi5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiKi0qXCI9PT1lP3Q6ZX0pfSl9cmV0dXJuIG59ZnVuY3Rpb24gcGFyc2VBdHRyaWJ1dGVzKGUpe3ZhciB0PS8oWzAtOWEtekEtWl1bLVxcd10qKTpcXC9cXC8vZztpZihlLmluY2x1ZGVzKFwiOi8vXCIpKXt2YXIgcj1lLnNwbGl0KHQpWzBdLG49ci5zcGxpdChcIi5cIiksbz1lLnJlcGxhY2UocixcIlwiKTtpZihlLmluY2x1ZGVzKFwiaWRlbnRpdHlcIikpe3ZhciBpPW8uc3BsaXQoXCJpZGVudGl0eS5cIik7bz1pWzBdLnNsaWNlKFwiLlwiLC0xKSxpPWlbMV0uc3BsaXQoXCIuXCIpLG4ucHVzaChvLFwiaWRlbnRpdHlcIiksbj1uLmNvbmNhdChpKX1lbHNlIG4ucHVzaChvKTtyZXR1cm4gbi5maWx0ZXIoQm9vbGVhbil9cmV0dXJuIGUuc3BsaXQoXCIuXCIpfWZ1bmN0aW9uIGlzRW1wdHkoZSl7Zm9yKHZhciB0IGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eSh0KSlyZXR1cm4hMTtyZXR1cm4oMCxvLmRlZmF1bHQpKGUpPT09KDAsby5kZWZhdWx0KSh7fSl9ZnVuY3Rpb24gY2hhdGtleXNUb1N0cmluZ0Nsb25lcihlKXt2YXIgdD17fSxyPSgwLGEuZGVmYXVsdCkoZSk7aWYocil0cnl7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDtuKyspe3ZhciBvPXJbbl07dFtvXT17fSx0W29dLnNlc3Npb25LZXk9ZVtvXS5zZXNzaW9uS2V5LnRvU3RyaW5nKCksdFtvXS5pc1RvRW5jcnlwdD1lW29dLmlzVG9FbmNyeXB0fX1jYXRjaChlKXt9cmV0dXJuIHR9ZnVuY3Rpb24gY2hhdGtleXNUb0FycmF5Q2xvbmVyKGUpe3ZhciB0PXt9LHI9KDAsYS5kZWZhdWx0KShlKTtpZihyKXRyeXtmb3IodmFyIG49MDtuPHIubGVuZ3RoO24rKyl7dmFyIG89cltuXTt0W29dPXt9O3ZhciBpPUpTT04ucGFyc2UoXCJbXCIrZVtvXS5zZXNzaW9uS2V5K1wiXVwiKTt0W29dLnNlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoaSksdFtvXS5pc1RvRW5jcnlwdD1lW29dLmlzVG9FbmNyeXB0fX1jYXRjaChlKXt9cmV0dXJuIHR9ZnVuY3Rpb24gcGFyc2VNZXNzYWdlVVJMKGUpe3ZhciB0PWUuc3BsaXQoXCIvXCIpO3JldHVybiB0Lmxlbmd0aDw9Nj90WzBdK1wiLy9cIit0WzJdK1wiL1wiK3RbM106dFswXStcIi8vXCIrdFsyXStcIi9cIit0WzNdK1wiL1wiK3RbNF19ZnVuY3Rpb24gYXZhaWxhYmxlU3BhY2UoZSx0KXt2YXIgcj0oZS90KS50b0ZpeGVkKDIpO3JldHVybntxdW90YTp0LHVzYWdlOmUscGVyY2VudDpOdW1iZXIocil9fWZ1bmN0aW9uIGVuY29kZShlKXt0cnl7dmFyIHQ9c3RyaW5naWZ5KGUpO3JldHVybiBidG9hKHQpfWNhdGNoKGUpe3Rocm93IGV9fWZ1bmN0aW9uIGRlY29kZShlKXt0cnl7cmV0dXJuIEpTT04ucGFyc2UoYXRvYihlKSl9Y2F0Y2goZSl7dGhyb3cgZX19ZnVuY3Rpb24gZGVjb2RlVG9VaW50OEFycmF5KGUpe3RyeXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZGVjb2RlKGUpKX1jYXRjaChlKXt0aHJvdyBlfX1mdW5jdGlvbiBzdHJpbmdpZnkoZSl7dHJ5e3JldHVybiBlLmNvbnN0cnVjdG9yPT09VWludDhBcnJheT9cIltcIitlLnRvU3RyaW5nKCkrXCJdXCI6KDAsby5kZWZhdWx0KShlKX1jYXRjaChlKXt0aHJvdyBlfX1mdW5jdGlvbiBwYXJzZShlKXt0cnl7cmV0dXJuIEpTT04ucGFyc2UoZSl9Y2F0Y2goZSl7dGhyb3cgZX19ZnVuY3Rpb24gcGFyc2VUb1VpbnQ4QXJyYXkoZSl7dHJ5e3JldHVybiBuZXcgVWludDhBcnJheShwYXJzZShlKSl9Y2F0Y2goZSl7dGhyb3cgZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig2OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0NCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpO3QuZGl2aWRlVVJMPWRpdmlkZVVSTCx0LmVtcHR5T2JqZWN0PWVtcHR5T2JqZWN0LHQuc2Vjb25kc1NpbmNlRXBvY2g9c2Vjb25kc1NpbmNlRXBvY2gsdC5kZWVwQ2xvbmU9ZGVlcENsb25lLHQucmVtb3ZlUGF0aEZyb21VUkw9cmVtb3ZlUGF0aEZyb21VUkwsdC5nZXRVc2VyVVJMRnJvbUVtYWlsPWdldFVzZXJVUkxGcm9tRW1haWwsdC5nZXRVc2VyRW1haWxGcm9tVVJMPWdldFVzZXJFbWFpbEZyb21VUkwsdC5jb252ZXJ0VG9Vc2VyVVJMPWNvbnZlcnRUb1VzZXJVUkwsdC5pc0RhdGFPYmplY3RVUkw9aXNEYXRhT2JqZWN0VVJMLHQuaXNMZWdhY3k9aXNMZWdhY3ksdC5pc1VSTD1pc1VSTCx0LmlzVXNlclVSTD1pc1VzZXJVUkwsdC5pc0h5cGVydHlVUkw9aXNIeXBlcnR5VVJMLHQuZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcz1nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzLHQuYnVpbGRVUkw9YnVpbGRVUkwsdC5nZW5lcmF0ZUdVSUQ9Z2VuZXJhdGVHVUlELHQuZ2V0VXNlcklkZW50aXR5RG9tYWluPWdldFVzZXJJZGVudGl0eURvbWFpbix0LmlzQmFja2VuZFNlcnZpY2VVUkw9aXNCYWNrZW5kU2VydmljZVVSTCx0LmRpdmlkZUVtYWlsPWRpdmlkZUVtYWlsLHQuYXNzaWduPWFzc2lnbix0LnNwbGl0T2JqZWN0VVJMPXNwbGl0T2JqZWN0VVJMLHQuY2hlY2tBdHRyaWJ1dGU9Y2hlY2tBdHRyaWJ1dGUsdC5wYXJzZUF0dHJpYnV0ZXM9cGFyc2VBdHRyaWJ1dGVzLHQuaXNFbXB0eT1pc0VtcHR5LHQuY2hhdGtleXNUb1N0cmluZ0Nsb25lcj1jaGF0a2V5c1RvU3RyaW5nQ2xvbmVyLHQuY2hhdGtleXNUb0FycmF5Q2xvbmVyPWNoYXRrZXlzVG9BcnJheUNsb25lcix0LnBhcnNlTWVzc2FnZVVSTD1wYXJzZU1lc3NhZ2VVUkwsdC5hdmFpbGFibGVTcGFjZT1hdmFpbGFibGVTcGFjZSx0LmVuY29kZT1lbmNvZGUsdC5kZWNvZGU9ZGVjb2RlLHQuZGVjb2RlVG9VaW50OEFycmF5PWRlY29kZVRvVWludDhBcnJheSx0LnN0cmluZ2lmeT1zdHJpbmdpZnksdC5wYXJzZT1wYXJzZSx0LnBhcnNlVG9VaW50OEFycmF5PXBhcnNlVG9VaW50OEFycmF5fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig3KSxvPXIoNzIpLGk9cigzMSksYT1yKDI5KShcIklFX1BST1RPXCIpLHM9ZnVuY3Rpb24oKXt9LHU9ZnVuY3Rpb24oKXt2YXIgZSx0PXIoMzIpKFwiaWZyYW1lXCIpLG49aS5sZW5ndGg7Zm9yKHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixyKDU3KS5hcHBlbmRDaGlsZCh0KSx0LnNyYz1cImphdmFzY3JpcHQ6XCIsZT10LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQsZS5vcGVuKCksZS53cml0ZShcIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XFwvc2NyaXB0PlwiKSxlLmNsb3NlKCksdT1lLkY7bi0tOylkZWxldGUgdS5wcm90b3R5cGVbaVtuXV07cmV0dXJuIHUoKX07ZS5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIG51bGwhPT1lPyhzLnByb3RvdHlwZT1uKGUpLHI9bmV3IHMscy5wcm90b3R5cGU9bnVsbCxyW2FdPWUpOnI9dSgpLHZvaWQgMD09PXQ/cjpvKHIsdCl9fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPSFyKDYpJiYhcigxMykoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIoMzIpKFwiZGl2XCIpLFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEwKSxvPXIoMTIpLGk9cig2MSkoITEpLGE9cigyOSkoXCJJRV9QUk9UT1wiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPW8oZSksdT0wLGM9W107Zm9yKHIgaW4gcylyIT1hJiZuKHMscikmJmMucHVzaChyKTtmb3IoO3QubGVuZ3RoPnU7KW4ocyxyPXRbdSsrXSkmJih+aShjLHIpfHxjLnB1c2gocikpO3JldHVybiBjfX0sZnVuY3Rpb24oZSx0KXt0LmY9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDExMiksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDcwKSghMCk7cig1MSkoU3RyaW5nLFwiU3RyaW5nXCIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyNCksbz1NYXRoLm1pbjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LGZ1bmN0aW9uKGUsdCxyKXtyKDczKTtmb3IodmFyIG49cigxKSxvPXIoMTEpLGk9cigxNSksYT1yKDIpKFwidG9TdHJpbmdUYWdcIikscz1cIkNTU1J1bGVMaXN0LENTU1N0eWxlRGVjbGFyYXRpb24sQ1NTVmFsdWVMaXN0LENsaWVudFJlY3RMaXN0LERPTVJlY3RMaXN0LERPTVN0cmluZ0xpc3QsRE9NVG9rZW5MaXN0LERhdGFUcmFuc2Zlckl0ZW1MaXN0LEZpbGVMaXN0LEhUTUxBbGxDb2xsZWN0aW9uLEhUTUxDb2xsZWN0aW9uLEhUTUxGb3JtRWxlbWVudCxIVE1MU2VsZWN0RWxlbWVudCxNZWRpYUxpc3QsTWltZVR5cGVBcnJheSxOYW1lZE5vZGVNYXAsTm9kZUxpc3QsUGFpbnRSZXF1ZXN0TGlzdCxQbHVnaW4sUGx1Z2luQXJyYXksU1ZHTGVuZ3RoTGlzdCxTVkdOdW1iZXJMaXN0LFNWR1BhdGhTZWdMaXN0LFNWR1BvaW50TGlzdCxTVkdTdHJpbmdMaXN0LFNWR1RyYW5zZm9ybUxpc3QsU291cmNlQnVmZmVyTGlzdCxTdHlsZVNoZWV0TGlzdCxUZXh0VHJhY2tDdWVMaXN0LFRleHRUcmFja0xpc3QsVG91Y2hMaXN0XCIuc3BsaXQoXCIsXCIpLHU9MDt1PHMubGVuZ3RoO3UrKyl7dmFyIGM9c1t1XSxsPW5bY10sZD1sJiZsLnByb3RvdHlwZTtkJiYhZFthXSYmbyhkLGEsYyksaVtjXT1pLkFycmF5fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoXCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvclwiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPW4odCksdGhpcy5yZWplY3Q9bihyKX12YXIgbj1yKDIyKTtlLmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KGUpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNSksbz1yKDApLGk9cigxMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KG8uT2JqZWN0fHx7fSlbZV18fE9iamVjdFtlXSxhPXt9O2FbZV09dChyKSxuKG4uUytuLkYqaShmdW5jdGlvbigpe3IoMSl9KSxcIk9iamVjdFwiLGEpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjcpLG89cigyMCksaT1yKDEyKSxhPXIoMjgpLHM9cigxMCksdT1yKDQxKSxjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7dC5mPXIoNik/YzpmdW5jdGlvbihlLHQpe2lmKGU9aShlKSx0PWEodCwhMCksdSl0cnl7cmV0dXJuIGMoZSx0KX1jYXRjaChlKXt9aWYocyhlLHQpKXJldHVybiBvKCFuLmYuY2FsbChlLHQpLGVbdF0pfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMTQpLG89cig1KSxpPXIoNTIpLGE9cigxMSkscz1yKDE1KSx1PXIoNzEpLGM9cigyMyksbD1yKDU4KSxkPXIoMikoXCJpdGVyYXRvclwiKSxmPSEoW10ua2V5cyYmXCJuZXh0XCJpbltdLmtleXMoKSkscD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIseSx2LGgsXyl7dShyLHQseSk7dmFyIGIsbSxnLFI9ZnVuY3Rpb24oZSl7aWYoIWYmJmUgaW4gailyZXR1cm4galtlXTtzd2l0Y2goZSl7Y2FzZVwia2V5c1wiOmNhc2VcInZhbHVlc1wiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LE89dCtcIiBJdGVyYXRvclwiLEQ9XCJ2YWx1ZXNcIj09dix3PSExLGo9ZS5wcm90b3R5cGUsTD1qW2RdfHxqW1wiQEBpdGVyYXRvclwiXXx8diYmalt2XSxrPUx8fFIodiksVT12P0Q/UihcImVudHJpZXNcIik6azp2b2lkIDAsTT1cIkFycmF5XCI9PXQ/ai5lbnRyaWVzfHxMOkw7aWYoTSYmKGc9bChNLmNhbGwobmV3IGUpKSkhPT1PYmplY3QucHJvdG90eXBlJiZnLm5leHQmJihjKGcsTywhMCksbnx8XCJmdW5jdGlvblwiPT10eXBlb2YgZ1tkXXx8YShnLGQscCkpLEQmJkwmJlwidmFsdWVzXCIhPT1MLm5hbWUmJih3PSEwLGs9ZnVuY3Rpb24oKXtyZXR1cm4gTC5jYWxsKHRoaXMpfSksbiYmIV98fCFmJiYhdyYmaltkXXx8YShqLGQsayksc1t0XT1rLHNbT109cCx2KWlmKGI9e3ZhbHVlczpEP2s6UihcInZhbHVlc1wiKSxrZXlzOmg/azpSKFwia2V5c1wiKSxlbnRyaWVzOlV9LF8pZm9yKG0gaW4gYiltIGluIGp8fGkoaixtLGJbbV0pO2Vsc2UgbyhvLlArby5GKihmfHx3KSx0LGIpO3JldHVybiBifX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz1yKDExKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXQuX19lc01vZHVsZT0hMDt2YXIgbj1yKDc2KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDc4KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmRlZmF1bHQmJlwic3ltYm9sXCI9PXR5cGVvZiBvLmRlZmF1bHQ/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5kZWZhdWx0JiZlLmNvbnN0cnVjdG9yPT09YS5kZWZhdWx0JiZlIT09YS5kZWZhdWx0LnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfTt0LmRlZmF1bHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgYS5kZWZhdWx0JiZcInN5bWJvbFwiPT09cyhvLmRlZmF1bHQpP2Z1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP1widW5kZWZpbmVkXCI6cyhlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZGVmYXVsdCYmZS5jb25zdHJ1Y3Rvcj09PWEuZGVmYXVsdCYmZSE9PWEuZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp2b2lkIDA9PT1lP1widW5kZWZpbmVkXCI6cyhlKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQyKSxvPXIoMzEpLmNvbmNhdChcImxlbmd0aFwiLFwicHJvdG90eXBlXCIpO3QuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSxvKX19LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxNik7ZS5leHBvcnRzPU9iamVjdChcInpcIikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVyblwiU3RyaW5nXCI9PW4oZSk/ZS5zcGxpdChcIlwiKTpPYmplY3QoZSl9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxKS5kb2N1bWVudDtlLmV4cG9ydHM9biYmbi5kb2N1bWVudEVsZW1lbnR9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEwKSxvPXIoMzMpLGk9cigyOSkoXCJJRV9QUk9UT1wiKSxhPU9iamVjdC5wcm90b3R5cGU7ZS5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSl7cmV0dXJuIGU9byhlKSxuKGUsaSk/ZVtpXTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yJiZlIGluc3RhbmNlb2YgZS5jb25zdHJ1Y3Rvcj9lLmNvbnN0cnVjdG9yLnByb3RvdHlwZTplIGluc3RhbmNlb2YgT2JqZWN0P2E6bnVsbH19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE2KSxvPXIoMikoXCJ0b1N0cmluZ1RhZ1wiKSxpPVwiQXJndW1lbnRzXCI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxhPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlW3RdfWNhdGNoKGUpe319O2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLHM7cmV0dXJuIHZvaWQgMD09PWU/XCJVbmRlZmluZWRcIjpudWxsPT09ZT9cIk51bGxcIjpcInN0cmluZ1wiPT10eXBlb2Yocj1hKHQ9T2JqZWN0KGUpLG8pKT9yOmk/bih0KTpcIk9iamVjdFwiPT0ocz1uKHQpKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5jYWxsZWU/XCJBcmd1bWVudHNcIjpzfX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDY3KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTIpLG89cig0NiksaT1yKDYyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixhKXt2YXIgcyx1PW4odCksYz1vKHUubGVuZ3RoKSxsPWkoYSxjKTtpZihlJiZyIT1yKXtmb3IoO2M+bDspaWYoKHM9dVtsKytdKSE9cylyZXR1cm4hMH1lbHNlIGZvcig7Yz5sO2wrKylpZigoZXx8bCBpbiB1KSYmdVtsXT09PXIpcmV0dXJuIGV8fGx8fDA7cmV0dXJuIWUmJi0xfX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI0KSxvPU1hdGgubWF4LGk9TWF0aC5taW47ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bihlKSxlPDA/byhlK3QsMCk6aShlLHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNyksbz1yKDIyKSxpPXIoMikoXCJzcGVjaWVzXCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGE9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09YXx8dm9pZCAwPT0ocj1uKGEpW2ldKT90Om8ocil9fSxmdW5jdGlvbihlLHQscil7dmFyIG4sbyxpLGE9cigxOCkscz1yKDk0KSx1PXIoNTcpLGM9cigzMiksbD1yKDEpLGQ9bC5wcm9jZXNzLGY9bC5zZXRJbW1lZGlhdGUscD1sLmNsZWFySW1tZWRpYXRlLHk9bC5NZXNzYWdlQ2hhbm5lbCx2PWwuRGlzcGF0Y2gsaD0wLF89e30sYj1mdW5jdGlvbigpe3ZhciBlPSt0aGlzO2lmKF8uaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PV9bZV07ZGVsZXRlIF9bZV0sdCgpfX0sbT1mdW5jdGlvbihlKXtiLmNhbGwoZS5kYXRhKX07ZiYmcHx8KGY9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIF9bKytoXT1mdW5jdGlvbigpe3MoXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKGgpLGh9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIF9bZV19LFwicHJvY2Vzc1wiPT1yKDE2KShkKT9uPWZ1bmN0aW9uKGUpe2QubmV4dFRpY2soYShiLGUsMSkpfTp2JiZ2Lm5vdz9uPWZ1bmN0aW9uKGUpe3Yubm93KGEoYixlLDEpKX06eT8obz1uZXcgeSxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9bSxuPWEoaS5wb3N0TWVzc2FnZSxpLDEpKTpsLmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhbC5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2wucG9zdE1lc3NhZ2UoZStcIlwiLFwiKlwiKX0sbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLG0sITEpKTpuPVwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBjKFwic2NyaXB0XCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYyhcInNjcmlwdFwiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGEoYixlLDEpLDApfSksZS5leHBvcnRzPXtzZXQ6ZixjbGVhcjpwfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybntlOiExLHY6ZSgpfX1jYXRjaChlKXtyZXR1cm57ZTohMCx2OmV9fX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpLG89cig5KSxpPXIoNDgpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKG4oZSksbyh0KSYmdC5jb25zdHJ1Y3Rvcj09PWUpcmV0dXJuIHQ7dmFyIHI9aS5mKGUpO3JldHVybigwLHIucmVzb2x2ZSkodCksci5wcm9taXNlfX0sZnVuY3Rpb24oZSx0LHIpe3IoNjgpO3ZhciBuPXIoMCkuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZGVmaW5lUHJvcGVydHkoZSx0LHIpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNSk7bihuLlMrbi5GKiFyKDYpLFwiT2JqZWN0XCIse2RlZmluZVByb3BlcnR5OnIoOCkuZn0pfSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTExKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjQpLG89cigyNSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLGEscz1TdHJpbmcobyh0KSksdT1uKHIpLGM9cy5sZW5ndGg7cmV0dXJuIHU8MHx8dT49Yz9lP1wiXCI6dm9pZCAwOihpPXMuY2hhckNvZGVBdCh1KSxpPDU1Mjk2fHxpPjU2MzE5fHx1KzE9PT1jfHwoYT1zLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fGE+NTczNDM/ZT9zLmNoYXJBdCh1KTppOmU/cy5zbGljZSh1LHUrMik6YS01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2KX19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig0MCksbz1yKDIwKSxpPXIoMjMpLGE9e307cigxMSkoYSxyKDIpKFwiaXRlcmF0b3JcIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLGUuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bihhLHtuZXh0Om8oMSxyKX0pLGkoZSx0K1wiIEl0ZXJhdG9yXCIpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOCksbz1yKDcpLGk9cigxOSk7ZS5leHBvcnRzPXIoNik/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSx0KXtvKGUpO2Zvcih2YXIgcixhPWkodCkscz1hLmxlbmd0aCx1PTA7cz51OyluLmYoZSxyPWFbdSsrXSx0W3JdKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDc0KSxvPXIoNzUpLGk9cigxNSksYT1yKDEyKTtlLmV4cG9ydHM9cig1MSkoQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD1hKGUpLHRoaXMuX2k9MCx0aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2sscj10aGlzLl9pKys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKTpcImtleXNcIj09dD9vKDAscik6XCJ2YWx1ZXNcIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sXCJ2YWx1ZXNcIiksaS5Bcmd1bWVudHM9aS5BcnJheSxuKFwia2V5c1wiKSxuKFwidmFsdWVzXCIpLG4oXCJlbnRyaWVzXCIpfSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbigpe319LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDc3KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3IoNDUpLHIoNDcpLGUuZXhwb3J0cz1yKDM3KS5mKFwiaXRlcmF0b3JcIil9LGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig3OSksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCxyKXtyKDgwKSxyKDU1KSxyKDg1KSxyKDg2KSxlLmV4cG9ydHM9cigwKS5TeW1ib2x9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDEpLG89cigxMCksaT1yKDYpLGE9cig1KSxzPXIoNTIpLHU9cig4MSkuS0VZLGM9cigxMyksbD1yKDMwKSxkPXIoMjMpLGY9cigyMSkscD1yKDIpLHk9cigzNyksdj1yKDM4KSxoPXIoODIpLF89cig4MyksYj1yKDcpLG09cig5KSxnPXIoMTIpLFI9cigyOCksTz1yKDIwKSxEPXIoNDApLHc9cig4NCksaj1yKDUwKSxMPXIoOCksaz1yKDE5KSxVPWouZixNPUwuZix4PXcuZixDPW4uU3ltYm9sLFA9bi5KU09OLEU9UCYmUC5zdHJpbmdpZnksUz1wKFwiX2hpZGRlblwiKSxxPXAoXCJ0b1ByaW1pdGl2ZVwiKSxJPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLFQ9bChcInN5bWJvbC1yZWdpc3RyeVwiKSxIPWwoXCJzeW1ib2xzXCIpLEE9bChcIm9wLXN5bWJvbHNcIiksTj1PYmplY3QucHJvdG90eXBlLEY9XCJmdW5jdGlvblwiPT10eXBlb2YgQyxCPW4uUU9iamVjdCxWPSFCfHwhQi5wcm90b3R5cGV8fCFCLnByb3RvdHlwZS5maW5kQ2hpbGQsej1pJiZjKGZ1bmN0aW9uKCl7cmV0dXJuIDchPUQoTSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyxcImFcIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49VShOLHQpO24mJmRlbGV0ZSBOW3RdLE0oZSx0LHIpLG4mJmUhPT1OJiZNKE4sdCxuKX06TSxHPWZ1bmN0aW9uKGUpe3ZhciB0PUhbZV09RChDLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSx0fSxXPUYmJlwic3ltYm9sXCI9PXR5cGVvZiBDLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEN9LEo9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPT09TiYmSihBLHQsciksYihlKSx0PVIodCwhMCksYihyKSxvKEgsdCk/KHIuZW51bWVyYWJsZT8obyhlLFMpJiZlW1NdW3RdJiYoZVtTXVt0XT0hMSkscj1EKHIse2VudW1lcmFibGU6TygwLCExKX0pKToobyhlLFMpfHxNKGUsUyxPKDEse30pKSxlW1NdW3RdPSEwKSx6KGUsdCxyKSk6TShlLHQscil9LFk9ZnVuY3Rpb24oZSx0KXtiKGUpO2Zvcih2YXIgcixuPWgodD1nKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KUooZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sWj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P0QoZSk6WShEKGUpLHQpfSxLPWZ1bmN0aW9uKGUpe3ZhciB0PUkuY2FsbCh0aGlzLGU9UihlLCEwKSk7cmV0dXJuISh0aGlzPT09TiYmbyhILGUpJiYhbyhBLGUpKSYmKCEodHx8IW8odGhpcyxlKXx8IW8oSCxlKXx8byh0aGlzLFMpJiZ0aGlzW1NdW2VdKXx8dCl9LFg9ZnVuY3Rpb24oZSx0KXtpZihlPWcoZSksdD1SKHQsITApLGUhPT1OfHwhbyhILHQpfHxvKEEsdCkpe3ZhciByPVUoZSx0KTtyZXR1cm4hcnx8IW8oSCx0KXx8byhlLFMpJiZlW1NdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfX0sJD1mdW5jdGlvbihlKXtmb3IodmFyIHQscj14KGcoZSkpLG49W10saT0wO3IubGVuZ3RoPmk7KW8oSCx0PXJbaSsrXSl8fHQ9PVN8fHQ9PXV8fG4ucHVzaCh0KTtyZXR1cm4gbn0sUT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1lPT09TixuPXgocj9BOmcoZSkpLGk9W10sYT0wO24ubGVuZ3RoPmE7KSFvKEgsdD1uW2ErK10pfHxyJiYhbyhOLHQpfHxpLnB1c2goSFt0XSk7cmV0dXJuIGl9O0Z8fChDPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIEMpdGhyb3cgVHlwZUVycm9yKFwiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIVwiKTt2YXIgZT1mKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSx0PWZ1bmN0aW9uKHIpe3RoaXM9PT1OJiZ0LmNhbGwoQSxyKSxvKHRoaXMsUykmJm8odGhpc1tTXSxlKSYmKHRoaXNbU11bZV09ITEpLHoodGhpcyxlLE8oMSxyKSl9O3JldHVybiBpJiZWJiZ6KE4sZSx7Y29uZmlndXJhYmxlOiEwLHNldDp0fSksRyhlKX0scyhDLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLGouZj1YLEwuZj1KLHIoNTQpLmY9dy5mPSQscigyNykuZj1LLHIoNDMpLmY9USxpJiYhcigxNCkmJnMoTixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsSywhMCkseS5mPWZ1bmN0aW9uKGUpe3JldHVybiBHKHAoZSkpfSksYShhLkcrYS5XK2EuRiohRix7U3ltYm9sOkN9KTtmb3IodmFyIGVlPVwiaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXNcIi5zcGxpdChcIixcIiksdGU9MDtlZS5sZW5ndGg+dGU7KXAoZWVbdGUrK10pO2Zvcih2YXIgcmU9ayhwLnN0b3JlKSxuZT0wO3JlLmxlbmd0aD5uZTspdihyZVtuZSsrXSk7YShhLlMrYS5GKiFGLFwiU3ltYm9sXCIse2ZvcjpmdW5jdGlvbihlKXtyZXR1cm4gbyhULGUrPVwiXCIpP1RbZV06VFtlXT1DKGUpfSxrZXlGb3I6ZnVuY3Rpb24oZSl7aWYoIVcoZSkpdGhyb3cgVHlwZUVycm9yKGUrXCIgaXMgbm90IGEgc3ltYm9sIVwiKTtmb3IodmFyIHQgaW4gVClpZihUW3RdPT09ZSlyZXR1cm4gdH0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7Vj0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7Vj0hMX19KSxhKGEuUythLkYqIUYsXCJPYmplY3RcIix7Y3JlYXRlOlosZGVmaW5lUHJvcGVydHk6SixkZWZpbmVQcm9wZXJ0aWVzOlksZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOlgsZ2V0T3duUHJvcGVydHlOYW1lczokLGdldE93blByb3BlcnR5U3ltYm9sczpRfSksUCYmYShhLlMrYS5GKighRnx8YyhmdW5jdGlvbigpe3ZhciBlPUMoKTtyZXR1cm5cIltudWxsXVwiIT1FKFtlXSl8fFwie31cIiE9RSh7YTplfSl8fFwie31cIiE9RShPYmplY3QoZSkpfSkpLFwiSlNPTlwiLHtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHIsbj1bZV0sbz0xO2FyZ3VtZW50cy5sZW5ndGg+bzspbi5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZihyPXQ9blsxXSwobSh0KXx8dm9pZCAwIT09ZSkmJiFXKGUpKXJldHVybiBfKHQpfHwodD1mdW5jdGlvbihlLHQpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLCFXKHQpKXJldHVybiB0fSksblsxXT10LEUuYXBwbHkoUCxuKX19KSxDLnByb3RvdHlwZVtxXXx8cigxMSkoQy5wcm90b3R5cGUscSxDLnByb3RvdHlwZS52YWx1ZU9mKSxkKEMsXCJTeW1ib2xcIiksZChNYXRoLFwiTWF0aFwiLCEwKSxkKG4uSlNPTixcIkpTT05cIiwhMCl9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIxKShcIm1ldGFcIiksbz1yKDkpLGk9cigxMCksYT1yKDgpLmYscz0wLHU9T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0sYz0hcigxMykoZnVuY3Rpb24oKXtyZXR1cm4gdShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLGw9ZnVuY3Rpb24oZSl7YShlLG4se3ZhbHVlOntpOlwiT1wiKyArK3Msdzp7fX19KX0sZD1mdW5jdGlvbihlLHQpe2lmKCFvKGUpKXJldHVyblwic3ltYm9sXCI9PXR5cGVvZiBlP2U6KFwic3RyaW5nXCI9PXR5cGVvZiBlP1wiU1wiOlwiUFwiKStlO2lmKCFpKGUsbikpe2lmKCF1KGUpKXJldHVyblwiRlwiO2lmKCF0KXJldHVyblwiRVwiO2woZSl9cmV0dXJuIGVbbl0uaX0sZj1mdW5jdGlvbihlLHQpe2lmKCFpKGUsbikpe2lmKCF1KGUpKXJldHVybiEwO2lmKCF0KXJldHVybiExO2woZSl9cmV0dXJuIGVbbl0ud30scD1mdW5jdGlvbihlKXtyZXR1cm4gYyYmeS5ORUVEJiZ1KGUpJiYhaShlLG4pJiZsKGUpLGV9LHk9ZS5leHBvcnRzPXtLRVk6bixORUVEOiExLGZhc3RLZXk6ZCxnZXRXZWFrOmYsb25GcmVlemU6cH19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE5KSxvPXIoNDMpLGk9cigyNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSkscj1vLmY7aWYocilmb3IodmFyIGEscz1yKGUpLHU9aS5mLGM9MDtzLmxlbmd0aD5jOyl1LmNhbGwoZSxhPXNbYysrXSkmJnQucHVzaChhKTtyZXR1cm4gdH19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE2KTtlLmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJBcnJheVwiPT1uKGUpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTIpLG89cig1NCkuZixpPXt9LnRvU3RyaW5nLGE9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBvKGUpfWNhdGNoKGUpe3JldHVybiBhLnNsaWNlKCl9fTtlLmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gYSYmXCJbb2JqZWN0IFdpbmRvd11cIj09aS5jYWxsKGUpP3MoZSk6byhuKGUpKX19LGZ1bmN0aW9uKGUsdCxyKXtyKDM4KShcImFzeW5jSXRlcmF0b3JcIil9LGZ1bmN0aW9uKGUsdCxyKXtyKDM4KShcIm9ic2VydmFibGVcIil9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDU5KSxvPXIoMikoXCJpdGVyYXRvclwiKSxpPXIoMTUpO2UuZXhwb3J0cz1yKDApLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9ZSlyZXR1cm4gZVtvXXx8ZVtcIkBAaXRlcmF0b3JcIl18fGlbbihlKV19fSxmdW5jdGlvbihlLHQscil7cig1NSkscig0NSkscig0Nykscig4OSkscigxMDApLHIoMTAxKSxlLmV4cG9ydHM9cigwKS5Qcm9taXNlfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4sbyxpLGEscz1yKDE0KSx1PXIoMSksYz1yKDE4KSxsPXIoNTkpLGQ9cig1KSxmPXIoOSkscD1yKDIyKSx5PXIoOTApLHY9cig5MSksaD1yKDYzKSxfPXIoNjQpLnNldCxiPXIoOTUpKCksbT1yKDQ4KSxnPXIoNjUpLFI9cig5NiksTz1yKDY2KSxEPXUuVHlwZUVycm9yLHc9dS5wcm9jZXNzLGo9dyYmdy52ZXJzaW9ucyxMPWomJmoudjh8fFwiXCIsaz11LlByb21pc2UsVT1cInByb2Nlc3NcIj09bCh3KSxNPWZ1bmN0aW9uKCl7fSx4PW89bS5mLEM9ISFmdW5jdGlvbigpe3RyeXt2YXIgZT1rLnJlc29sdmUoMSksdD0oZS5jb25zdHJ1Y3Rvcj17fSlbcigyKShcInNwZWNpZXNcIildPWZ1bmN0aW9uKGUpe2UoTSxNKX07cmV0dXJuKFV8fFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCkmJmUudGhlbihNKWluc3RhbmNlb2YgdCYmMCE9PUwuaW5kZXhPZihcIjYuNlwiKSYmLTE9PT1SLmluZGV4T2YoXCJDaHJvbWUvNjZcIil9Y2F0Y2goZSl7fX0oKSxQPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiEoIWYoZSl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mKHQ9ZS50aGVuKSkmJnR9LEU9ZnVuY3Rpb24oZSx0KXtpZighZS5fbil7ZS5fbj0hMDt2YXIgcj1lLl9jO2IoZnVuY3Rpb24oKXtmb3IodmFyIG49ZS5fdixvPTE9PWUuX3MsaT0wO3IubGVuZ3RoPmk7KSFmdW5jdGlvbih0KXt2YXIgcixpLGEscz1vP3Qub2s6dC5mYWlsLHU9dC5yZXNvbHZlLGM9dC5yZWplY3QsbD10LmRvbWFpbjt0cnl7cz8ob3x8KDI9PWUuX2gmJkkoZSksZS5faD0xKSwhMD09PXM/cj1uOihsJiZsLmVudGVyKCkscj1zKG4pLGwmJihsLmV4aXQoKSxhPSEwKSkscj09PXQucHJvbWlzZT9jKEQoXCJQcm9taXNlLWNoYWluIGN5Y2xlXCIpKTooaT1QKHIpKT9pLmNhbGwocix1LGMpOnUocikpOmMobil9Y2F0Y2goZSl7bCYmIWEmJmwuZXhpdCgpLGMoZSl9fShyW2krK10pO2UuX2M9W10sZS5fbj0hMSx0JiYhZS5faCYmUyhlKX0pfX0sUz1mdW5jdGlvbihlKXtfLmNhbGwodSxmdW5jdGlvbigpe3ZhciB0LHIsbixvPWUuX3YsaT1xKGUpO2lmKGkmJih0PWcoZnVuY3Rpb24oKXtVP3cuZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLG8sZSk6KHI9dS5vbnVuaGFuZGxlZHJlamVjdGlvbik/cih7cHJvbWlzZTplLHJlYXNvbjpvfSk6KG49dS5jb25zb2xlKSYmbi5lcnJvciYmbi5lcnJvcihcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLG8pfSksZS5faD1VfHxxKGUpPzI6MSksZS5fYT12b2lkIDAsaSYmdC5lKXRocm93IHQudn0pfSxxPWZ1bmN0aW9uKGUpe3JldHVybiAxIT09ZS5faCYmMD09PShlLl9hfHxlLl9jKS5sZW5ndGh9LEk9ZnVuY3Rpb24oZSl7Xy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdDtVP3cuZW1pdChcInJlamVjdGlvbkhhbmRsZWRcIixlKToodD11Lm9ucmVqZWN0aW9uaGFuZGxlZCkmJnQoe3Byb21pc2U6ZSxyZWFzb246ZS5fdn0pfSl9LFQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9kfHwodC5fZD0hMCx0PXQuX3d8fHQsdC5fdj1lLHQuX3M9Mix0Ll9hfHwodC5fYT10Ll9jLnNsaWNlKCkpLEUodCwhMCkpfSxIPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5fZCl7ci5fZD0hMCxyPXIuX3d8fHI7dHJ5e2lmKHI9PT1lKXRocm93IEQoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTsodD1QKGUpKT9iKGZ1bmN0aW9uKCl7dmFyIG49e193OnIsX2Q6ITF9O3RyeXt0LmNhbGwoZSxjKEgsbiwxKSxjKFQsbiwxKSl9Y2F0Y2goZSl7VC5jYWxsKG4sZSl9fSk6KHIuX3Y9ZSxyLl9zPTEsRShyLCExKSl9Y2F0Y2goZSl7VC5jYWxsKHtfdzpyLF9kOiExfSxlKX19fTtDfHwoaz1mdW5jdGlvbihlKXt5KHRoaXMsayxcIlByb21pc2VcIixcIl9oXCIpLHAoZSksbi5jYWxsKHRoaXMpO3RyeXtlKGMoSCx0aGlzLDEpLGMoVCx0aGlzLDEpKX1jYXRjaChlKXtULmNhbGwodGhpcyxlKX19LG49ZnVuY3Rpb24oZSl7dGhpcy5fYz1bXSx0aGlzLl9hPXZvaWQgMCx0aGlzLl9zPTAsdGhpcy5fZD0hMSx0aGlzLl92PXZvaWQgMCx0aGlzLl9oPTAsdGhpcy5fbj0hMX0sbi5wcm90b3R5cGU9cig5Nykoay5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj14KGgodGhpcyxrKSk7cmV0dXJuIHIub2s9XCJmdW5jdGlvblwiIT10eXBlb2YgZXx8ZSxyLmZhaWw9XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdCxyLmRvbWFpbj1VP3cuZG9tYWluOnZvaWQgMCx0aGlzLl9jLnB1c2gociksdGhpcy5fYSYmdGhpcy5fYS5wdXNoKHIpLHRoaXMuX3MmJkUodGhpcywhMSksci5wcm9taXNlfSxjYXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSxpPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG47dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPWMoSCxlLDEpLHRoaXMucmVqZWN0PWMoVCxlLDEpfSxtLmY9eD1mdW5jdGlvbihlKXtyZXR1cm4gZT09PWt8fGU9PT1hP25ldyBpKGUpOm8oZSl9KSxkKGQuRytkLlcrZC5GKiFDLHtQcm9taXNlOmt9KSxyKDIzKShrLFwiUHJvbWlzZVwiKSxyKDk4KShcIlByb21pc2VcIiksYT1yKDApLlByb21pc2UsZChkLlMrZC5GKiFDLFwiUHJvbWlzZVwiLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9eCh0aGlzKTtyZXR1cm4oMCx0LnJlamVjdCkoZSksdC5wcm9taXNlfX0pLGQoZC5TK2QuRiooc3x8IUMpLFwiUHJvbWlzZVwiLHtyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiBPKHMmJnRoaXM9PT1hP2s6dGhpcyxlKX19KSxkKGQuUytkLkYqIShDJiZyKDk5KShmdW5jdGlvbihlKXtrLmFsbChlKS5jYXRjaChNKX0pKSxcIlByb21pc2VcIix7YWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj14KHQpLG49ci5yZXNvbHZlLG89ci5yZWplY3QsaT1nKGZ1bmN0aW9uKCl7dmFyIHI9W10saT0wLGE9MTt2KGUsITEsZnVuY3Rpb24oZSl7dmFyIHM9aSsrLHU9ITE7ci5wdXNoKHZvaWQgMCksYSsrLHQucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3V8fCh1PSEwLHJbc109ZSwtLWF8fG4ocikpfSxvKX0pLC0tYXx8bihyKX0pO3JldHVybiBpLmUmJm8oaS52KSxyLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXgodCksbj1yLnJlamVjdCxvPWcoZnVuY3Rpb24oKXt2KGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gby5lJiZuKG8udiksci5wcm9taXNlfX0pfSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXtpZighKGUgaW5zdGFuY2VvZiB0KXx8dm9pZCAwIT09biYmbiBpbiBlKXRocm93IFR5cGVFcnJvcihyK1wiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiFcIik7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxOCksbz1yKDkyKSxpPXIoOTMpLGE9cig3KSxzPXIoNDYpLHU9cig4NyksYz17fSxsPXt9LHQ9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGQsZil7dmFyIHAseSx2LGgsXz1mP2Z1bmN0aW9uKCl7cmV0dXJuIGV9OnUoZSksYj1uKHIsZCx0PzI6MSksbT0wO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIF8pdGhyb3cgVHlwZUVycm9yKGUrXCIgaXMgbm90IGl0ZXJhYmxlIVwiKTtpZihpKF8pKXtmb3IocD1zKGUubGVuZ3RoKTtwPm07bSsrKWlmKChoPXQ/YihhKHk9ZVttXSlbMF0seVsxXSk6YihlW21dKSk9PT1jfHxoPT09bClyZXR1cm4gaH1lbHNlIGZvcih2PV8uY2FsbChlKTshKHk9di5uZXh0KCkpLmRvbmU7KWlmKChoPW8odixiLHkudmFsdWUsdCkpPT09Y3x8aD09PWwpcmV0dXJuIGh9O3QuQlJFQUs9Yyx0LlJFVFVSTj1sfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKHQpe3ZhciBpPWUucmV0dXJuO3Rocm93IHZvaWQgMCE9PWkmJm4oaS5jYWxsKGUpKSx0fX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE1KSxvPXIoMikoXCJpdGVyYXRvclwiKSxpPUFycmF5LnByb3RvdHlwZTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSksbz1yKDY0KS5zZXQsaT1uLk11dGF0aW9uT2JzZXJ2ZXJ8fG4uV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPW4ucHJvY2VzcyxzPW4uUHJvbWlzZSx1PVwicHJvY2Vzc1wiPT1yKDE2KShhKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsYz1mdW5jdGlvbigpe3ZhciBuLG87Zm9yKHUmJihuPWEuZG9tYWluKSYmbi5leGl0KCk7ZTspe289ZS5mbixlPWUubmV4dDt0cnl7bygpfWNhdGNoKG4pe3Rocm93IGU/cigpOnQ9dm9pZCAwLG59fXQ9dm9pZCAwLG4mJm4uZW50ZXIoKX07aWYodSlyPWZ1bmN0aW9uKCl7YS5uZXh0VGljayhjKX07ZWxzZSBpZighaXx8bi5uYXZpZ2F0b3ImJm4ubmF2aWdhdG9yLnN0YW5kYWxvbmUpaWYocyYmcy5yZXNvbHZlKXt2YXIgbD1zLnJlc29sdmUodm9pZCAwKTtyPWZ1bmN0aW9uKCl7bC50aGVuKGMpfX1lbHNlIHI9ZnVuY3Rpb24oKXtvLmNhbGwobixjKX07ZWxzZXt2YXIgZD0hMCxmPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO25ldyBpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLHI9ZnVuY3Rpb24oKXtmLmRhdGE9ZD0hZH19cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvPXtmbjpuLG5leHQ6dm9pZCAwfTt0JiYodC5uZXh0PW8pLGV8fChlPW8scigpKSx0PW99fX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSksbz1uLm5hdmlnYXRvcjtlLmV4cG9ydHM9byYmby51c2VyQWdlbnR8fFwiXCJ9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDExKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbyBpbiB0KXImJmVbb10/ZVtvXT10W29dOm4oZSxvLHRbb10pO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMSksbz1yKDApLGk9cig4KSxhPXIoNikscz1yKDIpKFwic3BlY2llc1wiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2Ygb1tlXT9vW2VdOm5bZV07YSYmdCYmIXRbc10mJmkuZih0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIpKFwiaXRlcmF0b3JcIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aS5yZXR1cm49ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goZSl7fWUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLGE9aVtuXSgpO2EubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOnI9ITB9fSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIGF9LGUoaSl9Y2F0Y2goZSl7fXJldHVybiByfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNSksbz1yKDApLGk9cigxKSxhPXIoNjMpLHM9cig2Nik7bihuLlArbi5SLFwiUHJvbWlzZVwiLHtmaW5hbGx5OmZ1bmN0aW9uKGUpe3ZhciB0PWEodGhpcyxvLlByb21pc2V8fGkuUHJvbWlzZSkscj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlO3JldHVybiB0aGlzLnRoZW4ocj9mdW5jdGlvbihyKXtyZXR1cm4gcyh0LGUoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiByfSl9OmUscj9mdW5jdGlvbihyKXtyZXR1cm4gcyh0LGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IHJ9KX06ZSl9fSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDUpLG89cig0OCksaT1yKDY1KTtuKG4uUyxcIlByb21pc2VcIix7dHJ5OmZ1bmN0aW9uKGUpe3ZhciB0PW8uZih0aGlzKSxyPWkoZSk7cmV0dXJuKHIuZT90LnJlamVjdDp0LnJlc29sdmUpKHIudiksdC5wcm9taXNlfX0pfSxmdW5jdGlvbihlLHQscil7cigxMDMpLGUuZXhwb3J0cz1yKDApLk9iamVjdC5nZXRQcm90b3R5cGVPZn0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzMpLG89cig1OCk7cig0OSkoXCJnZXRQcm90b3R5cGVPZlwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBvKG4oZSkpfX0pfSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTA1KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3IoMTA2KSxlLmV4cG9ydHM9cigwKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDUpO24obi5TLFwiT2JqZWN0XCIse3NldFByb3RvdHlwZU9mOnIoMTA3KS5zZXR9KX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSksbz1yKDcpLGk9ZnVuY3Rpb24oZSx0KXtpZihvKGUpLCFuKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IodCtcIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSFcIil9O2UuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KFwiX19wcm90b19fXCJpbnt9P2Z1bmN0aW9uKGUsdCxuKXt0cnl7bj1yKDE4KShGdW5jdGlvbi5jYWxsLHIoNTApLmYoT2JqZWN0LnByb3RvdHlwZSxcIl9fcHJvdG9fX1wiKS5zZXQsMiksbihlLFtdKSx0PSEoZSBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChlKXt0PSEwfXJldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBpKGUsciksdD9lLl9fcHJvdG9fXz1yOm4oZSxyKSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6aX19LGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cigxMDkpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbihlLHQscil7cigxMTApO3ZhciBuPXIoMCkuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNSk7bihuLlMsXCJPYmplY3RcIix7Y3JlYXRlOnIoNDApfSl9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89bi5KU09OfHwobi5KU09OPXtzdHJpbmdpZnk6SlNPTi5zdHJpbmdpZnl9KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG8uc3RyaW5naWZ5LmFwcGx5KG8sYXJndW1lbnRzKX19LGZ1bmN0aW9uKGUsdCxyKXtyKDExMyksZS5leHBvcnRzPXIoMCkuT2JqZWN0LmtleXN9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDMzKSxvPXIoMTkpO3IoNDkpKFwia2V5c1wiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBvKG4oZSkpfX0pfSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTIyKSxfX2VzTW9kdWxlOiEwfX0sLGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIG49cigyNiksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxMTkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKTt0LmRlZmF1bHQ9ZnVuY3Rpb24gZ2V0KGUsdCxyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbj0oMCxhLmRlZmF1bHQpKGUsdCk7aWYodm9pZCAwPT09bil7dmFyIGk9KDAsby5kZWZhdWx0KShlKTtyZXR1cm4gbnVsbD09PWk/dm9pZCAwOmdldChpLHQscil9aWYoXCJ2YWx1ZVwiaW4gbilyZXR1cm4gbi52YWx1ZTt2YXIgcz1uLmdldDtpZih2b2lkIDAhPT1zKXJldHVybiBzLmNhbGwocil9fSwsLGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cigxMjApLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbihlLHQscil7cigxMjEpO3ZhciBuPXIoMCkuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTIpLG89cig1MCkuZjtyKDQ5KShcImdldE93blByb3BlcnR5RGVzY3JpcHRvclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8obihlKSx0KX19KX0sZnVuY3Rpb24oZSx0LHIpe3IoMTIzKSxlLmV4cG9ydHM9cigwKS5PYmplY3QuYXNzaWdufSxmdW5jdGlvbihlLHQscil7dmFyIG49cig1KTtuKG4uUytuLkYsXCJPYmplY3RcIix7YXNzaWduOnIoMTI0KX0pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigxOSksbz1yKDQzKSxpPXIoMjcpLGE9cigzMykscz1yKDU2KSx1PU9iamVjdC5hc3NpZ247ZS5leHBvcnRzPSF1fHxyKDEzKShmdW5jdGlvbigpe3ZhciBlPXt9LHQ9e30scj1TeW1ib2woKSxuPVwiYWJjZGVmZ2hpamtsbW5vcHFyc3RcIjtyZXR1cm4gZVtyXT03LG4uc3BsaXQoXCJcIikuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPWV9KSw3IT11KHt9LGUpW3JdfHxPYmplY3Qua2V5cyh1KHt9LHQpKS5qb2luKFwiXCIpIT1ufSk/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9YShlKSx1PWFyZ3VtZW50cy5sZW5ndGgsYz0xLGw9by5mLGQ9aS5mO3U+YzspZm9yKHZhciBmLHA9cyhhcmd1bWVudHNbYysrXSkseT1sP24ocCkuY29uY2F0KGwocCkpOm4ocCksdj15Lmxlbmd0aCxoPTA7dj5oOylkLmNhbGwocCxmPXlbaCsrXSkmJihyW2ZdPXBbZl0pO3JldHVybiByfTp1fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0NCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMzYpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShkKSxwPXIoMzkpLHk9Zi5nZXRMb2dnZXIoXCJSZWdpc3RyYXRpb25TdGF0dXNcIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIFJlZ2lzdHJhdGlvblN0YXR1cyhlLHQscixuKXsoMCx1LmRlZmF1bHQpKHRoaXMsUmVnaXN0cmF0aW9uU3RhdHVzKSx0aGlzLl9yZWdpc3RyeU9iamVjdFVSTD1lLHRoaXMuX3J1bnRpbWVVUkw9dCx0aGlzLl9kb21haW49KDAscC5kaXZpZGVVUkwpKHQpLmRvbWFpbix0aGlzLl9kaXNjb3ZlcmVkT2JqZWN0VVJMPXIsdGhpcy5fbWVzc2FnZUJ1cz1uLHRoaXMuX3N1YnNjcmlwdGlvblNldD0hMSx0aGlzLl9zdWJzY3JpYmVycz17bGl2ZTp7fSxkaXNjb25uZWN0ZWQ6e319fXJldHVybigwLGwuZGVmYXVsdCkoUmVnaXN0cmF0aW9uU3RhdHVzLFt7a2V5Olwib25MaXZlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7ci5fc3Vic2NyaXB0aW9uU2V0PyhyLl9zdWJzY3JpYmVycy5saXZlW2VdPXQsbigpKTpyLl9zdWJzY3JpYmUoKS50aGVuKGZ1bmN0aW9uKCl7ci5fc3Vic2NyaWJlcnMubGl2ZVtlXT10LG4oKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSl9KX19LHtrZXk6XCJvbkRpc2Nvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuX3N1YnNjcmlwdGlvblNldD8oci5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkW2VdPXQsbigpKTpyLl9zdWJzY3JpYmUoKS50aGVuKGZ1bmN0aW9uKCl7ci5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkW2VdPXQsbigpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9KX0pfX0se2tleTpcIl9zdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZTpcInN1YnNjcmliZVwiLGZyb206dGhpcy5fZGlzY292ZXJlZE9iamVjdFVSTCx0bzp0aGlzLl9ydW50aW1lVVJMK1wiL3N1YnNjcmlwdGlvbnNcIixib2R5OntyZXNvdXJjZXM6W3RoaXMuX3JlZ2lzdHJ5T2JqZWN0VVJMK1wiL3JlZ2lzdHJhdGlvblwiXX19O3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe3kubG9nKFwiW0Rpc2NvdmVyZWRPYmplY3Quc3Vic2NyaWJlXSBcIitlLl9yZWdpc3RyeU9iamVjdFVSTCtcIiByY3ZlZCByZXBseSBcIix0KSwyMDA9PT10LmJvZHkuY29kZT8oZS5fZ2VuZXJhdGVMaXN0ZW5lcihlLl9yZWdpc3RyeU9iamVjdFVSTCtcIi9yZWdpc3RyYXRpb25cIiksZS5fc3Vic2NyaXB0aW9uU2V0PSEwLHIoKSk6KHkuZXJyb3IoXCJFcnJvciBzdWJzY3JpYmluZyBcIixlLl9yZWdpc3RyeU9iamVjdFVSTCksbihcIkVycm9yIHN1YnNjcmliaW5nIFwiK2UuX3JlZ2lzdHJ5T2JqZWN0VVJMKSl9KX0pfX0se2tleTpcIl9nZW5lcmF0ZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7eS5sb2coXCJbRGlzY292ZXJlZE9iamVjdC5ub3RpZmljYXRpb25dIFwiK3QuX3JlZ2lzdHJ5T2JqZWN0VVJMK1wiOiBcIixlKSx0Ll9wcm9jZXNzTm90aWZpY2F0aW9uKGUpfSl9fSx7a2V5OlwiX3Byb2Nlc3NOb3RpZmljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnZhbHVlO3NldFRpbWVvdXQoZnVuY3Rpb24oKXsoMCxvLmRlZmF1bHQpKHQuX3N1YnNjcmliZXJzW3JdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zdWJzY3JpYmVyc1tyXVtlXSgpfSl9LDVlMyl9fSx7a2V5OlwiX3Vuc3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6XCJ1bnN1YnNjcmliZVwiLGZyb206dGhpcy5fZGlzY292ZXJlZE9iamVjdFVSTCx0bzp0aGlzLl9ydW50aW1lVVJMK1wiL3N1YnNjcmlwdGlvbnNcIixib2R5OntyZXNvdXJjZTp0aGlzLl9yZWdpc3RyeU9iamVjdFVSTCtcIi9yZWdpc3RyYXRpb25cIn19O3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe3kubG9nKFwiW0Rpc2NvdmVyZWRPYmplY3QudW5zdWJzY3JpYmVdIFwiK2UuX3JlZ2lzdHJ5T2JqZWN0VVJMK1wiIHJjdmVkIHJlcGx5IFwiLHQpLDIwMD09PXQuYm9keS5jb2RlP3IoKTooeS5lcnJvcihcIkVycm9yIHVuc3Vic2NyaWJpbmcgXCIsZS5fcmVnaXN0cnlPYmplY3RVUkwpLG4oXCJFcnJvciB1bnN1YnNjcmliaW5nIFwiK2UuX3JlZ2lzdHJ5T2JqZWN0VVJMKSl9KX0pfX0se2tleTpcInVuc3Vic2NyaWJlTGl2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlIGluIHQuX3N1YnNjcmliZXJzLmxpdmUmJmRlbGV0ZSB0Ll9zdWJzY3JpYmVycy5saXZlW2VdLHQuX2FyZVN1YnNjcmlwdGlvbnNFbXB0eSgpP3QuX3Vuc3Vic2NyaWJlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiByKCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pOnIoKX0pfX0se2tleTpcInVuc3Vic2NyaWJlRGlzY29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2UgaW4gdC5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkPyhkZWxldGUgdC5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkW2VdLHQuX2FyZVN1YnNjcmlwdGlvbnNFbXB0eSgpP3QuX3Vuc3Vic2NyaWJlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiByKCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pOnIoKSk6bihlK1wiIGRvZXNuJ3Qgc3Vic2NyaWJlIG9uRGlzY29ubmVjdGVkIGZvciBcIit0Ll9yZWdpc3RyeU9iamVjdFVSTCl9KX19LHtrZXk6XCJfYXJlU3Vic2NyaXB0aW9uc0VtcHR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PSgwLG8uZGVmYXVsdCkodGhpcy5fc3Vic2NyaWJlcnMubGl2ZSkubGVuZ3RoJiYwPT09KDAsby5kZWZhdWx0KSh0aGlzLl9zdWJzY3JpYmVycy5kaXNjb25uZWN0ZWQpLmxlbmd0aH19XSksUmVnaXN0cmF0aW9uU3RhdHVzfSgpO3QuZGVmYXVsdD12LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDI2KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzNCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzNSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigxMjcpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIE1pbmlCdXMoKXtyZXR1cm4oMCxhLmRlZmF1bHQpKHRoaXMsTWluaUJ1cyksKDAsbC5kZWZhdWx0KSh0aGlzLChNaW5pQnVzLl9fcHJvdG9fX3x8KDAsby5kZWZhdWx0KShNaW5pQnVzKSkuY2FsbCh0aGlzKSl9cmV0dXJuKDAsZi5kZWZhdWx0KShNaW5pQnVzLGUpLCgwLHUuZGVmYXVsdCkoTWluaUJ1cyxbe2tleTpcInBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG4uX2dlbklkKGUpLG4uX3Jlc3BvbnNlQ2FsbGJhY2soZSx0LHIpLG4uX29uUG9zdE1lc3NhZ2UoZSksZS5pZH19LHtrZXk6XCJfb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC5fb25SZXNwb25zZShlKSl7dmFyIHI9dC5fc3Vic2NyaXB0aW9uc1tlLnRvXTtyPyh0Ll9wdWJsaXNoT24ocixlKSxlLnRvLnN0YXJ0c1dpdGgoXCJoeXBlcnR5XCIpfHx0Ll9wdWJsaXNoT25EZWZhdWx0KGUpKTp0Ll9wdWJsaXNoT25EZWZhdWx0KGUpfX19XSksTWluaUJ1c30oeS5kZWZhdWx0KTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMzYpLGw9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxkPWwuZ2V0TG9nZ2VyKFwiQnVzXCIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBCdXMoKXsoMCxhLmRlZmF1bHQpKHRoaXMsQnVzKTt2YXIgZT10aGlzO2UuX21zZ0lkPTAsZS5fc3Vic2NyaXB0aW9ucz17fSxlLl9yZXNwb25zZVRpbWVPdXQ9M2U0LGUuX3Jlc3BvbnNlQ2FsbGJhY2tzPXt9LGUuX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcigpfXJldHVybigwLHUuZGVmYXVsdCkoQnVzLFt7a2V5OlwiYWRkTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1uZXcgcChyLl9zdWJzY3JpcHRpb25zLGUsdCksbz1yLl9zdWJzY3JpcHRpb25zW2VdO3JldHVybiBvfHwobz1bXSxyLl9zdWJzY3JpcHRpb25zW2VdPW8pLG8ucHVzaChuKSxufX0se2tleTpcImFkZFJlc3BvbnNlTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbZSt0XT1yfX0se2tleTpcInJlbW92ZVJlc3BvbnNlTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe2RlbGV0ZSB0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tlK3RdfX0se2tleTpcInJlbW92ZUFsbExpc3RlbmVyc09mXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX3N1YnNjcmlwdGlvbnNbZV19fSx7a2V5OlwiYmluZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLG89dGhpcztyZXR1cm57dGhpc0xpc3RlbmVyOm8uYWRkTGlzdGVuZXIoZSxmdW5jdGlvbihlKXtyLnBvc3RNZXNzYWdlKGUpfSksdGFyZ2V0TGlzdGVuZXI6ci5hZGRMaXN0ZW5lcih0LGZ1bmN0aW9uKGUpe28ucG9zdE1lc3NhZ2UoZSl9KSx1bmJpbmQ6ZnVuY3Rpb24oKXtuLnRoaXNMaXN0ZW5lci5yZW1vdmUoKSxuLnRhcmdldExpc3RlbmVyLnJlbW92ZSgpfX19fSx7a2V5OlwiX3B1Ymxpc2hPbkRlZmF1bHRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdWJzY3JpcHRpb25zW1wiKlwiXTt0JiZ0aGlzLl9wdWJsaXNoT24odCxlKX19LHtrZXk6XCJfcHVibGlzaE9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5fY2FsbGJhY2sodCl9KX19LHtrZXk6XCJfcmVzcG9uc2VDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSxuPXRoaXM7aWYodCl7dmFyIG89ZS5mcm9tK2UuaWQ7bi5fcmVzcG9uc2VDYWxsYmFja3Nbb109dCxyJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9bi5fcmVzcG9uc2VDYWxsYmFja3Nbb107aWYoZGVsZXRlIG4uX3Jlc3BvbnNlQ2FsbGJhY2tzW29dLHQpe3Qoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsYm9keTp7Y29kZTo0MDgsZGVzYzpcIlJlc3BvbnNlIHRpbWVvdXQhXCIsdmFsdWU6ZX19KX19LG4uX3Jlc3BvbnNlVGltZU91dCl9fX0se2tleTpcIl9vblJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihcInJlc3BvbnNlXCI9PT1lLnR5cGUpe3ZhciByPWUudG8rZS5pZCxuPXQuX3Jlc3BvbnNlQ2FsbGJhY2tzW3JdO2lmKGUuYm9keS5jb2RlPj0yMDAmJmRlbGV0ZSB0Ll9yZXNwb25zZUNhbGxiYWNrc1tyXSxuKXJldHVybiBuKGUpLCEwfXJldHVybiExfX0se2tleTpcIl9vbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0Ll9vblJlc3BvbnNlKGUpKXt2YXIgcj10Ll9zdWJzY3JpcHRpb25zW2UudG9dO3I/dC5fcHVibGlzaE9uKHIsZSk6dC5fcHVibGlzaE9uRGVmYXVsdChlKX19fSx7a2V5OlwiX2dlbklkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5pZCYmMCE9PWUuaWR8fCh0aGlzLl9tc2dJZCsrLGUuaWQ9dGhpcy5fbXNnSWQpfX0se2tleTpcInBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt9fSx7a2V5OlwicG9zdE1lc3NhZ2VXaXRoUmV0cmllc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9MCxhPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxvKXtuLnBvc3RNZXNzYWdlKGUsZnVuY3Rpb24obil7NDA4PT09bi5ib2R5LmNvZGV8fDUwMD09PW4uYm9keS5jb2RlP28oKTooZC5pbmZvKFwiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBtc2cgZGVsaXZlcmVkOiBcIixlKSxyKG4pLHQoKSl9KX0pfTshZnVuY3Rpb24gdHJ5QWdhaW4oKXthKCkudGhlbihmdW5jdGlvbigpe30sZnVuY3Rpb24oKXtpZihkLndhcm4oXCJbQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXNdIE1lc3NhZ2UgQm91bmNlZCAocmV0cnkgXCIraStcIik6ICdcIixlKSwhKGkrKzx0KSl7dmFyIHI9XCJbRXJyb3JdIE1lc3NhZ2UgQm91bmNlZCAoZGVsaXZlcnkgYXR0ZW1wdHMgXCIrdCtcIik6ICdcIjt0aHJvdyBuZXcgRXJyb3IocitlKX10cnlBZ2FpbigpfSl9KCl9fSx7a2V5OlwiX29uUG9zdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt9fSx7a2V5OlwiX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSxCdXN9KCkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIE1zZ0xpc3RlbmVyKGUsdCxyKXsoMCxhLmRlZmF1bHQpKHRoaXMsTXNnTGlzdGVuZXIpO3ZhciBuPXRoaXM7bi5fc3Vic2NyaXB0aW9ucz1lLG4uX3VybD10LG4uX2NhbGxiYWNrPXJ9cmV0dXJuKDAsdS5kZWZhdWx0KShNc2dMaXN0ZW5lcixbe2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3N1YnNjcmlwdGlvbnNbZS5fdXJsXTtpZih0KXt2YXIgcj10LmluZGV4T2YoZSk7dC5zcGxpY2UociwxKSwwPT09dC5sZW5ndGgmJmRlbGV0ZSBlLl9zdWJzY3JpcHRpb25zW2UuX3VybF19fX0se2tleTpcInVybFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fV0pLE1zZ0xpc3RlbmVyfSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigxMjkpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU2FuZGJveFJlZ2lzdHJ5KGUpeygwLG8uZGVmYXVsdCkodGhpcyxTYW5kYm94UmVnaXN0cnkpO3ZhciB0PXRoaXM7dC5fYnVzPWUsdC5fZmFjdG9yeT1uZXcgdS5kZWZhdWx0KGUpLHQuX2NvbXBvbmVudHM9e30sZS5hZGRMaXN0ZW5lcihTYW5kYm94UmVnaXN0cnkuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLGZ1bmN0aW9uKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2VcImNyZWF0ZVwiOnQuX29uRGVwbG95KGUpO2JyZWFrO2Nhc2VcImRlbGV0ZVwiOnQuX29uUmVtb3ZlKGUpfX0pfXJldHVybigwLGEuZGVmYXVsdCkoU2FuZGJveFJlZ2lzdHJ5LFt7a2V5OlwiX3Jlc3BvbnNlTXNnXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206U2FuZGJveFJlZ2lzdHJ5LkludGVybmFsRGVwbG95QWRkcmVzcyx0bzpTYW5kYm94UmVnaXN0cnkuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzfSxvPXt9O3JldHVybiB0JiYoby5jb2RlPXQpLHImJihvLmRlc2M9ciksbi5ib2R5PW8sbn19LHtrZXk6XCJfb25EZXBsb3lcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmNvbmZpZyxuPWUuYm9keS51cmwsbz1lLmJvZHkuc291cmNlQ29kZSxpPXZvaWQgMCxhPXZvaWQgMDtpZih0Ll9jb21wb25lbnRzLmhhc093blByb3BlcnR5KG4pKWk9NTAwLGE9XCJJbnN0YW5jZSBcIituK1wiIGFscmVhZHkgZXhpc3QhXCI7ZWxzZSB0cnl7dC5fY29tcG9uZW50c1tuXT10Ll9jcmVhdGUobixvLHIsdC5fZmFjdG9yeSksaT0yMDB9Y2F0Y2goZSl7aT01MDAsYT1lfXZhciBzPXQuX3Jlc3BvbnNlTXNnKGUsaSxhKTt0Ll9idXMucG9zdE1lc3NhZ2Uocyl9fSx7a2V5OlwiX29uUmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS51cmwsbj12b2lkIDAsbz12b2lkIDA7dC5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShyKT8oZGVsZXRlIHQuX2NvbXBvbmVudHNbcl0sdC5fYnVzLnJlbW92ZUFsbExpc3RlbmVyc09mKHIpLG49MjAwKToobj01MDAsbz1cIkluc3RhbmNlIFwiK3IrXCIgZG9lc24ndCBleGlzdCFcIik7dmFyIGk9dC5fcmVzcG9uc2VNc2coZSxuLG8pO3QuX2J1cy5wb3N0TWVzc2FnZShpKX19LHtrZXk6XCJfY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7fX0se2tleTpcImNvbXBvbmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50c319XSksU2FuZGJveFJlZ2lzdHJ5fSgpO2MuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzPVwiaHlwZXJ0eS1ydW50aW1lOi8vc2FuZGJveC9leHRlcm5hbFwiLGMuSW50ZXJuYWxEZXBsb3lBZGRyZXNzPVwiaHlwZXJ0eS1ydW50aW1lOi8vc2FuZGJveC9pbnRlcm5hbFwiLHQuZGVmYXVsdD1jLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigxMzApLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTYxKSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDM5KSxmPXIoMTM0KSxwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZikseT1yKDEzNSksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHkpLGg9cigxMjUpLF89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxiPXIoMTYzKSxtPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYiksZz1yKDEzNiksUj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGcpLE89cigxMzgpLEQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChPKSx3PXIoMTY0KSxqPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodyksTD1yKDE2Niksaz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEwpLFU9cigxMzkpLE09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChVKSx4PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU2FuZGJveEZhY3RvcnkoZSl7KDAsby5kZWZhdWx0KSh0aGlzLFNhbmRib3hGYWN0b3J5KTt2YXIgdD10aGlzO3QuX2J1cz1lLHQuX2RpdmlkZVVSTD1kLmRpdmlkZVVSTH1yZXR1cm4oMCxhLmRlZmF1bHQpKFNhbmRib3hGYWN0b3J5LFt7a2V5OlwiY3JlYXRlU3luY2hlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IHUuZGVmYXVsdChlLHQscil9fSx7a2V5OlwiY3JlYXRlSWRlbnRpdHlNYW5hZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgcC5kZWZhdWx0KGUsdCxyKX19LHtrZXk6XCJjcmVhdGVEaXNjb3ZlcnlcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7cmV0dXJuIG5ldyB2LmRlZmF1bHQoZSx0LHIpfX0se2tleTpcImNyZWF0ZVNlYXJjaFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBtLmRlZmF1bHQoZSx0KX19LHtrZXk6XCJjcmVhdGVDb250ZXh0T2JzZXJ2ZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtyZXR1cm4gbmV3IFIuZGVmYXVsdChlLHQscixuLHRoaXMpfX0se2tleTpcImNyZWF0ZUNvbnRleHRSZXBvcnRlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IEQuZGVmYXVsdChlLHQscix0aGlzKX19LHtrZXk6XCJjcmVhdGVOb3RpZmljYXRpb25IYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBsLmRlZmF1bHQoZSl9fSx7a2V5OlwiY3JlYXRlTWVzc2FnZUJvZHlJZGVudGl0eVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpLGEscyl7cmV0dXJuIG5ldyBqLmRlZmF1bHQoZSx0LHIsbixvLGksYSxzKX19LHtrZXk6XCJjcmVhdGVDaGF0TWFuYWdlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3JldHVybiBuZXcgay5kZWZhdWx0KGUsdCxyLG4sdGhpcyl9fSx7a2V5OlwiY3JlYXRlQ2hhdENvbnRyb2xsZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSl7cmV0dXJuIG5ldyBNLmRlZmF1bHQoZSx0LHIsbixvLGkpfX0se2tleTpcImNyZWF0ZVJlZ2lzdHJhdGlvblN0YXR1c1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3JldHVybiBuZXcgXy5kZWZhdWx0KGUsdCxyLG4pfX0se2tleTpcImRpdmlkZVVSTFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXZpZGVVUkx9fV0pLFNhbmRib3hGYWN0b3J5fSgpO3QuZGVmYXVsdD14LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE3KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDExNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMzYpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShkKSxwPXIoMzkpLHk9cigxNTMpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSxoPXIoMTU5KSxfPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksYj1yKDE2MCksbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGIpLGc9Zi5nZXRMb2dnZXIoXCJTeW5jaGVyXCIpLFI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBTeW5jaGVyKGUsdCxyKXsoMCx1LmRlZmF1bHQpKHRoaXMsU3luY2hlcik7dmFyIG49dGhpcztuLl9vd25lcj1lLG4uX2J1cz10LG4uX3N1YlVSTD1yLnJ1bnRpbWVVUkwrXCIvc21cIixuLl9ydW50aW1lVXJsPXIucnVudGltZVVSTCxuLl9wMnBIYW5kbGVyPXIucDJwSGFuZGxlcixuLl9wMnBSZXF1ZXN0ZXI9ci5wMnBSZXF1ZXN0ZXIsbi5fcmVwb3J0ZXJzPXt9LG4uX29ic2VydmVycz17fSxuLl9wcm92aXNpb25hbHM9e30sdC5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKHQpe2lmKHQuZnJvbSE9PWUpc3dpdGNoKGcuaW5mbyhcIltTeW5jaGVyXSBTeW5jaGVyLVJDVjogXCIsdCxuKSx0LnR5cGUpe2Nhc2VcImZvcndhcmRcIjpuLl9vbkZvcndhcmQodCk7YnJlYWs7Y2FzZVwiY3JlYXRlXCI6bi5fb25SZW1vdGVDcmVhdGUodCk7YnJlYWs7Y2FzZVwiZGVsZXRlXCI6bi5fb25SZW1vdGVEZWxldGUodCk7YnJlYWs7Y2FzZVwiZXhlY3V0ZVwiOm4uX29uRXhlY3V0ZSh0KX19KX1yZXR1cm4oMCxsLmRlZmF1bHQpKFN5bmNoZXIsW3trZXk6XCJjcmVhdGVcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10mJmFyZ3VtZW50c1szXSxvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF0saT1hcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XT9hcmd1bWVudHNbNV06XCJubyBuYW1lXCIscz1hcmd1bWVudHNbNl0sdT1hcmd1bWVudHNbN107aWYoIWUpdGhyb3cgRXJyb3IoXCJbU3luY2hlciAtIENyZWF0ZV0gLSBZb3UgbmVlZCBzcGVjaWZ5IHRoZSBkYXRhIG9iamVjdCBzY2hlbWFcIik7aWYoIXQpdGhyb3cgRXJyb3IoXCJbU3luY2hlciAtIENyZWF0ZV0gLVRoZSBvYnNlcnZlcnMgc2hvdWxkIGJlIGRlZmluZWRcIik7dmFyIGM9dGhpczt1PXV8fHt9O3ZhciBsPSgwLGEuZGVmYXVsdCkoe30sdSk7cmV0dXJuIGwucDJwPW8sbC5zdG9yZT1uLGwuc2NoZW1hPWUsbC5hdXRob3Jpc2U9dCxsLnAycEhhbmRsZXI9Yy5fcDJwSGFuZGxlcixsLnAycFJlcXVlc3Rlcj1jLl9wMnBSZXF1ZXN0ZXIsbC5kYXRhPXI/KDAscC5kZWVwQ2xvbmUpKHIpOnt9LGwubmFtZT0wPT09aS5sZW5ndGg/XCJubyBuYW1lXCI6aSxsLnJlcG9ydGVyPXUuaGFzT3duUHJvcGVydHkoXCJyZXBvcnRlclwiKSYmXCJib29sZWFuXCIhPXR5cGVvZiB1LnJlcG9ydGVyP3UucmVwb3J0ZXI6Yy5fb3duZXIsbC5yZXN1bWU9ITEsdT8obC5tdXR1YWw9IXUuaGFzT3duUHJvcGVydHkoXCJtdXR1YWxcIil8fHUubXV0dWFsLGwubmFtZT11Lmhhc093blByb3BlcnR5KFwibmFtZVwiKT91Lm5hbWU6bC5uYW1lKTpsLm11dHVhbD0hMCx1Lmhhc093blByb3BlcnR5KFwicmV1c2VVUkxcIikmJihsLnJlc291cmNlPXUucmV1c2VVUkwpLHMmJihsLmlkZW50aXR5PXMpLGcubG9nKFwiW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlIFJlcG9ydGVyIC0gY3JlYXRlSW5wdXQ6IFwiLGwpLGMuX2NyZWF0ZShsKX19LHtrZXk6XCJyZXN1bWVSZXBvcnRlcnNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBnLmxvZyhcIltzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBSZXBvcnRlciAtIGNyaXRlcmlhOiBcIixlKSwoMCxhLmRlZmF1bHQpKGUse3Jlc3VtZTohMH0pLHQuX3Jlc3VtZUNyZWF0ZShlKX19LHtrZXk6XCJzdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl0sbj1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSYmYXJndW1lbnRzWzNdLG89IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XSxpPSEoYXJndW1lbnRzLmxlbmd0aD41JiZ2b2lkIDAhPT1hcmd1bWVudHNbNV0pfHxhcmd1bWVudHNbNV0scz1hcmd1bWVudHNbNl0sdT10aGlzLGM9e307cmV0dXJuIGMucDJwPW4sYy5zdG9yZT1yLGMuc2NoZW1hPWUsYy5kb21haW5fc3Vic2NyaXB0aW9uPWksYy5yZXNvdXJjZT10LHMmJihjLmlkZW50aXR5PXMpLGMubXV0dWFsPW8sZy5sb2coXCJbc3luY2hlciAtIHN1YnNjcmliZV0gLSBzdWJzY3JpYmUgY3JpdGVyaWE6IFwiLGMpLCgwLGEuZGVmYXVsdCkoYyx7cmVzdW1lOiExfSksdS5fc3Vic2NyaWJlKGMpfX0se2tleTpcInJlc3VtZU9ic2VydmVyc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lfHx7fTtyZXR1cm4oMCxhLmRlZmF1bHQpKHIse3Jlc3VtZTohMH0pLHQuX3Jlc3VtZVN1YnNjcmliZShyKX19LHtrZXk6XCJyZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOlwicmVhZFwiLGZyb206dC5fb3duZXIsdG86ZX07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSxuKXt2YXIgbz1mdW5jdGlvbihvKXtnLmxvZyhcIltTeW5jaGVyLnJlYWRdIHJlcGx5OiBcIixvKTt2YXIgaT17fSxzPXt9LHU9MDtpZihvLmJvZHkuY29kZTwzMDApaWYoby5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KFwicmVzcG9uc2VzXCIpKWlmKDA9PT11KXM9by5ib2R5LnZhbHVlLCsrdTtlbHNle2RlbGV0ZSBvLmJvZHkudmFsdWUucmVzcG9uc2VzO3ZhciBjPXZvaWQgMDtmb3IoYyBpbiBvLmJvZHkudmFsdWUpaS5oYXNPd25Qcm9wZXJ0eShjKXx8KGlbY109e30pLCgwLGEuZGVmYXVsdCkoaVtjXSxvLmJvZHkudmFsdWVbY10pOysrdSx1PT09cy5yZXNwb25zZXMmJihzLmNoaWxkcmVuT2JqZWN0cz1pLGRlbGV0ZSBzLnJlc3BvbnNlcyx0Ll9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihyLmZyb20sby5pZCksZShzKSl9ZWxzZSB0Ll9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihyLmZyb20sby5pZCksZShvLmJvZHkudmFsdWUpO2Vsc2UgbihvLmJvZHkuZGVzYyl9O3QuX2J1cy5wb3N0TWVzc2FnZShyLG8sITEpfSl9fSx7a2V5Olwib25Ob3RpZmljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9ZX19LHtrZXk6XCJvbkNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25DbG9zZT1lfX0se2tleTpcIl9jcmVhdGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89KDAsYS5kZWZhdWx0KSh7fSxlKSxpPWUucmVzdW1lO28uY3JlYXRlZD0obmV3IERhdGUpLnRvSVNPU3RyaW5nKCksby5ydW50aW1lPXQuX3J1bnRpbWVVcmw7dmFyIHM9KDAscC5kZWVwQ2xvbmUpKG8pO2RlbGV0ZSBzLnAycCxkZWxldGUgcy5zdG9yZSxkZWxldGUgcy5vYnNlcnZlcnMsZGVsZXRlIHMuaWRlbnRpdHk7dmFyIHU9e3R5cGU6XCJjcmVhdGVcIixmcm9tOnQuX293bmVyLHRvOnQuX3N1YlVSTCxib2R5OntyZXN1bWU6aSx2YWx1ZTpzfX07dS5ib2R5LnNjaGVtYT1vLnNjaGVtYSxvLnAycCYmKHUuYm9keS5wMnA9by5wMnApLG8uc3RvcmUmJih1LmJvZHkuc3RvcmU9by5zdG9yZSksby5pZGVudGl0eSYmKHUuYm9keS5pZGVudGl0eT1vLmlkZW50aXR5KSxnLmxvZyhcIltzeW5jaGVyLl9jcmVhdGVdOiBcIixvLHUpLHQuX2J1cy5wb3N0TWVzc2FnZSh1LGZ1bmN0aW9uKGkpe2lmKGcubG9nKFwiW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlLXJlc3BvbnNlOiBcIixpKSwyMDA9PT1pLmJvZHkuY29kZSl7by51cmw9aS5ib2R5LnJlc291cmNlLG8uc3RhdHVzPVwibGl2ZVwiLG8uc3luY2hlcj10LG8uY2hpbGRyZW5zPWkuYm9keS5jaGlsZHJlblJlc291cmNlczt2YXIgYT10Ll9yZXBvcnRlcnNbby51cmxdO2F8fChhPW5ldyB2LmRlZmF1bHQobyksdC5fcmVwb3J0ZXJzW28udXJsXT1hKSxhLmludml0ZU9ic2VydmVycyhlLmF1dGhvcmlzZSxlLnAycCkscihhKX1lbHNlIG4oaS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6XCJfcmVzdW1lQ3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1lLnJlc3VtZSxhPXt0eXBlOlwiY3JlYXRlXCIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7cmVzdW1lOml9fTtnLmxvZyhcIltzeW5jaGVyIC0gY3JlYXRlXTogXCIsZSxhKSxlJiYoYS5ib2R5LnZhbHVlPWUsZS5oYXNPd25Qcm9wZXJ0eShcInJlcG9ydGVyXCIpP2EuYm9keS52YWx1ZS5yZXBvcnRlcj1lLnJlcG9ydGVyOmEuYm9keS52YWx1ZS5yZXBvcnRlcj1yLl9vd25lciksZS5wMnAmJihhLmJvZHkucDJwPWUucDJwKSxlLnN0b3JlJiYoYS5ib2R5LnN0b3JlPWUuc3RvcmUpLGUub2JzZXJ2ZXJzJiYoYS5ib2R5LmF1dGhvcmlzZT1lLm9ic2VydmVycyksZS5pZGVudGl0eSYmKGEuYm9keS5pZGVudGl0eT1lLmlkZW50aXR5KSxnLmxvZyhcIltzeW5jaGVyLl9yZXN1bWVDcmVhdGVdIC0gcmVzdW1lIG1lc3NhZ2U6IFwiLGEpLHIuX2J1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKGUpe2lmKGcubG9nKFwiW3N5bmNoZXIuX3Jlc3VtZUNyZWF0ZV0gLSBjcmVhdGUtcmVzdW1lZC1yZXNwb25zZTogXCIsZSksMjAwPT09ZS5ib2R5LmNvZGUpe3ZhciBpPWUuYm9keS52YWx1ZTtmb3IodmFyIGEgaW4gaSl7dmFyIHM9aVthXTtzLmRhdGE9KDAscC5kZWVwQ2xvbmUpKHMuZGF0YSl8fHt9LHMuY2hpbGRyZW5PYmplY3RzJiYocy5jaGlsZHJlbk9iamVjdHM9KDAscC5kZWVwQ2xvbmUpKHMuY2hpbGRyZW5PYmplY3RzKSkscy5tdXR1YWw9ITEscy5yZXN1bWU9ITAscy5zdGF0dXM9XCJsaXZlXCIscy5zeW5jaGVyPXIsZy5sb2coXCJbc3luY2hlci5fcmVzdW1lQ3JlYXRlXSAtIGNyZWF0ZS1yZXN1bWVkLWRhdGFPYmplY3RSZXBvcnRlclwiLHMpO3ZhciB1PW5ldyB2LmRlZmF1bHQocyk7cy5jaGlsZHJlbk9iamVjdHMmJnUucmVzdW1lQ2hpbGRyZW5zKHMuY2hpbGRyZW5PYmplY3RzKSxyLl9yZXBvcnRlcnNbcy51cmxdPXV9bihyLl9yZXBvcnRlcnMpLHQuX29uUmVwb3J0ZXJzUmVzdW1lJiZ0Ll9vblJlcG9ydGVyc1Jlc3VtZSh0Ll9yZXBvcnRlcnMpfWVsc2UgNDA0PT09ZS5ib2R5LmNvZGU/bih7fSk6byhlLmJvZHkuZGVzYyl9KX0pfX0se2tleTpcIl9zdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89e3R5cGU6XCJzdWJzY3JpYmVcIixmcm9tOnQuX293bmVyLHRvOnQuX3N1YlVSTCxib2R5Ont9fTtlJiYoZS5oYXNPd25Qcm9wZXJ0eShcInAycFwiKSYmKG8uYm9keS5wMnA9ZS5wMnApLGUuaGFzT3duUHJvcGVydHkoXCJzdG9yZVwiKSYmKG8uYm9keS5zdG9yZT1lLnN0b3JlKSxlLmhhc093blByb3BlcnR5KFwic2NoZW1hXCIpJiYoby5ib2R5LnNjaGVtYT1lLnNjaGVtYSksZS5oYXNPd25Qcm9wZXJ0eShcImlkZW50aXR5XCIpJiYoby5ib2R5LmlkZW50aXR5PWUuaWRlbnRpdHkpLGUuaGFzT3duUHJvcGVydHkoXCJyZXNvdXJjZVwiKSYmKG8uYm9keS5yZXNvdXJjZT1lLnJlc291cmNlKSxlLmhhc093blByb3BlcnR5KFwiZG9tYWluX3N1YnNjcmlwdGlvblwiKSYmKG8uYm9keS5kb21haW5fc3Vic2NyaXB0aW9uPWUuZG9tYWluX3N1YnNjcmlwdGlvbikpLG8uYm9keS5yZXN1bWU9ZS5yZXN1bWUsZS5oYXNPd25Qcm9wZXJ0eShcIm11dHVhbFwiKSYmKG8uYm9keS5tdXR1YWw9ZS5tdXR1YWwpLGcubG9nKFwiW3N5bmNoZXJfc3Vic2NyaWJlXSAtIHN1YnNjcmliZSBtZXNzYWdlOiBcIixlLG8pLHQuX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKG8pe2cubG9nKFwiW3N5bmNoZXJdIC0gc3Vic2NyaWJlLXJlc3BvbnNlOiBcIixvKTt2YXIgaT1vLmJvZHkucmVzb3VyY2UsYT10Ll9wcm92aXNpb25hbHNbaV07aWYoZGVsZXRlIHQuX3Byb3Zpc2lvbmFsc1tpXSxhJiZhLl9yZWxlYXNlTGlzdGVuZXJzKCksby5ib2R5LmNvZGU8MjAwKWcubG9nKFwiW3N5bmNoZXJdIC0gbmV3IERhdGFQcm92aXNpb25hbDogXCIsby5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzLGkpLGE9bmV3IG0uZGVmYXVsdCh0Ll9vd25lcixpLHQuX2J1cyxvLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpLHQuX3Byb3Zpc2lvbmFsc1tpXT1hO2Vsc2UgaWYoMjAwPT09by5ib2R5LmNvZGUpe2cubG9nKFwiW3N5bmNoZXJdIC0gbmV3IERhdGEgT2JqZWN0IE9ic2VydmVyOiBcIixvLHQuX3Byb3Zpc2lvbmFscyk7dmFyIHM9by5ib2R5LnZhbHVlO3Muc3luY2hlcj10LHMucDJwPWUucDJwLHMuc3RvcmU9ZS5zdG9yZSxzLmlkZW50aXR5PWUuaWRlbnRpdHkscy5yZXN1bWU9ITEscy5tdXR1YWw9ZS5tdXR1YWw7dmFyIHU9dC5fb2JzZXJ2ZXJzW2ldO3U/dS5zeW5jKCk6KHU9bmV3IF8uZGVmYXVsdChzKSx0Ll9vYnNlcnZlcnNbaV09dSksZy5sb2coXCJbc3luY2hlcl0gLSBuZXcgRGF0YSBPYmplY3QgT2JzZXJ2ZXIgYWxyZWFkeSBleGlzdDogXCIsdSkscih1KSxhJiZhLmFwcGx5KHUpfWVsc2UgbihvLmJvZHkuZGVzYyl9KX0pfX0se2tleTpcIl9yZXN1bWVTdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXt0eXBlOlwic3Vic2NyaWJlXCIsZnJvbTpyLl9vd25lcix0bzpyLl9zdWJVUkwsYm9keTp7fX07ZSYmKGUuaGFzT3duUHJvcGVydHkoXCJwMnBcIikmJihpLmJvZHkucDJwPWUucDJwKSxlLmhhc093blByb3BlcnR5KFwic3RvcmVcIikmJihpLmJvZHkuc3RvcmU9ZS5zdG9yZSksZS5oYXNPd25Qcm9wZXJ0eShcInNjaGVtYVwiKSYmKGkuYm9keS5zY2hlbWE9ZS5zY2hlbWEpLGUuaGFzT3duUHJvcGVydHkoXCJpZGVudGl0eVwiKSYmKGkuYm9keS5pZGVudGl0eT1lLmlkZW50aXR5KSxlLmhhc093blByb3BlcnR5KFwicmVzb3VyY2VcIikmJihpLmJvZHkucmVzb3VyY2U9ZS51cmwpKSxpLmJvZHkucmVzdW1lPWUucmVzdW1lO3ZhciBhPWUubXV0dWFsO2UuaGFzT3duUHJvcGVydHkoXCJtdXR1YWxcIikmJihpLmJvZHkubXV0dWFsPWEpLGcubG9nKFwiW3N5bmNoZXJdIC0gc3Vic2NyaWJlIG1lc3NhZ2U6IFwiLGUsaSksci5fYnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24oZSl7Zy5sb2coXCJbc3luY2hlcl0gLSBzdWJzY3JpYmUtcmVzdW1lZC1yZXNwb25zZTogXCIsZSk7dmFyIGk9ZS5ib2R5LnJlc291cmNlLGE9ci5fcHJvdmlzaW9uYWxzW2ldO2lmKGRlbGV0ZSByLl9wcm92aXNpb25hbHNbaV0sYSYmYS5fcmVsZWFzZUxpc3RlbmVycygpLGUuYm9keS5jb2RlPDIwMClnLmxvZyhcIltzeW5jaGVyXSAtIHJlc3VtZSBuZXcgRGF0YVByb3Zpc2lvbmFsOiBcIixlLGkpLGE9bmV3IG0uZGVmYXVsdChyLl9vd25lcixpLHIuX2J1cyxlLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpLHIuX3Byb3Zpc2lvbmFsc1tpXT1hO2Vsc2UgaWYoMjAwPT09ZS5ib2R5LmNvZGUpe3ZhciBzPWUuYm9keS52YWx1ZTtmb3IodmFyIHUgaW4gcyl7dmFyIGM9c1t1XTtnLmxvZyhcIltzeW5jaGVyXSAtIFJlc3VtZSBPYmplY3QgT2JzZXJ2ZXI6IFwiLGUsYyxyLl9wcm92aXNpb25hbHMpLGMuY2hpbGRyZW5PYmplY3RzJiYoYy5jaGlsZHJlbk9iamVjdHM9KDAscC5kZWVwQ2xvbmUpKGMuY2hpbGRyZW5PYmplY3RzKSksYy5kYXRhPSgwLHAuZGVlcENsb25lKShjLmRhdGEpfHx7fSxjLnJlc3VtZT0hMCxjLnN5bmNoZXI9cixnLmxvZyhcIltzeW5jaGVyLl9yZXN1bWVTdWJzY3JpYmVdIC0gY3JlYXRlIG5ldyBkYXRhT2JqZWN0OiBcIixjKTt2YXIgbD1uZXcgXy5kZWZhdWx0KGMpO2MuY2hpbGRyZW5PYmplY3RzJiZsLnJlc3VtZUNoaWxkcmVucyhjLmNoaWxkcmVuT2JqZWN0cyksZy5sb2coXCJbc3luY2hlci5fcmVzdW1lU3Vic2NyaWJlXSAtIG5ldyBkYXRhT2JqZWN0XCIsbCksci5fb2JzZXJ2ZXJzW2wudXJsXT1sLHIuX3Byb3Zpc2lvbmFsc1tsLnVybF0mJnIuX3Byb3Zpc2lvbmFsc1tsLnVybF0uYXBwbHkobCl9bihyLl9vYnNlcnZlcnMpLHQuX29uT2JzZXJ2ZXJzUmVzdW1lJiZ0Ll9vbk9ic2VydmVyc1Jlc3VtZShyLl9vYnNlcnZlcnMpfWVsc2UgNDA0PT09ZS5ib2R5LmNvZGU/bih7fSk6byhlLmJvZHkuZGVzYyl9KX0pfX0se2tleTpcIl9vbkZvcndhcmRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9yZXBvcnRlcnNbZS5ib2R5LnRvXS5fb25Gb3J3YXJkKGUpfX0se2tleTpcIl9vblJlbW90ZUNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49KDAscC5kaXZpZGVVUkwpKHIpLG89bi5kb21haW4saT17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLGRvbWFpbjpvLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm59fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihnLmluZm8oXCJbU3luY2hlcl0gTk9USUZJQ0FUSU9OLUVWRU5UOiBcIixpKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIoaSkpfX0se2tleTpcIl9vblJlbW90ZURlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2Usbj10Ll9vYnNlcnZlcnNbcl0sbz17ZnJvbTp0Lm93bmVyLHRvOnQuX3N1YlVSTCxpZDplLmlkLHR5cGU6XCJ1bnN1YnNjcmliZVwiLGJvZHk6e3Jlc291cmNlOmUuYm9keS5yZXNvdXJjZX19O2lmKHQuX2J1cy5wb3N0TWVzc2FnZShvKSxkZWxldGUgdC5fb2JzZXJ2ZXJzW3JdLG4pe3ZhciBpPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBvPTIwMDtyJiYobz1yKSwyMDA9PT1vJiZuLmRlbGV0ZSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6byxzb3VyY2U6dC5fb3duZXJ9fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihnLmxvZyhcIk5PVElGSUNBVElPTi1FVkVOVDogXCIsaSksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGkpKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6XCJfb25FeGVjdXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDB9fTtpZigoZS5mcm9tPT09dC5fcnVudGltZVVybCtcIi9yZWdpc3RyeS9cInx8ZS5mcm9tPT09dC5fcnVudGltZVVybCtcIi9yZWdpc3RyeVwiKSYmZS5ib2R5JiZlLmJvZHkubWV0aG9kJiZcImNsb3NlXCI9PT1lLmJvZHkubWV0aG9kJiZ0Ll9vbkNsb3NlKXt2YXIgbj17dHlwZTpcImNsb3NlXCIsYWNrOmZ1bmN0aW9uKGUpe2UmJihyLmJvZHkuY29kZT1lKSx0Ll9idXMucG9zdE1lc3NhZ2Uocil9fTtnLmluZm8oXCJbU3luY2hlcl0gQ2xvc2UtRVZFTlQ6IFwiLG4pLHQuX29uQ2xvc2Uobil9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5Olwib25SZXBvcnRlcnNSZXN1bWVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlcG9ydGVyc1Jlc3VtZT1lfX0se2tleTpcIm9uT2JzZXJ2ZXJzUmVzdW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25PYnNlcnZlcnNSZXN1bWU9ZX19LHtrZXk6XCJvd25lclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcn19LHtrZXk6XCJyZXBvcnRlcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0ZXJzfX0se2tleTpcIm9ic2VydmVyc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLFN5bmNoZXJ9KCk7dC5kZWZhdWx0PVIsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNTMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNDQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTE0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDMpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoNCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigzNiksaD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHYpLF89cigxMzIpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxtPXIoMTMzKSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj1yKDM5KSxPPXIoMTU1KSxEPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoTyksdz1oLmdldExvZ2dlcihcIkRhdGFPYmplY3RcIiksaj1mdW5jdGlvbigpe2Z1bmN0aW9uIERhdGFPYmplY3QoZSl7ZnVuY3Rpb24gdGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKGUpe3Rocm93XCJbRGF0YU9iamVjdF0gXCIrZStcIiBtYW5kYXRvcnkgcGFyYW1ldGVyIGlzIG1pc3NpbmdcIn0oMCxmLmRlZmF1bHQpKHRoaXMsRGF0YU9iamVjdCk7dmFyIHQ9dGhpcztlLnN5bmNoZXI/dC5fc3luY2hlcj1lLnN5bmNoZXI6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwic3luY2hlclwiKSxlLnVybD90Ll91cmw9ZS51cmw6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwidXJsXCIpLGUuY3JlYXRlZD90Ll9jcmVhdGVkPWUuY3JlYXRlZDp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJjcmVhdGVkXCIpLGUucmVwb3J0ZXI/dC5fcmVwb3J0ZXI9ZS5yZXBvcnRlcjp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJyZXBvcnRlclwiKSxlLnJ1bnRpbWU/dC5fcnVudGltZT1lLnJ1bnRpbWU6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwicnVudGltZVwiKSxlLnNjaGVtYT90Ll9zY2hlbWE9ZS5zY2hlbWE6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwic2NoZW1hXCIpLGUubmFtZT90Ll9uYW1lPWUubmFtZTp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJuYW1lXCIpLHQuX3N0YXR1cz1lLnN0YXR1cyxlLmRhdGE/dC5fc3luY09iaj1uZXcgYi5kZWZhdWx0KGUuZGF0YSk6dC5fc3luY09iaj1uZXcgYi5kZWZhdWx0KHt9KSx0Ll9jaGlsZHJlbnM9ZS5jaGlsZHJlbnMsdC5fbXV0dWFsPWUubXV0dWFsLHQuX3ZlcnNpb249MCx0Ll9jaGlsZElkPTAsdC5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sdC5fb25BZGRDaGlsZHJlbkhhbmRsZXIsdC5fcmVzdW1lZD1lLnJlc3VtZSxlLnJlc3VtZSYmKHQuX3ZlcnNpb249ZS52ZXJzaW9uKSx0Ll9vd25lcj1lLnN5bmNoZXIuX293bmVyLHQuX2J1cz1lLnN5bmNoZXIuX2J1cyxlLmRlc2NyaXB0aW9uJiYodC5fZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbiksZS50YWdzJiYodC5fdGFncz1lLnRhZ3MpLGUucmVzb3VyY2VzJiYodC5fcmVzb3VyY2VzPWUucmVzb3VyY2VzKSxlLm9ic2VydmVyU3RvcmFnZSYmKHQuX29ic2VydmVyU3RvcmFnZT1lLm9ic2VydmVyU3RvcmFnZSksZS5wdWJsaWNPYnNlcnZhdGlvbiYmKHQuX3B1YmxpY09ic2VydmF0aW9uPWUucHVibGljT2JzZXJ2YXRpb24pLHQuX21ldGFkYXRhPSgwLGwuZGVmYXVsdCkoZSksKCFlLmhhc093blByb3BlcnR5KFwicmVzdW1lXCIpfHxlLmhhc093blByb3BlcnR5KFwicmVzdW1lXCIpJiYhZS5yZXN1bWUpJiYodC5fbWV0YWRhdGEubGFzdE1vZGlmaWVkPXQuX21ldGFkYXRhLmNyZWF0ZWQpLGRlbGV0ZSB0Ll9tZXRhZGF0YS5kYXRhLGRlbGV0ZSB0Ll9tZXRhZGF0YS5zeW5jaGVyLGRlbGV0ZSB0Ll9tZXRhZGF0YS5hdXRob3Jpc2UsdC5faHlwZXJ0eVJlc291cmNlRmFjdG9yeT1uZXcgRC5kZWZhdWx0LHQuX2NoaWxkcmVuT2JqZWN0cz17fSx0Ll9zaGFyZWRDaGlsZHM9W119cmV0dXJuKDAseS5kZWZhdWx0KShEYXRhT2JqZWN0LFt7a2V5OlwiX2dldExhc3RDaGlsZElkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9MCxyPWUuX293bmVyK1wiI1wiK3Q7cmV0dXJuKDAsdS5kZWZhdWx0KShlLl9jaGlsZHJlbnMpLmZpbHRlcihmdW5jdGlvbih0KXtlLl9jaGlsZHJlbnNbdF0uY2hpbGRJZD5yJiYocj1lLl9jaGlsZHJlbnNbdF0uY2hpbGRJZCl9KSx0PU51bWJlcihyLnNwbGl0KFwiI1wiKVsxXSl9fSx7a2V5OlwiX2FsbG9jYXRlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXQuX3VybCtcIi9jaGlsZHJlbi9cIjt3LmxvZyhcIltEYXRhIE9iamVjdCAtIEFsbG9jYXRlTGlzdGVuZXJzXSAtIFwiLHQuX2NoaWxkcmVucyksdC5fY2hpbGRyZW5zJiZ0Ll9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz1yK24saT10Ll9idXMuYWRkTGlzdGVuZXIobyxmdW5jdGlvbihyKXtpZihyLmZyb20hPT1lLl9vd25lcilzd2l0Y2gody5sb2coXCJEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogXCIsciksci50eXBlKXtjYXNlXCJjcmVhdGVcIjp0Ll9vbkNoaWxkQ3JlYXRlKHIpO2JyZWFrO2Nhc2VcImRlbGV0ZVwiOncubG9nKHIpO2JyZWFrO2RlZmF1bHQ6dC5fY2hhbmdlQ2hpbGRyZW4ocil9fSk7dC5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKX0pfX0se2tleTpcIl9yZWxlYXNlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5yZW1vdmUoKX0pLCgwLHUuZGVmYXVsdCkoZS5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpeygwLHUuZGVmYXVsdCkoZS5fY2hpbGRyZW5PYmplY3RzW3RdKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe2UuX2NoaWxkcmVuT2JqZWN0c1t0XVtyXS5fcmVsZWFzZUxpc3RlbmVycygpfSl9KX19LHtrZXk6XCJyZXN1bWVDaGlsZHJlbnNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcyxuPXRoaXMuX293bmVyK1wiI1wiK3RoaXMuX2NoaWxkSWQ7KDAsdS5kZWZhdWx0KShlKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe3ZhciBpPWVbb107KDAsdS5kZWZhdWx0KShpKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBhPSExO3IuX2NoaWxkcmVuT2JqZWN0cy5oYXNPd25Qcm9wZXJ0eShvKXx8KHIuX2NoaWxkcmVuT2JqZWN0c1tvXT17fSksaVtlXS52YWx1ZS5yZXNvdXJjZVR5cGUmJiFyLl9jaGlsZHJlbk9iamVjdHNbb10uaGFzT3duUHJvcGVydHkoZSk/KHIuX2NoaWxkcmVuT2JqZWN0c1tvXVtlXT1yLl9yZXN1bWVIeXBlcnR5UmVzb3VyY2UoaVtlXSksYT0hMCk6ci5fY2hpbGRyZW5PYmplY3RzW29dLmhhc093blByb3BlcnR5KGUpfHwoci5fY2hpbGRyZW5PYmplY3RzW29dW2VdPXIuX3Jlc3VtZUNoaWxkKGlbZV0pLHcubG9nKFwiW0RhdGFPYmplY3QucmVzdW1lQ2hpbGRyZW5zXSBuZXcgRGF0YU9iamVjdENoaWxkOiBcIixyLl9jaGlsZHJlbk9iamVjdHNbb11bZV0pLGE9ITApLGEmJmU+biYmKG49ZSx3LmxvZyhcIltEYXRhT2JqZWN0UmVwb3J0ZXIucmVzdW1lQ2hpbGRyZW5zXSAtIHJlc3VtaW5nOiBcIix0Ll9jaGlsZHJlbk9iamVjdHNbb11bZV0pKX0pfSksdGhpcy5fY2hpbGRJZD1OdW1iZXIobi5zcGxpdChcIiNcIilbMV0pfX0se2tleTpcIl9yZXN1bWVDaGlsZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnZhbHVlO3IucGFyZW50T2JqZWN0PXQsci5wYXJlbnQ9dC5fdXJsO3ZhciBuPW5ldyBnLmRlZmF1bHQocik7bi5pZGVudGl0eT1lLmlkZW50aXR5O3ZhciBvPXt0eXBlOlwiY3JlYXRlXCIsZnJvbTpuLnJlcG9ydGVyLHVybDpuLnBhcmVudCx2YWx1ZTpuLmRhdGEsY2hpbGRJZDpuLnVybCxpZGVudGl0eTpuLmlkZW50aXR5LGNoaWxkOm59O3JldHVybiBuLnJlc291cmNlVHlwZSYmKG8ucmVzb3VyY2U9biksdC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJnQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pLG59fSx7a2V5OlwiX3Jlc3VtZUh5cGVydHlSZXNvdXJjZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnZhbHVlO3IucGFyZW50T2JqZWN0PXQsci5wYXJlbnQ9dC5fdXJsO3ZhciBuPXQuX2h5cGVydHlSZXNvdXJjZUZhY3RvcnkuY3JlYXRlSHlwZXJ0eVJlc291cmNlKCExLHIucmVzb3VyY2VUeXBlLHIpO24uaWRlbnRpdHk9ZS5pZGVudGl0eTt2YXIgbz17dHlwZTpcImNyZWF0ZVwiLGZyb206bi5yZXBvcnRlcix1cmw6bi5wYXJlbnQsdmFsdWU6bi5kYXRhLGNoaWxkSWQ6bi51cmwsaWRlbnRpdHk6bi5pZGVudGl0eSxjaGlsZDpufTtyZXR1cm4gbi5yZXNvdXJjZVR5cGUmJihvLnJlc291cmNlPW4pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiZ0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSxufX0se2tleTpcInBhdXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvd1wiTm90IGltcGxlbWVudGVkXCJ9fSx7a2V5OlwicmVzdW1lXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvd1wiTm90IGltcGxlbWVudGVkXCJ9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3dcIk5vdCBpbXBsZW1lbnRlZFwifX0se2tleTpcImFkZENoaWxkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcyxpPXZvaWQgMDtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihhKXt2YXIgcz1vLl91cmwrXCIvY2hpbGRyZW4vXCIrZSx1PW8uX2dldENoaWxkSW5wdXQobik7dS5kYXRhPXQsdS5jaGlsZHJlbj1lLGk9bmV3IGcuZGVmYXVsdCh1KSxyJiYoaS5pZGVudGl0eT1yKSxpLnNoYXJlKCksdy5sb2coXCJbRGF0YU9iamVjdC5hZGRDaGlsZF0gYWRkZWQgXCIsaSksaS5vbkNoYW5nZShmdW5jdGlvbihlKXtvLl9vbkNoYW5nZShlLHtwYXRoOnMsY2hpbGRJZDp1LnVybH0pfSksby5fY2hpbGRyZW5PYmplY3RzLmhhc093blByb3BlcnR5KGUpfHwoby5fY2hpbGRyZW5PYmplY3RzW2VdPXt9KSxvLl9jaGlsZHJlbk9iamVjdHNbZV1bdS51cmxdPWksYShpKX0pfX0se2tleTpcIl9kZWxldGVDaGlsZHJlbnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1bXTtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyKXtpZihlLmNoaWxkcmVucyl7dy5sb2coXCJbRGF0YU9iamVjdC5kZWxldGVDaGlsZHJlbnNdXCIsZS5jaGlsZHJlbnMpO3ZhciBuPXZvaWQgMDtmb3IobiBpbiBlLmNoaWxkcmVucyl7dmFyIG89dm9pZCAwO2ZvcihvIGluIGUuY2hpbGRyZW5zW25dKXt2YXIgaT1lLmNoaWxkcmVuc1tuXVtvXTt3LmxvZyhcIltEYXRhT2JqZWN0Ll9kZWxldGVDaGlsZHJlbnNdIGNoaWxkXCIsaSksaS5tZXRhZGF0YS5oYXNPd25Qcm9wZXJ0eShcInJlc291cmNlVHlwZVwiKSYmdC5wdXNoKGUuY2hpbGRyZW5zW25dW29dLmRlbGV0ZSgpKX19fXcubG9nKFwiW0RhdGFPYmplY3QuX2RlbGV0ZUNoaWxkcmVuc10gcHJvbWlzZXMgXCIsdCksdC5sZW5ndGg+MD9hLmRlZmF1bHQuYWxsKHQpLnRoZW4oZnVuY3Rpb24oKXtyKFwiW0RhdGFPYmplY3QuX2RlbGV0ZUNoaWxkcmVuc10gZG9uZVwiKX0pOnIoXCJbRGF0YU9iamVjdC5fZGVsZXRlQ2hpbGRyZW5zXSBub3RoaW5nIHRvIGRlbGV0ZVwiKX0pfX0se2tleTpcIl9nZXRDaGlsZElucHV0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLGwuZGVmYXVsdCkoe30sZSk7cmV0dXJuIHQuX2NoaWxkSWQrKyxyLnVybD10Ll9vd25lcitcIiNcIit0Ll9jaGlsZElkLHIucGFyZW50T2JqZWN0PXQsci5yZXBvcnRlcj10Ll9vd25lcixyLmNyZWF0ZWQ9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLHIucnVudGltZT10Ll9zeW5jaGVyLl9ydW50aW1lVXJsLHIucDJwSGFuZGxlcj10Ll9zeW5jaGVyLl9wMnBIYW5kbGVyLHIucDJwUmVxdWVzdGVyPXQuX3N5bmNoZXIuX3AycFJlcXVlc3RlcixyLnNjaGVtYT10Ll9zY2hlbWEsci5wYXJlbnQ9dC51cmwscn19LHtrZXk6XCJhZGRIeXBlcnR5UmVzb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8pe3ZhciBpPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oYSl7dmFyIHM9dm9pZCAwLHU9aS5fdXJsK1wiL2NoaWxkcmVuL1wiK2UsYz1pLl9nZXRDaGlsZElucHV0KG8pO2MuY2hpbGRyZW49ZSxpLl9oeXBlcnR5UmVzb3VyY2VGYWN0b3J5LmNyZWF0ZUh5cGVydHlSZXNvdXJjZVdpdGhDb250ZW50KCEwLHQscixjKS50aGVuKGZ1bmN0aW9uKHQpe3M9dCxuJiYocy5pZGVudGl0eT1uKSxzLnNoYXJlKCksdy5sb2coXCJbRGF0YU9iamVjdC5hZGRIeXBlcnR5UmVzb3VyY2VdIGFkZGVkIFwiLHMpLHMub25DaGFuZ2UoZnVuY3Rpb24oZSl7aS5fb25DaGFuZ2UoZSx7cGF0aDp1LGNoaWxkSWQ6cy5jaGlsZElkfSl9KSxpLl9jaGlsZHJlbk9iamVjdHMuaGFzT3duUHJvcGVydHkoZSl8fChpLl9jaGlsZHJlbk9iamVjdHNbZV09e30pLGkuX2NoaWxkcmVuT2JqZWN0c1tlXVtzLmNoaWxkSWRdPXMsYShzKX0pfSl9fSx7a2V5Olwib25BZGRDaGlsZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyPWV9fSx7a2V5OlwiX29uQ2hpbGRDcmVhdGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3cubG9nKFwiW0RhdGFPYmplY3QuX29uQ2hpbGRDcmVhdGVdIHJlY2VpdmVkQnkgXCIrdC5fb3duZXIrXCIgOiBcIixlKTt2YXIgcj17ZnJvbTplLnRvLHRvOmUuZnJvbSx0eXBlOlwicmVzcG9uc2VcIixpZDplLmlkLGJvZHk6e2NvZGU6MTAwfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpLGUuYm9keS52YWx1ZS5yZXNvdXJjZVR5cGU/dC5fb25IeXBlcnR5UmVzb3VyY2VBZGRlZChlKTp0Ll9vbkNoaWxkQWRkZWQoZSl9fSx7a2V5OlwiX29uQ2hpbGRBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxSLmRlZXBDbG9uZSkoZS5ib2R5LnZhbHVlKTtyLnBhcmVudE9iamVjdD10O3ZhciBuPXIuY2hpbGRyZW4sbz1uZXcgZy5kZWZhdWx0KHIpO28uaWRlbnRpdHk9ZS5ib2R5LmlkZW50aXR5LHQuX2NoaWxkcmVuT2JqZWN0cy5oYXNPd25Qcm9wZXJ0eShuKXx8KHQuX2NoaWxkcmVuT2JqZWN0c1tuXT17fSksdC5fY2hpbGRyZW5PYmplY3RzW25dW3IudXJsXT1vLGUudG89PT10Lm1ldGFkYXRhLnVybCYmby5zdG9yZSgpLHQuX2h5cGVydHlFdnQoZSxvKX19LHtrZXk6XCJfb25IeXBlcnR5UmVzb3VyY2VBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkudmFsdWUsbj12b2lkIDAsbz1yLmNoaWxkcmVuO3IucGFyZW50T2JqZWN0PXQsbj10Ll9oeXBlcnR5UmVzb3VyY2VGYWN0b3J5LmNyZWF0ZUh5cGVydHlSZXNvdXJjZSghMSxyLnJlc291cmNlVHlwZSxyKSxuLmlkZW50aXR5PWUuYm9keS5pZGVudGl0eSx0Ll9jaGlsZHJlbk9iamVjdHMuaGFzT3duUHJvcGVydHkobyl8fCh0Ll9jaGlsZHJlbk9iamVjdHNbb109e30pLHQuX2NoaWxkcmVuT2JqZWN0c1tvXVtuLmNoaWxkSWRdPW4sdC5faHlwZXJ0eUV2dChlLG4pLGUudG89PT10Lm1ldGFkYXRhLnVybCYmbi5zdG9yZSgpfX0se2tleTpcIl9oeXBlcnR5RXZ0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6ZS50eXBlLGZyb206ZS5mcm9tLHVybDplLnRvLHZhbHVlOnQuZGF0YSxjaGlsZElkOnQudXJsLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxjaGlsZDp0fTt0LnJlc291cmNlVHlwZSYmKG4ucmVzb3VyY2U9dCksci5fb25BZGRDaGlsZHJlbkhhbmRsZXImJnIuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG4pfX0se2tleTpcIl9vbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLHIuX3ZlcnNpb24rKyxcImxpdmVcIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6XCJ1cGRhdGVcIixmcm9tOnIuX3VybCx0bzpyLl91cmwrXCIvY2hhbmdlc1wiLGJvZHk6e3ZlcnNpb246ci5fdmVyc2lvbixzb3VyY2U6ci5fb3duZXIsYXR0cmlidXRlOmUuZmllbGQsbGFzdE1vZGlmaWVkOnIuX21ldGFkYXRhLmxhc3RNb2RpZmllZH19O3cubG9nKFwiW0RhdGFPYmplY3QgLSBfb25DaGFuZ2VdIC0gXCIsZSx0LG4pLGUub1R5cGU9PT1fLk9iamVjdFR5cGUuT0JKRUNUP2UuY1R5cGUhPT1fLkNoYW5nZVR5cGUuUkVNT1ZFJiYobi5ib2R5LnZhbHVlPSgwLFIuZGVlcENsb25lKShlLmRhdGEpKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1fLkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuZGF0YS5fbXV0dWFsfHwobi5ib2R5Lm11dHVhbD1yLl9tdXR1YWwpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OlwiX2NoYW5nZU9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKzE8PXQuYm9keS52ZXJzaW9uKXtyLl92ZXJzaW9uPXQuYm9keS52ZXJzaW9uO3ZhciBuPXQuYm9keS5hdHRyaWJ1dGUsaT12b2lkIDA7aT1cIm9iamVjdFwiPT09KDAsby5kZWZhdWx0KSh0LmJvZHkudmFsdWUpPygwLFIuZGVlcENsb25lKSh0LmJvZHkudmFsdWUpOnQuYm9keS52YWx1ZTt2YXIgYT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5Lmxhc3RNb2RpZmllZD9yLl9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9dC5ib2R5Lmxhc3RNb2RpZmllZDpyLl9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLHQuYm9keS5hdHRyaWJ1dGVUeXBlPT09Xy5PYmplY3RUeXBlLkFSUkFZKWlmKHQuYm9keS5vcGVyYXRpb249PT1fLkNoYW5nZVR5cGUuQUREKXt2YXIgcz1hLm9iaix1PWEubGFzdDtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHMsW3UsMF0uY29uY2F0KGkpKX1lbHNlIGlmKHQuYm9keS5vcGVyYXRpb249PT1fLkNoYW5nZVR5cGUuUkVNT1ZFKXt2YXIgYz1hLm9iaixsPWEubGFzdDtjLnNwbGljZShsLGkpfWVsc2UgYS5vYmpbYS5sYXN0XT1pO2Vsc2UgdC5ib2R5Lmhhc093blByb3BlcnR5KFwidmFsdWVcIik/YS5vYmpbYS5sYXN0XT1pOmRlbGV0ZSBhLm9ialthLmxhc3RdfWVsc2Ugdy5sb2coXCJVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiBcIityLl92ZXJzaW9uK1wiLCBtc2cgPT4gXCIrdC5ib2R5LnZlcnNpb24rXCIpXCIpfX0se2tleTpcIl9jaGFuZ2VDaGlsZHJlblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxSLmRpdmlkZVVSTCkoZS50byksbj1yLmlkZW50aXR5LG89bj9uLnN1YnN0cmluZyhuLmxhc3RJbmRleE9mKFwiL1wiKSsxKTp2b2lkIDAsaT1lLmJvZHkucmVzb3VyY2UsYT10Ll9jaGlsZHJlbk9iamVjdHNbb11baV07dy5sb2coXCJDaGFuZ2UgY2hpbGRyZW46IFwiLHQuX293bmVyLGUsbyksYT90Ll9jaGFuZ2VPYmplY3QoYS5fc3luY09iaixlKTp3Lndhcm4oXCJObyBjaGlsZHJlbiBmb3VuZCBmb3I6IFwiLGkpfX0se2tleTpcIm1ldGFkYXRhXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21ldGFkYXRhfX0se2tleTpcInVybFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5Olwic2NoZW1hXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtYX19LHtrZXk6XCJzdGF0dXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdHVzfX0se2tleTpcImRhdGFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleTpcImNoaWxkcmVuc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHN9fV0pLERhdGFPYmplY3R9KCk7dC5kZWZhdWx0PWosZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuT2JqZWN0VHlwZT10LkNoYW5nZVR5cGU9dm9pZCAwO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSk7cigxNTQpO3ZhciBzPXIoMzkpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBTeW5jT2JqZWN0KGUpeygwLG8uZGVmYXVsdCkodGhpcyxTeW5jT2JqZWN0KTt2YXIgdD10aGlzO3QuX29ic2VydmVycz1bXSx0Ll9maWx0ZXJzPXt9LHRoaXMuX2RhdGE9ZXx8e30sdGhpcy5faW50ZXJuYWxPYnNlcnZlKHRoaXMuX2RhdGEpfXJldHVybigwLGEuZGVmYXVsdCkoU3luY09iamVjdCxbe2tleTpcIm9ic2VydmVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYnNlcnZlcnMucHVzaChlKX19LHtrZXk6XCJmaW5kXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9KDAscy5wYXJzZUF0dHJpYnV0ZXMpKGUpO3JldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KHQpfX0se2tleTpcImZpbmRCZWZvcmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD17fSxyPSgwLHMucGFyc2VBdHRyaWJ1dGVzKShlKTtyZXR1cm4gdC5sYXN0PXIucG9wKCksdC5vYmo9dGhpcy5fZmluZFdpdGhTcGxpdChyKSx0fX0se2tleTpcIl9maW5kV2l0aFNwbGl0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9dFtlXX0pLHR9fSx7a2V5OlwiX2ludGVybmFsT2JzZXJ2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1mdW5jdGlvbihlKXtlLmV2ZXJ5KGZ1bmN0aW9uKGUpe3QuX29uQ2hhbmdlcyhlKX0pfTt0aGlzLl9kYXRhPU9iamVjdC5kZWVwT2JzZXJ2ZShlLHIpfX0se2tleTpcIl9maXJlRXZlbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbih0KXt0KGUpfSl9fSx7a2V5OlwiX29uQ2hhbmdlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUub2JqZWN0LHI9dm9pZCAwO3QuY29uc3RydWN0b3I9PT1PYmplY3QmJihyPWwuT0JKRUNUKSx0LmNvbnN0cnVjdG9yPT09QXJyYXkmJihyPWwuQVJSQVkpO3ZhciBuPWUua2V5cGF0aCxvPXRbZS5uYW1lXTtcInVwZGF0ZVwiIT09ZS50eXBlfHxuLmluY2x1ZGVzKFwiLmxlbmd0aFwiKXx8dGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpjLlVQREFURSxvVHlwZTpyLGZpZWxkOm4sZGF0YTpvfSksXCJhZGRcIj09PWUudHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpjLkFERCxvVHlwZTpyLGZpZWxkOm4sZGF0YTpvfSksXCJkZWxldGVcIj09PWUudHlwZSYmdGhpcy5fZmlyZUV2ZW50KHtjVHlwZTpjLlJFTU9WRSxvVHlwZTpyLGZpZWxkOm59KX19LHtrZXk6XCJkYXRhXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLFN5bmNPYmplY3R9KCksYz10LkNoYW5nZVR5cGU9e1VQREFURTpcInVwZGF0ZVwiLEFERDpcImFkZFwiLFJFTU9WRTpcInJlbW92ZVwifSxsPXQuT2JqZWN0VHlwZT17T0JKRUNUOlwib2JqZWN0XCIsQVJSQVk6XCJhcnJheVwifTt0LmRlZmF1bHQ9dX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTcpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cig0KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDM2KSxsPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksZD1yKDEzMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigzOSkseT1sLmdldExvZ2dlcihcIkRhdGFPYmplY3RDaGlsZFwiKSx2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRGF0YU9iamVjdENoaWxkKGUpe2Z1bmN0aW9uIHRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihlKXt0aHJvd1wiW0RhdGFPYmplY3RDaGlsZF0gXCIrZStcIiBtYW5kYXRvcnkgcGFyYW1ldGVyIGlzIG1pc3NpbmdcIn0oMCxhLmRlZmF1bHQpKHRoaXMsRGF0YU9iamVjdENoaWxkKTt2YXIgdD10aGlzO2UucGFyZW50P3QuX3BhcmVudD1lLnBhcmVudDp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJwYXJlbnRcIiksZS51cmw/dC5fdXJsPWUudXJsOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInVybFwiKSxlLmNyZWF0ZWQ/dC5fY3JlYXRlZD1lLmNyZWF0ZWQ6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwiY3JlYXRlZFwiKSxlLnJlcG9ydGVyP3QuX3JlcG9ydGVyPWUucmVwb3J0ZXI6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwicmVwb3J0ZXJcIiksZS5ydW50aW1lP3QuX3J1bnRpbWU9ZS5ydW50aW1lOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInJ1bnRpbWVcIiksZS5zY2hlbWE/dC5fc2NoZW1hPWUuc2NoZW1hOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInNjaGVtYVwiKSxlLnBhcmVudE9iamVjdD90Ll9wYXJlbnRPYmplY3Q9ZS5wYXJlbnRPYmplY3Q6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwicGFyZW50T2JqZWN0XCIpLGUubmFtZSYmKHQuX25hbWU9ZS5uYW1lKSxlLmRlc2NyaXB0aW9uJiYodC5fZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbiksZS50YWdzJiYodC5fdGFncz1lLnRhZ3MpLGUucmVzb3VyY2VzJiYodC5fcmVzb3VyY2VzPWUucmVzb3VyY2VzKSxlLm9ic2VydmVyU3RvcmFnZSYmKHQuX29ic2VydmVyU3RvcmFnZT1lLm9ic2VydmVyU3RvcmFnZSksZS5wdWJsaWNPYnNlcnZhdGlvbiYmKHQuX3B1YmxpY09ic2VydmF0aW9uPWUucHVibGljT2JzZXJ2YXRpb24pLHQuX2NoaWxkSWQ9ZS51cmwsZS5kYXRhP3QuX3N5bmNPYmo9bmV3IGYuZGVmYXVsdChlLmRhdGEpOnQuX3N5bmNPYmo9bmV3IGYuZGVmYXVsdCh7fSkseS5sb2coXCJbRGF0YU9iamVjdENoaWxkIC0gIENvbnN0cnVjdG9yXSAtIFwiLHQuX3N5bmNPYmopLHQuX2J1cz10Ll9wYXJlbnRPYmplY3QuX2J1cyx0Ll9vd25lcj10Ll9wYXJlbnRPYmplY3QuX293bmVyLHQuX2FsbG9jYXRlTGlzdGVuZXJzKCksdC5fbWV0YWRhdGE9ZSxkZWxldGUgdC5fbWV0YWRhdGEucGFyZW50T2JqZWN0LHQuX3NoYXJpbmdTdGF0dXM9ITF9cmV0dXJuKDAsdS5kZWZhdWx0KShEYXRhT2JqZWN0Q2hpbGQsW3trZXk6XCJzaGFyZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fc2hhcmluZ1N0YXR1cz1uZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89dm9pZCAwO289ZT90Lm1ldGFkYXRhLnBhcmVudDp0Lm1ldGFkYXRhLnBhcmVudCtcIi9jaGlsZHJlbi9cIit0Lm1ldGFkYXRhLmNoaWxkcmVuO3ZhciBpPXQubWV0YWRhdGE7aS5kYXRhPXQuZGF0YTt2YXIgYT17dHlwZTpcImNyZWF0ZVwiLGZyb206dC5tZXRhZGF0YS5yZXBvcnRlcix0bzpvLGJvZHk6e3Jlc291cmNlOmkudXJsLHZhbHVlOml9fTtpZih0LmlkZW50aXR5JiYoYS5ib2R5LmlkZW50aXR5PXQuaWRlbnRpdHkpLHQuX3BhcmVudE9iamVjdC5kYXRhLmhhc093blByb3BlcnR5KFwibXV0dWFsXCIpJiYoYS5ib2R5Lm11dHVhbD10Ll9wYXJlbnRPYmplY3QuZGF0YS5tdXR1YWwpLHQuX3BhcmVudE9iamVjdC5tZXRhZGF0YS5yZXBvcnRlcj09PXQubWV0YWRhdGEucmVwb3J0ZXIpcmV0dXJuIHQuX2J1cy5wb3N0TWVzc2FnZSgoMCxwLmRlZXBDbG9uZSkoYSkpLHIoKTt2YXIgcz1mdW5jdGlvbihlKXtpZihlLnRvPT09dC5fcmVwb3J0ZXIpe3QuX2J1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKGEuZnJvbSxlLmlkKSx5LmxvZyhcIltTeW5jaGVyLkRhdGFPYmplY3RDaGlsZC5zaGFyZV0gUGFyZW50IHJlcG9ydGVyIHJlcGx5IFwiLGUpO3ZhciBvPXtjb2RlOmUuYm9keSYmZS5ib2R5LmNvZGU/ZS5ib2R5LmNvZGU6NTAwLGRlc2M6ZS5ib2R5JiZlLmJvZHkuZGVzYz9lLmJvZHkuZGVzYzpcIlVua25vd25cIn07cmV0dXJuIGUuYm9keS5jb2RlPDMwMD9yKG8pOm4obyl9fSx1PXQuX2J1cy5wb3N0TWVzc2FnZSgoMCxwLmRlZXBDbG9uZSkoYSkscywhMSk7c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiB0Ll9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihhLmZyb20sdSksbih7Y29kZTo0MDgsZGVzYzpcInRpbW91dFwifSl9LDNlMyl9KX19LHtrZXk6XCJzdG9yZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt9LHI9ZS5tZXRhZGF0YS5jaGlsZHJlbitcIi5cIitlLm1ldGFkYXRhLnVybDt0LnZhbHVlPWUubWV0YWRhdGEsdC5pZGVudGl0eT1lLmlkZW50aXR5O3ZhciBuPXtmcm9tOmUubWV0YWRhdGEucmVwb3J0ZXIsdG86ZS5fcGFyZW50T2JqZWN0Ll9zeW5jaGVyLl9zdWJVUkwsdHlwZTpcImNyZWF0ZVwiLGJvZHk6e3Jlc291cmNlOmUubWV0YWRhdGEucGFyZW50LGF0dHJpYnV0ZTpyLHZhbHVlOnR9fTt5LmxvZyhcIltEYXRhT2JqZWN0Q2hpbGQuc3RvcmVdOlwiLG4pLGUuX2J1cy5wb3N0TWVzc2FnZShuKX19LHtrZXk6XCJfYWxsb2NhdGVMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fcmVwb3J0ZXI9PT1lLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9yZXBvcnRlcixmdW5jdGlvbih0KXtcInJlc3BvbnNlXCI9PT10LnR5cGUmJnQuaWQ9PT1lLl9tc2dJZCYmKHkubG9nKFwiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6XCIsdCksZS5fb25SZXNwb25zZSh0KSl9KSl9fSx7a2V5OlwiX3JlbGVhc2VMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleTpcIm9uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKHQpe3kubG9nKFwiW0RhdGFPYmplY3RDaGlsZCAtIG9ic2VydmVyXSAtIFwiLHQpLGUodCl9KX19LHtrZXk6XCJvblJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6XCJfb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleTpcInNoYXJlYWJsZVwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWV0YWRhdGE7cmV0dXJuIGUuZGF0YT10aGlzLmRhdGEsZX19LHtrZXk6XCJtZXRhZGF0YVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhZGF0YX19LHtrZXk6XCJjaGlsZElkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5Olwic2hhcmluZ1N0YXR1c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFyaW5nU3RhdHVzfX0se2tleTpcImRhdGFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleTpcImlkZW50aXR5XCIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2lkZW50aXR5PWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZGVudGl0eX19XSksRGF0YU9iamVjdENoaWxkfSgpO3QuZGVmYXVsdD12LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE3KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzOSksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIElkZW50aXR5TWFuYWdlcihlLHQscil7KDAsYS5kZWZhdWx0KSh0aGlzLElkZW50aXR5TWFuYWdlcik7dmFyIG49dGhpcztuLm1lc3NhZ2VCdXM9cixuLmRvbWFpbj0oMCxjLmRpdmlkZVVSTCkoZSkuZG9tYWluLG4ub3duZXI9ZSxuLnJ1bnRpbWVVUkw9dH1yZXR1cm4oMCx1LmRlZmF1bHQpKElkZW50aXR5TWFuYWdlcixbe2tleTpcImRpc2NvdmVyVXNlclJlZ2lzdGVyZWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT12b2lkIDAsYT1lfHxcIi5cIjtpPXR8fHIub3duZXI7dmFyIHM9e3R5cGU6XCJyZWFkXCIsZnJvbTppLHRvOnIucnVudGltZVVSTCtcIi9yZWdpc3RyeS9cIixib2R5OntyZXNvdXJjZTphLGNyaXRlcmlhOml9fTtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihlKXt2YXIgdD1lLmJvZHkucmVzb3VyY2U7dCYmMjAwPT09ZS5ib2R5LmNvZGU/bih0KTpvKFwiY29kZTogXCIrZS5ib2R5LmNvZGUrXCIgTm8gdXNlciB3YXMgZm91bmRcIil9KX0pfX0se2tleTpcImRpc2NvdmVySWRlbnRpdHlQZXJJZFBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89e3R5cGU6XCJyZWFkXCIsZnJvbTp0aGlzLm93bmVyLHRvOnQucnVudGltZVVSTCtcIi9pZG1cIixib2R5OntyZXNvdXJjZTplLGNyaXRlcmlhOlwiaWRwXCJ9fTt0Lm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT9yKGUuYm9keS52YWx1ZSk6bihlLmJvZHkuY29kZStcIiBcIitlLmJvZHkuZGVzYyl9KX0pfX1dKSxJZGVudGl0eU1hbmFnZXJ9KCk7dC5kZWZhdWx0PWwsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTcpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cig0KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDM2KSxsPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksZD1yKDM5KSxmPXIoMTYyKSxwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZikseT1sLmdldExvZ2dlcihcIkRpc2NvdmVyeVwiKSx2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRGlzY292ZXJ5KGUsdCxyKXsoMCxhLmRlZmF1bHQpKHRoaXMsRGlzY292ZXJ5KTt2YXIgbj10aGlzO24ubWVzc2FnZUJ1cz1yLG4ucnVudGltZVVSTD10LG4uZG9tYWluPSgwLGQuZGl2aWRlVVJMKShlKS5kb21haW4sbi5kaXNjb3ZlcnlVUkw9ZX1yZXR1cm4oMCx1LmRlZmF1bHQpKERpc2NvdmVyeSxbe2tleTpcIl9pc0xlZ2FjeVVzZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hKCFlLmluY2x1ZGVzKFwiOlwiKXx8ZS5pbmNsdWRlcyhcInVzZXI6Ly9cIikpfX0se2tleTpcImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlclByb2ZpbGVEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1bXSxhPXt0eXBlOlwicmVhZFwiLGZyb206bi5kaXNjb3ZlcnlVUkwsdG86bi5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9oeXBlcnR5L3VzZXJwcm9maWxlL1wiK2V9fTtyZXR1cm4odHx8cikmJihhLmJvZHkuY3JpdGVyaWE9e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnR9KSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7bi5faXNMZWdhY3lVc2VyKGUpP3QoW3toeXBlcnR5SUQ6ZSxzdGF0dXM6XCJsaXZlXCJ9XSk6bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24ocil7MjAwPT09ci5ib2R5LmNvZGU/KHIuYm9keS52YWx1ZS5tYXAoZnVuY3Rpb24oZSl7ZS5oeXBlcnR5SUQhPW4uZGlzY292ZXJ5VVJMJiZpLnB1c2goZSl9KSwwPT09aS5sZW5ndGg/dChbXSk6KHkubG9nKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc1BlclVzZXJQcm9maWxlRGF0YV0gUmVwbHkgbG9nOiBcIixpKSx0KGkpKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGFdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlclByb2ZpbGVEYXRhRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe24uZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGEuYXBwbHkobixpKS50aGVuKGZ1bmN0aW9uKHQpe2Uobi5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9e3R5cGU6XCJyZWFkXCIsZnJvbTpuLmRpc2NvdmVyeVVSTCx0bzpuLnJ1bnRpbWVVUkwrXCIvZGlzY292ZXJ5L1wiLGJvZHk6e3Jlc291cmNlOlwiL2RhdGFPYmplY3QvdXNlcnByb2ZpbGUvXCIrZX19O3JldHVybih0fHxyKSYmKGkuYm9keS5jcml0ZXJpYT17cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dH0pLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtuLl9pc0xlZ2FjeVVzZXIoZSk/dChbe2h5cGVydHlJRDplLHN0YXR1czpcImxpdmVcIn1dKTpuLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT8oeS5sb2coXCJSZXBseSBsb2c6IFwiLHIuYm9keS52YWx1ZSksdChyLmJvZHkudmFsdWUpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyVXNlclByb2ZpbGVEYXRhXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RzUGVyVXNlclByb2ZpbGVEYXRhRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe24uZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YS5hcHBseShuLGkpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUobi5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1bXSxhPXt0eXBlOlwicmVhZFwiLGZyb206bi5kaXNjb3ZlcnlVUkwsdG86bi5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9oeXBlcnR5L2d1aWQvXCIrZX19O3JldHVybih0fHxyKSYmKGEuYm9keS5jcml0ZXJpYT17cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dH0pLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtuLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihvKXsyMDA9PT1vLmJvZHkuY29kZT8oby5ib2R5LnZhbHVlLm1hcChmdW5jdGlvbihlKXtlLmh5cGVydHlJRCE9bi5kaXNjb3ZlcnlVUkwmJmkucHVzaChlKX0pLDA9PT1pLmxlbmd0aD9yKFwiTm8gSHlwZXJ0eSB3YXMgZm91bmRcIik6KHkubG9nKFwiUmVwbHkgbG9nOiBcIixpKSx0KGkpKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlEXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLG8uYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydGllc1BlckdVSURET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7bi5kaXNjb3Zlckh5cGVydGllc1BlckdVSUQuYXBwbHkobixpKS50aGVuKGZ1bmN0aW9uKHQpe2Uobi5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSURcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPXt0eXBlOlwicmVhZFwiLGZyb206bi5kaXNjb3ZlcnlVUkwsdG86bi5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L2d1aWQvXCIrZX19O3JldHVybih0fHxyKSYmKGkuYm9keS5jcml0ZXJpYT17cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dH0pLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtuLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT8oeS5sb2coXCJSZXBseSBsb2c6IFwiLHIuYm9keS52YWx1ZSksdChyLmJvZHkudmFsdWUpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRF0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSURET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7bi5kaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRC5hcHBseShuLGkpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUobi5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnRpZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9dm9pZCAwLHM9W107YT1ufHxpLmRvbWFpbjt2YXIgdT17dHlwZTpcInJlYWRcIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOmkucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvaHlwZXJ0eS91c2VyL1wiK2V9fTtyZXR1cm4gdS5ib2R5LmNyaXRlcmlhPXR8fHI/e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnQsZG9tYWluOmF9Ontkb21haW46YX0sbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kuX2lzTGVnYWN5VXNlcihlKT90KFt7aHlwZXJ0eUlEOmUsc3RhdHVzOlwibGl2ZVwifV0pOmkubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh1LGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlfHw1MDA9PT1yLmJvZHkuY29kZT8oci5ib2R5LnZhbHVlLm1hcChmdW5jdGlvbihlKXtlLmh5cGVydHlJRCE9aS5kaXNjb3ZlcnlVUkwmJnMucHVzaChlKX0pLHkubG9nKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc10gUmVwbHkgOiBcIixzKSx0KHMpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc10gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQocykpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydGllc0RPXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe2kuZGlzY292ZXJIeXBlcnRpZXMuYXBwbHkoaSxhKS50aGVuKGZ1bmN0aW9uKHQpe2UoaS5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT12b2lkIDA7YT1ufHxpLmRvbWFpbjt2YXIgcz17dHlwZTpcInJlYWRcIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOmkucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvZGF0YU9iamVjdC91c2VyL1wiK2V9fTtyZXR1cm4gcy5ib2R5LmNyaXRlcmlhPXR8fHI/e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnQsZG9tYWluOmF9Ontkb21haW46YX0sbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdHNdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtpLmRpc2NvdmVyRGF0YU9iamVjdHMuYXBwbHkoaSxhKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKGkuX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0eVBlclVSTFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXR8fHIuZG9tYWluO3ZhciBpPXt0eXBlOlwicmVhZFwiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ci5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9oeXBlcnR5L3VybC9cIitlLGNyaXRlcmlhOntkb21haW46bn19fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eVBlclVSTF0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnR5UGVyVVJMRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtyLmRpc2NvdmVySHlwZXJ0eVBlclVSTC5hcHBseShyLG4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUobmV3IHAuZGVmYXVsdCh0LHIucnVudGltZVVSTCxyLmRpc2NvdmVyeVVSTCxyLm1lc3NhZ2VCdXMscikpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdFBlclVSTFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXR8fHIuZG9tYWluO3ZhciBpPXt0eXBlOlwicmVhZFwiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ci5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L3VybC9cIitlLGNyaXRlcmlhOntkb21haW46bn19fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTF0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtyLmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTC5hcHBseShyLG4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUobmV3IHAuZGVmYXVsdCh0LHIucnVudGltZVVSTCxyLmRpc2NvdmVyeVVSTCxyLm1lc3NhZ2VCdXMscikpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPXZvaWQgMDthPW58fGkuZG9tYWluO3ZhciBzPXt0eXBlOlwicmVhZFwiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86aS5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L25hbWUvXCIrZX19O3JldHVybiBzLmJvZHkuY3JpdGVyaWE9dHx8cj97cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dCxkb21haW46YX06e2RvbWFpbjphfSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7aS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7MjAwPT09ci5ib2R5LmNvZGU/KHkubG9nKFwiUmVwbHkgVmFsdWUgTG9nOiBcIixyLmJvZHkudmFsdWUpLHQoci5ib2R5LnZhbHVlKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0c1Blck5hbWVdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7aS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZS5hcHBseShpLGEpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUoaS5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPXZvaWQgMDthPW58fGkuZG9tYWluO3ZhciBzPXt0eXBlOlwicmVhZFwiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86aS5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L3JlcG9ydGVyL1wiK2V9fTtyZXR1cm4gcy5ib2R5LmNyaXRlcmlhPXR8fHI/e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnQsZG9tYWluOmF9Ontkb21haW46YX0sbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXJET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtpLmRpc2NvdmVyRGF0YU9iamVjdHNQZXJSZXBvcnRlci5hcHBseShpLGEpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUoaS5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IHAuZGVmYXVsdChlLHQucnVudGltZVVSTCx0LmRpc2NvdmVyeVVSTCx0Lm1lc3NhZ2VCdXMsdCl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9dm9pZCAwO2E9bnx8aS5kb21haW47dmFyIHM9e3R5cGU6XCJyZWFkXCIsZnJvbTppLmRpc2NvdmVyeVVSTCx0bzpcImRvbWFpbjovL3JlZ2lzdHJ5LlwiK2EsYm9keTp7cmVzb3VyY2U6ZSxjcml0ZXJpYTp7cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dH19fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2lmKHkubG9nKFwiW0Rpc2NvdmVyeV1cIixyKSxyLmJvZHkuY29kZT4yOTkpcmV0dXJuIHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0XSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSk7dmFyIG49ci5ib2R5LnZhbHVlO3Qobnx8W10pfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydHlcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9dm9pZCAwLHM9KDAsZC5jb252ZXJ0VG9Vc2VyVVJMKShlKTtyZXR1cm4gYT1ufHxpLmRvbWFpbixuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8sdSl7aWYoeS5sb2coXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eV0gQUNUSVZFIERPTUFJTiAtPiBcIixhLFwidXNlci0+XCIsZSxcInNjaGVtYS0+XCIsdCxcInJlc291cmNlcy0+XCIscixcImRvbWFpbi0+XCIsbiksZS5pbmNsdWRlcyhcIjpcIikmJiFlLmluY2x1ZGVzKFwidXNlcjovL1wiKSl7eS5sb2coXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eV0gXCIrZStcIiBpcyBsZWdhY3kgZG9tYWluXCIpO3JldHVybiBvKHt1c2VySUQ6ZSxoeXBlcnR5SUQ6ZSxzY2hlbWE6dCxyZXNvdXJjZXM6cn0pfXZhciBjPXt0eXBlOlwicmVhZFwiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86XCJkb21haW46Ly9yZWdpc3RyeS5cIithLGJvZHk6e3Jlc291cmNlOnMsY3JpdGVyaWE6e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnR9fX07eS5pbmZvKFwiW0Rpc2NvdmVyeV0gbXNnIHRvIHNlbmQtPlwiLGMpLGkubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShjLGZ1bmN0aW9uKGUpe3kuaW5mbyhcIltEaXNjb3ZlcnldIE9OIGRpc2NvdmVySHlwZXJ0eS0+XCIsZSk7dmFyIHQ9ZS5ib2R5LnZhbHVlO3Q/byh0KTp1KFwiTm8gSHlwZXJ0eSB3YXMgZm91bmRcIil9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0eVBlclVzZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtpZihlLmluY2x1ZGVzKFwiOlwiKSYmIWUuaW5jbHVkZXMoXCJ1c2VyOi8vXCIpKXt5LmxvZyhcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnR5XSBcIitlK1wiaXMgbGVnYWN5IGRvbWFpblwiKTtyZXR1cm4gbyh7aWQ6ZSxoeXBlcnR5VVJMOmUsZGVzY3JpcHRvcjpcInVua25vd25cIn0pfW49dHx8ci5kb21haW47dmFyIGE9XCJ1c2VyOi8vXCIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKFwiQFwiKSsxLGUubGVuZ3RoKStcIi9cIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZihcIkBcIikpLHM9e3R5cGU6XCJyZWFkXCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzpcImRvbWFpbjovL3JlZ2lzdHJ5LlwiK24sYm9keTp7cmVzb3VyY2U6YX19O3kuaW5mbyhcIltEaXNjb3ZlcnldIE1lc3NhZ2U6IFwiLHMsbixhKSxyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbih0KXt5LmluZm8oXCJbRGlzY292ZXJ5XSBtZXNzYWdlIHJlcGx5XCIsdCk7dmFyIHI9dm9pZCAwLG49dm9pZCAwLGE9dm9pZCAwLHM9dC5ib2R5LnZhbHVlO2ZvcihyIGluIHMpaWYodm9pZCAwIT09c1tyXS5sYXN0TW9kaWZpZWQpaWYodm9pZCAwPT09biluPW5ldyBEYXRlKHNbcl0ubGFzdE1vZGlmaWVkKSxhPXI7ZWxzZXt2YXIgdT1uZXcgRGF0ZShzW3JdLmxhc3RNb2RpZmllZCk7bi5nZXRUaW1lKCk8dS5nZXRUaW1lKCkmJihuPXUsYT1yKX15LmluZm8oXCJbRGlzY292ZXJ5XSBMYXN0IEh5cGVydHk6IFwiLGEsbik7dmFyIGM9YTtpZih2b2lkIDA9PT1jKXJldHVybiBpKFwiVXNlciBIeXBlcnR5IG5vdCBmb3VuZFwiKTt2YXIgbD17aWQ6ZSxkZXNjcmlwdG9yOnNbY10uZGVzY3JpcHRvcixoeXBlcnR5VVJMOmN9O3kuaW5mbyhcIltEaXNjb3ZlcnldID09PT4gaHlwZXJ0eURpc2NvdmVyeSBtZXNzYWdlQnVuZGxlOiBcIixsKSxvKGwpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7cmV0dXJuIHkubG9nKFwib24gRnVuY3Rpb24tPlwiLGUpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtpZihlLmluY2x1ZGVzKFwiOlwiKSYmIWUuaW5jbHVkZXMoXCJ1c2VyOi8vXCIpKXt5LmxvZyhcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnR5XSBpcyBsZWdhY3kgZG9tYWluXCIpO3ZhciBhPXt1c2VySUQ6ZSxoeXBlcnR5SUQ6ZSxzY2hlbWE6c2NoZW1hLHJlc291cmNlczpyZXNvdXJjZXN9O3JldHVybiBvKGEpfW49dHx8ci5kb21haW47dmFyIHM9XCJ1c2VyOi8vXCIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKFwiQFwiKSsxLGUubGVuZ3RoKStcIi9cIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZihcIkBcIikpLHU9e3R5cGU6XCJyZWFkXCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzpcImRvbWFpbjovL3JlZ2lzdHJ5LlwiK24sYm9keTp7cmVzb3VyY2U6c319O3kubG9nKFwiW0Rpc2NvdmVyeV0gTWVzc2FnZSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXI6IFwiLHUsbixzKSxyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodSxmdW5jdGlvbihlKXt5LmluZm8oXCJbRGlzY292ZXJ5XSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXIgcmVwbHlcIixlKTt2YXIgdD1lLmJvZHkudmFsdWU7aWYoIXQpcmV0dXJuIGkoXCJVc2VyIEh5cGVydHkgbm90IGZvdW5kXCIpO28odCl9KX0pfX0se2tleTpcInJlc3VtZURpc2NvdmVyaWVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB5LmxvZyhcIltEaXNjb3ZlcnldIHJlc3VtZURpc2NvdmVyaWVzXCIpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXt2YXIgbj17dHlwZTpcInJlYWRcIixmcm9tOmUuZGlzY292ZXJ5VVJMLHRvOmUucnVudGltZVVSTCtcIi9zdWJzY3JpcHRpb25zXCIsYm9keTp7cmVzb3VyY2U6ZS5kaXNjb3ZlcnlVUkx9fTtlLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihyKXt5LmxvZyhcIltEaXNjb3ZlcnkucmVzdW1lRGlzY292ZXJpZXNdIHJlcGx5OiBcIixyKTt2YXIgbj1bXTtpZigyMDA9PT1yLmJvZHkuY29kZSl7ci5ib2R5LnZhbHVlLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9dC5zcGxpdChcIi9yZWdpc3RyYXRpb25cIilbMF07KHt9KS51cmw9cix5LmxvZyhcIltEaXNjb3ZlcnkucmVzdW1lRGlzY292ZXJpZXNdIGFkZGluZyBsaXN0ZW5lciB0bzogXCIsciksci5pbmNsdWRlcyhcImh5cGVydHk6Ly9cIik/bi5wdXNoKGUuZGlzY292ZXJIeXBlcnR5UGVyVVJMRE8ocikpOm4ucHVzaChlLmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTERPKHIpKX0pLG8uZGVmYXVsdC5hbGwobikudGhlbihmdW5jdGlvbihlKXt0KGUpfSl9ZWxzZSB0KFtdKX0pfSl9fV0pLERpc2NvdmVyeX0oKTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0NCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigyNiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzKSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDQpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMzQpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMzUpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxfPXIoMTM3KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksbT1mdW5jdGlvbihlKXtmdW5jdGlvbiBDb250ZXh0T2JzZXJ2ZXIoZSx0LHIsbixvLGkpe2lmKCgwLGwuZGVmYXVsdCkodGhpcyxDb250ZXh0T2JzZXJ2ZXIpLCFlKXRocm93IG5ldyBFcnJvcihcIlRoZSBoeXBlcnR5VVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlclwiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyIFwiKTtpZighbyl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgZmFjdG9yeSBpcyBhIG5lZWRlZCBwYXJhbWV0ZXIgXCIpO3ZhciBhPSgwLHkuZGVmYXVsdCkodGhpcywoQ29udGV4dE9ic2VydmVyLl9fcHJvdG9fX3x8KDAsdS5kZWZhdWx0KShDb250ZXh0T2JzZXJ2ZXIpKS5jYWxsKHRoaXMpKSxzPWE7cy5fY29udGV4dFJlc291cmNlVHlwZXM9bixzLl91cmw9ZSxzLl9kaXNjb3ZlclVzZXJzUHJvbWlzZXM9e30scy5fb2JzZXJ2ZVByb21pc2VzPXt9LHMuX2RvbWFpbj1vLmRpdmlkZVVSTChyLnJ1bnRpbWVVUkwpLmRvbWFpbixzLl9vYmplY3REZXNjVVJMPVwiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuXCIrcy5fZG9tYWluK1wiLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29udGV4dFwiLHMuX3VzZXJzMm9ic2VydmU9W10scy5fb2JzZXJ2ZXJzPXt9LGEuX3N5bmNoZXI9aXx8by5jcmVhdGVTeW5jaGVyKGUsdCxyKTt2YXIgYz1vLmNyZWF0ZURpc2NvdmVyeShlLHIucnVudGltZVVSTCx0KTtyZXR1cm4gcy5fZGlzY292ZXJ5PWMscy5fZGlzY292ZXJpZXM9e30sd2luZG93LmRpc2NvdmVyeT1zLl9kaXNjb3ZlcnksYX1yZXR1cm4oMCxoLmRlZmF1bHQpKENvbnRleHRPYnNlcnZlcixlKSwoMCxmLmRlZmF1bHQpKENvbnRleHRPYnNlcnZlcixbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7ci5fc3luY2hlci5yZXN1bWVPYnNlcnZlcnMoe3N0b3JlOiEwfSkudGhlbihmdW5jdGlvbihpKXt2YXIgYT0oMCxvLmRlZmF1bHQpKGkpO2EubGVuZ3RoPjA/KHIuX29ic2VydmVycz1pLG4oaSksYS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPWlbcl07ZSYmKGNvbnRleHQuZGF0YS52YWx1ZXM9ZSksbi5zeW5jKCksdCYmbi5vbkRpc2Nvbm5lY3RlZCh0KX0pKTpuKCExKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oITEpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZWplY3QoXCJbQ29udGV4dE9ic2VydmVyXSBTdGFydCBmYWlsZWQgfCBcIixlKX0pfX0se2tleTpcInJlc3VtZURpc2NvdmVyaWVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7ZS5fZGlzY292ZXJ5LnJlc3VtZURpc2NvdmVyaWVzKCkudGhlbihmdW5jdGlvbihyKXtyLmZvckVhY2goZnVuY3Rpb24ocil7ci5kYXRhLnJlc291cmNlcyYmci5kYXRhLnJlc291cmNlc1swXT09PWUuX2NvbnRleHRSZXNvdXJjZVR5cGVzWzBdJiYoXCJsaXZlXCI9PT1yLmRhdGEuc3RhdHVzPyh0KFtyLmRhdGFdKSxyLnVuc3Vic2NyaWJlTGl2ZShlLl91cmwpKTpyLm9uTGl2ZShlLl91cmwsZnVuY3Rpb24oKXt0KFtyLmRhdGFdKSxyLnVuc3Vic2NyaWJlTGl2ZShlLl91cmwpfSkpfSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JlamVjdChcIltDb250ZXh0T2JzZXJ2ZXJdIHJlc3VtZURpc2NvdmVyaWVzIGZhaWxlZCB8IFwiLGUpfSl9fSx7a2V5Olwib25SZXN1bWVPYnNlcnZlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzdW1lT2JzZXJ2ZXI9ZX19LHtrZXk6XCJkaXNjb3ZlclVzZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49ZStcIkBcIit0O3JldHVybiByLl9kaXNjb3ZlclVzZXJzUHJvbWlzZXNbbl18fChyLl9kaXNjb3ZlclVzZXJzUHJvbWlzZXNbbl09bmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuX2Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc0RPKGUsW1wiY29udGV4dFwiXSxyLl9jb250ZXh0UmVzb3VyY2VUeXBlcyx0KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG89W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX2Rpc2NvdmVyaWVzW2UuZGF0YS5oeXBlcnR5SURdPWUsXCJsaXZlXCI9PT1lLmRhdGEuc3RhdHVzP3QucHVzaChlLmRhdGEpOm8ucHVzaChlKX0pLHQubGVuZ3RoPjA/bih0KTpvLmxlbmd0aD4wJiZvWzBdLm9uTGl2ZShyLl91cmwsZnVuY3Rpb24oKXt0LnB1c2gob1swXS5kYXRhKSxuKHQpLG9bMF0udW5zdWJzY3JpYmVMaXZlKHIuX3VybCl9KX0pfSkpLHIuX2Rpc2NvdmVyVXNlcnNQcm9taXNlc1tuXX19LHtrZXk6XCJvYnNlcnZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxyPXRoaXM7cmV0dXJuIHIuX29ic2VydmVQcm9taXNlc1tlLmh5cGVydHlJRF18fChyLl9vYnNlcnZlUHJvbWlzZXNbZS5oeXBlcnR5SURdPW5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixvKXtyLl91c2VyczJvYnNlcnZlLmZvckVhY2goZnVuY3Rpb24odCl7aWYodC5fcmVwb3J0ZXI9PT1lLmh5cGVydHlJRClyZXR1cm4gbih0KX0pLHIuX2Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXIoZS5oeXBlcnR5SUQsW1wiY29udGV4dFwiXSxyLl9jb250ZXh0UmVzb3VyY2VUeXBlcyxyLl9kb21haW4pLnRoZW4oZnVuY3Rpb24oaSl7dmFyIGE9MCxzPXZvaWQgMDtpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5oYXNPd25Qcm9wZXJ0eShcImxhc3RNb2RpZmllZFwiKSYmZS5oYXNPd25Qcm9wZXJ0eShcInVybFwiKSYmRGF0ZS5wYXJzZShlLmxhc3RNb2RpZmllZCk+YSYmKGE9ZS5sYXN0TW9kaWZpZWQscz1lLnVybCl9KSwwIT1hJiZzP24oci5fc3Vic2NyaWJlQ29udGV4dChlLHMsdCkpOm8oXCJbQ29udGV4dE9ic2VydmVyLm9ic2VydmVdIGRpc2NvdmVyZWQgRGF0YU9iamVjcyBhcmUgaW52YWxpZFwiLGkpfSl9KSksci5fb2JzZXJ2ZVByb21pc2VzW2UuaHlwZXJ0eUlEXX19LHtrZXk6XCJfc3Vic2NyaWJlQ29udGV4dFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSxuPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oZSxvKXtuLl91c2VyczJvYnNlcnZlLmZvckVhY2goZnVuY3Rpb24ocil7aWYoci51cmw9PT10KXJldHVybiBlKHIpfSksbi5fc3luY2hlci5zdWJzY3JpYmUobi5fb2JqZWN0RGVzY1VSTCx0LG51bGwsbnVsbCxudWxsLHIpLnRoZW4oZnVuY3Rpb24odCl7bi5fdXNlcnMyb2JzZXJ2ZS5wdXNoKHQpLHQub25EaXNjb25uZWN0ZWQoZnVuY3Rpb24oKXt0LmRhdGEudmFsdWVzWzBdLnZhbHVlPVwidW5hdmFpbGFibGVcIix0LnN5bmMoKX0pLGUodCl9KX0pfX0se2tleTpcIl9kaXNjb3ZlckFuZFN1YnNjcmliZUxlZ2FjeVVzZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZShlKS50aGVuKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtcImxpdmVcIj09PWUuc3RhdHVzJiYoZS5oeXBlcnR5SUR8fChlLmh5cGVydHlJRD1lLnJlcG9ydGVyKSx0Ll9zdWJzY3JpYmVDb250ZXh0KGUuc2NoZW1hLGUudXJsKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByKGUpfSkpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt9KX0pfX0se2tleTpcInVub2JzZXJ2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fdXNlcnMyb2JzZXJ2ZS5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7ci51cmw9PT1lJiYoci51bnN1YnNjcmliZSgpLHQuX3VzZXJzMm9ic2VydmUuc3BsaWNlKG4sMSkpfSl9fV0pLENvbnRleHRPYnNlcnZlcn0oYi5kZWZhdWx0KTt0LmRlZmF1bHQ9bSxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCl7KDAsby5kZWZhdWx0KSh0aGlzLEV2ZW50RW1pdHRlcil9cmV0dXJuKDAsYS5kZWZhdWx0KShFdmVudEVtaXR0ZXIsW3trZXk6XCJhZGRFdmVudExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzW2VdPXR9fSx7a2V5OlwidHJpZ2dlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyW2VdJiZyW2VdKHQpfX1dKSxFdmVudEVtaXR0ZXJ9KCk7dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMjYpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMyksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cig0KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDM0KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDM1KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDEzNyksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLG09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gQ29udGV4dFJlcG9ydGVyKGUsdCxyLG4sbyl7aWYoKDAsbC5kZWZhdWx0KSh0aGlzLENvbnRleHRSZXBvcnRlciksIWUpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGh5cGVydHlVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlRoZSBNaW5pQnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlclwiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY29uZmlndXJhdGlvbiBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7dmFyIGk9KDAseS5kZWZhdWx0KSh0aGlzLChDb250ZXh0UmVwb3J0ZXIuX19wcm90b19ffHwoMCx1LmRlZmF1bHQpKENvbnRleHRSZXBvcnRlcikpLmNhbGwodGhpcyxlLHQscikpO3JldHVybiBpLnN5bmNoZXI9b3x8bi5jcmVhdGVTeW5jaGVyKGUsdCxyKSxpLmRvbWFpbj1uLmRpdmlkZVVSTChyLnJ1bnRpbWVVUkwpLmRvbWFpbixpLmNvbnRleHRzPXt9LGkuY29udGV4dERlc2NVUkw9XCJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS5cIitpLmRvbWFpbitcIi8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0NvbnRleHRcIixpLnN5bmNoZXIub25Ob3RpZmljYXRpb24oZnVuY3Rpb24oZSl7aS5vbk5vdGlmaWNhdGlvbihlKX0pLGkuc3luY2hlci5vbkNsb3NlKGZ1bmN0aW9uKGUpe2kuc2V0U3RhdHVzKGUuaWQsXCJ1bmF2YWlsYWJsZVwiKSxlLmFjaygpfSksaX1yZXR1cm4oMCxoLmRlZmF1bHQpKENvbnRleHRSZXBvcnRlcixlKSwoMCxmLmRlZmF1bHQpKENvbnRleHRSZXBvcnRlcixbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2Uuc3luY2hlci5yZXN1bWVSZXBvcnRlcnMoe3N0b3JlOiEwfSkudGhlbihmdW5jdGlvbihlKXt2YXIgbj0oMCxvLmRlZmF1bHQpKGUpO24ubGVuZ3RoPjA/KHQuY29udGV4dHM9ZSxuLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fb25TdWJzY3JpcHRpb24odC5jb250ZXh0c1tlXSl9KSxyKHQuY29udGV4dHMpKTpyKCExKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe30pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmVqZWN0KFwiW0NvbnRleHRSZXBvcnRlcl0gU3RhcnQgZmFpbGVkIHwgXCIsZSl9KX19LHtrZXk6XCJwcm9jZXNzTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5hY2soKX19LHtrZXk6XCJjcmVhdGVcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOlwibXlDb250ZXh0XCIsbz1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XT9hcmd1bWVudHNbNF06bnVsbCxpPWFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdP2FyZ3VtZW50c1s1XTpudWxsLHM9dGhpcyx1PXZvaWQgMDtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihhLGMpe3U9b3x8aT9vJiYhaT97cmVzb3VyY2VzOnIsZXhwaXJlczozMCxyZXBvcnRlcjpvfTohbyYmaT97cmVzb3VyY2VzOnIsZXhwaXJlczozMCxyZXVzZVVSTDppfTp7cmVzb3VyY2VzOnIsZXhwaXJlczozMCxyZXVzZVVSTDppLHJlcG9ydGVyOm99OntyZXNvdXJjZXM6cixleHBpcmVzOjMwfSxzLnN5bmNoZXIuY3JlYXRlKHMuY29udGV4dERlc2NVUkwsW10sdCwhMCwhMSxuLG51bGwsdSkudGhlbihmdW5jdGlvbih0KXtzLmNvbnRleHRzW2VdPXQscy5fb25TdWJzY3JpcHRpb24odCksYSh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2MoZSl9KX0pfX0se2tleTpcIl9vblN1YnNjcmlwdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Uub25TdWJzY3JpcHRpb24oZnVuY3Rpb24oZSl7ZS5hY2NlcHQoKX0pfX0se2tleTpcInNldENvbnRleHRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5jb250ZXh0c1tlXS5kYXRhLnZhbHVlcz10LHIudHJpZ2dlcihlK1wiLWNvbnRleHQtdXBkYXRlXCIsdCl9fV0pLENvbnRleHRSZXBvcnRlcn0oYi5kZWZhdWx0KTt0LmRlZmF1bHQ9bSxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig2OSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMTI1KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDE2OCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBDaGF0Q29udHJvbGxlcihlLHQscixuLG8saSl7aWYoKDAsdS5kZWZhdWx0KSh0aGlzLENoYXRDb250cm9sbGVyKSwhZSl0aHJvdyBFcnJvcihcIlN5bmNoZXIgaXMgYSBuZWNlc3NhcnkgZGVwZW5kZWN5XCIpO2lmKCF0KXRocm93IEVycm9yKFwiRGlzY292ZXIgaXMgYSBuZWNlc3NhcnkgZGVwZW5kZWN5XCIpO2lmKCFyKXRocm93IEVycm9yKFwiRG9tYWluIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeVwiKTtpZighbil0aHJvdyBFcnJvcihcIlNlYXJjaCBpcyBhIG5lY2Vzc2FyeSBkZXBlbmRlY3lcIik7dmFyIGE9dGhpczthLl9zeW5jaGVyPWUsYS5kaXNjb3Zlcnk9dCxhLnNlYXJjaD1uLGEubXlJZGVudGl0eT1vLGEuY29udHJvbGxlck1vZGU9XCJyZXBvcnRlclwiLGEuY2hpbGRfY3NlcT0wLGEuZG9tYWluPXIsYS5fbWFuYWdlcj1pO3ZhciBzPWUub3duZXI7YS5fb2JqZWN0RGVzY1VSTD1cImh5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLlwiK3IrXCIvLndlbGwta25vd24vZGF0YXNjaGVtYS9Db21tdW5pY2F0aW9uXCIsYS5faW52aXRhdGlvbnNIYW5kbGVyPW5ldyB5LmRlZmF1bHQocyl9cmV0dXJuKDAsbC5kZWZhdWx0KShDaGF0Q29udHJvbGxlcixbe2tleTpcIl9zZXRPbkFkZENoaWxkTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2Uub25BZGRDaGlsZChmdW5jdGlvbihlKXt0LmNoaWxkX2NzZXErPTEsdC5fb25NZXNzYWdlJiZ0Ll9vbk1lc3NhZ2UoZSl9KX19LHtrZXk6XCJfb25TdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXI7ZS5hY2NlcHQoKTt2YXIgcj1KU09OLnBhcnNlKCgwLGEuZGVmYXVsdCkoZS5pZGVudGl0eSkpO3IuaGFzT3duUHJvcGVydHkoXCJhc3NlcnRpb25cIikmJmRlbGV0ZSByLmFzc2VydGlvbjt2YXIgbj17aHlwZXJ0eVVSTDplLnVybCxkb21haW46ZS5kb21haW4saWRlbnRpdHk6cn0sbz1lLmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkw7ZS5pZGVudGl0eS5sZWdhY3kmJihuLmxlZ2FjeT1lLmlkZW50aXR5LmxlZ2FjeSksdC5kYXRhLnBhcnRpY2lwYW50c1tvXT1uLHRoaXMuX29uVXNlckFkZGVkJiZ0aGlzLl9vblVzZXJBZGRlZChuKX19LHtrZXk6XCJfb25VbnN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGFPYmplY3RSZXBvcnRlcixyPWUuaWRlbnRpdHkudXNlclByb2ZpbGU7ZS5pZGVudGl0eS5sZWdhY3kmJihyLmxlZ2FjeT1lLmlkZW50aXR5LmxlZ2FjeSksZGVsZXRlIHQuZGF0YS5wYXJ0aWNpcGFudHNbci51c2VyVVJMXSx0aGlzLl9vblVzZXJSZW1vdmVkJiZ0aGlzLl9vblVzZXJSZW1vdmVkKHIpfX0se2tleTpcInNlbmRGaWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuY29udHJvbGxlck1vZGUsbj1cInJlcG9ydGVyXCI9PT1yP3QuZGF0YU9iamVjdFJlcG9ydGVyOnQuZGF0YU9iamVjdE9ic2VydmVyO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbyl7dmFyIGk9e3VzZXJQcm9maWxlOnQubXlJZGVudGl0eX07bi5hZGRIeXBlcnR5UmVzb3VyY2UoXCJyZXNvdXJjZXNcIixcImZpbGVcIixlLGkpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG89e3VzZXJQcm9maWxlOnQubXlJZGVudGl0eX0saT17dmFsdWU6ZSxpZGVudGl0eTpvLHJlc291cmNlOmV9LGE9bmV3IGYuZGVmYXVsdChuLnVybCx0Ll9tYW5hZ2VyLl9ydW50aW1lVVJMLHQuX21hbmFnZXIuX2h5cGVydHlVUkwsdC5fbWFuYWdlci5fYnVzKTshZnVuY3Rpb24gc2hhcmUyUmVwb3J0ZXIoZSx0LG4sbyl7dmFyIGk9bztlLnNoYXJpbmdTdGF0dXMudGhlbihyKG4pKS5jYXRjaChmdW5jdGlvbihyKXtpLm9uTGl2ZSh0LGZ1bmN0aW9uKCl7aS51bnN1YnNjcmliZUxpdmUodCksZS5zaGFyZSghMCksc2hhcmUyUmVwb3J0ZXIoZSx0LG4saSl9KX0pfShlLHQuX21hbmFnZXIuX2h5cGVydHlVUkwsaSxhKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmVqZWN0KGUpfSl9fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXIuY29udHJvbGxlck1vZGUsaT1cInJlcG9ydGVyXCI9PT1uP3IuZGF0YU9iamVjdFJlcG9ydGVyOnIuZGF0YU9iamVjdE9ic2VydmVyO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7ci5jaGlsZF9jc2VxKz0xO3ZhciBhPXt0eXBlOlwiY2hhdFwiLGNvbnRlbnQ6ZX0scz10fHx7dXNlclByb2ZpbGU6ci5teUlkZW50aXR5fTtpLmFkZENoaWxkKFwicmVzb3VyY2VzXCIsYSxzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PXtjaGlsZElkOmUuX2NoaWxkSWQsZnJvbTplLl9vd25lcix2YWx1ZTplLmRhdGEsdHlwZTpcImNyZWF0ZVwiLGlkZW50aXR5OnN9LG89bmV3IGYuZGVmYXVsdChpLnVybCxyLl9tYW5hZ2VyLl9ydW50aW1lVVJMLHIuX21hbmFnZXIuX2h5cGVydHlVUkwsci5fbWFuYWdlci5fYnVzKTshZnVuY3Rpb24gc2hhcmUyUmVwb3J0ZXIoZSx0LHIsbyl7dmFyIGk9bztlLnNoYXJpbmdTdGF0dXMudGhlbihuKHIpKS5jYXRjaChmdW5jdGlvbihuKXtpLm9uTGl2ZSh0LGZ1bmN0aW9uKCl7aS51bnN1YnNjcmliZUxpdmUodCksZS5zaGFyZSghMCksc2hhcmUyUmVwb3J0ZXIoZSx0LHIsaSl9KX0pfShlLHIuX21hbmFnZXIuX2h5cGVydHlVUkwsdCxvKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oZSl9KX0pfX0se2tleTpcIm9uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25DaGFuZ2U9ZX19LHtrZXk6XCJvbk1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbk1lc3NhZ2U9ZX19LHtrZXk6XCJvblVzZXJBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uVXNlckFkZGVkPWV9fSx7a2V5Olwib25Vc2VyUmVtb3ZlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uVXNlclJlbW92ZWQ9ZX19LHtrZXk6XCJvbkNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25DbG9zZT1lfX0se2tleTpcIm9uUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlPWV9fSx7a2V5OlwiYWRkVXNlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1mdW5jdGlvbihlKXtyZXR1cm4gMCE9PWUubGVuZ3RofTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLGkpe2lmKDA9PT1lLmZpbHRlcihyKS5sZW5ndGgpcmV0dXJuIGkoXCJEb24ndCBoYXZlIHVzZXJzIHRvIGludml0ZVwiKTt2YXIgYT1bXSxzPVtdLHU9e307ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXQuZGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzRE8oZS51c2VyLFtcImNvbW1cIl0sW1wiY2hhdFwiXSxlLmRvbWFpbik7YS5wdXNoKHIpfSksby5kZWZhdWx0LmFsbChhKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciByPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7XCJsaXZlXCI9PT1lLmRhdGEuc3RhdHVzPyhyLnB1c2goZS5kYXRhLmh5cGVydHlJRCksdVtlLmRhdGEuaHlwZXJ0eUlEXT1lKTpzLmxlbmd0aDw1JiZzLnB1c2goZSl9KX0pO3ZhciBuPVwicmVwb3J0ZXJcIj09PXQuY29udHJvbGxlck1vZGU/dC5kYXRhT2JqZWN0UmVwb3J0ZXI6dC5kYXRhT2JqZWN0T2JzZXJ2ZXI7cy5sZW5ndGg+MCYmdC5faW52aXRhdGlvbnNIYW5kbGVyLmludml0ZURpc2Nvbm5lY3RlZEh5cGVydGllcyhzLG4pLG4uaW52aXRlT2JzZXJ2ZXJzKHIpLG4uaW52aXRhdGlvbnMubGVuZ3RoPjAmJnQuX2ludml0YXRpb25zSGFuZGxlci5wcm9jZXNzSW52aXRhdGlvbnModSxuKX0pLnRoZW4oZnVuY3Rpb24oKXtuKCEwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koZSl9KX0pfX0se2tleTpcImFkZFVzZXJSZXFcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZnVuY3Rpb24oZSl7cmV0dXJuIDAhPT1lLmxlbmd0aH07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXtpZigwPT09ZS5maWx0ZXIocikubGVuZ3RoKXJldHVybiBvKFwiW0NoYXRNYW5hZ2VyLkNoYXRDb250cm9sbGVyLmFkZFVzZXJSZXFdIERvbid0IGhhdmUgdXNlcnMgdG8gYWRkXCIpO2lmKFwib2JzZXJ2ZXJcIj09PSF0LmNvbnRyb2xsZXJNb2RlKXtyZXR1cm4gbyhcIltDaGF0TWFuYWdlci5DaGF0Q29udHJvbGxlci5hZGRVc2VyUmVxXSBvbmx5IGFsbG93ZWQgdG8gQ2hhdCBPYnNlcnZlclwiKX19KX19LHtrZXk6XCJvbkludml0YXRpb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fb25JbnZpdGF0aW9uUmVzcG9uc2U9ZSx0Ll9pbnZpdGF0aW9uc0hhbmRsZXIuaW52aXRhdGlvblJlc3BvbnNlPWV9fSx7a2V5OlwicmVtb3ZlVXNlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe319LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2lmKFwicmVwb3J0ZXJcIj09PWUuY29udHJvbGxlck1vZGUpZS5faW52aXRhdGlvbnNIYW5kbGVyLmNsZWFuSW52aXRhdGlvbnMoZS5kYXRhT2JqZWN0UmVwb3J0ZXIpLnRoZW4oZnVuY3Rpb24oKXt0cnl7ZGVsZXRlIGUuX21hbmFnZXIuX3JlcG9ydGVyc0NvbnRyb2xsZXJzW2UuZGF0YU9iamVjdFJlcG9ydGVyLnVybF0sZS5kYXRhT2JqZWN0UmVwb3J0ZXIuZGVsZXRlKCksdCghMCksZS5fb25DbG9zZSYmZS5fb25DbG9zZSh7Y29kZToyMDAsZGVzYzpcImRlbGV0ZWRcIix1cmw6ZS5kYXRhT2JqZWN0UmVwb3J0ZXIudXJsfSl9Y2F0Y2goZSl7cighMSl9fSk7ZWxzZSB0cnl7ZGVsZXRlIGUuX21hbmFnZXIuX29ic2VydmVyc0NvbnRyb2xsZXJzW2UuZGF0YU9iamVjdE9ic2VydmVyLnVybF0sZS5kYXRhT2JqZWN0T2JzZXJ2ZXIudW5zdWJzY3JpYmUoKSx0KCEwKX1jYXRjaChlKXtyKCExKX19KX19LHtrZXk6XCJpbnZpdGF0aW9uc0hhbmRsZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW52aXRhdGlvbnNIYW5kbGVyfX0se2tleTpcInVybFwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmVwb3J0ZXJcIj09PXRoaXMuY29udHJvbGxlck1vZGU/dGhpcy5kYXRhT2JqZWN0UmVwb3J0ZXIudXJsOnRoaXMuZGF0YU9iamVjdE9ic2VydmVyLnVybH19LHtrZXk6XCJkYXRhT2JqZWN0UmVwb3J0ZXJcIixzZXQ6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiW0NoYXRDb250cm9sbGVyXSBUaGUgZGF0YSBvYmplY3QgcmVwb3J0ZXIgaXMgbmVjZXNzYXJ5IHBhcmFtZXRlciBcIik7dmFyIHQ9dGhpczt0LmNvbnRyb2xsZXJNb2RlPVwicmVwb3J0ZXJcIixlLm9uU3Vic2NyaXB0aW9uKGZ1bmN0aW9uKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2VcInN1YnNjcmliZVwiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2VcInVuc3Vic2NyaWJlXCI6dC5fb25VbnN1YnNjcmliZShlKX19KSx0Ll9zZXRPbkFkZENoaWxkTGlzdGVuZXIoZSksZS5vblJlYWQoZnVuY3Rpb24oZSl7ZS5hY2NlcHQoKX0pLGUub25FeGVjdXRlKGZ1bmN0aW9uKGUpe3N3aXRjaChlLm1ldGhvZCl7Y2FzZVwiYWRkVXNlclwiOnQuYWRkVXNlcihlLnBhcmFtc1swXSkudGhlbihmdW5jdGlvbigpe2UuYWNjZXB0KCl9KS5jYXRjaChmdW5jdGlvbih0KXtlLnJlamVjdCh0KX0pO2JyZWFrO2Nhc2VcInJlbW92ZVVzZXJcIjp0LnJlbW92ZVVzZXIoZS5wYXJhbXMpLnRoZW4oZnVuY3Rpb24oKXtlLmFjY2VwdCgpfSkuY2F0Y2goZnVuY3Rpb24odCl7ZS5yZWplY3QodCl9KTticmVhaztkZWZhdWx0OmUucmVqZWN0KFwiW0NoYXRDb250cm9sbGVyLm9uRXhlY3V0ZV0gQ2hhdCBtZXRob2QgZXhlY3V0aW9uIG5vdCBhY2NlcHRlZCBieSBSZXBvcnRlclwiKX19KSx0Ll9kYXRhT2JqZWN0UmVwb3J0ZXI9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFPYmplY3RSZXBvcnRlcn19LHtrZXk6XCJtZXNzYWdlc1wiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmVwb3J0ZXJcIj09PXRoaXMuY29udHJvbGxlck1vZGU/dGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyLl9jaGlsZHJlbk9iamVjdHMucmVzb3VyY2VzOnRoaXMuX2RhdGFPYmplY3RPYnNlcnZlci5fY2hpbGRyZW5PYmplY3RzLnJlc291cmNlc319LHtrZXk6XCJkYXRhT2JqZWN0T2JzZXJ2ZXJcIixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmNvbnRyb2xsZXJNb2RlPVwib2JzZXJ2ZXJcIix0Ll9kYXRhT2JqZWN0T2JzZXJ2ZXI9ZSxlLm9uQ2hhbmdlKFwiKlwiLGZ1bmN0aW9uKGUpe2lmKGUuZmllbGQuaW5jbHVkZXMoXCJwYXJ0aWNpcGFudHNcIikpc3dpdGNoKGUuY1R5cGUpe2Nhc2VcImFkZFwiOnQuX29uVXNlckFkZGVkJiZ0Ll9vblVzZXJBZGRlZChlKTticmVhaztjYXNlXCJyZW1vdmVcIjp0Ll9vblVzZXJSZW1vdmVkJiZ0Ll9vblVzZXJSZW1vdmVkKGUpfXQuX29uQ2hhbmdlJiZ0Ll9vbkNoYW5nZShlKX0pLHQuX3NldE9uQWRkQ2hpbGRMaXN0ZW5lcihlKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFPYmplY3RPYnNlcnZlcn19LHtrZXk6XCJkYXRhT2JqZWN0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyZXBvcnRlclwiPT09dGhpcy5jb250cm9sbGVyTW9kZT90aGlzLmRhdGFPYmplY3RSZXBvcnRlcjp0aGlzLmRhdGFPYmplY3RPYnNlcnZlcn19LHtrZXk6XCJjbG9zZUV2ZW50XCIsc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2xvc2VFdmVudD1lLHQuX29uQ2xvc2UmJnQuX29uQ2xvc2UoZSl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9zZUV2ZW50fX1dKSxDaGF0Q29udHJvbGxlcn0oKTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSwsLCwsLCwsLCwsLGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNvbnRleHRSZXBvcnRlcj10LkNvbnRleHRPYnNlcnZlcj10LklkZW50aXR5TWFuYWdlcj10LkRpc2NvdmVyeT10LlN5bmNoZXI9dC5TYW5kYm94RmFjdG9yeT10LlNhbmRib3hSZWdpc3RyeT10LlNhbmRib3hUeXBlPXQuU2FuZGJveD12b2lkIDA7dmFyIG49cigxNTIpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTI4KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDEyOSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxMzApLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMTM1KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDEzNCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigxMzYpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxfPXIoMTM4KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyk7dC5TYW5kYm94PW8uZGVmYXVsdCx0LlNhbmRib3hUeXBlPW4uU2FuZGJveFR5cGUsdC5TYW5kYm94UmVnaXN0cnk9YS5kZWZhdWx0LHQuU2FuZGJveEZhY3Rvcnk9dS5kZWZhdWx0LHQuU3luY2hlcj1sLmRlZmF1bHQsdC5EaXNjb3Zlcnk9Zi5kZWZhdWx0LHQuSWRlbnRpdHlNYW5hZ2VyPXkuZGVmYXVsdCx0LkNvbnRleHRPYnNlcnZlcj1oLmRlZmF1bHQsdC5Db250ZXh0UmVwb3J0ZXI9Yi5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5TYW5kYm94VHlwZT12b2lkIDA7dmFyIG49cig0NCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigyNiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzKSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDQpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMzQpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMzUpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxfPXIoMTI4KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksbT1yKDEyNiksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9KHQuU2FuZGJveFR5cGU9e0FQUDpcImFwcFwiLE5PUk1BTDpcIm5vcm1hbFwiLFdJTkRPVzpcIndpbmRvd1wifSxmdW5jdGlvbihlKXtmdW5jdGlvbiBTYW5kYm94KGUpeygwLGwuZGVmYXVsdCkodGhpcyxTYW5kYm94KTt2YXIgdD0oMCx5LmRlZmF1bHQpKHRoaXMsKFNhbmRib3guX19wcm90b19ffHwoMCx1LmRlZmF1bHQpKFNhbmRib3gpKS5jYWxsKHRoaXMpKSxyPXQ7cmV0dXJuIGUmJihyLmNhcGFiaWxpdGllcz1lKSx0fXJldHVybigwLGguZGVmYXVsdCkoU2FuZGJveCxlKSwoMCxmLmRlZmF1bHQpKFNhbmRib3gsW3trZXk6XCJkZXBsb3lDb21wb25lbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihvLGkpe3ZhciBhPXt0eXBlOlwiY3JlYXRlXCIsZnJvbTpiLmRlZmF1bHQuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzLHRvOmIuZGVmYXVsdC5JbnRlcm5hbERlcGxveUFkZHJlc3MsYm9keTp7dXJsOnQsc291cmNlQ29kZTplLGNvbmZpZzpyfX07bi5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKGUpezIwMD09PWUuYm9keS5jb2RlP28oXCJkZXBsb3llZFwiKTppKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OlwicmVtb3ZlQ29tcG9uZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPXt0eXBlOlwiZGVsZXRlXCIsZnJvbTpiLmRlZmF1bHQuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzLHRvOmIuZGVmYXVsdC5JbnRlcm5hbERlcGxveUFkZHJlc3MsYm9keTp7dXJsOmV9fTt0LnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24oZSl7MjAwPT09ZS5ib2R5LmNvZGU/cihcInVuZGVwbG95ZWRcIik6bihlLmJvZHkuZGVzYyl9KX0pfX0se2tleTpcIm1hdGNoZXNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsby5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuISh0LmNhcGFiaWxpdGllc1tyXSYmdC5jYXBhYmlsaXRpZXNbcl09PT1lW3JdKX0pO3JldHVybiAwPT09ci5sZW5ndGh8fCFlW3JdfX1dKSxTYW5kYm94fShnLmRlZmF1bHQpKTt0LmRlZmF1bHQ9Un0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNjkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMTcpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMjYpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMyksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cig0KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDM0KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDExNiksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLG09cigzNSksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9cigzNiksTz1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KFIpLEQ9cigxMzEpLHc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChEKSxqPXIoMzkpLEw9Ty5nZXRMb2dnZXIoXCJEYXRhT2JqZWN0UmVwb3J0ZXJcIiksaz1mdW5jdGlvbihlKXtmdW5jdGlvbiBEYXRhT2JqZWN0UmVwb3J0ZXIoZSl7KDAsZi5kZWZhdWx0KSh0aGlzLERhdGFPYmplY3RSZXBvcnRlcik7dmFyIHQ9KDAsaC5kZWZhdWx0KSh0aGlzLChEYXRhT2JqZWN0UmVwb3J0ZXIuX19wcm90b19ffHwoMCxsLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlcikpLmNhbGwodGhpcyxlKSkscj10O3JldHVybiByLl9zdWJzY3JpcHRpb25zPXt9LHIuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbihlKXtMLmxvZyhcIltTeW5jaGVyLkRhdGFPYmplY3RSZXBvcnRlcl0gXCIrci51cmwrXCIgcHVibGlzaCBjaGFuZ2U6IFwiLGUpLHIuX29uQ2hhbmdlKGUpfSksci5fYWxsb2NhdGVMaXN0ZW5lcnMoKSxyLmludml0YXRpb25zPVtdLHIuX2NoaWxkcmVuU2l6ZVRocmVzaG9sZD01ZTQsdH1yZXR1cm4oMCxnLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlcixlKSwoMCx5LmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlcixbe2tleTpcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsYi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlLl9fcHJvdG9fX3x8KDAsbC5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlKSxcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9vYmplY3RMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe3N3aXRjaChMLmxvZyhcIltTeW5jaGVyLkRhdGFPYmplY3RSZXBvcnRlcl0gbGlzdGVuZXIgXCIrZS5fdXJsK1wiIFJlY2VpdmVkOiBcIix0KSx0LnR5cGUpe2Nhc2VcInJlc3BvbnNlXCI6ZS5fb25SZXNwb25zZSh0KTticmVhaztjYXNlXCJyZWFkXCI6ZS5fb25SZWFkKHQpO2JyZWFrO2Nhc2VcImV4ZWN1dGVcIjplLl9vbkV4ZWN1dGUodCk7YnJlYWs7Y2FzZVwiY3JlYXRlXCI6ZS5fb25DaGlsZENyZWF0ZSh0KX19KX19LHtrZXk6XCJfcmVsZWFzZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsYi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlLl9fcHJvdG9fX3x8KDAsbC5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlKSxcIl9yZWxlYXNlTGlzdGVuZXJzXCIsdGhpcykuY2FsbCh0aGlzKSx0aGlzLl9vYmplY3RMaXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6XCJpbnZpdGVPYnNlcnZlcnNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1lO24ubGVuZ3RoPjAmJihMLmxvZyhcIltTeW5jaGVyLkRhdGFPYmplY3RSZXBvcnRlcl0gSW52aXRlT2JzZXJ2ZXJzIFwiLG4sci5fbWV0YWRhdGEpLG4uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1uZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9e3R5cGU6XCJjcmVhdGVcIixmcm9tOnIuX3N5bmNoZXIuX293bmVyLHRvOnIuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXN1bWU6ITEscmVzb3VyY2U6ci5fdXJsLHNjaGVtYTpyLl9zY2hlbWEsdmFsdWU6ci5fbWV0YWRhdGEsYXV0aG9yaXNlOltlXX19O3QmJihpLmJvZHkucDJwPXQpLHIuZGF0YS5tdXR1YWx8fChpLmJvZHkubXV0dWFsPXIuZGF0YS5tdXR1YWwpLHIuX2J1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKHQpe0wubG9nKFwiW1N5bmNoZXIuRGF0YU9iamVjdFJlcG9ydGVyXSBJbnZpdGF0aW9uIHJlcGx5IFwiLHQpO3ZhciByPXtpbnZpdGVkOmUsY29kZTp0LmJvZHkmJnQuYm9keS5jb2RlP3QuYm9keS5jb2RlOjUwMCxkZXNjOnQuYm9keSYmdC5ib2R5LmRlc2M/dC5ib2R5LmRlc2M6XCJVbmtub3duXCJ9O3IuY29kZTwzMDA/bihyKTpyLmNvZGU+PTMwMCYmbyhyKX0pfSk7ci5pbnZpdGF0aW9ucy5wdXNoKG4pfSkpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9kZWxldGVDaGlsZHJlbnMoKS50aGVuKGZ1bmN0aW9uKHQpe0wubG9nKHQpO3ZhciByPXt0eXBlOlwiZGVsZXRlXCIsZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzb3VyY2U6ZS5fdXJsfX07ZS5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24odCl7TC5sb2coXCJEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiBcIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fcmVwb3J0ZXJzW2UuX3VybF0sZS5fc3luY09iaj17fSl9KX0pfX0se2tleTpcIm9uU3Vic2NyaXB0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyPWV9fSx7a2V5Olwib25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyPWV9fSx7a2V5Olwib25SZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZWFkSGFuZGxlcj1lfX0se2tleTpcIm9uRXhlY3V0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uRXhlY3V0ZUhhbmRsZXI9ZX19LHtrZXk6XCJfb25Gb3J3YXJkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztzd2l0Y2goTC5sb2coXCJEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiBcIixlKSxlLmJvZHkudHlwZSl7Y2FzZVwic3Vic2NyaWJlXCI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZVwidW5zdWJzY3JpYmVcIjp0Ll9vblVuU3Vic2NyaWJlKGUpfX19LHtrZXk6XCJfb25TdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmZyb20sbj0oMCxqLmRpdmlkZVVSTCkociksbz1uLmRvbWFpbixpPSEwO2UuYm9keS5oYXNPd25Qcm9wZXJ0eShcIm11dHVhbFwiKSYmIWUuYm9keS5tdXR1YWwmJihpPSExKSxMLmxvZyhcIltEYXRhT2JqZWN0UmVwb3J0ZXIuX29uU3Vic2NyaWJlXVwiLGUsbyxuKTt2YXIgYT17dHlwZTplLmJvZHkudHlwZSx1cmw6cixkb21haW46byxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksbnV0dWFsOmksYWNjZXB0OmZ1bmN0aW9uKCl7dmFyIG49e3VybDpyLHN0YXR1czpcImxpdmVcIn07dC5fc3Vic2NyaXB0aW9uc1tyXT1uLHQubWV0YWRhdGEuc3Vic2NyaXB0aW9ucyYmdC5tZXRhZGF0YS5zdWJzY3JpcHRpb25zLnB1c2gobi51cmwpO3ZhciBvPSgwLGouZGVlcENsb25lKSh0Ll9tZXRhZGF0YSk7by5kYXRhPSgwLGouZGVlcENsb25lKSh0LmRhdGEpLG8udmVyc2lvbj10Ll92ZXJzaW9uO3ZhciBpPXtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsc2NoZW1hOnQuX3NjaGVtYSx2YWx1ZTpvfX07cmV0dXJuIGUuYm9keS5oYXNPd25Qcm9wZXJ0eShcIm11dHVhbFwiKSYmIWUuYm9keS5tdXR1YWwmJihpLmJvZHkubXV0dWFsPWUuYm9keS5tdXR1YWwsdC5kYXRhLm11dHVhbD0hMSksdC5fYnVzLnBvc3RNZXNzYWdlKGkpLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOnJ9fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihMLmxvZyhcIlNVQlNDUklQVElPTi1FVkVOVDogXCIsYSksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGEpKX19LHtrZXk6XCJfb25VblN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPSgwLGouZGl2aWRlVVJMKShyKSxvPW4uZG9tYWluO0wubG9nKFwiW0RhdGFPYmplY3RSZXBvcnRlci5fb25VblN1YnNjcmliZV1cIixlLG8sbiksZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl0sZGVsZXRlIHQuaW52aXRhdGlvbnNbcl07dmFyIGk9e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsZG9tYWluOm8saWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihMLmxvZyhcIlVOLVNVQlNDUklQVElPTi1FVkVOVDogXCIsaSksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGkpKX19LHtrZXk6XCJfb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKEwubG9nKFwiUkVTUE9OU0UtRVZFTlQ6IFwiLHIpLHQuX29uUmVzcG9uc2VIYW5kbGVyKHIpKX19LHtrZXk6XCJfb25SZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLGEuZGVmYXVsdCkodC5jaGlsZHJlbnNKU09OKS5sZW5ndGgsbj1yPnQuX2NoaWxkcmVuU2l6ZVRocmVzaG9sZCxpPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGFjY2VwdDpmdW5jdGlvbigpe24/dC5fc3luY1JlcGx5Rm9yTGFyZ2VEYXRhKGUpOnQuX3N5bmNSZXBseShlKX0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAxLGRlc2M6cn19KX19LHM9W107dC5tZXRhZGF0YS5zdWJzY3JpcHRpb25zP3M9dC5tZXRhZGF0YS5zdWJzY3JpcHRpb25zOnQuX3N1YnNjcmlwdGlvbnMmJihzPSgwLG8uZGVmYXVsdCkodC5fc3Vic2NyaXB0aW9ucykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zdWJzY3JpcHRpb25zW2VdLnVybH0pKSwtMSE9cy5pbmRleE9mKGUuZnJvbSk/bj90Ll9zeW5jUmVwbHlGb3JMYXJnZURhdGEoZSk6dC5fc3luY1JlcGx5KGUpOnQuX29uUmVhZEhhbmRsZXImJihMLmxvZyhcIlJFQUQtRVZFTlQ6IFwiLGkpLHQuX29uUmVhZEhhbmRsZXIoaSkpfX0se2tleTpcIl9zeW5jUmVwbHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsai5kZWVwQ2xvbmUpKHQubWV0YWRhdGEpO3IuZGF0YT0oMCxqLmRlZXBDbG9uZSkodC5kYXRhKSxyLmNoaWxkcmVuT2JqZWN0cz0oMCxqLmRlZXBDbG9uZSkodC5jaGlsZHJlbnNKU09OKSxyLnZlcnNpb249dC5fdmVyc2lvbjt2YXIgbj17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOnJ9fTt0Ll9idXMucG9zdE1lc3NhZ2Uobil9fSx7a2V5OlwiX3N5bmNSZXBseUZvckxhcmdlRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxqLmRlZXBDbG9uZSkodC5tZXRhZGF0YSk7ci5kYXRhPSgwLGouZGVlcENsb25lKSh0LmRhdGEpLHIudmVyc2lvbj10Ll92ZXJzaW9uLGRlbGV0ZSByLmNoaWxkcmVuT2JqZWN0czt2YXIgbj12b2lkIDAsbz1bXSxpPXt9O2ZvcihuIGluIHQuX2NoaWxkcmVuT2JqZWN0cyl7dmFyIHM9dm9pZCAwO2lbbl09e307Zm9yKHMgaW4gdC5fY2hpbGRyZW5PYmplY3RzW25dKSgwLGEuZGVmYXVsdCkoaSkubGVuZ3RoPnQuX2NoaWxkcmVuU2l6ZVRocmVzaG9sZCYmKG8ucHVzaChpKSxpPXt9LGlbbl09e30pLGlbbl1bc109e30saVtuXVtzXS52YWx1ZT10Ll9jaGlsZHJlbk9iamVjdHNbbl1bc10ubWV0YWRhdGEsaVtuXVtzXS5pZGVudGl0eT10Ll9jaGlsZHJlbk9iamVjdHNbbl1bc10uaWRlbnRpdHl9by5wdXNoKGkpLHIucmVzcG9uc2VzPW8ubGVuZ3RoKzE7dmFyIHU9e2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjEwMCx2YWx1ZTpyfX07dC5fYnVzLnBvc3RNZXNzYWdlKHUpLG8uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj0oMCxqLmRlZXBDbG9uZSkodSk7bi5ib2R5LnZhbHVlPWUsbi5ib2R5LnZhbHVlLnJlc3BvbnNlcz1yLnJlc3BvbnNlcyxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fYnVzLnBvc3RNZXNzYWdlKG4pfSw1MCl9KX19LHtrZXk6XCJfb25FeGVjdXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5ib2R5Lm1ldGhvZCl0aHJvdyBlO3ZhciByPXtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDB9fSxuPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLG1ldGhvZDplLmJvZHkubWV0aG9kLHBhcmFtczplLmJvZHkucGFyYW1zLGFjY2VwdDpmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZShyKX0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAxLGRlc2M6cn19KX19O3QuX29uRXhlY3V0ZUhhbmRsZXImJihMLmxvZyhcIltEYXRhT2JqZWN0UmVwb3J0ZXJdIEVYRUNVVEUtRVZFTlQ6IFwiLG4pLHQuX29uRXhlY3V0ZUhhbmRsZXIobikpfX0se2tleTpcInN1YnNjcmlwdGlvbnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uc319LHtrZXk6XCJjaGlsZHJlbnNKU09OXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt9LHI9dm9pZCAwO2ZvcihyIGluIGUuX2NoaWxkcmVuT2JqZWN0cyl7dmFyIG49dm9pZCAwO3Rbcl09e307Zm9yKG4gaW4gZS5fY2hpbGRyZW5PYmplY3RzW3JdKXRbcl1bbl09e30sdFtyXVtuXS52YWx1ZT1lLl9jaGlsZHJlbk9iamVjdHNbcl1bbl0ubWV0YWRhdGEsdFtyXVtuXS5pZGVudGl0eT1lLl9jaGlsZHJlbk9iamVjdHNbcl1bbl0uaWRlbnRpdHl9cmV0dXJuIHR9fV0pLERhdGFPYmplY3RSZXBvcnRlcn0ody5kZWZhdWx0KTt0LmRlZmF1bHQ9ayxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQpeyFmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIE9ic2VydmVyKGUsdCxyLG4sbyxpKXtmdW5jdGlvbiBkZWxpdmVyKGUsbil7aWYoZGVsaXZlci5kZWxheT1uLCFkZWxpdmVyLnBhdXNlJiZzLmNoYW5nZXNldC5sZW5ndGg+MCl7aWYoIWUpe3ZhciBvPXMuY2hhbmdlc2V0LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hcnx8ci5pbmRleE9mKGUudHlwZSk+PTB9KTtvLmxlbmd0aD4wJiZ0KG8pfXMuY2hhbmdlc2V0PVtdfX12YXIgYSxzPXRoaXM7cmV0dXJuIGRlbGl2ZXIucGF1c2U9byxkZWxpdmVyLmRlbGF5PWkscy5nZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm5cIl9fb2JzZXJ2ZXJfX1wiPT09dD9zOlwidW5vYnNlcnZlXCI9PT10P2Z1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC51bm9ic2VydmUoZSksZX06XCJkZWxpdmVyXCI9PT10P2RlbGl2ZXI6ZVt0XX0scy50YXJnZXQ9ZSxzLmNoYW5nZXNldD1bXSxzLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX198fChPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fb2JzZXJ2ZXJDYWxsYmFja3NfX1wiLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMSx2YWx1ZTpbXX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19vYnNlcnZlcnNfX1wiLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMSx2YWx1ZTpbXX0pKSxzLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18ucHVzaCh0KSxzLnRhcmdldC5fX29ic2VydmVyc19fLnB1c2godGhpcyksYT1uZXcgUHJveHkoZSxzKSxkZWxpdmVyKCExLGkpLGF9T2JqZWN0Lm9ic2VydmV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIFByb3h5fHwoT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGl2ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQobnVsbCxcImRlbGl2ZXJcIil9LE9ic2VydmVyLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWVbdF0sbz12b2lkIDA9PT1uP1wiYWRkXCI6XCJ1cGRhdGVcIjtpZihlW3RdPXIsZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJighdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZihvKT49MCkpe3ZhciBpPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZTpvfSxhPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgscz10aGlzLmRlbGl2ZXIoKTtcInVwZGF0ZVwiPT09byYmKGkub2xkVmFsdWU9biksdGhpcy5jaGFuZ2VzZXQucHVzaChpKSxhJiZzKCExLFwibnVtYmVyXCI9PXR5cGVvZiBzLmRlbGF5P3MuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHk9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lW3RdO2lmKGRlbGV0ZSBlW3RdLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZihcImRlbGV0ZVwiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6dCx0eXBlOlwiZGVsZXRlXCIsb2xkVmFsdWU6cn0sbz0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLGk9dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxvJiZpKCExLFwibnVtYmVyXCI9PXR5cGVvZiBpLmRlbGF5P2kuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24oZSx0LHIpe2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsciksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKFwicmVjb25maWd1cmVcIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZTpcInJlY29uZmlndXJlXCJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSxcIm51bWJlclwiPT10eXBlb2YgaS5kZWxheT9pLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLnNldFByb3RvdHlwZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZihcInNldFByb3RvdHlwZVwiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6XCJfX3Byb3RvX19cIix0eXBlOlwic2V0UHJvdG90eXBlXCIsb2xkVmFsdWU6cn0sbz0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLGk9dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxvJiZpKCExLFwibnVtYmVyXCI9PXR5cGVvZiBpLmRlbGF5P2kuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUucHJldmVudEV4dGVuc2lvbnM9ZnVuY3Rpb24oZSl7aWYoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKGUpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZihcInByZXZlbnRFeHRlbnNpb25zXCIpPj0wKXt2YXIgdD17b2JqZWN0OmUsdHlwZTpcInByZXZlbnRFeHRlbnNpb25zXCJ9LHI9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxuPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2godCksciYmbighMSxcIm51bWJlclwiPT10eXBlb2Ygbi5kZWxheT9uLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JqZWN0Lm9ic2VydmU9ZnVuY3Rpb24oZSx0LHIsbixvLGkpe3JldHVybiBuZXcgT2JzZXJ2ZXIoZSx0LHIsbixvLGkpfSxPYmplY3QudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYoZS5fX29ic2VydmVyQ2FsbGJhY2tzX18pe2lmKCF0KXJldHVybiBlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UoMCxlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5sZW5ndGgpLHZvaWQgZS5fX29ic2VydmVyc19fLnNwbGljZSgwLGUuX19vYnNlcnZlcnNfXy5sZW5ndGgpO2UuX19vYnNlcnZlckNhbGxiYWNrc19fLmZvckVhY2goZnVuY3Rpb24ocixuKXt0PT09ciYmKGUuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShuLDEpLGRlbGV0ZSBlLl9fb2JzZXJ2ZXJzX19bbl0uY2FsbGJhY2ssZS5fX29ic2VydmVyc19fLnNwbGljZShuLDEpKX0pfX0sQXJyYXkub2JzZXJ2ZT1mdW5jdGlvbihlLHQscixuLG8saSl7aWYoIShlIGluc3RhbmNlb2YgQXJyYXl8fEFycmF5LmlzQXJyYXkoZSkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJGaXJzdCBhcmd1bWVudCB0byBBcnJheS5vYnNlcnZlciBpcyBub3QgYW4gQXJyYXlcIik7cj1yfHxbXCJhZGRcIixcInVwZGF0ZVwiLFwiZGVsZXRlXCIsXCJzcGxpY2VcIl07dmFyIGE9bmV3IFByb3h5KGUse2dldDpmdW5jdGlvbih0LG4pe3JldHVyblwidW5vYnNlcnZlXCI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiBlP09iamVjdC51bm9ic2VydmUodCxlKTp0LnVub2JzZXJ2ZSgpfTpcInNwbGljZVwiPT09bj9mdW5jdGlvbihuLG8pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxcIm51bWJlclwiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmlyc3QgdHdvIGFyZ3VtZW50cyB0byBBcnJheSBzcGxpY2UgYXJlIG5vdCBudW1iZXIsIG51bWJlclwiKTt2YXIgaT10aGlzLnNsaWNlKG4sbitvKSxhPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHMubGVuZ3RoLTI6MCx1PXtvYmplY3Q6ZSx0eXBlOlwic3BsaWNlXCIsaW5kZXg6bixyZW1vdmVkOmksYWRkZWRDb3VudDphfTtpZih0LnNwbGljZS5hcHBseSh0LGFyZ3VtZW50cyksci5pbmRleE9mKFwic3BsaWNlXCIpPj0wKXt2YXIgbj0wPT09cy5fX29ic2VydmVyX18uY2hhbmdlc2V0Lmxlbmd0aCxjPXMuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTtzLl9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQucHVzaCh1KSxuJiZjKCExLFwibnVtYmVyXCI9PXR5cGVvZiBjLmRlbGF5P2MuZGVsYXk6MTApfX06XCJwdXNoXCI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGUpfTpcInBvcFwiPT09bj9mdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpfTpcInVuc2hpZnRcIj09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BsaWNlKDAsMCxlKX06XCJzaGlmdFwiPT09bj9mdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGljZSgwLDEpfTp0W25dfX0pLHM9T2JqZWN0Lm9ic2VydmUoYSxmdW5jdGlvbihlKXt2YXIgbj1lLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImxlbmd0aFwiIT09ZS5uYW1lJiZcImFkZFwiIT09ZS5uYW1lJiYoIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wKX0pO24ubGVuZ3RoPjAmJnQobil9LHIsbixvLGkpO3JldHVybiBzfSxBcnJheS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS51bm9ic2VydmUodCl9KSxPYmplY3QuZGVlcE9ic2VydmU9ZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIHJlb2JzZXJ2ZShlLHIpe09iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obyl7aWYoKFwib2JqZWN0XCI9PT1uKGVbb10pfHxcImFycmF5XCI9PT1uKGVbb10pKSYmIWVbb10uaGFzT3duUHJvcGVydHkoXCJfX29ic2VydmVyc19fXCIpKXt2YXIgaT1yLnNsaWNlKDApO2kucHVzaChvKSxlW29dPU9iamVjdC5kZWVwT2JzZXJ2ZShlW29dLHQsaSl9fSl9cj1yfHxbXTt2YXIgbj1mdW5jdGlvbihlKXtyZXR1cm57fS50b1N0cmluZy5jYWxsKGUpLm1hdGNoKC9cXHMoW2EtekEtWl0rKS8pWzFdLnRvTG93ZXJDYXNlKCl9O3JldHVybiByZW9ic2VydmUoZSxyKSxPYmplY3Qub2JzZXJ2ZShlLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHJlY3Vyc2UoZSx0LHIsbyxpKXtpZihvIGluc3RhbmNlb2YgT2JqZWN0KXtPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKCFyfHxyW2FdIT09b1thXSl7dmFyIHM9ciYmdm9pZCAwIT09clthXT9yW2FdOnZvaWQgMCx1PXZvaWQgMD09PXM/XCJhZGRcIjpcInVwZGF0ZVwiLGM9aStcIi5cIithO24ucHVzaCh7bmFtZTplLG9iamVjdDp0LHR5cGU6dSxvbGRWYWx1ZTpzLG5ld1ZhbHVlOm9bYV0sa2V5cGF0aDpjfSkscmVjdXJzZShlLHQscyxvW2FdLGMpfX0pfWVsc2UgaWYociBpbnN0YW5jZW9mIE9iamVjdCl7dmFyIGE9T2JqZWN0LmtleXMocik7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBzPW51bGw9PT1vP1widXBkYXRlXCI6XCJkZWxldGVcIix1PWkrXCIuXCIrYTtuLnB1c2goe25hbWU6ZSxvYmplY3Q6dCx0eXBlOnMsb2xkVmFsdWU6clthXSxuZXdWYWx1ZTpvLGtleXBhdGg6dX0pLHJlY3Vyc2UoZSx0LHJbYV0sdm9pZCAwLHUpfSl9fXZhciBuPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD0oci5sZW5ndGg+MD9yLmpvaW4oXCIuXCIpK1wiLlwiOlwiXCIpK2UubmFtZTtcInVwZGF0ZVwiIT09ZS50eXBlJiZcImFkZFwiIT09ZS50eXBlfHxyZW9ic2VydmUoZS5vYmplY3Qsciksbi5wdXNoKHtuYW1lOmUubmFtZSxvYmplY3Q6ZS5vYmplY3QsdHlwZTplLnR5cGUsb2xkVmFsdWU6ZS5vbGRWYWx1ZSxuZXdWYWx1ZTplLm9iamVjdFtlLm5hbWVdLGtleXBhdGg6dH0pLHJlY3Vyc2UoZS5uYW1lLGUub2JqZWN0LGUub2xkVmFsdWUsZS5vYmplY3RbZS5uYW1lXSx0KX0pLHQobil9KX19KCl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE3KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxNTYpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSHlwZXJ0eVJlc291cmNlRmFjdG9yeSgpeygwLGEuZGVmYXVsdCkodGhpcyxIeXBlcnR5UmVzb3VyY2VGYWN0b3J5KX1yZXR1cm4oMCx1LmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZUZhY3RvcnksW3trZXk6XCJjcmVhdGVIeXBlcnR5UmVzb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwO3N3aXRjaCh0KXtjYXNlXCJmaWxlXCI6bj1uZXcgbC5kZWZhdWx0KGUscik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJbSHlwZXJ0eVJlc291cmNlRmFjdG9yeS5jcmVhdGVIeXBlcnR5UmVzb3VyY2VdIG5vdCBzdXBwb3J0ZWQgdHlwZTogXCIsdCl9cmV0dXJuIG59fSx7a2V5OlwiY3JlYXRlSHlwZXJ0eVJlc291cmNlV2l0aENvbnRlbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT12b2lkIDA7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyl7c3dpdGNoKHQpe2Nhc2VcImZpbGVcIjppPW5ldyBsLmRlZmF1bHQoZSxuKTticmVhaztkZWZhdWx0OnJlamVjdCgpfWkuaW5pdChyKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkuc2F2ZSgpfSkudGhlbihmdW5jdGlvbigpe28oaSl9KX0pfX1dKSxIeXBlcnR5UmVzb3VyY2VGYWN0b3J5fSgpO3QuZGVmYXVsdD1kLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE3KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDI2KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDMpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoNCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzNCksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigzNSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigzNiksaD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHYpLF89cigxNTcpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxtPShyKDM5KSxyKDE1OCkpLGc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSxSPWguZ2V0TG9nZ2VyKFwiRmlsZUh5cGVydHlSZXNvdXJjZVwiKSxPPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIEZpbGVIeXBlcnR5UmVzb3VyY2UoZSx0KXsoMCx1LmRlZmF1bHQpKHRoaXMsRmlsZUh5cGVydHlSZXNvdXJjZSk7dmFyIHI9KDAsZi5kZWZhdWx0KSh0aGlzLChGaWxlSHlwZXJ0eVJlc291cmNlLl9fcHJvdG9fX3x8KDAsYS5kZWZhdWx0KShGaWxlSHlwZXJ0eVJlc291cmNlKSkuY2FsbCh0aGlzLGUsdCkpO3JldHVybiByLm1ldGFkYXRhLnJlc291cmNlVHlwZT1cImZpbGVcIixyfXJldHVybigwLHkuZGVmYXVsdCkoRmlsZUh5cGVydHlSZXNvdXJjZSxlKSwoMCxsLmRlZmF1bHQpKEZpbGVIeXBlcnR5UmVzb3VyY2UsW3trZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJbRmlsZUh5cGVydHlSZXNvdXJjZS5jb25zdHJ1Y3Rvcl0gbWlzc2luZyBtYW5kYXRvcnkgKmZpbGUqIGlucHV0IFwiKTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKHQuX21ldGFkYXRhLm5hbWU9ZS5uYW1lLHQuX21ldGFkYXRhLmxhc3RNb2RpZmllZD1lLmxhc3RNb2RpZmllZCx0Ll9tZXRhZGF0YS5zaXplPWUuc2l6ZSx0Ll9tZXRhZGF0YS5taW1ldHlwZT1lLnR5cGUsUi5sb2coXCJbRmlsZUh5cGVydHlSZXNvdXJjZS5pbml0XSBmaWxlOiBcIixlKSx0Ll9pc1NlbmRlcil7c3dpdGNoKGUudHlwZS5zcGxpdChcIi9cIilbMF0pe2Nhc2VcImltYWdlXCI6dC5fZ2V0SW1hZ2VQcmV2aWV3KGUpLnRoZW4oZnVuY3Rpb24obil7dC5fbWV0YWRhdGEucHJldmlldz1uLHQuX2NvbnRlbnQ9ZSxyKCl9KTticmVhaztkZWZhdWx0OnQuX2NvbnRlbnQ9ZSxyKCl9fWVsc2UgdC5fY29udGVudD1lLmNvbnRlbnQsZS5wcmV2aWV3JiYodC5fbWV0YWRhdGEucHJldmlldz1lLnByZXZpZXcpLHIoKX0pfX0se2tleTpcIl9nZXRJbWFnZVByZXZpZXdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe2cuZGVmYXVsdC5yZXNpemUoZSx7d2lkdGg6MTAwLGhlaWdodDoxMDB9LGZ1bmN0aW9uKGUsbil7bj8odC5yZWFkQXNEYXRhVVJMKGUpLHQub25sb2FkPWZ1bmN0aW9uKGUpe3IoZS50YXJnZXQucmVzdWx0KX0pOihSLndhcm4oXCJbRmlsZUh5cGVydHlSZXNvdXJjZS5fZ2V0SW1hZ2VQcmV2aWV3XSB1bmFibGUgdG8gY3JlYXRlIGltYWdlIHByZXZpZXcgZnJvbSBvcmlnaW5hbCBpbWFnZSBcIikscih2b2lkIDApKX0pfSl9fSx7a2V5OlwidG9NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OlwibmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhZGF0YS5uYW1lfX0se2tleTpcInByZXZpZXdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGEucHJldmlld319XSksRmlsZUh5cGVydHlSZXNvdXJjZX0oYi5kZWZhdWx0KTt0LmRlZmF1bHQ9TyxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyNiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMzQpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMTE2KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDM1KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDM2KSxiPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oXyksbT1yKDM5KSxnPXIoMTMzKSxSPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksTz1iLmdldExvZ2dlcihcIkh5cGVydHlSZXNvdXJjZVwiKSxEPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIEh5cGVydHlSZXNvdXJjZShlLHQpeygwLHUuZGVmYXVsdCkodGhpcyxIeXBlcnR5UmVzb3VyY2UpO3ZhciByPSgwLGYuZGVmYXVsdCkodGhpcywoSHlwZXJ0eVJlc291cmNlLl9fcHJvdG9fX3x8KDAsYS5kZWZhdWx0KShIeXBlcnR5UmVzb3VyY2UpKS5jYWxsKHRoaXMsdCkpLG49cjtyZXR1cm4gbi5hcnJheWJ1ZmZlclNpemVMaW1pdD01MjQyODgwLG4uX2lzU2VuZGVyPWUsbi5fbG9jYWxTdG9yYWdlVVJMPW4uX3BhcmVudE9iamVjdC5fc3luY2hlci5fcnVudGltZVVybCtcIi9zdG9yYWdlXCIscn1yZXR1cm4oMCxoLmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZSxlKSwoMCxsLmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZSxbe2tleTpcInNhdmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXt2YXIgbj17ZnJvbTplLl9vd25lcix0bzplLl9sb2NhbFN0b3JhZ2VVUkwsdHlwZTpcImNyZWF0ZVwiLGJvZHk6e3ZhbHVlOigwLG0uZGVlcENsb25lKShlLl9tZXRhZGF0YSl9fSxvPWZ1bmN0aW9uKG4pe08uaW5mbyhcIltIeXBlcnR5UmVzb3VyY2Uuc2F2ZV0gcmVwbHk6IFwiLG4pLGUuX2J1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKGUuX293bmVyLG4uaWQpLDIwMD09PW4uYm9keS5jb2RlPyhuLmJvZHkudmFsdWUmJihlLl9tZXRhZGF0YS5jb250ZW50VVJMfHwoZS5fbWV0YWRhdGEuY29udGVudFVSTD1bXSksZS5fbWV0YWRhdGEuY29udGVudFVSTC5wdXNoKG4uYm9keS52YWx1ZSkpLHQoKSk6cihuLmJvZHkuY29kZStcIiBcIituLmJvZHkuZGVzYyl9O24uYm9keS52YWx1ZS5jb250ZW50PWUuX2NvbnRlbnQsZS5fYnVzLnBvc3RNZXNzYWdlKG4sbywhMSl9KX19LHtrZXk6XCJyZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gTy5pbmZvKFwiW0h5cGVydHlSZXNvdXJjZS5yZWFkXSBcIix0aGlzKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYodC5jb250ZW50KXIodCk7ZWxzZXt2YXIgbz10Ll9nZXRCZXN0Q29udGVudFVSTCh0Ll9tZXRhZGF0YS5jb250ZW50VVJMKTtPLmxvZyhcIlN0b3JhZ2U6XCIsbyk7dmFyIGk9e2Zyb206dC5fb3duZXIsdG86by51cmwsdHlwZTpcInJlYWRcIixib2R5OntyZXNvdXJjZTpvLnVybCtcIi9cIitvLnJlc291cmNlLHAycDohMH19O3QubWV0YWRhdGEucDJwUmVxdWVzdGVyJiZ0Lm1ldGFkYXRhLnAycEhhbmRsZXImJihpLmJvZHkucDJwUmVxdWVzdGVyPXQubWV0YWRhdGEucDJwUmVxdWVzdGVyLGkuYm9keS5wMnBIYW5kbGVyPXQubWV0YWRhdGEucDJwSGFuZGxlciksdC5fZ2V0QmVzdFJlc291cmNlKGksZSkudGhlbihmdW5jdGlvbihlKXtPLmluZm8oXCJbSHlwZXJ0eVJlc291cmNlXSAtIGdldCBsb2NhbGx5IHRoZSByZXNvdXJjZTpcIixlKSxyKHQpfSkuY2F0Y2goZnVuY3Rpb24oaSl7Ty53YXJuKFwiW0h5cGVydHlSZXNvdXJjZV0gLSBnZXQgbG9jYWxseSB0aGUgcmVzb3VyY2UgZmFpbFwiLGkpO3ZhciBhPXtmcm9tOnQuX293bmVyLHRvOm8ucmVtb3RlVVJMLHR5cGU6XCJyZWFkXCIsYm9keTp7cmVzb3VyY2U6by5yZW1vdGVVUkwrXCIvXCIrby5yZXNvdXJjZSxwMnA6ITB9fTt0Lm1ldGFkYXRhLnAycFJlcXVlc3RlciYmdC5tZXRhZGF0YS5wMnBIYW5kbGVyJiYoYS5ib2R5LnAycFJlcXVlc3Rlcj10Lm1ldGFkYXRhLnAycFJlcXVlc3RlcixhLmJvZHkucDJwSGFuZGxlcj10Lm1ldGFkYXRhLnAycEhhbmRsZXIpLHQuX2dldEJlc3RSZXNvdXJjZShhLGUpLnRoZW4oZnVuY3Rpb24oZSl7Ty53YXJuKFwiW0h5cGVydHlSZXNvdXJjZV0gLSBnZXQgcmVtb3RlbHkgdGhlIHJlc291cmNlXCIsZSkscih0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe08ud2FybihcIltIeXBlcnR5UmVzb3VyY2VdIC0gZ2V0IHJlbW90ZWx5IHRoZSByZXNvdXJjZSBmYWlsXCIsZSksbihlLmJvZHkuY29kZStcIiBcIitlLmJvZHkuZGVzYyl9KX0pfX0pfX0se2tleTpcIl9nZXRCZXN0UmVzb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2J1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKHIuX293bmVyLHMpLGUuYm9keS5jb2RlPTQwOCxlLmJvZHkuZGVzYz1cIlJlc3BvbnNlIHRpbWVvdXRcIixvKGUpfSwzZTMpLGE9ZnVuY3Rpb24oZSl7Ty5sb2coXCJbSHlwZXJ0eVJlc291cmNlLnJlYWRdIHJlcGx5OiBcIixlKTt2YXIgYT1lLmlkO3N3aXRjaChjbGVhclRpbWVvdXQoaSksZS5ib2R5LmNvZGUpe2Nhc2UgMjAwOnIuX2NvbnRlbnQ9ZS5ib2R5LnZhbHVlLmNvbnRlbnQsZS5ib2R5LnZhbHVlLnNpemU8ci5hcnJheWJ1ZmZlclNpemVMaW1pdCYmci5zYXZlKCksci5fYnVzLnJlbW92ZVJlc3BvbnNlTGlzdGVuZXIoci5fb3duZXIsYSksbihlKTticmVhaztjYXNlIDE4Mzp0KGUuYm9keS52YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyLl9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihyLl9vd25lcixhKSxvKGUpfX0scz1yLl9idXMucG9zdE1lc3NhZ2UoZSxhLCExKX0pfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztPLmluZm8oXCJbSHlwZXJ0eVJlc291cmNlLmRlbGV0ZV1cIixlLm1ldGFkYXRhKTt2YXIgdD17ZnJvbTplLl9vd25lcix0bzplLl9sb2NhbFN0b3JhZ2VVUkwsdHlwZTpcImRlbGV0ZVwiLGJvZHk6e3Jlc291cmNlczplLm1ldGFkYXRhLmNvbnRlbnRVUkx9fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyKXtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbihlKXtyKGUuYm9keS5jb2RlPDMwMD8hMDohMSl9KX0pfX0se2tleTpcIl9nZXRCZXN0Q29udGVudFVSTFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lWzBdLG49ci5zdWJzdHIoci5sYXN0SW5kZXhPZihcIi9cIikrMSk7cmV0dXJue3VybDp0Ll9sb2NhbFN0b3JhZ2VVUkwscmVzb3VyY2U6bixyZW1vdGVVUkw6ci5zdWJzdHIoMCxyLmxhc3RJbmRleE9mKFwiL1wiKSl9fX0se2tleTpcInJlc291cmNlVHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1ldGFkYXRhLnJlc291cmNlVHlwZX19LHtrZXk6XCJtaW1ldHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhZGF0YS50eXBlfX0se2tleTpcImNvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudH19LHtrZXk6XCJjb250ZW50VVJMXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21ldGFkYXRhLmNvbnRlbnRVUkx9fSx7a2V5Olwic2hhcmVhYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PSgwLHkuZGVmYXVsdCkoSHlwZXJ0eVJlc291cmNlLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGEuZGVmYXVsdCkoSHlwZXJ0eVJlc291cmNlLnByb3RvdHlwZSksXCJtZXRhZGF0YVwiLHRoaXMpO3JldHVybiB0LnJlc291cmNlVHlwZT1lLnJlc291cmNlVHlwZSx0fX1dKSxIeXBlcnR5UmVzb3VyY2V9KFIuZGVmYXVsdCk7dC5kZWZhdWx0PUQsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1cInVuZGVmaW5lZFwiIT10eXBlb2YgQmxvYiYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIEJvb2xlYW4obmV3IEJsb2IpfWNhdGNoKGUpe3JldHVybiExfX0oKSx1PXMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gMTAwPT09bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KDEwMCldKS5zaXplfWNhdGNoKGUpe3JldHVybiExfX0oKSxjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudCYmSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLnRvQmxvYixsPWN8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXlCdWZmZXImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhdG9iLGQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEZpbGVSZWFkZXJ8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBVUkwsZj1mdW5jdGlvbigpe2Z1bmN0aW9uIEltYWdlVG9vbHMoKXsoMCxvLmRlZmF1bHQpKHRoaXMsSW1hZ2VUb29scyl9cmV0dXJuKDAsYS5kZWZhdWx0KShJbWFnZVRvb2xzLG51bGwsW3trZXk6XCJyZXNpemVcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmKHI9dCx0PXt3aWR0aDo2NDAsaGVpZ2h0OjQ4MH0pO3Qud2lkdGgsdC5oZWlnaHQ7aWYoIUltYWdlVG9vbHMuaXNTdXBwb3J0ZWQoKXx8IWUudHlwZS5tYXRjaCgvaW1hZ2UuKi8pKXJldHVybiByKGUsITEpLCExO2lmKGUudHlwZS5tYXRjaCgvaW1hZ2VcXC9naWYvKSlyZXR1cm4gcihlLCExKSwhMTt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO3JldHVybiBuLm9ubG9hZD1mdW5jdGlvbihvKXt2YXIgaT1uLndpZHRoLGE9bi5oZWlnaHQscz0hMTtpZihpPj1hJiZpPnQud2lkdGg/KGEqPXQud2lkdGgvaSxpPXQud2lkdGgscz0hMCk6YT50LmhlaWdodCYmKGkqPXQuaGVpZ2h0L2EsYT10LmhlaWdodCxzPSEwKSwhcylyZXR1cm4gdm9pZCByKGUsITEpO3ZhciB1PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7aWYodS53aWR0aD1pLHUuaGVpZ2h0PWEsdS5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKG4sMCwwLGksYSksYyl1LnRvQmxvYihmdW5jdGlvbihlKXtyKGUsITApfSxlLnR5cGUpO2Vsc2V7dmFyIGw9SW1hZ2VUb29scy5fdG9CbG9iKHUsZS50eXBlKTtyKGwsITApfX0sSW1hZ2VUb29scy5fbG9hZEltYWdlKG4sZSksITB9fSx7a2V5OlwiX3RvQmxvYlwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS50b0RhdGFVUkwodCksbj1yLnNwbGl0KFwiLFwiKSxvPXZvaWQgMDtvPW5bMF0uaW5kZXhPZihcImJhc2U2NFwiKT49MD9hdG9iKG5bMV0pOmRlY29kZVVSSUNvbXBvbmVudChuWzFdKTtmb3IodmFyIGk9bmV3IEFycmF5QnVmZmVyKG8ubGVuZ3RoKSxhPW5ldyBVaW50OEFycmF5KGkpLGM9MDtjPG8ubGVuZ3RoO2MrPTEpYVtjXT1vLmNoYXJDb2RlQXQoYyk7dmFyIGw9blswXS5zcGxpdChcIjpcIilbMV0uc3BsaXQoXCI7XCIpWzBdLGQ9bnVsbDtpZihzKWQ9bmV3IEJsb2IoW3U/YTppXSx7dHlwZTpsfSk7ZWxzZXt2YXIgZj1uZXcgQmxvYkJ1aWxkZXI7Zi5hcHBlbmQoaSksZD1mLmdldEJsb2IobCl9cmV0dXJuIGR9fSx7a2V5OlwiX2xvYWRJbWFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgVVJMKXt2YXIgbj1uZXcgRmlsZVJlYWRlcjtuLm9ubG9hZD1mdW5jdGlvbih0KXtlLnNyYz10LnRhcmdldC5yZXN1bHQsciYmcigpfSxuLnJlYWRBc0RhdGFVUkwodCl9ZWxzZSBlLnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKHQpLHImJnIoKX19LHtrZXk6XCJpc1N1cHBvcnRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhUTUxDYW52YXNFbGVtZW50JiZsJiZkfX1dKSxJbWFnZVRvb2xzfSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ0KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDExNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigxNyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyNiksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDQpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMzQpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxfPXIoMTE2KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksbT1yKDM1KSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj1yKDM2KSxPPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oUiksRD1yKDM5KSx3PXIoMTMxKSxqPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodyksTD1PLmdldExvZ2dlcihcIkRhdGFPYmplY3RPYnNlcnZlclwiKSxrPXtBTlk6XCJhbnlcIixTVEFSVDpcInN0YXJ0XCIsRVhBQ1Q6XCJleGFjdFwifSxVPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIERhdGFPYmplY3RPYnNlcnZlcihlKXsoMCxmLmRlZmF1bHQpKHRoaXMsRGF0YU9iamVjdE9ic2VydmVyKTt2YXIgdD0oMCxoLmRlZmF1bHQpKHRoaXMsKERhdGFPYmplY3RPYnNlcnZlci5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyKSkuY2FsbCh0aGlzLGUpKSxyPXQ7cmV0dXJuIHIuX3ZlcnNpb249ZS52ZXJzaW9uLHIuX2ZpbHRlcnM9e30sci5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKGUpe3IuX29uRmlsdGVyKGUpfSksci5fYWxsb2NhdGVMaXN0ZW5lcnMoKSx0fXJldHVybigwLGcuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLGUpLCgwLHkuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLFt7a2V5Olwic3luY1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gTC5pbmZvKFwiW0RhdGFPYmplY3RPYnNlcnZlcl9zeW5jXSBzeW5jaHJvbmlzaW5nIFwiKSxuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7ZS5fc3luY2hlci5yZWFkKGUuX21ldGFkYXRhLnVybCkudGhlbihmdW5jdGlvbihyKXtMLmluZm8oXCJbRGF0YU9iamVjdE9ic2VydmVyX3N5bmNdIHZhbHVlIHRvIHN5bmM6IFwiLHIpLCgwLGEuZGVmYXVsdCkoZS5kYXRhLCgwLEQuZGVlcENsb25lKShyLmRhdGEpKSxlLl92ZXJzaW9uPXIudmVyc2lvbixlLl9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9ci5sYXN0TW9kaWZpZWQsci5jaGlsZHJlbk9iamVjdHM/KGUucmVzdW1lQ2hpbGRyZW5zKHIuY2hpbGRyZW5PYmplY3RzKSxlLl9zdG9yZUNoaWxkcmVucygpLHQoITApKTp0KCEwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe0wuaW5mbyhcIltEYXRhT2JqZWN0T2JzZXJ2ZXJfc3luY10gc3luYyBmYWlsZWQ6IFwiLGUpLHQoITEpfSl9KX19LHtrZXk6XCJfc3RvcmVDaGlsZHJlbnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17fTsoMCxvLmRlZmF1bHQpKGUuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj1lLl9jaGlsZHJlbk9iamVjdHNbcl07dFtyXT17fSwoMCxvLmRlZmF1bHQpKG4pLmZvckVhY2goZnVuY3Rpb24oZSl7dFtyXVtlXT17fSx0W3JdW2VdLnZhbHVlPW5bZV0ubWV0YWRhdGEsdFtyXVtlXS5pZGVudGl0eT1uW2VdLmlkZW50aXR5fSl9KTt2YXIgcj17ZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsdHlwZTpcImNyZWF0ZVwiLGJvZHk6e3Jlc291cmNlOmUuX3VybCxhdHRyaWJ1dGU6XCJjaGlsZHJlbk9iamVjdHNcIix2YWx1ZTp0fX07ZS5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleTpcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsYi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLl9fcHJvdG9fX3x8KDAsbC5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlKSxcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsK1wiL2NoYW5nZXNcIixmdW5jdGlvbih0KXtcInVwZGF0ZVwiPT09dC50eXBlJiYoTC5sb2coXCJEYXRhT2JqZWN0T2JzZXJ2ZXItXCIrZS5fdXJsK1wiLVJDVjogXCIsdCksZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCkpfSl9fSx7a2V5OlwiX3JlbGVhc2VMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpeygwLGIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZSksXCJfcmVsZWFzZUxpc3RlbmVyc1wiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2RlbGV0ZUNoaWxkcmVucygpLnRoZW4oZnVuY3Rpb24oKXtlLnVuc3Vic2NyaWJlKCksZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9zeW5jaGVyLl9vYnNlcnZlcnNbZS5fdXJsXX0pfX0se2tleTpcInVuc3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6XCJ1bnN1YnNjcmliZVwiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe0wubG9nKFwiRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiBcIix0KSwyMDA9PT10LmJvZHkuY29kZSYmKGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF0pfSl9fSx7a2V5Olwib25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPWUsbj17dHlwZTprLkVYQUNULGNhbGxiYWNrOnR9LG89ZS5pbmRleE9mKFwiKlwiKTtvPT09ZS5sZW5ndGgtMSYmKDA9PT1vP24udHlwZT1rLkFOWToobi50eXBlPWsuU1RBUlQscj1lLnN1YnN0cigwLGUubGVuZ3RoLTEpKSksdGhpcy5fZmlsdGVyc1tyXT1ufX0se2tleTpcIl9vbkZpbHRlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7KDAsby5kZWZhdWx0KSh0Ll9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXQuX2ZpbHRlcnNbcl07bi50eXBlPT09ay5BTlk/bi5jYWxsYmFjayhlKTpuLnR5cGU9PT1rLlNUQVJUPzA9PT1lLmZpZWxkLmluZGV4T2YocikmJm4uY2FsbGJhY2soZSk6bi50eXBlPT09ay5FWEFDVCYmZS5maWVsZD09PXImJm4uY2FsbGJhY2soZSl9KX19LHtrZXk6XCJvbkRpc2Nvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9zdWJzY3JpYmVSZWdpc3RyYXRpb24oKS50aGVuKGZ1bmN0aW9uKCl7dC5fb25EaXNjb25uZWN0ZWQ9ZSxyKCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pfSl9fSx7a2V5OlwiX3N1YnNjcmliZVJlZ2lzdHJhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOlwic3Vic2NyaWJlXCIsZnJvbTp0aGlzLl9vd25lcix0bzp0aGlzLl9zeW5jaGVyLl9ydW50aW1lVXJsK1wiL3N1YnNjcmlwdGlvbnNcIixib2R5OntyZXNvdXJjZXM6W3RoaXMuX3VybCtcIi9yZWdpc3RyYXRpb25cIl19fTtyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe2UuX2J1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe0wubG9nKFwiW0RhdGFPYmplY3RPYnNlcnZlci5fc3Vic2NyaWJlUmVnaXN0cmF0aW9uXSBcIitlLl91cmwrXCIgcmN2ZWQgcmVwbHkgXCIsdCksMjAwPT09dC5ib2R5LmNvZGU/KGUuX2dlbmVyYXRlTGlzdGVuZXIoZS5fdXJsK1wiL3JlZ2lzdHJhdGlvblwiKSxyKCkpOihMLmVycm9yKFwiRXJyb3Igc3Vic2NyaWJpbmcgcmVnaXN0cmF0aW9uIHN0YXR1cyBmb3IgXCIsZS5fdXJsKSxuKFwiRXJyb3Igc3Vic2NyaWJpbmcgcmVnaXN0cmF0aW9uIHN0YXR1cyBmb3IgXCIrZS5fdXJsKSl9KX0pfX0se2tleTpcIl9nZW5lcmF0ZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9idXMuYWRkTGlzdGVuZXIoZSxmdW5jdGlvbihlKXtMLmxvZyhcIltEYXRhT2JqZWN0T2JzZXJ2ZXIucmVnaXN0cmF0aW9uTm90aWZpY2F0aW9uXSBcIit0Ll91cmwrXCI6IFwiLGUpLGUuYm9keS52YWx1ZSYmXCJkaXNjb25uZWN0ZWRcIj09PWUuYm9keS52YWx1ZSYmdC5fb25EaXNjb25uZWN0ZWQmJihMLmxvZyhcIltEYXRhT2JqZWN0T2JzZXJ2ZXJdIFwiK3QuX3VybCtcIjogd2FzIGRpc2Nvbm5lY3RlZCBcIixlKSx0Ll9vbkRpc2Nvbm5lY3RlZCgpKX0pfX0se2tleTpcImV4ZWN1dGVcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7dmFyIGE9e3R5cGU6XCJleGVjdXRlXCIsZnJvbTpyLl9vd25lcix0bzpuLl91cmwsYm9keTp7bWV0aG9kOmUscGFyYW1zOnR9fTtuLl9idXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbih0KXtMLmxvZyhcIltEYXRhT2JqZWN0T2JzZXJ2ZXIuZXhlY3V0ZV0gXCIrbi5fdXJsK1wiIHJjdmVkIHJlcGx5IFwiLHQpLDIwMD09PXQuYm9keS5jb2RlP28oKTooTC53YXJuKFwiW0RhdGFPYmplY3RPYnNlcnZlci5leGVjdXRlXSBleGVjdXRpb24gb2YgbWV0aG9kIFwiK2UrXCIgd2FzIHJlamVjdCBieSByZXBvcnRlclwiKSxpKFwiW0RhdGFPYmplY3RPYnNlcnZlci5leGVjdXRlXSBleGVjdXRpb24gb2YgbWV0aG9kIFwiK2UrXCIgd2FzIHJlamVjdCBieSByZXBvcnRlclwiKSl9KX0pfX1dKSxEYXRhT2JqZWN0T2JzZXJ2ZXJ9KGouZGVmYXVsdCk7dC5kZWZhdWx0PVUsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDM2KSx1PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0ocyksYz11LmdldExvZ2dlcihcIkRhdGFQcm92aXNpb25hbFwiKSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRGF0YVByb3Zpc2lvbmFsKGUsdCxyLG4peygwLG8uZGVmYXVsdCkodGhpcyxEYXRhUHJvdmlzaW9uYWwpO3ZhciBpPXRoaXM7aS5fb3duZXI9ZSxpLl91cmw9dCxpLl9idXM9cixpLl9jaGlsZHJlbj1uLGkuX2NoYW5nZXM9W10saS5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4oMCxhLmRlZmF1bHQpKERhdGFQcm92aXNpb25hbCxbe2tleTpcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9saXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsLGZ1bmN0aW9uKHQpe2MubG9nKFwiRGF0YVByb3Zpc2lvbmFsLVwiK2UuX3VybCtcIi1SQ1Y6IFwiLHQpLGUuX2NoYW5nZXMucHVzaCh0KX0pfX0se2tleTpcIl9yZWxlYXNlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9saXN0ZW5lci5yZW1vdmUoKX19LHtrZXk6XCJhcHBseVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2NoYW5nZXMuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jaGFuZ2VPYmplY3QoZS5fc3luY09iaix0KX0pfX0se2tleTpcImNoaWxkcmVuXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufX1dKSxEYXRhUHJvdmlzaW9uYWx9KCk7dC5kZWZhdWx0PWwsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDM5KSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gTm90aWZpY2F0aW9uSGFuZGxlcihlKXtpZigoMCxvLmRlZmF1bHQpKHRoaXMsTm90aWZpY2F0aW9uSGFuZGxlciksIWUpdGhyb3cgRXJyb3IoXCJbTm90aWZpY2F0aW9uSGFuZGxlciBDb25zdHJ1Y3Rvcl0gYnVzIGlucHV0IGlzIG1hbmRhdG9yeVwiKTt0aGlzLl9idXM9ZSx0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXI9e319cmV0dXJuKDAsYS5kZWZhdWx0KShOb3RpZmljYXRpb25IYW5kbGVyLFt7a2V5Olwib25Ob3RpZmljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcltlXT10fX0se2tleTpcIm9uQ3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5oYXNPd25Qcm9wZXJ0eShcInJlc291cmNlXCIpP2UuYm9keS5yZXNvdXJjZTplLmZyb20uc2xpY2UoMCwtMTMpLG49KDAscy5kaXZpZGVVUkwpKHIpLG89bi5kb21haW4saT1yLnNwbGl0KFwiOi8vXCIpWzBdLGE9ZnVuY3Rpb24ocil7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDAsZGVzYzpcIkJhZCBSZXF1ZXN0OiBcIityfX0pfTtlLmJvZHkuaGFzT3duUHJvcGVydHkoXCJzb3VyY2VcIil8fGEoXCJNaXNzaW5nIHNvdXJjZVwiKSxlLmJvZHkuaGFzT3duUHJvcGVydHkoXCJzY2hlbWFcIil8fGEoXCJNaXNzaW5nIHNjaGVtYVwiKSxlLmJvZHkuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZVwiKXx8YShcIk1pc3NpbmcgdmFsdWVcIiksZS5ib2R5Lmhhc093blByb3BlcnR5KFwiaWRlbnRpdHlcIil8fGEoXCJNaXNzaW5nIGlkZW50aXR5XCIpO3ZhciB1PXt0eXBlOmUudHlwZSxmcm9tOmUuYm9keS5zb3VyY2UsdXJsOnIsZG9tYWluOm8sc2NoZW1hOmUuYm9keS5zY2hlbWEsdmFsdWU6ZS5ib2R5LnZhbHVlLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSx0bzplLnRvLHZpYTplLmJvZHkudmlhLGFjazpmdW5jdGlvbihyKXt2YXIgbj0yMDA7ciYmKG49ciksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpufX0pfSxlcnJvcjpmdW5jdGlvbihlKXthKGUpfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyW2ldJiZ0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXJbaV0odSl9fSx7a2V5Olwib25EZWxldGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fb2JzZXJ2ZXJzW3JdLG89e2Zyb206dC5vd25lcix0bzp0Ll9zdWJVUkwsaWQ6ZS5pZCx0eXBlOlwidW5zdWJzY3JpYmVcIixib2R5OntyZXNvdXJjZTplLmJvZHkucmVzb3VyY2V9fTtpZih0Ll9idXMucG9zdE1lc3NhZ2UobyksZGVsZXRlIHQuX29ic2VydmVyc1tyXSxuKXt2YXIgaT17dHlwZTplLnR5cGUsdXJsOnIsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LGFjazpmdW5jdGlvbihyKXt2YXIgbz0yMDA7ciYmKG89ciksMjAwPT09byYmbi5kZWxldGUoKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm8sc291cmNlOnQuX293bmVyfX0pfX07dC5fb25Ob3RpZmljYXRpb25IYW5kbGVyJiYobG9nLmxvZyhcIk5PVElGSUNBVElPTi1FVkVOVDogXCIsaSksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGkpKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19XSksTm90aWZpY2F0aW9uSGFuZGxlcn0oKTt0LmRlZmF1bHQ9dSxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigyNiksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDM0KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMzUpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMTI1KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1mdW5jdGlvbihlKXtmdW5jdGlvbiBEaXNjb3ZlcmVkT2JqZWN0KGUsdCxyLG4saSl7KDAsYS5kZWZhdWx0KSh0aGlzLERpc2NvdmVyZWRPYmplY3QpO3ZhciBzPSgwLHUuZGVmYXVsdCkodGhpcywoRGlzY292ZXJlZE9iamVjdC5fX3Byb3RvX198fCgwLG8uZGVmYXVsdCkoRGlzY292ZXJlZE9iamVjdCkpLmNhbGwodGhpcyxlLmh5cGVydHlJRHx8ZS51cmwsdCxyLG4pKTtyZXR1cm4gcy5fZGF0YT1lLHMuX2Rpc2NvdmVyeT1pLHN9cmV0dXJuKDAsZi5kZWZhdWx0KShEaXNjb3ZlcmVkT2JqZWN0LGUpLCgwLGwuZGVmYXVsdCkoRGlzY292ZXJlZE9iamVjdCxbe2tleTpcImRhdGFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksKDAsbC5kZWZhdWx0KShEaXNjb3ZlcmVkT2JqZWN0LFt7a2V5OlwiY2hlY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17Ym9keTp7fX07ZS5fZGlzY292ZXJlZE9iamVjdFVSTC5zdGFydHNXaXRoKFwiaHlwZXJ0eTovL1wiKT9lLl9kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnR5UGVyVVJMKGUuX2Rpc2NvdmVyZWRPYmplY3RVUkwpLnRoZW4oZnVuY3Rpb24ocil7dC5ib2R5LnN0YXR1cz1yLnN0YXR1cyxlLl9wcm9jZXNzTm90aWZpY2F0aW9uKHQpfSk6ZS5fZGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJVUkwoZS5fZGlzY292ZXJlZE9iamVjdFVSTCkudGhlbihmdW5jdGlvbihyKXt0LmJvZHkuc3RhdHVzPXIuc3RhdHVzLGUuX3Byb2Nlc3NOb3RpZmljYXRpb24odCl9KX19XSksRGlzY292ZXJlZE9iamVjdH0oeS5kZWZhdWx0KTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0NCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU2VhcmNoKGUsdCl7aWYoKDAsdS5kZWZhdWx0KSh0aGlzLFNlYXJjaCksIWUpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGRpc2NvdmVyeSBjb21wb25lbnQgaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlRoZSBpZGVudGl0eU1hbmFnZXIgY29tcG9uZW50IGlzIGEgbmVlZGVkIHBhcmFtZXRlclwiKTt2YXIgcj10aGlzO3IuZGlzY292ZXJ5PWUsci5pZGVudGl0eU1hbmFnZXI9dH1yZXR1cm4oMCxsLmRlZmF1bHQpKFNlYXJjaCxbe2tleTpcIm15SWRlbnRpdHlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtlLmlkZW50aXR5TWFuYWdlci5kaXNjb3ZlclVzZXJSZWdpc3RlcmVkKCkudGhlbihmdW5jdGlvbihlKXt0KGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pfSl9fSx7a2V5OlwiaHlwZXJ0aWVzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2FyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdJiZhcmd1bWVudHNbM119fSx7a2V5OlwidXNlcnNcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSYmYXJndW1lbnRzWzRdO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIllvdSBuZWVkIHRvIHByb3ZpZGUgYSBsaXN0IG9mIHVzZXJzXCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIllvdSBuZWVkIHRvIHByb3ZpZGUgYSBsaXN0IG9mIGRvbWFpbnNcIik7aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiWW91IG5lZWQgdG8gcHJvdmlkZSBhIGxpc3Qgb2YgcmVzb3VyY2VzXCIpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIllvdSBuZWVkIHRvIHByb3ZpZGUgYSBsaXN0IG9mIHNjaGVtZXNcIik7dmFyIHM9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbih1LGMpe2lmKDA9PT1lLmxlbmd0aCl1KGUpO2Vsc2V7dmFyIGw9W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUsbyl7dmFyIGE9dFtvXTtpP2wucHVzaChzLmRpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc1BlclVzZXJQcm9maWxlRGF0YShlLHIsbikpOmwucHVzaChzLmRpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllcyhlLHIsbixhKSl9KSxhLmRlZmF1bHQuYWxsKGwubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGZ1bmN0aW9uKGUpe3JldHVybiBlfSl9KSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1lLm1hcChmdW5jdGlvbihlKXtpZihlLmhhc093blByb3BlcnR5KFwiaHlwZXJ0eUlEXCIpKXJldHVybiBlO3ZhciB0PSgwLG8uZGVmYXVsdCkoZSkucmVkdWNlUmlnaHQoZnVuY3Rpb24odCxyKXt2YXIgbj1uZXcgRGF0ZShlW3JdLmxhc3RNb2RpZmllZCk7cmV0dXJuIG5ldyBEYXRlKGVbdF0ubGFzdE1vZGlmaWVkKS5nZXRUaW1lKCk8bi5nZXRUaW1lKCk/cjp0fSk7cmV0dXJuIGVbdF19KSxyPXQuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmhhc093blByb3BlcnR5KFwiaHlwZXJ0eUlEXCIpfSk7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKFwiTm8gSHlwZXJ0eSB3YXMgZm91bmRcIiE9PWUpcmV0dXJuIHUocil9KSxjKFwiTm8gSHlwZXJ0eSB3YXMgZm91bmRcIil9KS5jYXRjaChmdW5jdGlvbih0KXt1KGUpfSl9fSl9fV0pLFNlYXJjaH0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDE2NSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9ZnVuY3Rpb24gTWVzc2FnZUJvZHlJZGVudGl0eShlLHQscixuLGkscyx1LGMpe2lmKCgwLG8uZGVmYXVsdCkodGhpcyxNZXNzYWdlQm9keUlkZW50aXR5KSwhcyl0aHJvdyBuZXcgRXJyb3IoXCJJRFAgc2hvdWxkIGJlIGEgcGFyYW1ldGVyXCIpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcInVzZXJuYW1lIHNob3VsZCBiZSBhIHBhcmFtZXRlclwiKTt0aGlzLmlkcD1zLHUmJih0aGlzLmFzc2VydGlvbj11KSx0aGlzLnVzZXJQcm9maWxlPW5ldyBhLmRlZmF1bHQoZSx0LHIsbixpLGMpfTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxMTQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9ZnVuY3Rpb24gVXNlclByb2ZpbGUoZSx0LHIsbixpLHMpeygwLGEuZGVmYXVsdCkodGhpcyxVc2VyUHJvZmlsZSksZSYmKHRoaXMucHJlZmVycmVkX3VzZXJuYW1lPWUpLHImJih0aGlzLnBpY3R1cmU9ciksbiYmKHRoaXMubmFtZT1uKSxpJiYodGhpcy5sb2NhbGU9aSksdCYmKHRoaXMudXNlclVSTD10KSxzJiYoMCxvLmRlZmF1bHQpKHRoaXMscyl9O3QuZGVmYXVsdD1zLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDExNCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMTY3KSxmPXIoMTM5KSxwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZikseT1yKDE2OSksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIENoYXRNYW5hZ2VyKGUsdCxyLG4sbyl7aWYoKDAsdS5kZWZhdWx0KSh0aGlzLENoYXRNYW5hZ2VyKSwhZSl0aHJvdyBuZXcgRXJyb3IoXCJbQ2hhdE1hbmFnZXIuY29uc3RydWN0b3JdIFRoZSBteVVybCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiW0NoYXRNYW5hZ2VyLmNvbnN0cnVjdG9yXSBUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiW0NoYXRNYW5hZ2VyLmNvbnN0cnVjdG9yXSBUaGUgY29uZmlndXJhdGlvbiBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7dmFyIGk9dGhpcztufHwobj1vLmNyZWF0ZVN5bmNoZXIoZSx0LHIpKSxpLl9ydW50aW1lVVJMPXIucnVudGltZVVSTDt2YXIgYT1vLmRpdmlkZVVSTChpLl9ydW50aW1lVVJMKS5kb21haW4scz1vLmNyZWF0ZURpc2NvdmVyeShlLHIucnVudGltZVVSTCx0KSxjPW8uY3JlYXRlSWRlbnRpdHlNYW5hZ2VyKGUsci5ydW50aW1lVVJMLHQpO2kuX29iamVjdERlc2NVUkw9XCJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS5cIithK1wiLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29tbXVuaWNhdGlvblwiLGkuX3JlcG9ydGVyc0NvbnRyb2xsZXJzPXt9LGkuX29ic2VydmVyc0NvbnRyb2xsZXJzPXt9LGkuX215VXJsPWUsaS5fYnVzPXQsaS5fc3luY2hlcj1uLGkuX2RvbWFpbj1hLGkuZGlzY292ZXJ5PXMsaS5pZGVudGl0eU1hbmFnZXI9YyxpLmN1cnJlbnRJZGVudGl0eSxpLnNlYXJjaD1vLmNyZWF0ZVNlYXJjaChzLGMpLGkuY29tbXVuaWNhdGlvbk9iamVjdD1kLmNvbW11bmljYXRpb25PYmplY3QsaS5jb21tdW5pY2F0aW9uQ2hpbGRyZW49ZC5jb21tdW5pY2F0aW9uQ2hpbGRyZW59cmV0dXJuKDAsbC5kZWZhdWx0KShDaGF0TWFuYWdlcixbe2tleTpcInByb2Nlc3NOb3RpZmljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKFwiY3JlYXRlXCI9PT1lLnR5cGUmJnQuX29uSW52aXRhdGlvbiYmdC5fb25JbnZpdGF0aW9uKGUpLFwiZGVsZXRlXCI9PT1lLnR5cGUpe2UuYWNrKDIwMCksdC5fb2JzZXJ2ZXJzQ29udHJvbGxlcnNbZS51cmxdLmNsb3NlRXZlbnQ9ZSxkZWxldGUgdC5fb2JzZXJ2ZXJzQ29udHJvbGxlcnNbZS51cmxdLHQuX29ic2VydmVyc0NvbnRyb2xsZXJzLmNsb3NlRXZlbnQ9ZSx0LmNvbW11bmljYXRpb25PYmplY3Q9ZC5jb21tdW5pY2F0aW9uT2JqZWN0O2Zvcih2YXIgciBpbiB0aGlzLl9yZXBvcnRlcnNDb250cm9sbGVycyl0aGlzLl9yZXBvcnRlcnNDb250cm9sbGVyc1tyXS5jbG9zZShlKTtmb3IodmFyIG4gaW4gdGhpcy5fb2JzZXJ2ZXJzQ29udHJvbGxlcnMpdGhpcy5fb2JzZXJ2ZXJzQ29udHJvbGxlcnNbbl0uY2xvc2UoZSl9fX0se2tleTpcIm15SWRlbnRpdHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYoZSlyZXR1cm4gcihlKTt0Ll9teVVybC5pbmNsdWRlcyhcImh5cGVydHk6Ly9cIik/dC5pZGVudGl0eU1hbmFnZXIuZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCgpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KTp0LmlkZW50aXR5TWFuYWdlci5kaXNjb3ZlcklkZW50aXR5UGVySWRQKCkudGhlbihmdW5jdGlvbihlKXtyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihlKX0pfSl9fSx7a2V5OlwiY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e30sbj10aGlzLGk9bi5fc3luY2hlcjtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihzLHUpe24uY29tbXVuaWNhdGlvbk9iamVjdD1kLmNvbW11bmljYXRpb25PYmplY3Qsbi5jb21tdW5pY2F0aW9uT2JqZWN0LmNzZXE9MSxuLmNvbW11bmljYXRpb25PYmplY3Quc3RhcnRpbmdUaW1lPShuZXcgRGF0ZSkudG9KU09OKCksbi5jb21tdW5pY2F0aW9uT2JqZWN0LnN0YXR1cz1kLkNvbW11bmljYXRpb25TdGF0dXMuT1BFTjt2YXIgYz12b2lkIDA7bi5teUlkZW50aXR5KCkudGhlbihmdW5jdGlvbihsKXtjPWw7dmFyIGQ9bmV3IHkuVXNlckluZm8obi5fbXlVcmwsbi5fZG9tYWluLGwpO24uY29tbXVuaWNhdGlvbk9iamVjdC5wYXJ0aWNpcGFudHNbbC51c2VyVVJMXT1kO3ZhciBmPVtdLHY9W10saD17fTt0LmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bi5kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNETyhlLnVzZXIsW1wiY29tbVwiXSxbXCJjaGF0XCJdLGUuZG9tYWluKTtmLnB1c2godCl9KSxhLmRlZmF1bHQuYWxsKGYpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGE9W107dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtcImxpdmVcIj09PWUuZGF0YS5zdGF0dXM/KGEucHVzaChlLmRhdGEuaHlwZXJ0eUlEKSxoW2UuZGF0YS5oeXBlcnR5SURdPWUpOnYubGVuZ3RoPDUmJnYucHVzaChlKX0pfSk7dmFyIHM9KDAsby5kZWZhdWx0KSh7cmVzb3VyY2VzOltcImNoYXRcIl0sbXV0dWFsOiEwfSxyKTtyZXR1cm4gZGVsZXRlIHMubmFtZSxpLmNyZWF0ZShuLl9vYmplY3REZXNjVVJMLGEsbi5jb21tdW5pY2F0aW9uT2JqZWN0LCEwLCExLGUse30scyl9KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBwLmRlZmF1bHQoaSxuLmRpc2NvdmVyeSxuLl9kb21haW4sbi5zZWFyY2gsYyxuKTt0LmRhdGFPYmplY3RSZXBvcnRlcj1lLG4uX3JlcG9ydGVyc0NvbnRyb2xsZXJzW2UudXJsXT10LGUuaW52aXRhdGlvbnMubGVuZ3RoPjAmJnQuaW52aXRhdGlvbnNIYW5kbGVyLnByb2Nlc3NJbnZpdGF0aW9ucyhoLGUpLHYubGVuZ3RoPjAmJnQuaW52aXRhdGlvbnNIYW5kbGVyLmludml0ZURpc2Nvbm5lY3RlZEh5cGVydGllcyh2LGUpLHModCl9KS5jYXRjaChmdW5jdGlvbihlKXt1KGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdShlKX0pfSl9fSx7a2V5Olwib25JbnZpdGF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25JbnZpdGF0aW9uPWV9fSx7a2V5Olwiam9pblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl0sbj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7dmFyIGE9bi5fc3luY2hlcixzPXZvaWQgMDtuLm15SWRlbnRpdHkocikudGhlbihmdW5jdGlvbihyKXtyZXR1cm4gcz1yLGEuc3Vic2NyaWJlKG4uX29iamVjdERlc2NVUkwsZSwhMCwhMSx0LCEwLHIpfSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1uZXcgcC5kZWZhdWx0KGEsbi5kaXNjb3Zlcnksbi5fZG9tYWluLG4uc2VhcmNoLHMsbik7byh0KSx0LmRhdGFPYmplY3RPYnNlcnZlcj1lLG4uX29ic2VydmVyc0NvbnRyb2xsZXJzW2UudXJsXT10fSkuY2F0Y2goZnVuY3Rpb24oZSl7aShlKX0pfSl9fV0pLENoYXRNYW5hZ2VyfSgpO3QuZGVmYXVsdD12LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt0LkNvbW11bmljYXRpb25TdGF0dXM9e09QRU46XCJvcGVuXCIsUEVORElORzpcInBlbmRpbmdcIixDTE9TRUQ6XCJjbG9zZWRcIixQQVVTRUQ6XCJwYXVzZWRcIixGQUlMRUQ6XCJmYWlsZWRcIn0sdC5jb21tdW5pY2F0aW9uT2JqZWN0PXtzdGFydGluZ1RpbWU6XCJcIixzdGF0dXM6XCJcIixwYXJ0aWNpcGFudHM6e319LHQuY29tbXVuaWNhdGlvbkNoaWxkcmVuPXtwYXJlbnQ6XCJjb21tdW5pY2F0aW9uXCIsbGlzdGVuZXI6XCJyZXNvdXJjZXNcIix0eXBlOlwiSHlwZXJ0eVJlc291cmNlXCJ9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0NCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSW52aXRhdGlvbnNIYW5kbGVyKGUpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxJbnZpdGF0aW9uc0hhbmRsZXIpLCFlKXRocm93IEVycm9yKFwiaHlwZXJ0eVVSTCBpcyBhIG5lY2Vzc2FyeSBkZXBlbmRlY3lcIik7dmFyIHQ9dGhpczt0Ll9oeXBlcnR5VVJMPWUsdC5fcGVuZGluZz17fX1yZXR1cm4oMCxsLmRlZmF1bHQpKEludml0YXRpb25zSGFuZGxlcixbe2tleTpcImludml0ZURpc2Nvbm5lY3RlZEh5cGVydGllc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztlLmZvckVhY2goZnVuY3Rpb24oZSl7ci5fcGVuZGluZ1t0XXx8KHIuX3BlbmRpbmdbdF09e30pLHIuX3BlbmRpbmdbdF1bZS5kYXRhLmh5cGVydHlJRF09ZSxlLm9uTGl2ZShyLl9oeXBlcnR5VVJMLGZ1bmN0aW9uKCl7dC5pbnZpdGVPYnNlcnZlcnMoW2UuZGF0YS5oeXBlcnR5SURdKSxlLnVuc3Vic2NyaWJlTGl2ZShyLl9oeXBlcnR5VVJMKSxkZWxldGUgci5fcGVuZGluZ1t0XVtlLmRhdGEuaHlwZXJ0eUlEXX0pfSl9fSx7a2V5OlwicHJvY2Vzc0ludml0YXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dGhpcyxvPXQuaW52aXRhdGlvbnN8fFtdO28uZm9yRWFjaChmdW5jdGlvbihvKXtvLnRoZW4oZnVuY3Rpb24oZSl7ci5faW52aXRhdGlvbnNSZXNwb25zZSYmci5faW52aXRhdGlvbnNSZXNwb25zZShlKX0pLmNhdGNoKGZ1bmN0aW9uKG8pe3IuX2ludml0YXRpb25zUmVzcG9uc2UmJnIuX2ludml0YXRpb25zUmVzcG9uc2Uobyksbi5pbnZpdGVEaXNjb25uZWN0ZWRIeXBlcnRpZXMoW2Vbby5pbnZpdGVkXV0sdCl9KX0pfX0se2tleTpcInJlc3VtZURpc2NvdmVyaWVzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIHM9e30sdT1bXSxjPVtdLGw9W107ZS5yZXN1bWVEaXNjb3ZlcmllcygpLnRoZW4oZnVuY3Rpb24oZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZGF0YS5yZXNvdXJjZXMmJlwiY2hhdFwiPT09ZS5kYXRhLnJlc291cmNlc1swXSYmKFwibGl2ZVwiPT09ZS5kYXRhLnN0YXR1cz8oc1tlLmRhdGEuaHlwZXJ0eUlEXT1lLHUucHVzaChlLmRhdGEuaHlwZXJ0eUlEKSxsLnB1c2goZS51bnN1YnNjcmliZUxpdmUoci5faHlwZXJ0eVVSTCkpKTpjLnB1c2goZSkpfSksYy5sZW5ndGg+MCYmci5pbnZpdGVEaXNjb25uZWN0ZWRIeXBlcnRpZXMoYyx0KSwoMCxvLmRlZmF1bHQpKHMpLmxlbmd0aD4wPyh0Lmludml0ZU9ic2VydmVycyh1KSx0Lmludml0YXRpb25zLmxlbmd0aD4wJiZyLnByb2Nlc3NJbnZpdGF0aW9ucyhzLHQpLGEuZGVmYXVsdC5hbGwobCkudGhlbihmdW5jdGlvbigpe24oKX0pKTpuKCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JlamVjdChcIltHcm91cENoYXRNYW5hZ2VyLkludml0YXRpb25zSGFuZGxlci5yZXN1bWVEaXNjb3Zlcmllc10gZmFpbGVkIHwgXCIsZSl9KX19LHtrZXk6XCJjbGVhbkludml0YXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuX3BlbmRpbmdbZV07cmV0dXJuIHI/bmV3IGEuZGVmYXVsdChmdW5jdGlvbihlLG4pe3ZhciBpPSgwLG8uZGVmYXVsdCkocikscz1bXTtpLmZvckVhY2goZnVuY3Rpb24oZSl7cy5wdXNoKHJbZV0udW5zdWJzY3JpYmVMaXZlKHQuX2h5cGVydHlVUkwpKX0pLGEuZGVmYXVsdC5hbGwoaSkudGhlbihmdW5jdGlvbigpe2UoKX0pfSk6YS5kZWZhdWx0LnJlc29sdmUoKX19LHtrZXk6XCJpbnZpdGF0aW9uUmVzcG9uc2VcIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5faW52aXRhdGlvbnNSZXNwb25zZT1lfX1dKSxJbnZpdGF0aW9uc0hhbmRsZXJ9KCk7dC5kZWZhdWx0PWQsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuVXNlckluZm89dm9pZCAwO3ZhciBuPXIoMTcwKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMzkpO3QuVXNlckluZm89ZnVuY3Rpb24gVXNlckluZm8oZSx0LHIpe3ZhciBuOygwLGEuZGVmYXVsdCkodGhpcyxVc2VySW5mbyk7dmFyIGk9KDAscy5kZWVwQ2xvbmUpKHIpO3JldHVybiByLmhhc093blByb3BlcnR5KFwidXNlclByb2ZpbGVcIil8fChpLnVzZXJQcm9maWxlPXIpLG49e2h5cGVydHlVUkw6ZSxkb21haW46dH0sKDAsby5kZWZhdWx0KShuLFwiZG9tYWluXCIsdCksKDAsby5kZWZhdWx0KShuLFwiaWRlbnRpdHlcIixpKSxufX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuX19lc01vZHVsZT0hMDt2YXIgbj1yKDYwKSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdCBpbiBlPygwLG8uZGVmYXVsdCkoZSx0LHt2YWx1ZTpyLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1yLGV9fV0pfSk7IiwiLyohXG4gKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzXG4gKiBJUHY2IFN1cHBvcnRcbiAqXG4gKiBWZXJzaW9uOiAxLjE5LjFcbiAqXG4gKiBBdXRob3I6IFJvZG5leSBSZWhtXG4gKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy9cbiAqXG4gKiBMaWNlbnNlZCB1bmRlclxuICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKlxuICovXG5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAndXNlIHN0cmljdCc7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qc1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAvLyBOb2RlXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgIHJvb3QuSVB2NiA9IGZhY3Rvcnkocm9vdCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKHJvb3QpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qXG4gIHZhciBfaW4gPSBcImZlODA6MDAwMDowMDAwOjAwMDA6MDIwNDo2MWZmOmZlOWQ6ZjE1NlwiO1xuICB2YXIgX291dCA9IElQdjYuYmVzdChfaW4pO1xuICB2YXIgX2V4cGVjdGVkID0gXCJmZTgwOjoyMDQ6NjFmZjpmZTlkOmYxNTZcIjtcblxuICBjb25zb2xlLmxvZyhfaW4sIF9vdXQsIF9leHBlY3RlZCwgX291dCA9PT0gX2V4cGVjdGVkKTtcbiAgKi9cblxuICAvLyBzYXZlIGN1cnJlbnQgSVB2NiB2YXJpYWJsZSwgaWYgYW55XG4gIHZhciBfSVB2NiA9IHJvb3QgJiYgcm9vdC5JUHY2O1xuXG4gIGZ1bmN0aW9uIGJlc3RQcmVzZW50YXRpb24oYWRkcmVzcykge1xuICAgIC8vIGJhc2VkIG9uOlxuICAgIC8vIEphdmFzY3JpcHQgdG8gdGVzdCBhbiBJUHY2IGFkZHJlc3MgZm9yIHByb3BlciBmb3JtYXQsIGFuZCB0b1xuICAgIC8vIHByZXNlbnQgdGhlIFwiYmVzdCB0ZXh0IHJlcHJlc2VudGF0aW9uXCIgYWNjb3JkaW5nIHRvIElFVEYgRHJhZnQgUkZDIGF0XG4gICAgLy8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi02bWFuLXRleHQtYWRkci1yZXByZXNlbnRhdGlvbi0wNFxuICAgIC8vIDggRmViIDIwMTAgUmljaCBCcm93biwgRGFydHdhcmUsIExMQ1xuICAgIC8vIFBsZWFzZSBmZWVsIGZyZWUgdG8gdXNlIHRoaXMgY29kZSBhcyBsb25nIGFzIHlvdSBwcm92aWRlIGEgbGluayB0b1xuICAgIC8vIGh0dHA6Ly93d3cuaW50ZXJtYXBwZXIuY29tXG4gICAgLy8gaHR0cDovL2ludGVybWFwcGVyLmNvbS9zdXBwb3J0L3Rvb2xzL0lQVjYtVmFsaWRhdG9yLmFzcHhcbiAgICAvLyBodHRwOi8vZG93bmxvYWQuZGFydHdhcmUuY29tL3RoaXJkcGFydHkvaXB2NnZhbGlkYXRvci5qc1xuXG4gICAgdmFyIF9hZGRyZXNzID0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpO1xuICAgIHZhciBzZWdtZW50cyA9IF9hZGRyZXNzLnNwbGl0KCc6Jyk7XG4gICAgdmFyIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDtcbiAgICB2YXIgdG90YWwgPSA4O1xuXG4gICAgLy8gdHJpbSBjb2xvbnMgKDo6IG9yIDo6YTpiOmPigKYgb3Ig4oCmYTpiOmM6OilcbiAgICBpZiAoc2VnbWVudHNbMF0gPT09ICcnICYmIHNlZ21lbnRzWzFdID09PSAnJyAmJiBzZWdtZW50c1syXSA9PT0gJycpIHtcbiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIDo6XG4gICAgICAvLyByZW1vdmUgZmlyc3QgdHdvIGl0ZW1zXG4gICAgICBzZWdtZW50cy5zaGlmdCgpO1xuICAgICAgc2VnbWVudHMuc2hpZnQoKTtcbiAgICB9IGVsc2UgaWYgKHNlZ21lbnRzWzBdID09PSAnJyAmJiBzZWdtZW50c1sxXSA9PT0gJycpIHtcbiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIDo6eHh4eFxuICAgICAgLy8gcmVtb3ZlIHRoZSBmaXJzdCBpdGVtXG4gICAgICBzZWdtZW50cy5zaGlmdCgpO1xuICAgIH0gZWxzZSBpZiAoc2VnbWVudHNbbGVuZ3RoIC0gMV0gPT09ICcnICYmIHNlZ21lbnRzW2xlbmd0aCAtIDJdID09PSAnJykge1xuICAgICAgLy8gbXVzdCBoYXZlIGJlZW4geHh4eDo6XG4gICAgICBzZWdtZW50cy5wb3AoKTtcbiAgICB9XG5cbiAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7XG5cbiAgICAvLyBhZGp1c3QgdG90YWwgc2VnbWVudHMgZm9yIElQdjQgdHJhaWxlclxuICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXS5pbmRleE9mKCcuJykgIT09IC0xKSB7XG4gICAgICAvLyBmb3VuZCBhIFwiLlwiIHdoaWNoIG1lYW5zIElQdjRcbiAgICAgIHRvdGFsID0gNztcbiAgICB9XG5cbiAgICAvLyBmaWxsIGVtcHR5IHNlZ21lbnRzIHRoZW0gd2l0aCBcIjAwMDBcIlxuICAgIHZhciBwb3M7XG4gICAgZm9yIChwb3MgPSAwOyBwb3MgPCBsZW5ndGg7IHBvcysrKSB7XG4gICAgICBpZiAoc2VnbWVudHNbcG9zXSA9PT0gJycpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvcyA8IHRvdGFsKSB7XG4gICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAxLCAnMDAwMCcpO1xuICAgICAgd2hpbGUgKHNlZ21lbnRzLmxlbmd0aCA8IHRvdGFsKSB7XG4gICAgICAgIHNlZ21lbnRzLnNwbGljZShwb3MsIDAsICcwMDAwJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gc3RyaXAgbGVhZGluZyB6ZXJvc1xuICAgIHZhciBfc2VnbWVudHM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICBfc2VnbWVudHMgPSBzZWdtZW50c1tpXS5zcGxpdCgnJyk7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDMgOyBqKyspIHtcbiAgICAgICAgaWYgKF9zZWdtZW50c1swXSA9PT0gJzAnICYmIF9zZWdtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgX3NlZ21lbnRzLnNwbGljZSgwLDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNlZ21lbnRzW2ldID0gX3NlZ21lbnRzLmpvaW4oJycpO1xuICAgIH1cblxuICAgIC8vIGZpbmQgbG9uZ2VzdCBzZXF1ZW5jZSBvZiB6ZXJvZXMgYW5kIGNvYWxlc2NlIHRoZW0gaW50byBvbmUgc2VnbWVudFxuICAgIHZhciBiZXN0ID0gLTE7XG4gICAgdmFyIF9iZXN0ID0gMDtcbiAgICB2YXIgX2N1cnJlbnQgPSAwO1xuICAgIHZhciBjdXJyZW50ID0gLTE7XG4gICAgdmFyIGluemVyb2VzID0gZmFsc2U7XG4gICAgLy8gaTsgYWxyZWFkeSBkZWNsYXJlZFxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcbiAgICAgIGlmIChpbnplcm9lcykge1xuICAgICAgICBpZiAoc2VnbWVudHNbaV0gPT09ICcwJykge1xuICAgICAgICAgIF9jdXJyZW50ICs9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW56ZXJvZXMgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoX2N1cnJlbnQgPiBfYmVzdCkge1xuICAgICAgICAgICAgYmVzdCA9IGN1cnJlbnQ7XG4gICAgICAgICAgICBfYmVzdCA9IF9jdXJyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNlZ21lbnRzW2ldID09PSAnMCcpIHtcbiAgICAgICAgICBpbnplcm9lcyA9IHRydWU7XG4gICAgICAgICAgY3VycmVudCA9IGk7XG4gICAgICAgICAgX2N1cnJlbnQgPSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKF9jdXJyZW50ID4gX2Jlc3QpIHtcbiAgICAgIGJlc3QgPSBjdXJyZW50O1xuICAgICAgX2Jlc3QgPSBfY3VycmVudDtcbiAgICB9XG5cbiAgICBpZiAoX2Jlc3QgPiAxKSB7XG4gICAgICBzZWdtZW50cy5zcGxpY2UoYmVzdCwgX2Jlc3QsICcnKTtcbiAgICB9XG5cbiAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7XG5cbiAgICAvLyBhc3NlbWJsZSByZW1haW5pbmcgc2VnbWVudHNcbiAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgaWYgKHNlZ21lbnRzWzBdID09PSAnJykgIHtcbiAgICAgIHJlc3VsdCA9ICc6JztcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdCArPSBzZWdtZW50c1tpXTtcbiAgICAgIGlmIChpID09PSBsZW5ndGggLSAxKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgKz0gJzonO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50c1tsZW5ndGggLSAxXSA9PT0gJycpIHtcbiAgICAgIHJlc3VsdCArPSAnOic7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgaWYgKHJvb3QuSVB2NiA9PT0gdGhpcykge1xuICAgICAgcm9vdC5JUHY2ID0gX0lQdjY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGJlc3Q6IGJlc3RQcmVzZW50YXRpb24sXG4gICAgbm9Db25mbGljdDogbm9Db25mbGljdFxuICB9O1xufSkpO1xuIiwiLyohXG4gKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzXG4gKiBTZWNvbmQgTGV2ZWwgRG9tYWluIChTTEQpIFN1cHBvcnRcbiAqXG4gKiBWZXJzaW9uOiAxLjE5LjFcbiAqXG4gKiBBdXRob3I6IFJvZG5leSBSZWhtXG4gKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy9cbiAqXG4gKiBMaWNlbnNlZCB1bmRlclxuICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKlxuICovXG5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAndXNlIHN0cmljdCc7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qc1xuICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAvLyBOb2RlXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbHMgKHJvb3QgaXMgd2luZG93KVxuICAgIHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zID0gZmFjdG9yeShyb290KTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAocm9vdCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gc2F2ZSBjdXJyZW50IFNlY29uZExldmVsRG9tYWlucyB2YXJpYWJsZSwgaWYgYW55XG4gIHZhciBfU2Vjb25kTGV2ZWxEb21haW5zID0gcm9vdCAmJiByb290LlNlY29uZExldmVsRG9tYWlucztcblxuICB2YXIgU0xEID0ge1xuICAgIC8vIGxpc3Qgb2Yga25vd24gU2Vjb25kIExldmVsIERvbWFpbnNcbiAgICAvLyBjb252ZXJ0ZWQgbGlzdCBvZiBTTERzIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2dhdmluZ21pbGxlci9zZWNvbmQtbGV2ZWwtZG9tYWluc1xuICAgIC8vIC0tLS1cbiAgICAvLyBwdWJsaWNzdWZmaXgub3JnIGlzIG1vcmUgY3VycmVudCBhbmQgYWN0dWFsbHkgdXNlZCBieSBhIGNvdXBsZSBvZiBicm93c2VycyBpbnRlcm5hbGx5LlxuICAgIC8vIGRvd25zaWRlIGlzIGl0IGFsc28gY29udGFpbnMgZG9tYWlucyBsaWtlIFwiZHluZG5zLm9yZ1wiIC0gd2hpY2ggaXMgZmluZSBmb3IgdGhlIHNlY3VyaXR5XG4gICAgLy8gaXNzdWVzIGJyb3dzZXIgaGF2ZSB0byBkZWFsIHdpdGggKFNPUCBmb3IgY29va2llcywgZXRjKSAtIGJ1dCBpcyB3YXkgb3ZlcmJvYXJkIGZvciBVUkkuanNcbiAgICAvLyAtLS0tXG4gICAgbGlzdDoge1xuICAgICAgJ2FjJzonIGNvbSBnb3YgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdhZSc6JyBhYyBjbyBnb3YgbWlsIG5hbWUgbmV0IG9yZyBwcm8gc2NoICcsXG4gICAgICAnYWYnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2FsJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsXG4gICAgICAnYW8nOicgY28gZWQgZ3YgaXQgb2cgcGIgJyxcbiAgICAgICdhcic6JyBjb20gZWR1IGdvYiBnb3YgaW50IG1pbCBuZXQgb3JnIHR1ciAnLFxuICAgICAgJ2F0JzonIGFjIGNvIGd2IG9yICcsXG4gICAgICAnYXUnOicgYXNuIGNvbSBjc2lybyBlZHUgZ292IGlkIG5ldCBvcmcgJyxcbiAgICAgICdiYSc6JyBjbyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyBycyB1bmJpIHVubW8gdW5zYSB1bnR6IHVuemUgJyxcbiAgICAgICdiYic6JyBiaXogY28gY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnIHN0b3JlIHR2ICcsXG4gICAgICAnYmgnOicgYml6IGNjIGNvbSBlZHUgZ292IGluZm8gbmV0IG9yZyAnLFxuICAgICAgJ2JuJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdibyc6JyBjb20gZWR1IGdvYiBnb3YgaW50IG1pbCBuZXQgb3JnIHR2ICcsXG4gICAgICAnYnInOicgYWRtIGFkdiBhZ3IgYW0gYXJxIGFydCBhdG8gYiBiaW8gYmxvZyBibWQgY2ltIGNuZyBjbnQgY29tIGNvb3AgZWNuIGVkdSBlbmcgZXNwIGV0YyBldGkgZmFyIGZsb2cgZm0gZm5kIGZvdCBmc3QgZzEyIGdnZiBnb3YgaW1iIGluZCBpbmYgam9yIGp1cyBsZWwgbWF0IG1lZCBtaWwgbXVzIG5ldCBub20gbm90IG50ciBvZG8gb3JnIHBwZyBwcm8gcHNjIHBzaSBxc2wgcmVjIHNsZyBzcnYgdG1wIHRyZCB0dXIgdHYgdmV0IHZsb2cgd2lraSB6bGcgJyxcbiAgICAgICdicyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnYnonOicgZHUgZXQgb20gb3YgcmcgJyxcbiAgICAgICdjYSc6JyBhYiBiYyBtYiBuYiBuZiBubCBucyBudCBudSBvbiBwZSBxYyBzayB5ayAnLFxuICAgICAgJ2NrJzonIGJpeiBjbyBlZHUgZ2VuIGdvdiBpbmZvIG5ldCBvcmcgJyxcbiAgICAgICdjbic6JyBhYyBhaCBiaiBjb20gY3EgZWR1IGZqIGdkIGdvdiBncyBneCBneiBoYSBoYiBoZSBoaSBobCBobiBqbCBqcyBqeCBsbiBtaWwgbmV0IG5tIG54IG9yZyBxaCBzYyBzZCBzaCBzbiBzeCB0aiB0dyB4aiB4eiB5biB6aiAnLFxuICAgICAgJ2NvJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgbm9tIG9yZyAnLFxuICAgICAgJ2NyJzonIGFjIGMgY28gZWQgZmkgZ28gb3Igc2EgJyxcbiAgICAgICdjeSc6JyBhYyBiaXogY29tIGVrbG9nZXMgZ292IGx0ZCBuYW1lIG5ldCBvcmcgcGFybGlhbWVudCBwcmVzcyBwcm8gdG0gJyxcbiAgICAgICdkbyc6JyBhcnQgY29tIGVkdSBnb2IgZ292IG1pbCBuZXQgb3JnIHNsZCB3ZWIgJyxcbiAgICAgICdkeic6JyBhcnQgYXNzbyBjb20gZWR1IGdvdiBuZXQgb3JnIHBvbCAnLFxuICAgICAgJ2VjJzonIGNvbSBlZHUgZmluIGdvdiBpbmZvIG1lZCBtaWwgbmV0IG9yZyBwcm8gJyxcbiAgICAgICdlZyc6JyBjb20gZWR1IGV1biBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2kgJyxcbiAgICAgICdlcic6JyBjb20gZWR1IGdvdiBpbmQgbWlsIG5ldCBvcmcgcm9jaGVzdCB3ICcsXG4gICAgICAnZXMnOicgY29tIGVkdSBnb2Igbm9tIG9yZyAnLFxuICAgICAgJ2V0JzonIGJpeiBjb20gZWR1IGdvdiBpbmZvIG5hbWUgbmV0IG9yZyAnLFxuICAgICAgJ2ZqJzonIGFjIGJpeiBjb20gaW5mbyBtaWwgbmFtZSBuZXQgb3JnIHBybyAnLFxuICAgICAgJ2ZrJzonIGFjIGNvIGdvdiBuZXQgbm9tIG9yZyAnLFxuICAgICAgJ2ZyJzonIGFzc28gY29tIGYgZ291diBub20gcHJkIHByZXNzZSB0bSAnLFxuICAgICAgJ2dnJzonIGNvIG5ldCBvcmcgJyxcbiAgICAgICdnaCc6JyBjb20gZWR1IGdvdiBtaWwgb3JnICcsXG4gICAgICAnZ24nOicgYWMgY29tIGdvdiBuZXQgb3JnICcsXG4gICAgICAnZ3InOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdndCc6JyBjb20gZWR1IGdvYiBpbmQgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdndSc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnaGsnOicgY29tIGVkdSBnb3YgaWR2IG5ldCBvcmcgJyxcbiAgICAgICdodSc6JyAyMDAwIGFncmFyIGJvbHQgY2FzaW5vIGNpdHkgY28gZXJvdGljYSBlcm90aWthIGZpbG0gZm9ydW0gZ2FtZXMgaG90ZWwgaW5mbyBpbmdhdGxhbiBqb2dhc3oga29ueXZlbG8gbGFrYXMgbWVkaWEgbmV3cyBvcmcgcHJpdiByZWtsYW0gc2V4IHNob3Agc3BvcnQgc3VsaSBzemV4IHRtIHRvenNkZSB1dGF6YXMgdmlkZW8gJyxcbiAgICAgICdpZCc6JyBhYyBjbyBnbyBtaWwgbmV0IG9yIHNjaCB3ZWIgJyxcbiAgICAgICdpbCc6JyBhYyBjbyBnb3YgaWRmIGsxMiBtdW5pIG5ldCBvcmcgJyxcbiAgICAgICdpbic6JyBhYyBjbyBlZHUgZXJuZXQgZmlybSBnZW4gZ292IGkgaW5kIG1pbCBuZXQgbmljIG9yZyByZXMgJyxcbiAgICAgICdpcSc6JyBjb20gZWR1IGdvdiBpIG1pbCBuZXQgb3JnICcsXG4gICAgICAnaXInOicgYWMgY28gZG5zc2VjIGdvdiBpIGlkIG5ldCBvcmcgc2NoICcsXG4gICAgICAnaXQnOicgZWR1IGdvdiAnLFxuICAgICAgJ2plJzonIGNvIG5ldCBvcmcgJyxcbiAgICAgICdqbyc6JyBjb20gZWR1IGdvdiBtaWwgbmFtZSBuZXQgb3JnIHNjaCAnLFxuICAgICAgJ2pwJzonIGFjIGFkIGNvIGVkIGdvIGdyIGxnIG5lIG9yICcsXG4gICAgICAna2UnOicgYWMgY28gZ28gaW5mbyBtZSBtb2JpIG5lIG9yIHNjICcsXG4gICAgICAna2gnOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgcGVyICcsXG4gICAgICAna2knOicgYml6IGNvbSBkZSBlZHUgZ292IGluZm8gbW9iIG5ldCBvcmcgdGVsICcsXG4gICAgICAna20nOicgYXNzbyBjb20gY29vcCBlZHUgZ291diBrIG1lZGVjaW4gbWlsIG5vbSBub3RhaXJlcyBwaGFybWFjaWVucyBwcmVzc2UgdG0gdmV0ZXJpbmFpcmUgJyxcbiAgICAgICdrbic6JyBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdrcic6JyBhYyBidXNhbiBjaHVuZ2J1ayBjaHVuZ25hbSBjbyBkYWVndSBkYWVqZW9uIGVzIGdhbmd3b24gZ28gZ3dhbmdqdSBneWVvbmdidWsgZ3llb25nZ2kgZ3llb25nbmFtIGhzIGluY2hlb24gamVqdSBqZW9uYnVrIGplb25uYW0gayBrZyBtaWwgbXMgbmUgb3IgcGUgcmUgc2Mgc2VvdWwgdWxzYW4gJyxcbiAgICAgICdrdyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAna3knOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2t6JzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsXG4gICAgICAnbGInOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2xrJzonIGFzc24gY29tIGVkdSBnb3YgZ3JwIGhvdGVsIGludCBsdGQgbmV0IG5nbyBvcmcgc2NoIHNvYyB3ZWIgJyxcbiAgICAgICdscic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnbHYnOicgYXNuIGNvbSBjb25mIGVkdSBnb3YgaWQgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdseSc6JyBjb20gZWR1IGdvdiBpZCBtZWQgbmV0IG9yZyBwbGMgc2NoICcsXG4gICAgICAnbWEnOicgYWMgY28gZ292IG0gbmV0IG9yZyBwcmVzcyAnLFxuICAgICAgJ21jJzonIGFzc28gdG0gJyxcbiAgICAgICdtZSc6JyBhYyBjbyBlZHUgZ292IGl0cyBuZXQgb3JnIHByaXYgJyxcbiAgICAgICdtZyc6JyBjb20gZWR1IGdvdiBtaWwgbm9tIG9yZyBwcmQgdG0gJyxcbiAgICAgICdtayc6JyBjb20gZWR1IGdvdiBpbmYgbmFtZSBuZXQgb3JnIHBybyAnLFxuICAgICAgJ21sJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgcHJlc3NlICcsXG4gICAgICAnbW4nOicgZWR1IGdvdiBvcmcgJyxcbiAgICAgICdtbyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnbXQnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ212JzonIGFlcm8gYml6IGNvbSBjb29wIGVkdSBnb3YgaW5mbyBpbnQgbWlsIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvICcsXG4gICAgICAnbXcnOicgYWMgY28gY29tIGNvb3AgZWR1IGdvdiBpbnQgbXVzZXVtIG5ldCBvcmcgJyxcbiAgICAgICdteCc6JyBjb20gZWR1IGdvYiBuZXQgb3JnICcsXG4gICAgICAnbXknOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJyxcbiAgICAgICduZic6JyBhcnRzIGNvbSBmaXJtIGluZm8gbmV0IG90aGVyIHBlciByZWMgc3RvcmUgd2ViICcsXG4gICAgICAnbmcnOicgYml6IGNvbSBlZHUgZ292IG1pbCBtb2JpIG5hbWUgbmV0IG9yZyBzY2ggJyxcbiAgICAgICduaSc6JyBhYyBjbyBjb20gZWR1IGdvYiBtaWwgbmV0IG5vbSBvcmcgJyxcbiAgICAgICducCc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLFxuICAgICAgJ25yJzonIGJpeiBjb20gZWR1IGdvdiBpbmZvIG5ldCBvcmcgJyxcbiAgICAgICdvbSc6JyBhYyBiaXogY28gY29tIGVkdSBnb3YgbWVkIG1pbCBtdXNldW0gbmV0IG9yZyBwcm8gc2NoICcsXG4gICAgICAncGUnOicgY29tIGVkdSBnb2IgbWlsIG5ldCBub20gb3JnIHNsZCAnLFxuICAgICAgJ3BoJzonIGNvbSBlZHUgZ292IGkgbWlsIG5ldCBuZ28gb3JnICcsXG4gICAgICAncGsnOicgYml6IGNvbSBlZHUgZmFtIGdvYiBnb2sgZ29uIGdvcCBnb3MgZ292IG5ldCBvcmcgd2ViICcsXG4gICAgICAncGwnOicgYXJ0IGJpYWx5c3RvayBiaXogY29tIGVkdSBnZGEgZ2RhbnNrIGdvcnpvdyBnb3YgaW5mbyBrYXRvd2ljZSBrcmFrb3cgbG9keiBsdWJsaW4gbWlsIG5ldCBuZ28gb2xzenR5biBvcmcgcG96bmFuIHB3ciByYWRvbSBzbHVwc2sgc3pjemVjaW4gdG9ydW4gd2Fyc3phd2Egd2F3IHdyb2Mgd3JvY2xhdyB6Z29yYSAnLFxuICAgICAgJ3ByJzonIGFjIGJpeiBjb20gZWR1IGVzdCBnb3YgaW5mbyBpc2xhIG5hbWUgbmV0IG9yZyBwcm8gcHJvZiAnLFxuICAgICAgJ3BzJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgcGxvIHNlYyAnLFxuICAgICAgJ3B3JzonIGJlbGF1IGNvIGVkIGdvIG5lIG9yICcsXG4gICAgICAncm8nOicgYXJ0cyBjb20gZmlybSBpbmZvIG5vbSBudCBvcmcgcmVjIHN0b3JlIHRtIHd3dyAnLFxuICAgICAgJ3JzJzonIGFjIGNvIGVkdSBnb3YgaW4gb3JnICcsXG4gICAgICAnc2InOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ3NjJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdzaCc6JyBjbyBjb20gZWR1IGdvdiBuZXQgbm9tIG9yZyAnLFxuICAgICAgJ3NsJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdzdCc6JyBjbyBjb20gY29uc3VsYWRvIGVkdSBlbWJhaXhhZGEgZ292IG1pbCBuZXQgb3JnIHByaW5jaXBlIHNhb3RvbWUgc3RvcmUgJyxcbiAgICAgICdzdic6JyBjb20gZWR1IGdvYiBvcmcgcmVkICcsXG4gICAgICAnc3onOicgYWMgY28gb3JnICcsXG4gICAgICAndHInOicgYXYgYmJzIGJlbCBiaXogY29tIGRyIGVkdSBnZW4gZ292IGluZm8gazEyIG5hbWUgbmV0IG9yZyBwb2wgdGVsIHRzayB0diB3ZWIgJyxcbiAgICAgICd0dCc6JyBhZXJvIGJpeiBjYXQgY28gY29tIGNvb3AgZWR1IGdvdiBpbmZvIGludCBqb2JzIG1pbCBtb2JpIG11c2V1bSBuYW1lIG5ldCBvcmcgcHJvIHRlbCB0cmF2ZWwgJyxcbiAgICAgICd0dyc6JyBjbHViIGNvbSBlYml6IGVkdSBnYW1lIGdvdiBpZHYgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdtdSc6JyBhYyBjbyBjb20gZ292IG5ldCBvciBvcmcgJyxcbiAgICAgICdteic6JyBhYyBjbyBlZHUgZ292IG9yZyAnLFxuICAgICAgJ25hJzonIGNvIGNvbSAnLFxuICAgICAgJ256JzonIGFjIGNvIGNyaSBnZWVrIGdlbiBnb3Z0IGhlYWx0aCBpd2kgbWFvcmkgbWlsIG5ldCBvcmcgcGFybGlhbWVudCBzY2hvb2wgJyxcbiAgICAgICdwYSc6JyBhYm8gYWMgY29tIGVkdSBnb2IgaW5nIG1lZCBuZXQgbm9tIG9yZyBzbGQgJyxcbiAgICAgICdwdCc6JyBjb20gZWR1IGdvdiBpbnQgbmV0IG5vbWUgb3JnIHB1YmwgJyxcbiAgICAgICdweSc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLFxuICAgICAgJ3FhJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsXG4gICAgICAncmUnOicgYXNzbyBjb20gbm9tICcsXG4gICAgICAncnUnOicgYWMgYWR5Z2V5YSBhbHRhaSBhbXVyIGFya2hhbmdlbHNrIGFzdHJha2hhbiBiYXNoa2lyaWEgYmVsZ29yb2QgYmlyIGJyeWFuc2sgYnVyeWF0aWEgY2JnIGNoZWwgY2hlbHlhYmluc2sgY2hpdGEgY2h1a290a2EgY2h1dmFzaGlhIGNvbSBkYWdlc3RhbiBlLWJ1cmcgZWR1IGdvdiBncm96bnkgaW50IGlya3V0c2sgaXZhbm92byBpemhldnNrIGphciBqb3Noa2FyLW9sYSBrYWxteWtpYSBrYWx1Z2Ega2FtY2hhdGthIGthcmVsaWEga2F6YW4ga2NociBrZW1lcm92byBraGFiYXJvdnNrIGtoYWthc3NpYSBraHYga2lyb3Yga29lbmlnIGtvbWkga29zdHJvbWEga3Jhbm95YXJzayBrdWJhbiBrdXJnYW4ga3Vyc2sgbGlwZXRzayBtYWdhZGFuIG1hcmkgbWFyaS1lbCBtYXJpbmUgbWlsIG1vcmRvdmlhIG1vc3JlZyBtc2sgbXVybWFuc2sgbmFsY2hpayBuZXQgbm5vdiBub3Ygbm92b3NpYmlyc2sgbnNrIG9tc2sgb3JlbmJ1cmcgb3JnIG9yeW9sIHBlbnphIHBlcm0gcHAgcHNrb3YgcHR6IHJuZCByeWF6YW4gc2FraGFsaW4gc2FtYXJhIHNhcmF0b3Ygc2ltYmlyc2sgc21vbGVuc2sgc3BiIHN0YXZyb3BvbCBzdHYgc3VyZ3V0IHRhbWJvdiB0YXRhcnN0YW4gdG9tIHRvbXNrIHRzYXJpdHN5biB0c2sgdHVsYSB0dXZhIHR2ZXIgdHl1bWVuIHVkbSB1ZG11cnRpYSB1bGFuLXVkZSB2bGFkaWthdmtheiB2bGFkaW1pciB2bGFkaXZvc3RvayB2b2xnb2dyYWQgdm9sb2dkYSB2b3JvbmV6aCB2cm4gdnlhdGthIHlha3V0aWEgeWFtYWwgeWVrYXRlcmluYnVyZyB5dXpobm8tc2FraGFsaW5zayAnLFxuICAgICAgJ3J3JzonIGFjIGNvIGNvbSBlZHUgZ291diBnb3YgaW50IG1pbCBuZXQgJyxcbiAgICAgICdzYSc6JyBjb20gZWR1IGdvdiBtZWQgbmV0IG9yZyBwdWIgc2NoICcsXG4gICAgICAnc2QnOicgY29tIGVkdSBnb3YgaW5mbyBtZWQgbmV0IG9yZyB0diAnLFxuICAgICAgJ3NlJzonIGEgYWMgYiBiZCBjIGQgZSBmIGcgaCBpIGsgbCBtIG4gbyBvcmcgcCBwYXJ0aSBwcCBwcmVzcyByIHMgdCB0bSB1IHcgeCB5IHogJyxcbiAgICAgICdzZyc6JyBjb20gZWR1IGdvdiBpZG4gbmV0IG9yZyBwZXIgJyxcbiAgICAgICdzbic6JyBhcnQgY29tIGVkdSBnb3V2IG9yZyBwZXJzbyB1bml2ICcsXG4gICAgICAnc3knOicgY29tIGVkdSBnb3YgbWlsIG5ldCBuZXdzIG9yZyAnLFxuICAgICAgJ3RoJzonIGFjIGNvIGdvIGluIG1pIG5ldCBvciAnLFxuICAgICAgJ3RqJzonIGFjIGJpeiBjbyBjb20gZWR1IGdvIGdvdiBpbmZvIGludCBtaWwgbmFtZSBuZXQgbmljIG9yZyB0ZXN0IHdlYiAnLFxuICAgICAgJ3RuJzonIGFncmluZXQgY29tIGRlZmVuc2UgZWR1bmV0IGVucyBmaW4gZ292IGluZCBpbmZvIGludGwgbWluY29tIG5hdCBuZXQgb3JnIHBlcnNvIHJucnQgcm5zIHJudSB0b3VyaXNtICcsXG4gICAgICAndHonOicgYWMgY28gZ28gbmUgb3IgJyxcbiAgICAgICd1YSc6JyBiaXogY2hlcmthc3N5IGNoZXJuaWdvdiBjaGVybm92dHN5IGNrIGNuIGNvIGNvbSBjcmltZWEgY3YgZG4gZG5lcHJvcGV0cm92c2sgZG9uZXRzayBkcCBlZHUgZ292IGlmIGluIGl2YW5vLWZyYW5raXZzayBraCBraGFya292IGtoZXJzb24ga2htZWxuaXRza2l5IGtpZXYga2lyb3ZvZ3JhZCBrbSBrciBrcyBrdiBsZyBsdWdhbnNrIGx1dHNrIGx2aXYgbWUgbWsgbmV0IG5pa29sYWV2IG9kIG9kZXNzYSBvcmcgcGwgcG9sdGF2YSBwcCByb3ZubyBydiBzZWJhc3RvcG9sIHN1bXkgdGUgdGVybm9waWwgdXpoZ29yb2QgdmlubmljYSB2biB6YXBvcml6aHpoZSB6aGl0b21pciB6cCB6dCAnLFxuICAgICAgJ3VnJzonIGFjIGNvIGdvIG5lIG9yIG9yZyBzYyAnLFxuICAgICAgJ3VrJzonIGFjIGJsIGJyaXRpc2gtbGlicmFyeSBjbyBjeW0gZ292IGdvdnQgaWNuZXQgamV0IGxlYSBsdGQgbWUgbWlsIG1vZCBuYXRpb25hbC1saWJyYXJ5LXNjb3RsYW5kIG5lbCBuZXQgbmhzIG5pYyBubHMgb3JnIG9yZ24gcGFybGlhbWVudCBwbGMgcG9saWNlIHNjaCBzY290IHNvYyAnLFxuICAgICAgJ3VzJzonIGRuaSBmZWQgaXNhIGtpZHMgbnNuICcsXG4gICAgICAndXknOicgY29tIGVkdSBndWIgbWlsIG5ldCBvcmcgJyxcbiAgICAgICd2ZSc6JyBjbyBjb20gZWR1IGdvYiBpbmZvIG1pbCBuZXQgb3JnIHdlYiAnLFxuICAgICAgJ3ZpJzonIGNvIGNvbSBrMTIgbmV0IG9yZyAnLFxuICAgICAgJ3ZuJzonIGFjIGJpeiBjb20gZWR1IGdvdiBoZWFsdGggaW5mbyBpbnQgbmFtZSBuZXQgb3JnIHBybyAnLFxuICAgICAgJ3llJzonIGNvIGNvbSBnb3YgbHRkIG1lIG5ldCBvcmcgcGxjICcsXG4gICAgICAneXUnOicgYWMgY28gZWR1IGdvdiBvcmcgJyxcbiAgICAgICd6YSc6JyBhYyBhZ3JpYyBhbHQgYm91cnNlIGNpdHkgY28gY3liZXJuZXQgZGIgZWR1IGdvdiBncm9uZGFyIGlhY2Nlc3MgaW10IGluY2EgbGFuZGVzaWduIGxhdyBtaWwgbmV0IG5nbyBuaXMgbm9tIG9saXZldHRpIG9yZyBwaXggc2Nob29sIHRtIHdlYiAnLFxuICAgICAgJ3ptJzonIGFjIGNvIGNvbSBlZHUgZ292IG5ldCBvcmcgc2NoICcsXG4gICAgICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DZW50cmFsTmljI1NlY29uZC1sZXZlbF9kb21haW5zXG4gICAgICAnY29tJzogJ2FyIGJyIGNuIGRlIGV1IGdiIGdyIGh1IGpwbiBrciBubyBxYyBydSBzYSBzZSB1ayB1cyB1eSB6YSAnLFxuICAgICAgJ25ldCc6ICdnYiBqcCBzZSB1ayAnLFxuICAgICAgJ29yZyc6ICdhZScsXG4gICAgICAnZGUnOiAnY29tICdcbiAgICB9LFxuICAgIC8vIGdvcmhpbGwgMjAxMy0xMC0yNTogVXNpbmcgaW5kZXhPZigpIGluc3RlYWQgUmVnZXhwKCkuIFNpZ25pZmljYW50IGJvb3N0XG4gICAgLy8gaW4gYm90aCBwZXJmb3JtYW5jZSBhbmQgbWVtb3J5IGZvb3RwcmludC4gTm8gaW5pdGlhbGl6YXRpb24gcmVxdWlyZWQuXG4gICAgLy8gaHR0cDovL2pzcGVyZi5jb20vdXJpLWpzLXNsZC1yZWdleC12cy1iaW5hcnktc2VhcmNoLzRcbiAgICAvLyBGb2xsb3dpbmcgbWV0aG9kcyB1c2UgbGFzdEluZGV4T2YoKSByYXRoZXIgdGhhbiBhcnJheS5zcGxpdCgpIGluIG9yZGVyXG4gICAgLy8gdG8gYXZvaWQgYW55IG1lbW9yeSBhbGxvY2F0aW9ucy5cbiAgICBoYXM6IGZ1bmN0aW9uKGRvbWFpbikge1xuICAgICAgdmFyIHRsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicpO1xuICAgICAgaWYgKHRsZE9mZnNldCA8PSAwIHx8IHRsZE9mZnNldCA+PSAoZG9tYWluLmxlbmd0aC0xKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgc2xkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJywgdGxkT2Zmc2V0LTEpO1xuICAgICAgaWYgKHNsZE9mZnNldCA8PSAwIHx8IHNsZE9mZnNldCA+PSAodGxkT2Zmc2V0LTEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07XG4gICAgICBpZiAoIXNsZExpc3QpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNsZExpc3QuaW5kZXhPZignICcgKyBkb21haW4uc2xpY2Uoc2xkT2Zmc2V0KzEsIHRsZE9mZnNldCkgKyAnICcpID49IDA7XG4gICAgfSxcbiAgICBpczogZnVuY3Rpb24oZG9tYWluKSB7XG4gICAgICB2YXIgdGxkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICBpZiAodGxkT2Zmc2V0IDw9IDAgfHwgdGxkT2Zmc2V0ID49IChkb21haW4ubGVuZ3RoLTEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBzbGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nLCB0bGRPZmZzZXQtMSk7XG4gICAgICBpZiAoc2xkT2Zmc2V0ID49IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHNsZExpc3QgPSBTTEQubGlzdFtkb21haW4uc2xpY2UodGxkT2Zmc2V0KzEpXTtcbiAgICAgIGlmICghc2xkTGlzdCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2xkTGlzdC5pbmRleE9mKCcgJyArIGRvbWFpbi5zbGljZSgwLCB0bGRPZmZzZXQpICsgJyAnKSA+PSAwO1xuICAgIH0sXG4gICAgZ2V0OiBmdW5jdGlvbihkb21haW4pIHtcbiAgICAgIHZhciB0bGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nKTtcbiAgICAgIGlmICh0bGRPZmZzZXQgPD0gMCB8fCB0bGRPZmZzZXQgPj0gKGRvbWFpbi5sZW5ndGgtMSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICB2YXIgc2xkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJywgdGxkT2Zmc2V0LTEpO1xuICAgICAgaWYgKHNsZE9mZnNldCA8PSAwIHx8IHNsZE9mZnNldCA+PSAodGxkT2Zmc2V0LTEpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdmFyIHNsZExpc3QgPSBTTEQubGlzdFtkb21haW4uc2xpY2UodGxkT2Zmc2V0KzEpXTtcbiAgICAgIGlmICghc2xkTGlzdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChzbGRMaXN0LmluZGV4T2YoJyAnICsgZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxLCB0bGRPZmZzZXQpICsgJyAnKSA8IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxKTtcbiAgICB9LFxuICAgIG5vQ29uZmxpY3Q6IGZ1bmN0aW9uKCl7XG4gICAgICBpZiAocm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPT09IHRoaXMpIHtcbiAgICAgICAgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgPSBfU2Vjb25kTGV2ZWxEb21haW5zO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBTTEQ7XG59KSk7XG4iLCIvKiFcbiAqIFVSSS5qcyAtIE11dGF0aW5nIFVSTHNcbiAqXG4gKiBWZXJzaW9uOiAxLjE5LjFcbiAqXG4gKiBBdXRob3I6IFJvZG5leSBSZWhtXG4gKiBXZWI6IGh0dHA6Ly9tZWRpYWxpemUuZ2l0aHViLmlvL1VSSS5qcy9cbiAqXG4gKiBMaWNlbnNlZCB1bmRlclxuICogICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlXG4gKlxuICovXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanNcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgLy8gTm9kZVxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCcuL3B1bnljb2RlJyksIHJlcXVpcmUoJy4vSVB2NicpLCByZXF1aXJlKCcuL1NlY29uZExldmVsRG9tYWlucycpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgZGVmaW5lKFsnLi9wdW55Y29kZScsICcuL0lQdjYnLCAnLi9TZWNvbmRMZXZlbERvbWFpbnMnXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICByb290LlVSSSA9IGZhY3Rvcnkocm9vdC5wdW55Y29kZSwgcm9vdC5JUHY2LCByb290LlNlY29uZExldmVsRG9tYWlucywgcm9vdCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKHB1bnljb2RlLCBJUHY2LCBTTEQsIHJvb3QpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKmdsb2JhbCBsb2NhdGlvbiwgZXNjYXBlLCB1bmVzY2FwZSAqL1xuICAvLyBGSVhNRTogdjIuMC4wIHJlbmFtY2Ugbm9uLWNhbWVsQ2FzZSBwcm9wZXJ0aWVzIHRvIHVwcGVyY2FzZVxuICAvKmpzaGludCBjYW1lbGNhc2U6IGZhbHNlICovXG5cbiAgLy8gc2F2ZSBjdXJyZW50IFVSSSB2YXJpYWJsZSwgaWYgYW55XG4gIHZhciBfVVJJID0gcm9vdCAmJiByb290LlVSSTtcblxuICBmdW5jdGlvbiBVUkkodXJsLCBiYXNlKSB7XG4gICAgdmFyIF91cmxTdXBwbGllZCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMTtcbiAgICB2YXIgX2Jhc2VTdXBwbGllZCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMjtcblxuICAgIC8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZFxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBVUkkpKSB7XG4gICAgICBpZiAoX3VybFN1cHBsaWVkKSB7XG4gICAgICAgIGlmIChfYmFzZVN1cHBsaWVkKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVUkkodXJsLCBiYXNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgVVJJKHVybCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgVVJJKCk7XG4gICAgfVxuXG4gICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoX3VybFN1cHBsaWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3VuZGVmaW5lZCBpcyBub3QgYSB2YWxpZCBhcmd1bWVudCBmb3IgVVJJJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYgKyAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVybCA9ICcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1cmwgPT09IG51bGwpIHtcbiAgICAgIGlmIChfdXJsU3VwcGxpZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbnVsbCBpcyBub3QgYSB2YWxpZCBhcmd1bWVudCBmb3IgVVJJJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5ocmVmKHVybCk7XG5cbiAgICAvLyByZXNvbHZlIHRvIGJhc2UgYWNjb3JkaW5nIHRvIGh0dHA6Ly9kdmNzLnczLm9yZy9oZy91cmwvcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWwjY29uc3RydWN0b3JcbiAgICBpZiAoYmFzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hYnNvbHV0ZVRvKGJhc2UpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbHVlKSB7XG4gICAgcmV0dXJuIC9eWzAtOV0rJC8udGVzdCh2YWx1ZSk7XG4gIH1cblxuICBVUkkudmVyc2lvbiA9ICcxLjE5LjEnO1xuXG4gIHZhciBwID0gVVJJLnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbiAgZnVuY3Rpb24gZXNjYXBlUmVnRXgoc3RyaW5nKSB7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvY29tbWl0Lzg1YWMyMTc4M2MxMWY4Y2NhYjA2MTA2ZGJhOTczNWEzMWE4NjkyNGQjY29tbWl0Y29tbWVudC04MjE5NjNcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFR5cGUodmFsdWUpIHtcbiAgICAvLyBJRTggZG9lc24ndCByZXR1cm4gW09iamVjdCBVbmRlZmluZWRdIGJ1dCBbT2JqZWN0IE9iamVjdF0gZm9yIHVuZGVmaW5lZCB2YWx1ZVxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gJ1VuZGVmaW5lZCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIFN0cmluZyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpKS5zbGljZSg4LCAtMSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0FycmF5KG9iaikge1xuICAgIHJldHVybiBnZXRUeXBlKG9iaikgPT09ICdBcnJheSc7XG4gIH1cblxuICBmdW5jdGlvbiBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhLCB2YWx1ZSkge1xuICAgIHZhciBsb29rdXAgPSB7fTtcbiAgICB2YXIgaSwgbGVuZ3RoO1xuXG4gICAgaWYgKGdldFR5cGUodmFsdWUpID09PSAnUmVnRXhwJykge1xuICAgICAgbG9va3VwID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBsb29rdXBbdmFsdWVbaV1dID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbG9va3VwW3ZhbHVlXSA9IHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZGF0YS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IHRydWUgKi9cbiAgICAgIHZhciBfbWF0Y2ggPSBsb29rdXAgJiYgbG9va3VwW2RhdGFbaV1dICE9PSB1bmRlZmluZWRcbiAgICAgICAgfHwgIWxvb2t1cCAmJiB2YWx1ZS50ZXN0KGRhdGFbaV0pO1xuICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IGZhbHNlICovXG4gICAgICBpZiAoX21hdGNoKSB7XG4gICAgICAgIGRhdGEuc3BsaWNlKGksIDEpO1xuICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlDb250YWlucyhsaXN0LCB2YWx1ZSkge1xuICAgIHZhciBpLCBsZW5ndGg7XG5cbiAgICAvLyB2YWx1ZSBtYXkgYmUgc3RyaW5nLCBudW1iZXIsIGFycmF5LCByZWdleHBcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGJlIG9wdGltaXplZCB0byBPKG4pIChpbnN0ZWFkIG9mIGN1cnJlbnQgTyhtICogbikpXG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWFycmF5Q29udGFpbnMobGlzdCwgdmFsdWVbaV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBfdHlwZSA9IGdldFR5cGUodmFsdWUpO1xuICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChfdHlwZSA9PT0gJ1JlZ0V4cCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0W2ldID09PSAnc3RyaW5nJyAmJiBsaXN0W2ldLm1hdGNoKHZhbHVlKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGxpc3RbaV0gPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFycmF5c0VxdWFsKG9uZSwgdHdvKSB7XG4gICAgaWYgKCFpc0FycmF5KG9uZSkgfHwgIWlzQXJyYXkodHdvKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGFycmF5cyBjYW4ndCBiZSBlcXVhbCBpZiB0aGV5IGhhdmUgZGlmZmVyZW50IGFtb3VudCBvZiBjb250ZW50XG4gICAgaWYgKG9uZS5sZW5ndGggIT09IHR3by5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBvbmUuc29ydCgpO1xuICAgIHR3by5zb3J0KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9uZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmIChvbmVbaV0gIT09IHR3b1tpXSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiB0cmltU2xhc2hlcyh0ZXh0KSB7XG4gICAgdmFyIHRyaW1fZXhwcmVzc2lvbiA9IC9eXFwvK3xcXC8rJC9nO1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UodHJpbV9leHByZXNzaW9uLCAnJyk7XG4gIH1cblxuICBVUkkuX3BhcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3RvY29sOiBudWxsLFxuICAgICAgdXNlcm5hbWU6IG51bGwsXG4gICAgICBwYXNzd29yZDogbnVsbCxcbiAgICAgIGhvc3RuYW1lOiBudWxsLFxuICAgICAgdXJuOiBudWxsLFxuICAgICAgcG9ydDogbnVsbCxcbiAgICAgIHBhdGg6IG51bGwsXG4gICAgICBxdWVyeTogbnVsbCxcbiAgICAgIGZyYWdtZW50OiBudWxsLFxuICAgICAgLy8gc3RhdGVcbiAgICAgIHByZXZlbnRJbnZhbGlkSG9zdG5hbWU6IFVSSS5wcmV2ZW50SW52YWxpZEhvc3RuYW1lLFxuICAgICAgZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzOiBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLFxuICAgICAgZXNjYXBlUXVlcnlTcGFjZTogVVJJLmVzY2FwZVF1ZXJ5U3BhY2VcbiAgICB9O1xuICB9O1xuICAvLyBzdGF0ZTogdGhyb3cgb24gaW52YWxpZCBob3N0bmFtZVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvcHVsbC8zNDVcbiAgLy8gYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy8zNTRcbiAgVVJJLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUgPSBmYWxzZTtcbiAgLy8gc3RhdGU6IGFsbG93IGR1cGxpY2F0ZSBxdWVyeSBwYXJhbWV0ZXJzIChhPTEmYT0xKVxuICBVUkkuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzID0gZmFsc2U7XG4gIC8vIHN0YXRlOiByZXBsYWNlcyArIHdpdGggJTIwIChzcGFjZSBpbiBxdWVyeSBzdHJpbmdzKVxuICBVUkkuZXNjYXBlUXVlcnlTcGFjZSA9IHRydWU7XG4gIC8vIHN0YXRpYyBwcm9wZXJ0aWVzXG4gIFVSSS5wcm90b2NvbF9leHByZXNzaW9uID0gL15bYS16XVthLXowLTkuKy1dKiQvaTtcbiAgVVJJLmlkbl9leHByZXNzaW9uID0gL1teYS16MC05XFwuXy1dL2k7XG4gIFVSSS5wdW55Y29kZV9leHByZXNzaW9uID0gLyh4bi0tKS9pO1xuICAvLyB3ZWxsLCAzMzMuNDQ0LjU1NS42NjYgbWF0Y2hlcywgYnV0IGl0IHN1cmUgYWluJ3Qgbm8gSVB2NCAtIGRvIHdlIGNhcmU/XG4gIFVSSS5pcDRfZXhwcmVzc2lvbiA9IC9eXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM30kLztcbiAgLy8gY3JlZGl0cyB0byBSaWNoIEJyb3duXG4gIC8vIHNvdXJjZTogaHR0cDovL2ZvcnVtcy5pbnRlcm1hcHBlci5jb20vdmlld3RvcGljLnBocD9wPTEwOTYjMTA5NlxuICAvLyBzcGVjaWZpY2F0aW9uOiBodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmM0MjkxLnR4dFxuICBVUkkuaXA2X2V4cHJlc3Npb24gPSAvXlxccyooKChbMC05QS1GYS1mXXsxLDR9Oil7N30oWzAtOUEtRmEtZl17MSw0fXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Nn0oOlswLTlBLUZhLWZdezEsNH18KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs1fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDJ9KXw6KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXs0fSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDN9KXwoKDpbMC05QS1GYS1mXXsxLDR9KT86KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7M30oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw0fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwyfTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsyfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDV9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDN9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezF9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNn0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNH06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KDooKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw3fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCw1fTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKSkoJS4rKT9cXHMqJC87XG4gIC8vIGV4cHJlc3Npb24gdXNlZCBpcyBcImdydWJlciByZXZpc2VkXCIgKEBncnViZXIgdjIpIGRldGVybWluZWQgdG8gYmUgdGhlXG4gIC8vIGJlc3Qgc29sdXRpb24gaW4gYSByZWdleC1nb2xmIHdlIGRpZCBhIGNvdXBsZSBvZiBhZ2VzIGFnbyBhdFxuICAvLyAqIGh0dHA6Ly9tYXRoaWFzYnluZW5zLmJlL2RlbW8vdXJsLXJlZ2V4XG4gIC8vICogaHR0cDovL3JvZG5leXJlaG0uZGUvdC91cmwtcmVnZXguaHRtbFxuICBVUkkuZmluZF91cmlfZXhwcmVzc2lvbiA9IC9cXGIoKD86W2Etel1bXFx3LV0rOig/OlxcL3sxLDN9fFthLXowLTklXSl8d3d3XFxkezAsM31bLl18W2EtejAtOS5cXC1dK1suXVthLXpdezIsNH1cXC8pKD86W15cXHMoKTw+XSt8XFwoKFteXFxzKCk8Pl0rfChcXChbXlxccygpPD5dK1xcKSkpKlxcKSkrKD86XFwoKFteXFxzKCk8Pl0rfChcXChbXlxccygpPD5dK1xcKSkpKlxcKXxbXlxcc2AhKClcXFtcXF17fTs6J1wiLiw8Pj/Cq8K74oCc4oCd4oCY4oCZXSkpL2lnO1xuICBVUkkuZmluZFVyaSA9IHtcbiAgICAvLyB2YWxpZCBcInNjaGVtZTovL1wiIG9yIFwid3d3LlwiXG4gICAgc3RhcnQ6IC9cXGIoPzooW2Etel1bYS16MC05ListXSo6XFwvXFwvKXx3d3dcXC4pL2dpLFxuICAgIC8vIGV2ZXJ5dGhpbmcgdXAgdG8gdGhlIG5leHQgd2hpdGVzcGFjZVxuICAgIGVuZDogL1tcXHNcXHJcXG5dfCQvLFxuICAgIC8vIHRyaW0gdHJhaWxpbmcgcHVuY3R1YXRpb24gY2FwdHVyZWQgYnkgZW5kIFJlZ0V4cFxuICAgIHRyaW06IC9bYCEoKVxcW1xcXXt9OzonXCIuLDw+P8KrwrvigJzigJ3igJ7igJjigJldKyQvLFxuICAgIC8vIGJhbGFuY2VkIHBhcmVucyBpbmNsdXNpb24gKCksIFtdLCB7fSwgPD5cbiAgICBwYXJlbnM6IC8oXFwoW15cXCldKlxcKXxcXFtbXlxcXV0qXFxdfFxce1tefV0qXFx9fDxbXj5dKj4pL2csXG4gIH07XG4gIC8vIGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvdXJpLXNjaGVtZXMuaHRtbFxuICAvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfVENQX2FuZF9VRFBfcG9ydF9udW1iZXJzI1dlbGwta25vd25fcG9ydHNcbiAgVVJJLmRlZmF1bHRQb3J0cyA9IHtcbiAgICBodHRwOiAnODAnLFxuICAgIGh0dHBzOiAnNDQzJyxcbiAgICBmdHA6ICcyMScsXG4gICAgZ29waGVyOiAnNzAnLFxuICAgIHdzOiAnODAnLFxuICAgIHdzczogJzQ0MydcbiAgfTtcbiAgLy8gbGlzdCBvZiBwcm90b2NvbHMgd2hpY2ggYWx3YXlzIHJlcXVpcmUgYSBob3N0bmFtZVxuICBVUkkuaG9zdFByb3RvY29scyA9IFtcbiAgICAnaHR0cCcsXG4gICAgJ2h0dHBzJ1xuICBdO1xuXG4gIC8vIGFsbG93ZWQgaG9zdG5hbWUgY2hhcmFjdGVycyBhY2NvcmRpbmcgdG8gUkZDIDM5ODZcbiAgLy8gQUxQSEEgRElHSVQgXCItXCIgXCIuXCIgXCJfXCIgXCJ+XCIgXCIhXCIgXCIkXCIgXCImXCIgXCInXCIgXCIoXCIgXCIpXCIgXCIqXCIgXCIrXCIgXCIsXCIgXCI7XCIgXCI9XCIgJWVuY29kZWRcbiAgLy8gSSd2ZSBuZXZlciBzZWVuIGEgKG5vbi1JRE4pIGhvc3RuYW1lIG90aGVyIHRoYW46IEFMUEhBIERJR0lUIC4gLSBfXG4gIFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMgPSAvW15hLXpBLVowLTlcXC5cXC06X10vO1xuICAvLyBtYXAgRE9NIEVsZW1lbnRzIHRvIHRoZWlyIFVSSSBhdHRyaWJ1dGVcbiAgVVJJLmRvbUF0dHJpYnV0ZXMgPSB7XG4gICAgJ2EnOiAnaHJlZicsXG4gICAgJ2Jsb2NrcXVvdGUnOiAnY2l0ZScsXG4gICAgJ2xpbmsnOiAnaHJlZicsXG4gICAgJ2Jhc2UnOiAnaHJlZicsXG4gICAgJ3NjcmlwdCc6ICdzcmMnLFxuICAgICdmb3JtJzogJ2FjdGlvbicsXG4gICAgJ2ltZyc6ICdzcmMnLFxuICAgICdhcmVhJzogJ2hyZWYnLFxuICAgICdpZnJhbWUnOiAnc3JjJyxcbiAgICAnZW1iZWQnOiAnc3JjJyxcbiAgICAnc291cmNlJzogJ3NyYycsXG4gICAgJ3RyYWNrJzogJ3NyYycsXG4gICAgJ2lucHV0JzogJ3NyYycsIC8vIGJ1dCBvbmx5IGlmIHR5cGU9XCJpbWFnZVwiXG4gICAgJ2F1ZGlvJzogJ3NyYycsXG4gICAgJ3ZpZGVvJzogJ3NyYydcbiAgfTtcbiAgVVJJLmdldERvbUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICBpZiAoIW5vZGUgfHwgIW5vZGUubm9kZU5hbWUpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIG5vZGVOYW1lID0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIDxpbnB1dD4gc2hvdWxkIG9ubHkgZXhwb3NlIHNyYyBmb3IgdHlwZT1cImltYWdlXCJcbiAgICBpZiAobm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgbm9kZS50eXBlICE9PSAnaW1hZ2UnKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBVUkkuZG9tQXR0cmlidXRlc1tub2RlTmFtZV07XG4gIH07XG5cbiAgZnVuY3Rpb24gZXNjYXBlRm9yRHVtYkZpcmVmb3gzNih2YWx1ZSkge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MVxuICAgIHJldHVybiBlc2NhcGUodmFsdWUpO1xuICB9XG5cbiAgLy8gZW5jb2RpbmcgLyBkZWNvZGluZyBhY2NvcmRpbmcgdG8gUkZDMzk4NlxuICBmdW5jdGlvbiBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKSB7XG4gICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvZW5jb2RlVVJJQ29tcG9uZW50XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmcpXG4gICAgICAucmVwbGFjZSgvWyEnKCkqXS9nLCBlc2NhcGVGb3JEdW1iRmlyZWZveDM2KVxuICAgICAgLnJlcGxhY2UoL1xcKi9nLCAnJTJBJyk7XG4gIH1cbiAgVVJJLmVuY29kZSA9IHN0cmljdEVuY29kZVVSSUNvbXBvbmVudDtcbiAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDtcbiAgVVJJLmlzbzg4NTkgPSBmdW5jdGlvbigpIHtcbiAgICBVUkkuZW5jb2RlID0gZXNjYXBlO1xuICAgIFVSSS5kZWNvZGUgPSB1bmVzY2FwZTtcbiAgfTtcbiAgVVJJLnVuaWNvZGUgPSBmdW5jdGlvbigpIHtcbiAgICBVUkkuZW5jb2RlID0gc3RyaWN0RW5jb2RlVVJJQ29tcG9uZW50O1xuICAgIFVSSS5kZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG4gIH07XG4gIFVSSS5jaGFyYWN0ZXJzID0ge1xuICAgIHBhdGhuYW1lOiB7XG4gICAgICBlbmNvZGU6IHtcbiAgICAgICAgLy8gUkZDMzk4NiAyLjE6IEZvciBjb25zaXN0ZW5jeSwgVVJJIHByb2R1Y2VycyBhbmQgbm9ybWFsaXplcnMgc2hvdWxkXG4gICAgICAgIC8vIHVzZSB1cHBlcmNhc2UgaGV4YWRlY2ltYWwgZGlnaXRzIGZvciBhbGwgcGVyY2VudC1lbmNvZGluZ3MuXG4gICAgICAgIGV4cHJlc3Npb246IC8lKDI0fDI2fDJCfDJDfDNCfDNEfDNBfDQwKS9pZyxcbiAgICAgICAgbWFwOiB7XG4gICAgICAgICAgLy8gLS5ffiEnKCkqXG4gICAgICAgICAgJyUyNCc6ICckJyxcbiAgICAgICAgICAnJTI2JzogJyYnLFxuICAgICAgICAgICclMkInOiAnKycsXG4gICAgICAgICAgJyUyQyc6ICcsJyxcbiAgICAgICAgICAnJTNCJzogJzsnLFxuICAgICAgICAgICclM0QnOiAnPScsXG4gICAgICAgICAgJyUzQSc6ICc6JyxcbiAgICAgICAgICAnJTQwJzogJ0AnXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWNvZGU6IHtcbiAgICAgICAgZXhwcmVzc2lvbjogL1tcXC9cXD8jXS9nLFxuICAgICAgICBtYXA6IHtcbiAgICAgICAgICAnLyc6ICclMkYnLFxuICAgICAgICAgICc/JzogJyUzRicsXG4gICAgICAgICAgJyMnOiAnJTIzJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICByZXNlcnZlZDoge1xuICAgICAgZW5jb2RlOiB7XG4gICAgICAgIC8vIFJGQzM5ODYgMi4xOiBGb3IgY29uc2lzdGVuY3ksIFVSSSBwcm9kdWNlcnMgYW5kIG5vcm1hbGl6ZXJzIHNob3VsZFxuICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLlxuICAgICAgICBleHByZXNzaW9uOiAvJSgyMXwyM3wyNHwyNnwyN3wyOHwyOXwyQXwyQnwyQ3wyRnwzQXwzQnwzRHwzRnw0MHw1Qnw1RCkvaWcsXG4gICAgICAgIG1hcDoge1xuICAgICAgICAgIC8vIGdlbi1kZWxpbXNcbiAgICAgICAgICAnJTNBJzogJzonLFxuICAgICAgICAgICclMkYnOiAnLycsXG4gICAgICAgICAgJyUzRic6ICc/JyxcbiAgICAgICAgICAnJTIzJzogJyMnLFxuICAgICAgICAgICclNUInOiAnWycsXG4gICAgICAgICAgJyU1RCc6ICddJyxcbiAgICAgICAgICAnJTQwJzogJ0AnLFxuICAgICAgICAgIC8vIHN1Yi1kZWxpbXNcbiAgICAgICAgICAnJTIxJzogJyEnLFxuICAgICAgICAgICclMjQnOiAnJCcsXG4gICAgICAgICAgJyUyNic6ICcmJyxcbiAgICAgICAgICAnJTI3JzogJ1xcJycsXG4gICAgICAgICAgJyUyOCc6ICcoJyxcbiAgICAgICAgICAnJTI5JzogJyknLFxuICAgICAgICAgICclMkEnOiAnKicsXG4gICAgICAgICAgJyUyQic6ICcrJyxcbiAgICAgICAgICAnJTJDJzogJywnLFxuICAgICAgICAgICclM0InOiAnOycsXG4gICAgICAgICAgJyUzRCc6ICc9J1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB1cm5wYXRoOiB7XG4gICAgICAvLyBUaGUgY2hhcmFjdGVycyB1bmRlciBgZW5jb2RlYCBhcmUgdGhlIGNoYXJhY3RlcnMgY2FsbGVkIG91dCBieSBSRkMgMjE0MSBhcyBiZWluZyBhY2NlcHRhYmxlXG4gICAgICAvLyBmb3IgdXNhZ2UgaW4gYSBVUk4uIFJGQzIxNDEgYWxzbyBjYWxscyBvdXQgXCItXCIsIFwiLlwiLCBhbmQgXCJfXCIgYXMgYWNjZXB0YWJsZSBjaGFyYWN0ZXJzLCBidXRcbiAgICAgIC8vIHRoZXNlIGFyZW4ndCBlbmNvZGVkIGJ5IGVuY29kZVVSSUNvbXBvbmVudCwgc28gd2UgZG9uJ3QgaGF2ZSB0byBjYWxsIHRoZW0gb3V0IGhlcmUuIEFsc29cbiAgICAgIC8vIG5vdGUgdGhhdCB0aGUgY29sb24gY2hhcmFjdGVyIGlzIG5vdCBmZWF0dXJlZCBpbiB0aGUgZW5jb2RpbmcgbWFwOyB0aGlzIGlzIGJlY2F1c2UgVVJJLmpzXG4gICAgICAvLyBnaXZlcyB0aGUgY29sb25zIGluIFVSTnMgc2VtYW50aWMgbWVhbmluZyBhcyB0aGUgZGVsaW1pdGVycyBvZiBwYXRoIHNlZ2VtZW50cywgYW5kIHNvIGl0XG4gICAgICAvLyBzaG91bGQgbm90IGFwcGVhciB1bmVuY29kZWQgaW4gYSBzZWdtZW50IGl0c2VsZi5cbiAgICAgIC8vIFNlZSBhbHNvIHRoZSBub3RlIGFib3ZlIGFib3V0IFJGQzM5ODYgYW5kIGNhcGl0YWxhbGl6ZWQgaGV4IGRpZ2l0cy5cbiAgICAgIGVuY29kZToge1xuICAgICAgICBleHByZXNzaW9uOiAvJSgyMXwyNHwyN3wyOHwyOXwyQXwyQnwyQ3wzQnwzRHw0MCkvaWcsXG4gICAgICAgIG1hcDoge1xuICAgICAgICAgICclMjEnOiAnIScsXG4gICAgICAgICAgJyUyNCc6ICckJyxcbiAgICAgICAgICAnJTI3JzogJ1xcJycsXG4gICAgICAgICAgJyUyOCc6ICcoJyxcbiAgICAgICAgICAnJTI5JzogJyknLFxuICAgICAgICAgICclMkEnOiAnKicsXG4gICAgICAgICAgJyUyQic6ICcrJyxcbiAgICAgICAgICAnJTJDJzogJywnLFxuICAgICAgICAgICclM0InOiAnOycsXG4gICAgICAgICAgJyUzRCc6ICc9JyxcbiAgICAgICAgICAnJTQwJzogJ0AnXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBUaGVzZSBjaGFyYWN0ZXJzIGFyZSB0aGUgY2hhcmFjdGVycyBjYWxsZWQgb3V0IGJ5IFJGQzIxNDEgYXMgXCJyZXNlcnZlZFwiIGNoYXJhY3RlcnMgdGhhdFxuICAgICAgLy8gc2hvdWxkIG5ldmVyIGFwcGVhciBpbiBhIFVSTiwgcGx1cyB0aGUgY29sb24gY2hhcmFjdGVyIChzZWUgbm90ZSBhYm92ZSkuXG4gICAgICBkZWNvZGU6IHtcbiAgICAgICAgZXhwcmVzc2lvbjogL1tcXC9cXD8jOl0vZyxcbiAgICAgICAgbWFwOiB7XG4gICAgICAgICAgJy8nOiAnJTJGJyxcbiAgICAgICAgICAnPyc6ICclM0YnLFxuICAgICAgICAgICcjJzogJyUyMycsXG4gICAgICAgICAgJzonOiAnJTNBJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBVUkkuZW5jb2RlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICB2YXIgZXNjYXBlZCA9IFVSSS5lbmNvZGUoc3RyaW5nICsgJycpO1xuICAgIGlmIChlc2NhcGVRdWVyeVNwYWNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXNjYXBlUXVlcnlTcGFjZSA/IGVzY2FwZWQucmVwbGFjZSgvJTIwL2csICcrJykgOiBlc2NhcGVkO1xuICB9O1xuICBVUkkuZGVjb2RlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICBzdHJpbmcgKz0gJyc7XG4gICAgaWYgKGVzY2FwZVF1ZXJ5U3BhY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXNjYXBlUXVlcnlTcGFjZSA9IFVSSS5lc2NhcGVRdWVyeVNwYWNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gVVJJLmRlY29kZShlc2NhcGVRdWVyeVNwYWNlID8gc3RyaW5nLnJlcGxhY2UoL1xcKy9nLCAnJTIwJykgOiBzdHJpbmcpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgLy8gd2UncmUgbm90IGdvaW5nIHRvIG1lc3Mgd2l0aCB3ZWlyZCBlbmNvZGluZ3MsXG4gICAgICAvLyBnaXZlIHVwIGFuZCByZXR1cm4gdGhlIHVuZGVjb2RlZCBvcmlnaW5hbCBzdHJpbmdcbiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvODdcbiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvOTJcbiAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICB9O1xuICAvLyBnZW5lcmF0ZSBlbmNvZGUvZGVjb2RlIHBhdGggZnVuY3Rpb25zXG4gIHZhciBfcGFydHMgPSB7J2VuY29kZSc6J2VuY29kZScsICdkZWNvZGUnOidkZWNvZGUnfTtcbiAgdmFyIF9wYXJ0O1xuICB2YXIgZ2VuZXJhdGVBY2Nlc3NvciA9IGZ1bmN0aW9uKF9ncm91cCwgX3BhcnQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gVVJJW19wYXJ0XShzdHJpbmcgKyAnJykucmVwbGFjZShVUkkuY2hhcmFjdGVyc1tfZ3JvdXBdW19wYXJ0XS5leHByZXNzaW9uLCBmdW5jdGlvbihjKSB7XG4gICAgICAgICAgcmV0dXJuIFVSSS5jaGFyYWN0ZXJzW19ncm91cF1bX3BhcnRdLm1hcFtjXTtcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIHdlJ3JlIG5vdCBnb2luZyB0byBtZXNzIHdpdGggd2VpcmQgZW5jb2RpbmdzLFxuICAgICAgICAvLyBnaXZlIHVwIGFuZCByZXR1cm4gdGhlIHVuZGVjb2RlZCBvcmlnaW5hbCBzdHJpbmdcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy84N1xuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzkyXG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBmb3IgKF9wYXJ0IGluIF9wYXJ0cykge1xuICAgIFVSSVtfcGFydCArICdQYXRoU2VnbWVudCddID0gZ2VuZXJhdGVBY2Nlc3NvcigncGF0aG5hbWUnLCBfcGFydHNbX3BhcnRdKTtcbiAgICBVUklbX3BhcnQgKyAnVXJuUGF0aFNlZ21lbnQnXSA9IGdlbmVyYXRlQWNjZXNzb3IoJ3VybnBhdGgnLCBfcGFydHNbX3BhcnRdKTtcbiAgfVxuXG4gIHZhciBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbiA9IGZ1bmN0aW9uKF9zZXAsIF9jb2RpbmdGdW5jTmFtZSwgX2lubmVyQ29kaW5nRnVuY05hbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICAvLyBXaHkgcGFzcyBpbiBuYW1lcyBvZiBmdW5jdGlvbnMsIHJhdGhlciB0aGFuIHRoZSBmdW5jdGlvbiBvYmplY3RzIHRoZW1zZWx2ZXM/IFRoZVxuICAgICAgLy8gZGVmaW5pdGlvbnMgb2Ygc29tZSBmdW5jdGlvbnMgKGJ1dCBpbiBwYXJ0aWN1bGFyLCBVUkkuZGVjb2RlKSB3aWxsIG9jY2FzaW9uYWxseSBjaGFuZ2UgZHVlXG4gICAgICAvLyB0byBVUkkuanMgaGF2aW5nIElTTzg4NTkgYW5kIFVuaWNvZGUgbW9kZXMuIFBhc3NpbmcgaW4gdGhlIG5hbWUgYW5kIGdldHRpbmcgaXQgd2lsbCBlbnN1cmVcbiAgICAgIC8vIHRoYXQgdGhlIGZ1bmN0aW9ucyB3ZSB1c2UgaGVyZSBhcmUgXCJmcmVzaFwiLlxuICAgICAgdmFyIGFjdHVhbENvZGluZ0Z1bmM7XG4gICAgICBpZiAoIV9pbm5lckNvZGluZ0Z1bmNOYW1lKSB7XG4gICAgICAgIGFjdHVhbENvZGluZ0Z1bmMgPSBVUklbX2NvZGluZ0Z1bmNOYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdHVhbENvZGluZ0Z1bmMgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gVVJJW19jb2RpbmdGdW5jTmFtZV0oVVJJW19pbm5lckNvZGluZ0Z1bmNOYW1lXShzdHJpbmcpKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRzID0gKHN0cmluZyArICcnKS5zcGxpdChfc2VwKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlZ21lbnRzW2ldID0gYWN0dWFsQ29kaW5nRnVuYyhzZWdtZW50c1tpXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWdtZW50cy5qb2luKF9zZXApO1xuICAgIH07XG4gIH07XG5cbiAgLy8gVGhpcyB0YWtlcyBwbGFjZSBvdXRzaWRlIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCwgZS5nLiwgZW5jb2RlVXJuUGF0aCBmdW5jdGlvbnMuXG4gIFVSSS5kZWNvZGVQYXRoID0gZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24oJy8nLCAnZGVjb2RlUGF0aFNlZ21lbnQnKTtcbiAgVVJJLmRlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdkZWNvZGVVcm5QYXRoU2VnbWVudCcpO1xuICBVUkkucmVjb2RlUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCcvJywgJ2VuY29kZVBhdGhTZWdtZW50JywgJ2RlY29kZScpO1xuICBVUkkucmVjb2RlVXJuUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCc6JywgJ2VuY29kZVVyblBhdGhTZWdtZW50JywgJ2RlY29kZScpO1xuXG4gIFVSSS5lbmNvZGVSZXNlcnZlZCA9IGdlbmVyYXRlQWNjZXNzb3IoJ3Jlc2VydmVkJywgJ2VuY29kZScpO1xuXG4gIFVSSS5wYXJzZSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHtcbiAgICB2YXIgcG9zO1xuICAgIGlmICghcGFydHMpIHtcbiAgICAgIHBhcnRzID0ge1xuICAgICAgICBwcmV2ZW50SW52YWxpZEhvc3RuYW1lOiBVUkkucHJldmVudEludmFsaWRIb3N0bmFtZVxuICAgICAgfTtcbiAgICB9XG4gICAgLy8gW3Byb3RvY29sXCI6Ly9cIlt1c2VybmFtZVtcIjpcInBhc3N3b3JkXVwiQFwiXWhvc3RuYW1lW1wiOlwicG9ydF1cIi9cIj9dW3BhdGhdW1wiP1wicXVlcnlzdHJpbmddW1wiI1wiZnJhZ21lbnRdXG5cbiAgICAvLyBleHRyYWN0IGZyYWdtZW50XG4gICAgcG9zID0gc3RyaW5nLmluZGV4T2YoJyMnKTtcbiAgICBpZiAocG9zID4gLTEpIHtcbiAgICAgIC8vIGVzY2FwaW5nP1xuICAgICAgcGFydHMuZnJhZ21lbnQgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpIHx8IG51bGw7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcyk7XG4gICAgfVxuXG4gICAgLy8gZXh0cmFjdCBxdWVyeVxuICAgIHBvcyA9IHN0cmluZy5pbmRleE9mKCc/Jyk7XG4gICAgaWYgKHBvcyA+IC0xKSB7XG4gICAgICAvLyBlc2NhcGluZz9cbiAgICAgIHBhcnRzLnF1ZXJ5ID0gc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxKSB8fCBudWxsO1xuICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpO1xuICAgIH1cblxuICAgIC8vIGV4dHJhY3QgcHJvdG9jb2xcbiAgICBpZiAoc3RyaW5nLnN1YnN0cmluZygwLCAyKSA9PT0gJy8vJykge1xuICAgICAgLy8gcmVsYXRpdmUtc2NoZW1lXG4gICAgICBwYXJ0cy5wcm90b2NvbCA9IG51bGw7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKDIpO1xuICAgICAgLy8gZXh0cmFjdCBcInVzZXI6cGFzc0Bob3N0OnBvcnRcIlxuICAgICAgc3RyaW5nID0gVVJJLnBhcnNlQXV0aG9yaXR5KHN0cmluZywgcGFydHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3MgPSBzdHJpbmcuaW5kZXhPZignOicpO1xuICAgICAgaWYgKHBvcyA+IC0xKSB7XG4gICAgICAgIHBhcnRzLnByb3RvY29sID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpIHx8IG51bGw7XG4gICAgICAgIGlmIChwYXJ0cy5wcm90b2NvbCAmJiAhcGFydHMucHJvdG9jb2wubWF0Y2goVVJJLnByb3RvY29sX2V4cHJlc3Npb24pKSB7XG4gICAgICAgICAgLy8gOiBtYXkgYmUgd2l0aGluIHRoZSBwYXRoXG4gICAgICAgICAgcGFydHMucHJvdG9jb2wgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxLCBwb3MgKyAzKSA9PT0gJy8vJykge1xuICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMyk7XG5cbiAgICAgICAgICAvLyBleHRyYWN0IFwidXNlcjpwYXNzQGhvc3Q6cG9ydFwiXG4gICAgICAgICAgc3RyaW5nID0gVVJJLnBhcnNlQXV0aG9yaXR5KHN0cmluZywgcGFydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSk7XG4gICAgICAgICAgcGFydHMudXJuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHdoYXQncyBsZWZ0IG11c3QgYmUgdGhlIHBhdGhcbiAgICBwYXJ0cy5wYXRoID0gc3RyaW5nO1xuXG4gICAgLy8gYW5kIHdlJ3JlIGRvbmVcbiAgICByZXR1cm4gcGFydHM7XG4gIH07XG4gIFVSSS5wYXJzZUhvc3QgPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7XG4gICAgaWYgKCFzdHJpbmcpIHtcbiAgICAgIHN0cmluZyA9ICcnO1xuICAgIH1cblxuICAgIC8vIENvcHkgY2hyb21lLCBJRSwgb3BlcmEgYmFja3NsYXNoLWhhbmRsaW5nIGJlaGF2aW9yLlxuICAgIC8vIEJhY2sgc2xhc2hlcyBiZWZvcmUgdGhlIHF1ZXJ5IHN0cmluZyBnZXQgY29udmVydGVkIHRvIGZvcndhcmQgc2xhc2hlc1xuICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2Jsb2IvMzg2ZmQyNGY0OWIwZTlkMWE4YTA3NjU5MmE0MDQxNjhmYWVlY2MzNC9saWIvdXJsLmpzI0wxMTUtTDEyNFxuICAgIC8vIFNlZTogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI1OTE2XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvcHVsbC8yMzNcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuXG4gICAgLy8gZXh0cmFjdCBob3N0OnBvcnRcbiAgICB2YXIgcG9zID0gc3RyaW5nLmluZGV4T2YoJy8nKTtcbiAgICB2YXIgYnJhY2tldFBvcztcbiAgICB2YXIgdDtcblxuICAgIGlmIChwb3MgPT09IC0xKSB7XG4gICAgICBwb3MgPSBzdHJpbmcubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmIChzdHJpbmcuY2hhckF0KDApID09PSAnWycpIHtcbiAgICAgIC8vIElQdjYgaG9zdCAtIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtNm1hbi10ZXh0LWFkZHItcmVwcmVzZW50YXRpb24tMDQjc2VjdGlvbi02XG4gICAgICAvLyBJIGNsYWltIG1vc3QgY2xpZW50IHNvZnR3YXJlIGJyZWFrcyBvbiBJUHY2IGFueXdheXMuIFRvIHNpbXBsaWZ5IHRoaW5ncywgVVJJIG9ubHkgYWNjZXB0c1xuICAgICAgLy8gSVB2Nitwb3J0IGluIHRoZSBmb3JtYXQgWzIwMDE6ZGI4OjoxXTo4MCAoZm9yIHRoZSB0aW1lIGJlaW5nKVxuICAgICAgYnJhY2tldFBvcyA9IHN0cmluZy5pbmRleE9mKCddJyk7XG4gICAgICBwYXJ0cy5ob3N0bmFtZSA9IHN0cmluZy5zdWJzdHJpbmcoMSwgYnJhY2tldFBvcykgfHwgbnVsbDtcbiAgICAgIHBhcnRzLnBvcnQgPSBzdHJpbmcuc3Vic3RyaW5nKGJyYWNrZXRQb3MgKyAyLCBwb3MpIHx8IG51bGw7XG4gICAgICBpZiAocGFydHMucG9ydCA9PT0gJy8nKSB7XG4gICAgICAgIHBhcnRzLnBvcnQgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZmlyc3RDb2xvbiA9IHN0cmluZy5pbmRleE9mKCc6Jyk7XG4gICAgICB2YXIgZmlyc3RTbGFzaCA9IHN0cmluZy5pbmRleE9mKCcvJyk7XG4gICAgICB2YXIgbmV4dENvbG9uID0gc3RyaW5nLmluZGV4T2YoJzonLCBmaXJzdENvbG9uICsgMSk7XG4gICAgICBpZiAobmV4dENvbG9uICE9PSAtMSAmJiAoZmlyc3RTbGFzaCA9PT0gLTEgfHwgbmV4dENvbG9uIDwgZmlyc3RTbGFzaCkpIHtcbiAgICAgICAgLy8gSVB2NiBob3N0IGNvbnRhaW5zIG11bHRpcGxlIGNvbG9ucyAtIGJ1dCBubyBwb3J0XG4gICAgICAgIC8vIHRoaXMgbm90YXRpb24gaXMgYWN0dWFsbHkgbm90IGFsbG93ZWQgYnkgUkZDIDM5ODYsIGJ1dCB3ZSdyZSBhIGxpYmVyYWwgcGFyc2VyXG4gICAgICAgIHBhcnRzLmhvc3RuYW1lID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpIHx8IG51bGw7XG4gICAgICAgIHBhcnRzLnBvcnQgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdCA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKS5zcGxpdCgnOicpO1xuICAgICAgICBwYXJ0cy5ob3N0bmFtZSA9IHRbMF0gfHwgbnVsbDtcbiAgICAgICAgcGFydHMucG9ydCA9IHRbMV0gfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocGFydHMuaG9zdG5hbWUgJiYgc3RyaW5nLnN1YnN0cmluZyhwb3MpLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBwb3MrKztcbiAgICAgIHN0cmluZyA9ICcvJyArIHN0cmluZztcbiAgICB9XG5cbiAgICBpZiAocGFydHMucHJldmVudEludmFsaWRIb3N0bmFtZSkge1xuICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUocGFydHMuaG9zdG5hbWUsIHBhcnRzLnByb3RvY29sKTtcbiAgICB9XG5cbiAgICBpZiAocGFydHMucG9ydCkge1xuICAgICAgVVJJLmVuc3VyZVZhbGlkUG9ydChwYXJ0cy5wb3J0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyaW5nLnN1YnN0cmluZyhwb3MpIHx8ICcvJztcbiAgfTtcbiAgVVJJLnBhcnNlQXV0aG9yaXR5ID0gZnVuY3Rpb24oc3RyaW5nLCBwYXJ0cykge1xuICAgIHN0cmluZyA9IFVSSS5wYXJzZVVzZXJpbmZvKHN0cmluZywgcGFydHMpO1xuICAgIHJldHVybiBVUkkucGFyc2VIb3N0KHN0cmluZywgcGFydHMpO1xuICB9O1xuICBVUkkucGFyc2VVc2VyaW5mbyA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHtcbiAgICAvLyBleHRyYWN0IHVzZXJuYW1lOnBhc3N3b3JkXG4gICAgdmFyIGZpcnN0U2xhc2ggPSBzdHJpbmcuaW5kZXhPZignLycpO1xuICAgIHZhciBwb3MgPSBzdHJpbmcubGFzdEluZGV4T2YoJ0AnLCBmaXJzdFNsYXNoID4gLTEgPyBmaXJzdFNsYXNoIDogc3RyaW5nLmxlbmd0aCAtIDEpO1xuICAgIHZhciB0O1xuXG4gICAgLy8gYXV0aG9yaXR5QCBtdXN0IGNvbWUgYmVmb3JlIC9wYXRoXG4gICAgaWYgKHBvcyA+IC0xICYmIChmaXJzdFNsYXNoID09PSAtMSB8fCBwb3MgPCBmaXJzdFNsYXNoKSkge1xuICAgICAgdCA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKS5zcGxpdCgnOicpO1xuICAgICAgcGFydHMudXNlcm5hbWUgPSB0WzBdID8gVVJJLmRlY29kZSh0WzBdKSA6IG51bGw7XG4gICAgICB0LnNoaWZ0KCk7XG4gICAgICBwYXJ0cy5wYXNzd29yZCA9IHRbMF0gPyBVUkkuZGVjb2RlKHQuam9pbignOicpKSA6IG51bGw7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJ0cy51c2VybmFtZSA9IG51bGw7XG4gICAgICBwYXJ0cy5wYXNzd29yZCA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcbiAgVVJJLnBhcnNlUXVlcnkgPSBmdW5jdGlvbihzdHJpbmcsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICBpZiAoIXN0cmluZykge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIC8vIHRocm93IG91dCB0aGUgZnVua3kgYnVzaW5lc3MgLSBcIj9cIltuYW1lXCI9XCJ2YWx1ZVwiJlwiXStcbiAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvJisvZywgJyYnKS5yZXBsYWNlKC9eXFw/KiYqfCYrJC9nLCAnJyk7XG5cbiAgICBpZiAoIXN0cmluZykge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHZhciBpdGVtcyA9IHt9O1xuICAgIHZhciBzcGxpdHMgPSBzdHJpbmcuc3BsaXQoJyYnKTtcbiAgICB2YXIgbGVuZ3RoID0gc3BsaXRzLmxlbmd0aDtcbiAgICB2YXIgdiwgbmFtZSwgdmFsdWU7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2ID0gc3BsaXRzW2ldLnNwbGl0KCc9Jyk7XG4gICAgICBuYW1lID0gVVJJLmRlY29kZVF1ZXJ5KHYuc2hpZnQoKSwgZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgICAvLyBubyBcIj1cIiBpcyBudWxsIGFjY29yZGluZyB0byBodHRwOi8vZHZjcy53My5vcmcvaGcvdXJsL3Jhdy1maWxlL3RpcC9PdmVydmlldy5odG1sI2NvbGxlY3QtdXJsLXBhcmFtZXRlcnNcbiAgICAgIHZhbHVlID0gdi5sZW5ndGggPyBVUkkuZGVjb2RlUXVlcnkodi5qb2luKCc9JyksIGVzY2FwZVF1ZXJ5U3BhY2UpIDogbnVsbDtcblxuICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZW1zLCBuYW1lKSkge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW1zW25hbWVdID09PSAnc3RyaW5nJyB8fCBpdGVtc1tuYW1lXSA9PT0gbnVsbCkge1xuICAgICAgICAgIGl0ZW1zW25hbWVdID0gW2l0ZW1zW25hbWVdXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGl0ZW1zW25hbWVdLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXM7XG4gIH07XG5cbiAgVVJJLmJ1aWxkID0gZnVuY3Rpb24ocGFydHMpIHtcbiAgICB2YXIgdCA9ICcnO1xuXG4gICAgaWYgKHBhcnRzLnByb3RvY29sKSB7XG4gICAgICB0ICs9IHBhcnRzLnByb3RvY29sICsgJzonO1xuICAgIH1cblxuICAgIGlmICghcGFydHMudXJuICYmICh0IHx8IHBhcnRzLmhvc3RuYW1lKSkge1xuICAgICAgdCArPSAnLy8nO1xuICAgIH1cblxuICAgIHQgKz0gKFVSSS5idWlsZEF1dGhvcml0eShwYXJ0cykgfHwgJycpO1xuXG4gICAgaWYgKHR5cGVvZiBwYXJ0cy5wYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHBhcnRzLnBhdGguY2hhckF0KDApICE9PSAnLycgJiYgdHlwZW9mIHBhcnRzLmhvc3RuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICB0ICs9ICcvJztcbiAgICAgIH1cblxuICAgICAgdCArPSBwYXJ0cy5wYXRoO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcGFydHMucXVlcnkgPT09ICdzdHJpbmcnICYmIHBhcnRzLnF1ZXJ5KSB7XG4gICAgICB0ICs9ICc/JyArIHBhcnRzLnF1ZXJ5O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcGFydHMuZnJhZ21lbnQgPT09ICdzdHJpbmcnICYmIHBhcnRzLmZyYWdtZW50KSB7XG4gICAgICB0ICs9ICcjJyArIHBhcnRzLmZyYWdtZW50O1xuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfTtcbiAgVVJJLmJ1aWxkSG9zdCA9IGZ1bmN0aW9uKHBhcnRzKSB7XG4gICAgdmFyIHQgPSAnJztcblxuICAgIGlmICghcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9IGVsc2UgaWYgKFVSSS5pcDZfZXhwcmVzc2lvbi50ZXN0KHBhcnRzLmhvc3RuYW1lKSkge1xuICAgICAgdCArPSAnWycgKyBwYXJ0cy5ob3N0bmFtZSArICddJztcbiAgICB9IGVsc2Uge1xuICAgICAgdCArPSBwYXJ0cy5ob3N0bmFtZTtcbiAgICB9XG5cbiAgICBpZiAocGFydHMucG9ydCkge1xuICAgICAgdCArPSAnOicgKyBwYXJ0cy5wb3J0O1xuICAgIH1cblxuICAgIHJldHVybiB0O1xuICB9O1xuICBVUkkuYnVpbGRBdXRob3JpdHkgPSBmdW5jdGlvbihwYXJ0cykge1xuICAgIHJldHVybiBVUkkuYnVpbGRVc2VyaW5mbyhwYXJ0cykgKyBVUkkuYnVpbGRIb3N0KHBhcnRzKTtcbiAgfTtcbiAgVVJJLmJ1aWxkVXNlcmluZm8gPSBmdW5jdGlvbihwYXJ0cykge1xuICAgIHZhciB0ID0gJyc7XG5cbiAgICBpZiAocGFydHMudXNlcm5hbWUpIHtcbiAgICAgIHQgKz0gVVJJLmVuY29kZShwYXJ0cy51c2VybmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHBhcnRzLnBhc3N3b3JkKSB7XG4gICAgICB0ICs9ICc6JyArIFVSSS5lbmNvZGUocGFydHMucGFzc3dvcmQpO1xuICAgIH1cblxuICAgIGlmICh0KSB7XG4gICAgICB0ICs9ICdAJztcbiAgICB9XG5cbiAgICByZXR1cm4gdDtcbiAgfTtcbiAgVVJJLmJ1aWxkUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBkdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICAvLyBhY2NvcmRpbmcgdG8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NiBvciBodHRwOi8vbGFicy5hcGFjaGUub3JnL3dlYmFyY2gvdXJpL3JmYy9yZmMzOTg2Lmh0bWxcbiAgICAvLyBiZWluZyDCuy0uX34hJCYnKCkqKyw7PTpALz/CqyAlSEVYIGFuZCBhbG51bSBhcmUgYWxsb3dlZFxuICAgIC8vIHRoZSBSRkMgZXhwbGljaXRseSBzdGF0ZXMgPy9mb28gYmVpbmcgYSB2YWxpZCB1c2UgY2FzZSwgbm8gbWVudGlvbiBvZiBwYXJhbWV0ZXIgc3ludGF4IVxuICAgIC8vIFVSSS5qcyB0cmVhdHMgdGhlIHF1ZXJ5IHN0cmluZyBhcyBiZWluZyBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcbiAgICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MC9pbnRlcmFjdC9mb3Jtcy5odG1sI2Zvcm0tY29udGVudC10eXBlXG5cbiAgICB2YXIgdCA9ICcnO1xuICAgIHZhciB1bmlxdWUsIGtleSwgaSwgbGVuZ3RoO1xuICAgIGZvciAoa2V5IGluIGRhdGEpIHtcbiAgICAgIGlmIChoYXNPd24uY2FsbChkYXRhLCBrZXkpICYmIGtleSkge1xuICAgICAgICBpZiAoaXNBcnJheShkYXRhW2tleV0pKSB7XG4gICAgICAgICAgdW5pcXVlID0ge307XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZGF0YVtrZXldLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZGF0YVtrZXldW2ldICE9PSB1bmRlZmluZWQgJiYgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHQgKz0gJyYnICsgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIoa2V5LCBkYXRhW2tleV1baV0sIGVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgICAgICAgICAgICBpZiAoZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdW5pcXVlW2RhdGFba2V5XVtpXSArICcnXSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0ICs9ICcmJyArIFVSSS5idWlsZFF1ZXJ5UGFyYW1ldGVyKGtleSwgZGF0YVtrZXldLCBlc2NhcGVRdWVyeVNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0LnN1YnN0cmluZygxKTtcbiAgfTtcbiAgVVJJLmJ1aWxkUXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkge1xuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy1odG1sNDAvaW50ZXJhY3QvZm9ybXMuaHRtbCNmb3JtLWNvbnRlbnQtdHlwZSAtLSBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcbiAgICAvLyBkb24ndCBhcHBlbmQgXCI9XCIgZm9yIG51bGwgdmFsdWVzLCBhY2NvcmRpbmcgdG8gaHR0cDovL2R2Y3MudzMub3JnL2hnL3VybC9yYXctZmlsZS90aXAvT3ZlcnZpZXcuaHRtbCN1cmwtcGFyYW1ldGVyLXNlcmlhbGl6YXRpb25cbiAgICByZXR1cm4gVVJJLmVuY29kZVF1ZXJ5KG5hbWUsIGVzY2FwZVF1ZXJ5U3BhY2UpICsgKHZhbHVlICE9PSBudWxsID8gJz0nICsgVVJJLmVuY29kZVF1ZXJ5KHZhbHVlLCBlc2NhcGVRdWVyeVNwYWNlKSA6ICcnKTtcbiAgfTtcblxuICBVUkkuYWRkUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7XG4gICAgICAgICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoZGF0YVtuYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRhdGFbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YVtuYW1lXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGF0YVtuYW1lXSA9IFtkYXRhW25hbWVdXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgICB9XG5cbiAgICAgIGRhdGFbbmFtZV0gPSAoZGF0YVtuYW1lXSB8fCBbXSkuY29uY2F0KHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXInKTtcbiAgICB9XG4gIH07XG5cbiAgVVJJLnNldFF1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkge1xuICAgICAgICAgIFVSSS5zZXRRdWVyeShkYXRhLCBrZXksIG5hbWVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgZGF0YVtuYW1lXSA9IHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5zZXRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7XG4gICAgfVxuICB9O1xuXG4gIFVSSS5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIGksIGxlbmd0aCwga2V5O1xuXG4gICAgaWYgKGlzQXJyYXkobmFtZSkpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG5hbWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGF0YVtuYW1lW2ldXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGdldFR5cGUobmFtZSkgPT09ICdSZWdFeHAnKSB7XG4gICAgICBmb3IgKGtleSBpbiBkYXRhKSB7XG4gICAgICAgIGlmIChuYW1lLnRlc3Qoa2V5KSkge1xuICAgICAgICAgIGRhdGFba2V5XSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKGtleSBpbiBuYW1lKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7XG4gICAgICAgICAgVVJJLnJlbW92ZVF1ZXJ5KGRhdGEsIGtleSwgbmFtZVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZ2V0VHlwZSh2YWx1ZSkgPT09ICdSZWdFeHAnKSB7XG4gICAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pICYmIHZhbHVlLnRlc3QoZGF0YVtuYW1lXSkpIHtcbiAgICAgICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFbbmFtZV0gPT09IFN0cmluZyh2YWx1ZSkgJiYgKCFpc0FycmF5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IDEpKSB7XG4gICAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KGRhdGFbbmFtZV0pKSB7XG4gICAgICAgICAgZGF0YVtuYW1lXSA9IGZpbHRlckFycmF5VmFsdWVzKGRhdGFbbmFtZV0sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YVtuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVVJJLnJlbW92ZVF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZywgUmVnRXhwIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXInKTtcbiAgICB9XG4gIH07XG4gIFVSSS5oYXNRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSkge1xuICAgIHN3aXRjaCAoZ2V0VHlwZShuYW1lKSkge1xuICAgICAgY2FzZSAnU3RyaW5nJzpcbiAgICAgICAgLy8gTm90aGluZyB0byBkbyBoZXJlXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdSZWdFeHAnOlxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgIGlmIChoYXNPd24uY2FsbChkYXRhLCBrZXkpKSB7XG4gICAgICAgICAgICBpZiAobmFtZS50ZXN0KGtleSkgJiYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgVVJJLmhhc1F1ZXJ5KGRhdGEsIGtleSwgdmFsdWUpKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgIGNhc2UgJ09iamVjdCc6XG4gICAgICAgIGZvciAodmFyIF9rZXkgaW4gbmFtZSkge1xuICAgICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBfa2V5KSkge1xuICAgICAgICAgICAgaWYgKCFVUkkuaGFzUXVlcnkoZGF0YSwgX2tleSwgbmFtZVtfa2V5XSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIGEgc3RyaW5nLCByZWd1bGFyIGV4cHJlc3Npb24gb3Igb2JqZWN0IGFzIHRoZSBuYW1lIHBhcmFtZXRlcicpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZ2V0VHlwZSh2YWx1ZSkpIHtcbiAgICAgIGNhc2UgJ1VuZGVmaW5lZCc6XG4gICAgICAgIC8vIHRydWUgaWYgZXhpc3RzIChidXQgbWF5IGJlIGVtcHR5KVxuICAgICAgICByZXR1cm4gbmFtZSBpbiBkYXRhOyAvLyBkYXRhW25hbWVdICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgIGNhc2UgJ0Jvb2xlYW4nOlxuICAgICAgICAvLyB0cnVlIGlmIGV4aXN0cyBhbmQgbm9uLWVtcHR5XG4gICAgICAgIHZhciBfYm9vbHkgPSBCb29sZWFuKGlzQXJyYXkoZGF0YVtuYW1lXSkgPyBkYXRhW25hbWVdLmxlbmd0aCA6IGRhdGFbbmFtZV0pO1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IF9ib29seTtcblxuICAgICAgY2FzZSAnRnVuY3Rpb24nOlxuICAgICAgICAvLyBhbGxvdyBjb21wbGV4IGNvbXBhcmlzb25cbiAgICAgICAgcmV0dXJuICEhdmFsdWUoZGF0YVtuYW1lXSwgbmFtZSwgZGF0YSk7XG5cbiAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9wID0gd2l0aGluQXJyYXkgPyBhcnJheUNvbnRhaW5zIDogYXJyYXlzRXF1YWw7XG4gICAgICAgIHJldHVybiBvcChkYXRhW25hbWVdLCB2YWx1ZSk7XG5cbiAgICAgIGNhc2UgJ1JlZ0V4cCc6XG4gICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSkge1xuICAgICAgICAgIHJldHVybiBCb29sZWFuKGRhdGFbbmFtZV0gJiYgZGF0YVtuYW1lXS5tYXRjaCh2YWx1ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF3aXRoaW5BcnJheSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcnJheUNvbnRhaW5zKGRhdGFbbmFtZV0sIHZhbHVlKTtcblxuICAgICAgY2FzZSAnTnVtYmVyJzpcbiAgICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlICdTdHJpbmcnOlxuICAgICAgICBpZiAoIWlzQXJyYXkoZGF0YVtuYW1lXSkpIHtcbiAgICAgICAgICByZXR1cm4gZGF0YVtuYW1lXSA9PT0gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXdpdGhpbkFycmF5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFycmF5Q29udGFpbnMoZGF0YVtuYW1lXSwgdmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuaGFzUXVlcnkoKSBhY2NlcHRzIHVuZGVmaW5lZCwgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIsIFJlZ0V4cCwgRnVuY3Rpb24gYXMgdGhlIHZhbHVlIHBhcmFtZXRlcicpO1xuICAgIH1cbiAgfTtcblxuXG4gIFVSSS5qb2luUGF0aHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5wdXQgPSBbXTtcbiAgICB2YXIgc2VnbWVudHMgPSBbXTtcbiAgICB2YXIgbm9uRW1wdHlTZWdtZW50cyA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHVybCA9IG5ldyBVUkkoYXJndW1lbnRzW2ldKTtcbiAgICAgIGlucHV0LnB1c2godXJsKTtcbiAgICAgIHZhciBfc2VnbWVudHMgPSB1cmwuc2VnbWVudCgpO1xuICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBfc2VnbWVudHMubGVuZ3RoOyBzKyspIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfc2VnbWVudHNbc10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgc2VnbWVudHMucHVzaChfc2VnbWVudHNbc10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF9zZWdtZW50c1tzXSkge1xuICAgICAgICAgIG5vbkVtcHR5U2VnbWVudHMrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghc2VnbWVudHMubGVuZ3RoIHx8ICFub25FbXB0eVNlZ21lbnRzKSB7XG4gICAgICByZXR1cm4gbmV3IFVSSSgnJyk7XG4gICAgfVxuXG4gICAgdmFyIHVyaSA9IG5ldyBVUkkoJycpLnNlZ21lbnQoc2VnbWVudHMpO1xuXG4gICAgaWYgKGlucHV0WzBdLnBhdGgoKSA9PT0gJycgfHwgaW5wdXRbMF0ucGF0aCgpLnNsaWNlKDAsIDEpID09PSAnLycpIHtcbiAgICAgIHVyaS5wYXRoKCcvJyArIHVyaS5wYXRoKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB1cmkubm9ybWFsaXplKCk7XG4gIH07XG5cbiAgVVJJLmNvbW1vblBhdGggPSBmdW5jdGlvbihvbmUsIHR3bykge1xuICAgIHZhciBsZW5ndGggPSBNYXRoLm1pbihvbmUubGVuZ3RoLCB0d28ubGVuZ3RoKTtcbiAgICB2YXIgcG9zO1xuXG4gICAgLy8gZmluZCBmaXJzdCBub24tbWF0Y2hpbmcgY2hhcmFjdGVyXG4gICAgZm9yIChwb3MgPSAwOyBwb3MgPCBsZW5ndGg7IHBvcysrKSB7XG4gICAgICBpZiAob25lLmNoYXJBdChwb3MpICE9PSB0d28uY2hhckF0KHBvcykpIHtcbiAgICAgICAgcG9zLS07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3MgPCAxKSB7XG4gICAgICByZXR1cm4gb25lLmNoYXJBdCgwKSA9PT0gdHdvLmNoYXJBdCgwKSAmJiBvbmUuY2hhckF0KDApID09PSAnLycgPyAnLycgOiAnJztcbiAgICB9XG5cbiAgICAvLyByZXZlcnQgdG8gbGFzdCAvXG4gICAgaWYgKG9uZS5jaGFyQXQocG9zKSAhPT0gJy8nIHx8IHR3by5jaGFyQXQocG9zKSAhPT0gJy8nKSB7XG4gICAgICBwb3MgPSBvbmUuc3Vic3RyaW5nKDAsIHBvcykubGFzdEluZGV4T2YoJy8nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb25lLnN1YnN0cmluZygwLCBwb3MgKyAxKTtcbiAgfTtcblxuICBVUkkud2l0aGluU3RyaW5nID0gZnVuY3Rpb24oc3RyaW5nLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgdmFyIF9zdGFydCA9IG9wdGlvbnMuc3RhcnQgfHwgVVJJLmZpbmRVcmkuc3RhcnQ7XG4gICAgdmFyIF9lbmQgPSBvcHRpb25zLmVuZCB8fCBVUkkuZmluZFVyaS5lbmQ7XG4gICAgdmFyIF90cmltID0gb3B0aW9ucy50cmltIHx8IFVSSS5maW5kVXJpLnRyaW07XG4gICAgdmFyIF9wYXJlbnMgPSBvcHRpb25zLnBhcmVucyB8fCBVUkkuZmluZFVyaS5wYXJlbnM7XG4gICAgdmFyIF9hdHRyaWJ1dGVPcGVuID0gL1thLXowLTktXT1bXCInXT8kL2k7XG5cbiAgICBfc3RhcnQubGFzdEluZGV4ID0gMDtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgdmFyIG1hdGNoID0gX3N0YXJ0LmV4ZWMoc3RyaW5nKTtcbiAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydCA9IG1hdGNoLmluZGV4O1xuICAgICAgaWYgKG9wdGlvbnMuaWdub3JlSHRtbCkge1xuICAgICAgICAvLyBhdHRyaWJ1dChlPVtcIiddPyQpXG4gICAgICAgIHZhciBhdHRyaWJ1dGVPcGVuID0gc3RyaW5nLnNsaWNlKE1hdGgubWF4KHN0YXJ0IC0gMywgMCksIHN0YXJ0KTtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZU9wZW4gJiYgX2F0dHJpYnV0ZU9wZW4udGVzdChhdHRyaWJ1dGVPcGVuKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBlbmQgPSBzdGFydCArIHN0cmluZy5zbGljZShzdGFydCkuc2VhcmNoKF9lbmQpO1xuICAgICAgdmFyIHNsaWNlID0gc3RyaW5nLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgLy8gbWFrZSBzdXJlIHdlIGluY2x1ZGUgd2VsbCBiYWxhbmNlZCBwYXJlbnNcbiAgICAgIHZhciBwYXJlbnNFbmQgPSAtMTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBwYXJlbnNNYXRjaCA9IF9wYXJlbnMuZXhlYyhzbGljZSk7XG4gICAgICAgIGlmICghcGFyZW5zTWF0Y2gpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXJlbnNNYXRjaEVuZCA9IHBhcmVuc01hdGNoLmluZGV4ICsgcGFyZW5zTWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICBwYXJlbnNFbmQgPSBNYXRoLm1heChwYXJlbnNFbmQsIHBhcmVuc01hdGNoRW5kKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVuc0VuZCA+IC0xKSB7XG4gICAgICAgIHNsaWNlID0gc2xpY2Uuc2xpY2UoMCwgcGFyZW5zRW5kKSArIHNsaWNlLnNsaWNlKHBhcmVuc0VuZCkucmVwbGFjZShfdHJpbSwgJycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpY2UgPSBzbGljZS5yZXBsYWNlKF90cmltLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzbGljZS5sZW5ndGggPD0gbWF0Y2hbMF0ubGVuZ3RoKSB7XG4gICAgICAgIC8vIHRoZSBleHRyYWN0IG9ubHkgY29udGFpbnMgdGhlIHN0YXJ0aW5nIG1hcmtlciBvZiBhIFVSSSxcbiAgICAgICAgLy8gZS5nLiBcInd3d1wiIG9yIFwiaHR0cDovL1wiXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5pZ25vcmUgJiYgb3B0aW9ucy5pZ25vcmUudGVzdChzbGljZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGVuZCA9IHN0YXJ0ICsgc2xpY2UubGVuZ3RoO1xuICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKHNsaWNlLCBzdGFydCwgZW5kLCBzdHJpbmcpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIF9zdGFydC5sYXN0SW5kZXggPSBlbmQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQgPSBTdHJpbmcocmVzdWx0KTtcbiAgICAgIHN0cmluZyA9IHN0cmluZy5zbGljZSgwLCBzdGFydCkgKyByZXN1bHQgKyBzdHJpbmcuc2xpY2UoZW5kKTtcbiAgICAgIF9zdGFydC5sYXN0SW5kZXggPSBzdGFydCArIHJlc3VsdC5sZW5ndGg7XG4gICAgfVxuXG4gICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfTtcblxuICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSA9IGZ1bmN0aW9uKHYsIHByb3RvY29sKSB7XG4gICAgLy8gVGhlb3JldGljYWxseSBVUklzIGFsbG93IHBlcmNlbnQtZW5jb2RpbmcgaW4gSG9zdG5hbWVzIChhY2NvcmRpbmcgdG8gUkZDIDM5ODYpXG4gICAgLy8gdGhleSBhcmUgbm90IHBhcnQgb2YgRE5TIGFuZCB0aGVyZWZvcmUgaWdub3JlZCBieSBVUkkuanNcblxuICAgIHZhciBoYXNIb3N0bmFtZSA9ICEhdjsgLy8gbm90IG51bGwgYW5kIG5vdCBhbiBlbXB0eSBzdHJpbmdcbiAgICB2YXIgaGFzUHJvdG9jb2wgPSAhIXByb3RvY29sO1xuICAgIHZhciByZWplY3RFbXB0eUhvc3RuYW1lID0gZmFsc2U7XG5cbiAgICBpZiAoaGFzUHJvdG9jb2wpIHtcbiAgICAgIHJlamVjdEVtcHR5SG9zdG5hbWUgPSBhcnJheUNvbnRhaW5zKFVSSS5ob3N0UHJvdG9jb2xzLCBwcm90b2NvbCk7XG4gICAgfVxuXG4gICAgaWYgKHJlamVjdEVtcHR5SG9zdG5hbWUgJiYgIWhhc0hvc3RuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBjYW5ub3QgYmUgZW1wdHksIGlmIHByb3RvY29sIGlzICcgKyBwcm90b2NvbCk7XG4gICAgfSBlbHNlIGlmICh2ICYmIHYubWF0Y2goVVJJLmludmFsaWRfaG9zdG5hbWVfY2hhcmFjdGVycykpIHtcbiAgICAgIC8vIHRlc3QgcHVueWNvZGVcbiAgICAgIGlmICghcHVueWNvZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgXCInICsgdiArICdcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tOl9dIGFuZCBQdW55Y29kZS5qcyBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgICB9XG4gICAgICBpZiAocHVueWNvZGUudG9BU0NJSSh2KS5tYXRjaChVUkkuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBcIicgKyB2ICsgJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li06X10nKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgVVJJLmVuc3VyZVZhbGlkUG9ydCA9IGZ1bmN0aW9uICh2KSB7XG4gICAgaWYgKCF2KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBvcnQgPSBOdW1iZXIodik7XG4gICAgaWYgKGlzSW50ZWdlcihwb3J0KSAmJiAocG9ydCA+IDApICYmIChwb3J0IDwgNjU1MzYpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUG9ydCBcIicgKyB2ICsgJ1wiIGlzIG5vdCBhIHZhbGlkIHBvcnQnKTtcbiAgfTtcblxuICAvLyBub0NvbmZsaWN0XG4gIFVSSS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24ocmVtb3ZlQWxsKSB7XG4gICAgaWYgKHJlbW92ZUFsbCkge1xuICAgICAgdmFyIHVuY29uZmxpY3RlZCA9IHtcbiAgICAgICAgVVJJOiB0aGlzLm5vQ29uZmxpY3QoKVxuICAgICAgfTtcblxuICAgICAgaWYgKHJvb3QuVVJJVGVtcGxhdGUgJiYgdHlwZW9mIHJvb3QuVVJJVGVtcGxhdGUubm9Db25mbGljdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB1bmNvbmZsaWN0ZWQuVVJJVGVtcGxhdGUgPSByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvb3QuSVB2NiAmJiB0eXBlb2Ygcm9vdC5JUHY2Lm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdW5jb25mbGljdGVkLklQdjYgPSByb290LklQdjYubm9Db25mbGljdCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAocm9vdC5TZWNvbmRMZXZlbERvbWFpbnMgJiYgdHlwZW9mIHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdW5jb25mbGljdGVkLlNlY29uZExldmVsRG9tYWlucyA9IHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zLm5vQ29uZmxpY3QoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuY29uZmxpY3RlZDtcbiAgICB9IGVsc2UgaWYgKHJvb3QuVVJJID09PSB0aGlzKSB7XG4gICAgICByb290LlVSSSA9IF9VUkk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC5idWlsZCA9IGZ1bmN0aW9uKGRlZmVyQnVpbGQpIHtcbiAgICBpZiAoZGVmZXJCdWlsZCA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoZGVmZXJCdWlsZCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX2RlZmVycmVkX2J1aWxkKSB7XG4gICAgICB0aGlzLl9zdHJpbmcgPSBVUkkuYnVpbGQodGhpcy5fcGFydHMpO1xuICAgICAgdGhpcy5fZGVmZXJyZWRfYnVpbGQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBwLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBVUkkodGhpcyk7XG4gIH07XG5cbiAgcC52YWx1ZU9mID0gcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkKGZhbHNlKS5fc3RyaW5nO1xuICB9O1xuXG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcihfcGFydCl7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJ0c1tfcGFydF0gfHwgJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9wYXJ0c1tfcGFydF0gPSB2IHx8IG51bGw7XG4gICAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlUHJlZml4QWNjZXNzb3IoX3BhcnQsIF9rZXkpe1xuICAgIHJldHVybiBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFydHNbX3BhcnRdIHx8ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHYgIT09IG51bGwpIHtcbiAgICAgICAgICB2ID0gdiArICcnO1xuICAgICAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gX2tleSkge1xuICAgICAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BhcnRzW19wYXJ0XSA9IHY7XG4gICAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHAucHJvdG9jb2wgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdwcm90b2NvbCcpO1xuICBwLnVzZXJuYW1lID0gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcigndXNlcm5hbWUnKTtcbiAgcC5wYXNzd29yZCA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3Bhc3N3b3JkJyk7XG4gIHAuaG9zdG5hbWUgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdob3N0bmFtZScpO1xuICBwLnBvcnQgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdwb3J0Jyk7XG4gIHAucXVlcnkgPSBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKCdxdWVyeScsICc/Jyk7XG4gIHAuZnJhZ21lbnQgPSBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKCdmcmFnbWVudCcsICcjJyk7XG5cbiAgcC5zZWFyY2ggPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIHZhciB0ID0gdGhpcy5xdWVyeSh2LCBidWlsZCk7XG4gICAgcmV0dXJuIHR5cGVvZiB0ID09PSAnc3RyaW5nJyAmJiB0Lmxlbmd0aCA/ICgnPycgKyB0KSA6IHQ7XG4gIH07XG4gIHAuaGFzaCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgdmFyIHQgPSB0aGlzLmZyYWdtZW50KHYsIGJ1aWxkKTtcbiAgICByZXR1cm4gdHlwZW9mIHQgPT09ICdzdHJpbmcnICYmIHQubGVuZ3RoID8gKCcjJyArIHQpIDogdDtcbiAgfTtcblxuICBwLnBhdGhuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHtcbiAgICAgIHZhciByZXMgPSB0aGlzLl9wYXJ0cy5wYXRoIHx8ICh0aGlzLl9wYXJ0cy5ob3N0bmFtZSA/ICcvJyA6ICcnKTtcbiAgICAgIHJldHVybiB2ID8gKHRoaXMuX3BhcnRzLnVybiA/IFVSSS5kZWNvZGVVcm5QYXRoIDogVVJJLmRlY29kZVBhdGgpKHJlcykgOiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHYgPyBVUkkucmVjb2RlVXJuUGF0aCh2KSA6ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHYgPyBVUkkucmVjb2RlUGF0aCh2KSA6ICcvJztcbiAgICAgIH1cbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgcC5wYXRoID0gcC5wYXRobmFtZTtcbiAgcC5ocmVmID0gZnVuY3Rpb24oaHJlZiwgYnVpbGQpIHtcbiAgICB2YXIga2V5O1xuXG4gICAgaWYgKGhyZWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zdHJpbmcgPSAnJztcbiAgICB0aGlzLl9wYXJ0cyA9IFVSSS5fcGFydHMoKTtcblxuICAgIHZhciBfVVJJID0gaHJlZiBpbnN0YW5jZW9mIFVSSTtcbiAgICB2YXIgX29iamVjdCA9IHR5cGVvZiBocmVmID09PSAnb2JqZWN0JyAmJiAoaHJlZi5ob3N0bmFtZSB8fCBocmVmLnBhdGggfHwgaHJlZi5wYXRobmFtZSk7XG4gICAgaWYgKGhyZWYubm9kZU5hbWUpIHtcbiAgICAgIHZhciBhdHRyaWJ1dGUgPSBVUkkuZ2V0RG9tQXR0cmlidXRlKGhyZWYpO1xuICAgICAgaHJlZiA9IGhyZWZbYXR0cmlidXRlXSB8fCAnJztcbiAgICAgIF9vYmplY3QgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyB3aW5kb3cubG9jYXRpb24gaXMgcmVwb3J0ZWQgdG8gYmUgYW4gb2JqZWN0LCBidXQgaXQncyBub3QgdGhlIHNvcnRcbiAgICAvLyBvZiBvYmplY3Qgd2UncmUgbG9va2luZyBmb3I6XG4gICAgLy8gKiBsb2NhdGlvbi5wcm90b2NvbCBlbmRzIHdpdGggYSBjb2xvblxuICAgIC8vICogbG9jYXRpb24ucXVlcnkgIT0gb2JqZWN0LnNlYXJjaFxuICAgIC8vICogbG9jYXRpb24uaGFzaCAhPSBvYmplY3QuZnJhZ21lbnRcbiAgICAvLyBzaW1wbHkgc2VyaWFsaXppbmcgdGhlIHVua25vd24gb2JqZWN0IHNob3VsZCBkbyB0aGUgdHJpY2tcbiAgICAvLyAoZm9yIGxvY2F0aW9uLCBub3QgZm9yIGV2ZXJ5dGhpbmcuLi4pXG4gICAgaWYgKCFfVVJJICYmIF9vYmplY3QgJiYgaHJlZi5wYXRobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBocmVmID0gaHJlZi50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaHJlZiA9PT0gJ3N0cmluZycgfHwgaHJlZiBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgdGhpcy5fcGFydHMgPSBVUkkucGFyc2UoU3RyaW5nKGhyZWYpLCB0aGlzLl9wYXJ0cyk7XG4gICAgfSBlbHNlIGlmIChfVVJJIHx8IF9vYmplY3QpIHtcbiAgICAgIHZhciBzcmMgPSBfVVJJID8gaHJlZi5fcGFydHMgOiBocmVmO1xuICAgICAgZm9yIChrZXkgaW4gc3JjKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdxdWVyeScpIHsgY29udGludWU7IH1cbiAgICAgICAgaWYgKGhhc093bi5jYWxsKHRoaXMuX3BhcnRzLCBrZXkpKSB7XG4gICAgICAgICAgdGhpcy5fcGFydHNba2V5XSA9IHNyY1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc3JjLnF1ZXJ5KSB7XG4gICAgICAgIHRoaXMucXVlcnkoc3JjLnF1ZXJ5LCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgaW5wdXQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gaWRlbnRpZmljYXRpb24gYWNjZXNzb3JzXG4gIHAuaXMgPSBmdW5jdGlvbih3aGF0KSB7XG4gICAgdmFyIGlwID0gZmFsc2U7XG4gICAgdmFyIGlwNCA9IGZhbHNlO1xuICAgIHZhciBpcDYgPSBmYWxzZTtcbiAgICB2YXIgbmFtZSA9IGZhbHNlO1xuICAgIHZhciBzbGQgPSBmYWxzZTtcbiAgICB2YXIgaWRuID0gZmFsc2U7XG4gICAgdmFyIHB1bnljb2RlID0gZmFsc2U7XG4gICAgdmFyIHJlbGF0aXZlID0gIXRoaXMuX3BhcnRzLnVybjtcblxuICAgIGlmICh0aGlzLl9wYXJ0cy5ob3N0bmFtZSkge1xuICAgICAgcmVsYXRpdmUgPSBmYWxzZTtcbiAgICAgIGlwNCA9IFVSSS5pcDRfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICAgIGlwNiA9IFVSSS5pcDZfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICAgIGlwID0gaXA0IHx8IGlwNjtcbiAgICAgIG5hbWUgPSAhaXA7XG4gICAgICBzbGQgPSBuYW1lICYmIFNMRCAmJiBTTEQuaGFzKHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICAgIGlkbiA9IG5hbWUgJiYgVVJJLmlkbl9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpO1xuICAgICAgcHVueWNvZGUgPSBuYW1lICYmIFVSSS5wdW55Y29kZV9leHByZXNzaW9uLnRlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpO1xuICAgIH1cblxuICAgIHN3aXRjaCAod2hhdC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgIHJldHVybiByZWxhdGl2ZTtcblxuICAgICAgY2FzZSAnYWJzb2x1dGUnOlxuICAgICAgICByZXR1cm4gIXJlbGF0aXZlO1xuXG4gICAgICAvLyBob3N0bmFtZSBpZGVudGlmaWNhdGlvblxuICAgICAgY2FzZSAnZG9tYWluJzpcbiAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgICByZXR1cm4gbmFtZTtcblxuICAgICAgY2FzZSAnc2xkJzpcbiAgICAgICAgcmV0dXJuIHNsZDtcblxuICAgICAgY2FzZSAnaXAnOlxuICAgICAgICByZXR1cm4gaXA7XG5cbiAgICAgIGNhc2UgJ2lwNCc6XG4gICAgICBjYXNlICdpcHY0JzpcbiAgICAgIGNhc2UgJ2luZXQ0JzpcbiAgICAgICAgcmV0dXJuIGlwNDtcblxuICAgICAgY2FzZSAnaXA2JzpcbiAgICAgIGNhc2UgJ2lwdjYnOlxuICAgICAgY2FzZSAnaW5ldDYnOlxuICAgICAgICByZXR1cm4gaXA2O1xuXG4gICAgICBjYXNlICdpZG4nOlxuICAgICAgICByZXR1cm4gaWRuO1xuXG4gICAgICBjYXNlICd1cmwnOlxuICAgICAgICByZXR1cm4gIXRoaXMuX3BhcnRzLnVybjtcblxuICAgICAgY2FzZSAndXJuJzpcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fcGFydHMudXJuO1xuXG4gICAgICBjYXNlICdwdW55Y29kZSc6XG4gICAgICAgIHJldHVybiBwdW55Y29kZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvLyBjb21wb25lbnQgc3BlY2lmaWMgaW5wdXQgdmFsaWRhdGlvblxuICB2YXIgX3Byb3RvY29sID0gcC5wcm90b2NvbDtcbiAgdmFyIF9wb3J0ID0gcC5wb3J0O1xuICB2YXIgX2hvc3RuYW1lID0gcC5ob3N0bmFtZTtcblxuICBwLnByb3RvY29sID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodikge1xuICAgICAgLy8gYWNjZXB0IHRyYWlsaW5nIDovL1xuICAgICAgdiA9IHYucmVwbGFjZSgvOihcXC9cXC8pPyQvLCAnJyk7XG5cbiAgICAgIGlmICghdi5tYXRjaChVUkkucHJvdG9jb2xfZXhwcmVzc2lvbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvdG9jb2wgXCInICsgdiArICdcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4rLV0gb3IgZG9lc25cXCd0IHN0YXJ0IHdpdGggW0EtWl0nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gX3Byb3RvY29sLmNhbGwodGhpcywgdiwgYnVpbGQpO1xuICB9O1xuICBwLnNjaGVtZSA9IHAucHJvdG9jb2w7XG4gIHAucG9ydCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcztcbiAgICB9XG5cbiAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodiA9PT0gMCkge1xuICAgICAgICB2ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHYpIHtcbiAgICAgICAgdiArPSAnJztcbiAgICAgICAgaWYgKHYuY2hhckF0KDApID09PSAnOicpIHtcbiAgICAgICAgICB2ID0gdi5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cblxuICAgICAgICBVUkkuZW5zdXJlVmFsaWRQb3J0KHYpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gX3BvcnQuY2FsbCh0aGlzLCB2LCBidWlsZCk7XG4gIH07XG4gIHAuaG9zdG5hbWUgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIHggPSB7IHByZXZlbnRJbnZhbGlkSG9zdG5hbWU6IHRoaXMuX3BhcnRzLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUgfTtcbiAgICAgIHZhciByZXMgPSBVUkkucGFyc2VIb3N0KHYsIHgpO1xuICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTtcbiAgICAgIH1cblxuICAgICAgdiA9IHguaG9zdG5hbWU7XG4gICAgICBpZiAodGhpcy5fcGFydHMucHJldmVudEludmFsaWRIb3N0bmFtZSkge1xuICAgICAgICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSh2LCB0aGlzLl9wYXJ0cy5wcm90b2NvbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF9ob3N0bmFtZS5jYWxsKHRoaXMsIHYsIGJ1aWxkKTtcbiAgfTtcblxuICAvLyBjb21wb3VuZCBhY2Nlc3NvcnNcbiAgcC5vcmlnaW4gPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIHByb3RvY29sID0gdGhpcy5wcm90b2NvbCgpO1xuICAgICAgdmFyIGF1dGhvcml0eSA9IHRoaXMuYXV0aG9yaXR5KCk7XG4gICAgICBpZiAoIWF1dGhvcml0eSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAocHJvdG9jb2wgPyBwcm90b2NvbCArICc6Ly8nIDogJycpICsgdGhpcy5hdXRob3JpdHkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG9yaWdpbiA9IFVSSSh2KTtcbiAgICAgIHRoaXNcbiAgICAgICAgLnByb3RvY29sKG9yaWdpbi5wcm90b2NvbCgpKVxuICAgICAgICAuYXV0aG9yaXR5KG9yaWdpbi5hdXRob3JpdHkoKSlcbiAgICAgICAgLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAuaG9zdCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcztcbiAgICB9XG5cbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUgPyBVUkkuYnVpbGRIb3N0KHRoaXMuX3BhcnRzKSA6ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcmVzID0gVVJJLnBhcnNlSG9zdCh2LCB0aGlzLl9wYXJ0cyk7XG4gICAgICBpZiAocmVzICE9PSAnLycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgXCInICsgdiArICdcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAuYXV0aG9yaXR5ID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA/IFVSSS5idWlsZEF1dGhvcml0eSh0aGlzLl9wYXJ0cykgOiAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUF1dGhvcml0eSh2LCB0aGlzLl9wYXJ0cyk7XG4gICAgICBpZiAocmVzICE9PSAnLycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgXCInICsgdiArICdcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tXScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAudXNlcmluZm8gPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIHQgPSBVUkkuYnVpbGRVc2VyaW5mbyh0aGlzLl9wYXJ0cyk7XG4gICAgICByZXR1cm4gdCA/IHQuc3Vic3RyaW5nKDAsIHQubGVuZ3RoIC0xKSA6IHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh2W3YubGVuZ3RoLTFdICE9PSAnQCcpIHtcbiAgICAgICAgdiArPSAnQCc7XG4gICAgICB9XG5cbiAgICAgIFVSSS5wYXJzZVVzZXJpbmZvKHYsIHRoaXMuX3BhcnRzKTtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgcC5yZXNvdXJjZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgdmFyIHBhcnRzO1xuXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMucGF0aCgpICsgdGhpcy5zZWFyY2goKSArIHRoaXMuaGFzaCgpO1xuICAgIH1cblxuICAgIHBhcnRzID0gVVJJLnBhcnNlKHYpO1xuICAgIHRoaXMuX3BhcnRzLnBhdGggPSBwYXJ0cy5wYXRoO1xuICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gcGFydHMucXVlcnk7XG4gICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBwYXJ0cy5mcmFnbWVudDtcbiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gZnJhY3Rpb24gYWNjZXNzb3JzXG4gIHAuc3ViZG9tYWluID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIC8vIGNvbnZlbmllbmNlLCByZXR1cm4gXCJ3d3dcIiBmcm9tIFwid3d3LmV4YW1wbGUub3JnXCJcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICAvLyBncmFiIGRvbWFpbiBhbmQgYWRkIGFub3RoZXIgc2VnbWVudFxuICAgICAgdmFyIGVuZCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aCAtIHRoaXMuZG9tYWluKCkubGVuZ3RoIC0gMTtcbiAgICAgIHJldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoMCwgZW5kKSB8fCAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGggLSB0aGlzLmRvbWFpbigpLmxlbmd0aDtcbiAgICAgIHZhciBzdWIgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoMCwgZSk7XG4gICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoJ14nICsgZXNjYXBlUmVnRXgoc3ViKSk7XG5cbiAgICAgIGlmICh2ICYmIHYuY2hhckF0KHYubGVuZ3RoIC0gMSkgIT09ICcuJykge1xuICAgICAgICB2ICs9ICcuJztcbiAgICAgIH1cblxuICAgICAgaWYgKHYuaW5kZXhPZignOicpICE9PSAtMSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdEb21haW5zIGNhbm5vdCBjb250YWluIGNvbG9ucycpO1xuICAgICAgfVxuXG4gICAgICBpZiAodikge1xuICAgICAgICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSh2LCB0aGlzLl9wYXJ0cy5wcm90b2NvbCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgcC5kb21haW4gPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGJ1aWxkID0gdjtcbiAgICAgIHYgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gY29udmVuaWVuY2UsIHJldHVybiBcImV4YW1wbGUub3JnXCIgZnJvbSBcInd3dy5leGFtcGxlLm9yZ1wiXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgLy8gaWYgaG9zdG5hbWUgY29uc2lzdHMgb2YgMSBvciAyIHNlZ21lbnRzLCBpdCBtdXN0IGJlIHRoZSBkb21haW5cbiAgICAgIHZhciB0ID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubWF0Y2goL1xcLi9nKTtcbiAgICAgIGlmICh0ICYmIHQubGVuZ3RoIDwgMikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGdyYWIgdGxkIGFuZCBhZGQgYW5vdGhlciBzZWdtZW50XG4gICAgICB2YXIgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoIC0gdGhpcy50bGQoYnVpbGQpLmxlbmd0aCAtIDE7XG4gICAgICBlbmQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sYXN0SW5kZXhPZignLicsIGVuZCAtMSkgKyAxO1xuICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhlbmQpIHx8ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXYpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY2Fubm90IHNldCBkb21haW4gZW1wdHknKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYuaW5kZXhPZignOicpICE9PSAtMSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdEb21haW5zIGNhbm5vdCBjb250YWluIGNvbG9ucycpO1xuICAgICAgfVxuXG4gICAgICBVUkkuZW5zdXJlVmFsaWRIb3N0bmFtZSh2LCB0aGlzLl9wYXJ0cy5wcm90b2NvbCk7XG5cbiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkge1xuICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy5kb21haW4oKSkgKyAnJCcpO1xuICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgcC50bGQgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGJ1aWxkID0gdjtcbiAgICAgIHYgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gcmV0dXJuIFwib3JnXCIgZnJvbSBcInd3dy5leGFtcGxlLm9yZ1wiXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgdmFyIHBvcyA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICB2YXIgdGxkID0gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKHBvcyArIDEpO1xuXG4gICAgICBpZiAoYnVpbGQgIT09IHRydWUgJiYgU0xEICYmIFNMRC5saXN0W3RsZC50b0xvd2VyQ2FzZSgpXSkge1xuICAgICAgICByZXR1cm4gU0xELmdldCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSkgfHwgdGxkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGxkO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcmVwbGFjZTtcblxuICAgICAgaWYgKCF2KSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Nhbm5vdCBzZXQgVExEIGVtcHR5Jyk7XG4gICAgICB9IGVsc2UgaWYgKHYubWF0Y2goL1teYS16QS1aMC05LV0vKSkge1xuICAgICAgICBpZiAoU0xEICYmIFNMRC5pcyh2KSkge1xuICAgICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMudGxkKCkpICsgJyQnKTtcbiAgICAgICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVExEIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTldJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdjYW5ub3Qgc2V0IFRMRCBvbiBub24tZG9tYWluIGhvc3QnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMudGxkKCkpICsgJyQnKTtcbiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAuZGlyZWN0b3J5ID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5wYXRoICYmICF0aGlzLl9wYXJ0cy5ob3N0bmFtZSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHtcbiAgICAgICAgcmV0dXJuICcvJztcbiAgICAgIH1cblxuICAgICAgdmFyIGVuZCA9IHRoaXMuX3BhcnRzLnBhdGgubGVuZ3RoIC0gdGhpcy5maWxlbmFtZSgpLmxlbmd0aCAtIDE7XG4gICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCwgZW5kKSB8fCAodGhpcy5fcGFydHMuaG9zdG5hbWUgPyAnLycgOiAnJyk7XG5cbiAgICAgIHJldHVybiB2ID8gVVJJLmRlY29kZVBhdGgocmVzKSA6IHJlcztcblxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZSA9IHRoaXMuX3BhcnRzLnBhdGgubGVuZ3RoIC0gdGhpcy5maWxlbmFtZSgpLmxlbmd0aDtcbiAgICAgIHZhciBkaXJlY3RvcnkgPSB0aGlzLl9wYXJ0cy5wYXRoLnN1YnN0cmluZygwLCBlKTtcbiAgICAgIHZhciByZXBsYWNlID0gbmV3IFJlZ0V4cCgnXicgKyBlc2NhcGVSZWdFeChkaXJlY3RvcnkpKTtcblxuICAgICAgLy8gZnVsbHkgcXVhbGlmaWVyIGRpcmVjdG9yaWVzIGJlZ2luIHdpdGggYSBzbGFzaFxuICAgICAgaWYgKCF0aGlzLmlzKCdyZWxhdGl2ZScpKSB7XG4gICAgICAgIGlmICghdikge1xuICAgICAgICAgIHYgPSAnLyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodi5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgICAgICAgIHYgPSAnLycgKyB2O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGRpcmVjdG9yaWVzIGFsd2F5cyBlbmQgd2l0aCBhIHNsYXNoXG4gICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLycpIHtcbiAgICAgICAgdiArPSAnLyc7XG4gICAgICB9XG5cbiAgICAgIHYgPSBVUkkucmVjb2RlUGF0aCh2KTtcbiAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB0aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UocmVwbGFjZSwgdik7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAuZmlsZW5hbWUgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5wYXRoIHx8IHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHZhciBwb3MgPSB0aGlzLl9wYXJ0cy5wYXRoLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcocG9zKzEpO1xuXG4gICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoU2VnbWVudChyZXMpIDogcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbXV0YXRlZERpcmVjdG9yeSA9IGZhbHNlO1xuXG4gICAgICBpZiAodi5jaGFyQXQoMCkgPT09ICcvJykge1xuICAgICAgICB2ID0gdi5zdWJzdHJpbmcoMSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2Lm1hdGNoKC9cXC4/XFwvLykpIHtcbiAgICAgICAgbXV0YXRlZERpcmVjdG9yeSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCh0aGlzLmZpbGVuYW1lKCkpICsgJyQnKTtcbiAgICAgIHYgPSBVUkkucmVjb2RlUGF0aCh2KTtcbiAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB0aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UocmVwbGFjZSwgdik7XG5cbiAgICAgIGlmIChtdXRhdGVkRGlyZWN0b3J5KSB7XG4gICAgICAgIHRoaXMubm9ybWFsaXplUGF0aChidWlsZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgcC5zdWZmaXggPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSB0cnVlKSB7XG4gICAgICBpZiAoIXRoaXMuX3BhcnRzLnBhdGggfHwgdGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgdmFyIGZpbGVuYW1lID0gdGhpcy5maWxlbmFtZSgpO1xuICAgICAgdmFyIHBvcyA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICB2YXIgcywgcmVzO1xuXG4gICAgICBpZiAocG9zID09PSAtMSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIHN1ZmZpeCBtYXkgb25seSBjb250YWluIGFsbnVtIGNoYXJhY3RlcnMgKHl1cCwgSSBtYWRlIHRoaXMgdXAuKVxuICAgICAgcyA9IGZpbGVuYW1lLnN1YnN0cmluZyhwb3MrMSk7XG4gICAgICByZXMgPSAoL15bYS16MC05JV0rJC9pKS50ZXN0KHMpID8gcyA6ICcnO1xuICAgICAgcmV0dXJuIHYgPyBVUkkuZGVjb2RlUGF0aFNlZ21lbnQocmVzKSA6IHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHYuY2hhckF0KDApID09PSAnLicpIHtcbiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3VmZml4ID0gdGhpcy5zdWZmaXgoKTtcbiAgICAgIHZhciByZXBsYWNlO1xuXG4gICAgICBpZiAoIXN1ZmZpeCkge1xuICAgICAgICBpZiAoIXYpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3BhcnRzLnBhdGggKz0gJy4nICsgVVJJLnJlY29kZVBhdGgodik7XG4gICAgICB9IGVsc2UgaWYgKCF2KSB7XG4gICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KCcuJyArIHN1ZmZpeCkgKyAnJCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgoc3VmZml4KSArICckJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIHYgPSBVUkkucmVjb2RlUGF0aCh2KTtcbiAgICAgICAgdGhpcy5fcGFydHMucGF0aCA9IHRoaXMuX3BhcnRzLnBhdGgucmVwbGFjZShyZXBsYWNlLCB2KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLnNlZ21lbnQgPSBmdW5jdGlvbihzZWdtZW50LCB2LCBidWlsZCkge1xuICAgIHZhciBzZXBhcmF0b3IgPSB0aGlzLl9wYXJ0cy51cm4gPyAnOicgOiAnLyc7XG4gICAgdmFyIHBhdGggPSB0aGlzLnBhdGgoKTtcbiAgICB2YXIgYWJzb2x1dGUgPSBwYXRoLnN1YnN0cmluZygwLCAxKSA9PT0gJy8nO1xuICAgIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoc2VwYXJhdG9yKTtcblxuICAgIGlmIChzZWdtZW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHNlZ21lbnQgIT09ICdudW1iZXInKSB7XG4gICAgICBidWlsZCA9IHY7XG4gICAgICB2ID0gc2VnbWVudDtcbiAgICAgIHNlZ21lbnQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHNlZ21lbnQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc2VnbWVudCAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQmFkIHNlZ21lbnQgXCInICsgc2VnbWVudCArICdcIiwgbXVzdCBiZSAwLWJhc2VkIGludGVnZXInKTtcbiAgICB9XG5cbiAgICBpZiAoYWJzb2x1dGUpIHtcbiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgaWYgKHNlZ21lbnQgPCAwKSB7XG4gICAgICAvLyBhbGxvdyBuZWdhdGl2ZSBpbmRleGVzIHRvIGFkZHJlc3MgZnJvbSB0aGUgZW5kXG4gICAgICBzZWdtZW50ID0gTWF0aC5tYXgoc2VnbWVudHMubGVuZ3RoICsgc2VnbWVudCwgMCk7XG4gICAgfVxuXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IHRydWUgKi9cbiAgICAgIHJldHVybiBzZWdtZW50ID09PSB1bmRlZmluZWRcbiAgICAgICAgPyBzZWdtZW50c1xuICAgICAgICA6IHNlZ21lbnRzW3NlZ21lbnRdO1xuICAgICAgLypqc2hpbnQgbGF4YnJlYWs6IGZhbHNlICovXG4gICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSBudWxsIHx8IHNlZ21lbnRzW3NlZ21lbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChpc0FycmF5KHYpKSB7XG4gICAgICAgIHNlZ21lbnRzID0gW107XG4gICAgICAgIC8vIGNvbGxhcHNlIGVtcHR5IGVsZW1lbnRzIHdpdGhpbiBhcnJheVxuICAgICAgICBmb3IgKHZhciBpPTAsIGw9di5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXZbaV0ubGVuZ3RoICYmICghc2VnbWVudHMubGVuZ3RoIHx8ICFzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLTFdLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWdtZW50cy5sZW5ndGggJiYgIXNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtMV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICBzZWdtZW50cy5wb3AoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWdtZW50cy5wdXNoKHRyaW1TbGFzaGVzKHZbaV0pKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh2IHx8IHR5cGVvZiB2ID09PSAnc3RyaW5nJykge1xuICAgICAgICB2ID0gdHJpbVNsYXNoZXModik7XG4gICAgICAgIGlmIChzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLTFdID09PSAnJykge1xuICAgICAgICAgIC8vIGVtcHR5IHRyYWlsaW5nIGVsZW1lbnRzIGhhdmUgdG8gYmUgb3ZlcndyaXR0ZW5cbiAgICAgICAgICAvLyB0byBwcmV2ZW50IHJlc3VsdHMgc3VjaCBhcyAvZm9vLy9iYXJcbiAgICAgICAgICBzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLTFdID0gdjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWdtZW50cy5wdXNoKHYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh2KSB7XG4gICAgICAgIHNlZ21lbnRzW3NlZ21lbnRdID0gdHJpbVNsYXNoZXModik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWdtZW50cy5zcGxpY2Uoc2VnbWVudCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFic29sdXRlKSB7XG4gICAgICBzZWdtZW50cy51bnNoaWZ0KCcnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXRoKHNlZ21lbnRzLmpvaW4oc2VwYXJhdG9yKSwgYnVpbGQpO1xuICB9O1xuICBwLnNlZ21lbnRDb2RlZCA9IGZ1bmN0aW9uKHNlZ21lbnQsIHYsIGJ1aWxkKSB7XG4gICAgdmFyIHNlZ21lbnRzLCBpLCBsO1xuXG4gICAgaWYgKHR5cGVvZiBzZWdtZW50ICE9PSAnbnVtYmVyJykge1xuICAgICAgYnVpbGQgPSB2O1xuICAgICAgdiA9IHNlZ21lbnQ7XG4gICAgICBzZWdtZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHNlZ21lbnRzID0gdGhpcy5zZWdtZW50KHNlZ21lbnQsIHYsIGJ1aWxkKTtcbiAgICAgIGlmICghaXNBcnJheShzZWdtZW50cykpIHtcbiAgICAgICAgc2VnbWVudHMgPSBzZWdtZW50cyAhPT0gdW5kZWZpbmVkID8gVVJJLmRlY29kZShzZWdtZW50cykgOiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgc2VnbWVudHNbaV0gPSBVUkkuZGVjb2RlKHNlZ21lbnRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VnbWVudHM7XG4gICAgfVxuXG4gICAgaWYgKCFpc0FycmF5KHYpKSB7XG4gICAgICB2ID0gKHR5cGVvZiB2ID09PSAnc3RyaW5nJyB8fCB2IGluc3RhbmNlb2YgU3RyaW5nKSA/IFVSSS5lbmNvZGUodikgOiB2O1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gdi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdltpXSA9IFVSSS5lbmNvZGUodltpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VnbWVudChzZWdtZW50LCB2LCBidWlsZCk7XG4gIH07XG5cbiAgLy8gbXV0YXRpbmcgcXVlcnkgc3RyaW5nXG4gIHZhciBxID0gcC5xdWVyeTtcbiAgcC5xdWVyeSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHYgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgICB2YXIgcmVzdWx0ID0gdi5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShyZXN1bHQgfHwgZGF0YSwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSBpZiAodiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeSh2LCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBxLmNhbGwodGhpcywgdiwgYnVpbGQpO1xuICAgIH1cbiAgfTtcbiAgcC5zZXRRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBidWlsZCkge1xuICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyB8fCBuYW1lIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICBkYXRhW25hbWVdID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDogbnVsbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcbiAgICAgICAgaWYgKGhhc093bi5jYWxsKG5hbWUsIGtleSkpIHtcbiAgICAgICAgICBkYXRhW2tleV0gPSBuYW1lW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVVJJLmFkZFF1ZXJ5KCkgYWNjZXB0cyBhbiBvYmplY3QsIHN0cmluZyBhcyB0aGUgbmFtZSBwYXJhbWV0ZXInKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IFVSSS5idWlsZFF1ZXJ5KGRhdGEsIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgYnVpbGQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHAuYWRkUXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYnVpbGQpIHtcbiAgICB2YXIgZGF0YSA9IFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcbiAgICBVUkkuYWRkUXVlcnkoZGF0YSwgbmFtZSwgdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB2YWx1ZSk7XG4gICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGJ1aWxkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLnJlbW92ZVF1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGJ1aWxkKSB7XG4gICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgVVJJLnJlbW92ZVF1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlKTtcbiAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IFVSSS5idWlsZFF1ZXJ5KGRhdGEsIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgYnVpbGQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHAuaGFzUXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpIHtcbiAgICB2YXIgZGF0YSA9IFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcbiAgICByZXR1cm4gVVJJLmhhc1F1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlLCB3aXRoaW5BcnJheSk7XG4gIH07XG4gIHAuc2V0U2VhcmNoID0gcC5zZXRRdWVyeTtcbiAgcC5hZGRTZWFyY2ggPSBwLmFkZFF1ZXJ5O1xuICBwLnJlbW92ZVNlYXJjaCA9IHAucmVtb3ZlUXVlcnk7XG4gIHAuaGFzU2VhcmNoID0gcC5oYXNRdWVyeTtcblxuICAvLyBzYW5pdGl6aW5nIFVSTHNcbiAgcC5ub3JtYWxpemUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdGhpc1xuICAgICAgICAubm9ybWFsaXplUHJvdG9jb2woZmFsc2UpXG4gICAgICAgIC5ub3JtYWxpemVQYXRoKGZhbHNlKVxuICAgICAgICAubm9ybWFsaXplUXVlcnkoZmFsc2UpXG4gICAgICAgIC5ub3JtYWxpemVGcmFnbWVudChmYWxzZSlcbiAgICAgICAgLmJ1aWxkKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgICAgIC5ub3JtYWxpemVQcm90b2NvbChmYWxzZSlcbiAgICAgIC5ub3JtYWxpemVIb3N0bmFtZShmYWxzZSlcbiAgICAgIC5ub3JtYWxpemVQb3J0KGZhbHNlKVxuICAgICAgLm5vcm1hbGl6ZVBhdGgoZmFsc2UpXG4gICAgICAubm9ybWFsaXplUXVlcnkoZmFsc2UpXG4gICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpXG4gICAgICAuYnVpbGQoKTtcbiAgfTtcbiAgcC5ub3JtYWxpemVQcm90b2NvbCA9IGZ1bmN0aW9uKGJ1aWxkKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX3BhcnRzLnByb3RvY29sID0gdGhpcy5fcGFydHMucHJvdG9jb2wudG9Mb3dlckNhc2UoKTtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcC5ub3JtYWxpemVIb3N0bmFtZSA9IGZ1bmN0aW9uKGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLmhvc3RuYW1lKSB7XG4gICAgICBpZiAodGhpcy5pcygnSUROJykgJiYgcHVueWNvZGUpIHtcbiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSBwdW55Y29kZS50b0FTQ0lJKHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pcygnSVB2NicpICYmIElQdjYpIHtcbiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSBJUHY2LmJlc3QodGhpcy5fcGFydHMuaG9zdG5hbWUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHAubm9ybWFsaXplUG9ydCA9IGZ1bmN0aW9uKGJ1aWxkKSB7XG4gICAgLy8gcmVtb3ZlIHBvcnQgb2YgaXQncyB0aGUgcHJvdG9jb2wncyBkZWZhdWx0XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9PT0gJ3N0cmluZycgJiYgdGhpcy5fcGFydHMucG9ydCA9PT0gVVJJLmRlZmF1bHRQb3J0c1t0aGlzLl9wYXJ0cy5wcm90b2NvbF0pIHtcbiAgICAgIHRoaXMuX3BhcnRzLnBvcnQgPSBudWxsO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLm5vcm1hbGl6ZVBhdGggPSBmdW5jdGlvbihidWlsZCkge1xuICAgIHZhciBfcGF0aCA9IHRoaXMuX3BhcnRzLnBhdGg7XG4gICAgaWYgKCFfcGF0aCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgdGhpcy5fcGFydHMucGF0aCA9IFVSSS5yZWNvZGVVcm5QYXRoKHRoaXMuX3BhcnRzLnBhdGgpO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgX3BhdGggPSBVUkkucmVjb2RlUGF0aChfcGF0aCk7XG5cbiAgICB2YXIgX3dhc19yZWxhdGl2ZTtcbiAgICB2YXIgX2xlYWRpbmdQYXJlbnRzID0gJyc7XG4gICAgdmFyIF9wYXJlbnQsIF9wb3M7XG5cbiAgICAvLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHNcbiAgICBpZiAoX3BhdGguY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgIF93YXNfcmVsYXRpdmUgPSB0cnVlO1xuICAgICAgX3BhdGggPSAnLycgKyBfcGF0aDtcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgcmVsYXRpdmUgZmlsZXMgKGFzIG9wcG9zZWQgdG8gZGlyZWN0b3JpZXMpXG4gICAgaWYgKF9wYXRoLnNsaWNlKC0zKSA9PT0gJy8uLicgfHwgX3BhdGguc2xpY2UoLTIpID09PSAnLy4nKSB7XG4gICAgICBfcGF0aCArPSAnLyc7XG4gICAgfVxuXG4gICAgLy8gcmVzb2x2ZSBzaW1wbGVzXG4gICAgX3BhdGggPSBfcGF0aFxuICAgICAgLnJlcGxhY2UoLyhcXC8oXFwuXFwvKSspfChcXC9cXC4kKS9nLCAnLycpXG4gICAgICAucmVwbGFjZSgvXFwvezIsfS9nLCAnLycpO1xuXG4gICAgLy8gcmVtZW1iZXIgbGVhZGluZyBwYXJlbnRzXG4gICAgaWYgKF93YXNfcmVsYXRpdmUpIHtcbiAgICAgIF9sZWFkaW5nUGFyZW50cyA9IF9wYXRoLnN1YnN0cmluZygxKS5tYXRjaCgvXihcXC5cXC5cXC8pKy8pIHx8ICcnO1xuICAgICAgaWYgKF9sZWFkaW5nUGFyZW50cykge1xuICAgICAgICBfbGVhZGluZ1BhcmVudHMgPSBfbGVhZGluZ1BhcmVudHNbMF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcmVzb2x2ZSBwYXJlbnRzXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIF9wYXJlbnQgPSBfcGF0aC5zZWFyY2goL1xcL1xcLlxcLihcXC98JCkvKTtcbiAgICAgIGlmIChfcGFyZW50ID09PSAtMSkge1xuICAgICAgICAvLyBubyBtb3JlIC4uLyB0byByZXNvbHZlXG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmIChfcGFyZW50ID09PSAwKSB7XG4gICAgICAgIC8vIHRvcCBsZXZlbCBjYW5ub3QgYmUgcmVsYXRpdmUsIHNraXAgaXRcbiAgICAgICAgX3BhdGggPSBfcGF0aC5zdWJzdHJpbmcoMyk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBfcG9zID0gX3BhdGguc3Vic3RyaW5nKDAsIF9wYXJlbnQpLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgICBpZiAoX3BvcyA9PT0gLTEpIHtcbiAgICAgICAgX3BvcyA9IF9wYXJlbnQ7XG4gICAgICB9XG4gICAgICBfcGF0aCA9IF9wYXRoLnN1YnN0cmluZygwLCBfcG9zKSArIF9wYXRoLnN1YnN0cmluZyhfcGFyZW50ICsgMyk7XG4gICAgfVxuXG4gICAgLy8gcmV2ZXJ0IHRvIHJlbGF0aXZlXG4gICAgaWYgKF93YXNfcmVsYXRpdmUgJiYgdGhpcy5pcygncmVsYXRpdmUnKSkge1xuICAgICAgX3BhdGggPSBfbGVhZGluZ1BhcmVudHMgKyBfcGF0aC5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGFydHMucGF0aCA9IF9wYXRoO1xuICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcC5ub3JtYWxpemVQYXRobmFtZSA9IHAubm9ybWFsaXplUGF0aDtcbiAgcC5ub3JtYWxpemVRdWVyeSA9IGZ1bmN0aW9uKGJ1aWxkKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9wYXJ0cy5xdWVyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMucXVlcnkubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVlcnkoVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLm5vcm1hbGl6ZUZyYWdtZW50ID0gZnVuY3Rpb24oYnVpbGQpIHtcbiAgICBpZiAoIXRoaXMuX3BhcnRzLmZyYWdtZW50KSB7XG4gICAgICB0aGlzLl9wYXJ0cy5mcmFnbWVudCA9IG51bGw7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHAubm9ybWFsaXplU2VhcmNoID0gcC5ub3JtYWxpemVRdWVyeTtcbiAgcC5ub3JtYWxpemVIYXNoID0gcC5ub3JtYWxpemVGcmFnbWVudDtcblxuICBwLmlzbzg4NTkgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBleHBlY3QgdW5pY29kZSBpbnB1dCwgaXNvODg1OSBvdXRwdXRcbiAgICB2YXIgZSA9IFVSSS5lbmNvZGU7XG4gICAgdmFyIGQgPSBVUkkuZGVjb2RlO1xuXG4gICAgVVJJLmVuY29kZSA9IGVzY2FwZTtcbiAgICBVUkkuZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50O1xuICAgIHRyeSB7XG4gICAgICB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBVUkkuZW5jb2RlID0gZTtcbiAgICAgIFVSSS5kZWNvZGUgPSBkO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBwLnVuaWNvZGUgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBleHBlY3QgaXNvODg1OSBpbnB1dCwgdW5pY29kZSBvdXRwdXRcbiAgICB2YXIgZSA9IFVSSS5lbmNvZGU7XG4gICAgdmFyIGQgPSBVUkkuZGVjb2RlO1xuXG4gICAgVVJJLmVuY29kZSA9IHN0cmljdEVuY29kZVVSSUNvbXBvbmVudDtcbiAgICBVUkkuZGVjb2RlID0gdW5lc2NhcGU7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubm9ybWFsaXplKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIFVSSS5lbmNvZGUgPSBlO1xuICAgICAgVVJJLmRlY29kZSA9IGQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHAucmVhZGFibGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdXJpID0gdGhpcy5jbG9uZSgpO1xuICAgIC8vIHJlbW92aW5nIHVzZXJuYW1lLCBwYXNzd29yZCwgYmVjYXVzZSB0aGV5IHNob3VsZG4ndCBiZSBkaXNwbGF5ZWQgYWNjb3JkaW5nIHRvIFJGQyAzOTg2XG4gICAgdXJpLnVzZXJuYW1lKCcnKS5wYXNzd29yZCgnJykubm9ybWFsaXplKCk7XG4gICAgdmFyIHQgPSAnJztcbiAgICBpZiAodXJpLl9wYXJ0cy5wcm90b2NvbCkge1xuICAgICAgdCArPSB1cmkuX3BhcnRzLnByb3RvY29sICsgJzovLyc7XG4gICAgfVxuXG4gICAgaWYgKHVyaS5fcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgIGlmICh1cmkuaXMoJ3B1bnljb2RlJykgJiYgcHVueWNvZGUpIHtcbiAgICAgICAgdCArPSBwdW55Y29kZS50b1VuaWNvZGUodXJpLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICAgIGlmICh1cmkuX3BhcnRzLnBvcnQpIHtcbiAgICAgICAgICB0ICs9ICc6JyArIHVyaS5fcGFydHMucG9ydDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdCArPSB1cmkuaG9zdCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1cmkuX3BhcnRzLmhvc3RuYW1lICYmIHVyaS5fcGFydHMucGF0aCAmJiB1cmkuX3BhcnRzLnBhdGguY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgIHQgKz0gJy8nO1xuICAgIH1cblxuICAgIHQgKz0gdXJpLnBhdGgodHJ1ZSk7XG4gICAgaWYgKHVyaS5fcGFydHMucXVlcnkpIHtcbiAgICAgIHZhciBxID0gJyc7XG4gICAgICBmb3IgKHZhciBpID0gMCwgcXAgPSB1cmkuX3BhcnRzLnF1ZXJ5LnNwbGl0KCcmJyksIGwgPSBxcC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIGt2ID0gKHFwW2ldIHx8ICcnKS5zcGxpdCgnPScpO1xuICAgICAgICBxICs9ICcmJyArIFVSSS5kZWNvZGVRdWVyeShrdlswXSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSlcbiAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJTI2Jyk7XG5cbiAgICAgICAgaWYgKGt2WzFdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBxICs9ICc9JyArIFVSSS5kZWNvZGVRdWVyeShrdlsxXSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC8mL2csICclMjYnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdCArPSAnPycgKyBxLnN1YnN0cmluZygxKTtcbiAgICB9XG5cbiAgICB0ICs9IFVSSS5kZWNvZGVRdWVyeSh1cmkuaGFzaCgpLCB0cnVlKTtcbiAgICByZXR1cm4gdDtcbiAgfTtcblxuICAvLyByZXNvbHZpbmcgcmVsYXRpdmUgYW5kIGFic29sdXRlIFVSTHNcbiAgcC5hYnNvbHV0ZVRvID0gZnVuY3Rpb24oYmFzZSkge1xuICAgIHZhciByZXNvbHZlZCA9IHRoaXMuY2xvbmUoKTtcbiAgICB2YXIgcHJvcGVydGllcyA9IFsncHJvdG9jb2wnLCAndXNlcm5hbWUnLCAncGFzc3dvcmQnLCAnaG9zdG5hbWUnLCAncG9ydCddO1xuICAgIHZhciBiYXNlZGlyLCBpLCBwO1xuXG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpO1xuICAgIH1cblxuICAgIGlmICghKGJhc2UgaW5zdGFuY2VvZiBVUkkpKSB7XG4gICAgICBiYXNlID0gbmV3IFVSSShiYXNlKTtcbiAgICB9XG5cbiAgICBpZiAocmVzb2x2ZWQuX3BhcnRzLnByb3RvY29sKSB7XG4gICAgICAvLyBEaXJlY3RseSByZXR1cm5zIGV2ZW4gaWYgdGhpcy5fcGFydHMuaG9zdG5hbWUgaXMgZW1wdHkuXG4gICAgICByZXR1cm4gcmVzb2x2ZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmVkLl9wYXJ0cy5wcm90b2NvbCA9IGJhc2UuX3BhcnRzLnByb3RvY29sO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wYXJ0cy5ob3N0bmFtZSkge1xuICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IChwID0gcHJvcGVydGllc1tpXSk7IGkrKykge1xuICAgICAgcmVzb2x2ZWQuX3BhcnRzW3BdID0gYmFzZS5fcGFydHNbcF07XG4gICAgfVxuXG4gICAgaWYgKCFyZXNvbHZlZC5fcGFydHMucGF0aCkge1xuICAgICAgcmVzb2x2ZWQuX3BhcnRzLnBhdGggPSBiYXNlLl9wYXJ0cy5wYXRoO1xuICAgICAgaWYgKCFyZXNvbHZlZC5fcGFydHMucXVlcnkpIHtcbiAgICAgICAgcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5ID0gYmFzZS5fcGFydHMucXVlcnk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyZXNvbHZlZC5fcGFydHMucGF0aC5zdWJzdHJpbmcoLTIpID09PSAnLi4nKSB7XG4gICAgICAgIHJlc29sdmVkLl9wYXJ0cy5wYXRoICs9ICcvJztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc29sdmVkLnBhdGgoKS5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgICAgICBiYXNlZGlyID0gYmFzZS5kaXJlY3RvcnkoKTtcbiAgICAgICAgYmFzZWRpciA9IGJhc2VkaXIgPyBiYXNlZGlyIDogYmFzZS5wYXRoKCkuaW5kZXhPZignLycpID09PSAwID8gJy8nIDogJyc7XG4gICAgICAgIHJlc29sdmVkLl9wYXJ0cy5wYXRoID0gKGJhc2VkaXIgPyAoYmFzZWRpciArICcvJykgOiAnJykgKyByZXNvbHZlZC5fcGFydHMucGF0aDtcbiAgICAgICAgcmVzb2x2ZWQubm9ybWFsaXplUGF0aCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlc29sdmVkLmJ1aWxkKCk7XG4gICAgcmV0dXJuIHJlc29sdmVkO1xuICB9O1xuICBwLnJlbGF0aXZlVG8gPSBmdW5jdGlvbihiYXNlKSB7XG4gICAgdmFyIHJlbGF0aXZlID0gdGhpcy5jbG9uZSgpLm5vcm1hbGl6ZSgpO1xuICAgIHZhciByZWxhdGl2ZVBhcnRzLCBiYXNlUGFydHMsIGNvbW1vbiwgcmVsYXRpdmVQYXRoLCBiYXNlUGF0aDtcblxuICAgIGlmIChyZWxhdGl2ZS5fcGFydHMudXJuKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSTnMgZG8gbm90IGhhdmUgYW55IGdlbmVyYWxseSBkZWZpbmVkIGhpZXJhcmNoaWNhbCBjb21wb25lbnRzJyk7XG4gICAgfVxuXG4gICAgYmFzZSA9IG5ldyBVUkkoYmFzZSkubm9ybWFsaXplKCk7XG4gICAgcmVsYXRpdmVQYXJ0cyA9IHJlbGF0aXZlLl9wYXJ0cztcbiAgICBiYXNlUGFydHMgPSBiYXNlLl9wYXJ0cztcbiAgICByZWxhdGl2ZVBhdGggPSByZWxhdGl2ZS5wYXRoKCk7XG4gICAgYmFzZVBhdGggPSBiYXNlLnBhdGgoKTtcblxuICAgIGlmIChyZWxhdGl2ZVBhdGguY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVVJJIGlzIGFscmVhZHkgcmVsYXRpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAoYmFzZVBhdGguY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNhbGN1bGF0ZSBhIFVSSSByZWxhdGl2ZSB0byBhbm90aGVyIHJlbGF0aXZlIFVSSScpO1xuICAgIH1cblxuICAgIGlmIChyZWxhdGl2ZVBhcnRzLnByb3RvY29sID09PSBiYXNlUGFydHMucHJvdG9jb2wpIHtcbiAgICAgIHJlbGF0aXZlUGFydHMucHJvdG9jb2wgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChyZWxhdGl2ZVBhcnRzLnVzZXJuYW1lICE9PSBiYXNlUGFydHMudXNlcm5hbWUgfHwgcmVsYXRpdmVQYXJ0cy5wYXNzd29yZCAhPT0gYmFzZVBhcnRzLnBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTtcbiAgICB9XG5cbiAgICBpZiAocmVsYXRpdmVQYXJ0cy5wcm90b2NvbCAhPT0gbnVsbCB8fCByZWxhdGl2ZVBhcnRzLnVzZXJuYW1lICE9PSBudWxsIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpO1xuICAgIH1cblxuICAgIGlmIChyZWxhdGl2ZVBhcnRzLmhvc3RuYW1lID09PSBiYXNlUGFydHMuaG9zdG5hbWUgJiYgcmVsYXRpdmVQYXJ0cy5wb3J0ID09PSBiYXNlUGFydHMucG9ydCkge1xuICAgICAgcmVsYXRpdmVQYXJ0cy5ob3N0bmFtZSA9IG51bGw7XG4gICAgICByZWxhdGl2ZVBhcnRzLnBvcnQgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTtcbiAgICB9XG5cbiAgICBpZiAocmVsYXRpdmVQYXRoID09PSBiYXNlUGF0aCkge1xuICAgICAgcmVsYXRpdmVQYXJ0cy5wYXRoID0gJyc7XG4gICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTtcbiAgICB9XG5cbiAgICAvLyBkZXRlcm1pbmUgY29tbW9uIHN1YiBwYXRoXG4gICAgY29tbW9uID0gVVJJLmNvbW1vblBhdGgocmVsYXRpdmVQYXRoLCBiYXNlUGF0aCk7XG5cbiAgICAvLyBJZiB0aGUgcGF0aHMgaGF2ZSBub3RoaW5nIGluIGNvbW1vbiwgcmV0dXJuIGEgcmVsYXRpdmUgVVJMIHdpdGggdGhlIGFic29sdXRlIHBhdGguXG4gICAgaWYgKCFjb21tb24pIHtcbiAgICAgIHJldHVybiByZWxhdGl2ZS5idWlsZCgpO1xuICAgIH1cblxuICAgIHZhciBwYXJlbnRzID0gYmFzZVBhcnRzLnBhdGhcbiAgICAgIC5zdWJzdHJpbmcoY29tbW9uLmxlbmd0aClcbiAgICAgIC5yZXBsYWNlKC9bXlxcL10qJC8sICcnKVxuICAgICAgLnJlcGxhY2UoLy4qP1xcLy9nLCAnLi4vJyk7XG5cbiAgICByZWxhdGl2ZVBhcnRzLnBhdGggPSAocGFyZW50cyArIHJlbGF0aXZlUGFydHMucGF0aC5zdWJzdHJpbmcoY29tbW9uLmxlbmd0aCkpIHx8ICcuLyc7XG5cbiAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTtcbiAgfTtcblxuICAvLyBjb21wYXJpbmcgVVJJc1xuICBwLmVxdWFscyA9IGZ1bmN0aW9uKHVyaSkge1xuICAgIHZhciBvbmUgPSB0aGlzLmNsb25lKCk7XG4gICAgdmFyIHR3byA9IG5ldyBVUkkodXJpKTtcbiAgICB2YXIgb25lX21hcCA9IHt9O1xuICAgIHZhciB0d29fbWFwID0ge307XG4gICAgdmFyIGNoZWNrZWQgPSB7fTtcbiAgICB2YXIgb25lX3F1ZXJ5LCB0d29fcXVlcnksIGtleTtcblxuICAgIG9uZS5ub3JtYWxpemUoKTtcbiAgICB0d28ubm9ybWFsaXplKCk7XG5cbiAgICAvLyBleGFjdCBtYXRjaFxuICAgIGlmIChvbmUudG9TdHJpbmcoKSA9PT0gdHdvLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIGV4dHJhY3QgcXVlcnkgc3RyaW5nXG4gICAgb25lX3F1ZXJ5ID0gb25lLnF1ZXJ5KCk7XG4gICAgdHdvX3F1ZXJ5ID0gdHdvLnF1ZXJ5KCk7XG4gICAgb25lLnF1ZXJ5KCcnKTtcbiAgICB0d28ucXVlcnkoJycpO1xuXG4gICAgLy8gZGVmaW5pdGVseSBub3QgZXF1YWwgaWYgbm90IGV2ZW4gbm9uLXF1ZXJ5IHBhcnRzIG1hdGNoXG4gICAgaWYgKG9uZS50b1N0cmluZygpICE9PSB0d28udG9TdHJpbmcoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIHF1ZXJ5IHBhcmFtZXRlcnMgaGF2ZSB0aGUgc2FtZSBsZW5ndGgsIGV2ZW4gaWYgdGhleSdyZSBwZXJtdXRlZFxuICAgIGlmIChvbmVfcXVlcnkubGVuZ3RoICE9PSB0d29fcXVlcnkubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgb25lX21hcCA9IFVSSS5wYXJzZVF1ZXJ5KG9uZV9xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgdHdvX21hcCA9IFVSSS5wYXJzZVF1ZXJ5KHR3b19xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG5cbiAgICBmb3IgKGtleSBpbiBvbmVfbWFwKSB7XG4gICAgICBpZiAoaGFzT3duLmNhbGwob25lX21hcCwga2V5KSkge1xuICAgICAgICBpZiAoIWlzQXJyYXkob25lX21hcFtrZXldKSkge1xuICAgICAgICAgIGlmIChvbmVfbWFwW2tleV0gIT09IHR3b19tYXBba2V5XSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghYXJyYXlzRXF1YWwob25lX21hcFtrZXldLCB0d29fbWFwW2tleV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hlY2tlZFtrZXldID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGtleSBpbiB0d29fbWFwKSB7XG4gICAgICBpZiAoaGFzT3duLmNhbGwodHdvX21hcCwga2V5KSkge1xuICAgICAgICBpZiAoIWNoZWNrZWRba2V5XSkge1xuICAgICAgICAgIC8vIHR3byBjb250YWlucyBhIHBhcmFtZXRlciBub3QgcHJlc2VudCBpbiBvbmVcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBzdGF0ZVxuICBwLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUgPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy5fcGFydHMucHJldmVudEludmFsaWRIb3N0bmFtZSA9ICEhdjtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBwLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9IGZ1bmN0aW9uKHYpIHtcbiAgICB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMgPSAhIXY7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC5lc2NhcGVRdWVyeVNwYWNlID0gZnVuY3Rpb24odikge1xuICAgIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UgPSAhIXY7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcmV0dXJuIFVSSTtcbn0pKTtcbiIsIi8qISBodHRwczovL210aHMuYmUvcHVueWNvZGUgdjEuNC4wIGJ5IEBtYXRoaWFzICovXG47KGZ1bmN0aW9uKHJvb3QpIHtcblxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGVzICovXG5cdHZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiZcblx0XHQhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXHR2YXIgZnJlZU1vZHVsZSA9IHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmXG5cdFx0IW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cdHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWw7XG5cdGlmIChcblx0XHRmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8XG5cdFx0ZnJlZUdsb2JhbC5zZWxmID09PSBmcmVlR2xvYmFsXG5cdCkge1xuXHRcdHJvb3QgPSBmcmVlR2xvYmFsO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBgcHVueWNvZGVgIG9iamVjdC5cblx0ICogQG5hbWUgcHVueWNvZGVcblx0ICogQHR5cGUgT2JqZWN0XG5cdCAqL1xuXHR2YXIgcHVueWNvZGUsXG5cblx0LyoqIEhpZ2hlc3QgcG9zaXRpdmUgc2lnbmVkIDMyLWJpdCBmbG9hdCB2YWx1ZSAqL1xuXHRtYXhJbnQgPSAyMTQ3NDgzNjQ3LCAvLyBha2EuIDB4N0ZGRkZGRkYgb3IgMl4zMS0xXG5cblx0LyoqIEJvb3RzdHJpbmcgcGFyYW1ldGVycyAqL1xuXHRiYXNlID0gMzYsXG5cdHRNaW4gPSAxLFxuXHR0TWF4ID0gMjYsXG5cdHNrZXcgPSAzOCxcblx0ZGFtcCA9IDcwMCxcblx0aW5pdGlhbEJpYXMgPSA3Mixcblx0aW5pdGlhbE4gPSAxMjgsIC8vIDB4ODBcblx0ZGVsaW1pdGVyID0gJy0nLCAvLyAnXFx4MkQnXG5cblx0LyoqIFJlZ3VsYXIgZXhwcmVzc2lvbnMgKi9cblx0cmVnZXhQdW55Y29kZSA9IC9eeG4tLS8sXG5cdHJlZ2V4Tm9uQVNDSUkgPSAvW15cXHgyMC1cXHg3RV0vLCAvLyB1bnByaW50YWJsZSBBU0NJSSBjaGFycyArIG5vbi1BU0NJSSBjaGFyc1xuXHRyZWdleFNlcGFyYXRvcnMgPSAvW1xceDJFXFx1MzAwMlxcdUZGMEVcXHVGRjYxXS9nLCAvLyBSRkMgMzQ5MCBzZXBhcmF0b3JzXG5cblx0LyoqIEVycm9yIG1lc3NhZ2VzICovXG5cdGVycm9ycyA9IHtcblx0XHQnb3ZlcmZsb3cnOiAnT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3MnLFxuXHRcdCdub3QtYmFzaWMnOiAnSWxsZWdhbCBpbnB1dCA+PSAweDgwIChub3QgYSBiYXNpYyBjb2RlIHBvaW50KScsXG5cdFx0J2ludmFsaWQtaW5wdXQnOiAnSW52YWxpZCBpbnB1dCdcblx0fSxcblxuXHQvKiogQ29udmVuaWVuY2Ugc2hvcnRjdXRzICovXG5cdGJhc2VNaW51c1RNaW4gPSBiYXNlIC0gdE1pbixcblx0Zmxvb3IgPSBNYXRoLmZsb29yLFxuXHRzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLFxuXG5cdC8qKiBUZW1wb3JhcnkgdmFyaWFibGUgKi9cblx0a2V5O1xuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgZXJyb3IgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIGVycm9yIHR5cGUuXG5cdCAqIEByZXR1cm5zIHtFcnJvcn0gVGhyb3dzIGEgYFJhbmdlRXJyb3JgIHdpdGggdGhlIGFwcGxpY2FibGUgZXJyb3IgbWVzc2FnZS5cblx0ICovXG5cdGZ1bmN0aW9uIGVycm9yKHR5cGUpIHtcblx0XHR0aHJvdyBuZXcgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBgQXJyYXkjbWFwYCB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkgYXJyYXlcblx0ICogaXRlbS5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBhcnJheSBvZiB2YWx1ZXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwKGFycmF5LCBmbikge1xuXHRcdHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdHdoaWxlIChsZW5ndGgtLSkge1xuXHRcdFx0cmVzdWx0W2xlbmd0aF0gPSBmbihhcnJheVtsZW5ndGhdKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIHNpbXBsZSBgQXJyYXkjbWFwYC1saWtlIHdyYXBwZXIgdG8gd29yayB3aXRoIGRvbWFpbiBuYW1lIHN0cmluZ3Mgb3IgZW1haWxcblx0ICogYWRkcmVzc2VzLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICogY2hhcmFjdGVyLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IHN0cmluZyBvZiBjaGFyYWN0ZXJzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFja1xuXHQgKiBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcERvbWFpbihzdHJpbmcsIGZuKSB7XG5cdFx0dmFyIHBhcnRzID0gc3RyaW5nLnNwbGl0KCdAJyk7XG5cdFx0dmFyIHJlc3VsdCA9ICcnO1xuXHRcdGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG5cdFx0XHQvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlXG5cdFx0XHQvLyB0aGUgbG9jYWwgcGFydCAoaS5lLiBldmVyeXRoaW5nIHVwIHRvIGBAYCkgaW50YWN0LlxuXHRcdFx0cmVzdWx0ID0gcGFydHNbMF0gKyAnQCc7XG5cdFx0XHRzdHJpbmcgPSBwYXJ0c1sxXTtcblx0XHR9XG5cdFx0Ly8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LlxuXHRcdHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1xceDJFJyk7XG5cdFx0dmFyIGxhYmVscyA9IHN0cmluZy5zcGxpdCgnLicpO1xuXHRcdHZhciBlbmNvZGVkID0gbWFwKGxhYmVscywgZm4pLmpvaW4oJy4nKTtcblx0XHRyZXR1cm4gcmVzdWx0ICsgZW5jb2RlZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG51bWVyaWMgY29kZSBwb2ludHMgb2YgZWFjaCBVbmljb2RlXG5cdCAqIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nLiBXaGlsZSBKYXZhU2NyaXB0IHVzZXMgVUNTLTIgaW50ZXJuYWxseSxcblx0ICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2hcblx0ICogVUNTLTIgZXhwb3NlcyBhcyBzZXBhcmF0ZSBjaGFyYWN0ZXJzKSBpbnRvIGEgc2luZ2xlIGNvZGUgcG9pbnQsXG5cdCAqIG1hdGNoaW5nIFVURi0xNi5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgXG5cdCAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBkZWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBUaGUgVW5pY29kZSBpbnB1dCBzdHJpbmcgKFVDUy0yKS5cblx0ICogQHJldHVybnMge0FycmF5fSBUaGUgbmV3IGFycmF5IG9mIGNvZGUgcG9pbnRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpIHtcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGNvdW50ZXIgPSAwLFxuXHRcdCAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoLFxuXHRcdCAgICB2YWx1ZSxcblx0XHQgICAgZXh0cmE7XG5cdFx0d2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdHZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdGlmICh2YWx1ZSA+PSAweEQ4MDAgJiYgdmFsdWUgPD0gMHhEQkZGICYmIGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdFx0Ly8gaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyXG5cdFx0XHRcdGV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0aWYgKChleHRyYSAmIDB4RkMwMCkgPT0gMHhEQzAwKSB7IC8vIGxvdyBzdXJyb2dhdGVcblx0XHRcdFx0XHRvdXRwdXQucHVzaCgoKHZhbHVlICYgMHgzRkYpIDw8IDEwKSArIChleHRyYSAmIDB4M0ZGKSArIDB4MTAwMDApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0XG5cdFx0XHRcdFx0Ly8gY29kZSB1bml0IGlzIHRoZSBoaWdoIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0XHRcdGNvdW50ZXItLTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBzdHJpbmcgYmFzZWQgb24gYW4gYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyXG5cdCAqIEBuYW1lIGVuY29kZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgbmV3IFVuaWNvZGUgc3RyaW5nIChVQ1MtMikuXG5cdCAqL1xuXHRmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7XG5cdFx0cmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHZhciBvdXRwdXQgPSAnJztcblx0XHRcdGlmICh2YWx1ZSA+IDB4RkZGRikge1xuXHRcdFx0XHR2YWx1ZSAtPSAweDEwMDAwO1xuXHRcdFx0XHRvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTtcblx0XHRcdFx0dmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSk7XG5cdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdH0pLmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci5cblx0ICogQHNlZSBgZGlnaXRUb0Jhc2ljKClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50IChmb3IgdXNlIGluXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaW4gdGhlIHJhbmdlIGAwYCB0byBgYmFzZSAtIDFgLCBvciBgYmFzZWAgaWZcblx0ICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNpY1RvRGlnaXQoY29kZVBvaW50KSB7XG5cdFx0aWYgKGNvZGVQb2ludCAtIDQ4IDwgMTApIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSAyMjtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDY1IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA2NTtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA5Nztcblx0XHR9XG5cdFx0cmV0dXJuIGJhc2U7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBkaWdpdC9pbnRlZ2VyIGludG8gYSBiYXNpYyBjb2RlIHBvaW50LlxuXHQgKiBAc2VlIGBiYXNpY1RvRGlnaXQoKWBcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpZ2l0IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2ljIGNvZGUgcG9pbnQgd2hvc2UgdmFsdWUgKHdoZW4gdXNlZCBmb3Jcblx0ICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpcyBgZGlnaXRgLCB3aGljaCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2Vcblx0ICogYDBgIHRvIGBiYXNlIC0gMWAuIElmIGBmbGFnYCBpcyBub24temVybywgdGhlIHVwcGVyY2FzZSBmb3JtIGlzXG5cdCAqIHVzZWQ7IGVsc2UsIHRoZSBsb3dlcmNhc2UgZm9ybSBpcyB1c2VkLiBUaGUgYmVoYXZpb3IgaXMgdW5kZWZpbmVkXG5cdCAqIGlmIGBmbGFnYCBpcyBub24temVybyBhbmQgYGRpZ2l0YCBoYXMgbm8gdXBwZXJjYXNlIGZvcm0uXG5cdCAqL1xuXHRmdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsIGZsYWcpIHtcblx0XHQvLyAgMC4uMjUgbWFwIHRvIEFTQ0lJIGEuLnogb3IgQS4uWlxuXHRcdC8vIDI2Li4zNSBtYXAgdG8gQVNDSUkgMC4uOVxuXHRcdHJldHVybiBkaWdpdCArIDIyICsgNzUgKiAoZGlnaXQgPCAyNikgLSAoKGZsYWcgIT0gMCkgPDwgNSk7XG5cdH1cblxuXHQvKipcblx0ICogQmlhcyBhZGFwdGF0aW9uIGZ1bmN0aW9uIGFzIHBlciBzZWN0aW9uIDMuNCBvZiBSRkMgMzQ5Mi5cblx0ICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkge1xuXHRcdHZhciBrID0gMDtcblx0XHRkZWx0YSA9IGZpcnN0VGltZSA/IGZsb29yKGRlbHRhIC8gZGFtcCkgOiBkZWx0YSA+PiAxO1xuXHRcdGRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTtcblx0XHRmb3IgKC8qIG5vIGluaXRpYWxpemF0aW9uICovOyBkZWx0YSA+IGJhc2VNaW51c1RNaW4gKiB0TWF4ID4+IDE7IGsgKz0gYmFzZSkge1xuXHRcdFx0ZGVsdGEgPSBmbG9vcihkZWx0YSAvIGJhc2VNaW51c1RNaW4pO1xuXHRcdH1cblx0XHRyZXR1cm4gZmxvb3IoayArIChiYXNlTWludXNUTWluICsgMSkgKiBkZWx0YSAvIChkZWx0YSArIHNrZXcpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZVxuXHQgKiBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHtcblx0XHQvLyBEb24ndCB1c2UgVUNTLTJcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxuXHRcdCAgICBvdXQsXG5cdFx0ICAgIGkgPSAwLFxuXHRcdCAgICBuID0gaW5pdGlhbE4sXG5cdFx0ICAgIGJpYXMgPSBpbml0aWFsQmlhcyxcblx0XHQgICAgYmFzaWMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIGluZGV4LFxuXHRcdCAgICBvbGRpLFxuXHRcdCAgICB3LFxuXHRcdCAgICBrLFxuXHRcdCAgICBkaWdpdCxcblx0XHQgICAgdCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGJhc2VNaW51c1Q7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzOiBsZXQgYGJhc2ljYCBiZSB0aGUgbnVtYmVyIG9mIGlucHV0IGNvZGVcblx0XHQvLyBwb2ludHMgYmVmb3JlIHRoZSBsYXN0IGRlbGltaXRlciwgb3IgYDBgIGlmIHRoZXJlIGlzIG5vbmUsIHRoZW4gY29weVxuXHRcdC8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LlxuXG5cdFx0YmFzaWMgPSBpbnB1dC5sYXN0SW5kZXhPZihkZWxpbWl0ZXIpO1xuXHRcdGlmIChiYXNpYyA8IDApIHtcblx0XHRcdGJhc2ljID0gMDtcblx0XHR9XG5cblx0XHRmb3IgKGogPSAwOyBqIDwgYmFzaWM7ICsraikge1xuXHRcdFx0Ly8gaWYgaXQncyBub3QgYSBiYXNpYyBjb2RlIHBvaW50XG5cdFx0XHRpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7XG5cdFx0XHRcdGVycm9yKCdub3QtYmFzaWMnKTtcblx0XHRcdH1cblx0XHRcdG91dHB1dC5wdXNoKGlucHV0LmNoYXJDb2RlQXQoaikpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZGVjb2RpbmcgbG9vcDogc3RhcnQganVzdCBhZnRlciB0aGUgbGFzdCBkZWxpbWl0ZXIgaWYgYW55IGJhc2ljIGNvZGVcblx0XHQvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLlxuXG5cdFx0Zm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHtcblxuXHRcdFx0Ly8gYGluZGV4YCBpcyB0aGUgaW5kZXggb2YgdGhlIG5leHQgY2hhcmFjdGVyIHRvIGJlIGNvbnN1bWVkLlxuXHRcdFx0Ly8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLFxuXHRcdFx0Ly8gd2hpY2ggZ2V0cyBhZGRlZCB0byBgaWAuIFRoZSBvdmVyZmxvdyBjaGVja2luZyBpcyBlYXNpZXJcblx0XHRcdC8vIGlmIHdlIGluY3JlYXNlIGBpYCBhcyB3ZSBnbywgdGhlbiBzdWJ0cmFjdCBvZmYgaXRzIHN0YXJ0aW5nXG5cdFx0XHQvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLlxuXHRcdFx0Zm9yIChvbGRpID0gaSwgdyA9IDEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXG5cdFx0XHRcdGlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkge1xuXHRcdFx0XHRcdGVycm9yKCdpbnZhbGlkLWlucHV0Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpICs9IGRpZ2l0ICogdztcblx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0IDwgdCkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR3ICo9IGJhc2VNaW51c1Q7XG5cblx0XHRcdH1cblxuXHRcdFx0b3V0ID0gb3V0cHV0Lmxlbmd0aCArIDE7XG5cdFx0XHRiaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTtcblxuXHRcdFx0Ly8gYGlgIHdhcyBzdXBwb3NlZCB0byB3cmFwIGFyb3VuZCBmcm9tIGBvdXRgIHRvIGAwYCxcblx0XHRcdC8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6XG5cdFx0XHRpZiAoZmxvb3IoaSAvIG91dCkgPiBtYXhJbnQgLSBuKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRuICs9IGZsb29yKGkgLyBvdXQpO1xuXHRcdFx0aSAlPSBvdXQ7XG5cblx0XHRcdC8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXRcblx0XHRcdG91dHB1dC5zcGxpY2UoaSsrLCAwLCBuKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzIChlLmcuIGEgZG9tYWluIG5hbWUgbGFiZWwpIHRvIGFcblx0ICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7XG5cdFx0dmFyIG4sXG5cdFx0ICAgIGRlbHRhLFxuXHRcdCAgICBoYW5kbGVkQ1BDb3VudCxcblx0XHQgICAgYmFzaWNMZW5ndGgsXG5cdFx0ICAgIGJpYXMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIG0sXG5cdFx0ICAgIHEsXG5cdFx0ICAgIGssXG5cdFx0ICAgIHQsXG5cdFx0ICAgIGN1cnJlbnRWYWx1ZSxcblx0XHQgICAgb3V0cHV0ID0gW10sXG5cdFx0ICAgIC8qKiBgaW5wdXRMZW5ndGhgIHdpbGwgaG9sZCB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIGluIGBpbnB1dGAuICovXG5cdFx0ICAgIGlucHV0TGVuZ3RoLFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgaGFuZGxlZENQQ291bnRQbHVzT25lLFxuXHRcdCAgICBiYXNlTWludXNULFxuXHRcdCAgICBxTWludXNUO1xuXG5cdFx0Ly8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZVxuXHRcdGlucHV0ID0gdWNzMmRlY29kZShpbnB1dCk7XG5cblx0XHQvLyBDYWNoZSB0aGUgbGVuZ3RoXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBzdGF0ZVxuXHRcdG4gPSBpbml0aWFsTjtcblx0XHRkZWx0YSA9IDA7XG5cdFx0YmlhcyA9IGluaXRpYWxCaWFzO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50c1xuXHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRoYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDtcblxuXHRcdC8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkO1xuXHRcdC8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy5cblxuXHRcdC8vIEZpbmlzaCB0aGUgYmFzaWMgc3RyaW5nIC0gaWYgaXQgaXMgbm90IGVtcHR5IC0gd2l0aCBhIGRlbGltaXRlclxuXHRcdGlmIChiYXNpY0xlbmd0aCkge1xuXHRcdFx0b3V0cHV0LnB1c2goZGVsaW1pdGVyKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGVuY29kaW5nIGxvb3A6XG5cdFx0d2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHtcblxuXHRcdFx0Ly8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dFxuXHRcdFx0Ly8gbGFyZ2VyIG9uZTpcblx0XHRcdGZvciAobSA9IG1heEludCwgaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID49IG4gJiYgY3VycmVudFZhbHVlIDwgbSkge1xuXHRcdFx0XHRcdG0gPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LFxuXHRcdFx0Ly8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3dcblx0XHRcdGhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTtcblx0XHRcdGlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lO1xuXHRcdFx0biA9IG07XG5cblx0XHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPT0gbikge1xuXHRcdFx0XHRcdC8vIFJlcHJlc2VudCBkZWx0YSBhcyBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyXG5cdFx0XHRcdFx0Zm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXHRcdFx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cdFx0XHRcdFx0XHRpZiAocSA8IHQpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRxTWludXNUID0gcSAtIHQ7XG5cdFx0XHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdFx0XHRvdXRwdXQucHVzaChcblx0XHRcdFx0XHRcdFx0c3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyh0ICsgcU1pbnVzVCAlIGJhc2VNaW51c1QsIDApKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHEgPSBmbG9vcihxTWludXNUIC8gYmFzZU1pbnVzVCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyhxLCAwKSkpO1xuXHRcdFx0XHRcdGJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7XG5cdFx0XHRcdFx0ZGVsdGEgPSAwO1xuXHRcdFx0XHRcdCsraGFuZGxlZENQQ291bnQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0KytkZWx0YTtcblx0XHRcdCsrbjtcblxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3Ncblx0ICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLlxuXHQgKiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCBvbiBhIHN0cmluZyB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cblx0ICogY29udmVydGVkIHRvIFVuaWNvZGUuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlZCBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIGNvbnZlcnQgdG8gVW5pY29kZS5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlXG5cdCAqIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4UHVueWNvZGUudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsXG5cdCAqIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0J3MgYWxyZWFkeSBpblxuXHQgKiBBU0NJSS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0byBjb252ZXJ0LCBhcyBhXG5cdCAqIFVuaWNvZGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yXG5cdCAqIGVtYWlsIGFkZHJlc3MuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi9cblx0cHVueWNvZGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IFB1bnljb2RlLmpzIHZlcnNpb24gbnVtYmVyLlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIFN0cmluZ1xuXHRcdCAqL1xuXHRcdCd2ZXJzaW9uJzogJzEuMy4yJyxcblx0XHQvKipcblx0XHQgKiBBbiBvYmplY3Qgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGZyb20gSmF2YVNjcmlwdCdzIGludGVybmFsIGNoYXJhY3RlclxuXHRcdCAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suXG5cdFx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgT2JqZWN0XG5cdFx0ICovXG5cdFx0J3VjczInOiB7XG5cdFx0XHQnZGVjb2RlJzogdWNzMmRlY29kZSxcblx0XHRcdCdlbmNvZGUnOiB1Y3MyZW5jb2RlXG5cdFx0fSxcblx0XHQnZGVjb2RlJzogZGVjb2RlLFxuXHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0J3RvQVNDSUknOiB0b0FTQ0lJLFxuXHRcdCd0b1VuaWNvZGUnOiB0b1VuaWNvZGVcblx0fTtcblxuXHQvKiogRXhwb3NlIGBwdW55Y29kZWAgKi9cblx0Ly8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zXG5cdC8vIGxpa2UgdGhlIGZvbGxvd2luZzpcblx0aWYgKFxuXHRcdHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmXG5cdFx0ZGVmaW5lLmFtZFxuXHQpIHtcblx0XHRkZWZpbmUoJ3B1bnljb2RlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gcHVueWNvZGU7XG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuXHRcdGlmIChtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cykge1xuXHRcdFx0Ly8gaW4gTm9kZS5qcywgaW8uanMsIG9yIFJpbmdvSlMgdjAuOC4wK1xuXHRcdFx0ZnJlZU1vZHVsZS5leHBvcnRzID0gcHVueWNvZGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGluIE5hcndoYWwgb3IgUmluZ29KUyB2MC43LjAtXG5cdFx0XHRmb3IgKGtleSBpbiBwdW55Y29kZSkge1xuXHRcdFx0XHRwdW55Y29kZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIChmcmVlRXhwb3J0c1trZXldID0gcHVueWNvZGVba2V5XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdC8vIGluIFJoaW5vIG9yIGEgd2ViIGJyb3dzZXJcblx0XHRyb290LnB1bnljb2RlID0gcHVueWNvZGU7XG5cdH1cblxufSh0aGlzKSk7XG4iLCIvKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5pbXBvcnQgeyBTYW5kYm94LCBTYW5kYm94UmVnaXN0cnkgfSBmcm9tICdydW50aW1lLWNvcmUvZGlzdC9zYW5kYm94JztcbmltcG9ydCBNaW5pQnVzIGZyb20gJ3J1bnRpbWUtY29yZS9kaXN0L21pbmlidXMnO1xuXG5mdW5jdGlvbiBjcmVhdGUoaWZyYW1lKSB7XG4gIHdpbmRvdy5fbWluaUJ1cyA9IG5ldyBNaW5pQnVzKCk7XG4gIHdpbmRvdy5fbWluaUJ1cy5fb25Qb3N0TWVzc2FnZSA9IGZ1bmN0aW9uKG1zZykge1xuICAgIGlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG1zZywgJyonKTtcbiAgfTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC5kYXRhLnRvICYmIChldmVudC5kYXRhLnRvLnN0YXJ0c1dpdGgoJ3J1bnRpbWU6bG9hZGVkSHlwZXJ0eScpIHx8IGV2ZW50LmRhdGEudG8uZW5kc1dpdGgoJ2d1aS1tYW5hZ2VyJykpKSB7IHJldHVybjsgfVxuXG4gICAgd2luZG93Ll9taW5pQnVzLl9vbk1lc3NhZ2UoZXZlbnQuZGF0YSk7XG4gIH0sIGZhbHNlKTtcblxuICB3aW5kb3cuX3JlZ2lzdHJ5ID0gbmV3IFNhbmRib3hSZWdpc3RyeSh3aW5kb3cuX21pbmlCdXMpO1xuICB3aW5kb3cuX3JlZ2lzdHJ5Ll9jcmVhdGUgPSBmdW5jdGlvbih1cmwsIHNvdXJjZUNvZGUsIGNvbmZpZywgZmFjdG9yeSkge1xuICAgIHRyeSB7XG4gICAgICBldmFsLmFwcGx5KHdpbmRvdywgW3NvdXJjZUNvZGVdKTtcblxuICAgICAgaWYgKHR5cGVvZiBhY3RpdmF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gYWN0aXZhdGUodXJsLCB3aW5kb3cuX21pbmlCdXMsIGNvbmZpZywgZmFjdG9yeSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgYWN0aXZhdGUuZGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gYWN0aXZhdGUuZGVmYXVsdCh1cmwsIHdpbmRvdy5fbWluaUJ1cywgY29uZmlnLCBmYWN0b3J5KTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQ29udGV4dCBBUFAgQ3JlYXRlXSAtIEVycm9yOiAnLCBlcnJvcik7XG4gICAgICB0aHJvdyBKU09OLnN0cmluZ2lmeShlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEh5cGVydHkoaHlwZXJ0eURlc2NyaXB0b3IpIHtcbiAgcmV0dXJuIHdpbmRvdy5fcmVnaXN0cnkuY29tcG9uZW50c1toeXBlcnR5RGVzY3JpcHRvcl07XG59XG5cbi8qKlxuICogU2FuZGJveENvbnRleHQgZm9yIGFwcGxpY2F0aW9uXG4gKiBAdHlwZWRlZiBDb250ZXh0QXBwXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGlGcmFtZTogaWZyYW1lKX0gY3JlYXRlIENyZWF0ZXMgdGhlIGNvbnRleHQgZm9yIHRoZSBzYW5kYm94IGhvc3RlZCBpbiB0aGUgaWZyYW1lXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEh5cGVydHkgZGVzY3JpcHRvcjogc3RyaW5nKTpIeXBlcnR5fSBnZXRIeXBlcnR5IFJldHVybnMgdGhlIGh5cGVydHkgZm9yIHRoZSBnaXZlbiBkZXNjcmlwdG9yXG4gKiAqL1xuZXhwb3J0IGRlZmF1bHQgeyBjcmVhdGUsIGdldEh5cGVydHkgfTtcbiIsIi8qKlxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxuKlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKi9cbmltcG9ydCBSZXRoaW5rQnJvd3NlciBmcm9tICcuL1J1bnRpbWVVQVN0dWInXG5cbmxldCByZXRoaW5rO1xuXG5pZiggdHlwZW9mIHdpbmRvdyAhPSB1bmRlZmluZWQgJiYgd2luZG93ICE9IG51bGwgKXtcbiAgICByZXRoaW5rID0gUmV0aGlua0Jyb3dzZXJcbn1lbHNle1xuICAgIHJldGhpbmsgPSB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmV0aGlua1xuIiwiLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG4vKipcbiAqIEBleHRlcm5hbCB7TVNHX1NUQVRVU30gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay90cmVlL21hc3Rlci9kb2NzL3NwZWNzL3NlcnZpY2UtZnJhbWV3b3JrXG4gKi9cblxuaW1wb3J0IGFwcCBmcm9tICcuL0NvbnRleHRBcHAnO1xuaW1wb3J0IFVSSSBmcm9tICd1cmlqcyc7XG5pbXBvcnQgeyBjcmVhdGUgYXMgY3JlYXRlSWZyYW1lIH0gZnJvbSAnLi9pZnJhbWUnO1xuXG5sZXQgaWZyYW1lID0gdW5kZWZpbmVkO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEh5cGVydHlcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBydW50aW1lSHlwZXJ0eVVSTCAtIEh5cGVydHkgYWRkcmVzc1xuICogQHByb3BlcnR5IHtNU0dfU1RBVFVTfSBzdGF0dXMgLSBIeXBlcnR5IHN0YXR1c1xuICogQHByb3BlcnR5IHtPYmplY3R9IGluc3RhbmNlIC0gSHlwZXJ0eSBvYmplY3RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lIC0gSHlwZXJ0eSBuYW1lXG4gKi9cbmxldCBidWlsZE1zZyA9IChoeXBlcnR5Q29tcG9uZW50LCBtc2cpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBydW50aW1lSHlwZXJ0eVVSTDogbXNnLmJvZHkucnVudGltZUh5cGVydHlVUkwsXG4gICAgc3RhdHVzOiBtc2cuYm9keS5zdGF0dXMsXG4gICAgaW5zdGFuY2U6IGh5cGVydHlDb21wb25lbnQuaW5zdGFuY2UsXG4gICAgbmFtZTogaHlwZXJ0eUNvbXBvbmVudC5uYW1lXG4gIH07XG59O1xuXG5sZXQgcmVxdWlyZUh5cGVydHlJRCA9IDA7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUnVudGltZUFkYXB0ZXJcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oSHlwZXJ0eSBkZXNjcmlwdG9yOiBzdHJpbmcsIEh5cGVydHkgYWRkcmVzc2VzIHRvIGJlIHJldXNlZCBvciBlbXB0eSBpbiBvdGhlciBjYXNlOiBzdHJpbmcpOiBQcm9taXNlPEh5cGVydHk+fSByZXF1aXJlSHlwZXJ0eSAtIExvYWRzIGFuZCByZXR1cm5zIGEgSHlwZXJ0eVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihEb21haW46IHN0cmluZyl9IHJlcXVpcmVQcm90b3N0dWIgLSBMb2FkcyBhIHByb3Rvc3R1YiBmcm9tIHRoZSBnaXZlbiBkb21haW5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTogUHJvbWlzZX0gY2xvc2UgLSBVbmxvYWRzIGFuZCBjbG9zZXMgdGhlIGluc3RhbGxlZCBydW50aW1lXG4gKi9cbmxldCBydW50aW1lQWRhcHRlciA9IHtcblxuICByZXF1aXJlSHlwZXJ0eTogKGh5cGVydHlEZXNjcmlwdG9yLCByZXVzZUFkZHJlc3MgPSBmYWxzZSkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAvLyBrZWVwIGN1cnJlbnQgcmVxdWlyZUh5cGVydHlJRFxuICAgICAgY29uc3QgY2FsbGJhY2tJRCA9IHJlcXVpcmVIeXBlcnR5SUQ7XG4gICAgICByZXF1aXJlSHlwZXJ0eUlEICs9IDE7XG4gICAgICBsZXQgbG9hZGVkID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGF0YS50byA9PT0gJ3J1bnRpbWU6bG9hZGVkSHlwZXJ0eScpIHtcbiAgICAgICAgICBpZiAoZS5kYXRhLmJvZHkuaWQgPT09IGNhbGxiYWNrSUQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbG9hZGVkKTtcbiAgICAgICAgICAgIHJlc29sdmUoYnVpbGRNc2coYXBwLmdldEh5cGVydHkoZS5kYXRhLmJvZHkucnVudGltZUh5cGVydHlVUkwpLCBlLmRhdGEpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG4gICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7IHRvOiAnY29yZTpsb2FkSHlwZXJ0eScsIGJvZHk6IHsgZGVzY3JpcHRvcjogaHlwZXJ0eURlc2NyaXB0b3IsIHJldXNlQWRkcmVzcywgaWQ6IGNhbGxiYWNrSUQgfSB9LCAnKicpO1xuICAgIH0pO1xuICB9LFxuXG4gIGF1dGhvcmlzZTogKGlkcCwgc2NvcGUpID0+IHtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbG9hZGVkID0gKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tSdW50aW1lQnJvd3Nlci5SdW50aW1lVUFTdHViLkF1dGhvcmlzZV0gcmVwbHk6JywgZS5kYXRhKTtcbiAgICAgICAgaWYgKGUuZGF0YS50byA9PT0gJ3J1bnRpbWU6YXV0aG9yaXNlZCcpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG5cbiAgICAgICAgICByZXNvbHZlKGUuZGF0YS5ib2R5KTtcbiAgICAgICAgfSBlbHNlIGlmIChlLmRhdGEudG8gPT09ICdydW50aW1lOm5vdC1hdXRob3Jpc2VkJykge1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbG9hZGVkKTtcblxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tSdW50aW1lQnJvd3Nlci5SdW50aW1lVUFTdHViLkF1dGhvcmlzZV0gRXJyb3I6JywgZS5kYXRhKTtcbiAgICAgICAgICByZWplY3QoZS5kYXRhLmJvZHkpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsb2FkZWQpO1xuICAgICAgY29uc29sZS5sb2coJ0F1dGhvcmlzaW5nIElEUCAnLCBpZHAsICcgd2l0aCBzY29wZSAnLCBzY29wZSk7XG4gICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7IHRvOiAnY29yZTphdXRob3Jpc2UnLCBib2R5OiB7IGlkcDogaWRwLCBzY29wZTogc2NvcGUgfSB9LCAnKicpO1xuICAgIH0pO1xuXG4gIH0sXG5cbiAgcmVzZXQ6ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnUnVudGltZSBCcm93c2VyIC0gcmVzZXQgJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCByZXNldEV2dCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLmRhdGEudG8gPT09ICdydW50aW1lOnJ1bnRpbWVSZXNldCcpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHJlc2V0RXZ0KTtcbiAgICAgICAgICByZXNvbHZlKGUuZGF0YS5ib2R5KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgcmVzZXRFdnQpO1xuICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0bzogJ2NvcmU6cmVzZXQnLCBib2R5OiB7IH0gfSwgJyonKTtcbiAgICB9KTtcbiAgfSxcblxuICBsb2dpbjogKGlkcCkgPT4ge1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBsb2FkZWQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5kYXRhLnRvID09PSAncnVudGltZTpsb2dnZWRJbicpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG4gICAgICAgICAgcmVzb2x2ZShlLmRhdGEuYm9keSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG4gICAgICBjb25zb2xlLmxvZygnTG9nZ2luZyB3aXRoIElEUDogJywgaWRwKTtcbiAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHsgdG86ICdjb3JlOmxvZ2luJywgYm9keTogeyBpZHA6IGlkcCB9IH0sICcqJyk7XG4gICAgfSk7XG5cbiAgfSxcblxuICBsaXN0ZW5TaG93QWRtaW46ICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IGxvYWRlZCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLmRhdGEudG8gPT09ICdydW50aW1lOmd1aS1tYW5hZ2VyJykge1xuICAgICAgICAgIGlmIChlLmRhdGEuYm9keS5tZXRob2QgPT09ICd0b2tlbkV4cGlyZWQnKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbG9hZGVkKTtcbiAgICB9KTtcbiAgfSxcblxuXG4gIHJlcXVpcmVQcm90b3N0dWI6IChkb21haW4pID0+IHtcbiAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7IHRvOiAnY29yZTpsb2FkU3R1YicsIGJvZHk6IHsgZG9tYWluOiBkb21haW4gfSB9LCAnKicpO1xuICB9LFxuXG4gIGNsb3NlOiAobG9nT3V0ID0gZmFsc2UpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU3R1YiAtIGxvZ2dpbmcgb3V0OiAnLCBsb2dPdXQpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbG9hZGVkID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGF0YS50byA9PT0gJ3J1bnRpbWU6cnVudGltZUNsb3NlZCcpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG4gICAgICAgICAgcmVzb2x2ZShyZXNvbHZlKGUuZGF0YS5ib2R5KSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG4gICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7IHRvOiAnY29yZTpjbG9zZScsIGJvZHk6IHsgbG9nT3V0OiBsb2dPdXQgfSB9LCAnKicpO1xuICAgIH0pO1xuICB9XG59O1xuXG5sZXQgR3VpTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZSkgPT4ge1xuICAgIGlmIChlLmRhdGEudG8gPT09ICdydW50aW1lOmd1aS1tYW5hZ2VyJykge1xuXG4gICAgICBpZiAoZS5kYXRhLmJvZHkubWV0aG9kID09PSAnc2hvd0FkbWluUGFnZScpIHtcbiAgICAgICAgaWZyYW1lLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBpZnJhbWUuc3R5bGUuekluZGV4ID0gOTk5OTk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZS5kYXRhLmJvZHkubWV0aG9kID09PSAnaGlkZUFkbWluUGFnZScpIHtcbiAgICAgICAgICBpZnJhbWUuc3R5bGUud2lkdGggPSAnNDhweCc7XG4gICAgICAgICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9ICc0OHB4JztcbiAgICAgICAgICBpZnJhbWUuc3R5bGUuekluZGV4ID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUnVudGltZVVBXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKFJ1bnRpbWUgZG9tYWluOiBzdHJpbmcsIFJ1bnRpbWUgdXJsOiBzdHJpbmcsIERldmVsb3BtZW50IG1vZGU6IGJvb2xlYW4pOiBQcm9taXNlPFJ1bnRpbWVBZGFwdGVyPn0gaW5zdGFsbCAtIEluc3RhbGxzIGEgcnVudGltZSBsb2NhbGx5XG4gKi9cbmxldCBSZXRoaW5rQnJvd3NlciA9IHtcbiAgaW5zdGFsbDogZnVuY3Rpb24gKHsgZG9tYWluLCBydW50aW1lVVJMLCBkZXZlbG9wbWVudCwgaW5kZXhVUkwsIHNhbmRib3hVUkwsIGhpZGVBZG1pbiB9ID0ge30pIHtcbiAgICBjb25zb2xlLmluZm8oJ0luc3RhbGw6ICcsIGRvbWFpbiwgcnVudGltZVVSTCwgZGV2ZWxvcG1lbnQsIGluZGV4VVJMLCBzYW5kYm94VVJMLCBoaWRlQWRtaW4pO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgcnVudGltZSA9IHRoaXMuX2dldFJ1bnRpbWUocnVudGltZVVSTCwgZG9tYWluLCBkZXZlbG9wbWVudCwgaW5kZXhVUkwsIHNhbmRib3hVUkwsIGhpZGVBZG1pbik7XG4gICAgICBpZnJhbWUgPSBjcmVhdGVJZnJhbWUoYCR7cnVudGltZS5pbmRleFVSTH0/ZG9tYWluPSR7cnVudGltZS5kb21haW59JnJ1bnRpbWU9JHtydW50aW1lLnVybH0mZGV2ZWxvcG1lbnQ9JHtkZXZlbG9wbWVudH1gLCA5OTk5OSwgaGlkZUFkbWluKTtcbiAgICAgIGxldCBpbnN0YWxsZWQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5kYXRhLnRvID09PSAncnVudGltZTppbnN0YWxsZWQnKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBpbnN0YWxsZWQpO1xuICAgICAgICAgIHJlc29sdmUocnVudGltZUFkYXB0ZXIpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBpbnN0YWxsZWQpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5kYXRhLnRvICYmIGUuZGF0YS50byA9PT0gJ3J1bnRpbWU6Y3JlYXRlU2FuZGJveFdpbmRvdycpIHtcbiAgICAgICAgICBjb25zdCBpZnIgPSBjcmVhdGVJZnJhbWUocnVudGltZS5zYW5kYm94VVJMLCB1bmRlZmluZWQsIGhpZGVBZG1pbik7XG4gICAgICAgICAgaWZyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZnIuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShlLmRhdGEsICcqJywgZS5wb3J0cyk7XG4gICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGFwcC5jcmVhdGUoaWZyYW1lKTtcbiAgICAgIEd1aU1hbmFnZXIoKTtcbiAgICB9KTtcbiAgfSxcblxuICBfZ2V0UnVudGltZShydW50aW1lVVJMLCBkb21haW4sIGRldmVsb3BtZW50LCBpbmRleFVSTCwgc2FuZGJveFVSTCkge1xuICAgIGlmIChkZXZlbG9wbWVudCkge1xuICAgICAgcnVudGltZVVSTCA9IHJ1bnRpbWVVUkwgfHwgJ2h5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLicgKyBkb21haW4gKyAnLy53ZWxsLWtub3duL3J1bnRpbWUvUnVudGltZSc7XG4gICAgICBkb21haW4gPSBkb21haW4gfHwgbmV3IFVSSShydW50aW1lVVJMKS5ob3N0KCk7XG4gICAgICBpbmRleFVSTCA9IGluZGV4VVJMIHx8ICdodHRwczovLycgKyBkb21haW4gKyAnLy53ZWxsLWtub3duL3J1bnRpbWUvaW5kZXguaHRtbCc7XG4gICAgICBzYW5kYm94VVJMID0gc2FuZGJveFVSTCB8fCAnaHR0cHM6Ly8nICsgZG9tYWluICsgJy8ud2VsbC1rbm93bi9ydW50aW1lL3NhbmRib3guaHRtbCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJ1bnRpbWVVUkwgPSBydW50aW1lVVJMIHx8IGBodHRwczovL2NhdGFsb2d1ZS4ke2RvbWFpbn0vLndlbGwta25vd24vcnVudGltZS9kZWZhdWx0YDtcbiAgICAgIGRvbWFpbiA9IGRvbWFpbiB8fCBuZXcgVVJJKHJ1bnRpbWVVUkwpLmhvc3QoKS5yZXBsYWNlKCdjYXRhbG9ndWUuJywgJycpO1xuICAgICAgaW5kZXhVUkwgPSBpbmRleFVSTCB8fCAnaHR0cHM6Ly8nICsgZG9tYWluICsgJy8ud2VsbC1rbm93bi9ydW50aW1lL2luZGV4Lmh0bWwnO1xuICAgICAgc2FuZGJveFVSTCA9IHNhbmRib3hVUkwgfHwgJ2h0dHBzOi8vJyArIGRvbWFpbiArICcvLndlbGwta25vd24vcnVudGltZS9zYW5kYm94Lmh0bWwnO1xuICAgIH1cblxuICAgIGNvbnNvbGUuaW5mbygnZ2V0IFJ1bnRpbWU6ICcsIHJ1bnRpbWVVUkwsIGRvbWFpbiwgaW5kZXhVUkwsIHNhbmRib3hVUkwpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVybDogcnVudGltZVVSTCxcbiAgICAgIGRvbWFpbjogZG9tYWluLFxuICAgICAgaW5kZXhVUkw6IGluZGV4VVJMLFxuICAgICAgc2FuZGJveFVSTDogc2FuZGJveFVSTFxuICAgIH07XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJldGhpbmtCcm93c2VyO1xuIiwiLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG4vKipcbiAqIEBleHRlcm5hbCB7aWZyYW1lfSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvaWZyYW1lXG4gKi9cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGlmcmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHNyYyAtIFVybCB0byBsb2FkIGludG8gdGhlIGlmcmFtZVxuICogQHJldHVybiB7aWZyYW1lfSAtIGlGcmFtZSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoc3JjLCB6SW5kZXggPSAtMTAsIGhpZGVBZG1pbiA9IGZhbHNlKSB7XG4gIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnaWQnLCAncmV0aGluaycpO1xuICBpZnJhbWUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICBpZnJhbWUuc3R5bGUudG9wID0gJzAnO1xuICBpZnJhbWUuc3R5bGUucmlnaHQgPSAnMCc7XG4gIGlmcmFtZS5zdHlsZS5ib3JkZXIgPSAnMCc7XG4gIGlmcmFtZS5zdHlsZS56SW5kZXggPSB6SW5kZXg7XG4gIGlmcmFtZS53aWR0aCA9ICc0OHB4JztcbiAgaWZyYW1lLmhlaWdodCA9ICc0OHB4JztcbiAgaWZyYW1lLnRpdGxlID0gJ3JlVEhJTkstcHJvamVjdCc7XG4gIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3NlYW1sZXNzJywgJycpO1xuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzYW5kYm94JywgJ2FsbG93LWZvcm1zIGFsbG93LXNjcmlwdHMgYWxsb3ctcG9wdXBzLXRvLWVzY2FwZS1zYW5kYm94IGFsbG93LXBvcHVwcyBhbGxvdy1zYW1lLW9yaWdpbiBhbGxvdy10b3AtbmF2aWdhdGlvbicpO1xuICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIGlmIChoaWRlQWRtaW4gPT0gdHJ1ZSkge1xuICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXG4gIHJldHVybiBpZnJhbWU7XG59XG4iXX0="}
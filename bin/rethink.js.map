{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/runtime-core/dist/minibus.js","node_modules/runtime-core/dist/sandbox.js","node_modules/urijs/src/IPv6.js","node_modules/urijs/src/SecondLevelDomains.js","node_modules/urijs/src/URI.js","node_modules/urijs/src/punycode.js","src/ContextApp.js","src/RuntimeLoader.js","src/RuntimeUAStub.js","src/iframe.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC/fA;;AACA;;;;;;AAvBA;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAS,MAAT,CAAgB,MAAhB,EAAwB;AACtB,SAAO,QAAP,GAAkB,IAAI,iBAAJ,EAAlB;AACA,SAAO,QAAP,CAAgB,cAAhB,GAAiC,UAAS,GAAT,EAAc;AAC7C,WAAO,aAAP,CAAqB,WAArB,CAAiC,GAAjC,EAAsC,GAAtC;AACD,GAFD;AAGA,SAAO,gBAAP,CAAwB,SAAxB,EAAmC,UAAS,KAAT,EAAgB;AACjD,QAAI,MAAM,IAAN,CAAW,EAAX,KAAkB,MAAM,IAAN,CAAW,EAAX,CAAc,UAAd,CAAyB,uBAAzB,KAAqD,MAAM,IAAN,CAAW,EAAX,CAAc,QAAd,CAAuB,aAAvB,CAAvE,CAAJ,EAAmH;AAAE;AAAS;;AAE9H,WAAO,QAAP,CAAgB,UAAhB,CAA2B,MAAM,IAAjC;AACD,GAJD,EAIG,KAJH;;AAMA,SAAO,SAAP,GAAmB,IAAI,wBAAJ,CAAoB,OAAO,QAA3B,CAAnB;AACA,SAAO,SAAP,CAAiB,OAAjB,GAA2B,UAAS,GAAT,EAAc,UAAd,EAA0B,MAA1B,EAAkC,OAAlC,EAA2C;AACpE,QAAI;AACF,WAAK,KAAL,CAAW,MAAX,EAAmB,CAAC,UAAD,CAAnB;;AAEA,UAAI,OAAO,QAAP,KAAoB,UAAxB,EAAoC;AAClC,eAAO,SAAS,GAAT,EAAc,OAAO,QAArB,EAA+B,MAA/B,EAAuC,OAAvC,CAAP;AACD;;AAED,UAAI,OAAO,SAAS,OAAhB,KAA4B,UAAhC,EAA4C;AAC1C,eAAO,SAAS,OAAT,CAAiB,GAAjB,EAAsB,OAAO,QAA7B,EAAuC,MAAvC,EAA+C,OAA/C,CAAP;AACD;AAEF,KAXD,CAWE,OAAO,KAAP,EAAc;AACd,cAAQ,KAAR,CAAc,gCAAd,EAAgD,KAAhD;AACA,YAAM,KAAK,SAAL,CAAe,MAAM,OAArB,CAAN;AACD;AACF,GAhBD;AAiBD;;AAED,SAAS,UAAT,CAAoB,iBAApB,EAAuC;AACrC,SAAO,OAAO,SAAP,CAAiB,UAAjB,CAA4B,iBAA5B,CAAP;AACD;;AAED;;;;;;kBAMe,EAAE,cAAF,EAAU,sBAAV,E;;;;;;;;;8QClEf;;;;;;;;;;;;;;;;;;;;;;;;AAsBA;;;;;;AAEA,IAAI,gBAAJ;;AAEA,IAAI,QAAO,MAAP,yCAAO,MAAP,MAAiB,SAAjB,IAA8B,UAAU,IAA5C,EAAkD;AAC9C,cAAU,uBAAV;AACH,CAFD,MAEK;AACD,cAAU,SAAV;AACH;;kBAEc,O;;;;;;;;;ACLf;;;;AACA;;;;AACA;;;;AAEA,IAAI,SAAS,SAAb;;AAEA;;;;;;;AAjCA;;;;;;;;;;;;;;;;;;;;;;;AAuBA;;;;AAiBA,IAAI,WAAW,SAAX,QAAW,CAAC,gBAAD,EAAmB,GAAnB,EAA2B;AACxC,SAAO;AACL,uBAAmB,IAAI,IAAJ,CAAS,iBADvB;AAEL,YAAQ,IAAI,IAAJ,CAAS,MAFZ;AAGL,cAAU,iBAAiB,QAHtB;AAIL,UAAM,iBAAiB;AAJlB,GAAP;AAMD,CAPD;;AASA,IAAI,mBAAmB,CAAvB;;AAEA;;;;;;AAMA,IAAI,iBAAiB;;AAEnB,kBAAgB,wBAAC,iBAAD,EAA6C;AAAA,QAAzB,YAAyB,uEAAV,KAAU;;AAC3D,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC;AACA,UAAM,aAAa,gBAAnB;AACA,0BAAoB,CAApB;AACA,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,uBAAlB,EAA2C;AACzC,cAAI,EAAE,IAAF,CAAO,IAAP,CAAY,EAAZ,KAAmB,UAAvB,EAAmC;AACjC,mBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACA,oBAAQ,SAAS,qBAAI,UAAJ,CAAe,EAAE,IAAF,CAAO,IAAP,CAAY,iBAA3B,CAAT,EAAwD,EAAE,IAA1D,CAAR;AACD;AACF;AACF,OAPD;AAQA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,kBAAN,EAA0B,MAAM,EAAE,YAAY,iBAAd,EAAiC,0BAAjC,EAA+C,IAAI,UAAnD,EAAhC,EAAjC,EAAoI,GAApI;AACD,KAdM,CAAP;AAeD,GAlBkB;;AAoBnB,aAAW,mBAAC,GAAD,EAAM,KAAN,EAAgB;;AAEzB,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,gBAAQ,GAAR,CAAY,iDAAZ,EAA+D,EAAE,IAAjE;AACA,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,oBAAlB,EAAwC;AACtC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;;AAEA,kBAAQ,EAAE,IAAF,CAAO,IAAf;AACD,SAJD,MAIO,IAAI,EAAE,IAAF,CAAO,EAAP,KAAc,wBAAlB,EAA4C;AACjD,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;;AAEA,kBAAQ,KAAR,CAAc,iDAAd,EAAiE,EAAE,IAAnE;AACA,iBAAO,EAAE,IAAF,CAAO,IAAd;AACD;AACF,OAZD;AAaA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACA,cAAQ,GAAR,CAAY,kBAAZ,EAAgC,GAAhC,EAAqC,cAArC,EAAqD,KAArD;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,gBAAN,EAAwB,MAAM,EAAE,KAAK,GAAP,EAAY,OAAO,KAAnB,EAA9B,EAAjC,EAA6F,GAA7F;AACD,KAjBM,CAAP;AAmBD,GAzCkB;;AA2CnB,SAAO,iBAAM;AACX,YAAQ,GAAR,CAAY,0BAAZ;AACA,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,WAAW,SAAX,QAAW,CAAC,CAAD,EAAO;AACpB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,sBAAlB,EAA0C;AACxC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,QAAtC;AACA,kBAAQ,EAAE,IAAF,CAAO,IAAf;AACD;AACF,OALD;AAMA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,QAAnC;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,YAAN,EAAoB,MAAM,EAA1B,EAAjC,EAAkE,GAAlE;AACD,KATM,CAAP;AAUD,GAvDkB;;AAyDnB,SAAO,eAAC,GAAD,EAAS;;AAEd,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,kBAAlB,EAAsC;AACpC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACA,kBAAQ,EAAE,IAAF,CAAO,IAAf;AACD;AACF,OALD;AAMA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACA,cAAQ,GAAR,CAAY,oBAAZ,EAAkC,GAAlC;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,YAAN,EAAoB,MAAM,EAAE,KAAK,GAAP,EAA1B,EAAjC,EAA2E,GAA3E;AACD,KAVM,CAAP;AAYD,GAvEkB;;AAyEnB,mBAAiB,2BAAM;AACrB,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,qBAAlB,EAAyC;AACvC,cAAI,EAAE,IAAF,CAAO,IAAP,CAAY,MAAZ,KAAuB,cAA3B,EAA2C;AACzC,mBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACA,oBAAQ,IAAR;AACD;AACF;AACF,OAPD;AAQA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACD,KAVM,CAAP;AAWD,GArFkB;;AAwFnB,oBAAkB,0BAAC,MAAD,EAAY;AAC5B,WAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,eAAN,EAAuB,MAAM,EAAE,QAAQ,MAAV,EAA7B,EAAjC,EAAoF,GAApF;AACD,GA1FkB;;AA4FnB,SAAO,iBAAoB;AAAA,QAAnB,MAAmB,uEAAV,KAAU;;AACzB,YAAQ,GAAR,CAAY,sBAAZ,EAAoC,MAApC;AACA,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,SAAS,SAAT,MAAS,CAAC,CAAD,EAAO;AAClB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,uBAAlB,EAA2C;AACzC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,MAAtC;AACA,kBAAQ,QAAQ,EAAE,IAAF,CAAO,IAAf,CAAR;AACD;AACF,OALD;AAMA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,MAAnC;AACA,aAAO,aAAP,CAAqB,WAArB,CAAiC,EAAE,IAAI,YAAN,EAAoB,MAAM,EAAE,QAAQ,MAAV,EAA1B,EAAjC,EAAiF,GAAjF;AACD,KATM,CAAP;AAUD;AAxGkB,CAArB;;AA2GA,IAAI,aAAa,SAAb,UAAa,GAAY;AAC3B,SAAO,gBAAP,CAAwB,SAAxB,EAAmC,UAAC,CAAD,EAAO;AACxC,QAAI,EAAE,IAAF,CAAO,EAAP,KAAc,qBAAlB,EAAyC;;AAEvC,UAAI,EAAE,IAAF,CAAO,IAAP,CAAY,MAAZ,KAAuB,eAA3B,EAA4C;AAC1C,eAAO,KAAP,CAAa,KAAb,GAAqB,MAArB;AACA,eAAO,KAAP,CAAa,MAAb,GAAsB,MAAtB;AACA,eAAO,KAAP,CAAa,MAAb,GAAsB,KAAtB;AACD,OAJD,MAIO;AACL,YAAI,EAAE,IAAF,CAAO,IAAP,CAAY,MAAZ,KAAuB,eAA3B,EAA4C;AAC1C,iBAAO,KAAP,CAAa,KAAb,GAAqB,MAArB;AACA,iBAAO,KAAP,CAAa,MAAb,GAAsB,MAAtB;AACA,iBAAO,KAAP,CAAa,MAAb,GAAsB,CAAtB;AACD;AACF;AAEF;AACF,GAhBD;AAiBD,CAlBD;;AAoBA;;;;AAIA,IAAI,iBAAiB;AACnB,WAAS,mBAAqF;AAAA;;AAAA,mFAAJ,EAAI;AAAA,QAAzE,MAAyE,QAAzE,MAAyE;AAAA,QAAjE,UAAiE,QAAjE,UAAiE;AAAA,QAArD,WAAqD,QAArD,WAAqD;AAAA,QAAxC,QAAwC,QAAxC,QAAwC;AAAA,QAA9B,UAA8B,QAA9B,UAA8B;AAAA,QAAlB,SAAkB,QAAlB,SAAkB;;AAC5F,YAAQ,IAAR,CAAa,WAAb,EAA0B,MAA1B,EAAkC,UAAlC,EAA8C,WAA9C,EAA2D,QAA3D,EAAqE,UAArE,EAAiF,SAAjF;AACA,WAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,UAAI,UAAU,MAAK,WAAL,CAAiB,UAAjB,EAA6B,MAA7B,EAAqC,WAArC,EAAkD,QAAlD,EAA4D,UAA5D,EAAwE,SAAxE,CAAd;AACA,eAAS,oBAAgB,QAAQ,QAAxB,gBAA2C,QAAQ,MAAnD,iBAAqE,QAAQ,GAA7E,qBAAgG,WAAhG,EAA+G,KAA/G,EAAsH,SAAtH,CAAT;AACA,UAAI,YAAY,SAAZ,SAAY,CAAC,CAAD,EAAO;AACrB,YAAI,EAAE,IAAF,CAAO,EAAP,KAAc,mBAAlB,EAAuC;AACrC,iBAAO,mBAAP,CAA2B,SAA3B,EAAsC,SAAtC;AACA,kBAAQ,cAAR;AACD;AACF,OALD;AAMA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,SAAnC;AACA,aAAO,gBAAP,CAAwB,SAAxB,EAAmC,UAAC,CAAD,EAAO;AACxC,YAAI,EAAE,IAAF,CAAO,EAAP,IAAa,EAAE,IAAF,CAAO,EAAP,KAAc,6BAA/B,EAA8D;AAC5D,cAAM,MAAM,oBAAa,QAAQ,UAArB,EAAiC,SAAjC,EAA4C,SAA5C,CAAZ;AACA,cAAI,gBAAJ,CAAqB,MAArB,EAA6B,YAAM;AACjC,gBAAI,aAAJ,CAAkB,WAAlB,CAA8B,EAAE,IAAhC,EAAsC,GAAtC,EAA2C,EAAE,KAA7C;AACD,WAFD,EAEG,KAFH;AAGD;AACF,OAPD;AAQA,2BAAI,MAAJ,CAAW,MAAX;AACA;AACD,KApBM,CAAP;AAqBD,GAxBkB;;AA0BnB,aA1BmB,uBA0BP,UA1BO,EA0BK,MA1BL,EA0Ba,WA1Bb,EA0B0B,QA1B1B,EA0BoC,UA1BpC,EA0BgD;AACjE,QAAI,WAAJ,EAAiB;AACf,mBAAa,cAAc,mCAAmC,MAAnC,GAA4C,8BAAvE;AACA,eAAS,UAAU,IAAI,eAAJ,CAAQ,UAAR,EAAoB,IAApB,EAAnB;AACA,iBAAW,YAAY,aAAa,MAAb,GAAsB,iCAA7C;AACA,mBAAa,cAAc,aAAa,MAAb,GAAsB,mCAAjD;AACD,KALD,MAKO;AACL,mBAAa,qCAAmC,MAAnC,iCAAb;AACA,eAAS,UAAU,IAAI,eAAJ,CAAQ,UAAR,EAAoB,IAApB,GAA2B,OAA3B,CAAmC,YAAnC,EAAiD,EAAjD,CAAnB;AACA,iBAAW,YAAY,aAAa,MAAb,GAAsB,iCAA7C;AACA,mBAAa,cAAc,aAAa,MAAb,GAAsB,mCAAjD;AACD;;AAED,YAAQ,IAAR,CAAa,eAAb,EAA8B,UAA9B,EAA0C,MAA1C,EAAkD,QAAlD,EAA4D,UAA5D;;AAEA,WAAO;AACL,WAAK,UADA;AAEL,cAAQ,MAFH;AAGL,gBAAU,QAHL;AAIL,kBAAY;AAJP,KAAP;AAMD;AA/CkB,CAArB;;kBAkDe,c;;;;;;;;QC9MC,M,GAAA,M;AAhChB;;;;;;;;;;;;;;;;;;;;;;;AAuBA;;;;AAIA;;;;;AAKO,SAAS,MAAT,CAAgB,GAAhB,EAAsD;AAAA,MAAjC,MAAiC,uEAAxB,CAAC,EAAuB;AAAA,MAAnB,SAAmB,uEAAP,KAAO;;AAC3D,MAAI,SAAS,SAAS,aAAT,CAAuB,QAAvB,CAAb;AACA,SAAO,YAAP,CAAoB,IAApB,EAA0B,SAA1B;AACA,SAAO,KAAP,CAAa,QAAb,GAAwB,UAAxB;AACA,SAAO,KAAP,CAAa,GAAb,GAAmB,GAAnB;AACA,SAAO,KAAP,CAAa,KAAb,GAAqB,GAArB;AACA,SAAO,KAAP,CAAa,MAAb,GAAsB,GAAtB;AACA,SAAO,KAAP,CAAa,MAAb,GAAsB,MAAtB;AACA,SAAO,KAAP,GAAe,MAAf;AACA,SAAO,MAAP,GAAgB,MAAhB;AACA,SAAO,KAAP,GAAe,iBAAf;AACA,SAAO,YAAP,CAAoB,UAApB,EAAgC,EAAhC;AACA,SAAO,YAAP,CAAoB,KAApB,EAA2B,GAA3B;AACA,SAAO,YAAP,CAAoB,SAApB,EAA+B,8GAA/B;AACA,SAAO,KAAP,CAAa,OAAb,GAAuB,OAAvB;AACA,MAAI,aAAa,IAAjB,EAAuB;AACrB,WAAO,KAAP,CAAa,OAAb,GAAuB,MAAvB;AACD;AACD,WAAS,aAAT,CAAuB,MAAvB,EAA+B,WAA/B,CAA2C,MAA3C;;AAEA,SAAO,MAAP;AACD","file":"rethink.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// version: 0.14.0\n// date: Wed Nov 07 2018 09:10:47 GMT+0000 (Western European Standard Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n// version: 0.14.0\n// date: Wed Nov 07 2018 09:10:47 GMT+0000 (Western European Standard Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"minibus\",[],e):\"object\"==typeof exports?exports.minibus=e():t.minibus=e()}(\"undefined\"!=typeof self?self:this,function(){return function(t){function __webpack_require__(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var e={};return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,\"a\",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=174)}([function(t,e){var n=t.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=n)},function(t,e){var n=t.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=n)},function(t,e,n){var r=n(31)(\"wks\"),o=n(22),i=n(1).Symbol,u=\"function\"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)(\"Symbol.\"+t))}).store=r},function(t,e,n){\"use strict\";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},function(t,e,n){\"use strict\";e.__esModule=!0;var r=n(64),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}()},function(t,e,n){var r=n(1),o=n(0),i=n(17),u=n(11),s=n(10),c=function(t,e,n){var f,a,l,p=t&c.F,v=t&c.G,d=t&c.S,h=t&c.P,y=t&c.B,_=t&c.W,b=v?o:o[e]||(o[e]={}),g=b.prototype,m=v?r:d?r[e]:(r[e]||{}).prototype;v&&(n=e);for(f in n)(a=!p&&m&&void 0!==m[f])&&s(b,f)||(l=a?m[f]:n[f],b[f]=v&&\"function\"!=typeof m[f]?n[f]:y&&a?i(l,r):_&&m[f]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):h&&\"function\"==typeof l?i(Function.call,l):l,h&&((b.virtual||(b.virtual={}))[f]=l,t&c.R&&g&&!g[f]&&u(g,f,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(9);t.exports=function(t){if(!r(t))throw TypeError(t+\" is not an object!\");return t}},function(t,e,n){t.exports=!n(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(6),o=n(43),i=n(29),u=Object.defineProperty;e.f=n(7)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if(\"get\"in n||\"set\"in n)throw TypeError(\"Accessors not supported!\");return\"value\"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(8),o=n(21);t.exports=n(7)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(62),o=n(25);t.exports=function(t){return r(o(t))}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){t.exports={default:n(71),__esModule:!0}},function(t,e){t.exports=!0},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports={}},function(t,e,n){var r=n(44),o=n(32);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(t+\" is not a function!\");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return\"Symbol(\".concat(void 0===t?\"\":t,\")_\",(++n+r).toString(36))}},function(t,e,n){var r=n(8).f,o=n(10),i=n(2)(\"toStringTag\");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError(\"Can't call method on  \"+t);return t}},function(t,e,n){t.exports={default:n(103),__esModule:!0}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(9),o=n(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if(\"function\"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&\"function\"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e,n){var r=n(31)(\"keys\"),o=n(22);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(0),o=n(1),i=o[\"__core-js_shared__\"]||(o[\"__core-js_shared__\"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})(\"versions\",[]).push({version:r.version,mode:n(15)?\"pure\":\"global\",copyright:\"© 2018 Denis Pushkarev (zloirock.ru)\"})},function(t,e){t.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(t,e,n){var r=n(25);t.exports=function(t){return Object(r(t))}},function(t,e,n){\"use strict\";e.__esModule=!0;var r=n(60),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!==(void 0===e?\"undefined\":(0,o.default)(e))&&\"function\"!=typeof e?t:e}},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(105),o=_interopRequireDefault(r),i=n(109),u=_interopRequireDefault(i),s=n(60),c=_interopRequireDefault(s);e.default=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===e?\"undefined\":(0,c.default)(e)));t.prototype=(0,u.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},,function(t,e,n){\"use strict\";function PromiseCapability(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError(\"Bad Promise constructor\");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}var r=n(20);t.exports.f=function(t){return new PromiseCapability(t)}},function(t,e,n){var r,o;!function(i,u){\"use strict\";r=u,void 0!==(o=\"function\"==typeof r?r.call(e,n,e,t):r)&&(t.exports=o)}(0,function(){\"use strict\";function bindMethod(t,e){var n=t[e];if(\"function\"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function realMethod(n){return\"debug\"===n&&(n=\"log\"),typeof console!==e&&(void 0!==console[n]?bindMethod(console,n):void 0!==console.log?bindMethod(console,\"log\"):t)}function replaceLoggingMethods(e,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<e?t:this.methodFactory(i,e,r)}this.log=this.debug}function enableLoggingWhenConsoleArrives(t,n,r){return function(){typeof console!==e&&(replaceLoggingMethods.call(this,n,r),this[t].apply(this,arguments))}}function defaultMethodFactory(t,e,n){return realMethod(t)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(t,r,o){function persistLevelIfPossible(t){var r=(n[t]||\"silent\").toUpperCase();if(typeof window!==e){try{return void(window.localStorage[s]=r)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+\"=\"+r+\";\"}catch(t){}}}function getPersistedLevel(){var t;if(typeof window!==e){try{t=window.localStorage[s]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(s)+\"=\");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===u.levels[t]&&(t=void 0),t}}var i,u=this,s=\"loglevel\";t&&(s+=\":\"+t),u.name=t,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=o||defaultMethodFactory,u.getLevel=function(){return i},u.setLevel=function(n,r){if(\"string\"==typeof n&&void 0!==u.levels[n.toUpperCase()]&&(n=u.levels[n.toUpperCase()]),!(\"number\"==typeof n&&n>=0&&n<=u.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+n;if(i=n,!1!==r&&persistLevelIfPossible(n),replaceLoggingMethods.call(u,n,t),typeof console===e&&n<u.levels.SILENT)return\"No console available for logging\"},u.setDefaultLevel=function(t){getPersistedLevel()||u.setLevel(t,!1)},u.enableAll=function(t){u.setLevel(u.levels.TRACE,t)},u.disableAll=function(t){u.setLevel(u.levels.SILENT,t)};var c=getPersistedLevel();null==c&&(c=null==r?\"WARN\":r),u.setLevel(c,!1)}var t=function(){},e=\"undefined\",n=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],r=new Logger,o={};r.getLogger=function(t){if(\"string\"!=typeof t||\"\"===t)throw new TypeError(\"You must supply a name when creating a logger.\");var e=o[t];return e||(e=o[t]=new Logger(t,r.getLevel(),r.methodFactory)),e};var i=typeof window!==e?window.log:void 0;return r.noConflict=function(){return typeof window!==e&&window.log===r&&(window.log=i),r},r.getLoggers=function(){return o},r})},function(t,e,n){e.f=n(2)},function(t,e,n){var r=n(1),o=n(0),i=n(15),u=n(39),s=n(8).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});\"_\"==t.charAt(0)||t in e||s(e,t,{value:u.f(t)})}},function(t,e,n){var r=n(6),o=n(74),i=n(32),u=n(30)(\"IE_PROTO\"),s=function(){},c=function(){var t,e=n(28)(\"iframe\"),r=i.length;for(e.style.display=\"none\",n(55).appendChild(e),e.src=\"javascript:\",t=e.contentWindow.document,t.open(),t.write(\"<script>document.F=Object<\\/script>\"),t.close(),c=t.F;r--;)delete c.prototype[i[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[u]=t):n=c(),void 0===e?n:o(n,e)}},function(t,e,n){\"use strict\";var r=n(72)(!0);n(53)(String,\"String\",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){t.exports=!n(7)&&!n(13)(function(){return 7!=Object.defineProperty(n(28)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(t,e,n){var r=n(10),o=n(12),i=n(66)(!1),u=n(30)(\"IE_PROTO\");t.exports=function(t,e){var n,s=o(t),c=0,f=[];for(n in s)n!=u&&r(s,n)&&f.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~i(f,n)||f.push(n));return f}},function(t,e,n){var r=n(24),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){n(75);for(var r=n(1),o=n(11),i=n(18),u=n(2)(\"toStringTag\"),s=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),c=0;c<s.length;c++){var f=s[c],a=r[f],l=a&&a.prototype;l&&!l[u]&&o(l,u,f),i[f]=i.Array}},function(t,e){e.f=Object.getOwnPropertySymbols},,function(t,e,n){var r=n(16),o=n(2)(\"toStringTag\"),i=\"Arguments\"==r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(n=u(e=Object(t),o))?n:i?r(e):\"Object\"==(s=r(e))&&\"function\"==typeof e.callee?\"Arguments\":s}},function(t,e,n){var r=n(5),o=n(0),i=n(13);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*i(function(){n(1)}),\"Object\",u)}},function(t,e,n){var r=n(27),o=n(21),i=n(12),u=n(29),s=n(10),c=n(43),f=Object.getOwnPropertyDescriptor;e.f=n(7)?f:function(t,e){if(t=i(t),e=u(e,!0),c)try{return f(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){\"use strict\";var r=n(15),o=n(5),i=n(54),u=n(11),s=n(18),c=n(73),f=n(23),a=n(63),l=n(2)(\"iterator\"),p=!([].keys&&\"next\"in[].keys()),v=function(){return this};t.exports=function(t,e,n,d,h,y,_){c(n,e,d);var b,g,m,w=function(t){if(!p&&t in P)return P[t];switch(t){case\"keys\":case\"values\":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+\" Iterator\",O=\"values\"==h,M=!1,P=t.prototype,S=P[l]||P[\"@@iterator\"]||h&&P[h],L=S||w(h),j=h?O?w(\"entries\"):L:void 0,k=\"Array\"==e?P.entries||S:S;if(k&&(m=a(k.call(new t)))!==Object.prototype&&m.next&&(f(m,x,!0),r||\"function\"==typeof m[l]||u(m,l,v)),O&&S&&\"values\"!==S.name&&(M=!0,L=function(){return S.call(this)}),r&&!_||!p&&!M&&P[l]||u(P,l,L),s[e]=L,s[x]=v,h)if(b={values:O?L:w(\"values\"),keys:y?L:w(\"keys\"),entries:j},_)for(g in b)g in P||i(P,g,b[g]);else o(o.P+o.F*(p||M),e,b);return b}},function(t,e,n){t.exports=n(11)},function(t,e,n){var r=n(1).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(6),o=n(20),i=n(2)(\"species\");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||void 0==(n=r(u)[i])?e:o(n)}},function(t,e,n){var r,o,i,u=n(17),s=n(83),c=n(55),f=n(28),a=n(1),l=a.process,p=a.setImmediate,v=a.clearImmediate,d=a.MessageChannel,h=a.Dispatch,y=0,_={},b=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},g=function(t){b.call(t.data)};p&&v||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++y]=function(){s(\"function\"==typeof t?t:Function(t),e)},r(y),y},v=function(t){delete _[t]},\"process\"==n(16)(l)?r=function(t){l.nextTick(u(b,t,1))}:h&&h.now?r=function(t){h.now(u(b,t,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=g,r=u(i.postMessage,i,1)):a.addEventListener&&\"function\"==typeof postMessage&&!a.importScripts?(r=function(t){a.postMessage(t+\"\",\"*\")},a.addEventListener(\"message\",g,!1)):r=\"onreadystatechange\"in f(\"script\")?function(t){c.appendChild(f(\"script\")).onreadystatechange=function(){c.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:p,clear:v}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(6),o=n(9),i=n(37);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(91),o=_interopRequireDefault(r),i=n(93),u=_interopRequireDefault(i),s=\"function\"==typeof u.default&&\"symbol\"==typeof o.default?function(t){return typeof t}:function(t){return t&&\"function\"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?\"symbol\":typeof t};e.default=\"function\"==typeof u.default&&\"symbol\"===s(o.default)?function(t){return void 0===t?\"undefined\":s(t)}:function(t){return t&&\"function\"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?\"symbol\":void 0===t?\"undefined\":s(t)}},function(t,e,n){var r=n(44),o=n(32).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(16);t.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(t){return\"String\"==r(t)?t.split(\"\"):Object(t)}},function(t,e,n){var r=n(10),o=n(33),i=n(30)(\"IE_PROTO\"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){t.exports={default:n(68),__esModule:!0}},,function(t,e,n){var r=n(12),o=n(45),i=n(67);t.exports=function(t){return function(e,n,u){var s,c=r(e),f=o(c.length),a=i(u,f);if(t&&n!=n){for(;f>a;)if((s=c[a++])!=s)return!0}else for(;f>a;a++)if((t||a in c)&&c[a]===n)return t||a||0;return!t&&-1}}},function(t,e,n){var r=n(24),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){n(69);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(5);r(r.S+r.F*!n(7),\"Object\",{defineProperty:n(8).f})},function(t,e,n){var r=n(49),o=n(2)(\"iterator\"),i=n(18);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t[\"@@iterator\"]||i[r(t)]}},function(t,e,n){n(52),n(42),n(46),n(78),n(89),n(90),t.exports=n(0).Promise},function(t,e,n){var r=n(24),o=n(25);t.exports=function(t){return function(e,n){var i,u,s=String(o(e)),c=r(n),f=s.length;return c<0||c>=f?t?\"\":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===f||(u=s.charCodeAt(c+1))<56320||u>57343?t?s.charAt(c):i:t?s.slice(c,c+2):u-56320+(i-55296<<10)+65536)}}},function(t,e,n){\"use strict\";var r=n(41),o=n(21),i=n(23),u={};n(11)(u,n(2)(\"iterator\"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+\" Iterator\")}},function(t,e,n){var r=n(8),o=n(6),i=n(19);t.exports=n(7)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),s=u.length,c=0;s>c;)r.f(t,n=u[c++],e[n]);return t}},function(t,e,n){\"use strict\";var r=n(76),o=n(77),i=n(18),u=n(12);t.exports=n(53)(Array,\"Array\",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):\"keys\"==e?o(0,n):\"values\"==e?o(0,t[n]):o(0,[n,t[n]])},\"values\"),i.Arguments=i.Array,r(\"keys\"),r(\"values\"),r(\"entries\")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){\"use strict\";var r,o,i,u,s=n(15),c=n(1),f=n(17),a=n(49),l=n(5),p=n(9),v=n(20),d=n(79),h=n(80),y=n(56),_=n(57).set,b=n(84)(),g=n(37),m=n(58),w=n(85),x=n(59),O=c.TypeError,M=c.process,P=M&&M.versions,S=P&&P.v8||\"\",L=c.Promise,j=\"process\"==a(M),k=function(){},E=o=g.f,R=!!function(){try{var t=L.resolve(1),e=(t.constructor={})[n(2)(\"species\")]=function(t){t(k,k)};return(j||\"function\"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==S.indexOf(\"6.6\")&&-1===w.indexOf(\"Chrome/66\")}catch(t){}}(),T=function(t){var e;return!(!p(t)||\"function\"!=typeof(e=t.then))&&e},C=function(t,e){if(!t._n){t._n=!0;var n=t._c;b(function(){for(var r=t._v,o=1==t._s,i=0;n.length>i;)!function(e){var n,i,u,s=o?e.ok:e.fail,c=e.resolve,f=e.reject,a=e.domain;try{s?(o||(2==t._h&&F(t),t._h=1),!0===s?n=r:(a&&a.enter(),n=s(r),a&&(a.exit(),u=!0)),n===e.promise?f(O(\"Promise-chain cycle\")):(i=T(n))?i.call(n,c,f):c(n)):f(r)}catch(t){a&&!u&&a.exit(),f(t)}}(n[i++]);t._c=[],t._n=!1,e&&!t._h&&A(t)})}},A=function(t){_.call(c,function(){var e,n,r,o=t._v,i=D(t);if(i&&(e=m(function(){j?M.emit(\"unhandledRejection\",o,t):(n=c.onunhandledrejection)?n({promise:t,reason:o}):(r=c.console)&&r.error&&r.error(\"Unhandled promise rejection\",o)}),t._h=j||D(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){_.call(c,function(){var e;j?M.emit(\"rejectionHandled\",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})})},q=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),C(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw O(\"Promise can't be resolved itself\");(e=T(t))?b(function(){var r={_w:n,_d:!1};try{e.call(t,f(I,r,1),f(q,r,1))}catch(t){q.call(r,t)}}):(n._v=t,n._s=1,C(n,!1))}catch(t){q.call({_w:n,_d:!1},t)}}};R||(L=function(t){d(this,L,\"Promise\",\"_h\"),v(t),r.call(this);try{t(f(I,this,1),f(q,this,1))}catch(t){q.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(86)(L.prototype,{then:function(t,e){var n=E(y(this,L));return n.ok=\"function\"!=typeof t||t,n.fail=\"function\"==typeof e&&e,n.domain=j?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=f(I,t,1),this.reject=f(q,t,1)},g.f=E=function(t){return t===L||t===u?new i(t):o(t)}),l(l.G+l.W+l.F*!R,{Promise:L}),n(23)(L,\"Promise\"),n(87)(\"Promise\"),u=n(0).Promise,l(l.S+l.F*!R,\"Promise\",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(s||!R),\"Promise\",{resolve:function(t){return x(s&&this===u?L:this,t)}}),l(l.S+l.F*!(R&&n(88)(function(t){L.all(t).catch(k)})),\"Promise\",{all:function(t){var e=this,n=E(e),r=n.resolve,o=n.reject,i=m(function(){var n=[],i=0,u=1;h(t,!1,function(t){var s=i++,c=!1;n.push(void 0),u++,e.resolve(t).then(function(t){c||(c=!0,n[s]=t,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=E(e),r=n.reject,o=m(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+\": incorrect invocation!\");return t}},function(t,e,n){var r=n(17),o=n(81),i=n(82),u=n(6),s=n(45),c=n(70),f={},a={},e=t.exports=function(t,e,n,l,p){var v,d,h,y,_=p?function(){return t}:c(t),b=r(n,l,e?2:1),g=0;if(\"function\"!=typeof _)throw TypeError(t+\" is not iterable!\");if(i(_)){for(v=s(t.length);v>g;g++)if((y=e?b(u(d=t[g])[0],d[1]):b(t[g]))===f||y===a)return y}else for(h=_.call(t);!(d=h.next()).done;)if((y=o(h,b,d.value,e))===f||y===a)return y};e.BREAK=f,e.RETURN=a},function(t,e,n){var r=n(6);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(18),o=n(2)(\"iterator\"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(1),o=n(57).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,s=r.Promise,c=\"process\"==n(16)(u);t.exports=function(){var t,e,n,f=function(){var r,o;for(c&&(r=u.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(c)n=function(){u.nextTick(f)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var a=s.resolve(void 0);n=function(){a.then(f)}}else n=function(){o.call(r,f)};else{var l=!0,p=document.createTextNode(\"\");new i(f).observe(p,{characterData:!0}),n=function(){p.data=l=!l}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var r=n(1),o=r.navigator;t.exports=o&&o.userAgent||\"\"},function(t,e,n){var r=n(11);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},function(t,e,n){\"use strict\";var r=n(1),o=n(0),i=n(8),u=n(7),s=n(2)(\"species\");t.exports=function(t){var e=\"function\"==typeof o[t]?o[t]:r[t];u&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(2)(\"iterator\"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(t){}return n}},function(t,e,n){\"use strict\";var r=n(5),o=n(0),i=n(1),u=n(56),s=n(59);r(r.P+r.R,\"Promise\",{finally:function(t){var e=u(this,o.Promise||i.Promise),n=\"function\"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){\"use strict\";var r=n(5),o=n(37),i=n(58);r(r.S,\"Promise\",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){t.exports={default:n(92),__esModule:!0}},function(t,e,n){n(42),n(46),t.exports=n(39).f(\"iterator\")},function(t,e,n){t.exports={default:n(94),__esModule:!0}},function(t,e,n){n(95),n(52),n(100),n(101),t.exports=n(0).Symbol},function(t,e,n){\"use strict\";var r=n(1),o=n(10),i=n(7),u=n(5),s=n(54),c=n(96).KEY,f=n(13),a=n(31),l=n(23),p=n(22),v=n(2),d=n(39),h=n(40),y=n(97),_=n(98),b=n(6),g=n(9),m=n(12),w=n(29),x=n(21),O=n(41),M=n(99),P=n(51),S=n(8),L=n(19),j=P.f,k=S.f,E=M.f,R=r.Symbol,T=r.JSON,C=T&&T.stringify,A=v(\"_hidden\"),D=v(\"toPrimitive\"),F={}.propertyIsEnumerable,q=a(\"symbol-registry\"),I=a(\"symbols\"),N=a(\"op-symbols\"),B=Object.prototype,W=\"function\"==typeof R,G=r.QObject,U=!G||!G.prototype||!G.prototype.findChild,V=i&&f(function(){return 7!=O(k({},\"a\",{get:function(){return k(this,\"a\",{value:7}).a}})).a})?function(t,e,n){var r=j(B,e);r&&delete B[e],k(t,e,n),r&&t!==B&&k(B,e,r)}:k,H=function(t){var e=I[t]=O(R.prototype);return e._k=t,e},K=W&&\"symbol\"==typeof R.iterator?function(t){return\"symbol\"==typeof t}:function(t){return t instanceof R},J=function(t,e,n){return t===B&&J(N,e,n),b(t),e=w(e,!0),b(n),o(I,e)?(n.enumerable?(o(t,A)&&t[A][e]&&(t[A][e]=!1),n=O(n,{enumerable:x(0,!1)})):(o(t,A)||k(t,A,x(1,{})),t[A][e]=!0),V(t,e,n)):k(t,e,n)},z=function(t,e){b(t);for(var n,r=y(e=m(e)),o=0,i=r.length;i>o;)J(t,n=r[o++],e[n]);return t},Y=function(t,e){return void 0===e?O(t):z(O(t),e)},Q=function(t){var e=F.call(this,t=w(t,!0));return!(this===B&&o(I,t)&&!o(N,t))&&(!(e||!o(this,t)||!o(I,t)||o(this,A)&&this[A][t])||e)},X=function(t,e){if(t=m(t),e=w(e,!0),t!==B||!o(I,e)||o(N,e)){var n=j(t,e);return!n||!o(I,e)||o(t,A)&&t[A][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=E(m(t)),r=[],i=0;n.length>i;)o(I,e=n[i++])||e==A||e==c||r.push(e);return r},$=function(t){for(var e,n=t===B,r=E(n?N:m(t)),i=[],u=0;r.length>u;)!o(I,e=r[u++])||n&&!o(B,e)||i.push(I[e]);return i};W||(R=function(){if(this instanceof R)throw TypeError(\"Symbol is not a constructor!\");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(N,n),o(this,A)&&o(this[A],t)&&(this[A][t]=!1),V(this,t,x(1,n))};return i&&U&&V(B,t,{configurable:!0,set:e}),H(t)},s(R.prototype,\"toString\",function(){return this._k}),P.f=X,S.f=J,n(61).f=M.f=Z,n(27).f=Q,n(47).f=$,i&&!n(15)&&s(B,\"propertyIsEnumerable\",Q,!0),d.f=function(t){return H(v(t))}),u(u.G+u.W+u.F*!W,{Symbol:R});for(var tt=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),et=0;tt.length>et;)v(tt[et++]);for(var nt=L(v.store),rt=0;nt.length>rt;)h(nt[rt++]);u(u.S+u.F*!W,\"Symbol\",{for:function(t){return o(q,t+=\"\")?q[t]:q[t]=R(t)},keyFor:function(t){if(!K(t))throw TypeError(t+\" is not a symbol!\");for(var e in q)if(q[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),u(u.S+u.F*!W,\"Object\",{create:Y,defineProperty:J,defineProperties:z,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),T&&u(u.S+u.F*(!W||f(function(){var t=R();return\"[null]\"!=C([t])||\"{}\"!=C({a:t})||\"{}\"!=C(Object(t))})),\"JSON\",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!K(t))return _(e)||(e=function(t,e){if(\"function\"==typeof n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,C.apply(T,r)}}),R.prototype[D]||n(11)(R.prototype,D,R.prototype.valueOf),l(R,\"Symbol\"),l(Math,\"Math\",!0),l(r.JSON,\"JSON\",!0)},function(t,e,n){var r=n(22)(\"meta\"),o=n(9),i=n(10),u=n(8).f,s=0,c=Object.isExtensible||function(){return!0},f=!n(13)(function(){return c(Object.preventExtensions({}))}),a=function(t){u(t,r,{value:{i:\"O\"+ ++s,w:{}}})},l=function(t,e){if(!o(t))return\"symbol\"==typeof t?t:(\"string\"==typeof t?\"S\":\"P\")+t;if(!i(t,r)){if(!c(t))return\"F\";if(!e)return\"E\";a(t)}return t[r].i},p=function(t,e){if(!i(t,r)){if(!c(t))return!0;if(!e)return!1;a(t)}return t[r].w},v=function(t){return f&&d.NEED&&c(t)&&!i(t,r)&&a(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:v}},function(t,e,n){var r=n(19),o=n(47),i=n(27);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,s=n(t),c=i.f,f=0;s.length>f;)c.call(t,u=s[f++])&&e.push(u);return e}},function(t,e,n){var r=n(16);t.exports=Array.isArray||function(t){return\"Array\"==r(t)}},function(t,e,n){var r=n(12),o=n(61).f,i={}.toString,u=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&\"[object Window]\"==i.call(t)?s(t):o(r(t))}},function(t,e,n){n(40)(\"asyncIterator\")},function(t,e,n){n(40)(\"observable\")},,function(t,e,n){n(104),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var r=n(33),o=n(63);n(50)(\"getPrototypeOf\",function(){return function(t){return o(r(t))}})},function(t,e,n){t.exports={default:n(106),__esModule:!0}},function(t,e,n){n(107),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var r=n(5);r(r.S,\"Object\",{setPrototypeOf:n(108).set})},function(t,e,n){var r=n(9),o=n(6),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+\": can't set as prototype!\")};t.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(t,e,r){try{r=n(17)(Function.call,n(51).f(Object.prototype,\"__proto__\").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){t.exports={default:n(110),__esModule:!0}},function(t,e,n){n(111);var r=n(0).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(5);r(r.S,\"Object\",{create:n(41)})},,,,,,,,,,,,,,,function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(26),o=_interopRequireDefault(r),i=n(3),u=_interopRequireDefault(i),s=n(4),c=_interopRequireDefault(s),f=n(34),a=_interopRequireDefault(f),l=n(35),p=_interopRequireDefault(l),v=n(127),d=_interopRequireDefault(v),h=function(t){function MiniBus(){return(0,u.default)(this,MiniBus),(0,a.default)(this,(MiniBus.__proto__||(0,o.default)(MiniBus)).call(this))}return(0,p.default)(MiniBus,t),(0,c.default)(MiniBus,[{key:\"postMessage\",value:function(t,e,n){var r=this;return r._genId(t),r._responseCallback(t,e,n),r._onPostMessage(t),t.id}},{key:\"_onMessage\",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?(e._publishOn(n,t),t.to.startsWith(\"hyperty\")||e._publishOnDefault(t)):e._publishOnDefault(t)}}}]),MiniBus}(d.default);e.default=h,t.exports=e.default},function(t,e,n){\"use strict\";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(14),o=_interopRequireDefault(r),i=n(3),u=_interopRequireDefault(i),s=n(4),c=_interopRequireDefault(s),f=n(38),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(f),l=a.getLogger(\"Bus\"),p=function(){function Bus(){(0,u.default)(this,Bus);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=15e3,t._responseCallbacks={},t._registerExternalListener()}return(0,c.default)(Bus,[{key:\"addListener\",value:function(t,e){var n=this,r=new v(n._subscriptions,t,e),o=n._subscriptions[t];return o||(o=[],n._subscriptions[t]=o),o.push(r),r}},{key:\"addResponseListener\",value:function(t,e,n){this._responseCallbacks[t+e]=n}},{key:\"removeResponseListener\",value:function(t,e){delete this._responseCallbacks[t+e]}},{key:\"removeAllListenersOf\",value:function(t){delete this._subscriptions[t]}},{key:\"bind\",value:function(t,e,n){var r=this,o=this;return{thisListener:o.addListener(t,function(t){n.postMessage(t)}),targetListener:n.addListener(e,function(t){o.postMessage(t)}),unbind:function(){r.thisListener.remove(),r.targetListener.remove()}}}},{key:\"_publishOnDefault\",value:function(t){var e=this._subscriptions[\"*\"];e&&this._publishOn(e,t)}},{key:\"_publishOn\",value:function(t,e){t.forEach(function(t){t._callback(e)})}},{key:\"_responseCallback\",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this;if(e){var o=t.from+t.id;r._responseCallbacks[o]=e,n&&setTimeout(function(){var e=r._responseCallbacks[o];if(delete r._responseCallbacks[o],e){e({id:t.id,type:\"response\",body:{code:408,desc:\"Response timeout!\",value:t}})}},r._responseTimeOut)}}},{key:\"_onResponse\",value:function(t){var e=this;if(\"response\"===t.type){var n=t.to+t.id,r=e._responseCallbacks[n];if(t.body.code>=200&&delete e._responseCallbacks[n],r)return r(t),!0}return!1}},{key:\"_onMessage\",value:function(t){var e=this;if(!e._onResponse(t)){var n=e._subscriptions[t.to];n?e._publishOn(n,t):e._publishOnDefault(t)}}},{key:\"_genId\",value:function(t){t.id&&0!==t.id||(this._msgId++,t.id=this._msgId)}},{key:\"postMessage\",value:function(t,e){}},{key:\"postMessageWithRetries\",value:function(t,e,n){var r=this,i=0,u=function(){return new o.default(function(e,o){r.postMessage(t,function(r){408===r.body.code||500===r.body.code?o():(l.info(\"[Bus.postMessageWithRetries] msg delivered: \",t),n(r),e())})})};!function tryAgain(){u().then(function(){},function(){if(l.warn(\"[Bus.postMessageWithRetries] Message Bounced (retry \"+i+\"): '\",t),!(i++<e)){var n=\"[Error] Message Bounced (delivery attempts \"+e+\"): '\";throw new Error(n+t)}tryAgain()})}()}},{key:\"_onPostMessage\",value:function(t){}},{key:\"_registerExternalListener\",value:function(){}}]),Bus}(),v=function(){function MsgListener(t,e,n){(0,u.default)(this,MsgListener);var r=this;r._subscriptions=t,r._url=e,r._callback=n}return(0,c.default)(MsgListener,[{key:\"remove\",value:function(){var t=this,e=t._subscriptions[t._url];if(e){var n=e.indexOf(t);e.splice(n,1),0===e.length&&delete t._subscriptions[t._url]}}},{key:\"url\",get:function(){return this._url}}]),MsgListener}();e.default=p,t.exports=e.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(126),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default,t.exports=e.default}])});","// version: 0.14.0\n// date: Wed Nov 07 2018 09:10:47 GMT+0000 (Western European Standard Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n// version: 0.14.0\n// date: Wed Nov 07 2018 09:10:47 GMT+0000 (Western European Standard Time)\n// licence: \n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"sandbox\",[],t):\"object\"==typeof exports?exports.sandbox=t():e.sandbox=t()}(\"undefined\"!=typeof self?self:this,function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,\"a\",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p=\"\",__webpack_require__(__webpack_require__.s=154)}([function(e,t){var r=e.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=r)},function(e,t){var r=e.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=r)},function(e,t,r){var n=r(31)(\"wks\"),o=r(22),i=r(1).Symbol,a=\"function\"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)(\"Symbol.\"+e))}).store=n},function(e,t,r){\"use strict\";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(64),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}()},function(e,t,r){var n=r(1),o=r(0),i=r(17),a=r(11),s=r(10),u=function(e,t,r){var c,l,d,f=e&u.F,p=e&u.G,y=e&u.S,v=e&u.P,h=e&u.B,_=e&u.W,b=p?o:o[t]||(o[t]={}),m=b.prototype,g=p?n:y?n[t]:(n[t]||{}).prototype;p&&(r=t);for(c in r)(l=!f&&g&&void 0!==g[c])&&s(b,c)||(d=l?g[c]:r[c],b[c]=p&&\"function\"!=typeof g[c]?r[c]:h&&l?i(d,n):_&&g[c]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):v&&\"function\"==typeof d?i(Function.call,d):d,v&&((b.virtual||(b.virtual={}))[c]=d,e&u.R&&m&&!m[c]&&a(m,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(9);e.exports=function(e){if(!n(e))throw TypeError(e+\" is not an object!\");return e}},function(e,t,r){e.exports=!r(13)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(e,t,r){var n=r(6),o=r(43),i=r(29),a=Object.defineProperty;t.f=r(7)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if(\"get\"in r||\"set\"in r)throw TypeError(\"Accessors not supported!\");return\"value\"in r&&(e[t]=r.value),e}},function(e,t){e.exports=function(e){return\"object\"==typeof e?null!==e:\"function\"==typeof e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(8),o=r(21);e.exports=r(7)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(62),o=r(25);e.exports=function(e){return n(o(e))}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){e.exports={default:r(71),__esModule:!0}},function(e,t){e.exports=!0},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(20);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports={}},function(e,t,r){var n=r(44),o=r(32);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){e.exports=function(e){if(\"function\"!=typeof e)throw TypeError(e+\" is not a function!\");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return\"Symbol(\".concat(void 0===e?\"\":e,\")_\",(++r+n).toString(36))}},function(e,t,r){var n=r(8).f,o=r(10),i=r(2)(\"toStringTag\");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError(\"Can't call method on  \"+e);return e}},function(e,t,r){e.exports={default:r(103),__esModule:!0}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(9),o=r(1).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,r){var n=r(9);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&\"function\"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if(\"function\"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&\"function\"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError(\"Can't convert object to primitive value\")}},function(e,t,r){var n=r(31)(\"keys\"),o=r(22);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,r){var n=r(0),o=r(1),i=o[\"__core-js_shared__\"]||(o[\"__core-js_shared__\"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:n.version,mode:r(15)?\"pure\":\"global\",copyright:\"© 2018 Denis Pushkarev (zloirock.ru)\"})},function(e,t){e.exports=\"constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf\".split(\",\")},function(e,t,r){var n=r(25);e.exports=function(e){return Object(n(e))}},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(60),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!==(void 0===t?\"undefined\":(0,o.default)(t))&&\"function\"!=typeof t?e:t}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(105),o=_interopRequireDefault(n),i=r(109),a=_interopRequireDefault(i),s=r(60),u=_interopRequireDefault(s);t.default=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+(void 0===t?\"undefined\":(0,u.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function divideURL(e){function recurse(e){var t=/([a-zA-Z-]*)(:\\/\\/(?:\\.)?|:)([-a-zA-Z0-9@:%._+~#=]{2,256})([-a-zA-Z0-9@:%._+~#=\\/]*)/gi;return e.replace(t,\"$1,$3,$4\").split(\",\")}var t=recurse(e);if(t[0]===e&&!t[0].includes(\"@\")){return{type:\"\",domain:e,identity:\"\"}}if(t[0]===e&&t[0].includes(\"@\")){t=recurse((t[0]===e?\"smtp\":t[0])+\"://\"+t[0])}return t[1].includes(\"@\")&&(t[2]=t[0]+\"://\"+t[1],t[1]=t[1].substr(t[1].indexOf(\"@\")+1)),{type:t[0],domain:t[1],identity:t[2]}}function emptyObject(e){return!((0,a.default)(e).length>0)}function secondsSinceEpoch(){return Math.floor(Date.now()/1e3)}function deepClone(e){if(e)return JSON.parse((0,o.default)(e))}function removePathFromURL(e){var t=e.split(\"/\");return t[0]+\"//\"+t[2]+\"/\"+t[3]}function getUserURLFromEmail(e){var t=e.indexOf(\"@\");return\"user://\"+e.substring(t+1,e.length)+\"/\"+e.substring(0,t)}function getUserEmailFromURL(e){var t=divideURL(e);return t.identity.replace(\"/\",\"\")+\"@\"+t.domain}function convertToUserURL(e){if(\"user://\"===e.substring(0,7)){var t=divideURL(e);if(t.domain&&t.identity)return e;throw\"userURL with wrong format\"}return getUserURLFromEmail(e)}function isDataObjectURL(e){var t=[\"domain-idp\",\"runtime\",\"domain\",\"hyperty\"],r=e.split(\"://\"),n=r[0];return-1===t.indexOf(n)}function isLegacy(e){return e.split(\"@\").length>1}function isURL(e){return e.split(\"/\").length>=3}function isUserURL(e){return\"user\"===divideURL(e).type}function isHypertyURL(e){return\"hyperty\"===divideURL(e).type}function getConfigurationResources(e,t,r){return e[t][r]}function buildURL(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e[t],s=void 0;if(!a.hasOwnProperty(r))throw Error(\"The configuration \"+(0,o.default)(a,\"\",2)+\" don't have the \"+r+\" resource you are looking for\");var u=a[r];return n?(s=u.prefix+e.domain+u.suffix+n,u.hasOwnProperty(\"fallback\")&&i&&(s=u.fallback.indexOf(\"%domain%\")?u.fallback.replace(/(%domain%)/g,e.domain)+n:u.fallback+n)):s=u.prefix+e.domain+u.suffix,s}function generateGUID(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return s4()+s4()+\"-\"+s4()+\"-\"+s4()+\"-\"+s4()+\"-\"+s4()+s4()+s4()}function getUserIdentityDomain(e){var t=divideURL(e),r=t.domain.split(\".\"),n=r.length;return 1==n?r[n-1]:r[n-2]+\".\"+r[n-1]}function isBackendServiceURL(e){var t=divideURL(e),r=t.domain.split(\".\"),n=[\"domain\",\"global\",\"domain-idp\"],o=[\"registry\",\"msg-node\"],i=void 0;return r.length>1&&(i=r.filter(function(e){return-1!==o.indexOf(e)})[0]),!(!i||-1===o.indexOf(i))||!!t.type&&-1!==n.indexOf(t.type)}function divideEmail(e){var t=e.indexOf(\"@\");return{username:e.substring(0,t),domain:e.substring(t+1,e.length)}}function assign(e,t,r){e||(e={}),\"string\"==typeof t&&(t=parseAttributes(t));for(var n=t.length-1,o=0;o<n;++o){var i=t[o];i in e||(e[i]={}),e=e[i]}e[t[n]]=r}function splitObjectURL(e){var t=e.split(\"/\"),r=t[0]+\"//\"+t[2]+\"/\"+t[3],n=t[5],o={url:r,resource:n};return o}function checkAttribute(e){var t=/((([a-zA-Z]+):\\/\\/([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})\\/[a-zA-Z0-9.]+@[a-zA-Z0-9]+(-)?[a-zA-Z0-9]+(\\.)?[a-zA-Z0-9]{2,10}?\\.[a-zA-Z]{2,10})(.+(?=.identity))?/gm,r=[],n=[];if(null==e.match(t))n=e.split(\".\");else{for(var o=void 0;null!==(o=t.exec(e));)o.index===t.lastIndex&&t.lastIndex++,o.forEach(function(e,t){0===t&&r.push(e)});var i=void 0;r.forEach(function(t){i=e.replace(t,\"*-*\"),n=i.split(\".\").map(function(e){return\"*-*\"===e?t:e})})}return n}function parseAttributes(e){var t=/([0-9a-zA-Z][-\\w]*):\\/\\//g;if(e.includes(\"://\")){var r=e.split(t)[0],n=r.split(\".\"),o=e.replace(r,\"\");if(e.includes(\"identity\")){var i=o.split(\"identity.\");o=i[0].slice(\".\",-1),i=i[1].split(\".\"),n.push(o,\"identity\"),n=n.concat(i)}else n.push(o);return n.filter(Boolean)}return e.split(\".\")}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return(0,o.default)(e)===(0,o.default)({})}function chatkeysToStringCloner(e){var t={},r=(0,a.default)(e);if(r)try{for(var n=0;n<r.length;n++){var o=r[n];t[o]={},t[o].sessionKey=e[o].sessionKey.toString(),t[o].isToEncrypt=e[o].isToEncrypt}}catch(e){}return t}function chatkeysToArrayCloner(e){var t={},r=(0,a.default)(e);if(r)try{for(var n=0;n<r.length;n++){var o=r[n];t[o]={};var i=JSON.parse(\"[\"+e[o].sessionKey+\"]\");t[o].sessionKey=new Uint8Array(i),t[o].isToEncrypt=e[o].isToEncrypt}}catch(e){}return t}function parseMessageURL(e){var t=e.split(\"/\");return t.length<=6?t[0]+\"//\"+t[2]+\"/\"+t[3]:t[0]+\"//\"+t[2]+\"/\"+t[3]+\"/\"+t[4]}function availableSpace(e,t){var r=(e/t).toFixed(2);return{quota:t,usage:e,percent:Number(r)}}function encode(e){try{var t=stringify(e);return btoa(t)}catch(e){throw e}}function decode(e){try{return JSON.parse(atob(e))}catch(e){throw e}}function decodeToUint8Array(e){try{return new Uint8Array(decode(e))}catch(e){throw e}}function stringify(e){try{return e.constructor===Uint8Array?\"[\"+e.toString()+\"]\":(0,o.default)(e)}catch(e){throw e}}function parse(e){try{return JSON.parse(e)}catch(e){throw e}}function parseToUint8Array(e){try{return new Uint8Array(parse(e))}catch(e){throw e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(65),o=_interopRequireDefault(n),i=r(48),a=_interopRequireDefault(i);t.divideURL=divideURL,t.emptyObject=emptyObject,t.secondsSinceEpoch=secondsSinceEpoch,t.deepClone=deepClone,t.removePathFromURL=removePathFromURL,t.getUserURLFromEmail=getUserURLFromEmail,t.getUserEmailFromURL=getUserEmailFromURL,t.convertToUserURL=convertToUserURL,t.isDataObjectURL=isDataObjectURL,t.isLegacy=isLegacy,t.isURL=isURL,t.isUserURL=isUserURL,t.isHypertyURL=isHypertyURL,t.getConfigurationResources=getConfigurationResources,t.buildURL=buildURL,t.generateGUID=generateGUID,t.getUserIdentityDomain=getUserIdentityDomain,t.isBackendServiceURL=isBackendServiceURL,t.divideEmail=divideEmail,t.assign=assign,t.splitObjectURL=splitObjectURL,t.checkAttribute=checkAttribute,t.parseAttributes=parseAttributes,t.isEmpty=isEmpty,t.chatkeysToStringCloner=chatkeysToStringCloner,t.chatkeysToArrayCloner=chatkeysToArrayCloner,t.parseMessageURL=parseMessageURL,t.availableSpace=availableSpace,t.encode=encode,t.decode=decode,t.decodeToUint8Array=decodeToUint8Array,t.stringify=stringify,t.parse=parse,t.parseToUint8Array=parseToUint8Array},function(e,t,r){\"use strict\";function PromiseCapability(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError(\"Bad Promise constructor\");t=e,r=n}),this.resolve=n(t),this.reject=n(r)}var n=r(20);e.exports.f=function(e){return new PromiseCapability(e)}},function(e,t,r){var n,o;!function(i,a){\"use strict\";n=a,void 0!==(o=\"function\"==typeof n?n.call(t,r,t,e):n)&&(e.exports=o)}(0,function(){\"use strict\";function bindMethod(e,t){var r=e[t];if(\"function\"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function realMethod(r){return\"debug\"===r&&(r=\"log\"),typeof console!==t&&(void 0!==console[r]?bindMethod(console,r):void 0!==console.log?bindMethod(console,\"log\"):e)}function replaceLoggingMethods(t,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<t?e:this.methodFactory(i,t,n)}this.log=this.debug}function enableLoggingWhenConsoleArrives(e,r,n){return function(){typeof console!==t&&(replaceLoggingMethods.call(this,r,n),this[e].apply(this,arguments))}}function defaultMethodFactory(e,t,r){return realMethod(e)||enableLoggingWhenConsoleArrives.apply(this,arguments)}function Logger(e,n,o){function persistLevelIfPossible(e){var n=(r[e]||\"silent\").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[s]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(s)+\"=\"+n+\";\"}catch(e){}}}function getPersistedLevel(){var e;if(typeof window!==t){try{e=window.localStorage[s]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(s)+\"=\");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}var i,a=this,s=\"loglevel\";e&&(s+=\":\"+e),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||defaultMethodFactory,a.getLevel=function(){return i},a.setLevel=function(r,n){if(\"string\"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!(\"number\"==typeof r&&r>=0&&r<=a.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+r;if(i=r,!1!==n&&persistLevelIfPossible(r),replaceLoggingMethods.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return\"No console available for logging\"},a.setDefaultLevel=function(e){getPersistedLevel()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var u=getPersistedLevel();null==u&&(u=null==n?\"WARN\":n),a.setLevel(u,!1)}var e=function(){},t=\"undefined\",r=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"],n=new Logger,o={};n.getLogger=function(e){if(\"string\"!=typeof e||\"\"===e)throw new TypeError(\"You must supply a name when creating a logger.\");var t=o[e];return t||(t=o[e]=new Logger(e,n.getLevel(),n.methodFactory)),t};var i=typeof window!==t?window.log:void 0;return n.noConflict=function(){return typeof window!==t&&window.log===n&&(window.log=i),n},n.getLoggers=function(){return o},n})},function(e,t,r){t.f=r(2)},function(e,t,r){var n=r(1),o=r(0),i=r(15),a=r(39),s=r(8).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});\"_\"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){var n=r(6),o=r(74),i=r(32),a=r(30)(\"IE_PROTO\"),s=function(){},u=function(){var e,t=r(28)(\"iframe\"),n=i.length;for(t.style.display=\"none\",r(55).appendChild(t),t.src=\"javascript:\",e=t.contentWindow.document,e.open(),e.write(\"<script>document.F=Object<\\/script>\"),e.close(),u=e.F;n--;)delete u.prototype[i[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:o(r,t)}},function(e,t,r){\"use strict\";var n=r(72)(!0);r(53)(String,\"String\",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){e.exports=!r(7)&&!r(13)(function(){return 7!=Object.defineProperty(r(28)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(e,t,r){var n=r(10),o=r(12),i=r(66)(!1),a=r(30)(\"IE_PROTO\");e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},function(e,t,r){var n=r(24),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){r(75);for(var n=r(1),o=r(11),i=r(18),a=r(2)(\"toStringTag\"),s=\"CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList\".split(\",\"),u=0;u<s.length;u++){var c=s[u],l=n[c],d=l&&l.prototype;d&&!d[a]&&o(d,a,c),i[c]=i.Array}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){e.exports={default:r(113),__esModule:!0}},function(e,t,r){var n=r(16),o=r(2)(\"toStringTag\"),i=\"Arguments\"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(r=a(t=Object(e),o))?r:i?n(t):\"Object\"==(s=n(t))&&\"function\"==typeof t.callee?\"Arguments\":s}},function(e,t,r){var n=r(5),o=r(0),i=r(13);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),\"Object\",a)}},function(e,t,r){var n=r(27),o=r(21),i=r(12),a=r(29),s=r(10),u=r(43),c=Object.getOwnPropertyDescriptor;t.f=r(7)?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t){},function(e,t,r){\"use strict\";var n=r(15),o=r(5),i=r(54),a=r(11),s=r(18),u=r(73),c=r(23),l=r(63),d=r(2)(\"iterator\"),f=!([].keys&&\"next\"in[].keys()),p=function(){return this};e.exports=function(e,t,r,y,v,h,_){u(r,t,y);var b,m,g,R=function(e){if(!f&&e in j)return j[e];switch(e){case\"keys\":case\"values\":return function(){return new r(this,e)}}return function(){return new r(this,e)}},O=t+\" Iterator\",w=\"values\"==v,D=!1,j=e.prototype,k=j[d]||j[\"@@iterator\"]||v&&j[v],L=k||R(v),M=v?w?R(\"entries\"):L:void 0,U=\"Array\"==t?j.entries||k:k;if(U&&(g=l(U.call(new e)))!==Object.prototype&&g.next&&(c(g,O,!0),n||\"function\"==typeof g[d]||a(g,d,p)),w&&k&&\"values\"!==k.name&&(D=!0,L=function(){return k.call(this)}),n&&!_||!f&&!D&&j[d]||a(j,d,L),s[t]=L,s[O]=p,v)if(b={values:w?L:R(\"values\"),keys:h?L:R(\"keys\"),entries:M},_)for(m in b)m in j||i(j,m,b[m]);else o(o.P+o.F*(f||D),t,b);return b}},function(e,t,r){e.exports=r(11)},function(e,t,r){var n=r(1).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(6),o=r(20),i=r(2)(\"species\");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},function(e,t,r){var n,o,i,a=r(17),s=r(83),u=r(55),c=r(28),l=r(1),d=l.process,f=l.setImmediate,p=l.clearImmediate,y=l.MessageChannel,v=l.Dispatch,h=0,_={},b=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},m=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++h]=function(){s(\"function\"==typeof e?e:Function(e),t)},n(h),h},p=function(e){delete _[e]},\"process\"==r(16)(d)?n=function(e){d.nextTick(a(b,e,1))}:v&&v.now?n=function(e){v.now(a(b,e,1))}:y?(o=new y,i=o.port2,o.port1.onmessage=m,n=a(i.postMessage,i,1)):l.addEventListener&&\"function\"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+\"\",\"*\")},l.addEventListener(\"message\",m,!1)):n=\"onreadystatechange\"in c(\"script\")?function(e){u.appendChild(c(\"script\")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(6),o=r(9),i=r(37);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(91),o=_interopRequireDefault(n),i=r(93),a=_interopRequireDefault(i),s=\"function\"==typeof a.default&&\"symbol\"==typeof o.default?function(e){return typeof e}:function(e){return e&&\"function\"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?\"symbol\":typeof e};t.default=\"function\"==typeof a.default&&\"symbol\"===s(o.default)?function(e){return void 0===e?\"undefined\":s(e)}:function(e){return e&&\"function\"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?\"symbol\":void 0===e?\"undefined\":s(e)}},function(e,t,r){var n=r(44),o=r(32).concat(\"length\",\"prototype\");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,r){var n=r(16);e.exports=Object(\"z\").propertyIsEnumerable(0)?Object:function(e){return\"String\"==n(e)?e.split(\"\"):Object(e)}},function(e,t,r){var n=r(10),o=r(33),i=r(30)(\"IE_PROTO\"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){e.exports={default:r(68),__esModule:!0}},function(e,t,r){e.exports={default:r(112),__esModule:!0}},function(e,t,r){var n=r(12),o=r(45),i=r(67);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),l=i(a,c);if(e&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(24),o=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},function(e,t,r){r(69);var n=r(0).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(5);n(n.S+n.F*!r(7),\"Object\",{defineProperty:r(8).f})},function(e,t,r){var n=r(49),o=r(2)(\"iterator\"),i=r(18);e.exports=r(0).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e[\"@@iterator\"]||i[n(e)]}},function(e,t,r){r(52),r(42),r(46),r(78),r(89),r(90),e.exports=r(0).Promise},function(e,t,r){var n=r(24),o=r(25);e.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?\"\":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,r){\"use strict\";var n=r(41),o=r(21),i=r(23),a={};r(11)(a,r(2)(\"iterator\"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+\" Iterator\")}},function(e,t,r){var n=r(8),o=r(6),i=r(19);e.exports=r(7)?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){\"use strict\";var n=r(76),o=r(77),i=r(18),a=r(12);e.exports=r(53)(Array,\"Array\",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):\"keys\"==t?o(0,r):\"values\"==t?o(0,e[r]):o(0,[r,e[r]])},\"values\"),i.Arguments=i.Array,n(\"keys\"),n(\"values\"),n(\"entries\")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){\"use strict\";var n,o,i,a,s=r(15),u=r(1),c=r(17),l=r(49),d=r(5),f=r(9),p=r(20),y=r(79),v=r(80),h=r(56),_=r(57).set,b=r(84)(),m=r(37),g=r(58),R=r(85),O=r(59),w=u.TypeError,D=u.process,j=D&&D.versions,k=j&&j.v8||\"\",L=u.Promise,M=\"process\"==l(D),U=function(){},C=o=m.f,x=!!function(){try{var e=L.resolve(1),t=(e.constructor={})[r(2)(\"species\")]=function(e){e(U,U)};return(M||\"function\"==typeof PromiseRejectionEvent)&&e.then(U)instanceof t&&0!==k.indexOf(\"6.6\")&&-1===R.indexOf(\"Chrome/66\")}catch(e){}}(),P=function(e){var t;return!(!f(e)||\"function\"!=typeof(t=e.then))&&t},E=function(e,t){if(!e._n){e._n=!0;var r=e._c;b(function(){for(var n=e._v,o=1==e._s,i=0;r.length>i;)!function(t){var r,i,a,s=o?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(o||(2==e._h&&I(e),e._h=1),!0===s?r=n:(l&&l.enter(),r=s(n),l&&(l.exit(),a=!0)),r===t.promise?c(w(\"Promise-chain cycle\")):(i=P(r))?i.call(r,u,c):u(r)):c(n)}catch(e){l&&!a&&l.exit(),c(e)}}(r[i++]);e._c=[],e._n=!1,t&&!e._h&&S(e)})}},S=function(e){_.call(u,function(){var t,r,n,o=e._v,i=q(e);if(i&&(t=g(function(){M?D.emit(\"unhandledRejection\",o,e):(r=u.onunhandledrejection)?r({promise:e,reason:o}):(n=u.console)&&n.error&&n.error(\"Unhandled promise rejection\",o)}),e._h=M||q(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},q=function(e){return 1!==e._h&&0===(e._a||e._c).length},I=function(e){_.call(u,function(){var t;M?D.emit(\"rejectionHandled\",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},T=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},H=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw w(\"Promise can't be resolved itself\");(t=P(e))?b(function(){var n={_w:r,_d:!1};try{t.call(e,c(H,n,1),c(T,n,1))}catch(e){T.call(n,e)}}):(r._v=e,r._s=1,E(r,!1))}catch(e){T.call({_w:r,_d:!1},e)}}};x||(L=function(e){y(this,L,\"Promise\",\"_h\"),p(e),n.call(this);try{e(c(H,this,1),c(T,this,1))}catch(e){T.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(86)(L.prototype,{then:function(e,t){var r=C(h(this,L));return r.ok=\"function\"!=typeof e||e,r.fail=\"function\"==typeof t&&t,r.domain=M?D.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&E(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=c(H,e,1),this.reject=c(T,e,1)},m.f=C=function(e){return e===L||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!x,{Promise:L}),r(23)(L,\"Promise\"),r(87)(\"Promise\"),a=r(0).Promise,d(d.S+d.F*!x,\"Promise\",{reject:function(e){var t=C(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!x),\"Promise\",{resolve:function(e){return O(s&&this===a?L:this,e)}}),d(d.S+d.F*!(x&&r(88)(function(e){L.all(e).catch(U)})),\"Promise\",{all:function(e){var t=this,r=C(t),n=r.resolve,o=r.reject,i=g(function(){var r=[],i=0,a=1;v(e,!1,function(e){var s=i++,u=!1;r.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=C(t),n=r.reject,o=g(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+\": incorrect invocation!\");return e}},function(e,t,r){var n=r(17),o=r(81),i=r(82),a=r(6),s=r(45),u=r(70),c={},l={},t=e.exports=function(e,t,r,d,f){var p,y,v,h,_=f?function(){return e}:u(e),b=n(r,d,t?2:1),m=0;if(\"function\"!=typeof _)throw TypeError(e+\" is not iterable!\");if(i(_)){for(p=s(e.length);p>m;m++)if((h=t?b(a(y=e[m])[0],y[1]):b(e[m]))===c||h===l)return h}else for(v=_.call(e);!(y=v.next()).done;)if((h=o(v,b,y.value,t))===c||h===l)return h};t.BREAK=c,t.RETURN=l},function(e,t,r){var n=r(6);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){var n=r(18),o=r(2)(\"iterator\"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(1),o=r(57).set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u=\"process\"==r(16)(a);e.exports=function(){var e,t,r,c=function(){var n,o;for(u&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(!i||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);r=function(){l.then(c)}}else r=function(){o.call(n,c)};else{var d=!0,f=document.createTextNode(\"\");new i(c).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){var n=r(1),o=n.navigator;e.exports=o&&o.userAgent||\"\"},function(e,t,r){var n=r(11);e.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},function(e,t,r){\"use strict\";var n=r(1),o=r(0),i=r(8),a=r(7),s=r(2)(\"species\");e.exports=function(e){var t=\"function\"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(2)(\"iterator\"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},function(e,t,r){\"use strict\";var n=r(5),o=r(0),i=r(1),a=r(56),s=r(59);n(n.P+n.R,\"Promise\",{finally:function(e){var t=a(this,o.Promise||i.Promise),r=\"function\"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){\"use strict\";var n=r(5),o=r(37),i=r(58);n(n.S,\"Promise\",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){e.exports={default:r(92),__esModule:!0}},function(e,t,r){r(42),r(46),e.exports=r(39).f(\"iterator\")},function(e,t,r){e.exports={default:r(94),__esModule:!0}},function(e,t,r){r(95),r(52),r(100),r(101),e.exports=r(0).Symbol},function(e,t,r){\"use strict\";var n=r(1),o=r(10),i=r(7),a=r(5),s=r(54),u=r(96).KEY,c=r(13),l=r(31),d=r(23),f=r(22),p=r(2),y=r(39),v=r(40),h=r(97),_=r(98),b=r(6),m=r(9),g=r(12),R=r(29),O=r(21),w=r(41),D=r(99),j=r(51),k=r(8),L=r(19),M=j.f,U=k.f,C=D.f,x=n.Symbol,P=n.JSON,E=P&&P.stringify,S=p(\"_hidden\"),q=p(\"toPrimitive\"),I={}.propertyIsEnumerable,T=l(\"symbol-registry\"),H=l(\"symbols\"),A=l(\"op-symbols\"),B=Object.prototype,N=\"function\"==typeof x,F=n.QObject,V=!F||!F.prototype||!F.prototype.findChild,z=i&&c(function(){return 7!=w(U({},\"a\",{get:function(){return U(this,\"a\",{value:7}).a}})).a})?function(e,t,r){var n=M(B,t);n&&delete B[t],U(e,t,r),n&&e!==B&&U(B,t,n)}:U,G=function(e){var t=H[e]=w(x.prototype);return t._k=e,t},W=N&&\"symbol\"==typeof x.iterator?function(e){return\"symbol\"==typeof e}:function(e){return e instanceof x},J=function(e,t,r){return e===B&&J(A,t,r),b(e),t=R(t,!0),b(r),o(H,t)?(r.enumerable?(o(e,S)&&e[S][t]&&(e[S][t]=!1),r=w(r,{enumerable:O(0,!1)})):(o(e,S)||U(e,S,O(1,{})),e[S][t]=!0),z(e,t,r)):U(e,t,r)},Y=function(e,t){b(e);for(var r,n=h(t=g(t)),o=0,i=n.length;i>o;)J(e,r=n[o++],t[r]);return e},Z=function(e,t){return void 0===t?w(e):Y(w(e),t)},K=function(e){var t=I.call(this,e=R(e,!0));return!(this===B&&o(H,e)&&!o(A,e))&&(!(t||!o(this,e)||!o(H,e)||o(this,S)&&this[S][e])||t)},X=function(e,t){if(e=g(e),t=R(t,!0),e!==B||!o(H,t)||o(A,t)){var r=M(e,t);return!r||!o(H,t)||o(e,S)&&e[S][t]||(r.enumerable=!0),r}},$=function(e){for(var t,r=C(g(e)),n=[],i=0;r.length>i;)o(H,t=r[i++])||t==S||t==u||n.push(t);return n},Q=function(e){for(var t,r=e===B,n=C(r?A:g(e)),i=[],a=0;n.length>a;)!o(H,t=n[a++])||r&&!o(B,t)||i.push(H[t]);return i};N||(x=function(){if(this instanceof x)throw TypeError(\"Symbol is not a constructor!\");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===B&&t.call(A,r),o(this,S)&&o(this[S],e)&&(this[S][e]=!1),z(this,e,O(1,r))};return i&&V&&z(B,e,{configurable:!0,set:t}),G(e)},s(x.prototype,\"toString\",function(){return this._k}),j.f=X,k.f=J,r(61).f=D.f=$,r(27).f=K,r(47).f=Q,i&&!r(15)&&s(B,\"propertyIsEnumerable\",K,!0),y.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!N,{Symbol:x});for(var ee=\"hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables\".split(\",\"),te=0;ee.length>te;)p(ee[te++]);for(var re=L(p.store),ne=0;re.length>ne;)v(re[ne++]);a(a.S+a.F*!N,\"Symbol\",{for:function(e){return o(T,e+=\"\")?T[e]:T[e]=x(e)},keyFor:function(e){if(!W(e))throw TypeError(e+\" is not a symbol!\");for(var t in T)if(T[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!N,\"Object\",{create:Z,defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),P&&a(a.S+a.F*(!N||c(function(){var e=x();return\"[null]\"!=E([e])||\"{}\"!=E({a:e})||\"{}\"!=E(Object(e))})),\"JSON\",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(m(t)||void 0!==e)&&!W(e))return _(t)||(t=function(e,t){if(\"function\"==typeof r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,E.apply(P,n)}}),x.prototype[q]||r(11)(x.prototype,q,x.prototype.valueOf),d(x,\"Symbol\"),d(Math,\"Math\",!0),d(n.JSON,\"JSON\",!0)},function(e,t,r){var n=r(22)(\"meta\"),o=r(9),i=r(10),a=r(8).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(13)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,n,{value:{i:\"O\"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!i(e,n)){if(!u(e))return\"F\";if(!t)return\"E\";l(e)}return e[n].i},f=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},p=function(e){return c&&y.NEED&&u(e)&&!i(e,n)&&l(e),e},y=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(e,t,r){var n=r(19),o=r(47),i=r(27);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var a,s=r(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,r){var n=r(16);e.exports=Array.isArray||function(e){return\"Array\"==n(e)}},function(e,t,r){var n=r(12),o=r(61).f,i={}.toString,a=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&\"[object Window]\"==i.call(e)?s(e):o(n(e))}},function(e,t,r){r(40)(\"asyncIterator\")},function(e,t,r){r(40)(\"observable\")},function(e,t,r){e.exports={default:r(122),__esModule:!0}},function(e,t,r){r(104),e.exports=r(0).Object.getPrototypeOf},function(e,t,r){var n=r(33),o=r(63);r(50)(\"getPrototypeOf\",function(){return function(e){return o(n(e))}})},function(e,t,r){e.exports={default:r(106),__esModule:!0}},function(e,t,r){r(107),e.exports=r(0).Object.setPrototypeOf},function(e,t,r){var n=r(5);n(n.S,\"Object\",{setPrototypeOf:r(108).set})},function(e,t,r){var n=r(9),o=r(6),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+\": can't set as prototype!\")};e.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(e,t,n){try{n=r(17)(Function.call,r(51).f(Object.prototype,\"__proto__\").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},function(e,t,r){e.exports={default:r(110),__esModule:!0}},function(e,t,r){r(111);var n=r(0).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(5);n(n.S,\"Object\",{create:r(41)})},function(e,t,r){var n=r(0),o=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,r){r(114),e.exports=r(0).Object.keys},function(e,t,r){var n=r(33),o=r(19);r(50)(\"keys\",function(){return function(e){return o(n(e))}})},,function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(26),o=_interopRequireDefault(n),i=r(119),a=_interopRequireDefault(i);t.default=function get(e,t,r){null===e&&(e=Function.prototype);var n=(0,a.default)(e,t);if(void 0===n){var i=(0,o.default)(e);return null===i?void 0:get(i,t,r)}if(\"value\"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)}},,,function(e,t,r){e.exports={default:r(120),__esModule:!0}},function(e,t,r){r(121);var n=r(0).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,r){var n=r(12),o=r(51).f;r(50)(\"getOwnPropertyDescriptor\",function(){return function(e,t){return o(n(e),t)}})},function(e,t,r){r(123),e.exports=r(0).Object.assign},function(e,t,r){var n=r(5);n(n.S+n.F,\"Object\",{assign:r(124)})},function(e,t,r){\"use strict\";var n=r(19),o=r(47),i=r(27),a=r(33),s=r(62),u=Object.assign;e.exports=!u||r(13)(function(){var e={},t={},r=Symbol(),n=\"abcdefghijklmnopqrst\";return e[r]=7,n.split(\"\").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join(\"\")!=n})?function(e,t){for(var r=a(e),u=arguments.length,c=1,l=o.f,d=i.f;u>c;)for(var f,p=s(arguments[c++]),y=l?n(p).concat(l(p)):n(p),v=y.length,h=0;v>h;)d.call(p,f=y[h++])&&(r[f]=p[f]);return r}:u},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(48),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(38),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),p=r(36),y=f.getLogger(\"RegistrationStatus\"),v=function(){function RegistrationStatus(e,t,r,n){(0,u.default)(this,RegistrationStatus),this._registryObjectURL=e,this._runtimeURL=t,this._domain=(0,p.divideURL)(t).domain,this._discoveredObjectURL=r,this._messageBus=n,this._subscriptionSet=!1,this._subscribers={live:{},disconnected:{}}}return(0,l.default)(RegistrationStatus,[{key:\"onLive\",value:function(e,t){var r=this;return new a.default(function(n,o){r._subscriptionSet?(r._subscribers.live[e]=t,n()):r._subscribe().then(function(){r._subscribers.live[e]=t,n()}).catch(function(e){return o(e)})})}},{key:\"onDisconnected\",value:function(e,t){var r=this;return new a.default(function(n,o){r._subscriptionSet?(r._subscribers.disconnected[e]=t,n()):r._subscribe().then(function(){r._subscribers.disconnected[e]=t,n()}).catch(function(e){return o(e)})})}},{key:\"_subscribe\",value:function(){var e=this,t={type:\"subscribe\",from:this._discoveredObjectURL,to:this._runtimeURL+\"/subscriptions\",body:{resources:[this._registryObjectURL+\"/registration\"]}};return new a.default(function(r,n){e._messageBus.postMessage(t,function(t){y.log(\"[DiscoveredObject.subscribe] \"+e._registryObjectURL+\" rcved reply \",t),200===t.body.code?(e._generateListener(e._registryObjectURL+\"/registration\"),e._subscriptionSet=!0,r()):(y.error(\"Error subscribing \",e._registryObjectURL),n(\"Error subscribing \"+e._registryObjectURL))})})}},{key:\"_generateListener\",value:function(e){var t=this;this._messageBus.addListener(e,function(e){y.log(\"[DiscoveredObject.notification] \"+t._registryObjectURL+\": \",e),t._processNotification(e)})}},{key:\"_processNotification\",value:function(e){var t=this,r=e.body.value;setTimeout(function(){(0,o.default)(t._subscribers[r]).forEach(function(e){return t._subscribers[r][e]()})},5e3)}},{key:\"_unsubscribe\",value:function(){var e=this,t={type:\"unsubscribe\",from:this._discoveredObjectURL,to:this._runtimeURL+\"/subscriptions\",body:{resource:this._registryObjectURL+\"/registration\"}};return new a.default(function(r,n){e._messageBus.postMessage(t,function(t){y.log(\"[DiscoveredObject.unsubscribe] \"+e._registryObjectURL+\" rcved reply \",t),200===t.body.code?r():(y.error(\"Error unsubscribing \",e._registryObjectURL),n(\"Error unsubscribing \"+e._registryObjectURL))})})}},{key:\"unsubscribeLive\",value:function(e){var t=this;return new a.default(function(r,n){e in t._subscribers.live&&delete t._subscribers.live[e],t._areSubscriptionsEmpty()?t._unsubscribe().then(function(){return r()}).catch(function(e){return n(e)}):r()})}},{key:\"unsubscribeDisconnected\",value:function(e){var t=this;return new a.default(function(r,n){e in t._subscribers.disconnected?(delete t._subscribers.disconnected[e],t._areSubscriptionsEmpty()?t._unsubscribe().then(function(){return r()}).catch(function(e){return n(e)}):r()):n(e+\" doesn't subscribe onDisconnected for \"+t._registryObjectURL)})}},{key:\"_areSubscriptionsEmpty\",value:function(){return 0===(0,o.default)(this._subscribers.live).length&&0===(0,o.default)(this._subscribers.disconnected).length}}]),RegistrationStatus}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(26),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(34),l=_interopRequireDefault(c),d=r(35),f=_interopRequireDefault(d),p=r(127),y=_interopRequireDefault(p),v=function(e){function MiniBus(){return(0,a.default)(this,MiniBus),(0,l.default)(this,(MiniBus.__proto__||(0,o.default)(MiniBus)).call(this))}return(0,f.default)(MiniBus,e),(0,u.default)(MiniBus,[{key:\"postMessage\",value:function(e,t,r){var n=this;return n._genId(e),n._responseCallback(e,t,r),n._onPostMessage(e),e.id}},{key:\"_onMessage\",value:function(e){var t=this;if(!t._onResponse(e)){var r=t._subscriptions[e.to];r?(t._publishOn(r,e),e.to.startsWith(\"hyperty\")||t._publishOnDefault(e)):t._publishOnDefault(e)}}}]),MiniBus}(y.default);t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(38),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=l.getLogger(\"Bus\"),f=function(){function Bus(){(0,a.default)(this,Bus);var e=this;e._msgId=0,e._subscriptions={},e._responseTimeOut=15e3,e._responseCallbacks={},e._registerExternalListener()}return(0,u.default)(Bus,[{key:\"addListener\",value:function(e,t){var r=this,n=new p(r._subscriptions,e,t),o=r._subscriptions[e];return o||(o=[],r._subscriptions[e]=o),o.push(n),n}},{key:\"addResponseListener\",value:function(e,t,r){this._responseCallbacks[e+t]=r}},{key:\"removeResponseListener\",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:\"removeAllListenersOf\",value:function(e){delete this._subscriptions[e]}},{key:\"bind\",value:function(e,t,r){var n=this,o=this;return{thisListener:o.addListener(e,function(e){r.postMessage(e)}),targetListener:r.addListener(t,function(e){o.postMessage(e)}),unbind:function(){n.thisListener.remove(),n.targetListener.remove()}}}},{key:\"_publishOnDefault\",value:function(e){var t=this._subscriptions[\"*\"];t&&this._publishOn(t,e)}},{key:\"_publishOn\",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:\"_responseCallback\",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this;if(t){var o=e.from+e.id;n._responseCallbacks[o]=t,r&&setTimeout(function(){var t=n._responseCallbacks[o];if(delete n._responseCallbacks[o],t){t({id:e.id,type:\"response\",body:{code:408,desc:\"Response timeout!\",value:e}})}},n._responseTimeOut)}}},{key:\"_onResponse\",value:function(e){var t=this;if(\"response\"===e.type){var r=e.to+e.id,n=t._responseCallbacks[r];if(e.body.code>=200&&delete t._responseCallbacks[r],n)return n(e),!0}return!1}},{key:\"_onMessage\",value:function(e){var t=this;if(!t._onResponse(e)){var r=t._subscriptions[e.to];r?t._publishOn(r,e):t._publishOnDefault(e)}}},{key:\"_genId\",value:function(e){e.id&&0!==e.id||(this._msgId++,e.id=this._msgId)}},{key:\"postMessage\",value:function(e,t){}},{key:\"postMessageWithRetries\",value:function(e,t,r){var n=this,i=0,a=function(){return new o.default(function(t,o){n.postMessage(e,function(n){408===n.body.code||500===n.body.code?o():(d.info(\"[Bus.postMessageWithRetries] msg delivered: \",e),r(n),t())})})};!function tryAgain(){a().then(function(){},function(){if(d.warn(\"[Bus.postMessageWithRetries] Message Bounced (retry \"+i+\"): '\",e),!(i++<t)){var r=\"[Error] Message Bounced (delivery attempts \"+t+\"): '\";throw new Error(r+e)}tryAgain()})}()}},{key:\"_onPostMessage\",value:function(e){}},{key:\"_registerExternalListener\",value:function(){}}]),Bus}(),p=function(){function MsgListener(e,t,r){(0,a.default)(this,MsgListener);var n=this;n._subscriptions=e,n._url=t,n._callback=r}return(0,u.default)(MsgListener,[{key:\"remove\",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var r=t.indexOf(e);t.splice(r,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:\"url\",get:function(){return this._url}}]),MsgListener}();t.default=f,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(129),u=_interopRequireDefault(s),c=function(){function SandboxRegistry(e){(0,o.default)(this,SandboxRegistry);var t=this;t._bus=e,t._factory=new u.default(e),t._components={},e.addListener(SandboxRegistry.InternalDeployAddress,function(e){switch(e.type){case\"create\":t._onDeploy(e);break;case\"delete\":t._onRemove(e)}})}return(0,a.default)(SandboxRegistry,[{key:\"_responseMsg\",value:function(e,t,r){var n={id:e.id,type:\"response\",from:SandboxRegistry.InternalDeployAddress,to:SandboxRegistry.ExternalDeployAddress},o={};return t&&(o.code=t),r&&(o.desc=r),n.body=o,n}},{key:\"_onDeploy\",value:function(e){var t=this,r=e.body.config,n=e.body.url,o=e.body.sourceCode,i=void 0,a=void 0;if(t._components.hasOwnProperty(n))i=500,a=\"Instance \"+n+\" already exist!\";else try{t._components[n]=t._create(n,o,r,t._factory),i=200}catch(e){i=500,a=e}var s=t._responseMsg(e,i,a);t._bus.postMessage(s)}},{key:\"_onRemove\",value:function(e){var t=this,r=e.body.url,n=void 0,o=void 0;t._components.hasOwnProperty(r)?(delete t._components[r],t._bus.removeAllListenersOf(r),n=200):(n=500,o=\"Instance \"+r+\" doesn't exist!\");var i=t._responseMsg(e,n,o);t._bus.postMessage(i)}},{key:\"_create\",value:function(e,t,r,n){}},{key:\"components\",get:function(){return this._components}}]),SandboxRegistry}();c.ExternalDeployAddress=\"hyperty-runtime://sandbox/external\",c.InternalDeployAddress=\"hyperty-runtime://sandbox/internal\",t.default=c,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(130),u=_interopRequireDefault(s),c=r(165),l=_interopRequireDefault(c),d=r(36),f=r(134),p=_interopRequireDefault(f),y=r(135),v=_interopRequireDefault(y),h=r(125),_=_interopRequireDefault(h),b=r(167),m=_interopRequireDefault(b),g=r(136),R=_interopRequireDefault(g),O=r(138),w=_interopRequireDefault(O),D=r(168),j=_interopRequireDefault(D),k=r(170),L=_interopRequireDefault(k),M=r(140),U=_interopRequireDefault(M),C=r(173),x=_interopRequireDefault(C),P=r(142),E=_interopRequireDefault(P),S=function(){function SandboxFactory(e){(0,o.default)(this,SandboxFactory);var t=this;t._bus=e,t._divideURL=d.divideURL}return(0,a.default)(SandboxFactory,[{key:\"createSyncher\",value:function(e,t,r){return new u.default(e,t,r)}},{key:\"createIdentityManager\",value:function(e,t,r){return new p.default(e,t,r)}},{key:\"createDiscovery\",value:function(e,t,r){return new v.default(e,t,r)}},{key:\"createSearch\",value:function(e,t){return new m.default(e,t)}},{key:\"createContextObserver\",value:function(e,t,r,n){return new R.default(e,t,r,n,this)}},{key:\"createContextReporter\",value:function(e,t,r){return new w.default(e,t,r,this)}},{key:\"createNotificationHandler\",value:function(e){return new l.default(e)}},{key:\"createMessageBodyIdentity\",value:function(e,t,r,n,o,i,a,s){return new j.default(e,t,r,n,o,i,a,s)}},{key:\"createChatManager\",value:function(e,t,r,n){return new L.default(e,t,r,n,this)}},{key:\"createChatController\",value:function(e,t,r,n,o,i){return new U.default(e,t,r,n,o,i)}},{key:\"createSimpleChatManager\",value:function(e,t,r,n){return new x.default(e,t,r,n,this)}},{key:\"createChat\",value:function(e,t,r,n){return new E.default(e,t,r,n)}},{key:\"createRegistrationStatus\",value:function(e,t,r,n){return new _.default(e,t,r,n)}},{key:\"divideURL\",get:function(){return this._divideURL}}]),SandboxFactory}();t.default=S,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(102),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(38),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),p=r(36),y=r(156),v=_interopRequireDefault(y),h=r(163),_=_interopRequireDefault(h),b=r(164),m=_interopRequireDefault(b),g=f.getLogger(\"Syncher\"),R=function(){function Syncher(e,t,r){(0,u.default)(this,Syncher);var n=this;n._owner=e,n._bus=t,n._subURL=r.runtimeURL+\"/sm\",n._runtimeUrl=r.runtimeURL,n._p2pHandler=r.p2pHandler,n._p2pRequester=r.p2pRequester,n._reporters={},n._observers={},n._provisionals={},t.addListener(e,function(t){if(t.from!==e)switch(g.info(\"[Syncher] Syncher-RCV: \",t,n),t.type){case\"forward\":n._onForward(t);break;case\"create\":n._onRemoteCreate(t);break;case\"delete\":n._onRemoteDelete(t);break;case\"execute\":n._onExecute(t)}})}return(0,l.default)(Syncher,[{key:\"create\",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:\"no name\",s=arguments[6],u=arguments[7];if(!e)throw Error(\"[Syncher - Create] - You need specify the data object schema\");if(!t)throw Error(\"[Syncher - Create] -The observers should be defined\");var c=this;u=u||{};var l=(0,a.default)({},u);return l.p2p=o,l.store=n,l.schema=e,l.authorise=t,l.p2pHandler=c._p2pHandler,l.p2pRequester=c._p2pRequester,l.data=r?(0,p.deepClone)(r):{},l.name=0===i.length?\"no name\":i,l.reporter=u.hasOwnProperty(\"reporter\")&&\"boolean\"!=typeof u.reporter?u.reporter:c._owner,l.resume=!1,u?(l.mutual=!u.hasOwnProperty(\"mutual\")||u.mutual,l.name=u.hasOwnProperty(\"name\")?u.name:l.name):l.mutual=!0,u.hasOwnProperty(\"reuseURL\")&&(l.resource=u.reuseURL),s&&(l.identity=s),c._create(l)}},{key:\"resumeReporters\",value:function(e){var t=this;return g.log(\"[syncher - create] - resume Reporter - criteria: \",e),(0,a.default)(e,{resume:!0}),t._resumeCreate(e)}},{key:\"subscribe\",value:function(e){return this._subscribe(e)}},{key:\"resumeObservers\",value:function(e){var t=this,r=e||{};return(0,a.default)(r,{resume:!0}),t._resumeSubscribe(r)}},{key:\"read\",value:function(e,t){var r=this;return new o.default(function(t,n){r._readReporter(e).then(function(e){t(e)})})}},{key:\"_readCallBack\",value:function(e,t,r){var n=this,o={},i={},s=0;if(e.body.code<300)if(e.body.value.hasOwnProperty(\"responses\"))if(0===s)i=e.body.value,++s;else{delete e.body.value.responses;var u=void 0;for(u in e.body.value)o.hasOwnProperty(u)||(o[u]={}),(0,a.default)(o[u],e.body.value[u]);++s,s===i.responses&&(i.childrenObjects=o,delete i.responses,n._bus.removeResponseListener(e.from,e.id),t(i))}else n._bus.removeResponseListener(e.from,e.id),t(e.body.value);else r(e.body.desc)}},{key:\"_readReporter\",value:function(e){var t=this,r={type:\"read\",from:t._owner,to:e};return new o.default(function(e,n){t._bus.postMessage(r,function(r){return t._readCallBack(r,e,n)},!1)})}},{key:\"onNotification\",value:function(e){this._onNotificationHandler=e}},{key:\"onClose\",value:function(e){this._onClose=e}},{key:\"_create\",value:function(e){var t=this;return new o.default(function(r,n){var o=(0,a.default)({},e),i=e.resume;o.created=(new Date).toISOString(),o.runtime=t._runtimeUrl;var s=(0,p.deepClone)(o);delete s.p2p,delete s.store,delete s.observers,delete s.identity;var u={type:\"create\",from:t._owner,to:t._subURL,body:{resume:i,value:s}};u.body.schema=o.schema,o.p2p&&(u.body.p2p=o.p2p),o.store&&(u.body.store=o.store),o.identity&&(u.body.identity=o.identity),t._bus.postMessage(u,function(i){if(g.log(\"[syncher - create] - create-response: \",i),200===i.body.code){o.url=i.body.resource,o.status=\"live\",o.syncher=t,o.childrens=i.body.childrenResources;var a=t._reporters[o.url];a||(a=new v.default(o),t._reporters[o.url]=a),a.inviteObservers(e.authorise,e.p2p),r(a)}else n(i.body.desc)})})}},{key:\"_resumeCreate\",value:function(e){var t=this,r=this;return new o.default(function(n,o){var i=e.resume,a={type:\"create\",from:r._owner,to:r._subURL,body:{resume:i}};g.log(\"[syncher - create]: \",e,a),e&&(a.body.value=e,e.hasOwnProperty(\"reporter\")?a.body.value.reporter=e.reporter:a.body.value.reporter=r._owner),e.p2p&&(a.body.p2p=e.p2p),e.store&&(a.body.store=e.store),e.observers&&(a.body.authorise=e.observers),e.identity&&(a.body.identity=e.identity),g.log(\"[syncher._resumeCreate] - resume message: \",a),r._bus.postMessage(a,function(e){if(g.log(\"[syncher._resumeCreate] - create-resumed-response: \",e),200===e.body.code){var i=e.body.value;for(var a in i){var s=i[a];s.data=(0,p.deepClone)(s.data)||{},s.childrenObjects&&(s.childrenObjects=(0,p.deepClone)(s.childrenObjects)),s.mutual=!1,s.resume=!0,s.status=\"live\",s.syncher=r,g.log(\"[syncher._resumeCreate] - create-resumed-dataObjectReporter\",s);var u=new v.default(s);s.childrenObjects&&u.resumeChildrens(s.childrenObjects),r._reporters[s.url]=u}n(r._reporters),t._onReportersResume&&t._onReportersResume(t._reporters)}else 404===e.body.code?n({}):o(e.body.desc)})})}},{key:\"_subscribe\",value:function(e){var t=this;return new o.default(function(r,n){var o={type:\"subscribe\",from:t._owner,to:t._subURL,body:e};g.log(\"[syncher_subscribe] - subscribe message: \",e,o),t._bus.postMessage(o,function(o){g.log(\"[syncher] - subscribe-response: \",o);var i=o.body.resource,a=t._provisionals[i];if(delete t._provisionals[i],a&&a._releaseListeners(),o.body.code<200)g.log(\"[syncher] - new DataProvisional: \",o.body.childrenResources,i),a=new m.default(t._owner,i,t._bus,o.body.childrenResources),t._provisionals[i]=a;else if(200===o.body.code){g.log(\"[syncher] - new Data Object Observer: \",o,t._provisionals);var s=o.body.value;s.syncher=t,s.p2p=e.p2p,s.store=e.store,s.identity=e.identity,s.resume=!1,s.mutual=e.mutual;var u=t._observers[i];u?u.sync():(u=new _.default(s),t._observers[i]=u),g.log(\"[syncher] - new Data Object Observer already exist: \",u),r(u),a&&a.apply(u)}else n(o.body.desc)})})}},{key:\"_resumeSubscribe\",value:function(e){var t=this,r=this;return new o.default(function(n,o){var i={type:\"subscribe\",from:r._owner,to:r._subURL,body:{}};e&&(e.hasOwnProperty(\"p2p\")&&(i.body.p2p=e.p2p),e.hasOwnProperty(\"store\")&&(i.body.store=e.store),e.hasOwnProperty(\"schema\")&&(i.body.schema=e.schema),e.hasOwnProperty(\"identity\")&&(i.body.identity=e.identity),e.hasOwnProperty(\"resource\")&&(i.body.resource=e.resource)),i.body.resume=e.resume;var a=e.mutual;e.hasOwnProperty(\"mutual\")&&(i.body.mutual=a),r._bus.postMessage(i,function(e){var i=e.body.resource,a=r._provisionals[i];if(delete r._provisionals[i],a&&a._releaseListeners(),e.body.code<200)g.log(\"[syncher] - resume new DataProvisional: \",e,i),a=new m.default(r._owner,i,r._bus,e.body.childrenResources),r._provisionals[i]=a;else if(200===e.body.code){var s=e.body.value;for(var u in s){var c=s[u];c.childrenObjects&&(c.childrenObjects=(0,p.deepClone)(c.childrenObjects)),c.data=(0,p.deepClone)(c.data)||{},c.resume=!0,c.syncher=r;var l=new _.default(c);c.childrenObjects&&l.resumeChildrens(c.childrenObjects),g.log(\"[syncher._resumeSubscribe] - new dataObject\",l),r._observers[l.url]=l,r._provisionals[l.url]&&r._provisionals[l.url].apply(l)}n(r._observers),t._onObserversResume&&t._onObserversResume(r._observers)}else 404===e.body.code?n({}):o(e.body.desc)})})}},{key:\"_onForward\",value:function(e){this._reporters[e.body.to]._onForward(e)}},{key:\"_onRemoteCreate\",value:function(e){var t=this,r=e.from.slice(0,-13),n=(0,p.divideURL)(r),o=n.domain,i={type:e.type,from:e.body.source,url:r,domain:o,schema:e.body.schema,value:e.body.value,identity:e.body.identity,ack:function(r){var n=200;r&&(n=r),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:n}})}};t._onNotificationHandler&&(g.info(\"[Syncher] NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}},{key:\"_onRemoteDelete\",value:function(e){var t=this,r=e.body.resource,n=t._observers[r],o={from:t.owner,to:t._subURL,id:e.id,type:\"unsubscribe\",body:{resource:e.body.resource}};if(t._bus.postMessage(o),delete t._observers[r],n){var i={type:e.type,url:r,identity:e.body.identity,ack:function(r){var o=200;r&&(o=r),200===o&&n.delete(),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:o,source:t._owner}})}};t._onNotificationHandler&&(g.log(\"NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}else t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:404,source:t._owner}})}},{key:\"_onExecute\",value:function(e){var t=this,r={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200}};if((e.from===t._runtimeUrl+\"/registry/\"||e.from===t._runtimeUrl+\"/registry\")&&e.body&&e.body.method&&\"close\"===e.body.method&&t._onClose){var n={type:\"close\",ack:function(e){e&&(r.body.code=e),t._bus.postMessage(r)}};g.info(\"[Syncher] Close-EVENT: \",n),t._onClose(n)}else t._bus.postMessage(r)}},{key:\"onReportersResume\",value:function(e){this._onReportersResume=e}},{key:\"onObserversResume\",value:function(e){this._onObserversResume=e}},{key:\"owner\",get:function(){return this._owner}},{key:\"reporters\",get:function(){return this._reporters}},{key:\"observers\",get:function(){return this._observers}}]),Syncher}();t.default=R,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(60),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(48),u=_interopRequireDefault(s),c=r(102),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(38),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),_=r(132),b=_interopRequireDefault(_),m=r(133),g=_interopRequireDefault(m),R=r(158),O=_interopRequireDefault(R),w=r(36),D=r(159),j=_interopRequireDefault(D),k=h.getLogger(\"DataObject\"),L=function(){function DataObject(e){function throwMandatoryParmMissingError(e){throw\"[DataObject] \"+e+\" mandatory parameter is missing\"}(0,f.default)(this,DataObject);var t=this;if(e.syncher?t._syncher=e.syncher:throwMandatoryParmMissingError(\"syncher\"),e.url?t._url=e.url:throwMandatoryParmMissingError(\"url\"),e.created?t._created=e.created:throwMandatoryParmMissingError(\"created\"),e.reporter?t._reporter=e.reporter:throwMandatoryParmMissingError(\"reporter\"),e.runtime?t._runtime=e.runtime:throwMandatoryParmMissingError(\"runtime\"),e.schema?t._schema=e.schema:throwMandatoryParmMissingError(\"schema\"),e.name?t._name=e.name:throwMandatoryParmMissingError(\"name\"),t._status=e.status,e.data?t._syncObj=new b.default(e.data):t._syncObj=new b.default({}),t._childrens=e.childrens,t._mutual=e.mutual,t._version=0,t._childId=1,t._childrenListener,t._onAddChildrenHandler,t._resumed=e.resume,e.resume&&(t._version=e.version),t._owner=e.syncher._owner,t._bus=e.syncher._bus,e.description&&(t._description=e.description),e.tags&&(t._tags=e.tags),e.resources&&(t._resources=e.resources),e.observerStorage&&(t._observerStorage=e.observerStorage),e.publicObservation&&(t._publicObservation=e.publicObservation),t._metadata=(0,l.default)(e),(!e.hasOwnProperty(\"resume\")||e.hasOwnProperty(\"resume\")&&!e.resume)&&(t._metadata.lastModified=t._metadata.created),delete t._metadata.data,delete t._metadata.syncher,delete t._metadata.authorise,t._hypertyResourceFactory=new j.default,t._childrenObjects={},t._sharedChilds=[],e.backup&&t._childrens){var r=e.hasOwnProperty(\"childrenObjects\")&&e.childrenObjects.hasOwnProperty(\"heartbeat\")?e.childrenObjects.heartbeat:0;t._heartBeat=new O.default(t._bus,t._owner,t._syncher._runtimeUrl,this,15,r),t._resumed||t._heartBeat.start(r)}}return(0,y.default)(DataObject,[{key:\"_getLastChildId\",value:function(){var e=this,t=0,r=e._owner+\"#\"+t;return(0,u.default)(e._childrens).filter(function(t){e._childrens[t].childId>r&&(r=e._childrens[t].childId)}),t=Number(r.split(\"#\")[1])}},{key:\"_allocateListeners\",value:function(){var e=this,t=this,r=t._url+\"/children/\";if(k.log(\"[Data Object - AllocateListeners] - \",t._childrens),t._childrens)var n=r,o=t._bus.addListener(n,function(r){if(r.from!==e._owner)switch(k.log(\"DataObject-Children-RCV: \",r),r.type){case\"create\":t._onChildCreate(r);break;case\"delete\":k.log(r);break;default:t._changeChildren(r)}t._childrenListener=o})}},{key:\"_releaseListeners\",value:function(){var e=this;e._childrenListener&&(e._childrenListener.remove(),(0,u.default)(e._childrenObjects).forEach(function(t){e._childrenObjects[t]._releaseListeners()}))}},{key:\"sync\",value:function(){var e=this,t=this;return k.info(\"[DataObject.sync] synchronising \"),new a.default(function(r,n){var o={};e.metadata.backupRevision&&(o.backupRevision=e.metadata.backupRevision),t._syncher.read(t._metadata.url,o).then(function(e){k.info(\"[DataObject.sync] value to sync: \",e),(0,l.default)(t.data,(0,w.deepClone)(e.data)),t._version=e.version,t._metadata.lastModified=e.lastModified,e.childrenObjects?(t.resumeChildrens(e.childrenObjects),t._storeChildrens(),r(!0)):r(!0)}).catch(function(e){k.info(\"[DataObject.sync] sync failed: \",e),r(!1)})})}},{key:\"resumeChildrens\",value:function(e){var t=this,r=this,n=this._owner.split(\"/\")[3]+\"#\"+this._childId,o=e;(0,u.default)(o).forEach(function(e){var i=!1;\"heartbeat\"===e?r._heartBeat.start(o[e]):o[e].value.resourceType&&!r._childrenObjects.hasOwnProperty(e)?(r._childrenObjects[e]=r._resumeHypertyResource(o[e]),i=!0):r._childrenObjects.hasOwnProperty(e)||(r._childrenObjects[e]=r._resumeChild(o[e]),k.log(\"[DataObject.resumeChildrens] new DataObjectChild: \",r._childrenObjects[e]),i=!0),i&&e>n&&(n=e,k.log(\"[DataObjectReporter.resumeChildrens] - resuming: \",t._childrenObjects[e]))}),this._childId=Number(n.split(\"#\")[1])}},{key:\"_resumeChild\",value:function(e){var t=this,r=e.value;r.parentObject=t,r.parent=t._url;var n=new g.default(r);n.identity=e.identity;var o={type:\"create\",from:n.reporter,url:n.parent,value:n.data,childId:n.url,identity:n.identity,child:n};return n.resourceType&&(o.resource=n),t._onAddChildrenHandler&&t._onAddChildrenHandler(o),n}},{key:\"_resumeHypertyResource\",value:function(e){var t=this,r=e.value;r.parentObject=t,r.parent=t._url;var n=t._hypertyResourceFactory.createHypertyResource(!1,r.resourceType,r);n.identity=e.identity;var o={type:\"create\",from:n.reporter,url:n.parent,value:n.data,childId:n.url,identity:n.identity,child:n};return n.resourceType&&(o.resource=n),t._onAddChildrenHandler&&t._onAddChildrenHandler(o),n}},{key:\"pause\",value:function(){throw\"Not implemented\"}},{key:\"resume\",value:function(){throw\"Not implemented\"}},{key:\"stop\",value:function(){throw\"Not implemented\"}},{key:\"addChild\",value:function(e,t,r){var n=this,o=void 0;return new a.default(function(i){var a=n._url+\"/children/\",s=n._getChildInput(r);s.data=e,o=new g.default(s),t&&(o.identity=t),o.share(),o.onChange(function(e){n._onChange(e,{path:a,childId:s.url})}),n._childrenObjects[s.url]=o,i(o)})}},{key:\"_deleteChildrens\",value:function(){var e=this,t=[];return new a.default(function(r){if(e.childrens){k.log(\"[DataObject.deleteChildrens]\",e.childrens);var n=void 0;for(n in e.childrens){var o=e.childrens[n];k.log(\"[DataObject._deleteChildrens] child\",o),o.metadata.hasOwnProperty(\"resourceType\")&&t.push(e.childrens[n].delete())}k.log(\"[DataObject._deleteChildrens] promises \",t),t.length>0?a.default.all(t).then(function(){r(\"[DataObject._deleteChildrens] done\")}):r(\"[DataObject._deleteChildrens] nothing to delete\")}})}},{key:\"_getChildInput\",value:function(e){var t=this,r=(0,l.default)({},e);return t._childId++,r.url=t._owner.split(\"/\")[3]+\"#\"+t._childId,r.parentObject=t,r.reporter=t._owner,r.created=(new Date).toISOString(),r.runtime=t._syncher._runtimeUrl,r.p2pHandler=t._syncher._p2pHandler,r.p2pRequester=t._syncher._p2pRequester,r.schema=t._schema,r.parent=t.url,r.mutual=t.metadata.mutual,r}},{key:\"addHypertyResource\",value:function(e,t,r,n){var o=this;return new a.default(function(i){var a=void 0,s=o._url+\"/children/\",u=o._getChildInput(n);o._hypertyResourceFactory.createHypertyResourceWithContent(!0,e,t,u).then(function(e){a=e,r&&(a.identity=r),a.share(),k.log(\"[DataObject.addHypertyResource] added \",a),a.onChange(function(e){o._onChange(e,{path:s,childId:a.childId})}),o._childrenObjects[a.childId]=a,i(a)})})}},{key:\"onAddChild\",value:function(e){this._onAddChildrenHandler=e}},{key:\"_onChildCreate\",value:function(e){var t=this;if(\"heartbeat\"===e.body.resource)this._heartBeat.onNewHeartbeat(e.body.value);else{var r={from:e.to,to:e.from,type:\"response\",id:e.id,body:{code:100}};t._bus.postMessage(r),e.body.value.resourceType?t._onHypertyResourceAdded(e):t._onChildAdded(e)}}},{key:\"_onChildAdded\",value:function(e){var t=this,r=(0,w.deepClone)(e.body.value);r.parentObject=t;var n=new g.default(r);n.identity=e.body.identity,t._childrenObjects[r.url]=n,e.to===t.metadata.url&&n.store(),t._hypertyEvt(e,n)}},{key:\"_onHypertyResourceAdded\",value:function(e){var t=this,r=e.body.value,n=void 0;r.parentObject=t,n=t._hypertyResourceFactory.createHypertyResource(!1,r.resourceType,r),n.identity=e.body.identity,t._childrenObjects[n.childId]=n,t._hypertyEvt(e,n),e.to===t.metadata.url&&n.store()}},{key:\"_hypertyEvt\",value:function(e,t){var r=this,n={type:e.type,from:e.from,url:e.to,value:t.data,childId:t.url,identity:e.body.identity,child:t};t.resourceType&&(n.resource=t),r._onAddChildrenHandler&&r._onAddChildrenHandler(n)}},{key:\"_onChange\",value:function(e,t){var r=this;if(r._metadata.lastModified=(new Date).toISOString(),r._version++,\"live\"===r._status){var n={type:\"update\",from:r._url,to:r._url+\"/changes\",body:{version:r._version,source:r._owner,attribute:e.field,lastModified:r._metadata.lastModified}};k.log(\"[DataObject - _onChange] - \",e,t,n),e.oType===_.ObjectType.OBJECT?e.cType!==_.ChangeType.REMOVE&&(n.body.value=(0,w.deepClone)(e.data)):(n.body.attributeType=e.oType,n.body.value=e.data,e.cType!==_.ChangeType.UPDATE&&(n.body.operation=e.cType)),t&&(n.to=t.path,n.body.resource=t.childId),r.data._mutual||(n.body.mutual=r._mutual),r._bus.postMessage(n)}}},{key:\"_changeObject\",value:function(e,t){var r=this;if(r._version+1<=t.body.version){r._version=t.body.version;var n=t.body.attribute,i=void 0;i=\"object\"===(0,o.default)(t.body.value)?(0,w.deepClone)(t.body.value):t.body.value;var a=e.findBefore(n);if(t.body.lastModified?r._metadata.lastModified=t.body.lastModified:r._metadata.lastModified=(new Date).toISOString(),t.body.attributeType===_.ObjectType.ARRAY)if(t.body.operation===_.ChangeType.ADD){var s=a.obj,u=a.last;Array.prototype.splice.apply(s,[u,0].concat(i))}else if(t.body.operation===_.ChangeType.REMOVE){var c=a.obj,l=a.last;c.splice(l,i)}else a.obj[a.last]=i;else t.body.hasOwnProperty(\"value\")?a.obj[a.last]=i:delete a.obj[a.last]}else k.log(\"UNSYNCHRONIZED VERSION: (data => \"+r._version+\", msg => \"+t.body.version+\")\")}},{key:\"_changeChildren\",value:function(e){var t=this,r=(0,w.divideURL)(e.to),n=(r.identity,e.body.resource),o=t._childrenObjects[n];k.log(\"Change children: \",t._owner,e,resource),o?t._changeObject(o._syncObj,e):k.warn(\"No children found for: \",n)}},{key:\"metadata\",get:function(){return this._metadata}},{key:\"url\",get:function(){return this._url}},{key:\"schema\",get:function(){return this._schema}},{key:\"status\",get:function(){return this._status}},{key:\"data\",get:function(){return this._syncObj.data}},{key:\"childrens\",get:function(){return this._childrenObjects}}]),DataObject}();t.default=L,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.ObjectType=t.ChangeType=void 0;var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i);r(157);var s=r(36),u=function(){function SyncObject(e){(0,o.default)(this,SyncObject);var t=this;t._observers=[],t._filters={},this._data=e||{},this._internalObserve(this._data)}return(0,a.default)(SyncObject,[{key:\"observe\",value:function(e){this._observers.push(e)}},{key:\"find\",value:function(e){var t=(0,s.parseAttributes)(e);return this._findWithSplit(t)}},{key:\"findBefore\",value:function(e){var t={},r=(0,s.parseAttributes)(e);return t.last=r.pop(),t.obj=this._findWithSplit(r),t}},{key:\"_findWithSplit\",value:function(e){var t=this._data;return e.forEach(function(e){t=t[e]}),t}},{key:\"_internalObserve\",value:function(e){var t=this,r=function(e){e.every(function(e){t._onChanges(e)})};this._data=Object.deepObserve(e,r)}},{key:\"_fireEvent\",value:function(e){this._observers.forEach(function(t){t(e)})}},{key:\"_onChanges\",value:function(e){var t=e.object,r=void 0;t.constructor===Object&&(r=l.OBJECT),t.constructor===Array&&(r=l.ARRAY);var n=e.keypath,o=t[e.name];\"update\"!==e.type||n.includes(\".length\")||this._fireEvent({cType:c.UPDATE,oType:r,field:n,data:o}),\"add\"===e.type&&this._fireEvent({cType:c.ADD,oType:r,field:n,data:o}),\"delete\"===e.type&&this._fireEvent({cType:c.REMOVE,oType:r,field:n})}},{key:\"data\",get:function(){return this._data}}]),SyncObject}(),c=t.ChangeType={UPDATE:\"update\",ADD:\"add\",REMOVE:\"remove\"},l=t.ObjectType={OBJECT:\"object\",ARRAY:\"array\"};t.default=u},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(38),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(132),f=_interopRequireDefault(d),p=r(36),y=l.getLogger(\"DataObjectChild\"),v=function(){function DataObjectChild(e){function throwMandatoryParmMissingError(e){throw\"[DataObjectChild] \"+e+\" mandatory parameter is missing\"}(0,a.default)(this,DataObjectChild);var t=this;e.parent?t._parent=e.parent:throwMandatoryParmMissingError(\"parent\"),e.url?t._url=e.url:throwMandatoryParmMissingError(\"url\"),e.created?t._created=e.created:throwMandatoryParmMissingError(\"created\"),e.reporter?t._reporter=e.reporter:throwMandatoryParmMissingError(\"reporter\"),e.runtime?t._runtime=e.runtime:throwMandatoryParmMissingError(\"runtime\"),e.schema?t._schema=e.schema:throwMandatoryParmMissingError(\"schema\"),e.parentObject?t._parentObject=e.parentObject:throwMandatoryParmMissingError(\"parentObject\"),e.name&&(t._name=e.name),e.description&&(t._description=e.description),e.tags&&(t._tags=e.tags),e.resources&&(t._resources=e.resources),e.observerStorage&&(t._observerStorage=e.observerStorage),e.publicObservation&&(t._publicObservation=e.publicObservation),t._childId=e.url,e.data?t._syncObj=new f.default(e.data):t._syncObj=new f.default({}),y.log(\"[DataObjectChild -  Constructor] - \",t._syncObj),t._bus=t._parentObject._bus,t._owner=t._parentObject._owner,t._allocateListeners(),t._metadata=e,delete t._metadata.parentObject,t._sharingStatus=!1}return(0,u.default)(DataObjectChild,[{key:\"share\",value:function(e){var t=this;t._sharingStatus=new o.default(function(r,n){var o=void 0;o=e?t.metadata.parent:t.metadata.parent+\"/children/\";var i=t.metadata;i.data=t.data;var a={type:\"create\",from:t.metadata.reporter,to:o,body:{resource:i.url,value:i}};if(t.identity&&(a.body.identity=t.identity),t._parentObject.data.hasOwnProperty(\"mutual\")&&(a.body.mutual=t._parentObject.data.mutual),t._parentObject.metadata.reporter===t.metadata.reporter)return t._bus.postMessage((0,p.deepClone)(a)),r();var s=function(e){if(e.to===t._reporter){t._bus.removeResponseListener(a.from,e.id),y.log(\"[Syncher.DataObjectChild.share] Parent reporter reply \",e);var o={code:e.body&&e.body.code?e.body.code:500,desc:e.body&&e.body.desc?e.body.desc:\"Unknown\"};return e.body.code<300?r(o):n(o)}},u=t._bus.postMessage((0,p.deepClone)(a),s,!1);setTimeout(function(){return t._bus.removeResponseListener(a.from,u),n({code:408,desc:\"timout\"})},3e3)})}},{key:\"store\",value:function(){var e=this,t={},r=e.metadata.children+\".\"+e.metadata.url;t.value=e.metadata,t.identity=e.identity;var n={from:e.metadata.reporter,to:e._parentObject._syncher._subURL,type:\"create\",body:{resource:e.metadata.parent,attribute:r,value:t}};y.log(\"[DataObjectChild.store]:\",n),e._bus.postMessage(n)}},{key:\"_allocateListeners\",value:function(){var e=this;e._reporter===e._owner&&(e._listener=e._bus.addListener(e._reporter,function(t){\"response\"===t.type&&t.id===e._msgId&&(y.log(\"DataObjectChild.onResponse:\",t),e._onResponse(t))}))}},{key:\"_releaseListeners\",value:function(){var e=this;e._listener&&e._listener.remove()}},{key:\"delete\",value:function(){this._releaseListeners()}},{key:\"onChange\",value:function(e){this._syncObj.observe(function(t){y.log(\"[DataObjectChild - observer] - \",t),e(t)})}},{key:\"onResponse\",value:function(e){this._onResponseHandler=e}},{key:\"_onResponse\",value:function(e){var t=this,r={type:e.type,url:e.body.source,code:e.body.code};t._onResponseHandler&&t._onResponseHandler(r)}},{key:\"shareable\",get:function(){var e=this.metadata;return e.data=this.data,e}},{key:\"metadata\",get:function(){return this._metadata}},{key:\"childId\",get:function(){return this._childId}},{key:\"sharingStatus\",get:function(){return this._sharingStatus}},{key:\"data\",get:function(){return this._syncObj.data}},{key:\"identity\",set:function(e){this._identity=e},get:function(){return this._identity}}]),DataObjectChild}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(36),l=function(){function IdentityManager(e,t,r){(0,a.default)(this,IdentityManager);var n=this;n.messageBus=r,n.domain=(0,c.divideURL)(e).domain,n.owner=e,n.runtimeURL=t}return(0,u.default)(IdentityManager,[{key:\"discoverUserRegistered\",value:function(e,t){var r=this;return new o.default(function(n,o){var i=void 0,a=e||\".\";i=t||r.owner;var s={type:\"read\",from:i,to:r.runtimeURL+\"/registry/\",body:{resource:a,criteria:i}};r.messageBus.postMessage(s,function(e){var t=e.body.resource;t&&200===e.body.code?n(t):o(\"code: \"+e.body.code+\" No user was found\")})})}},{key:\"discoverIdentityPerIdP\",value:function(e){var t=this;return new o.default(function(r,n){var o={type:\"read\",from:this.owner,to:t.runtimeURL+\"/idm\",body:{resource:e,criteria:\"idp\"}};t.messageBus.postMessage(o,function(e){200===e.body.code?r(e.body.value):n(e.body.code+\" \"+e.body.desc)})})}}]),IdentityManager}();t.default=l,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(38),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(36),f=r(166),p=_interopRequireDefault(f),y=l.getLogger(\"Discovery\"),v=function(){function Discovery(e,t,r){(0,a.default)(this,Discovery);var n=this;n.messageBus=r,n.runtimeURL=t,n.domain=(0,d.divideURL)(e).domain,n.discoveryURL=e}return(0,u.default)(Discovery,[{key:\"_isLegacyUser\",value:function(e){return!(!e.includes(\":\")||e.includes(\"user://\"))}},{key:\"discoverHypertiesPerUserProfileData\",value:function(e,t,r){var n=this,i=[],a={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/userprofile/\"+e}};return(t||r)&&(a.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):n.messageBus.postMessage(a,function(r){200===r.body.code?(r.body.value.map(function(e){e.hypertyID!=n.discoveryURL&&i.push(e)}),0===i.length?t([]):(y.log(\"[Discovery.discoverHypertiesPerUserProfileData] Reply log: \",i),t(i))):(y.warn(\"[Discovery.discoverHypertiesPerUserProfileData] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverHypertiesPerUserProfileDataDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverHypertiesPerUserProfileData.apply(n,i).then(function(t){e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerUserProfileData\",value:function(e,t,r){var n=this,i={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/userprofile/\"+e}};return(t||r)&&(i.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):n.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerUserProfileData] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerUserProfileDataDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverDataObjectsPerUserProfileData.apply(n,i).then(function(t){return e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHypertiesPerGUID\",value:function(e,t,r){var n=this,i=[],a={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/guid/\"+e}};return(t||r)&&(a.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n.messageBus.postMessage(a,function(o){200===o.body.code?(o.body.value.map(function(e){e.hypertyID!=n.discoveryURL&&i.push(e)}),0===i.length?r(\"No Hyperty was found\"):(y.log(\"Reply log: \",i),t(i))):(y.warn(\"[Discovery.discoverHypertiesPerGUID] Error Reply for \"+e+\" Reason: \",o.body.description),t([]))})})}},{key:\"discoverHypertiesPerGUIDDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverHypertiesPerGUID.apply(n,i).then(function(t){e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerGUID\",value:function(e,t,r){var n=this,i={type:\"read\",from:n.discoveryURL,to:n.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/guid/\"+e}};return(t||r)&&(i.body.criteria={resources:r,dataSchemes:t}),new o.default(function(t,r){n.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerGUID] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerGUIDDO\",value:function(e,t,r){var n=this,i=arguments;return new o.default(function(e,t){n.discoverDataObjectsPerGUID.apply(n,i).then(function(t){return e(n._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHyperties\",value:function(e,t,r,n){var i=this,a=void 0,s=[];a=n||i.domain;var u={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/user/\"+e}};return u.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i._isLegacyUser(e)?t([{hypertyID:e,status:\"live\"}]):i.messageBus.postMessage(u,function(r){200===r.body.code||500===r.body.code?(r.body.value.map(function(e){e.hypertyID!=i.discoveryURL&&s.push(e)}),y.log(\"[Discovery.discoverHyperties] Reply : \",s),t(s)):(y.warn(\"[Discovery.discoverHyperties] Error Reply for \"+e+\" Reason: \",r.body.description),t(s))})})}},{key:\"discoverHypertiesDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverHyperties.apply(i,a).then(function(t){e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjects\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/user/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjects] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjects.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverHypertyPerURL\",value:function(e,t){var r=this,n=void 0;n=t||r.domain;var i={type:\"read\",from:r.discoveryURL,to:r.runtimeURL+\"/discovery/\",body:{resource:\"/hyperty/url/\"+e,criteria:{domain:n}}};return new o.default(function(t,n){r.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverHypertyPerURL] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverHypertyPerURLDO\",value:function(e,t){var r=this,n=arguments;return new o.default(function(e,t){r.discoverHypertyPerURL.apply(r,n).then(function(t){return e(new p.default(t,r.runtimeURL,r.discoveryURL,r.messageBus,r))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectPerURL\",value:function(e,t){var r=this,n=void 0;n=t||r.domain;var i={type:\"read\",from:r.discoveryURL,to:r.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/url/\"+e,criteria:{domain:n}}};return new o.default(function(t,n){r.messageBus.postMessage(i,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectPerURL] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectPerURLDO\",value:function(e,t){var r=this,n=arguments;return new o.default(function(e,t){r.discoverDataObjectPerURL.apply(r,n).then(function(t){return e(new p.default(t,r.runtimeURL,r.discoveryURL,r.messageBus,r))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerName\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/name/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerName] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerNameDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjectsPerName.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"discoverDataObjectsPerReporter\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:i.runtimeURL+\"/discovery/\",body:{resource:\"/dataObject/reporter/\"+e}};return s.body.criteria=t||r?{resources:r,dataSchemes:t,domain:a}:{domain:a},new o.default(function(t,r){i.messageBus.postMessage(s,function(r){200===r.body.code?(y.log(\"Reply Value Log: \",r.body.value),t(r.body.value)):(y.warn(\"[Discovery.discoverDataObjectsPerName] Error Reply for \"+e+\" Reason: \",r.body.description),t([]))})})}},{key:\"discoverDataObjectsPerReporterDO\",value:function(e,t,r,n){var i=this,a=arguments;return new o.default(function(e,t){i.discoverDataObjectsPerReporter.apply(i,a).then(function(t){return e(i._convertToDiscoveredObject(t))}).catch(function(e){return t(e)})})}},{key:\"_convertToDiscoveredObject\",value:function(e){var t=this;return e.map(function(e){return new p.default(e,t.runtimeURL,t.discoveryURL,t.messageBus,t)})}},{key:\"discoverDataObject\",value:function(e,t,r,n){var i=this,a=void 0;a=n||i.domain;var s={type:\"read\",from:i.discoveryURL,to:\"domain://registry.\"+a,body:{resource:e,criteria:{resources:r,dataSchemes:t}}};return new o.default(function(t,r){i.messageBus.postMessage(s,function(r){if(y.log(\"[Discovery]\",r),r.body.code>299)return y.warn(\"[Discovery.discoverDataObject] Error Reply for \"+e+\" Reason: \",r.body.description),t([]);var n=r.body.value;t(n||[])})})}},{key:\"discoverHyperty\",value:function(e,t,r,n){var i=this,a=void 0,s=(0,d.convertToUserURL)(e);return a=n||i.domain,new o.default(function(o,u){if(y.log(\"[Discovery.discoverHyperty] ACTIVE DOMAIN -> \",a,\"user->\",e,\"schema->\",t,\"resources->\",r,\"domain->\",n),e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] \"+e+\" is legacy domain\");return o({userID:e,hypertyID:e,schema:t,resources:r})}var c={type:\"read\",from:i.discoveryURL,to:\"domain://registry.\"+a,body:{resource:s,criteria:{resources:r,dataSchemes:t}}};y.info(\"[Discovery] msg to send->\",c),i.messageBus.postMessage(c,function(e){y.info(\"[Discovery] ON discoverHyperty->\",e);var t=e.body.value;t?o(t):u(\"No Hyperty was found\")})})}},{key:\"discoverHypertyPerUser\",value:function(e,t){var r=this,n=void 0;return new o.default(function(o,i){if(e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] \"+e+\"is legacy domain\");return o({id:e,hypertyURL:e,descriptor:\"unknown\"})}n=t||r.domain;var a=\"user://\"+e.substring(e.indexOf(\"@\")+1,e.length)+\"/\"+e.substring(0,e.indexOf(\"@\")),s={type:\"read\",from:r.discoveryURL,to:\"domain://registry.\"+n,body:{resource:a}};y.info(\"[Discovery] Message: \",s,n,a),r.messageBus.postMessage(s,function(t){y.info(\"[Discovery] message reply\",t);var r=void 0,n=void 0,a=void 0,s=t.body.value;for(r in s)if(void 0!==s[r].lastModified)if(void 0===n)n=new Date(s[r].lastModified),a=r;else{var u=new Date(s[r].lastModified);n.getTime()<u.getTime()&&(n=u,a=r)}y.info(\"[Discovery] Last Hyperty: \",a,n);var c=a;if(void 0===c)return i(\"User Hyperty not found\");var l={id:e,descriptor:s[c].descriptor,hypertyURL:c};y.info(\"[Discovery] ===> hypertyDiscovery messageBundle: \",l),o(l)})})}},{key:\"discoverHypertiesPerUser\",value:function(e,t){var r=this,n=void 0;return y.log(\"on Function->\",e),new o.default(function(o,i){if(e.includes(\":\")&&!e.includes(\"user://\")){y.log(\"[Discovery.discoverHyperty] is legacy domain\");var a={userID:e,hypertyID:e,schema:schema,resources:resources};return o(a)}n=t||r.domain;var s=\"user://\"+e.substring(e.indexOf(\"@\")+1,e.length)+\"/\"+e.substring(0,e.indexOf(\"@\")),u={type:\"read\",from:r.discoveryURL,to:\"domain://registry.\"+n,body:{resource:s}};y.log(\"[Discovery] Message discoverHypertiesPerUser: \",u,n,s),r.messageBus.postMessage(u,function(e){y.info(\"[Discovery] discoverHypertiesPerUser reply\",e);var t=e.body.value;if(!t)return i(\"User Hyperty not found\");o(t)})})}},{key:\"resumeDiscoveries\",value:function(){var e=this;return y.log(\"[Discovery] resumeDiscoveries\"),new o.default(function(t,r){var n={type:\"read\",from:e.discoveryURL,to:e.runtimeURL+\"/subscriptions\",body:{resource:e.discoveryURL}};e.messageBus.postMessage(n,function(r){y.log(\"[Discovery.resumeDiscoveries] reply: \",r);var n=[];if(200===r.body.code){r.body.value.forEach(function(t){var r=t.split(\"/registration\")[0];({}).url=r,y.log(\"[Discovery.resumeDiscoveries] adding listener to: \",r),r.includes(\"hyperty://\")?n.push(e.discoverHypertyPerURLDO(r)):n.push(e.discoverDataObjectPerURLDO(r))}),o.default.all(n).then(function(e){t(e)})}else t([])})})}}]),Discovery}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(48),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(137),b=_interopRequireDefault(_),m=function(e){function ContextObserver(e,t,r,n,o,i){if((0,l.default)(this,ContextObserver),!e)throw new Error(\"The hypertyURL is a needed parameter\");if(!t)throw new Error(\"The MiniBus is a needed parameter\");if(!r)throw new Error(\"The configuration is a needed parameter \");if(!o)throw new Error(\"The factory is a needed parameter \");var a=(0,y.default)(this,(ContextObserver.__proto__||(0,u.default)(ContextObserver)).call(this)),s=a;s._contextResourceTypes=n,s._url=e,s._discoverUsersPromises={},s._observePromises={},s._domain=o.divideURL(r.runtimeURL).domain,s._objectDescURL=\"hyperty-catalogue://catalogue.\"+s._domain+\"/.well-known/dataschema/Context\",s._users2observe=[],s._observers={},a._syncher=i||o.createSyncher(e,t,r);var c=o.createDiscovery(e,r.runtimeURL,t);return s._discovery=c,s._discoveries={},window.discovery=s._discovery,a}return(0,h.default)(ContextObserver,e),(0,f.default)(ContextObserver,[{key:\"start\",value:function(e,t){var r=this;return new a.default(function(n,i){r._syncher.resumeObservers({store:!0}).then(function(i){var a=(0,o.default)(i);a.length>0?(r._observers=i,n(i),a.forEach(function(r){var n=i[r];e&&(context.data.values=e),n.sync(),t&&n.onDisconnected(t)})):n(!1)}).catch(function(e){n(!1)})}).catch(function(e){reject(\"[ContextObserver] Start failed | \",e)})}},{key:\"resumeDiscoveries\",value:function(){var e=this;return new a.default(function(t,r){e._discovery.resumeDiscoveries().then(function(r){r.forEach(function(r){r.data.resources&&r.data.resources[0]===e._contextResourceTypes[0]&&(\"live\"===r.data.status?(t([r.data]),r.unsubscribeLive(e._url)):r.onLive(e._url,function(){t([r.data]),r.unsubscribeLive(e._url)}))})})}).catch(function(e){reject(\"[ContextObserver] resumeDiscoveries failed | \",e)})}},{key:\"onResumeObserver\",value:function(e){this._onResumeObserver=e}},{key:\"discoverUsers\",value:function(e,t){var r=this,n=e+\"@\"+t;return r._discoverUsersPromises[n]||(r._discoverUsersPromises[n]=new a.default(function(n,o){r._discovery.discoverHypertiesDO(e,[\"context\"],r._contextResourceTypes,t).then(function(e){var t=[],o=[];e.forEach(function(e){r._discoveries[e.data.hypertyID]=e,\"live\"===e.data.status?t.push(e.data):o.push(e)}),t.length>0?n(t):o.length>0&&o[0].onLive(r._url,function(){t.push(o[0].data),n(t),o[0].unsubscribeLive(r._url)})})})),r._discoverUsersPromises[n]}},{key:\"observe\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return r._observePromises[e.hypertyID]||(r._observePromises[e.hypertyID]=new a.default(function(n,o){r._users2observe.forEach(function(t){if(t._reporter===e.hypertyID)return n(t)}),r._discovery.discoverDataObjectsPerReporter(e.hypertyID,[\"context\"],r._contextResourceTypes,r._domain).then(function(i){var a=0,s=void 0;i.forEach(function(e){e.hasOwnProperty(\"lastModified\")&&e.hasOwnProperty(\"url\")&&Date.parse(e.lastModified)>a&&(a=e.lastModified,s=e.url)}),0!=a&&s?n(r._subscribeContext(e,s,t)):o(\"[ContextObserver.observe] discovered DataObjecs are invalid\",i)})})),r._observePromises[e.hypertyID]}},{key:\"_subscribeContext\",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this;return new a.default(function(e,o){n._users2observe.forEach(function(r){if(r.url===t)return e(r)});var i={schema:n._objectDescURL,resource:t,store:null,p2p:null,mutual:null,domain_subscription:r};n._syncher.subscribe(i).then(function(t){n._users2observe.push(t),t.onDisconnected(function(){t.data.values[0].value=\"unavailable\",t.sync()}),e(t)})})}},{key:\"_discoverAndSubscribeLegacyUsers\",value:function(e){var t=this;return new a.default(function(r,n){t._discovery.discoverDataObjectsPerName(e).then(function(e){e.forEach(function(e){\"live\"===e.status&&(e.hypertyID||(e.hypertyID=e.reporter),t._subscribeContext(e.schema,e.url).then(function(e){return r(e)}))})}).catch(function(e){})})}},{key:\"unobserve\",value:function(e){var t=this;t._users2observe.forEach(function(r,n){r.url===e&&(r.unsubscribe(),t._users2observe.splice(n,1))})}}]),ContextObserver}(b.default);t.default=m,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=function(){function EventEmitter(){(0,o.default)(this,EventEmitter)}return(0,a.default)(EventEmitter,[{key:\"addEventListener\",value:function(e,t){this[e]=t}},{key:\"trigger\",value:function(e,t){var r=this;r[e]&&r[e](t)}}]),EventEmitter}();t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(48),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(137),b=_interopRequireDefault(_),m=function(e){function ContextReporter(e,t,r,n,o){if((0,l.default)(this,ContextReporter),!e)throw new Error(\"The hypertyURL is a needed parameter\");if(!t)throw new Error(\"The MiniBus is a needed parameter\");if(!r)throw new Error(\"The configuration is a needed parameter\");var i=(0,y.default)(this,(ContextReporter.__proto__||(0,u.default)(ContextReporter)).call(this,e,t,r));return i.syncher=o||n.createSyncher(e,t,r),i.domain=n.divideURL(r.runtimeURL).domain,i.contexts={},i.contextDescURL=\"hyperty-catalogue://catalogue.\"+i.domain+\"/.well-known/dataschema/Context\",i.syncher.onNotification(function(e){i.onNotification(e)}),i.syncher.onClose(function(e){i.setStatus(e.id,\"unavailable\"),e.ack()}),i}return(0,h.default)(ContextReporter,e),(0,f.default)(ContextReporter,[{key:\"start\",value:function(){var e=this,t=this;return new a.default(function(r,n){e.syncher.resumeReporters({store:!0}).then(function(e){var n=(0,o.default)(e);n.length>0?(t.contexts=e,n.forEach(function(e){t._onSubscription(t.contexts[e])}),r(t.contexts)):r(!1)}).catch(function(e){})}).catch(function(e){reject(\"[ContextReporter] Start failed | \",e)})}},{key:\"processNotification\",value:function(e){e.ack()}},{key:\"create\",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"myContext\",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=this,u=void 0;return new a.default(function(a,c){u=o||i?o&&!i?{resources:r,expires:30,reporter:o}:!o&&i?{resources:r,expires:30,reuseURL:i}:{resources:r,expires:30,reuseURL:i,reporter:o}:{resources:r,expires:30},s.syncher.create(s.contextDescURL,[],t,!0,!1,n,null,u).then(function(t){s.contexts[e]=t,s._onSubscription(t),a(t)}).catch(function(e){c(e)})})}},{key:\"_onSubscription\",value:function(e){e.onSubscription(function(e){e.accept()})}},{key:\"setContext\",value:function(e,t){var r=this;r.contexts[e].data.values=t,r.trigger(e+\"-context-update\",t)}}]),ContextReporter}(b.default);t.default=m,e.exports=t.default},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.CommunicationStatus={OPEN:\"open\",PENDING:\"pending\",CLOSED:\"closed\",PAUSED:\"paused\",FAILED:\"failed\"},t.communicationObject={startingTime:\"\",status:\"\",participants:{}},t.communicationChildren={parent:\"communication\",listener:\"resources\",type:\"HypertyResource\"}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(65),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(125),f=_interopRequireDefault(d),p=r(171),y=_interopRequireDefault(p),v=function(){function ChatController(e,t,r,n,o,i){if((0,u.default)(this,ChatController),!e)throw Error(\"Syncher is a necessary dependecy\");if(!t)throw Error(\"Discover is a necessary dependecy\");if(!r)throw Error(\"Domain is a necessary dependecy\");if(!n)throw Error(\"Search is a necessary dependecy\");var a=this;a._syncher=e,a.discovery=t,a.search=n,a.myIdentity=o,a.controllerMode=\"reporter\",a.child_cseq=0,a.domain=r,a._manager=i;var s=e.owner;a._objectDescURL=\"hyperty-catalogue://catalogue.\"+r+\"/.well-known/dataschema/Communication\",a._invitationsHandler=new y.default(s)}return(0,l.default)(ChatController,[{key:\"_setOnAddChildListener\",value:function(e){var t=this;e.onAddChild(function(e){t.child_cseq+=1,t._onMessage&&t._onMessage(e)})}},{key:\"_onSubscribe\",value:function(e){var t=this._dataObjectReporter;e.accept();var r=JSON.parse((0,a.default)(e.identity));r.hasOwnProperty(\"assertion\")&&delete r.assertion;var n={hypertyURL:e.url,domain:e.domain,identity:r},o=e.identity.userProfile.guid;e.identity.legacy&&(n.legacy=e.identity.legacy),t.data.participants[o]=n,this._onUserAdded&&this._onUserAdded(n)}},{key:\"_onUnsubscribe\",value:function(e){var t=this._dataObjectReporter,r=e.identity.userProfile;e.identity.legacy&&(r.legacy=e.identity.legacy),delete t.data.participants[r.userURL],this._onUserRemoved&&this._onUserRemoved(r)}},{key:\"sendFile\",value:function(e){var t=this,r=t.controllerMode,n=\"reporter\"===r?t.dataObjectReporter:t.dataObjectObserver;return new o.default(function(r,o){var i={userProfile:t.myIdentity};n.addHypertyResource(\"resources\",\"file\",e,i).then(function(e){var o={userProfile:t.myIdentity},i={value:e,identity:o,resource:e},a=new f.default(n.url,t._manager._runtimeURL,t._manager._hypertyURL,t._manager._bus);!function share2Reporter(e,t,n,o){var i=o;e.sharingStatus.then(r(n)).catch(function(r){i.onLive(t,function(){i.unsubscribeLive(t),e.share(!0),share2Reporter(e,t,n,i)})})}(e,t._manager._hypertyURL,i,a)})}).catch(function(e){reject(e)})}},{key:\"send\",value:function(e,t){var r=this,n=r.controllerMode,i=\"reporter\"===n?r.dataObjectReporter:r.dataObjectObserver;return new o.default(function(n,o){r.child_cseq+=1;var a={type:\"chat\",content:e},s=t||{userProfile:r.myIdentity};i.addChild(a,s).then(function(e){var t={childId:e._childId,from:e._owner,value:e.data,type:\"create\",identity:s},o=new f.default(i.url,r._manager._runtimeURL,r._manager._hypertyURL,r._manager._bus);!function share2Reporter(e,t,r,o){var i=o;e.sharingStatus.then(n(r)).catch(function(n){i.onLive(t,function(){i.unsubscribeLive(t),e.share(!0),share2Reporter(e,t,r,i)})})}(e,r._manager._hypertyURL,t,o)}).catch(function(e){o(e)})})}},{key:\"onChange\",value:function(e){this._onChange=e}},{key:\"onMessage\",value:function(e){this._onMessage=e}},{key:\"onUserAdded\",value:function(e){this._onUserAdded=e}},{key:\"onUserRemoved\",value:function(e){this._onUserRemoved=e}},{key:\"onClose\",value:function(e){this._onClose=e}},{key:\"onResponse\",value:function(e){this._onResponse=e}},{key:\"addUser\",value:function(e){var t=this,r=function(e){return 0!==e.length};return new o.default(function(n,i){if(0===e.filter(r).length)return i(\"Don't have users to invite\");var a=[],s=[],u={};e.forEach(function(e){var r=t.discovery.discoverHypertiesDO(e.user,[\"comm\"],[\"chat\"],e.domain);a.push(r)}),o.default.all(a).then(function(e){var r=[];e.forEach(function(e){e.forEach(function(e){\"live\"===e.data.status?(r.push(e.data.hypertyID),u[e.data.hypertyID]=e):s.length<5&&s.push(e)})});var n=\"reporter\"===t.controllerMode?t.dataObjectReporter:t.dataObjectObserver;s.length>0&&t._invitationsHandler.inviteDisconnectedHyperties(s,n),n.inviteObservers(r),n.invitations.length>0&&t._invitationsHandler.processInvitations(u,n)}).then(function(){n(!0)}).catch(function(e){i(e)})})}},{key:\"addUserReq\",value:function(e){var t=this,r=function(e){return 0!==e.length};return new o.default(function(n,o){if(0===e.filter(r).length)return o(\"[ChatManager.ChatController.addUserReq] Don't have users to add\");if(\"observer\"===!t.controllerMode){return o(\"[ChatManager.ChatController.addUserReq] only allowed to Chat Observer\")}})}},{key:\"onInvitationResponse\",value:function(e){var t=this;t._onInvitationResponse=e,t._invitationsHandler.invitationResponse=e}},{key:\"removeUser\",value:function(e){}},{key:\"close\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;return new o.default(function(r,n){if(\"reporter\"===t.controllerMode)t._invitationsHandler.cleanInvitations(t.dataObjectReporter).then(function(){if(e)try{delete t._manager._reportersControllers[t.dataObjectReporter.url],t.dataObjectReporter.delete(),r(!0),t._onClose&&t._onClose({code:200,desc:\"deleted\",url:t.dataObjectReporter.url})}catch(e){n(!1)}else t._manager.communicationObject.status=\"closed\",r(!0)});else if(e)try{delete t._manager._observersControllers[t.dataObjectObserver.url],t.dataObjectObserver.unsubscribe(),r(!0)}catch(e){n(!1)}else r(!0)})}},{key:\"invitationsHandler\",get:function(){return this._invitationsHandler}},{key:\"url\",get:function(){return\"reporter\"===this.controllerMode?this.dataObjectReporter.url:this.dataObjectObserver.url}},{key:\"dataObjectReporter\",set:function(e){if(!e)throw new Error(\"[ChatController] The data object reporter is necessary parameter \");var t=this;t.controllerMode=\"reporter\",e.onSubscription(function(e){switch(e.type){case\"subscribe\":t._onSubscribe(e);break;case\"unsubscribe\":t._onUnsubscribe(e)}}),t._setOnAddChildListener(e),e.onRead(function(e){e.accept()}),e.onExecute(function(e){switch(e.method){case\"addUser\":t.addUser(e.params[0]).then(function(){e.accept()}).catch(function(t){e.reject(t)});break;case\"removeUser\":t.removeUser(e.params).then(function(){e.accept()}).catch(function(t){e.reject(t)});break;default:e.reject(\"[ChatController.onExecute] Chat method execution not accepted by Reporter\")}}),t._dataObjectReporter=e},get:function(){return this._dataObjectReporter}},{key:\"messages\",get:function(){return\"reporter\"===this.controllerMode?this._dataObjectReporter._childrenObjects:this._dataObjectObserver._childrenObjects}},{key:\"dataObjectObserver\",set:function(e){var t=this;t.controllerMode=\"observer\",t._dataObjectObserver=e,e.onChange(\"*\",function(e){if(e.field.includes(\"participants\"))switch(e.cType){case\"add\":t._onUserAdded&&t._onUserAdded(e);break;case\"remove\":t._onUserRemoved&&t._onUserRemoved(e)}t._onChange&&t._onChange(e)}),t._setOnAddChildListener(e)},get:function(){return this._dataObjectObserver}},{key:\"dataObject\",get:function(){return\"reporter\"===this.controllerMode?this.dataObjectReporter:this.dataObjectObserver}},{key:\"closeEvent\",set:function(e){var t=this;t._closeEvent=e,t._onClose&&t._onClose(e)},get:function(){return this._closeEvent}}]),ChatController}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.UserInfo=void 0;var n=r(172),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(36);t.UserInfo=function UserInfo(e,t,r){var n;(0,a.default)(this,UserInfo);var i=(0,s.deepClone)(r);return r.hasOwnProperty(\"userProfile\")||(i.userProfile=r),n={hypertyURL:e,domain:t},(0,o.default)(n,\"domain\",t),(0,o.default)(n,\"identity\",i),n}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(65),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=function(){function Chat(e,t,r,n){if((0,u.default)(this,Chat),!e)throw Error(\"Syncher is a necessary dependecy\");if(!t)throw Error(\"Domain is a necessary dependecy\");var o=this;o._syncher=e,o.myIdentity=r,o.controllerMode=\"reporter\",o.child_cseq=0,o.domain=t,o._manager=n;e.owner;o._objectDescURL=\"hyperty-catalogue://catalogue.\"+t+\"/.well-known/dataschema/Communication\"}return(0,l.default)(Chat,[{key:\"_setOnAddChildListener\",value:function(e){var t=this;e.onAddChild(function(e){t.child_cseq+=1,t._onMessage&&t._onMessage(e)})}},{key:\"_onSubscribe\",value:function(e){var t=this._dataObjectReporter;e.accept();var r=JSON.parse((0,a.default)(e.identity));r.hasOwnProperty(\"assertion\")&&delete r.assertion;var n={hypertyURL:e.url,domain:e.domain,identity:r},o=e.identity.userProfile.guid;e.identity.legacy&&(n.legacy=e.identity.legacy),t.data.participants[o]=n,this._onUserAdded&&this._onUserAdded(n)}},{key:\"_onUnsubscribe\",value:function(e){var t=this._dataObjectReporter,r=e.identity.userProfile;e.identity.legacy&&(r.legacy=e.identity.legacy),delete t.data.participants[r.userURL],this._onUserRemoved&&this._onUserRemoved(r)}},{key:\"sendFile\",value:function(e){var t=this,r=t.controllerMode,n=\"reporter\"===r?t.dataObjectReporter:t.dataObjectObserver;return new o.default(function(r,o){var i={userProfile:t.myIdentity};n.addHypertyResource(\"resources\",\"file\",e,i).then(function(e){var n={userProfile:t.myIdentity};r({value:e,identity:n,resource:e})})}).catch(function(e){reject(e)})}},{key:\"send\",value:function(e,t){var r=this,n=r.controllerMode,i=\"reporter\"===n?r.dataObjectReporter:r.dataObjectObserver;return new o.default(function(n,o){r.child_cseq+=1;var a={type:\"chat\",content:e},s=t||{userProfile:r.myIdentity};i.addChild(a,s).then(function(e){var t={childId:e._childId,from:e._owner,value:e.data,type:\"create\",identity:s};n(t)}).catch(function(e){o(e)})})}},{key:\"onChange\",value:function(e){this._onChange=e}},{key:\"onMessage\",value:function(e){this._onMessage=e}},{key:\"onUserAdded\",value:function(e){this._onUserAdded=e}},{key:\"onUserRemoved\",value:function(e){this._onUserRemoved=e}},{key:\"onClose\",value:function(e){this._onClose=e}},{key:\"onResponse\",value:function(e){this._onResponse=e}},{key:\"onInvitationResponse\",value:function(e){this._onInvitationResponse=e}},{key:\"removeUser\",value:function(e){}},{key:\"close\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;return new o.default(function(r,n){if(\"reporter\"===t.controllerMode)if(e)try{delete t._manager._reportersControllers[t.dataObjectReporter.url],t.dataObjectReporter.delete(),r(!0),t._onClose&&t._onClose({code:200,desc:\"deleted\",url:t.dataObjectReporter.url})}catch(e){n(!1)}else t._manager.communicationObject.status=\"closed\",r(!0);else if(e)try{delete t._manager._observersControllers[t.dataObjectObserver.url],t.dataObjectObserver.unsubscribe(),r(!0)}catch(e){n(!1)}else r(!0)})}},{key:\"url\",get:function(){return\"reporter\"===this.controllerMode?this.dataObjectReporter.url:this.dataObjectObserver.url}},{key:\"dataObjectReporter\",set:function(e){if(!e)throw new Error(\"[ChatController] The data object reporter is necessary parameter \");var t=this;t.controllerMode=\"reporter\",e.onSubscription(function(e){switch(e.type){case\"subscribe\":t._onSubscribe(e);break;case\"unsubscribe\":t._onUnsubscribe(e)}}),t._setOnAddChildListener(e),e.onRead(function(e){e.accept()}),e.onExecute(function(e){switch(e.method){case\"addUser\":t.addUser(e.params[0]).then(function(){e.accept()}).catch(function(t){e.reject(t)});break;case\"removeUser\":t.removeUser(e.params).then(function(){e.accept()}).catch(function(t){e.reject(t)});break;default:e.reject(\"[ChatController.onExecute] Chat method execution not accepted by Reporter\")}}),t._dataObjectReporter=e},get:function(){return this._dataObjectReporter}},{key:\"messages\",get:function(){return\"reporter\"===this.controllerMode?this._dataObjectReporter._childrenObjects:this._dataObjectObserver._childrenObjects}},{key:\"dataObjectObserver\",set:function(e){var t=this;t.controllerMode=\"observer\",t._dataObjectObserver=e,e.onChange(\"*\",function(e){if(e.field.includes(\"participants\"))switch(e.cType){case\"add\":t._onUserAdded&&t._onUserAdded(e);break;case\"remove\":t._onUserRemoved&&t._onUserRemoved(e)}t._onChange&&t._onChange(e)}),t._setOnAddChildListener(e)},get:function(){return this._dataObjectObserver}},{key:\"dataObject\",get:function(){return\"reporter\"===this.controllerMode?this.dataObjectReporter:this.dataObjectObserver}},{key:\"closeEvent\",set:function(e){var t=this;t._closeEvent=e,t._onClose&&t._onClose(e)},get:function(){return this._closeEvent}}]),Chat}();t.default=d,e.exports=t.default},,,,,,,,,,,,function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.ContextReporter=t.ContextObserver=t.IdentityManager=t.Discovery=t.Syncher=t.SandboxFactory=t.SandboxRegistry=t.SandboxType=t.Sandbox=void 0;var n=r(155),o=_interopRequireDefault(n),i=r(128),a=_interopRequireDefault(i),s=r(129),u=_interopRequireDefault(s),c=r(130),l=_interopRequireDefault(c),d=r(135),f=_interopRequireDefault(d),p=r(134),y=_interopRequireDefault(p),v=r(136),h=_interopRequireDefault(v),_=r(138),b=_interopRequireDefault(_);t.Sandbox=o.default,t.SandboxType=n.SandboxType,t.SandboxRegistry=a.default,t.SandboxFactory=u.default,t.Syncher=l.default,t.Discovery=f.default,t.IdentityManager=y.default,t.ContextObserver=h.default,t.ContextReporter=b.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.SandboxType=void 0;var n=r(48),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(26),u=_interopRequireDefault(s),c=r(3),l=_interopRequireDefault(c),d=r(4),f=_interopRequireDefault(d),p=r(34),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(128),b=_interopRequireDefault(_),m=r(126),g=_interopRequireDefault(m),R=(t.SandboxType={APP:\"app\",NORMAL:\"normal\",WINDOW:\"window\"},function(e){function Sandbox(e){(0,l.default)(this,Sandbox);var t=(0,y.default)(this,(Sandbox.__proto__||(0,u.default)(Sandbox)).call(this)),r=t;return e&&(r.capabilities=e),t}return(0,h.default)(Sandbox,e),(0,f.default)(Sandbox,[{key:\"deployComponent\",value:function(e,t,r){var n=this;return new a.default(function(o,i){var a={type:\"create\",from:b.default.ExternalDeployAddress,to:b.default.InternalDeployAddress,body:{url:t,sourceCode:e,config:r}};n.postMessage(a,function(e){200===e.body.code?o(\"deployed\"):i(e.body.desc)})})}},{key:\"removeComponent\",value:function(e){var t=this;return new a.default(function(r,n){var o={type:\"delete\",from:b.default.ExternalDeployAddress,to:b.default.InternalDeployAddress,body:{url:e}};t.postMessage(o,function(e){200===e.body.code?r(\"undeployed\"):n(e.body.desc)})})}},{key:\"matches\",value:function(e){var t=this,r=(0,o.default)(e).filter(function(r){return!(t.capabilities[r]&&t.capabilities[r]===e[r])});return 0===r.length||!e[r]}}]),Sandbox}(g.default));t.default=R},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(48),o=_interopRequireDefault(n),i=r(65),a=_interopRequireDefault(i),s=r(14),u=_interopRequireDefault(s),c=r(26),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(34),h=_interopRequireDefault(v),_=r(116),b=_interopRequireDefault(_),m=r(35),g=_interopRequireDefault(m),R=r(38),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(R),w=r(131),D=_interopRequireDefault(w),j=r(36),k=O.getLogger(\"DataObjectReporter\"),L=function(e){function DataObjectReporter(e){(0,f.default)(this,DataObjectReporter);var t=(0,h.default)(this,(DataObjectReporter.__proto__||(0,l.default)(DataObjectReporter)).call(this,e)),r=t;return r._subscriptions={},r._syncObj.observe(function(e){k.log(\"[Syncher.DataObjectReporter] \"+r.url+\" publish change: \",e),r._onChange(e)}),r._allocateListeners(),r.invitations=[],r._childrenSizeThreshold=5e4,t}return(0,g.default)(DataObjectReporter,e),(0,y.default)(DataObjectReporter,[{key:\"_allocateListeners\",value:function(){(0,b.default)(DataObjectReporter.prototype.__proto__||(0,l.default)(DataObjectReporter.prototype),\"_allocateListeners\",this).call(this);var e=this;e._objectListener=e._bus.addListener(e._url,function(t){switch(k.log(\"[Syncher.DataObjectReporter] listener \"+e._url+\" Received: \",t),t.type){case\"response\":e._onResponse(t);break;case\"read\":e._onRead(t);break;case\"execute\":e._onExecute(t);break;case\"create\":e._onChildCreate(t)}}),e._runtimeStatusListener=e._bus.addListener(e._syncher._runtimeUrl+\"/status\",function(t){t.body&&t.body.resource&&t.body.resource===e._url&&t.body.value&&t.body.value.backupRevision&&(e.data.backupRevision=t.body.value.backupRevision)})}},{key:\"_releaseListeners\",value:function(){(0,b.default)(DataObjectReporter.prototype.__proto__||(0,l.default)(DataObjectReporter.prototype),\"_releaseListeners\",this).call(this),this._objectListener.remove()}},{key:\"inviteObservers\",value:function(e,t){var r=this,n=e;n.length>0&&(k.log(\"[Syncher.DataObjectReporter] InviteObservers \",n,r._metadata),n.forEach(function(e){var n=new u.default(function(n,o){var i={type:\"create\",from:r._syncher._owner,to:r._syncher._subURL,body:{resume:!1,resource:r._url,schema:r._schema,value:r._metadata,authorise:[e]}};t&&(i.body.p2p=t),r.data.mutual||(i.body.mutual=r.data.mutual),r._bus.postMessage(i,function(t){k.log(\"[Syncher.DataObjectReporter] Invitation reply \",t);var r={invited:e,code:t.body&&t.body.code?t.body.code:500,desc:t.body&&t.body.desc?t.body.desc:\"Unknown\"};r.code<300?n(r):o(r)})});r.invitations.push(n)}))}},{key:\"delete\",value:function(){var e=this;e._heartBeat&&e._heartBeat.stop(),e._deleteChildrens().then(function(t){k.log(t);var r={type:\"delete\",from:e._owner,to:e._syncher._subURL,body:{resource:e._url}};e._bus.postMessage(r,function(t){k.log(\"DataObjectReporter-DELETE: \",t),200===t.body.code&&(e._releaseListeners(),delete e._syncher._reporters[e._url],e._syncObj={})})})}},{key:\"onSubscription\",value:function(e){this._onSubscriptionHandler=e}},{key:\"onResponse\",value:function(e){this._onResponseHandler=e}},{key:\"onRead\",value:function(e){this._onReadHandler=e}},{key:\"onExecute\",value:function(e){this._onExecuteHandler=e}},{key:\"_onForward\",value:function(e){var t=this;switch(k.log(\"DataObjectReporter-RCV: \",e),e.body.type){case\"subscribe\":t._onSubscribe(e);break;case\"unsubscribe\":t._onUnSubscribe(e)}}},{key:\"_onSubscribe\",value:function(e){var t=this,r=e.body.from,n=(0,j.divideURL)(r),o=n.domain,i=!0;e.body.hasOwnProperty(\"mutual\")&&!e.body.mutual&&(i=!1);var a={type:e.body.type,url:r,domain:o,identity:e.body.identity,nutual:i,accept:function(){var n={url:r,status:\"live\"};t._subscriptions[r]=n,t.metadata.subscriptions&&t.metadata.subscriptions.push(n.url);var o=(0,j.deepClone)(t._metadata);o.data=(0,j.deepClone)(t.data),o.version=t._version;var i={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200,schema:t._schema,value:o}};return e.body.hasOwnProperty(\"mutual\")&&!e.body.mutual&&(i.body.mutual=e.body.mutual,t.data.mutual=!1),t._heartBeat&&(i.body.value.childrenObjects={},i.body.value.childrenObjects.heartbeat=t._heartBeat.heartbeat),t._bus.postMessage(i),n},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:403,desc:r}})}};t._onSubscriptionHandler&&(k.log(\"SUBSCRIPTION-EVENT: \",a),t._onSubscriptionHandler(a))}},{key:\"_onUnSubscribe\",value:function(e){var t=this,r=e.body.from,n=(0,j.divideURL)(r),o=n.domain;k.log(\"[DataObjectReporter._onUnSubscribe]\",e,o,n),delete t._subscriptions[r],delete t.invitations[r];var i={type:e.body.type,url:r,domain:o,identity:e.body.identity};t._onSubscriptionHandler&&(k.log(\"UN-SUBSCRIPTION-EVENT: \",i),t._onSubscriptionHandler(i))}},{key:\"_onResponse\",value:function(e){var t=this,r={type:e.type,url:e.from,code:e.body.code};t._onResponseHandler&&(k.log(\"RESPONSE-EVENT: \",r),t._onResponseHandler(r))}},{key:\"_onRead\",value:function(e){var t=this,r=(0,a.default)(t.childrensJSON).length,n=r>t._childrenSizeThreshold,i={type:e.type,url:e.from,accept:function(){n?t._syncReplyForLargeData(e):t._syncReply(e)},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:401,desc:r}})}},s=[];t.metadata.subscriptions?s=t.metadata.subscriptions:t._subscriptions&&(s=(0,o.default)(t._subscriptions).map(function(e){return t._subscriptions[e].url})),-1!=s.indexOf(e.from)?n?t._syncReplyForLargeData(e):t._syncReply(e):t._onReadHandler&&(k.log(\"READ-EVENT: \",i),t._onReadHandler(i))}},{key:\"_syncReply\",value:function(e){var t=this,r=(0,j.deepClone)(t.metadata);r.data=(0,j.deepClone)(t.data),r.childrenObjects=(0,j.deepClone)(t.childrensJSON),r.version=t._version;var n={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200,value:r}};t._bus.postMessage(n)}},{key:\"_syncReplyForLargeData\",value:function(e){var t=this,r=(0,j.deepClone)(t.metadata);r.data=(0,j.deepClone)(t.data),r.version=t._version,delete r.childrenObjects;var n=[],o={};for(child in t._childrenObjects)o[child]={},(0,a.default)(o).length>t._childrenSizeThreshold&&n.push(o),o[child]={},o[child].value=t._childrenObjects[child].metadata,o[child].identity=t._childrenObjects[child].identity;n.push(o),r.responses=n.length+1;var i={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:100,value:r}};t._bus.postMessage(i),n.forEach(function(e){var n=(0,j.deepClone)(i);n.body.value=e,n.body.value.responses=r.responses,setTimeout(function(){t._bus.postMessage(n)},50)})}},{key:\"_onExecute\",value:function(e){var t=this;if(!e.body.method)throw e;var r={id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:200}},n={type:e.type,url:e.from,method:e.body.method,params:e.body.params,accept:function(){t._bus.postMessage(r)},reject:function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:401,desc:r}})}};t._onExecuteHandler&&(k.log(\"[DataObjectReporter] EXECUTE-EVENT: \",n),t._onExecuteHandler(n))}},{key:\"subscriptions\",get:function(){return this._subscriptions}},{key:\"childrensJSON\",get:function(){var e=this,t={},r=void 0;for(r in e._childrenObjects)t[r]={},t[r].value=e._childrenObjects[r].metadata,t[r].identity=e._childrenObjects[r].identity;return t}}]),DataObjectReporter}(D.default);t.default=L,e.exports=t.default},function(e,t){!function(){\"use strict\";function Observer(e,t,r,n,o,i){function deliver(e,n){if(deliver.delay=n,!deliver.pause&&s.changeset.length>0){if(!e){var o=s.changeset.filter(function(e){return!r||r.indexOf(e.type)>=0});o.length>0&&t(o)}s.changeset=[]}}var a,s=this;return deliver.pause=o,deliver.delay=i,s.get=function(e,t){return\"__observer__\"===t?s:\"unobserve\"===t?function(){return Object.unobserve(e),e}:\"deliver\"===t?deliver:e[t]},s.target=e,s.changeset=[],s.target.__observerCallbacks__||(Object.defineProperty(e,\"__observerCallbacks__\",{enumerable:!1,configurable:!0,writable:!1,value:[]}),Object.defineProperty(e,\"__observers__\",{enumerable:!1,configurable:!0,writable:!1,value:[]})),s.target.__observerCallbacks__.push(t),s.target.__observers__.push(this),a=new Proxy(e,s),deliver(!1,i),a}Object.observe||\"function\"!=typeof Proxy||(Observer.prototype.deliver=function(){return this.get(null,\"deliver\")},Observer.prototype.set=function(e,t,r){var n=e[t],o=void 0===n?\"add\":\"update\";if(e[t]=r,e.__observers__.indexOf(this)>=0&&(!this.acceptlist||this.acceptlist.indexOf(o)>=0)){var i={object:e,name:t,type:o},a=0===this.changeset.length,s=this.deliver();\"update\"===o&&(i.oldValue=n),this.changeset.push(i),a&&s(!1,\"number\"==typeof s.delay?s.delay:10)}return!0},Observer.prototype.deleteProperty=function(e,t){var r=e[t];if(delete e[t],e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"delete\")>=0){var n={object:e,name:t,type:\"delete\",oldValue:r},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.defineProperty=function(e,t,r){if(Object.defineProperty(e,t,r),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"reconfigure\")>=0){var n={object:e,name:t,type:\"reconfigure\"},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.setPrototypeOf=function(e,t){var r=Object.getPrototypeOf(e);if(Object.setPrototypeOf(e,t),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"setPrototype\")>=0){var n={object:e,name:\"__proto__\",type:\"setPrototype\",oldValue:r},o=0===this.changeset.length,i=this.deliver();this.changeset.push(n),o&&i(!1,\"number\"==typeof i.delay?i.delay:10)}return!0},Observer.prototype.preventExtensions=function(e){if(Object.preventExtensions(e),e.__observers__.indexOf(this)>=0&&!this.acceptlist||this.acceptlist.indexOf(\"preventExtensions\")>=0){var t={object:e,type:\"preventExtensions\"},r=0===this.changeset.length,n=this.deliver();this.changeset.push(t),r&&n(!1,\"number\"==typeof n.delay?n.delay:10)}return!0},Object.observe=function(e,t,r,n,o,i){return new Observer(e,t,r,n,o,i)},Object.unobserve=function(e,t){if(e.__observerCallbacks__){if(!t)return e.__observerCallbacks__.splice(0,e.__observerCallbacks__.length),void e.__observers__.splice(0,e.__observers__.length);e.__observerCallbacks__.forEach(function(r,n){t===r&&(e.__observerCallbacks__.splice(n,1),delete e.__observers__[n].callback,e.__observers__.splice(n,1))})}},Array.observe=function(e,t,r,n,o,i){if(!(e instanceof Array||Array.isArray(e)))throw new TypeError(\"First argument to Array.observer is not an Array\");r=r||[\"add\",\"update\",\"delete\",\"splice\"];var a=new Proxy(e,{get:function(t,n){return\"unobserve\"===n?function(e){return e?Object.unobserve(t,e):t.unobserve()}:\"splice\"===n?function(n,o){if(\"number\"!=typeof n||\"number\"!=typeof o)throw new TypeError(\"First two arguments to Array splice are not number, number\");var i=this.slice(n,n+o),a=arguments.length>1?arguments.length-2:0,u={object:e,type:\"splice\",index:n,removed:i,addedCount:a};if(t.splice.apply(t,arguments),r.indexOf(\"splice\")>=0){var n=0===s.__observer__.changeset.length,c=s.__observer__.deliver();s.__observer__.changeset.push(u),n&&c(!1,\"number\"==typeof c.delay?c.delay:10)}}:\"push\"===n?function(e){return this.splice(this.length,0,e)}:\"pop\"===n?function(){return this.splice(this.length-1,1)}:\"unshift\"===n?function(e){return this.splice(0,0,e)}:\"shift\"===n?function(){return this.splice(0,1)}:t[n]}}),s=Object.observe(a,function(e){var n=e.filter(function(e){return\"length\"!==e.name&&\"add\"!==e.name&&(!r||r.indexOf(e.type)>=0)});n.length>0&&t(n)},r,n,o,i);return s},Array.unobserve=function(e,t){return e.unobserve(t)}),Object.deepObserve=function(e,t,r){function reobserve(e,r){Object.keys(e).forEach(function(o){if((\"object\"===n(e[o])||\"array\"===n(e[o]))&&!e[o].hasOwnProperty(\"__observers__\")){var i=r.slice(0);i.push(o),e[o]=Object.deepObserve(e[o],t,i)}})}r=r||[];var n=function(e){return{}.toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()};return reobserve(e,r),Object.observe(e,function(e){function recurse(e,t,r,o,i){if(o instanceof Object){Object.keys(o).forEach(function(a){if(!r||r[a]!==o[a]){var s=r&&void 0!==r[a]?r[a]:void 0,u=void 0===s?\"add\":\"update\",c=i+\".\"+a;n.push({name:e,object:t,type:u,oldValue:s,newValue:o[a],keypath:c}),recurse(e,t,s,o[a],c)}})}else if(r instanceof Object){var a=Object.keys(r);a.forEach(function(a){var s=null===o?\"update\":\"delete\",u=i+\".\"+a;n.push({name:e,object:t,type:s,oldValue:r[a],newValue:o,keypath:u}),recurse(e,t,r[a],void 0,u)})}}var n=[];e.forEach(function(e){var t=(r.length>0?r.join(\".\")+\".\":\"\")+e.name;\"update\"!==e.type&&\"add\"!==e.type||reobserve(e.object,r),n.push({name:e.name,object:e.object,type:e.type,oldValue:e.oldValue,newValue:e.object[e.name],keypath:t}),recurse(e.name,e.object,e.oldValue,e.object[e.name],t)}),t(n)})}}()},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(36),u=function(){function HeartBeat(e,t,r,n){function throwMandatoryParmMissingError(e){throw\"[HeartBeat] \"+e+\" mandatory parameter is missing\"}var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:60;(0,o.default)(this,HeartBeat);var a=this;e?a._bus=e:throwMandatoryParmMissingError(\"bus\"),n?a._dataObject=n:throwMandatoryParmMissingError(\"dataObject\"),i?a._heartBeatRate=i:throwMandatoryParmMissingError(\"heartBeatRate\"),r?a._runtimeUrl=r:throwMandatoryParmMissingError(\"runtimeUrl\"),t?a._hypertyUrl=t:throwMandatoryParmMissingError(\"hypertyUrl\"),a._stop={heartBeat:!1,sync:function(e){var o={from:t,to:r+\"/sm\",type:\"execute\",body:{method:\"stopSync\",params:[n.url]}};e.postMessage(o)}}}return(0,a.default)(HeartBeat,[{key:\"start\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.heartbeat=e,this._isHeartBeatActive(this.heartBeat,2*this._heartBeatRate)?this._watchHeartBeat(this._heartBeatRate,!0,this._onHertbeatStopped):(this._stop.heartBeat=this._startHeartBeat(this._heartBeatRate),this._startSync())}},{key:\"stop\",value:function(){this._stop.heartBeat&&this._stop.heartBeat(),this._stop.sync(this._bus)}},{key:\"onNewHeartbeat\",value:function(e){this.heartbeat=e}},{key:\"_isHeartBeatActive\",value:function(e,t){var r=(0,s.secondsSinceEpoch)()-e;return!(r>2*t)}},{key:\"_startHeartBeat\",value:function(e){var t=this,r={from:t._hypertyUrl,to:t._dataObject.url+\"/children/\",type:\"create\",body:{resource:\"heartbeat\",mutual:!1,value:(0,s.secondsSinceEpoch)()}};this._bus.postMessage(r),this.heartbeat=(0,s.secondsSinceEpoch)();var n=setInterval(function(){var e={from:t._hypertyUrl,to:t._dataObject.url+\"/children/\",type:\"create\",body:{resource:\"heartbeat\",mutual:!1,value:(0,s.secondsSinceEpoch)()}};t._bus.postMessage(e),this.heartbeat=(0,s.secondsSinceEpoch)()},1e3*e);return function(){clearInterval(n)}}},{key:\"_startSync\",value:function(){var e=this._dataObject.data.backupRevision,t={from:this._hypertyUrl,to:this._runtimeUrl+\"/sm\",type:\"execute\",body:{method:\"sync\",params:[this._dataObject.url,e]}};this._bus.postMessage(t)}},{key:\"_watchHeartBeat\",value:function(e,t,r){var n=this,o=r,i=setInterval(function(){t&&!n._isHeartBeatActive(n.heartBeat,n._heartBeatRate)?(clearInterval(i),o(n)):!t&&this._isHeartBeatActive(n.heartBeat,n._heartBeatRate)&&(clearInterval(i),o())},1e3*e*2)}},{key:\"_onHertbeatStopped\",value:function(e){e._startHeartBeat(e._heartBeatRate),e._startSync()}},{key:\"heartBeat\",get:function(){return this.heartbeat?this.heartbeat:0}}]),HeartBeat}();t.default=u,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(4),u=_interopRequireDefault(s),c=r(160),l=_interopRequireDefault(c),d=function(){function HypertyResourceFactory(){(0,a.default)(this,HypertyResourceFactory)}return(0,u.default)(HypertyResourceFactory,[{key:\"createHypertyResource\",value:function(e,t,r){var n=void 0;switch(t){case\"file\":n=new l.default(e,r);break;default:throw new Error(\"[HypertyResourceFactory.createHypertyResource] not supported type: \",t)}return n}},{key:\"createHypertyResourceWithContent\",value:function(e,t,r,n){var i=void 0;return new o.default(function(o){switch(t){case\"file\":i=new l.default(e,n);break;default:reject()}i.init(r).then(function(){return i.save()}).then(function(){o(i)})})}}]),HypertyResourceFactory}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(26),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(34),f=_interopRequireDefault(d),p=r(35),y=_interopRequireDefault(p),v=r(38),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),_=r(161),b=_interopRequireDefault(_),m=(r(36),r(162)),g=_interopRequireDefault(m),R=h.getLogger(\"FileHypertyResource\"),O=function(e){function FileHypertyResource(e,t){(0,u.default)(this,FileHypertyResource);var r=(0,f.default)(this,(FileHypertyResource.__proto__||(0,a.default)(FileHypertyResource)).call(this,e,t));return r.metadata.resourceType=\"file\",r}return(0,y.default)(FileHypertyResource,e),(0,l.default)(FileHypertyResource,[{key:\"init\",value:function(e){var t=this;if(!e)throw new Error(\"[FileHypertyResource.constructor] missing mandatory *file* input \");return new o.default(function(r,n){if(t._metadata.name=e.name,t._metadata.lastModified=e.lastModified,t._metadata.size=e.size,t._metadata.mimetype=e.type,R.log(\"[FileHypertyResource.init] file: \",e),t._isSender){switch(e.type.split(\"/\")[0]){case\"image\":t._getImagePreview(e).then(function(n){t._metadata.preview=n,t._content=e,r()});break;default:t._content=e,r()}}else t._content=e.content,e.preview&&(t._metadata.preview=e.preview),r()})}},{key:\"_getImagePreview\",value:function(e){var t=new FileReader;return new o.default(function(r,n){g.default.resize(e,{width:100,height:100},function(e,n){n?(t.readAsDataURL(e),t.onload=function(e){r(e.target.result)}):(R.warn(\"[FileHypertyResource._getImagePreview] unable to create image preview from original image \"),r(void 0))})})}},{key:\"toMessage\",value:function(){}},{key:\"name\",get:function(){return this._metadata.name}},{key:\"preview\",get:function(){return this._metadata.preview}}]),FileHypertyResource}(b.default);t.default=O,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(14),o=_interopRequireDefault(n),i=r(26),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(34),f=_interopRequireDefault(d),p=r(116),y=_interopRequireDefault(p),v=r(35),h=_interopRequireDefault(v),_=r(38),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(_),m=r(36),g=r(133),R=_interopRequireDefault(g),O=b.getLogger(\"HypertyResource\"),w=function(e){function HypertyResource(e,t){(0,u.default)(this,HypertyResource);var r=(0,f.default)(this,(HypertyResource.__proto__||(0,a.default)(HypertyResource)).call(this,t)),n=r;return n.arraybufferSizeLimit=5242880,n._isSender=e,n._localStorageURL=n._parentObject._syncher._runtimeUrl+\"/storage\",r}return(0,h.default)(HypertyResource,e),(0,l.default)(HypertyResource,[{key:\"save\",value:function(){var e=this;return new o.default(function(t,r){var n={from:e._owner,to:e._localStorageURL,type:\"create\",body:{value:(0,m.deepClone)(e._metadata)}},o=function(n){O.info(\"[HypertyResource.save] reply: \",n),e._bus.removeResponseListener(e._owner,n.id),200===n.body.code?(n.body.value&&(e._metadata.contentURL||(e._metadata.contentURL=[]),e._metadata.contentURL.push(n.body.value)),t()):r(n.body.code+\" \"+n.body.desc)};n.body.value.content=e._content,e._bus.postMessage(n,o,!1)})}},{key:\"read\",value:function(e){var t=this;return O.info(\"[HypertyResource.read] \",this),new o.default(function(r,n){if(t.content)r(t);else{var o=t._getBestContentURL(t._metadata.contentURL);O.log(\"Storage:\",o);var i={from:t._owner,to:o.url,type:\"read\",body:{resource:o.url+\"/\"+o.resource,p2p:!0}};t.metadata.p2pRequester&&t.metadata.p2pHandler&&(i.body.p2pRequester=t.metadata.p2pRequester,i.body.p2pHandler=t.metadata.p2pHandler),t._getBestResource(i,e).then(function(e){O.info(\"[HypertyResource] - get locally the resource:\",e),r(t)}).catch(function(i){O.warn(\"[HypertyResource] - get locally the resource fail\",i);var a={from:t._owner,to:o.remoteURL,type:\"read\",body:{resource:o.remoteURL+\"/\"+o.resource,p2p:!0}};t.metadata.p2pRequester&&t.metadata.p2pHandler&&(a.body.p2pRequester=t.metadata.p2pRequester,a.body.p2pHandler=t.metadata.p2pHandler),t._getBestResource(a,e).then(function(e){O.warn(\"[HypertyResource] - get remotely the resource\",e),r(t)}).catch(function(e){O.warn(\"[HypertyResource] - get remotely the resource fail\",e),n(e.body.code+\" \"+e.body.desc)})})}})}},{key:\"_getBestResource\",value:function(e,t){var r=this;return new o.default(function(n,o){var i=setTimeout(function(){return r._bus.removeResponseListener(r._owner,s),e.body.code=408,e.body.desc=\"Response timeout\",o(e)},3e3),a=function(e){O.log(\"[HypertyResource.read] reply: \",e);var a=e.id;switch(clearTimeout(i),e.body.code){case 200:r._content=e.body.value.content,e.body.value.size<r.arraybufferSizeLimit&&r.save(),r._bus.removeResponseListener(r._owner,a),n(e);break;case 183:t(e.body.value);break;default:r._bus.removeResponseListener(r._owner,a),o(e)}},s=r._bus.postMessage(e,a,!1)})}},{key:\"delete\",value:function(){var e=this;O.info(\"[HypertyResource.delete]\",e.metadata);var t={from:e._owner,to:e._localStorageURL,type:\"delete\",body:{resources:e.metadata.contentURL}};return new o.default(function(r){e._bus.postMessage(t,function(e){r(e.body.code<300?!0:!1)})})}},{key:\"_getBestContentURL\",value:function(e){var t=this,r=e[0],n=r.substr(r.lastIndexOf(\"/\")+1);return{url:t._localStorageURL,resource:n,remoteURL:r.substr(0,r.lastIndexOf(\"/\"))}}},{key:\"resourceType\",get:function(){return this.metadata.resourceType}},{key:\"mimetype\",get:function(){return this._metadata.type}},{key:\"content\",get:function(){return this._content}},{key:\"contentURL\",get:function(){return this._metadata.contentURL}},{key:\"shareable\",get:function(){var e=this,t=(0,y.default)(HypertyResource.prototype.__proto__||(0,a.default)(HypertyResource.prototype),\"metadata\",this);return t.resourceType=e.resourceType,t}}]),HypertyResource}(R.default);t.default=w,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=\"undefined\"!=typeof Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),u=s&&\"undefined\"!=typeof Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),c=\"undefined\"!=typeof HTMLCanvasElement&&HTMLCanvasElement.prototype.toBlob,l=c||\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof atob,d=\"undefined\"!=typeof FileReader||\"undefined\"!=typeof URL,f=function(){function ImageTools(){(0,o.default)(this,ImageTools)}return(0,a.default)(ImageTools,null,[{key:\"resize\",value:function(e,t,r){\"function\"==typeof t&&(r=t,t={width:640,height:480});t.width,t.height;if(!ImageTools.isSupported()||!e.type.match(/image.*/))return r(e,!1),!1;if(e.type.match(/image\\/gif/))return r(e,!1),!1;var n=document.createElement(\"img\");return n.onload=function(o){var i=n.width,a=n.height,s=!1;if(i>=a&&i>t.width?(a*=t.width/i,i=t.width,s=!0):a>t.height&&(i*=t.height/a,a=t.height,s=!0),!s)return void r(e,!1);var u=document.createElement(\"canvas\");if(u.width=i,u.height=a,u.getContext(\"2d\").drawImage(n,0,0,i,a),c)u.toBlob(function(e){r(e,!0)},e.type);else{var l=ImageTools._toBlob(u,e.type);r(l,!0)}},ImageTools._loadImage(n,e),!0}},{key:\"_toBlob\",value:function(e,t){var r=e.toDataURL(t),n=r.split(\",\"),o=void 0;o=n[0].indexOf(\"base64\")>=0?atob(n[1]):decodeURIComponent(n[1]);for(var i=new ArrayBuffer(o.length),a=new Uint8Array(i),c=0;c<o.length;c+=1)a[c]=o.charCodeAt(c);var l=n[0].split(\":\")[1].split(\";\")[0],d=null;if(s)d=new Blob([u?a:i],{type:l});else{var f=new BlobBuilder;f.append(i),d=f.getBlob(l)}return d}},{key:\"_loadImage\",value:function(e,t,r){if(\"undefined\"==typeof URL){var n=new FileReader;n.onload=function(t){e.src=t.target.result,r&&r()},n.readAsDataURL(t)}else e.src=URL.createObjectURL(t),r&&r()}},{key:\"isSupported\",value:function(){return\"undefined\"!=typeof HTMLCanvasElement&&l&&d}}]),ImageTools}();t.default=f,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(48),o=_interopRequireDefault(n),i=r(102),a=_interopRequireDefault(i),s=r(14),u=_interopRequireDefault(s),c=r(26),l=_interopRequireDefault(c),d=r(3),f=_interopRequireDefault(d),p=r(4),y=_interopRequireDefault(p),v=r(34),h=_interopRequireDefault(v),_=r(116),b=_interopRequireDefault(_),m=r(35),g=_interopRequireDefault(m),R=r(38),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(R),w=r(36),D=r(131),j=_interopRequireDefault(D),k=O.getLogger(\"DataObjectObserver\"),L={ANY:\"any\",START:\"start\",EXACT:\"exact\"},M=function(e){function DataObjectObserver(e){(0,f.default)(this,DataObjectObserver);var t=(0,h.default)(this,(DataObjectObserver.__proto__||(0,l.default)(DataObjectObserver)).call(this,e)),r=t;return r._version=e.version,r._filters={},r._syncObj.observe(function(e){r._onFilter(e)}),r._allocateListeners(),t}return(0,g.default)(DataObjectObserver,e),(0,y.default)(DataObjectObserver,[{key:\"sync\",value:function(){var e=this;return k.info(\"[DataObjectObserver_sync] synchronising \"),new u.default(function(t,r){var n={};e._syncher.read(e._metadata.url,n).then(function(r){k.info(\"[DataObjectObserver_sync] value to sync: \",r),(0,a.default)(e.data,(0,w.deepClone)(r.data)),e._version=r.version,e._metadata.lastModified=r.lastModified,r.childrenObjects?(e.resumeChildrens(r.childrenObjects),e._storeChildrens(),t(!0)):t(!0)}).catch(function(e){k.info(\"[DataObjectObserver_sync] sync failed: \",e),t(!1)})})}},{key:\"_storeChildrens\",value:function(){var e=this,t={};(0,o.default)(e._childrenObjects).forEach(function(r){var n=e._childrenObjects;t[r]={},t[r].value=n[r].metadata,t[r].identity=n[r].identity});var r={from:e._owner,to:e._syncher._subURL,type:\"create\",body:{resource:e._url,attribute:\"childrenObjects\",value:t}};e._bus.postMessage(r)}},{key:\"_allocateListeners\",value:function(){(0,b.default)(DataObjectObserver.prototype.__proto__||(0,l.default)(DataObjectObserver.prototype),\"_allocateListeners\",this).call(this);var e=this;e._changeListener=e._bus.addListener(e._url+\"/changes\",function(t){\"update\"===t.type&&(k.log(\"DataObjectObserver-\"+e._url+\"-RCV: \",t),e._changeObject(e._syncObj,t))})}},{key:\"_releaseListeners\",value:function(){(0,b.default)(DataObjectObserver.prototype.__proto__||(0,l.default)(DataObjectObserver.prototype),\"_releaseListeners\",this).call(this),this._changeListener.remove()}},{key:\"delete\",value:function(){var e=this;e._heartBeat&&e._heartBeat.stop(),e._deleteChildrens().then(function(){e.unsubscribe(),e._releaseListeners(),delete e._syncher._observers[e._url]})}},{key:\"unsubscribe\",value:function(){var e=this,t={type:\"unsubscribe\",from:e._owner,to:e._syncher._subURL,body:{resource:e._url}};e._bus.postMessage(t,function(t){k.log(\"DataObjectObserver-UNSUBSCRIBE: \",t),200===t.body.code&&(e._releaseListeners(),delete e._syncher._observers[e._url])})}},{key:\"onChange\",value:function(e,t){var r=e,n={type:L.EXACT,callback:t},o=e.indexOf(\"*\");o===e.length-1&&(0===o?n.type=L.ANY:(n.type=L.START,r=e.substr(0,e.length-1))),this._filters[r]=n}},{key:\"_onFilter\",value:function(e){var t=this;(0,o.default)(t._filters).forEach(function(r){var n=t._filters[r];n.type===L.ANY?n.callback(e):n.type===L.START?0===e.field.indexOf(r)&&n.callback(e):n.type===L.EXACT&&e.field===r&&n.callback(e)})}},{key:\"onDisconnected\",value:function(e){var t=this;return new u.default(function(r,n){t._subscribeRegistration().then(function(){t._onDisconnected=e,r()}).catch(function(e){return n(e)})})}},{key:\"_subscribeRegistration\",value:function(){var e=this,t={type:\"subscribe\",from:this._owner,to:this._syncher._runtimeUrl+\"/subscriptions\",body:{resources:[this._url+\"/registration\"]}};return new u.default(function(r,n){e._bus.postMessage(t,function(t){k.log(\"[DataObjectObserver._subscribeRegistration] \"+e._url+\" rcved reply \",t),200===t.body.code?(e._generateListener(e._url+\"/registration\"),r()):(k.error(\"Error subscribing registration status for \",e._url),n(\"Error subscribing registration status for \"+e._url))})})}},{key:\"_generateListener\",value:function(e){var t=this;t._bus.addListener(e,function(e){k.log(\"[DataObjectObserver.registrationNotification] \"+t._url+\": \",e),e.body.value&&\"disconnected\"===e.body.value&&t._onDisconnected&&(k.log(\"[DataObjectObserver] \"+t._url+\": was disconnected \",e),t._onDisconnected())})}},{key:\"execute\",value:function(e,t){var r=this,n=this;return new u.default(function(o,i){var a={type:\"execute\",from:r._owner,to:n._url,body:{method:e,params:t}};n._bus.postMessage(a,function(t){k.log(\"[DataObjectObserver.execute] \"+n._url+\" rcved reply \",t),200===t.body.code?o():(k.warn(\"[DataObjectObserver.execute] execution of method \"+e+\" was reject by reporter\"),i(\"[DataObjectObserver.execute] execution of method \"+e+\" was reject by reporter\"))})})}}]),DataObjectObserver}(j.default);t.default=M,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(38),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),c=u.getLogger(\"DataProvisional\"),l=function(){function DataProvisional(e,t,r,n){(0,o.default)(this,DataProvisional);var i=this;i._owner=e,i._url=t,i._bus=r,i._children=n,i._changes=[],i._allocateListeners()}return(0,a.default)(DataProvisional,[{key:\"_allocateListeners\",value:function(){var e=this;e._listener=e._bus.addListener(e._url,function(t){c.log(\"DataProvisional-\"+e._url+\"-RCV: \",t),e._changes.push(t)})}},{key:\"_releaseListeners\",value:function(){this._listener.remove()}},{key:\"apply\",value:function(e){this._changes.forEach(function(t){e._changeObject(e._syncObj,t)})}},{key:\"children\",get:function(){return this._children}}]),DataProvisional}();t.default=l,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(4),a=_interopRequireDefault(i),s=r(36),u=function(){function NotificationHandler(e){if((0,o.default)(this,NotificationHandler),!e)throw Error(\"[NotificationHandler Constructor] bus input is mandatory\");this._bus=e,this._onNotificationHandler={}}return(0,a.default)(NotificationHandler,[{key:\"onNotification\",value:function(e,t){this._onNotificationHandler[e]=t}},{key:\"onCreate\",value:function(e){var t=this,r=e.body.hasOwnProperty(\"resource\")?e.body.resource:e.from.slice(0,-13),n=(0,s.divideURL)(r),o=n.domain,i=r.split(\"://\")[0],a=function(r){t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:400,desc:\"Bad Request: \"+r}})};e.body.hasOwnProperty(\"source\")||a(\"Missing source\"),e.body.hasOwnProperty(\"schema\")||a(\"Missing schema\"),e.body.hasOwnProperty(\"value\")||a(\"Missing value\"),e.body.hasOwnProperty(\"identity\")||a(\"Missing identity\");var u={type:e.type,from:e.body.source,url:r,domain:o,schema:e.body.schema,value:e.body.value,identity:e.body.identity,to:e.to,via:e.body.via,ack:function(r){var n=200;r&&(n=r),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:n}})},error:function(e){a(e)}};t._onNotificationHandler[i]&&t._onNotificationHandler[i](u)}},{key:\"onDelete\",value:function(e){var t=this,r=e.body.resource,n=t._observers[r],o={from:t.owner,to:t._subURL,id:e.id,type:\"unsubscribe\",body:{resource:e.body.resource}};if(t._bus.postMessage(o),delete t._observers[r],n){var i={type:e.type,url:r,identity:e.body.identity,ack:function(r){var o=200;r&&(o=r),200===o&&n.delete(),t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:o,source:t._owner}})}};t._onNotificationHandler&&(log.log(\"NOTIFICATION-EVENT: \",i),t._onNotificationHandler(i))}else t._bus.postMessage({id:e.id,type:\"response\",from:e.to,to:e.from,body:{code:404,source:t._owner}})}}]),NotificationHandler}();t.default=u,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(26),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=r(34),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(35),f=_interopRequireDefault(d),p=r(125),y=_interopRequireDefault(p),v=function(e){function DiscoveredObject(e,t,r,n,i){(0,a.default)(this,DiscoveredObject);var s=(0,u.default)(this,(DiscoveredObject.__proto__||(0,o.default)(DiscoveredObject)).call(this,e.hypertyID||e.url,t,r,n));return s._data=e,s._discovery=i,s}return(0,f.default)(DiscoveredObject,e),(0,l.default)(DiscoveredObject,[{key:\"data\",get:function(){return this._data}}]),(0,l.default)(DiscoveredObject,[{key:\"check\",value:function(){var e=this,t={body:{}};e._discoveredObjectURL.startsWith(\"hyperty://\")?e._discovery.discoverHypertyPerURL(e._discoveredObjectURL).then(function(r){t.body.status=r.status,e._processNotification(t)}):e._discovery.discoverDataObjectsPerURL(e._discoveredObjectURL).then(function(r){t.body.status=r.status,e._processNotification(t)})}}]),DiscoveredObject}(y.default);t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(48),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=function(){function Search(e,t){if((0,u.default)(this,Search),!e)throw new Error(\"The discovery component is a needed parameter\");if(!t)throw new Error(\"The identityManager component is a needed parameter\");var r=this;r.discovery=e,r.identityManager=t}return(0,l.default)(Search,[{key:\"myIdentity\",value:function(){var e=this;return new a.default(function(t,r){e.identityManager.discoverUserRegistered().then(function(e){t(e)}).catch(function(e){r(e)})})}},{key:\"hyperties\",value:function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:\"users\",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)throw new Error(\"You need to provide a list of users\");if(!t)throw new Error(\"You need to provide a list of domains\");if(!n)throw new Error(\"You need to provide a list of resources\");if(!r)throw new Error(\"You need to provide a list of schemes\");var s=this;return new a.default(function(u,c){if(0===e.length)u(e);else{var l=[];e.forEach(function(e,o){var a=t[o];i?l.push(s.discovery.discoverHypertiesPerUserProfileData(e,r,n)):l.push(s.discovery.discoverHyperties(e,r,n,a))}),a.default.all(l.map(function(e){return e.then(function(e){return e},function(e){return e})})).then(function(e){var t=e.map(function(e){if(e.hasOwnProperty(\"hypertyID\"))return e;var t=(0,o.default)(e).reduceRight(function(t,r){var n=new Date(e[r].lastModified);return new Date(e[t].lastModified).getTime()<n.getTime()?r:t});return e[t]}),r=t.filter(function(e){return e.hasOwnProperty(\"hypertyID\")});e.forEach(function(e){if(\"No Hyperty was found\"!==e)return u(r)}),c(\"No Hyperty was found\")}).catch(function(t){u(e)})}})}}]),Search}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(3),o=_interopRequireDefault(n),i=r(169),a=_interopRequireDefault(i),s=function MessageBodyIdentity(e,t,r,n,i,s,u,c){if((0,o.default)(this,MessageBodyIdentity),!s)throw new Error(\"IDP should be a parameter\");if(!e)throw new Error(\"username should be a parameter\");this.idp=s,u&&(this.assertion=u),this.userProfile=new a.default(e,t,r,n,i,c)};t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(102),o=_interopRequireDefault(n),i=r(3),a=_interopRequireDefault(i),s=function UserProfile(e,t,r,n,i,s){(0,a.default)(this,UserProfile),e&&(this.preferred_username=e),r&&(this.picture=r),n&&(this.name=n),i&&(this.locale=i),t&&(this.userURL=t),s&&(0,o.default)(this,s)};t.default=s,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(102),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(139),f=r(140),p=_interopRequireDefault(f),y=r(141),v=function(){function ChatManager(e,t,r,n,o){if((0,u.default)(this,ChatManager),!e)throw new Error(\"[ChatManager.constructor] The myUrl is a needed parameter\");if(!t)throw new Error(\"[ChatManager.constructor] The MiniBus is a needed parameter\");if(!r)throw new Error(\"[ChatManager.constructor] The configuration is a needed parameter\");var i=this;n||(n=o.createSyncher(e,t,r)),i._runtimeURL=r.runtimeURL;var a=o.divideURL(i._runtimeURL).domain,s=o.createDiscovery(e,r.runtimeURL,t),c=o.createIdentityManager(e,r.runtimeURL,t);i._objectDescURL=\"hyperty-catalogue://catalogue.\"+a+\"/.well-known/dataschema/Communication\",i._reportersControllers={},i._observersControllers={},i._myUrl=e,i._bus=t,i._syncher=n,i._domain=a,i.discovery=s,i.identityManager=c,i.currentIdentity,i.search=o.createSearch(s,c),i.communicationObject=d.communicationObject,i.communicationChildren=d.communicationChildren}return(0,l.default)(ChatManager,[{key:\"processNotification\",value:function(e){var t=this;if(\"create\"===e.type&&t._onInvitation&&t._onInvitation(e),\"delete\"===e.type){e.ack(200),t._observersControllers[e.url].closeEvent=e,delete t._observersControllers[e.url],t._observersControllers.closeEvent=e,t.communicationObject=d.communicationObject;for(var r in this._reportersControllers)this._reportersControllers[r].close(e);for(var n in this._observersControllers)this._observersControllers[n].close(e)}}},{key:\"myIdentity\",value:function(e){var t=this;return new a.default(function(r,n){if(e)return r(e);t._myUrl.includes(\"hyperty://\")?t.identityManager.discoverUserRegistered().then(function(e){r(e)}).catch(function(e){n(e)}):t.identityManager.discoverIdentityPerIdP().then(function(e){r(e)}).catch(function(e){n(e)})})}},{key:\"create\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,i=n._syncher;return new a.default(function(s,u){n.communicationObject=d.communicationObject,n.communicationObject.cseq=1,n.communicationObject.startingTime=(new Date).toJSON(),n.communicationObject.status=d.CommunicationStatus.OPEN;var c=void 0;n.myIdentity().then(function(l){c=l;var d=new y.UserInfo(n._myUrl,n._domain,l);n.communicationObject.participants[l.guid]=d;var f=[],v=[],h={};t.forEach(function(e){var t=n.discovery.discoverHypertiesDO(e.user,[\"comm\"],[\"chat\"],e.domain);f.push(t)}),a.default.all(f).then(function(t){var a=[];t.forEach(function(e){e.forEach(function(e){\"live\"===e.data.status?(a.push(e.data.hypertyID),h[e.data.hypertyID]=e):v.length<5&&v.push(e)})});var s=!r.mutual||r.mutual,u=(0,o.default)({resources:[\"chat\"],mutual:s},r);return delete u.name,n.offline&&(u.offline=n.offline),i.create(n._objectDescURL,a,n.communicationObject,!0,!1,e,{},u)}).then(function(e){var t=new p.default(i,n.discovery,n._domain,n.search,c,n);t.dataObjectReporter=e,n._reportersControllers[e.url]=t,e.invitations.length>0&&t.invitationsHandler.processInvitations(h,e),v.length>0&&t.invitationsHandler.inviteDisconnectedHyperties(v,e),s(t)}).catch(function(e){u(e)})}).catch(function(e){return u(e)})})}},{key:\"onInvitation\",value:function(e){this._onInvitation=e}},{key:\"join\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2],n=this;return new a.default(function(o,i){var a=n._syncher,s=void 0;n.myIdentity(r).then(function(r){s=r;var o={schema:n._objectDescURL,resource:e,store:!0,p2p:!1,mutual:t,domain_subscription:!0,identity:r};return n.offline&&(o.offline=n.offline),a.subscribe(o)}).then(function(e){var t=new p.default(a,n.discovery,n._domain,n.search,s,n);o(t),t.dataObjectObserver=e,n._observersControllers[e.url]=t}).catch(function(e){i(e)})})}},{key:\"offline\",set:function(e){this._offline=e},get:function(){return!!this._offline&&this._offline}}]),ChatManager}();t.default=v,e.exports=t.default},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(48),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=function(){function InvitationsHandler(e){if((0,u.default)(this,InvitationsHandler),!e)throw Error(\"hypertyURL is a necessary dependecy\");var t=this;t._hypertyURL=e,t._pending={}}return(0,l.default)(InvitationsHandler,[{key:\"inviteDisconnectedHyperties\",value:function(e,t){var r=this;e.forEach(function(e){r._pending[t]||(r._pending[t]={}),r._pending[t][e.data.hypertyID]=e,e.onLive(r._hypertyURL,function(){t.inviteObservers([e.data.hypertyID]),e.unsubscribeLive(r._hypertyURL),delete r._pending[t][e.data.hypertyID]})})}},{key:\"processInvitations\",value:function(e,t){var r=this,n=this,o=t.invitations||[];o.forEach(function(o){o.then(function(e){r._invitationsResponse&&r._invitationsResponse(e)}).catch(function(o){r._invitationsResponse&&r._invitationsResponse(o),n.inviteDisconnectedHyperties([e[o.invited]],t)})})}},{key:\"resumeDiscoveries\",value:function(e,t){var r=this;return new a.default(function(n,i){var s={},u=[],c=[],l=[];e.resumeDiscoveries().then(function(e){e.forEach(function(e){e.data.resources&&\"chat\"===e.data.resources[0]&&(\"live\"===e.data.status?(s[e.data.hypertyID]=e,u.push(e.data.hypertyID),l.push(e.unsubscribeLive(r._hypertyURL))):c.push(e))}),c.length>0&&r.inviteDisconnectedHyperties(c,t),(0,o.default)(s).length>0?(t.inviteObservers(u),t.invitations.length>0&&r.processInvitations(s,t),a.default.all(l).then(function(){n()})):n()})}).catch(function(e){reject(\"[GroupChatManager.InvitationsHandler.resumeDiscoveries] failed | \",e)})}},{key:\"cleanInvitations\",value:function(e){var t=this,r=t._pending[e];return r?new a.default(function(e,n){var i=(0,o.default)(r),s=[];i.forEach(function(e){s.push(r[e].unsubscribeLive(t._hypertyURL))}),a.default.all(i).then(function(){e()})}):a.default.resolve()}},{key:\"invitationResponse\",set:function(e){this._invitationsResponse=e}}]),InvitationsHandler}();t.default=d,e.exports=t.default},function(e,t,r){\"use strict\";t.__esModule=!0;var n=r(64),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=r(102),o=_interopRequireDefault(n),i=r(14),a=_interopRequireDefault(i),s=r(3),u=_interopRequireDefault(s),c=r(4),l=_interopRequireDefault(c),d=r(139),f=r(142),p=_interopRequireDefault(f),y=r(141),v=function(){function SimpleSimpleChatManager(e,t,r,n,o){if((0,u.default)(this,SimpleSimpleChatManager),!e)throw new Error(\"[SimpleChatManager.constructor] The myUrl is a needed parameter\");if(!t)throw new Error(\"[SimpleChatManager.constructor] The MiniBus is a needed parameter\");if(!r)throw new Error(\"[SimpleChatManager.constructor] The configuration is a needed parameter\");var i=this;n||(n=o.createSyncher(e,t,r)),i._runtimeURL=r.runtimeURL;var a=o.divideURL(i._runtimeURL).domain,s=o.createIdentityManager(e,r.runtimeURL,t);i._objectDescURL=\"hyperty-catalogue://catalogue.\"+a+\"/.well-known/dataschema/Communication\",i._reportersControllers={},i._observersControllers={},i._myUrl=e,i._bus=t,i._syncher=n,i._domain=a,i.identityManager=s,i.currentIdentity,i.communicationObject=d.communicationObject,i.communicationChildren=d.communicationChildren}return(0,l.default)(SimpleSimpleChatManager,[{key:\"processNotification\",value:function(e){var t=this;if(\"create\"===e.type&&t._onInvitation&&t._onInvitation(e),\"delete\"===e.type){e.ack(200),t._observersControllers[e.url].closeEvent=e,delete t._observersControllers[e.url],t._observersControllers.closeEvent=e,t.communicationObject=d.communicationObject;for(var r in this._reportersControllers)this._reportersControllers[r].close(e);for(var n in this._observersControllers)this._observersControllers[n].close(e)}}},{key:\"myIdentity\",value:function(e){var t=this;return new a.default(function(r,n){if(e)return r(e);t._myUrl.includes(\"hyperty://\")?t.identityManager.discoverUserRegistered().then(function(e){t.currentIdentity=e,r(e)}).catch(function(e){n(e)}):t.identityManager.discoverIdentityPerIdP().then(function(e){t.currentIdentity=e,r(e)}).catch(function(e){n(e)})})}},{key:\"create\",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,i=n._syncher;return new a.default(function(a,s){n.communicationObject=d.communicationObject,n.communicationObject.cseq=1,n.communicationObject.startingTime=(new Date).toJSON(),n.communicationObject.status=d.CommunicationStatus.OPEN;var u=void 0;n.myIdentity().then(function(a){u=a;var s=new y.UserInfo(n._myUrl,n._domain,a);n.communicationObject.participants[a.guid]=s;var c=!r.mutual||r.mutual,l=(0,o.default)({resources:[\"chat\"],mutual:c},r);return delete l.name,n.offline&&(l.offline=n.offline),n.backup&&(l.backup=n.backup),i.create(n._objectDescURL,t,n.communicationObject,!0,!1,e,{},l)}).then(function(e){var t=new p.default(i,n._domain,u,n);t.dataObjectReporter=e,n._reportersControllers[e.url]=t,a(t)}).catch(function(e){s(e)})}).catch(function(e){return reject(e)})}},{key:\"onInvitation\",value:function(e){this._onInvitation=e}},{key:\"join\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments[2],n=this;return new a.default(function(o,i){var a=n._syncher,s=void 0;n.myIdentity(r).then(function(r){s=r;var o={schema:n._objectDescURL,resource:e,store:!0,p2p:!1,mutual:t,domain_subscription:!0,identity:r};return n.offline&&(o.offline=n.offline),a.subscribe(o)}).then(function(e){var t=new p.default(a,n._domain,s,n);o(t),t.dataObjectObserver=e,n._observersControllers[e.url]=t}).catch(function(e){i(e)})})}},{key:\"offline\",set:function(e){this._offline=e},get:function(){return!!this._offline&&this._offline}},{key:\"backup\",set:function(e){this._backup=e},get:function(){return!!this._backup&&this._backup}}]),SimpleSimpleChatManager}();t.default=v,e.exports=t.default}])});","/*!\n * URI.js - Mutating URLs\n * IPv6 Support\n *\n * Version: 1.19.1\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.IPv6 = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  /*\n  var _in = \"fe80:0000:0000:0000:0204:61ff:fe9d:f156\";\n  var _out = IPv6.best(_in);\n  var _expected = \"fe80::204:61ff:fe9d:f156\";\n\n  console.log(_in, _out, _expected, _out === _expected);\n  */\n\n  // save current IPv6 variable, if any\n  var _IPv6 = root && root.IPv6;\n\n  function bestPresentation(address) {\n    // based on:\n    // Javascript to test an IPv6 address for proper format, and to\n    // present the \"best text representation\" according to IETF Draft RFC at\n    // http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04\n    // 8 Feb 2010 Rich Brown, Dartware, LLC\n    // Please feel free to use this code as long as you provide a link to\n    // http://www.intermapper.com\n    // http://intermapper.com/support/tools/IPV6-Validator.aspx\n    // http://download.dartware.com/thirdparty/ipv6validator.js\n\n    var _address = address.toLowerCase();\n    var segments = _address.split(':');\n    var length = segments.length;\n    var total = 8;\n\n    // trim colons (:: or ::a:b:c… or …a:b:c::)\n    if (segments[0] === '' && segments[1] === '' && segments[2] === '') {\n      // must have been ::\n      // remove first two items\n      segments.shift();\n      segments.shift();\n    } else if (segments[0] === '' && segments[1] === '') {\n      // must have been ::xxxx\n      // remove the first item\n      segments.shift();\n    } else if (segments[length - 1] === '' && segments[length - 2] === '') {\n      // must have been xxxx::\n      segments.pop();\n    }\n\n    length = segments.length;\n\n    // adjust total segments for IPv4 trailer\n    if (segments[length - 1].indexOf('.') !== -1) {\n      // found a \".\" which means IPv4\n      total = 7;\n    }\n\n    // fill empty segments them with \"0000\"\n    var pos;\n    for (pos = 0; pos < length; pos++) {\n      if (segments[pos] === '') {\n        break;\n      }\n    }\n\n    if (pos < total) {\n      segments.splice(pos, 1, '0000');\n      while (segments.length < total) {\n        segments.splice(pos, 0, '0000');\n      }\n    }\n\n    // strip leading zeros\n    var _segments;\n    for (var i = 0; i < total; i++) {\n      _segments = segments[i].split('');\n      for (var j = 0; j < 3 ; j++) {\n        if (_segments[0] === '0' && _segments.length > 1) {\n          _segments.splice(0,1);\n        } else {\n          break;\n        }\n      }\n\n      segments[i] = _segments.join('');\n    }\n\n    // find longest sequence of zeroes and coalesce them into one segment\n    var best = -1;\n    var _best = 0;\n    var _current = 0;\n    var current = -1;\n    var inzeroes = false;\n    // i; already declared\n\n    for (i = 0; i < total; i++) {\n      if (inzeroes) {\n        if (segments[i] === '0') {\n          _current += 1;\n        } else {\n          inzeroes = false;\n          if (_current > _best) {\n            best = current;\n            _best = _current;\n          }\n        }\n      } else {\n        if (segments[i] === '0') {\n          inzeroes = true;\n          current = i;\n          _current = 1;\n        }\n      }\n    }\n\n    if (_current > _best) {\n      best = current;\n      _best = _current;\n    }\n\n    if (_best > 1) {\n      segments.splice(best, _best, '');\n    }\n\n    length = segments.length;\n\n    // assemble remaining segments\n    var result = '';\n    if (segments[0] === '')  {\n      result = ':';\n    }\n\n    for (i = 0; i < length; i++) {\n      result += segments[i];\n      if (i === length - 1) {\n        break;\n      }\n\n      result += ':';\n    }\n\n    if (segments[length - 1] === '') {\n      result += ':';\n    }\n\n    return result;\n  }\n\n  function noConflict() {\n    /*jshint validthis: true */\n    if (root.IPv6 === this) {\n      root.IPv6 = _IPv6;\n    }\n\n    return this;\n  }\n\n  return {\n    best: bestPresentation,\n    noConflict: noConflict\n  };\n}));\n","/*!\n * URI.js - Mutating URLs\n * Second Level Domain (SLD) Support\n *\n * Version: 1.19.1\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else {\n    // Browser globals (root is window)\n    root.SecondLevelDomains = factory(root);\n  }\n}(this, function (root) {\n  'use strict';\n\n  // save current SecondLevelDomains variable, if any\n  var _SecondLevelDomains = root && root.SecondLevelDomains;\n\n  var SLD = {\n    // list of known Second Level Domains\n    // converted list of SLDs from https://github.com/gavingmiller/second-level-domains\n    // ----\n    // publicsuffix.org is more current and actually used by a couple of browsers internally.\n    // downside is it also contains domains like \"dyndns.org\" - which is fine for the security\n    // issues browser have to deal with (SOP for cookies, etc) - but is way overboard for URI.js\n    // ----\n    list: {\n      'ac':' com gov mil net org ',\n      'ae':' ac co gov mil name net org pro sch ',\n      'af':' com edu gov net org ',\n      'al':' com edu gov mil net org ',\n      'ao':' co ed gv it og pb ',\n      'ar':' com edu gob gov int mil net org tur ',\n      'at':' ac co gv or ',\n      'au':' asn com csiro edu gov id net org ',\n      'ba':' co com edu gov mil net org rs unbi unmo unsa untz unze ',\n      'bb':' biz co com edu gov info net org store tv ',\n      'bh':' biz cc com edu gov info net org ',\n      'bn':' com edu gov net org ',\n      'bo':' com edu gob gov int mil net org tv ',\n      'br':' adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ',\n      'bs':' com edu gov net org ',\n      'bz':' du et om ov rg ',\n      'ca':' ab bc mb nb nf nl ns nt nu on pe qc sk yk ',\n      'ck':' biz co edu gen gov info net org ',\n      'cn':' ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ',\n      'co':' com edu gov mil net nom org ',\n      'cr':' ac c co ed fi go or sa ',\n      'cy':' ac biz com ekloges gov ltd name net org parliament press pro tm ',\n      'do':' art com edu gob gov mil net org sld web ',\n      'dz':' art asso com edu gov net org pol ',\n      'ec':' com edu fin gov info med mil net org pro ',\n      'eg':' com edu eun gov mil name net org sci ',\n      'er':' com edu gov ind mil net org rochest w ',\n      'es':' com edu gob nom org ',\n      'et':' biz com edu gov info name net org ',\n      'fj':' ac biz com info mil name net org pro ',\n      'fk':' ac co gov net nom org ',\n      'fr':' asso com f gouv nom prd presse tm ',\n      'gg':' co net org ',\n      'gh':' com edu gov mil org ',\n      'gn':' ac com gov net org ',\n      'gr':' com edu gov mil net org ',\n      'gt':' com edu gob ind mil net org ',\n      'gu':' com edu gov net org ',\n      'hk':' com edu gov idv net org ',\n      'hu':' 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ',\n      'id':' ac co go mil net or sch web ',\n      'il':' ac co gov idf k12 muni net org ',\n      'in':' ac co edu ernet firm gen gov i ind mil net nic org res ',\n      'iq':' com edu gov i mil net org ',\n      'ir':' ac co dnssec gov i id net org sch ',\n      'it':' edu gov ',\n      'je':' co net org ',\n      'jo':' com edu gov mil name net org sch ',\n      'jp':' ac ad co ed go gr lg ne or ',\n      'ke':' ac co go info me mobi ne or sc ',\n      'kh':' com edu gov mil net org per ',\n      'ki':' biz com de edu gov info mob net org tel ',\n      'km':' asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ',\n      'kn':' edu gov net org ',\n      'kr':' ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ',\n      'kw':' com edu gov net org ',\n      'ky':' com edu gov net org ',\n      'kz':' com edu gov mil net org ',\n      'lb':' com edu gov net org ',\n      'lk':' assn com edu gov grp hotel int ltd net ngo org sch soc web ',\n      'lr':' com edu gov net org ',\n      'lv':' asn com conf edu gov id mil net org ',\n      'ly':' com edu gov id med net org plc sch ',\n      'ma':' ac co gov m net org press ',\n      'mc':' asso tm ',\n      'me':' ac co edu gov its net org priv ',\n      'mg':' com edu gov mil nom org prd tm ',\n      'mk':' com edu gov inf name net org pro ',\n      'ml':' com edu gov net org presse ',\n      'mn':' edu gov org ',\n      'mo':' com edu gov net org ',\n      'mt':' com edu gov net org ',\n      'mv':' aero biz com coop edu gov info int mil museum name net org pro ',\n      'mw':' ac co com coop edu gov int museum net org ',\n      'mx':' com edu gob net org ',\n      'my':' com edu gov mil name net org sch ',\n      'nf':' arts com firm info net other per rec store web ',\n      'ng':' biz com edu gov mil mobi name net org sch ',\n      'ni':' ac co com edu gob mil net nom org ',\n      'np':' com edu gov mil net org ',\n      'nr':' biz com edu gov info net org ',\n      'om':' ac biz co com edu gov med mil museum net org pro sch ',\n      'pe':' com edu gob mil net nom org sld ',\n      'ph':' com edu gov i mil net ngo org ',\n      'pk':' biz com edu fam gob gok gon gop gos gov net org web ',\n      'pl':' art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ',\n      'pr':' ac biz com edu est gov info isla name net org pro prof ',\n      'ps':' com edu gov net org plo sec ',\n      'pw':' belau co ed go ne or ',\n      'ro':' arts com firm info nom nt org rec store tm www ',\n      'rs':' ac co edu gov in org ',\n      'sb':' com edu gov net org ',\n      'sc':' com edu gov net org ',\n      'sh':' co com edu gov net nom org ',\n      'sl':' com edu gov net org ',\n      'st':' co com consulado edu embaixada gov mil net org principe saotome store ',\n      'sv':' com edu gob org red ',\n      'sz':' ac co org ',\n      'tr':' av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ',\n      'tt':' aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ',\n      'tw':' club com ebiz edu game gov idv mil net org ',\n      'mu':' ac co com gov net or org ',\n      'mz':' ac co edu gov org ',\n      'na':' co com ',\n      'nz':' ac co cri geek gen govt health iwi maori mil net org parliament school ',\n      'pa':' abo ac com edu gob ing med net nom org sld ',\n      'pt':' com edu gov int net nome org publ ',\n      'py':' com edu gov mil net org ',\n      'qa':' com edu gov mil net org ',\n      're':' asso com nom ',\n      'ru':' ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ',\n      'rw':' ac co com edu gouv gov int mil net ',\n      'sa':' com edu gov med net org pub sch ',\n      'sd':' com edu gov info med net org tv ',\n      'se':' a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ',\n      'sg':' com edu gov idn net org per ',\n      'sn':' art com edu gouv org perso univ ',\n      'sy':' com edu gov mil net news org ',\n      'th':' ac co go in mi net or ',\n      'tj':' ac biz co com edu go gov info int mil name net nic org test web ',\n      'tn':' agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ',\n      'tz':' ac co go ne or ',\n      'ua':' biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ',\n      'ug':' ac co go ne or org sc ',\n      'uk':' ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ',\n      'us':' dni fed isa kids nsn ',\n      'uy':' com edu gub mil net org ',\n      've':' co com edu gob info mil net org web ',\n      'vi':' co com k12 net org ',\n      'vn':' ac biz com edu gov health info int name net org pro ',\n      'ye':' co com gov ltd me net org plc ',\n      'yu':' ac co edu gov org ',\n      'za':' ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ',\n      'zm':' ac co com edu gov net org sch ',\n      // https://en.wikipedia.org/wiki/CentralNic#Second-level_domains\n      'com': 'ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ',\n      'net': 'gb jp se uk ',\n      'org': 'ae',\n      'de': 'com '\n    },\n    // gorhill 2013-10-25: Using indexOf() instead Regexp(). Significant boost\n    // in both performance and memory footprint. No initialization required.\n    // http://jsperf.com/uri-js-sld-regex-vs-binary-search/4\n    // Following methods use lastIndexOf() rather than array.split() in order\n    // to avoid any memory allocations.\n    has: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') >= 0;\n    },\n    is: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return false;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset >= 0) {\n        return false;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return false;\n      }\n      return sldList.indexOf(' ' + domain.slice(0, tldOffset) + ' ') >= 0;\n    },\n    get: function(domain) {\n      var tldOffset = domain.lastIndexOf('.');\n      if (tldOffset <= 0 || tldOffset >= (domain.length-1)) {\n        return null;\n      }\n      var sldOffset = domain.lastIndexOf('.', tldOffset-1);\n      if (sldOffset <= 0 || sldOffset >= (tldOffset-1)) {\n        return null;\n      }\n      var sldList = SLD.list[domain.slice(tldOffset+1)];\n      if (!sldList) {\n        return null;\n      }\n      if (sldList.indexOf(' ' + domain.slice(sldOffset+1, tldOffset) + ' ') < 0) {\n        return null;\n      }\n      return domain.slice(sldOffset+1);\n    },\n    noConflict: function(){\n      if (root.SecondLevelDomains === this) {\n        root.SecondLevelDomains = _SecondLevelDomains;\n      }\n      return this;\n    }\n  };\n\n  return SLD;\n}));\n","/*!\n * URI.js - Mutating URLs\n *\n * Version: 1.19.1\n *\n * Author: Rodney Rehm\n * Web: http://medialize.github.io/URI.js/\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n *\n */\n(function (root, factory) {\n  'use strict';\n  // https://github.com/umdjs/umd/blob/master/returnExports.js\n  if (typeof module === 'object' && module.exports) {\n    // Node\n    module.exports = factory(require('./punycode'), require('./IPv6'), require('./SecondLevelDomains'));\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['./punycode', './IPv6', './SecondLevelDomains'], factory);\n  } else {\n    // Browser globals (root is window)\n    root.URI = factory(root.punycode, root.IPv6, root.SecondLevelDomains, root);\n  }\n}(this, function (punycode, IPv6, SLD, root) {\n  'use strict';\n  /*global location, escape, unescape */\n  // FIXME: v2.0.0 renamce non-camelCase properties to uppercase\n  /*jshint camelcase: false */\n\n  // save current URI variable, if any\n  var _URI = root && root.URI;\n\n  function URI(url, base) {\n    var _urlSupplied = arguments.length >= 1;\n    var _baseSupplied = arguments.length >= 2;\n\n    // Allow instantiation without the 'new' keyword\n    if (!(this instanceof URI)) {\n      if (_urlSupplied) {\n        if (_baseSupplied) {\n          return new URI(url, base);\n        }\n\n        return new URI(url);\n      }\n\n      return new URI();\n    }\n\n    if (url === undefined) {\n      if (_urlSupplied) {\n        throw new TypeError('undefined is not a valid argument for URI');\n      }\n\n      if (typeof location !== 'undefined') {\n        url = location.href + '';\n      } else {\n        url = '';\n      }\n    }\n\n    if (url === null) {\n      if (_urlSupplied) {\n        throw new TypeError('null is not a valid argument for URI');\n      }\n    }\n\n    this.href(url);\n\n    // resolve to base according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#constructor\n    if (base !== undefined) {\n      return this.absoluteTo(base);\n    }\n\n    return this;\n  }\n\n  function isInteger(value) {\n    return /^[0-9]+$/.test(value);\n  }\n\n  URI.version = '1.19.1';\n\n  var p = URI.prototype;\n  var hasOwn = Object.prototype.hasOwnProperty;\n\n  function escapeRegEx(string) {\n    // https://github.com/medialize/URI.js/commit/85ac21783c11f8ccab06106dba9735a31a86924d#commitcomment-821963\n    return string.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, '\\\\$1');\n  }\n\n  function getType(value) {\n    // IE8 doesn't return [Object Undefined] but [Object Object] for undefined value\n    if (value === undefined) {\n      return 'Undefined';\n    }\n\n    return String(Object.prototype.toString.call(value)).slice(8, -1);\n  }\n\n  function isArray(obj) {\n    return getType(obj) === 'Array';\n  }\n\n  function filterArrayValues(data, value) {\n    var lookup = {};\n    var i, length;\n\n    if (getType(value) === 'RegExp') {\n      lookup = null;\n    } else if (isArray(value)) {\n      for (i = 0, length = value.length; i < length; i++) {\n        lookup[value[i]] = true;\n      }\n    } else {\n      lookup[value] = true;\n    }\n\n    for (i = 0, length = data.length; i < length; i++) {\n      /*jshint laxbreak: true */\n      var _match = lookup && lookup[data[i]] !== undefined\n        || !lookup && value.test(data[i]);\n      /*jshint laxbreak: false */\n      if (_match) {\n        data.splice(i, 1);\n        length--;\n        i--;\n      }\n    }\n\n    return data;\n  }\n\n  function arrayContains(list, value) {\n    var i, length;\n\n    // value may be string, number, array, regexp\n    if (isArray(value)) {\n      // Note: this can be optimized to O(n) (instead of current O(m * n))\n      for (i = 0, length = value.length; i < length; i++) {\n        if (!arrayContains(list, value[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    var _type = getType(value);\n    for (i = 0, length = list.length; i < length; i++) {\n      if (_type === 'RegExp') {\n        if (typeof list[i] === 'string' && list[i].match(value)) {\n          return true;\n        }\n      } else if (list[i] === value) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function arraysEqual(one, two) {\n    if (!isArray(one) || !isArray(two)) {\n      return false;\n    }\n\n    // arrays can't be equal if they have different amount of content\n    if (one.length !== two.length) {\n      return false;\n    }\n\n    one.sort();\n    two.sort();\n\n    for (var i = 0, l = one.length; i < l; i++) {\n      if (one[i] !== two[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function trimSlashes(text) {\n    var trim_expression = /^\\/+|\\/+$/g;\n    return text.replace(trim_expression, '');\n  }\n\n  URI._parts = function() {\n    return {\n      protocol: null,\n      username: null,\n      password: null,\n      hostname: null,\n      urn: null,\n      port: null,\n      path: null,\n      query: null,\n      fragment: null,\n      // state\n      preventInvalidHostname: URI.preventInvalidHostname,\n      duplicateQueryParameters: URI.duplicateQueryParameters,\n      escapeQuerySpace: URI.escapeQuerySpace\n    };\n  };\n  // state: throw on invalid hostname\n  // see https://github.com/medialize/URI.js/pull/345\n  // and https://github.com/medialize/URI.js/issues/354\n  URI.preventInvalidHostname = false;\n  // state: allow duplicate query parameters (a=1&a=1)\n  URI.duplicateQueryParameters = false;\n  // state: replaces + with %20 (space in query strings)\n  URI.escapeQuerySpace = true;\n  // static properties\n  URI.protocol_expression = /^[a-z][a-z0-9.+-]*$/i;\n  URI.idn_expression = /[^a-z0-9\\._-]/i;\n  URI.punycode_expression = /(xn--)/i;\n  // well, 333.444.555.666 matches, but it sure ain't no IPv4 - do we care?\n  URI.ip4_expression = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\n  // credits to Rich Brown\n  // source: http://forums.intermapper.com/viewtopic.php?p=1096#1096\n  // specification: http://www.ietf.org/rfc/rfc4291.txt\n  URI.ip6_expression = /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n  // expression used is \"gruber revised\" (@gruber v2) determined to be the\n  // best solution in a regex-golf we did a couple of ages ago at\n  // * http://mathiasbynens.be/demo/url-regex\n  // * http://rodneyrehm.de/t/url-regex.html\n  URI.find_uri_expression = /\\b((?:[a-z][\\w-]+:(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))/ig;\n  URI.findUri = {\n    // valid \"scheme://\" or \"www.\"\n    start: /\\b(?:([a-z][a-z0-9.+-]*:\\/\\/)|www\\.)/gi,\n    // everything up to the next whitespace\n    end: /[\\s\\r\\n]|$/,\n    // trim trailing punctuation captured by end RegExp\n    trim: /[`!()\\[\\]{};:'\".,<>?«»“”„‘’]+$/,\n    // balanced parens inclusion (), [], {}, <>\n    parens: /(\\([^\\)]*\\)|\\[[^\\]]*\\]|\\{[^}]*\\}|<[^>]*>)/g,\n  };\n  // http://www.iana.org/assignments/uri-schemes.html\n  // http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers#Well-known_ports\n  URI.defaultPorts = {\n    http: '80',\n    https: '443',\n    ftp: '21',\n    gopher: '70',\n    ws: '80',\n    wss: '443'\n  };\n  // list of protocols which always require a hostname\n  URI.hostProtocols = [\n    'http',\n    'https'\n  ];\n\n  // allowed hostname characters according to RFC 3986\n  // ALPHA DIGIT \"-\" \".\" \"_\" \"~\" \"!\" \"$\" \"&\" \"'\" \"(\" \")\" \"*\" \"+\" \",\" \";\" \"=\" %encoded\n  // I've never seen a (non-IDN) hostname other than: ALPHA DIGIT . - _\n  URI.invalid_hostname_characters = /[^a-zA-Z0-9\\.\\-:_]/;\n  // map DOM Elements to their URI attribute\n  URI.domAttributes = {\n    'a': 'href',\n    'blockquote': 'cite',\n    'link': 'href',\n    'base': 'href',\n    'script': 'src',\n    'form': 'action',\n    'img': 'src',\n    'area': 'href',\n    'iframe': 'src',\n    'embed': 'src',\n    'source': 'src',\n    'track': 'src',\n    'input': 'src', // but only if type=\"image\"\n    'audio': 'src',\n    'video': 'src'\n  };\n  URI.getDomAttribute = function(node) {\n    if (!node || !node.nodeName) {\n      return undefined;\n    }\n\n    var nodeName = node.nodeName.toLowerCase();\n    // <input> should only expose src for type=\"image\"\n    if (nodeName === 'input' && node.type !== 'image') {\n      return undefined;\n    }\n\n    return URI.domAttributes[nodeName];\n  };\n\n  function escapeForDumbFirefox36(value) {\n    // https://github.com/medialize/URI.js/issues/91\n    return escape(value);\n  }\n\n  // encoding / decoding according to RFC3986\n  function strictEncodeURIComponent(string) {\n    // see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent\n    return encodeURIComponent(string)\n      .replace(/[!'()*]/g, escapeForDumbFirefox36)\n      .replace(/\\*/g, '%2A');\n  }\n  URI.encode = strictEncodeURIComponent;\n  URI.decode = decodeURIComponent;\n  URI.iso8859 = function() {\n    URI.encode = escape;\n    URI.decode = unescape;\n  };\n  URI.unicode = function() {\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = decodeURIComponent;\n  };\n  URI.characters = {\n    pathname: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,\n        map: {\n          // -._~!'()*\n          '%24': '$',\n          '%26': '&',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%3A': ':',\n          '%40': '@'\n        }\n      },\n      decode: {\n        expression: /[\\/\\?#]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23'\n        }\n      }\n    },\n    reserved: {\n      encode: {\n        // RFC3986 2.1: For consistency, URI producers and normalizers should\n        // use uppercase hexadecimal digits for all percent-encodings.\n        expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,\n        map: {\n          // gen-delims\n          '%3A': ':',\n          '%2F': '/',\n          '%3F': '?',\n          '%23': '#',\n          '%5B': '[',\n          '%5D': ']',\n          '%40': '@',\n          // sub-delims\n          '%21': '!',\n          '%24': '$',\n          '%26': '&',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '='\n        }\n      }\n    },\n    urnpath: {\n      // The characters under `encode` are the characters called out by RFC 2141 as being acceptable\n      // for usage in a URN. RFC2141 also calls out \"-\", \".\", and \"_\" as acceptable characters, but\n      // these aren't encoded by encodeURIComponent, so we don't have to call them out here. Also\n      // note that the colon character is not featured in the encoding map; this is because URI.js\n      // gives the colons in URNs semantic meaning as the delimiters of path segements, and so it\n      // should not appear unencoded in a segment itself.\n      // See also the note above about RFC3986 and capitalalized hex digits.\n      encode: {\n        expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,\n        map: {\n          '%21': '!',\n          '%24': '$',\n          '%27': '\\'',\n          '%28': '(',\n          '%29': ')',\n          '%2A': '*',\n          '%2B': '+',\n          '%2C': ',',\n          '%3B': ';',\n          '%3D': '=',\n          '%40': '@'\n        }\n      },\n      // These characters are the characters called out by RFC2141 as \"reserved\" characters that\n      // should never appear in a URN, plus the colon character (see note above).\n      decode: {\n        expression: /[\\/\\?#:]/g,\n        map: {\n          '/': '%2F',\n          '?': '%3F',\n          '#': '%23',\n          ':': '%3A'\n        }\n      }\n    }\n  };\n  URI.encodeQuery = function(string, escapeQuerySpace) {\n    var escaped = URI.encode(string + '');\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    return escapeQuerySpace ? escaped.replace(/%20/g, '+') : escaped;\n  };\n  URI.decodeQuery = function(string, escapeQuerySpace) {\n    string += '';\n    if (escapeQuerySpace === undefined) {\n      escapeQuerySpace = URI.escapeQuerySpace;\n    }\n\n    try {\n      return URI.decode(escapeQuerySpace ? string.replace(/\\+/g, '%20') : string);\n    } catch(e) {\n      // we're not going to mess with weird encodings,\n      // give up and return the undecoded original string\n      // see https://github.com/medialize/URI.js/issues/87\n      // see https://github.com/medialize/URI.js/issues/92\n      return string;\n    }\n  };\n  // generate encode/decode path functions\n  var _parts = {'encode':'encode', 'decode':'decode'};\n  var _part;\n  var generateAccessor = function(_group, _part) {\n    return function(string) {\n      try {\n        return URI[_part](string + '').replace(URI.characters[_group][_part].expression, function(c) {\n          return URI.characters[_group][_part].map[c];\n        });\n      } catch (e) {\n        // we're not going to mess with weird encodings,\n        // give up and return the undecoded original string\n        // see https://github.com/medialize/URI.js/issues/87\n        // see https://github.com/medialize/URI.js/issues/92\n        return string;\n      }\n    };\n  };\n\n  for (_part in _parts) {\n    URI[_part + 'PathSegment'] = generateAccessor('pathname', _parts[_part]);\n    URI[_part + 'UrnPathSegment'] = generateAccessor('urnpath', _parts[_part]);\n  }\n\n  var generateSegmentedPathFunction = function(_sep, _codingFuncName, _innerCodingFuncName) {\n    return function(string) {\n      // Why pass in names of functions, rather than the function objects themselves? The\n      // definitions of some functions (but in particular, URI.decode) will occasionally change due\n      // to URI.js having ISO8859 and Unicode modes. Passing in the name and getting it will ensure\n      // that the functions we use here are \"fresh\".\n      var actualCodingFunc;\n      if (!_innerCodingFuncName) {\n        actualCodingFunc = URI[_codingFuncName];\n      } else {\n        actualCodingFunc = function(string) {\n          return URI[_codingFuncName](URI[_innerCodingFuncName](string));\n        };\n      }\n\n      var segments = (string + '').split(_sep);\n\n      for (var i = 0, length = segments.length; i < length; i++) {\n        segments[i] = actualCodingFunc(segments[i]);\n      }\n\n      return segments.join(_sep);\n    };\n  };\n\n  // This takes place outside the above loop because we don't want, e.g., encodeUrnPath functions.\n  URI.decodePath = generateSegmentedPathFunction('/', 'decodePathSegment');\n  URI.decodeUrnPath = generateSegmentedPathFunction(':', 'decodeUrnPathSegment');\n  URI.recodePath = generateSegmentedPathFunction('/', 'encodePathSegment', 'decode');\n  URI.recodeUrnPath = generateSegmentedPathFunction(':', 'encodeUrnPathSegment', 'decode');\n\n  URI.encodeReserved = generateAccessor('reserved', 'encode');\n\n  URI.parse = function(string, parts) {\n    var pos;\n    if (!parts) {\n      parts = {\n        preventInvalidHostname: URI.preventInvalidHostname\n      };\n    }\n    // [protocol\"://\"[username[\":\"password]\"@\"]hostname[\":\"port]\"/\"?][path][\"?\"querystring][\"#\"fragment]\n\n    // extract fragment\n    pos = string.indexOf('#');\n    if (pos > -1) {\n      // escaping?\n      parts.fragment = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract query\n    pos = string.indexOf('?');\n    if (pos > -1) {\n      // escaping?\n      parts.query = string.substring(pos + 1) || null;\n      string = string.substring(0, pos);\n    }\n\n    // extract protocol\n    if (string.substring(0, 2) === '//') {\n      // relative-scheme\n      parts.protocol = null;\n      string = string.substring(2);\n      // extract \"user:pass@host:port\"\n      string = URI.parseAuthority(string, parts);\n    } else {\n      pos = string.indexOf(':');\n      if (pos > -1) {\n        parts.protocol = string.substring(0, pos) || null;\n        if (parts.protocol && !parts.protocol.match(URI.protocol_expression)) {\n          // : may be within the path\n          parts.protocol = undefined;\n        } else if (string.substring(pos + 1, pos + 3) === '//') {\n          string = string.substring(pos + 3);\n\n          // extract \"user:pass@host:port\"\n          string = URI.parseAuthority(string, parts);\n        } else {\n          string = string.substring(pos + 1);\n          parts.urn = true;\n        }\n      }\n    }\n\n    // what's left must be the path\n    parts.path = string;\n\n    // and we're done\n    return parts;\n  };\n  URI.parseHost = function(string, parts) {\n    if (!string) {\n      string = '';\n    }\n\n    // Copy chrome, IE, opera backslash-handling behavior.\n    // Back slashes before the query string get converted to forward slashes\n    // See: https://github.com/joyent/node/blob/386fd24f49b0e9d1a8a076592a404168faeecc34/lib/url.js#L115-L124\n    // See: https://code.google.com/p/chromium/issues/detail?id=25916\n    // https://github.com/medialize/URI.js/pull/233\n    string = string.replace(/\\\\/g, '/');\n\n    // extract host:port\n    var pos = string.indexOf('/');\n    var bracketPos;\n    var t;\n\n    if (pos === -1) {\n      pos = string.length;\n    }\n\n    if (string.charAt(0) === '[') {\n      // IPv6 host - http://tools.ietf.org/html/draft-ietf-6man-text-addr-representation-04#section-6\n      // I claim most client software breaks on IPv6 anyways. To simplify things, URI only accepts\n      // IPv6+port in the format [2001:db8::1]:80 (for the time being)\n      bracketPos = string.indexOf(']');\n      parts.hostname = string.substring(1, bracketPos) || null;\n      parts.port = string.substring(bracketPos + 2, pos) || null;\n      if (parts.port === '/') {\n        parts.port = null;\n      }\n    } else {\n      var firstColon = string.indexOf(':');\n      var firstSlash = string.indexOf('/');\n      var nextColon = string.indexOf(':', firstColon + 1);\n      if (nextColon !== -1 && (firstSlash === -1 || nextColon < firstSlash)) {\n        // IPv6 host contains multiple colons - but no port\n        // this notation is actually not allowed by RFC 3986, but we're a liberal parser\n        parts.hostname = string.substring(0, pos) || null;\n        parts.port = null;\n      } else {\n        t = string.substring(0, pos).split(':');\n        parts.hostname = t[0] || null;\n        parts.port = t[1] || null;\n      }\n    }\n\n    if (parts.hostname && string.substring(pos).charAt(0) !== '/') {\n      pos++;\n      string = '/' + string;\n    }\n\n    if (parts.preventInvalidHostname) {\n      URI.ensureValidHostname(parts.hostname, parts.protocol);\n    }\n\n    if (parts.port) {\n      URI.ensureValidPort(parts.port);\n    }\n\n    return string.substring(pos) || '/';\n  };\n  URI.parseAuthority = function(string, parts) {\n    string = URI.parseUserinfo(string, parts);\n    return URI.parseHost(string, parts);\n  };\n  URI.parseUserinfo = function(string, parts) {\n    // extract username:password\n    var firstSlash = string.indexOf('/');\n    var pos = string.lastIndexOf('@', firstSlash > -1 ? firstSlash : string.length - 1);\n    var t;\n\n    // authority@ must come before /path\n    if (pos > -1 && (firstSlash === -1 || pos < firstSlash)) {\n      t = string.substring(0, pos).split(':');\n      parts.username = t[0] ? URI.decode(t[0]) : null;\n      t.shift();\n      parts.password = t[0] ? URI.decode(t.join(':')) : null;\n      string = string.substring(pos + 1);\n    } else {\n      parts.username = null;\n      parts.password = null;\n    }\n\n    return string;\n  };\n  URI.parseQuery = function(string, escapeQuerySpace) {\n    if (!string) {\n      return {};\n    }\n\n    // throw out the funky business - \"?\"[name\"=\"value\"&\"]+\n    string = string.replace(/&+/g, '&').replace(/^\\?*&*|&+$/g, '');\n\n    if (!string) {\n      return {};\n    }\n\n    var items = {};\n    var splits = string.split('&');\n    var length = splits.length;\n    var v, name, value;\n\n    for (var i = 0; i < length; i++) {\n      v = splits[i].split('=');\n      name = URI.decodeQuery(v.shift(), escapeQuerySpace);\n      // no \"=\" is null according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#collect-url-parameters\n      value = v.length ? URI.decodeQuery(v.join('='), escapeQuerySpace) : null;\n\n      if (hasOwn.call(items, name)) {\n        if (typeof items[name] === 'string' || items[name] === null) {\n          items[name] = [items[name]];\n        }\n\n        items[name].push(value);\n      } else {\n        items[name] = value;\n      }\n    }\n\n    return items;\n  };\n\n  URI.build = function(parts) {\n    var t = '';\n\n    if (parts.protocol) {\n      t += parts.protocol + ':';\n    }\n\n    if (!parts.urn && (t || parts.hostname)) {\n      t += '//';\n    }\n\n    t += (URI.buildAuthority(parts) || '');\n\n    if (typeof parts.path === 'string') {\n      if (parts.path.charAt(0) !== '/' && typeof parts.hostname === 'string') {\n        t += '/';\n      }\n\n      t += parts.path;\n    }\n\n    if (typeof parts.query === 'string' && parts.query) {\n      t += '?' + parts.query;\n    }\n\n    if (typeof parts.fragment === 'string' && parts.fragment) {\n      t += '#' + parts.fragment;\n    }\n    return t;\n  };\n  URI.buildHost = function(parts) {\n    var t = '';\n\n    if (!parts.hostname) {\n      return '';\n    } else if (URI.ip6_expression.test(parts.hostname)) {\n      t += '[' + parts.hostname + ']';\n    } else {\n      t += parts.hostname;\n    }\n\n    if (parts.port) {\n      t += ':' + parts.port;\n    }\n\n    return t;\n  };\n  URI.buildAuthority = function(parts) {\n    return URI.buildUserinfo(parts) + URI.buildHost(parts);\n  };\n  URI.buildUserinfo = function(parts) {\n    var t = '';\n\n    if (parts.username) {\n      t += URI.encode(parts.username);\n    }\n\n    if (parts.password) {\n      t += ':' + URI.encode(parts.password);\n    }\n\n    if (t) {\n      t += '@';\n    }\n\n    return t;\n  };\n  URI.buildQuery = function(data, duplicateQueryParameters, escapeQuerySpace) {\n    // according to http://tools.ietf.org/html/rfc3986 or http://labs.apache.org/webarch/uri/rfc/rfc3986.html\n    // being »-._~!$&'()*+,;=:@/?« %HEX and alnum are allowed\n    // the RFC explicitly states ?/foo being a valid use case, no mention of parameter syntax!\n    // URI.js treats the query string as being application/x-www-form-urlencoded\n    // see http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type\n\n    var t = '';\n    var unique, key, i, length;\n    for (key in data) {\n      if (hasOwn.call(data, key) && key) {\n        if (isArray(data[key])) {\n          unique = {};\n          for (i = 0, length = data[key].length; i < length; i++) {\n            if (data[key][i] !== undefined && unique[data[key][i] + ''] === undefined) {\n              t += '&' + URI.buildQueryParameter(key, data[key][i], escapeQuerySpace);\n              if (duplicateQueryParameters !== true) {\n                unique[data[key][i] + ''] = true;\n              }\n            }\n          }\n        } else if (data[key] !== undefined) {\n          t += '&' + URI.buildQueryParameter(key, data[key], escapeQuerySpace);\n        }\n      }\n    }\n\n    return t.substring(1);\n  };\n  URI.buildQueryParameter = function(name, value, escapeQuerySpace) {\n    // http://www.w3.org/TR/REC-html40/interact/forms.html#form-content-type -- application/x-www-form-urlencoded\n    // don't append \"=\" for null values, according to http://dvcs.w3.org/hg/url/raw-file/tip/Overview.html#url-parameter-serialization\n    return URI.encodeQuery(name, escapeQuerySpace) + (value !== null ? '=' + URI.encodeQuery(value, escapeQuerySpace) : '');\n  };\n\n  URI.addQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.addQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (data[name] === undefined) {\n        data[name] = value;\n        return;\n      } else if (typeof data[name] === 'string') {\n        data[name] = [data[name]];\n      }\n\n      if (!isArray(value)) {\n        value = [value];\n      }\n\n      data[name] = (data[name] || []).concat(value);\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.setQuery = function(data, name, value) {\n    if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.setQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      data[name] = value === undefined ? null : value;\n    } else {\n      throw new TypeError('URI.setQuery() accepts an object, string as the name parameter');\n    }\n  };\n\n  URI.removeQuery = function(data, name, value) {\n    var i, length, key;\n\n    if (isArray(name)) {\n      for (i = 0, length = name.length; i < length; i++) {\n        data[name[i]] = undefined;\n      }\n    } else if (getType(name) === 'RegExp') {\n      for (key in data) {\n        if (name.test(key)) {\n          data[key] = undefined;\n        }\n      }\n    } else if (typeof name === 'object') {\n      for (key in name) {\n        if (hasOwn.call(name, key)) {\n          URI.removeQuery(data, key, name[key]);\n        }\n      }\n    } else if (typeof name === 'string') {\n      if (value !== undefined) {\n        if (getType(value) === 'RegExp') {\n          if (!isArray(data[name]) && value.test(data[name])) {\n            data[name] = undefined;\n          } else {\n            data[name] = filterArrayValues(data[name], value);\n          }\n        } else if (data[name] === String(value) && (!isArray(value) || value.length === 1)) {\n          data[name] = undefined;\n        } else if (isArray(data[name])) {\n          data[name] = filterArrayValues(data[name], value);\n        }\n      } else {\n        data[name] = undefined;\n      }\n    } else {\n      throw new TypeError('URI.removeQuery() accepts an object, string, RegExp as the first parameter');\n    }\n  };\n  URI.hasQuery = function(data, name, value, withinArray) {\n    switch (getType(name)) {\n      case 'String':\n        // Nothing to do here\n        break;\n\n      case 'RegExp':\n        for (var key in data) {\n          if (hasOwn.call(data, key)) {\n            if (name.test(key) && (value === undefined || URI.hasQuery(data, key, value))) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n\n      case 'Object':\n        for (var _key in name) {\n          if (hasOwn.call(name, _key)) {\n            if (!URI.hasQuery(data, _key, name[_key])) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts a string, regular expression or object as the name parameter');\n    }\n\n    switch (getType(value)) {\n      case 'Undefined':\n        // true if exists (but may be empty)\n        return name in data; // data[name] !== undefined;\n\n      case 'Boolean':\n        // true if exists and non-empty\n        var _booly = Boolean(isArray(data[name]) ? data[name].length : data[name]);\n        return value === _booly;\n\n      case 'Function':\n        // allow complex comparison\n        return !!value(data[name], name, data);\n\n      case 'Array':\n        if (!isArray(data[name])) {\n          return false;\n        }\n\n        var op = withinArray ? arrayContains : arraysEqual;\n        return op(data[name], value);\n\n      case 'RegExp':\n        if (!isArray(data[name])) {\n          return Boolean(data[name] && data[name].match(value));\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      case 'Number':\n        value = String(value);\n        /* falls through */\n      case 'String':\n        if (!isArray(data[name])) {\n          return data[name] === value;\n        }\n\n        if (!withinArray) {\n          return false;\n        }\n\n        return arrayContains(data[name], value);\n\n      default:\n        throw new TypeError('URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter');\n    }\n  };\n\n\n  URI.joinPaths = function() {\n    var input = [];\n    var segments = [];\n    var nonEmptySegments = 0;\n\n    for (var i = 0; i < arguments.length; i++) {\n      var url = new URI(arguments[i]);\n      input.push(url);\n      var _segments = url.segment();\n      for (var s = 0; s < _segments.length; s++) {\n        if (typeof _segments[s] === 'string') {\n          segments.push(_segments[s]);\n        }\n\n        if (_segments[s]) {\n          nonEmptySegments++;\n        }\n      }\n    }\n\n    if (!segments.length || !nonEmptySegments) {\n      return new URI('');\n    }\n\n    var uri = new URI('').segment(segments);\n\n    if (input[0].path() === '' || input[0].path().slice(0, 1) === '/') {\n      uri.path('/' + uri.path());\n    }\n\n    return uri.normalize();\n  };\n\n  URI.commonPath = function(one, two) {\n    var length = Math.min(one.length, two.length);\n    var pos;\n\n    // find first non-matching character\n    for (pos = 0; pos < length; pos++) {\n      if (one.charAt(pos) !== two.charAt(pos)) {\n        pos--;\n        break;\n      }\n    }\n\n    if (pos < 1) {\n      return one.charAt(0) === two.charAt(0) && one.charAt(0) === '/' ? '/' : '';\n    }\n\n    // revert to last /\n    if (one.charAt(pos) !== '/' || two.charAt(pos) !== '/') {\n      pos = one.substring(0, pos).lastIndexOf('/');\n    }\n\n    return one.substring(0, pos + 1);\n  };\n\n  URI.withinString = function(string, callback, options) {\n    options || (options = {});\n    var _start = options.start || URI.findUri.start;\n    var _end = options.end || URI.findUri.end;\n    var _trim = options.trim || URI.findUri.trim;\n    var _parens = options.parens || URI.findUri.parens;\n    var _attributeOpen = /[a-z0-9-]=[\"']?$/i;\n\n    _start.lastIndex = 0;\n    while (true) {\n      var match = _start.exec(string);\n      if (!match) {\n        break;\n      }\n\n      var start = match.index;\n      if (options.ignoreHtml) {\n        // attribut(e=[\"']?$)\n        var attributeOpen = string.slice(Math.max(start - 3, 0), start);\n        if (attributeOpen && _attributeOpen.test(attributeOpen)) {\n          continue;\n        }\n      }\n\n      var end = start + string.slice(start).search(_end);\n      var slice = string.slice(start, end);\n      // make sure we include well balanced parens\n      var parensEnd = -1;\n      while (true) {\n        var parensMatch = _parens.exec(slice);\n        if (!parensMatch) {\n          break;\n        }\n\n        var parensMatchEnd = parensMatch.index + parensMatch[0].length;\n        parensEnd = Math.max(parensEnd, parensMatchEnd);\n      }\n\n      if (parensEnd > -1) {\n        slice = slice.slice(0, parensEnd) + slice.slice(parensEnd).replace(_trim, '');\n      } else {\n        slice = slice.replace(_trim, '');\n      }\n\n      if (slice.length <= match[0].length) {\n        // the extract only contains the starting marker of a URI,\n        // e.g. \"www\" or \"http://\"\n        continue;\n      }\n\n      if (options.ignore && options.ignore.test(slice)) {\n        continue;\n      }\n\n      end = start + slice.length;\n      var result = callback(slice, start, end, string);\n      if (result === undefined) {\n        _start.lastIndex = end;\n        continue;\n      }\n\n      result = String(result);\n      string = string.slice(0, start) + result + string.slice(end);\n      _start.lastIndex = start + result.length;\n    }\n\n    _start.lastIndex = 0;\n    return string;\n  };\n\n  URI.ensureValidHostname = function(v, protocol) {\n    // Theoretically URIs allow percent-encoding in Hostnames (according to RFC 3986)\n    // they are not part of DNS and therefore ignored by URI.js\n\n    var hasHostname = !!v; // not null and not an empty string\n    var hasProtocol = !!protocol;\n    var rejectEmptyHostname = false;\n\n    if (hasProtocol) {\n      rejectEmptyHostname = arrayContains(URI.hostProtocols, protocol);\n    }\n\n    if (rejectEmptyHostname && !hasHostname) {\n      throw new TypeError('Hostname cannot be empty, if protocol is ' + protocol);\n    } else if (v && v.match(URI.invalid_hostname_characters)) {\n      // test punycode\n      if (!punycode) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');\n      }\n      if (punycode.toASCII(v).match(URI.invalid_hostname_characters)) {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-:_]');\n      }\n    }\n  };\n\n  URI.ensureValidPort = function (v) {\n    if (!v) {\n      return;\n    }\n\n    var port = Number(v);\n    if (isInteger(port) && (port > 0) && (port < 65536)) {\n      return;\n    }\n\n    throw new TypeError('Port \"' + v + '\" is not a valid port');\n  };\n\n  // noConflict\n  URI.noConflict = function(removeAll) {\n    if (removeAll) {\n      var unconflicted = {\n        URI: this.noConflict()\n      };\n\n      if (root.URITemplate && typeof root.URITemplate.noConflict === 'function') {\n        unconflicted.URITemplate = root.URITemplate.noConflict();\n      }\n\n      if (root.IPv6 && typeof root.IPv6.noConflict === 'function') {\n        unconflicted.IPv6 = root.IPv6.noConflict();\n      }\n\n      if (root.SecondLevelDomains && typeof root.SecondLevelDomains.noConflict === 'function') {\n        unconflicted.SecondLevelDomains = root.SecondLevelDomains.noConflict();\n      }\n\n      return unconflicted;\n    } else if (root.URI === this) {\n      root.URI = _URI;\n    }\n\n    return this;\n  };\n\n  p.build = function(deferBuild) {\n    if (deferBuild === true) {\n      this._deferred_build = true;\n    } else if (deferBuild === undefined || this._deferred_build) {\n      this._string = URI.build(this._parts);\n      this._deferred_build = false;\n    }\n\n    return this;\n  };\n\n  p.clone = function() {\n    return new URI(this);\n  };\n\n  p.valueOf = p.toString = function() {\n    return this.build(false)._string;\n  };\n\n\n  function generateSimpleAccessor(_part){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        this._parts[_part] = v || null;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  function generatePrefixAccessor(_part, _key){\n    return function(v, build) {\n      if (v === undefined) {\n        return this._parts[_part] || '';\n      } else {\n        if (v !== null) {\n          v = v + '';\n          if (v.charAt(0) === _key) {\n            v = v.substring(1);\n          }\n        }\n\n        this._parts[_part] = v;\n        this.build(!build);\n        return this;\n      }\n    };\n  }\n\n  p.protocol = generateSimpleAccessor('protocol');\n  p.username = generateSimpleAccessor('username');\n  p.password = generateSimpleAccessor('password');\n  p.hostname = generateSimpleAccessor('hostname');\n  p.port = generateSimpleAccessor('port');\n  p.query = generatePrefixAccessor('query', '?');\n  p.fragment = generatePrefixAccessor('fragment', '#');\n\n  p.search = function(v, build) {\n    var t = this.query(v, build);\n    return typeof t === 'string' && t.length ? ('?' + t) : t;\n  };\n  p.hash = function(v, build) {\n    var t = this.fragment(v, build);\n    return typeof t === 'string' && t.length ? ('#' + t) : t;\n  };\n\n  p.pathname = function(v, build) {\n    if (v === undefined || v === true) {\n      var res = this._parts.path || (this._parts.hostname ? '/' : '');\n      return v ? (this._parts.urn ? URI.decodeUrnPath : URI.decodePath)(res) : res;\n    } else {\n      if (this._parts.urn) {\n        this._parts.path = v ? URI.recodeUrnPath(v) : '';\n      } else {\n        this._parts.path = v ? URI.recodePath(v) : '/';\n      }\n      this.build(!build);\n      return this;\n    }\n  };\n  p.path = p.pathname;\n  p.href = function(href, build) {\n    var key;\n\n    if (href === undefined) {\n      return this.toString();\n    }\n\n    this._string = '';\n    this._parts = URI._parts();\n\n    var _URI = href instanceof URI;\n    var _object = typeof href === 'object' && (href.hostname || href.path || href.pathname);\n    if (href.nodeName) {\n      var attribute = URI.getDomAttribute(href);\n      href = href[attribute] || '';\n      _object = false;\n    }\n\n    // window.location is reported to be an object, but it's not the sort\n    // of object we're looking for:\n    // * location.protocol ends with a colon\n    // * location.query != object.search\n    // * location.hash != object.fragment\n    // simply serializing the unknown object should do the trick\n    // (for location, not for everything...)\n    if (!_URI && _object && href.pathname !== undefined) {\n      href = href.toString();\n    }\n\n    if (typeof href === 'string' || href instanceof String) {\n      this._parts = URI.parse(String(href), this._parts);\n    } else if (_URI || _object) {\n      var src = _URI ? href._parts : href;\n      for (key in src) {\n        if (key === 'query') { continue; }\n        if (hasOwn.call(this._parts, key)) {\n          this._parts[key] = src[key];\n        }\n      }\n      if (src.query) {\n        this.query(src.query, false);\n      }\n    } else {\n      throw new TypeError('invalid input');\n    }\n\n    this.build(!build);\n    return this;\n  };\n\n  // identification accessors\n  p.is = function(what) {\n    var ip = false;\n    var ip4 = false;\n    var ip6 = false;\n    var name = false;\n    var sld = false;\n    var idn = false;\n    var punycode = false;\n    var relative = !this._parts.urn;\n\n    if (this._parts.hostname) {\n      relative = false;\n      ip4 = URI.ip4_expression.test(this._parts.hostname);\n      ip6 = URI.ip6_expression.test(this._parts.hostname);\n      ip = ip4 || ip6;\n      name = !ip;\n      sld = name && SLD && SLD.has(this._parts.hostname);\n      idn = name && URI.idn_expression.test(this._parts.hostname);\n      punycode = name && URI.punycode_expression.test(this._parts.hostname);\n    }\n\n    switch (what.toLowerCase()) {\n      case 'relative':\n        return relative;\n\n      case 'absolute':\n        return !relative;\n\n      // hostname identification\n      case 'domain':\n      case 'name':\n        return name;\n\n      case 'sld':\n        return sld;\n\n      case 'ip':\n        return ip;\n\n      case 'ip4':\n      case 'ipv4':\n      case 'inet4':\n        return ip4;\n\n      case 'ip6':\n      case 'ipv6':\n      case 'inet6':\n        return ip6;\n\n      case 'idn':\n        return idn;\n\n      case 'url':\n        return !this._parts.urn;\n\n      case 'urn':\n        return !!this._parts.urn;\n\n      case 'punycode':\n        return punycode;\n    }\n\n    return null;\n  };\n\n  // component specific input validation\n  var _protocol = p.protocol;\n  var _port = p.port;\n  var _hostname = p.hostname;\n\n  p.protocol = function(v, build) {\n    if (v) {\n      // accept trailing ://\n      v = v.replace(/:(\\/\\/)?$/, '');\n\n      if (!v.match(URI.protocol_expression)) {\n        throw new TypeError('Protocol \"' + v + '\" contains characters other than [A-Z0-9.+-] or doesn\\'t start with [A-Z]');\n      }\n    }\n\n    return _protocol.call(this, v, build);\n  };\n  p.scheme = p.protocol;\n  p.port = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      if (v === 0) {\n        v = null;\n      }\n\n      if (v) {\n        v += '';\n        if (v.charAt(0) === ':') {\n          v = v.substring(1);\n        }\n\n        URI.ensureValidPort(v);\n      }\n    }\n    return _port.call(this, v, build);\n  };\n  p.hostname = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v !== undefined) {\n      var x = { preventInvalidHostname: this._parts.preventInvalidHostname };\n      var res = URI.parseHost(v, x);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      v = x.hostname;\n      if (this._parts.preventInvalidHostname) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n    }\n\n    return _hostname.call(this, v, build);\n  };\n\n  // compound accessors\n  p.origin = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var protocol = this.protocol();\n      var authority = this.authority();\n      if (!authority) {\n        return '';\n      }\n\n      return (protocol ? protocol + '://' : '') + this.authority();\n    } else {\n      var origin = URI(v);\n      this\n        .protocol(origin.protocol())\n        .authority(origin.authority())\n        .build(!build);\n      return this;\n    }\n  };\n  p.host = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildHost(this._parts) : '';\n    } else {\n      var res = URI.parseHost(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.authority = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      return this._parts.hostname ? URI.buildAuthority(this._parts) : '';\n    } else {\n      var res = URI.parseAuthority(v, this._parts);\n      if (res !== '/') {\n        throw new TypeError('Hostname \"' + v + '\" contains characters other than [A-Z0-9.-]');\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.userinfo = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined) {\n      var t = URI.buildUserinfo(this._parts);\n      return t ? t.substring(0, t.length -1) : t;\n    } else {\n      if (v[v.length-1] !== '@') {\n        v += '@';\n      }\n\n      URI.parseUserinfo(v, this._parts);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.resource = function(v, build) {\n    var parts;\n\n    if (v === undefined) {\n      return this.path() + this.search() + this.hash();\n    }\n\n    parts = URI.parse(v);\n    this._parts.path = parts.path;\n    this._parts.query = parts.query;\n    this._parts.fragment = parts.fragment;\n    this.build(!build);\n    return this;\n  };\n\n  // fraction accessors\n  p.subdomain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    // convenience, return \"www\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // grab domain and add another segment\n      var end = this._parts.hostname.length - this.domain().length - 1;\n      return this._parts.hostname.substring(0, end) || '';\n    } else {\n      var e = this._parts.hostname.length - this.domain().length;\n      var sub = this._parts.hostname.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(sub));\n\n      if (v && v.charAt(v.length - 1) !== '.') {\n        v += '.';\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      if (v) {\n        URI.ensureValidHostname(v, this._parts.protocol);\n      }\n\n      this._parts.hostname = this._parts.hostname.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.domain = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // convenience, return \"example.org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      // if hostname consists of 1 or 2 segments, it must be the domain\n      var t = this._parts.hostname.match(/\\./g);\n      if (t && t.length < 2) {\n        return this._parts.hostname;\n      }\n\n      // grab tld and add another segment\n      var end = this._parts.hostname.length - this.tld(build).length - 1;\n      end = this._parts.hostname.lastIndexOf('.', end -1) + 1;\n      return this._parts.hostname.substring(end) || '';\n    } else {\n      if (!v) {\n        throw new TypeError('cannot set domain empty');\n      }\n\n      if (v.indexOf(':') !== -1) {\n        throw new TypeError('Domains cannot contain colons');\n      }\n\n      URI.ensureValidHostname(v, this._parts.protocol);\n\n      if (!this._parts.hostname || this.is('IP')) {\n        this._parts.hostname = v;\n      } else {\n        var replace = new RegExp(escapeRegEx(this.domain()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.tld = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v === 'boolean') {\n      build = v;\n      v = undefined;\n    }\n\n    // return \"org\" from \"www.example.org\"\n    if (v === undefined) {\n      if (!this._parts.hostname || this.is('IP')) {\n        return '';\n      }\n\n      var pos = this._parts.hostname.lastIndexOf('.');\n      var tld = this._parts.hostname.substring(pos + 1);\n\n      if (build !== true && SLD && SLD.list[tld.toLowerCase()]) {\n        return SLD.get(this._parts.hostname) || tld;\n      }\n\n      return tld;\n    } else {\n      var replace;\n\n      if (!v) {\n        throw new TypeError('cannot set TLD empty');\n      } else if (v.match(/[^a-zA-Z0-9-]/)) {\n        if (SLD && SLD.is(v)) {\n          replace = new RegExp(escapeRegEx(this.tld()) + '$');\n          this._parts.hostname = this._parts.hostname.replace(replace, v);\n        } else {\n          throw new TypeError('TLD \"' + v + '\" contains characters other than [A-Z0-9]');\n        }\n      } else if (!this._parts.hostname || this.is('IP')) {\n        throw new ReferenceError('cannot set TLD on non-domain host');\n      } else {\n        replace = new RegExp(escapeRegEx(this.tld()) + '$');\n        this._parts.hostname = this._parts.hostname.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.directory = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path && !this._parts.hostname) {\n        return '';\n      }\n\n      if (this._parts.path === '/') {\n        return '/';\n      }\n\n      var end = this._parts.path.length - this.filename().length - 1;\n      var res = this._parts.path.substring(0, end) || (this._parts.hostname ? '/' : '');\n\n      return v ? URI.decodePath(res) : res;\n\n    } else {\n      var e = this._parts.path.length - this.filename().length;\n      var directory = this._parts.path.substring(0, e);\n      var replace = new RegExp('^' + escapeRegEx(directory));\n\n      // fully qualifier directories begin with a slash\n      if (!this.is('relative')) {\n        if (!v) {\n          v = '/';\n        }\n\n        if (v.charAt(0) !== '/') {\n          v = '/' + v;\n        }\n      }\n\n      // directories always end with a slash\n      if (v && v.charAt(v.length - 1) !== '/') {\n        v += '/';\n      }\n\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n      this.build(!build);\n      return this;\n    }\n  };\n  p.filename = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (typeof v !== 'string') {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var pos = this._parts.path.lastIndexOf('/');\n      var res = this._parts.path.substring(pos+1);\n\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      var mutatedDirectory = false;\n\n      if (v.charAt(0) === '/') {\n        v = v.substring(1);\n      }\n\n      if (v.match(/\\.?\\//)) {\n        mutatedDirectory = true;\n      }\n\n      var replace = new RegExp(escapeRegEx(this.filename()) + '$');\n      v = URI.recodePath(v);\n      this._parts.path = this._parts.path.replace(replace, v);\n\n      if (mutatedDirectory) {\n        this.normalizePath(build);\n      } else {\n        this.build(!build);\n      }\n\n      return this;\n    }\n  };\n  p.suffix = function(v, build) {\n    if (this._parts.urn) {\n      return v === undefined ? '' : this;\n    }\n\n    if (v === undefined || v === true) {\n      if (!this._parts.path || this._parts.path === '/') {\n        return '';\n      }\n\n      var filename = this.filename();\n      var pos = filename.lastIndexOf('.');\n      var s, res;\n\n      if (pos === -1) {\n        return '';\n      }\n\n      // suffix may only contain alnum characters (yup, I made this up.)\n      s = filename.substring(pos+1);\n      res = (/^[a-z0-9%]+$/i).test(s) ? s : '';\n      return v ? URI.decodePathSegment(res) : res;\n    } else {\n      if (v.charAt(0) === '.') {\n        v = v.substring(1);\n      }\n\n      var suffix = this.suffix();\n      var replace;\n\n      if (!suffix) {\n        if (!v) {\n          return this;\n        }\n\n        this._parts.path += '.' + URI.recodePath(v);\n      } else if (!v) {\n        replace = new RegExp(escapeRegEx('.' + suffix) + '$');\n      } else {\n        replace = new RegExp(escapeRegEx(suffix) + '$');\n      }\n\n      if (replace) {\n        v = URI.recodePath(v);\n        this._parts.path = this._parts.path.replace(replace, v);\n      }\n\n      this.build(!build);\n      return this;\n    }\n  };\n  p.segment = function(segment, v, build) {\n    var separator = this._parts.urn ? ':' : '/';\n    var path = this.path();\n    var absolute = path.substring(0, 1) === '/';\n    var segments = path.split(separator);\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (segment !== undefined && typeof segment !== 'number') {\n      throw new Error('Bad segment \"' + segment + '\", must be 0-based integer');\n    }\n\n    if (absolute) {\n      segments.shift();\n    }\n\n    if (segment < 0) {\n      // allow negative indexes to address from the end\n      segment = Math.max(segments.length + segment, 0);\n    }\n\n    if (v === undefined) {\n      /*jshint laxbreak: true */\n      return segment === undefined\n        ? segments\n        : segments[segment];\n      /*jshint laxbreak: false */\n    } else if (segment === null || segments[segment] === undefined) {\n      if (isArray(v)) {\n        segments = [];\n        // collapse empty elements within array\n        for (var i=0, l=v.length; i < l; i++) {\n          if (!v[i].length && (!segments.length || !segments[segments.length -1].length)) {\n            continue;\n          }\n\n          if (segments.length && !segments[segments.length -1].length) {\n            segments.pop();\n          }\n\n          segments.push(trimSlashes(v[i]));\n        }\n      } else if (v || typeof v === 'string') {\n        v = trimSlashes(v);\n        if (segments[segments.length -1] === '') {\n          // empty trailing elements have to be overwritten\n          // to prevent results such as /foo//bar\n          segments[segments.length -1] = v;\n        } else {\n          segments.push(v);\n        }\n      }\n    } else {\n      if (v) {\n        segments[segment] = trimSlashes(v);\n      } else {\n        segments.splice(segment, 1);\n      }\n    }\n\n    if (absolute) {\n      segments.unshift('');\n    }\n\n    return this.path(segments.join(separator), build);\n  };\n  p.segmentCoded = function(segment, v, build) {\n    var segments, i, l;\n\n    if (typeof segment !== 'number') {\n      build = v;\n      v = segment;\n      segment = undefined;\n    }\n\n    if (v === undefined) {\n      segments = this.segment(segment, v, build);\n      if (!isArray(segments)) {\n        segments = segments !== undefined ? URI.decode(segments) : undefined;\n      } else {\n        for (i = 0, l = segments.length; i < l; i++) {\n          segments[i] = URI.decode(segments[i]);\n        }\n      }\n\n      return segments;\n    }\n\n    if (!isArray(v)) {\n      v = (typeof v === 'string' || v instanceof String) ? URI.encode(v) : v;\n    } else {\n      for (i = 0, l = v.length; i < l; i++) {\n        v[i] = URI.encode(v[i]);\n      }\n    }\n\n    return this.segment(segment, v, build);\n  };\n\n  // mutating query string\n  var q = p.query;\n  p.query = function(v, build) {\n    if (v === true) {\n      return URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    } else if (typeof v === 'function') {\n      var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n      var result = v.call(this, data);\n      this._parts.query = URI.buildQuery(result || data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else if (v !== undefined && typeof v !== 'string') {\n      this._parts.query = URI.buildQuery(v, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!build);\n      return this;\n    } else {\n      return q.call(this, v, build);\n    }\n  };\n  p.setQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n\n    if (typeof name === 'string' || name instanceof String) {\n      data[name] = value !== undefined ? value : null;\n    } else if (typeof name === 'object') {\n      for (var key in name) {\n        if (hasOwn.call(name, key)) {\n          data[key] = name[key];\n        }\n      }\n    } else {\n      throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');\n    }\n\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.addQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.addQuery(data, name, value === undefined ? null : value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.removeQuery = function(name, value, build) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    URI.removeQuery(data, name, value);\n    this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    if (typeof name !== 'string') {\n      build = value;\n    }\n\n    this.build(!build);\n    return this;\n  };\n  p.hasQuery = function(name, value, withinArray) {\n    var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    return URI.hasQuery(data, name, value, withinArray);\n  };\n  p.setSearch = p.setQuery;\n  p.addSearch = p.addQuery;\n  p.removeSearch = p.removeQuery;\n  p.hasSearch = p.hasQuery;\n\n  // sanitizing URLs\n  p.normalize = function() {\n    if (this._parts.urn) {\n      return this\n        .normalizeProtocol(false)\n        .normalizePath(false)\n        .normalizeQuery(false)\n        .normalizeFragment(false)\n        .build();\n    }\n\n    return this\n      .normalizeProtocol(false)\n      .normalizeHostname(false)\n      .normalizePort(false)\n      .normalizePath(false)\n      .normalizeQuery(false)\n      .normalizeFragment(false)\n      .build();\n  };\n  p.normalizeProtocol = function(build) {\n    if (typeof this._parts.protocol === 'string') {\n      this._parts.protocol = this._parts.protocol.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeHostname = function(build) {\n    if (this._parts.hostname) {\n      if (this.is('IDN') && punycode) {\n        this._parts.hostname = punycode.toASCII(this._parts.hostname);\n      } else if (this.is('IPv6') && IPv6) {\n        this._parts.hostname = IPv6.best(this._parts.hostname);\n      }\n\n      this._parts.hostname = this._parts.hostname.toLowerCase();\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePort = function(build) {\n    // remove port of it's the protocol's default\n    if (typeof this._parts.protocol === 'string' && this._parts.port === URI.defaultPorts[this._parts.protocol]) {\n      this._parts.port = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizePath = function(build) {\n    var _path = this._parts.path;\n    if (!_path) {\n      return this;\n    }\n\n    if (this._parts.urn) {\n      this._parts.path = URI.recodeUrnPath(this._parts.path);\n      this.build(!build);\n      return this;\n    }\n\n    if (this._parts.path === '/') {\n      return this;\n    }\n\n    _path = URI.recodePath(_path);\n\n    var _was_relative;\n    var _leadingParents = '';\n    var _parent, _pos;\n\n    // handle relative paths\n    if (_path.charAt(0) !== '/') {\n      _was_relative = true;\n      _path = '/' + _path;\n    }\n\n    // handle relative files (as opposed to directories)\n    if (_path.slice(-3) === '/..' || _path.slice(-2) === '/.') {\n      _path += '/';\n    }\n\n    // resolve simples\n    _path = _path\n      .replace(/(\\/(\\.\\/)+)|(\\/\\.$)/g, '/')\n      .replace(/\\/{2,}/g, '/');\n\n    // remember leading parents\n    if (_was_relative) {\n      _leadingParents = _path.substring(1).match(/^(\\.\\.\\/)+/) || '';\n      if (_leadingParents) {\n        _leadingParents = _leadingParents[0];\n      }\n    }\n\n    // resolve parents\n    while (true) {\n      _parent = _path.search(/\\/\\.\\.(\\/|$)/);\n      if (_parent === -1) {\n        // no more ../ to resolve\n        break;\n      } else if (_parent === 0) {\n        // top level cannot be relative, skip it\n        _path = _path.substring(3);\n        continue;\n      }\n\n      _pos = _path.substring(0, _parent).lastIndexOf('/');\n      if (_pos === -1) {\n        _pos = _parent;\n      }\n      _path = _path.substring(0, _pos) + _path.substring(_parent + 3);\n    }\n\n    // revert to relative\n    if (_was_relative && this.is('relative')) {\n      _path = _leadingParents + _path.substring(1);\n    }\n\n    this._parts.path = _path;\n    this.build(!build);\n    return this;\n  };\n  p.normalizePathname = p.normalizePath;\n  p.normalizeQuery = function(build) {\n    if (typeof this._parts.query === 'string') {\n      if (!this._parts.query.length) {\n        this._parts.query = null;\n      } else {\n        this.query(URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace));\n      }\n\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeFragment = function(build) {\n    if (!this._parts.fragment) {\n      this._parts.fragment = null;\n      this.build(!build);\n    }\n\n    return this;\n  };\n  p.normalizeSearch = p.normalizeQuery;\n  p.normalizeHash = p.normalizeFragment;\n\n  p.iso8859 = function() {\n    // expect unicode input, iso8859 output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = escape;\n    URI.decode = decodeURIComponent;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.unicode = function() {\n    // expect iso8859 input, unicode output\n    var e = URI.encode;\n    var d = URI.decode;\n\n    URI.encode = strictEncodeURIComponent;\n    URI.decode = unescape;\n    try {\n      this.normalize();\n    } finally {\n      URI.encode = e;\n      URI.decode = d;\n    }\n    return this;\n  };\n\n  p.readable = function() {\n    var uri = this.clone();\n    // removing username, password, because they shouldn't be displayed according to RFC 3986\n    uri.username('').password('').normalize();\n    var t = '';\n    if (uri._parts.protocol) {\n      t += uri._parts.protocol + '://';\n    }\n\n    if (uri._parts.hostname) {\n      if (uri.is('punycode') && punycode) {\n        t += punycode.toUnicode(uri._parts.hostname);\n        if (uri._parts.port) {\n          t += ':' + uri._parts.port;\n        }\n      } else {\n        t += uri.host();\n      }\n    }\n\n    if (uri._parts.hostname && uri._parts.path && uri._parts.path.charAt(0) !== '/') {\n      t += '/';\n    }\n\n    t += uri.path(true);\n    if (uri._parts.query) {\n      var q = '';\n      for (var i = 0, qp = uri._parts.query.split('&'), l = qp.length; i < l; i++) {\n        var kv = (qp[i] || '').split('=');\n        q += '&' + URI.decodeQuery(kv[0], this._parts.escapeQuerySpace)\n          .replace(/&/g, '%26');\n\n        if (kv[1] !== undefined) {\n          q += '=' + URI.decodeQuery(kv[1], this._parts.escapeQuerySpace)\n            .replace(/&/g, '%26');\n        }\n      }\n      t += '?' + q.substring(1);\n    }\n\n    t += URI.decodeQuery(uri.hash(), true);\n    return t;\n  };\n\n  // resolving relative and absolute URLs\n  p.absoluteTo = function(base) {\n    var resolved = this.clone();\n    var properties = ['protocol', 'username', 'password', 'hostname', 'port'];\n    var basedir, i, p;\n\n    if (this._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    if (!(base instanceof URI)) {\n      base = new URI(base);\n    }\n\n    if (resolved._parts.protocol) {\n      // Directly returns even if this._parts.hostname is empty.\n      return resolved;\n    } else {\n      resolved._parts.protocol = base._parts.protocol;\n    }\n\n    if (this._parts.hostname) {\n      return resolved;\n    }\n\n    for (i = 0; (p = properties[i]); i++) {\n      resolved._parts[p] = base._parts[p];\n    }\n\n    if (!resolved._parts.path) {\n      resolved._parts.path = base._parts.path;\n      if (!resolved._parts.query) {\n        resolved._parts.query = base._parts.query;\n      }\n    } else {\n      if (resolved._parts.path.substring(-2) === '..') {\n        resolved._parts.path += '/';\n      }\n\n      if (resolved.path().charAt(0) !== '/') {\n        basedir = base.directory();\n        basedir = basedir ? basedir : base.path().indexOf('/') === 0 ? '/' : '';\n        resolved._parts.path = (basedir ? (basedir + '/') : '') + resolved._parts.path;\n        resolved.normalizePath();\n      }\n    }\n\n    resolved.build();\n    return resolved;\n  };\n  p.relativeTo = function(base) {\n    var relative = this.clone().normalize();\n    var relativeParts, baseParts, common, relativePath, basePath;\n\n    if (relative._parts.urn) {\n      throw new Error('URNs do not have any generally defined hierarchical components');\n    }\n\n    base = new URI(base).normalize();\n    relativeParts = relative._parts;\n    baseParts = base._parts;\n    relativePath = relative.path();\n    basePath = base.path();\n\n    if (relativePath.charAt(0) !== '/') {\n      throw new Error('URI is already relative');\n    }\n\n    if (basePath.charAt(0) !== '/') {\n      throw new Error('Cannot calculate a URI relative to another relative URI');\n    }\n\n    if (relativeParts.protocol === baseParts.protocol) {\n      relativeParts.protocol = null;\n    }\n\n    if (relativeParts.username !== baseParts.username || relativeParts.password !== baseParts.password) {\n      return relative.build();\n    }\n\n    if (relativeParts.protocol !== null || relativeParts.username !== null || relativeParts.password !== null) {\n      return relative.build();\n    }\n\n    if (relativeParts.hostname === baseParts.hostname && relativeParts.port === baseParts.port) {\n      relativeParts.hostname = null;\n      relativeParts.port = null;\n    } else {\n      return relative.build();\n    }\n\n    if (relativePath === basePath) {\n      relativeParts.path = '';\n      return relative.build();\n    }\n\n    // determine common sub path\n    common = URI.commonPath(relativePath, basePath);\n\n    // If the paths have nothing in common, return a relative URL with the absolute path.\n    if (!common) {\n      return relative.build();\n    }\n\n    var parents = baseParts.path\n      .substring(common.length)\n      .replace(/[^\\/]*$/, '')\n      .replace(/.*?\\//g, '../');\n\n    relativeParts.path = (parents + relativeParts.path.substring(common.length)) || './';\n\n    return relative.build();\n  };\n\n  // comparing URIs\n  p.equals = function(uri) {\n    var one = this.clone();\n    var two = new URI(uri);\n    var one_map = {};\n    var two_map = {};\n    var checked = {};\n    var one_query, two_query, key;\n\n    one.normalize();\n    two.normalize();\n\n    // exact match\n    if (one.toString() === two.toString()) {\n      return true;\n    }\n\n    // extract query string\n    one_query = one.query();\n    two_query = two.query();\n    one.query('');\n    two.query('');\n\n    // definitely not equal if not even non-query parts match\n    if (one.toString() !== two.toString()) {\n      return false;\n    }\n\n    // query parameters have the same length, even if they're permuted\n    if (one_query.length !== two_query.length) {\n      return false;\n    }\n\n    one_map = URI.parseQuery(one_query, this._parts.escapeQuerySpace);\n    two_map = URI.parseQuery(two_query, this._parts.escapeQuerySpace);\n\n    for (key in one_map) {\n      if (hasOwn.call(one_map, key)) {\n        if (!isArray(one_map[key])) {\n          if (one_map[key] !== two_map[key]) {\n            return false;\n          }\n        } else if (!arraysEqual(one_map[key], two_map[key])) {\n          return false;\n        }\n\n        checked[key] = true;\n      }\n    }\n\n    for (key in two_map) {\n      if (hasOwn.call(two_map, key)) {\n        if (!checked[key]) {\n          // two contains a parameter not present in one\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  // state\n  p.preventInvalidHostname = function(v) {\n    this._parts.preventInvalidHostname = !!v;\n    return this;\n  };\n\n  p.duplicateQueryParameters = function(v) {\n    this._parts.duplicateQueryParameters = !!v;\n    return this;\n  };\n\n  p.escapeQuerySpace = function(v) {\n    this._parts.escapeQuerySpace = !!v;\n    return this;\n  };\n\n  return URI;\n}));\n","/*! https://mths.be/punycode v1.4.0 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\nimport { Sandbox, SandboxRegistry } from 'runtime-core/dist/sandbox';\nimport MiniBus from 'runtime-core/dist/minibus';\n\nfunction create(iframe) {\n  window._miniBus = new MiniBus();\n  window._miniBus._onPostMessage = function(msg) {\n    iframe.contentWindow.postMessage(msg, '*');\n  };\n  window.addEventListener('message', function(event) {\n    if (event.data.to && (event.data.to.startsWith('runtime:loadedHyperty') || event.data.to.endsWith('gui-manager'))) { return; }\n\n    window._miniBus._onMessage(event.data);\n  }, false);\n\n  window._registry = new SandboxRegistry(window._miniBus);\n  window._registry._create = function(url, sourceCode, config, factory) {\n    try {\n      eval.apply(window, [sourceCode]);\n\n      if (typeof activate === 'function') {\n        return activate(url, window._miniBus, config, factory);\n      }\n\n      if (typeof activate.default === 'function') {\n        return activate.default(url, window._miniBus, config, factory);\n      }\n\n    } catch (error) {\n      console.error('[Context APP Create] - Error: ', error);\n      throw JSON.stringify(error.message);\n    }\n  };\n}\n\nfunction getHyperty(hypertyDescriptor) {\n  return window._registry.components[hypertyDescriptor];\n}\n\n/**\n * SandboxContext for application\n * @typedef ContextApp\n * @property {function(iFrame: iframe)} create Creates the context for the sandbox hosted in the iframe\n * @property {function(Hyperty descriptor: string):Hyperty} getHyperty Returns the hyperty for the given descriptor\n * */\nexport default { create, getHyperty };\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\nimport RethinkBrowser from './RuntimeUAStub'\n\nlet rethink;\n\nif( typeof window != undefined && window != null ){\n    rethink = RethinkBrowser\n}else{\n    rethink = undefined\n}\n\nexport default rethink\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n/**\n * @external {MSG_STATUS} https://github.com/reTHINK-project/core-framework/tree/master/docs/specs/service-framework\n */\n\nimport app from './ContextApp';\nimport URI from 'urijs';\nimport { create as createIframe } from './iframe';\n\nlet iframe = undefined;\n\n/**\n * @typedef {Object} Hyperty\n * @property {string} runtimeHypertyURL - Hyperty address\n * @property {MSG_STATUS} status - Hyperty status\n * @property {Object} instance - Hyperty object\n * @property {string} name - Hyperty name\n */\nlet buildMsg = (hypertyComponent, msg) => {\n  return {\n    runtimeHypertyURL: msg.body.runtimeHypertyURL,\n    status: msg.body.status,\n    instance: hypertyComponent.instance,\n    name: hypertyComponent.name\n  };\n};\n\nlet requireHypertyID = 0;\n\n/**\n * @typedef {Object} RuntimeAdapter\n * @property {function(Hyperty descriptor: string, Hyperty addresses to be reused or empty in other case: string): Promise<Hyperty>} requireHyperty - Loads and returns a Hyperty\n * @property {function(Domain: string)} requireProtostub - Loads a protostub from the given domain\n * @property {function(): Promise} close - Unloads and closes the installed runtime\n */\nlet runtimeAdapter = {\n\n  requireHyperty: (hypertyDescriptor, reuseAddress = false) => {\n    return new Promise((resolve, reject) => {\n      // keep current requireHypertyID\n      const callbackID = requireHypertyID;\n      requireHypertyID += 1;\n      let loaded = (e) => {\n        if (e.data.to === 'runtime:loadedHyperty') {\n          if (e.data.body.id === callbackID) {\n            window.removeEventListener('message', loaded);\n            resolve(buildMsg(app.getHyperty(e.data.body.runtimeHypertyURL), e.data));\n          }\n        }\n      };\n      window.addEventListener('message', loaded);\n      iframe.contentWindow.postMessage({ to: 'core:loadHyperty', body: { descriptor: hypertyDescriptor, reuseAddress, id: callbackID } }, '*');\n    });\n  },\n\n  authorise: (idp, scope) => {\n\n    return new Promise((resolve, reject) => {\n      let loaded = (e) => {\n        console.log('[RuntimeBrowser.RuntimeUAStub.Authorise] reply:', e.data);\n        if (e.data.to === 'runtime:authorised') {\n          window.removeEventListener('message', loaded);\n\n          resolve(e.data.body);\n        } else if (e.data.to === 'runtime:not-authorised') {\n          window.removeEventListener('message', loaded);\n\n          console.error('[RuntimeBrowser.RuntimeUAStub.Authorise] Error:', e.data);\n          reject(e.data.body);\n        }\n      };\n      window.addEventListener('message', loaded);\n      console.log('Authorising IDP ', idp, ' with scope ', scope);\n      iframe.contentWindow.postMessage({ to: 'core:authorise', body: { idp: idp, scope: scope } }, '*');\n    });\n\n  },\n\n  reset: () => {\n    console.log('Runtime Browser - reset ');\n    return new Promise((resolve, reject) => {\n      let resetEvt = (e) => {\n        if (e.data.to === 'runtime:runtimeReset') {\n          window.removeEventListener('message', resetEvt);\n          resolve(e.data.body);\n        }\n      };\n      window.addEventListener('message', resetEvt);\n      iframe.contentWindow.postMessage({ to: 'core:reset', body: { } }, '*');\n    });\n  },\n\n  login: (idp) => {\n\n    return new Promise((resolve, reject) => {\n      let loaded = (e) => {\n        if (e.data.to === 'runtime:loggedIn') {\n          window.removeEventListener('message', loaded);\n          resolve(e.data.body);\n        }\n      };\n      window.addEventListener('message', loaded);\n      console.log('Logging with IDP: ', idp);\n      iframe.contentWindow.postMessage({ to: 'core:login', body: { idp: idp } }, '*');\n    });\n\n  },\n\n  listenShowAdmin: () => {\n    return new Promise((resolve, reject) => {\n      let loaded = (e) => {\n        if (e.data.to === 'runtime:gui-manager') {\n          if (e.data.body.method === 'tokenExpired') {\n            window.removeEventListener('message', loaded);\n            resolve(true);\n          }\n        }\n      };\n      window.addEventListener('message', loaded);\n    });\n  },\n\n\n  requireProtostub: (domain) => {\n    iframe.contentWindow.postMessage({ to: 'core:loadStub', body: { domain: domain } }, '*');\n  },\n\n  close: (logOut = false) => {\n    console.log('Stub - logging out: ', logOut);\n    return new Promise((resolve, reject) => {\n      let loaded = (e) => {\n        if (e.data.to === 'runtime:runtimeClosed') {\n          window.removeEventListener('message', loaded);\n          resolve(resolve(e.data.body));\n        }\n      };\n      window.addEventListener('message', loaded);\n      iframe.contentWindow.postMessage({ to: 'core:close', body: { logOut: logOut } }, '*');\n    });\n  }\n};\n\nlet GuiManager = function () {\n  window.addEventListener('message', (e) => {\n    if (e.data.to === 'runtime:gui-manager') {\n\n      if (e.data.body.method === 'showAdminPage') {\n        iframe.style.width = '100%';\n        iframe.style.height = '100%';\n        iframe.style.zIndex = 99999;\n      } else {\n        if (e.data.body.method === 'hideAdminPage') {\n          iframe.style.width = '48px';\n          iframe.style.height = '48px';\n          iframe.style.zIndex = 1;\n        }\n      }\n\n    }\n  });\n};\n\n/**\n * @typedef {Object} RuntimeUA\n * @property {function(Runtime domain: string, Runtime url: string, Development mode: boolean): Promise<RuntimeAdapter>} install - Installs a runtime locally\n */\nlet RethinkBrowser = {\n  install: function ({ domain, runtimeURL, development, indexURL, sandboxURL, hideAdmin } = {}) {\n    console.info('Install: ', domain, runtimeURL, development, indexURL, sandboxURL, hideAdmin);\n    return new Promise((resolve, reject) => {\n      let runtime = this._getRuntime(runtimeURL, domain, development, indexURL, sandboxURL, hideAdmin);\n      iframe = createIframe(`${runtime.indexURL}?domain=${runtime.domain}&runtime=${runtime.url}&development=${development}`, 99999, hideAdmin);\n      let installed = (e) => {\n        if (e.data.to === 'runtime:installed') {\n          window.removeEventListener('message', installed);\n          resolve(runtimeAdapter);\n        }\n      };\n      window.addEventListener('message', installed);\n      window.addEventListener('message', (e) => {\n        if (e.data.to && e.data.to === 'runtime:createSandboxWindow') {\n          const ifr = createIframe(runtime.sandboxURL, undefined, hideAdmin);\n          ifr.addEventListener('load', () => {\n            ifr.contentWindow.postMessage(e.data, '*', e.ports);\n          }, false);\n        }\n      });\n      app.create(iframe);\n      GuiManager();\n    });\n  },\n\n  _getRuntime(runtimeURL, domain, development, indexURL, sandboxURL) {\n    if (development) {\n      runtimeURL = runtimeURL || 'hyperty-catalogue://catalogue.' + domain + '/.well-known/runtime/Runtime';\n      domain = domain || new URI(runtimeURL).host();\n      indexURL = indexURL || 'https://' + domain + '/.well-known/runtime/index.html';\n      sandboxURL = sandboxURL || 'https://' + domain + '/.well-known/runtime/sandbox.html';\n    } else {\n      runtimeURL = runtimeURL || `https://catalogue.${domain}/.well-known/runtime/default`;\n      domain = domain || new URI(runtimeURL).host().replace('catalogue.', '');\n      indexURL = indexURL || 'https://' + domain + '/.well-known/runtime/index.html';\n      sandboxURL = sandboxURL || 'https://' + domain + '/.well-known/runtime/sandbox.html';\n    }\n\n    console.info('get Runtime: ', runtimeURL, domain, indexURL, sandboxURL);\n\n    return {\n      url: runtimeURL,\n      domain: domain,\n      indexURL: indexURL,\n      sandboxURL: sandboxURL\n    };\n  }\n};\n\nexport default RethinkBrowser;\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n\n/**\n * @external {iframe} https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe\n */\n\n/**\n * Creates an iframe\n * @param {string} src - Url to load into the iframe\n * @return {iframe} - iFrame element\n */\nexport function create(src, zIndex = -10, hideAdmin = false) {\n  var iframe = document.createElement('iframe');\n  iframe.setAttribute('id', 'rethink');\n  iframe.style.position = 'absolute';\n  iframe.style.top = '0';\n  iframe.style.right = '0';\n  iframe.style.border = '0';\n  iframe.style.zIndex = zIndex;\n  iframe.width = '48px';\n  iframe.height = '48px';\n  iframe.title = 'reTHINK-project';\n  iframe.setAttribute('seamless', '');\n  iframe.setAttribute('src', src);\n  iframe.setAttribute('sandbox', 'allow-forms allow-scripts allow-popups-to-escape-sandbox allow-popups allow-same-origin allow-top-navigation');\n  iframe.style.display = 'block';\n  if (hideAdmin == true) {\n    iframe.style.display = 'none';\n  }\n  document.querySelector('body').appendChild(iframe);\n\n  return iframe;\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvcnVudGltZS1jb3JlL2Rpc3QvbWluaWJ1cy5qcyIsIm5vZGVfbW9kdWxlcy9ydW50aW1lLWNvcmUvZGlzdC9zYW5kYm94LmpzIiwibm9kZV9tb2R1bGVzL3VyaWpzL3NyYy9JUHY2LmpzIiwibm9kZV9tb2R1bGVzL3VyaWpzL3NyYy9TZWNvbmRMZXZlbERvbWFpbnMuanMiLCJub2RlX21vZHVsZXMvdXJpanMvc3JjL1VSSS5qcyIsIm5vZGVfbW9kdWxlcy91cmlqcy9zcmMvcHVueWNvZGUuanMiLCJzcmMvQ29udGV4dEFwcC5qcyIsInNyYy9SdW50aW1lTG9hZGVyLmpzIiwic3JjL1J1bnRpbWVVQVN0dWIuanMiLCJzcmMvaWZyYW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbHlFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUMvZkE7O0FBQ0E7Ozs7OztBQXZCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlCQSxTQUFTLE1BQVQsQ0FBZ0IsTUFBaEIsRUFBd0I7QUFDdEIsU0FBTyxRQUFQLEdBQWtCLElBQUksaUJBQUosRUFBbEI7QUFDQSxTQUFPLFFBQVAsQ0FBZ0IsY0FBaEIsR0FBaUMsVUFBUyxHQUFULEVBQWM7QUFDN0MsV0FBTyxhQUFQLENBQXFCLFdBQXJCLENBQWlDLEdBQWpDLEVBQXNDLEdBQXRDO0FBQ0QsR0FGRDtBQUdBLFNBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsVUFBUyxLQUFULEVBQWdCO0FBQ2pELFFBQUksTUFBTSxJQUFOLENBQVcsRUFBWCxLQUFrQixNQUFNLElBQU4sQ0FBVyxFQUFYLENBQWMsVUFBZCxDQUF5Qix1QkFBekIsS0FBcUQsTUFBTSxJQUFOLENBQVcsRUFBWCxDQUFjLFFBQWQsQ0FBdUIsYUFBdkIsQ0FBdkUsQ0FBSixFQUFtSDtBQUFFO0FBQVM7O0FBRTlILFdBQU8sUUFBUCxDQUFnQixVQUFoQixDQUEyQixNQUFNLElBQWpDO0FBQ0QsR0FKRCxFQUlHLEtBSkg7O0FBTUEsU0FBTyxTQUFQLEdBQW1CLElBQUksd0JBQUosQ0FBb0IsT0FBTyxRQUEzQixDQUFuQjtBQUNBLFNBQU8sU0FBUCxDQUFpQixPQUFqQixHQUEyQixVQUFTLEdBQVQsRUFBYyxVQUFkLEVBQTBCLE1BQTFCLEVBQWtDLE9BQWxDLEVBQTJDO0FBQ3BFLFFBQUk7QUFDRixXQUFLLEtBQUwsQ0FBVyxNQUFYLEVBQW1CLENBQUMsVUFBRCxDQUFuQjs7QUFFQSxVQUFJLE9BQU8sUUFBUCxLQUFvQixVQUF4QixFQUFvQztBQUNsQyxlQUFPLFNBQVMsR0FBVCxFQUFjLE9BQU8sUUFBckIsRUFBK0IsTUFBL0IsRUFBdUMsT0FBdkMsQ0FBUDtBQUNEOztBQUVELFVBQUksT0FBTyxTQUFTLE9BQWhCLEtBQTRCLFVBQWhDLEVBQTRDO0FBQzFDLGVBQU8sU0FBUyxPQUFULENBQWlCLEdBQWpCLEVBQXNCLE9BQU8sUUFBN0IsRUFBdUMsTUFBdkMsRUFBK0MsT0FBL0MsQ0FBUDtBQUNEO0FBRUYsS0FYRCxDQVdFLE9BQU8sS0FBUCxFQUFjO0FBQ2QsY0FBUSxLQUFSLENBQWMsZ0NBQWQsRUFBZ0QsS0FBaEQ7QUFDQSxZQUFNLEtBQUssU0FBTCxDQUFlLE1BQU0sT0FBckIsQ0FBTjtBQUNEO0FBQ0YsR0FoQkQ7QUFpQkQ7O0FBRUQsU0FBUyxVQUFULENBQW9CLGlCQUFwQixFQUF1QztBQUNyQyxTQUFPLE9BQU8sU0FBUCxDQUFpQixVQUFqQixDQUE0QixpQkFBNUIsQ0FBUDtBQUNEOztBQUVEOzs7Ozs7a0JBTWUsRUFBRSxjQUFGLEVBQVUsc0JBQVYsRTs7Ozs7Ozs7OzhRQ2xFZjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0JBOzs7Ozs7QUFFQSxJQUFJLGdCQUFKOztBQUVBLElBQUksUUFBTyxNQUFQLHlDQUFPLE1BQVAsTUFBaUIsU0FBakIsSUFBOEIsVUFBVSxJQUE1QyxFQUFrRDtBQUM5QyxjQUFVLHVCQUFWO0FBQ0gsQ0FGRCxNQUVLO0FBQ0QsY0FBVSxTQUFWO0FBQ0g7O2tCQUVjLE87Ozs7Ozs7OztBQ0xmOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBLElBQUksU0FBUyxTQUFiOztBQUVBOzs7Ozs7O0FBakNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVCQTs7OztBQWlCQSxJQUFJLFdBQVcsU0FBWCxRQUFXLENBQUMsZ0JBQUQsRUFBbUIsR0FBbkIsRUFBMkI7QUFDeEMsU0FBTztBQUNMLHVCQUFtQixJQUFJLElBQUosQ0FBUyxpQkFEdkI7QUFFTCxZQUFRLElBQUksSUFBSixDQUFTLE1BRlo7QUFHTCxjQUFVLGlCQUFpQixRQUh0QjtBQUlMLFVBQU0saUJBQWlCO0FBSmxCLEdBQVA7QUFNRCxDQVBEOztBQVNBLElBQUksbUJBQW1CLENBQXZCOztBQUVBOzs7Ozs7QUFNQSxJQUFJLGlCQUFpQjs7QUFFbkIsa0JBQWdCLHdCQUFDLGlCQUFELEVBQTZDO0FBQUEsUUFBekIsWUFBeUIsdUVBQVYsS0FBVTs7QUFDM0QsV0FBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3RDO0FBQ0EsVUFBTSxhQUFhLGdCQUFuQjtBQUNBLDBCQUFvQixDQUFwQjtBQUNBLFVBQUksU0FBUyxTQUFULE1BQVMsQ0FBQyxDQUFELEVBQU87QUFDbEIsWUFBSSxFQUFFLElBQUYsQ0FBTyxFQUFQLEtBQWMsdUJBQWxCLEVBQTJDO0FBQ3pDLGNBQUksRUFBRSxJQUFGLENBQU8sSUFBUCxDQUFZLEVBQVosS0FBbUIsVUFBdkIsRUFBbUM7QUFDakMsbUJBQU8sbUJBQVAsQ0FBMkIsU0FBM0IsRUFBc0MsTUFBdEM7QUFDQSxvQkFBUSxTQUFTLHFCQUFJLFVBQUosQ0FBZSxFQUFFLElBQUYsQ0FBTyxJQUFQLENBQVksaUJBQTNCLENBQVQsRUFBd0QsRUFBRSxJQUExRCxDQUFSO0FBQ0Q7QUFDRjtBQUNGLE9BUEQ7QUFRQSxhQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLE1BQW5DO0FBQ0EsYUFBTyxhQUFQLENBQXFCLFdBQXJCLENBQWlDLEVBQUUsSUFBSSxrQkFBTixFQUEwQixNQUFNLEVBQUUsWUFBWSxpQkFBZCxFQUFpQywwQkFBakMsRUFBK0MsSUFBSSxVQUFuRCxFQUFoQyxFQUFqQyxFQUFvSSxHQUFwSTtBQUNELEtBZE0sQ0FBUDtBQWVELEdBbEJrQjs7QUFvQm5CLGFBQVcsbUJBQUMsR0FBRCxFQUFNLEtBQU4sRUFBZ0I7O0FBRXpCLFdBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxVQUFJLFNBQVMsU0FBVCxNQUFTLENBQUMsQ0FBRCxFQUFPO0FBQ2xCLGdCQUFRLEdBQVIsQ0FBWSxpREFBWixFQUErRCxFQUFFLElBQWpFO0FBQ0EsWUFBSSxFQUFFLElBQUYsQ0FBTyxFQUFQLEtBQWMsb0JBQWxCLEVBQXdDO0FBQ3RDLGlCQUFPLG1CQUFQLENBQTJCLFNBQTNCLEVBQXNDLE1BQXRDOztBQUVBLGtCQUFRLEVBQUUsSUFBRixDQUFPLElBQWY7QUFDRCxTQUpELE1BSU8sSUFBSSxFQUFFLElBQUYsQ0FBTyxFQUFQLEtBQWMsd0JBQWxCLEVBQTRDO0FBQ2pELGlCQUFPLG1CQUFQLENBQTJCLFNBQTNCLEVBQXNDLE1BQXRDOztBQUVBLGtCQUFRLEtBQVIsQ0FBYyxpREFBZCxFQUFpRSxFQUFFLElBQW5FO0FBQ0EsaUJBQU8sRUFBRSxJQUFGLENBQU8sSUFBZDtBQUNEO0FBQ0YsT0FaRDtBQWFBLGFBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsTUFBbkM7QUFDQSxjQUFRLEdBQVIsQ0FBWSxrQkFBWixFQUFnQyxHQUFoQyxFQUFxQyxjQUFyQyxFQUFxRCxLQUFyRDtBQUNBLGFBQU8sYUFBUCxDQUFxQixXQUFyQixDQUFpQyxFQUFFLElBQUksZ0JBQU4sRUFBd0IsTUFBTSxFQUFFLEtBQUssR0FBUCxFQUFZLE9BQU8sS0FBbkIsRUFBOUIsRUFBakMsRUFBNkYsR0FBN0Y7QUFDRCxLQWpCTSxDQUFQO0FBbUJELEdBekNrQjs7QUEyQ25CLFNBQU8saUJBQU07QUFDWCxZQUFRLEdBQVIsQ0FBWSwwQkFBWjtBQUNBLFdBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxVQUFJLFdBQVcsU0FBWCxRQUFXLENBQUMsQ0FBRCxFQUFPO0FBQ3BCLFlBQUksRUFBRSxJQUFGLENBQU8sRUFBUCxLQUFjLHNCQUFsQixFQUEwQztBQUN4QyxpQkFBTyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxRQUF0QztBQUNBLGtCQUFRLEVBQUUsSUFBRixDQUFPLElBQWY7QUFDRDtBQUNGLE9BTEQ7QUFNQSxhQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLFFBQW5DO0FBQ0EsYUFBTyxhQUFQLENBQXFCLFdBQXJCLENBQWlDLEVBQUUsSUFBSSxZQUFOLEVBQW9CLE1BQU0sRUFBMUIsRUFBakMsRUFBa0UsR0FBbEU7QUFDRCxLQVRNLENBQVA7QUFVRCxHQXZEa0I7O0FBeURuQixTQUFPLGVBQUMsR0FBRCxFQUFTOztBQUVkLFdBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxVQUFJLFNBQVMsU0FBVCxNQUFTLENBQUMsQ0FBRCxFQUFPO0FBQ2xCLFlBQUksRUFBRSxJQUFGLENBQU8sRUFBUCxLQUFjLGtCQUFsQixFQUFzQztBQUNwQyxpQkFBTyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxNQUF0QztBQUNBLGtCQUFRLEVBQUUsSUFBRixDQUFPLElBQWY7QUFDRDtBQUNGLE9BTEQ7QUFNQSxhQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLE1BQW5DO0FBQ0EsY0FBUSxHQUFSLENBQVksb0JBQVosRUFBa0MsR0FBbEM7QUFDQSxhQUFPLGFBQVAsQ0FBcUIsV0FBckIsQ0FBaUMsRUFBRSxJQUFJLFlBQU4sRUFBb0IsTUFBTSxFQUFFLEtBQUssR0FBUCxFQUExQixFQUFqQyxFQUEyRSxHQUEzRTtBQUNELEtBVk0sQ0FBUDtBQVlELEdBdkVrQjs7QUF5RW5CLG1CQUFpQiwyQkFBTTtBQUNyQixXQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDdEMsVUFBSSxTQUFTLFNBQVQsTUFBUyxDQUFDLENBQUQsRUFBTztBQUNsQixZQUFJLEVBQUUsSUFBRixDQUFPLEVBQVAsS0FBYyxxQkFBbEIsRUFBeUM7QUFDdkMsY0FBSSxFQUFFLElBQUYsQ0FBTyxJQUFQLENBQVksTUFBWixLQUF1QixjQUEzQixFQUEyQztBQUN6QyxtQkFBTyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxNQUF0QztBQUNBLG9CQUFRLElBQVI7QUFDRDtBQUNGO0FBQ0YsT0FQRDtBQVFBLGFBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsTUFBbkM7QUFDRCxLQVZNLENBQVA7QUFXRCxHQXJGa0I7O0FBd0ZuQixvQkFBa0IsMEJBQUMsTUFBRCxFQUFZO0FBQzVCLFdBQU8sYUFBUCxDQUFxQixXQUFyQixDQUFpQyxFQUFFLElBQUksZUFBTixFQUF1QixNQUFNLEVBQUUsUUFBUSxNQUFWLEVBQTdCLEVBQWpDLEVBQW9GLEdBQXBGO0FBQ0QsR0ExRmtCOztBQTRGbkIsU0FBTyxpQkFBb0I7QUFBQSxRQUFuQixNQUFtQix1RUFBVixLQUFVOztBQUN6QixZQUFRLEdBQVIsQ0FBWSxzQkFBWixFQUFvQyxNQUFwQztBQUNBLFdBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN0QyxVQUFJLFNBQVMsU0FBVCxNQUFTLENBQUMsQ0FBRCxFQUFPO0FBQ2xCLFlBQUksRUFBRSxJQUFGLENBQU8sRUFBUCxLQUFjLHVCQUFsQixFQUEyQztBQUN6QyxpQkFBTyxtQkFBUCxDQUEyQixTQUEzQixFQUFzQyxNQUF0QztBQUNBLGtCQUFRLFFBQVEsRUFBRSxJQUFGLENBQU8sSUFBZixDQUFSO0FBQ0Q7QUFDRixPQUxEO0FBTUEsYUFBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxNQUFuQztBQUNBLGFBQU8sYUFBUCxDQUFxQixXQUFyQixDQUFpQyxFQUFFLElBQUksWUFBTixFQUFvQixNQUFNLEVBQUUsUUFBUSxNQUFWLEVBQTFCLEVBQWpDLEVBQWlGLEdBQWpGO0FBQ0QsS0FUTSxDQUFQO0FBVUQ7QUF4R2tCLENBQXJCOztBQTJHQSxJQUFJLGFBQWEsU0FBYixVQUFhLEdBQVk7QUFDM0IsU0FBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxVQUFDLENBQUQsRUFBTztBQUN4QyxRQUFJLEVBQUUsSUFBRixDQUFPLEVBQVAsS0FBYyxxQkFBbEIsRUFBeUM7O0FBRXZDLFVBQUksRUFBRSxJQUFGLENBQU8sSUFBUCxDQUFZLE1BQVosS0FBdUIsZUFBM0IsRUFBNEM7QUFDMUMsZUFBTyxLQUFQLENBQWEsS0FBYixHQUFxQixNQUFyQjtBQUNBLGVBQU8sS0FBUCxDQUFhLE1BQWIsR0FBc0IsTUFBdEI7QUFDQSxlQUFPLEtBQVAsQ0FBYSxNQUFiLEdBQXNCLEtBQXRCO0FBQ0QsT0FKRCxNQUlPO0FBQ0wsWUFBSSxFQUFFLElBQUYsQ0FBTyxJQUFQLENBQVksTUFBWixLQUF1QixlQUEzQixFQUE0QztBQUMxQyxpQkFBTyxLQUFQLENBQWEsS0FBYixHQUFxQixNQUFyQjtBQUNBLGlCQUFPLEtBQVAsQ0FBYSxNQUFiLEdBQXNCLE1BQXRCO0FBQ0EsaUJBQU8sS0FBUCxDQUFhLE1BQWIsR0FBc0IsQ0FBdEI7QUFDRDtBQUNGO0FBRUY7QUFDRixHQWhCRDtBQWlCRCxDQWxCRDs7QUFvQkE7Ozs7QUFJQSxJQUFJLGlCQUFpQjtBQUNuQixXQUFTLG1CQUFxRjtBQUFBOztBQUFBLG1GQUFKLEVBQUk7QUFBQSxRQUF6RSxNQUF5RSxRQUF6RSxNQUF5RTtBQUFBLFFBQWpFLFVBQWlFLFFBQWpFLFVBQWlFO0FBQUEsUUFBckQsV0FBcUQsUUFBckQsV0FBcUQ7QUFBQSxRQUF4QyxRQUF3QyxRQUF4QyxRQUF3QztBQUFBLFFBQTlCLFVBQThCLFFBQTlCLFVBQThCO0FBQUEsUUFBbEIsU0FBa0IsUUFBbEIsU0FBa0I7O0FBQzVGLFlBQVEsSUFBUixDQUFhLFdBQWIsRUFBMEIsTUFBMUIsRUFBa0MsVUFBbEMsRUFBOEMsV0FBOUMsRUFBMkQsUUFBM0QsRUFBcUUsVUFBckUsRUFBaUYsU0FBakY7QUFDQSxXQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDdEMsVUFBSSxVQUFVLE1BQUssV0FBTCxDQUFpQixVQUFqQixFQUE2QixNQUE3QixFQUFxQyxXQUFyQyxFQUFrRCxRQUFsRCxFQUE0RCxVQUE1RCxFQUF3RSxTQUF4RSxDQUFkO0FBQ0EsZUFBUyxvQkFBZ0IsUUFBUSxRQUF4QixnQkFBMkMsUUFBUSxNQUFuRCxpQkFBcUUsUUFBUSxHQUE3RSxxQkFBZ0csV0FBaEcsRUFBK0csS0FBL0csRUFBc0gsU0FBdEgsQ0FBVDtBQUNBLFVBQUksWUFBWSxTQUFaLFNBQVksQ0FBQyxDQUFELEVBQU87QUFDckIsWUFBSSxFQUFFLElBQUYsQ0FBTyxFQUFQLEtBQWMsbUJBQWxCLEVBQXVDO0FBQ3JDLGlCQUFPLG1CQUFQLENBQTJCLFNBQTNCLEVBQXNDLFNBQXRDO0FBQ0Esa0JBQVEsY0FBUjtBQUNEO0FBQ0YsT0FMRDtBQU1BLGFBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsU0FBbkM7QUFDQSxhQUFPLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DLFVBQUMsQ0FBRCxFQUFPO0FBQ3hDLFlBQUksRUFBRSxJQUFGLENBQU8sRUFBUCxJQUFhLEVBQUUsSUFBRixDQUFPLEVBQVAsS0FBYyw2QkFBL0IsRUFBOEQ7QUFDNUQsY0FBTSxNQUFNLG9CQUFhLFFBQVEsVUFBckIsRUFBaUMsU0FBakMsRUFBNEMsU0FBNUMsQ0FBWjtBQUNBLGNBQUksZ0JBQUosQ0FBcUIsTUFBckIsRUFBNkIsWUFBTTtBQUNqQyxnQkFBSSxhQUFKLENBQWtCLFdBQWxCLENBQThCLEVBQUUsSUFBaEMsRUFBc0MsR0FBdEMsRUFBMkMsRUFBRSxLQUE3QztBQUNELFdBRkQsRUFFRyxLQUZIO0FBR0Q7QUFDRixPQVBEO0FBUUEsMkJBQUksTUFBSixDQUFXLE1BQVg7QUFDQTtBQUNELEtBcEJNLENBQVA7QUFxQkQsR0F4QmtCOztBQTBCbkIsYUExQm1CLHVCQTBCUCxVQTFCTyxFQTBCSyxNQTFCTCxFQTBCYSxXQTFCYixFQTBCMEIsUUExQjFCLEVBMEJvQyxVQTFCcEMsRUEwQmdEO0FBQ2pFLFFBQUksV0FBSixFQUFpQjtBQUNmLG1CQUFhLGNBQWMsbUNBQW1DLE1BQW5DLEdBQTRDLDhCQUF2RTtBQUNBLGVBQVMsVUFBVSxJQUFJLGVBQUosQ0FBUSxVQUFSLEVBQW9CLElBQXBCLEVBQW5CO0FBQ0EsaUJBQVcsWUFBWSxhQUFhLE1BQWIsR0FBc0IsaUNBQTdDO0FBQ0EsbUJBQWEsY0FBYyxhQUFhLE1BQWIsR0FBc0IsbUNBQWpEO0FBQ0QsS0FMRCxNQUtPO0FBQ0wsbUJBQWEscUNBQW1DLE1BQW5DLGlDQUFiO0FBQ0EsZUFBUyxVQUFVLElBQUksZUFBSixDQUFRLFVBQVIsRUFBb0IsSUFBcEIsR0FBMkIsT0FBM0IsQ0FBbUMsWUFBbkMsRUFBaUQsRUFBakQsQ0FBbkI7QUFDQSxpQkFBVyxZQUFZLGFBQWEsTUFBYixHQUFzQixpQ0FBN0M7QUFDQSxtQkFBYSxjQUFjLGFBQWEsTUFBYixHQUFzQixtQ0FBakQ7QUFDRDs7QUFFRCxZQUFRLElBQVIsQ0FBYSxlQUFiLEVBQThCLFVBQTlCLEVBQTBDLE1BQTFDLEVBQWtELFFBQWxELEVBQTRELFVBQTVEOztBQUVBLFdBQU87QUFDTCxXQUFLLFVBREE7QUFFTCxjQUFRLE1BRkg7QUFHTCxnQkFBVSxRQUhMO0FBSUwsa0JBQVk7QUFKUCxLQUFQO0FBTUQ7QUEvQ2tCLENBQXJCOztrQkFrRGUsYzs7Ozs7Ozs7UUM5TUMsTSxHQUFBLE07QUFoQ2hCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVCQTs7OztBQUlBOzs7OztBQUtPLFNBQVMsTUFBVCxDQUFnQixHQUFoQixFQUFzRDtBQUFBLE1BQWpDLE1BQWlDLHVFQUF4QixDQUFDLEVBQXVCO0FBQUEsTUFBbkIsU0FBbUIsdUVBQVAsS0FBTzs7QUFDM0QsTUFBSSxTQUFTLFNBQVMsYUFBVCxDQUF1QixRQUF2QixDQUFiO0FBQ0EsU0FBTyxZQUFQLENBQW9CLElBQXBCLEVBQTBCLFNBQTFCO0FBQ0EsU0FBTyxLQUFQLENBQWEsUUFBYixHQUF3QixVQUF4QjtBQUNBLFNBQU8sS0FBUCxDQUFhLEdBQWIsR0FBbUIsR0FBbkI7QUFDQSxTQUFPLEtBQVAsQ0FBYSxLQUFiLEdBQXFCLEdBQXJCO0FBQ0EsU0FBTyxLQUFQLENBQWEsTUFBYixHQUFzQixHQUF0QjtBQUNBLFNBQU8sS0FBUCxDQUFhLE1BQWIsR0FBc0IsTUFBdEI7QUFDQSxTQUFPLEtBQVAsR0FBZSxNQUFmO0FBQ0EsU0FBTyxNQUFQLEdBQWdCLE1BQWhCO0FBQ0EsU0FBTyxLQUFQLEdBQWUsaUJBQWY7QUFDQSxTQUFPLFlBQVAsQ0FBb0IsVUFBcEIsRUFBZ0MsRUFBaEM7QUFDQSxTQUFPLFlBQVAsQ0FBb0IsS0FBcEIsRUFBMkIsR0FBM0I7QUFDQSxTQUFPLFlBQVAsQ0FBb0IsU0FBcEIsRUFBK0IsOEdBQS9CO0FBQ0EsU0FBTyxLQUFQLENBQWEsT0FBYixHQUF1QixPQUF2QjtBQUNBLE1BQUksYUFBYSxJQUFqQixFQUF1QjtBQUNyQixXQUFPLEtBQVAsQ0FBYSxPQUFiLEdBQXVCLE1BQXZCO0FBQ0Q7QUFDRCxXQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0IsV0FBL0IsQ0FBMkMsTUFBM0M7O0FBRUEsU0FBTyxNQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvLyB2ZXJzaW9uOiAwLjE0LjBcbi8vIGRhdGU6IFdlZCBOb3YgMDcgMjAxOCAwOToxMDo0NyBHTVQrMDAwMCAoV2VzdGVybiBFdXJvcGVhbiBTdGFuZGFyZCBUaW1lKVxuLy8gbGljZW5jZTogXG4vKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5cblxuLy8gdmVyc2lvbjogMC4xNC4wXG4vLyBkYXRlOiBXZWQgTm92IDA3IDIwMTggMDk6MTA6NDcgR01UKzAwMDAgKFdlc3Rlcm4gRXVyb3BlYW4gU3RhbmRhcmQgVGltZSlcbi8vIGxpY2VuY2U6IFxuLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuXG5cbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwibWluaWJ1c1wiLFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMubWluaWJ1cz1lKCk6dC5taW5pYnVzPWUoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obil7aWYoZVtuXSlyZXR1cm4gZVtuXS5leHBvcnRzO3ZhciByPWVbbl09e2k6bixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W25dLmNhbGwoci5leHBvcnRzLHIsci5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLHIubD0hMCxyLmV4cG9ydHN9dmFyIGU9e307cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT10LF9fd2VicGFja19yZXF1aXJlX18uYz1lLF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbih0LGUsbil7X193ZWJwYWNrX3JlcXVpcmVfXy5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpufSl9LF9fd2VicGFja19yZXF1aXJlX18ubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5kKGUsXCJhXCIsZSksZX0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9XCJcIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0xNzQpfShbZnVuY3Rpb24odCxlKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246XCIyLjUuN1wifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPW4pfSxmdW5jdGlvbih0LGUpe3ZhciBuPXQuZXhwb3J0cz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcIm51bWJlclwiPT10eXBlb2YgX19nJiYoX19nPW4pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigzMSkoXCJ3a3NcIiksbz1uKDIyKSxpPW4oMSkuU3ltYm9sLHU9XCJmdW5jdGlvblwiPT10eXBlb2YgaTsodC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByW3RdfHwoclt0XT11JiZpW3RdfHwodT9pOm8pKFwiU3ltYm9sLlwiK3QpKX0pLnN0b3JlPXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITAsZS5kZWZhdWx0PWZ1bmN0aW9uKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlLl9fZXNNb2R1bGU9ITA7dmFyIHI9big2NCksbz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHIpO2UuZGVmYXVsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksKDAsby5kZWZhdWx0KSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24odCxlLG4pe3JldHVybiBlJiZkZWZpbmVQcm9wZXJ0aWVzKHQucHJvdG90eXBlLGUpLG4mJmRlZmluZVByb3BlcnRpZXModCxuKSx0fX0oKX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMSksbz1uKDApLGk9bigxNyksdT1uKDExKSxzPW4oMTApLGM9ZnVuY3Rpb24odCxlLG4pe3ZhciBmLGEsbCxwPXQmYy5GLHY9dCZjLkcsZD10JmMuUyxoPXQmYy5QLHk9dCZjLkIsXz10JmMuVyxiPXY/bzpvW2VdfHwob1tlXT17fSksZz1iLnByb3RvdHlwZSxtPXY/cjpkP3JbZV06KHJbZV18fHt9KS5wcm90b3R5cGU7diYmKG49ZSk7Zm9yKGYgaW4gbikoYT0hcCYmbSYmdm9pZCAwIT09bVtmXSkmJnMoYixmKXx8KGw9YT9tW2ZdOm5bZl0sYltmXT12JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBtW2ZdP25bZl06eSYmYT9pKGwscik6XyYmbVtmXT09bD9mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbihlLG4scil7aWYodGhpcyBpbnN0YW5jZW9mIHQpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyB0O2Nhc2UgMTpyZXR1cm4gbmV3IHQoZSk7Y2FzZSAyOnJldHVybiBuZXcgdChlLG4pfXJldHVybiBuZXcgdChlLG4scil9cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gZS5wcm90b3R5cGU9dC5wcm90b3R5cGUsZX0obCk6aCYmXCJmdW5jdGlvblwiPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxoJiYoKGIudmlydHVhbHx8KGIudmlydHVhbD17fSkpW2ZdPWwsdCZjLlImJmcmJiFnW2ZdJiZ1KGcsZixsKSkpfTtjLkY9MSxjLkc9MixjLlM9NCxjLlA9OCxjLkI9MTYsYy5XPTMyLGMuVT02NCxjLlI9MTI4LHQuZXhwb3J0cz1jfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoIXIodCkpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGFuIG9iamVjdCFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPSFuKDEzKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNiksbz1uKDQzKSxpPW4oMjkpLHU9T2JqZWN0LmRlZmluZVByb3BlcnR5O2UuZj1uKDcpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbih0LGUsbil7aWYocih0KSxlPWkoZSwhMCkscihuKSxvKXRyeXtyZXR1cm4gdSh0LGUsbil9Y2F0Y2godCl7fWlmKFwiZ2V0XCJpbiBufHxcInNldFwiaW4gbil0aHJvdyBUeXBlRXJyb3IoXCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCFcIik7cmV0dXJuXCJ2YWx1ZVwiaW4gbiYmKHRbZV09bi52YWx1ZSksdH19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0P251bGwhPT10OlwiZnVuY3Rpb25cIj09dHlwZW9mIHR9fSxmdW5jdGlvbih0LGUpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBuLmNhbGwodCxlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDgpLG89bigyMSk7dC5leHBvcnRzPW4oNyk/ZnVuY3Rpb24odCxlLG4pe3JldHVybiByLmYodCxlLG8oMSxuKSl9OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdFtlXT1uLHR9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big2Miksbz1uKDI1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHIobyh0KSl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuISF0KCl9Y2F0Y2godCl7cmV0dXJuITB9fX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDcxKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ITB9LGZ1bmN0aW9uKHQsZSl7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCkuc2xpY2UoOCwtMSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyMCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtpZihyKHQpLHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG4pe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIHQuY2FsbChlLG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNDQpLG89bigzMik7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LG8pfX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTplfX19LGZ1bmN0aW9uKHQsZSl7dmFyIG49MCxyPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVyblwiU3ltYm9sKFwiLmNvbmNhdCh2b2lkIDA9PT10P1wiXCI6dCxcIilfXCIsKCsrbityKS50b1N0cmluZygzNikpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOCkuZixvPW4oMTApLGk9bigyKShcInRvU3RyaW5nVGFnXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dCYmIW8odD1uP3Q6dC5wcm90b3R5cGUsaSkmJnIodCxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6ZX0pfX0sZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLmNlaWwscj1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP3I6bikodCl9fSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK3QpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDEwMyksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSl7ZS5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big5KSxvPW4oMSkuZG9jdW1lbnQsaT1yKG8pJiZyKG8uY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpP28uY3JlYXRlRWxlbWVudCh0KTp7fX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDkpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKCFyKHQpKXJldHVybiB0O3ZhciBuLG87aWYoZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC52YWx1ZU9mKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO2lmKCFlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudG9TdHJpbmcpJiYhcihvPW4uY2FsbCh0KSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMzEpKFwia2V5c1wiKSxvPW4oMjIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gclt0XXx8KHJbdF09byh0KSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigwKSxvPW4oMSksaT1vW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHwob1tcIl9fY29yZS1qc19zaGFyZWRfX1wiXT17fSk7KHQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBpW3RdfHwoaVt0XT12b2lkIDAhPT1lP2U6e30pfSkoXCJ2ZXJzaW9uc1wiLFtdKS5wdXNoKHt2ZXJzaW9uOnIudmVyc2lvbixtb2RlOm4oMTUpP1wicHVyZVwiOlwiZ2xvYmFsXCIsY29weXJpZ2h0OlwiwqkgMjAxOCBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KVwifSl9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVwiY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mXCIuc3BsaXQoXCIsXCIpfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Qocih0KSl9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZS5fX2VzTW9kdWxlPSEwO3ZhciByPW4oNjApLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fShyKTtlLmRlZmF1bHQ9ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOigwLG8uZGVmYXVsdCkoZSkpJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1lLl9fZXNNb2R1bGU9ITA7dmFyIHI9bigxMDUpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oMTA5KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1uKDYwKSxjPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyk7ZS5kZWZhdWx0PWZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrKHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjooMCxjLmRlZmF1bHQpKGUpKSk7dC5wcm90b3R5cGU9KDAsdS5kZWZhdWx0KShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKG8uZGVmYXVsdD8oMCxvLmRlZmF1bHQpKHQsZSk6dC5fX3Byb3RvX189ZSl9fSwsZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KHQpe3ZhciBlLG47dGhpcy5wcm9taXNlPW5ldyB0KGZ1bmN0aW9uKHQscil7aWYodm9pZCAwIT09ZXx8dm9pZCAwIT09bil0aHJvdyBUeXBlRXJyb3IoXCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvclwiKTtlPXQsbj1yfSksdGhpcy5yZXNvbHZlPXIoZSksdGhpcy5yZWplY3Q9cihuKX12YXIgcj1uKDIwKTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KHQpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByLG87IWZ1bmN0aW9uKGksdSl7XCJ1c2Ugc3RyaWN0XCI7cj11LHZvaWQgMCE9PShvPVwiZnVuY3Rpb25cIj09dHlwZW9mIHI/ci5jYWxsKGUsbixlLHQpOnIpJiYodC5leHBvcnRzPW8pfSgwLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYmluZE1ldGhvZCh0LGUpe3ZhciBuPXRbZV07aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5iaW5kKXJldHVybiBuLmJpbmQodCk7dHJ5e3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKG4sdCl9Y2F0Y2goZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5hcHBseShuLFt0LGFyZ3VtZW50c10pfX19ZnVuY3Rpb24gcmVhbE1ldGhvZChuKXtyZXR1cm5cImRlYnVnXCI9PT1uJiYobj1cImxvZ1wiKSx0eXBlb2YgY29uc29sZSE9PWUmJih2b2lkIDAhPT1jb25zb2xlW25dP2JpbmRNZXRob2QoY29uc29sZSxuKTp2b2lkIDAhPT1jb25zb2xlLmxvZz9iaW5kTWV0aG9kKGNvbnNvbGUsXCJsb2dcIik6dCl9ZnVuY3Rpb24gcmVwbGFjZUxvZ2dpbmdNZXRob2RzKGUscil7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBpPW5bb107dGhpc1tpXT1vPGU/dDp0aGlzLm1ldGhvZEZhY3RvcnkoaSxlLHIpfXRoaXMubG9nPXRoaXMuZGVidWd9ZnVuY3Rpb24gZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlcyh0LG4scil7cmV0dXJuIGZ1bmN0aW9uKCl7dHlwZW9mIGNvbnNvbGUhPT1lJiYocmVwbGFjZUxvZ2dpbmdNZXRob2RzLmNhbGwodGhpcyxuLHIpLHRoaXNbdF0uYXBwbHkodGhpcyxhcmd1bWVudHMpKX19ZnVuY3Rpb24gZGVmYXVsdE1ldGhvZEZhY3RvcnkodCxlLG4pe3JldHVybiByZWFsTWV0aG9kKHQpfHxlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBMb2dnZXIodCxyLG8pe2Z1bmN0aW9uIHBlcnNpc3RMZXZlbElmUG9zc2libGUodCl7dmFyIHI9KG5bdF18fFwic2lsZW50XCIpLnRvVXBwZXJDYXNlKCk7aWYodHlwZW9mIHdpbmRvdyE9PWUpe3RyeXtyZXR1cm4gdm9pZCh3aW5kb3cubG9jYWxTdG9yYWdlW3NdPXIpfWNhdGNoKHQpe310cnl7d2luZG93LmRvY3VtZW50LmNvb2tpZT1lbmNvZGVVUklDb21wb25lbnQocykrXCI9XCIrcitcIjtcIn1jYXRjaCh0KXt9fX1mdW5jdGlvbiBnZXRQZXJzaXN0ZWRMZXZlbCgpe3ZhciB0O2lmKHR5cGVvZiB3aW5kb3chPT1lKXt0cnl7dD13aW5kb3cubG9jYWxTdG9yYWdlW3NdfWNhdGNoKHQpe31pZih0eXBlb2YgdD09PWUpdHJ5e3ZhciBuPXdpbmRvdy5kb2N1bWVudC5jb29raWUscj1uLmluZGV4T2YoZW5jb2RlVVJJQ29tcG9uZW50KHMpK1wiPVwiKTstMSE9PXImJih0PS9eKFteO10rKS8uZXhlYyhuLnNsaWNlKHIpKVsxXSl9Y2F0Y2godCl7fXJldHVybiB2b2lkIDA9PT11LmxldmVsc1t0XSYmKHQ9dm9pZCAwKSx0fX12YXIgaSx1PXRoaXMscz1cImxvZ2xldmVsXCI7dCYmKHMrPVwiOlwiK3QpLHUubmFtZT10LHUubGV2ZWxzPXtUUkFDRTowLERFQlVHOjEsSU5GTzoyLFdBUk46MyxFUlJPUjo0LFNJTEVOVDo1fSx1Lm1ldGhvZEZhY3Rvcnk9b3x8ZGVmYXVsdE1ldGhvZEZhY3RvcnksdS5nZXRMZXZlbD1mdW5jdGlvbigpe3JldHVybiBpfSx1LnNldExldmVsPWZ1bmN0aW9uKG4scil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4mJnZvaWQgMCE9PXUubGV2ZWxzW24udG9VcHBlckNhc2UoKV0mJihuPXUubGV2ZWxzW24udG9VcHBlckNhc2UoKV0pLCEoXCJudW1iZXJcIj09dHlwZW9mIG4mJm4+PTAmJm48PXUubGV2ZWxzLlNJTEVOVCkpdGhyb3dcImxvZy5zZXRMZXZlbCgpIGNhbGxlZCB3aXRoIGludmFsaWQgbGV2ZWw6IFwiK247aWYoaT1uLCExIT09ciYmcGVyc2lzdExldmVsSWZQb3NzaWJsZShuKSxyZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh1LG4sdCksdHlwZW9mIGNvbnNvbGU9PT1lJiZuPHUubGV2ZWxzLlNJTEVOVClyZXR1cm5cIk5vIGNvbnNvbGUgYXZhaWxhYmxlIGZvciBsb2dnaW5nXCJ9LHUuc2V0RGVmYXVsdExldmVsPWZ1bmN0aW9uKHQpe2dldFBlcnNpc3RlZExldmVsKCl8fHUuc2V0TGV2ZWwodCwhMSl9LHUuZW5hYmxlQWxsPWZ1bmN0aW9uKHQpe3Uuc2V0TGV2ZWwodS5sZXZlbHMuVFJBQ0UsdCl9LHUuZGlzYWJsZUFsbD1mdW5jdGlvbih0KXt1LnNldExldmVsKHUubGV2ZWxzLlNJTEVOVCx0KX07dmFyIGM9Z2V0UGVyc2lzdGVkTGV2ZWwoKTtudWxsPT1jJiYoYz1udWxsPT1yP1wiV0FSTlwiOnIpLHUuc2V0TGV2ZWwoYywhMSl9dmFyIHQ9ZnVuY3Rpb24oKXt9LGU9XCJ1bmRlZmluZWRcIixuPVtcInRyYWNlXCIsXCJkZWJ1Z1wiLFwiaW5mb1wiLFwid2FyblwiLFwiZXJyb3JcIl0scj1uZXcgTG9nZ2VyLG89e307ci5nZXRMb2dnZXI9ZnVuY3Rpb24odCl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHR8fFwiXCI9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBzdXBwbHkgYSBuYW1lIHdoZW4gY3JlYXRpbmcgYSBsb2dnZXIuXCIpO3ZhciBlPW9bdF07cmV0dXJuIGV8fChlPW9bdF09bmV3IExvZ2dlcih0LHIuZ2V0TGV2ZWwoKSxyLm1ldGhvZEZhY3RvcnkpKSxlfTt2YXIgaT10eXBlb2Ygd2luZG93IT09ZT93aW5kb3cubG9nOnZvaWQgMDtyZXR1cm4gci5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3chPT1lJiZ3aW5kb3cubG9nPT09ciYmKHdpbmRvdy5sb2c9aSkscn0sci5nZXRMb2dnZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIG99LHJ9KX0sZnVuY3Rpb24odCxlLG4pe2UuZj1uKDIpfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxKSxvPW4oMCksaT1uKDE1KSx1PW4oMzkpLHM9big4KS5mO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZT1vLlN5bWJvbHx8KG8uU3ltYm9sPWk/e306ci5TeW1ib2x8fHt9KTtcIl9cIj09dC5jaGFyQXQoMCl8fHQgaW4gZXx8cyhlLHQse3ZhbHVlOnUuZih0KX0pfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNiksbz1uKDc0KSxpPW4oMzIpLHU9bigzMCkoXCJJRV9QUk9UT1wiKSxzPWZ1bmN0aW9uKCl7fSxjPWZ1bmN0aW9uKCl7dmFyIHQsZT1uKDI4KShcImlmcmFtZVwiKSxyPWkubGVuZ3RoO2ZvcihlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbig1NSkuYXBwZW5kQ2hpbGQoZSksZS5zcmM9XCJqYXZhc2NyaXB0OlwiLHQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50LHQub3BlbigpLHQud3JpdGUoXCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFxcL3NjcmlwdD5cIiksdC5jbG9zZSgpLGM9dC5GO3ItLTspZGVsZXRlIGMucHJvdG90eXBlW2lbcl1dO3JldHVybiBjKCl9O3QuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiBudWxsIT09dD8ocy5wcm90b3R5cGU9cih0KSxuPW5ldyBzLHMucHJvdG90eXBlPW51bGwsblt1XT10KTpuPWMoKSx2b2lkIDA9PT1lP246byhuLGUpfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oNzIpKCEwKTtuKDUzKShTdHJpbmcsXCJTdHJpbmdcIixmdW5jdGlvbih0KXt0aGlzLl90PVN0cmluZyh0KSx0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLl90LG49dGhpcy5faTtyZXR1cm4gbj49ZS5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfToodD1yKGUsbiksdGhpcy5faSs9dC5sZW5ndGgse3ZhbHVlOnQsZG9uZTohMX0pfSl9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9IW4oNykmJiFuKDEzKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkobigyOCkoXCJkaXZcIiksXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTApLG89bigxMiksaT1uKDY2KSghMSksdT1uKDMwKShcIklFX1BST1RPXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuLHM9byh0KSxjPTAsZj1bXTtmb3IobiBpbiBzKW4hPXUmJnIocyxuKSYmZi5wdXNoKG4pO2Zvcig7ZS5sZW5ndGg+YzspcihzLG49ZVtjKytdKSYmKH5pKGYsbil8fGYucHVzaChuKSk7cmV0dXJuIGZ9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyNCksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9vKHIodCksOTAwNzE5OTI1NDc0MDk5MSk6MH19LGZ1bmN0aW9uKHQsZSxuKXtuKDc1KTtmb3IodmFyIHI9bigxKSxvPW4oMTEpLGk9bigxOCksdT1uKDIpKFwidG9TdHJpbmdUYWdcIikscz1cIkNTU1J1bGVMaXN0LENTU1N0eWxlRGVjbGFyYXRpb24sQ1NTVmFsdWVMaXN0LENsaWVudFJlY3RMaXN0LERPTVJlY3RMaXN0LERPTVN0cmluZ0xpc3QsRE9NVG9rZW5MaXN0LERhdGFUcmFuc2Zlckl0ZW1MaXN0LEZpbGVMaXN0LEhUTUxBbGxDb2xsZWN0aW9uLEhUTUxDb2xsZWN0aW9uLEhUTUxGb3JtRWxlbWVudCxIVE1MU2VsZWN0RWxlbWVudCxNZWRpYUxpc3QsTWltZVR5cGVBcnJheSxOYW1lZE5vZGVNYXAsTm9kZUxpc3QsUGFpbnRSZXF1ZXN0TGlzdCxQbHVnaW4sUGx1Z2luQXJyYXksU1ZHTGVuZ3RoTGlzdCxTVkdOdW1iZXJMaXN0LFNWR1BhdGhTZWdMaXN0LFNWR1BvaW50TGlzdCxTVkdTdHJpbmdMaXN0LFNWR1RyYW5zZm9ybUxpc3QsU291cmNlQnVmZmVyTGlzdCxTdHlsZVNoZWV0TGlzdCxUZXh0VHJhY2tDdWVMaXN0LFRleHRUcmFja0xpc3QsVG91Y2hMaXN0XCIuc3BsaXQoXCIsXCIpLGM9MDtjPHMubGVuZ3RoO2MrKyl7dmFyIGY9c1tjXSxhPXJbZl0sbD1hJiZhLnByb3RvdHlwZTtsJiYhbFt1XSYmbyhsLHUsZiksaVtmXT1pLkFycmF5fX0sZnVuY3Rpb24odCxlKXtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sLGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDE2KSxvPW4oMikoXCJ0b1N0cmluZ1RhZ1wiKSxpPVwiQXJndW1lbnRzXCI9PXIoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSx1PWZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybiB0W2VdfWNhdGNoKHQpe319O3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZSxuLHM7cmV0dXJuIHZvaWQgMD09PXQ/XCJVbmRlZmluZWRcIjpudWxsPT09dD9cIk51bGxcIjpcInN0cmluZ1wiPT10eXBlb2Yobj11KGU9T2JqZWN0KHQpLG8pKT9uOmk/cihlKTpcIk9iamVjdFwiPT0ocz1yKGUpKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5jYWxsZWU/XCJBcmd1bWVudHNcIjpzfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNSksbz1uKDApLGk9bigxMyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG49KG8uT2JqZWN0fHx7fSlbdF18fE9iamVjdFt0XSx1PXt9O3VbdF09ZShuKSxyKHIuUytyLkYqaShmdW5jdGlvbigpe24oMSl9KSxcIk9iamVjdFwiLHUpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjcpLG89bigyMSksaT1uKDEyKSx1PW4oMjkpLHM9bigxMCksYz1uKDQzKSxmPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7ZS5mPW4oNyk/ZjpmdW5jdGlvbih0LGUpe2lmKHQ9aSh0KSxlPXUoZSwhMCksYyl0cnl7cmV0dXJuIGYodCxlKX1jYXRjaCh0KXt9aWYocyh0LGUpKXJldHVybiBvKCFyLmYuY2FsbCh0LGUpLHRbZV0pfX0sZnVuY3Rpb24odCxlKXt9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDE1KSxvPW4oNSksaT1uKDU0KSx1PW4oMTEpLHM9bigxOCksYz1uKDczKSxmPW4oMjMpLGE9big2MyksbD1uKDIpKFwiaXRlcmF0b3JcIikscD0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLHY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGQsaCx5LF8pe2MobixlLGQpO3ZhciBiLGcsbSx3PWZ1bmN0aW9uKHQpe2lmKCFwJiZ0IGluIFApcmV0dXJuIFBbdF07c3dpdGNoKHQpe2Nhc2VcImtleXNcIjpjYXNlXCJ2YWx1ZXNcIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fSx4PWUrXCIgSXRlcmF0b3JcIixPPVwidmFsdWVzXCI9PWgsTT0hMSxQPXQucHJvdG90eXBlLFM9UFtsXXx8UFtcIkBAaXRlcmF0b3JcIl18fGgmJlBbaF0sTD1TfHx3KGgpLGo9aD9PP3coXCJlbnRyaWVzXCIpOkw6dm9pZCAwLGs9XCJBcnJheVwiPT1lP1AuZW50cmllc3x8UzpTO2lmKGsmJihtPWEoay5jYWxsKG5ldyB0KSkpIT09T2JqZWN0LnByb3RvdHlwZSYmbS5uZXh0JiYoZihtLHgsITApLHJ8fFwiZnVuY3Rpb25cIj09dHlwZW9mIG1bbF18fHUobSxsLHYpKSxPJiZTJiZcInZhbHVlc1wiIT09Uy5uYW1lJiYoTT0hMCxMPWZ1bmN0aW9uKCl7cmV0dXJuIFMuY2FsbCh0aGlzKX0pLHImJiFffHwhcCYmIU0mJlBbbF18fHUoUCxsLEwpLHNbZV09TCxzW3hdPXYsaClpZihiPXt2YWx1ZXM6Tz9MOncoXCJ2YWx1ZXNcIiksa2V5czp5P0w6dyhcImtleXNcIiksZW50cmllczpqfSxfKWZvcihnIGluIGIpZyBpbiBQfHxpKFAsZyxiW2ddKTtlbHNlIG8oby5QK28uRioocHx8TSksZSxiKTtyZXR1cm4gYn19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigxMSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEpLmRvY3VtZW50O3QuZXhwb3J0cz1yJiZyLmRvY3VtZW50RWxlbWVudH0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNiksbz1uKDIwKSxpPW4oMikoXCJzcGVjaWVzXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuLHU9cih0KS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09dXx8dm9pZCAwPT0obj1yKHUpW2ldKT9lOm8obil9fSxmdW5jdGlvbih0LGUsbil7dmFyIHIsbyxpLHU9bigxNykscz1uKDgzKSxjPW4oNTUpLGY9bigyOCksYT1uKDEpLGw9YS5wcm9jZXNzLHA9YS5zZXRJbW1lZGlhdGUsdj1hLmNsZWFySW1tZWRpYXRlLGQ9YS5NZXNzYWdlQ2hhbm5lbCxoPWEuRGlzcGF0Y2gseT0wLF89e30sYj1mdW5jdGlvbigpe3ZhciB0PSt0aGlzO2lmKF8uaGFzT3duUHJvcGVydHkodCkpe3ZhciBlPV9bdF07ZGVsZXRlIF9bdF0sZSgpfX0sZz1mdW5jdGlvbih0KXtiLmNhbGwodC5kYXRhKX07cCYmdnx8KHA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MTthcmd1bWVudHMubGVuZ3RoPm47KWUucHVzaChhcmd1bWVudHNbbisrXSk7cmV0dXJuIF9bKyt5XT1mdW5jdGlvbigpe3MoXCJmdW5jdGlvblwiPT10eXBlb2YgdD90OkZ1bmN0aW9uKHQpLGUpfSxyKHkpLHl9LHY9ZnVuY3Rpb24odCl7ZGVsZXRlIF9bdF19LFwicHJvY2Vzc1wiPT1uKDE2KShsKT9yPWZ1bmN0aW9uKHQpe2wubmV4dFRpY2sodShiLHQsMSkpfTpoJiZoLm5vdz9yPWZ1bmN0aW9uKHQpe2gubm93KHUoYix0LDEpKX06ZD8obz1uZXcgZCxpPW8ucG9ydDIsby5wb3J0MS5vbm1lc3NhZ2U9ZyxyPXUoaS5wb3N0TWVzc2FnZSxpLDEpKTphLmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhYS5pbXBvcnRTY3JpcHRzPyhyPWZ1bmN0aW9uKHQpe2EucG9zdE1lc3NhZ2UodCtcIlwiLFwiKlwiKX0sYS5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGcsITEpKTpyPVwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBmKFwic2NyaXB0XCIpP2Z1bmN0aW9uKHQpe2MuYXBwZW5kQ2hpbGQoZihcInNjcmlwdFwiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7Yy5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwodCl9fTpmdW5jdGlvbih0KXtzZXRUaW1lb3V0KHUoYix0LDEpLDApfSksdC5leHBvcnRzPXtzZXQ6cCxjbGVhcjp2fX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybntlOiExLHY6dCgpfX1jYXRjaCh0KXtyZXR1cm57ZTohMCx2OnR9fX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDYpLG89big5KSxpPW4oMzcpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKHIodCksbyhlKSYmZS5jb25zdHJ1Y3Rvcj09PXQpcmV0dXJuIGU7dmFyIG49aS5mKHQpO3JldHVybigwLG4ucmVzb2x2ZSkoZSksbi5wcm9taXNlfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWUuX19lc01vZHVsZT0hMDt2YXIgcj1uKDkxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQociksaT1uKDkzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1cImZ1bmN0aW9uXCI9PXR5cGVvZiB1LmRlZmF1bHQmJlwic3ltYm9sXCI9PXR5cGVvZiBvLmRlZmF1bHQ/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdS5kZWZhdWx0JiZ0LmNvbnN0cnVjdG9yPT09dS5kZWZhdWx0JiZ0IT09dS5kZWZhdWx0LnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fTtlLmRlZmF1bHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgdS5kZWZhdWx0JiZcInN5bWJvbFwiPT09cyhvLmRlZmF1bHQpP2Z1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6cyh0KX06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHUuZGVmYXVsdCYmdC5jb25zdHJ1Y3Rvcj09PXUuZGVmYXVsdCYmdCE9PXUuZGVmYXVsdC5wcm90b3R5cGU/XCJzeW1ib2xcIjp2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6cyh0KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDQ0KSxvPW4oMzIpLmNvbmNhdChcImxlbmd0aFwiLFwicHJvdG90eXBlXCIpO2UuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24odCl7cmV0dXJuIHIodCxvKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDE2KTt0LmV4cG9ydHM9T2JqZWN0KFwielwiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuXCJTdHJpbmdcIj09cih0KT90LnNwbGl0KFwiXCIpOk9iamVjdCh0KX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEwKSxvPW4oMzMpLGk9bigzMCkoXCJJRV9QUk9UT1wiKSx1PU9iamVjdC5wcm90b3R5cGU7dC5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQ9byh0KSxyKHQsaSk/dFtpXTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNvbnN0cnVjdG9yJiZ0IGluc3RhbmNlb2YgdC5jb25zdHJ1Y3Rvcj90LmNvbnN0cnVjdG9yLnByb3RvdHlwZTp0IGluc3RhbmNlb2YgT2JqZWN0P3U6bnVsbH19LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9e2RlZmF1bHQ6big2OCksX19lc01vZHVsZTohMH19LCxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxMiksbz1uKDQ1KSxpPW4oNjcpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHUpe3ZhciBzLGM9cihlKSxmPW8oYy5sZW5ndGgpLGE9aSh1LGYpO2lmKHQmJm4hPW4pe2Zvcig7Zj5hOylpZigocz1jW2ErK10pIT1zKXJldHVybiEwfWVsc2UgZm9yKDtmPmE7YSsrKWlmKCh0fHxhIGluIGMpJiZjW2FdPT09bilyZXR1cm4gdHx8YXx8MDtyZXR1cm4hdCYmLTF9fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjQpLG89TWF0aC5tYXgsaT1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD1yKHQpLHQ8MD9vKHQrZSwwKTppKHQsZSl9fSxmdW5jdGlvbih0LGUsbil7big2OSk7dmFyIHI9bigwKS5PYmplY3Q7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gci5kZWZpbmVQcm9wZXJ0eSh0LGUsbil9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big1KTtyKHIuUytyLkYqIW4oNyksXCJPYmplY3RcIix7ZGVmaW5lUHJvcGVydHk6big4KS5mfSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDQ5KSxvPW4oMikoXCJpdGVyYXRvclwiKSxpPW4oMTgpO3QuZXhwb3J0cz1uKDApLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9dClyZXR1cm4gdFtvXXx8dFtcIkBAaXRlcmF0b3JcIl18fGlbcih0KV19fSxmdW5jdGlvbih0LGUsbil7big1Miksbig0Miksbig0Niksbig3OCksbig4OSksbig5MCksdC5leHBvcnRzPW4oMCkuUHJvbWlzZX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjQpLG89bigyNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpLHUscz1TdHJpbmcobyhlKSksYz1yKG4pLGY9cy5sZW5ndGg7cmV0dXJuIGM8MHx8Yz49Zj90P1wiXCI6dm9pZCAwOihpPXMuY2hhckNvZGVBdChjKSxpPDU1Mjk2fHxpPjU2MzE5fHxjKzE9PT1mfHwodT1zLmNoYXJDb2RlQXQoYysxKSk8NTYzMjB8fHU+NTczNDM/dD9zLmNoYXJBdChjKTppOnQ/cy5zbGljZShjLGMrMik6dS01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2KX19fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big0MSksbz1uKDIxKSxpPW4oMjMpLHU9e307bigxMSkodSxuKDIpKFwiaXRlcmF0b3JcIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dC5wcm90b3R5cGU9cih1LHtuZXh0Om8oMSxuKX0pLGkodCxlK1wiIEl0ZXJhdG9yXCIpfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oOCksbz1uKDYpLGk9bigxOSk7dC5leHBvcnRzPW4oNyk/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24odCxlKXtvKHQpO2Zvcih2YXIgbix1PWkoZSkscz11Lmxlbmd0aCxjPTA7cz5jOylyLmYodCxuPXVbYysrXSxlW25dKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDc2KSxvPW4oNzcpLGk9bigxOCksdT1uKDEyKTt0LmV4cG9ydHM9big1MykoQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKHQsZSl7dGhpcy5fdD11KHQpLHRoaXMuX2k9MCx0aGlzLl9rPWV9LGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdCxlPXRoaXMuX2ssbj10aGlzLl9pKys7cmV0dXJuIXR8fG4+PXQubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKTpcImtleXNcIj09ZT9vKDAsbik6XCJ2YWx1ZXNcIj09ZT9vKDAsdFtuXSk6bygwLFtuLHRbbl1dKX0sXCJ2YWx1ZXNcIiksaS5Bcmd1bWVudHM9aS5BcnJheSxyKFwia2V5c1wiKSxyKFwidmFsdWVzXCIpLHIoXCJlbnRyaWVzXCIpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbigpe319LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue3ZhbHVlOmUsZG9uZTohIXR9fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByLG8saSx1LHM9bigxNSksYz1uKDEpLGY9bigxNyksYT1uKDQ5KSxsPW4oNSkscD1uKDkpLHY9bigyMCksZD1uKDc5KSxoPW4oODApLHk9big1NiksXz1uKDU3KS5zZXQsYj1uKDg0KSgpLGc9bigzNyksbT1uKDU4KSx3PW4oODUpLHg9big1OSksTz1jLlR5cGVFcnJvcixNPWMucHJvY2VzcyxQPU0mJk0udmVyc2lvbnMsUz1QJiZQLnY4fHxcIlwiLEw9Yy5Qcm9taXNlLGo9XCJwcm9jZXNzXCI9PWEoTSksaz1mdW5jdGlvbigpe30sRT1vPWcuZixSPSEhZnVuY3Rpb24oKXt0cnl7dmFyIHQ9TC5yZXNvbHZlKDEpLGU9KHQuY29uc3RydWN0b3I9e30pW24oMikoXCJzcGVjaWVzXCIpXT1mdW5jdGlvbih0KXt0KGssayl9O3JldHVybihqfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZ0LnRoZW4oaylpbnN0YW5jZW9mIGUmJjAhPT1TLmluZGV4T2YoXCI2LjZcIikmJi0xPT09dy5pbmRleE9mKFwiQ2hyb21lLzY2XCIpfWNhdGNoKHQpe319KCksVD1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4hKCFwKHQpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZihlPXQudGhlbikpJiZlfSxDPWZ1bmN0aW9uKHQsZSl7aWYoIXQuX24pe3QuX249ITA7dmFyIG49dC5fYztiKGZ1bmN0aW9uKCl7Zm9yKHZhciByPXQuX3Ysbz0xPT10Ll9zLGk9MDtuLmxlbmd0aD5pOykhZnVuY3Rpb24oZSl7dmFyIG4saSx1LHM9bz9lLm9rOmUuZmFpbCxjPWUucmVzb2x2ZSxmPWUucmVqZWN0LGE9ZS5kb21haW47dHJ5e3M/KG98fCgyPT10Ll9oJiZGKHQpLHQuX2g9MSksITA9PT1zP249cjooYSYmYS5lbnRlcigpLG49cyhyKSxhJiYoYS5leGl0KCksdT0hMCkpLG49PT1lLnByb21pc2U/ZihPKFwiUHJvbWlzZS1jaGFpbiBjeWNsZVwiKSk6KGk9VChuKSk/aS5jYWxsKG4sYyxmKTpjKG4pKTpmKHIpfWNhdGNoKHQpe2EmJiF1JiZhLmV4aXQoKSxmKHQpfX0obltpKytdKTt0Ll9jPVtdLHQuX249ITEsZSYmIXQuX2gmJkEodCl9KX19LEE9ZnVuY3Rpb24odCl7Xy5jYWxsKGMsZnVuY3Rpb24oKXt2YXIgZSxuLHIsbz10Ll92LGk9RCh0KTtpZihpJiYoZT1tKGZ1bmN0aW9uKCl7aj9NLmVtaXQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixvLHQpOihuPWMub251bmhhbmRsZWRyZWplY3Rpb24pP24oe3Byb21pc2U6dCxyZWFzb246b30pOihyPWMuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoXCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25cIixvKX0pLHQuX2g9anx8RCh0KT8yOjEpLHQuX2E9dm9pZCAwLGkmJmUuZSl0aHJvdyBlLnZ9KX0sRD1mdW5jdGlvbih0KXtyZXR1cm4gMSE9PXQuX2gmJjA9PT0odC5fYXx8dC5fYykubGVuZ3RofSxGPWZ1bmN0aW9uKHQpe18uY2FsbChjLGZ1bmN0aW9uKCl7dmFyIGU7aj9NLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsdCk6KGU9Yy5vbnJlamVjdGlvbmhhbmRsZWQpJiZlKHtwcm9taXNlOnQscmVhc29uOnQuX3Z9KX0pfSxxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7ZS5fZHx8KGUuX2Q9ITAsZT1lLl93fHxlLGUuX3Y9dCxlLl9zPTIsZS5fYXx8KGUuX2E9ZS5fYy5zbGljZSgpKSxDKGUsITApKX0sST1mdW5jdGlvbih0KXt2YXIgZSxuPXRoaXM7aWYoIW4uX2Qpe24uX2Q9ITAsbj1uLl93fHxuO3RyeXtpZihuPT09dCl0aHJvdyBPKFwiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGZcIik7KGU9VCh0KSk/YihmdW5jdGlvbigpe3ZhciByPXtfdzpuLF9kOiExfTt0cnl7ZS5jYWxsKHQsZihJLHIsMSksZihxLHIsMSkpfWNhdGNoKHQpe3EuY2FsbChyLHQpfX0pOihuLl92PXQsbi5fcz0xLEMobiwhMSkpfWNhdGNoKHQpe3EuY2FsbCh7X3c6bixfZDohMX0sdCl9fX07Unx8KEw9ZnVuY3Rpb24odCl7ZCh0aGlzLEwsXCJQcm9taXNlXCIsXCJfaFwiKSx2KHQpLHIuY2FsbCh0aGlzKTt0cnl7dChmKEksdGhpcywxKSxmKHEsdGhpcywxKSl9Y2F0Y2godCl7cS5jYWxsKHRoaXMsdCl9fSxyPWZ1bmN0aW9uKHQpe3RoaXMuX2M9W10sdGhpcy5fYT12b2lkIDAsdGhpcy5fcz0wLHRoaXMuX2Q9ITEsdGhpcy5fdj12b2lkIDAsdGhpcy5faD0wLHRoaXMuX249ITF9LHIucHJvdG90eXBlPW4oODYpKEwucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKHQsZSl7dmFyIG49RSh5KHRoaXMsTCkpO3JldHVybiBuLm9rPVwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fHQsbi5mYWlsPVwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUsbi5kb21haW49aj9NLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKG4pLHRoaXMuX2EmJnRoaXMuX2EucHVzaChuKSx0aGlzLl9zJiZDKHRoaXMsITEpLG4ucHJvbWlzZX0sY2F0Y2g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsdCl9fSksaT1mdW5jdGlvbigpe3ZhciB0PW5ldyByO3RoaXMucHJvbWlzZT10LHRoaXMucmVzb2x2ZT1mKEksdCwxKSx0aGlzLnJlamVjdD1mKHEsdCwxKX0sZy5mPUU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1MfHx0PT09dT9uZXcgaSh0KTpvKHQpfSksbChsLkcrbC5XK2wuRiohUix7UHJvbWlzZTpMfSksbigyMykoTCxcIlByb21pc2VcIiksbig4NykoXCJQcm9taXNlXCIpLHU9bigwKS5Qcm9taXNlLGwobC5TK2wuRiohUixcIlByb21pc2VcIix7cmVqZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPUUodGhpcyk7cmV0dXJuKDAsZS5yZWplY3QpKHQpLGUucHJvbWlzZX19KSxsKGwuUytsLkYqKHN8fCFSKSxcIlByb21pc2VcIix7cmVzb2x2ZTpmdW5jdGlvbih0KXtyZXR1cm4geChzJiZ0aGlzPT09dT9MOnRoaXMsdCl9fSksbChsLlMrbC5GKiEoUiYmbig4OCkoZnVuY3Rpb24odCl7TC5hbGwodCkuY2F0Y2goayl9KSksXCJQcm9taXNlXCIse2FsbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49RShlKSxyPW4ucmVzb2x2ZSxvPW4ucmVqZWN0LGk9bShmdW5jdGlvbigpe3ZhciBuPVtdLGk9MCx1PTE7aCh0LCExLGZ1bmN0aW9uKHQpe3ZhciBzPWkrKyxjPSExO24ucHVzaCh2b2lkIDApLHUrKyxlLnJlc29sdmUodCkudGhlbihmdW5jdGlvbih0KXtjfHwoYz0hMCxuW3NdPXQsLS11fHxyKG4pKX0sbyl9KSwtLXV8fHIobil9KTtyZXR1cm4gaS5lJiZvKGkudiksbi5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1FKGUpLHI9bi5yZWplY3Qsbz1tKGZ1bmN0aW9uKCl7aCh0LCExLGZ1bmN0aW9uKHQpe2UucmVzb2x2ZSh0KS50aGVuKG4ucmVzb2x2ZSxyKX0pfSk7cmV0dXJuIG8uZSYmcihvLnYpLG4ucHJvbWlzZX19KX0sZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4scil7aWYoISh0IGluc3RhbmNlb2YgZSl8fHZvaWQgMCE9PXImJnIgaW4gdCl0aHJvdyBUeXBlRXJyb3IobitcIjogaW5jb3JyZWN0IGludm9jYXRpb24hXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTcpLG89big4MSksaT1uKDgyKSx1PW4oNikscz1uKDQ1KSxjPW4oNzApLGY9e30sYT17fSxlPXQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixsLHApe3ZhciB2LGQsaCx5LF89cD9mdW5jdGlvbigpe3JldHVybiB0fTpjKHQpLGI9cihuLGwsZT8yOjEpLGc9MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBfKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7aWYoaShfKSl7Zm9yKHY9cyh0Lmxlbmd0aCk7dj5nO2crKylpZigoeT1lP2IodShkPXRbZ10pWzBdLGRbMV0pOmIodFtnXSkpPT09Znx8eT09PWEpcmV0dXJuIHl9ZWxzZSBmb3IoaD1fLmNhbGwodCk7IShkPWgubmV4dCgpKS5kb25lOylpZigoeT1vKGgsYixkLnZhbHVlLGUpKT09PWZ8fHk9PT1hKXJldHVybiB5fTtlLkJSRUFLPWYsZS5SRVRVUk49YX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLG8pe3RyeXtyZXR1cm4gbz9lKHIobilbMF0sblsxXSk6ZShuKX1jYXRjaChlKXt2YXIgaT10LnJldHVybjt0aHJvdyB2b2lkIDAhPT1pJiZyKGkuY2FsbCh0KSksZX19fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxOCksbz1uKDIpKFwiaXRlcmF0b3JcIiksaT1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiYoci5BcnJheT09PXR8fGlbb109PT10KX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj12b2lkIDA9PT1uO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOnJldHVybiByP3QoKTp0LmNhbGwobik7Y2FzZSAxOnJldHVybiByP3QoZVswXSk6dC5jYWxsKG4sZVswXSk7Y2FzZSAyOnJldHVybiByP3QoZVswXSxlWzFdKTp0LmNhbGwobixlWzBdLGVbMV0pO2Nhc2UgMzpyZXR1cm4gcj90KGVbMF0sZVsxXSxlWzJdKTp0LmNhbGwobixlWzBdLGVbMV0sZVsyXSk7Y2FzZSA0OnJldHVybiByP3QoZVswXSxlWzFdLGVbMl0sZVszXSk6dC5jYWxsKG4sZVswXSxlWzFdLGVbMl0sZVszXSl9cmV0dXJuIHQuYXBwbHkobixlKX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEpLG89big1Nykuc2V0LGk9ci5NdXRhdGlvbk9ic2VydmVyfHxyLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsdT1yLnByb2Nlc3Mscz1yLlByb21pc2UsYz1cInByb2Nlc3NcIj09bigxNikodSk7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQsZSxuLGY9ZnVuY3Rpb24oKXt2YXIgcixvO2ZvcihjJiYocj11LmRvbWFpbikmJnIuZXhpdCgpO3Q7KXtvPXQuZm4sdD10Lm5leHQ7dHJ5e28oKX1jYXRjaChyKXt0aHJvdyB0P24oKTplPXZvaWQgMCxyfX1lPXZvaWQgMCxyJiZyLmVudGVyKCl9O2lmKGMpbj1mdW5jdGlvbigpe3UubmV4dFRpY2soZil9O2Vsc2UgaWYoIWl8fHIubmF2aWdhdG9yJiZyLm5hdmlnYXRvci5zdGFuZGFsb25lKWlmKHMmJnMucmVzb2x2ZSl7dmFyIGE9cy5yZXNvbHZlKHZvaWQgMCk7bj1mdW5jdGlvbigpe2EudGhlbihmKX19ZWxzZSBuPWZ1bmN0aW9uKCl7by5jYWxsKHIsZil9O2Vsc2V7dmFyIGw9ITAscD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtuZXcgaShmKS5vYnNlcnZlKHAse2NoYXJhY3RlckRhdGE6ITB9KSxuPWZ1bmN0aW9uKCl7cC5kYXRhPWw9IWx9fXJldHVybiBmdW5jdGlvbihyKXt2YXIgbz17Zm46cixuZXh0OnZvaWQgMH07ZSYmKGUubmV4dD1vKSx0fHwodD1vLG4oKSksZT1vfX19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKDEpLG89ci5uYXZpZ2F0b3I7dC5leHBvcnRzPW8mJm8udXNlckFnZW50fHxcIlwifSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxMSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIG8gaW4gZSluJiZ0W29dP3Rbb109ZVtvXTpyKHQsbyxlW29dKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDEpLG89bigwKSxpPW4oOCksdT1uKDcpLHM9bigyKShcInNwZWNpZXNcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPVwiZnVuY3Rpb25cIj09dHlwZW9mIG9bdF0/b1t0XTpyW3RdO3UmJmUmJiFlW3NdJiZpLmYoZSxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigyKShcIml0ZXJhdG9yXCIpLG89ITE7dHJ5e3ZhciBpPVs3XVtyXSgpO2kucmV0dXJuPWZ1bmN0aW9uKCl7bz0hMH0sQXJyYXkuZnJvbShpLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHQpe310LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtpZighZSYmIW8pcmV0dXJuITE7dmFyIG49ITE7dHJ5e3ZhciBpPVs3XSx1PWlbcl0oKTt1Lm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpuPSEwfX0saVtyXT1mdW5jdGlvbigpe3JldHVybiB1fSx0KGkpfWNhdGNoKHQpe31yZXR1cm4gbn19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1uKDUpLG89bigwKSxpPW4oMSksdT1uKDU2KSxzPW4oNTkpO3Ioci5QK3IuUixcIlByb21pc2VcIix7ZmluYWxseTpmdW5jdGlvbih0KXt2YXIgZT11KHRoaXMsby5Qcm9taXNlfHxpLlByb21pc2UpLG49XCJmdW5jdGlvblwiPT10eXBlb2YgdDtyZXR1cm4gdGhpcy50aGVuKG4/ZnVuY3Rpb24obil7cmV0dXJuIHMoZSx0KCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbn0pfTp0LG4/ZnVuY3Rpb24obil7cmV0dXJuIHMoZSx0KCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyBufSl9OnQpfX0pfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9big1KSxvPW4oMzcpLGk9big1OCk7cihyLlMsXCJQcm9taXNlXCIse3RyeTpmdW5jdGlvbih0KXt2YXIgZT1vLmYodGhpcyksbj1pKHQpO3JldHVybihuLmU/ZS5yZWplY3Q6ZS5yZXNvbHZlKShuLnYpLGUucHJvbWlzZX19KX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDkyKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24odCxlLG4pe24oNDIpLG4oNDYpLHQuZXhwb3J0cz1uKDM5KS5mKFwiaXRlcmF0b3JcIil9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9e2RlZmF1bHQ6big5NCksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSxuKXtuKDk1KSxuKDUyKSxuKDEwMCksbigxMDEpLHQuZXhwb3J0cz1uKDApLlN5bWJvbH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciByPW4oMSksbz1uKDEwKSxpPW4oNyksdT1uKDUpLHM9big1NCksYz1uKDk2KS5LRVksZj1uKDEzKSxhPW4oMzEpLGw9bigyMykscD1uKDIyKSx2PW4oMiksZD1uKDM5KSxoPW4oNDApLHk9big5NyksXz1uKDk4KSxiPW4oNiksZz1uKDkpLG09bigxMiksdz1uKDI5KSx4PW4oMjEpLE89big0MSksTT1uKDk5KSxQPW4oNTEpLFM9big4KSxMPW4oMTkpLGo9UC5mLGs9Uy5mLEU9TS5mLFI9ci5TeW1ib2wsVD1yLkpTT04sQz1UJiZULnN0cmluZ2lmeSxBPXYoXCJfaGlkZGVuXCIpLEQ9dihcInRvUHJpbWl0aXZlXCIpLEY9e30ucHJvcGVydHlJc0VudW1lcmFibGUscT1hKFwic3ltYm9sLXJlZ2lzdHJ5XCIpLEk9YShcInN5bWJvbHNcIiksTj1hKFwib3Atc3ltYm9sc1wiKSxCPU9iamVjdC5wcm90b3R5cGUsVz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBSLEc9ci5RT2JqZWN0LFU9IUd8fCFHLnByb3RvdHlwZXx8IUcucHJvdG90eXBlLmZpbmRDaGlsZCxWPWkmJmYoZnVuY3Rpb24oKXtyZXR1cm4gNyE9TyhrKHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gayh0aGlzLFwiYVwiLHt2YWx1ZTo3fSkuYX19KSkuYX0pP2Z1bmN0aW9uKHQsZSxuKXt2YXIgcj1qKEIsZSk7ciYmZGVsZXRlIEJbZV0sayh0LGUsbiksciYmdCE9PUImJmsoQixlLHIpfTprLEg9ZnVuY3Rpb24odCl7dmFyIGU9SVt0XT1PKFIucHJvdG90eXBlKTtyZXR1cm4gZS5faz10LGV9LEs9VyYmXCJzeW1ib2xcIj09dHlwZW9mIFIuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgUn0sSj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ9PT1CJiZKKE4sZSxuKSxiKHQpLGU9dyhlLCEwKSxiKG4pLG8oSSxlKT8obi5lbnVtZXJhYmxlPyhvKHQsQSkmJnRbQV1bZV0mJih0W0FdW2VdPSExKSxuPU8obix7ZW51bWVyYWJsZTp4KDAsITEpfSkpOihvKHQsQSl8fGsodCxBLHgoMSx7fSkpLHRbQV1bZV09ITApLFYodCxlLG4pKTprKHQsZSxuKX0sej1mdW5jdGlvbih0LGUpe2IodCk7Zm9yKHZhciBuLHI9eShlPW0oZSkpLG89MCxpPXIubGVuZ3RoO2k+bzspSih0LG49cltvKytdLGVbbl0pO3JldHVybiB0fSxZPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWU/Tyh0KTp6KE8odCksZSl9LFE9ZnVuY3Rpb24odCl7dmFyIGU9Ri5jYWxsKHRoaXMsdD13KHQsITApKTtyZXR1cm4hKHRoaXM9PT1CJiZvKEksdCkmJiFvKE4sdCkpJiYoIShlfHwhbyh0aGlzLHQpfHwhbyhJLHQpfHxvKHRoaXMsQSkmJnRoaXNbQV1bdF0pfHxlKX0sWD1mdW5jdGlvbih0LGUpe2lmKHQ9bSh0KSxlPXcoZSwhMCksdCE9PUJ8fCFvKEksZSl8fG8oTixlKSl7dmFyIG49aih0LGUpO3JldHVybiFufHwhbyhJLGUpfHxvKHQsQSkmJnRbQV1bZV18fChuLmVudW1lcmFibGU9ITApLG59fSxaPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPUUobSh0KSkscj1bXSxpPTA7bi5sZW5ndGg+aTspbyhJLGU9bltpKytdKXx8ZT09QXx8ZT09Y3x8ci5wdXNoKGUpO3JldHVybiByfSwkPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXQ9PT1CLHI9RShuP046bSh0KSksaT1bXSx1PTA7ci5sZW5ndGg+dTspIW8oSSxlPXJbdSsrXSl8fG4mJiFvKEIsZSl8fGkucHVzaChJW2VdKTtyZXR1cm4gaX07V3x8KFI9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgUil0aHJvdyBUeXBlRXJyb3IoXCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhXCIpO3ZhciB0PXAoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApLGU9ZnVuY3Rpb24obil7dGhpcz09PUImJmUuY2FsbChOLG4pLG8odGhpcyxBKSYmbyh0aGlzW0FdLHQpJiYodGhpc1tBXVt0XT0hMSksVih0aGlzLHQseCgxLG4pKX07cmV0dXJuIGkmJlUmJlYoQix0LHtjb25maWd1cmFibGU6ITAsc2V0OmV9KSxIKHQpfSxzKFIucHJvdG90eXBlLFwidG9TdHJpbmdcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksUC5mPVgsUy5mPUosbig2MSkuZj1NLmY9WixuKDI3KS5mPVEsbig0NykuZj0kLGkmJiFuKDE1KSYmcyhCLFwicHJvcGVydHlJc0VudW1lcmFibGVcIixRLCEwKSxkLmY9ZnVuY3Rpb24odCl7cmV0dXJuIEgodih0KSl9KSx1KHUuRyt1LlcrdS5GKiFXLHtTeW1ib2w6Un0pO2Zvcih2YXIgdHQ9XCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlc1wiLnNwbGl0KFwiLFwiKSxldD0wO3R0Lmxlbmd0aD5ldDspdih0dFtldCsrXSk7Zm9yKHZhciBudD1MKHYuc3RvcmUpLHJ0PTA7bnQubGVuZ3RoPnJ0OyloKG50W3J0KytdKTt1KHUuUyt1LkYqIVcsXCJTeW1ib2xcIix7Zm9yOmZ1bmN0aW9uKHQpe3JldHVybiBvKHEsdCs9XCJcIik/cVt0XTpxW3RdPVIodCl9LGtleUZvcjpmdW5jdGlvbih0KXtpZighSyh0KSl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBzeW1ib2whXCIpO2Zvcih2YXIgZSBpbiBxKWlmKHFbZV09PT10KXJldHVybiBlfSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtVPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtVPSExfX0pLHUodS5TK3UuRiohVyxcIk9iamVjdFwiLHtjcmVhdGU6WSxkZWZpbmVQcm9wZXJ0eTpKLGRlZmluZVByb3BlcnRpZXM6eixnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6WCxnZXRPd25Qcm9wZXJ0eU5hbWVzOlosZ2V0T3duUHJvcGVydHlTeW1ib2xzOiR9KSxUJiZ1KHUuUyt1LkYqKCFXfHxmKGZ1bmN0aW9uKCl7dmFyIHQ9UigpO3JldHVyblwiW251bGxdXCIhPUMoW3RdKXx8XCJ7fVwiIT1DKHthOnR9KXx8XCJ7fVwiIT1DKE9iamVjdCh0KSl9KSksXCJKU09OXCIse3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGUsbixyPVt0XSxvPTE7YXJndW1lbnRzLmxlbmd0aD5vOylyLnB1c2goYXJndW1lbnRzW28rK10pO2lmKG49ZT1yWzFdLChnKGUpfHx2b2lkIDAhPT10KSYmIUsodCkpcmV0dXJuIF8oZSl8fChlPWZ1bmN0aW9uKHQsZSl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKGU9bi5jYWxsKHRoaXMsdCxlKSksIUsoZSkpcmV0dXJuIGV9KSxyWzFdPWUsQy5hcHBseShULHIpfX0pLFIucHJvdG90eXBlW0RdfHxuKDExKShSLnByb3RvdHlwZSxELFIucHJvdG90eXBlLnZhbHVlT2YpLGwoUixcIlN5bWJvbFwiKSxsKE1hdGgsXCJNYXRoXCIsITApLGwoci5KU09OLFwiSlNPTlwiLCEwKX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMjIpKFwibWV0YVwiKSxvPW4oOSksaT1uKDEwKSx1PW4oOCkuZixzPTAsYz1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxmPSFuKDEzKShmdW5jdGlvbigpe3JldHVybiBjKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpfSksYT1mdW5jdGlvbih0KXt1KHQscix7dmFsdWU6e2k6XCJPXCIrICsrcyx3Ont9fX0pfSxsPWZ1bmN0aW9uKHQsZSl7aWYoIW8odCkpcmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHQ/dDooXCJzdHJpbmdcIj09dHlwZW9mIHQ/XCJTXCI6XCJQXCIpK3Q7aWYoIWkodCxyKSl7aWYoIWModCkpcmV0dXJuXCJGXCI7aWYoIWUpcmV0dXJuXCJFXCI7YSh0KX1yZXR1cm4gdFtyXS5pfSxwPWZ1bmN0aW9uKHQsZSl7aWYoIWkodCxyKSl7aWYoIWModCkpcmV0dXJuITA7aWYoIWUpcmV0dXJuITE7YSh0KX1yZXR1cm4gdFtyXS53fSx2PWZ1bmN0aW9uKHQpe3JldHVybiBmJiZkLk5FRUQmJmModCkmJiFpKHQscikmJmEodCksdH0sZD10LmV4cG9ydHM9e0tFWTpyLE5FRUQ6ITEsZmFzdEtleTpsLGdldFdlYWs6cCxvbkZyZWV6ZTp2fX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTkpLG89big0NyksaT1uKDI3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9cih0KSxuPW8uZjtpZihuKWZvcih2YXIgdSxzPW4odCksYz1pLmYsZj0wO3MubGVuZ3RoPmY7KWMuY2FsbCh0LHU9c1tmKytdKSYmZS5wdXNoKHUpO3JldHVybiBlfX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTYpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIkFycmF5XCI9PXIodCl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigxMiksbz1uKDYxKS5mLGk9e30udG9TdHJpbmcsdT1cIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10scz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIG8odCl9Y2F0Y2godCl7cmV0dXJuIHUuc2xpY2UoKX19O3QuZXhwb3J0cy5mPWZ1bmN0aW9uKHQpe3JldHVybiB1JiZcIltvYmplY3QgV2luZG93XVwiPT1pLmNhbGwodCk/cyh0KTpvKHIodCkpfX0sZnVuY3Rpb24odCxlLG4pe24oNDApKFwiYXN5bmNJdGVyYXRvclwiKX0sZnVuY3Rpb24odCxlLG4pe24oNDApKFwib2JzZXJ2YWJsZVwiKX0sLGZ1bmN0aW9uKHQsZSxuKXtuKDEwNCksdC5leHBvcnRzPW4oMCkuT2JqZWN0LmdldFByb3RvdHlwZU9mfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9bigzMyksbz1uKDYzKTtuKDUwKShcImdldFByb3RvdHlwZU9mXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG8ocih0KSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9e2RlZmF1bHQ6bigxMDYpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbih0LGUsbil7bigxMDcpLHQuZXhwb3J0cz1uKDApLk9iamVjdC5zZXRQcm90b3R5cGVPZn0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oNSk7cihyLlMsXCJPYmplY3RcIix7c2V0UHJvdG90eXBlT2Y6bigxMDgpLnNldH0pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big5KSxvPW4oNiksaT1mdW5jdGlvbih0LGUpe2lmKG8odCksIXIoZSkmJm51bGwhPT1lKXRocm93IFR5cGVFcnJvcihlK1wiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlIVwiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoXCJfX3Byb3RvX19cImlue30/ZnVuY3Rpb24odCxlLHIpe3RyeXtyPW4oMTcpKEZ1bmN0aW9uLmNhbGwsbig1MSkuZihPYmplY3QucHJvdG90eXBlLFwiX19wcm90b19fXCIpLnNldCwyKSxyKHQsW10pLGU9ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKHQpe2U9ITB9cmV0dXJuIGZ1bmN0aW9uKHQsbil7cmV0dXJuIGkodCxuKSxlP3QuX19wcm90b19fPW46cih0LG4pLHR9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazppfX0sZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz17ZGVmYXVsdDpuKDExMCksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKHQsZSxuKXtuKDExMSk7dmFyIHI9bigwKS5PYmplY3Q7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIuY3JlYXRlKHQsZSl9fSxmdW5jdGlvbih0LGUsbil7dmFyIHI9big1KTtyKHIuUyxcIk9iamVjdFwiLHtjcmVhdGU6big0MSl9KX0sLCwsLCwsLCwsLCwsLCxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigyNiksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHIpLGk9bigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1uKDQpLGM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxmPW4oMzQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChmKSxsPW4oMzUpLHA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSx2PW4oMTI3KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksaD1mdW5jdGlvbih0KXtmdW5jdGlvbiBNaW5pQnVzKCl7cmV0dXJuKDAsdS5kZWZhdWx0KSh0aGlzLE1pbmlCdXMpLCgwLGEuZGVmYXVsdCkodGhpcywoTWluaUJ1cy5fX3Byb3RvX198fCgwLG8uZGVmYXVsdCkoTWluaUJ1cykpLmNhbGwodGhpcykpfXJldHVybigwLHAuZGVmYXVsdCkoTWluaUJ1cyx0KSwoMCxjLmRlZmF1bHQpKE1pbmlCdXMsW3trZXk6XCJwb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3JldHVybiByLl9nZW5JZCh0KSxyLl9yZXNwb25zZUNhbGxiYWNrKHQsZSxuKSxyLl9vblBvc3RNZXNzYWdlKHQpLHQuaWR9fSx7a2V5OlwiX29uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoIWUuX29uUmVzcG9uc2UodCkpe3ZhciBuPWUuX3N1YnNjcmlwdGlvbnNbdC50b107bj8oZS5fcHVibGlzaE9uKG4sdCksdC50by5zdGFydHNXaXRoKFwiaHlwZXJ0eVwiKXx8ZS5fcHVibGlzaE9uRGVmYXVsdCh0KSk6ZS5fcHVibGlzaE9uRGVmYXVsdCh0KX19fV0pLE1pbmlCdXN9KGQuZGVmYXVsdCk7ZS5kZWZhdWx0PWgsdC5leHBvcnRzPWUuZGVmYXVsdH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMTQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChyKSxpPW4oMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9big0KSxjPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksZj1uKDM4KSxhPWZ1bmN0aW9uKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX0oZiksbD1hLmdldExvZ2dlcihcIkJ1c1wiKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQnVzKCl7KDAsdS5kZWZhdWx0KSh0aGlzLEJ1cyk7dmFyIHQ9dGhpczt0Ll9tc2dJZD0wLHQuX3N1YnNjcmlwdGlvbnM9e30sdC5fcmVzcG9uc2VUaW1lT3V0PTE1ZTMsdC5fcmVzcG9uc2VDYWxsYmFja3M9e30sdC5fcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyKCl9cmV0dXJuKDAsYy5kZWZhdWx0KShCdXMsW3trZXk6XCJhZGRMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPW5ldyB2KG4uX3N1YnNjcmlwdGlvbnMsdCxlKSxvPW4uX3N1YnNjcmlwdGlvbnNbdF07cmV0dXJuIG98fChvPVtdLG4uX3N1YnNjcmlwdGlvbnNbdF09byksby5wdXNoKHIpLHJ9fSx7a2V5OlwiYWRkUmVzcG9uc2VMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1t0K2VdPW59fSx7a2V5OlwicmVtb3ZlUmVzcG9uc2VMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZGVsZXRlIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW3QrZV19fSx7a2V5OlwicmVtb3ZlQWxsTGlzdGVuZXJzT2ZcIix2YWx1ZTpmdW5jdGlvbih0KXtkZWxldGUgdGhpcy5fc3Vic2NyaXB0aW9uc1t0XX19LHtrZXk6XCJiaW5kXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMsbz10aGlzO3JldHVybnt0aGlzTGlzdGVuZXI6by5hZGRMaXN0ZW5lcih0LGZ1bmN0aW9uKHQpe24ucG9zdE1lc3NhZ2UodCl9KSx0YXJnZXRMaXN0ZW5lcjpuLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24odCl7by5wb3N0TWVzc2FnZSh0KX0pLHVuYmluZDpmdW5jdGlvbigpe3IudGhpc0xpc3RlbmVyLnJlbW92ZSgpLHIudGFyZ2V0TGlzdGVuZXIucmVtb3ZlKCl9fX19LHtrZXk6XCJfcHVibGlzaE9uRGVmYXVsdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3N1YnNjcmlwdGlvbnNbXCIqXCJdO2UmJnRoaXMuX3B1Ymxpc2hPbihlLHQpfX0se2tleTpcIl9wdWJsaXNoT25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0Ll9jYWxsYmFjayhlKX0pfX0se2tleTpcIl9yZXNwb25zZUNhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLHI9dGhpcztpZihlKXt2YXIgbz10LmZyb20rdC5pZDtyLl9yZXNwb25zZUNhbGxiYWNrc1tvXT1lLG4mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1yLl9yZXNwb25zZUNhbGxiYWNrc1tvXTtpZihkZWxldGUgci5fcmVzcG9uc2VDYWxsYmFja3Nbb10sZSl7ZSh7aWQ6dC5pZCx0eXBlOlwicmVzcG9uc2VcIixib2R5Ontjb2RlOjQwOCxkZXNjOlwiUmVzcG9uc2UgdGltZW91dCFcIix2YWx1ZTp0fX0pfX0sci5fcmVzcG9uc2VUaW1lT3V0KX19fSx7a2V5OlwiX29uUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKFwicmVzcG9uc2VcIj09PXQudHlwZSl7dmFyIG49dC50byt0LmlkLHI9ZS5fcmVzcG9uc2VDYWxsYmFja3Nbbl07aWYodC5ib2R5LmNvZGU+PTIwMCYmZGVsZXRlIGUuX3Jlc3BvbnNlQ2FsbGJhY2tzW25dLHIpcmV0dXJuIHIodCksITB9cmV0dXJuITF9fSx7a2V5OlwiX29uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoIWUuX29uUmVzcG9uc2UodCkpe3ZhciBuPWUuX3N1YnNjcmlwdGlvbnNbdC50b107bj9lLl9wdWJsaXNoT24obix0KTplLl9wdWJsaXNoT25EZWZhdWx0KHQpfX19LHtrZXk6XCJfZ2VuSWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmlkJiYwIT09dC5pZHx8KHRoaXMuX21zZ0lkKyssdC5pZD10aGlzLl9tc2dJZCl9fSx7a2V5OlwicG9zdE1lc3NhZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe319LHtrZXk6XCJwb3N0TWVzc2FnZVdpdGhSZXRyaWVzXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMsaT0wLHU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLG8pe3IucG9zdE1lc3NhZ2UodCxmdW5jdGlvbihyKXs0MDg9PT1yLmJvZHkuY29kZXx8NTAwPT09ci5ib2R5LmNvZGU/bygpOihsLmluZm8oXCJbQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXNdIG1zZyBkZWxpdmVyZWQ6IFwiLHQpLG4ociksZSgpKX0pfSl9OyFmdW5jdGlvbiB0cnlBZ2Fpbigpe3UoKS50aGVuKGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe2lmKGwud2FybihcIltCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllc10gTWVzc2FnZSBCb3VuY2VkIChyZXRyeSBcIitpK1wiKTogJ1wiLHQpLCEoaSsrPGUpKXt2YXIgbj1cIltFcnJvcl0gTWVzc2FnZSBCb3VuY2VkIChkZWxpdmVyeSBhdHRlbXB0cyBcIitlK1wiKTogJ1wiO3Rocm93IG5ldyBFcnJvcihuK3QpfXRyeUFnYWluKCl9KX0oKX19LHtrZXk6XCJfb25Qb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe319LHtrZXk6XCJfcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fV0pLEJ1c30oKSx2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gTXNnTGlzdGVuZXIodCxlLG4peygwLHUuZGVmYXVsdCkodGhpcyxNc2dMaXN0ZW5lcik7dmFyIHI9dGhpcztyLl9zdWJzY3JpcHRpb25zPXQsci5fdXJsPWUsci5fY2FsbGJhY2s9bn1yZXR1cm4oMCxjLmRlZmF1bHQpKE1zZ0xpc3RlbmVyLFt7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC5fc3Vic2NyaXB0aW9uc1t0Ll91cmxdO2lmKGUpe3ZhciBuPWUuaW5kZXhPZih0KTtlLnNwbGljZShuLDEpLDA9PT1lLmxlbmd0aCYmZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbdC5fdXJsXX19fSx7a2V5OlwidXJsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19XSksTXNnTGlzdGVuZXJ9KCk7ZS5kZWZhdWx0PXAsdC5leHBvcnRzPWUuZGVmYXVsdH0sLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDEyNiksbz1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19KHIpO2UuZGVmYXVsdD1vLmRlZmF1bHQsdC5leHBvcnRzPWUuZGVmYXVsdH1dKX0pOyIsIi8vIHZlcnNpb246IDAuMTQuMFxuLy8gZGF0ZTogV2VkIE5vdiAwNyAyMDE4IDA5OjEwOjQ3IEdNVCswMDAwIChXZXN0ZXJuIEV1cm9wZWFuIFN0YW5kYXJkIFRpbWUpXG4vLyBsaWNlbmNlOiBcbi8qKlxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxuKlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKi9cblxuXG4vLyB2ZXJzaW9uOiAwLjE0LjBcbi8vIGRhdGU6IFdlZCBOb3YgMDcgMjAxOCAwOToxMDo0NyBHTVQrMDAwMCAoV2VzdGVybiBFdXJvcGVhbiBTdGFuZGFyZCBUaW1lKVxuLy8gbGljZW5jZTogXG4vKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5cblxuIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJzYW5kYm94XCIsW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5zYW5kYm94PXQoKTplLnNhbmRib3g9dCgpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhyKXtpZih0W3JdKXJldHVybiB0W3JdLmV4cG9ydHM7dmFyIG49dFtyXT17aTpyLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbcl0uY2FsbChuLmV4cG9ydHMsbixuLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyksbi5sPSEwLG4uZXhwb3J0c312YXIgdD17fTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPWUsX193ZWJwYWNrX3JlcXVpcmVfXy5jPXQsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGUsdCxyKXtfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0OnJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQodCxcImFcIix0KSx0fSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LF9fd2VicGFja19yZXF1aXJlX18ucD1cIlwiLF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTE1NCl9KFtmdW5jdGlvbihlLHQpe3ZhciByPWUuZXhwb3J0cz17dmVyc2lvbjpcIjIuNS43XCJ9O1wibnVtYmVyXCI9PXR5cGVvZiBfX2UmJihfX2U9cil9LGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1wibnVtYmVyXCI9PXR5cGVvZiBfX2cmJihfX2c9cil9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDMxKShcIndrc1wiKSxvPXIoMjIpLGk9cigxKS5TeW1ib2wsYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpOyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWEmJmlbZV18fChhP2k6bykoXCJTeW1ib2wuXCIrZSkpfSkuc3RvcmU9bn0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuX19lc01vZHVsZT0hMCx0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3QuX19lc01vZHVsZT0hMDt2YXIgbj1yKDY0KSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxvLmRlZmF1bHQpKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHQscil7cmV0dXJuIHQmJmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksciYmZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9fSgpfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxKSxvPXIoMCksaT1yKDE3KSxhPXIoMTEpLHM9cigxMCksdT1mdW5jdGlvbihlLHQscil7dmFyIGMsbCxkLGY9ZSZ1LkYscD1lJnUuRyx5PWUmdS5TLHY9ZSZ1LlAsaD1lJnUuQixfPWUmdS5XLGI9cD9vOm9bdF18fChvW3RdPXt9KSxtPWIucHJvdG90eXBlLGc9cD9uOnk/blt0XTooblt0XXx8e30pLnByb3RvdHlwZTtwJiYocj10KTtmb3IoYyBpbiByKShsPSFmJiZnJiZ2b2lkIDAhPT1nW2NdKSYmcyhiLGMpfHwoZD1sP2dbY106cltjXSxiW2NdPXAmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGdbY10/cltjXTpoJiZsP2koZCxuKTpfJiZnW2NdPT1kP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQscixuKXtpZih0aGlzIGluc3RhbmNlb2YgZSl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IGU7Y2FzZSAxOnJldHVybiBuZXcgZSh0KTtjYXNlIDI6cmV0dXJuIG5ldyBlKHQscil9cmV0dXJuIG5ldyBlKHQscixuKX1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiB0LnByb3RvdHlwZT1lLnByb3RvdHlwZSx0fShkKTp2JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBkP2koRnVuY3Rpb24uY2FsbCxkKTpkLHYmJigoYi52aXJ0dWFsfHwoYi52aXJ0dWFsPXt9KSlbY109ZCxlJnUuUiYmbSYmIW1bY10mJmEobSxjLGQpKSl9O3UuRj0xLHUuRz0yLHUuUz00LHUuUD04LHUuQj0xNix1Llc9MzIsdS5VPTY0LHUuUj0xMjgsZS5leHBvcnRzPXV9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBUeXBlRXJyb3IoZStcIiBpcyBub3QgYW4gb2JqZWN0IVwiKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig2KSxvPXIoNDMpLGk9cigyOSksYT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dC5mPXIoNyk/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHQ9aSh0LCEwKSxuKHIpLG8pdHJ5e3JldHVybiBhKGUsdCxyKX1jYXRjaChlKXt9aWYoXCJnZXRcImluIHJ8fFwic2V0XCJpbiByKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGU/bnVsbCE9PWU6XCJmdW5jdGlvblwiPT10eXBlb2YgZX19LGZ1bmN0aW9uKGUsdCl7dmFyIHI9e30uaGFzT3duUHJvcGVydHk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuY2FsbChlLHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOCksbz1yKDIxKTtlLmV4cG9ydHM9cig3KT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYyKSxvPXIoMjUpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihvKGUpKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaChlKXtyZXR1cm4hMH19fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNzEpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz0hMH0sZnVuY3Rpb24oZSx0KXt2YXIgcj17fS50b1N0cmluZztlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuY2FsbChlKS5zbGljZSg4LC0xKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIwKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPXt9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig0NCksbz1yKDMyKTtlLmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsbyl9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBhIGZ1bmN0aW9uIVwiKTtyZXR1cm4gZX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0sZnVuY3Rpb24oZSx0KXt2YXIgcj0wLG49TWF0aC5yYW5kb20oKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuXCJTeW1ib2woXCIuY29uY2F0KHZvaWQgMD09PWU/XCJcIjplLFwiKV9cIiwoKytyK24pLnRvU3RyaW5nKDM2KSl9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig4KS5mLG89cigxMCksaT1yKDIpKFwidG9TdHJpbmdUYWdcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhbyhlPXI/ZTplLnByb3RvdHlwZSxpKSYmbihlLGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSxmdW5jdGlvbihlLHQpe3ZhciByPU1hdGguY2VpbCxuPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bjpyKShlKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIrZSk7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTAzKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0KXt0LmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpLG89cigxKS5kb2N1bWVudCxpPW4obykmJm4oby5jcmVhdGVFbGVtZW50KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGk/by5jcmVhdGVFbGVtZW50KGUpOnt9fX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIW4oZSkpcmV0dXJuIGU7dmFyIHIsbztpZih0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoXCJmdW5jdGlvblwiPT10eXBlb2Yocj1lLnZhbHVlT2YpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoIXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKG89ci5jYWxsKGUpKSlyZXR1cm4gbzt0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIil9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigzMSkoXCJrZXlzXCIpLG89cigyMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1vKGUpKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigxKSxpPW9bXCJfX2NvcmUtanNfc2hhcmVkX19cIl18fChvW1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdPXt9KTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGlbZV18fChpW2VdPXZvaWQgMCE9PXQ/dDp7fSl9KShcInZlcnNpb25zXCIsW10pLnB1c2goe3ZlcnNpb246bi52ZXJzaW9uLG1vZGU6cigxNSk/XCJwdXJlXCI6XCJnbG9iYWxcIixjb3B5cmlnaHQ6XCLCqSAyMDE4IERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpXCJ9KX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9XCJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2ZcIi5zcGxpdChcIixcIil9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt0Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig2MCksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hdHx8XCJvYmplY3RcIiE9PSh2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6KDAsby5kZWZhdWx0KSh0KSkmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQ/ZTp0fX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXQuX19lc01vZHVsZT0hMDt2YXIgbj1yKDEwNSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxMDkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNjApLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIisodm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOigwLHUuZGVmYXVsdCkodCkpKTtlLnByb3RvdHlwZT0oMCxhLmRlZmF1bHQpKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoby5kZWZhdWx0PygwLG8uZGVmYXVsdCkoZSx0KTplLl9fcHJvdG9fXz10KX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBkaXZpZGVVUkwoZSl7ZnVuY3Rpb24gcmVjdXJzZShlKXt2YXIgdD0vKFthLXpBLVotXSopKDpcXC9cXC8oPzpcXC4pP3w6KShbLWEtekEtWjAtOUA6JS5fK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fK34jPVxcL10qKS9naTtyZXR1cm4gZS5yZXBsYWNlKHQsXCIkMSwkMywkNFwiKS5zcGxpdChcIixcIil9dmFyIHQ9cmVjdXJzZShlKTtpZih0WzBdPT09ZSYmIXRbMF0uaW5jbHVkZXMoXCJAXCIpKXtyZXR1cm57dHlwZTpcIlwiLGRvbWFpbjplLGlkZW50aXR5OlwiXCJ9fWlmKHRbMF09PT1lJiZ0WzBdLmluY2x1ZGVzKFwiQFwiKSl7dD1yZWN1cnNlKCh0WzBdPT09ZT9cInNtdHBcIjp0WzBdKStcIjovL1wiK3RbMF0pfXJldHVybiB0WzFdLmluY2x1ZGVzKFwiQFwiKSYmKHRbMl09dFswXStcIjovL1wiK3RbMV0sdFsxXT10WzFdLnN1YnN0cih0WzFdLmluZGV4T2YoXCJAXCIpKzEpKSx7dHlwZTp0WzBdLGRvbWFpbjp0WzFdLGlkZW50aXR5OnRbMl19fWZ1bmN0aW9uIGVtcHR5T2JqZWN0KGUpe3JldHVybiEoKDAsYS5kZWZhdWx0KShlKS5sZW5ndGg+MCl9ZnVuY3Rpb24gc2Vjb25kc1NpbmNlRXBvY2goKXtyZXR1cm4gTWF0aC5mbG9vcihEYXRlLm5vdygpLzFlMyl9ZnVuY3Rpb24gZGVlcENsb25lKGUpe2lmKGUpcmV0dXJuIEpTT04ucGFyc2UoKDAsby5kZWZhdWx0KShlKSl9ZnVuY3Rpb24gcmVtb3ZlUGF0aEZyb21VUkwoZSl7dmFyIHQ9ZS5zcGxpdChcIi9cIik7cmV0dXJuIHRbMF0rXCIvL1wiK3RbMl0rXCIvXCIrdFszXX1mdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKGUpe3ZhciB0PWUuaW5kZXhPZihcIkBcIik7cmV0dXJuXCJ1c2VyOi8vXCIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKStcIi9cIitlLnN1YnN0cmluZygwLHQpfWZ1bmN0aW9uIGdldFVzZXJFbWFpbEZyb21VUkwoZSl7dmFyIHQ9ZGl2aWRlVVJMKGUpO3JldHVybiB0LmlkZW50aXR5LnJlcGxhY2UoXCIvXCIsXCJcIikrXCJAXCIrdC5kb21haW59ZnVuY3Rpb24gY29udmVydFRvVXNlclVSTChlKXtpZihcInVzZXI6Ly9cIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PWRpdmlkZVVSTChlKTtpZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvd1widXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdFwifXJldHVybiBnZXRVc2VyVVJMRnJvbUVtYWlsKGUpfWZ1bmN0aW9uIGlzRGF0YU9iamVjdFVSTChlKXt2YXIgdD1bXCJkb21haW4taWRwXCIsXCJydW50aW1lXCIsXCJkb21haW5cIixcImh5cGVydHlcIl0scj1lLnNwbGl0KFwiOi8vXCIpLG49clswXTtyZXR1cm4tMT09PXQuaW5kZXhPZihuKX1mdW5jdGlvbiBpc0xlZ2FjeShlKXtyZXR1cm4gZS5zcGxpdChcIkBcIikubGVuZ3RoPjF9ZnVuY3Rpb24gaXNVUkwoZSl7cmV0dXJuIGUuc3BsaXQoXCIvXCIpLmxlbmd0aD49M31mdW5jdGlvbiBpc1VzZXJVUkwoZSl7cmV0dXJuXCJ1c2VyXCI9PT1kaXZpZGVVUkwoZSkudHlwZX1mdW5jdGlvbiBpc0h5cGVydHlVUkwoZSl7cmV0dXJuXCJoeXBlcnR5XCI9PT1kaXZpZGVVUkwoZSkudHlwZX1mdW5jdGlvbiBnZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzKGUsdCxyKXtyZXR1cm4gZVt0XVtyXX1mdW5jdGlvbiBidWlsZFVSTChlLHQscixuKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSYmYXJndW1lbnRzWzRdLGE9ZVt0XSxzPXZvaWQgMDtpZighYS5oYXNPd25Qcm9wZXJ0eShyKSl0aHJvdyBFcnJvcihcIlRoZSBjb25maWd1cmF0aW9uIFwiKygwLG8uZGVmYXVsdCkoYSxcIlwiLDIpK1wiIGRvbid0IGhhdmUgdGhlIFwiK3IrXCIgcmVzb3VyY2UgeW91IGFyZSBsb29raW5nIGZvclwiKTt2YXIgdT1hW3JdO3JldHVybiBuPyhzPXUucHJlZml4K2UuZG9tYWluK3Uuc3VmZml4K24sdS5oYXNPd25Qcm9wZXJ0eShcImZhbGxiYWNrXCIpJiZpJiYocz11LmZhbGxiYWNrLmluZGV4T2YoXCIlZG9tYWluJVwiKT91LmZhbGxiYWNrLnJlcGxhY2UoLyglZG9tYWluJSkvZyxlLmRvbWFpbikrbjp1LmZhbGxiYWNrK24pKTpzPXUucHJlZml4K2UuZG9tYWluK3Uuc3VmZml4LHN9ZnVuY3Rpb24gZ2VuZXJhdGVHVUlEKCl7ZnVuY3Rpb24gczQoKXtyZXR1cm4gTWF0aC5mbG9vcig2NTUzNiooMStNYXRoLnJhbmRvbSgpKSkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKX1yZXR1cm4gczQoKStzNCgpK1wiLVwiK3M0KCkrXCItXCIrczQoKStcIi1cIitzNCgpK1wiLVwiK3M0KCkrczQoKStzNCgpfWZ1bmN0aW9uIGdldFVzZXJJZGVudGl0eURvbWFpbihlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdChcIi5cIiksbj1yLmxlbmd0aDtyZXR1cm4gMT09bj9yW24tMV06cltuLTJdK1wiLlwiK3Jbbi0xXX1mdW5jdGlvbiBpc0JhY2tlbmRTZXJ2aWNlVVJMKGUpe3ZhciB0PWRpdmlkZVVSTChlKSxyPXQuZG9tYWluLnNwbGl0KFwiLlwiKSxuPVtcImRvbWFpblwiLFwiZ2xvYmFsXCIsXCJkb21haW4taWRwXCJdLG89W1wicmVnaXN0cnlcIixcIm1zZy1ub2RlXCJdLGk9dm9pZCAwO3JldHVybiByLmxlbmd0aD4xJiYoaT1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4tMSE9PW8uaW5kZXhPZihlKX0pWzBdKSwhKCFpfHwtMT09PW8uaW5kZXhPZihpKSl8fCEhdC50eXBlJiYtMSE9PW4uaW5kZXhPZih0LnR5cGUpfWZ1bmN0aW9uIGRpdmlkZUVtYWlsKGUpe3ZhciB0PWUuaW5kZXhPZihcIkBcIik7cmV0dXJue3VzZXJuYW1lOmUuc3Vic3RyaW5nKDAsdCksZG9tYWluOmUuc3Vic3RyaW5nKHQrMSxlLmxlbmd0aCl9fWZ1bmN0aW9uIGFzc2lnbihlLHQscil7ZXx8KGU9e30pLFwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1wYXJzZUF0dHJpYnV0ZXModCkpO2Zvcih2YXIgbj10Lmxlbmd0aC0xLG89MDtvPG47KytvKXt2YXIgaT10W29dO2kgaW4gZXx8KGVbaV09e30pLGU9ZVtpXX1lW3Rbbl1dPXJ9ZnVuY3Rpb24gc3BsaXRPYmplY3RVUkwoZSl7dmFyIHQ9ZS5zcGxpdChcIi9cIikscj10WzBdK1wiLy9cIit0WzJdK1wiL1wiK3RbM10sbj10WzVdLG89e3VybDpyLHJlc291cmNlOm59O3JldHVybiBvfWZ1bmN0aW9uIGNoZWNrQXR0cmlidXRlKGUpe3ZhciB0PS8oKChbYS16QS1aXSspOlxcL1xcLyhbMC05YS16QS1aXVstXFx3XSpbMC05YS16QS1aXVxcLikrW2EtekEtWl17Miw5fSlcXC9bYS16QS1aMC05Ll0rQFthLXpBLVowLTldKygtKT9bYS16QS1aMC05XSsoXFwuKT9bYS16QS1aMC05XXsyLDEwfT9cXC5bYS16QS1aXXsyLDEwfSkoLisoPz0uaWRlbnRpdHkpKT8vZ20scj1bXSxuPVtdO2lmKG51bGw9PWUubWF0Y2godCkpbj1lLnNwbGl0KFwiLlwiKTtlbHNle2Zvcih2YXIgbz12b2lkIDA7bnVsbCE9PShvPXQuZXhlYyhlKSk7KW8uaW5kZXg9PT10Lmxhc3RJbmRleCYmdC5sYXN0SW5kZXgrKyxvLmZvckVhY2goZnVuY3Rpb24oZSx0KXswPT09dCYmci5wdXNoKGUpfSk7dmFyIGk9dm9pZCAwO3IuZm9yRWFjaChmdW5jdGlvbih0KXtpPWUucmVwbGFjZSh0LFwiKi0qXCIpLG49aS5zcGxpdChcIi5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiKi0qXCI9PT1lP3Q6ZX0pfSl9cmV0dXJuIG59ZnVuY3Rpb24gcGFyc2VBdHRyaWJ1dGVzKGUpe3ZhciB0PS8oWzAtOWEtekEtWl1bLVxcd10qKTpcXC9cXC8vZztpZihlLmluY2x1ZGVzKFwiOi8vXCIpKXt2YXIgcj1lLnNwbGl0KHQpWzBdLG49ci5zcGxpdChcIi5cIiksbz1lLnJlcGxhY2UocixcIlwiKTtpZihlLmluY2x1ZGVzKFwiaWRlbnRpdHlcIikpe3ZhciBpPW8uc3BsaXQoXCJpZGVudGl0eS5cIik7bz1pWzBdLnNsaWNlKFwiLlwiLC0xKSxpPWlbMV0uc3BsaXQoXCIuXCIpLG4ucHVzaChvLFwiaWRlbnRpdHlcIiksbj1uLmNvbmNhdChpKX1lbHNlIG4ucHVzaChvKTtyZXR1cm4gbi5maWx0ZXIoQm9vbGVhbil9cmV0dXJuIGUuc3BsaXQoXCIuXCIpfWZ1bmN0aW9uIGlzRW1wdHkoZSl7Zm9yKHZhciB0IGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eSh0KSlyZXR1cm4hMTtyZXR1cm4oMCxvLmRlZmF1bHQpKGUpPT09KDAsby5kZWZhdWx0KSh7fSl9ZnVuY3Rpb24gY2hhdGtleXNUb1N0cmluZ0Nsb25lcihlKXt2YXIgdD17fSxyPSgwLGEuZGVmYXVsdCkoZSk7aWYocil0cnl7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDtuKyspe3ZhciBvPXJbbl07dFtvXT17fSx0W29dLnNlc3Npb25LZXk9ZVtvXS5zZXNzaW9uS2V5LnRvU3RyaW5nKCksdFtvXS5pc1RvRW5jcnlwdD1lW29dLmlzVG9FbmNyeXB0fX1jYXRjaChlKXt9cmV0dXJuIHR9ZnVuY3Rpb24gY2hhdGtleXNUb0FycmF5Q2xvbmVyKGUpe3ZhciB0PXt9LHI9KDAsYS5kZWZhdWx0KShlKTtpZihyKXRyeXtmb3IodmFyIG49MDtuPHIubGVuZ3RoO24rKyl7dmFyIG89cltuXTt0W29dPXt9O3ZhciBpPUpTT04ucGFyc2UoXCJbXCIrZVtvXS5zZXNzaW9uS2V5K1wiXVwiKTt0W29dLnNlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoaSksdFtvXS5pc1RvRW5jcnlwdD1lW29dLmlzVG9FbmNyeXB0fX1jYXRjaChlKXt9cmV0dXJuIHR9ZnVuY3Rpb24gcGFyc2VNZXNzYWdlVVJMKGUpe3ZhciB0PWUuc3BsaXQoXCIvXCIpO3JldHVybiB0Lmxlbmd0aDw9Nj90WzBdK1wiLy9cIit0WzJdK1wiL1wiK3RbM106dFswXStcIi8vXCIrdFsyXStcIi9cIit0WzNdK1wiL1wiK3RbNF19ZnVuY3Rpb24gYXZhaWxhYmxlU3BhY2UoZSx0KXt2YXIgcj0oZS90KS50b0ZpeGVkKDIpO3JldHVybntxdW90YTp0LHVzYWdlOmUscGVyY2VudDpOdW1iZXIocil9fWZ1bmN0aW9uIGVuY29kZShlKXt0cnl7dmFyIHQ9c3RyaW5naWZ5KGUpO3JldHVybiBidG9hKHQpfWNhdGNoKGUpe3Rocm93IGV9fWZ1bmN0aW9uIGRlY29kZShlKXt0cnl7cmV0dXJuIEpTT04ucGFyc2UoYXRvYihlKSl9Y2F0Y2goZSl7dGhyb3cgZX19ZnVuY3Rpb24gZGVjb2RlVG9VaW50OEFycmF5KGUpe3RyeXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoZGVjb2RlKGUpKX1jYXRjaChlKXt0aHJvdyBlfX1mdW5jdGlvbiBzdHJpbmdpZnkoZSl7dHJ5e3JldHVybiBlLmNvbnN0cnVjdG9yPT09VWludDhBcnJheT9cIltcIitlLnRvU3RyaW5nKCkrXCJdXCI6KDAsby5kZWZhdWx0KShlKX1jYXRjaChlKXt0aHJvdyBlfX1mdW5jdGlvbiBwYXJzZShlKXt0cnl7cmV0dXJuIEpTT04ucGFyc2UoZSl9Y2F0Y2goZSl7dGhyb3cgZX19ZnVuY3Rpb24gcGFyc2VUb1VpbnQ4QXJyYXkoZSl7dHJ5e3JldHVybiBuZXcgVWludDhBcnJheShwYXJzZShlKSl9Y2F0Y2goZSl7dGhyb3cgZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig2NSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0OCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpO3QuZGl2aWRlVVJMPWRpdmlkZVVSTCx0LmVtcHR5T2JqZWN0PWVtcHR5T2JqZWN0LHQuc2Vjb25kc1NpbmNlRXBvY2g9c2Vjb25kc1NpbmNlRXBvY2gsdC5kZWVwQ2xvbmU9ZGVlcENsb25lLHQucmVtb3ZlUGF0aEZyb21VUkw9cmVtb3ZlUGF0aEZyb21VUkwsdC5nZXRVc2VyVVJMRnJvbUVtYWlsPWdldFVzZXJVUkxGcm9tRW1haWwsdC5nZXRVc2VyRW1haWxGcm9tVVJMPWdldFVzZXJFbWFpbEZyb21VUkwsdC5jb252ZXJ0VG9Vc2VyVVJMPWNvbnZlcnRUb1VzZXJVUkwsdC5pc0RhdGFPYmplY3RVUkw9aXNEYXRhT2JqZWN0VVJMLHQuaXNMZWdhY3k9aXNMZWdhY3ksdC5pc1VSTD1pc1VSTCx0LmlzVXNlclVSTD1pc1VzZXJVUkwsdC5pc0h5cGVydHlVUkw9aXNIeXBlcnR5VVJMLHQuZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcz1nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzLHQuYnVpbGRVUkw9YnVpbGRVUkwsdC5nZW5lcmF0ZUdVSUQ9Z2VuZXJhdGVHVUlELHQuZ2V0VXNlcklkZW50aXR5RG9tYWluPWdldFVzZXJJZGVudGl0eURvbWFpbix0LmlzQmFja2VuZFNlcnZpY2VVUkw9aXNCYWNrZW5kU2VydmljZVVSTCx0LmRpdmlkZUVtYWlsPWRpdmlkZUVtYWlsLHQuYXNzaWduPWFzc2lnbix0LnNwbGl0T2JqZWN0VVJMPXNwbGl0T2JqZWN0VVJMLHQuY2hlY2tBdHRyaWJ1dGU9Y2hlY2tBdHRyaWJ1dGUsdC5wYXJzZUF0dHJpYnV0ZXM9cGFyc2VBdHRyaWJ1dGVzLHQuaXNFbXB0eT1pc0VtcHR5LHQuY2hhdGtleXNUb1N0cmluZ0Nsb25lcj1jaGF0a2V5c1RvU3RyaW5nQ2xvbmVyLHQuY2hhdGtleXNUb0FycmF5Q2xvbmVyPWNoYXRrZXlzVG9BcnJheUNsb25lcix0LnBhcnNlTWVzc2FnZVVSTD1wYXJzZU1lc3NhZ2VVUkwsdC5hdmFpbGFibGVTcGFjZT1hdmFpbGFibGVTcGFjZSx0LmVuY29kZT1lbmNvZGUsdC5kZWNvZGU9ZGVjb2RlLHQuZGVjb2RlVG9VaW50OEFycmF5PWRlY29kZVRvVWludDhBcnJheSx0LnN0cmluZ2lmeT1zdHJpbmdpZnksdC5wYXJzZT1wYXJzZSx0LnBhcnNlVG9VaW50OEFycmF5PXBhcnNlVG9VaW50OEFycmF5fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gUHJvbWlzZUNhcGFiaWxpdHkoZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcihcIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yXCIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9bih0KSx0aGlzLnJlamVjdD1uKHIpfXZhciBuPXIoMjApO2UuZXhwb3J0cy5mPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoZSl9fSxmdW5jdGlvbihlLHQscil7dmFyIG4sbzshZnVuY3Rpb24oaSxhKXtcInVzZSBzdHJpY3RcIjtuPWEsdm9pZCAwIT09KG89XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uLmNhbGwodCxyLHQsZSk6bikmJihlLmV4cG9ydHM9byl9KDAsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiaW5kTWV0aG9kKGUsdCl7dmFyIHI9ZVt0XTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByLmJpbmQpcmV0dXJuIHIuYmluZChlKTt0cnl7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwocixlKX1jYXRjaCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KHIsW2UsYXJndW1lbnRzXSl9fX1mdW5jdGlvbiByZWFsTWV0aG9kKHIpe3JldHVyblwiZGVidWdcIj09PXImJihyPVwibG9nXCIpLHR5cGVvZiBjb25zb2xlIT09dCYmKHZvaWQgMCE9PWNvbnNvbGVbcl0/YmluZE1ldGhvZChjb25zb2xlLHIpOnZvaWQgMCE9PWNvbnNvbGUubG9nP2JpbmRNZXRob2QoY29uc29sZSxcImxvZ1wiKTplKX1mdW5jdGlvbiByZXBsYWNlTG9nZ2luZ01ldGhvZHModCxuKXtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTt0aGlzW2ldPW88dD9lOnRoaXMubWV0aG9kRmFjdG9yeShpLHQsbil9dGhpcy5sb2c9dGhpcy5kZWJ1Z31mdW5jdGlvbiBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzKGUscixuKXtyZXR1cm4gZnVuY3Rpb24oKXt0eXBlb2YgY29uc29sZSE9PXQmJihyZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh0aGlzLHIsbiksdGhpc1tlXS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeShlLHQscil7cmV0dXJuIHJlYWxNZXRob2QoZSl8fGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIExvZ2dlcihlLG4sbyl7ZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZShlKXt2YXIgbj0ocltlXXx8XCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtpZih0eXBlb2Ygd2luZG93IT09dCl7dHJ5e3JldHVybiB2b2lkKHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc109bil9Y2F0Y2goZSl7fXRyeXt3aW5kb3cuZG9jdW1lbnQuY29va2llPWVuY29kZVVSSUNvbXBvbmVudChzKStcIj1cIituK1wiO1wifWNhdGNoKGUpe319fWZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCl7dmFyIGU7aWYodHlwZW9mIHdpbmRvdyE9PXQpe3RyeXtlPXdpbmRvdy5sb2NhbFN0b3JhZ2Vbc119Y2F0Y2goZSl7fWlmKHR5cGVvZiBlPT09dCl0cnl7dmFyIHI9d2luZG93LmRvY3VtZW50LmNvb2tpZSxuPXIuaW5kZXhPZihlbmNvZGVVUklDb21wb25lbnQocykrXCI9XCIpOy0xIT09biYmKGU9L14oW147XSspLy5leGVjKHIuc2xpY2UobikpWzFdKX1jYXRjaChlKXt9cmV0dXJuIHZvaWQgMD09PWEubGV2ZWxzW2VdJiYoZT12b2lkIDApLGV9fXZhciBpLGE9dGhpcyxzPVwibG9nbGV2ZWxcIjtlJiYocys9XCI6XCIrZSksYS5uYW1lPWUsYS5sZXZlbHM9e1RSQUNFOjAsREVCVUc6MSxJTkZPOjIsV0FSTjozLEVSUk9SOjQsU0lMRU5UOjV9LGEubWV0aG9kRmFjdG9yeT1vfHxkZWZhdWx0TWV0aG9kRmFjdG9yeSxhLmdldExldmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGl9LGEuc2V0TGV2ZWw9ZnVuY3Rpb24ocixuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgciYmdm9pZCAwIT09YS5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSYmKHI9YS5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSksIShcIm51bWJlclwiPT10eXBlb2YgciYmcj49MCYmcjw9YS5sZXZlbHMuU0lMRU5UKSl0aHJvd1wibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIrcjtpZihpPXIsITEhPT1uJiZwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKHIpLHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKGEscixlKSx0eXBlb2YgY29uc29sZT09PXQmJnI8YS5sZXZlbHMuU0lMRU5UKXJldHVyblwiTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmdcIn0sYS5zZXREZWZhdWx0TGV2ZWw9ZnVuY3Rpb24oZSl7Z2V0UGVyc2lzdGVkTGV2ZWwoKXx8YS5zZXRMZXZlbChlLCExKX0sYS5lbmFibGVBbGw9ZnVuY3Rpb24oZSl7YS5zZXRMZXZlbChhLmxldmVscy5UUkFDRSxlKX0sYS5kaXNhYmxlQWxsPWZ1bmN0aW9uKGUpe2Euc2V0TGV2ZWwoYS5sZXZlbHMuU0lMRU5ULGUpfTt2YXIgdT1nZXRQZXJzaXN0ZWRMZXZlbCgpO251bGw9PXUmJih1PW51bGw9PW4/XCJXQVJOXCI6biksYS5zZXRMZXZlbCh1LCExKX12YXIgZT1mdW5jdGlvbigpe30sdD1cInVuZGVmaW5lZFwiLHI9W1widHJhY2VcIixcImRlYnVnXCIsXCJpbmZvXCIsXCJ3YXJuXCIsXCJlcnJvclwiXSxuPW5ldyBMb2dnZXIsbz17fTtuLmdldExvZ2dlcj1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8XCJcIj09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci5cIik7dmFyIHQ9b1tlXTtyZXR1cm4gdHx8KHQ9b1tlXT1uZXcgTG9nZ2VyKGUsbi5nZXRMZXZlbCgpLG4ubWV0aG9kRmFjdG9yeSkpLHR9O3ZhciBpPXR5cGVvZiB3aW5kb3chPT10P3dpbmRvdy5sb2c6dm9pZCAwO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHdpbmRvdyE9PXQmJndpbmRvdy5sb2c9PT1uJiYod2luZG93LmxvZz1pKSxufSxuLmdldExvZ2dlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gb30sbn0pfSxmdW5jdGlvbihlLHQscil7dC5mPXIoMil9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEpLG89cigwKSxpPXIoMTUpLGE9cigzOSkscz1yKDgpLmY7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW8uU3ltYm9sfHwoby5TeW1ib2w9aT97fTpuLlN5bWJvbHx8e30pO1wiX1wiPT1lLmNoYXJBdCgwKXx8ZSBpbiB0fHxzKHQsZSx7dmFsdWU6YS5mKGUpfSl9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig2KSxvPXIoNzQpLGk9cigzMiksYT1yKDMwKShcIklFX1BST1RPXCIpLHM9ZnVuY3Rpb24oKXt9LHU9ZnVuY3Rpb24oKXt2YXIgZSx0PXIoMjgpKFwiaWZyYW1lXCIpLG49aS5sZW5ndGg7Zm9yKHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixyKDU1KS5hcHBlbmRDaGlsZCh0KSx0LnNyYz1cImphdmFzY3JpcHQ6XCIsZT10LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQsZS5vcGVuKCksZS53cml0ZShcIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XFwvc2NyaXB0PlwiKSxlLmNsb3NlKCksdT1lLkY7bi0tOylkZWxldGUgdS5wcm90b3R5cGVbaVtuXV07cmV0dXJuIHUoKX07ZS5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIG51bGwhPT1lPyhzLnByb3RvdHlwZT1uKGUpLHI9bmV3IHMscy5wcm90b3R5cGU9bnVsbCxyW2FdPWUpOnI9dSgpLHZvaWQgMD09PXQ/cjpvKHIsdCl9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cig3MikoITApO3IoNTMpKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz0hcig3KSYmIXIoMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyKDI4KShcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxMCksbz1yKDEyKSxpPXIoNjYpKCExKSxhPXIoMzApKFwiSUVfUFJPVE9cIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIscz1vKGUpLHU9MCxjPVtdO2ZvcihyIGluIHMpciE9YSYmbihzLHIpJiZjLnB1c2gocik7Zm9yKDt0Lmxlbmd0aD51OyluKHMscj10W3UrK10pJiYofmkoYyxyKXx8Yy5wdXNoKHIpKTtyZXR1cm4gY319LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI0KSxvPU1hdGgubWluO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP28obihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0sZnVuY3Rpb24oZSx0LHIpe3IoNzUpO2Zvcih2YXIgbj1yKDEpLG89cigxMSksaT1yKDE4KSxhPXIoMikoXCJ0b1N0cmluZ1RhZ1wiKSxzPVwiQ1NTUnVsZUxpc3QsQ1NTU3R5bGVEZWNsYXJhdGlvbixDU1NWYWx1ZUxpc3QsQ2xpZW50UmVjdExpc3QsRE9NUmVjdExpc3QsRE9NU3RyaW5nTGlzdCxET01Ub2tlbkxpc3QsRGF0YVRyYW5zZmVySXRlbUxpc3QsRmlsZUxpc3QsSFRNTEFsbENvbGxlY3Rpb24sSFRNTENvbGxlY3Rpb24sSFRNTEZvcm1FbGVtZW50LEhUTUxTZWxlY3RFbGVtZW50LE1lZGlhTGlzdCxNaW1lVHlwZUFycmF5LE5hbWVkTm9kZU1hcCxOb2RlTGlzdCxQYWludFJlcXVlc3RMaXN0LFBsdWdpbixQbHVnaW5BcnJheSxTVkdMZW5ndGhMaXN0LFNWR051bWJlckxpc3QsU1ZHUGF0aFNlZ0xpc3QsU1ZHUG9pbnRMaXN0LFNWR1N0cmluZ0xpc3QsU1ZHVHJhbnNmb3JtTGlzdCxTb3VyY2VCdWZmZXJMaXN0LFN0eWxlU2hlZXRMaXN0LFRleHRUcmFja0N1ZUxpc3QsVGV4dFRyYWNrTGlzdCxUb3VjaExpc3RcIi5zcGxpdChcIixcIiksdT0wO3U8cy5sZW5ndGg7dSsrKXt2YXIgYz1zW3VdLGw9bltjXSxkPWwmJmwucHJvdG90eXBlO2QmJiFkW2FdJiZvKGQsYSxjKSxpW2NdPWkuQXJyYXl9fSxmdW5jdGlvbihlLHQpe3QuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTEzKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTYpLG89cigyKShcInRvU3RyaW5nVGFnXCIpLGk9XCJBcmd1bWVudHNcIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLGE9ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIGVbdF19Y2F0Y2goZSl7fX07ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT9cIlVuZGVmaW5lZFwiOm51bGw9PT1lP1wiTnVsbFwiOlwic3RyaW5nXCI9PXR5cGVvZihyPWEodD1PYmplY3QoZSksbykpP3I6aT9uKHQpOlwiT2JqZWN0XCI9PShzPW4odCkpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNhbGxlZT9cIkFyZ3VtZW50c1wiOnN9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig1KSxvPXIoMCksaT1yKDEzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLGE9e307YVtlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLFwiT2JqZWN0XCIsYSl9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyNyksbz1yKDIxKSxpPXIoMTIpLGE9cigyOSkscz1yKDEwKSx1PXIoNDMpLGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjt0LmY9cig3KT9jOmZ1bmN0aW9uKGUsdCl7aWYoZT1pKGUpLHQ9YSh0LCEwKSx1KXRyeXtyZXR1cm4gYyhlLHQpfWNhdGNoKGUpe31pZihzKGUsdCkpcmV0dXJuIG8oIW4uZi5jYWxsKGUsdCksZVt0XSl9fSxmdW5jdGlvbihlLHQpe30sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMTUpLG89cig1KSxpPXIoNTQpLGE9cigxMSkscz1yKDE4KSx1PXIoNzMpLGM9cigyMyksbD1yKDYzKSxkPXIoMikoXCJpdGVyYXRvclwiKSxmPSEoW10ua2V5cyYmXCJuZXh0XCJpbltdLmtleXMoKSkscD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIseSx2LGgsXyl7dShyLHQseSk7dmFyIGIsbSxnLFI9ZnVuY3Rpb24oZSl7aWYoIWYmJmUgaW4gailyZXR1cm4galtlXTtzd2l0Y2goZSl7Y2FzZVwia2V5c1wiOmNhc2VcInZhbHVlc1wiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LE89dCtcIiBJdGVyYXRvclwiLHc9XCJ2YWx1ZXNcIj09dixEPSExLGo9ZS5wcm90b3R5cGUsaz1qW2RdfHxqW1wiQEBpdGVyYXRvclwiXXx8diYmalt2XSxMPWt8fFIodiksTT12P3c/UihcImVudHJpZXNcIik6TDp2b2lkIDAsVT1cIkFycmF5XCI9PXQ/ai5lbnRyaWVzfHxrOms7aWYoVSYmKGc9bChVLmNhbGwobmV3IGUpKSkhPT1PYmplY3QucHJvdG90eXBlJiZnLm5leHQmJihjKGcsTywhMCksbnx8XCJmdW5jdGlvblwiPT10eXBlb2YgZ1tkXXx8YShnLGQscCkpLHcmJmsmJlwidmFsdWVzXCIhPT1rLm5hbWUmJihEPSEwLEw9ZnVuY3Rpb24oKXtyZXR1cm4gay5jYWxsKHRoaXMpfSksbiYmIV98fCFmJiYhRCYmaltkXXx8YShqLGQsTCksc1t0XT1MLHNbT109cCx2KWlmKGI9e3ZhbHVlczp3P0w6UihcInZhbHVlc1wiKSxrZXlzOmg/TDpSKFwia2V5c1wiKSxlbnRyaWVzOk19LF8pZm9yKG0gaW4gYiltIGluIGp8fGkoaixtLGJbbV0pO2Vsc2UgbyhvLlArby5GKihmfHxEKSx0LGIpO3JldHVybiBifX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz1yKDExKX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSkuZG9jdW1lbnQ7ZS5leHBvcnRzPW4mJm4uZG9jdW1lbnRFbGVtZW50fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig2KSxvPXIoMjApLGk9cigyKShcInNwZWNpZXNcIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIsYT1uKGUpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1hfHx2b2lkIDA9PShyPW4oYSlbaV0pP3Q6byhyKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGksYT1yKDE3KSxzPXIoODMpLHU9cig1NSksYz1yKDI4KSxsPXIoMSksZD1sLnByb2Nlc3MsZj1sLnNldEltbWVkaWF0ZSxwPWwuY2xlYXJJbW1lZGlhdGUseT1sLk1lc3NhZ2VDaGFubmVsLHY9bC5EaXNwYXRjaCxoPTAsXz17fSxiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7aWYoXy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9X1tlXTtkZWxldGUgX1tlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTtmJiZwfHwoZj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gX1srK2hdPWZ1bmN0aW9uKCl7cyhcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4oaCksaH0scD1mdW5jdGlvbihlKXtkZWxldGUgX1tlXX0sXCJwcm9jZXNzXCI9PXIoMTYpKGQpP249ZnVuY3Rpb24oZSl7ZC5uZXh0VGljayhhKGIsZSwxKSl9OnYmJnYubm93P249ZnVuY3Rpb24oZSl7di5ub3coYShiLGUsMSkpfTp5PyhvPW5ldyB5LGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1tLG49YShpLnBvc3RNZXNzYWdlLGksMSkpOmwuYWRkRXZlbnRMaXN0ZW5lciYmXCJmdW5jdGlvblwiPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFsLmltcG9ydFNjcmlwdHM/KG49ZnVuY3Rpb24oZSl7bC5wb3N0TWVzc2FnZShlK1wiXCIsXCIqXCIpfSxsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsbSwhMSkpOm49XCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIGMoXCJzY3JpcHRcIik/ZnVuY3Rpb24oZSl7dS5hcHBlbmRDaGlsZChjKFwic2NyaXB0XCIpKS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt1LnJlbW92ZUNoaWxkKHRoaXMpLGIuY2FsbChlKX19OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoYShiLGUsMSksMCl9KSxlLmV4cG9ydHM9e3NldDpmLGNsZWFyOnB9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJue2U6ITEsdjplKCl9fWNhdGNoKGUpe3JldHVybntlOiEwLHY6ZX19fX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNiksbz1yKDkpLGk9cigzNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYobihlKSxvKHQpJiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgcj1pLmYoZSk7cmV0dXJuKDAsci5yZXNvbHZlKSh0KSxyLnByb21pc2V9fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoOTEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOTMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZGVmYXVsdCYmXCJzeW1ib2xcIj09dHlwZW9mIG8uZGVmYXVsdD9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT1hLmRlZmF1bHQmJmUhPT1hLmRlZmF1bHQucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9O3QuZGVmYXVsdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmRlZmF1bHQmJlwic3ltYm9sXCI9PT1zKG8uZGVmYXVsdCk/ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpzKGUpfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5kZWZhdWx0JiZlLmNvbnN0cnVjdG9yPT09YS5kZWZhdWx0JiZlIT09YS5kZWZhdWx0LnByb3RvdHlwZT9cInN5bWJvbFwiOnZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpzKGUpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDQpLG89cigzMikuY29uY2F0KFwibGVuZ3RoXCIsXCJwcm90b3R5cGVcIik7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLG8pfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTYpO2UuZXhwb3J0cz1PYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm5cIlN0cmluZ1wiPT1uKGUpP2Uuc3BsaXQoXCJcIik6T2JqZWN0KGUpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTApLG89cigzMyksaT1yKDMwKShcIklFX1BST1RPXCIpLGE9T2JqZWN0LnByb3RvdHlwZTtlLmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlKXtyZXR1cm4gZT1vKGUpLG4oZSxpKT9lW2ldOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY29uc3RydWN0b3ImJmUgaW5zdGFuY2VvZiBlLmNvbnN0cnVjdG9yP2UuY29uc3RydWN0b3IucHJvdG90eXBlOmUgaW5zdGFuY2VvZiBPYmplY3Q/YTpudWxsfX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDY4KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDExMiksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEyKSxvPXIoNDUpLGk9cig2Nyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsYSl7dmFyIHMsdT1uKHQpLGM9byh1Lmxlbmd0aCksbD1pKGEsYyk7aWYoZSYmciE9cil7Zm9yKDtjPmw7KWlmKChzPXVbbCsrXSkhPXMpcmV0dXJuITB9ZWxzZSBmb3IoO2M+bDtsKyspaWYoKGV8fGwgaW4gdSkmJnVbbF09PT1yKXJldHVybiBlfHxsfHwwO3JldHVybiFlJiYtMX19fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyNCksbz1NYXRoLm1heCxpPU1hdGgubWluO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBlPW4oZSksZTwwP28oZSt0LDApOmkoZSx0KX19LGZ1bmN0aW9uKGUsdCxyKXtyKDY5KTt2YXIgbj1yKDApLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDUpO24obi5TK24uRiohcig3KSxcIk9iamVjdFwiLHtkZWZpbmVQcm9wZXJ0eTpyKDgpLmZ9KX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDkpLG89cigyKShcIml0ZXJhdG9yXCIpLGk9cigxOCk7ZS5leHBvcnRzPXIoMCkuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT1lKXJldHVybiBlW29dfHxlW1wiQEBpdGVyYXRvclwiXXx8aVtuKGUpXX19LGZ1bmN0aW9uKGUsdCxyKXtyKDUyKSxyKDQyKSxyKDQ2KSxyKDc4KSxyKDg5KSxyKDkwKSxlLmV4cG9ydHM9cigwKS5Qcm9taXNlfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyNCksbz1yKDI1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIGksYSxzPVN0cmluZyhvKHQpKSx1PW4ociksYz1zLmxlbmd0aDtyZXR1cm4gdTwwfHx1Pj1jP2U/XCJcIjp2b2lkIDA6KGk9cy5jaGFyQ29kZUF0KHUpLGk8NTUyOTZ8fGk+NTYzMTl8fHUrMT09PWN8fChhPXMuY2hhckNvZGVBdCh1KzEpKTw1NjMyMHx8YT41NzM0Mz9lP3MuY2hhckF0KHUpOmk6ZT9zLnNsaWNlKHUsdSsyKTphLTU2MzIwKyhpLTU1Mjk2PDwxMCkrNjU1MzYpfX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDQxKSxvPXIoMjEpLGk9cigyMyksYT17fTtyKDExKShhLHIoMikoXCJpdGVyYXRvclwiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uKGEse25leHQ6bygxLHIpfSksaShlLHQrXCIgSXRlcmF0b3JcIil9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cig4KSxvPXIoNiksaT1yKDE5KTtlLmV4cG9ydHM9cig3KT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbihlLHQpe28oZSk7Zm9yKHZhciByLGE9aSh0KSxzPWEubGVuZ3RoLHU9MDtzPnU7KW4uZihlLHI9YVt1KytdLHRbcl0pO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNzYpLG89cig3NyksaT1yKDE4KSxhPXIoMTIpO2UuZXhwb3J0cz1yKDUzKShBcnJheSxcIkFycmF5XCIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PWEoZSksdGhpcy5faT0wLHRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG8oMSkpOlwia2V5c1wiPT10P28oMCxyKTpcInZhbHVlc1wiPT10P28oMCxlW3JdKTpvKDAsW3IsZVtyXV0pfSxcInZhbHVlc1wiKSxpLkFyZ3VtZW50cz1pLkFycmF5LG4oXCJrZXlzXCIpLG4oXCJ2YWx1ZXNcIiksbihcImVudHJpZXNcIil9LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7fX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4sbyxpLGEscz1yKDE1KSx1PXIoMSksYz1yKDE3KSxsPXIoNDkpLGQ9cig1KSxmPXIoOSkscD1yKDIwKSx5PXIoNzkpLHY9cig4MCksaD1yKDU2KSxfPXIoNTcpLnNldCxiPXIoODQpKCksbT1yKDM3KSxnPXIoNTgpLFI9cig4NSksTz1yKDU5KSx3PXUuVHlwZUVycm9yLEQ9dS5wcm9jZXNzLGo9RCYmRC52ZXJzaW9ucyxrPWomJmoudjh8fFwiXCIsTD11LlByb21pc2UsTT1cInByb2Nlc3NcIj09bChEKSxVPWZ1bmN0aW9uKCl7fSxDPW89bS5mLHg9ISFmdW5jdGlvbigpe3RyeXt2YXIgZT1MLnJlc29sdmUoMSksdD0oZS5jb25zdHJ1Y3Rvcj17fSlbcigyKShcInNwZWNpZXNcIildPWZ1bmN0aW9uKGUpe2UoVSxVKX07cmV0dXJuKE18fFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCkmJmUudGhlbihVKWluc3RhbmNlb2YgdCYmMCE9PWsuaW5kZXhPZihcIjYuNlwiKSYmLTE9PT1SLmluZGV4T2YoXCJDaHJvbWUvNjZcIil9Y2F0Y2goZSl7fX0oKSxQPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiEoIWYoZSl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mKHQ9ZS50aGVuKSkmJnR9LEU9ZnVuY3Rpb24oZSx0KXtpZighZS5fbil7ZS5fbj0hMDt2YXIgcj1lLl9jO2IoZnVuY3Rpb24oKXtmb3IodmFyIG49ZS5fdixvPTE9PWUuX3MsaT0wO3IubGVuZ3RoPmk7KSFmdW5jdGlvbih0KXt2YXIgcixpLGEscz1vP3Qub2s6dC5mYWlsLHU9dC5yZXNvbHZlLGM9dC5yZWplY3QsbD10LmRvbWFpbjt0cnl7cz8ob3x8KDI9PWUuX2gmJkkoZSksZS5faD0xKSwhMD09PXM/cj1uOihsJiZsLmVudGVyKCkscj1zKG4pLGwmJihsLmV4aXQoKSxhPSEwKSkscj09PXQucHJvbWlzZT9jKHcoXCJQcm9taXNlLWNoYWluIGN5Y2xlXCIpKTooaT1QKHIpKT9pLmNhbGwocix1LGMpOnUocikpOmMobil9Y2F0Y2goZSl7bCYmIWEmJmwuZXhpdCgpLGMoZSl9fShyW2krK10pO2UuX2M9W10sZS5fbj0hMSx0JiYhZS5faCYmUyhlKX0pfX0sUz1mdW5jdGlvbihlKXtfLmNhbGwodSxmdW5jdGlvbigpe3ZhciB0LHIsbixvPWUuX3YsaT1xKGUpO2lmKGkmJih0PWcoZnVuY3Rpb24oKXtNP0QuZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLG8sZSk6KHI9dS5vbnVuaGFuZGxlZHJlamVjdGlvbik/cih7cHJvbWlzZTplLHJlYXNvbjpvfSk6KG49dS5jb25zb2xlKSYmbi5lcnJvciYmbi5lcnJvcihcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLG8pfSksZS5faD1NfHxxKGUpPzI6MSksZS5fYT12b2lkIDAsaSYmdC5lKXRocm93IHQudn0pfSxxPWZ1bmN0aW9uKGUpe3JldHVybiAxIT09ZS5faCYmMD09PShlLl9hfHxlLl9jKS5sZW5ndGh9LEk9ZnVuY3Rpb24oZSl7Xy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdDtNP0QuZW1pdChcInJlamVjdGlvbkhhbmRsZWRcIixlKToodD11Lm9ucmVqZWN0aW9uaGFuZGxlZCkmJnQoe3Byb21pc2U6ZSxyZWFzb246ZS5fdn0pfSl9LFQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9kfHwodC5fZD0hMCx0PXQuX3d8fHQsdC5fdj1lLHQuX3M9Mix0Ll9hfHwodC5fYT10Ll9jLnNsaWNlKCkpLEUodCwhMCkpfSxIPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5fZCl7ci5fZD0hMCxyPXIuX3d8fHI7dHJ5e2lmKHI9PT1lKXRocm93IHcoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTsodD1QKGUpKT9iKGZ1bmN0aW9uKCl7dmFyIG49e193OnIsX2Q6ITF9O3RyeXt0LmNhbGwoZSxjKEgsbiwxKSxjKFQsbiwxKSl9Y2F0Y2goZSl7VC5jYWxsKG4sZSl9fSk6KHIuX3Y9ZSxyLl9zPTEsRShyLCExKSl9Y2F0Y2goZSl7VC5jYWxsKHtfdzpyLF9kOiExfSxlKX19fTt4fHwoTD1mdW5jdGlvbihlKXt5KHRoaXMsTCxcIlByb21pc2VcIixcIl9oXCIpLHAoZSksbi5jYWxsKHRoaXMpO3RyeXtlKGMoSCx0aGlzLDEpLGMoVCx0aGlzLDEpKX1jYXRjaChlKXtULmNhbGwodGhpcyxlKX19LG49ZnVuY3Rpb24oZSl7dGhpcy5fYz1bXSx0aGlzLl9hPXZvaWQgMCx0aGlzLl9zPTAsdGhpcy5fZD0hMSx0aGlzLl92PXZvaWQgMCx0aGlzLl9oPTAsdGhpcy5fbj0hMX0sbi5wcm90b3R5cGU9cig4NikoTC5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1DKGgodGhpcyxMKSk7cmV0dXJuIHIub2s9XCJmdW5jdGlvblwiIT10eXBlb2YgZXx8ZSxyLmZhaWw9XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdCxyLmRvbWFpbj1NP0QuZG9tYWluOnZvaWQgMCx0aGlzLl9jLnB1c2gociksdGhpcy5fYSYmdGhpcy5fYS5wdXNoKHIpLHRoaXMuX3MmJkUodGhpcywhMSksci5wcm9taXNlfSxjYXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSxpPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG47dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPWMoSCxlLDEpLHRoaXMucmVqZWN0PWMoVCxlLDEpfSxtLmY9Qz1mdW5jdGlvbihlKXtyZXR1cm4gZT09PUx8fGU9PT1hP25ldyBpKGUpOm8oZSl9KSxkKGQuRytkLlcrZC5GKiF4LHtQcm9taXNlOkx9KSxyKDIzKShMLFwiUHJvbWlzZVwiKSxyKDg3KShcIlByb21pc2VcIiksYT1yKDApLlByb21pc2UsZChkLlMrZC5GKiF4LFwiUHJvbWlzZVwiLHtyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9Qyh0aGlzKTtyZXR1cm4oMCx0LnJlamVjdCkoZSksdC5wcm9taXNlfX0pLGQoZC5TK2QuRiooc3x8IXgpLFwiUHJvbWlzZVwiLHtyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiBPKHMmJnRoaXM9PT1hP0w6dGhpcyxlKX19KSxkKGQuUytkLkYqISh4JiZyKDg4KShmdW5jdGlvbihlKXtMLmFsbChlKS5jYXRjaChVKX0pKSxcIlByb21pc2VcIix7YWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1DKHQpLG49ci5yZXNvbHZlLG89ci5yZWplY3QsaT1nKGZ1bmN0aW9uKCl7dmFyIHI9W10saT0wLGE9MTt2KGUsITEsZnVuY3Rpb24oZSl7dmFyIHM9aSsrLHU9ITE7ci5wdXNoKHZvaWQgMCksYSsrLHQucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3V8fCh1PSEwLHJbc109ZSwtLWF8fG4ocikpfSxvKX0pLC0tYXx8bihyKX0pO3JldHVybiBpLmUmJm8oaS52KSxyLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPUModCksbj1yLnJlamVjdCxvPWcoZnVuY3Rpb24oKXt2KGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gby5lJiZuKG8udiksci5wcm9taXNlfX0pfSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXtpZighKGUgaW5zdGFuY2VvZiB0KXx8dm9pZCAwIT09biYmbiBpbiBlKXRocm93IFR5cGVFcnJvcihyK1wiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiFcIik7cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxNyksbz1yKDgxKSxpPXIoODIpLGE9cig2KSxzPXIoNDUpLHU9cig3MCksYz17fSxsPXt9LHQ9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGQsZil7dmFyIHAseSx2LGgsXz1mP2Z1bmN0aW9uKCl7cmV0dXJuIGV9OnUoZSksYj1uKHIsZCx0PzI6MSksbT0wO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIF8pdGhyb3cgVHlwZUVycm9yKGUrXCIgaXMgbm90IGl0ZXJhYmxlIVwiKTtpZihpKF8pKXtmb3IocD1zKGUubGVuZ3RoKTtwPm07bSsrKWlmKChoPXQ/YihhKHk9ZVttXSlbMF0seVsxXSk6YihlW21dKSk9PT1jfHxoPT09bClyZXR1cm4gaH1lbHNlIGZvcih2PV8uY2FsbChlKTshKHk9di5uZXh0KCkpLmRvbmU7KWlmKChoPW8odixiLHkudmFsdWUsdCkpPT09Y3x8aD09PWwpcmV0dXJuIGh9O3QuQlJFQUs9Yyx0LlJFVFVSTj1sfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKHQpe3ZhciBpPWUucmV0dXJuO3Rocm93IHZvaWQgMCE9PWkmJm4oaS5jYWxsKGUpKSx0fX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE4KSxvPXIoMikoXCJpdGVyYXRvclwiKSxpPUFycmF5LnByb3RvdHlwZTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSksbz1yKDU3KS5zZXQsaT1uLk11dGF0aW9uT2JzZXJ2ZXJ8fG4uV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPW4ucHJvY2VzcyxzPW4uUHJvbWlzZSx1PVwicHJvY2Vzc1wiPT1yKDE2KShhKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsYz1mdW5jdGlvbigpe3ZhciBuLG87Zm9yKHUmJihuPWEuZG9tYWluKSYmbi5leGl0KCk7ZTspe289ZS5mbixlPWUubmV4dDt0cnl7bygpfWNhdGNoKG4pe3Rocm93IGU/cigpOnQ9dm9pZCAwLG59fXQ9dm9pZCAwLG4mJm4uZW50ZXIoKX07aWYodSlyPWZ1bmN0aW9uKCl7YS5uZXh0VGljayhjKX07ZWxzZSBpZighaXx8bi5uYXZpZ2F0b3ImJm4ubmF2aWdhdG9yLnN0YW5kYWxvbmUpaWYocyYmcy5yZXNvbHZlKXt2YXIgbD1zLnJlc29sdmUodm9pZCAwKTtyPWZ1bmN0aW9uKCl7bC50aGVuKGMpfX1lbHNlIHI9ZnVuY3Rpb24oKXtvLmNhbGwobixjKX07ZWxzZXt2YXIgZD0hMCxmPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO25ldyBpKGMpLm9ic2VydmUoZix7Y2hhcmFjdGVyRGF0YTohMH0pLHI9ZnVuY3Rpb24oKXtmLmRhdGE9ZD0hZH19cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvPXtmbjpuLG5leHQ6dm9pZCAwfTt0JiYodC5uZXh0PW8pLGV8fChlPW8scigpKSx0PW99fX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSksbz1uLm5hdmlnYXRvcjtlLmV4cG9ydHM9byYmby51c2VyQWdlbnR8fFwiXCJ9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDExKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbyBpbiB0KXImJmVbb10/ZVtvXT10W29dOm4oZSxvLHRbb10pO3JldHVybiBlfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoMSksbz1yKDApLGk9cig4KSxhPXIoNykscz1yKDIpKFwic3BlY2llc1wiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2Ygb1tlXT9vW2VdOm5bZV07YSYmdCYmIXRbc10mJmkuZih0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIpKFwiaXRlcmF0b3JcIiksbz0hMTt0cnl7dmFyIGk9WzddW25dKCk7aS5yZXR1cm49ZnVuY3Rpb24oKXtvPSEwfSxBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goZSl7fWUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLGE9aVtuXSgpO2EubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOnI9ITB9fSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIGF9LGUoaSl9Y2F0Y2goZSl7fXJldHVybiByfX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO3ZhciBuPXIoNSksbz1yKDApLGk9cigxKSxhPXIoNTYpLHM9cig1OSk7bihuLlArbi5SLFwiUHJvbWlzZVwiLHtmaW5hbGx5OmZ1bmN0aW9uKGUpe3ZhciB0PWEodGhpcyxvLlByb21pc2V8fGkuUHJvbWlzZSkscj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlO3JldHVybiB0aGlzLnRoZW4ocj9mdW5jdGlvbihyKXtyZXR1cm4gcyh0LGUoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiByfSl9OmUscj9mdW5jdGlvbihyKXtyZXR1cm4gcyh0LGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IHJ9KX06ZSl9fSl9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1yKDUpLG89cigzNyksaT1yKDU4KTtuKG4uUyxcIlByb21pc2VcIix7dHJ5OmZ1bmN0aW9uKGUpe3ZhciB0PW8uZih0aGlzKSxyPWkoZSk7cmV0dXJuKHIuZT90LnJlamVjdDp0LnJlc29sdmUpKHIudiksdC5wcm9taXNlfX0pfSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoOTIpLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbihlLHQscil7cig0Mikscig0NiksZS5leHBvcnRzPXIoMzkpLmYoXCJpdGVyYXRvclwiKX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDk0KSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3IoOTUpLHIoNTIpLHIoMTAwKSxyKDEwMSksZS5leHBvcnRzPXIoMCkuU3ltYm9sfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigxKSxvPXIoMTApLGk9cig3KSxhPXIoNSkscz1yKDU0KSx1PXIoOTYpLktFWSxjPXIoMTMpLGw9cigzMSksZD1yKDIzKSxmPXIoMjIpLHA9cigyKSx5PXIoMzkpLHY9cig0MCksaD1yKDk3KSxfPXIoOTgpLGI9cig2KSxtPXIoOSksZz1yKDEyKSxSPXIoMjkpLE89cigyMSksdz1yKDQxKSxEPXIoOTkpLGo9cig1MSksaz1yKDgpLEw9cigxOSksTT1qLmYsVT1rLmYsQz1ELmYseD1uLlN5bWJvbCxQPW4uSlNPTixFPVAmJlAuc3RyaW5naWZ5LFM9cChcIl9oaWRkZW5cIikscT1wKFwidG9QcmltaXRpdmVcIiksST17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxUPWwoXCJzeW1ib2wtcmVnaXN0cnlcIiksSD1sKFwic3ltYm9sc1wiKSxBPWwoXCJvcC1zeW1ib2xzXCIpLEI9T2JqZWN0LnByb3RvdHlwZSxOPVwiZnVuY3Rpb25cIj09dHlwZW9mIHgsRj1uLlFPYmplY3QsVj0hRnx8IUYucHJvdG90eXBlfHwhRi5wcm90b3R5cGUuZmluZENoaWxkLHo9aSYmYyhmdW5jdGlvbigpe3JldHVybiA3IT13KFUoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBVKHRoaXMsXCJhXCIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU0oQix0KTtuJiZkZWxldGUgQlt0XSxVKGUsdCxyKSxuJiZlIT09QiYmVShCLHQsbil9OlUsRz1mdW5jdGlvbihlKXt2YXIgdD1IW2VdPXcoeC5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUsdH0sVz1OJiZcInN5bWJvbFwiPT10eXBlb2YgeC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiB4fSxKPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT09PUImJkooQSx0LHIpLGIoZSksdD1SKHQsITApLGIociksbyhILHQpPyhyLmVudW1lcmFibGU/KG8oZSxTKSYmZVtTXVt0XSYmKGVbU11bdF09ITEpLHI9dyhyLHtlbnVtZXJhYmxlOk8oMCwhMSl9KSk6KG8oZSxTKXx8VShlLFMsTygxLHt9KSksZVtTXVt0XT0hMCkseihlLHQscikpOlUoZSx0LHIpfSxZPWZ1bmN0aW9uKGUsdCl7YihlKTtmb3IodmFyIHIsbj1oKHQ9Zyh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylKKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LFo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD93KGUpOlkodyhlKSx0KX0sSz1mdW5jdGlvbihlKXt2YXIgdD1JLmNhbGwodGhpcyxlPVIoZSwhMCkpO3JldHVybiEodGhpcz09PUImJm8oSCxlKSYmIW8oQSxlKSkmJighKHR8fCFvKHRoaXMsZSl8fCFvKEgsZSl8fG8odGhpcyxTKSYmdGhpc1tTXVtlXSl8fHQpfSxYPWZ1bmN0aW9uKGUsdCl7aWYoZT1nKGUpLHQ9Uih0LCEwKSxlIT09Qnx8IW8oSCx0KXx8byhBLHQpKXt2YXIgcj1NKGUsdCk7cmV0dXJuIXJ8fCFvKEgsdCl8fG8oZSxTKSYmZVtTXVt0XXx8KHIuZW51bWVyYWJsZT0hMCkscn19LCQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9QyhnKGUpKSxuPVtdLGk9MDtyLmxlbmd0aD5pOylvKEgsdD1yW2krK10pfHx0PT1TfHx0PT11fHxuLnB1c2godCk7cmV0dXJuIG59LFE9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9ZT09PUIsbj1DKHI/QTpnKGUpKSxpPVtdLGE9MDtuLmxlbmd0aD5hOykhbyhILHQ9blthKytdKXx8ciYmIW8oQix0KXx8aS5wdXNoKEhbdF0pO3JldHVybiBpfTtOfHwoeD1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiB4KXRocm93IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciFcIik7dmFyIGU9Zihhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCksdD1mdW5jdGlvbihyKXt0aGlzPT09QiYmdC5jYWxsKEEsciksbyh0aGlzLFMpJiZvKHRoaXNbU10sZSkmJih0aGlzW1NdW2VdPSExKSx6KHRoaXMsZSxPKDEscikpfTtyZXR1cm4gaSYmViYmeihCLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6dH0pLEcoZSl9LHMoeC5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxqLmY9WCxrLmY9SixyKDYxKS5mPUQuZj0kLHIoMjcpLmY9SyxyKDQ3KS5mPVEsaSYmIXIoMTUpJiZzKEIsXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLEssITApLHkuZj1mdW5jdGlvbihlKXtyZXR1cm4gRyhwKGUpKX0pLGEoYS5HK2EuVythLkYqIU4se1N5bWJvbDp4fSk7Zm9yKHZhciBlZT1cImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzXCIuc3BsaXQoXCIsXCIpLHRlPTA7ZWUubGVuZ3RoPnRlOylwKGVlW3RlKytdKTtmb3IodmFyIHJlPUwocC5zdG9yZSksbmU9MDtyZS5sZW5ndGg+bmU7KXYocmVbbmUrK10pO2EoYS5TK2EuRiohTixcIlN5bWJvbFwiLHtmb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oVCxlKz1cIlwiKT9UW2VdOlRbZV09eChlKX0sa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKCFXKGUpKXRocm93IFR5cGVFcnJvcihlK1wiIGlzIG5vdCBhIHN5bWJvbCFcIik7Zm9yKHZhciB0IGluIFQpaWYoVFt0XT09PWUpcmV0dXJuIHR9LHVzZVNldHRlcjpmdW5jdGlvbigpe1Y9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe1Y9ITF9fSksYShhLlMrYS5GKiFOLFwiT2JqZWN0XCIse2NyZWF0ZTpaLGRlZmluZVByb3BlcnR5OkosZGVmaW5lUHJvcGVydGllczpZLGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpYLGdldE93blByb3BlcnR5TmFtZXM6JCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6UX0pLFAmJmEoYS5TK2EuRiooIU58fGMoZnVuY3Rpb24oKXt2YXIgZT14KCk7cmV0dXJuXCJbbnVsbF1cIiE9RShbZV0pfHxcInt9XCIhPUUoe2E6ZX0pfHxcInt9XCIhPUUoT2JqZWN0KGUpKX0pKSxcIkpTT05cIix7c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyLG49W2VdLG89MTthcmd1bWVudHMubGVuZ3RoPm87KW4ucHVzaChhcmd1bWVudHNbbysrXSk7aWYocj10PW5bMV0sKG0odCl8fHZvaWQgMCE9PWUpJiYhVyhlKSlyZXR1cm4gXyh0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiByJiYodD1yLmNhbGwodGhpcyxlLHQpKSwhVyh0KSlyZXR1cm4gdH0pLG5bMV09dCxFLmFwcGx5KFAsbil9fSkseC5wcm90b3R5cGVbcV18fHIoMTEpKHgucHJvdG90eXBlLHEseC5wcm90b3R5cGUudmFsdWVPZiksZCh4LFwiU3ltYm9sXCIpLGQoTWF0aCxcIk1hdGhcIiwhMCksZChuLkpTT04sXCJKU09OXCIsITApfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigyMikoXCJtZXRhXCIpLG89cig5KSxpPXIoMTApLGE9cig4KS5mLHM9MCx1PU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGM9IXIoMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxsPWZ1bmN0aW9uKGUpe2EoZSxuLHt2YWx1ZTp7aTpcIk9cIisgKytzLHc6e319fSl9LGQ9ZnVuY3Rpb24oZSx0KXtpZighbyhlKSlyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZT9lOihcInN0cmluZ1wiPT10eXBlb2YgZT9cIlNcIjpcIlBcIikrZTtpZighaShlLG4pKXtpZighdShlKSlyZXR1cm5cIkZcIjtpZighdClyZXR1cm5cIkVcIjtsKGUpfXJldHVybiBlW25dLml9LGY9ZnVuY3Rpb24oZSx0KXtpZighaShlLG4pKXtpZighdShlKSlyZXR1cm4hMDtpZighdClyZXR1cm4hMTtsKGUpfXJldHVybiBlW25dLnd9LHA9ZnVuY3Rpb24oZSl7cmV0dXJuIGMmJnkuTkVFRCYmdShlKSYmIWkoZSxuKSYmbChlKSxlfSx5PWUuZXhwb3J0cz17S0VZOm4sTkVFRDohMSxmYXN0S2V5OmQsZ2V0V2VhazpmLG9uRnJlZXplOnB9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxOSksbz1yKDQ3KSxpPXIoMjcpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uKGUpLHI9by5mO2lmKHIpZm9yKHZhciBhLHM9cihlKSx1PWkuZixjPTA7cy5sZW5ndGg+YzspdS5jYWxsKGUsYT1zW2MrK10pJiZ0LnB1c2goYSk7cmV0dXJuIHR9fSxmdW5jdGlvbihlLHQscil7dmFyIG49cigxNik7ZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVyblwiQXJyYXlcIj09bihlKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEyKSxvPXIoNjEpLmYsaT17fS50b1N0cmluZyxhPVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaChlKXtyZXR1cm4gYS5zbGljZSgpfX07ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIGEmJlwiW29iamVjdCBXaW5kb3ddXCI9PWkuY2FsbChlKT9zKGUpOm8obihlKSl9fSxmdW5jdGlvbihlLHQscil7cig0MCkoXCJhc3luY0l0ZXJhdG9yXCIpfSxmdW5jdGlvbihlLHQscil7cig0MCkoXCJvYnNlcnZhYmxlXCIpfSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTIyKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3IoMTA0KSxlLmV4cG9ydHM9cigwKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDMzKSxvPXIoNjMpO3IoNTApKFwiZ2V0UHJvdG90eXBlT2ZcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDEwNiksX19lc01vZHVsZTohMH19LGZ1bmN0aW9uKGUsdCxyKXtyKDEwNyksZS5leHBvcnRzPXIoMCkuT2JqZWN0LnNldFByb3RvdHlwZU9mfSxmdW5jdGlvbihlLHQscil7dmFyIG49cig1KTtuKG4uUyxcIk9iamVjdFwiLHtzZXRQcm90b3R5cGVPZjpyKDEwOCkuc2V0fSl9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpLG89cig2KSxpPWZ1bmN0aW9uKGUsdCl7aWYobyhlKSwhbih0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfTtlLmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbihlLHQsbil7dHJ5e249cigxNykoRnVuY3Rpb24uY2FsbCxyKDUxKS5mKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIikuc2V0LDIpLG4oZSxbXSksdD0hKGUgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goZSl7dD0hMH1yZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gaShlLHIpLHQ/ZS5fX3Byb3RvX189cjpuKGUsciksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOml9fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoMTEwKSxfX2VzTW9kdWxlOiEwfX0sZnVuY3Rpb24oZSx0LHIpe3IoMTExKTt2YXIgbj1yKDApLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDUpO24obi5TLFwiT2JqZWN0XCIse2NyZWF0ZTpyKDQxKX0pfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxvPW4uSlNPTnx8KG4uSlNPTj17c3RyaW5naWZ5OkpTT04uc3RyaW5naWZ5fSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvLnN0cmluZ2lmeS5hcHBseShvLGFyZ3VtZW50cyl9fSxmdW5jdGlvbihlLHQscil7cigxMTQpLGUuZXhwb3J0cz1yKDApLk9iamVjdC5rZXlzfSxmdW5jdGlvbihlLHQscil7dmFyIG49cigzMyksbz1yKDE5KTtyKDUwKShcImtleXNcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0sLGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIG49cigyNiksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxMTkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKTt0LmRlZmF1bHQ9ZnVuY3Rpb24gZ2V0KGUsdCxyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbj0oMCxhLmRlZmF1bHQpKGUsdCk7aWYodm9pZCAwPT09bil7dmFyIGk9KDAsby5kZWZhdWx0KShlKTtyZXR1cm4gbnVsbD09PWk/dm9pZCAwOmdldChpLHQscil9aWYoXCJ2YWx1ZVwiaW4gbilyZXR1cm4gbi52YWx1ZTt2YXIgcz1uLmdldDtpZih2b2lkIDAhPT1zKXJldHVybiBzLmNhbGwocil9fSwsLGZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cigxMjApLF9fZXNNb2R1bGU6ITB9fSxmdW5jdGlvbihlLHQscil7cigxMjEpO3ZhciBuPXIoMCkuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTIpLG89cig1MSkuZjtyKDUwKShcImdldE93blByb3BlcnR5RGVzY3JpcHRvclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8obihlKSx0KX19KX0sZnVuY3Rpb24oZSx0LHIpe3IoMTIzKSxlLmV4cG9ydHM9cigwKS5PYmplY3QuYXNzaWdufSxmdW5jdGlvbihlLHQscil7dmFyIG49cig1KTtuKG4uUytuLkYsXCJPYmplY3RcIix7YXNzaWduOnIoMTI0KX0pfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49cigxOSksbz1yKDQ3KSxpPXIoMjcpLGE9cigzMykscz1yKDYyKSx1PU9iamVjdC5hc3NpZ247ZS5leHBvcnRzPSF1fHxyKDEzKShmdW5jdGlvbigpe3ZhciBlPXt9LHQ9e30scj1TeW1ib2woKSxuPVwiYWJjZGVmZ2hpamtsbW5vcHFyc3RcIjtyZXR1cm4gZVtyXT03LG4uc3BsaXQoXCJcIikuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPWV9KSw3IT11KHt9LGUpW3JdfHxPYmplY3Qua2V5cyh1KHt9LHQpKS5qb2luKFwiXCIpIT1ufSk/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9YShlKSx1PWFyZ3VtZW50cy5sZW5ndGgsYz0xLGw9by5mLGQ9aS5mO3U+YzspZm9yKHZhciBmLHA9cyhhcmd1bWVudHNbYysrXSkseT1sP24ocCkuY29uY2F0KGwocCkpOm4ocCksdj15Lmxlbmd0aCxoPTA7dj5oOylkLmNhbGwocCxmPXlbaCsrXSkmJihyW2ZdPXBbZl0pO3JldHVybiByfTp1fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0OCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMzgpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShkKSxwPXIoMzYpLHk9Zi5nZXRMb2dnZXIoXCJSZWdpc3RyYXRpb25TdGF0dXNcIiksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIFJlZ2lzdHJhdGlvblN0YXR1cyhlLHQscixuKXsoMCx1LmRlZmF1bHQpKHRoaXMsUmVnaXN0cmF0aW9uU3RhdHVzKSx0aGlzLl9yZWdpc3RyeU9iamVjdFVSTD1lLHRoaXMuX3J1bnRpbWVVUkw9dCx0aGlzLl9kb21haW49KDAscC5kaXZpZGVVUkwpKHQpLmRvbWFpbix0aGlzLl9kaXNjb3ZlcmVkT2JqZWN0VVJMPXIsdGhpcy5fbWVzc2FnZUJ1cz1uLHRoaXMuX3N1YnNjcmlwdGlvblNldD0hMSx0aGlzLl9zdWJzY3JpYmVycz17bGl2ZTp7fSxkaXNjb25uZWN0ZWQ6e319fXJldHVybigwLGwuZGVmYXVsdCkoUmVnaXN0cmF0aW9uU3RhdHVzLFt7a2V5Olwib25MaXZlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7ci5fc3Vic2NyaXB0aW9uU2V0PyhyLl9zdWJzY3JpYmVycy5saXZlW2VdPXQsbigpKTpyLl9zdWJzY3JpYmUoKS50aGVuKGZ1bmN0aW9uKCl7ci5fc3Vic2NyaWJlcnMubGl2ZVtlXT10LG4oKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSl9KX19LHtrZXk6XCJvbkRpc2Nvbm5lY3RlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuX3N1YnNjcmlwdGlvblNldD8oci5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkW2VdPXQsbigpKTpyLl9zdWJzY3JpYmUoKS50aGVuKGZ1bmN0aW9uKCl7ci5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkW2VdPXQsbigpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9KX0pfX0se2tleTpcIl9zdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZTpcInN1YnNjcmliZVwiLGZyb206dGhpcy5fZGlzY292ZXJlZE9iamVjdFVSTCx0bzp0aGlzLl9ydW50aW1lVVJMK1wiL3N1YnNjcmlwdGlvbnNcIixib2R5OntyZXNvdXJjZXM6W3RoaXMuX3JlZ2lzdHJ5T2JqZWN0VVJMK1wiL3JlZ2lzdHJhdGlvblwiXX19O3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe3kubG9nKFwiW0Rpc2NvdmVyZWRPYmplY3Quc3Vic2NyaWJlXSBcIitlLl9yZWdpc3RyeU9iamVjdFVSTCtcIiByY3ZlZCByZXBseSBcIix0KSwyMDA9PT10LmJvZHkuY29kZT8oZS5fZ2VuZXJhdGVMaXN0ZW5lcihlLl9yZWdpc3RyeU9iamVjdFVSTCtcIi9yZWdpc3RyYXRpb25cIiksZS5fc3Vic2NyaXB0aW9uU2V0PSEwLHIoKSk6KHkuZXJyb3IoXCJFcnJvciBzdWJzY3JpYmluZyBcIixlLl9yZWdpc3RyeU9iamVjdFVSTCksbihcIkVycm9yIHN1YnNjcmliaW5nIFwiK2UuX3JlZ2lzdHJ5T2JqZWN0VVJMKSl9KX0pfX0se2tleTpcIl9nZW5lcmF0ZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7eS5sb2coXCJbRGlzY292ZXJlZE9iamVjdC5ub3RpZmljYXRpb25dIFwiK3QuX3JlZ2lzdHJ5T2JqZWN0VVJMK1wiOiBcIixlKSx0Ll9wcm9jZXNzTm90aWZpY2F0aW9uKGUpfSl9fSx7a2V5OlwiX3Byb2Nlc3NOb3RpZmljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnZhbHVlO3NldFRpbWVvdXQoZnVuY3Rpb24oKXsoMCxvLmRlZmF1bHQpKHQuX3N1YnNjcmliZXJzW3JdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zdWJzY3JpYmVyc1tyXVtlXSgpfSl9LDVlMyl9fSx7a2V5OlwiX3Vuc3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e3R5cGU6XCJ1bnN1YnNjcmliZVwiLGZyb206dGhpcy5fZGlzY292ZXJlZE9iamVjdFVSTCx0bzp0aGlzLl9ydW50aW1lVVJMK1wiL3N1YnNjcmlwdGlvbnNcIixib2R5OntyZXNvdXJjZTp0aGlzLl9yZWdpc3RyeU9iamVjdFVSTCtcIi9yZWdpc3RyYXRpb25cIn19O3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKHQpe3kubG9nKFwiW0Rpc2NvdmVyZWRPYmplY3QudW5zdWJzY3JpYmVdIFwiK2UuX3JlZ2lzdHJ5T2JqZWN0VVJMK1wiIHJjdmVkIHJlcGx5IFwiLHQpLDIwMD09PXQuYm9keS5jb2RlP3IoKTooeS5lcnJvcihcIkVycm9yIHVuc3Vic2NyaWJpbmcgXCIsZS5fcmVnaXN0cnlPYmplY3RVUkwpLG4oXCJFcnJvciB1bnN1YnNjcmliaW5nIFwiK2UuX3JlZ2lzdHJ5T2JqZWN0VVJMKSl9KX0pfX0se2tleTpcInVuc3Vic2NyaWJlTGl2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlIGluIHQuX3N1YnNjcmliZXJzLmxpdmUmJmRlbGV0ZSB0Ll9zdWJzY3JpYmVycy5saXZlW2VdLHQuX2FyZVN1YnNjcmlwdGlvbnNFbXB0eSgpP3QuX3Vuc3Vic2NyaWJlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiByKCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pOnIoKX0pfX0se2tleTpcInVuc3Vic2NyaWJlRGlzY29ubmVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2UgaW4gdC5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkPyhkZWxldGUgdC5fc3Vic2NyaWJlcnMuZGlzY29ubmVjdGVkW2VdLHQuX2FyZVN1YnNjcmlwdGlvbnNFbXB0eSgpP3QuX3Vuc3Vic2NyaWJlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiByKCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pOnIoKSk6bihlK1wiIGRvZXNuJ3Qgc3Vic2NyaWJlIG9uRGlzY29ubmVjdGVkIGZvciBcIit0Ll9yZWdpc3RyeU9iamVjdFVSTCl9KX19LHtrZXk6XCJfYXJlU3Vic2NyaXB0aW9uc0VtcHR5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PSgwLG8uZGVmYXVsdCkodGhpcy5fc3Vic2NyaWJlcnMubGl2ZSkubGVuZ3RoJiYwPT09KDAsby5kZWZhdWx0KSh0aGlzLl9zdWJzY3JpYmVycy5kaXNjb25uZWN0ZWQpLmxlbmd0aH19XSksUmVnaXN0cmF0aW9uU3RhdHVzfSgpO3QuZGVmYXVsdD12LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDI2KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzNCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzNSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigxMjcpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIE1pbmlCdXMoKXtyZXR1cm4oMCxhLmRlZmF1bHQpKHRoaXMsTWluaUJ1cyksKDAsbC5kZWZhdWx0KSh0aGlzLChNaW5pQnVzLl9fcHJvdG9fX3x8KDAsby5kZWZhdWx0KShNaW5pQnVzKSkuY2FsbCh0aGlzKSl9cmV0dXJuKDAsZi5kZWZhdWx0KShNaW5pQnVzLGUpLCgwLHUuZGVmYXVsdCkoTWluaUJ1cyxbe2tleTpcInBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG4uX2dlbklkKGUpLG4uX3Jlc3BvbnNlQ2FsbGJhY2soZSx0LHIpLG4uX29uUG9zdE1lc3NhZ2UoZSksZS5pZH19LHtrZXk6XCJfb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC5fb25SZXNwb25zZShlKSl7dmFyIHI9dC5fc3Vic2NyaXB0aW9uc1tlLnRvXTtyPyh0Ll9wdWJsaXNoT24ocixlKSxlLnRvLnN0YXJ0c1dpdGgoXCJoeXBlcnR5XCIpfHx0Ll9wdWJsaXNoT25EZWZhdWx0KGUpKTp0Ll9wdWJsaXNoT25EZWZhdWx0KGUpfX19XSksTWluaUJ1c30oeS5kZWZhdWx0KTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMzgpLGw9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxkPWwuZ2V0TG9nZ2VyKFwiQnVzXCIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBCdXMoKXsoMCxhLmRlZmF1bHQpKHRoaXMsQnVzKTt2YXIgZT10aGlzO2UuX21zZ0lkPTAsZS5fc3Vic2NyaXB0aW9ucz17fSxlLl9yZXNwb25zZVRpbWVPdXQ9MTVlMyxlLl9yZXNwb25zZUNhbGxiYWNrcz17fSxlLl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIoKX1yZXR1cm4oMCx1LmRlZmF1bHQpKEJ1cyxbe2tleTpcImFkZExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49bmV3IHAoci5fc3Vic2NyaXB0aW9ucyxlLHQpLG89ci5fc3Vic2NyaXB0aW9uc1tlXTtyZXR1cm4gb3x8KG89W10sci5fc3Vic2NyaXB0aW9uc1tlXT1vKSxvLnB1c2gobiksbn19LHtrZXk6XCJhZGRSZXNwb25zZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW2UrdF09cn19LHtrZXk6XCJyZW1vdmVSZXNwb25zZUxpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtkZWxldGUgdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbZSt0XX19LHtrZXk6XCJyZW1vdmVBbGxMaXN0ZW5lcnNPZlwiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW2VdfX0se2tleTpcImJpbmRcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxvPXRoaXM7cmV0dXJue3RoaXNMaXN0ZW5lcjpvLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7ci5wb3N0TWVzc2FnZShlKX0pLHRhcmdldExpc3RlbmVyOnIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtvLnBvc3RNZXNzYWdlKGUpfSksdW5iaW5kOmZ1bmN0aW9uKCl7bi50aGlzTGlzdGVuZXIucmVtb3ZlKCksbi50YXJnZXRMaXN0ZW5lci5yZW1vdmUoKX19fX0se2tleTpcIl9wdWJsaXNoT25EZWZhdWx0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3Vic2NyaXB0aW9uc1tcIipcIl07dCYmdGhpcy5fcHVibGlzaE9uKHQsZSl9fSx7a2V5OlwiX3B1Ymxpc2hPblwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuX2NhbGxiYWNrKHQpfSl9fSx7a2V5OlwiX3Jlc3BvbnNlQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl0sbj10aGlzO2lmKHQpe3ZhciBvPWUuZnJvbStlLmlkO24uX3Jlc3BvbnNlQ2FsbGJhY2tzW29dPXQsciYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PW4uX3Jlc3BvbnNlQ2FsbGJhY2tzW29dO2lmKGRlbGV0ZSBuLl9yZXNwb25zZUNhbGxiYWNrc1tvXSx0KXt0KHtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGJvZHk6e2NvZGU6NDA4LGRlc2M6XCJSZXNwb25zZSB0aW1lb3V0IVwiLHZhbHVlOmV9fSl9fSxuLl9yZXNwb25zZVRpbWVPdXQpfX19LHtrZXk6XCJfb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoXCJyZXNwb25zZVwiPT09ZS50eXBlKXt2YXIgcj1lLnRvK2UuaWQsbj10Ll9yZXNwb25zZUNhbGxiYWNrc1tyXTtpZihlLmJvZHkuY29kZT49MjAwJiZkZWxldGUgdC5fcmVzcG9uc2VDYWxsYmFja3Nbcl0sbilyZXR1cm4gbihlKSwhMH1yZXR1cm4hMX19LHtrZXk6XCJfb25NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC5fb25SZXNwb25zZShlKSl7dmFyIHI9dC5fc3Vic2NyaXB0aW9uc1tlLnRvXTtyP3QuX3B1Ymxpc2hPbihyLGUpOnQuX3B1Ymxpc2hPbkRlZmF1bHQoZSl9fX0se2tleTpcIl9nZW5JZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2UuaWQmJjAhPT1lLmlkfHwodGhpcy5fbXNnSWQrKyxlLmlkPXRoaXMuX21zZ0lkKX19LHtrZXk6XCJwb3N0TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7fX0se2tleTpcInBvc3RNZXNzYWdlV2l0aFJldHJpZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPTAsYT1mdW5jdGlvbigpe3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQsbyl7bi5wb3N0TWVzc2FnZShlLGZ1bmN0aW9uKG4pezQwOD09PW4uYm9keS5jb2RlfHw1MDA9PT1uLmJvZHkuY29kZT9vKCk6KGQuaW5mbyhcIltCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllc10gbXNnIGRlbGl2ZXJlZDogXCIsZSkscihuKSx0KCkpfSl9KX07IWZ1bmN0aW9uIHRyeUFnYWluKCl7YSgpLnRoZW4oZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7aWYoZC53YXJuKFwiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBNZXNzYWdlIEJvdW5jZWQgKHJldHJ5IFwiK2krXCIpOiAnXCIsZSksIShpKys8dCkpe3ZhciByPVwiW0Vycm9yXSBNZXNzYWdlIEJvdW5jZWQgKGRlbGl2ZXJ5IGF0dGVtcHRzIFwiK3QrXCIpOiAnXCI7dGhyb3cgbmV3IEVycm9yKHIrZSl9dHJ5QWdhaW4oKX0pfSgpfX0se2tleTpcIl9vblBvc3RNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7fX0se2tleTpcIl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbigpe319XSksQnVzfSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBNc2dMaXN0ZW5lcihlLHQscil7KDAsYS5kZWZhdWx0KSh0aGlzLE1zZ0xpc3RlbmVyKTt2YXIgbj10aGlzO24uX3N1YnNjcmlwdGlvbnM9ZSxuLl91cmw9dCxuLl9jYWxsYmFjaz1yfXJldHVybigwLHUuZGVmYXVsdCkoTXNnTGlzdGVuZXIsW3trZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9zdWJzY3JpcHRpb25zW2UuX3VybF07aWYodCl7dmFyIHI9dC5pbmRleE9mKGUpO3Quc3BsaWNlKHIsMSksMD09PXQubGVuZ3RoJiZkZWxldGUgZS5fc3Vic2NyaXB0aW9uc1tlLl91cmxdfX19LHtrZXk6XCJ1cmxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxNc2dMaXN0ZW5lcn0oKTt0LmRlZmF1bHQ9ZixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMTI5KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIFNhbmRib3hSZWdpc3RyeShlKXsoMCxvLmRlZmF1bHQpKHRoaXMsU2FuZGJveFJlZ2lzdHJ5KTt2YXIgdD10aGlzO3QuX2J1cz1lLHQuX2ZhY3Rvcnk9bmV3IHUuZGVmYXVsdChlKSx0Ll9jb21wb25lbnRzPXt9LGUuYWRkTGlzdGVuZXIoU2FuZGJveFJlZ2lzdHJ5LkludGVybmFsRGVwbG95QWRkcmVzcyxmdW5jdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJjcmVhdGVcIjp0Ll9vbkRlcGxveShlKTticmVhaztjYXNlXCJkZWxldGVcIjp0Ll9vblJlbW92ZShlKX19KX1yZXR1cm4oMCxhLmRlZmF1bHQpKFNhbmRib3hSZWdpc3RyeSxbe2tleTpcIl9yZXNwb25zZU1zZ1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOlNhbmRib3hSZWdpc3RyeS5JbnRlcm5hbERlcGxveUFkZHJlc3MsdG86U2FuZGJveFJlZ2lzdHJ5LkV4dGVybmFsRGVwbG95QWRkcmVzc30sbz17fTtyZXR1cm4gdCYmKG8uY29kZT10KSxyJiYoby5kZXNjPXIpLG4uYm9keT1vLG59fSx7a2V5OlwiX29uRGVwbG95XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5jb25maWcsbj1lLmJvZHkudXJsLG89ZS5ib2R5LnNvdXJjZUNvZGUsaT12b2lkIDAsYT12b2lkIDA7aWYodC5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShuKSlpPTUwMCxhPVwiSW5zdGFuY2UgXCIrbitcIiBhbHJlYWR5IGV4aXN0IVwiO2Vsc2UgdHJ5e3QuX2NvbXBvbmVudHNbbl09dC5fY3JlYXRlKG4sbyxyLHQuX2ZhY3RvcnkpLGk9MjAwfWNhdGNoKGUpe2k9NTAwLGE9ZX12YXIgcz10Ll9yZXNwb25zZU1zZyhlLGksYSk7dC5fYnVzLnBvc3RNZXNzYWdlKHMpfX0se2tleTpcIl9vblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkudXJsLG49dm9pZCAwLG89dm9pZCAwO3QuX2NvbXBvbmVudHMuaGFzT3duUHJvcGVydHkocik/KGRlbGV0ZSB0Ll9jb21wb25lbnRzW3JdLHQuX2J1cy5yZW1vdmVBbGxMaXN0ZW5lcnNPZihyKSxuPTIwMCk6KG49NTAwLG89XCJJbnN0YW5jZSBcIityK1wiIGRvZXNuJ3QgZXhpc3QhXCIpO3ZhciBpPXQuX3Jlc3BvbnNlTXNnKGUsbixvKTt0Ll9idXMucG9zdE1lc3NhZ2UoaSl9fSx7a2V5OlwiX2NyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe319LHtrZXk6XCJjb21wb25lbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHN9fV0pLFNhbmRib3hSZWdpc3RyeX0oKTtjLkV4dGVybmFsRGVwbG95QWRkcmVzcz1cImh5cGVydHktcnVudGltZTovL3NhbmRib3gvZXh0ZXJuYWxcIixjLkludGVybmFsRGVwbG95QWRkcmVzcz1cImh5cGVydHktcnVudGltZTovL3NhbmRib3gvaW50ZXJuYWxcIix0LmRlZmF1bHQ9YyxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMTMwKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDE2NSksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzNiksZj1yKDEzNCkscD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGYpLHk9cigxMzUpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSxoPXIoMTI1KSxfPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksYj1yKDE2NyksbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGIpLGc9cigxMzYpLFI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChnKSxPPXIoMTM4KSx3PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoTyksRD1yKDE2OCksaj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEQpLGs9cigxNzApLEw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChrKSxNPXIoMTQwKSxVPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoTSksQz1yKDE3MykseD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEMpLFA9cigxNDIpLEU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChQKSxTPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU2FuZGJveEZhY3RvcnkoZSl7KDAsby5kZWZhdWx0KSh0aGlzLFNhbmRib3hGYWN0b3J5KTt2YXIgdD10aGlzO3QuX2J1cz1lLHQuX2RpdmlkZVVSTD1kLmRpdmlkZVVSTH1yZXR1cm4oMCxhLmRlZmF1bHQpKFNhbmRib3hGYWN0b3J5LFt7a2V5OlwiY3JlYXRlU3luY2hlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IHUuZGVmYXVsdChlLHQscil9fSx7a2V5OlwiY3JlYXRlSWRlbnRpdHlNYW5hZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgcC5kZWZhdWx0KGUsdCxyKX19LHtrZXk6XCJjcmVhdGVEaXNjb3ZlcnlcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7cmV0dXJuIG5ldyB2LmRlZmF1bHQoZSx0LHIpfX0se2tleTpcImNyZWF0ZVNlYXJjaFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBtLmRlZmF1bHQoZSx0KX19LHtrZXk6XCJjcmVhdGVDb250ZXh0T2JzZXJ2ZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtyZXR1cm4gbmV3IFIuZGVmYXVsdChlLHQscixuLHRoaXMpfX0se2tleTpcImNyZWF0ZUNvbnRleHRSZXBvcnRlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IHcuZGVmYXVsdChlLHQscix0aGlzKX19LHtrZXk6XCJjcmVhdGVOb3RpZmljYXRpb25IYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBsLmRlZmF1bHQoZSl9fSx7a2V5OlwiY3JlYXRlTWVzc2FnZUJvZHlJZGVudGl0eVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpLGEscyl7cmV0dXJuIG5ldyBqLmRlZmF1bHQoZSx0LHIsbixvLGksYSxzKX19LHtrZXk6XCJjcmVhdGVDaGF0TWFuYWdlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3JldHVybiBuZXcgTC5kZWZhdWx0KGUsdCxyLG4sdGhpcyl9fSx7a2V5OlwiY3JlYXRlQ2hhdENvbnRyb2xsZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8saSl7cmV0dXJuIG5ldyBVLmRlZmF1bHQoZSx0LHIsbixvLGkpfX0se2tleTpcImNyZWF0ZVNpbXBsZUNoYXRNYW5hZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7cmV0dXJuIG5ldyB4LmRlZmF1bHQoZSx0LHIsbix0aGlzKX19LHtrZXk6XCJjcmVhdGVDaGF0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7cmV0dXJuIG5ldyBFLmRlZmF1bHQoZSx0LHIsbil9fSx7a2V5OlwiY3JlYXRlUmVnaXN0cmF0aW9uU3RhdHVzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7cmV0dXJuIG5ldyBfLmRlZmF1bHQoZSx0LHIsbil9fSx7a2V5OlwiZGl2aWRlVVJMXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RpdmlkZVVSTH19XSksU2FuZGJveEZhY3Rvcnl9KCk7dC5kZWZhdWx0PVMsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTAyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDMpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoNCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzOCksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGQpLHA9cigzNikseT1yKDE1Niksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHkpLGg9cigxNjMpLF89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxiPXIoMTY0KSxtPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYiksZz1mLmdldExvZ2dlcihcIlN5bmNoZXJcIiksUj1mdW5jdGlvbigpe2Z1bmN0aW9uIFN5bmNoZXIoZSx0LHIpeygwLHUuZGVmYXVsdCkodGhpcyxTeW5jaGVyKTt2YXIgbj10aGlzO24uX293bmVyPWUsbi5fYnVzPXQsbi5fc3ViVVJMPXIucnVudGltZVVSTCtcIi9zbVwiLG4uX3J1bnRpbWVVcmw9ci5ydW50aW1lVVJMLG4uX3AycEhhbmRsZXI9ci5wMnBIYW5kbGVyLG4uX3AycFJlcXVlc3Rlcj1yLnAycFJlcXVlc3RlcixuLl9yZXBvcnRlcnM9e30sbi5fb2JzZXJ2ZXJzPXt9LG4uX3Byb3Zpc2lvbmFscz17fSx0LmFkZExpc3RlbmVyKGUsZnVuY3Rpb24odCl7aWYodC5mcm9tIT09ZSlzd2l0Y2goZy5pbmZvKFwiW1N5bmNoZXJdIFN5bmNoZXItUkNWOiBcIix0LG4pLHQudHlwZSl7Y2FzZVwiZm9yd2FyZFwiOm4uX29uRm9yd2FyZCh0KTticmVhaztjYXNlXCJjcmVhdGVcIjpuLl9vblJlbW90ZUNyZWF0ZSh0KTticmVhaztjYXNlXCJkZWxldGVcIjpuLl9vblJlbW90ZURlbGV0ZSh0KTticmVhaztjYXNlXCJleGVjdXRlXCI6bi5fb25FeGVjdXRlKHQpfX0pfXJldHVybigwLGwuZGVmYXVsdCkoU3luY2hlcixbe2tleTpcImNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSYmYXJndW1lbnRzWzNdLG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0mJmFyZ3VtZW50c1s0XSxpPWFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdP2FyZ3VtZW50c1s1XTpcIm5vIG5hbWVcIixzPWFyZ3VtZW50c1s2XSx1PWFyZ3VtZW50c1s3XTtpZighZSl0aHJvdyBFcnJvcihcIltTeW5jaGVyIC0gQ3JlYXRlXSAtIFlvdSBuZWVkIHNwZWNpZnkgdGhlIGRhdGEgb2JqZWN0IHNjaGVtYVwiKTtpZighdCl0aHJvdyBFcnJvcihcIltTeW5jaGVyIC0gQ3JlYXRlXSAtVGhlIG9ic2VydmVycyBzaG91bGQgYmUgZGVmaW5lZFwiKTt2YXIgYz10aGlzO3U9dXx8e307dmFyIGw9KDAsYS5kZWZhdWx0KSh7fSx1KTtyZXR1cm4gbC5wMnA9byxsLnN0b3JlPW4sbC5zY2hlbWE9ZSxsLmF1dGhvcmlzZT10LGwucDJwSGFuZGxlcj1jLl9wMnBIYW5kbGVyLGwucDJwUmVxdWVzdGVyPWMuX3AycFJlcXVlc3RlcixsLmRhdGE9cj8oMCxwLmRlZXBDbG9uZSkocik6e30sbC5uYW1lPTA9PT1pLmxlbmd0aD9cIm5vIG5hbWVcIjppLGwucmVwb3J0ZXI9dS5oYXNPd25Qcm9wZXJ0eShcInJlcG9ydGVyXCIpJiZcImJvb2xlYW5cIiE9dHlwZW9mIHUucmVwb3J0ZXI/dS5yZXBvcnRlcjpjLl9vd25lcixsLnJlc3VtZT0hMSx1PyhsLm11dHVhbD0hdS5oYXNPd25Qcm9wZXJ0eShcIm11dHVhbFwiKXx8dS5tdXR1YWwsbC5uYW1lPXUuaGFzT3duUHJvcGVydHkoXCJuYW1lXCIpP3UubmFtZTpsLm5hbWUpOmwubXV0dWFsPSEwLHUuaGFzT3duUHJvcGVydHkoXCJyZXVzZVVSTFwiKSYmKGwucmVzb3VyY2U9dS5yZXVzZVVSTCkscyYmKGwuaWRlbnRpdHk9cyksYy5fY3JlYXRlKGwpfX0se2tleTpcInJlc3VtZVJlcG9ydGVyc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGcubG9nKFwiW3N5bmNoZXIgLSBjcmVhdGVdIC0gcmVzdW1lIFJlcG9ydGVyIC0gY3JpdGVyaWE6IFwiLGUpLCgwLGEuZGVmYXVsdCkoZSx7cmVzdW1lOiEwfSksdC5fcmVzdW1lQ3JlYXRlKGUpfX0se2tleTpcInN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zdWJzY3JpYmUoZSl9fSx7a2V5OlwicmVzdW1lT2JzZXJ2ZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWV8fHt9O3JldHVybigwLGEuZGVmYXVsdCkocix7cmVzdW1lOiEwfSksdC5fcmVzdW1lU3Vic2NyaWJlKHIpfX0se2tleTpcInJlYWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxuKXtyLl9yZWFkUmVwb3J0ZXIoZSkudGhlbihmdW5jdGlvbihlKXt0KGUpfSl9KX19LHtrZXk6XCJfcmVhZENhbGxCYWNrXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsbz17fSxpPXt9LHM9MDtpZihlLmJvZHkuY29kZTwzMDApaWYoZS5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KFwicmVzcG9uc2VzXCIpKWlmKDA9PT1zKWk9ZS5ib2R5LnZhbHVlLCsrcztlbHNle2RlbGV0ZSBlLmJvZHkudmFsdWUucmVzcG9uc2VzO3ZhciB1PXZvaWQgMDtmb3IodSBpbiBlLmJvZHkudmFsdWUpby5oYXNPd25Qcm9wZXJ0eSh1KXx8KG9bdV09e30pLCgwLGEuZGVmYXVsdCkob1t1XSxlLmJvZHkudmFsdWVbdV0pOysrcyxzPT09aS5yZXNwb25zZXMmJihpLmNoaWxkcmVuT2JqZWN0cz1vLGRlbGV0ZSBpLnJlc3BvbnNlcyxuLl9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihlLmZyb20sZS5pZCksdChpKSl9ZWxzZSBuLl9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihlLmZyb20sZS5pZCksdChlLmJvZHkudmFsdWUpO2Vsc2UgcihlLmJvZHkuZGVzYyl9fSx7a2V5OlwiX3JlYWRSZXBvcnRlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTpcInJlYWRcIixmcm9tOnQuX293bmVyLHRvOmV9O3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsbil7dC5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24ocil7cmV0dXJuIHQuX3JlYWRDYWxsQmFjayhyLGUsbil9LCExKX0pfX0se2tleTpcIm9uTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyPWV9fSx7a2V5Olwib25DbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uQ2xvc2U9ZX19LHtrZXk6XCJfY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPSgwLGEuZGVmYXVsdCkoe30sZSksaT1lLnJlc3VtZTtvLmNyZWF0ZWQ9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLG8ucnVudGltZT10Ll9ydW50aW1lVXJsO3ZhciBzPSgwLHAuZGVlcENsb25lKShvKTtkZWxldGUgcy5wMnAsZGVsZXRlIHMuc3RvcmUsZGVsZXRlIHMub2JzZXJ2ZXJzLGRlbGV0ZSBzLmlkZW50aXR5O3ZhciB1PXt0eXBlOlwiY3JlYXRlXCIsZnJvbTp0Ll9vd25lcix0bzp0Ll9zdWJVUkwsYm9keTp7cmVzdW1lOmksdmFsdWU6c319O3UuYm9keS5zY2hlbWE9by5zY2hlbWEsby5wMnAmJih1LmJvZHkucDJwPW8ucDJwKSxvLnN0b3JlJiYodS5ib2R5LnN0b3JlPW8uc3RvcmUpLG8uaWRlbnRpdHkmJih1LmJvZHkuaWRlbnRpdHk9by5pZGVudGl0eSksdC5fYnVzLnBvc3RNZXNzYWdlKHUsZnVuY3Rpb24oaSl7aWYoZy5sb2coXCJbc3luY2hlciAtIGNyZWF0ZV0gLSBjcmVhdGUtcmVzcG9uc2U6IFwiLGkpLDIwMD09PWkuYm9keS5jb2RlKXtvLnVybD1pLmJvZHkucmVzb3VyY2Usby5zdGF0dXM9XCJsaXZlXCIsby5zeW5jaGVyPXQsby5jaGlsZHJlbnM9aS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzO3ZhciBhPXQuX3JlcG9ydGVyc1tvLnVybF07YXx8KGE9bmV3IHYuZGVmYXVsdChvKSx0Ll9yZXBvcnRlcnNbby51cmxdPWEpLGEuaW52aXRlT2JzZXJ2ZXJzKGUuYXV0aG9yaXNlLGUucDJwKSxyKGEpfWVsc2UgbihpLmJvZHkuZGVzYyl9KX0pfX0se2tleTpcIl9yZXN1bWVDcmVhdGVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPWUucmVzdW1lLGE9e3R5cGU6XCJjcmVhdGVcIixmcm9tOnIuX293bmVyLHRvOnIuX3N1YlVSTCxib2R5OntyZXN1bWU6aX19O2cubG9nKFwiW3N5bmNoZXIgLSBjcmVhdGVdOiBcIixlLGEpLGUmJihhLmJvZHkudmFsdWU9ZSxlLmhhc093blByb3BlcnR5KFwicmVwb3J0ZXJcIik/YS5ib2R5LnZhbHVlLnJlcG9ydGVyPWUucmVwb3J0ZXI6YS5ib2R5LnZhbHVlLnJlcG9ydGVyPXIuX293bmVyKSxlLnAycCYmKGEuYm9keS5wMnA9ZS5wMnApLGUuc3RvcmUmJihhLmJvZHkuc3RvcmU9ZS5zdG9yZSksZS5vYnNlcnZlcnMmJihhLmJvZHkuYXV0aG9yaXNlPWUub2JzZXJ2ZXJzKSxlLmlkZW50aXR5JiYoYS5ib2R5LmlkZW50aXR5PWUuaWRlbnRpdHkpLGcubG9nKFwiW3N5bmNoZXIuX3Jlc3VtZUNyZWF0ZV0gLSByZXN1bWUgbWVzc2FnZTogXCIsYSksci5fYnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24oZSl7aWYoZy5sb2coXCJbc3luY2hlci5fcmVzdW1lQ3JlYXRlXSAtIGNyZWF0ZS1yZXN1bWVkLXJlc3BvbnNlOiBcIixlKSwyMDA9PT1lLmJvZHkuY29kZSl7dmFyIGk9ZS5ib2R5LnZhbHVlO2Zvcih2YXIgYSBpbiBpKXt2YXIgcz1pW2FdO3MuZGF0YT0oMCxwLmRlZXBDbG9uZSkocy5kYXRhKXx8e30scy5jaGlsZHJlbk9iamVjdHMmJihzLmNoaWxkcmVuT2JqZWN0cz0oMCxwLmRlZXBDbG9uZSkocy5jaGlsZHJlbk9iamVjdHMpKSxzLm11dHVhbD0hMSxzLnJlc3VtZT0hMCxzLnN0YXR1cz1cImxpdmVcIixzLnN5bmNoZXI9cixnLmxvZyhcIltzeW5jaGVyLl9yZXN1bWVDcmVhdGVdIC0gY3JlYXRlLXJlc3VtZWQtZGF0YU9iamVjdFJlcG9ydGVyXCIscyk7dmFyIHU9bmV3IHYuZGVmYXVsdChzKTtzLmNoaWxkcmVuT2JqZWN0cyYmdS5yZXN1bWVDaGlsZHJlbnMocy5jaGlsZHJlbk9iamVjdHMpLHIuX3JlcG9ydGVyc1tzLnVybF09dX1uKHIuX3JlcG9ydGVycyksdC5fb25SZXBvcnRlcnNSZXN1bWUmJnQuX29uUmVwb3J0ZXJzUmVzdW1lKHQuX3JlcG9ydGVycyl9ZWxzZSA0MDQ9PT1lLmJvZHkuY29kZT9uKHt9KTpvKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OlwiX3N1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz17dHlwZTpcInN1YnNjcmliZVwiLGZyb206dC5fb3duZXIsdG86dC5fc3ViVVJMLGJvZHk6ZX07Zy5sb2coXCJbc3luY2hlcl9zdWJzY3JpYmVdIC0gc3Vic2NyaWJlIG1lc3NhZ2U6IFwiLGUsbyksdC5fYnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24obyl7Zy5sb2coXCJbc3luY2hlcl0gLSBzdWJzY3JpYmUtcmVzcG9uc2U6IFwiLG8pO3ZhciBpPW8uYm9keS5yZXNvdXJjZSxhPXQuX3Byb3Zpc2lvbmFsc1tpXTtpZihkZWxldGUgdC5fcHJvdmlzaW9uYWxzW2ldLGEmJmEuX3JlbGVhc2VMaXN0ZW5lcnMoKSxvLmJvZHkuY29kZTwyMDApZy5sb2coXCJbc3luY2hlcl0gLSBuZXcgRGF0YVByb3Zpc2lvbmFsOiBcIixvLmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMsaSksYT1uZXcgbS5kZWZhdWx0KHQuX293bmVyLGksdC5fYnVzLG8uYm9keS5jaGlsZHJlblJlc291cmNlcyksdC5fcHJvdmlzaW9uYWxzW2ldPWE7ZWxzZSBpZigyMDA9PT1vLmJvZHkuY29kZSl7Zy5sb2coXCJbc3luY2hlcl0gLSBuZXcgRGF0YSBPYmplY3QgT2JzZXJ2ZXI6IFwiLG8sdC5fcHJvdmlzaW9uYWxzKTt2YXIgcz1vLmJvZHkudmFsdWU7cy5zeW5jaGVyPXQscy5wMnA9ZS5wMnAscy5zdG9yZT1lLnN0b3JlLHMuaWRlbnRpdHk9ZS5pZGVudGl0eSxzLnJlc3VtZT0hMSxzLm11dHVhbD1lLm11dHVhbDt2YXIgdT10Ll9vYnNlcnZlcnNbaV07dT91LnN5bmMoKToodT1uZXcgXy5kZWZhdWx0KHMpLHQuX29ic2VydmVyc1tpXT11KSxnLmxvZyhcIltzeW5jaGVyXSAtIG5ldyBEYXRhIE9iamVjdCBPYnNlcnZlciBhbHJlYWR5IGV4aXN0OiBcIix1KSxyKHUpLGEmJmEuYXBwbHkodSl9ZWxzZSBuKG8uYm9keS5kZXNjKX0pfSl9fSx7a2V5OlwiX3Jlc3VtZVN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9e3R5cGU6XCJzdWJzY3JpYmVcIixmcm9tOnIuX293bmVyLHRvOnIuX3N1YlVSTCxib2R5Ont9fTtlJiYoZS5oYXNPd25Qcm9wZXJ0eShcInAycFwiKSYmKGkuYm9keS5wMnA9ZS5wMnApLGUuaGFzT3duUHJvcGVydHkoXCJzdG9yZVwiKSYmKGkuYm9keS5zdG9yZT1lLnN0b3JlKSxlLmhhc093blByb3BlcnR5KFwic2NoZW1hXCIpJiYoaS5ib2R5LnNjaGVtYT1lLnNjaGVtYSksZS5oYXNPd25Qcm9wZXJ0eShcImlkZW50aXR5XCIpJiYoaS5ib2R5LmlkZW50aXR5PWUuaWRlbnRpdHkpLGUuaGFzT3duUHJvcGVydHkoXCJyZXNvdXJjZVwiKSYmKGkuYm9keS5yZXNvdXJjZT1lLnJlc291cmNlKSksaS5ib2R5LnJlc3VtZT1lLnJlc3VtZTt2YXIgYT1lLm11dHVhbDtlLmhhc093blByb3BlcnR5KFwibXV0dWFsXCIpJiYoaS5ib2R5Lm11dHVhbD1hKSxyLl9idXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihlKXt2YXIgaT1lLmJvZHkucmVzb3VyY2UsYT1yLl9wcm92aXNpb25hbHNbaV07aWYoZGVsZXRlIHIuX3Byb3Zpc2lvbmFsc1tpXSxhJiZhLl9yZWxlYXNlTGlzdGVuZXJzKCksZS5ib2R5LmNvZGU8MjAwKWcubG9nKFwiW3N5bmNoZXJdIC0gcmVzdW1lIG5ldyBEYXRhUHJvdmlzaW9uYWw6IFwiLGUsaSksYT1uZXcgbS5kZWZhdWx0KHIuX293bmVyLGksci5fYnVzLGUuYm9keS5jaGlsZHJlblJlc291cmNlcyksci5fcHJvdmlzaW9uYWxzW2ldPWE7ZWxzZSBpZigyMDA9PT1lLmJvZHkuY29kZSl7dmFyIHM9ZS5ib2R5LnZhbHVlO2Zvcih2YXIgdSBpbiBzKXt2YXIgYz1zW3VdO2MuY2hpbGRyZW5PYmplY3RzJiYoYy5jaGlsZHJlbk9iamVjdHM9KDAscC5kZWVwQ2xvbmUpKGMuY2hpbGRyZW5PYmplY3RzKSksYy5kYXRhPSgwLHAuZGVlcENsb25lKShjLmRhdGEpfHx7fSxjLnJlc3VtZT0hMCxjLnN5bmNoZXI9cjt2YXIgbD1uZXcgXy5kZWZhdWx0KGMpO2MuY2hpbGRyZW5PYmplY3RzJiZsLnJlc3VtZUNoaWxkcmVucyhjLmNoaWxkcmVuT2JqZWN0cyksZy5sb2coXCJbc3luY2hlci5fcmVzdW1lU3Vic2NyaWJlXSAtIG5ldyBkYXRhT2JqZWN0XCIsbCksci5fb2JzZXJ2ZXJzW2wudXJsXT1sLHIuX3Byb3Zpc2lvbmFsc1tsLnVybF0mJnIuX3Byb3Zpc2lvbmFsc1tsLnVybF0uYXBwbHkobCl9bihyLl9vYnNlcnZlcnMpLHQuX29uT2JzZXJ2ZXJzUmVzdW1lJiZ0Ll9vbk9ic2VydmVyc1Jlc3VtZShyLl9vYnNlcnZlcnMpfWVsc2UgNDA0PT09ZS5ib2R5LmNvZGU/bih7fSk6byhlLmJvZHkuZGVzYyl9KX0pfX0se2tleTpcIl9vbkZvcndhcmRcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9yZXBvcnRlcnNbZS5ib2R5LnRvXS5fb25Gb3J3YXJkKGUpfX0se2tleTpcIl9vblJlbW90ZUNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20uc2xpY2UoMCwtMTMpLG49KDAscC5kaXZpZGVVUkwpKHIpLG89bi5kb21haW4saT17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLGRvbWFpbjpvLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBuPTIwMDtyJiYobj1yKSx0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm59fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihnLmluZm8oXCJbU3luY2hlcl0gTk9USUZJQ0FUSU9OLUVWRU5UOiBcIixpKSx0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXIoaSkpfX0se2tleTpcIl9vblJlbW90ZURlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2Usbj10Ll9vYnNlcnZlcnNbcl0sbz17ZnJvbTp0Lm93bmVyLHRvOnQuX3N1YlVSTCxpZDplLmlkLHR5cGU6XCJ1bnN1YnNjcmliZVwiLGJvZHk6e3Jlc291cmNlOmUuYm9keS5yZXNvdXJjZX19O2lmKHQuX2J1cy5wb3N0TWVzc2FnZShvKSxkZWxldGUgdC5fb2JzZXJ2ZXJzW3JdLG4pe3ZhciBpPXt0eXBlOmUudHlwZSx1cmw6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksYWNrOmZ1bmN0aW9uKHIpe3ZhciBvPTIwMDtyJiYobz1yKSwyMDA9PT1vJiZuLmRlbGV0ZSgpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6byxzb3VyY2U6dC5fb3duZXJ9fSl9fTt0Ll9vbk5vdGlmaWNhdGlvbkhhbmRsZXImJihnLmxvZyhcIk5PVElGSUNBVElPTi1FVkVOVDogXCIsaSksdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGkpKX1lbHNlIHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LHNvdXJjZTp0Ll9vd25lcn19KX19LHtrZXk6XCJfb25FeGVjdXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDB9fTtpZigoZS5mcm9tPT09dC5fcnVudGltZVVybCtcIi9yZWdpc3RyeS9cInx8ZS5mcm9tPT09dC5fcnVudGltZVVybCtcIi9yZWdpc3RyeVwiKSYmZS5ib2R5JiZlLmJvZHkubWV0aG9kJiZcImNsb3NlXCI9PT1lLmJvZHkubWV0aG9kJiZ0Ll9vbkNsb3NlKXt2YXIgbj17dHlwZTpcImNsb3NlXCIsYWNrOmZ1bmN0aW9uKGUpe2UmJihyLmJvZHkuY29kZT1lKSx0Ll9idXMucG9zdE1lc3NhZ2Uocil9fTtnLmluZm8oXCJbU3luY2hlcl0gQ2xvc2UtRVZFTlQ6IFwiLG4pLHQuX29uQ2xvc2Uobil9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5Olwib25SZXBvcnRlcnNSZXN1bWVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlcG9ydGVyc1Jlc3VtZT1lfX0se2tleTpcIm9uT2JzZXJ2ZXJzUmVzdW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25PYnNlcnZlcnNSZXN1bWU9ZX19LHtrZXk6XCJvd25lclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcn19LHtrZXk6XCJyZXBvcnRlcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVwb3J0ZXJzfX0se2tleTpcIm9ic2VydmVyc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYnNlcnZlcnN9fV0pLFN5bmNoZXJ9KCk7dC5kZWZhdWx0PVIsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNjApLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNDgpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTAyKSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDMpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoNCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigzOCksaD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHYpLF89cigxMzIpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxtPXIoMTMzKSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj1yKDE1OCksTz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KFIpLHc9cigzNiksRD1yKDE1OSksaj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEQpLGs9aC5nZXRMb2dnZXIoXCJEYXRhT2JqZWN0XCIpLEw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBEYXRhT2JqZWN0KGUpe2Z1bmN0aW9uIHRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihlKXt0aHJvd1wiW0RhdGFPYmplY3RdIFwiK2UrXCIgbWFuZGF0b3J5IHBhcmFtZXRlciBpcyBtaXNzaW5nXCJ9KDAsZi5kZWZhdWx0KSh0aGlzLERhdGFPYmplY3QpO3ZhciB0PXRoaXM7aWYoZS5zeW5jaGVyP3QuX3N5bmNoZXI9ZS5zeW5jaGVyOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInN5bmNoZXJcIiksZS51cmw/dC5fdXJsPWUudXJsOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInVybFwiKSxlLmNyZWF0ZWQ/dC5fY3JlYXRlZD1lLmNyZWF0ZWQ6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwiY3JlYXRlZFwiKSxlLnJlcG9ydGVyP3QuX3JlcG9ydGVyPWUucmVwb3J0ZXI6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwicmVwb3J0ZXJcIiksZS5ydW50aW1lP3QuX3J1bnRpbWU9ZS5ydW50aW1lOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInJ1bnRpbWVcIiksZS5zY2hlbWE/dC5fc2NoZW1hPWUuc2NoZW1hOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInNjaGVtYVwiKSxlLm5hbWU/dC5fbmFtZT1lLm5hbWU6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwibmFtZVwiKSx0Ll9zdGF0dXM9ZS5zdGF0dXMsZS5kYXRhP3QuX3N5bmNPYmo9bmV3IGIuZGVmYXVsdChlLmRhdGEpOnQuX3N5bmNPYmo9bmV3IGIuZGVmYXVsdCh7fSksdC5fY2hpbGRyZW5zPWUuY2hpbGRyZW5zLHQuX211dHVhbD1lLm11dHVhbCx0Ll92ZXJzaW9uPTAsdC5fY2hpbGRJZD0xLHQuX2NoaWxkcmVuTGlzdGVuZXIsdC5fb25BZGRDaGlsZHJlbkhhbmRsZXIsdC5fcmVzdW1lZD1lLnJlc3VtZSxlLnJlc3VtZSYmKHQuX3ZlcnNpb249ZS52ZXJzaW9uKSx0Ll9vd25lcj1lLnN5bmNoZXIuX293bmVyLHQuX2J1cz1lLnN5bmNoZXIuX2J1cyxlLmRlc2NyaXB0aW9uJiYodC5fZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbiksZS50YWdzJiYodC5fdGFncz1lLnRhZ3MpLGUucmVzb3VyY2VzJiYodC5fcmVzb3VyY2VzPWUucmVzb3VyY2VzKSxlLm9ic2VydmVyU3RvcmFnZSYmKHQuX29ic2VydmVyU3RvcmFnZT1lLm9ic2VydmVyU3RvcmFnZSksZS5wdWJsaWNPYnNlcnZhdGlvbiYmKHQuX3B1YmxpY09ic2VydmF0aW9uPWUucHVibGljT2JzZXJ2YXRpb24pLHQuX21ldGFkYXRhPSgwLGwuZGVmYXVsdCkoZSksKCFlLmhhc093blByb3BlcnR5KFwicmVzdW1lXCIpfHxlLmhhc093blByb3BlcnR5KFwicmVzdW1lXCIpJiYhZS5yZXN1bWUpJiYodC5fbWV0YWRhdGEubGFzdE1vZGlmaWVkPXQuX21ldGFkYXRhLmNyZWF0ZWQpLGRlbGV0ZSB0Ll9tZXRhZGF0YS5kYXRhLGRlbGV0ZSB0Ll9tZXRhZGF0YS5zeW5jaGVyLGRlbGV0ZSB0Ll9tZXRhZGF0YS5hdXRob3Jpc2UsdC5faHlwZXJ0eVJlc291cmNlRmFjdG9yeT1uZXcgai5kZWZhdWx0LHQuX2NoaWxkcmVuT2JqZWN0cz17fSx0Ll9zaGFyZWRDaGlsZHM9W10sZS5iYWNrdXAmJnQuX2NoaWxkcmVucyl7dmFyIHI9ZS5oYXNPd25Qcm9wZXJ0eShcImNoaWxkcmVuT2JqZWN0c1wiKSYmZS5jaGlsZHJlbk9iamVjdHMuaGFzT3duUHJvcGVydHkoXCJoZWFydGJlYXRcIik/ZS5jaGlsZHJlbk9iamVjdHMuaGVhcnRiZWF0OjA7dC5faGVhcnRCZWF0PW5ldyBPLmRlZmF1bHQodC5fYnVzLHQuX293bmVyLHQuX3N5bmNoZXIuX3J1bnRpbWVVcmwsdGhpcywxNSxyKSx0Ll9yZXN1bWVkfHx0Ll9oZWFydEJlYXQuc3RhcnQocil9fXJldHVybigwLHkuZGVmYXVsdCkoRGF0YU9iamVjdCxbe2tleTpcIl9nZXRMYXN0Q2hpbGRJZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PTAscj1lLl9vd25lcitcIiNcIit0O3JldHVybigwLHUuZGVmYXVsdCkoZS5fY2hpbGRyZW5zKS5maWx0ZXIoZnVuY3Rpb24odCl7ZS5fY2hpbGRyZW5zW3RdLmNoaWxkSWQ+ciYmKHI9ZS5fY2hpbGRyZW5zW3RdLmNoaWxkSWQpfSksdD1OdW1iZXIoci5zcGxpdChcIiNcIilbMV0pfX0se2tleTpcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10Ll91cmwrXCIvY2hpbGRyZW4vXCI7aWYoay5sb2coXCJbRGF0YSBPYmplY3QgLSBBbGxvY2F0ZUxpc3RlbmVyc10gLSBcIix0Ll9jaGlsZHJlbnMpLHQuX2NoaWxkcmVucyl2YXIgbj1yLG89dC5fYnVzLmFkZExpc3RlbmVyKG4sZnVuY3Rpb24ocil7aWYoci5mcm9tIT09ZS5fb3duZXIpc3dpdGNoKGsubG9nKFwiRGF0YU9iamVjdC1DaGlsZHJlbi1SQ1Y6IFwiLHIpLHIudHlwZSl7Y2FzZVwiY3JlYXRlXCI6dC5fb25DaGlsZENyZWF0ZShyKTticmVhaztjYXNlXCJkZWxldGVcIjprLmxvZyhyKTticmVhaztkZWZhdWx0OnQuX2NoYW5nZUNoaWxkcmVuKHIpfXQuX2NoaWxkcmVuTGlzdGVuZXI9b30pfX0se2tleTpcIl9yZWxlYXNlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2NoaWxkcmVuTGlzdGVuZXImJihlLl9jaGlsZHJlbkxpc3RlbmVyLnJlbW92ZSgpLCgwLHUuZGVmYXVsdCkoZS5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NoaWxkcmVuT2JqZWN0c1t0XS5fcmVsZWFzZUxpc3RlbmVycygpfSkpfX0se2tleTpcInN5bmNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzO3JldHVybiBrLmluZm8oXCJbRGF0YU9iamVjdC5zeW5jXSBzeW5jaHJvbmlzaW5nIFwiKSxuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89e307ZS5tZXRhZGF0YS5iYWNrdXBSZXZpc2lvbiYmKG8uYmFja3VwUmV2aXNpb249ZS5tZXRhZGF0YS5iYWNrdXBSZXZpc2lvbiksdC5fc3luY2hlci5yZWFkKHQuX21ldGFkYXRhLnVybCxvKS50aGVuKGZ1bmN0aW9uKGUpe2suaW5mbyhcIltEYXRhT2JqZWN0LnN5bmNdIHZhbHVlIHRvIHN5bmM6IFwiLGUpLCgwLGwuZGVmYXVsdCkodC5kYXRhLCgwLHcuZGVlcENsb25lKShlLmRhdGEpKSx0Ll92ZXJzaW9uPWUudmVyc2lvbix0Ll9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9ZS5sYXN0TW9kaWZpZWQsZS5jaGlsZHJlbk9iamVjdHM/KHQucmVzdW1lQ2hpbGRyZW5zKGUuY2hpbGRyZW5PYmplY3RzKSx0Ll9zdG9yZUNoaWxkcmVucygpLHIoITApKTpyKCEwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2suaW5mbyhcIltEYXRhT2JqZWN0LnN5bmNdIHN5bmMgZmFpbGVkOiBcIixlKSxyKCExKX0pfSl9fSx7a2V5OlwicmVzdW1lQ2hpbGRyZW5zXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMsbj10aGlzLl9vd25lci5zcGxpdChcIi9cIilbM10rXCIjXCIrdGhpcy5fY2hpbGRJZCxvPWU7KDAsdS5kZWZhdWx0KShvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBpPSExO1wiaGVhcnRiZWF0XCI9PT1lP3IuX2hlYXJ0QmVhdC5zdGFydChvW2VdKTpvW2VdLnZhbHVlLnJlc291cmNlVHlwZSYmIXIuX2NoaWxkcmVuT2JqZWN0cy5oYXNPd25Qcm9wZXJ0eShlKT8oci5fY2hpbGRyZW5PYmplY3RzW2VdPXIuX3Jlc3VtZUh5cGVydHlSZXNvdXJjZShvW2VdKSxpPSEwKTpyLl9jaGlsZHJlbk9iamVjdHMuaGFzT3duUHJvcGVydHkoZSl8fChyLl9jaGlsZHJlbk9iamVjdHNbZV09ci5fcmVzdW1lQ2hpbGQob1tlXSksay5sb2coXCJbRGF0YU9iamVjdC5yZXN1bWVDaGlsZHJlbnNdIG5ldyBEYXRhT2JqZWN0Q2hpbGQ6IFwiLHIuX2NoaWxkcmVuT2JqZWN0c1tlXSksaT0hMCksaSYmZT5uJiYobj1lLGsubG9nKFwiW0RhdGFPYmplY3RSZXBvcnRlci5yZXN1bWVDaGlsZHJlbnNdIC0gcmVzdW1pbmc6IFwiLHQuX2NoaWxkcmVuT2JqZWN0c1tlXSkpfSksdGhpcy5fY2hpbGRJZD1OdW1iZXIobi5zcGxpdChcIiNcIilbMV0pfX0se2tleTpcIl9yZXN1bWVDaGlsZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnZhbHVlO3IucGFyZW50T2JqZWN0PXQsci5wYXJlbnQ9dC5fdXJsO3ZhciBuPW5ldyBnLmRlZmF1bHQocik7bi5pZGVudGl0eT1lLmlkZW50aXR5O3ZhciBvPXt0eXBlOlwiY3JlYXRlXCIsZnJvbTpuLnJlcG9ydGVyLHVybDpuLnBhcmVudCx2YWx1ZTpuLmRhdGEsY2hpbGRJZDpuLnVybCxpZGVudGl0eTpuLmlkZW50aXR5LGNoaWxkOm59O3JldHVybiBuLnJlc291cmNlVHlwZSYmKG8ucmVzb3VyY2U9biksdC5fb25BZGRDaGlsZHJlbkhhbmRsZXImJnQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG8pLG59fSx7a2V5OlwiX3Jlc3VtZUh5cGVydHlSZXNvdXJjZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLnZhbHVlO3IucGFyZW50T2JqZWN0PXQsci5wYXJlbnQ9dC5fdXJsO3ZhciBuPXQuX2h5cGVydHlSZXNvdXJjZUZhY3RvcnkuY3JlYXRlSHlwZXJ0eVJlc291cmNlKCExLHIucmVzb3VyY2VUeXBlLHIpO24uaWRlbnRpdHk9ZS5pZGVudGl0eTt2YXIgbz17dHlwZTpcImNyZWF0ZVwiLGZyb206bi5yZXBvcnRlcix1cmw6bi5wYXJlbnQsdmFsdWU6bi5kYXRhLGNoaWxkSWQ6bi51cmwsaWRlbnRpdHk6bi5pZGVudGl0eSxjaGlsZDpufTtyZXR1cm4gbi5yZXNvdXJjZVR5cGUmJihvLnJlc291cmNlPW4pLHQuX29uQWRkQ2hpbGRyZW5IYW5kbGVyJiZ0Ll9vbkFkZENoaWxkcmVuSGFuZGxlcihvKSxufX0se2tleTpcInBhdXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvd1wiTm90IGltcGxlbWVudGVkXCJ9fSx7a2V5OlwicmVzdW1lXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aHJvd1wiTm90IGltcGxlbWVudGVkXCJ9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhyb3dcIk5vdCBpbXBsZW1lbnRlZFwifX0se2tleTpcImFkZENoaWxkXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsbz12b2lkIDA7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oaSl7dmFyIGE9bi5fdXJsK1wiL2NoaWxkcmVuL1wiLHM9bi5fZ2V0Q2hpbGRJbnB1dChyKTtzLmRhdGE9ZSxvPW5ldyBnLmRlZmF1bHQocyksdCYmKG8uaWRlbnRpdHk9dCksby5zaGFyZSgpLG8ub25DaGFuZ2UoZnVuY3Rpb24oZSl7bi5fb25DaGFuZ2UoZSx7cGF0aDphLGNoaWxkSWQ6cy51cmx9KX0pLG4uX2NoaWxkcmVuT2JqZWN0c1tzLnVybF09byxpKG8pfSl9fSx7a2V5OlwiX2RlbGV0ZUNoaWxkcmVuc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVtdO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIpe2lmKGUuY2hpbGRyZW5zKXtrLmxvZyhcIltEYXRhT2JqZWN0LmRlbGV0ZUNoaWxkcmVuc11cIixlLmNoaWxkcmVucyk7dmFyIG49dm9pZCAwO2ZvcihuIGluIGUuY2hpbGRyZW5zKXt2YXIgbz1lLmNoaWxkcmVuc1tuXTtrLmxvZyhcIltEYXRhT2JqZWN0Ll9kZWxldGVDaGlsZHJlbnNdIGNoaWxkXCIsbyksby5tZXRhZGF0YS5oYXNPd25Qcm9wZXJ0eShcInJlc291cmNlVHlwZVwiKSYmdC5wdXNoKGUuY2hpbGRyZW5zW25dLmRlbGV0ZSgpKX1rLmxvZyhcIltEYXRhT2JqZWN0Ll9kZWxldGVDaGlsZHJlbnNdIHByb21pc2VzIFwiLHQpLHQubGVuZ3RoPjA/YS5kZWZhdWx0LmFsbCh0KS50aGVuKGZ1bmN0aW9uKCl7cihcIltEYXRhT2JqZWN0Ll9kZWxldGVDaGlsZHJlbnNdIGRvbmVcIil9KTpyKFwiW0RhdGFPYmplY3QuX2RlbGV0ZUNoaWxkcmVuc10gbm90aGluZyB0byBkZWxldGVcIil9fSl9fSx7a2V5OlwiX2dldENoaWxkSW5wdXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsbC5kZWZhdWx0KSh7fSxlKTtyZXR1cm4gdC5fY2hpbGRJZCsrLHIudXJsPXQuX293bmVyLnNwbGl0KFwiL1wiKVszXStcIiNcIit0Ll9jaGlsZElkLHIucGFyZW50T2JqZWN0PXQsci5yZXBvcnRlcj10Ll9vd25lcixyLmNyZWF0ZWQ9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLHIucnVudGltZT10Ll9zeW5jaGVyLl9ydW50aW1lVXJsLHIucDJwSGFuZGxlcj10Ll9zeW5jaGVyLl9wMnBIYW5kbGVyLHIucDJwUmVxdWVzdGVyPXQuX3N5bmNoZXIuX3AycFJlcXVlc3RlcixyLnNjaGVtYT10Ll9zY2hlbWEsci5wYXJlbnQ9dC51cmwsci5tdXR1YWw9dC5tZXRhZGF0YS5tdXR1YWwscn19LHtrZXk6XCJhZGRIeXBlcnR5UmVzb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKGkpe3ZhciBhPXZvaWQgMCxzPW8uX3VybCtcIi9jaGlsZHJlbi9cIix1PW8uX2dldENoaWxkSW5wdXQobik7by5faHlwZXJ0eVJlc291cmNlRmFjdG9yeS5jcmVhdGVIeXBlcnR5UmVzb3VyY2VXaXRoQ29udGVudCghMCxlLHQsdSkudGhlbihmdW5jdGlvbihlKXthPWUsciYmKGEuaWRlbnRpdHk9ciksYS5zaGFyZSgpLGsubG9nKFwiW0RhdGFPYmplY3QuYWRkSHlwZXJ0eVJlc291cmNlXSBhZGRlZCBcIixhKSxhLm9uQ2hhbmdlKGZ1bmN0aW9uKGUpe28uX29uQ2hhbmdlKGUse3BhdGg6cyxjaGlsZElkOmEuY2hpbGRJZH0pfSksby5fY2hpbGRyZW5PYmplY3RzW2EuY2hpbGRJZF09YSxpKGEpfSl9KX19LHtrZXk6XCJvbkFkZENoaWxkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXI9ZX19LHtrZXk6XCJfb25DaGlsZENyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoXCJoZWFydGJlYXRcIj09PWUuYm9keS5yZXNvdXJjZSl0aGlzLl9oZWFydEJlYXQub25OZXdIZWFydGJlYXQoZS5ib2R5LnZhbHVlKTtlbHNle3ZhciByPXtmcm9tOmUudG8sdG86ZS5mcm9tLHR5cGU6XCJyZXNwb25zZVwiLGlkOmUuaWQsYm9keTp7Y29kZToxMDB9fTt0Ll9idXMucG9zdE1lc3NhZ2UociksZS5ib2R5LnZhbHVlLnJlc291cmNlVHlwZT90Ll9vbkh5cGVydHlSZXNvdXJjZUFkZGVkKGUpOnQuX29uQ2hpbGRBZGRlZChlKX19fSx7a2V5OlwiX29uQ2hpbGRBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCx3LmRlZXBDbG9uZSkoZS5ib2R5LnZhbHVlKTtyLnBhcmVudE9iamVjdD10O3ZhciBuPW5ldyBnLmRlZmF1bHQocik7bi5pZGVudGl0eT1lLmJvZHkuaWRlbnRpdHksdC5fY2hpbGRyZW5PYmplY3RzW3IudXJsXT1uLGUudG89PT10Lm1ldGFkYXRhLnVybCYmbi5zdG9yZSgpLHQuX2h5cGVydHlFdnQoZSxuKX19LHtrZXk6XCJfb25IeXBlcnR5UmVzb3VyY2VBZGRlZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkudmFsdWUsbj12b2lkIDA7ci5wYXJlbnRPYmplY3Q9dCxuPXQuX2h5cGVydHlSZXNvdXJjZUZhY3RvcnkuY3JlYXRlSHlwZXJ0eVJlc291cmNlKCExLHIucmVzb3VyY2VUeXBlLHIpLG4uaWRlbnRpdHk9ZS5ib2R5LmlkZW50aXR5LHQuX2NoaWxkcmVuT2JqZWN0c1tuLmNoaWxkSWRdPW4sdC5faHlwZXJ0eUV2dChlLG4pLGUudG89PT10Lm1ldGFkYXRhLnVybCYmbi5zdG9yZSgpfX0se2tleTpcIl9oeXBlcnR5RXZ0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6ZS50eXBlLGZyb206ZS5mcm9tLHVybDplLnRvLHZhbHVlOnQuZGF0YSxjaGlsZElkOnQudXJsLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxjaGlsZDp0fTt0LnJlc291cmNlVHlwZSYmKG4ucmVzb3VyY2U9dCksci5fb25BZGRDaGlsZHJlbkhhbmRsZXImJnIuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKG4pfX0se2tleTpcIl9vbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLHIuX3ZlcnNpb24rKyxcImxpdmVcIj09PXIuX3N0YXR1cyl7dmFyIG49e3R5cGU6XCJ1cGRhdGVcIixmcm9tOnIuX3VybCx0bzpyLl91cmwrXCIvY2hhbmdlc1wiLGJvZHk6e3ZlcnNpb246ci5fdmVyc2lvbixzb3VyY2U6ci5fb3duZXIsYXR0cmlidXRlOmUuZmllbGQsbGFzdE1vZGlmaWVkOnIuX21ldGFkYXRhLmxhc3RNb2RpZmllZH19O2subG9nKFwiW0RhdGFPYmplY3QgLSBfb25DaGFuZ2VdIC0gXCIsZSx0LG4pLGUub1R5cGU9PT1fLk9iamVjdFR5cGUuT0JKRUNUP2UuY1R5cGUhPT1fLkNoYW5nZVR5cGUuUkVNT1ZFJiYobi5ib2R5LnZhbHVlPSgwLHcuZGVlcENsb25lKShlLmRhdGEpKToobi5ib2R5LmF0dHJpYnV0ZVR5cGU9ZS5vVHlwZSxuLmJvZHkudmFsdWU9ZS5kYXRhLGUuY1R5cGUhPT1fLkNoYW5nZVR5cGUuVVBEQVRFJiYobi5ib2R5Lm9wZXJhdGlvbj1lLmNUeXBlKSksdCYmKG4udG89dC5wYXRoLG4uYm9keS5yZXNvdXJjZT10LmNoaWxkSWQpLHIuZGF0YS5fbXV0dWFsfHwobi5ib2R5Lm11dHVhbD1yLl9tdXR1YWwpLHIuX2J1cy5wb3N0TWVzc2FnZShuKX19fSx7a2V5OlwiX2NoYW5nZU9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLl92ZXJzaW9uKzE8PXQuYm9keS52ZXJzaW9uKXtyLl92ZXJzaW9uPXQuYm9keS52ZXJzaW9uO3ZhciBuPXQuYm9keS5hdHRyaWJ1dGUsaT12b2lkIDA7aT1cIm9iamVjdFwiPT09KDAsby5kZWZhdWx0KSh0LmJvZHkudmFsdWUpPygwLHcuZGVlcENsb25lKSh0LmJvZHkudmFsdWUpOnQuYm9keS52YWx1ZTt2YXIgYT1lLmZpbmRCZWZvcmUobik7aWYodC5ib2R5Lmxhc3RNb2RpZmllZD9yLl9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9dC5ib2R5Lmxhc3RNb2RpZmllZDpyLl9tZXRhZGF0YS5sYXN0TW9kaWZpZWQ9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpLHQuYm9keS5hdHRyaWJ1dGVUeXBlPT09Xy5PYmplY3RUeXBlLkFSUkFZKWlmKHQuYm9keS5vcGVyYXRpb249PT1fLkNoYW5nZVR5cGUuQUREKXt2YXIgcz1hLm9iaix1PWEubGFzdDtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHMsW3UsMF0uY29uY2F0KGkpKX1lbHNlIGlmKHQuYm9keS5vcGVyYXRpb249PT1fLkNoYW5nZVR5cGUuUkVNT1ZFKXt2YXIgYz1hLm9iaixsPWEubGFzdDtjLnNwbGljZShsLGkpfWVsc2UgYS5vYmpbYS5sYXN0XT1pO2Vsc2UgdC5ib2R5Lmhhc093blByb3BlcnR5KFwidmFsdWVcIik/YS5vYmpbYS5sYXN0XT1pOmRlbGV0ZSBhLm9ialthLmxhc3RdfWVsc2Ugay5sb2coXCJVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiBcIityLl92ZXJzaW9uK1wiLCBtc2cgPT4gXCIrdC5ib2R5LnZlcnNpb24rXCIpXCIpfX0se2tleTpcIl9jaGFuZ2VDaGlsZHJlblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCx3LmRpdmlkZVVSTCkoZS50byksbj0oci5pZGVudGl0eSxlLmJvZHkucmVzb3VyY2UpLG89dC5fY2hpbGRyZW5PYmplY3RzW25dO2subG9nKFwiQ2hhbmdlIGNoaWxkcmVuOiBcIix0Ll9vd25lcixlLHJlc291cmNlKSxvP3QuX2NoYW5nZU9iamVjdChvLl9zeW5jT2JqLGUpOmsud2FybihcIk5vIGNoaWxkcmVuIGZvdW5kIGZvcjogXCIsbil9fSx7a2V5OlwibWV0YWRhdGFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGF9fSx7a2V5OlwidXJsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6XCJzY2hlbWFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NoZW1hfX0se2tleTpcInN0YXR1c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXN9fSx7a2V5OlwiZGF0YVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jT2JqLmRhdGF9fSx7a2V5OlwiY2hpbGRyZW5zXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuT2JqZWN0c319XSksRGF0YU9iamVjdH0oKTt0LmRlZmF1bHQ9TCxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5PYmplY3RUeXBlPXQuQ2hhbmdlVHlwZT12b2lkIDA7dmFyIG49cigzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKTtyKDE1Nyk7dmFyIHM9cigzNiksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIFN5bmNPYmplY3QoZSl7KDAsby5kZWZhdWx0KSh0aGlzLFN5bmNPYmplY3QpO3ZhciB0PXRoaXM7dC5fb2JzZXJ2ZXJzPVtdLHQuX2ZpbHRlcnM9e30sdGhpcy5fZGF0YT1lfHx7fSx0aGlzLl9pbnRlcm5hbE9ic2VydmUodGhpcy5fZGF0YSl9cmV0dXJuKDAsYS5kZWZhdWx0KShTeW5jT2JqZWN0LFt7a2V5Olwib2JzZXJ2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5wdXNoKGUpfX0se2tleTpcImZpbmRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD0oMCxzLnBhcnNlQXR0cmlidXRlcykoZSk7cmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQodCl9fSx7a2V5OlwiZmluZEJlZm9yZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXt9LHI9KDAscy5wYXJzZUF0dHJpYnV0ZXMpKGUpO3JldHVybiB0Lmxhc3Q9ci5wb3AoKSx0Lm9iaj10aGlzLl9maW5kV2l0aFNwbGl0KHIpLHR9fSx7a2V5OlwiX2ZpbmRXaXRoU3BsaXRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7dD10W2VdfSksdH19LHtrZXk6XCJfaW50ZXJuYWxPYnNlcnZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWZ1bmN0aW9uKGUpe2UuZXZlcnkoZnVuY3Rpb24oZSl7dC5fb25DaGFuZ2VzKGUpfSl9O3RoaXMuX2RhdGE9T2JqZWN0LmRlZXBPYnNlcnZlKGUscil9fSx7a2V5OlwiX2ZpcmVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX19LHtrZXk6XCJfb25DaGFuZ2VzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vYmplY3Qscj12b2lkIDA7dC5jb25zdHJ1Y3Rvcj09PU9iamVjdCYmKHI9bC5PQkpFQ1QpLHQuY29uc3RydWN0b3I9PT1BcnJheSYmKHI9bC5BUlJBWSk7dmFyIG49ZS5rZXlwYXRoLG89dFtlLm5hbWVdO1widXBkYXRlXCIhPT1lLnR5cGV8fG4uaW5jbHVkZXMoXCIubGVuZ3RoXCIpfHx0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmMuVVBEQVRFLG9UeXBlOnIsZmllbGQ6bixkYXRhOm99KSxcImFkZFwiPT09ZS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmMuQURELG9UeXBlOnIsZmllbGQ6bixkYXRhOm99KSxcImRlbGV0ZVwiPT09ZS50eXBlJiZ0aGlzLl9maXJlRXZlbnQoe2NUeXBlOmMuUkVNT1ZFLG9UeXBlOnIsZmllbGQ6bn0pfX0se2tleTpcImRhdGFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX19XSksU3luY09iamVjdH0oKSxjPXQuQ2hhbmdlVHlwZT17VVBEQVRFOlwidXBkYXRlXCIsQUREOlwiYWRkXCIsUkVNT1ZFOlwicmVtb3ZlXCJ9LGw9dC5PYmplY3RUeXBlPXtPQkpFQ1Q6XCJvYmplY3RcIixBUlJBWTpcImFycmF5XCJ9O3QuZGVmYXVsdD11fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMzgpLGw9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxkPXIoMTMyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDM2KSx5PWwuZ2V0TG9nZ2VyKFwiRGF0YU9iamVjdENoaWxkXCIpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBEYXRhT2JqZWN0Q2hpbGQoZSl7ZnVuY3Rpb24gdGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKGUpe3Rocm93XCJbRGF0YU9iamVjdENoaWxkXSBcIitlK1wiIG1hbmRhdG9yeSBwYXJhbWV0ZXIgaXMgbWlzc2luZ1wifSgwLGEuZGVmYXVsdCkodGhpcyxEYXRhT2JqZWN0Q2hpbGQpO3ZhciB0PXRoaXM7ZS5wYXJlbnQ/dC5fcGFyZW50PWUucGFyZW50OnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcInBhcmVudFwiKSxlLnVybD90Ll91cmw9ZS51cmw6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwidXJsXCIpLGUuY3JlYXRlZD90Ll9jcmVhdGVkPWUuY3JlYXRlZDp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJjcmVhdGVkXCIpLGUucmVwb3J0ZXI/dC5fcmVwb3J0ZXI9ZS5yZXBvcnRlcjp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJyZXBvcnRlclwiKSxlLnJ1bnRpbWU/dC5fcnVudGltZT1lLnJ1bnRpbWU6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwicnVudGltZVwiKSxlLnNjaGVtYT90Ll9zY2hlbWE9ZS5zY2hlbWE6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwic2NoZW1hXCIpLGUucGFyZW50T2JqZWN0P3QuX3BhcmVudE9iamVjdD1lLnBhcmVudE9iamVjdDp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJwYXJlbnRPYmplY3RcIiksZS5uYW1lJiYodC5fbmFtZT1lLm5hbWUpLGUuZGVzY3JpcHRpb24mJih0Ll9kZXNjcmlwdGlvbj1lLmRlc2NyaXB0aW9uKSxlLnRhZ3MmJih0Ll90YWdzPWUudGFncyksZS5yZXNvdXJjZXMmJih0Ll9yZXNvdXJjZXM9ZS5yZXNvdXJjZXMpLGUub2JzZXJ2ZXJTdG9yYWdlJiYodC5fb2JzZXJ2ZXJTdG9yYWdlPWUub2JzZXJ2ZXJTdG9yYWdlKSxlLnB1YmxpY09ic2VydmF0aW9uJiYodC5fcHVibGljT2JzZXJ2YXRpb249ZS5wdWJsaWNPYnNlcnZhdGlvbiksdC5fY2hpbGRJZD1lLnVybCxlLmRhdGE/dC5fc3luY09iaj1uZXcgZi5kZWZhdWx0KGUuZGF0YSk6dC5fc3luY09iaj1uZXcgZi5kZWZhdWx0KHt9KSx5LmxvZyhcIltEYXRhT2JqZWN0Q2hpbGQgLSAgQ29uc3RydWN0b3JdIC0gXCIsdC5fc3luY09iaiksdC5fYnVzPXQuX3BhcmVudE9iamVjdC5fYnVzLHQuX293bmVyPXQuX3BhcmVudE9iamVjdC5fb3duZXIsdC5fYWxsb2NhdGVMaXN0ZW5lcnMoKSx0Ll9tZXRhZGF0YT1lLGRlbGV0ZSB0Ll9tZXRhZGF0YS5wYXJlbnRPYmplY3QsdC5fc2hhcmluZ1N0YXR1cz0hMX1yZXR1cm4oMCx1LmRlZmF1bHQpKERhdGFPYmplY3RDaGlsZCxbe2tleTpcInNoYXJlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9zaGFyaW5nU3RhdHVzPW5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz12b2lkIDA7bz1lP3QubWV0YWRhdGEucGFyZW50OnQubWV0YWRhdGEucGFyZW50K1wiL2NoaWxkcmVuL1wiO3ZhciBpPXQubWV0YWRhdGE7aS5kYXRhPXQuZGF0YTt2YXIgYT17dHlwZTpcImNyZWF0ZVwiLGZyb206dC5tZXRhZGF0YS5yZXBvcnRlcix0bzpvLGJvZHk6e3Jlc291cmNlOmkudXJsLHZhbHVlOml9fTtpZih0LmlkZW50aXR5JiYoYS5ib2R5LmlkZW50aXR5PXQuaWRlbnRpdHkpLHQuX3BhcmVudE9iamVjdC5kYXRhLmhhc093blByb3BlcnR5KFwibXV0dWFsXCIpJiYoYS5ib2R5Lm11dHVhbD10Ll9wYXJlbnRPYmplY3QuZGF0YS5tdXR1YWwpLHQuX3BhcmVudE9iamVjdC5tZXRhZGF0YS5yZXBvcnRlcj09PXQubWV0YWRhdGEucmVwb3J0ZXIpcmV0dXJuIHQuX2J1cy5wb3N0TWVzc2FnZSgoMCxwLmRlZXBDbG9uZSkoYSkpLHIoKTt2YXIgcz1mdW5jdGlvbihlKXtpZihlLnRvPT09dC5fcmVwb3J0ZXIpe3QuX2J1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKGEuZnJvbSxlLmlkKSx5LmxvZyhcIltTeW5jaGVyLkRhdGFPYmplY3RDaGlsZC5zaGFyZV0gUGFyZW50IHJlcG9ydGVyIHJlcGx5IFwiLGUpO3ZhciBvPXtjb2RlOmUuYm9keSYmZS5ib2R5LmNvZGU/ZS5ib2R5LmNvZGU6NTAwLGRlc2M6ZS5ib2R5JiZlLmJvZHkuZGVzYz9lLmJvZHkuZGVzYzpcIlVua25vd25cIn07cmV0dXJuIGUuYm9keS5jb2RlPDMwMD9yKG8pOm4obyl9fSx1PXQuX2J1cy5wb3N0TWVzc2FnZSgoMCxwLmRlZXBDbG9uZSkoYSkscywhMSk7c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiB0Ll9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihhLmZyb20sdSksbih7Y29kZTo0MDgsZGVzYzpcInRpbW91dFwifSl9LDNlMyl9KX19LHtrZXk6XCJzdG9yZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt9LHI9ZS5tZXRhZGF0YS5jaGlsZHJlbitcIi5cIitlLm1ldGFkYXRhLnVybDt0LnZhbHVlPWUubWV0YWRhdGEsdC5pZGVudGl0eT1lLmlkZW50aXR5O3ZhciBuPXtmcm9tOmUubWV0YWRhdGEucmVwb3J0ZXIsdG86ZS5fcGFyZW50T2JqZWN0Ll9zeW5jaGVyLl9zdWJVUkwsdHlwZTpcImNyZWF0ZVwiLGJvZHk6e3Jlc291cmNlOmUubWV0YWRhdGEucGFyZW50LGF0dHJpYnV0ZTpyLHZhbHVlOnR9fTt5LmxvZyhcIltEYXRhT2JqZWN0Q2hpbGQuc3RvcmVdOlwiLG4pLGUuX2J1cy5wb3N0TWVzc2FnZShuKX19LHtrZXk6XCJfYWxsb2NhdGVMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fcmVwb3J0ZXI9PT1lLl9vd25lciYmKGUuX2xpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl9yZXBvcnRlcixmdW5jdGlvbih0KXtcInJlc3BvbnNlXCI9PT10LnR5cGUmJnQuaWQ9PT1lLl9tc2dJZCYmKHkubG9nKFwiRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6XCIsdCksZS5fb25SZXNwb25zZSh0KSl9KSl9fSx7a2V5OlwiX3JlbGVhc2VMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXImJmUuX2xpc3RlbmVyLnJlbW92ZSgpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVsZWFzZUxpc3RlbmVycygpfX0se2tleTpcIm9uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKHQpe3kubG9nKFwiW0RhdGFPYmplY3RDaGlsZCAtIG9ic2VydmVyXSAtIFwiLHQpLGUodCl9KX19LHtrZXk6XCJvblJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25SZXNwb25zZUhhbmRsZXI9ZX19LHtrZXk6XCJfb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuYm9keS5zb3VyY2UsY29kZTplLmJvZHkuY29kZX07dC5fb25SZXNwb25zZUhhbmRsZXImJnQuX29uUmVzcG9uc2VIYW5kbGVyKHIpfX0se2tleTpcInNoYXJlYWJsZVwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWV0YWRhdGE7cmV0dXJuIGUuZGF0YT10aGlzLmRhdGEsZX19LHtrZXk6XCJtZXRhZGF0YVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhZGF0YX19LHtrZXk6XCJjaGlsZElkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkSWR9fSx7a2V5Olwic2hhcmluZ1N0YXR1c1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFyaW5nU3RhdHVzfX0se2tleTpcImRhdGFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY09iai5kYXRhfX0se2tleTpcImlkZW50aXR5XCIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2lkZW50aXR5PWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZGVudGl0eX19XSksRGF0YU9iamVjdENoaWxkfSgpO3QuZGVmYXVsdD12LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE0KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzNiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIElkZW50aXR5TWFuYWdlcihlLHQscil7KDAsYS5kZWZhdWx0KSh0aGlzLElkZW50aXR5TWFuYWdlcik7dmFyIG49dGhpcztuLm1lc3NhZ2VCdXM9cixuLmRvbWFpbj0oMCxjLmRpdmlkZVVSTCkoZSkuZG9tYWluLG4ub3duZXI9ZSxuLnJ1bnRpbWVVUkw9dH1yZXR1cm4oMCx1LmRlZmF1bHQpKElkZW50aXR5TWFuYWdlcixbe2tleTpcImRpc2NvdmVyVXNlclJlZ2lzdGVyZWRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT12b2lkIDAsYT1lfHxcIi5cIjtpPXR8fHIub3duZXI7dmFyIHM9e3R5cGU6XCJyZWFkXCIsZnJvbTppLHRvOnIucnVudGltZVVSTCtcIi9yZWdpc3RyeS9cIixib2R5OntyZXNvdXJjZTphLGNyaXRlcmlhOml9fTtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihlKXt2YXIgdD1lLmJvZHkucmVzb3VyY2U7dCYmMjAwPT09ZS5ib2R5LmNvZGU/bih0KTpvKFwiY29kZTogXCIrZS5ib2R5LmNvZGUrXCIgTm8gdXNlciB3YXMgZm91bmRcIil9KX0pfX0se2tleTpcImRpc2NvdmVySWRlbnRpdHlQZXJJZFBcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89e3R5cGU6XCJyZWFkXCIsZnJvbTp0aGlzLm93bmVyLHRvOnQucnVudGltZVVSTCtcIi9pZG1cIixib2R5OntyZXNvdXJjZTplLGNyaXRlcmlhOlwiaWRwXCJ9fTt0Lm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT9yKGUuYm9keS52YWx1ZSk6bihlLmJvZHkuY29kZStcIiBcIitlLmJvZHkuZGVzYyl9KX0pfX1dKSxJZGVudGl0eU1hbmFnZXJ9KCk7dC5kZWZhdWx0PWwsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cig0KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDM4KSxsPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksZD1yKDM2KSxmPXIoMTY2KSxwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZikseT1sLmdldExvZ2dlcihcIkRpc2NvdmVyeVwiKSx2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRGlzY292ZXJ5KGUsdCxyKXsoMCxhLmRlZmF1bHQpKHRoaXMsRGlzY292ZXJ5KTt2YXIgbj10aGlzO24ubWVzc2FnZUJ1cz1yLG4ucnVudGltZVVSTD10LG4uZG9tYWluPSgwLGQuZGl2aWRlVVJMKShlKS5kb21haW4sbi5kaXNjb3ZlcnlVUkw9ZX1yZXR1cm4oMCx1LmRlZmF1bHQpKERpc2NvdmVyeSxbe2tleTpcIl9pc0xlZ2FjeVVzZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hKCFlLmluY2x1ZGVzKFwiOlwiKXx8ZS5pbmNsdWRlcyhcInVzZXI6Ly9cIikpfX0se2tleTpcImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlclByb2ZpbGVEYXRhXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1bXSxhPXt0eXBlOlwicmVhZFwiLGZyb206bi5kaXNjb3ZlcnlVUkwsdG86bi5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9oeXBlcnR5L3VzZXJwcm9maWxlL1wiK2V9fTtyZXR1cm4odHx8cikmJihhLmJvZHkuY3JpdGVyaWE9e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnR9KSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7bi5faXNMZWdhY3lVc2VyKGUpP3QoW3toeXBlcnR5SUQ6ZSxzdGF0dXM6XCJsaXZlXCJ9XSk6bi5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24ocil7MjAwPT09ci5ib2R5LmNvZGU/KHIuYm9keS52YWx1ZS5tYXAoZnVuY3Rpb24oZSl7ZS5oeXBlcnR5SUQhPW4uZGlzY292ZXJ5VVJMJiZpLnB1c2goZSl9KSwwPT09aS5sZW5ndGg/dChbXSk6KHkubG9nKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc1BlclVzZXJQcm9maWxlRGF0YV0gUmVwbHkgbG9nOiBcIixpKSx0KGkpKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGFdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlclByb2ZpbGVEYXRhRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe24uZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGEuYXBwbHkobixpKS50aGVuKGZ1bmN0aW9uKHQpe2Uobi5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9e3R5cGU6XCJyZWFkXCIsZnJvbTpuLmRpc2NvdmVyeVVSTCx0bzpuLnJ1bnRpbWVVUkwrXCIvZGlzY292ZXJ5L1wiLGJvZHk6e3Jlc291cmNlOlwiL2RhdGFPYmplY3QvdXNlcnByb2ZpbGUvXCIrZX19O3JldHVybih0fHxyKSYmKGkuYm9keS5jcml0ZXJpYT17cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dH0pLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtuLl9pc0xlZ2FjeVVzZXIoZSk/dChbe2h5cGVydHlJRDplLHN0YXR1czpcImxpdmVcIn1dKTpuLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT8oeS5sb2coXCJSZXBseSBsb2c6IFwiLHIuYm9keS52YWx1ZSksdChyLmJvZHkudmFsdWUpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyVXNlclByb2ZpbGVEYXRhXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RzUGVyVXNlclByb2ZpbGVEYXRhRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe24uZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YS5hcHBseShuLGkpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUobi5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlEXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1bXSxhPXt0eXBlOlwicmVhZFwiLGZyb206bi5kaXNjb3ZlcnlVUkwsdG86bi5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9oeXBlcnR5L2d1aWQvXCIrZX19O3JldHVybih0fHxyKSYmKGEuYm9keS5jcml0ZXJpYT17cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dH0pLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtuLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihvKXsyMDA9PT1vLmJvZHkuY29kZT8oby5ib2R5LnZhbHVlLm1hcChmdW5jdGlvbihlKXtlLmh5cGVydHlJRCE9bi5kaXNjb3ZlcnlVUkwmJmkucHVzaChlKX0pLDA9PT1pLmxlbmd0aD9yKFwiTm8gSHlwZXJ0eSB3YXMgZm91bmRcIik6KHkubG9nKFwiUmVwbHkgbG9nOiBcIixpKSx0KGkpKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlEXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLG8uYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydGllc1BlckdVSURET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7bi5kaXNjb3Zlckh5cGVydGllc1BlckdVSUQuYXBwbHkobixpKS50aGVuKGZ1bmN0aW9uKHQpe2Uobi5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSURcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPXt0eXBlOlwicmVhZFwiLGZyb206bi5kaXNjb3ZlcnlVUkwsdG86bi5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L2d1aWQvXCIrZX19O3JldHVybih0fHxyKSYmKGkuYm9keS5jcml0ZXJpYT17cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dH0pLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtuLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT8oeS5sb2coXCJSZXBseSBsb2c6IFwiLHIuYm9keS52YWx1ZSksdChyLmJvZHkudmFsdWUpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRF0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSURET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7bi5kaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRC5hcHBseShuLGkpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUobi5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnRpZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9dm9pZCAwLHM9W107YT1ufHxpLmRvbWFpbjt2YXIgdT17dHlwZTpcInJlYWRcIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOmkucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvaHlwZXJ0eS91c2VyL1wiK2V9fTtyZXR1cm4gdS5ib2R5LmNyaXRlcmlhPXR8fHI/e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnQsZG9tYWluOmF9Ontkb21haW46YX0sbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kuX2lzTGVnYWN5VXNlcihlKT90KFt7aHlwZXJ0eUlEOmUsc3RhdHVzOlwibGl2ZVwifV0pOmkubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh1LGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlfHw1MDA9PT1yLmJvZHkuY29kZT8oci5ib2R5LnZhbHVlLm1hcChmdW5jdGlvbihlKXtlLmh5cGVydHlJRCE9aS5kaXNjb3ZlcnlVUkwmJnMucHVzaChlKX0pLHkubG9nKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc10gUmVwbHkgOiBcIixzKSx0KHMpKTooeS53YXJuKFwiW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc10gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQocykpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydGllc0RPXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPWFyZ3VtZW50cztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe2kuZGlzY292ZXJIeXBlcnRpZXMuYXBwbHkoaSxhKS50aGVuKGZ1bmN0aW9uKHQpe2UoaS5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT12b2lkIDA7YT1ufHxpLmRvbWFpbjt2YXIgcz17dHlwZTpcInJlYWRcIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOmkucnVudGltZVVSTCtcIi9kaXNjb3ZlcnkvXCIsYm9keTp7cmVzb3VyY2U6XCIvZGF0YU9iamVjdC91c2VyL1wiK2V9fTtyZXR1cm4gcy5ib2R5LmNyaXRlcmlhPXR8fHI/e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnQsZG9tYWluOmF9Ontkb21haW46YX0sbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdHNdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtpLmRpc2NvdmVyRGF0YU9iamVjdHMuYXBwbHkoaSxhKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlKGkuX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3QodCkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0eVBlclVSTFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXR8fHIuZG9tYWluO3ZhciBpPXt0eXBlOlwicmVhZFwiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ci5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9oeXBlcnR5L3VybC9cIitlLGNyaXRlcmlhOntkb21haW46bn19fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eVBlclVSTF0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJIeXBlcnR5UGVyVVJMRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtyLmRpc2NvdmVySHlwZXJ0eVBlclVSTC5hcHBseShyLG4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUobmV3IHAuZGVmYXVsdCh0LHIucnVudGltZVVSTCxyLmRpc2NvdmVyeVVSTCxyLm1lc3NhZ2VCdXMscikpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdFBlclVSTFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXR8fHIuZG9tYWluO3ZhciBpPXt0eXBlOlwicmVhZFwiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ci5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L3VybC9cIitlLGNyaXRlcmlhOntkb21haW46bn19fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LG4pe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTF0gRXJyb3IgUmVwbHkgZm9yIFwiK2UrXCIgUmVhc29uOiBcIixyLmJvZHkuZGVzY3JpcHRpb24pLHQoW10pKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtyLmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTC5hcHBseShyLG4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUobmV3IHAuZGVmYXVsdCh0LHIucnVudGltZVVSTCxyLmRpc2NvdmVyeVVSTCxyLm1lc3NhZ2VCdXMscikpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPXZvaWQgMDthPW58fGkuZG9tYWluO3ZhciBzPXt0eXBlOlwicmVhZFwiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86aS5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L25hbWUvXCIrZX19O3JldHVybiBzLmJvZHkuY3JpdGVyaWE9dHx8cj97cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dCxkb21haW46YX06e2RvbWFpbjphfSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQscil7aS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7MjAwPT09ci5ib2R5LmNvZGU/KHkubG9nKFwiUmVwbHkgVmFsdWUgTG9nOiBcIixyLmJvZHkudmFsdWUpLHQoci5ib2R5LnZhbHVlKSk6KHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0c1Blck5hbWVdIEVycm9yIFJlcGx5IGZvciBcIitlK1wiIFJlYXNvbjogXCIsci5ib2R5LmRlc2NyaXB0aW9uKSx0KFtdKSl9KX0pfX0se2tleTpcImRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lRE9cIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9YXJndW1lbnRzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7aS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZS5hcHBseShpLGEpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUoaS5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxhPXZvaWQgMDthPW58fGkuZG9tYWluO3ZhciBzPXt0eXBlOlwicmVhZFwiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86aS5ydW50aW1lVVJMK1wiL2Rpc2NvdmVyeS9cIixib2R5OntyZXNvdXJjZTpcIi9kYXRhT2JqZWN0L3JlcG9ydGVyL1wiK2V9fTtyZXR1cm4gcy5ib2R5LmNyaXRlcmlhPXR8fHI/e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnQsZG9tYWluOmF9Ontkb21haW46YX0sbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlPyh5LmxvZyhcIlJlcGx5IFZhbHVlIExvZzogXCIsci5ib2R5LnZhbHVlKSx0KHIuYm9keS52YWx1ZSkpOih5Lndhcm4oXCJbRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lXSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSkpfSl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXJET1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsYT1hcmd1bWVudHM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtpLmRpc2NvdmVyRGF0YU9iamVjdHNQZXJSZXBvcnRlci5hcHBseShpLGEpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUoaS5fY29udmVydFRvRGlzY292ZXJlZE9iamVjdCh0KSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdChlKX0pfSl9fSx7a2V5OlwiX2NvbnZlcnRUb0Rpc2NvdmVyZWRPYmplY3RcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IHAuZGVmYXVsdChlLHQucnVudGltZVVSTCx0LmRpc2NvdmVyeVVSTCx0Lm1lc3NhZ2VCdXMsdCl9KX19LHtrZXk6XCJkaXNjb3ZlckRhdGFPYmplY3RcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9dm9pZCAwO2E9bnx8aS5kb21haW47dmFyIHM9e3R5cGU6XCJyZWFkXCIsZnJvbTppLmRpc2NvdmVyeVVSTCx0bzpcImRvbWFpbjovL3JlZ2lzdHJ5LlwiK2EsYm9keTp7cmVzb3VyY2U6ZSxjcml0ZXJpYTp7cmVzb3VyY2VzOnIsZGF0YVNjaGVtZXM6dH19fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LHIpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe2lmKHkubG9nKFwiW0Rpc2NvdmVyeV1cIixyKSxyLmJvZHkuY29kZT4yOTkpcmV0dXJuIHkud2FybihcIltEaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0XSBFcnJvciBSZXBseSBmb3IgXCIrZStcIiBSZWFzb246IFwiLHIuYm9keS5kZXNjcmlwdGlvbiksdChbXSk7dmFyIG49ci5ib2R5LnZhbHVlO3Qobnx8W10pfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydHlcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLGE9dm9pZCAwLHM9KDAsZC5jb252ZXJ0VG9Vc2VyVVJMKShlKTtyZXR1cm4gYT1ufHxpLmRvbWFpbixuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8sdSl7aWYoeS5sb2coXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eV0gQUNUSVZFIERPTUFJTiAtPiBcIixhLFwidXNlci0+XCIsZSxcInNjaGVtYS0+XCIsdCxcInJlc291cmNlcy0+XCIscixcImRvbWFpbi0+XCIsbiksZS5pbmNsdWRlcyhcIjpcIikmJiFlLmluY2x1ZGVzKFwidXNlcjovL1wiKSl7eS5sb2coXCJbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eV0gXCIrZStcIiBpcyBsZWdhY3kgZG9tYWluXCIpO3JldHVybiBvKHt1c2VySUQ6ZSxoeXBlcnR5SUQ6ZSxzY2hlbWE6dCxyZXNvdXJjZXM6cn0pfXZhciBjPXt0eXBlOlwicmVhZFwiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86XCJkb21haW46Ly9yZWdpc3RyeS5cIithLGJvZHk6e3Jlc291cmNlOnMsY3JpdGVyaWE6e3Jlc291cmNlczpyLGRhdGFTY2hlbWVzOnR9fX07eS5pbmZvKFwiW0Rpc2NvdmVyeV0gbXNnIHRvIHNlbmQtPlwiLGMpLGkubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShjLGZ1bmN0aW9uKGUpe3kuaW5mbyhcIltEaXNjb3ZlcnldIE9OIGRpc2NvdmVySHlwZXJ0eS0+XCIsZSk7dmFyIHQ9ZS5ib2R5LnZhbHVlO3Q/byh0KTp1KFwiTm8gSHlwZXJ0eSB3YXMgZm91bmRcIil9KX0pfX0se2tleTpcImRpc2NvdmVySHlwZXJ0eVBlclVzZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtpZihlLmluY2x1ZGVzKFwiOlwiKSYmIWUuaW5jbHVkZXMoXCJ1c2VyOi8vXCIpKXt5LmxvZyhcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnR5XSBcIitlK1wiaXMgbGVnYWN5IGRvbWFpblwiKTtyZXR1cm4gbyh7aWQ6ZSxoeXBlcnR5VVJMOmUsZGVzY3JpcHRvcjpcInVua25vd25cIn0pfW49dHx8ci5kb21haW47dmFyIGE9XCJ1c2VyOi8vXCIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKFwiQFwiKSsxLGUubGVuZ3RoKStcIi9cIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZihcIkBcIikpLHM9e3R5cGU6XCJyZWFkXCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzpcImRvbWFpbjovL3JlZ2lzdHJ5LlwiK24sYm9keTp7cmVzb3VyY2U6YX19O3kuaW5mbyhcIltEaXNjb3ZlcnldIE1lc3NhZ2U6IFwiLHMsbixhKSxyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbih0KXt5LmluZm8oXCJbRGlzY292ZXJ5XSBtZXNzYWdlIHJlcGx5XCIsdCk7dmFyIHI9dm9pZCAwLG49dm9pZCAwLGE9dm9pZCAwLHM9dC5ib2R5LnZhbHVlO2ZvcihyIGluIHMpaWYodm9pZCAwIT09c1tyXS5sYXN0TW9kaWZpZWQpaWYodm9pZCAwPT09biluPW5ldyBEYXRlKHNbcl0ubGFzdE1vZGlmaWVkKSxhPXI7ZWxzZXt2YXIgdT1uZXcgRGF0ZShzW3JdLmxhc3RNb2RpZmllZCk7bi5nZXRUaW1lKCk8dS5nZXRUaW1lKCkmJihuPXUsYT1yKX15LmluZm8oXCJbRGlzY292ZXJ5XSBMYXN0IEh5cGVydHk6IFwiLGEsbik7dmFyIGM9YTtpZih2b2lkIDA9PT1jKXJldHVybiBpKFwiVXNlciBIeXBlcnR5IG5vdCBmb3VuZFwiKTt2YXIgbD17aWQ6ZSxkZXNjcmlwdG9yOnNbY10uZGVzY3JpcHRvcixoeXBlcnR5VVJMOmN9O3kuaW5mbyhcIltEaXNjb3ZlcnldID09PT4gaHlwZXJ0eURpc2NvdmVyeSBtZXNzYWdlQnVuZGxlOiBcIixsKSxvKGwpfSl9KX19LHtrZXk6XCJkaXNjb3Zlckh5cGVydGllc1BlclVzZXJcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7cmV0dXJuIHkubG9nKFwib24gRnVuY3Rpb24tPlwiLGUpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtpZihlLmluY2x1ZGVzKFwiOlwiKSYmIWUuaW5jbHVkZXMoXCJ1c2VyOi8vXCIpKXt5LmxvZyhcIltEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnR5XSBpcyBsZWdhY3kgZG9tYWluXCIpO3ZhciBhPXt1c2VySUQ6ZSxoeXBlcnR5SUQ6ZSxzY2hlbWE6c2NoZW1hLHJlc291cmNlczpyZXNvdXJjZXN9O3JldHVybiBvKGEpfW49dHx8ci5kb21haW47dmFyIHM9XCJ1c2VyOi8vXCIrZS5zdWJzdHJpbmcoZS5pbmRleE9mKFwiQFwiKSsxLGUubGVuZ3RoKStcIi9cIitlLnN1YnN0cmluZygwLGUuaW5kZXhPZihcIkBcIikpLHU9e3R5cGU6XCJyZWFkXCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzpcImRvbWFpbjovL3JlZ2lzdHJ5LlwiK24sYm9keTp7cmVzb3VyY2U6c319O3kubG9nKFwiW0Rpc2NvdmVyeV0gTWVzc2FnZSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXI6IFwiLHUsbixzKSxyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodSxmdW5jdGlvbihlKXt5LmluZm8oXCJbRGlzY292ZXJ5XSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXIgcmVwbHlcIixlKTt2YXIgdD1lLmJvZHkudmFsdWU7aWYoIXQpcmV0dXJuIGkoXCJVc2VyIEh5cGVydHkgbm90IGZvdW5kXCIpO28odCl9KX0pfX0se2tleTpcInJlc3VtZURpc2NvdmVyaWVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB5LmxvZyhcIltEaXNjb3ZlcnldIHJlc3VtZURpc2NvdmVyaWVzXCIpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXt2YXIgbj17dHlwZTpcInJlYWRcIixmcm9tOmUuZGlzY292ZXJ5VVJMLHRvOmUucnVudGltZVVSTCtcIi9zdWJzY3JpcHRpb25zXCIsYm9keTp7cmVzb3VyY2U6ZS5kaXNjb3ZlcnlVUkx9fTtlLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihyKXt5LmxvZyhcIltEaXNjb3ZlcnkucmVzdW1lRGlzY292ZXJpZXNdIHJlcGx5OiBcIixyKTt2YXIgbj1bXTtpZigyMDA9PT1yLmJvZHkuY29kZSl7ci5ib2R5LnZhbHVlLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9dC5zcGxpdChcIi9yZWdpc3RyYXRpb25cIilbMF07KHt9KS51cmw9cix5LmxvZyhcIltEaXNjb3ZlcnkucmVzdW1lRGlzY292ZXJpZXNdIGFkZGluZyBsaXN0ZW5lciB0bzogXCIsciksci5pbmNsdWRlcyhcImh5cGVydHk6Ly9cIik/bi5wdXNoKGUuZGlzY292ZXJIeXBlcnR5UGVyVVJMRE8ocikpOm4ucHVzaChlLmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTERPKHIpKX0pLG8uZGVmYXVsdC5hbGwobikudGhlbihmdW5jdGlvbihlKXt0KGUpfSl9ZWxzZSB0KFtdKX0pfSl9fV0pLERpc2NvdmVyeX0oKTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0OCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigyNiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigzKSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDQpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMzQpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMzUpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxfPXIoMTM3KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksbT1mdW5jdGlvbihlKXtmdW5jdGlvbiBDb250ZXh0T2JzZXJ2ZXIoZSx0LHIsbixvLGkpe2lmKCgwLGwuZGVmYXVsdCkodGhpcyxDb250ZXh0T2JzZXJ2ZXIpLCFlKXRocm93IG5ldyBFcnJvcihcIlRoZSBoeXBlcnR5VVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlclwiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyIFwiKTtpZighbyl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgZmFjdG9yeSBpcyBhIG5lZWRlZCBwYXJhbWV0ZXIgXCIpO3ZhciBhPSgwLHkuZGVmYXVsdCkodGhpcywoQ29udGV4dE9ic2VydmVyLl9fcHJvdG9fX3x8KDAsdS5kZWZhdWx0KShDb250ZXh0T2JzZXJ2ZXIpKS5jYWxsKHRoaXMpKSxzPWE7cy5fY29udGV4dFJlc291cmNlVHlwZXM9bixzLl91cmw9ZSxzLl9kaXNjb3ZlclVzZXJzUHJvbWlzZXM9e30scy5fb2JzZXJ2ZVByb21pc2VzPXt9LHMuX2RvbWFpbj1vLmRpdmlkZVVSTChyLnJ1bnRpbWVVUkwpLmRvbWFpbixzLl9vYmplY3REZXNjVVJMPVwiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuXCIrcy5fZG9tYWluK1wiLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29udGV4dFwiLHMuX3VzZXJzMm9ic2VydmU9W10scy5fb2JzZXJ2ZXJzPXt9LGEuX3N5bmNoZXI9aXx8by5jcmVhdGVTeW5jaGVyKGUsdCxyKTt2YXIgYz1vLmNyZWF0ZURpc2NvdmVyeShlLHIucnVudGltZVVSTCx0KTtyZXR1cm4gcy5fZGlzY292ZXJ5PWMscy5fZGlzY292ZXJpZXM9e30sd2luZG93LmRpc2NvdmVyeT1zLl9kaXNjb3ZlcnksYX1yZXR1cm4oMCxoLmRlZmF1bHQpKENvbnRleHRPYnNlcnZlcixlKSwoMCxmLmRlZmF1bHQpKENvbnRleHRPYnNlcnZlcixbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7ci5fc3luY2hlci5yZXN1bWVPYnNlcnZlcnMoe3N0b3JlOiEwfSkudGhlbihmdW5jdGlvbihpKXt2YXIgYT0oMCxvLmRlZmF1bHQpKGkpO2EubGVuZ3RoPjA/KHIuX29ic2VydmVycz1pLG4oaSksYS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPWlbcl07ZSYmKGNvbnRleHQuZGF0YS52YWx1ZXM9ZSksbi5zeW5jKCksdCYmbi5vbkRpc2Nvbm5lY3RlZCh0KX0pKTpuKCExKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oITEpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZWplY3QoXCJbQ29udGV4dE9ic2VydmVyXSBTdGFydCBmYWlsZWQgfCBcIixlKX0pfX0se2tleTpcInJlc3VtZURpc2NvdmVyaWVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7ZS5fZGlzY292ZXJ5LnJlc3VtZURpc2NvdmVyaWVzKCkudGhlbihmdW5jdGlvbihyKXtyLmZvckVhY2goZnVuY3Rpb24ocil7ci5kYXRhLnJlc291cmNlcyYmci5kYXRhLnJlc291cmNlc1swXT09PWUuX2NvbnRleHRSZXNvdXJjZVR5cGVzWzBdJiYoXCJsaXZlXCI9PT1yLmRhdGEuc3RhdHVzPyh0KFtyLmRhdGFdKSxyLnVuc3Vic2NyaWJlTGl2ZShlLl91cmwpKTpyLm9uTGl2ZShlLl91cmwsZnVuY3Rpb24oKXt0KFtyLmRhdGFdKSxyLnVuc3Vic2NyaWJlTGl2ZShlLl91cmwpfSkpfSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JlamVjdChcIltDb250ZXh0T2JzZXJ2ZXJdIHJlc3VtZURpc2NvdmVyaWVzIGZhaWxlZCB8IFwiLGUpfSl9fSx7a2V5Olwib25SZXN1bWVPYnNlcnZlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzdW1lT2JzZXJ2ZXI9ZX19LHtrZXk6XCJkaXNjb3ZlclVzZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49ZStcIkBcIit0O3JldHVybiByLl9kaXNjb3ZlclVzZXJzUHJvbWlzZXNbbl18fChyLl9kaXNjb3ZlclVzZXJzUHJvbWlzZXNbbl09bmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuX2Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc0RPKGUsW1wiY29udGV4dFwiXSxyLl9jb250ZXh0UmVzb3VyY2VUeXBlcyx0KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG89W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX2Rpc2NvdmVyaWVzW2UuZGF0YS5oeXBlcnR5SURdPWUsXCJsaXZlXCI9PT1lLmRhdGEuc3RhdHVzP3QucHVzaChlLmRhdGEpOm8ucHVzaChlKX0pLHQubGVuZ3RoPjA/bih0KTpvLmxlbmd0aD4wJiZvWzBdLm9uTGl2ZShyLl91cmwsZnVuY3Rpb24oKXt0LnB1c2gob1swXS5kYXRhKSxuKHQpLG9bMF0udW5zdWJzY3JpYmVMaXZlKHIuX3VybCl9KX0pfSkpLHIuX2Rpc2NvdmVyVXNlcnNQcm9taXNlc1tuXX19LHtrZXk6XCJvYnNlcnZlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxyPXRoaXM7cmV0dXJuIHIuX29ic2VydmVQcm9taXNlc1tlLmh5cGVydHlJRF18fChyLl9vYnNlcnZlUHJvbWlzZXNbZS5oeXBlcnR5SURdPW5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixvKXtyLl91c2VyczJvYnNlcnZlLmZvckVhY2goZnVuY3Rpb24odCl7aWYodC5fcmVwb3J0ZXI9PT1lLmh5cGVydHlJRClyZXR1cm4gbih0KX0pLHIuX2Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXIoZS5oeXBlcnR5SUQsW1wiY29udGV4dFwiXSxyLl9jb250ZXh0UmVzb3VyY2VUeXBlcyxyLl9kb21haW4pLnRoZW4oZnVuY3Rpb24oaSl7dmFyIGE9MCxzPXZvaWQgMDtpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5oYXNPd25Qcm9wZXJ0eShcImxhc3RNb2RpZmllZFwiKSYmZS5oYXNPd25Qcm9wZXJ0eShcInVybFwiKSYmRGF0ZS5wYXJzZShlLmxhc3RNb2RpZmllZCk+YSYmKGE9ZS5sYXN0TW9kaWZpZWQscz1lLnVybCl9KSwwIT1hJiZzP24oci5fc3Vic2NyaWJlQ29udGV4dChlLHMsdCkpOm8oXCJbQ29udGV4dE9ic2VydmVyLm9ic2VydmVdIGRpc2NvdmVyZWQgRGF0YU9iamVjcyBhcmUgaW52YWxpZFwiLGkpfSl9KSksci5fb2JzZXJ2ZVByb21pc2VzW2UuaHlwZXJ0eUlEXX19LHtrZXk6XCJfc3Vic2NyaWJlQ29udGV4dFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSxuPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oZSxvKXtuLl91c2VyczJvYnNlcnZlLmZvckVhY2goZnVuY3Rpb24ocil7aWYoci51cmw9PT10KXJldHVybiBlKHIpfSk7dmFyIGk9e3NjaGVtYTpuLl9vYmplY3REZXNjVVJMLHJlc291cmNlOnQsc3RvcmU6bnVsbCxwMnA6bnVsbCxtdXR1YWw6bnVsbCxkb21haW5fc3Vic2NyaXB0aW9uOnJ9O24uX3N5bmNoZXIuc3Vic2NyaWJlKGkpLnRoZW4oZnVuY3Rpb24odCl7bi5fdXNlcnMyb2JzZXJ2ZS5wdXNoKHQpLHQub25EaXNjb25uZWN0ZWQoZnVuY3Rpb24oKXt0LmRhdGEudmFsdWVzWzBdLnZhbHVlPVwidW5hdmFpbGFibGVcIix0LnN5bmMoKX0pLGUodCl9KX0pfX0se2tleTpcIl9kaXNjb3ZlckFuZFN1YnNjcmliZUxlZ2FjeVVzZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZShlKS50aGVuKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtcImxpdmVcIj09PWUuc3RhdHVzJiYoZS5oeXBlcnR5SUR8fChlLmh5cGVydHlJRD1lLnJlcG9ydGVyKSx0Ll9zdWJzY3JpYmVDb250ZXh0KGUuc2NoZW1hLGUudXJsKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByKGUpfSkpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt9KX0pfX0se2tleTpcInVub2JzZXJ2ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fdXNlcnMyb2JzZXJ2ZS5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7ci51cmw9PT1lJiYoci51bnN1YnNjcmliZSgpLHQuX3VzZXJzMm9ic2VydmUuc3BsaWNlKG4sMSkpfSl9fV0pLENvbnRleHRPYnNlcnZlcn0oYi5kZWZhdWx0KTt0LmRlZmF1bHQ9bSxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigzKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCl7KDAsby5kZWZhdWx0KSh0aGlzLEV2ZW50RW1pdHRlcil9cmV0dXJuKDAsYS5kZWZhdWx0KShFdmVudEVtaXR0ZXIsW3trZXk6XCJhZGRFdmVudExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzW2VdPXR9fSx7a2V5OlwidHJpZ2dlclwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyW2VdJiZyW2VdKHQpfX1dKSxFdmVudEVtaXR0ZXJ9KCk7dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMjYpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMyksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cig0KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDM0KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDM1KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDEzNyksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLG09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gQ29udGV4dFJlcG9ydGVyKGUsdCxyLG4sbyl7aWYoKDAsbC5kZWZhdWx0KSh0aGlzLENvbnRleHRSZXBvcnRlciksIWUpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGh5cGVydHlVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIlRoZSBNaW5pQnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlclwiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY29uZmlndXJhdGlvbiBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7dmFyIGk9KDAseS5kZWZhdWx0KSh0aGlzLChDb250ZXh0UmVwb3J0ZXIuX19wcm90b19ffHwoMCx1LmRlZmF1bHQpKENvbnRleHRSZXBvcnRlcikpLmNhbGwodGhpcyxlLHQscikpO3JldHVybiBpLnN5bmNoZXI9b3x8bi5jcmVhdGVTeW5jaGVyKGUsdCxyKSxpLmRvbWFpbj1uLmRpdmlkZVVSTChyLnJ1bnRpbWVVUkwpLmRvbWFpbixpLmNvbnRleHRzPXt9LGkuY29udGV4dERlc2NVUkw9XCJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS5cIitpLmRvbWFpbitcIi8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0NvbnRleHRcIixpLnN5bmNoZXIub25Ob3RpZmljYXRpb24oZnVuY3Rpb24oZSl7aS5vbk5vdGlmaWNhdGlvbihlKX0pLGkuc3luY2hlci5vbkNsb3NlKGZ1bmN0aW9uKGUpe2kuc2V0U3RhdHVzKGUuaWQsXCJ1bmF2YWlsYWJsZVwiKSxlLmFjaygpfSksaX1yZXR1cm4oMCxoLmRlZmF1bHQpKENvbnRleHRSZXBvcnRlcixlKSwoMCxmLmRlZmF1bHQpKENvbnRleHRSZXBvcnRlcixbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2Uuc3luY2hlci5yZXN1bWVSZXBvcnRlcnMoe3N0b3JlOiEwfSkudGhlbihmdW5jdGlvbihlKXt2YXIgbj0oMCxvLmRlZmF1bHQpKGUpO24ubGVuZ3RoPjA/KHQuY29udGV4dHM9ZSxuLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fb25TdWJzY3JpcHRpb24odC5jb250ZXh0c1tlXSl9KSxyKHQuY29udGV4dHMpKTpyKCExKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe30pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmVqZWN0KFwiW0NvbnRleHRSZXBvcnRlcl0gU3RhcnQgZmFpbGVkIHwgXCIsZSl9KX19LHtrZXk6XCJwcm9jZXNzTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZS5hY2soKX19LHtrZXk6XCJjcmVhdGVcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOlwibXlDb250ZXh0XCIsbz1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XT9hcmd1bWVudHNbNF06bnVsbCxpPWFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdP2FyZ3VtZW50c1s1XTpudWxsLHM9dGhpcyx1PXZvaWQgMDtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihhLGMpe3U9b3x8aT9vJiYhaT97cmVzb3VyY2VzOnIsZXhwaXJlczozMCxyZXBvcnRlcjpvfTohbyYmaT97cmVzb3VyY2VzOnIsZXhwaXJlczozMCxyZXVzZVVSTDppfTp7cmVzb3VyY2VzOnIsZXhwaXJlczozMCxyZXVzZVVSTDppLHJlcG9ydGVyOm99OntyZXNvdXJjZXM6cixleHBpcmVzOjMwfSxzLnN5bmNoZXIuY3JlYXRlKHMuY29udGV4dERlc2NVUkwsW10sdCwhMCwhMSxuLG51bGwsdSkudGhlbihmdW5jdGlvbih0KXtzLmNvbnRleHRzW2VdPXQscy5fb25TdWJzY3JpcHRpb24odCksYSh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2MoZSl9KX0pfX0se2tleTpcIl9vblN1YnNjcmlwdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe2Uub25TdWJzY3JpcHRpb24oZnVuY3Rpb24oZSl7ZS5hY2NlcHQoKX0pfX0se2tleTpcInNldENvbnRleHRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5jb250ZXh0c1tlXS5kYXRhLnZhbHVlcz10LHIudHJpZ2dlcihlK1wiLWNvbnRleHQtdXBkYXRlXCIsdCl9fV0pLENvbnRleHRSZXBvcnRlcn0oYi5kZWZhdWx0KTt0LmRlZmF1bHQ9bSxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dC5Db21tdW5pY2F0aW9uU3RhdHVzPXtPUEVOOlwib3BlblwiLFBFTkRJTkc6XCJwZW5kaW5nXCIsQ0xPU0VEOlwiY2xvc2VkXCIsUEFVU0VEOlwicGF1c2VkXCIsRkFJTEVEOlwiZmFpbGVkXCJ9LHQuY29tbXVuaWNhdGlvbk9iamVjdD17c3RhcnRpbmdUaW1lOlwiXCIsc3RhdHVzOlwiXCIscGFydGljaXBhbnRzOnt9fSx0LmNvbW11bmljYXRpb25DaGlsZHJlbj17cGFyZW50OlwiY29tbXVuaWNhdGlvblwiLGxpc3RlbmVyOlwicmVzb3VyY2VzXCIsdHlwZTpcIkh5cGVydHlSZXNvdXJjZVwifX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTQpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNjUpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDEyNSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigxNzEpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQ2hhdENvbnRyb2xsZXIoZSx0LHIsbixvLGkpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxDaGF0Q29udHJvbGxlciksIWUpdGhyb3cgRXJyb3IoXCJTeW5jaGVyIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeVwiKTtpZighdCl0aHJvdyBFcnJvcihcIkRpc2NvdmVyIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeVwiKTtpZighcil0aHJvdyBFcnJvcihcIkRvbWFpbiBpcyBhIG5lY2Vzc2FyeSBkZXBlbmRlY3lcIik7aWYoIW4pdGhyb3cgRXJyb3IoXCJTZWFyY2ggaXMgYSBuZWNlc3NhcnkgZGVwZW5kZWN5XCIpO3ZhciBhPXRoaXM7YS5fc3luY2hlcj1lLGEuZGlzY292ZXJ5PXQsYS5zZWFyY2g9bixhLm15SWRlbnRpdHk9byxhLmNvbnRyb2xsZXJNb2RlPVwicmVwb3J0ZXJcIixhLmNoaWxkX2NzZXE9MCxhLmRvbWFpbj1yLGEuX21hbmFnZXI9aTt2YXIgcz1lLm93bmVyO2EuX29iamVjdERlc2NVUkw9XCJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS5cIityK1wiLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29tbXVuaWNhdGlvblwiLGEuX2ludml0YXRpb25zSGFuZGxlcj1uZXcgeS5kZWZhdWx0KHMpfXJldHVybigwLGwuZGVmYXVsdCkoQ2hhdENvbnRyb2xsZXIsW3trZXk6XCJfc2V0T25BZGRDaGlsZExpc3RlbmVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLm9uQWRkQ2hpbGQoZnVuY3Rpb24oZSl7dC5jaGlsZF9jc2VxKz0xLHQuX29uTWVzc2FnZSYmdC5fb25NZXNzYWdlKGUpfSl9fSx7a2V5OlwiX29uU3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyO2UuYWNjZXB0KCk7dmFyIHI9SlNPTi5wYXJzZSgoMCxhLmRlZmF1bHQpKGUuaWRlbnRpdHkpKTtyLmhhc093blByb3BlcnR5KFwiYXNzZXJ0aW9uXCIpJiZkZWxldGUgci5hc3NlcnRpb247dmFyIG49e2h5cGVydHlVUkw6ZS51cmwsZG9tYWluOmUuZG9tYWluLGlkZW50aXR5OnJ9LG89ZS5pZGVudGl0eS51c2VyUHJvZmlsZS5ndWlkO2UuaWRlbnRpdHkubGVnYWN5JiYobi5sZWdhY3k9ZS5pZGVudGl0eS5sZWdhY3kpLHQuZGF0YS5wYXJ0aWNpcGFudHNbb109bix0aGlzLl9vblVzZXJBZGRlZCYmdGhpcy5fb25Vc2VyQWRkZWQobil9fSx7a2V5OlwiX29uVW5zdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXIscj1lLmlkZW50aXR5LnVzZXJQcm9maWxlO2UuaWRlbnRpdHkubGVnYWN5JiYoci5sZWdhY3k9ZS5pZGVudGl0eS5sZWdhY3kpLGRlbGV0ZSB0LmRhdGEucGFydGljaXBhbnRzW3IudXNlclVSTF0sdGhpcy5fb25Vc2VyUmVtb3ZlZCYmdGhpcy5fb25Vc2VyUmVtb3ZlZChyKX19LHtrZXk6XCJzZW5kRmlsZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LmNvbnRyb2xsZXJNb2RlLG49XCJyZXBvcnRlclwiPT09cj90LmRhdGFPYmplY3RSZXBvcnRlcjp0LmRhdGFPYmplY3RPYnNlcnZlcjtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG8pe3ZhciBpPXt1c2VyUHJvZmlsZTp0Lm15SWRlbnRpdHl9O24uYWRkSHlwZXJ0eVJlc291cmNlKFwicmVzb3VyY2VzXCIsXCJmaWxlXCIsZSxpKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBvPXt1c2VyUHJvZmlsZTp0Lm15SWRlbnRpdHl9LGk9e3ZhbHVlOmUsaWRlbnRpdHk6byxyZXNvdXJjZTplfSxhPW5ldyBmLmRlZmF1bHQobi51cmwsdC5fbWFuYWdlci5fcnVudGltZVVSTCx0Ll9tYW5hZ2VyLl9oeXBlcnR5VVJMLHQuX21hbmFnZXIuX2J1cyk7IWZ1bmN0aW9uIHNoYXJlMlJlcG9ydGVyKGUsdCxuLG8pe3ZhciBpPW87ZS5zaGFyaW5nU3RhdHVzLnRoZW4ocihuKSkuY2F0Y2goZnVuY3Rpb24ocil7aS5vbkxpdmUodCxmdW5jdGlvbigpe2kudW5zdWJzY3JpYmVMaXZlKHQpLGUuc2hhcmUoITApLHNoYXJlMlJlcG9ydGVyKGUsdCxuLGkpfSl9KX0oZSx0Ll9tYW5hZ2VyLl9oeXBlcnR5VVJMLGksYSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JlamVjdChlKX0pfX0se2tleTpcInNlbmRcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1yLmNvbnRyb2xsZXJNb2RlLGk9XCJyZXBvcnRlclwiPT09bj9yLmRhdGFPYmplY3RSZXBvcnRlcjpyLmRhdGFPYmplY3RPYnNlcnZlcjtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuY2hpbGRfY3NlcSs9MTt2YXIgYT17dHlwZTpcImNoYXRcIixjb250ZW50OmV9LHM9dHx8e3VzZXJQcm9maWxlOnIubXlJZGVudGl0eX07aS5hZGRDaGlsZChhLHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9e2NoaWxkSWQ6ZS5fY2hpbGRJZCxmcm9tOmUuX293bmVyLHZhbHVlOmUuZGF0YSx0eXBlOlwiY3JlYXRlXCIsaWRlbnRpdHk6c30sbz1uZXcgZi5kZWZhdWx0KGkudXJsLHIuX21hbmFnZXIuX3J1bnRpbWVVUkwsci5fbWFuYWdlci5faHlwZXJ0eVVSTCxyLl9tYW5hZ2VyLl9idXMpOyFmdW5jdGlvbiBzaGFyZTJSZXBvcnRlcihlLHQscixvKXt2YXIgaT1vO2Uuc2hhcmluZ1N0YXR1cy50aGVuKG4ocikpLmNhdGNoKGZ1bmN0aW9uKG4pe2kub25MaXZlKHQsZnVuY3Rpb24oKXtpLnVuc3Vic2NyaWJlTGl2ZSh0KSxlLnNoYXJlKCEwKSxzaGFyZTJSZXBvcnRlcihlLHQscixpKX0pfSl9KGUsci5fbWFuYWdlci5faHlwZXJ0eVVSTCx0LG8pfSkuY2F0Y2goZnVuY3Rpb24oZSl7byhlKX0pfSl9fSx7a2V5Olwib25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkNoYW5nZT1lfX0se2tleTpcIm9uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uTWVzc2FnZT1lfX0se2tleTpcIm9uVXNlckFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25Vc2VyQWRkZWQ9ZX19LHtrZXk6XCJvblVzZXJSZW1vdmVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25Vc2VyUmVtb3ZlZD1lfX0se2tleTpcIm9uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkNsb3NlPWV9fSx7a2V5Olwib25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2U9ZX19LHtrZXk6XCJhZGRVc2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWZ1bmN0aW9uKGUpe3JldHVybiAwIT09ZS5sZW5ndGh9O3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7aWYoMD09PWUuZmlsdGVyKHIpLmxlbmd0aClyZXR1cm4gaShcIkRvbid0IGhhdmUgdXNlcnMgdG8gaW52aXRlXCIpO3ZhciBhPVtdLHM9W10sdT17fTtlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dC5kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNETyhlLnVzZXIsW1wiY29tbVwiXSxbXCJjaGF0XCJdLGUuZG9tYWluKTthLnB1c2gocil9KSxvLmRlZmF1bHQuYWxsKGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHI9W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtcImxpdmVcIj09PWUuZGF0YS5zdGF0dXM/KHIucHVzaChlLmRhdGEuaHlwZXJ0eUlEKSx1W2UuZGF0YS5oeXBlcnR5SURdPWUpOnMubGVuZ3RoPDUmJnMucHVzaChlKX0pfSk7dmFyIG49XCJyZXBvcnRlclwiPT09dC5jb250cm9sbGVyTW9kZT90LmRhdGFPYmplY3RSZXBvcnRlcjp0LmRhdGFPYmplY3RPYnNlcnZlcjtzLmxlbmd0aD4wJiZ0Ll9pbnZpdGF0aW9uc0hhbmRsZXIuaW52aXRlRGlzY29ubmVjdGVkSHlwZXJ0aWVzKHMsbiksbi5pbnZpdGVPYnNlcnZlcnMociksbi5pbnZpdGF0aW9ucy5sZW5ndGg+MCYmdC5faW52aXRhdGlvbnNIYW5kbGVyLnByb2Nlc3NJbnZpdGF0aW9ucyh1LG4pfSkudGhlbihmdW5jdGlvbigpe24oITApfSkuY2F0Y2goZnVuY3Rpb24oZSl7aShlKX0pfSl9fSx7a2V5OlwiYWRkVXNlclJlcVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1mdW5jdGlvbihlKXtyZXR1cm4gMCE9PWUubGVuZ3RofTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe2lmKDA9PT1lLmZpbHRlcihyKS5sZW5ndGgpcmV0dXJuIG8oXCJbQ2hhdE1hbmFnZXIuQ2hhdENvbnRyb2xsZXIuYWRkVXNlclJlcV0gRG9uJ3QgaGF2ZSB1c2VycyB0byBhZGRcIik7aWYoXCJvYnNlcnZlclwiPT09IXQuY29udHJvbGxlck1vZGUpe3JldHVybiBvKFwiW0NoYXRNYW5hZ2VyLkNoYXRDb250cm9sbGVyLmFkZFVzZXJSZXFdIG9ubHkgYWxsb3dlZCB0byBDaGF0IE9ic2VydmVyXCIpfX0pfX0se2tleTpcIm9uSW52aXRhdGlvblJlc3BvbnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9vbkludml0YXRpb25SZXNwb25zZT1lLHQuX2ludml0YXRpb25zSGFuZGxlci5pbnZpdGF0aW9uUmVzcG9uc2U9ZX19LHtrZXk6XCJyZW1vdmVVc2VyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7fX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdLHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKFwicmVwb3J0ZXJcIj09PXQuY29udHJvbGxlck1vZGUpdC5faW52aXRhdGlvbnNIYW5kbGVyLmNsZWFuSW52aXRhdGlvbnModC5kYXRhT2JqZWN0UmVwb3J0ZXIpLnRoZW4oZnVuY3Rpb24oKXtpZihlKXRyeXtkZWxldGUgdC5fbWFuYWdlci5fcmVwb3J0ZXJzQ29udHJvbGxlcnNbdC5kYXRhT2JqZWN0UmVwb3J0ZXIudXJsXSx0LmRhdGFPYmplY3RSZXBvcnRlci5kZWxldGUoKSxyKCEwKSx0Ll9vbkNsb3NlJiZ0Ll9vbkNsb3NlKHtjb2RlOjIwMCxkZXNjOlwiZGVsZXRlZFwiLHVybDp0LmRhdGFPYmplY3RSZXBvcnRlci51cmx9KX1jYXRjaChlKXtuKCExKX1lbHNlIHQuX21hbmFnZXIuY29tbXVuaWNhdGlvbk9iamVjdC5zdGF0dXM9XCJjbG9zZWRcIixyKCEwKX0pO2Vsc2UgaWYoZSl0cnl7ZGVsZXRlIHQuX21hbmFnZXIuX29ic2VydmVyc0NvbnRyb2xsZXJzW3QuZGF0YU9iamVjdE9ic2VydmVyLnVybF0sdC5kYXRhT2JqZWN0T2JzZXJ2ZXIudW5zdWJzY3JpYmUoKSxyKCEwKX1jYXRjaChlKXtuKCExKX1lbHNlIHIoITApfSl9fSx7a2V5OlwiaW52aXRhdGlvbnNIYW5kbGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ludml0YXRpb25zSGFuZGxlcn19LHtrZXk6XCJ1cmxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJlcG9ydGVyXCI9PT10aGlzLmNvbnRyb2xsZXJNb2RlP3RoaXMuZGF0YU9iamVjdFJlcG9ydGVyLnVybDp0aGlzLmRhdGFPYmplY3RPYnNlcnZlci51cmx9fSx7a2V5OlwiZGF0YU9iamVjdFJlcG9ydGVyXCIsc2V0OmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcihcIltDaGF0Q29udHJvbGxlcl0gVGhlIGRhdGEgb2JqZWN0IHJlcG9ydGVyIGlzIG5lY2Vzc2FyeSBwYXJhbWV0ZXIgXCIpO3ZhciB0PXRoaXM7dC5jb250cm9sbGVyTW9kZT1cInJlcG9ydGVyXCIsZS5vblN1YnNjcmlwdGlvbihmdW5jdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJzdWJzY3JpYmVcIjp0Ll9vblN1YnNjcmliZShlKTticmVhaztjYXNlXCJ1bnN1YnNjcmliZVwiOnQuX29uVW5zdWJzY3JpYmUoZSl9fSksdC5fc2V0T25BZGRDaGlsZExpc3RlbmVyKGUpLGUub25SZWFkKGZ1bmN0aW9uKGUpe2UuYWNjZXB0KCl9KSxlLm9uRXhlY3V0ZShmdW5jdGlvbihlKXtzd2l0Y2goZS5tZXRob2Qpe2Nhc2VcImFkZFVzZXJcIjp0LmFkZFVzZXIoZS5wYXJhbXNbMF0pLnRoZW4oZnVuY3Rpb24oKXtlLmFjY2VwdCgpfSkuY2F0Y2goZnVuY3Rpb24odCl7ZS5yZWplY3QodCl9KTticmVhaztjYXNlXCJyZW1vdmVVc2VyXCI6dC5yZW1vdmVVc2VyKGUucGFyYW1zKS50aGVuKGZ1bmN0aW9uKCl7ZS5hY2NlcHQoKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UucmVqZWN0KHQpfSk7YnJlYWs7ZGVmYXVsdDplLnJlamVjdChcIltDaGF0Q29udHJvbGxlci5vbkV4ZWN1dGVdIENoYXQgbWV0aG9kIGV4ZWN1dGlvbiBub3QgYWNjZXB0ZWQgYnkgUmVwb3J0ZXJcIil9fSksdC5fZGF0YU9iamVjdFJlcG9ydGVyPWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXJ9fSx7a2V5OlwibWVzc2FnZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJlcG9ydGVyXCI9PT10aGlzLmNvbnRyb2xsZXJNb2RlP3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlci5fY2hpbGRyZW5PYmplY3RzOnRoaXMuX2RhdGFPYmplY3RPYnNlcnZlci5fY2hpbGRyZW5PYmplY3RzfX0se2tleTpcImRhdGFPYmplY3RPYnNlcnZlclwiLHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuY29udHJvbGxlck1vZGU9XCJvYnNlcnZlclwiLHQuX2RhdGFPYmplY3RPYnNlcnZlcj1lLGUub25DaGFuZ2UoXCIqXCIsZnVuY3Rpb24oZSl7aWYoZS5maWVsZC5pbmNsdWRlcyhcInBhcnRpY2lwYW50c1wiKSlzd2l0Y2goZS5jVHlwZSl7Y2FzZVwiYWRkXCI6dC5fb25Vc2VyQWRkZWQmJnQuX29uVXNlckFkZGVkKGUpO2JyZWFrO2Nhc2VcInJlbW92ZVwiOnQuX29uVXNlclJlbW92ZWQmJnQuX29uVXNlclJlbW92ZWQoZSl9dC5fb25DaGFuZ2UmJnQuX29uQ2hhbmdlKGUpfSksdC5fc2V0T25BZGRDaGlsZExpc3RlbmVyKGUpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YU9iamVjdE9ic2VydmVyfX0se2tleTpcImRhdGFPYmplY3RcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJlcG9ydGVyXCI9PT10aGlzLmNvbnRyb2xsZXJNb2RlP3RoaXMuZGF0YU9iamVjdFJlcG9ydGVyOnRoaXMuZGF0YU9iamVjdE9ic2VydmVyfX0se2tleTpcImNsb3NlRXZlbnRcIixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9jbG9zZUV2ZW50PWUsdC5fb25DbG9zZSYmdC5fb25DbG9zZShlKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nsb3NlRXZlbnR9fV0pLENoYXRDb250cm9sbGVyfSgpO3QuZGVmYXVsdD12LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlVzZXJJbmZvPXZvaWQgMDt2YXIgbj1yKDE3Miksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDM2KTt0LlVzZXJJbmZvPWZ1bmN0aW9uIFVzZXJJbmZvKGUsdCxyKXt2YXIgbjsoMCxhLmRlZmF1bHQpKHRoaXMsVXNlckluZm8pO3ZhciBpPSgwLHMuZGVlcENsb25lKShyKTtyZXR1cm4gci5oYXNPd25Qcm9wZXJ0eShcInVzZXJQcm9maWxlXCIpfHwoaS51c2VyUHJvZmlsZT1yKSxuPXtoeXBlcnR5VVJMOmUsZG9tYWluOnR9LCgwLG8uZGVmYXVsdCkobixcImRvbWFpblwiLHQpLCgwLG8uZGVmYXVsdCkobixcImlkZW50aXR5XCIsaSksbn19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE0KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDY1KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDMpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoNCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBDaGF0KGUsdCxyLG4pe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxDaGF0KSwhZSl0aHJvdyBFcnJvcihcIlN5bmNoZXIgaXMgYSBuZWNlc3NhcnkgZGVwZW5kZWN5XCIpO2lmKCF0KXRocm93IEVycm9yKFwiRG9tYWluIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeVwiKTt2YXIgbz10aGlzO28uX3N5bmNoZXI9ZSxvLm15SWRlbnRpdHk9cixvLmNvbnRyb2xsZXJNb2RlPVwicmVwb3J0ZXJcIixvLmNoaWxkX2NzZXE9MCxvLmRvbWFpbj10LG8uX21hbmFnZXI9bjtlLm93bmVyO28uX29iamVjdERlc2NVUkw9XCJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS5cIit0K1wiLy53ZWxsLWtub3duL2RhdGFzY2hlbWEvQ29tbXVuaWNhdGlvblwifXJldHVybigwLGwuZGVmYXVsdCkoQ2hhdCxbe2tleTpcIl9zZXRPbkFkZENoaWxkTGlzdGVuZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2Uub25BZGRDaGlsZChmdW5jdGlvbihlKXt0LmNoaWxkX2NzZXErPTEsdC5fb25NZXNzYWdlJiZ0Ll9vbk1lc3NhZ2UoZSl9KX19LHtrZXk6XCJfb25TdWJzY3JpYmVcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXI7ZS5hY2NlcHQoKTt2YXIgcj1KU09OLnBhcnNlKCgwLGEuZGVmYXVsdCkoZS5pZGVudGl0eSkpO3IuaGFzT3duUHJvcGVydHkoXCJhc3NlcnRpb25cIikmJmRlbGV0ZSByLmFzc2VydGlvbjt2YXIgbj17aHlwZXJ0eVVSTDplLnVybCxkb21haW46ZS5kb21haW4saWRlbnRpdHk6cn0sbz1lLmlkZW50aXR5LnVzZXJQcm9maWxlLmd1aWQ7ZS5pZGVudGl0eS5sZWdhY3kmJihuLmxlZ2FjeT1lLmlkZW50aXR5LmxlZ2FjeSksdC5kYXRhLnBhcnRpY2lwYW50c1tvXT1uLHRoaXMuX29uVXNlckFkZGVkJiZ0aGlzLl9vblVzZXJBZGRlZChuKX19LHtrZXk6XCJfb25VbnN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGFPYmplY3RSZXBvcnRlcixyPWUuaWRlbnRpdHkudXNlclByb2ZpbGU7ZS5pZGVudGl0eS5sZWdhY3kmJihyLmxlZ2FjeT1lLmlkZW50aXR5LmxlZ2FjeSksZGVsZXRlIHQuZGF0YS5wYXJ0aWNpcGFudHNbci51c2VyVVJMXSx0aGlzLl9vblVzZXJSZW1vdmVkJiZ0aGlzLl9vblVzZXJSZW1vdmVkKHIpfX0se2tleTpcInNlbmRGaWxlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuY29udHJvbGxlck1vZGUsbj1cInJlcG9ydGVyXCI9PT1yP3QuZGF0YU9iamVjdFJlcG9ydGVyOnQuZGF0YU9iamVjdE9ic2VydmVyO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbyl7dmFyIGk9e3VzZXJQcm9maWxlOnQubXlJZGVudGl0eX07bi5hZGRIeXBlcnR5UmVzb3VyY2UoXCJyZXNvdXJjZXNcIixcImZpbGVcIixlLGkpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG49e3VzZXJQcm9maWxlOnQubXlJZGVudGl0eX07cih7dmFsdWU6ZSxpZGVudGl0eTpuLHJlc291cmNlOmV9KX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmVqZWN0KGUpfSl9fSx7a2V5Olwic2VuZFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXIuY29udHJvbGxlck1vZGUsaT1cInJlcG9ydGVyXCI9PT1uP3IuZGF0YU9iamVjdFJlcG9ydGVyOnIuZGF0YU9iamVjdE9ic2VydmVyO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7ci5jaGlsZF9jc2VxKz0xO3ZhciBhPXt0eXBlOlwiY2hhdFwiLGNvbnRlbnQ6ZX0scz10fHx7dXNlclByb2ZpbGU6ci5teUlkZW50aXR5fTtpLmFkZENoaWxkKGEscykudGhlbihmdW5jdGlvbihlKXt2YXIgdD17Y2hpbGRJZDplLl9jaGlsZElkLGZyb206ZS5fb3duZXIsdmFsdWU6ZS5kYXRhLHR5cGU6XCJjcmVhdGVcIixpZGVudGl0eTpzfTtuKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7byhlKX0pfSl9fSx7a2V5Olwib25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkNoYW5nZT1lfX0se2tleTpcIm9uTWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uTWVzc2FnZT1lfX0se2tleTpcIm9uVXNlckFkZGVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25Vc2VyQWRkZWQ9ZX19LHtrZXk6XCJvblVzZXJSZW1vdmVkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fb25Vc2VyUmVtb3ZlZD1lfX0se2tleTpcIm9uQ2xvc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkNsb3NlPWV9fSx7a2V5Olwib25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVzcG9uc2U9ZX19LHtrZXk6XCJvbkludml0YXRpb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uSW52aXRhdGlvblJlc3BvbnNlPWV9fSx7a2V5OlwicmVtb3ZlVXNlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe319LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXSx0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtpZihcInJlcG9ydGVyXCI9PT10LmNvbnRyb2xsZXJNb2RlKWlmKGUpdHJ5e2RlbGV0ZSB0Ll9tYW5hZ2VyLl9yZXBvcnRlcnNDb250cm9sbGVyc1t0LmRhdGFPYmplY3RSZXBvcnRlci51cmxdLHQuZGF0YU9iamVjdFJlcG9ydGVyLmRlbGV0ZSgpLHIoITApLHQuX29uQ2xvc2UmJnQuX29uQ2xvc2Uoe2NvZGU6MjAwLGRlc2M6XCJkZWxldGVkXCIsdXJsOnQuZGF0YU9iamVjdFJlcG9ydGVyLnVybH0pfWNhdGNoKGUpe24oITEpfWVsc2UgdC5fbWFuYWdlci5jb21tdW5pY2F0aW9uT2JqZWN0LnN0YXR1cz1cImNsb3NlZFwiLHIoITApO2Vsc2UgaWYoZSl0cnl7ZGVsZXRlIHQuX21hbmFnZXIuX29ic2VydmVyc0NvbnRyb2xsZXJzW3QuZGF0YU9iamVjdE9ic2VydmVyLnVybF0sdC5kYXRhT2JqZWN0T2JzZXJ2ZXIudW5zdWJzY3JpYmUoKSxyKCEwKX1jYXRjaChlKXtuKCExKX1lbHNlIHIoITApfSl9fSx7a2V5OlwidXJsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyZXBvcnRlclwiPT09dGhpcy5jb250cm9sbGVyTW9kZT90aGlzLmRhdGFPYmplY3RSZXBvcnRlci51cmw6dGhpcy5kYXRhT2JqZWN0T2JzZXJ2ZXIudXJsfX0se2tleTpcImRhdGFPYmplY3RSZXBvcnRlclwiLHNldDpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJbQ2hhdENvbnRyb2xsZXJdIFRoZSBkYXRhIG9iamVjdCByZXBvcnRlciBpcyBuZWNlc3NhcnkgcGFyYW1ldGVyIFwiKTt2YXIgdD10aGlzO3QuY29udHJvbGxlck1vZGU9XCJyZXBvcnRlclwiLGUub25TdWJzY3JpcHRpb24oZnVuY3Rpb24oZSl7c3dpdGNoKGUudHlwZSl7Y2FzZVwic3Vic2NyaWJlXCI6dC5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZVwidW5zdWJzY3JpYmVcIjp0Ll9vblVuc3Vic2NyaWJlKGUpfX0pLHQuX3NldE9uQWRkQ2hpbGRMaXN0ZW5lcihlKSxlLm9uUmVhZChmdW5jdGlvbihlKXtlLmFjY2VwdCgpfSksZS5vbkV4ZWN1dGUoZnVuY3Rpb24oZSl7c3dpdGNoKGUubWV0aG9kKXtjYXNlXCJhZGRVc2VyXCI6dC5hZGRVc2VyKGUucGFyYW1zWzBdKS50aGVuKGZ1bmN0aW9uKCl7ZS5hY2NlcHQoKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe2UucmVqZWN0KHQpfSk7YnJlYWs7Y2FzZVwicmVtb3ZlVXNlclwiOnQucmVtb3ZlVXNlcihlLnBhcmFtcykudGhlbihmdW5jdGlvbigpe2UuYWNjZXB0KCl9KS5jYXRjaChmdW5jdGlvbih0KXtlLnJlamVjdCh0KX0pO2JyZWFrO2RlZmF1bHQ6ZS5yZWplY3QoXCJbQ2hhdENvbnRyb2xsZXIub25FeGVjdXRlXSBDaGF0IG1ldGhvZCBleGVjdXRpb24gbm90IGFjY2VwdGVkIGJ5IFJlcG9ydGVyXCIpfX0pLHQuX2RhdGFPYmplY3RSZXBvcnRlcj1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyfX0se2tleTpcIm1lc3NhZ2VzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyZXBvcnRlclwiPT09dGhpcy5jb250cm9sbGVyTW9kZT90aGlzLl9kYXRhT2JqZWN0UmVwb3J0ZXIuX2NoaWxkcmVuT2JqZWN0czp0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIuX2NoaWxkcmVuT2JqZWN0c319LHtrZXk6XCJkYXRhT2JqZWN0T2JzZXJ2ZXJcIixzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmNvbnRyb2xsZXJNb2RlPVwib2JzZXJ2ZXJcIix0Ll9kYXRhT2JqZWN0T2JzZXJ2ZXI9ZSxlLm9uQ2hhbmdlKFwiKlwiLGZ1bmN0aW9uKGUpe2lmKGUuZmllbGQuaW5jbHVkZXMoXCJwYXJ0aWNpcGFudHNcIikpc3dpdGNoKGUuY1R5cGUpe2Nhc2VcImFkZFwiOnQuX29uVXNlckFkZGVkJiZ0Ll9vblVzZXJBZGRlZChlKTticmVhaztjYXNlXCJyZW1vdmVcIjp0Ll9vblVzZXJSZW1vdmVkJiZ0Ll9vblVzZXJSZW1vdmVkKGUpfXQuX29uQ2hhbmdlJiZ0Ll9vbkNoYW5nZShlKX0pLHQuX3NldE9uQWRkQ2hpbGRMaXN0ZW5lcihlKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFPYmplY3RPYnNlcnZlcn19LHtrZXk6XCJkYXRhT2JqZWN0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyZXBvcnRlclwiPT09dGhpcy5jb250cm9sbGVyTW9kZT90aGlzLmRhdGFPYmplY3RSZXBvcnRlcjp0aGlzLmRhdGFPYmplY3RPYnNlcnZlcn19LHtrZXk6XCJjbG9zZUV2ZW50XCIsc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fY2xvc2VFdmVudD1lLHQuX29uQ2xvc2UmJnQuX29uQ2xvc2UoZSl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9zZUV2ZW50fX1dKSxDaGF0fSgpO3QuZGVmYXVsdD1kLGUuZXhwb3J0cz10LmRlZmF1bHR9LCwsLCwsLCwsLCwsZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ29udGV4dFJlcG9ydGVyPXQuQ29udGV4dE9ic2VydmVyPXQuSWRlbnRpdHlNYW5hZ2VyPXQuRGlzY292ZXJ5PXQuU3luY2hlcj10LlNhbmRib3hGYWN0b3J5PXQuU2FuZGJveFJlZ2lzdHJ5PXQuU2FuZGJveFR5cGU9dC5TYW5kYm94PXZvaWQgMDt2YXIgbj1yKDE1NSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxMjgpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMTI5KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDEzMCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigxMzUpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMTM0KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDEzNiksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLF89cigxMzgpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKTt0LlNhbmRib3g9by5kZWZhdWx0LHQuU2FuZGJveFR5cGU9bi5TYW5kYm94VHlwZSx0LlNhbmRib3hSZWdpc3RyeT1hLmRlZmF1bHQsdC5TYW5kYm94RmFjdG9yeT11LmRlZmF1bHQsdC5TeW5jaGVyPWwuZGVmYXVsdCx0LkRpc2NvdmVyeT1mLmRlZmF1bHQsdC5JZGVudGl0eU1hbmFnZXI9eS5kZWZhdWx0LHQuQ29udGV4dE9ic2VydmVyPWguZGVmYXVsdCx0LkNvbnRleHRSZXBvcnRlcj1iLmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlNhbmRib3hUeXBlPXZvaWQgMDt2YXIgbj1yKDQ4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDE0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDI2KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDMpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoNCksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigzNCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigzNSksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLF89cigxMjgpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxtPXIoMTI2KSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj0odC5TYW5kYm94VHlwZT17QVBQOlwiYXBwXCIsTk9STUFMOlwibm9ybWFsXCIsV0lORE9XOlwid2luZG93XCJ9LGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIFNhbmRib3goZSl7KDAsbC5kZWZhdWx0KSh0aGlzLFNhbmRib3gpO3ZhciB0PSgwLHkuZGVmYXVsdCkodGhpcywoU2FuZGJveC5fX3Byb3RvX198fCgwLHUuZGVmYXVsdCkoU2FuZGJveCkpLmNhbGwodGhpcykpLHI9dDtyZXR1cm4gZSYmKHIuY2FwYWJpbGl0aWVzPWUpLHR9cmV0dXJuKDAsaC5kZWZhdWx0KShTYW5kYm94LGUpLCgwLGYuZGVmYXVsdCkoU2FuZGJveCxbe2tleTpcImRlcGxveUNvbXBvbmVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7dmFyIGE9e3R5cGU6XCJjcmVhdGVcIixmcm9tOmIuZGVmYXVsdC5FeHRlcm5hbERlcGxveUFkZHJlc3MsdG86Yi5kZWZhdWx0LkludGVybmFsRGVwbG95QWRkcmVzcyxib2R5Ont1cmw6dCxzb3VyY2VDb2RlOmUsY29uZmlnOnJ9fTtuLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24oZSl7MjAwPT09ZS5ib2R5LmNvZGU/byhcImRlcGxveWVkXCIpOmkoZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6XCJyZW1vdmVDb21wb25lbnRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89e3R5cGU6XCJkZWxldGVcIixmcm9tOmIuZGVmYXVsdC5FeHRlcm5hbERlcGxveUFkZHJlc3MsdG86Yi5kZWZhdWx0LkludGVybmFsRGVwbG95QWRkcmVzcyxib2R5Ont1cmw6ZX19O3QucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT9yKFwidW5kZXBsb3llZFwiKTpuKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OlwibWF0Y2hlc1wiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxvLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4hKHQuY2FwYWJpbGl0aWVzW3JdJiZ0LmNhcGFiaWxpdGllc1tyXT09PWVbcl0pfSk7cmV0dXJuIDA9PT1yLmxlbmd0aHx8IWVbcl19fV0pLFNhbmRib3h9KGcuZGVmYXVsdCkpO3QuZGVmYXVsdD1SfSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cig0OCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig2NSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigxNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyNiksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDQpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMzQpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxfPXIoMTE2KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksbT1yKDM1KSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj1yKDM4KSxPPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oUiksdz1yKDEzMSksRD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHcpLGo9cigzNiksaz1PLmdldExvZ2dlcihcIkRhdGFPYmplY3RSZXBvcnRlclwiKSxMPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIERhdGFPYmplY3RSZXBvcnRlcihlKXsoMCxmLmRlZmF1bHQpKHRoaXMsRGF0YU9iamVjdFJlcG9ydGVyKTt2YXIgdD0oMCxoLmRlZmF1bHQpKHRoaXMsKERhdGFPYmplY3RSZXBvcnRlci5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyKSkuY2FsbCh0aGlzLGUpKSxyPXQ7cmV0dXJuIHIuX3N1YnNjcmlwdGlvbnM9e30sci5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKGUpe2subG9nKFwiW1N5bmNoZXIuRGF0YU9iamVjdFJlcG9ydGVyXSBcIityLnVybCtcIiBwdWJsaXNoIGNoYW5nZTogXCIsZSksci5fb25DaGFuZ2UoZSl9KSxyLl9hbGxvY2F0ZUxpc3RlbmVycygpLHIuaW52aXRhdGlvbnM9W10sci5fY2hpbGRyZW5TaXplVGhyZXNob2xkPTVlNCx0fXJldHVybigwLGcuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLGUpLCgwLHkuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLFt7a2V5OlwiX2FsbG9jYXRlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXsoMCxiLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUuX19wcm90b19ffHwoMCxsLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUpLFwiX2FsbG9jYXRlTGlzdGVuZXJzXCIsdGhpcykuY2FsbCh0aGlzKTt2YXIgZT10aGlzO2UuX29iamVjdExpc3RlbmVyPWUuX2J1cy5hZGRMaXN0ZW5lcihlLl91cmwsZnVuY3Rpb24odCl7c3dpdGNoKGsubG9nKFwiW1N5bmNoZXIuRGF0YU9iamVjdFJlcG9ydGVyXSBsaXN0ZW5lciBcIitlLl91cmwrXCIgUmVjZWl2ZWQ6IFwiLHQpLHQudHlwZSl7Y2FzZVwicmVzcG9uc2VcIjplLl9vblJlc3BvbnNlKHQpO2JyZWFrO2Nhc2VcInJlYWRcIjplLl9vblJlYWQodCk7YnJlYWs7Y2FzZVwiZXhlY3V0ZVwiOmUuX29uRXhlY3V0ZSh0KTticmVhaztjYXNlXCJjcmVhdGVcIjplLl9vbkNoaWxkQ3JlYXRlKHQpfX0pLGUuX3J1bnRpbWVTdGF0dXNMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fc3luY2hlci5fcnVudGltZVVybCtcIi9zdGF0dXNcIixmdW5jdGlvbih0KXt0LmJvZHkmJnQuYm9keS5yZXNvdXJjZSYmdC5ib2R5LnJlc291cmNlPT09ZS5fdXJsJiZ0LmJvZHkudmFsdWUmJnQuYm9keS52YWx1ZS5iYWNrdXBSZXZpc2lvbiYmKGUuZGF0YS5iYWNrdXBSZXZpc2lvbj10LmJvZHkudmFsdWUuYmFja3VwUmV2aXNpb24pfSl9fSx7a2V5OlwiX3JlbGVhc2VMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpeygwLGIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZSksXCJfcmVsZWFzZUxpc3RlbmVyc1wiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OlwiaW52aXRlT2JzZXJ2ZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49ZTtuLmxlbmd0aD4wJiYoay5sb2coXCJbU3luY2hlci5EYXRhT2JqZWN0UmVwb3J0ZXJdIEludml0ZU9ic2VydmVycyBcIixuLHIuX21ldGFkYXRhKSxuLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49bmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXt0eXBlOlwiY3JlYXRlXCIsZnJvbTpyLl9zeW5jaGVyLl9vd25lcix0bzpyLl9zeW5jaGVyLl9zdWJVUkwsYm9keTp7cmVzdW1lOiExLHJlc291cmNlOnIuX3VybCxzY2hlbWE6ci5fc2NoZW1hLHZhbHVlOnIuX21ldGFkYXRhLGF1dGhvcmlzZTpbZV19fTt0JiYoaS5ib2R5LnAycD10KSxyLmRhdGEubXV0dWFsfHwoaS5ib2R5Lm11dHVhbD1yLmRhdGEubXV0dWFsKSxyLl9idXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbih0KXtrLmxvZyhcIltTeW5jaGVyLkRhdGFPYmplY3RSZXBvcnRlcl0gSW52aXRhdGlvbiByZXBseSBcIix0KTt2YXIgcj17aW52aXRlZDplLGNvZGU6dC5ib2R5JiZ0LmJvZHkuY29kZT90LmJvZHkuY29kZTo1MDAsZGVzYzp0LmJvZHkmJnQuYm9keS5kZXNjP3QuYm9keS5kZXNjOlwiVW5rbm93blwifTtyLmNvZGU8MzAwP24ocik6byhyKX0pfSk7ci5pbnZpdGF0aW9ucy5wdXNoKG4pfSkpfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9oZWFydEJlYXQmJmUuX2hlYXJ0QmVhdC5zdG9wKCksZS5fZGVsZXRlQ2hpbGRyZW5zKCkudGhlbihmdW5jdGlvbih0KXtrLmxvZyh0KTt2YXIgcj17dHlwZTpcImRlbGV0ZVwiLGZyb206ZS5fb3duZXIsdG86ZS5fc3luY2hlci5fc3ViVVJMLGJvZHk6e3Jlc291cmNlOmUuX3VybH19O2UuX2J1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKHQpe2subG9nKFwiRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogXCIsdCksMjAwPT09dC5ib2R5LmNvZGUmJihlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX3JlcG9ydGVyc1tlLl91cmxdLGUuX3N5bmNPYmo9e30pfSl9KX19LHtrZXk6XCJvblN1YnNjcmlwdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcj1lfX0se2tleTpcIm9uUmVzcG9uc2VcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vblJlc3BvbnNlSGFuZGxlcj1lfX0se2tleTpcIm9uUmVhZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uUmVhZEhhbmRsZXI9ZX19LHtrZXk6XCJvbkV4ZWN1dGVcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkV4ZWN1dGVIYW5kbGVyPWV9fSx7a2V5OlwiX29uRm9yd2FyZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7c3dpdGNoKGsubG9nKFwiRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogXCIsZSksZS5ib2R5LnR5cGUpe2Nhc2VcInN1YnNjcmliZVwiOnQuX29uU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2VcInVuc3Vic2NyaWJlXCI6dC5fb25VblN1YnNjcmliZShlKX19fSx7a2V5OlwiX29uU3Vic2NyaWJlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5mcm9tLG49KDAsai5kaXZpZGVVUkwpKHIpLG89bi5kb21haW4saT0hMDtlLmJvZHkuaGFzT3duUHJvcGVydHkoXCJtdXR1YWxcIikmJiFlLmJvZHkubXV0dWFsJiYoaT0hMSk7dmFyIGE9e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsZG9tYWluOm8saWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LG51dHVhbDppLGFjY2VwdDpmdW5jdGlvbigpe3ZhciBuPXt1cmw6cixzdGF0dXM6XCJsaXZlXCJ9O3QuX3N1YnNjcmlwdGlvbnNbcl09bix0Lm1ldGFkYXRhLnN1YnNjcmlwdGlvbnMmJnQubWV0YWRhdGEuc3Vic2NyaXB0aW9ucy5wdXNoKG4udXJsKTt2YXIgbz0oMCxqLmRlZXBDbG9uZSkodC5fbWV0YWRhdGEpO28uZGF0YT0oMCxqLmRlZXBDbG9uZSkodC5kYXRhKSxvLnZlcnNpb249dC5fdmVyc2lvbjt2YXIgaT17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHNjaGVtYTp0Ll9zY2hlbWEsdmFsdWU6b319O3JldHVybiBlLmJvZHkuaGFzT3duUHJvcGVydHkoXCJtdXR1YWxcIikmJiFlLmJvZHkubXV0dWFsJiYoaS5ib2R5Lm11dHVhbD1lLmJvZHkubXV0dWFsLHQuZGF0YS5tdXR1YWw9ITEpLHQuX2hlYXJ0QmVhdCYmKGkuYm9keS52YWx1ZS5jaGlsZHJlbk9iamVjdHM9e30saS5ib2R5LnZhbHVlLmNoaWxkcmVuT2JqZWN0cy5oZWFydGJlYXQ9dC5faGVhcnRCZWF0LmhlYXJ0YmVhdCksdC5fYnVzLnBvc3RNZXNzYWdlKGkpLG59LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMyxkZXNjOnJ9fSl9fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihrLmxvZyhcIlNVQlNDUklQVElPTi1FVkVOVDogXCIsYSksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGEpKX19LHtrZXk6XCJfb25VblN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuZnJvbSxuPSgwLGouZGl2aWRlVVJMKShyKSxvPW4uZG9tYWluO2subG9nKFwiW0RhdGFPYmplY3RSZXBvcnRlci5fb25VblN1YnNjcmliZV1cIixlLG8sbiksZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl0sZGVsZXRlIHQuaW52aXRhdGlvbnNbcl07dmFyIGk9e3R5cGU6ZS5ib2R5LnR5cGUsdXJsOnIsZG9tYWluOm8saWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5fTt0Ll9vblN1YnNjcmlwdGlvbkhhbmRsZXImJihrLmxvZyhcIlVOLVNVQlNDUklQVElPTi1FVkVOVDogXCIsaSksdC5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGkpKX19LHtrZXk6XCJfb25SZXNwb25zZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxjb2RlOmUuYm9keS5jb2RlfTt0Ll9vblJlc3BvbnNlSGFuZGxlciYmKGsubG9nKFwiUkVTUE9OU0UtRVZFTlQ6IFwiLHIpLHQuX29uUmVzcG9uc2VIYW5kbGVyKHIpKX19LHtrZXk6XCJfb25SZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLGEuZGVmYXVsdCkodC5jaGlsZHJlbnNKU09OKS5sZW5ndGgsbj1yPnQuX2NoaWxkcmVuU2l6ZVRocmVzaG9sZCxpPXt0eXBlOmUudHlwZSx1cmw6ZS5mcm9tLGFjY2VwdDpmdW5jdGlvbigpe24/dC5fc3luY1JlcGx5Rm9yTGFyZ2VEYXRhKGUpOnQuX3N5bmNSZXBseShlKX0scmVqZWN0OmZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAxLGRlc2M6cn19KX19LHM9W107dC5tZXRhZGF0YS5zdWJzY3JpcHRpb25zP3M9dC5tZXRhZGF0YS5zdWJzY3JpcHRpb25zOnQuX3N1YnNjcmlwdGlvbnMmJihzPSgwLG8uZGVmYXVsdCkodC5fc3Vic2NyaXB0aW9ucykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zdWJzY3JpcHRpb25zW2VdLnVybH0pKSwtMSE9cy5pbmRleE9mKGUuZnJvbSk/bj90Ll9zeW5jUmVwbHlGb3JMYXJnZURhdGEoZSk6dC5fc3luY1JlcGx5KGUpOnQuX29uUmVhZEhhbmRsZXImJihrLmxvZyhcIlJFQUQtRVZFTlQ6IFwiLGkpLHQuX29uUmVhZEhhbmRsZXIoaSkpfX0se2tleTpcIl9zeW5jUmVwbHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsai5kZWVwQ2xvbmUpKHQubWV0YWRhdGEpO3IuZGF0YT0oMCxqLmRlZXBDbG9uZSkodC5kYXRhKSxyLmNoaWxkcmVuT2JqZWN0cz0oMCxqLmRlZXBDbG9uZSkodC5jaGlsZHJlbnNKU09OKSxyLnZlcnNpb249dC5fdmVyc2lvbjt2YXIgbj17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOnJ9fTt0Ll9idXMucG9zdE1lc3NhZ2Uobil9fSx7a2V5OlwiX3N5bmNSZXBseUZvckxhcmdlRGF0YVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxqLmRlZXBDbG9uZSkodC5tZXRhZGF0YSk7ci5kYXRhPSgwLGouZGVlcENsb25lKSh0LmRhdGEpLHIudmVyc2lvbj10Ll92ZXJzaW9uLGRlbGV0ZSByLmNoaWxkcmVuT2JqZWN0czt2YXIgbj1bXSxvPXt9O2ZvcihjaGlsZCBpbiB0Ll9jaGlsZHJlbk9iamVjdHMpb1tjaGlsZF09e30sKDAsYS5kZWZhdWx0KShvKS5sZW5ndGg+dC5fY2hpbGRyZW5TaXplVGhyZXNob2xkJiZuLnB1c2gobyksb1tjaGlsZF09e30sb1tjaGlsZF0udmFsdWU9dC5fY2hpbGRyZW5PYmplY3RzW2NoaWxkXS5tZXRhZGF0YSxvW2NoaWxkXS5pZGVudGl0eT10Ll9jaGlsZHJlbk9iamVjdHNbY2hpbGRdLmlkZW50aXR5O24ucHVzaChvKSxyLnJlc3BvbnNlcz1uLmxlbmd0aCsxO3ZhciBpPXtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToxMDAsdmFsdWU6cn19O3QuX2J1cy5wb3N0TWVzc2FnZShpKSxuLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49KDAsai5kZWVwQ2xvbmUpKGkpO24uYm9keS52YWx1ZT1lLG4uYm9keS52YWx1ZS5yZXNwb25zZXM9ci5yZXNwb25zZXMsc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2J1cy5wb3N0TWVzc2FnZShuKX0sNTApfSl9fSx7a2V5OlwiX29uRXhlY3V0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUuYm9keS5tZXRob2QpdGhyb3cgZTt2YXIgcj17aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwfX0sbj17dHlwZTplLnR5cGUsdXJsOmUuZnJvbSxtZXRob2Q6ZS5ib2R5Lm1ldGhvZCxwYXJhbXM6ZS5ib2R5LnBhcmFtcyxhY2NlcHQ6ZnVuY3Rpb24oKXt0Ll9idXMucG9zdE1lc3NhZ2Uocil9LHJlamVjdDpmdW5jdGlvbihyKXt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwMSxkZXNjOnJ9fSl9fTt0Ll9vbkV4ZWN1dGVIYW5kbGVyJiYoay5sb2coXCJbRGF0YU9iamVjdFJlcG9ydGVyXSBFWEVDVVRFLUVWRU5UOiBcIixuKSx0Ll9vbkV4ZWN1dGVIYW5kbGVyKG4pKX19LHtrZXk6XCJzdWJzY3JpcHRpb25zXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnN9fSx7a2V5OlwiY2hpbGRyZW5zSlNPTlwiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17fSxyPXZvaWQgMDtmb3IociBpbiBlLl9jaGlsZHJlbk9iamVjdHMpdFtyXT17fSx0W3JdLnZhbHVlPWUuX2NoaWxkcmVuT2JqZWN0c1tyXS5tZXRhZGF0YSx0W3JdLmlkZW50aXR5PWUuX2NoaWxkcmVuT2JqZWN0c1tyXS5pZGVudGl0eTtyZXR1cm4gdH19XSksRGF0YU9iamVjdFJlcG9ydGVyfShELmRlZmF1bHQpO3QuZGVmYXVsdD1MLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCl7IWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gT2JzZXJ2ZXIoZSx0LHIsbixvLGkpe2Z1bmN0aW9uIGRlbGl2ZXIoZSxuKXtpZihkZWxpdmVyLmRlbGF5PW4sIWRlbGl2ZXIucGF1c2UmJnMuY2hhbmdlc2V0Lmxlbmd0aD4wKXtpZighZSl7dmFyIG89cy5jaGFuZ2VzZXQuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFyfHxyLmluZGV4T2YoZS50eXBlKT49MH0pO28ubGVuZ3RoPjAmJnQobyl9cy5jaGFuZ2VzZXQ9W119fXZhciBhLHM9dGhpcztyZXR1cm4gZGVsaXZlci5wYXVzZT1vLGRlbGl2ZXIuZGVsYXk9aSxzLmdldD1mdW5jdGlvbihlLHQpe3JldHVyblwiX19vYnNlcnZlcl9fXCI9PT10P3M6XCJ1bm9ic2VydmVcIj09PXQ/ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LnVub2JzZXJ2ZShlKSxlfTpcImRlbGl2ZXJcIj09PXQ/ZGVsaXZlcjplW3RdfSxzLnRhcmdldD1lLHMuY2hhbmdlc2V0PVtdLHMudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfX3x8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19vYnNlcnZlckNhbGxiYWNrc19fXCIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX29ic2VydmVyc19fXCIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSkpLHMudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5wdXNoKHQpLHMudGFyZ2V0Ll9fb2JzZXJ2ZXJzX18ucHVzaCh0aGlzKSxhPW5ldyBQcm94eShlLHMpLGRlbGl2ZXIoITEsaSksYX1PYmplY3Qub2JzZXJ2ZXx8XCJmdW5jdGlvblwiIT10eXBlb2YgUHJveHl8fChPYnNlcnZlci5wcm90b3R5cGUuZGVsaXZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChudWxsLFwiZGVsaXZlclwiKX0sT2JzZXJ2ZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQscil7dmFyIG49ZVt0XSxvPXZvaWQgMD09PW4/XCJhZGRcIjpcInVwZGF0ZVwiO2lmKGVbdF09cixlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmKCF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKG8pPj0wKSl7dmFyIGk9e29iamVjdDplLG5hbWU6dCx0eXBlOm99LGE9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxzPXRoaXMuZGVsaXZlcigpO1widXBkYXRlXCI9PT1vJiYoaS5vbGRWYWx1ZT1uKSx0aGlzLmNoYW5nZXNldC5wdXNoKGkpLGEmJnMoITEsXCJudW1iZXJcIj09dHlwZW9mIHMuZGVsYXk/cy5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5kZWxldGVQcm9wZXJ0eT1mdW5jdGlvbihlLHQpe3ZhciByPWVbdF07aWYoZGVsZXRlIGVbdF0sZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKFwiZGVsZXRlXCIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZTp0LHR5cGU6XCJkZWxldGVcIixvbGRWYWx1ZTpyfSxvPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsaT10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLG8mJmkoITEsXCJudW1iZXJcIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5kZWZpbmVQcm9wZXJ0eT1mdW5jdGlvbihlLHQscil7aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxyKSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoXCJyZWNvbmZpZ3VyZVwiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6dCx0eXBlOlwicmVjb25maWd1cmVcIn0sbz0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLGk9dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxvJiZpKCExLFwibnVtYmVyXCI9PXR5cGVvZiBpLmRlbGF5P2kuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuc2V0UHJvdG90eXBlT2Y9ZnVuY3Rpb24oZSx0KXt2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7aWYoT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKFwic2V0UHJvdG90eXBlXCIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZTpcIl9fcHJvdG9fX1wiLHR5cGU6XCJzZXRQcm90b3R5cGVcIixvbGRWYWx1ZTpyfSxvPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsaT10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLG8mJmkoITEsXCJudW1iZXJcIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5wcmV2ZW50RXh0ZW5zaW9ucz1mdW5jdGlvbihlKXtpZihPYmplY3QucHJldmVudEV4dGVuc2lvbnMoZSksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKFwicHJldmVudEV4dGVuc2lvbnNcIik+PTApe3ZhciB0PXtvYmplY3Q6ZSx0eXBlOlwicHJldmVudEV4dGVuc2lvbnNcIn0scj0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG49dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaCh0KSxyJiZuKCExLFwibnVtYmVyXCI9PXR5cGVvZiBuLmRlbGF5P24uZGVsYXk6MTApfXJldHVybiEwfSxPYmplY3Qub2JzZXJ2ZT1mdW5jdGlvbihlLHQscixuLG8saSl7cmV0dXJuIG5ldyBPYnNlcnZlcihlLHQscixuLG8saSl9LE9iamVjdC51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyl7aWYoIXQpcmV0dXJuIGUuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZSgwLGUuX19vYnNlcnZlckNhbGxiYWNrc19fLmxlbmd0aCksdm9pZCBlLl9fb2JzZXJ2ZXJzX18uc3BsaWNlKDAsZS5fX29ic2VydmVyc19fLmxlbmd0aCk7ZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uZm9yRWFjaChmdW5jdGlvbihyLG4pe3Q9PT1yJiYoZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKG4sMSksZGVsZXRlIGUuX19vYnNlcnZlcnNfX1tuXS5jYWxsYmFjayxlLl9fb2JzZXJ2ZXJzX18uc3BsaWNlKG4sMSkpfSl9fSxBcnJheS5vYnNlcnZlPWZ1bmN0aW9uKGUsdCxyLG4sbyxpKXtpZighKGUgaW5zdGFuY2VvZiBBcnJheXx8QXJyYXkuaXNBcnJheShlKSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZpcnN0IGFyZ3VtZW50IHRvIEFycmF5Lm9ic2VydmVyIGlzIG5vdCBhbiBBcnJheVwiKTtyPXJ8fFtcImFkZFwiLFwidXBkYXRlXCIsXCJkZWxldGVcIixcInNwbGljZVwiXTt2YXIgYT1uZXcgUHJveHkoZSx7Z2V0OmZ1bmN0aW9uKHQsbil7cmV0dXJuXCJ1bm9ic2VydmVcIj09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIGU/T2JqZWN0LnVub2JzZXJ2ZSh0LGUpOnQudW5vYnNlcnZlKCl9Olwic3BsaWNlXCI9PT1uP2Z1bmN0aW9uKG4sbyl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fFwibnVtYmVyXCIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoXCJGaXJzdCB0d28gYXJndW1lbnRzIHRvIEFycmF5IHNwbGljZSBhcmUgbm90IG51bWJlciwgbnVtYmVyXCIpO3ZhciBpPXRoaXMuc2xpY2UobixuK28pLGE9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50cy5sZW5ndGgtMjowLHU9e29iamVjdDplLHR5cGU6XCJzcGxpY2VcIixpbmRleDpuLHJlbW92ZWQ6aSxhZGRlZENvdW50OmF9O2lmKHQuc3BsaWNlLmFwcGx5KHQsYXJndW1lbnRzKSxyLmluZGV4T2YoXCJzcGxpY2VcIik+PTApe3ZhciBuPTA9PT1zLl9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQubGVuZ3RoLGM9cy5fX29ic2VydmVyX18uZGVsaXZlcigpO3MuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5wdXNoKHUpLG4mJmMoITEsXCJudW1iZXJcIj09dHlwZW9mIGMuZGVsYXk/Yy5kZWxheToxMCl9fTpcInB1c2hcIj09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLDAsZSl9OlwicG9wXCI9PT1uP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLTEsMSl9OlwidW5zaGlmdFwiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGxpY2UoMCwwLGUpfTpcInNoaWZ0XCI9PT1uP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3BsaWNlKDAsMSl9OnRbbl19fSkscz1PYmplY3Qub2JzZXJ2ZShhLGZ1bmN0aW9uKGUpe3ZhciBuPWUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwibGVuZ3RoXCIhPT1lLm5hbWUmJlwiYWRkXCIhPT1lLm5hbWUmJighcnx8ci5pbmRleE9mKGUudHlwZSk+PTApfSk7bi5sZW5ndGg+MCYmdChuKX0scixuLG8saSk7cmV0dXJuIHN9LEFycmF5LnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLnVub2JzZXJ2ZSh0KX0pLE9iamVjdC5kZWVwT2JzZXJ2ZT1mdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gcmVvYnNlcnZlKGUscil7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihvKXtpZigoXCJvYmplY3RcIj09PW4oZVtvXSl8fFwiYXJyYXlcIj09PW4oZVtvXSkpJiYhZVtvXS5oYXNPd25Qcm9wZXJ0eShcIl9fb2JzZXJ2ZXJzX19cIikpe3ZhciBpPXIuc2xpY2UoMCk7aS5wdXNoKG8pLGVbb109T2JqZWN0LmRlZXBPYnNlcnZlKGVbb10sdCxpKX19KX1yPXJ8fFtdO3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSkubWF0Y2goL1xccyhbYS16QS1aXSspLylbMV0udG9Mb3dlckNhc2UoKX07cmV0dXJuIHJlb2JzZXJ2ZShlLHIpLE9iamVjdC5vYnNlcnZlKGUsZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcmVjdXJzZShlLHQscixvLGkpe2lmKG8gaW5zdGFuY2VvZiBPYmplY3Qpe09iamVjdC5rZXlzKG8pLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoIXJ8fHJbYV0hPT1vW2FdKXt2YXIgcz1yJiZ2b2lkIDAhPT1yW2FdP3JbYV06dm9pZCAwLHU9dm9pZCAwPT09cz9cImFkZFwiOlwidXBkYXRlXCIsYz1pK1wiLlwiK2E7bi5wdXNoKHtuYW1lOmUsb2JqZWN0OnQsdHlwZTp1LG9sZFZhbHVlOnMsbmV3VmFsdWU6b1thXSxrZXlwYXRoOmN9KSxyZWN1cnNlKGUsdCxzLG9bYV0sYyl9fSl9ZWxzZSBpZihyIGluc3RhbmNlb2YgT2JqZWN0KXt2YXIgYT1PYmplY3Qua2V5cyhyKTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIHM9bnVsbD09PW8/XCJ1cGRhdGVcIjpcImRlbGV0ZVwiLHU9aStcIi5cIithO24ucHVzaCh7bmFtZTplLG9iamVjdDp0LHR5cGU6cyxvbGRWYWx1ZTpyW2FdLG5ld1ZhbHVlOm8sa2V5cGF0aDp1fSkscmVjdXJzZShlLHQsclthXSx2b2lkIDAsdSl9KX19dmFyIG49W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PShyLmxlbmd0aD4wP3Iuam9pbihcIi5cIikrXCIuXCI6XCJcIikrZS5uYW1lO1widXBkYXRlXCIhPT1lLnR5cGUmJlwiYWRkXCIhPT1lLnR5cGV8fHJlb2JzZXJ2ZShlLm9iamVjdCxyKSxuLnB1c2goe25hbWU6ZS5uYW1lLG9iamVjdDplLm9iamVjdCx0eXBlOmUudHlwZSxvbGRWYWx1ZTplLm9sZFZhbHVlLG5ld1ZhbHVlOmUub2JqZWN0W2UubmFtZV0sa2V5cGF0aDp0fSkscmVjdXJzZShlLm5hbWUsZS5vYmplY3QsZS5vbGRWYWx1ZSxlLm9iamVjdFtlLm5hbWVdLHQpfSksdChuKX0pfX0oKX0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDM2KSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSGVhcnRCZWF0KGUsdCxyLG4pe2Z1bmN0aW9uIHRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihlKXt0aHJvd1wiW0hlYXJ0QmVhdF0gXCIrZStcIiBtYW5kYXRvcnkgcGFyYW1ldGVyIGlzIG1pc3NpbmdcIn12YXIgaT1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XT9hcmd1bWVudHNbNF06NjA7KDAsby5kZWZhdWx0KSh0aGlzLEhlYXJ0QmVhdCk7dmFyIGE9dGhpcztlP2EuX2J1cz1lOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcImJ1c1wiKSxuP2EuX2RhdGFPYmplY3Q9bjp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJkYXRhT2JqZWN0XCIpLGk/YS5faGVhcnRCZWF0UmF0ZT1pOnRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcihcImhlYXJ0QmVhdFJhdGVcIikscj9hLl9ydW50aW1lVXJsPXI6dGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKFwicnVudGltZVVybFwiKSx0P2EuX2h5cGVydHlVcmw9dDp0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoXCJoeXBlcnR5VXJsXCIpLGEuX3N0b3A9e2hlYXJ0QmVhdDohMSxzeW5jOmZ1bmN0aW9uKGUpe3ZhciBvPXtmcm9tOnQsdG86citcIi9zbVwiLHR5cGU6XCJleGVjdXRlXCIsYm9keTp7bWV0aG9kOlwic3RvcFN5bmNcIixwYXJhbXM6W24udXJsXX19O2UucG9zdE1lc3NhZ2Uobyl9fX1yZXR1cm4oMCxhLmRlZmF1bHQpKEhlYXJ0QmVhdCxbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MDt0aGlzLmhlYXJ0YmVhdD1lLHRoaXMuX2lzSGVhcnRCZWF0QWN0aXZlKHRoaXMuaGVhcnRCZWF0LDIqdGhpcy5faGVhcnRCZWF0UmF0ZSk/dGhpcy5fd2F0Y2hIZWFydEJlYXQodGhpcy5faGVhcnRCZWF0UmF0ZSwhMCx0aGlzLl9vbkhlcnRiZWF0U3RvcHBlZCk6KHRoaXMuX3N0b3AuaGVhcnRCZWF0PXRoaXMuX3N0YXJ0SGVhcnRCZWF0KHRoaXMuX2hlYXJ0QmVhdFJhdGUpLHRoaXMuX3N0YXJ0U3luYygpKX19LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zdG9wLmhlYXJ0QmVhdCYmdGhpcy5fc3RvcC5oZWFydEJlYXQoKSx0aGlzLl9zdG9wLnN5bmModGhpcy5fYnVzKX19LHtrZXk6XCJvbk5ld0hlYXJ0YmVhdFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuaGVhcnRiZWF0PWV9fSx7a2V5OlwiX2lzSGVhcnRCZWF0QWN0aXZlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj0oMCxzLnNlY29uZHNTaW5jZUVwb2NoKSgpLWU7cmV0dXJuIShyPjIqdCl9fSx7a2V5OlwiX3N0YXJ0SGVhcnRCZWF0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXtmcm9tOnQuX2h5cGVydHlVcmwsdG86dC5fZGF0YU9iamVjdC51cmwrXCIvY2hpbGRyZW4vXCIsdHlwZTpcImNyZWF0ZVwiLGJvZHk6e3Jlc291cmNlOlwiaGVhcnRiZWF0XCIsbXV0dWFsOiExLHZhbHVlOigwLHMuc2Vjb25kc1NpbmNlRXBvY2gpKCl9fTt0aGlzLl9idXMucG9zdE1lc3NhZ2UociksdGhpcy5oZWFydGJlYXQ9KDAscy5zZWNvbmRzU2luY2VFcG9jaCkoKTt2YXIgbj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBlPXtmcm9tOnQuX2h5cGVydHlVcmwsdG86dC5fZGF0YU9iamVjdC51cmwrXCIvY2hpbGRyZW4vXCIsdHlwZTpcImNyZWF0ZVwiLGJvZHk6e3Jlc291cmNlOlwiaGVhcnRiZWF0XCIsbXV0dWFsOiExLHZhbHVlOigwLHMuc2Vjb25kc1NpbmNlRXBvY2gpKCl9fTt0Ll9idXMucG9zdE1lc3NhZ2UoZSksdGhpcy5oZWFydGJlYXQ9KDAscy5zZWNvbmRzU2luY2VFcG9jaCkoKX0sMWUzKmUpO3JldHVybiBmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwobil9fX0se2tleTpcIl9zdGFydFN5bmNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2RhdGFPYmplY3QuZGF0YS5iYWNrdXBSZXZpc2lvbix0PXtmcm9tOnRoaXMuX2h5cGVydHlVcmwsdG86dGhpcy5fcnVudGltZVVybCtcIi9zbVwiLHR5cGU6XCJleGVjdXRlXCIsYm9keTp7bWV0aG9kOlwic3luY1wiLHBhcmFtczpbdGhpcy5fZGF0YU9iamVjdC51cmwsZV19fTt0aGlzLl9idXMucG9zdE1lc3NhZ2UodCl9fSx7a2V5OlwiX3dhdGNoSGVhcnRCZWF0XCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsbz1yLGk9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt0JiYhbi5faXNIZWFydEJlYXRBY3RpdmUobi5oZWFydEJlYXQsbi5faGVhcnRCZWF0UmF0ZSk/KGNsZWFySW50ZXJ2YWwoaSksbyhuKSk6IXQmJnRoaXMuX2lzSGVhcnRCZWF0QWN0aXZlKG4uaGVhcnRCZWF0LG4uX2hlYXJ0QmVhdFJhdGUpJiYoY2xlYXJJbnRlcnZhbChpKSxvKCkpfSwxZTMqZSoyKX19LHtrZXk6XCJfb25IZXJ0YmVhdFN0b3BwZWRcIix2YWx1ZTpmdW5jdGlvbihlKXtlLl9zdGFydEhlYXJ0QmVhdChlLl9oZWFydEJlYXRSYXRlKSxlLl9zdGFydFN5bmMoKX19LHtrZXk6XCJoZWFydEJlYXRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWFydGJlYXQ/dGhpcy5oZWFydGJlYXQ6MH19XSksSGVhcnRCZWF0fSgpO3QuZGVmYXVsdD11LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE0KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxNjApLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSHlwZXJ0eVJlc291cmNlRmFjdG9yeSgpeygwLGEuZGVmYXVsdCkodGhpcyxIeXBlcnR5UmVzb3VyY2VGYWN0b3J5KX1yZXR1cm4oMCx1LmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZUZhY3RvcnksW3trZXk6XCJjcmVhdGVIeXBlcnR5UmVzb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwO3N3aXRjaCh0KXtjYXNlXCJmaWxlXCI6bj1uZXcgbC5kZWZhdWx0KGUscik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJbSHlwZXJ0eVJlc291cmNlRmFjdG9yeS5jcmVhdGVIeXBlcnR5UmVzb3VyY2VdIG5vdCBzdXBwb3J0ZWQgdHlwZTogXCIsdCl9cmV0dXJuIG59fSx7a2V5OlwiY3JlYXRlSHlwZXJ0eVJlc291cmNlV2l0aENvbnRlbnRcIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT12b2lkIDA7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyl7c3dpdGNoKHQpe2Nhc2VcImZpbGVcIjppPW5ldyBsLmRlZmF1bHQoZSxuKTticmVhaztkZWZhdWx0OnJlamVjdCgpfWkuaW5pdChyKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkuc2F2ZSgpfSkudGhlbihmdW5jdGlvbigpe28oaSl9KX0pfX1dKSxIeXBlcnR5UmVzb3VyY2VGYWN0b3J5fSgpO3QuZGVmYXVsdD1kLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDE0KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDI2KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDMpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoNCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzNCksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGQpLHA9cigzNSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9cigzOCksaD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHYpLF89cigxNjEpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxtPShyKDM2KSxyKDE2MikpLGc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSxSPWguZ2V0TG9nZ2VyKFwiRmlsZUh5cGVydHlSZXNvdXJjZVwiKSxPPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIEZpbGVIeXBlcnR5UmVzb3VyY2UoZSx0KXsoMCx1LmRlZmF1bHQpKHRoaXMsRmlsZUh5cGVydHlSZXNvdXJjZSk7dmFyIHI9KDAsZi5kZWZhdWx0KSh0aGlzLChGaWxlSHlwZXJ0eVJlc291cmNlLl9fcHJvdG9fX3x8KDAsYS5kZWZhdWx0KShGaWxlSHlwZXJ0eVJlc291cmNlKSkuY2FsbCh0aGlzLGUsdCkpO3JldHVybiByLm1ldGFkYXRhLnJlc291cmNlVHlwZT1cImZpbGVcIixyfXJldHVybigwLHkuZGVmYXVsdCkoRmlsZUh5cGVydHlSZXNvdXJjZSxlKSwoMCxsLmRlZmF1bHQpKEZpbGVIeXBlcnR5UmVzb3VyY2UsW3trZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJbRmlsZUh5cGVydHlSZXNvdXJjZS5jb25zdHJ1Y3Rvcl0gbWlzc2luZyBtYW5kYXRvcnkgKmZpbGUqIGlucHV0IFwiKTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKHQuX21ldGFkYXRhLm5hbWU9ZS5uYW1lLHQuX21ldGFkYXRhLmxhc3RNb2RpZmllZD1lLmxhc3RNb2RpZmllZCx0Ll9tZXRhZGF0YS5zaXplPWUuc2l6ZSx0Ll9tZXRhZGF0YS5taW1ldHlwZT1lLnR5cGUsUi5sb2coXCJbRmlsZUh5cGVydHlSZXNvdXJjZS5pbml0XSBmaWxlOiBcIixlKSx0Ll9pc1NlbmRlcil7c3dpdGNoKGUudHlwZS5zcGxpdChcIi9cIilbMF0pe2Nhc2VcImltYWdlXCI6dC5fZ2V0SW1hZ2VQcmV2aWV3KGUpLnRoZW4oZnVuY3Rpb24obil7dC5fbWV0YWRhdGEucHJldmlldz1uLHQuX2NvbnRlbnQ9ZSxyKCl9KTticmVhaztkZWZhdWx0OnQuX2NvbnRlbnQ9ZSxyKCl9fWVsc2UgdC5fY29udGVudD1lLmNvbnRlbnQsZS5wcmV2aWV3JiYodC5fbWV0YWRhdGEucHJldmlldz1lLnByZXZpZXcpLHIoKX0pfX0se2tleTpcIl9nZXRJbWFnZVByZXZpZXdcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRmlsZVJlYWRlcjtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe2cuZGVmYXVsdC5yZXNpemUoZSx7d2lkdGg6MTAwLGhlaWdodDoxMDB9LGZ1bmN0aW9uKGUsbil7bj8odC5yZWFkQXNEYXRhVVJMKGUpLHQub25sb2FkPWZ1bmN0aW9uKGUpe3IoZS50YXJnZXQucmVzdWx0KX0pOihSLndhcm4oXCJbRmlsZUh5cGVydHlSZXNvdXJjZS5fZ2V0SW1hZ2VQcmV2aWV3XSB1bmFibGUgdG8gY3JlYXRlIGltYWdlIHByZXZpZXcgZnJvbSBvcmlnaW5hbCBpbWFnZSBcIikscih2b2lkIDApKX0pfSl9fSx7a2V5OlwidG9NZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OlwibmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhZGF0YS5uYW1lfX0se2tleTpcInByZXZpZXdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWV0YWRhdGEucHJldmlld319XSksRmlsZUh5cGVydHlSZXNvdXJjZX0oYi5kZWZhdWx0KTt0LmRlZmF1bHQ9TyxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxNCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyNiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMzQpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSxwPXIoMTE2KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksdj1yKDM1KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksXz1yKDM4KSxiPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oXyksbT1yKDM2KSxnPXIoMTMzKSxSPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksTz1iLmdldExvZ2dlcihcIkh5cGVydHlSZXNvdXJjZVwiKSx3PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIEh5cGVydHlSZXNvdXJjZShlLHQpeygwLHUuZGVmYXVsdCkodGhpcyxIeXBlcnR5UmVzb3VyY2UpO3ZhciByPSgwLGYuZGVmYXVsdCkodGhpcywoSHlwZXJ0eVJlc291cmNlLl9fcHJvdG9fX3x8KDAsYS5kZWZhdWx0KShIeXBlcnR5UmVzb3VyY2UpKS5jYWxsKHRoaXMsdCkpLG49cjtyZXR1cm4gbi5hcnJheWJ1ZmZlclNpemVMaW1pdD01MjQyODgwLG4uX2lzU2VuZGVyPWUsbi5fbG9jYWxTdG9yYWdlVVJMPW4uX3BhcmVudE9iamVjdC5fc3luY2hlci5fcnVudGltZVVybCtcIi9zdG9yYWdlXCIscn1yZXR1cm4oMCxoLmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZSxlKSwoMCxsLmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZSxbe2tleTpcInNhdmVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxyKXt2YXIgbj17ZnJvbTplLl9vd25lcix0bzplLl9sb2NhbFN0b3JhZ2VVUkwsdHlwZTpcImNyZWF0ZVwiLGJvZHk6e3ZhbHVlOigwLG0uZGVlcENsb25lKShlLl9tZXRhZGF0YSl9fSxvPWZ1bmN0aW9uKG4pe08uaW5mbyhcIltIeXBlcnR5UmVzb3VyY2Uuc2F2ZV0gcmVwbHk6IFwiLG4pLGUuX2J1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKGUuX293bmVyLG4uaWQpLDIwMD09PW4uYm9keS5jb2RlPyhuLmJvZHkudmFsdWUmJihlLl9tZXRhZGF0YS5jb250ZW50VVJMfHwoZS5fbWV0YWRhdGEuY29udGVudFVSTD1bXSksZS5fbWV0YWRhdGEuY29udGVudFVSTC5wdXNoKG4uYm9keS52YWx1ZSkpLHQoKSk6cihuLmJvZHkuY29kZStcIiBcIituLmJvZHkuZGVzYyl9O24uYm9keS52YWx1ZS5jb250ZW50PWUuX2NvbnRlbnQsZS5fYnVzLnBvc3RNZXNzYWdlKG4sbywhMSl9KX19LHtrZXk6XCJyZWFkXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gTy5pbmZvKFwiW0h5cGVydHlSZXNvdXJjZS5yZWFkXSBcIix0aGlzKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYodC5jb250ZW50KXIodCk7ZWxzZXt2YXIgbz10Ll9nZXRCZXN0Q29udGVudFVSTCh0Ll9tZXRhZGF0YS5jb250ZW50VVJMKTtPLmxvZyhcIlN0b3JhZ2U6XCIsbyk7dmFyIGk9e2Zyb206dC5fb3duZXIsdG86by51cmwsdHlwZTpcInJlYWRcIixib2R5OntyZXNvdXJjZTpvLnVybCtcIi9cIitvLnJlc291cmNlLHAycDohMH19O3QubWV0YWRhdGEucDJwUmVxdWVzdGVyJiZ0Lm1ldGFkYXRhLnAycEhhbmRsZXImJihpLmJvZHkucDJwUmVxdWVzdGVyPXQubWV0YWRhdGEucDJwUmVxdWVzdGVyLGkuYm9keS5wMnBIYW5kbGVyPXQubWV0YWRhdGEucDJwSGFuZGxlciksdC5fZ2V0QmVzdFJlc291cmNlKGksZSkudGhlbihmdW5jdGlvbihlKXtPLmluZm8oXCJbSHlwZXJ0eVJlc291cmNlXSAtIGdldCBsb2NhbGx5IHRoZSByZXNvdXJjZTpcIixlKSxyKHQpfSkuY2F0Y2goZnVuY3Rpb24oaSl7Ty53YXJuKFwiW0h5cGVydHlSZXNvdXJjZV0gLSBnZXQgbG9jYWxseSB0aGUgcmVzb3VyY2UgZmFpbFwiLGkpO3ZhciBhPXtmcm9tOnQuX293bmVyLHRvOm8ucmVtb3RlVVJMLHR5cGU6XCJyZWFkXCIsYm9keTp7cmVzb3VyY2U6by5yZW1vdGVVUkwrXCIvXCIrby5yZXNvdXJjZSxwMnA6ITB9fTt0Lm1ldGFkYXRhLnAycFJlcXVlc3RlciYmdC5tZXRhZGF0YS5wMnBIYW5kbGVyJiYoYS5ib2R5LnAycFJlcXVlc3Rlcj10Lm1ldGFkYXRhLnAycFJlcXVlc3RlcixhLmJvZHkucDJwSGFuZGxlcj10Lm1ldGFkYXRhLnAycEhhbmRsZXIpLHQuX2dldEJlc3RSZXNvdXJjZShhLGUpLnRoZW4oZnVuY3Rpb24oZSl7Ty53YXJuKFwiW0h5cGVydHlSZXNvdXJjZV0gLSBnZXQgcmVtb3RlbHkgdGhlIHJlc291cmNlXCIsZSkscih0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe08ud2FybihcIltIeXBlcnR5UmVzb3VyY2VdIC0gZ2V0IHJlbW90ZWx5IHRoZSByZXNvdXJjZSBmYWlsXCIsZSksbihlLmJvZHkuY29kZStcIiBcIitlLmJvZHkuZGVzYyl9KX0pfX0pfX0se2tleTpcIl9nZXRCZXN0UmVzb3VyY2VcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2J1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKHIuX293bmVyLHMpLGUuYm9keS5jb2RlPTQwOCxlLmJvZHkuZGVzYz1cIlJlc3BvbnNlIHRpbWVvdXRcIixvKGUpfSwzZTMpLGE9ZnVuY3Rpb24oZSl7Ty5sb2coXCJbSHlwZXJ0eVJlc291cmNlLnJlYWRdIHJlcGx5OiBcIixlKTt2YXIgYT1lLmlkO3N3aXRjaChjbGVhclRpbWVvdXQoaSksZS5ib2R5LmNvZGUpe2Nhc2UgMjAwOnIuX2NvbnRlbnQ9ZS5ib2R5LnZhbHVlLmNvbnRlbnQsZS5ib2R5LnZhbHVlLnNpemU8ci5hcnJheWJ1ZmZlclNpemVMaW1pdCYmci5zYXZlKCksci5fYnVzLnJlbW92ZVJlc3BvbnNlTGlzdGVuZXIoci5fb3duZXIsYSksbihlKTticmVhaztjYXNlIDE4Mzp0KGUuYm9keS52YWx1ZSk7YnJlYWs7ZGVmYXVsdDpyLl9idXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihyLl9vd25lcixhKSxvKGUpfX0scz1yLl9idXMucG9zdE1lc3NhZ2UoZSxhLCExKX0pfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztPLmluZm8oXCJbSHlwZXJ0eVJlc291cmNlLmRlbGV0ZV1cIixlLm1ldGFkYXRhKTt2YXIgdD17ZnJvbTplLl9vd25lcix0bzplLl9sb2NhbFN0b3JhZ2VVUkwsdHlwZTpcImRlbGV0ZVwiLGJvZHk6e3Jlc291cmNlczplLm1ldGFkYXRhLmNvbnRlbnRVUkx9fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyKXtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbihlKXtyKGUuYm9keS5jb2RlPDMwMD8hMDohMSl9KX0pfX0se2tleTpcIl9nZXRCZXN0Q29udGVudFVSTFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lWzBdLG49ci5zdWJzdHIoci5sYXN0SW5kZXhPZihcIi9cIikrMSk7cmV0dXJue3VybDp0Ll9sb2NhbFN0b3JhZ2VVUkwscmVzb3VyY2U6bixyZW1vdGVVUkw6ci5zdWJzdHIoMCxyLmxhc3RJbmRleE9mKFwiL1wiKSl9fX0se2tleTpcInJlc291cmNlVHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1ldGFkYXRhLnJlc291cmNlVHlwZX19LHtrZXk6XCJtaW1ldHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXRhZGF0YS50eXBlfX0se2tleTpcImNvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudH19LHtrZXk6XCJjb250ZW50VVJMXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21ldGFkYXRhLmNvbnRlbnRVUkx9fSx7a2V5Olwic2hhcmVhYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PSgwLHkuZGVmYXVsdCkoSHlwZXJ0eVJlc291cmNlLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGEuZGVmYXVsdCkoSHlwZXJ0eVJlc291cmNlLnByb3RvdHlwZSksXCJtZXRhZGF0YVwiLHRoaXMpO3JldHVybiB0LnJlc291cmNlVHlwZT1lLnJlc291cmNlVHlwZSx0fX1dKSxIeXBlcnR5UmVzb3VyY2V9KFIuZGVmYXVsdCk7dC5kZWZhdWx0PXcsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1cInVuZGVmaW5lZFwiIT10eXBlb2YgQmxvYiYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIEJvb2xlYW4obmV3IEJsb2IpfWNhdGNoKGUpe3JldHVybiExfX0oKSx1PXMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gMTAwPT09bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KDEwMCldKS5zaXplfWNhdGNoKGUpe3JldHVybiExfX0oKSxjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudCYmSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLnRvQmxvYixsPWN8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgQXJyYXlCdWZmZXImJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhdG9iLGQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEZpbGVSZWFkZXJ8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBVUkwsZj1mdW5jdGlvbigpe2Z1bmN0aW9uIEltYWdlVG9vbHMoKXsoMCxvLmRlZmF1bHQpKHRoaXMsSW1hZ2VUb29scyl9cmV0dXJuKDAsYS5kZWZhdWx0KShJbWFnZVRvb2xzLG51bGwsW3trZXk6XCJyZXNpemVcIix2YWx1ZTpmdW5jdGlvbihlLHQscil7XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmKHI9dCx0PXt3aWR0aDo2NDAsaGVpZ2h0OjQ4MH0pO3Qud2lkdGgsdC5oZWlnaHQ7aWYoIUltYWdlVG9vbHMuaXNTdXBwb3J0ZWQoKXx8IWUudHlwZS5tYXRjaCgvaW1hZ2UuKi8pKXJldHVybiByKGUsITEpLCExO2lmKGUudHlwZS5tYXRjaCgvaW1hZ2VcXC9naWYvKSlyZXR1cm4gcihlLCExKSwhMTt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO3JldHVybiBuLm9ubG9hZD1mdW5jdGlvbihvKXt2YXIgaT1uLndpZHRoLGE9bi5oZWlnaHQscz0hMTtpZihpPj1hJiZpPnQud2lkdGg/KGEqPXQud2lkdGgvaSxpPXQud2lkdGgscz0hMCk6YT50LmhlaWdodCYmKGkqPXQuaGVpZ2h0L2EsYT10LmhlaWdodCxzPSEwKSwhcylyZXR1cm4gdm9pZCByKGUsITEpO3ZhciB1PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7aWYodS53aWR0aD1pLHUuaGVpZ2h0PWEsdS5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKG4sMCwwLGksYSksYyl1LnRvQmxvYihmdW5jdGlvbihlKXtyKGUsITApfSxlLnR5cGUpO2Vsc2V7dmFyIGw9SW1hZ2VUb29scy5fdG9CbG9iKHUsZS50eXBlKTtyKGwsITApfX0sSW1hZ2VUb29scy5fbG9hZEltYWdlKG4sZSksITB9fSx7a2V5OlwiX3RvQmxvYlwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS50b0RhdGFVUkwodCksbj1yLnNwbGl0KFwiLFwiKSxvPXZvaWQgMDtvPW5bMF0uaW5kZXhPZihcImJhc2U2NFwiKT49MD9hdG9iKG5bMV0pOmRlY29kZVVSSUNvbXBvbmVudChuWzFdKTtmb3IodmFyIGk9bmV3IEFycmF5QnVmZmVyKG8ubGVuZ3RoKSxhPW5ldyBVaW50OEFycmF5KGkpLGM9MDtjPG8ubGVuZ3RoO2MrPTEpYVtjXT1vLmNoYXJDb2RlQXQoYyk7dmFyIGw9blswXS5zcGxpdChcIjpcIilbMV0uc3BsaXQoXCI7XCIpWzBdLGQ9bnVsbDtpZihzKWQ9bmV3IEJsb2IoW3U/YTppXSx7dHlwZTpsfSk7ZWxzZXt2YXIgZj1uZXcgQmxvYkJ1aWxkZXI7Zi5hcHBlbmQoaSksZD1mLmdldEJsb2IobCl9cmV0dXJuIGR9fSx7a2V5OlwiX2xvYWRJbWFnZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgVVJMKXt2YXIgbj1uZXcgRmlsZVJlYWRlcjtuLm9ubG9hZD1mdW5jdGlvbih0KXtlLnNyYz10LnRhcmdldC5yZXN1bHQsciYmcigpfSxuLnJlYWRBc0RhdGFVUkwodCl9ZWxzZSBlLnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKHQpLHImJnIoKX19LHtrZXk6XCJpc1N1cHBvcnRlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhUTUxDYW52YXNFbGVtZW50JiZsJiZkfX1dKSxJbWFnZVRvb2xzfSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEwMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigxNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyNiksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9cigzKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDQpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSx2PXIoMzQpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxfPXIoMTE2KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksbT1yKDM1KSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj1yKDM4KSxPPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oUiksdz1yKDM2KSxEPXIoMTMxKSxqPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoRCksaz1PLmdldExvZ2dlcihcIkRhdGFPYmplY3RPYnNlcnZlclwiKSxMPXtBTlk6XCJhbnlcIixTVEFSVDpcInN0YXJ0XCIsRVhBQ1Q6XCJleGFjdFwifSxNPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIERhdGFPYmplY3RPYnNlcnZlcihlKXsoMCxmLmRlZmF1bHQpKHRoaXMsRGF0YU9iamVjdE9ic2VydmVyKTt2YXIgdD0oMCxoLmRlZmF1bHQpKHRoaXMsKERhdGFPYmplY3RPYnNlcnZlci5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyKSkuY2FsbCh0aGlzLGUpKSxyPXQ7cmV0dXJuIHIuX3ZlcnNpb249ZS52ZXJzaW9uLHIuX2ZpbHRlcnM9e30sci5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uKGUpe3IuX29uRmlsdGVyKGUpfSksci5fYWxsb2NhdGVMaXN0ZW5lcnMoKSx0fXJldHVybigwLGcuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLGUpLCgwLHkuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLFt7a2V5Olwic3luY1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gay5pbmZvKFwiW0RhdGFPYmplY3RPYnNlcnZlcl9zeW5jXSBzeW5jaHJvbmlzaW5nIFwiKSxuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7dmFyIG49e307ZS5fc3luY2hlci5yZWFkKGUuX21ldGFkYXRhLnVybCxuKS50aGVuKGZ1bmN0aW9uKHIpe2suaW5mbyhcIltEYXRhT2JqZWN0T2JzZXJ2ZXJfc3luY10gdmFsdWUgdG8gc3luYzogXCIsciksKDAsYS5kZWZhdWx0KShlLmRhdGEsKDAsdy5kZWVwQ2xvbmUpKHIuZGF0YSkpLGUuX3ZlcnNpb249ci52ZXJzaW9uLGUuX21ldGFkYXRhLmxhc3RNb2RpZmllZD1yLmxhc3RNb2RpZmllZCxyLmNoaWxkcmVuT2JqZWN0cz8oZS5yZXN1bWVDaGlsZHJlbnMoci5jaGlsZHJlbk9iamVjdHMpLGUuX3N0b3JlQ2hpbGRyZW5zKCksdCghMCkpOnQoITApfSkuY2F0Y2goZnVuY3Rpb24oZSl7ay5pbmZvKFwiW0RhdGFPYmplY3RPYnNlcnZlcl9zeW5jXSBzeW5jIGZhaWxlZDogXCIsZSksdCghMSl9KX0pfX0se2tleTpcIl9zdG9yZUNoaWxkcmVuc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt9OygwLG8uZGVmYXVsdCkoZS5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPWUuX2NoaWxkcmVuT2JqZWN0czt0W3JdPXt9LHRbcl0udmFsdWU9bltyXS5tZXRhZGF0YSx0W3JdLmlkZW50aXR5PW5bcl0uaWRlbnRpdHl9KTt2YXIgcj17ZnJvbTplLl9vd25lcix0bzplLl9zeW5jaGVyLl9zdWJVUkwsdHlwZTpcImNyZWF0ZVwiLGJvZHk6e3Jlc291cmNlOmUuX3VybCxhdHRyaWJ1dGU6XCJjaGlsZHJlbk9iamVjdHNcIix2YWx1ZTp0fX07ZS5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleTpcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7KDAsYi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLl9fcHJvdG9fX3x8KDAsbC5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlKSxcIl9hbGxvY2F0ZUxpc3RlbmVyc1wiLHRoaXMpLmNhbGwodGhpcyk7dmFyIGU9dGhpcztlLl9jaGFuZ2VMaXN0ZW5lcj1lLl9idXMuYWRkTGlzdGVuZXIoZS5fdXJsK1wiL2NoYW5nZXNcIixmdW5jdGlvbih0KXtcInVwZGF0ZVwiPT09dC50eXBlJiYoay5sb2coXCJEYXRhT2JqZWN0T2JzZXJ2ZXItXCIrZS5fdXJsK1wiLVJDVjogXCIsdCksZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCkpfSl9fSx7a2V5OlwiX3JlbGVhc2VMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpeygwLGIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGwuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZSksXCJfcmVsZWFzZUxpc3RlbmVyc1wiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OlwiZGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2hlYXJ0QmVhdCYmZS5faGVhcnRCZWF0LnN0b3AoKSxlLl9kZWxldGVDaGlsZHJlbnMoKS50aGVuKGZ1bmN0aW9uKCl7ZS51bnN1YnNjcmliZSgpLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fc3luY2hlci5fb2JzZXJ2ZXJzW2UuX3VybF19KX19LHtrZXk6XCJ1bnN1YnNjcmliZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXt0eXBlOlwidW5zdWJzY3JpYmVcIixmcm9tOmUuX293bmVyLHRvOmUuX3N5bmNoZXIuX3N1YlVSTCxib2R5OntyZXNvdXJjZTplLl91cmx9fTtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtrLmxvZyhcIkRhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogXCIsdCksMjAwPT09dC5ib2R5LmNvZGUmJihlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3N5bmNoZXIuX29ic2VydmVyc1tlLl91cmxdKX0pfX0se2tleTpcIm9uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLG49e3R5cGU6TC5FWEFDVCxjYWxsYmFjazp0fSxvPWUuaW5kZXhPZihcIipcIik7bz09PWUubGVuZ3RoLTEmJigwPT09bz9uLnR5cGU9TC5BTlk6KG4udHlwZT1MLlNUQVJULHI9ZS5zdWJzdHIoMCxlLmxlbmd0aC0xKSkpLHRoaXMuX2ZpbHRlcnNbcl09bn19LHtrZXk6XCJfb25GaWx0ZXJcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOygwLG8uZGVmYXVsdCkodC5fZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj10Ll9maWx0ZXJzW3JdO24udHlwZT09PUwuQU5ZP24uY2FsbGJhY2soZSk6bi50eXBlPT09TC5TVEFSVD8wPT09ZS5maWVsZC5pbmRleE9mKHIpJiZuLmNhbGxiYWNrKGUpOm4udHlwZT09PUwuRVhBQ1QmJmUuZmllbGQ9PT1yJiZuLmNhbGxiYWNrKGUpfSl9fSx7a2V5Olwib25EaXNjb25uZWN0ZWRcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5fc3Vic2NyaWJlUmVnaXN0cmF0aW9uKCkudGhlbihmdW5jdGlvbigpe3QuX29uRGlzY29ubmVjdGVkPWUscigpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KX0pfX0se2tleTpcIl9zdWJzY3JpYmVSZWdpc3RyYXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17dHlwZTpcInN1YnNjcmliZVwiLGZyb206dGhpcy5fb3duZXIsdG86dGhpcy5fc3luY2hlci5fcnVudGltZVVybCtcIi9zdWJzY3JpcHRpb25zXCIsYm9keTp7cmVzb3VyY2VzOlt0aGlzLl91cmwrXCIvcmVnaXN0cmF0aW9uXCJdfX07cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlLl9idXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbih0KXtrLmxvZyhcIltEYXRhT2JqZWN0T2JzZXJ2ZXIuX3N1YnNjcmliZVJlZ2lzdHJhdGlvbl0gXCIrZS5fdXJsK1wiIHJjdmVkIHJlcGx5IFwiLHQpLDIwMD09PXQuYm9keS5jb2RlPyhlLl9nZW5lcmF0ZUxpc3RlbmVyKGUuX3VybCtcIi9yZWdpc3RyYXRpb25cIikscigpKTooay5lcnJvcihcIkVycm9yIHN1YnNjcmliaW5nIHJlZ2lzdHJhdGlvbiBzdGF0dXMgZm9yIFwiLGUuX3VybCksbihcIkVycm9yIHN1YnNjcmliaW5nIHJlZ2lzdHJhdGlvbiBzdGF0dXMgZm9yIFwiK2UuX3VybCkpfSl9KX19LHtrZXk6XCJfZ2VuZXJhdGVMaXN0ZW5lclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fYnVzLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7ay5sb2coXCJbRGF0YU9iamVjdE9ic2VydmVyLnJlZ2lzdHJhdGlvbk5vdGlmaWNhdGlvbl0gXCIrdC5fdXJsK1wiOiBcIixlKSxlLmJvZHkudmFsdWUmJlwiZGlzY29ubmVjdGVkXCI9PT1lLmJvZHkudmFsdWUmJnQuX29uRGlzY29ubmVjdGVkJiYoay5sb2coXCJbRGF0YU9iamVjdE9ic2VydmVyXSBcIit0Ll91cmwrXCI6IHdhcyBkaXNjb25uZWN0ZWQgXCIsZSksdC5fb25EaXNjb25uZWN0ZWQoKSl9KX19LHtrZXk6XCJleGVjdXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihvLGkpe3ZhciBhPXt0eXBlOlwiZXhlY3V0ZVwiLGZyb206ci5fb3duZXIsdG86bi5fdXJsLGJvZHk6e21ldGhvZDplLHBhcmFtczp0fX07bi5fYnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24odCl7ay5sb2coXCJbRGF0YU9iamVjdE9ic2VydmVyLmV4ZWN1dGVdIFwiK24uX3VybCtcIiByY3ZlZCByZXBseSBcIix0KSwyMDA9PT10LmJvZHkuY29kZT9vKCk6KGsud2FybihcIltEYXRhT2JqZWN0T2JzZXJ2ZXIuZXhlY3V0ZV0gZXhlY3V0aW9uIG9mIG1ldGhvZCBcIitlK1wiIHdhcyByZWplY3QgYnkgcmVwb3J0ZXJcIiksaShcIltEYXRhT2JqZWN0T2JzZXJ2ZXIuZXhlY3V0ZV0gZXhlY3V0aW9uIG9mIG1ldGhvZCBcIitlK1wiIHdhcyByZWplY3QgYnkgcmVwb3J0ZXJcIikpfSl9KX19XSksRGF0YU9iamVjdE9ic2VydmVyfShqLmRlZmF1bHQpO3QuZGVmYXVsdD1NLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzOCksdT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHMpLGM9dS5nZXRMb2dnZXIoXCJEYXRhUHJvdmlzaW9uYWxcIiksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIERhdGFQcm92aXNpb25hbChlLHQscixuKXsoMCxvLmRlZmF1bHQpKHRoaXMsRGF0YVByb3Zpc2lvbmFsKTt2YXIgaT10aGlzO2kuX293bmVyPWUsaS5fdXJsPXQsaS5fYnVzPXIsaS5fY2hpbGRyZW49bixpLl9jaGFuZ2VzPVtdLGkuX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsYS5kZWZhdWx0KShEYXRhUHJvdmlzaW9uYWwsW3trZXk6XCJfYWxsb2NhdGVMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbGlzdGVuZXI9ZS5fYnVzLmFkZExpc3RlbmVyKGUuX3VybCxmdW5jdGlvbih0KXtjLmxvZyhcIkRhdGFQcm92aXNpb25hbC1cIitlLl91cmwrXCItUkNWOiBcIix0KSxlLl9jaGFuZ2VzLnB1c2godCl9KX19LHtrZXk6XCJfcmVsZWFzZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fbGlzdGVuZXIucmVtb3ZlKCl9fSx7a2V5OlwiYXBwbHlcIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fY2hhbmdlT2JqZWN0KGUuX3N5bmNPYmosdCl9KX19LHtrZXk6XCJjaGlsZHJlblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbn19XSksRGF0YVByb3Zpc2lvbmFsfSgpO3QuZGVmYXVsdD1sLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzNiksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIE5vdGlmaWNhdGlvbkhhbmRsZXIoZSl7aWYoKDAsby5kZWZhdWx0KSh0aGlzLE5vdGlmaWNhdGlvbkhhbmRsZXIpLCFlKXRocm93IEVycm9yKFwiW05vdGlmaWNhdGlvbkhhbmRsZXIgQ29uc3RydWN0b3JdIGJ1cyBpbnB1dCBpcyBtYW5kYXRvcnlcIik7dGhpcy5fYnVzPWUsdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyPXt9fXJldHVybigwLGEuZGVmYXVsdCkoTm90aWZpY2F0aW9uSGFuZGxlcixbe2tleTpcIm9uTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXJbZV09dH19LHtrZXk6XCJvbkNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuaGFzT3duUHJvcGVydHkoXCJyZXNvdXJjZVwiKT9lLmJvZHkucmVzb3VyY2U6ZS5mcm9tLnNsaWNlKDAsLTEzKSxuPSgwLHMuZGl2aWRlVVJMKShyKSxvPW4uZG9tYWluLGk9ci5zcGxpdChcIjovL1wiKVswXSxhPWZ1bmN0aW9uKHIpe3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDAwLGRlc2M6XCJCYWQgUmVxdWVzdDogXCIrcn19KX07ZS5ib2R5Lmhhc093blByb3BlcnR5KFwic291cmNlXCIpfHxhKFwiTWlzc2luZyBzb3VyY2VcIiksZS5ib2R5Lmhhc093blByb3BlcnR5KFwic2NoZW1hXCIpfHxhKFwiTWlzc2luZyBzY2hlbWFcIiksZS5ib2R5Lmhhc093blByb3BlcnR5KFwidmFsdWVcIil8fGEoXCJNaXNzaW5nIHZhbHVlXCIpLGUuYm9keS5oYXNPd25Qcm9wZXJ0eShcImlkZW50aXR5XCIpfHxhKFwiTWlzc2luZyBpZGVudGl0eVwiKTt2YXIgdT17dHlwZTplLnR5cGUsZnJvbTplLmJvZHkuc291cmNlLHVybDpyLGRvbWFpbjpvLHNjaGVtYTplLmJvZHkuc2NoZW1hLHZhbHVlOmUuYm9keS52YWx1ZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksdG86ZS50byx2aWE6ZS5ib2R5LnZpYSxhY2s6ZnVuY3Rpb24ocil7dmFyIG49MjAwO3ImJihuPXIpLHQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOlwicmVzcG9uc2VcIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bn19KX0sZXJyb3I6ZnVuY3Rpb24oZSl7YShlKX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlcltpXSYmdC5fb25Ob3RpZmljYXRpb25IYW5kbGVyW2ldKHUpfX0se2tleTpcIm9uRGVsZXRlXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXQuX29ic2VydmVyc1tyXSxvPXtmcm9tOnQub3duZXIsdG86dC5fc3ViVVJMLGlkOmUuaWQsdHlwZTpcInVuc3Vic2NyaWJlXCIsYm9keTp7cmVzb3VyY2U6ZS5ib2R5LnJlc291cmNlfX07aWYodC5fYnVzLnBvc3RNZXNzYWdlKG8pLGRlbGV0ZSB0Ll9vYnNlcnZlcnNbcl0sbil7dmFyIGk9e3R5cGU6ZS50eXBlLHVybDpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxhY2s6ZnVuY3Rpb24ocil7dmFyIG89MjAwO3ImJihvPXIpLDIwMD09PW8mJm4uZGVsZXRlKCksdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6XCJyZXNwb25zZVwiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpvLHNvdXJjZTp0Ll9vd25lcn19KX19O3QuX29uTm90aWZpY2F0aW9uSGFuZGxlciYmKGxvZy5sb2coXCJOT1RJRklDQVRJT04tRVZFTlQ6IFwiLGkpLHQuX29uTm90aWZpY2F0aW9uSGFuZGxlcihpKSl9ZWxzZSB0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZTpcInJlc3BvbnNlXCIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxzb3VyY2U6dC5fb3duZXJ9fSl9fV0pLE5vdGlmaWNhdGlvbkhhbmRsZXJ9KCk7dC5kZWZhdWx0PXUsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMjYpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzNCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDM1KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZCkscD1yKDEyNSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gRGlzY292ZXJlZE9iamVjdChlLHQscixuLGkpeygwLGEuZGVmYXVsdCkodGhpcyxEaXNjb3ZlcmVkT2JqZWN0KTt2YXIgcz0oMCx1LmRlZmF1bHQpKHRoaXMsKERpc2NvdmVyZWRPYmplY3QuX19wcm90b19ffHwoMCxvLmRlZmF1bHQpKERpc2NvdmVyZWRPYmplY3QpKS5jYWxsKHRoaXMsZS5oeXBlcnR5SUR8fGUudXJsLHQscixuKSk7cmV0dXJuIHMuX2RhdGE9ZSxzLl9kaXNjb3Zlcnk9aSxzfXJldHVybigwLGYuZGVmYXVsdCkoRGlzY292ZXJlZE9iamVjdCxlKSwoMCxsLmRlZmF1bHQpKERpc2NvdmVyZWRPYmplY3QsW3trZXk6XCJkYXRhXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fV0pLCgwLGwuZGVmYXVsdCkoRGlzY292ZXJlZE9iamVjdCxbe2tleTpcImNoZWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e2JvZHk6e319O2UuX2Rpc2NvdmVyZWRPYmplY3RVUkwuc3RhcnRzV2l0aChcImh5cGVydHk6Ly9cIik/ZS5fZGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eVBlclVSTChlLl9kaXNjb3ZlcmVkT2JqZWN0VVJMKS50aGVuKGZ1bmN0aW9uKHIpe3QuYm9keS5zdGF0dXM9ci5zdGF0dXMsZS5fcHJvY2Vzc05vdGlmaWNhdGlvbih0KX0pOmUuX2Rpc2NvdmVyeS5kaXNjb3ZlckRhdGFPYmplY3RzUGVyVVJMKGUuX2Rpc2NvdmVyZWRPYmplY3RVUkwpLnRoZW4oZnVuY3Rpb24ocil7dC5ib2R5LnN0YXR1cz1yLnN0YXR1cyxlLl9wcm9jZXNzTm90aWZpY2F0aW9uKHQpfSl9fV0pLERpc2NvdmVyZWRPYmplY3R9KHkuZGVmYXVsdCk7dC5kZWZhdWx0PXYsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIFNlYXJjaChlLHQpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxTZWFyY2gpLCFlKXRocm93IG5ldyBFcnJvcihcIlRoZSBkaXNjb3ZlcnkgY29tcG9uZW50IGlzIGEgbmVlZGVkIHBhcmFtZXRlclwiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgaWRlbnRpdHlNYW5hZ2VyIGNvbXBvbmVudCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7dmFyIHI9dGhpcztyLmRpc2NvdmVyeT1lLHIuaWRlbnRpdHlNYW5hZ2VyPXR9cmV0dXJuKDAsbC5kZWZhdWx0KShTZWFyY2gsW3trZXk6XCJteUlkZW50aXR5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7ZS5pZGVudGl0eU1hbmFnZXIuZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCgpLnRoZW4oZnVuY3Rpb24oZSl7dChlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KX0pfX0se2tleTpcImh5cGVydGllc1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXthcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSYmYXJndW1lbnRzWzNdfX0se2tleTpcInVzZXJzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0mJmFyZ3VtZW50c1s0XTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbmVlZCB0byBwcm92aWRlIGEgbGlzdCBvZiB1c2Vyc1wiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbmVlZCB0byBwcm92aWRlIGEgbGlzdCBvZiBkb21haW5zXCIpO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIllvdSBuZWVkIHRvIHByb3ZpZGUgYSBsaXN0IG9mIHJlc291cmNlc1wiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbmVlZCB0byBwcm92aWRlIGEgbGlzdCBvZiBzY2hlbWVzXCIpO3ZhciBzPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24odSxjKXtpZigwPT09ZS5sZW5ndGgpdShlKTtlbHNle3ZhciBsPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlLG8pe3ZhciBhPXRbb107aT9sLnB1c2gocy5kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGEoZSxyLG4pKTpsLnB1c2gocy5kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXMoZSxyLG4sYSkpfSksYS5kZWZhdWx0LmFsbChsLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlfSxmdW5jdGlvbihlKXtyZXR1cm4gZX0pfSkpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tYXAoZnVuY3Rpb24oZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShcImh5cGVydHlJRFwiKSlyZXR1cm4gZTt2YXIgdD0oMCxvLmRlZmF1bHQpKGUpLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uKHQscil7dmFyIG49bmV3IERhdGUoZVtyXS5sYXN0TW9kaWZpZWQpO3JldHVybiBuZXcgRGF0ZShlW3RdLmxhc3RNb2RpZmllZCkuZ2V0VGltZSgpPG4uZ2V0VGltZSgpP3I6dH0pO3JldHVybiBlW3RdfSkscj10LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eShcImh5cGVydHlJRFwiKX0pO2UuZm9yRWFjaChmdW5jdGlvbihlKXtpZihcIk5vIEh5cGVydHkgd2FzIGZvdW5kXCIhPT1lKXJldHVybiB1KHIpfSksYyhcIk5vIEh5cGVydHkgd2FzIGZvdW5kXCIpfSkuY2F0Y2goZnVuY3Rpb24odCl7dShlKX0pfX0pfX1dKSxTZWFyY2h9KCk7dC5kZWZhdWx0PWQsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNjkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPWZ1bmN0aW9uIE1lc3NhZ2VCb2R5SWRlbnRpdHkoZSx0LHIsbixpLHMsdSxjKXtpZigoMCxvLmRlZmF1bHQpKHRoaXMsTWVzc2FnZUJvZHlJZGVudGl0eSksIXMpdGhyb3cgbmV3IEVycm9yKFwiSURQIHNob3VsZCBiZSBhIHBhcmFtZXRlclwiKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJ1c2VybmFtZSBzaG91bGQgYmUgYSBwYXJhbWV0ZXJcIik7dGhpcy5pZHA9cyx1JiYodGhpcy5hc3NlcnRpb249dSksdGhpcy51c2VyUHJvZmlsZT1uZXcgYS5kZWZhdWx0KGUsdCxyLG4saSxjKX07dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LHIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTAyKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPWZ1bmN0aW9uIFVzZXJQcm9maWxlKGUsdCxyLG4saSxzKXsoMCxhLmRlZmF1bHQpKHRoaXMsVXNlclByb2ZpbGUpLGUmJih0aGlzLnByZWZlcnJlZF91c2VybmFtZT1lKSxyJiYodGhpcy5waWN0dXJlPXIpLG4mJih0aGlzLm5hbWU9biksaSYmKHRoaXMubG9jYWxlPWkpLHQmJih0aGlzLnVzZXJVUkw9dCkscyYmKDAsby5kZWZhdWx0KSh0aGlzLHMpfTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49cigxMDIpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMTQpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxzPXIoMyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig0KSxsPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksZD1yKDEzOSksZj1yKDE0MCkscD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGYpLHk9cigxNDEpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBDaGF0TWFuYWdlcihlLHQscixuLG8pe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxDaGF0TWFuYWdlciksIWUpdGhyb3cgbmV3IEVycm9yKFwiW0NoYXRNYW5hZ2VyLmNvbnN0cnVjdG9yXSBUaGUgbXlVcmwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcihcIltDaGF0TWFuYWdlci5jb25zdHJ1Y3Rvcl0gVGhlIE1pbmlCdXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIltDaGF0TWFuYWdlci5jb25zdHJ1Y3Rvcl0gVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyXCIpO3ZhciBpPXRoaXM7bnx8KG49by5jcmVhdGVTeW5jaGVyKGUsdCxyKSksaS5fcnVudGltZVVSTD1yLnJ1bnRpbWVVUkw7dmFyIGE9by5kaXZpZGVVUkwoaS5fcnVudGltZVVSTCkuZG9tYWluLHM9by5jcmVhdGVEaXNjb3ZlcnkoZSxyLnJ1bnRpbWVVUkwsdCksYz1vLmNyZWF0ZUlkZW50aXR5TWFuYWdlcihlLHIucnVudGltZVVSTCx0KTtpLl9vYmplY3REZXNjVVJMPVwiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuXCIrYStcIi8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0NvbW11bmljYXRpb25cIixpLl9yZXBvcnRlcnNDb250cm9sbGVycz17fSxpLl9vYnNlcnZlcnNDb250cm9sbGVycz17fSxpLl9teVVybD1lLGkuX2J1cz10LGkuX3N5bmNoZXI9bixpLl9kb21haW49YSxpLmRpc2NvdmVyeT1zLGkuaWRlbnRpdHlNYW5hZ2VyPWMsaS5jdXJyZW50SWRlbnRpdHksaS5zZWFyY2g9by5jcmVhdGVTZWFyY2gocyxjKSxpLmNvbW11bmljYXRpb25PYmplY3Q9ZC5jb21tdW5pY2F0aW9uT2JqZWN0LGkuY29tbXVuaWNhdGlvbkNoaWxkcmVuPWQuY29tbXVuaWNhdGlvbkNoaWxkcmVufXJldHVybigwLGwuZGVmYXVsdCkoQ2hhdE1hbmFnZXIsW3trZXk6XCJwcm9jZXNzTm90aWZpY2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihcImNyZWF0ZVwiPT09ZS50eXBlJiZ0Ll9vbkludml0YXRpb24mJnQuX29uSW52aXRhdGlvbihlKSxcImRlbGV0ZVwiPT09ZS50eXBlKXtlLmFjaygyMDApLHQuX29ic2VydmVyc0NvbnRyb2xsZXJzW2UudXJsXS5jbG9zZUV2ZW50PWUsZGVsZXRlIHQuX29ic2VydmVyc0NvbnRyb2xsZXJzW2UudXJsXSx0Ll9vYnNlcnZlcnNDb250cm9sbGVycy5jbG9zZUV2ZW50PWUsdC5jb21tdW5pY2F0aW9uT2JqZWN0PWQuY29tbXVuaWNhdGlvbk9iamVjdDtmb3IodmFyIHIgaW4gdGhpcy5fcmVwb3J0ZXJzQ29udHJvbGxlcnMpdGhpcy5fcmVwb3J0ZXJzQ29udHJvbGxlcnNbcl0uY2xvc2UoZSk7Zm9yKHZhciBuIGluIHRoaXMuX29ic2VydmVyc0NvbnRyb2xsZXJzKXRoaXMuX29ic2VydmVyc0NvbnRyb2xsZXJzW25dLmNsb3NlKGUpfX19LHtrZXk6XCJteUlkZW50aXR5XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKGUpcmV0dXJuIHIoZSk7dC5fbXlVcmwuaW5jbHVkZXMoXCJoeXBlcnR5Oi8vXCIpP3QuaWRlbnRpdHlNYW5hZ2VyLmRpc2NvdmVyVXNlclJlZ2lzdGVyZWQoKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSk6dC5pZGVudGl0eU1hbmFnZXIuZGlzY292ZXJJZGVudGl0eVBlcklkUCgpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleTpcImNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LG49dGhpcyxpPW4uX3N5bmNoZXI7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocyx1KXtuLmNvbW11bmljYXRpb25PYmplY3Q9ZC5jb21tdW5pY2F0aW9uT2JqZWN0LG4uY29tbXVuaWNhdGlvbk9iamVjdC5jc2VxPTEsbi5jb21tdW5pY2F0aW9uT2JqZWN0LnN0YXJ0aW5nVGltZT0obmV3IERhdGUpLnRvSlNPTigpLG4uY29tbXVuaWNhdGlvbk9iamVjdC5zdGF0dXM9ZC5Db21tdW5pY2F0aW9uU3RhdHVzLk9QRU47dmFyIGM9dm9pZCAwO24ubXlJZGVudGl0eSgpLnRoZW4oZnVuY3Rpb24obCl7Yz1sO3ZhciBkPW5ldyB5LlVzZXJJbmZvKG4uX215VXJsLG4uX2RvbWFpbixsKTtuLmNvbW11bmljYXRpb25PYmplY3QucGFydGljaXBhbnRzW2wuZ3VpZF09ZDt2YXIgZj1bXSx2PVtdLGg9e307dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW4uZGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzRE8oZS51c2VyLFtcImNvbW1cIl0sW1wiY2hhdFwiXSxlLmRvbWFpbik7Zi5wdXNoKHQpfSksYS5kZWZhdWx0LmFsbChmKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBhPVtdO3QuZm9yRWFjaChmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7XCJsaXZlXCI9PT1lLmRhdGEuc3RhdHVzPyhhLnB1c2goZS5kYXRhLmh5cGVydHlJRCksaFtlLmRhdGEuaHlwZXJ0eUlEXT1lKTp2Lmxlbmd0aDw1JiZ2LnB1c2goZSl9KX0pO3ZhciBzPSFyLm11dHVhbHx8ci5tdXR1YWwsdT0oMCxvLmRlZmF1bHQpKHtyZXNvdXJjZXM6W1wiY2hhdFwiXSxtdXR1YWw6c30scik7cmV0dXJuIGRlbGV0ZSB1Lm5hbWUsbi5vZmZsaW5lJiYodS5vZmZsaW5lPW4ub2ZmbGluZSksaS5jcmVhdGUobi5fb2JqZWN0RGVzY1VSTCxhLG4uY29tbXVuaWNhdGlvbk9iamVjdCwhMCwhMSxlLHt9LHUpfSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1uZXcgcC5kZWZhdWx0KGksbi5kaXNjb3Zlcnksbi5fZG9tYWluLG4uc2VhcmNoLGMsbik7dC5kYXRhT2JqZWN0UmVwb3J0ZXI9ZSxuLl9yZXBvcnRlcnNDb250cm9sbGVyc1tlLnVybF09dCxlLmludml0YXRpb25zLmxlbmd0aD4wJiZ0Lmludml0YXRpb25zSGFuZGxlci5wcm9jZXNzSW52aXRhdGlvbnMoaCxlKSx2Lmxlbmd0aD4wJiZ0Lmludml0YXRpb25zSGFuZGxlci5pbnZpdGVEaXNjb25uZWN0ZWRIeXBlcnRpZXModixlKSxzKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7dShlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHUoZSl9KX0pfX0se2tleTpcIm9uSW52aXRhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX29uSW52aXRhdGlvbj1lfX0se2tleTpcImpvaW5cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdLG49dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihvLGkpe3ZhciBhPW4uX3N5bmNoZXIscz12b2lkIDA7bi5teUlkZW50aXR5KHIpLnRoZW4oZnVuY3Rpb24ocil7cz1yO3ZhciBvPXtzY2hlbWE6bi5fb2JqZWN0RGVzY1VSTCxyZXNvdXJjZTplLHN0b3JlOiEwLHAycDohMSxtdXR1YWw6dCxkb21haW5fc3Vic2NyaXB0aW9uOiEwLGlkZW50aXR5OnJ9O3JldHVybiBuLm9mZmxpbmUmJihvLm9mZmxpbmU9bi5vZmZsaW5lKSxhLnN1YnNjcmliZShvKX0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHAuZGVmYXVsdChhLG4uZGlzY292ZXJ5LG4uX2RvbWFpbixuLnNlYXJjaCxzLG4pO28odCksdC5kYXRhT2JqZWN0T2JzZXJ2ZXI9ZSxuLl9vYnNlcnZlcnNDb250cm9sbGVyc1tlLnVybF09dH0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koZSl9KX0pfX0se2tleTpcIm9mZmxpbmVcIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fb2ZmbGluZT1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX29mZmxpbmUmJnRoaXMuX29mZmxpbmV9fV0pLENoYXRNYW5hZ2VyfSgpO3QuZGVmYXVsdD12LGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDE0KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSkscz1yKDMpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoNCksbD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBJbnZpdGF0aW9uc0hhbmRsZXIoZSl7aWYoKDAsdS5kZWZhdWx0KSh0aGlzLEludml0YXRpb25zSGFuZGxlciksIWUpdGhyb3cgRXJyb3IoXCJoeXBlcnR5VVJMIGlzIGEgbmVjZXNzYXJ5IGRlcGVuZGVjeVwiKTt2YXIgdD10aGlzO3QuX2h5cGVydHlVUkw9ZSx0Ll9wZW5kaW5nPXt9fXJldHVybigwLGwuZGVmYXVsdCkoSW52aXRhdGlvbnNIYW5kbGVyLFt7a2V5OlwiaW52aXRlRGlzY29ubmVjdGVkSHlwZXJ0aWVzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2UuZm9yRWFjaChmdW5jdGlvbihlKXtyLl9wZW5kaW5nW3RdfHwoci5fcGVuZGluZ1t0XT17fSksci5fcGVuZGluZ1t0XVtlLmRhdGEuaHlwZXJ0eUlEXT1lLGUub25MaXZlKHIuX2h5cGVydHlVUkwsZnVuY3Rpb24oKXt0Lmludml0ZU9ic2VydmVycyhbZS5kYXRhLmh5cGVydHlJRF0pLGUudW5zdWJzY3JpYmVMaXZlKHIuX2h5cGVydHlVUkwpLGRlbGV0ZSByLl9wZW5kaW5nW3RdW2UuZGF0YS5oeXBlcnR5SURdfSl9KX19LHtrZXk6XCJwcm9jZXNzSW52aXRhdGlvbnNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj10aGlzLG89dC5pbnZpdGF0aW9uc3x8W107by5mb3JFYWNoKGZ1bmN0aW9uKG8pe28udGhlbihmdW5jdGlvbihlKXtyLl9pbnZpdGF0aW9uc1Jlc3BvbnNlJiZyLl9pbnZpdGF0aW9uc1Jlc3BvbnNlKGUpfSkuY2F0Y2goZnVuY3Rpb24obyl7ci5faW52aXRhdGlvbnNSZXNwb25zZSYmci5faW52aXRhdGlvbnNSZXNwb25zZShvKSxuLmludml0ZURpc2Nvbm5lY3RlZEh5cGVydGllcyhbZVtvLmludml0ZWRdXSx0KX0pfSl9fSx7a2V5OlwicmVzdW1lRGlzY292ZXJpZXNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgcz17fSx1PVtdLGM9W10sbD1bXTtlLnJlc3VtZURpc2NvdmVyaWVzKCkudGhlbihmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5kYXRhLnJlc291cmNlcyYmXCJjaGF0XCI9PT1lLmRhdGEucmVzb3VyY2VzWzBdJiYoXCJsaXZlXCI9PT1lLmRhdGEuc3RhdHVzPyhzW2UuZGF0YS5oeXBlcnR5SURdPWUsdS5wdXNoKGUuZGF0YS5oeXBlcnR5SUQpLGwucHVzaChlLnVuc3Vic2NyaWJlTGl2ZShyLl9oeXBlcnR5VVJMKSkpOmMucHVzaChlKSl9KSxjLmxlbmd0aD4wJiZyLmludml0ZURpc2Nvbm5lY3RlZEh5cGVydGllcyhjLHQpLCgwLG8uZGVmYXVsdCkocykubGVuZ3RoPjA/KHQuaW52aXRlT2JzZXJ2ZXJzKHUpLHQuaW52aXRhdGlvbnMubGVuZ3RoPjAmJnIucHJvY2Vzc0ludml0YXRpb25zKHMsdCksYS5kZWZhdWx0LmFsbChsKS50aGVuKGZ1bmN0aW9uKCl7bigpfSkpOm4oKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmVqZWN0KFwiW0dyb3VwQ2hhdE1hbmFnZXIuSW52aXRhdGlvbnNIYW5kbGVyLnJlc3VtZURpc2NvdmVyaWVzXSBmYWlsZWQgfCBcIixlKX0pfX0se2tleTpcImNsZWFuSW52aXRhdGlvbnNcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dC5fcGVuZGluZ1tlXTtyZXR1cm4gcj9uZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKGUsbil7dmFyIGk9KDAsby5kZWZhdWx0KShyKSxzPVtdO2kuZm9yRWFjaChmdW5jdGlvbihlKXtzLnB1c2gocltlXS51bnN1YnNjcmliZUxpdmUodC5faHlwZXJ0eVVSTCkpfSksYS5kZWZhdWx0LmFsbChpKS50aGVuKGZ1bmN0aW9uKCl7ZSgpfSl9KTphLmRlZmF1bHQucmVzb2x2ZSgpfX0se2tleTpcImludml0YXRpb25SZXNwb25zZVwiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9pbnZpdGF0aW9uc1Jlc3BvbnNlPWV9fV0pLEludml0YXRpb25zSGFuZGxlcn0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQscil7XCJ1c2Ugc3RyaWN0XCI7dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoNjQpLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0IGluIGU/KDAsby5kZWZhdWx0KShlLHQse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPXIsZX19LGZ1bmN0aW9uKGUsdCxyKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEwMiksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxNCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLHM9cigzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDQpLGw9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxkPXIoMTM5KSxmPXIoMTQyKSxwPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZikseT1yKDE0MSksdj1mdW5jdGlvbigpe2Z1bmN0aW9uIFNpbXBsZVNpbXBsZUNoYXRNYW5hZ2VyKGUsdCxyLG4sbyl7aWYoKDAsdS5kZWZhdWx0KSh0aGlzLFNpbXBsZVNpbXBsZUNoYXRNYW5hZ2VyKSwhZSl0aHJvdyBuZXcgRXJyb3IoXCJbU2ltcGxlQ2hhdE1hbmFnZXIuY29uc3RydWN0b3JdIFRoZSBteVVybCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiW1NpbXBsZUNoYXRNYW5hZ2VyLmNvbnN0cnVjdG9yXSBUaGUgTWluaUJ1cyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiW1NpbXBsZUNoYXRNYW5hZ2VyLmNvbnN0cnVjdG9yXSBUaGUgY29uZmlndXJhdGlvbiBpcyBhIG5lZWRlZCBwYXJhbWV0ZXJcIik7dmFyIGk9dGhpcztufHwobj1vLmNyZWF0ZVN5bmNoZXIoZSx0LHIpKSxpLl9ydW50aW1lVVJMPXIucnVudGltZVVSTDt2YXIgYT1vLmRpdmlkZVVSTChpLl9ydW50aW1lVVJMKS5kb21haW4scz1vLmNyZWF0ZUlkZW50aXR5TWFuYWdlcihlLHIucnVudGltZVVSTCx0KTtpLl9vYmplY3REZXNjVVJMPVwiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuXCIrYStcIi8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0NvbW11bmljYXRpb25cIixpLl9yZXBvcnRlcnNDb250cm9sbGVycz17fSxpLl9vYnNlcnZlcnNDb250cm9sbGVycz17fSxpLl9teVVybD1lLGkuX2J1cz10LGkuX3N5bmNoZXI9bixpLl9kb21haW49YSxpLmlkZW50aXR5TWFuYWdlcj1zLGkuY3VycmVudElkZW50aXR5LGkuY29tbXVuaWNhdGlvbk9iamVjdD1kLmNvbW11bmljYXRpb25PYmplY3QsaS5jb21tdW5pY2F0aW9uQ2hpbGRyZW49ZC5jb21tdW5pY2F0aW9uQ2hpbGRyZW59cmV0dXJuKDAsbC5kZWZhdWx0KShTaW1wbGVTaW1wbGVDaGF0TWFuYWdlcixbe2tleTpcInByb2Nlc3NOb3RpZmljYXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKFwiY3JlYXRlXCI9PT1lLnR5cGUmJnQuX29uSW52aXRhdGlvbiYmdC5fb25JbnZpdGF0aW9uKGUpLFwiZGVsZXRlXCI9PT1lLnR5cGUpe2UuYWNrKDIwMCksdC5fb2JzZXJ2ZXJzQ29udHJvbGxlcnNbZS51cmxdLmNsb3NlRXZlbnQ9ZSxkZWxldGUgdC5fb2JzZXJ2ZXJzQ29udHJvbGxlcnNbZS51cmxdLHQuX29ic2VydmVyc0NvbnRyb2xsZXJzLmNsb3NlRXZlbnQ9ZSx0LmNvbW11bmljYXRpb25PYmplY3Q9ZC5jb21tdW5pY2F0aW9uT2JqZWN0O2Zvcih2YXIgciBpbiB0aGlzLl9yZXBvcnRlcnNDb250cm9sbGVycyl0aGlzLl9yZXBvcnRlcnNDb250cm9sbGVyc1tyXS5jbG9zZShlKTtmb3IodmFyIG4gaW4gdGhpcy5fb2JzZXJ2ZXJzQ29udHJvbGxlcnMpdGhpcy5fb2JzZXJ2ZXJzQ29udHJvbGxlcnNbbl0uY2xvc2UoZSl9fX0se2tleTpcIm15SWRlbnRpdHlcIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYoZSlyZXR1cm4gcihlKTt0Ll9teVVybC5pbmNsdWRlcyhcImh5cGVydHk6Ly9cIik/dC5pZGVudGl0eU1hbmFnZXIuZGlzY292ZXJVc2VyUmVnaXN0ZXJlZCgpLnRoZW4oZnVuY3Rpb24oZSl7dC5jdXJyZW50SWRlbnRpdHk9ZSxyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihlKX0pOnQuaWRlbnRpdHlNYW5hZ2VyLmRpc2NvdmVySWRlbnRpdHlQZXJJZFAoKS50aGVuKGZ1bmN0aW9uKGUpe3QuY3VycmVudElkZW50aXR5PWUscihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleTpcImNyZWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LG49dGhpcyxpPW4uX3N5bmNoZXI7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oYSxzKXtuLmNvbW11bmljYXRpb25PYmplY3Q9ZC5jb21tdW5pY2F0aW9uT2JqZWN0LG4uY29tbXVuaWNhdGlvbk9iamVjdC5jc2VxPTEsbi5jb21tdW5pY2F0aW9uT2JqZWN0LnN0YXJ0aW5nVGltZT0obmV3IERhdGUpLnRvSlNPTigpLG4uY29tbXVuaWNhdGlvbk9iamVjdC5zdGF0dXM9ZC5Db21tdW5pY2F0aW9uU3RhdHVzLk9QRU47dmFyIHU9dm9pZCAwO24ubXlJZGVudGl0eSgpLnRoZW4oZnVuY3Rpb24oYSl7dT1hO3ZhciBzPW5ldyB5LlVzZXJJbmZvKG4uX215VXJsLG4uX2RvbWFpbixhKTtuLmNvbW11bmljYXRpb25PYmplY3QucGFydGljaXBhbnRzW2EuZ3VpZF09czt2YXIgYz0hci5tdXR1YWx8fHIubXV0dWFsLGw9KDAsby5kZWZhdWx0KSh7cmVzb3VyY2VzOltcImNoYXRcIl0sbXV0dWFsOmN9LHIpO3JldHVybiBkZWxldGUgbC5uYW1lLG4ub2ZmbGluZSYmKGwub2ZmbGluZT1uLm9mZmxpbmUpLG4uYmFja3VwJiYobC5iYWNrdXA9bi5iYWNrdXApLGkuY3JlYXRlKG4uX29iamVjdERlc2NVUkwsdCxuLmNvbW11bmljYXRpb25PYmplY3QsITAsITEsZSx7fSxsKX0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHAuZGVmYXVsdChpLG4uX2RvbWFpbix1LG4pO3QuZGF0YU9iamVjdFJlcG9ydGVyPWUsbi5fcmVwb3J0ZXJzQ29udHJvbGxlcnNbZS51cmxdPXQsYSh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3MoZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiByZWplY3QoZSl9KX19LHtrZXk6XCJvbkludml0YXRpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9vbkludml0YXRpb249ZX19LHtrZXk6XCJqb2luXCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXSxuPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obyxpKXt2YXIgYT1uLl9zeW5jaGVyLHM9dm9pZCAwO24ubXlJZGVudGl0eShyKS50aGVuKGZ1bmN0aW9uKHIpe3M9cjt2YXIgbz17c2NoZW1hOm4uX29iamVjdERlc2NVUkwscmVzb3VyY2U6ZSxzdG9yZTohMCxwMnA6ITEsbXV0dWFsOnQsZG9tYWluX3N1YnNjcmlwdGlvbjohMCxpZGVudGl0eTpyfTtyZXR1cm4gbi5vZmZsaW5lJiYoby5vZmZsaW5lPW4ub2ZmbGluZSksYS5zdWJzY3JpYmUobyl9KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBwLmRlZmF1bHQoYSxuLl9kb21haW4scyxuKTtvKHQpLHQuZGF0YU9iamVjdE9ic2VydmVyPWUsbi5fb2JzZXJ2ZXJzQ29udHJvbGxlcnNbZS51cmxdPXR9KS5jYXRjaChmdW5jdGlvbihlKXtpKGUpfSl9KX19LHtrZXk6XCJvZmZsaW5lXCIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX29mZmxpbmU9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9vZmZsaW5lJiZ0aGlzLl9vZmZsaW5lfX0se2tleTpcImJhY2t1cFwiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9iYWNrdXA9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9iYWNrdXAmJnRoaXMuX2JhY2t1cH19XSksU2ltcGxlU2ltcGxlQ2hhdE1hbmFnZXJ9KCk7dC5kZWZhdWx0PXYsZS5leHBvcnRzPXQuZGVmYXVsdH1dKX0pOyIsIi8qIVxuICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMc1xuICogSVB2NiBTdXBwb3J0XG4gKlxuICogVmVyc2lvbjogMS4xOS4xXG4gKlxuICogQXV0aG9yOiBSb2RuZXkgUmVobVxuICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5pby9VUkkuanMvXG4gKlxuICogTGljZW5zZWQgdW5kZXJcbiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICpcbiAqL1xuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanNcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgLy8gTm9kZVxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICBkZWZpbmUoZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICByb290LklQdjYgPSBmYWN0b3J5KHJvb3QpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uIChyb290KSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKlxuICB2YXIgX2luID0gXCJmZTgwOjAwMDA6MDAwMDowMDAwOjAyMDQ6NjFmZjpmZTlkOmYxNTZcIjtcbiAgdmFyIF9vdXQgPSBJUHY2LmJlc3QoX2luKTtcbiAgdmFyIF9leHBlY3RlZCA9IFwiZmU4MDo6MjA0OjYxZmY6ZmU5ZDpmMTU2XCI7XG5cbiAgY29uc29sZS5sb2coX2luLCBfb3V0LCBfZXhwZWN0ZWQsIF9vdXQgPT09IF9leHBlY3RlZCk7XG4gICovXG5cbiAgLy8gc2F2ZSBjdXJyZW50IElQdjYgdmFyaWFibGUsIGlmIGFueVxuICB2YXIgX0lQdjYgPSByb290ICYmIHJvb3QuSVB2NjtcblxuICBmdW5jdGlvbiBiZXN0UHJlc2VudGF0aW9uKGFkZHJlc3MpIHtcbiAgICAvLyBiYXNlZCBvbjpcbiAgICAvLyBKYXZhc2NyaXB0IHRvIHRlc3QgYW4gSVB2NiBhZGRyZXNzIGZvciBwcm9wZXIgZm9ybWF0LCBhbmQgdG9cbiAgICAvLyBwcmVzZW50IHRoZSBcImJlc3QgdGV4dCByZXByZXNlbnRhdGlvblwiIGFjY29yZGluZyB0byBJRVRGIERyYWZ0IFJGQyBhdFxuICAgIC8vIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtNm1hbi10ZXh0LWFkZHItcmVwcmVzZW50YXRpb24tMDRcbiAgICAvLyA4IEZlYiAyMDEwIFJpY2ggQnJvd24sIERhcnR3YXJlLCBMTENcbiAgICAvLyBQbGVhc2UgZmVlbCBmcmVlIHRvIHVzZSB0aGlzIGNvZGUgYXMgbG9uZyBhcyB5b3UgcHJvdmlkZSBhIGxpbmsgdG9cbiAgICAvLyBodHRwOi8vd3d3LmludGVybWFwcGVyLmNvbVxuICAgIC8vIGh0dHA6Ly9pbnRlcm1hcHBlci5jb20vc3VwcG9ydC90b29scy9JUFY2LVZhbGlkYXRvci5hc3B4XG4gICAgLy8gaHR0cDovL2Rvd25sb2FkLmRhcnR3YXJlLmNvbS90aGlyZHBhcnR5L2lwdjZ2YWxpZGF0b3IuanNcblxuICAgIHZhciBfYWRkcmVzcyA9IGFkZHJlc3MudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgc2VnbWVudHMgPSBfYWRkcmVzcy5zcGxpdCgnOicpO1xuICAgIHZhciBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7XG4gICAgdmFyIHRvdGFsID0gODtcblxuICAgIC8vIHRyaW0gY29sb25zICg6OiBvciA6OmE6Yjpj4oCmIG9yIOKApmE6YjpjOjopXG4gICAgaWYgKHNlZ21lbnRzWzBdID09PSAnJyAmJiBzZWdtZW50c1sxXSA9PT0gJycgJiYgc2VnbWVudHNbMl0gPT09ICcnKSB7XG4gICAgICAvLyBtdXN0IGhhdmUgYmVlbiA6OlxuICAgICAgLy8gcmVtb3ZlIGZpcnN0IHR3byBpdGVtc1xuICAgICAgc2VnbWVudHMuc2hpZnQoKTtcbiAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7XG4gICAgfSBlbHNlIGlmIChzZWdtZW50c1swXSA9PT0gJycgJiYgc2VnbWVudHNbMV0gPT09ICcnKSB7XG4gICAgICAvLyBtdXN0IGhhdmUgYmVlbiA6Onh4eHhcbiAgICAgIC8vIHJlbW92ZSB0aGUgZmlyc3QgaXRlbVxuICAgICAgc2VnbWVudHMuc2hpZnQoKTtcbiAgICB9IGVsc2UgaWYgKHNlZ21lbnRzW2xlbmd0aCAtIDFdID09PSAnJyAmJiBzZWdtZW50c1tsZW5ndGggLSAyXSA9PT0gJycpIHtcbiAgICAgIC8vIG11c3QgaGF2ZSBiZWVuIHh4eHg6OlxuICAgICAgc2VnbWVudHMucG9wKCk7XG4gICAgfVxuXG4gICAgbGVuZ3RoID0gc2VnbWVudHMubGVuZ3RoO1xuXG4gICAgLy8gYWRqdXN0IHRvdGFsIHNlZ21lbnRzIGZvciBJUHY0IHRyYWlsZXJcbiAgICBpZiAoc2VnbWVudHNbbGVuZ3RoIC0gMV0uaW5kZXhPZignLicpICE9PSAtMSkge1xuICAgICAgLy8gZm91bmQgYSBcIi5cIiB3aGljaCBtZWFucyBJUHY0XG4gICAgICB0b3RhbCA9IDc7XG4gICAgfVxuXG4gICAgLy8gZmlsbCBlbXB0eSBzZWdtZW50cyB0aGVtIHdpdGggXCIwMDAwXCJcbiAgICB2YXIgcG9zO1xuICAgIGZvciAocG9zID0gMDsgcG9zIDwgbGVuZ3RoOyBwb3MrKykge1xuICAgICAgaWYgKHNlZ21lbnRzW3Bvc10gPT09ICcnKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3MgPCB0b3RhbCkge1xuICAgICAgc2VnbWVudHMuc3BsaWNlKHBvcywgMSwgJzAwMDAnKTtcbiAgICAgIHdoaWxlIChzZWdtZW50cy5sZW5ndGggPCB0b3RhbCkge1xuICAgICAgICBzZWdtZW50cy5zcGxpY2UocG9zLCAwLCAnMDAwMCcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHN0cmlwIGxlYWRpbmcgemVyb3NcbiAgICB2YXIgX3NlZ21lbnRzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWw7IGkrKykge1xuICAgICAgX3NlZ21lbnRzID0gc2VnbWVudHNbaV0uc3BsaXQoJycpO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAzIDsgaisrKSB7XG4gICAgICAgIGlmIChfc2VnbWVudHNbMF0gPT09ICcwJyAmJiBfc2VnbWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIF9zZWdtZW50cy5zcGxpY2UoMCwxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZWdtZW50c1tpXSA9IF9zZWdtZW50cy5qb2luKCcnKTtcbiAgICB9XG5cbiAgICAvLyBmaW5kIGxvbmdlc3Qgc2VxdWVuY2Ugb2YgemVyb2VzIGFuZCBjb2FsZXNjZSB0aGVtIGludG8gb25lIHNlZ21lbnRcbiAgICB2YXIgYmVzdCA9IC0xO1xuICAgIHZhciBfYmVzdCA9IDA7XG4gICAgdmFyIF9jdXJyZW50ID0gMDtcbiAgICB2YXIgY3VycmVudCA9IC0xO1xuICAgIHZhciBpbnplcm9lcyA9IGZhbHNlO1xuICAgIC8vIGk7IGFscmVhZHkgZGVjbGFyZWRcblxuICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICBpZiAoaW56ZXJvZXMpIHtcbiAgICAgICAgaWYgKHNlZ21lbnRzW2ldID09PSAnMCcpIHtcbiAgICAgICAgICBfY3VycmVudCArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluemVyb2VzID0gZmFsc2U7XG4gICAgICAgICAgaWYgKF9jdXJyZW50ID4gX2Jlc3QpIHtcbiAgICAgICAgICAgIGJlc3QgPSBjdXJyZW50O1xuICAgICAgICAgICAgX2Jlc3QgPSBfY3VycmVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzZWdtZW50c1tpXSA9PT0gJzAnKSB7XG4gICAgICAgICAgaW56ZXJvZXMgPSB0cnVlO1xuICAgICAgICAgIGN1cnJlbnQgPSBpO1xuICAgICAgICAgIF9jdXJyZW50ID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChfY3VycmVudCA+IF9iZXN0KSB7XG4gICAgICBiZXN0ID0gY3VycmVudDtcbiAgICAgIF9iZXN0ID0gX2N1cnJlbnQ7XG4gICAgfVxuXG4gICAgaWYgKF9iZXN0ID4gMSkge1xuICAgICAgc2VnbWVudHMuc3BsaWNlKGJlc3QsIF9iZXN0LCAnJyk7XG4gICAgfVxuXG4gICAgbGVuZ3RoID0gc2VnbWVudHMubGVuZ3RoO1xuXG4gICAgLy8gYXNzZW1ibGUgcmVtYWluaW5nIHNlZ21lbnRzXG4gICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgIGlmIChzZWdtZW50c1swXSA9PT0gJycpICB7XG4gICAgICByZXN1bHQgPSAnOic7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHQgKz0gc2VnbWVudHNbaV07XG4gICAgICBpZiAoaSA9PT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ICs9ICc6JztcbiAgICB9XG5cbiAgICBpZiAoc2VnbWVudHNbbGVuZ3RoIC0gMV0gPT09ICcnKSB7XG4gICAgICByZXN1bHQgKz0gJzonO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgIC8qanNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgIGlmIChyb290LklQdjYgPT09IHRoaXMpIHtcbiAgICAgIHJvb3QuSVB2NiA9IF9JUHY2O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBiZXN0OiBiZXN0UHJlc2VudGF0aW9uLFxuICAgIG5vQ29uZmxpY3Q6IG5vQ29uZmxpY3RcbiAgfTtcbn0pKTtcbiIsIi8qIVxuICogVVJJLmpzIC0gTXV0YXRpbmcgVVJMc1xuICogU2Vjb25kIExldmVsIERvbWFpbiAoU0xEKSBTdXBwb3J0XG4gKlxuICogVmVyc2lvbjogMS4xOS4xXG4gKlxuICogQXV0aG9yOiBSb2RuZXkgUmVobVxuICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5pby9VUkkuanMvXG4gKlxuICogTGljZW5zZWQgdW5kZXJcbiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICpcbiAqL1xuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL3JldHVybkV4cG9ydHMuanNcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgLy8gTm9kZVxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICBkZWZpbmUoZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICByb290LlNlY29uZExldmVsRG9tYWlucyA9IGZhY3Rvcnkocm9vdCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKHJvb3QpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIHNhdmUgY3VycmVudCBTZWNvbmRMZXZlbERvbWFpbnMgdmFyaWFibGUsIGlmIGFueVxuICB2YXIgX1NlY29uZExldmVsRG9tYWlucyA9IHJvb3QgJiYgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnM7XG5cbiAgdmFyIFNMRCA9IHtcbiAgICAvLyBsaXN0IG9mIGtub3duIFNlY29uZCBMZXZlbCBEb21haW5zXG4gICAgLy8gY29udmVydGVkIGxpc3Qgb2YgU0xEcyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9nYXZpbmdtaWxsZXIvc2Vjb25kLWxldmVsLWRvbWFpbnNcbiAgICAvLyAtLS0tXG4gICAgLy8gcHVibGljc3VmZml4Lm9yZyBpcyBtb3JlIGN1cnJlbnQgYW5kIGFjdHVhbGx5IHVzZWQgYnkgYSBjb3VwbGUgb2YgYnJvd3NlcnMgaW50ZXJuYWxseS5cbiAgICAvLyBkb3duc2lkZSBpcyBpdCBhbHNvIGNvbnRhaW5zIGRvbWFpbnMgbGlrZSBcImR5bmRucy5vcmdcIiAtIHdoaWNoIGlzIGZpbmUgZm9yIHRoZSBzZWN1cml0eVxuICAgIC8vIGlzc3VlcyBicm93c2VyIGhhdmUgdG8gZGVhbCB3aXRoIChTT1AgZm9yIGNvb2tpZXMsIGV0YykgLSBidXQgaXMgd2F5IG92ZXJib2FyZCBmb3IgVVJJLmpzXG4gICAgLy8gLS0tLVxuICAgIGxpc3Q6IHtcbiAgICAgICdhYyc6JyBjb20gZ292IG1pbCBuZXQgb3JnICcsXG4gICAgICAnYWUnOicgYWMgY28gZ292IG1pbCBuYW1lIG5ldCBvcmcgcHJvIHNjaCAnLFxuICAgICAgJ2FmJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdhbCc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLFxuICAgICAgJ2FvJzonIGNvIGVkIGd2IGl0IG9nIHBiICcsXG4gICAgICAnYXInOicgY29tIGVkdSBnb2IgZ292IGludCBtaWwgbmV0IG9yZyB0dXIgJyxcbiAgICAgICdhdCc6JyBhYyBjbyBndiBvciAnLFxuICAgICAgJ2F1JzonIGFzbiBjb20gY3Npcm8gZWR1IGdvdiBpZCBuZXQgb3JnICcsXG4gICAgICAnYmEnOicgY28gY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgcnMgdW5iaSB1bm1vIHVuc2EgdW50eiB1bnplICcsXG4gICAgICAnYmInOicgYml6IGNvIGNvbSBlZHUgZ292IGluZm8gbmV0IG9yZyBzdG9yZSB0diAnLFxuICAgICAgJ2JoJzonIGJpeiBjYyBjb20gZWR1IGdvdiBpbmZvIG5ldCBvcmcgJyxcbiAgICAgICdibic6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnYm8nOicgY29tIGVkdSBnb2IgZ292IGludCBtaWwgbmV0IG9yZyB0diAnLFxuICAgICAgJ2JyJzonIGFkbSBhZHYgYWdyIGFtIGFycSBhcnQgYXRvIGIgYmlvIGJsb2cgYm1kIGNpbSBjbmcgY250IGNvbSBjb29wIGVjbiBlZHUgZW5nIGVzcCBldGMgZXRpIGZhciBmbG9nIGZtIGZuZCBmb3QgZnN0IGcxMiBnZ2YgZ292IGltYiBpbmQgaW5mIGpvciBqdXMgbGVsIG1hdCBtZWQgbWlsIG11cyBuZXQgbm9tIG5vdCBudHIgb2RvIG9yZyBwcGcgcHJvIHBzYyBwc2kgcXNsIHJlYyBzbGcgc3J2IHRtcCB0cmQgdHVyIHR2IHZldCB2bG9nIHdpa2kgemxnICcsXG4gICAgICAnYnMnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2J6JzonIGR1IGV0IG9tIG92IHJnICcsXG4gICAgICAnY2EnOicgYWIgYmMgbWIgbmIgbmYgbmwgbnMgbnQgbnUgb24gcGUgcWMgc2sgeWsgJyxcbiAgICAgICdjayc6JyBiaXogY28gZWR1IGdlbiBnb3YgaW5mbyBuZXQgb3JnICcsXG4gICAgICAnY24nOicgYWMgYWggYmogY29tIGNxIGVkdSBmaiBnZCBnb3YgZ3MgZ3ggZ3ogaGEgaGIgaGUgaGkgaGwgaG4gamwganMganggbG4gbWlsIG5ldCBubSBueCBvcmcgcWggc2Mgc2Qgc2ggc24gc3ggdGogdHcgeGogeHogeW4gemogJyxcbiAgICAgICdjbyc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG5vbSBvcmcgJyxcbiAgICAgICdjcic6JyBhYyBjIGNvIGVkIGZpIGdvIG9yIHNhICcsXG4gICAgICAnY3knOicgYWMgYml6IGNvbSBla2xvZ2VzIGdvdiBsdGQgbmFtZSBuZXQgb3JnIHBhcmxpYW1lbnQgcHJlc3MgcHJvIHRtICcsXG4gICAgICAnZG8nOicgYXJ0IGNvbSBlZHUgZ29iIGdvdiBtaWwgbmV0IG9yZyBzbGQgd2ViICcsXG4gICAgICAnZHonOicgYXJ0IGFzc28gY29tIGVkdSBnb3YgbmV0IG9yZyBwb2wgJyxcbiAgICAgICdlYyc6JyBjb20gZWR1IGZpbiBnb3YgaW5mbyBtZWQgbWlsIG5ldCBvcmcgcHJvICcsXG4gICAgICAnZWcnOicgY29tIGVkdSBldW4gZ292IG1pbCBuYW1lIG5ldCBvcmcgc2NpICcsXG4gICAgICAnZXInOicgY29tIGVkdSBnb3YgaW5kIG1pbCBuZXQgb3JnIHJvY2hlc3QgdyAnLFxuICAgICAgJ2VzJzonIGNvbSBlZHUgZ29iIG5vbSBvcmcgJyxcbiAgICAgICdldCc6JyBiaXogY29tIGVkdSBnb3YgaW5mbyBuYW1lIG5ldCBvcmcgJyxcbiAgICAgICdmaic6JyBhYyBiaXogY29tIGluZm8gbWlsIG5hbWUgbmV0IG9yZyBwcm8gJyxcbiAgICAgICdmayc6JyBhYyBjbyBnb3YgbmV0IG5vbSBvcmcgJyxcbiAgICAgICdmcic6JyBhc3NvIGNvbSBmIGdvdXYgbm9tIHByZCBwcmVzc2UgdG0gJyxcbiAgICAgICdnZyc6JyBjbyBuZXQgb3JnICcsXG4gICAgICAnZ2gnOicgY29tIGVkdSBnb3YgbWlsIG9yZyAnLFxuICAgICAgJ2duJzonIGFjIGNvbSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2dyJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnICcsXG4gICAgICAnZ3QnOicgY29tIGVkdSBnb2IgaW5kIG1pbCBuZXQgb3JnICcsXG4gICAgICAnZ3UnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2hrJzonIGNvbSBlZHUgZ292IGlkdiBuZXQgb3JnICcsXG4gICAgICAnaHUnOicgMjAwMCBhZ3JhciBib2x0IGNhc2lubyBjaXR5IGNvIGVyb3RpY2EgZXJvdGlrYSBmaWxtIGZvcnVtIGdhbWVzIGhvdGVsIGluZm8gaW5nYXRsYW4gam9nYXN6IGtvbnl2ZWxvIGxha2FzIG1lZGlhIG5ld3Mgb3JnIHByaXYgcmVrbGFtIHNleCBzaG9wIHNwb3J0IHN1bGkgc3pleCB0bSB0b3pzZGUgdXRhemFzIHZpZGVvICcsXG4gICAgICAnaWQnOicgYWMgY28gZ28gbWlsIG5ldCBvciBzY2ggd2ViICcsXG4gICAgICAnaWwnOicgYWMgY28gZ292IGlkZiBrMTIgbXVuaSBuZXQgb3JnICcsXG4gICAgICAnaW4nOicgYWMgY28gZWR1IGVybmV0IGZpcm0gZ2VuIGdvdiBpIGluZCBtaWwgbmV0IG5pYyBvcmcgcmVzICcsXG4gICAgICAnaXEnOicgY29tIGVkdSBnb3YgaSBtaWwgbmV0IG9yZyAnLFxuICAgICAgJ2lyJzonIGFjIGNvIGRuc3NlYyBnb3YgaSBpZCBuZXQgb3JnIHNjaCAnLFxuICAgICAgJ2l0JzonIGVkdSBnb3YgJyxcbiAgICAgICdqZSc6JyBjbyBuZXQgb3JnICcsXG4gICAgICAnam8nOicgY29tIGVkdSBnb3YgbWlsIG5hbWUgbmV0IG9yZyBzY2ggJyxcbiAgICAgICdqcCc6JyBhYyBhZCBjbyBlZCBnbyBnciBsZyBuZSBvciAnLFxuICAgICAgJ2tlJzonIGFjIGNvIGdvIGluZm8gbWUgbW9iaSBuZSBvciBzYyAnLFxuICAgICAgJ2toJzonIGNvbSBlZHUgZ292IG1pbCBuZXQgb3JnIHBlciAnLFxuICAgICAgJ2tpJzonIGJpeiBjb20gZGUgZWR1IGdvdiBpbmZvIG1vYiBuZXQgb3JnIHRlbCAnLFxuICAgICAgJ2ttJzonIGFzc28gY29tIGNvb3AgZWR1IGdvdXYgayBtZWRlY2luIG1pbCBub20gbm90YWlyZXMgcGhhcm1hY2llbnMgcHJlc3NlIHRtIHZldGVyaW5haXJlICcsXG4gICAgICAna24nOicgZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAna3InOicgYWMgYnVzYW4gY2h1bmdidWsgY2h1bmduYW0gY28gZGFlZ3UgZGFlamVvbiBlcyBnYW5nd29uIGdvIGd3YW5nanUgZ3llb25nYnVrIGd5ZW9uZ2dpIGd5ZW9uZ25hbSBocyBpbmNoZW9uIGplanUgamVvbmJ1ayBqZW9ubmFtIGsga2cgbWlsIG1zIG5lIG9yIHBlIHJlIHNjIHNlb3VsIHVsc2FuICcsXG4gICAgICAna3cnOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2t5JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdreic6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLFxuICAgICAgJ2xiJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdsayc6JyBhc3NuIGNvbSBlZHUgZ292IGdycCBob3RlbCBpbnQgbHRkIG5ldCBuZ28gb3JnIHNjaCBzb2Mgd2ViICcsXG4gICAgICAnbHInOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ2x2JzonIGFzbiBjb20gY29uZiBlZHUgZ292IGlkIG1pbCBuZXQgb3JnICcsXG4gICAgICAnbHknOicgY29tIGVkdSBnb3YgaWQgbWVkIG5ldCBvcmcgcGxjIHNjaCAnLFxuICAgICAgJ21hJzonIGFjIGNvIGdvdiBtIG5ldCBvcmcgcHJlc3MgJyxcbiAgICAgICdtYyc6JyBhc3NvIHRtICcsXG4gICAgICAnbWUnOicgYWMgY28gZWR1IGdvdiBpdHMgbmV0IG9yZyBwcml2ICcsXG4gICAgICAnbWcnOicgY29tIGVkdSBnb3YgbWlsIG5vbSBvcmcgcHJkIHRtICcsXG4gICAgICAnbWsnOicgY29tIGVkdSBnb3YgaW5mIG5hbWUgbmV0IG9yZyBwcm8gJyxcbiAgICAgICdtbCc6JyBjb20gZWR1IGdvdiBuZXQgb3JnIHByZXNzZSAnLFxuICAgICAgJ21uJzonIGVkdSBnb3Ygb3JnICcsXG4gICAgICAnbW8nOicgY29tIGVkdSBnb3YgbmV0IG9yZyAnLFxuICAgICAgJ210JzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdtdic6JyBhZXJvIGJpeiBjb20gY29vcCBlZHUgZ292IGluZm8gaW50IG1pbCBtdXNldW0gbmFtZSBuZXQgb3JnIHBybyAnLFxuICAgICAgJ213JzonIGFjIGNvIGNvbSBjb29wIGVkdSBnb3YgaW50IG11c2V1bSBuZXQgb3JnICcsXG4gICAgICAnbXgnOicgY29tIGVkdSBnb2IgbmV0IG9yZyAnLFxuICAgICAgJ215JzonIGNvbSBlZHUgZ292IG1pbCBuYW1lIG5ldCBvcmcgc2NoICcsXG4gICAgICAnbmYnOicgYXJ0cyBjb20gZmlybSBpbmZvIG5ldCBvdGhlciBwZXIgcmVjIHN0b3JlIHdlYiAnLFxuICAgICAgJ25nJzonIGJpeiBjb20gZWR1IGdvdiBtaWwgbW9iaSBuYW1lIG5ldCBvcmcgc2NoICcsXG4gICAgICAnbmknOicgYWMgY28gY29tIGVkdSBnb2IgbWlsIG5ldCBub20gb3JnICcsXG4gICAgICAnbnAnOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgJyxcbiAgICAgICducic6JyBiaXogY29tIGVkdSBnb3YgaW5mbyBuZXQgb3JnICcsXG4gICAgICAnb20nOicgYWMgYml6IGNvIGNvbSBlZHUgZ292IG1lZCBtaWwgbXVzZXVtIG5ldCBvcmcgcHJvIHNjaCAnLFxuICAgICAgJ3BlJzonIGNvbSBlZHUgZ29iIG1pbCBuZXQgbm9tIG9yZyBzbGQgJyxcbiAgICAgICdwaCc6JyBjb20gZWR1IGdvdiBpIG1pbCBuZXQgbmdvIG9yZyAnLFxuICAgICAgJ3BrJzonIGJpeiBjb20gZWR1IGZhbSBnb2IgZ29rIGdvbiBnb3AgZ29zIGdvdiBuZXQgb3JnIHdlYiAnLFxuICAgICAgJ3BsJzonIGFydCBiaWFseXN0b2sgYml6IGNvbSBlZHUgZ2RhIGdkYW5zayBnb3J6b3cgZ292IGluZm8ga2F0b3dpY2Uga3Jha293IGxvZHogbHVibGluIG1pbCBuZXQgbmdvIG9sc3p0eW4gb3JnIHBvem5hbiBwd3IgcmFkb20gc2x1cHNrIHN6Y3plY2luIHRvcnVuIHdhcnN6YXdhIHdhdyB3cm9jIHdyb2NsYXcgemdvcmEgJyxcbiAgICAgICdwcic6JyBhYyBiaXogY29tIGVkdSBlc3QgZ292IGluZm8gaXNsYSBuYW1lIG5ldCBvcmcgcHJvIHByb2YgJyxcbiAgICAgICdwcyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnIHBsbyBzZWMgJyxcbiAgICAgICdwdyc6JyBiZWxhdSBjbyBlZCBnbyBuZSBvciAnLFxuICAgICAgJ3JvJzonIGFydHMgY29tIGZpcm0gaW5mbyBub20gbnQgb3JnIHJlYyBzdG9yZSB0bSB3d3cgJyxcbiAgICAgICdycyc6JyBhYyBjbyBlZHUgZ292IGluIG9yZyAnLFxuICAgICAgJ3NiJzonIGNvbSBlZHUgZ292IG5ldCBvcmcgJyxcbiAgICAgICdzYyc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnc2gnOicgY28gY29tIGVkdSBnb3YgbmV0IG5vbSBvcmcgJyxcbiAgICAgICdzbCc6JyBjb20gZWR1IGdvdiBuZXQgb3JnICcsXG4gICAgICAnc3QnOicgY28gY29tIGNvbnN1bGFkbyBlZHUgZW1iYWl4YWRhIGdvdiBtaWwgbmV0IG9yZyBwcmluY2lwZSBzYW90b21lIHN0b3JlICcsXG4gICAgICAnc3YnOicgY29tIGVkdSBnb2Igb3JnIHJlZCAnLFxuICAgICAgJ3N6JzonIGFjIGNvIG9yZyAnLFxuICAgICAgJ3RyJzonIGF2IGJicyBiZWwgYml6IGNvbSBkciBlZHUgZ2VuIGdvdiBpbmZvIGsxMiBuYW1lIG5ldCBvcmcgcG9sIHRlbCB0c2sgdHYgd2ViICcsXG4gICAgICAndHQnOicgYWVybyBiaXogY2F0IGNvIGNvbSBjb29wIGVkdSBnb3YgaW5mbyBpbnQgam9icyBtaWwgbW9iaSBtdXNldW0gbmFtZSBuZXQgb3JnIHBybyB0ZWwgdHJhdmVsICcsXG4gICAgICAndHcnOicgY2x1YiBjb20gZWJpeiBlZHUgZ2FtZSBnb3YgaWR2IG1pbCBuZXQgb3JnICcsXG4gICAgICAnbXUnOicgYWMgY28gY29tIGdvdiBuZXQgb3Igb3JnICcsXG4gICAgICAnbXonOicgYWMgY28gZWR1IGdvdiBvcmcgJyxcbiAgICAgICduYSc6JyBjbyBjb20gJyxcbiAgICAgICdueic6JyBhYyBjbyBjcmkgZ2VlayBnZW4gZ292dCBoZWFsdGggaXdpIG1hb3JpIG1pbCBuZXQgb3JnIHBhcmxpYW1lbnQgc2Nob29sICcsXG4gICAgICAncGEnOicgYWJvIGFjIGNvbSBlZHUgZ29iIGluZyBtZWQgbmV0IG5vbSBvcmcgc2xkICcsXG4gICAgICAncHQnOicgY29tIGVkdSBnb3YgaW50IG5ldCBub21lIG9yZyBwdWJsICcsXG4gICAgICAncHknOicgY29tIGVkdSBnb3YgbWlsIG5ldCBvcmcgJyxcbiAgICAgICdxYSc6JyBjb20gZWR1IGdvdiBtaWwgbmV0IG9yZyAnLFxuICAgICAgJ3JlJzonIGFzc28gY29tIG5vbSAnLFxuICAgICAgJ3J1JzonIGFjIGFkeWdleWEgYWx0YWkgYW11ciBhcmtoYW5nZWxzayBhc3RyYWtoYW4gYmFzaGtpcmlhIGJlbGdvcm9kIGJpciBicnlhbnNrIGJ1cnlhdGlhIGNiZyBjaGVsIGNoZWx5YWJpbnNrIGNoaXRhIGNodWtvdGthIGNodXZhc2hpYSBjb20gZGFnZXN0YW4gZS1idXJnIGVkdSBnb3YgZ3Jvem55IGludCBpcmt1dHNrIGl2YW5vdm8gaXpoZXZzayBqYXIgam9zaGthci1vbGEga2FsbXlraWEga2FsdWdhIGthbWNoYXRrYSBrYXJlbGlhIGthemFuIGtjaHIga2VtZXJvdm8ga2hhYmFyb3ZzayBraGFrYXNzaWEga2h2IGtpcm92IGtvZW5pZyBrb21pIGtvc3Ryb21hIGtyYW5veWFyc2sga3ViYW4ga3VyZ2FuIGt1cnNrIGxpcGV0c2sgbWFnYWRhbiBtYXJpIG1hcmktZWwgbWFyaW5lIG1pbCBtb3Jkb3ZpYSBtb3NyZWcgbXNrIG11cm1hbnNrIG5hbGNoaWsgbmV0IG5ub3Ygbm92IG5vdm9zaWJpcnNrIG5zayBvbXNrIG9yZW5idXJnIG9yZyBvcnlvbCBwZW56YSBwZXJtIHBwIHBza292IHB0eiBybmQgcnlhemFuIHNha2hhbGluIHNhbWFyYSBzYXJhdG92IHNpbWJpcnNrIHNtb2xlbnNrIHNwYiBzdGF2cm9wb2wgc3R2IHN1cmd1dCB0YW1ib3YgdGF0YXJzdGFuIHRvbSB0b21zayB0c2FyaXRzeW4gdHNrIHR1bGEgdHV2YSB0dmVyIHR5dW1lbiB1ZG0gdWRtdXJ0aWEgdWxhbi11ZGUgdmxhZGlrYXZrYXogdmxhZGltaXIgdmxhZGl2b3N0b2sgdm9sZ29ncmFkIHZvbG9nZGEgdm9yb25lemggdnJuIHZ5YXRrYSB5YWt1dGlhIHlhbWFsIHlla2F0ZXJpbmJ1cmcgeXV6aG5vLXNha2hhbGluc2sgJyxcbiAgICAgICdydyc6JyBhYyBjbyBjb20gZWR1IGdvdXYgZ292IGludCBtaWwgbmV0ICcsXG4gICAgICAnc2EnOicgY29tIGVkdSBnb3YgbWVkIG5ldCBvcmcgcHViIHNjaCAnLFxuICAgICAgJ3NkJzonIGNvbSBlZHUgZ292IGluZm8gbWVkIG5ldCBvcmcgdHYgJyxcbiAgICAgICdzZSc6JyBhIGFjIGIgYmQgYyBkIGUgZiBnIGggaSBrIGwgbSBuIG8gb3JnIHAgcGFydGkgcHAgcHJlc3MgciBzIHQgdG0gdSB3IHggeSB6ICcsXG4gICAgICAnc2cnOicgY29tIGVkdSBnb3YgaWRuIG5ldCBvcmcgcGVyICcsXG4gICAgICAnc24nOicgYXJ0IGNvbSBlZHUgZ291diBvcmcgcGVyc28gdW5pdiAnLFxuICAgICAgJ3N5JzonIGNvbSBlZHUgZ292IG1pbCBuZXQgbmV3cyBvcmcgJyxcbiAgICAgICd0aCc6JyBhYyBjbyBnbyBpbiBtaSBuZXQgb3IgJyxcbiAgICAgICd0aic6JyBhYyBiaXogY28gY29tIGVkdSBnbyBnb3YgaW5mbyBpbnQgbWlsIG5hbWUgbmV0IG5pYyBvcmcgdGVzdCB3ZWIgJyxcbiAgICAgICd0bic6JyBhZ3JpbmV0IGNvbSBkZWZlbnNlIGVkdW5ldCBlbnMgZmluIGdvdiBpbmQgaW5mbyBpbnRsIG1pbmNvbSBuYXQgbmV0IG9yZyBwZXJzbyBybnJ0IHJucyBybnUgdG91cmlzbSAnLFxuICAgICAgJ3R6JzonIGFjIGNvIGdvIG5lIG9yICcsXG4gICAgICAndWEnOicgYml6IGNoZXJrYXNzeSBjaGVybmlnb3YgY2hlcm5vdnRzeSBjayBjbiBjbyBjb20gY3JpbWVhIGN2IGRuIGRuZXByb3BldHJvdnNrIGRvbmV0c2sgZHAgZWR1IGdvdiBpZiBpbiBpdmFuby1mcmFua2l2c2sga2gga2hhcmtvdiBraGVyc29uIGtobWVsbml0c2tpeSBraWV2IGtpcm92b2dyYWQga20ga3Iga3Mga3YgbGcgbHVnYW5zayBsdXRzayBsdml2IG1lIG1rIG5ldCBuaWtvbGFldiBvZCBvZGVzc2Egb3JnIHBsIHBvbHRhdmEgcHAgcm92bm8gcnYgc2ViYXN0b3BvbCBzdW15IHRlIHRlcm5vcGlsIHV6aGdvcm9kIHZpbm5pY2Egdm4gemFwb3Jpemh6aGUgemhpdG9taXIgenAgenQgJyxcbiAgICAgICd1Zyc6JyBhYyBjbyBnbyBuZSBvciBvcmcgc2MgJyxcbiAgICAgICd1ayc6JyBhYyBibCBicml0aXNoLWxpYnJhcnkgY28gY3ltIGdvdiBnb3Z0IGljbmV0IGpldCBsZWEgbHRkIG1lIG1pbCBtb2QgbmF0aW9uYWwtbGlicmFyeS1zY290bGFuZCBuZWwgbmV0IG5ocyBuaWMgbmxzIG9yZyBvcmduIHBhcmxpYW1lbnQgcGxjIHBvbGljZSBzY2ggc2NvdCBzb2MgJyxcbiAgICAgICd1cyc6JyBkbmkgZmVkIGlzYSBraWRzIG5zbiAnLFxuICAgICAgJ3V5JzonIGNvbSBlZHUgZ3ViIG1pbCBuZXQgb3JnICcsXG4gICAgICAndmUnOicgY28gY29tIGVkdSBnb2IgaW5mbyBtaWwgbmV0IG9yZyB3ZWIgJyxcbiAgICAgICd2aSc6JyBjbyBjb20gazEyIG5ldCBvcmcgJyxcbiAgICAgICd2bic6JyBhYyBiaXogY29tIGVkdSBnb3YgaGVhbHRoIGluZm8gaW50IG5hbWUgbmV0IG9yZyBwcm8gJyxcbiAgICAgICd5ZSc6JyBjbyBjb20gZ292IGx0ZCBtZSBuZXQgb3JnIHBsYyAnLFxuICAgICAgJ3l1JzonIGFjIGNvIGVkdSBnb3Ygb3JnICcsXG4gICAgICAnemEnOicgYWMgYWdyaWMgYWx0IGJvdXJzZSBjaXR5IGNvIGN5YmVybmV0IGRiIGVkdSBnb3YgZ3JvbmRhciBpYWNjZXNzIGltdCBpbmNhIGxhbmRlc2lnbiBsYXcgbWlsIG5ldCBuZ28gbmlzIG5vbSBvbGl2ZXR0aSBvcmcgcGl4IHNjaG9vbCB0bSB3ZWIgJyxcbiAgICAgICd6bSc6JyBhYyBjbyBjb20gZWR1IGdvdiBuZXQgb3JnIHNjaCAnLFxuICAgICAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2VudHJhbE5pYyNTZWNvbmQtbGV2ZWxfZG9tYWluc1xuICAgICAgJ2NvbSc6ICdhciBiciBjbiBkZSBldSBnYiBnciBodSBqcG4ga3Igbm8gcWMgcnUgc2Egc2UgdWsgdXMgdXkgemEgJyxcbiAgICAgICduZXQnOiAnZ2IganAgc2UgdWsgJyxcbiAgICAgICdvcmcnOiAnYWUnLFxuICAgICAgJ2RlJzogJ2NvbSAnXG4gICAgfSxcbiAgICAvLyBnb3JoaWxsIDIwMTMtMTAtMjU6IFVzaW5nIGluZGV4T2YoKSBpbnN0ZWFkIFJlZ2V4cCgpLiBTaWduaWZpY2FudCBib29zdFxuICAgIC8vIGluIGJvdGggcGVyZm9ybWFuY2UgYW5kIG1lbW9yeSBmb290cHJpbnQuIE5vIGluaXRpYWxpemF0aW9uIHJlcXVpcmVkLlxuICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3VyaS1qcy1zbGQtcmVnZXgtdnMtYmluYXJ5LXNlYXJjaC80XG4gICAgLy8gRm9sbG93aW5nIG1ldGhvZHMgdXNlIGxhc3RJbmRleE9mKCkgcmF0aGVyIHRoYW4gYXJyYXkuc3BsaXQoKSBpbiBvcmRlclxuICAgIC8vIHRvIGF2b2lkIGFueSBtZW1vcnkgYWxsb2NhdGlvbnMuXG4gICAgaGFzOiBmdW5jdGlvbihkb21haW4pIHtcbiAgICAgIHZhciB0bGRPZmZzZXQgPSBkb21haW4ubGFzdEluZGV4T2YoJy4nKTtcbiAgICAgIGlmICh0bGRPZmZzZXQgPD0gMCB8fCB0bGRPZmZzZXQgPj0gKGRvbWFpbi5sZW5ndGgtMSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHNsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicsIHRsZE9mZnNldC0xKTtcbiAgICAgIGlmIChzbGRPZmZzZXQgPD0gMCB8fCBzbGRPZmZzZXQgPj0gKHRsZE9mZnNldC0xKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgc2xkTGlzdCA9IFNMRC5saXN0W2RvbWFpbi5zbGljZSh0bGRPZmZzZXQrMSldO1xuICAgICAgaWYgKCFzbGRMaXN0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzbGRMaXN0LmluZGV4T2YoJyAnICsgZG9tYWluLnNsaWNlKHNsZE9mZnNldCsxLCB0bGRPZmZzZXQpICsgJyAnKSA+PSAwO1xuICAgIH0sXG4gICAgaXM6IGZ1bmN0aW9uKGRvbWFpbikge1xuICAgICAgdmFyIHRsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicpO1xuICAgICAgaWYgKHRsZE9mZnNldCA8PSAwIHx8IHRsZE9mZnNldCA+PSAoZG9tYWluLmxlbmd0aC0xKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgc2xkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJywgdGxkT2Zmc2V0LTEpO1xuICAgICAgaWYgKHNsZE9mZnNldCA+PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07XG4gICAgICBpZiAoIXNsZExpc3QpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNsZExpc3QuaW5kZXhPZignICcgKyBkb21haW4uc2xpY2UoMCwgdGxkT2Zmc2V0KSArICcgJykgPj0gMDtcbiAgICB9LFxuICAgIGdldDogZnVuY3Rpb24oZG9tYWluKSB7XG4gICAgICB2YXIgdGxkT2Zmc2V0ID0gZG9tYWluLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICBpZiAodGxkT2Zmc2V0IDw9IDAgfHwgdGxkT2Zmc2V0ID49IChkb21haW4ubGVuZ3RoLTEpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdmFyIHNsZE9mZnNldCA9IGRvbWFpbi5sYXN0SW5kZXhPZignLicsIHRsZE9mZnNldC0xKTtcbiAgICAgIGlmIChzbGRPZmZzZXQgPD0gMCB8fCBzbGRPZmZzZXQgPj0gKHRsZE9mZnNldC0xKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHZhciBzbGRMaXN0ID0gU0xELmxpc3RbZG9tYWluLnNsaWNlKHRsZE9mZnNldCsxKV07XG4gICAgICBpZiAoIXNsZExpc3QpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoc2xkTGlzdC5pbmRleE9mKCcgJyArIGRvbWFpbi5zbGljZShzbGRPZmZzZXQrMSwgdGxkT2Zmc2V0KSArICcgJykgPCAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvbWFpbi5zbGljZShzbGRPZmZzZXQrMSk7XG4gICAgfSxcbiAgICBub0NvbmZsaWN0OiBmdW5jdGlvbigpe1xuICAgICAgaWYgKHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zID09PSB0aGlzKSB7XG4gICAgICAgIHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zID0gX1NlY29uZExldmVsRG9tYWlucztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gU0xEO1xufSkpO1xuIiwiLyohXG4gKiBVUkkuanMgLSBNdXRhdGluZyBVUkxzXG4gKlxuICogVmVyc2lvbjogMS4xOS4xXG4gKlxuICogQXV0aG9yOiBSb2RuZXkgUmVobVxuICogV2ViOiBodHRwOi8vbWVkaWFsaXplLmdpdGh1Yi5pby9VUkkuanMvXG4gKlxuICogTGljZW5zZWQgdW5kZXJcbiAqICAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZVxuICpcbiAqL1xuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci9yZXR1cm5FeHBvcnRzLmpzXG4gIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIC8vIE5vZGVcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnLi9wdW55Y29kZScpLCByZXF1aXJlKCcuL0lQdjYnKSwgcmVxdWlyZSgnLi9TZWNvbmRMZXZlbERvbWFpbnMnKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShbJy4vcHVueWNvZGUnLCAnLi9JUHY2JywgJy4vU2Vjb25kTGV2ZWxEb21haW5zJ10sIGZhY3RvcnkpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgcm9vdC5VUkkgPSBmYWN0b3J5KHJvb3QucHVueWNvZGUsIHJvb3QuSVB2Niwgcm9vdC5TZWNvbmRMZXZlbERvbWFpbnMsIHJvb3QpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uIChwdW55Y29kZSwgSVB2NiwgU0xELCByb290KSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgLypnbG9iYWwgbG9jYXRpb24sIGVzY2FwZSwgdW5lc2NhcGUgKi9cbiAgLy8gRklYTUU6IHYyLjAuMCByZW5hbWNlIG5vbi1jYW1lbENhc2UgcHJvcGVydGllcyB0byB1cHBlcmNhc2VcbiAgLypqc2hpbnQgY2FtZWxjYXNlOiBmYWxzZSAqL1xuXG4gIC8vIHNhdmUgY3VycmVudCBVUkkgdmFyaWFibGUsIGlmIGFueVxuICB2YXIgX1VSSSA9IHJvb3QgJiYgcm9vdC5VUkk7XG5cbiAgZnVuY3Rpb24gVVJJKHVybCwgYmFzZSkge1xuICAgIHZhciBfdXJsU3VwcGxpZWQgPSBhcmd1bWVudHMubGVuZ3RoID49IDE7XG4gICAgdmFyIF9iYXNlU3VwcGxpZWQgPSBhcmd1bWVudHMubGVuZ3RoID49IDI7XG5cbiAgICAvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVVJJKSkge1xuICAgICAgaWYgKF91cmxTdXBwbGllZCkge1xuICAgICAgICBpZiAoX2Jhc2VTdXBwbGllZCkge1xuICAgICAgICAgIHJldHVybiBuZXcgVVJJKHVybCwgYmFzZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFVSSSh1cmwpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IFVSSSgpO1xuICAgIH1cblxuICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKF91cmxTdXBwbGllZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bmRlZmluZWQgaXMgbm90IGEgdmFsaWQgYXJndW1lbnQgZm9yIFVSSScpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGxvY2F0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cmwgPSBsb2NhdGlvbi5ocmVmICsgJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmwgPSAnJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXJsID09PSBudWxsKSB7XG4gICAgICBpZiAoX3VybFN1cHBsaWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ251bGwgaXMgbm90IGEgdmFsaWQgYXJndW1lbnQgZm9yIFVSSScpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuaHJlZih1cmwpO1xuXG4gICAgLy8gcmVzb2x2ZSB0byBiYXNlIGFjY29yZGluZyB0byBodHRwOi8vZHZjcy53My5vcmcvaGcvdXJsL3Jhdy1maWxlL3RpcC9PdmVydmlldy5odG1sI2NvbnN0cnVjdG9yXG4gICAgaWYgKGJhc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuYWJzb2x1dGVUbyhiYXNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzSW50ZWdlcih2YWx1ZSkge1xuICAgIHJldHVybiAvXlswLTldKyQvLnRlc3QodmFsdWUpO1xuICB9XG5cbiAgVVJJLnZlcnNpb24gPSAnMS4xOS4xJztcblxuICB2YXIgcCA9IFVSSS5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4gIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4KHN0cmluZykge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2NvbW1pdC84NWFjMjE3ODNjMTFmOGNjYWIwNjEwNmRiYTk3MzVhMzFhODY5MjRkI2NvbW1pdGNvbW1lbnQtODIxOTYzXG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xcXVxcL1xcXFxdKS9nLCAnXFxcXCQxJyk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUeXBlKHZhbHVlKSB7XG4gICAgLy8gSUU4IGRvZXNuJ3QgcmV0dXJuIFtPYmplY3QgVW5kZWZpbmVkXSBidXQgW09iamVjdCBPYmplY3RdIGZvciB1bmRlZmluZWQgdmFsdWVcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuICdVbmRlZmluZWQnO1xuICAgIH1cblxuICAgIHJldHVybiBTdHJpbmcoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSkuc2xpY2UoOCwgLTEpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNBcnJheShvYmopIHtcbiAgICByZXR1cm4gZ2V0VHlwZShvYmopID09PSAnQXJyYXknO1xuICB9XG5cbiAgZnVuY3Rpb24gZmlsdGVyQXJyYXlWYWx1ZXMoZGF0YSwgdmFsdWUpIHtcbiAgICB2YXIgbG9va3VwID0ge307XG4gICAgdmFyIGksIGxlbmd0aDtcblxuICAgIGlmIChnZXRUeXBlKHZhbHVlKSA9PT0gJ1JlZ0V4cCcpIHtcbiAgICAgIGxvb2t1cCA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbG9va3VwW3ZhbHVlW2ldXSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvb2t1cFt2YWx1ZV0gPSB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIC8qanNoaW50IGxheGJyZWFrOiB0cnVlICovXG4gICAgICB2YXIgX21hdGNoID0gbG9va3VwICYmIGxvb2t1cFtkYXRhW2ldXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgIHx8ICFsb29rdXAgJiYgdmFsdWUudGVzdChkYXRhW2ldKTtcbiAgICAgIC8qanNoaW50IGxheGJyZWFrOiBmYWxzZSAqL1xuICAgICAgaWYgKF9tYXRjaCkge1xuICAgICAgICBkYXRhLnNwbGljZShpLCAxKTtcbiAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgIGktLTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFycmF5Q29udGFpbnMobGlzdCwgdmFsdWUpIHtcbiAgICB2YXIgaSwgbGVuZ3RoO1xuXG4gICAgLy8gdmFsdWUgbWF5IGJlIHN0cmluZywgbnVtYmVyLCBhcnJheSwgcmVnZXhwXG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAvLyBOb3RlOiB0aGlzIGNhbiBiZSBvcHRpbWl6ZWQgdG8gTyhuKSAoaW5zdGVhZCBvZiBjdXJyZW50IE8obSAqIG4pKVxuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFhcnJheUNvbnRhaW5zKGxpc3QsIHZhbHVlW2ldKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgX3R5cGUgPSBnZXRUeXBlKHZhbHVlKTtcbiAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBsaXN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoX3R5cGUgPT09ICdSZWdFeHAnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbGlzdFtpXSA9PT0gJ3N0cmluZycgJiYgbGlzdFtpXS5tYXRjaCh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChsaXN0W2ldID09PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBhcnJheXNFcXVhbChvbmUsIHR3bykge1xuICAgIGlmICghaXNBcnJheShvbmUpIHx8ICFpc0FycmF5KHR3bykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBhcnJheXMgY2FuJ3QgYmUgZXF1YWwgaWYgdGhleSBoYXZlIGRpZmZlcmVudCBhbW91bnQgb2YgY29udGVudFxuICAgIGlmIChvbmUubGVuZ3RoICE9PSB0d28ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgb25lLnNvcnQoKTtcbiAgICB0d28uc29ydCgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvbmUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAob25lW2ldICE9PSB0d29baV0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJpbVNsYXNoZXModGV4dCkge1xuICAgIHZhciB0cmltX2V4cHJlc3Npb24gPSAvXlxcLyt8XFwvKyQvZztcbiAgICByZXR1cm4gdGV4dC5yZXBsYWNlKHRyaW1fZXhwcmVzc2lvbiwgJycpO1xuICB9XG5cbiAgVVJJLl9wYXJ0cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm90b2NvbDogbnVsbCxcbiAgICAgIHVzZXJuYW1lOiBudWxsLFxuICAgICAgcGFzc3dvcmQ6IG51bGwsXG4gICAgICBob3N0bmFtZTogbnVsbCxcbiAgICAgIHVybjogbnVsbCxcbiAgICAgIHBvcnQ6IG51bGwsXG4gICAgICBwYXRoOiBudWxsLFxuICAgICAgcXVlcnk6IG51bGwsXG4gICAgICBmcmFnbWVudDogbnVsbCxcbiAgICAgIC8vIHN0YXRlXG4gICAgICBwcmV2ZW50SW52YWxpZEhvc3RuYW1lOiBVUkkucHJldmVudEludmFsaWRIb3N0bmFtZSxcbiAgICAgIGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVyczogVVJJLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyxcbiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2U6IFVSSS5lc2NhcGVRdWVyeVNwYWNlXG4gICAgfTtcbiAgfTtcbiAgLy8gc3RhdGU6IHRocm93IG9uIGludmFsaWQgaG9zdG5hbWVcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL3B1bGwvMzQ1XG4gIC8vIGFuZCBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvMzU0XG4gIFVSSS5wcmV2ZW50SW52YWxpZEhvc3RuYW1lID0gZmFsc2U7XG4gIC8vIHN0YXRlOiBhbGxvdyBkdXBsaWNhdGUgcXVlcnkgcGFyYW1ldGVycyAoYT0xJmE9MSlcbiAgVVJJLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyA9IGZhbHNlO1xuICAvLyBzdGF0ZTogcmVwbGFjZXMgKyB3aXRoICUyMCAoc3BhY2UgaW4gcXVlcnkgc3RyaW5ncylcbiAgVVJJLmVzY2FwZVF1ZXJ5U3BhY2UgPSB0cnVlO1xuICAvLyBzdGF0aWMgcHJvcGVydGllc1xuICBVUkkucHJvdG9jb2xfZXhwcmVzc2lvbiA9IC9eW2Etel1bYS16MC05ListXSokL2k7XG4gIFVSSS5pZG5fZXhwcmVzc2lvbiA9IC9bXmEtejAtOVxcLl8tXS9pO1xuICBVUkkucHVueWNvZGVfZXhwcmVzc2lvbiA9IC8oeG4tLSkvaTtcbiAgLy8gd2VsbCwgMzMzLjQ0NC41NTUuNjY2IG1hdGNoZXMsIGJ1dCBpdCBzdXJlIGFpbid0IG5vIElQdjQgLSBkbyB3ZSBjYXJlP1xuICBVUkkuaXA0X2V4cHJlc3Npb24gPSAvXlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9JC87XG4gIC8vIGNyZWRpdHMgdG8gUmljaCBCcm93blxuICAvLyBzb3VyY2U6IGh0dHA6Ly9mb3J1bXMuaW50ZXJtYXBwZXIuY29tL3ZpZXd0b3BpYy5waHA/cD0xMDk2IzEwOTZcbiAgLy8gc3BlY2lmaWNhdGlvbjogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjNDI5MS50eHRcbiAgVVJJLmlwNl9leHByZXNzaW9uID0gL15cXHMqKCgoWzAtOUEtRmEtZl17MSw0fTopezd9KFswLTlBLUZhLWZdezEsNH18OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezZ9KDpbMC05QS1GYS1mXXsxLDR9fCgoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7NX0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSwyfSl8OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7NH0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSwzfSl8KCg6WzAtOUEtRmEtZl17MSw0fSk/OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOUEtRmEtZl17MSw0fTopezN9KCgoOlswLTlBLUZhLWZdezEsNH0pezEsNH0pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsMn06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05QS1GYS1mXXsxLDR9Oil7Mn0oKCg6WzAtOUEtRmEtZl17MSw0fSl7MSw1fSl8KCg6WzAtOUEtRmEtZl17MSw0fSl7MCwzfTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlBLUZhLWZdezEsNH06KXsxfSgoKDpbMC05QS1GYS1mXXsxLDR9KXsxLDZ9KXwoKDpbMC05QS1GYS1mXXsxLDR9KXswLDR9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCg6KCgoOlswLTlBLUZhLWZdezEsNH0pezEsN30pfCgoOlswLTlBLUZhLWZdezEsNH0pezAsNX06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSkpKCUuKyk/XFxzKiQvO1xuICAvLyBleHByZXNzaW9uIHVzZWQgaXMgXCJncnViZXIgcmV2aXNlZFwiIChAZ3J1YmVyIHYyKSBkZXRlcm1pbmVkIHRvIGJlIHRoZVxuICAvLyBiZXN0IHNvbHV0aW9uIGluIGEgcmVnZXgtZ29sZiB3ZSBkaWQgYSBjb3VwbGUgb2YgYWdlcyBhZ28gYXRcbiAgLy8gKiBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9kZW1vL3VybC1yZWdleFxuICAvLyAqIGh0dHA6Ly9yb2RuZXlyZWhtLmRlL3QvdXJsLXJlZ2V4Lmh0bWxcbiAgVVJJLmZpbmRfdXJpX2V4cHJlc3Npb24gPSAvXFxiKCg/OlthLXpdW1xcdy1dKzooPzpcXC97MSwzfXxbYS16MC05JV0pfHd3d1xcZHswLDN9Wy5dfFthLXowLTkuXFwtXStbLl1bYS16XXsyLDR9XFwvKSg/OlteXFxzKCk8Pl0rfFxcKChbXlxccygpPD5dK3woXFwoW15cXHMoKTw+XStcXCkpKSpcXCkpKyg/OlxcKChbXlxccygpPD5dK3woXFwoW15cXHMoKTw+XStcXCkpKSpcXCl8W15cXHNgISgpXFxbXFxde307OidcIi4sPD4/wqvCu+KAnOKAneKAmOKAmV0pKS9pZztcbiAgVVJJLmZpbmRVcmkgPSB7XG4gICAgLy8gdmFsaWQgXCJzY2hlbWU6Ly9cIiBvciBcInd3dy5cIlxuICAgIHN0YXJ0OiAvXFxiKD86KFthLXpdW2EtejAtOS4rLV0qOlxcL1xcLyl8d3d3XFwuKS9naSxcbiAgICAvLyBldmVyeXRoaW5nIHVwIHRvIHRoZSBuZXh0IHdoaXRlc3BhY2VcbiAgICBlbmQ6IC9bXFxzXFxyXFxuXXwkLyxcbiAgICAvLyB0cmltIHRyYWlsaW5nIHB1bmN0dWF0aW9uIGNhcHR1cmVkIGJ5IGVuZCBSZWdFeHBcbiAgICB0cmltOiAvW2AhKClcXFtcXF17fTs6J1wiLiw8Pj/Cq8K74oCc4oCd4oCe4oCY4oCZXSskLyxcbiAgICAvLyBiYWxhbmNlZCBwYXJlbnMgaW5jbHVzaW9uICgpLCBbXSwge30sIDw+XG4gICAgcGFyZW5zOiAvKFxcKFteXFwpXSpcXCl8XFxbW15cXF1dKlxcXXxcXHtbXn1dKlxcfXw8W14+XSo+KS9nLFxuICB9O1xuICAvLyBodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL3VyaS1zY2hlbWVzLmh0bWxcbiAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX1RDUF9hbmRfVURQX3BvcnRfbnVtYmVycyNXZWxsLWtub3duX3BvcnRzXG4gIFVSSS5kZWZhdWx0UG9ydHMgPSB7XG4gICAgaHR0cDogJzgwJyxcbiAgICBodHRwczogJzQ0MycsXG4gICAgZnRwOiAnMjEnLFxuICAgIGdvcGhlcjogJzcwJyxcbiAgICB3czogJzgwJyxcbiAgICB3c3M6ICc0NDMnXG4gIH07XG4gIC8vIGxpc3Qgb2YgcHJvdG9jb2xzIHdoaWNoIGFsd2F5cyByZXF1aXJlIGEgaG9zdG5hbWVcbiAgVVJJLmhvc3RQcm90b2NvbHMgPSBbXG4gICAgJ2h0dHAnLFxuICAgICdodHRwcydcbiAgXTtcblxuICAvLyBhbGxvd2VkIGhvc3RuYW1lIGNoYXJhY3RlcnMgYWNjb3JkaW5nIHRvIFJGQyAzOTg2XG4gIC8vIEFMUEhBIERJR0lUIFwiLVwiIFwiLlwiIFwiX1wiIFwiflwiIFwiIVwiIFwiJFwiIFwiJlwiIFwiJ1wiIFwiKFwiIFwiKVwiIFwiKlwiIFwiK1wiIFwiLFwiIFwiO1wiIFwiPVwiICVlbmNvZGVkXG4gIC8vIEkndmUgbmV2ZXIgc2VlbiBhIChub24tSUROKSBob3N0bmFtZSBvdGhlciB0aGFuOiBBTFBIQSBESUdJVCAuIC0gX1xuICBVUkkuaW52YWxpZF9ob3N0bmFtZV9jaGFyYWN0ZXJzID0gL1teYS16QS1aMC05XFwuXFwtOl9dLztcbiAgLy8gbWFwIERPTSBFbGVtZW50cyB0byB0aGVpciBVUkkgYXR0cmlidXRlXG4gIFVSSS5kb21BdHRyaWJ1dGVzID0ge1xuICAgICdhJzogJ2hyZWYnLFxuICAgICdibG9ja3F1b3RlJzogJ2NpdGUnLFxuICAgICdsaW5rJzogJ2hyZWYnLFxuICAgICdiYXNlJzogJ2hyZWYnLFxuICAgICdzY3JpcHQnOiAnc3JjJyxcbiAgICAnZm9ybSc6ICdhY3Rpb24nLFxuICAgICdpbWcnOiAnc3JjJyxcbiAgICAnYXJlYSc6ICdocmVmJyxcbiAgICAnaWZyYW1lJzogJ3NyYycsXG4gICAgJ2VtYmVkJzogJ3NyYycsXG4gICAgJ3NvdXJjZSc6ICdzcmMnLFxuICAgICd0cmFjayc6ICdzcmMnLFxuICAgICdpbnB1dCc6ICdzcmMnLCAvLyBidXQgb25seSBpZiB0eXBlPVwiaW1hZ2VcIlxuICAgICdhdWRpbyc6ICdzcmMnLFxuICAgICd2aWRlbyc6ICdzcmMnXG4gIH07XG4gIFVSSS5nZXREb21BdHRyaWJ1dGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgaWYgKCFub2RlIHx8ICFub2RlLm5vZGVOYW1lKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZhciBub2RlTmFtZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAvLyA8aW5wdXQ+IHNob3VsZCBvbmx5IGV4cG9zZSBzcmMgZm9yIHR5cGU9XCJpbWFnZVwiXG4gICAgaWYgKG5vZGVOYW1lID09PSAnaW5wdXQnICYmIG5vZGUudHlwZSAhPT0gJ2ltYWdlJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gVVJJLmRvbUF0dHJpYnV0ZXNbbm9kZU5hbWVdO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGVzY2FwZUZvckR1bWJGaXJlZm94MzYodmFsdWUpIHtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvOTFcbiAgICByZXR1cm4gZXNjYXBlKHZhbHVlKTtcbiAgfVxuXG4gIC8vIGVuY29kaW5nIC8gZGVjb2RpbmcgYWNjb3JkaW5nIHRvIFJGQzM5ODZcbiAgZnVuY3Rpb24gc3RyaWN0RW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykge1xuICAgIC8vIHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL2VuY29kZVVSSUNvbXBvbmVudFxuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKVxuICAgICAgLnJlcGxhY2UoL1shJygpKl0vZywgZXNjYXBlRm9yRHVtYkZpcmVmb3gzNilcbiAgICAgIC5yZXBsYWNlKC9cXCovZywgJyUyQScpO1xuICB9XG4gIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7XG4gIFVSSS5kZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG4gIFVSSS5pc284ODU5ID0gZnVuY3Rpb24oKSB7XG4gICAgVVJJLmVuY29kZSA9IGVzY2FwZTtcbiAgICBVUkkuZGVjb2RlID0gdW5lc2NhcGU7XG4gIH07XG4gIFVSSS51bmljb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgVVJJLmVuY29kZSA9IHN0cmljdEVuY29kZVVSSUNvbXBvbmVudDtcbiAgICBVUkkuZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50O1xuICB9O1xuICBVUkkuY2hhcmFjdGVycyA9IHtcbiAgICBwYXRobmFtZToge1xuICAgICAgZW5jb2RlOiB7XG4gICAgICAgIC8vIFJGQzM5ODYgMi4xOiBGb3IgY29uc2lzdGVuY3ksIFVSSSBwcm9kdWNlcnMgYW5kIG5vcm1hbGl6ZXJzIHNob3VsZFxuICAgICAgICAvLyB1c2UgdXBwZXJjYXNlIGhleGFkZWNpbWFsIGRpZ2l0cyBmb3IgYWxsIHBlcmNlbnQtZW5jb2RpbmdzLlxuICAgICAgICBleHByZXNzaW9uOiAvJSgyNHwyNnwyQnwyQ3wzQnwzRHwzQXw0MCkvaWcsXG4gICAgICAgIG1hcDoge1xuICAgICAgICAgIC8vIC0uX34hJygpKlxuICAgICAgICAgICclMjQnOiAnJCcsXG4gICAgICAgICAgJyUyNic6ICcmJyxcbiAgICAgICAgICAnJTJCJzogJysnLFxuICAgICAgICAgICclMkMnOiAnLCcsXG4gICAgICAgICAgJyUzQic6ICc7JyxcbiAgICAgICAgICAnJTNEJzogJz0nLFxuICAgICAgICAgICclM0EnOiAnOicsXG4gICAgICAgICAgJyU0MCc6ICdAJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVjb2RlOiB7XG4gICAgICAgIGV4cHJlc3Npb246IC9bXFwvXFw/I10vZyxcbiAgICAgICAgbWFwOiB7XG4gICAgICAgICAgJy8nOiAnJTJGJyxcbiAgICAgICAgICAnPyc6ICclM0YnLFxuICAgICAgICAgICcjJzogJyUyMydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgcmVzZXJ2ZWQ6IHtcbiAgICAgIGVuY29kZToge1xuICAgICAgICAvLyBSRkMzOTg2IDIuMTogRm9yIGNvbnNpc3RlbmN5LCBVUkkgcHJvZHVjZXJzIGFuZCBub3JtYWxpemVycyBzaG91bGRcbiAgICAgICAgLy8gdXNlIHVwcGVyY2FzZSBoZXhhZGVjaW1hbCBkaWdpdHMgZm9yIGFsbCBwZXJjZW50LWVuY29kaW5ncy5cbiAgICAgICAgZXhwcmVzc2lvbjogLyUoMjF8MjN8MjR8MjZ8Mjd8Mjh8Mjl8MkF8MkJ8MkN8MkZ8M0F8M0J8M0R8M0Z8NDB8NUJ8NUQpL2lnLFxuICAgICAgICBtYXA6IHtcbiAgICAgICAgICAvLyBnZW4tZGVsaW1zXG4gICAgICAgICAgJyUzQSc6ICc6JyxcbiAgICAgICAgICAnJTJGJzogJy8nLFxuICAgICAgICAgICclM0YnOiAnPycsXG4gICAgICAgICAgJyUyMyc6ICcjJyxcbiAgICAgICAgICAnJTVCJzogJ1snLFxuICAgICAgICAgICclNUQnOiAnXScsXG4gICAgICAgICAgJyU0MCc6ICdAJyxcbiAgICAgICAgICAvLyBzdWItZGVsaW1zXG4gICAgICAgICAgJyUyMSc6ICchJyxcbiAgICAgICAgICAnJTI0JzogJyQnLFxuICAgICAgICAgICclMjYnOiAnJicsXG4gICAgICAgICAgJyUyNyc6ICdcXCcnLFxuICAgICAgICAgICclMjgnOiAnKCcsXG4gICAgICAgICAgJyUyOSc6ICcpJyxcbiAgICAgICAgICAnJTJBJzogJyonLFxuICAgICAgICAgICclMkInOiAnKycsXG4gICAgICAgICAgJyUyQyc6ICcsJyxcbiAgICAgICAgICAnJTNCJzogJzsnLFxuICAgICAgICAgICclM0QnOiAnPSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgdXJucGF0aDoge1xuICAgICAgLy8gVGhlIGNoYXJhY3RlcnMgdW5kZXIgYGVuY29kZWAgYXJlIHRoZSBjaGFyYWN0ZXJzIGNhbGxlZCBvdXQgYnkgUkZDIDIxNDEgYXMgYmVpbmcgYWNjZXB0YWJsZVxuICAgICAgLy8gZm9yIHVzYWdlIGluIGEgVVJOLiBSRkMyMTQxIGFsc28gY2FsbHMgb3V0IFwiLVwiLCBcIi5cIiwgYW5kIFwiX1wiIGFzIGFjY2VwdGFibGUgY2hhcmFjdGVycywgYnV0XG4gICAgICAvLyB0aGVzZSBhcmVuJ3QgZW5jb2RlZCBieSBlbmNvZGVVUklDb21wb25lbnQsIHNvIHdlIGRvbid0IGhhdmUgdG8gY2FsbCB0aGVtIG91dCBoZXJlLiBBbHNvXG4gICAgICAvLyBub3RlIHRoYXQgdGhlIGNvbG9uIGNoYXJhY3RlciBpcyBub3QgZmVhdHVyZWQgaW4gdGhlIGVuY29kaW5nIG1hcDsgdGhpcyBpcyBiZWNhdXNlIFVSSS5qc1xuICAgICAgLy8gZ2l2ZXMgdGhlIGNvbG9ucyBpbiBVUk5zIHNlbWFudGljIG1lYW5pbmcgYXMgdGhlIGRlbGltaXRlcnMgb2YgcGF0aCBzZWdlbWVudHMsIGFuZCBzbyBpdFxuICAgICAgLy8gc2hvdWxkIG5vdCBhcHBlYXIgdW5lbmNvZGVkIGluIGEgc2VnbWVudCBpdHNlbGYuXG4gICAgICAvLyBTZWUgYWxzbyB0aGUgbm90ZSBhYm92ZSBhYm91dCBSRkMzOTg2IGFuZCBjYXBpdGFsYWxpemVkIGhleCBkaWdpdHMuXG4gICAgICBlbmNvZGU6IHtcbiAgICAgICAgZXhwcmVzc2lvbjogLyUoMjF8MjR8Mjd8Mjh8Mjl8MkF8MkJ8MkN8M0J8M0R8NDApL2lnLFxuICAgICAgICBtYXA6IHtcbiAgICAgICAgICAnJTIxJzogJyEnLFxuICAgICAgICAgICclMjQnOiAnJCcsXG4gICAgICAgICAgJyUyNyc6ICdcXCcnLFxuICAgICAgICAgICclMjgnOiAnKCcsXG4gICAgICAgICAgJyUyOSc6ICcpJyxcbiAgICAgICAgICAnJTJBJzogJyonLFxuICAgICAgICAgICclMkInOiAnKycsXG4gICAgICAgICAgJyUyQyc6ICcsJyxcbiAgICAgICAgICAnJTNCJzogJzsnLFxuICAgICAgICAgICclM0QnOiAnPScsXG4gICAgICAgICAgJyU0MCc6ICdAJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gVGhlc2UgY2hhcmFjdGVycyBhcmUgdGhlIGNoYXJhY3RlcnMgY2FsbGVkIG91dCBieSBSRkMyMTQxIGFzIFwicmVzZXJ2ZWRcIiBjaGFyYWN0ZXJzIHRoYXRcbiAgICAgIC8vIHNob3VsZCBuZXZlciBhcHBlYXIgaW4gYSBVUk4sIHBsdXMgdGhlIGNvbG9uIGNoYXJhY3RlciAoc2VlIG5vdGUgYWJvdmUpLlxuICAgICAgZGVjb2RlOiB7XG4gICAgICAgIGV4cHJlc3Npb246IC9bXFwvXFw/IzpdL2csXG4gICAgICAgIG1hcDoge1xuICAgICAgICAgICcvJzogJyUyRicsXG4gICAgICAgICAgJz8nOiAnJTNGJyxcbiAgICAgICAgICAnIyc6ICclMjMnLFxuICAgICAgICAgICc6JzogJyUzQSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgVVJJLmVuY29kZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7XG4gICAgdmFyIGVzY2FwZWQgPSBVUkkuZW5jb2RlKHN0cmluZyArICcnKTtcbiAgICBpZiAoZXNjYXBlUXVlcnlTcGFjZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBlc2NhcGVRdWVyeVNwYWNlID0gVVJJLmVzY2FwZVF1ZXJ5U3BhY2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVzY2FwZVF1ZXJ5U3BhY2UgPyBlc2NhcGVkLnJlcGxhY2UoLyUyMC9nLCAnKycpIDogZXNjYXBlZDtcbiAgfTtcbiAgVVJJLmRlY29kZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7XG4gICAgc3RyaW5nICs9ICcnO1xuICAgIGlmIChlc2NhcGVRdWVyeVNwYWNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVzY2FwZVF1ZXJ5U3BhY2UgPSBVUkkuZXNjYXBlUXVlcnlTcGFjZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIFVSSS5kZWNvZGUoZXNjYXBlUXVlcnlTcGFjZSA/IHN0cmluZy5yZXBsYWNlKC9cXCsvZywgJyUyMCcpIDogc3RyaW5nKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIC8vIHdlJ3JlIG5vdCBnb2luZyB0byBtZXNzIHdpdGggd2VpcmQgZW5jb2RpbmdzLFxuICAgICAgLy8gZ2l2ZSB1cCBhbmQgcmV0dXJuIHRoZSB1bmRlY29kZWQgb3JpZ2luYWwgc3RyaW5nXG4gICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzg3XG4gICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21lZGlhbGl6ZS9VUkkuanMvaXNzdWVzLzkyXG4gICAgICByZXR1cm4gc3RyaW5nO1xuICAgIH1cbiAgfTtcbiAgLy8gZ2VuZXJhdGUgZW5jb2RlL2RlY29kZSBwYXRoIGZ1bmN0aW9uc1xuICB2YXIgX3BhcnRzID0geydlbmNvZGUnOidlbmNvZGUnLCAnZGVjb2RlJzonZGVjb2RlJ307XG4gIHZhciBfcGFydDtcbiAgdmFyIGdlbmVyYXRlQWNjZXNzb3IgPSBmdW5jdGlvbihfZ3JvdXAsIF9wYXJ0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIFVSSVtfcGFydF0oc3RyaW5nICsgJycpLnJlcGxhY2UoVVJJLmNoYXJhY3RlcnNbX2dyb3VwXVtfcGFydF0uZXhwcmVzc2lvbiwgZnVuY3Rpb24oYykge1xuICAgICAgICAgIHJldHVybiBVUkkuY2hhcmFjdGVyc1tfZ3JvdXBdW19wYXJ0XS5tYXBbY107XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyB3ZSdyZSBub3QgZ29pbmcgdG8gbWVzcyB3aXRoIHdlaXJkIGVuY29kaW5ncyxcbiAgICAgICAgLy8gZ2l2ZSB1cCBhbmQgcmV0dXJuIHRoZSB1bmRlY29kZWQgb3JpZ2luYWwgc3RyaW5nXG4gICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWVkaWFsaXplL1VSSS5qcy9pc3N1ZXMvODdcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL2lzc3Vlcy85MlxuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgZm9yIChfcGFydCBpbiBfcGFydHMpIHtcbiAgICBVUklbX3BhcnQgKyAnUGF0aFNlZ21lbnQnXSA9IGdlbmVyYXRlQWNjZXNzb3IoJ3BhdGhuYW1lJywgX3BhcnRzW19wYXJ0XSk7XG4gICAgVVJJW19wYXJ0ICsgJ1VyblBhdGhTZWdtZW50J10gPSBnZW5lcmF0ZUFjY2Vzc29yKCd1cm5wYXRoJywgX3BhcnRzW19wYXJ0XSk7XG4gIH1cblxuICB2YXIgZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24gPSBmdW5jdGlvbihfc2VwLCBfY29kaW5nRnVuY05hbWUsIF9pbm5lckNvZGluZ0Z1bmNOYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgLy8gV2h5IHBhc3MgaW4gbmFtZXMgb2YgZnVuY3Rpb25zLCByYXRoZXIgdGhhbiB0aGUgZnVuY3Rpb24gb2JqZWN0cyB0aGVtc2VsdmVzPyBUaGVcbiAgICAgIC8vIGRlZmluaXRpb25zIG9mIHNvbWUgZnVuY3Rpb25zIChidXQgaW4gcGFydGljdWxhciwgVVJJLmRlY29kZSkgd2lsbCBvY2Nhc2lvbmFsbHkgY2hhbmdlIGR1ZVxuICAgICAgLy8gdG8gVVJJLmpzIGhhdmluZyBJU084ODU5IGFuZCBVbmljb2RlIG1vZGVzLiBQYXNzaW5nIGluIHRoZSBuYW1lIGFuZCBnZXR0aW5nIGl0IHdpbGwgZW5zdXJlXG4gICAgICAvLyB0aGF0IHRoZSBmdW5jdGlvbnMgd2UgdXNlIGhlcmUgYXJlIFwiZnJlc2hcIi5cbiAgICAgIHZhciBhY3R1YWxDb2RpbmdGdW5jO1xuICAgICAgaWYgKCFfaW5uZXJDb2RpbmdGdW5jTmFtZSkge1xuICAgICAgICBhY3R1YWxDb2RpbmdGdW5jID0gVVJJW19jb2RpbmdGdW5jTmFtZV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3R1YWxDb2RpbmdGdW5jID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIFVSSVtfY29kaW5nRnVuY05hbWVdKFVSSVtfaW5uZXJDb2RpbmdGdW5jTmFtZV0oc3RyaW5nKSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWdtZW50cyA9IChzdHJpbmcgKyAnJykuc3BsaXQoX3NlcCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBzZWdtZW50c1tpXSA9IGFjdHVhbENvZGluZ0Z1bmMoc2VnbWVudHNbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VnbWVudHMuam9pbihfc2VwKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFRoaXMgdGFrZXMgcGxhY2Ugb3V0c2lkZSB0aGUgYWJvdmUgbG9vcCBiZWNhdXNlIHdlIGRvbid0IHdhbnQsIGUuZy4sIGVuY29kZVVyblBhdGggZnVuY3Rpb25zLlxuICBVUkkuZGVjb2RlUGF0aCA9IGdlbmVyYXRlU2VnbWVudGVkUGF0aEZ1bmN0aW9uKCcvJywgJ2RlY29kZVBhdGhTZWdtZW50Jyk7XG4gIFVSSS5kZWNvZGVVcm5QYXRoID0gZ2VuZXJhdGVTZWdtZW50ZWRQYXRoRnVuY3Rpb24oJzonLCAnZGVjb2RlVXJuUGF0aFNlZ21lbnQnKTtcbiAgVVJJLnJlY29kZVBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignLycsICdlbmNvZGVQYXRoU2VnbWVudCcsICdkZWNvZGUnKTtcbiAgVVJJLnJlY29kZVVyblBhdGggPSBnZW5lcmF0ZVNlZ21lbnRlZFBhdGhGdW5jdGlvbignOicsICdlbmNvZGVVcm5QYXRoU2VnbWVudCcsICdkZWNvZGUnKTtcblxuICBVUkkuZW5jb2RlUmVzZXJ2ZWQgPSBnZW5lcmF0ZUFjY2Vzc29yKCdyZXNlcnZlZCcsICdlbmNvZGUnKTtcblxuICBVUkkucGFyc2UgPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7XG4gICAgdmFyIHBvcztcbiAgICBpZiAoIXBhcnRzKSB7XG4gICAgICBwYXJ0cyA9IHtcbiAgICAgICAgcHJldmVudEludmFsaWRIb3N0bmFtZTogVVJJLnByZXZlbnRJbnZhbGlkSG9zdG5hbWVcbiAgICAgIH07XG4gICAgfVxuICAgIC8vIFtwcm90b2NvbFwiOi8vXCJbdXNlcm5hbWVbXCI6XCJwYXNzd29yZF1cIkBcIl1ob3N0bmFtZVtcIjpcInBvcnRdXCIvXCI/XVtwYXRoXVtcIj9cInF1ZXJ5c3RyaW5nXVtcIiNcImZyYWdtZW50XVxuXG4gICAgLy8gZXh0cmFjdCBmcmFnbWVudFxuICAgIHBvcyA9IHN0cmluZy5pbmRleE9mKCcjJyk7XG4gICAgaWYgKHBvcyA+IC0xKSB7XG4gICAgICAvLyBlc2NhcGluZz9cbiAgICAgIHBhcnRzLmZyYWdtZW50ID0gc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxKSB8fCBudWxsO1xuICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZygwLCBwb3MpO1xuICAgIH1cblxuICAgIC8vIGV4dHJhY3QgcXVlcnlcbiAgICBwb3MgPSBzdHJpbmcuaW5kZXhPZignPycpO1xuICAgIGlmIChwb3MgPiAtMSkge1xuICAgICAgLy8gZXNjYXBpbmc/XG4gICAgICBwYXJ0cy5xdWVyeSA9IHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSkgfHwgbnVsbDtcbiAgICAgIHN0cmluZyA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKTtcbiAgICB9XG5cbiAgICAvLyBleHRyYWN0IHByb3RvY29sXG4gICAgaWYgKHN0cmluZy5zdWJzdHJpbmcoMCwgMikgPT09ICcvLycpIHtcbiAgICAgIC8vIHJlbGF0aXZlLXNjaGVtZVxuICAgICAgcGFydHMucHJvdG9jb2wgPSBudWxsO1xuICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZygyKTtcbiAgICAgIC8vIGV4dHJhY3QgXCJ1c2VyOnBhc3NAaG9zdDpwb3J0XCJcbiAgICAgIHN0cmluZyA9IFVSSS5wYXJzZUF1dGhvcml0eShzdHJpbmcsIHBhcnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9zID0gc3RyaW5nLmluZGV4T2YoJzonKTtcbiAgICAgIGlmIChwb3MgPiAtMSkge1xuICAgICAgICBwYXJ0cy5wcm90b2NvbCA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKSB8fCBudWxsO1xuICAgICAgICBpZiAocGFydHMucHJvdG9jb2wgJiYgIXBhcnRzLnByb3RvY29sLm1hdGNoKFVSSS5wcm90b2NvbF9leHByZXNzaW9uKSkge1xuICAgICAgICAgIC8vIDogbWF5IGJlIHdpdGhpbiB0aGUgcGF0aFxuICAgICAgICAgIHBhcnRzLnByb3RvY29sID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2UgaWYgKHN0cmluZy5zdWJzdHJpbmcocG9zICsgMSwgcG9zICsgMykgPT09ICcvLycpIHtcbiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDMpO1xuXG4gICAgICAgICAgLy8gZXh0cmFjdCBcInVzZXI6cGFzc0Bob3N0OnBvcnRcIlxuICAgICAgICAgIHN0cmluZyA9IFVSSS5wYXJzZUF1dGhvcml0eShzdHJpbmcsIHBhcnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc3Vic3RyaW5nKHBvcyArIDEpO1xuICAgICAgICAgIHBhcnRzLnVybiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3aGF0J3MgbGVmdCBtdXN0IGJlIHRoZSBwYXRoXG4gICAgcGFydHMucGF0aCA9IHN0cmluZztcblxuICAgIC8vIGFuZCB3ZSdyZSBkb25lXG4gICAgcmV0dXJuIHBhcnRzO1xuICB9O1xuICBVUkkucGFyc2VIb3N0ID0gZnVuY3Rpb24oc3RyaW5nLCBwYXJ0cykge1xuICAgIGlmICghc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSAnJztcbiAgICB9XG5cbiAgICAvLyBDb3B5IGNocm9tZSwgSUUsIG9wZXJhIGJhY2tzbGFzaC1oYW5kbGluZyBiZWhhdmlvci5cbiAgICAvLyBCYWNrIHNsYXNoZXMgYmVmb3JlIHRoZSBxdWVyeSBzdHJpbmcgZ2V0IGNvbnZlcnRlZCB0byBmb3J3YXJkIHNsYXNoZXNcbiAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9ibG9iLzM4NmZkMjRmNDliMGU5ZDFhOGEwNzY1OTJhNDA0MTY4ZmFlZWNjMzQvbGliL3VybC5qcyNMMTE1LUwxMjRcbiAgICAvLyBTZWU6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yNTkxNlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWRpYWxpemUvVVJJLmpzL3B1bGwvMjMzXG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcblxuICAgIC8vIGV4dHJhY3QgaG9zdDpwb3J0XG4gICAgdmFyIHBvcyA9IHN0cmluZy5pbmRleE9mKCcvJyk7XG4gICAgdmFyIGJyYWNrZXRQb3M7XG4gICAgdmFyIHQ7XG5cbiAgICBpZiAocG9zID09PSAtMSkge1xuICAgICAgcG9zID0gc3RyaW5nLmxlbmd0aDtcbiAgICB9XG5cbiAgICBpZiAoc3RyaW5nLmNoYXJBdCgwKSA9PT0gJ1snKSB7XG4gICAgICAvLyBJUHY2IGhvc3QgLSBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1pZXRmLTZtYW4tdGV4dC1hZGRyLXJlcHJlc2VudGF0aW9uLTA0I3NlY3Rpb24tNlxuICAgICAgLy8gSSBjbGFpbSBtb3N0IGNsaWVudCBzb2Z0d2FyZSBicmVha3Mgb24gSVB2NiBhbnl3YXlzLiBUbyBzaW1wbGlmeSB0aGluZ3MsIFVSSSBvbmx5IGFjY2VwdHNcbiAgICAgIC8vIElQdjYrcG9ydCBpbiB0aGUgZm9ybWF0IFsyMDAxOmRiODo6MV06ODAgKGZvciB0aGUgdGltZSBiZWluZylcbiAgICAgIGJyYWNrZXRQb3MgPSBzdHJpbmcuaW5kZXhPZignXScpO1xuICAgICAgcGFydHMuaG9zdG5hbWUgPSBzdHJpbmcuc3Vic3RyaW5nKDEsIGJyYWNrZXRQb3MpIHx8IG51bGw7XG4gICAgICBwYXJ0cy5wb3J0ID0gc3RyaW5nLnN1YnN0cmluZyhicmFja2V0UG9zICsgMiwgcG9zKSB8fCBudWxsO1xuICAgICAgaWYgKHBhcnRzLnBvcnQgPT09ICcvJykge1xuICAgICAgICBwYXJ0cy5wb3J0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGZpcnN0Q29sb24gPSBzdHJpbmcuaW5kZXhPZignOicpO1xuICAgICAgdmFyIGZpcnN0U2xhc2ggPSBzdHJpbmcuaW5kZXhPZignLycpO1xuICAgICAgdmFyIG5leHRDb2xvbiA9IHN0cmluZy5pbmRleE9mKCc6JywgZmlyc3RDb2xvbiArIDEpO1xuICAgICAgaWYgKG5leHRDb2xvbiAhPT0gLTEgJiYgKGZpcnN0U2xhc2ggPT09IC0xIHx8IG5leHRDb2xvbiA8IGZpcnN0U2xhc2gpKSB7XG4gICAgICAgIC8vIElQdjYgaG9zdCBjb250YWlucyBtdWx0aXBsZSBjb2xvbnMgLSBidXQgbm8gcG9ydFxuICAgICAgICAvLyB0aGlzIG5vdGF0aW9uIGlzIGFjdHVhbGx5IG5vdCBhbGxvd2VkIGJ5IFJGQyAzOTg2LCBidXQgd2UncmUgYSBsaWJlcmFsIHBhcnNlclxuICAgICAgICBwYXJ0cy5ob3N0bmFtZSA9IHN0cmluZy5zdWJzdHJpbmcoMCwgcG9zKSB8fCBudWxsO1xuICAgICAgICBwYXJ0cy5wb3J0ID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHQgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcykuc3BsaXQoJzonKTtcbiAgICAgICAgcGFydHMuaG9zdG5hbWUgPSB0WzBdIHx8IG51bGw7XG4gICAgICAgIHBhcnRzLnBvcnQgPSB0WzFdIHx8IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBhcnRzLmhvc3RuYW1lICYmIHN0cmluZy5zdWJzdHJpbmcocG9zKS5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgICAgcG9zKys7XG4gICAgICBzdHJpbmcgPSAnLycgKyBzdHJpbmc7XG4gICAgfVxuXG4gICAgaWYgKHBhcnRzLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUpIHtcbiAgICAgIFVSSS5lbnN1cmVWYWxpZEhvc3RuYW1lKHBhcnRzLmhvc3RuYW1lLCBwYXJ0cy5wcm90b2NvbCk7XG4gICAgfVxuXG4gICAgaWYgKHBhcnRzLnBvcnQpIHtcbiAgICAgIFVSSS5lbnN1cmVWYWxpZFBvcnQocGFydHMucG9ydCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmluZy5zdWJzdHJpbmcocG9zKSB8fCAnLyc7XG4gIH07XG4gIFVSSS5wYXJzZUF1dGhvcml0eSA9IGZ1bmN0aW9uKHN0cmluZywgcGFydHMpIHtcbiAgICBzdHJpbmcgPSBVUkkucGFyc2VVc2VyaW5mbyhzdHJpbmcsIHBhcnRzKTtcbiAgICByZXR1cm4gVVJJLnBhcnNlSG9zdChzdHJpbmcsIHBhcnRzKTtcbiAgfTtcbiAgVVJJLnBhcnNlVXNlcmluZm8gPSBmdW5jdGlvbihzdHJpbmcsIHBhcnRzKSB7XG4gICAgLy8gZXh0cmFjdCB1c2VybmFtZTpwYXNzd29yZFxuICAgIHZhciBmaXJzdFNsYXNoID0gc3RyaW5nLmluZGV4T2YoJy8nKTtcbiAgICB2YXIgcG9zID0gc3RyaW5nLmxhc3RJbmRleE9mKCdAJywgZmlyc3RTbGFzaCA+IC0xID8gZmlyc3RTbGFzaCA6IHN0cmluZy5sZW5ndGggLSAxKTtcbiAgICB2YXIgdDtcblxuICAgIC8vIGF1dGhvcml0eUAgbXVzdCBjb21lIGJlZm9yZSAvcGF0aFxuICAgIGlmIChwb3MgPiAtMSAmJiAoZmlyc3RTbGFzaCA9PT0gLTEgfHwgcG9zIDwgZmlyc3RTbGFzaCkpIHtcbiAgICAgIHQgPSBzdHJpbmcuc3Vic3RyaW5nKDAsIHBvcykuc3BsaXQoJzonKTtcbiAgICAgIHBhcnRzLnVzZXJuYW1lID0gdFswXSA/IFVSSS5kZWNvZGUodFswXSkgOiBudWxsO1xuICAgICAgdC5zaGlmdCgpO1xuICAgICAgcGFydHMucGFzc3dvcmQgPSB0WzBdID8gVVJJLmRlY29kZSh0LmpvaW4oJzonKSkgOiBudWxsO1xuICAgICAgc3RyaW5nID0gc3RyaW5nLnN1YnN0cmluZyhwb3MgKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydHMudXNlcm5hbWUgPSBudWxsO1xuICAgICAgcGFydHMucGFzc3dvcmQgPSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG4gIFVSSS5wYXJzZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyaW5nLCBlc2NhcGVRdWVyeVNwYWNlKSB7XG4gICAgaWYgKCFzdHJpbmcpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICAvLyB0aHJvdyBvdXQgdGhlIGZ1bmt5IGJ1c2luZXNzIC0gXCI/XCJbbmFtZVwiPVwidmFsdWVcIiZcIl0rXG4gICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoLyYrL2csICcmJykucmVwbGFjZSgvXlxcPyomKnwmKyQvZywgJycpO1xuXG4gICAgaWYgKCFzdHJpbmcpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICB2YXIgaXRlbXMgPSB7fTtcbiAgICB2YXIgc3BsaXRzID0gc3RyaW5nLnNwbGl0KCcmJyk7XG4gICAgdmFyIGxlbmd0aCA9IHNwbGl0cy5sZW5ndGg7XG4gICAgdmFyIHYsIG5hbWUsIHZhbHVlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdiA9IHNwbGl0c1tpXS5zcGxpdCgnPScpO1xuICAgICAgbmFtZSA9IFVSSS5kZWNvZGVRdWVyeSh2LnNoaWZ0KCksIGVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgICAgLy8gbm8gXCI9XCIgaXMgbnVsbCBhY2NvcmRpbmcgdG8gaHR0cDovL2R2Y3MudzMub3JnL2hnL3VybC9yYXctZmlsZS90aXAvT3ZlcnZpZXcuaHRtbCNjb2xsZWN0LXVybC1wYXJhbWV0ZXJzXG4gICAgICB2YWx1ZSA9IHYubGVuZ3RoID8gVVJJLmRlY29kZVF1ZXJ5KHYuam9pbignPScpLCBlc2NhcGVRdWVyeVNwYWNlKSA6IG51bGw7XG5cbiAgICAgIGlmIChoYXNPd24uY2FsbChpdGVtcywgbmFtZSkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtc1tuYW1lXSA9PT0gJ3N0cmluZycgfHwgaXRlbXNbbmFtZV0gPT09IG51bGwpIHtcbiAgICAgICAgICBpdGVtc1tuYW1lXSA9IFtpdGVtc1tuYW1lXV07XG4gICAgICAgIH1cblxuICAgICAgICBpdGVtc1tuYW1lXS5wdXNoKHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1zW25hbWVdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW1zO1xuICB9O1xuXG4gIFVSSS5idWlsZCA9IGZ1bmN0aW9uKHBhcnRzKSB7XG4gICAgdmFyIHQgPSAnJztcblxuICAgIGlmIChwYXJ0cy5wcm90b2NvbCkge1xuICAgICAgdCArPSBwYXJ0cy5wcm90b2NvbCArICc6JztcbiAgICB9XG5cbiAgICBpZiAoIXBhcnRzLnVybiAmJiAodCB8fCBwYXJ0cy5ob3N0bmFtZSkpIHtcbiAgICAgIHQgKz0gJy8vJztcbiAgICB9XG5cbiAgICB0ICs9IChVUkkuYnVpbGRBdXRob3JpdHkocGFydHMpIHx8ICcnKTtcblxuICAgIGlmICh0eXBlb2YgcGFydHMucGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChwYXJ0cy5wYXRoLmNoYXJBdCgwKSAhPT0gJy8nICYmIHR5cGVvZiBwYXJ0cy5ob3N0bmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdCArPSAnLyc7XG4gICAgICB9XG5cbiAgICAgIHQgKz0gcGFydHMucGF0aDtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHBhcnRzLnF1ZXJ5ID09PSAnc3RyaW5nJyAmJiBwYXJ0cy5xdWVyeSkge1xuICAgICAgdCArPSAnPycgKyBwYXJ0cy5xdWVyeTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHBhcnRzLmZyYWdtZW50ID09PSAnc3RyaW5nJyAmJiBwYXJ0cy5mcmFnbWVudCkge1xuICAgICAgdCArPSAnIycgKyBwYXJ0cy5mcmFnbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG4gIH07XG4gIFVSSS5idWlsZEhvc3QgPSBmdW5jdGlvbihwYXJ0cykge1xuICAgIHZhciB0ID0gJyc7XG5cbiAgICBpZiAoIXBhcnRzLmhvc3RuYW1lKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfSBlbHNlIGlmIChVUkkuaXA2X2V4cHJlc3Npb24udGVzdChwYXJ0cy5ob3N0bmFtZSkpIHtcbiAgICAgIHQgKz0gJ1snICsgcGFydHMuaG9zdG5hbWUgKyAnXSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHQgKz0gcGFydHMuaG9zdG5hbWU7XG4gICAgfVxuXG4gICAgaWYgKHBhcnRzLnBvcnQpIHtcbiAgICAgIHQgKz0gJzonICsgcGFydHMucG9ydDtcbiAgICB9XG5cbiAgICByZXR1cm4gdDtcbiAgfTtcbiAgVVJJLmJ1aWxkQXV0aG9yaXR5ID0gZnVuY3Rpb24ocGFydHMpIHtcbiAgICByZXR1cm4gVVJJLmJ1aWxkVXNlcmluZm8ocGFydHMpICsgVVJJLmJ1aWxkSG9zdChwYXJ0cyk7XG4gIH07XG4gIFVSSS5idWlsZFVzZXJpbmZvID0gZnVuY3Rpb24ocGFydHMpIHtcbiAgICB2YXIgdCA9ICcnO1xuXG4gICAgaWYgKHBhcnRzLnVzZXJuYW1lKSB7XG4gICAgICB0ICs9IFVSSS5lbmNvZGUocGFydHMudXNlcm5hbWUpO1xuICAgIH1cblxuICAgIGlmIChwYXJ0cy5wYXNzd29yZCkge1xuICAgICAgdCArPSAnOicgKyBVUkkuZW5jb2RlKHBhcnRzLnBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICBpZiAodCkge1xuICAgICAgdCArPSAnQCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHQ7XG4gIH07XG4gIFVSSS5idWlsZFF1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCBlc2NhcGVRdWVyeVNwYWNlKSB7XG4gICAgLy8gYWNjb3JkaW5nIHRvIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODYgb3IgaHR0cDovL2xhYnMuYXBhY2hlLm9yZy93ZWJhcmNoL3VyaS9yZmMvcmZjMzk4Ni5odG1sXG4gICAgLy8gYmVpbmcgwrstLl9+ISQmJygpKissOz06QC8/wqsgJUhFWCBhbmQgYWxudW0gYXJlIGFsbG93ZWRcbiAgICAvLyB0aGUgUkZDIGV4cGxpY2l0bHkgc3RhdGVzID8vZm9vIGJlaW5nIGEgdmFsaWQgdXNlIGNhc2UsIG5vIG1lbnRpb24gb2YgcGFyYW1ldGVyIHN5bnRheCFcbiAgICAvLyBVUkkuanMgdHJlYXRzIHRoZSBxdWVyeSBzdHJpbmcgYXMgYmVpbmcgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXG4gICAgLy8gc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy1odG1sNDAvaW50ZXJhY3QvZm9ybXMuaHRtbCNmb3JtLWNvbnRlbnQtdHlwZVxuXG4gICAgdmFyIHQgPSAnJztcbiAgICB2YXIgdW5pcXVlLCBrZXksIGksIGxlbmd0aDtcbiAgICBmb3IgKGtleSBpbiBkYXRhKSB7XG4gICAgICBpZiAoaGFzT3duLmNhbGwoZGF0YSwga2V5KSAmJiBrZXkpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkoZGF0YVtrZXldKSkge1xuICAgICAgICAgIHVuaXF1ZSA9IHt9O1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGRhdGFba2V5XS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGRhdGFba2V5XVtpXSAhPT0gdW5kZWZpbmVkICYmIHVuaXF1ZVtkYXRhW2tleV1baV0gKyAnJ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB0ICs9ICcmJyArIFVSSS5idWlsZFF1ZXJ5UGFyYW1ldGVyKGtleSwgZGF0YVtrZXldW2ldLCBlc2NhcGVRdWVyeVNwYWNlKTtcbiAgICAgICAgICAgICAgaWYgKGR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHVuaXF1ZVtkYXRhW2tleV1baV0gKyAnJ10gPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRhdGFba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdCArPSAnJicgKyBVUkkuYnVpbGRRdWVyeVBhcmFtZXRlcihrZXksIGRhdGFba2V5XSwgZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdC5zdWJzdHJpbmcoMSk7XG4gIH07XG4gIFVSSS5idWlsZFF1ZXJ5UGFyYW1ldGVyID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGVzY2FwZVF1ZXJ5U3BhY2UpIHtcbiAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMtaHRtbDQwL2ludGVyYWN0L2Zvcm1zLmh0bWwjZm9ybS1jb250ZW50LXR5cGUgLS0gYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXG4gICAgLy8gZG9uJ3QgYXBwZW5kIFwiPVwiIGZvciBudWxsIHZhbHVlcywgYWNjb3JkaW5nIHRvIGh0dHA6Ly9kdmNzLnczLm9yZy9oZy91cmwvcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWwjdXJsLXBhcmFtZXRlci1zZXJpYWxpemF0aW9uXG4gICAgcmV0dXJuIFVSSS5lbmNvZGVRdWVyeShuYW1lLCBlc2NhcGVRdWVyeVNwYWNlKSArICh2YWx1ZSAhPT0gbnVsbCA/ICc9JyArIFVSSS5lbmNvZGVRdWVyeSh2YWx1ZSwgZXNjYXBlUXVlcnlTcGFjZSkgOiAnJyk7XG4gIH07XG5cbiAgVVJJLmFkZFF1ZXJ5ID0gZnVuY3Rpb24oZGF0YSwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkge1xuICAgICAgICAgIFVSSS5hZGRRdWVyeShkYXRhLCBrZXksIG5hbWVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGRhdGFbbmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkYXRhW25hbWVdID0gdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGFbbmFtZV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRhdGFbbmFtZV0gPSBbZGF0YVtuYW1lXV07XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSBbdmFsdWVdO1xuICAgICAgfVxuXG4gICAgICBkYXRhW25hbWVdID0gKGRhdGFbbmFtZV0gfHwgW10pLmNvbmNhdCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7XG4gICAgfVxuICB9O1xuXG4gIFVSSS5zZXRRdWVyeSA9IGZ1bmN0aW9uKGRhdGEsIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcbiAgICAgICAgaWYgKGhhc093bi5jYWxsKG5hbWUsIGtleSkpIHtcbiAgICAgICAgICBVUkkuc2V0UXVlcnkoZGF0YSwga2V5LCBuYW1lW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRhdGFbbmFtZV0gPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkkuc2V0UXVlcnkoKSBhY2NlcHRzIGFuIG9iamVjdCwgc3RyaW5nIGFzIHRoZSBuYW1lIHBhcmFtZXRlcicpO1xuICAgIH1cbiAgfTtcblxuICBVUkkucmVtb3ZlUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBpLCBsZW5ndGgsIGtleTtcblxuICAgIGlmIChpc0FycmF5KG5hbWUpKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBuYW1lLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGFbbmFtZVtpXV0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChnZXRUeXBlKG5hbWUpID09PSAnUmVnRXhwJykge1xuICAgICAgZm9yIChrZXkgaW4gZGF0YSkge1xuICAgICAgICBpZiAobmFtZS50ZXN0KGtleSkpIHtcbiAgICAgICAgICBkYXRhW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yIChrZXkgaW4gbmFtZSkge1xuICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwga2V5KSkge1xuICAgICAgICAgIFVSSS5yZW1vdmVRdWVyeShkYXRhLCBrZXksIG5hbWVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGdldFR5cGUodmFsdWUpID09PSAnUmVnRXhwJykge1xuICAgICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSAmJiB2YWx1ZS50ZXN0KGRhdGFbbmFtZV0pKSB7XG4gICAgICAgICAgICBkYXRhW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhW25hbWVdID0gZmlsdGVyQXJyYXlWYWx1ZXMoZGF0YVtuYW1lXSwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkYXRhW25hbWVdID09PSBTdHJpbmcodmFsdWUpICYmICghaXNBcnJheSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSAxKSkge1xuICAgICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShkYXRhW25hbWVdKSkge1xuICAgICAgICAgIGRhdGFbbmFtZV0gPSBmaWx0ZXJBcnJheVZhbHVlcyhkYXRhW25hbWVdLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGFbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5yZW1vdmVRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcsIFJlZ0V4cCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyJyk7XG4gICAgfVxuICB9O1xuICBVUkkuaGFzUXVlcnkgPSBmdW5jdGlvbihkYXRhLCBuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpIHtcbiAgICBzd2l0Y2ggKGdldFR5cGUobmFtZSkpIHtcbiAgICAgIGNhc2UgJ1N0cmluZyc6XG4gICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gaGVyZVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnUmVnRXhwJzpcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoZGF0YSwga2V5KSkge1xuICAgICAgICAgICAgaWYgKG5hbWUudGVzdChrZXkpICYmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IFVSSS5oYXNRdWVyeShkYXRhLCBrZXksIHZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjYXNlICdPYmplY3QnOlxuICAgICAgICBmb3IgKHZhciBfa2V5IGluIG5hbWUpIHtcbiAgICAgICAgICBpZiAoaGFzT3duLmNhbGwobmFtZSwgX2tleSkpIHtcbiAgICAgICAgICAgIGlmICghVVJJLmhhc1F1ZXJ5KGRhdGEsIF9rZXksIG5hbWVbX2tleV0pKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVVJJLmhhc1F1ZXJ5KCkgYWNjZXB0cyBhIHN0cmluZywgcmVndWxhciBleHByZXNzaW9uIG9yIG9iamVjdCBhcyB0aGUgbmFtZSBwYXJhbWV0ZXInKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGdldFR5cGUodmFsdWUpKSB7XG4gICAgICBjYXNlICdVbmRlZmluZWQnOlxuICAgICAgICAvLyB0cnVlIGlmIGV4aXN0cyAoYnV0IG1heSBiZSBlbXB0eSlcbiAgICAgICAgcmV0dXJuIG5hbWUgaW4gZGF0YTsgLy8gZGF0YVtuYW1lXSAhPT0gdW5kZWZpbmVkO1xuXG4gICAgICBjYXNlICdCb29sZWFuJzpcbiAgICAgICAgLy8gdHJ1ZSBpZiBleGlzdHMgYW5kIG5vbi1lbXB0eVxuICAgICAgICB2YXIgX2Jvb2x5ID0gQm9vbGVhbihpc0FycmF5KGRhdGFbbmFtZV0pID8gZGF0YVtuYW1lXS5sZW5ndGggOiBkYXRhW25hbWVdKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSBfYm9vbHk7XG5cbiAgICAgIGNhc2UgJ0Z1bmN0aW9uJzpcbiAgICAgICAgLy8gYWxsb3cgY29tcGxleCBjb21wYXJpc29uXG4gICAgICAgIHJldHVybiAhIXZhbHVlKGRhdGFbbmFtZV0sIG5hbWUsIGRhdGEpO1xuXG4gICAgICBjYXNlICdBcnJheSc6XG4gICAgICAgIGlmICghaXNBcnJheShkYXRhW25hbWVdKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvcCA9IHdpdGhpbkFycmF5ID8gYXJyYXlDb250YWlucyA6IGFycmF5c0VxdWFsO1xuICAgICAgICByZXR1cm4gb3AoZGF0YVtuYW1lXSwgdmFsdWUpO1xuXG4gICAgICBjYXNlICdSZWdFeHAnOlxuICAgICAgICBpZiAoIWlzQXJyYXkoZGF0YVtuYW1lXSkpIHtcbiAgICAgICAgICByZXR1cm4gQm9vbGVhbihkYXRhW25hbWVdICYmIGRhdGFbbmFtZV0ubWF0Y2godmFsdWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghd2l0aGluQXJyYXkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXJyYXlDb250YWlucyhkYXRhW25hbWVdLCB2YWx1ZSk7XG5cbiAgICAgIGNhc2UgJ051bWJlcic6XG4gICAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSAnU3RyaW5nJzpcbiAgICAgICAgaWYgKCFpc0FycmF5KGRhdGFbbmFtZV0pKSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGFbbmFtZV0gPT09IHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF3aXRoaW5BcnJheSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcnJheUNvbnRhaW5zKGRhdGFbbmFtZV0sIHZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVVJJLmhhc1F1ZXJ5KCkgYWNjZXB0cyB1bmRlZmluZWQsIGJvb2xlYW4sIHN0cmluZywgbnVtYmVyLCBSZWdFeHAsIEZ1bmN0aW9uIGFzIHRoZSB2YWx1ZSBwYXJhbWV0ZXInKTtcbiAgICB9XG4gIH07XG5cblxuICBVUkkuam9pblBhdGhzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGlucHV0ID0gW107XG4gICAgdmFyIHNlZ21lbnRzID0gW107XG4gICAgdmFyIG5vbkVtcHR5U2VnbWVudHMgPSAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB1cmwgPSBuZXcgVVJJKGFyZ3VtZW50c1tpXSk7XG4gICAgICBpbnB1dC5wdXNoKHVybCk7XG4gICAgICB2YXIgX3NlZ21lbnRzID0gdXJsLnNlZ21lbnQoKTtcbiAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgX3NlZ21lbnRzLmxlbmd0aDsgcysrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgX3NlZ21lbnRzW3NdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHNlZ21lbnRzLnB1c2goX3NlZ21lbnRzW3NdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfc2VnbWVudHNbc10pIHtcbiAgICAgICAgICBub25FbXB0eVNlZ21lbnRzKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhbm9uRW1wdHlTZWdtZW50cykge1xuICAgICAgcmV0dXJuIG5ldyBVUkkoJycpO1xuICAgIH1cblxuICAgIHZhciB1cmkgPSBuZXcgVVJJKCcnKS5zZWdtZW50KHNlZ21lbnRzKTtcblxuICAgIGlmIChpbnB1dFswXS5wYXRoKCkgPT09ICcnIHx8IGlucHV0WzBdLnBhdGgoKS5zbGljZSgwLCAxKSA9PT0gJy8nKSB7XG4gICAgICB1cmkucGF0aCgnLycgKyB1cmkucGF0aCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdXJpLm5vcm1hbGl6ZSgpO1xuICB9O1xuXG4gIFVSSS5jb21tb25QYXRoID0gZnVuY3Rpb24ob25lLCB0d28pIHtcbiAgICB2YXIgbGVuZ3RoID0gTWF0aC5taW4ob25lLmxlbmd0aCwgdHdvLmxlbmd0aCk7XG4gICAgdmFyIHBvcztcblxuICAgIC8vIGZpbmQgZmlyc3Qgbm9uLW1hdGNoaW5nIGNoYXJhY3RlclxuICAgIGZvciAocG9zID0gMDsgcG9zIDwgbGVuZ3RoOyBwb3MrKykge1xuICAgICAgaWYgKG9uZS5jaGFyQXQocG9zKSAhPT0gdHdvLmNoYXJBdChwb3MpKSB7XG4gICAgICAgIHBvcy0tO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zIDwgMSkge1xuICAgICAgcmV0dXJuIG9uZS5jaGFyQXQoMCkgPT09IHR3by5jaGFyQXQoMCkgJiYgb25lLmNoYXJBdCgwKSA9PT0gJy8nID8gJy8nIDogJyc7XG4gICAgfVxuXG4gICAgLy8gcmV2ZXJ0IHRvIGxhc3QgL1xuICAgIGlmIChvbmUuY2hhckF0KHBvcykgIT09ICcvJyB8fCB0d28uY2hhckF0KHBvcykgIT09ICcvJykge1xuICAgICAgcG9zID0gb25lLnN1YnN0cmluZygwLCBwb3MpLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9uZS5zdWJzdHJpbmcoMCwgcG9zICsgMSk7XG4gIH07XG5cbiAgVVJJLndpdGhpblN0cmluZyA9IGZ1bmN0aW9uKHN0cmluZywgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIHZhciBfc3RhcnQgPSBvcHRpb25zLnN0YXJ0IHx8IFVSSS5maW5kVXJpLnN0YXJ0O1xuICAgIHZhciBfZW5kID0gb3B0aW9ucy5lbmQgfHwgVVJJLmZpbmRVcmkuZW5kO1xuICAgIHZhciBfdHJpbSA9IG9wdGlvbnMudHJpbSB8fCBVUkkuZmluZFVyaS50cmltO1xuICAgIHZhciBfcGFyZW5zID0gb3B0aW9ucy5wYXJlbnMgfHwgVVJJLmZpbmRVcmkucGFyZW5zO1xuICAgIHZhciBfYXR0cmlidXRlT3BlbiA9IC9bYS16MC05LV09W1wiJ10/JC9pO1xuXG4gICAgX3N0YXJ0Lmxhc3RJbmRleCA9IDA7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIHZhciBtYXRjaCA9IF9zdGFydC5leGVjKHN0cmluZyk7XG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnQgPSBtYXRjaC5pbmRleDtcbiAgICAgIGlmIChvcHRpb25zLmlnbm9yZUh0bWwpIHtcbiAgICAgICAgLy8gYXR0cmlidXQoZT1bXCInXT8kKVxuICAgICAgICB2YXIgYXR0cmlidXRlT3BlbiA9IHN0cmluZy5zbGljZShNYXRoLm1heChzdGFydCAtIDMsIDApLCBzdGFydCk7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVPcGVuICYmIF9hdHRyaWJ1dGVPcGVuLnRlc3QoYXR0cmlidXRlT3BlbikpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgZW5kID0gc3RhcnQgKyBzdHJpbmcuc2xpY2Uoc3RhcnQpLnNlYXJjaChfZW5kKTtcbiAgICAgIHZhciBzbGljZSA9IHN0cmluZy5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgIC8vIG1ha2Ugc3VyZSB3ZSBpbmNsdWRlIHdlbGwgYmFsYW5jZWQgcGFyZW5zXG4gICAgICB2YXIgcGFyZW5zRW5kID0gLTE7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgcGFyZW5zTWF0Y2ggPSBfcGFyZW5zLmV4ZWMoc2xpY2UpO1xuICAgICAgICBpZiAoIXBhcmVuc01hdGNoKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFyZW5zTWF0Y2hFbmQgPSBwYXJlbnNNYXRjaC5pbmRleCArIHBhcmVuc01hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgcGFyZW5zRW5kID0gTWF0aC5tYXgocGFyZW5zRW5kLCBwYXJlbnNNYXRjaEVuZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJlbnNFbmQgPiAtMSkge1xuICAgICAgICBzbGljZSA9IHNsaWNlLnNsaWNlKDAsIHBhcmVuc0VuZCkgKyBzbGljZS5zbGljZShwYXJlbnNFbmQpLnJlcGxhY2UoX3RyaW0sICcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWNlID0gc2xpY2UucmVwbGFjZShfdHJpbSwgJycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2xpY2UubGVuZ3RoIDw9IG1hdGNoWzBdLmxlbmd0aCkge1xuICAgICAgICAvLyB0aGUgZXh0cmFjdCBvbmx5IGNvbnRhaW5zIHRoZSBzdGFydGluZyBtYXJrZXIgb2YgYSBVUkksXG4gICAgICAgIC8vIGUuZy4gXCJ3d3dcIiBvciBcImh0dHA6Ly9cIlxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuaWdub3JlICYmIG9wdGlvbnMuaWdub3JlLnRlc3Qoc2xpY2UpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBlbmQgPSBzdGFydCArIHNsaWNlLmxlbmd0aDtcbiAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhzbGljZSwgc3RhcnQsIGVuZCwgc3RyaW5nKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBfc3RhcnQubGFzdEluZGV4ID0gZW5kO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0gU3RyaW5nKHJlc3VsdCk7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcuc2xpY2UoMCwgc3RhcnQpICsgcmVzdWx0ICsgc3RyaW5nLnNsaWNlKGVuZCk7XG4gICAgICBfc3RhcnQubGFzdEluZGV4ID0gc3RhcnQgKyByZXN1bHQubGVuZ3RoO1xuICAgIH1cblxuICAgIF9zdGFydC5sYXN0SW5kZXggPSAwO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH07XG5cbiAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUgPSBmdW5jdGlvbih2LCBwcm90b2NvbCkge1xuICAgIC8vIFRoZW9yZXRpY2FsbHkgVVJJcyBhbGxvdyBwZXJjZW50LWVuY29kaW5nIGluIEhvc3RuYW1lcyAoYWNjb3JkaW5nIHRvIFJGQyAzOTg2KVxuICAgIC8vIHRoZXkgYXJlIG5vdCBwYXJ0IG9mIEROUyBhbmQgdGhlcmVmb3JlIGlnbm9yZWQgYnkgVVJJLmpzXG5cbiAgICB2YXIgaGFzSG9zdG5hbWUgPSAhIXY7IC8vIG5vdCBudWxsIGFuZCBub3QgYW4gZW1wdHkgc3RyaW5nXG4gICAgdmFyIGhhc1Byb3RvY29sID0gISFwcm90b2NvbDtcbiAgICB2YXIgcmVqZWN0RW1wdHlIb3N0bmFtZSA9IGZhbHNlO1xuXG4gICAgaWYgKGhhc1Byb3RvY29sKSB7XG4gICAgICByZWplY3RFbXB0eUhvc3RuYW1lID0gYXJyYXlDb250YWlucyhVUkkuaG9zdFByb3RvY29scywgcHJvdG9jb2wpO1xuICAgIH1cblxuICAgIGlmIChyZWplY3RFbXB0eUhvc3RuYW1lICYmICFoYXNIb3N0bmFtZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgY2Fubm90IGJlIGVtcHR5LCBpZiBwcm90b2NvbCBpcyAnICsgcHJvdG9jb2wpO1xuICAgIH0gZWxzZSBpZiAodiAmJiB2Lm1hdGNoKFVSSS5pbnZhbGlkX2hvc3RuYW1lX2NoYXJhY3RlcnMpKSB7XG4gICAgICAvLyB0ZXN0IHB1bnljb2RlXG4gICAgICBpZiAoIXB1bnljb2RlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLTpfXSBhbmQgUHVueWNvZGUuanMgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgICAgfVxuICAgICAgaWYgKHB1bnljb2RlLnRvQVNDSUkodikubWF0Y2goVVJJLmludmFsaWRfaG9zdG5hbWVfY2hhcmFjdGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSG9zdG5hbWUgXCInICsgdiArICdcIiBjb250YWlucyBjaGFyYWN0ZXJzIG90aGVyIHRoYW4gW0EtWjAtOS4tOl9dJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFVSSS5lbnN1cmVWYWxpZFBvcnQgPSBmdW5jdGlvbiAodikge1xuICAgIGlmICghdikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBwb3J0ID0gTnVtYmVyKHYpO1xuICAgIGlmIChpc0ludGVnZXIocG9ydCkgJiYgKHBvcnQgPiAwKSAmJiAocG9ydCA8IDY1NTM2KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1BvcnQgXCInICsgdiArICdcIiBpcyBub3QgYSB2YWxpZCBwb3J0Jyk7XG4gIH07XG5cbiAgLy8gbm9Db25mbGljdFxuICBVUkkubm9Db25mbGljdCA9IGZ1bmN0aW9uKHJlbW92ZUFsbCkge1xuICAgIGlmIChyZW1vdmVBbGwpIHtcbiAgICAgIHZhciB1bmNvbmZsaWN0ZWQgPSB7XG4gICAgICAgIFVSSTogdGhpcy5ub0NvbmZsaWN0KClcbiAgICAgIH07XG5cbiAgICAgIGlmIChyb290LlVSSVRlbXBsYXRlICYmIHR5cGVvZiByb290LlVSSVRlbXBsYXRlLm5vQ29uZmxpY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdW5jb25mbGljdGVkLlVSSVRlbXBsYXRlID0gcm9vdC5VUklUZW1wbGF0ZS5ub0NvbmZsaWN0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyb290LklQdjYgJiYgdHlwZW9mIHJvb3QuSVB2Ni5ub0NvbmZsaWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHVuY29uZmxpY3RlZC5JUHY2ID0gcm9vdC5JUHY2Lm5vQ29uZmxpY3QoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvb3QuU2Vjb25kTGV2ZWxEb21haW5zICYmIHR5cGVvZiByb290LlNlY29uZExldmVsRG9tYWlucy5ub0NvbmZsaWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHVuY29uZmxpY3RlZC5TZWNvbmRMZXZlbERvbWFpbnMgPSByb290LlNlY29uZExldmVsRG9tYWlucy5ub0NvbmZsaWN0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmNvbmZsaWN0ZWQ7XG4gICAgfSBlbHNlIGlmIChyb290LlVSSSA9PT0gdGhpcykge1xuICAgICAgcm9vdC5VUkkgPSBfVVJJO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHAuYnVpbGQgPSBmdW5jdGlvbihkZWZlckJ1aWxkKSB7XG4gICAgaWYgKGRlZmVyQnVpbGQgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuX2RlZmVycmVkX2J1aWxkID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGRlZmVyQnVpbGQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9kZWZlcnJlZF9idWlsZCkge1xuICAgICAgdGhpcy5fc3RyaW5nID0gVVJJLmJ1aWxkKHRoaXMuX3BhcnRzKTtcbiAgICAgIHRoaXMuX2RlZmVycmVkX2J1aWxkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgVVJJKHRoaXMpO1xuICB9O1xuXG4gIHAudmFsdWVPZiA9IHAudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZChmYWxzZSkuX3N0cmluZztcbiAgfTtcblxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoX3BhcnQpe1xuICAgIHJldHVybiBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFydHNbX3BhcnRdIHx8ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcGFydHNbX3BhcnRdID0gdiB8fCBudWxsO1xuICAgICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBnZW5lcmF0ZVByZWZpeEFjY2Vzc29yKF9wYXJ0LCBfa2V5KXtcbiAgICByZXR1cm4gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzW19wYXJ0XSB8fCAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2ICE9PSBudWxsKSB7XG4gICAgICAgICAgdiA9IHYgKyAnJztcbiAgICAgICAgICBpZiAodi5jaGFyQXQoMCkgPT09IF9rZXkpIHtcbiAgICAgICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wYXJ0c1tfcGFydF0gPSB2O1xuICAgICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwLnByb3RvY29sID0gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcigncHJvdG9jb2wnKTtcbiAgcC51c2VybmFtZSA9IGdlbmVyYXRlU2ltcGxlQWNjZXNzb3IoJ3VzZXJuYW1lJyk7XG4gIHAucGFzc3dvcmQgPSBnZW5lcmF0ZVNpbXBsZUFjY2Vzc29yKCdwYXNzd29yZCcpO1xuICBwLmhvc3RuYW1lID0gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcignaG9zdG5hbWUnKTtcbiAgcC5wb3J0ID0gZ2VuZXJhdGVTaW1wbGVBY2Nlc3NvcigncG9ydCcpO1xuICBwLnF1ZXJ5ID0gZ2VuZXJhdGVQcmVmaXhBY2Nlc3NvcigncXVlcnknLCAnPycpO1xuICBwLmZyYWdtZW50ID0gZ2VuZXJhdGVQcmVmaXhBY2Nlc3NvcignZnJhZ21lbnQnLCAnIycpO1xuXG4gIHAuc2VhcmNoID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICB2YXIgdCA9IHRoaXMucXVlcnkodiwgYnVpbGQpO1xuICAgIHJldHVybiB0eXBlb2YgdCA9PT0gJ3N0cmluZycgJiYgdC5sZW5ndGggPyAoJz8nICsgdCkgOiB0O1xuICB9O1xuICBwLmhhc2ggPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIHZhciB0ID0gdGhpcy5mcmFnbWVudCh2LCBidWlsZCk7XG4gICAgcmV0dXJuIHR5cGVvZiB0ID09PSAnc3RyaW5nJyAmJiB0Lmxlbmd0aCA/ICgnIycgKyB0KSA6IHQ7XG4gIH07XG5cbiAgcC5wYXRobmFtZSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSB0cnVlKSB7XG4gICAgICB2YXIgcmVzID0gdGhpcy5fcGFydHMucGF0aCB8fCAodGhpcy5fcGFydHMuaG9zdG5hbWUgPyAnLycgOiAnJyk7XG4gICAgICByZXR1cm4gdiA/ICh0aGlzLl9wYXJ0cy51cm4gPyBVUkkuZGVjb2RlVXJuUGF0aCA6IFVSSS5kZWNvZGVQYXRoKShyZXMpIDogcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB2ID8gVVJJLnJlY29kZVVyblBhdGgodikgOiAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB2ID8gVVJJLnJlY29kZVBhdGgodikgOiAnLyc7XG4gICAgICB9XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAucGF0aCA9IHAucGF0aG5hbWU7XG4gIHAuaHJlZiA9IGZ1bmN0aW9uKGhyZWYsIGJ1aWxkKSB7XG4gICAgdmFyIGtleTtcblxuICAgIGlmIChocmVmID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fc3RyaW5nID0gJyc7XG4gICAgdGhpcy5fcGFydHMgPSBVUkkuX3BhcnRzKCk7XG5cbiAgICB2YXIgX1VSSSA9IGhyZWYgaW5zdGFuY2VvZiBVUkk7XG4gICAgdmFyIF9vYmplY3QgPSB0eXBlb2YgaHJlZiA9PT0gJ29iamVjdCcgJiYgKGhyZWYuaG9zdG5hbWUgfHwgaHJlZi5wYXRoIHx8IGhyZWYucGF0aG5hbWUpO1xuICAgIGlmIChocmVmLm5vZGVOYW1lKSB7XG4gICAgICB2YXIgYXR0cmlidXRlID0gVVJJLmdldERvbUF0dHJpYnV0ZShocmVmKTtcbiAgICAgIGhyZWYgPSBocmVmW2F0dHJpYnV0ZV0gfHwgJyc7XG4gICAgICBfb2JqZWN0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gd2luZG93LmxvY2F0aW9uIGlzIHJlcG9ydGVkIHRvIGJlIGFuIG9iamVjdCwgYnV0IGl0J3Mgbm90IHRoZSBzb3J0XG4gICAgLy8gb2Ygb2JqZWN0IHdlJ3JlIGxvb2tpbmcgZm9yOlxuICAgIC8vICogbG9jYXRpb24ucHJvdG9jb2wgZW5kcyB3aXRoIGEgY29sb25cbiAgICAvLyAqIGxvY2F0aW9uLnF1ZXJ5ICE9IG9iamVjdC5zZWFyY2hcbiAgICAvLyAqIGxvY2F0aW9uLmhhc2ggIT0gb2JqZWN0LmZyYWdtZW50XG4gICAgLy8gc2ltcGx5IHNlcmlhbGl6aW5nIHRoZSB1bmtub3duIG9iamVjdCBzaG91bGQgZG8gdGhlIHRyaWNrXG4gICAgLy8gKGZvciBsb2NhdGlvbiwgbm90IGZvciBldmVyeXRoaW5nLi4uKVxuICAgIGlmICghX1VSSSAmJiBfb2JqZWN0ICYmIGhyZWYucGF0aG5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaHJlZiA9IGhyZWYudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGhyZWYgPT09ICdzdHJpbmcnIHx8IGhyZWYgaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgIHRoaXMuX3BhcnRzID0gVVJJLnBhcnNlKFN0cmluZyhocmVmKSwgdGhpcy5fcGFydHMpO1xuICAgIH0gZWxzZSBpZiAoX1VSSSB8fCBfb2JqZWN0KSB7XG4gICAgICB2YXIgc3JjID0gX1VSSSA/IGhyZWYuX3BhcnRzIDogaHJlZjtcbiAgICAgIGZvciAoa2V5IGluIHNyYykge1xuICAgICAgICBpZiAoa2V5ID09PSAncXVlcnknKSB7IGNvbnRpbnVlOyB9XG4gICAgICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLl9wYXJ0cywga2V5KSkge1xuICAgICAgICAgIHRoaXMuX3BhcnRzW2tleV0gPSBzcmNba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNyYy5xdWVyeSkge1xuICAgICAgICB0aGlzLnF1ZXJ5KHNyYy5xdWVyeSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGlucHV0Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIGlkZW50aWZpY2F0aW9uIGFjY2Vzc29yc1xuICBwLmlzID0gZnVuY3Rpb24od2hhdCkge1xuICAgIHZhciBpcCA9IGZhbHNlO1xuICAgIHZhciBpcDQgPSBmYWxzZTtcbiAgICB2YXIgaXA2ID0gZmFsc2U7XG4gICAgdmFyIG5hbWUgPSBmYWxzZTtcbiAgICB2YXIgc2xkID0gZmFsc2U7XG4gICAgdmFyIGlkbiA9IGZhbHNlO1xuICAgIHZhciBwdW55Y29kZSA9IGZhbHNlO1xuICAgIHZhciByZWxhdGl2ZSA9ICF0aGlzLl9wYXJ0cy51cm47XG5cbiAgICBpZiAodGhpcy5fcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgIHJlbGF0aXZlID0gZmFsc2U7XG4gICAgICBpcDQgPSBVUkkuaXA0X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICBpcDYgPSBVUkkuaXA2X2V4cHJlc3Npb24udGVzdCh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICBpcCA9IGlwNCB8fCBpcDY7XG4gICAgICBuYW1lID0gIWlwO1xuICAgICAgc2xkID0gbmFtZSAmJiBTTEQgJiYgU0xELmhhcyh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICBpZG4gPSBuYW1lICYmIFVSSS5pZG5fZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICAgIHB1bnljb2RlID0gbmFtZSAmJiBVUkkucHVueWNvZGVfZXhwcmVzc2lvbi50ZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHdoYXQudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAncmVsYXRpdmUnOlxuICAgICAgICByZXR1cm4gcmVsYXRpdmU7XG5cbiAgICAgIGNhc2UgJ2Fic29sdXRlJzpcbiAgICAgICAgcmV0dXJuICFyZWxhdGl2ZTtcblxuICAgICAgLy8gaG9zdG5hbWUgaWRlbnRpZmljYXRpb25cbiAgICAgIGNhc2UgJ2RvbWFpbic6XG4gICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgcmV0dXJuIG5hbWU7XG5cbiAgICAgIGNhc2UgJ3NsZCc6XG4gICAgICAgIHJldHVybiBzbGQ7XG5cbiAgICAgIGNhc2UgJ2lwJzpcbiAgICAgICAgcmV0dXJuIGlwO1xuXG4gICAgICBjYXNlICdpcDQnOlxuICAgICAgY2FzZSAnaXB2NCc6XG4gICAgICBjYXNlICdpbmV0NCc6XG4gICAgICAgIHJldHVybiBpcDQ7XG5cbiAgICAgIGNhc2UgJ2lwNic6XG4gICAgICBjYXNlICdpcHY2JzpcbiAgICAgIGNhc2UgJ2luZXQ2JzpcbiAgICAgICAgcmV0dXJuIGlwNjtcblxuICAgICAgY2FzZSAnaWRuJzpcbiAgICAgICAgcmV0dXJuIGlkbjtcblxuICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgcmV0dXJuICF0aGlzLl9wYXJ0cy51cm47XG5cbiAgICAgIGNhc2UgJ3Vybic6XG4gICAgICAgIHJldHVybiAhIXRoaXMuX3BhcnRzLnVybjtcblxuICAgICAgY2FzZSAncHVueWNvZGUnOlxuICAgICAgICByZXR1cm4gcHVueWNvZGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gY29tcG9uZW50IHNwZWNpZmljIGlucHV0IHZhbGlkYXRpb25cbiAgdmFyIF9wcm90b2NvbCA9IHAucHJvdG9jb2w7XG4gIHZhciBfcG9ydCA9IHAucG9ydDtcbiAgdmFyIF9ob3N0bmFtZSA9IHAuaG9zdG5hbWU7XG5cbiAgcC5wcm90b2NvbCA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHYpIHtcbiAgICAgIC8vIGFjY2VwdCB0cmFpbGluZyA6Ly9cbiAgICAgIHYgPSB2LnJlcGxhY2UoLzooXFwvXFwvKT8kLywgJycpO1xuXG4gICAgICBpZiAoIXYubWF0Y2goVVJJLnByb3RvY29sX2V4cHJlc3Npb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb3RvY29sIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuKy1dIG9yIGRvZXNuXFwndCBzdGFydCB3aXRoIFtBLVpdJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF9wcm90b2NvbC5jYWxsKHRoaXMsIHYsIGJ1aWxkKTtcbiAgfTtcbiAgcC5zY2hlbWUgPSBwLnByb3RvY29sO1xuICBwLnBvcnQgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHYgPT09IDApIHtcbiAgICAgICAgdiA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh2KSB7XG4gICAgICAgIHYgKz0gJyc7XG4gICAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJzonKSB7XG4gICAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgVVJJLmVuc3VyZVZhbGlkUG9ydCh2KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIF9wb3J0LmNhbGwodGhpcywgdiwgYnVpbGQpO1xuICB9O1xuICBwLmhvc3RuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciB4ID0geyBwcmV2ZW50SW52YWxpZEhvc3RuYW1lOiB0aGlzLl9wYXJ0cy5wcmV2ZW50SW52YWxpZEhvc3RuYW1lIH07XG4gICAgICB2YXIgcmVzID0gVVJJLnBhcnNlSG9zdCh2LCB4KTtcbiAgICAgIGlmIChyZXMgIT09ICcvJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdIb3N0bmFtZSBcIicgKyB2ICsgJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05Li1dJyk7XG4gICAgICB9XG5cbiAgICAgIHYgPSB4Lmhvc3RuYW1lO1xuICAgICAgaWYgKHRoaXMuX3BhcnRzLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUpIHtcbiAgICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodiwgdGhpcy5fcGFydHMucHJvdG9jb2wpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfaG9zdG5hbWUuY2FsbCh0aGlzLCB2LCBidWlsZCk7XG4gIH07XG5cbiAgLy8gY29tcG91bmQgYWNjZXNzb3JzXG4gIHAub3JpZ2luID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2woKTtcbiAgICAgIHZhciBhdXRob3JpdHkgPSB0aGlzLmF1dGhvcml0eSgpO1xuICAgICAgaWYgKCFhdXRob3JpdHkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKHByb3RvY29sID8gcHJvdG9jb2wgKyAnOi8vJyA6ICcnKSArIHRoaXMuYXV0aG9yaXR5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBvcmlnaW4gPSBVUkkodik7XG4gICAgICB0aGlzXG4gICAgICAgIC5wcm90b2NvbChvcmlnaW4ucHJvdG9jb2woKSlcbiAgICAgICAgLmF1dGhvcml0eShvcmlnaW4uYXV0aG9yaXR5KCkpXG4gICAgICAgIC5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLmhvc3QgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHJldHVybiB2ID09PSB1bmRlZmluZWQgPyAnJyA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gVVJJLmJ1aWxkSG9zdCh0aGlzLl9wYXJ0cykgOiAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJlcyA9IFVSSS5wYXJzZUhvc3QodiwgdGhpcy5fcGFydHMpO1xuICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLmF1dGhvcml0eSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcztcbiAgICB9XG5cbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUgPyBVUkkuYnVpbGRBdXRob3JpdHkodGhpcy5fcGFydHMpIDogJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByZXMgPSBVUkkucGFyc2VBdXRob3JpdHkodiwgdGhpcy5fcGFydHMpO1xuICAgICAgaWYgKHJlcyAhPT0gJy8nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hvc3RuYW1lIFwiJyArIHYgKyAnXCIgY29udGFpbnMgY2hhcmFjdGVycyBvdGhlciB0aGFuIFtBLVowLTkuLV0nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLnVzZXJpbmZvID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciB0ID0gVVJJLmJ1aWxkVXNlcmluZm8odGhpcy5fcGFydHMpO1xuICAgICAgcmV0dXJuIHQgPyB0LnN1YnN0cmluZygwLCB0Lmxlbmd0aCAtMSkgOiB0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodlt2Lmxlbmd0aC0xXSAhPT0gJ0AnKSB7XG4gICAgICAgIHYgKz0gJ0AnO1xuICAgICAgfVxuXG4gICAgICBVUkkucGFyc2VVc2VyaW5mbyh2LCB0aGlzLl9wYXJ0cyk7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAucmVzb3VyY2UgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIHZhciBwYXJ0cztcblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhdGgoKSArIHRoaXMuc2VhcmNoKCkgKyB0aGlzLmhhc2goKTtcbiAgICB9XG5cbiAgICBwYXJ0cyA9IFVSSS5wYXJzZSh2KTtcbiAgICB0aGlzLl9wYXJ0cy5wYXRoID0gcGFydHMucGF0aDtcbiAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IHBhcnRzLnF1ZXJ5O1xuICAgIHRoaXMuX3BhcnRzLmZyYWdtZW50ID0gcGFydHMuZnJhZ21lbnQ7XG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIGZyYWN0aW9uIGFjY2Vzc29yc1xuICBwLnN1YmRvbWFpbiA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcztcbiAgICB9XG5cbiAgICAvLyBjb252ZW5pZW5jZSwgcmV0dXJuIFwid3d3XCIgZnJvbSBcInd3dy5leGFtcGxlLm9yZ1wiXG4gICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cblxuICAgICAgLy8gZ3JhYiBkb21haW4gYW5kIGFkZCBhbm90aGVyIHNlZ21lbnRcbiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sZW5ndGggLSB0aGlzLmRvbWFpbigpLmxlbmd0aCAtIDE7XG4gICAgICByZXR1cm4gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGVuZCkgfHwgJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGVuZ3RoIC0gdGhpcy5kb21haW4oKS5sZW5ndGg7XG4gICAgICB2YXIgc3ViID0gdGhpcy5fcGFydHMuaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGUpO1xuICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKCdeJyArIGVzY2FwZVJlZ0V4KHN1YikpO1xuXG4gICAgICBpZiAodiAmJiB2LmNoYXJBdCh2Lmxlbmd0aCAtIDEpICE9PSAnLicpIHtcbiAgICAgICAgdiArPSAnLic7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmluZGV4T2YoJzonKSAhPT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRG9tYWlucyBjYW5ub3QgY29udGFpbiBjb2xvbnMnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHYpIHtcbiAgICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodiwgdGhpcy5fcGFydHMucHJvdG9jb2wpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9wYXJ0cy5ob3N0bmFtZSA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnJlcGxhY2UocmVwbGFjZSwgdik7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAuZG9tYWluID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBidWlsZCA9IHY7XG4gICAgICB2ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIGNvbnZlbmllbmNlLCByZXR1cm4gXCJleGFtcGxlLm9yZ1wiIGZyb20gXCJ3d3cuZXhhbXBsZS5vcmdcIlxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIGhvc3RuYW1lIGNvbnNpc3RzIG9mIDEgb3IgMiBzZWdtZW50cywgaXQgbXVzdCBiZSB0aGUgZG9tYWluXG4gICAgICB2YXIgdCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLm1hdGNoKC9cXC4vZyk7XG4gICAgICBpZiAodCAmJiB0Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzLmhvc3RuYW1lO1xuICAgICAgfVxuXG4gICAgICAvLyBncmFiIHRsZCBhbmQgYWRkIGFub3RoZXIgc2VnbWVudFxuICAgICAgdmFyIGVuZCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLmxlbmd0aCAtIHRoaXMudGxkKGJ1aWxkKS5sZW5ndGggLSAxO1xuICAgICAgZW5kID0gdGhpcy5fcGFydHMuaG9zdG5hbWUubGFzdEluZGV4T2YoJy4nLCBlbmQgLTEpICsgMTtcbiAgICAgIHJldHVybiB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5zdWJzdHJpbmcoZW5kKSB8fCAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF2KSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Nhbm5vdCBzZXQgZG9tYWluIGVtcHR5Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LmluZGV4T2YoJzonKSAhPT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRG9tYWlucyBjYW5ub3QgY29udGFpbiBjb2xvbnMnKTtcbiAgICAgIH1cblxuICAgICAgVVJJLmVuc3VyZVZhbGlkSG9zdG5hbWUodiwgdGhpcy5fcGFydHMucHJvdG9jb2wpO1xuXG4gICAgICBpZiAoIXRoaXMuX3BhcnRzLmhvc3RuYW1lIHx8IHRoaXMuaXMoJ0lQJykpIHtcbiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB2O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHRoaXMuZG9tYWluKCkpICsgJyQnKTtcbiAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAudGxkID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBidWlsZCA9IHY7XG4gICAgICB2ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIHJldHVybiBcIm9yZ1wiIGZyb20gXCJ3d3cuZXhhbXBsZS5vcmdcIlxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMuaG9zdG5hbWUgfHwgdGhpcy5pcygnSVAnKSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHZhciBwb3MgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5sYXN0SW5kZXhPZignLicpO1xuICAgICAgdmFyIHRsZCA9IHRoaXMuX3BhcnRzLmhvc3RuYW1lLnN1YnN0cmluZyhwb3MgKyAxKTtcblxuICAgICAgaWYgKGJ1aWxkICE9PSB0cnVlICYmIFNMRCAmJiBTTEQubGlzdFt0bGQudG9Mb3dlckNhc2UoKV0pIHtcbiAgICAgICAgcmV0dXJuIFNMRC5nZXQodGhpcy5fcGFydHMuaG9zdG5hbWUpIHx8IHRsZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRsZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJlcGxhY2U7XG5cbiAgICAgIGlmICghdikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjYW5ub3Qgc2V0IFRMRCBlbXB0eScpO1xuICAgICAgfSBlbHNlIGlmICh2Lm1hdGNoKC9bXmEtekEtWjAtOS1dLykpIHtcbiAgICAgICAgaWYgKFNMRCAmJiBTTEQuaXModikpIHtcbiAgICAgICAgICByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCh0aGlzLnRsZCgpKSArICckJyk7XG4gICAgICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RMRCBcIicgKyB2ICsgJ1wiIGNvbnRhaW5zIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiBbQS1aMC05XScpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9wYXJ0cy5ob3N0bmFtZSB8fCB0aGlzLmlzKCdJUCcpKSB7XG4gICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcignY2Fubm90IHNldCBUTEQgb24gbm9uLWRvbWFpbiBob3N0Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCh0aGlzLnRsZCgpKSArICckJyk7XG4gICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gdGhpcy5fcGFydHMuaG9zdG5hbWUucmVwbGFjZShyZXBsYWNlLCB2KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLmRpcmVjdG9yeSA9IGZ1bmN0aW9uKHYsIGJ1aWxkKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcztcbiAgICB9XG5cbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IHRydWUpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMucGF0aCAmJiAhdGhpcy5fcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcGFydHMucGF0aCA9PT0gJy8nKSB7XG4gICAgICAgIHJldHVybiAnLyc7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbmQgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGggLSAxO1xuICAgICAgdmFyIHJlcyA9IHRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKDAsIGVuZCkgfHwgKHRoaXMuX3BhcnRzLmhvc3RuYW1lID8gJy8nIDogJycpO1xuXG4gICAgICByZXR1cm4gdiA/IFVSSS5kZWNvZGVQYXRoKHJlcykgOiByZXM7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGUgPSB0aGlzLl9wYXJ0cy5wYXRoLmxlbmd0aCAtIHRoaXMuZmlsZW5hbWUoKS5sZW5ndGg7XG4gICAgICB2YXIgZGlyZWN0b3J5ID0gdGhpcy5fcGFydHMucGF0aC5zdWJzdHJpbmcoMCwgZSk7XG4gICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoJ14nICsgZXNjYXBlUmVnRXgoZGlyZWN0b3J5KSk7XG5cbiAgICAgIC8vIGZ1bGx5IHF1YWxpZmllciBkaXJlY3RvcmllcyBiZWdpbiB3aXRoIGEgc2xhc2hcbiAgICAgIGlmICghdGhpcy5pcygncmVsYXRpdmUnKSkge1xuICAgICAgICBpZiAoIXYpIHtcbiAgICAgICAgICB2ID0gJy8nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHYuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICB2ID0gJy8nICsgdjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBkaXJlY3RvcmllcyBhbHdheXMgZW5kIHdpdGggYSBzbGFzaFxuICAgICAgaWYgKHYgJiYgdi5jaGFyQXQodi5sZW5ndGggLSAxKSAhPT0gJy8nKSB7XG4gICAgICAgIHYgKz0gJy8nO1xuICAgICAgfVxuXG4gICAgICB2ID0gVVJJLnJlY29kZVBhdGgodik7XG4gICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuICBwLmZpbGVuYW1lID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICghdGhpcy5fcGFydHMucGF0aCB8fCB0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICB2YXIgcG9zID0gdGhpcy5fcGFydHMucGF0aC5sYXN0SW5kZXhPZignLycpO1xuICAgICAgdmFyIHJlcyA9IHRoaXMuX3BhcnRzLnBhdGguc3Vic3RyaW5nKHBvcysxKTtcblxuICAgICAgcmV0dXJuIHYgPyBVUkkuZGVjb2RlUGF0aFNlZ21lbnQocmVzKSA6IHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG11dGF0ZWREaXJlY3RvcnkgPSBmYWxzZTtcblxuICAgICAgaWYgKHYuY2hhckF0KDApID09PSAnLycpIHtcbiAgICAgICAgdiA9IHYuc3Vic3RyaW5nKDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAodi5tYXRjaCgvXFwuP1xcLy8pKSB7XG4gICAgICAgIG11dGF0ZWREaXJlY3RvcnkgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmVnRXgodGhpcy5maWxlbmFtZSgpKSArICckJyk7XG4gICAgICB2ID0gVVJJLnJlY29kZVBhdGgodik7XG4gICAgICB0aGlzLl9wYXJ0cy5wYXRoID0gdGhpcy5fcGFydHMucGF0aC5yZXBsYWNlKHJlcGxhY2UsIHYpO1xuXG4gICAgICBpZiAobXV0YXRlZERpcmVjdG9yeSkge1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZVBhdGgoYnVpbGQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG4gIHAuc3VmZml4ID0gZnVuY3Rpb24odiwgYnVpbGQpIHtcbiAgICBpZiAodGhpcy5fcGFydHMudXJuKSB7XG4gICAgICByZXR1cm4gdiA9PT0gdW5kZWZpbmVkID8gJycgOiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKCF0aGlzLl9wYXJ0cy5wYXRoIHx8IHRoaXMuX3BhcnRzLnBhdGggPT09ICcvJykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHZhciBmaWxlbmFtZSA9IHRoaXMuZmlsZW5hbWUoKTtcbiAgICAgIHZhciBwb3MgPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpO1xuICAgICAgdmFyIHMsIHJlcztcblxuICAgICAgaWYgKHBvcyA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICAvLyBzdWZmaXggbWF5IG9ubHkgY29udGFpbiBhbG51bSBjaGFyYWN0ZXJzICh5dXAsIEkgbWFkZSB0aGlzIHVwLilcbiAgICAgIHMgPSBmaWxlbmFtZS5zdWJzdHJpbmcocG9zKzEpO1xuICAgICAgcmVzID0gKC9eW2EtejAtOSVdKyQvaSkudGVzdChzKSA/IHMgOiAnJztcbiAgICAgIHJldHVybiB2ID8gVVJJLmRlY29kZVBhdGhTZWdtZW50KHJlcykgOiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh2LmNoYXJBdCgwKSA9PT0gJy4nKSB7XG4gICAgICAgIHYgPSB2LnN1YnN0cmluZygxKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN1ZmZpeCA9IHRoaXMuc3VmZml4KCk7XG4gICAgICB2YXIgcmVwbGFjZTtcblxuICAgICAgaWYgKCFzdWZmaXgpIHtcbiAgICAgICAgaWYgKCF2KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wYXJ0cy5wYXRoICs9ICcuJyArIFVSSS5yZWNvZGVQYXRoKHYpO1xuICAgICAgfSBlbHNlIGlmICghdikge1xuICAgICAgICByZXBsYWNlID0gbmV3IFJlZ0V4cChlc2NhcGVSZWdFeCgnLicgKyBzdWZmaXgpICsgJyQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcGxhY2UgPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4KHN1ZmZpeCkgKyAnJCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICB2ID0gVVJJLnJlY29kZVBhdGgodik7XG4gICAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSB0aGlzLl9wYXJ0cy5wYXRoLnJlcGxhY2UocmVwbGFjZSwgdik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcbiAgcC5zZWdtZW50ID0gZnVuY3Rpb24oc2VnbWVudCwgdiwgYnVpbGQpIHtcbiAgICB2YXIgc2VwYXJhdG9yID0gdGhpcy5fcGFydHMudXJuID8gJzonIDogJy8nO1xuICAgIHZhciBwYXRoID0gdGhpcy5wYXRoKCk7XG4gICAgdmFyIGFic29sdXRlID0gcGF0aC5zdWJzdHJpbmcoMCwgMSkgPT09ICcvJztcbiAgICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KHNlcGFyYXRvcik7XG5cbiAgICBpZiAoc2VnbWVudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzZWdtZW50ICE9PSAnbnVtYmVyJykge1xuICAgICAgYnVpbGQgPSB2O1xuICAgICAgdiA9IHNlZ21lbnQ7XG4gICAgICBzZWdtZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHNlZ21lbnQgIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCBzZWdtZW50IFwiJyArIHNlZ21lbnQgKyAnXCIsIG11c3QgYmUgMC1iYXNlZCBpbnRlZ2VyJyk7XG4gICAgfVxuXG4gICAgaWYgKGFic29sdXRlKSB7XG4gICAgICBzZWdtZW50cy5zaGlmdCgpO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50IDwgMCkge1xuICAgICAgLy8gYWxsb3cgbmVnYXRpdmUgaW5kZXhlcyB0byBhZGRyZXNzIGZyb20gdGhlIGVuZFxuICAgICAgc2VnbWVudCA9IE1hdGgubWF4KHNlZ21lbnRzLmxlbmd0aCArIHNlZ21lbnQsIDApO1xuICAgIH1cblxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8qanNoaW50IGxheGJyZWFrOiB0cnVlICovXG4gICAgICByZXR1cm4gc2VnbWVudCA9PT0gdW5kZWZpbmVkXG4gICAgICAgID8gc2VnbWVudHNcbiAgICAgICAgOiBzZWdtZW50c1tzZWdtZW50XTtcbiAgICAgIC8qanNoaW50IGxheGJyZWFrOiBmYWxzZSAqL1xuICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gbnVsbCB8fCBzZWdtZW50c1tzZWdtZW50XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoaXNBcnJheSh2KSkge1xuICAgICAgICBzZWdtZW50cyA9IFtdO1xuICAgICAgICAvLyBjb2xsYXBzZSBlbXB0eSBlbGVtZW50cyB3aXRoaW4gYXJyYXlcbiAgICAgICAgZm9yICh2YXIgaT0wLCBsPXYubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCF2W2ldLmxlbmd0aCAmJiAoIXNlZ21lbnRzLmxlbmd0aCB8fCAhc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXS5sZW5ndGgpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VnbWVudHMubGVuZ3RoICYmICFzZWdtZW50c1tzZWdtZW50cy5sZW5ndGggLTFdLmxlbmd0aCkge1xuICAgICAgICAgICAgc2VnbWVudHMucG9wKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VnbWVudHMucHVzaCh0cmltU2xhc2hlcyh2W2ldKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodiB8fCB0eXBlb2YgdiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdiA9IHRyaW1TbGFzaGVzKHYpO1xuICAgICAgICBpZiAoc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9PT0gJycpIHtcbiAgICAgICAgICAvLyBlbXB0eSB0cmFpbGluZyBlbGVtZW50cyBoYXZlIHRvIGJlIG92ZXJ3cml0dGVuXG4gICAgICAgICAgLy8gdG8gcHJldmVudCByZXN1bHRzIHN1Y2ggYXMgL2Zvby8vYmFyXG4gICAgICAgICAgc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0xXSA9IHY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VnbWVudHMucHVzaCh2KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodikge1xuICAgICAgICBzZWdtZW50c1tzZWdtZW50XSA9IHRyaW1TbGFzaGVzKHYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VnbWVudHMuc3BsaWNlKHNlZ21lbnQsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhYnNvbHV0ZSkge1xuICAgICAgc2VnbWVudHMudW5zaGlmdCgnJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGF0aChzZWdtZW50cy5qb2luKHNlcGFyYXRvciksIGJ1aWxkKTtcbiAgfTtcbiAgcC5zZWdtZW50Q29kZWQgPSBmdW5jdGlvbihzZWdtZW50LCB2LCBidWlsZCkge1xuICAgIHZhciBzZWdtZW50cywgaSwgbDtcblxuICAgIGlmICh0eXBlb2Ygc2VnbWVudCAhPT0gJ251bWJlcicpIHtcbiAgICAgIGJ1aWxkID0gdjtcbiAgICAgIHYgPSBzZWdtZW50O1xuICAgICAgc2VnbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZWdtZW50cyA9IHRoaXMuc2VnbWVudChzZWdtZW50LCB2LCBidWlsZCk7XG4gICAgICBpZiAoIWlzQXJyYXkoc2VnbWVudHMpKSB7XG4gICAgICAgIHNlZ21lbnRzID0gc2VnbWVudHMgIT09IHVuZGVmaW5lZCA/IFVSSS5kZWNvZGUoc2VnbWVudHMpIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHNlZ21lbnRzW2ldID0gVVJJLmRlY29kZShzZWdtZW50c1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIGlmICghaXNBcnJheSh2KSkge1xuICAgICAgdiA9ICh0eXBlb2YgdiA9PT0gJ3N0cmluZycgfHwgdiBpbnN0YW5jZW9mIFN0cmluZykgPyBVUkkuZW5jb2RlKHYpIDogdjtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChpID0gMCwgbCA9IHYubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZbaV0gPSBVUkkuZW5jb2RlKHZbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlZ21lbnQoc2VnbWVudCwgdiwgYnVpbGQpO1xuICB9O1xuXG4gIC8vIG11dGF0aW5nIHF1ZXJ5IHN0cmluZ1xuICB2YXIgcSA9IHAucXVlcnk7XG4gIHAucXVlcnkgPSBmdW5jdGlvbih2LCBidWlsZCkge1xuICAgIGlmICh2ID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgICAgdmFyIHJlc3VsdCA9IHYuY2FsbCh0aGlzLCBkYXRhKTtcbiAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkocmVzdWx0IHx8IGRhdGEsIHRoaXMuX3BhcnRzLmR1cGxpY2F0ZVF1ZXJ5UGFyYW1ldGVycywgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKHYgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkodiwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcS5jYWxsKHRoaXMsIHYsIGJ1aWxkKTtcbiAgICB9XG4gIH07XG4gIHAuc2V0UXVlcnkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgYnVpbGQpIHtcbiAgICB2YXIgZGF0YSA9IFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcblxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgfHwgbmFtZSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgZGF0YVtuYW1lXSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IG51bGw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbChuYW1lLCBrZXkpKSB7XG4gICAgICAgICAgZGF0YVtrZXldID0gbmFtZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VSSS5hZGRRdWVyeSgpIGFjY2VwdHMgYW4gb2JqZWN0LCBzdHJpbmcgYXMgdGhlIG5hbWUgcGFyYW1ldGVyJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGJ1aWxkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLmFkZFF1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGJ1aWxkKSB7XG4gICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgVVJJLmFkZFF1ZXJ5KGRhdGEsIG5hbWUsIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWUpO1xuICAgIHRoaXMuX3BhcnRzLnF1ZXJ5ID0gVVJJLmJ1aWxkUXVlcnkoZGF0YSwgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzLCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKTtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICBidWlsZCA9IHZhbHVlO1xuICAgIH1cblxuICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcC5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBidWlsZCkge1xuICAgIHZhciBkYXRhID0gVVJJLnBhcnNlUXVlcnkodGhpcy5fcGFydHMucXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIFVSSS5yZW1vdmVRdWVyeShkYXRhLCBuYW1lLCB2YWx1ZSk7XG4gICAgdGhpcy5fcGFydHMucXVlcnkgPSBVUkkuYnVpbGRRdWVyeShkYXRhLCB0aGlzLl9wYXJ0cy5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMsIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGJ1aWxkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLmhhc1F1ZXJ5ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUsIHdpdGhpbkFycmF5KSB7XG4gICAgdmFyIGRhdGEgPSBVUkkucGFyc2VRdWVyeSh0aGlzLl9wYXJ0cy5xdWVyeSwgdGhpcy5fcGFydHMuZXNjYXBlUXVlcnlTcGFjZSk7XG4gICAgcmV0dXJuIFVSSS5oYXNRdWVyeShkYXRhLCBuYW1lLCB2YWx1ZSwgd2l0aGluQXJyYXkpO1xuICB9O1xuICBwLnNldFNlYXJjaCA9IHAuc2V0UXVlcnk7XG4gIHAuYWRkU2VhcmNoID0gcC5hZGRRdWVyeTtcbiAgcC5yZW1vdmVTZWFyY2ggPSBwLnJlbW92ZVF1ZXJ5O1xuICBwLmhhc1NlYXJjaCA9IHAuaGFzUXVlcnk7XG5cbiAgLy8gc2FuaXRpemluZyBVUkxzXG4gIHAubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3BhcnRzLnVybikge1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgLm5vcm1hbGl6ZVByb3RvY29sKGZhbHNlKVxuICAgICAgICAubm9ybWFsaXplUGF0aChmYWxzZSlcbiAgICAgICAgLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKVxuICAgICAgICAubm9ybWFsaXplRnJhZ21lbnQoZmFsc2UpXG4gICAgICAgIC5idWlsZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gICAgICAubm9ybWFsaXplUHJvdG9jb2woZmFsc2UpXG4gICAgICAubm9ybWFsaXplSG9zdG5hbWUoZmFsc2UpXG4gICAgICAubm9ybWFsaXplUG9ydChmYWxzZSlcbiAgICAgIC5ub3JtYWxpemVQYXRoKGZhbHNlKVxuICAgICAgLm5vcm1hbGl6ZVF1ZXJ5KGZhbHNlKVxuICAgICAgLm5vcm1hbGl6ZUZyYWdtZW50KGZhbHNlKVxuICAgICAgLmJ1aWxkKCk7XG4gIH07XG4gIHAubm9ybWFsaXplUHJvdG9jb2wgPSBmdW5jdGlvbihidWlsZCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fcGFydHMucHJvdG9jb2wgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLl9wYXJ0cy5wcm90b2NvbCA9IHRoaXMuX3BhcnRzLnByb3RvY29sLnRvTG93ZXJDYXNlKCk7XG4gICAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHAubm9ybWFsaXplSG9zdG5hbWUgPSBmdW5jdGlvbihidWlsZCkge1xuICAgIGlmICh0aGlzLl9wYXJ0cy5ob3N0bmFtZSkge1xuICAgICAgaWYgKHRoaXMuaXMoJ0lETicpICYmIHB1bnljb2RlKSB7XG4gICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLl9wYXJ0cy5ob3N0bmFtZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXMoJ0lQdjYnKSAmJiBJUHY2KSB7XG4gICAgICAgIHRoaXMuX3BhcnRzLmhvc3RuYW1lID0gSVB2Ni5iZXN0KHRoaXMuX3BhcnRzLmhvc3RuYW1lKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcGFydHMuaG9zdG5hbWUgPSB0aGlzLl9wYXJ0cy5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLm5vcm1hbGl6ZVBvcnQgPSBmdW5jdGlvbihidWlsZCkge1xuICAgIC8vIHJlbW92ZSBwb3J0IG9mIGl0J3MgdGhlIHByb3RvY29sJ3MgZGVmYXVsdFxuICAgIGlmICh0eXBlb2YgdGhpcy5fcGFydHMucHJvdG9jb2wgPT09ICdzdHJpbmcnICYmIHRoaXMuX3BhcnRzLnBvcnQgPT09IFVSSS5kZWZhdWx0UG9ydHNbdGhpcy5fcGFydHMucHJvdG9jb2xdKSB7XG4gICAgICB0aGlzLl9wYXJ0cy5wb3J0ID0gbnVsbDtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcC5ub3JtYWxpemVQYXRoID0gZnVuY3Rpb24oYnVpbGQpIHtcbiAgICB2YXIgX3BhdGggPSB0aGlzLl9wYXJ0cy5wYXRoO1xuICAgIGlmICghX3BhdGgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHRoaXMuX3BhcnRzLnBhdGggPSBVUkkucmVjb2RlVXJuUGF0aCh0aGlzLl9wYXJ0cy5wYXRoKTtcbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wYXJ0cy5wYXRoID09PSAnLycpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIF9wYXRoID0gVVJJLnJlY29kZVBhdGgoX3BhdGgpO1xuXG4gICAgdmFyIF93YXNfcmVsYXRpdmU7XG4gICAgdmFyIF9sZWFkaW5nUGFyZW50cyA9ICcnO1xuICAgIHZhciBfcGFyZW50LCBfcG9zO1xuXG4gICAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzXG4gICAgaWYgKF9wYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICBfd2FzX3JlbGF0aXZlID0gdHJ1ZTtcbiAgICAgIF9wYXRoID0gJy8nICsgX3BhdGg7XG4gICAgfVxuXG4gICAgLy8gaGFuZGxlIHJlbGF0aXZlIGZpbGVzIChhcyBvcHBvc2VkIHRvIGRpcmVjdG9yaWVzKVxuICAgIGlmIChfcGF0aC5zbGljZSgtMykgPT09ICcvLi4nIHx8IF9wYXRoLnNsaWNlKC0yKSA9PT0gJy8uJykge1xuICAgICAgX3BhdGggKz0gJy8nO1xuICAgIH1cblxuICAgIC8vIHJlc29sdmUgc2ltcGxlc1xuICAgIF9wYXRoID0gX3BhdGhcbiAgICAgIC5yZXBsYWNlKC8oXFwvKFxcLlxcLykrKXwoXFwvXFwuJCkvZywgJy8nKVxuICAgICAgLnJlcGxhY2UoL1xcL3syLH0vZywgJy8nKTtcblxuICAgIC8vIHJlbWVtYmVyIGxlYWRpbmcgcGFyZW50c1xuICAgIGlmIChfd2FzX3JlbGF0aXZlKSB7XG4gICAgICBfbGVhZGluZ1BhcmVudHMgPSBfcGF0aC5zdWJzdHJpbmcoMSkubWF0Y2goL14oXFwuXFwuXFwvKSsvKSB8fCAnJztcbiAgICAgIGlmIChfbGVhZGluZ1BhcmVudHMpIHtcbiAgICAgICAgX2xlYWRpbmdQYXJlbnRzID0gX2xlYWRpbmdQYXJlbnRzWzBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlc29sdmUgcGFyZW50c1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBfcGFyZW50ID0gX3BhdGguc2VhcmNoKC9cXC9cXC5cXC4oXFwvfCQpLyk7XG4gICAgICBpZiAoX3BhcmVudCA9PT0gLTEpIHtcbiAgICAgICAgLy8gbm8gbW9yZSAuLi8gdG8gcmVzb2x2ZVxuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAoX3BhcmVudCA9PT0gMCkge1xuICAgICAgICAvLyB0b3AgbGV2ZWwgY2Fubm90IGJlIHJlbGF0aXZlLCBza2lwIGl0XG4gICAgICAgIF9wYXRoID0gX3BhdGguc3Vic3RyaW5nKDMpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgX3BvcyA9IF9wYXRoLnN1YnN0cmluZygwLCBfcGFyZW50KS5sYXN0SW5kZXhPZignLycpO1xuICAgICAgaWYgKF9wb3MgPT09IC0xKSB7XG4gICAgICAgIF9wb3MgPSBfcGFyZW50O1xuICAgICAgfVxuICAgICAgX3BhdGggPSBfcGF0aC5zdWJzdHJpbmcoMCwgX3BvcykgKyBfcGF0aC5zdWJzdHJpbmcoX3BhcmVudCArIDMpO1xuICAgIH1cblxuICAgIC8vIHJldmVydCB0byByZWxhdGl2ZVxuICAgIGlmIChfd2FzX3JlbGF0aXZlICYmIHRoaXMuaXMoJ3JlbGF0aXZlJykpIHtcbiAgICAgIF9wYXRoID0gX2xlYWRpbmdQYXJlbnRzICsgX3BhdGguc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIHRoaXMuX3BhcnRzLnBhdGggPSBfcGF0aDtcbiAgICB0aGlzLmJ1aWxkKCFidWlsZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIHAubm9ybWFsaXplUGF0aG5hbWUgPSBwLm5vcm1hbGl6ZVBhdGg7XG4gIHAubm9ybWFsaXplUXVlcnkgPSBmdW5jdGlvbihidWlsZCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fcGFydHMucXVlcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoIXRoaXMuX3BhcnRzLnF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9wYXJ0cy5xdWVyeSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1ZXJ5KFVSSS5wYXJzZVF1ZXJ5KHRoaXMuX3BhcnRzLnF1ZXJ5LCB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYnVpbGQoIWJ1aWxkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcC5ub3JtYWxpemVGcmFnbWVudCA9IGZ1bmN0aW9uKGJ1aWxkKSB7XG4gICAgaWYgKCF0aGlzLl9wYXJ0cy5mcmFnbWVudCkge1xuICAgICAgdGhpcy5fcGFydHMuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgdGhpcy5idWlsZCghYnVpbGQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBwLm5vcm1hbGl6ZVNlYXJjaCA9IHAubm9ybWFsaXplUXVlcnk7XG4gIHAubm9ybWFsaXplSGFzaCA9IHAubm9ybWFsaXplRnJhZ21lbnQ7XG5cbiAgcC5pc284ODU5ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gZXhwZWN0IHVuaWNvZGUgaW5wdXQsIGlzbzg4NTkgb3V0cHV0XG4gICAgdmFyIGUgPSBVUkkuZW5jb2RlO1xuICAgIHZhciBkID0gVVJJLmRlY29kZTtcblxuICAgIFVSSS5lbmNvZGUgPSBlc2NhcGU7XG4gICAgVVJJLmRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDtcbiAgICB0cnkge1xuICAgICAgdGhpcy5ub3JtYWxpemUoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgVVJJLmVuY29kZSA9IGU7XG4gICAgICBVUkkuZGVjb2RlID0gZDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC51bmljb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gZXhwZWN0IGlzbzg4NTkgaW5wdXQsIHVuaWNvZGUgb3V0cHV0XG4gICAgdmFyIGUgPSBVUkkuZW5jb2RlO1xuICAgIHZhciBkID0gVVJJLmRlY29kZTtcblxuICAgIFVSSS5lbmNvZGUgPSBzdHJpY3RFbmNvZGVVUklDb21wb25lbnQ7XG4gICAgVVJJLmRlY29kZSA9IHVuZXNjYXBlO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBVUkkuZW5jb2RlID0gZTtcbiAgICAgIFVSSS5kZWNvZGUgPSBkO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBwLnJlYWRhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVyaSA9IHRoaXMuY2xvbmUoKTtcbiAgICAvLyByZW1vdmluZyB1c2VybmFtZSwgcGFzc3dvcmQsIGJlY2F1c2UgdGhleSBzaG91bGRuJ3QgYmUgZGlzcGxheWVkIGFjY29yZGluZyB0byBSRkMgMzk4NlxuICAgIHVyaS51c2VybmFtZSgnJykucGFzc3dvcmQoJycpLm5vcm1hbGl6ZSgpO1xuICAgIHZhciB0ID0gJyc7XG4gICAgaWYgKHVyaS5fcGFydHMucHJvdG9jb2wpIHtcbiAgICAgIHQgKz0gdXJpLl9wYXJ0cy5wcm90b2NvbCArICc6Ly8nO1xuICAgIH1cblxuICAgIGlmICh1cmkuX3BhcnRzLmhvc3RuYW1lKSB7XG4gICAgICBpZiAodXJpLmlzKCdwdW55Y29kZScpICYmIHB1bnljb2RlKSB7XG4gICAgICAgIHQgKz0gcHVueWNvZGUudG9Vbmljb2RlKHVyaS5fcGFydHMuaG9zdG5hbWUpO1xuICAgICAgICBpZiAodXJpLl9wYXJ0cy5wb3J0KSB7XG4gICAgICAgICAgdCArPSAnOicgKyB1cmkuX3BhcnRzLnBvcnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHQgKz0gdXJpLmhvc3QoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXJpLl9wYXJ0cy5ob3N0bmFtZSAmJiB1cmkuX3BhcnRzLnBhdGggJiYgdXJpLl9wYXJ0cy5wYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICB0ICs9ICcvJztcbiAgICB9XG5cbiAgICB0ICs9IHVyaS5wYXRoKHRydWUpO1xuICAgIGlmICh1cmkuX3BhcnRzLnF1ZXJ5KSB7XG4gICAgICB2YXIgcSA9ICcnO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIHFwID0gdXJpLl9wYXJ0cy5xdWVyeS5zcGxpdCgnJicpLCBsID0gcXAubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBrdiA9IChxcFtpXSB8fCAnJykuc3BsaXQoJz0nKTtcbiAgICAgICAgcSArPSAnJicgKyBVUkkuZGVjb2RlUXVlcnkoa3ZbMF0sIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpXG4gICAgICAgICAgLnJlcGxhY2UoLyYvZywgJyUyNicpO1xuXG4gICAgICAgIGlmIChrdlsxXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcSArPSAnPScgKyBVUkkuZGVjb2RlUXVlcnkoa3ZbMV0sIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpXG4gICAgICAgICAgICAucmVwbGFjZSgvJi9nLCAnJTI2Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHQgKz0gJz8nICsgcS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgdCArPSBVUkkuZGVjb2RlUXVlcnkodXJpLmhhc2goKSwgdHJ1ZSk7XG4gICAgcmV0dXJuIHQ7XG4gIH07XG5cbiAgLy8gcmVzb2x2aW5nIHJlbGF0aXZlIGFuZCBhYnNvbHV0ZSBVUkxzXG4gIHAuYWJzb2x1dGVUbyA9IGZ1bmN0aW9uKGJhc2UpIHtcbiAgICB2YXIgcmVzb2x2ZWQgPSB0aGlzLmNsb25lKCk7XG4gICAgdmFyIHByb3BlcnRpZXMgPSBbJ3Byb3RvY29sJywgJ3VzZXJuYW1lJywgJ3Bhc3N3b3JkJywgJ2hvc3RuYW1lJywgJ3BvcnQnXTtcbiAgICB2YXIgYmFzZWRpciwgaSwgcDtcblxuICAgIGlmICh0aGlzLl9wYXJ0cy51cm4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVVJOcyBkbyBub3QgaGF2ZSBhbnkgZ2VuZXJhbGx5IGRlZmluZWQgaGllcmFyY2hpY2FsIGNvbXBvbmVudHMnKTtcbiAgICB9XG5cbiAgICBpZiAoIShiYXNlIGluc3RhbmNlb2YgVVJJKSkge1xuICAgICAgYmFzZSA9IG5ldyBVUkkoYmFzZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlc29sdmVkLl9wYXJ0cy5wcm90b2NvbCkge1xuICAgICAgLy8gRGlyZWN0bHkgcmV0dXJucyBldmVuIGlmIHRoaXMuX3BhcnRzLmhvc3RuYW1lIGlzIGVtcHR5LlxuICAgICAgcmV0dXJuIHJlc29sdmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlZC5fcGFydHMucHJvdG9jb2wgPSBiYXNlLl9wYXJ0cy5wcm90b2NvbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGFydHMuaG9zdG5hbWUpIHtcbiAgICAgIHJldHVybiByZXNvbHZlZDtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyAocCA9IHByb3BlcnRpZXNbaV0pOyBpKyspIHtcbiAgICAgIHJlc29sdmVkLl9wYXJ0c1twXSA9IGJhc2UuX3BhcnRzW3BdO1xuICAgIH1cblxuICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnBhdGgpIHtcbiAgICAgIHJlc29sdmVkLl9wYXJ0cy5wYXRoID0gYmFzZS5fcGFydHMucGF0aDtcbiAgICAgIGlmICghcmVzb2x2ZWQuX3BhcnRzLnF1ZXJ5KSB7XG4gICAgICAgIHJlc29sdmVkLl9wYXJ0cy5xdWVyeSA9IGJhc2UuX3BhcnRzLnF1ZXJ5O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocmVzb2x2ZWQuX3BhcnRzLnBhdGguc3Vic3RyaW5nKC0yKSA9PT0gJy4uJykge1xuICAgICAgICByZXNvbHZlZC5fcGFydHMucGF0aCArPSAnLyc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNvbHZlZC5wYXRoKCkuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgYmFzZWRpciA9IGJhc2UuZGlyZWN0b3J5KCk7XG4gICAgICAgIGJhc2VkaXIgPSBiYXNlZGlyID8gYmFzZWRpciA6IGJhc2UucGF0aCgpLmluZGV4T2YoJy8nKSA9PT0gMCA/ICcvJyA6ICcnO1xuICAgICAgICByZXNvbHZlZC5fcGFydHMucGF0aCA9IChiYXNlZGlyID8gKGJhc2VkaXIgKyAnLycpIDogJycpICsgcmVzb2x2ZWQuX3BhcnRzLnBhdGg7XG4gICAgICAgIHJlc29sdmVkLm5vcm1hbGl6ZVBhdGgoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXNvbHZlZC5idWlsZCgpO1xuICAgIHJldHVybiByZXNvbHZlZDtcbiAgfTtcbiAgcC5yZWxhdGl2ZVRvID0gZnVuY3Rpb24oYmFzZSkge1xuICAgIHZhciByZWxhdGl2ZSA9IHRoaXMuY2xvbmUoKS5ub3JtYWxpemUoKTtcbiAgICB2YXIgcmVsYXRpdmVQYXJ0cywgYmFzZVBhcnRzLCBjb21tb24sIHJlbGF0aXZlUGF0aCwgYmFzZVBhdGg7XG5cbiAgICBpZiAocmVsYXRpdmUuX3BhcnRzLnVybikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVUk5zIGRvIG5vdCBoYXZlIGFueSBnZW5lcmFsbHkgZGVmaW5lZCBoaWVyYXJjaGljYWwgY29tcG9uZW50cycpO1xuICAgIH1cblxuICAgIGJhc2UgPSBuZXcgVVJJKGJhc2UpLm5vcm1hbGl6ZSgpO1xuICAgIHJlbGF0aXZlUGFydHMgPSByZWxhdGl2ZS5fcGFydHM7XG4gICAgYmFzZVBhcnRzID0gYmFzZS5fcGFydHM7XG4gICAgcmVsYXRpdmVQYXRoID0gcmVsYXRpdmUucGF0aCgpO1xuICAgIGJhc2VQYXRoID0gYmFzZS5wYXRoKCk7XG5cbiAgICBpZiAocmVsYXRpdmVQYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSSSBpcyBhbHJlYWR5IHJlbGF0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKGJhc2VQYXRoLmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjYWxjdWxhdGUgYSBVUkkgcmVsYXRpdmUgdG8gYW5vdGhlciByZWxhdGl2ZSBVUkknKTtcbiAgICB9XG5cbiAgICBpZiAocmVsYXRpdmVQYXJ0cy5wcm90b2NvbCA9PT0gYmFzZVBhcnRzLnByb3RvY29sKSB7XG4gICAgICByZWxhdGl2ZVBhcnRzLnByb3RvY29sID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAocmVsYXRpdmVQYXJ0cy51c2VybmFtZSAhPT0gYmFzZVBhcnRzLnVzZXJuYW1lIHx8IHJlbGF0aXZlUGFydHMucGFzc3dvcmQgIT09IGJhc2VQYXJ0cy5wYXNzd29yZCkge1xuICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7XG4gICAgfVxuXG4gICAgaWYgKHJlbGF0aXZlUGFydHMucHJvdG9jb2wgIT09IG51bGwgfHwgcmVsYXRpdmVQYXJ0cy51c2VybmFtZSAhPT0gbnVsbCB8fCByZWxhdGl2ZVBhcnRzLnBhc3N3b3JkICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTtcbiAgICB9XG5cbiAgICBpZiAocmVsYXRpdmVQYXJ0cy5ob3N0bmFtZSA9PT0gYmFzZVBhcnRzLmhvc3RuYW1lICYmIHJlbGF0aXZlUGFydHMucG9ydCA9PT0gYmFzZVBhcnRzLnBvcnQpIHtcbiAgICAgIHJlbGF0aXZlUGFydHMuaG9zdG5hbWUgPSBudWxsO1xuICAgICAgcmVsYXRpdmVQYXJ0cy5wb3J0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7XG4gICAgfVxuXG4gICAgaWYgKHJlbGF0aXZlUGF0aCA9PT0gYmFzZVBhdGgpIHtcbiAgICAgIHJlbGF0aXZlUGFydHMucGF0aCA9ICcnO1xuICAgICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7XG4gICAgfVxuXG4gICAgLy8gZGV0ZXJtaW5lIGNvbW1vbiBzdWIgcGF0aFxuICAgIGNvbW1vbiA9IFVSSS5jb21tb25QYXRoKHJlbGF0aXZlUGF0aCwgYmFzZVBhdGgpO1xuXG4gICAgLy8gSWYgdGhlIHBhdGhzIGhhdmUgbm90aGluZyBpbiBjb21tb24sIHJldHVybiBhIHJlbGF0aXZlIFVSTCB3aXRoIHRoZSBhYnNvbHV0ZSBwYXRoLlxuICAgIGlmICghY29tbW9uKSB7XG4gICAgICByZXR1cm4gcmVsYXRpdmUuYnVpbGQoKTtcbiAgICB9XG5cbiAgICB2YXIgcGFyZW50cyA9IGJhc2VQYXJ0cy5wYXRoXG4gICAgICAuc3Vic3RyaW5nKGNvbW1vbi5sZW5ndGgpXG4gICAgICAucmVwbGFjZSgvW15cXC9dKiQvLCAnJylcbiAgICAgIC5yZXBsYWNlKC8uKj9cXC8vZywgJy4uLycpO1xuXG4gICAgcmVsYXRpdmVQYXJ0cy5wYXRoID0gKHBhcmVudHMgKyByZWxhdGl2ZVBhcnRzLnBhdGguc3Vic3RyaW5nKGNvbW1vbi5sZW5ndGgpKSB8fCAnLi8nO1xuXG4gICAgcmV0dXJuIHJlbGF0aXZlLmJ1aWxkKCk7XG4gIH07XG5cbiAgLy8gY29tcGFyaW5nIFVSSXNcbiAgcC5lcXVhbHMgPSBmdW5jdGlvbih1cmkpIHtcbiAgICB2YXIgb25lID0gdGhpcy5jbG9uZSgpO1xuICAgIHZhciB0d28gPSBuZXcgVVJJKHVyaSk7XG4gICAgdmFyIG9uZV9tYXAgPSB7fTtcbiAgICB2YXIgdHdvX21hcCA9IHt9O1xuICAgIHZhciBjaGVja2VkID0ge307XG4gICAgdmFyIG9uZV9xdWVyeSwgdHdvX3F1ZXJ5LCBrZXk7XG5cbiAgICBvbmUubm9ybWFsaXplKCk7XG4gICAgdHdvLm5vcm1hbGl6ZSgpO1xuXG4gICAgLy8gZXhhY3QgbWF0Y2hcbiAgICBpZiAob25lLnRvU3RyaW5nKCkgPT09IHR3by50b1N0cmluZygpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBleHRyYWN0IHF1ZXJ5IHN0cmluZ1xuICAgIG9uZV9xdWVyeSA9IG9uZS5xdWVyeSgpO1xuICAgIHR3b19xdWVyeSA9IHR3by5xdWVyeSgpO1xuICAgIG9uZS5xdWVyeSgnJyk7XG4gICAgdHdvLnF1ZXJ5KCcnKTtcblxuICAgIC8vIGRlZmluaXRlbHkgbm90IGVxdWFsIGlmIG5vdCBldmVuIG5vbi1xdWVyeSBwYXJ0cyBtYXRjaFxuICAgIGlmIChvbmUudG9TdHJpbmcoKSAhPT0gdHdvLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBxdWVyeSBwYXJhbWV0ZXJzIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLCBldmVuIGlmIHRoZXkncmUgcGVybXV0ZWRcbiAgICBpZiAob25lX3F1ZXJ5Lmxlbmd0aCAhPT0gdHdvX3F1ZXJ5Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIG9uZV9tYXAgPSBVUkkucGFyc2VRdWVyeShvbmVfcXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuICAgIHR3b19tYXAgPSBVUkkucGFyc2VRdWVyeSh0d29fcXVlcnksIHRoaXMuX3BhcnRzLmVzY2FwZVF1ZXJ5U3BhY2UpO1xuXG4gICAgZm9yIChrZXkgaW4gb25lX21hcCkge1xuICAgICAgaWYgKGhhc093bi5jYWxsKG9uZV9tYXAsIGtleSkpIHtcbiAgICAgICAgaWYgKCFpc0FycmF5KG9uZV9tYXBba2V5XSkpIHtcbiAgICAgICAgICBpZiAob25lX21hcFtrZXldICE9PSB0d29fbWFwW2tleV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWFycmF5c0VxdWFsKG9uZV9tYXBba2V5XSwgdHdvX21hcFtrZXldKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoZWNrZWRba2V5XSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChrZXkgaW4gdHdvX21hcCkge1xuICAgICAgaWYgKGhhc093bi5jYWxsKHR3b19tYXAsIGtleSkpIHtcbiAgICAgICAgaWYgKCFjaGVja2VkW2tleV0pIHtcbiAgICAgICAgICAvLyB0d28gY29udGFpbnMgYSBwYXJhbWV0ZXIgbm90IHByZXNlbnQgaW4gb25lXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gc3RhdGVcbiAgcC5wcmV2ZW50SW52YWxpZEhvc3RuYW1lID0gZnVuY3Rpb24odikge1xuICAgIHRoaXMuX3BhcnRzLnByZXZlbnRJbnZhbGlkSG9zdG5hbWUgPSAhIXY7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcC5kdXBsaWNhdGVRdWVyeVBhcmFtZXRlcnMgPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy5fcGFydHMuZHVwbGljYXRlUXVlcnlQYXJhbWV0ZXJzID0gISF2O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHAuZXNjYXBlUXVlcnlTcGFjZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB0aGlzLl9wYXJ0cy5lc2NhcGVRdWVyeVNwYWNlID0gISF2O1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBVUkk7XG59KSk7XG4iLCIvKiEgaHR0cHM6Ly9tdGhzLmJlL3B1bnljb2RlIHYxLjQuMCBieSBAbWF0aGlhcyAqL1xuOyhmdW5jdGlvbihyb290KSB7XG5cblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlcyAqL1xuXHR2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmXG5cdFx0IWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblx0dmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdCFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXHR2YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsO1xuXHRpZiAoXG5cdFx0ZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdGZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbFxuXHQpIHtcblx0XHRyb290ID0gZnJlZUdsb2JhbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYHB1bnljb2RlYCBvYmplY3QuXG5cdCAqIEBuYW1lIHB1bnljb2RlXG5cdCAqIEB0eXBlIE9iamVjdFxuXHQgKi9cblx0dmFyIHB1bnljb2RlLFxuXG5cdC8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi9cblx0bWF4SW50ID0gMjE0NzQ4MzY0NywgLy8gYWthLiAweDdGRkZGRkZGIG9yIDJeMzEtMVxuXG5cdC8qKiBCb290c3RyaW5nIHBhcmFtZXRlcnMgKi9cblx0YmFzZSA9IDM2LFxuXHR0TWluID0gMSxcblx0dE1heCA9IDI2LFxuXHRza2V3ID0gMzgsXG5cdGRhbXAgPSA3MDAsXG5cdGluaXRpYWxCaWFzID0gNzIsXG5cdGluaXRpYWxOID0gMTI4LCAvLyAweDgwXG5cdGRlbGltaXRlciA9ICctJywgLy8gJ1xceDJEJ1xuXG5cdC8qKiBSZWd1bGFyIGV4cHJlc3Npb25zICovXG5cdHJlZ2V4UHVueWNvZGUgPSAvXnhuLS0vLFxuXHRyZWdleE5vbkFTQ0lJID0gL1teXFx4MjAtXFx4N0VdLywgLy8gdW5wcmludGFibGUgQVNDSUkgY2hhcnMgKyBub24tQVNDSUkgY2hhcnNcblx0cmVnZXhTZXBhcmF0b3JzID0gL1tcXHgyRVxcdTMwMDJcXHVGRjBFXFx1RkY2MV0vZywgLy8gUkZDIDM0OTAgc2VwYXJhdG9yc1xuXG5cdC8qKiBFcnJvciBtZXNzYWdlcyAqL1xuXHRlcnJvcnMgPSB7XG5cdFx0J292ZXJmbG93JzogJ092ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzJyxcblx0XHQnbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLFxuXHRcdCdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnXG5cdH0sXG5cblx0LyoqIENvbnZlbmllbmNlIHNob3J0Y3V0cyAqL1xuXHRiYXNlTWludXNUTWluID0gYmFzZSAtIHRNaW4sXG5cdGZsb29yID0gTWF0aC5mbG9vcixcblx0c3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZSxcblxuXHQvKiogVGVtcG9yYXJ5IHZhcmlhYmxlICovXG5cdGtleTtcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQvKipcblx0ICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBlcnJvciB0eXBlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcnJvcih0eXBlKSB7XG5cdFx0dGhyb3cgbmV3IFJhbmdlRXJyb3IoZXJyb3JzW3R5cGVdKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgYEFycmF5I21hcGAgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IGFycmF5XG5cdCAqIGl0ZW0uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHtcblx0XHR2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR3aGlsZSAobGVuZ3RoLS0pIHtcblx0XHRcdHJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsXG5cdCAqIGFkZHJlc3Nlcy5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAqIGNoYXJhY3Rlci5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tcblx0ICogZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikge1xuXHRcdHZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpO1xuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHRpZiAocGFydHMubGVuZ3RoID4gMSkge1xuXHRcdFx0Ly8gSW4gZW1haWwgYWRkcmVzc2VzLCBvbmx5IHRoZSBkb21haW4gbmFtZSBzaG91bGQgYmUgcHVueWNvZGVkLiBMZWF2ZVxuXHRcdFx0Ly8gdGhlIGxvY2FsIHBhcnQgKGkuZS4gZXZlcnl0aGluZyB1cCB0byBgQGApIGludGFjdC5cblx0XHRcdHJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnO1xuXHRcdFx0c3RyaW5nID0gcGFydHNbMV07XG5cdFx0fVxuXHRcdC8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy5cblx0XHRzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShyZWdleFNlcGFyYXRvcnMsICdcXHgyRScpO1xuXHRcdHZhciBsYWJlbHMgPSBzdHJpbmcuc3BsaXQoJy4nKTtcblx0XHR2YXIgZW5jb2RlZCA9IG1hcChsYWJlbHMsIGZuKS5qb2luKCcuJyk7XG5cdFx0cmV0dXJuIHJlc3VsdCArIGVuY29kZWQ7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZVxuXHQgKiBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZy4gV2hpbGUgSmF2YVNjcmlwdCB1c2VzIFVDUy0yIGludGVybmFsbHksXG5cdCAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoXG5cdCAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LFxuXHQgKiBtYXRjaGluZyBVVEYtMTYuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZW5jb2RlYFxuXHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0ICogQG5hbWUgZGVjb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gVGhlIG5ldyBhcnJheSBvZiBjb2RlIHBvaW50cy5cblx0ICovXG5cdGZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7XG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBjb3VudGVyID0gMCxcblx0XHQgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcblx0XHQgICAgdmFsdWUsXG5cdFx0ICAgIGV4dHJhO1xuXHRcdHdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHR2YWx1ZSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHRcdC8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlclxuXHRcdFx0XHRleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRcdGlmICgoZXh0cmEgJiAweEZDMDApID09IDB4REMwMCkgeyAvLyBsb3cgc3Vycm9nYXRlXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dFxuXHRcdFx0XHRcdC8vIGNvZGUgdW5pdCBpcyB0aGUgaGlnaCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpclxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRjb3VudGVyLS07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RyaW5nIGJhc2VkIG9uIGFuIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZGVjb2RlYFxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBlbmNvZGVcblx0ICogQHBhcmFtIHtBcnJheX0gY29kZVBvaW50cyBUaGUgYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkge1xuXHRcdHJldHVybiBtYXAoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR2YXIgb3V0cHV0ID0gJyc7XG5cdFx0XHRpZiAodmFsdWUgPiAweEZGRkYpIHtcblx0XHRcdFx0dmFsdWUgLT0gMHgxMDAwMDtcblx0XHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG5cdFx0XHRcdHZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjtcblx0XHRcdH1cblx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO1xuXHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHR9KS5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGJhc2ljIGNvZGUgcG9pbnQgaW50byBhIGRpZ2l0L2ludGVnZXIuXG5cdCAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29kZVBvaW50IFRoZSBiYXNpYyBudW1lcmljIGNvZGUgcG9pbnQgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpblxuXHQgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGluIHRoZSByYW5nZSBgMGAgdG8gYGJhc2UgLSAxYCwgb3IgYGJhc2VgIGlmXG5cdCAqIHRoZSBjb2RlIHBvaW50IGRvZXMgbm90IHJlcHJlc2VudCBhIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzaWNUb0RpZ2l0KGNvZGVQb2ludCkge1xuXHRcdGlmIChjb2RlUG9pbnQgLSA0OCA8IDEwKSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gMjI7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gNjU7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA5NyA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gOTc7XG5cdFx0fVxuXHRcdHJldHVybiBiYXNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHNlZSBgYmFzaWNUb0RpZ2l0KClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBiYXNpYyBjb2RlIHBvaW50IHdob3NlIHZhbHVlICh3aGVuIHVzZWQgZm9yXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaXMgYGRpZ2l0YCwgd2hpY2ggbmVlZHMgdG8gYmUgaW4gdGhlIHJhbmdlXG5cdCAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpc1xuXHQgKiB1c2VkOyBlbHNlLCB0aGUgbG93ZXJjYXNlIGZvcm0gaXMgdXNlZC4gVGhlIGJlaGF2aW9yIGlzIHVuZGVmaW5lZFxuXHQgKiBpZiBgZmxhZ2AgaXMgbm9uLXplcm8gYW5kIGBkaWdpdGAgaGFzIG5vIHVwcGVyY2FzZSBmb3JtLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGlnaXRUb0Jhc2ljKGRpZ2l0LCBmbGFnKSB7XG5cdFx0Ly8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLlpcblx0XHQvLyAyNi4uMzUgbWFwIHRvIEFTQ0lJIDAuLjlcblx0XHRyZXR1cm4gZGlnaXQgKyAyMiArIDc1ICogKGRpZ2l0IDwgMjYpIC0gKChmbGFnICE9IDApIDw8IDUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuXG5cdCAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNDkyI3NlY3Rpb24tMy40XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGFwdChkZWx0YSwgbnVtUG9pbnRzLCBmaXJzdFRpbWUpIHtcblx0XHR2YXIgayA9IDA7XG5cdFx0ZGVsdGEgPSBmaXJzdFRpbWUgPyBmbG9vcihkZWx0YSAvIGRhbXApIDogZGVsdGEgPj4gMTtcblx0XHRkZWx0YSArPSBmbG9vcihkZWx0YSAvIG51bVBvaW50cyk7XG5cdFx0Zm9yICgvKiBubyBpbml0aWFsaXphdGlvbiAqLzsgZGVsdGEgPiBiYXNlTWludXNUTWluICogdE1heCA+PiAxOyBrICs9IGJhc2UpIHtcblx0XHRcdGRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZsb29yKGsgKyAoYmFzZU1pbnVzVE1pbiArIDEpICogZGVsdGEgLyAoZGVsdGEgKyBza2V3KSk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzIHRvIGEgc3RyaW5nIG9mIFVuaWNvZGVcblx0ICogc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7XG5cdFx0Ly8gRG9uJ3QgdXNlIFVDUy0yXG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aCxcblx0XHQgICAgb3V0LFxuXHRcdCAgICBpID0gMCxcblx0XHQgICAgbiA9IGluaXRpYWxOLFxuXHRcdCAgICBiaWFzID0gaW5pdGlhbEJpYXMsXG5cdFx0ICAgIGJhc2ljLFxuXHRcdCAgICBqLFxuXHRcdCAgICBpbmRleCxcblx0XHQgICAgb2xkaSxcblx0XHQgICAgdyxcblx0XHQgICAgayxcblx0XHQgICAgZGlnaXQsXG5cdFx0ICAgIHQsXG5cdFx0ICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqL1xuXHRcdCAgICBiYXNlTWludXNUO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50czogbGV0IGBiYXNpY2AgYmUgdGhlIG51bWJlciBvZiBpbnB1dCBjb2RlXG5cdFx0Ly8gcG9pbnRzIGJlZm9yZSB0aGUgbGFzdCBkZWxpbWl0ZXIsIG9yIGAwYCBpZiB0aGVyZSBpcyBub25lLCB0aGVuIGNvcHlcblx0XHQvLyB0aGUgZmlyc3QgYmFzaWMgY29kZSBwb2ludHMgdG8gdGhlIG91dHB1dC5cblxuXHRcdGJhc2ljID0gaW5wdXQubGFzdEluZGV4T2YoZGVsaW1pdGVyKTtcblx0XHRpZiAoYmFzaWMgPCAwKSB7XG5cdFx0XHRiYXNpYyA9IDA7XG5cdFx0fVxuXG5cdFx0Zm9yIChqID0gMDsgaiA8IGJhc2ljOyArK2opIHtcblx0XHRcdC8vIGlmIGl0J3Mgbm90IGEgYmFzaWMgY29kZSBwb2ludFxuXHRcdFx0aWYgKGlucHV0LmNoYXJDb2RlQXQoaikgPj0gMHg4MCkge1xuXHRcdFx0XHRlcnJvcignbm90LWJhc2ljJyk7XG5cdFx0XHR9XG5cdFx0XHRvdXRwdXQucHVzaChpbnB1dC5jaGFyQ29kZUF0KGopKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGRlY29kaW5nIGxvb3A6IHN0YXJ0IGp1c3QgYWZ0ZXIgdGhlIGxhc3QgZGVsaW1pdGVyIGlmIGFueSBiYXNpYyBjb2RlXG5cdFx0Ly8gcG9pbnRzIHdlcmUgY29waWVkOyBzdGFydCBhdCB0aGUgYmVnaW5uaW5nIG90aGVyd2lzZS5cblxuXHRcdGZvciAoaW5kZXggPSBiYXNpYyA+IDAgPyBiYXNpYyArIDEgOiAwOyBpbmRleCA8IGlucHV0TGVuZ3RoOyAvKiBubyBmaW5hbCBleHByZXNzaW9uICovKSB7XG5cblx0XHRcdC8vIGBpbmRleGAgaXMgdGhlIGluZGV4IG9mIHRoZSBuZXh0IGNoYXJhY3RlciB0byBiZSBjb25zdW1lZC5cblx0XHRcdC8vIERlY29kZSBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyIGludG8gYGRlbHRhYCxcblx0XHRcdC8vIHdoaWNoIGdldHMgYWRkZWQgdG8gYGlgLiBUaGUgb3ZlcmZsb3cgY2hlY2tpbmcgaXMgZWFzaWVyXG5cdFx0XHQvLyBpZiB3ZSBpbmNyZWFzZSBgaWAgYXMgd2UgZ28sIHRoZW4gc3VidHJhY3Qgb2ZmIGl0cyBzdGFydGluZ1xuXHRcdFx0Ly8gdmFsdWUgYXQgdGhlIGVuZCB0byBvYnRhaW4gYGRlbHRhYC5cblx0XHRcdGZvciAob2xkaSA9IGksIHcgPSAxLCBrID0gYmFzZTsgLyogbm8gY29uZGl0aW9uICovOyBrICs9IGJhc2UpIHtcblxuXHRcdFx0XHRpZiAoaW5kZXggPj0gaW5wdXRMZW5ndGgpIHtcblx0XHRcdFx0XHRlcnJvcignaW52YWxpZC1pbnB1dCcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGlnaXQgPSBiYXNpY1RvRGlnaXQoaW5wdXQuY2hhckNvZGVBdChpbmRleCsrKSk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0ID49IGJhc2UgfHwgZGlnaXQgPiBmbG9vcigobWF4SW50IC0gaSkgLyB3KSkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aSArPSBkaWdpdCAqIHc7XG5cdFx0XHRcdHQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpO1xuXG5cdFx0XHRcdGlmIChkaWdpdCA8IHQpIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGJhc2VNaW51c1QgPSBiYXNlIC0gdDtcblx0XHRcdFx0aWYgKHcgPiBmbG9vcihtYXhJbnQgLyBiYXNlTWludXNUKSkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dyAqPSBiYXNlTWludXNUO1xuXG5cdFx0XHR9XG5cblx0XHRcdG91dCA9IG91dHB1dC5sZW5ndGggKyAxO1xuXHRcdFx0YmlhcyA9IGFkYXB0KGkgLSBvbGRpLCBvdXQsIG9sZGkgPT0gMCk7XG5cblx0XHRcdC8vIGBpYCB3YXMgc3VwcG9zZWQgdG8gd3JhcCBhcm91bmQgZnJvbSBgb3V0YCB0byBgMGAsXG5cdFx0XHQvLyBpbmNyZW1lbnRpbmcgYG5gIGVhY2ggdGltZSwgc28gd2UnbGwgZml4IHRoYXQgbm93OlxuXHRcdFx0aWYgKGZsb29yKGkgLyBvdXQpID4gbWF4SW50IC0gbikge1xuXHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdH1cblxuXHRcdFx0biArPSBmbG9vcihpIC8gb3V0KTtcblx0XHRcdGkgJT0gb3V0O1xuXG5cdFx0XHQvLyBJbnNlcnQgYG5gIGF0IHBvc2l0aW9uIGBpYCBvZiB0aGUgb3V0cHV0XG5cdFx0XHRvdXRwdXQuc3BsaWNlKGkrKywgMCwgbik7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdWNzMmVuY29kZShvdXRwdXQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scyAoZS5nLiBhIGRvbWFpbiBuYW1lIGxhYmVsKSB0byBhXG5cdCAqIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICovXG5cdGZ1bmN0aW9uIGVuY29kZShpbnB1dCkge1xuXHRcdHZhciBuLFxuXHRcdCAgICBkZWx0YSxcblx0XHQgICAgaGFuZGxlZENQQ291bnQsXG5cdFx0ICAgIGJhc2ljTGVuZ3RoLFxuXHRcdCAgICBiaWFzLFxuXHRcdCAgICBqLFxuXHRcdCAgICBtLFxuXHRcdCAgICBxLFxuXHRcdCAgICBrLFxuXHRcdCAgICB0LFxuXHRcdCAgICBjdXJyZW50VmFsdWUsXG5cdFx0ICAgIG91dHB1dCA9IFtdLFxuXHRcdCAgICAvKiogYGlucHV0TGVuZ3RoYCB3aWxsIGhvbGQgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyBpbiBgaW5wdXRgLiAqL1xuXHRcdCAgICBpbnB1dExlbmd0aCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGhhbmRsZWRDUENvdW50UGx1c09uZSxcblx0XHQgICAgYmFzZU1pbnVzVCxcblx0XHQgICAgcU1pbnVzVDtcblxuXHRcdC8vIENvbnZlcnQgdGhlIGlucHV0IGluIFVDUy0yIHRvIFVuaWNvZGVcblx0XHRpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpO1xuXG5cdFx0Ly8gQ2FjaGUgdGhlIGxlbmd0aFxuXHRcdGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSB0aGUgc3RhdGVcblx0XHRuID0gaW5pdGlhbE47XG5cdFx0ZGVsdGEgPSAwO1xuXHRcdGJpYXMgPSBpbml0aWFsQmlhcztcblxuXHRcdC8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHNcblx0XHRmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cdFx0XHRpZiAoY3VycmVudFZhbHVlIDwgMHg4MCkge1xuXHRcdFx0XHRvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoY3VycmVudFZhbHVlKSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aGFuZGxlZENQQ291bnQgPSBiYXNpY0xlbmd0aCA9IG91dHB1dC5sZW5ndGg7XG5cblx0XHQvLyBgaGFuZGxlZENQQ291bnRgIGlzIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgdGhhdCBoYXZlIGJlZW4gaGFuZGxlZDtcblx0XHQvLyBgYmFzaWNMZW5ndGhgIGlzIHRoZSBudW1iZXIgb2YgYmFzaWMgY29kZSBwb2ludHMuXG5cblx0XHQvLyBGaW5pc2ggdGhlIGJhc2ljIHN0cmluZyAtIGlmIGl0IGlzIG5vdCBlbXB0eSAtIHdpdGggYSBkZWxpbWl0ZXJcblx0XHRpZiAoYmFzaWNMZW5ndGgpIHtcblx0XHRcdG91dHB1dC5wdXNoKGRlbGltaXRlcik7XG5cdFx0fVxuXG5cdFx0Ly8gTWFpbiBlbmNvZGluZyBsb29wOlxuXHRcdHdoaWxlIChoYW5kbGVkQ1BDb3VudCA8IGlucHV0TGVuZ3RoKSB7XG5cblx0XHRcdC8vIEFsbCBub24tYmFzaWMgY29kZSBwb2ludHMgPCBuIGhhdmUgYmVlbiBoYW5kbGVkIGFscmVhZHkuIEZpbmQgdGhlIG5leHRcblx0XHRcdC8vIGxhcmdlciBvbmU6XG5cdFx0XHRmb3IgKG0gPSBtYXhJbnQsIGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA+PSBuICYmIGN1cnJlbnRWYWx1ZSA8IG0pIHtcblx0XHRcdFx0XHRtID0gY3VycmVudFZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEluY3JlYXNlIGBkZWx0YWAgZW5vdWdoIHRvIGFkdmFuY2UgdGhlIGRlY29kZXIncyA8bixpPiBzdGF0ZSB0byA8bSwwPixcblx0XHRcdC8vIGJ1dCBndWFyZCBhZ2FpbnN0IG92ZXJmbG93XG5cdFx0XHRoYW5kbGVkQ1BDb3VudFBsdXNPbmUgPSBoYW5kbGVkQ1BDb3VudCArIDE7XG5cdFx0XHRpZiAobSAtIG4gPiBmbG9vcigobWF4SW50IC0gZGVsdGEpIC8gaGFuZGxlZENQQ291bnRQbHVzT25lKSkge1xuXHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdH1cblxuXHRcdFx0ZGVsdGEgKz0gKG0gLSBuKSAqIGhhbmRsZWRDUENvdW50UGx1c09uZTtcblx0XHRcdG4gPSBtO1xuXG5cdFx0XHRmb3IgKGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikge1xuXHRcdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblxuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlIDwgbiAmJiArK2RlbHRhID4gbWF4SW50KSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID09IG4pIHtcblx0XHRcdFx0XHQvLyBSZXByZXNlbnQgZGVsdGEgYXMgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlclxuXHRcdFx0XHRcdGZvciAocSA9IGRlbHRhLCBrID0gYmFzZTsgLyogbm8gY29uZGl0aW9uICovOyBrICs9IGJhc2UpIHtcblx0XHRcdFx0XHRcdHQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpO1xuXHRcdFx0XHRcdFx0aWYgKHEgPCB0KSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cU1pbnVzVCA9IHEgLSB0O1xuXHRcdFx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRcdFx0b3V0cHV0LnB1c2goXG5cdFx0XHRcdFx0XHRcdHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNULCAwKSlcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRxID0gZmxvb3IocU1pbnVzVCAvIGJhc2VNaW51c1QpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWMocSwgMCkpKTtcblx0XHRcdFx0XHRiaWFzID0gYWRhcHQoZGVsdGEsIGhhbmRsZWRDUENvdW50UGx1c09uZSwgaGFuZGxlZENQQ291bnQgPT0gYmFzaWNMZW5ndGgpO1xuXHRcdFx0XHRcdGRlbHRhID0gMDtcblx0XHRcdFx0XHQrK2hhbmRsZWRDUENvdW50O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdCsrZGVsdGE7XG5cdFx0XHQrK247XG5cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dC5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzXG5cdCAqIHRvIFVuaWNvZGUuIE9ubHkgdGhlIFB1bnljb2RlZCBwYXJ0cyBvZiB0aGUgaW5wdXQgd2lsbCBiZSBjb252ZXJ0ZWQsIGkuZS5cblx0ICogaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgb24gYSBzdHJpbmcgdGhhdCBoYXMgYWxyZWFkeSBiZWVuXG5cdCAqIGNvbnZlcnRlZCB0byBVbmljb2RlLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZWQgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0b1xuXHQgKiBjb252ZXJ0IHRvIFVuaWNvZGUuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBVbmljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBQdW55Y29kZVxuXHQgKiBzdHJpbmcuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b1VuaWNvZGUoaW5wdXQpIHtcblx0XHRyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHtcblx0XHRcdHJldHVybiByZWdleFB1bnljb2RlLnRlc3Qoc3RyaW5nKVxuXHRcdFx0XHQ/IGRlY29kZShzdHJpbmcuc2xpY2UoNCkudG9Mb3dlckNhc2UoKSlcblx0XHRcdFx0OiBzdHJpbmc7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBVbmljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIFB1bnljb2RlLiBPbmx5IHRoZSBub24tQVNDSUkgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHdpbGwgYmUgY29udmVydGVkLFxuXHQgKiBpLmUuIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCdzIGFscmVhZHkgaW5cblx0ICogQVNDSUkuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG8gY29udmVydCwgYXMgYVxuXHQgKiBVbmljb2RlIHN0cmluZy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFB1bnljb2RlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBkb21haW4gbmFtZSBvclxuXHQgKiBlbWFpbCBhZGRyZXNzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9BU0NJSShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4Tm9uQVNDSUkudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gJ3huLS0nICsgZW5jb2RlKHN0cmluZylcblx0XHRcdFx0OiBzdHJpbmc7XG5cdFx0fSk7XG5cdH1cblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQvKiogRGVmaW5lIHRoZSBwdWJsaWMgQVBJICovXG5cdHB1bnljb2RlID0ge1xuXHRcdC8qKlxuXHRcdCAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBQdW55Y29kZS5qcyB2ZXJzaW9uIG51bWJlci5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAdHlwZSBTdHJpbmdcblx0XHQgKi9cblx0XHQndmVyc2lvbic6ICcxLjMuMicsXG5cdFx0LyoqXG5cdFx0ICogQW4gb2JqZWN0IG9mIG1ldGhvZHMgdG8gY29udmVydCBmcm9tIEphdmFTY3JpcHQncyBpbnRlcm5hbCBjaGFyYWN0ZXJcblx0XHQgKiByZXByZXNlbnRhdGlvbiAoVUNTLTIpIHRvIFVuaWNvZGUgY29kZSBwb2ludHMsIGFuZCBiYWNrLlxuXHRcdCAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIE9iamVjdFxuXHRcdCAqL1xuXHRcdCd1Y3MyJzoge1xuXHRcdFx0J2RlY29kZSc6IHVjczJkZWNvZGUsXG5cdFx0XHQnZW5jb2RlJzogdWNzMmVuY29kZVxuXHRcdH0sXG5cdFx0J2RlY29kZSc6IGRlY29kZSxcblx0XHQnZW5jb2RlJzogZW5jb2RlLFxuXHRcdCd0b0FTQ0lJJzogdG9BU0NJSSxcblx0XHQndG9Vbmljb2RlJzogdG9Vbmljb2RlXG5cdH07XG5cblx0LyoqIEV4cG9zZSBgcHVueWNvZGVgICovXG5cdC8vIFNvbWUgQU1EIGJ1aWxkIG9wdGltaXplcnMsIGxpa2Ugci5qcywgY2hlY2sgZm9yIHNwZWNpZmljIGNvbmRpdGlvbiBwYXR0ZXJuc1xuXHQvLyBsaWtlIHRoZSBmb2xsb3dpbmc6XG5cdGlmIChcblx0XHR0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiZcblx0XHR0eXBlb2YgZGVmaW5lLmFtZCA9PSAnb2JqZWN0JyAmJlxuXHRcdGRlZmluZS5hbWRcblx0KSB7XG5cdFx0ZGVmaW5lKCdwdW55Y29kZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHB1bnljb2RlO1xuXHRcdH0pO1xuXHR9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHtcblx0XHRpZiAobW9kdWxlLmV4cG9ydHMgPT0gZnJlZUV4cG9ydHMpIHtcblx0XHRcdC8vIGluIE5vZGUuanMsIGlvLmpzLCBvciBSaW5nb0pTIHYwLjguMCtcblx0XHRcdGZyZWVNb2R1bGUuZXhwb3J0cyA9IHB1bnljb2RlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLVxuXHRcdFx0Zm9yIChrZXkgaW4gcHVueWNvZGUpIHtcblx0XHRcdFx0cHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIHtcblx0XHQvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyXG5cdFx0cm9vdC5wdW55Y29kZSA9IHB1bnljb2RlO1xuXHR9XG5cbn0odGhpcykpO1xuIiwiLyoqXG4qIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQVxuKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRFxuKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0xcbiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlZcbiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBXG4qIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUdcbiogQ29weXJpZ2h0IDIwMTYgQXBpemVlXG4qIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOXG4qXG4qIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4qIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4qXG4qICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qXG4qIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbioqL1xuaW1wb3J0IHsgU2FuZGJveCwgU2FuZGJveFJlZ2lzdHJ5IH0gZnJvbSAncnVudGltZS1jb3JlL2Rpc3Qvc2FuZGJveCc7XG5pbXBvcnQgTWluaUJ1cyBmcm9tICdydW50aW1lLWNvcmUvZGlzdC9taW5pYnVzJztcblxuZnVuY3Rpb24gY3JlYXRlKGlmcmFtZSkge1xuICB3aW5kb3cuX21pbmlCdXMgPSBuZXcgTWluaUJ1cygpO1xuICB3aW5kb3cuX21pbmlCdXMuX29uUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbihtc2cpIHtcbiAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShtc2csICcqJyk7XG4gIH07XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuZGF0YS50byAmJiAoZXZlbnQuZGF0YS50by5zdGFydHNXaXRoKCdydW50aW1lOmxvYWRlZEh5cGVydHknKSB8fCBldmVudC5kYXRhLnRvLmVuZHNXaXRoKCdndWktbWFuYWdlcicpKSkgeyByZXR1cm47IH1cblxuICAgIHdpbmRvdy5fbWluaUJ1cy5fb25NZXNzYWdlKGV2ZW50LmRhdGEpO1xuICB9LCBmYWxzZSk7XG5cbiAgd2luZG93Ll9yZWdpc3RyeSA9IG5ldyBTYW5kYm94UmVnaXN0cnkod2luZG93Ll9taW5pQnVzKTtcbiAgd2luZG93Ll9yZWdpc3RyeS5fY3JlYXRlID0gZnVuY3Rpb24odXJsLCBzb3VyY2VDb2RlLCBjb25maWcsIGZhY3RvcnkpIHtcbiAgICB0cnkge1xuICAgICAgZXZhbC5hcHBseSh3aW5kb3csIFtzb3VyY2VDb2RlXSk7XG5cbiAgICAgIGlmICh0eXBlb2YgYWN0aXZhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGFjdGl2YXRlKHVybCwgd2luZG93Ll9taW5pQnVzLCBjb25maWcsIGZhY3RvcnkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGFjdGl2YXRlLmRlZmF1bHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGFjdGl2YXRlLmRlZmF1bHQodXJsLCB3aW5kb3cuX21pbmlCdXMsIGNvbmZpZywgZmFjdG9yeSk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0NvbnRleHQgQVBQIENyZWF0ZV0gLSBFcnJvcjogJywgZXJyb3IpO1xuICAgICAgdGhyb3cgSlNPTi5zdHJpbmdpZnkoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRIeXBlcnR5KGh5cGVydHlEZXNjcmlwdG9yKSB7XG4gIHJldHVybiB3aW5kb3cuX3JlZ2lzdHJ5LmNvbXBvbmVudHNbaHlwZXJ0eURlc2NyaXB0b3JdO1xufVxuXG4vKipcbiAqIFNhbmRib3hDb250ZXh0IGZvciBhcHBsaWNhdGlvblxuICogQHR5cGVkZWYgQ29udGV4dEFwcFxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpRnJhbWU6IGlmcmFtZSl9IGNyZWF0ZSBDcmVhdGVzIHRoZSBjb250ZXh0IGZvciB0aGUgc2FuZGJveCBob3N0ZWQgaW4gdGhlIGlmcmFtZVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihIeXBlcnR5IGRlc2NyaXB0b3I6IHN0cmluZyk6SHlwZXJ0eX0gZ2V0SHlwZXJ0eSBSZXR1cm5zIHRoZSBoeXBlcnR5IGZvciB0aGUgZ2l2ZW4gZGVzY3JpcHRvclxuICogKi9cbmV4cG9ydCBkZWZhdWx0IHsgY3JlYXRlLCBnZXRIeXBlcnR5IH07XG4iLCIvKipcbiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBXG4qIENvcHlyaWdodCAyMDE2IElORVNDLUlEXG4qIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTFxuKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVlxuKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0FcbiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBR1xuKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWVcbiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU5cbipcbiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbipcbiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbipcbiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4qIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4qIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKiovXG5pbXBvcnQgUmV0aGlua0Jyb3dzZXIgZnJvbSAnLi9SdW50aW1lVUFTdHViJ1xuXG5sZXQgcmV0aGluaztcblxuaWYoIHR5cGVvZiB3aW5kb3cgIT0gdW5kZWZpbmVkICYmIHdpbmRvdyAhPSBudWxsICl7XG4gICAgcmV0aGluayA9IFJldGhpbmtCcm93c2VyXG59ZWxzZXtcbiAgICByZXRoaW5rID0gdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBkZWZhdWx0IHJldGhpbmtcbiIsIi8qKlxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxuKlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKi9cblxuLyoqXG4gKiBAZXh0ZXJuYWwge01TR19TVEFUVVN9IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvdHJlZS9tYXN0ZXIvZG9jcy9zcGVjcy9zZXJ2aWNlLWZyYW1ld29ya1xuICovXG5cbmltcG9ydCBhcHAgZnJvbSAnLi9Db250ZXh0QXBwJztcbmltcG9ydCBVUkkgZnJvbSAndXJpanMnO1xuaW1wb3J0IHsgY3JlYXRlIGFzIGNyZWF0ZUlmcmFtZSB9IGZyb20gJy4vaWZyYW1lJztcblxubGV0IGlmcmFtZSA9IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBIeXBlcnR5XG4gKiBAcHJvcGVydHkge3N0cmluZ30gcnVudGltZUh5cGVydHlVUkwgLSBIeXBlcnR5IGFkZHJlc3NcbiAqIEBwcm9wZXJ0eSB7TVNHX1NUQVRVU30gc3RhdHVzIC0gSHlwZXJ0eSBzdGF0dXNcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBpbnN0YW5jZSAtIEh5cGVydHkgb2JqZWN0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSAtIEh5cGVydHkgbmFtZVxuICovXG5sZXQgYnVpbGRNc2cgPSAoaHlwZXJ0eUNvbXBvbmVudCwgbXNnKSA9PiB7XG4gIHJldHVybiB7XG4gICAgcnVudGltZUh5cGVydHlVUkw6IG1zZy5ib2R5LnJ1bnRpbWVIeXBlcnR5VVJMLFxuICAgIHN0YXR1czogbXNnLmJvZHkuc3RhdHVzLFxuICAgIGluc3RhbmNlOiBoeXBlcnR5Q29tcG9uZW50Lmluc3RhbmNlLFxuICAgIG5hbWU6IGh5cGVydHlDb21wb25lbnQubmFtZVxuICB9O1xufTtcblxubGV0IHJlcXVpcmVIeXBlcnR5SUQgPSAwO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFJ1bnRpbWVBZGFwdGVyXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKEh5cGVydHkgZGVzY3JpcHRvcjogc3RyaW5nLCBIeXBlcnR5IGFkZHJlc3NlcyB0byBiZSByZXVzZWQgb3IgZW1wdHkgaW4gb3RoZXIgY2FzZTogc3RyaW5nKTogUHJvbWlzZTxIeXBlcnR5Pn0gcmVxdWlyZUh5cGVydHkgLSBMb2FkcyBhbmQgcmV0dXJucyBhIEh5cGVydHlcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oRG9tYWluOiBzdHJpbmcpfSByZXF1aXJlUHJvdG9zdHViIC0gTG9hZHMgYSBwcm90b3N0dWIgZnJvbSB0aGUgZ2l2ZW4gZG9tYWluXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKCk6IFByb21pc2V9IGNsb3NlIC0gVW5sb2FkcyBhbmQgY2xvc2VzIHRoZSBpbnN0YWxsZWQgcnVudGltZVxuICovXG5sZXQgcnVudGltZUFkYXB0ZXIgPSB7XG5cbiAgcmVxdWlyZUh5cGVydHk6IChoeXBlcnR5RGVzY3JpcHRvciwgcmV1c2VBZGRyZXNzID0gZmFsc2UpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8ga2VlcCBjdXJyZW50IHJlcXVpcmVIeXBlcnR5SURcbiAgICAgIGNvbnN0IGNhbGxiYWNrSUQgPSByZXF1aXJlSHlwZXJ0eUlEO1xuICAgICAgcmVxdWlyZUh5cGVydHlJRCArPSAxO1xuICAgICAgbGV0IGxvYWRlZCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLmRhdGEudG8gPT09ICdydW50aW1lOmxvYWRlZEh5cGVydHknKSB7XG4gICAgICAgICAgaWYgKGUuZGF0YS5ib2R5LmlkID09PSBjYWxsYmFja0lEKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG4gICAgICAgICAgICByZXNvbHZlKGJ1aWxkTXNnKGFwcC5nZXRIeXBlcnR5KGUuZGF0YS5ib2R5LnJ1bnRpbWVIeXBlcnR5VVJMKSwgZS5kYXRhKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsb2FkZWQpO1xuICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0bzogJ2NvcmU6bG9hZEh5cGVydHknLCBib2R5OiB7IGRlc2NyaXB0b3I6IGh5cGVydHlEZXNjcmlwdG9yLCByZXVzZUFkZHJlc3MsIGlkOiBjYWxsYmFja0lEIH0gfSwgJyonKTtcbiAgICB9KTtcbiAgfSxcblxuICBhdXRob3Jpc2U6IChpZHAsIHNjb3BlKSA9PiB7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IGxvYWRlZCA9IChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbUnVudGltZUJyb3dzZXIuUnVudGltZVVBU3R1Yi5BdXRob3Jpc2VdIHJlcGx5OicsIGUuZGF0YSk7XG4gICAgICAgIGlmIChlLmRhdGEudG8gPT09ICdydW50aW1lOmF1dGhvcmlzZWQnKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsb2FkZWQpO1xuXG4gICAgICAgICAgcmVzb2x2ZShlLmRhdGEuYm9keSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5kYXRhLnRvID09PSAncnVudGltZTpub3QtYXV0aG9yaXNlZCcpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG5cbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbUnVudGltZUJyb3dzZXIuUnVudGltZVVBU3R1Yi5BdXRob3Jpc2VdIEVycm9yOicsIGUuZGF0YSk7XG4gICAgICAgICAgcmVqZWN0KGUuZGF0YS5ib2R5KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbG9hZGVkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRob3Jpc2luZyBJRFAgJywgaWRwLCAnIHdpdGggc2NvcGUgJywgc2NvcGUpO1xuICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0bzogJ2NvcmU6YXV0aG9yaXNlJywgYm9keTogeyBpZHA6IGlkcCwgc2NvcGU6IHNjb3BlIH0gfSwgJyonKTtcbiAgICB9KTtcblxuICB9LFxuXG4gIHJlc2V0OiAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1J1bnRpbWUgQnJvd3NlciAtIHJlc2V0ICcpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgcmVzZXRFdnQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5kYXRhLnRvID09PSAncnVudGltZTpydW50aW1lUmVzZXQnKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCByZXNldEV2dCk7XG4gICAgICAgICAgcmVzb2x2ZShlLmRhdGEuYm9keSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHJlc2V0RXZ0KTtcbiAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHsgdG86ICdjb3JlOnJlc2V0JywgYm9keTogeyB9IH0sICcqJyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgbG9naW46IChpZHApID0+IHtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgbG9hZGVkID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGF0YS50byA9PT0gJ3J1bnRpbWU6bG9nZ2VkSW4nKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsb2FkZWQpO1xuICAgICAgICAgIHJlc29sdmUoZS5kYXRhLmJvZHkpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsb2FkZWQpO1xuICAgICAgY29uc29sZS5sb2coJ0xvZ2dpbmcgd2l0aCBJRFA6ICcsIGlkcCk7XG4gICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7IHRvOiAnY29yZTpsb2dpbicsIGJvZHk6IHsgaWRwOiBpZHAgfSB9LCAnKicpO1xuICAgIH0pO1xuXG4gIH0sXG5cbiAgbGlzdGVuU2hvd0FkbWluOiAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBsb2FkZWQgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5kYXRhLnRvID09PSAncnVudGltZTpndWktbWFuYWdlcicpIHtcbiAgICAgICAgICBpZiAoZS5kYXRhLmJvZHkubWV0aG9kID09PSAndG9rZW5FeHBpcmVkJykge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsb2FkZWQpO1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxvYWRlZCk7XG4gICAgfSk7XG4gIH0sXG5cblxuICByZXF1aXJlUHJvdG9zdHViOiAoZG9tYWluKSA9PiB7XG4gICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0bzogJ2NvcmU6bG9hZFN0dWInLCBib2R5OiB7IGRvbWFpbjogZG9tYWluIH0gfSwgJyonKTtcbiAgfSxcblxuICBjbG9zZTogKGxvZ091dCA9IGZhbHNlKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1N0dWIgLSBsb2dnaW5nIG91dDogJywgbG9nT3V0KTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IGxvYWRlZCA9IChlKSA9PiB7XG4gICAgICAgIGlmIChlLmRhdGEudG8gPT09ICdydW50aW1lOnJ1bnRpbWVDbG9zZWQnKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsb2FkZWQpO1xuICAgICAgICAgIHJlc29sdmUocmVzb2x2ZShlLmRhdGEuYm9keSkpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsb2FkZWQpO1xuICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0bzogJ2NvcmU6Y2xvc2UnLCBib2R5OiB7IGxvZ091dDogbG9nT3V0IH0gfSwgJyonKTtcbiAgICB9KTtcbiAgfVxufTtcblxubGV0IEd1aU1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGUpID0+IHtcbiAgICBpZiAoZS5kYXRhLnRvID09PSAncnVudGltZTpndWktbWFuYWdlcicpIHtcblxuICAgICAgaWYgKGUuZGF0YS5ib2R5Lm1ldGhvZCA9PT0gJ3Nob3dBZG1pblBhZ2UnKSB7XG4gICAgICAgIGlmcmFtZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgaWZyYW1lLnN0eWxlLnpJbmRleCA9IDk5OTk5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGUuZGF0YS5ib2R5Lm1ldGhvZCA9PT0gJ2hpZGVBZG1pblBhZ2UnKSB7XG4gICAgICAgICAgaWZyYW1lLnN0eWxlLndpZHRoID0gJzQ4cHgnO1xuICAgICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSAnNDhweCc7XG4gICAgICAgICAgaWZyYW1lLnN0eWxlLnpJbmRleCA9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFJ1bnRpbWVVQVxuICogQHByb3BlcnR5IHtmdW5jdGlvbihSdW50aW1lIGRvbWFpbjogc3RyaW5nLCBSdW50aW1lIHVybDogc3RyaW5nLCBEZXZlbG9wbWVudCBtb2RlOiBib29sZWFuKTogUHJvbWlzZTxSdW50aW1lQWRhcHRlcj59IGluc3RhbGwgLSBJbnN0YWxscyBhIHJ1bnRpbWUgbG9jYWxseVxuICovXG5sZXQgUmV0aGlua0Jyb3dzZXIgPSB7XG4gIGluc3RhbGw6IGZ1bmN0aW9uICh7IGRvbWFpbiwgcnVudGltZVVSTCwgZGV2ZWxvcG1lbnQsIGluZGV4VVJMLCBzYW5kYm94VVJMLCBoaWRlQWRtaW4gfSA9IHt9KSB7XG4gICAgY29uc29sZS5pbmZvKCdJbnN0YWxsOiAnLCBkb21haW4sIHJ1bnRpbWVVUkwsIGRldmVsb3BtZW50LCBpbmRleFVSTCwgc2FuZGJveFVSTCwgaGlkZUFkbWluKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IHJ1bnRpbWUgPSB0aGlzLl9nZXRSdW50aW1lKHJ1bnRpbWVVUkwsIGRvbWFpbiwgZGV2ZWxvcG1lbnQsIGluZGV4VVJMLCBzYW5kYm94VVJMLCBoaWRlQWRtaW4pO1xuICAgICAgaWZyYW1lID0gY3JlYXRlSWZyYW1lKGAke3J1bnRpbWUuaW5kZXhVUkx9P2RvbWFpbj0ke3J1bnRpbWUuZG9tYWlufSZydW50aW1lPSR7cnVudGltZS51cmx9JmRldmVsb3BtZW50PSR7ZGV2ZWxvcG1lbnR9YCwgOTk5OTksIGhpZGVBZG1pbik7XG4gICAgICBsZXQgaW5zdGFsbGVkID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGF0YS50byA9PT0gJ3J1bnRpbWU6aW5zdGFsbGVkJykge1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaW5zdGFsbGVkKTtcbiAgICAgICAgICByZXNvbHZlKHJ1bnRpbWVBZGFwdGVyKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaW5zdGFsbGVkKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGF0YS50byAmJiBlLmRhdGEudG8gPT09ICdydW50aW1lOmNyZWF0ZVNhbmRib3hXaW5kb3cnKSB7XG4gICAgICAgICAgY29uc3QgaWZyID0gY3JlYXRlSWZyYW1lKHJ1bnRpbWUuc2FuZGJveFVSTCwgdW5kZWZpbmVkLCBoaWRlQWRtaW4pO1xuICAgICAgICAgIGlmci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgICAgICAgaWZyLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoZS5kYXRhLCAnKicsIGUucG9ydHMpO1xuICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBhcHAuY3JlYXRlKGlmcmFtZSk7XG4gICAgICBHdWlNYW5hZ2VyKCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgX2dldFJ1bnRpbWUocnVudGltZVVSTCwgZG9tYWluLCBkZXZlbG9wbWVudCwgaW5kZXhVUkwsIHNhbmRib3hVUkwpIHtcbiAgICBpZiAoZGV2ZWxvcG1lbnQpIHtcbiAgICAgIHJ1bnRpbWVVUkwgPSBydW50aW1lVVJMIHx8ICdoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4nICsgZG9tYWluICsgJy8ud2VsbC1rbm93bi9ydW50aW1lL1J1bnRpbWUnO1xuICAgICAgZG9tYWluID0gZG9tYWluIHx8IG5ldyBVUkkocnVudGltZVVSTCkuaG9zdCgpO1xuICAgICAgaW5kZXhVUkwgPSBpbmRleFVSTCB8fCAnaHR0cHM6Ly8nICsgZG9tYWluICsgJy8ud2VsbC1rbm93bi9ydW50aW1lL2luZGV4Lmh0bWwnO1xuICAgICAgc2FuZGJveFVSTCA9IHNhbmRib3hVUkwgfHwgJ2h0dHBzOi8vJyArIGRvbWFpbiArICcvLndlbGwta25vd24vcnVudGltZS9zYW5kYm94Lmh0bWwnO1xuICAgIH0gZWxzZSB7XG4gICAgICBydW50aW1lVVJMID0gcnVudGltZVVSTCB8fCBgaHR0cHM6Ly9jYXRhbG9ndWUuJHtkb21haW59Ly53ZWxsLWtub3duL3J1bnRpbWUvZGVmYXVsdGA7XG4gICAgICBkb21haW4gPSBkb21haW4gfHwgbmV3IFVSSShydW50aW1lVVJMKS5ob3N0KCkucmVwbGFjZSgnY2F0YWxvZ3VlLicsICcnKTtcbiAgICAgIGluZGV4VVJMID0gaW5kZXhVUkwgfHwgJ2h0dHBzOi8vJyArIGRvbWFpbiArICcvLndlbGwta25vd24vcnVudGltZS9pbmRleC5odG1sJztcbiAgICAgIHNhbmRib3hVUkwgPSBzYW5kYm94VVJMIHx8ICdodHRwczovLycgKyBkb21haW4gKyAnLy53ZWxsLWtub3duL3J1bnRpbWUvc2FuZGJveC5odG1sJztcbiAgICB9XG5cbiAgICBjb25zb2xlLmluZm8oJ2dldCBSdW50aW1lOiAnLCBydW50aW1lVVJMLCBkb21haW4sIGluZGV4VVJMLCBzYW5kYm94VVJMKTtcblxuICAgIHJldHVybiB7XG4gICAgICB1cmw6IHJ1bnRpbWVVUkwsXG4gICAgICBkb21haW46IGRvbWFpbixcbiAgICAgIGluZGV4VVJMOiBpbmRleFVSTCxcbiAgICAgIHNhbmRib3hVUkw6IHNhbmRib3hVUkxcbiAgICB9O1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSZXRoaW5rQnJvd3NlcjtcbiIsIi8qKlxuKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0FcbiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSURcbiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMXG4qIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WXG4qIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQVxuKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHXG4qIENvcHlyaWdodCAyMDE2IEFwaXplZVxuKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTlxuKlxuKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4qIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuKlxuKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKlxuKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4qIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4qIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKi9cblxuLyoqXG4gKiBAZXh0ZXJuYWwge2lmcmFtZX0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2lmcmFtZVxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpZnJhbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgLSBVcmwgdG8gbG9hZCBpbnRvIHRoZSBpZnJhbWVcbiAqIEByZXR1cm4ge2lmcmFtZX0gLSBpRnJhbWUgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKHNyYywgekluZGV4ID0gLTEwLCBoaWRlQWRtaW4gPSBmYWxzZSkge1xuICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3JldGhpbmsnKTtcbiAgaWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgaWZyYW1lLnN0eWxlLnRvcCA9ICcwJztcbiAgaWZyYW1lLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICBpZnJhbWUuc3R5bGUuYm9yZGVyID0gJzAnO1xuICBpZnJhbWUuc3R5bGUuekluZGV4ID0gekluZGV4O1xuICBpZnJhbWUud2lkdGggPSAnNDhweCc7XG4gIGlmcmFtZS5oZWlnaHQgPSAnNDhweCc7XG4gIGlmcmFtZS50aXRsZSA9ICdyZVRISU5LLXByb2plY3QnO1xuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzZWFtbGVzcycsICcnKTtcbiAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTtcbiAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc2FuZGJveCcsICdhbGxvdy1mb3JtcyBhbGxvdy1zY3JpcHRzIGFsbG93LXBvcHVwcy10by1lc2NhcGUtc2FuZGJveCBhbGxvdy1wb3B1cHMgYWxsb3ctc2FtZS1vcmlnaW4gYWxsb3ctdG9wLW5hdmlnYXRpb24nKTtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICBpZiAoaGlkZUFkbWluID09IHRydWUpIHtcbiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICByZXR1cm4gaWZyYW1lO1xufVxuIl19"}